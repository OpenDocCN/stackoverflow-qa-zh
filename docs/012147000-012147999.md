# StackOverflow 问答 12147000-12147999

# c++ - 使用 Xcode 4 配置 googletest 的正确方法是什么？

> ID：12147000
> 
> 赞同：2
> 
> 时间：2012-08-27T17:54:49.137
> 
> 标签：c++, xcode, unit-testing, xcode4, googletest

我按照位于[https://github.com/google/googletest/blob/master/googletest/docs/XcodeGuide.md](https://github.com/google/googletest/blob/master/googletest/docs/XcodeGuide.md)的说明设置 googletest 以使用 Xcode。但是，这些说明似乎是为 Xcode 3 编写的。本文提到的许多事情在 Xcode 4 中都发生了变化。让 google test 与 Xcode 4 一起工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-27T14:26:55.650

我建议使用开源[xcode-googletest](https://github.com/mattstevens/xcode-googletest)以便与 Xcode 测试框架 (XCTest) 集成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:31:17.927

1.  Follow the instructions located at [https://github.com/google/googletest/blob/master/googletest/docs/XcodeGuide.md](https://github.com/google/googletest/blob/master/googletest/docs/XcodeGuide.md) to build the gtest.framework package.
2.  Create a new command line tool target.
3.  Copy the contents of the main.cpp file in the googletest framework into your new main.cpp file for your target. Your main function will kick off the google test.
4.  Execute the new target when you want to run your unit tests.

# pdf - 是否有将大型 PDF 图像存储为文件（BMP/PNG/等）的工具或技巧？

> ID：12147002
> 
> 赞同：0
> 
> 时间：2012-08-27T17:55:01.113
> 
> 标签：pdf, png, converter

这不是一个严格的编程问题，但它与我需要执行这个以制作 iPhone 应用程序的编程任务有关。

我有一个带有大图像（例如校园地图）的 PDF 文件，我想将其存储为 PNG 图像以作为资源包含在应用程序中。我想要的图像本身比屏幕区域大得多（大得多，大约 4000x4000 像素）。所以我不能只截取 PDF 的单个屏幕截图并将其保存为 PNG。我知道实现这一点的唯一方法是拍摄图像不同部分的许多屏幕截图，然后在图像编辑器中手动将它们拼接在一起。将有 8-10 张图像拼接在一起，如果不是更多的话。

我想知道是否有人知道这样做更有效的方法？Acrobat PDF 阅读器不允许这样做。我可以使用 Windows 或 MacOS 中的任何工具或技巧吗？谷歌搜索这并没有带来任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:05:34.093

您可以使用[Ghostscript](http://ghostscript.com/)将您的 pdf 转换为 png。类似的命令

```
 gs -sDEVICE=png16m -r600 -o my_Map.png my_Map.pdf 
```

将为您提供来自pdf图像的png。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:00:02.330

也可以选择直接使用 PDF，iOS 对阅读 PDF 有很好的支持，请参阅 Apple 的[ZoomingPDFViewer](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html)示例代码。

至于您的实际问题，我不确定是否有现有的工具可以完全满足您的需求（尽管我猜有），但是制作一个小的 Cocoa 命令行工具也很容易使用 Core Graphics 将 PDF 转换为多个位图图块。

# dom - 如何在 Chrome 中以当前状态转储整个 Web DOM？

> ID：12147007
> 
> 赞同：40
> 
> 时间：2012-08-27T17:55:40.950
> 
> 标签：dom, dump, google-chrome-devtools

我想将当前的 DOM 转储到一个文件中并能够离线查看它。本质上，我有一个过时的页面版本，我想保留它以进行比较。一旦我关闭浏览器，我就会丢失它，所以我想将 DOM 原样保存。

在 Firefox 中执行此操作[已经有了答案，](https://stackoverflow.com/q/4170331/266535)但我如何在 Chrome 中执行此操作？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-07T18:29:27.653

使用 Web Inspector (F12)，转到 Elements 选项卡，右键单击`<html>`代码中的标记并选择`Copy`-> `Copy outerHTML`。然后将其粘贴到新文件中并保存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-19T21:35:14.970

# 命令行解决方案

使用较新版本的 Chrome 很容易做到这一点：

```
google-chrome --headless --dump-dom 'http://www.yahoo.com' 
```

（OP 可能没有一直在寻找命令行解决方案，但是在搜索时此搜索结果看起来很高，因此其他人可能会觉得它很有用）

* * *

### 原始答案 2017

我最喜欢的方法是：

```
docker run -it --rm --name chrome --shm-size=1024m --cap-add=SYS_ADMIN --entrypoint=/usr/bin/google-chrome-unstable yukinying/chrome-headless-browser --headless --disable-gpu --dump-dom https://www.facebook.com 
```

如果您不熟悉 Docker 的工作原理，请耐心等待 - 第一次会很慢，但后续调用会很快。

* * *

**其他信息**

*经测试*

**Ubuntu 16**

```
Linux intel-nuc 4.4.0-21-generic #37-Ubuntu SMP Mon Apr 18 18:33:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux 
```

码头工人版本：

```
Docker version 1.10.3, build 20f81dd 
```

**Mac OS X 塞拉利昂**

```
Darwin MacBook-Pro.local 16.7.0 Darwin Kernel Version 16.7.0: Thu Jun 15 17:36:27 PDT 2017; root:xnu-3789.70.16~2/RELEASE_X86_64 x86_64 i386 MacBookPro14,3 Darwin 
```

码头工人版本：

```
Docker version 17.06.1-ce, build 874a737 
```

如果您安装`tidy`，您也可以缩进 HTML。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-04-27T13:53:49.370

在 Chrome 开发工具控制台中，键入`document.documentElement.outerHTML`（使用选项卡按钮自动完成以保存击键）并按 Enter 以查看显示的 DOM 文本。要将其复制到剪贴板并将其粘贴到其他位置，请`copy(document.documentElement.outerHTML)`改用。

Damon 的回答也不错（在 Dev Tools 中，单击 Elements，右键单击`<html>`，单击 Copy > Copy outerHTML），但我发现 Console 命令更容易。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-26T18:10:35.390

我目前使用的 Chrome 版本为 53.0.2785.113 m。其他答案似乎不再有效。要正确复制所有子/后代元素，用户现在必须右键单击，`<html>`然后在复制前单击“全部展开”。否则，您将不会递归复制所有元素。正常的 Ctrl+C 将复制`<html>`已展开的所有内容。

# jquery - 动态单选按钮组 .On 处理程序（jquery）

> ID：12147015
> 
> 赞同：0
> 
> 时间：2012-08-27T17:56:15.013
> 
> 标签：jquery, dynamic, event-handling, radio-button

我有两个单选按钮（级别 1），它们根据所选值动态创建新单选按钮列表（级别 2）。

此处列出了检索列表的代码

```
while($row=odbc_fetch_array($res))
{
$dept = $row['dept'];
echo "<input type='radio' class='radio' value='".$dept."' name='lvl2'/>".$dept." &nbsp  &nbsp &nbsp &nbsp ";
} 
```

我在用

```
$('input[name="lvl1"]').click(function(){} 
```

从第一组单选按钮中获取值。然而

```
$('input[name="lvl2"]').on('click', function(){
        $("span").text ("hi");
}); 
```

不管用。

我将深入研究动态按钮的第 3 级和第 4 级，并且需要让 on click 处理程序工作以将值传递到每个级别的 SQL 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:58:51.703

如果收音机是动态的，您必须委托该事件：

```
$(document).on('click', 'input[name="lvl2"]', function(){
    $("span").text ("hi");
}); 
```

并用最接近的非动态父级替换文档，`change`即使有人决定使用键盘，也可以使用该事件。

# ios - 修改核心数据模型后重新创建类定义的更好方法？

> ID：12147016
> 
> 赞同：8
> 
> 时间：2012-08-27T17:56:16.520
> 
> 标签：ios, xcode, core-data

在 XCode 中设计核心数据模型时，可以通过以下方式自动生成 NSManagedObject 子类定义（.m 和 .h 文件）

1.  选择**实体**
2.  **从EDITOR**菜单中选择“创建 NSManagedObject 子类”

之后，你可能会在这些类中添加大量代码，如果之后由于某种原因必须大量修改数据模型设置怎么办？为了在数据模型上反映这些变化，有没有自动的方法来做到这一点？或者您必须手动完成所有操作。

目前，如果我尝试再次（自动）从 EDIT 菜单重新创建这些类定义，它将替换所有当前文件。所有添加的代码都会消失。

我真的希望未来版本的 Xcode 可以添加一个智能功能：自动更新默认类定义而不会丢失添加的工作。也许我太懒了。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:09:49.077

你遇到了一个常见的问题。暂时你还停留在用 Xcode 创建托管对象子类的方法上。知道了这一点，您可以：

*   **围绕它进行设计**

    对于简单的情况，您可以使用类别向您的`NSManagedObject`子类添加功能（尽管不是状态）。每次数据模型更改时，类别文件中的代码显然不会被覆盖。

*   **不要使用 Xcode**

    [Mogenerator](https://github.com/rentzsch/mogenerator/wiki)是一个很好的工具，旨在解决这个问题。它为每个实体创建*两个*类而不是一个，从而允许 Xcode 管理一个，而您管理另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T13:18:55.777

Apple 似乎已经解决了 XCode 7 的问题：现在它会自动创建实体和实体的类别及其核心数据属性。重新生成时，它只会更新类别，而不会损坏实体类中的自定义代码。看到这个[链接](https://stackoverflow.com/questions/33106098/xcode-7-generates-core-data-entity-with-additional-coredataproperties-category)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T03:47:15.410

您可以创建一个具有不同名称的类并将生成的字段粘贴到旧类中

# java - 如何在android中将音频文件发送到服务器？

> ID：12147020
> 
> 赞同：1
> 
> 时间：2012-08-27T17:56:25.803
> 
> 标签：java, android, android-ndk

```
public static String fileUploadFromPath(String url, String path) throws Throwable {

        System.out.println("IN fileUploadFromPath ");
        String responseData = "";
        String NL = System.getProperty("line.separator");

        try {

            System.out.println("url ************ " + url);
            File file = new File(path);
            System.out.println("file ************ " + file.getAbsolutePath()
                    + " : " + file.exists());
            StringBuilder text = new StringBuilder();

            if (file.exists()) {
                BufferedReader br = new BufferedReader(new FileReader(file));
                String line;

                while ((line = br.readLine()) != null) {
                    text.append(line);
                    text.append(NL);
                }
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost postRequest = new HttpPost(url);
                // System.out.println("postRequest ************ " +
                // postRequest);
                MultipartEntity multipartContent = new MultipartEntity();
                ByteArrayBody key = new ByteArrayBody(text.toString()
                        .getBytes(), AgricultureUtils.getInstance()
                        .getTimeStamp() + ".3gp");
                multipartContent.addPart(AgricultureUtils.getInstance()
                        .getTimeStamp() + ".3gp", key);
                postRequest.setEntity(multipartContent);
                HttpResponse response = httpClient.execute(postRequest);
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        response.getEntity().getContent()));
                StringBuffer sb = new StringBuffer("");
                String content = "";
                while ((content = in.readLine()) != null) {
                    sb.append(content + NL);
                }
                in.close();

                /*
                 * File myDir = new File(Constants.dirctory); if
                 * (!myDir.exists()) { myDir.mkdirs(); } File myFile = new
                 * File(myDir, fileName); FileOutputStream mFileOutStream = new
                 * FileOutputStream(myFile);
                 * mFileOutStream.write(sb.toString().getBytes());
                 * mFileOutStream.flush(); mFileOutStream.close();
                 */

                System.out.println("response " + sb);
            }

        } catch (Throwable e) {
            System.out.println("Exception In Webservice ----- " + e);
            throw e;
        }
        return responseData;
    } 
```

我想将音频文件上传到服务器。

我可以通过上面的代码将音频文件上传到服务器，但文件不工作（不在系统中播放）。如果你有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:10:55.287

您应该既不使用`FileReader`也不使用`StringBuilder`此处，因为它将数据视为*字符*（根据默认系统字符集编码）。真的，你根本不应该使用 a `Reader`。二进制数据应通过处理`InputStream`，例如

```
final ByteArrayOutputStream out = new ByteArrayOutputStream();
try (final InputStream in = new FileInputStream(file)) {
  final byte[] buf = new byte[2048];
  int n;
  while ((n = in.read(buf)) >= 0) {
    out.write(buf, 0, n);
  }
}
final byte[] data = out.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:08:04.200

你检查服务器上的校验和了吗？它到达时未经修改吗？

如果没有，请尝试其他方法发布文件。这对我帮助很大：

```
 /**
        * Post request (upload files)
        * @param sUrl
        * @param params Form data
        * @param files
        * @return
        */
        public static HttpData post(String sUrl, Hashtable<String, String> params, ArrayList<File> files) {
                HttpData ret = new HttpData();
                try {
                        String boundary = "*****************************************";
                        String newLine = "rn";
                        int bytesAvailable;
                        int bufferSize;
                        int maxBufferSize = 4096;
                        int bytesRead;

                        URL url = new URL(sUrl);
                        HttpURLConnection con = (HttpURLConnection) url.openConnection();
                        con.setDoInput(true);
                        con.setDoOutput(true);
                        con.setUseCaches(false);
                        con.setRequestMethod("POST");
                        con.setRequestProperty("Connection", "Keep-Alive");
                        con.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
                        DataOutputStream dos = new DataOutputStream(con.getOutputStream());

                        //dos.writeChars(params);

                        //upload files
                        for (int i=0; i<files.size(); i++) {
                                Log.i("HREQ", i+"");
                                FileInputStream fis = new FileInputStream(files.get(i));
                                dos.writeBytes("--" + boundary + newLine);
                                dos.writeBytes("Content-Disposition: form-data; "
                                + "name="file_"+i+"";filename=""
                                + files.get(i).getPath() +""" + newLine + newLine);
                                bytesAvailable = fis.available();
                                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                                byte[] buffer = new byte[bufferSize];
                                bytesRead = fis.read(buffer, 0, bufferSize);
                                while (bytesRead > 0) {
                                        dos.write(buffer, 0, bufferSize);
                                        bytesAvailable = fis.available();
                                        bufferSize = Math.min(bytesAvailable, maxBufferSize);
                                        bytesRead = fis.read(buffer, 0, bufferSize);
                                }
                                dos.writeBytes(newLine);
                                dos.writeBytes("--" + boundary + "--" + newLine);
                                fis.close();
                        }
                        // Now write the data

                        Enumeration keys = params.keys();
                        String key, val;
                        while (keys.hasMoreElements()) {
                                key = keys.nextElement().toString();
                                val = params.get(key);
                                dos.writeBytes("--" + boundary + newLine);
                                dos.writeBytes("Content-Disposition: form-data;name=""
                                + key+""" + newLine + newLine + val);
                                dos.writeBytes(newLine);
                                dos.writeBytes("--" + boundary + "--" + newLine);

                        }
                        dos.flush();

                        BufferedReader rd = new BufferedReader(
                        new InputStreamReader(con.getInputStream()));
                        String line;
                        while ((line = rd.readLine()) != null) {
                                ret.content += line + "rn";
                        }
                        //get headers
                        Map<String, List<String>> headers = con.getHeaderFields();
                        Set<Entry<String, List<String>>> hKeys = headers.entrySet();
                        for (Iterator<Entry<String, List<String>>> i = hKeys.iterator(); i.hasNext();) {
                                Entry<String, List<String>> m = i.next();

                                Log.w("HEADER_KEY", m.getKey() + "");
                                ret.headers.put(m.getKey(), m.getValue().toString());
                                if (m.getKey().equals("set-cookie"))
                                ret.cookies.put(m.getKey(), m.getValue().toString());
                        }
                        dos.close();
                        rd.close();
                } catch (MalformedURLException me) {

                } catch (IOException ie) {

                } catch (Exception e) {
                        Log.e("HREQ", "Exception: "+e.toString());
                }
                return ret;
        } 
```

这取自：

[http://moazzam-khan.com/blog/?p=490](http://moazzam-khan.com/blog/?p=490)

检查依赖项和使用情况的链接。

# binding - Emacs ESS 键绑定“小于”破折号

> ID：12147022
> 
> 赞同：0
> 
> 时间：2012-08-27T17:56:28.867
> 
> 标签：binding, emacs, key, mode, ess

如何在 Emacs ESS 模式下高效编程是关键

```
"<"     "[less than]" 
```

到

```
"<- "   "[less than][dash][space]" 
```

就像 R 的 MacOS 版本一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:05:40.343

看起来文件中有一个现有的函数`ess-s-l.el`。看来您可以`ess-S-assign-key`为此使用变量：

```
;; This is by Seth Falcon, modeled after ess-toggle-underscore (see below).
(defun ess-toggle-S-assign-key (force)
  "Possibly bind the key in `ess-S-assign-key' to inserting `ess-S-assign'.
If `ess-S-assign-key' is \"_\", simply use \\[ess-toggle-underscore].
Otherwise, unless the prefix argument FORCE is set,
toggle between the new and the previous assignment."
  (interactive "P")
  (require 'ess-mode)
  (require 'ess-inf)
  (let ((current-action (lookup-key ess-mode-map ess-S-assign-key))
        (insert-S-assign (lambda() (interactive)
                           (delete-horizontal-space) (insert ess-S-assign))))
    (if (and (stringp ess-S-assign-key)
             (string= ess-S-assign-key "_"))
        (ess-toggle-underscore force)
      ;; else "do things here"
      (let* ((current-is-S-assign (eq current-action insert-S-assign))
             (new-action (if force insert-S-assign
                           ;; else "not force" (default):
                           (if (or current-is-S-assign
                                   (eq ess-S-assign-key-last insert-S-assign))
                               ess-S-assign-key-last
                             insert-S-assign))))
        (message "[ess-toggle-S-assign-key:] current: '%s', new: '%s'"
                 current-action new-action)
        (define-key ess-mode-map          ess-S-assign-key new-action)
        (define-key inferior-ess-mode-map ess-S-assign-key new-action)
        (if (not (and force current-is-S-assign))
            (setq ess-S-assign-key-last current-action)))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:15:33.837

也许这取决于 ESS 版本。

在我的 ESS (12.03) 版本中，您似乎可以绑定`">"`到`'ess-insert-S-assign`以获得您喜欢的内容。

查看`ess-`可供您使用的命令（`M-x ess-<TAB><TAB>`并在`*Completions*`刚刚弹出的缓冲区中搜索`assign`），看看哪个命令可能是您应该绑定的罪魁祸首`">"`。

如果这对您不起作用——也许您可能需要升级。

# php - CakeDC(cakePHP) 评论插件

> ID：12147026
> 
> 赞同：0
> 
> 时间：2012-08-27T17:56:45.160
> 
> 标签：php, cakephp, plugins

首先，我将从我在 MAC 上的事实开始。

我已经 git 将 cakeDC 评论插件克隆到我的应用程序插件目录中。在尝试执行给定的命令来为此插件设置数据库表时，我收到此错误：

```
sudo Console/cake scheme create --plugin Comments --name app

PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20090626/php_mysql.dll' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20090626/php_mysql.dll, 9): image not found in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20090626/php_mysqli.dll' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20090626/php_mysqli.dll, 9): image not found in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20090626/php_openssl.dll' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20090626/php_openssl.dll, 9): image not found in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20090626/php_pdo_mysql.dll' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20090626/php_pdo_mysql.dll, 9): image not found in Unknown on line 0
Error: Shell class SchemeShell could not be found.
#0 /Users/bellis/workspace/intranet/lib/Cake/Console/ShellDispatcher.php(167): ShellDispatcher->_getShell('scheme')
#1 /Users/bellis/workspace/intranet/lib/Cake/Console/ShellDispatcher.php(69): ShellDispatcher->dispatch()
#2 /Users/bellis/workspace/intranet/app/Console/cake.php(33): ShellDispatcher::run(Array)
#3 {main} 
```

为什么这个命令试图在我的 MAC 安装上使用 .dll 文件（仅限 Windows）。我在这里缺少什么吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T13:26:22.193

```
Error: Shell class SchemeShell could not be found.
#0 C:\wamp\www\lib\Cake\Console\ShellDispatcher.php(200): ShellDispatcher->_getShell('scheme')
#1 C:\wamp\www\lib\Cake\Console\ShellDispatcher.php(66): ShellDispatcher->dispatch()
#2 C:\wamp\www\app\Console\cake.php(47): ShellDispatcher::run(Array)
#3 {main} 
```

所以我只花了大约 15 分钟的时间浏览堆栈跟踪，试图弄清楚这一点。我在任何地方都找不到*SchemeShell.php*文件，但我确实注意到*Cake/Console/Command*目录中有一个*SchemaShell.php 。*看了一会后，我更仔细地查看了我输入的控制台命令。

 *```
c:\wamp\www\app>Console\cake scheme create DbAcl 
```

在这一点上，我把手掌放在额头上，花了一点时间嘲笑自己。我试图创建一个**模式**，但告诉 Cake 为我制作一个**scheme**，这显然对我来说效果不佳。

> “经验只是我们给错误起的名字”——奥斯卡·王尔德

终于成功了...

```
c:\wamp\www\app>Console\cake schema create DbAcl

The following table(s) will be created.
acos
aros
aros_acos
Are you sure you want to create the table(s)? (y/n)
[y] > y
Creating table(s).
acos updated.
aros updated.
aros_acos updated.
End create. 
```*

# c# - 如何在字典中存储任意数量的任意类型的数组

> ID：12147033
> 
> 赞同：1
> 
> 时间：2012-08-27T17:57:26.373
> 
> 标签：c#, .net, vb.net, data-structures

我正在尝试构建一个数据结构，可以通过我正在运行的一组不同测试的跟踪结果来存储试验。测试都包含许多跟踪，但是我想要保存和以后使用的一些信息对于不同的测试是不同的。例如，TestA 的结果可能如下所示：

```
Trial(int)   WasResponseCorrect(bool)   WhichButtonWasPressed(string)   SimulusLevel(double)

   1                  false                         "Up"                         3.5
   2                  true                          "Left"                       6.5 
```

其中 TestB 可能有不同类型的结果字段：

```
Trial(int)    WasResponseCorrect(bool)    ColorPresented(string)    LetterPresented(char)     LetterGuessed(Char)
  1                     false                      green                     G                        C

  2                     false                      blue                      H                        F 
```

我正在考虑创建一个以字段名称作为键（例如 WasResponseCorrect）和字段值数组作为 dic 值的字典。我不知道该怎么做。也许有更好的方法来存储信息，但我想不出该怎么做。我正在使用 .net（VB 和 C#），但如果您知道其他语言的示例，我想我可以理解和转换大多数代码。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:08:33.213

在不了解您的需求的更多信息（例如，您将如何存储数据）的情况下，您似乎正在寻找多态性。也就是说，您有一个超类（称为`Trial`）和代表特定试验类型的子类。例如：

```
public class Trial {
    public int Id { get; set; }
    public bool WasResponseCorrect { get; set; } // if this is in every type of trial
    // anything else that is common to ALL trial types
}

public class TrialA : Trial {
    public string WhichButtonWasPressed { get; set; }
    public double SimulusLevel { get; set; }
}

public class TrialB : Trial {
    public string ColorPresented { get; set; }
    public char LetterPresented { get; set; }
    public char LetterGuessed { get; set; }
} 
```

这样您就可以拥有一个`Trial`对象列表，但这些对象的实际运行时类型可以是`TrialA`或`TrialB`。

# java - Android 文件系统上的目录和文件创建

> ID：12147039
> 
> 赞同：0
> 
> 时间：2012-08-27T17:57:49.973
> 
> 标签：java, android, io, filesystems

我正在尝试创建目录层次结构，然后将文件从我的资产复制到新创建的目录中。我已经在 stackoverflow 上使用了此处提供的代码示例，但我没有得到任何结果。基本上我的代码是这样的：

```
InputStream in = getAssets.open(mydb.sqlite);
File dir = new File("/data/data/my.package/databases/");

dir.mkdirs();
out = new FileOutputStream("/data/data/my.package/databases/mydb.sqlite");
while ((len = in.read(buffer)) > 0)
{
    out.write(buffer, 0, len);
}
out.flush();
out.close();
in.close 
```

这一切都在首次启动时的主要活动中完成，当然应该只完成一次。在代码运行之前，唯一存在的目录是 /data/。是的，它是一个数据库文件，但此时这无关紧要，因为我只是在复制文件，还没有尝试使用数据库代码访问它。

代码不会抛出任何异常，并且 dir.mkdirs() 返回 true。无论如何，不​​会创建目录并且不会复制文件。我已将 WRITE_EXTERNAL_STORAGE 的权限行添加到我的清单中，正如 FWIW 几个地方所建议的那样。我可以单步执行代码，一切似乎都很好。但当然不是。

我需要在这里寻找什么？文件权限问题？为什么代码认为一切都在那里（即，当它到达复制代码时，它不会抛出 FileNotFoundException）但实际上文件系统上什么都没有？

**编辑**：这是我学到的。getDir() 在 /data/data/my.package/app_* 中创建目录。不知道为什么它在目录名称上使用这个前缀。如果您需要将某些内容放在标准位置，例如数据库/或文件/，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:00:38.840

请改用 openFileOutput，因为 /data/data 是内部存储，您应该只使用 Android API 在那里获取文件句柄。请参阅：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

编辑： /data/data/my.package 由 openFileOutput/getDir 处理，因此您可以使用 getDir('databases',MODE_PRIVATE) 创建目录并在那里创建文件。

Edit2：来自 getDir 文档：

> 您可以使用返回的 File 对象在此目录中创建和访问文件。

# bash - 脚本和浮点中的除法

> ID：12147040
> 
> 赞同：46
> 
> 时间：2012-08-27T17:57:51.323
> 
> 标签：bash, shell

我想在我的脚本中执行以下操作：

```
1 - ((m - 20) / 34) 
```

我想将此操作的结果分配给另一个变量。我希望我的脚本使用浮点数学。例如，对于 m = 34：

```
results = 1 - ((34 - 20) / 34) == 0.588 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-27T18:09:24.107

你可以用`bc`计算器。`scale`如果您从默认值 0开始设置 increease，它将使用小数（不是二进制浮点数）进行任意精度数学运算：

```
$ m=34
$ bc <<< "scale = 10; 1 - (($m - 20) / 34)"
.5882352942 
```

该`-l`选项将加载标准数学库并将比例默认为 20：

```
$ bc -l <<< "1 - (($m - 20) / 34)"
.58823529411764705883 
```

然后，您可以使用 printf 格式化输出，如果您选择：

```
printf "%.3f\n" "$(bc -l ...)" 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-27T18:06:43.110

Bash 不做浮点数学运算。您可以使用 awk 或 bc 来处理此问题。这是一个 awk 示例：

```
$ m=34; awk -v m=$m 'BEGIN { print 1 - ((m - 20) / 34) }'
0.588235 
```

要将输出分配给变量：

```
var=$(awk -v m=$m 'BEGIN { print 1 - ((m - 20) / 34) }') 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-06-26T13:18:58.917

用浮点结果教授 bash 例如整数除法：

```
#!/bin/bash

div ()  # Arguments: dividend and divisor
{
        if [ $2 -eq 0 ]; then echo division by 0; exit; fi
        local p=12                            # precision
        local c=${c:-0}                       # precision counter
        local d=.                             # decimal separator
        local r=$(($1/$2)); echo -n $r        # result of division
        local m=$(($r*$2))
        [ $c -eq 0 ] && [ $m -ne $1 ] && echo -n $d
        [ $1 -eq $m ] || [ $c -eq $p ] && echo && return
        local e=$(($1-$m))
        c=$(($c+1))
        div $(($e*10)) $2
}  

    result=$(div 1080 633)                  # write to variable
    echo $result

    result=$(div 7 34)
    echo $result

    result=$(div 8 32)
    echo $result

    result=$(div 246891510 2)
    echo $result

    result=$(div 5000000 177)
    echo $result 
```

输出：

```
 1.706161137440
    0.205882352941
    0.25
    123445755
    28248.587570621468 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-01-03T13:58:33.453

```
echo $a/$b|bc -l 
```

给出结果。

例子：

```
read a b
echo $a/$b|bc -l 
```

输入 a & b 值为 10 3，得到 3.3333333333

如果要将值存储在另一个变量中，请使用代码

```
read a b
c=`echo $a/$b|bc -l`
echo $c 
```

它也给出了与上面相同的结果。试试看...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T16:53:28.670

我知道这是一个旧线程，但这似乎是一个有趣的项目，无需使用`bc`或调用递归即可解决。我确信它可以改进，但这最大化了我的技能。

```
numerator=5
denominator=7 # - 0 -> returns "undef"
decimal_places=4 # - 0 -> same as echo $(( $numerator / $denominator ))
_result_sign=""
let _dp_exp=10**decimal_places
if [ $denominator -eq 0 ]; then _div_result_int_large=0; else let _div_result_int_large=$((numerator * _dp_exp / denominator)); fi
if [ $_div_result_int_large -lt 0 ]; then let _div_result_int_large=$(( _div_result_int_large * -1 )); _result_sign="-"; fi
let _div_result_int=$((_div_result_int_large / _dp_exp))
let _div_result_mant=$((_div_result_int_large - _div_result_int * _dp_exp))
let _dp_lzeros=$((decimal_places - ${#_div_result_mant}))
printf -v _div_result_mant_padded "%.${_dp_lzeros}d$_div_result_mant"
div_result="$_result_sign$_div_result_int"
if [ $decimal_places -gt 0 ]; then div_result="$_result_sign$_div_result_int.$_div_result_mant_padded"; fi
if [ $denominator -eq 0 ]; then div_result="undef"; fi
echo $div_result 
```

示例输出：

```
numerator=5
denominator=7
decimal_places=5
-> 0.71428

numerator=250
denominator=13
decimal_places=0
-> 19

numerator=-5
denominator=6
decimal_places=2
-> -0.83

numerator=3
denominator=0 # - uh-oh
decimal_places=2 # - can be anything, in this case
-> undef 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-24T04:58:50.867

使用这个脚本用最喜欢的编辑器打开这个文件，比如：

```
$ sudo vim /usr/bin/div 
```

然后粘贴这段代码：

```
#!/bin/bash
# Author: Danial Rikhteh Garan (danial.rikhtehgaran@gmail.com)

if [[ -z "$1" ]] || [[ -z "$2" ]]; then
    echo "Please input two number"
    echo "for 100/50 use: div 10 50"
    exit 1;
fi

div=$(echo "$1/$2" | bc -l);
echo 0$div | sed 's/[0]*$//g' 
```

现在将其更改为 755：

```
$ sudo chmod 755 /usr/bin/div 
```

现在使用它：

```
$ div 5 100
0.05 
```

在您的脚本中，您可以使用它：

```
var=$(div 5 100);
echo "$var" 
```

# git - 丢失 git stash 更改

> ID：12147042
> 
> 赞同：44
> 
> 时间：2012-08-27T17:57:56.737
> 
> 标签：git, git-stash

所以这就是发生的事情：我在一个分支'A'上并在那个分支上做了一个 Git stash。然后我切换到另一个分支'B'。我导航回分支“A”，但没有执行 Git stash pop。我切换到主分支，然后回到分支“A”。我现在正在尝试执行 git stash pop，但似乎无法恢复我的更改。我需要恢复该代码，但是每当我执行 git stash pop 时，我的文件更改都不会列出。我没有提交任何代码。

有没有办法恢复我所做的更改？非常感谢在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-03-16T16:38:14.157

我们也面临同样的问题。因此，以下是我们如何恢复丢失的更改：

1.  回到分支 B。

    > git结帐B

2.  使用`git reflog`选项来管理 reflog 信息。

    > git reflog --all

    **输出：**

    > f332d5c refs/stash@{0}：B 上的 WIP：aa1d0c1 xyz 提交消息

3.  现在，使用切换到分支 A`git checkout A`

4.  最后，恢复丢失的更改。

    > git stash apply **f332d5c**

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-27T20:22:11.453

Stashes 应该可以通过以下方式查看

```
git stash list 
```

或者

```
gitk --all 
```

此外，`git stash`不会存储未跟踪的文件。如果您这样做并随后执行`git checkout --force`了另一个分支以用另一个分支中的跟踪文件覆盖未跟踪的文件，那么您已经丢失了该内容。推荐的存储方式是

```
git stash -u 
```

这将防止这种类型的损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-09T20:53:40.350

类似的事情发生在我身上。简而言之，检查以确保您没有意外地将新文件推送到另一个分支。

这是发生在我身上的事情：我把我的东西藏起来了，从“开发”切换到“主”以快速进行修补程序。当我将修补程序推送到 master 时，我没有注意到我还将用于 dev 的新文件添加到 master 分支——我也认为 stash 包含这些文件。

# c# - 两个表不匹配列值

> ID：12147046
> 
> 赞同：-4
> 
> 时间：2012-08-27T17:58:14.507
> 
> 标签：c#, sql-server

我有两个表说 Table1（ID，Name，Description）和 Table2（ID，Name，Description）。

我需要从 Table1 中找出 Table2 中不存在的那些记录，如果记录存在，那么它会比较其名称和描述并显示哪一列不匹配。ID 是用于比较的字段。

例如

```
Table 1
( 1, Jon,Student) 

Table 2 
(1,Jon, Teacher) 
```

所以查询应该返回描述不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:13:11.413

你在寻找这样的东西吗？

```
SELECT
t1.id,
CASE
WHEN t2.id IS NULL THEN 'does not exist in table2'
WHEN t1.Name != t2.Name AND t1.Description = t2.Description THEN 'Name is different'
WHEN t1.Name = t2.Name AND t1.Description != t2.Description THEN 'Description is different'
ELSE 'Both Name and Description differ'
END AS what_is_the_difference
FROM
table1 t1
LEFT JOIN table2 t2 ON t1.id = t2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:06:51.127

您可以使用 SELECT 解决它

```
SELECT  TABLE1.ID,  CASE WHEN TABLE1.NAME <> TABLE2.NAME THEN 'NAME different' 
                         ELSE 'NAME equal'
                    END
                  , TABLE1.NAME, TABLE2.NAME
                  , CASE WHEN TABLE1.DESCRIPTION <> TABLE2.DESCRIPTION THEN 'DESCRIPTION different' 
                         ELSE 'DESCRIPTION equal'
                    END
                  , TABLE1.DESCRIPTION, TABLE2.DESCRIPTION
  FROM  TABLE1, TABLE2
 WHERE   TABLE1.ID = TABLE2.ID 
```

如果您只想要不同的联合行添加到 were 子句

```
AND (TABLE1.NAME <> TABLE2.NAME OR TABLE1.DESCRIPTION <> TABLE2.DESCRIPTION) 
```

如果其他表中可能没有 ID，则必须使用左连接

```
SELECT      TABLE1.ID,  
            CASE WHEN TABLE2.ID IS NULL THEN 'No corresponding row in TABLE2' END
            CASE WHEN TABLE1.NAME <> TABLE2.NAME THEN 'NAME different' ELSE 'NAME equal' END,           
            TABLE1.NAME, TABLE2.NAME
            CASE WHEN TABLE1.DESCRIPTION <> TABLE2.DESCRIPTION THEN 'DESCRIPTION different' ELSE 'DESCRIPTION equal' END,
            TABLE1.DESCRIPTION, TABLE2.DESCRIPTION
       FROM TABLE1
  LEFT JOIN TABLE2 ON TABLE1.ID = TABLE2.ID 
```

# python - 如何在 tkinter 中设置 mac osx 默认按钮

> ID：12147047
> 
> 赞同：3
> 
> 时间：2012-08-27T17:58:18.497
> 
> 标签：python, macos, tkinter

我正在使用 TkInter 在 python 中为 Mac OSX 开发一个简单的应用程序。

我想知道如何为 tkinter 中的对话框设置“默认按钮”。请参阅[人机界面指南](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Windows/Windows.html#//apple_ref/doc/uid/20000961-BABCAJID)以了解这意味着什么。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:06:26.757

Button 和 ttk.Button 小部件都有一个`default`属性。将其设置为`"active"`应该会给您所需的视觉外观。您需要将焦点设置到该按钮和/或添加绑定`<Return>`以调用该按钮。

# java - 使用延迟加载时 JSF 选项卡中的错误

> ID：12147048
> 
> 赞同：-1
> 
> 时间：2012-08-27T17:58:25.873
> 
> 标签：java, jsf, jsf-2

我正在研究使用延迟加载的 JSF 选项卡示例：

```
<h:form prependId="false">
    <h:panelGroup id="tabs" layout="block">
        <ul>
            <c:forEach items="#{DatacenterProfileController.tabs}" var="tab">
                <li><a href="##{tab.tabid}" onclick="$('#button_#{tab.tabid}').click()">#{tab.tabid}</a></li>
                <h:commandButton id="button_#{tab.tabid}" value="TabClick" action="#{DatacenterProfileController.switchPages(tab.tabid)}" style="display:none">
                    <f:ajax render="tabs"></f:ajax>
                </h:commandButton>  
            </c:forEach>
        </ul>

        <c:forEach items="#{DatacenterProfileController.tabs}" var="tab">
            <h:panelGroup id="#{tab.tabid}" layout="block" rendered="#{tab.tabid eq DatacenterProfileController.selectedTab}">
                <ui:include src="#{tab.tabfilename}"></ui:include>
            </h:panelGroup>
        </c:forEach>
    </h:panelGroup>
</h:form>

List<TabObject> tabs = new ArrayList<>();

    @PostConstruct
    public void init() {
        tabs.add(new TabObject("DCProfileTabZones.xhtml", "Zones"));
        tabs.add(new TabObject("DCProfileTabHVAC.xhtml", "HVAC"));
        tabs.add(new TabObject("DCProfileTabISPs.xhtml", "ISPs"));

    }
    String selectedTab = "Zones";

    public String getSelectedTab() {
        return selectedTab;
    }

    public void setSelectedTab(String selectedTab) {
        this.selectedTab = selectedTab;
    }

    public String switchPages(String selTab) {
        selectedTab = selTab;
        return selectedTab;
    }

    public List<TabObject> gettabs() {
        return tabs;
    }

    public void setTabs(List<TabObject> tabs) {
        this.tabs = tabs;
    }

    public class TabObject {

        String tabfilename;
        String tabid;

        public String gettabfilename() {
            return tabfilename;
        }

        public void settabfilename(String tabfilename) {
            this.tabfilename = tabfilename;
        }

        public String getTabid() {
            return tabid;
        }

        public void settabid(String tabid) {
            this.tabid = tabid;
        }

        public TabObject(String tabfilename, String tabid) {
            super();
            this.tabfilename = tabfilename;
            this.tabid = tabid;
        }
    } 
```

我注意到一个非常奇怪的错误。我有三个选项卡：区域、HVAC、ISP。如果我在单击选项卡时具有相同的 jsf 页面，则会打开具有相同名称的 JSF 页面。你能帮我修复这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:57:38.037

您的问题并不完全清楚，但我会冒险并建议您使用`ui:repeat`（[UI 重复教程](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CDkQFjAC&url=http://www.java.net/blog/driscoll/archive/2009/08/17/uirepeat-and-ajax&ei=HVA8UJKfB6P20gGku4DoCA&usg=AFQjCNGPN-HwsgseNGxR3w5vgjBixtuL8Q&sig2=fyL80KIfhx031mLTfK8Dog)）进行迭代，并确保您没有`@RequestScoped`为您的 Ajax 使用 bean。改用`@ViewScoped`豆子。

# accessibility - 用于 Web 可访问性的内嵌图像和高对比度模式

> ID：12147049
> 
> 赞同：5
> 
> 时间：2012-08-27T17:58:42.157
> 
> 标签：accessibility, screen-readers, high-contrast

我一直在关注关于高对比度模式和背景图像精灵的讨论，但我有一个关于内联图像和 HCM 的更基本的问题。对于在 HCM 上没有屏幕阅读器的低视力用户，他们是否会因为内嵌图像可能没有足够的对比度而难以看清？或者他们是否希望使用浏览器插件将内联图像替换为其替代文本？

我了解屏幕阅读器用户将受益，因为替代文本已被读出？但是，没有屏幕阅读器的低视力用户呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:56:14.800

> 对于在 HCM 上没有屏幕阅读器的低视力用户，他们是否会因为内嵌图像可能没有足够的对比度而难以看清？

有时，在高对比度模式下，图像会随着颜色的定义而变化，因此图像上的白色背景会变成黑色。我不知道这是否取决于图像类型或其他东西。有许多涉及洗色的障碍，而且很难100%覆盖*所有基础。*我会说创建具有[WCAG 2.0](http://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html)中定义的 4.5:1 色彩比的图像以覆盖尽可能多的基础是一个好主意。

> 或者他们是否希望使用浏览器插件将内联图像替换为其替代文本？

我不知道有谁会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:23:05.570

我将尝试回答我自己的问题：我认为 HCM 中的低视力用户会关闭图像，如下所述：http: [//kb.iu.edu/data/acpv.html#ie](http://kb.iu.edu/data/acpv.html#ie) 只显示替代文本和这就是为什么可以访问内联图像的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:12:47.743

您可能有兴趣阅读[Image Sprite 技术比较](http://yaccessibilityblog.com/examples/highcontrast/comparison.html)，因为没有单一的最佳方法。但是我会说假设 HCM 用户使用或不使用图像是一个错误的假设。重点应该简单地放在技术上：如果精灵或图像是或成为内容，那么它们需要有替代文本。当在 HCM 中它们成为被修改并影响用户获取信息的能力的实际内容时，您不能认为它们是背景和不重要的。

# asp.net - 在 AJAX 手风琴控件中使用 FindControl 查找标签

> ID：12147050
> 
> 赞同：0
> 
> 时间：2012-08-27T17:58:45.377
> 
> 标签：asp.net, ajax, vb.net, accordion, findcontrol

我在页面中定义了一个 AJAX Accordion 控件，在每个手风琴分支中我都有一个标签，该标签从 SQL 数据库中获取其值

```
<cc1:Accordion DataSourceID="sqlDSSomeGroup" ID="acrd" runat="server"  
  <ContentTemplate>
     <asp:Label ID="lbl" runat="server" Text='<%#Eval("SomeGroupID") %>' />
  </ContentTemplate>
</cc1:Accordion> 
```

标签显示正确的值。我的问题是如何使用 FindControl 在后面的代码中获取标签的值。现在，以下内容正确地找到了 Accordion。

```
Dim acc As AjaxControlToolkit.Accordion = CType(placeHolder.FindControl("acrd"), AjaxControlToolkit.Accordion) 
```

但是，当我尝试使用以下方法获取标签的值时，即使选择了不同的手风琴分支，我也只能像选择了第一个手风琴一样获得该值。我知道我必须以某种方式在某处使用选定的索引，但我不知道在哪里以及如何使用。任何帮助将不胜感激？

```
Dim IDinCodeBehind As Label
IDinCodeBehind = CType(acc.FindControl("lbl"), Label) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:40:24.580

我做了一个小演示来**获得 selectedPane**。在此窗格中**访问 Controls 集合**并找到相应的标签

```
public partial class demo : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            // init data, demo purposes
            List<Person> liste = new List<Person>();
            liste.Add(new Person() { ID = 0, Name = "jon0" });
            liste.Add(new Person() { ID = 1, Name = "jon1" });
            liste.Add(new Person() { ID = 2, Name = "jon2" });
            liste.Add(new Person() { ID = 3, Name = "jon3" });
            liste.Add(new Person() { ID = 4, Name = "jon4" });
            Accordion1.DataSource = liste;
            Accordion1.DataBind();
        }
    }
    protected void btnGetName_Click(object sender, EventArgs e)
    {
        // get current pane by using Accordion1.SelectedIndex
        Label lblName = Accordion1.Panes[Accordion1.SelectedIndex].FindControl("lblName") as Label;
        Debug.WriteLine("Label: " + lblName.Text);
    }
}
public class Person
{
    public string Name { get; set; }
    public int ID { get; set; }
} 
```

这是我的**aspx代码**

```
<asp:Accordion ID="Accordion1" runat="server" SelectedIndex="0">
    <HeaderTemplate>
         <asp:Label ID="lblID" runat="server" Text='<%#"Pane" + Eval("ID") %>' />
         <hr />
    </HeaderTemplate>
    <ContentTemplate>
     <asp:Label ID="lblName" runat="server" Text='<%#Eval("Name") %>' />
     <br />
     <br />
    </ContentTemplate>
</asp:Accordion>
<asp:Button ID="btnGetName" runat="server" Text="GetName" onclick="btnGetName_Click" /> 
```

# php - 在序列化数据字段MYSQL中搜索项目

> ID：12147051
> 
> 赞同：0
> 
> 时间：2012-08-27T17:58:50.130
> 
> 标签：php, mysql, serialization

我曾经像这样在mysql中存储数据`"data1,data2,data3,data4"`

然后我决定使用 php 将它们存储为序列化。但我面临的主要问题是现在我无法在该字段中搜索项目。

我正在使用 FIND_IN_SET 但我知道它不适用于序列化数据。

我的问题是我应该转回用逗号存储数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:03:51.423

如果您需要它是可搜索的，您需要将它表示为一系列可以查询的行。如果出于性能原因需要它采用逗号分隔格式，这是另一个考虑因素。有时您必须同时做这两件事并确保您的应用程序使两种不同的表单保持同步。

当使用序列化数据时，很难匹配正确索引表的性能以匹配查询，同样，序列化数据的检索速度与必须加入其他结果的速度相匹配。这是一个权衡。

# paypal - Paypal IPN：notify_url 未调用

> ID：12147053
> 
> 赞同：9
> 
> 时间：2012-08-27T17:58:53.660
> 
> 标签：paypal, paypal-ipn

我正在测试一个简单的贝宝支付脚本，它工作正常，只是它没有调用我的 notify_url 并且我不明白为什么。该 url 是可访问的，甚至沙盒 IPN 测试也给出了肯定的结果。更奇怪的是，在同一个域上，我还有一个运行良好的脚本。代码不相同，但它使用相同的方法。

这是用于将 paymento 发送到 Paypal 的表单的 html：

```
form id="ppcheckout" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" name="pp">
  <input type="hidden" value="_xclick" name="cmd">
  <input id="business" type="hidden" value="xxx@gmail.com" name="business">
  <input id="currency_code" type="hidden" value="EUR" name="currency_code">
  <input type="hidden" value="http://www.mydomain.com/dir/ipn.php" name="notify_url">
  <input id="return" type="hidden" value="http://www.mydomain.com/dir/" name="return">
  <input id="cancel_return" type="hidden" value="http://www.mydomain.com/dir/" name="cancel_return">
  <input type="hidden" value="1" name="amount">
  <input type="hidden" value="Order from mysite" name="item_name">
  <input type="hidden" value="1" name="invoice">
</form> 
```

无法真正弄清楚什么是错的或缺少的。有人有想法吗？

谢谢再见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T11:27:34.573

我希望你没有在 LOCALHOST 上测试贝宝。那是行不通的，您需要在线测试它，在 Web 服务器中，您可以使用 localhost 进行编码，但必须将其上传到 SERVER 以便完全测试它。

这是一个可能有助于配置贝宝的链接 -[如何设置 PayPal 与 PHP 和 MySQL 的集成](http://www.evoluted.net/thinktank/web-development/paypal-php-integration)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-12T10:54:56.730

您需要在您的 PayPal Sandbox 企业账户中编辑**即时付款通知 (IPN)设置。**

1.  登录沙盒业务帐户。
2.  转到**个人资料**页面，然后单击**即时付款通知首选项**链接。
3.  设置**通知 URL**并启用**IPN 消息**。

完整的教程可以从这里找到 - [PayPal IPN / Notify URL is not working on Sandbox Account](http://www.codexworld.com/how-to-guides/paypal-ipn-notify-url-not-working-sandbox-account/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T23:24:32.047

您是否验证了沙盒帐户的电子邮件？

[此链接](http://www.bin-co.com/blog/2009/05/paypal-integration-ipns-notify_url-not-being-called/)听起来与您的问题相似，并且为他解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:12:55.647

我很难让沙箱也能正常工作。我会尝试在贝宝上测试它并确认沙盒没有做傻事

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T09:57:54.137

当贝宝回击 notify_url 时，我的登录检查产生了同样的问题。我在 notify_url 中将用户会话 ID 作为查询字符串传递，一切对我来说都很好。本地主机上的贝宝将无法正常工作。

使用下面的链接，您可以下载 paypal IPN 类

[http://www.micahcarrick.com/php-paypal-ipn-integration-class.html](http://www.micahcarrick.com/php-paypal-ipn-integration-class.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-18T20:27:04.963

检查排队的 IPN 消息。

```
Hover over your profile Icon -> 
Account Settings -> 
(on Left) Notifications -> 
Instant Payment Notifications (Click Update) -> 
Search for IPN History 
```

现在检查消息是否排队或失败等。这很可能是贝宝沙盒遇到的高峰，无法传递消息。

[这是指向 IPN 历史的直接链接](https://www.sandbox.paypal.com/uk/cgi-bin/webscr?cmd=_display-ipns-history)

# android - android没有在我的手机上运行， 但在我的模拟器上运行

> ID：12147055
> 
> 赞同：0
> 
> 时间：2012-08-27T17:58:54.747
> 
> 标签：android

我写了这个ftp上传方法……它在模拟器上很好用，但在我的手机上不行……

谁能告诉我为什么不呢？

```
FTPClient client = new FTPClient();
                FileInputStream fis = null;

                try {
                    client.connect("ftp.atw.hu");
                    client.login("festivale", "festivale12");
                    Log.d("TravellerLog :: ", "Csatlakozva: ftp.atw.hu");

                    //
                    // Create an InputStream of the file to be uploaded
                    //
                    client.setFileType(FTP.BINARY_FILE_TYPE);
                    client.enterLocalPassiveMode();
                    String substr = globalconstant.path.substring(4, globalconstant.path.length());
                    String filename = substr + "/Festivale.db";
                    Log.e("TravellerLog :: ", substr + "/Festivale.db");
                    fis = new FileInputStream(filename);

                    //
                    // Store file to server
                    //
                    client.storeFile("Festivale.db", fis);
                    Log.d("TravellerLog :: ", "Feltöltve");
                    client.logout();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    try {
                        if (fis != null) {
                            fis.close();
                        }
                        client.disconnect();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } 
```

请帮助我几乎 3 小时前尝试执行此 ftp：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:34:26.190

在设备上，您需要使用单独的线程来处理 ftp 连接。

“通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险，并且应用程序的主线程可以保持专用于用户与您的活动的交互。”[android.developer.com/guide/components/services.html ]

# python - 正则表达式解析 SDDL

> ID：12147058
> 
> 赞同：4
> 
> 时间：2012-08-27T17:59:10.477
> 
> 标签：python, regex

我正在使用 python 使用正则表达式解析出 SDDL。SDDL 始终采用“类型：某些文本”的形式，最多重复 4 次。类型可以是“O”、“G”、“D”或“S”，后跟冒号。“一些文本”的长度是可变的。

这是一个示例 SDDL：

```
O:DAG:S-1-5-21-2021943911-1813009066-4215039422-1735D:(D;;0xf0007;;;AN)(D;;0xf0007;;;BG)S:NO_ACCESS_CONTROL 
```

这是我到目前为止所拥有的。其中两个元组返回得很好，但另外两个 - ('G','S-1-5-21-2021943911-1813009066-4215039422-1735') 和 ('S','NO_ACCESS_CONTROL') 不是。

```
import re

sddl="O:DAG:S-1-5-21-2021943911-1813009066-4215039422-1735D:(D;;0xf0007;;;AN)(D;;0xf0007;;;BG)S:NO_ACCESS_CONTROL"

matches = re.findall('(.):(.*?).:',sddl)

print matches

[('O', 'DA'), ('D', '(D;;0xf0007;;;AN)(D;;0xf0007;;;BG)')] 
```

我想要返回的是

```
[('O', 'DA'), ('G','S-1-5-21-2021943911-1813009066-4215039422-1735'), ('D', '(D;;0xf0007;;;AN)(D;;0xf0007;;;BG)'),('S','NO_ACCESS_CONTROL')] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:07:48.330

尝试以下操作：

```
(.):(.*?)(?=.:|$) 
```

例子：

```
>>> re.findall(r'(.):(.*?)(?=.:|$)', sddl)
[('O', 'DA'), ('G', 'S-1-5-21-2021943911-1813009066-4215039422-1735'), ('D', '(D;;0xf0007;;;AN)(D;;0xf0007;;;BG)'), ('S', 'NO_ACCESS_CONTROL')] 
```

此正则表达式的开始方式与您的相同，但不是`.:`在末尾包含作为匹配的一部分，而是使用前瞻。这是必要的，因为`re.findall()`不会返回重叠匹配，因此您需要在下一个匹配开始之前停止每个匹配。

前瞻`(?=.:|$)`本质上意味着“仅*当下一个*字符是后跟冒号的任何字符，或者我们位于字符串的末尾时才匹配”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:25:37.743

似乎使用正则表达式并不是解决此问题的最佳方法。实际上，您要做的就是拆分冒号，然后对结果列表进行一些转换。

```
chunks = sddl.split(':')
pairs = [(chunks[i][-1], chunks[i+1][:-1] \
                             if i < (len(chunks) - 2) \
                             else chunks[i+1]) 
               for i in range(0, len(chunks) - 1)] 
```

# javascript - 设置 Dojo 仪表的背景颜色

> ID：12147059
> 
> 赞同：0
> 
> 时间：2012-08-27T17:59:11.023
> 
> 标签：javascript, dojo, gauge

我正在通过javascript在运行时创建一些Dojo 1.8 GlossySemiCircularGauge，并且我正在尝试设置仪表的背景颜色。我希望将颜色设置在仪表之外，而不是仪表本身。我正在使用如下语法创建仪表：

```
 glossyCircular = new dojox.gauges.GlossySemiCircularGauge({
        textIndicatorColor: '#FFFFFF',
        background: "[0, 255, 0, 0]",
        id: NewID,
        Max: 20,
        value: newValue,
        noChange: "true",
        width: wid,
        textIndicatorPrecision: "2",
        color: '#101030',
        height: hei
    }, dojo.byId(NewID)); 
```

由于仪表是用 SVG 绘制的，因此无法设置容器 div 的背景颜色。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:13:07.767

的正确格式`background`是：

```
background: { color: "rgba(0,0,0,0)"} 
```

将*alpha 通道*设置为零，使其变得透明，您可以通过 parent 调整背景颜色`<div>`。

在 jsFiddle 上查看并使用一个工作示例：http: [//jsfiddle.net/phusick/E9YNM/](http://jsfiddle.net/phusick/E9YNM/)

**编辑：**我添加`dojo/domReady!`到示例中，所以现在它不仅可以在我的浏览器中使用。

**EDIT2：** `background: [0,0,0,0]`也可以，所以只需去掉那些引号以使用数组而不是字符串。

# codeigniter - 在codeigniter中实现sql查询

> ID：12147064
> 
> 赞同：0
> 
> 时间：2012-08-27T17:59:33.130
> 
> 标签：codeigniter, codeigniter-2

```
SELECT * FROM abc
WHERE xyz LIKE $x OR xyz LIKE $y OR xyz LIKE $z
ORDER BY ((xyz LIKE $x) + (xyz LIKE $y) + (xyz LIKE $z)) DESC 
```

我几乎可以编写查询，`ordey by asd desc`但是如何在 codeigniter 中编写这个复杂的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:01:56.437

您可以像拥有它一样用普通的 sql 编写它并使用该`db->query`方法执行它。

```
$sql = 'SELECT * FROM abc
WHERE xyz LIKE ? OR xyz LIKE ? OR xyz LIKE ?
ORDER BY ((xyz LIKE ?) + (xyz LIKE ?) + (xyz LIKE ?)) DESC'

$this->db->query($sql, array($x, $y, $z, $x, $y, $z)); 
```

[http://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)查询绑定解释了`?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:28:36.660

也许你应该检查[ActiveRecord](http://codeigniter.com/user_guide/database/active_record.html)：

```
$this->db->
   from("abc")->
   or_like("xyz",$x)->
   or_like(...)->
   order_by(...);
$result = $this->db->result_array(); 
```

# javascript - Github Flavored Markdown - 带有空行的代码块不会呈现

> ID：12147066
> 
> 赞同：1
> 
> 时间：2012-08-27T17:59:42.967
> 
> 标签：javascript, markdown

我正在尝试使用[Sundown](https://github.com/vmg/sundown)突出显示 GFM 中的一段代码，据说它在 GitHub 上使用：

```
```javascript
var f = function()
{

}
``` 
```

我得到的结果如下：

```
<p>```javascript
var f = function()
{</p>

<p>}
```</p> 
```

并且是由源代码中的空行引起的。然而，相同的代码片段在 Github 本身上表现良好。是否有任何好的解析器（最好在 JavaScript 中）可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T02:40:22.937

GitHub 页面文档[参考](https://help.github.com/articles/using-jekyll-with-pages)以下库：

```
gem 'jekyll',     '=1.0.2'
gem 'liquid',     '=2.5.0'
gem 'redcarpet',  '=2.2.2'
gem 'maruku',     '=0.6.1'
gem 'rdiscount',  '=1.6.8'
gem 'RedCloth',   '=4.2.9' 
```

列表中没有日落。我想其他地方的 Markdown 也使用了相同的库。

# ruby-on-rails - Ruby 抑制系统真实输出

> ID：12147067
> 
> 赞同：0
> 
> 时间：2012-08-27T17:59:52.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在运行后台 rake 任务。（使用 '＆'）。问题是我希望它有时停止。所以我写了这个：

```
pinger_pid = system "ps | grep rake | awk '{print $1}'"
puts pinger_pid
system "kill -9 #{pinger_pid}" 
```

似乎我得到了一个“真正的”输出垃圾！我怎样才能删除它？

输出：

```
ERROR: garbage process ID "true".
Usage:
  kill pid ...              Send SIGTERM to every process listed.
  kill signal pid ...       Send a signal to every process listed.
  kill -s signal pid ...    Send a signal to every process listed.
  kill -l                   List all signal names.
  kill -L                   List all signal names in a nice table.
  kill -l signal            Convert between signal numbers and names. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:03:41.517

系统返回真或假，取决于命令的成功与否。

使用 %x 捕获输出：

```
pinger_pid = %x(ps | grep rake | awk '{print $1}')
puts pinger_pid
system 'kill', '-9', pinger_pid 
```

# c++ - C++“在多个基类上处理虚拟函数”

> ID：12147070
> 
> 赞同：2
> 
> 时间：2012-08-27T17:59:53.933
> 
> 标签：c++, polymorphism, multiple-inheritance

我需要从两个不同的基类*CBaseA*和*CBaseB派生一个子类**CDerived*。

 **另外，我需要在派生类上调用双方父母的虚函数。由于我想稍后在一个向量中管理不同类型的对象（这不是这个最小代码示例的一部分），我需要从基类指针调用虚拟函数到派生类对象：

```
#include <iostream>
#include <stdlib.h>

class CBaseA
{
  public:
    virtual void FuncA(){ std::cout << "CBaseA::FuncA()" << std::endl; };
};

class CBaseB
{
  public:
    virtual void FuncB(){ std::cout << "CBaseB::FuncB()" << std::endl; };
};

class CDerived : public CBaseB, public CBaseA
{};

int main( int argc, char* argv[] )
{
  // An object of the derived type:
  CDerived oDerived;

  // A base class pointer to the object, as it could later
  // be stored in a general vector:
  CBaseA* pAHandle = reinterpret_cast<CBaseA*>( &oDerived );

  // Calling method A:
  pAHandle->FuncA();

  return 0; 
} 
```

**问题：**但是在我的计算机上运行它时，调用的是*FuncB()*而不是*FuncA()*。如果我“翻转”父类声明，我会得到正确的结果，即

```
class CDerived : public CBaseA, public CBaseB 
```

但这并不能解决我的问题，因为我无法确定将调用哪个函数。

**所以我的问题是：** *我做错了什么，处理此类问题的正确方法是什么？*

（顺便说一下，我使用的是 g++ 4.6.2）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T18:01:32.890

```
CBaseA* pAHandle = reinterpret_cast<CBaseA*>( &oDerived ); 
```

不要`reinterpret_cast`用于执行到基类的转换。不需要演员表；转换是隐式的：

```
CBaseA* pAHandle = &oDerived; 
```

对于转换为派生类，`static_cast`如果已知对象属于目标类型或`dynamic_cast`不是，则使用。

您的使用会`reinterpret_cast`产生未定义的行为，因此会产生您看到的“奇怪”行为。很少有正确的使用，`reinterpret_cast`并且它们都不涉及类层次结构内的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:41:12.817

常见的实现，可以帮助您了解发生了什么。

内存中的 CBaseA 看起来像这样

```
+---------+
| __vptrA |
+---------+ 
```

内存中的 CBaseB 看起来像这样

```
+---------+
| __vptrB |
+---------+ 
```

CDrived 看起来像这样：

```
 +---------+
&oDerived->  | __vptrB |
             | __vptrA |
             +---------+ 
```

如果您只是将 &oDerived 分配给 CBaseA*，编译器会放置代码来添加偏移量，以便您拥有

```
 +---------+
&oDerived--->| __vptrB |
pAHandle---->| __vptrA |
             +---------+ 
```

在执行过程中，程序在 __vptrA 中找到指向 A 虚函数的指针。如果您将 static_cast 或 dynamic_cast pAHandle 返回到 CDerived（甚至 dynamic_cast pAHandle 到 CBaseA），编译器会将代码减去偏移量，以便结果指向对象的开头（dynamic_cast 会找到关于减去 vtable 以及指向虚函数的指针）。

当您将 &oDerived 重新解释为 CBaseA* 时，编译器不会放置此类代码来调整指针，您会得到

```
 +---------+
pAHandle, &oDerived--->| __vptrB |
                       | __vptrA |
                       +---------+ 
```

并且在执行过程中，程序在 __vptrB 中查找 A 虚函数，而不是 B 虚函数。**

# mapi - WP8 会支持 MAPI

> ID：12147072
> 
> 赞同：0
> 
> 时间：2012-08-27T18:00:03.070
> 
> 标签：mapi, windows-phone-8

我知道WP8的官方sdk还没有发布，但是有谁知道WP8平台是否支持扩展MAPI？我用它来读取 WM5-WM6.X 上的 SMS 文件夹，如果我可以移植我的旧 c++ 代码，我想试试 WP8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:30:11.907

不，它不受支持，而且您永远不会有 API 允许您访问 Windows Phone 上的用户消息。

# node.js - 安装 derby@0.3.13 时出错

> ID：12147077
> 
> 赞同：0
> 
> 时间：2012-08-27T18:00:45.453
> 
> 标签：node.js, derbyjs

我尝试安装[derbyjs](http://derbyjs.com/)，但出现以下错误：

```
alex@alex-K43U:~/derby$ npm install -g derby
npm http GET https://registry.npmjs.org/derby
npm http 200 https://registry.npmjs.org/derby
npm http GET https://registry.npmjs.org/derby/-/derby-0.3.13.tgz
npm http 200 https://registry.npmjs.org/derby/-/derby-0.3.13.tgz
npm http GET https://registry.npmjs.org/dom-shim
npm http GET https://registry.npmjs.org/html-util
npm http GET https://registry.npmjs.org/tracks
npm http GET https://registry.npmjs.org/racer/0.3.13
npm http GET https://registry.npmjs.org/chokidar
npm http GET https://registry.npmjs.org/less
npm http GET https://registry.npmjs.org/up
npm http GET https://registry.npmjs.org/stylus
npm http GET https://registry.npmjs.org/mkdirp
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/nib
npm http 200 https://registry.npmjs.org/dom-shim
npm http GET https://registry.npmjs.org/dom-shim/-/dom-shim-0.1.1.tgz
npm http 200 https://registry.npmjs.org/tracks
npm http GET https://registry.npmjs.org/tracks/-/tracks-0.1.8.tgz
npm http 200 https://registry.npmjs.org/html-util
npm http GET https://registry.npmjs.org/html-util/-/html-util-0.1.3.tgz
npm http 200 https://registry.npmjs.org/racer/0.3.13
npm http 200 https://registry.npmjs.org/chokidar
npm ERR! error installing derby@0.3.13
npm http GET https://registry.npmjs.org/racer/-/racer-0.3.13.tgz

npm ERR! Error: No compatible version found: chokidar@'>=0.2.6'
npm ERR! No valid targets found.
npm ERR! Perhaps not compatible with your version of node?
npm ERR!     at installTargetsError (/home/alex/nvm/v0.6.7/lib/node_modules/npm/lib/cache.js:488:10)
npm ERR!     at next_ (/home/alex/nvm/v0.6.7/lib/node_modules/npm/lib/cache.js:438:17)
npm ERR!     at next (/home/alex/nvm/v0.6.7/lib/node_modules/npm/lib/cache.js:415:44)
npm ERR!     at /home/alex/nvm/v0.6.7/lib/node_modules/npm/lib/cache.js:408:5
npm ERR!     at saved (/home/alex/nvm/v0.6.7/lib/node_modules/npm/lib/utils/npm-registry-client/get.js:147:7)
npm ERR!     at Object.oncomplete (/home/alex/nvm/v0.6.7/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:231:7)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR! 
npm ERR! System Linux 3.0.0-24-generic
npm ERR! command "node" "/home/alex/nvm/v0.6.7/bin/npm" "install" "-g" "derby"
npm ERR! cwd /home/alex/derby
npm ERR! node -v v0.6.7
npm ERR! npm -v 1.1.0-3
npm ERR! message No compatible version found: chokidar@'>=0.2.6'
npm ERR! message No valid targets found.
npm ERR! message Perhaps not compatible with your version of node?
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/alex/derby/npm-debug.log
npm not ok 
```

我不知道如何解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:41:44.130

查看[chokidar 的`package.json`版本 >=0.2.6 的文件](https://github.com/paulmillr/chokidar/blob/9472ca4130c3cf26e33b00a2319207785f72869d/package.json)告诉我它需要 node.js 版本 0.6.10 或更高版本。您正在尝试为节点 0.6.7 安装它。

此外，我建议将 Derby 与节点 0.8.x 一起使用。至少我在节点 0.8.x 上没有安装 Derby 的问题。

# c# - 如何从外部结束执行方法？

> ID：12147080
> 
> 赞同：0
> 
> 时间：2012-08-27T18:01:05.033
> 
> 标签：c#

我有一个耗时的功能，我想给用户一个机会，当他注意到它需要太长时间时，通过单击 UI 中的一个按钮来停止它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:06:38.490

您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类在其他线程上运行时间和资源消耗的东西，并使用它的[CancelAsync](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)方法来*请求*（它*不是*立即执行）取消其他线程。

有关如何实现该功能的具体示例，可以查看此问题中接受的答案：

[如何等待 BackgroundWorker 取消？](https://stackoverflow.com/questions/123661/how-to-wait-for-a-backgroundworker-to-cancel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:07:33.243

首先，您需要在与主线程分开的线程中运行耗时的函数。否则 UI 将停止响应。

然后，您需要有一个静态变量或一个共享实例，其中 UI 可以设置一个标志，指示该耗时功能应该停止。

最后，耗时函数应该定期检查标志，如果设置了就停止处理。

[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)类实现了这种模式并解决了一些其他需求（例如线程间通信和进度报告）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:09:13.773

假设您的耗时方法称为`MyTimeConsumingMethod`.

```
void MyTimeConsumingMethod()
{
       //Do stuff
} 
```

全局放置一个线程：

```
Thread t; 
```

放入您的 Form_Load()

```
t = new Thread(new ThreadStart(MyTimeConsumingMethod));
t.Start(); 
```

并按下按钮：

```
t.Abort(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:07:37.317

尝试在后台工作人员上运行它。

[这](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c%23/)给出了如何使用它的一个很好的例子。

然后你可以打电话

```
Worker.CancelAsync(); 
```

当用户想要取消操作时

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T18:06:29.837

这是一个例子

```
bool _cancel = false;
private void count()
{
    _cancel = false;
    new System.Threading.Thread(delegate()
    {
        for (int i = 0; i < 100000; i++)
        {
            if (_cancel)
                break;

            Console.WriteLine(i);
        }
    }).Start();
}

private void button1_Click(object sender, EventArgs e)
{
    _cancel = true;
} 
```

# spring - 为什么在使用 OpenEntityManagerInViewFilter 时会出现 LazyInitializationException？（使用 Spring Roo）

> ID：12147083
> 
> 赞同：2
> 
> 时间：2012-08-27T18:01:21.943
> 
> 标签：spring, hibernate, spring-security, spring-roo, lazy-initialization

我已经使用 Spring Roo 生成了我的项目，并且没有触及 xml 文件。

我要做的就是通过实体的 ITD 方法获取集合。

我收到以下错误：

```
 SEVERE: Servlet.service() for servlet MyProject threw exception
org.hibernate.LazyInitializationException: failed to lazily initialize a collect
ion of role: com.myproject.main.domain.Juser.securityRoles, no session or session
was closed 
```

请指导我。我被困得很厉害。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:18:09.460

hibernate 中的惰性初始化是它按需而不是在查询时加载关系的地方。这通常更有效，因为这意味着主查询更简单。

有时您需要在会话关闭之前强制加载惰性 relp。在这种情况下，您只需要在查询完成后调用 relp 对象上的方法来加载它们。

# sql - 临时表的列标题中是否可以有空格？

> ID：12147089
> 
> 赞同：0
> 
> 时间：2012-08-27T18:01:43.130
> 
> 标签：sql

我正在尝试在带有空格的临时表中创建列的名称。我在名称中需要这些空格的原因是它可以与我们的 asp.net 应用程序正确连接，该应用程序将使用它作为数据集。因为来自其他常规表的列有空格，所以代码在数据集中寻找一个也有空格的项目。下面是我正在尝试做的一个例子

```
declare @temp table (id int, scheduled start datetime) 
```

但这是不允许的，并且会引发错误。在我的应用程序（asp.net - vb）的服务器端 - 使用此字段的调用如下所示

```
lblStart.text = DS.Item("Scheduled Start") 
```

这就是为什么我需要临时表中名称中的空格，以便在使用常规结果或临时表中的结果时，数据集将适用于相同的服务器端代码。这可能吗？我曾尝试使用引号，但没有任何运气。再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:03:12.030

当然，只需将名称`scheduled start`括在括号中，如下所示：

```
declare @temp table (id int, [scheduled start] datetime) 
```

# css - 当菜单最后呈现时，让博客文本环绕菜单 DIV

> ID：12147091
> 
> 赞同：1
> 
> 时间：2012-08-27T18:01:48.430
> 
> 标签：css, wordpress, templates, css-float

我正在使用 WordPress，我正在尝试修改我的模板，以便在我的博客页面上。我在页面右侧有一个菜单，而博客内容在左侧。我遇到的问题是菜单下的所有空间都`<div>`被浪费了，我想让博客内容围绕菜单环绕/流动`<div>`。通常我会将菜单浮动`<div>`到右侧，但是 WordPress 引擎`<div>`会在博客内容之后输出它，所以我不确定如何将它浮动到页面的右上角。

我创建了一个[JSFiddle](http://jsfiddle.net/hqR7N/)示例来说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:22:02.640

您可以根据需要使用一小段 JavaScript 来移动菜单。请参阅我从您那里分叉的[JSFiddle 。](http://jsfiddle.net/v7mmu/1/)

本质上，我修改了 HTML 以将 ID 添加到菜单和博客内容中，如下所示：

```
<div id="blog">
    <p>...</p>
</div>
<div id="menu">
    ...
</div> 
```

然后我在 CSS 中为它们设置样式。请注意，菜单有明确的宽度，但博客内容本身没有。

```
#blog { }
#menu {
    float: right;
    width: 400px;
} 
```

然后我使用了一点 JQuery 将菜单移动到博客中，以便它可以向右浮动并且文本将环绕它：

```
$('#blog').prepend($('#menu').remove());​ 
```

本质上，JavaScript 所做的就是从 dom 中删除菜单，然后将其作为第一个子项插入`#blog`. ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:24:46.717

您需要将菜单的浮动设置为右侧并将其放在帖子 div 的顶部。

例如，CSS 应该是这样的：

```
#post {width: 500px;}
#menu {
    float: right;
    width: 250px;
    height: 100px;
    color: #6666FF;
    border: solid 1px #333;
} 
```

和 HTML：

```
<div id="post">
<div id="menu">lorep ipsum</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:26:13.670

您可以像处理图像一样将文本环绕在 div 周围，例如：http: [//jsfiddle.net/Nbpen/](http://jsfiddle.net/Nbpen/)

# php - .htaccess Hijinks

> ID：12147095
> 
> 赞同：2
> 
> 时间：2012-08-27T18:02:06.297
> 
> 标签：php, .htaccess, codeigniter

标题含糊不清，因为我不能告诉你出了什么问题。我的应用程序在下面的 .htaccess 文件中运行良好，但是在我强制 ssl 的运动中，有些东西坏了，现在我只得到 500 个内部服务器错误 - 无论是在 wamp 还是在完全独立的生产主机上，所以它不是服务器。这是我的.htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    #This last condition enables access to the images and css folders, and the robots.txt file
    RewriteCond $1 !^(index\.php|(.*)\.swf|images|robots\.txt|css|docs|cache)
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 /application/errors/404.php
</IfModule> 
```

唯一解决此问题的是删除开头的“IfModule”语句。如果我摆脱那个条件，只留下封闭的代码，并删除整个第二个条件，只留下这个：

```
RewriteEngine On
RewriteBase /

#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#This last condition enables access to the images and css folders, and the robots.txt file
RewriteCond $1 !^(index\.php|(.*)\.swf|images|robots\.txt|css|docs|cache)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

然后应用程序工作，除了整个 .htaccess 文件被完全忽略！Mod_rewrite 也已启用。当我在 git 中切换到我的 master 分支时，我发布的第一个 .htaccess 仍然可以正常工作，但我无法弄清楚是什么对我的生活产生了影响。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:52:46.107

确保您的 .htaccess 文件有正确的换行符。参考：[http](http://www.codingforums.com/showthread.php?t=165232) ://www.codingforums.com/showthread.php?t=165232 。

# windows-runtime - WinRT：只显示项目列表

> ID：12147096
> 
> 赞同：0
> 
> 时间：2012-08-27T18:02:12.780
> 
> 标签：windows-runtime, winrt-xaml

我想在我的 Metro 应用程序中显示项目列表。我**只想展示**它们。我不想要任何种类的选择、鼠标悬停、键盘控制或动画效果。

这些项目将与 ItemTemplate 一起显示，列表将是数据绑定的，我想要滚动（垂直和水平）。

最简单的方法是什么？ListView 有很多默认值，这使得“简单地显示”项目成为一项艰巨的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:56:04.513

通过设置 SelectionMode="None" 和 IsHitTestVisible="False"，ListView 可以摆脱几乎所有你想要的东西。这将使您无法使用鼠标或键盘选择或突出显示任何元素。您仍将获得滚动并支持滚动交互。但是，您仍然会得到动画。

否则，您可能不得不考虑使用 ItemsControl 和 ScrollViewer 来获得您想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:10:07.593

在第一个实例中使用 ItemsControl。您可以根据需要添加数据模板并使用 ItemsPanel 控件来应用您的布局。例如，下面的 StackPanel 允许将方向切换为水平。

```
 <ItemsControl ItemsSource="{Binding Users}" >
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Image Source="{Binding ImageUri}" Width="40" Height="40" Margin="5" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl> 
```

# c# - 使用 IL Emit 替换 Activator.CreateInstance

> ID：12147097
> 
> 赞同：1
> 
> 时间：2012-08-27T18:02:13.187
> 
> 标签：c#, performance, reflection, instantiation, reflection.emit

我有一个实现接口的类，它有一个多参数构造函数和一个静态排序集合。这个类是一个基类，它有许多继承的类。

```
internal class SCO : IVotable
{
    public SCO(SPListItem item, List<Vote> votes)
    {
        //Initialize Object
    }

    public static List<T> SortedCollection<T>(SPListItemCollection items, ListSortType sortType, List<Vote> votes) where T : IVotable
    {
        var returnlist = new List<T>();
        Type genericType = typeof(T);
        for (int i = 0; i < items.Count; i++) { returnlist.Add((T)Activator.CreateInstance(genericType, new object[] { items[i], votes })); }
        switch (sortType)
        {
            case ListSortType.Hot:
                returnlist.Sort((p1, p2) => p2.HotScore.CompareTo(p1.HotScore));
                break;
            case ListSortType.Top:
                returnlist.Sort((p1, p2) => p2.VoteTotal.CompareTo(p1.VoteTotal));
                break;
            case ListSortType.Recent:
                returnlist.Sort((p1, p2) => p2.CreatedDate.CompareTo(p1.CreatedDate));
                break;
        }
        return returnlist;
    }
} 
```

这使我可以对任何子类执行以下操作：

```
List<ChildClass> sortedClassList = ChildClass.SortedCollection<ChildClass>(listItems, sortType, votes); 
```

我目前对 Activator.CreateInstance 的依赖让我担心，因为这比直接使用 Emit IL 慢了大约 100 倍。我一直在阅读一些关于 Emit IL 的文章，这个解决方案似乎很棒。

但是，我似乎无法让它工作。当我尝试实例化`ILGenerator gen =`时，它告诉我“无法在静态上下文中访问非静态字段‘方法’”

我的类不是静态的，我的构造函数也不是，下面显示的静态列表还没有与 Emit 交互。我该如何进行这项工作？

到目前为止的代码：

```
internal class SCO : IVotable
{
    //Properties emittied
    static ConstructorInfo ctor = typeof(SCO).GetConstructors()[1];
    delegate SCO SCOCtor(SPListItem item, List<Vote> votes);
    static SCOCtor SCOCtorDelegate;

    DynamicMethod method = new DynamicMethod("CreateInstance", typeof (SCO),
                             new Type[] {typeof (SPListItem), typeof (List<Vote>)});

    ILGenerator gen = method.GetILGenerator(); //Error here
    //"Cannot access non-static field 'method' in static context"

    private static SCO CreateInstance(SPListItem item, List<Vote> votes)
    {
        return SCOCtorDelegate(item, votes);
    }
} 
```

博客供参考： [http ://ayende.com/blog/3167/creating-objects-perf-implications](http://ayende.com/blog/3167/creating-objects-perf-implications)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:13:06.437

我有一个替代 Activator 的插件，它使用CodePlex 上托管[的IL 生成。](http://codeblocks.codeplex.com/wikipage?title=FasterActivator%20Sample&referringTitle=Home)您也可以[在此处](http://nuget.org/packages/fasteractivator)通过 Nuget 获取它（包含单个源文件，无程序集）。

FasterActivator 的源代码在[这里](http://codeblocks.codeplex.com/SourceControl/changeset/view/96723#1887401)。

用法类似于下面概述的内容。

```
private static readonly Dictionary<Type, DynamicCreationDelegate> _cachedCreationDelegates = new Dictionary<Type, DynamicCreationDelegate>();

private static DynamicCreationDelegate CreateOrGet(Type typeToCreate)
{
    DynamicCreationDelegate result = null;

    if (!_cachedCreationDelegates.TryGetValue(typeToCreate, out result))
    {
        result = FastActivator.GenerateDelegate(typeToCreate, 
        /* List of types that make up the constructor signature of the type being constructed */
        typeof(SPListItem), typeof(List<Vote>));
        _cachedCreationDelegates.Add(result);
    }

    return result;
}

// Usage 
for (int i = 0; i < items.Count; i++) 
{ 
    var creationDelegate = CreateOrGet(typeof(genericType));
    returnlist.Add((T)creationDelegate(new object[] { items[i], votes })); 
} 
```

哦，这是一个应该更快的通用版本。

```
private static readonly Func<SPListItem, List<T>, T> _creationFunc;
private static Func<SPListItem, List<T>, T> CreateOrGetFunc()
{
    if (!_creationFunc == null)
        _creationFunc = FastActivator.GenerateFunc<Func<SPListItem, List<T>, T>>(/* IL generator knows all type info from generic params now */);

    return _creationFunc;
}

// Usage
for (int i = 0; i < items.Count; i++) 
{ 
    var creationFunc = CreateOrGetFunc();
    returnlist.Add(creationFunc(items[i], votes )); 
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:13:05.600

我看你有答案了。[我刚刚将帮助程序类的代码上传到 github](https://github.com/mdezem/NetCodeFragments/blob/master/VirtualVoid.DotNetFragments/Reflection/ReflectionHelper.cs)到 IL 构造函数调用（我以前应该这样做，但缺少一个很好的理由）：

用法是这样的：

```
// suppose you want to call the constructor for this class  
// but generalizing the return to ISomeInterface
public class AClass : ISomeInterface
{
   public class(int intParam, String stringParam) { }
}

// construct the factory method Func<int, string, ISomeInterface>
var createAClassInstance = ReflectionHelper
   // return type + constructor params
   .CreateFactoryMethod<ISomeInterface, int, string>(typeof(AClass));

var instance = createAClassInstance(10, "hello constructor"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:29:47.380

如果您愿意接受一些重复，那么您可以使用委托，而不是处理 IL（正如您所发现的那样，这会很快变得复杂）。就像是：

```
internal class SCO : IVotable
{
    protected static List<T> SortedCollection<T>
        (SPListItemCollection items, ListSortType sortType, List<Vote> votes,
        Func<SPListItem, List<Vote>, T> factory) where T : IVotable
    {
        var returnlist = new List<T>();
        Type genericType = typeof(T);
        for (int i = 0; i < items.Count; i++)
            returnlist.Add(factory(items[i], votes));

        // etc.
    }
}

class ChildClass : SCO
{
    public static List<ChildClass> SortedCollection
        (SPListItemCollection items, ListSortType sortType, List<Vote> votes)
    {
        return SCO.SortedCollection<ChildClass>(
            items, sortType, votes, (i, vs) => new ChildClass(i, vs));
    }
} 
```

这样做应该非常快，甚至可能比使用 IL emit 时更快。

# list - 在图像周围环绕文字

> ID：12147103
> 
> 赞同：4
> 
> 时间：2012-08-27T18:02:42.803
> 
> 标签：list, javafx, label

标签对象和图片的列表是否可以对齐，如果标签在右侧有空间，它应该在换行到下一行之前使用全长。

这是因为我可能并不总是拥有窗格全高的图片。

对于较短的图像，我想利用底部的空间。请注意，文本是标签节点的节点列表。

[![](../Images/dc02bcef51bc2ff91c0bb86be3da0493.png)](https://i.stack.imgur.com/gwWdm.jpg)

# javascript - 为什么 console.log(true, '\t') 打印 true ""？

> ID：12147105
> 
> 赞同：5
> 
> 时间：2012-08-27T18:02:56.587
> 
> 标签：javascript, google-chrome

在 Chrome 中，以下

```
console.log(true, '\t'); 
```

将打印

```
true "  " 
```

为什么周围有报价？

（注意`console.log(true + '', '\t')`只会打印`true`，就像`console.log('a', '\t');`只会打印一样`a`。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T18:36:22.520

基本上，console.log 有两个重载：

`console.log(formatString, args)`和`console.log(arg1, arg2, ...)`。

更具体地说，根据[源代码](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/inspector/front-end/ConsoleMessage.js&exact_package=chromium&q=consolemessage.js&ct=rc&cd=1&sq=)，如果第一个参数是字符串，则它将其视为其他参数的格式字符串。否则，直接输出每个参数。

因此`console.log(true + '', '\t')`输出 'true' 因为第一个参数是字符串并且没有占位符`\t`, 并且`console.log(true, '\t')`将输出两个参数因为`true`不是字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:50:31.077

我决定玩弄它

```
console.log(true, '\t');
true "  " 
```

然后我尝试了相反的方法

```
console.log(false, '\t');
false " " 
```

不知道为什么，但是 false 只返回一个空格，而 true 则返回两个 o_O ... 此外，如果`\t`是在开头，则没有问题

```
console.log('\t', true);
     true 
```

它之后发生的事情也无关紧要，但如果第一个参数通常是布尔值，似乎会影响所有带有引号的转义选项卡。

```
console.log(false, '\t', '\t');
false " " " " 
```

所以它肯定与第一个参数是布尔值有关，因为如果你用字符串尝试它，它的行为完全正常。我猜它与谷歌浏览器有点奇怪？我需要找到源代码才能真正看到它。

# git - 重建一个 git 分支

> ID：12147107
> 
> 赞同：0
> 
> 时间：2012-08-27T18:02:59.807
> 
> 标签：git

我正在尝试重新制作一个 git 分支。我想根据当前的 master 分支从头开始重新创建分支。我做了以下事情：

```
$ git status
# On branch foo
nothing to commit (working directory clean)
$ git checkout master
$ git branch -D foo
Deleted branch foo (was *******).
$ git push origin :foo
To git@***:***
 - [deleted]         foo
$ git checkout -b foo master
Switched to a new branch 'foo'
$ git push origin foo
To git@***:***
 * [new branch]      foo -> foo 
```

现在，一切都很完美，至少对我来说是这样。问题是其他使用“旧” foo 分支的人仍然拥有该副本。我已要求其他人执行以下命令：

```
git checkout master
git branch -D foo
git checkout foo 
```

不幸的是，每次他们再次检查 foo 时，它仍然在跟踪旧的 foo 分支。我通常做的只是告诉他们`git pull`在中间的某个地方扔一个（不指定分支），它最终会神奇地工作。告诉 git 跟踪“新”foo 分支的最佳方法是什么？

git 版本 1.7.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:09:15.077

您必须`git fetch`至少运行一次，否则其他 git 存储库不知道“新” foo 分支。

它实际上很简单：

```
# on branch foo
git fetch
git reset --keep origin/foo 
```

# c++ - 将“this”指针作为 LPARAM 传递

> ID：12147108
> 
> 赞同：1
> 
> 时间：2012-08-27T18:03:07.277
> 
> 标签：c++, visual-studio-2010, winapi, casting, compiler-errors

我的班级如下：

```
#include <Windows.h>
class MyClass
{
   void A();
   static BOOL CALLBACK proc(HWND hwnd, LPARAM lParam);
};

void MyClass::A()
{
   EnumChildWindows(GetDesktopWindow(), MyClass::proc, static_cast<LPARAM>(this));
}

BOOL CALLBACK MyClass::proc(HWND hwnd, LPARAM lParam)
{
   // ...
   return TRUE;
} 
```

当我尝试在 Visual C++ 2010 中编译它时，我收到以下编译器错误：

错误 C2440：“static_cast”：无法从“MyClass *const”转换为“LPARAM”没有可以进行此转换的上下文

如果我更改`MyClass::A`如下定义，则编译成功：

```
void MyClass::A()
{
   EnumChildWindows(GetDesktopWindow(), MyClass::proc, (LPARAM)this);
} 
```

第一个示例中的错误的解释是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:06:58.477

您需要使用 a `reinterpret_cast`not a`static_cast`来强制转换为完全不相关的类型。看到这个[什么时候应该使用 static_cast、dynamic_cast、const_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)有关不同类型的 C++ 强制转换的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T18:08:58.220

`static_cast`用于强制转换相关类型，例如`int`to `float`， and `double`to `float`，或需要*很少*努力的转换，例如调用单参数构造函数，或调用用户定义的转换函数。

`LPARAM`并且`this`几乎没有关系，所以你需要的是`reinterpret_cast`：

```
LPARAM lparam =  reinterpret_cast<LPARAM>(this);
EnumChildWindows(GetDesktopWindow(), MyClass::proc, lparam); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:19:52.380

如您所知， this 指针是**const**并且 static_cast 运算符不能丢弃**const**、**volatile**或**__unaligned**属性。看看[MSDN 上的这个链接](http://msdn.microsoft.com/en-us/library/c36yw7x9%28v=vs.80%29.aspx)。

# c# - Monotouch 应用程序在发布到 iPhone 时不工作

> ID：12147111
> 
> 赞同：0
> 
> 时间：2012-08-27T18:03:14.953
> 
> 标签：c#, iphone, ios5, xamarin.ios, monodevelop

我在这里有点麻烦。我已经在 Monotouch 中完全开发了我的应用程序并在模拟器上对其进行了测试。一切都按预期工作。当我在调试或发布中将应用程序发布到我的 iPhone 时，它​​会将应用程序上传到设备，但我会看到以下堆栈跟踪，当我尝试在设备上启动应用程序时，会显示启动图像，然后它只是意外退出。对不起，这就是我所拥有的所有信息，我希望有人能帮助我。

堆栈跟踪：

```
Please ensure your device is connected...
Connected to: JJ iPhone
2012-08-27 19:48:24.841 mtouch[1070:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x9769eb67 __raiseError + 231
    1   libobjc.A.dylib                     0x9a622149 objc_exception_throw + 155
    2   CoreFoundation                      0x975a7bc6 -[__NSArrayM insertObject:atIndex:] + 150
    3   CoreFoundation                      0x975a7b20 -[__NSArrayM addObject:] + 64
    4   DTDeviceKitBase                     0x03cdfdaf __DTDKDeviceSupportSearchPathURLs_block_invoke_0 + 451
    5   libdispatch.dylib                   0x962dca6f dispatch_once_f + 50
    6   libdispatch.dylib                   0x962dca38 dispatch_once + 31
    7   DTDeviceKitBase                     0x03cdfe95 DTDKDeviceSupportURLs + 104
    8   DTDeviceKitBase                     0x03ce0348 __DTDKMappedDeveloperDiskImageURLs_block_invoke_0 + 23
    9   libdispatch.dylib                   0x962dca6f dispatch_once_f + 50
    10  libdispatch.dylib                   0x962dca38 dispatch_once + 31
    11  DTDeviceKitBase                     0x03ce11be __72+[DTDKDeviceSupportFiles _inexactDeveloperDiskImageForVersion:andBuild:]_block_invoke_0141 + 125
    12  libdispatch.dylib                   0x962db126 _dispatch_barrier_sync_f_invoke + 30
    13  libdispatch.dylib                   0x962db5b6 dispatch_barrier_sync_f + 87
    14  libdispatch.dylib                   0x962db70c dispatch_sync + 45
    15  DTDeviceKitBase                     0x03ce0fea +[DTDKDeviceSupportFiles _inexactDeveloperDiskImageForVersion:andBuild:] + 228
    16  DTDeviceKitBase                     0x03ce0ef8 +[DTDKDeviceSupportFiles idealDeveloperDiskImageForVersion:andBuild:allowFallback:] + 54
    17  ???                                 0x02797d2c 0x0 + 41516332
    18  ???                                 0x02796d74 0x0 + 41512308
    19  ???                                 0x02796764 0x0 + 41510756
    20  ???                                 0x02796260 0x0 + 41509472
    21  ???                                 0x02796218 0x0 + 41509400
    22  ???                                 0x02795230 0x0 + 41505328
    23  ???                                 0x02795037 0x0 + 41504823
    24  ???                                 0x027d6048 0x0 + 41771080
    25  MobileDevice                        0x03b58bcf _AMDDeviceAttachedCallbackv3 + 163
    26  MobileDevice                        0x03b0e22d USBMuxIntCFSocketCallback + 1633
    27  CoreFoundation                      0x975b7edb __CFSocketPerformV0 + 1163
    28  CoreFoundation                      0x9756b3df __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
    29  CoreFoundation                      0x9756ad96 __CFRunLoopDoSources0 + 246
    30  CoreFoundation                      0x97594c68 __CFRunLoopRun + 1112
    31  CoreFoundation                      0x9759447c CFRunLoopRunSpecific + 332
    32  CoreFoundation                      0x975a51a1 CFRunLoopRun + 129
    33  ???                                 0x02794f4c 0x0 + 41504588
    34  ???                                 0x02794f14 0x0 + 41504532
    35  ???                                 0x02755c98 0x0 + 41245848
    36  ???                                 0x02755b98 0x0 + 41245592
    37  ???                                 0x0218cf60 0x0 + 35180384
    38  ???                                 0x02186db0 0x0 + 35155376
    39  ???                                 0x02189216 0x0 + 35164694
    40  mtouch                              0x0001caef WriteZStream + 102623
    41  mtouch                              0x0022f61a WriteZStream + 2276362
    42  mtouch                              0x0023213c WriteZStream + 2287404
    43  mtouch                              0x002313a1 WriteZStream + 2283921
    44  mtouch                              0x000b878f WriteZStream + 740735
    45  mtouch                              0x000b89e0 WriteZStream + 741328
    46  mtouch                              0x000bae4f WriteZStream + 750655
    47  mtouch                              0x00002eb3 mtouch + 7859
    48  mtouch                              0x00002755 mtouch + 5973
    49  ???                                 0x0000000b 0x0 + 11
) 
```

我知道我现在听起来可能很愚蠢，但我是 iPhone 和 Monotouch 开发的新手，不知道如何阅读或解释这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:34:54.427

这可能是组件之间的版本不匹配。请填写[错误报告](http://bugzilla.xamarin.com)并包括：

*   MonoTouch 的版本；
*   MonoDevelop 的版本；
*   OSX 的版本；
*   Xcode 的版本；
*   iOS 设备的类型（哪个 iPhone）和版本；
*   完整的构建日志（将“-v -v -v”添加到项目的**附加 mtouch 参数中）从 MonoDevelop 的****构建输出**（来自**错误列表**面板）复制/粘贴。

您可以从 MonoDevelop 中获得前四个项目。从**MonoDevelop**菜单中，选择**About MonoDevelop**项，然后选择**Version Information**选项卡并将该数据复制/粘贴到错误报告中。

# c++ - 是否需要用C++检查0MQ中send的返回值？

> ID：12147112
> 
> 赞同：5
> 
> 时间：2012-08-27T18:03:16.867
> 
> 标签：c++, zeromq

socket_t::send 函数示例返回一个布尔值以指示消息是否发送成功，但我从未见过任何检查此返回值的示例代码。

根据[0MQ C++ API](http://api.zeromq.org/2-1:zmq-cpp) C 错误转换为异常：

> 底层 ØMQ C 库函数报告的所有错误都会通过 C++ 语言绑定自动转换为异常。zmq::error_t 类派生自 std::exception 类，并使用 zmq_strerror() 函数将错误代码转换为人类可读的字符串。

是否需要检查 send 的返回值？是否存在 send 函数会返回 false 但不抛出异常的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:38:22.317

从[源代码](https://github.com/zeromq/zeromq2-x/blob/master/include/zmq.hpp)：

```
inline bool send (message_t &msg_, int flags_ = 0)
{
    int rc = zmq_send (ptr, &msg_, flags_);
    if (rc == 0)
        return true;
    if (rc == -1 && zmq_errno () == EAGAIN)
        return false;
    throw error_t ();
} 
```

所以答案就在那里——如果[zmq_send](http://api.zeromq.org/2-1%3azmq-send)将错误设置为 EAGAIN，则 send 将返回 false。要了解何时会发生这种情况，请阅读 zmq_socket 和 zmq_setsockopt 的文档。

如果您使用的套接字可能引发 EAGAIN，并且您想要处理这种情况，您应该检查返回值。例如，您可以通过将消息排队并稍后重试来处理它。

# database-design - 选择符合某些输入条件的记录

> ID：12147114
> 
> 赞同：0
> 
> 时间：2012-08-27T18:03:21.680
> 
> 标签：database-design, relational-database

我正在尝试实现一个网络服务，它将一些成分作为输入，它将在数据库中查找一些食谱，并返回那些需要作为输入提供的全部或部分成分的那些。

我可以很容易地弄清楚recipies和ingrdients之间的多对多关系，所以我打算有一个recipies表，一个用于配料，中间有一个链接表。但是，如果我这样做，我不确定如何以有效的方式查询表以获取所需的信息。

为了给出一个明确的例子，请考虑以下内容：

输入：意大利面、鸡肉、香蒜酱、西红柿 输出应为：

*   番茄酱鸡肉意大利面（需要意大利面、鸡肉和西红柿）
*   烤箱里有香蒜酱的意大利面（需要意大利面和香蒜酱）
*   等等

但是输出不应该包括番茄酱土豆鸡肉（因为我们在输入成分中没有土豆）。

我将在 Java 和 MySQL 中实现这一点（尽管 Java 部分对于这个问题可能并不重要）。

somebidy可以帮助我解决这个问题。我真的很喜欢如何实现查询，但如果你能想到其他方法来处理它，那么这些也是受欢迎的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:14:07.653

首先，将“所需”的成分列表放入临时表中。让我们称之为“想要的”。

以下查询将在所需表中查找仅包含成分的食谱：

```
select r.recipe.name, group_concat(i.ingredientname separator ', ') as ingredients,
       count(*) as numingredients
from RecipeIngredient ri join
     Recipe r
     on ri.recipeid = r.recipeid join
     Ingredient i
     on ri.ingredientid = i.ingredientid left outer join
     Desired d
     on i.ingredientname = d.ingredientname
group by r.recipe.name
having max(case when d.ingredientname is null then 1 else 0 end) = 0 -- all ingredients in list 
```

# javascript - 运行 POST 时显示图像

> ID：12147115
> 
> 赞同：0
> 
> 时间：2012-08-27T18:03:23.300
> 
> 标签：javascript, ajax

我有这段代码用于发布而不重新加载页面，但我想知道如何在正在执行的脚本中添加它来显示图像。示例 loader.gif

谢谢你的帮助。

```
<script language="javascript" src="jquery-1.6.4.min.js"></script>
<script language="javascript">
$(document).ready(function() {
    $().ajaxStart(function() {
        $('#loading').show();
        $('#result').hide();
    }).ajaxStop(function() {
        $('#loading').hide();
        $('#result').fadeIn('slow');
    });
    $('#form, #fat, #form').submit(function() {
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function(data) {
                $('#result').html(data);

            }
        })

        return false;
    }); 
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:08:15.937

使用 JQuery 将图像添加到页面。通常这是由用户单击以启动 AJAX 请求的按钮添加关闭的。这允许用户在您的脚本运行时看到在后台发生的事情。

或者，由于您的脚本正在 document.ready 上运行，您可以从一开始就获取图像，然后在 ajax 调用完成后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:08:53.027

不知道我是否明白，但似乎你很接近它

```
// #loading could be an img tag pointing to loader.gif or a div containing the img
$('#loading').ajaxStart(function() {
    $(this).show();
    $('#result').hide();
}).ajaxStop(function() {
    $(this).hide();
    $('#result').fadeIn('slow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:09:30.107

将加载程序放在隐藏的 div 中（显示：无），然后您可以使用

```
$('#div').show(); 
```

在ajax请求之前，然后在成功回调中再次隐藏它：

```
$('#div').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:09:49.937

在`submit`函数的第一行：

```
$('#loadingImg').show(); 
```

在回调`success`函数的第一行：

```
$('#loadingImg').hide(); 
```

# jquery - 同位素：前置项目

> ID：12147119
> 
> 赞同：0
> 
> 时间：2012-08-27T18:03:44.347
> 
> 标签：jquery, prepend, jquery-isotope

除了具有组合过滤器的[同位素](http://isotope.metafizzy.co/)外，我还希望能够使用一些链接将项目添加到同位素。在第一次单击时，我希望该项目在前面，而在第二次单击链接时，我希望在前面的项目被删除。通过调用 jQuery 切换，我已经到了一半，但是在第三次单击时 - 这应该带回前置项目 - 没有调用任何内容。我认为这是我如何调用变量（mission_item）的问题。但是我尝试了一些变化，但无济于事。我正在使用的代码是：

```
var $mission_item = $('<div class="item mission">Mission</div>');
$('#mission a').toggle(function() {
    $container
        .prepend($mission_item).isotope( 'reloadItems' ).isotope({ sortBy: 'original-order'});
}, function(){
   $container
        .isotope('remove',$mission_item);
}); 
```

您还可以在我的 js_fiddle ( [http://jsfiddle.net/jessica_b/7uGDX/](http://jsfiddle.net/jessica_b/7uGDX/) ) 上看到它的实际效果。我想弄清楚的另一件事是如何让这些前置项目绕过过滤器。我想我可以将每个过滤器选项添加到项目的类中，这样它总是会显示，但我在 Wordpress 中工作，过滤器是由帖子类别动态生成的。似乎应该有一个更优雅的解决方案，但我不知道从哪里开始。作为一个 jQuery 新手，我深表歉意！并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:12:10.137

也许唯一缺少的是在 $mission_item 上设置不透明度

```
$container.prepend($mission_item.css({'opacity': 1})).isotope( 'reloadItems' ).isotope({ sortBy: 'original-order'}); 
```

# android - 如何防止 GridView 图像在滚动时改变位置？

> ID：12147132
> 
> 赞同：1
> 
> 时间：2012-08-27T18:05:03.407
> 
> 标签：android, bitmap, android-imageview, decoding, android-gridview

首先，是的，我知道这个[问题](https://stackoverflow.com/questions/6055730/gridview-elements-changes-their-place-dynamically-when-scroll-screen)，但答案对我没有帮助。是的，它解决了“滚动时改变位置”的问题，但它不是我的问题的最佳解决方案。让我解释...

所以，这是我的**getView**：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    UnscaledImageView imageView;

    if(convertView == null) {
        imageView = new UnscaledImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(mIconSize, mIconSize));
        imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        imageView.setImageResource(mThumbIds[position]);
    } else {
        imageView = (UnscaledImageView)convertView;
    }

    return imageView;
} 
```

常见的解决方案是移到声明`imageView.setImageResource(mThumbIds[position]);`之外和之下`if`。但这又产生了一个问题……

您可能已经注意到我使用的是 a`UnscaledImageView`而不是`ImageView`. 这是一个自定义子类`ImageView`，我`setImageResource()`用一些额外的选项覆盖了手动解码位图的方法以满足我的需求。手动解码是导致我的问题的原因。

如果该`setImageResource()`方法停留在 内`if`，没问题，位图解码将完成一次位图（在 GridView 加载期间）并且滚动将是平滑的......**但是每次滚动时图像会跳转到不同的位置。**

但是如果该`setImageResource()`方法停留在 之外`if`，图像不会跳转到不同的位置，但所有图像都会随着每次滚动而不断解码。**滚动将是生涩的，根本不流畅。**

我该如何解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:06:44.583

也许您可以对解码的图像使用某种缓冲或缓存。你的`setImageResource`方法应该检查它的输入图像是否已经在缓冲区中（即它是否已经被解码）。如果是这样，那么您的方法只会从缓冲区中检索解码的图像。如果不是，那么它将解码图像并将其存储在缓冲区中以供将来使用。如何实现缓冲区/缓存取决于您自己的需要。我敢肯定有很多可能性。这样，您可以将调用`setImageResource`移出`if-then`块，并且不必在每次`getView`调用该方法时都解码图像。

# php - 反序列化数据错误

> ID：12147134
> 
> 赞同：0
> 
> 时间：2012-08-27T18:05:21.517
> 
> 标签：php, serialization, pdo

我找不到为什么 php 说我：

```
Warning: Insufficient data for unserializing - 5468 required, 226 present 
```

我正在尝试序列化并在反序列化一些对象和数据之后。

也许它太大了？

编辑 ：

由于无法发布代码，因为它太复杂了，我将解释我在做什么：

我正在序列化数据以将其保存到会话中。我在会话中保存了一个带有产品（对象）列表的 Basket 对象。产品类实现 Serialize 以避免保存 PDO 对象（在序列化时返回错误），该对象在某些 ORM 功能的类中。

以下是 Serialize 接口的实现方法：

```
public function serialize() {
    $serialized = \serialize(array(
        '_vars' => $this->getVars(), 
        '_returnNullIfEmpty' => $this->_returnNullIfTempty, 
        '_dataModel' => $this->getDataModel()
    ));

    return $serialized;
}

public function unserialize($data) {
    $unserialized = \unserialize($data);

    $this->setVars($unserialized['_vars']);
    $this->_returnNullIfEmpty = $unserialized['_returnNullIfEmpty'];
    $this->_dataModel = $unserialized['_dataModel'];
} 
```

我注意到我总是在第一个错误下出现这个错误：

```
Notice: unserialize() [function.unserialize]: Error at offset 10503 of 10968 bytes in ... 
```

# javascript - 如何在具有更多 postJSON 查询的功能时使用 jQuery？

> ID：12147136
> 
> 赞同：3
> 
> 时间：2012-08-27T18:05:23.353
> 
> 标签：javascript, jquery, json, knockout.js

我在工作中有一个问题：我有一部分依赖于服务器的安装。我想这样做：当用户删除服务器时，它会遍历安装集合并删除所有相关安装。为此，我使用 jQuery 'when' 函数，据说它等待来自服务器的响应，然后继续执行 'then' 函数。当只有一个依赖安装时，它可以完美运行。但是，当有更多安装时会出现问题，因为它会在收到 JSON 响应后立即移动到“then”函数。

问题是：如何让“何时”功能等待所有服务器响应？例如。我通过 $.postJSON 发出三个删除请求，并希望在收到所有三个响应*后继续。*如果“何时”不可能，我应该用什么来实现它？如果有帮助，我会使用 KnockoutJS 维护我的所有实体集合。谢谢！

编辑：我有这样的：

```
$.when(DeleteDependentInstallations())
.then (function() {
   ...
}); 
```

DeleteDependentInstallations 看起来像（伪代码）：

```
Search the installations collection;
If installation.ID equals server.InstallationID
{
  Add to dependent installations collection;
}
Repeat until the whole collection is searched;

for (i = 0; i < dependentInstallations.length; i++)
{
  DeleteInstallation(dependentInstallations[i]);
} 
```

DeleteInstallations 是一个使用 $.postJSON 函数的简单函数。

问题是 .then 函数在第一个 JSON 响应之后立即执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:39:05.843

我认为您需要让 DeleteDependentInstallations 返回一个 JQuery *deferreds*数组。[$.when](http://api.jquery.com/jQuery.when/)允许您将多个参数传递给它，以便让它知道它必须等待每个参数。

我不知道你在做什么的整个背景，但我认为这样的事情可能会奏效：

```
function DeleteDependentInstallations() {
     var installations = getDependantInstallations();
     var promises = [];
     for (var i = 0; i < installations.length; i++) {
         var installation = installations[i];
         promises.push(DeleteInstallation(installation));
     }
     return promises;
}

function DeleteInstallation(installation) {
      //do whatever here, but return the result of $.ajaxPost
      return $.post('/foo', installation);
} 
```

现在，当您使用该方法时，它应该等待所有返回的 Promise 完成。

```
$.when.apply(null, DeleteDependentInstallations()).then(function() { alert('wee!'); }); 
```

.apply() 是为了让我们可以将数组作为参数集合传递。

编辑：我在脑海中混淆了“延期”和承诺。[Deferred](http://api.jquery.com/deferred.then/)是 $.ajax 调用的返回值，[promise](http://api.jquery.com/promise/)是 $.when() 函数返回的值。

EDIT2：如果 .then()的行为不符合您的需要，您可能还想查看[.done()方法。](http://api.jquery.com/deferred.done/)

# c# - 如何在 UserControl 中获取主窗口

> ID：12147145
> 
> 赞同：1
> 
> 时间：2012-08-27T18:05:56.387
> 
> 标签：c#, .net, wpf

我在 WPF 窗口`User Control`下有一些通用的。`Canvas`

我怎样才能得到那个窗口？

我使用了这种方法

```
void UserControlMethod()
{    
   WindowInteropHelper WindowInteropHelper = new WindowInteropHelper((Window)((Grid)(((Canvas)this.Parent).Parent)).Parent);    
} 
```

它是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:17:43.410

你应该使用：[`Window.GetWindow()`](http://msdn.microsoft.com/en-us/library/system.windows.window.getwindow.aspx)。

用于与本`WindowInteropHelper`机 Windows 代码或 API 进行交互，因此这绝对不是您想要的。

# ruby-on-rails - 新的 LinkedIn 权限问题（Rails omniauth-linkedin gem）

> ID：12147151
> 
> 赞同：4
> 
> 时间：2012-08-27T18:06:34.983
> 
> 标签：ruby-on-rails, authentication, omniauth, linkedin

我正在为我的 rails 应用程序使用omniauth-linkedin gem：

[https://github.com/skorks/omniauth-linkedin](https://github.com/skorks/omniauth-linkedin)

它应该考虑到新的 LinkedIn 权限请求程序和范围，但我没有成功获得电子邮件地址或完整个人资料（除了默认个人资料概述之外的任何内容）。

这是我的 omniauth.rb 文件：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'], :scope => 'r_fullprofile r_emailaddress'
end 
```

在用户输入她/他的凭据之前，完整的个人资料和电子邮件地址请求最初会发送到 LinkedIn。但是，一旦用户登录，范围请求就会丢失，并且只能访问默认配置文件概览信息。

我认为我的问题与必须在我想要的范围内专门请求这些字段有关，正如 gem 页面 (https://github.com/skorks/omniauth-linkedin) 中所述。尽管如此，我还是尝试将特定的字段请求添加到我的 omniauth.rb 文件中，但没有成功（下面的电子邮件字段请求）：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'], :scope => 'r_fullprofile+r_emailaddress',
  :fields => ["id", "email-address", "first-name", "last-name", "headline", "industry", "picture-url", "public-profile-url", "location", "positions", "educations"]
end 
```

显然，除了电子邮件地址、职位和教育等非默认字段之外，我还应该请求配置文件概览的默认字段，以便访问后面的这些非默认字段。

LinkedIn 电子邮件地址应该是直截了当的，因为它不是像职位或教育那样的结构化对象，而且我相信我缺少我想要的职位和教育中特定领域的代码（不知道我会如何写它并且会喜欢一些也可以输入）。我正在使用我的新 API 密钥，所以我不确定问题可能是什么。我需要领英的某种特殊许可吗？帮助表示赞赏！谢谢你。

此外，这是我的身份验证控制器的相关代码：

```
require 'linkedin'

class AuthController < ApplicationController

  def auth
    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])

    request_token = client.request_token(:oauth_callback => 
                                      "http://#{request.host_with_port}/callback")

    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret

    redirect_to client.request_token.authorize_url
  end

  def callback

    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])

    if current_user.atoken.nil? && current_user.asecret.nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      current_user.atoken = atoken
      current_user.asecret = asecret
      current_user.uid = client.profile(:fields => ["id"]).id
      flash.now[:success] = 'Signed in with LinkedIn.'
    elsif current_user.atoken && current_user.asecret 
      client.authorize_from_access(current_user.atoken, current_user.asecret)
      flash.now[:success] = 'Signed in with LinkedIn.'
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:07:43.943

不确定这是否是最优雅的解决方案，但这对我有用

我刚刚添加了在 request_token_path 中传递的范围的配置

```
LINKEDIN_CONFIGURATION = { :site => 'https://api.linkedin.com',
:authorize_path => '/uas/oauth/authenticate',
:request_token_path =>'/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress+r_network+r_contactinfo',
:access_token_path => '/uas/oauth/accessToken' }

client = LinkedIn::Client.new(LINKEDIN_API_KEY, LINKEDIN_SECRET_KEY, LINKEDIN_CONFIGURATION ) 
```

其余代码相同。

请务必在回调方法中更改客户端构造函数。

# c# - 多态 MVC 视图

> ID：12147167
> 
> 赞同：6
> 
> 时间：2012-08-27T18:07:18.940
> 
> 标签：c#, asp.net-mvc, polymorphism, asp.net-mvc-4

所以我在 ASP.NET MVC 中创建了一个注册页面，并且有一个字段列表，这些字段会根据许多条件（取自数据库）而变化。

每次更新数据库时，在不更改代码的情况下在视图上显示这些字段的最佳方法被认为是什么。

我正在考虑的当前系统是用“名称，数据类型”制作一个字典，然后遍历列表并为每个名称添加一个新的输入类型（使用数据类型的开关来获得正确的编辑器）。但它似乎是过时的并且没有充分利用 .NET MVC 系统的好处（例如验证、默认值、针对特定内容的自定义编辑器）。

.NET 中是否有我可能不知道的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T02:03:17.743

我有非常相似的问题。发帖在[这里](https://stackoverflow.com/questions/11832044/asp-net-mvc3-razor-syntax-to-cast-a-model-to-its-subclass-by-reflection)。

不，ASP.NET MVC 中没有多态视图。至少我无法在 Stack Overflow 上进行大量的实验并以不同的方式多次提出这个问题。

视图中定义的类型`@model`将在视图中定义其类型，而不是模型的实际类型（如果它是接口或抽象类或基类，而您将所有漂亮的装饰传入子类，这不会t 工作，因为类型是由模型类型定义的）。

抱歉，没有正面回答您的问题。我最终编写了一堆编辑器模板，它们仅因内部模型类型而异。巨大的 DRY 违规，但*不幸*的是，这是 ASP MVC 的工作方式。

希望这可以帮助您节省一些时间。

# javascript - 如何使用输入数据加载新的 extjs 图表？

> ID：12147171
> 
> 赞同：0
> 
> 时间：2012-08-27T18:07:23.903
> 
> 标签：javascript, extjs, extjs4

我从 xml 文件加载了输入数据。然后用户从下拉列表中选择值。我使用选定的值重新加载图表。每次用户重新选择选项时，图表都会重新加载。这是 extjs 4。

如何使用新选择的值重新加载图表的新代理 URL 并更新图表以反映新选择？谢谢

```
Ext.define('Column',{
            extend: 'Ext.data.Model',
            fields: [

                     'data1','Data2']
        });

var store = Ext.create('Ext.data.Store', {
            model: 'Column',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url:'/data.xml',
                reader:{
                    type:'xml',
                    record: 'result'
                }
            }
        });
var store2 = Ext.create('Ext.data.Store', {
            model: 'Column',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url:'/data2.xml?selectvalue=',
                reader:{
                    type:'xml',
                    record: 'result'
                }
            }
        });

var mychart = Ext.create('Ext.chart.Chart', {

        width: 400,
        height: 200,
        renderTo: 'ChartsDiv',
        store: store2,
        axes: [{
            type: 'gauge',
            position: 'gauge',
            minimum: 0,
            maximum: 100,
            steps: 10,
            margin: 20
        }], 
        series: [{
            type: 'gauge',
            field: 'data2',
            donut: 40,
            colorSet: ['#843525', '#ddd']
        }]
    });

var simpleCombo = Ext.create('Ext.form.field.ComboBox', {
            store: store,
            displayField: 'data1',
            valueField: 'data1' ,
            width: 250,
            labelWidth: 120,
            fieldLabel: 'select a value',
            renderTo: 'simpleCombo',
            queryMode: 'local',
            typeAhead: true,
            listeners:{
            change: function(combo,records){
                var selectedValue= simpleCombo.getValue();
                Ext.Msg.alert(selectedValue);   
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:15:15.200

如果我正确理解您的问题，您想`store2`根据对组合框所做的更改更改 URL 吗？

```
change: function(combo, records){
    var selectedValue = combo.getValue();
    store2.proxy.url = "/data2.xml?selectvalue=" + selectedValue;

    // Load the store with a callback function to redraw the chart
    store2.load(function(records, operation, success){
        if(success){
            chart.redraw();
        }
    });
} 
```

# c# - 如何在 Visual Studio 2012 中自己的数据库中创建成员表

> ID：12147179
> 
> 赞同：0
> 
> 时间：2012-08-27T18:07:53.387
> 
> 标签：c#, visual-studio-2012

我`aspnet_regsql`在 Visual Studio 2010 中使用过命令提示符，该命令提示符会打开成员资格向导，以便在我自己的数据库中为我创建表和存储过程。现在，这些表通常使用`'aspnet_'`前缀。
但是，在 Visual Studio 2012 默认网站模板中，我看到这些表没有前缀，即`'aspnet_'`与它们的名称相关联。
**如何，我可以创建这些表并指定我的自定义数据库。**就像在 Visual Studio 2010 命令提示符中一样。
**我如何在 Visual Studio 2012 中调用该实用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:32:15.763

在运行工具之前选择好的框架版本

在 msdn 上，他们不谈论变化。

[http://msdn.microsoft.com/en-us/library/89hwy0w9](http://msdn.microsoft.com/en-us/library/89hwy0w9)

# android - Android 4.1 中的移动网络设置

> ID：12147182
> 
> 赞同：6
> 
> 时间：2012-08-27T18:08:01.420
> 
> 标签：android, android-intent, settings

我的应用程序应该打开移动网络设置活动。一切正常，除了 Android 4.1 的设备在尝试打开设置后崩溃

```
Intent intent = new Intent(android.provider.Settings.ACTION_DATA_ROAMING_SETTINGS);
final ComponentName cName = new ComponentName("com.android.phone", "com.android.phone.Settings");
intent.setComponent(cName);
startActivity(intent); 
```

崩溃后的堆栈跟踪：

```
java.lang.SecurityException: Permission Denial: starting Intent { act=android.settings.DATA_ROAMING_SETTINGS cmp=com.android.phone/.Settings } from ProcessRecord{41b83198 ... 
```

有任何想法吗？难道是因为清单？

更新：

似乎问题在这里解决了： [Android - 移动网络设置菜单（果冻豆）](https://stackoverflow.com/questions/11291387/android-mobile-network-settings-menu-jelly-bean)

问题是将“com.android.phone.Settings”更改为“com.android.phone.MobileNetworkSettings”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T15:01:16.247

我认为你必须尝试

```
Intent intent = new Intent();
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(android.provider.Settings.ACTION_DATA_ROAMING_SETTINGS);
startActivity(intent); 
```

这东西在 android 4.1.2 中对我有用，可能他们在 4.1.2 中解决了这个问题

# objective-c - iOS：尝试调用在类别中实现的方法

> ID：12147189
> 
> 赞同：3
> 
> 时间：2012-08-27T18:08:17.447
> 
> 标签：objective-c, ios, categories

这个问题的前传在[这里](https://stackoverflow.com/questions/12145981/ios5-storyboards-arc-weird-categories-issue)。

我有一个班级（A），班级有类别。在类别中，我定义并实现了一个方法。

现在我正在尝试在（假设为 B）类中调用 [a someMethod]。我的 B 班达不到这个方法。不能从其他类中调用类别方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:10:12.743

您没有显示您的代码，但是在引用类别方法的 .m 文件中，您确实需要导入定义类别接口的文件的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:13:08.520

如果您在 .m 文件中定义类别，您将无法从该 .m 文件外部调用该类别的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:25:18.197

不幸的是，您没有提供有关您的问题的足够信息。因此，我们所能做的就是告诉您应该如何做，并猜测您遇到麻烦的原因。

当您发布问题时，您应该发布所有相关信息。在这种情况下，那将是不起作用的代码。

另外，你的说法

> 我的 B 班达不到这个方法。

几乎没有任何意义。你得到一个编译器错误，一个运行时错误，语法窗口没有显示它，你到底是什么意思？

现在，当您在类上实现类别时，您希望在头文件 (.h) 中声明该类别...

```
@interface Foo (BarExtensions)
- (NSString*)bar;
@end 
```

然后，在实现 (.m) 文件中，提供这些方法的实现。

```
@implementation Foo (BarExtensions)
- (NSString*)bar {
    return @"FooBar";
}
@end 
```

当然，您应该适当地命名事物。

此外，请确保将 .m 文件包含在为您的目标构建的文件列表中。

如果你这样做了，就不会出错了。

# ios - 使用具有跨平台风格的 NSlog

> ID：12147190
> 
> 赞同：0
> 
> 时间：2012-08-27T18:08:26.313
> 
> 标签：ios, nslog

我正在使用 c++ 创建一个 iphone 测试，并且我想使用 nslog（显示调试信息的唯一方法？）每当我想包含 nslog 函数时，我的 cpp 必须更改为 mm 对吗？这是唯一的方法吗？因为我不想在移动到其他平台时改回 cpp。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:14:33.677

由于 NSLog 仅存在于 Objective-C 平台上，为什么不在`LogMessage()`一个调用 NSLog 的单个 .mm 文件中创建您自己的方法，采用标准 C++ 参数，并从通常命名的 C++ 文件中调用它。这样你就不需要重命名每个需要记录到 .mm 的文件

在其他平台上，只需包含另一个实现，`LogMessage()`因为无论如何都没有 NSLog 可以调用。

# git - 如何使用 git 将旧的提交变为当前的主提交？

> ID：12147193
> 
> 赞同：1
> 
> 时间：2012-08-27T18:08:41.717
> 
> 标签：git, github

这是我的提交：

美国广播公司

C 是当前提交。我希望事情在起源上看起来像这样：

ABCA

所以 A 是我当前的提交，但 B 和 C 被保留。我目前有克隆的存储库，其中 C 是当前提交。接下来我需要做什么才能获得我想要的原点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:11:45.453

提交“B”和“C”是分支历史的渐进状态。要在不丢失本地“B”或“C”的情况下重置为“A”，只需在原点上使用新分支：

```
git checkout -B new-branch master
git reset --hard <A_commit_hash>
git push origin new-branch 
```

'B' 和 'C' 将保留在 'master' 上，所以你可以`git cherry-pick <commit_of_B_or_C>`或`git merge master`没有麻烦。

如果你真的想要'B'和C'，但想将'master'重置为'A'，并考虑过强行覆盖遥控器的后果：

```
git branch archived-master master ;# create 'archived-master' branch
git reset --hard A ;# reset master to 'A' state
git push -f origin master ;# overwrite remote's master 
```

这将在 'archived-master' 分支上本地保存 'B' 和 'C'。

我会避免`git revert`这样做。还原提交使命令变得更加困难，如果你想重用“B”和“C”，人类就更难解析历史了`git bisect`。`git rebase`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T18:13:55.663

`git revert B C`

（这将添加两个提交，但树的状态将与 A 处的状态相同）

# vba - 将 Access 和 Outlook 与 VBA 集成以进行定期报告

> ID：12147195
> 
> 赞同：1
> 
> 时间：2012-08-27T18:08:55.390
> 
> 标签：vba, ms-access, outlook

我希望将一些 VBA 代码放在一起，以便一次发送一堆电子邮件。这些电子邮件每个都有多个附件和多个收件人。

我在 Access 中有一个表，其中主键是“电子邮件报告名称”列表，每列包含此电子邮件报告发送到的电子邮件地址。

在另一个表中，我还有“电子邮件报告名称”，每列是要附加到该电子邮件的文件的硬盘驱动器上的文件路径。

我还有两个查询，它们调用这些表并按电子邮件报告名称过滤，该名称由自定义函数填充到条件字段中。

我的 Outlook 编码工作正常，可以从 Access 发送电子邮件。但我完全不知道如何让它遍历不同的“电子邮件报告名称”，然后从这些查询中提取相关信息以填写收件人列表和附件列表。

很抱歉没有包含任何示例代码，但我真的很想在这方面出海，甚至不知道从哪里开始。

如果有任何没有 SQL 的纯 VBA 解决方案，那将是理想的。我还不知道任何 SQL，所以即使我确实让它最初工作，我也很难根据需要修改代码。

谢谢，

* * *

```
SELECT FilePaths.MailItem, FilePaths.FilePath1, 
       FilePaths.FilePath2, FilePaths.FilePath2, 
       FilePaths.FilePath4, FilePaths.FilePath5, 
       FilePaths.FilePath6, FilePaths.FilePath7,
       FilePaths.FilePath8, FilePaths.FilePath9, 
       FilePaths.FilePath10, FilePaths.FilePath11, 
       FilePaths.FilePath12, FilePaths.FilePath13, 
       FilePaths.FilePath14, FilePaths.FilePath15, 
       FilePaths.FilePath16 
FROM FilePaths 
WHERE (((FilePaths.MailItem)=EmailItemSelect())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:58:06.940

设置表格的最佳方式是在以下几行：

电子邮件地址

```
ID 
EmailAddress
OtherDetails 
```

文件路径

```
ID
MailItem
FilePath 
```

电子邮件地址文件路径

```
FilePathID
AddressID 
```

我不太清楚mailitem是什么，所以我把它留在了里面。

表 EmailaddressFilepath 包含匹配哪个地址接收哪些项目。

电子邮件地址

```
ID     EmailAddress    OtherDetails
1      joe@example.com Joe Bloggs 
```

文件路径

```
ID    MailItem    FilePath
1     Help        z:\docs\help.doc
2     More help   z:\docs\morehelp.doc 
```

电子邮件地址文件路径

```
FilePathID    AddressID
   1              1
   2              1 
```

然后你需要一些代码

```
Dim rs As Recordset
Dim db as Database

''Something like
sSQL="SELECT EmailAddress, Filepath " _
    & "FROM ( EmailaddressFilepath " _
    & "INNER JOIN EmailAddresses ON " _
    & "EmailaddressFilepath.AddressID = EmailAddresses.ID) " _
    & "INNER JOIN Filepaths ON EmailaddressFilepath.FilePathID = Filepaths.ID " _
    & "WHERE FilePathID=1"

Set rs = db.Openrecordset(sSQL)

'You now have a recordset with email addresses and attachments
'there would be other approaches, but this will do for now.

 Do While Not rs.EOF
     sEmail=rs!Email
     'set up outlook email

     Do While rs!Email=sEmail
     ''Attachment
         sAttach=rs!Filepath 
         rs.MoveNext
         If rs.Eof Then
            exit loop
         End if
     Loop
 Loop 
```

# ruby-on-rails - Rails嵌套表单：使用后退按钮并在删除记录后保存时出错

> ID：12147206
> 
> 赞同：2
> 
> 时间：2012-08-27T18:09:13.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

我注意到嵌套表单存在问题，但不知道如何解决。我的表格工作正常，这不是关于如何让它们工作的问题。这个问题更像是“在这种情况下我应该做什么”。

当我通过 fields_for 使用嵌套表单时，效果很好。当我添加 javascript 以便能够添加和删除字段时，一切都很好。我可以添加，保存，删除，保存，没有问题。但是，如果您使用嵌套表单编辑对象，然后删除其中一个嵌套对象（通过将 {'_delete' => true} 参数与对象一起发送），那么您使用后退按钮并再次保存该表单而不删除相同的你会得到一个错误的字段。

你的浏览器缓存了应该不再存在的字段，然后 Rails 尝试通过哈希中的 'id' 元素找到旧对象，但它失败了，这是理所当然的。无论如何我可以防止这种情况吗？我是否需要手动检查哈希以确保元素仍然存在？有什么方法可以强制浏览器刷新或其他什么？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:53:06.100

是和不是。您的应用程序几乎无法控制浏览器行为。如果浏览器向您的应用程序发送不再具有相关性的信息，您可以在服务器端执行的最佳操作是针对该信息进行验证并向用户显示干净的错误消息（或静默删除无效的记录 ID，但这可能会让人非常困惑）用户。）

另一种方法是尝试让浏览器停止缓存有问题的页面，您之前可能在银行或其他敏感应用程序中看到过这种情况，您在点击后退按钮时会收到“此页面已过期”的警告。您可以使用元标记或 http 标头将过期日期设置为过去或使用 pragma: no-cache。

# mysql - SELECT FOR UPDATE 锁定 MySQL 中的行有时间限制吗？

> ID：12147209
> 
> 赞同：1
> 
> 时间：2012-08-27T18:09:26.917
> 
> 标签：mysql

`select_for_update`这些天我在 Django 中使用它来生成`SELECT FOR UPDATE`语句，我想知道 MySQL 保持锁定的时间。某处有超时吗？

# objective-c - 从 Storyboard 加载的 UIViewController 中的内存异常

> ID：12147214
> 
> 赞同：0
> 
> 时间：2012-08-27T18:09:55.930
> 
> 标签：objective-c, uiviewcontroller

点击一个按钮，我正在`UIViewController`使用以下代码从我的故事板中加载...

```
InfoViewController *dst = [self.storyboard instantiateViewControllerWithIdentifier:@"InfoViewIdentifier"];
[self.view insertSubview:dst.view atIndex:0];
dst.view.frame = CGRectMake(0, 480, 320, 480);

[UIView beginAnimations: @"infoAnimation" context: nil];
[UIView animateWithDuration: 1.0f animations: ^{dst.view.frame = CGRectMake(0, 0, 320, 480);}];
[UIView commitAnimations]; 
```

一切都很好。生成的视图上有几个按钮，操作简单（关闭视图、在 safari 中打开 URL 等），只要我点击其中任何一个，我就会收到异常。奇怪的是，它可能会抛出两个异常之一......

*   线程 1：EXC_BAD_ACCESS (code=1, address=...) - 显示应用程序仍在异常断点处运行。
*   缺少标识符 UpstreamPlaceholder-2 的代理 - 显示在日志中

我也用自定义的segues尝试过这个，我得到了同样的结果。

**编辑：**

经过更多测试，它似乎随机抛出错误访问错误（大多数情况下，80%+）。如果未引发该异常，则在 safari 中打开的链接有效，但关闭视图的链接会引发代理标识符错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:05:45.353

添加到上一个答案：标识符 UpstreamPlaceholder-xx 的缺少代理也可能在情节提要错误配置中引发。像重复的 CellIdentifier ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:45:34.337

好的，这里完全是菜鸟问题。该问题与在方法中使用局部变量有关。ARC 大部分时间都在扼杀内存中的视图（我的 80% 参考）。我将`dst`变量移动到我的头文件中，一切都按预期工作。

# iphone - 向单元格添加第三个标签？

> ID：12147218
> 
> 赞同：0
> 
> 时间：2012-08-27T18:10:19.287
> 
> 标签：iphone, label, tableview, cell

正如标题所说，我想在我的单元格中有 3 个标签（在 tableView 中）。从下面的代码中可以看出，我目前只有 2 个标签，它们是名称，作为 textLabel 和 book 作为 detailTextLabel。但是，如果我也想将章节作为标签（在 tabelView 单元格中的自己的行）怎么办？实现这一点的最佳方法是什么？

## tableView 中的输出应如下所示：

姓名

书

## 章节

/谢谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BookmarkCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Bookmark *item = [self.items objectAtIndex:indexPath.row];

NSArray *chunks = [item.name componentsSeparatedByString: @","];

NSString *name;
NSString *book;
NSString *chapter;

if ([chunks count] > 0)
{
    name = [chunks objectAtIndex:0];
    if ([chunks count] > 1)
    {
        book = [chunks objectAtIndex:1];
        if ([chunks count] > 2)
        {
            chapter = [chunks objectAtIndex:2];
        }
    }
}

cell.textLabel.text = name;
cell.detailTextLabel.text = book; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:47:10.240

听起来你想要一个定制`UITableViewCell`，然后你可以添加任何你想要的东西。从那里只需命名您放入其中的标签并相应地编写代码以使用`cellForRowAtIndexPath`方法填充它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:16:35.847

创建一个自定义 UIView 并将其作为子视图添加到单元格的 contentView。在这个自定义视图中添加任意数量的 UILalel。您实际上不必创建自定义视图来执行此操作，但它允许更大的多功能性。

这是实现三个标签的一些基本代码。

```
UIView * pNewContentView= [[UIView alloc] initWithFrame:cell.contentView.bounds];
CGRect labelFrame= pNewContentView.bounds;
labelFrame.size.width= labelFrame.size.width * 0.33;

UILabel* pLabel1=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel1];

labelFrame.origin.x= labelFrame.size.width;
UILabel* pLabel2=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel2];

labelFrame.origin.x= labelFrame.origin.x + labelFrame.size.width;
UILabel* pLabel3=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel3];

[cell.contentView addSubview:pNewContentView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:24:06.593

如果您需要的只是另一个标签，那么您可以按照标记所说的做，创建一个子视图并将其设置到您的单元格。

如果你想拥有可以做更多的事情，你需要的是一个自定义的 UITableViewCell。您可以定义按钮和其他控件。看看[这个](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)苹果提供的文件。这个文档真的可以帮助理解 UITableViewCell 是如何工作的，所以值得一读。

# php - 传递参数 Byreference 以提高速度和效率

> ID：12147219
> 
> 赞同：4
> 
> 时间：2012-08-27T18:10:38.327
> 
> 标签：php, performance, pass-by-reference, pass-by-value

将参数传递给函数时，如果函数不应该更改该参数的值，则约定是按值传递。仅当函数要修改该变量时，我们才传递 &byref。

另一方面，我们知道当按引用传递时，PHP 使用指针，而不是像按值传递那样复制变量的副本。

这在我的脑海中提出了一个问题，我们是否应该不时通过引用将某些变量传递给我们的函数以达到速度和效率的目的——即使我们不需要修改它们。

没有对这个想法发疯和完全滥用它，我想为我在这里谈论哪些变量或什么样的变量提供一个参考框架。

它们主要是 $dbh（数据库句柄）和非常大的变量。说实话，只是 $dbh 的！真的。

在您看来，您认为这是一种很好的做法，还是您认为它永远不应该被实践。

让我们把这个问题归结为一个代码片段并对此进行评论。

//假设$dbh是mysql连接的database_handle

```
for ($userID = 1; $userID <= 1000; $userID++) {

        display_name ($dbh,"users",$userID)// outputs the name of the passed userid 
} 
```

在这里， display_name 函数应该按引用还是按值获取 $dbh？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:13:20.960

PHP 使用[copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)，这本质上意味着只要变量没有被修改，通过值传递它与通过引用传递它的效果相同。也就是说，在你描述的场景中使用引用不会有性能提升（其实[有些报表](http://www.thedeveloperday.com/php-lazy-copy/)引用会比较慢）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:05:23.917

> 它们主要是 $dbh（数据库句柄）和非常大的变量。说实话，只是 $dbh 的！真的。

是什么让你觉得它很大？“句柄”通常表示类似指针（或指向指针的指针）之类的东西，非常小的东西。

# asp.net - Asp.net向所有页面方法添加标题

> ID：12147221
> 
> 赞同：4
> 
> 时间：2012-08-27T18:10:52.123
> 
> 标签：asp.net

我想向客户端发生的所有页面方法请求添加一个 CSRF 令牌 HTTP 标头。是否可以全面附加这样的数据？

这些方法被称为

```
PageMethods.Method() 
```

在javascript中

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T18:36:09.323

1 你可以使用

```
xhr.setRequestHeader //method based on XMLHttpRequest concept 
```

你可以阅读这个链接

[http://erlend.oftedal.no/blog/?blogid=118](http://erlend.oftedal.no/blog/?blogid=118)

2 您也可以使用 HttpHandler 来自定义您的标头，但它是完整的 .net 技术，没有 javascript

# python - 是否需要 snmp

> ID：12147224
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:03.897
> 
> 标签：python, monitoring, snmp

管理设备真的需要 snmp 吗？我想用 python 编写一些脚本来管理设备（主要是服务器），例如磁盘使用情况、进程列表等。我正在学习如何做，很多文章都谈到了 snmp 协议。

例如，我不能使用 psutil、子进程或 os 模块，并通过 udp 发送信息？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:59:17.330

不，这不是*必需*的，但您的问题有点像询问您是否需要使用 http 来提供网页。从技术上讲，您*不需要*它，但如果您不使用它，您将放弃与许多现有客户端软件的互操作性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:33:41.833

SNMP 是一种标准监控（和配置）工具，广泛用于管理网络设备（但不仅限于）。我不完全理解您的问题-您不能使用 SNMP 是否是一个问题，因为设备不支持它（那么它支持什么？）要编写任何内容，您必须知道向您公开的接口（如果不是 MIB文件然后呢？）。你读过 NETCONF 吗？

# icons - Ico 格式 - 32 位 PNG 与 32 位 BMP 与 24 位 BMP

> ID：12147227
> 
> 赞同：4
> 
> 时间：2012-08-27T18:11:10.263
> 
> 标签：icons, png, bmp, alpha-transparency, ico

我正在发布一个 .NET 程序，并且正处于完善阶段。我需要在项目属性中设置图标。根据我的研究，我想创建以下像素大小的图像以适应所有图标大小：16、32、48、96、256。

我还找到了一个程序，可以将 5 张图片转换为一个名为“png2ico”的 ico 文件。

我的问题是这个。我的源图片是 32 位（RGB + alpha）PNG 文件。我只听说过 Vista 和更高版本支持读取其中包含 PNG 内容的 .ico 文件，所以如果我向可能只有 Windows XP 的公众发布，那么使用带有 PNG 的 ico 文件是否危险？

如果我需要使用带有 BMP 的 ico 文件，那么使用 32 位 BMP 是否危险？由于抗锯齿效果不佳等原因，我宁愿不使用 24 位 BMP。

如果我需要在 PNG 上使用 BMP，对于将多个 BMP 转换为单个 .ico 文件的程序有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:47:14.713

`png2ico`将 png 作为源文件，但它没有说明它实际上在生成的 ico 文件中使用 png 压缩。

我建议您使用[Gimp](http://www.gimp.org/)，您可以在那里为您希望生成的 ico 支持的每种尺寸创建一个带有图层的图像。然后，当您导出/保存为 ico 时，它会询问您想要对每一层进行哪种压缩。

对于最大的图层（96 和 256），使用 png 压缩非常安全，因为通常较旧的桌面不会显示那么大的图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:32:05.127

PNG 图像仅在 Vista+ 上显示，但不应在旧版本上引起问题。

32 位 BMP 在 XP+ 上正常工作，并且在旧版本上显示 alpha 通道（黑色）损坏（可以通过适当的掩码避免（大多数图标编辑器不支持 32bpp 图像？），然后它将像 24bpp 图像一样显示）

你真的应该使用真正的图标编辑器，那里有[几个](http://www.snapfiles.com/get/gficoneditor.html) [免费](http://portableapps.com/apps/graphics_pictures/icofx_portable)的应用程序。

# .net - 配置 .wsdl 以供使用

> ID：12147228
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:11.010
> 
> 标签：.net, wsdl, app-config, config

我已将`.wsdl`文件连接到我的项目（按`adding service reference`）。`Wcf`描述的`.wsdl`已经有配置，没有它就不能在我的项目中使用。我应该怎么做才能设置这些配置？任何意见，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:09:41.370

如果您查看您所做的项目，`add web reference`它应该会自动添加 app.config 条目。您需要做的就是将它们从该配置复制到使用它的 WCF 应用程序的配置文件中。

如果没有，您还可以使用[Svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)生成类和配置。如果您有 WSDL 的本地副本，则可以运行以下命令：`svcutil *.wsdl *.xsd /language:C#`或者如果您通过 http 托管端点导入，这将起作用`svcutil http://service/metadataEndpoint`。

# php - 如何在 db 中没有 URL 字段的情况下更改页面标题的 URL 中的 ID？

> ID：12147229
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:21.843
> 
> 标签：php, rewrite

这是这个伟大社区的另一个问题。我一直在阅读有关将其更改`www.example.com/index.php?id=19` 为`www.example.com/example-page`. 我找到了一个解决方案：在数据库中为页面创建一个 URL 字段，替换标题的标识符 ID 或其他内容。我的问题是：是否有另一种方法可以做到这一点，但不替换标题的 ID int 标识符？我的意思是这样做`www.example.com/index.php?id=19` 但`www.example.com/example-page`仍然使用 id 作为页面的唯一标识符？因为我的老师告诉我，咨询号码比字符串更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:15:46.437

您可以使用字符串作为唯一标识符 - 没问题。

我仍然建议您坚持使用数字并将字符串引入所谓的“别名”，因为您可能希望稍后更改字符串，而且更新对标识符的所有引用非常复杂......

# java - 如何将 Jasypt 库添加到 OS X？

> ID：12147230
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:31.707
> 
> 标签：java, macos

我刚刚遇到了 JASYPT 库，我想尝试一下。我用谷歌搜索了一下，但没有找到添加新 Java 库的指南。我有 OS X 10.7，我应该将 Jasypt 库解压缩到哪个目录？

贾西普特：[http ://www.jasypt.org/](http://www.jasypt.org/)

编辑：我使用 Eclipse for Java Dev，我刚刚创建了一个新项目并希望将这个库集成到其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:16:16.000

在 Eclipse 中，它是：*属性 > Java 构建路径 > 库。*（项目的上下文菜单）

在那里你添加**jasypt-1.9.0.jar**

如果您使用 Java 5 或更早版本，您还必须包含**icu4j-3.4.4.jar**

*（版本可能与您的不同）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:17:36.933

您可以按照以下步骤更改构建路径：

*   右键单击您的项目节点；
*   特性;
*   Java 构建路径；
*   图书馆；
*   添加 JAR 或添加外部 JAR；
*   添加 Jasypt 的罐子；
*   应用您的更改；
*   测试一下。

# html - Visual Studio 中的正则表达式查找替换

> ID：12147231
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:39.120
> 
> 标签：html, visual-studio-2010

嗨，我有一个包含数百行这样的 html 文件

```
<tr>
    <td class="text-column">
        Risk
    </td>
    <td>
        7,848,705
    </td>
    <td>
        7,828,750
    </td>
    <td>
        19,955
    </td>
</tr> 
```

为了节省格式化它的时间，有谁知道Visual Studio查找/替换将产生的正则表达式

```
<tr>
    <td class="text-column">Risk</td>
    <td>7,848,705</td>
    <td>7,828,750</td>
    <td>19,955</td>
</tr> 
```

我计划稍后用剃刀填充数字，这将有助于提高可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:29:08.150

```
Find: {\<[^\>]+\>}[:b\n]*{[^\n]*}[:b\n]*{\</[^\>]+\>}
Replace: \1\2\3

Explanation:
{\<[^\>]+\>}   -- capture open tag
[:b\n]*        -- discard whitespace
{[^\n]*}       -- get contents (assuming no line breaks)
[:b\n]*        -- discard whitespace
{\</[^\>]+\>}  -- capture closing tag 
```

不完美，但它会在您的样本上产生预期的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:33:43.023

最后用代码做到了。但感谢德文郡抽出时间

# swt - TableViewer 居中布局

> ID：12147233
> 
> 赞同：0
> 
> 时间：2012-08-27T18:11:46.363
> 
> 标签：swt, jface

所以现在我已经成功地`TableViewer`在我的`TitleAreaDialog`.
我试图找出我遇到的一些布局问题。
我可以在 Dialog 窗口中控制 tableViewer 的布局和位置吗？
现在表格显示在右侧。
我希望它以我的父 Composite 为中心。
我可以在`createDialogArea`方法中将 TableViewer 添加到父布局吗？我将在对话框中添加更多合成物，并希望能够控制它们的去向和外观。另外我的表格在表格末尾显示了一个半空列，有没有办法删除它？

![带有 TableViewer 的对话框](../Images/c83793b16e03bd90a68fb4ad824aafb1.png)

就像是：

```
GridData gridData = new GridData();
gridData.grabExcessHorizontalSpace = true;
gridData.horizontalAlignment = GridData.CENTER;
TableViewer d = createTableViewer(area);
d.setLayoutData(gridData); 
```

这是我的 createDialogArea 代码。

```
protected Control createDialogArea(Composite parent) {
   final Composite area = new Composite(parent, SWT.NULL);
   final GridLayout gridLayout = new GridLayout();
   gridLayout.marginWidth = 15;
   gridLayout.marginHeight = 10;
   area.setLayout(gridLayout);

   TableViewer d = createTableViewer(area);

   return area;
} 
```

这是我的表格查看器代码

```
 private TableViewer createTableViewer(Composite parent) {
    viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
    createColumns(parent, viewer);
    final Table table = viewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);

    viewer.setContentProvider(new ArrayContentProvider());
    viewer.setInput(AplotSelectedDataTable.getInstance().getArrayData());

    // Layout the viewer
    GridData gridData = new GridData(SWT.CENTER);
    gridData.verticalAlignment = GridData.FILL;
    gridData.horizontalSpan = 2;
    gridData.grabExcessHorizontalSpace = true;
    gridData.grabExcessVerticalSpace = true;
    gridData.horizontalAlignment = GridData.FILL;
    viewer.getControl().setLayoutData(gridData);
  return viewer;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:53:02.410

这是一个可以帮助您解决布局问题的小示例：

```
public class TestClass extends Dialog {

    private TableViewer viewer;

    protected TestClass(Shell parentShell) {
        super(parentShell);
    }

    protected Control createDialogArea(Composite parent) {
        final Composite area = new Composite(parent, SWT.NONE);
        final GridLayout gridLayout = new GridLayout(2, true);
        gridLayout.marginWidth = 15;
        gridLayout.marginHeight = 10;
        area.setLayout(gridLayout);

        area.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        createButtons(area);
        createTableViewer(area);

        return area;
    }

    private void createButtons(Composite parent)
    {
        Button button1 = new Button(parent, SWT.PUSH);
        button1.setText("Button1");
        button1.setLayoutData(new GridData(SWT.CENTER, SWT.FILL, true, true));

        Button button2 = new Button(parent, SWT.PUSH);
        button2.setText("Button2");
        button2.setLayoutData(new GridData(SWT.CENTER, SWT.FILL, true, true));
    }

    private void createTableViewer(Composite parent) {
        viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL
                | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
        createColumns(parent);
        final Table table = viewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);

        viewer.setContentProvider(new ArrayContentProvider());

        // Layout the viewer
        GridData gridData = new GridData(SWT.CENTER, SWT.FILL, true, true);
        gridData.horizontalSpan = 2;
        table.setLayoutData(gridData);
    }

    private void createColumns(Composite parent)
    {
        TableViewerColumn viewerColumn = new TableViewerColumn(viewer, SWT.NONE);
        final TableColumn column = viewerColumn.getColumn();
        column.setText("Title");
        column.setWidth(100);
        column.setResizable(true);
        column.setMoveable(false);
    }

    public static void main(String[] args) {
        Display display = Display.getDefault();
        final Shell shell = new Shell(display);

        TestClass test = new TestClass(shell);

        test.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

它基本上创建了一个`Dialog`顶部有 2 个按钮和下方**居中** `TableViewer`的小按钮。这应该让您了解如何解决您的问题。

# java - 为什么我不能调用带有错误类型参数的方法？

> ID：12147236
> 
> 赞同：0
> 
> 时间：2012-08-27T18:12:05.500
> 
> 标签：java, android

我尝试使用：

```
//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f)
{
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

然后

```
R.drawable.image = decodeFile(R.drawable.image); 
```

如何使用这种方法？R.drawable.image 是整数，所以它给了我错误，我该如何解码文件？我将 240kb 图像添加到 textview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:16:20.367

好吧，您自己说过，`R.drawable.image`是一个整数-但是您试图将其传递给接受 a 的方法`File`，然后将返回值 (a `Bitmap`) 分配回给它。

此外，像这样捕获`FileNotFoundException`并吞下它是一个非常糟糕的主意 - 为什么不直接声明该方法可能会引发异常？

目前尚不清楚你真正想要做什么——或者`R.drawable.image`真正想要实现什么——但为了使用你所拥有的方法，你显然需要一个`File`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:22:52.410

您是否尝试将可绘制对象转换为文件，然后将该文件转换为位图？

这将允许您解码位图的可绘制权限：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.image ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:39:31.053

> VM 不会让我们分配 6291456 字节

您的图像大约 6 MB 未压缩，请参阅[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

如果您想加载可能需要的该图像的缩小版本，因为您似乎内存不足，它可以使用以下代码

```
/** decodes image from resources to max maxSize x maxSize pixels */
private Bitmap decodeFile(Context context, int resId, int maxSize) {
    Resources res = context.getResources();
    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, o);

    // Find the correct scale value. It should be the power of 2.
    int scale = 1;
    while (o.outWidth / scale / 2 >= maxSize && o.outHeight / scale / 2 >= maxSize)
        scale *= 2;

    // Decode with inSampleSize
    o.inJustDecodeBounds = false;
    o.inSampleSize = scale;
    return BitmapFactory.decodeResource(res, resId, o);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:30:57.957

我想你可能正在寻找这样的东西：

```
Resources res = getResources();
Drawable image = res.getDrawable(R.drawable.image); 
```

Android 允许您使用 Resources 类访问可绘制文件夹中的图像。他们还通过为不同分辨率的图像使用不同的文件夹来为您处理缩放。此外，如果您在 xml 中定义了一个小部件，您可以使用该`android:src`属性为它分配一个源可绘制对象，在您的情况下它是`android:src="@drawable/image"`. 看一眼

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

和

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

有关如何使用 Android 处理图像以及操作系统如何帮助您分别选择适当缩放的图像的更多信息。

编辑：还有一件事，如果您只是想为 ImageView 之类的东西设置图像资源，您可以使用`imageView.setImageResource(R.drawable.image)`这样您就不必在代码中创建 Drawable 或 Resources 对象。如果您需要在设置之前对图像进行一些操作，则有相应的`setImageDrawable`和`setImageBitmap`方法。

# api - “合理”使用 Web API 来同步数据

> ID：12147237
> 
> 赞同：3
> 
> 时间：2012-08-27T18:12:13.520
> 
> 标签：api, web-applications, asana

我的目标是将 Web 应用程序与内部数据库同步。Web 应用程序有一个公共 API，但为了完全同步这两个源，我每次都需要进行大约 2000 次单独的 API 调用。我的直觉告诉我，这是过度的，可能是不负责任的，但我缺乏确定的经验。

在这种特殊情况下，Web 应用程序是[Asana](http://www.asana.com)，但我之前在使用其他服务时遇到过类似的情况。有什么方法可以知道您是否通过过多的 API 调用来滥用服务？我知道我不会去 DOS 像 Asana 这样的公司，但我无法摆脱这样的感觉：肯定有比每天发出约 15 万个请求更好的方法。

我能想到的唯一其他选择是仅当我知道数据库发生更改时才更新 Web 服务，但那样我会失去很多功能。

我为这个问题的主观性道歉，但我真的希望有人能解释在使用公共 API 时是否有任何礼仪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T01:11:09.793

（我在 Asana 工作）

这是一个很好的问题，或者说是一组问题。

您正在设计一个系统，该系统将重复对每个对象发出请求。随着对象数量的增加会发生什么？即使您的初始请求率是合理的，这也会遇到可伸缩性问题。一种更具可扩展性的解决方案是随着系统中**更改**的数量而扩展的解决方案。这也会随着时间的推移而增长，但速度要慢得多 - 单个用户每天可以进行的更改数量相对恒定，但他们创建的对象总数会随着时间的推移而增长和增长。所以我的第一条建议是避免以这种方式做事，而是找到一种方法来检测变化并采取行动。知道为什么你觉得通过这种方法会失去能力会很有趣。

现在，我碰巧知道 Asana API 目前没有*为*您提供任何友好的机制来检测系统中的变化。这是一个普遍要求的功能，我们正在研究它，但遗憾的是我不能保证交货日期。因此，您可能别无选择，只能暂时轮询我们的系统。

至于对 API 的礼貌，许多服务提供商对其 API 的使用设置了限制，以防止意外或恶意使用 API 影响对其其他客户的服务——Asana 也不例外。有时会发布这些限制，有时不会发布，并且没有标准限制：这完全取决于服务。但是您对服务限制感到好奇是非常周到的。

也就是说，对于 Asana API 来说，每天 150k 的请求已经很多了。如果我们所有的 API 用户都为我们提供了这么多流量，那么我们每天服务的请求可能比 Google Web Search 还多，而且我们还没有那么大的可扩展性。:) 从技术上讲，有时，我们可能会处理来自单个用户的那个量的请求。

如果您必须轮询，请尝试每隔 15 分钟轮询一次。但请不要在这段时间内轮询您的整个工作区；这可能是太多的流量/数据。我们正在努力为您提供更好的解决方案。

如果您碰巧对 Asana API 发出了太多请求，您将返回 HTTP 状态代码 429 而不是您想要的响应；您可以在此处阅读更多相关信息（[https://asana.com/developers/documentation/getting-started/errors](https://asana.com/developers/documentation/getting-started/errors)）。

# php - CakePHP 模型 SQL 查询条件参数

> ID：12147239
> 
> 赞同：0
> 
> 时间：2012-08-27T18:12:22.037
> 
> 标签：php, mysql, database, cakephp, cakephp-2.0

我有一个像这样的长查询：

```
$a=$this->Signin->find('all',
    array(
        'fields'=> array(
            .....
        ),
        'conditions' => array('mytable.user_type ...),
        'order' => ....
        'limit' => ....
)); 
```

**user_type**列可以取 0 或 1 的值。我有一个函数参数`$type`，关于这个参数，我需要更改我的 SQL 查询。关于`$type`我将查询

*   "mytable.user_type"=1,
*   "mytable.user_type"=0,
*   “mytable.user_type”=1 或 “mytable.user_type=0

我不想写三遍相同的查询。我只想更改**条件**部分。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:18:41.583

您可以将**$type**定义为数组并管理 $type 中的值

喜欢多个值

```
$type = array(1,0);
'conditions' => array('mytable.user_type'=>$type) 
```

单值

```
$type = array(1);
'conditions' => array('mytable.user_type'=>$type) 
```

因此，您只需要根据条件操作 $type，希望这项工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:20:08.783

尝试这个：

```
$user_type = ($type == 'something') ? 1 : 0 ; 
```

然后，在您的条件下：

```
'conditions' => array('mytable.user_type' => $user_type); 
```

鉴于 user_type 只能取两个值，您的第三个查询 ( `"mytable.user_type"=1 OR "mytable.user_type=0`) 是不必要的

**编辑 ：**

```
if($type == 'conditions_where_usertype_is_necessary') $user_type = ($type == 'something') ? 1 : 0 ; 
```

然后，根据您的条件：

```
if( isset($user_type) ) {
    $options['conditions']['mytable.user_type'] = $user_type;
}
$options['conditions']['other_conditions'] = ...;
$this->Signin->find('all', $options); 
```

# java - 如何使用 Magento SOAP API2 检索可配置产品的关联产品？

> ID：12147243
> 
> 赞同：7
> 
> 时间：2012-08-27T18:12:42.443
> 
> 标签：java, magento, soap

我正在尝试使用 Magento SOAP API v2 获取可配置产品的所有相关产品。catalogProductLink 调用看起来很接近，但不处理可配置类型。我没有看到任何其他包含相关产品和产品可配置类型信息的调用。其他人是如何解决这个问题的？

我正在使用 Magento 1.6 版和带有 Java 的 SOAP API V2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T23:19:42.877

我深入研究了这个解决方案，并意识到您可能需要覆盖 API 模型 (Mage_Catalog_Model_Product_Api) 才能获得您正在寻找的结果。

在 items 函数中（大约第 90 行），您可以执行以下操作：

```
foreach ($collection as $product) {
    $childProductIds = Mage::getModel('catalog/product_type_configurable')->getChildrenIds($product->getId());
    $result[] = array(
        'product_id' => $product->getId(),
        'sku'        => $product->getSku(),
        'name'       => $product->getName(),
        'set'        => $product->getAttributeSetId(),
        'type'       => $product->getTypeId(),
        'category_ids' => $product->getCategoryIds(),
        'website_ids'  => $product->getWebsiteIds(),
        'children'  => $childProductIds[0],
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T14:28:08.603

*   创建文件夹 app/code/local/Mage/Catalog/Model/Product/Link
*   将 app/code/core/Mage/Catalog/Model/Product/Link/Api.php 复制到此文件夹并进行编辑。（我只对 V1 进行了更改，但我很确定它在 V2 中同样简单）
*   将 items() 函数的内容替换为以下内容

    ```
     if($type == "associated"){
        $product = $this->_initProduct($productId);
        try
        {
            $result = Mage::getModel('catalog/product_type_configurable')->getUsedProducts(null,$product);
        }
        catch (Exception $e)
        {
            $this->_fault('data_invalid', Mage::helper('catalog')->__('The product is not configurable.'));
        }

    }
    else
    {
        $typeId = $this->_getTypeId($type);

        $product = $this->_initProduct($productId, $identifierType);

        $link = $product->getLinkInstance()
            ->setLinkTypeId($typeId);

        $collection = $this->_initCollection($link, $product);

        $result = array();

        foreach ($collection as $linkedProduct) {
            $row = array(
                'product_id' => $linkedProduct->getId(),
                'type'       => $linkedProduct->getTypeId(),
                'set'        => $linkedProduct->getAttributeSetId(),
                'sku'        => $linkedProduct->getSku()
            );

            foreach ($link->getAttributes() as $attribute) {
                $row[$attribute['code']] = $linkedProduct->getData($attribute['code']);
            }

            $result[] = $row;
        }
    }
    return $result; 
    ```

*   那么您现在可以像这样调用 API：

    $client->call($sessionId, 'product_link.list', array('associated', $id_of_your_configurable_product));

基本上我的代码正在检查提供的类型，如果它是“关联的”，它会返回子产品。我很确定有更好的方法，但我认为 Product Link API 是最相关的地方。

享受！

（请注意：这段代码不是我的，我只是对其进行了改编，并认为这将是一个帮助你们的好主意）

# javascript - 单击链接时，Jquery UI Datepicker 不再显示

> ID：12147244
> 
> 赞同：0
> 
> 时间：2012-08-27T18:12:43.100
> 
> 标签：javascript, jquery, html, javascript-framework

我似乎有这个工作，除了一旦点击链接，日期选择器打开，然后我选择一个日期，一切都很好，然后一旦我尝试再次点击链接，日期选择器不会再次打开.

我究竟做错了什么？

```
<html>

<head>

<!-- LOAD JQUERY LIBRARY: -->  
    <link   href="jq/jquery-ui.css"         type="text/css" rel="stylesheet" />
    <script src="jq/jquery.min.js"          type="text/javascript"> </script>
    <script src="jq/jquery-ui.min.js"       type="text/javascript"> </script>

<script type="text/javascript">

function test() { 

var datePickerValue = null; 

$("#d1").datepicker().datepicker("show").change(function () 
{ 
    $('#d1').datepicker({onSelect:  datePickerValue = $(this).val() }).hide();

  alert("You picked: " + datePickerValue);
}); 

} 

</script>

</head>

<body>

<div id="d1"></div>
<a href="javascript:test()">test</a>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:23:53.570

只需在 datepicker() 之前添加 show 方法，如下所示：

```
$("#d1").show().unbind().datepicker().datepicker("show").change(function ()  { 
   $('#d1').datepicker({onSelect:  datePickerValue = $(this).val() }).hide();
   alert("You picked: " + datePickerValue);
}); 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:19:43.720

```
function test() {
    $('#d1').datepicker({onSelect: function(){alert("You picked: " + $(this).val())})} ); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:20:15.797

对不起，如果我在这里完全不合时宜，但是如果您使用 jquery .on - [http://api.jquery.com/on/ ，您可能会取得更大的成功](http://api.jquery.com/on/)

所以在你的链接中添加一个 id 或类：

```
<a class="clicky" href="#">test</a> 
```

然后像这样调用你的函数：

```
$("body").on("click", ".clicky", test); 
```

我认为这将解决您的问题，但我可能是错的

# php - PHP：挂载USB设备

> ID：12147245
> 
> 赞同：0
> 
> 时间：2012-08-27T18:12:47.093
> 
> 标签：php, bash, exec, shell-exec

我正在为 Cent OS 服务器的 GUI 编写 PHP 脚本。出于测试目的，我将 Apache 设置为 localhost。Cent OS 不会自动挂载连接的 USB 设备。在 PHP 中，我需要检查是否插入了 USB 设备，然后挂载它并为用户列出文件内容。这在 bash 中非常简单，但是我无法使其在 PHP 中工作。我玩弄了`exec()`和`shell_exec()`功能都无济于事。我已经手动尝试了这些命令，即：

```
shell_exec("sudo mount /dev/sdb1 /mnt"); 
```

并通过 bash 脚本：

```
exec("./mountlist.sh"); 
```

PHP中是否有一个我可以调用的函数来做同样的事情，或者我错过了`exec`and`shell_exec`函数的一些东西。这两个函数在 shell 中都能正常工作。由于 mount 是我包含`sudo`在 bash 脚本中的根命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:30:38.490

您不能在 PHP 脚本中使用 sudo - 无法输入 sudo 密码。

您可以创建一个 shell 脚本并使用 STICKY 位让它以 root 用户身份运行

[http://www.dba-oracle.com/linux/sticky_bit.htm](http://www.dba-oracle.com/linux/sticky_bit.htm)

这就是 passwd 命令可以写入 root 拥有的密码文件的方式，即使您以普通用户身份运行它也是如此。

另外 - 您可以授予 Web 用户安装/卸载文件系统的权限（将他添加到大多数系统上的 fuse 组），但是如果您的 Web 服务器被黑客入侵，这将更加开放且相当危险，所以我会使用 shell 脚本和粘性位为您的目的。

# javascript - 范围问题 - 这个函数是否形成了一个闭包 - JavaScript？

> ID：12147256
> 
> 赞同：1
> 
> 时间：2012-08-27T18:13:15.160
> 
> 标签：javascript, parameters, scope, closures, scoping

在我的整个脚本中，我都在调用函数`dynamo.toolbox.add_temp_button`。一个例子在这里：

```
if(page < total_pages){
    dynamo.toolbox.add_temp_button("Next Page",function(){
        dynamo.shop.enter.access(page+1,data.shop_zbid);
    });
} 
```

正如您在此调用中看到的那样，传递了两个参数，`page+1`并且`data.shop_zbid`. 现在这些值不是常量，并且由于脚本的整体功能而迅速变化。

现在这是函数本身：

```
add_temp_button : function(text,callback){
    var id = text.toLowerCase().replace(/[^A-Za-z_]/g,"_");
    callback = callback !== undefined && callback !== null ? callback : function(){};
    var but = '<button value="'+text+'" id="jqi_state0_button'+id+'" name="jqi_state0_button'+id+'" class="dynamo_temp_button">'+text+'</button>';
    $("#jqi_state0_buttonClose").before(but);
    $("#jqi_state0_button"+id).bind('click',callback);
}, 
```

请注意，这已从我的脚本中删除，但它由`dynamo.toolbox.add_temp_button`.

现在，我需要知道这是否形成了一个闭包，即我传递给`add_temp_button`函数的参数的值是否会一成不变？

我最担心的是第二个参数，`callback`. 这是一个作为回调函数传递给的函数`$.bind`。当绑定事件被触发时，它会使用 and 的当前值`page`，`callback`还是最初传递的值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:26:06.293

改变

```
if(page < total_pages){
    dynamo.toolbox.add_temp_button("Next Page",function(){
        dynamo.shop.enter.access(page+1,data.shop_zbid);
    });
} 
```

至

```
if(page < total_pages){
    dynamo.toolbox.add_temp_button("Next Page",(function(a,b){
        return function() { dynamo.shop.enter.access(a,b); }
    })(page+1,data.shop_zbid));
} 
```

你会得到你想要的 - 你需要为回调设置`page+1`和`data.shop_zbid`本地的值以获得所需的效果，否则可以在回调范围之外修改它们，然后再调用回调

# https - 安全传输密码信息

> ID：12147272
> 
> 赞同：0
> 
> 时间：2012-08-27T18:14:26.863
> 
> 标签：https, passwords, ldap

我是计算机科学系的一名学生网络开发人员，我被要求研究修改我们的 linux 帐户密码重置程序。目前，用户将使用他们的大学凭据（通过 Active Directory）登录，并且在通过身份验证后，他们会通过电子邮件获得一个临时密码，他们在登录后必须立即更改该密码。这样，如果它截获的临时密码存在甚至可以使用的时间跨度非常短。

现在的想法是，我们可能允许用户选择一个新的永久密码并直接通过 Web 实用程序设置，而不是使用临时密码。据我了解，https 更多的是“我们拥有的最好的”，而不是“保护信息的好方法”。我是否可以探索任何其他途径来保护新密码，以便我们可以放心地实施这样的系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:24:07.560

基本上，如果您通过[HTTPS](http://en.wikipedia.org/wiki/Https)与服务器通信并且服务器的私钥没有暴露给其他人，那么您可以确定您传输的任何内容（例如新密码）只能由服务器解密。此外，服务器证书确保您正在与之通信的服务器确实是您要与之通信的服务器。

因此，使用 HTTPS 提供身份验证并防止窃听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:34:34.910

如果您使用 Active Directory，据我了解，不支持密码修改扩展操作（需要现有密码）。因此，必须使用 LDAP 修改请求更改密码。一种解决方案是将[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)与 Web 应用程序一起使用，以使用新密码执行 LDAP 修改。修改请求应通过安全连接传输，或使用 StartTLS 扩展操作将非安全连接提升为安全连接。

### 也可以看看

*   [广告密码更改](http://www.dirmgr.com/blog/2010/8/26/ldap-password-changes-in-active-directory.html)
*   [使用 ldapmodify](https://ff1959.wordpress.com/2011/07/25/master-the-ldapmodify-command-line-tool/) - 本文是关于命令行实用程序`ldapmodify`的，但这些概念很有用。

# ruby-on-rails-3 - 使用 Backbone.js 历史导航更新 Rails 会话？

> ID：12147273
> 
> 赞同：1
> 
> 时间：2012-08-27T18:14:31.833
> 
> 标签：ruby-on-rails-3, backbone.js

我在 Rails 的用户会话中存储了一个市场，通过`session[:current_market]`在我的`application_controller.rb`.

我的前端界面使用 Backbone.js，我有一个小的市场选择器小部件，它调用

```
BackboneApp.data.currentMarket = market.toJSON()
Backbone.history.navigate market.homeUrl(), trigger: true 
```

...当用户选择市场时。这可行，但如果用户硬导航到另一个页面，市场将恢复为初始页面加载时设置的任何内容（最初`session[:current_market]`在 Rails 中加载的内容）。

当 Backbone.js 导航事件发生时，如何在会话中更新用户的市场？

我尝试通过触发静默 GET 手动执行此操作：

```
$.get '/api/v1/reset_current_market', { market_id: market.toJSON().id } 
```

...但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:29:31.223

我假设当用户切换市场时，将触发一些 ajax 请求以访问您的 rails api 并获取该市场的数据。您可以做的是使该路由的控制器操作将当前用户会话更新为请求的任何市场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:35:38.270

如何将此市场信息包装到新模型并用它处理更改？这只是一个伪代码示例。

```
var marketModel = Backbone.Model.extend({
        urlRoot:"/you/url/market",
        defaults:{
            marker: ""
        },
        initialize:function () {
        }
    });
BackboneApp.data.currentMarket = new marketModel(market.toJSON()) 
```

将选定的市场设置为这个新模型，然后调用 save()。在您的 /your/url/marget POST 方法中，rails 更改会话信息。如果这个对象有 id 属性，那么也可以使用 PUT 方法。

# symfony - 使用 FosUser 但*不是* SonataUser 的 Sonata Admin 配置

> ID：12147275
> 
> 赞同：3
> 
> 时间：2012-08-27T18:14:35.233
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

根据标题，我正在使用 Sonata Admin 和 FosUser。

Sonata Admin 对我的正常实体工作正常；我可以做通常的 CRUD 事情。

然后我按照文档中的[这个](http://sonata-project.org/bundles/admin/master/doc/reference/saving_hooks.html)示例连接到 FosUser

我的 services.yml 是这样的：

```
sonata.admin.user:
    class:  Company\MyBundle\Admin\UserAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Administration", label: "Users" }
    arguments:  [ null, Company\UserBundle\Entity\User, SonataAdminBundle:CRUD ]
    calls:
        -   [ setUserManager, [ @fos_user.user_manager ] ] 
```

...我已经创建了 UserAdmin.php：

```
namespace Company\MyBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;

use FOS\UserBundle\Model\UserManagerInterface;

class UserAdmin extends Admin
{ 
```

我在仪表板中获得了一个用户链接，但是当我关注 create new 或单击以编辑我的灯具用户时（顺便说一句，呈现的路线是[http://dev.url/app_dev.php/admin/company/user/user/create](http://dev.url/app_dev.php/admin/company/user/user/create)）我得到一个 500 服务器错误，说“类不存在”：

```
in /my/path/company/codebase/vendor/doctrine/common/lib/Doctrine/Common/Persistence/AbstractManagerRegistry.php at line 199   
        $class = $this->getAliasNamespace($namespaceAlias) . '\\' . $simpleClassName;
    }
    $proxyClass = new \ReflectionClass($class);
    if ($proxyClass->implementsInterface($this->proxyInterfaceName)) {
        $class = $proxyClass->getParentClass()->getName();
    } 
```

我已经修改了一些服务设置，我可以看到与示例不同的唯一内容是：

1.  我已将命名空间更改为指向我的管理类文件夹
2.  %fos.user.admin.user.entity% 未在任何地方配置，因此我将其硬编码为 Company\UserBundle\Entity\User

我确实开始考虑添加 SonataUser 捆绑包，但由于我仍在使用 Symfony2 找到自己的脚，我想我现在要保持简单，并了解这里出了什么问题。鉴于该示例没有将其作为依赖项提及，我假设我可以在没有它的情况下运行？

# html - 使用 CSS 定位 H1 和 H2

> ID：12147281
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:06.873
> 
> 标签：html, css, layout

我有一个 CSS 布局。我在#wrapper 中有div #header、#content 和#footer。问题是资源管理器在#content div 中显示h1 和h2 元素，而不是在这些元素实际所在的#header 中。在增加#content 的上边距的范围内，h1 和 h2 也会下降。为什么会发生？我希望这些元素保持水平对齐（一个在右侧，另一个在左侧），就像电子邮件和 Facebook 按钮位于页脚一样。

这是HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Felipe López</title>
<link href="styles.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=148925589393";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div id="wrapper">

    <div id="header">
        <h1 class="divisor_izquierda">Felipe López</h1>
        <h2 class="divisor_derecha">DISEÑO WEB</h2>
    </div>

    <div id="content">

        <h3>Hola!</h3>
        <p>Me llamo Felipe y tengo 21 años. Desde los 15 que aprendo Diseño Web como autodidacta y en la actualidad me encuentro cursando la carrera de <a href="#">Diseño de Multimedios</a>. Podés descargar <a href="#">mi Currículum.</a></p>
        <h3>Qué hago?</h3>
        <p>Los sitios web que diseño y programo tienen las siguientes caracteristicas:</p>
        <ul>
        <li>Sistema de autoadministración.</li>
        <li>Posicionamiento en motores de búsqueda.</li>
        <li>Suscripción y envío de newsletters.</li>
        <li>Indexación con redes sociales.</li>
        <li>Sistema de ecommerce.</li>
        </ul>
        <h3>Algunos trabajos</h3>
        <p><a href="#">www.nicolasgolub.com.ar</a><br />
        Diseño, Maquetacion HTML, Cabecera en Flash, Instalación de Wordpress y creación de Tema para Wordpress. Sitio administrado por el cliente.</p>
        <p><a href="#">www.davidaviles.com.ar</a><br />
        Instalación de Wordpress, instalación y modificación de Tema de Wordpress.</p>
        <p><a href="#">www.luzlo.com.ar</a><br />
        Instalación de Wordpress, instalación y modificación de Tema de Wordpress.</p>
        <p><a href="#">www.movpatriotico.com.ar </a><br />
        Maquetacion HTML y Cabecera en Flash.</p>
        <p><a href="#">www.fiestadelaluz.com.ar</a><br />
        Maquetacion HTML y Cabecera en Flash.</p>
        <h3>Contactame</h3>
        <p> Mandame un email a <a href="mailto:&quot;contacto@felipelopez.com.ar&quot;">contacto@felipelopez.com.ar</a> o un mensaje personal por <a href="https://www.facebook.com/unapersona">Facebook</a>.</p>
      </div> 

    <div id="footer">  

    <span class="divisor_izquierda"><div class="fb-like" data-href="http://www.felipelopez.com.ar" data-send="true" data-layout="button_count" data-width="450" data-show-faces="false" data-action="recommend" data-font="arial"></div></span>

    <span class="divisor_derecha"><a href="mailto:&quot;contacto@felipelopez.com.ar&quot;">contacto@felipelopez.com.ar</a></span>

    </div>

</div>

</body>
</html> 
```

和CSS：

```
* {
    padding: 0px;
    margin: 0px;
}

body {
    background-color: #EBEBEB;
    font-family: Calibri;
    font-size: 16px; 
}

ul {
    text-transform: none;
}

a {
    font-style: italic;
    color: #000;
    text-decoration: none;
}

/*h1 {
    font-size: 36px; 
    position: relative; 
}

h3 {
    margin-top: 20px; 
}

*/

p {
    margin-bottom: 8px;
}

#wrapper {
    width: 1014px;
    margin: 0 auto 0 auto;
    position: relative; 
}

#header {
    position: inherit;
    float: right;
}

#wrapper #header p  {
    color: #F90;
    font-family: Euphemia;
    text-align: center;
    font-weight: normal;
    float: left;
    font-size: 36px;
    clear: both;
    width: 50%;
}

#wrapper #header img {
    float: right;
    width: 30%;
}

#content {
    background-color:#FFF;
    padding: 42px;
    padding-bottom: 34px;
    position: relative; 
}

.divisor_izquierda {
    text-align: left;
    float: left;
    width: 50%;
}
.divisor_derecha {
    text-align: right; 
    float: left;
    width: 50%; 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:22:01.430

我建议您添加`overflow: hidden`到`#header`css 中，这会强制它展开以“环绕”其子元素，并且不需要额外的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:19:42.500

您已经浮动了标题，因此包装“标题”没有高度。在标题的末尾插入一个清除元素，您的问题应该消失了：

```
<div id="header">
        <h1 class="divisor_izquierda">Felipe López</h1>
        <h2 class="divisor_derecha">DISEÑO WEB</h2>
        <div style="clear: both;"></div>
</div> 
```

# sql-server-2008 - 事务复制订户恢复模式

> ID：12147283
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:09.243
> 
> 标签：sql-server-2008, transactional-replication

我从事数据库工作多年，但在复制方面的经验非常有限。

使用事务复制时，订阅者是否有任何理由需要处于完全恢复模式？我继承了几个正在复制的数据库，并且所有订阅者都设置为 Full 导致极大的 t-logs。我想将它们设置为简单，但我担心这样做可能会导致复制出现生产问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:17:13.303

与往常一样，在继续之前进行测试...

复制不需要完全恢复模式 - 日志读取器代理将解析事务日志并将任何标记为复制的事务复制到发布数据库。

请参阅[http://technet.microsoft.com/en-us/library/ms151706(SQL.105).aspx](http://technet.microsoft.com/en-us/library/ms151706(SQL.105).aspx)

# c++ - 如何在数组中移动？

> ID：12147284
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:09.663
> 
> 标签：c++, arrays, indexing, infinite-loop

我需要通过数组移动索引以按顺序放置随机数组。这是我的代码。

```
void insertNumber(int randomNum, int data[], int size)
{
    int i = 0;
    for(i = 0; randomNum > data[i] && i <= size - 2; i++)
    {

    }

    for ( i = 0; i < 10; i++)
            {
                data[i+1] = data [i];
            } 
    data[i] = randomNum;
} 
```

感谢您的时间。这是一个无限循环，我只是不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:26:48.350

```
for ( i = 0; i < 10; i++)
      {
          data[i+1] = data [i];
      } 
```

这看起来会覆盖从`data[0]`到`data[9]`with的所有内容`data[0]`。我不确定这是否是你想要完成的。

还，

```
data[i] = randomNum; 
```

`data[10]`无论顺序如何，都将分配 randomNum 。也许我们可以更清楚地说明您要做什么？

# javascript - JSON - 没有子对象

> ID：12147285
> 
> 赞同：1
> 
> 时间：2012-08-27T18:15:11.617
> 
> 标签：javascript, json, weather-api

我正在尝试检索一些特定的数据，使用 jQuery 来检索 JSON 提要。

这就是我目前正在做的事情：

```
var url  = 'https://api.wunderground.com/api/myapicode/conditions/forecast/q/Tokyo.json?callback=?';

$.getJSON(url, function(d){
    var data = d['current_observation'];
    console.dir(data['display_location']);
}); 
```

这成功返回到控制台：

```
city ==> "Tokyo"
country ==> "JP"
country_iso3166 ==> "JP"
elevation  ==> "8.00000000"
full ==> "Tokyo, Japan"
latitude ==> "35.54999924"
etc... 
```

但是，假设我只想获得“完整”名称。如果我尝试：

```
 console.dir(data['display_location']['full']); 
```

我最终得到结果：`There are no child objects`

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:16:51.773

`console.dir`显示您传递给它的对象的属性（子对象）。
用字符串调用它是没有意义的。

你应该打电话`console.log`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:17:41.837

您应该使用`console.log()`来获取值而不是对象的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:17:47.670

[`console.dir`](https://developer.mozilla.org/en-US/docs/DOM/console.dir)将显示对象树 - 您传入的*对象*的属性。然而，您记录的属性只是一个字符串，*没有子对象*。改为使用[`console.log`](https://developer.mozilla.org/en-US/docs/DOM/console.log)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T18:31:22.247

为了使用`console.dir(arg)`arg 应该是一个对象。您正在访问一个`full`对象的键，`console.dir(data['display_location']['full']);`其中是一个纯字符串。`console.log(data['display_location']['full'])`改为使用

# iis - 使用 IIS / ARR，我可以告诉站点使用特定的服务器场集群吗？

> ID：12147286
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:19.430
> 
> 标签：iis, iis-7.5

我目前有一个 IIS/ARR 服务器设置，其中定义了一个服务器场集群，其中包括 3 台服务器，并且我有一个使用该集群的站点。

我将使用第二个 IP 向服务器添加一个新站点以支持另一个 SSL 证书。

我在没有 SSL 的情况下设置了站点，并且平衡在新站点上运行良好。但是我担心当我在所有服务器上添加第二个 IP 时我会搞砸一些事情。

我想我需要为这个新站点添加一个具有 3 个新 IP 的新服务器场集群 - 我如何告诉 IIS/ARR 服务器第二个站点应该只使用新的服务器场集群 - 并且当前站点应该使用当前集群？

这是一个生产系统，所以我真的不想在我这样做的时候把所有东西都炸毁！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:33:16.023

在全局重写规则中，您可以设置重定向到其中一个场，您可以添加一个条件来检查 {INSTANCE_ID}。

实例 ID 将是请求进入的实例的 ID，而不是 Farm 的实例部分。![在此处输入图像描述](../Images/5530323953e8a5bfac4f1fa1abd12a43.png)

# html - 使用 Twitter Bootstrap 的两列内联表单

> ID：12147289
> 
> 赞同：2
> 
> 时间：2012-08-27T18:15:35.063
> 
> 标签：html, forms, twitter-bootstrap

我想使用 Twitter Bootstrap 制作预算模板。输出应该有一个行标签、两个内联输入、一个总计输出、两个内联输入和一个最终总计输出。这个想法是每一行都是一个类别，一对输入将是数量和比率，当它们相乘时，产生一个总数。它类似于以下内容：

```
Category_1     Input_1    Input_2   Total=Input_1*Input_2       Input_3    Input_4    Total=Input_3*Input_4 
```

我无法使用引导程序中描述的类系统将所有这些放在一行中。我可以在同一行上获得两个输入，但我不知道如何将它与中间的 non_input 跨度结合起来，然后是最后两个输入。我该怎么做？

**更新：**

我已经经历了几次迭代来尝试这个。这只是最近一次失败的尝试：

```
<div class="controls controls-row">
    <label class="control-label">Category 1</label>
    <input class="span1" type="text" placeholder="Input 1">
    <input class="span1" type="text" placeholder="Input 2">
    <label class="control-label">Total 1</label>
    <input class="span1" type="text" placeholder="Input 3">
    <input class="span1" type="text" placeholder="Input 4">
    <label class="control-label">Total 2</label>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:20:15.340

```
<form class="form-inline">
    <span>Category 1</span>
    <input type="text" class="input-small" placeholder="Input 1">
    <input type="text" class="input-small" placeholder="Input 2">
    <span>Total 1</span>
    <input type="text" class="input-small" placeholder="Input 3">
    <input type="text" class="input-small" placeholder="Input 4">
    <span>Total 2</span>
</form>​ 
```

这是[小提琴](http://jsfiddle.net/n8SMt/)。现在你只需要调整间距。

还要注意你使用的 HTML 元素，标签[应该](https://developer.mozilla.org/en-US/docs/HTML/Element/label)与一个控件相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T22:54:32.813

我想使用标签，所以我有这个`for`属性。请注意，我不在标签上使用 control-label 类，否则事情会变得一团糟。我发现当您有一个狭窄的窗口或移动设备时，这会表现得更好，因为标签和输入保持在一起并且两列首先换行。

```
<div class="form-inline">
     <span style="margin-right:8px">
       <label for="IsPublic">Is Public:</label>
       <input id="IsPublic" .../>
     </span>
     <span>
       <label for="IsPrivate">Is Private:</label>
       <input id="IsPrivate" .../>
     </span>
</div> 
```

# iphone - iPad App - 以编程方式更改语言

> ID：12147291
> 
> 赞同：3
> 
> 时间：2012-08-27T18:15:39.040
> 
> 标签：iphone, objective-c, ios, ipad, localization

我有一个需要 2 种语言的应用程序，英语和法语。

我已经在各自的“en.lproj”和“fr.lproj”文件夹中设置了 Localizable.strings 文件......当我更改 iPad 的语言（在本机设置应用程序中），然后启动我的应用程序时，它确实实际上加载正确的文本（即英文副本或法文副本）。

我需要在两种语言之间进行 UISegmentedControl 切换，而无需重新启动应用程序。

**如何让应用程序更改（当前）语言，以便当我调用（重新）设置所有 UILabel 的文本和 UIImageViews 的图像的方法时，它们从相反的 .lproj 文件夹的 Localizable.strings 文件中读取？！？**

我知道如何使用 UISegmentedControl，这不是我的问题。我正在寻找更多设置应用程序的捆绑语言或区域设置或其他东西的代码行（因为我对国际化.本地化很陌生）。

-

我如何为 UIImageView 设置图像的示例：

```
myUIImageView1.image = [UIImage imageNamed:NSLocalizedString(@"myUIImageView1", @"comment for the translator")]; 
```

我如何设置 UILabel 文本的示例：

```
myLabel1.text = NSLocalizedString(@"myLabel1", @"comment for the translator"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T21:01:28.683

**找到解决方案！！！**

以下测试应用程序具有从正确的“Localizable.strings”文件（基于选择的语言）读取所需字符串的功能： [https ://github.com/object2dot0/Advance-Localization-in-ios-apps](https://github.com/object2dot0/Advance-Localization-in-ios-apps)

-

我使用了这段代码，以及设置应用程序主要语言所需的代码（在 Brayden 发布的上述答案中找到：[如何强制 NSLocalizedString 使用特定语言](https://stackoverflow.com/questions/1669645/how-to-force-nslocalizedstring-to-use-a-specific-language)），并将它们放在一起。

这是我的代码现在的样子（*注意 - 我的 UISegmentedControl 在其视图的 viewController 中调用一个函数 [当触发 UISegmentedControl 的“值更改”方法时]，然后在父 viewController 中调用 toggleLanguage 函数*）：

```
 -(void)toggleLanguage:(NSString *)primaryLanguage secondaryLanguage:(NSString *)secondaryLanguage
    {
        //set app's primary language
        defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:[NSArray arrayWithObjects:primaryLanguage,secondaryLanguage,nil] forKey:@"AppleLanguages"];
        [defaults synchronize];

        //update UILabel and UIImageViews
        [self setLanguageSpecificItems];
    }
    -(NSString *)languageSelectedStringForKey:(NSString *)key
    {
        //read primary language
        NSArray *appleLanguagesArray = [defaults objectForKey:@"AppleLanguages"];
        NSString *currentLanguage = [appleLanguagesArray objectAtIndex:0];

        //get the path to the desired lproj file
        NSString *path;
        if(currentLanguage==@"en")
        {
            path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
        }
        else
        if(currentLanguage==@"fr")
        {
            path = [[NSBundle mainBundle] pathForResource:@"fr" ofType:@"lproj"];
        }
        NSBundle* languageBundle = [NSBundle bundleWithPath:path];

        //find and return the desired string
        NSString* str=[languageBundle localizedStringForKey:key value:@"" table:nil];
        return str;
    }
    -(void)setLanguageSpecificItems
    {
        myUIImageView1.image = [UIImage imageNamed:[self languageSelectedStringForKey:@"myUIImageView1"]];
        myLabel1.text = [self languageSelectedStringForKey:@"myLabel1"];
    } 
```

-

**谢谢大家的帮助！！！**

——克里斯·阿林森

# http - 浏览器是否/可以在 http 请求中使用差异？

> ID：12147292
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:39.107
> 
> 标签：http, browser, diff

我知道浏览器已经使用缓存和 gzipping 来减轻负担，但为什么不区分呢？

假设我有一个 30k+ 行的 javascript 文件，我在其中更改了一个字符。即使是 gzip 压缩，浏览器也将不得不再次下载整个内容.. 在这里使用 diffing 不是更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:19:27.153

好吧，这对您的 senario 来说可能是一个好主意，但 HTTP 并不是为此而设计的。HTTP 设计用于通过 Internet 提供文档。

HTTP 可以选择在这里说是您的内容，如果您愿意，只需稍有不同即可下载文档，但您不需要。这是带有弱选项 ( )的[电子标签的工作。](http://en.wikipedia.org/wiki/HTTP_ETag)`W/...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:18:54.807

这会很好，但从根本上来说是困难的/不可能的。

diff 假定您在两面都使用相同（或几乎相同）的原始副本。您将如何检查浏览器中的缓存副本是否足够相似以至于差异可以干净地应用？

# php - CodeIgniter 验证下拉菜单

> ID：12147293
> 
> 赞同：1
> 
> 时间：2012-08-27T18:15:41.943
> 
> 标签：php, codeigniter

如果选项等于“选择”，我将如何在 CodeIgniter 中编写代码抛出一个错误，说明需要选择一个选项？

```
<option>Select</option>
<option>Option 1</option>
<option>Option 2</option>
<option>Option 3</option>
<option>Option 4</option> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:18:34.817

```
<select id='my_options'>
<option value=0>Select</option>
<option value=1>Option 1</option>
<option value=2>Option 2</option>
<option value=3>Option 3</option>
<option value=4>Option 4</option>
</select> 
```

在您的控制器中，您可以执行以下操作：

```
$this->form_validation->set_rules('my_options','Select Options','required|greater_than[0]'); 
```

显然，这假设您正在使用 form_validation 类，并且您的表单被定向到一个控制器，您将在其中编写上面的代码行..会这样做吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:28:16.883

据我所知，处理这种情况的唯一方法是创建自定义函数。使用它并不难，例如：

首先，为 form_validation 库创建规则：

`$this->form_validation->
set_rules('my_dropdown', 'Dropdown', 'callback_my_func');`
`my_func`返回 true 或 false（以及错误消息）的验证函数 在哪里。

这是一个例子`my_func`：

**注意**：您必须指定每个选项的值，以便您可以使用它们。
在我的示例中，您将“选择”选项设置为 0。通过执行以下操作：

`<option value="0">Select</option>`

...这是功能：

```
 function my_func($dropdown_selection){
//If the selection equals "Select" that means it equals 0(which is the "hidden" value of it)
    if($dropdown_selection === 0) {
    //Set the message here.
    $this->form_validation->set_message('my_func', 'You must specifiy a value for your dropdown');
    //Return false, so the library knows that something  is wrong.
    return FALSE;
    }
    //If  everything is OK, return TRUE, to tell the library that we're good.
    return TRUE:

    } 
```

此代码应该可以工作，但未经测试。您始终可以发挥创意并添加更多代码并将其定制到您的特定网络应用程序。**[有关更多信息，请在此处](http://codeigniter.com/user_guide/libraries/form_validation.html)**查看有关 form_validation 库的 CI 文档。

# java - 错误：严重：无法创建代理

> ID：12147294
> 
> 赞同：1
> 
> 时间：2012-08-27T18:15:43.190
> 
> 标签：java, agents-jade

我无法运行代理 BookBuyerAgent。

项目路径为**D:\studia\magisterka\sem10\jade\JADE-all-4.1.1(1)\JADE-all-4.1\jade\src\examples\bookTrading\src**。起初我做**javac BookBuyerAgent.java**和这个确定。其次我做**java jam.Boot agent1:examples\bookTrading\src\BookBuyerAgent** ，我得到错误：

```
D:\studia\magisterka\sem10\jade\JADE-all-4.1.1(1)\JADE-all-4.1\jade\src\examples
\bookTrading\src>java jade.Boot tu:examples\bookTrading\src\BookSellerGui
sie 27, 2012 8:13:27 PM jade.core.Runtime beginContainer
INFO: ----------------------------------
This is JADE snapshot - revision $WCREV$ of $WCDATE$
downloaded in Open Source, under LGPL restrictions,
at http://jade.tilab.com/
----------------------------------------
sie 27, 2012 8:13:28 PM jade.core.BaseService init
INFO: Service jade.core.management.AgentManagement initialized
sie 27, 2012 8:13:28 PM jade.core.BaseService init
INFO: Service jade.core.messaging.Messaging initialized
sie 27, 2012 8:13:28 PM jade.core.BaseService init
INFO: Service jade.core.mobility.AgentMobility initialized
sie 27, 2012 8:13:28 PM jade.core.BaseService init
INFO: Service jade.core.event.Notification initialized
sie 27, 2012 8:13:28 PM jade.core.messaging.MessagingService clearCachedSlice
INFO: Clearing cache
sie 27, 2012 8:13:28 PM jade.mtp.http.HTTPServer <init>
INFO: HTTP-MTP Using XML parser com.sun.org.apache.xerces.internal.jaxp.SAXParse
rImpl$JAXPSAXParser
sie 27, 2012 8:13:28 PM jade.core.messaging.MessagingService boot
INFO: MTP addresses:
http://10.1.242.245:7778/acc
sie 27, 2012 8:13:28 PM jade.core.AgentContainerImpl startBootstrapAgents
SEVERE: Cannot create agent tu: Class examples\bookTrading\src\BookSellerGui for
agent ( agent-identifier :name tu@mariusz:1099/JADE ) not found [nested java.la
ng.ClassNotFoundException: examples\bookTrading\src\BookSellerGui]
sie 27, 2012 8:13:28 PM jade.core.AgentContainerImpl joinPlatform
INFO: --------------------------------------
Agent container Main-Container@mariusz is ready.
-------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:18:52.893

bookTrading\src 文件夹可能是一个源文件夹（包含 .java 文件）。您应该将您的类路径设置为 bookTrading\bin 文件夹，并将类名指定给 Jade 命令行。

# tcl - 如何从我的文件管理器对文件运行 TCL 脚本？

> ID：12147296
> 
> 赞同：1
> 
> 时间：2012-08-27T18:15:48.547
> 
> 标签：tcl, desktop-integration

我正在编写一个简单的 TCL 脚本，它会出现一些 Tk 对话框，然后压缩 argv 给出的文件。通过运行“./script 文件”，它可以在终端上正常工作，但由于它是命令行实用程序的图形包装器，我希望它从文件管理器的右键菜单中运行。

我将它复制到 /usr/bin 并在随机文件（路径中没有空格）上使用 Caja 的“使用其他应用程序打开...”选项，并输入我的脚本名称作为要使用的应用程序。当我尝试以这种方式打开文件时，没有对话框也没有存档。

但是，当我再次尝试从终端运行脚本时，没有“./”，它仍然有效。

需要做什么才能从右键菜单对文件运行 TCL 脚本并且仍然独立于平台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:32:10.913

也许您可以从确定 Tcl 或文件管理器是否是问题开始。写一个shell脚本...

```
#!/bin/sh

exec rm -- "$@" 
```

...使其可执行`chmod +x`并尝试将其用作您不关心的文件的“其他应用程序”。如果文件没有被删除，Tcl 不应该受到责备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:00:03.840

我已经修复了有问题的脚本。我不知道为什么对话框中断或为什么它们现在正在工作，但存档显然没有出现，因为文件管理器自动将脚本的工作目录设置为我的主文件夹。

下面的代码是我用来将脚本定向到正确文件夹的代码。它将工作目录更改为包含正在运行脚本的文件的目录。

```
cd [file dirname $argv] 
```

一旦我设置好了，我的大部分问题似乎都得到了解决，我现在可以继续开发我的脚本了。

# java - 如何在没有 equals 方法的情况下断言两个类的相等性？

> ID：12147297
> 
> 赞同：146
> 
> 时间：2012-08-27T18:15:50.977
> 
> 标签：java, unit-testing, junit

假设我有一个没有 equals() 方法的类，它没有源。我想在该类的两个实例上断言相等。

我可以做多个断言：

```
assertEquals(obj1.getFieldA(), obj2.getFieldA());
assertEquals(obj1.getFieldB(), obj2.getFieldB());
assertEquals(obj1.getFieldC(), obj2.getFieldC());
... 
```

我不喜欢这种解决方案，因为如果早期断言失败，我将无法获得完整的平等图景。

我可以自己手动比较并跟踪结果：

```
String errorStr = "";
if(!obj1.getFieldA().equals(obj2.getFieldA())) {
    errorStr += "expected: " + obj1.getFieldA() + ", actual: " + obj2.getFieldA() + "\n";
}
if(!obj1.getFieldB().equals(obj2.getFieldB())) {
    errorStr += "expected: " + obj1.getFieldB() + ", actual: " + obj2.getFieldB() + "\n";
}
...
assertEquals("", errorStr); 
```

这给了我完整的平等画面，但很笨拙（我什至没有考虑可能的空问题）。第三种选择是使用 Comparator，但 compareTo() 不会告诉我哪些字段不相等。

有没有更好的做法来从对象中获取我想要的东西，而不需要子类化和覆盖等于（呃）？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2017-06-27T13:41:42.490

这里有很多正确的答案，但我也想添加我的版本。这是基于 Assertj 的。

```
import static org.assertj.core.api.Assertions.assertThat;

public class TestClass {

    public void test() {
        // do the actual test
        assertThat(actualObject)
            .isEqualToComparingFieldByFieldRecursively(expectedObject);
    }
} 
```

更新：在 assertj v3.13.2 中，此方法已弃用，正如 Woodz 在评论中指出的那样。目前的建议是

```
public class TestClass {

    public void test() {
        // do the actual test
        assertThat(actualObject)
            .usingRecursiveComparison()
            .isEqualTo(expectedObject);
    }

} 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2015-04-22T09:37:39.523

**[Mockito](https://github.com/mockito/mockito "莫基托")提供了一个反射匹配器：**

对于最新版本的 Mockito，请使用：

```
Assert.assertTrue(new ReflectionEquals(expected, excludeFields).matches(actual)); 
```

对于旧版本，请使用：

```
Assert.assertThat(actual, new ReflectionEquals(expected, excludeFields)); 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-03-03T23:25:42.350

我通常使用 org.apache.commons.lang3.builder.EqualsBuilder 来实现这个用例

```
Assert.assertTrue(EqualsBuilder.reflectionEquals(expected,actual)); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-12-17T17:06:44.173

我知道它有点旧，但我希望它有所帮助。

我遇到了和你一样的问题，所以，经过调查，我发现很少有与这个问题相似的问题，并且在找到解决方案后，我在这些问题中回答相同，因为我认为它可以帮助别人。

[这个类似问题](https://stackoverflow.com/q/1449001/1776630)[的投票最多的答案](https://stackoverflow.com/a/1449051/1776630)（不是作者选择的答案）是最适合您的解决方案。

基本上，它包括使用名为[Unitils](http://www.unitils.org/summary.html)的库。

这是用途：

```
User user1 = new User(1, "John", "Doe");
User user2 = new User(1, "John", "Doe");
assertReflectionEquals(user1, user2); 
```

即使类`User`没有实现，它也会通过`equals()`。`assertLenientEquals`您可以在他们的[教程](http://www.unitils.org/tutorial-reflectionassert.html)中看到更多示例和一个非常酷的断言。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-03-01T03:52:09.400

如果您将 hamcrest 用于您的断言 (assertThat) 并且不想引入额外的测试库，那么您可以使用`SamePropertyValuesAs.samePropertyValuesAs`断言没有覆盖的 equals 方法的项目。

好处是你不必再引入另一个测试框架，当断言失败时它会给出一个有用的错误 ( `expected: field=<value> but was field=<something else>`) 而不是`expected: true but was false`如果你使用类似`EqualsBuilder.reflectionEquals()`.

缺点是它是一个浅比较并且没有排除字段的选项（就像在 EqualsBuilder 中一样），因此您必须解决嵌套对象（例如删除它们并独立比较它们）。

**最佳案例：**

```
import static org.hamcrest.beans.SamePropertyValuesAs.samePropertyValuesAs;
...
assertThat(actual, is(samePropertyValuesAs(expected))); 
```

**丑陋的案例：**

```
import static org.hamcrest.beans.SamePropertyValuesAs.samePropertyValuesAs;
...
SomeClass expected = buildExpected(); 
SomeClass actual = sut.doSomething();

assertThat(actual.getSubObject(), is(samePropertyValuesAs(expected.getSubObject())));    
expected.setSubObject(null);
actual.setSubObject(null);

assertThat(actual, is(samePropertyValuesAs(expected))); 
```

所以，选择你的毒药。附加框架（例如 Unitils）、无用的错误（例如 EqualsBuilder）或浅比较（hamcrest）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-08-28T07:33:43.317

您可以使用[Apache commons lang ReflectionToStringBuilder](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html)

您可以一一指定要测试的属性，或者更好地排除您不想要的属性：

```
String s = new ReflectionToStringBuilder(o, ToStringStyle.SHORT_PREFIX_STYLE)
                .setExcludeFieldNames(new String[] { "foo", "bar" }).toString() 
```

然后，您可以正常比较这两个字符串。关于反射缓慢的观点，我认为这只是为了测试，所以不应该那么重要。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-01-29T03:51:15.463

由于这个问题很老，我将建议使用 JUnit 5 的另一种现代方法。

> 我不喜欢这种解决方案，因为如果早期断言失败，我将无法获得完整的平等图景。

在 JUnit 5 中，有一个名为的方法`Assertions.assertAll()`允许您将测试中的所有断言组合在一起，它将执行每个断言并在最后输出任何失败的断言。这意味着任何首先失败的断言都不会停止后面断言的执行。

```
assertAll("Test obj1 with obj2 equality",
    () -> assertEquals(obj1.getFieldA(), obj2.getFieldA()),
    () -> assertEquals(obj1.getFieldB(), obj2.getFieldB()),
    () -> assertEquals(obj1.getFieldC(), obj2.getFieldC())); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-07T10:48:15.127

[Hamcrest 1.3 Utility Matchers](https://github.com/NitorCreations/matchers)库有一个特殊的匹配器，它使用反射而不是等于。

```
assertThat(obj1, reflectEquals(obj2)); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-26T21:31:13.013

一些反射比较方法很浅

另一种选择是将对象转换为 json 并比较字符串。

```
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;    
public static String getJsonString(Object obj) {
 try {
    ObjectMapper objectMapper = new ObjectMapper();
    return bjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(obj);
     } catch (JsonProcessingException e) {
        LOGGER.error("Error parsing log entry", e);
        return null;
    }
}
...
assertEquals(getJsonString(MyexpectedObject), getJsonString(MyActualObject)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-09-12T17:36:10.630

使用[Shazamcrest](https://github.com/shazam/shazamcrest)，您可以：

```
assertThat(obj1, sameBeanAs(obj2)); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-27T18:23:11.567

逐个字段比较：

```
assertNotNull("Object 1 is null", obj1);
assertNotNull("Object 2 is null", obj2);
assertEquals("Field A differs", obj1.getFieldA(), obj2.getFieldA());
assertEquals("Field B differs", obj1.getFieldB(), obj2.getFieldB());
...
assertEquals("Objects are not equal.", obj1, obj2); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-27T18:50:17.383

您可以使用反射来“自动化”完整的相等测试。您可以实现为单个字段编写的相等“跟踪”代码，然后使用反射在对象中的所有字段上运行该测试。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-12-09T07:42:00.863

AssertJ 断言可用于在没有`#equals`正确覆盖方法的情况下比较值，例如：

```
import static org.assertj.core.api.Assertions.assertThat; 

// ...

assertThat(actual)
    .usingRecursiveComparison()
    .isEqualTo(expected); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-07T09:29:13.120

在对 Android 应用程序进行单元测试时，我遇到了完全相同的难题，而我想出的最简单的解决方案就是使用[Gson](https://github.com/google/gson)将我的实际值和期望值对象转换`json`为字符串并将它们作为字符串进行比较。

```
String actual = new Gson().toJson( myObj.getValues() );
String expected = new Gson().toJson( new MyValues(true,1) );

assertEquals(expected, actual); 
```

与逐个字段手动比较相比，此方法的优点是您可以比较**所有**字段，因此即使您稍后在类中添加一个新字段，它也会自动测试，而不是使用`assertEquals()`一堆所有字段，如果您向班级添加更多字段，则需要更新这些字段。

jUnit 还为您显示字符串，以便您可以直接查看它们的不同之处。不确定字段排序的可靠性如何`Gson`，这可能是一个潜在的问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-20T13:44:51.003

对于*单元测试*，我只是将对象序列化为 JSON 字符串并进行比较。以 Gson 为例：

```
import com.google.gson.GsonBuilder
import junit.framework.TestCase.assertEquals

class AssertEqualContent {
    companion object {
        val gson = GsonBuilder().create()

        fun assertEqualContent(message: String?, expected: Any?, actual: Any?) {
            assertEquals(message, gson.toJson(expected), gson.toJson(actual))
        }
    }
} 
```

由于预期的和实际的对象应该是相同的类型，因此字段顺序将是相同的。

优点：

*   你会得到一个很好的字符串比较，准确地指出差异在哪里。
*   没有额外的库（前提是你已经有一个 JSON 库）

缺点：

*   不同类型的对象*可能会*产生相同的 JSON（但如果有，您可能会考虑为什么对相同的数据有不同的类......以及它们最终如何在测试方法中进行比较 :-)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-01T19:19:02.333

这是一个通用的比较方法，它比较同一类的两个对象的字段值（记住那些可以通过 get 方法访问）

```
public static <T> void compare(T a, T b) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
    AssertionError error = null;
    Class A = a.getClass();
    Class B = a.getClass();
    for (Method mA : A.getDeclaredMethods()) {
        if (mA.getName().startsWith("get")) {
            Method mB = B.getMethod(mA.getName(),null );
            try {
                Assert.assertEquals("Not Matched = ",mA.invoke(a),mB.invoke(b));
            }catch (AssertionError e){
                if(error==null){
                    error = new AssertionError(e);
                }
                else {
                    error.addSuppressed(e);
                }
            }
        }
    }
    if(error!=null){
        throw error ;
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-19T16:45:01.500

我偶然发现了一个非常相似的案例。

我想在测试中比较一个对象与另一个对象具有相同的属性值，但是由于我的对象在其属性中具有空值等原因，诸如`is()`,`refEq()`等方法将不起作用。`id`

所以这是我找到的解决方案（好吧，一位同事找到了）：

```
import static org.apache.commons.lang.builder.CompareToBuilder.reflectionCompare;

assertThat(reflectionCompare(expectedObject, actualObject, new String[]{"fields","to","be","excluded"}), is(0)); 
```

如果从中获得的`reflectionCompare`值为0，则表示它们相等。如果是 -1 或 1，则它们在某些属性上有所不同。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-02T21:39:09.023

在 AssertJ 的常见情况下，您可以创建自定义比较器策略：

```
assertThat(frodo).usingComparator(raceComparator).isEqualTo(sam)
assertThat(fellowshipOfTheRing).usingElementComparator(raceComparator).contains(sauron); 
```

[在断言中使用自定义比较策略](http://joel-costigliola.github.io/assertj/assertj-core-features-highlight.html#custom-comparison-strategy)

[AssertJ 示例](https://github.com/joel-costigliola/assertj-examples/blob/master/assertions-examples/src/test/java/org/assertj/examples/AssertionsWithCustomComparatorExamples.java)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-02-01T16:58:17.310

我尝试了所有答案，但没有什么对我真正有用。

所以我创建了自己的方法来比较简单的 java 对象而不深入嵌套结构......

如果所有字段都匹配或包含不匹配详细信息的字符串，则方法返回 null。

仅比较具有 getter 方法的属性。

**如何使用**

```
 assertNull(TestUtils.diff(obj1,obj2,ignore_field1, ignore_field2)); 
```

**不匹配时的示例输出**

输出显示比较对象的属性名称和各自的值

```
alert_id(1:2), city(Moscow:London) 
```

**代码（Java 8 及以上）：**

```
 public static String diff(Object x1, Object x2, String ... ignored) throws Exception{
        final StringBuilder response = new StringBuilder();
        for (Method m:Arrays.stream(x1.getClass().getMethods()).filter(m->m.getName().startsWith("get")
        && m.getParameterCount()==0).collect(toList())){

            final String field = m.getName().substring(3).toLowerCase();
            if (Arrays.stream(ignored).map(x->x.toLowerCase()).noneMatch(ignoredField->ignoredField.equals(field))){
                Object v1 = m.invoke(x1);
                Object v2 = m.invoke(x2);
                if ( (v1!=null && !v1.equals(v2)) || (v2!=null && !v2.equals(v1))){
                    response.append(field).append("(").append(v1).append(":").append(v2).append(")").append(", ");
                }
            }
        }
        return response.length()==0?null:response.substring(0,response.length()-2);
    } 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2012-08-27T18:33:24.140

您可以将发布的比较代码放入一些静态实用程序方法中吗？

```
public static String findDifference(Type obj1, Type obj2) {
    String difference = "";
    if (obj1.getFieldA() == null && obj2.getFieldA() != null
            || !obj1.getFieldA().equals(obj2.getFieldA())) {
        difference += "Difference at field A:" + "obj1 - "
                + obj1.getFieldA() + ", obj2 - " + obj2.getFieldA();
    }
    if (obj1.getFieldB() == null && obj2.getFieldB() != null
            || !obj1.getFieldB().equals(obj2.getFieldB())) {
        difference += "Difference at field B:" + "obj1 - "
                + obj1.getFieldB() + ", obj2 - " + obj2.getFieldB();
        // (...)
    }
    return difference;
} 
```

你可以像这样在 JUnit 中使用这个方法：

assertEquals("对象不相等", "", findDifferences(obj1, obj));

这并不笨拙，并且可以为您提供有关差异的完整信息（如果存在差异）（通过不完全采用 assertEqual 的正常形式，但您可以获得所有信息，所以它应该是好的）。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-04-01T09:02:59.157

作为 junit-only 的替代方案，您可以在 equals 断言之前将字段设置为 null：

```
 actual.setCreatedDate(null); // excludes date assertion
    expected.setCreatedDate(null);

    assertEquals(expected, actual); 
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2012-08-27T19:28:33.913

从您的评论到其他答案，我不明白您想要什么。

只是为了讨论，假设该类确实覆盖了 equals 方法。

所以你的 UT 看起来像：

```
SomeType expected = // bla
SomeType actual = // bli

Assert.assertEquals(expected, actual). 
```

你完成了。此外，如果断言失败，您将无法获得“完全平等的画面”。

据我了解，您是说即使类型确实覆盖了equals，您也不会对此感兴趣，因为您想获得“完全相等的图片”。因此，扩展和覆盖 equals 也没有任何意义。

所以你必须选择：要么逐个比较属性，使用反射或硬编码检查，我建议后者。或者：比较这些对象的人类可读*表示*。

例如，您可以创建一个帮助类，将您希望与 XML 文档比较的类型序列化，然后比较生成的 XML！在这种情况下，您可以直观地看到什么是完全相等的，什么不是。

这种方法将使您有机会查看全貌，但它也相对繁琐（起初容易出错）。

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2012-08-27T18:20:00.173

您可以覆盖类的 equals 方法，例如：

```
@Override
public int hashCode() {
    int hash = 0;
    hash += (app != null ? app.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    HubRule other = (HubRule) object;

    if (this.app.equals(other.app)) {
        boolean operatorHubList = false;

        if (other.operator != null ? this.operator != null ? this.operator
                .equals(other.operator) : false : true) {
            operatorHubList = true;
        }

        if (operatorHubList) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

好吧，如果你想比较一个类中的两个对象，你必须以某种方式实现 equals 和 hash code 方法

# javascript - 让 ASP.NET 中继器设置一个动态名称

> ID：12147299
> 
> 赞同：0
> 
> 时间：2012-08-27T18:15:53.970
> 
> 标签：javascript, asp.net

我使用 javascript 来启用禁用文本框并根据选中的单选按钮计算价格。

我遇到的问题是我使用单选按钮的组名来找到正确的文本框，并在计算中使用它的值。当转发器从我的 itemtemplate 创建代码时，它不使用提供的参数来创建名称。

我在项目标签中的名字是：name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain") %>' 它创建的名称是 name="Repeater1$ctl02$textbox" 以及我提供的名称标签. 对于单选按钮，它们的名称变为 Repeater1$ctl01$sverigemotrasism 不仅仅是 sverigemotrasism **有没有办法阻止它创建名称......或者我该如何规避它？**

这是我的项目模板

```
 <ItemTemplate>
    <asp:RadioButton id="RadioButton1" runat="server" GroupName='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value="50" Text="Fri tillgång" onclick="calculatePrice();disableTB(this.name);"  />
    <br />
    <asp:RadioButton id="RadioButton2" runat="server" GroupName='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' 
        Text="En artikel om dagen(30/mån)" value="25" onclick="calculatePrice();disableTB(this.name);" />
         <br />
    <asp:RadioButton id="RadioButton3" runat="server" GroupName='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>'  value="0"
        Text="Skriv antalet artiklar" onclick="enableTB(this.name, this.checked)" />
         <br />
    <asp:TextBox ID="textbox" runat="server"  name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain") %>' Enabled="false" Width="106px" 
        onkeyup="calculatePrice()" style="background-color:#eeeeee" ></asp:TextBox>
    </ItemTemplate> 
```

我的javascript做到了！找出单击了哪个文本框。

```
function enableTB(tbname, checked) 
{
var textboxen = tbname;
document.getElementById(textboxen).disabled = !checked;
document.getElementById(textboxen).style.background = '#C4F8CC';
}

function disableTB(tbname)
{
var textboxen = tbname + 1;
document.getElementById(textboxen).disabled = true;
document.getElementById(textboxen).style.background = '#eeeeee';
} 
```

不幸的是，这就是我的源代码在转发器创建完所有内容后的样子……转发器数据！

```
 <table>  

     <input id="Repeater1_RadioButton1_0" type="radio" name="Repeater1$ctl01$sverigemotrasism" value="50" onclick="calculatePrice();disableTB(this.name);" /><label for="Repeater1_RadioButton1_0">Fri tillgång</label>
     <br />
    <input id="Repeater1_RadioButton2_0" type="radio" name="Repeater1$ctl01$sverigemotrasism" value="25" onclick="calculatePrice();disableTB(this.name);" /><label for="Repeater1_RadioButton2_0">En artikel om dagen(30/mån)</label>
         <br />
    <input id="Repeater1_RadioButton3_0" type="radio" name="Repeater1$ctl01$sverigemotrasism" value="0" onclick="enableTB(this.name, this.checked);" /><label for="Repeater1_RadioButton3_0">Skriv antalet artiklar</label>
         <br />
    <input name="Repeater1$ctl01$textbox" type="text" id="Repeater1_textbox_0" disabled="disabled" class="aspNetDisabled" onkeyup="calculatePrice()" name="sverigemotrasism" style="width:106px;background-color:#eeeeee" />

    <tr>
    <td>

    </td>
    </tr>

     <input id="Repeater1_RadioButton1_1" type="radio" name="Repeater1$ctl02$handlaihop" value="50" onclick="calculatePrice();disableTB(this.name);" /><label for="Repeater1_RadioButton1_1">Fri tillgång</label>
     <br />
    <input id="Repeater1_RadioButton2_1" type="radio" name="Repeater1$ctl02$handlaihop" value="25" onclick="calculatePrice();disableTB(this.name);" /><label for="Repeater1_RadioButton2_1">En artikel om dagen(30/mån)</label>
         <br />
    <input id="Repeater1_RadioButton3_1" type="radio" name="Repeater1$ctl02$handlaihop" value="0" onclick="enableTB(this.name, this.checked);" /><label for="Repeater1_RadioButton3_1">Skriv antalet artiklar</label>
         <br />
    <input name="Repeater1$ctl02$textbox" type="text" id="Repeater1_textbox_1" disabled="disabled" class="aspNetDisabled" onkeyup="calculatePrice()" name="handlaihop" style="width:106px;background-color:#eeeeee" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:29:05.677

如果您使用的是框架 4.0，您可以为控件使用静态 ID。尝试设置 [ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx) = Static

> 但是，有时您不希望 ID 值分层嵌套，而只是希望呈现的 ID 是您设置的任何值。要启用此功能，您现在可以使用 ClientIDMode=static，在这种情况下，呈现的 ID 将与您在控件的服务器端设置的完全相同。

如果你使用`name`你应该使用的属性，`getElementsByName`而不是`getElementById` 可能你想设置文本框 id 而不是名称。考虑`id`到每个控件的属性必须是唯一的。

我不确定`GroupName`使用上述建议的设置是否会是静态的。值得测试一下，如果不起作用，您可以将`CssClass`属性设置为相同的值，并将其用作搜索文本框的键。

# web-services - 在执行 JAXB 解组时处理无效的枚举值

> ID：12147306
> 
> 赞同：10
> 
> 时间：2012-08-27T18:16:29.807
> 
> 标签：web-services, soapui, jaxb2

我的 Jaxb 基于 XML 模式设置创建了一个 Enum 类。

```
**enum Fruit {
    APPLE,ORANGE;
}** 
```

我正在使用 SOAP UI 来检查我的 Web 服务。由于它是一个自由形式的条目，如果我给出错误的水果说**“Guva”**，那么它不会抛出异常，而是在执行 UnMarshalling 后将其返回为 null。

我怎样才能避免这种情况？我应该使用自定义枚举类而不是 JAXB 生成的。请举一些例子。IE

 **问候斯里兰卡

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T19:16:50.800

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

默认情况下，您的 JAXB (JSR-222) 实现不会因任何转换异常而失败。如果您使用 JAXB API 进行解组，那么您可以设置 a`ValidationEventHandler`来捕获任何问题。下面是一个例子。

**根**

```
package forum12147306;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Root {

    private int number;
    private Fruit fruit;

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public Fruit getFruit() {
        return fruit;
    }

    public void setFruit(Fruit fruit) {
        this.fruit = fruit;
    }

} 
```

**水果**

```
package forum12147306;

public enum Fruit {

    APPLE, 
    ORANGE;

} 
```

**演示**

```
package forum12147306;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    private static final String XML = "<root><number>ABC</number><fruit>Guva</fruit></root>";
    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent validationEvent) {
                 System.out.println(validationEvent.getMessage());
                 //validationEvent.getLinkedException().printStackTrace();
                 return true;
            }

        });

        Root root = (Root) unmarshaller.unmarshal(new StringReader(XML));
    }

} 
```

* * *

**JAXB 参考实现**

不幸的是，JAXB RI 中似乎存在一个错误，因为无效枚举值的验证事件没有通过。

```
Not a number: ABC 
```

**解决问题**

编写您自己的`XmlAdapter`来处理与`Fruit`枚举的转换：

***水果适配器***

```
package forum12147306;

import javax.xml.bind.JAXBException;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class FruitAdapter extends XmlAdapter<String, Fruit> {

    @Override
    public String marshal(Fruit fruit) throws Exception {
        return fruit.name();
    }

    @Override
    public Fruit unmarshal(String string) throws Exception {
        try {
            return Fruit.valueOf(string);
        } catch(Exception e) {
            throw new JAXBException(e);
        }
    }

} 
```

**水果**

使用`@XmlJavaTypeAdapter`注释将`XmlAdapter`与`Fruit`枚举相关联。

```
package forum12147306;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlJavaTypeAdapter(FruitAdapter.class)
public enum Fruit {

    APPLE, 
    ORANGE;

} 
```

**新输出**

```
Not a number: ABC
javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.IllegalArgumentException: No enum const class forum12147306.Fruit.Guva] 
```

* * *

**EclipseLink JAXB (MOXy)**

使用 MOXy 会引发两个验证事件。要将 MOXy 指定为您的 JAXB 提供程序，请参阅： [http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html 。

```
Exception Description: The object [ABC], of class [class java.lang.String], from mapping [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[number-->number/text()]] with descriptor [XMLDescriptor(forum12147306.Root --> [DatabaseTable(root)])], could not be converted to [class java.lang.Integer].
Internal Exception: java.lang.NumberFormatException: For input string: "ABC"

Exception Description: No conversion value provided for the value [Guva] in field [fruit/text()].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[fruit-->fruit/text()]
Descriptor: XMLDescriptor(forum12147306.Root --> [DatabaseTable(root)]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T15:40:48.573

基于原始回复的简短回答。你需要做两件事

1.  实现自定义适配器以引发和异常
2.  添加事件处理程序以使解组失败

**Fruit.java**定义和使用适配器

```
package forum12147306;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlJavaTypeAdapter(FruitAdapter.class)
public enum Fruit {

    APPLE, 
    ORANGE;

}

class FruitAdapter extends XmlAdapter<String, Fruit> {

    @Override
    public String marshal(Fruit fruit) throws Exception {
        return fruit.name();
    }

    @Override
    public Fruit unmarshal(String string) throws Exception {
        try {
            return Fruit.valueOf(string);
        } catch(Exception e) {
            throw new JAXBException(e);
        }
    }
} 
```

解析错误时失败的 unmarshaller 事件处理程序 - 即它返回**false**（您可能需要决定何时失败以及何时不失败）

```
 JAXBContext jc = JAXBContext.newInstance(Root.class);
    Unmarshaller unmarshaller = jc.createUnmarshaller();
    unmarshaller.setEventHandler(new ValidationEventHandler() {
        @Override
        public boolean handleEvent(ValidationEvent validationEvent) {
             return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T10:50:37.563

另一种方法是生成 XSD 模式，如下所示：[如何在 jaxb 中解组并在不使用显式模式文件的情况下享受模式验证](https://stackoverflow.com/questions/2603778/how-can-i-unmarshall-in-jaxb-and-enjoy-the-schema-validation-without-using-an-ex)。

这是我从[dolbysurnd](https://stackoverflow.com/users/654200/dolbysurnd "杜比松")偷来的片段：

```
import java.io.IOException;
import java.io.Reader;
import java.util.ArrayList;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.SchemaOutputResolver;
import javax.xml.bind.Unmarshaller;
import javax.xml.transform.Result;
import javax.xml.transform.dom.DOMResult;
import javax.xml.transform.dom.DOMSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;

import org.xml.sax.SAXException;

private static List<DOMResult> generateJaxbSchemas(JAXBContext context) throws IOException {
    final List<DOMResult> domResultList = new ArrayList<>();
    context.generateSchema(new SchemaOutputResolver() {
        @Override
        public Result createOutput(String ns, String file) throws IOException {
            DOMResult domResult = new DOMResult();
            domResult.setSystemId(file);
            domResultList.add(domResult);
            return domResult;
        }
    });
    return domResultList;
}

private static Unmarshaller createUnmarshaller(JAXBContext context) throws SAXException, IOException, JAXBException {
    Unmarshaller unmarshaller = context.createUnmarshaller();
    List<DOMSource> domSourceList = new ArrayList<>();
    for (DOMResult domResult : generateJaxbSchemas(context)) {
        domSourceList.add(new DOMSource(domResult.getNode()));
    }
    SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
    Schema schema = schemaFactory.newSchema(domSourceList.toArray(new DOMSource[0]));
    unmarshaller.setSchema(schema);
    return unmarshaller;
}

public void unmarshal(JAXBContext context, Reader reader) throws JAXBException, SAXException, IOException {
    Unmarshaller unmarshaller = createUnmarshaller(context);
    Object result = unmarshaller.unmarshal(reader);
} 
```**

# sql - 每当 Hibernate 发出 SQL 查询时，如何记录堆栈跟踪？

> ID：12147308
> 
> 赞同：3
> 
> 时间：2012-08-27T18:16:36.887
> 
> 标签：sql, hibernate, logging

在 Java 中记录堆栈跟踪：

```
new Throwable.printStackTrace() 
```

要查看 Hibernate 发出的 SQL 语句，[请将 show_sql 设置为 true](https://stackoverflow.com/questions/2536829/hibernate-show-real-sql)。

但是，如何在每次发出 SQL 查询时记录堆栈跟踪？我想用它来监控性能（即找出我们源代码的哪些部分产生最多的查询）。

我查看了[拦截器和事件侦听器](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/events.html)，它们似乎都没有在查询级别提供挂钩。

我还浏览了源代码（SQLStatementLogger、Loader）。我没有看到任何钩子。

我也许可以尝试使用[日志记录 jdbc 驱动程序](http://code.google.com/p/log4jdbc/)，但我不清楚调用者的堆栈是否会被正确保留。

我可以[重写字节码](https://stackoverflow.com/questions/5863913/hooking-an-existing-method-in-java)，但这似乎太过分了。

**编辑**：我也可以尝试[AspectJ](http://www.eclipse.org/aspectj)来建议 SQL 执行方法。

有人做过吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:03:16.887

我最终将一个新的日志 Appender 附加到 Hibernate 3.6.8 中 org.hibernate.jdbc.util.SQLStatementLogger （并且没有其他类）使用的 org.hibernate.SQL 记录器。

```
Logger logger = Logger.getLogger("org.hibernate.SQL");
org.apache.log4j.rolling.RollingFileAppender appender =
    new org.apache.log4j.rolling.RollingFileAppender();
appender.setLayout(new SqlLogLayout());
// .. set appender options ..
appender.activateOptions();
logger.addAppender(appender); 
```

然后在我的 SqlLogLayout 中，我可以获得堆栈跟踪，以及从日志消息中获得的 SQL。

# java - spring mvc 声明所有 bean 单例

> ID：12147314
> 
> 赞同：5
> 
> 时间：2012-08-27T18:17:40.263
> 
> 标签：java, spring, model-view-controller

我有这个新的 mvc 项目，其中所有 bean 都是默认范围的（没有原型或会话）。具有单个应用程序上下文。

我想知道通过将所有 bean 设为默认范围，我们是否试图实现整个应用程序在单线程中运行？

如果是这样，是否会使每个httprequest（来自多个或相同的会话）排队，直到前一个完成？如何避免这种情况，任何建议或链接都​​会有所帮助。

我对spring和java开发比较陌生。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T18:22:45.843

因为 Spring bean 通常是无状态的，所以您可以安全地从多个线程调用它们。这就是您的应用程序的工作方式：每个控制器、服务、DAO 等只有一个实例。但是您的 servlet 容器（通过 Spring）从多个线程调用这些 bean - 它是完全线程安全的。

事实上，在普通的 servlet 中情况是一样的——每个 servlet 只有一个实例，并且可以被无限数量的线程访问。只要这个 servlet 是无状态的或正确同步的。

不要将 Spring 与[ejb](/questions/tagged/ejb "显示标记为“ejb”的问题")中池化的无状态会话 bean 混淆，每个客户端都从池中获取自己的实例。¹

^(1 - 事实上，这有点愚蠢 - 因为 bean 的定义是无状态的，所以将它们集中起来并防止并发访问是没有意义的......)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:22:39.933

单例意味着每个 bean 将只有一个实例。通常，此类 bean 是不携带状态的处理元素。在它们上调用的方法会传递到包含要处理的输入的上下文。因此，对此类单例 bean 的方法调用本质上是线程安全的。

# java - 用于 Java 的 System.out.println

> ID：12147319
> 
> 赞同：1
> 
> 时间：2012-08-27T18:17:47.667
> 
> 标签：java

这是怎么回事，`System.out.println(052)`都`System.out.println(0x2a)`打印42？

这与二进制有关系吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T18:18:45.470

`052`是[八进制](http://en.wikipedia.org/wiki/Octal)（以 8 为基数）文字。
`0x2a`是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)（以 16 为基数）文字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T18:19:07.683

`System.out.println(0x2a)`使用*十六进制*文字（`0x`前缀表示这一点），其十进制等效于`42`.

`System.out.println(052)`使用*八进制*文字（前导`0`表示这一点），它的十进制等效值为`42`.

`System.out.println`将根据十进制表示打印整数。如果您想保留十六进制，请尝试`System.out.printf("%x\n", 0x2a)`，或者，对于八进制，`"%o"`代替`"%x"`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T18:19:34.077

`052`,`0x2a`并且`42`都是写（十进制，以*10*为底）数字*42*的不同方式：

*   `052`是*八进制*，或以*8为底*
*   `0x2a`是*十六进制*，或以*16为基数*
*   `42`是熟悉的*小数*，以*10为底*

java 允许您在代码中使用这些不同格式中的任何一种直接使用数字：使用前导`0x`指定十六进制，或使用前导零`0`指定八进制。

这与二进制有关，因为您对 java 所做的任何事情都与二进制有关。

顺便说一句， 42 的*二进制以**2*为基数的表示是：`101010`. 您还可以在 java 中使用*二进制*文字，方法是在它们前面加上`0b`, 所以`0b101010 == 0x2a`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T18:20:31.320

052，从 0 开始，所以它是一个八进制数，因此 8*5+2=42 0x2a 从 0x 开始，所以它是一个十六进制数，因此 16*2+a = 32 + 10=42

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T18:23:17.973

`052`是八进制文字，等价于`0 * 8^2 + 5 * 8^1 + 2 * 8^0`. `0x2a`是一个十六进制文字，等价于`2 * 16^1 + 10 * 16^0`.

`5 * 8 + 2`和`2 * 16 + 10`可以看作是等价的，as`5 * 8`等价于`4 * 8 + 8`，并且`8 + 2`等于`10`。

# asp.net - Sql Server 数据 -> MySql + Django 迁移

> ID：12147321
> 
> 赞同：0
> 
> 时间：2012-08-27T18:17:49.787
> 
> 标签：asp.net, mysql, sql-server, django, migration

我有一个基于 ASP.NET + SQL SERVER 的现有网站。它应该很快就会转移到 Django + mysql。

创建新的 MySql DB 的最佳实践是什么？我想保留一些唯一 ID，因为它们会影响传输后应该保持不变的 URL。

另外我想避免使用 Django 检查数据库的选项，因为许多模型会以某种方式更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:24:04.280

如果这是我的网站，我将按照以下步骤操作：

1.  创建新数据库的新[CDM](http://en.wikipedia.org/wiki/Conceptual_schema)（概念数据模型）
2.  创建将捕获新 CDM 的[django 模型。](https://docs.djangoproject.com/en/dev/topics/db/models/)
3.  使用[SSIS](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services)，将 SQL Server 数据库迁移到 MySQL。（如果需要，放宽一些限制和约束）
4.  向新数据库（auto_increment 列）添加宽松的限制和约束。
5.  享受

# windows-phone-7 - 瓷砖上的动态图像效果

> ID：12147326
> 
> 赞同：0
> 
> 时间：2012-08-27T18:18:25.470
> 
> 标签：windows-phone-7, animation, tiles, windows-phone

我想为我的应用程序创建一个磁贴（不需要中心磁贴，它可能是一个网格框）。在那个图块上，我想显示一张图片并给它一个像图片中心一样的移动效果。我怎样才能做到这一点？请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:12:21.597

在 Windows Phone 7.5 中，您不能。也许在 7.8 中？还是 8 个？但不是我们目前拥有的任何东西。

# java - 切换广播接收器开/关/选项

> ID：12147327
> 
> 赞同：0
> 
> 时间：2012-08-27T18:18:34.597
> 
> 标签：java, android, android-intent, broadcastreceiver, android-activity

我有一个非常标准的 BroadcastReceiver 来拦截拨出电话。我想为用户提供将其设置为关闭的选项（禁用广播接收器），给我使用它的选项（广播接收器已打开但提示用户是否使用该服务），并且始终打开（无提示，BroadcastReceiver 将始终触发活动）。

使用标准意图：

```
<intent-filter android:priority="1">
    <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

活动也是通用的：

```
public class CallReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        String dialedNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
        String correctedNumber = correctNumber(dialedNumber);
        setResultData(correctedNumber);
    }
} 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:22:01.790

您可以将用户设置存储在`SharedPreference`对象中。您可以使用`PreferenceScreen`-`PreferenceActivity`来存储用户设置。您可以在方法中读取`SharedPreference`对象`onReceive`。这不会完全禁用广播接收器，但对于对电池寿命没有任何大影响的广播接收器来说，它可能是一个不错的解决方案。

# java - Java SWT 中的 ExpandBar/ExpandItem 背景/前景颜色

> ID：12147331
> 
> 赞同：3
> 
> 时间：2012-08-27T18:18:46.267
> 
> 标签：java, colors, background, swt, foreground

我正在寻找在 SWT 中管理我的 expandItem 标题的颜色，但我无法更改背景或前景（swt gtk 32 位）或仅背景（swt win 64）。

有什么特别的方法可以做到这一点吗？我已经在设置：

```
exp_bar.setBackground(new Color(display, GUISetting.MAIN_BACKGROUND));
exp_bar.setForeground(new Color(display, GUISetting.MAIN_TEXT_COLOR)); 
```

但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:09:21.633

根据[此](http://www.eclipsezone.com/eclipse/forums/t65497.html)页面，此行为是有意的。小部件由操作系统提供。操作系统使用纹理并且 SWT 决定，您不能在带有纹理的小部件上设置颜色。

[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=131265)有一个你可以支持的错误报告。

但是，这些帖子已经很老了（2006 年）。也许直到现在它已经修复了，但我找不到任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:48:18.203

在 SWT 中，这些小部件由 OS 提供。如果您查看文档 setBackground()，它会说参数只是提示。他们可能会获得荣誉，这完全取决于操作系统。

# c# - 如何使用 asp.net 获取 XML 提要

> ID：12147333
> 
> 赞同：0
> 
> 时间：2012-08-27T18:18:55.783
> 
> 标签：c#, asp.net, windows-phone-7

我决定使用 Visual Web Developer Express 转换一个获取 XML 提要然后将其解析为 asp.net Web 应用程序的 Windows Phone 7 应用程序。我认为由于该代码已经适用于 WP7，因此应该主要是为后面的 C# 代码复制和粘贴它。

```
HttpWebRequest request = HttpWebRequest.CreateHttp("http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=" + line1); 
```

这是我的 WP7 应用程序中获取 XML 提要的第一行代码，但我什至无法让 HttpWebRequest 像这样在 Visual Web Developer 中工作。Intellisense 显示了 create 和 createdefault，但没有 Windows Phone 7 中的 CreateHttp。我只需要弄清楚如何获取页面，我假设解析将与我的手机应用程序相同。有什么帮助吗？

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:22:27.590

只要打电话`WebRequest.Create()`。
您可能需要将结果转换为`HttpWebRequest`.

请注意，`WebClient`该类使这更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:28:23.680

我使用了在这里找到的 Asp.Net Rss Toolkit：http: [//aspnetrsstoolkit.codeplex.com/](http://aspnetrsstoolkit.codeplex.com/)它是一个简洁的工具，可以让您使用 rss 提要。您可以使用他们的命令行界面来创建您的 c# 或 vb.net 类以及您的提要的所有属性，因此您不必解析任何内容。我完全推荐它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:29:12.210

这必须更容易使用。

`WebClient client = new WebClient(); String htmlCode = client.DownloadString("url");`

# php - 允许用户登录持久性

> ID：12147339
> 
> 赞同：0
> 
> 时间：2012-08-27T18:19:13.287
> 
> 标签：php, mysql

> **可能重复：**
> [PHP 使用 Cookie 在数据库中存储当前会话 ID](https://stackoverflow.com/questions/12044964/php-storing-current-session-ids-in-database-using-cookies)

我想使用 COOKIES 为我的用户提供登录持久性。但是，我阅读和了解的越多，我就越意识到它们可以被篡改。因此，使它们不是最安全的方法。我只存储用户的 id，以便在他们登录时跨多个页面记住它们。当然，我知道 SESSIONS 是最好的方法，但仅就安全性而言。对？它们不像 COOKIES 那样不利于持久性，这就是我想要的。这样用户就不必每次关闭并重新打开浏览器时都重新登录。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:30:43.490

虽然评论中已经回答了这个问题，但让我强调一个要点：登录持久性没有别的意思，只是将用户登录（或其中的很大一部分）从应用程序的责任和控制转移到浏览器的责任，你不要在你无法控制的设备上控制你无法控制的操作系统上的 runninf。

这并不像听起来那么可怕，例如，一个面向内部的 web 应用程序，所有登录都来自一个安全结构（如域）中的受监督操作系统，这可能是完全可以接受的。

OTOH，根据您的应用程序处理的数据的类型和价值，这可能绝对不能接受：用户从某种公共互联网终端登录以通过登录持久性更新他们的医疗保健数据可能会使您在某些司法管辖区入狱。因此，让我建议，在查看**登录**持久性的方法之前，请重新访问**if**和**context**。

# ios - 当collapsesLayers为YES时，核心图不显示带有图像的轴标签

> ID：12147342
> 
> 赞同：2
> 
> 时间：2012-08-27T18:19:30.430
> 
> 标签：ios, core-plot

我在 iOS 5 上使用 Core Plot 1.0 在带有散点图的 xy 图中的自定义刻度位置绘制图标。我在 iPad 3 上遇到了性能问题，允许用户交互和水平滚动图表。我开始研究使用 CPTGraphHostingView 的 collapsesLayers 属性作为潜在的解决方案。启用它对我来说效果很好，除了一个我还没有解决的特定问题。我设置为渲染图像的自定义轴标签将不会显示。我想知道是否有人对可能是什么原因有任何想法。据我所知，轴标签仍然正确定位在正确的自定义刻度位置。我的外部代码的唯一区别是将 collapsesLayers 从 NO 交换为 YES。

这是我构建轴标签的方式：

```
+ (CPTAxisLabel *)buildIconAxisLabelAtLocation:(CGFloat)location withImageNamed:(NSString *)imageName
{
CPTLayer *imageLayer = [[CPTLayer alloc] initWithFrame:CGRectMake(0, 0, 16, 16)];

UIImage *image = [UIImage imageNamed:imageName];

CALayer *imageSubLayer = [[CALayer alloc] init];
imageSubLayer.frame = imageLayer.frame;
imageSubLayer.contents = (id)image.CGImage;

[imageLayer addSublayer:imageSubLayer];

CPTAxisLabel *iconLabel = [[CPTAxisLabel alloc] initWithContentLayer:imageLayer];
iconLabel.offset = 8;
iconLabel.tickLocation = CPTDecimalFromCGFloat(location);
iconLabel.rotation = M_PI;

return iconLabel;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:14:34.030

1.  Core Plot 图中的每一层都应该是一个`CPTLayer`或一个子类。这对布局和绘图有很多影响。

2.  Core Plot 不渲染 layer `contents`。改用`CPTBorderedLayer`带有图像填充的 a 。

我会尝试这样的事情：

```
UIImage *image = [UIImage imageNamed:imageName];
CPTImage *background = [CPTImage imageWithCGImage:image.CGImage];
CPTBorderedLayer *imageLayer = [[CPTBorderedLayer alloc] initWithFrame:CGRectMake(0, 0, 16, 16)];
imageLayer.fill = [CPTFill fillWithImage:background]; 
```

# powershell - 禁用组织时出现 Microsoft CRM Dynamics 2011 PowerShell 错误

> ID：12147343
> 
> 赞同：1
> 
> 时间：2012-08-27T18:19:32.373
> 
> 标签：powershell, dynamics-crm, dynamics-crm-2011

每当我在 powershell 脚本中尝试以下行时：

```
Disable-CrmOrganization -Name MyOrganization 
```

我收到以下错误：

```
Disable-CrmOrganization : The Deployment Service cannot process the request because one or more validation checks failed.
+ Disable-CrmOrganization <<<<  -Name MyOrganization
    + CategoryInfo          : NotSpecified: (:) [Disable-CrmOrganization], FaultException`1
    + FullyQualifiedErrorId : System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.Deployment.DeploymentServiceFaul
   t, Microsoft.Crm.PowerShell, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]],Microsoft.Crm.Pow
  erShell.DisableCrmOrganizationCmdlet 
```

但是，如果我手动禁用组织，我可以毫无问题地执行以下行：

```
Remove-CrmOrganization -Name MyOrganization 
```

知道为什么我不能使用 powershell 禁用组织吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:35:28.690

您可能已经浏览过此页面：[使用 PowerShell 调用](http://msdn.microsoft.com/en-us/library/gg328563.aspx#ex_disable)CRM PowerShell 参考的部署 Web 服务。

运行此命令会提供其他错误详细信息：`$error[0].Exception.Detail.ErrorDetails`

此外，Windows 应用程序事件日志显示错误（无论如何在我的情况下）：

*Web 服务向报表服务器请求 FindItems`http://myserver/reportserver/ReportService2005.asmx`失败并出现 SoapException。错误：授予用户“NT AUTHORITY\NETWORK SERVICE”的权限不足以执行此操作。*

这导致我这篇文章： [http ://social.microsoft.com/Forums/en/crm/thread/0dd4a41b-eeba-405c-9b56-c32bfedb9e7a](http://social.microsoft.com/Forums/en/crm/thread/0dd4a41b-eeba-405c-9b56-c32bfedb9e7a)

解决方案是在具有提升权限的帐户下运行 CrmDeploymentServiceAppPool。根据帖子在 SQL Server 中作为服务和系统管理员登录。

[如何在 Microsoft Dynamics CRM 中启用跟踪](http://support.microsoft.com/kb/907490)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-25T23:46:41.093

当我执行 2 次时，它可以尝试：尝试 { Disable-CrmOrganization -Name "oragnization_name" }catch { Disable-CrmOrganization -Name "oragnization_name" }

# api - 履行跟踪号的最大允许字段长度是多少

> ID：12147348
> 
> 赞同：2
> 
> 时间：2012-08-27T18:19:43.143
> 
> 标签：api, shopify, fulfillment

如果通过 Shopify API 进行编辑，配送跟踪号允许的最大字段长度是多少？我有一些情况，一个行项目可能需要多个跟踪号（例如，如果客户订购的数量足够多，必须运送多个盒子，而不是全部放在同一个货物中）。我可以插入一个以逗号分隔的跟踪号码字符串吗？如果可以，该字符串的最大允许长度是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:09:29.787

255 个字符：Shopify 在内部将其表示为带有 ActiveRecord 的字符串类型。

Edward Ocampo-Gooding，Shopify 开发者倡导者

# c - 用于扫描 long unsigned int 的格式说明符

> ID：12147352
> 
> 赞同：11
> 
> 时间：2012-08-27T18:19:59.430
> 
> 标签：c, scanf

我正在尝试使用此代码段将两个变量作为输入：-

```
unsigned int i;

unsigned long int j;

scanf("%u",i);

scanf("%lu",j); 
```

但这会引起以下警告：-

警告：格式 '%u' 需要类型为 'unsigned int *' 的参数，但参数 2 的类型是 'unsigned int' [-Wformat] 警告：格式 '%lu' 需要类型为 'long unsigned int *' 的参数，但参数2 的类型为 'long unsigned int' [-Wformat] 谁能向我解释这里发生了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-27T18:21:21.393

您需要添加一个前导`&`，作为*指向*输出参数`scanf`的指针。否则，它不能写给他们。

 *```
scanf("%lu", &i); 
```*

# java - JTextArea - 只有数字

> ID：12147354
> 
> 赞同：3
> 
> 时间：2012-08-27T18:20:04.673
> 
> 标签：java, swing, numbers, jtextarea

我需要`JTextArea`，不是`JFormattedTextField`，因为我想要 3 行，每行一个数字，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:20:57.333

`Document`从 中提取`JTextArea`，将其转换为 a `PlainDocument`，然后将 a 添加`DocumentFilter`到`Document`，过滤掉所有不允许的输入。

请单击此链接查看[文档过滤器教程](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)。

对于一个相反的例子，一个`DocumentFilter`阻止用户在文档中输入数字的例子，请参阅：[使用 DocumentFilter.FilterBypass](https://stackoverflow.com/a/9346426/522444)。很容易根据您的需要进行调整。

# javascript - 每 X 个 div 向页面添加元素

> ID：12147355
> 
> 赞同：0
> 
> 时间：2012-08-27T18:20:06.530
> 
> 标签：javascript, jquery, ajax, loops

我需要每 X 个帖子运行此函数，并且当您向下滚动页面时，该页面使用 AJAX 加载新帖子。我希望使用带有模数运算符的 for 循环来使用下面的函数，但它似乎并没有完成我正在寻找的东西。知道怎么做吗？

```
$(document).ready(function($) {
function adTileLoop(){
        var adTile = "<div class='new-box' id='article-tile'></div>";
        var adLoc = 11;
        var p = $('#article-tile');
        var tile = $('#article-tile:nth-child('+adLoc+')');
        for(var i = 0; i <= p.length; i++){
                        if(i % adLoc == 0){
                            $(tile).after(adTile);
                        }
        }
}
$('#content').live(adTileLoop);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:26:20.100

首先，您需要小心保持 ID 的唯一性。`$("#article-tile")`您拥有并且您试图选择多个的事实是一个错误。ID 必须是唯一的。

这是使用 jQuery 运行一堆 div 的更好方法：

```
$("div").each(function() {
    console.log($(this));
}); 
```

然后，您可以改进选择器以仅`nth-children`像您在问题中那样选择：

`$("div:nth-child(2)")`例如将获取页面上的所有其他 div。

要专门检索有关您的帖子的信息，请使用特定于每个帖子的选择器，例如：`$(".post:nth-child(2)")`.

正如 Ashirvad 在评论中建议的那样，您可以在成功的 ajax 调用后运行它，您将能够检索有关您的页面的更新信息。

# objective-c - 访问 NSManagedObject 会导致 EXC_BAD_ACCESS

> ID：12147356
> 
> 赞同：0
> 
> 时间：2012-08-27T18:20:09.900
> 
> 标签：objective-c, uitableview, core-data, memory-management, nsmanagedobject

**更新：整理问题并使其更清晰**

我`EXC_BAD_ACCESS`在`NSManagedObject`.

我有一个`Sentence`托管对象，我将它传递给模态视图 ( `addStoryItem`)，如下所示：

```
addStoryItem.sentence = (Sentence*)[fetchedResultsController objectAtIndexPath:indexPath]; 
```

`AddStoryItem`设置为保留`Sentence`：

```
@property (retain) Sentence *sentence; 
```

有时用户需要做一些事情来显示另一个模式（在顶部`addStoryItem`）——这不会影响这个对象，但它确实需要一个 NSMutableSet 的副本——`sentence.audiosets`

如果我确实查看了此模式，则`EXC_BAD_ACCESS`每当我尝试访问或设置句子对象或其属性时，一旦用户返回到 addStoryItem，我就会得到一个

*   有一个当前的托管对象上下文和获取的结果控制器
*   除非我显示模态视图控制器（afaik 与句子对象没有任何关系），否则一切正常
*   僵尸开启，但它什么也没告诉我（大脑？）

以下是对发生的事情的简单总结：

*   用户在表格视图中选择行
*   我从表中获取对象并设置模态的句子属性，然后使用 fetchedResultsController 显示模态
*   我显示一个字符串，图像并设置从句子到模态的ui方面的nsset
*   如果用户需要修改 nsset，他们会显示另一个模态，带有第一个 nsset 的副本（不会更改或访问句子对象）
*   如果我在关闭第二个模态（或 NSLOG 句子）后尝试在句子中设置属性 - `EXC_BAD_ACCESS`。

**就我而言，我自己的句子**。addStoryItem 的其他属性仍然在内存中徘徊 - 但是当我尝试访问它时，句子不存在。是的，我在 addStoryItem 的 dealloc 中释放了句子——但这没有被调用（我在那里有一个日志语句）。

你能帮我吗？很高兴提供更多代码或信息。相当沮丧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:36:30.153

您正在创建一个新`sentenceToUpDate`的`didSelectRowAtIndexPath:`. 当然，一旦您退出该方法，该参考就会被遗忘。

相反，您应该将检索到的对象分配给您的保留属性，如下所示：

```
self.sentence = [fetchedResultsController objectAtIndexPath:indexPath]; 
```

现在该实例应该按预期保留。

另一个可能的罪魁祸首是您的`NSSet`. 尝试创建一个新`NSSet`的以确保您没有影响实体：

```
NSSet *setToBePassedToModal = [[NSSet alloc] 
                                initWithSet:entity.toManyRelationship]; 
```

# java - 平面上的 OGL ES 2.0 纹理

> ID：12147357
> 
> 赞同：0
> 
> 时间：2012-08-27T18:20:13.717
> 
> 标签：java, android, opengl-es-2.0, textures

我有麻烦显示纹理到两个三角形的平面。我的纹理是 32x32 RGBA 位图。我正在为安卓开发。

我的飞机是这样创建的：

```
 float[] vertices = new float[24];
    // first triangle
    vertices[0] = 0.0f;
    vertices[1] = 0.0f;
    vertices[2] = 0.0f;
    vertices[3] = 1.0f;

    vertices[4] = 0.0f;
    vertices[5] = fHeight;
    vertices[6] = 0.0f;
    vertices[7] = 1.0f;

    vertices[8] = fWidth;
    vertices[9] = fHeight;
    vertices[10] = 0.0f;
    vertices[11] = 1.0f;

    // second triangle
    vertices[12] = fWidth;
    vertices[13] = fHeight;
    vertices[14] = 0.0f;
    vertices[15] = 1.0f;

    vertices[16] = fWidth;
    vertices[17] = 0.0f;
    vertices[18] = 0.0f;
    vertices[19] = 1.0f;

    vertices[20] = 0.0f;
    vertices[21] = 0.0f;
    vertices[22] = 0.0f;
    vertices[23] = 1.0f; 
```

我管理的是创建平面并显示一半的纹理。结果如下所示： [结果 http://www.imagecrate.de/u/1346090743_texture.png](http://www.imagecrate.de/u/1346090743_texture.png)

所以。纹理仅在第一个三角形上可见。我读到，当三角形以错误的顺序呈现时可能会出现问题，但是当我更改第二个三角形的顺序时，它没有任何效果。另外我认为纹理应该是透明的，黑色是可见的。知道我可能做错什么吗？

这是我的片段着色器代码：

```
precision mediump float;
varying vec2 vTexCoord;
uniform sampler2D sTexture; 
void main()
{
    gl_FragColor = texture2D(sTexture, vTexCoord); 
} 
```

这是我的纹理坐标：

```
 float[] mVertsData1 =
        { 
                0.0f, 0.0f, // TexCoord 0
                0.0f, 1.0f, // TexCoord 1
                1.0f, 1.0f, // TexCoord 2
                1.0f, 0.0f // TexCoord 3
        }; 
```

我不确定我的渲染代码在这里是否有帮助，如果需要，我可以添加它。但我不想根据需要使这个问题变得更大。也许有人知道这里发生了什么！？

先感谢您！Zerd1984

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:35:57.827

你有 6 个顶点和 4 个纹理坐标。您需要拥有相同数量的两者（6 和 6）。

对于每个顶点，您要在同一索引处定义该顶点的 texcoord；顶点 4 必须与 texcoord 4 匹配，顶点 5 与 texcoord 5 匹配，等等。

对于透明度，您需要启用混合：`glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

每当您遇到渲染问题时，您通常应该始终包含您的渲染代码。

# git - git branch -d 给出警告

> ID：12147360
> 
> 赞同：119
> 
> 时间：2012-08-27T18:20:19.730
> 
> 标签：git

只是想在删除本地分支后更好地了解警告消息

> 警告：删除`'old_branch'`已合并到 `'refs/remotes/origin/old_branch'`，但尚未合并到 的分支`HEAD`。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-27T18:27:06.867

这只是警告您已将更改推送到 上的分支`origin`，但它们并未合并到当前签出的分支中，因此您只是在本地删除它。

它警告您，您不再拥有该分支的本地副本，但它存在于`origin`

如果您还想删除远程分支，请使用`git push --delete origin old_branch`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-27T18:24:11.820

假设您当前已`master`签出，这意味着在 中所做的更改`old_branch`不存在于`master`. 但是，*它们*存在`old_branch`于`origin`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-06T06:10:02.813

这意味着您的本地分支与远程远程`old_branch`分支是最新的，但它没有合并到被认为是 repo 中的主分支的分支。`old_branch``origin``master`

这只是 git 的预防措施。它给了你一个提示：也许你在主题分支中完成了你的工作而忘记将它合并到主分支？

* * *

**更新**

Git 会警告您不要丢失更改。例如，如果您没有`old_branch`在主 git 上，则不允许您删除未合并到主 git 的分支（当然它允许，但带有选项的键`-D`）`force-delete`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-06T06:01:37.510

要添加到其他答案，这也可能意味着更改可能会合并到主控，只是您的主控本地副本尚未反映它。无论哪种方式，这只会告诉您，您的 master 的本地副本没有您在 origin 上推送的更改。合并/未合并...也许，也许不是

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-01T14:17:32.523

这里的几个答案是完全正确的，但似乎还没有完全解决这个问题。所以我会再尝试一次。

# OP 问题释义

> 在我执行*拉取请求*并删除 GitHub/Bitbucket/etc 上的分支之后。通过完成 PR 自动完成，然后我在本地删除分支时看到此错误：`warning: deleting branch 'old_branch' that has been merged to 'refs/remotes/origin/old_branch', but not yet merged to HEAD.`

# 了解时间线

GitHub 或任何远程存储库都不知道您机器的本地状态。

当拉取请求完成并提出删除原始 PR 分支时，它不知道您的本地分支。

此时，您删除了本地分支。您的**本地存储库/计算机知道此时间表**：

1.  `myfeature`==> `origin/myfeature`（`myfeature`已被推送到远程仓库）
2.  然后`myfeature`被删除
3.  所以`origin/myfeature`仍然存在，即使它没有本地代表

当然，这不是真的，因为`origin/myfeature`PR 完成时分支被破坏了，而你的本地计算机并不知道这一点。所以，Git 给了你警告。

# 不应该是 GitHub/BitBucket/等。让这更容易？

因为

> PR 完成 ==> 远程分支已删除

范式是如此普遍，如果远程分支可能以某种方式通知本地分支发生了这种情况，那就太好了。但是 Git 在“单向通信”方面做得非常好，你**只请求信息但从不发送未请求的信息**。一个领域的“双向”通信可能会让人们在其他领域也需要它，很快我们就会回到 Git，看起来更像 SVN 或任何其他太脆弱而无法成功的“中央存储库”范式。比我了解更多的人可能会更好地阐述这种“双向沟通”会导致的所有问题。

# python - Python while循环不稳定

> ID：12147365
> 
> 赞同：5
> 
> 时间：2012-08-27T18:20:34.610
> 
> 标签：python, while-loop

从来没有见过这样的事情。简单的while循环：

```
t_end = 100.0
t_step= 0.1
time = 0

while time<=t_end:
    time+=t_step
    print time 
```

最后 3 个打印值：

```
...
99.9
100.0
100.1 
```

在我看来是对的。

现在，我将 t_step 更改为 0.01：

```
t_end = 100.0
t_step= 0.01
time = 0

while time<=t_end:
    time+=t_step
    print time 
```

最后 3 个打印值：

```
...
99.98
99.99
100.0 
```

问题：为什么当 time = t_end =100.0 时它不进入最终循环？

什么是替代解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T18:23:46.127

因为这个 100.0（总和的结果）可能大于您手写的 100.0。你不应该比较浮点数是否相等......

您应该阅读以下内容：

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

可能的解决方案：

```
>>> t_end = 100.0
>>> t_step = 0.01
>>> total = int(t_end/t_step)
>>> for x in itertools.accumulate((t_step for i in range(total + 1))):
    print(x) 
```

所以最后一个元素是：100.01000000001426

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T18:23:43.363

[浮点舍入误差](http://en.wikipedia.org/wiki/Round-off_error)。这是我最后三个值得到的结果：

```
99.98000000001424
99.99000000001425
100.00000000001425 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T18:24:51.893

这是源于浮点计算的不准确性。您依靠 == 运算符来比较两个浮点值，这是不行的。您看到的“100.0”实际上可能类似于“100.000000000314”

# sql - 机箱内的 SQL Server 2008 更新

> ID：12147371
> 
> 赞同：0
> 
> 时间：2012-08-27T18:21:17.793
> 
> 标签：sql, sql-server-2008, select, sql-update, case

我正在尝试创建一个存储过程，用于将客户呼叫分配给呼叫者。我们有几个由变量@team_id 标识的调用者团队。我想要做的是检查客户（@code）是否有人分配给他们。如果他们这样做，请返回该人的 ID。如果不是，请运行 THEN 语句来确定应该分配给谁，将记录更新给该调用者，并返回该调用者的 ID。这是我所拥有的，但它不会让我在选择中运行更新。如果可以的话，我想避免每次都更新表（在存储过程的末尾添加一个更新子句）。

```
declare @team_id char(3), @code char(4)
--If team is an intake department
if (@team_id IN ('03V', '09X'))
SELECT 
    CASE 
        WHEN a.intake_caller_id IS NOT NULL and a.intake_caller_id <> '' THEN a.intake_caller_id
        ELSE
            (
                SELECT employee_id
                FROM 
                (
                    SELECT TOP 1 COUNT(a.id) as count, a.employee_id
                    FROM event.dbo.event a
                    JOIN event.dbo.event_triage b ON a.employee_id = b.employee_id
                    WHERE task_id in ('WS', 'WF', 'WT', 'WU' ) and a.status = 1 AND b.team_id = @team_id
                    GROUP BY a.employee_id
                    ORDER BY count ASC
                ) a
                update event.dbo.referral_data
                SET intake_caller_id = a.employee_id
                WHERE CODE_ = @code
            )
        END
    FROM  event.dbo.referral_data a 
    WHERE CODE_ = @code
ELSE 
--if team is a PO department
IF (@team_id IN ('00R', '154'))
    SELECT 
        CASE
            WHEN @team_id = '00R' AND intake_rx_caller_id IS NOT NULL AND intake_rx_caller_id <> '' THEN intake_rx_caller_id
            WHEN @team_id = '00R' AND (intake_rx_caller_id IS NULL OR intake_rx_caller_id = '') THEN 
                (
                    SELECT employee_id
                    FROM 
                    (
                        SELECT top 1 COUNT(a.id) as count, a.employee_id
                        FROM event.dbo.event a 
                        JOIN event.dbo.event_triage b ON a.employee_id = b.employee_id
                        WHERE task_id IN ('WR', 'CR') AND status = 1 and b.team_id = '00R'
                        GROUP BY a.employee_id
                        ORDER BY count ASC
                    ) a
                )
            WHEN @team_id = '154' AND reorder_rx_caller_id IS NOT NULL AND reorder_rx_caller_id <> '' THEN reorder_rx_caller_id
            WHEN @team_id = '154' AND (reorder_rx_caller_id IS NULL OR reorder_rx_caller_id = '') THEN
                (
                    SELECT employee_id
                    FROM
                    (
                        SELECT top 1 COUNT(a.id) as count, a.employee_id
                        FROM event.dbo.event a 
                        JOIN event.dbo.event_triage b ON a.employee_id = b.employee_id
                        WHERE task_id IN ('RS', 'RY') AND status = 1 and b.team_id = '154'
                        GROUP BY a.employee_id
                        ORDER BY count ASC
                    )a
                )
            END
    FROM event.dbo.doctor_data 
    WHERE CODE_ = @code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:33:43.383

为什么不先更新，然后在第一个 IF 语句中进行选择。您可以在更新语句中应用相同的条件逻辑。

**编辑**：这是代码。虽然没有测试....

```
DECLARE @team_id CHAR(3)
, @code CHAR(4) 
 IF ( @team_id IN ( '03V' , '09X' ) ) 
  BEGIN

        ;WITH  CTE
                AS ( SELECT TOP 1
                                COUNT(a.id) AS count
                              , a.employee_id
                     FROM       event.dbo.event a
                                JOIN event.dbo.event_triage b
                                      ON a.employee_id = b.employee_id
                     WHERE      task_id IN ( 'WS' , 'WF' , 'WT' , 'WU' )
                                AND a.status = 1
                                AND b.team_id = @team_id
                     GROUP BY   a.employee_id
                     ORDER BY   count ASC
                   )
              UPDATE      a
              SET         intake_caller_id = ( SELECT employee_id FROM CTE)
              FROM        event.dbo.referral_data AS a
              WHERE       CODE_ = @code
                          AND ISNULL(a.intake_caller_id,'')=''                                     

        SELECT      a.intake_caller_id
        FROM        event.dbo.referral_data a
        WHERE       CODE_ = @code
  END
ELSE  
  IF ( @team_id IN ( '00R' , '154' ) ) 
        BEGIN
              SELECT      CASE WHEN @team_id = '00R'
                                    AND intake_rx_caller_id IS NOT NULL
                                    AND intake_rx_caller_id <> '' THEN intake_rx_caller_id
                               WHEN @team_id = '00R'
                                    AND ( intake_rx_caller_id IS NULL
                                          OR intake_rx_caller_id = ''
                                        ) THEN ( SELECT employee_id
                                                 FROM   ( SELECT TOP 1
                                                                    COUNT(a.id) AS count
                                                                  , a.employee_id
                                                          FROM      event.dbo.event a
                                                                    JOIN event.dbo.event_triage b
                                                                          ON a.employee_id = b.employee_id
                                                          WHERE     task_id IN ( 'WR' , 'CR' )
                                                                    AND status = 1
                                                                    AND b.team_id = '00R'
                                                          GROUP BY  a.employee_id
                                                          ORDER BY  count ASC
                                                        ) a
                                               )
                               WHEN @team_id = '154'
                                    AND reorder_rx_caller_id IS NOT NULL
                                    AND reorder_rx_caller_id <> '' THEN reorder_rx_caller_id
                               WHEN @team_id = '154'
                                    AND ( reorder_rx_caller_id IS NULL
                                          OR reorder_rx_caller_id = ''
                                        ) THEN ( SELECT employee_id
                                                 FROM   ( SELECT TOP 1
                                                                    COUNT(a.id) AS count
                                                                  , a.employee_id
                                                          FROM      event.dbo.event a
                                                                    JOIN event.dbo.event_triage b
                                                                          ON a.employee_id = b.employee_id
                                                          WHERE     task_id IN ( 'RS' , 'RY' )
                                                                    AND status = 1
                                                                    AND b.team_id = '154'
                                                          GROUP BY  a.employee_id
                                                          ORDER BY  count ASC
                                                        ) a
                                               )
                          END
              FROM        event.dbo.doctor_data
              WHERE       CODE_ = @code 
        END 
```

# r - 根据特定行中的值对列重新排序。

> ID：12147372
> 
> 赞同：7
> 
> 时间：2012-08-27T18:21:19.090
> 
> 标签：r, sorting, dataframe

我在数据框中有以下数据：

```
 aa bb  cc
1 3 4 5
2 5 4 3
3 7 8 6 
..
100 33 63 55 
```

我需要根据最后一行中的值对列重新排序。这种转换的结果将是：

```
 bb  cc  aa
1 4  5  3
2 4  3  5 
3 8  6  7
...
100 63 55 33 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T18:25:32.433

```
x <- structure(list(aa = c(3L, 5L, 7L, 33L), bb = c(4L, 4L, 8L, 63L),
  cc = c(5L, 3L, 6L, 55L)), .Names = c("aa", "bb", "cc"),
  class = "data.frame", row.names = c("1", "2", "3", "100"))
x[,order(-x[nrow(x),])] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-05T06:37:30.697

以 Joshua Ulrich 的回答为基础，如果您想按**行名称**而不是数字排序：

```
x[, order(-x[which(rownames(x) == '100'), ]) ] 
```

where`100`是行名，如上例所示。

# gnuplot - Gnuplot pm3d 从文件中绘图

> ID：12147375
> 
> 赞同：1
> 
> 时间：2012-08-27T18:21:35.147
> 
> 标签：gnuplot

我在使用 pm3d 时遇到问题。我有格式的数据`x y # # # #`，我想添加四个 # 并绘制它们的总和与 x,y 的关系，如下所示：

```
set pm3d map
splot 'data' 1:2:($3 + $4 + $5+ $6) 
```

我已经确保我的数据在第一个数字发生变化的地方都有行，但是我收到了错误：

> ';' 预期的

之后`data`。如果之后我摆脱了所有东西，`data`那么 gnuplot 就可以进行绘图了，但是该绘图当然不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:27:32.277

您缺少关键字`using`。

```
splot 'data' using 1:2:($3+$4+$5+$6) 
```

我想这很容易错过，因为在示例中它经常被缩写`u`：

```
splot 'data' u 1:2:... 
```

# sybase - 如何找到 Sybase 自定义数据类型的底层本机数据类型？

> ID：12147387
> 
> 赞同：2
> 
> 时间：2012-08-27T18:22:20.873
> 
> 标签：sybase

我正在使用带有 TSQL 的 Sybase DB。

我可以查看我的数据库中的所有自定义数据类型，但是我看不到它们所包含的底层本机数据类型（INT、VARCHAR、CHAR、...）。

我使用的命令是：

`SELECT * FROM systypes`

这将显示所有自定义数据类型名称，但不显示其基础本机数据类型。

有谁知道我如何查看 Sybase DB 中自定义数据类型的本机数据类型？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:14:00.753

首先添加一个类型：

```
sp_addtype 'test', int
go 
```

* * *

那么你有两种可能。
使用`sp_help`：

```
sp_help 'test'
go 
```

或者，至少对于 sybase 15.0.3，执行以下查询：

```
select s.name, st.name
from systypes s
inner join systypes st on s.type = st.type
where s.name = 'test'
and st.usertype < 100
go 
```

* * *

**请注意**，我在查看`sp_help`存储过程中的代码时进行了此查询。如果您知道有一个系统 SP 可以完成您想要的部分工作，只需在 syssystemprocs 数据库中检查其代码即可。

# jquery - 单击后更改要滚动到的div？

> ID：12147388
> 
> 赞同：0
> 
> 时间：2012-08-27T18:22:22.540
> 
> 标签：jquery, scrollto

我有一组三个页面，我使用 ScrollTo 进行导航。我遇到的问题是我需要第 2 页是静态页面，但第 1 页和第 3 页在滚动到时运行 ajax 调用？

我在这里有一个 jsfiddle：h [ttp://jsfiddle.net/xYaPF/](http://jsfiddle.net/xYaPF/)

简单的解决方案是执行以下操作：http: [//jsfiddle.net/UaGjs/506/](http://jsfiddle.net/UaGjs/506/)但我看不到如何确保正确调用 ajax？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:30:12.580

```
 moveRight.click(function(evt) {
     $('#Mpage').scrollTo('#Right', 500);
       //Do your ajax call for page 3
    $.ajax(
         //your parameter
      )

});

 moveLeft.click(function(evt) {
     $('#Mpage').scrollTo('#Left', 500);

         //Do your ajax call for page 1
    $.ajax(
         //your parameter
      )

}); 
```

**更新**

[工作演示](http://jsfiddle.net/7BE9g/)

```
$(function(){
    $('#Mpage').scrollTo('#MainPage', 0 ); 
    });    

    $(function(){

        var moveRight = $('#main_nav a.next');
        var moveLeft = $('#main_nav a.prev');

         var flag=true;
         moveRight.click(function(evt) {
             if(flag){
             $('#Mpage').scrollTo('#Right', 500);
                 flag=false;
             }
             else{flag=true;
              $('#Mpage').scrollTo('#MainPage',500 );   
             }

        });

         moveLeft.click(function(evt) {
             if(flag){
             $('#Mpage').scrollTo('#Left', 500);flag=false;
             }
             else
             {flag=true;
             $('#Mpage').scrollTo('#MainPage',500 ); 
             }

        }); 
```

# ios - Xcode NSdata 垃圾

> ID：12147391
> 
> 赞同：0
> 
> 时间：2012-08-27T18:22:32.583
> 
> 标签：ios, xcode, networking, nsdata, garbage

我正在开发一个网络应用程序......但在通过网络发送它之前，我正在测试我的数据打包和解包......但我得到了很多垃圾值

ui 文本字段中的 myfield .. 我的标签是 uilabel ... mybutton 方法在按下按钮时被调用

在 rec 方法中，x 中的值（垃圾）从 -231231223432.... 到 +3423423423....

另外，如果我想用这些数据打包一个 nsstring，我将如何打包和解包它

```
 enum 
{
gkMessageSent,
gkMessageNotsent
};

-(void)rec:(NSData *)data
 {

const char *incomingPacket = (const char *)[data bytes];
char messageType = incomingPacket[0];

switch (messageType)
{

    case gkMessageSent: 
    {  

        float x = *(float *)(incomingPacket + 1 );
        // value of x are not correct here
        NSString *resultString = [[NSString alloc] initWithFormat:@"%f",x];

        mylabel.text= resultString;            

        break;
    }

    case gkMessageNotsent: 
    { 
        mylabel.text=@"2";
        break;
    }  

        default:
        mylabel.text=@"3";
        break;

}

 }

 -(IBAction)mybutton{

   float myvalue=[myfield.text floatValue];

    // i check myvalue here and its fine

NSMutableData *data= [NSMutableData dataWithCapacity:1+sizeof(float)];

int myrand=1+rand()%3;

if(myrand==1)
{
    char messageType = gkMessageSent;  
    [data appendBytes:&messageType length:1];

    [data appendBytes:&myvalue length:sizeof(float)];

}
else {
    char messageType = gkMessageNotsent;
    [data appendBytes:&messageType length:1];
    [data appendBytes:&myvalue length:sizeof(float) ];        

}

[self rec:data];  

 } 
```

经过一些研究，我找到了一种将 NSString 打包到 NSmutabledata 中的方法，但无法弄清楚解包

```
-(IBAction)mybutton {

   float myvalue=300;

NSString *resultString = [[NSString alloc] initWithFormat:@"%.2f",myvalue];

NSMutableData *data=nil;

data= [NSMutableData dataWithCapacity:1+([resultString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]) ];

int myrand=1+rand()%3;

if(myrand==1)
{
    char messageType = gkMessageSent;  
    [data appendBytes:&messageType length:1];

    [data appendBytes:[resultString UTF8String] length:[resultString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];           

}
else {
    char messageType = gkMessageNotsent;
    [data appendBytes:&messageType length:1];

    [data appendBytes:[resultString UTF8String] length:[resultString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];         

    }

[self rec:data];   

}

-(void)rec:(NSData *)data{

const char *incomingPacket = (const char *)[data bytes];
char messageType = incomingPacket[0];

switch (messageType)
{

    case gkMessageSent: 
    {  

       // Have to get the String here

        break;
    }

    case gkMessageNotsent: 
    { 
        mylabel.text=@"2";
        break;
    }  

        default:
        mylabel.text=@"3";
        break;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:53:36.283

您永远不应该通过网络发送未知大小的“原始”数据。如果您使用的是整数，则可以通过不发送原始数据来发送数据，而是将其字节顺序“纠正”为“网络顺序”，然后在另一端反转该过程：

```
uint32t foo = htonl(myLong); 
```

并扭转这一点：

```
uint32t myLong = ntohl(networkData4bytesLong); 
```

可以强制浮动和双打使用上述内容，但是（据我所知）没有标准的方法可以做到这一点。即使是下面的 hack 工作，float 必须是两边的 32 位 IEEE 格式类型（现在在大多数系统上可能都是如此）。

一种方法是创建一个带有 long 和 float 的联合：

```
struct foo {
  uint32_t lng;
  float flt;
}; 
```

您可能应该添加一个 assert(sizeof(foo) == 4); 双方也一样，只是为了确定。

您将浮点数放入这种类型的联合中，然后使用 htonl(foo.lng); 转换，并在另一侧反转。

也许更可靠（但更困难的方法）是将浮点数转换为字符串，发送它，然后转换回浮点类型。也就是说，上述假设适用于您列出的假设（IEEE，32 位类型）；

编辑：所以如果你想使用一个字符串，你可以通过将一个空终止的字符串附加到你发送的数据来做到这一点，使用一个“pascal”类型的字符串，其中第一个字节是长度，后面是一个非空终止的字符串，或者您可以允许至少有一个终止 NULL 的固定数量的空间。为简洁起见，我将使用第三种方式，但“pascal”方式可能是您编写代码时最好使用的方式。

因此，为了 100% 确定我们有足够的空间，我们将为浮点分配 20 个字节（太多了）：

```
char floatStr[20];
sprintf(floatStr, "%f", myFloat);
[myData appendBytes:floatStr length:20]; 
```

另一方面：

```
unsigned char *ptr = ...; // set to the start of the string
sscanf(ptr, "%f", &myFloat);
ptr += 20; 
```

# python - read_fwf()/read_csv()/read_table() 中的na_values 会在转换器函数执行后进行转换吗？

> ID：12147392
> 
> 赞同：0
> 
> 时间：2012-08-27T18:22:33.103
> 
> 标签：python, pandas

我想从固定宽度的平面文件中读取数据框。这是一个对性能有些敏感的操作。

我希望从列值中删除所有空白空格。删除该空格后，我希望将空白字符串转换为`NaN`或`None`值。这是我的两个想法：

```
pd.read_fwf(path, colspecs=markers, names=columns,
            converters=create_convert_dict(columns))

def create_convert_dict(columns):
    convert_dict = {}
    for col in columns:
        convert_dict[col] = null_convert
        return convert_dict

def null_convert(value):
    value = value.strip()
    if value == "":
        return None
    else:
        return value 
```

或者：

```
pd.read_fwf(path, colspecs=markers, names=columns, na_values='',
            converters=create_convert_dict(columns))

def create_convert_dict(columns):
    convert_dict = {}
    for col in columns:
        convert_dict[col] = col_strip
    return convert_dict

def col_strip(value):
    return value.strip() 
```

第二个选项取决于在 na_values 之前评估的转换器（去除空格）。

我想知道第二个是否可以工作。我很好奇的原因是因为它似乎更好地保留`NaN`具有与`Null`无相反的价值。

对于如何执行此操作（剥离空格然后将空白字符串转换为 NaN），我也愿意接受任何其他建议。

我目前无法访问安装了 pandas 的计算机，这就是为什么我无法自己测试它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:04:06.663

对于固定宽度的文件，不需要做任何特殊的事情来去除空白，或者处理缺失的字段。下面是一个固定宽度文件的小示例，每列三列，宽度为 5。有尾随和前导空格 + 缺失数据。

```
In [57]: data = """\
A    B     C     
 0    foo       
3    bar     2.0
  1        3.0
"""

In [58]: df = pandas.read_fwf(StringIO(data), widths=[5, 5, 5])

In [59]: df
Out[59]: 
   A    B   C
0  0  foo NaN
1  3  bar   2
2  1  NaN   3

In [60]: df.dtypes
Out[60]: 
A      int64
B     object
C    float64 
```

# python-c-api - 如何在 python 的 C 文件中引用#defines？

> ID：12147394
> 
> 赞同：10
> 
> 时间：2012-08-27T18:22:43.610
> 
> 标签：python-c-api, python-c-extension

我有一个 C 文件，其中包含一堆我想从 python 引用的位的#defines。它们足够多，我宁愿不将它们复制到我的 python 代码中，而是有一种可接受的方法可以直接从 python 引用它们？

注意：我知道我可以打开头文件并解析它，这很简单，但如果有更 Pythonic 的方式，我想使用它。

编辑：

这些是非常简单的#defines，用于定义掩码中位的含义，例如：

```
#define FOO_A 0x3
#define FOO_B 0x5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T04:38:10.270

您可能对在 Python 源代码压缩包目录中[`h2py.py`](http://svn.python.org/projects/python/trunk/Tools/scripts/h2py.py)找到的脚本感到幸运。`Tools/scripts`虽然它不能处理复杂的预处理器宏，但它可能足以满足您的需求。

以下是脚本顶部的功能描述：

> 阅读#define 并翻译成 Python 代码。处理#include 语句。使用一个参数处理#define 宏。任何无法识别或无法转换为有效 Python 的内容都会被忽略。
> 
> 没有文件名参数，充当过滤器。如果给出了一个或多个文件名，则输出将写入本地目录中的相应文件名，翻译为全大写，扩展名替换为“.py”。
> 
> 通过传递一个或多个“-i regular_expression”形式的选项，您可以指定要忽略的附加字符串。这很有用，例如忽略对 u_long 的强制转换：只需指定“-i '(u_long)'”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T18:53:37.157

在假设 C .h 文件仅包含 #defines （因此没有外部链接）的假设下运行，则以下内容适用于 swig 2.0（http://www.swig.org/）和 python 2.7（经过测试）。假设包含刚刚定义的文件名为 just_defines.h，如上所示：

```
#define FOO_A 0x3
#define FOO_B 0x5 
```

然后：

```
swig -python -module just just_defines.h ## generates just_defines.py and just_defines_wrap.c
gcc -c -fpic just_defines_wrap.c -I/usr/include/python2.7 -I. ## creates just_defines_wrap.o
gcc -shared just_defines_wrap.o -o _just.so ## create _just.so, goes with just_defines.py 
```

用法：

```
$ python 
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import just
>>> dir(just)
['FOO_A', 'FOO_B', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '_just', '_newclass', '_object', '_swig_getattr', '_swig_property', '_swig_repr', '_swig_setattr', '_swig_setattr_nondynamic']
>>> just.FOO_A
3
>>> just.FOO_B
5
>>> 
```

如果 .h 文件还包含入口点，那么您需要链接到某个库（或更多）以解析这些入口点。这使解决方案变得更加复杂，因为您可能必须寻找正确的库。但是对于“只定义案例”，您不必担心这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:29:36.787

`#define`s 是宏，在 C 编译器的预处理器之外没有任何意义。因此，它们是世界各地多语言程序员的祸根。（例如，请参阅这个 Ada 问题：在两周前[为 linux 内核中的模块设置许可证）。](https://stackoverflow.com/questions/11927590/setting-the-license-for-modules-in-the-linux-kernel)

如果没有通过 C 预处理器运行您的源代码，确实没有很好的方法来处理它们。我通常只是弄清楚他们评估的内容（在复杂的情况下，通常没有比实际编译和运行该死的代码更好的方法来做到这一点！），并将该值硬编码到我的程序中。

（其中一个）令人讨厌的部分是 C 编码器认为 C 预处理器是一个非常简单的小东西，他们经常使用它甚至没有考虑过。结果，他们往往会惊讶于它会给互操作性带来很大的问题，而我们可以相当容易地处理 C 给我们带来的大多数其他问题。

在上面显示的简单案例中，到目前为止，最简单的处理方法是将相同的两个值编码为 Python 程序中某处的常量。如果跟上变化很重要，那么编写一个 Python 程序将这些值从文件中解析出来可能不会太麻烦。但是，您必须意识到您的 C 代码只会在编译时重新评估这些值，而您的 python 程序会在它运行时执行它（因此可能应该只在 C 代码也被编译时运行）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-04T22:12:45.797

如果您正在编写扩展模块，请使用[http://docs.python.org/3/c-api/module.html#PyModule_AddIntMacro](http://docs.python.org/3/c-api/module.html#PyModule_AddIntMacro)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T05:51:06.070

我几乎遇到了同样的问题，所以写了一个 Python 脚本来解析 C 文件。它旨在重命名以匹配您的 c 文件（但使用 .py 而不是 .h）并作为 Python 模块导入。

代码：[https ://gist.github.com/camlee/3bf869a5bf39ac5954fdaabbe6a3f437](https://gist.github.com/camlee/3bf869a5bf39ac5954fdaabbe6a3f437)

例子：

配置.h

```
#define VERBOSE 3
#define DEBUG 1
#ifdef DEBUG
    #define DEBUG_FILE "debug.log"
#else
    #define NOT_DEBUGGING 1
#endif 
```

从 Python 中使用：

```
>>> import configuration
>>> print("The verbosity level is %s" % configuration.VERBOSE)
The verbosity level is 3
>>> configuration.DEBUG_FILE
'"debug.log"'
>>> configuration.NOT_DEBUGGING is None
True 
```

# .net - global asax 和 beginrequest = 在请求执行期间不能修改此服务器变量

> ID：12147397
> 
> 赞同：2
> 
> 时间：2012-08-27T18:22:47.280
> 
> 标签：.net, iis-7.5

任何人都知道为什么我会收到此错误？

> ## “/”应用程序中的服务器错误。
> 
> 在请求执行期间无法修改此服务器变量。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：在请求执行期间无法修改此服务器变量。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [HttpException (0x80004005): 此服务器变量在请求执行期间无法修改。]
> System.Web.HttpServerVarsCollection.SynchronizeServerVariable(String name, String value) +3998772
> System.Web.Hosting.IIS7WorkerRequest.GetServerVarChanges(HttpContext ctx) +531
> System. Web.Hosting.IIS7WorkerRequest.SynchronizeVariables（HttpContext 上下文）+77
> System.Web.HttpRuntime.ProcessRequestNotificationPrivate（IIS7WorkerRequest WR，HttpContext 上下文）+655

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

在 global.asax 中使用空？（我有代码，但即使是空的也会发生错误）

```
void Application_BeginRequest(Object sender, EventArgs e)
{ 

} 
```

如果我删除这些行，我不会得到错误。

我使用 hello world 类型的 webapp（webform 或 mvc3）得到了这个错误

# c++ - 正确使用 std::enable_if 或如何替换它

> ID：12147399
> 
> 赞同：4
> 
> 时间：2012-08-27T18:22:53.737
> 
> 标签：c++, c++11, typetraits

这是对 std::enable_if 的正确使用吗？它有效，但它正确吗？

```
//*.h file

template <typename T>
static typename std::enable_if<std::is_integral<T>::value, T>::type 
randomFrom(const T min, const T max);

template <typename T>
static typename std::enable_if<std::is_floating_point<T>::value, T>::type 
randomFrom(const T min, const T max); 
```

.

```
//*.inl file

template <typename T>
inline typename std::enable_if<std::is_integral<T>::value, T>::type 
Math::randomFrom(const T min, const T max)
{
    static std::default_random_engine re((unsigned long)time(0));
    std::uniform_int_distribution<T> uni(min, max);
    return static_cast<T>(uni(re));
}

template <typename T>
inline typename std::enable_if<std::is_floating_point<T>::value, T>::type 
Math::randomFrom(const T min, const T max)
{
    static std::default_random_engine re((unsigned long)time(0));
    std::uniform_real_distribution<T> uni(min, max);
    return static_cast<T>(uni(re));
} 
```

我怎样才能重写它，以实现更干净的界面？像：

```
template <typename T>
static T randomFrom(const T min, const T max); 
```

顺便说一句，我有类似的东西：（我不想使用 boost）

```
typedef typename boost::mpl::if_<
        boost::is_floating_point<T>,
        boost::uniform_real<>,
        boost::uniform_int<>>::type dist_type; 
```

并且整个行为都在单个功能中解决。但没有什么像`std::if`对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:56:45.200

你的用法很好，而且非常地道。

相当于 Boost.MPL 的`if_`将是`std::conditional`：

```
typedef typename std::conditional<
        std::is_floating_point<T>::value,
        std::uniform_real_distribution<T>,
        std::uniform_int_distribution<T>>::type dist_type; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T18:56:12.063

我猜只是把它们包起来？

```
template <typename T>
inline typename std::enable_if<std::is_integral<T>::value, T>::type 
randomFrom_helper(const T min, const T max)
{
    static std::default_random_engine re((unsigned long)time(0));
    std::uniform_int_distribution<T> uni(min, max);
    return static_cast<T>(uni(re));
}

template <typename T>
inline typename std::enable_if<std::is_floating_point<T>::value, T>::type 
randomFrom_helper(const T min, const T max)
{
    static std::default_random_engine re((unsigned long)time(0));
    std::uniform_real_distribution<T> uni(min, max);
    return static_cast<T>(uni(re));
}

template <typename T>
T randomFrom(const T min, const T max)
{
return randomFrom_helper(min,max);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T19:49:08.107

一旦你像*Anubis 先生*所建议的那样包装它们，你甚至可以放弃（有时有点神秘）SFINAE hack 并改用重载：

```
namespace detail
{
    template <typename T>
    T randomFromImpl(const T min, const T max, const std::true_type&)
    {
        //integer implementation
    }

    template <typename T>
    T randomFromImpl(const T min, const T max, const std::false_type&)
    {
        //float implementation
    }
}

template <typename T>
T randomFrom(const T min, const T max)
{
    static_assert(std::is_arithmetic<T>::value, "unsupported type");
    return detail::randomFromImpl(min, max, std::is_integral<T>());
} 
```

除此之外，您的使用`std::enable_if`确实是正确的，即使不一定需要（但我想如果您更喜欢 SFINAE 或重载，这是一个品味问题）。

# php - xml 到 html 使用 xslt 转换

> ID：12147402
> 
> 赞同：2
> 
> 时间：2012-08-27T18:23:22.180
> 
> 标签：php, xml, xslt, xpath

**文档：**

```
<?xml version="1.0" encoding="utf-8"?>
<page>
    <tab dim="30">
        <column>

        </column>
        <column>

        </column>
    </tab>
    <tab dim="70">
    </tab>
</page> 
```

**样式表：**

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <xsl:text disable-output-escaping='yes'>&lt;!DOCTYPE html></xsl:text>
    <html>
    <head>

    </head>
    <body>
        <xsl:for-each select="tab">
        <div class="tab">tab</div>
        </xsl:for-each>
    </body>
    </html>
</xsl:template>

</xsl:stylesheet> 
```

**生产这个**

```
<!DOCTYPE html><html><head></head><body></body></html> 
```

**我要这个**

```
<!DOCTYPE html><html><head></head><body><div class="tab">tab</div><div class="tab">tab</div></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:31:54.237

你需要

```
<xsl:for-each select="page/tab"> 
```

代替

```
<xsl:for-each select="tab"> 
```

* * *

要么那个，要么你可以做

```
<xsl:template match="/page"> 
```

代替

```
<xsl:template match="/"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:53:10.913

我会为 <tab> 和 <page> 使用模板匹配

```
<xsl:template match="page">
  <xsl:text disable-output-escaping='yes'>&lt;!DOCTYPE html&gt;</xsl:text>
  <html>
    <head></head>
    <body>
      <xsl:apply-templates/>
    </body>
  </html>
</xsl:template>

<xsl:template match="tab">
  <div class="tab">tab</div>
</xsl:template> 
```

# ios - iOS UIWebView CSS 动画 1080p

> ID：12147403
> 
> 赞同：1
> 
> 时间：2012-08-27T18:23:27.793
> 
> 标签：ios, uiwebview, css-animations

我在 1080p 外部显示器上使用 UIWebView 在新 iPad 和 iPhone 4S 上运行 CSS 动画时发现性能问题，主屏幕不包含窗口。

当图像为 1920x1080 并且外部屏幕以 1080p 运行时，[animate.css淡入淡出。](http://daneden.me/animate/)但是，当以 720p 运行外接显示器时，动画是流畅的，在视网膜模式下没有外接屏幕时也是如此。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:35:17.093

通过将以下 CSS 添加到图像元素中，我得到了这个工作：

-webkit-transform: translate3d(0px,0px,0px);

它为元素启用硬件加速。

# linux - 相同变音符号（变音符号）的不同 UTF-8 签名 - 2 种二进制方式来编写变音符号

> ID：12147410
> 
> 赞同：7
> 
> 时间：2012-08-27T18:24:02.627
> 
> 标签：linux, macos, utf-8, diacritics, dead-key

我有一个很大的问题，在网上找不到任何帮助：

我将一个页面从一个网站从 OSX 移动到 Linux（两个系统都在 de_DE.UTF-8 中运行）并在一个非常未知的问题中运行：一些文件不再找到，但显然存在于硬盘驱动器上（可见）同名。所有这些文件都包含德语变音符号。

我拿了一张样本图片，从网页上复制了原始的 request-uri 并直接调用它——同样的错误。重写文件名后它起作用了。是的，我没有打错！

这让我很吃惊，我查看了 apache-log，在其中发现了这些条目：

```
192.168.56.10 - - [27/Aug/2012:20:03:21 +0200] "GET /images/Sch%C3%B6ne-Lau-150x150.jpg HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1"
192.168.56.10 - - [27/Aug/2012:20:03:57 +0200] "GET /images/Scho%CC%88ne-Lau-150x150.jpg HTTP/1.1" 404 4205 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1" 
```

那是我要调查的事情......这是我在 UTF8 图表[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)中找到的内容：

```
ö   c3 b6   LATIN SMALL LETTER O WITH DIAERESIS
¨   cc 88   COMBINING DIAERESIS 
```

我想你已经听说过死键：[http](http://en.wikipedia.org/wiki/Dead_key) ://en.wikipedia.org/wiki/Dead_key如果没有，请阅读文章。这很有趣；）

这是否意味着 OSX 将所有变音符号与字母分开？这是否真的意味着，OSX 将字符 ö 保存为 o 和 ¨ 而不是使用组合产生的真实字符？

如果是，你知道我可以用来重命名这些文件的好脚本吗？这不会是我从 OSX 迁移到 Linux 的第一页……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T18:51:47.577

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:16:49.030

Thanks, Jon Hanna for much background-information here! This was important to get the full answer: a way to convert from the one to the other normalisation form.

As my changes are in the filesystem (because of file-upload) that is linked in the database, I now have to update my database-dump. The files got already renamed during the move (maybe by the FTP-Client ...)

Command line tools to convert charsets on Linux are:

*   iconv - converting the content of a stream (maybe a file)
*   convmv - converting the filenames in a directory

The charset utf-8-mac (as described in [http://loopkid.net/articles/2011/03/19/groking-hfs-character-encoding](http://loopkid.net/articles/2011/03/19/groking-hfs-character-encoding)), I could use in iconv, seems to exist just on OSX systems and so I have to move my sql-dump to my mac, convert it and move it back. Another option would be to rename the files back using convmv to NFD, but this would more hinder than help in the future, I think.

The tool convmv has a build-in (os-independent) option to enforcing NFC- or NFD-compatible filenames: [http://www.j3e.de/linux/convmv/man/](http://www.j3e.de/linux/convmv/man/)

PHP itself (the language my system - Wordpress is based on) supports a compatibility-layer here: [In PHP, how do I deal with the difference in encoded filenames on HFS+ vs. elsewhere?](https://stackoverflow.com/questions/773574/in-php-how-do-i-deal-with-the-difference-in-encoded-filenames-on-hfs-vs-elsew) After I fixed this issue for me, I will go and write some tests and may also write a bug-report to Wordpress and other systems I work with ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:54:28.307

Linux distros treat filenames as binary strings, meaning no encoding is assumed - though the graphical shell (Gnome, KDE, etc) might make some assumptions based on environment variables, locale, etc.

OS-X on the other hand requires or enforces (I forget which) their own version of UTF-8 with Unicode normalization to expand all diacritics into combining characters.

On Linux when people do use Unicode in filenames they tend to prefer UTF-8 with precomposed characters when it comes to diacritics.

# mysql - 结合两次安装的mysql

> ID：12147412
> 
> 赞同：0
> 
> 时间：2012-08-27T18:24:04.627
> 
> 标签：mysql

愚蠢的问题

StartupParameters.plist 指向 MySQL 5.5.27-community。当我运行 Querious（一个数据库管理应用程序）并创建一个数据库时，它会将数据库添加到旧版本 - MySQL 5.5.18（特别是 usr/local/mysql-5.5.18-osx10.5-x86_64/data）。

问题：如何将旧版本 MySQL 中的 dbs 移动到当前版本？如果我这样做，然后删除旧的 MySQL 目录，我会没事还是需要进行其他更改？

谢谢，科尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:26:39.767

您应该使用 mysqldump 或类似工具简单地转储旧数据库。然后将这些转储导入新服务器。然后，您应该能够安全地卸载旧服务器并删除目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:48:43.490

这是导出数据库然后将它们导入另一个数据库的简单案例。在您的情况下，使用[mysqldump](http://linuxcommand.org/man_pages/mysqldump1.html) 从旧服务器导出数据库并使用[mysql import](http://linuxmoz.com/mysql-import-database/)导入新服务器。

导出数据库后，可以安全地卸载旧版本。

```
usr/local/mysql-5.5.18-osx10.5-x86_64/> mysqldump -u username -p database > exported.sql

(location of the newer db)>mysql -u username -p -h localhost database < exported.sql 
```

# javascript - 多个嵌套元素上的 jQuery .text('')

> ID：12147419
> 
> 赞同：0
> 
> 时间：2012-08-27T18:24:11.150
> 
> 标签：javascript, jquery

我想从 html 中删除所有文本并仅打印标签。我最终写了这个：

```
var html = $('html');
var elements = html.find('*');
elements.text('');
alert(html.html()); 
```

它只打印出来`<head></head><body></body>`。不是假设要打印所有标签。我在 html 中有近 2000 个标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:30:03.340

```
var elements = html.find('*');
elements.text(''); 
```

这就是说“找到下面的所有元素`html`，然后清空它们”。这包括`body`和`head`。当它们被清空时，页面上没有其他元素，因此它们是唯一出现在`html`'s 内容中的元素。

如果您真的想从页面中删除所有文本并保留元素，则必须使用 DOM 方法：

```
html.find('*').each(function() {               // loop over all elements
    $(this).contents().each(function() {       // loop through each element's child nodes
        if (this.nodeType === 3) {             // if the node is a text node
            this.parentNode.removeChild(this); // remove it from the document
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:38:45.513

您刚刚从您的 dom 中删除了所有内容：

```
$('html').find('*').text(''); 
```

这会将 内部所有节点的文本设置为`<html>`空字符串，删除后代元素 - 剩下的唯一两个节点是根节点的两个子节点，`<head></head>`以及`<body></body>`它们的空文本节点子节点 - 正是你得到的结果。

如果要删除所有文本节点，则应使用以下命令：

```
var html = document.documentElement;
(function recurse(el) {
    for (var i=0; i<el.childNodes.length; i++) {
        var child = el.childNodes[i];
        if (child.nodeType == 3)
            el.removeChild(child);
        else
            recurse(child);
    }
})(html);
alert(html.outerHTML); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:38:33.360

lonesomeday 似乎有正确的道路，但你也可以像这样进行一些字符串重建：

```
 var htmlString=$('html').html();
    var emptyHtmlString="";
    var isTag=false;

for (i=0;i<htmlString.length;i++)
{
    if(htmlString[i]=='<')
        isTag=true;
    if(isTag)
    {
        emptyHtmlString+=htmlString[i];
    }
    if(htmlString[i]=='>')
        isTag=false;
}
alert(emptyHtmlString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:33:45.090

试试这个

```
$(function(){

    var elements = $(document).find("*");

    elements.each(function(index, data){
        console.log(data);
    });

}); 
```

这将返回页面的所有 html 元素。

# windbg - 如何在 ntdll!KiFastSystemCallRet 禁用中断

> ID：12147421
> 
> 赞同：1
> 
> 时间：2012-08-27T18:24:23.583
> 
> 标签：windbg

如何禁用调试器中断`ntdll!KiFastSystemCallRet`指令？

例如：

```
7:022> g
eax=7754dcf9 ebx=006a1be8 ecx=006a0e40 edx=006a0d18 esi=80300002 edi=00000000
eip=77736954 esp=004afe0c ebp=004afe28 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!KiFastSystemCallRet:
77736954 c3              ret 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:27:34.000

嗯，它出来了，闯入

```
ntdll!LdrpDoDebuggerBreak+0x2b 
```

是在加载二进制文件时。当您使用 -o 选项调试进程时，您会得到不止一个此类中断，这意味着所有子进程也将附加到调试器。例如：

```
windbg.exe -o MyExecutable.exe 
```

并闯入

```
ntdll!KiFastSystemCallRet 
```

是什么时候发生异常，例如：

```
sxe ld MyBinary.dll 
```

但这可能是多种例外，有关更多信息，请查看[sx、sxd、sxe、sxi、sxn、sxr、sx-](http://msdn.microsoft.com/en-us/library/ff558822%28v=VS.85%29.aspx)文档。

# gruntjs - 将 grunt 与 ant 集成

> ID：12147424
> 
> 赞同：17
> 
> 时间：2012-08-27T18:24:32.690
> 
> 标签：gruntjs

有没有将 grunt 与 ant 集成的好教程？我们当前的构建使用 ant，因为我们是一家 Java 商店。然而，前端开始成为一等公民，我们正在研究使用 node 和 grunt 进行前端构建。我需要将前端构建与 ant 构建集成。我需要知道如何规范化所有自定义任务以及内置 grunt 任务的退出代码，并在 ant 调用 grunt 任务时将控制台输出限制为这些预定义代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-26T14:31:02.890

你可以使用这个宏：

```
<macrodef name="exec-node">
    <attribute name="module" description="The name of the NodeJS module to execute"/>
    <attribute name="failonerror" default="true" description="Fail if the exit code is not 0"/>
    <element name="args" implicit="yes" description="Argument to pass to the exec task"/>
    <sequential>
        <exec executable="cmd.exe" failonerror="@{failonerror}" osfamily="winnt">
            <arg line="/c  @{module}" />
            <args/>

            <!-- Windows cmd output workaround: http://stackoverflow.com/a/10359327/227349 -->
            <!-- Forces node's stderror and stdout to a temporary file -->
            <arg line=" &gt; _tempfile.out 2&lt;&amp;1"/>

            <!-- If command exits with an error, then output the temporary file        -->
            <!-- to stdout delete the temporary file and finally exit with error level 1  -->
            <!-- so that the apply task can catch the error if @failonerror="true"        -->
            <arg line=" || (type _tempfile.out &amp; del _tempfile.out &amp; exit /b 1)"/>

            <!-- Otherwise, just type the temporary file and delete it-->
            <arg line=" &amp; type _tempfile.out &amp; del _tempfile.out &amp;"/>
        </exec>
        <exec executable="@{module}" failonerror="@{failonerror}" osfamily="unix">
            <args/>
        </exec>
    </sequential>
</macrodef> 
```

您可以调用任何命令：例如：

```
<target name="jshint">
    <exec-node module="grunt">
        <arg value="jshint" />
    </exec-node>
</target> 
```

像魅力一样工作：还确保 stderr 也被打印，这是调用 grunt 时的常见问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:37:16.653

Grunt 可以调用命令行，因此您可以轻松地在 grunt 中创建几个任务，这些任务除了通过 shell 执行 ant 任务之外什么都不做。

该`grunt-shell`库使得从 grunt 任务执行外部命令变得特别容易：[https ://github.com/sindresorhus/grunt-shell](https://github.com/sindresorhus/grunt-shell)

但是，由于您在谈论自定义退出代码，因此您可能最终必须编写自己的自定义 grunt 任务，该任务执行 shell 命令，然后查看响应代码（可能使用`grunt.helpers.spawn`帮助程序）：[https://github .com/gruntjs/grunt/blob/master/docs/api_utils.md#gruntutilsspawn](https://github.com/gruntjs/grunt/blob/master/docs/api_utils.md#gruntutilsspawn)

我的建议？我的[组织最近经历了同样的事情](http://mechanics.flite.com/blog/2012/06/19/why-we-use-node-dot-js-and-grunt-to-build-javascript/)，如果可能的话，最好与 ant 彻底断绝关系，并为您的 JavaScript 相关项目完全摆脱它。

Grunt 有一个不断增长和有用的插件库，如果你不能复制你的 ant 构建文件并创建一个 100% 的 javascript 解决方案，我会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T19:42:01.123

您可以使用[http://abc.tools.qafoo.com/](http://abc.tools.qafoo.com/)，其中包含一个 npm 模块 *1)

然后，您唯一需要的是一个自定义目标，例如：

```
…

<target
    name="-mm:compile:main~hooked"
   extensionOf="-compile:main~hook"
    depends="
        -my-compile-npm-hook
    " 
>

<target
    name="-my-compile-npm-hook"
>
    <echo>install local grunt-cli</echo>
    <antcall target="npm:install">
        <param name="in.npm.package.name" value="grunt-cli" />
    </antcall>
</target>

… 
```

之后，您可能会在`.npm/node_modules/.bin/`目录别名中运行 grunt `${npm.local.modulesdir}/.bin/` ^^ 不要错过包含或定义来自的属性`src/main/resources/extensions/npm/npm.properties`

*1):[不幸](https://github.com/Qafoo/build-commons/pull/28)的是，当前的 node.js 版本有问题

# java - 从 JAXB 的 XSD 创建 XML 文件

> ID：12147428
> 
> 赞同：6
> 
> 时间：2012-08-27T18:24:52.660
> 
> 标签：java, xml, xsd, jaxb

我在使用 JAXB 从 XSD 创建 XML 文件时遇到问题，下面是用于创建它的 XSD 文件。（注：为保密起见，名称已编辑）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://ibm.org/seleniumframework" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="Test" type="sel:Test">
        <xs:complexType>
            <xs:choice minOccurs="1" maxOccurs="unbounded">
                <xs:element name="Option1" type="sel:Option1Type" xmlns:sel="http://ibm.org/seleniumframework"/>
                <xs:element name="Option2" type="sel:Option2Type" xmlns:sel="http://ibm.org/seleniumframework"/>
                <xs:element name="Option3" type="sel:ScreensType" xmlns:sel="http://ibm.org/seleniumframework"/>
            </xs:choice>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="ScreensType">
        <xs:sequence>
            <xs:element type="sel:ScreenType" name="Screen" minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ScreenType">
        <xs:sequence>
            <xs:element name="ScreenData" minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
        <xs:attribute type="xs:string" name="name1" use="required" />
        <xs:attribute type="xs:string" name="name2" use="required" />
        <xs:attribute type="xs:string" name="name3" use="required" />
    </xs:complexType>

</xs:schema> 
```

这是我用来尝试创建 XML 的代码：

```
public void generateXml() throws JAXBException, IOException {

            Test test = new Test();
            ScreensType screens = new ScreensType();
            ScreenType screen = new ScreenType();
            screen.setName1("a");
            screen.setName2("b");
            screen.setName3("c");

            File f = new File("new.xml");
            JAXBContext context= JAXBContext.newInstance("com.q1labs.qa.xmlgenerator.model.generatedxmlclasses");
            Marshaller jaxbMarshaller = context.createMarshaller();
            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            jaxbMarshaller.marshal(test, f);
            jaxbMarshaller.marshal(test, System.out);

        } 
```

这是输出

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <Test xmlns="http://ibm.org/seleniumframework"/> 
```

如何获取代码以输出屏幕和屏幕标签及其属性，我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:35:48.560

您创建了一个实例，`Test`但`ScreensType`在将它们编组为 XML 之前从未设置它们的任何属性。以下是更正后的代码。

```
public void generateXml() throws JAXBException, IOException {
    Test test = new Test();
    ScreensType screens = new ScreensType();
    test.getOption1OrOption2OrOption3().add(screens);
    ScreenType screen = new ScreenType();
    screen.setName1("a");
    screen.setName2("b");
    screen.setName3("c");
    screens.getScreen().add(screen);

    File f = new File("new.xml");
    JAXBContext context= JAXBContext.newInstance("com.q1labs.qa.xmlgenerator.model.generatedxmlclasses");
    Marshaller jaxbMarshaller = context.createMarshaller();
    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

    jaxbMarshaller.marshal(test, f);
    jaxbMarshaller.marshal(test, System.out);
} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Test xmlns="http://ibm.org/seleniumframework">
    <Option3>
        <Screen name1="a" name2="b" name3="c"/>
    </Option3>
</Test> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-20T09:35:04.903

After trying for couple of days, eventually i was able to create the xml from xsd properly using the code given below. Hope this helps :

```
 String filename = "<filepath/filename>";

          final Document doc = loadXsdDocument(filename);

       //Find the docs root element and use it to find the targetNamespace
            final Element rootElem = doc.getDocumentElement();
            String targetNamespace = null;
            if (rootElem != null && rootElem.getNodeName().equals("xs:schema")) 
                       {
                targetNamespace = rootElem.getAttribute("targetNamespace");
            }

                        //Parse the file into an XSModel object
            XSModel xsModel = new XSParser().parse(filename);

                        //Define defaults for the XML generation
            XSInstance instance = new XSInstance();
            instance.minimumElementsGenerated = 1;
            instance.maximumElementsGenerated = 1;
            instance.generateDefaultAttributes = true;
            instance.generateOptionalAttributes = true;
            instance.maximumRecursionDepth = 0;
            instance.generateAllChoices = true;
            instance.showContentModel = true;
            instance.generateOptionalElements = true;

                        //Build the sample xml doc
                        //Replace first param to XMLDoc with a file input stream to write to file
            QName rootElement = new QName(targetNamespace, "<xsd file name>");
            XMLDocument sampleXml = new XMLDocument(new StreamResult(System.out), true, 4, null);
            instance.generate(xsModel, rootElement, sampleXml);
        } catch (TransformerConfigurationException e) 
                {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static Document loadXsdDocument(String inputName) {
        final String filename = inputName;

        final DocumentBuilderFactory factory = DocumentBuilderFactory
                .newInstance();
        factory.setValidating(false);
        factory.setIgnoringElementContentWhitespace(true);
        factory.setIgnoringComments(true);
        Document doc = null;

        try {
            final DocumentBuilder builder = factory.newDocumentBuilder();
            final File inputFile = new File(filename);
            doc = builder.parse(inputFile);
        } catch (final Exception e) {
            e.printStackTrace();
            // throw new ContentLoadException(msg);
        }

        return doc;
    } 
```

# maven - 当项目位于子目录中时，如何将 mvn:release 与 GitHub 一起使用？

> ID：12147429
> 
> 赞同：1
> 
> 时间：2012-08-27T18:25:02.863
> 
> 标签：maven, plugins, version-control, github, release

我正在尝试将 mvn 发布插件与我的 github 项目 [https://github.com/inder123/playn-ext](https://github.com/inder123/playn-ext)

Java 项目位于 playn-ext 的子目录中，在 playn-headless-android 下。要使用 mvn release 插件，我需要设置 pom 的 scm 部分。这是我最初写的：

```
<scm>
  <connection>scm:git:git@github.com:inder123/playn-ext.git</connection>
  <url>scm:git:git@github.com:inder123/playn-ext.git</url>
  <developerConnection>scm:git:git@github.com:inder123/playn-ext.git</developerConnection>
</scm> 
```

但是，mvn 发布（从 playn-headless-android 运行时）失败，因为项目 pom 在顶层不可用。

如何配置 scm 部分？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:59:04.450

一种方法是在 playn-ext 目录中创建一个父 pom。但是，在这种情况下， mvn release 似乎只提交父项目。

# junit - 使用TestNG，是否可以动态更改测试名称？

> ID：12147435
> 
> 赞同：5
> 
> 时间：2012-08-27T18:25:44.780
> 
> 标签：junit, testng

使用 TestNG，是否可以使用如下方法动态更改测试名称？

```
@Test(testName = "defaultName", dataProvider="tests")
public void testLogin( int num, String reportName )
{
    System.out.println("Starting " + num + ": " + reportName);
    changeTestName("Test" + num);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T19:50:02.970

不，但是您的测试类可以实现`org.testng.ITest`并覆盖 getTestName() 以返回您的测试名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-17T09:20:48.763

For anybody still facing this.
This can be done by implementing the `org.testng.ITest` class and overriding the getTestName() method just like as @Cedric mentions.
To make the test name dynamic you can use a locally created `testName` variable In addition.
Below is all you need to do

```
import java.lang.reflect.Method;
import org.testng.ITest;
import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;

public class MyTestClass implements ITest {

    @Test(dataProvider = "/* yourDataProvider */")
    public void myTestMethod() {
        //Test method body
    }

    @BeforeMethod(alwaysRun = true)
    public void setTestName(Method method, Object[] row) {
        //You have the test data received through dataProvider delivered here in row
        String name = resolveTestName(row);
        testName.set(name);
    }

    @Override
    public String getTestName() {
        return testName.get();
    }
    private ThreadLocal<String> testName = new ThreadLocal<>();
} 
```

This way you should be able to generate the testName dynamically

# java - android中的setImageresource - 如何将它用于循环中的许多图片

> ID：12147437
> 
> 赞同：0
> 
> 时间：2012-08-27T18:26:01.680
> 
> 标签：java, android

这是一个相当简单的问题。我在可绘制文件夹中有 5 个 imageViews 和 5 个图像。ImageViews 被命名`imageView1`......`imageView5`并且图像被命名`image1`......`image5`

我想如何优雅地编写以下内容：

```
 imageView1.setImageResource(R.drawable.image1)
  imageView2.setImageResource(R.drawable.image2)
  imageView3.setImageResource(R.drawable.image3)
  imageView4.setImageResource(R.drawable.image4)
  imageView5.setImageresource(R.drawable.image5) 
```

如您所知，不仅有 5 个 imageView，而且还有更多，我想循环编写它。我遇到问题是因为`R.drawable.imageX`整数不是字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:39:50.910

```
 //Declaration 

 private int[] tabDrawables = new int[] {
                    R.drawable.image1,R.drawable.image2,
                    R.drawable.image3, R.drawable.image4,
                    R.drawable.image5};

     private ArrayList<ImageView> listImages = new ArrayList<ImageView>();

    //When you find your images on the onCreate method
    //add all images here

    listImages.add(imageView1);
    listImages.add(imageView2);
        ...

    for (int i = 0; i < tabDrawables.length; i++) {
         listImages.get(i).setImageResource(tabDrawables[i]);
} 
```

# c# - c#线程安全日志记录问题不使用单例

> ID：12147445
> 
> 赞同：2
> 
> 时间：2012-08-27T18:26:53.893
> 
> 标签：c#, logging, thread-safety, locks

我正在用 C# 创建一个日志记录类，我需要它是线程安全的。我已经实现了 TextWriter.Synchronized 和锁，但是我遇到了一个非常奇怪的问题，锁似乎不起作用。

我不想使用单例或静态类，因为我希望能够在任何给定时间拥有此日志记录类的多个实例，并且我想根据日志的文件名同步线程。因此，如果我有 30 个线程和 3 个不同的 Log 类实例都使用相同的日志文件，它将正确同步并且没有任何问题。以下是我到目前为止的想法。我省略了一些不相关的代码，例如构造函数和关闭/处置。

```
public class Log : IDisposable
{
    public enum LogType
    {
        Information,
        Warning,
        Error
    }

    private FileStream m_File;
    private TextWriter m_Writer;
    private string m_Filename;

    //this is used to hold sync objects per registered log file
    private static SortedList<string, object> s_SyncObjects = new SortedList<string, object>();
    //this is used to lock and modify the above variable
    private static readonly object s_SyncRoot = new object();

    public void WriteLine(Log.LogType MsgType, string Text)
    {
        //this is the problem i think, the lock isn't functioning correctly
        //see below this code for an example log file with issues
        lock (Log.s_SyncObjects[this.m_Filename])
        {
            this.m_Writer.WriteLine(DateTime.Now.ToString("MM/dd/yyyy HH:mm:ss:fffffff") + " " + MsgType.ToString() + ": " + Text);
        }

        return;
    }

    public void Open(string Filename)
    {
        //make filename lowercase to ensure it's always the same
        this.m_Filename = Filename.ToLower();
        this.m_File = new FileStream(Filename, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        this.m_Writer = TextWriter.Synchronized(new StreamWriter(this.m_File) { AutoFlush = true });

        //lock the syncroot and modify the collection of sync objects
        //this should make it so that every instance of this class no matter
        //what thread it's running in will have a unique sync object per log file
        lock (Log.s_SyncRoot)
        {
            if (!Log.s_SyncObjects.ContainsKey(this.m_Filename))
                Log.s_SyncObjects.Add(this.m_Filename, new object());
        }
    }
} 
```

为了测试这一点，我创建了 3 个指向同一个日志文件的记录器实例，创建 30 个线程并为每个线程分配一个记录器（按 1、2、3、1、2、3 的顺序），然​​后我运行所有30 线程，直到我按 q。

这对于在日志文件中逐行写入并保持写入发生的时间以正确的顺序非常有用，但这是我在日志文件中得到的内容。似乎该线程覆盖了日志文件的一部分，并且它似乎发生在不同线程上的不同记录器实例上，而不是不同线程上的相同记录器实例。下面的日志文件包含创建条目的时间、记录器 ID（基于 1）、线程 ID（基于 0）和消息“test”。

```
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3469116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3479116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3479116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3479116 Information: LOGID: 1, THREADID: 9, MSG: test
08/27/2012 11:47:34:3479116 Information: LOGID08/27/2012 11:47:34:3479116 Information: LOGID: 3, THREADID: 23, MSG: test
08/27/2012 11:47:34:3479116 08/27/2012 11:47:34:3509118 Information: LOGID: 1, THREADID: 0, MSG: test
08/27/2012 11:47:34:3509118 Information: LOGID: 1, THREADID: 0, MSG: test
08/27/2012 11:47:34:3509118 Information: LOGID: 1, THREADID: 0, MSG: test
08/27/2012 11:47:34:3509118 Information: LOGID: 1, THREADID: 0, MSG: test
08/27/2012 11:47:34:3509118 Information: LOGID: 1, THREADID: 0, MSG: test 
```

请注意，其中 2 行已损坏。我猜这是由于锁不能正常工作，或者是我误用了锁。我也不想使用排队或任何类型的单例。如果我将 WriteLine 中的锁更改为 m_SyncRoot 变量并使其成为非静态变量，则似乎不会发生这种行为。我不知道为什么会这样，但对我来说，这似乎不是我想做的。我也不想单独锁定静态 m_SyncRoot，因为如果我有 3 个记录器实例指向 3 个不同的日志文件，那么每个实例都会无缘无故地阻止另一个。

我对此很迷茫，我完全搞砸了吗？

如果有人需要，这里是生成线程的测试类

```
public class LogTest
{
    private Log m_Log1;
    private Log m_Log2;
    private Log m_Log3;
    private Thread[] m_Threads;

    private const int THREAD_COUNT = 30;
    private bool m_Done;

    public LogTest()
    {
        this.m_Log1 = new Log();
        this.m_Log2 = new Log();
        this.m_Log3 = new Log();

        this.m_Log1.Open("test.txt");
        this.m_Log2.Open("test.txt");
        this.m_Log3.Open("test.txt");

        this.m_Threads = new Thread[THREAD_COUNT];
        this.m_Done = false;
    }

    public void run()
    {
        for (int i = 0; i < THREAD_COUNT; i++)
        {
            Thread th = new Thread(new ParameterizedThreadStart(this.LogThread));
            this.m_Threads[i] = th;
        }

        for (int i = 0; i < THREAD_COUNT; i++)
        {
            int logId = 1;
            Log temp = this.m_Log1;
            if ((i % 3) == 1)
            {
                temp = this.m_Log2;
                logId = 2;
            }
            else if ((i % 3) == 2)
            {
                temp = this.m_Log3;
                logId = 3;
            }

            this.m_Threads[i].Start(new object[] { logId, i, temp });
        }

        ConsoleKeyInfo key = new ConsoleKeyInfo();
        while ((key = Console.ReadKey()).KeyChar != 'q')
            ;

        this.m_Done = true;
    }

    private void LogThread(object state)
    {
        int loggerId = (int)((object[])state)[0];
        int threadId = (int)((object[])state)[1];
        Log l = (Log)((object[])state)[2];

        while (!this.m_Done)
        {
            l.WriteLine(Log.LogType.Information, String.Format("LOGID: {0}, THREADID: {1}, MSG: {2}", loggerId, threadId, "test"));
        }
    }
} 
```

**编辑：**按照建议将静态 m_ 更改为 s_ 并将 AutoFlush 属性添加到 StreamWriter；将其设置为 true... 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:39:06.983

我解决了这个问题！

线程同步正常工作，TextWriter.Synchronized() 也是如此，所以问题根本不是线程。考虑到这一点：

我创建了 Log 类的 3 个实例并将它们全部指向“test.txt”

```
Log log1 = new Log();
Log log2 = new Log();
Log log3 = new Log();

log1.Open("test.txt"); //new file handle as instance member
log2.Open("test.txt"); //new file handle as instance member
log3.Open("test.txt"); //new file handle as instance member 
```

在每次调用 Open() 时，我都会打开同一个文件的新文件句柄，因此我有 3 个唯一且独立的文件句柄。每个文件句柄或 Stream 都有它自己的文件指针，它在我读取或写入时沿着流搜索。

因此，如果我们有以下内容：

```
log1.WriteLine("this is some text"); //handled on thread 1
log2.WriteLine("testing"); //handled on thread 2 
```

如果线程 1 开始写入文件并完成文件内容将是

*这是一些文字*

当线程 2 开始写入时，由于文件句柄和流是唯一的，log1 的文件指针的当前位置为 16，而 log2 的指针仍为 0，因此在 log2 完成写入后，生成的日志文件将读取：

**测试** *一些文本*

所以，我需要做的就是确保每个日志文件只打开 1 个唯一的 FileStream 并像以前一样进行同步。现在效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:08:08.720

我认为您的锁工作正常，但根据文档， TextWriter.Flush 实际上并没有做任何事情，因此在您释放锁之前它实际上并没有刷新缓冲区。这是[链接]。[1](http://msdn.microsoft.com/en-us/library/system.io.textwriter.flush%28v=vs.110%29.aspx)

看起来您可以通过在 Open 方法中的流写入器上使用 AutoFlush 来解决问题。

```
this.m_Writer = TextWriter.Synchronized(new StreamWriter(this.m_File){AutoFlush=true}) 
```

# php - Facebook 注销不会在我的应用中完全删除用户

> ID：12147446
> 
> 赞同：-1
> 
> 时间：2012-08-27T18:26:59.053
> 
> 标签：php, facebook, facebook-graph-api

我有我用来在我的应用程序上对 facebook 用户进行身份验证的 facebook_sdk。一切都很好，但是当用户注销 facebook 时，他已注销，但他的信息仍在我的应用程序中。所以我想在他注销时终止会话。所以你能帮我吗？我看过很多相关的帖子，但没有找到我的案例的正确答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:40:07.577

> 所以我想在他注销时终止会话。

在创建注销 URL 时提供一个`redirect_uri`参数，并在其中放置一个调用`session_destroy()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:19:04.253

Facebook SDK 不会在我的应用程序中终止会话，因此我在**base_facebook.php**中编辑了 getLogoutUrl 方法，现在它很好。

```
public function getLogoutUrl($params=array()) {
  session_destroy();
    return $this->getUrl(
      'www',
      'logout.php',
      array_merge(array(
        'next' => $this->getCurrentUrl(),
        'access_token' => $this->getUserAccessToken(),
      ), $params)
    );
  } 
```

# ruby - 从Ruby中的字符串中删除非UTF字符？

> ID：12147449
> 
> 赞同：38
> 
> 时间：2012-08-27T18:27:11.423
> 
> 标签：ruby, regex, string

如何从 ruby​​ 字符串中删除非 UTF8 字符？我有一个字符串，其中包含例如“xC2”。我想从字符串中删除该字符，使其成为有效的 UTF8。

这个：

```
text.gsub!(/\xC2/, '') 
```

返回错误：

```
incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string) 
```

我也在查看 text.unpack('U*') 和 string.pack ，但没有得到任何结果。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-27T20:48:18.110

You can use encode for that. `text.encode('UTF-8', :invalid => :replace, :undef => :replace)`

For more info look into [Ruby-Docs](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-encode)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-27T19:32:28.927

你可以这样做

```
# encoding: utf-8

class String
  def validate_encoding
    chars.select(&:valid_encoding?).join 
  end
end

puts "testing\xC2 a non UTF-8 string".validate_encoding
#=>testing a non UTF-8 string 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T19:24:02.623

您可以使用`/n`, 如

```
text.gsub!(/\xC2/n, '') 
```

强制正则表达式对字节进行操作。

你确定这是你想要的吗？[U+80, U+BF] 范围内的任何 Unicode 字符都将具有`\xC2`UTF-8 编码形式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-27T20:25:54.390

试试Iconv

```
1.9.3p194 :001 > require 'iconv'
# => true 
1.9.3p194 :002 > string = "testing\xC2 a non UTF-8 string"
# => "testing\xC2 a non UTF-8 string" 
1.9.3p194 :003 > ic = Iconv.new('UTF-8//IGNORE', 'UTF-8')
# => #<Iconv:0x000000026c9290> 
1.9.3p194 :004 > ic.iconv string
# => "testing a non UTF-8 string" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-23T14:24:15.577

你的文本有 ASCII-8BIT 编码，而不是你应该使用这个：

```
String.delete!("^\u{0000}-\u{007F}"); 
```

它将达到同样的目的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-17T14:37:34.653

我发现这个问题的最佳解决方案是对同一问题的回答：[https](https://stackoverflow.com/a/8711118/363293) ://stackoverflow.com/a/8711118/363293 。

简而言之：`"€foo\xA0".chars.select(&:valid_encoding?).join`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-11T07:41:29.207

```
data = '' if not (data.force_encoding("UTF-8").valid_encoding?) 
```

# animation - 如何以编程方式使用 xna 为 fbx 模型设置动画

> ID：12147450
> 
> 赞同：1
> 
> 时间：2012-08-27T18:27:10.623
> 
> 标签：animation, xna, 3dsmax, fbx

我有从 3ds max 导出的 fbx 模型。我有从动作捕捉会话中提取的 3d 坐标。我想使用这些 3d 坐标为模型设置动画。谷歌搜索后，我发现 xna 可用于此目的。

我找到了有关[digitalrun](http://www.digitalrune.com/Support/Blog/tabid/719/EntryId/152/Real-Time-Motion-Capture-using-Kinect-and-XNA.aspx)的教程，该教程使用 kinectxna 捕捉运动并使用 xna 为 .fbx 模型制作动画。但我无法构建它，因为它需要 kinect 硬件元素。

[我在这里](http://blog.nuclex-games.com/tutorials/graphics/mesh-based-bone-animation/)找到了另一个教程。我是xna的新手。我很难理解这一点。有人能指出我使用 xna 解释 .fbx 模型的骨骼动画的正确教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:57:32.717

您可以从这个示例开始了解动画的工作原理：http: [//xbox.create.msdn.com/en-us/education/catalog/sample/skinned_model](http://xbox.create.msdn.com/en-us/education/catalog/sample/skinned_model)

动画数据包含在模型本身中。但是您可以更改一些代码以使用您的 3d 坐标。

另外...我找到了一个动画库。[XN动画库](http://xnanimation.codeplex.com/)

PS 搜索“蒙皮模型”可以找到很多动画教程和库

# spring - 是否可以像在 JSF 中一样在 Spring MVC 中使用某些属性类型的文件来指定页面导航？

> ID：12147451
> 
> 赞同：1
> 
> 时间：2012-08-27T18:27:11.787
> 
> 标签：spring, spring-mvc

我正在使用 spring mvc 建立一个网站。只是我建立了登录屏幕和相关的控制器和服务。

现在在验证用户凭据时，如果给定密码错误，那么它应该导航回 login.jsp 页面。如果输入正确，那么它应该导航到 userHomepage.jsp 页面。

我已经这样做了，如下所示，

```
try {

        loginService.checkUserValidity(userId, password);
        return new ModelAndView("userHomePage");  //if all the user credentials are good then redirect the user to User Home Page 
    } catch (UserNotExistsException e) {
        loginResult = e.toString();
        return new ModelAndView("login", "loginResult", loginResult);
    } catch (InvalidPasswordException e) {
        loginResult = e.toString();
        return new ModelAndView("login", "loginResult", loginResult);
    } 
```

在上面的代码片段中，我在 ModelAndView 中硬编码导航页面文件名（如登录、userHomePage 等）。

对它们进行硬编码是正确的方法吗？是否可以像在 JSF 中一样在 Spring MVC 中使用某些属性类型的文件来指定页面导航？spring MVC webflow 是唯一的目的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:48:59.210

拥有指定的视图并不罕见。

如果您希望在 XML 文件（如 JSF）中指定复杂的导航，那么 Spring Webflow 适合您。设置起来可能很棘手，但为复杂的导航提供了一个很好的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:51:42.093

您是否设置了[Spring Security](http://static.springsource.org/spring-security/site/tutorial.html)？用户在未经授权时被发送到登录页面（表单），否则被发送到他请求的页面。

# c# - O(1) 中的 C# IEnumerable.toArray()

> ID：12147452
> 
> 赞同：1
> 
> 时间：2012-08-27T18:27:13.207
> 
> 标签：c#, big-o, toarray

我一直在玩 BlockingCollection 类，我想知道为什么 ToArray() 方法是 O(n) 操作。来自 Java 背景的 ArrayList 的 ToArray() 方法在 O(1) 中运行，因为它只返回它使用的内部数组 (elementData)。那么为什么他们在世界上迭代所有项目，并在 IEnumerable.ToArray 方法中创建一个新数组，而他们可以覆盖它并返回集合使用的内部数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T18:28:47.357

> 来自 Java 背景的 ArrayList 的 ToArray() 方法在 O(1) 中运行，因为它只返回它使用的内部数组 (elementData)。

不，真的没有。它创建数组的副本。从[文档中`ArrayList.toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28%29)：

> 以正确的顺序（从第一个元素到最后一个元素）返回包含此列表中所有元素的数组。
> 
> 返回的数组将是“安全的”，因为此列表不维护对它的引用。（换句话说，这个方法必须分配一个新数组）。因此，调用者可以自由修改返回的数组。

所以基本上，你的问题的前提在 Java 意义上是有缺陷的。

现在，除此之外，[`Enumerable.ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)（ 上的扩展方法`IEnumerable<T>`）*通常*是 O(N)，因为不能保证序列甚至由数组支持。当它由 支持时`IList<T>`，它用于[`IList<T>.CopyTo`](http://msdn.microsoft.com/en-us/library/0efx51xw.aspx)使事情更高效，但这是一个特定于实现的细节，仍然不会将其转换为 O(1) 操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:29:32.180

[`ArrayList.toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28%29)不是**O(1)**，它不只是返回其内部数组。你读过 API 规范吗？

> 返回的数组将是“安全的”，因为此列表不维护对它的引用。（换句话说，这个方法必须分配一个新数组）。因此，调用者可以自由修改返回的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:38:52.660

首先，没有要返回的数组。`BlockingCollection<T>`使用类型对象`IProducerConsumerCollection<T>`作为其内部存储，并且不能保证所使用的具体类型将由数组支持。例如，默认构造函数使用 a `ConcurrentQueue<T>`，它将其数据存储在数组的链表中。即使在奇怪的情况下，有一个代表集合的全部内容的数组隐藏在其中的某个地方，它也不会通过`IProducerConsumerCollection<T>`接口公开。

其次，即使假设首先要返回一个数组（实际上没有），这也不是一件安全的事情。如果调用代码对数组进行任何修改，它将破坏集合的内部状态。

# .net - 基于属性的 ComboBox 的默认值

> ID：12147460
> 
> 赞同：0
> 
> 时间：2012-08-27T18:27:54.190
> 
> 标签：.net, wpf, xaml, data-binding, combobox

我有一个数据绑定的组合框，如下所示：

```
 <ComboBox x:Name="MyEmployee" DisplayMemberPath="Name" ItemsSource={Binding Path=MyEmployeeList}"/> 
```

DataContext 如下所示：

```
MyDataContext = new DataContext
{
  MyEmployeeList = {
  new Employee{ Name = "Vishnu", Id = 1 },
  new Employee{ Name = "Satyam", Id = 2 },
  },

  PermanentEmployee = "Vishnu";
}; 
```

我希望能够根据另一个属性的值设置 ComboBox 的默认值：“PermanentEmployee”。

可以安全地假设“PermanentEmployee”将属于“EmployeeList”中的“Name”属性之一。

如何为 ComboBox 设置这样的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:51:50.077

您可以使用`SelectedItem`, 或`SelectedValue`和`SelectedValuePath`

由于 WPF 通过引用比较对象，`SelectedValue`因此仅在`.Equals()`of 项为真时才有效，因此如果您正在比较对象，那么您必须将您的`SelectedItem`点指向与`ItemsSource`. 例如，

```
MyEmployeeList = {
    new Employee{ Name = "Vishnu", Id = 1 },
    new Employee{ Name = "Satyam", Id = 2 },
};

// Won't work
PermanentEmployee = new Employee{ Name = "Vishnu", Id = 1 };

// Works
PermanentEmployee = MyEmployeeList.FirstOrDefault(p => p.Name == "Vishnu"); 
```

根据您在问题中显示的代码，您最好使用`SelectedValue`和`SelectedValuePath`

```
<ComboBox x:Name="MyEmployee" 
          DisplayMemberPath="Name" 
          ItemsSource="{Binding Path=MyEmployeeList}"
          SelectedValue="{Binding PermanentEmployee}"
          SelectedValuePath="Name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:56:11.987

您将使用 SelectedValue 属性，例如：

```
<ComboBox x:Name="MyEmployee" DisplayMemberPath="Name" ItemsSource="{Binding Path=MyEmployeeList}" Height="25" Width="50" SelectedValue="{Binding Path=PermanentEmployee}"/> 
```

修改的：

正确忽略了这一点，在视图模型中将 PermanentEmployee 设为 Employee 数据类型。例子：

```
 public Employee PermanentEmployee
    {
        get;
        set;
    } 
```

然后在您的构造函数中执行以下操作：

PermanentEmployee = MyEmployeeList.Where(r => r.Name == "Vishnu").Single();

# ios - 亚马逊网络服务 - 我需要什么？

> ID：12147469
> 
> 赞同：1
> 
> 时间：2012-08-27T18:28:31.660
> 
> 标签：ios, web-services, amazon-s3, amazon-ec2, amazon-web-services

很抱歉解释了很长时间，但我几天来一直在努力寻找正确的举动，任何帮助将不胜感激。

我的 IOS 应用程序将每天使用，图像和一些数据将显示给用户，并将被保存不再连接。因此，用户每天将使用大约 30kb。

现在，为了进行测试，我正在使用 MSSQL 和 Web 服务的基本托管计划。在 SQL Server 上，我有 4 个表和平均 5 列（我的意思是它不是一个复杂的数据库）（而且我还有一个子查询）。我正在使用 .net Web 服务从 IOS 应用程序进行通信。最后，托管一天的一张图片。

我试图解释基本但根据我的大客户预计在短时间内至少达到100万用户。

所以我想从 AWS 开始不要失败，但我真的不知道我需要哪些产品/设置（从少数用户到数百万用户）以及如何开始使用 AWS EC2。我还想说明在 AWS 的文档和谷歌搜索之后，我很困惑。

至少请给我指路。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:49:58.243

您希望在 webtier 和数据库资源中进行自动缩放。您可能还需要高可用性（即跨可用区、跨区域部署）。这个[答案](https://stackoverflow.com/a/11623221/877115)可能会帮助您指出正确的方向。从 ElasticBeanstalk 和 RDS 开始（如果你负担得起的话）。它们都抽象出大量的自动缩放。

还要密切关注[ElasticBeanstalk 架构概述。](https://stackoverflow.com/questions/11444005/connecting-to-mysql-on-aws-elastic-beanstalk/11471408#11471408)它将帮助您区分应用程序的 Web 层、任何应用程序层和堆栈的数据库层。

# javascript - 无法让 ClientContext.executeQuery() 在 javascript 中工作

> ID：12147472
> 
> 赞同：4
> 
> 时间：2012-08-27T18:28:38.827
> 
> 标签：javascript, sharepoint-2010

我从共享点列表中获取信息，然后我想使用该数据。问题是我需要在使用 Sharepoint 服务器之前更新数据，但我无法让 executeQuery() 工作。我可以让 executeQueryAsync() 工作。这是我的代码：

```
// Global variables;
var context;
var web; 
var list;
var howManyItem = 0;
var allItems;
var randNums = [];

// Initializes the variables; Sets listname; Gets all items; 
function init(){

    context = new SP.ClientContext.get_current();
    web = context.get_web();

    // Enter the list name;
    this.list = web.get_lists().getByTitle('LetsTalkAdded');

    // Get item count in the query/list;
    var query = SP.CamlQuery.createAllItemsQuery();
    allItems = list.getItems(query);
    context.load(allItems, 'Include(Title)');
    context.executeQueryAsync(Function.createDelegate(this, this.success), Function.createDelegate(this, this.failed)); 
} 
```

这很好用，但是当我将最后一行更改为：

```
context.executeQuery(Function.createDelegate(this, this.success), Function.createDelegate(this, this.failed)); 
```

它不再起作用，但我不能异步运行它们。如果我这样做了，那么依赖于该信息的代码部分将不起作用。为什么 executeQuery() 函数不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T16:24:25.193

我一直在尝试使用 ExecuteQuery 而不是 Async 版本的类似方法。根据我的发现，JSOM 不支持非异步版本。所以你必须使用异步版本。

看看他的 6 号 [。http://blogs.msdn.com/b/sharepointdev/archive/2011/07/19/working-with-the-ecmascript-client-object-model-jsom-in-sharepoint-2010-第 3 部分-nikhil-sachdeva.aspx](http://blogs.msdn.com/b/sharepointdev/archive/2011/07/19/working-with-the-ecmascript-client-object-model-jsom-in-sharepoint-2010-part-3-nikhil-sachdeva.aspx)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-10-11T20:15:01.360

executeQueryAsync 无法填充全局变量。它的唯一用途是向用户显示警报。除此之外没有任何用处。

# c - 在方法中使用 void * 作为 this 指针与在调用父方法时使用 my_class * 和强制转换有什么优缺点？

> ID：12147474
> 
> 赞同：0
> 
> 时间：2012-08-27T18:28:48.883
> 
> 标签：c, oop

我目前在 C 中使用 OOP 技术，并且我使用了在其结构中具有父类实例的子类的已知习语，如下所示：

```
struct parent{
    void (*doSomething)(struct parent *parent);
};

struct child{
    struct parent base;
    int (*doSomethingCooler)(struct child *child);
}; 
```

现在，我的方法以它们所属的类为前缀：

```
void parent_doSomething(struct parent *parent);
int child_doSomethingCooler(struct child *child); 
```

随着重载，我有

```
void child_doSomethingCool(struct parent *parent); 
```

我在子构造函数上设置为 parent->doSomething。

无论如何，当我有一个子实例并且我想调用父方法时，就会出现问题。立即，我必须将我的实例指针强制转换（C 中的 dynamic_cast 类型）到父类类型，这很快污染了我的代码。

第二个想法是定义所有方法来接收 void * "this" 参数，并在内部将它们转换为正确的类。这简化了客户端代码的使用，但将代码暴露给令人讨厌的错误，例如传递无效引用或错误类型的引用。

每种实施方式的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:18:43.200

使用 C11 的新类型通用特性，您可以统一访问父部件：

```
#define getParent(X)        \
_Generic((X),               \
    parent*: (X),           \
    child*: (&(X)->base))) 
```

然后你可以用宏重载你的函数名

```
#define doSomething(X) doSomething(getParent(X)) 
```

正如您从这些示例中看到的那样，这对于通过指针调用“方法”的 OO 表示法不太适用，例如`p->doSomething()`，但这可能是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:32:01.503

我想到的一个解决方案是为每个类添加一个 MAGIC WORD，并在运行时检查它们。我可以通过保护这个“特性”避免在发布版本上编译来避免内存浪费和处理开销。

通过这种方式，我可以使用这些类简化客户端代码，并保护自己免受不良代码的影响。

# android - 从 url 设置选项卡图标图像

> ID：12147476
> 
> 赞同：0
> 
> 时间：2012-08-27T18:28:58.427
> 
> 标签：android, android-tabhost, android-imageview

我有一个应用程序，它有一组选项卡，其中的图像设置为 TabIndecator。我想从 URL 中获取图像并将 TabIndecator 图像设置为为该特定选项卡指定的 URL。有没有办法这样做？我可以使用 ImageView 并将其设置为 TabIndecator 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:39:29.183

> 我想从 URL 中获取图像并将 TabIndecator 图像设置为为该特定选项卡指定的 URL。有没有办法这样做？

不是直接，您必须将图像作为 a 下载到设备`Bitmap`，将其包装在 a`BitmapDrawable`中，并将其设置为`TabSpect.setIndicator()`

> 我可以使用 ImageView 并将其设置为 TabIndecator 吗？

当然，如果您愿意，`TabSpec.setIndicator()`可以将 a`View`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:40:09.243

此方法将允许您从图像的 URL 获取本地位图。我的评论是西班牙语，但我希望这个例子无论如何都会有用。确保在 AsyncTask 或类似的（不是在 UI 线程上）运行它：

```
private static final int IO_BUFFER_SIZE = 8 * 1024;
private static final int MINIMO_TAM = 10;
public static final int MAXIMO_TAM = 640;

public static Bitmap loadRemoteImage(CharSequence urlImagen) {
    if (null == urlImagen) {
        return null;
    }

    Bitmap bm = null;
    InputStream is = null;
    BufferedInputStream bis = null;

    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.addRequestInterceptor(new GzipHttpRequestInterceptor());
    httpclient.addResponseInterceptor(new GzipHttpResponseInterceptor());

    try {
        String urlSinEspacios = urlImagen.toString().replace(" ", "+");

        // Hacer la llamada
        HttpGet httpget = new HttpGet(urlSinEspacios);
        HttpEntity entity = httpclient.execute(httpget).getEntity();

        is = entity.getContent();
        bis = new BufferedInputStream(is, IO_BUFFER_SIZE);
        //Obtener solo el tamaño
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(bis, null, o);
        try {
            bis.close();
            is.close();
        } catch (Exception e) {
        }

        //Calcular mejor escala
        int scale = 1;
        if (o.outHeight > MAXIMO_TAM || o.outWidth > MAXIMO_TAM) {
            scale = (int) Math.pow(2, (int) Math.round(Math.log(MAXIMO_TAM / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        //Descargar el real
        entity = httpclient.execute(httpget).getEntity();
        is = entity.getContent();
        bis = new BufferedInputStream(is, IO_BUFFER_SIZE);

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inTempStorage = new byte[16 * 1024];
        options.inSampleSize = scale;
        bm = BitmapFactory.decodeStream(bis, null, options);
        // Finalizado
        httpclient.getConnectionManager().shutdown();
    } catch (Exception e) {

        bm = null;
    } finally {
        try {
            bis.close();
            is.close();
            // Finalizado
            httpclient.getConnectionManager().shutdown();
        } catch (Exception e) {
        }
    }

    return bm;
} 
```

然后，您可以使用 BitmapDrawable 包装此 Bitmap 并使用：

```
tabHost.newTabSpec("TODO").setIndicator("TODO", TODO).setContent(TODO); 
```

# c# - 即使我没有同时运行多个东西，表单也会在长时间进程发生时冻结

> ID：12147477
> 
> 赞同：1
> 
> 时间：2012-08-27T18:29:04.697
> 
> 标签：c#, multithreading, forms, freeze

```
private void btnUpload_Click(object sender, EventArgs e)
{
    progressbar.value = 10;

    RunLongProcess();

    progressbar.value = 20;

    RunAnotherLongProcess();

    progressbar.value = 50;

    RunOneMoreLongProcess();

    progressbar.value = 100;
} 
```

上面代码的问题是应用程序冻结了，我看不到进度条正常工作。

处理这种情况的正确方法是什么？考虑到我不想同时运行两件事，我不确定为什么会发生这种情况。一次是一件事。我需要刷新应用程序或类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:30:55.597

事情正在冻结*正是*因为你没有“一次运行多个事情”。

您正在事件处理程序中为单击按钮执行长时间运行的操作。在该事件处理程序返回之前，UI 将被阻止。

尝试将长时间运行的进程放在另一个线程中，例如使用[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)或[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

另一个线程可以更新进度条。但是，请记住，单独的线程需要正确访问 UI 线程。确切的机制取决于您是否在谈论 WinForms、WPF 或其他东西（未在您的问题中指定）。

这是我最喜欢的从 WinForms 的非 UI 线程更新控件的方法：

[https://stackoverflow.com/a/3588137/141172](https://stackoverflow.com/a/3588137/141172)

**更新**

这是一个例子。我手边没有 IDE，所以可能会有一些小问题。

```
private BackgroundWorker worker = new BackgroundWorker();

public MyForm() // Your form's constructor
{
    InitializeComponent();
    worker.WorkerReportsProgress = true;
    worker.WorkerSupportsCancellation = true;
}

private void btnUpload_Click(object sender, EventArgs e)
{
    if (!worker.IsBusy) // Don't start it again if already running
    {
        // Start the asynchronous operation.
        // Maybe also disable the button that starts background work (btnUpload)
        worker.RunWorkerAsync();
    }
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    worker.ReportProgress(10);

    RunLongProcess();

    worker.ReportProgress(20);

    RunAnotherLongProcess();

    worker.ReportProgress(50);

    RunOneMoreLongProcess();

    worker.ReportProgress(100); 
}

// This event handler updates the progress. 
private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressbar.value = e.ProgressPercentage;
}

// This event handler deals with the results of the background operation. 
private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Inform the user that work is complete.
    // Maybe re-enable the button that starts the background worker
} 
```

# php - Zend 更改 div 上的选择选项会更新下面 div 上的不同表单

> ID：12147481
> 
> 赞同：0
> 
> 时间：2012-08-27T18:29:10.540
> 
> 标签：php, zend-framework

我在一个 DIV 上有一个选择下拉菜单，并希望用户进行选择，当发生这种情况时，根据他们选择的选择，下面的 DIV 上会出现一个不同的表单。想要做到这一点而不必发帖（页面刷新）。

这是我的 /views/scripts/postjob/index.phtml

```
<div id="post_job">
<?php echo $this->form->setAction($this->url()); ?>
</div>
<div id="display">

</div> 
```

这是控制器

```
class PostJobController extends Zend_Controller_Action
{

public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    $form = new Application_Form_DivForm();

    $business = new Application_Form_BusinessCardForm();
    $calendar = new Application_Form_CalendarForm();
    $brochure = new Application_Form_BrochureForm();
    $this->view->form=$form;       

}

} 
```

现在这是我的 /forms/DivForm

```
class Application_Form_DivForm extends Zend_Form
{
public function init()
{

    $this->setName("Business Card");
    $this->setMethod('post');   

    $this->addElement('select','type',
        array(
        'label'        => 'Post Job (select)',
        'onchange'      => 'showForm(this.value)',
        'value0'        => 'Select',
        'multiOptions' => array(
        'value1'    => 'Business Cards',
        'value2'   => 'Calendars',
        'value3'  => 'Brochures',
    ),
)
);

}

} 
```

我确信有不止一种方法可以做到这一点，但试图找到一些简单的方法。也许只是将一个变量从 index.phtml 传递回控制器，然后我可以执行 if 语句并选择要在视图中包含的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:33:32.280

这实际上在 PHP 中很简单，在 ZF 操作中更容易（我还没有做 JS）。我经常用 PHP 做这种事情，（我希望你不介意刷新）。

在控制器动作中完成这一点只是一个简单的开关：

```
public function IndexAction()
    {
        $form = new Application_Form_DivForm();
        $form->setAction('/postjob/index');
        $this->view->form=$form;

        //put in the if->isPost() and if->isValid() as needed.
        switch ($form->getValue('type')) {
            case ('Business Cards'):
                $this->view->form2 = new Application_Form_BusinessCardForm();
                break;
            case ('Calendars'):
                $this->view->form2 = new Application_Form_CalendarForm();
                break;
             case ('Brochures'):
                $this->view->form2 = new Application_Form_BrochureForm();
                break;
            default:
                $this->view->form2 = '';
                break;
        }
    } 
```

你的观点可能是这样的：

```
<div id="post_job">
    <?php echo $this->form ?>
</div>
<div id="display">
    <?php if (!empty($this->form2)): ?>
    <?php echo $this->form2 ?>
    <?php endif ?>
</div> 
```

像这样的东西可能会起作用，我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:01:49.970

能够使用 AJAX 回发到另一个控制器操作，然后将数据返回到 AJAX 来解决这个问题。当所有这些子表单都被动态创建时，仍然必须弄清楚如何提交所有这些子表单。

# language-agnostic - 从python中的二进制文件中提取zlib压缩数据

> ID：12147484
> 
> 赞同：6
> 
> 时间：2012-08-27T18:29:28.573
> 
> 标签：language-agnostic, zlib, binaryfiles, compression

我的公司对 Electromiography 数据使用旧文件格式，该文件已不再生产。但是，维护复古兼容性有一些兴趣，因此我正在研究为该文件格式编写阅读器的可能性。

通过分析用 Delphi 编写的非常复杂的前源代码，文件读取器/写入器使用 ZLIB，并且在 HexEditor 内部看起来有一个二进制 ASCII 文件头（“播放器”、“分析器”等字段易于阅读），后跟一个包含原始数据的压缩字符串。

我的疑问是：我应该如何确定：

*   如果是压缩流；
*   压缩流从哪里开始，在哪里结束；

来自维基百科：

> zlib 压缩数据通常使用 gzip 或 zlib 包装器编写。包装器通过添加标头和尾标来封装原始 DEFLATE 数据。这提供了流识别和错误检测

这相关吗？

我很乐意发布更多信息，但我不知道什么是最相关的。

感谢您的任何提示。

编辑：我有工作应用程序，可以使用它来记录任何时间长度的实际数据，如有必要，可以获取小于 1kB 的文件。

* * *

一些示例文件：

一个新创建的，没有数据流：[https ://dl.dropbox.com/u/4849855/Mio_File/HeltonEmpty.mio](https://dl.dropbox.com/u/4849855/Mio_File/HeltonEmpty.mio)

保存非常短（1 秒？）的数据流后与上述相同：[https ://dl.dropbox.com/u/4849855/Mio_File/HeltonFilled.mio](https://dl.dropbox.com/u/4849855/Mio_File/HeltonFilled.mio)

一个不同的，来自名为“manco”而不是“Helton”的患者，流更短（非常适合十六进制查看）：[https ://dl.dropbox.com/u/4849855/Mio_File/manco_short.mio](https://dl.dropbox.com/u/4849855/Mio_File/manco_short.mio)

说明：每个文件应该是一个病人（一个人）的文件。在这些文件中，保存了一个或多个检查，每个检查由一个或多个时间序列组成。提供的文件仅包含一项检查和一个数据系列。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T00:35:03.267

首先，为什么不扫描文件以查找所有有效的 zip 流（对于小文件并找出格式已经足够了）：

```
import zlib
from glob import glob

def zipstreams(filename):
    """Return all zip streams and their positions in file."""
    with open(filename, 'rb') as fh:
        data = fh.read()
    i = 0
    while i < len(data):
        try:
            zo = zlib.decompressobj()
            yield i, zo.decompress(data[i:])
            i += len(data[i:]) - len(zo.unused_data)
        except zlib.error:
            i += 1

for filename in glob('*.mio'):
    print(filename)
    for i, data in zipstreams(filename):
        print (i, len(data)) 
```

看起来数据流包含 little-endian 双精度浮点数据：

```
import numpy
from matplotlib import pyplot

for filename in glob('*.mio'):
    for i, data in zipstreams(filename):
        if data:
            a = numpy.fromstring(data, '<f8')
            pyplot.plot(a[1:])
            pyplot.title(filename + ' - %i' % i)
            pyplot.show() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T22:45:59.463

zlib 是使用 [DEFLATE](http://en.wikipedia.org/wiki/Deflate)算法压缩的数据的瘦包装器，并在[RFC1950](https://www.rfc-editor.org/rfc/rfc1950#page-4)中定义：

> ```
>  A zlib stream has the following structure:
> 
>        0   1
>      +---+---+
>      |CMF|FLG|   (more-->)
>      +---+---+
> 
>   (if FLG.FDICT set)
> 
>        0   1   2   3
>      +---+---+---+---+
>      |     DICTID    |   (more-->)
>      +---+---+---+---+
> 
>      +=====================+---+---+---+---+
>      |...compressed data...|    ADLER32    |
>      +=====================+---+---+---+---+ 
> ```

因此，它在原始 DEFLATE 压缩数据之前添加至少两个（可能是六个）字节和带有 [ADLER32校验和的 4 个字节。](http://en.wikipedia.org/wiki/Adler-32)

第一个字节包含**CMF**（压缩方法和标志），分为**CM**（压缩方法）（前 4 位）和**CINFO**（压缩信息）（后 4 位）。

从这里可以清楚地看出，不幸的是，zlib 流的前两个字节可能会根据使用的压缩方法和设置而有很大差异。

幸运的是，我偶然发现了 ADLER32 算法的作者 Mark Adler 的一篇文章，他在其中[列出了这两个起始字节的最常见和不太常见的组合](http://groups.google.com/group/comp.compression/msg/f1d83521ee85a348)。

顺便说一句，让我们看看如何使用 Python 来检查 zlib：

```
>>> import zlib
>>> msg = 'foo'
>>> [hex(ord(b)) for b in zlib.compress(msg)]
['0x78', '0x9c', '0x4b', '0xcb', '0xcf', '0x7', '0x0', '0x2', '0x82', '0x1', '0x45'] 
```

因此 Python 的`zlib`模块（使用默认选项）创建的 zlib 数据以 **`78 9c`**. 我们将使用它来创建一个脚本，该脚本编写一个自定义文件格式，包含一个序言、一些 zlib 压缩数据和一个页脚。

然后，我们编写第二个脚本，扫描文件以查找该双字节模式，开始解压缩后面的所有内容作为 zlib 流，并确定流的结束位置和页脚的开始位置。

**创建.py**

```
import zlib

msg = 'foo'
filename = 'foo.compressed'

compressed_msg = zlib.compress(msg)
data = 'HEADER' + compressed_msg + 'FOOTER'

with open(filename, 'wb') as outfile:
    outfile.write(data) 
```

在这里，我们`msg`使用 zlib 对其进行压缩，并在将其写入文件之前用页眉和页脚将其包围。

在此示例中，页眉和页脚的长度是固定的，但它们当然可以具有任意的未知长度。

现在对于尝试在此类文件中查找 zlib 流的脚本。因为对于这个例子，我们确切地知道我只使用了一个标记，但显然列表`ZLIB_MARKERS`可以填充上面提到的帖子中的所有标记。

**身份文件**

```
import zlib

ZLIB_MARKERS = ['\x78\x9c']
filename = 'foo.compressed'

infile = open(filename, 'r')
data = infile.read()

pos = 0
found = False

while not found:
    window = data[pos:pos+2]
    for marker in ZLIB_MARKERS:
        if window == marker:
            found = True
            start = pos
            print "Start of zlib stream found at byte %s" % pos
            break
    if pos == len(data):
        break
    pos += 1

if found:
    header = data[:start]

    rest_of_data = data[start:]
    decomp_obj = zlib.decompressobj()
    uncompressed_msg = decomp_obj.decompress(rest_of_data)

    footer = decomp_obj.unused_data

    print "Header: %s" % header
    print "Message: %s" % uncompressed_msg
    print "Footer: %s" % footer

if not found:
    print "Sorry, no zlib streams starting with any of the markers found." 
```

这个想法是这样的：

*   从文件的开头开始并创建一个两字节的搜索窗口。

*   以一个字节为增量向前移动搜索窗口。

*   对于每个窗口，检查它是否匹配我们定义的两个字节标记中的任何一个。

*   如果找到匹配项，记录起始位置，停止搜索并尝试解压缩后面的所有内容。

现在，找到流的结尾并不像寻找两个标记字节那么简单。zlib 流既不以固定的字节序列终止，也不在任何头字段中指示它们的长度。相反，它由一个四字节的 ADLER32 校验和终止，该校验和必须与此时的数据匹配。

它的工作方式是内部 C 函数`inflate()`在读取流时不断尝试解压缩流，如果遇到匹配的校验和，则向其调用者发出信号，表明其余数据不属于zlib 流了。

在 Python 中，当使用解压缩对象而不是简单地调用`zlib.decompress()`. 调用`decompress(string)`一个`Decompress`对象将解压缩一个 zlib 流`string`并返回作为流的一部分的解压缩数据。流之后的所有内容都将被存储`unused_data`并可以在之后检索。

这应该在使用第一个脚本创建的文件上产生以下输出：

```
Start of zlib stream found at byte 6
Header: HEADER
Message: foo
Footer: FOOTER 
```

该示例可以很容易地修改为将未压缩的消息写入文件而不是打印它。然后你可以进一步分析以前zlib压缩的数据，并尝试在你分离出来的页眉和页脚中识别元数据中的已知字段。

# usb - USB驱动器开发（管理LED等）

> ID：12147487
> 
> 赞同：0
> 
> 时间：2012-08-27T18:29:39.697
> 
> 标签：usb, usb-drive, led, usb-flash-drive

我找到了一个带有 4GB 存储空间的旧 USB 闪存驱动器，我想知道我是否可以管理它的 LED 以显示我是否收到了电子邮件或其他东西。如果我可以访问 USB 驱动器的更多有用部分，我很想听听！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:37:50.770

直接管理它 - 不。（灯光由闪光灯控制器控制，不是电脑）

但是您可以创建一个脚本来读取和写入文件到闪存驱动器，从而在您收到邮件时打开和关闭灯。（这最终是你想要做的）

并不是说我会推荐这个，因为它会占用处理器上的 IO 时间，并且会导致计算机在指示灯闪烁时运行速度变慢。

如果您的计算机上有一个并行端口 - 您可以将 LED 直接连接到该端口，并且您不会占用处理器时间来写入文件。

[http://www.epanorama.net/circuits/lptout.c](http://www.epanorama.net/circuits/lptout.c) http://smendes.com/el31p/parallel.htm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:41:43.343

如果您打算花一些钱购买一个 Arduino 并编写一个 C# 程序，以便在需要时使用 COM 端口与之通信。

[http://arduino.cc/en/Guide/Howto](http://arduino.cc/en/Guide/Howto)

# c++ - C ++ - CPP和H中定义的内联有什么区别

> ID：12147489
> 
> 赞同：4
> 
> 时间：2012-08-27T18:29:42.440
> 
> 标签：c++, inline-functions

这不是一个“我遇到这个问题”的问题，而是一个“我真的想了解该语言如何更好地工作”的问题。

我最近开始在给定类的 .cpp 文件中遇到内联功能的定义。我想了解内联功能的定义点之间的区别实际上是什么。在对 CPP 中定义的内联进行对象级别分析时，在 C++ 中声明的内联（与在 .h 中定义相反）似乎有更高的百分比被优化为映射函数，而不是被合法内联 - 是这是主要的区别，或者这背后是否还有其他我没有看到的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:37:38.460

没有区别。`inline`是对编译器的提示，但现在并不是特别重要，因为编译器非常擅长在没有您帮助的情况下确定是否内联扩展函数（请参阅`register`关键字）。

`inline`还告诉编译器不同翻译单元中的多个定义是可以的（只要它们相同），当您将内联函数放入头文件时需要这样做。

当在 .cpp 文件中定义内联函数时，其定义仅在该文件中可见，因此从其他源文件调用它将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:32:41.913

`inline`*如果每个翻译单元只有一个定义，*函数就没有意义，因此将其放在头文件中是有意义的，该定义可以在其中重复使用。当一个`inline`函数只在一个源文件中使用时，在本地定义它是有意义的。这都是上下文的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:42:01.313

差异很可能是因为您的编译器没有进行“链接时间”/“整个程序”优化。这是编译器在查看整个程序而不是单个翻译单元的同时执行优化的时候。即使在支持它的编译器中，它也通常不会默认打开，因为它通常涉及非常高的内存使用率。

仅在翻译单元级别进行优化时，无法内联在其他源文件中定义的函数，因为该定义不可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T18:48:57.430

如果在调用之前而不是之后定义内联函数，则编译器更容易内联。由于头文件通常包含在源代码的顶部，因此更容易满足此条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-08T07:48:59.933

从技术上讲，*没有*区别。

虽然我对它们的优化了解不多，但想想看……预处理器将首先扩展它在 .cpp 文件

中找到的 .h文件。`#include`然后*它将*呈现给编译器。所以在技术上根本没有区别。

但是，有一个规则：

> `inline`函数必须在调用它的每个编译单元中定义。（当然，必须遵循 ODR）。

这是因为，每个编译单元都由编译器程序的单独实例处理。

因此，通常，内联函数定义在头文件中，该头文件包含在每个调用该函数的 .cpp 文件中。

# actionscript-3 - AS3 OOP 主体、结构和组织

> ID：12147490
> 
> 赞同：0
> 
> 时间：2012-08-27T18:29:48.233
> 
> 标签：actionscript-3, oop, structure, organization, code-organization

改进我的 OOP 结构，并尝试使代码的显示尽可能直观，使用基本的 OOP 原则，这肯定有帮助，但我的手艺只到此为止。我希望改进我的实践：

```
package
{
import flash.display.*;
import flash.text.*;

public class Button extends Sprite
{   
    protected var _spr:Sprite    = new Sprite();
    protected var _tf :TextField = new TextField();

    protected var c   :Number;
    protected var xx  :Number;
    protected var yy  :Number;
    protected var w   :Number;
    protected var h   :Number;
    protected var t   :String;
    protected var a   :Number;
    protected var l   :Number;
    protected var lC  :Number;

    function Button
        (
        _col:Number,                                          //beginFill
        _x:Number, _y:Number, _w:Number, _h:Number,           //drawRect
        _t:String = "",                                       //TextField (optional)
        _a:Number = 1,                                        //beginFill (optional)
        _l:Number = 0, _lC:Number = 0xFFFFFF                  //lineStyle (optional)
        )
    {
        c      = _col;
        xx     = _x;
        yy     = _y;
        w      = _w;
        h      = _h;
        t      = _t;
        a      = _a;
        l      = _l;
        lC     = _lC;

        _spr.addChild(_tf);

        draw();
    }

    public function draw ():void
    {
        _spr.graphics.clear    ();
        _spr.graphics.lineStyle(l, lC);
        _spr.graphics.beginFill(c);
        _spr.graphics.drawRect (xx, yy, w, h);

            var f:TextFormat = new TextFormat;
                f.font = "Arial";

            _tf.text     = t;
            _tf.autoSize = TextFieldAutoSize.LEFT;
            _tf.x        = xx + w/2 - _tf.textWidth  / 2;
            _tf.y        = yy + h/2 - _tf.textHeight / 1.5;
            _tf.width    = w - 2;
            _tf.height   = h - 2;
            _tf.alpha    = 0.75;

            _tf.setTextFormat(f);

            _tf.selectable   = false;
            _tf.mouseEnabled = false;

        _spr.graphics.endFill ();

    }

    /* ----------------------- *
     *         GETTERS         *
     * ----------------------- */

    //OVERRIDE

    override public function get x      () :Number {return (xx)}
    override public function get y      () :Number {return (yy)}
    override public function get width  () :Number {return (w)}
    override public function get height () :Number {return (h)}

    //SUPPLEMENTARY

    public function get col             () :Number {return (c)}
    public function get text            () :String {return (t)}
    public function get line            () :Number {return (l)}
    public function get lineC           () :Number {return (lC)}

    public function get getObj          () :Sprite {return (_spr)}

    /* ----------------------- *
     *         SETTERS         *
     * ----------------------- */

    //OVERRIDE

    override public function set x (_n:Number) :void
    { xx = getObj.x = Math.round(_n - xx) }

    override public function set y (_n:Number) :void
    { yy = getObj.y = Math.round(_n - yy) }

    override public function set width (_n:Number) :void
    { w  = Math.round(_n) }

    override public function set height (_n:Number) :void
    { h  = Math.round(_n) }

    //SUPPLEMENTARY

    public function set col    (_n:Number) :void
    {
        c = _n;
        draw();
    }

    public function set text   (_s:String) :void
    {
        t = _s;
        draw();
    }

    public function set line   (_n:Number) :void
    {
        l = _n;
        draw();
    }

    public function set lineC(_n:Number) :void
    {
        lC = _n;
        draw();
    }
}
} 
```

从上面的 Button 类中，你可以对我的结构和组织做出什么解释？我已经阅读并关注了许多关于如何在逻辑上执行 OOP 的文章，我认为我已经准备好进行一些调整或批评，而不是我对 AS3 中的类应该如何理解的理解（我知道的情况。）

一些具体问题：

1.  当我从主类实例化“按钮”时，我应该将它添加到那里的舞台还是使用 Super 的按钮类本身中？

2.  “1047”错误会被修复吗？除了这里已经提到的之外，还有什么可持续（或更有效）的解决方法？： http: [//curtismorley.com/2008/10/15/actionscript-error-1047-parameter-initializer-unknown-or-is-不是编译时间常数/](http://curtismorley.com/2008/10/15/actionscript-error-1047-parameter-initializer-unknown-or-is-not-a-compile-time-constant/)

3.  为了更新宽度/高度的变化，我必须在从 Override 函数之外专门针对宽度和高度进行修改后调用我的绘图函数。有没有通过 Override 函数调用 draw() 的正确方法？没有提供错误输出，但这样做似乎违反了规则，所以我只是从 Main 调用 draw() 作为 hack 修复。可能在按钮内编写一个函数，绑定到更改属性的事件？

如果有人费心解析这堵文字墙，感谢您的阅读，我感谢您提出的任何批评，无论是严厉的还是其他的 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:44:40.820

首先，您的变量名称不具描述性。如果您要将变量命名为“c”、“t”、“lc”等，至少要添加描述它们用途的内联注释。即使您将填充它们的参数注释得更低，您所做的事情也会产生不必要的开销。

如果您因为 IDE 中的代码完成历来较差而这样做，请使用 Flash Builder 或可以帮助您输入 lineColor、textField 等的优秀代码编辑工具之一。

仔细观察，您似乎至少部分地这样做了，因为您已经颠倒了正常约定，即函数的参数*不*使用下划线，而私有/受保护的存储*应该*使用下划线，否则应该有相同的名称为公共财产。更改您的约定以匹配 AS3 世界的其他部分将大大有助于使您的代码更具可读性。

如果您不想丢失函数参数中的下划线，可以使用 FB 中的代码段将实例变量设置为同名参数。

ActionScript 中的失效非常好理解，所以我不确定您为什么会遇到问题。它看起来像这样：

```
protected function invalidate():void {
  _isInvalid = true;
  addEventListener(Event.ENTER_FRAME, validate);
}

protected function validate(e:Event):void {
  removeEventListener(Event.ENTER_FRAME, validate);
  if (_isInvalid) {
    draw();
  }
  _isInvalid = false;
} 
```

在你现在调用 draw() 的任何地方调用它，它会减少你必须更新显示列表的次数。

MPO 是您不应该有视图类的构造函数参数，因为这使得无法从时间线中使用它们。

您可能会发现，如果您愿意使用时间线，那么很多艰苦的工作都会消失——您只需通过 AS 类添加行为并在 IDE 中绘制图形（使用诸如 9 切片缩放之类的东西） ，过滤器等，以尽量减少维护麻烦）。如果你想要一个看起来不同的按钮，你画一个不同的，附加你的行为类，然后完成。

很多人没有意识到可以在[保持良好的 OOP](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)的同时让时间线接管大部分繁重的工作。希望这能给你你想要的，或者至少给你一些你可以继续前进的搜索词。请注意，如果您有兴趣了解有关利用时间线的更多信息，请回帖。当帖子存档时，该源代码的链接被吃掉了。

# php - 带有 GET 的 PHP 主页脚本不起作用

> ID：12147494
> 
> 赞同：-2
> 
> 时间：2012-08-27T18:29:54.803
> 
> 标签：php

我为我的主页制作了一个简单的 index.php 脚本，但是它不起作用。

```
<?php
$Query = $_GET['p']
if (strtolower($Query) == "about") {
include("About.php")
die()
}
if (strtolower($Query) == "") {
include("Home.php")
die()
}
if ($Query) {
include("Home.php")
die()
}
?> 
```

这是我第一次在 php 中编码，所以我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:35:32.847

首先你需要分号。第二，为什么会死？为什么不做类似的事情。

```
<?php
$Query = $_GET['p']
if (strtolower($Query) == "about") {
    include("About.php");
} else {
    include("Home.php");
}
?> 
```

# mysql - MySQL中“默认数据库”的含义

> ID：12147496
> 
> 赞同：0
> 
> 时间：2012-08-27T18:30:01.377
> 
> 标签：mysql

当我遇到命令中选项的规范时，我正在查看在[dev.mysql](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)中将数据加载到 MySQL 表中和从 MySQL 表中加载数据的规范。它表示如果未使用，则**如果给出的文件名没有前导组件，则服务器在默认数据库的数据库目录中查找该文件**。谁能告诉我这里的**默认数据库**是什么意思，以及如何设置一个？它可以从 MySQL 本身中设置，还是通过某些服务器指令设置？`local``load infile data``local`

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:32:41.257

通常，默认数据库将在您的配置（my.ini/my.cnf/etc）`database`的标题下的参数中指定，如下所示：`[client]`

```
[client] 
database = name_of_default_db 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:32:45.297

默认数据库是您使用`USE`子句调用或在登录时指定的数据库。如果你使用`SELECT * FROM tablename`而不是`SELECT * FROM databasename.tablename`你也使用默认数据库。

**编辑**

只是为了说明这一点：默认数据库不是静态的东西 - 它仅针对已定义会话的定义时间点定义 - 例如，您启动`load data infile`命令的 PIT 和会话。****

# ruby-on-rails-3 - 带有 Mongoid 嵌入式文档的基于键的缓存过期

> ID：12147498
> 
> 赞同：1
> 
> 时间：2012-08-27T18:30:04.237
> 
> 标签：ruby-on-rails-3, caching, mongoid

你将如何设置一个俄罗斯娃娃，如基于密钥的缓存过期与嵌入式文档？如[37 个信号所述](http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui)

我相信`touch`是`belongs_to`在 Mongoid 3.0 中添加的，但是对于嵌入式文档，您将如何处理它？

示例类：

```
class House
  embeds_many :persons
end

class Person
  embedded_in :house
end 
```

看法：

```
<% cache ['v1', house] do %>
  <%= house.some_attribute %>
  <% house.persons.each |person| %>
    <% cache ['v1' person] do %> 
      <%= render 'houses/person', person: person %>
    <% end %>
  <% end %>
<% end %> 
```

概括触摸的最简单方法是什么？所以当我更新一个人时，它嵌入的房子会被触动。

编辑：或者这里的想法是重新渲染所有嵌入式项目相对便宜？当然我可以这样做：

```
class Person
  after_save :touch_house
  def touch_house
    house.touch
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:11:49.423

我使用观察者实现嵌入式触摸的菊花链。

```
class PersonObserver < Mongoid::Observer
  def sweep(person)
    person.house.touch
  end

  alias_method :after_update, :sweep
  alias_method :after_create, :sweep
end 
```

当您更新或创建一个人时，它会触及该人的房子，从而有效地更新房子的 update_at 时间戳。

为了使用观察者，将其添加到您的 application.rb 中：

```
config.mongoid.observers = :person_observer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T14:37:36.833

我定义了这个问题：

```
module ParentTouchable

  extend ActiveSupport::Concern

  def touch_parent
    self._parent.touch
  end

end 
```

然后我将它包含在嵌入式模型中，所以我可以在 after_save 回调中调用 touch_parent。假设我的嵌入式模型是评论：

```
class Comment

  include Mongoid::Document
  include ParentTouchable

  after_save :touch_parent

end 
```

# permissions - 如何允许用户权限在 IIS 6 中回收应用程序池？

> ID：12147500
> 
> 赞同：2
> 
> 时间：2012-08-27T18:30:26.943
> 
> 标签：permissions, iis-6, application-pool

是否可以授予（非管理员）用户权限以回收特定的应用程序池？这是专门针对 IIS 6 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T18:40:51.320

我找到了一种完成这项工作的方法，因为我也找不到简单的方法。我可能遗漏了一些安全问题，因此我会谨慎处理。我的场景涉及一个请求较少访问权限的受信任的非恶意用户。

我使用命令创建了一个批处理文件来重置 IIS 中的应用程序池。从那里我创建了一个运行计划任务，以在计划任务上设置管理员用户来运行该批处理文件。然后，我授予所需用户对该计划任务的读、写和执行安全权限。

然后，我通过 cacls 命令行实用程序授予用户对 c:\windows\tasks 的读取权限。然后让该用户访问控制面板中的计划任务。从那里，他可以手动执行计划任务来重置应用程序池。它可以工作，因为计划任务是在管理员权限下运行的。

您需要确保用户无权修改批处理文件，否则，您基本上已经为他们提供了管理员命令提示符。如果计划任务被修改，则必须重新输入密码（至少在我的服务器 2003 机器上），这样他们就不能只将任务指向任何可执行文件。

# ios - 排队 NSURLRequest 以模拟同步的阻塞请求

> ID：12147512
> 
> 赞同：2
> 
> 时间：2012-08-27T18:31:15.310
> 
> 标签：ios, multithreading, queue, nsurlrequest

我正在与网络控制的硬件设备进行交互。您通过 URL（*例如*，`http://device/on?port=1`或`http://device/off?port=3`）向它发送一个请求以打开和关闭某些东西，然后它发回“成功”或“失败”。然而，它是一个简单的设备，所以在它处理请求时——*即*，直到它返回它正在处理的请求的状态——它将忽略所有后续请求。它不会将它们排队；他们只是迷路了。

所以我需要发送串行、同步的请求。*即*，req#1，等待响应#1，req#2，等待响应#2，req#3，等待响应#3，等等。

我是否需要管理我自己的线程安全请求队列，让 UI 线程将请求推送到队列的一端，并让另一个线程将请求拉出，一次一个，只要前一个完成或超时，并将结果发送回 UI 线程？还是我在 API 中遗漏了一些已经做到这一点的东西？

谢谢！

...R

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:20:03.493

应该工作的是使用一个`NSOperationQueue`实例，以及`NSOperation`执行各种 URL 请求的多个实例。

首先，在类中设置一个队列，将请求排入队列。确保保持对它的强烈引用，即

```
@interface MyEnqueingClass ()

@property (nonatomic, strong) NSOperationQueue *operationQueue;

@end 
```

在实现的某个地方，说`init`方法：

```
 _operationQueue = [[NSOperationQueue alloc] init];
    _operationQueue.maxConcurrentOperationCount = 1; 
```

你基本上想要一个串行队列，因此`maxConcurrentOperationCount`是 1。

设置完成后，您将需要编写如下代码：

```
[self.operationQueue addOperationWithBlock:^{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"my://URLString"]];
    NSError *error;
    NSURLResponse *response;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    if (!responseData)
    {
        //Maybe try this request again instead of completely restarting? Depends on your application.
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            //Do something here to handle the error - maybe you need to cancel all the enqueued operations and start again?
            [self.operationQueue cancelAllOperations];
            [self startOver];
        }];
    }
    else
    {
        //Handle the success case;
    }
}];

[self.operationQueue addOperationWithBlock:^{
    //Make another request, according to the next instuctions?
}]; 
```

通过这种方式，您发送同步`NSURLRequest`s 并可以处理错误情况，包括完全退出并重新开始（带有`-cancelAllOperations`被调用的行）。这些请求将一个接一个地执行。

当然，您也可以编写自定义`NSOperation`子类并将这些实例排入队列，而不是使用块，如果这对您有用的话。

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:00:10.923

您可以使用[NSOperationQueue 类](https://developer.apple.com/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)，也可以使用一些内置的 API，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

# php - php regex bbcode 返回空白

> ID：12147513
> 
> 赞同：-1
> 
> 时间：2012-08-27T18:31:21.620
> 
> 标签：php, regex, bbcode

我有这个 bbcode 标签“remover”，它应该从我的测试文本中删除 bbcode 标签。我得到的只是一无所有。只是空白页，应该用 html 标签替换文本。它出什么问题了。也许有人有更好的脚本可以分享。

```
$str = 'This [b]is just[/b] a [i]test[/i] text!';
function forum_text($str)
{
$str = htmlspecialchars($str);

$str = preg_replace( "#\[url\](?:http:\/\/)?(.+?)\[/url\]#is", "<a href=\"http://$1\">$1</a>", $str ); 
$str = preg_replace( "#\[img\](?:http:\/\/)?(.+?)\[/img\]#is", "<img src=\"http://$1\" />", $str ); 
$str = preg_replace( "#\[b\](.+?)\[/b\]#is", "<strong>$1</strong>", $str ); 
$str = preg_replace( "#\[i\](.+?)\[/i\]#is", "<i>$1</i>", $str ); 
$str = preg_replace( "#\[u\](.+?)\[/u\]#is", "<u>$1</u>", $str ); 

return $str;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:51:55.390

以下是您的代码，前面有一些代码（以确保显示任何错误），后面有一些代码（实际调用您的函数）。

如果这对您不起作用，那么您的问题不在这里，除非您没有工作的 PCRE。

```
error_reporting(-1); ini_set('display_errors', 'On');

$str = 'This [b]is just[/b] a [i]test[/i] text!';
function forum_text($str)
{

    $str = htmlspecialchars($str);

    $str = preg_replace( "#\[url\](?:http:\/\/)?(.+?)\[/url\]#is", "<a href=\"http://$1\">$1</a>", $str );
    $str = preg_replace( "#\[img\](?:http:\/\/)?(.+?)\[/img\]#is", "<img src=\"http://$1\" />", $str );
    $str = preg_replace( "#\[b\](.+?)\[/b\]#is", "<strong>$1</strong>", $str );
    $str = preg_replace( "#\[i\](.+?)\[/i\]#is", "<i>$1</i>", $str );
    $str = preg_replace( "#\[u\](.+?)\[/u\]#is", "<u>$1</u>", $str );

    return $str;
}

echo forum_text($str); 
```

# ruby - 带有独角兽和 memcached 的 Sinatra 应用程序应该返回 304 代码以进行缓存命中？

> ID：12147516
> 
> 赞同：3
> 
> 时间：2012-08-27T18:31:28.950
> 
> 标签：ruby, caching, memcached, sinatra, unicorn

我使用 Sinatra 框架在 Heroku 上设置了我的 ruby​​ 应用程序。Web 服务器是独角兽，当一个请求在 memcached 的缓存中找到它的内容时（通过 Dalli gem），它说它`cache: [GET /] fresh`显然是从缓存中检索内容。但是，当我检查标头时，响应代码始终是 200 而不是 304。我的印象是，当页面从缓存中提供时，它仍然是新鲜的，响应代码应该是 304。

这是否按预期工作，我误解了什么？Unicorn 在缓存中找到某些内容时是否不提供 304 代码？我不应该担心这种事情吗？

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:59:58.277

> 如果客户端已经执行了一个条件 GET 请求并且允许访问，但是文档没有被修改，服务器应该用这个状态码来响应。

[来源](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html "来源")

所以，unicorn 可能没有做它应该做的事情（并且，从语义上讲，响应代码 200 是有道理的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:47:17.430

Unicorn 无法知道您的应用程序如何处理缓存。因此它不能为你设置 etags。

就像 Rajesh 所说，304 是关于浏览器缓存的。您必须在您的应用程序中生成一个 Etag 哈希，然后将其发送到浏览器（通过标头）。

根据这篇文章，浏览器支持 etags ：[Browser support for eTags](https://stackoverflow.com/questions/6247761/browser-support-for) etags。

这是关于 304 的官方文档：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)

编辑：看看这里用 sinatra 实现它：

[http://www.sinatrarb.com/intro#Cache%20Control](http://www.sinatrarb.com/intro#Cache%20Control)

[http://opensoul.org/blog/archives/2011/01/29/etags-with-memcached/](http://opensoul.org/blog/archives/2011/01/29/etags-with-memcached/)

# python - 在 MacOSX Lion 上 pip install django timeout

> ID：12147519
> 
> 赞同：5
> 
> 时间：2012-08-27T18:31:42.820
> 
> 标签：python, django, osx-lion, pip

在 MBP 上，按照说明 (http://techblog.rosedu.org/python-environment.html)，我安装了 Xcode 4.4.1、brew（brew 医生说一切就绪），然后是 python。接下来，我尝试设置 virtualenv：

```
> $MYPYTHON/bin/python distribute_setup.py
> $MYPYTHON/bin/easy_install pip
> $MYPYTHON/bin/pip install virtualenv 
```

然后我创建了一个虚拟环境并尝试安装 django：

```
> $MYPYTHON/bin/virtualenv $MYENV
> $MYENV/bin/pip install Django 
```

它下载了 98%，然后挂了一段时间，最后我得到一个表明超时的回溯：

```
pcm@pcm-mac[302]% $MYENV/bin/pip install django
Downloading/unpacking django
  Downloading Django-1.4.1.tar.gz (7.7Mb): 7.5Mb downloaded
Exception:
Traceback (most recent call last):
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 985, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 1109, in unpack_url
    retval = unpack_http_url(link, location, self.download_cache, self.download_dir)
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/download.py", line 451, in unpack_http_url
    download_hash = _download_url(resp, link, temp_location)
  File "/Users/pcm/Documents/workspace/virtual/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/download.py", line 368, in _download_url
    chunk = resp.read(4096)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 553, in read
    s = self.fp.read(amt)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
timeout: timed out 
```

如果我只是从 /usr/local/bin/ 运行 pip 版本，我会看到同样的情况。我尝试了其他软件包（硒，模拟），它们下载并安装得很好。

我不知道我可能做错了什么，或者如果通过 pip 安装 django 存在一些问题。建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T04:01:55.057

利用：

```
pip --default-timeout=60 install django 
```

# attributes - 如何在不删除“标题”属性的情况下禁用工具提示 [ASP.NET]

> ID：12147520
> 
> 赞同：0
> 
> 时间：2012-08-27T18:31:50.163
> 
> 标签：attributes, tooltip, title, watermark

我有 3 个文本框

```
<asp:TextBox ID="txtTitle" runat="server" class="txtFields" title="Title" />

<asp:TextBox ID="txtName" runat="server" class="txtFields" title="Name" />

<asp:TextBox ID="txtDescription" runat="server" class="txtFields" title="Description" /> 
```

我在这 3 个文本框上使用了水印插件：

```
jQuery('.txtFields').watermark(); 
```

这是插件： [http ://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)

jQuery('.txtFields').watermark(); 使用文本框的标题属性来显示水印，但问题是这也会生成工具提示，这是我不想要的，是否有在不删除标题属性的情况下禁用工具提示？或者无论如何可以在这个插件中使用自定义属性？我的意思是让插件使用另一个属性而不是标题属性。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:44:11.450

看起来水印将允许您指定要在其中显示的任何文本，因此您不会被标题所困扰。您可以使用 jQuery 选择的任何属性都可以用作水印值。问题是没有其他可以添加的属性，并且仍然有很好的兼容代码。最好的办法是给它们一个值，为该值分配一个变量，取消设置并添加水印。就像是：

```
$('input').each(function() {
  var wmark = $(this).val();
  $(this).val('');
  $(this).watermark(wmark);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T17:17:33.950

尝试添加 UseAccessibleHeader = false

像这样：

```
<asp:TextBox ID="txtTitle" runat="server" class="txtFields" title="Title" UseAccessibleHeader = false /> 
```

# c# - EF 5.0 中的链接 OR 条件

> ID：12147521
> 
> 赞同：7
> 
> 时间：2012-08-27T18:31:53.020
> 
> 标签：c#, linq, entity-framework

我会以我正在积极寻找这个问题的解决方案作为序言，但我认为如果堆栈中的某个人已经解决了这个问题，我可能会缩短一些研发时间。（我在网上没有找到任何东西，所以这里是）

在我们正在构建的应用程序框架中有一个案例，我们需要能够接收一组谓词 ( `List<Expression<Func<T,bool>>>`) 并在搜索框架中对其进行解析。

现在我们有能力以这种方式过滤：

```
//Assume predicates is passed as a method argument.
//     of List<Expression<Func<T,bool>>>
//Assume user is passed in as a method argument.
//Assume FilterToUserAccess is a custom extension method that restricts the dataset
//    to access restrictions.
var query = _dbContext.Set<EntityType>()
     .FilterToUserAccess(user);
foreach(var p in predicates){
     query = query.Where(p);
}

return p.ToList(); 
```

我们需要这样做的原因是为了可过滤对象的可扩展性。但是，鉴于 EF 的内置功能，这不可能进行快速搜索。我需要能够做的是：

对象 A（假设它是一辆赛车），我们想在快速搜索框中搜索品牌、型号、车队和车手。因此，如果我输入“Earnhardt”，它将搜索所有赛车实体属性，即品牌、型号、车队和车手。我最终会得到所有的 DEI 汽车以及 Dale Jr。我想使用相同的方法，以便我们可以配置一个可搜索的实体并在应用程序启动时反映搜索配置。理想情况下，我希望通过某种方式使查询看起来类似于：

```
//Assume predicates is passed as a method argument.
//     of List<Expression<Func<T,bool>>>
//Assume user is passed in as a method argument.
//Assume FilterToUserAccess is a custom extension method that restricts the dataset
//    to access restrictions.
var query = _dbContext.Set<EntityType>()
    .FilterToUserAccess(user);
foreach(var p in predicates){
    query = query.Or(p);
}

return p.ToList(); 
```

我意识到我可以做到：

```
_dbContext.Set<EntityType>().Where(predicate1 || predicate2 || predicate3) 
```

但是，这不适用于我们要解决此问题的方法。理想情况下，我们的一个客户站点的管理员可以通过单击进入并配置一个额外的搜索词，以包含在对该实体类型的任何和所有快速搜索中，就像我们目前可以使用使用标准的过滤器一样`.Where(...)`“和”链接逻辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T19:11:32.223

第一个解决方案是失败的，但是通过更多的挖掘，有一个非常简单的解决方案，经过验证并且有效。

**第 1 步：**为 LinqKit 安装 NuGet 包。

**第2步：**享受下面的代码

```
using (ISampleRepository repo = new SampleRepository())
{
    var predicates = new List<Expression<Func<Customer,bool>>>(){
        (x => x.FirstName.Contains(searchValue)),
        (x => x.LastName.Contains(searchValue))
    };

    var lambda = PredicateBuilder.False<Customer>();
    lambda = predicates.Aggregate(lambda, (current, p) => current.Or(p).Expand());

    var query = repo.QueryCustomers().AsExpandable().Include(x => x.Phones).Where(lambda);
    return query.Take(500)
        .ToList()
        .Select(x => x.ToDTO())
        .ToList();
} 
```

这只是尖峰样本，但用一个方法做同样的事情 ->

```
List<T> QuickSearch<T>(string input) ... 
```

将能够使用相同的方法。您有一组仍以表达式形式传入的谓词，然后您使用谓词构建器技巧来拉出查询。然后使用 AsExpandable() 允许您执行使用谓词构建器创建的组合谓词。

希望这不仅对我有帮助，但这是我要使用的解决方案，因为它的代码要少得多。允许您在其他地方构建您的谓词......并且在事后仍然将它们组合在“OR”语句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:12:03.997

正如 Ladislav 所说，您将需要动态生成 LINQ 表达式。这是一个为整数集合动态构建谓词的程序的简单示例：

```
class Program {
    static void Main(string[] args) {

        // Retreive your data source
        List<int> numbers = new List<int>() { 0, 10, 20, 30, 40, 50, 60 };

        // Create a collection of predicates that you would like to chain together.
        ParameterExpression parameterExpression = Expression.Parameter(typeof(int), "x");
        List<Expression> predicates = new List<Expression>();

        // x >= 50
        predicates.Add(Expression.GreaterThanOrEqual(parameterExpression, Expression.Constant(50)));

        // x <= 20
        predicates.Add(Expression.LessThanOrEqual(parameterExpression, Expression.Constant(20)));

        // Build a single predicate by chaining individual predicates together in an OR fashion
        Expression whereFilter = Expression.Constant(false); // Use false a base expression in OR statements

        foreach (var predicate in predicates) {
            whereFilter = Expression.OrElse(whereFilter, predicate);
        }

        // Once the expressions have been chained, create a lambda to represent the whole predicate
        // x => (x >= 50) || (x <= 20)
        Expression<Func<int, bool>> whereLambda = 
            (Expression<Func<int, bool>>)Expression.Lambda(whereFilter, 
                                            new List<ParameterExpression>() { parameterExpression });

        // To use an expression directly, the datasource must be an IQueryable
        // Since I am using List<T> I must call AsQueryable.  This is not necessary
        // if your collection is already IQueryable, like in Entity Framework.
        var results = numbers.AsQueryable().Where(whereLambda);

    }
} 
```

基本上我在这里所做的只是创建几个布尔值 (x >= 50) 和 (x <= 20) 并将它们放在一个集合中。然后通过循环遍历该集合，我将每个语句和 OR 到最后一个语句。结果是一系列通过 OR 链接在一起的布尔语句。然后我将该语句包装在一个 Lambda 表达式中，以便它可以被使用`IQueryable.Where`并将其传递给我的可查询集合。结果是从我的完整集合中过滤的一组整数。

LINQ 表达式至少可以说令人困惑，但它们非常强大且值得了解。请让我知道是否有任何我可以做的事情来帮助理解这个例子。

# android - 使用android的简单计算器不起作用

> ID：12147524
> 
> 赞同：0
> 
> 时间：2012-08-27T18:32:06.767
> 
> 标签：android, android-layout

我是安卓新手。我使用 android 开发了一个简单的计算器，但无法运行它。我在运行它时遇到空指针异常。activity_main.xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/txtCalc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="0"
        />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:layout_weight="1"
         >

        <Button
            android:id="@+id/btnSeven"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="7" />

        <Button
            android:id="@+id/btnEight"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="8"/>

        <Button
            android:id="@+id/btnNine"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="9"/>

        <Button
            android:id="@+id/btnDivide"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="/"/>

        <Button
            android:id="@+id/btnC"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="C"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" 
        android:layout_weight="1"
        >

        <Button
            android:id="@+id/btnFour"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="4"
            />

        <Button
            android:id="@+id/btnFive"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="5"
            />

        <Button
            android:id="@+id/btnSix"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="6"
            />

        <Button
            android:id="@+id/btnMultiply"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="*"
            />

        <Button
            android:id="@+id/btnPerc"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="%"
            />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnOne"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="1"
            />

        <Button
            android:id="@+id/btnTwo"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="2"
            />

        <Button
            android:id="@+id/btnThree"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="3"
            />

        <Button
            android:id="@+id/btnMinus"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="-"
            />

        <Button
            android:id="@+id/btnSqrRoot"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="√"
             />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnZero"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="0"
            />

        <Button
            android:id="@+id/btnDecimal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="."
            />

        <Button
            android:id="@+id/btnPM"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="+/-"
            />

        <Button
            android:id="@+id/btnPlus"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="+"
            />

        <Button
            android:id="@+id/btnEquals"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="="
            />
    </LinearLayout>

</LinearLayout> 
```

MainActivity 文件的内容是

```
 package com.example.calculator;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.View.OnKeyListener;
    import android.widget.Button;
    import android.widget.EditText;

public class MainActivity extends Activity {

    private final String SDK_VERSION = "1";
    private final int MENUITEM_CLOSE = 300;

    /*
     * Edit Text and Button object initialization for simple calculator design.
     */
    private EditText txtCalc = null;
    private Button btnZero = null;
    private Button btnOne = null;
    private Button btnTwo = null;
    private Button btnThree = null;
    private Button btnFour = null;
    private Button btnFive = null;
    private Button btnSix = null;
    private Button btnSeven = null;
    private Button btnEight = null;
    private Button btnNine = null;
    private Button btnPlus = null;
    private Button btnMinus = null;
    private Button btnMultiply = null;
    private Button btnDivide = null;
    private Button btnEquals = null;
    private Button btnC = null;
    private Button btnDecimal = null;
    private Button btnBS = null;
    private Button btnPerc = null;
    private Button btnSqrRoot = null;
    private Button btnPM = null;

    private double num = 0;
    private int operator = 1;
    // 0 = nothing, 1 = plus, 2 = minus, 3 =
    // multiply, 4 = divide
    private boolean readyToClear = false;
    private boolean hasChanged = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTheme(android.R.style.Theme_Black);
        setContentView(R.layout.activity_main);

        this.setTitle("SimpleCalculator " + SDK_VERSION);

        initControls();
        //initScreenLayout();
        reset();
    }
    private void initControls() {
        txtCalc = (EditText) findViewById(R.id.txtCalc);
        btnZero = (Button) findViewById(R.id.btnZero);
        btnOne = (Button) findViewById(R.id.btnOne);
        btnTwo = (Button) findViewById(R.id.btnTwo);
        btnThree = (Button) findViewById(R.id.btnThree);
        btnFour = (Button) findViewById(R.id.btnFour);
        btnFive = (Button) findViewById(R.id.btnFive);
        btnSix = (Button) findViewById(R.id.btnSix);
        btnSeven = (Button) findViewById(R.id.btnSeven);
        btnEight = (Button) findViewById(R.id.btnEight);
        btnNine = (Button) findViewById(R.id.btnNine);
        btnPlus = (Button) findViewById(R.id.btnPlus);
        btnMinus = (Button) findViewById(R.id.btnMinus);
        btnMultiply = (Button) findViewById(R.id.btnMultiply);
        btnDivide = (Button) findViewById(R.id.btnDivide);
        btnEquals = (Button) findViewById(R.id.btnEquals);
        btnC = (Button) findViewById(R.id.btnC);
        btnDecimal = (Button) findViewById(R.id.btnDecimal);
        btnPerc = (Button) findViewById(R.id.btnPerc);
        btnSqrRoot = (Button) findViewById(R.id.btnSqrRoot);
        btnPM = (Button) findViewById(R.id.btnPM);

        btnZero.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(0);
            }
        });
        btnOne.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(1);
            }
        });
        btnTwo.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(2);
            }
        });
        btnThree.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(3);
            }
        });
        btnFour.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(4);
            }
        });
        btnFive.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(5);
            }
        });
        btnSix.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(6);
            }
        });
        btnSeven.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(7);
            }
        });
        btnEight.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(8);
            }
        });
        btnNine.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleNumber(9);
            }
        });
        btnPlus.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleEquals(1);
            }
        });
        btnMinus.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleEquals(2);
            }
        });
        btnMultiply.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleEquals(3);
            }
        });
        btnDivide.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleEquals(4);
            }
        });
        btnEquals.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleEquals(0);
            }
        });
        btnC.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                reset();
            }
        });
        btnDecimal.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleDecimal();
            }
        });
        btnPM.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handlePlusMinus();
            }
        });
        btnBS.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                handleBackspace();
            }
        });
        btnSqrRoot.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                setValue(Double.toString(Math.sqrt(Double.parseDouble(txtCalc
                        .getText().toString()))));
            }
        });
        btnPerc.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                setValue(Double.toString(num
                        * (0.01 * Double.parseDouble(txtCalc.getText()
                                .toString()))));
            }
        });

        txtCalc.setOnKeyListener(new OnKeyListener() {
            public boolean onKey(View v, int i, android.view.KeyEvent e) {
                if (e.getAction() == KeyEvent.ACTION_DOWN) {
                    int keyCode = e.getKeyCode();

                    // txtCalc.append("["+Integer.toString(keyCode)+"]");

                    switch (keyCode) {
                    case KeyEvent.KEYCODE_0:
                        handleNumber(0);
                        break;

                    case KeyEvent.KEYCODE_1:
                        handleNumber(1);
                        break;

                    case KeyEvent.KEYCODE_2:
                        handleNumber(2);
                        break;

                    case KeyEvent.KEYCODE_3:
                        handleNumber(3);
                        break;

                    case KeyEvent.KEYCODE_4:
                        handleNumber(4);
                        break;

                    case KeyEvent.KEYCODE_5:
                        handleNumber(5);
                        break;

                    case KeyEvent.KEYCODE_6:
                        handleNumber(6);
                        break;

                    case KeyEvent.KEYCODE_7:
                        handleNumber(7);
                        break;

                    case KeyEvent.KEYCODE_8:
                        handleNumber(8);
                        break;

                    case KeyEvent.KEYCODE_9:
                        handleNumber(9);
                        break;

                    case 43:
                        handleEquals(1);
                        break;

                    case KeyEvent.KEYCODE_EQUALS:
                        handleEquals(0);
                        break;

                    case KeyEvent.KEYCODE_MINUS:
                        handleEquals(2);
                        break;

                    case KeyEvent.KEYCODE_PERIOD:
                        handleDecimal();
                        break;

                    case KeyEvent.KEYCODE_C:
                        reset();
                        break;

                    case KeyEvent.KEYCODE_SLASH:
                        handleEquals(4);
                        break;

                    case KeyEvent.KEYCODE_DPAD_DOWN:
                        return false;
                    }
                }

                return true;
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, 1, MENUITEM_CLOSE, "Close");

        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case MENUITEM_CLOSE:
            finish();
            break;
        }

        return super.onOptionsItemSelected(item);
    }

    private void handleEquals(int newOperator) {
        if (hasChanged) {
            switch (operator) {
            case 1:
                num = num + Double.parseDouble(txtCalc.getText().toString());
                break;
            case 2:
                num = num - Double.parseDouble(txtCalc.getText().toString());
                break;
            case 3:
                num = num * Double.parseDouble(txtCalc.getText().toString());
                break;
            case 4:
                num = num / Double.parseDouble(txtCalc.getText().toString());
                break;
            }

            String txt = Double.toString(num);
            txtCalc.setText(txt);
            txtCalc.setSelection(txt.length());

            readyToClear = true;
            hasChanged = false;
        }

        operator = newOperator;
    }

    private void handleNumber(int num) {
        if (operator == 0)
            reset();

        String txt = txtCalc.getText().toString();
        if (readyToClear) {
            txt = "";
            readyToClear = false;
        } else if (txt.equals("0"))
            txt = "";

        txt = txt + Integer.toString(num);

        txtCalc.setText(txt);
        txtCalc.setSelection(txt.length());

        hasChanged = true;
    }

    private void setValue(String value) {
        if (operator == 0)
            reset();

        if (readyToClear) {
            readyToClear = false;
        }

        txtCalc.setText(value);
        txtCalc.setSelection(value.length());

        hasChanged = true;
    }

    private void handleDecimal() {
        if (operator == 0)
            reset();

        if (readyToClear) {
            txtCalc.setText("0.");
            txtCalc.setSelection(2);
            readyToClear = false;
            hasChanged = true;
        } else {
            String txt = txtCalc.getText().toString();

            if (!txt.contains(".")) {
                txtCalc.append(".");
                hasChanged = true;
            }
        }
    }

    private void handleBackspace() {
        if (!readyToClear) {
            String txt = txtCalc.getText().toString();
            if (txt.length() > 0) {
                txt = txt.substring(0, txt.length() - 1);
                if (txt.equals(""))
                    txt = "0";

                txtCalc.setText(txt);
                txtCalc.setSelection(txt.length());
            }
        }
    }

    private void handlePlusMinus() {
        if (!readyToClear) {
            String txt = txtCalc.getText().toString();
            if (!txt.equals("0")) {
                if (txt.charAt(0) == '-')
                    txt = txt.substring(1, txt.length());
                else
                    txt = "-" + txt;

                txtCalc.setText(txt);
                txtCalc.setSelection(txt.length());
            }
        }
    }

    private void reset() {
        num = 0;
        txtCalc.setText("0");
        txtCalc.setSelection(1);
        operator = 1;
    }
} 
```

谁能告诉我哪里出错了，因为无法弄清楚我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:40:40.467

您声明`Button btnBS`但在调用它的方法之前从未初始化`setOnClickListener`它。

# jquery - 为什么使用带有离线缓存的 jQuery Mobile 时图像不显示？

> ID：12147525
> 
> 赞同：0
> 
> 时间：2012-08-27T18:32:09.960
> 
> 标签：jquery, image, caching, mobile, offline

我正在尝试启用我的 jQuery Mobile Web 应用程序 HTML5 离线缓存。不是为了让它离线工作，而是为了提高返回用户的初始页面加载性能。

我非常接近让它按预期工作，但由于某种原因，我的页面没有显示 jQuery Mobile 的图标图像。这可以通过将 NETWORK * 添加到我的缓存清单来解决，但我希望缓存图像。

我的缓存清单：

```
 CACHE MANIFEST
# rev15
myicon.ico
index_uncompressed.htm
lib/jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.css
lib/jquery.validate-min.js
lib/jquery.mobile.simpledialog2.min.js
/anderswebservice/jquery/lib/jquery-1.7.1.min.js
lib/jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.js
apple-touch-icon-precomposed.png
lib/jquery.mobile-1.1.1/images/icons-18-white.png
lib/jquery.mobile-1.1.1/images/ajax-loader.gifode here 
```

我的 HTML 文件的开头：

```
<!DOCTYPE html> 
<html lang='da' manifest="kiosk.manifest"> 
    <head> 
        <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
        <title>NSF kiosk</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1" /> 

        <!--<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />-->
        <link rel="stylesheet" href="lib/jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" type="text/css" href="lib/jquery.mobile.simpledialog.min.css" />
        <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png"/>
        <link rel="shortcut icon" href="myicon.ico" />

        <!--<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>-->
        <script src="/anderswebservice/jquery/lib/jquery-1.7.1.min.js"></script>
        <!--<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>-->
        <script src="lib/jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.js"></script>

        <script type="text/javascript" src="lib/jquery.validate-min.js"></script>
        <script type="text/javascript" src="lib/jquery.mobile.simpledialog2.min.js"></script> 
```

我可以在 Fiddler 中知道图像精灵 (lib/jquery.mobile-1.1.1/images/icons-18-white.png) 正在正确下载，但 jQuery Mobile 显然无法找到和使用它。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:52:26.387

将以下内容添加到您的 CSS 中：

```
.ui-icon {
    background-image: url(images/icons-18-white.png);
} 
```

# winapi - 如何使用 System::Call 调用 WindowFromPoint windows API 函数

> ID：12147540
> 
> 赞同：0
> 
> 时间：2012-08-27T18:33:16.723
> 
> 标签：winapi, nsis

如何在系统插件语法中将POINT 结构传递给[WindowFromPoint() ？](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633558%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:55:15.173

```
System::Alloc 8
Pop $0
System::Call 'USER32::GetCursorPos(ir0)'
System::Call '*$0(i.r8,i.r9)'
System::Free $0
System::Call 'USER32::WindowFromPoint(ir8,ir9)i.r1'
System::Call 'USER32::GetClassName(ir1,t.r2,i ${NSIS_MAX_STRLEN})'
MessageBox mb_ok "$8x$9: $1=$2" 
```

# c - 检查用户输入的值是否为数字的基本/手动方法

> ID：12147542
> 
> 赞同：2
> 
> 时间：2012-08-27T18:33:28.280
> 
> 标签：c

我已经在这些论坛内外搜索过，但仍然遇到问题。我对C的理解还是很基础的。我正在创建一个小程序，它采用用户输入的 3 个数值，然后计算最高值。我明白了。

我现在想确保用户只输入整数值。我设法让程序继续提示用户重新输入值，直到它在指定的数值范围内（例如，1 到 1000 之间的任何数字，小菜一碟），但这还不够好。我使用 3 个 while 循环来测试每个值，但这仅在输入为整数类型时才有效。

诀窍是我不能使用内置函数。它需要手动（抱歉，选词不当）我尝试使用 char 变量和 x = getchar(); 获取 ASCII 值并在某个条件下对其进行测试，但我无法让它在循环中工作。（当/做时）

我还尝试使用“for 循环”和数组变量，但再次努力让它继续提示用户。

我还尝试测试 scanf 返回的值以查看它是否为整数，但我对正确 C 语法的知识水平是 level: noob。我的循环要么不循环，要么无限循环。

这是一些示例代码：

```
int x, y, z =0;

printf("Enter the first number:\n");
scanf("d", &x);
while (condition) /* Here is where I need to determine that the entered val is false */
{
    printf("Wrong input. Re-enter a valid value.\n");
    x =0;
    scanf("%d", &x); /*user re-prompted */
} 
```

我的想法是我必须使用 ASCII 和循环，但我就是无法做到。此外，输入的值会发送到函数进行比较，然后返回。

有人可以给我一些建议和一些提示吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:23:30.760

```
#include <stdio.h>
#include <limits.h>
#include <ctype.h>

int getInteger(int* err){
    int ch;
    int n;//int32
    int takeNum, sign;
    long long int wk;//long long int as int64

    wk=0LL;
    *err = 0;
    takeNum = 0;//flag
    sign = 1;//minus:-1, other:1
/*  //skip space character
    while(EOF!=(ch=getchar()) && (ch == ' ' || ch == '\t' || ch == '\n'));
    ungetc(ch, stdin);
*/
    while(EOF!=(ch=getchar())){
        if(ch == '-'){
            if(takeNum != 0){//in input number
                *err = 1;
                break;
            }
            if(sign == -1){//already sign
                *err = 2;
                break;
            }
            sign = -1;
            continue;
        }
        if(ch >= '0' && ch <= '9'){//isdigit(ch) in ctype.h
            if(takeNum == 0)
                takeNum = 1;
            wk = wk * 10 + (ch - '0')*sign;
            if(INT_MAX < wk || INT_MIN > wk){//overflow
                *err = 3;
                break;
            }
            continue;
        }
        if(ch != '\n'){//input other [-0-9]
            *err = 4;
        }
        break;
    }
    if(takeNum == 0){//not input number
        *err = 5;
    } else {
        n=wk;
    }
    while(ch != '\n' && EOF!=(ch=getchar()));//skip to newline
    return n;
}

int getValue(const char* redoprompt, int low, int high){
    int num, err=0;

    while(1){
        num = getInteger(&err);
        if(err || low > num || high < num)
            printf("%s", redoprompt);
        else
            break;
    }
    return num;
}

#define max(x,y) ((x)>(y))? (x) : (y)

int main(){
    const char *error_message = "Wrong input. Re-enter a valid value.\n";
    int x, y, z, max;

    x = getValue(error_message, 1, 1000);
    y = getValue(error_message, 1, 1000);
    z = getValue(error_message, 1, 1000);
    max = max(max(x,y), z);
    printf("max:%d\n", max);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:41:44.953

您将不得不使用类似的东西`fgets`，并且[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)：

```
long someValue;

char *bufEnd = NULL;
char buf[128]; // max line size

do {
    printf("enter a value: ");
    fgets(buf, 128, stdin);
    someValue = strtol(buf, &bufEnd, 10); // base 10
} while (bufEnd == buf || *bufEnd != '\n');

printf("got value: %li", someValue); 
```

我们在这里所做的是利用`strtol`的能力来告诉我们它在哪里停止解析，通过传入`bufEnd`.

然后，我们确保 that`bufEnd`不指向开头`buf`（在这种情况下，它不是以数字开头），并检查以确保`bufEnd`指向`\n`或行尾（确保用户没有输入类似 的`123abc`内容，这`strtol`将解释为`123`)。但是，您可能希望先修剪`buf`空白字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:48:06.463

使用“scanf()”，您绝对走在正确的轨道上。只需检查返回值。如果你没有得到预期的 #/values，那么你得到了无效的输入：

```
char found = FALSE;
int ival;
double x;

while (!found)
{
    printf("Please enter a valid integer: ");
    if (scanf("%d", &ival) !=1) {
      printf ("Invalid!  Please re-enter!\n");
      continue;
    }
    printf("Please enter a valid floating point number: ");
    if (scanf("%lf", &x) !=1) {
      printf ("Invalid!  Please re-enter!\n");
      continue;
    }
    found = TRUE;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:55:56.770

这是我的解决方案。它可以安全地防止缓冲区溢出并且简单明了。

```
#include <stdio.h>
#define LEN 10

int main() {
    int a;
    char str[LEN];
    fgets( str, LEN, stdin );
    while ( !sscanf( str, "%d", &a ) )
        fgets( str, 10, stdin );
    printf("Num is : %d\n", a);
    return 0;
} 
```

# objective-c - ObjC：在视图显示之前重新排序控件

> ID：12147544
> 
> 赞同：0
> 
> 时间：2012-08-27T18:33:37.627
> 
> 标签：objective-c, xcode, view, asynchronous, request

我在 requestFinished-Method 中动态创建 TextFields。但是（我认为）由于异步请求，我的视图已经完成加载，因此用户可以看到 TextFields 变得可见并“重新排序”我的按钮（使用 InterfaceBuilder 创建）。

在显示我的观点之前，这是否可能发生。例如使用 MBProgressHUD 直到它完成？

感谢和抱歉英语不好；）问候迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:39:59.227

如果您想在显示视图之前移动控件，然后移动`viewWillAppear`而不是（我假设）您正在执行它的位置`viewDidAppear`。

# wpf - 当该行中项目的属性发生更改时，如何更改 WPF DataGrid 控件中该行的样式

> ID：12147552
> 
> 赞同：4
> 
> 时间：2012-08-27T18:34:07.277
> 
> 标签：wpf, datagrid, styles

我的`DataGrid`WPF 应用程序中有一个包含对象的控件。该对象有一个布尔属性，可以通过用户操作进行更改。当该属性的值更改时，我需要更改行的样式。

我写了一个来自以下的类`StyleSelector`：

```
public class LiveModeSelector : StyleSelector {

    public Style LiveModeStyle { get; set; }
    public Style NormalStyle { get; set; }

    public override Style SelectStyle( object item, DependencyObject container ) {
        DataGridRow gridRow = container as DataGridRow;
        LPRCamera camera = item as LPRCamera;
        if ( camera != null && camera.IsInLiveMode ) {
            return LiveModeStyle;
        }
        return NormalStyle;
    }
} 
```

有问题的 View Model 类实现了 ，并在有问题的属性更改时`INotifyPropertyChanged`引发事件。`PropertyChanged`

```
// Note:  The ModuleMonitor class implements INotifyPropertyChanged and raises the PropertyChanged
// event in the SetAndNotify generic method.
public class LPRCamera : ModuleMonitor, ICloneable {

    . . .

    public bool IsInLiveMode {
        get { return iIsInLiveMode; }
        private set { SetAndNotify( "IsInLiveMode", ref iIsInLiveMode, value ); }
    }
    private bool iIsInLiveMode;

    . . .

    /// </summary>
    public void StartLiveMode() {
        IsInLiveMode = true;

         . . .
    }

    public void StopLiveMode() {
        IsInLiveMode = false;

        . . .
    }
} 
```

当用户执行所需的操作时，属性的值会更改，但样式不会更改。

我在 SelectStyle 方法中放置了一个断点，我看到第一次加载控件时断点被击中，但是当属性的值更改时它没有被击中。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T21:38:28.897

我找到了一种方法，它源于@Rachel 对我的问题的回答。但是，代码细节有些不同，我想确切地展示什么是有效的。

第一步是将两个不同`Styles`的类组合成一个`DataGridRow`类：

```
<Style TargetType="DataGridRow" x:Key="CameraStyle">
    <Setter Property="Foreground" Value="{DynamicResource TextForeground}" />
    <Setter Property="Background" Value="{DynamicResource DataBackground}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=IsInLiveMode}" Value="True">
            <Setter Property="Foreground" Value="Red" />
            <Setter Property="Background" Value="Yellow" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

第二步是将`DataGrid`控件的`RowStyle`属性设置为这种新样式：

```
<DataGrid . . .
          RowStyle={StaticResource CameraStyle}">
          . . .
</DataGrid> 
```

这行得通。当用户将`LPRCamera`与该行相关联的行置于实时模式时，该行的前景和背景会发生变化，当他们将其从实时模式中取出时会恢复正常，这就是我想要的。

谢谢@Rachel！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T19:21:04.820

我不认为 a 会`StyleSelector`监听通知，因此当属性更改`PropertyChange`时它不会重新运行。`IsInLiveMode`

将您的样式放在一个`DataTrigger`基础上`IsInLiveMode`，它会在属性更改通知发出时重新评估。

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridRow}" x:Key="Style1">
        <Setter Property="Background" Value="Red" />
    </Style>
    <Style TargetType="{x:Type DataGridRow}" x:Key="Style2">
        <Setter Property="Background" Value="Blue" />
    </Style>
</DataGrid.Resources>

<DataGrid.Style>
    <Style TargetType="{x:Type DataGrid}">
        <Setter Property="RowStyle" Value="{StaticResource Style1}" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding ElementName=MyDataGrid, Path=DataContext.IsInLiveMode}" Value="True">
                <Setter Property="RowStyle" Value="{StaticResource Style2}" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.Style> 
```

# android - 位图内存不足

> ID：12147554
> 
> 赞同：0
> 
> 时间：2012-08-27T18:34:09.370
> 
> 标签：android, bitmap, out-of-memory

我正在尝试从图库中获取图像（按意图）。
我收到了这个错误：

```
985120-byte external allocation too large for this process.
Out of memory: Heap Size=4871KB, Allocated=2472KB, Bitmap Size=19677KB
VM won't let us allocate 985120 bytes 
```

这是我获取图像的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   ....
   mBitmap = Media.getBitmap(this.getContentResolver(), data.getData());
   ...
} 
```

我该如何解决？

**- - - - 更新 - - - - -**

我注意到，如果我选择预先存在的图像（已安装 HTC 照片），我会收到此错误。如果我选择从相机中挑选的图像，一切正常。

所以，我根据这个[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)更改我的代码：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;

InputStream stream = getContentResolver().openInputStream(data.getData());
mBitmap = BitmapFactory.decodeStream(stream,null,options);
stream.close(); 
```

但是现在位图是 NULL ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:41:05.710

看起来您的应用程序使用了很多高分辨率位图（位图内存分区为 19677KB）。'heap' 和 'allocated' 的 sie 很正常，应该没有问题。确保从内存中删除未使用的位图。您可以通过调用`bitmap.recycle()`或将其引用设置为 null 从内存中释放位图。如果您出于性能原因想要缓存位图，请查看[LruCache 。](http://developer.android.com/reference/android/util/LruCache.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:44:48.457

我总是在一个 while 循环中包装解码，增加 inSampleSize 并捕获 OutOfMemoryError。这将为您提供最大可能的分辨率图像。始终使用 LRU 缓存！

```
 Bitmap image;
    boolean success = false;int counter = 0;
    while (success == false && counter < 10)
    {
        try
        {
            image = BitmapFactory.decodeFile(photoPath, options);
            success = true;
        }
        catch(OutOfMemoryError e)
        {
            System.gc();
            options.inSampleSize++;
            counter++;
        }
    } 
```

# javascript - 确定选择器是什么？

> ID：12147555
> 
> 赞同：1
> 
> 时间：2012-08-27T18:34:17.297
> 
> 标签：javascript, jquery

我跳过了键入时调用的[jQuery源代码的不同区域：](http://code.jquery.com/jquery-latest.js)

```
$('.foo') 
```

或者

```
$('#foo') 
```

尝试确定 jQuery 如何解析选择器（我假设为 charAt() ）但想验证。

我到了这里：

```
 if ( selector.nodeType ) {
        this.context = this[0] = selector;
        this.length = 1;
        return this;
    } 
```

但我有点卡在什么

```
selector.nodeType 
```

做。该[参考资料](http://www.w3schools.com/dom/dom_nodetype.asp)说 nodeType 几乎可以是任何东西......那么他们到底在检查什么？

[jQuery API](http://api.jquery.com/jQuery/)进一步打破了可能性。

总之，这个代码片段试图完成关于选择器变量的什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:36:04.160

`nodeType`表明传递给 jQuery 选择器的对象是一个 DOM 节点（通常是一个元素）。例如，这允许以下构造：

```
$(document) 
```

`document`是表示文档的对象。`$(document)`基于该元素构建一个 jQuery 对象。测试`nodeType`意味着 jQuery 可以检测参数是否是一个元素，如果是，则简单地基于该元素构建选择。

您还可以通过常见的结构看到这一点`$(this)`：

```
$('a').on('click', function() {
    console.log($(this).text()); // builds a jQuery selection based on the this
                                 // object, which is the DOM element that was 
                                 // clicked
}); 
```

# jquery - 如何使用弹出框制作教程？

> ID：12147561
> 
> 赞同：0
> 
> 时间：2012-08-27T18:34:57.370
> 
> 标签：jquery, twitter-bootstrap

我正在尝试向初次使用的用户展示如何使用我的网站。我决定为此使用弹出框。因此，我创建了几个元素，例如：

```
<li><a href="/rss/{{ user_id }}" id="help-rss" rel="popover" data-title="RSS feed" data-placement="bottom" data-trigger="manual" data-content="Use your favourite RSS reader to get our news!<br><br><a href='#' id='help-next-rss'>Next</a>">RSS</a></li> 
```

下面的代码将一一显示弹出框：

```
$('#help-movie').popover('show');

$("#help-next-movie").click(function() {
  $('#help-movie').popover('hide');
  $('#help-subscribe').popover('show');
});
$("#help-next-subscribe").click(function() {
  $('#help-subscribe').popover('hide');
  $('#help-rss').popover('show');
}); 
```

但它不能正常工作 - 显示第一个弹出窗口（`help-movie`），然后我按下一步，显示下一个（`help-subscribe`）；但之后下一步按钮不起作用，`help-rss`不显示。但是，如果我`help-subscribe`先显示，则下一步按钮将起作用并`help-rss`显示。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:50:54.640

我认为如果您调用 .click 时隐藏的元素 id 显示后将不起作用，您需要使用 jquery .on [http://api.jquery.com/on/](http://api.jquery.com/on/)

所以尝试用 .on 替换你的 .click ，如下所示：

```
$('body').on("click", "#help-next-subscribe", function(event){
     $('#help-subscribe').popover('hide');
     $('#help-rss').popover('show');  
}); 
```

.on 基本上告诉浏览器侦听这些元素，因此如果它们突然出现在页面中（例如通过 ajax 请求显示、创建或拉入），您的 jquery 仍将作用于这些元素。

# excel - 将一张excel表格中的列镜像到其他多个excel表格并自动更新

> ID：12147564
> 
> 赞同：1
> 
> 时间：2012-08-27T18:35:11.620
> 
> 标签：excel, vba, mirror, worksheet

我有一个包含多张工作表的 Excel 工作簿。为了这个问题，工作表被命名为 Sheet1、Sheet2、Sheet3 等。我希望将 sheet1 中的 A 列复制到其他工作表中，并且随着新单元格添加到 sheet1 中的 A 列，它们将自动输入到工作簿中的其他工作表中。我不希望为此设置“结束范围；即：A100000”。例如，如果我在 Sheet1 的单元格 A1 中输入 First，单词“First”现在也应该出现在 Sheet2 的单元格 A1 中。我使用了以下代码，它似乎不起作用。任何帮助将不胜感激。

```
Private Sub Worksheet_Change(ByVal Target As Range)
        Call UpdateFromSheet1
End Sub

Sub UpdateFromSheet1(ByVal Sh As Object, ByVal Target As Range)
    If Sh.CodeName = "Sheet1" Then
        If Not Intersect(Target(1, 1), Range("A1:A1000")) Is Nothing Then
            Sh.Range("A1:A1000").Copy Sheet2.Range("A1")
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:00:03.487

**更新**

对于一个干净的**非 VBA**解决方案，您可以使用其他人提到的公式引用，但像这样输入。

在 Sheet2 单元格 A1 =`If(Sheet1!A1="","",Sheet1!A1)`这样您可以填写整个 A 列，如果 Sheet1 有没有数据的行，则不会弹出“0”。

我认为您有大致的想法，但我怀疑您的代码可能没有放在正确的位置。

对于**VBA**解决方案：

**首先**，您不需要从`Worksheet_Change`事件调用 sub（当然，除非您出于其他原因想要使用此 sub 并将变量传递给它。**其次**，如果您将此代码放在“Sheet1 的 VBE 中的工作表对象中” "它会如你所愿：

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)

If Not Intersect(Target, Columns("A")) Is Nothing Then

    Dim wks As Worksheet
    For Each wks In Sheets(Array("Sheet2", "Sheet3"))

        Target.EntireColumn.Copy wks.Columns(1)

    Next

End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:07:34.153

这是excel的一个非常基本的用途。您可以将单元格设置为彼此相等。为此，您绝不需要 VBA 宏。

如果你把它放在 Sheet2 和 Sheet3 的单元格“A1”中：

```
=Sheet1!A1 
```

然后，当您在 A1 中键​​入内容时，它将在第 2 和第 3 页上“镜像”。您可以将其自动填充到第 2 和第 3 页上 A 列中的所有单元格。

您熟悉术语*自动填充*吗？

如果您不理解我刚才所说的任何内容并且您只想运行一个宏然后运行它并开始输入：

```
Sub MacroBasicQuestion()

Dim wbk As Workbook
Set wbk = ThisWorkbook

Dim ws1 As Worksheet
Dim ws2 As Worksheet
Dim ws3 As Worksheet
Set ws1 = wbk.Sheets(1)
Set ws2 = wbk.Sheets(2)
Set ws3 = wbk.Sheets(3)

Dim cell As Range

Set cell = ws2.Range("A1:A1")
ws2.Select
cell.FormulaR1C1 = "=Sheet1!RC"
cell.Select
Selection.AutoFill Destination:=Range("A:A"), Type:=xlFillDefault

Set cell = ws3.Range("A1:A1")
ws3.Select
cell.FormulaR1C1 = "=Sheet1!RC"
cell.Select
Selection.AutoFill Destination:=Range("A:A"), Type:=xlFillDefault

End Sub 
```

祝你好运。

# c++ - C++“更大”函数对象定义

> ID：12147566
> 
> 赞同：5
> 
> 时间：2012-08-27T18:35:25.803
> 
> 标签：c++, stl

```
template <class T> struct greater : binary_function <T, T, bool> {
    bool operator() (const T& x, const T& y) const {
        return x > y;
    }
}; 
```

我在 STL 库中找到了“用于大于不等式比较的函数对象类”的定义。有人可以向我解释一下这段代码是如何工作和编译的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:42:14.797

```
template <class T> // A template class taking any type T
// This class inherit from std::binary_function
struct greater : binary_function <T, T, bool>
{
  // This is a struct (not a class).
  // It means members and inheritens is public by default

  // This method defines operator() for this class
  // you can do: greater<int> op; op(x,y);
  bool operator() (const T& x, const T& y) const {
    // method is const, this means you can use it
    // with a const greater<T> object
    return x > y; // use T::operator> const
                  // if it does not exist, produces a compilation error
  }
}; 
```

这里是定义`std::binary_function`

```
template <class Arg1, class Arg2, class Result>
struct binary_function {
  typedef Arg1 first_argument_type;
  typedef Arg2 second_argument_type;
  typedef Result result_type;
}; 
```

这允许您访问定义 binary_function 的类型

```
greater<int> op;
greater<int>::result_type res = op(1,2); 
```

这相当于

```
std::result_of<greater<int>>::type res = op(1,2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:40:46.410

它是一个模板类，可以用一个类型参数实例化。所以你可以说`greater<int>`,`greater<my_class>`等等。这些实例中的每一个都有一个 operator() ，它接受两个类型的参数`const T&`并返回比较它们的结果。

```
greater<int> gi;
if (gi(1, 2)) {
    // won't get here
} else {
    // will get here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:40:46.827

我不知道你对模板编程和仿函数了解多少。

让我们从函子开始：

```
struct greater {
  bool operator()(const int& x, const int& b) const {
    return x > y;
}

greater g;
g(2,3); // returns false
g(3,2); // returns true 
```

所以仿函数模拟一个函数，你也可以实现 bool g(int x, int y){return x>y;} 并以相同的方式使用它。

函子的好处在于，您还可以在处理更复杂的数据结构时存储一些数据。

然后是模板部分：你想为任何类型编写相同的函子，你不关心类型是 int、float、complexe 对象，代码都是一样的。这就是模板部分的用途。

# c# - 程序似乎不想从文件中读取

> ID：12147568
> 
> 赞同：0
> 
> 时间：2012-08-27T18:35:34.780
> 
> 标签：c#, winforms

我正在读取一个二进制文件，在等待某事发生时，我注意到程序没有做任何事情。

它似乎被卡在执行的某个点上。我在控制台中添加了一些打印语句，并且可以看到它到达了某个点……但似乎不想继续。这是前几行代码：

```
private BinaryReader inFile;
public void Parser(string path)
{
    byte[] newBytes;
    newBytes =  File.ReadAllBytes(path);

    using (MemoryStream ms = new MemoryStream())
    {
        ms.Write(newBytes, 0, newBytes.Length);
        inFile = new BinaryReader(ms);
        inFile.BaseStream.Seek(0, SeekOrigin.Begin);
    }
}

public void ParseFile()
{
  Console.WriteLine("parsing");
  Console.WriteLine("get size to read"); // prints this out
  int sizeToRead = inFile.ReadInt32();
  Console.WriteLine("Size: {0}", sizeToRead); // doesn't print this out
  Console.WriteLine("Done"); // end file processing
} 
```

当我评论阅读时，它工作正常。我将 的内容转储`inFile`到一个新文件中，它与原始文件相同，所以它应该是一个有效的流。

我不确定如何继续调试此问题。有人遇到过类似的问题吗？

编辑：对不起，我发布了一些不同的方法。这是整个方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:42:59.750

一旦你离开`using`街区，`MemoryStream`就会被处置，`BinaryReader`也使你无效。扔掉内存流就是从二进制阅读器下面拉出地毯。如果可以的话，将所有相关的阅读代码移动到一个 using 块中，并将你的代码也包含在一个块`BinaryReader`中。

```
using (var ms = new MemoryStream(File.ReadAllBytes(path)))
using (var inFile = new BinaryReader(ms))
{
    inFile.ReadInt32();
} 
```

您也可以直接从文件中读取，除非您有理由将其全部读入并通过`MemoryStream`.

如果您的代码布局方式使您无法使用`using`，那么您可以跟踪`MemoryStream`和`BinaryReader`对象并实现`IDisposable`。然后稍后对它们调用 Dispose 以进行清理。

如果你不这样做，垃圾收集器*最终*会清理干净，但是调用`Dispose`任何`IDisposable`是好习惯的东西。如果不这样做，您可能会遇到打开文件句柄或 GDI 对象在终结器队列中等待处理的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:02:43.917

尝试仅像这样使用 BinaryReader 而不是也使用 FileStream （如果你是的话）。
如果这不起作用，请尝试其他编码选项，例如`Encoding.Unicode`.

```
 using (BinaryReader inFile = new BinaryReader(File.Open(@"myFile.dat", FileMode.Open),Encoding.ASCII))
        {
            int pos = 0;
            int length = (int)inFile.BaseStream.Length;
            int sizeToRead;
            while (pos < length)
            {
                Console.WriteLine("get size to read"); // prints this out
                sizeToRead = inFile.ReadInt32();
                Console.WriteLine("Size: {0}", sizeToRead); // doesn't print this out, or anything after
            }
            Console.WriteLine("Done"); // end file processing
        } 
```

如果这不起作用，请尝试`File.OpenRead`像这样使用以避免以读取以外的任何其他模式访问文件的可能性：

```
using (BinaryReader inFile = new BinaryReader(File.OpenRead(@"myFile.dat"),Encoding.Unicode)) 
```

# codeigniter - codeigniter 中资产的最佳实践

> ID：12147569
> 
> 赞同：2
> 
> 时间：2012-08-27T18:35:40.693
> 
> 标签：codeigniter

我是 codeigniter 的新手，想知道存储 js/css/images/ 等的最佳位置在哪里？通常我习惯于：

> ```
> /
> --/application
> --/system
> --/public
> ----/css
> ----/js
> ----/images 
> ```

但是使用这种目录结构的最佳方式是什么？我在研究中发现，通常 codeigniter 项目的资产位于应用程序和系统文件夹旁边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:52:37.727

> 那么，将数据放在目录结构的根级别不是很危险吗？保护关键文件夹（例如系统）免受外界侵害的只是 .htaccess

假设您正在运行 Apache，`.htaccess`应该`deny from all`没问题。

如果不是，这就是为什么您通常会在每个文件的开头看到类似内容的原因之一：

```
defined('BASEPATH') or exit('No direct script access.'); 
```

这样可以确保无法直接访问脚本。

您还可以将应用程序和系统文件保存在 Web 根目录下，如下所示：

```
htdocs
    application
    system
    public_html
        index.php
        public
            css
            js
            img... 
```

只需使用 index.php 中的相对路径来定义您的 CI 路径：

```
$system_path = '../system';
$application_folder = '../application'; 
```

# javascript - Windows 8 Metro 显示器 iframe 导航

> ID：12147570
> 
> 赞同：0
> 
> 时间：2012-08-27T18:35:44.890
> 
> 标签：javascript, html, windows-8, dom-events, microsoft-metro

我有一个 Windows 8 Metro 应用程序，它通过 iframe 远程服务的登录表单进行 oauth 登录。我需要监视 iframe 中的导航，因为最后一步将导航到包含我需要从 url 中读取的 oauth 代码的 url。

这个问题有两个部分：

1.  如何监控 iframe 中的导航。

2.  如何获取 iframe 的*当前*位置。我正在尝试`document.getElementById('theIframe').{src|contentWindow.location.href}`的一切 ( ) 要么给出初始位置，要么返回拒绝访问错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:38:13.847

正如@JeffBrand-MSFT 所建议的那样，此示例可能会有所帮助。 [http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

一些可能有用的文档 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker)

要回答您的原始问题，您可以查询`.src`iframe 中的属性以监控`url`. （例如`var currentLocatoin = $('#iframeId').src`）或者您可以[`postMessage`](http://msdn.microsoft.com/en-us/library/windows/apps/hh441295.aspx)在您的本机应用程序和 iframe 内的内容之间实现协议。Mircrosoft 对 iframe 内容进行沙盒处理，因此调用`$('#iframeId').contentWindow.location.href`将为您提供`Access Denied Error`

# hibernate - 应用程序需要在数据库重新启动时重新部署

> ID：12147571
> 
> 赞同：1
> 
> 时间：2012-08-27T18:35:47.127
> 
> 标签：hibernate, tomcat, spring-mvc

我有一个使用 Spring 3 和 Hibernate 3 开发的简单 Web 应用程序，部署在 tomcat 7 上。我的应用程序工作正常，直到数据库服务器关闭。再次打开数据库服务器后，我希望应用程序可以工作，但我需要重新启动 tomcat 才能使应用程序再次工作。如果没有，我会收到以下异常

> org.springframework.web.util.NestedServletException：请求处理失败；嵌套>异常是org.springframework.jdbc.UncategorizedSQLException：休眠操作：可以吗？>不执行查询；SQL 的未分类 SQLException

使用的数据库属性的快照如下

```
<bean id="OradataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-    method="close">
    <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
    <property name="url" value="xyz"/>
    <property name="username" value="xyz"/>
    <property name="password" value="xyz"/>       
</bean>
<bean id="OraDbHibernateProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="properties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="log4j.logger.net.sf.hibernate">trace</prop>
        </props>
    </property>
</bean> 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:18:00.347

您需要再添加 2 个属性。

```
<property name="validationQuery" value="SELECT 1" />
<property name="testOnBorrow" value="true" /> 
```

1.  验证查询 - 在将连接返回给调用者之前验证池中的连接。
2.  testOnBorrow - 如果设置为 true，连接将在从池中借用之前进行验证。如果连接无效，将从池中删除，并借用另一个连接。

# android - 在较大的 ImageView 中显示一个小的 png（可绘制）

> ID：12147585
> 
> 赞同：0
> 
> 时间：2012-08-27T18:36:39.063
> 
> 标签：android, android-imageview

我在比原始图像更大尺寸的 ImageView 中显示一个很小的 ​​png 可绘制资源。这是正常的，顺便说一下我想要的:)

显示 ImageView 时，图像模糊，因为我想使用了缩放方法。

我想达到类似于： [http](http://www.41post.com/4241/programming/android-disabling-anti-aliasing-for-pixel-art) ://www.41post.com/4241/programming/android-disabling-anti-aliasing-for-pixel-art 的效果， 其中原始图像在没有抗锯齿的情况下被放大。

有没有一种方法可以直接使用具有特定宽度和高度（以倾角）和可绘制对象的 ImageView 来实现，而无需使用中间位图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:41:53.610

您是否尝试在布局中关闭抗锯齿？

```
<ImageView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:antialias="false" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:33:39.530

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/image"
    android:antialias="false" /> 
```

您需要创建一个drawable，将上面的代码复制到drawable文件夹中的一个xml上，然后在您的布局上而不是使用您的图像作为源使用这个xml。这样您就可以禁用图像的抗锯齿。

编辑：在代码中执行此操作。

```
BitmapDrawable draw = new BitmapDrawable(R.drawable.image);
draw.setAntiAlias(false);
imageView.setImageDrawable(draw); 
```

# ipad - 是否可以让 iOS 网络应用程序调用另一个常规应用程序来打开？适用于移动 Safari。

> ID：12147587
> 
> 赞同：2
> 
> 时间：2012-08-27T18:36:46.750
> 
> 标签：ipad, web-applications, mobile, mobile-safari

我正在与我的 Web 开发人员合作，他们遇到了我们正在创建的 Web 应用程序的问题。

webapp 运行良好，您将网站添加到 ipad 上的主屏幕，打开它并在 safari 之外的 webapp 界面中使用该网站。

问题是我们有一个功能不起作用，当在移动 safari 中单击 URL 链接时，它会调用外部应用程序（Optiscan - 一种二维码阅读器），然后在扫描代码时，将您返回到 Mobile safari。

问题是 - 有没有办法从 web 应用程序中调用将打开外部应用程序的 URL？类似于它在移动 Safari 中的工作方式？

如果是这样 - 我想知道是否可以编写一个调用 webapp 打开的应用程序。例如，如果我需要 QR 码阅读器然后重新打开 Web 应用程序并将 QR 码传递给它。

-达纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:43:18.073

在 iOS 中，原生应用可以定义[自定义 URL 方案](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)。如果您知道应用程序的方案，您可以通过单击类似的链接来打开它`<a href="fb://">Launch Facebook App</a>`。这应该会启动 iOS 版 Facebook 应用（如果已安装）。

在[akosma.com](http://wiki.akosma.com/IPhone_URL_Schemes)上有一个已知 URL 方案的众包列表，但它们似乎存在一些问题，并且在撰写本文时该列表不可用。如果你需要打开的App的URL scheme不公开，可以尝试联系开发者索取。我敢肯定，如果你好心问，他会帮助你;-)

**编辑：**几乎忘了说，打开这样的应用程序不会神奇地返回您的网络应用程序。这是上述应用程序的开发人员必须实现的。

**编辑 2**：我发现另一个网站在其数据库中有许多自定义 URL 方案：http: [//handleopenurl.com](http://handleopenurl.com)。它没有适用于 Optiscan 的 URL 方案，但适用于其他 QR 阅读器，也许这会对您有所帮助。

# php - 安装 Zend 1.11

> ID：12147590
> 
> 赞同：0
> 
> 时间：2012-08-27T18:36:53.433
> 
> 标签：php, zend-framework

我目前有 PHP 5.4 设置，我们可以用它安装 Zend 1.11 还是我们需要去 Zend 2（还没有遇到过在 WAMP 上解释 Zend 2 设置的体面教程）

我尝试安装 1.11，但在使用 zf CLI 时出现错误

```
***************************** ZF ERROR ********************************
In order to run the zf command, you need to ensure that Zend Framework
is inside your include_path.  There are a variety of ways that you can
ensure that this zf command line tool knows where the Zend Framework
library is on your system, but not all of them can be described here. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:17:53.397

您完全可以使用 PHP 5.4 运行 Zend Framework 1.11。

您得到的错误是因为您试图在命令行中使用“zf”，但 PHP 找不到 Zend 框架的加载位置。为了解决这个问题，`include_path`在您的 php.ini 文件中找到该指令，并更新路径以包含您安装 Zend 框架的位置。

完成此操作后不要忘记重新启动您的网络服务器！

# hibernate - 标准接口的空对象

> ID：12147591
> 
> 赞同：2
> 
> 时间：2012-08-27T18:36:55.973
> 
> 标签：hibernate, hibernate-criteria

有什么方法可以创建 Criterion 接口的 Null 对象？这样我就不必返回 null 并用 null 测试填充我的代码以避免 NPE...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:23:06.810

您可以创建一个空连词：

```
Restrictions.conjunction() 
```

[https://hibernate.onjira.com/browse/HHH-4772](https://hibernate.onjira.com/browse/HHH-4772)

> 根据规范，空合取 (AND) 应始终解析为真，而空析取 (OR) 应始终解析为假。

顺便说一句，如果你的方法可以返回一个空/空标准，你可以考虑使用 Guava 类`Optional<Criterion>`

还要检查：[https ://hibernate.onjira.com/browse/HHH-5795](https://hibernate.onjira.com/browse/HHH-5795)

# java - StringTemplate 4 是否需要磁盘上的模板文件？

> ID：12147593
> 
> 赞同：2
> 
> 时间：2012-08-27T18:36:58.997
> 
> 标签：java, html, web, stringtemplate-4

我正在尝试为 Java Web 应用程序找到 HTML 模板解决方案。我需要灵活地从我选择的任何来源加载模板，因为它们中的大多数可能位于自定义数据库中。在我的搜索中，我偶然发现了 StringTemplate 4，但是我看到的所有示例都要求用户将模板文件放在磁盘上。

我注意到可以在不指定文件或目录的情况下实例化 STGroup，但是使用 defineTemplate 方法似乎不能替代使用基于文件的模板。不幸的是，在我使用 defineTemplate 进行的所有测试中，我都未能让属性正常工作。这一切感觉就像我在黑暗中猜测。

StringTemplate 是正确的库吗？有没有另一种效果更好的？

我开始考虑开发自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:03:27.883

我想到了...

```
import org.stringtemplate.v4.*;
import net.sf.json.*;

class STExampleApp {

        public static void main(String args[]) {
                String template = "decl(type, name, value) ::= \"<type> <name><init(value)>;\"\n"
                                + "init(v) ::= \"<if(v)> = <v><endif>\"";
                STGroup views = new STGroupString(template);
                ST decl = views.getInstanceOf("decl");
                decl.add("type", "int");
                decl.add("name", "x");
                decl.add("value", 12);
                System.out.println(decl.render());
        }

} 
```

无需加载文件。我从中学到了这一点：[How to format decimal numbers with StringTemplate (ST) in Java?](https://stackoverflow.com/questions/6610721/how-to-format-decimal-numbers-with-stringtemplate-st-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:28:51.020

我只需将模板传递给 ST() 构造函数，如下所示：

```
@Test public void testNullAttr() throws Exception {
    String template = "hi <name>!";
    ST st = new ST(template);
    String expected =
        "hi !";
    String result = st.render();
    assertEquals(expected, result);
} 
```

# c# - 如何将测试设置文件添加到解决方案

> ID：12147594
> 
> 赞同：0
> 
> 时间：2012-08-27T18:37:15.993
> 
> 标签：c#, testing, settings

我有一个列出`<DeploymentItem>`s 的测试设置文件。我想将此文件用于我的测试运行。但是，当我使用“添加现有项目”将其添加到解决方案时，它会说

```
Item has already been added. Key in dictionary: 'deployment item 'c:\myschema.xsd'' Key being added: 'deployment item 'c:\myschema.xsd' 
```

这是什么意思？如何撤消它并添加我的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:54:44.780

碰巧测试设置 xml 文件中有重复的部署项。

# javascript - 如何在不影响网站页面速度的情况下在我的网站上使用谷歌字体

> ID：12147595
> 
> 赞同：22
> 
> 时间：2012-08-27T18:37:17.703
> 
> 标签：javascript, jquery, performance, pagespeed

我使用谷歌字体和我网站的排版。看起来很棒，但它增加了很大的开销。有没有办法在不影响网站速度的情况下仍然可以让我的网站具有相同的外观和感觉？

我在这里分析我的网站[https://developers.google.com/speed/pagespeed](https://developers.google.com/speed/pagespeed)，当我使用 Google 字体时，我得到的分数非常低，大约 60，但如果我删除这些字体，那么我的分数很高。有没有办法在不影响网页质量的情况下使用这些字体？我的首要任务是页面优化。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-28T04:41:37.777

简短的回答：没有。稍微长一点的答案：不，您可以尝试，但您不太可能击败 Google WebFonts 已经为您提供的内容。现在让我们进一步剖析这个问题......

首先，如果添加单个外部资源 (webfont) 会对您的 PageSpeed 分数产生如此负面的影响，那么您必须拥有一个相当轻量级的页面——可以说，我们应该在 PageSpeed 方面解决这个问题。现在，回到网络字体！

零基础：向页面添加*任何*外部资源都会对页面的整体性能产生负面影响。对于 webfonts，这可能是一个更大的问题，因为 CSS 被认为是一种“关键资源”，它会在字体到达之前一直保持渲染——如果我们跳过这一步，那么用户可能会得到一个“无样式内容的闪烁”（ FOUC），页面使用一种字体呈现，然后在字体到达时重新设置样式。这是一种不和谐的体验——你绝对不想要这个。

第二步：使用网络字体意味着我们必须包含一个外部 CSS 文件——在这种情况下，由 Google 服务器提供服务。这些服务器针对低延迟进行了*大量优化，但与此同时，这里并没有什么神奇之处——它仍然需要一些时间！*

第 3 步：CSS 文件里面有什么？这是很多人批评 Google WebFonts 的地方。样式表提供`url()`了对 webfont 文件的引用。为什么不使用 base64 / inline 字体？好吧，Google WebFonts 每天都会在数十亿个页面上呈现，所以我们选择使用 URL 是因为该字体*很可能在您的浏览器缓存*中。如果您使用冷缓存刷新页面（您应该这样做）以测试第一页加载，那么您将始终获取字体..但这不是我们优化的体验。

此外，为什么不将字体内联到您的页面中呢？好吧，每个平台都有它接受的不同文件格式（woff、eot、ttf 等），Google WebFonts 会根据您当前的平台动态提供*最优化的格式。*如果您只是下载 WebFont（例如 woff）并将其内联，那么它可能适合您，但不适用于不同平台上的访问者。此外，这些字体背后的压缩一直在改进 - 如果您坚持使用 Google 服务器，您将自动继承这些改进。如果你自己滚动，那么你就被卡住了。

简而言之：如果您想自己推出，请确保优化每个平台的字体，提供基于平台的条件字体，并随着时间的推移跟上压缩改进的步伐。如果你能做到所有这些，那么你可能会比提供的更好。:-)

* * *

最后但并非最不重要的。**不要害怕使用网络字体**。是的，他们增加了额外的时间，但演示文稿也很重要。这是你的电话。如果施加的延迟不可接受，则坚持使用默认字体。但试图击败 Google WebFonts 基础设施/CDN 不太可能让您走得很远。

PS 最后一个提示：确保你真正使用了所有的权重和字体。许多人选择整个家庭（以防万一），最终根本不使用它们，这在某些浏览器上会导致不必要的下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-16T23:13:16.927

Yes you can.

1.  download your google web font files
2.  upload them to font squirrel web generator
3.  select Expert settings and tick: Base64 CSS.
4.  when loading the font through base64, you are not waiting for an external http call to finish.
5.  this will remove the Flash Of Unstyled Content (FOUC)

Reference: [https://robert.accettura.com/blog/2009/07/03/optimizing-font-face-for-performance/](https://robert.accettura.com/blog/2009/07/03/optimizing-font-face-for-performance/) and you can look up online many other articles. I've also tried it on my website, and it works.

# php - jQuery 自动完成标记新标签设计模式

> ID：12147604
> 
> 赞同：0
> 
> 时间：2012-08-27T18:38:11.450
> 
> 标签：php, javascript, jquery, mysql

我正在尝试在我的应用程序中创建一个类似系统的标记。这似乎是一种常见的设计模式，但在存储来自输入的新标签时，我没有找到太多示例。具体来说，我试图从用户提交的输入中找到将新标签存储在数据库中的最优雅的方式。所以一个来自 jQuery UI 多遥控器页面的例子。

```
Western Jackdaw, New Tag, Eurasian Wryneck, Another New Tag 
```

在数据库中插入新标签的最有效方法是什么？我想在插入后对新标签执行更多操作，因此我需要对任何新标签做出响应。

似乎有两种方法可以解决这个问题。一种是做一个 js 对象解决方案客户端，在提交表单时指定标签是来自服务器还是新标签。第二种是提交标签并让服务器解决。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:48:00.257

我不确定，但请参阅此 URL。我认为它对你很有帮助。

[https://github.com/jstayton/jquery-marcopolo](https://github.com/jstayton/jquery-marcopolo)

**例子**

[http://jstayton.github.com/jquery-marcopolo/example1.html](http://jstayton.github.com/jquery-marcopolo/example1.html)

# jquery-autocomplete - 使用jQuery的慢速客户端自动完成

> ID：12147607
> 
> 赞同：0
> 
> 时间：2012-08-27T18:38:34.453
> 
> 标签：jquery-autocomplete

我的页面有一个基因列表的数据值散点图。该列表可以是 30,000+。我有客户端上的所有数据，所以我的自动完成如下：

html:

```
<label>Search for a specific gene:</label> <input size=25 maxlength=100 id=gene_autocomplete class="autocomplete" /> 
```

CSS：

```
.ui-autocomplete {
    max-width: 275px;
            max-height: 300px; 
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 20px; 
```

}

```
ul.ui-autocomplete li.ui-menu-item {
    font-size: 11px;
    margin-right: 15px; 
```

}

Javascript：

```
$(document).ready(function () {

...

$("input#gene_autocomplete").autocomplete({source: data.ids, minLength:4});

... followed by parsing a data file 
```

* * *

```
parseGct: function(dataText) {

    var rows = dataText.split('\n');

    this.vals = new Array();
    this.colNames = rows[2].split('\t').splice(2);
    for(var i = 3; i < rows.length; i++) {

        var cols = rows[i].split('\t');
        if(cols.length < 2) continue;
                    var data = cols.slice(2);
        this.toFloat(data);
        this.vals.push(data.slice());
    }
}, 
```

我尝试了不同的延迟（0到700），但无济于事。通常浏览器超时。我能做些什么来加快速度？

# heroku - Media Temple 和 Heroku CNAME

> ID：12147609
> 
> 赞同：0
> 
> 时间：2012-08-27T18:38:44.790
> 
> 标签：heroku, dns, cname, mediatemple

我正在使用 Media Temple 为域配置我的 DNS 设置。我最近在 Heroku 上启动了一个应用程序，并希望将我的域的子域设置为 Heroku 应用程序的 CNAME。问题是当我将 Heroku 域名作为 CNAME 输入时，DNS 编辑器会在 Heroku 域名的末尾放置一个句点，而 Heroku 会显示这不是有效域的错误。

在我的 DNS 设置中，我有：

```
subdomain.domain.com CNAME appname.herokuapp.com 
```

当我保存它时，它在设置中显示为

```
subdomain.domain.com CNAME appname.herokuapp.com. 
```

关于如何删除该尾随点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:33:32.470

前几天我在为我的 Heroku 应用程序设置 CloudFlare 时遇到了这个问题。“我不认为这意味着你认为它意味着什么。”

使用 Heroku，您必须添加可以访问您的应用程序的域，即使您在其他地方管理 DNS。[这是有关如何执行此操作的文档](https://devcenter.heroku.com/articles/custom-domains)。基本上，您可以从终端执行此操作：

*   `cd`进入您的应用程序目录
*   `heroku domains:add subdomain.domain.com`添加您想要的子域。

此外，在 mediatemple 上，我认为您可能只需要放置`subdomain`部分而不是`subdomain.domain.com`，尽管它可能会以任何一种方式工作。如[launchrock 关于添加 CNAME with Media Temple 的知识库文章](http://support.launchrock.com/knowledgebase/articles/36669-creating-your-cname-record-mediatemple)所示：

> "5\. 在名称字段中，输入您选择用于使用 LaunchRock 的网站的地址部分。*例如，如果您选择 signup.yoursite.com，请在名称字段中输入 signup。* "

# android - 如果未安装在设备上，如何处理 zxing？

> ID：12147612
> 
> 赞同：1
> 
> 时间：2012-08-27T18:38:58.073
> 
> 标签：android, zxing

我正在开发一个具有 QR 码读取能力的应用程序，我正在使用 Zxing 库，通过 Intent 启动，所以 Barcode Scanner 正在处理 QR 读取功能，我的问题是，如果用户没有安装 Barcode Scanner 应用程序在他们的设备上，有没有办法将他们带到应用商店以获取适用于他们设备的应用程序？

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:41:04.157

您应该使用[ZXing`IntentIntegrator`](http://code.google.com/p/zxing/wiki/ScanningViaIntent)，如果用户的设备上未安装该应用程序，它将自动为用户提供访问 Play 商店的选项。

这是一个使用[的示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)`IntentIntegrator`，包括该类的 JAR 版本（在项目`libs/`目录中）。

# message-queue - 数百万主题的消息队列解决方案

> ID：12147614
> 
> 赞同：9
> 
> 时间：2012-08-27T18:39:07.820
> 
> 标签：message-queue, ibm-mq, mq

我正在考虑一个系统，它将通知多个消费者发生在一组对象上的事件。每个订阅者都应该能够订阅发生在零个或多个对象上的事件，多个订阅者应该能够接收有关发生在单个对象上的事件的信息。

我认为在这种情况下一些消息队列系统将是合适的，但我不确定如何处理我将拥有数百万个对象的事实 - 为每个对象使用单独的主题听起来不太好[或者是正好？]。

您能否建议我应该采取的方法，甚至是一些合理的开源消息队列系统？

更多细节：

*   将有成千上万的订阅者[意味着数量不多]，
*   订阅者将订阅数十或数百个对象，
*   将有大约 5-2000 万个物体，
*   事件本身不必携带任何信息。只是该对象已更改的信息就足够了，
*   绝大多数对象将永远不会被订阅，
*   事件以每秒几百个的最大速率发生，
*   理想情况下，服务器应该在 linux 下运行，能够通过 http long-poll [使用 node js？码头下的延续？]。

提前感谢您的反馈，并对有些含糊的问题表示抱歉！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T00:15:32.487

我强烈推荐[RabbitMQ](http://www.rabbitmq.com/)。我之前在几个项目中使用过它，根据我的经验，我认为它非常可靠并且提供了广泛的配置。基本上，RabbitMQ 是一个[开源](http://www.rabbitmq.com/mpl.html)（Mozilla 公共许可证（MPL））消息代理，它实现了[高级消息队列协议（AMQP）](http://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol)标准。

如 RabbitMQ 网站上所述：

> RabbitMQ 可以在 Erlang 支持的任何平台上运行，从嵌入式系统到多核集群和基于云的服务器。

...意味着支持像 Linux 这样的操作系统。

这里有一个 node.js 库：[https ://github.com/squaremo/rabbit.js](https://github.com/squaremo/rabbit.js)

它带有一个基于 HTTP 的 API，用于管理和监视 RabbitMQ 服务器——包括一个命令行工具和一个基于浏览器的用户界面——参见：[http](http://www.rabbitmq.com/management.html) ://www.rabbitmq.com/management.html 。

在我从事的项目中，我使用 C# 和两个不同的包装器[EasyNetQ](http://mikehadlow.blogspot.dk/2011/05/easynetq-simple-net-api-for-rabbitmq.html)和[Burrow.NET](https://github.com/vanthoainguyen/Burrow.NET)与 RabbitMQ 进行了通信。两者都是 RabbitMQ 的优秀包装器，但我最终成为 Burrow.NET 的最粉丝，因为它更容易和更明显地使用（不会在引擎盖下做很多魔法）并且提供了很好的灵活性来注入记录器、序列化器、等等

我从来没有处理过你要处理的大量对象——我处理过数千个（不是数百万个）。然而，无论我玩过多少对象，RabbitMQ 一直工作非常稳定，从来没有成为系统错误的根源。

综上所述——RabbitMQ 易于使用和设置，支持 AMQP，可以通过 HTTP 进行管理，我最喜欢的是——它坚如磐石。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T23:30:20.903

分解主题以携带特定事件，例如“对象更新主题”“对象删除”......因此客户端只需订阅他们感兴趣的基于事件的主题的“有限数量：”。

当您发布消息时将标头注入到您的消息中，并将智能放入客户端以将这些标头用作消息选择器。例如，客户端知道他感兴趣的对象列表 - 并假设您通过“id”识别对象 - id 可以是标头，客户端将使用“id 标头”来确定他是否感兴趣消息。

根据您是否需要，您可能还需要考虑确保有保证的传递，以确保客户端即使在脱机并稍后返回时也会收到消息。

我最推荐的选项是 ActiveMQ、RabbitMQ 和 Redis PUB SUB（Havent 真的在 redis pub-sub 上工作过，请谨慎行事）

[最后是RabbitMQ](http://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/#more-266)和[Redis](http://redis.io/topics/benchmarks)的一些性能基准

刚刚看到你每秒只有几条 100 条消息被推送，这对 activemq 来说没什么大不了的，我一直在每秒处理 240 条消息的系统上使用 Amq，它工作得很好。我使用一个线程池来异步处理消息。如果您在 java 领域，请查看 akka 之类的框架，如果不坚持使用 nodejs 和它周围的酷生态系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:29:21.680

如果它必须是开源的，我会选择[ActiveMQ](http://activemq.apache.org)和一个为主题提供 JMS 功能的应用程序服务器，它具有[Ajax 支持](http://activemq.apache.org/ajax.html)，因此您可以从客户端访问它们

因此，您将使用 JMS 基础架构来发布对象的主题，并且您[可以根据需要创建主题](http://activemq.apache.org/how-do-i-create-new-destinations.html)

此外，通过使用 java 应用程序服务器，您可以利用集群、负载平衡和其他高可用性功能（显然基于所选产品）

希望有帮助！！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-15T17:41:42.483

由于您的消息非常小，可能需要考虑为小型设备设计的 MQTT，尽管它在功能强大的设备上也能正常工作。关键考虑是低开销 - 基本上是小消息的 2 字节标头。由于您的体积，您可能无法使用任何简单或开源的 MQTT 服务器。您可能需要像 MessageSight 这样的重型专用设备来处理您的音量。

有关您的应用程序的更多详细信息肯定会有所帮助。你也根本没有提到安全性。我想你一定在这方面有一些需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T07:25:05.497

虽然不确定你的工作环境，但这里是我的一点。您能否在系统中识别具有唯一 ID 的每个对象。如果是这样，您可以为每种事件类型设置一个主题。例如，您想跟踪对象删除事件、对象更新事件等。因此，您可以为每种事件类型设置主题。每当对象发生相应事件时，这些主题将与对象的 ID 一起发布。这将限制您需要的主题数量。您问题的第二部分是不同的订阅者想要订阅不同的对象。因此，并非所有订阅者都对了解所有对象的事件感兴趣。此问题陈述的范围为消息传递框架提供的消息选择器（过滤）机制。所以基本上你需要在什么基础上寻找对特定对象感兴趣的订阅者。具有作为消息过滤机制的基础。它可以是任何东西：对象类型、对象状态等。因此，最终您的系统将由每个事件类型的一个主题组成，其中有人发布事件消息：{object-type:object-id} 信息。订阅者可以订阅任何主题并使用过滤条件。

如果上述解决方案满足，您可以使用任何消息解决方案：activeMQ、WMQ、RabbitMQ。

# php - Scandir 阵列显示没有文件扩展名

> ID：12147615
> 
> 赞同：0
> 
> 时间：2012-08-27T18:39:07.823
> 
> 标签：php, arrays, opendir, readdir

我正在使用以下内容在“html/”和链接路径中创建我的文件列表。

当我查看它显示的数组时，例如 my_file_name.php

如何使数组仅显示文件名而不显示扩展名？

```
$path = array("./html/","./link/");
$path2=  array("http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/html/","http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/link/");
$start="";
$Fnm = "./html.php";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."\n");

$folder = opendir($path[0]);
while( $file = readdir($folder) ) {
       if (($file != '.')&&($file != '..')&&($file != 'index.htm')) {
            $folder2 = opendir($path[1]);
            $imagename ='';
            while( $file2 = readdir($folder2) ) {
                if (substr($file2,0,strpos($file2,'.')) == substr($file,0,strpos($file,'.'))){
                    $imagename = $file2;
                }
            }
            closedir($folder2);
        $result="<li class=\"ui-state-default ui-corner-top ui-tabs-selected ui-state-active\">\n<a href=\"$file\">\n$file2\n</a><span class=\"glow\"><br></span>
</li>\n";
        fwrite($inF,$result);
       }
}
fwrite($inF,"");
closedir($folder);

fclose($inF); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:29:47.633

`pathinfo()`很好，但我认为在这种情况下你可以逃脱`strrpos()`. 我不确定你要做什么`$imagename`，但我会把它留给你。以下是您可以使用代码执行的操作，以仅比较基本文件名：

```
// ...
$folder = opendir($path[0]);
while( $file = readdir($folder) ) {
       if (($file != '.')&&($file != '..')&&($file != 'index.htm')) {
            $folder2 = opendir($path[1]);
            $imagename ='';
            $fileBaseName = substr($file,0,strrpos($file,'.'));
            while( $file2 = readdir($folder2) ) {
                $file2BaseName = substr($file2,0,strrpos($file2,'.'));
                if ($file2BaseName == $fileBaseName){
                    $imagename = $file2;
                }
            }
            closedir($folder2);
        $result="<li class=\"ui-state-default ui-corner-top ui-tabs-selected ui-state-active\">\n<a href=\"$file\">\n$file2\n</a><span class=\"glow\"><br></span>
</li>\n";
        fwrite($inF,$result);
       }
} 
```

我希望这会有所帮助！

# python - 使用python，收集字符串中两个符号之间的文本的最有效方法是什么？

> ID：12147617
> 
> 赞同：-2
> 
> 时间：2012-08-27T18:39:10.660
> 
> 标签：python, regex

> **可能重复：**
> [正则表达式匹配空格或字符串结尾](https://stackoverflow.com/questions/2490478/regex-to-match-white-space-or-end-of-string)

那么如果用户提交了一个包含@符号（@username）的文本框，我怎样才能有效地抓取@和下一个空格之间的用户名呢？

此外，一个提交中可能有多个@user，因此希望每个都附加到一个列表中，但前提是它不在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:44:49.023

如果您要处理大量文本，则正则表达式是最简单的：

```
import re
mystring = " Hello there @ben, my name is @bob"
re.findall(r'@(\w+)', mystring)

// ['ben', 'bob'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:47:13.820

没有`regex`解决方案：

```
>>> strs="@user some text @user2"
>>> [x.split()[0] for x in strs.split('@')[1:] if x.strip()!='']
['user', 'user2']

>>> strs1="hello I am @user1 and he's @user2"
>>> [x.split()[0] for x in strs1.split('@')[1:] if x.strip()!='']
['user1', 'user2'] 
```

**编辑：**

```
lis=[]
strs="hello I am @user1 and he's @user2,  as per @user3, @user2 is older than @user1"
for x in strs.split('@')[1:]:
    x=x.split()[0].strip().strip(',";.')   #strip punctuation marks
    if x not in lis:        #if not in lis
        lis.append(x)

print lis 
```

**输出：**

```
['user1', 'user2', 'user3'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:43:31.513

高效在什么方面？编码时间？尝试正则表达式：

```
import re
re.findall(r'@([^\s]*)',"this is @astring with @another one") 
```

# sql - SQL将列作为变量？

> ID：12147623
> 
> 赞同：0
> 
> 时间：2012-08-27T18:39:33.683
> 
> 标签：sql, sql-server-2008-r2, sql-server-2012

我正在尝试使用 SQL 更新一行，但我希望能够传入一个变量来更新要更新的列的名称。这可能吗？

```
DECLARE @Place varchar(max)
SET @Place = '[MDinner]'

UPDATE [UserMealPlans] SET @Place = NULL WHERE [UserId] = 'ffc3a7ed-264f-4d75-ae4c-aabe900023b6' 
```

这是我的声明，它说 1 行受到影响，但是该列未设置为空。

如果我这样做，它工作正常：

```
UPDATE [UserMealPlans] SET [MDinner] = NULL WHERE [UserId] = 'ffc3a7ed-264f-4d75-ae4c-aabe900023b6' 
```

关于如何正确执行此操作的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:44:05.820

为此，您需要使用动态 SQL：

```
DECLARE @Place varchar(max)
DECLARE @query  AS NVARCHAR(MAX)
SET @Place = '[MDinner]'

SET @query = 'UPDATE [UserMealPlans] SET ' 
    + @Place + '= NULL WHERE [UserId] = ''ffc3a7ed-264f-4d75-ae4c-aabe900023b6'''

exec(@query) 
```

# python - 我无法修改的狮身人面像和装饰器

> ID：12147625
> 
> 赞同：1
> 
> 时间：2012-08-27T18:39:49.370
> 
> 标签：python, python-sphinx

我正在使用 Sphinx 来记录我用 Python 编写的一些代码。我在我的项目中使用了 Stuart Gathman 的 pymilter 库，所以我的很多函数都被装饰了。我在 SO 上看到了关于装饰函数和 Sphinx 的问题，但它们不适用于我，因为我无法修改 milter 库代码。

关于如何在不必重新编写我的 Sphinx 文档的情况下解决这个问题的想法会很棒。

谢谢

```
@Milter.noreply
def header( self, name, hval ):
    """
    Processes headers from the incoming message and writes them to a new variable for database storage.
    """
    rgxSubject = re.compile( '^(subject)', re.IGNORECASE | re.DOTALL )
    rgxMessageID = re.compile( '^(message-id)', re.IGNORECASE | re.DOTALL )

    self.fp.write( "%s: %s\n" % ( name, hval ) )
    self.headers.append( "%s: %s\n" % ( name, hval ) )

    if ( rgxSubject.search( name ) ) or ( rgxMessageID.search( name ) ):
        self.log.info( "%s: %s" % ( name, hval ) )
        self.subjMsgId[name] = hval
        if ( rgxSubject.search( name ) ): self.Subject = hval

    return Milter.CONTINUE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:28:23.440

你可以使用这个：

```
import functools

def header( self, name, hval ):
   pass
   # ...

header = functools.wraps(header)(Milter.noreply(header)) 
```

举个例子说明这是做什么的，考虑这个装饰器和函数：

```
>>> def dec(f):
...    def wrap():
...       return f()
...    return wrap
... 
>>> 
>>> def f():
...    """docstring"""
...    print 'hey' 
```

装饰器只是一个返回函数的可调用对象，因此您可以将函数作为参数调用装饰器，然后调用结果：

```
>>> dec(f)
<function wrap at 0x10909e758>
>>> dec(f)()
hey 
```

但是正如您所指出的，问题在于`__doc__`and`__name__`变量没有被保留，因为装饰器没有使用[functools.wraps](http://docs.python.org/library/functools.html#functools.wraps)：

```
>>> f.__doc__
'docstring'
>>> dec(f).__doc__
>>> 
```

所以，既然你不能修改原来的装饰器定义，就自己把它包起来：

```
>>> functools.wraps(f)(dec(f))()
hey
>>> functools.wraps(f)(dec(f)).__doc__
'docstring' 
```

您还可以定义自己的装饰器，将装饰器作为参数并正确包装函数。

# facebook - Facebook OpenGraph 协议？

> ID：12147627
> 
> 赞同：1
> 
> 时间：2012-08-27T18:39:52.813
> 
> 标签：facebook, wordpress, facebook-graph-api, facebook-opengraph

我安装了官方的 facebook wordpress 插件，它有助于自动将以下代码行添加到我的页面：

```
<meta property="http://ogp.me/ns#locale" content="en_US" />
<meta property="http://ogp.me/ns#site_name" content="XXX" />
<meta property="http://ogp.me/ns#type" content="article" />
<meta property="http://ogp.me/ns#title" content="Contact" />
<meta property="http://ogp.me/ns#url" content="http://XXX.com" />
<meta property="http://ogp.me/ns/fb#app_id" content="XXX" /> 
```

现在我想在我的页面上添加一个 LIKE BOX，

[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

当我选择“XFBML”代码时，它显示：

“将 XML 命名空间添加到文档的标记中。这是 XFBML 在早期版本的 Internet Explorer 中工作所必需的。”

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

我的问题是，考虑到我已经在上面添加了“元属性”，我还需要添加这一行代码吗？如果我添加这个，它会与“元属性”冲突吗？

还有哪些版本的 IE 需要那行代码？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:20:43.127

> `<html xmlns:fb="http://ogp.me/ns/fb#">`
> 
> 我的问题是，考虑到我已经在上面添加了“元属性”，我还需要添加这一行代码吗？

您*仍然*需要它，因为它与 Open Graph 元元素无关（它只是为 Facebook 的刮板等“外部”方提供有关文档的一些信息），而是与浏览器如何处理文档中的“未知”标签（并且`<fb:like-box>`是这样一个未知标签，因为它在 HTML 中不存在）。

> 如果我添加这个，它会与“元属性”冲突吗？

不，这里不可能发生任何形式的“冲突”。

> 还有哪些版本的 IE 需要那行代码？

我不确切知道，但我猜至少有 6 和 7 个。

如果由于某种原因（CMS 等）你*不能*将它添加到 HTML 元素中——那么你可以只使用插件代码的*HTML5*`DIV`版本——它只使用一个普通元素，并且任何浏览器都不是“未知”的. （您的文档的 doctype 不必是 HTML5 即可。）

# excel - 将一行从一个工作表复制粘贴到另一个工作表

> ID：12147629
> 
> 赞同：0
> 
> 时间：2012-08-27T18:39:57.403
> 
> 标签：excel, vba

我正在尝试从 Sheet1 复制符合条件的行并将整行发布在当前数据的末尾。我可以复制该行，但它没有粘贴它。帮助将不胜感激。这是我写的代码：

```
Sub Button1_Click()

Dim i As Integer

'Range("H2:O65536").ClearContents

Sheets("Sheet1").Select
LastRowColA = Range("A65536").End(xlUp).Row

For i = 2 To LastRowColA

If Cells(i, 6) = "No" Then
Rows(i).Select
Rows(i).Copy

Sheets("Sheet2").Select
Dim LastRow As Long
Dim StartRow As Long
Dim Col As Long
Dim Row As Long

StartRow = 2
Col = 1
LastRow = findLastRow(1)

For Row = StartRow To LastRow
Rows(LastRow).Select
ActiveSheet.Paste

Next Row

Else
'do nothing
End If
Next i
End Sub

Function findLastRow(ByVal Col As Integer) As Long
    'Find the last row with data in a given column

    findLastRow = Cells(Rows.Count, Col).End(xlUp).Row
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T19:18:53.517

我们开始吧：有点短，但应该做的工作......

```
Sub Button1_Click()
Dim i As Integer
Dim ws1 As Worksheet: Set ws1 = ThisWorkbook.Sheets("Sheet1")
Dim ws2 As Worksheet: Set ws2 = ThisWorkbook.Sheets("Sheet2")

For i = 2 To ws1.Range("A65536").End(xlUp).Row
    If ws1.Cells(i, 6) = "No" Then ws1.Rows(i).Copy ws2.Rows(ws2.Cells(ws2.Rows.Count, 6).End(xlUp).Row + 1)
Next i
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T20:06:20.443

为了增加一点帮助，当您可以一次过滤和复制所有数据时，为什么还要花费所有（处理）时间来遍历可能很大的行集？

请参阅下面的代码。您可能需要对其进行一些调整以匹配您的数据集。

```
Sub Button1_Click()

Dim ws1 as Worksheet: Set ws1 = ThisWorkbook.Sheets("Sheet1")
Dim ws2 as Worksheet: Set ws2 = ThisWorkbook.Sheets("Sheet2")

With ws1

    .UsedRange.AutoFilter 6, "No" 
    '-> assumes data starts in column A, if not adjust the 6

    Intersect(.UsedRange,.UsedRange(Offset(1)).SpecialCells(xlCellTypeVisible).Copy  
    ' -> assumes No's are there, if they may not exist, will need to error trap.

End With

With ws2

    .Rows(.Cells(ws2.Rows.Count, 6).End(xlUp).Row + 1).PasteSpecial xlPasteValues

End With

ws1.AutoFilterMode = False

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T06:21:25.550

// 使用它。

```
Sheet2.Select (Sheet1.Rows(index).Copy)

Sheet2.Paste (Rows(index)) 
```

如果要复制、粘贴两行或多行，请使用 for 循环。

# java - 后增量行为

> ID：12147631
> 
> 赞同：3
> 
> 时间：2012-08-27T18:39:59.520
> 
> 标签：java, increment, post-increment, pre-increment

我有一点怀疑。为什么下面的代码打印值 i=2。

```
int i=2;
i=i++;
System.out.println(i); 
```

有人可以解释一下第 2 行发生了什么。

所以在这里做++没有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:41:04.320

```
i=i++; 
```

因为首先发生分配，然后应用增量。

就像是：

首先 i 得到 2，然后发生 ++ 操作，但结果不会重新分配给 i，因此 i 值将保持为 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:44:43.260

`i = i++;`首先计算`i++`表达式，该表达式递增`i`并计算为递增`i` *之前*的值。由于您立即分配给`i`该值，因此它会重置 的值，`i`因此增量似乎从未发生过。`i = ++i;`会导致其他行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:43:33.540

当你告诉`i=i++;`你告诉计算机将 i 分配给 i 之后，增加 i 的值，但它不会影响 i，因为 i 的值是 2。

正确的方法应该是`i=++i;`有意义的，在将其分配给 i 之前将 i 加 1，或者您可以简单地使用`i++;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T05:57:22.100

感谢大家帮助我理解了非常有价值的东西。

我在某个地方找到了不错的帖子。

我仅从 stackoverflow 论坛给出的建议中得到了答案，但有一些明确的解释缺少我的感受。

Miljen Mikic 建议的链接不起作用并说找不到页面。

对以下问题给出的一些明确解释是

```
int a=2, b=2;
int c = a++/b++;
System.out.println(c); 
```

拆解为以下。

```
 0:iconst_2      ; [I]Push the constant 2 on the stack[/I]  
   1:istore_1      ; [I]Pop the stack into local variable 1 (a)[/I]  
   2:iconst_2      ; [I]Push the constant 2 on the stack, again[/I]  
   3:istore_2      ; [I]Pop the stack into local variable 2 (b)[/I]  
   4:iload_1       ; [I]Push the value of a on the stack[/I]  
   5:iinc1, 1  ; [I]Add 1 to local variable 1 (a)[/I]  
   8:iload_2       ; [I]Push the value of b on the stack[/I]  
   9:iinc2, 1  ; [I]Add 1 to local variable 2 (b)[/I]  
   12:idiv          ; [I]Pop two ints off the stack, divide, push result[/I]  
   13:istore_3      ; [I]Pop the stack into local variable 3 (c)[/I]  
   14:return 
```

这有助于我更好地理解。

如果我的观点有误，请补充。

感谢您的所有回答。

# sql - 使用 rpad 在 Postgresql 中填充字符串而不截断它

> ID：12147632
> 
> 赞同：11
> 
> 时间：2012-08-27T18:40:04.100
> 
> 标签：sql, string, function, postgresql, string-formatting

使用 Postgresql 8.4，当字符串太长时，如何在*不*截断字符串的情况下右填充空格？

问题是当字符串实际上比要填充的字符数长时`rpad` *截断字符串。*例子：

```
SELECT rpad('foo', 5);  ==> 'foo  ' -- fine
SELECT rpad('foo', 2);  ==> 'fo'    -- not good, I want 'foo' instead. 
```

我发现的最短解决方案根本不涉及`rpad`：

```
SELECT 'foo' || repeat(' ', 5-length('foo'));  ==> 'foo  ' -- fine
SELECT 'foo' || repeat(' ', 2-length('foo'));  ==> 'foo'   -- fine, too 
```

但这看起来很丑恕我直言。请注意，我实际上并没有选择字符串“foo”，而是从列中选择：

```
SELECT colname || repeat(' ', 30-length(colname)) FROM mytable WHERE ... 
```

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-04T12:53:17.783

找到了一个稍微优雅的解决方案：

```
SELECT greatest(colname,rpad(colname, 2)); 
```

例如：

```
SELECT greatest('foo',rpad('foo', 5));  -- 'foo  ' 
SELECT greatest('foo',rpad('foo', 2));  -- 'foo' 
```

.

* * *

解释它是如何工作的： rpad('foo',5) = 'foo' which is > 'foo' （最适用于字符串和数字） rpad('foo',2) = 'fo' which is < ' foo'，所以 'foo' 是由最大函数选择的。

如果你想要左填充的单词，你不能使用 best，因为它比较从左到右（例如 'oo' 和 'foo'），并且在某些情况下，这取决于字符串会更大或更小。我想您可以反转字符串并使用 rpad 并将其反转，或者只使用在这两种情况下都有效的原始解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T19:26:17.027

如果您不想一直编写该`repeat`业务，只需为它编写自己的函数即可。像这样的东西：

```
create or replace function rpad_upto(text, int) returns text as $$
begin
    if length($1) >= $2 then
        return $1;
    end if;
    return rpad($1, $2);
end;
$$ language plpgsql; 
```

或这个：

```
create or replace function rpad_upto(text, int) returns text as $$
select $1 || repeat(' ', $2 - length($1));
$$ language sql; 
```

然后你可以这样说：

```
select rpad_upto(colname, 30) from mytable ... 
```

您可能想考虑一下您想要`rpad_upto(null, n)`生产什么。如果为 NULL，上述两个版本都`rpad_upto`将返回 NULL，`$1`但您可以调整它们以轻松返回其他内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T09:35:56.873

这个怎么样

```
select case when length(col) < x then rpad(col, x)
else col
end
from table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T19:37:12.713

假设效率不是您最关心的问题：

```
select regexp_replace(format('%5s', 'foo'), '(\s*)(\S*)', '\2\1') 
```

1.  format() 将字符串左填充到所需的宽度
2.  然后 regexp_replace 将任何前导空格移动到末尾。

我想如果你在字符串中有前导空格并且你想保留它们，那将会失败。另请注意， format() 不会在 null 参数上返回 null。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T19:16:30.177

下面的 PostgreSQL 语句是右填充三个位置值并将列数据类型更改为列“columnname”的文本。我使用 pycharm IDE 来帮助构造语句。该语句将用 000 填充。

我一直在寻找一段时间来解决同样的问题，除了左垫，我想我会分享。

```
alter table 'schema.tablename' alter column 'columnname' type text using rpad('columnname'::text,3,'0') 
```

# jquery - XMLHttpRequest “历史” - 获取先前的请求

> ID：12147635
> 
> 赞同：0
> 
> 时间：2012-08-27T18:40:15.443
> 
> 标签：jquery, xmlhttprequest

这个有点奇怪。我有一个页面可以进行多次 ajax 调用（使用 jQuery $.ajax）。

后面的请求取决于先前请求的结果，但由于设计原因我无法更改，它们没有嵌套在正确的成功/错误回调中。因此，如果有前辈失败，顺风电话会令人讨厌地中断。

像 Firebug 这样的浏览器调试工具会显示页面进行的所有 ajax 调用的列表，您当然可以检查它们、查看帖子和响应等。

有没有办法以编程方式访问“以前的请求”列表？例如，我想查看调试工具似乎正在读取的 xmlhttp“历史”堆栈中的上一个请求，并访问特定请求的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:34:20.427

从来没有找到合适的答案，所以找时间重构有问题的页面。

# facebook - 如何在FB页面上计算喜欢？

> ID：12147642
> 
> 赞同：2
> 
> 时间：2012-08-27T18:40:43.627
> 
> 标签：facebook, facebook-like

我必须做一个非常简单的操作，但我的编程技能还不够。我必须在 Facebook 页面中计算喜欢并在我的网站上打印该数字。我有两个脚本可以很好地完成普通网站的工作，但它们不想显示页面的点赞数。

```
<?php
$source_url = "http://www.facebook.com/";  //This could be anything URL source  including stripslashes($_POST['url'])
$url = "http://api.facebook.com/restserver.php?method=links.getStats&urls=".urlencode($source_url);
$likes =  $xml->link_stat->like_count;
$comments = $xml->link_stat->comment_count;
$total = $xml->link_stat->total_count;
$max = max($shares,$likes,$comments);
echo $likes;
?>

<?php
$fql  = "SELECT url, normalized_url, share_count, like_count, comment_count, ";
$fql .= "total_count, commentsbox_count, comments_fbid, click_count FROM ";
$fql .= "link_stat WHERE url = 'http://www.apple.com/'";
$apifql="https://api.facebook.com/method/fql.query?format=json&query=".urlencode($fql);
$json=file_get_contents($apifql);
print_r( json_decode($json));
?> 
```

这两个脚本都适用于普通网站，但无法获取 fb 页面的点赞数。可能是我应该以其他格式输入链接还是什么？

我可以使用这样的图形获取所需的数据[http://graph.facebook.com/?ids=AutoSpecCenter](http://graph.facebook.com/?ids=AutoSpecCenter)，只需输入这样的页面名称即可。但我不知道如何处理这些数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T19:11:13.740

正如您在问题中已经写的那样，您可以通过 Facebooks 的 Graph API 查询此类信息。这个简短的示例将获取可口可乐页面的信息，解码 JSON 并输出喜欢该页面的人数`$data->likes`。

```
<?php 
$ch = curl_init("https://graph.facebook.com/CocaCola?access_token=<Access Token>");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$raw = curl_exec($ch);
curl_close($ch);

$data = json_decode($raw);
echo $data->likes . " people like Coca-Cola";
?> 
```

如果您需要执行更多任务而不仅仅是获取页面之类的内容，请考虑按照*cpilko的建议使用*[Facebook SDK](https://developers.facebook.com/docs/reference/php/)。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:06:49.263

这是快速而肮脏的方法：

```
<?php
$fb_id = 'AutoSpecCenter';
$url = 'https://graph.facebook.com/' . urlencode($fb_id);
$result = json_decode( file_get_contents($url) );
printf("<p>There are %s people who like %s</p>", $result->likes, $result->name); 
```

你最好安装[Facebook PHP SDK](https://developers.facebook.com/docs/reference/php)或使用 cURL 来获得它。

您也可以设置`$fb_id`为 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T05:03:17.613

这也是一个简单的方法......

`<?php $page_id = 'yourfbpageid'; // your facebook page id $xml = @simplexml_load_file("http://api.facebook.com/restserver.php?method=facebook.fql.query&query=SELECT%20fan_count%20FROM%20page%20WHERE%20page_id=".$page_id."") or die ("a lot"); $fans = $xml->page->fan_count; ?> <li class="text white"><span></span><?php echo $fans.' Fans'; ?></li>`

礼貌：拉维帕特尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-30T06:09:00.853

这对我有用

```
<?php
function getData($username){

$access_token = 'YOUR ACCESS TOKEN'; //Replace it with your Access Token
$json = json_decode(file_get_contents("https://graph.facebook.com/".$username."?fields=fan_count&access_token=".$access_token),true);
return $json;
}

$data = getData("Mypage");//Replace it with your Username

$likes = $data['fan_count'];
echo "Facebook Likes: ".$likes;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T17:28:57.993

我遇到了同样的问题，只是`likes.summary(true),comments.summary(true)`在“字段”中添加参数对我有用。

例如我用过`https://graph.facebook.com/me/feed?access_token=ACCESS_TOKEN&fields=story,from,story_tags,likes.summary(true),comments.summary(true)`

代替`https://graph.facebook.com/me/feed?access_token=ACCESS_TOKEN`

如果需要，您也可以添加其他参数；由 a 隔开，

此外，如果您想计算单个帖子，您可以使用

```
https://graph.facebook.com/POST_ID/likes?summary=true&access_token=ACCESS_TOKEN 
```

喜欢计数

或者

```
 https://graph.facebook.com/POST_ID/comments?summary=true&access_token=ACCESS_TOKEN 
```

评论数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-20T04:40:43.907

试试这个代码

```
<?php echo facebooklike('209414452444193');

      function facebooklike($page_id){

       $likes = 0; //Initialize the count  
       //Construct a Facebook URL
       $json_url ='https://graph.facebook.com/'.$page_id.'';
       $json = get_contents($json_url);
       $json_output = json_decode($json);

      //Extract the likes count from the JSON object
      if($json_output->likes){
        $likes = $json_output->likes;
      }
      return $likes;   
    }
    function get_contents($url){
       $ch = curl_init($url);
       curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
       curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
       curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
       curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
       $data = curl_exec($ch);
       curl_close($ch);
       return $data;
    }
?> 
```*

# algorithm - 在快速排序中使用中值选择？

> ID：12147644
> 
> 赞同：3
> 
> 时间：2012-08-27T18:40:46.587
> 
> 标签：algorithm, sorting, selection, quicksort

我有一个关于 Quicksort 的小问题。在选择数组的最小值或最大值的情况下，分区的枢轴值非常低效，因为数组大小仅减少 1。

但是，如果我添加选择该数组中位数的代码，我认为 Ii 会更有效率。由于分区算法已经是 O(N)，所以它会给出一个 O(N log N) 的算法。

这可以做到吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T19:34:48.507

您绝对可以使用线性时间中值选择算法来计算快速排序中的枢轴。这为您提供了最坏情况的 O(n log n) 排序算法。

然而，线性时间选择的常数因子往往如此之高，以至于在实践中，所得到的算法将比在每次迭代中随机选择枢轴的快速排序要慢得多。因此，看到这样的实现并不常见。

避免 O(n ² ) 最坏情况的一种完全不同的方法是使用类似于[introsort](http://en.wikipedia.org/wiki/Introsort)中的方法。该算法监控快速排序的递归深度。如果看起来算法开始退化，它会切换到不同的排序算法（通常是堆排序），保证最坏情况 O(n log n)。这使得整体算法 O(n log n) 不会显着降低性能。

希望这可以帮助！

# javascript - 使用 jQuery 从 Google Docs 托管的 iframe 访问元素的文本

> ID：12147665
> 
> 赞同：0
> 
> 时间：2012-08-27T18:42:12.970
> 
> 标签：javascript, jquery, cross-domain, google-docs

我正在编写一个代码段，以从托管 google docs PowerPoint 演示文稿的 iframe 中删除信息。基本上，我需要注意每个用户在托管文档中的每张幻灯片上花费的时间，这意味着我需要知道他们何时跳转到新幻灯片以重新开始计时器。我想我可以通过使用 jQuery 访问 iframe 中的幻灯片编号来做到这一点，但我了解到，由于跨域脚本问题，这并非易事（如果可能的话）。

我已经研究过使用跨域消息传递，但如果我理解正确，那是不行的，因为我无法控制谷歌的服务器（drat）。我的下一个解决方案可能是将 PowerPoint 转换为 PNG 并构建一个简单的 PNG 查看器可以让我完全控制，但如果有人有一个解决方案，我可以在 Google 上托管文档并且仍然能够监控每张幻灯片上花费的时间，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:45:40.533

您可能可以在您的 power point 控件上方创建一些 div 元素，并在您单击该 div 时进行跟踪。

# c++ - Doxygen 私有函数

> ID：12147668
> 
> 赞同：10
> 
> 时间：2012-08-27T18:42:23.970
> 
> 标签：c++, doxygen

有没有办法让 doxygen 显示各个私有函数的文档？我希望 doxygen 不显示绝大多数私有函数的文档，而是显示少数私有函数的文档。我的动机是这些 C++ 私有函数作为扩展提供给 Python，我希望它们的文档出现在 Doxygen 中。但是，我不希望它们公开，因为它们只是类本身需要的；他们绝对属于私营部门。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-06-01T14:53:42.690

我在配置文件中设置了以下内容：

```
EXTRACT_PRIVATE = YES

HIDE_UNDOC_MEMBERS = YES 
```

这具有预期的效果，但仍会显示所有记录的私人成员的文档。

然后，我将`@internal`用作我不想显示的私人成员文档的第一行。

此外，我仍然可以使用普通的 C++ 注释来记录私有成员。IE。不要使用`/** ... */`使用`/* ... */`。通常我对成员变量使用普通注释。

最后，如果我真的想展示我可以设置的所有私人文档：

```
INTERNAL_DOCS = YES 
```

创建更广泛的文档版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T19:44:08.473

\cond 和 \endcond 命令之间的部分可以通过将其部分标签添加到 ENABLED_SECTIONS 配置选项来包含。如果节标签被省略，节将被无条件地排除在处理之外。

```
/** An interface */
class Intf
{
  public:
    /** A method */
    virtual void func() = 0;

    /// @cond COND1

    /** A method used for testing */
    virtual void test() = 0;

    /// @endcond
}; 
```

查看[条件帮助](http://www.doxygen.nl/manual/commands.html#cmdcond)

看不到 COND1 部分：只是不要将其添加到 ENABLED_SECTIONS 配置选项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:55:07.800

有几种方法可以实现这一目标。

你可以简单地不记录那些你不想看到的功能。默认情况下，Doxygen 不会显示您没有记录的任何成员。因此，您可以告诉它显示私人信息，并且不会显示任何未记录的私人成员。

# php - 通过网站上传数据

> ID：12147669
> 
> 赞同：0
> 
> 时间：2012-08-27T18:42:28.697
> 
> 标签：php, drupal

我正在创建用户应该从他的计算机上传 ASCII 文件的网站。该文件可能非常大，例如 50-100 Mb。我应该为此使用 ftp 还是服务器？Drupal 或 PHP 有对应的模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:11:49.650

要使用 PHP 从客户端获取文件，您正在查看 HTTP。PHP 的[FTP](http://php.net/manual/en/book.ftp.php)功能对此无济于事。传输大文件时首选 FTP 吗？是的，这个名字说明了一切。您应该能够使用 PHP 相当稳定地发布 50-100 Mb 大小的文件。如果你确实遇到了问题，他们可能会在可扩展性方面出现问题，在 pre-fork mod_php 安装上进行一些长时间运行的上传可能会很快耗尽你的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:17:30.317

FTP 对于大多数用户来说太复杂了。您可以在 PHP 中执行此操作，但您需要调高最大帖子大小以允许您上传如此大的文件

## 在 .htaccess 中：

php_value upload_max_filesize 110M

## php_value post_max_size 120M

唯一的问题是它使您面临拒绝服务攻击（有人可以缓慢上传大文件以使您的服务器保持忙碌，并且您不能在 PHP 中阻止它，因为 PHP 脚本直到文件才会启动上传完成）

# css - 侧边菜单页脚溢出

> ID：12147671
> 
> 赞同：0
> 
> 时间：2012-08-27T18:42:53.033
> 
> 标签：css, overflow, footer

我有一个带有页眉、内容、菜单和页脚位置的网页。我的内容和我的菜单在同一个名为“allcontent”的 div 中。我用浮动将它们放在正确的位置。（内容：浮动：左；- 菜单：浮动：右；）我添加了一个页脚，只是带有一个 clear:both 样式和一些文本格式。我的问题 - 正如您在图像中看到的那样 - 页脚不在正确的位置。我把它放在'allcontent' div 之后——其中包含菜单 div（！）——但它似乎没有效果。

我该怎么办？

[这是该网站的链接](http://eprojekt.srv.hu/e/leftweb/hu/)，在源代码中您可以查看 div 的更多详细信息。这是CSS。这与此有关：

```
#container {
vertical-align: top;
width: 800px;
text-align: left;
margin-right: auto;
margin-left: auto;
font-size: 9px;
min-height:100%;
margin-bottom: 50px;
}
#footer {
background-color: #2D2425;
font-size: 10px;
font-style: normal;
font-family: Arial, Helvetica, sans-serif;
color: #E2E2E2;
text-align: center;
margin: 40px auto 0;
clear:both;
border-top-width: 1px;
border-top-style:dashed;
border-top-color: #CCC;}

#allcontent {
clear: both;
padding-left: 10px;
min-width: 800px;
min-height: 100%;} 
```

*（更多在给定网站的资源中）* 我认为这些正在玩这个游戏。

我确实搜索了粘性页脚的东西，但那些是给我的，我想......我也一直在阅读关于填充和边距的技巧：没有效果。

对不起，我的英语不好！请尝试帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:48:03.377

我能够通过执行以下操作来修复：

1.) 添加`overflow: hidden`到`#allcontent`div。

`height: 135px`2.)从`#small`div 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:56:53.517

不要使用浮动属性。
1）删除和divs的`float`属性。 2）使用和为他们。 3) 删除 的属性。 `#big``#small`
`display:inline-block``vertical-align:top`
`height``#small`

# java - java - 为什么在java中使用map时出现空指针异常？

> ID：12147673
> 
> 赞同：0
> 
> 时间：2012-08-27T18:42:59.097
> 
> 标签：java, map, nullpointerexception

我`Map`在java中使用一个当我使用它时我得到空指针异常 `if(!GenericValidator.isBlankOrNull(itemsImagesMap.get(item.getuserId()).toString()))`

该地图不包含此用户 ID，但我已经检查过`!GenericValidator.isBlankOrNull`，但我也收到了空指针异常..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:46:25.920

要么`item`是`null`，你得到异常，因为你调用`getuserId`或`null`返回`itemsImagesMap.get(item.getuserId())`，`null`你`toString`调用`null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:49:12.653

您可能应该对您的代码进行一些检查。就像是：

```
if (item != null && item.getuserId() != null && itemsImagesMap.get(item.getuserId()) != null) {
  // do the rest of the logic here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:05:51.010

你应该——真的——避免排长队；）

将其拆分为多行，它将更容易调试。

（对不起，这不能回答问题，但这样做并发布结果）。

您是否在地图中放置了与 item.getuserId() 键对应的内容？

# java - Java 计算

> ID：12147675
> 
> 赞同：-2
> 
> 时间：2012-08-27T18:43:08.020
> 
> 标签：java

为什么：

```
System.out.println((3 + 7 + 10) * (1000 - 8) / (992 - 17)) 
```

打印`3`而不是`20`？

```
System.out.println (2.0 + 1.0/2 + 1.0/6 + 1.0/24 + 1.0/120) 
```

打印`2.7166666666666663`而不是`2.716666667`？

```
System.out.println (2147483647 + 1) 
```

打印`-2147483648`而不是`2147483648`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:46:32.390

```
System.out.println((3 + 7 + 10) * (1000 - 8) / 992 - 17) 
```

这会打印 3 而不是 20，因为...基本数学...

*   3 + 7 + 10 = 20
*   1000 - 8 = 992
*   20 * 992 / 992 - 17 = 20 - 17
*   20 - 17 = 3

* * *

```
System.out.println (2.0 + 1.0/2 + 1.0/6 + 1.0/24 + 1.0/120) 
```

这是一个浮点精度错误。

* * *

```
System.out.println (2147483647 + 1) 
```

整数溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:50:27.633

> System.out.println((3 + 7 + 10) * (1000 - 8) / 992 - 17) 打印 3 而不是 20？

[操作顺序](http://en.wikipedia.org/wiki/Order_of_operations)。首先计算括号得到 (20) * (992) / 992 - 17。然后，从左到右乘除得到 20 - 17。最后，减法得到 3。

> System.out.println (2.0 + 1.0/2 + 1.0/6 + 1.0/24 + 1.0/120) 打印 2.7166666666666663 而不是 2.716666667？

浮点运算。[Stack Overflow 上](https://stackoverflow.com/search?tab=relevance&q=floating%20point%20math)有很多关于浮点数学的问题，而快速的谷歌搜索可能会比你需要的更多。不过，[维基百科的文章](http://en.wikipedia.org/wiki/Floating_point_arithmetic)可能是一个好的开始。

> System.out.println (2147483647 + 1) 打印 -2147483648 而不是 2147483648？

溢出。Java 中整数的最大值为 2^31 - 1 或 2,147,483,647。当您向该值添加一个时，它会环绕到您看到的值。它与使用[2s 恭维](http://en.wikipedia.org/wiki/2s_compliment)的值的二进制表示有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:48:21.010

1.  `(3 + 7 + 10) * (1000 - 8) / 992 - 17`is `20 * 992 / 992 - 17`，归结为`20 - 17`，因此 is `3`， not `20`。
2.  浮点运算本质上是不准确的。
3.  有符号溢出是 Java 中定义明确的行为。`2147483647`是`0x7fffffff`Java；`0x7fffffff + 1`是`0x80000000`，或者，换句话说，`-2147483648`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:50:39.220

无法理解您试图通过第一个打印语句传达的内容，输出没有任何问题。在第三种情况下，int 是 32 位，并且数字超出范围。在大数字后放一个 l （待处理的时间一样长）以获得正确的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T18:51:51.640

关于#3：

如果使用 long，System.out.println (2147483647 + 1) 将打印出 2147483648。每个变量类型都有一个最大容量。

# html - 在 div 中居中对齐锚文本

> ID：12147685
> 
> 赞同：1
> 
> 时间：2012-08-27T18:43:53.027
> 
> 标签：html, css

我搜索了这个，但没有找到解决方案。我有一个带有文本的锚。

锚点的高度和宽度由 JS 在 DOM 加载时设置我需要锚点内的文本垂直和水平居中。

遵循了许多关于居中元素的教程。他们都没有工作。

这是我的html

```
<a href="#" class="wpsc_category_grid_item" title="Category1">
    <span>Category1</span>
</a> 
```

还有我的 CSS

```
.wpsc_category_grid_item {
    background: #000;
    margin:1px;
    float:left;
    text-align: center;
    display:table;
}

.wpsc_category_grid_item span{
    display: table-cell;
    vertical-align: middle;
    width:100%;
    height:100%;
    color:#fff;
    text-align: center;
    font-weight: bold;
    text-decoration: none; 
} 
```

我需要这些文本，也需要垂直居中..

![在此处输入图像描述](../Images/1fb57c8690ec9e399f928822f95b19f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:49:14.063

我用你的代码做了一个[js小提琴。](http://jsfiddle.net/WAjBE/)我添加后它起作用了

```
width: 100%;
height:100%; 
```

到`.wpsc_category_grid_item`

# mongodb - 在 mongodb 中存储 upvotes/downvotes

> ID：12147686
> 
> 赞同：10
> 
> 时间：2012-08-27T18:43:55.163
> 
> 标签：mongodb, database-design

我有一个集合`Posts`，`Users`用户可以在其中投票/反对每个帖子。将其存储在 mongodb 数据库中以确保用户不能多次为给定文档投票的最佳方法是什么？

我想出的最简单的 nosql-ish 解决方案是存储在每个`Post`文档中投票的 user_ids 数组（甚至是 +1 或 -1 的数组`(user_id, vote)`，`vote`以便用户能够更改他们的投票）。考虑到每个帖子都可以有数千票，从性能的角度来看这是一个好主意吗？

像 Reddit 这样非常受欢迎的网站，其热门帖子可以有数十万票吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:50:37.310

> 像 Reddit 这样非常受欢迎的网站，其热门帖子可以有数十万票吗？

他们呢？在关系数据库中使用你的想法，你有一个整数作为用户 id 指针，一个整数作为 post 指针，一个字节作为投票。每张选票总共 9 个字节。

当然，有一些索引开销。每次投票总共 15 个字节。600 万张投票将占用 90 兆字节的磁盘空间。

Reddit 会在一段时间后锁定帖子，因此无法对其进行编辑或投票。因此，Reddit 不必永远存储个人选票。只是投票总数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T19:26:43.807

MongoDB 文档目前被限制为最大 16MB，因此假设 Gilbert 的计算是准确的，您将无法`user_id`在`Post`文档中存储所有 6 百万。

但是，您可以考虑将投票存储在`User`文档中（即`post_id`特定用户投票的 s）。用户对 600 万个不同的帖子进行投票的可能性要小得多，因此这样您就不会很快达到大小限制。

处理此问题的另一种方法：如果您希望对特定帖子有很多投票，您可能希望将`Post`文档之外的投票存储在单独的集合中并执行附加查询，类似于 SQL 方式中的多对多 JOIN 表：

```
user_votes { user_id: ObjectId(...), post_id: ObjectId(...), vote:-1 } 
```

并在 (user_id, post_id) 上创建复合索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-31T11:37:32.067

好吧，我知道这个问题被问到已经有一段时间了，但是我对上述答案或在类似问题上发布的任何其他答案不满意。所以最后我想出了另一个答案。

首先，如上所述，MongoDB 文档目前被限制为最大 16MB。因此，实现这一点的合乎逻辑的方法是，拥有 2 个不同的集合，一个用于 upvotes，一个用于 downvotes，它将存储 postid 和已投票或否决的用户数组。这将帮助我们分开收藏并有更多的工作空间。为了清楚起见，这里是我使用的模式：

赞成票：

```
const mongoose = require('mongoose')
const Schema = mongoose.Schema

const UpvoteModel = new Schema({
    questionid: {
        type: Schema.Types.ObjectId,
        ref: 'questionsModel'
    }
    ,
    votes: [{
        user: {
            type: Schema.Types.ObjectId,
            ref: 'users'
        }
    }]
})

module.exports = Upvote = mongoose.model('upvotes', UpvoteModel) 
```

对于否决票：

```
const mongoose = require('mongoose')
const Schema = mongoose.Schema

const DownvoteModel = new Schema({
    questionid: {
        type: Schema.Types.ObjectId,
        ref: 'questionsModel'
    }
    ,
    votes: [{
        user: {
            type: Schema.Types.ObjectId,
            ref: 'users'
        }
    }]
})

module.exports = Downvote = mongoose.model('downvotes', DownvoteModel) 
```

帖子收集（或本例中的问题）：

```
const mongoose = require('mongoose')
const Schema = mongoose.Schema

const QuestionsSchema = new Schema({
    user: {
        type: Schema.Types.ObjectId,
        ref: 'users'
    },
    title: {
        type: String,
        required: true
    },
    description: {
        type: String
    },

    voteCount: {
        type: Number
    },
    votes: [{
        user: { type: Schema.Types.ObjectId }
    }],

    views: [{
        user: { type: Schema.Types.ObjectId }
    }],
    answers: [{
        user: { type: Schema.Types.ObjectId },
        answer: {
            type: String
        },
        date: {
            type: Date,
            default: Date.now
        }
    }],
    date: {
        type: Date,
        default: Date.now
    }

})

module.exports = Question = mongoose.model('questionsModel', QuestionsSchema) 
```

每次创建帖子/问题时，帖子/问题 id 都会存储在 upvote 和 downvote 表中，然后如果用户单击 upvote 或 downvote，您需要将该用户添加到该特定表中，然后去更新 post/question 中的 voteCount桌子。

帖子/问题路线：

```
router.post('/upvote', (req, res) => {

    Upvote.findOne({ questionid: req.body.params.questionid })
        .then(oneVote => {

            if (oneVote.votes.filter(user => req.body.params.userid).length === 1) {

                Question.updateOne({ _id: req.body.params.questionid },
                    { $inc: { voteCount: -1 } })
                    .then(() => {

                        Upvote.updateOne({
                            questionid: req.body.params.questionid,
                        },
                            {
                                $pull: {
                                    votes: { user: ObjectId(req.body.params.userid) }
                                }
                            })
                            .then(() => console.log('decrement by -1'))
                    }
                    )
                    .catch(err => console.log(err))
            }

            else if (oneVote.votes.filter(user => req.body.params.userid).length === 0) {

                Upvote.findOneAndUpdate({
                    questionid: req.body.params.questionid,
                    'votes.user': { $ne: ObjectId(req.body.params.userid) }
                },
                    {
                        $push: {
                            votes: { user: ObjectId(req.body.params.userid) }
                        }
                    },
                    { useFindAndModify: false }
                )
                    .then(oldupvote => {
                        Downvote.findOne({ questionid: req.body.params.questionid })
                            .then(downvote => {
                                if (downvote.votes.filter(user => req.body.params.userid).length > 0) {

                                    Downvote.updateOne({
                                        questionid: req.body.params.questionid,
                                    },
                                        {
                                            $pull: {
                                                votes: { user: ObjectId(req.body.params.userid) }
                                            }
                                        })
                                        .then(() => {
                                            Question.updateOne({ _id: req.body.params.questionid },
                                                { $inc: { voteCount: 2 } })
                                                .then(() => console.log('increment by 2')
                                                )
                                                .catch(err => console.log(err))
                                        })
                                        .catch(err => console.log(err))

                                }
                                else {
                                    Question.updateOne({ _id: req.body.params.questionid },
                                        { $inc: { voteCount: 1 } })
                                        .then(() => console.log('increment by 1')
                                        )
                                        .catch(err => console.log(err))
                                }
                            })
                            .catch(err => console.log(err))

                    })
            }

        })
        .catch(err => console.log(err))
}) 
```

否决路线：

```
router.post('/downvote', (req, res) => {

    Downvote.findOne({ questionid: req.body.params.questionid })
        .then(oneVote => {
            if (oneVote.votes.filter(user => req.body.params.userid).length === 1) {
                Question.updateOne({ _id: req.body.params.questionid },
                    { $inc: { voteCount: 1 } })
                    .then(() => {
                        Downvote.updateOne({
                            questionid: req.body.params.questionid,
                        },
                            {
                                $pull: {
                                    votes: { user: ObjectId(req.body.params.userid) }
                                }
                            })
                            .then(() => console.log('increment by 1'))
                            .catch(err => console.log(err))

                    }
                    )
                    .catch(err => console.log(err))
            }

            else if (oneVote.votes.filter(user => req.body.params.userid).length === 0) {
                Downvote.findOneAndUpdate({
                    questionid: req.body.params.questionid,
                    'votes.user': { $ne: ObjectId(req.body.params.userid) }
                },
                    {
                        $push: {
                            votes: { user: ObjectId(req.body.params.userid) }
                        }
                    },
                    { useFindAndModify: false }
                )
                    .then(oldownvote => {
                        Upvote.findOne({ questionid: req.body.params.questionid })
                            .then(upvote => {
                                if (upvote.votes.filter(user => req.body.params.userid).length > 0) {
                                    Upvote.updateOne({
                                        questionid: req.body.params.questionid,
                                    },
                                        {
                                            $pull: {
                                                votes: { user: ObjectId(req.body.params.userid) }
                                            }
                                        })
                                        .then(() => {
                                            Question.updateOne({ _id: req.body.params.questionid },
                                                { $inc: { voteCount: -2 } })
                                                .then(() => console.log('decrement by -2')
                                                )

                                        })
                                        .catch(err => console.log(err))
                                }
                                else {
                                    Question.updateOne({ _id: req.body.params.questionid },
                                        { $inc: { voteCount: -1 } })
                                        .then(() => console.log('decrement by -1')
                                        )
                                        .catch(err => console.log(err))
                                }
                            })
                            .catch(err => console.log(err))

                    })
                    // .then(() => {
                    //     Upvote.findOne({ questionid: req.body.params.questionid })
                    //         .then(updatedupvote => console.log(updatedupvote))
                    // })
                    .catch(err => console.log(err))

            }

        })
        .catch(err => console.log(err))

}) 
```

This answer is posted for future reference if anyone is looking for a similar answere, here it is.

# facebook - FQL: 喜欢这个的用户也喜欢

> ID：12147687
> 
> 赞同：0
> 
> 时间：2012-08-27T18:43:56.387
> 
> 标签：facebook, facebook-graph-api, facebook-fql

是否可以向 facebook 查询有关哪些页面（在当前域上）用户喜欢当前页面，也喜欢的信息？基本上，能够创建一个“喜欢此页面的用户也喜欢：”，然后是当前域上的页面列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:46:00.907

我认为您可以实际做到这一点的唯一方法是订阅 edge.create 事件，并将其与 user_id、页面地址等一起存储在您自己的数据库中。

```
https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/ 
```

使用 FQL，问题是您需要读取 'url_like' 表才能找到此信息，但唯一可索引的字段是 user_id，这意味着您只能查询当前活动用户。如果您确实想在您的网站上向当前用户显示他们喜欢的其他页面，您可以使用如下查询：

```
 SELECT url FROM url_like WHERE user_id = me() and strpos(url, 'http://www.example.com') = 0 
```

但正如我所说，对于您描述的用例，您需要自己存储这些信息，然后执行您自己的查询来测试最受欢迎的帖子。或者，推荐插件可能会满足您的需求

```
https://developers.facebook.com/docs/reference/plugins/recommendations/ 
```

# android - Android 列表视图为空

> ID：12147703
> 
> 赞同：0
> 
> 时间：2012-08-27T18:45:24.587
> 
> 标签：android, android-listview

我正在构建一个新闻应用程序，我不想在 ListView 仍在加载时立即显示主要活动，因为我创建了一个启动活动。但是现在我不知道如何检查加载何时完成，但后来我有了一个想法，我可以从启动活动中以某种方式检查主活动中的 ListView 是否为空吗？

```
public class Init extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.init);

        WebView loader = (WebView) findViewById(R.id.loader);
        loader.loadUrl("file:///android_asset/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:58:48.427

使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

创建一个启动屏幕，它调用异步任务。异步任务应该下载新闻项目。调用 onPostExecute 时转移到主视图并填充列表框...

我想这具有显示进度（onProgressUpdate 和 publishProgress）的优势 - 即，如果您查看多个数据源，并且有一个 onPostExecute 方法来确定下载何时完成......

您也可以取消异步任务...

认为满足您的需求...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:47:28.340

Are you also looking for when the page has finished downloading? If so, create a [WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html) subclass, attach it to your WebView, and handle the override onPageFinished().

# javascript - Ember.js Handlebars.helpers.collection 不起作用

> ID：12147704
> 
> 赞同：3
> 
> 时间：2012-08-27T18:45:25.840
> 
> 标签：javascript, model-view-controller, ember.js

我是 ember 的新手，我正在尝试使用代码，所以我从网站下载了入门工具包作为起始模板。

我正在尝试为 CollectionView 使用 ember 车把助手，我复制粘贴示例代码，但我看到的只是“嗨”3 次，没有名称：

[http://docs.emberjs.com/symbols/Handlebars.helpers.html#method=.collection](http://docs.emberjs.com/symbols/Handlebars.helpers.html#method=.collection)

我在做什么错？

```
<script type="text/x-handlebars">
    {{#collection contentBinding="App.items"}}
        Hi {{content.name}}
    {{/collection}}
</script>

<script>
App = Ember.Application.create();

App.items = [
    Ember.Object.create({name: 'Dave'}),
    Ember.Object.create({name: 'Mary'}),
   Ember.Object.create({name: 'Sara'})
]
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:56:03.857

这是关于在最新版本的 ember 中管理上下文的方式的问题，在以下位置进行了解释：

[content.name 为集合返回空](https://stackoverflow.com/questions/12028209/content-name-returns-empty-for-collection/12028795#12028795)

总之，您需要在模板中执行此操作：

```
<script type="text/x-handlebars">
    {{#collection contentBinding="App.items" }}
        Hi {{view.content.name}} 
    {{/collection}}
</script>​ 
```

小提琴展示它：http: [//jsfiddle.net/XdHRS/](http://jsfiddle.net/XdHRS/)

出于相同的目的，您可以只使用每个：

```
<script type="text/x-handlebars">
    {{#each App.items }}
        Hi {{name}} 
    {{/each}}
</script>​ 
```

小提琴展示它：http: [//jsfiddle.net/e3UTt/13/](http://jsfiddle.net/e3UTt/13/)

# android - 在按钮单击时将对象作为参数传递

> ID：12147705
> 
> 赞同：1
> 
> 时间：2012-08-27T18:45:28.517
> 
> 标签：android

我刚刚开始学习 Android，我有一个简单的问题。我有一个单独的类 Team，其中有 3 个变量（字符串名称、int 目标、int 点）。在我的主要活动中，一旦单击按钮，我想增加每个 Team 对象的目标和/或分数。目前我有一个方法：

```
 public void updatePoints(View v, Team t){
        t.points++;
        } 
```

在我的 xml 文件中，我有：

```
android:onClick="updatePoints" 
```

这与按钮有关。我可以像上面那样传递 Team 对象吗？如果是这样，怎么办？正如我所说，我才刚刚开始学习 Android，所以任何建议都将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:57:49.887

用作 XML 中定义的**onClick**侦听器的方法的签名必须是

```
public void myMethod(View v) 
```

否则找不到。

然后，您可以在此方法中做任何您想做的事情，例如调用`updatePoints()`. 如果要维护 Team 和 View 之间的关系，可以使用[setTag()](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)。

例如：

```
button.setTag("com.example.team", myTeam); 
```

然后在 onClick 方法中

```
public void myMethod(View v) {
   ((Team)v.getTag("com.example.team")).points++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:11:35.547

如果你有....

```
android:onClick="updatePoints" // in XML file 
```

然后在你的java文件中你需要定义......

```
public void updatePoints(View v){   
    // This is where you update each team

    // I think v.getId() retrieves the id of the button (or view) that was clicked
} 
```

我假设在你的活动中你有......

团队团队[]; // 一组团队（不止一个），因此您需要做一些事情来识别您尝试更新的团队...所以我会更改您对团队的定义

```
public class Team {
    public int identity; // This is the new field
    public String name;
    public int goals;
    public int points;
} 
```

虽然可以，但我不会使用 tag 属性来识别团队......我会使用身份字段来识别单个团队。这样，团队就不会链接/绑定到按钮......更多功能恕我直言

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:49:28.550

您可以在类中将 Team 声明为变量：

```
private Team myTeam; 
```

然后，创建您的方法：

```
public void updatePoints(View v){
        myTeam.points++;
} 
```

使用类变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:49:52.820

您需要为该按钮创建事件侦听器以便在单击时执行某些操作，然后您需要创建该 Team 类的对象，然后您只需在该类中调用 updatePoints 方法。

# sql-server - ms sql 2008 r2 自动重建索引

> ID：12147707
> 
> 赞同：1
> 
> 时间：2012-08-27T18:45:35.867
> 
> 标签：sql-server, sql-server-2008

我在 MS SQL 2008 R2 中有一个数据库我想知道是否存在一些实用程序（在 MS Management Studio 中）或其他可以自动重建数据库索引的实用程序。

自动我的意思是每周或定期重建一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T20:38:34.690

在管理文件夹下，有一个维护计划文件夹。您可以右键单击它并选择维护计划向导。

如果您想超越这些，请在此处查看广泛使用、高度灵活的脚本，这些脚本远远超出了向导： http: [//ola.hallengren.com/](http://ola.hallengren.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:48:56.890

请参阅[如何：重建索引 (SQL Server Management Studio)](http://technet.microsoft.com/en-us/library/ms187874%28v=sql.105%29.aspx)和[使用 Transact-SQL 重建索引](http://msdn.microsoft.com/en-us/library/ms189858.aspx#TsqlProcedureReorg)。

# php - 未在 foreach 循环中分配数组元素

> ID：12147711
> 
> 赞同：0
> 
> 时间：2012-08-27T18:46:11.583
> 
> 标签：php, arrays

我正在尝试获取分配给数组元素的 id 值。我遇到的问题是它会通过 foreach 每 70 个循环分配一个 id。我不太确定我在这个问题上做错了什么。

```
$search = 'echem';
$data = array();
$tags = null;
$i = 0;
//var_dump($this->videos);
foreach ($this->videos as $key => $value) {
    foreach ($value as $key => $value) {
        if ($key === 'id') {
            $data[$i]['id'] = (int)$value;
        }
        if ($key == 'tags') {
            $tags = explode(',', $value);
        }
        //echo $key . ' - ';
        if (is_array($tags)) {
            foreach ($tags as $key => $value) {
                if (strtoupper($value) == strtoupper($search)) {
                    //echo 'Search Found <br/>';
                    $data[$i]['found'] = 1;
                }
                //echo $value.', ';
            }
            //echo '<br/>';
        }
        if (!isset($data[$i]['found'])) {
            $data[$i]['found'] = 0;
        }
        $data[$i]['subId'] = $i;
        $i++;
    }
} 
```

如您所见，我正在使用以下代码检查 $key 是否为第 8 行的 id：

```
if ($key === 'id') {
     $data[$i]['id'] = (int)$value;
} 
```

然后我运行循环的其余部分，它似乎运行得很好，并根据需要分配所有内容。键 id 是每个循环中的第一个键，所以为什么它不分配它让我很难过。任何帮助深表感谢。

var_dump() 的输出：

```
array (size=58086)
  0 => 
    array (size=3)
      'id' => int 1
      'found' => int 0
      'subId' => int 0
  1 => 
    array (size=2)
      'found' => int 0
      'subId' => int 1
  2 => 
    array (size=2)
      'found' => int 0
      'subId' => int 2
  3 => 
    array (size=2)
      'found' => int 0
      'subId' => int 3
  4 => 
    array (size=2)
      'found' => int 0
      'subId' => int 4
  5 => 
    array (size=2)
      'found' => int 1
      'subId' => int 5
  6 => 
    array (size=2)
      'found' => int 0
      'subId' => int 6
  7 => 
    array (size=2)
      'found' => int 0
      'subId' => int 7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:05:25.157

我有点无聊，所以我重写了你的代码：

1.  我已将其重命名`as $key => $value`为更明智的名称。

2.  我已经删除了中间`foreach`循环，因为一个简单的数组引用`isset()`就足够了。

3.  `strtoupper()`在循环开始之前应用`$search`（避免多次这样做）。

结果：

```
$search = 'echem';
$data = array();

$i = 0;
$search = strtoupper($search);

foreach ($this->videos as $video) {
    if (!isset($video['id'], $video['tags'])) {
        continue; // skip records you can't use
    }
    // populate the `$data` entry
    $data[$i]['id'] = $video['id'];
    $data[$i]['tags'] = explode(',', $video['tags']);

    // find a match in the tags
    $data[$i]['found'] = 0;
    foreach ($data[$i]['tags'] as $tag) {
        if (strtoupper($tag) == $search) {
            $data[$i]['found'] = 1;
        }
    }
    $data[$i]['subId'] = $i;
    $i++;
} 
```

# c# - 如何从 Paypal 调用 DoDirectPayment API

> ID：12147720
> 
> 赞同：1
> 
> 时间：2012-08-27T18:46:50.927
> 
> 标签：c#, paypal

首先，这与桌面应用程序而不是 ASP .Net 应用程序有关。

我为我的项目添加了一个 Web 引用，并构建了各种数据对象，例如 PayerInfo、Address 和 CreditCard。问题是，我如何实际调用 DoDirectPaymentRequest 并传入对象？根据文档，我使用 CallerService 和 ProfileFactory 对象，但我没有这些可用。

任何想法我如何从 EXE 调用 API？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:11:01.550

在您的项目中使用服务参考而不是 Web 参考。您应该创建一个***PayPalAPIInterfaceClient***或***PayPalAPIAAInterfaceClient***的实例。之后，您将能够调用 DoDirectPayment。

例子：

```
 DoDirectPaymentResponseType result;
        using (_client = new PayPalAPIAAInterfaceClient())
        {

            DoDirectPaymentRequestType pp_Request = new DoDirectPaymentRequestType();
            pp_Request.Version = _version;
            pp_Request.DoDirectPaymentRequestDetails = new DoDirectPaymentRequestDetailsType();
            pp_Request.DoDirectPaymentRequestDetails.IPAddress = ipAddress;
            pp_Request.DoDirectPaymentRequestDetails.CreditCard = new CreditCardDetailsType();
            pp_Request.DoDirectPaymentRequestDetails.CreditCard.CreditCardNumber = CCNum;

            // ..FILL DATA

            // NOTE: The only currency supported by the Direct Payment API at this time is US dollars (USD).
            pp_Request.DoDirectPaymentRequestDetails.PaymentDetails.OrderTotal.currencyID = CurrencyCodeType.USD;
            pp_Request.DoDirectPaymentRequestDetails.PaymentDetails.OrderTotal.Value = amountOfUSD;

            var dp = new DoDirectPaymentReq
            {
                DoDirectPaymentRequest = pp_Request
            };

            var credentials = new CustomSecurityHeaderType
            {
                Credentials = new UserIdPasswordType
                {
                    Username = _username,
                    Password = _password,
                    Signature = _signature,
                    AppId = ApiId
                }
             };

            result = _client.DoDirectPayment(ref credentials, dp);
        } 
```

# c# - 以编程方式更改应用程序的 AppPool

> ID：12147721
> 
> 赞同：3
> 
> 时间：2012-08-27T18:46:55.037
> 
> 标签：c#, iis-7

我需要更改某个网站下所有/选定应用程序的应用程序池。我的 IIS 上有所有网站和应用程序池，但我无法更改它们。有任何想法吗？

这是我到目前为止所做的......这对我来说看起来很奇怪，因为只有字符串变化，而不是对象。

```
private void ChangeAppPool()
{
    Microsoft.Web.Administration.Site site = (Microsoft.Web.Administration.Site)this.websiteList.SelectedItem;
    Microsoft.Web.Administration.ApplicationPool appPool = (Microsoft.Web.Administration.ApplicationPool)this.appPoolCombo.SelectedItem;

    site.Stop();
    site.ApplicationDefaults.ApplicationPoolName = appPool.Name;

    foreach (var item in site.Applications)
    {
        item.ApplicationPoolName = appPool.Name;
    }

    site.Start();
    appPool.Recycle();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T19:07:31.857

我修改了您给定的代码以**使用[ServerManager](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.servermanager%28v=vs.90%29.aspx)类**，因为您的代码对我不起作用。（什么是`this.websiteList.SelectedItem`？将字符串转换为站点？）

```
ServerManager serverManager = new ServerManager();
Site site = serverManager.Sites[0]; // get site by Index or by siteName
ApplicationPool appPool = serverManager.ApplicationPools[1]; // get appPool by Index or by appPoolName

site.Stop();
site.ApplicationDefaults.ApplicationPoolName = appPool.Name;

foreach (var item in site.Applications)
{
    item.ApplicationPoolName = appPool.Name;
}

serverManager.CommitChanges();  // this one is crucial!!! see MSDN: 
// Updates made to configuration objects must be explicitly written to the configuration 
// system by using the CommitChanges method!!
site.Start();
appPool.Recycle(); 
```

# grails - 根据用户角色访问数据库。在这里使用过滤器来保证安全

> ID：12147723
> 
> 赞同：0
> 
> 时间：2012-08-27T18:46:58.530
> 
> 标签：grails, datasource

在我的 grails 应用程序中使用简单的过滤器进行登录和安全。现在我需要根据登录的用户角色使用不同的登录凭据连接到 db - test1。如果管理员登录获得写入权限，那么登录和如果用户角色登录则只读。如何用过滤器实现它？

数据源.groovy

```
 environments {
 development {

/*IF LOGIN 'ADMIN' - SHOULD CONNECT USING THIS
 dataSource {
           username = 'admin'
           password = 'Guard1an'
           url = "jdbc:jtds:sqlserver://test1:1433;
           MVCC=TRUE"
           dbCreate = 'update'
       }
/*IF LOGIN 'USER' - SHOULD CONNECT USING THIS*/

 dataSource {           
              dbCreate = "update" // one of 'create', 'create-drop','update'
              username = 'user'
              password = 'tesoyear'
              url = "jdbc:jtds:sqlserver://test1:1433;
        }
dataSource_wldb1 {
            username = 'gdx'
            password = 'pinoil'
            url = "jdbc:jtds:sqlserver://wldb:1433/IVR_GUARDIAN"
            dbCreate = 'update'
    }
} 
```

安全过滤器.groovy

```
 class SecurityFilters {
   def filters = {
   loginCheck(controller: 'load', action: '*') {
       before = {
          if (!session.user && !actionName.equals('login')) {
              flash.message = "User is not Logged in.Please login "
              redirect(controller:'user', action: 'index')
              return false
           }
       }
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:55:14.903

如果您想保护控制器，使用 @Secured 注释应该足够（并且更好）。这允许您通过指定所需的用户角色来保护整个控制器或单个方法。查看[http://blog.springsource.org/2010/08/11/simplified-spring-security-with-grails/](http://blog.springsource.org/2010/08/11/simplified-spring-security-with-grails/)了解更多详情。下面还有一个例子。

如果您需要更复杂的安全性，请检查 spring-security-acl 插件，它允许授予特定数据库对象的权限。

```
package org.example

import grails.plugins.springsecurity.Secured

class PostController {

    @Secured(['ROLE_USER'])
    def followAjax = { ... }

    @Secured(['ROLE_USER', 'IS_AUTHENTICATED_FULLY'])
    def addPostAjax = { ... }

    def global = { ... }

    @Secured(['ROLE_USER'])
    def timeline = { ... }

    @Secured(['IS_AUTHENTICATED_REMEMBERED'])
    def personal = { ... }
} 
```

# java - 如何检查列表中的元素是否相同？

> ID：12147725
> 
> 赞同：4
> 
> 时间：2012-08-27T18:46:58.910
> 
> 标签：java, list, set

Java中是否有一种更简洁的方法来确认其中的所有元素`List`都是相同的？

```
boolean elementsAreIdentical() {
  return new HashSet<O>(list).size() == 1;
} 
```

通过'cleaner'，我想知道我们是否可以在不必创建全新对象的情况下做到这一点？根据大小，开销可能很大。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:51:51.553

```
if (Collections.frequency(list, list.get(0)) == list.size()) {
  /* duplicates */
} 
```

...对于非空列表。否则，

```
final int n = list.size();
if (n == 0 || Collections.frequency(list, list.get(0)) == n) {
  /* duplicates */
} 
```

参见规范[`Collections.frequency`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)。这将比您的方法以及其他方法便宜，例如`Collections.nCopies(list.get(0), list.size()).equals(list)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:58:23.637

它有点冗长，但它分别具有时间`O(n)`和`O(1)`空间复杂性，尽管一旦找到第一个不相同的元素就会停止：

```
public static <T> boolean elementsAreIdentical(List<T> l) {
    if (!l.isEmpty()) {
        Iterator<T> it = l.iterator();
        T unique = it.next();
        while (it.hasNext()) {
            if (!it.next().equals(unique)) {
                return false;
            }
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:52:57.307

这是实现结果的一种非常昂贵的方式——如果是大型数据结构，您将面临内存占用和 CPU 周期的巨大开销。我的第一个建议是在创建列表时控制它。

# css - 如何正确清除此设计？

> ID：12147726
> 
> 赞同：0
> 
> 时间：2012-08-27T18:47:01.130
> 
> 标签：css, css-float

我有一个网站使用浮动/清除方法进行 3 列设计（2 个侧面 - 左右 - 以及主要文章）。

两边都是浮动的（一个左边，另一个右边），但我必须在我的文章中包含一个自动生成的表格，其中包含一些明确的内容：包括。由于清除，这导致表格出现在侧面下方。

我错过了什么？在这种情况下我能做什么？我做了一个网站已经有一段时间了，我被困在这里。

这是我的问题的极简代码：

jsfiddle.net/89kpd/

我希望表单内容位于“我的表单”标题下方。

我能想到的是在表单中使用 display:inline-block ：

jsfiddle.net/89kpd/2/

但这需要我更改内部组件，我不希望这样做。

但也许有更好的方法来设计我的网站，而不使用浮动/清除方法。我想我应该在这里做点什么。我不关心 IE6 的兼容性。对于 IE7，我们会看到，但可能并不重要......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:33:06.700

尝试将#main div 浮动到左侧，使其在其他浮动 div 之间浮动。

**[jsFiddle 示例](http://jsfiddle.net/j08691/89kpd/3/)**

添加：

```
#main {
 float:left;   
}​ 
```

到你的 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:59:20.583

显然，整个东西需要 500px 宽。试试这个 HTML：

```
<div id="blue">
    <aside id="black"></aside>
    <article id="main">
        <h2 class="center">My Form:</h2>
        <div class="row">
            <label for="name">Name:</label>
            <input type="text" name="name" id="name" />
        </div>
        <div class="row">
            <label for="email">Email:</label>
            <input type="text" name="email" id="email" />
        </div>
    </article>
    <aside id="red"></aside>
    <br clear="all" />
</div>
<br clear="all" /> 
```

CSS：

```
#blue{background:blue; width: 500px; height: 600px; color:white;}

#black{float:left; background:black; width: 120px; height: 345px; float: left;}

#red{float:left; background:red; width: 120px; height: 345px; float:right;}

#main{float:left;width:260px;}

label { float:left; width:100px; }

input { float:left; width: 150px; color:black; }

.row { clear: both; }

h2 { font-size:20px; text-align:center; } 
```

# .net - 从coldfusion运行.NET dll

> ID：12147728
> 
> 赞同：2
> 
> 时间：2012-08-27T18:47:12.780
> 
> 标签：.net, dll, coldfusion

我进行了很多搜索并完成了我发现的建议，但似乎没有任何效果。返回数字的最简单的 C# DLL 文件：

```
namespace TestClass
{
    public class Class1
    {
        public int tester()
        {
            return 5;
        }
    }
} 
```

冷融合代码：

```
<cfobject type=".NET" name="myDLL" class="TestClass.Class1" assembly="d:/path/to/dll/TestClass.dll"> 
```

我所有的尝试都导致我出现这个错误：

```
Class TestClass.Class12 not found in the specified assembly list. 
The assembly that contains the class must be provided to the assembly attribute. 
```

我不知道问题可能出在哪里。任何帮助将不胜感激。

此外，下面的代码确实有效：

```
<cfobject type=".NET" name="seClass" class="System.Environment">
<cfoutput>#seClass.Get_Version().ToString()#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:01:41.207

要做到这一点，这可能需要一些棘手的试验和错误。但是错误是指一个可能是 JNBDOtNetSide.exe.config 文件的一部分的程序集列表，该文件可以在 jnbridge 目录中找到（该目录的路径取决于您设置服务器的方式）。

在该文件中，您会发现一个注释掉的 xml 节点`<jnibridge>`，如下所示。

```
 <!--
    <assemblyList>
        <assembly file="path to first .NET-side assembly"/>
        <assembly file="path to second .NET-side assembly"/>
    </assemblyList>
    --> 
```

您可以尝试将路径放在那里并重新启动服务。其他要尝试的事情 - 将您的程序集添加到全局缓存和（最后的手段）删除在 Web-INF 中实例化的核心代理 jar 文件。如果您在我的博客 (coldfusionmuse.com) 中搜索“.NET 集成”，您会发现一些可以帮助您入门的额外线索。尽管根据我的经验，这里有很多试验和错误。

# c++ - 如何在 C/C++ 中随机访问文本文件？

> ID：12147734
> 
> 赞同：2
> 
> 时间：2012-08-27T18:47:38.493
> 
> 标签：c++, c, unix

我有一个大日志文件，其中的记录按时间排序。每条线都有时间。我需要找到时间 T1 和时间 T2 (T1 <= T2) 之间的所有记录。我可以逐行扫描整个文件并找到 T1 的起始行，将其复制到缓冲区中，然后扫描下一行，直到到达结束时间 T2。这会起作用，但效率不高。

我想知道是否可以使用二进制搜索来定位时间为 T1 和 T2 的行。但我不确定如何确定以下内容：

1.  文件的中间行
2.  如何确定我们应该传递给的偏移量`lseek()`？

是否可以对文件使用二进制搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:15:34.217

让我们假设，您的行在平均长度附近都是合理的（这意味着没有行会占用一半左右的日志），这将使二进制搜索变得可行。

接下来，我还将假设您将具有以下功能：

```
//find the first start of a new log line after (or including) position start
//return the last position of the file if no start could be found
streampos findNextLineStart(ifstream &file, streampos start);
//extract the data as a timestamp from a line
int extractDate(ifstream &file, streampos lineStart); 
```

通过这些功能，我们可以实现以下功能：

```
//find the position of the first line whose date is bigger than the given
streampos lower_bound(ifstream &file, int date)
{
  file.seekg(0, ios::end);
  streampos begin = 0, 
            end = file.tellg();
  while(begin < end)
  {
     streampos cur = (begin + end) / 2;
     streampos start = findNextLineStart(file, cur);
     //was a line start found?
     if(start < end)
     {
        int lineDate = extractDate(file, start);
        if(lineDate < date)
          begin = start;
        else
          end = start;
     }
     else
       //narrow the bound as no line was found
       end = cur;
  }
  return begin;
} 
```

我不保证这会起作用（在所有极端情况下），但它勾画了整体实现。一个人会使用另一个函数`upper_bound`，使用那些你可以得到在你的范围内的行的开始和结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:16:38.107

首先，您可能不想进行二分搜索来查找范围内的最后一条记录。找到 T1 后，您会线性读取记录，直到找到超出所需范围的记录，因此您实际上只需要找到该范围内的第一条记录。

此外，您实际上并不需要通过查找确切的第 n/2 条记录来实现二进制搜索。如果您只是寻找两个当前边界之间的字节，找到下一条完整记录并从中更新您的边界，那么应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:50:11.243

如果您有足够的地址空间，请考虑使用内存映射文件。它们往往是最简单、最有效的方法之一。使用 boost::iostreams::mapped_file 以获得可移植性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T19:10:41.720

你不需要中线。相反，您可以取中间**字符**，然后一次向后移动一个字符，直到找到换行符；那么你知道你有当前行的开始。如果该行的时间戳在未来太远，那么您可以丢弃该行及其之后的所有内容。如果它的时间戳在过去太远，丢弃它和它之前的所有东西。您可以重复此操作，直到找到所需的行。

这是标准的二分搜索算法。在二分查找中，您并不真的需要中间线 - 有大约在中间的东西就足够了。在某些极端情况下它可能会很慢，其中某些行比其他行长得多，但通常它会足够快**。**

# html - 如何垂直对齐不同的内容

> ID：12147757
> 
> 赞同：1
> 
> 时间：2012-08-27T18:49:27.880
> 
> 标签：html, css

[http://jsfiddle.net/D35dJ/6/](http://jsfiddle.net/D35dJ/6/)

为什么当我在段落.info中有不同的内容时会改变他的垂直位置，例如链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:54:26.950

这里：http: [//jsfiddle.net/D35dJ/10/](http://jsfiddle.net/D35dJ/10/)

我将两个容器的显示属性更改为表格单元格。我还添加了属性垂直对齐。现在它应该工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:53:44.780

将 a 添加`vertical-align: top`到`.info`div，并使其`display: inline-block`而不是仅仅内联为我修复它。

[小提琴](http://jsfiddle.net/D35dJ/11/)

# jquery - jQuery填充表单插件和json方括号问题

> ID：12147758
> 
> 赞同：0
> 
> 时间：2012-08-27T18:49:29.487
> 
> 标签：jquery, json

我有一个节点服务器返回一个包含数组的 json 字符串：

```
{
  "title": "Hello",
  "categories": [ "5033e22163bc849f5a000003"]
} 
```

数据使用 json 标头发送，并且还使用 json 验证器进行了检查。jquery populate 插件站点具有基本相同的示例。但是，当我尝试使用以下内容填充表单时，这会引发错误：

```
$.getJSON("/api/products/8123h123123123", function(data) {
      $('#productEditForm').populate(data);
}) 
```

我的 Safari 控制台中的错误：

```
jquery-1.7.2.min.js:3  Error: Syntax error, unrecognized expression: ] 
```

我尝试将我的 json 更改为：

```
{
  "title": "Hello",
  "categories": [ {0: "5033e22163bc849f5a000003"}]
} 
```

但是插件无法识别它，也与我序列化表单时得到的数据不同。

如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:49:03.317

哈。原来问题是我的多项选择我试图填充所需的方括号 - 所以原始 JSON 数据很好。找不到括号时，填充插件会抛出。

# android - Android：用户看不到动态创建的目录

> ID：12147760
> 
> 赞同：0
> 
> 时间：2012-08-27T18:49:51.163
> 
> 标签：android, directory, xoom, mkdirs

我尝试使用 mkdirs() 动态创建一个目录，它成功创建了目录并将文件复制到创建的目录中。可以在平板电脑 (xoom) 中看到新目录，但是当我连接到我的 PC 以复制一些文件时，该目录不会出现。

我能做些什么？

美国东部时间：这就是我所做的：

```
File dirs = new File(Environment.getExternalStorageDirectory()+"/MyDir/");
    dirs.mkdirs(); 
```

怎么了？

EDT2：我已经尝试了这个线程（http://stackoverflow.com/questions/6218572/creating-a-folder-programmatically-on-a-xoom）中的所有内容，但没有成功。建议？

PS：我找到了一个重新扫描 de sdcard 的应用程序。如果我创建目录并使用此应用程序，它会完美运行。谁知道如何重新扫描sdcard？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T05:29:50.540

相当旧的帖子，但想添加不需要添加 URI 的答案。

```
// initiate media scan and put the new things into the path array to
// make the scanner aware of the location and the files you want to see
MediaScannerConnection.scanFile(context, new String[] {filePath}, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T03:48:28.900

我已经通过执行以下行解决了这个问题，这已在上面的答案以及[https://stackoverflow.com/a/8606529/2482894中推荐](https://stackoverflow.com/a/8606529/2482894)

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:41:06.510

一些具有内部存储器和 SD 卡的平板电脑（我认为包括 xoom）具有不同的文件存储方式。getExternalStorage 指向文件夹 /mnt/SDCard，但这是内部存储器，要到达 SDCard，路径是 /mnt/SDCard/SDCard（我知道很奇怪）。

因此，您需要查看平板电脑上 SDCard 的真实挂载并查看 Environment.getExternalStorageDirectory() 的值，否则您将不会保存在 SDCard 上，而是保存在平板电脑文件系统中。

编辑：这可能是 xoom 的媒体驱动程序的问题，当用户安装在 PC 上时，它应该扫描 sdcard。

要重新扫描您可以卸载和安装的 SD 卡，请使用 Gallery 应用程序刷新 SD 卡或以编程方式调用 `sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory().getAbsolutePath())));`

# python - 在 WindRiver Development Shell (Windows XP) 中运行 Python 脚本

> ID：12147762
> 
> 赞同：0
> 
> 时间：2012-08-27T18:49:54.803
> 
> 标签：python

我在 WindRiver Development Shell 中运行 python 脚本没有问题。我只是调用 shell 并输入脚本的名称。但是，我希望能够从普通的命令提示符窗口调用脚本。这要求我执行以下操作来调用 Development Shell：

shellCommandText = "C:\WindRiver_GPP6.9\wrenv.exe -p vxworks-6.9"

myProcess = os.system(shellCommandText)

打印“HI”#测试代码

不幸的是，这显然分叉了另一个进程，并且脚本永远等待该进程返回。换句话说，从不打印 HI。Python 中有没有办法在 wrenv 命令调用的 shell 中运行后面的脚本（打印“HI”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:05:46.667

如果`wrenv.exe`确实返回（我知道这主要是设置一些环境变量），为什么不将这两个命令放在一个批处理文件中：

```
C:\WindRiver_GPP6.9\wrenv.exe -p vxworks-6.9
C:\Python27\python.exe path\to\pythonscript 
```

（如有必要，请根据您的 Python 安装进行调整）

# ios - iOS：委托 VC 不直接连接到其他 VC 的委托困境

> ID：12147764
> 
> 赞同：0
> 
> 时间：2012-08-27T18:49:56.197
> 
> 标签：ios, delegates

在我的应用程序中，我有三个关注的视图控制器。第一个包含地图和打开第二个视图控制器的按钮。第二个视图控制器包含一个可搜索的表，然后当用户选择一行时，它会在第三个视图控制器中加载相关数据。这一切都很好！

现在的意图是，当用户在第三个视图控制器中按下 Show on Map 按钮时，它会将数据（在本例中为坐标的两个双精度值）传递回第一个视图控制器，以便第一个视图控制器可以专注于这些坐标。

我已经关注了 Apple 的文档（BirdSighting 教程）以及之前关于 SO 的问题/答案，但我注意到了一个问题。

我真的找不到将第三个视图控制器的委托设置为第一个视图控制器的地方。通常我会在第一个 VC 中输入以下代码，但我不会创建第三个 VC 的实例 - 这发生在第二个 VC 中：

```
thirdVC.delegate = self;  //set self as the delegate 
```

所以我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:18:34.457

您可以通过 secondViewController 将委托传递给 thirdViewController 或者您可以用户通知中心，例如：

```
NSString *const NotificationDataChanged = @"NotificationDataChanged";

NSDictionary *someData = @{};

[[NSNotificationCenter defaultCenter] postNotificationName:NotificationDataChanged object:someData]; 
```

在 firstViewController 上，您需要观察它，例如在 viewDidLoad 中添加这一行：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(updateUserInfo:)
                                             NotificationDataChanged object:nil];

- (void)updateUserInfo:(NSNotification *)notification
{
    NSDictionary *someData = [notification userInfo];
} 
```

不要忘记在 dealloc 中删除观察者：

```
- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:19:15.257

委托是完成您需要的众多机制之一。@onnoweb 的建议非常合适，尽管在传递委托指针时会变得混乱。

KVO：您也可以考虑使用 KVO，将数据放入模型对象中，让 VC3 更新模型对象，让 VC1 成为这些值的观察者。

NSNotificationCenter：另一种选择是 NSNotificationCenter

在 VC3 中，使用它来发送广播（设置您的字典以包含您的纬度/经度坐标）：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ShowOnMap" object:[NSDictionary dictionaryWithObjects:objects forKey:keys]]; 
```

在 VC1 中：

注册接收广播：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onShowOnMap:) name:@"ShowOnMap" object:nil]; 
```

并处理广播：

```
-(void) onShowOnMap:(NSNotification *)notification
{
 NSDictionary *values = [notification object];
 .
 .
 . 
} 
```

并在您的 dealloc 中取消注册

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:18:39.633

您可以在 AppDelegate 中存储指向第一个 VC 的指针，以便您可以调用

```
thirdVC.delegate =[(AppDelegate*)[NSApplication sharedApplication].delegate firstVC]; 
```

# android - Android 自定义视图（非常基础）

> ID：12147769
> 
> 赞同：0
> 
> 时间：2012-08-27T18:50:16.920
> 
> 标签：android, view

我是 Android 开发的新手，我正在尝试实现一个自定义视图来充当我的应用程序的“自定义菜单按钮”。

我按照[http://developer.android.com/training/custom-views/create-view.html](http://developer.android.com/training/custom-views/create-view.html)上的说明进行操作，但在实施结束时，我收到一条消息“不幸的是 customviews1 已停止”并且应用程序刚刚关闭.

我的方法非常简单，我找不到任何关于解决这个基本问题的参考。这就是我正在做的事情：

1.  在 Eclipse 中创建一个名为“customviews1”的新 Android 项目

2.  我运行该项目，它在“activity_main.xml”布局文件上显示了一个“Hello World”TextView

3.  我添加了一个名为 MyCustomView 的新类，它将“View”扩展到项目的“src”文件夹

    ```
    public class MyCustomView extends View {
        public MyCustomView(Context context, AttributeSet attrs) {
            super(context, attrs);
        }
    } 
    ```

4.  我从 activity_main.xml 中删除了“TextView”标签，并在其中添加了一个“customview1”：

    ```
    <com.example.customviews1.MyCustomView android:id="@+id/myCustomView1" /> 
    ```

5.  我再次运行该应用程序，我收到一条消息说“不幸的是 customviews1 已停止”并且该应用程序关闭了。

我在这里缺少任何代码吗？

感谢您提供任何线索，问候，维克多·雷布卡斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:53:42.230

如果您检查 LogCat 输出，您会发现一个错误，说明您必须在布局中指定 layout_width 和 layout_height。

所以写：

```
<com.example.customviews1.MyCustomView android:id="@+id/myCustomView1" 
   android:layout_width="match_parent" android:layout_height="match_parent"/> 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:53:23.003

我认为你不能那样做，你必须覆盖视图类`onDraw()`和其他类的所有方法，阅读更多关于它的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:33:51.750

请尝试以下操作。我尝试了这个并成功了。首先，您必须覆盖所有三个超类构造函数。

要在视图中显示某些内容，您必须覆盖`onDraw()`方法。

```
public class MyCustomView extends View {
    //variables and objects
    Paint p;

    //override all three constructor
    public MyCustomView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyCustomView(Context context) {
        super(context);
        init();
    }
    //do what you want in this method
    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawText("This is custom view this can be added in xml", 10, 100, p);
        canvas.drawRect(20, 200, 400, 400, p);
        super.onDraw(canvas);
    }
    //all the initialization goes here
    private void init() {
        p =new Paint();
        p.setColor(Color.RED);
    }
} 
```

在`xml`文件中包含如下示例

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<com.sanath.customview.MyCustomView
    android:id="@+id/myCustomView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" />
</RelativeLayout> 
```

希望对你有帮助

# asp.net-mvc - 架构分层中单独组件的好处？

> ID：12147771
> 
> 赞同：0
> 
> 时间：2012-08-27T18:50:20.467
> 
> 标签：asp.net-mvc, architecture

我正在使用 EF --> Repositories/UnitOfWork --> Services --> MVC 3 分层方法，我只是想知道使用单独的程序集或组合程序集中的一些逻辑层有什么好处/缺点。

基本上我要问的是，如果您对合同（接口）而不是实现进行编程，您可以在一个程序集中进行正确的操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:58:43.530

使用程序集，您可以仅使用内置工具强制分层。

不过，您可以使用命名空间实现相同的效果。您只需要一个能够验证命名空间依赖关系的工具，例如 NDepend。

接口与此讨论无关。它们提供编译时分离。运行时依赖项仍然存在。只是静态不可见。

从构建性能的角度来看，较少的组件通常是可取的。它们有时也会妨碍（“检测到循环引用！”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:10:01.953

单独组件的另一个优点是更容易重用和交换组件。例如，如果您想为同一个应用程序创建一个 WPF 前端，您可以使用与 MVC3 项目相同的层，只需将 Web 项目换成 WPF 应用程序。将应用程序的明显不同区域分开是很有意义的，以便以后能够更轻松地更改它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T19:03:54.530

使用多个程序集意味着您可以通过内部化某些接口和类来强制执行“隐藏”和“公共”接口，以便它们只能由同一程序集中的类使用 - 这意味着您可以为给定层提供辅助类和扩展类，而且您不会只说“草皮”并在不应该的地方使用它们。

这是一种强制执行方法的分层性质的方法，而仅使用命名空间等是无法做到的。

# git - 即使有 5.6GB RAM 和 50GB 硬盘，git clone 也会内存不足

> ID：12147773
> 
> 赞同：2
> 
> 时间：2012-08-27T18:50:28.240
> 
> 标签：git

```
 git clone http://vkaul@stash.int.linz.jumio.com/git/BUILD/build-tools.git
cloning into 'build-tools'...
fatal: Out of memory, malloc failed (tried to allocate 2000000000 bytes)
fatal: write error: Invalid argument 
```

我知道之前有人问过这个问题，但在这种情况下，解决方法是增加 RAM。现在奇怪的是存储库有 2.2GB 大，我有 5.5GB 可用 RAM 和 50GB 可用硬盘。为什么会出现这个错误？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:42:32.933

有一个名为 packSizeLimit 的配置属性。在我的 Git 安装中，默认设置为 2G。也许您的安装也是如此。你可以通过这样做来检查这个

```
git config -l 
```

在命令行上查看是否有一个名为 pack.packSizeLimit 的条目。如果是这样，请尝试增加该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T16:28:09.030

# drag-and-drop - Drag and drop object reference

> ID：12147775
> 
> 赞同：4
> 
> 时间：2012-08-27T18:50:35.087
> 
> 标签：drag-and-drop, javafx, javafx-2

I have a non-serializable object (it contains bound properties) listed in a JavaFX TreeView. I'd like the user to be able to drag the TreeView item containing the object onto a LineChart to be plotted but I can't populate a DragBoard with this object since it's non-serializable. I don't really want to copy the object, just a link to it. I tried setting the TransferMode to LINK but this seems to be only an indicator of the intended action; the process still required serialization of the object to be dragged.

How can I drag and drop only a reference to an object?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:25:24.070

If you want your treeitem object to be plotted in LineChart then first while dragging you can save your object instance in your static temp variable and when your drop action happens in your chart then just retrieve that same temp variable and you can manipulate your LineChart easily.

The workaround of the manual drag and drop is done in here [JavaFX Drag and Drop Cell in ListView](http://blog.ngopal.com.np/2012/05/06/javafx-drag-and-drop-cell-in-listview/)

Thanks

# ios - 如何在 iOS 中发布 CGImageRef

> ID：12147779
> 
> 赞同：10
> 
> 时间：2012-08-27T18:50:37.390
> 
> 标签：ios, memory-management, memory-leaks, cgimageref

我正在编写此方法来计算图像的平均 R、G、B 值。以下方法将 UIImage 作为输入，并返回一个包含输入图像的 R、G、B 值的数组。不过我有一个问题：如何/在哪里正确发布 CGImageRef？

```
-(NSArray *)getAverageRGBValuesFromImage:(UIImage *)image
{
    CGImageRef rawImageRef = [image CGImage];

    //This function returns the raw pixel values
    const UInt8 *rawPixelData = CFDataGetBytePtr(CGDataProviderCopyData(CGImageGetDataProvider(rawImageRef)));

    NSUInteger imageHeight = CGImageGetHeight(rawImageRef);
    NSUInteger imageWidth = CGImageGetWidth(rawImageRef);

    //Here I sort the R,G,B, values and get the average over the whole image
    int i = 0;
    unsigned int red = 0;
    unsigned int green = 0;
    unsigned int blue = 0;

    for (int column = 0; column< imageWidth; column++)
    {
        int r_temp = 0;
        int g_temp = 0;
        int b_temp = 0;

        for (int row = 0; row < imageHeight; row++) {
            i = (row * imageWidth + column)*4;
            r_temp += (unsigned int)rawPixelData[i];
            g_temp += (unsigned int)rawPixelData[i+1];
            b_temp += (unsigned int)rawPixelData[i+2];

        }

        red += r_temp;
        green += g_temp;
        blue += b_temp;

    }

    NSNumber *averageRed = [NSNumber numberWithFloat:(1.0*red)/(imageHeight*imageWidth)];
    NSNumber *averageGreen = [NSNumber numberWithFloat:(1.0*green)/(imageHeight*imageWidth)];
    NSNumber *averageBlue = [NSNumber numberWithFloat:(1.0*blue)/(imageHeight*imageWidth)];

    //Then I store the result in an array
    NSArray *result = [NSArray arrayWithObjects:averageRed,averageGreen,averageBlue, nil];

    return result;
} 
```

我尝试了两件事： 选项 1：我保持原样，但在几个周期 (5+) 后程序崩溃并且我收到“内存不足警告错误”

选项 2：我在方法返回之前添加一行 CGImageRelease(rawImageRef) 。现在它在第二个周期后崩溃，我收到了我传递给该方法的 UIImage 的 EXC_BAD_ACCESS 错误。当我尝试在 Xcode 中分析（而不是 RUN）时，我在这一行收到以下警告“调用者此时不拥有的对象的引用计数不正确递减”

我应该在哪里以及如何发布 CGImageRef？

谢谢！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-27T19:14:49.683

正如其他人所说，您的内存问题是由复制的数据引起的。但这里有另一个想法：使用 Core Graphics 的优化像素插值来计算平均值。

1.  创建一个 1x1 位图上下文。
2.  将插值质量设置为中等（见下文）。
3.  将您的图像按比例缩小到这一像素。
4.  从上下文的缓冲区中读取 RGB 值。
5.  （当然，释放上下文。）

这可能会带来更好的性能，因为 Core Graphics 是高度优化的，甚至可能使用 GPU 进行缩减。

测试表明，中等质量似乎通过取颜色值的平均值来插入像素。这就是我们想要的。

至少值得一试。

**编辑：**好的，这个想法似乎太有趣了，不能尝试。所以这是一个显示差异[的示例项目。](https://github.com/NikolaiRuhe/UIImageAverageColor)以下测量是使用包含的 512x512 测试图像进​​行的，但您可以根据需要更改图像。

通过迭代图像数据中的所有像素来计算平均值大约需要 12.2 毫秒。绘制到一个像素的方法需要 3 毫秒，因此大约快 4 倍。使用时似乎会产生相同的结果`kCGInterpolationQualityMedium`。

我认为巨大的性能提升是由于 Quartz 注意到它不必完全解压缩 JPEG，但它只能使用 DCT 的较低频率部分。在组合比例低于 0.5 的 JPEG 压缩像素时，这是一个有趣的优化策略。但我只是在这里猜测。

有趣的是，当使用你的方法时，70% 的时间都花在了像素数据的遍历上，`CGDataProviderCopyData`而只有 30% 的时间花在了遍历像素数据上。这暗示了在 JPEG 解压缩上花费了大量时间。

![像素迭代截图](../Images/9a268d2902fc3376eedbd2e0e89163d6.png) ![绘制一个像素屏幕截图](../Images/e6439fdaa9442aec53ed5ca5f7c7127d.png)

注意：[这是对上面示例图像的后期跟进](https://pudding.cool/2021/10/lenna/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T18:54:23.983

您不拥有 ，`CGImageRef` `rawImageRef`因为您使用 `[image CGImage]`. 所以你不需要释放它。

但是，您拥有它，`rawPixelData`因为您使用它获得了它[`CGDataProviderCopyData`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGDataProvider/Reference/reference.html)并且必须释放它。

> **CGDataProviderCopyData**
> 
> 返回值：包含提供者数据副本的新数据对象。您有责任释放此对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T18:57:25.370

我相信您的问题在此声明中：

```
const UInt8 *rawPixelData = CFDataGetBytePtr(CGDataProviderCopyData(CGImageGetDataProvider(rawImageRef))); 
```

您应该释放 CGDataProviderCopyData 的返回值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T04:17:19.367

您的 mergeColor 适用于从文件加载的图像，但不适用于相机捕获的图像。因为`CGBitmapContextGetData()`在从捕获的样本缓冲区创建的上下文中，它不会返回位图。我将您的代码更改为如下。它适用于任何图像，并且与您的代码一样快。

```
- (UIColor *)mergedColor
{
     CGImageRef rawImageRef = [self CGImage];

    // scale image to an one pixel image

    uint8_t  bitmapData[4];
    int bitmapByteCount;
    int bitmapBytesPerRow;
    int width = 1;
    int height = 1;

    bitmapBytesPerRow = (width * 4);
    bitmapByteCount = (bitmapBytesPerRow * height);
    memset(bitmapData, 0, bitmapByteCount);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate (bitmapData,width,height,8,bitmapBytesPerRow,
             colorspace,kCGBitmapByteOrder32Little|kCGImageAlphaPremultipliedFirst);
    CGColorSpaceRelease(colorspace);
    CGContextSetBlendMode(context, kCGBlendModeCopy);
    CGContextSetInterpolationQuality(context, kCGInterpolationMedium);
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), rawImageRef);
    CGContextRelease(context);
    return [UIColor colorWithRed:bitmapData[2] / 255.0f
                    green:bitmapData[1] / 255.0f
                             blue:bitmapData[0] / 255.0f
                            alpha:1];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T18:55:28.477

```
CFDataRef abgrData = CGDataProviderCopyData(CGImageGetDataProvider(rawImageRef));

const UInt8 *rawPixelData = CFDataGetBytePtr(abgrData);

...

CFRelease(abgrData); 
```

# matlab - 绘图未显示在图形窗口中

> ID：12147781
> 
> 赞同：1
> 
> 时间：2012-08-27T18:50:42.500
> 
> 标签：matlab, plot

我正在使用内置的 Matlab“绘图”功能从大量数据中制作许多绘图。除了一个之外，它们中的每一个都有效。更奇怪的是，不工作的代码本质上与其他工作的代码相同。

这是应该在单独的图中绘制的代码部分：

```
f = figure;
ax = subplot(1,1,1, 'Position',[0.1 0.16 0.8 0.815]);
grid(ax, 'on')
hold(ax, 'on')
plot(ax, x, y) 
```

其中 x 是一个 100x1 的所有相同数字的双精度矩阵，y 是一个 100x1 的所有相同数字的 uint32 矩阵，这两个矩阵都是先前定义的。

图中的轴很好，但是一旦我尝试绘制任何东西，轴就会消失，它变成一个空白的图形窗口。

这个人有类似的问题，但解决方案仍然对我不起作用（即使在调试模式下）：

[http://www.mathworks.fr/matlabcentral/newsreader/view_thread/286813](http://www.mathworks.fr/matlabcentral/newsreader/view_thread/286813)

我唯一能想到的关于这个数据集与我成功绘制的其他数据集的不同之处在于 x 和 y 是重复的......这与它有什么关系吗？Matlab 一次可以绘制多少个点是否有“限制”？

知道为什么这会发生在我身上或如何解决吗？任何帮助是极大的赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:21:22.527

这只是坏数据的问题。Matlab 正在读取的数字太小，因此无法绘制。重新生成一些更好的测试数据解决了我的问题。感谢提供建议的人！

# android - 来自 Webview 中资产文件夹的中心图像

> ID：12147782
> 
> 赞同：1
> 
> 时间：2012-08-27T18:50:42.970
> 
> 标签：android, html, webview, center

我在 WebView 中显示资产文件夹中的图像，它也一直被缩小以查看整个内容。有没有办法让图像在 Webview 中而不是默认的左上角居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:24:18.140

您应该将图像加载到 www 可识别的文件中，我认为最好是 .html 例如：

```
<html><head></head><body><img src=\""+ imagePath + "\"></body></html> 
```

要么需要 img TAG 内的硬编码样式，要么使用外部样式表，你的资产文件夹中也应该有什么。

给你一个想法：

[http://www.netmechanic.com/news/vol7/html_no10.htm](http://www.netmechanic.com/news/vol7/html_no10.htm)

# mongodb - MongoDB：删除集合与删除所有文档的权衡

> ID：12147783
> 
> 赞同：24
> 
> 时间：2012-08-27T18:50:51.610
> 
> 标签：mongodb

删除 MongoDB 集合与删除其所有文档（假设将立即重新创建集合）的权衡是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-27T21:18:44.093

简单地删除一个集合的一个好处是它比删除一个集合的所有文档要快得多。如果您的收藏无论如何都会“立即重新创建”（假设包括重新创建索引），那么这可能是最有吸引力的选择。

[MongoDB: The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/1449381561)一书的作者（Kristina Chodorow 和 Michael Dirolf）进行了一项实验，他们提供了一个 Python 脚本，该脚本对 1000000 条记录的 a`drop`与 a进行计时。`remove`结果是 0.01 秒`drop`和 46.08 秒`remove`。现在，虽然确切的时间可能会因硬件和其他因素而有所不同，但它仍然说明了这一点，即`drop`速度明显更快。

参考：Chodorow K.、Dirolf M. (2010)。“MongoDB：权威指南。” O'Reilly Media, Inc. 加利福尼亚州塞巴斯塔波尔，第 25 页

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-27T19:12:31.040

如果您从集合中删除所有文档，那么您将做更多的工作（释放文档的存储空间，清除指向文档的索引条目，等等）。如果您只是删除集合，它只会回收集合及其索引使用的范围。

另一个区别是删除集合也会删除集合的索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-25T14:14:31.733

删除和删除集合主要是实现细节。

**删除**集合需要对集合中恰好存在**的内部状态进行一一更新。**

**删除**集合需要 **释放**数据文件数据库中的一些大型数据结构。

删除集合比一个一个删除直到集合为空要快得多。

****如果删除集合而不是删除集合，则将存在**诸如索引之类的**元数据**。**

 **来源：MongDB大学课程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T22:36:10.513

一旦我们将文档存储在我们的集合中，我们可以通过两种方式从中删除所有文档。现在选择一个完全取决于您的要求。

**1.[使用 drop()：](https://docs.mongodb.com/v3.2/reference/method/db.collection.drop/)** 通过调用`drop()`一个集合，它会从中删除所有文档，它会删除它上面的所有索引，最后它会删除集合本身。

**2.[使用 remove()：](https://docs.mongodb.com/manual/reference/method/db.collection.remove/)** remove 有两个重载版本，其中一个我们将通过条件以删除所有符合我们通过条件的文档，第二个是默认的，我们不会通过任何条件（在 2.6 之前）或传递一个空文档（2.6 或更高版本），它将从集合中删除所有文档。在这里，当我们的意图是清除集合中的所有文档时，我们对第二版更感兴趣。

**备注：** *要从集合中删除所有文档，使用`drop()`删除整个集合（包括索引）的方法可能更有效，然后重新创建集合并重建索引。***

# python - dict.pop 或 dict.get 和评估

> ID：12147788
> 
> 赞同：5
> 
> 时间：2012-08-27T18:51:21.210
> 
> 标签：python, short-circuiting

考虑以下代码：

```
>>> def default_answer():
...     print "Default was required!"
...     return 100
... 
>>> g = { 'name': 'Jordan', 'age': 35 }
>>> result = g.get('age', default_answer())
Default was required!
>>> result = g.pop('age', default_answer())
Default was required! 
```

请注意，无论是否`g`包含预期的键，都会调用 default_answer。这在编程上是有意义的，但如果`default_answer`计算成本很高，这将是一件麻烦事（运行大量代码来创建一个将被丢弃的值）。

我能想到写这个而不总是打电话的唯一方法`default_answer`是：

```
result = g.pop('age', False) or default_answer() 
```

这是最好的方法吗？

（请注意，我知道`default_answer`用惰性评估替换对象也可以解决这个问题的一部分，但这超出了这个问题的范围）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T18:53:25.217

不，这不是最好的方法，因为结果`g.pop()`可能是“假的”。使用`try`/`except`代替：

```
try:
    result = g.pop('age')
except KeyError:
    result = default_answer() 
```

这个成语称为[EAFP](http://docs.python.org//glossary.html#term-eafp) ，由于各种原因，它通常比[LBYL更受欢迎：](http://docs.python.org//glossary.html#term-lbyl)

1.  它避免了两次查找密钥（这不是实际的问题`dict`，但对于其他映射可能不是最佳的）。

2.  它避免了线程代码中的竞争条件。

3.  许多人发现它更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:53:54.623

只要您知道任何 boolean-false 值（不仅是 False，还包括空字符串、空列表等）都应该被您的默认值替换，这是一种不错的方式。你总是可以明确地做到这一点：

```
if 'age' in g:
    result = g['age']
else:
    result = default_answer() 
```

（或具有 try/except 的等效版本，您首先读取值并在 except 子句中执行默认值。哪个更好取决于您期望缺失值的情况是常见的还是不常见的。）

# regex - 将 https 重定向到 http 以及将 domain.com 重定向到 www.domain.com

> ID：12147790
> 
> 赞同：0
> 
> 时间：2012-08-27T18:51:28.423
> 
> 标签：regex, .htaccess, redirect, http-status-code-301

我正在尝试进行一些重定向，其中 https 重定向到 http 以及输入 domain.com 的任何实例都重定向到 www.domain.com。

一个实际的例子是[https://domain.com](https://domain.com)被重定向到[http://www.domain.com](http://www.domain.com) - 下面是我在 .htaccess 文件中使用的正则表达式代码。感谢您帮助澄清。

```
RewriteEngine on
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} 
RewriteCond %{HTTP_HOST} ^domain.com [NC, OR]
RewriteCond %{HTTP_HOST} ^www\.domain\.com$ 
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:09:46.237

你在正确的轨道上，只需要稍微调整你的规则：

```
RewriteEngine on

# we handle to domain.com to www.domain.com first
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# then we redirect anything with HTTPS to just HTTP
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T18:59:07.740

这适用于 HTTPS

```
RewriteEngine On 
RewriteCond %{HTTPS} off 
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# windows-7 - Windows 7 64 位文件和图标关联不一致（与 Win7/32、WinXP/32 和 WinXP/64 相比）

> ID：12147791
> 
> 赞同：0
> 
> 时间：2012-08-27T18:51:28.477
> 
> 标签：windows-7, build, installation, icons, nsis

我们正在开发一个**NSIS 安装程序**，它可以编辑几种文件类型的注册表以更改它们的图标和运行它们的应用程序。
我们的工作流程在 Win7/32 位、WinXP/32 和 WinXP/64 上正常工作，但在 Win7/64 上无法正常工作。我们已经在多台 Win7/64 机器上测试过，问题在两个 Win7/64 实例上都是一致的。
另一个细节是它仅在覆盖现有关联时，因为创建一个新关联可以正常工作。

注册表编辑只需设置`DefaultIcon`，`shell/open/command`在注册表编辑完成后，我们使用`SHChangeNotify`系统调用强制外壳使用新设置进行更新。
在 Win7/64 上，注册表中已有的文件类型不会更新为新值。

```
; Tell the shell to reset its icon cache
System::Call 'shell32.dll::SHChangeNotify(i, i, i, i) v \
(0x08000000, 0, 0, 0)' 
```

非常感谢任何帮助，特别是不涉及系统重新启动或重新启动资源管理器的解决方案。感谢您的任何/所有帮助！-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:22:47.023

这个问题可能与 x64 上的注册表容易出错的许多事情有关：[Virtualization](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)、[Redirector](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384232%28v=vs.85%29.aspx)和[Reflection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384235%28v=vs.85%29.aspx)。您也可能错误地从文件扩展名映射到 progid？（很难判断您何时不发布任何代码或告诉我们您正在更改哪种文件类型）

要关闭虚拟化，请确保您的脚本包含`RequestExecutionLevel admin`.

您可以强制 NSIS 使用 64 位注册表，`SetRegView`但使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)监控安装程序可能是一个更好的主意，这样您就可以看到您实际写入的位置。然后，您可以监视 explorer.exe 以查看它从哪里读取。

# java - 如何使用 jgit 库将 git HEAD 指向特定的参考？

> ID：12147794
> 
> 赞同：3
> 
> 时间：2012-08-27T18:51:33.707
> 
> 标签：java, git, jgit

我想以编程方式更新 HEAD 而不执行结帐或基于非裸回购。

我希望工作树和索引在操作后保持不变。

**编辑**

我需要更新 HEAD 的符号目标，而不是 HEAD 当前目标的提交 ID。这更像是一个结帐，除了我不能使用`org.eclipse.jgit.api.CheckoutCommand`，因为它需要我更新路径，但我不想接触工作树。`org.eclipse.jgit.api.CreateBranchCommand`也是不合适的，因为它需要一个特定的起点，因为我正在创建一个孤立分支，所以它不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:51:33.707

这对我有用：[`RefUpdate.link()`](http://jgit.info/javadoc/org/eclipse/jgit/lib/RefUpdate.html#link%28java.lang.String%29)。

例子：

```
Result updateHead(
    Repository repo, String newHead, boolean force, boolean detach
) throws IOException {
    RefUpdate refUpdate = repo.getRefDatabase().newUpdate(Constants.HEAD, detach);
    refUpdate.setForceUpdate(force);
    return refUpdate.link(newHead);
} 
```

答案隐藏在 jgit 源代码中的大约 5 个地方。

jgit v2.0.0.201206130900-r 中的三个 api 命令为您更新 HEAD：clone、checkout 和 rebase。如果适用，请使用其中之一。

这些都不适用：结帐和变基会改变工作树和索引。

希望发布这个问题和答案可以节省其他人我不得不花在上面的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:37:04.987

尝试`org.eclipse.jgit.api.ResetCommand`将其模式设置为`SOFT`.

# ios - 我在 XCode Interface builder 中几乎没有控制器选项

> ID：12147798
> 
> 赞同：0
> 
> 时间：2012-08-27T18:51:40.420
> 
> 标签：ios, xcode, storyboard

很抱歉新手问题，但我是 XCode 的新手，我使用的是 XCode 4.4.1。

你能告诉我如何让更多的控制器（见下图）拖到界面构建器故事板（例如集合视图控制器）。

![在此处输入图像描述](../Images/e85abb48b65acaad5029ba4f5f8cea23.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:53:11.397

如果您使用的是 iOS SDK 5，则无法访问 iOS SDK 6 提供的 Collection View Controller，您需要拥有 Xcode 4.5 开发者预览版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:33:30.917

您可以从以下网址下载最新的 xCode： [https ://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)

那么您可以使用“集合视图控制器”。

# sql - 在 SQL Server 中添加两个值

> ID：12147809
> 
> 赞同：2
> 
> 时间：2012-08-27T18:52:46.917
> 
> 标签：sql, sql-server, sql-server-2008

我希望在一个语句中添加两个值，我目前不知道如何去做，这应该很简单，这是我的陈述：

```
 SELECT COUNT(UserModified) as SecondTally
 FROM JobAgents 
 WHERE UserModified = 1 
```

然后从下面的值中减去上面的值。

```
 SELECT SUM(EmailsSent) as FirstTally
 FROM JobAgentEmails
 WHERE Date BETWEEN '7/1/2012 12:00:00 AM' AND '7/31/2012 11:59:59 PM' 
```

对此的任何帮助将不胜感激。谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:55:15.807

最简单的方法是简单地将结果与两个子查询组合，这些子查询可以存储在变量中，也可以简单地组合在一个查询中，如下所示：

```
SELECT
  (SELECT SUM(EmailsSent) as FirstTally
   FROM JobAgentEmails
   WHERE Date BETWEEN '7/1/2012 12:00:00 AM' AND '7/31/2012 11:59:59 PM')
- (SELECT COUNT(UserModified) as SecondTally
   FROM JobAgents 
   WHERE UserModified = 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:56:29.123

您可以使用交叉连接来执行此操作，将值组合在一起：

```
select jae.FirstTallyl - ja.SecondTally
from (SELECT COUNT(UserModified) as SecondTally
      FROM JobAgents
      WHERE UserModified = 1
     ) ja cross join
     (SELECT SUM(EmailsSent) as FirstTally
      FROM JobAgentEmails
      WHERE Date BETWEEN '7/1/2012 12:00:00 AM' AND '7/31/2012 11:59:59 PM'  
    ) jae 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:55:24.700

这是一种方法：

```
DECLARE @FirstTally int;
DECLARE @SecondTally int;

SELECT @SecondTally = COUNT(UserModified) 
 FROM JobAgents 
 WHERE UserModified = 1

 SELECT @FirstTally = SUM(EmailsSent) 
 FROM JobAgentEmails
 WHERE Date BETWEEN '7/1/2012 12:00:00 AM' AND '7/31/2012 11:59:59 PM'

SELECT @FirstTalley - @SecondTalley AS Result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T18:56:44.770

```
 select 
 (SELECT SUM(EmailsSent) as FirstTally
 FROM JobAgentEmails
 WHERE Date BETWEEN '7/1/2012 12:00:00 AM' AND '7/31/2012 11:59:59 PM')
 -

 (SELECT COUNT(UserModified) as SecondTally
 FROM JobAgents 
 WHERE UserModified = 1)

 AS 'result'; 
```

# .htaccess - modrewrite，变量中的＆符号

> ID：12147814
> 
> 赞同：3
> 
> 时间：2012-08-27T18:53:06.467
> 
> 标签：.htaccess, mod-rewrite, ampersand

我有一个像 AT&T 公园这样的场地。此页面的链接应为：/venue.php?venue=at-and-t+park

使用 htaccess，我已经清理它们看起来像。

```
RewriteRule venue/([^/]+)/{0,1}$ venue.php?venue=$1 [QSA] 
```

所以：`/venue/AT-and-T+Park/`

问题：谷歌在某处寻找和索引看起来像这样的链接，返回 403 错误。这是一个＆符号问题。

```
/venue/AT&T+Park/ 
```

我有没有办法改变我的重写规则来寻找这个古怪`&`的东西并将它转换成`-and-`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:05:58.500

在当前规则之前使用规则：

```
RewriteRule ^(.*)&(.*)$ /$1-and-$2 [L,R=301] 
```

# forms - Twitter 引导重置按钮

> ID：12147818
> 
> 赞同：20
> 
> 时间：2012-08-27T18:53:20.363
> 
> 标签：forms, button, twitter-bootstrap

如何使用 twitter bootstrap 创建重置按钮？与清除所有数据的表单重置按钮相同吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-27T19:04:18.963

```
<input class="btn btn-danger" type="reset" value="Reset">
<!-- or -->
<button class="btn btn-danger" type="reset">Reset</button> 
```

如果您不希望它看起来“危险”，请删除`btn-danger`课程。

# php - 验证码仅在页面刷新时加载

> ID：12147821
> 
> 赞同：1
> 
> 时间：2012-08-27T18:53:36.563
> 
> 标签：php

我遇到了一个非常令人沮丧的问题，我似乎无法找到根本原因。我正在尝试在这里找到一个简单的验证码：[https ://github.com/claviska/simple-php-captcha](https://github.com/claviska/simple-php-captcha)

该代码未从 github 更改，并按照说明添加到我的网站。使用 IE 8 时，图像显示为损坏的图像，但如果我刷新页面 (F5)，图像会神奇地出现。Firefox 和 Chrome 甚至 Safari 都没有显示图像的问题。我不知道为什么它在进入网页时显示为损坏。我花了几天的时间研究，很迷茫。

任何帮助深表感谢。

编辑：我一直在密切关注 php 日志，并注意到该函数似乎被调用了两次。似乎进入页面时，一切都很好，并且生成了图像。但是，在进入页面和最终加载之间，再次调用该函数，并且浏览器试图显示脚本创建的第一张图像，该图像在那时已经被销毁。这只发生在 IE 中，这就是我如此困惑的原因。

用于测试的代码：

```
<?php
session_start();
$_SESSION = array();
include("captcha.php");
$_SESSION['captcha'] = captcha();
?>

<html>
<body>
<table>
     <tr>
        <td width="45%"><?php echo ('<img src="' . $_SESSION['captcha']['image_src'] . '" alt="CAPTCHA" />'); ?></p></td>
        <td width="4%">:</td>
        <td><input name="captcha" type="text" id="captcha" required><b><font color="red"> *</font></b></td>
     </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:49:12.717

这是一种疯狂的预感，它可能行不通。尝试将您的代码更改为：

```
session_start();
include("captcha.php");
$captcha = captcha();
$_SESSION['captcha'] = $captcha['code'];
session_write_close(); 
```

然后在您的 HTML 中，将 URL 称为`$captcha['image_src']`. 试图确保这不是会话锁定问题。

# python - 列表变量在更新之间更新

> ID：12147825
> 
> 赞同：0
> 
> 时间：2012-08-27T18:53:43.767
> 
> 标签：python

我对名为`intervals`. 从底部的打印语句中我得到了这个结果（我相信这是半小时的时间间隔，如 9:00、9:30 等，以列表中的列表表示）。

[[9, 0], [10, 30], [10, 30], [10, 30]]

我想要以下结果。

[[9, 0], [ 9, 30], [10, 0], [10, 30]]

完整的运行日志如下。请注意，列表`list`仅在and语句`while`之间的循环中更新一次，但在 next之后和之前发生变化。怎么会这样？`print "b(efore)"``print "a(fter)"``list``after``before`

```
[9, 30] [[9, 0]] b
[9, 30] [[9, 0], [9, 30]] a
[10, 0] [[9, 0], [10, 0]] b
[10, 0] [[9, 0], [10, 0], [10, 0]] a
[10, 30] [[9, 0], [10, 30], [10, 30]] b
[10, 30] [[9, 0], [10, 30], [10, 30], [10, 30]] a
[[9, 0], [10, 30], [10, 30], [10, 30]]

def intervals(start,end):
    if start>=end:
        return []
    else:
        if 0<=start[1]<30:
            start[1]=0
        else:
            start[1]=30
        list = []
        list.append(start)
        last = start
        new=[0,0]
        while end>last:
            if 30==last[1]:
                new[0]=1+last[0]
                new[1]=0
            else:
                new[0]=last[0]
                new[1]=30
            last=new
            print new,list,"b"
            list.append(new)
            print new,list,"a"
        return list

print intervals([9,0],[10,30]) 
```

任何人都可以修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:05:06.833

您看到这一点的原因是，在循环的每次迭代中，`while`您将列表附加到列表`new`的末尾`list`（您应该真正重命名，因为它掩盖了内置列表类型）。

只需移动该`new=[0,0]`行，使其成为`while`循环中的第一行，这将在每次迭代时创建一个新列表，这样您的最终列表就不会多次引用同一个列表：

```
 ...
        while end>last:
            new=[0,0]
            ... 
```

请注意，如果您打算为此添加更多复杂性（例如，与 30 分钟不同的时间间隔），我真的建议使用[datetime 模块](http://docs.python.org/library/datetime.html)，`datetime.timedelta(minutes=30)`这可能会很有用，例如：

```
from datetime import datetime, timedelta

def intervals(start, end):
    temp = datetime.min + timedelta(hours=start[0], minutes=start[1])
    last = datetime.min + timedelta(hours=end[0], minutes=end[1])
    interval = timedelta(minutes=30)
    result = []
    while temp <= last:
        result.append([temp.hour, temp.minute])
        temp += interval
    return result

>>> intervals([9, 30], [12, 30])
[[9, 30], [10, 0], [10, 30], [11, 0], [11, 30], [12, 0], [12, 30]]
>>> intervals([9, 45], [12, 15])
[[9, 45], [10, 15], [10, 45], [11, 15], [11, 45], [12, 15]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:07:30.777

使用`while-else`循环：

```
start_hour=9
start_min=30
lis=[[start_hour,start_min]] #simple initialize
stop_hour=12
stop_min=30

while lis[-1][0]!=stop_hour:
    if lis[-1][1]==30:
        lis.append([lis[-1][0]+1,0])
    else:
        lis.append([lis[-1][0],30])
else:
    if lis[-1][1]!=stop_min:
        lis.append([lis[-1][0],stop_min])

print lis 
```

**输出：**

```
[[9, 30], [10, 0], [10, 30], [11, 0], [11, 30], [12, 0], [12, 30]] 
```

# augmented-reality - 使用 FLARToolkit 以编程方式对视频进行色度键控

> ID：12147827
> 
> 赞同：0
> 
> 时间：2012-08-27T18:53:47.340
> 
> 标签：augmented-reality, flartoolkit

所以这可能有点麻烦......我正在尝试使用名为 FLARToolkit 的 Flash 插件在增强现实中播放视频剪辑。我有一个绿屏视频，我需要在飞机上播放视频。我目前正在使用 MovieClipMaterial 将视频放置在显示平面上。我想遍历显示平面中的像素并更改与绿屏中的绿色匹配的像素，并将这些像素设置为透明的色度键控。可能有一种更有效的方法可以做到这一点，我愿意接受建议。

我还研究了 ColorMatrixFilters，但我无法设计一种使其具有选择性的方法，而不是过滤掉剪辑中的所有绿色。

这是我现在的代码：

```
[SWF(width='640', height='480', backgroundColor='#000000', frameRate='40')]

public class HelloFLAR extends Sprite
{
    private var fm:FLARManager;
    private var scene:Scene3D;
    private var view:Viewport3D;
    private var camera:FLARCamera3D;
    private var bre:BasicRenderEngine;
    private var lre:LazyRenderEngine;
    private var p:Plane;
    private var con:DisplayObject3D;
    private var marker:FLARMarker;
    private var v:Vid;
    private var mat:MovieMaterial
    private var bmd:BitmapData;
    private var videoStream:NetStream;
    private var container:FLARBaseNode;
    private var RGBRaster:FLARRgbRaster_BitmapData;

    public function HelloFLAR()
    {
        initFLAR();
        v = new Vid();
        //source for displayed video
        v.vid.source = "Reuters.m4v";
        v.vid.stop();

    }

    private function initFLAR():void
    {
        fm = new FLARManager("flarConfig.xml");
        fm.addEventListener(FLARMarkerEvent.MARKER_ADDED, onAdded);
        fm.addEventListener(FLARMarkerEvent.MARKER_REMOVED, onRemoved);
        fm.addEventListener(Event.INIT, init3D);
        addChild(Sprite(fm.flarSource));

    }

    private function onAdded(e:FLARMarkerEvent):void
    {
        marker = e.marker;
        p.visible = true;
        v.vid.play();
    }

    private function onRemoved(e:FLARMarkerEvent):void
    {
        marker = null;
        p.visible = false;
        v.vid.stop();
    }

    private function init3D(e:Event):void
    {
        scene = new Scene3D();
        camera = new FLARCamera3D(fm.cameraParams);
        camera.z = -30;
        view = new Viewport3D(640, 480, true);
        lre = new LazyRenderEngine(scene,camera,view);

        //Display plane and Videp material
        mat = new MovieMaterial(v, false, true);
        p = new Plane(mat, 320, 240, 2, 2);
        mat.doubleSided = true;
        p.rotationZ = 90;
        p.visible = true;

        //Green Leech from video plane (Attempt at chromakeying)
        var matrix:Array = new Array();         
        matrix = matrix.concat([1,0,0,0,0]); //Red
        matrix = matrix.concat([0,1,0,0,0]); //Green
        matrix = matrix.concat([0,0,1,0,0]); //Blue
        matrix = matrix.concat([0,-1,0,0,0]); //Alpha

        var color_filter:ColorMatrixFilter = new ColorMatrixFilter(matrix);;
        v.filters = [color_filter];

        //container for display Plane
        con = new DisplayObject3D();
        con.addChild(p);

        //Add plane container to scene
        scene.addChild(con);
        addChild(view);
        addChild(new FramerateDisplay());

        addEventListener(Event.ENTER_FRAME, loop);
        //addEventListener(Event.ENTER_FRAME, pixelCheck);

    }

    private function loop(e:Event):void
    {
        if(marker != null)
        {
            con.transform = FLARPVGeomUtils.convertFLARMatrixToPVMatrix(marker.transformMatrix);
        }
        lre.render();
    } 
```

我似乎无法访问视频的像素。我尝试通过平面和 MovieClipMaterial 访问像素，但没有成功。

任何帮助将不胜感激！

修会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:11:17.790

是的，你可以这么做;

1.  创建透明背景视频 创建透明背景视频，使用绿屏背景素材，在 Adob​​e Afters Effects 或 Premiere 或 Final Cut 上移除绿色背景或..在导出或渲染设置更改为 RGB + Alpha，然后导出

2.  在您的代码中；

    ```
    mat = new MovieMaterial(v, false, true);
    mat = new MovieMaterial(v, true, true); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:29:25.207

抱歉，我忘记了，透明视频格式应该是`flv`. 因为一些格式可以携带透明度信息。可以使用**River FLV 播放器**进行测试。

# node.js - 在 Mountain Lion 上安装 32 位节点

> ID：12147839
> 
> 赞同：2
> 
> 时间：2012-08-27T18:54:33.920
> 
> 标签：node.js, appjs

我想开始使用 AppJS 作为即将到来的项目的可能解决方案，但我是 NodeJS 的新手，还没有找到在 OSX Mountain Lion 上安装 32 位 Node（AppJS 需要）的方法。是否有我错过的教程有人可以指出我？我确实安装了 nvm，并且一直看到可以安装 32 位版本的迹象，但我只是无法找到*如何*安装.

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:00:45.850

下载源代码后，您只需要运行：

```
./configure --dest-cpu=ia32 
```

[您还可以从Node 的网站](http://nodejs.org/download/)下载预构建的二进制文件或安装程序。

# jquery - 加载名称由 attr 定义的文件

> ID：12147844
> 
> 赞同：-1
> 
> 时间：2012-08-27T18:55:11.767
> 
> 标签：jquery

我有图...

```
<img src="images/dut7_thumb.jpg" alt="images/dut7.jpg" filetoload="test.html"/> 
```

我正在尝试使用...将文件“test.html”加载到 id 为“words”的 div 中...

```
$list.find('.st_thumbs img').on('click',function(){
   var $this = $(this);
   $("#words").load("text/"+$this.attr('filetoload'));
}); 
```

...但 filetoload 未定义？

如何获取该文件名？

编辑：代码在错误的地方。现在工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:00:25.560

代码是正确的。也许`$list.find('.st_thumbs img')`是错的。

看：http: [//jsfiddle.net/bBEDq/](http://jsfiddle.net/bBEDq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:00:45.507

这将有助于查看您的整个 html 块

[我能够通过一些修改http://jsfiddle.net/sceVA/](http://jsfiddle.net/sceVA/)让它工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:02:15.217

有问题`$list`。因为您的代码似乎有效。[http://jsfiddle.net/UVTu9/](http://jsfiddle.net/UVTu9/)

您是否尝试过检查 的值`$this`，尝试登录控制台。

# c# - C# 代码隐藏中的多个不同 SQL 更新命令

> ID：12147848
> 
> 赞同：2
> 
> 时间：2012-08-27T18:55:15.583
> 
> 标签：c#, asp.net, sql, sql-update, code-behind

在这里对 ASP.net 非常陌生，所以请保持简单的回复。

我试图让一个按钮在不同的表上运行许多不同的更新命令来更新相同的信息。我发现许多网站都在谈论如何做类似的事情，但没有足够接近的地方可以让它为我的目的工作。现在我有

```
protected void Page_Load(object sender, EventArgs e)
{
}

protected void cancel_click(object sender, EventArgs e)
{
    Response.Redirect("biosupdate.aspx");
}

protected void update_click(object sender, EventArgs e)
{
    AccessDataSource1.UpdateCommand = "UPDATE [1U] SET [bios] = ? WHERE [mobogroup] = ?";
    AccessDataSource1.Update();

    AccessDataSource1.UpdateCommand = "UPDATE [EB] SET [bios] = ? WHERE [mobogroup] = ?";
    AccessDataSource1.Update();

    AccessDataSource1.UpdateCommand = "UPDATE [PPC] SET [bios] = ? WHERE [mobogroup] = ?";
    AccessDataSource1.Update();
} 
```

但这将忽略前两组，只更新 [PPC] 或该组中的最后一组。我已经尝试`Thread.Sleep(1000);`在两组之间插入，以防每次操作只需要更多时间来完成或其他什么，但正如我所假设的那样，它什么也没做。我也尝试过使用 UNION 或 ; 将多个命令串在一起，但仍然无处可去。

关于如何让它工作的任何建议？或者甚至可能以更好的方式来实现同样的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:00:10.350

问题是您的 AccessDataSource1，您要替换*UpdateCommand* 2 次。你可以做什么 ？1 - 在每个之后执行你的 SQL。2 - 创建者*AccessDataSource2*和*AccessDataSource3*

# css - 如何仅使用 CSS 创建响应式设计

> ID：12147850
> 
> 赞同：0
> 
> 时间：2012-08-27T18:55:24.397
> 
> 标签：css, wordpress, responsive-design

我见过许多只使用 CSS 来适应移动界面/小屏幕的 WordPress 主题。关于它是如何完成的任何想法？

例如，主题[Foghorn](http://wordpress.org/extend/themes/foghorn "雾号")有一个侧边栏，它在小于 750 像素宽的屏幕中消失。我查看了代码，我很确定它是用 CSS 完成的。

我想在我正在制作的网站中采用这样的设计。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:57:52.813

您需要在 CSS 中使用媒体查询。

例子：

```
@media screen and (max-width: 750px) {
    .someClass {
        display: block;
    }
} 
```

`@media`仅当屏幕宽度为 750 像素或更小时，才会应用该块内的所有内容。

您也可以做类似的事情`min-width`或将两者结合起来。

# java - 是否可以在 abstractTableModel 上重载 getValueAt 方法？

> ID：12147854
> 
> 赞同：1
> 
> 时间：2012-08-27T18:55:41.580
> 
> 标签：java, jtable, abstracttablemodel

我正在制作一个使用 arrayList 进行数据填充的 JTable。我在arrayList中有两组数据。一个用于一种类型的表，另一个用于另一种类型的表。

我希望做的是重载 abstractTableModel 上的 getValueAt 方法，以便它接受我想要的数据集的参数。

这是可能的还是我应该以不同的方式考虑这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:59:48.213

没有人阻止你重载方法。只是`JTable`代码不会调用你的新方法。`public Object getValueAt(int rowIndex, int columnIndex)`根据您的业务逻辑，您将不得不覆盖常规并从其中调用其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:04:36.653

你可以这样做，但问题是 Swing 组件中正在调用此方法的任何人当前都不会调用重载的方法 :)

它不会有太大用处。

从我的角度来看，您基本上有 2 个选项，因为您需要以 2 种不同的表类型呈现特定数据：

*   要么我会选择 2 个不同的表模型并将所有数据分开
*   或者另一种方法可能是在模型上有一些特定的标志（新字段），这将指示您在其中使用它的表。如果您知道要使用哪种类型，则可以通过 setter 或直接在构造函数中设置该标志。

然而，从我的角度来看，第一个是推荐的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:36:03.787

接受的答案没有错，但也要考虑第二个与第一个`TableModel`共享对给定的引用`List`。一个单一的`JTable`可以通过简单地调用显示任一模型`setModel()`。

在本[例](https://stackoverflow.com/a/9134371/230513)中，`EnvDataModel`通过 获取其数据`System.getenv()`。A`PropDataModel`可能通过 获取其数据`System.getProperties()`。两者共享对`System`.

```
TableModel first = new EnvDataModel();
TableModel second = new PropDataModel();
JTable table = new JTable(fisrt);
...
table.setModel(second); 
```

# java - LiquiBase - 任何方式将更改日志 sql 输出到 2.0.5 中的文件？

> ID：12147855
> 
> 赞同：4
> 
> 时间：2012-08-27T18:55:49.257
> 
> 标签：java, spring, liquibase

目前我正在使用`liquibase.integration.spring.SpringLiquibase`bean将 Liquibase 与我的 spring 应用程序集成

从 java doc 中，tt 很可能知道`sqlOutputDir`该 bean 类有一个属性，以便 sql 可以输出到外部文件。

但是，该功能似乎在最新的 2.0.5 中不存在。

`equivalent method or function`那么，问题是，将 changeLog sql 输出到外部文件的当前是什么，或者该功能已经被完全删除了？

请给个提示，非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:48:16.423

用于编写 SQL 输出的等效 Java 命令是：`Liquibase#update(String, Writer)`. `SpringLiquibase`您可以通过子类化和覆盖在您的 Spring 应用程序中调用此方法`afterPropertiesSet`。例如：

```
@Bean
public SpringLiquibase liquibase() {
    SpringLiquibase liquibase = new SpringLiquibaseWriter();
    // ...
    return liquibase;
}

private static class SpringLiquibaseWriter extends SpringLiquibase {

    @Override
    public void afterPropertiesSet() throws LiquibaseException {

        try (Connection connection = getDataSource().getConnection()) {

            Liquibase liquibase = createLiquibase(connection);
            Writer writer; // ... get writer
            liquibase.update(getContexts(), writer);
            // ...

        } catch (LiquibaseException | SQLException e) {
            // handle
        }

        super.afterPropertiesSet();
    }
} 
```

调用`update(String,Writer)`将执行您的变更集，而无需实际更新数据库。调用`super.afterPropertiesSet`将实际执行 liquibase 更新。

我确实注意到您提到的[javadoc](http://www.liquibase.org/api/liquibase/spring/SpringLiquibase.html)`SpringLiquibase`中提到了`writeSqlFileEnabled`and`sqlOutputDir`属性。显然，这些已被删除，但 javadoc 没有更新（请参阅[CORE-1104](https://liquibase.jira.com/browse/CORE-1104)）。我不确定这些选项被删除的原因或预期的替代品是什么。我发现 liquibase 日志记录有点不足，所以这种方法可能对记录（调试）liquibase SQL 输出很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:20:22.810

看一下[updateSQL](http://www.liquibase.org/documentation/command_line.html)命令。

# java - 将节点添加到根节点时出现 java.lang.NullPointerException

> ID：12147860
> 
> 赞同：0
> 
> 时间：2012-08-27T18:56:05.857
> 
> 标签：java, xml, xml-parsing, nullpointerexception

我正在尝试通过以下函数将标记及其值动态添加到 xml 文件中。我正在尝试在根标记下添加名为*first-name*的标记及其值。但是在运行以下代码段时，我遇到了异常。

```
 public void write(String name) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();            
        Document document = db.newDocument();

        Element blobKey_E = document.createElement("first-name");
        blobKey_E.appendChild( document.createTextNode( name ) );
        // The following line produces an exception
        // LINE 27 
        document.getDocumentElement().appendChild(blobKey_E); // append the new tag under the root

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(new File("/home/non-admin/NetBeansProjects/Personal Site_Testers/web/xml/xml_1.xml"));
        transformer.transform(source, result);            
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

*例外：*

```
java.lang.NullPointerException
at Beans.XmlBuilder.write(XmlBuilder.java:27)
at Servlets.tester.doGet(tester.java:26)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我在上面的函数中突出显示了第 27 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:05:00.423

`document.getDocumentElement()`在这种情况下返回`null`

[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html#getDocumentElement%28%29) for`getDocumentElement()`说明了以下关于功能的内容：

```
This is a convenience attribute that allows direct access to the child node that is the root element of the document. 
```

在您的情况下，没有`root` `element`附加到您的 DOM。您可能想要做一个`document.appendChild(blobKey_E);`附加`blobKey_E`到 DOM 作为根元素。

理想情况下，当您尝试构建 XML DOM 时，您需要遵循以下基本步骤：

创建文档
创建根元素并将其添加到文档
创建子元素并将其附加到根或另一个现有子节点

```
public void write(String name) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();            
        Document document = db.newDocument();

        Element blobKey_E = document.createElement("first-name");
        blobKey_E.appendChild( document.createTextNode( name ) );

        /*
         * Here blobKey_E is treated as the root element for the document that you've created
         */
        document.appendChild(blobKey_E); 
//            // LINE 27 
//            document.getDocumentElement().appendChild(blobKey_E); // append the new tag under the root

        /*
         * Post this point, if you do a document.getDocumentElement(), it will no longer return 
         * a nullpointerexception because blobKey_E will be treated as the root element.
         */

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(new File("/home/non-admin/NetBeansProjects/Personal Site_Testers/web/xml/xml_1.xml"));
        transformer.transform(source, result);            
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:12:51.203

文档元素是您需要设置的根元素。将第 27 行更改为

```
document.appendChild(blobKey_E); 
```

# python - 通过 Django-celery 调度数千个一次性（非重复）任务以实现近乎同时执行

> ID：12147861
> 
> 赞同：7
> 
> 时间：2012-08-27T18:56:09.107
> 
> 标签：python, django, cron, celery, django-celery

一些上下文：我正在构建一个 Django 应用程序，它允许用户预先保存一个动作，并在未来安排他们希望执行所述动作的确切日期/时间。例如，安排下周早上 5:30 以编程方式将帖子推送到 Facebook 墙上。

我正在寻找一个可以处理一千个一次性任务实例的任务调度系统，所有实例都设置为几乎同时执行（误差范围正负一分钟）。

我正在考虑为此使用 Django-celery/Rabbitmq，但我注意到[Celery 文档](http://docs.celeryproject.org/en/latest/django/index.html)没有解决一次性使用的任务。在这里，Django-celery 是正确的选择（也许是通过继承 CrontabSchedule）还是我的精力更好地用于研究其他方法？也许用[Sched Module](http://docs.python.org/library/sched.html)和 Cron 来破解一些东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T22:21:25.753

**编辑2：**

出于某种原因，我的头最初被困在重复任务的领域。这是一个更简单的解决方案。

您真正需要的是为每个用户操作定义一个任务。您可以跳过在数据库中执行的存储任务——这就是 celery 的用途！

再次重用您的 facebook 帖子示例，并再次假设您在`post_to_facebook`某处有一个函数，它需要一个用户和一些文本，执行一些魔法，并将文本发布到该用户的 facebook，您可以将其定义为这样的任务：

```
# Task to send one update.
@celery.task(ignore_result=True)
def post_to_facebook(user, text):
    # perform magic
    return whatever_you_want 
```

当用户准备好将此类帖子排入队列时，您只需告诉 celery 何时运行该任务：

```
post_to_facebook.apply_async(
    (user, text),   # args
    eta=datetime.datetime(2012, 9, 15, 11, 45, 4, 126440)  # pass execution options as kwargs
) 
```

这一切都在这里详细说明，在一大堆可用的调用选项中： http: [//docs.celeryproject.org/en/latest/userguide/calling.html#eta-and-countdown](http://docs.celeryproject.org/en/latest/userguide/calling.html#eta-and-countdown)

如果需要调用结果，可以跳过任务定义中的 ignore_result 参数，取回一个 AsyncResult 对象，然后检查调用结果。更多信息：http: [//docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#keeping-results](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#keeping-results)

下面的一些答案仍然是相关的。您仍然希望每个用户操作都有一个任务，您仍然想考虑任务设计等，但这是完成您所要求的事情的更简单的方法。

**使用重复任务的原始答案如下：**

Dannyroa 的想法是正确的。我将在此基础上进行一点介绍。

**编辑/ TLDR：** 答案是**肯定**的，芹菜适合您的需求。您可能只需要重新考虑您的任务定义。

我假设您不允许您的用户编写任意 Python 代码来定义他们的任务。除此之外，您必须预定义用户可以安排的一些操作，然后允许他们根据需要安排这些操作。然后，您可以为每个用户操作运行一个计划任务，检查条目并为每个条目执行操作。

**一项用户操作：**

使用您的 Facebook 示例，您可以将用户的更新存储在一个表中：

```
class ScheduledPost(Model):
    user = ForeignKey('auth.User')
    text = TextField()
    time = DateTimeField()
    sent = BooleanField(default=False) 
```

然后，您将每分钟运行一次任务，检查该表中计划在最后一分钟发布的条目（基于您提到的误差范围）。如果达到一分钟窗口非常重要，则可以更频繁地安排任务，例如每 30 秒一次。任务可能如下所示（在 myapp/tasks.py 中）：

```
@celery.task
def post_scheduled_updates():
    from celery import current_task
    scheduled_posts = ScheduledPost.objects.filter(
        sent=False,
        time__gt=current_task.last_run_at, #with the 'sent' flag, you may or may not want this
        time__lte=timezone.now()
    )
    for post in scheduled_posts:
        if post_to_facebook(post.text):
            post.sent = True
            post.save() 
```

配置可能如下所示：

```
CELERYBEAT_SCHEDULE = {
    'fb-every-30-seconds': {
        'task': 'tasks.post_scheduled_updates',
        'schedule': timedelta(seconds=30),
    },
} 
```

**其他用户操作：**

除了发布到 Facebook 之外，对于每个用户操作，您都可以定义一个新表和一个新任务：

```
class EmailToMom(Model):
    user = ForeignKey('auth.User')
    text = TextField()
    subject = CharField(max_length=255)
    sent = BooleanField(default=False)
    time = DateTimeField()

@celery.task
def send_emails_to_mom():
    scheduled_emails = EmailToMom.objects.filter(
        sent=False,
        time__lt=timezone.now()
    )
    for email in scheduled_emails:
        sent = send_mail(
            email.subject,
            email.text,
            email.user.email,
            [email.user.mom.email],
        )
        if sent:
            email.sent = True
            email.save()

    CELERYBEAT_SCHEDULE = {
        'fb-every-30-seconds': {
            'task': 'tasks.post_scheduled_updates',
            'schedule': timedelta(seconds=30),
        },
        'mom-every-30-seconds': {
            'task': 'tasks.send_emails_to_mom',
            'schedule': timedelta(seconds=30),
        },
    } 
```

**速度和优化：**

`post_scheduled_updates`为了获得更高的吞吐量，您可以生成一堆子任务并并行执行（给定足够的[工人](http://docs.celeryproject.org/en/latest/userguide/workers.html)），而不是迭代更新以发布并在调用期间连续发送它们。然后，对的调用`post_scheduled_updates`运行得非常快，并安排了一大堆任务——每个 fb 更新一个任务——尽快运行。看起来像这样：

```
# Task to send one update. This will be called by post_scheduled_updates.
@celery.task
def post_one_update(update_id):
    try:
        update = ScheduledPost.objects.get(id=update_id)
    except ScheduledPost.DoesNotExist:
        raise
    else:
        sent = post_to_facebook(update.text)
        if sent:
            update.sent = True
            update.save()
        return sent

@celery.task
def post_scheduled_updates():
    from celery import current_task
    scheduled_posts = ScheduledPost.objects.filter(
        sent=False,
        time__gt=current_task.last_run_at, #with the 'sent' flag, you may or may not want this
        time__lte=timezone.now()
    )
    for post in scheduled_posts:
        post_one_update.delay(post.id) 
```

我发布的代码没有经过测试，当然也没有优化，但它应该让你走上正轨。在您的问题中，您暗示了对吞吐量的一些担忧，因此您需要仔细查看要优化的地方。一个明显的问题是批量更新而不是迭代调用`post.sent=True;post.save()`.

**更多信息：**

有关定期任务的更多信息：http: [//docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)。

关于任务设计策略的部分：http: [//docs.celeryproject.org/en/latest/userguide/tasks.html#performance-and-strategies](http://docs.celeryproject.org/en/latest/userguide/tasks.html#performance-and-strategies)

这里有一整页关于优化 celery：http: [//docs.celeryproject.org/en/latest/userguide/optimizing.html](http://docs.celeryproject.org/en/latest/userguide/optimizing.html)。

这个关于子任务的页面也可能很有趣：[http](http://docs.celeryproject.org/en/latest/userguide/canvas.html) ://docs.celeryproject.org/en/latest/userguide/canvas.html 。

事实上，我建议阅读所有 celery 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:03:48.150

我要做的是创建一个名为 ScheduledPost 的模型。

我将有一个每 5 分钟左右运行一次的 PeriodicTask。

该任务将检查 ScheduledPost 表中是否有任何需要推送到 Facebook 的帖子。

# sorting - 在fortran中查找重复记录

> ID：12147864
> 
> 赞同：1
> 
> 时间：2012-08-27T18:56:13.983
> 
> 标签：sorting, fortran, grouping

我有大约一百万条记录的数据，每条记录有 6 个浮点数。我想找到共享相同六个值的记录集，理想情况下我想在 Fortran 中进行，因为其余的处理是在 Fortran 中完成的。推荐的方法是什么？最后，我希望将原始索引映射到新索引，这是这些数据集的压缩版本，没有重复。每条记录都有其他属性，我有兴趣根据六个属性为组聚合这些属性。

我试图通过将输出导出为 csv 来查找这些集合，将其导入 MS Access，然后找到这些集合的查询需要 10 秒左右才能运行。我写了一个代码，它执行[http://rosettacode.org/wiki/Remove_duplicate_elements#Fortran](http://rosettacode.org/wiki/Remove_duplicate_elements#Fortran) this（“线性搜索”？），但是有百万条记录它在 10 分钟左右后没有完成，我只是放弃了这种方法。

我现在正在考虑的方法是从[slatec](http://www.netlib.org/slatec/)或[orderpack](http://www.fortran-2000.com/rank/)调整排名/排序例程，我认为这比我的粗略代码做得更好。但我想知道这些事情是否已经完成并且我可以下载，或者是否有更好的方法。

**编辑：**

我说“寻找重复”，但我实际上需要从原始数据记录映射到这个缩减集。我想要像 imap(1:n) 这样的映射数组，其中 imap(1)、imap(4)、imap(5) 如果这 6 个浮点 pt 具有相同的值。原始记录 1、4 和 5 中的值相同。希望这与我最初所说的没有太大的偏差...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:37:35.193

这就是我最终要做的……我`mrgrnk`从[ORDERPACK](http://www.fortran-2000.com/rank/)中获取了代码，并根据我的目的进行了调整。下面的子程序`findmap`似乎正在做我想做的事情。

```
module fndmap
use m_mrgrnk, only:mrgrnk
implicit none
contains
  subroutine findmap(stkprm, stkmap )
    ! given 2-d real array stkprm, find a mapping described below:
    !
    ! (identical records are assigned with same index)
    !   stkmap(i) == stkmap(j)  iff stkprm(:,i) == stkprm(:,j)
    ! (order conserved)
    !   if i < j and stkmap(i) /= stkmap(j), then stkmap(i) < stkmap(j)
    ! (new index are contiguous)
    !   set(stkmap) == {1,2,..,maxval(stkmap)}
    !
    real,dimension(:,:),intent(in) :: stkprm
    integer,dimension(:), intent(out) :: stkmap
    integer, dimension(size(stkprm,2)) :: irngt
    integer, dimension(size(stkprm,2)) :: iwork
    integer ::  nrec, i, j
    nrec = size(stkprm,2)
    ! find rank of each record, duplicate records kept
    call ar_mrgrnk(stkprm, irngt)

    ! construct iwork array, which has index of original array where the
    ! record are identical, and the index is youguest
    i = 1
    do while(i<=nrec)
      do j=i+1,nrec
        if (any(stkprm(:,irngt(i))/=stkprm(:,irngt(j)))) exit
      enddo
      iwork(irngt(i:j-1)) = minval(irngt(i:j-1))
      i = j
    enddo

    ! now construct the map, where stkmap(i) shows index of new array 
    ! with duplicated record eliminated, original order kept
    j = 0
    do i=1,nrec
      if (i==iwork(i)) then
        j = j+1
        stkmap(i) = j
      else
        stkmap(i) = stkmap(iwork(i))
      endif
    enddo
  end subroutine

  recursive subroutine ar_mrgrnk(xdont, irngt)
    ! behaves like mrgrnk of ORDERPACK, except that array is 2-d
    ! each row are ranked by first field, then second and so on
    real, dimension(:,:), intent(in) :: xdont
    integer, dimension(:), intent(out), target :: irngt
    integer, dimension(size(xdont,2)) :: iwork

    integer :: nfld,nrec
    integer :: i, j
    integer, dimension(:), pointer :: ipt

    nfld=size(xdont,1)
    nrec=size(xdont,2)

    ! rank by the first field
    call mrgrnk(xdont(1,:), irngt)

    ! if there's only one field, it's done
    if (nfld==1) return

    ! examine the rank to see if multiple record has identical
    ! values for the first field
    i = 1
    do while(i<=nrec)
      do j=i+1,nrec
        if (xdont(1,irngt(i))/=xdont(1,irngt(j))) exit
      enddo
      ! if one-to-one, do nothing
      if (j-1>i) then
      ! if many-to-one, 
        ! gather those many, and rank them
        call ar_mrgrnk(xdont(2:,irngt(i:j-1)),iwork)
        ! rearrange my rank based on those fields to the right
        ipt => irngt(i:j-1)
        ipt = ipt(iwork(1:j-i))
      endif
      i = j
    enddo
    if(associated(ipt)) nullify(ipt)
  end subroutine
end module 
```

# iphone - UIPickerView 从外部 XML 文件动态填充数据

> ID：12147866
> 
> 赞同：0
> 
> 时间：2012-08-27T18:56:22.867
> 
> 标签：iphone, xcode, uipickerview

是否可以从外部 XML 文件动态填充 UIPickerView 数据。例如，我将在我的选择器视图中有 TextA、TextB 和 TextC，而我在远程服务器的 XML 文件中也有相同的内容。我已经成功开发了从远程服务器读取 XML 数据并在我的 tableview 中显示文本（它们是标题和 url）。但现在我正试图从我的 XML 文件中填充我的 UIPickerView 数据。这样做的主要目的是动态控制我的 XML 文件中的 UIPickerView 数据。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:07:58.220

您可以使用[`NSXMLParser`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html). 它是一个事件驱动的解析器，因此您必须设置一个委托来处理所有回调并从解析的节点创建您的数组和字典。

您还可以使用[XMLReader 之](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)类的类。这使您可以简单地将 xml 作为 NSData 或 NSString 对象传递并获取已解析的 NSDictionary。然后，您可以使用它来填充 UIPickerView。

不过这有点不方便`.plist`，如果可以的话，使用文件会是一个更好的选择。当然，如果您也想从其他平台访问相同的信息，这不是一种选择。

然后，下载文件后您要做的就是：

```
NSArray *onlineList = [plistAsString propertyList]; 
```

或者，如果您将文件下载到磁盘上：

```
NSArray *onlineList = [[NSArray alloc] initWithContentsOfFile:pathToPlistFile];
// release if not using ARC. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:28:55.167

我已执行以下操作以在我的一个应用程序中显示标题和 url。我希望填充选择器数据而不是表格单元格： [这是我的一个应用程序的链接，](http://itunes.apple.com/us/app/meronepal/id509408152?ls=1&mt=8)它演示了以下代码的实现：

```
urlString = @"http://jeewanaryal.web44.net/iPhoneXML/nepaliMoviesNews.xml";
data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
dict = [XMLReader dictionaryForXMLData:data error:nil];

newsItems = [[NSMutableArray alloc] initWithArray:[[[dict objectForKey:@"list"] objectForKey:@"lists"] objectForKey:@"news"]];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

CustomCell *cell= [[CustomCell alloc] initWithFrame:CGRectMake(0, 0, 300, 60)];

// Default to no selected style and not selected
cell.selectionStyle = UITableViewCellSelectionStyleNone;

// Set the image for the cell  
[cell setTheImage:[UIImage imageNamed:[NSString stringWithFormat:@"Arrow3.png"]]];

NSMutableArray *temp = [[NSMutableArray alloc] init];

for (NSDictionary *fruitDict in newsItems) {

    //UILabel *songTitle = [[UILabel alloc] initWithFrame:CGRectMake(40, 200, 300, 40)];

    [temp insertObject:[NSString stringWithFormat:@"%@",[[fruitDict objectForKey:@"title"] objectForKey:@"text"]]
               atIndex:0];
    //cell.textLabel.text = [NSString stringWithFormat:@"%@",[[fruitDict objectForKey:@"title"] objectForKey:@"text"]];

    //[self.view addSubview:songTitle];
}

//NSLog(@"\n\n temp: \n %@",temp);

cell.textLabel.text = [temp objectAtIndex:indexPath.row];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.textLabel.font = [UIFont fontWithName:@"Gill Sans" size:20];
cell.textLabel.textColor = [UIColor colorWithRed:102.0/255 green:204.0/255 blue:170.0/255 alpha:1];
//cell.textLabel.textColor =[UIColor colorWithRed:(CGFloat)0.24 green:(CGFloat)0.7 blue:(CGFloat)0.45 alpha:(CGFloat)1];
cell.backgroundColor = [UIColor blackColor];
[[cell textLabel] setTextAlignment:UITextAlignmentLeft];
//cell.textLabel.adjustsFontSizeToFitWidth = YES;
//cell.detailTextLabel.numberOfLines = 2;  

return cell;
} 
```

# jquery-globalization - 无千位分隔符的数字格式

> ID：12147867
> 
> 赞同：3
> 
> 时间：2012-08-27T18:56:24.700
> 
> 标签：jquery-globalization

是否有一种数字格式可以生成没有千位分隔符的本地化数字？

```
 Globalize.format("1000.12", "n?" ) 
```

我意识到我可以做到：

```
Globalize.culture().numberFormat[","]=""; 
```

但是我有一些我想要关闭的字段和一些应该打开的字段。例如...如果值为：

1000.123 -> 希望它显示格式为 1000,12 或 1000.12，具体取决于语言环境。但没有千位分隔符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:32:06.887

您可以使用“d”格式而不是“n”格式来排除千位分隔符。

```
Globalize.format(1000.12, "d"); 
```

**编辑**
请注意，这仅在您不关心小数部分时才有效。

如果您关心小数部分，据我所知，您不能排除千位分隔符，除非通过以下方法之一：

1.  将文化对象中的千位字符设置为空字符串：

    ```
    Globalize.culture().numberFormat[","] = "";
    Globalize.format(1000.12, "n"); 
    ```

    你可以很容易地把它变成一个实用函数：

    ```
    function formatNumberNoThousands(num, format, culture) {
        var numberFormat = Globalize.cultures[culture || Globalize.culture().name].numberFormat,
            thousands = numberFormat[","];
        numberFormat[","] = "";
        try { return Globalize.format(num, format, culture); }
        finally { numberFormat[","] = thousands; }
    } 
    ```

2.  对格式的字符串结果执行替换：

    ```
    Globalize.format(1000.12, "d").replace(new RegExp("\\" + Globalize.culture().numberFormat[","], "g"), ""); 
    ```

    它也可以很容易地变成一个实用函数：

    ```
    function formatNumberNoThousands(num, format, culture) {
        return Globalize.format(num, format).replace(new RegExp("\\" +  Globalize.culture(culture).numberFormat[","], "g"), "");
    } 
    ```

    使用这种方法，如果您知道格式化结果中永远不会超过一千个字符，您可以删除正则表达式。否则，如果您打算大量使用它或在循环中使用它，您将需要缓存正则表达式并重新使用它。

# c++ - 关于 sizeof()

> ID：12147873
> 
> 赞同：0
> 
> 时间：2012-08-27T18:56:53.123
> 
> 标签：c++, memory

我对 sizeof() 有疑问。我知道它给出了数组中使用的字节数。我的问题是如果数组没有定义，但它声明了怎么办。

例子：

```
float array[3];
int p = sizeof(array); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:59:22.443

产生的值`sizeof`仅取决于类型，而不是运行时发生的任何事情¹。

也就是说，尽管有这个名字，它`float array(3);`只是简单地定义了*一个*浮点数，初始值为 3，因此`int p=sizeof(array);`等价于`int p = sizeof(float);`.

编辑：（对应于编辑的问题）：是的，`float array[3];`定义了一个3个浮点数的数组，所以`int p = sizeof(array);`相当于`int p = 3 * sizeof(float);`

* * *

¹在 C++ 中。从 C99 开始，C 中的情况有些不同（但与手头的问题无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:03:21.580

使用此代码时，您没有声明浮点数组

```
 float array(3); 
```

您已经简单地创建了一个**名为**数组的浮点变量，其值为 3。您对该变量的 sizeof 调用仅返回浮点的大小。你是否正确地声明了它

```
float float_array[3]; 
```

并打电话给`sizeof(float_array)`你会得到你期望的价值 -`3*sizeof(float)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T19:09:14.977

sizeof() 没有给出数组中使用的字节数，您的定义不完整且部分不正确。

[http://en.cppreference.com/w/cpp/language/sizeof](http://en.cppreference.com/w/cpp/language/sizeof)说：

“sizeof(type)——返回类型对象表示的字节大小”

正如其他人所指出的，float array[3] 也是声明具有 3 个元素的浮点数组的正确方法。

最后，sizeof(array) 将返回 12，而 sizeof(array) 将返回 16，如果你用 4 个元素声明它，如果你声明一个包含 5 个双精度而不是浮点数的数组，sizeof(array) 将返回 40，至少在我的系统。当然，用于数据类型的字节数可能因系统而异。

# build - 如何从源代码构建 PrototypeJS？

> ID：12147875
> 
> 赞同：1
> 
> 时间：2012-08-27T18:56:55.113
> 
> 标签：build, rake, prototypejs, sprockets

我克隆了prototype.js 存储库，但是当我尝试构建时，出现错误：

```
rake aborted!
uninitialized constant Sprockets::Secretary 
```

是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T08:46:58.653

我也遇到了这个问题。

尝试使用不同版本的链轮。

```
gem uninstall sprockets, gem install sprockets --version 1.0.2 
```

1.0.2 是适合我的版本。

# qt - 在 Qt 编辑器中手动编辑 .ui 文件

> ID：12147878
> 
> 赞同：9
> 
> 时间：2012-08-27T18:57:11.377
> 
> 标签：qt, qt-creator

我最近一直在手动调整我的 .ui 文件，我很好奇，有人知道如何在 Qt Creator 中关闭 .ui 文件的只读模式吗？

如果不是很清楚，我的意思是 .ui 文件（默认情况下）在 Qt Creator 中是可查看的，但不是可写的......而且启动其他一些 xml 编辑器是一个小麻烦：/

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T19:07:57.810

在项目资源管理器中任何 .ui 文件的上下文菜单中，单击**打开**方式，然后单击**纯文本编辑器**。这为您提供了相同的编辑器，但具有写入模式。

请注意，当双击并更改为“编辑”模式而不是“设计”模式时，ui 文件的禁用写入模式不是错误，而是一项功能。手动编辑 ui 文件可能会破坏您的文件。至少，这是 Qt 人的想法……

# ruby - 使用考拉宝石进行奇怪的重定向

> ID：12147880
> 
> 赞同：0
> 
> 时间：2012-08-27T18:57:32.907
> 
> 标签：ruby, facebook, sinatra, koala

我正在使用 ruby​​、sinatra 和 koala gem 为 facebook 创建一个应用程序。当我重定向到 /auth/facebook 时，它会执行所需的操作，但是它首先会重定向到带有此矩形的页面，然后转到身份验证对话框。我认为这对最终用户来说非常难看。如何删除这个奇怪的重定向？ ![截屏](../Images/3486b09ac46ce1d268bd653eb8d18834.png) 代码：

```
#This function defines a get and post route with the same parameters.
def get_or_post(path, opts={}, &block)
  get(path, opts, &block)
  post(path, opts, &block)
end

get "/auth/facebook/?" do
  redirect authenticator.url_for_oauth_code(:permissions => FACEBOOK_SCOPE)
end

get_or_post '/auth/facebook/callback/?' do
  session[:access_token] = authenticator.get_access_token(params[:code])
  update_user()
  redirect '/'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:11:04.167

我猜你正在画布 iframe 内进行重定向？这当然会尝试在该 iframe 内显示身份验证对话框，并且身份验证对话框不*希望*显示在任何类型的 (i) 框架中。

因此，不要使用重定向（无法指定*目标*），而是使用 JavaScript 来“重定向”——让你的脚本输出一个小的 HTML 文档，它基本上只包含一行 JavaScript，它使用

```
top.location.href = '{auth dialog URL goes here}'; 
```

在当前浏览器窗口的*顶部框架*中加载新 URL 。

# iphone - 从 NSString 解析 XML 以获取值

> ID：12147883
> 
> 赞同：1
> 
> 时间：2012-08-27T18:57:35.513
> 
> 标签：iphone, ios, ios5, xml-parsing

这个问题是针对在 xcode 中操作 NSString 的。

我有一个从网上获得的 XML 文本字符串，看起来像这样

```
<current temperature="73" day="Mon" humidity="59" windspeed="10"></current> 
```

如何从该字符串中获取单个值并将它们放入我的 NSString 变量中？

例如

```
NSString *tempStr = ??
NSString *dayStr = ??
NSString *windspeedStr = ?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:14:42.800

首先，下载 RaptureXML 并将其包含在您的项目中，如[RaptureXML 项目站点](https://github.com/ZaBlanc/RaptureXML)中所述。

要解析单个给定行，请使用以下代码段 - 您的输入作为`inXmlString`;

```
//transform string into an XML DOM
RXMLElement *rootNode = [RXMLElement elementFromXMLString:inXmlString 
                                             withEncoding:NSUTF8StringEncoding];
if (rootNode == nil || ![rootNode isValid])
{
    //do something, we failed!
}
else 
{
    NSString *temperature = [rootNode attribute:@"temperature"];
    NSString *day = [rootNode attribute:@"day"];
    NSString *windspeed = [rootNode attribute:@"windspeed"];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-27T19:01:02.360

基本思路是使用 NSString 方法 componentsSeparatedByString: 来解析出你想要的数据。您可能需要做更多的工作才能使其完全适合您的场景。

```
NSArray* paArray1= [pstrXMLString componentsSeparatedByString:@" "];
temlStr= [[[paArray1 objectAtIndex:1] componentsSeparatedByString:@"="] objectAtIndex:1];
dayStr= [[[paArray1 objectAtIndex:2] componentsSeparatedByString:@"="] objectAtIndex:1];
windspeedStr= [[[paArray1 objectAtIndex:3] componentsSeparatedByString:@"="] objectAtIndex:1]; 
```

# php - 在重定向时触发 jquery 向下滑动消息

> ID：12147884
> 
> 赞同：1
> 
> 时间：2012-08-27T18:57:35.673
> 
> 标签：php, jquery, redirect

我有一个 Twitter 帐户链接列表（在 people.php 上），用户可以通过按人名来关注。当他们按下链接时，follow.php 脚本将运行并且用户正在关注此人。在此脚本的末尾有一个标头（“Location:people.php”）将用户重定向回人员页面。

我想要做的是在用户被重定向到 people.php 页面时，在一条向下滑动的消息中给他们一条消息，说他们现在正在关注他们点击的任何人。

我知道如何制作这个（这就是我要制作的[http://www.youtube.com/watch?v=7wNz5T8SepQ](http://www.youtube.com/watch?v=7wNz5T8SepQ)），我只是不知道如何连接它，所以只会触发向下滑动消息在这个重定向上，不是当用户第一次访问 people.php 页面时，以及如何让它显示你刚刚关注的人。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:08:22.360

由于您正在控制重定向，您是否可以在查询字符串上附加一个变量来强制通知，ala：
[http ://www.yoursite.com/people.php?notify=true](http://www.yoursite.com/people.php?notify=true)

您也可以使用会话 cookie。在用户单击链接时设置 cookie，并在消息显示时将其删除。由于您将使用 jQuery，因此为简单起见，您可以使用 jQ cookie 插件：
[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:08:28.927

更改您的重定向标头以包含一个额外的标志 - header("Location:people.php?following=who") 然后您可以在他们关注某人后返回 people.php 页面时查找该参数

# php - 如何从 MediaWiki API 获取主图像？

> ID：12147886
> 
> 赞同：5
> 
> 时间：2012-08-27T18:57:46.300
> 
> 标签：php, xml, curl, wikipedia-api, mediawiki-api

您好，我正在使用 Curl 从 Wikipedia 获取信息，并且我只想接收有关主要图像的信息，我不想接收文章的所有图像.. 例如.. 如果我想获取有关所有图像的信息英语图片 ( [http://en.wikipedia.org/wiki/English_language](http://en.wikipedia.org/wiki/English_language) ) 我应该去这个 URL： [http://en.wikipedia.org/w/api.php?action=query&titles=English_Language&prop=images](http://en.wikipedia.org/w/api.php?action=query&titles=English_Language&prop=images) 但我收到了人们用 XML 说英语的国家/地区的标志：

```
<?xml version="1.0"?> <api>   <query>
    <normalized>
      <n from="English_language" to="English language" />
    </normalized>
    <pages>
      <page pageid="8569916" ns="0" title="English language">
        <images>
          <im ns="6" title="File:Anglospeak(800px)Countries.png" />
          <im ns="6" title="File:Anglospeak.svg" />
          <im ns="6" title="File:Circle frame.svg" />
          <im ns="6" title="File:Commons-logo.svg" />
          <im ns="6" title="File:Flag of Argentina.svg" />
          <im ns="6" title="File:Flag of Aruba.svg" />
          <im ns="6" title="File:Flag of Australia.svg" />
          <im ns="6" title="File:Flag of Bolivia.svg" />
          <im ns="6" title="File:Flag of Brazil.svg" />
          <im ns="6" title="File:Flag of Canada.svg" /> 
```

我只想要关于主图像的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-16T07:32:05.190

有消息！[^(（从 2014 年开始）)]
一个新的扩展程序[**PageImages**](https://www.mediawiki.org/wiki/Extension:PageImages)可用，并且已经安装在 Wikimedia wiki 上。

代替`prop=images`, 使用`prop=pageimages`，您将获得每个元素的`pageimage`属性和子节点。`<thumbnail>``<page>`

诚然，它不能保证给出最好的结果，但在你的例子（[英语](https://en.wikipedia.org/wiki/English_language)）中它[运作良好](http://en.wikipedia.org/w/api.php?action=query&titles=English_Language&redirects&prop=pageimages)，只产生地理分布的地图，而不是所有的标志。

* * *

此外，[OpenSearch API](https://www.mediawiki.org/wiki/API:Opensearch)确实会`<image>`在其 xml 表示中返回一个，但此 API 不能用于列表，也不能与 Query API 结合使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T11:20:57.430

这就是我让它工作的方式......

```
$.getJSON("http://en.wikipedia.org/w/api.php?action=query&format=json&callback=?", {
    titles: "India",
    prop: "pageimages",
    pithumbsize: 150
  },
  function(data) {
    var source = "";
    var imageUrl = GetAttributeValue(data.query.pages);
    if (imageUrl == "") {
      $("#wiki").append("<div>No image found</div>");
    } else {
      var img = "<img src=\"" + imageUrl + "\">"
      $("#wiki").append(img);
    }
  }
);

 function GetAttributeValue(data) {
  var urli = "";
  for (var key in data) {
    if (data[key].thumbnail != undefined) {
      if (data[key].thumbnail.source != undefined) {
        urli = data[key].thumbnail.source;
        break;
      }
    }
  }
  return urli;
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<html>

<head></head>

<body>
  <div id="wiki"></div>
</body>

</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T22:26:48.077

正如其他人所指出的，Wikipedia 文章实际上并没有“主要图像”之类的东西，因此您的第一个问题将是决定如何在给定页面上使用的不同图像之间进行选择。一些可能的选择标准可能是：

*   文章中最大的图像。
*   超过某些特定最小尺寸的第一张图像，例如 60 × 60 像素。
*   第一张图片直接在文章的源文本中引用，而不是通过模板。

* * *

对于前两个选项，您需要通过获取页​​面呈现的 HTML 代码[`action=parse`](https://www.mediawiki.org/wiki/API%3aParsing_wikitext#parse)并使用 HTML 解析器来查找`img`代码中的标签，如下所示：

[http://en.wikipedia.org/w/api.php?action=parse&page=English_language&prop=text|images](http://en.wikipedia.org/w/api.php?action=parse&page=English_language&prop=text|images)

（您不能直接从 API 获取页面上使用的图像大小的原因是该信息实际上并未存储在 MediaWiki 数据库的任何位置。）

* * *

对于最后一个选项，您想要的是文章的源维基文本，可通过`prop=revisions`with 获得`rvprop=content`：

[http://en.wikipedia.org/w/api.php?action=query&titles=English_language&prop=revisions|images&rvprop=content](http://en.wikipedia.org/w/api.php?action=query&titles=English_language&prop=revisions|images&rvprop=content)

请注意，信息框等中的许多图像被指定为模板的*参数*，因此仅解析`[[Image:...]]`语法会丢失其中的一些。更好的解决方案可能是获取页面上使用的所有图像的列表`prop=images`（您可以在同一个查询中执行，如上所示）并在 wikitext 中查找它们的名称（带或不带`Image:`/前缀）。`File:`

请记住 MediaWiki 自动规范化页面（和图像）名称的各种方式：最值得注意的是，下划线映射到空格，连续的空格折叠为单个空格，并且名称的第一个字母大写。如果您决定采用这种方式，这里有一些示例 PHP 代码，它将文件名列表转换为应该与 wikitext 中的任何一个匹配的正则表达式：

```
foreach ($names as &$name) {
    $name = trim( preg_replace( '/[_\s]+/u', ' ', $name ) );
    $name = preg_quote( $name, '/' );
    $name = preg_replace( '/^(\\\\?.)/us', '(?i:$1)', $name );
    $name = preg_replace( '/\\\\? /u', '[_\s]+', $name );
}
$regexp = '/' . implode( '|', $names ) . '/u'; 
```

例如，当给定列表时：

```
Anglospeak(800px)Countries.png
Anglospeak.svg
Circle frame.svg
Commons-logo.svg
Flag of Argentina.svg
Flag of Aruba.svg 
```

生成的正则表达式将是：

```
/(?i:A)nglospeak\(800px\)Countries\.png|(?i:A)nglospeak\.svg|(?i:C)ircle[_\s]+frame\.svg|(?i:C)ommons\-logo\.svg|(?i:F)lag[_\s]+of[_\s]+Argentina\.svg|(?i:F)lag[_\s]+of[_\s]+Aruba\.svg/u 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T19:05:25.367

您可以使用以下[`imlimit`参数](http://www.mediawiki.org/wiki/API%3aProperties#images_.2F_im)将查询限制为文章中的第一张图片：

[http://en.wikipedia.org/w/api.php?action=query&titles=English_Language&redirects&prop=images&imlimit=1](http://en.wikipedia.org/w/api.php?action=query&titles=English_Language&redirects&prop=images&imlimit=1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-08T15:57:49.513

**重要附录**

[上面的 Bergi 的回答](https://stackoverflow.com/a/24774769/960691)看起来非常棒，但我因为无法让它发挥作用而大发雷霆。

我需要包含`pilicense=any`在我的查询中，否则任何受版权保护的图像都会被忽略。

这是我最终得到的查询：

[https://en.wikipedia.org/w/api.php?action=query&pilicense=any&format=jsonfm&prop=pageimages&generator=search&gsrsearch=My+incategory:English-language_films+prefix:My&gsrlimit=3](https://en.wikipedia.org/w/api.php?action=query&pilicense=any&format=jsonfm&prop=pageimages&generator=search&gsrsearch=My+incategory:English-language_films+prefix:My&gsrlimit=3)

我知道已经有一段时间了，但这是我开始长达数天的搜索如何做到这一点时登陆的第一页之一，所以我想在这个页面上专门分享这个，为像我这样可能来这里的其他人.

# objective-c - 使用 NIB UIView 作为子视图

> ID：12147889
> 
> 赞同：1
> 
> 时间：2012-08-27T18:57:50.400
> 
> 标签：objective-c, xcode

我正在尝试使用`UIView`来自 XIB 的 a 在另一个视图控制器的子视图容器中显示。这就是我尝试在 MainViewController.h 中显示子视图的方式：

```
@property (nonatomic, strong) UIView *subView; 
```

主视图控制器.m：

```
UIViewController* nameController = [[UIViewController alloc] initWithNibName:@"NamesViewController" bundle:nil];
subView = [nameController view];

[self.view addSubview:subView]; 
```

但我得到这个错误：

`*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x688e580> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key textField.'`

是我做错了什么还是我错过了什么？我用 xib 制作了 NamesViewController 类，在视图中放置了一个文本字段，现在尝试将此 xib 中的视图用作子视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:11:08.197

您应该分配`NamesViewController`而不是“普通” `UIViewController`：

```
UIViewController* nameController = [[NamesViewController alloc]
    initWithNibName:@"NamesViewController"
             bundle:nil]; 
```

否则，任何连接 s 的尝试`IBOutlet`都会导致崩溃。当然，我只是假设 NIB 名称与控制器名称匹配；如果没有，您需要使用正确的名称。

# regex - Perl，模式后的任何匹配字符串

> ID：12147893
> 
> 赞同：0
> 
> 时间：2012-08-27T18:58:07.663
> 
> 标签：regex, string, perl, matching, any

如果在某个模式之后存在任何字符串，我正在尝试匹配。模式是“模式”“介于两者之间的任何东西”“[之后]”。不区分大小写。

例如

```
pattern 1 [after] ABC
pattern 2 [after] 123 abc DEX
pattern 3 [after] 
pattern 12345123 [after]
pattern @ASd#98 @_90sd [after] xyz dec
[after] 4 pattern 
```

所以我想得到的结果是，

```
pattern 1 [after] ABC
pattern 2 [after] 123 abc DEX
pattern @ASd#98 @_90sd [after] xyz dec 
```

它以 "pattern" 开头并以 "[after] 结尾，任何夹在中间的东西也被接受。

我很难将 [ ] & if string 的分隔符合并在一起。

我试过了，我得到的最接近的结果是匹配的

```
m/pattern/ ../ \[after]/

pattern 1 [after] ABC
pattern 2 [after] 123 ABC DEX
pattern 3 [after] 
pattern 12345123 [after]
pattern @ASd#98 @_90sd [after] xyz dec 
```

但我不需要第 3 或第 4 个模式，因为它在“[after]”之后不包含任何数字或字符。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:06:29.887

这是我用来针对您的输入进行测试的代码（我只是将其分类并通过管道传输到脚本）

```
#!/usr/bin/perl

while(<>)
{
    print if (/^pattern.*\[after\]\s*\S+/);
} 
```

所以为你分解它：

`/^pattern`: 匹配任何以“pattern”开头的字符串

`.*\[after\]`: 匹配后面跟“[after]”的任何字符

`\s*\S+`: 匹配 0 个或多个空白字符后跟一个或多个非空白字符

这应该给你足够的工作来调整它，因为你认为合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:14:59.193

代码：

```
$str = 'pattern 2 [after] 123 abc DEX';

if ($str =~ m/^pattern\s+(\d+)\s+\[after\]\s+(.+)/) {
  print "$1\t$2\n";
} else {
  print "(no match)\n";
} 
```

输出：

```
2   123 abc DEX 
```

[在此处](http://ideone.com/sp1wt)测试此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:02:39.507

这是你想要的吗：

```
/pattern [0-9] \[after\](?= .)/s 
```

或者

```
/pattern [0-9] \[after\] ./s 
```

# sql - MS Access 中具有 NULL 值比较的 SQL 查询

> ID：12147894
> 
> 赞同：4
> 
> 时间：2012-08-27T18:58:07.867
> 
> 标签：sql, ms-access

我正在尝试比较两个表和输出结果，其中 table1 中的列和 table2 中的同一列不相等。

查询如下所示：

```
Select Table1.Column1, Table1.Column2, Table1.Column3, Table1.Column4
from Table1 INNER JOIN
     Table2
     ON Table1.Column1 = Table2.Column1 AND
        Table1.Column2 = Table2.Column2 AND
        Table1.Column3 = Table2.Column3
WHERE Table1.Column4 <> Table2.Column4; 
```

Column1、Column2、Column3 共同构成了两个表的主键。

当 Column4 有缺失值 (null) 时，相应的记录不会在结果输出中显示为不匹配。

（这也发生在其他列上，无论是文本、数字还是日期/时间数据类型）

任何意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T19:04:19.890

您需要 LEFT 联接，而不是 INNER 联接。

```
from Table1 LEFT JOIN 
```

你可能想说：

```
Select Table1.Column1, Table1.Column2, Table1.Column3, Table1.Column4
from Table1 LEFT JOIN
     Table2
     ON Table1.Column1 = Table2.Column1 AND
        Table1.Column2 = Table2.Column2 AND
        Table1.Column3 = Table2.Column3
WHERE Table1.Column4 & "" <> Table2.Column4 & ""; 
```

将长度为零的字符串与字段连接将确保显示值和空值之间的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:15:13.787

**在 SQL 中，NULL 不仅不等于任何东西，它也不等于任何东西。**

任何与 NULL（除了`IS NULL`）的比较都会产生一个 UNKNOWN 值，因此不会返回任何行。

作为示例（在这种情况下使用 MySQL 语法，但 Access 也是如此）；

```
SELECT 1 FROM DUAL WHERE 0 = 0;
SELECT 2 FROM DUAL WHERE 0 <> 1;
SELECT 3 FROM DUAL WHERE NULL = NULL;
SELECT 4 FROM DUAL WHERE NULL <> 1; 
```

查询 1 和 2 显然会分别返回 1 和 2，但查询 3 和 4 将（不太明显）不返回任何内容。

有关此链接的 Access 中的更多信息[（滚动到“错误 5”）](http://allenbrowne.com/casu-12.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:58:50.820

对于 MS SQL：

WHERE isnull(Table1.Column4,'') <> isnull(Table2.Column4,'')

或者，为了对其他 SQL 实现更标准，使用 'coalesce' 而不是 'isnull'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-14T17:45:13.403

空是奇怪的。Null 不等于任何东西（甚至是 null），也不是不等于任何东西（甚至是 null）。最简单的解决方案是将空值变成非空值。在 Access 中，使用该`nz()`函数和一个已知的非实数值。

```
Select Table1.Column1, Table1.Column2, Table1.Column3, Table1.Column4
from Table1 INNER JOIN
     Table2
     ON Table1.Column1 = Table2.Column1 AND
        Table1.Column2 = Table2.Column2 AND
        Table1.Column3 = Table2.Column3
WHERE nz(Table1.Column4,'~~~') <> nz(Table2.Column4,'~~~') 
```

（在 Oracle 中，使用 nvl()。）

问题不在于加入。在 Table1 和 Table2 中，(Column1, Column2, Column3) 是主键，不能有空值。内连接是绝对合适的——左连接也会为您提供所有没有匹配 Table2 记录的 Table1 记录，这不是您想要的。

# macros - 在 Common Lisp 中，为什么宏 OR 使用 gensym，而不使用 AND？

> ID：12147895
> 
> 赞同：9
> 
> 时间：2012-08-27T18:58:10.067
> 
> 标签：macros, lisp, common-lisp, sbcl

在 Common Lisp (SBCL 1.0.58) 中，为什么宏 OR 使用 gensym，而不使用 AND？

例如，

```
 CL-USER> (macroexpand '(and 1 2 3 4 5))
    (IF 1
        (AND 2 3 4 5)
        NIL)
    T
    CL-USER> (macroexpand '(or 1 2 3 4 5))
    (LET ((#:G967 1))
      (IF #:G967
          #:G967
          (OR 2 3 4 5)))
    T
    CL-USER> 
```

我查看了定义宏的 defboot.lisp，但在评论中没有发现任何相关内容。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T19:11:49.603

这是因为实现的逻辑运算符旨在[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)并返回它们评估的最后一个形式产生的值。

为了实现这一点，`and`不需要 a `gensym`，因为它评估的最后一个表单将产生`NIL`或成为对自身的最终尾调用的结果。

另一方面，`or`必须返回`NIL`它评估的第一个非值，因此它不能依赖尾调用。它需要一个`gensym`来做到这一点，因为没有一个：

```
(IF 1
    1
    (OR 2 3 4 5)) 
```

`1`在展开式中出现两次，在我们的例子中，这意味着产生的表达式`1`被计算*了两次*。[而且你永远不想在你的宏中使用它](http://www.bookshelf.jp/texi/onlisp/onlisp_11.html#SEC78)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T19:13:22.690

假设`a`是假的，但是`b`、`c`和`d`是真的。现在，由于短路，我们有：

```
(or  a b c d) => b
(and a b c d) => nil
(or    b c d) => b
(and   b c d) => d 
```

如您所见，在这种`AND`情况下，最左边的参数的值永远不会用作表单的返回值（除非只有一个参数，在这种情况下扩展是不同的）。`OR`另一方面，在这种情况下，最左边的参数的值是返回值，如果它是真的。因此，`AND`可以在测试其真实性后丢弃该值（因此不需要将其存储在临时变量中），但`OR`不能。

# java - Java 7 更改了 Collections.checkedCollection 的行为以允许空值。API 在混合环境中使用它是否仍然值得？

> ID：12147898
> 
> 赞同：1
> 
> 时间：2012-08-27T18:58:29.383
> 
> 标签：java, compatibility, java-7

首先，这是[Java 7 的 Collections.checked*](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#checkedCollection%28java.util.Collection,%20java.lang.Class%29)添加的行为：

> *由于 null 被认为是任何引用类型的值，因此返回的集合允许在支持集合时插入 null 元素。*

不过，这似乎没有在[兼容性文档](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html)中列出。演示：

```
public class MyAPI {
    private Set<Polygon> polygons = new Collections.checkedSet(new HashSet<Polygon>(), Polygon.class);
    public Set<Polygon> getPolygons() {
        return polygons;
    }
}
public class MyAPITest {
    // This JUnit test passes when using Java 6 or earlier, but fails for Java 7.
    @Test(expected=NullPointerException.class)
    public void testAddNullPolygon() {
        new MyAPI().getPolygons().add(null);
    }
} 
```

如您所见，我正在编写一个 API，它公开了一个`Set`供客户端代码填充的 API。根据我的阅读，这是`Collections.checkedCollection`etc 的用例之一：添加的运行时检查有助于防止插入奇怪的东西。

我已经更改了我的 API 以处理空值，但我担心客户端代码有时会抛出 NPE，有时不会，这取决于最终用户运行的 Java 版本。就是感觉破了。理想情况下，我想保留旧行为，防止在插入时出现空值。

我想我的选择是：

1.  完全放弃运行时检查。

2.  不用担心，相信客户端代码永远不会插入空值。

3.  声明我的 API 只支持 JRE 7。

4.  使用 Guava，它看起来很棒，但它是我的 API 会背负的额外依赖项。

5.  滚动我自己的 Set 包装器，它强制执行 null 和类型检查。

6.  我缺少的其他一些更优雅的解决方案。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:13:14.470

我最终选择的选项是去掉checkedCollection，使暴露的集合不可修改。API 的用户需要调用额外的 add/remove/clear 方法之一来修改集合。

这在一定程度上限制了 API 用户：例如，他们不能使用 addAll 在单个方法调用中复制另一个集合的所有元素。但这是简单性和类型安全性的公平权衡。

```
public class MyAPI {
    private Set<Polygon> polygons = new HashSet<Polygon>();
    private Set<Polygon> polygonsReadonlyView = Collections.unmodifiableSet(polygons);
    public Set<Polygon> getPolygons() {
        return polygonsReadonlyView;
    }
    public boolean addPolygon(Polygon p) {
        if (p == null) {
            throw new IllegalArgumentException("polygon cannot be null");
        }
        return polygons.add(p);
    }
    public boolean removePolygon(Polygon p) {
        return polygons.remove(p);
    }
    public void clearPolygons() {
        polygons.clear();
    }
} 
```

所有这一切的一个收获是永远不要依赖 checkCollection 来防止插入空值。

谷歌搜索可能会建议这一点......但不要这样做！空值检查*不是*checkedCollection 的用例之一。

# sql - 查询未与其他某些特定实体连接的实体

> ID：12147899
> 
> 赞同：1
> 
> 时间：2012-08-27T18:58:37.043
> 
> 标签：sql, linq, nhibernate

我正在尝试实现自定义任务调度程序系统。我有以下（简化的）实体模型：

```
class User
{
    public virtual long UserId { get; set; }
    public virtual string Name { get; set; }
}

class Task
{
    public virtual long TaskId { get; set; }
    public virtual long? UserId { get; set; }
    public virtual string TaskName { get; set; }
    public virtual Guid SchedulerSessionUid { get; set; }
} 
```

目前，对应的 SQL 表是直接的，其字段映射与它们在上面的类中出现的完全一样。

调度程序是一个 C# Windows 控制台应用程序。它将每天运行一次。它应该以以下方式工作（简化）：

1.  为当前会话生成 Guid
2.  尝试选择下一个用户实体，该实体尚未在当前调度程序会话中安排任务（Guid 比较）；如果没有找到这样的用户，请转到步骤 5。
3.  为步骤 2 中选择的用户添加新任务。
4.  转到第 2 步。
5.  退出应用程序

这似乎是一个非常微不足道的问题，但我在执行第二步时遇到了问题。我尝试了各种查询，但有些规则总是阻止我。

以下是我在执行步骤 1 时必须遵守的一些规则：

*   我不允许修改用户类或用户 SQL 表
*   我可能会修改任务类和表，如果它有助于解决问题
*   如果有帮助，我可能会添加一个新表或存储过程
*   我必须以尽可能与 NHibernate 和 LINQ 兼容的方式实现它
*   可能还存在一些与任何用户对象无关的任务（调度程序将忽略这些，但在设计 SQL/LINQ 查询和 NHibernate 映射时我仍然必须牢记这一点）。

这是一些真实世界的示例，它应该如何工作。

```
Users
-----------------
UserId    Name
-----------------
1         First
2         Second

Tasks
--------------------------------------------------------
TaskId    UserId    SchedulerSessionUid 
--------------------------------------------------------
1         NULL      6d8e48d0-4e92-477e-82fa-cd957e7dc201    
2         1         d213cfc8-23d6-49fb-b4e3-9ff3b60af6c4
3         1         9ee042df-88a7-447e-adbd-e7551ed50ae5 
```

1.现在当Scheduler运行时，它会生成一个当前会话id = 76ea57fa-8c89-4c05-9ca2-a450b1f8a032。

1.  现在它应该向 NHibernate LINQ 提供程序发出神奇的 LINQ 查询以获取用户实体
2.  在第一次迭代中，查询应该返回 UserId=1 的用户实体，因为当前会话中还没有该用户的任务
3.  现在调度器创建一个新任务，UserId=1，SchedulerSessionUid=76ea57fa-8c89-4c05-9ca2-a450b1f8a032。

在下一次迭代中，调度程序应该得到一个 UserId=2 的用户。再次插入一个新任务，UserId=2，SchedulerSessionUid=76ea57fa-8c89-4c05-9ca2-a450b1f8a03。在下一次迭代中，调度程序应该没有用户，所以它退出。

**我可以使用什么 LINQ 查询来获取第 2 步的用户？我需要对我的 SQL 架构和实体模型进行哪些更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:11:21.567

如果我**现在**正确地关注您，您需要获取一个（只有一个）用户，该用户没有具有给定会话 ID 的任务。我对么？

```
Users.Where(u => !Tasks.Any(t = > t.UserId == u.UserId && t.SchedulerSessionUid == curSession)).FirstOrDefault() 
```

编辑：

由于您正在为此进行多次旋转，因此您可能会更快地执行以下操作：

```
foreach(var user toDealWith Users.Where(u => !Tasks.Any(t = > t.UserId == u.UserId && t.SchedulerSessionUid == curSession)))
{
  //do stuff
} 
```

而不是每次都访问数据库？

# java - getRuntime().exec()：无法在新进程中从 jar 文件运行类：NoClassDefFoundError

> ID：12147900
> 
> 赞同：0
> 
> 时间：2012-08-27T18:58:39.163
> 
> 标签：java, process, jar, exec, noclassdeffounderror

我花了很多时间试图找出问题所在，但仍然没有答案。所以问题来了：

我的项目中有 2 个课程：

```
ProcessTest
|
|-src
  |
  |-testpackage
  | |
  | |-TestClass
  |
  |-AnotherClass 
```

我从这个项目中创建了一个 jar 文件（一个工件）。我希望我的程序只使用这个 jar 文件。

这是这两个类的代码：

```
public class TestClass {

    public static void main(String[] args) {

        String myPath = System.getProperty("user.dir");
        String stringToExecute = String.format("java -classpath \"%s/test.jar\" AnotherClass 0 10", myPath);

        System.out.println("Trying to execute: "+stringToExecute);

        Process process = null;
        try {
            process = Runtime.getRuntime().exec(stringToExecute);
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }

        BufferedReader errReader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
        StringBuilder text = new StringBuilder();
        String tmp;
        try {
            while ((tmp = errReader.readLine()) != null)
                text.append(tmp + "\n");
        } catch (IOException e) {
            e.printStackTrace();  
        }
        System.out.println(process);
        System.out.println(text);
        System.out.println(process.exitValue());

    }
} 
```

第二类：

```
public class AnotherClass {

    public static void main(String[] args) {
        if (args.length >= 2) {
            int a = Integer.parseInt(args[0]);
            int b = Integer.parseInt(args[1]);
            if (a > b) {
                System.out.println("The first argument should be less or equal than the second argument.");
            } else {
                for (int i=a; i<b; i++) {
                    System.out.println("Number "+i);
                }
            }
        } else {
            System.out.println("Not enough arguments.");
        }
    }

} 
```

有趣的是，当我只是将 stringToExecute 复制/粘贴到终端时 - 一切正常，但是当我尝试在 TestClass 中运行代码时，我得到了：

```
$ java -classpath "/tmp/test.jar" testpackage.TestClass
Trying to execute: java -classpath "/tmp/test.jar" AnotherClass 0 10
java.lang.UNIXProcess@7d67d940
Exception in thread "main" java.lang.NoClassDefFoundError: AnotherClass
Caused by: java.lang.ClassNotFoundException: AnotherClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: AnotherClass.  Program will exit.

1
$ 
```

test.jar 包含：

```
$ jar tvf /tmp/test.jar 
  0 Mon Aug 27 05:19:16 EEST 2012 testpackage/
  2082 Mon Aug 27 05:19:16 EEST 2012 testpackage/TestClass.class
  1087 Mon Aug 27 05:19:16 EEST 2012 AnotherClass.class
$ 
```

谢谢你的帮助！

PS 我正在使用 IntelliJ IDEA（如果重要的话）。例如用于创建工件 (test.jar)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:05:28.407

尝试

```
process = Runtime.getRuntime().exec(new String[]{"java","-cp","/tmp/test.jar", "AnotherClass", "0", "10"}); 
```

使用硬编码的“/tmp”路径并使用`String`数组。

# crystal-reports - 根据第一个参数带来的晶体选择公式

> ID：12147903
> 
> 赞同：0
> 
> 时间：2012-08-27T18:58:52.797
> 
> 标签：crystal-reports, report, formula

我正在尝试找到一个公式，该公式将根据选择的前两个参数为我带来记录，然后是基于所选前两个参数的公式中的其他参数。所以这就是我到目前为止所拥有的。我遇到的问题是，如果没有选择所有公式，那么我就没有什么可以在报告上打印的了。因此，如果我选择 {Sig1} 和 {Sig4}，报告将显示为空白。

```
{table.client} = {?client#} and
{table.signature1} = {?Sig1}
//to then bring only the below selected parameters based from the {client#} and {?Sig1}
parameters. Not all parameters will be selected as well.
({table.signature2} = {?Sig2} or {?Sig2} = "") or
({table.signature3} = {?Sig3} or {?Sig3} = "") or
({table.signature4} = {?Sig4} or {?Sig4} = "") 
```

任何帮助都非常感谢提前。希望我很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:38:33.233

几件事：

1.  您没有在公式的第一部分和第二部分之间使用任何连接词（在您检查 {?Sig1} 之后）。我猜这是一个错字，因为 CR 会给你一个错误。

2.  括号什么都不做，因为 OR 运算符是可交换的。这令人困惑，可能至少是下一个问题的部分原因......

3.  只有注释后的语句之一需要评估为 TRUE，才能使注释下方的整个部分评估为 TRUE。因此，如果您为 {?Sig2} 输入一个值但将 {?Sig3} 留空，您仍然会返回所有记录，因为`{?Sig3}=""`计算结果为 TRUE。要解决此问题，您需要在每行之间使用 AND 运算符。

```
{table.client} = {?client#}
and {table.signature1} = {?Sig1}
and ({table.signature2} = {?Sig2} or {?Sig2} = "") //note that the parens are required here
and ({table.signature3} = {?Sig3} or {?Sig3} = "") // since AND takes precedence
and ({table.signature4} = {?Sig4} or {?Sig4} = "")
```

# wpf - DataGrid SelectedIndex 已更改事件处理程序

> ID：12147909
> 
> 赞同：0
> 
> 时间：2012-08-27T18:59:07.553
> 
> 标签：wpf, datagrid, selectedindex, selectionchanged

我有一个 WPF DataGrid，我正在尝试使用以下代码自动滚动：

```
private void mydatagrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    mydatagrid.ScrollIntoView(mydatagrid.CurrentItem);
} 
```

我遇到的问题是每次 DataGrid 的 SelectedIndex 更改时都不会调用此事件处理程序。是的，当我单击网格或添加或删除一个项目时，它会被调用，但它不会被其他一些操作调用，例如在基础集合中向上或向下移动当前选定的项目，该集合通过以下方式设置：

mydatagrid.ItemsSource = 序列；

（其中 Seq 是从 ObservableCollection<> 派生的类型的对象）。

在我的故障排除尝试中，我将 TextBlock 的文本绑定到 mydatagrid 的 SelectedIndex 属性。无论我对数据网格和/或基础数据源执行什么操作，索引号都会完美更新。

**所以我的问题是**：我如何在 C# 代码中创建一个事件处理程序，该处理程序会在 SelectedIndex 的值的任何和所有更改时被调用，就像我的小文本块绑定示例一样？

我尝试为 DataGrid 查找 propertyChanged 事件，但无济于事。我尝试利用似乎远程相关的所有 DataGrid 事件，但无济于事。我也尝试过使用基础集合的 CollectionChanged 事件，但这似乎与数据网格没有很好的同步（至少在事件发生的那一刻）。

谢谢

# sublimetext2 - sublimetext 中的默认缩进

> ID：12147911
> 
> 赞同：4
> 
> 时间：2012-08-27T18:59:13.283
> 
> 标签：sublimetext2, sublimetext

我使用 Sublime Text 并希望 JavaScript 文件使用三个空格进行缩进。

我将其设置为`Packages/User/Preferences.sublime-settings`：

```
{
    "tab_size": 3,
    "translate_tabs_to_spaces": true
} 
```

但它没有影响，我需要为每个新文件手动更改它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T03:19:48.047

打开 JavaScript 文件后，请执行以下操作：

> 每个语法设置
> 
> 可以基于每个语法指定设置。您可以使用 Preferences/Settings - More/Syntax Specific - User 菜单编辑当前语法的设置。

这将允许您为当前语法设置自定义首选项。有关缩进的更多信息：http: [//www.sublimetext.com/docs/2/indentation.html](http://www.sublimetext.com/docs/2/indentation.html)

# xcode - Xcode 4.4 Lion 在 C++ 中使用 GCC 与 LLVM 的换行行为不一致

> ID：12147915
> 
> 赞同：2
> 
> 时间：2012-08-27T18:59:26.620
> 
> 标签：xcode, standard-library, llvm-clang, libc++

多年来，我一直在使用以下代码来使用 cin 和包括下一个换行符的字符。

```
void skip_rest_of_line()
{
    while (cin.get() != '\n') {}
} 
```

我会在捕获异常并清除 cin 状态后调用它，如下所示：

```
catch (Error& error) {
    cout << error.msg << endl;
    cin.clear();
    skip_rest_of_line();
    } 
```

cin 的下一次读取将剩余的换行符作为空格跳过。

我刚刚在 Lion 下更改为 Xcode 4.4.1。使用 LLVM GCC 4.2 GNU++98、libstdc++（GNU C++ 标准库），它像往常一样工作。

但是使用 Apple LLVM Compiler 4.0、c++11、libc++（支持 C++11 的 LLVM C++ 标准库），识别换行符似乎存在多个问题。与上面相同的代码需要第二次返回键来满足循环！替代方案也会出现同样的问题：

```
cin.ignore(numeric_limits<streamsize>::max(), '\n'); 
```

最后，在 while 循环中使用 getchar 而不是 cin.get() 就像往常一样工作！

这是 libc++ 中的错误吗？还是我错过了 Xcode 或 C++11 中的某些内容？

作为对 Howard Hinnant 的回应，这里有一个小测试用例，它显示了图片中没有任何异常等情况下发生的情况：

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
 for(int count = 0; count < 2; count++) {
    cout << "ready for input: " << endl;
    int i;
    vector<int> v;
    while(cin >> i) {
        v.push_back(i);
        if(i == 3) {
            while(cin.get() != '\n') {}
            break;
            }
        }
    for(auto it = v.begin(); it != v.end();  ++it)
        cout << *it << ' ';
    cout << endl;
}

cout << "done" << endl;
return 0; 
```

}

它读取并保存整数，直到它保存一个 3，然后它通过下一个换行符读取并丢弃，然后重复整个过程，因此您可以看到 3 之后的内容从输入流中丢弃。使用 Xcode 4.4.1 Lion 和 GNU++98 || GNU++11，libstd++，当我输入这两行时，我得到了我所期望的结果，每行都以空格结尾，然后是一个 RETURN 键击：

```
1 2 3 4 5 
6 7 8 3 
```

我进入Xcode的输出窗口：

```
ready for input: 
1 2 3 4 5 
1 2 3 
ready for input: 
6 7 8 3 
6 7 8 3 
done 
```

但是对于 C++11，libc++，在我输入 SECOND RETURN 击键之前，第一行什么都没有发生，在两行输入之后，但仍然发生了正确的丢弃。因此，每行输入后下方的额外空间就是第二次击键的样子。

```
ready for input: 
1 2 3 4 5 

1 2 3 
ready for input: 
6 7 8 3 

6 7 8 3 
done 
```

使用上面的 cin.ignore 调用而不是围绕 cin.get() 的 while 循环会发生完全相同的行为。所以问题是“为什么需要第二次 RETURN 键击？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:47:01.223

我*认为*这是 Lion 上 libc++ 中的一个错误，并且已在 Mountain Lion 上修复。但是没有完整的测试用例是很难确定的。

*更新*

感谢您的测试用例。确认了 Lion 上的错误并修复了 Mountain Lion。

# c# - 如何使用带有 C#/ASP.NET 的 Crystal Reports 生成 pdf 服务器端？

> ID：12147917
> 
> 赞同：1
> 
> 时间：2012-08-27T18:59:38.710
> 
> 标签：c#, file, pdf, crystal-reports, itextsharp

我需要在我正在开发的系统中生成一些报告......

现在我有一个使用 itext sharp 的示例......但是，由于它很简单，我无法创建好看的报告......

所以我被要求切换到 Crystal Reports，但是我不知道从哪里或如何开始......

从我看到的教程来看，用户似乎可以使用 CR 工具创建自己的报告，但我想要的是报告会自动生成用户提供的一些数据......

这是我对 iText sharp 所做的示例

```
public class GeneracionPDF
{
    //I need a list for products and a list for services
    List<Producto> listaProductos = new List<Producto>();
    List<Servicio> listaServicios = new List<Servicio>();

    private Producto objProducto = new Producto();
    private Servicio objServicio = new Servicio();
    private CarritoVenta objCV = new CarritoVenta();

    public void GenerarPdf(List<Articulo> lstArticulos, string strNombreReporte, string strEmpresa, string strSlogan, string strNombreVendedor, string strNombreCliente, string strRuta)
    {
        Organizar(lstArticulos);

        #region Inicio
        Document documento = new Document(PageSize.LETTER, 50, 50, 50, 50);
        PdfWriter writerPdf = PdfWriter.GetInstance(documento, new FileStream(strRuta + strNombreReporte, FileMode.Create));
        documento.Open();
        #endregion

        #region Titulo
        Font font1 = FontFactory.GetFont(FontFactory.HELVETICA_BOLD, 18, Font.BOLD, BaseColor.BLUE);
        Phrase phrEmpresa = new Phrase(strEmpresa + "\n", font1);

        Font font2 = FontFactory.GetFont(FontFactory.HELVETICA_BOLD, 12, Font.ITALIC, BaseColor.DARK_GRAY);
        Phrase phrSlogan = new Phrase(strSlogan, font2);

        Font font16I = FontFactory.GetFont(FontFactory.HELVETICA_BOLD, 16, Font.ITALIC, BaseColor.BLACK);
        Phrase phrDescrip = new Phrase(("Cliente: " + strNombreCliente), font16I);

        PdfContentByte cb = writerPdf.DirectContent;
        documento.Add(phrEmpresa);
        documento.Add(phrSlogan);
        documento.Add(phrDescrip);
        BaseFont bfTimes = BaseFont.CreateFont(BaseFont.HELVETICA_BOLD, BaseFont.CP1252, false);
        Font fontHelvetica16red = new Font(bfTimes, 12, Font.ITALIC, BaseColor.RED);
        #endregion

        #region Seccion Productos
        if (listaProductos.Count > 0)
        {
            documento.Add(new Paragraph("\n Productos \n", fontHelvetica16red));
            PdfPTable tableProductos = null;

            tableProductos = new PdfPTable(6);
            float[] colWidths = { 100, 200, 400, 150, 150, 150 };
            tableProductos.SetWidths(colWidths);
            Font LetraTituloTabla = FontFactory.GetFont(FontFactory.HELVETICA, 10, Font.NORMAL);
            Font LetraCeldaTabla = FontFactory.GetFont(FontFactory.HELVETICA, 8, Font.NORMAL);

            PdfPCell celdaIdProducto = new PdfPCell(new Phrase("ID", LetraTituloTabla));
            PdfPCell celdaNombreProducto = new PdfPCell(new Phrase("Nombre", LetraTituloTabla));
            PdfPCell celdaDescripcionProducto = new PdfPCell(new Phrase("Descripción", LetraTituloTabla));
            PdfPCell celdaPrecioProducto = new PdfPCell(new Phrase("Precio", LetraTituloTabla));
            PdfPCell celdaCantidadProducto = new PdfPCell(new Phrase("Cantidad", LetraTituloTabla));
            PdfPCell celdaTotalProducto = new PdfPCell(new Phrase("Total", LetraTituloTabla));

            celdaIdProducto.HorizontalAlignment = 1;
            celdaNombreProducto.HorizontalAlignment = 1;
            celdaDescripcionProducto.HorizontalAlignment = 1;
            celdaPrecioProducto.HorizontalAlignment = 1;
            celdaCantidadProducto.HorizontalAlignment = 1;
            celdaTotalProducto.HorizontalAlignment = 1;

            tableProductos.AddCell(celdaIdProducto);
            tableProductos.AddCell(celdaNombreProducto);
            tableProductos.AddCell(celdaDescripcionProducto);
            tableProductos.AddCell(celdaPrecioProducto);
            tableProductos.AddCell(celdaCantidadProducto);
            tableProductos.AddCell(celdaTotalProducto);

            foreach (Producto prod in listaProductos)
            {
                celdaIdProducto = new PdfPCell(new Phrase(prod.IdProducto.ToString(), LetraCeldaTabla));
                celdaNombreProducto = new PdfPCell(new Phrase(prod.Nombre, LetraCeldaTabla));
                celdaDescripcionProducto = new PdfPCell(new Phrase(prod.Descripcion, LetraCeldaTabla));
                celdaPrecioProducto = new PdfPCell(new Phrase("$ " + prod.PrecioVenta, LetraCeldaTabla));
                celdaCantidadProducto = new PdfPCell(new Phrase(prod.Cantidad.ToString(), LetraCeldaTabla));
                celdaTotalProducto = new PdfPCell(new Phrase("$ " + prod.TotalCompra, LetraCeldaTabla));

                celdaIdProducto.HorizontalAlignment = 1;
                celdaNombreProducto.HorizontalAlignment = 1;
                celdaDescripcionProducto.HorizontalAlignment = 1;
                celdaPrecioProducto.HorizontalAlignment = 1;
                celdaCantidadProducto.HorizontalAlignment = 1;
                celdaTotalProducto.HorizontalAlignment = 1;

                tableProductos.AddCell(celdaIdProducto);
                tableProductos.AddCell(celdaNombreProducto);
                tableProductos.AddCell(celdaDescripcionProducto);
                tableProductos.AddCell(celdaPrecioProducto);
                tableProductos.AddCell(celdaCantidadProducto);
                tableProductos.AddCell(celdaTotalProducto);
            }

            documento.Add(tableProductos);
        }
        #endregion

        #region Seccion Servicios
        if (listaServicios.Count > 0)
        {
            documento.Add(new Paragraph("\n Servicios \n", fontHelvetica16red));
            PdfPTable tableServicios = null;

            tableServicios = new PdfPTable(6);
            float[] colWidths = { 100, 200, 400, 150, 150, 150 };
            tableServicios.SetWidths(colWidths);
            Font LetraTituloTabla = FontFactory.GetFont(FontFactory.HELVETICA, 10, Font.NORMAL);
            Font LetraCeldaTabla = FontFactory.GetFont(FontFactory.HELVETICA, 8, Font.NORMAL);

            PdfPCell celdaIdServicio = new PdfPCell(new Phrase("ID", LetraTituloTabla));
            PdfPCell celdaNombreServicio = new PdfPCell(new Phrase("Nombre", LetraTituloTabla));
            PdfPCell celdaDescripcionServicio = new PdfPCell(new Phrase("Descripción", LetraTituloTabla));
            PdfPCell celdaPrecioServicio = new PdfPCell(new Phrase("Precio", LetraTituloTabla));
            PdfPCell celdaCantidadServicio = new PdfPCell(new Phrase("Cantidad", LetraTituloTabla));
            PdfPCell celdaTotalServicio = new PdfPCell(new Phrase("Total", LetraTituloTabla));

            celdaIdServicio.HorizontalAlignment = 1;
            celdaNombreServicio.HorizontalAlignment = 1;
            celdaDescripcionServicio.HorizontalAlignment = 1;
            celdaPrecioServicio.HorizontalAlignment = 1;
            celdaCantidadServicio.HorizontalAlignment = 1;
            celdaTotalServicio.HorizontalAlignment = 1;

            tableServicios.AddCell(celdaIdServicio);
            tableServicios.AddCell(celdaNombreServicio);
            tableServicios.AddCell(celdaDescripcionServicio);
            tableServicios.AddCell(celdaPrecioServicio);
            tableServicios.AddCell(celdaCantidadServicio);
            tableServicios.AddCell(celdaTotalServicio);

            foreach (Servicio ser in listaServicios)
            {
                celdaIdServicio = new PdfPCell(new Phrase(ser.IdServicio.ToString(), LetraCeldaTabla));
                celdaNombreServicio = new PdfPCell(new Phrase(ser.Nombre, LetraCeldaTabla));
                celdaDescripcionServicio = new PdfPCell(new Phrase(ser.Descripcion, LetraCeldaTabla));
                celdaPrecioServicio = new PdfPCell(new Phrase("$ " + ser.Precio, LetraCeldaTabla));
                celdaCantidadServicio = new PdfPCell(new Phrase(ser.Cantidad.ToString(), LetraCeldaTabla));
                celdaTotalServicio = new PdfPCell(new Phrase("$ " + ser.Total, LetraCeldaTabla));

                celdaIdServicio.HorizontalAlignment = 1;
                celdaNombreServicio.HorizontalAlignment = 1;
                celdaDescripcionServicio.HorizontalAlignment = 1;
                celdaPrecioServicio.HorizontalAlignment = 1;
                celdaCantidadServicio.HorizontalAlignment = 1;
                celdaTotalServicio.HorizontalAlignment = 1;

                tableServicios.AddCell(celdaIdServicio);
                tableServicios.AddCell(celdaNombreServicio);
                tableServicios.AddCell(celdaDescripcionServicio);
                tableServicios.AddCell(celdaPrecioServicio);
                tableServicios.AddCell(celdaCantidadServicio);
                tableServicios.AddCell(celdaTotalServicio);
            }

            documento.Add(tableServicios);
        }
        #endregion

        #region Finalizacion
        //This method returns a decimal value, so no worries here
        decimal decSubtotal = objCV.Subtotal(lstArticulos);

        documento.Add(new Paragraph("\n Subtotal: $" + decSubtotal, fontHelvetica16red));
        documento.Add(new Paragraph("IVA: $" + (decSubtotal * 0.11m), fontHelvetica16red));
        documento.Add(new Paragraph("Total: $" + (decSubtotal * 1.11m), fontHelvetica16red));
        documento.Add(new Paragraph("\nNota: Si no requiere factura, omita el IVA", fontHelvetica16red));
        documento.Close();
        #endregion
    }

    //Method to separate products and services in different lists, since lstArticulos contains both products and services
    private void Organizar(List<Articulo> lstArticulos)
    {
        listaProductos.Clear();
        listaServicios.Clear();

        foreach (Articulo art in lstArticulos)
        {
            if (art.Tipo == "Producto")
            {
                objProducto = new Producto(int.Parse(art.IdArticulo.Substring(8)), art.Nombre, art.Descripcion, art.Imagen, art.Precio, art.Cantidad);
                listaProductos.Add(objProducto);
            }

            else if (art.Tipo == "Servicio")
            {
                objServicio = new Servicio(int.Parse(art.IdArticulo.Substring(8)), art.Nombre, art.Descripcion, art.Imagen, art.Precio, art.Cantidad);
                listaServicios.Add(objServicio);
            }
        }
    }
} 
```

因此，就像我在前面的示例中那样在服务器端创建 pdf 文件一样，我也想做同样的事情，但使用 Crystal Reports ......

有没有办法我可以做类似的事情？有教程吗？？哦，顺便说一句...如何在 pdf 上插入图像？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:47:22.097

这里有一个教程，以便动态创建您的水晶报表列

```
http://csharp.net-informations.com/crystal-reports/csharp-dynamic-crystal-reports.htm 
```

但它会更好：

1.  如果您使用水晶报表制作您的用户将填写的模板，因为只有使用水晶报表向导才能进行漂亮的渲染（并且不要让制作报告过于自由）
2.  首选使用 SSRS (Sql server Reporting Service) 更好的性能和报表管理（你默认有一个 web 服务器，你可以使用 webservice 来管理模板报表）

# reporting-services - 如何根据特定事件停止从报表服务器订阅电子邮件？

> ID：12147921
> 
> 赞同：0
> 
> 时间：2012-08-27T18:59:45.700
> 
> 标签：reporting-services, data-warehouse, reportserver

我想根据某个事件停止从报表服务器订阅。

我已经尝试更新`EndDate`订阅表的列以禁用订阅，但是`EndDate`当我从共享点看到订阅时，更新并没有反映出来。当我`EndDate`从 SharePoint 更新时，它会反映在报表服务器的订阅表中。

有什么办法可以做到这一点？如何根据特定事件以编程方式停止报表服务器电子邮件订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:56:16.007

您可以通过调用 SetSubscriptionProperties 来更新 EndDate（请参阅[http://msdn.microsoft.com/en-us/library/reportservice2006.reportingservice2006.setsubscriptionproperties.aspx](http://msdn.microsoft.com/en-us/library/reportservice2006.reportingservice2006.setsubscriptionproperties.aspx)）

# oracle - 我可以停止一个实例的侦听器而不影响同一服务器上的其他实例吗

> ID：12147926
> 
> 赞同：0
> 
> 时间：2012-08-27T19:00:13.230
> 
> 标签：oracle, listener

我在一台运行 11GR2 的 Oracle 服务器上有很多实例。我必须解决一个实例上的问题。根据 Oracle 支持，我需要关闭数据库及其侦听器。

```
lsnrctl stop
lsnrctl start 
```

我也可以`svcctl`用来启动和停止服务器上的监听器：

```
srvctl stop listener -n node_name 
```

我注意到 lsnrctl 和 srvctl 都是基于服务器/主机/节点级别的。我可以停止一个实例的侦听器而不影响同一服务器上的其他实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:48:03.723

I would not stop the listener in order to bounce one of the instances and adjust a parameter. The instance will automatically register with the listener when it comes back up.

On the other hand, if we are talking about an inter-process issue you might have to. More details needed. Remember, already established sessions to your instances will not be affected by a listener outage.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T20:10:31.000

如果你做一个

> lsnrctl 状态

命令，您将看到通过关闭侦听器会影响的所有实例。通常，您将在服务器上仅运行一个侦听器，因此您将关闭对其服务的所有数据库的网络访问。

# objective-c - didSelectRowAtIndexPath 真的不起作用

> ID：12147927
> 
> 赞同：0
> 
> 时间：2012-08-27T19:00:19.613
> 
> 标签：objective-c, uitableview, didselectrowatindexpath

didSelectRowAtIndexPath 不起作用。
我是否配置了 2 个代表。一切都是链接的（tableview，tableviewcell）。
已经删了，又做了。
我在这里搜索了所有内容，但没有任何效果。
我认为这是最好的[链接](https://stackoverflow.com/questions/255927/didselectrowatindexpath-not-being-called)之一，但仍然无济于事。

我最后的希望是，我正在为模态打开我的 ViewController，其中有这个 tableview。但这将是非常错误的问题。

除此之外，我需要一些帮助

索莫代码.H

```
@interface simulator : UIViewController <UITableViewDelegate, UITableViewDataSource, UIScrollViewDelegate>
{
   NSArray                                          *array_products;
}
@property (nonatomic, strong) NSDictionary          *plist_products;
@property (nonatomic, strong) IBOutlet UITableView  *table_menu_left;
@property (nonatomic, strong) NSString              *file_plist;

@end 
```

一些代码.M

```
#import "cel_products.h"

- (void)viewDidLoad
{
   NSString *path_root      = [[NSBundle mainBundle] bundlePath];
   NSString *full_path      = [path_root stringByAppendingPathComponent:self.file_plist];
   self.plist_products      = [[NSDictionary alloc] initWithContentsOfFile:full_path];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"id_cell_products";
   UITableViewCell *cell           = [self.table_menu_left dequeueReusableCellWithIdentifier:CellIdentifier];

   array_products                  = [self.plist_produtcs allKeys];
   if (cell == nil)
   {
       NSArray *topLevelObjects    = [[NSBundle mainBundle] loadNibNamed:@"cel_products" owner:self options:nil];

       for(id currentObject in topLevelObjects)
       {
           if([currentObject isKindOfClass:[cel_products class]])
           {
               cell = (cel_products *)currentObject;
               break;
           }
       }
   }
   cell.textLabel.text       = [array_products objectAtIndex:indexPath.row];
   return cell;
}

// numberofrowsinsection - OK
// numberofsectionintableviw - OK

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSLog(@"Hein?????");
   // Nothing..........
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:22:09.353

我谦恭地向所有人道歉！我无意中单击了 Attributes Inspector> Selection: **NO SELECTION**

所以我在代码中找不到任何东西。

再次，我向所有人道歉，但如果有人遇到这个问题，这是需要验证的另一个步骤。" 更改为 Attributes Inspector> Selection: **SINGLE SELECTION or MULTIPLE SELECTION** (由你决定)

感谢大家的回答和帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:13:35.463

你设置了休息时间`didSelectRowAtIndexPath`吗？试试看它是否在那里成功中断。

扩展[rokjark](https://stackoverflow.com/users/653513/rokjarc)的答案，您必须手动将委托和数据源设置为相关文件。

您的头文件`simulator.h`只是将其声明为**某些**UITableView**的**委托/数据源。

 **您仍然需要指向`table_menu_left`用作**委托**`simulator.h`文件来处理它的所有回调。

 **放：

```
self.table_menu_left.delegate = self;
self.table_menu_left.datasource = self; 
```

并再次设置中断`didSelectRowAtIndexPath`，看看它是否被调用。****

# git - 暂存单行时出现“致命：第 XX 行的损坏补丁”

> ID：12147930
> 
> 赞同：42
> 
> 时间：2012-08-27T19:00:34.060
> 
> 标签：git, git-gui

当我尝试使用 git gui 暂存单行或多行时出现以下错误（右键单击 -> 暂存行提交）。这不是我第一次发生这种情况，而且我发现其他人面临它。但是我找不到如何解决它。

有没有人遇到过这个问题？有什么我可以做的吗（暂存所有文件不是真正的解决方案）

**更新：** 这是一个文件，当我尝试暂存已删除的行时，它给了我以下错误。

```
@@ -1,7 +1,6 @@
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
    android:src="@drawable/texture"
    android:tileMode="repeat"
-   android:dither="true"
    >
</bitmap>
\ No newline at end of file 
```

这是错误消息：

```
fatal: corrupt patch at line 14 
```

奇怪的是下面的罚款甚至没有14行！？注意用新行结束文件并没有解决问题

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-22T22:09:43.637

显然 Git GUI[*要求*文件在暂存单个行时以换行符结尾](http://git.661346.n2.nabble.com/Bug-in-Git-Gui-Creates-corrupt-patch-td2384251.html)。

我很确定至少在某个时间点，即使文件末尾没有换行符，也可以暂存单个行，但显然这不再可能了。我自己也遇到了这个问题，文件末尾的换行符修复了它，删除它们会导致它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-01T12:10:18.457

实际上，这经常发生在您编辑“-”行时。
**当您删除“-”并忘记添加“”（空格）而不是它时**

或者，错误地，您添加了两个空格并使用“制表符”作为标识

打开你的补丁并检查你想要保持不变的所有行都以''开始（一个空格）

我看到有些人将`--ignore-space-change` `--ignore-whitespace` `--whitespace=fix`其用作解决方法，但这是您不能混入的另一件事。

打开你的补丁并检查你想要保持不变的所有行都以''（空格）开头

**UPD**

您的编辑器也可能有选项：“删除末尾空格”因此，当您在编辑器中保存补丁时：

```
-Line with space at end <--- NOTICE: Here one space at the end
+Line with no space at end<--- Here no space 
```

您的编辑器删除尾随空格和补丁变成这样：

```
-Line with space at end<--- Here no space. Patch will FAIL!!!
+Line with no space at end<--- Here no space also 
```

此补丁将失败，因为原始文件没有行：

```
-Line with space at end<--- 
```

它有：

```
-Line with space at end <--- 
```

**UPD2**

因此，如果在下一行的补丁中

```
android:tileMode="repeat" 
```

你的编辑删除了训练空间。补丁将失败

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T14:06:19.457

当您正在使用的块太大（即修改了太多连续行）时，Git GUI 无法从索引中添加/删除行。

我的解决方法：如果更改不是“粉红色的墙”（如果块中间有一些未修改的行），请转到编辑>选项并减少差异上下文中的行数。如果这不起作用，你就完蛋了；使用其他工具（例如命令行）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T22:44:12.267

我在登台大块时遇到了这个错误。

这里提到的“空白”提醒我，在我的 git diff 选项中，我有“-w”，它在比较时会跳过空白。

我删除了那个标志（使用 git-gui 的“选项...”），并且能够在没有错误的情况下上演大块头。然后我把它加回来（因为我通常不想在检查发生了什么变化时看到空白差异）。

不确定这会对您有所帮助，但尝试并轻松撤消它是无害的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T13:05:51.513

受 kyl191 的回答启发，我想出了一个简单的解决方案来解决这个问题：

1.  在文件末尾添加换行符

2.  隐藏所有更改

    ```
    git stash 
    ```

3.  再次将换行符添加到文件末尾，因此您的当前文件和隐藏版本中都有换行符

4.  阶段相应的大块（只包含你的换行符）

    ```
    git stage <your file> 
    ```

5.  从存储中弹出您的更改

    ```
    git stash pop 
    ```

现在您应该能够通过 gui 暂存单行而不会出现此错误。这是有效的，因为在您只上演包含换行符的部分之后，从 stash 恢复的版本的差异已经看到一个以换行符结尾的文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-29T09:48:55.660

我遇到了这个问题，因为我尝试在 emacs 中的补丁中添加换行符，并且当我保存它时它会自动在末尾再次删除换行符。

如果您使用 emacs 在补丁末尾添加换行符，它也可能会再次将其删除。我打开了另一个文本编辑器来添加我的换行符，它起作用了。

# java - java中的通用数组创建

> ID：12147931
> 
> 赞同：1
> 
> 时间：2012-08-27T19:00:35.603
> 
> 标签：java, generics

> **可能重复：**
> [在 Java 中创建泛型类型的实例？](https://stackoverflow.com/questions/75175/create-instance-of-generic-type-in-java)
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

我正在尝试创建一个创建泛型类型的类。这是我的类文件。

```
public class TestClass<T> implements AbstractDataType<T>{

    T[] contents;

    public TestClass(int length) {
        this.contents = (T[])new Object[length];
    }
} 
```

但是内容只是具有从`Object class`. 如何为内容创建一个抽象数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T19:12:37.997

至于初始化`contents`，我认为你所拥有的是你能做的最好的。如果有办法，`ArrayList`可能会这样做（第 132 行：http: [//www.docjar.com/html/api/java/util/ArrayList.java.html](http://www.docjar.com/html/api/java/util/ArrayList.java.html)）

但是当你说“内容只有从 Object 类继承的方法”时，我假设你的意思是你只能访问方法`toString`，`equals`当你在代码中使用 T 实例时，我猜这是首要问题。那是因为你没有告诉编译器任何关于`T`实例是什么的事情。如果要从特定接口或类型访问方法，则需要在`T`.

这是一个例子：

```
interface Foo {
  int getSomething();
  void setSomethingElse(String somethingElse);
}

public class TestClass<T extends Foo> implements AbstractDataType<T> {
  T[] contents;

  public TestClass(int length) {
    this.contents = (T[])new Object[length];
  }

  public void doSomethingInteresting(int index, String str) {
    T obj = contents[index];
    System.out.println(obj.getSomething());
    obj.setSomethingElse(str);
  }
} 
```

因此，现在您可以访问继承自`Object`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:09:18.737

您不能在 Java 中创建泛型数组。如[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)中所述，上述规则声明“上述规则暗示数组创建表达式中的元素类型不能是参数化类型，除了无界通配符。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:09:46.873

我相信在任何访问内容的方法中，您都需要将它们转换为 type `T`。这样做的主要原因是，作为一个 Object 数组，Java 将内容视为 Objects 以适应它们。所以虽然`contents`可能是一个 数组`T`，但它仍然只是一个 type 数组`Object`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T19:16:18.320

你是怎么想`ArrayList.toArray`和`Arrays.copyOf`怎么做的？

见[`Array.newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%29)。

```
public TestClass(Class<T> type, int length) {
    this.contents = Array.newInstance(type, length);
} 
```

# powershell - 有没有办法让 SCOM 任务中的开始时间比计划时间更近？

> ID：12147932
> 
> 赞同：0
> 
> 时间：2012-08-27T19:00:42.377
> 
> 标签：powershell, sccm, sccm-2007

我意识到，当我从 Powershell 脚本按需执行 SCOM 任务时，任务状态视图中有 2 列称为`Schedule Time`和`Start Time`。这两个字段的间隔似乎在 15 秒左右。我想知道是否有办法最大限度地减少这个时间，以便在我按需执行 SCOM 任务时可以缩短响应时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:36:20.983

这通常不是用户可以控制的。“ScheduledTime”与 SDK 收到执行任务的请求的时间相关。“StartTime”表示代理健康服务实际开始在本地执行任务工作流的时间。

在这些时期之间，事情发展得尽可能快。请求需要传播到数据库，并且需要通知服务器健康服务正在触发任务。然后，服务器需要确定任务消息的正确路由，然后健康服务需要实际发送和接收消息。最后，它到达任务将执行的实际代理。所有这些消息都通过与其他监控数据相同的队列。

该序列可能非常快（当针对本地服务器运行任务时），或者相当慢（在大型管理组中，或者当有大量负载时，或者机器/网络很慢时）。除了升级你的硬件，你真的不能做任何事情来让这个过程运行得更快。

# php - 存储多个值

> ID：12147935
> 
> 赞同：2
> 
> 时间：2012-08-27T19:00:46.167
> 
> 标签：php, mysql

我在我的网站上有一张供用户使用的表格。该表由列组成

```
user_id, fname, lname, email, password, interest1, interest2, interest3, interest4,   
interest5 
```

现在，像这样单独存储兴趣变得不那么实际了。有什么更好的方法来做到这一点。一种可以轻松编辑/访问用户兴趣的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:02:31.080

[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)可以满足您的需求。

您将创建一个`interests`具有如下结构的新表：

```
interest      user_id
"skiing"          1
"programming"     4
 etc... 
```

然后，您可以使用如下查询获取给定用户的所有兴趣：

```
SELECT `interest` FROM `interests` WHERE `user_id` = :my_user_id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:04:24.010

您在用户和兴趣之间存在多对多的关系。创建一个 seaparte 兴趣表，并引入一个联结表来将用户与他们的兴趣联系起来。

![在此处输入图像描述](../Images/c64140d553180c20ddb8f14d23b3e9e6.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T19:01:56.557

创建一个`interests`以列`user_id`和命名的新表`interest`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T19:03:38.680

[对它们进行序列化](http://php.net/manual/en/function.serialize.php)。这样，您可以将零存储到他们想要的任意数量的兴趣，并且当您对它们进行反[序列化](http://www.php.net/manual/en/function.unserialize.php)时，您可以维护与创建它们相同的数据结构（即数组或对象）。

# c# - 确定任何后代元素是否具有焦点的属性？

> ID：12147939
> 
> 赞同：2
> 
> 时间：2012-08-27T19:01:07.243
> 
> 标签：c#, .net, wpf, binding, dependency-properties

假设我有一个`StackPanel`包含多个 UI 元素的元素（在我的情况下是 a ）（在我的情况下，`Grid`包含在 etc.etc. 中的各种 s 中包含的大量文本框`StackPanel`）。

我想知道这些文本框是否有焦点。（我想将此属性绑定到 View-Model 属性。）是否有此属性？如果不是，那么绑定到此类信息的最简单方法是什么，而不必先提取所有文本框？（它们是由模板生成的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:03:37.210

您可以使用[IsKeyboardFocusWithin](http://msdn.microsoft.com/en-us/library/system.windows.iinputelement.iskeyboardfocuswithin.aspx)。你想对它做什么样的绑定？如果您想要更改堆栈面板的背景（如果其中的文本框具有焦点），那么您应该能够将其用作样式触发器。

# sql-server - 如何从 Microsoft 获得技术支持

> ID：12147940
> 
> 赞同：-1
> 
> 时间：2012-08-27T19:01:24.840
> 
> 标签：sql-server, oracle

我是一名 Oracle DBA，并且是 SQL Server DBA 的新手。对于 Oracle，他们有一个名为 My Oracle Support 的网站，您可以登录以打开问题、问题和任何您需要 Oracle 支持的票证。它是许可费范围的一部分。所以我想知道微软是否有类似的技术支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:26:05.107

您可以通过以下方式联系 Microsoft 技术支持：http: [//support.microsoft.com/](http://support.microsoft.com/) 和 Microsoft Phone 支持：http: [//support.microsoft.com/kb/319726](http://support.microsoft.com/kb/319726)

# python - 需要 Python TKinter 线程帮助

> ID：12147945
> 
> 赞同：1
> 
> 时间：2012-08-27T19:01:38.743
> 
> 标签：python, multithreading, user-interface, tkinter

我正在尝试创建一个与 RS232 串行对象通信的 GUI。我将针对我面临的问题提出一个类似的场景。我想创建一个带有 2 个按钮的框架，开始和停止。开始按钮调用 'foo' 函数：

```
status = True

def foo():
   n = 0
   while(getStatus()):
       print n
       n += 1
       sleep(0) 
```

这个 foo 函数一直运行，直到我按下停止。

```
def getStatus():
   return status

def stop():
   status = False 
```

我知道 Tkinter 是单线程的，一旦我按下“开始”，GUI 就会冻结。我知道这可以通过`after`函数实现，但我非常想使用**threading**。这可能与线程？如果可以，请您提供示例代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:50:00.520

这是一些（尚不完美）代码：

什么丢失/损坏，但你没有要求这个，我添加了链接：

*   它不使用锁 => 调用 set 可能会停止，因为它们可以同时发生。[阅读文档](http://docs.python.org/library/threading.html#lock-objects)（这很容易）
*   它从另一个线程更新 gui。见[1](http://effbot.org/zone/tkinter-threads.htm) [2](http://code.activestate.com/recipes/82965/)
*   可能更多（不是线程专家）

也为了停止线程看[这里](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)

```
import time
import tkinter
from tkinter import ttk
import threading  

#gui
root = tkinter.Tk()
root.title("Threading demo")

status = tkinter.StringVar()
elapsed = tkinter.StringVar()
error = tkinter.StringVar()

#thread
class timer(threading.Thread):
    def __init__(self):
        super().__init__()
        self.stopped = False
        #your code here, don't need init if you have no code

    def run(self):
        status.set('running')

        while not self.isStopped():
            time.sleep(1)

            try:
                oldtime = int(elapsed.get())
            except ValueError:
                oldtime = 0

            elapsed.set(oldtime+1)

        status.set('stopped')
        time.sleep(2)

    def isStopped(self):
        return self.stopped

    def stop(self):
        self.stopped = True

#starts/stops thread (manages it)
class threadedOp(object):
    def __init__(self):
        self.thread = None

    def run(self):
        if self.thread == None:
            self.thread = timer()
            status.set('starting')
            self.thread.start()
        else:
            error.set('Thread already running')

    def stop(self):
        if self.thread != None:
            status.set('stopping')
            self.thread.stop()
            self.thread.join()
            error.set('Join complete')
            self.thread = None
        else:
            error.set('No thread to stop')

op = threadedOp()

#remaining gui
mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(tkinter.N, tkinter.W, tkinter.E, tkinter.S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0, weight=1)

ttk.Label(mainframe, textvariable=elapsed).grid(column=1, row=1, sticky=(tkinter.W, tkinter.E))
ttk.Label(mainframe, textvariable=status).grid(column=2, row=1, sticky=(tkinter.W, tkinter.E))
ttk.Label(mainframe, textvariable=error).grid(column=1, row=3, sticky=(tkinter.W, tkinter.E))
ttk.Button(mainframe, text="Start", command=op.run).grid(column=1, row=2, sticky=tkinter.W)
ttk.Button(mainframe, text="Stop", command=op.stop).grid(column=2, row=2, sticky=tkinter.W)

root.mainloop() 
```

# eclipse - 如何为通过eclipse新签出subversion的本地文件设置默认权限

> ID：12147950
> 
> 赞同：1
> 
> 时间：2012-08-27T19:01:56.460
> 
> 标签：eclipse, svn, permissions

我正在使用 Eclipse 4.2.0 (Juno) 和 Subversive。当我签出文件或从存储库恢复到最新文件时，本地文件默认为 600。我希望它默认为 644。我查看了 Eclipse->Preferences->Team->SVN，但没有发现任何相关的内容。我的 google-fu 似乎也关闭了。

我真的不想每次签出文件时都必须记住 chmod 文件。我可以屏蔽目录，但我不希望 Eclipse 和 Subversion 的点文件受到影响。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:52:04.907

检查 shell 中的 umask 设置。应该是 0022。

# ms-word - MS Word 中的字段变量

> ID：12147951
> 
> 赞同：1
> 
> 时间：2012-08-27T19:01:59.597
> 
> 标签：ms-word, automation

我们在 Word 中有一个模板，我们可以在其中查找和替换变量。例如：客户名称。

有没有办法用输入的内容自动填充变量。我通过邮件合并和模板/表单字段进行了探索。但是没有得到一个新手友好的材料。

请让我知道是否有相同的演练。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T21:18:36.567

我认为您可以在某些领域做到这一点。我最近不得不通过创建局部变量来克服 Word 邮件合并功能的一些限制。

您可以通过执行以下操作在 word 中创建局部变量

`{ SET localClientName { MERGEFIELD ClientName }}`

上面创建了一个名为 localClientName 的局部变量，可以通过以下方式在文档中的任何位置引用它：

`{ localClientName }`

您只需要确保使用匹配的引号。这些是通过按“ctr + F9”创建的。如果您使用普通的花括号，它将不起作用。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T13:30:30.690

您可以像这样设置变量：

```
{ SET someTextToRepeat "Here's some plain text" }
{ SET paymentDetails "Payment Details: { MERGEFIELD Invoice.Total }" } 
```

您可以像这样参考 paymentDetails

```
{ paymentDetails } 
```

请记住不要只键入 {}，而是按 Ctrl-F9 来创建它们。

# jqgrid - jqgrid可编辑x数字格式与网格上的格式不一致

> ID：12147952
> 
> 赞同：-1
> 
> 时间：2012-08-27T19:02:03.513
> 
> 标签：jqgrid

我已经建立了一个网格，代码如下：

```
colModel: [
            { name: 'price',
              label: 'price',
              index: 'price',
              jsonmap: 'price',
              formatter: 'number', 
              formatoptions: {decimalSeparator:",", thousandsSeparator: ".", decimalPlaces: 2, defaultValue: '0,00'},
              editable: true
            }
          ] 
```

字段的格式在网格上是正确的，例如：10,32，但为编辑字段而创建的表单用 10.32 而不是 10,32 填充一个。

有人知道为什么会这样吗？我是否还需要将属性用作edittype 和editoptions（这个使用formmater 和formatoptions）？如果是，我需要如何设置这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:07:45.600

我已经解决了这个问题，使用该函数`afterShowForm`来处理从网格生成的表单上的字段格式。

事实上，我期待它`jQGrid`可以自动执行此操作，即使用提供给列的配置来应用于生成的字段，或者我是否可以将配置应用于`JSON`消息，例如：

```
editoptons: { formatter = "number", formatteroptions = { .... } ... 
```

无论如何，它现在正在工作。

# jquery - 如何更改列表分隔符上的图标而不刷新下面的数据

> ID：12147954
> 
> 赞同：0
> 
> 时间：2012-08-27T19:02:20.737
> 
> 标签：jquery, jquery-mobile

我正在使我的列表分隔符可折叠。最初列表将被展开，但用户可以通过单击向上箭头图标来折叠它，并且图标也应更改为向下箭头。我无法在此处更改图标。这是我的代码

```
<ul data-role="listview" class="selectHeader" id="bank_name" data-theme="d" data-divider- theme="d" data-filter="false" data-inset="false"  style="padding:0px;margin-top: 0px;margin-left: -5px">
   <li  data-role="list-divider" id="accountgrp">Account Groups

                 <div data-type="horizontal"  style="margin:-11px 30px -10px 0;display: inline;float: left;">
                  <a  id="grp-check-all" data-role="button" data-theme="a" data-icon="check-all" data-inline="true" data-iconpos="notext">Check All</a>
                </div>
                 <div data-type="horizontal"  style="margin:-11px 10px -10px 0;display: inline;float: right;">

                  <a  id="grp-clear-all" data-role="button" data-theme="a" data-icon="clear-all" data-inline="true" data-iconpos="notext">Clear</a></div>

                 <div data-type="horizontal"  class="openclose" >

                  <a  id="updown" data-role="button" data-theme="a" data-icon='arrow-u' data-inline="true" data-iconpos="notext">updown</a></div>

                  </li>

          <li  class="filterselect accountgrp ui-icon-arrow-u" data-icon="false"  id="group1"  ><a href="#"  data-panel="main" data-transition="slide"> Group1 </a></li>
            <li class="filterselect accountgrp ui-icon-arrow-u" data-icon="false"  id="group2"><a href="#"  data-panel="main" data-transition="slide">Group2</a></li>
            <li class="filterselect accountgrp ui-icon-arrow-u" data-icon="false" ><a href="#bankdetail1" data-panel="main" data-transition="flip">Group3</a></li>

             <li data-role="list-divider">Bank Code
                  <div data-type="horizontal"  style="margin:-11px 30px -10px 0;display: inline;float: left;">
                  <a  id="grp-check-all" data-role="button" data-theme="a" data-icon="check-all" data-inline="true" data-iconpos="notext">Check All</a>
                </div>
                 <div data-type="horizontal"  style="margin:-11px 30px -10px 0;display: inline;float: right;">

                  <a  id="grp-clear-all" data-role="button" data-theme="a" data-icon="clear-all" data-inline="true" data-iconpos="notext">Clear</a></div>

             </li>
             </ul> 
```

CSS..

```
 .openclose{
       margin:-28px 25px -10px 0px;
       display: inline;float: right;    
     } 
```

并且 jquery 仅用于第一个列表分隔符

```
$('#updown').live ("click", function (event)
{ 

var $span = $("ul.selectHeader").children(".accountgrp");

  if ($span.hasClass("ui-icon-arrow-u"))
{
    $(".accountgrp").hide();
    $span.removeClass ("ui-icon-arrow-u").addClass ("ui-icon-arrow-d");
    //$('#bank_name').listview('refresh');
}
else
{
    if ($span.hasClass ("ui-icon-arrow-d")) 
    {

        $(".accountgrp").show();
        $span.removeClass ("ui-icon-arrow-d").addClass ("ui-icon-arrow-u");
        //$('#bank_name').listview('refresh');

    }

}
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:47:05.610

jQuery Mobile 在小部件初始化时会更改它们的 HTML 结构。Long-Story-Short，您需要选择`.ui-icon`原始小部件的后代元素才能更改图标。

长篇大论：

这是一个未初始化的小部件示例：

```
 <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f">
            <li data-role="list-divider">Overview</li>
            <li><a href="docs/about/intro.html">Intro to jQuery Mobile</a></li>
            <li><a href="docs/about/getting-started.html">Quick start guide</a></li>
            <li><a href="docs/about/features.html">Features</a></li>
            <li><a href="docs/about/accessibility.html">Accessibility</a></li>
            <li><a href="docs/about/platforms.html">Supported platforms</a></li>
        </ul> 
```

这是初始化的同一个小部件：

```
 <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <li data-role="list-divider" role="heading" class="ui-li ui-li-divider ui-bar-f ui-corner-top">Overview</li>
            <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-up-c ui-btn-icon-right ui-li-has-arrow ui-li">
                <div class="ui-btn-inner ui-li">
                    <div class="ui-btn-text">
                        <a href="docs/about/intro.html" class="ui-link-inherit">Intro to jQuery Mobile</a>
                    </div>
                    <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
                </div>
            </li>
            ...
        </ul> 
```

`.ui-icon`请注意，在初始化的 HTML 中，在元素上指定了图标类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:56:26.570

您可以尝试修改您的代码如下：

```
$('#updown').live ("click", function (event)
{ 
    var $span = $("ul.selectHeader").children(".accountgrp");
    if ($span.hasClass("ui-icon-arrow-u"))
    {
        $(".accountgrp").hide();
        $('.ui-icon-arrow-u').removeClass ("ui-icon-arrow-u").addClass ("ui-icon-arrow-d");
        //$('#bank_name').listview('refresh');
    }
    else
    {
        if ($span.hasClass ("ui-icon-arrow-d")) 
        {
            $(".accountgrp").show();
            $('.ui-icon-arrow-d').removeClass ("ui-icon-arrow-d").addClass ("ui-icon-arrow-u");
            //$('#bank_name').listview('refresh');
        }
    }
}); 
```

# operating-system - Pintos 中的系统调用实现

> ID：12147956
> 
> 赞同：0
> 
> 时间：2012-08-27T19:02:29.707
> 
> 标签：operating-system, system, system-calls, sys, pintos

我想在 Pintos 中实现已经定义的系统调用（在 pintos/src/lib/user/syscall.c 中定义的 halt()、create()...etc ）。pintos/src/userprog/syscall.c 中的当前系统调用处理程序不执行任何操作。如何创建进行系统调用的进程。此外，我需要自己添加一些系统调用。我该如何继续。但首先我需要实现现有的系统调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:18:15.867

pintos 中的默认实现终止调用进程。
转到此[链接](https://web.stanford.edu/class/cs140/projects/pintos/pintos_3.html)。有关于在何处修改代码以实现系统调用的说明。

“src/examples”目录包含一些示例用户程序。
此目录中的“Makefile”编译提供的示例，您也可以编辑它编译您自己的程序。
该程序/进程在运行时将依次进行系统调用。
使用 gdb 跟踪一个这样的程序的执行，一个简单的 printf 语句最终将调用写入系统调用到 STDOUT 文件。
给出的链接还包含有关如何在 gdb 上运行 pintos 的指示，我猜您使用的是 bochs 或 qemu。无论如何，只需使用在 pintos 上运行的简单 hello world 程序运行 gdb 一次。
这将使您了解如何进行系统调用。

```
static void
syscall_handler (struct intr_frame *f)// UNUSED) 
{
  int *p=f->esp;
 switch(*p)
case *p=SYS_CREATE  // NUMBER # DEFINED

      const char *name=*(p+1); //extract the filename 
      if(name==NULL||*name==NULL)
            exit(-1);

      off_t size=(int32_t)*(p+2);//extract file size

      f->eax=filesys_create(name,size,_FILE); //call filesys_create
      //eax will have the return value
} 
```

这是 sys_create 的伪代码。所有与文件系统相关的系统调用都非常简单，Filesys realted 系统调用如 open read write close 需要您将文件转换为相应的 fd（文件描述符）。您需要为每个进程添加一个文件表来跟踪这一点，这可以是预处理数据或全局数据。（UR 选择），

```
case (*p==SYS_WRITE)
    {
    //  printf("wite syscall\n");
      char *buffer=*(p+2); 
     unsigned size=*(p+3);
     int fd=*(p+1);
      // getiing the fd of specified file       
     struct file *fil= thread_current()->fdtable[fd];/ my per thread fdtable
     if(fd==1)  goto here;

     if(is_directory(fil->inode)){
      exit(-1);
      goto done;
     }
 here:
  if(buffer>=PHYS_BASE)exit(-1);
  if(fd<0||fd>=128){exit(-1);}
  if(fd==0){exit(-1);} // writing to STDIN
  if(fd==1)     //writing to STDOUT
  {
    int a=(int)size;
    while(a>=100)
    {
      putbuf(buffer,100);
      buffer=buffer+100;
      a-=100;
    }
    putbuf(buffer,a);
    f->eax=(int)size;
  }
  else 
      if(thread_current()->fdtable[fd]==NULL)
        {f->eax=-1;}
     else
     {
        f->eax=file_write(thread_current()->fdtable[fd],buffer,(off_t)size);
     }
done: ;

  }//printf("write");}                  /* Write to a file. */ 
```

打开 - 将新条目添加到 fdtable 并返回您给文件的 fd 编号，
关闭 - 从 fd 表中删除该条目
读取 - 类似于写入。

process_create ,wait 实现起来并不简单......

干杯:)

# javascript - 改进我的 Draggable DIV

> ID：12147967
> 
> 赞同：1
> 
> 时间：2012-08-27T19:03:16.603
> 
> 标签：javascript, css, html, draggable

谁能帮我改进这个可拖动的 DIV？在第一次拖放中，一切运行完美。但是当我第二次尝试拖动时，位置错误。

**CSS**

```
#coordenadas {
    position: fixed;
    bottom: 0px;
    right: 0px;
    background: rgb(224, 224, 224);
}
#clicado {
    position: fixed;
    bottom: 20px;
    right: 0px;
    background: rgb(224, 224, 224);
}
#janela {
    position: absolute;
    height: 100px;
    width: 100px;
    background: rgb(224, 224, 224);
} 
```

**JavaScript**

```
var clicado = false;
var inicioX;
var inicioY;
var finalX;
var finalY;

document.onmousemove = function mostrarInfo(event) {
    if (clicado == true) {
        finalX = event.clientX;
        finalY = event.clientY;
        pontoX = finalX - inicioX;
        pontoY = finalY - inicioY;
        document.getElementById('janela').style.top = pontoY + "px";
        document.getElementById('janela').style.left = pontoX + "px";
        document.getElementById('coordenadas').innerHTML = "X: " + pontoX + " | ";
        document.getElementById('coordenadas').innerHTML += "Y: " + pontoY;
    }
}

function segurar(event) {
    clicado = true;
    document.getElementById('clicado').innerHTML = "Mouse: Segurando";
    inicioX = event.clientX;
    inicioY = event.clientY;
}

function soltar() {
    clicado = false;
    document.getElementById('clicado').innerHTML = "Mouse: Solto";
} 
```

**HTML**

```
<div id="janela" onmousedown="segurar(event);" onmouseup="soltar();"></div>
<span id="coordenadas"></span>
<span id="clicado"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:02:47.013

问题是您如何计算`<div>`. 在您的代码中，您正在获取鼠标位置并减去初始位置。这是第一次可以，因为您的初始位置是`top: 0; left: 0`。但是一旦你第二次开始移动它，它就会变得更加明显。您将位置设置为开始位置和结束位置*之间的距离。*

像这样改变你`mostrarInfo`：

```
document.onmousemove = function mostrarInfo(event) {
    if (clicado == true) {
        pontoX = event.clientX;
        pontoY = event.clientY;
        document.getElementById('janela').style.top = pontoY + "px";
        document.getElementById('janela').style.left = pontoX + "px";
        document.getElementById('coordenadas').innerHTML = "X: " + pontoX + " | ";
        document.getElementById('coordenadas').innerHTML += "Y: " + pontoY;
    }
} 
```

请参阅此[JSFiddle](http://jsfiddle.net/LZzWL/)。

它仍然不完美，因为它试图将左上角设置`<div>`为您的鼠标位置，但它仍然比您的另一个更好。为了更准确，我建议改用 JQuery 之类的东西。（否则您需要确定`<div>`点击发生的位置，找到该点与左上角之间的距离，并相应地调整您的`pontoX`和`pontoY`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:22:41.353

您需要将 div 的当前位置减去偏移量，因为 mousedown 事件会为您提供全局坐标。

```
function segurar(event) {
    clicado = true;
    document.getElementById('clicado').innerHTML = "Mouse: Segurando";
    inicioX = event.clientX - document.getElementById('janela').offsetLeft;
    inicioY = event.clientY - document.getElementById('janela').offsetTop;
} 
```

[这是我的jsfiddle](http://jsfiddle.net/CzsMt/)

# java - 找不到包 java.util.PropertyResourceBundle 的资源

> ID：12147977
> 
> 赞同：0
> 
> 时间：2012-08-27T19:03:53.590
> 
> 标签：java, jsp

关于以下错误的任何想法？？？ `JSP Can't find resource for bundle java.util.PropertyResourceBundle, key el.convert`我在使用 jsp 时得到了这个。我错过了什么吗？

```
 <c:set var="count" value="0" scope="page" />

                      <c:forEach items="${usersList}" var="userNames" >
                      <c:set var="counter" value="${count + 1}" scope="page"/>
                      <li class="msImages">
                      <c:choose>
                      <c:when test="${counter lt '4'}">
                          <p> <span> I am creating an image</span>

                           </p>
                         </c:when>
                        <c:when test="${counter eq '4'}">
                                  <span>See More </span>
                                  </c:when>

                         </c:choose>

  </li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:18:00.777

您`count`两次使用相同的变量名。删除`<c:set var="count" value="0" scope="page" />`. 此外，您应该使用的*属性*，`varStatus`而不是直接使用值。[它不是原始对象。](http://www.ibm.com/developerworks/java/library/j-jstl0318/#N102E5)

```
<c:forEach items="${usersList}" var="userNames" varStatus="stat">
    <c:set var="counter" value="${stat.count + 1}" scope="page"/>
    <li class="msImages">
        <c:choose>
            <c:when test="${counter lt 4}">
                <p> <span> I am creating an image</span> </p>
            </c:when>
            <c:when test="${counter eq 4}">
                <span>See More </span>
            </c:when>
        </c:choose>
    </li>
</c:forEach> 
```

# iphone - iAd 整合的正确做法？

> ID：12147982
> 
> 赞同：1
> 
> 时间：2012-08-27T19:04:15.807
> 
> 标签：iphone, sdk, implementation, iad, ads

我最近一直在将 iAd 框架实施到我的应用程序中，尽管一切正常，并且可以正常显示测试广告，但我只是想知道我一直在使用的实施方法是否是我的最佳实践已经看到几个人以不同的方式和我个人的观点这样做 - 不必要的复杂。

目前我只有一个`adbannerview`作为插座，然后使用以下代码加载或隐藏它，具体取决于广告是否按照 Apple 的要求完成。

```
-(void)bannerViewDidLoadAd:(ADBannerView *)banner {
    adView.hidden = FALSE;
}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    adView.hidden = TRUE;
} 
```

我知道这在动画方面并没有什么花哨的，但从我读过的“界面指南”来看，没有必要在广告出现或消失时对其进行动画处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:08:07.510

据我所知，在展示 ADBannerView 时，您无需再做任何事情。当然，正如你所说，动画化它更漂亮，但像你一样呈现它是没有问题的。

如果您想在您的应用程序的未来版本中以动画形式呈现它，您可以[在此处](http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app)找到一个很棒的教程。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-27T19:12:36.017

在我看来很好。我想知道为什么当您未能获得广告时隐藏横幅广告。一般来说，您不想做这样的事情，因为它会鼓励人们避免收到广告（仅在使用您的应用程序时打开飞行模式等）

# c# - 如何从 .NET 中的 X509Certificate2 中提取 AuthorityKeyIdentifier

> ID：12147986
> 
> 赞同：5
> 
> 时间：2012-08-27T19:04:25.807
> 
> 标签：c#, x509, x509certificate2

我正在寻找一种从 X509Certificate2 实例中提取 AuthorityKeyIdentifier 扩展的方法。我没有看到对此的任何内置支持，但由于 Windows 可以正确构建证书链，我知道该功能必须存在于某个级别。如果答案是滚动 DER 解析器，是否有可以参考的良好实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T12:25:23.767

遍历 X509Certificate2.Extensions 属性中的扩展并查找 OID 为 2.5.29.35 的扩展（根据[http://www.alvestrand.no/objectid/2.5.29.35.html](http://www.alvestrand.no/objectid/2.5.29.35.html)）。那是 AuthorityKeyIdentifier 扩展。

[编辑：添加了以下内容。]

Extensions 属性的每个成员都是 ASN 编码的。因此，您可以执行以下操作以使其成为人类可读或机器可解析的格式：

```
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;

...

X509Extension extension; // The OID 2.5.29.35 extension
AsnEncodedData asndata = new AsnEncodedData(extension.Oid, extension.RawData);
Console.WriteLine(asndata.Format(true)); 
```

对于 Microsoft 中间 CA 证书之一，Format() 方法返回以下内容：

```
[1]Authority Info Access
     Access Method=Certification Authority Issuer (1.3.6.1.5.5.7.48.2)
     Alternative Name:
          URL=http://www.microsoft.com/pki/certs/MicrosoftRootCert.crt 
```

它当然不容易解析，但是您可以查找以正则表达式开头的行，`\[\d+\]Authority Info Access`然后在其下方找到带有正则表达式的行`URL=(.+)`（八个空格在格式中不清楚）并使用括号组中的 URL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T19:50:27.140

有一个更简单的选项可用 - 采用一些现有组件，在处理证书时提供更大的灵活性。您可以使用[BouncyCastle](http://www.bouncycastle.org/)或我们的[SecureBlackbox](http://www.eldos.com/sbb/net-pki.php)。

# java - 问题解析 MHTML

> ID：12147992
> 
> 赞同：2
> 
> 时间：2012-08-27T19:04:46.133
> 
> 标签：java, html, parsing, specifications, mhtml

我能够使用[这个问题](https://stackoverflow.com/questions/3230305/how-to-read-or-parse-mhtml-mht-files-in-java)作为解析“mht”文件的起点，但是锚标签中的“3D”（例如`<a href=3D"[my anchor]">[anchor text]></a>`：）破坏了所有内部链接和嵌入图像。我可以让解析器用“=”（例如：）替换“=3D” `<a href="[my anchor]">[anchor text]></a>`，它似乎工作正常，但我想了解那个“元标记”的目的。

为什么从“.docx”导出到“.mht”会在大多数（如果不是全部）html 属性的右侧添加“3D”？是否有更好的方法来处理它们或替换它们时使用更好的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:40:45.040

这`=3D`是[引用的可打印编码](https://en.wikipedia.org/wiki/Quoted-printable)的结果。找到一个用于解码引用的可打印数据的 java 库应该不难。

# java - Java如何存储空值？

> ID：12147993
> 
> 赞同：4
> 
> 时间：2012-08-27T19:04:46.667
> 
> 标签：java, null

> **可能重复：**
> [Java 中的 null 是什么？](https://stackoverflow.com/questions/2707322/what-is-null-in-java)
> [Java中如何实现null？](https://stackoverflow.com/questions/6729702/how-is-null-implemented-in-java)

假设我说

```
String x = null; 
```

这个 null 如何在内部存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T19:07:25.553

看看这个问题： [Java 中的 null 是什么？](https://stackoverflow.com/questions/2707322/what-is-null-in-java) 基本上，通常存储为 0，与 C++ 相同，但这可能是特定于实现的，因此您不应该依赖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T19:05:59.127

根据[java规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1)，它是一种文字。

> 还有一种特殊的 null 类型，即表达式 null 的类型，它没有名称。因为 null 类型没有名字，所以不可能声明一个 null 类型的变量或强制转换为 null 类型。空引用是空类型表达式的唯一可能值。空引用始终可以转换为任何引用类型。在实践中，程序员可以忽略 null 类型，只是假装 null 只是一个可以是任何引用类型的特殊文字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T19:07:35.710

在 Java 中，运行时必须确保在指向块的指针暴露给 Java 代码之前将所有堆分配的内存清零。全零块将被解释为实例字段的初始值。这几乎可以保证`null`在任何 JVM 实现中都将实现为零值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T19:06:18.613

该`null`值存储在变量中`x`。

# c++ - 通用第一个参数 C++ 函数

> ID：12147994
> 
> 赞同：0
> 
> 时间：2012-08-27T19:04:53.607
> 
> 标签：c++, qml

我有很多二传手。有没有一种通用的方法来获取每个 setter 的第一个参数而不拼写每个不同 setter 参数的名称？例如：

```
void
Class::setSelectedEntryIndex(int newSelectedEntryIndex) {
    m_log(ExEr) << "first arg: " << newSelectedEntryIndex << std::endl;
    m_selectedEntryIndex = newSelectedEntryIndex;
    emit selectedEntryIndexChanged();
}

replaced with:

void
Class::setSelectedEntryIndex(int newSelectedEntryIndex) {
    m_log(ExEr) << "first arg: " << this->firstArg << std::endl;   // Change here
    m_selectedEntryIndex = newSelectedEntryIndex;
    emit selectedEntryIndexChanged();
} 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:15:55.580

不是你提议的方式。您*可以*将参数列表更改为一个，`std::tuple`但由于您正在处理设置器，我假设您的参数列表每个都有一个参数。

你最好的自动化方法（我认为你想要做的）是在你的函数定义中简单地命名所有参数。您仍然可以在声明中为它们提供描述性名称，因为无论如何 C++ 并不关心这一点。

### 。H

```
class MyClass {
  void setTemperature(int newTemperature);
  // or
  void setTemperature(int); // <- people sometimes find this less self-documentative
}; 
```

### .cpp

```
void MyClass::setTemperature(int param1) {
  m_log(ExEr) << "first arg: **" << param1 << std::endl;
  /* ... */
} 
```

# java - 按元素对列表项进行分组以在 jsp 收据中使用

> ID：12147997
> 
> 赞同：1
> 
> 时间：2012-08-27T19:05:06.520
> 
> 标签：java, hibernate, list, jsp, jakarta-ee

我在下面有一些代码用于查询数据库并将数据添加到列表中，

```
Query q= session.createQuery("select tally_receipt_prefix, tally_receipt_no,           tally_head, tally_amount from Tally_table where tally_system_date='"+fmtd_date+"' and tally_dbcr_indicator='DB' and tally_mode='Ca' order by  tally_head,tally_receipt_prefix,tally_receipt_no");

    payincash = new ArrayList();

    for(Iterator it=q.iterate(); it.hasNext(); )
    {
        Object[] row= (Object[]) it.next();
        payincash.add((String)row[0]);
        payincash.add((String)row[1]);
        payincash.add((String)row[2]);
        payincash.add((String)row[3]);

    }

    System.out.println("cash list in dao: "+payincash); 
```

返回的列表类似于 [prefix1, no1, head1, amt1, prefix2, no2, head2, amt2,]。我正在尝试在 jsp 中制作收据

## 头1

前缀 1/no1 amt1

prefix2/no2 amt 2

* * *

## 头3

前缀 3/no3 amt3

所以看起来我想在收据 - jsp 文件中按头列对所有记录进行分组。我该怎么做？任何帮助完全赞赏。请原谅我的英语。

编辑：这是我尝试过的，

查询 q= session.createQuery("selecttally_receipt_prefix,tally_receipt_no,tally_head,tally_amount from Tally_table where tally_system_date='"+fmtd_date+"' and tally_dbcr_indicator='DB' and tally_mode='Ca' order by tally_head,tally_receipt_prefix,tally_receipt_no"); System.out.println("查询"+q);

```
 List heads=new ArrayList();

    for(Iterator it=q.iterate(); it.hasNext(); )
    {
        Object[] row= (Object[]) it.next();

        payincash1=new LinkedHashMap<String, List>();

        heads.add((String)row[2]);

        List tails = null;
        tails=new ArrayList();
        tails.add((String)row[0]);
        tails.add((String)row[1]);
        tails.add((String)row[3]);

        System.out.println("heads in dao from iter 1: "+heads);  
        System.out.println("tails in dao from iter1 on: "+tails);

        if(heads.contains((String)row[2]))  // for head in temp list
        {
            System.out.println("in first if");
            if(payincash1.containsKey((String)row[2]))     
            {
                System.out.println("map if repeat: "+payincash1);
                payincash1.put((String)row[2],tails);
            }

        } 
        else
        {

            System.out.println("map if not repeat: "+payincash1);
            payincash1.put((String)row[2], tails);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:03:40.667

收据的头列存储在哪里？在哪一栏？
在我看来，它也应该存储在数据库中。
假设头部信息保存在 DB 的“头部”列中，因此您应该更改查询，添加：

```
order by head 
```

在最后。
之后，您应该遍历 Result，并可能将信息保存在如下所示的数据结构中：

```
Map<String,List<ReceiptInformation> map = new HashMap<>(); //using JDK7 syntax here 
```

map 中的 key 应该是每次迭代中“head”的值。映射中的值应该是包含 ReceiptInfo 对象的 ArrayList（或任何其他实现 List 的类）。
ReceiptInfoObject 保存每条记录的所有其余值。
然后，您可以迭代 map.keySet() 集合，并为每个键打印头部，然后使用内部循环打印收据。

根据提出问题的用户的请求进行编辑：
为了添加新条目（即 - 新的 RecepitInformation 对象到地图），应该执行：

```
List<RecepitInformation> listForHead = map.get(headValue);
if (listForHead == null) {
   listForHead = new ArrayList<ReceiptInformation>();
   map.put(headValue,listForHead);
}
listForHead.add(recepitInformation); 
```

像往常一样，我没有编译这个，但我认为它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:48:22.127

使用[GS Collections](https://github.com/goldmansachs/gs-collections)，您可以使用列表。[groupBy](https://github.com/goldmansachs/gs-collections/blob/89c103b75260348cb2aa659c9afaa0c600e339a5/collections-api/src/main/java/com/gs/collections/api/RichIterable.java#L791) (Function) 只要您的列表是[MutableList](https://github.com/goldmansachs/gs-collections/blob/master/collections-api/src/main/java/com/gs/collections/api/list/MutableList.java)。对于 JDK 列表，您可以使用[Iterate.groupBy](https://github.com/goldmansachs/gs-collections/blob/b76f846c6f65bb07ff0704d2ed44b627ff7716ca/collections/src/main/java/com/gs/collections/impl/utility/Iterate.java#L1895) (Iterable, Function)。groupBy 的结果将是一个[Multimap](https://github.com/goldmansachs/gs-collections/blob/master/collections-api/src/main/java/com/gs/collections/api/multimap/Multimap.java)。

# java - Rich:autocomplete 和 rich:suggestionbox 有什么区别

> ID：12147998
> 
> 赞同：2
> 
> 时间：2012-08-27T19:05:07.540
> 
> 标签：java, richfaces

我一直在网上搜索，但没有找到明确的解释。我试图找出rich:autocomplete 和rich:suggestionbox 功能之间的区别。

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T19:46:43.910

`<rich:autocomplete>`是richfaces 4 组件并且`<rich:suggestionBox>`是richfaces 3 组件。如[richfaces 3 到richfaces 4 迁移指南](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration-ComponentsMigration-RichInputComponents)中所述，`<rich:autocomplete>`结合了richfaces 3 的功能`<rich:suggestionBox>`和`<rich:comboBox>`组件。

**也可以看看：**

*   [Richfaces 3 文档](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/)
*   [Richfaces 4 组件文档](http://www.jboss.org/richfaces/docs/4-0_comp_reference)