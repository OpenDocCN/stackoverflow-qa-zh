# StackOverflow 问答 10973000-10973999

# macos - OS-X 10.7 上的 emacs 23.4 mouse-2 行为

> ID：10973000
> 
> 赞同：10
> 
> 时间：2012-06-10T22:55:28.617
> 
> 标签：macos, emacs, flyspell, ispell

如何使用触控板在 OS X 上将 mouse-2（中键单击）映射到（cmd + 单击）或（ctrl+单击），以便在 flyspell 模式下显示弹出菜单。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T13:35:41.050

像 Stefan 建议的那样，mouse-3 怎么样？

将此添加到您的初始化文件中：

```
(eval-after-load "flyspell"
    '(progn
       (define-key flyspell-mouse-map [down-mouse-3] #'flyspell-correct-word)
       (define-key flyspell-mouse-map [mouse-3] #'undefined))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:18:00.150

需要修复 flyspell 以在 mouse-3 上弹出菜单，因为它实际上更像是上下文菜单。即我推荐一个`M-x report-emacs-bug`关于它的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:04:44.870

已经为此内置了一个选项。看一眼：

```
mac-emulate-three-button-mouse 
```

具体来说，您应该能够添加：

```
(setq mac-emulate-three-button-mouse t) 
```

在您的 .emacs 中，然后 mouse-2 将是 Option+Click，而 mouse-3 将是 Cmd+Click

# c++ - 大整数位旋转

> ID：10973001
> 
> 赞同：3
> 
> 时间：2012-06-10T22:55:32.313
> 
> 标签：c++, bit-manipulation, endianness

我想在我的整数类中实现无符号左旋转。但是，因为它是一个模板类，它可以是从 128 位开始的任何大小，并继续下去；所以我不能使用需要相同大小的临时的算法，因为如果类型变大，就会发生堆栈溢出（特别是如果这样的函数在调用链中）。

因此，为了解决这样的问题，我将其最小化为一个问题：我必须执行哪些步骤才能仅使用 4 位来旋转 32 位数字。好吧，如果您考虑一下，它是一个 32 位数字，包含 8 组，每组 4 位，因此如果要旋转的位数是 4，那么组之间会发生交换`0 and 4`，`1 and 5`, `2 and 6`, `3 and 7`, 之后旋转完成。

如果要旋转的位小于 4 且大于 0，那么很简单，只需保留最后一位`N`并开始移位或循环，例如，假设我们有将`0x9CE2`其左旋转 3 位的数字，我们将执行以下操作：

little endian 二进制中的数字是`1001 1100 1110 0010`，每个半字节从右到左从 0 到 3 索引，我们将这个数字`N`和一组中的位数称为`B`

```
[1] x <- N[3] >> 3
    x <- 1001 >> 3
    x <- 0100

    y <- N[0] >> (B - 3)
    y <- N[0] >> (4 - 3)
    y <- 0010 >> 1
    y <- 0001

    N[0] <- (N[0] << 3) | x
    N[0] <- (0010 << 3) | 0100
    N[0] <- 0000 | 0100
    N[0] <- 0100

[2] x <- y
    x <- 0001

    y <- N[1] >> (B - 3)
    y <- N[1] >> (4 - 3)
    y <- 1110 >> 1
    y <- 0111

    N[1] <- (N[1] << 3) | x
    N[1] <- (1110 << 3) | 0001
    N[1] <- 0000 | 0001
    N[1] <- 0001

[3] x <- y
    x <- 0111

    y <- N[2] >> (B - 3)
    y <- N[2] >> (4 - 3)
    y <- 1100 >> 1
    y <- 0110

    N[2] <- (N[2] << 3) | x
    N[2] <- (1100 << 3) | 0111
    N[2] <- 0000 | 0111
    N[2] <- 0111

[4] x <- y
    x <- 0110

    y <- N[3] >> (B - 3)
    y <- N[3] >> (4 - 3)
    y <- 1001 >> 1
    y <- 0100

    N[3] <- (N[3] << 3) | x
    N[3] <- (1001 << 3) | 0110
    N[3] <- 1000 | 0110
    N[3] <- 1110 
```

结果是`1110 0111 0001 0100`，`0xE714`以十六进制表示，这是正确的答案；并且，如果您尝试以任何精度将其应用于任何数字，您所需要的只是一个变量，该变量的类型是形成该 bignum 类型的数组的任何元素的类型。

现在真正的问题是当要旋转的位数大于一组或大于类型的一半时（即在此示例中大于 4 位或 8 位）。

通常，我们将位从最后一个元素移到第一个元素，依此类推；但是现在，在将最后一个元素移动到第一个元素之后，结果必须重新定位到新的位置，因为要旋转的位数大于元素上的位数（即`> 4 bits`）。移位开始的起始索引是最后一个索引（本例中为 3），对于目标索引，我们使用`dest_index = int(bits_count/half_bits) + 1`等式：第一次移位的结果必须重新定位到目标索引 2——这是我的问题，因为我想不出一种方法来为这种情况编写算法。`half_bits``half_bits = 8``bits_count = 7``dest_index = int(7/8) + 1 = 1 + 1 = 2`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:55:03.373

这只是实现这一点的一种方法的一些提示。你可以考虑做两次传球。

*   第一遍，仅在 4 位边界上旋转
*   第二遍，在 1 位边界上旋转

因此，顶级伪代码可能如下所示：

```
rotate (unsigned bits) {
  bits %= 32; /* only have 32 bits */
  if (bits == 0) return;
  rotate_nibs(bits/4);
  rotate_bits(bits%4);
} 
```

因此，要旋转 13 位，首先要旋转 3 个半字节，然后再旋转 1 位以获得总共 13 位的旋转。

如果将半字节数组视为循环缓冲区，则可以完全避免半字节旋转。然后，半字节旋转只是改变数组中`0`索引的起始位置的问题。

如果您必须进行轮换，那可能会很棘手。如果您正在旋转 8 项数组并且只想使用 1 项存储开销来进行轮换，那么要旋转 3 项，您可能会这样处理它：

```
 orig: A B C D E F G H
 step 1: A B C A E F G H  rem: D
      2: A B C A E F D H  rem: G
      3: A G C A E F D H  rem: B
      4: A G C A B F D H  rem: E
      5: A G C A B F D E  rem: H
      6: A G H A B F D E  rem: C
      7: A G H A B C D E  rem: F
      8: F G H A B C D E  done 
```

但是，如果您尝试使用相同的技术旋转 2、4 或 6 个项目，则循环不会遍历整个数组。所以，你必须知道旋转计数和数组大小是否有公约数，并让算法考虑到这一点。如果您通过 6 步旋转逐步完成，则会出现更多线索。

```
 orig: A B C D E F G H
                     A
                 G
             E
         C                 cycled back to A's position
                       B
                   H
               F
           D               done 
```

请注意，GCD(6,8) 为 2，这意味着我们应该期望每次通过 4 次迭代。然后，N 项数组的旋转算法可能如下所示：

```
rotate (n) {
  G = GCD(n, N)
  for (i = 0; i < G; ++i) {
    p = arr[i];
    for (j = 1; j < N/G; ++j) {
      swap(p, arr[(i + j*n) % N]);
    }
    arr[i] = p;
  }
} 
```

你可以做一个优化来避免每次迭代的交换，我将把它作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T02:05:32.433

我建议为位旋转调用汇编语言函数。

许多汇编语言具有更好的通过进位旋转位和通过位旋转进位的工具。

很多时候，汇编语言不如 C 或 C++ 函数复杂。

缺点是每个{不同}平台都需要每个汇编函数的一个实例。

# mysql - OR 在 django 数据库查询中

> ID：10973010
> 
> 赞同：0
> 
> 时间：2012-06-10T22:56:36.577
> 
> 标签：mysql, django, django-models, django-forms

我有一个具有 3 个 BooleanFields 的模型，我想使用复选框表单来查询数据库。输出应该是表的所有条目，其中至少有一个被选中的字段为 1。现在我有这样的事情：

```
f=mform.cleaned_data['F']
h=mform.cleaned_data['H']
s=mform.cleaned_data['S']
course_list=[]
course_list=Course.objects.filter(Q(F=f)|Q(H=h)|Q(S=s)) 
```

但这显然不起作用，因为它总是返回所有表格。基本上，我想获取所有这些字段为真的所有课程记录。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:14:33.137

**查询：“选择所有课程记录，其中（F 为真或 H 为真或 S 为真）”**

```
q_filter = Q()

if mform.cleaned_data['F']:
    q_filter |= Q(F=True)
if mform.cleaned_data['H']:
    q_filter |= Q(H=True)
if mform.cleaned_data['S']:
    q_filter |= Q(S=True)

if q_filter:
    course_list = Course.objects.filter(q_filter)
else:
    course_list = Course.objects.none() 
```

这是一个非常基本的方法。它可以在一个更漂亮的单行循环中完成，但我想在这里澄清一下。随着时间的推移，你建立了一个 Q 对象。在您的示例中，您正在过滤可能是 True 或 False 的值，而您说您想要的是仅过滤具有 True 值的给定字段的记录。

# php - phpMyAdmin 登录页面不起作用

> ID：10973013
> 
> 赞同：1
> 
> 时间：2012-06-10T22:56:55.107
> 
> 标签：php, session, phpmyadmin

带有 PHP 5.3.10 的 Centos

我将 php 错误报告设置为 E_ALL | E_STRICT 但没有收到任何错误。

我输入正确或不正确的用户名/密码组合都没有关系。结果总是一样的：登录页面重新加载并且不显示任何错误。

我听说这个问题可能是由磁盘满引起的。但是我的磁盘只有 63% 满了。

此外，phpMyAdmin 以前也可以工作。突然间它停止了工作。据我所知，没有任何改变。

哦，最后，我在尝试登录后有时会在网页上显示此错误：

```
phpMyAdmin - Error
"Cannot start session without errors, please check errors given in your PHP and/or webserver log file and configure your PHP installation properly." 
```

但是在最后一天左右，没有错误（在日志中或屏幕上）。

# java-me - 如何在 LWUIT-1.5 的选项卡中添加图像和字符串？

> ID：10973018
> 
> 赞同：0
> 
> 时间：2012-06-10T22:58:01.487
> 
> 标签：java-me, lwuit

我正在尝试在 LWUIT-1.5 的选项卡中添加图像和字符串。无论如何，两者都出现在 UI 中，但文本出现在图像的底部。所以，我需要在同一个地方添加两者，比如重叠图像。

```
Tabs tabs = new Tabs();
tabs.addTab("Text", Image, Component); 
```

任何人都可以帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:15:14.917

**如果不使用资源编辑器，这是不可能的**。您设置图像或文本。如果同时设置，它会自动将图像作为图标，将文本作为标题。

通过设置选项卡的背景图像在资源编辑器中创建主题并在您的应用程序中应用主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:00:51.610

您似乎想要标签的背景图像而不是图标（这是该 API 的用途），您应该在资源编辑器中修改 Tab UIID 的样式并设置您想要的图像背景。

# ruby-on-rails - rails - 如何在 i18n 中自定义 Flash 消息颜色

> ID：10973019
> 
> 赞同：0
> 
> 时间：2012-06-10T22:58:02.203
> 
> 标签：ruby-on-rails, internationalization, twitter-bootstrap, flash-message

我想知道如何在 i18n 中进行 flash[:success]？我对它很陌生，但我在看[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

我试图更改 yml 文件中的闪光灯颜色。我目前有..

```
en:
  merit:
    flashs:
      badge_granted: "Congratulations!" 
```

:merit 是一个关键词，可以在一个 gem 中找到，其中 flash 与 line 一起出现

```
flash[:merit] = t('merit.flashs.badge_granted', :badge => Badge.find(badge_id).name) 
```

我想知道是否可以发送 :success 消息？我正在使用 twitter 引导程序，并且 :success 是绿色的，而 :notice 是橙色的。我基本上只是想要一个绿色的闪光通知，而不是橙色。我怎样才能做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:27:47.310

您可以使用 css 自定义颜色。在您的视图中为其提供与引导程序使用的相同的类，您就可以开始了。

# c++ - GCC 中树莓派的交叉编译。从哪儿开始？

> ID：10973020
> 
> 赞同：51
> 
> 时间：2012-06-10T22:58:16.150
> 
> 标签：c++, gcc, arm, cross-compiling, raspberry-pi

> **TL/DR**：我在哪里可以找到有关为 ARM (gnueabi) 平台（旨在在 Raspberry Pi 设备上运行）构建 GCC 4.7.0 交叉编译工具链的更多信息？

我刚刚得到了一个全新的 Raspberry Pi，我非常渴望开始为它编程。我已经成功安装了 GCC 工具链（我使用的是 Arch Linux 系统映像）并编译了一些基本程序，一切正常。

我也尝试编译 Boost 库，因为我经常在我的项目中使用它们，并且按照说明 ( `./bootstrap.sh`+ `./b2`) 似乎一切正常，除了编译速度非常缓慢。我把它打开了几个小时，但它几乎没有超过最初的几个源文件。在我让它运行了一夜之后，我发现构建过程由于 RAM 不足而中止。

所以，我的猜测是 Rasp Pi 根本无法编译像 Boost 这样大小的东西。因此，我想到了交叉编译。然而，尽管网上有很多关于 ARM 交叉编译的信息，我还是觉得很混乱。甚至从哪里开始？

我的 Raspberry Pi 上有一个最新的 GCC 版本（4.7.0），所以理想情况下我希望使用相同的版本进行交叉编译。我在哪里可以获得 ARM 的 GCC 4.7.0 工具链？（我将在 x86 CentOS 6.2 上编译）

**编辑：**

我释放了不需要的 GPU 内存并在 USB 驱动器上设置了一个 4GB 交换分区，而构建文件位于 NFS 共享上。Boost 现在的编译速度要快得多，因此它是易于管理的。我仍然想知道如何在我的 x86 PC 上设置用于交叉编译的 GCC 4.7 工具链，因为我打算进行大量编译并且我希望它尽可能快。

**编辑2：**

由于 GCC 4.7.0 相对较新，似乎没有预构建的交叉编译器（i386->ARM）。我可能不得不自己建造一个，这似乎是一项不平凡的任务（我已经尝试过但失败了）。有谁知道构建 GCC 交叉编译器的教程，希望是最新版本之一？

我已经尝试过使用[这个很棒的 shell 脚本](http://joelinoff.com/blog/?p=658)（它非常适合构建相同架构的编译器）并且我已经成功构建了`binutils`GCC 的先决条件，但是随后 GCC 构建一直失败并出现许多神秘错误。我真的迷路了，所以我非常感谢你的帮助。

Raspberry Pi 上的 GCC 配置为

```
--prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib 
--mandir=/usr/share/man --infodir=/usr/share/info 
--with-bugurl=https://bugs.archlinux.org/ 
--enable-languages=c,c++,fortran,lto,objc,obj-c++ --enable-shared 
--enable-threads=posix --with-system-zlib --enable-__cxa_atexit 
--disable-libunwind-exceptions --enable-clocale=gnu 
--disable-libstdcxx-pch --enable-libstdcxx-time 
--enable-gnu-unique-object --enable-linker-build-id --with-ppl 
--enable-cloog-backend=isl --enable-lto --enable-gold 
--enable-ld=default --enable-plugin --with-plugin-ld=ld.gold 
--with-linker-hash-style=gnu --disable-multilib --disable-libssp 
--disable-build-with-cxx --disable-build-poststage1-with-cxx 
--enable-checking=release --host=arm-unknown-linux-gnueabi 
--build=arm-unknown-linux-gnueabi 
```

**编辑3：**

按照用户 dwelch 在评论中的建议，我设法使用[这个 shell 脚本为 ARM 构建了一个 4.7 GCC 工具链（耶！）。](http://github.com/dwelch67/raspberrypi)我还构建`newlib`并`libstdc++`使用[这篇文章](http://wiki.osdev.org/OS_Specific_Toolchain)作为指南。工具链工作正常，但是当我在 Raspberry Pi 上运行可执行文件时，它会以`Illegal instruction`. 这可能是什么原因？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T14:48:44.573

我找到了这些说明[How to build a cross compiler for your Ra​​spberry Pi](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)。这是一个很好的使用`crosstool-ng`工具来简化配置交叉编译器构建 A LOT（它有一个很好的基于 curses 的接口）并且它支持 GCC 4.7。

似乎工作得很好！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T15:01:29.257

[http://github.com/dwelch67/raspberrypi](http://github.com/dwelch67/raspberrypi) [buildgcc 目录](https://github.com/dwelch67/raspberrypi/tree/master/buildgcc)有 4.7 gcc/gnu 和 3.0 clang/llvm 的脚本。gnu 一源自 opencores 的 mpx 项目中的脚本，我删除了 gdb 和 libgcc、glibc 等，将其归为编译器。如果你想要其他东西剪切和粘贴 mips 的手臂。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T08:05:02.657

[以下是如何在 Windows 中构建 Raspberry Pi 交叉编译器](http://www.gurucoding.com/en/rpi_cross_compiler/index.php)的分步指南。您收到`Illegal Instruction`错误的原因是最新的 Raspbian 启用了 hardfp，并且需要为 gcc 和 eglibc 提供适当的补丁来支持 hardfp。否则生成的代码将使用不同的 ABI，即在不同的寄存器中传递函数参数，因此在运行时崩溃。

此外，为 ARMv7（Raspebby Pi 是 ARMv6）错误配置 GCC 可能会导致`Illegal Instruction`错误。请务必`--with-arch=armv6`在配置 GCC 时指定选项。

上面链接的指南虽然基于 GCC 4.6.3。但我想它也应该适用于 GCC 4.7。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T09:52:50.570

我找不到 4.7 gcc，只有 4.6。有关信息，我按照此页面上的指南在相当旧的 Ubuntu 机器（1Ghz，768MB RAM）上编译了 Pi 的内核： [内核编译](http://elinux.org/Rpi_kernel_compilation#Ubuntu_Linux)

构建大约需要 90 分钟，而在 Pi 上建议需要 6 小时。内核在 Pi 上运行良好。也许您可以调整这些指南，以便在您的 x86 Linux 机器上交叉编译其他项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-06T06:09:46.197

# [您可以从这个最新的GitHub 存储库](https://github.com/abhiTronix/raspberry-pi-cross-compilers)中尝试我的开源预构建/预编译 GCC Cross & Native Compiler Binaries for Raspberry Pi ：

该项目包含 UpToDate 预编译/预构建的 Raspberry pi GCC 交叉和本机编译器二进制文件集，可节省大量时间（无需编译或错误处理）。只需在您的机器中提取、链接和享受完整的 GCC（Raspberry Pi）功能。您可以将其原生编译器用于 Raspberry Pi（可与旧的和慢速 6.3.0 GCC 一起使用），或者在任何 Linux 机器上使用交叉编译器（在最新的 Ubuntu/bionic x64 上测试）为您的 Raspberry Pi 编译程序. 所有这些编译器二进制文件都是为增强整体性能而优化的 Raspberry Pi 硬件。

**支持的 GCC 版本：**

*   海合会 6.3.0
*   海合会 7.4.0
*   海合会 8.2.0
*   海合会 8.3.0

**支持的树莓派：**

*   当前支持所有 Raspberry Pi 版本/型号。
*   任何其他具有类似硬件配置的 ARM 设备也可以工作。

**支持的环境：**

*   **交叉编译器：**当前支持所有 Linux 发行版 (x32/x64)。
*   **Native-Compiler：**支持所有带有 Raspbian OS 的 Raspberry Pi 版本/型号。其他操作系统可能/可能不工作。

**支持的语言：**

*   C++
*   C
*   Fortran

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T12:01:17.483

你可以试试[Raspberry-GCC-4.7.3](https://github.com/kallaballa/Raspberry-GCC-4.7.3)工具链。

这是一个使用 gnueabi 的带有 hardfp 的 armv6 的预构建 gcc-4.7.3 工具链。我正在使用它为树莓派目标交叉编译 c++11。

请注意，它仅适用于 linux x86_64 主机。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-14T18:50:53.147

[Dockcross 项目](https://github.com/dockcross/dockcross)是完全除臭工具链的一个很好的起点，您不仅可以为 Pi 构建，还可以为其他任何东西构建。以下是命令：

```
docker run --rm dockcross/linux-armv7 > ./dockcross-linux-armv7
chmod +x ./dockcross-linux-armv7
./dockcross-linux-armv7 bash -c '$CC test/C/hello.c -o hello_arm' 
```

它也`cmake`内置了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T17:41:35.880

正如您所指出的，在 Raspberry Pi 本身上构建速度很慢，但很可靠（因为它不是交叉编译），前提是您不会耗尽内存。也许可以调整内存和交换设置以使更大的构建成为可能（如果不是很快的话）。我知道在论坛上，人们都在谈论将根分区放在 SD 上，将用户分区放在 USB 驱动器上，当然，获得快速（6 级或更好）的 SD 卡可能会有所作为。随着时间的推移，编译性能可能会随着软件的改进而提高。或者，也许 Raspberry Pi 2 将具有改进的芯片组和更多的 RAM。:-)

# javascript - 对于纯 Javascript 应用程序，是否有类似于 Razor 的模板语言？

> ID：10973024
> 
> 赞同：4
> 
> 时间：2012-06-10T22:58:23.717
> 
> 标签：javascript, razor, rythm

我爱上了 .NET MVC 3 中的 razor 模板。javascript 有什么接近的吗？

我正在寻找可以使用这样的东西的东西：

```
@if(bla)
{
  <span>my html</span>
} 
```

我已经知道 Java 存在类似的东西。Javascript 呢？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:15:06.717

也许[Knockout.js](http://knockoutjs.com/)是您正在寻找的。

你可以做这样的条件

```
<!-- ko if: $data === app.viewModel.admin.home.paging.page() -->
    <span data-bind="html: $data"></span>
<!-- /ko --> 
```

资料来源：[条件逻辑是否在默认的 knockout.js 2.0 模板引擎下工作？](https://stackoverflow.com/questions/9810777/does-conditional-logic-work-under-the-default-knockout-js-2-0-template-engine)

# java - Java中的范围（最小值，最大值，值）函数

> ID：10973028
> 
> 赞同：5
> 
> 时间：2012-06-10T22:59:27.587
> 
> 标签：java, methods

有时我们会编写不必要的代码。我的问题很简单：有没有像下面这样的方法？

```
/** @return true if a given value is inside the range. */
public static boolean range(min, max, value) 
```

我在谷歌上没找到。是因为它不存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:48:05.243

您可以创建一个`Range`具有`within`方法的类型化类：

```
public class Range<T extends Comparable<T>> {

    private final T min;
    private final T max;

    public Range( T min, T max ) {
        this.min = min;
        this.max = max;
    }

    public boolean within( T value ) {
        return min.compareTo(value) <= 0 && max.compareTo(value) >= 0;
    }
} 
```

如果一组测试的 min 和 max 相同，您可以将您的`range`对象重用于所有测试。

FWIW，这似乎有点方便！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T03:46:44.700

Apache Commons Lang 有许多 Range 实现，包括[NumberRange](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/math/NumberRange.html)。

Commons Lang 3 有一个[通用的实现](http://commons.apache.org/lang/api/org/apache/commons/lang3/Range.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T23:06:07.040

嗯……

```
value >= min && value <= max 
```

当然，如果您真的需要一个功能，您可以轻松地自己编写它吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T23:06:31.797

它不存在。

一个“明智”的地方是在数学模块中，但因为它在表达式中很简单地表达

```
min < value && value < max 
```

这似乎有点过分了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-11T21:52:03.393

```
public static boolean withinRange(min, max, value){
    return (value >= min && value <= max);
} 
```

# regex - .net/powershell 正则表达式单匹配

> ID：10973032
> 
> 赞同：0
> 
> 时间：2012-06-10T22:59:50.977
> 
> 标签：regex, powershell, .net, multiple-matches

我花了几天时间试图解决这个问题。设法获取要捕获的文本，但我只需要其中一行。我尝试了各种方法，但总是让所有比赛都退还给我。

这行文字出现 3 次

```
<![LOG[Property SerialNumber is now = serial]LOG]!> 
```

使用正则表达式

```
 (?<=Property\sSerialNumber\sis\snow\s\=\s)[^<]+(?=]LOG]!>) 
```

我得到三个匹配的单词serial。我只需要1。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:59:05.077

如果该确切的行出现 3 次，那么[`[Regex]::Matches`](http://msdn.microsoft.com/en-us/library/b9712a7w)当然会返回所有这三个。

[`[Regex]::Match`](http://msdn.microsoft.com/en-us/library/0z2heewz)如果您只对第一个感兴趣，则可以使用。

# windows - Visual C++ 未能包含

> ID：10973036
> 
> 赞同：0
> 
> 时间：2012-06-10T23:00:00.440
> 
> 标签：windows, namespaces, include, c++-cli, clr

我有两个相互依赖的头文件：BarP.h 和 addNewProductForm.h，使用 Microsoft CLR 组件构建，看起来像这样（它们太长，无法完整包含）：
BarP.h：

```
#pragma once

#include "addNewProductForm.h"
#include "editBarOptionsForm.h"
#include "editDecayParamsForm.h"
#include "editExistingItemForm.h"
#include <math.h>
#include <string>
#include <iostream>
#include <fstream>
#include <msclr\marshal.h>

namespace BarPricer3 {

    using namespace std;
    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace msclr::interop;

ref struct productDat{...};
productDat^ createProduct(String^ name,double firstPrice,double lastPrice,double lastDemand){...};
public ref class BarP{
    ...
    private: System::Void createNewProductForm(...){
        BarPricer3::addNewProductForm^ newProductForm = gcnew addNewProductForm;
        newProductForm->ShowDialog(this);
    }
} 
```

addNewProductForm.h

```
#pragma once

#include "BarP.h"
#include <fstream>

namespace BarPricer3 {

using namespace std;
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

public ref class addNewProductForm{
        ...
    private: System::Void createNewProduct(...){
         productDat^ theNewP = createProduct(this->name->Text,Convert::ToDouble(this->firstPrice->Text),Convert::ToDouble(this->lastPrice->Text),Convert::ToDouble(this->lastDemand->Text));
        ...
    }
} 
```

当我尝试编译时，出现以下错误：
错误 8 错误 C2039: 'addNewProductForm' : is not a member of 'BarPricer3' d:...\BarP.h 690 (line 32 in my code)
Error 15 error C2065 : 'productDat' : 未声明的标识符 d:...\addNewProductForm.h 181 （我的代码中的第 19 行）

我可以就这里发生的事情获得任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:10:42.300

您在头文件中有一个循环包含，并且与`#pragma once`指令结合使用会产生错误。您需要删除其中一个（或两者）并用**前向声明**替换它们（可能想用谷歌搜索）。

您可能需要将实现分离到不同的文件中，因为您使用标头中的类型。

您的问题是 中定义的`addNewProductForm.h`使用，以及中定义的使用。（这些是需要前向声明的类）。`productDat``BarP.h``BarP.h``addNewProductForm``addNewProductForm.h`

# coldfusion - 将页码添加到分页数据

> ID：10973039
> 
> 赞同：1
> 
> 时间：2012-06-10T23:00:20.180
> 
> 标签：coldfusion, coldfusion-9

我已经对我的数据实现了分页，但问题是我只有 Next 和 Previous 链接，如下所示：

![在此处输入图像描述](../Images/517299a6e972b1e8783e50f68e6302a1.png)

我想做的是添加页码，我所在的页码作为普通文本，其他页面作为链接。因此，如果我在第 3 页（共 5 页），它看起来像这样：

![在此处输入图像描述](../Images/87c95755a1d6f5d7ff6c8d8eafbe3a1b.png)

这是我到目前为止所拥有的：

```
<cfset data = queryNew("id,name,age,active","integer,varchar,integer,bit")>

<cfloop index="x" from="1" to="50">
<cfset queryAddRow(data)>
<cfset querySetCell(data,"id",x)>
<cfset querySetCell(data,"name","User #x#")>
<cfset querySetCell(data,"age",randRange(20,90))>
<cfset querySetCell(data,"active",false)>
</cfloop>

<cfset perpage = 10>

<cfparam name="url.start" default="1">
<cfif not isNumeric(url.start) or url.start lt 1 or url.start gt data.recordCount or round(url.start) neq url.start>
<cfset url.start = 1>
</cfif>

<h2>Random People</h2>

<cfoutput query="data" startrow="#url.start#" maxrows="#perpage#">
#currentrow#) #name#<br />
</cfoutput>

<p align="right">
[
<cfif url.start gt 1>
<cfset link = cgi.script_name & "?start=" & (url.start - perpage)>
<cfoutput><a href="#link#">Previous Page</a></cfoutput>
<cfelse>
Previous Page
</cfif>
/
<cfif (url.start + perpage - 1) lt data.recordCount>
<cfset link = cgi.script_name & "?start=" & (url.start + perpage)>
<cfoutput><a href="#link#">Next Page</a></cfoutput>
<cfelse>
Next Page
</cfif>
]
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:53:13.397

RIAForge 上有一个非常好的 ColdFusion 开源分页项目：http: [//paginationcfc.riaforge.org/](http://paginationcfc.riaforge.org/)。它涵盖了您需要的一切，并带有许多预定义的样式。至少您可以分析代码并对其进行自定义以满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:06:18.847

这是一个有趣的问题。如何建立您的页面链接列表：

```
<cfset pageList = "">
<cfloop from="1" to="#ceiling(data.RecordCount/perpage)#" index="i">
    <!--- Determine the start record for selected page --->
    <cfset targetRecord = 1 + (perpage * (i - 1))>
    <cfif ceiling(url.start/perpage) NEQ i>
        <cfset link = cgi.script_name & "?start=" & targetRecord>
        <cfset pageList = listAppend(pageList, "<a href=""#link#"">#i#</a>", " ")>
    <cfelse>
        <cfset pageList = listAppend(pageList, i, " ")>
    </cfif>
</cfloop> 
```

现在您可以像这样将 pageList 拖放到导航部分中：

```
<p align="right">
[
<cfif url.start gt 1>
    <cfset link = cgi.script_name & "?start=" & (url.start - perpage)>
    <cfoutput><a href="#link#">Previous Page</a></cfoutput>
<cfelse>
    Previous Page
</cfif>
/
#pageList#
/
<cfif (url.start + perpage - 1) lt data.recordCount>
    <cfset link = cgi.script_name & "?start=" & (url.start + perpage)>
    <cfoutput><a href="#link#">Next Page</a></cfoutput>
<cfelse>
    Next Page
</cfif>
]
</p> 
```

# jquery - jquery - 功能重启

> ID：10973041
> 
> 赞同：1
> 
> 时间：2012-06-10T23:00:41.110
> 
> 标签：jquery

我从来没有在 jquery 中编程过。我正在使用 JQuery Countdown 插件在我调用 php 页面时进行倒计时，但计时器不会重新启动。我需要编写一个重启函数来调用 JQuery Countdown 插件的 'onExpiry' 事件。这是我在 html 页面上的脚本。我正在关注这篇文章： [自动重启/重置倒数计时器](https://stackoverflow.com/questions/932540/auto-restart-reset-countdown-timer) ，但我认为该帖子中的解决方案不起作用，因为与日期有关。我需要随机重启最多 2 小时。谢谢.....

```
$(document).ready(function () {
    function randRange() {
        var newTime = Math.floor(Math.random() * 30001) + 10000;
        return newTime;
    }

    function toggleSomething() {
        $('#timeval').load('ajaxTime.php?randval=' + Math.random());
        clearInterval(timer);
        lollo = parseInt(randRange());
        timer = setInterval(toggleSomething, lollo);
        $('#msg').fadeOut("slow").countdown({ *onExpiry:?????* until : +(lollo / 1000),
            format : 'HMS',
            layout : '<div id="timer">' + '<div class="timer_numbers">{hnn}:{mnn}:{snn}</div>' + '</div>'
        }).fadeIn("slow");
    }
    var timer = setInterval(toggleSomething, 1000);
}); 
```

编辑：

我解决了：

```
$('#msg').countdown({until: +(lollo/1000), onExpiry: function() { setTimeout(function() { $('#msg').countdown('change', {until: +((lollo/1000) - 1)}); }, 1000); }, format: 'HMS', layout:
    '<div id="timer">'+
        '<div class="timer_numbers">{hnn}:{mnn}:{snn}</div>'+
    '</div>'
    }); 
```

如果有人有更好的解决方案，请联系我 pro-zac31[at]libero.it .... !!! 谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:08:25.997

这个怎么样：

```
$(function() {
    function randRange() {
        return Math.floor(Math.random() * 30001) + 10000;
    }

    (function resetTimer() {
        $('#msg').fadeOut("slow", function() {
            $(this).countdown('destroy').countdown({
                until: randRange() / 1000,
                format: 'HMS',
                layout: '<div id="timer">' + '<div class="timer_numbers">{hnn}:{mnn}:{snn}</div>' + '</div>',
                onExpiry: resetTimer
            }).fadeIn("slow");
        });
    })(); //self-execute
}); 
```

# c# - C#：WebBrowser.Document 在文档处理线程结束后中断

> ID：10973042
> 
> 赞同：0
> 
> 时间：2012-06-10T23:00:54.883
> 
> 标签：c#, multithreading, events, browser

我花了整个周末才意识到，当一个文档处理线程完成时，`WebBrowser.Document`对象已损坏且无法使用。

代码如：

```
if (Browser.Document == null) ... 
```

引发异常。

我有一些基于事件的脚本，它们将文档加载到 WebBrowser 并对其执行操作。当所有脚本完成时引发事件。

然后，根据我的文档状态 - 我会运行其他脚本。但是**没有文件**！为什么？它会发生什么？它是否被随机数据破坏、处置、覆盖？

最后一个事件 .Invoke 和测试文档之间没有代码。前一行我有文件，下一行它不见了！怎么了？！

`System.Threading.Thread.CurrentThread.ManagedThreadId`返回这 2 行的其他值。这个杀手有解决方法吗？我现在只找到一种处理方法 - 我可以重新加载文档：

`Browser.Url = Browser.Url.`但这是愚蠢和多余的。

重点是让文档能够使用 WebBrowser 对其执行更多操作。

还有一件事 - 触发我的第一个动作链的线程作为新任务执行。它运行在与在文档上运行的其余代码不同的线程中。我知道这是错的，但我第一次做对了。我没有开始新任务，而是使用 BeginInvoke 异步运行我的脚本。但是这个将整个应用程序挂在代码中的第一个其他调用上。我被困在这里。如果我以错误的方式调用浏览器代码 - 所有多线程应用程序都可以工作，但我在某处丢失了我的文档。如果我称它为正确的、线程安全的方式 - 应用程序只是挂起，我什至无法调试它。代码在调用时死掉，它从不调用它应该调用的方法。当然是默默的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:54:27.740

没有看到一些相关的代码，很难说太多。我的猜测是您试图在一个线程上引用该对象，而不是在它创建的线程上。基于我刚刚必须处理的问题，我的建议是创建对浏览器或文档对象的静态引用。

# css - 添加背景“条”以使用颜色扩展标题图像。或将图像放在 div 条上

> ID：10973043
> 
> 赞同：3
> 
> 时间：2012-06-10T23:00:59.643
> 
> 标签：css, html, stylesheet

我基本上为我的网站制作了一个标题图片，它的侧面有黑色。我想扩展标题，使其适用于带有黑色“条”的用户 Web 浏览器的宽度，就好像标题扩展了他们的整个浏览器一样。

我已经尝试了一些事情，但我无法弄清楚这一点。

这是我现在拥有的示例：

```
#header {
    background: url('img/header.png') no-repeat top center;
    height: 131px;
    }

#headerbg {
    height: 131px;
    width:4000px;
    background-color:#000;
} 
```

在 html 中，我只在 div 中和在 html 中彼此之间都有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:52:51.137

这是一个[**jsFiddle**](http://jsfiddle.net/NPLEm/)，它向您展示了如何将两个 div 分层并使用`background-size`属性来扩展图像，使其与背景颜色的宽度相同。更新：上面的新 jsFiddle 被替换为包含更好的方法来处理这种类型的外观。

**编辑：**这是一个不同的[**jsFiddle**](http://jsfiddle.net/9W3bx/)，它将图像放在里面并居中，允许父容器中多余的背景颜色显示出来。

**编辑 2：**使用上面的编辑小提琴，您可以应用 CSS3/IE 渐变效果，如此[**jsFiddle所示**](http://jsfiddle.net/9W3bx/1/)

**状态：**解决方案是结合使用`center center`的图像`background-position`设置两者。`width and height``100%`

# java - MVC Java 混淆

> ID：10973044
> 
> 赞同：2
> 
> 时间：2012-06-10T23:01:15.157
> 
> 标签：java, model-view-controller

首先让我说这是一个家庭作业，不过我不需要任何编码帮助——当我试图理解如何按照说明所说的实现 MVC 时，我感到迷茫......我已经阅读了很多来自论坛和不同网站的示例（甚至是我为这个数据结构课程编写的两本书），我对MVC 是*什么有很好的理解。*当谈到用代码实现它时，我感到很困惑......

所以这就是老师给我们的工作：

> 类`Driver`（VIEW）、类`List`（MODEL）和类`Tests` （CONTROLLER），使得该类的对象可以存储学生的名字、姓氏、五次考试成绩、平均考试成绩和成绩。添加构造函数和方法来操作存储在对象中的数据。除其他外，您的课程必须包含计算测试平均数、返回测试平均数、计算成绩、返回成绩和修改个人测试分数的方法。该方法`toString()` 必须返回测试数据（包括学生姓名、五个测试分数、平均分和成绩）`String`加上班级平均分。

我确实意识到她标记了哪些类应该是什么，并且我已经制作了这些类......我的困惑是什么类提供什么方法​​/函数/变量等。

该模型应该像数据库一样保存信息....所以我应该创建另一个`Student`具有变量名/姓氏和测试平均值的类吗？但是，哪个类会获得 getter 和 sett 方法呢？

再一次，我搜索了又搜索了，我看到了很多例子，但它只是没有点击我:(

感谢任何可以根据老师所呈现的内容而将其降低到足够程度的人....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:45:33.560

因此，如果 List 是 MODEL，则 List 具有访问、修改、删除和添加元素的方法。就像一个数据库。（提示：这些是 getter 和 setter）。如果 Driver 是 VIEW，那么它应该有方法来显示它需要的任何内容。这应该主要是格式化。如果 Tests 是一个 CONTROLLER，那么它应该具有向 VIEW 提供信息的方法。这些通常是执行计算的方法，例如您指定的方法。

通常一个控制器将视图和模型粘合在一起。

# linux - 将文件从一个用户复制到另一个权限问题

> ID：10973047
> 
> 赞同：1
> 
> 时间：2012-06-10T23:01:25.137
> 
> 标签：linux, git, permissions, gitolite

我有一个拥有 git 存储库的用户“git”。我正在尝试设置一个更新后挂钩，将存储库中的文件复制到 /var/www/site/。我仍然对 linux 中的用户和权限有所了解，这种情况下最好的方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:11:12.587

您可以拥有 git own`/var/www/site/`并为其授予 660 权限（读写，不执行），或者使`/var/www/site/`世界可写（这并不完全是一个好主意，因为任何用户都可以复制、编辑等文件`/var/www/site/`） . [`chown`](http://linux.die.net/man/1/chown)可以帮助您更改所有者，并[`chmod`](http://linux.die.net/man/1/chmod)可以帮助您更改文件权限。

您还可以将 git 添加到拥有 的组中`/var/www/site/`，并确保该组也具有读/写权限`/var/www/site/`。

如果您在 chown、chmod 或任何其他 linux 命令方面需要帮助，[`man`](http://linux.die.net/man/1/man)可以为您提供帮助。

# c# - c# 中的 for each 中的 for 语句

> ID：10973048
> 
> 赞同：0
> 
> 时间：2012-06-10T23:01:27.740
> 
> 标签：c#, foreach

怎么了？基本上要提取表“服务”每一行中的每个代码，如果它等于特定文本，则使用匹配文本设置每个对应行。

```
foreach (DataRow code in dsAuthors.Tables["Service"].Rows)
{

   for (int i = 0; i < dsAuthors.Tables[1].Rows.Count; i++)
    {

        if (code[1].ToString() == "01")
        {
            Shipment.Rows[i][0] = "Service 1";
        }
        else if (code[1].ToString() == "02")
        {
            Shipment.Rows[i][0] = "Service 2";
        }
        else if (code[1].ToString() == "03")
        {
            Shipment.Rows[i][0] = "Service 3";
        }
    }
} 
```

它只是用服务 1 填充所有行，但我不希望它这样做。

抱歉，这两个表并不相同，我相信我已经更新了代码以使其更准确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:06:51.657

您在同一件事上循环了两次，然后将一个值无限地插入到货件行中。它看起来不太安全，并且考虑到您在 foreach 内的整个集合中循环和设置货件行，这意味着最后一个值将确定所有货件行的内容。

在调试器中检查它，您会看到当您点击 Service 2 值时，所有发货行都将在循环中设置为 2 等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T23:10:14.747

您正在对行列表进行两次迭代。您正在从外部循环的变量中读取数据，并从内部循环写入索引。它将“服务 1”写入所有行，因为最后一行是“01”，内部循环将其写入所有行。

试试这个：

```
var Service = dsAuthors.Tables["Service"];
for (int i = 0; i < Service.Rows.Count; i++)
{
    if (Service.Rows[i][1].ToString() == "01")
    {
        Shipment.Rows[i][0] = "Service 1";
    }
    else if (Service.Rows[i][1].ToString() == "02")
    {
        Shipment.Rows[i][0] = "Service 2";
    }
} 
```

# javascript - 仅使用 HTML 和 Javascript 开发？

> ID：10973058
> 
> 赞同：1
> 
> 时间：2012-06-10T23:03:44.217
> 
> 标签：javascript, html

是否可以仅使用 HTML 和 Javascript 开发整个动态网站？我想使用 Javascript HTML 动态服务器。它存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:06:55.810

对的，这是可能的。查看[Node](http://nodejs.org/)，这是一种服务器解决方案上的 Javascript，它可以让您使用通常在 php、perl 或 c#（和朋友）中完成的 javascript 来做事。

# php - facebook api日期转换

> ID：10973061
> 
> 赞同：1
> 
> 时间：2012-06-10T23:04:23.920
> 
> 标签：php, codeigniter, facebook-graph-api

我正在使用 codeigniter 制作我的第一个应用程序，它从 facebook api 中提取生日并将它们放入 mysql 数据库中。来自 facebook api 的日期是 00-00-0000，我需要将它们转换为 0000-00-00。

我正在使用这段代码从 facebook 中提取数据：

```
 try{
        $fql    =   "SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND strlen(birthday_date) > 0";
        $param  =   array(
            'method'    => 'fql.query',
            'query'     => $fql,
            'callback'  => ''
        );
        $fqlResult   =   $facebook->api($param);
    }
    catch(Exception $o){
        d($o);
    }
} 
```

我正在使用这段代码将查询从 api 放到 mysql：

```
this->db->insert_batch('friends_birthdays', $fqlResult); 
```

我是否需要先转义`$fqlresult`字符串，还是在 codeigniter 中有一些有用的东西可以帮助我做到这一点？对不起，如果这听起来很愚蠢，但我是菜鸟，任何帮助将不胜感激。

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:15:11.883

您可以将[日期](http://php.net/manual/en/function.date.php)函数与[strtotime](http://php.net/manual/en/function.strtotime.php)一起使用，例如

```
<?php
  $fqlResult   =   $facebook->api($param);
  for($i=0;$i<count($fqlResult);$i++) {
      $fqlResult[$i]['birthday_date'] = date('Y-m-d', strtotime($fqlResult[$i]['birthday_date']));
  }
  $this->db->insert_batch('friends_birthdays', $fqlResult);
?> 
```

# git - OS X Lion 上的 Sublime Text 2 在 PATH 中找不到 git 二进制文件

> ID：10973063
> 
> 赞同：13
> 
> 时间：2012-06-10T23:05:20.450
> 
> 标签：git, osx-lion, integration, sublimetext2

我刚刚开始在 OS X Lion 上使用我的开发环境，最近使用 Package Control 安装了 Sublime Text 2 和 git 集成。所以，当我按下`CMD`++`SHIFT`时，`P`我会得到所有相关的 git 命令。

但是，每当我使用一个时，我都会收到相同的错误消息：[sublime-git-error](https://dl.dropbox.com/u/1261638/Screen%20Shot%202012-06-10%20at%2012.19.21%20AM.png)

这是我为尝试修复它所做的工作：

我`mdfind -name git`在终端中运行并注意到我的 git install (v. 1.7.10.3) 中的所有二进制文件都位于其中，`/usr/local/git/bin`因此我尝试`~/.profile`使用以下行进行编辑：

```
export PATH="/usr/local/git/bin:/usr/local/bin:/usr/local/sbin:usr/local/lib;/usr/local/mysql/bin:$PATH" 
```

当我`echo $PATH`现在在终端中运行时，目录就在那里列出。

即便如此，我仍然收到与上述相同的错误消息。感谢任何解决方案或指出我所缺少的内容！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-10T23:22:03.070

基本上你需要设置

```
"git_command": "/usr/local/git/bin/git" 
```

在 Packages/User/Git.sublime-settings 或 Packages/Git/Git.sublime-settings

有关更多详细信息，请查看此问题 => [https://github.com/kemayo/sublime-text-2-git/issues/96](https://github.com/kemayo/sublime-text-2-git/issues/96)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T04:07:57.060

直接从提供的链接引用，我使用了一个对我有用的更新的修复：

```
"git_command": "/usr/local/bin/" 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T23:57:54.810

这对我有用（ST3 Mac）：

1.  Sublime Text > Preference > Browse Packages...
2.  打开用户/包控制.sublime-settings
3.  将值编辑`git_binary`为您的 git 的路径。我通过`which git`在终端窗口中输入来获取我的 git 路径，然后将其粘贴进去。

# php - Node + now.js + 模型-视图-控制-模式

> ID：10973071
> 
> 赞同：3
> 
> 时间：2012-06-10T23:06:56.947
> 
> 标签：php, javascript, model-view-controller, node.js, nowjs-sockets

我正在使用基于 MVC 模式（模板和 PHP 类）的论坛软件。页面如下所示： domain.com/index.php?page=Test

我想用 node 和 now.js 在一个页面（domain.com/index.php?page=Chat）上设置一个聊天服务器。现在我遇到一个问题：如何告诉服务器端代码聊天服务器必须在 index.php?page=Chat 上工作 显然我不能这样做：

```
fs.readFile('index.php?page=Chat') 
```

任何想法如何在这样的 URL 上设置节点服务器？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:55:09.283

我会更深入地研究 node.js。由于 node*本身*就是一个网络服务器，你必须了解一些关于路由和服务器配置的工作原理。基本上，您的（可能的）Apache 服务会监听端口 80 上的任何内容。Apache 查看 URI，并决定在您的应用程序中运行哪个脚本来启动一个 php 进程，该进程运行您的代码并生成要发送给用户的网页。

所以当你看到：

```
domain.com/chat 
```

对比

```
domain.com/index.php?page=Chat 
```

那是 Apache 说的，“嘿，你配置我将 '/chat' 读取为 /index.php?page=Chat，所以我将关闭该脚本”。

Node.js 就像 Apache 和 PHP 合二为一。它处理请求并构建页面。因此，当请求进入时，您将让 node.js 和 Apache 互相踩踏。要让*两个*应用程序都侦听端口 80，您必须使用类似以下内容的用户：

[https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)

该节点模块将未处理的服务器请求转发到 Apache，这将允许您拥有混合的 nodejs/apache+php 应用程序。

就模板而言，php 和 javascript 模板不能混合在一起，因为它们是建立在完全不同的语言上的。所以，你几乎不走运。Node 有一个非常丰富的模板引擎列表。其中一些可能与您正在使用的任何语法具有几乎相同的语法，因此移植起来很简单。

[https://github.com/joyent/node/wiki/modules#wiki-template](https://github.com/joyent/node/wiki/modules#wiki-templating)

我希望这回答了你的问题。正如评论的那样，我仍然会使用 iFrame，将节点放在不同的端口上，并保持两种架构的清洁和分离。或者，使用聊天服务，而不必费心设置一个完整的单独应用程序。除非你想学习，在这种情况下，发疯。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T15:55:41.277

您可以在端口说 8080 运行节点服务器，并且可以将客户端 js 作为普通 javascript 包含在任何可以工作的视图文件中

# iphone - 单元格动画，uitableview 单元格

> ID：10973072
> 
> 赞同：1
> 
> 时间：2012-06-10T23:07:20.050
> 
> 标签：iphone, uitableview, core-animation

我正在为 iPhone 下载一个 Pizza Pizza 应用程序。单元格有非常酷的动画。

如果您单击特定单元格，它将向下展开并显示更多控制器。

请查看[链接](http://i.imgur.com/llr5a.png)1（第一个状态）和[链接](http://i.imgur.com/RKOkO.png)2（单击单元格时的第二个状态）

**问题**：实现这个动画的正确方法是什么。

请就这个问题给我建议。欢迎任何意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:00:51.183

这部动画没有什么新鲜的。它非常直截了当，它只取决于您希望如何实现此更改。

例如，从`cells`第一张图片中所示的开始。触摸一个单元格将调用`-didSelectRowAtIndexPath`，您需要增加单元格的大小，并提供新的单元格（这是第二个链接的图像）。调用`tableView reloadData`以实现此更改。使用`UIAnimation`它将使单元格从您的第一个状态动画到第二个状态持续 0.5 秒（您希望它有多快）

确保在动画期间，您的单元格不可选择。 `cell.userInteractionEnabled = NO`

您可以使用其他动画框架来做到这一点，但`UIAnimation`应该做到这一点。（`UIAnimation`如果您需要帮助，请参阅示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T03:44:04.983

您看到的每个单元格都是一个带有按钮的部分标题视图。当您触摸按钮时，表格会重新加载此部分中的数据，然后您可以在此部分中看到真实的单元格视图。单元格视图是具有很多控制器的自定义视图。

# java - 使用 Windows LAF 时按钮的背景颜色？

> ID：10973073
> 
> 赞同：4
> 
> 时间：2012-06-10T23:07:23.530
> 
> 标签：java, swing, jbutton, look-and-feel

我有一个使用本机 LAF 的 Java 应用程序，如下所示：

```
 UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

这很好用，但是，我正在尝试使按钮具有红色背景，但结果如下：

![在此处输入图像描述](../Images/d2528d397b570934b5e490ef310da7e8.png)

如您所见，我在按钮上设置了背景和前景，但结果在视觉上并不令人愉悦。 **有没有办法让按钮在不继承 JButton 的情况下绘制红色背景？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:10:10.847

您必须了解，在 Swing 的 Look & Feel 结构下，是 JButton 的 UI 委托进行绘制，而不是 JButton 本身，因此`setBackground(...)`在这种情况下无法正常工作。您最好在按钮上添加一个图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-29T13:46:23.117

我创建了自己的**CustomColorButton ，在***单击*和*鼠标*上具有**很好的**渐变效果

 **```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

您可以像这样创建一个新按钮：

```
CustomColorButton button = new CustomColorButton(Color.RED, Color.WHITE); // Background and font color
button.setText("Color button!"); 
```

CustomColorButton**类**：

```
public class CustomColorButton extends JButton implements ActionListener, MouseListener
{
    private boolean hovered = false;
    private boolean clicked = false;

    private Color normalColor = null;
    private Color lightColor = null;
    private Color darkColor = null;

    public CustomColorButton(Color normalRedColor, Color fontColor)
    {
        setForeground(fontColor);

        this.normalColor = normalRedColor;
        this.lightColor = normalRedColor.brighter();
        this.darkColor = normalRedColor.darker();

        addActionListener(this);
        addMouseListener(this);
        setContentAreaFilled(false);
    }

    /**
     * Overpainting component, so it can have different colors
     */
    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        GradientPaint gp = null;

        if (clicked)
            gp = new GradientPaint(0, 0, darkColor, 0, getHeight(), darkColor.darker());
        else if (hovered)
            gp = new GradientPaint(0, 0, lightColor, 0, getHeight(), lightColor.darker());
        else
            gp = new GradientPaint(0, 0, normalColor, 0, getHeight(), normalColor.darker());

        g2d.setPaint(gp);

        // Draws the rounded opaque panel with borders
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON); // For High quality
        g2d.fillRoundRect(0, 0, getWidth(), getHeight(), 7, 7);

        g2d.setColor(darkColor.darker().darker());
        g2d.drawRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 7, 7);

        super.paintComponent(g);
    }

    @Override
    public void actionPerformed(ActionEvent arg0)
    {
        System.out.println("Button clicked!");
    }

    @Override
    public void mouseClicked(MouseEvent arg0)
    {

    }

    @Override
    public void mouseEntered(MouseEvent arg0)
    {
        hovered = true;
        clicked = false;

        repaint();
    }

    @Override
    public void mouseExited(MouseEvent arg0)
    {
        hovered = false;
        clicked = false;

        repaint();
    }

    @Override
    public void mousePressed(MouseEvent arg0)
    {
        hovered = true;
        clicked = true;

        repaint();
    }

    @Override
    public void mouseReleased(MouseEvent arg0)
    {
        hovered = true;
        clicked = false;

        repaint();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T23:52:19.203

对于遇到我遇到的问题的任何人，这是我采用的解决方案：

我切换到使用 ImageIcon 添加作为按钮子项的图像：

```
 BufferedImage stopPicture = null;
    try {
        stopPicture = ImageIO.read(new File("stop.png"));
    } catch (IOException ex) { }
    JLabel picLabel = new JLabel(new ImageIcon( stopPicture ));
    JButton btnStop = new JButton("");
    btnStop.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            SerialTest.getInstance().stopMoving();
        }
    });
    btnStop.add(picLabel); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T08:34:05.340

如果“没有子类化”意味着不必自己扩展它，那么您可以选择使用 SwingX JXButton，它将 JButton 扩展为使用画家（以及更多）：

```
JButton button = new JButton();
button.setBackground(bg); 
```

变成

```
JXButton button = new JXButton();
button.setBackgroundPainter(new MattePainter(bg)); 
```

如果您必须坚持使用基本 JButton，我认为没有解决方案，因为您 L&F 的工作方式。**

# asp.net - 基于用户角色的 ASP.NET HTML 生成

> ID：10973079
> 
> 赞同：0
> 
> 时间：2012-06-10T23:08:35.917
> 
> 标签：asp.net

我开发的网站非常简单，我只有三个网页。

1.  登录.aspx
2.  注册.aspx
3.  我的帐户.aspx

登录.aspx 代码：

```
 if (ValidateUser(email, password))
        {
            FormsAuthenticationTicket tkt;
            string cookiestr;
            HttpCookie ck;
            tkt = new FormsAuthenticationTicket(1, txtUserName.Value, DateTime.Now,
                                                DateTime.Now.AddMinutes(3), chkPersistCookie.Checked,
                                                email + "@ticket");
            cookiestr = FormsAuthentication.Encrypt(tkt);
            ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiestr);
            if (chkPersistCookie.Checked)
                ck.Expires = tkt.Expiration;
            ck.Path = FormsAuthentication.FormsCookiePath;
            Response.Cookies.Add(ck);

            string strRedirect;
            strRedirect = Request["ReturnUrl"];
            if (strRedirect == null)
                strRedirect = "MyAccount.aspx";
            Response.Redirect(strRedirect, true);
        }
        else
            Response.Redirect("logon.aspx", true); 
```

注册.aspx 代码：

```
 private bool RegisterUser(string name, string surname, string email, string phone, string pass)
    {
        SqlConnection conn = new SqlConnection(@"Data Source=Server\SQL;Initial Catalog=Db;Integrated Security=True; User ID=user; Password =pass;");
        conn.Open();
        string insertQuery = @"INSERT INTO Users (Email, Name, Surname, Phone, Manager, Rank, Password)
                                VALUES (@Email, @Name, @Surname, @Phone, @Manager, @Rank, @Password)";
        SqlCommand cmd = new SqlCommand(insertQuery, conn);

        cmd.Parameters.Add("@Email", email);
        cmd.Parameters.Add("@Name", name);
        cmd.Parameters.Add("@Surname", surname);
        cmd.Parameters.Add("@Phone", phone);
        cmd.Parameters.Add("@Manager", "Test@Test.com");
        cmd.Parameters.Add("@Rank", "1");
        cmd.Parameters.Add("@Password", pass);

        try
        {
            int rowsAffected = cmd.ExecuteNonQuery();
        }
        catch (Exception e )
        {

            throw;
        }
        finally
        {
            cmd.Dispose();
            insertQuery = string.Empty;
        } 
```

一切都很完美。现在我想要的是 MyAccount.aspx 的 Page_Load：

1.  获取饼干
2.  检查用户角色
3.  基于用户角色显示所需的网站内容。

但我不知道该怎么做。

1.  我应该参考 cookie 来建立用户角色吗？
2.  如何根据用户角色生成 HTML？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:20:09.783

我不认为您想根据角色生成太多 HTML，更像是您希望站点中的内容只能由某些角色访问，即不同的页面和控件。[这个 codeproject 页面](http://www.codeproject.com/Articles/2905/Role-based-Security-with-Forms-Authentication)正在做你需要的。

# directx - 如何根据给定 FOV 和屏幕分辨率的屏幕空间顶点坐标计算视图空间顶点坐标？

> ID：10973080
> 
> 赞同：0
> 
> 时间：2012-06-10T23:08:43.763
> 
> 标签：directx, coordinate-transformation

我正在为一个使用 DX 6.1 并且没有 L&T 的非常古老的游戏编写一个钩子。

我正在使用`float x, y, z, rhw`顶点位置拦截对 DX 的调用，并且我想在视图空间坐标中重建 xyz。我知道 FOV 和屏幕分辨率，但我在寻找反变换公式时遇到了问题。有人可以给我这样的公式，或者指向相关的互联网资源吗？

还有一件事 - 有时我会收到非常奇怪的坐标，例如我设法在调试器中捕获：

```
float x = 105.96786.0f;
float y = 1963.8353.0f;
float z = -2343.6121.0f;
float rhw = 0.0f; 
```

在恢复公式时我应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:09:13.590

@Nico Schertler 在上面的评论中指出我应该使用倒置矩阵 - 这行得通

# objective-c - NSUserDefaults 似乎只适用于较旧的 iOS？

> ID：10973085
> 
> 赞同：0
> 
> 时间：2012-06-10T23:09:41.190
> 
> 标签：objective-c, cocoa-touch, nsuserdefaults

当我在 iOS4.2 上运行以下代码时，会保存默认值。但是当我在 5.0 中运行时，当用户关闭（完全关闭应用程序）时，它们会迷路。

我错过了什么？谢谢

```
- (void) setupSave:(UIButton*)btn
{
    //save IP and Port
    strTcpIpAddress = [tvTcpIpAddress text];
    strTcpPort = [tvTcpPort text];
    [[NSUserDefaults standardUserDefaults] setObject:strTcpIpAddress forKey:@"tcpIpAddress"];
    [[NSUserDefaults standardUserDefaults] setObject:strTcpPort forKey:@"tcpPort"];

    [tvTcpIpAddress resignFirstResponder];
    [tvTcpPort resignFirstResponder];
} 
```

* * *

```
OnStartUp:
    //NSUserDefaults
    strTcpIpAddress = [[NSUserDefaults standardUserDefaults] stringForKey:@"tcpIpAdress"];
    strTcpPort = [[NSUserDefaults standardUserDefaults] stringForKey:@"tcpPort"];

    //userName = NULL;
    if(strTcpIpAddress == NULL) strTcpIpAddress = @"10.0.0.7";
    if(strTcpPort == NULL) strTcpPort = @"4000"; 
```

列表：

![在此处输入图像描述](../Images/fbeb52a4f879a009b17997924058f984.png)

# php - facebook api 贴到墙上

> ID：10973091
> 
> 赞同：0
> 
> 时间：2012-06-10T23:10:24.687
> 
> 标签：php, facebook-graph-api, post

我目前可以发布到用户墙上，但是我希望发布预览，因为我发布的是链接......

为了更好地解释自己如果我要登录我的 Facebook 帐户并复制一个链接并将其粘贴到我的墙上，它会显示一个音频播放器（所有元数据都已经配置、测试和工作）但是，使用代码发布这个相同的链接它不显示音频播放器，而只显示要单击的链接。有没有办法让 facebook 显示音频播放器...？

这是我用来发布的代码：

```
$fbResult = $facebook->api( 
    '/' . $userId . '/feed/', 
    'post', 
    array('access_token' => $access_token, 'message' => $url) 
); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:23:00.190

我假设您将 URL 作为`message`参数的一部分发布？

通过显式使用`link`URL 的参数来执行此操作。

[https://developers.facebook.com/docs/reference/api/user/#links](https://developers.facebook.com/docs/reference/api/user/#links)

# c++ - 比较字符串的一部分

> ID：10973092
> 
> 赞同：0
> 
> 时间：2012-06-10T23:10:38.930
> 
> 标签：c++, logic

好的，这就是我想要完成的。

首先，下表只是我创建的一个示例，在我的作业中，我不应该知道其中任何一个。这意味着我不知道他们会通过什么以及每个字符串的长度是多少。

我正在尝试完成一项任务是能够比较字符串的一部分

```
 //In Array `phrase`       // in array `word`
   "Backdoor",        0        "mark"         3 (matches "Market")
   "DVD",             1        "of"           2 (matches "Get off")
   "Get off",         2        ""            -1 (no match)
   "Market",          3        "VD"           1 (matches "DVD") 
```

因此，您可以从左侧的上述代码中看到一组数组，我将它们存储在我的班级中，它们最多有 10 个单词

这是类定义。

```
class data
{
    char phrase[10][40];
public:
    int match(const char word[ ]);
}; 
```

所以我使用成员函数来访问这些私有数据。

```
int data::match(const char word[ ])
{
    int n,
    const int wordLength = strlen(word);

    for (n=0 ; n <= 10; n++)
    {
        if (strncmp (phrase[n],word,wordLength) == 0)
        {
            return n;
        }
    }

    return -1;
} 
```

我试图使其工作的上述代码是它应该匹配并且如果它找到匹配则返回`n`如果没有找到则返回索引应该总是返回`-1`。

现在发生的事情总是回报`10`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:38:53.940

你快到了，但你的代码不完整，所以我在一些事情上摸不着头脑。

您可能有一个太多的变量来表示一个索引。除非`n`和`i`不同，否则您应该只使用一个。也尝试使用更具描述性的名称，`pos`似乎代表您正在搜索的文本的长度。

```
for (n=0 ; n <= searchLength ; n++) 
```

由于`word`从不改变的长度，你不需要`strlen`每次都打电话。在`for`循环之前创建一个变量来存储长度。

```
const int wordLength = strlen(word); 
```

我假设您正在搜索的文本存储在一个`char`数组中。这意味着您需要将指针传递给存储在的第一个元素`n`。

```
if (strncmp (&phrase[n],word,wordLength) == 0) 
```

最后，您会得到如下所示的内容：

```
char word[256] = "there";
char phrase[256] = "hello there hippie!";

const int wordLength = strlen(word);    
const int searchLength = strlen(phrase);

for (int n = 0; n <= searchLength; n++)
{
    // or phrase + n
    if (strncmp(&phrase[n], word, wordLength) == 0)
    {
        return n;
    }
}

return -1; 
```

注意：最后一个示例现在已经完成，可以返回匹配项了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:50:42.977

I'm puzzled about your problem. There are some cases unclear. For eaxmple

```
abcdefg --- abcde     Match "abcde"?
```

how many words match? any other examples,

```
abcdefg --- dcb     Match "c"?
```

and

```
abcdefg --- aoodeoofoo     Match "a" or "adef"?
```

if you want to find the first matched word, it's OK and very simple. But if you are to find the longest and discontinuous string, it is a big question. I think you should have a research about LCS problem (Longest Common Subsequence)

# perl - 如何确定数组的元素是否与另一个数组的任何元素匹配？

> ID：10973097
> 
> 赞同：3
> 
> 时间：2012-06-10T23:11:26.260
> 
> 标签：perl

如果我有一个哈希

```
my %foo = ( foo => 1, bar => 1 ); 
```

我想检查是否有任何键`%foo`在比较数组中（显然键 %foo 只是一个数组）。我一直在想一些不存在的奇怪语法。

```
my @cmp0 = qw( foo baz    );
my @cmp1 = qw( baz blargh );

if keys %foo in @cmp0 # returns true because key foo is in the array
if keys %foo in @cmp1 # returns false because no key in foo is an element of cmp1 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T01:28:54.510

[List::MoreUtils](http://search.cpan.org/perldoc?List::MoreUtils)有一个调用的函数`any`，它使用类似于 的语法`grep`，但在第一次满足条件时停止其内部循环。这种行为的优点是需要的迭代次数要少得多（假设交叉点的随机分布）。

另一个优点`any`是代码清晰：它以它的作用命名。Perl 最佳实践不鼓励`grep`在布尔上下文中使用，因为假定使用 for`grep`是返回匹配的元素列表。它在布尔上下文中工作，但对于读者来说，代码的意图不如`any`专门为布尔使用而设计的那样清楚。

确实`any`添加了对 List::MoreUtils 的依赖。然而，List::MoreUtils 是那些无处不在的模块之一，它很可能已经安装了。

这是一个例子：

```
use List::MoreUtils qw( any );

my %foo = ( foo => 1, bar => 1 );

my @cmp0 = qw( foo baz    );
my @cmp1 = qw( baz blargh );

print "\@cmp0 and %foo have an intersection.\n" 
    if any { exists $foo{$_} } @cmp0;

print "\@cmp1 and %foo have an intersection.\n"
    if any { exists $foo{$_} } @cmp1; 
```

另一个选项是`~~` [Smart Match Operator](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)，它在 Perl 5.10.0 和更新版本中可用。它可以这样使用：

```
my %foo = ( foo => 1, bar => 1 );

my @cmp0 = qw( foo baz    );
my @cmp1 = qw( baz blargh );

print "\@cmp0 and %foo have an intersection.\n" if @cmp0 ~~ %foo;

print "\@cmp1 and %foo have an intersection.\n" if @cmp1 ~~ %foo; 
```

使用 smartmatch，您消除了 List::MoreUtils 依赖，取而代之的是最小的 Perl 版本依赖。代码是否像`any`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T00:42:23.317

最简洁的写法是和操作符`grep`一起使用`exists`。

这段代码

```
my %foo = ( foo => 1, bar => 1 );

my @cmp0 = qw( foo baz    );
my @cmp1 = qw( baz blargh );

print "YES 0\n" if grep { exists $foo{$_} } @cmp0;
print "YES 1\n" if grep { exists $foo{$_} } @cmp1; 
```

给出这个输出

```
YES 0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T00:59:52.820

`grep`是个好主意，而且可能是最干净的。但是，您也可以使用[逻辑 OR 赋值运算符`||=`](http://perldoc.perl.org/perlop.html#Assignment-Operators)：

```
my $found;
$found ||= exists $foo{$_} for @cmp1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T08:45:55.233

这些都是简单的**集合操作**。

```
use strictures;
use Set::Scalar qw();
⋮
my $foo = Set::Scalar->new(keys %foo);
$foo->intersection(Set::Scalar->new(@cmp0))->size; # 1
$foo->intersection(Set::Scalar->new(@cmp1))->size; # 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T00:16:11.827

有 - 像往常一样 - 更多的方法来解决这个问题。你可以这样做：

```
#!/usr/bin/perl

use strict ;
use warnings ;

my %hash = ( foo => 1 , bar => 1 ) ;
my %cmp = ( cmp0 => [ qw(foo baz) ] ,
            cmp1 => [ qw(baz blargh) ] ) ;

my @hash_keys = keys %hash ;
foreach my $compare ( keys %cmp ) {
  my %tmp ;
  # Generate a temporary hash from comparison keys via hash slice
  @tmp{@{$cmp{$compare}}} = undef ;
  INNER:
  foreach my $hash_key ( @hash_keys ) {
    if( exists $tmp{$hash_key} ) {
      printf "Key '%s' is part of '%s'.\n" , $hash_key , $compare ;
      last INNER ;
    }
  }
} 
```

这给出了：

```
Key 'foo' is part of 'cmp0'. 
```

# mysql - SQL - 为另一个数字插入一个数字

> ID：10973103
> 
> 赞同：0
> 
> 时间：2012-06-10T23:14:06.133
> 
> 标签：mysql, sql

如果在列中找到另一个数字，我正在尝试向 SQL 语句添加输出数字的能力。基本上，将一个数字映射到一个给定的值，这样我们就可以在 Excel 中计算佣金。我们有一个名为 PaymentMethodID 的值，它声明它是哪种付款方式。现金 (1)、支票 (2)、信用卡 (3) 或 PayPal (4)。销售代表佣金会根据使用的付款方式而变化，因此现在我们手动编辑电子表格以制作报告。

我想创建一个名为“Commission %”的列，它根据 PaymentMethodID 中的内容输出一个小数。

例子

```
   SalesRep OrderValue PaymentMethodID 佣金%
   萨拉 100.00 1 15%
   萨拉 80.00 2 15%
   萨拉 350.00 1 15%
   萨拉 200.00 3 12.5%

```

如何创建“佣金百分比”列并将 PaymentMethodID 映射到百分比？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T23:21:54.090

干净的方法是创建一个`PaymentMethods`包含佣金的表格（或扩展您的`PaymentMethods`表格，如果您已经有一个）。

就像是

```
CREATE TABLE PaymentMethods (
  PaymentMethodID INT NOT NULL,
  CommissionPerc FLOAT
);

INSERT INTO PaymentMethods VALUES
  (1,15), (2,15), (3,12.5); 
```

然后简单地加入表，类似于

```
SELECT 
  Sales.SalesRep, 
  Sales.OrderValue
  Sales.PaymentMethodID,
  PaymentMethods.CommissionPerc
FROM
  Sales
  INNER JOIN PaymentMethods ON Sales.PaymentMethodID=PaymentMethods.PaymentMethodID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T23:18:44.337

使用 CASE 语句。像这样的东西：

```
SELECT
        SalesRep,
        OrderValue,
        PaymentMethodID,
        CASE
            WHEN PaymentMethodID = 1 THEN 15.00
            WHEN PaymentMethodID = 2 THEN 15.00
            WHEN PaymentMethodID = 3 THEN 12.50
        END as CommisionPercent
FROM SomeTable 
```

# java - Internet 请求第一次有效，但后续请求无效

> ID：10973104
> 
> 赞同：2
> 
> 时间：2012-06-10T23:14:29.323
> 
> 标签：java, android

在第一次请求时，它会进入互联网并检索数据。当我再次尝试时，它只会给我输入流中已经存在的数据。如何清除缓存的数据，以便每次都执行新请求？

这是我的代码：

```
InputStreamReader in = null;
in = new InputStreamReader(url.openStream());
response = readFully(in);
url.openStream().close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:27:19.703

您可以创建 URLConnection 并显式设置缓存策略：

```
final URLConnection conn = (URLConnection)url.openConnection();
conn.setUseCaches(false); // Don't use a cached copy.
InputStream in = new BufferedInputStream(urlConnection.getInputStream()); 
```

有关更多详细信息，请参阅[Android URLConnection 文档](http://developer.android.com/reference/java/net/URLConnection.html#setUseCaches%28boolean%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:34:36.413

HttpClient API 可能有用

```
address = "http://google.com"
String html = "";
HttpClient httpClient = DefaultHttpClient();
HttpGet httpget = new HttpGet(address);
BufferedReader in = null;
HttpResponse response = null;
response = httpClient.execute(httpget);
in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String l = "";
String nl = System.getProperty("line.seperator");
while ((l = in.readLine()) != null) {
    sb.append(l + nl);
}
in.close();
html = sb.toString(); 
```

您需要捕获一些异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:16:01.483

每次重新创建 URL 对象。

# java - Java：将私有内部类返回给外部代码

> ID：10973108
> 
> 赞同：0
> 
> 时间：2012-06-10T23:15:09.470
> 
> 标签：java, list, private, internal

我最近刚开始学习 Java，来自 C# 背景。

当我开始使用 Collections 时，我注意到**Arrays.asList()**返回一个`ArrayList<T>`对象。

但是，我不明白的是，根据“ [docjar](http://www.docjar.com/html/api/java/util/Arrays.java.html "文档") ”（第 2834 行）的代码清单，将其标记`ArrayList<T>`为*private*。

如何使用已明确标记为对我隐藏的对象？或者（这就是我所怀疑的），*private*与我假设的含义是否有某种不同的含义？

（另外，我注意到该类被标记为静态，这也让我感到困惑，但我会在一个单独的问题中问这个问题）

* * *

编辑：C# 中引发编译器错误的示例：

```
public class PubClass {
        private class Blah {

        }

        public Blah GetBlah() {
            return new Blah();
        }
} 
```

给出：*不一致的可访问性：返回类型“Namespace.PubClass.Blah”比方法“Namespace.PubClass.GetBlah()”更难访问*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T23:21:04.323

`ArrayList`返回给您的 实现以及该`List`接口中包含的所有方法。由于`List`是公开的，因此您了解这些方法并可以调用它们。

私有的原因是因为它没有理由公开：除了接口提供`ArrayList`的功能之外，它不提供任何其他功能。`List`

/edit
你的例​​子没有模仿这里发生的事情：

```
public interface List<T> {
    /** snip */
}

public class Arrays {
    private static class ArrayList<T> implements List<T> {
        /** snip */
    }

    public <T> List<T> asList(T... arr) {
        return new ArrayList<>(arr);
    }
} 
```

在您的示例中，您试图返回外部调用者不知道的私有类的实例。在这个`Arrays`例子中，返回的对象实际上是一个`List`（看看返回类型），而不是一个私有的`ArrayList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:23:09.013

私有意味着标记为私有的类/字段/方法只能在当前范围内访问 - 它定义在其中的类。这意味着您从外部无法实例化新的 ArrayList，如 Arrays 类中给出的那样。但是，类中的成员可以像`asList(T... a)`方法一样使用类。

返回类型实际上是 a `List<T>`，一个 的超类`ArrayList<T>`，因此您可以使用它，因为它是一个公共类，具有您的程序已知的方法。

该类被标记为静态，因为它不必是动态的；类的定义不会随着 的每个新实例而改变`Arrays`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:24:44.567

私有只是意味着它不能通过其接口在类之外访问。例如，您不能执行以下操作：`myObject.m_privateVariable`. 所发生的只是`asList`“getter”返回对私有变量的引用，因此通过受控方式公开它。

使用访问器（请参阅[mutator 方法](http://en.wikipedia.org/wiki/Accessor)）允许类控制对该数据的访问。例如，您可能会在返回私有变量之前对其进行一些操作，如果您让世界直接访问所有成员变量，您将无法在一次调用中完成。

# php - 为下个月的某个日期生成时间戳

> ID：10973110
> 
> 赞同：-2
> 
> 时间：2012-06-10T23:15:33.420
> 
> 标签：php, time, timestamp

我需要为下个月的确切日期生成时间戳。

我想自动生成下个月 10 日的时间戳。

我尝试玩 strtotime 但无法解决。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:18:34.720

尝试这个：

```
echo date('Y-m-d', strtotime(date('Y-m-10'). '+1 month')); 
```

# c++ - 在错误输入/行为上退出 C/C++ 程序的“正确”方式

> ID：10973113
> 
> 赞同：3
> 
> 时间：2012-06-10T23:16:07.553
> 
> 标签：c++, c, exit

快速提问.. 是否有一种“正确”的方法可以在输入无效时从 C/C++ 程序终止？到目前为止，我在 C/C++ 方面的职业生涯涉及到这样的事情：

```
// C
#include <stdio.h>
int main(int argc, char **argv)
{
    if (argc != 3) {
        fprintf(stderr, "Error: Usage: %s [some param] [some param]\n", argv[0]);
        return 1;
    }

    /* rest of program */

    return 0;
} 
```

在 C++ 中，它可以是`cerr`代替`fprintf(srderr...)`and`iostream`而不是 or `stdio.h`。

这是一种好的/可接受的方式，还是有一个我不知道的标准？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T23:16:53.790

基本约定是返回一个*非零*值以指示退出时的某些错误情况。返回值*为零*用于指示程序正常终止。

没有什么可以阻止您提出非零值列表并将它们与特定错误条件相关联，以便可以根据退出值识别特定错误。

例如，如果一个 shell 程序正在运行您的程序，那么它可以通过检查退出值来采取适当的措施。*stderr*的错误消息对我们很有用，但退出值可以通过编程方式使用并提供额外的灵活性。

通常值 0 - 127 会根据[作业崩溃和退出代码保留供您使用，其余的供系统使用](http://www.slac.stanford.edu/BFROOT/www/Computing/Environment/Tools/Batch/exitcode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:24:07.103

在 DOS .bat 文件的世界中，成功执行的程序返回 0 是惯例，然后由`%ERRORLEVEL%`批处理文件中的值检查。非零值表示出了问题，返回的确切值实际上取决于程序员，应该在某处记录。[更多在这里](http://technet.microsoft.com/en-us/library/bb490954.aspx)

[Unix非常相似，但根据这个](http://ry.ca/blog/tag/errorlevel/)似乎有更多的规范

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T04:51:47.043

或者，您可以调用`exit()`函数，而不是`return`. 即在 main 内，`retrun exp`等价于`exit(exp)`. exit 的参数可用于任何调用 this 的进程，因此程序的成功或失败可以由另一个使用 this 作为子进程的程序来测试。按照惯例，返回值 0 表示一切正常；非零值通常表示异常情况。

`exit`优点是可以从其他函数调用。

# android - 在Android中布置如果太大会缩小的ImageButtons

> ID：10973114
> 
> 赞同：1
> 
> 时间：2012-06-10T23:16:09.027
> 
> 标签：android, android-layout, android-relativelayout, imagebutton

我正在开发一个 Android 应用程序的主屏幕，我试图在 android 中按以下方向布置 4 个 ImageButtons：

```
a | b
_____

c | d 
```

例如A在屏幕左上角居中，b在屏幕右上角居中，c在屏幕左下角居中，d在屏幕右下角居中。所有图像都是 512x512 像素，因此，由于它们非常大，如果屏幕尺寸很小，应该自动缩小。我不关心拉伸它们。

我已经在 Android 中尝试了所有不同类型的布局，但我很难弄清楚这一点，经过 2.5 小时的实验和研究，我正在寻求帮助。有谁知道如何执行此操作或执行此操作的示例开源应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:24:01.203

您应该在 LinearLayouts 和 ImageButtons 以及`ImageButton`ScaleTypes 上设置权重，以使其`fitXY`喜欢

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1.0"
        android:orientation="horizontal>
        <ImageButton
            android:src="@drawable/myimage1"
            android:layout_height="fill_parent"
            android:layout_width="0dp"
            android:layout_weight="1.0"
            android:scaleType="fitXY"/>
        <ImageButton
            android:src="@drawable/myimage2"
            anroid:layout_height="fill_parent"
            android:layout_width="0dp"
            android:layout_weight="1.0"
            android:scaleType="fitXY"/>
    </LinearLayout>
    <LinearLayout
         //same as above horizontal layout with same children for buttons 3 and 4
    </LinearLayout>
</LinearLayout> 
```

重量根据儿童总重量的百分比划分空间。因此，如果两个孩子的体重均为 1.0，他们将获得 50% 的空间。为了使权重作用于该视图，您应该指定您希望权重计算为 0dp 的维度。ScaleType`fitXY`只是将图像放入`ImageButton`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:46:02.603

编辑：似乎趋势是在发布代码之前或之后有某种解释。下面的解决方案由数量不正常的 LinearLayouts 和嵌套权重组成。我首先将屏幕分成上下两部分，然后再将它们分别分成左右两半（注意交替的方向）——给我们四分之一。我假设您希望您的图像位于该区域中心的某个位置，因此我们通过嵌套 weightSum=3 LinearLayouts 将其进一步划分为 9 个 3x3 矩形。最后一步是将 ImageButton（我有 ImageView，但这不重要）放在 3x3 网格的中间 LinearLayout，并给它一个 centerInside 的**scaleType**- 如果您有足够大的图像并且不必担心拉伸它以填充您的布局，则此 scaleType 是完美的。另外，它不会扭曲纵横比。此外，一个重要因素是使用**android:src**而不是 android:background，因此 ImageView 会尊重 scaleType。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="2">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:weightSum="2"
        android:orientation="horizontal">
        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="3"
            android:orientation="vertical">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:orientation="horizontal"
                android:weightSum="3">
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/ic_launcher"
                        android:scaleType="centerInside">
                    </ImageView>
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="3"
            android:orientation="vertical">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:orientation="horizontal"
                android:weightSum="3">
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/ic_launcher"
                        android:scaleType="centerInside">
                    </ImageView>
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:weightSum="2"
        android:orientation="horizontal">
        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="3"
            android:orientation="vertical">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:orientation="horizontal"
                android:weightSum="3">
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/ic_launcher"
                        android:scaleType="centerInside">
                    </ImageView>
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:weightSum="3"
            android:orientation="vertical">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:orientation="horizontal"
                android:weightSum="3">
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/ic_launcher"
                        android:scaleType="centerInside">
                    </ImageView>
                </LinearLayout>
                <LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="1">
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1">
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

# sql - 格式化 SQL 查询以不同方式显示

> ID：10973116
> 
> 赞同：2
> 
> 时间：2012-06-10T23:16:31.780
> 
> 标签：sql, sql-server, tsql

我是编写查询的初学者，并且一直在绞尽脑汁试图找出最好的方法是什么。我创建了一个临时表并编写了一个查询来为我提供以下数据这个来自以下数据的结果。

```
SELECT Temp.OrderType,Temp.OrderDate,COUNT(*) as prodCount
FROM Temp
GROUP BY Temp.OrderType, Temp.OrderDate
ORDER BY Temp.OrderType; 
```

**结果**

```
OrderType    OrderDate                  prodCount
1            2012-06-04 00:00:00.000    1
1            2012-06-06 00:00:00.000    1
2            2012-06-07 00:00:00.000    2
3            2012-06-05 00:00:00.000    1
3            2012-06-06 00:00:00.000    2
3            2012-06-07 00:00:00.000    1
7            2012-06-05 00:00:00.000    1
11           2012-06-07 00:00:00.000    1 
```

我怎样才能让数据以这种格式显示，而不是计数总数低于日期？Date1 Date2 等，分别是 6/04、6/05、6/06、6/07。任何帮助或指导表示赞赏。谢谢！

```
OrderType Date1 Date2 Date3 Date4
1            1                1
2                             2
3                1      2     1
4
7                1
11                      1 
```

**样本数据**

```
OrderDate                  OrderType
2012-06-06 00:00:00.000    1
2012-06-04 00:00:00.000    1
2012-06-05 00:00:00.000    7
2012-06-05 00:00:00.000    3
2012-06-06 00:00:00.000    3
2012-06-06 00:00:00.000    3
2012-06-07 00:00:00.000    3
2012-06-07 00:00:00.000    2
2012-06-07 00:00:00.000    2
2012-06-07 00:00:00.000    3
2012-06-07 00:00:00.000    11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:48:27.347

If your DB engine is MSSQL, try this:

```
SELECT OrderDate, 
OrderType_1 = SUM(CASE OrderType WHEN 1 THEN 1 ELSE 0 END),
OrderType_2 = SUM(CASE OrderType WHEN 2 THEN 1 ELSE 0 END ),
OrderType_3 = SUM(CASE OrderType WHEN 3 THEN 1 ELSE 0 END),
OrderType_4 = SUM(CASE OrderType WHEN 4 THEN 1 ELSE 0 END),
OrderType_7 = SUM(CASE OrderType WHEN 7 THEN 1 ELSE 0 END),
OrderType_11= SUM(CASE OrderType WHEN 11 THEN 1 ELSE 0 END)
FROM Temp
GROUP BY OrderDate
ORDER BY OrderDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:17:25.453

请试试这个

```
 DECLARE @sql varchar(4000)

    SET @sql =
        '
        SELECT  * 
        FROM    
        (
            SELECT OrderType,CONVERT(VARCHAR(10),OrderDate,112) AS OrderDate,prodCount 
            FROm t 
        )  st
        PIVOT 
        (
        SUM(prodCount)
        FOR OrderDate IN ( '
        +  
        STUFF(
            (
             SELECT ',['  + OrderDate + ']'
             FROM 
                (SELECT distinct CONVERT(VARCHAR(10),OrderDate,112) AS OrderDate  FROM t)  a
             FOR XML PATH('')
             ),1,1,'')
        + ')
        ) as pvt
        ORDER BY pvt.OrderType
        '

    PRINT @sql
    EXEC(@sql) 
```

[SQLFiddle 链接](http://sqlfiddle.com/#!3/dd7df/1)

# mediaelement.js - 从源代码中隐藏 mp3

> ID：10973119
> 
> 赞同：0
> 
> 时间：2012-06-10T23:17:15.370
> 
> 标签：mediaelement.js

[我在http://www.lowerfrequencies.com/](http://www.lowerfrequencies.com/)上经营一个音乐博客，我喜欢使用 mediaelements 流式传输我发布的 mp3。在我的一篇文章的源代码中，您会看到如下内容：

```
audio id="wp_mep_1" controls="controls" src="http://www.lowerfrequencies.com/wp-
content/uploads/2012/mp3s/08%20November%20Skies%20feat.%20Nina%20Kinert.mp3"
preload="none" class="mejs-player " data-mejsoptions='{"features":
["playpause","current","progress","duration","volume","tracks","fullscreen"],
"audioWidth":400,"audioHeight":30}'> 
```

如您所见，mp3 的链接是可见的，任何人都可以继续下载它。我想要的是隐藏 mp3，这样即使他们查看源代码，他们也无法找到它。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:19:10.407

不，没有。在某些时候，浏览器需要获取您提供的 MP3 文件。用户可以使用浏览器的调试功能，或使用中间代理来拦截 MP3 数据。

你可以让它变得更难，但绝不是不可能的。

# php - 从选定的设置 PHP 变量 在下拉列表中

> ID：10973121
> 
> 赞同：0
> 
> 时间：2012-06-10T23:17:19.940
> 
> 标签：php, variables, drop-down-menu

我有一个包含两个`<select>`下拉列表的 index.php，这两个下拉列表都是通过包含在索引文件中的 functions.php 文件中的函数从 MySQL 数据库中填充的。

第一个框是这样填充的：

```
function getCities() {
    $query = "SELECT DISTINCT city FROM nights";
    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
            $items[] = array( $row[0], $row[1] ); 
            echo "<option value='" . $row['city'] . "'>" . $row['city'] . "</option>";
        }         
    }
} 
```

我想要做的是将所选的值`<option>`（就我目前的目的，下拉列表中只有一个`<option>`）或其名称/ID 设置为 PHP 变量，以便可以在其他地方使用。我已经尝试使用`$row['city']`第二个函数并将其放在 while 循环中，但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:14:00.723

这相对容易，我认为你想多了，

```
function getCities() {
    $query = "SELECT city_id, city FROM nights";

    $rows = $db->fetch_all_array($query);
      foreach($rows as $row){
    echo "<option value='$row[city_id]'>$row[city]</option>";
} 
```

# facebook-graph-api - 您必须至少选择一个上市平台才能显示

> ID：10973122
> 
> 赞同：6
> 
> 时间：2012-06-10T23:17:36.000
> 
> 标签：facebook-graph-api

我正在创建一个简单的应用程序，当我尝试保存更改时出现此错误：

“您必须至少选择一个列出的平台才能显示。”

请在此处查看屏幕截图：

[http://panstickers.com.au/webimages/fb_error.gif](http://panstickers.com.au/webimages/fb_error.gif)

我试图谷歌，但找不到任何东西。请帮忙。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:18:49.010

根据：http: [//developers.facebook.com/docs/guides/appcenter/](http://developers.facebook.com/docs/guides/appcenter/)

您首先必须转到设置页面并在底部使用刻度线指定其中一个选项。

# javascript - 如何在Javascript中制作自定义对象？

> ID：10973123
> 
> 赞同：8
> 
> 时间：2012-06-10T23:17:45.960
> 
> 标签：javascript, oop, class, object, prototype

> **可能重复：**
> [如何在 JavaScript 中“正确”创建自定义对象？](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript)

抱歉，如果之前已经回答过这个问题，但是对于在 Javascript 中创建自定义对象所提供的选择数量，我有点不知所措。我不确定它们各自的优点或缺点，或者它们是否完全不同。

以下是我发现的一些构造对象的不同方法：

**1：新对象**

```
person = new Object()
person.name = "Tim Scarfe"
person.height = "6Ft"

person.run = function() {
    this.state = "running"
    this.speed = "4ms^-1"
} 
```

**2：字面符号**

```
timObject = {
    property1 : "Hello",
    property2 : "MmmMMm",
    property3 : ["mmm", 2, 3, 6, "kkk"],
    method1 : function(){alert("Method had been called" + this.property1)}
}; 
```

**3：功能**

```
function AdBox() {
    this.width = 200;
    this.height = 60;
    this.text = 'default ad text';
    this.prototype.move = function() {
        // code for move method goes here
    }
}
this.prototype.display = function() {
    // code
} 
```

我什至看到了更多的方法，但它们似乎不太常见。如您所见，当有人只想要一个带有字段和方法的简单对象时，我不确定标准是什么。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:30:57.067

第一个和第二个选项在功能上是相同的。大多数开发人员选择使用文字表示法，因为它更短一些。

第三个选项通常只在您希望创建可重用对象（即继承）时使用。在这种情况下，该函数充当“构造函数”——它是一个返回一个新对象实例的函数，该实例可以继承构造函数原型中定义的方法和属性。

# python - 将多个项目插入数据库错误

> ID：10973124
> 
> 赞同：0
> 
> 时间：2012-06-10T23:17:52.153
> 
> 标签：python, sqlite, flask

我对 Flask/SQLite 不是很熟悉，但我正在尝试一次性将多个项目插入数据库。

```
g.db.execute('insert into images(fileName, fileTitle, file_height, file_width, file_size) values (?,?,?,?,?)', filename, request.form['title'], fileMetaData['height'], fileMetaData['width'], fileMetaData['fileSize']) 
```

跑步给了我一个

> TypeError：函数最多接受 2 个参数（给定 6 个）

这样做的最佳方法是什么？我理解这个错误，但我不明白我应该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:21:06.237

我相信论点必须是一个元组：

```
g.db.execute('insert into images(fileName, fileTitle, file_height, file_width, file_size) values (?,?,?,?,?)', (filename, request.form['title'], fileMetaData['height'], fileMetaData['width'], fileMetaData['fileSize'])) 
```

# java - Java writer 输出中的第一个字符（int）错误

> ID：10973128
> 
> 赞同：0
> 
> 时间：2012-06-10T23:18:31.357
> 
> 标签：java, int, character, writer

我正在尝试用Java编写一个编写器，它从`ArrayList`第一行和第一列的整数值和`float[][]`其余的整数值中取出并将其格式化为CSV。这样做我的第一列变得很奇怪，我找不到问题。如果有任何建议或帮助，我将非常高兴。这是我的代码：

```
public static void resulttofile(List<Nm_item> nmvector,
        float[][] cor_matrix, String filename) {
    try {
        FileWriter writer = new FileWriter(new File(filename + ".csv"));
        for (int i = nmvector.get(0).row; i <= nmvector
                .get(nmvector.size() - 1).row; i++) {
            writer.write(sepw + nmvector.get(i).nm);
        }
        writer.write(System.getProperty("line.separator"));
        for (int i = nmvector.get(0).row; i <= nmvector
                .get(nmvector.size() - 1).row; i++) {
            writer.write(nmvector.get(i).nm);

            for (int j = nmvector.get(0).row; j <= nmvector.get(nmvector
                    .size() - 1).row; j++) {
                writer.write(sepw + cor_matrix[i][j]);
            }
            writer.write(System.getProperty("line.separator"));
        }

        writer.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Results saved to " + filename + ".csv");
} 
```

和输出（裁剪）：

```
 350 351 352 353
?   0   0.003   0.171   0.001
?   0.003   0   0.274   0
è   0.163   0.271   0   0.345
Ü   0   0   0.35    0
?   0.008   0.019   0.326   0.044
?   0.008   0.016   0.199   0.015
?   0.015   0.037   0.361   0.04
?   0.029   0.023   0.171   0.023
?   0.038   0.042   0.186   0.038 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:22:34.960

尝试：

```
writer.write(Integer.toString(nmvector.get(i).nm)); 
```

或者，正如 OldCurmudgeon 所说：

```
writer.write("" + nmvector.get(i).nm); 
```

关键是[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)包含不止一种`write`方法。有[write(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Writer.html#write%28int%29)和[write(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Writer.html#write%28java.lang.String%29)。第一个不写数字，它写与给定数字对应的字符，所以例如`writer.write(88)`会输出字符'X'，`writer.write(89)`会输出'Y'，你可以猜猜你`writer.write(90)`会得到什么。您需要将整数转换为字符串，以便`write()`调用正确的方法。

第二种形式`writer.write("" + number)`有效，因为当您将数字添加到 String 时，Java 编译器会自动为您将数字转换为 String。这就是为什么`writer.write(sepw + nmvector.get(i).nm);`有效但`writer.write(nmvector.get(i).nm);`无效的原因。

# activerecord - rspec 重新加载对象清除 has_many 集合

> ID：10973132
> 
> 赞同：0
> 
> 时间：2012-06-10T23:19:18.860
> 
> 标签：activerecord, rspec, rspec-rails

我间歇性地（在各种项目中）遇到 rspec 重新加载 ActiveRecord 对象然后也清除相关对象的问题。

“应该”工作的失败规范的示例如下（忽略测试的“优点”，这是一个简化的示例）：

```
# Message has_many :message_attachments
# MessageAttachment belongs_to :message
describe Message, 'instance' do
  before(:each) do
    @it = Factory(:message)

    (1..3).each do
      @it.message_attachments << Factory(:message_attachment, :message => @it)
    end
  end

  it 'should order correctly' do
    # This test will pass
    @it.message_attachments.collect(&:id).should == [1, 2, 3]
  end

  it 'should reorder correctly' do
    @it.reorder_attachments([6, 4, 5])
    @it.reload
    # @it.message_attachments is [] now.
    @it.message_attachments.collect(&:id).should == [6, 4, 5]
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:19:19.953

奇怪的是，要解决这个问题，我必须创建具有已定义父对象的关联对象，*并将*其附加到父对象的集合中：

```
describe Message, 'instance' do
  before(:each) do
    @it = Factory(:message)

    (1..3).each do
      ma = Factory(:message_attachment, :message => @it)
      @it.message_attachments << ma
      ma.save
    end
  end

  it 'should order correctly' do
    @it.message_attachments.collect(&:id).should == [1, 2, 3]
  end

  it 'should reorder correctly' do
    @it.reorder_attachments([6, 4, 5])
    @it.reload
    @it.message_attachments.collect(&:id).should == [6, 4, 5]
  end
end 
```

# actionscript-3 - 洞穴公司类型的游戏，射击功能

> ID：10973144
> 
> 赞同：0
> 
> 时间：2012-06-10T23:21:41.717
> 
> 标签：actionscript-3, flash, actionscript

我正在用 AS3 制作游戏，灵感来自 Mushihimesama（iOS 上的 Bug Princess）、Dodonpachi 和东方系列等游戏。它主要围绕着让玩家一次躲避大量子弹（有时数以百计），同时击落大量敌人和老板。

我游戏中的每个“子弹”都包含几个参数，包括起始位置、x 速度、y 速度、运动行为、颜色和大小。“发射”这些子弹的每个函数都接受一些参数，例如子弹来自的点、发射的初始角度、发射哪些子弹、发射多少、发射多快、何时停止发射。

我的方法的一些重大限制是子弹*必须*来自一个点，它们的起点不能在 x 或 y 上偏移，每个子弹都必须遵循指定的路径并以指定的方式运行，并且它们不能添加到没有父母的阶段。

如果有人了解这些游戏以及创建类似“火”功能的最佳方法，我将非常感谢您的建议。

编辑：关于这个游戏的另一个可能重要的事情是子弹都是用代码绘制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:12:57.360

您可能想要进行一些重构，因为在一个类中拥有一堆公共函数并传递这么多参数似乎不是一个易于管理的解决方案。

我将首先创建一个`ShotPattern`基类或接口，并为每种类型或类别的镜头模式扩展或实现它的类。如何以及何时发射子弹以及发射何种子弹的逻辑将由`ShotPattern`. `ShotPattern`也可以在发射后影响s `Bullet`，改变它们的方向或速度，甚至产生更多`Bullet`的 s 以产生分裂效果。

s的构造函数`ShotPattern`仍然可以接受一些参数；目标只是减少重复并将大部分子弹生成逻辑保留在实例内部。`func`您的函数中的参数`FireAroundArc`很聪明，可以通过创建`ShotPattern`需要其他`ShotPattern`s 作为参数的 s 来使用相同的想法。

an 的每个实例都`Enemy`应该跟踪它`ShotPattern`的 s，而后者又跟踪它们`Bullet`的 s；这将允许清除某些敌人发射的子弹，并且子弹创建模式可以随着敌人移动。

在实际设计敌人的攻击模式方面，有很多可能性，这是一个非常开放的问题。拥有一个坚实的架构很重要，它可以让你增加更多的复杂性，而不必更改太多现有的代码，但是创建有趣、多样和具有挑战性的模式的一般问题超出了 Stack Overflow 问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:32:08.097

一种解决方案是创建一个`ShotManager`类，该类可以有一个方法，该方法`Shoot`采用类型参数，`Bullet`其中包含有关子弹类型和轨迹的信息。在`ShotManager`类中，您可以根据子弹的类型更新子弹的位置。

子弹的绘制将通过读取当前子弹的列表和它们的位置来单独处理，并将它们`ShotManager`与一些`Sprites`或位图绘图相匹配。

# c# - 在控制台应用程序上轮询 Kinect 传感器

> ID：10973154
> 
> 赞同：0
> 
> 时间：2012-06-10T23:23:41.587
> 
> 标签：c#, multithreading, console, kinect, polling

我需要使用 Kinect SDK 和 c# 制作一个使用 Kinect 的控制台应用程序。由于它是一个控制台应用程序，我发现轮询是检索我需要处理的帧的最佳方式。我需要从深度相机和 rgb 相机中检索帧，然后在单独的线程中进行一些处理（一个用于深度图像，一个用于 rgb 图像），并为两者中的每一个提供一个输出给用户处理过的帧。我一直在考虑这样做的方式如下：

1 - 创建2个线程，第一个是轮询RGB相机并进行处理的方法，第二个是轮询深度相机并进行处理的方法

2 - 启动线程

3 - 进入一段时间的一些停止条件循环

4 - 分别检查每个线程是否处于活动状态，如果没有，则重新创建它们并重新启动它们

我已经制作了一个遵循这些步骤的测试程序并且它可以工作，但我不确定这是不是最好的方法。我的测试程序是

```
class Program
{
    private static ClassExecutioner Executioner;
    private static Class1 Cls;

    static void Main(string[] args)
    {
        Executioner = new ClassExecutioner();
        Cls = new Class1();

        Thread fThread = new Thread(new ThreadStart(processA));
        Thread sThread = new Thread(new ThreadStart(processB));
        fThread.Start();
        sThread.Start();

        while (true)
        {
            if (!fThread.IsAlive)
            {
                fThread = new Thread(new ThreadStart(processA));
                fThread.Start();
            }

            if (!sThread.IsAlive)
            {
                sThread = new Thread(new ThreadStart(processB));
                sThread.Start();
            }
        }

    }
    static void processA()
    {
        String frameA = Cls.pollA();
        Executioner.CallA(frameA);
    }
    static void processB()
    {
        String frameB = Cls.pollB();
        Executioner.CallB(frameB);
    }
} 
```

1 类方法代表 kinect 上的摄像头轮询

```
class Class1
{
    private int a;
    private int b;

    public Class1()
    {
        a = 0;
        b = 0;
    }

    public String pollA()
    {
        String frame = "this is " + a % 100;
        a++;
        return frame;
    }

    public String pollB()
    {
        String frame = "I am " + b % 100;
        b++;
        return frame;
    }
} 
```

Executioner 表示处理从 Kinect 获得的帧的方法

```
class ClassExecutioner
{

    public ClassExecutioner()
    {
    }

    public void CallA(String frameA)
    {
        Random rand = new Random();
        int time = rand.Next() % 1000000000;
        //'processing' - wait some time
        for (int i = 0; i < time; i++)
        {
        }
        // finishes the processing of the 'frame' from stream A
        Console.WriteLine(frameA);
    }

    public void CallB(String frameB)
    {
        Random rand = new Random();
        int time = rand.Next() % 1000000000;
        // 'processing' - wait some time
        for (int i = 0; i < time; i++)
        {
        }
        // finishes the processing of the 'frame' from stream B
        Console.WriteLine(frameB);
    }
} 
```

该程序非常简单，但很好地说明了我想用 Kinect 流做什么。问题是，我不确定这是不是最好的方法，或者即使这在实际的 Kinect 应用程序上是否有效。请记住，目前，每个处理（深度和 rgb）都不需要来自对方的信息。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:19:45.287

研究 ReactiveExtensions 框架可能很酷。它非常干净地处理异步事件流。

您可以针对数据源编写 LINQ 并执行非常有趣的可组合操作。

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

你基本上会有两个 IEnumerable 序列（无限循环的东西），它们在给定的时间间隔产生帧。然后，您可以使用 Rx“查询”这些序列。RX 为您处理所有复杂的线程问题，并使您的消费者代码简洁明了。

需要明确的是，您不想每次都创建新线程。您可以创建两个无限可枚举，每个可在自己的线程上运行，并在每次迭代时产生结果。这样他们甚至不会“死”

# objective-c - 此动画在此方法中不起作用

> ID：10973157
> 
> 赞同：0
> 
> 时间：2012-06-10T23:24:04.947
> 
> 标签：objective-c, ios

我很难弄清楚这一点。此方法从另一个类导入到我的 viewController.m 如果我将代码复制到同一文件中的 IBAction 中，它可以正常工作。并且“测试 midi”正在记录它应该记录的时间。所以 IBOutlets 和动画代码看起来不错，但由于某种原因，这个方法没有做它应该做的事情

```
 - (void) source:(theSource*)data dataReceived:(const dataList *)theList
    {

       led.animationImages = [NSArray arrayWithObjects:[UIImage imageNamed:@"led-highlighted.png"],[UIImage imageNamed:@"led-passive.png"],nil];
        led.animationDuration = 0.3;
        led.animationRepeatCount = 20;
        [led startAnimating];
     NSLog(@"test");} 
```

如果我只是将其用于交换图像，它也不起作用。正在调用该方法，因为它正在记录到控制台。

```
 midiLed.image = [UIImage imageNamed:@ "led-highlighted.png"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:32:07.620

问题可能在于您如何调用此方法。它应该在主线程上，并且在调用它之后，您的代码应该返回到运行循环（即您的代码应该“完成”），然后对用户界面的更改才会生效。

如果这不能帮助您找到它，请分享调用此方法的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:32:28.950

什么线程`-source:dataReceived:`被调用？如果您使用 CoreMIDI，您的 MIDI 接收函数将在单独的高优先级线程上调用。

你不应该从非主线程接触 UI，因为 UIKit 不是线程安全的。

这是让 UI 在主线程上运行的一种方法：

```
- (void) source:(theSource*)data dataReceived:(const dataList *)theList
{
    dispatch_async(dispatch_get_main_queue(), ^{
        led.animationImages = [NSArray arrayWithObjects:[UIImage imageNamed:@"led-highlighted.png"],[UIImage imageNamed:@"led-passive.png"],nil];
        led.animationDuration = 0.3;
        led.animationRepeatCount = 20;
        [led startAnimating];
        NSLog(@"test");
    });
} 
```

# vb.net - 如何遍历每个按钮以检查它们是否启用？

> ID：10973162
> 
> 赞同：-1
> 
> 时间：2012-06-10T23:24:54.973
> 
> 标签：vb.net, button, loops, for-loop, each

我想做一个 For Each 循环，我可以检查每个按钮是启用还是禁用。如果按钮已启用，那么我必须获取每个按钮的标签中的值。我有 26 个按钮，每个按钮都包含不同的值（现金奖励）。*重要提示：此代码需要位于按钮下方，因此每六次按下它就会检查按钮。

伪代码：

```
btncase1.tag = 5
Begin while statement to go through each button
   Check each button to see if it is enabled
   If button is enabled then obtain values
Next 
```

我拥有的实际代码，但对我来说没有任何意义：

```
Public Class Form1
Dim button As Button
Dim totalremcases As Integer
Dim btncase As New Control
Dim btncollection As New Microsoft.VisualBasic.Collection()

Private Sub btncase1_Click()
For Each button As Button In btncollection
    If btncase.Enabled Then
        totalremcases = totalremcases + CInt(btncase.Tag)
    End If
Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T23:43:23.380

您可以尝试使用这种方法来解决它

```
 Public Sub getallcontrolls(controls As System.Web.UI.ControlCollection)
    Dim myAL As New ArrayList()
    For Each ctrl As Control In controls
        If TypeOf ctrl Is Button Then
            If ctrl.Enabled = True Then
                Dim tag As String = ctrl.Tag.ToString()
                myAL.Add(tag)
            End If

        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:07:59.913

看起来你正在做一个“交易或不交易”的游戏。

您可以创建一个按钮点击计数器（表单级别变量），以便您可以跟踪已经点击了多少按钮。每次单击按钮时递增计数器。

创建一个函数来累积标签的值。仅当计数器可被 6 整除时才调用此函数。（您说每六次按下按钮时检查一次）

```
Dim counter As Integer
Dim total As Integer

Private Function AccumulateTags() As Integer
    Dim ctl As Control
    Dim total As Integer
    For Each ctl In Me.Controls
        If TypeOf ctl Is Button Then
            If ctl.Enabled = True Then
                total += Val(ctl.Tag)
            End If
        End If
    Next
    Return total
End Function

Private Function disable(sender As Object)
    Dim ctl As Control
    For Each ctl In Me.Controls
        If TypeOf ctl Is Button AndAlso sender.Equals(ctl) Then
            ctl.Enabled = False
        End If
    Next
End Function

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click, _
              Button2.Click, Button3.Click, Button4.Click, Button5.Click, Button6.Click, Button7.Click
    counter += 1
    If counter Mod 6 = 0 Then 'Checks if counter is divisible by 6
        total = AccumulateTags()
    End If

    MsgBox("Total" & total) 'Displays total. You may also display it in a label if you want
    disable(sender)
End Sub 
```

# android - 在许多视图上设置 Onclick Android

> ID：10973164
> 
> 赞同：1
> 
> 时间：2012-06-10T23:25:02.757
> 
> 标签：android, onclick, case

我的 Activity 上有一系列 ImageViews。我想在其中一个被触摸时执行一个方法。我有下一个：

```
 public void onClick(View v) {

          switch(v.getId()){

          case R.id.image1:
              mymethod(1,1,movimientos,(ImageView)v);
              break;
          case R.id.image2:
              ponerficha(1,2,movimientos,(ImageView)v);
              break;
          case R.id.image3:
... 
```

但是方法没有执行，问题不是方法，因为案例中的任何代码都不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:27:29.187

首先，您需要检查您是否已经注册`onClickListener`了您的`Images`

```
image.setOnClickListener(this); 
```

（如果你的类实现了 OnClickListener 接口，你必须使用它）

然后你如何声明和初始化你的`ImageViews`，是否有自己的ID。

```
image = (ImageView) findViewById(R.id.someId)
anotherImage = (ImageView) findViewById(R.id.anotherId)
... 
```

您可以使用`onClickListeners`类似的匿名类，例如

```
image.setOnClickListener(
   new View.OnClickListener() {
      public void onClick(View v) {
         // some actions
      }
}); 
```

但在您有许多小部件要设置实现的情况下更复杂和更好`OnClickListener`。

```
public class ClassName extends Activity implements View.OnClickListener {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:30:13.230

首先，您的活动必须像这样实现 View.OnClickListener

```
public class myActivity implements View.OnClickListener { 
```

然后你需要为你的 ImageViews 设置你的点击监听器。如果您所有的 ImageViews 都在线性布局中，那么代码将如下所示

```
LinearLayout llImageViewHolder = (LinearLayout) findViewById(R.id.llImageViewHolder);
for (int i = 0; i < llImageViewHolder.getChildCount(); i++ {
    ImageView iv = (ImageView) llImageViewHolder.getChildAt(i);
    iv.setOnClickListener(this);
} 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:31:17.727

您需要为每个有兴趣处理点击的视图添加一个 onClick 处理程序。

你如何做取决于你想如何处理点击事件。您可以使用 hawaii.five-0 的方法并为所有内容设置一个事件处理程序，或者您可以为每个视图项设置一个事件处理程序，您可以将其添加到活动的 onCreate 方法中：

```
ImageView imageView = (ImageView) findViewById(R.id.image_view);
imageView.setOnClickListener(new OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
        // Do something
    }
} 
```

# atk4 - 4.2.1 中的基本身份验证

> ID：10973166
> 
> 赞同：0
> 
> 时间：2012-06-10T23:25:24.087
> 
> 标签：atk4

我注意到BasicAuth不再通过简单地取消注释//->检查Frontend.php来工作现在看来它需要一个模型......该模型的要求是什么？我该如何创建它？我怎么知道使用 BasicAuth？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:24:18.470

```
$auth->setModel('AnyModel','user_field','password_field');
$auth->check(); 
```

这应该有效。allow('demo','demo') 尝试使用指定用户传递基于数组的模型，并且在 4.2.1 中似乎存在一些错误。

补充：[https ://github.com/atk4/atk4/issues/67](https://github.com/atk4/atk4/issues/67)

# php - 防止php到mysql使用默认用户名和密码

> ID：10973167
> 
> 赞同：3
> 
> 时间：2012-06-10T23:25:28.720
> 
> 标签：php, mysql, database, linux, apache

我尝试搜索，但类似问题的答案并没有解决我的问题。

我正在尝试从这样的 PHP 代码连接到 MySQL 数据库：

```
$con = mysql_connect($hostname,$username,$password); 
```

在哪里

```
$hostname = "localhost" , $username = "xxx" , $password = "yyy" 
```

当我尝试从浏览器访问此 php 页面时，我收到以下错误消息：

> 无法连接：用户 'www-data'@'localhost' 的访问被拒绝（使用密码：否）

我知道 www-data 是 apache 网络服务器使用的默认用户名，它没有密码。由于尚未在 MySQL 中配置此用户，因此拒绝连接。

我的问题是如何防止默认用户名被使用。我希望 php 代码尝试使用用户名“xxx”和密码“yyy”连接到 MySQL

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:12:37.760

编写 mysqli_connect() 应该可以解决您的问题，并按照 teresko 的建议使用 mysqli 而不是 mysql。

# salesforce - 新机会页面上的自定义按钮，链接到保存时的 Visualforce 页面

> ID：10973168
> 
> 赞同：0
> 
> 时间：2012-06-10T23:25:35.857
> 
> 标签：salesforce, visualforce

我遇到了一个客户沙盒，其中标准的“保存”和“保存并新建”按钮已被标准新机会页面上的“保存并添加品牌”按钮所取代。他们已将商机行项目重命名为品牌，并将产品选项卡重命名为这样。

按下时，按钮会保存机会（在验证必填字段等之后），然后将用户重定向到自定义 Visualforce 页面以输入品牌详细信息。他们到达的 Visualforce 页面被配置为机会产品标准按钮 AddProduct 的覆盖。

![带有自定义保存按钮的 Salesforce 新机会页面](../Images/38af1e719dd41c5747cfdded61d70abc.png)

**“保存并添加品牌”按钮是如何添加到“新机会”页面以替换标准按钮的？**

我需要添加一些额外的按钮，但找不到它的配置位置。

在*自定义 > 机会 > 按钮和链接 > 标准按钮和链接*下新建未显示任何覆盖。此外，如果我将 ?nooveride=1 添加到 URL，我将使用自定义按钮获得相同的页面。编辑已被覆盖，但 Visualforce 页面不是显示为新页面的页面（如预期的那样）。

商机上没有带有与此按钮对应的标签的详细信息页面按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:20:14.223

转到设置 > 自定义 > 机会 > 设置并禁用“提示用户将产品添加到机会”

详细信息：[Salesforce 帮助和培训：在机会中提示产品](https://na5.salesforce.com/help/doc/en/customize_oppproduct.htm)

> 注意：如果启用，则将**保存**按钮替换为 [在] 机会创建页面上的**保存和添加产品按钮。**

# javascript - Flash / AS3 Google Maps API（已弃用？）

> ID：10973169
> 
> 赞同：2
> 
> 时间：2012-06-10T23:25:49.933
> 
> 标签：javascript, android, actionscript-3, google-maps, air

由于 Google Maps for Flash 已被弃用（[请参阅此](https://developers.google.com/maps/documentation/flash/)），还有什么替代方案。在发布的链接上，它说您应该使用 Javascript API，但是如果您的应用程序无法访问 Javascript（如基于 AIR 的 Android 应用程序）怎么办？还是我应该仍然使用已弃用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:59:54.963

似乎答案是继续使用已弃用的 AS3 Google Maps API，直到有可行的替代方案。

# c++ - boost分词器的随机行为

> ID：10973172
> 
> 赞同：0
> 
> 时间：2012-06-10T23:26:32.320
> 
> 标签：c++, boost, boost-tokenizer

我对 boost tokenizer 有疑问，这是我的代码：

```
#include <iostream>
#include <vector>
#include <boost/tokenizer.hpp>

using namespace std;

static vector<std::string> tokenize(const std::string& input, const char delim) {
    std::cout << "Tokenize: " << input << std::endl;
    vector<std::string> vector;
    typedef boost::char_separator<char> TokenizerSeparator;
    typedef boost::tokenizer<TokenizerSeparator> Tokenizer;
    TokenizerSeparator separator(&delim);
    Tokenizer tokenizer(input, separator);
    Tokenizer::iterator iterator;

    for(iterator=tokenizer.begin(); iterator!=tokenizer.end();++iterator){
        std::cout << "elem found: " + *iterator << std::endl;
        vector.push_back(*iterator);
    }
    return vector;
}

int main(int argc, const char * argv[])
{
    string input = "somedata,somedata,somedata-somedata;more data;more data";
    vector<string> list = tokenize(input, ';');

    return 0;
} 
```

此代码的行为并非始终一致。有时它有效，有时在多次运行时无效。当它在这里不起作用时，我得到一个输出：

```
Tokenize: somedata,somedata,somedata-somedata;more data;more data
elem found: some
elem found: ata,some
elem found: ata,some
elem found: ata-some
elem found: ata
elem found: more 
elem found: ata
elem found: more 
elem found: ata 
```

我究竟做错了什么 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:33:27.783

```
TokenizerSeparator separator(&delim); 
```

您正在根据字符存储的*地址*而不是字符的值进行标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:50:00.687

感谢@DavidSchwartz 的回答（见上面的评论）。

char_separator 在其构造函数中需要一个有效的 C 字符串。

# c++ - C++ 中的粒子群优化

> ID：10973173
> 
> 赞同：3
> 
> 时间：2012-06-10T23:27:06.453
> 
> 标签：c++, particle-swarm

我需要在 C++ 中实现 PSO 算法。有没有我可以用来开始的 C++ 库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T23:34:56.797

[Particleswarm.info](http://www.particleswarm.info/)拥有一个很好的[PSO 工具箱存储库](http://www.particleswarm.info/Programs.html)。

# .net - MEF：CompositionContainer 和部件的生命周期和所有权

> ID：10973179
> 
> 赞同：2
> 
> 时间：2012-06-10T23:28:10.730
> 
> 标签：.net, mef

我正试图围绕部分生命周期和所有权。我知道共享部分的生命周期将限定在容器中。但是非共享实例呢？它说容器不会保存对创建的部件的引用，除非它是共享的或实现 IDisposable，但它还说容器创建的**所有**部件都以容器的生命周期为条件，摆脱它们的唯一方法是处置容器。

那么它是哪一个？容器是否包含对它创建的所有部分的引用，或者仅包含符合特定条件的部分？我也很困惑，因为它说容器永远不会转移它创建的部件的所有权。但是，如果它不包含对非共享部分（未实现 IDispoable）的引用，那么它实际上不会将所有权转移给请求者吗？

来源：[http ://mef.codeplex.com/wikipage?title=Parts%20Lifetime&referringTitle=Guide](http://mef.codeplex.com/wikipage?title=Parts%20Lifetime&referringTitle=Guide)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:07:03.113

当您从非托管语言的角度考虑“活着”时，您的反对是有道理的。例如在 C++ 中，在堆上分配的任何对象都需要在某个时候被释放，这将是容器的责任。所以容器需要保留对它创建的*所有*对象的引用，并在某个时候释放它们。

但是，在 .NET 运行时，垃圾收集器将负责回收内存。所以容器只需要保留对实例的引用，如果它在处理未来的部件请求时可能被重用（即它是*共享*的），或者如果它需要在某个时候被释放。

如果这些条件都不成立，那么可以放心地忽略生命周期和所有权的概念。重要的是，只要有对它的引用，该对象就可以使用，而垃圾收集器将确保这一点。

所以回答你的问题：它只保留对**符合特定条件的对象的**引用。但是，这并不意味着您可以继续调用`container.GetExportedValue`并期望没有内存泄漏。考虑如果您请求的非一次性对象具有一次性依赖项会发生什么。容器仍将保留对这些的引用！

因此，如果要通过容器动态创建对象，最好`ExportFactory`改用（在.NET 4.5 中引入）。这样，即使对象不是一次性的，您也可以重新引入“生命周期”的概念，并且容器将确保在您使用`ExportLifetimeContext<T>.Dispose`.

# ruby - 通过 id ruby 合并行 csv

> ID：10973182
> 
> 赞同：1
> 
> 时间：2012-06-10T23:28:32.400
> 
> 标签：ruby, hashmap, inject, fastercsv

我有一个 .csv 文件，为简单起见，有两个字段：ID 和评论。id 的行是重复的，其中每个评论字段都满足了从它生成的任何表中的 max char 并且需要另一行。我现在需要将关联注释合并在一起，从而使用 Ruby 为每个唯一 ID 创建一行。

为了说明，我正在尝试使用 Ruby 来实现：

身份证 | 评论
1 | 片段 1
1 | 片段 2
2 | 片段 1
3 | 片段 1
3 | 片段 2
3 | 片段 3

进入这个：

身份证 | 评论
1 | 片段 1 片段 2
2 | 片段 1
3 | 片段 1 片段 2 片段 3

我已经接近找到一种使用inject({}) 和hashmap 的方法，但仍在努力正确合并所有数据。同时，我的代码似乎变得过于复杂，包含多个哈希和数组，只是为了对选择性行进行合并。

实现这种类型的行合并的最佳/最简单的方法是什么？可以只用数组来完成吗？

希望获得有关如何在 Ruby 中正常执行此操作的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T00:22:30.477

保留标题并按 ID 使用组：

```
rows = CSV.read 'comment.csv', :headers => true
rows.group_by{|row| row['ID']}.values.each do |group|
  puts [group.first['ID'], group.map{|r| r['COMMENT']} * ' '] * ' | '
end 
```

您可以使用 0 和 1 但我认为使用标题字段名称更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:02:15.310

使用以下 csv 文件，tmp.csv

```
1,fragment 11
1,fragment 21
2,fragment 21
2,fragment 22
3,fragment 31
3,fragment 32
3,fragment 33 
```

试试这个（使用 irb 演示）

```
irb> require 'csv'
  => true
irb> h = Hash.new
 => {} 
irb> CSV.foreach("tmp.csv") {|r| h[r[0]] = h.key?(r[0]) ? h[r[0]] + r[1] : r[1]}
 => nil 
irb> h
 => {"1"=>"fragment 11fragment 21", "2"=>"fragment 21fragment 22", "3"=>"fragment 31fragment 32fragment 33"} 
```

# django-forms - Django 注册表单抛出 - 异常值：必须设置给定的用户名

> ID：10973183
> 
> 赞同：0
> 
> 时间：2012-06-10T23:28:56.250
> 
> 标签：django-forms

我被困在 django 的一个简单的注册表单上。填写注册表时出现此错误：

```
ValueError at /register/
The given username must be set
Request Method:POST
Request URL:http://127.0.0.1:8000/register/
Django Version:1.4
Exception Type:ValueError
Exception Value:The given username must be set 
```

这是我的views.py：

```
 def register_page(request):
if request.method == 'POST':
    form = RegistrationForm(request.POST)

    if form.is_valid():
        user = User.objects.create_user(
        username=form.cleaned_data['username'],
        password=form.cleaned_data['password1'],
        email=form.cleaned_data['email']
        )
        return HttpResponseRedirect('/register/success/')
else:
    form = RegistrationForm()
    variables = RequestContext(request, {'form': form
    })
return render_to_response(
'registration/register.html',
variables
) 
```

这是我的注册模板：

```
 {% extends "base.html" %}
    {% block title %}User Registration{% endblock %}
    {% block head %}User Registration{% endblock %}
    {% block content %}
    <form method="post" action=".">{% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="register" />
    </form>
    {% endblock %} 
```

和我的网址模式：

```
urlpatterns = patterns('',
(r'^$', main_page),
(r'^user/(\w+)/$', user_page),
(r'^login/$', 'django.contrib.auth.views.login'),
(r'^logout/$', logout_page),
(r'^site_media/(?P<path>.*)$', 'django.views.static.serve',
{'document_root': site_media}),
(r'^register/$', register_page),
(r'^register/success/$', direct_to_template,
{'template': 'registration/register_success.html'}),  
) 
```

我找不到有关此问题的任何信息。我会很感激一些指导，我是 Django 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:46:11.663

问题出在我的 forms.py 文件中：

```
def clean_username(self):
username = self.cleaned_data['username']
if not re.search(r'^\w+$', username):
  raise forms.ValidationError(u'Username can only contain '
    'alphanumeric characters and the underscore.')
try:
  User.objects.get(username=username)
except User.DoesNotExist:
  return username
raise forms.ValidationError(u'Username is already taken.') 
```

通过代码并正确缩进后，问题得到解决。正如我所说，我是 Django 和 python 的新手

谢谢

# jquery - jQuery从下到上动画

> ID：10973184
> 
> 赞同：1
> 
> 时间：2012-06-10T23:28:56.747
> 
> 标签：jquery, jquery-animate

有没有办法从下到上动画一个元素的高度（比如说div）？例如，假设我有一个高度为 15px 的 div 元素。

```
<div class='greyBox'>
<p>Example text</p>
</div> 
```

而CSS是：

```
.box{height:15px;width:60px;backgroundColor:#000;float:left;margin-left:20px;}
.box p{opacity:0;} 
```

然后我使用这个jQuery：

```
 $('.greyBox').mouseenter(function(){
     $(this).animate({height:'50px'},700).children('p').animate({opacity:1},200);
     }); 
```

现在只需添加更多的盒子（红色，蓝色......），每个盒子都应用相同的 css。动画正在运行，但如果应用到 GreyBox 上，它也会为他旁边的红色动画设置动画。我尝试从 float:left 更改为 inline 块，但没有运气。

只有一件事，所有这些盒子都包裹在一个绝对定位的 div 中，宽度：100%，底部：0；左侧：0；

Ps 我创建了一个小提琴，所以可以直接看到。[这里是](http://jsfiddle.net/BsPju/)

非常感谢，

米尔科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:44:10.640

```
 $('.greyBox').mouseenter(function(){

   $(this).animate({height:'50px'},700).children('p').animate({opacity:1},200);
       $(this).siblings().animate({marginTop: '35px'}, 700)

   }); 
```

[http://jsfiddle.net/BsPju/1/](http://jsfiddle.net/BsPju/1/)

`marginTop`您可以通过设置兄弟元素的动画来抵消高度。

否则，您需要将它们全部定位`absolute`，并`bottom:0`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:49:48.693

如果您更改`float: left`并`display: inline-block`添加`vertical-align: bottom`到 div，它会以您想要的方式显示。

见：http: [//jsfiddle.net/AVXLq/1/](http://jsfiddle.net/AVXLq/1/)

# ruby - Ruby Mysql2：使用计数方法的不同结果

> ID：10973185
> 
> 赞同：0
> 
> 时间：2012-06-10T23:29:17.733
> 
> 标签：ruby, mysql2

我在 mysql2 查询结果中使用 .count 方法：

我的代码：

```
 require "mysql2"

  hostname='db.xxxxx.xxx'
  port='3306'
  username='xxxxxx'
  password='xxxxxxxxxxxxxxxxxxxxxxxxxx'
  database='xxx'

  dbh = Mysql2::Client.new(:host=> hostname, :username=> username, :password=> password, :database=> database, :port=> port.to_f, :database_timezone=> :utc, :application_timezone => :local)

  results=dbh.query("SELECT * FROM xxx")
    p results.count
    i=0
    results.each do |result|
        i=i+1   
    end

    p results.count 
```

使用第一个 results.count，我按预期获得了 SELECT 结果行的数量。但对于第二个，我获得（有时！）一个不同的值：

* * *

我的结果：

```
$ ruby test_count.rb
4942
4942

$ ruby test_count.rb 
4942
24773520

$ ruby test_count.rb 
4942
37442208 
```

* * *

我的配置：

```
$ rvm --version
rvm 1.13.4 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

$ ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

$ gem list

*** LOCAL GEMS ***

Ascii85 (1.0.1)
bundler (1.1.3)
curb (0.8.0)
mime-types (1.18)
mysql (2.8.1)
mysql2 (0.3.11)
pdf-reader (1.1.1)
prawn (0.12.0)
prawn-core (0.8.4)
rake (0.9.2.2)
ruby-filemagic (0.4.2)
ruby-rc4 (0.1.5)
rubygems-bundler (0.9.2)
RubyInline (3.11.2)
rvm (1.11.3.3)
ttfunk (1.0.3)
ZenTest (4.8.0) 
```

有人知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:14:12.277

检查你的 = 与 ==。此外，第一个结果是一个数组。如果您通过执行某种 .to_s 或 join 将其更改为字符串并将其放回同一变量中，例如`results = results.join`，那么长度会改变。如果您错误地使用 向数组添加元素`results += results + another_array`，那么您的计数将快速增加。最好是在此处发布您的真实代码。我知道是因为我曾经做过其中的一些。

# jsp - 为什么我的表单在提交时在 Struts 中抛出 No Bean Specified 错误？

> ID：10973186
> 
> 赞同：0
> 
> 时间：2012-06-10T23:29:39.330
> 
> 标签：jsp, jakarta-ee, struts-1

我有一个提交给lookupDispatchAction 的dynaAction 表单设置。问题是页面加载正常，但在提交时应用程序抛出**[BeanUtils.populate] 根本原因 java.lang.IllegalArgumentException: No bean specified** that 目前我似乎无法捕获堆栈转储并没有指示在哪里这是造成的代码。只有通过撤消修改后的代码，我才能将原因识别为下面打印的 jsp 中的代码部分。目前，我正在尝试查看是否可以从调试器中获取更多信息，但到目前为止，研究已经暗示了可能的原因，但这些都没有帮助。下面是代码的相关部分（跳过堆栈跟踪以保持这篇文章的合理性：struts-config.xml：

```
 <form-bean name="MonthlyInvoiceForm" type="com.myapp.form.accounting.MonthlyInvoiceForm">
                <form-property name="idMonthInvoice" type="java.lang.Long"/>
                <form-property name="creationDate" type="java.util.Date"/>
                <form-property name="adresse" type="com.myapp.model.component.CustomerAddress"/>
                <form-property name="extras" type="com.myapp.accounting.customer.ExtraInvoiceForm[]"/>
                <form-property name="creationLoc" initial="Home" type="java.lang.String"/>
                <form-property name="totalHT" type="java.math.BigDecimal"/>
                <form-property name="totalTTC" type="java.math.BigDecimal"/>
                <form-property name="prefix" type="java.lang.Integer"/>
                <form-property name="number" type="java.lang.String"/>
                <form-property name="person" type="java.lang.String"/>
                <form-property name="strTotalHT" type="java.lang.String"/>
                <form-property name="strTotalTTC" type="java.lang.String"/>
                <form-property name="customerName" type="java.lang.String"/>
                <form-property name="strIdCustomer" type="java.lang.String"/>
                <form-property name="strCreationDate" type="java.lang.String"/>
        </form-bean> 
```

表单本身具有以下设置：

```
public class MonthlyInvoiceForm extends BaseDynaForm implements ModelForm<MonthlyInvoice>{

@Override
public void reset(ActionMapping mapping, HttpServletRequest request) {
    ExtraInvoiceForm[] extraForms = new ExtraInvoiceForm[1];
    this.set("extras", extraForms);

    CustomerAddress caddress = new CustomerAddress();
    this.set("adresse", caddress);

    BigDecimal tmpTRD = new BigDecimal(BigInteger.ZERO);
    this.set("totalHT", tmpTRD);

    BigDecimal tmpTRM = new BigDecimal(BigInteger.ZERO);
    this.set("totalTTC", tmpTRM);
}

@Override
public ActionErrors validate(ActionMapping actionMapping, HttpServletRequest request) {
    ActionErrors errors = new ActionErrors();

    ExtraInvoiceForm[] extraInvoiceForms = (ExtraInvoiceForm[]) this.get("extras");
    LinkedList<String> credits = new LinkedList<String>(); 
    LinkedList<String> reductions = new LinkedList<String>(); 

    for(ExtraInvoiceForm eif: extraInvoiceForms) {
        eif.validate(errors);

        if(!eif.isBlank()) {
            if(eif.getOperation().equals(ExtraCostInvoice.CREDITOPERATION)) {
                if(credits.contains(eif.getDescription()))
                    errors.add(ActionErrors.GLOBAL_ERROR, new ActionError("invoice.duplicate.credit", eif.getDescription()));
                else
                    credits.add(eif.getDescription());
            } else {
                if(reductions.contains(eif.getDescription()))
                    errors.add(ActionErrors.GLOBAL_ERROR, new ActionError("invoice.duplicate.reduction", eif.getDescription()));
                else
                    reductions.add(eif.getDescription());
            }
        }
    }

    if (StringUtils.isEmpty(this.get("strCreationDate").toString()))
        errors.add("strCreationDate",new ActionError("field.required"));

    if (StringUtils.isEmpty(this.get("creationLoc").toString()))
        errors.add("creationLoc",new ActionError("field.required"));

    return errors;
}

@Override
public void populateModel(MonthlyInvoice model) throws Exception {
    DateTimeFormatter fmt = DateTimeFormat.forPattern("dd MMMM yyyy");
    DateTime crDate;

    crDate = new DateTime(fmt.withLocale(Locale.FRENCH).parseDateTime(this.get("strCreationDate").toString()));
    this.set("creationDate",BaseForm.jodaToSqlDate(crDate));

    PropertyUtils.copyProperties(model, this);
} 
```

该jsp：

```
<html:form action="/toInvoiceCustomerMissions"> 
/*This is the part of code in the jsp which causes the error*/
<c:forEach var="extras" items="${MonthlyInvoiceForm.map.extras}" varStatus="vs">
                    <tr>
                        <td align="center">
                                                    <html:text indexed="true" name="extras" property="description" size="40" maxlength="100" /></td>
                        <td align="center">
                                                    <html-el:radio indexed="true" name="extras" property="operation"
                            value="<%= ExtraCostInvoice.CREDITOPERATION %>"
                            onclick="setPercentSymbol(${vs.index}, false); calcCustomerAmount();" />Déduction
                                                    <html-el:radio indexed="true" name="extras" property="operation"
                            value="<%= ExtraCostInvoice.REDUCTIONOPERATION %>"
                            onclick="setPercentSymbol(${vs.index}, true); calcCustomerAmount();" />Réduction
                                                    <html-el:radio indexed="true" name="extras" property="operation"
                            value="<%= ExtraCostInvoice.SUPPLEMENTOPERATION %>"
                            onclick="setPercentSymbol(${vs.index}, false); calcCustomerAmount();" />Supplément
                        </td>
                        <td align="center">
                                                    <html:text indexed="true" name="extras"
                            property="strAmount" size="7" maxlength="6" onchange="calcCustomerAmount();" />
                                                    <input type="text" id="extraSymbol<c:out value='${vs.index}'/>" value="&euro;"
                            readonly="readonly" size="1" style="border: none">
                                                </td>
                    </tr>
                </c:forEach>
</html:form> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:44:14.533

解决了。事实证明，您还需要遍历分配数组的每个元素并在 reset 方法中对其进行初始化；在这种情况下，**ExtraInvoiceForm[] extraInvoiceForms**必须初始化每个元素。

# ruby-on-rails - 在 Oracle BPEL 中调用 Rails API

> ID：10973187
> 
> 赞同：1
> 
> 时间：2012-06-10T23:29:56.593
> 
> 标签：ruby-on-rails, ruby, rest, bpel

我正在尝试将一个简单的 Rails 应用程序与 BPEL 流程集成，但这很困难，因为 BPEL 对 RESTfull Web 服务的支持很少或可能没有。

我已经尝试过使用 HTTP 绑定，但我不确定我是否得到了我想要的，因为组件移动到了内部，它实际上是一个外部服务。

所以我有两个问题：

1.  我需要编写 xsd 文件来定义请求和响应 xml 结构。我搜索了一下，似乎没有自动执行此操作的宝石。有没有？或者更好的是，是否有一个 gem 可以创建类似 wsdl 文件的东西？我知道这是针对 SOAP Web 服务的，而在 RESTful 中没有这样的东西，但是手动创建这些文件是一件很痛苦的事情。所以我搜索类似的东西。

2.  HTTP 绑定是我发现调用 RESTfull Web 服务的唯一方法。有更好的吗？有人成功使用过吗？或者用 Java 编写代码并使用 Java 适配器或者更简单的方法？

任何建议，即使不是直接针对我的问题，也表示赞赏。谢谢。

此外，如果有一些关于它的文章，欢迎链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:03:30.497

[WashOut](http://roundlake.github.com/wash_out/)是一个新的 SOAP 服务器库，绝对值得一试。

# android - 应用程序是否应该处于运行状态才能触发意图？

> ID：10973188
> 
> 赞同：2
> 
> 时间：2012-06-10T23:30:07.577
> 
> 标签：android, android-intent

我有一个非常简单的 IntentReceiver 可以在时间变化时接收事件。这是代码：

```
public class IntentRec extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i("IntentRec", intent.getAction());
    }
}

<application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
    <receiver android:name=".IntentRec">
        <intent-filter>
            <action android:name="android.intent.action.TIME_SET"/>
        </intent-filter>
    </receiver>
    <activity android:name="MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application> 
```

但是，我在应用程序运行时收到了意图。但是，如果我关闭（使用强制关闭）应用程序，则不会调用 onReceive。所以我的问题是，我是否仅在侦听器应用程序运行时才收到意图？我认为意图旨在在应用程序未运行时运行目标侦听器类。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T23:42:56.367

解决方案很简单：停止单击强制关闭。

在 Android 3.1+ 上，强制关闭将阻止您的应用程序中的任何内容再次运行，直到用户手动运行您的活动，或其他东西（例如，第三方应用程序）启动您的应用程序。

* * *

**更新**

我怀疑您对“停止”一词的多种含义感到困惑。让我们来看看这个过程，避免使用“停止”这个词，看看它是否有帮助。

当您的应用首次安装在 Android 设备上时，它处于被某些人称为“snicklefritzed”的状态。当应用程序处于这种“snicklefritzed”状态时，没有清单注册`BroadcastReceiver`将起作用。要将应用程序移出“snicklefritzed”状态，某些第三方应用程序（如主屏幕启动器）必须明确请求在您的应用程序中运行某些内容（如活动）。因此，正常的事件过程是用户下载您的应用程序，单击它的启动器图标，然后您的应用程序进入“正常”状态并远离“snickelfritzed”状态。在“正常”状态下，您`BroadcastReceiver`将正常工作。

假设您`BroadcastReceiver`是用于`ACTION_BOOT_COMPLETED`广播的。“snicklefritzed”状态与您的应用程序当前是否正在运行无关 - 它仅取决于您的应用程序是否*曾经*运行过。因此，如果用户安装了您的应用程序，但在对您的应用程序进行任何操作之前重新启动了他们的手机，您的`ACTION_BOOT_COMPLETED`接收器将*无法*在启动时获得控制权。但是，如果用户在您的应用程序中运行某些东西，*然后*重新启动手机，您的接收器将正常接收`ACTION_BOOT_COMPLETED`广播。

通常，应用程序会退出“snicklefritzed”状态，并且永远不会返回到该状态。如果用户在“设置”中单击此应用的“强制关闭” ，*则会*导致应用再次“炸裂”。在这里，用户明确告诉 Android 你的应用程序行为不端，在用户另有说明之前不应再次运行。当然，如果用户再次启动您的活动，您将回到“正常”状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:39:26.910

您必须添加`android:process=":remote"`才能`BroadcastReceiver`独立于您的活动接收。

```
<receiver android:name=".IntentRec"
    android:process=":remote"> //We declare that this is in a remote process
    <intent-filter>
        <action android:name="android.intent.action.TIME_SET"/>
    </intent-filter>
</receiver> 
```

干杯，Zed

# conditional-statements - Google Weather API 条件（纯文本）

> ID：10973193
> 
> 赞同：1
> 
> 时间：2012-06-10T23:30:55.023
> 
> 标签：conditional-statements, weather, google-weather-api

我无法以简单的纯文本格式找到所有 Google Weather API“条件”，所以如果他们也找不到，这里也适合所有人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:30:55.540

```
Clear
Sunny
Partly Sunny
Mostly Sunny
Scattered Thunderstorms
Showers
Scattered Showers
Rain and Snow
Overcast
Light Snow
Freezing Drizzle
Chance of Rain
Partly Cloudy
Mostly Cloudy
Chance of Storm
Rain
Chance of Snow
Cloudy
Mist
Storm
Thunderstorm
Chance of TStorm
Sleet
Snow
Icy
Dust
Fog
Smoke
Haze
Flurries
Light Rain
Snow Showers
Hail 
```

来源：[https ://gist.github.com/806934](https://gist.github.com/806934)

# javascript - 页面加载后加载 jQuery 插件

> ID：10973197
> 
> 赞同：0
> 
> 时间：2012-06-10T23:31:29.913
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我在页面上使用 jQuery File Upload 插件。插件扩展了 jQuery UI 小部件，将 UI 添加到实际的上传功能。

小部件上的初始化绑定到一个 jQuery 页面就绪函数，如下所示：

```
(function ($, tmpl, loadImage) {
    'use strict';
    var parentWidget = ($.blueimpIP || $.blueimp).fileupload;
    $.widget('blueimpUI.fileupload', parentWidget, {...bla bla bla 
```

在我的页面上，一个小部件表单在开始时是隐藏的（通过 display:none），并且仅在用户单击时显示，但如果在页面加载时甚至触发时隐藏小部件使用的表单，则 UI 交互功能出现故障。如果小部件表单可见，则一切都初始化正常。尽管我实际上在显示小部件表单之前实际上调用了插件构造函数，但所有这些都会发生，因此构造应该可以正常进行。

无论如何，我的问题是：我如何在运行时加载一个 JavaScript 文件，以便它接收一个页面加载事件（也许是这个特定文件的手动调用？）并像在页面加载时初始化一样进行初始化？

# delphi - 用新的 Windows 7“蛇吃尾巴”光标替换 crHourGlass

> ID：10973204
> 
> 赞同：2
> 
> 时间：2012-06-10T23:32:45.710
> 
> 标签：delphi

这些天我的 Delphi XE2 应用程序看起来有点过时，因为它们使用：

```
 Screen.Cursor := crHourglass; 
```

有没有办法将光标更改为 Windows 使用的更具现代感的旋转“蛇吃尾巴”图标？

除此之外，[我是否仅限于 Delphi 7 下 Controls.pas 中定义的光标编号？](https://stackoverflow.com/questions/6122128/am-i-restricted-to-the-cursor-numbers-defined-in-controls-pas-under-delphi-7)我无法在 SO 或 Google 上找到解决此问题的任何内容。

蛇吃尾光标预览：

![蛇吃它的尾巴光标](../Images/f119c1a961798838c2da7666e9dea745.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:15:13.603

不同的 Windows 方案有不同的游标。如果您使用的是 Aero 方案之一，那么您将看到您所指的光标。例如，如果您使用的是 Windows Classic，那么您将看到较旧的 XP 样式光标。

```
Screen.Cursor := crHourglass; 
```

是显示当前活动方案的忙碌光标所需要做的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:15:21.430

基本上 crHourGlass 是“忙碌”Windows 光标的“包装器”。您可以在系统“鼠标”控制面板中“手动”更改它：从您想要的模型配置您的“指针”设置。

# mdx - MDX 错误“函数需要元组集表达式”是什么意思？

> ID：10973207
> 
> 赞同：1
> 
> 时间：2012-06-10T23:32:53.263
> 
> 标签：mdx

我正在尝试使用包含 CASE 语句的 MDX 创建一个集合。我收到一个我似乎无法解决的错误。错误是： **函数需要参数的元组集表达式。使用了字符串或数字表达式。** 可以返回的成员只有两个，分别是“Daily”和“MonthEnd”。感谢您提供的任何帮助。起初我认为这个错误意味着我需要使用 {} 来创建一个集合，但这对我来说并没有，而且我不知道需要在哪里添加它们。

```
 CREATE SET [BDW Report Prototype].[MyDimension] AS 
    CASE [Grain].[Grain Dim ID]
     WHEN [Grain].[Grain Dim ID].&[1] THEN '1'
     WHEN [Grain].[Grain Dim ID].&[2] THEN '2'
    ELSE '3'
    END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:05:20.367

这意味着您正在创建的集合必须是一个有效的集合（即元组的有序列表）MDX 表达式。但是您要为此集分配一个字符串。你基本上是在写：

```
CREATE SET [BDW Report Prototype].[MyDimension] AS '1' 
```

显然，您的 [MyDimension] 集合不是集合而是字符串。

你想创造什么？

# php - 在 _POST 中找不到表单值

> ID：10973210
> 
> 赞同：1
> 
> 时间：2012-06-10T23:33:30.183
> 
> 标签：php, forms, radio-button

我做了一个非常简单的表单，只是为了看看我在用 PHP 提交数据时是否做对了。它只包含三个单选按钮，没有别的。不对，我没有像我期望的那样在 $_POST 中得到值。

表格：

```
<form name='testform' action='test.php' method='post'>
    <input type='radio' name='testbutton' value='larry' />
    <input type='radio' name='testbutton' value='curly' />
    <input type='radio' name='testbutton' value='moe' />
    <input type='submit' value='Submit'>
</form> 
```

脚本 test.php：

```
if($_POST['testbutton'] == 'larry') {
    echo "You picked Larry";
} elseif($_POST['testbutton'] == 'curly') {
    echo "You picked Curly";
} else {
    echo "You picked Moe";
} 
```

代码没有返回错误，但无论我选择什么按钮，我总是得到 Moe，即使根本没有选择任何按钮。使用 var_dump($_POST) 什么都没有，一个空白的空间。无论我选择什么，使用 print_r($_POST) 都会给出 1。我在这里找不到我做错了什么。

顺便说一句，我知道这段代码不是最优的，但我只是在这里测试东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:40:58.283

您可能还有一些其他代码没有显示给我们，它为 $_POST 变量赋值，并覆盖它。

如果您创建一个全新的 php 文件，并且只输入您在此处发布的代码，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T17:39:50.287

我知道这是一个旧帖子，但是在调试神秘问题时，有时另一个建议可能会帮助某人解决他们的“缺少 POST”数据之谜。

就我而言，我使用 ajax 提交表单。在 javascript 代码中：我将“type:”设置为“GET”，然后继续编写代码来处理服务器端 PHP 脚本中的“$_POST”数据。具有欺骗性的是，请求的视图（如在 Chrom Developer 工具中所见）具有正确的值，因此您确信这些值正在被传输。但是，在进一步检查时，您会看到响应标头显示“GET”。

肯定是愚蠢的错误。希望这有助于将其他人从类似的调试地狱中解救出来。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T23:55:42.580

*   将“名称”属性添加到输入元素总是好的。

> ```
> <input type="submit" name="MySubmit" value="Submit"> 
> ```

*   不选择任何东西时，您总是会得到 Moe。假设您没有显示整个代码，我可以告诉您：

> ```
> if(isset($_POST['MySubmit'])) {
> 
>     $selected = $_POST['testbutton'];
> 
>     switch($selected){
> 
>         'larry': echo "You picked Larry";
> 
>                  break;
> 
>         'curly': echo "You picked Curly";
> 
>                  break;
> 
>          default: "You picked Moe";
> 
>                   break;
> 
>     }
> 
> }
> 
> else {
> 
>     echo "Form submit failed";
> 
> } 
> ```

# php - 将 php 变量传递给动态 php 外部 js 文件

> ID：10973215
> 
> 赞同：1
> 
> 时间：2012-06-10T23:34:36.010
> 
> 标签：php, javascript, google-maps, external

我有一个 php 文件作为我的主页，我想将一个 php 变量传递给一个用 php 绘制的外部 js 文件。我有几个 php 的外部 js 文件可以正常工作，但“不”依赖于主页中的 php。有些依赖于主页上的 JavaScript，但我想摆脱它。我的意图是通过限制其上的 JavaScript 数量、增加动态以及允许更好的站点管理来保持主页的清洁。

也许如果我了解外部文件与调用页面的自然关系，我不知道。例如，下面的代码是我当前的一些代码，它假定外部 js 脚本，即 php 文件，从主页看到“functions.php”和 $sel_entity。但是，它似乎不是那样工作的。我猜也许functions.php 需要包含在外部文件中，但$sel_entity 没有任何线索。我知道我可以将变量回显到主页上的 js 变量，但我的计划需要一些更动态的东西。这里的任何帮助都会很棒。谢谢！

例如，主页是这样的：

```
<?php require_once("includes/connection.php"); ?>
<?php require_once("includes/functions.php"); ?>
<?php  $sel_entity = $_GET['entity']; ?>
...//bunches of code 
<script type="text/javascript" src="javascripts/lines.php"></script> 
```

那么js文件lines.php是这样的：

```
<?php
 Header("content-type: application/x-javascript");
  $job_set = get_jobs($_GET['entity']);                     
  while ($job = mysql_fetch_array($job_set)) {
    echo "
        var jobLine";
echo $job["Project_ID"];
echo " = [new google.maps.LatLng(lati, longi),
";
$jobIdCoords = get_jobCoord_by_id($job["Project_ID"]);
echo " new google.maps.LatLng(";
echo $jobIdCoords['lat'] . ", ";
echo $jobIdCoords['long'] . ")]; ";
                    }
  ...// bunches more code
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:52:12.267

最好的方法是使用 $_SESSION，但一定要在“js”文件中启动会话。

```
<?php
session_start();
$_SESSION["foo"] = "bar";
?>
<script type="text/javascript" src="javascripts/lines.php"></script> 
```

然后是 JS 文件：

```
<?php
Header("content-type: application/x-javascript");
session_start();
echo 'var foo = "'.$_SESSION["foo"].'";';
?>
alert(foo); 
```

但是，您应该也可以像这样使用 $_GET ：

```
<script type="text/javascript" src="javascripts/lines.php?foo=bar"></script> 
```

和“JS”文件：

```
<?php
Header("content-type: application/x-javascript");
echo 'var foo = "'.$_GET["foo"].'";';
?>
alert(foo); 
```

# java - 正确访问父方法和变量？

> ID：10973221
> 
> 赞同：0
> 
> 时间：2012-06-10T23:36:20.750
> 
> 标签：java, reference

所以这可能是一个非常简单的问题，我想太多了，但如果我执行以下操作：

```
class A{
    public String test_string = "before (default)";
    public A(){
        B b = new B(this);
    }
    public void testA(){
        this.test_string = "after (new)";
    }
} 
```

其中 B 是：

```
class B{
    private A parent;
    public B(A mParent){
        parent = mParent;
    }
    private void testB(){
        System.out.println(parent.test_string);
    }
} 
```

这是否允许我仍然访问`A`（其所有公共字段和方法）的同一实例？如果我`A.testA()`在 的特定实例的其他地方从另一个类调用`A`，`B`在那个`A`构造函数的`testB`函数中构造的那个会返回`"after (new)"`字符串吗？或者那是`A`因为java不是按值分配而不是引用的副本？有没有更好的方法来做到这一点？我只是把问题复杂化了吗？

我不确定要搜索什么，所以我找不到其他可以回答我问题的问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:40:45.710

在一个类中拥有公共字段并访问它们是破坏封装的。如果您必须拥有它们，请将它们包装在访问器中。

此外，如果您坚持“告诉不问”规则，那么实际上您的代码将是：

```
private void testB(){
    parent.printTestString();
} 
```

在 A 中你会有

```
public void printTestString(){
    System.out.println(test_string);
} 
```

回答你的问题

“这是否允许我仍然访问 A 的同一个实例（它的所有公共字段和方法）？如果我在 A 的特定实例的其他地方从另一个类调用 A.testA()”

是的，如果它是同一个实例。

“在 A 的构造函数的 testB 函数中构造的 B 会返回“after (new)”字符串吗？”

是的，成员字段将指向一个新的字符串引用，因此对该 A 实例的任何使用都将获得相同的值（尽管线程安全）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:49:42.140

是的，这是同一个例子。它的工作原理如下图所示：

![在此处输入图像描述](../Images/a66c8731e33f093fc28649c7519c0e99.png)

因此，通过 b.parent.foo 调用一个方法，它是通过在构造函数中传递的同一个实例调用的。

# comments - 如何向 Exuberant Ctags 配置文件添加注释？

> ID：10973224
> 
> 赞同：31
> 
> 时间：2012-06-10T23:37:07.270
> 
> 标签：comments, warnings, ctags, exuberant-ctags

我可以使用什么字符在 Exuberant Ctags`.ctags`文件中添加评论？

我想添加带有解释的评论，也许要禁用一些正则表达式。

但我找不到任何 ctags-exuberant 接受的评论字符！
我不断收到警告：

```
ctags: Warning: Ignoring non-option in /home/joey/.ctags 
```

这比错误要好，但仍然有点烦人。

我已经尝试`#` `//` `/* ... */`和`;`作为评论，但 ctags 试图解析它们！

这是一个示例文件，其中包含一些 ctags 会抱怨的注释：

```
# Add some more rules for Javascript
--langmap=javascript:+.jpp
--regex-javascript=/^[ \t]*var ([a-zA-Z_$][0-9a-zA-Z_$]*).*$/\1/v,variable/
--regex-javascript=/^[ \t]*this\.([a-zA-Z_$][0-9a-zA-Z_$]*)[ \t]*=.*$/\1/e,export/
--regex-javascript=/^[ \t]*([a-zA-Z_$][0-9a-zA-Z_$]*):.*$/\1/p,property/
--regex-javascript=/^\<function\>[ \t]*([a-zA-Z_$][0-9a-zA-Z_$]*)/\1/f,function/

# Define tags for the Coffeescript language
--langdef=coffee
--langmap=coffee:.coffee
--regex-coffee=/^class @?([a-zA-Z_$][0-9a-zA-Z_$]*)( extends [a-zA-Z_$][0-9a-zA-Z_$]*)?$/\1/c,class/
--regex-coffee=/^[ \t]*(@|this\.)([a-zA-Z_$][0-9a-zA-Z_$]*).*$/\2/e,export/
--regex-coffee=/^[ \t]*@?([a-zA-Z_$][0-9a-zA-Z_$]*):.*[-=]>.*$/\1/f,function/
--regex-coffee=/^[ \t]*([a-zA-Z_$][0-9a-zA-Z_$]*)[ \t]+=.*[-=]>.*$/\1/f,function/
--regex-coffee=/^[ \t]*([a-zA-Z_$][0-9a-zA-Z_$]*)[ \t]+=[^->\n]*$/\1/v,variable/
--regex-coffee=/^[ \t]*@?([a-zA-Z_$][0-9a-zA-Z_$]*):.*$/\1/p,property/ 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-18T09:35:36.313

你不能！我查看了源代码（感谢 apt-get source）。没有检查要忽略的行。相关代码在options.c中的parseFileOptions()

但有时评论是必需的，因此作为一种解决方法，我将评论作为正则表达式放入其中，这样它就不可能匹配任何东西。

```
--regex-coffee=/^(COMMENT: Disable next line when using prop tag)/\1/X,XXX/ 
```

`^`帮助匹配快速失败，而包装`(` `)`纯粹是为了视觉效果。

您的评论应该是有效的正则表达式，以避免在 stderr 上出现警告。`/`（这意味着必须避免未转义的 s，如果您使用任何`[` `]` `(`或`)`s，它们应该配对。）请参阅 Tom 的解决方案以避免这些限制。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-12T11:17:32.280

正如@joeytwiddle 指出的那样，解析器不支持注释，但有一种解决方法。

示例`.ctags`文件：

```
--regex-C=/$x/x/x/e/ The ctags parser currently doesn't support comments
--regex-C=/$x/x/x/e/ This is a work-around which works with '/' characters
--regex-C=/$x/x/x/e/ http://stackoverflow.com/questions/10973224/how-to-add-comments-to-an-exuberant-ctags-config-file
--regex-C=/$x/x/x/e/ 
--regex-C=/$x/x/x/e/ You can add whatever comment text you want here. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-01T02:22:15.157

如果您使用的是 Universal-ctag ( [https://ctags.io](https://ctags.io) )，则可以使用 '#' 作为评论的开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-15T22:19:10.090

鉴于评论不起作用，那么`.ctags.readme`文件呢......

对于大多数事情，您实际上并不需要评论，例如，您实际上并不需要下面的评论。

```
# Define tags for the Coffeescript language
--langdef=coffee
--langmap=coffee:.coffee 
```

但是，我可以看到您可能想要添加注释来解释一些令人费解的正则表达式，因此对于绝对需要它的每一行，您可以将其`.ctags.readme`作为降价文件复制粘贴到文件中：

```
Forgive me father for I have regexed
It was purely because I wanted some lovely coffee properties
```
--regex-coffee=/^[ \t]*@?([a-zA-Z_$][0-9a-zA-Z_$]*):.*$/\1/p,property/
``` 
```

### 保持同步`.ctags.readme`_`.ctags`

您可以在 ctags 文件的底部有一个块，用换行符分隔，然后删除这个最后一个块。

如果您的文件中只有一个换行符，`.ctags`则此 sed 将删除换行符后的所有行。

然后对这些行做一些 grepping`--regex`以将这些行附加`.ctags.readme`到`.ctags`.

```
sed -i '/^\s*$/,$d' .ctags
grep "^--regex" .ctags.readme >> .ctags 
```

# java-me - 如何在 LWUIT-1.5 中滚动或移动容器？

> ID：10973232
> 
> 赞同：0
> 
> 时间：2012-06-10T23:39:06.677
> 
> 标签：java-me, containers, lwuit

如何在不使用默认方法的情况下滚动容器

```
setScrollable(true),
setScrollableX(true), 
setScrollableY(true). 
```

这是我的代码，

```
btnLeft = new Button(imgLeft);      

btnRight = new Button(imgRight);

Container menuContainer = new Container(new BoxLayout(BoxLayout.X_AXIS));

 String[] menuArray = {"ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX"};
 for (index = 0; index < menuArray.length; index++) {
            btnMenu = new Button((String) locale.get(menuArray[index]));
 menuContainer.addComponent(btnMenu);
        }

 menuContainer.setScrollableX(true); 
```

单击左右按钮时，它应该向右和向左移动。

谁能说这个 LWUIT-1.5 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:27:19.583

如果你能告诉我们你想如何构建你的界面，那将会很有帮助。所以，我已经用 setScrollabeX 尝试过它并且它有效，但我正在使用焦点导航。如果要单击`Button`并进行滚动，则应输入以下功能`Button`：

在`Button`Right 的动作中，您必须将焦点设置`Button`在 the 的右侧，`Container`反之亦然。使用`Form`方法 setFocused(把组件放在这里) 或者使用`Button`方法 requestFocus()

# jquery - 这个 jquery 变量有什么问题

> ID：10973236
> 
> 赞同：2
> 
> 时间：2012-06-10T23:40:16.910
> 
> 标签：jquery

我对 Jquery 有点陌生，但尽我所能做得更好。

我有一个变量的问题，所以想得到一些帮助。已经尝试并在网上搜索了几个小时，但无法正常工作。

```
$(document).ready(function() {
    $("a").click(function(){
        var lek = "http://dif.se/wp-content/uploads/2012/03/bortajersey_topp.jpg";
        $(".contact").slideDown();
        var imageurl = $(".contact").text($("img", this).attr("src"));
        $(this).add("img",this).css("background", "yellow");
        $(".contact").append("<img src="+imageurl+">");
    });
}); 
```

我遇到问题的变量是 imageurl，我让它像我想要的“lek”变量一样工作。

谢谢大家，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:43:13.670

`imageurl`包含一个 jQuery 对象（因为大多数 jQuery 调用都是[可链接](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/)的）。这一行：

```
var imageurl =  $(".contact").text($("img", this).attr("src")); 
```

等效于：

```
var imageurl =  $(".contact");
imageurl.text($("img", this).attr("src")); 
```

试试这个：

```
var imageurl = $("img", this).attr("src"); // imageurl is a string
$(".contact").text(imageurl); 
```

# objective-c - IOS MapView标注调整大小

> ID：10973245
> 
> 赞同：5
> 
> 时间：2012-06-10T23:41:17.940
> 
> 标签：objective-c, ios, mapkit, callout

目前我正在使用 ios mkmapview 来显示一些在地图上添加了 pin 的 pois，当用户单击 pin 时，默认标注会出现并显示 poi 的标题，但有些标题很长而且标注不够宽，无法完全显示标题。我想要的只是让标注更宽，我该怎么做？我搜索了几个小时的答案，但都是关于为标注实现自定义类，有没有办法在不进一步实现的情况下重新调整它的大小？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:55:51.923

我在做几乎类似的事情。因为我不喜欢地图上的正常标注，所以我创建了一个自定义标注。在您的标头中实现 MKMapViewDelegate 并`(void)mapView:(MKMapView *)aMapView didSelectAnnotationView:(MKAnnotationView *)view`在您的实现文件中声明该方法。在这种方法中，我创建了一个显示注释内容的新视图。添加一个 UIButton 来关闭这个自定义视图。

```
//deselect the selected annotation
- (void)deselectAnnotation {
    selectedAnnotation = mapView.selectedAnnotations;
    for (int i = 0;i < selectedAnnotation.count; i++) {
        [mapView deselectAnnotation:[selectedAnnotation objectAtIndex:i] animated:NO];
    }
} 
```

# android - 使用 facebook 登录 ID 获取用户的 facebook url

> ID：10973249
> 
> 赞同：2
> 
> 时间：2012-06-10T23:42:14.770
> 
> 标签：android

我正在开发一个 android 应用程序，它允许用户通过提供他们的 facebook 登录详细信息来添加他们的 facebook 页面 url，因为我是 android 新手并且不知道如何做到这一点，任何帮助将不胜感激。一些代码会更好，谢谢！

# java - Java 异常安全可以变得不那么难看吗？

> ID：10973250
> 
> 赞同：1
> 
> 时间：2012-06-10T23:42:23.283
> 
> 标签：java, raii, exception-safety

给定以下代码：我们需要锁定模型，然后启动一个事务（这可能会引发异常，因此我们必须确保释放锁），然后执行类似于获取数据库连接的操作（这可能会引发异常)，然后做一些可能引发需要还原事务的异常的事情。这是 Java 6，所以我们没有可用的 Java 7 好东西。

```
SomeClass someMethod() 
throws SomeException {
  acquireWriteLock();
  try {
    startTransaction();
    try {
      DBConnection d = openDBConnection();
      try {
        doStuff(d);
        commitTransaction();
      } finally {
        d.close();
      }
    } catch (SomeException e) {
      handleSomeException(e);
      revertTransaction();
      throw e;
    } catch (Throwable t) {
      revertTransaction();  // Error: method must return a value of SomeClass
    }
  } finally {
    releaseWriteLock();
  }
} 
```

可以将其重写为更具可读性和更少冗长吗？

只是为了好玩：当您看到以下内容时，您会怎么做？

```
DBConnection d = null;
try {
  acquireWriteLock();
  startTransaction();
  d = openDBConnection();
  try {
    doStuff(d);
    commitTransaction();
  } catch (SomeException e) {
    handleSomeException(e);
    revertTransaction();
  }
} finally {
  d.close();
  releaseWriteLock();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:26:49.470

如果您切换到 Java 7，则可以大大简化它。否则，您可能不需要做太多*事情*。

您*可以*尝试以下想法：

*   将 DB 连接 + 事务管理 + 锁管理重构为通用基类中的通用方法，每个事务类型都有一个子类

*   将DB连接+事务管理+锁管理重构为final类中的通用方法，事务类型有一个接口，每个有一个实现类。

然而，除非这种特定的模式被重复很多很多次，否则这种重构可能是一个坏主意。（您将创建一个本地成语，并且读者必须在含义变得清晰之前学习该成语。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:49:38.727

Without upgrading to Java 7 you can combine some of this so you only need a single try-catch.

```
SomeClass someMethod() throws SomeException {
   boolean committed = false;
   DBConnection d = null;
   acquireWriteLock();
   try {
      startTransaction();
      d = openDBConnection();
      doStuff(d);
      commitTransaction();
      committed = true;
   } catch (SomeException e) {
      handleSomeException(e);
      throw e;
   } finally {
     if( d != null ) d.close();
     if( !committed ) revertTransaction();
     releaseWriteLock();
   }
} 
```

The trick is to make sure revertTransaction() and DBConnection.close() don't throw anything, but if you can't do that then you can put releaseWriteLock() in another finally clause. If you really wanted to improve this more you could do some of the refactorings Stephen C mentioned. Doing something like putting the acquire/release writeLock, start/rollback transaction, and open/close DBConnection are done in base class or some abstract operation class.

# objective-c - 更改 UITableView 的编辑样式

> ID：10973256
> 
> 赞同：0
> 
> 时间：2012-06-10T23:43:17.970
> 
> 标签：objective-c, ios

浏览 BigNerdRanch 的 iOS 指南，其中一项任务是在 UITableView 中的项目列表底部添加一个“No More Items”单元格。因此，我将该项目添加到底部，但我想制作它以便我无法删除它并且我无法重新排序它。

我可以通过执行以下操作来设置重新排序：canMoveRowAtIndexSource 为 NO。但是，删除按钮仍然出现。我知道我可以拒绝我不想删除的行的删除确认，但我根本不希望删除按钮出现。

我知道我可以通过将 canEditRowAtIndexPath 设置为 NO 来摆脱删除按钮。但是，当我进入编辑模式时，这些行看起来很不稳定，因为它们不再缩进。

看起来我可以缩进单元格的内容，但不能缩进单元格本身。那正确吗？

解决这个问题的最佳方法是什么？即使是方法的名称也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:44:01.780

我所做的是使用editingStyleForRowAtIndexPath 并检查单元格是否可删除，如下所示：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
     if(... can delete ...)
    {
        return UITableViewCellEditingStyleDelete;
    }

    return UITableViewCellEditingStyleNone;
} 
```

# php - htaccess 将带有 var 的 url 从无文件扩展名重定向到文件扩展名

> ID：10973257
> 
> 赞同：0
> 
> 时间：2012-06-10T23:43:20.307
> 
> 标签：php, .htaccess, redirect

问题是，由于某种原因，googlebot 在抓取某个页面时会收到一堆错误 404，但我认为一切正常，我认为......

使用 htaccess，我用 vars 重写了一个用于 seo 的页面，所以：

```
RewriteRule   ^feeds/([^/]*)\.xml/?$   /rss/feeds.php?cat=$1 [QSA,NC,L] 
```

所以我得到`www.url.com/feeds/category.xml` 而不是

```
www.url.com/feeds.php?cat=category 
```

我还调整了页面上的所有网址以遵循此规则，就像我说的一切正常... googlebot 出于某种原因只看到`www.url.com/feeds/category`并且确实看到了 .xml 扩展名。

不确定它是否会起作用，但我希望在 htaccess 中设置一个规则以重定向`www.url.com/feeds/category`到`www.url.com/feeds/category.xml`即使发生这种情况，但不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:57:38.650

也许试试

```
RewriteRule   ^feeds/([^/]+)/?$   /feeds/$1.xml [R,NC] 
```

这将重定向`www.url.com/feeds/category`到`www.url.com/feeds/category.xml`，使用 HTTP 302 重定向。`R`如果您不希望它使用 HTTP 302 重定向，请删除该标志，但就`www.url.com/feeds/category`google 而言，这将是一个有效的 URL。以防万一：[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)。

# actionscript-3 - 围绕中心旋转一个正方形

> ID：10973259
> 
> 赞同：1
> 
> 时间：2012-06-10T23:43:27.957
> 
> 标签：actionscript-3, flash, actionscript, rotation, vanishing-point

我在 Sprite 中有 3 个正方形（50 像素 x 50 像素），一个相邻。每个的轴心在 0, 0。第一个正方形 X, Y: 0, 0 第二个正方形 X, Y: 50, 0 第三个正方形 X, Y: 100, 0 我想围绕它的中心线旋转每个正方形。我似乎无法弄清楚如何设置消失点，以便所有正方形围绕它们各自的点旋转，而不是所有正方形都围绕同一点旋转。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:08:19.067

基本上，您需要在盒子旋转时移动它才能获得这种效果。由于您还知道框的宽度/高度和枢轴点位置，因此计算并不难。

但是，为什么要自己计算呢？使用[TweenLite](http://www.greensock.com/tweenlite/)，您可以使用[TransformAroundCenterPlugin](http://www.greensock.com/as/docs/tween/com/greensock/plugins/TransformAroundCenterPlugin.html)，它会为您处理转换。我建议使用它。如果您不想对其进行补间，请将补间持续时间（第二个参数）设置为`0`.

```
// Activate plugin (should be called once)
TweenPlugin.activate([TransformAroundPointPlugin]);

// Transform your boxes around it's center, does not use the pivot point.
TweenLite.to(this.mcBox1, 1, new TweenLiteVars().transformAroundCenter({rotationX: 50}));
TweenLite.to(this.mcBox2, 1, new TweenLiteVars().transformAroundCenter({rotationX: 190}));
TweenLite.to(this.mcBox3, 0, new TweenLiteVars().transformAroundCenter({rotationX: 5})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:46:30.647

您可以通过将子动画剪辑旋转并平移到新位置来进行旋转。要求子影片剪辑的轴心与它的注册点重合

在下面的代码中，持有者是你的精灵，内容是方块。（要求方格有支点，与注册点重合）

PS：持有人的宽度和高度必须大于内容的。假设这里的持有人是某种大容器（比如舞台）。

```
var holder_Mc:MovieClip = holder_Mc
var content_Mc:MovieClip  = holder_Mc.content_Mc ;
var rotation_val_num:Number = 50// in degrees

        var bnd = holder_Mc.getBounds(MovieClip(holder_Mc.parent)) ;
        var cw:Number = bnd.width ;
        var ch:Number = bnd.height;

        var cx:Number = bnd.x ; 
        var cy:Number = bnd.y ; 
            content_Mc.rotation = rotation_val_num ;

            var bnd2 = holder_Mc.getBounds(MovieClip(holder_Mc.parent)) ;
            var cw2 = bnd2.width ;
            var ch2 = bnd2.height;

            var cx2 = bnd2.x ; 
            var cy2 = bnd2.y ; 

            var dx = Math.abs( holder_Mc.x - cx2 ) ;
            var dy = Math.abs( holder_Mc.y - cy2) ;

            holder_Mc.x  = cx + cw/2 + dx - cw2/2
            holder_Mc.y  = cy + ch/2 + dy - ch2/2 
```

# ruby-on-rails - 从 before_create 钩子中构建的 has_many 关联中检索默认的 belongs_to 记录？

> ID：10973263
> 
> 赞同：0
> 
> 时间：2012-06-10T23:44:32.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

我有 2 个模型，`User`并且`Stash`.

一个 User 有很多 stash 和一个 default_stash。一个 Stash 有一个所有者（用户）。

在创建用户之前，我希望它构建一个 Stash 并将该 Stash 分配给 self.default_stash。按照此处的说明[Rails - Best-Practice: How to createdependent has_one 关系](https://stackoverflow.com/questions/3808782/rails-best-practice-how-to-create-dependent-has-one-relations)我创建了 Stash 关系，但是我不能同时“创建”belongs_to 关系。

**用户.rb**

```
has_many :stashes, foreign_key: :owner_id
belongs_to :default_stash, class_name: 'Stash', foreign_key: :owner_id

before_create :build_default_stash
def build_default_stash
  self.default_stash = stashes.build
  true
end 
```

**存储.rb**

```
belongs_to :owner, class_name: 'User' 
```

此时可以找到 Stash`user.stashes`但`user.default_stash`仍然为零，因为`stashes.build`在 before_create 块中没有返回 id。

我需要的可以通过将以下内容添加到**User.rb来实现**

```
after_create :force_assign_default_stash
def force_assign_default_stash
  update_attribute(:default_stash, stashes.first)
end 
```

但是如果可能的话，我更愿意将所有内容都保留在`before_create`块内，以进行验证等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:23:42.723

我同意你的观点，你所描述的*应该可以*工作，但是如果你在内存中建立相关的记录并期望它们正确地保存在一起——所有的东西都连接起来——那么 ActiveRecord 对你如何定义它们特别挑剔。

但是您*可以*在不更改`before_create`.

通常的问题是，您需要向 AR 提示哪些关系彼此相反。`has_many`and`belongs_to`方法有一个选项`:inverse_of`。在您的情况下，问题是您有一个关系 ( `Stash#owner`) 的一侧实际上是另一侧 (`User#stashes`和`User#default_stash`) 的两个倒数，那么您将设置为什么`inverse_of`for `Stash#owner`？

解决方案是在 Stash 中添加一个`has_one`（称其为`owner_as_default`），以平衡事情。然后您可以添加`inverse_of`到所有定义中，每个定义都在另一侧标识其逆。最终结果是这样的：

```
class User < ActiveRecord::Base
  has_many   :stashes,       foreign_key: :owner_id, inverse_of: :owner
  belongs_to :default_stash, class_name: "Stash",    inverse_of: :owner_as_default

  ...
end

class Stash < ActiveRecord::Base
  belongs_to :owner,            class_name: "User", inverse_of: :stashes
  has_one    :owner_as_default, class_name: "User",
    foreign_key: :default_stash_id, inverse_of: :default_stash
end 
```

（另外，您的 belongs_to 上不需要外键。）

从那里，你`before_create`应该像你写的那样工作。

是的，这似乎是很多多余的定义。ActiveRecord 不能从外键中找出所有内容吗？我总是觉得我通过让一侧意识到它的反面来打破一些墙壁。也许在未来的 Rails 版本中，这将被解决。

# html - Firefox：如何在 td 中绝对定位 div

> ID：10973264
> 
> 赞同：0
> 
> 时间：2012-06-10T23:44:38.627
> 
> 标签：html, css, firefox, cross-browser, css-position

我正在研究一种广告替换脚本。有时广告会出现在这样的标签内：

```
<tr>
  <td align="right" width="40%"><a><img src="ad.jpg"></a></td>
  <td>123</td>
</tr> 
```

关键是我无法更改广告的显示值；出于本练习的目的，我必须用一个不透明的 div 覆盖它，该 div 需要绝对定位以及继承边距和浮动等。

当在 div 内发现广告并且恰好向左或向右浮动时，将 div 定位在其上方，并使用适当的 left:0；或对：0；css 属性非常简单。但是，当广告由 td 设置样式时，即使 td 附加了 position:relative; ，Firefox 似乎也不能完全正确地呈现它。风格。

这是它在 Chrome\IE 中的样子：（灰色单元格是第一个 td，红色是叠加层，内部无边框单元格是要叠加的 iframe - 你看不太清楚，因为它正在被叠加:) ) ![在此处输入图像描述](../Images/5f64582edca87fb009398a058384390b.png)

这是它在 Firefox 中的样子： ![在此处输入图像描述](../Images/fa5a04272f37bb661f4a47fc49234120.png)

叠加层的代码非常简单......

```
<div style="right:0;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;position:absolute;z-index:9999;background:red;width:300px;height:280px;"></div> 
```

...并且它被添加到有问题的 td 之前。

右：0；财产使它从 td 内部一路射出，即使它被命令相对定位。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:09:31.570

您可以添加一个位置：相对包装器 div，如下面的小提琴：http: [//jsfiddle.net/qfquj/](http://jsfiddle.net/qfquj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T01:53:00.207

您也可以将图像设置为背景图像，而不是使用 img 标签...允许您在其中添加一个具有透明度或任何您想要的 div。

# c# - WPF/XAML 文盲的学习资源

> ID：10973265
> 
> 赞同：2
> 
> 时间：2012-06-10T23:45:09.207
> 
> 标签：c#, wpf, xaml

好的，我知道以前有人问过这个问题，但是以前提出的问题的解决方案对我没有帮助。我以前从未在 XAML/WPF 中制作过应用程序，当我尝试学习它时，我感到非常愚蠢，但随着 Windows 8 发布预览版的发布，看起来我*必须*学习它。

你有什么资源可以推荐给像我这样愚蠢的人吗？

谢谢你们

具体来说，我的主要问题是不知道如何在 XAML 中*正确*定位/对齐窗口上的东西。我觉得非常难以理解。我习惯于对接事物等等，但我没有看到 XAML 的任何对接选项。我也习惯于绝对定位 - 或从窗口/屏幕边缘通过相对论定位 - 但这种方式在我尝试过的 XAML 中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:53:56.293

> 具体来说，我的主要问题是不知道如何在 XAML 中正确定位/对齐窗口上的东西。我觉得非常难以理解。我习惯于对接事物等等，但我没有看到 XAML 的任何对接选项。我也习惯于绝对定位 - 或从窗口/屏幕边缘通过相对论定位 - 但这种方式在我尝试过的 XAML 中不起作用。

关键是了解[布局系统](http://msdn.microsoft.com/en-us/library/ms745058.aspx)在 Xaml 中的工作原理。

一旦您了解了整体布局方法的差异，那么了解各个[面板](http://msdn.microsoft.com/en-us/library/ms754152.aspx)和[对齐方式](http://msdn.microsoft.com/en-us/library/ms751709.aspx)会使大多数事情变得平易近人。

主要区别在于*容器*通常处理子项的布局。您通常不需要停靠或对齐元素，而是让父级处理布局，并使用附加属性（即：）`Grid.Row`将子级定位在父级中。

这使得处理分辨率独立性变得更加简单，尽管一开始需要一些时间来适应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T23:54:20.923

您可以使用`Grid`、`Canvas`、`StackPanel`或`WrapPanel`（以及其他）来帮助定位事物。

它通常是上述控件的组合，但我见过的最常见的方法是使用`Grid`创建行和列，并将控件放置在其中。

我会推荐 Josh Smith 的教程[http://www.codeproject.com/Articles/18251/A-Guided-Tour-of-WPF-Part-2-Layout](http://www.codeproject.com/Articles/18251/A-Guided-Tour-of-WPF-Part-2-Layout)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T01:15:42.323

如需深入学习资源，请查看 Pro WPF in C# 2010 书：[http ://www.amazon.com/Pro-WPF-2010-Presentation-Foundation/dp/1430272058/ref=sr_1_1?ie=UTF8&qid= 1339377007&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/1430272058)

它包括几章关于元素和定位如何工作的章节。我发现它非常有帮助，并会推荐它。

如果您对阅读如此冗长的内容不感兴趣，我建议您查看 MSDN 上不同布局控件的示例代码，例如`Grid`、`StackPanel`和`DockPanel`.

# media-player - 您如何从 MediaPlayer 获取艺术家和歌曲名称？

> ID：10973266
> 
> 赞同：2
> 
> 时间：2012-06-10T23:45:52.180
> 
> 标签：media-player

我正在为在线广播电台构建一个简单的应用程序。我使用此代码使用 MediaPlayer 流式传输电台。它适用于一个问题。我不知道如何向听众展示他们实际上在听什么。我的代码：

```
package com.xxxx.android;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.provider.MediaStore.Audio;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;

@SuppressWarnings("unused")
public class MainActivity extends Activity implements OnClickListener {

private final static String RADIO_STATION_URL = "http://";
private Button buttonPlay;
private Button buttonStopPlay;
private MediaPlayer player;
private TextView showdisplay;
private String strInfo; 

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);    

initializeUIElements();

initializeMediaPlayer();       
}    

private void initializeUIElements() {
buttonPlay = (Button) findViewById(R.id.buttonPlay);
buttonPlay.setOnClickListener(this);

buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
buttonStopPlay.setEnabled(false);
buttonStopPlay.setOnClickListener(this);
showdisplay = (TextView) findViewById(R.id.lblDisplay);
}

public void onClick(View v) {
if (v == buttonPlay) {
    startPlaying();
} else if (v == buttonStopPlay) {
    stopPlaying();
}
}

private void startPlaying() {
buttonStopPlay.setEnabled(true);
buttonPlay.setEnabled(false);
showdisplay.setText("Buffering..");        

player.prepareAsync();

player.setOnPreparedListener(new OnPreparedListener() {

    public void onPrepared(MediaPlayer mp) {
        player.start(); 
    }   
});
}

private void stopPlaying() {
if (player.isPlaying()) {
    player.stop();
    player.release();
    initializeMediaPlayer();
}

buttonPlay.setEnabled(true);
buttonStopPlay.setEnabled(false); 
}

private void initializeMediaPlayer() {
player = new MediaPlayer();
try {
    player.setDataSource(RADIO_STATION_URL);
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalStateException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

    public void onBufferingUpdate(MediaPlayer mp, int percent) {
       Log.i("Buffering", "" + percent);
    }
});       
}

@Override
protected void onPause() {
super.onPause();
if (player.isPlaying()) {
    player.stop();
}
} 
```

如何...具体...并且非常详细...我是否使用 MediaPlayer 中的广播流中的艺术家和歌曲标题更新 Textview“showdisplay”？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T23:58:26.003

快速研究告诉我，`android.media.MediaPlayer`只关心流数据，不关心其他。因此，如果您还想检索流的元数据（电台名称、艺术家、歌曲等），则必须使用不同的对象单独进行。

该`android.media.MediaMetadataRetreiver`课程似乎就是为了做到这一点而构建的。看起来您应该研究该`MetadataRetreiver.extractMetadata()`功能以及`METADATA_KEY_ARTIST`和`METADATA_KEY_TITLE`键。

这是[MediaMetadataRetreiver API](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)。另外，请查看[之前的 StackOverflow 问题](https://stackoverflow.com/questions/6638251/how-retrieve-metadata-from-shoutcast-on-android)。

我不是 Android 开发人员，所以我不能保证我的代码是正确的，但我认为它看起来像这样：

```
MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
metaRetreiver.setDataSource(RADIO_STATION_URL)
String artist =  metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST);
String title = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE); 
```

（完全披露：从[这里](https://stackoverflow.com/questions/10385178/mediametadataretriever-extractmetadata-method-returning-null)修改的代码）

# linq-to-sql - 多个 SubmitChanges 的风险是什么？

> ID：10973268
> 
> 赞同：0
> 
> 时间：2012-06-10T23:46:04.387
> 
> 标签：linq-to-sql

下面的代码是否存在如果两个人同时提交会检索到错误的 s.saleID 的风险？

```
 protected void submitSale(int paymentTypeID)
    {
        tadbDataContext tadb = new tadbDataContext();

        ta_sale s = new ta_sale();

        decimal total = decimal.Parse(lblTotal.Value);

        s.paymentTypeID = paymentTypeID;
        s.time = DateTime.Now;
        s.totalSale = total;
        tadb.ta_sales.InsertOnSubmit(s);
        tadb.SubmitChanges();

        char[] drinksSeparator = new char[] {'|'};
        char[] rowSeparator = new char[] { ':' };
        string drinkString = lblSummaryQty.Value.Substring(0, lblSummaryQty.Value.Length - 1);
        string[] arrDrinks = drinkString.Split(drinksSeparator);

        foreach (string row in arrDrinks)
        {
            string[] arrDrink = row.Split(rowSeparator);
            int rowID = Convert.ToInt16(arrDrink[0]);
            int rowQty = Convert.ToInt16(arrDrink[1]);

            ta_saleDetail sd = new ta_saleDetail();
            sd.drinkID = rowID;
            sd.quantity = rowQty;
            sd.saleID = s.saleID;
            tadb.ta_saleDetails.InsertOnSubmit(sd);
        }

       tadb.SubmitChanges();
    }
} 
```

如果是这样，我应该怎么做才能确保它是原子的？（我认为应该没问题，但要仔细检查！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:04:46.537

可以肯定的是，只需编写一个调用**submitSale 2 次甚至更多次的****测试**并使其几乎同时提交更改即可。如果测试失败，请使用**lock**语句，但要小心，它会导致**死锁**。更改**submitSale**后，只需以高负载（大量同时调用）再次测试它。以此类推，直到您通过测试。

# java - Android - Java if (a OR b)?

> ID：10973269
> 
> 赞同：2
> 
> 时间：2012-06-10T23:46:20.003
> 
> 标签：java, android

我想知道如何`OR`表达`Java`。我一直以为是`||`。但这在我的应用程序中不起作用`Android`。

所以例如在这里：

```
if (team1.getText() **"OR"?** team2.getText() == "myteam"); 
```

如何设置`OR`语句？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T23:47:32.937

`if("myteam".equals(team1.getText()) || "myteam".equals(team2.getText()))`

你不能做类似的事情`if((foo || bar).equals(anotherString))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T23:50:55.120

其中一些可能会导致问题。`if(team1.getText())`将中断，因为它不是布尔语句，因此您不能`||`在其上使用运算符。

另一个问题是您比较字符串的方法。Java 中的字符串不能与 == 运算符进行比较，因为它试图比较两个 String 对象或文字或混合在内存中的位置，除非它们是 String 的相同实例，否则不会返回 true。

您必须将字符串与`equals()`String 对象或字符串文字上的方法进行比较。

# python - OSX 上的 Virtualenv 使用与我指定的仅 32 位 Python 二进制文件不同的通用 Python 二进制文件

> ID：10973270
> 
> 赞同：2
> 
> 时间：2012-06-10T23:46:50.730
> 
> 标签：python, macos, 32bit-64bit, virtualenv, universal-binary

在 OSX 上，我有一个 Python 通用二进制文件，它只包含 32 位代码：

```
$ file $(python3.2-32)
/Library/Frameworks/Python.framework/Versions/3.2/bin/python3.2-32: Mach-O universal binary with 1 architecture
/Library/Frameworks/Python.framework/Versions/3.2/bin/python3.2-32 (for architecture i386): Mach-O executable i386 
```

我使用这个二进制文件创建了一个 virtualenv：

```
$ virtualenv -p python3.2-32 myenv
Running virtualenv with interpreter /Library/Frameworks/Python.framework/Versions/3.2/bin/python3.2-32
New python executable in myenv/bin/python
Please make sure you remove any previous custom paths from your /Users/jhartley/.pydistutils.cfg file.
Installing distribute........................................................................................................................................................................done.
Installing pip...............done. 
```

但是 virtualenv 包含一个包含 32 位和 64 位代码的二进制文件：

```
$ . myenv/bin/activate
(myenv)$ file $(which python)
/Users/jhartley/myenv/bin/python: Mach-O universal binary with 2 architectures
/Users/jhartley/myenv/bin/python (for architecture i386):   Mach-O executable i386
/Users/jhartley/myenv/bin/python (for architecture x86_64): Mach-O 64-bit executable x86_64 
```

我需要使用仅包含 32 位代码而不是 64 位代码的 Python 二进制文件。

我不介意它是一个通用二进制文件，只要它默认以 32 位模式运行，我不必使用“arch -i386”调用它，因为我无法控制这个应用程序的启动方式.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:27:35.347

我不确定为什么会发生这种行为，但我可以提供一种解决方法。您可以一次将 virtualenv 的 python 剥离到 i386。然后它将不再需要环境标志来确保 32 位：

```
source bin/activate
file `which python`
# .../bin/python: Mach-O universal binary with 2 architectures
# .../bin/python (for architecture i386):   Mach-O executable i386
# .../bin/python (for architecture x86_64): Mach-O 64-bit executable x86_64
lipo -thin i386 `which python` -output `which python`
file `which python`
# .../bin/python: Mach-O executable i386 
```

# css - 无序列表不会在 WordPress 自定义主题帖子中显示项目符号

> ID：10973275
> 
> 赞同：1
> 
> 时间：2012-06-10T23:47:35.543
> 
> 标签：css, wordpress, html-lists

我在 WordPress 博客文章中有一个不显示项目符号的无序列表。我已经尝试了多种方法来显示它，但它不会。

这是链接（桌面图像上方的文本）： [http ://www.sherigarvin.com/work-project-3/](http://www.sherigarvin.com/work-project-3/)

这是我尝试过的：

*   移除了 css 重置中的 ul/ol 规则
*   使用 list-style:disc 添加了特定的 ul 规则；& 列表样式类型：光盘；添加列表样式：光盘；到 CSS 重置
*   使用 list-style:disc 向 style.css 添加一般规则；& 列表样式类型：光盘；
*   list-style-type:disc 的内联样式；

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:50:03.250

我建议`margin-left`在`li`元素中添加 a ，或者可能声明：（`list-style-position: inside;`这将放置在元素`disc`宽度的内部`li`，以证明规则是否适用）。

```
ul li {
    list-style-type: disc;
    margin-left: 1.5em; /* which should give space for the disc to show */
    list-style-position: inside; /* will put the disc inside of the li
                                    element, for debugging purposes */
} 
```

参考：

*   [`list-style-type`](https://developer.mozilla.org/en/CSS/list-style-type).
*   [`list-style-position`](https://developer.mozilla.org/en/CSS/list-style-position).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T17:15:01.890

要查看的另一件事是查看您是否`display:block`在某处使用了 css 元素。通过删除`display:block`它会使列表样式再次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T20:52:58.337

这是我在 UL 上使用的一种内联样式，似乎效果更好：

```
<ul style="list-style-type: disc;
margin-left: 2.5em; 
list-style-position: outside;"> 
```

# linux - 如何在 Apache 中更改包的路径？

> ID：10973276
> 
> 赞同：1
> 
> 时间：2012-06-10T23:47:39.497
> 
> 标签：linux, apache, debian

我安装了新版本的 Apache 服务器，我使用了诸如`--with-PACKAGE`配置 Apache 以使用包的自定义路径之类的选项，但 Apache 已经安装。如何更改包的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:48:45.703

这样做的标准方法`./configure`是这样的：

```
./configure ... --with-PACKAGE=<folder> 
```

例如：

```
./configure --with-ssl=/usr/local 
```

如果您的包刚刚移动到另一个位置（即它不再位于旧位置），只需重新启动 Apache 即可。如果没有，请检查以下输出`ldd`：

```
ldd /path/to/httpd 
```

有时`/usr/local/lib`默认情况下不为链接器启用；您可以将其添加到`/etc/ld.so.conf`或`/etc/ld.so.conf.d/`- 取决于您的偏好。之后，您必须运行`lconfig`以提交更改。

# android - 用于创建 Android 程序的替代语言或工具链

> ID：10973281
> 
> 赞同：2
> 
> 时间：2012-06-10T23:48:05.240
> 
> 标签：android, ide, apk, dalvik, toolchain

Android 是否有某种替代工具链或语言可以生成独立的 APK 文件？

理想情况下，它不应该**依赖**于庞大且不断变化、不断升级的官方 Android SDK。

作为一个比喻，尽管微软一直在发布新的 Visual Studio，但我正在寻找一个与[PowerBASIC](http://www.powerbasic.com/)和[Mingw如何以普通 Windows 为目标的粗略等价物。](http://mingw.org)

如果此语言或工具链本身是 Android 程序，则加分...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T00:08:43.320

您可能知道也可能不知道，Android 工具链基于一些简单的想法：

*   您的代码是使用普通的旧 java 编译器编译的，并链接到 Android 存根 (android.jar) 以链接到系统库。
*   编译后代码转换为dex格式。您实际上可以自己运行它，只需执行`dx --help`. 该`dx`工具的工作是获取 Java 类文件并将它们转换为 dex 代码，这是一个非常简单的编译，涉及从基于堆栈到基于寄存器的 vm，以及一些其他更改。
*   完成此操作后，使用一组 apk 工具构建 apk。它曾经是`apkbuilder`，但此后已被弃用。您实际上也可以自己运行它。所有的 APK 只是清单、资源和 dex 形式的所有代码的单个文件的集合。（即，许多 .class 文件编译为单个 .dex ，由于包含指针网络，该文件要小得多）。

因此，Android 工具链并没有那么复杂。自定义构建过程由 ant 构建规则处理，这些规则在 SDK 范围内定义`build.xml`，您可以在`platform-tools/`目录 (iirc) 中找到该规则。但是，要使用此自定义构建环境生成新的基线项目，您只需使用`android update project`命令。

虽然我不确定这是否是您希望的响应，但我希望它能消除构建过程的歧义。它并不是一个真正复杂的工具链，其中大部分是现成的 Java，而不是特定于 Android 的（使其特定于 Android 的是用于动态链接系统代码的库特定存根）。除此之外，一旦你有了一组类，你只需要运行一些命令来制作一个 Android 解包的可执行 APK。我怀疑任何针对 JVM 的工具（并且能够与 Android 特定的动态链接 API 链接）都可以执行类似的生成类文件并使用此工具链来编译其余部分的过程，尽管显然是自动化的 ant 构建过程使它更简单。

编辑：

经过一番挖掘，我发现[了这个相关的 android-developers 线程。](https://groups.google.com/forum/?fromgroups#!topic/android-developers/sls2uFYWuWE) 令人不安的报价：

> 目前，我们根本没有资源来支持想要使用自己的构建系统的人，但我们真的希望我们可以。在许多方面，我们试图通过将逻辑明确分离到 eclipse 或 ant 特定代码（因此在工具和 ADT 中到处都有大量 jar 文件）来简化其他工具供应商，但这不是其中之一。

但是，您也可能会发现[此链接](http://asantoso.wordpress.com/2009/09/15/how-to-build-android-application-package-apk-from-the-command-line-using-the-sdk-tools-continuously-integrated-using-cruisecontrol/)很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T01:40:26.977

[Terminal-IDE](http://code.google.com/p/terminal-ide/)和[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui)几乎就是我想要的。两者都在 Android 上运行。

# asp.net - 升级到 .net 4.0 后有时会变慢

> ID：10973291
> 
> 赞同：1
> 
> 时间：2012-06-10T23:50:31.097
> 
> 标签：asp.net, .net

我们有一个相当大的网络应用程序，它是 .net 2.0。我们将它升级到 .net 4.0 并且页面加载不会偶尔变慢。我会说十次左右，刷新一次，它会立即再次加载，但我不确定升级到 4.0 后可能导致这些挂起的原因。更新后是否存在可能导致此问题的常见问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:00:48.703

可能还有其他原因，但首先想到的是应用程序池关闭，这可能会导致页面加载稍有延迟。您是否验证过随机页面缓慢是否是由您的应用程序池关闭引起的？

要验证它是否与应用程序池无关，请将 AppPool 关闭设置为 0，使其不会关闭，然后检查页面重新加载是否仍然需要时间。

# ruby-on-rails - 为什么 ActiveRecord 在请求之间缓存 find(:all)？

> ID：10973295
> 
> 赞同：0
> 
> 时间：2012-06-10T23:51:07.663
> 
> 标签：ruby-on-rails, postgresql, caching, activerecord, rails-postgresql

我的控制器中有这个：

```
def frontpage
  @sections = Section.all
end 
```

在生产环境中，查询似乎在请求之间被缓存。直到我重新启动一个应用程序，`@sections`总是一样的。为什么以及如何解决这个问题？我还应该提到，我在生产中使用 Postgres，这可能是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:56:39.383

我相信在您的生产环境中，您已经在某处启用了缓存。虽然我无法告诉你原因和地点，但我可以给你一个解决方案：

```
def frontpage
    uncached do
        @sections = find(:all)
    end
end 
```

至少它应该做的伎俩

e：这样做的好处是，它只影响块内的代码。其他所有内容仍应被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:23:19.483

请求之间不会缓存查询，但可以缓存操作。您`cache_action`的控制器中是否定义了其他缓存机制？

编辑：要确定正在缓存的是否是您的操作，请将其放入您的操作中：

```
def frontpage
  return render :text => Time.now.to_s
  ...
end 
```

并且看到它的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:32:55.587

从相关问题中查看[此答案。](https://stackoverflow.com/a/2462950/765357)如果您的配置设置为缓存，那么您应该将其关闭（至少在开发中）。否则，如果您想使特定页面的缓存无效，您可以考虑在控制器中定义一个方法来执行此操作：

```
private
def invalidate_cache
     Rails.cache.delete("/sections")
end 
```

您需要指定何时调用它，但它可以解决问题。

# php - 需要时间戳帮助的日期

> ID：10973297
> 
> 赞同：1
> 
> 时间：2012-06-10T23:51:18.163
> 
> 标签：php, mysql, sql, codeigniter

我正在使用 jQuery DatePicker 从日期和日期中进行选择。当我选择一个日期时，我使用 strtotime 函数将其转换为时间戳，我的数据库中存储了一些日期，列类型为时间戳。

当我使用 strtotime 从日期选择器转换所选日期时

```
 $from_date = strtotime($form['from-date']); 
```

它给了我这样的东西

```
 1338508800 
```

虽然存储在我的数据库表中的日期看起来像这样

```
2012-06-09 02:24:25 
```

我想根据选择的起始日期和日期查询记录。但查询没有正确获取我的日期。

如何更改所选日期，以便在两个所选日期之间给我结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T23:57:51.653

你要`date('Y-m-d H:i:s',strtotime($form['from-date']));`

# javascript - Galleria - 每次更改图片时运行 JavaScript 函数

> ID：10973304
> 
> 赞同：1
> 
> 时间：2012-06-10T23:52:54.840
> 
> 标签：javascript, jquery, galleria

我试图在 Galleria JavaScript 文件中找到一个地方，我告诉它每次更改当前图片时运行 JavaScript 函数（上一个、下一个或单击缩略图）

有没有在广场有经验的人有什么想法？ [http://galleria.io/](http://galleria.io/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T23:59:37.183

当您设置图库绑定到图像功能时，您将在每次图像更改时收到事件。我用它来将文本加载到我页面的另一个区域，就像这样。

Galleria.ready(function() { this.bind("image", function(e) { $("#text_div").text(arrayOfText[e.index]); }); });

为了确保您的设置正确，请像这样使用它，

Galleria.loadTheme('galleria/themes/kscreates/galleria.classic.js'); Galleria.configure(); Galleria.ready(function() { this.bind("image", function(e) { console.log(e.index); }); }); Galleria.run('#galleria');

并查看您的 Safari 控制台，您将看到当前显示图像的索引。

希望这可以帮助。

# jquery - 将 jQuery Masonry 与流沙集成

> ID：10973306
> 
> 赞同：3
> 
> 时间：2012-06-10T23:53:26.550
> 
> 标签：jquery, html

我尝试将 jQuery Masonry 与 Quicksand 集成，但没有成功。流沙工作，但砌体没有。这是我的脚本：

```
$(document).ready(function(){

            // Clone portfolio items to get a second collection for Quicksand plugin
            var $portfolioClone = $(".theMagz").clone();

            $(function(){
                var $container = $('.theMagz');
                $container.imagesLoaded( function() {
                    $container.masonry({
                        gutterWidth:20
                    });
                });
            });

            // Attempt to call Quicksand on every click event handler
            $("#vers a").click(function(e){

                $("#vers li").removeClass("current");   

                // Get the class attribute value of the clicked link
                var $filterClass = $(this).parent().attr("class");

                if ( $filterClass == "all" ) {
                    var $filteredPortfolio = $portfolioClone.find(".item");
                } else {
                    var $filteredPortfolio = $portfolioClone.find(".item[data-type~=" + $filterClass + "]");
                }

                // Call quicksand
                $(".theMagz").quicksand( $filteredPortfolio, { 
                    duration: 800, 
                    easing: 'easeInOutQuad' 
                }, function(){
                    var $container = $('.theMagz');
                    $container.imagesLoaded( function() {
                        $container.masonry({
                            gutterWidth:20
                        });
                    });

                });

                $(this).parent().addClass("current");

                // Prevent the browser jump to the link anchor
                e.preventDefault();
            })
        }); 
```

我放了两次砌体脚本，因为当我只是将流沙脚本放在一起时，它不适用于第一次加载。
问题是，当我单击#vers a 时，它将被排序然后消失，因为.theMagz 给定高度=0。任何人都知道如何解决它？

# ruby-on-rails-3 - Cucumber+Capybara 中的语法错误

> ID：10973310
> 
> 赞同：2
> 
> 时间：2012-06-10T23:54:59.117
> 
> 标签：ruby-on-rails-3, rspec, cucumber, capybara

我有一个步骤定义的以下部分：

```
page.should have_content "Contraseña o Email incorrecto." 
```

我得到一个语法错误：

```
syntax error, unexpected $end, expecting keyword_end
  page.should have_content "Contraseña o Email incorrecto." 
```

如果我将 ñ 更改为 an 它可以顺利运行。有关于 Capybara/Cucumber/Rspec 编码问题的经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T00:29:43.087

问题确实是因为你在那里有一个 utf-8 字符。将此行放在规范的顶部，Ruby 会很高兴：

```
# encoding: utf-8 
```

# iphone - Cocos2d-iPhone：Retina 和非 Retina 屏幕之间的 CCSprite 位置不同

> ID：10973312
> 
> 赞同：1
> 
> 时间：2012-06-10T23:55:15.693
> 
> 标签：iphone, cocos2d-iphone

我有一个使用 cocos2d-iphone 构建的相当简单的应用程序，但是我无法解决一个奇怪的定位问题。该应用程序使用精灵表，并且应用程序中有一个 Retina 和非 Retina 精灵表使用完全相同的图稿（当然分辨率除外）。应用程序中还有其他用于`CCSprites`标准和 -hd 后缀的艺术品。

在应用程序中，当应用程序启动时会创建一组精灵。这些最初创建`CCSprites`的在 Retina 和非 Retina 屏幕上的位置始终相同（且正确）。

```
// In method called to setup sprites when app launches
// Cache & setup app sprites
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: @"sprites.plist"];
sprites = [CCSpriteBatchNode batchNodeWithFile: @"sprites.png"];

hill = [CCSprite spriteWithSpriteFrameName: @"hill.png"];
hill.position = ccp( 160, 75 );
[sprites addChild: hill z: 1];

// ... [create more sprites in same fashion]
// NOTE: All sprites created here have correct positioning on Retina & non-Retina screens 
```

当用户以某种方式点击屏幕时，会调用一个方法来创建另一组`CCSprites`（屏幕上和屏幕外），并为它们全部设置动画。其中一个精灵 ，`hand`始终在 Retina &非视网膜屏幕。其他（一组云）成功创建和动画，但它们的位置**仅**在 Retina 显示器上是正确的。在非 Retina 显示器上，每个云的起始位置不正确（对于`x`、`y`或有时两者都不正确），并且它们在动画后的结束位置也是错误的。

我在下面的 on-touch 方法中包含了负责的代码，该方法创建了新的 sprite 并将它们动画化。同样，它在 Retina 显示器上按预期工作，但在非 Retina 屏幕上不正确。used 在应用程序启动时以相同的`CCSprites`方式创建，以设置应用程序中的所有初始精灵，它们始终具有正确的位置。

```
// Elsewhere, in a method called on touch
// Create clouds
cloud1 = [CCSprite spriteWithSpriteFrameName: @"cloud_1.png"];
cloud1.position = ccp(-150, 320);
cloud1.scale = 1.2f;

cloud2 = [CCSprite spriteWithSpriteFrameName: @"cloud_2.png"];
cloud2.position = ccp(-150, 335);
cloud2.scale = 1.3f;

cloud3 = [CCSprite spriteWithSpriteFrameName: @"cloud_4.png"];
cloud3.position = ccp(-150, 400);

cloud4 = [CCSprite spriteWithSpriteFrameName: @"cloud_5.png"];
cloud4.position = ccp(-150, 420);

cloud5 = [CCSprite spriteWithSpriteFrameName: @"cloud_3.png"];
cloud5.position = ccp(400, 350);

cloud6 = [CCSprite spriteWithSpriteFrameName: @"cloud_1.png"];
cloud6.position = ccp(400, 335);
cloud6.scale = 1.1f;

cloud7 = [CCSprite spriteWithSpriteFrameName: @"cloud_2.png"];
cloud7.flipY = YES;
cloud7.flipX = YES;
cloud7.position = ccp(400, 380);

// Create hand
hand = [CCSprite spriteWithSpriteFrameName:@"hand.png"];
hand.position = ccp(160, 650);

[sprites addChild: cloud1 z: 10];
[sprites addChild: cloud2 z: 9];
[sprites addChild: cloud3 z: 8];
[sprites addChild: cloud4 z: 7];
[sprites addChild: cloud5 z: 6];
[sprites addChild: cloud6 z: 10];
[sprites addChild: cloud7 z: 8];
[sprites addChild: hand z: 10];

// ACTION!!
[cloud1 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(70, 320)]];
[cloud2 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(60, 335)]];
[cloud3 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(100, 400)]];
[cloud4 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(80, 420)]];
[cloud5 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(250, 350)]];
[cloud6 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(250, 335)]];
[cloud7 runAction:[CCMoveTo actionWithDuration: 1.0f position: ccp(270, 380)]];
[hand runAction: handIn]; 
```

值得一提的是，在运行应用程序并在标准 iPhone 和 iPhone (Retina) 硬件选项之间切换时，我在 iOS 模拟器中看到了这种不正确的定位行为。我无法验证这种情况是否发生在实际的非 Retina iPhone 上，因为我没有。

然而，这是我唯一一次看到这种奇怪的定位行为发生（用户触摸后获得的不正确结果），并且由于我以完全相同的方式创建所有精灵（即，`[CCSprite spriteWithSpriteFrameName:]`然后`position`使用设置`cpp()`），我会特别感谢任何帮助追踪为什么这组精灵在非 Retina 屏幕上总是不正确的原因。

**编辑/更新** 我添加了一些额外的日志记录来准确调查创建的精灵发生了什么。以下是其中一种云的示例：

```
// Non-Retina
cloud1 position -- x: 70.000000 y: 320.000000
cloud1 anchor -- x: 0.500000 y: 0.500000
cloud1 size -- w: 384.000000 h: 576.000000
cloud1 origin -- x: -122.000008 y: 31.999989

// Retina
cloud1 position -- x: 70.000000 y: 320.000000
cloud1 anchor -- x: 0.500000 y: 0.500000
cloud1 size -- w: 172.800003 h: 121.800003
cloud1 origin -- x: -16.400003 y: 259.100006 
```

我必须说我对此感到非常困惑。我也没有混淆这些日志。非 Retina 上的边界框比 Retina 上的大？而且这些宽度/高度值甚至与它们引用的图像的大小不匹配。也许精灵表/纹理内部发生了一些奇怪的事情？我也注意到起源不匹配。也许这也影响了输出？很奇怪，它只发生在这些精灵身上，没有其他精灵。

任何想法和建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:36:29.667

我可以想象两个原因：

1.  SD 图像不完全是 HD 图像大小的一半
2.  plist 中的图像命名错误

验证您的高清图像的宽度和高度是否正好是标清图像的两倍（反之亦然）。由于您是从 HD 缩小尺寸，因此请确保您的 HD 图像尺寸可被 2 整除。

plists 会发生一个常见的命名错误。通常你会有 image.png 和 image-hd.png。然而，对于纹理图集，这略有不同。你应该有 atlas.png 和 atlas-hd.png 文件和相关的 plist 文件，但是纹理图集中的图像应该参考 image.png 两个版本。一个典型的错误是将 image-hd.png 添加到 atlas-hd.png 纹理图集中。

不确定这些问题是否适用。当然听起来您可能想将日志记录添加到您的精灵位置，然后比较 Retina 与标准分辨率位置。如果这些位置正好偏移另一个版本的位置的一半或两倍，您就知道您有 Retina vs Non-Retina 定位错误。如果不是，则更有可能是您的定位或移动代码中存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:39:28.863

我的猜测是替换你的 spritesheets 是诀窍，但直到模拟器完全覆盖了应用程序的原始版本，你才发现有任何区别。我遇到了图像缓存在模拟器中的问题，我不得不删除应用程序（摆动它，按 X），然后神奇地出现了更新的图像。

如有疑问，请在设备上进行测试。模拟器是很多“高度陌生”的原因。不值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:18:04.237

我刚刚创建了一个测试应用程序并进行了测试。

所以对于没有视网膜的设备： ImageName.png - 对于 iPhone/iPod ImageName~ipad.png - 对于 iPad

对于具有视网膜显示的设备： ImageName@2x.png - 对于 iPhone/iPod ImageName@2x~ipad.png -- 对于 iPad

如果您的 iPhone 高分辨率图像和 iPad 高分辨率图像具有相同大小，您仍然可以使用 @2x。要加载图像，只需使用 [UIImage imageNamed:@"ImageName.png"]; 我刚刚在 iOS 5.1、5.0 和 4.3 的 iOS 模拟器上对其进行了测试。顺便说一句，为什么你应该使用@2x，仅此而已。

最主要的是你不应该在 iPhone 和 iPad 上使用相同的图形，因为 iPhone 和 iPad 的尺寸不同。如果您将使用相同大小的图形，则 iPad 视网膜显示器（如果您以前使用 iPhone 视网膜显示器）已经完成了图形。如果您要使用不同尺寸的图像，那么您将为 iPhone 和 iPad 使用不同的图像名称。所以在这一边你只需要添加@2x 后缀。这就是为什么你应该只使用@2x 后缀。- 这些是我的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:19:55.453

尽管问题消失了，但对此没有可行的答案。

我再次将所有图像修剪为 2 的幂，在此过程中减少了一些额外的空间。我将纹理/精灵表创建工具从 Zwoptex 换成了 TexturePacker，并创建了两个新的精灵表作为 PVR 而不是 PNG，并带有新的 .plist 文件。

我还决定将 cocos2d 库升级到最新的稳定版（我之前使用的是 1.0.1 稳定版之前的旧 RC 版本）。

没有进行任何代码更改，问题就消失了。奇怪的。

# php - 是否可以在 PHP return 语句中执行赋值？

> ID：10973315
> 
> 赞同：3
> 
> 时间：2012-06-10T23:57:05.357
> 
> 标签：php

我有一个关于 PHP 的 return 语句的快速问题。在 C++ 中，我们能够执行以下操作：

```
... function body ...
return (foo = bar, biz()); 
```

在返回结果之前`bar`分配变量的位置。`foo``biz()`

这在 PHP 中是否可能（或类似的东西）？PHP中的上述语句导致解析错误。现在，我知道我可以在 return 语句之前简单地执行赋值，但这只是一个人为的例子，我很好奇可行性。

**编辑**：提供更多说明。这是我基本上试图在 PHP 中做的事情：

```
return ($foo = $bar, biz())
    || ($foo = $bar, baz())
    || ($foo = $bar, qux()); 
```

`foo`是`biz`修改的全局参考。如果`biz`返回 false，则测试 OR 语句中的下一段。因为`biz`返回false，所以我需要`foo`在执行之前“重置” 的值`baz`等等。

**我知道我在这里尝试做的事情是不纯的，但我只是好奇在 PHP 中是否可以实现等价（或至少类似的事情）。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:00:36.313

不，不幸的是 PHP 实际上没有逗号运算符，除非在for 循环的[expr1中。](http://php.net/manual/en/control-structures.for.php)在其他任何地方，逗号仅用于分隔函数或语言结构的参数。

您可以排序创建自己的逗号运算符用户函数，它只返回传递给它的最后一个参数。这是我的镜头：

```
function comma(){ return func_get_arg(func_num_args() - 1); } 
```

有了这个，你可以使用：

```
return comma($foo = $bar, biz()); 
```

以下完整代码输出`Hello`：

```
<?php

function foo(){
  $bar = 'Hello';
  return comma($foo = $bar, bar($foo));
}

function bar($foo){
    echo $foo;
}

foo();

function comma(){ return func_get_arg(func_num_args() - 1); } 
```

**使用逗号函数编辑**

您的示例代码，如下所示：

```
return comma($foo = $bar, biz())
    || comma($foo = $bar, baz())
    || comma($foo = $bar, qux()); 
```

我真的不推荐使用这个。这就是为什么我的简短回答是“不”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:07:51.733

你可以在一个数组中返回它们

```
return Array($foo = "bar", biz()); 
```

该数组将包含：

```
Array ( [0] => bar [1] => A ) 
```

# python - 非常简单的 JSON 解码

> ID：10973316
> 
> 赞同：1
> 
> 时间：2012-06-10T23:57:38.627
> 
> 标签：python, json, simplejson

我**已经**搜索过这个，但我发现的所有结果对我来说都没有意义，而且看起来太复杂了。我正在寻找使用`json`or`simplejson`模块来获取对象中字符串的值。

```
string = '{"name": "Alex"}' 
```

基本上，我想从中提取值“亚历克斯”。我会做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T00:01:49.013

使用该[`json`模块](http://docs.python.org/library/json.html)非常简单：

```
>>> import json
>>> s = '{"name": "Alex"}'
>>> obj = json.loads(s)
>>> obj
{'name': 'Alex'}
>>> obj["name"]
'Alex' 
```

如果您的 Python 足够老以至于它没有`json`，那么请`simplejson`改用：

```
import simplejson as json 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:02:18.107

为什么不先尝试阅读文档？[在http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)中清楚地说明了它

# objective-c - 如何模拟 UITextField 上的 isEditing getter？

> ID：10973323
> 
> 赞同：2
> 
> 时间：2012-06-10T23:58:05.537
> 
> 标签：objective-c, uitextfield, ocmock

我一直在尝试模拟一个简单的属性`UITextField`：

`@property(nonatomic,readonly,getter=isEditing) BOOL editing;`

我试图模拟这两种方式

1.）使用完整的类方法混合技术（通常对于基于类的方法，我会这样做）

```
- (void)swapOutTextFieldIsEditing
{
    method_exchangeImplementations(
            class_getClassMethod([UITextField class], @selector(isEditing)),
            class_getClassMethod([self class], @selector(isEditingEnabledMock))
    );
}

- (void)resetTextFieldIsEditing
{
    method_exchangeImplementations(
            class_getClassMethod([self class], @selector(isEditingEnabledMock)),
            class_getClassMethod([UITextField class], @selector(isEditing))
    );
}

+ (BOOL)isEditingEnabledMock {
    return isEditingMockResult;
} 
```

2.) 使用自定义 ocmock 助手创建自定义“并返回布尔”方法

```
 - (id)andReturnBool:(BOOL)aValue {
     NSValue *wrappedValue = nil;
     wrappedValue = [NSValue valueWithBytes:&aValue
                                   objCType:@encode(BOOL)];

     return [self andReturnValue:wrappedValue]; 
} 
```

遗憾的是，这两种技术都失败了，我几乎可以肯定这是因为这是`UITextField`标记为只读 w/getter 的正常属性（以前在 iOS 上从未见过）

**失败以下`NSLog`总是返回 (null) - 意思是我不能存根

```
- (IBAction)next
{
    for (int i = 0; i<[self.fieldsArray count]; i++) {
        NSLog(@"is this field being edited? %@", [[self.fieldsArray objectAtIndex:i] isEditing]);
    }
} 
```

这是我的基本存根语法（与上述一起使用）

```
id firstField = [OCMockObject niceMockForClass:[UITextField class]];
[[[firstField stub] andReturnBool:YES] isEditing]; 
```

有谁知道另一种方法来存根这个结果？如果不是上面列出的两种方法呢？我在这里做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:22:26.907

您似乎将类方法与实例方法混淆了。运行时函数`class_getClassMethod`返回一个类方法，但由于您感兴趣的方法是属性访问器，它不能是类方法（类没有属性，只有实例有）。相反，用于`class_getInstanceMethod`获取访问器方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:46:02.307

当您使用此存根设置时

```
id firstField = [OCMockObject niceMockForClass:[UITextField class]];
[[[firstField stub] andReturnBool:YES] isEditing]; 
```

你还在用*firstField*做什么？您确定其他对象与*firstField*（模拟实例）交互，还是它们与在 XIB 文件中实例化的 UITextField 的真实实例交互？

对于无法注入模拟并且必须处理在其他地方创建的实例的情况，OCMock 提供了部分模拟。这些允许您在现有对象上存根方法。在您的情况下，您可以执行以下操作：

```
id firstField = ... // somehow get a reference to the actual field object
id firstFieldMock = [OCMockObject partialMockForObject:firstField];
[[[firstFieldMock stub] andReturnBool:YES] isEditing]; 
```

之后，当另一个对象在 firstField 上调用*isEditing*时**，**模拟将拦截它。

# eclipse - 如何在 Windows 上的 Eclipse 中设置 Clang 工具链？

> ID：10973325
> 
> 赞同：13
> 
> 时间：2012-06-10T23:58:35.893
> 
> 标签：eclipse, ide, settings, clang

我为一个愚蠢的问题道歉。但是我在网上找不到答案。我正在努力在 64 位机器上为 Windows 7 中的 Eclipse 设置 Clang 编译器/链接器/...。我对 C++ 的了解非常过时，并且从未在 Eclipse 中工作过。我想要实现的是在 Windows 7 x64 机器上的 Eclipse 下使用 Clang 编译一个最简单的 hello world 应用程序。

我已经设法按照[http://clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)上关于获取和构建 LVVM + Clang 的说明进行操作。[我按照http://marketplace.eclipse.org/content/llvm-toolchain-eclipse-cdt](http://marketplace.eclipse.org/content/llvm-toolchain-eclipse-cdt)中的描述安装了 Eclipse 插件。我将 PATH 环境变量设置为 c:\lvvm\debug\bin; 包含构建的可执行文件。

现在，如何切换 Eclipse 以使用 LVVM？特别是我要做什么：

*   包含目录
*   图书馆
*   搜索路径

在下面的对话框中？

![在此处输入图像描述](../Images/bd7ba5f7692efce71411cc782aa9710e.png)

我还在项目的首选项中找到了以下对话框：

![在此处输入图像描述](../Images/629b13f93c501d4871a44d1379bd8f8a.png)

完全不清楚我应该让它看起来像什么。

谢谢您的帮助！抱歉，我是一个试图回到 C++ 的 C# 开发人员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-22T19:28:52.777

为了它的价值，我今天只需要这样做，我发现我所要做的就是改变

项目 -> 属性 -> c/c++ 构建 -> 设置 -> 工具设置 -> gcc c++ 编译器 -> 命令：将其从 g++ 更改为 clang++

同样地

项目 -> 属性 -> c/c++ 构建 -> 设置 -> 工具设置 -> gcc c 编译器 -> 命令：将其从 gcc 更改为 clang

至于索引器，我发现这有帮助....

[Eclipse CDT 索引器不知道 C++11 容器](https://stackoverflow.com/questions/17131744/eclipse-cdt-indexer-does-not-know-c11-containers)

虽然这更像是 c++11 的东西而不是铿锵的东西，但我两者都需要。

# iphone - 向 UIScrollView 添加标签会导致空白屏幕

> ID：10973326
> 
> 赞同：2
> 
> 时间：2012-06-10T23:58:53.680
> 
> 标签：iphone, objective-c, uiscrollview

我正在尝试将 a 添加`UILabel`到 my`UIScrollView`中，但它根本没有出现。我还尝试添加一个新`UIView`的红色背景颜色，效果很好（滚动和缩放都可以）。

我`UIScrollView`像这样创建我的：

```
scrollView_ = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, screenW, screenH)];
[scrollView_ setBounces:YES];
[scrollView_ setMinimumZoomScale:1.0];
[scrollView_ setMaximumZoomScale:1.0];
[scrollView_ setBackgroundColor:[UIColor clearColor]]; 
```

我`UILabel`喜欢这样：

```
aboutTextLabel_ = [[UILabel alloc] init];
aboutTextLabel_.numberOfLines = 0;
[aboutTextLabel_ setFont:[UIFont fontWithName:@"ChalkDust" size:11]];
[aboutTextLabel_ setTextColor:[UIColor whiteColor]];
[aboutTextLabel_ setText:@"my text"];
[aboutTextLabel_ setBackgroundColor:[UIColor clearColor]];
[aboutTextLabel_ setFrame:CGRectMake(10,10,300,300)]; 
```

然后我像这样添加它：

```
[scrollView_ addSubview:aboutTextLabel_];
[scrollView_ setContentSize:contentSize]; // precomputed 
```

但是，这给了我一个空白屏幕。 **当我将 aboutTextLabel 创建为局部变量时，完全相同的代码可以工作。**

aboutTextLabel_ 没有定义为@property，而是在接口声明中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:48:44.453

我认为您不应该将标签“文本颜色”设为白色...如果您的屏幕已经是白色...尝试添加不同的颜色...或者默认颜色“黑色”就可以了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:56:07.897

放`aboutTextLabel_.numberOfLines = 1;`

代替

```
aboutTextLabel_.numberOfLines = 0; 
```

如果您没有添加如下内容，也可以将 scrollView_ 添加到主视图：-

```
[self.view addSubview: scrollView_]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:04:41.683

更改标签文本颜色并将标签添加到滚动视图：

```
[aboutTextLabel_ setTextColor:[UIColor redColor]];

//add label to scrollView  
[self. scrollView_ addSubview:aboutTextLabel_]; 
```

# javascript - 闪烁文本这么多秒 - 然后消失

> ID：10973332
> 
> 赞同：1
> 
> 时间：2012-06-11T00:00:52.597
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试淡入/淡出文本，然后在这么长时间后停止该功能。在大多数情况下，当用户上线时，它应该说用户在线，然后在一段时间后消失。现在它只是继续 - 没有停止点。如何添加一个点以使淡入/淡出功能停止？

```
function newUser(){
    $j('#new').text(content);
    $('#new').fadeIn('slow', function() {
        setTimeout("$('#new').fadeOut('slow');", 2000);
    });
} 
```

调用此函数时，它将淡入和淡出 的内容，`#new`但它没有停止点。如何为此功能添加停止时间？

我试过这个，看看它是否会工作 - 但它只运行一次？我`x`在脚本的开头已启动为 0。

```
while(x < 4){
    $j('#new').fadeIn("slow", function() { 
     $j(this).delay(500).fadeOut("slow"); 
    });
    x++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T01:19:25.683

这样的事情怎么样？

```
function do_blink(elm, i){
  if(i<=0){return;}
  elm.fadeIn("slow", function(){
    $(this).delay(500).fadeOut("slow");
    do_blink(elm, --i);
  });
} 
```

你这样称呼它

```
do_blink($("#new"),5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:05:35.940

你可以试试：

```
$('#new').fadeIn("slow", function() { 
      $(this).delay(500).fadeOut("slow").delay(500).fadeIn("slow").delay(500).fadeOut("slow"); 
}); 
```

在您的代码中，它将如下所示：

```
function newUser(){
    $j('#new').text(content);
    $('#new').fadeIn("slow", function() { 
         $(this).delay(500).fadeOut("slow").delay(500).fadeIn("slow").delay(500).fadeOut("slow"); 
    });
} 
```

**已编辑**

# git - git 恢复 master 中已删除的文件，保持功能工作文件完整

> ID：10973335
> 
> 赞同：1
> 
> 时间：2012-06-11T00:01:41.177
> 
> 标签：git, revert, git-flow

在本地“myfeature”分支中工作时，我删除了一些文件并在本地提交了它们。在此过程中，这些提交随后与远程源/主服务器合并。我需要找回那些已删除的文件，所以我`git pull`在 master 上做了一个最新的操作，并在其中剪切了一个“修补程序”分支：

```
git revert <commit id> 
```

按这些错误提交的时间倒序排列，并取回那些已删除的文件。我基于 git-flow 分支模型，所以如果我错了请纠正我，我现在应该将“修补程序”以及任何“发布”分支、开发和任何其他“功能”分支合并到 master 中？

我是否需要对我目前仍在进行中的“myfeature”分支做任何事情，我想保留这些文件被删除？一旦我合并“myfeature”，这些文件会一直被删除，还是在我合并时这些文件会复活？

我没有使用 git-flow，只是模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:39:59.643

关于取回已删除的文件：

如果您的历史记录如下所示：

```
* aa1234 last commit
* bb2345 commit
* cc3456 commit
* dd4567 deleted fileC dirD/fileD & made other changes
* ee5678 deleted filA  dirB/fileB & made other changes
* ff6789 commit 
```

并且您想恢复文件 A、B、C、D 时删除它们时的状态，您可以使用以下方法一一检查它们`git checkout <hash> -- <path/to/file>`：

```
git checkout ee5678 -- fileA
git checkout ee5678 -- dirB/fileB
git checkout dd4567 -- fileC dirD/fileD 
```

这样，您就可以保证其他修改的安全。

关于流程：我不太了解您正在使用哪个流程，但是如果您创建一个提交，其操作是重新创建您已删除的文件，那么是的，在其他分支中合并此提交将应用相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:31:59.663

如果您恢复提交，那么是的，该提交的所有更改都将被恢复，但除此之外没有别的。因此，如果您*的错误*更改被隔离在提交中，您可以简单地还原这些更改，同时保留好的提交。

但是，如果您有混合了好的和坏的行为的提交，那么当您像这样恢复它们时，您也会失去这些好的行为，所以我建议您不要这样做。

相反，您应该进行部分还原。`-n`通常，在使用标志进行还原时，您可以更好地控制还原。这样，Git 不会为您创建还原提交，您可以先操作更改，然后自己提交。此外，这允许您一次进行多个还原。因此，理想情况下，当有多个提交一起引入了您不再需要的更改时，您可以在一个提交中将它们全部还原以修复它。

# javascript - 用javascript修改svg属性没有效果

> ID：10973339
> 
> 赞同：13
> 
> 时间：2012-06-11T00:02:15.530
> 
> 标签：javascript, jquery, html, svg

我正在尝试使用 javascript 修改 svg 标记以使其可调整大小，但我的更改没有效果。我需要这样做的原因是这个标签是由一个我无法修改的库呈现的，因此我唯一的选择似乎是用 javascript 修改 svg。

我知道这个脚本生成的标签是正确的，因为我能够将标签复制到一个新的 html 文档并且它会工作（我已将它包含在示例代码中），所以我似乎需要一些方法来强制svg 以识别它已被更改（或修改 svg 的其他方式）。

这是一个显示我的问题的 HTML 页面：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script type="text/javascript">
        $(document).ready(function () {
            var svg = $('#testsvg').find('svg')[0];

            var w = svg.getAttribute('width').replace('px', '');
            var h = svg.getAttribute('height').replace('px', '');

            svg.removeAttribute('width');
            svg.removeAttribute('height');

            svg.setAttribute('viewbox', '0 0 ' + w + ' ' + h);
            svg.setAttribute('preserveaspectratio', 'xminymin meet')

            $(svg)
                .css('width', '100%')
                .css('height', '100%')
                .css('background-color', 'white');
        });
        </script>
    </head>
    <body style="background-color: #333;">
        <div style="width: 80%; height: 40%;">
            <svg id="resultsvg" xmlns="http://www.w3.org/2000/svg" version="1.1" style="width: 100%; height: 100%; background-color: white; " viewbox="0 0 100 100" preserveaspectratio="xminymin meet">
                <circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="red"></circle>
            </svg>
         </div>
        <div id="testsvg" style="width: 80%; height: 40%;">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100px" height="100px">
                <circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="red" />
            </svg>
        </div>
     </body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T05:10:10.977

SVG 区分大小写，所以

```
svg.setAttribute('viewbox', '0 0 ' + w + ' ' + h);
svg.setAttribute('preserveaspectratio', 'xminymin meet') 
```

应该写

```
svg.setAttribute('viewBox', '0 0 ' + w + ' ' + h);
svg.setAttribute('preserveAspectRatio', 'xMinYMin meet') 
```

`<svg>`元素上的宽度和高度是属性而不是样式（与 html 不同），因此您应该使用`setAttribute('width', '100%')`而不是`.css('width', '100%')`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-06T00:40:51.297

`jQuery`将属性名称转换为小写；例如，`viewBox`它不会设置属性，而是设置`viewbox`. 不幸的是，SVG（一种 XML 方言）元素属性名称区分大小写。

如果您想始终如一地使用 jQuery，您可以使用`$.attrHooks`来处理区分大小写的属性：

```
['preserveAspectRatio', 'viewBox'].forEach(function(k) {
  // jQuery converts the attribute name to lowercase before
  // looking for the hook. 
  $.attrHooks[k.toLowerCase()] = {
    set: function(el, value) {
      if (value) {
        el.setAttribute(k, value);
      } else {
        el.removeAttribute(k, value);
      }
      return true;
    },
    get: function(el) {
      return el.getAttribute(k);
    },
  };
});

$(document).ready(function() {
  var svg = $('#testsvg');
  var w = svg.attr('width').replace('px', '');
  var h = svg.attr('height').replace('px', '');

  svg.attr({
    width: '100%',
    height: '100%',
    viewBox: [0, 0, w, h].join(' '),
    preserveAspectRatio: 'xMidYMid meet'
  })
}); 
```

注意`el.attr('viewBox', null)`会失败；你的钩子设置器不会被调用。相反，您应该使用`el.removeAttr('viewBox')`or `el.attr('viewBox', false)`。

对于像中风这样的其他属性，我会将它们放在样式表中。

```
svg {
  background-color: white;
}
circle {
  fill: red;
  stroke: black;
  stroke-width: 1px;
} 
```

如果需要添加/切换类来更改特定元素的样式，则需要使用 jQuery 1.12+ 或 jquery 2.2+。

# ruby-on-rails - heroku 控制台显示来自 git 部署的最新 sha 哈希

> ID：10973341
> 
> 赞同：7
> 
> 时间：2012-06-11T00:02:21.757
> 
> 标签：ruby-on-rails, git, heroku

我在 Heroku 上托管了一个开发分支，我们有几个人使用这个分支来查找错误，最好显示最新部署在 Heroku 上的提交的 SHA-1 哈希，以便我们知道哪些错误属于对哪个提交。

但我根本找不到任何方法来找到这些信息。heroku 运行控制台中的 ENV 变量中没有任何内容。虽然“heroku 版本”确实显示了一个部署信息列表，包括 SHA-1 哈希的前几个字符，这让我认为 Heroku 必须将它存储在某个地方，但我就是找不到位置。有人知道吗？

我意识到我并没有真正把问题说得清楚：我的意思是在 Heroku 上的 Rails 中找到 SHA-1 哈希。就像我可以做这样的事情：

```
<h1><%= ENV['REV']</h1> 
```

谢谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T00:13:42.207

像对待任何其他远程 Git 存储库一样对待 Heroku - 你可以使用`git ls-remote`：

`git ls-remote heroku`

（`heroku`这里是远程名称）

**更新：**

由于 OP 实际上希望在 Ruby 环境中获取 SHA，因此一种可能的方法是使用[自定义 buildpack](https://devcenter.heroku.com/articles/buildpacks)。

要开始使用，请前往[Heroku 的 Ruby Buildpack](https://github.com/heroku/heroku-buildpack-ruby)并对其进行 fork，以便您可以制作自己的变体。现在克隆你的 fork 并查看`lib/language_pack/ruby.rb`. 添加一个新方法，例如：

```
def get_SHA
    #get SHA
    #save SHA to ENV, ala: ENV['SHA'] = retrieved_sha
end 
```

如何获得 SHA 取决于您。您可以执行 git 命令并使用返回的内容：

`git log -1 --format="%H"`

或者您可以使用@avaynshtok 的建议并使用 Heroku gem 来使用该`releases`方法。

然后，一旦有了 SHA，将其设置为 ENV var。

接下来，在 中找到`compile`方法`ruby.rb`，并将`get_sha`方法添加到它的末尾：

```
def compile
    Dir.chdir(build_path)
    install_ruby
    setup_language_pack_environment
    allow_git do
        install_language_pack_gems
        build_bundler
        create_database_yml
        install_binaries
        run_assets_precompile_rake_task
        get_sha #your additional method
    end
end 
```

将您的更改推送回 GitHub，然后转到命令行。您需要向 Heroku 应用程序添加一个新的配置变量：

`heroku config:add BUILDPACK_URL=git@github.com:<your GitHub username>/heroku-buildpack-ruby.git`

请注意，您需要确保已替换`<your GitHub username>`为...嗯，您的 GitHub 用户名，因此您指向的是您的分叉存储库。

最后，执行最后一个命令来启用[Heroku 实验室功能](https://devcenter.heroku.com/articles/labs-user-env-compile)，该功能允许 slug 编译器访问用户变量：

`heroku labs:enable user_env_compile`

现在你应该准备好了。那么现在到底发生了什么？好吧，当您推送到 Heroku 时，Heroku 将收到更改，然后看到您设置了自定义 buildpack url。所以它会从 GitHub 获取你的自定义 buildpack，然后使用它来创建 slug。这意味着一旦它运行完所有默认编译命令，它将以您的`get_sha`方法结束，该方法应将 ENV var 设置`SHA`为适当的 SHA。现在您应该可以从 Ruby 中访问该 ENV 变量，以按照您的意愿进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T02:29:53.573

您可以使用 Heroku gem 获取发布信息：[https ://github.com/heroku/heroku](https://github.com/heroku/heroku)

```
c = Heroku::Client.new <LOGIN>, <PASSWORD>
c.releases(<APPNAME>).last['commit'] 
```

或者，您可以使用您的 API 密钥进行身份验证：

```
c = Heroku::Client.new '', <API_KEY> 
```

缺点是您需要在某处（在您的应用程序或 Heroku 环境中）存储登录名/密码组合（或 API 密钥）。

您还可以使用部署挂钩来获取此信息：[https ://devcenter.heroku.com/articles/deploy-hooks](https://devcenter.heroku.com/articles/deploy-hooks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T15:26:27.823

我最终为此使用了[Heroku 平台 API gem](https://github.com/heroku/platform-api)。这是一个很大的冗长，但是被记住了，所以每次部署你只需要这样做一次，并且可以避免使用自定义构建包（繁琐）和部署钩子（不安全）：

```
def current_sha
  @current_sha ||= begin
    heroku = PlatformAPI.connect_oauth(ENV['HEROKU_TOKEN'])
    slug_id = heroku.release.list(ENV['HEROKU_APP']).last["slug"]["id"]
    heroku.slug.info(ENV['HEROKU_APP'], slug_id)["commit"]
  end
end 
```

# c++ - 查找从未排序数组中删除的一个和 N 个元素

> ID：10973343
> 
> 赞同：1
> 
> 时间：2012-06-11T00:03:39.440
> 
> 标签：c++, performance, algorithm, data-structures

我正在尝试为这个问题实现一个有效的解决方案，“假设在一个从 1 到 n 的未排序数组中，如何找到一个数字是否被删除以及如果 n 个数字被删除怎么办？”

让我说一下，我对编码没有任何问题，如果有人可以贡献我的基本想法，我就在这里。我想，将所有元素存储在哈希表中，索引是数字本身（即 hash(1)=1），然后从 1 到 n 检查哈希表是否存在值。这将花费**O(n)**时间。如果删除了多个数字，我当然建议这样做。对于**单个**值，我将计算从 1 到 n 的 nums 总和并减去数组的总和。

但是对于删除的 n 数字，我可以添加任何东西来提高效率。（如果涉及**负数**，尽管我的解决方案是存储（O（12）= 12 = -12），基本链接但自动将时间复杂度增加到O（2n）。这个问题实际上是我问这个问题的原因，但任何关于唯一积极因素的想法也可能有所帮助。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:04:32.517

你的解决方案是最好的，你不能有比 O(N) 更好的复杂性（O(2N) 实际上是 O(N)）如果你有一个很好的函数来映射你的值，如果你有负数也没关系. 对于数字，我会建议一个小于 n 并且是素数的数字，我们称该数字为 P。 f(x) = x%P（对于值 x，键将是 x%P）对于 P = 9913，我们应该有： hash[10] = 10, 9923,-9903 并且所有具有（它们的值）%P 的数字都等于数组中的 10。您可以使用链表或向量来摆脱冲突。对于数字 Y，您应该将 Y 存储在索引 Y%P 中，并且在 range(1..n) 中对 i 进行一次遍历，您应该查看 i%P 位置的哈希表 for i( 基本上是 O(1 ) 查询的复杂性) 就是这样。希望它有所帮助。对不起我的英语不好 ：（

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:19:00.367

对于使用哈希表的解决方案，您不需要哈希表。如果您知道值是从 1 到 n，则可以使用 n 大小的布尔数组。只需遍历值数组，使用该值索引布尔数组并将该位置的值设置为 True。之后，遍历布尔数组并查找 False 值以查看已删除的值。如果您使用整数数组并在位位置设置 True/False 值，则可以使用更少的空间。这是[计数排序](http://en.wikipedia.org/wiki/Counting_sort "计数排序")

```
for i=0 to n:
    bools[values[i]] = True:
for i=0 to n:
    if(bools[i] == False):
        print("%d is missing".format(i)) 
```

如果给定负值，首先遍历数组并找到最小值。如果是 -10，则将每个值加 10，这样 -10 将转到位置 0。然后使用上述逻辑，当您找到负值时，减去 10。

“假设在一个从 1 到**n**的未排序数组中，如何找到一个数字是否被删除以及如果**n 个**数字被删除怎么办？”

如果删除了**n 个**数字，则数组将不包含任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:24:13.337

如果在扫描列表之前允许您进行一些预处理，那么您可以拥有一个预处理数据结构，该结构维护您期望拥有的数字的双向链表，并在扫描时从该链表中删除元素输入中的数字序列。双向链表中剩下的就是输入中缺少的。

对双向链表中成员的访问是 O(1)，因为列表的节点实际上是从数组创建的。从双向链表中删除是 O(1)。因此，在输入的单遍中找到丢失的数字。复杂度为 O(i+m)，其中 i 是输入的大小，m 是缺少多少个数字。

下面的代码根据输入将与之进行比较的序列的起始值和结束值创建双向链表。使用它就像：

```
Tracker t(0, 10);
int i;
while (std::cin >> i) t.remove(i);
t.report(); 
```

享受！

```
struct Node {
    static int index;
    static int stop;
    int num;
    struct Node *next;
    struct Node *prev;
    Node () : num(index++), next(0), prev(0) {
        if (index <= stop) next = this + 1;
        if (index > 0) prev = this - 1;
    }
};

struct Tracker {
    int start;
    int finish;
    Node *nodes;
    Tracker (int s, int f) : start(s), finish(f) {
        if (finish < start) throw 0;
        Node::index = start;
        Node::stop = finish + 1;
        nodes = new Node[finish - start + 2];
        nodes[finish - start + 1].next = nodes;
        nodes[0].prev = &nodes[finish - start + 1];
    }
    ~Tracker () { delete[] nodes; }
    void remove (int i) {
        Node *n = &nodes[i - start];
        n->prev->next = n->next;
        n->next->prev = n->prev;
    }
    void report () {
        Node *n = nodes[finish - start + 1].next;
        if (n->next == n) std::cout << "all there" << std::endl;
        else do {
            std::cout << "missing: " << n->num << std::endl;
            n = n->next;
        } while (n != &nodes[finish - start + 1]);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T00:34:21.003

我认为我们可以为这个问题定义多个数据结构。例如，定义 INT del = 0; 并定义一个del_list，del_list的节点可以记录地址和编号；我们有一个未排序的数组A，如果我们从这个数组A中删除一个数字，将删除的数字添加到del_list和del++中；这样我们就可以知道有多少号码被删除了，它们是什么。此外，我认为如果我们编码有更有效的方法来解决这个问题，但现在我不知道：P .. 我希望这个答案能帮助你。

# java - Java 命令行启动器

> ID：10973346
> 
> 赞同：1
> 
> 时间：2012-06-11T00:04:19.133
> 
> 标签：java, command-line-arguments, launch

所以我试图使用类似于这些的参数从命令行启动一个 jar：

```
java -cp "path/test.jar;path/lib.jar" -Djava.library.path="path/another_lib.jar" net.test.Test 
```

（net.test.Test 是主类）这给了我一个 NoClassDefFoundError 异常（对于 net/test/Test）。

这对其他人来说似乎很好，所以我不确定为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:06:54.127

首先，`-Djava.library.path=/something`告诉JVM 在哪里可以找到本地库——即DLL。它与查找文件无关`jar`，因此如果您使用该标志来查找`jar`文件，那将是一个问题。

否则，这很好。您需要确保所有这些路径都是正确的，并且包含的​​ jar 文件`net.test.Test`确实包含有问题的类，并且在 jar 文件中，该`Test.class`文件位于`test`目录中的`net`目录中。

正如 Rup 在评论中指出的那样，如果当前目录中有任何需要选择的类，则需要将当前目录“.”的条目添加到`-cp`参数中。

# ios - registerForRemoteNotificationTypes 不起作用？

> ID：10973349
> 
> 赞同：7
> 
> 时间：2012-06-11T00:04:29.417
> 
> 标签：ios, notifications, push-notification, alert

我正在尝试实现 Parse Push Notifications。我已经为我的其他应用程序设置了所有内容，并且效果很好。但是，我正在尝试在我现在正在开发的应用程序中实现它。问题是，我就是无法让它工作。

我在 applicationDidFinishLaunching 方法中这样做：

```
[application registerForRemoteNotificationTypes:
     (UIRemoteNotificationType)
     (UIRemoteNotificationTypeBadge | 
      UIRemoteNotificationTypeSound | 
      UIRemoteNotificationTypeAlert)]; 
```

我还更新了我的配置文件，在 Parse 上设置了应用程序，并确保在门户中启用了推送通知。

这就是问题所在，提示我是否要允许应用程序启用推送通知的警报视图永远不会显示。我不知道为什么。我在我的另一个应用程序中做同样的事情，它工作正常，所以我不确定为什么这不起作用。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T17:04:17.910

事实证明，由于某种奇怪的原因，我的 Organizer 中的配置文件没有从门户更新。我必须注销并重新登录。然后我刷新它，一切正常。

我检查的另一件事是，如果我的配置文件有一些名为：aps-environment 或类似的东西，但它没有，所以这让我相信这不是我的代码错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T01:31:17.257

该警报只会显示一次。如果您想让它再次显示，Apple 建议您卸载您的应用程序并在重新安装该应用程序之前留出 N 小时。我不记得 N 是什么，但我很确定它是 24 小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T18:20:02.550

这真的很令人费解，直到我注意到它确实可以安装到运行 ios6 的旧设备上。环顾四周后，我发现：[registerForRemoteNotificationTypes: is not supported in iOS 8.0 and later](https://stackoverflow.com/questions/24454033/registerforremotenotificationtypes-is-not-supported-in-ios-8-0-and-later)解决了我的问题。

# wpf - 组合框自动关闭

> ID：10973350
> 
> 赞同：1
> 
> 时间：2012-06-11T00:04:37.277
> 
> 标签：wpf, combobox, controltemplate

我重新设置了组合框模板的样式，以便下拉弹出窗口出现在组合框的原点。这是如何完成的：

```
<ControlTemplate TargetType="{x:Type ComboBox}">
 <Grid>
  <ToggleButton/>
  <ContentPresenter/>
  <Popup PlacementRectangle="0,0,0,0" >
   <Grid Name="DropDown">
    ...
   </Grid>
  </Popup>
 </Grid>
</ControlTemplate> 
```

我遇到的唯一问题是，当我单击组合框时，它会自动选择鼠标悬停并关闭的项目。我可以选择任何其他项目的唯一方法是按住鼠标按钮，然后将鼠标移到想要的项目上。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:32:11.633

您应该将 Popup Window IsOpen 属性绑定到切换按钮，例如：

```
<ToggleButton x:Name="myToggle" ClickMode="Press" />
<Popup x:Name="Popup"
  IsOpen="{Binding Path=IsChecked, ElementName=myToggle}"
  PlacementRectangle="0,0,0,0"
  StaysOpen="False">
</Popup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T13:04:04.303

我遇到了同样的问题，这解决了我的问题 [https://social.msdn.microsoft.com/Forums/en-US/afa18ca4-0c4a-4a55-9d26-9c30afd4d767/wpf-combobox-closes-on-mouse-release-何时使用显示不显示对话框？forum=wpf](https://social.msdn.microsoft.com/Forums/en-US/afa18ca4-0c4a-4a55-9d26-9c30afd4d767/wpf-combobox-closes-on-mouse-release-when-using-show-not-showdialog?forum=wpf)。希望它可以帮助某人。

把文章中写的东西拿出来：

利用`window.ShowDialog() instead of window.Show();`

> **"**当使用 Show() 而不是 ShowDialog() 显示包含 ComboBox 的窗口时，弹出列表将在释放鼠标后立即关闭，这与在进行选择或控件失去焦点之前保持打开状态的预期行为相反。**"**

# c# - c# WinForms 从另一个类访问实例

> ID：10973360
> 
> 赞同：0
> 
> 时间：2012-06-11T00:06:50.790
> 
> 标签：c#, forms, instances

我正面临这个问题（我会简单明了）在form1中，我需要创建一个登录表单实例并能够在abc类中访问它并使用它的（登录）方法。但是，它似乎无法访问。

我希望我把所有相关的东西都说得通俗易懂。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:10:04.730

如果您明确调用属于另一种形式的实际功能，则可能是时候查看您的设计了。您可能应该有一个处理与任何形式分离的身份验证的类或程序集。在您的登录表单和 ABC 类中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:10:24.270

从根本上说，要完全按照您的要求进行操作，您需要提供 to 的实例`Login`，`abc`例如通过`abc`构造函数将其传入。

您可能希望考虑重构当前`Login`形式的一些功能，使其在所有需要的地方都可用。

我建议看看[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。虽然 WPF、Silverlight 和 ASP.Net MVC 为该模式提供了强大的支持，但您当然也可以在[WinForms 场景](https://stackoverflow.com/questions/2406/looking-for-a-mvc-sample-for-winforms)中应用它。

使用像 MVC 这样的模式将使您的代码更容易随着时间的推移而发展和维护。

# python - 使用单个文件的 Python 日志记录（函数名、文件名、行号）

> ID：10973362
> 
> 赞同：141
> 
> 时间：2012-06-11T00:07:12.287
> 
> 标签：python, logging

我正在尝试了解应用程序的工作原理。为此，我将调试命令作为每个函数主体的第一行插入，目的是记录函数的名称以及我向日志输出发送消息的行号（在代码中）。最后，由于此应用程序包含许多文件，因此我想创建一个日志文件，以便更好地了解应用程序的控制流程。

这是我所知道的：

1.  对于获取函数名称，我可以使用`function_name.__name__`但我不想使用 function_name（这样我可以快速复制并粘贴一个泛型`Log.info("Message")`到所有函数的主体中）。我知道这可以在 C 中使用`__func__`宏来完成，但我不确定 python。

2.  为了获取文件名和行号，我已经看到（并且我相信）我的应用程序正在使用 Python`locals()`函数，但使用的语法我并不完全了解，例如：`options = "LOG.debug('%(flag)s : %(flag_get)s' % locals())`我尝试使用 like`LOG.info("My message %s" % locals())`生成类似`{'self': <__main__.Class_name object at 0x22f8cd0>}`. 请对此有任何意见吗？

3.  我知道如何使用日志记录并向其添加处理程序以记录到文件，但我不确定是否可以使用单个文件以项目中函数调用的正确顺序记录所有日志消息。

我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：639
> 
> 时间：2013-11-21T04:28:35.840

正确的答案是使用已经提供的[`funcName`](https://docs.python.org/2/library/logging.html#logrecord-attributes)变量

```
import logging
logger = logging.getLogger(__name__)
FORMAT = "[%(filename)s:%(lineno)s - %(funcName)20s() ] %(message)s"
logging.basicConfig(format=FORMAT)
logger.setLevel(logging.DEBUG) 
```

然后在您想要的任何地方，只需添加：

```
logger.debug('your message') 
```

我正在处理的脚本的示例输出：

```
[invRegex.py:150 -          handleRange() ] ['[A-Z]']
[invRegex.py:155 -     handleRepetition() ] [[<__main__.CharacterRangeEmitter object at 0x10ba03050>, '{', '1', '}']]
[invRegex.py:197 -          handleMacro() ] ['\\d']
[invRegex.py:155 -     handleRepetition() ] [[<__main__.CharacterRangeEmitter object at 0x10ba03950>, '{', '1', '}']]
[invRegex.py:210 -       handleSequence() ] [[<__main__.GroupEmitter object at 0x10b9fedd0>, <__main__.GroupEmitter object at 0x10ba03ad0>]] 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-11T04:29:29.937

您在这里有一些边缘相关的问题。

我将从最简单的开始：（3）。使用`logging`您可以将所有调用聚合到单个日志文件或其他输出目标：它们将按照它们在过程中发生的顺序排列。

接下来：（2）。`locals()`提供当前范围的字典。因此，在没有其他参数的方法中，您具有`self`范围，其中包含对当前实例的引用。正在使用的让您感到困惑的技巧是使用 dict 作为`%`运算符的 RHS 的字符串格式。`"%(foo)s" % bar`将被替换为 is 的任何值`bar["foo"]`。

最后，您可以使用一些自省技巧，类似于那些`pdb`可以记录更多信息的技巧：

```
def autolog(message):
    "Automatically log the current function details."
    import inspect, logging
    # Get the previous frame in the stack, otherwise it would
    # be this function!!!
    func = inspect.currentframe().f_back.f_code
    # Dump the message + the name of this function to the log.
    logging.debug("%s: %s in %s:%i" % (
        message, 
        func.co_name, 
        func.co_filename, 
        func.co_firstlineno
    )) 
```

这将记录传入的消息，加上（原始）函数名、定义出现的文件名以及该文件中的行。查看[inspect - 检查活动对象](http://docs.python.org/library/inspect.html)以获取更多详细信息。

正如我在前面的评论中提到的，您还可以`pdb`随时通过插入该行`import pdb; pdb.set_trace()`并重新运行您的程序来进入交互式调试提示。这使您可以单步执行代码，并根据您的选择检查数据。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-16T02:34:21.867

`funcname`，`linename`并`lineno`提供有关执行日志记录的最后一个函数的信息。

如果您有记录器的包装器（例如单例记录器），那么@synthesizerpatel 的答案可能不适合您。

要找出调用堆栈中的其他调用者，您可以执行以下操作：

```
import logging
import inspect

class Singleton(type):
    _instances = {}

    def __call__(cls, *args, **kwargs):
        if cls not in cls._instances:
            cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs)
        return cls._instances[cls]

class MyLogger(metaclass=Singleton):
    logger = None

    def __init__(self):
        logging.basicConfig(
            level=logging.INFO,
            format="%(asctime)s - %(threadName)s - %(message)s",
            handlers=[
                logging.StreamHandler()
            ])

        self.logger = logging.getLogger(__name__ + '.logger')

    @staticmethod
    def __get_call_info():
        stack = inspect.stack()

        # stack[1] gives previous function ('info' in our case)
        # stack[2] gives before previous function and so on

        fn = stack[2][1]
        ln = stack[2][2]
        func = stack[2][3]

        return fn, func, ln

    def info(self, message, *args):
        message = "{} - {} at line {}: {}".format(*self.__get_call_info(), message)
        self.logger.info(message, *args) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-16T12:37:13.123

我喜欢@synthesizerpatel 给出的答案，但我更喜欢这种格式以包含关卡名称

```
FORMAT = "[%(asctime)s %(filename)s->%(funcName)s():%(lineno)s]%(levelname)s: %(message)s"
logging.basicConfig(format=FORMAT, level=logging.INFO) 
```

结果如下：

```
[2022-01-13 11:48:16,122 main.py->loop():62]INFO: looping 
```

# java - 查找图像的最小可见矩形的尺寸

> ID：10973363
> 
> 赞同：3
> 
> 时间：2012-06-11T00:07:36.113
> 
> 标签：java, image

使用 Java 成像我将如何找到图像的最小可视矩形。在这里，我认为 alpha/透明像素是不可见的。我想找到尺寸，以便我可以自动裁剪图像。我想以图像中立的方式做到这一点，但如果这是不可能的，那么 PNG。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T00:44:14.897

Assuming that you don't want to crop out even a single "viewable" pixel, I would use the following algorithm:

Scan the topmost horizontal line, iterating pixel by pixel. If no viewable pixels exist in that line, advance to the second topmost line and so on until you find a line with a viewable pixel.

Do the same for the bottom, advancing upwards, and also for the sides, advancing inwards.

After all 4 steps, you will have how many lines of pixels you can trim from each side of the image.

# php - 在 PHP 中将字符串中的第一个单词减少为 3 个字符

> ID：10973364
> 
> 赞同：0
> 
> 时间：2012-06-11T00:07:40.163
> 
> 标签：php

我有一组格式如下的日期字符串：

```
$date = 'month_name DD, YYYY'; 
```

我想做的是将月份名称缩短为 3 个字符，并从末尾删除年份，如下所示：

```
$output = 'June 10, 2012';
print $output // Outputs 'Jun 10'; 
```

到目前为止，我有以下内容，但还没有找到缩短第一个单词的方法：

```
print substr($date, 0, strrpos($date, ',')); // Outputs 'June 10'; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:11:39.503

使用 PHP 的[DateTime](http://us3.php.net/manual/en/class.datetime.php)类：

```
$string = 'June 10, 2012';
$date = DateTime::createFromFormat('F d, Y', $string, new DateTimeZone('America/New_York'));
echo $date->format('M d'); // Output: Jun 10 
```

这是在不同格式之间转换时间的一种非常稳定的方法。

[演示](http://codepad.viper-7.com/2XcYTZ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:10:55.473

```
$tmp=explode(' ',$date);
$tmp=substr($tmp[0],0,3).' '.substr($tmp[1],-1);
echo $tmp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:13:41.837

```
$date = explode(" ", substr($date, 0, strrpos($date, ',')));
// first word is month, second is the date.
$date[0] = substr($date[0],0,3);
$date = join(" ", $date); // now date contains your desired result 
```

# java - 如何对带有联接的 SQL 查询的结果应用分页？

> ID：10973365
> 
> 赞同：7
> 
> 时间：2012-06-11T00:07:47.630
> 
> 标签：java, sql, postgresql, jdbc

我有连接 3 个表的 SQL 查询，其中一个只是连接另外两个表的多对多。我使用 Spring JDBC ResultSetExtractor 将 ResultSet 转换为我的对象，大致如下所示：

```
class Customer {
    private String id;
    private Set<AccountType> accountTypes;
    ...
} 
```

ResultSetExtractor 实现如下所示：

```
public List<Client> extractData(ResultSet rs) throws SQLException,
    DataAccessException {
        Map<Integer, Client> clientsMap = new LinkedHashMap<Integer, Client>();
        while (rs.next()) {
            int id = rs.getInt("id");
            // add the client to the map only the first time
            if (!clientsMap.containsKey(id)) {
                Client client = new Client();
                client.setId(id);
                ...
                clientsMap.put(id, client);
            }
            // always add the account type to the existing client
            Client client = clientsMap.get(id);
            client.addAccountType(extractAccountTypeFrom(rs, id));
        }
        return new ArrayList<Client>(clientsMap.values());
} 
```

这在没有分页的情况下工作正常。

但是，我需要对这些结果进行分页。我通常这样做的方式是将其添加到查询中，例如：

```
SELECT ... ORDER BY name ASC LIMIT 10 OFFSET 30; 
```

但是，由于此查询具有联接，当我限制结果的数量时，我实际上是在限制 JOINED 结果的数量（即，作为客户端出现的次数与其拥有的帐户类型的数量一样多，则应用 LIMIT 不客户的数量，而是客户* accountTypes的数量，这不是我想要的）。

我想出的唯一解决方案是从查询中删除 LIMIT （和 OFFSET 因为这也是错误的）并以编程方式应用它们：

```
List<Client> allClients = jdbcTemplate.query....
List<Client> result = allClients.subList(offset, offset+limit); 
```

但这显然不是一个非常好的、有效的解决方案。有没有更好的办法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T00:28:20.770

有趣的是，写一个问题会让你思考，实际上有助于为你自己的问题想出一个解决方案。

我能够通过简单地将查询的分页部分添加到我的主查询的子查询而不是主查询本身来解决这个问题。

例如，不要这样做：

```
SELECT client.id, client.name ...
FROM clients AS client
LEFT JOIN client_account_types AS cat ON client.id = cat.client_id
FULL JOIN account_types AS at ON cat.account_type_id = at.id
ORDER BY client.name ASC
LIMIT 10 OFFSET 30; 
```

我正在这样做：

```
SELECT client.id, client.name ...
FROM (
    SELECT * FROM clients
    ORDER BY name ASC
    LIMIT 10 OFFSET 0
) AS client
LEFT JOIN client_account_types AS cat ON client.id = cat.client_id
FULL JOIN account_types AS at ON cat.account_type_id = at.id; 
```

希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T07:55:05.590

如果您的 DBMS 支持它，请使用窗口函数[DENSE_RANK](http://oncodesign.io/2017/04/22/paging-one-to-many-results-in-sql/)。例如：

```
SELECT * FROM 
  (SELECT *, DENSE_RANK() OVER (ORDER BY name, id) count FROM 
     (SELECT a.id, a.name, b.title, DENSE_RANK() OVER (ORDER BY a.name, a.id) offset_ 
      FROM AUTHOR a, BOOK b 
      WHERE a.id = b.authorId) result_offset 
   WHERE offset_ > 30) result_offset_count 
WHERE count <= 10 
```

# sql - 从减号表中获取不同的场景

> ID：10973373
> 
> 赞同：0
> 
> 时间：2012-06-11T00:08:55.803
> 
> 标签：sql, oracle

我有这两张桌子：

表 A

```
ID 类型 SDATE EDATE 评级

1 M 2010 年 1 月 1 日 2011 年 1 月 1 日
1 M 2010 年 1 月 3 日 2011 年 1 月 4 日 B
2 A 2010 年 7 月 2 日 2015 年 1 月 31 日 C
3 M 2011 年 3 月 1 日 2012 年 1 月 20 日 B
4 A 2011 年 3 月 1 日 2012 年 1 月 20 日 B
5 M 2009 年 3 月 1 日 2009 年 3 月 1 日
6 M 2006 年 12 月 31 日 9999 年 12 月 31 日
7 A 2006 年 1 月 1 日 9999 年 12 月 31 日 B

```

表 B

```
ID 类型 SDATE EDATE 评级

1 M 2010 年 1 月 1 日 2011 年 1 月 1 日
2 A 2010 年 7 月 2 日 2015 年 1 月 31 日 C
2 A 2010 年 9 月 2 日 2015 年 1 月 31 日 C
3 M 2011 年 3 月 1 日 2012 年 1 月 20 日 B
4 A 2011 年 3 月 1 日 2012 年 1 月 20 日 C
6 M 2006 年 12 月 31 日 2015 年 12 月 31 日
7 A 2006 年 2 月 1 日 9999 年 12 月 31 日 B
8 M 2010 年 1 月 2 日 2012 年 1 月 2 日    

```

当我执行表 A 减去表 B 时，它会得到下一个结果：

```
ID 类型 SDATE EDATE 评级

1 M 2010 年 1 月 3 日 2011 年 1 月 4 日 B
4 A 2011 年 3 月 1 日 2012 年 1 月 20 日 B
5 M 2009 年 3 月 1 日 2009 年 3 月 1 日
6 M 2006 年 12 月 31 日 9999 年 12 月 31 日
7 A 2006 年 1 月 1 日 9999 年 12 月 31 日 B

```

我已经确定了 A.id 不在 B.id 中的情况，但是如何检查它何时在其他列中有所不同？

我不允许在模式上创建任何东西，所以我必须通过查询来完成。

到目前为止，这就是我所拥有的，但它给了我不正确的数据。

```
 with aminusb as
    (
        select
            *
        from A
        minus
        select
            *
        from B
    )
    select
        diff.*
    from
        aminusb diff
        ,B
    where
        diff.id = B.id
        and
            diff.start_date = B.start_date
        and
            diff.end_date = B.end_date
        and
            diff.rating <> B.rating 

```

你知道我怎么能得到不同的场景吗？

*   当一切都相等但，评级。
*   当一切都一样，但是，结束日期。
*   当没有什么是相等的但是，它具有相同的 id。

我需要获取满足每个场景的记录列表，以便人们可以详细检查它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:49:46.157

这将给出不常见的行：

```
 Select startdate, enddate, rating 
   from TableA 
Intersect 
 Select startdate, enddate, rating 
   from TableB 
```

显示所有记录：

```
 Select TableA.startdate, TableA.enddate, TableA.rating
  from TableA 
UNION 
 Select startdate, enddate, rating 
 from TableB 
```

情况1：

```
 Select TableA.*, TableB.* 
   from tableA,TableB 
  Where TableA.StartDate = tableB.StartDate  
    And tableA.Enddate=TableB.Enddate 
    And TableA.Rating <>TableB.Rating 
```

和 TableA.Rating = TableB.Rating

案例二：

```
 Select TableA.*, TableB.*
   from tableA,TableB 
  Where TableA.StartDate = tableB.StartDate 
    And tableA.Enddate<>TableB.Enddate
    And TableA.Rating = TableB.Rating 
```

案例3：

```
 Select TableA.*, TableB.* 
   from tableA,TableB 
  Where TableA.StartDate <> tableB.StartDate 
    And tableA.Enddate<>TableB.Enddate 
    And TableA.Rating <>TableB.Rating
    And TableA.ID =TableB.ID 
```

# java - 如何关注 GWT 中的元素？

> ID：10973374
> 
> 赞同：8
> 
> 时间：2012-06-11T00:09:07.793
> 
> 标签：java, gwt

我的输入文本框有这个类：

```
 class InputTextBox extends FlowPanel { 
      public InputTextBox(String labelText) { 
        super(); 
        Label label = new Label(labelText); 
        TextBox input = new TextBox(); 
        this.add(label); 
        this.add(input); 
        this.addStyleName("myBox"); 
      }

    } 
```

如何在该文本框中设置焦点，以便在调用 onmoduleload 时光标出现在文本框中？添加成员函数似乎会引发许多错误。

```
 public void setFocus(boolean b) {
        this.setFocus(b);

      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-11T10:15:03.340

您应该将此块添加到构造函数或 onLoad 方法：

```
Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand() {
@Override
public void execute() {
    //call setFocus method here:
    input.setFocus(true);
}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:27:45.027

为您的 TextBox 创建一个属性字段，并在您的 setFocus 方法中调用*textBox.setFocus(true)*，或者您调用 TextBox 属性的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:03:40.497

像这样更改您的代码

```
class InputTextBox extends FlowPanel {
    private Label label;
    private TextBox textBox;

    public InputTextBox(String labelText) { 
        super(); 
        label = new Label(labelText); 
        textBox = new TextBox(); 
        this.add(label); 
        this.add(input); 
        this.addStyleName("myBox"); 
    }

    public void setFocus(boolean focus) {
        textBox.setFocus(focus);
    }

    public String getText() {
        return textBox.getText();
    }
} 
```

像这样使用它

```
private InputTextBox newUser = new InputTextBox("Username");
newUser.setFocus(true); // Set focus
String value = newUser.getText(); // get text 
```

# html - 使用 Fancybox 版本 2 - 关闭第二个 fancybox 时重新打开第一个 fancybox 而不是简单地关闭

> ID：10973380
> 
> 赞同：1
> 
> 时间：2012-06-11T00:09:58.990
> 
> 标签：html, fancybox

使用[http://fancyapps.com/fancybox/#support提供的 Fancybox 版本 2](http://fancyapps.com/fancybox/#support)

我想从我的主页打开一个花式框，但是在第一个花式框内可以调用第二个花式框。但是当第二个花哨的盒子关闭时。我希望它重新打开第一个花式框，而不是简单地关闭（在角落按 X 或按 Esc）。我该怎么做呢？

谢谢-我已经在互联网上搜索了答案，但找到了有关我的查询的答案适用于以前版本的 fancybox 而不是新版本（2.0）...

我的代码如下：

主页-

```
<!DOCTYPE html>
<head>
    <!-- Add jQuery library -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="./source/jquery.fancybox.js"></script>
    <link rel="stylesheet" type="text/css" href="./source/jquery.fancybox.css" media="screen" />

    <script type="text/javascript">
        $(document).ready(function() {
            /*
                Simple image gallery. Uses default settings
            */

            $('.fancybox').fancybox();

            /*
                Different effects
            */

            // Change title type, overlay opening speed and opacity
            $(".fancybox-effects-a").fancybox({
                helpers: {
                    title : {
                        type : 'outside'
                    },
                    overlay : {
                        speedIn : 500,
                        opacity : 0.95
                    }
                }
            });

            /*
                Thumbnail helper. Disable animations, hide close button, arrows and slide to next gallery item if clicked
            */

            $('.fancybox-thumbs').fancybox({
                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,
                arrows    : false,
                nextClick : true,

                helpers : { 
                    thumbs : {
                        width  : 50,
                        height : 50
                    }
                }
            });
});
</script>
    <a href="1stFancyBox.html" class="fancybox fancybox.ajax">1st Fancy Box</a>
</html> 
```

1stFancyBox.html -

```
<html>
<a href="2ndFancyBox.html" class="fancybox fancybox.ajax">2nd FancyBox</a>
</html> 
```

2ndFancyBox.html -

```
<html>
<body>
Hellloooooooooo</body>
</html> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:24:18.953

您可以创建两个脚本，每个链接一个，因此在`main`您拥有的页面中：

```
<a href="1stFancyBox.html" class="fancybox1 fancybox.ajax">1st Fancy Box</a> 
```

请注意，现在类是`fancybox1`......然后脚本会触发第一个花式框。

```
$(".fancybox1").fancybox(); 
```

在里面`1stFancyBox.html`你可以有这个链接

```
<a href="2ndFancyBox.html" class="fancybox2 fancybox.ajax">2nd FancyBox</a> 
```

请注意，现在是类`fancybox2`

同样在`main`页面中添加触发第二个fancybox的脚本（从第一个fancybox中）：

```
$(".fancybox2").fancybox({
 afterClose: function(){
  $(".fancybox1").trigger("click");
 }
}); 
```

无论. *_* _ *_* _`2ndFancyBox.html`

**更新**：我[在这里添加了一个演示](http://www.picssel.com/playground/jquery/STACK_openFBfromFBandReopen1st_10jun12.html)

# string - Ada 如何逐个字符地获取输入字符

> ID：10973382
> 
> 赞同：2
> 
> 时间：2012-06-11T00:10:06.367
> 
> 标签：string, ada

我是 Ada 的新手，我正在尝试将 Recursive Decent Parser 的编译器教程中的代码转换为 Ada。移植 Jack W Crenshaw 的教程“让我们构建编译器”一直是我学习多种语言的最喜欢的方式。在第三章之前，我使用单字符标记完成了所有工作。向多字符令牌的转变一直很麻烦。

我有类似 sudo 代码的代码：

```
procedure GetName is
  token: Ada.Strings.Unbounded;
begin
  while IsAlNum(Look) loop
    Token := Token & Look;
    GetChar;
  end loop
end GetName; 
```

现在我知道 Ada 打算让字符串保持静态。但我需要能够将从输入中获取的每个新字符连接到 Token 中的字符集合。Look 是全局预测值（最后输入的字符）。

谢谢你的帮助。另外，网上有什么好的 Ada 教程或食谱网站吗？我为 C 程序员阅读了 Lovelace 和 Ada。Ada RM 有点正式，只显示规格不使用...

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:35:17.907

Ada 的单字符“get”方法是[Ada.Text_IO.Get](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-10-1.html#I5737)。在 Text_IO 包的该部分中还有 Look_Ahead 和 Get_Immediate 过程。

[Rosetta Code 的Ada Category](http://rosettacode.org/wiki/Category%3aAda)是很多 Ada 示例的一个很好的来源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T23:43:16.123

如果您要使用 Ada 2005 或更高版本（实际上可能有 95，但不完全确定），您可以使用 Streams。像这样的东西：

```
With Ada.Text_IO;

With
Ada.Streams.Stream_IO,
Ada.Text_IO.Text_Streams,
Ada.IO_Exceptions;

Procedure IO is
    Use Ada.Text_IO;

    -- Get the Standard_Input.
    Input_File : Ada.Text_IO.File_Type:= Ada.Text_IO.Standard_Input;

    -- Create a stream from the Standard Input.
    Input_Stream : Access Ada.Streams.Root_Stream_Type'Class:=
      Ada.Text_IO.Text_Streams.Stream( File => Input_File );

Begin

    GET_USER_INPUT:
    declare
    C: Character;
    begin
    loop
        Character'Read( Input_Stream, C );
        exit when C = '*';
        -- Build your string here.
    end loop;
    -- THIS IS AN ALTERNATE WAY FOR EXITING THE ABOVE LOOP.
    Exception
    When ADA.IO_EXCEPTIONS.END_ERROR => Null; -- Raised normally at EOF.
    end GET_USER_INPUT;
    -- Suggested, refactoring GET_USER_INPUT into a function.

    Put_Line( "Testing." );

End IO; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T20:40:30.553

在这个问题的最后，您似乎在寻求 Ada 字符串处理方面的帮助。

是的，Ada 字符串确实最好作为静态字符串处理，而不是可调整大小的缓冲区。有三种典型的方法来处理这个问题。

第一个是创建一个非常大的`String`缓冲区，用一个单独的`Natural`变量来保存字符串的逻辑长度。这有点痛苦，而且有点容易出错，但至少比 C 中在缓冲区末尾不断扫描空值的方法快。

第二种是直接使用 Ada.Strings.Unbounded.Unbounded_String。这是大多数人所做的，因为如果您习惯于以程序方式思考事物，那将是最简单的。

第三，（如果可能的话，我更喜欢）是在*功能*上处理你的字符串。您在这里需要的主要见解是 Ada`String`确实是静态的，但您可以控制它们的生命周期，并且如果您进行函数式编程，您可以随时动态地制作静态字符串。

例如，我可以`Token`通过执行以下操作来创建一个我想要的任何长度的新字符串（理论上无限前瞻）：

```
function Matches_Token (Scanned : String) return boolean;  --// Returns true if the given string is a token
function Could_Match_Longer (Scanned : String) return boolean; --// Returns true if the given string could be part of a larger token.
function Get_Next_Char return Character;  --// Returns the next character from the stream
procedure Unget; --// Puts the last character back onto the stream
procedure Advance (Amount : Natural); --// Advance the stream pointer the given amount
function Longest_Matching_Token (Scanned : String) return String is
    New_Token : constant String := Scanned & Get_Next_Char;
begin
    --// Find the longest token a further scan can match
    if Could_Match_Longer(New_Token) then
        declare 
            LMT : constant String := Longest_Matching_Token (New_Token);
        begin
            if LMT /= "" then
                unget;
                return LMT;
            end if;
        end;
    end if;

    --// See if this string at least matches.
    if Matches_Token(New_Token) then
        unget;
        return New_Token;
    else
        unget;
        return "";
    end if;
end Build_Token;

function Get_Next_Token return String is
    Next_Token : constant String := Build_Token("");
begin
    Advance (Next_Token'length);
    return Next_Token;
end Get_Next_Token; 
```

这并不总是最有效的字符串处理方法（堆栈使用过多），但它通常是最简单的。

在实践中，扫描和解析实际上是一种特殊情况的应用程序，通常建议避免丑陋的东西，例如缓冲区（方法 1）和 goto。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T22:56:33.763

我编写了一个函数来连接从输入中获取的每个新字符，并将其全部作为字符串返回。它可能适合做你需要的事情。

```
FUNCTION get_a_string ( ch : IN Character ) RETURN String IS
-----------------------------------------------------------------
--| Recursively hack out a string from a stream of single
--| character input. Starting with an ESC sentinel and ending
--| with an EOL sentinel.
--| ESC is the ESC character and EOL is a space.
----------------------------------------------------------------
    next : Character;
    ch2s : String(1..1);
BEGIN -- get_a_string
    Ada.Text_IO.Put( "Waiting: ");--BARF
    Ada.Text_IO.Get( Item => next );

    IF ch = ESC THEN -- start
       RETURN get_a_string(next);
    ELSIF next = EOL THEN --Escape Case
       ch2s(1) := ch;
       RETURN ch2s;
    ELSE -- Keep getting input
       RETURN ch & get_a_string(next);
    END IF;
END get_a_string; 
```

万一我的教练或助教发现这与我上交的代码匹配。我写了它，所以我没有作弊。

# python - 如何使用python中的函数生成2个字母的单词？

> ID：10973383
> 
> 赞同：1
> 
> 时间：2012-06-11T00:10:18.507
> 
> 标签：python

嗨，我正在使用 python，我正在尝试创建一个函数，让我生成由 2 个字母组成的单词。我还想计算生成的单词中有多少实际上在字典中。

这是我到目前为止所拥有的：

```
alphabet = ('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o',
            'p','q','r','s','t','u','v','w','x','y','z')
count1 = 0
text = " "

def find2LetterWords():
    for letter in alphabet:
        text += letter
        for letter in alphabet:
            text +=letter
    print text 
```

这是我到目前为止写的代码，我知道它不对。我只是在做实验。所以是的，如果你能帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T00:22:10.260

`product`模块中的`itertools`内容正是您生成所有可能的 2 字母单词列表所需要的。

```
from itertools import product

alphabet = ('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z')

two_letter_words = product(alphabet, alphabet)

for word in two_letter_words:
    print word 
```

要比较字典中的哪一个，您需要从其他地方获取

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T00:26:35.163

另一种方式，使用列表理解：

```
words = [x+y for x in alphabet for y in alphabet] 
```

或者不用自己输入字母：

```
from string import ascii_lowercase as a
words = [x+y for x in a for y in a] 
```

让我们来比较一下 xvatar、Toote 和我的答案：

```
from itertools import product
from string import ascii_lowercase as a
import timeit

def nestedFor():
    w = []
    for l1 in a:
        for l2 in a:
            word = l1+l2
            w.append(word)
    return w

def nestedForIter():
    w = []
    for l1 in a:
        for l2 in a:
            yield l1+l2

def withProduct():
    return product(a,a)

def listComp():
    return [x+y for x in a for y in a]

def generatorComp():
    return (x+y for x in a for y in a)

# return list
t1 =  timeit.Timer(stmt="nestedFor()",
                   setup = "from __main__ import nestedFor")
t2 = timeit.Timer(stmt="list(withProduct())",
                   setup = "from __main__ import withProduct")
t3 = timeit.Timer(stmt="listComp()",
                   setup = "from __main__ import listComp")

# return iterator
t4 = timeit.Timer(stmt="nestedForIter()",
                   setup = "from __main__ import nestedForIter")
t5 = timeit.Timer(stmt="withProduct()",
                   setup = "from __main__ import withProduct")
t6 = timeit.Timer(stmt="generatorComp()",
                   setup = "from __main__ import generatorComp")

n = 100000

print 'Methods returning lists:'
print "Nested for loops:   %.3f" % t1.timeit(n)
print "list(product):      %.3f" % t2.timeit(n)
print "List comprehension: %.3f\n" % t3.timeit(n)

print 'Methods returning iterators:'
print "Nested for iterator:     %.3f" % t4.timeit(n)
print "itertools.product:       %.3f" % t5.timeit(n)
print "Generator comprehension: %.3f\n" % t6.timeit(n) 
```

结果：

> 返回列表的方法：
> 嵌套 for 循环：13.362
> 列表（产品）：
> 4.578 列表理解：7.231
> 
> 返回生成器的方法：
> 为迭代器嵌套：0.045
> itertools.product：0.212
> 生成器理解：0.066

换句话说，`itertools.product`如果您真的需要完整列表，请务必使用。但是，生成器速度更快，需要的内存更少，可能就足够了。

itertools.product 作为迭代器的相对缓慢是出乎意料的，考虑到[文档](http://docs.python.org/2/library/itertools.html#itertools.product)说它*相当于生成器表达式中的嵌套 for 循环*。似乎有一些开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:24:13.307

```
def find2LetterWords():
    words = []
    for first in alphabet:
        for second in alphabet:
            new_word = first + second
            words.append(new_word)
    print words
    return words 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T00:36:44.130

问题的第一部分已经得到很好的回答，但这是第二部分。

> 我还想计算生成的单词中有多少实际上在字典中。

其实这很容易。您知道您的单词列表中包含所有可能的组合。而且您知道字典键是唯一的；因此，两个字符长的键必须在单词列表中。您需要做的就是计算长度为 2 的键的数量。

```
counts = sum(len(k) == 2 for k in my_dict.iterkeys()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T00:19:44.213

根据评论编辑的答案：

```
def find2LetterWords():
     #this generates all possible 2-letter combos with a list comprehension
     words = [first + second for second in alphabet for first in alphabet]
     #create a new list with only those words that are in your_dictionary (a list)
     real_words = [word for word in words if word in your_dictionary]
     return real_words 
```

如果你想要一个漂亮的一个班轮，没有功能：

```
[word for word in [first + second for second in alphabet for first in alphabet] if word in your_dictionary] 
```

显然，用`your_dictionary`您的字典名称替换。

# c# - 正则表达式与 C# 中的字符串不匹配

> ID：10973386
> 
> 赞同：0
> 
> 时间：2012-06-11T00:10:41.897
> 
> 标签：c#, .net, regex

我有一些 HTML 需要解析为文本（在一个大文档中），我感兴趣的部分如下所示：

```
...
<div id="whatever" class="whatever whatever">some title with <em>html</em> and other such tags in it, but never a div tag</div>
... 
```

现在我想用 HTML 摆脱 DIV 中的文本。这是正则表达式（使用组）的内容：

```
<div id=\"whatever\" class=\"whatever whatever\">(?<title>[^</div>]*?)</div> 
```

所以我的想法是我将匹配整个内容，并获得一个包含所有文本的组，直到出现 </div > 的点（因为字符串末尾没有其他识别因素）。

[] 中的 ^ 不起作用，因为它是这些字符中的“任何”，而不是我想要的字符串“< /div >”。任何想法我如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:28:37.017

```
Match m=Regex.Match(s,"\\<div id=\"whatever\" class=\"whatever whatever\">(.*?)\\<\\/div\\>");                                                       
Console.WriteLine(m.Groups[1].Value); 
```

# iphone - 子类化视图时使用 ARC 处理内存

> ID：10973387
> 
> 赞同：0
> 
> 时间：2012-06-11T00:10:43.950
> 
> 标签：iphone, ios5, memory-management, automatic-ref-counting

这是一个好奇的问题（除非证明它造成了内存泄漏，否则它是真实的）。在 ARC 之前，我经常为我的项目创建自定义 UITableViewCells，但这是我第一次有机会使用 ARC 和 Storyboards。人们经常写到，在处理 IB 分配的视图（UITextField、UIImage 等）时，使用 ARC 的最佳实践是，在 UIViewController 的 viewDidUnload 覆盖中将保存引用的属性设置为“nil”。

在这种情况下，我的问题是当您子类化 UIView 而不是 UIViewController 时。例如 UITableViewCell。我在我的原型中设置了一个自定义表格视图单元格，并向其中添加了一些控制视图。然后我创建了一个 UITableViewCell 的子类，并将其分配给原型，以便 IB 在它出队时返回。我创建了一些 IBOutlets 并将控制视图链接到这些 IBOutlets。所有相当典型的东西。我的问题是，因为我没有任何东西可以将 IBOutlets 设置为 nil，所以我是否造成了内存泄漏？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:59:35.297

只有您可以知道您是否创建了内存泄漏，因为这取决于您的结构，但您可能没有。在 arc 中，创建内存泄漏要困难得多，因为保留释放由您处理。

但这是你需要知道的。

首先，在 view did unload 方法中将事物设置为 nil 只需要在视图控制器中设置，但这只是因为该视图控制器可能持有对视图中某些元素的 STRONG 引用。请记住，在 ARC 中，对象在没有对它们的强引用时被释放。当您使用 IB 将元素添加到视图时，此视图具有对该元素的强引用。如果您在视图控制器中为此元素另外创建了一个 STRONG 属性，那么您现在有 2 个东西指向该元素。如果存在内存不足的情况并且系统想要释放一些内存（释放不可见的视图），那就是调用 viewdidunload 时（消除对视图中元素的可能强引用以及用于该视图的其他对象）但可以很容易地重新创建）

您可能担心将东西连接到 UITableViewCell 上的 IB。只要您将这些控件连接到您设计的原型单元，就可以了。请记住，此原型是该单元格中所有控件的容器，因此表应该管理这些控件的内存（当不需要时，该单元格中的所有内容都将被卸载或重用）

> 重要提示：您应该将控件连接到表格视图单元格，而不是视图控制器！您会看到，每当您的数据源使用 dequeueReusableCellWithIdentifier 向表格视图询问新单元格时，表格视图不会为您提供实际的原型单元格，而是一个*副本*（或者如果可能的话，将回收以前的单元格之一）。这意味着在任何给定时间都会有多个 PlayerCell 实例。如果您要将单元格中的标签连接到视图控制器上的出口，那么标签的多个副本将尝试使用同一个出口。那只是自找麻烦。（另一方面，将原型单元连接到视图控制器上的操作非常好。如果您的单元上有自定义按钮或其他 UIControls，您会这样做。）

*raywenderlich.com 第 149 页 iOS5 由教程开始故事板*

# .net - Sqlmetal 无法为 SQL Server Compact Edition 3.5 db 生成 dbml 文件

> ID：10973389
> 
> 赞同：0
> 
> 时间：2012-06-11T00:11:13.037
> 
> 标签：.net, visual-studio-2010, sql-server-ce, sqlmetal

我似乎无法使用 Sqlmetal 为简单的 SSCE 3.5 db 生成 dbml 文件。

我正在使用 VS 命令提示符，正坐在包含 db 的 VS 项目目录中，然后在提示符处输入以下 Sqlmetal 命令：

**sqlmetal /dbml:fom.dbml fom.sdf**

sqlmetal 返回以下错误：

**错误：初始化字符串的格式不符合从索引 0 开始的规范。**

谁能看到我在这里做错了什么？

*[请注意，我运行的是 Windows 7 64。我已经尝试了所有三个 VS 命令提示符.. 都导致相同的错误]。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:51:59.197

我现在已经解决了这个特定的错误......SQLMetal 似乎不喜欢其中有空格的目录名在将 db 移动到一个简单的目录后，目录名中*没有*任何空格（例如 c:\temp\mydb.sdf）我能够成功生成dbml。

# c# - 如何解析 xaml 文件/字符串

> ID：10973393
> 
> 赞同：1
> 
> 时间：2012-06-11T00:12:43.267
> 
> 标签：c#, wpf, xml

我正在阅读一个 xaml 文件`XamlReader()`，它当然具有以下元素和属性：

```
<setter property="Property1" Value="Value1" /> 
```

是否有任何方法可以定位特定属性及其关联值？

我应该使用字符串函数解析字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:21:46.983

MSDN 文档显示使用 XmlReader 作为 XamlReader 的输入

```
// Load the button
StringReader stringReader = new StringReader(savedButton);
XmlReader xmlReader = XmlReader.Create(stringReader);
Button readerLoadButton = (Button)XamlReader.Load(xmlReader); 
```

[http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)

您可以只使用 XmlReader 来获取属性。

[http://msdn.microsoft.com/en-us/library/cc189056%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189056%28VS.95%29.aspx)

您将`XmlNodeType.Attribute`在 MSDN 示例中显示的`switch`语句中使用，首先注意您在`XmlNodeType.Element`案例中所在的节点。

# javascript - 找不到javascript函数

> ID：10973394
> 
> 赞同：1
> 
> 时间：2012-06-11T00:13:00.167
> 
> 标签：javascript

我不断收到这个错误，说它找不到我的 JavaScript 函数 checkpw()。它被 onfocus 调用。

```
<script type="text/javascript" >

function checkpw() { 

alert ("working");

}

</script>
</head>
<body>

<h2>Welcome to our webpage.</h2>

<p>{{ reginfo}}</p>
<form action="/validate/" method ="get" >
<p>Username</p>
<input type="text" name="username"  class="textbox"> </input > </br>
<p>Password</p>
<input class="textbox" name="password" id="password" type="text"> </input > </br>
<p>Confirm Password</p>
<input class="textbox" id="checkpw" type="text" onfocus="checkpw()"> </input > </br>
<p>Email<p>
<input class="textbox" name="email" type="text"> </input > </br>

<input type="submit" class="button" value="Submit"> 

</form>

</body> 
```

我可能犯了一个非常愚蠢的错误，但我是 javascript 的新手，所以任何有帮助的东西都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:29:06.070

由于某些古老版本的 Internet Explorer 实现的行为，在“怪癖”模式下，大多数浏览器将允许您直接通过其 id 来寻址元素。

例如

```
<div id="test"></div>
<script>
  test.innerHTML = 'Hi';
</script> 
```

我想这就是你正在发生的事情。你有一个带有 id 的元素`checkpw`和一个名为`checkpw`. 我认为，由于该元素是稍后在文件中定义的，因此它胜出，并且由于它不是一个函数，因此尝试在您的`onfocus`处理程序中调用它是行不通的。

要么改变你的函数的名字，改变`id`元素的名字，或者（最好）确保你的页面没有以“怪癖”模式呈现（例如正确的文档类型，没有无效的 HTML 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:21:18.763

*将*:更改`function checkpw()` *为*:`function checkPw()`
*和*:更改`focus="checkpw()"` *为*:`focus="checkPw()"`

* * *

***编辑：*** *它**不是**保留字；但是该名称已经在全局命名空间中被污染了。正如[Domenic](https://stackoverflow.com/users/3191/domenic)和[jimr 所](https://stackoverflow.com/users/121006/jimr)指出的，该`id`属性使用相同的名称，从而导致了冲突的条件。*

*解决方案仍然是更改：（1）`id`输入元素的值 - 或 - （2）函数名称（如上所述）*

# java - 在android中使用微调器过滤Listview

> ID：10973396
> 
> 赞同：1
> 
> 时间：2012-06-11T00:13:24.973
> 
> 标签：java, android

我有这个包含文本和图像的 Listview。每个列表项包含四个关键元素。我希望能够通过从微调器中选择的选项使用三个 TextView 中的任何一个来过滤列表视图。这是我到目前为止所做的：

```
 public class LazyVenueAdapter extends BaseAdapter implements Filterable {

        private Activity activity;
        private ArrayList<HashMap<String, String>> data;
        private static LayoutInflater inflater = null;
        public ImageLoader imageLoader;

        public LazyVenueAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
            activity = a;
            data = d;
            inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageLoader = new ImageLoader(activity.getApplicationContext());
        }

        public int getCount() {
             return data.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        @Override
        public void notifyDataSetChanged() {
            super.notifyDataSetChanged();
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View vi = convertView;
            if (convertView == null)
                vi = inflater.inflate(R.layout.venue_list_item, null);

            TextView title = (TextView) vi.findViewById(R.id.venueName);
            TextView location = (TextView) vi.findViewById(R.id.venueLocation);
            TextView tags = (TextView) vi.findViewById(R.id.venueTags);
            ImageView thumb_image = (ImageView) vi.findViewById(R.id.venueImage);

            HashMap<String, String> venue = new HashMap<String, String>();
            venue = data.get(position);

            // Setting all values in listview
            title.setText(venue.get(VenuesFragment.KEY_TITLE));
            location.setText(venue.get(VenuesFragment.KEY_LOCATION));
            tags.setText(venue.get(VenuesFragment.KEY_TAGS));
            imageLoader.DisplayImage(venue.get(VenuesFragment.KEY_THUMB_URL),
                    thumb_image);

            return vi;
        }

        @Override
        public Filter getFilter() {

            Filter filter = new Filter() {

                @Override
                protected FilterResults performFiltering(CharSequence constraint) {

                    FilterResults results = new FilterResults();
                    ArrayList<HashMap<String, String>> filteredArrayVenues = new ArrayList<HashMap<String, String>>();
                    data.clear();

                    if (constraint == null || constraint.length() == 0) {
                        results.count = data.size();
                        results.values = data;
                    } else {
                        constraint = constraint.toString();
                        for (int index = 0; index < data.size(); index++) {
                            HashMap<String, String> dataVenues = data.get(index);

                            if (dataVenues.get(VenuesFragment.KEY_TAGS).toString().startsWith(
                            constraint.toString())) {
                                filteredArrayVenues.add(dataVenues);
                            }
                        }

                        results.count = filteredArrayVenues.size();
                        System.out.println(results.count);

                        results.values = filteredArrayVenues;
                        Log.e("VALUES", results.values.toString());
                    }

                    return results;
                }

                @SuppressWarnings("unchecked")
                @Override
                protected void publishResults(CharSequence constraint,
                FilterResults results) {

                    data = (ArrayList<HashMap<String, String>>) results.values;
                    notifyDataSetChanged();
                }

            };

            return filter;
        }
    } 
```

我遇到的问题是，当我从下拉列表中选择一个选项时，我得到一个空的结果集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:14:38.420

您没有收到任何结果，因为您删除了尝试从中构建结果的信息`data.clear();`。如果`data`现在为空（即`data.size() == 0`），则此循环将永远不会执行：

```
for (int index = 0; index < data.size(); index++) { 
```

删除此行可能会解决您的问题：

```
data.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:30:47.813

你必须先过滤你的`ArrayList<HashMap<String, String>> data`，然后调用`notifyDataSetChanged()`你的`adapter`

# c# - C# 在字节和其他类型之间进行转换的安全方法

> ID：10973403
> 
> 赞同：0
> 
> 时间：2012-06-11T00:14:58.897
> 
> 标签：c#

保证正确执行以下操作的最安全方法是什么：

当我以 4 个字节作为 uint32 读取时，我会将其写入文本文件。稍后我将打开这个文本文件，读取我之前写出的数字，然后将其转换回 4 个字节以用于其他处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:18:07.470

有[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)类可以帮助您在原始类型和字节之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:20:09.947

由于您将其存储为字符串，因此没有太多内容。显然，使用 . 将数字转换为字符串没有问题`.ToString()`。所以我假设的唯一问题是如何以可靠的方式返回。解决方案是使用`uint.Parse`. IE：

```
var s = "12343632423432";
uint i = uint.Parse(s); 
```

（PS：`BitConverter`对字符串转换没有帮助）

# php - 在 PHP 中发送确认电子邮件

> ID：10973406
> 
> 赞同：2
> 
> 时间：2012-06-11T00:15:39.550
> 
> 标签：php, email, sendmail

我对 PHP 很陌生，正在尝试使用 php 在线订购网站。尝试使用“抄送”发送确认电子邮件时遇到问题。

每次处理订单时，订单总是发送到指定为“$from”的“CC”地址，发件人（发件人）是“$to”部分中指定的地址。在收到的电子邮件确认中，它只显示 from 部分，'to' 和 'cc' 为空，如下所示：

```
From: **$_SESSION['od_email']**
To: *This space is empty*
CC: orders@business.co.uk 
```

谁能帮忙指出我哪里出错了？我附上了下面的代码。

```
//THIS IS CODE FOR THE EMAIL WHICH IS AUTOMATICALLY SENT TO THE CUSTOMER AND THE BUSINESS WHEN AN ORDER IS SUCCESSFULLY COMPLETED
//define the receiver of the email
$to = $_SESSION['od_email'];
//define the subject of the email
$subject = 'Order Confirmation | Ref No for Order: '.  $_SESSION['orderId']; 
//define the message to be sent. Each line should be separated with \n
$message = 'test';
//Who the message is from
$from = "orders@business.co.uk";
$cc = "orders@business.co.uk";
//define the headers we want passed. Note that they are separated with \r\n
$headers = "From:" . $from;
//bcc header going to the to go to the business as confirmation
$headers = "cc:" . $cc;
//send the email
$mail_sent = @mail( $to, $subject, $message, $headers ); 
```

我需要它显示的是：

```
From: **orders@business.co.uk**
To: **$_SESSION['od_email'];**
CC: **orders@business.co.uk** 
```

提前感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:57:55.803

我会全力以赴，确保你设置了你需要的一切，

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: ' .$to. "\r\n";
$headers .= 'From: ' .$from. "\r\n";
$headers .= 'Cc: '.$cc. "\r\n"; 
```

另外，我相信 mail() 需要一个有效的电子邮件地址，我不知道您之前是如何设置电子邮件的，`$_SESSION['od_email']`但是如果您正在运行测试并且确实希望`$_SESSION['od_email']`附带它不起作用，它会将其视为无效email 并返回 false，因此什么也不返回。要进一步诊断该问题，我们需要知道如何`$_SESSION['od_email']`设置

**编辑**

`$_SESSION['od_email]'`好的，我很确定问题是由您根据下面的评论进行设置引起的。

注意：我假设您的数据库是`$db`，但如果不是，您需要更改`$db`为探测器名称

让我们试试这个，看看它是如何工作的

```
// Get Data from the Database
$query = "SELECT `od_email` FROM `tbl_order`";
$result = $db->query($query);
while ($data = $db->fetch_array($result)) {

// Set Up the SESSION email
$_SESSION['od_email'] = $data['od_email'];

// Prepare the Email
$to = $_SESSION['od_email'];
$subject = 'Order Confirmation | Ref No for Order: '.  $_SESSION['orderId']; 
$message = 'test';
$from = "orders@business.co.uk";
$cc = "orders@business.co.uk";

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: ' .$to. "\r\n";
$headers .= 'From: ' .$from. "\r\n";
$headers .= 'Cc: '.$cc. "\r\n";

// Send the email
mail($to,$subject,$message,$headers);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:26:06.733

当您要设置 CC 时，您将覆盖 $headers 中的内容。尝试：

```
$headers = "From:" . $from . "\r\n";
$headers.= "Cc:" . $cc; 
```

如果这没有帮助，总有 PHP 的文档在[`mail`](http://php.net/manual/en/function.mail.php).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T01:17:41.473

他不能只添加一个@mail 吗？如...

```
$mail_sent = @mail( $od_email, $subject, $message, $headers ); 
```

或者

```
mail( $od_email, $subject, $message, $headers ); 
```

替换任何变量。

一直为我工作。

# javascript - 为什么使用 soundmanager2 播放第一个声音很慢？

> ID：10973412
> 
> 赞同：1
> 
> 时间：2012-06-11T00:16:31.417
> 
> 标签：javascript, jquery

我刚刚完成了这个 jquery 插件来显示音阶：

[www.daveconservatoire.org/tools/scales](http://www.daveconservatoire.org/tools/scales)

钢琴键可点击并播放相关音符。我正在使用 Soundmanager2 包。

我正在加载页面加载时的所有声音，但即使加载后我注意到我单击的第一个音符需要一段时间才能播放音符 - 但是当我点击该音符或任何其他音符时，播放速度很快而且脆。

为什么“唤醒”soundmanager 需要一秒钟左右的时间？

# javascript - 存储每个元素的定位信息（JQuery/Javascript）

> ID：10973414
> 
> 赞同：2
> 
> 时间：2012-06-11T00:16:57.220
> 
> 标签：javascript, jquery, arrays, each, offset

*Pleasantries*
我已经玩了几天这个想法，但似乎无法很好地掌握它。我觉得我快到了，但可以使用一些帮助。当我得到答案时，我可能会打自己的头。

*实际问题*我
有一系列的，它们是用 php（和 TWIG）生成的。标签中有一个图像和一个段落。在页面上，只有图像可见。用户点击图片后，文章会横向展开并显示段落。文章也会向左显示动画，因此占据了该部分的整个宽度，并将所有其他文章隐藏在其后面。`<articles>``<section>``<article>`

我已经毫无问题地完成了这部分效果。真正的问题是让文章回到原来的位置。文章中有一个“关闭” `<button>`。一旦按钮被点击，需要反转效果（即文章恢复到原来的大小，只显示图像，并返回到原来的位置。）

*当前理论*
我认为我需要从每个部分的每篇文章中检索 offset().left 信息，并确保它与各自的文章相关联，以便文章知道单击“关闭”按钮后该去哪里。我当然愿意接受不同的解释。

我一直在尝试使用`$.each`、`each()`、`$.map`和函数`map()`来`toArray()`了解是否有用。

*实际代码*

```
/*CSS*/
section > article.window {
                           width:170px; 
                           height:200px; 
                           padding:0; 
                           margin:4px 0 0 4px; 
                           position:relative; 
                           float:left; 
                           overflow:hidden; 
                         }
section > article.window:nth-child(1) {margin-left:0;} 
```

```
<!--HTML-->
<article class="window">
    <img alt="Title-1" />
    <p><!-- I'm a paragraph filled with text --></p>
    <button class="sClose">Close</button>
</article>
<article class="window">
    <!-- Ditto + 2 more -->
</article> 
```

*失败尝试示例*

```
function winSlide() {
    var aO = $(this).parent().offset()
    var aOL = aO.left
    var dO = $(this).offset()
    var dOL = dO.left
    var dOT = dO.top
    var adTravel = dOL-aOL

    $(this).addClass('windowOP');
    $(this).children('div').animate({left:-(adTravel-3)+'px', width:'740px'},250)
    $(this).children('div').append('<button class="sClose">Close</button>');

    $(this).unbind('click', winSlide);
}
$('.window').on('click', winSlide)

$('.window').on('click', 'button.sClose', function() {
    var wW = $(this).parents('.window').width()
    var aO = $(this).parents('section').offset()
    var aOL = aO.left
    var pOL = $(this).parents('.window').offset().left
    var apTravel = pOL - aOL

    $(this).parent('div').animate({left:'+='+apTravel+'px'},250).delay(250, function() {$(this).animate({width:wW+'px'},250); $('.window').removeClass('windowOP');})

    $('.window').bind('click', winSlide)

}) 
```

在你摸不着头脑之前，我必须指出，这种尝试涉及文章中的一个额外的 div。这个想法是让文章的溢出设置为可见`(.addclass('windowOP'))`，div 自由移动。这种方法实际上确实有效……几乎。动画在第二次触发后会失败。同样由于某种原因，在关闭第一篇文章时，左边距是属性被忽略了。

IE。
第一次单击窗口：完美执行打开动画 第一次单击窗口的关闭按钮：完美执行关闭动画，返回原始位置 第二次单击 SAME 窗口：动画失败，但打开到正确的大小 第二次单击窗口的关闭按钮（如果可见）：没有任何反应

感谢您的耐心等待。如果您需要更多信息，请询问。

**编辑**
在修改 Flambino 的代码后添加了一个 jsfiddle。

[http://jsfiddle.net/6RV88/66/](http://jsfiddle.net/6RV88/66/)

未点击的文章需要保留在原处。现在实现这一点有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:37:32.010

如果您想存储偏移量，可以使用 jQuery 的`.data`方法将数据“存储在”元素上并稍后检索：

```
// Store offset before any animations
// (using .each here, but it could also be done in a click handler,
// before starting the animation)
$(".window").each(function () {
  $(this).data("closedOffset", $(this).position());
});

// Retrieve the offsets later
$('.window').on('click', 'button.sClose', function() {
  var originalOffset = $(this).data("originalOffset");
  // ...
}); 
```

[这是一个（非常）简单的 jsfiddle 示例](http://jsfiddle.net/6RV88/)

更新：[这是一个更充实的](http://jsfiddle.net/DNLBK/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:26:08.027

非常感谢 Flambino

我能够创造出想要的效果。你可以在这里看到它：http: [//jsfiddle.net/gck2Y/](http://jsfiddle.net/gck2Y/)或者你可以在下面查看代码和一些解释。

我没有记住每篇文章的偏移量，而是在单击的文章的兄弟姐妹上使用了边距。它并不完全漂亮，但效果非常好。

```
<!-- HTML -->
<section>
    <article>Click!</article>
    <article>Me Too</article>
    <article>Me Three</article>
    <article>I Aswell</article>
</section> 
```

```
/* CSS */
section {
    position: relative;
    width: 404px;
    border: 1px solid #000;
    height: 100px;
    overflow:hidden
}

article {
    height:100px;
    width:100px;
    position: relative;
    float:left;
    background: green;
    border-right:1px solid orange;
}

.expanded {z-index:2;} 
```

```
//Javascript
var element = $("article");

element.on("click", function () {
    if( !$(this).hasClass("expanded") ) {
        $(this).addClass("expanded");

        $(this).data("originalOffset", $(this).offset().left);
        element.data("originalSize", {
            width: element.width(),
            height: element.height()
        });

        var aOffset = $(this).data("originalOffset");
        var aOuterWidth = $(this).outerWidth();

        if(!$(this).is('article:first-child')){
            $(this).prev().css('margin-right',aOuterWidth)
        } else {
            $(this).next().css('margin-left',aOuterWidth)
        }

        $(this).css({'position':'absolute','left':aOffset});
        $(this).animate({
            left: 0,
            width: "100%"                
        }, 500);
    } else {
        var offset = $(this).data("originalOffset");
        var size   = $(this).data("originalSize");
        $(this).animate({
            left: offset + "px",
            width: size.width + "px"                
        }, 500, function () {
            $(this).removeClass("expanded");
            $(this).prev().css('margin-right','0')
            $(this).next().css('margin-left','0')
            element.css({'position':'relative','left':0});
        });
    }
});​ 
```

# jquery - 使用自动完成 jquery 验证表单

> ID：10973420
> 
> 赞同：1
> 
> 时间：2012-06-11T00:18:46.383
> 
> 标签：jquery, autocomplete

我在几个表格上有一些自动完成列表，想知道是否有更好的方法来验证这个表格

因为有些字段有 1000 行数据，我们需要使用自动完成，而不仅仅是选择列表。问题不仅在于用户可以从自动完成列表中进行选择，而且他们可以手动输入而无需从自动完成列表中进行选择。因此，我需要同步验证提交上的数据，以确保所有字段都有效。但由于我必须同步检查字段，因此需要更多时间。我不确定这是正确的方法。还是我应该只依靠服务器端来给我返回错误？我们正在开发带有前端骨干网和.net 作为服务器端的 RESTful Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:34:43.060

您使用的是什么 JQuery 验证插件？假设您使用的是某个命名插件，时间因素会因插件实现而异。您可以在做出选择之前自己进行测试。

您说您必须检查字段，“检查”是什么意思？假设您的意思是“检查不是空的/必需的”，它可能不会像您预期的那样花费太多时间。如果您的意思是“检查唯一性/使用数据库检查某些内容”，则完全取决于您的检查条件逻辑和执行此检查的数据量。

如果是我，我总是会实施服务器端验证。最好妥协一下，而不是通过插入不需要的输入来用错误页面/破坏我的数据库中的软键来激怒用户。

更多细节将有助于以“现在时”回答这个问题。

# java - 为什么使用iterator.remove时没有错误？

> ID：10973421
> 
> 赞同：-1
> 
> 时间：2012-06-11T00:18:50.603
> 
> 标签：java, exception, collections, fail-fast

如果我使用`Iterator.remove()`，一切都很好。如果我使用`ArryaList.remove()`，我总是收到错误`java.util.ConcurrentModificationException`。

谁能指出原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T00:22:07.747

javadocs 说明了一切：

> 当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。
> 
> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

您正在修改一个集合并同时对其进行迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:21:52.463

基本上是因为它就是这样设计的。如果从列表中删除一个元素，迭代器不知道它，当它尝试访问列表中的另一个元素时，列表已更改并引发错误。但是，如果您通过迭代器删除一个元素，那么迭代器就会知道删除，对其数据结构进行适当的调整，然后继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:21:38.763

所以完全来自文档

> 当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。
> 
> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

看看[Class ConcurrentModificationException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T00:43:02.440

如果在迭代列表时需要删除元素，则应始终使用迭代器。

例如

```
List<String> list = //...
//...
Iterator<String> iter = list.iterator();

while(iter.hasNext()) {
    String str = itr.next();
    //...
    if(/* ... */) {
        iter.remove(str);
    }
} 
```

这是在迭代列表时从列表中删除元素的最安全方法。

注意：您不应该执行以下操作：

```
List<String> list = //...
//...
for(String str : list) {
    if(/* ... */) {
        list.remove(); // <-- should not do this
    }
} 
```

大多数情况下，您最终会出现在`ConcurrentModificationException`. 增强的 for 循环在底层使用了迭代器。而且您正在手动从列表中删除元素，而不是通过迭代器。这就是为什么你得到那个例外。

# string - 一种更“pythonic”的方法来“检查无并处理它”

> ID：10973427
> 
> 赞同：3
> 
> 时间：2012-06-11T00:20:01.633
> 
> 标签：string, coding-style, python

我有一个`list`with `dict`keys `['name','content','summary',...]`。所有的值都是字符串。但有些值是`None`. 我需要删除 中的所有新行`content`，`summary`以及其他一些键。所以，我这样做：

```
...
...
for item in item_list:
    name = item['name']
    content = item['content']
    if content is not None: content = content.replace('\n','')
    summary = item['summary']
    if summary is not None: summary = summary.replace('\n','')
    ...
    ...
...
... 
```

我有点觉得这个`if x is not None: x = x.replace('\n','')`成语没有那么聪明或干净。有没有更“pythonic”或更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T00:26:19.303

代码让你觉得笨拙，但部分原因是因为你在重复自己。这个更好：

```
def remove_newlines(text):
    if text is not None:
        return text.replace('\n', '')

for item in item_list:
    name = item['name']
    content = remove_newlines(item['content'])
    summary = remove_newlines(item['summary']) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T00:48:15.443

如果您要使用标记值（无），那么您将承担检查它们的负担。

您的问题有很多不同的答案，但他们似乎错过了这一点：当没有条目编码相同的信息时，不要在字典中使用哨兵值。

例如：

```
bibliography = [
    { 'name': 'bdhar', 'summary': 'questioner' },
    { 'name': 'msw', 'content': 'an answer' },
] 
```

那么你就可以

```
for article in bibliography:
    for key in article:
        ... 
```

然后您的循环完全不知道给定文章中包含哪些键（如果有）。

在阅读您的评论时，您声称您从其他地方获得了 dict。所以首先清除它的垃圾值。有一个清理步骤比通过你的代码传达他们的误解要清楚*得多。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T00:22:31.473

Python 有一个[三元运算符](http://docs.python.org/reference/expressions.html#conditional-expressions)，因此一种选择是以更自然的词序来执行此操作：

```
content = content.replace('\n', '') if content is not None else None 
```

请注意，如果`""`和`None`在您的情况下是等效的（看起来是这样），您可以将其缩短为 just `if content`，因为非空字符串评估为`True`。

```
content = content.replace('\n', '') if content else None 
```

这也遵循 Python 的*显式优于隐式*的习语。这表明有人按照代码可以`None`很清楚地看到该值。

值得注意的是，如果您经常重复此操作，则可能值得将其封装为一个函数。

Python 中的另一个习语是*请求宽恕，而不是许可*。所以你可以简单地使用`try`and ，但是，`except`在`AttributeError`这种情况下，这变得更加冗长，所以它可能不值得，特别是因为检查的成本是如此之小。

```
try:
    content = content.replace('\n', '')
except AttributeError:
    content = None
    #pass #Also an option, but as mentioned above, explicit is generally clearer than implicit. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T00:22:43.350

一种可能性是使用空字符串而不是 None。这不是一个完全通用的解决方案，但在许多情况下，如果您的数据都是单一类型，那么除了 None （空字符串、空列表、零等）之外，将会有一个合理的“null”值。在这种情况下，您似乎可以使用空字符串。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-11T00:23:00.000

尝试：

```
if content: content = content.replace('\n','') 
```

--

`if content`将（几乎¹）总是`True`只要`content`包含除 0、False 或 None 之外的任何内容。

* * *

¹正如 Lattyware 在评论中正确指出的那样，这并不完全正确。还有其他的东西会`False`在`if`语句中计算，例如，一个空列表。请参阅下面评论中提供的链接。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-11T00:24:20.327

空字符串在 Python 中的计算结果为 False，因此 Pythonic 方式是`if content:`.

```
In [2]: bool("")
Out[2]: False

In [3]: bool("hello")
Out[3]: True 
```

* * *

旁注，但你可以让你的代码更清晰一点：

```
name, content = item["name"], item["content"] 
```

和：

```
content = content.replace('\n','') if content else None 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-11T00:32:13.553

您还可以考虑将一些 if 子句抽象为一个单独的函数：

```
def remove_newlines(mystr):
    if mystr:
        mystr = mystr.replace('\n')
    return mystr 
```

（编辑以删除字典等过于复杂的解决方案）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-11T00:24:25.363

我认为“pythonic”的事情是在 if 语句中使用 None 将评估为 False 的事实。所以你可以说：

```
if content: content = content.replace('\n','') 
```

# c# - 使用 postsharp 在课堂上调用替代方法

> ID：10973429
> 
> 赞同：4
> 
> 时间：2012-06-11T00:20:37.067
> 
> 标签：c#, aop, postsharp

我希望能够通过使用在我截获的类上调用不同的方法`PostSharp`。

假设我在我的`PostSharp`方面有以下方法：

```
 public override void OnInvoke(MethodInterceptionArgs args)
    {
        if (!m_featureToggle.FeatureEnabled)
        {
            base.OnInvoke(args);
        }
        else
        {
            var instance = args.Instance;
            instance.CallDifferentMethod(); //this is made up syntax
        }  
    } 
```

这`CallDifferentMethod()`是类中另一个被拦截的方法。我可以做一些反射魔法来获得我想要被调用的名称，但我不知道如何在*这个*类的实例上调用该方法。我不想启动该类的新实例

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:40:09.487

您是否将 args.Instace 转换为您的类型？根据您写的内容，我想您的“FeatureEnabled”应该通过接口定义。

```
public interface IHasFeature
{
  bool IsFeatureEnabled { get; set; }
  void SomeOtherMethod();
} 
```

然后使用

```
((IHasFeature)args.Instance).SomeOtherMethod(); 
```

然后将方面应用到该接口。

```
[assembly: MyApp.MyAspect(AttributeTargetTypes = "MyApp.IHasFeature")] 
```

或者直接在界面上

```
[MyAspect]
public interface IHasFeature 
```

更新：哎呀，盖尔是对的。对于那个很抱歉。使用 CompileTimeValidate 方法在编译时限制方面。

```
public override bool CompileTimeValidate(System.Reflection.MethodBase method)
        {
            bool isCorrectType = (Check for correct type here)
            return isCorrectType;
        } 
```

有关更多信息，请参阅我的帖子[http://www.sharpcrafters.com/blog/post/Day-9-Aspect-Lifetime-Scope-Part-1.aspx](http://www.sharpcrafters.com/blog/post/Day-9-Aspect-Lifetime-Scope-Part-1.aspx)

# actionscript-3 - [Event(name="")]：它是如何使用的，自定义事件是如何工作的？

> ID：10973430
> 
> 赞同：0
> 
> 时间：2012-06-11T00:21:08.620
> 
> 标签：actionscript-3, flash, flash-builder, custom-events

我必须在其他人开始的项目上工作，但由于他目前不在国外，因此无法联系到他。反正。有一个主 mxml 和一个名为“admin”的自定义组件。

在管理员中，他宣布了这样一个事件：

```
 <fx:Metadata>
    [Event(name="sluitFrame")]
</fx:Metadata> 
```

在组件内的某个函数中，这个事件被这样调用：

```
dispatchEvent(new Event("sluitFrame")); 
```

此事件 sluitFrame 使用一些管理工具关闭一个框架。我需要改变它的工作方式，所以我想找到相应的代码。在主 mxml 上有以下代码：

```
 <comp:Admin id="compAdmin" creationPolicy="none"
                         sluitFrame="verbergAdminComponent(event)"/> 
```

因此，如果我正确理解 sluitFrame 调用甚至称为“verbergAdminComponent(event)”的自定义。所以我想我需要这个事件来改变管理框架的关闭方式等。但是这个事件无处可寻。所以我不明白“verbergAdminComponent(event)”是如何工作的，或者我可以在哪里更改这个事件。

任何帮助都非常受欢迎并且非常需要:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:27:10.750

该`[Event...`行只是让编译器和 IDE 知道组件/类（在本例中为`Admin`）可以按该名称调度事件。这很重要，因为当有人在 MXML 标记中声明 Admin 的实例时，编译器知道此事件（在本例中`sluitFrame`为 ）是有效属性。换句话说，它让编译器知道您可以在 MXML 标记中设置事件侦听器。在您的情况下，每次`Admin`对象调度`sluitFrame`事件时，`verbergAdminComponent`都会调用该函数并将 sluitFrame 事件传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:57:33.927

## 事件类型

如果您`Event`在 Flash 中使用 an，您可以调度任何命名类型，因为它是一个字符串。所以不管你怎么称呼它，只要听者听的是完全相同的*type*。这就是它起作用的原因。没有魔法进化。但是，在这种情况下，我会选择使用自定义事件。

## 自定义事件的工作原理

看看自定义事件的工作原理，这样您也可以了解元数据的来源。

```
package com.website.events
{
    import flash.events.Event;

    /**
     * @author ExampleUser
    */
    public class MyCustomEvent extends Event
    {
        /** 
         * 
         */
        public static const CLOSE_WINDOW:String = "MyCustomEvent.closeWindow";

        public function MyCustomEvent(type:String, bubbles:Boolean = false, cancelable:Boolean = false):void 
        { 
            super(type, bubbles, cancelable);
        }

        override public function clone():Event 
        { 
            return new MyCustomEvent(this.type, this.bubbles, this.cancelable);
        } 

        override public function toString():String 
        { 
            return formatToString("MyCustomEvent", "type", "bubbles", "cancelable", "eventPhase"); 
        }
    }
 } 
```

我使用静态常量而不是直接使用字符串（如您的示例），因此输入更严格。

在 actionscript 中，您将像这样调度自定义事件。假设您创建了一个名为 Window 的类。

```
package com.website.ui
{
   /**
    * @eventType com.website.events.MyCustomEvent.closeWindow
   */
   [Event(name="MyCustomEvent.closeWindow", type="com.website.events.MyCustomEvent")]

import flash.display.Sprite;
import flash.events.MouseEvent;
import com.website.events.MyCustomEvent;

/**
 * @author ExampleUser
*/
public class Window extends Sprite
{
    public var mcCloseButton:Sprite;

    public function Window():void 
    { 
        this.mcCloseButton.addEventListener(MouseEvent.CLICK, handleCloseButtonClick);
    }

    private function handleCloseButtonClick(event:MouseEvent):void 
    { 
        this.dispatchEvent(new MyCustomEvent(MyCustomEvent.CLOSE_WINDOW));
    }

}
} 
```

*这*是元数据应该位于的类。此类正在调度事件。调度相同事件的其他类也可能具有元数据。

因此，当用户单击关闭按钮时， *Window*正在调度一个带有类型的事件。`CLOSE_WINDOW`在另一个文件中，你会听它并用它做一些事情。

```
package com.website
{
import flash.display.Sprite;
import com.website.events.MyCustomEvent;
import com.website.ui.Window;

/**
 * @author ExampleUser
*/
public class Main extends Sprite
{
    private var _window:Window;

    public function Main():void 
    { 
        this._window:Window = new Window();
                    // a smart code-editor would give you a hint about the possible events when you typed "addEventListener" 
        this._window.addEventListener(MyCustomEvent.CLOSE_WINDOW, handleWindowClosed);
        this.addChild(this._window);
    }

    private function handleWindowClosed(event:MyCustomEvent):void 
    { 
        // do something
        this._window.visible = false;
    }
}
} 
```

这应该有效。当然在现实世界的情况下`MyCustomEvent`会被命名为`WindowEvent`.

## 事件元数据

元数据可用于向编译器提供提示，而如今的智能代码编辑器（FDT、FlashDevelop、FlashBuilder、IntelliJ 等）可以提供代码补全。它基本上是对类可以调度什么样的事件的描述，因此您知道可以使用哪些侦听器。

> 即使元数据被删除，代码也应该可以工作。

事件元具有 a`name`和 a `type`。名称应该是类型的确切值。在我们的例子中，它应该是 的值`CLOSE_WINDOW`，所以是`MyCustomEvent.closeWindow`。类型应该是带有完整包的类名，在我们的示例中，它将是“com.website.events.MyCustomEvent”。

最后，元数据如下所示：

```
[Event(name="MyCustomEvent.closeWindow", type="com.website.events.MyCustomEvent")] 
```

顺便说一句，我对您的代码有一些提示：

*   我建议使用英文函数名和参数，而不是荷兰文。
*   `verbergAdminComponent`不是一个好名字的*处理程序*，它应该是类似的`handleCloseWindow(event)`，它应该调用`verbergAdminComponent`函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:32:08.720

verbergAdminComponent 将是事件处理程序的名称。它应该是 mxml、包含的 .as 或该 MXML 的基类中的方法。

# python - 如何在 App Engine Python 中执行这种与会话相关的任务？

> ID：10973432
> 
> 赞同：0
> 
> 时间：2012-06-11T00:21:21.277
> 
> 标签：python, google-app-engine, web-applications

首先，我什至不知道这是否是与会话相关的问题。但我想不出更好的方式来在标题中描述它。

我正在为注册用户开发一个 Web 应用程序，以便他们可以创建和管理工会。

一个用户可以创建多个联合。每个联合可以存储图像、描述和名称。

索引页面显示当前注册用户创建的联合列表。

当用户单击列表中的联合时，应用程序的所有页面都必须在其标题中显示为该联合存储的相应名称和图像。

此外，应用程序的所有选项都必须引用当前选择的联合。这是每个选定工会的过程。

我怎么能在 App Engine Python 上做到这一点？我可以使用什么技术？它与会话有关吗？我使用 Gmail 服务进行身份验证过程。

我希望我能清楚地解释自己。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:26:29.127

您将使用数据存储创建联合作为实体类，并带有描述和名称。如果您的图像很小，您可以将其存储在您的实体中，如果它很大，您可以将其存储在 blobstore 中并将指向它的链接存储在您的实体中。

您可以使用 python 用户 API 进行身份验证。如果您使用的是用户 API，则实际上不需要任何特殊的会话工作。

# gnuplot - 在 Gnuplot 中绘制两个日期之间的填充区域

> ID：10973438
> 
> 赞同：0
> 
> 时间：2012-06-11T00:21:57.007
> 
> 标签：gnuplot

在 x 轴上，我将时间作为日期 %Y-%m-%d。在 y 轴上我有整数。

基本上，我对每个数据点都有一个日期范围，通常由目标日期和两侧的两周窗口给出。我使用窗口低端和高端的垂直线绘制相对于该目标窗口的数据点。

我想遮蔽低端和高端之间的区域。

我尝试添加“ withfilledcurves x1='2000-01-01'”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:51:20.977

我想你在这里有几个选择。如果您只想绘制几个阴影区域，则可以使用矩形（我想这会起作用——尽管我还没有测试过）：

```
set xdata time
set timefmt '%Y-%m-%d'
set object rectangle from first '2000-01-01',graph 0 to first '2001-01-14',graph 1 fc rgb "red" solid back 
```

另一种选择是您像这样格式化数据文件：

```
#date         value     low-date     high-date
2000-01-12    12        2000-01-01   2000-01-26

2000-02-12    12        2000-02-01   2000-02-26

2000-03-12    12        2000-03-01   2000-03-26 
```

请注意，每个“记录”之间有两个空格（三倍行距）。如果您的文件不是三倍行距，您可以使用 sed 轻松完成此操作（在 gnuplot 中）：

```
plot "< sed 'G;G' datafile.dat" ... 
```

在低日期和高日期正好比日期低/高 3600*24*14（两周内的秒数）的特殊情况下，您可以跳过最后两列并像这样绘制它：

```
NPOINTS=3  #Number of points in datafile.
YHIGH=15
set xdata time
set timefmt '%Y-%m-%d'
set style fill solid .5 noborder #somewhat transparent -- see "help fillstyle"
set yrange [0:YHIGH]
plot for [I=0:NPOINTS-1] 'test.dat' i I u 1:(YHIGH):(3600*24*14*2) w boxes,\
     for [I=0:NPOINTS-1] 'test.dat' i I u 1:2 w points ls I+1 
```

第一遍绘制矩形，第二遍绘制点。这仅适用于该点位于范围的中心，并且每个范围正好是 3600*24*14 秒（2 周）。请注意，您必须将点数和 YHIGH 设置为适用于您的数据的某个值。

如果范围可以倾斜 - 例如范围没有以所讨论的点为中心，您可以执行以下操作：

```
NPOINTS=3
YHIGH=15

TIMEFMT='%Y-%m-%d'

set xdata time
set timefmt TIMEFMT
set style fill solid .5 noborder #somewhat transparent -- see "help fillstyle"
set yrange [0:YHIGH]

#difference between two times in seconds
boxwidth(s1,s2)=strptime(TIMEFMT,s1)-strptime(TIMEFMT,s2)  

#average of two times -- number of seconds since 2000 epoch.
boxmidpoint(s1,s2)=(strptime(TIMEFMT,s1)+strptime(TIMEFMT,s2))/2 

set macro  #just to make it a little easier to read.
BOXARGS='stringcolumn(4),stringcolumn(3)'
plot for [I=0:NPOINTS-1] 'test.dat' i I u (boxmidpoint(@BOXARGS)):(YHIGH):(boxwidth(@BOXARGS)) w boxes,\
     for [I=0:NPOINTS-1] 'test.dat' i I u 1:2 ls I+1 
```

# windows-8 - 为什么 VisualTreeHelper.FindElementsInHostCoordinates 不返回结果？

> ID：10973447
> 
> 赞同：4
> 
> 时间：2012-06-11T00:22:47.410
> 
> 标签：windows-8, microsoft-metro

使用 C# 开发 Metro 风格的应用程序。我有一个继承自 Grid 的自定义控件。MyGrid 包含一些其他自定义控件。我正在尝试对 PointerReleased 处理程序中的这些控件进行命中测试：

```
void MyGrid_PointerReleased(object sender, PointerRoutedEventArgs e)
{
    PointerPoint pt = e.GetCurrentPoint(this);
    var hits = VisualTreeHelper.FindElementsInHostCoordinates(pt.Position, this);
    int breakhere = hits.Count();
} 
```

执行此代码后，hitCount 为 0。如果我将 PointerReleased 处理程序在可视树层次结构中移到更高的一个控件，则 hitCount 第一次正确，之后为 0。我设置了一个具有类似 XAML 布局的测试项目，以尝试重现该问题，并且每次都能正常工作。所以我不确定我做了什么坏事阻止了 VisualTreeHelper 工作。我不太确定如何进行调试。有什么想法会导致此函数不返回任何结果吗？

# c# - 如何使用 C#.net 产生软回报

> ID：10973451
> 
> 赞同：0
> 
> 时间：2012-06-11T00:23:47.360
> 
> 标签：c#, c#-4.0, text

我知道这是一个简单的问题，但我似乎无法在任何地方找到它。有没有人知道如何使用 C#.net**在一组文本中创建软返回？**

我需要将软返回打印到文本文件/xml 文件。此文本文件将使用 c#.net 生成。如果您使用 NOTEPAD++，您可以验证答案是否正确，然后启用“查看>显示符号>显示行尾”选项，然后您将看到如下符号：

![在此处输入图像描述](../Images/3faeaaa80afde77fa3fb611815102280.png)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:28:27.473

不知道你所说的软回报是什么意思。一个快速的谷歌搜索表明它是一个非存储的换行符，通常是由于自动换行，在这种情况下你实际上不会把它放在一个字符串中，它只会在字符串被呈现以供显示时才相关。

要将回车和/或换行符放入您将使用的字符串中：

```
string s = "line one\r\nline two"; 
```

为了进一步参考，这里是您可以使用的其他转义码。

[链接（MSDN 博客）](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)

**回应您的编辑**

您看到的 LF 可以用`\n`字符串表示。显然，您有一个需要表示的特定行结束序列。如果您要使用`Environment.NewLine`它，它将在不同的平台上为您提供不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-03T14:26:49.227

```
var message = $"Tom{Convert.ToChar(10)}Harry"; 
```

结果是：

汤姆

哈利

之间只有一个换行符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T01:10:21.867

Lke 已经提到您可以使用 Enviroment.NewLine 但我不确定这是否是您想要的，或者您是否真的在尝试将 ASCII 141 附加到您的字符串中，如评论中所述。

您可以像这样将 ASCII 字符序列添加到您的字符串中。

```
var myString = new StringBuilder("Foo");
myString.Append((char)141); 
```

# java - 什么是equals和hascode以及它与collection..的关系？

> ID：10973452
> 
> 赞同：-1
> 
> 时间：2012-06-11T00:24:01.027
> 
> 标签：java, collections, comparison

> **可能重复：**
> [Hashcode 和 equals](https://stackoverflow.com/questions/1990734/hashcode-and-equals)

我读过很多关于`hashcode`和平等及其关系的文章。到目前为止，我的理解是默认情况下每个`object`都有平等和`hashcode`功能。因为 java`class`有这些功能。现在`hashcode`意味着它返回一个对象的内存地址。`hashcodes`默认情况下是唯一的。创建对象时，您将获得唯一的代码。

*   现在我的问题是，当您按照规则`override`使用`equals`函数时，我们需要覆盖`hashcode`函数..？
*   那么是不是我们`hashcode`与equals方法一起实现了该功能，但`hascode`实现没有用..？
*   以及如何在`hashcode`框架中使用.. ？`hashmap``hashtable``collection`

    ```
    class person{

       string name;

       string employer;

       boolean equals(Object o){
          person per=(person)o;
          if(per.employer==this.employeer){    
              return true
          }
          return false;
      }  

      int hashcode(){

          return 0;//what ever i do in hashcode does it really effect any thing..as the equals does                
                   //the comparison for me and gave me the result     
      }

    } 
    ```

以及它们如何`hascodes`用于`hashmap`和`hashtable`

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:28:33.750

阅读 Joshua Bloch 的“Effective Java”的第 3 章：

[http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf](http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf)

它告诉您如何正确编写两者。

你应该知道 Maps 中的键应该是不可变的。在所有支持地图/字典的语言中都是如此：Python、Java、C# 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:29:04.910

我对 C# 提出了一个非常[相似的问题](https://stackoverflow.com/questions/9709088/when-should-a-net-class-override-equals-when-should-it-not)，我怀疑正确的答案大致相同。

在我看来，底线（有关一些相互冲突的观点，请参阅我的问题的答案）是由您的应用程序域来决定一个对象与另一个对象具有完全相同的属性是否应该意味着它们是“相等的”，或者两个对象是否具有不同的地址（但完全相同的属性值）是不相等的。

我倾向于坚持更常见的定义，即具有相同属性值但不同地址的对象实际上是不同的。如果您觉得需要使用其他定义，那么团队中的每个人都必须非常清楚 a) 那是约定，以及 b) 为什么这是约定，否则很可能会出现错误的错误。

此外，任何时候对象参与依赖哈希码来查找该对象的集合（例如字典）时，哈希码**必须****在对象参与该集合的持续时间内**保持稳定。

# javascript - 在 contentEditable div 中使用 jQuery 替换 HtmlAt

> ID：10973458
> 
> 赞同：4
> 
> 时间：2012-06-11T00:24:57.690
> 
> 标签：javascript, jquery, html

我正在尝试实现以下功能：

```
<div id="editor" contenteditable="true">
I am some text.
</div>

$('#editor').replaceHtmlAt(start, end, string); 
```

用例：

1.  用户键入`@`内部`#editor`

2.  `keyup`事件`@`占位

3.  ​<上一页>`$('#editor').replaceHtmlAt(position of @, position of @ + 1, "<div>Hello</div>");`

这可能吗？

**编辑**

我通过这样做让它工作

```
$(this).slice(pos-1).html('<span id="mention'+pos+'">@</span>'); 
```

但是我遇到了另一个问题。在 Chrome 中，#editor 内的插入符号位置一直移动到后面......如何在 span 标签内的“@”之后恢复插入符号的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T00:38:57.397

Dylan，虽然您关于替换“@”的想法在外行方面是正确的，但我们（编码人员）知道我们可以拦截和弄乱关键事件。

因此，在 Derek 在这里使用的基础上，我会这样做：

```
// @see http://stackoverflow.com/a/4836809/314056
function insertNodeBeforeCaret(node) {
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var range = sel.getRangeAt(0);
            range.collapse(false);
            range.insertNode(node);
            range = range.cloneRange();
            range.selectNodeContents(node);
            range.collapse(false);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    } else if (typeof document.selection != "undefined" && document.selection.type != "Control") {
        var html = (node.nodeType == 1) ? node.outerHTML : node.data;
        var id = "marker_" + ("" + Math.random()).slice(2);
        html += '<span id="' + id + '"></span>';
        var textRange = document.selection.createRange();
        textRange.collapse(false);
        textRange.pasteHTML(html);
        var markerSpan = document.getElementById(id);
        textRange.moveToElementText(markerSpan);
        textRange.select();
        markerSpan.parentNode.removeChild(markerSpan);
    }
}

$("#editor").keydown(function(event){
    if(event.which == 50 && event.shiftKey){ // 50 => '2' and shift+'2' => @
        event.preventDefault(); // abort inserting the '@'
        var html = $('<span>hi</span>'); // create html node
        insertNodeBeforeCaret(html[0]); // insert node before caret
    }
});​ 
```

[演示 JSFiddle](http://jsfiddle.net/CcVgp/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T00:29:16.220

```
$("#editor").keyup(function(){
    $(this).html($(this).html().replace(/@/g, "<div>Hello</div>"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:41:25.703

现在你解决了这个问题。要移动闪光灯，请使用[Selection](https://developer.mozilla.org/en/nsISelection)对象。创建一个选择，从你想要你的闪光灯去的点开始。

# android - 图像不是2的幂？

> ID：10973463
> 
> 赞同：11
> 
> 时间：2012-06-11T00:26:25.170
> 
> 标签：android, android-emulator, libgdx

所以，我用 libGDX 制作了雨滴教程项目。但是，当我尝试将其部署到模拟器时，我收到一条错误消息，指出该图像不是 2 的幂。但我确实使用 GIMP 将图像大小重新调整为 48X48（如教程所建议的那样）。我相信他已经添加了一些代码，以确保可以添加不一定是 2 次方的图像？

有谁知道我会如何解决这个问题？使它成为 2 的幂有点限制.. 不是吗？我非常密切地遵循教程！所以......我不知道从这里去哪里。libGDX 的菜鸟。

LogCat 转储：

```
06-11 00:22:50.942: W/dalvikvm(545): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
06-11 00:22:50.952: E/AndroidRuntime(545): FATAL EXCEPTION: GLThread 72
06-11 00:22:50.952: E/AndroidRuntime(545): com.badlogic.gdx.utils.GdxRuntimeException: Texture width and height must be powers of two: 48x48
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.graphics.Texture.uploadImageData(Texture.java:197)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.graphics.Texture.load(Texture.java:179)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.graphics.Texture.create(Texture.java:159)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:133)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:122)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.drop.Drop.create(Drop.java:38)
06-11 00:22:50.952: E/AndroidRuntime(545):  at com.badlogic.gdx.backends.android.AndroidGraphics.onSurfaceChanged(AndroidGraphics.java:292)
06-11 00:22:50.952: E/AndroidRuntime(545):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1455)
06-11 00:22:50.952: E/AndroidRuntime(545):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
06-11 00:22:51.041: I/AndroidInput(545): sensor listener tear down
06-11 00:22:51.041: I/AndroidGraphics(545): Managed meshes/app: { }
06-11 00:22:51.041: I/AndroidGraphics(545): Managed textures/app: { }
06-11 00:22:51.041: I/AndroidGraphics(545): Managed shaders/app: { }
06-11 00:22:51.041: I/AndroidGraphics(545): Managed buffers/app: { } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-11T18:06:42.347

48x48 不是 2 的幂。如文中所述，该应用程序需要 OpenGL ES 2.0。标准模拟器仅运行 OpenGL ES 1.0。您可以将图像重新缩放为 32x32，然后一切都将在 OpenGL ES 1.x 上按预期工作。

我建议不要使用模拟器来测试 OpenGL ES 应用程序。请改用真实设备。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-11T18:57:30.317

您可以通过在 create() 方法中的游戏类中设置以下代码行来阻止它强制执行两个要求的力量：

```
Texture.setEnforcePotImages(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T03:51:51.563

这对我有用，将从“com.badlogic.gdx.graphics.GL10”导入的所有“GL10”更改为从“com.badlogic.gdx.graphics.GL20”导入的“GL20”

# android - 如何在画布上绘制自己的手写笔风格？

> ID：10973473
> 
> 赞同：1
> 
> 时间：2012-06-11T00:28:03.070
> 
> 标签：android, drawing, android-canvas

我正在寻找如何设置自己的位图，比如我在画布上绘制的路径的手写笔。这在 Sketchbook 中完全实现并且非常完美。我必须使用哪些类？你能给我推荐一些解决方案吗？

# apache-flex - 从在 Mac 上的 Windows/Paralells 下运行的 FlashBuilder 调试 iOS AIR 应用程序

> ID：10973478
> 
> 赞同：0
> 
> 时间：2012-06-11T00:28:48.530
> 
> 标签：apache-flex, air, flash-builder, flex4.5

在我工作的 Windows 7 工作站上，我一直使用 FlashBuilder 4.6 来调试 iPad 应用程序。这个过程简单而可靠——启动调试器，它开始等待应用程序通知它，将应用程序移动到 iTunes，将它移动到 iPad，启动应用程序，应用程序通知调试器它正在运行，调试工作！

在家里，我在运行最新版本 Lion 的 iMac 上运行最新版本的 Parallels 下的 Windows 7。我经历了相同的过程：我将我的 iPad（与工作中的同一台）连接到 Windows VM，Windows iTunes 可以识别它并很好地同步文件。我可以将应用程序的非调试器版本移动到 iPad 上，它运行得很好。但是，当我在 FlashBuilder 中启动调试器，然后将应用程序移动到 iPad 上并启动它时，应用程序无法找到 Flash 调试器。当它启动时，我只是黑屏大约 2 分钟，然后我收到一条消息，要求我输入 Flash 调试器的 IP 地址。

有一个旧的帮助文档表明这是由于 iPad 和调试器主机没有在同一个 wifi 上运行，但我认为这无关紧要。我的工作工作站甚至没有连接到 wifi。

我会考虑任何建议。在家中启动并运行它对我来说非常重要。我尝试直接在 bootcamp 下运行，但 Microsoft 和 Adob​​e 都认为 bootcamp 安装是他们产品的独特安装。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:57:03.160

事实证明，“帮助文档表明这是由于 iPad 和调试器主机未在同一个 wifi 上运行”是正确的。在我的工作环境中，wifi 和以太网局域网在同一个网络上。我错误地认为 iPad 和调试器是通过 USB 电缆进行通信的，但事实并非如此。我认为发生的事情是FB将其计算机的IP地址嵌入到可调试的应用程序中。然后，该应用程序会在该 IP 地址连接到 FB。

我的问题是我在 Parallels 硬件配置设置下将 VM 的网络设置设置为“共享”。然后我的虚拟机有一个 10.211.55.x 的 IP 地址，而不是 196.196.0.x 的 IP 地址，这是我的 LAN 上的地址范围。将设置更改为“共享”解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:02:44.610

我认为这是由于VM环境。确保您的 ipad 连接到 vm 环境而不是主机。

# node.js - 你如何用restify发送html

> ID：10973479
> 
> 赞同：20
> 
> 时间：2012-06-11T00:29:03.123
> 
> 标签：node.js, http-headers, restify

我想在 restify 中为我的一条路由发送纯 html 而不是 json 响应。我尝试设置响应的 contentType 和 header 属性，但它似乎没有在 header 中设置 contentType（浏览器尝试下载文件而不是渲染它）。

```
res.contentType = 'text/html';
res.header('Content-Type','text/html');
return res.send('<html><body>hello</body></html>'); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-30T20:04:51.260

无需更改整个服务器的格式化程序即可操作标头的快速方法：

> restify 响应对象也具有节点 ServerResponse 的所有“原始”方法。

```
var body = '<html><body>hello</body></html>';
res.writeHead(200, {
  'Content-Length': Buffer.byteLength(body),
  'Content-Type': 'text/html'
});
res.write(body);
res.end(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T00:08:05.270

如果您在 restify 配置中覆盖了格式化程序，则必须确保您有 text/html 的格式化程序。因此，这是一个配置示例，它将根据响应对象 (res) 上指定的 contentType 发送 json 和 jsonp-style 或 html：

```
var server = restify.createServer({
    formatters: {
        'application/json': function(req, res, body){
            if(req.params.callback){
                var callbackFunctionName = req.params.callback.replace(/[^A-Za-z0-9_\.]/g, '');
                return callbackFunctionName + "(" + JSON.stringify(body) + ");";
            } else {
                return JSON.stringify(body);
            }
        },
        'text/html': function(req, res, body){
            return body;
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-06-14T18:27:36.290

另一种选择是致电

```
res.end('<html><body>hello</body></html>'); 
```

代替

```
res.send('<html><body>hello</body></html>'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-26T16:31:27.200

It seems like the behaviour @dlawrence describes in his answer has changed since when the answer was posted. The way it works now (at least in Restify 4.x) is:

```
const app = restify.createServer(
  {
    formatters: {
      'text/html': function (req, res, body, cb) {
        cb(null, body)
    }
  }
}) 
```

# python - Python - BytesIO 和 urllib2.add_data

> ID：10973489
> 
> 赞同：0
> 
> 时间：2012-06-11T00:30:37.937
> 
> 标签：python, ironpython, urllib2, bytesio

我有一个 BytesIO，我正在向其中添加各种字节。我想通过 request.add_data 方法在 urllib2.Request 中发送它。我该怎么做呢？当我尝试

```
# create request ....
bytesio = BytesIO()
bytesio.write(open("C:\img.jpg", "rb").read())
request.add_data(bytesio.getvalue()) 
bytesio.close()

urllib2.urlopen(request) # error "expected buffer, got bytes" 
```

我究竟做错了什么？我是 Python 新手，不知道如何从 BytesIO 创建缓冲区。另外，当我尝试时：

```
request.add_data(bytesio)  # instead of bytesio.getvalue() 
```

我收到“对已关闭文件的 I/O 操作”。如果我尝试等到 urlopen 之后调用 bytesio.close，那么请求就会挂起，因为它正在等待关闭 bytesio。

我需要做什么？

**回答**

```
request.add_data(str(btyesio.getvalue()))
bytesio.close() 
```

投到一根弦上让它很开心。我没有尝试查看它是否都适用于 StringIO，也没有尝试过 Python 2.x 和 3.x 之间的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:33:08.380

最简单的解决方案：不要使用 a `BytesIO`，你不需要它。

[`urllib2.Request.add_data`](http://docs.python.org/library/urllib2#urllib2.Request.add_data)期望它的参数是一个字符串，所以给它一个。

电话：

```
bytesio.write(open("C:\img.jpg", "rb").read()) 
```

将整个文件读入内存，然后将其写入`bytesio`内存。这意味着你已经有了字符串，你不需要两次。所以试试：

```
request = urllib2.Request('http://www.site.com')
with open("C:\img.jpg", "rb") as inputfile:
    request.add_data(inputfile.read())
urllib2.urlopen(request) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:01:49.883

只需删除此行（在末尾添加）：

```
bytesio.close() 
```

其他代码似乎对我有用：

```
bytesio = BytesIO()
bytesio.write(open("C:\img.jpg", "rb").read())
request = urllib2.Request('http://www.site.com')
request.add_data(bytesio.getvalue()) 

urllib2.urlopen(request) # error "expected buffer, got bytes"
bytesio.close()

>>In [30]: urllib2.urlopen(request)
Out[30]: <addinfourl at 52264040 whose fp = <socket._fileobject object at 0x315a450>> 
```

或使用 StringIO：

```
sio = StringIO.StringIO(open("C:\img.jpg", "rb").read())
request = urllib2.Request('http://www.site.com')
request.add_data(sio.getvalue()) 

urllib2.urlopen(request) # error "expected buffer, got bytes"
sio.close()

>>In [14]: urllib2.urlopen(request)
Out[14]: <addinfourl at 49067360 whose fp = <socket._fileobject object at 0x2dfb3d0>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:44:38.903

没有 BytesIO.getvalue() 方法，因为它不是必需的。相反，只需保留对底层缓冲区的引用。

这适用于列表和数组，以及字节对象，但这有点巧合，而不是实际的设计目标......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:58:52.123

您可以通过以下方式获取 a 的全部数据`BytesIO`：

```
esio.seek(0, os.SEEK_SET)
esio.read() 
```

（`SEEK_SET`不需要，但我用它来澄清事情）

所以你的例子：

```
# create request ....
bytesio = BytesIO()
bytesio.write(open("C:\img.jpg", "rb").read())
bytesio.seek(0, os.SEEK_SET)
request.add_data(bytesio.read()) 
bytesio.close()

urllib2.urlopen(request) 
```

# c# - C#读取Stata文件

> ID：10973491
> 
> 赞同：1
> 
> 时间：2012-06-11T00:31:06.073
> 
> 标签：c#, parsing, stata

有谁知道用于解析/读取 .net 中的 Stata 文件的开源库？它是一种表格数据格式。

如果没有人看到可以重用的东西，我计划编写一个基于 IDataReader 的阅读器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:44:52.210

经过详尽的搜索，我找不到用于读取 Stata 文件的库。我确实最终为 Stata 版本 5 到 12 编写了一个 IDataReader 实现。我会看看我是否可以将它发布到 github。

给其他人的一个注意事项：IDataReader 没有获取 Stata 使用的类型化 sbyte (int 8) 的方法，因此如果在使用 IDataReader 接口实现读取器时需要该值，可以通过 GetInt16 返回它。

```
 // On the actual StataDataReader
    public sbyte GetSByte(int i) {}

    // This is the smallest int available on IDataReader
    // It will call GetSByte internally if that is the column type
    public short GetInt16(int i){} 
```

我还添加了一个深入的 GetMissingValue，因为 Stata 可以有许多缺失值代码。IsDBNull 不支持任何上下文信息。

```
 public IMissingValue GetMissingValue(int i) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:02:41.367

我不知道 C# 库。但是，Stata 的 .dta 格式已[记录在案](http://www.stata.com/help.cgi?dta)。你也可以看看R的[外国包](http://cran.r-project.org/web/packages/foreign/index.html)。在包的源代码中，您会找到一个名为“stataread.c”的文件，它可能与您的问题相关。

# python - 如何使用 Django 获取 IPV6 地址？

> ID：10973493
> 
> 赞同：5
> 
> 时间：2012-06-11T00:31:48.160
> 
> 标签：python, django, ipv6, ipv4

Django 和一切都在服务器上运行。当他/她的本地机器上的用户访问应用程序时，我需要将此本地机器上的 IPV4 和 IPV6 保存到一个表单中。

这是我用来保存数据的视图：

```
def t031003form_save(request):
    form = T031003Form(request.POST or None, request.FILES or None)
    if request.method == 'POST':
        if form.is_valid():
            form = form.save(False)
            form.C003LOGB = datetime.date.today()
            form.C003LOGD = socket.gethostbyname(socket.gethostname())
            form.save()
            form = T031003Form()
        else:
           return HttpResponseRedirect('/erro/')
    return render_to_response('T031003Form_save.html', {'form': form,}, context_instance=RequestContext(request)) 
```

但是有了这个视图，我不确定我用来保存 IPV4 的字段是否只选择运行 Django 的 IPV4 地址，即服务器。我猜它不会从我需要的本地机器上选择 IPV4 地址。

非常感谢您可以给我的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T00:38:36.897

您只能获取用户用于访问您的站点的 IP 地址，即 IPv4**或**IPv6，但不能同时获取。当前 IP 地址可通过`request.META['REMOTE_ADDR']`

但是，有一种相当简单的方法可以同时获得两者：

*   创建两个子域，`v4.yourdomain.tld`它们`v6.yourdomain.tld`只能*通过*IPv4/6 访问。
*   在您的实际页面上，生成与用户关联的随机令牌并创建脚本标记：

    ```
    <script src="//vX.yourdomain.tld/?token=YYY"></script> 
    ```

    如果用户通过 IPv4 访问您的页面，请使用`X=6`，否则使用`X=4`。

*   在访问子域之一时运行的代码中，记录由令牌标识的用户的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:19:14.903

记得当您拥有 IPv4 时，您可以检索匹配的 IPv6，这将是明智的。IPv4 是 IPv6 的子网，因此转换为 v6 非常简单。然后，您将向您的服务器发送一个 HTTP 请求。

# php - 通过php添加记录mysql时尝试从列中提取5个字符

> ID：10973494
> 
> 赞同：0
> 
> 时间：2012-06-11T00:32:08.047
> 
> 标签：php, mysql, post, split

我的`part_no`专栏有以下格式： `000-00000-00`所有记录。

创建记录时，我需要从中提取五个中间字符`part_no`并将其放置在`core`列中。

我无法让我的脚本工作。

我没有收到任何错误。只是不工作。

```
$order = "INSERT INTO cartons_added (add_time, type, part_no, add_type, add_qty, add_ref, add_by, add_notes)
        VALUES
        ('$date',
        '$_POST[type]', 
        '$_POST[part_no]', 
        '$_POST[add_type]', 
        '$_POST[add_qty]', 
        '$_POST[add_ref]', 
        '$_POST[add_by]', 
        '$_POST[add_notes]')";

$result = mysql_query($order);
$query2 = "select part_no from cartons_current";
$sel = mysql_query($query2);
$res = mysql_result($sel);
while($row = mysql_fetch_row($res)) {
    $core_digits = split('-',$row[0]);
    $core =$core_digits[1];
    $query3 = "insert  into cartons_current(core) values($core)";
    $sel2 = mysql_query($query3);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:48:53.463

您可以`cartons_current`根据您的`cartons_added`表格更新您的表格，例如：

```
INSERT INTO cartons_current(core) 
SELECT SUBSTR(part_no, 5, 5) FROM cartons_added 
```

您可能想用一个`WHERE`子句来限制它，或者处理当这个值已经存在时发生的事情`cartons_current`（使用`INSERT IGNORE`or `ON DUPLICATE KEY UPDATE`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:42:47.327

尝试删除这个

```
$res = mysql_result($sel); 
```

并更改您`while`以引用主要查询资源

```
while($row = mysql_fetch_row($sel)) { 
```

不过，我不明白您对表格的逻辑。您正在将数据插入`cartons_added`表中，但随后您选择了`cartons_current`?

此外，[`split`](http://php.net/split)自 PHP 5.3.0 起已弃用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T00:43:01.677

你说五个中间“字符”，所以我会在你的变量周围添加引号，如下所示：

```
$query3 = "insert  into cartons_current(core) values('$core')"; 
```

*（此外，关于 SQL 注入和使用 pdo 的 SO 上只有无数个答案）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T00:45:54.003

```
INSERT INTO cartons_current(core) 
SELECT 
  substr(part_no,position('-' IN part_no)+1,position('-' IN substr(part_no,position('-' IN part_no)+1))-1)
FROM cartons_added; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T18:26:20.000

你是对的，脚本没有错误。

我认为问题出在您的 SQL 上，导致您无法插入新行，特别是在表结构上。也许您定义了 a `PRIMARY KEY`without `AUTO_INCREMENT`，定义了 a `INDEX`or`UNIQUE`不是键的`core`键，或者还有其他一些没有默认值的键。请记住，如果不定义所有必填字段，则无法插入行。

您的脚本正在选择所有您在同一个表中插入新行的`part_no`每`part_no`一个，所以可能存在问题。

我认为您想要的是更新每个结果以添加它们的`core`价值，您可以使用`UPDATE`以下代码执行此操作：

```
function getValue($value) {
  return "'" . trim(mysql_real_escape_string($value)) . "'";
}

mysql_query('INSERT INTO `cartons_added` (`add_time`, `type`, `part_no`, `add_type`, `add_qty`, `add_ref`, `add_by`, `add_notes`)
             VALUES (' . 
              getValue($date) . ', ' .
              getValue($_POST[type]) . ', ' .
              getValue($_POST[part_no]) . ', ' .
              getValue($_POST[add_type]) . ', ' .
              getValue($_POST[add_qty]) . ', ' .
              getValue($_POST[add_ref]) . ', ' .
              getValue($_POST[add_by]) . ', ' .
              getValue($_POST[add_notes]) . 
             ')');

$partNoQuery = mysql_query('SELECT `part_no` FROM `cartons_current`');

while($partNoResult = mysql_fetch_assoc($partNoQuery)) {
    list($prefix, $core, $suffix) = explode('-', $partNoResult['part_no']);
    mysql_query('UPDATE cartons_current SET `core` = \'' . $core . '\' WHERE `part_no` = \'' . $partNoResult['part_no'] . '\'');
} 
```

我添加了 getValue 函数来转义发布的数据以防止 SQL 注入。

# jquery - Jquery Animate 背景图像在悬停时摇摆在 Firefox 中不起作用

> ID：10973498
> 
> 赞同：1
> 
> 时间：2012-06-11T00:32:44.153
> 
> 标签：jquery, firefox, hover, jquery-animate, background-image

我对 jQuery 或 Javascript 一点儿也不了解。然而，我非常擅长用 HTML、CSS 和一些基本的 PHP 进行编码。

我已经挣扎了太多小时来破解一个小代码块，该代码块在悬停/关闭悬停时为背景图像设置动画。

我现在看到它在 Firefox 中不起作用，因为据说 FF 不接受 background-position-y（或 x？）。

我已经尽可能多地阅读了这里，我似乎无法实施之前帖子中建议的任何修复。

这是一个工作示例： http: [//jsfiddle.net/jmarcello/3TGTB/26/](http://jsfiddle.net/jmarcello/3TGTB/26/) 它也可以在这里看到：[http ://www.buenolisto.com/alma](http://www.buenolisto.com/alma)

任何帮助将不胜感激。如果有人可以以一种我能理解的简单轻量级方式修改代码并且可以完成工作，我将永远感激不尽。

如果您需要我将代码直接放在这里，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:40:42.490

完全不同的方法呢？

[http://jsfiddle.net/Aaqp7/](http://jsfiddle.net/Aaqp7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:53:52.527

Firefox 不支持 background-position-x，background-position-y，规范中也不支持（[它被拒绝了](http://www.w3.org/Style/CSS/Tracker/issues/9)）
您应该考虑 ahren 建议的另一种方法

# haskell - 我应该把我的 snaplets 放在哪里？

> ID：10973500
> 
> 赞同：1
> 
> 时间：2012-06-11T00:33:32.723
> 
> 标签：haskell, haskell-snap-framework

我是 Haskell 和 Snap 的新手，我想编写一个简单的错误跟踪应用程序。我使用它设置了一个 Snap 项目`$ snap init`，它可以工作。问题是我不知道如何走得更远。

我想创建一个`Tickets`使用数据库存储错误报告的 snaplet，并在我的主 Web 应用程序中使用该 snaplet。

我阅读了有关 snaplets 的文档，但我不知道将它们的源代码放在哪里（`/snaplets`我想在目录中？如果是，我如何加载它们？）。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T05:22:59.477

您确定需要为工单创建单独的 snaplet 吗？snaplet 基础设施适用于**可重用**组件，例如会话管理、身份验证、数据库访问、管理面板、用户管理等。

您是否要在多个 Web 应用程序中使用您的门票自包含模块？如果是这样，那么一定要继续创建一个 snaplet。

无论如何，在我看来，您至少部分是在询问如何在使用 snap 时组织具有多个“模块”或“部分”的项目。我将尝试在下面解决这个问题。如果您觉得我错过了分数，请告诉我。

**假设您不需要为工单创建单独的 snaplet：**

对于特定于单个站点的功能，我认为您最好创建一些模块并在当前应用程序的包和模块层次结构中为功能开发代码。以下是关于我最近如何组织我的快照项目的几点：

*   我将与数据库相关的代码放在`MyApp.DB.` 命名空间中的模块下。您可以拥有一个`MyApp.DB.Tickets`包含在门票模块上进行操作所需的所有数据库调用。

*   我将所有与 UI 相关的功能放在`MyApp.UI.`命名空间下。您可以放置​​一个`MyApp.UI.Tickets`包含 your `Handlers`、 your `Splices`、 your`Forms`等的模块。

*   为了处理表格，我使用了优秀的[消化函子](http://hackage.haskell.org/package/digestive-functors)库。如果您还不知道这篇[博文，您可能会发现它们很有帮助。](http://jaspervdj.be/posts/2012-04-03-digestive-functors-for-snap-users.html)

*   我通常有一个共享的 UI 帮助程序库，在`MyApp.UI.Helpers`其中放置所有/大多数 UI 模块使用的通用代码。

*   我通常在下面有一个共享的表单助手库`MyApp.UI.Forms`

*   任何与我的应用程序公开 Web UI 的事实相切的代码都超出了`MyApp.UI.`命名空间。因此，如果我的应用程序需要执行一些离线分析，我可以将它们放在`MyApp.Analysis.`命名空间下。

一旦您在 下定义并导出处理程序`MyApp.UI.Tickets`，您就可以转到您的`Site.hs`文件并将它们连接到您的应用程序中的特定路径。

有关如何处理数据库连接的灵感，您可以查看[postgresql-simple snaplet](https://github.com/mightybyte/snaplet-postgresql-simple)。

**但是，如果您确实需要创建 snaplet：**

snaplet 只是一个使用基础设施的独立应用程序`Snap.Snaplet`，（通常）有自己的`.cabal`文件，并且（通常）是自己的 Haskell 包。然后，Snap 为您提供了一种将这个可重用、独立的应用程序**嵌入**或**嵌套**到另一个 snap 应用程序中的方法。想想[俄罗斯娃娃](http://en.wikipedia.org/wiki/Matryoshka_doll)的等级制度。

假设您执行了与我在上一节中描述的类似的操作，那么您现在 95% 已准备好转换为 snaplet。只需将您的应用程序命名为 snaplet-tickets，在另一个 snap 应用程序中公开`SnapletInit`使用[`makeSnaplet`](http://hackage.haskell.org/packages/archive/snap/0.8.1/doc/html/Snap-Snaplet.html#t:Initializer)和使用`nestSnaplet`，以在此处包含这个可重用的功能。

# android - Android：图层列表不起作用？

> ID：10973503
> 
> 赞同：8
> 
> 时间：2012-06-11T00:34:32.473
> 
> 标签：android, android-layout, android-xml

我正在尝试将两个椭圆形可绘制对象放在一起，第一个具有透明度。但是，按照我的方式，它以第二个椭圆的大小显示第一个椭圆的颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <shape android:shape="oval">
        <size android:width="15dp" android:height="15dp" />
        <solid android:color="#35000000"/>
    </shape>
</item>
<item>
    <shape android:shape="oval">
        <size android:width="5dp" android:height="5dp" />
        <solid android:color="#000000"/>
    </shape>
</item>
</layer-list> 
```

我怎样才能让它按预期工作？

**编辑：** 这是父母：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/my_layerlist" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T11:19:05.643

在对不同类型的 XML 可绘制对象进行了大量研究之后，您的（图层列表）似乎`LayerDrawable`正在独立缩放`ShapeDrawables`。***然后***，`ImageView`正在缩放`LayerDrawable`。根据[Google 的这份指南](http://developer.android.com/guide/topics/resources/drawable-resource.html)， s 和***s*** 的缩放是一个问题。s 将检查您拥有的*每个*项目的必要缩放。他们有几种解决方案：`ShapeDrawable``LayerDrawable``LayerDrawable`

 **   将 设置为`gravity`不缩放的东西，例如“中心”。
*   将drawable定义为位图。
*   将 ImageView 设置为不缩放的 scaleType。

但是，这有两个主要问题……您只能`gravity`用于`bitmap`. 并且您不能`bitmap`在 XML 中使用 ShapeDrawable。我尝试了我能想到的一切来把它做好***。***这是**唯一**为我解决的问题。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/oval1"
    android:scaleType="center"  />
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/oval2"
    android:scaleType="center"  />
</FrameLayout> 
```

所以：我删除了 LayerDrawable，将 Shapes 分离成它们自己的 XML，制作了两个 ImageView。（为方便起见，我将它们卡在 FrameLayout 中）。这是停止缩放的唯一方法。

* * *

### 测试程序

在 Android 2.1、3.0、4.0 中测试

*   改变图像`scaleType`
*   改变图像`width`和`height`
*   分离的 ShapeDrawables
*   将 LayerList 更改为 just `item`s，`drawable`属性引用分隔`shape`的 s
*   将 LayerList 更改为`bitmap`s 引用分隔`shape`的 s。
*   更改了`shape`s 的顺序

* * *

或者，您可以在代码中执行此操作。

* * *

*   **参考：** [可绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html)*

# android - 根据自定义适配器中的条件更改特定行的背景

> ID：10973504
> 
> 赞同：2
> 
> 时间：2012-06-11T00:34:36.953
> 
> 标签：android, android-listview, adapter

我正在尝试根据从远程服务器上的数据库接收到的标志来更改行的背景颜色。

在我的代码中，我创建了一个名为 disable 的 ArrayList 来保存所有被标记的位置。我想将禁用列表中的内容与我的 ListView 中的位置相匹配。我研究了几个帖子，但没有一个明确显示如何做到这一点。我将找到的内容拼凑在一起，并将其放入下面的自定义适配器中。

据我了解， public int getItemViewType(int position) 可以根据条件选择特定行并更改其属性。满足此条件时如何更改背景？我的程序中 getItemViewType(int position) 中的代码不起作用，但您可以看到我正在尝试做什么。

问题1：我需要制作两个xml布局文件吗？一个用于正常视图，另一个用于禁用视图？问题 2：你知道我可以遵循的任何例子吗？

```
package com.convention.notification.app;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class NewsRowAdapter extends ArrayAdapter<Item> {

    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int row;
    private List<Integer> disable;
    View view ;

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList, List<Integer> disableList) {
        super(act, resource, arrayList);
        this.activity = act;
        this.row = resource;
        this.items = arrayList;
        this.disable=disableList;

        System.out.println("results of delete list a:"+disable.toString()); 

    }

    public int getCount(){
       return items.size();
     }

    public Item getItem(int position){
         return null;
       }

    public long getItemId(int position){
       return position;
    }

    @Override
    public int getViewTypeCount() {
        return 2;

      }

   @Override
    public int getItemViewType(int position) {

        for (int s: disable){

           if (s == position){

            //   view.setBackgroundColor(Color.YELLOW);

           }

        }
        return position;

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
         view = convertView;

        ViewHolder holder;
        if (view == null) {
            //ViewHolder is a custom class that gets TextViews by name
            holder = new ViewHolder();

            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(row, null);

            // holder.txtViewDescription = (TextView) convertView.findViewById(R.id.txtViewDescription); 

            /* setTag Sets the tag associated with this view. A tag can be used to
             * mark a view in its hierarchy and does not have to be unique 
             * within the hierarchy. Tags can also be used to store data within
             * a view without resorting to another data structure.

*/
        view.setTag(holder);
        } else {

            //the Object stored in this view as a tag
            holder = (ViewHolder) view.getTag();
        }

        if ((items == null) || ((position + 1) > items.size())){

            return view;
        }

        objBean = items.get(position);

        holder.tv_event_name = (TextView) view.findViewById(R.id.tv_event_name);
        holder.tv_event_date = (TextView) view.findViewById(R.id.tv_event_date);
        holder.tv_event_start = (TextView) view.findViewById(R.id.tv_event_start);
        holder.tv_event_end = (TextView) view.findViewById(R.id.tv_event_end);
        holder.tv_event_location = (TextView) view.findViewById(R.id.tv_event_location);

        if (holder.tv_event_name != null && null != objBean.getName()
                && objBean.getName().trim().length() > 0) {
            holder.tv_event_name.setText(Html.fromHtml(objBean.getName()));

        }
        if (holder.tv_event_date != null && null != objBean.getDate()
                && objBean.getDate().trim().length() > 0) {
            holder.tv_event_date.setText(Html.fromHtml(objBean.getDate()));
        }
        if (holder.tv_event_start != null && null != objBean.getStartTime()
                && objBean.getStartTime().trim().length() > 0) {
            holder.tv_event_start.setText(Html.fromHtml(objBean.getStartTime()));
        }
        if (holder.tv_event_end != null && null != objBean.getEndTime()
                && objBean.getEndTime().trim().length() > 0) {
            holder.tv_event_end.setText(Html.fromHtml(objBean.getEndTime()));
        }
        if (holder.tv_event_location != null && null != objBean.getLocation ()
                && objBean.getLocation ().trim().length() > 0) {
            holder.tv_event_location.setText(Html.fromHtml(objBean.getLocation ()));

        }

        return view;
    }

    public class ViewHolder {
        public TextView 
        tv_event_name,
        tv_event_date,
        tv_event_start,
        tv_event_end,
        tv_event_location
        /*tv_event_delete_flag*/;

    }

} 
```

日志猫：

```
06-11 00:06:43.133: D/dalvikvm(60): GC_EXPLICIT freed 230K, 45% free 4939K/8839K, external 3511K/3903K, paused 81ms
06-11 00:06:43.133: I/installd(34): unlink /data/dalvik-cache/data@app@com.convention.notification.app-1.apk@classes.dex
06-11 00:06:43.133: D/AndroidRuntime(528): Shutting down VM
06-11 00:06:43.173: D/dalvikvm(528): GC_CONCURRENT freed 101K, 72% free 295K/1024K, external 0K/0K, paused 1ms+0ms
06-11 00:06:43.173: D/jdwp(528): Got wake-up signal, bailing out of select
06-11 00:06:43.173: D/dalvikvm(528): Debugger has detached; object registry had 1 entries
06-11 00:06:43.203: I/dalvikvm(528): JNI: AttachCurrentThread (from ???.???)
06-11 00:06:43.203: I/AndroidRuntime(528): NOTE: attach of thread 'Binder Thread #3' failed
06-11 00:06:43.653: D/AndroidRuntime(542): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-11 00:06:43.653: D/AndroidRuntime(542): CheckJNI is ON
06-11 00:06:44.223: D/AndroidRuntime(542): Calling main entry com.android.commands.am.Am
06-11 00:06:44.243: I/ActivityManager(60): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.convention.notification.app/.DataView } from pid 542
06-11 00:06:44.273: I/ActivityManager(60): Start proc com.convention.notification.app for activity com.convention.notification.app/.DataView: pid=550 uid=10042 gids={3003}
06-11 00:06:44.323: D/AndroidRuntime(542): Shutting down VM
06-11 00:06:44.323: D/dalvikvm(542): GC_CONCURRENT freed 103K, 69% free 319K/1024K, external 0K/0K, paused 1ms+1ms
06-11 00:06:44.334: D/dalvikvm(542): Debugger has detached; object registry had 1 entries
06-11 00:06:45.503: I/ActivityManager(60): Displayed com.convention.notification.app/.DataView: +1s233ms
06-11 00:06:47.163: I/System.out(550): item disalbed is at postion :1
06-11 00:06:47.163: I/System.out(550): item disalbed is at postion :6
06-11 00:06:47.163: I/System.out(550): item disalbed is at postion :14
06-11 00:06:47.163: I/System.out(550): item disalbed is at postion :15
06-11 00:06:47.163: I/System.out(550): item disalbed is at postion :18
06-11 00:06:47.163: I/System.out(550): results of delete list :[1, 6, 14, 15, 18]
06-11 00:06:47.163: I/System.out(550): results of delete list  in Adapeter:[1, 6, 14, 15, 18]
06-11 00:06:47.173: I/System.out(550):  set adapaer to list view called;
06-11 00:06:50.693: D/dalvikvm(237): GC_EXPLICIT freed 8K, 51% free 2725K/5511K, external 1625K/2137K, paused 61ms
06-11 00:06:55.783: D/dalvikvm(264): GC_EXPLICIT freed 17K, 52% free 2778K/5703K, external 1625K/2137K, paused 98ms
06-11 00:07:05.163: D/dalvikvm(308): GC_EXPLICIT freed 15K, 49% free 3363K/6535K, external 1625K/2137K, paused 43ms
06-11 00:07:10.284: D/dalvikvm(361): GC_EXPLICIT freed 15K, 48% free 3523K/6727K, external 1625K/2137K, paused 102ms
06-11 00:07:15.303: D/dalvikvm(378): GC_EXPLICIT freed 6K, 51% free 2718K/5511K, external 1625K/2137K, paused 73ms
06-11 00:07:20.383: D/dalvikvm(201): GC_EXPLICIT freed 21K, 50% free 2995K/5959K, external 1625K/2137K, paused 121ms
06-11 00:07:25.463: D/dalvikvm(130): GC_EXPLICIT freed 114K, 48% free 3089K/5895K, external 4932K/5608K, paused 124ms
06-11 00:11:22.113: D/SntpClient(60): request time failed: java.net.SocketException: Address family not supported by protocol 
```

- - - - - - - - - - - - - 更新 - - - - - - - - - - - - ------ 我通过删除 getItem() 方法修复了这个异常错误，并且我能够在列表中的一些视图上看到黄色背景。

当前的问题在 while 循环中。我正在尝试将我的列表视图与标记的项目进行比较，并且只在标记的项目上放置一个黄色背景。但是，我在每四个视图上都会得到一个黄色背景。这不是我打算做的。您能否建议我如何修复 While 循环和/或 for 循环中的逻辑以使黄色背景与正确的位置/视图匹配？

这是更新的代码：

```
package com.convention.notification.app;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class NewsRowAdapter extends ArrayAdapter<Item> {

    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int row;
    private List<Integer> disable;
    View view ;

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList, List<Integer> disableList) {
        super(act, resource, arrayList);
        this.activity = act;
        this.row = resource;
        this.items = arrayList;
        this.disable=disableList;

        System.out.println("results of delete list a:"+disable.toString()); 

    }

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                View view = convertView;
                ViewHolder holder;
                if (view == null) {
                    LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = inflater.inflate(row, null);

                    try{
                                int j = 0;
                                while (j < items.size()) {
                                    for(int k =0;k< disable.size();k++){
                                        if(position == disable.get(k)){
                                            view.setBackgroundColor(Color.YELLOW);
                                            System.out.println("background set to yellow at disable "+disable.get(j));
System.out.println("background set to yellow at position "+position);
                                        } else {
                                            view.setBackgroundColor(Color.WHITE);
            System.out.println("background set to white at position "+position);

                    }
                                    }

                                    j++;   
                                }
                    }catch(IndexOutOfBoundsException e){

                    System.out.println(" crash");
                    }

                    //ViewHolder is a custom class that gets TextViews by name: tvName, tvCity, tvBDate, tvGender, tvAge;
                    holder = new ViewHolder();

                    /* setTag Sets the tag associated with this view. A tag can be used to
                     *  mark a view in its hierarchy and does not have to be unique 
                     *  within the hierarchy. Tags can also be used to store data within
                     *   a view without resorting to another data structure.

        */
                    view.setTag(holder);
                } else {

                    //the Object stored in this view as a tag
                    holder = (ViewHolder) view.getTag();
                }

                if ((items == null) || ((position + 1) > items.size()))
                    return view;

                objBean = items.get(position);

        holder.tv_event_name = (TextView) view.findViewById(R.id.tv_event_name);
        holder.tv_event_date = (TextView) view.findViewById(R.id.tv_event_date);
        holder.tv_event_start = (TextView) view.findViewById(R.id.tv_event_start);
        holder.tv_event_end = (TextView) view.findViewById(R.id.tv_event_end);
        holder.tv_event_location = (TextView) view.findViewById(R.id.tv_event_location);

        if (holder.tv_event_name != null && null != objBean.getName()
                && objBean.getName().trim().length() > 0) {
            holder.tv_event_name.setText(Html.fromHtml(objBean.getName()));

        }
        if (holder.tv_event_date != null && null != objBean.getDate()
                && objBean.getDate().trim().length() > 0) {
            holder.tv_event_date.setText(Html.fromHtml(objBean.getDate()));
        }
        if (holder.tv_event_start != null && null != objBean.getStartTime()
                && objBean.getStartTime().trim().length() > 0) {
            holder.tv_event_start.setText(Html.fromHtml(objBean.getStartTime()));
        }
        if (holder.tv_event_end != null && null != objBean.getEndTime()
                && objBean.getEndTime().trim().length() > 0) {
            holder.tv_event_end.setText(Html.fromHtml(objBean.getEndTime()));
        }
        if (holder.tv_event_location != null && null != objBean.getLocation ()
                && objBean.getLocation ().trim().length() > 0) {
            holder.tv_event_location.setText(Html.fromHtml(objBean.getLocation ()));

        }

        return view;
    }

    public class ViewHolder {
        public TextView 
        tv_event_name,
        tv_event_date,
        tv_event_start,
        tv_event_end,
        tv_event_location
        /*tv_event_delete_flag*/;

    }

} 
```

日志猫：

```
06-11 10:54:45.063: I/System.out(1692): item disalbed is at postion :1
06-11 10:54:45.063: I/System.out(1692): item disalbed is at postion :6
06-11 10:54:45.063: I/System.out(1692): item disalbed is at postion :14
06-11 10:54:45.063: I/System.out(1692): item disalbed is at postion :15
06-11 10:54:45.073: I/System.out(1692): item disalbed is at postion :18
06-11 10:54:45.073: I/System.out(1692): results of delete list :[1, 6, 14, 15, 18]
06-11 10:54:45.073: I/System.out(1692): results of delete list a:[1, 6, 14, 15, 18]
06-11 10:54:45.073: I/System.out(1692):  set adapaer to list view called;
06-11 10:54:45.183: I/System.out(1692): background set to white at position 0

06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.393: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.403: I/System.out(1692): background set to white at position 0
06-11 10:54:45.573: I/System.out(1692): background set to yellow at disable list 1
06-11 10:54:45.573: I/System.out(1692): background set to yellow at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to yellow at disable list 6
06-11 10:54:45.573: I/System.out(1692): background set to yellow at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to white at position 1
06-11 10:54:45.573: I/System.out(1692): background set to yellow at disable list 14
06-11 10:54:45.573: I/System.out(1692): background set to yellow at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to yellow at disable list 15
06-11 10:54:45.583: I/System.out(1692): background set to yellow at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to yellow at disable list 18
06-11 10:54:45.583: I/System.out(1692): background set to yellow at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.583: I/System.out(1692): background set to white at position 1
06-11 10:54:45.593: I/System.out(1692):  crash
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/System.out(1692): background set to white at position 2
06-11 10:54:45.623: I/Sys....3,4,....
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.163: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.173: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.183: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.193: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.203: I/System.out(1692): background set to white at position 5
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to yellow at disable list 1
06-11 10:54:46.283: I/System.out(1692): background set to yellow at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to yellow at disable list 6
06-11 10:54:46.283: I/System.out(1692): background set to yellow at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to yellow at disable list 14
06-11 10:54:46.283: I/System.out(1692): background set to yellow at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.283: I/System.out(1692): background set to white at position 6
06-11 10:54:46.293: I/System.out(1692): background set to white at position 6
06-11 10:54:46.293: I/System.out(1692): background set to white at position 6
06-11 10:54:46.293: I/System.out(1692): background set to yellow at disable list 15
06-11 10:54:46.293: I/System.out(1692): background set to yellow at position 6
06-11 10:54:46.293: I/System.out(1692): background set to white at position 6
06-11 10:54:46.293: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to yellow at disable list 18
06-11 10:54:46.303: I/System.out(1692): background set to yellow at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692): background set to white at position 6
06-11 10:54:46.303: I/System.out(1692):  crash
06-11 10:54:46.353: I/System.out(1692): background set to white at position 7
06-11 10:54:46.353: I/System.out(1692): background set to white at position 7
06-11 10:54:46.353: I/System.out(1692): background set to white at position 7
06-11 10:54:46.353: I/System.out(1692): background set to white at position 7
06-11 10:54:46.353: I/System.out(1692): background set to white at position 7
06-11 10:54:46.353: I/System.out(...... 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:26:26.953

通过从视图中查找其 Id 来获取要更改背景的整行。现在设置您选择的背景...

从此链接获得更多帮助..：

[在 Android 上更改 ListView 项目的背景颜色](https://stackoverflow.com/questions/2217753/changing-background-color-of-listview-items-on-android)

# c# - 在 sqlite-net 和 servicestack ormlite 之间共享代码？

> ID：10973505
> 
> 赞同：1
> 
> 时间：2012-06-11T00:34:38.350
> 
> 标签：c#, xamarin.android, servicestack, ormlite-servicestack

我正在使用[sqlite-net](http://code.google.com/p/sqlite-net/)在我的 MonoDroid 移动应用程序上存储数据。我也想将此数据与服务器端服务同步。

是否可以在 sqlite-net 和 Servicestacks ormlite 之间共享我的实体对象的代码？

我可以看到两者之间的主要区别是在对象的类顶部声明“使用命名空间”语句。是否可以检测平台并根据平台设置使用语句？

另一个区别是为 servicestack 引用不同的 dll，所以我想在移动应用程序上，如果有对 servicestack 命名空间的引用，它就不会编译......

实现此代码共享的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:37:32.943

它们是使用物理上不同的属性类型的 2 个不同的程序集，因此为了链接它们，我将使用 2 个 VS.NET/MonoDevelop 项目解决方案文件，每个项目中都定义了自定义构建符号，因此您可以执行以下操作：

```
#if MONODROID
   using SQLite;
#else
   using ServiceStack.OrmLite;
#endif 
```

为了尽量减少影响，您还可以将尽可能多的平台差异保存到特定平台文件中，并在每个解决方案中包含适当的差异。

[您可以在ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text/) JSON、JSV 和 CSV 文本序列化程序中看到一个支持多个构建环境的示例，它具有不同的 .sln/.proj 文件，适用于[.NET、MonoTouch、Silverlight 4.0/5.0、Windows Phone 和 XBox 环境](https://github.com/ServiceStack/ServiceStack.Text/tree/master/src)。

# c++ - 创建字符指针向量以指向字符串向量

> ID：10973507
> 
> 赞同：0
> 
> 时间：2012-06-11T00:34:58.667
> 
> 标签：c++, string, vector, chars

我有一个字符串向量：vectorElements 我想创建一个 *char 向量来指向每个字符串的开头。我的目标是能够逐个字符地遍历每个字符串。最终，我想对字符串向量进行排序。注意：字符串可能包含整数值。在这种情况下，我将根据它们的数值进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:20:16.667

如果您使用 C++ 编写，最好使用 C++[`string`](http://www.cplusplus.com/reference/string/string/)而不是`char`. 您仍然可以通过获取迭代器来遍历每个字符 with 并在迭代器上`begin()`使用重载运算符`++`遍历到下一个字符（检查返回的迭代器`end()`以了解您是否到达字符串的末尾）。您还可以使用重载 operator 以 C 风格引用字符串中的字符`[]`。

因此，a`vector<string>`可能是您所需要的。

要对字符串进行排序，您可能需要在标题中使用[`sort`](http://www.cplusplus.com/reference/algorithm/sort/)函数。`algorithm`由于您不是一直按词法对它们进行排序，因此您必须定义自己的函数来比较两个字符串。

**比较的伪代码**：

```
while (i < str1.length() && i < str2.length())
  if (!isDigit(str1[i]) || !isDigit(str2[i]))
    // Lexical comparison
    if (str1[i] != str2[i])
      i++
    else
      return str1[i] < str2[i]
  else // If both are digits
    // parseInt will parse the number starting from current position
    // as positive integer
    // - It will consume as many characters as possible (greedily) and
    // return the parsed number plus the number of characters consumed
    // - If the number is very large (exceed 64-bit), you may want to 
    // only find the length of the number and write another
    // comparison function for big numbers.
    // The code below assumes no overflow
    (num1, len1) = parseInt(str1, i)
    (num2, len2) = parseInt(str2, i)
    if (num1 == num2)
      i += len1
    else
      return num1 < num2

if (str1.length() == str2.length())
  return false
else
  return str1.length() < str2.length() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:16:59.617

您可以使用[std::sort](http://www.cplusplus.com/reference/algorithm/sort/)。

```
for ( int i=0; i<vec.size(); ++i )
{
    std::string & str = vec[i];
    std::sort(str.begin(), str.end());
} 
```

[演示](http://ideone.com/73Xjd)

# haskell - 如何让我的文字成为haskell中的数字

> ID：10973514
> 
> 赞同：2
> 
> 时间：2012-06-11T00:37:31.837
> 
> 标签：haskell

所以我是haskell的新手，问题比比皆是。我一直在阅读几本书并尝试自己做一些事情，有人可以向我解释为什么这是抱怨文字没有实现 eq，我理解为什么 eq 是必要的 - 但我没有不明白为什么这被视为文字而不是数字或我如何改变它。

```
generateListOfRandoms :: a -> b -> c -> d -> [(d, (a, b))]
generateListOfRandoms _ _ 0 _ = []
generateListOfRandoms rangeStart rangeEnd numberOfRandoms randGenerator =
    (randGenerator, (rangeStart,rangeEnd))  : generateListOfRandoms rangeStart rangeEnd (numberOfRandoms-1) randGenerator 
```

我确信当我尝试给它一个 IO 函数时，我的函数会以其他方式失败，正如你们中的一些人可能猜到的那样，但我现在很困惑为什么会出现这个错误：

```
src\Main.hs:23:27:
    No instance for (Eq c)
      arising from the literal `0'
    In the pattern: 0
    In an equation for `generateListOfRandoms':
        generateListOfRandoms _ _ 0 _ = [] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T00:49:51.253

如果使用数字文字，则相应参数的类型必须属于`Num`该类。此外，由于您正在对数字文字进行模式匹配，因此您需要该类型属于`Eq`该类。您必须将这些约束添加到您的类型签名中，

```
generateListOfRandoms :: (Num c, Eq c) => a -> b -> c -> d -> [(d, (a, b))] 
```

如果您不使用 GHC-7.4，则该约束由最近更改的`Eq`约束隐含，因此如果您同时使用两者，则现在必须明确声明两者。`Num`

# r - on.exit 示例，添加参数

> ID：10973517
> 
> 赞同：7
> 
> 时间：2012-06-11T00:38:16.383
> 
> 标签：r

有人可以为我提供一个简单的用例，其中 on.exit() 函数的“add”参数为真？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T01:20:28.860

这是一个非常简单的例子

```
myfun <- function(x){
    on.exit(print("first"))
    on.exit(print("second"), add = TRUE)
    return(x)
}

myfun(2)
#[1] "first"
#[1] "second"
#[1] 2 
```

还要注意没有 add=TRUE 参数会发生什么

```
fun <- function(x){
    on.exit(print("first"))
    on.exit(print("second"))
    return(x)
}

fun(2)
#[1] "second"
#[1] 2 
```

如果您不添加“add=TRUE”，则对 on.exit 的第二次调用将删除第一次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:44:57.153

我不知道 R 但阅读[onexeit 的定义](http://stat.ethz.ch/R-manual/R-patched/library/base/html/on.exit.html)，`add = true`确保除了任何先前存储的 onexit experssions 之外，还评估第一个表达式，同时`add = false`覆盖前一个表达式。

所以环顾四周，我在[jhsph.edu](http://www.biostat.jhsph.edu/~rpeng/biostat776/readData.R)上找到了这个：

**它似乎基本上确保它`tmp`也关闭以及 `file`退出**

```
readData2 <- function(file, ...) {
        file <- file(file, "r")
        on.exit(close(file))

        tmp <- tempfile()
        tmpcon <- file(tmp, "w")

        on.exit(close(tmpcon), add = TRUE)

        incomment <- FALSE

        while(length(line <- readLines(file, 1)) > 0) {
                .
                .
                . ommited in SO example
                .
                .
                .
        }
        close(tmpcon)
        close(file)
        on.exit()

        read.csv(tmp, ...)
} 
```

# shell - 小规模负载均衡

> ID：10973521
> 
> 赞同：4
> 
> 时间：2012-06-11T00:39:42.053
> 
> 标签：shell, parallel-processing, job-scheduling

我有一系列的工作需要完成；作业之间没有依赖关系。我正在寻找一种工具来帮助我将这些工作分配给机器。唯一的限制是每台机器一次只能运行一个作业。我正在尝试最大化吞吐量，因为工作不是很平衡。由于我预先构建了每台机器的作业队列，我目前的组合 shell 脚本效率较低，并且无法将作业从负载繁重的机器的队列移动到正在等待的机器，已经完成了所有工作。

以前的建议包括 SLURM，这看起来有点过分，甚至更过分的 LoadLeveller。

GNU Parallel 看起来几乎正是我想要的，但是远程机器不支持 SSH；使用了一个自定义作业启动器（没有排队功能）。我想要的是 Gnu Parallel，其中机器可以在调度作业之前动态替换为 shell 脚本。

所以，总结一下：

*   作业列表+可以接受的机器列表：最大化吞吐量。尽可能靠近外壳是首选。

在最坏的情况下，某些东西可以与 bash 的锁定文件一起被破解，但我觉得好像在某个地方必须存在更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:31:56.573

假设您的工作在一个`jobs.tab`看起来像的文本文件中

```
/path/to/job1
/path/to/job2
... 
```

创建`dispatcher.sh`为

```
mkfifo /tmp/jobs.fifo
while true; do
  read JOB
  if test -z "$JOB"; then 
    break 
  fi
  echo -n "Dispatching job $JOB .."
  echo $JOB >> /tmp/jobs.fifo
  echo ".. taken!"
done
rm /tmp/jobs.fifo 
```

并运行一个实例

```
dispatcher.sh < jobs.tab 
```

现在创建`launcher.sh`为

```
while true; do
  read JOB < /tmp/jobs.fifo
  if test -z "$JOB"; then
    break
  fi

  #launch job $JOB on machine $0 from your custom launcher

done 
```

`launcher.sh`并运行每台目标机器的一个实例（将机器作为第一个也是唯一的参数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:13:20.203

GNU Parallel 支持您自己的 ssh 命令。所以这应该工作：

```
function my_submit { echo On host $1 run command $3; }
export -f my_submit
parallel -j1 -S "my_submit server1,my_submit server2" my_command ::: arg1 arg2 
```

# xml - CVC 复杂类型错误

> ID：10973524
> 
> 赞同：1
> 
> 时间：2012-06-11T00:40:43.637
> 
> 标签：xml, eclipse

我从 SVN 导入了一个项目。我正在使用eclipse，maven。现在我收到了大约 200 个与 cvc.complexType 相关的错误，如下所示。请注意，我已经有其他关于错过罐子的错误。我不确定这是否是这种情况。

![在此处输入图像描述](../Images/fd4e7d600078e0f804b0930647a51fd9.png)

有关错误的更多详细信息：

代码 ：

相关错误：

```
 cvc-complex-type.2.4.a: Invalid content was found starting with 
 element 'many-to-one'. One of '{"http://java.sun.com/xml/ns/
 persistence/orm":many-to-many, "http://java.sun.com/xml/ns/
 persistence/orm":element-collection, "http://java.sun.com/xml/ns/
 persistence/orm":embedded, "http://java.sun.com/xml/ns/
 persistence/orm":transient}' is expected. 
```

* * *

代码：

## 错误：cvc-complex-type.3.2.2：属性“可为空”不允许出现在元素“基本”中。

代码：DATETIME 相关错误：在此行找到多个注释：- cvc-enumeration-valid：值 'DATETIME' 不是 facet- 相对于枚举 '[DATE, TIME, TIMESTAMP]' 有效。它必须是来自枚举的值。- cvc-type.3.1.3：元素“时间”的值“日期时间”无效。

更新：我发现它与 JPA 或 Hibernate 有关。不过不确定。所以模式是

```
xmlns="http://java.sun.com/xml/ns/persistence/orm"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm 
                    http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
version="2.0"> 
```

# asp.net-mvc - Is it possible to do something like if/else on DBContext to determine which Area in MVC to use?

> ID：10973530
> 
> 赞同：1
> 
> 时间：2012-06-11T00:42:43.020
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-areas

N00b here. I've been looking around for a bit on how I might accomplish this but have not had much luck, and am hoping for some code examples.

I am using a plugin architecture that is working pretty well. It "discovers" other assemblies (web projects) and then compiles them into the current website's "Areas". Here is the code I am using (for reference) [Click Here](http://blog.longle.net/2012/03/29/building-a-composite-mvc3-application-with-pluggable-areas/#comment-174).

For some of these plugins I am faced with a choice: I have 3 services that would use a plugin, but are unique in some way as to not make the plugin totally reusable. I could just create 3 spearate plugins and pull them into the 3 different main web apps. But then I thought to create an Area within the plugin and got it to work (in that the extra Area is picked up and put into the main website (so Area > Area). I felt the latter approach would work so I created 3 areas within the plugin, with common code being in the main part of the plugin, and each 3 areas having code/views specific to the 3 services.

Now, where I am stumped is in figuring out how I might be able determine which of the 3 services' areas to use when a user is on one of 3 separate websites I have. I can create 3 separate Main apps and pull in the plugins no problem. Each of the 3 websites will have it's own Database, so I started to think that if there was some way to determine which DBContext is being used from the main site then I could determine which of the 3 areas to use within the plugin.

I thought maybe that the main controller of the plugin could have some if/else logic, or some other class file in the root of the plugin could handle that. This is where I need help. Any examples would be much appreciated.

EDIT: Going to try and show the folder structure:

```
-Plugin1
    -...
    -Areas
        -One
            -Controllers, Views, etc.
        -Two
            -Controllers, Views, etc.
        -Three
            -Controllers, Views, etc.
    -Controllers
    -Views
         -...
-Website1
    -...
    -Areas 
        -Plugin1 <- hidden files in VS2010, created by plugin architecture
            -Areas (from Plugin1)
                -One
                -Two
                -Three
            -Views (from root of Plugin1)
    -Controllers, Views, etc. 
```

# java - 在 java 中使用 HashMap 的主要好处是什么？

> ID：10973539
> 
> 赞同：14
> 
> 时间：2012-06-11T00:44:31.460
> 
> 标签：java, dictionary, hashmap

在我正在查看的这个 Java 项目中，我不断看到带有 HashMap 的代码，就像这样

```
 /** imageID --> image map */
    Map<String,ImageIcon> imgs = new HashMap<String,ImageIcon>(); 
```

然后在课堂上：

```
// images 
loadImages();
actualImage = imgs.get(this.DEFAULT_IMAGE_ID);
JLabel label = new JLabel(actualImage); 
```

这段代码的目的是什么？我对这里的整个概念一头雾水。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T00:48:26.790

两者都提供对数据的键值访问。Hashtable 是 Java 中最原始的集合类之一。HashMap 是新集合框架的一部分，随 Java 2 v1.2 添加。

两者之间的主要区别在于，对 Hashtable 的访问是在表上同步的，而对 HashMap 的访问则不是。您可以添加它，但默认情况下它不存在。

另一个区别是 HashMap 中的迭代器是故障安全的，而 Hashtable 的枚举器则不是。如果您在迭代时更改地图，您就会知道。

而且，第三个区别是 HashMap 允许其中包含空值，而 Hashtable 不允许。

**回答您编辑的问题：**

```
/** imageID --> image map */
//imageID - String. imgs is a map of imageID and ImageIcon. imageID is key. ImageIcon is value.
    Map<String,ImageIcon> imgs = new HashMap<String,ImageIcon>(); 
```

然后在课堂上：

```
//SEE INLINE COMMENTS
// images 
//No definition provided. May be putting values into the imgs map.
loadImages();
//this.DEFAULT_IMAGE_ID is some imageID. imgs.get gets the value for that imageID, which
//is ImageIcon for that imageID. That is stored in actualImage variable.
actualImage = imgs.get(this.DEFAULT_IMAGE_ID);
//Creating a new JLabel with actualImage.
JLabel label = new JLabel(actualImage); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T01:20:31.823

在 java 中使用 HashMap 的主要好处是什么？应该是速度吧。此容器将其数据拆分为许多“桶”，这些“桶”仅包含具有相同键哈希码的元素。这样，当它需要找到一些键值对时，它不必遍历所有数据，而只需遍历键中哈希码与搜索键的哈希码相同的元素。

# actionscript-3 - Edit movie clip definition as3

> ID：10973540
> 
> 赞同：0
> 
> 时间：2012-06-11T00:44:33.890
> 
> 标签：actionscript-3, movieclip

I'm a bit new to as3, so forgive me if these are dumb questions. Two questions...

Premise: I'm loading a character from a swf file, and want to add avatar to it. I have him animated walking and also standing (stand_mc, walk_mc). I also have his body parts separated out, so inside each of the animations mc's is a head_mc, body_mc, etc etc.

First question, how can I access the body parts for any animation? here's my code so far:

```
 var WalkAnim:Class = SWFLoader.getClass('walk_mc'); //Using Greensock loader; but it's the same as using appDomain.getDefinition();
    var walkAnim:MovieClip = new WalkAnim();
    addChild(walkAnim); 
```

Second question, adding walkAnim just creates an instance of the mc definition. How can I edit the definition in the library to do something like..

```
 var Hat:Class = SWFLoader.getClass('accessory_hat_mc');
    var hat = new Hat();
    WalkAnim:addChild(Hat)//??? 
```

So that if I have multiple instances on stage, they'll all be updated. Thanks in advance for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:32:55.667

基本上，要访问子元素，您使用点语法。这看起来像这样（最后一行）：

```
var WalkAnim:Class = SWFLoader.getClass('walk_mc');
var walkAnim:WalkAnim = new WalkAnim(); // I have typed your var as WalkAnim, not MovieClip.
addChild(walkAnim);
walkAnim.head_mc.rotation += 5; 
```

要回答您的第二个问题，您将无法在运行时编辑定义。您可以向每个实例添加一个项目：

```
var Hat:Class = SWFLoader.getClass('accessory_hat_mc');
var myHat:Hat = new Hat();
walkAnim.head_mc.addChild(myHat); 
```

# python - 如何在python中使用整数运算将分数转换为浮点数？

> ID：10973542
> 
> 赞同：1
> 
> 时间：2012-06-11T00:44:57.510
> 
> 标签：python, integer-arithmetic

我需要做的是使用整数运算将分数转换为浮点数。所需的小数位数被指定为变量`DECIMALS`。每个分数都包含在一个整数元组中，例如`(1, 3)`. 第一项是分子，第二项是分母。元组包含在一个名为 的列表中`fractions`。

到目前为止，这是我的代码：

```
fractions = [(1,7), (2,3), (22,7), (7001,7), (9,3), (611951,611953), (1,11), (1,7689585)]

DECIMALS = 10**40 # 40 decimal places

for fraction in fractions:  
     x =  DECIMALS*fraction[0]/fraction[1]
     print x 
```

当我运行代码时，这就是我得到的：

```
1428571428571428571428571428571428571428
6666666666666666666666666666666666666666
31428571428571428571428571428571428571428   
10001428571428571428571428571428571428571428
30000000000000000000000000000000000000000
9999967317751526669531810449495304377950
909090909090909090909090909090909090909
1300460297922449651053990559958697 
```

问题是我需要将其格式化为正确的十进制格式。我尝试的是

```
print "0.%.40d" % (x) 
```

但当然，这只会帮助我处理前 2 位小数；其余的都是错误的。我想把它分开，这样我就可以单独计算分数，使它们更容易格式化，但我不知道该怎么做。问题是所有分数都需要由相同的代码处理。我也希望它被正确地四舍五入，但现在这没什么大不了的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:34:26.777

你的意思是这样的：

```
from fractions import Fraction
import decimal

decimal.getcontext().prec = 50

fractions = [(1,7), (2,3), (22,7), (7001,7), (9,3), (611951,611953), (1,11),(1,7689585)]

su=Fraction(0)
for i, t in enumerate(fractions,1):
    f=Fraction(*t)
    su+=Fraction(*t)
    d=decimal.Decimal(f.numerator) / decimal.Decimal(f.denominator)
    print '{} becomes {}'.format(t,f)
    print '\tfloat of that is: {}'.format(float(f))
    print '\tDecimal: {}'.format(d)
    print '\t{} elements cum sum of the list: {}\n'.format(i,su) 
```

印刷：

```
(1, 7) becomes 1/7
    float of that is: 0.142857142857
    Decimal: 0.14285714285714285714285714285714285714285714285714
    1 elements cum sum of the list: 1/7

(2, 3) becomes 2/3
    float of that is: 0.666666666667
    Decimal: 0.66666666666666666666666666666666666666666666666667
    2 elements cum sum of the list: 17/21

(22, 7) becomes 22/7
    float of that is: 3.14285714286
    Decimal: 3.1428571428571428571428571428571428571428571428571
    3 elements cum sum of the list: 83/21

(7001, 7) becomes 7001/7
    float of that is: 1000.14285714
    Decimal: 1000.1428571428571428571428571428571428571428571429
    4 elements cum sum of the list: 21086/21

(9, 3) becomes 3
    float of that is: 3.0
    Decimal: 3
    5 elements cum sum of the list: 21149/21

(611951, 611953) becomes 611951/611953
    float of that is: 0.999996731775
    Decimal: 0.99999673177515266695318104494953043779505942449829
    6 elements cum sum of the list: 12955044968/12851013

(1, 11) becomes 1/11
    float of that is: 0.0909090909091
    Decimal: 0.090909090909090909090909090909090909090909090909091
    7 elements cum sum of the list: 142518345661/141361143

(1, 7689585) becomes 1/7689585
    float of that is: 1.30046029792e-07
    Decimal: 1.3004602979224496510539905599586973809379829990825E-7
    8 elements cum sum of the list: 121767437017889092/120778724977295 
```

[分数](http://docs.python.org/library/fractions.html)模块允许您使用有理数（无需转换为浮点数）。一旦你把它们放到分数课上，你就可以用它们做算术（就像在小学里一样）

像这样：

```
>>> Fraction(1,3) + Fraction(3,4)
Fraction(13, 12)
>>> Fraction(1,3) + Fraction(1,6)
Fraction(1, 2)
>>> Fraction(1,2).numerator
1
>>> Fraction(1,2).denominator
2 
```

Fraction 模块是默认 Python 发行版的一部分（自 2.6 起）。

要将其转换为浮点数，`float(Fraction(17,18))`例如或在 Decimal 类变量中使用`Fraction.numerator`and`Fraction().denominator`进行任意精度转换。

像这样：

```
>>> decimal.Decimal(su.numerator) / decimal.Decimal(su.denominator)
Decimal('1008.186144047968368606384293') 
```

或者：

```
>>> float(su.numerator) / su.denominator
1008.1861440479684 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T01:34:58.840

首先避免使用浮点数。

```
>>> decimal.getcontext().prec = 50
>>> [str((decimal.Decimal(x) / decimal.Decimal(y)).quantize(decimal.Decimal(10) ** -40)) for (x, y) in FRACTIONS]
['0.1428571428571428571428571428571428571429', '0.6666666666666666666666666666666666666667', '3.1428571428571428571428571428571428571429', '1000.1428571428571428571428571428571428571429', '3.0000000000000000000000000000000000000000', '0.9999967317751526669531810449495304377951', '0.0909090909090909090909090909090909090909', '1.300460297922449651053990559958697E-7'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:57:14.873

如果它严格格式化，正如您的问题所暗示的那样，您当然可以单独使用整数和字符串来执行此操作：

```
def intF(n, d, l=40):
    s=str(n*10**l / d)
    if len(s) < l:
        return '0.{:0>{width}}'.format(s,width=l)
    if len(s) > l:
        return s[0:len(s)-l]+'.'+s[len(s)-l:] 

    return '0.'+s

for f in [(1,7), (2,3), (22,7), (7001,7), (9,3), 
          (611951,611953), (1,11),(1,7689585)]:
    print intF(*f)
    print float(f[0]) / f[1]
    print 
```

输出：

```
0.1428571428571428571428571428571428571428
0.142857142857

0.6666666666666666666666666666666666666666
0.666666666667

3.1428571428571428571428571428571428571428
3.14285714286

1000.1428571428571428571428571428571428571428
1000.14285714

3.0000000000000000000000000000000000000000
3.0

0.9999967317751526669531810449495304377950
0.999996731775

0.0909090909090909090909090909090909090909
0.0909090909091

0.0000001300460297922449651053990559958697
1.30046029792e-07 
```

最后一位数字不会正确四舍五入，也不会正确处理边缘情况（'inf'、'NaN'、除以零等）。

我想在紧要关头工作。

为什么不使用随附的电池，例如 Decimal 或 Fraction？

# python - Django - 表单验证未显示

> ID：10973545
> 
> 赞同：0
> 
> 时间：2012-06-11T00:46:39.623
> 
> 标签：python, django, django-forms

我有一个注册页面，其中包含以下代码：

在意见中：

```
def register_step2(request, value):
context={"type": value}
if request.method == 'POST':
    form = RegisterForm(request.POST)
    if form.is_valid():
        nric = form.cleaned_data['nric']
        name = form.cleaned_data['name']
        password = form.cleaned_data['password']
        email = form.cleaned_data['email']
        phonenumber = form.cleaned_data['phonenumber']
        dob = form.cleaned_data['dob']
        User.objects.create_user(nric, email, password)
        return HttpResponseRedirect('/')
return render_to_response('register.html', context, RequestContext(request)) 
```

在 register.html 中：

```
{% extends "base.html" %}
{% block subheader %}
{% if type == '0' %}
Are you..
{% endif %}
{% if type == '1' %}
Registration - Able Elder
{% endif %}
{% if type == '2' %}
Registration - Public
{% endif %}
{% endblock %}

{% block content %}
{% if type == '0' %}
<a href="/register/1">an elderly looking for something to do?</a>
<a href="/register/2">the public looking for someone to help you?</a>
{% else %}
<form action="/register/{{type}}/" method="post">{% csrf_token %}
<table class="center">
{% for field in able_form %}
<tr>
    <td>
        {{ field.label_tag }}: 
    </td>
    <td>
    {{ field.errors }}
    {{ field }}
    </td>
</tr>
{% endfor %}
<tr>
<td>
{{ able_form.non_field_errors }} 
</td>
</tr>
<tr>
<td colspan="2">
By clicking on "register" I agree with the terms and conditions.
</td>
</tr>
<tr>
<td colspan="2">
<input type="submit" value="register">
</form>
</td>
{% endif %}
{% endblock %} 
```

在 context_processors.py 中（在 settings.py 中正确设置）

```
from forms import RegisterForm

def able_form(request):
    return {
            'able_form' : RegisterForm()} 
```

在forms.py

```
class RegisterForm(forms.Form):
    nric = forms.CharField(max_length=NAME_MAX)
    name = forms.CharField(max_length=NAME_MAX)
    password = forms.CharField(widget=forms.PasswordInput)
    confirm_password = forms.CharField(widget=forms.PasswordInput)
    email = forms.EmailField()
    postal_code = forms.IntegerField()
    phone_number = forms.IntegerField()
    date_of_birth = forms.DateField(widget=forms.DateInput) 
```

据我了解，变量字段将显示字段错误，但是当我单击注册按钮时没有显示任何内容。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:10:15.840

随着您的更新，原因很明显：

您只是将一个空白表单传递给您的模板。

您在哪里假设带有`request.POST`数据的绑定表单返回到您的模板？创建一个新的实例`RegisterForm(request.POST)`不会神奇地改变模板中的表单实例（由上下文处理器返回）。

您的模板只会看到`RegisterForm()`- 如果要知道表单错误，它必须具有与 request.POST 数据绑定的表单。

```
 form = RegisterForm(request.POST)
    if form.is_valid():
       ....
    context['able_form'] = form # you must pass back the bound form if you want to see errors.
return render_to_response('register.html', context, RequestContext(request)) 
```

即使那样，您的上下文处理器也可能会覆盖此`able_form`键 - 我会完全删除上下文处理器。

如果您认为拥有它是一个好主意，那么您必须记住在那里或在您的视图中执行您的表单逻辑。

# javascript - 表达式 '$.mobile' [undefined] 的结果不是对象

> ID：10973546
> 
> 赞同：0
> 
> 时间：2012-06-11T00:46:40.233
> 
> 标签：javascript, html, jquery-mobile, cordova, local-storage

我是 jquery mobile 的新手，我使用 jquery mobile 和 phoneGap 以及 localstorage Html 开发了一个移动应用程序，我想在 page.html 中保存一个输入值，然后我将使用 localstorage.getitem 检索这个值并在 URL 中使用, 我的问题当我添加这条线时 `value=localStorage.getItem('myStorage');`我无法连接到我的应用程序并且我收到了这个错误：

> 表达式 '$.mobile' [undefined] 的结果不是对象。在文件：///android_asset/www/js/application.js:258

这是我保存输入值 application.js 的应用程序

```
function setMessage() {
    var firstName=document.getElementById('addresseip');
    alert("Hello " + firstName.value + ", hope you like JavaScript functions!")

                    localStorage.setItem('myStorage', firstName.value);

} 
```

这是我在同一页面 .js 中对这个值的调用，输入值是 param.html，对这个值的调用在 index.html 中：

```
function showUser(){
 value=localStorage.getItem('myStorage');
val1 = document.getElementById("name").value;
val2 = document.getElementById("pass").value;

if (val1=="")
  {
   showdialog("Verifiez login et mot de passe","Erreur");
  } 
  else{
     alert("test"+value);    
  $.mobile.showPageLoadingMsg();    
   var geturl;
  geturl = $.ajax({  

   url:"https://"+value+":80/B/authenticate",  
   //url:"https://10.0.2.2:80/B/authenticate",  
   dataType:"json",
   timeout:10000000,  
   cache:false,
   type:'GET',
   beforeSend : function(req) {
             req.setRequestHeader('Authorization', 
                   make_base_auth (val1, val2));
        },
   error:function(XMLHttpRequest,textStatus, errorThrown) { 
   $.mobile.hidePageLoadingMsg();
   showdialog("Verifiez login et mot de passe","Erreur"); 
   },   
   success:function(results) { 
   if(results==true){

    $.mobile.changePage("bienvenu.html","fade");
    $.mobile.hidePageLoadingMsg();  
   } 
```

我的错误是一行 $.mobile.showPageLoadingMsg();

你能帮我吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:46:27.043

既然`$.mobile`是`undefined`，我猜jquery移动库没有加载。在调用之前检查您是否已加载 jquery 和 jquery mobile `showUser()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:04:09.367

除了加载 jQuery，您还应该包括 jQM。还要确保在它之后包含使用 jQM 的代码。

```
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script src="yourscripts.js"></script> 
```

或者

```
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script>
    /* Your code here */
</script> 
```

# php - PHP time() 函数和 MySQL 字段

> ID：10973547
> 
> 赞同：0
> 
> 时间：2012-06-11T00:47:04.490
> 
> 标签：php, date, time

如果我使用 PHP 的 Time() 函数并且在 MySQL 中有 4 个字段 DATE、DATETIME、TIMESTAMP 和 TIME，我应该使用哪一个？

在 PHP 中，我使用 Time() 来记录日期和时间，例如 2012 年 5 月 10 日，时间用于计算经过的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:52:53.927

使用你需要的东西：

日期：仅商店日期前：2012-06-11

DATETIME：存储日期和时间例如：2012-06-11 12:49:31

TIMESTAMP：存储日期和时间例如：2012-06-11 12:49:31 MySQL 具有将此字段设置为当前时间戳的功能，当行中有更新时。也许（现在不知道）可以用数字指定。其他必须指定'yyyy-mm-d hh:mm:ss'

将 DB 值转换为 PHP 的时间使用 strtotime()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:53:34.013

我建议您改用[MySQL 数据和时间](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)函数。如果您需要存储当前时间，请使用 NOW()。它是 DATETIME 类型。或者，您可以使用 Unix Timestamp 将其存储为 INT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:36:56.970

Unix 时间戳是时间/日期的最基本形式——“原始格式”，如果您愿意的话。一旦你有了时间戳，你就可以得到你想要的任何其他格式。就我个人而言，我没有看到存储 DATE 或 DATETIME 的意义，只是在您再次检索数据时将其转换为时间戳，如果您想以任何可读格式显示日期/时间，您当然需要这样做（见[`date()`](http://php.net/manual/en/function.date.php)功能）。

MySQL 有一个字段 time 存储创建记录时的当前时间戳。或者，如果您想要更大的灵活性，PHP 的`time()`函数会返回当前时间戳。PHP 还具有计算某个时间点的时间戳的功能（例如，如果您想以 dd/mm/yyyy 格式指定日期）。

所以总而言之，我会一直使用时间戳，我建议你也这样做，除非你有非常特殊的需求。

# javascript - Confused! Trying to MP3 metadata in EZiest way possible, Preferably without extra libs

> ID：10973549
> 
> 赞同：1
> 
> 时间：2012-06-11T00:48:12.697
> 
> 标签：javascript, jquery, html, jquery-ui

I've searched all over google, here, HTML5Rocks, etc... Everywhere I look I get "half" an answer or told to use some other lengthy lib that doesn't even work with what i'm trying to do.

I've made a full jQueryUI plug for making a simple audio player, the last step is filling the playlist from an option like:

```
playlist: [
    '<?= base_url("audio/samp/Kalimba.mp3"); ?>',
    '<?= base_url("audio/samp/Maid_with_the_Flaxen_Hair.mp3"); ?>',
    '<?= base_url("audio/samp/Sleep_Away.mp3"); ?>'
] 
```

Where in the plugin I have something like:

```
for (x in ele.playlist) { 
    //  get meta data for song title, artist, album, & length 
    //  so I can add it to button inside li
    //  example: in a callback where param for AudioContext is audon
    //  audcon.button() // call to saved jQuery object of list item button
    //      .prepend($("<p /">).text(dataReturned.songTitle))  //  add element to button with text of song title
} 
```

Of course, i've found part of the issue is, this for loop runs faster than the time it takes to read a file, which I should think is no problem as long as I can use a call back. For example, using HTML5, I add the button html as a property to my AudioContext, so that when it finishes reading, I can easily access the li button that duration belongs on.

Can anyone give a simple, clear cut example of how to achieve what I want, cause none of what i've tried is getting me anywhere.

I have found pretty ez how to use HTML5 to get the duration of each song and use a callback to put the duration in each button after its loaded, but the duration doesn't really tell a user much about the song loaded other than how long it is, lol.

# image - Display image on website depending on combination of multiple radio groups

> ID：10973552
> 
> 赞同：1
> 
> 时间：2012-06-11T00:48:25.510
> 
> 标签：image, radio-button, radio-group

Imagine a webshop where you can buy custom clothes. The user is asked to choose two kinds of colors for his new t-shirt: primary and secondary color. This is done by 2 radiogroups. Depending on the colors the user chooses, an image will be shown, showing the shirt in the selected colors.

My problem is pretty similar, so I will describe it a little bit more abstractly:

I have 2 radiogroups, with 4 radio buttons each on my website:

```
group 1: A B C D, 
group 2: A B C D 
```

Now i want to display an image on my website, depending on the combination of those two groups.

i.e.: user selects A from group 1 and B from group 2 --> display image1

i.e.: user slects A from group 1 and A from group B --> display image2

i.e.: user selects B from group 1 and nothing from group B --> display image3

and so forth...

```
Primary color:
<label><input type="radio" name="Color1" value="red" id="Color1_0" />Red</label>
<label><input type="radio" name="Color1" value="green" id="Color1_1" />Green</label>
<label><input type="radio" name="Color1" value="blue" id="Color1_2" />Blue</label>
<label><input type="radio" name="Color1" value="champagne" id="Color1_3" />Champagne</label>

Secondary color:
<label><input type="radio" name="Color2" value="red" id="Color2_0" />Red</label>
<label><input type="radio" name="Color2" value="blue" id="Color2_1" />Blue</label>
<label><input type="radio" name="Color2" value="purple" id="Color2_2" />Purple</label>
<label><input type="radio" name="Color2" value="champagne" id="Color2_3" />Champagne</label>

<img id="customimage" src="images/image1.jpg" /> 
```

Any ideas on how to do this?! After three days of thinking and Google-research, I've got nothing so far :( Maybe an Java array will be needed?? I'm open for suggestions :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:51:35.530

You can use jQuery (or a similar framework) to get an event in JavaScript every time the radio button selections are changed, and update the image tag (again using e.g. jQuery) with the URL of the newly selected image.

[Changing the image source using jQuery](https://stackoverflow.com/questions/554273/changing-the-image-source-using-jquery)

I would standardize on the names of the images (if you have that level of control) so that you can form the image name based just on the selected radio buttons (e.g. Shirts-Red-Large.jpg), otherwise you can lookup the appropriate image URL using an [Ajax query](http://api.jquery.com/jQuery.ajax/).

# ipc - Vbscipt error while creating a named pipe

> ID：10973565
> 
> 赞同：1
> 
> 时间：2012-06-11T00:50:02.433
> 
> 标签：ipc, pipe

I am new to vbscript as well as to named pipes.

This is my code:

```
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.CreateTextFile("\\.\pipe\tstpipe")
a.WriteLine("This is a test.")
msgbox "hello"
a.Close 
```

Error "File not found ,line 2" Its not recognizing folder "pipe" as I have not created any folder with name pipe.But I think there should be a default folder with the name pipe. Am i correct? Am i missing any configuration for pipe?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:49:05.180

CreateTextFile("\.\pipe\tstpipe", true);

# ios - 出于出口合规目的（例如在 App Store 中），什么构成“加密”？

> ID：10973567
> 
> 赞同：19
> 
> 时间：2012-06-11T00:50:52.870
> 
> 标签：ios, encryption, export

向 iOS App Store 提交应用程序时，需要声明该应用程序是否“包含加密”（据我了解，还需要通过额外的管理障碍）。

有谁知道在这种情况下“加密”一词究竟涵盖了什么？

他们指的是：

*   特别是**加密安全**的加密方案（AES、RSA 等）；
*   或者，在日常用语中可能被称为“加密”的**任何方案或方法，还是加密弱的标准方案的变体？**

具体来说，我打算使用一些弱方案来保护应用程序的某些资产免受临时黑客的攻击，例如，通过对文件中的数据与从（非加密）随机数生成器生成的一串字节进行异或运算。如果你愿意，它会是一个“一次性密码”，但密钥实际上并不是加密随机的：只是足够随机，以至于想要窃取数据的人需要付出一些努力，而不仅仅是“复制”文件中的数据'。

那么，就声明的目的而言，这是否算作使用“加密”，即使它实际上不是一种加密安全的加密形式？我正在做的是足够普遍的做法，我猜其他开发人员已经使用这样的程序提交了应用程序：您是否必须将应用程序声明为使用加密？

（例如，iTunes 连接指南没有就此事提供任何进一步的说明。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T03:45:18.683

此[流程图](https://www.bis.doc.gov/index.php/forms-documents/encryption/327-flowchart-1/file)可能会帮助您走上正轨。它表示如果加密仅限于版权保护/知识产权，则免于审查。我从 BIS 主页上看到了这个流程图。该页面由题为“ iTunes Connect 中*App Store 的全球贸易合规性”*的常见问题解答引用，其中声明您可以申请豁免：

> (i) 如果您根据 BIS 提供的指南确定您的应用不属于 EAR 第 2 部分第 5 类

希望这有助于澄清一些事情。

**编辑**另一个有趣的部分是，如果出现以下情况，您可以申请豁免：

> (iii) your app uses, accesses, implements or incorporates encryption with key lengths not exceeding 56 bits symmetric, 512 bits asymmetric and/or 112 bit elliptic curve

# javascript - 有没有办法直接在 Angularjs 中与控制器和范围进行交互？

> ID：10973568
> 
> 赞同：5
> 
> 时间：2012-06-11T00:51:00.343
> 
> 标签：javascript, angularjs

我已经定义了一个控制器，并且范围中有一些变量。我可以知道是否有办法直接为控制器外部的范围变量赋值（而不是 by `ng-model`）？`<script>`另外，我可以直接在网页元素的某处调用控制器的功能（而不是使用`ng-click`）吗？

谢谢！

干杯，克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T09:17:29.290

angular 中的控制器定义实际上是一个类而不是一个对象。在 HTML 中引用控制器的每个位置，在编译阶段，angular 都会使用定义的控制器类创建一个新的控制器对象。因此，您可以使用相同的控制器类引用多个范围。

始终存在与控制器关联的范围，并且所有变量都绑定到该范围。您可以通过调用类似的东西来访问特定 html 元素的范围

```
var scope = angular.element("#myelement").scope();
//use the scope.... 
```

如果您让我们知道您为什么要尝试从控制器外部访问范围，那也很好。

**更新**

这是引导选项卡组件...您可以将其用作

```
<tab>
<pane title="tab1"><pane>
<pane title="tab2"></pane>
</tabs> 
```

[这与http://angularjs.org/](http://angularjs.org/)主页上存在的相同。我刚刚将其更新为在选项卡更改时广播事件。

```
var directives = angular.module('myApp.directives', []);
directives.directive('tabs', function () {
    return {
        restrict:'E',
        transclude:true,
        scope:{},
        controller:function ($scope, $element, $rootScope) {
            var panes = $scope.panes = [];

            $scope.select = function (pane) {
                angular.forEach(panes, function (pane) {
                    pane.selected = false;
                });
                pane.selected = true;
                $rootScope.$broadcast("tabChanged", pane.title);
            }

            this.addPane = function (pane) {
                if (panes.length == 0) $scope.select(pane);
                panes.push(pane);
            }
        },
        template:'<div class="tabbable">' +
            '<ul class="nav nav-tabs">' +
            '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">' +
            '<a href="" ng-click="select(pane)">{{pane.title}}</a>' +
            '</li>' +
            '</ul>' +
            '<div class="tab-content" ng-transclude></div>' +
            '</div>',
        replace:true
    };
});
directives.directive('pane', function () {
    return {
        require:'^tabs',
        restrict:'E',
        transclude:true,
        scope:{ title:'bind' },
        link:function (scope, element, attrs, tabsCtrl) {
            tabsCtrl.addPane(scope);
        },
        template:'<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
            '</div>',
        replace:true
    };
}); 
```

此选项卡更改时会调度事件。

# javascript - Parallax - 让文本以 1/10 的速度滚动

> ID：10973570
> 
> 赞同：5
> 
> 时间：2012-06-11T00:51:25.310
> 
> 标签：javascript, jquery, html, css, parallax

我试图让文本以与其父 div 相同的速度滚动（以 1/10 的速度滚动）。目前，它以正常速度滚动。我做错了什么？

HTML：

```
<div id="blank" class="page">
  <p>blah blah blah</p>
</div> 
```

CSS：

```
body { background:url(images/background.gif); }
.page {  overflow: auto; width: 580px; color: white; }
#blank { background: url(images/02.jpg) 50% 0 no-repeat fixed; height: 2300px;} 
```

JS：

```
$('#blank').parallax("50%", 0, 0.1, true);
$('#blank p').parallax("50%", 0, 0.1, true); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T02:35:39.390

我也从未使用过该插件。无需插件即可轻松完成。

```
$(document).ready(function(){     
    $(document).scroll(function(){
        var topDist = $(document).scrollTop();
        $('#blank').css('margin-top', (topDist/10)*9);      
    });
});​ 
```

使用滚动顶部将为您提供滚动的距离，然后您可以将其添加到边距、顶部位置、左侧位置、bg 位置等。希望这会有所帮助

[http://jsfiddle.net/PHHrF/1/](http://jsfiddle.net/PHHrF/1/)

# android - Structuring Category List with MySQL on Android

> ID：10973572
> 
> 赞同：1
> 
> 时间：2012-06-11T00:51:48.393
> 
> 标签：android, mysql, structure

I'm having a little difficulty structuring a few screens for an app I'm working on and I'm looking for a little insight if possible.

Basically what I'm trying to do is have a list of "categories" in my app. And this is thr structure I would like it to follow. Mainscreen -> categories -> items within selected category -> specific item

Now, in my mysql database I made a column named "category" and in the column I would type the name of the categories the item would be under. In the app, I would like the screen to show all of the different categories that show up in the database, and if someone selected the category from the list, it would show all items under that category.

I'm not sure if a column VARCHAR is the way to structure the database for categories, if this doesn't make any sense I'll try to explain further. Thanks for the info.

# mysql - MySQL 查询的最大 CPU 使用率和 >60 秒执行

> ID：10973573
> 
> 赞同：2
> 
> 时间：2012-06-11T00:52:00.050
> 
> 标签：mysql, sql, linux, left-join, cpu-usage

当我第一次做这个查询并且表相对较小时，它运行得非常快，但随着时间的推移，随着更新表大小的增加（现在大约 6000 行），查询变得非常缓慢并且资源密集。我使用的服务器是来自 linode.com 的 1GB RAM VPS，实际上我没有等待足够长的时间来完成查询。

有趣的是，如果没有左连接中的额外条件 (SELECT MAX(u2.time))，它的运行时间 < 0.5 秒。

我在查询运行时查看了 mySQL 的进程列表，它一直显示为“正在发送数据”

这是查询：

```
SELECT 
  s.ID as sid, s.country AS country, 
  s.name AS name, s.ip AS ip, 
  u.connPlayers AS cp, u.maxPlayers AS mp
FROM servers AS s 

LEFT JOIN updates AS u 
  ON u.serverID = s.ID 
  AND u.time = 
      (SELECT MAX(u2.time) 
         FROM updates AS u2 
         WHERE u2.serverID = s.ID) 
ORDER BY RAND(MINUTE(NOW())) 
LIMIT 0,10 
```

这是 my.cnf 文件：[http ://redream.co.nz/my.cnf](http://redream.co.nz/my.cnf)

表结构：

**服务器表（20 行）**

```
Field   Type
ID      int(10) Unique Key           
ip      varchar(200)                 
country varchar(2)               
name    varchar(600)             
motd    varchar(600)                 
desc    mediumtext               
version varchar(600) 
```

**更新表（6000 行）**

```
Field       Type
serverID    int(10)              
ping        int(10)              
time        int(14)              
uptime      int(10)              
connPlayers int(10)              
maxPlayers  int(10)              
uptime      int(14) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:00:19.087

子查询`Select MAX(...`正在为 的~~叉积`updates`和`servers`~~叉积的每一行运行`servers`，`updates`然后`updates`再次运行。MySQL 的优化器不是很复杂。

更新：我的 SQL 有点生疏，但你可以尝试这样的事情：

```
SELECT
  /* blah */
FROM
  servrs s
LEFT JOIN
  updates u
ON
  u.serverID = s.ID
GROUP BY s.serverID
HAVING MAX(u.time) 
```

我手边没有 MySQL 实例，因此您可能需要稍微调整一下才能使其正常工作。

Update2：仔细看代码后，我觉得这个查询的成本比我原来的估计要大。更新了这个答案的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:55:04.533

对于在您描述的平台上运行的 MySQL，6000 行是很小的。

我要检查的第一件事是您的 my.ini 文件。您是否使用了一种开箱即用的文件（现代服务器的配置不足）？如果是这种情况，最初的答案是编辑 my.ini 为 MySQL 分配合理数量的内存。

如果您需要这方面的帮助，请发布您的 my.ini 文件（减去任何密码），因为那里有许多可能导致这种类型的性能下降的事情。

此外，当查询运行得更快时（当行`updates`数少得多时），与当时的行数相比，您的查询将返回多少行`updates`？

目前有多少行`servers`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T01:38:32.143

我不是 MySQL 专家，但我认为这适用于 MySQL：

```
SELECT 
  s.ID as sid, s.country AS country, 
  s.name AS name, s.ip AS ip, 
  u.connPlayers AS cp, u.maxPlayers AS mp
FROM servers AS s 

LEFT JOIN (
    SELECT u.serverId, u.connPlayers, u.maxPlayers
    FROM updates u
    INNER JOIN (SELECT serverId, max(time) AS 'maxTime' FROM updates GROUP BY serverId) AS u2
        ON u.serverId = u2.serverId AND u.time = u2.maxTime 
) AS u ON u.serverID = s.ID 

ORDER BY RAND(MINUTE(NOW())) 
LIMIT 0,10 
```

重要的变化是左连接现在包含以下子查询：

```
SELECT u.serverId, u.connPlayers, u.maxPlayers
FROM updates u
INNER JOIN (SELECT serverId, max(time) AS 'maxTime' FROM updates GROUP BY serverId) AS u2
    ON u.serverId = u2.serverId AND u.time = u2.maxTime 
```

此子查询再次包含一个子查询，并为每个 serverId 返回具有最大时间值的行。上面的子查询只执行一次，而不是交叉积中的每一行。

# webcam - Microsoft LifeCam Studio capable of preview and capture of a picture separately?

> ID：10973574
> 
> 赞同：0
> 
> 时间：2012-06-11T00:52:12.617
> 
> 标签：webcam, resolution, preview, snapshot

I currently have an application that can show a video preview stream and take a picture from that stream. The problem is the app needs to run on low end machines (ie. nettops), and when the video preview stream is set to a high resoultion, it kills the framerates. So my questions are:

1.  Can the Lifecam preview the stream at a low resolution, but snap pictures at a higher resolution (via the Preview pin?)?
2.  By doing so, will it actually increase performance? The preview should run buttery smooth (30fps) at 320x240 but take snapshots at 1080p.
3.  How will all the auto adjustments be affected by this? Will the auto adjustments apply when the snapshot is taken?
4.  Will there be a significant lag when taking the picture?

I'm not too familiar with DirectShow and the 3rd party control i'm using doesn't seem to support this mode. After some reading, i can't tell definitively whether or not the LifeCam Studio is capable of this. Testing with the AForge Snapshot Maker, it wasn't able to set snapshot resolution, which suggests that the Lifecam isn't capable of this. But of course, it could just be a problem with the software. I just need to know of the Lifecams capablilities before investing the time to implement the functionality. I figured someone already went through the trouble of figuring this out and would like to share their findings. Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:21:53.470

大多数或所有设备不允许在 DirectShow 中使用不同的分辨率进行捕获和预览。请参阅[我们可以为同一 DirectShow 图形的预览和捕获提供不同的分辨率吗？](https://stackoverflow.com/questions/10717662/can-we-have-different-resolutions-for-preview-and-capture-of-the-same-directshow)进行类似的讨论。

我相信 Microsoft LifeCam Studio 可以捕获高分辨率 JPEG，因此在技术上可以将其以压缩形式从管道中取出而无需性能开销并解压缩为子采样图像（IJG 代码提供此选项）。这将是性能友好的。

# javascript - How to make the source(path) of MathJax.js environment dependent?

> ID：10973576
> 
> 赞同：2
> 
> 时间：2012-06-11T00:52:32.550
> 
> 标签：javascript, mathjax

How do I specify the following requirement in my html?

When the computer has access to Internet, the source of MathJax.js is [https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js](https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js);

When it is offline, and the system is Linux, the source is `/MathJax/MathJax.js`; if the system is Windows, it is `/C:/MathJax/MathJax.js`. (It would be even better if I can use environment variable in the local path.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:27:57.673

您可以将 MathJax 放在相对于静态 HTML 文件的位置：

```
<script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js"></script>
<script>
if( !window.MathJax ) {
    document.write(
        '<script type="text\/javascript" src="../lib/MathJax.js"><\/script>'
    );
}
</script> 
```

这样您的实现就独立于操作系统。

另一种选择是根据您的浏览器 URL 设置位置：

```
<script>
var url= location.protocol == 'http:'? 
         "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js" :
         "../lib/MathJax.js";
document.write(
    '<script type="text\/javascript" src="' + url + '"><\/script>'
);
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:08:56.583

这些其他页面可能会为您提供一些解决方案的新方法。

第一个演示如何将 url 列表链接在一起，如果前一个脚本失败，则继续尝试加载下一个脚本。

[从服务器序列故障转移加载.js？](https://stackoverflow.com/questions/7448449/failover-loading-of-js-from-sequence-of-servers)

您需要将围绕 Windows 与 Linux 的逻辑添加到其中。

以下是关于检测网页是否离线运行的一些想法： [检测互联网连接是否离线？](https://stackoverflow.com/questions/189430/javascript-how-to-detect-that-the-internet-connection-is-offline)

如果您可以提供有关您的应用程序的更多信息，我可能会提出一些更好的建议。这是用户在本地计算机上安装的应用程序吗？这些 JS 文件是如何进入人们的 C:\ 的？安装应用程序时安装了什么？它是如何运行的？是否也安装了本地服务器？还是 html 页面只是从 Web 浏览器中的文件系统运行？

# c++ - What is the `uIdSubclass` in the third `SetWindowSubclass` Parameter?

> ID：10973578
> 
> 赞同：5
> 
> 时间：2012-06-11T00:53:11.193
> 
> 标签：c++, winapi

According to: [http://msdn.microsoft.com/en-us/library/windows/desktop/bb762102(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762102(v=vs.85).aspx)

the SetWindowSubclass prototype is:

```
BOOL SetWindowSubclass(
   __in  HWND hWnd,
   __in  SUBCLASSPROC pfnSubclass,
   __in  UINT_PTR uIdSubclass,
   __in  DWORD_PTR dwRefData
); 
```

Ok, I understand `hWnd`, `pfnSubclass`, and `dwRefData`.

What I can not find good information on is, what do I set `uIdSubclass` to?

MSDN says:

> The subclass ID. This ID together with the subclass procedure uniquely identify a subclass. To remove a subclass, pass the subclass procedure and this value to the RemoveWindowSubclass function. This value is passed to the subclass procedure in the uIdSubclass parameter.

Ok, understood, but still, where do I get this ID? Is it something I create or do I get it someplace? If it something I create, what should it look like?

I am doing this in C++ and Win32 API, nothing else.

Thanks.

# android - 在 ActionBar 选项卡中使用 Fragments 来拥有小部件

> ID：10973580
> 
> 赞同：1
> 
> 时间：2012-06-11T00:53:48.670
> 
> 标签：android, android-widget, android-fragments, android-actionbar, android-tabs

我制作了一个程序，它使用[FragmentTabs](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentTabs.html)来实现`ActionBar` `Tabs`.

我想知道如何将小部件添加到膨胀`Fragments`的`Tabs`. 它比正常情况更复杂，因为片段只返回一个`onCreateView`到`TabListener`，那么我将如何添加功能性小部件？我不需要具体的代码，只需要逻辑！

`Fragment`这是单击 a时`inflated`的示例`Tab`（在其中我需要小部件）：

```
public class IdFragment extends Fragment{       
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.id_layout, container, false);
    }
} 
```

# php - “未选择数据库”...但仅在函数中

> ID：10973583
> 
> 赞同：-2
> 
> 时间：2012-06-11T00:54:17.673
> 
> 标签：php, mysql, database

好的，所以我现在遇到了最奇怪的问题。我的代码很好！它完全按照我的意愿和期望运行，这对我来说是一个巨大的冲击，因为每次我去做 MySQL 时，我都会遇到无穷无尽的问题，而我永远找不到解决方案。

但是今天，一切都很完美。所以有什么问题？问题是当我尝试将我的代码包装在一个函数中时，它只是......停止工作！在每一步之后我都会进行错误检查，并且在它自己的文件和行中工作正常。但是我需要把它放在一个函数中，这样我就可以添加参数（因此是“extraQuery”变量），然后“返回”它，这样我就可以从一个单独的文件中访问它。

这是我的基本代码：

```
$link = mysql_connect($db_host, $db_user, $db_pass) or die ("Unable to connect: " . mysql_error());
mysql_select_db($db_name, $link) or die("Couldn't connect to database: " . mysql_error());

$extraQuery = "";
$result = mysql_query("SELECT * FROM things " . $extraQuery . " ORDER BY RAND() LIMIT 1", $link);

$row = mysql_fetch_array($result, MYSQL_ASSOC);
mysql_close($link);
echo($row['content']); 
```

正如我所说，它完全可以正常工作。但是当我这样做时......

```
function getResult(){
    $link = mysql_connect($db_host, $db_user, $db_pass) or die ("Unable to connect: " . mysql_error());
    mysql_select_db($db_name, $link) or die("Couldn't connect to database: " . mysql_error());

    $extraQuery = "";
    $result = mysql_query("SELECT * FROM things " . $extraQuery . " ORDER BY RAND() LIMIT 1", $link);

    $row = mysql_fetch_array($result, MYSQL_ASSOC);
    mysql_close($link);
    echo($row['content']);
}
getResult(); 
```

..它在第二行停止工作，告诉我“未选择数据库”。但是正如您所看到的，我明确选择了一个确实存在的数据库，并且当它不在函数中时可以正常工作。只是为了强调这一点，这不是我的用户权限，也不是数据库的名称；因为它在函数之外可以完美运行。

任何可能的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:01:24.740

由于[变量范围](http://php.net/manual/en/language.variables.scope.php)，您的数据库变量在函数内部不可用。您需要将其作为参数传递`getResult()`才能访问它：

```
function getResult($db_host, $db_user, $db_pass, $db_name, $extraQuery){
    $link = mysql_connect($db_host, $db_user, $db_pass) or die ("Unable to connect: " . mysql_error());
    mysql_select_db($db_name, $link) or die("Couldn't connect to database: " . mysql_error());

    $extraQuery = "";
    $result = mysql_query("SELECT * FROM things " . $extraQuery . " ORDER BY RAND() LIMIT 1", $link);

    $row = mysql_fetch_array($result, MYSQL_ASSOC);
    mysql_close($link);
    echo($row['content']);
}
getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:59:31.850

变量 $db_host,..., $db_name 在那里是因为你想隐藏你的访问权限，或者函数与这里写的完全一样？

如果确实如此，您可能需要将这些变量声明为全局变量（函数的第一行：）`global $db_host,..., $db_name;`，否则它们在函数中的值未初始化。

注意：使用它并不好。想想你的代码可以避免这种情况，并建议至少使用 MySQLi 或 PDO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T01:00:04.033

看起来访问数据库的变量不在函数的范围内。

您需要执行以下操作：

```
function getResult( $db_host, $db_user, $db_pass, $db_name) 
```

然后调用函数：

```
getResult( $db_host, $db_user, $db_pass, $db_name); 
```

或者将所有这些变量声明为`global`变量，如下所示：

```
global $db_host, $db_user, $db_pass, $db_name; 
```

这确保它们在函数的范围内。否则，它们都是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T01:01:25.780

您需要将 $db_host、$db_name 等声明为全局，或者将它们传递给函数，就像这样。

```
function getResult($db_host, $db_user, $db_pass){
//
}

getResult('localhost', 'user', 'pass'); 
```

# iphone - 从堆栈释放视图，带有导航控制器的标签栏

> ID：10973584
> 
> 赞同：1
> 
> 时间：2012-06-11T00:54:53.807
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, uitableview

因此，我正在对应用商店中的应用进行重要更新。我有一个带有标签栏和导航控制器的应用程序。当用户从列表中选择一个项目时，它会将它从我的服务器发送的 xml 文件中获取的链接发送到仅是 Web 视图的详细视图控制器。我遇到的问题是当用户返回到作为该选项卡的根视图的 tableview 时，详细视图没有被释放。当您在应用程序中选择其他选项时，详细视图不会更改。不是我的数据没有从 uishared 应用程序数据中释放，而是视图没有释放。我知道这里有很多类似的东西，我都试过了。我会给你一些我的代码，并非常感谢其他提示和技巧。我 15 岁，刚刚进入开发阶段，所以任何信息都有帮助。这是我认为任何人都需要帮助的代码。

表视图控制器

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];

    // clean up the link - get rid of spaces, returns, and tabs...
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@" " withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"  " withString:@""];

    videoDetailViewController.title = @"Videos";

    ExampleAppDataObject* theDataObject = [self theAppDataObject];
    theDataObject.videoData = storyLink;

    if (self.videoDetailViewController == nil)
    {
        VideoDetailViewController *aBookDetail = [[[VideoDetailViewController alloc] initWithNibName:@"VideosDetailView" bundle:[NSBundle mainBundle]] autorelease];
        self.videoDetailViewController = aBookDetail;
        [aBookDetail release];
        aBookDetail = nil;
    }
    [self.navigationController pushViewController:videoDetailViewController animated:YES];
} 
```

细节视图控制器：

```
#import "VideoDetailViewController.h"
#import "RSSEntry.h"
#import "ExampleAppDataObject.h"
#import "AppDelegateProtocol.h"

@implementation VideoDetailViewController

@synthesize activityIndicator;
@synthesize webView;
@synthesize pasteboard;

- (ExampleAppDataObject*) theAppDataObject;
{
    id<AppDelegateProtocol> theDelegate = (id<AppDelegateProtocol>) [UIApplication    sharedApplication].delegate;
    ExampleAppDataObject* theDataObject;
    theDataObject = (ExampleAppDataObject*) theDelegate.theAppDataObject;
    return theDataObject;
}

- (void)viewDidLoad
{    
    ExampleAppDataObject* theDataObject = [self theAppDataObject];
    NSString *urladdress = theDataObject.videoData;
    NSURL *url = [NSURL URLWithString:urladdress];
    NSURLRequest *requestobj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestobj];
    pasteboard = [UIPasteboard generalPasteboard];
    [super viewDidLoad];
}

- (void)dealloc
{
    [webView release];
    webView = nil;

    [activityIndicator release];

    [pasteboard release];

    [VideoDetailViewController release];
    [urlData release];
    urlData = nil;

    [super dealloc];
}

@end 
```

我跳过了很多我觉得不必要的代码。如果您想要实际文件，请发送电子邮件至 evan.stoddard@me.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:02:09.973

不要在 detailViewController 页面中释放 webview，而是放入 `[webView loadRequest:requestobj];`viewDidAppear()，而不是 viewDidLoad

另外：使过渡更平滑的一种方法是：

```
if (self.videoDetailViewController == nil) {
    VideoDetailViewController *aBookDetail = [[[VideoDetailViewController alloc] initWithNibName:@"VideosDetailView" bundle:[NSBundle mainBundle]] autorelease];
    self.videoDetailViewController = aBookDetail;
    [aBookDetail release];
    aBookDetail = nil;

}

[self.navigationController pushViewController:videoDetailViewController animated:YES]; 
```

应该：

```
VideoDetailViewController *aBookDetail = [[VideoDetailViewController alloc]     initWithNibName:@"VideosDetailView" bundle:[NSBundle mainBundle]] ;
[self.navigationController pushViewController:videoDetailViewController animated:YES];
[aBookDetail release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T05:05:51.573

感谢 Anna Billstrom，我意识到我也应该使用`viewDidAppear`而不是`viewDidLoad`. 这是因为当从表视图中选择项目时，我通过外部数据类将数据传递给控制器​​。因此，详细视图控制器在从外部数据类加载数据之前加载。viewDidAppear 通过在选择单元格后视图加载并且外部类中有数据时获取数据来解决此问题。

# c - 在c中，变量是否总是在超出范围之前从它们的寄存器推送到堆栈？

> ID：10973586
> 
> 赞同：2
> 
> 时间：2012-06-11T00:56:22.067
> 
> 标签：c, assembly, callstack, cpu-registers

在函数 A 调用函数 B 之后，B 中的代码是否可以丢弃所有寄存器（除了那些保存堆栈指针和 B 参数的寄存器）而不影响 A 本地的变量？因此，在函数 B 返回到函数 A 之后，函数 A 是否将其所有局部变量从堆栈中弹出（原因是在函数 B 执行时寄存器状态可能已更改）？

全局变量呢？函数 B 是否需要担心影响全局变量状态的任何寄存器操作？

（我问这个的主要原因是，我想尝试在运行时将机器代码作为函数B注入，方法是使用`mprotect`使数组可执行，然后将数组指针转换为函数指针并调用它。我希望有上述问题找出 B 的游乐场的范围。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T01:08:39.737

这是[**`calling convention`**](http://en.wikipedia.org/wiki/Calling_convention)，它取决于架构、操作系统和编译器。

### 编辑0：

再给你一个链接：[**`application binary interface`**](http://en.wikipedia.org/wiki/Application_binary_interface)。深入了解您的特定硬件/操作系统/编译器组合。您会发现哪些寄存器用于参数/返回值，它们是为特定事物保留的，并且对于任何给定的*clobber*函数都是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T01:01:13.227

这取决于它们如何处理调用其他函数的函数。在分支到另一个函数之前将所有局部变量存储在堆栈中是正常的，但是如果您确实知道某些其他函数只使用特定的两个寄存器，并且您避免在任何地方使用这两个寄存器，那么您就不需要存储在分支到该函数之前，堆栈上的任何内容（当然，除了之后要分支回的地址之外）。

这实际上只是一个低级实现设计决策（通常由编译器决定），因此您可能会发现某些函数将信任 B 与当前寄存器中的内容，而其他函数则不会。

# javascript - 如何在客户端浏览器中进行类似 SQL 的查询？

> ID：10973587
> 
> 赞同：10
> 
> 时间：2012-06-11T00:56:22.497
> 
> 标签：javascript, jquery, sql

我一直在寻找一种方法来执行复杂的查询，例如 SQL 可以执行但完全是客户端。我知道我可以从服务器上执行 SQL 查询获得我想要的确切结果，我什至可以 AJAX 让它看起来很流畅。然而，出于可扩展性、性能和带宽的原因，我更愿意在所有客户端都这样做。

一些要求：

*   广泛的浏览器兼容性。任何可以运行 jQuery 的东西都可以。我实际上更喜欢它是一个 jQuery 插件。
*   可以对多个列进行排序。例如，按州字母顺序排列，并按字母顺序列出每个州内的所有城市。
*   可以过滤结果。例如，相当于“where state = 'CA' or 'NY' or 'TX'”。
*   必须完全在客户端工作，因此用户只需要下载大量数据一次，并且可以根据需要剪切数据，而无需不断从服务器获取数据，并且实际上能够在初始拉取后离线执行所有查询。

我在 stackoverflow 上环顾四周，发现了 jslinq，但它最后一次更新是在 2009 年，并且没有文档。我也不知道它是否可以执行更复杂的查询，例如在两个不同的列上排序或执行“and”或“or”过滤。

我认为这样的事情已经完成了。我知道 HTML5 是从这条路开始的，但后来遇到了障碍。我只需要基本查询，不需要连接或任何东西。有谁知道可以做到这一点的东西？谢谢。

编辑：我认为我应该包括一个用例来帮助澄清我在寻找什么。

例如，我有一份美国 5000 个最大城市的列表。每条记录都包括 Cityname、State 和 Population。我希望能够一次下载整个数据集并用它填充一个 JS 数组，然后，仅在客户端，能够运行如下查询并从结果记录中创建一个表。

*   加州十大城市
*   所有以“S”开头且人口超过 1,000,000 的城市。
*   加利福尼亚州、纽约州、佛罗里达州、得克萨斯州和伊利诺伊州的三个最大城市，按州字母顺序排列，然后按人口排列。即加利福尼亚，洛杉矶，3,792,621；加利福尼亚，圣地亚哥，1,307,402；加利福尼亚、圣何塞、945,942...等。

所有这些查询都可以通过 SQL 完成，但我不想继续来回访问服务器，我也希望允许离线使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T01:08:22.483

看看[http://linqjs.codeplex.com/](http://linqjs.codeplex.com/)

它可以轻松满足您的所有要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T01:12:59.057

只要数据可以作为对象数组放入内存，您就可以使用[`sort`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)and [`filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)。例如，假设您要过滤产品。您想查找低于 5 美元或高于 100 美元的所有产品，并且希望按价格排序（升序），如果有两种价格相同的产品，则按制造商排序（降序）。你可以这样做：

```
var results = products.filter(function(product) {
    // price is in cents
    return product.price < 500 || product.price > 10000;
});
results.sort(function(a, b) {
    var order = a.price - b.price;
    if(order == 0) {
        order = b.manufacturer.localeCompare(a.manufacturer);
    }
    return order;
}); 
```

为了跨浏览器的兼容性，只需 shim `filter`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-06T07:32:50.113

试试[Alasql.js](https://github.com/agershun/alasql)。这是一个 javascript 客户端 SQL 数据库。

您可以使用连接和分组进行复杂的查询，甚至可以优化连接和位置。它不使用 WebSQL。

您的需求支持：

*   广泛的浏览器兼容性 - 所有现代版本的浏览器，包括手机。
*   可以对多个列进行排序。- Alasql 使用 ORDER BY 子句进行排序。
*   可以过滤结果。- 带有 WHERE 子句。
*   必须完全在客户端工作，因此用户只需要下载大量数据一次，并且可以根据需要剪切数据，而无需不断从服务器获取数据，并且实际上能够在初始拉取后离线执行所有查询。- 可以使用纯 JavaScript（Array.push() 等）操作来修改数据（不要忘记设置 table.dirty 标志）。

这是一个简单的示例（在[jsFiddle](http://jsfiddle.net/38hj2uwy/10/)中使用它）：

```
// Fill table with data
var person = [ 
    { name: 'bill' , sex:'M', income:50000 },
    { name: 'sara' , sex:'F', income:100000 },
    { name: 'larry' , sex:'M', income:90000 },
    { name: 'olga' , sex:'F', income:85000 },
];

// Do the query
var res = alasql("SELECT * FROM ? person WHERE sex='F' AND income > 60000", [person]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T01:11:37.543

雅虎的[YQL](http://developer.yahoo.com/yql)怎么样？我只是简单地看过它，但它看起来很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T01:15:14.907

[Backbone](http://backbonejs.org/)是一个非常好的 js 库，它（他们的话）“通过提供具有键值绑定和自定义事件的模型、具有可枚举函数的丰富 API 的集合、具有声明性事件处理的视图，并将其全部连接到RESTful JSON 接口上的现有 API。”

我不确定这是否是您正在寻找的，但您可以使用它来模拟您的模型并将事件侦听器绑定到它。[这](http://backbonetutorials.com/)似乎是一个很好的教程，可以了解它的一些基本用途。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T01:34:08.267

您可以使用[CanJS](http://canjs.us/)。它是一个相对较新的库，性能优于 Backbone 和其他库，它基于臭名昭著的 JavaScript MVC 库。实际上，它是带有一点香料的 JS MVC 的 MVC 部分。

[您可以通过 net.tutsplus.com http://net.tutsplus.com/tutorials/javascript-ajax/diving-into-canjs-part-3/](http://net.tutsplus.com/tutorials/javascript-ajax/diving-into-canjs-part-3/)看看这个 tut

它非常强大和快速。具有实时绑定等功能，让您的生活变得轻松。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-31T13:33:07.207

Coils 是一个 Clojurescript 框架，可编译为 Javascopt，并具有如下客户端 SQL 查询：

```
(go
    (log (sql "SELECT * FROM test_table where name = ?" ["shopping"] ))) 
```

：它是传递给服务器端关系数据库的完整 SQL：

[https://github.com/zubairq/coils](https://github.com/zubairq/coils)

# objective-c - 从父视图控制器中的视图获取鼠标事件

> ID：10973588
> 
> 赞同：0
> 
> 时间：2012-06-11T00:56:41.367
> 
> 标签：objective-c, delegates, mouseevent

我需要了解如何从父视图控制器中的视图获取鼠标事件。

假设我有一个视图控制器，它管理着一个 NSMutableArray 点。我可以初始化数组并将其传递给视图类，在该类中它将绘制到视图的矩形。

如果我在视图中配置了一些典型的鼠标事件，我可以在视图中添加点并让它们也绘制。

我不明白的是如何将该信息发送回父视图控制器，以便它可以将点添加到点数组中。

我不确定我是否应该对方法进行一些重载（它们不在控制器中响应），或者我是否可以设置一个委托（我不知道该怎么做）。

非常感谢您的建议，一个例子也很棒。

仅供参考，这是我需要解决的更复杂问题的一个简单示例，但该解决方案仍然适用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:38:47.137

作为 Cocoa 的新手，使用自定义委托对我来说仍然很陌生，但这就是解决方案。良好的旧对象消息传递。

1 在您的视图类中创建一个委托 --> id mouseDelagate。

2 使用至少一种方法创建一个简单的协议类。

3 在视图类中的实际鼠标事件方法。使用委托 [mouseDelegate mouseDidMove: point ] 调用协议方法。（但是您定义了该方法）。

4 在awakeFromNib文件中的view controller类中设置delegate([viewClass setMouseDelegate: self]);

5 实现协议方法；

```
 -(void)MouseDidMove{

 NSLog(@"moving");

 } 
```

6 记得在两个类中导入协议

# c++ - 为什么 vector::iterator 在重新分配时无效？

> ID：10973591
> 
> 赞同：15
> 
> 时间：2012-06-11T00:58:06.317
> 
> 标签：c++, vector, iterator, invalidation

我不明白为什么 a`vector`的迭代器在重新分配发生时应该失效。

难道不能简单地通过在迭代器中存储一个*偏移量*——而不是一个指针——来防止这种情况吗？

为什么`vector`不是这样设计的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T01:53:59.037

只是为与性能相关的理由添加一个引用：在设计 C++ 时，Stroustrup 认为像[std::vector](http://en.cppreference.com/w/cpp/container/vector)这样的模板类接近原生数组的性能特征是至关重要的：

> 强调运行时效率的一个原因是……我希望模板在时间和空间上足够高效，以便用于数组和列表等低级类型。
> 
> ...
> 
> 更高级别的替代方案——例如，具有 size() 操作的范围检查数组、多维数组、具有适当数字向量操作和复制语义的向量类型等——只有在他们的运行时才会被用户接受 -时间、空间和符号的便利性接近了内置数组。
> 
> 换句话说，提供参数化类型的语言机制应该是这样的，相关用户应该有能力消除数组的使用，转而使用标准库类。

Bjarne Stroustrup，**C++ 的设计和演变**，第 342 页。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T01:09:35.890

因为迭代器要做到这一点，他们需要存储一个指向向量对象的指针。对于每个数据访问，他们需要跟随指向向量的指针，然后跟随其中的指针指向数据数组的当前位置，然后添加偏移量 * 元素大小。那会慢得多，并且需要为`size_type`成员提供更多内存。

当然，有时这是一个很好的折衷方案，并且能够在需要时选择它会很好，但它比（C 风格）直接使用数组更慢、更笨重。 `std::vector`在引入 STL 时，对性能进行了无情的审查，并且正常的实现针对空间和速度进行了优化，超过了这个便利性/可靠性因素，就像等效数组与数组`operator[]`一样快，但安全性低于`at()`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T08:58:15.423

您可以通过包装标准来增加安全性`std::vector<T>::iterator`，但不能通过包装来增加速度`extension::vector<T>::safe_iterator`。这是一般原则，并解释了许多 C++ 设计选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T02:38:26.397

这些决定有很多原因。正如其他人指出的那样，向量的最基本实现`iterator`是指向元素的普通指针。为了能够处理`push_back`迭代器，必须修改以处理指向向量和位置的指针，在通过运算符访问时，必须取消引用向量指针，获得指向数据的指针并添加位置，并带有额外的取消引用。

虽然这不是最有效的实施方式，但这并不是真正的限制因素。VS/Dinkumware 库（甚至在发行版中）中迭代器的默认实现是检查迭代器，它管理等量的信息。

实际问题来自其他变异操作。考虑在矢量中间插入/擦除。为了保持所有迭代器的有效性，容器必须跟踪迭代器的所有实例并调整位置字段，以便它们仍然引用相同的元素（已被插入/删除替换）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T01:08:42.883

您需要存储偏移量和指向矢量对象本身的指针。

如指定的那样，迭代器可以只是一个指针，它占用的空间更少。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-08T17:24:17.360

TL；DR——因为您正在用简单的无效规则换取更复杂的远距离操作规则。

* * *

请注意，“存储指向向量对象的指针”会导致新的失效情况。例如，今天`swap`保留了迭代器的有效性，如果指向向量的指针（或引用）存储在迭代器中，则它不再可以。所有移动向量元数据本身的操作（向量的向量有人吗？）将使迭代器无效。

您交易的是“当对元素的指针/引用无效时迭代器变得无效”为“当对向量的指针/引用无效时迭代器变得无效”。

性能参数并不重要，因为建议的替代实现甚至都不正确。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T15:01:23.373

我的迭代器没有失效，它应该指向同一个元素还是在它之前的插入之后指向同一个位置？换句话说，即使没有性能问题，决定使用哪个替代定义也并非易事。

# java - 使用Eclipse JDT解析java文件

> ID：10973592
> 
> 赞同：2
> 
> 时间：2012-06-11T00:58:24.220
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

我使用 Eclipse JDT 库来解析 java 源代码以访问类中定义的所有方法。当代码在方法体中包含“//xxxx”之类的注释时，解析器将在注释之前停止，忽略方法main(String[] args)。

这是解析的示例：

```
public class HelloWorld {

    private String name;
    private int age; 

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
                //Set the age
        this.age = age;
        System.out.println();
    }

    public static void main(String[] args) {

        HelloWorld hw = new HelloWorld();
        if(true) {
            hw.setAge(10);
        }

    }
} 
```

这是我为解析上述示例案例而编写的代码：

```
public class Parser {

/**
 * Parse java program in given file path
 * @param filePath
 */
public void parseFile(String filePath) {
    System.out.println("Starting to parse " + filePath);
    char[] source = readCharFromFile(filePath);
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source);
    parser.setResolveBindings(true);
    CompilationUnit cu = (CompilationUnit) parser.createAST(null);

    cu.accept(new ASTVisitor() {

        @Override
        public boolean visit(MethodDeclaration node) {
            return true;
        }

        @Override
        public void endVisit(MethodDeclaration node) {
            System.out.println("Method " + node.getName().getFullyQualifiedName() + " is visited");
        }

    });
}
} 
```

当我用它来解析代码时，它只能得到method `getName()`, `setName()`, `getAge()`and`getAge()`已经被访问过而`main()`被忽略的结果。

期待您的回答。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:25:04.263

问题是您的`readCharFromFile(filePath)`方法从文件中删除`\n`或换行符。这意味着注释之后的所有行实际上都是注释的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:24:55.793

您用来阅读源代码的代码似乎有问题。

试试下面的代码来读取文件：

```
File javaFile = new File(filePath);
BufferedReader in = new BufferedReader(new FileReader(javaFile));
final StringBuffer buffer = new StringBuffer();
String line = null;
while (null != (line = in.readLine())) {
     buffer.append(line).append("\n");
} 
```

并使用它来设置您的解析器源：

```
parser.setSource(buffer.toString().toCharArray()); 
```

代码的其他一切似乎都很好。

# r - 构建一个包，以便它在 R 中自动加载其他包

> ID：10973593
> 
> 赞同：3
> 
> 时间：2012-06-11T00:59:13.737
> 
> 标签：r, package

> **可能重复：**
> [如何正确使用 R 包中其他包中的函数](https://stackoverflow.com/questions/5260079/how-to-properly-use-functions-from-other-packages-in-a-r-package)
> [自动加载数据集](https://stackoverflow.com/questions/10891146/load-data-set-automatically)

我已经构建了一个 R 包，现在正在对其进行测试。它需要几个包，如 scatterplot3d、gdata 等。

当有人加载我的包时，如何让这些包自动加载？

谢谢！

编辑重新评论：我已经在描述中设置了导入，并且我已经设置了命名空间文件。我知道这很有效，因为我在执行 R CMD Check 时使用的示例。但是，如果我只是加载 R，输入 library(mypackage) 它会给我一个错误。

编辑：已解决，我将导入部分中的包移动到依赖部分。谢谢！

# php - 正则表达式从另一个 url 中获取 url

> ID：10973602
> 
> 赞同：1
> 
> 时间：2012-06-11T01:00:43.540
> 
> 标签：php, regex, url, urlencode

要从中拉出的字符串：`http:\/\/c.ypcdn.com\/2\/c\/rtd?vrid=357c99c36bd7ed631eda2e43fc9e30f8&rid=283d465f-f63b-4b0d-90b0-be6c12ed7617&ptid=943aw4l8qj&ypid=11720135&lid=194823099&tl=6&lsrc=SP&dest=http%3A%2F%2FCleanation.com`

我以前用过的正则表达式：`www\..*?\.\w{2,5}`

但是，上面的 RegEx 只会在 URL 有“www”的情况下获取 URL。在里面。如果我拿出“www”。它只是抓住了 c.ypcdn.com 的 RegEx。我想抓住字符串末尾的 Cleanation.com。

需要是动态的，以便它可以抓取任何没有“www”的网址。出那个网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:03:21.303

为什么不在返回的索引上使用[parse_url()](http://php.net/parse_url)然后[parse_str()](http://www.php.net/parse_str)`query`来获取它？

编辑：示例：

```
$url= "http://c.ypcdn.com/2/c/rtd?vrid=357c99c36bd7ed631eda2e43fc9e30f8&rid=283d465f-f63b-4b0d-90b0-be6c12ed7617&ptid=943aw4l8qj&ypid=11720135&lid=194823099&tl=6&lsrc=SP&dest=http%3A%2F%2FCleanation.com";
$query = parse_url($url, PHP_URL_QUERY);
parse_str($query,$params);
echo $params['dest']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:08:40.040

如果这始终是`dest`参数，您可以通过以下方式获取它：

```
"dest=https?%3A%2F%2F([^?&]+?)" 
```

如果它没有最后一个参数，您可以通过以下方式获取它：

```
"dest=https?%3A%2F%2F(.+)$" 
```

# css - 如何只更改 DIV 中的 CSS 而不是其他任何地方？

> ID：10973607
> 
> 赞同：5
> 
> 时间：2012-06-11T01:01:32.770
> 
> 标签：css

我有这个代码：

```
h1, h2, h3, h4{ 
    color: red;
}
.message_rouge h1, h2, h3, h4,{color: black;} 
```

为什么我的所有标题都是黑色的，而不仅仅是“message_rouge”中的标题，其余的都是红色的？

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T01:03:15.747

每一行都是它自己的选择器，但您只指定`.message_rouge`第一行。

**改用这个：**

```
.message_rouge h1, 
.mesage_rouge h2,
.mesage_rouge h3,
.mesage_rouge h4 {
    color: black;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T01:03:39.147

这是错误的

```
.message_rouge h1, h2, h3, h4,{color: black;} 
```

这是对的

```
.message_rouge h1,.message_rouge h2,.message_rouge h3,.message_rouge h4,{color: black;} 
```

# python - 将 JSON 数组转换为 Python 列表

> ID：10973614
> 
> 赞同：90
> 
> 时间：2012-06-11T01:03:22.360
> 
> 标签：python, json, list

```
import json

array = '{"fruits": ["apple", "banana", "orange"]}'
data  = json.loads(array) 
```

那是我的 JSON 数组，但我想将 fruits 字符串中的所有值转换为 Python 列表。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-06-11T01:09:18.680

```
import json

array = '{"fruits": ["apple", "banana", "orange"]}'
data  = json.loads(array)
print data['fruits']
# the print displays:
# [u'apple', u'banana', u'orange'] 
```

你有你需要的一切。`data`将是一个字典，`data['fruits']`将是一个列表

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T01:10:56.983

[在 Ideone 上测试。](http://ideone.com/8qE6N)

```
 import json
array = '{"fruits": ["apple", "banana", "orange"]}'
data  = json.loads(array)
fruits_list = data['fruits']
print fruits_list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T02:51:05.747

`data`将返回一个列表的**字符串表示形式**，但它实际上仍然是一个字符串。只需检查`data`with的类型`type(data)`。这意味着如果您尝试对列表的此字符串表示形式使用索引`data['fruits'][0]`，它将返回“[”，因为它是第一个字符`data['fruits']`

您可以`json.loads(data['fruits'])`将其转换回 Python 列表，以便与常规列表索引进行交互。还有其他 2 种方法可以将其转换回[此处建议的 Python 列表](https://www.tutorialspoint.com/convert-a-string-representation-of-list-into-list-in-python)

# android - 将同步视频传送到多台平板电脑

> ID：10973616
> 
> 赞同：3
> 
> 时间：2012-06-11T01:04:10.340
> 
> 标签：android, ios, video, mobile, streaming

我有一个现场活动，我们想探索使用连接到座位上的平板电脑（IOS/Android/Windows）让观众访问网页和应用程序，但也希望在功能上同时将视频流推送到每个平板电脑并同步到来自家庭 PA 的音频馈送。

到目前为止，我还没有找到任何可以实现这一目标的硬件/软件组合。显然，通过 IP 同步视频并不是一件容易的事，但我希望有人知道它是否可能。我还会探索使用具有 hdmi/视频输入的平板电脑，但到目前为止它们似乎也不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:26:59.177

Flash Media Server 并使用 p2p。

刚刚意识到你使用IOS。IOS不做Flash。

# visual-studio-2008 - 如何更改 Visual Studio 2008 中包含测试项目的文件夹名称？

> ID：10973618
> 
> 赞同：0
> 
> 时间：2012-06-11T01:05:28.620
> 
> 标签：visual-studio-2008

我使用单元测试向导在 Visual Studio 2008 中创建了一个具有单元测试的项目。它将该项目放在名为“TestProject1”的文件夹中。现在我想将“TestProject1”重命名为更有意义的名称。我无法从 Visual Studio 中看到如何做到这一点。在 Visual Studio 之外更改它会导致 Visual Studio 要求我在构建时保存项目。但随后通知我，我只能将项目保存在“TestProject1”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:10:57.983

首先在 Visual Studio 之外重命名文件夹。

然后使用记事本等文本编辑器打开 .SLN 文件，然后将对文件夹的引用更改为新名称。

完成此操作后，请确保未在 Visual Studio 中打开解决方案。

# windows-8 - Windows 8 广告显示在设置浮出控件之上

> ID：10973621
> 
> 赞同：5
> 
> 时间：2012-06-11T01:06:41.503
> 
> 标签：windows-8, ads, winrt-xaml

首先，截图：

![主视图中的广告显示在设置弹出窗口中](../Images/6acd9a60424d014feb3e7067c12fd9f5.png)

标题和图片很好地解释了它。我在我的应用程序主组视图的右侧设置了一个广告（与本示例中的默认网格模板非常相似），当我拉起我的关于屏幕时，广告会流血。

About 屏幕是 SettingsFlyout 上的用户控件集，我从开发营（下）分发的一些代码示例中借用了该控件。

```
class SettingsFlyout
{
    private const int _width = 346;
    private Popup _popup;

    public void ShowFlyout(UserControl control)
    {
        _popup = new Popup();
        _popup.Closed += OnPopupClosed;
        Window.Current.Activated += OnWindowActivated;
        _popup.IsLightDismissEnabled = true;
        _popup.Width = _width;
        _popup.Height = Window.Current.Bounds.Height;

        control.Width = _width;
        control.Height = Window.Current.Bounds.Height;

        _popup.Child = control;
        _popup.SetValue(Canvas.LeftProperty, Window.Current.Bounds.Width - _width);
        _popup.SetValue(Canvas.TopProperty, 0);
        _popup.IsOpen = true;
    }

    private void OnWindowActivated(object sender, Windows.UI.Core.WindowActivatedEventArgs e)
    {
        if (e.WindowActivationState == Windows.UI.Core.CoreWindowActivationState.Deactivated)
        {
            _popup.IsOpen = false;
        }
    }

    void OnPopupClosed(object sender, object e)
    {
        Window.Current.Activated -= OnWindowActivated;
    }
} 
```

而且，因为我知道它会被要求，所以这是定义我页面上广告的 XAML 行：

```
<ads:AdControl Visibility="{Binding IsTrial, Source={StaticResource License}, Converter={StaticResource BooleanToVisibilityConverter}}"  Grid.Row="0" Grid.RowSpan="2" x:Name="LandscapeAdControl" ApplicationId="test_client" AdUnitId="Image_160x600" Width="160" Height="600" VerticalAlignment="Center" HorizontalAlignment="Right"/> 
```

那么，为什么会发生这种情况，我该如何预防呢？

**怀疑**

1.  我还在 Consumer Preview b/c 上周一我有一个展示和讲述，没有时间在这个盒子上迁移操作系统，而在展示这个时不会冒着无法正常工作的风险。因此，如果它是一个错误，升级可能会修复它。

    1.a. **更新**我已经升级到 Release Preview 并且有同样的问题。

2.  这里有一些花哨的广告隐藏但仍然获得印象的预防技术吗？也许它认为我试图用一个 ui 元素覆盖广告，并且在用户看到它的情况下仍然获得它的印象。如果是这样，我该如何管理这个完全合法的用例？

**剧透警报**：ZIndex 未在任何地方设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:13:19.633

它与覆盖`AppBar`（顶部或底部）存在相同的问题。我使用实例上的`Opened`and`Closed`事件`AppBar`来隐藏/显示广告。这意味着 AdControl 绑定到本地页面属性，而不是直接绑定到 ViewModel。就像你说的，这很不幸，但它确实有效。

```
 private void bottomAppBar_Opened(object sender, object e)
    {
        if (App.ViewModel.IsTrialVisibility == Visibility.Visible)
            this.DefaultViewModel["AdVisibility"] = Visibility.Collapsed;
        // else do nothing as we don't want to show it since it's not a trial
    }

    private void bottomAppBar_Closed(object sender, object e)
    {
        if(App.ViewModel.IsTrialVisibility == Visibility.Visible)
            this.DefaultViewModel["AdVisibility"] = Visibility.Visible;
        // else do nothing as it's not shown in the first place (not a trial)
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T21:59:49.210

`AdControl`在命名上有一个属性：[`UseStaticAnchor`](http://msdn.microsoft.com/en-us/library/advertising-windows-sdk-api-reference-adcontrol-properties-usestaticanchor%28v=msads.10%29.aspx)

将此属性设置为 true 将解决滚动的性能问题以及`AdControl`其他所有内容之上的绘图问题。

**原始答案 - 此方法现已过时：**

有`AdControl`两种方法：`Suspend()`和`Resume()`. 每当您打开弹出窗口或 AppBar 时，您都会想要调用`Suspend()`，并`Resume()`在它再次关闭时调用。

我相信在幕后，`AdControl`使用 a`WebView`来显示广告。无论出于何种原因， a`WebView`将始终显示在应用程序中的所有其他内容之上。解决此问题的方法是暂时禁用`WebView`，而是显示`WebViewBrush`. （此技术在此处进行了描述：http: [//msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.webviewbrush](http://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.webviewbrush)）因此，当您调用 Suspend() 和 Resume() 时，AdControl 正在执行此操作在被子下。

我最终要做的是创建一个 UserControl（名为`SuspendingAdControl`），它只包含一个 AdControl，可以在应用程序的任何地方使用。然后，每当打开或关闭窗口时，我都会使用 Caliburn Micro 的 EventAggregator 发布事件。SuspendingAdControl 将订阅和处理这些事件，然后适当地调用`AdControl.Suspend()`或`Resume()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:47:22.290

我最终制作了一些代码来在弹出窗口关闭时收听事件，这样我就可以手动高/显示广告。不幸的是，我不得不做一个解决方法，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-02T12:52:31.477

现在这些都不是必需的，因为 8.1 中的弹出窗口现在位于 Z 顺序的顶部。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-11T13:09:37.377

> 我还在 Consumer Preview b/c 上周一我有一个展示和讲述，没有时间在这个盒子上迁移操作系统，而在展示这个时不会冒着无法正常工作的风险。因此，如果它是一个错误，升级可能会修复它。

我还没有在我自己的 Metro 应用程序中使用任何广告，所以我还没有看到任何类似的问题发生。我使用的是 Release Preview，并且在 5 月 2 日之前使用的是 Consumer Preview。

Consumer Preview 和 Release Preview 之间有一些重大变化。因此，升级可能会解决这个问题，或者可能会破坏其他东西。

你最终将不得不升级。我建议在尝试解决问题之前先尝试一下。

# javascript - 我需要一种新方法来检测元素 HTML 是否发生了变化

> ID：10973624
> 
> 赞同：12
> 
> 时间：2012-06-11T01:07:20.693
> 
> 标签：javascript, jquery, setinterval, detect

现在我试图找到一种方法来检测元素 HTML 何时发生变化。

我目前正在尝试：

```
var a, b;
setInterval(function() {
    a = $('#chat').text();
}, 150);
setInterval(function() {
    b = $('#chat').text();
    if (a !== b) {
        alert("There has been a new message.");
    }
}, 200);​ 
```

我所做的是每 150 毫秒检查一次 #chat 的 HTML，然后每 200 秒再次检查 HTML，然后检查变量`a`是否不等于`b`将来的变量我会这样做，但现在我只是提醒一些东西。

你可以在这里看到它：http: [//jsfiddle.net/MT47W/](http://jsfiddle.net/MT47W/)

显然这种方式是行不通的，而且根本不是很准确。有没有更好/不同的做法/实现这一点？

感谢您的帮助，大约一周以来，我一直在尝试弄清楚如何更好地做到这一点，但我找不到解决方法，我希望我在正确的地方发布了这个问题，并且在正确的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T01:12:14.783

使用 a`var`存储元素的当前`text`值，然后在 a 中对其进行检查，`setInverval`并在检查后更新`var`以存储当前值`text`：

```
var a = $('#chat').text();
setInterval(function() {
    if (a !== $('#chat').text()) { //checks the stored text against the current
        alert("There has been a new message."); //do your stuff
    }
    a = $('#chat').text(); //updates the global var to store the current text
}, 150); //define your interval time, every 0.15 seconds in this case 
```

[***小提琴***](http://jsfiddle.net/ult_combo/MT47W/3/)

您也可以将值存储在 [`.data()`](http://api.jquery.com/data/) 元素中以避免使用全局变量。

使用示例`.data()`：

```
$('#chat').data('curr_text', $('#chat').text());
setInterval(function() {
    if ($('#chat').data('curr_text') !== $('#chat').text()) {
        alert("There has been a new message.");
    }
     $('#chat').data('curr_text', $('#chat').text());
}, 150); 
```

***[小提琴](http://jsfiddle.net/ult_combo/MT47W/4/)***

另一种方法，为了节省客户的内存，您可以只存储元素的 child`div`的数量：`#chat`

```
$('#chat').data('n_msgs', $('#chat').children().length);
setInterval(function() {
    if ($('#chat').data('n_msgs') !== $('#chat').children().length) {
        alert("There has been a new message.");
    }
     $('#chat').data('n_msgs', $('#chat').children().length);
}, 150); 
```

[***小提琴***](http://jsfiddle.net/ult_combo/MT47W/5/)

* * *

**编辑：**这是我最后的补充，带有一个[DOM 突变事件侦听器](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MutationEvent)：

```
$('#chat').on('DOMNodeInserted', function() {
    alert("There has been a new message.");
}); 
```

[***小提琴***](http://jsfiddle.net/ult_combo/MT47W/7/)（未在 IE < 8 中测试）

**注意：**如评论中所述，尽管突变事件仍受支持，但由于性能损失和不同浏览器之间的一些不兼容，它们被[W3C 归类为已弃用](http://www.w3.org/TR/DOM-Level-3-Events/#events-mutationevents)，因此建议使用上述解决方案之一，仅使用 DOM Mutation没有其他办法时的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T01:22:58.967

只需检查最后一次聊天就可以提高效率并做你想做的事。它不起作用的唯一方法是如果同一个人两次发送相同的消息 - 这很可能不会发生。

我希望这会奏效：

```
 var lastMessage = $('#chat .body').last().text();
    function checkMessages(){
        var newLastMessage = $('#chat .body').last().text();
        if(lastMessage !== newLastMessage && $('#chat .body').last().length > 0){
             //message has changed
            alert("There has been a new message.");
            lastMessage = $('#chat .body').last().text();
        }
        setTimeout(function(){checkMessages();},1000);
    }
    checkMessages(); 
```

[Js小提琴](http://jsfiddle.net/g2wrX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T01:58:36.110

使用 crc32 或 md5 散列来检查数据是否已更改。只需获取要检查的 div 的 html 内容，使用 crc32 或 md5 将其哈希为字符串，您将获得一个表示该内容的字符串。使用隐藏的时间戳等来确保一个用户的多条消息获得不同的哈希值。如果您在 setInterval 回调中执行此操作，您应该会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T03:44:38.203

虽然**不强烈推荐**，但也可以使用[Paul Irish 的 Duck 打孔](http://paulirish.com/2010/duck-punching-with-jquery/)方法来绑定 jQuery 的 append 函数——如果你确定该`append`函数是添加内容的方式（[演示](http://jsfiddle.net/Mottie/MT47W/8/)）：

```
(function($) {
    // store original reference to the method
    var _old = $.fn.append;
    $.fn.append = function(arg) {
        // append as usual
        _old.apply(this, arguments);

        // do your own checking here
        // "this" is a jQuery object
        if (this[0].id === "chat") {
            alert('there is a new message!');
        }
        return this;
    };

})(jQuery); 
```

使用这种方法，不需要定时循环。

# c# - 带有动态 where 子句的参数化查询

> ID：10973625
> 
> 赞同：2
> 
> 时间：2012-06-11T01:07:29.083
> 
> 标签：c#, mysql, parameterized-query

所以我有这个查询：

```
var comm = @"SELECT * FROM `TABLE` ";

bool hasWhere = false;

if ( model.Serial > 0 ) {
    comm += " WHERE `SERIAL` LIKE '%" + model.Serial + "%' ";
    hasWhere = true;
}

if ( model.Id.HasValue && model.Id.Value > 0 ) {
    if ( !hasWhere ) {
        comm += " WHERE `NUIP` LIKE '%" + model.Id.Value + "%' ";
        hasWhere = true;
    } else
        comm += " AND `NUIP` LIKE '%" + model.Id.Value + "%' ";
}

if ( model.Date.HasValue ) {
    if ( !hasWhere ) {
        comm += " WHERE `DATE` = '" + model.Date.Value + "' ";
        hasWhere = true;
    } else
        comm += " AND `DATE` = '" + model.Date.Value + "' ";
}
....
....
.... 
```

我已经阅读过针对 SQL 注入等的参数化查询。问题是，鉴于我将拥有动态数量的 WHERE 子句（基于搜索模型），我如何参数化查询？我不能放`WHERE a = @A AND b=@B...`，因为用户必须不需要根据所有列进行搜索。

任何想法？提前致谢。

**PS：**不能使用 LINQ 或类似的东西（-业务规则-）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:17:23.373

您仍然可以将 SQL 参数化查询与 where close 一起使用（WHERE 将是动态的）。例如，我有一个为 NULL 的参数 @SerialNum，我有一个等于 455 的参数 @Code。

```
SELECT
     Column1
    ,Column2
FROM 
     YourTable
WHERE
    (
        @SerialNum IS NULL
        OR
        Column3 LIKE '%' + @SerialNum + '%'
    )
    AND
    (
        @Code IS NULL
        OR
        Column4 LIKE '%' + @Code + '%'
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T01:16:53.687

我用这个技巧。

```
....
WHERE 1 = 1 
AND a = a 
AND b= @b 
AND c = c 
... etc.... 
```

即，如果我不想搜索，我会将列与它自己进行比较

```
var comm = @"SELECT * FROM `TABLE` WHERE 1 = 1 ";  

if ( model.Serial > 0 ) {  
    comm += " AND  `SERIAL` LIKE '%" + model.Serial + "%' ";  
}  else  {
      comm += " AND  `SERIAL` = `SERIAL`";
}

if ( model.Id.HasValue && model.Id.Value > 0 ) {    
    comm += " AND  `AND` LIKE '%" + model.Id.Value + "%' ";    
}  else  {
       comm += " AND `NUIP` = `NUIP` ";    
}   
.... 
```

`WHERE 1 = 1`被优化掉并且不再需要记住是否定义了 WHERE，并且所有的搜索要么被优化掉（`AND a=a`）要么应用了搜索（`AND a = xxx`）。

`if`您只需为每个搜索添加一个！

另外我会使用 StringBuilder 来清理字符串处理。

# windows - 关于汇编程序远调用和天堂之门，触发异常的段调用是否在抛出异常之前推送 cs 和 eip？

> ID：10973626
> 
> 赞同：4
> 
> 时间：2012-06-11T01:07:42.517
> 
> 标签：windows, assembly, wow64, seh, fasm

目前我正在玩被称为“天堂之门”的 windows/WOW64 技巧，正如你们中的一些人可能知道的那样，即使在 x86 程序中，它也允许我们进入 x64 模式（当我测试它时我很惊讶它有效！）但我知道它不受所有 Windows 版本的支持，所以我的代码（因为有代码）使用 seh，它看起来像这样：

```
start:
  use32
  ;; setup seh...
  call $33:.64bits_code ; specify 0x33 segment, it's that easy
  ;; success in x64 mode, quit seh...
  jmp .exit

.64bits_code:
  use64
  ;; ...
  use32
  retf

.seh_handler:
  use32
  ;; ...
  xor eax,eax ; EXCEPTION_CONTINUE_EXECUTION
  ret

.32bits_code: 
  ; we have been called by a far call (well, indirectly, routed by a seh handler)
  ; HERE IS THE PROBLEM => Should i use a retf since cs and eip are on the stack, 
  ;                        or the exception has been triggered before pushing them???
  ; "retf" or "jmp .exit"?

.exit:
  xor eax,eax
  push eax
  call [ExitProcess] 
```

我知道一个简单的“jmp .exit”可以解决问题，但我对此非常好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:06:05.700

当操作系统收到中断或发生故障时，它期望无论用户代码在做什么，CPU 都已将所需的状态保存在内核堆栈上，以便`IRET`无形地恢复它正在执行的任何操作。

请注意，内核堆栈上的该状态不涉及“魔法”。“继续执行”仅意味着恢复保存的值`rflags`，`cs:rip`并`ss:rsp`运行`cs:rip`最终指向的代码。

这意味着，在不专门涉及 SEH 的情况下，仅考虑在远调用期间发生的任何类型的异常，实际上只有两种情况需要考虑：

1.  异常发生在跳转“之前”：没有推送任何内容，内核堆栈上的状态表明我们应该通过重新启动调用指令来恢复。
2.  异常发生在跳转“之后”：`cs:eip`已被推送，`rip`指向`.64bits_code`标签处或之后的某个位置，并且保存的状态表示要恢复，我们应该跳转到 64 位代码。

如果 CPU 允许“在中间”中断远调用，那么当操作系统继续执行时，就不可能`cs:rip`产生一致的结果。例如，如果远调用的返回地址在异常发生之前被压入，但保存的`cs:rip`指向远调用指令，那么您最终会在堆栈上得到*两个*返回地址副本，并且一切都变得松散了。

现在，要实际回答您的问题：这取决于操作系统告诉您发生异常的 rIP 的值。如果它指向 64 位代码，则堆栈上必须有 cs:eip，如果它指向 32 位代码，则可以安全地假设它尚未被推送。

# c# - 在 XNA 中旋转 3D 模型

> ID：10973628
> 
> 赞同：10
> 
> 时间：2012-06-11T01:08:20.440
> 
> 标签：c#, matrix, xna, rotation

我是 XNA 的新手，我正在创建一个简单的游戏。抱歉，这可能真的很简单，但我找不到任何帮助。游戏中有一艘船是我用 Blender 制作的，我希望能够通过旋转船的 X、Y 和 Z 轴来控制这艘船。这是我的代码：

```
protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
  RotationMatrix = Matrix.CreateRotationY(MathHelper.PiOver2) * Matrix.CreateRotationY    (rotationY) * Matrix.CreateRotationX(rotationX) * Matrix.CreateRotationZ(rotationZ);

        Matrix shipTransformMatrix = RotationMatrix * Matrix.CreateTranslation(ship.Position);

                        DrawModel(ship.Model, shipTransformMatrix, ship.Transforms);
        // TODO: Add your drawing code here

        base.Draw(gameTime);
    }

    public  void DrawModel(Model model, Matrix modelTransform, Matrix[] absoluteBoneTransforms)
    {
        //Draw the model, a model can have multiple meshes, so loop
        foreach (ModelMesh mesh in model.Meshes)
        {
            //This is where the mesh orientation is set
            foreach (BasicEffect effect in mesh.Effects)
            {

                effect.World = absoluteBoneTransforms[mesh.ParentBone.Index] * modelTransform;
                effect.Projection = projectionMatrix;
                effect.View = viewMatrix;

            }

            //Draw the mesh, will use the effects set above.
            mesh.Draw();
        }
    } 
```

这将旋转船，但不会沿着船的轴旋转。如果我旋转 Y 轴（通过改变 rotationY 的值），船将沿其 Y 轴旋转。但是如果我旋转 X 或 Z 轴，船会根据世界的 X 和 Z 轴旋转，而不是它自己的。我怎样才能让船绕着自己的轴旋转？我需要对矩阵做一些不同的事情吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:59:36.023

使用 CreateRotationX、CreateRotationY 和 CreateRotationZ 都可以应用围绕世界或全局轴的旋转。这意味着它会导致您的对象仅围绕世界/全局轴旋转，而不是您的对象的局部轴。

使用 CreateFromAxisAngle 允许您输入您想要的任何旋转轴，包括飞船自己的局部轴。

然而，您的整体旋转范式将需要转变，因为例如围绕任意轴（如船的 Up）的旋转可能会同时导致 3 个角度值中的任何一个发生变化。跟踪所有这些是不必要的困难。有一个更简单的方法：

只需以矩阵（或四元数）形式而不是 3 个角度存储旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:20:24.910

**编辑：**在下面给史蒂夫一些功劳（很好的回答伙伴，自从我做了很多 3D 数学以来已经有一段时间了）。

本教程将向您展示如何设置史蒂夫建议的内容！

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Rotation__-_translation.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Rotation_-_translation.php)

原帖：

我相信你必须在你的 BasicEffect 循环中创建一个 effect.Rotation。

我相信所有这些都包含在 MSDN 的基本教程中。您的代码甚至看起来像是来自那里。

[http://msdn.microsoft.com/en-us/library/bb203897(v=xnagamestudio.31)](http://msdn.microsoft.com/en-us/library/bb203897%28v=xnagamestudio.31%29)

如果没有，请查看此链接，Reimer 涵盖了所有值得了解的 3D 内容：

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/series1.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/series1.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T22:02:15.903

这是我最终做的事情，以防其他人像我一样被卡住：

```
Matrix RotationMatrix;
//every time I wanted to rotate around an axis, I would do something like this:
protected void rotateY()
    {
        RotationMatrix *= Matrix.CreateFromAxisAngle(RotationMatrix.Up, MathHelper.ToRadians(1.0f));
        //For the X axis I used RotationMatrix.Right, and for the Z RotationMatrix.Forward
    }
protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

    Matrix shipTransformMatrix = RotationMatrix * Matrix.CreateTranslation(ship.Position);

                    DrawModel(ship.Model, shipTransformMatrix, ship.Transforms);
    // TODO: Add your drawing code here

    base.Draw(gameTime);
}

public  void DrawModel(Model model, Matrix modelTransform, Matrix[] absoluteBoneTransforms)
{
    //Draw the model, a model can have multiple meshes, so loop
    foreach (ModelMesh mesh in model.Meshes)
    {
        //This is where the mesh orientation is set
        foreach (BasicEffect effect in mesh.Effects)
        {

            effect.World = absoluteBoneTransforms[mesh.ParentBone.Index] * modelTransform;
            effect.Projection = projectionMatrix;
            effect.View = viewMatrix;

        }

        //Draw the mesh, will use the effects set above.
        mesh.Draw();
    }
} 
```

# javascript - 加载时不断增长的 Iframe 自动滚动到底部

> ID：10973630
> 
> 赞同：1
> 
> 时间：2012-06-11T01:08:25.223
> 
> 标签：javascript, jquery, iframe

我有一个 iFrame，它加载一个输出服务器操作的脚本。有没有办法让 iFrame 使用 javascript 或 jquery 自动滚动到底部，以指示脚本的加载进度？

# javascript - 动态获取json值

> ID：10973632
> 
> 赞同：4
> 
> 时间：2012-06-11T01:08:26.657
> 
> 标签：javascript, jquery, json

```
{
 "id":["123"],
 "optionid_123":"98"
} 
```

我有`id`作为变量，但我怎么能得到`optionid_*`？我尝试了一些东西，但似乎没有任何效果。位于适当的`each`函数内部，并且 jsonid 包含正确的值。这是我尝试访问`98`不起作用的值：

```
$.each(data.id,function(){
    var jsonid = this;
    console.log( data.optionid_+jsonid ); // doesn't work
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T01:10:49.710

您可以使用[括号表示法](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)：

```
console.log( data['optionid_' + jsonid] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:30:00.487

我认为你的循环`data.id`不正确。那是

```
$.each(data.id, function() {..}) 
```

是不正确的。

例如，如果您`data`看起来如下所示：

```
var data = [{
 "id":["123"],
 "optionid_123":"98"
},
{
 "id":["456"],
 "optionid_456":"99"
}]; 
```

然后，您需要循环`data`并获取所需的属性。

```
$.each(data, function(index, val) {
  var jsonid = val.id[0]; // as val.id is array so you need [0] to get the value
  console.log(val['optionid_' + jsonid]); // bracket notation used
}); 
```

**[演示](http://jsfiddle.net/FrnpE/2/)**

# javascript - JS和SQL Server之间的不同UTC时间戳

> ID：10973642
> 
> 赞同：0
> 
> 时间：2012-06-11T01:09:58.603
> 
> 标签：javascript, sql-server, timestamp

我使用时间戳作为我的应用程序的一部分，但问题是同时在 Javascript 和 SQL Server 中创建的时间戳显示不同的值。它们在同一台计算机上运行，​​因此系统时钟不是问题。

Javascript：

```
var now = new Date();

console.log( new Date(now.getUTCFullYear(),
        now.getUTCMonth(),
        now.getUTCDate(),
        now.getUTCHours(),
        now.getUTCMinutes(),
        now.getUTCSeconds()).valueOf() /1000);​ 
```

SQL Server 2012：

```
SELECT datediff(second,'1970-01-01 00:00:00.000',getutcdate()) 
```

难道 datediff 论点的第一部分不是用 UTC 解释 01/01/1970 吗？

为了测试，我在 jsfiddle 中执行了 javascript，并在 management studio 中执行了 SQL，彼此在 1-2 秒内执行。

结果：Javascript：1339348299 SQL Server：1339384301

所以有 36002 秒或 10 小时的差异，这是我的时区偏移量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:13:46.023

好的，这里有两种方法来获取将比较的时间戳......

Javascript

```
return Math.round(new Date().getTime()/1000.0); 
```

SQL 服务器

```
SELECT DATEDIFF(s, '1970-01-01 00:00:00', GETUTCDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:17:58.543

根据您所展示的内容，我会说两个系统之一的时区设置不正确。您可以通过在每个 SQL 和 javascript 中使用相应的 getdate()（而不是 getUTCdate()）函数并进行比较来检查这一点。我的猜测是其中一个将返回与 getUTCdate 相同的结果，这表明那个是要修复的。

# iphone - 没有调整大小的移动 Safari 重排 - 错误行为

> ID：10973649
> 
> 赞同：6
> 
> 时间：2012-06-11T01:10:57.327
> 
> 标签：iphone, ios5, mobile-safari

**编辑 2**这个问题正在寻找一种平滑、干净的方式来重排iPhone 上的*文本。*

根据方向改进网络应用程序以具有 2 种不同的宽度（320 和 480）。目的还在于为非移动（即 > 480 宽度）屏幕提供 480 宽。除了横向刷新页面时，它基本上可以按需要工作。这会导致布局回到 320（左侧）并在右侧留下一个黑条。

*   纵向加载

![1.人像（加载后）](../Images/143dbe81b89853a28d758ecbbadb791a.png)

*   旋转到横向

![2.横向（旋转后）](../Images/fe71683fb04dd3e5b45b81dfadc0b55c.png)

*   在风景中刷新

![3.横向（刷新后）](../Images/6dc2bf525f661f9c179e404b2ec79069.png)

它需要旋转到纵向并返回才能再次调整大小和图像 2。这对我来说是一个可用性问题。页面在 Android 上调整大小和旋转效果很好，在桌面上是“全尺寸”。

有人知道我错过了什么吗？我已经尝试了很多次迭代并阅读了一些错误解决方案。这些想法都没有改变结果。即将提交错误报告。我有一种预感，它在媒体查询#container 的行中。

**编辑：该网站是为移动设备（320 宽）构建的。希望在空间可用时扩大空间的使用。主要目的是让文本和元素重排。** 查看照片，注意输入字段与其标签的对齐方式。

我尝试了两种方法来完成这项工作。其他是使用 javascript 更改#container 宽度。目前在内联样式表末尾使用以下媒体查询。我更喜欢通过媒体查询来解决这个问题。

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>The Title</title>
    <style type="text/css">
        html {
            margin: 0;
            padding: 0;
        }
        body {
            font: 14px Verdana, Geneva, Arial, Helvetica, sans-serif;
        }
        #container {
            margin: auto;
            width: 480px;
         .....
        @media screen and (max-width: 480px) {
            body {
                -webkit-text-size-adjust: none;
            }
            #container {
                 max-width: 480px !important;
                 width: 100% !important;
            }       
        }
        @media screen and (max-width: 320px) {
            body {
                -webkit-text-size-adjust: none;
            }
            #container {
                 max-width: 320px !important;
                 width: 100% !important;
            }       
        }
    </style>
      ..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T17:20:35.750

取得了突破。在媒体查询的几十种变化之后，这段代码“打破”了这个问题：

```
function orientation_change() {
    if (window.orientation == 0 || window.orientation == 180)
        document.getElementById("viewport").setAttribute("content", "width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no");
    else if (window.orientation == -90 || window.orientation == 90)
        document.getElementById("viewport").setAttribute("content", "width=device-height, maximum-scale=1.0, initial-scale=1.0, user-scalable=no");     
} 
```

和：

```
<body onload="orientation_change();" onorientationchange="orientation_change();"> 
```

仍然包含原始问题的媒体查询以在发生旋转时重*排文本。*但是*刷新*部分黑屏问题消失了。[发现有关Apple iOS Safari Web 内容指南](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)的见解。特别是，处理方向事件。

我希望这有助于*响应式网页设计*的过程。

# assembly - 如何在 NASM 中使用 scanf？

> ID：10973650
> 
> 赞同：17
> 
> 时间：2012-06-11T01:11:08.500
> 
> 标签：assembly, nasm

我试图弄清楚如何使用`scanf`来获取用户输入。我知道要使用`printf`：我所要做的就是将我想在屏幕上写入的数据推送到堆栈中，如下所示：

```
global _main
extern _printf
extern _scanf

section .data
msg db "Hi", 0

section .text
_main:
  push ebp
  mov ebp, esp  

  push msg
  call _printf

  mov esp, ebp
  pop ebp
ret 
```

但我不知道如何使用`scanf`. 有人可以给我最简单的源代码`scanf`吗？我真的只想输入用户输入的内容。

我不习惯 32 位汇编。我只使用过 16 位，而且我知道在 16 位（DOS）中你可以这样做：

```
mov ah, 3fh
mov dx, input
int 21h

input rb 100d 
```

无论你输入什么，都会放在“输入”的地址。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T01:43:30.457

我发现了这个[“在 NASM.PDF 中编程”](http://issc.uj.ac.za/assembler/NASM.pdf)

```
; add1.asm
SECTION .data
    message1: db "Enter the first number: ", 0
    message2: db "Enter the second number: ", 0
    formatin: db "%d", 0
    formatout: db "%d", 10, 0 ; newline, nul terminator
    integer1: times 4 db 0 ; 32-bits integer = 4 bytes
    integer2: times 4 db 0 ;
SECTION .text
   global _main 
   extern _scanf 
   extern _printf     

_main:

   push ebx ; save registers
   push ecx
   push message1
   call printf

   add esp, 4 ; remove parameters
   push integer1 ; address of integer1 (second parameter)
   push formatin ; arguments are right to left (first parameter)
   call scanf

   add esp, 8 ; remove parameters
   push message2
   call printf

   add esp, 4 ; remove parameters
   push integer2 ; address of integer2
   push formatin ; arguments are right to left
   call scanf

   add esp, 8 ; remove parameters

   mov ebx, dword [integer1]
   mov ecx, dword [integer2]
   add ebx, ecx ; add the values          ; the addition
   push ebx
   push formatout
   call printf                            ; call printf to display the sum
   add esp, 8                             ; remove parameters
   pop ecx
   pop ebx ; restore registers in reverse order
   mov eax, 0 ; no error
   ret 
```

这是这个 C 函数的 asm 版本：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    int integer1, integer2;
    printf("Enter the first number: ");
    scanf("%d", &integer1);
    printf("Enter the second number: ");
    scanf("%d", &integer2);
    printf("%d\n", integer1+integer2);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T19:45:25.347

谢谢普里特。我根据你的代码做了一个简单的例子来说明scanf的使用。

请求一个整数并将其打印到屏幕上的程序：

```
section .text
  global main
  extern printf
  extern scanf

section .data
  message: db "The result is = %d", 10, 0
  request: db "Enter the number: ", 0
  integer1: times 4 db 0 ; 32-bits integer = 4 bytes
  formatin: db "%d", 0

main:
  ;  Ask for an integer
  push request
  call printf
  add esp, 4    ; remove the parameter

  push integer1 ; address of integer1, where the input is going to be stored (second parameter)
  push formatin ; arguments are right to left (first  parameter)
  call scanf
  add esp, 8    ; remove the parameters

  ; Move the value under the address integer1 to EAX
  mov eax, [integer1]

  ; Print out the content of eax register
  push eax
  push message
  call printf
  add esp, 8

  ;  Linux terminate the app
  MOV AL, 1
  MOV EBX, 0 
  INT 80h 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-18T02:33:35.930

这是您在汇编中搜索时出现的第一个帖子`scanf`，因此，即使它是 4 年前的帖子，我认为它应该是正确的。

Oukei，因此，`call scanf`在 NASM 组装中，您需要：

1.  外部扫描
2.  为你准备一个格式scanf
3.  准备变量或单个变量以存储预期的值
4.  倒序推送参数
5.  调用 scanf
6.  恢复堆栈

所以，假设你正在托盘

```
scanf ("%d %d", &val1, &val2); 
```

并遵循列表：
... 1。

```
section .text
extern scanf 
```

... 2\. 这是您传递给 C 的第一个参数`scanf`，它说明您将获得什么。一个整数、两个、一个浮点数、字符串、字符...在这种情况下，两个整数之间用空格隔开（也适用于 Enter）

```
section .data
fmt: db "%d %d",0 
```

... 3。

```
section .bss
val1: resd 1
val2: resd 1 
```

... 4 5 6\. 请注意，您推送的是变量的地址，而不是其内容（即 [var]）

```
push val2
push val1
push fmt
call scanf
add esp, 12 
```

另请注意，您必须将 12 添加到堆栈指针，因为您推送了 3 个双字参数。因此，您将 12 字节（3*4 字节）添加到堆栈中以“跳转”参数。

*我为变量声明了 dword，因为`%d`使用 dword，就像`printf`.
**`,0`格式字符串的末尾是一个标记字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-12T13:25:57.937

对于 64 位 nasm：

要将 scanf 与 nasm 一起使用，您首先需要在 .text 部分之前添加语句。

```
extern scanf 
```

现在您需要首先使用

```
push rbp 
```

如果您不想出现分段错误，这一点很重要。在进行调用之前，堆栈指针 rsp 必须与 16 字节边界对齐。进行调用的过程会将返回地址（8 字节）压入堆栈，因此当函数获得控制权时，rsp 未对齐。你必须自己创造额外的空间，通过推动一些东西或从 rsp 中减去 8。[你可以在这里](https://stackoverflow.com/questions/51070716/glibc-scanf-segmentation-faults-when-called-from-a-function-that-doesnt-align-r)阅读更多关于它的信息。

现在，您的堆栈已准备就绪，您需要首先将输入格式化字符串移动到 rdi 寄存器中，然后按严格顺序移动 rsi、rdx、rcx、r8、r9 中的参数。

我们以模仿c语句为例

```
scanf("%d %d", &a, &b); 
```

等效的 nasm 代码为：

```
section .data

Input_format db "%d %d", 0

section .bss

var1: resd 1 ;reserves one double(4 bytes) for int variable
var2: resd 1

extern scanf
global main
default rel  ; use this by default for efficiency. This is even mandatory if you run your code on macOS.

section .text
main:

push rbp
lea rdi, [Input_format] ;loading format
lea rsi, [var1] 
lea rdx, [var2]
call scanf

pop rbp  ;restores stack

;simulates return 0
mov rax, 0
ret 
```

下面是上面代码的更漂亮版本的代码。它提示用户输入，并打印输入的数字。

```
 section .data

int_inMsg:    db        "Enter an integer value" , 10, 0 ;10 for new line, 0 for null
real_inMsg:   db        "Enter a real value", 10, 0
bool_inMsg:   db        "Enter a boolean value", 10, 0
arr_inMsg:    db        "Enter %d elements for array range %d to %d", 10, 0
intFormat     db        "%d", 0

        section .bss
var1:         resd      1

global main
extern printf
extern scanf
extern puts
extern exit
default rel

section .text

main: 

        push rbp ;setup stack

        ;printf("Enter blah blah\n");

        lea rdi, [int_inMsg] ;first argument
        xor rax, rax
        call printf

        ;take input from the user
        ;scanf("%d", &var1);

        lea rdi, [intFormat]
        lea rsi, [var1]
        xor rax, rax
        call scanf

        lea rdi, [intFormat]
        mov esi, [var1]  ;notice the [] for sending value of var1 instead of pointer to var1
        xor rax, rax
        call printf

        ; return
        pop rbp ;restore stack
        mov rax, 0 ;normal exit
        ret 
```

感谢[@peter](https://stackoverflow.com/users/224132/peter-cordes)的有益和有见地的评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T22:48:17.343

假设你想做类似的事情

```
scanf("%d %d", &var1, &var2); 
```

这需要两个值并将它们存储在变量中。

在汇编中，您会将`push`变量的地址放入堆栈（按倒序排列），然后`call scanf`.

像你有两个变量

```
var1 resd 1
var2 resd 1 
```

... 进而

```
push var2
push var1
call scanf 
```

*请注意，我将它们按倒序推送，第一个值将存储在 var1 中。

执行后，您输入的值将存储在变量中。

如果您只想要一个值，只需推送一个变量。

# php - 在 php 脚本中留下注释代码

> ID：10973654
> 
> 赞同：0
> 
> 时间：2012-06-11T01:11:46.107
> 
> 标签：php, mysql

> **可能重复：**
> [如果我们在代码文件中添加太多注释，PHP 会变慢吗？](https://stackoverflow.com/questions/8244369/will-php-be-slower-if-we-add-too-many-comments-in-code-files)

我正在对我的 php 脚本进行调整以提高性能，因此我计划删除除基本必需品之外的所有内容；我不想删除它，因为我可能会再次将其重新引入/或用于存档目的。我的问题是，评论代码与删除代码会有任何显着的性能差异吗？评论代码是否会涉及任何安全风险？

评论代码与将代码留在那里需要多少性能提升？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:16:41.357

不，我认为评论不会对您构成安全威胁，也不应该大大减慢您的执行速度。但是如果你真的担心想要回到旧代码，我建议你研究一个版本控制系统，比如[git](http://git-scm.com/)。注释主要用于提供有关代码的信息，即函数的作用或类的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:15:47.877

我不认为评论代码而不是删除它会产生重大的性能问题。

此外，由于 PHP 正在运行并且代码不可见（除非您计划分发源代码），因此注释代码不应存在安全问题。

# android - 如何正确取消挂起的警报

> ID：10973655
> 
> 赞同：1
> 
> 时间：2012-06-11T01:12:00.650
> 
> 标签：android

我似乎无法找到答案，但是传递匹配`PendingIntent`以从警报中删除的标准是什么？它仅基于 com.blah.package.myclass 之类的名称，还是`Extra`s 重要？

例如，我正在做这样的事情，所有警报都会触发相同的意图：

```
 public void setAlarm(Context context, long nextAlarmMillis) {
        Intent intent = new Intent(context, AlarmReceiver.class);
        intent.putExtra("alarm", this);
        PendingIntent sender = PendingIntent.getBroadcast(context, 1234 /* unused */, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        // Get the AlarmManager service
        AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        am.cancel(sender);
        am.set(AlarmManager.RTC_WAKEUP, nextAlarmMillis, sender);
    } 
```

发生的情况是`Alarm`可以更改类等并作为`Extra`. 我正在取消上一个警报，但我不确定它是否正在执行任何操作，或者是否会保留任何剩余的警报。

有谁肯定知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:23:34.920

以下在`AlarmManager`文档中提到

> 任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

其中，[filterEquals()](http://developer.android.com/reference/android/content/Intent.html#filterEquals%28android.content.Intent%29)定义为：

> 出于意图解析（过滤）的目的，确定两个意图是否相同。也就是说，如果它们的动作、数据、类型、类和类别相同。这不会比较意图中包含的任何额外数据。

我认为最简单的做法是保留`PendingIntent`传递给 AlarmManager 的引用，并将其传递给取消。或者有一个工厂方法来构造这样的 pi。

# objective-c - 如何让实例变量复制一个值

> ID：10973659
> 
> 赞同：-1
> 
> 时间：2012-06-11T01:14:11.100
> 
> 标签：objective-c

问题 1：我如何让实例变量永久复制一个更改的值（在本例中为 self.display.text）而不是指针？

问题 2：我陈述问题的术语是否正确？

我现在开始使用 Obj-c 几个星期了，我遇到了这个问题。我认为部分问题在于我不知道正确的术语（因此很难找到解决方案）。所以这里是：

```
This is a basic calculator program:
    1)User inputs their first number
    2)User presses an action (+, -, *, /)
    2a) first inputted number is saved; display is reset
    3)User inputs second number
    4)User presses enter
    4a) second inputed number is saved; action is performed on the first and second number

This declares my CalculatorViewController.h

@interface CalculatorViewController : UIViewController
@property double firstNumber, secondNumber, result;
@property int actionType;
@property (weak, nonatomic) IBOutlet UILabel *display;
@property BOOL userIsInTheMiddleOfEnteringANumber;
@end

Implementation here...
// method for when someone clicks an action item on the calculator (such as +, -, *, /)
- (IBAction)pressedAction:(UIButton *)sender {

self.firstNumber = [self.display.text doubleValue];

(action type is set here)

NSLog(@"Action Type: %i", self.actionType);
NSLog(@"FN: %f, SN: %f", self.firstNumber, self.secondNumber);

}

// method for when someone clicks enter (and therefore firstNumber and secondNumber are set
- (IBAction)pressedEnter {
self.secondNumber = [self.display.text doubleValue];

NSLog(@"f: %f, s: %f", self.firstNumber, self.secondNumber);
// should do the given action to the self.firstNumber, self.secondNumber here

} 
```

这是我的问题： firstNumber 被设置为指向 self.display.text （这是屏幕上的标签/输出）的指针（术语？），而不是在分配时作为永久副本。因此，当有人点击加号后数字发生变化时，随着输入的数字越来越多，第一个数字也会发生变化。

谢谢您的帮助！对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:23:16.900

> 这是我的问题： firstNumber 被设置为指向 self.display.text （这是屏幕上的标签/输出）的指针（术语？），而不是在分配时作为永久副本。

那不可能是真的。`firstNumber`是一个`double`，而不是一个指针。如果`self.display.text`以后有变化，`firstNumber`就不会变。

您可以在代码中对此进行测试，以亲自查看：

```
self.display.text = @"1.0";
self.firstNumber = [self.display.text doubleValue];
self.display.text = @"2.0";
NSLog(@"firstNumber is: %g", self.firstNumber); 
```

您会看到，即使经过`self.display.text`更改，`self.firstNumber`也不会。

所以，你的问题出在其他地方。也许您的`-pressedAction:`方法被调用的频率比您想象的要多？在 iOS 中，一个按钮在被按下时可能会发送多个动作——也许您复制并粘贴了一个正在发送的按钮，`-pressedAction:`然后您在该按钮上添加了另一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:31:45.060

您描述的问题与您在代码中显示的问题并不真正匹配。您已声明`firstNumber`为双精度：

```
@property double firstNumber; 
```

...它不是指向双精度（或其他任何东西）的指针。当您为其分配一个值时，分配的值将不会再次更改，除非/直到您明确分配一个新值`firstNumber`（假设您没有做任何事情，例如手动创建指针`firstNumber`然后使用指针间接更改值）。

此外，您`firstNumber`通过以下方式分配值：

```
self.firstNumber = [self.display.text doubleValue]; 
```

当您调用`doubleValue`字符串时，当前字符串值被解析并以双精度形式返回。返回值不会以任何方式与字符串耦合，并且不会在字符串文本发生变化时被修改。

所以问题出在代码中的其他地方。这可能与您设置`IBAction`映射的方式有关。您的`firstNumber`属性已针对您所说的行为正确设置，并且您的代码似乎正在正确使用它。

在没有更多上下文的情况下，我能提出的唯一建议是设置一个断点`pressedAction:`以确保它不会被多次调用。这是示例代码中唯一`firstNumber`改变值的地方，因此很明显可以从这里开始查找。

# objective-c - UITableView：如何恢复用户输入

> ID：10973666
> 
> 赞同：0
> 
> 时间：2012-06-11T01:15:51.537
> 
> 标签：objective-c, ios

我有一个带有几个项目的 UITableView，并且我在 UITableView 列表的底部添加了一个显示“没有更多项目”的单元格。我正在阻止重新排序“NMI”单元格，但我仍然可以将其他项目之一拖到“NMI”单元格下方。

当我的视图告诉我：tableView:moveRowAtIndexPath:toIndexPath 时，我不会修改模型并重新排序项目数组。但是，即使我不修改模型，UITableView 仍然反映了新的顺序。

我正在寻找的是一种拒绝 UITableView 更改的方法。因此，当 tableView 说“嘿，用户正在将此行移动到列表的末尾，您应该更新模型”时，控制器可以响应并说“等等，该行不能移动到列表的末尾。不要不要那样做”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:21:33.233

尝试使用此委托方法检查是否允许重新排序。

```
- (BOOL)tableView:(NSTableView *)tableView shouldReorderColumn:(NSInteger)columnIndex toColumn:(NSInteger)newColumnIndex 
```

# haskell - 在 Haskell 中使用签名 IO[(Int, Int)] 编写程序的问题

> ID：10973678
> 
> 赞同：1
> 
> 时间：2012-06-11T01:17:42.377
> 
> 标签：haskell, input, io

我对程序有一个真正的问题，应该用签名 IO[(Int, Int)] 编写。对我来说，作为真正的初学者，很难理解它应该是什么样子。所以，这是任务：您应该编写一个从用户获取行直到空行的过程。之后它应该返回每行长度。我尝试通过示例使其更易于理解

*主要>采取

kdfdfdf

dfdfeer

错误的

[(7,7),(7,0)]

阅读部分是可以理解的，除非它实际上并没有按我的意愿工作

```
Read
 = do
    putStrLn "User, your turn!" 
    line <- getLine
if line==""
    then return ...
    else do
        line <-Read
        return line {- actually doesn't return a line -} 
```

我会很高兴，如果有人让我明白如何写这个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T01:56:08.183

你到底想让 Read 做什么？由于某些原因，它不会编译。您不能命名以大写字母开头的函数或常量，它们是为 Data 构造函数保留的。另外，我相信你知道，但该行在`return ...`Haskell 中不是有效的语法。

如果您只想返回每行的长度，那么我真的不明白为什么您想要一个对列表，那么这样的事情就可以了。

```
lineLengths :: IO [Int]
lineLengths = do
    putStrLn "User, your turn!"
    line <- getLine
    if line == ""
        then return []
        else do
            moreLines <- lineLengths
            return $ (length line) : moreLines 
```

这将提示用户输入一行，如果它是一个空行，那么它将返回一个空列表，假设您不关心停止交互所需的空行的长度。否则，它将递归并将线的长度添加到计算的 lineLengths 列表中。

编辑：

如果你真的想要一个配对列表，我认为最好的方法可能是使用像这样的另一个函数。

```
toPairs :: [Int] -> [(Int,Int)]
toPairs [] = []
toPairs [x] = [(x,0)]
toPairs (x:y:zs) = (x,y) : toPairs zs 
```

然后将其与阅读功能结合起来，我们可以这样做：

```
lineLengthPairs :: IO [(Int,Int)]
lineLengthPairs = do
    ls <- lineLengths
    return $ toPairs ls 
```

# scala - 什么时候初始化包对象？

> ID：10973692
> 
> 赞同：5
> 
> 时间：2012-06-11T01:20:20.347
> 
> 标签：scala, packages

如果我定义一个包对象

```
package com.something.else

package object more {
    val time = System.currentTimeMillis
    // ... other stuff ...
} 
```

然后将其导入源代码中的某处。

```
import com.something.else.more 
```

该对象（及其成员）何时初始化/构造？

换句话说，是什么决定了 的价值`more.time`？
是否在程序首次启动时进行评估？还是第一次访问？还是第一次`more`访问？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T06:01:47.667

很容易检查：

```
package something

package object more {
  val time = System.currentTimeMillis
}

// in separate file:
package something.more

object Test extends App {
  val now = System.currentTimeMillis

  Thread.sleep(1000)

  println(now)
  println(time)
} 
```

给出：

```
1339394348495
1339394349496 
```

第二次是大约 1000 毫秒之后，所以它是第一次访问包对象的时间，就像任何其他对象一样。

# excel - 在 Excel 工作簿中链接来自不同工作表的组合框

> ID：10973693
> 
> 赞同：0
> 
> 时间：2012-06-11T01:20:21.473
> 
> 标签：excel, excel-2007, vba

我在每个工作表上都有一个带有组合框的工作簿，这些组合框链接到相同的数据范围。为了帮助防止错误的数据输入，我想将组合框与相同的数据链接起来。例如，每个工作表都有一个 Country 组合框。当在 Sheet1 上选择 Country 时，我希望它在所有后续工作表上使用 Country 组合框设置 Country 选择。

我正在使用 Excel 2007。任何建议或帮助将不胜感激。我可以让他们使用所选字段进行更新，但他们会丢失所有其他数据，即：从国家范围内提取的其他选项。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:08:07.927

当您的问题是如何从 sheet1 的组合框中选择一个国家/地区并在同一工作簿的所有其他工作表中使用相同的值时，答案是将其他工作表中的单元格引用到 sheet1 中选择的单元格制成。换句话说，从除第一个工作表之外的所有工作表中删除国家选择组合框，并让第一个工作表上的选定国家驱动其他工作表上的数据（例如 sheet1$A$1 或更好地使用定义的名称！）。

或者，您可以为每个工作表创建一个 VBA 脚本 (on_change)，该脚本在该工作表上更改国家代码单元格时执行。该脚本读取最新选定的国家，然后将选定的国家值放入例如 sheet1$A$1 中。不过，您仍然可以从这个单一控制单元 ($A$1) 中引用所有其他工作表。

# php - php组合数组 - 算术添加值

> ID：10973694
> 
> 赞同：0
> 
> 时间：2012-06-11T01:20:27.893
> 
> 标签：php, arrays

如何组合这两个数组，以使键保持不变，但值是通过算术确定的？

注意 - 根据我的示例，键可能并不总是在每个数组中排列：

```
$Array1 = ([4] => 100, [5] => 200, [6] => 100, [7] => 400 );
$Array2 = ([2] => 300, [5] => -100,  [16] => -500, ); 
```

期望的输出：

```
$Array3 = ([2] => 300, [4] => 100, [5] => 100, [6] => 100, [7] => 400, [16] => -500); 
```

编辑：改进数组以突出为什么“foreach”不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T01:28:33.513

您可以[`array_map`](http://php.net/array_map)为此使用：

```
$Array3 = array_map(function($a,$b) {return $a+$b;},$Array1,$Array2); 
```

但是，这仅在两个数组中具有相同键的情况下才有效（在您的示例中，您没有）。

如果这是一个问题，最简单的解决方法可能是：

```
$allKeys = array_merge(array_keys($Array1),array_keys($Array2));
$Array3 = Array();
foreach($allKeys as $k) {
    $Array3[$k] = (isset($Array1[$k]) ? $Array1[$k] : 0)
                 +(isset($Array2[$k]) ? $Array2[$k] : 0);
} 
```

* * *

**编辑**刚刚意识到上面的代码不是最优的。重写：

```
$allKeys = array_unique(array_merge(array_keys($Array1),array_keys($Array2)));
// rest of code as above 
```

实际上不确定重复键的开销是否大于或小于检查唯一性的开销......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T01:31:37.607

您可以`foreach`覆盖每个数组并将它们添加到结果数组中。

```
//$array3 = array();

//foreach($array1 as $k=>$v){
//    $array3[$k] = $v;
//}

$array3 = $array1;

foreach($array2 as $k=>$v){
    $array3[$k] = isset($array3[$k]) ? $array3[$k]+$v : $v;
} 
```

# windows - closehandle API，x64 Windows 上的无效句柄异常

> ID：10973698
> 
> 赞同：3
> 
> 时间：2012-06-11T01:21:31.403
> 
> 标签：windows, debugging, winapi, windows-7-x64

如官方文档（[closehandle API description](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)）所述。

> 如果应用程序在调试器下运行，如果函数接收到无效的句柄值或伪句柄值，它将抛出异常。

因此，以下代码可用于检测程序是否正在调试（因为句柄 0x1 始终无效）。

```
#include "stdafx.h"
#include <windows.h>
#include <stdio.h>
#include <string>

int _tmain(int argc, _TCHAR* argv[]){
    bool flag = false;
    __try {
        CloseHandle((HANDLE)0x1);
    }
    __except (EXCEPTION_EXECUTE_HANDLER) {
        flag = true;
    }
    if (flag == false){
        printf("Not debugged\n");
    }else{
        printf("Debugged\n");
    }
} 
```

我使用 Visual Studio 2008 编译了这段代码，创建了一个 32 位二进制文​​件。

它在 Windows XP 和 Windows 7 32 位上正常工作，但在 Windows 7 64 位上不能工作，因为它总是返回“未调试”。

你知道为什么会这样吗？谢谢你。

# c++ - C++ 字符串到字符串数组的分隔符

> ID：10973702
> 
> 赞同：0
> 
> 时间：2012-06-11T01:22:40.920
> 
> 标签：c++, arrays, string

我有一个将信息输出到类中的文件。具体来说，我试图输出的字符串之一将进入一个向量。问题是我试图采用一个字符串（在这种情况下），它将被格式化：

```
interest_string = "food, exercise, stuff" 
```

所以基本上我想把上面的字符串变成一个数组字符串，或者以某种方式将上面的字符串复制到由逗号分隔符分隔的每个单独字符串中的向量中。

```
void Client::readClients() {
    string line;

    while (getline( this->clients, line ))
    {

        string interest_num_string, interest_string;

        istringstream clients( line );
        getline( clients, this->sex, ' ' );
        getline( clients, this->name, ',' );
        getline( clients, this->phone, ' ' );
        getline( clients, interest_num_string, ' ' );
        getline( clients, interest_string, '.' );

        this->interests = atoi(interest_num_string.c_str());

        cout << this->sex << "\n" << this->name << "\n" << this->phone << "\n" << interest_num_string << "\n" << interest_string;
    }

    this->clients.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:25:30.187

`getline`提示： is的替代签名

`istream& getline ( istream& is, string& str, char delim );`

`strtok`在 C 中也是一个可行的选择，它对低级字符串操作不太残酷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:51:33.140

您可以使用矢量或其他合适的容器。您将需要创建一个“人”类，该类将包含您读入并放入容器中的所有数据。

```
void Client::readClients(std::vector<MyClass*>& myPeople)
{
    //  ... other parts of your code

    // Create a person
    pointerToPerson = new Person();

    // read them in
    getline(clients, pointerToPerson->field, ' ');

    // After you load a person just add them to the vector
    myPeople.push_back(pointerToPerson);

    // more of your code ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T14:25:53.837

简单的 C++ 代码：

```
 string s = "abc,def,ghi";
  stringstream ss(s);
  string a,b,c;
  ss >> a ; ss.ignore() ; ss >> b ; ss.ignore() ; ss >> c;    
  cout << a << " " << b << " " << c << endl; 
```

输出 ：

abc def ghi

# c# - 如何用来自datagridivew1 c#的信息填充datagridview2

> ID：10973704
> 
> 赞同：0
> 
> 时间：2012-06-11T01:23:05.030
> 
> 标签：c#, winforms, datagridview

请帮助我，如何用来自 datagridivew1 的信息填充 datagridview2。例如，我用存储在 datagridview1 上的条形码填充第 1 列（dgv2），填充后，我希望第 2 列（dgv2）填充产品名称（来自 dgv1）..请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:14:34.097

您必须使用 CellContent 和 CelValueChanged 事件才能获得此功能。

# javascript - Javascript 错误：未捕获的 ReferenceError：[函数] 未定义

> ID：10973706
> 
> 赞同：1
> 
> 时间：2012-06-11T01:23:21.703
> 
> 标签：javascript

我有两个 js 文件，都由一个 HTML 文件调用。

```
<script type="text/javascript" src="scripts/levelmovement.js"></script>
<script type="text/javascript" src="scripts/generation.js"></script> 
```

levelmovement.js 的一部分：

```
function moveLevel(){
    if(firstreset == true){
        resetTime();
    }
    var time2 = new Date();
    var millis2 = time2.getTime();
    var millis3 = millis2 - millis1;
    poschange = Math.floor(millis3 / 5);
    for(i = 0; i < chunkpos.length; i++){
        temppos[i] = chunkpos[i] - poschange;
        if(temppos[i] <= -150){
            temppos[i] += 1200;
            generate(i);
        }
        pos = temppos[i];
        document.getElementById('chunk' + i).setAttribute('style','left: ' + pos + 'px;');
    }
} 
```

函数“moveLevel()”的调用如下：

```
window.onload = function(){
    gameLoop();
}

function gameLoop(){
    if(currentscreen == 'playing'){
        moveLevel();
    }
    setTimeout('gameLoop()',1);
} 
```

整个 generation.js ：

```
var generatedtop;
var howtogentop = 'gen';
var howtogenbottom = 'gen';
var chunktogenerate = 0;

function topGen(g){
    document.getElementById('t' + chunktogenerate).setAttribute('src','images/terrain/t' + g + '.png');
    if(g == 'gap0'){
        howtogentop = 'gap';
    }
    else{
        howtogentop = 'gen';
    }

    if(g == 'gap0' || g == 'gap2'){
        generatedtop = 'gap';
    }
    else{
        generatedtop = 'default';
    }
}

function bottomGen(g){
    document.getElementById('b' + chunktogenerate).setAttribute('src','images/terrain/b' + g + '.png');
    if(g == 'gap0'){
        howtogenbottom = 'gap';
    }
    else{
        howtogenbottom = 'gen';
    }
}

function generate(chunknum){
    chunktogenerate = chunknum;
    var rand1 = Math.floor(Math.random()*100)+1;
    var rand2 = Math.floor(Math.random()*100)+1;
    if(howtogentop == 'gen'){
        if(rand1 <= 25){
            topGen('space');
        }
        if(rand1 <= 50 && rand1 > 25){
            topGen('jump');
        }
        if(rand1 <= 75 && rand1 > 50){
            topGen('slide');
        }
        if(rand1 > 75){
            topGen('gap0');
        }
    }
    if(howtogentop == 'gap'){
        topGen('gap2');
    }

    if(howtogenbottom == 'gen'){
        if(generatedtop == 'gap'){
            if(rand2 <= 33){
                bottomGen('space');
            }
            if(rand2 <= 66 && rand2 > 66){
                bottomGen('jump');
            }
            if(rand2 > 66){
                bottomGen('gap0');
            }
        }
        if generatedtop != 'gap'){
            if(rand2 <= 25){
                bottomGen('space');
            }
            if(rand2 <= 50 && rand2 > 25){
                bottomGen('jump');
            }
            if(rand2 <= 75 && rand2 > 50){
                bottomGen('jump');
            }
            if(rand2 > 75){
                bottomGen('gap0');
            }
        }
    }
    if(howtogenbottom == 'gap'){
        bottomGen('gap2');
    }
} 
```

我检查了所有内容，“moveLevel()”只有在我删除这行代码时才有效：

```
generate(i); 
```

好像浏览器看不到“generate()”函数，我不知道为什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T01:37:38.437

这一行：

```
if generatedtop != 'gap'){ 
```

缺少一个括号。正确的是：

```
if(generatedtop != 'gap'){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T10:02:25.830

我来到这个页面寻找解决我遇到的类似问题的方法。尽管此页面没有直接帮助，但给出了解决问题的方向。

**这是发生这种情况的实际原因：**

当您在 js 文件中调用 file1.js 中的函数时，您正在另一个 js 文件中调用 file2.js，即使它们在同一个 html 页面上调用，**如果出现任何 js 错误**，该函数也将不起作用整个file1.js，**如果它有错误，它就像整个js文件根本不包括在内**。

所以解决方案是清理所有包含的 js 文件中的所有 js 错误。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T01:27:52.717

那是因为您在定义之前调用了该函数。更改加载 js 文件的顺序应该可以解决问题。

```
<script type="text/javascript" src="scripts/generation.js"></script>
<script type="text/javascript" src="scripts/levelmovement.js"></script> 
```

# cassandra - pycassa 从超级列中删除特定键

> ID：10973710
> 
> 赞同：3
> 
> 时间：2012-06-11T01:24:27.240
> 
> 标签：cassandra, pycassa

我知道如何删除整个超级列，但不是其中的单个键。我的谷歌功夫让我失望了。

所以，要删除一个超级列：

```
cf_accounts.remove('key', ['super_column']) 
```

我在吠叫错误的树吗？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T17:58:19.757

您需要使用该`super_column`参数。

```
cf.remove('key', super_column='super_column', columns=['sub_column']) 
```

话虽如此，@保罗的建议绝对是合理的。

# api - 公有和私有 API 密钥

> ID：10973711
> 
> 赞同：0
> 
> 时间：2012-06-11T01:25:18.363
> 
> 标签：api, hash, hmac, api-key

我正在开发一个需要这种类型的身份验证的 API 系统。用户将发送一个带有其 id、数据和散列（使用私钥散列的数据）的 HTTP 请求，然后在服务器中检查散列是否与此处的相同过程匹配。
是否像实施必须的那样？
我将使用客户端的 id 作为公钥，但是生成随机数的私钥 sha256 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:47:37.717

这不是私钥/公钥密码术。在这样的系统中，客户端将加密**整个数据**，然后您将使用您的私钥对其进行解密。你永远不会把你的私钥给客户。

您正在做的是请求签名。你给一个“秘密”（你称之为“私钥”），然后他们用它来生成一个散列。然后您可以检查服务器上的哈希，因为您也知道秘密。

在这种系统中不会有公钥。您通常使用会话密钥或令牌来识别客户端，因此客户端需要首先进行身份验证（这意味着您需要一些身份验证方法）。本质上，您要实现的是 OAuth。也许看看图书馆，看看你是否可以直接使用它 - [http://oauth.net/documentation/getting-started/](http://oauth.net/documentation/getting-started/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:17:12.503

checking out what [amazon s3](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#ConstructingTheAuthenticationHeader) is doing for the authentication might be a good start

basically they are doing the same thing as you proposed, and they use RFC 2104HMAC-SHA1 for the hashing. The implementation depends on your choice of languages.

# datamodel - 找到选定的行

> ID：10973716
> 
> 赞同：1
> 
> 时间：2012-06-11T01:27:10.780
> 
> 标签：datamodel

我在核心 JSF 书中找到了以下示例，该示例使用数据模型查找选定的行然后将其删除。

但是我在这一行中发现了一个错误 names.remove(nameToDelete);

你能帮我解决这个问题吗？

```
package com.jsf.model;

import java.io.Serializable;

import javax.faces.model.ArrayDataModel;
import javax.faces.model.DataModel;

public class TableData implements Serializable {

    private static final Names[] names = new Names[] {
        new Names("William", "Dupont"),
        new Names("Anna", "Keeney"),
        new Names("Mariko", "Randor"),
        new Names("John", "Wilson")
    };

    private DataModel<Names> model = new ArrayDataModel<Names>(names);
    public DataModel<Names> getNames() { return model; }

    public String deleteRow() {
        Names nameToDelete = model.getRowData();
        names.remove(nameToDelete);
        return null;
    }
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:42:47.870

您正在调用`remove()`名称，一组名称。数组没有指定删除函数 - 你想在模型上调用它。

# java - 二叉树：一些子节点为空，其他的不是

> ID：10973720
> 
> 赞同：0
> 
> 时间：2012-06-11T01:27:54.353
> 
> 标签：java, binary-tree

我正在编写一个转换为摩尔斯电码的程序，反之亦然。我使用树来更有效地搜索代码或相关值。Morse 和相关值从文件读入静态数组。索引 0 是所有其他子树的根，实际上是一个连接到左子树 (index[1]) 和右子树 (index[16]) 的虚拟节点。

读入节点后，我通过遍历静态数组并在执行过程中分配节点来链接子节点。索引 [2] - [16] 保存左子树。索引 [17] - (alphaTree.length - 1) 持有右子树。

这是我的问题：在尝试分配所有子节点时，其中一些在我打印出来时为空。节点本身不是空的，只是子节点。

我注意到一个模式，但不知道如何修复它。

下面是示例输出。输出很大，所以我把它剪掉了，但留得足够多，这样你就可以明白我的意思了：

```
Element left 0: -, t
Element right 0: *, e
Element left 1: null
Element right 1: null
Element left 2: --, m
Element right 2: null
Element left 3: null
Element right 3: -*, n
Element left 4: ---, o
Element right 4: null
Element left 5: null

. . .

Element right 25: null
Element left 26: null
Element right 26: *-**, l
Element left 27: **--, ö
Element right 27: null
Element left 28: null
Element right 28: **-*, f
Element left 29: ***-, v
Element right 29: null 
```

以下是我用来填充静态数组的文件。因为树中有特殊字符，所以我使用 ASCII 并在读取文件时进行转换：

```
- 116
-- 109
-* 110
--- 111
--* 103
-*- 107
-** 100
---- 247 
---* 246
--*- 113
--** 122
-*-- 121
-*-* 99
-**- 120
-*** 98
* 101
*- 97
** 105
*-- 119
*-* 114
**- 117
*** 115
*--- 106
*--* 112
*-*- 228
*-** 108
**-- 246
**-* 102
***- 118
**** 104 
```

下面是我用来填充树和链接节点的代码。linkLeftTree() 和 linkRightTree() 是将父节点与其子节点链接的方法。节点在 open() 方法中被读入数组。

```
package MorseTrees;

import MorseTrees.Nodes.*;
import java.util.*;
import java.io.*;

public class TreePopulater {
    private static final int ALPHABET = 31;
    private static final String alphaRaw = "alphatree2.txt";    
    private static final A_Node[] alphaTree = new AlphaNode[ALPHABET];
    private A_Node aNode;

    public TreePopulater() {
        alphaTree[0] = new AlphaNode("000");
        alphaTree[0].setAlpha('0'); 
        populateRaw(alphaRaw);
    }

    private A_Node[] populateRaw(String treeType)
    {   
        // open and fill static array
        open(treeType);
    }

    private void open(String fileName) {

        //try, catch, etc.
        Scanner in = new Scanner(new File(fileName));
     int counter = 1;

   while (in.hasNextLine()) {
      aNode = new AlphaNode(in.next());
      aNode.setAlpha((char) in.nextInt());
           alphaTree[counter] = aNode;

      counter++;
   }

        linkNodes();
    }

    private void linkNodes() {  
        // force link root node 
        alphaTree[0].setLeft(alphaTree[1]);
        alphaTree[0].setRight(alphaTree[16]);

        linkLeftTree();
        linkRightTree();
        printChildren();
    }

    public void linkLeftTree()
    {
        // link the left, or first half, of the array
        for (int i = 2; i < (alphaTree.length / 2); i++) // or 16
        {   
            alphaTree[i].setLeft(alphaTree[(i++)]);
            alphaTree[i].setRight(alphaTree[(i)]);
        }
    }

    public void linkRightTree()
    {
        // link the right, or second half, of the array
        for (int i = 17; i <= alphaTree.length - 1; i++)
        {
            alphaTree[i].setLeft(alphaTree[(i++)]);
            alphaTree[i].setRight(alphaTree[(i)]);  
        }   
    }

    public void printChildren()
    {
        for (int i = 0; i < alphaTree.length - 1; i++)
        {
            System.out.println("Element left " + i + ": " + alphaTree[i].leftChild());
            System.out.println("Element right " + i + ": " + alphaTree[i].rightChild());
        }   
    }

    public static void main(String[] args)
    {
        TreePopulater tp = new TreePopulater();
    }
} 
```

节点类 AlphaNode 扩展了 A_Node。A_Node 看起来像您所期望的那样：左右子节点的实例变量，莫尔斯电码和与之关联的字母，以及所需的所有 getter 和 setter。

奇怪的是，如果我在 linkLeftTree() 和 linkRightTree() 中的设置器上使用 System.out.println()，我在循环中看不到空值，但当我实际尝试访问子节点时仍然有空值（如例如预订搜索）。

（功劳归于功劳：本程序中实现的字母树是基于 Charles Petzold 在《代码》一书中优化的树。但这里所有的代码都是你写的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:31:58.870

我对以下代码表示怀疑：

```
 public void linkLeftTree()
    {
        // link the left, or first half, of the array 
        // NOTE: the code runs for i=2,4,8,10,12,14 so many nodes have the left
        //      and right neighbors unassigned
        for (int i = 2; i < (alphaTree.length / 2); i++) // or 16
        {   // NOTE:
            // This should alphaTree[i].setLeft(alphaTree[i+1])
            // Since you are changing the value of i twice 
            // A good idea is to print i and verify the values
            alphaTree[i].setLeft(alphaTree[(i++)]);
            alphaTree[i].setRight(alphaTree[(i)]);
        }
    }

    public void linkRightTree()
    {
        // link the right, or second half, of the array
        //NOTE: the code runs for i=17,19.. so many nodes have the left
        //      and right neighbors unassigned
        for (int i = 17; i <= alphaTree.length - 1; i++)
        {
            // Same as above
            alphaTree[i].setLeft(alphaTree[(i++)]);
            alphaTree[i].setRight(alphaTree[(i)]);  
        }   
    } 
```

我不确定哪些索引特定于您的算法，但我想我回答了您与出现的空值相关的问题。

一切顺利！你自己解决问题真是太好了..:-)

五

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-18T19:14:29.077

*（代表 OP 发布）*。

我更改了 printChildren() 方法以打印出父节点，并意识到我将父母自己分配为他们自己的孩子（例如：n 成为 n 的孩子）。在其他情况下，我完全跳过了节点。这是因为我在 for 循环中使用了 i 变量。

下面的代码已经解决了这个问题，并且完全符合我的要求。这是一个可怕的、不优雅的 hack，但是当我回去重构它时，我会想办法让它更干净。解决方案来自 linkLeftTree() 和 linkRightTree() 方法。我意识到我不应该将子节点分配给叶子，所以我减少了在这两种情况下循环通过的节点数量，并使用计数器来分配子节点。

```
public void linkLeftTree() {    
    int counter = 2;
    int counter2 = 3;

        // link the left, or first half, of the array

    for (int i = 1; i < 8; i++) {   
    alphaTree[i].setLeft(alphaTree[(counter++)]);
    alphaTree[i].setRight(alphaTree[(counter2++)]);

              if (counter <= 13) {
         counter++;
             counter2++;
    }
    }
}

public void linkRightTree() {
    int counter = 16;
    int counter2 = 17;

    // link the right, or second half, of the array
    for (int i = 16; i < (24); i++) {   
        alphaTree[i].setLeft(alphaTree[(counter++)]);
        alphaTree[i].setRight(alphaTree[(counter2++)]);

        if (counter < 29) { 
            counter++;
            counter2++;
        }
    }
} 
```

我的递归搜索和打印也按预期工作，我几乎完成了程序的编写。现在开始清理它的过程。感谢所有花时间看这个的人！

# java - JButton 设置位置不起作用

> ID：10973721
> 
> 赞同：2
> 
> 时间：2012-06-11T01:28:14.027
> 
> 标签：java, swing, jframe, jbutton, layout-manager

我是 Java 新手。我正在尝试移动`JButton`当前居中的 a，因此我将位置更改为静态位置并且它没有移动。任何的想法？

```
public Main(BufferedImage image) {
    this.image = image;
}

protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    // Draw image centered.
    int x = (getWidth() - image.getWidth())/2;
    int y = 0;//(getHeight() - image.getHeight())/2;
    g.drawImage(image, x, y, this);
}

public static void main(String[] args) throws IOException {
    String path = "img/visualizerLogo3.jpg";
    BufferedImage image = ImageIO.read(new File(path));
    Main contentPane = new Main(image);
    contentPane.setOpaque(true);
    contentPane.setLayout(new GridBagLayout());
    JButton submit = new JButton("Load File");
    submit.setLocation(600, 800);
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setContentPane(contentPane);
    f.setSize(1200,1000);
    //f.setLocation(200,200);
    f.setVisible(true);
    f.add(submit);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T01:36:50.317

GridBagLayout 指示 JButton 的位置。要自由定位它，您应该将内容窗格的布局设置为 null（默认情况下它是水平 FlowLayout）。

```
public static void main(String[] args) throws IOException {
    String path = "img/visualizerLogo3.jpg";
    BufferedImage image = ImageIO.read(new File(path));
    Main contentPane = new Main(image);
    contentPane.setOpaque(true);
    contentPane.setLayout(null);
    JButton submit = new JButton("Load File");
    submit.setLocation(600, 800);
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setContentPane(contentPane);
    f.setSize(1200,1000);
    //f.setLocation(200,200);
    f.setVisible(true);
    f.add(submit);
} 
```

# android - 以编程方式无法在 RelativeLayout 中对齐 ImageView

> ID：10973730
> 
> 赞同：5
> 
> 时间：2012-06-11T01:30:22.027
> 
> 标签：android, android-layout

我在将图像视图添加到相对布局时遇到问题。我想将图像添加到我使用RelativeLayout 动态创建的菜单项列表中。我的所有菜单项都按顺序显示得很好，但是当我尝试为每个项目添加图像时，我只得到一个箭头并且它没有垂直居中。下面是我的代码。

在我的 XML 文件中

```
<RelativeLayout 
            android:id="@+id/pMenu"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        </RelativeLayout> 
```

在我的代码中：

```
private void buildMenu(String name, int id) {

    String[] menuItems = getResources().getStringArray(pMenus[id]);
    // Get the rel layout from xml
    RelativeLayout container = (RelativeLayout) findViewById(R.id.pMenu);

    int imageId=1;
    Typeface tf = Typeface.createFromAsset(this.getAssets(),"mreavesmodot-reg.otf");
    for(String menuItem: menuItems) {           

        // Defining the layout parameters
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        StyledButton menuImage = new StyledButton(this);
        menuImage.setBackgroundResource(R.drawable.menu_button);
        menuImage.setText(menuItem);
        menuImage.setTypeface(tf);
        menuImage.setTextSize(19);
        menuImage.setPadding(20, 0, 0, 0);
        menuImage.setTextColor(Color.WHITE);
        menuImage.setGravity(Gravity.LEFT | Gravity.CENTER_VERTICAL);
        menuImage.setOnClickListener(getOnClickListener(menuImage, name));
        menuImage.setId(imageId);

        if(imageId==1) {
            lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        } else {
            lp.addRule(RelativeLayout.BELOW ,imageId-1);
        }
        menuImage.setLayoutParams(lp);

        ImageView arrow = new ImageView(this);
        arrow.setImageResource(R.drawable.arrow_menu);
        arrow.setPadding(0, 0, 15, 0);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.WRAP_CONTENT, 
                RelativeLayout.LayoutParams.WRAP_CONTENT );
        params.addRule(RelativeLayout.ALIGN_RIGHT,menuImage.getId());
        params.addRule(RelativeLayout.CENTER_VERTICAL);

        arrow.setLayoutParams(params);

        container.addView(menuImage);
        container.addView(arrow);

        imageId++;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:11:03.443

我认为下面的行是你的问题

```
params.addRule(RelativeLayout.CENTER_VERTICAL); 
```

是的，您很可能会添加多个箭头，它们只是彼此重叠的一个，所有箭头都与完整相对布局的垂直中心对齐。该命令不是针对您的按钮项执行垂直居中，而是针对父级 RelativeLayout。

# php - 加密和散列的最佳常见做法是什么？

> ID：10973733
> 
> 赞同：0
> 
> 时间：2012-06-11T01:31:03.830
> 
> 标签：php, hash

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我目前是一名学生，我渴望成为一名出色的开发人员。我目前正在练习如何正确加密和散列数据到数据库。

这是我当前的实现：

登录索引.php

```
<?php

//Takes a password and returns the salted hash
//$password - the password to hash
//returns - the hash of the password (128 hex characters)
function HashPassword($password)
{
    $salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM)); //get 256 random bits in hex
    $hash = hash("sha256", $salt . $password); //prepend the salt, then hash
    //store the salt and hash in the same string, so only 1 DB column is needed
    $final = $salt . $hash; 
    return $final;
}

//Validates a password
//returns true if hash is the correct hash for that password
//$hash - the hash created by HashPassword (stored in your DB)
//$password - the password to verify
//returns - true if the password is valid, false otherwise.
function ValidatePassword($password, $correctHash)
{
    $salt = substr($correctHash, 0, 64); //get the salt from the front of the hash
    $validHash = substr($correctHash, 64, 64); //the SHA256
    echo $salt ."    salt" ."<br/> ";
    echo $validHash . " hash " ."<br/> ";
    echo $correctHash . " password " ."<br/> ";

    $testHash = hash("sha256", $salt . $password); //hash the password being tested

    //if the hashes are exactly the same, the password is valid
    return $testHash === $validHash;
}

?>

<?php
include 'login_config.php';
if(isset($_POST['login']))
{
    $password = $_POST['password'];
    $email = $_POST['email'];
    $Get_User = "Select * From users Where Email = '$email'";
    $hashed_password = "";
    $result = mysql_query($Get_User);
    if(mysql_num_rows($result) > 0)
    {
        while($row = mysql_fetch_array($result))
        {
            $hashed_password = $row['password'];

        }
    }

    $valid = ValidatePassword($password,$hashed_password);

    if($valid)
    {
        echo "<br/>";
        echo "Yes,Login successful";
    }
    else
    {
        echo "<br/>";
        echo "Oops,Wrong Email or Password";
    }
}
?>

<form action="" method="post">
Email: <input type="text" name="email" /><br />
Password: <input type="password" name="password" /><br />
<input type="submit" name="login" />
</form> 
```

login_create.php

```
<form action="" method="post">
Firstname: <input type="text" name="fname" /><br />
Lastname: <input type="text" name="lname" /><br />
Email: <input type="text" name="email" /><br />
Password: <input type="password" name="password" /><br />
<input type="submit" name="save" />
</form>

<?php

include 'login_config.php';

function HashPassword($password)
{
    $salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM)); //get 256 random bits in hex
    $hash = hash("sha256", $salt . $password); //prepend the salt, then hash
    //store the salt and hash in the same string, so only 1 DB column is needed
    $final = $salt . $hash; 
    return $final;

}

if(isset($_POST['save']))
{
    $fname = $_POST['fname'];
    $lname = $_POST['lname'];
    $email = $_POST['email'];
    $password = HashPassword($_POST['password']);

    $insert = "Insert Into users (Fname,Lname,Email,Password) Values ('$fname','$lname','$email','$password')";
    $query = mysql_query($insert);

}

?>

</form> 
```

我想知道如何进一步改进我目前的实施，以便我进一步发展我的技能，同时向专家/专业人士学习。我是否至少以某种方式正确实现了散列？

先生/女士，您的回答将有很大帮助，我们将不胜感激。谢谢++

# c# - 如何使用 HttpRequest 使用 post 方法发送变量？

> ID：10973734
> 
> 赞同：2
> 
> 时间：2012-06-11T01:31:09.190
> 
> 标签：c#, httpwebrequest, http-headers, microsoft-metro

首先，检查我试图做的这条消息：

```
Login

To log on to Windows8 service is through the URL: http://app.proceso.com.mx/win8/login

This URL HTTP Request Method receives POST variables user and pass. The variable user is the user's email and pass the variable is the same password. In the event that the user or password are invalid return plain text number zero 0, in the opposite case, that the username and password are valid return plain text an alphanumeric string of 32 characters, as this b17f27a16589fee247c666da6ed15569, this string is the hash of the valid user valid and will run from 00:00 hours to 23:59 hours the day it was generated.

To test the URL was created: http://app.proceso.com.mx/win8/login_test 

Note: It should be clear that the hash generated will only be valid for Windows8 service to the user that gender and the effect from 00:00 hours to 23:59 on the day it was generated.

Note: All services generate text in UTF-8 
```

这是一个测试帐户：

*   **用户：** javier.lopez.contreras10@gmail.com
*   **通行证：** policarpio20

因此，如果您在此页面中设置数据：http: [//app.proceso.com.mx/win8/login_test](http://app.proceso.com.mx/win8/login_test)您将收到一个哈希码。

这就是我试图在 Metro 应用程序中实现的目标，但我在这种情况下感到迷茫。我不知道发送这些数据来接收哈希码。我正在使用 HttpClient 和 HttpContent 但我不确定。

提前致谢。

**更新：**感谢 dharnitski 的代码，现在我正在为 Win8 CP 修改此代码：

```
 // this is what we are sending
        string post_data = "user=javier.lopez.contreras10@gmail.com&pass=policarpio20";

        // this is where we will send it
        string uri = "http://app.proceso.com.mx/win8/login";

        // create a request
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";

        // turn our request string into a byte stream
        byte[] postBytes = Encoding.UTF8.GetBytes(post_data);

        // this is important - make sure you specify type this way
        request.ContentType = "application/x-www-form-urlencoded";
        Stream requestStream = await request.GetRequestStreamAsync();

        // now send it
        requestStream.Write(postBytes, 0, postBytes.Length);

        // grab te response and print it out to the console along with the status code
        WebResponse response = await request.GetResponseAsync();
        //var a = new StreamReader(response.GetResponseStream()).ReadToEnd();
        StreamReader requestReader = new StreamReader(response.GetResponseStream());
        String webResponse = requestReader.ReadToEnd(); 
```

我意识到，HttpWebRequest 不包含 ProtocolVersion 并且在这一行中向我抛出了这个错误：

```
WebResponse response = await request.GetResponseAsync();
// ERROR: The remote server returned an error: (417) Expectation Failed. 
```

如果我可以修改协议版本，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:58:17.873

这是在 C# 中实现 HTTP POST 的示例代码

[http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/](http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/)

**重要提示：**您必须将网页切换到 HTTPS (SSL)。发送未加密的密码是非常糟糕的做法。

# php - 在 Dreamweaver 中创建表单并以 PDF 格式提交

> ID：10973737
> 
> 赞同：0
> 
> 时间：2012-06-11T01:31:39.850
> 
> 标签：php, html, forms, pdf, dreamweaver

我正在为父亲的业务提供一些技术方面的帮助，但似乎无法为看似简单的任务找到答案。他给了我几张打印出来的表格，他想把它们放在他的网站上供客户填写，而不是让他们亲自填写，然后每次都将表格扫描成 PDF。

我已经想出了如何在 Dreamweaver 中创建表单并提交到电子邮件，但我正在尝试找出一种通过电子邮件将表单作为附件 PDF 文件提交的方法，该文件显示表单的内容与它看起来完全一样网站（徽标、字段等），同时使用唯一名称（例如表单上的姓氏或日期）保存。

我对 PHP 有一点经验，但还不足以弄清楚如何为此目的编写脚本，甚至不知道从哪里开始这样的任务。任何建议或意见，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:40:23.650

Consider using [PDFlib](http://www.pdflib.com/products/pdflib-family/) as a PHP library to do this. Refer to [This guide](http://www.php.net/manual/en/pdf.installation.php) to install it. All of the functions I will mention are from php.net

First, you'll need to call [PDF_begin_document](http://www.php.net/manual/en/function.pdf-begin-document.php) to begin the document under a specified filename. You may then use [PDF_setfont()](http://www.php.net/manual/en/function.pdf-setfont.php) to set the font to use(Refer to [http://www.php.net/manual/en/function.pdf-setfont.php#10254](http://www.php.net/manual/en/function.pdf-setfont.php#10254) for the core fonts you don't need to embed, it looks as if they may not support size>12)

Create a page with [PDF_begin_page_ext()](http://www.php.net/manual/en/function.pdf-begin-page-ext.php)

You can then use [PDF_add_textflow()](http://www.php.net/manual/en/function.pdf-add-textflow.php) to add text from strings(Use string manipulation as it is easier then groping 5-subroutine-deep with textflows, I think \n is supported)

End the page after adding your textflows with [PDF_end_page_ext()](http://www.php.net/manual/en/function.pdf-end-page-ext.php)

Be sure to use [PDF_end_document()](http://www.php.net/manual/en/function.pdf-end-document.php) to end the document. When you began the document, it took a filename. You will find the PDF there.

# python - Django 模型 DateField to_python

> ID：10973748
> 
> 赞同：1
> 
> 时间：2012-06-11T01:34:55.807
> 
> 标签：python, django, validation, model, django-admin

我正在研究 Django 1.4，我有以下疑问。在 Django Admin 上解析日期时，格式应为“%Y-%m-%d”格式。我刚刚检查了代码，django 模型 DateField 没有使用设置来检查“to_python”的有效日期。

例如，目前唯一有效的格式是：

```
&fecha_inicio__lte=2012-06-10 
```

但我也想要：

```
&fecha_inicio__lte=06/10/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:53:40.793

您可以使用此函数来转换日期：

```
import re

def parse_slash_date(value):
    m = re.match(r'^(?P<day>[0-9]{1,2})/(?P<month>[0-9]{1,2})/(?P<year>[0-9]{4})$', value)
    if m:
        return '%s-%s-%s' % (
            m.group('year'), m.group('month'), m.group('day')) 
```

例子：

```
In [4]: parse_slash_date('06/10/2012')
Out[4]: '2012-10-06' 
```

您还可以创建一个使用解析器的 DateField：

```
class YourDateField(models.DateField):
    def get_prep_lookup(self, lookup_type, value):
        if value and '/' in value:
            value = parse_slash_date(value)
        return super(YourDateField, self).get_prep_lookup(
            lookup_type, value) 
```

但是，我很确定 DateField 已经能够解析带有斜杠的日期......但我只是阅读了 django.utils.dateparse.parse_date 的代码，但它没有。

# asp.net - Northwind.sdf 未在简单示例应用程序中更新

> ID：10973750
> 
> 赞同：0
> 
> 时间：2012-06-11T01:35:03.123
> 
> 标签：asp.net, sql-server, webforms

我正在[研究 ASP.NET Webforms 上这个复数视频的“演示：使用 SqlDataSource 绑定数据”。](http://www.pluralsight-training.net/microsoft/players/PSODPlayer?author=dan-wahlin&name=webforms-03&mode=live&clip=0&course=aspdotnet-webforms4-intro)

与数据库的所有通信都可以正常工作，只是在进行更新时它不会改变。我所做的与视频唯一不同的是使用 Northwind.sdf 而不是 Northwind.mdf。该数据库存在于项目目录中，该目录位于我在win7上的用户目录下——所以它不应该是权限问题。

什么可能阻止它更新？

如果有人想尝试示例应用程序，我[在 mediafire 上上传了整个项目文件夹。](http://www.mediafire.com/?aryzf4uzbz1at7p)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:38:22.387

也许您有两个数据库副本。您正在更新副本 A，然后检查副本 B。

或者，这可能是此处描述的原因之一：[http ://weblogs.asp.net/stevewellens/archive/2009/10/16/why-sql-updates-fail-three-reasons.aspx](http://weblogs.asp.net/stevewellens/archive/2009/10/16/why-sql-updates-fail-three-reasons.aspx)

# asp.net-mvc - 通过身份验证在 ASPNET MVC 中提供 iCalendar 文件

> ID：10973751
> 
> 赞同：2
> 
> 时间：2012-06-11T01:35:41.630
> 
> 标签：asp.net-mvc, icalendar

我正在尝试在我的 MVC 应用程序中提供 iCalendar 文件 (.ics)。

到目前为止，它工作正常。我有一部 iPhone 订阅了日历的 URL，但现在我需要为每个用户提供个性化的日历。

在 iPhone 上订阅日历时，我可以输入用户名和密码，但我不知道如何在我的 MVC 应用程序中访问它们。

我在哪里可以找到有关身份验证如何工作以及如何实施的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:55:51.987

事实证明，基本身份验证是必需的。我有一半的工作，但我的 IIS 配置妨碍了。因此，在没有 Authorization 标头时简单地返回 401 响应会导致客户端（例如 iPhone）需要用户名/密码来订阅日历。

在有 Authorization 请求标头的请求的授权上，可以处理基本身份验证，从 base 64 编码字符串中检索用户名和密码。

下面是一些对 MVC 有用的代码：

```
public class BasicAuthorizeAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        var auth = filterContext.HttpContext.Request.Headers["Authorization"];

        if (!String.IsNullOrEmpty(auth))
        {
            var encodedDataAsBytes = Convert.FromBase64String(auth.Replace("Basic ", ""));
            var value = Encoding.ASCII.GetString(encodedDataAsBytes);
            var username = value.Substring(0, value.IndexOf(':'));
            var password = value.Substring(value.IndexOf(':') + 1);

            if (MembershipService.ValidateUser(username, password))
            {
                filterContext.HttpContext.User = new GenericPrincipal(new GenericIdentity(username), null);
            }
            else
            {
                filterContext.Result = new HttpStatusCodeResult(401);
            }
        }
        else
        {
            if (AuthorizeCore(filterContext.HttpContext))
            {
                var cachePolicy = filterContext.HttpContext.Response.Cache;
                cachePolicy.SetProxyMaxAge(new TimeSpan(0));
                cachePolicy.AddValidationCallback(CacheValidateHandler, null);
            }
            else
            {
                filterContext.HttpContext.Response.Clear();
                filterContext.HttpContext.Response.StatusDescription = "Unauthorized";
                filterContext.HttpContext.Response.AddHeader("WWW-Authenticate", "Basic realm=\"Secure Calendar\"");
                filterContext.HttpContext.Response.Write("401, please authenticate");
                filterContext.HttpContext.Response.StatusCode = 401;
                filterContext.Result = new EmptyResult();
                filterContext.HttpContext.Response.End();
            }
        }
    }

    private void CacheValidateHandler(HttpContext context, object data, ref HttpValidationStatus validationStatus)
    {
        validationStatus = OnCacheAuthorization(new HttpContextWrapper(context));
    }
} 
```

然后，我的控制器操作如下所示：

```
[BasicAuthorize]
public ActionResult Calendar()
{
    var userName = HttpContext.User.Identity.Name;
    var appointments = GetAppointments(userName);
    return new CalendarResult(appointments, "Appointments.ics");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T12:29:17.760

我发现这真的很有帮助，但是我在开发过程中遇到了一些问题，我想我会分享其中的一些来帮助其他人节省一些时间。

我正在寻找从我的 web 应用程序获取数据到 android 设备的日历中，并且我正在使用 discountasp 作为托管服务。

我遇到的第一个问题是验证在上传到服务器时不起作用，奇怪的是它接受了我的控制面板登录为 discountasp，但不接受我的表单登录。

对此的答案是关闭 IIS 管理器中的基本身份验证。这解决了这个问题。

其次，我用来将日历同步到 android 设备的应用程序称为 iCalSync2 - 它是一个不错的应用程序，并且运行良好。但是我发现它只有在文件作为 .ics 交付时才能正常工作（出于某种原因，我把它作为 .ical .. 它一定是迟到了）而且我还必须选择 webcal 选项

最后我发现我必须在我的网址的开头添加 webcal:// 而不是 http://

还要小心，因为上面发布的代码忽略了角色输入变量并且始终不传递任何内容，因此您可能需要在日历例程中进行一些基于角色的检查，或者修改上面的代码以处理角色变量。

# iphone - 从属性列表中检索嵌套的 NSDictionary

> ID：10973753
> 
> 赞同：3
> 
> 时间：2012-06-11T01:36:06.253
> 
> 标签：iphone, objective-c, ios, ios5

我想将数据保存在一个视图的属性列表中，并在另一个视图中检索它。我保存的数据结构如下所示：

键：（NSString）值（NSDictionary）

`NSDictionary`仅包含键和值的字符串。每当按下按钮时，我都会触发此方法来进行保存：

```
- (IBAction)saveRSSItem:(id)sender {

    NSMutableDictionary *dictionary;

    if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]){
        dictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:[self dataFilePath]];
    }
    else {
        dictionary = [[NSMutableDictionary alloc] init];
    }

    //Create Dictionary to store RSSItem information
    NSMutableDictionary *RSSdictionary = [[NSMutableDictionary alloc] init];

    if (self.selectedItem.title)
        [RSSdictionary setValue:@"title" forKey:self.selectedItem.title];

    if (self.selectedItem.summary)
        [RSSdictionary setValue:@"summary" forKey:self.selectedItem.summary];

    if (self.selectedItem.author)
        [RSSdictionary setValue:@"author" forKey:self.selectedItem.author];

    if (self.selectedItem.date)
        [RSSdictionary setValue:@"date" forKey:self.selectedItem.date];

    if (self.selectedItem.content)
        [RSSdictionary setValue:@"content" forKey:self.selectedItem.content];

    //Add saved RSSItem to dictionary
    [dictionary setValue:RSSdictionary forKey:self.selectedItem.title];

    //Overwrite the updated dictionary in the property list
    NSURL *url = [[NSURL alloc] initFileURLWithPath:[self dataFilePath]];
    [dictionary writeToURL:url atomically:YES];
} 
```

当我尝试检索数据时，我会执行以下操作：

```
NSDictionary *savedRSSItemsDictionary = [NSDictionary dictionaryWithContentsOfFile:[self propertyListFilePath]];
NSDictionary *RSSDictionary = [savedRSSItemsDictionary objectForKey:[savedRSSItemsArray objectAtIndex:indexPath.row]]; 
```

第一行检索根字典。第二行检索属性列表中第一行的值（即 an `NSDictionary`）。

但是，我不能使用 valueForKey: on 方法`RSSDictionary`。它似乎不是一个`NSDictionary`？任何想法为什么我无法`NSDictionary`在属性列表的值字段中检索它？我需要使用`NSPropertySerialization`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:30:41.557

```
NSDictionary *savedRSSItemsDictionary = [NSDictionary 
          dictionaryWithContentsOfFile:[self propertyListFilePath]];
NSDictionary *RSSDictionary = 
    [savedRSSItemsDictionary objectForKey:[savedRSSItemsArray 
                                       objectAtIndex:indexPath.row]]; 
```

是错误的，因为您没有指定正确的键。

您应该使用 NSArray 来存储数据。按字典中字段的值索引字典是个坏主意。

# vb.net - 在运行应用程序时更改 LINQ To SQL 连接字符串

> ID：10973757
> 
> 赞同：0
> 
> 时间：2012-06-11T01:36:51.090
> 
> 标签：vb.net, linq-to-sql, connection-string

我有一个使用 LINQ To SQL 的 VB.NET 应用程序。现在，我正在使用单个服务器并且它工作正常。

我现在的问题是我的应用程序将用于另一个分支和另一个服务器。我必须使应用程序能够根据其服务器 IP 更改连接字符串。

我的项目的连接字符串位于另一个名为 DatabaseCLS.dll 的 dll 中。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:48:21.757

如果第一个应用程序正确地将其连接字符串存储在 web.config 或 app.config 文件中，那么您只需将相同的连接字符串名称添加到新项目的 web 或应用程序配置中。

内部数据库CLS：

```
<connectionStrings>
    <add name="DatabaseCLSConnectionString" connectionString="server1" />
</connectionStrings> 
```

在您的新应用中：

```
<connectionStrings>
    <add name="DatabaseCLSConnectionString" connectionString="server1" />
</connectionStrings> 
```

# asp.net-mvc - 将两个两个数据库上下文合并为一个？

> ID：10973759
> 
> 赞同：2
> 
> 时间：2012-06-11T01:37:44.067
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework, c#-4.0, sql-server-express

在我的项目中，我目前有两个数据库，一个名为 ASPNETDB.MDF，另一个名为 School.sdf。ASPNETDB.MDF 是由 .net 默认成员提供程序创建的，我使用实体框架创建了第二个。当我启动这个项目时，所有这些信息都需要包含在同一个项目中。我如何使应用程序正常运行，就好像只有一个数据库而不是两个数据库一样 - 我将如何合并所有这些数据，或者 - 至少 - 构建一个准备好用所有必要信息播种的空白数据库，我的学校上下文和默认会员提供者信息。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:44:49.460

您可以从 MS 访问此链接：[http ://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs)

它包括执行工具 aspnet_regsql.exe，位于 %WINDIR%\Microsoft.Net\Framework\vFRAMEWORK_VERSION_NUMBER\

> aspnet_regsql.exe 工具用于向指定的 SQL Server 数据库添加或删除 ASP.NET 应用程序服务。ASP.NET 应用程序服务包含 SqlMembershipProvider 和 SqlRoleProvider 的架构，以及其他 ASP.NET 2.0 框架的基于 SQL 的提供程序的架构。

这谈到了 2.0，但对于较新的版本也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T09:28:42.987

您正在寻找的内容在这里：
[Youtube 上的视频教程](http://www.youtube.com/watch?v=wek-blnTo2w)

专注于他们使用的部分：Aspnet_regsql.exe！这个想法不是合并两个数据库，而是配置您的 Asp.Net Membership Provider 以便它可以使用主数据库。祝你好运

# python - Python 初始化

> ID：10973764
> 
> 赞同：5
> 
> 时间：2012-06-11T01:38:52.237
> 
> 标签：python, class, init

我有这个代码：

```
def __init__(self, a, b, c, d...):
   self.a = a
   self.b = b
   etc 
```

我正在考虑将其替换为：

```
def __init__(self, a, b, c, d...):
   args=locals()
   for key in args:
     self.__dict__[key] = args[key] 
```

这是一个坏主意吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T01:51:36.130

来自[Python 之禅](http://www.python.org/dev/peps/pep-0020/)：**简单胜于复杂。**和**可读性很重要。**

显式赋值比使用魔法设置值更具可读性和简单性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T23:28:55.397

以@ThiefMaster 的评论为基础`**kwargs`：

如果您接收 20 个参数，则要求您的用户通过关键字而不是位置发送参数可能更有意义：使用 20 个参数，使用您的代码的人很有可能会以错误的顺序获取参数。

考虑*只*接受 kwargs，同时拥有您想要接受的预定义键列表，如果您没有收到它们，则引发 ValueError。所以你可以使用`**kwargs`然后检查一切是否都在那里。例如

```
INITIAL_ARGS = set(['a','b','c','d','e'...])

def __init__(self, **kwargs):
    if not INITIAL_ARGS.issubset(set(kwargs.iterkeys())):
        raise ValueError("Class <myclass> requires 20 keyword arguments"
                          "only given %d" % len(kwargs))
    self.__dict__.update(kwargs) 
```

不确定这是否比您原来的 Pythonic 或多或少，但它似乎会在以后试图弄清楚为什么有人使用您的代码可能会遇到奇怪的错误时节省大量时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T04:17:09.217

始终考虑可读性而不是巧妙的设计。替换代码更容易阅读吗？我可能会离开它。请记住，简单胜于复杂。正如 ThiefMaster 所说，显式分配更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-18T19:07:49.250

Python3 用户的另一种选择：来自[drastic](https://github.com/clemtoy/drastic/blob/master/README.md)`init`的装饰器。

```
@init
def __init__(self, a, b, c, d, e, f, g, h):
    # nothing to write here! 
```

# python - 了解地图功能

> ID：10973766
> 
> 赞同：330
> 
> 时间：2012-06-11T01:39:42.863
> 
> 标签：python, map-function

```
map(function, iterable, ...) 
```

将函数应用于可迭代的每个项目并返回结果列表。如果传递了额外的可迭代参数，则函数必须接受那么多参数并并行应用于所有可迭代的项目。

如果一个可迭代对象比另一个更短，则假定使用 None 项进行扩展。

如果 function 是`None`，则假定恒等函数；如果有多个参数，则`map()`返回一个由元组组成的列表，其中包含来自所有可迭代对象的相应项（一种转置操作）。

可迭代参数可以是序列或任何可迭代对象；结果始终是一个列表。

这在制作笛卡尔积中起什么作用？

```
content = map(tuple, array) 
```

将元组放在其中有什么影响？我还注意到，如果没有 map 函数，输出`abc`是`a, b, c`.

我想完全理解这个功能。参考定义也很难理解。太多花哨的绒毛。

* * *

## 回答 #1

> 赞同：475
> 
> 时间：2012-06-11T01:51:42.233

`map`不是特别pythonic。我建议改用列表推导：

```
map(f, iterable) 
```

基本上相当于：

```
[f(x) for x in iterable] 
```

`map`单靠它自己不能做笛卡尔积，因为它的输出列表的长度总是和它的输入列表一样。不过，您可以通过列表理解轻松地做笛卡尔积：

```
[(a, b) for a in iterable_a for b in iterable_b] 
```

语法有点混乱——基本上相当于：

```
result = []
for a in iterable_a:
    for b in iterable_b:
        result.append((a, b)) 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-06-11T01:49:50.023

`map`根本与笛卡尔积无关，尽管我想精通函数式编程的人可能会想出一些无法理解的使用`map`.

`map`在 Python 3 中等价于：

```
def map(func, iterable):
    for i in iterable:
        yield func(i) 
```

Python 2 的唯一区别是它会建立一个完整的结果列表来一次返回所有结果，而不是`yield`ing。

尽管 Python 约定通常更喜欢列表推导（或生成器表达式）来实现与调用相同的结果`map`，特别是如果您使用 lambda 表达式作为第一个参数：

```
[func(i) for i in iterable] 
```

作为您在问题评论中所要求的示例 - “将字符串转换为数组”，通过“数组”，您可能想要一个元组或一个列表（它们的行为都有点像其他语言的数组） -

```
 >>> a = "hello, world"
 >>> list(a)
['h', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd']
>>> tuple(a)
('h', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd') 
```

`map`如果您从字符串*列表*而不是单个字符串开始，则此处的用途是-`map`可以单独列出所有这些：

```
>>> a = ["foo", "bar", "baz"]
>>> list(map(list, a))
[['f', 'o', 'o'], ['b', 'a', 'r'], ['b', 'a', 'z']] 
```

请注意，这`map(list, a)`在 Python 2 中是等价的，但在 Python 3 中，`list`如果您想要执行任何操作而不是将其输入`for`循环（或诸如`sum`只需要可迭代而不是序列的处理函数），则需要调用。但还要再次注意，通常首选列表推导式：

```
>>> [list(b) for b in a]
[['f', 'o', 'o'], ['b', 'a', 'r'], ['b', 'a', 'z']] 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-06-11T01:50:01.923

`map`通过将函数应用于源的每个元素来创建一个新列表：

```
xs = [1, 2, 3]

# all of those are equivalent — the output is [2, 4, 6]
# 1\. map
ys = map(lambda x: x * 2, xs)
# 2\. list comprehension
ys = [x * 2 for x in xs]
# 3\. explicit loop
ys = []
for x in xs:
    ys.append(x * 2) 
```

n-ary`map`相当于将输入迭代压缩在一起，然后将转换函数应用于该中间压缩列表的每个元素。它*不是*笛卡尔积：

```
xs = [1, 2, 3]
ys = [2, 4, 6]

def f(x, y):
    return (x * 2, y // 2)

# output: [(2, 1), (4, 2), (6, 3)]
# 1\. map
zs = map(f, xs, ys)
# 2\. list comp
zs = [f(x, y) for x, y in zip(xs, ys)]
# 3\. explicit loop
zs = []
for x, y in zip(xs, ys):
    zs.append(f(x, y)) 
```

我在`zip`这里使用过，但是`map`当可迭代对象的大小不同时，行为实际上会略有不同——正如其文档中所述，它将可迭代对象扩展为包含`None`.

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-06-11T01:55:14.953

稍微简化一下，你可以想象`map()`做这样的事情：

```
def mymap(func, lst):
    result = []
    for e in lst:
        result.append(func(e))
    return result 
```

如您所见，它接受一个函数和一个列表，并返回一个新列表，其中包含将函数应用于输入列表中的每个元素的结果。我说“简化一点”是因为实际上`map()`可以处理*多个*可迭代对象：

> 如果传递了额外的可迭代参数，则函数必须接受那么多参数并并行应用于所有可迭代的项目。如果一个可迭代对象比另一个更短，则假定使用 None 项进行扩展。

对于问题的第二部分：这在制作笛卡尔积中起什么作用？好吧，`map()` *可以*用于生成这样的列表的笛卡尔积：

```
lst = [1, 2, 3, 4, 5]

from operator import add
reduce(add, map(lambda i: map(lambda j: (i, j), lst), lst)) 
```

...但说实话，使用[`product()`](http://docs.python.org/library/itertools.html#itertools.product)是解决问题的一种更简单自然的方法：

```
from itertools import product
list(product(lst, lst)) 
```

无论哪种方式，结果都是`lst`如上定义的笛卡尔积：

```
[(1, 1), (1, 2), (1, 3), (1, 4), (1, 5),
 (2, 1), (2, 2), (2, 3), (2, 4), (2, 5),
 (3, 1), (3, 2), (3, 3), (3, 4), (3, 5),
 (4, 1), (4, 2), (4, 3), (4, 4), (4, 5),
 (5, 1), (5, 2), (5, 3), (5, 4), (5, 5)] 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-08-01T01:20:16.647

该`map()`函数用于将相同的过程应用于可迭代数据结构中的每个项目，如列表、生成器、字符串和其他内容。

让我们看一个例子： `map()`可以遍历列表中的每个项目并对每个项目应用一个函数，然后它将返回（返回）新列表。

想象一下，你有一个函数，它接受一个数字，将该数字加 1 并返回它：

```
def add_one(num):
  new_num = num + 1
  return new_num 
```

您还有一个数字列表：

```
my_list = [1, 3, 6, 7, 8, 10] 
```

如果要递增列表中的每个数字，可以执行以下操作：

```
>>> map(add_one, my_list)
[2, 4, 7, 8, 9, 11] 
```

注意：至少`map()`需要两个参数。首先是函数名称，其次是列表。

让我们看看其他一些很酷的事情`map()`可以做。 `map()`可以采用多个可迭代对象（列表、字符串等）并将每个可迭代对象的元素作为参数传递给函数。

我们有三个列表：

```
list_one = [1, 2, 3, 4, 5]
list_two = [11, 12, 13, 14, 15]
list_three = [21, 22, 23, 24, 25] 
```

`map()`可以为您创建一个新列表，其中包含在特定索引处添加的元素。

现在记住`map()`，需要一个函数。这次我们将使用内置`sum()`函数。运行`map()`给出以下结果：

```
>>> map(sum, list_one, list_two, list_three)
[33, 36, 39, 42, 45] 
```

**记住：**
在 Python 2`map()`中，将根据最长的列表进行迭代（遍历列表的元素），并将`None`较短的列表传递给函数，因此您的函数应该查找`None`并处理它们，否则会出错。在 Python 3`map()`中，将在完成最短列表后停止。此外，在 Python 3 中，`map()`返回一个迭代器，而不是一个列表。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-10-16T22:08:23.870

### Python3 - 地图（函数，可迭代）

没有完全提到的一件事（尽管@BlooB 有点提到它）是 map 返回一个地图对象而**不是**一个列表。在初始化和迭代的时间性能方面，这是一个很大的区别。考虑这两个测试。

```
import time
def test1(iterable):
    a = time.clock()
    map(str, iterable)
    a = time.clock() - a

    b = time.clock()
    [ str(x) for x in iterable ]
    b = time.clock() - b

    print(a,b)

def test2(iterable):
    a = time.clock()
    [ x for x in map(str, iterable)]
    a = time.clock() - a

    b = time.clock()
    [ str(x) for x in iterable ]
    b = time.clock() - b

    print(a,b)

test1(range(2000000))  # Prints ~1.7e-5s   ~8s
test2(range(2000000))  # Prints ~9s        ~8s 
```

如您所见，初始化 map 函数几乎不需要任何时间。然而，遍历 map 对象比简单地遍历 iterable 需要更长的时间。这意味着在迭代中到达元素之前，传递给 map() 的函数不会应用于每个元素。如果您想要一个列表，请使用列表理解。如果您打算在 for 循环中迭代并在某个时候中断，请使用 map.

# html - 告诉浏览器不要执行嵌入在 textarea 中的 html 代码

> ID：10973767
> 
> 赞同：1
> 
> 时间：2012-06-11T01:39:47.633
> 
> 标签：html

我有一个嵌入代码，我用它来允许用户将音乐嵌入到他们自己的网站中。但是，问题是我不能只在 textarea b/c 中显示代码，该代码由“”组成，并且 w3 代码检查表明这是无效的。我可以输入任何代码来将其声明为浏览器不执行的文本吗？我想不通。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T01:41:09.510

使用[HTML 实体](http://www.elizabethcastro.com/html/extras/entities.html)。

*   供`"`使用`&quot;`
*   供`<`使用`&lt;`
*   供`>`使用`&gt;`

# iphone - UIImagePickerController 中的音量控制

> ID：10973768
> 
> 赞同：2
> 
> 时间：2012-06-11T01:40:09.260
> 
> 标签：iphone, objective-c, ios

我想在用户拍照或开始录制视频时发出最大音量通知声音。是否有可能并且不会被appStore拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:34:20.213

`Celestial.framework`有一个`AVSystemController`类可以让您获取和设置当前音量。不幸的是，这是一个私人课程，所以 Apple 不会在 AppStore 提交中接受它

相反，您可以显示音量滑块以由用户设置。

像这样：

```
MPVolumeView *volumeView = [[[MPVolumeView alloc] initWithFrame:window.bounds] autorelease];
[window addSubview:volumeView]; 
[volumeView sizeToFit]; 
```

# java - Django 中的 request.getInputStream()

> ID：10973770
> 
> 赞同：0
> 
> 时间：2012-06-11T01:40:15.097
> 
> 标签：java, django, request

我正在做一个 Django 项目。我想将此java代码转换为python。 [http://www.chemaxon.com/marvin/sketch/saveimage_jsp.txt](http://www.chemaxon.com/marvin/sketch/saveimage_jsp.txt)

我的问题是我在 Python 中找不到类似于 request.getInputStream() 的东西。为了从内存中获取临时文件，需要此函数。我知道 Django 中有 request.FILES 。但是我想获取的这个文件不是来自用户的计算机。它来自内存（由 java 小程序创建）。

提前致谢！

# php - preg_match 获取多个

> ID：10973779
> 
> 赞同：1
> 
> 时间：2012-06-11T01:42:30.037
> 
> 标签：php, regex

我有一个像 w/e 更多的 HTML 的页面，我需要获取标签之间的所有数据，而不是第一个。目前我使用

```
<?php([^<]*?)\?>/" 
```

但它抓住了第一个并停下来。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:45:18.493

查看功能[`preg_match_all`](http://php.net/preg_match_all)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:04:09.620

用这个`preg_match_all()`

```
preg_match_all("/<?php([^<]*?)\?>/siU",$html,$output);
print_r($output[1]); 
```

# java - 将 .eml 读入 JavaMail MIME 格式

> ID：10973782
> 
> 赞同：0
> 
> 时间：2012-06-11T01:43:24.170
> 
> 标签：java, jakarta-mail, eml, mime-message

我已将单个消息作为 .eml 文件存储在我的磁盘上。当需要将它们从磁盘读取到内存时，我无法恢复电子邮件的正文（文本）。这是读取 .eml 文件的代码

```
String filePath = "filepath\\msg0.eml";
InputStream is = new FileInputStream(filePath);
MimeMessage mime = new MimeMessage(null, is); 
```

有趣的是——我可以打印出关于电子邮件的各种信息、发件人、主题行、收到时间、抄送、密送等。我就是无法访问电子邮件内容。我应该在哪里看到正文，而不是一个内存地址（下）

```
content type: multipart/alternative; boundary="00032555717a714a1504a378be8e" 
```

所以有什么帮助吗？我忘记了像演员表这样简单的事情吗？除了 MimeMessage 格式之外，我还尝试从 Multipart 和 Message 打印内容。感谢您的意见，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:14:41.160

使用 JavaMail 附带的 msgshow.java 演示程序来显示文件中的消息。使用 -m 选项。如果它没有显示您所期望的，那么文件格式是错误的，您应该查看将消息存储在文件中的程序。

如果您仍然遇到问题，我们将需要更多详细信息来帮助您找出问题所在。

# eclipse - Arduino Eclipse 无法解析串口

> ID：10973787
> 
> 赞同：6
> 
> 时间：2012-06-11T01:44:21.367
> 
> 标签：eclipse, arduino

我一直在尝试设置 Eclipse 和 Arduino 库。我已按照此 URL 中的说明进行操作。 [http://arduino.cc/playground/Code/Eclipse](http://arduino.cc/playground/Code/Eclipse)

我遇到的问题是我的项目无法解析 Serial. 任何人都知道为什么会这样？我正在使用 Arduino 1.0，并且该指令是为 1.0 之前的版本编写的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T01:46:43.423

```
Setting the preference windows->preferences->C/C++->indexer->index unused headers.

Setting the preference windows->preferences->C/C++->indexer->index source and header files opened in the editor.

Setting the preference windows->preferences->C/C++->indexer->Files to index upfront . Add arduino.h and or WProgram.h.

Do next four in this sequence
 Right click the project->index->Search for unresolved includes.
Right click the project->index->Freshen all Files.
Right click the project->index->Update with modified files.
Right click the project->index->Rebuild. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-10T22:35:15.687

[执行此处](http://www.baeyens.it/eclipse/Arduino%20eclipse%20plugin%20FAQ.html#bugs)的插件常见问题解答是正确的，但还不够，至少如果您在 Windows 中工作，则不会。

您需要将路径添加到**Project->Properties->C/C++ General->Path and symbols**

*   在“包括”选项卡下单击添加
*   选择标志“添加到所有配置”
*   键入此路径：`path to Arduino IDE installation directory\hardware\tools\avr\avr\include`

就我而言，路径是`C:\Program Files (x86)\Arduino\hardware\tools\avr\avr\include`

之后这个eclipse会问你是否要重建索引，然后所有的标准符号都会被正确解析

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-31T11:54:40.273

在 Help->Check for updates 中执行“Arduino Eclipse Extensions”升级

# google-app-engine - 用于 Mercurial 的 AppEngine .hgignore

> ID：10973788
> 
> 赞同：1
> 
> 时间：2012-06-11T01:44:40.173
> 
> 标签：google-app-engine, version-control, mercurial, hgignore

我是 AppEngine 的新手，我不确定哪些文件是必需的，哪些不是。是否有人拥有适用于 AppEngine/GWT 项目的可靠 .hgignore？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:11:55.157

GWT 建议您可能通过 Google Plugin for Java on Eclipse 使用 Java。我无法谈论 GWT 端可以安全忽略哪些文件，但从 App Engine 端来看，忽略`.class`文件是安全的，因为它们会在您部署时重新生成。我会首先保留其他所有内容，包括`.classpath`and`.project`文件和`.settings`目录，其理论是稍后发现你保留的比你需要的多，而不是发现相反的东西更安全。

# c++ - 链接多个文件的问题

> ID：10973790
> 
> 赞同：0
> 
> 时间：2012-06-11T01:44:50.570
> 
> 标签：c++, windows, gcc, linker, codeblocks

这就是正在发生的事情：

一开始，有一个主要的源文件。它在几秒钟内编译完成，但大约有 1000 行长，所以我开始将它拆分为单独的 .h/.cpp 组合。好消息是我的主要源代码的长度现在约为 500 行，但坏消息是我无法完全编译/链接它。

所以我已经有一段时间了，但它并没有变得更好。

这是一个概述（[或没有概述](https://github.com/patrickpowns/corbit/)）：

有四个源文件：

*   corbit.cpp（主要），

*   initialize.cpp（初始化实体向量），

*   entity.cpp（实体类文件），

*   display.cpp（HUD 和相机类文件）。

Main 包括所有其他源文件，如“display.h”。此外，（例如）allegro.h。

display.cpp 包括“entity.h”（带有#ifndef ENTITY_H 保护事物）和“display.h”，以及（例如）allegro.h

entity.cpp 包括“entity.h”

Initialization.cpp 包括（再次使用#ifndef 保护）“entity.h”，以及“initialization.h”

当我在 Codeblocks 中使用 GCC 进行编译时，它会打开 locale_facets.tcc （有人知道那是什么吗？）作为一个空文件。它还给了我两条错误消息，如下所示：

*   corbit.o 在函数“ZNSt6vectorIP10physical_tSaIS1_EE5clearEv”中

*   display.o: [项目目录]..\lib\gcc\mingw32\3.4.5........\include\c++\3.4.5\bits\locale_facets.tcc（第2497行）（首先定义在这里) <-- 红色高亮

和

*   corbit.o 在函数“ZNSt6vectorIP10physical_tSaIS1_EE5clearEv”中

*   display.o: [项目目录]..\lib\gcc\mingw32\3.4.5........\include\c++\3.4.5\bits\locale_facets.tcc（第2497行）（首先定义在这里) <-- 红色高亮

，看起来相同。在我的主要声明中

```
std::vector<physical_t*> entity; 
```

（physical_t 是实体类），这可能与第一条消息有关。

在我拥有的每个 .h 文件中

```
#ifndef FILENAME_H
#define FILENAME_H
[declarations]
#endif 
```

每当我包含一个与包含它的 .cpp 文件不对应的标题时，我都会将它包含在

```
#ifndef FILENAME_H
#include "filename.h"
#endif 
```

我确实有不同的 .cpp 文件，包括 iostream、math.h、allegro.h 等，因此它们定义的函数可以在没有语法错误的情况下编译。

使用 Windows、代码块、gcc。我想不出别的了。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:00:57.790

是否将其他*源文件*包含在主源中？您不应该这样做，尤其是当您在多个源文件中包含相同的头文件时。

您应该自己编译每个源文件，并使用*链接器*将这些文件链接在一起。

# android - 安装 apk 时的 INSTALL_FAILED_MISSING_SHARED_LIBRARY（无 Google API）

> ID：10973793
> 
> 赞同：4
> 
> 时间：2012-06-11T01:45:57.243
> 
> 标签：android

我在使用自定义库安装我的 android 应用程序时遇到问题：hessian-3.1.5.jar。我的 IDE 是：intellij idea 11

这个库在项目结构的库中，在 AndroidManifest.xml 中我有一行：`<uses-library android:name="com.caucho.hessian.client" />`

但它说：`Failure [INSTALL_FAILED_MISSING_SHARED_LIBRARY]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:52:09.300

这在模拟器上有效吗？听起来您的设备上没有 Google 库（并且由于它们已获得设备制造商的许可，因此如果没有它们，您将无法使用它们）。

# c# - 线程和睡眠（）

> ID：10973794
> 
> 赞同：4
> 
> 时间：2012-06-11T01:46:16.980
> 
> 标签：c#, multithreading, cpu-usage

对于我正在开发的游戏，我想将音频放到另一个线程上，这样我就可以将声音排队并让它们立即播放。我在该线程中使用的代码如下所示

```
private void _checkForThingsToPlay()
{
    while (true)
    {
        if (_song != null)
        {
            _playSong(_song);
            _song = null;
        }

        while (_effects.Count > 0)
            _playSfx(_effects.Dequeue());

        Thread.Sleep(100);
    }
} 
```

这异步运行并且运行良好。但是，如果没有睡眠调用，它会占用 cpu 上的整个核心。我的问题是， sleep() 是降低 CPU 使用率的有效方法还是有更好的方法来做到这一点？我和我的朋友觉得这是一个快速破解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T02:07:40.183

`Thread.Sleep()`在`while(true)`循环中使用通常是一个坏习惯。看起来您有一个要在其上推送声音效果的队列，并且您希望“音频线程”在它们被推送到队列后立即播放这些效果。这听起来像一个[生产者/消费者队列](http://www.albahari.com/threading/part2.aspx#_WaitHandle_Producer_Consumer_Queue)。有多种方法可以在 C# 中构建这样的队列。你可以使用`Monitor.Wait()`and`Monitor.Pulse()`或者你可以使用一个`AutoResetEvent`对象。

在 .NET 4 中，您还可以使用`BlockingCollection`.

顺便说一句，有一个很好的在线介绍[C#](http://www.albahari.com/threading/)中的线程，描述了很多常见的线程/同步场景和最佳实践。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T02:07:05.113

这称为[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)，很容易解决。如果您使用的是 .NET 4，请尝试`BlockingCollection`. [MSDN 页面](http://msdn.microsoft.com/en-us/library/dd267312.aspx)中有一个很好的示例代码。

请注意示例代码中的这一行：

```
while (true) Console.WriteLine(bc.Take()); 
```

这实际上会阻塞（没有浪费 CPU 周期），直到有东西可以*消耗*。

# python - 可以使用 urllib2 限制返回的行数来打开 URL 吗？

> ID：10973796
> 
> 赞同：2
> 
> 时间：2012-06-11T01:46:45.753
> 
> 标签：python, urllib2

我知道这听起来可能很荒谬，但是否可以`urllib2`用来打开一个 URL，以便只返回一组数量的行？

原因是为了减少加载时间，尤其是对于我正在使用的非常大的页面。例如，这是我的页面：

```
1\. <html>
2\.  <head>
3\.   <title>Hello!</title>
4\.  </head>
5\.  <body>
6\.   <p>Hi there.</p>
7\.  </body>
8\. </html> 
```

假设我要打开我的页面到第 5 行，然后在阅读后打印它，它会给我：

```
1\. <html>
2\.  <head>
3\.   <title>Hello!</title>
4\.  </head>
5\.  <body> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:11:44.653

当然是，你可以使用`readline()`而不是`read()`

```
import urllib2

req = urllib2.Request('http://www.python.org')
response = urllib2.urlopen(req)

lines = ""
for x in range(10):
        lines += response.readline()

print(lines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:17:34.903

单线：

```
from itertools import islice

list(islice(urlopen("http://www.python.org"), 5)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:07:44.347

您只需要设置阈值并跳出 readlines 循环。

```
import urllib2

req = urllib2.Request('http://www.python.org')
response = urllib2.urlopen(req)

read_until = 5    

lines = []
for line_number, line in enumerate(response.readlines()):
    if line_number >= read_until:
        break
    else:
        lines.append(line) 
```

# ios5 - 除了 6 个配置文件（HFP、PBAP、A2DP、AVRCP、PAN、HID）之外，iOS 中是否有任何受支持的蓝牙配置文件？

> ID：10973797
> 
> 赞同：3
> 
> 时间：2012-06-11T01:46:50.033
> 
> 标签：ios5, bluetooth, profile, spp

除了 6 个配置文件（HFP、PBAP、A2DP、AVRCP、PAN、HID）之外，iOS5 中是否有任何受支持的蓝牙配置文件？

我可以使用 SPP（串行端口配置文件）作为开发 iPhone 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:10:35.090

如果你想使用Serial Port Profile(SPP)，要么需要申请MFi，要么使用MFi认证的设备与iOS通信。

这是MFi链接

[https://developer.apple.com/programs/mfi/](https://developer.apple.com/programs/mfi/)

除了上述配置文件之外，iOS6 还支持 MAP。

您可以在此链接下找到支持的配置文件

[http://support.apple.com/kb/ht3647](http://support.apple.com/kb/ht3647)

# android - Android - UnsatisfiedLinkError: setAndroidSdkVersion

> ID：10973798
> 
> 赞同：1
> 
> 时间：2012-06-11T01:46:59.830
> 
> 标签：android

我已经为自己的应用修改了 linphone-android 源代码。它在 android 版本 2.3.3 到 2.3.6 上运行良好，但是当我尝试在 android 4.0.3 (Galaxy S II) 上运行它时，它返回了这个错误：“UnsatisfiedLinkError: setAndroidSdkVersion”，我不知道它是关于什么的。

希望可以有人帮帮我。谢谢！

这是我从 logcat 中得到的。

![在此处输入图像描述](../Images/081748f9f8dc9a39ce00241fdba075c5.png)

# vb.net - Winforms表单vb.net中对象的起始属性

> ID：10973801
> 
> 赞同：2
> 
> 时间：2012-06-11T01:48:19.580
> 
> 标签：vb.net, winforms, properties, form-designer

在我的软件课程中，每次提交作业时，我们都必须在表单中包含一个文档，其中包含每个对象的起始属性。

例如

```
TextBox1
Location: 241, 115
Name: TextBox1
Size: 100, 20
TabIndex: 0 
```

滚动浏览属性查看器并在表单上复制并粘贴 30 多个对象的每个自定义值真的很痛苦......我想知道是否有一段简单的代码或获取（至少部分）的方法自动打印/查看对象的所有属性。

是否正在考虑某种私有子，我可以通过程序底部并在加载时运行，获取所有对象，并将非默认属性输出到报告或其他东西？基本上关于我如何做到这一点的任何想法？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:57:13.123

为什么不查看`InitializeComponent`方法，您应该能够从那里剪切和粘贴您需要的内容。

```
Private Sub InitializeComponent()
    Me.Button1 = New System.Windows.Forms.Button()
    Me.Label1 = New System.Windows.Forms.Label()
    Me.SuspendLayout()
    '
    'Button1
    '
    Me.Button1.Location = New System.Drawing.Point(0, 0)
    Me.Button1.Name = "Button1"
    Me.Button1.Size = New System.Drawing.Size(75, 23)
    Me.Button1.TabIndex = 0
    Me.Button1.Text = "Button1"
    Me.Button1.UseVisualStyleBackColor = True
    '
    'Label1
    '
    Me.Label1.AutoSize = True
    Me.Label1.Location = New System.Drawing.Point(12, 46)
    Me.Label1.Name = "Label1"
    Me.Label1.Size = New System.Drawing.Size(51, 17)
    Me.Label1.TabIndex = 1
    Me.Label1.Text = "Label1"
    '
    'Form1
    '
    Me.AutoScaleDimensions = New System.Drawing.SizeF(8.0!, 16.0!)
    Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
    Me.ClientSize = New System.Drawing.Size(282, 255)
    Me.Controls.Add(Me.Label1)
    Me.Controls.Add(Me.Button1)
    Me.Name = "Form1"
    Me.Text = "Form1"
    Me.ResumeLayout(False)
    Me.PerformLayout()

End Sub 
```

# php - PHP memcached 无法连接，但日志文件或屏幕上没有错误

> ID：10973803
> 
> 赞同：0
> 
> 时间：2012-06-11T01:48:46.533
> 
> 标签：php, codeigniter, memcached

我无法让 codeigniter 与我的外部 memcached 服务器通话。我正在运行带有 -vvv 标志的 memcached，当通常通过 php 使用 memcached 时，它工作正常（谢谢 zerkms）。但是当我尝试通过 codeigniter 设置/获取值时，它甚至没有连接到删除服务器，但我根本没有收到任何错误。

memached.php 配置文件

```
<?php
$config['memcached'] = array(
    'server_1' => array(
        'host' => 'xx.xx.xx.xx',
        'port'        => 11211,
        'weight'    => 1
    )
); 
?> 
```

正在运行的代码：

```
$this->load->driver('cache', array('adapter' => 'memcached', 'backup' => 'file'));
$userid = '1';
$key = 'user_products_'.$userid;
$results = $this->cache->memcached->get($key);
if($results == NULL) {
    $qry = $this->db->query("SELECT * FROM products WHERE user_id=$userid");
    $results = $qry->result_array();
    $this->cache->memcached->save($key,$results,'60');
} 
```

我都试过了：

```
$this->cache->get();
$this->cache->save(); 
```

和

```
$this->cache->memcached->get();
$this->cache->memcached->save(); 
```

在 Memcached 驱动程序文件中的第 51 行，当我使用 var_dump 检查获取请求的输出时

```
$data = $this->_memcached->get($id);
var_dump($data); 
```

我得到：

```
bool(false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:07:56.027

我相信这是 Codeigniter 中的 memcached 驱动程序的问题。

我在 Codeigniter 论坛上找到了以下帖子。这个 memcached 库第一次完美地为我工作，绝对没有问题。这不是一个解决方案，因为我更喜欢使用内置的 Codeigniter Cache 库，但与此同时，这提供了一个足够实用的解决方法。

[http://codeigniter.com/forums/viewthread/212893/](http://codeigniter.com/forums/viewthread/212893/)

# matlab - 基于随机时间向量matlab更新参数

> ID：10973805
> 
> 赞同：0
> 
> 时间：2012-06-11T01:49:57.347
> 
> 标签：matlab, variables, for-loop

我有一个非 ode 函数，它根据时间向量和空间变量向量的前一个时间步长进行计算。

此函数中的参数之一是常量。但是，我想将该参数设为变量，该变量将在给定时间发生变化。

这是一些示例代码，可以清楚地说明这一点。

```
nstrains = 10;
param = .3*rand(1,nstrains);
strtime = rand(1,nstrains);
strtime = round(strtime);
strtime = sort(strtime);

initialconds = .5
t=0:.1:10; %time vector
x=1:.1:10; %spatial vector

k = zeros(numel(x),numel(t))
k = zeros(numel(x)/2,1) = initialconds

for i = 1:(numel(t)-1)

for j = 2:(numel(x)-1)

k(j,i+1) = 5*2+c(j+1,i)+param*c(j,1)+param

end 

end 
```

如果 param 保持不变，这将没有问题。我想要做的是有一个参数的随机数向量，它在随机时间输入参数的随机数。随机时间由 strtime 确定。

```
So for example, if strtime vector = [2 4 9 10], and 
param vector = [.21 .01 .25 .05]

First, I want an initial param value at time 0 = .2 (arbitrary). As soon as my
time vector matches with my strtime vector, which in this example is 2, then 
my param value is updated to .21\. .21 will be used at each time step until my 
time vector matches my strtime vector again, which in this case, would be 4\. By 
time step 4, .01 is used as my param value, and so on. 
```

我无法真正弄清楚如何解决这个问题，因为该函数是以这种方式索引的。有没有办法做到这一点，同时保持函数的索引方式，只是以某种方式将参数更新为由 strtime 向量确定的新值？

谢谢，希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:08:19.653

创建一个与您的时间向量大小相同的向量`t`，每次使用适当的参数值。

以您的示例数据为例，这是一种方法：

首先，在 strtime 和 param 向量的开头，添加初始条件（t>=0，param 以 .2 开始）。

> > strtime = [0 2 4 9 10]；
> > 参数 = [.2 .21 .01 .25 .05]；

接下来，对于 中的每个元素，找到小于或等于该时间点`t`的最大元素，并使用该索引找到适当的参数。`strtime`在这里，我已经完成了这项工作，`arrayfun`而不是将其实现为`for`循环，尽管在概念上它们是相同的。

> > p = arrayfun(@(x) 参数(find(strtime<=x,1,'last')), t);

现在你有了一个向量，`p`你可以用它来索引`i`（`param`在你的循环部分用替换`p(i)`）。

# ruby - 在 Ruby 中 Grepping 二进制文件的 Mock 对象

> ID：10973808
> 
> 赞同：0
> 
> 时间：2012-06-11T01:50:11.950
> 
> 标签：ruby, unit-testing, rspec, mocking

对于某个场景，我们在 Ruby 中为某个制造商字符串 grep 一个二进制文件。我想在 Rspec 中创建关联的 Mock 对象。我尝试了以下方法，但没有帮助：

```
 File.stub!(:exist?).with(<binary_file>).and_return(true)
  File.stub!(:read?).with(<binary_file>).and_return('XYZ') 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:16:14.143

首先，删除`!`from `#stub`，它在较新版本的 RSpec 中不使用。其次，`stub(:read?)`应该是`stub(:read)`，因为它不是谓词方法。

在没有看到实现代码的情况下，这些更改应该会让您朝着正确的方向前进。

也就是说，在可以避免的情况下，我倾向于不同意这样的存根类方法，因为通过测试存在状态泄漏的相当大的风险。相反，我会设计在文件中进行搜索的组件以接受 的实例`IO`，然后传入完全一次性的模拟对象会变得更加容易。

# java - 在 Java 弹出窗口中重用 JTextField

> ID：10973809
> 
> 赞同：1
> 
> 时间：2012-06-11T01:50:19.510
> 
> 标签：java, swing, popup

我正在构建一个使用多个弹出窗口的大型 Java 应用程序。其中一些窗口必须能够同时显示（例如，Google 地球和网络摄像头提要的单独弹出窗口），但其中一些窗口一次只能显示一个（例如，错误消息） . 第一种弹出窗口，即网络摄像头，运行良好。但是错误消息弹出窗口的行为类似于网络摄像头类型的弹出窗口（也就是说，它们会创建新的 .class 文件，并且可以有多个错误弹出窗口）。我该如何解决？我应该创建一个新的错误类吗？

此外，在一个网络摄像头类型的弹出窗口中，我有 JTextFields，它读取用户名和密码。这个登录弹出窗口工作正常，但如果我使用它一次，关闭它，然后再次使用它，在 JTextFields 上执行 getText() 会返回一个空字符串。我认为这个问题可能与上述问题有关，但我不确定。

```
passwordAction.addActionListener(new ActionListener() {
            JFrame pwPop=new JFrame("Log in");
            JTextField unameField;
            JTextField pwField;
            public void actionPerformed(ActionEvent arg0) {
                pwPop.setBounds(250,200,300,150);
                JPanel pwPopPanel=new JPanel(new FlowLayout(FlowLayout.LEFT,10,10));
                pwPop.add(pwPopPanel);
                unameField=new JTextField();
                pwField=new JTextField();
                JButton logInButton=new JButton("Log in");
                JButton cancelButton=new JButton("Cancel");
                JLabel logInText=new JLabel("Username:");
                JLabel passwordText=new JLabel("Password:");
                JPanel buttonPanel=new JPanel(new FlowLayout(FlowLayout.CENTER,5,0));
                pwPopPanel.add(logInText);
                pwPopPanel.add(unameField);
                pwPopPanel.add(passwordText);
                pwPopPanel.add(pwField);
                buttonPanel.add(logInButton);
                buttonPanel.add(cancelButton);
                pwPopPanel.add(buttonPanel);
                logInButton.addActionListener(new ActionListener() {
                    JFrame logErrorFrame;
                    public void actionPerformed(ActionEvent arg0) {
                        if (doLogIn(unameField.getText(), pwField.getText(), "")) {
                            unameField.setText(null);
                            pwField.setText(null);
                            pwPop.setVisible(false);
                        }
                    }
                });
                pwPop.setVisible(true);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:43:36.843

正如 Andrew Thompson 向我展示的那样，JOptionPane 是我一直在寻找的解决方案。它能够创建您可能需要的几乎任何类型的弹出窗口。

[JOptionPane Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)

[带有 JOptionPane 的简单对话框](http://www.leepoint.net/notes-java/GUI/containers/20dialogs/10joptionpane.html)

# java - 导出到jar文件？

> ID：10973814
> 
> 赞同：0
> 
> 时间：2012-06-11T01:51:35.917
> 
> 标签：java, compilation, export

我正在尝试将我的游戏导出到 jar 文件中，以便我没有 eclipse 的朋友可以玩它（它是作为礼物送给他的）。出于某种原因，每当我尝试导出它时，都会出现错误：“导出时带有编译警告：buckypractice/src/javagam/YouLose.java”

他们是其他几个具有相同错误的类！我不知道该怎么办！

# ruby-on-rails - 如何为 Ruby 测试设置 Sublime Text 2 (Windows)

> ID：10973820
> 
> 赞同：1
> 
> 时间：2012-06-11T01:52:28.990
> 
> 标签：ruby-on-rails, railstutorial.org, sublimetext2, ruby-test

我正在关注 Rails 教程（Hartl），并且在第 3.6.4 节“Sublime Text 中的测试”中遇到了一些麻烦。

运行 Windows 7（我知道，不是最佳的，但我现在拥有的）。我按照[https://github.com/maltize/sublime-text-2-ruby-tests#settings](https://github.com/maltize/sublime-text-2-ruby-tests#settings)上的步骤成功将存储库克隆到我机器上的 %APPDATA/Sublime Text 2/Packages/ 目录中。

我的问题出在“设置”部分 - 我被指示：

> “将 RubyTest.sublime-settings 文件复制到 ~/Library/Application Support/Sublime Text 2/Packages/User/ 并进行更改。”

找文件没问题。但该目录似乎特定于 OS-X。我完全不清楚 Windows 中的等效位置在哪里。我假设我需要将文件的副本放在 Sublime Text 2 可以读取它的合适位置，但是经过几个小时的搜索后，我对该位置并不明智。

Windows 中的“RubyTest.sublime-settings”文件在哪里？

感谢任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:39:40.400

您说您将回购克隆到：

```
%APPDATA/Sublime Text 2/Packages/ 
```

所以“RubyTest.sublime-settings”将进入：

```
%APPDATA/Sublime Text 2/Packages/User 
```

# opengl-es-2.0 - HeightMap : gltexsubimage2d VS 顶点属性

> ID：10973828
> 
> 赞同：0
> 
> 时间：2012-06-11T01:54:59.837
> 
> 标签：opengl-es-2.0, tegra, mali-400, mali

我的地形有一个动态高度图，几乎每一帧都会修改，我应该使用 gltexsubimage2d 和纹理作为高度图还是每帧更新顶点缓冲区而不是创建 vbo？什么方法应该更快？我知道我正在丢失通过 vbo 发送数据的硬件双线性滤波器，但根据谷歌 gltexxubimage2d 会导致移动设备出现问题，而且看起来我不能逐帧使用它，因为它很慢。

实际上问题应该是：在纹理中将数据发送到 gpu 内存是否比使用顶点属性更快？它是否依赖于实现？是否有任何身体在 android 的 opengl 中实现了纹理更新，例如使用 quad 作为视频播放画布？我知道这个问题在像 mali-400 或 tegra3 这样的新设备上可能是无稽之谈，这两种方法对我来说性能应该足够了，但我希望与 adreno200 或 sgx535 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:49:38.547

我建议进行纹理修改与顶点操作。

这是因为与将纹理内存修改为内存相比，VBO 操作需要更多的数据移动和内存带宽。

考虑到每个顶点至少有 5 个项目（x+y+z+tx+ty），但考虑到在任何照明算法中非常典型的法线，通常有 8 个项目。

另一方面，纹理只是每个顶点的一个值（通常）。

这个解决方案的一个非常常见的错误会导致很多缓慢，是许多新手（我相信这不是你的情况）为他们用于高度图的纹理启用了 mipmap 生成。

确保禁用它：

glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_FALSE);

另一个建议是将纹理像素的格式降至最低要求，8888 比 444 像素分辨率重得多。这意味着每帧的内存传输速度要快得多。

我希望这在某种程度上有所帮助。

# sql - 这个数据库应该如何布局/如何实现3NF？

> ID：10973830
> 
> 赞同：1
> 
> 时间：2012-06-11T01:55:39.357
> 
> 标签：sql, database, forms, layout

[http://iforce.co.nz/i/v4w35nil.2sj.jpg](http://iforce.co.nz/i/v4w35nil.2sj.jpg)

我需要使用 3NF 图表中提供的字段制作数独游戏数据库。问题是，我如何用这个表实现 3NF 以及应该如何建立关系？我已经做了一些搜索，但我仍然感到困惑。

忽略 admin 表，它与这个问题无关。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:50:28.180

原来的一对桌子对我来说看起来不错。`Puzzles`您在表格中有一个正式的解决方案（尽管显然不是原始拼图） 。您的提交获得了唯一的 ID 号并引用了拼图，并包含其他信息。

我不确定我是否理解线上的标记，但应该是“0 或更多提交”可以引用给定的拼图（也就是说，我认为，左端的鱼尾纹表示什么；我不是确定另一端的 H 或虚线）。

根据您的规则，您可能需要对电子邮件地址进行唯一限制（每个参赛者只有一个条目），或者您可能只需要对“电子邮件 + 时间戳”进行唯一限制（单个用户在一秒钟内没有两个条目） .

但是基本表在 5NF 中，因此也在 3NF 中。

# ruby - 引用具有指定索引的枚举器值

> ID：10973834
> 
> 赞同：7
> 
> 时间：2012-06-11T01:56:43.840
> 
> 标签：ruby, enumerable

假设我有一个可枚举的对象`enum`，现在我想获得第三个项目。

我知道一种通用方法是转换为数组，然后使用索引进行访问，例如：

```
enum.to_a[2] 
```

但是这种方式会创建一个临时数组，并且可能效率低下。

现在我使用：

```
enum.each_with_index {|v, i| break v if i == 2} 
```

但这是相当丑陋和多余的。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T02:06:18.873

您可以使用[`take`](https://ruby-doc.org/core/Enumerable.html#method-i-take)剥离前三个元素，然后[`last`](https://ruby-doc.org/core/Array.html#method-i-last)从数组中获取第三个元素，从而`take`为您提供：

```
third = enum.take(3).last 
```

如果您根本不想生成任何数组，那么也许：

```
# If enum isn't an Enumerator then 'enum = enum.to_enum' or 'enum = enum.each'
# to make it one.
(3 - 1).times { enum.next }
third = enum.next 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T06:30:41.003

[使用enumerable-lazy](https://github.com/yhara/enumerable-lazy)或 Ruby 2.1替代 mu 的答案。像 using 一样懒惰，`next`但更具声明性：

```
enum.lazy.drop(2).first 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:13:13.720

不幸的是，要通过索引访问成员，必须将其转换为数组（否则你一开始就没有索引），所以你的代码对我来说看起来非常好。

# jquery - 使用 Sinon.js 并阻止对我的应用服务器的调用

> ID：10973839
> 
> 赞同：4
> 
> 时间：2012-06-11T01:57:12.330
> 
> 标签：jquery, coffeescript, jquery-deferred, sinon

很简单的问题：

我希望我们 sinon.js 测试一段 javascript 以确保它`$.ajax`在做两件事时调用该方法：

1.  我不想真正打服务器
2.  我想模拟来自服务器的响应

所以这是JS：

```
 $.ajax
    url: "/tickets/id.json"
    dataType: 'json'

  .done (data) =>
    HandlebarsTemplates["tickets/popup_title"] data 
```

这是我的测试：

```
describe 'PopupDisplayer', ->

  beforeEach ->
    loadFixtures 'popup_displayer'
    new PopupDisplayer

    @title_stub = sinon.stub( HandlebarsTemplates, "tickets/popup_title")

    @jquery_stub = sinon.stub(jQuery, 'ajax').yieldsTo('done', {})

    //This triggers the ajax call
    $('.popupable .title').mouseenter()

  afterEach ->
    HandlebarsTemplates['tickets/popup_title'].restore()
    HandlebarsTemplates['tickets/popup_content'].restore()

    jQuery.ajax.restore()

    @server.restore()

  it 'renders the title with the data returned from the server', ->
    expect(@title_stub).toHaveBeenCalledWith( {}) 
```

此测试失败，但有以下异常：

```
TypeError: ajax expected to yield to 'done', but no object with such a property was passed. Received [[object Object]] 
```

所以我想我想知道我是否可以模拟一个 jQuery 请求以获得可以成功响应`.done`调用的响应，显然我不太了解`defferedObject()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:44:53.917

要模拟服务器的响应，您想要存根的返回值`$.ajax`：

```
 ...
  @jquery_stub = sinon.stub(jQuery, 'ajax').returns
    done: (callback) -> callback {...} # your object here
  ... 
```

请注意，这只会存根`done`回调。如果您想测试其他行为，您可能需要实现其他处理程序（`fail`等`then`）。

您还可以返回一个实际的 jQuery Deferred 对象：

```
 ...    
  @deferred = new jQuery.Deferred
  @jquery_stub = sinon.stub(jQuery, 'ajax').returns(deferred)
  ... 
```

在这种情况下，您必须在进行测试之前显式触发返回的 Deferred：

```
 ...    
  @deferred.resolveWith(null, [{}]) # your object here
  ... 
```

# html - 地图圆形边框 webkit

> ID：10973843
> 
> 赞同：0
> 
> 时间：2012-06-11T01:57:24.497
> 
> 标签：html, google-maps, css, rounded-corners

我已经尝试了几个小时来让它工作..

我需要为谷歌地图制作圆形边框效果。

我知道 webkit 有一个错误，到目前为止，我在网上找到的解决方案都没有，我的努力似乎也没有奏效。

你能帮我吗？

---CSS---

```
#order_map_wrapper {
    float: left;
    position:relative;
}

#order_map_middle {
    -webkit-border-bottom-left-radius:20px;
    -moz-border-radius-bottomleft:20px;
    border-bottom-left-radius:20px;
    overflow: hidden; 
}

#order_map { 
    height: 425px;
    width: 485px;
    -moz-border-radius: inherit;
    -webkit-border-radius: inherit;
    border-radius: inherit;
} 
```

---HTML---

```
<div id="order_map_wrapper" >
    <div id="order_map_middle"> 
        <div id="order_map">
        </div>
    </div
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:55:36.103

我在网上有这个 V2 示例：

[http://maps.forum.nu/temp/gm_rounded_corners.html](http://maps.forum.nu/temp/gm_rounded_corners.html)

有时间我会尝试制作V3版本。

# css - CSS为一个类应用多个选择器？

> ID：10973844
> 
> 赞同：0
> 
> 时间：2012-06-11T01:57:43.443
> 
> 标签：css, css-selectors

这是 HTML

```
<p>x1</p> <p>x2</p> 
```

我希望 css 先选择 < p> 然后使用“:after”选择器：

```
p:nth-child(1):after{
  content:"- X1 !";
} 
```

这基本上应该做的是在第一个<p>之后添加“-X1！”
但是它不起作用，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:03:15.210

它确实有效，请参见此处：http: [//jsbin.com/ujolek/2/edit](http://jsbin.com/ujolek/2/edit)

你也可以这样做：

```
p:first-child:after{  content:"- X1 !" } 
```

# android - Eclipse中缺少android文件

> ID：10973845
> 
> 赞同：2
> 
> 时间：2012-06-11T01:58:10.380
> 
> 标签：android, xml, eclipse

我对android真的很陌生，我遇到了一个我不清楚的问题。

几个小时前，我在一个项目上工作，保存了所有文件并关闭了 eclipse。当我几分钟前重新启动它时，缺少几个文件，即 AndroidManifest（在 SO 上看到了一些其他问题），还有我创建并保存在的所有 XML 文件`res/layout`，`res/values`以及`res/menu`（它们不仅在 eclipse 中丢失，而且当我通过资源管理器打开项目时）。另一方面，在我的主要活动中，eclipse 在调用`setContentView(R.layout.show_start_site)`.

我读过 res/ 下的大多数 xml 文件都已编译。但是在关闭并重新打开 Eclipse 之后，我该如何进一步处理它们呢？通过资源管理器，在`classes/.../"appname"`我看到类文件，例如`R$Layout.class`，`R$menu.class`等等。

**更新**

我刚刚在另一个（随机）位置创建了一个新工作区，现在一切正常。真的不明白为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:43:13.337

你有没有偶然改变你的工作空间？

在 Eclipse 中，转到“文件”并向下切换工作区。它将显示您当前的工作区是什么，并确保这些文件在该工作区中。

# c++ - 在 boost::posix_time::ptime 和 mongo::Date_t 之间转换

> ID：10973846
> 
> 赞同：7
> 
> 时间：2012-06-11T01:58:16.873
> 
> 标签：c++, datetime, mongodb, boost

有没有一种简洁的方式，或者一种普遍接受的方式来从 a 转换`boost::posix_time::ptime`为 a`mongo::Date_t`并再次转换回来？

### Mongo 提升

[Boost 文档](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time/posix_time.html#ptime_from_funcs)似乎不完整或不正确。它记录了一个从 a`date_from_tm`构造结构的函数。但是，给出了以下示例：`date``tm`

```
tm pt_tm;
/* snip */
ptime pt = ptime_from_tm(pt_tm); 
```

但是没有记录功能`ptime_from_tm`。但是，[此头文件](http://www.boost.org/doc/libs/1_49_0/boost/date_time/posix_time/conversion.hpp) *确实包含*该功能。

所以，我至少可以从`mongo::Date_t`到`boost::posix_time::ptime`：

```
mongo::Date_t d = ...;
std::tm t;
d.toTm(&t);
boost::posix_time::ptime pt = ptime_from_tm(t); 
```

### 提升到 Mongo

当涉及到相反的方向时，我有点卡住了。[MongoDB 文档](http://api.mongodb.org/cplusplus/2.1.0/structmongo_1_1_date__t.html)相当不完整，相关的头[文件](http://api.mongodb.org/cplusplus/2.1.0/misc_8h_source.html)也没有很多有用的注释。基本上，该`Date_t`结构是从`unsigned long long`毫秒计数构造的。我只能*假设*从 1970-1-1:00:00.00 时代开始。

所以我目前从 a`boost::posix_time::ptime`到 a的解决方案`mongo::Date_t`是：

```
boost::posix_time::ptime pt = ...;
std::tm pt_tm = boost::posix_time::to_tm(pt);
std::time_t t = mktime(pt_tm);
mongo::Date_t d(t); 
```

当然，我可能可以将其折叠成一行，但似乎从一个日期/时间表示到另一个然后再返回的整个往返过程变得令人费解和混乱。

## 最后

有没有更好的办法？是否有人对这两个库有更好的了解并且对日期/时间编程有很好的理解，是否知道一种简洁、简单的方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T08:35:40.287

看来您的解决方案从 ptime 转换为 Date_t 有一些问题，我尝试了它并得到了不正确的结果，正如我评论的那样。我有一个更好的方法：

```
mongo::Date_t convert(const boost::posix_time::ptime& time)
{
    boost::posix_time::ptime epoch(boost::gregorian::date(1970,boost::date_time::Jan,1));
    boost::posix_time::time_duration d = time - epoch;
    return mongo::Date_t(d.total_milliseconds());
}
boost::posix_time::ptime convert(const mongo::Date_t& time)
{
    boost::posix_time::ptime epoch(boost::gregorian::date(1970,boost::date_time::Jan,1));
    boost::posix_time::time_duration d = boost::posix_time::milliseconds(time.millis);//- epoch;
    return boost::posix_time::ptime(epoch+d);
} 
```

请注意，2.4.3（据我所知） Date_t::toString() 有错误，“日期”已添加 8 小时。[您可以在此处](http://www.epochconverter.com/)验证“总毫秒”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:39:41.237

> 基本上，Date_t 结构是由 unsigned long long 毫秒计数构成的。我只能*假设*从 1970-1-1:00:00.00 时代开始。

你是对的。

我认为您的代码与您将获得的一样好。你必须以某种方式到达一个类似于 time_t 的 seconds-since-the epoch，这对于 ptime来说似乎[有点复杂。](https://stackoverflow.com/questions/4461586/how-do-i-convert-boostposix-timeptime-to-time-t)

# ruby - (Ruby) sort=1,rating=0,(sort&&rating) == 1 返回真还是假？

> ID：10973850
> 
> 赞同：1
> 
> 时间：2012-06-11T02:00:20.150
> 
> 标签：ruby

**更新：我打错了 2 个变量……太尴尬了。感谢大家的努力！**

抱歉，我发现我为 2 个不同的 env 输入了错误的值，第一个是我设置的`sort = 0`，`rating=1`然后在 irb 中我设置了`sort=1`和`rating=0`。因为`a and b`当`a=1`它只`b`在第二种情况下评估时，我得到了`false`。现在很清楚了。粗心见谅，感谢大家的努力！

=======================

我的问题：我有 2 个变量`sort`和`rating`，但两者在 2 个不同的环境`sort&&rating == 1`中`sort and rating ==1`表现不同，如下所示：

1st，在我执行时在rails的调试器环境中`rails server --debug`，它们都返回`true`：

```
(rdb:130) rating 
1
(rdb:130) sort
0
(rdb:130) sort and rating == 1
true
(rdb:130) sort && rating == 1
true
(rdb:130) (sort && rating) == 1
true 
```

第二，在正常的irb中，它们都返回`false`：

```
irb(main):001:0> sort = 1
=> 1
irb(main):002:0> rating = 0
=> 0
irb(main):003:0> sort||rating
=> 1
irb(main):004:0> sort and rating
=> 0
irb(main):005:0> sort and rating == 1
=> false
irb(main):006:0> sort && rating == 1
=> false
irb(main):007:0> 0 == true
=> false
irb(main):008:0> 
```

我知道 Ruby 是如此动态，以至于……这种情况可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:07:04.510

是的，这种情况是可能的，`0`并且`1`被评估为数字（`Fixnum`类），因此它们都不同于`false`. 并且任何不为假的东西都必须是`true`（除了`nil`）。

您可以使用该`.zero?`方法隐式转换为`boolean`.

此外，运算符`||`and 与and`&&`不同。后者的优先级低于分配，因此当您键入时`or``and`

```
sort and rating 
```

实际发生的情况是，该语句并未像您想象的那样执行，因为仅评估了第二个操作数（因此仅将其值作为结果推送）。

想一想

```
ruby-1.9.2-head > 4 and 3
 => 3 
ruby-1.9.2-head > 3 and 4
 => 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:37:32.153

它与 Ruby 的活力无关，而与在 Ruby 中零不会评估为假的事实有关，这与 JavaScript 或 C 不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:37:36.187

首先，在布尔上下文中，零在 Ruby 中计算为真，而不是假。唯一不正确的是`false`它自己和`nil`。其他一切——包括空数组、空字符串、数字零——都被认为是真的。

其次，布尔运算符的行为可能与您想象的不太一样。因为`and`和`&&`是相同的，除了优先级，同样`or`和`||`。我将它们统称为`AND`and `OR`。这些是规则：

`a AND b`如果 a 为假，则返回 a，如果 a 为真，则返回 b。

`a OR b`如果 a 为真，则返回 a，如果 a 为假，则返回 b。

所以它们实际上只是 和 的简写`if a then b else a`，`if a then a else b`分别。真值表是熟悉的，但实际结果总是与输入之一相同，而不是一些新构造的纯布尔值。

尽管优先级不同，这两个版本：

```
sort AND rating == 1 
```

等同于：

```
sort AND (rating == 1) 
```

因此，由于 sort 为零，这是真的，上面的表达式返回 的值`(rating == 1)`，这也是真的（事实上，`true`）。如果你和 一起去`rating AND sort == 1`，它会是`false`，因为`sort`不是 1。

如果您遵循上面给出的规则，您可以看到其他结果的来源。

**注意：**正如 Andrew 在评论中所提到的，所有这些不同的“真实”值仍然与其`true`自身不同；0 可能被认为是真的，但`0 == true`仍然是假的。（这适用于任何允许在条件上下文中使用非布尔值的语言；例如，在 C 中，任何非零数都为真，但这并不意味着任何两个非零数相等。）

由于这可能会令人困惑，尤其是在口头或纯文本交流中，您不能使用诸如 true/ 之类的格式化技巧`true`，Rubyists 经常借鉴 Stephen Colbert 的做法，将 true-but-not-necessarily-`true`值统称为“truthy” "，以及它们的反义词为“falsy”（或“falsey”；两种拼写我都见过）。此约定也用于其他语言（特别是 Douglas Crockford 在他的 JavaScript 书中），以区分实际的布尔值与在条件上下文中评估为真或假的其他值。

**ETA**：至于你从 回来的结果，`sort and rating==1`我无法重现。在 1.8.7 和 1.9.3 中，我得到了基于上述的预期输出：`false``irb`

```
$ irb
irb(main):001:0> sort=0
=> 0
irb(main):002:0> rating=1
=> 1
irb(main):003:0> sort and rating==1
=> true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T03:31:45.560

简单来说，在 Ruby 中，逻辑表达式返回决定表达式结果的第一个值，否则返回最后一个计算值。

阅读以下代码：

```
true and "foo" 
```

如您所知，`and`操作员必须确保两个值都被评估为`true`. 但是，仅在计算 时尚未确定`true`，因此决定性因素`"foo"`为真，将被接受为表达式的最终值。

另一个例子：

```
false and true 
```

看，`false`这里是决定性的，所以会被退回。

和这个：

```
false and nil 
```

`false`也以同样的理由返回。

该规则也可用于`or`运算符，如果一个值`true`在 的左侧`or`被评估，则不再评估右侧。

我认为您需要强调的另一个概念是，在 Ruby 中，任何期望`false`和`nil`is `true`。

# c# - 如何确定我的 DLL 是否正在注册或执行？

> ID：10973857
> 
> 赞同：2
> 
> 时间：2012-06-11T02:02:26.023
> 
> 标签：c#, visual-studio-2010, dll, .net-4.0, regasm

我有一个在 C# VS2010 .NET4 中开发的 IE 插件。似乎当 DLL 被注册（即安装）时，它会执行主构造函数，并且从那里有很多在那个时间点没有业务运行的代码。有没有办法可以确定 DLL 是否正在注册与实际执行的过程中，这样我就可以避免执行此代码？

它是通过 RegAsm 注册的

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:45:00.190

在您需要知道代码是否正在执行的地方添加系统哔声或跟踪到日志文件（带有时间戳）。

# magento - 如何防止 magento 重置我的 URL 重写？

> ID：10973866
> 
> 赞同：0
> 
> 时间：2012-06-11T02:04:01.973
> 
> 标签：magento

我有以下 magento 类别...

A类/B类

在类别 B 编辑屏幕中，有一个 url 键设置为：category-b

默认情况下，前端的结果将是：

www.mydomain.com/category-a/category-b

因此，在 URL 重写区域，我将其更改为重定向到：

www.mydomain.com/Category-B

它工作得很好，但是当我重新索引系统时，一切都被重置了。我丢失了自定义 URL 重写。

我怎样才能强制它不被重置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:43:38.043

您已经编辑了 magento 系统 url 重写。索引会忽略此更改。
为了满足您的需求，您应该创建“自定义”url-rewrite。
然后索引将尊重它们并且不会删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T00:53:54.770

为了解决这个问题，我首先确保我使用的是“自定义”选项，并提出我自己的唯一 ID 与系统为类别设置的 ID 不同

# c# - 控制台应用程序实体框架 db.savechanges 不保存

> ID：10973868
> 
> 赞同：0
> 
> 时间：2012-06-11T02:04:44.713
> 
> 标签：c#, entity-framework, c#-4.0

我一直盯着这个，直到我看不清。我有一个控制台应用程序，用于在将其转换为服务之前测试逻辑。从网络应用程序触发时，相同的代码工作正常学生对象被很好地填充并且它没有抛出任何错误，但它从不保存到数据库中。对我到底想念什么有任何见解吗？

我的 app.config 文件有连接字符串

```
<connectionStrings>
  <add name="DatabaseContext" connectionString="Data Source=|DataDirectory|Development.sdf" providerName="System.Data.SqlServerCe.4.0" />
  <add name="DevelopmentEntities" connectionString="metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlServerCe.4.0;provider connection string=&quot;Data Source=|DataDirectory|\Development.sdf&quot;" providerName="System.Data.EntityClient" />
</connectionStrings>

foreach (DataRow dr in dt.Rows)
{
    //fill student object and add to list
    Student s = new Student();
    s.SID = dr[0].ToString();
    s.FirstName = dr[1].ToString();
    s.LastName = dr[2].ToString();
    if (sctType == "TRAD")
    { s.Type = Convert.ToInt32(UniversityGateway.Data.Models.StudentType.Traditional); }
    else
    { s.Type = Convert.ToInt32(UniversityGateway.Data.Models.StudentType.AGS); }
    s.Email = dr[5].ToString();
    s.Address = new Address
    {
         Street = dr[6].ToString(),
        City = dr[9].ToString(),
        State = dr[10].ToString(),
        Zip = dr[11].ToString(),
    };
    s.UserActive = "Y";
    s.Status = Convert.ToInt32(UniversityGateway.Data.Models.StudentStatus.Pending);
    s.Password = "kHPrSps3JnTkmky7PakBZg==Wdc9Qgcz39p+s6+fqk/nUw==";
    students.Add(s);
    using (var db = new UniversityGateway.Data.DatabaseContext())
    {
        db.Students.Add(s);
        db.SaveChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:38:47.343

原来它正在保存对象。只是连接到与连接字符串中指定的数据库不同的数据库。关于如何解决这个问题的另一个问题。

# python - Python多处理+ scipy：过多的文件系统'stat'和'open'尝试

> ID：10973869
> 
> 赞同：3
> 
> 时间：2012-06-11T02:05:03.400
> 
> 标签：python, random, scipy, multiprocessing, strace

我在 Python 中观察到一些极端奇怪的行为。考虑以下代码：

```
from multiprocessing import Process  
import scipy

def test():
    pass

for i in range(1000):
    p1 = Process(target=test)
    p1.start()
    p1.join()
    print i 
```

当我对此运行 strace -f 时，我从循环中得到以下段：

```
clone(Process 19706 attached
child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x2b23afde1970) = 19706
[pid 19706] set_robust_list(0x2b23afde1980, 0x18) = 0
[pid 18673] wait4(19706, Process 18673 suspended
 <unfinished ...>
[pid 19706] stat("/apps/python/2.7.1/lib/python2.7/multiprocessing/random", 0x7fff041fc150) = -1 ENOENT (No such file or directory)
[pid 19706] open("/apps/python/2.7.1/lib/python2.7/multiprocessing/random.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 19706] open("/apps/python/2.7.1/lib/python2.7/multiprocessing/randommodule.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 19706] open("/apps/python/2.7.1/lib/python2.7/multiprocessing/random.py", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 19706] open("/apps/python/2.7.1/lib/python2.7/multiprocessing/random.pyc", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 19706] open("/dev/urandom", O_RDONLY) = 3
[pid 19706] read(3, "\3\204g\362\260\324:]\337F0n\n\377\317\343", 16) = 16
[pid 19706] close(3)                    = 0
[pid 19706] open("/dev/null", O_RDONLY) = 3
[pid 19706] fstat(3, {st_mode=S_IFCHR|0666, st_rdev=makedev(1, 3), ...}) = 0
[pid 19706] exit_group(0)               = ?
Process 18673 resumed
Process 19706 detached 
```

关于在文件系统中搜索“随机”的所有垃圾是怎么回事？我真的想避免这种情况，因为我在集群上并行运行了很多具有这种结构的进程，并且循环非常快，并且这种文件系统活动阻塞了文件系统元数据服务器，或者集群管理员告诉我.

如果我删除“import scipy”命令，那么这个问题就会消失：

```
clone(Process 23081 attached
child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x2b42ec15e970) = 23081
[pid 23081] set_robust_list(0x2b42ec15e980, 0x18) = 0
[pid 22052] wait4(23081, Process 22052 suspended
 <unfinished ...>
[pid 23081] open("/dev/null", O_RDONLY) = 3
[pid 23081] fstat(3, {st_mode=S_IFCHR|0666, st_rdev=makedev(1, 3), ...}) = 0
[pid 23081] exit_group(0)               = ?
Process 22052 resumed
Process 23081 detached 
```

但我需要在我的真实代码中使用 scipy，所以我不能只是摆脱它。或者也许我可以，但那会很痛苦。

有谁知道我为什么会看到这种行为？如果它是某些版本的怪癖，我正在运行以下命令：

python：2.7.1，多处理：0.70a1，scipy：0.9.0，

实际上，因为我刚刚意识到它可能取决于系统，所以我在笔记本电脑上运行了相同的代码并且没有问题（即输出相当于第二种情况）。在我正在运行的笔记本电脑上

python：2.6.5，多处理：0.70a1，scipy：0.10.0，

也许这是已修复的早期版本的 scipy 中的问题或错误？我对这样的任何东西的搜索都没有出现。即使这是问题所在，在集群上更改 scipy 的版本也不是那么容易，尽管如果需要，我可能可以让集群管理员构建更新的版本。

这可能是问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-24T16:52:05.593

这不是因为 Windows 或`__main__`模块。这也不是 Python 喜欢做生意的方式。而且，如果您重新检查，我想您会发现这是 Python 2.6 而不是 2.7 的行为，除非您运行的是修改后的 2.7。

您完全正确，该问题源于模块中的随机模块初始化步骤`multiprocessing.forking`——该步骤旨在防止您的进程在分叉产生*n 个*工作人员时创建所有通过完全相同的一系列伪程序向前迈进的工作人员随机数（例如，如果它们都使用这些数字协商 SSL 连接，则可能会危及安全性）：

```
 if 'random' in sys.modules:
            import random
            random.seed() 
```

但这里的关键是要认识到，从系统调用的角度来看，上述`import`语句*应该*是无操作的，因为如果模块名称已经作为键存在于`sys.modules`字典中，那么`import`只需返回它在其中找到的值无需尝试从文件系统加载任何内容：

```
>>> import sys
>>> sys.modules['fake'] = 'Not even a module'
>>> import fake
>>> fake
'Not even a module' 
```

`if`因此，上面引用的声明专门试图*防止*在模块甚至还没有加载`import`的情况下产生额外的费用。`random`当您在没有`scipy`加载的情况下进行实验时，`if`语句体甚至不会触发。

那么问题是什么？

问题是 2.7 之前的旧版本 Python 让您通过在位于包内的模块中说*两个不同的东西*：您可能正在尝试相对导入，或者您可能正在尝试导入顶级包. 请参阅 PEP 328，详细了解为什么这种模棱两可且代价高昂的行为现在已在较新版本的 Python 中被更改：`import foo``the_package.foo``foo`

[http://legacy.python.org/dev/peps/pep-0328/](http://legacy.python.org/dev/peps/pep-0328/)

在此背景下，您可以查看您的`strace`输出并注意此处的答案中尚未提及的内容：列出的`stat()`和系统调用**不是尝试导入模块****，而是不存在的模块名为**!`open()`**`random``multiprocessing.random`**

这是尝试*额外*导入的关键原因，即使`random`已经列出`sys.modules`- 因为在 Python 2.6 允许回退到该`import`语句真正旨在导入的假设之前`random`，它必须消除它相反的可能性尝试相对导入，`multiprocessing.random`因为该`import`语句出现在`multiprocessing.forking`子模块的代码中。

程序员真的应该说`sys.modules['random'].seed()`而不是尝试新的导入来省去那些额外的系统调用。但希望一旦您有机会升级到更新版本的 Python，您不会被这种行为长期困扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:07:17.603

这就是 python 在导入模块时所做的事情。没有什么问题。在第一次访问之后，无论如何都会在文件系统缓存中，因此这不太可能导致任何问题。

Python 检查 PYTHONPATH 中的所有文件夹以查找具有给定名称的模块可能具有的所有有效名称。当您运行使用动态库的已编译程序时，也会发生类似的事情 - 动态链接器还将搜索库的各个位置，直到找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:35:23.233

好的，看起来 ThiefMaster 是完全正确的，没有任何问题，尽管我仍然不喜欢它并且会避免它。但首先，这就是正在发生的事情。在 multiprocessing.forking 中会发生以下情况：

```
class Popen(object):

    def __init__(self, process_obj):
        sys.stdout.flush()
        sys.stderr.flush()
        self.returncode = None

        self.pid = os.fork()
        if self.pid == 0:
            if 'random' in sys.modules:
                import random
                random.seed()
            code = process_obj._bootstrap()
            sys.stdout.flush()
            sys.stderr.flush()
            os._exit(code) 
```

因此，如果 'random' 在 sys.modules 中，那么它确实会导入 random 并使用它来生成新的随机种子。我想某些应用程序自动完成此操作可能会很好，但我当然不会想到它。也许这样做有充分的理由，但我不需要这样做。

由于我的多处理需求非常简单，我现在自己做叉子：

```
 childpid = os.fork()
    if childpid == 0:
        ...run code...
        os._exit(0)
    else:
        os.waitpid(childpid, 0) 
```

当然这不会导入，所以我没有搜索任何东西。也可以通过对多处理的适当位进行子类化并仅删除“导入”来使搜索消失。我不知道为什么我的笔记本电脑上没有进行搜索，因为我正在运行相同版本的多处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:25:38.673

你的操作系统是什么？我猜是Windows。正如 ThiefMaster 所指出的，这种行为是正常的，但您在每次循环迭代中都得到它的原因可能是因为[multiprocessing`__main__`](http://docs.python.org/library/multiprocessing.html#windows)在 Windows 上导入了[模块。](http://docs.python.org/library/multiprocessing.html#windows)尝试在一个`if __name__=="__main__"`块内保护你的循环。

# javascript - Javascript：谷歌地图标记列表中的错误href

> ID：10973874
> 
> 赞同：1
> 
> 时间：2012-06-11T02:06:02.607
> 
> 标签：javascript, google-maps, url, google-maps-markers, window.location

嗨 Stackoverflow 人，

我正在为谷歌地图标记实现 MarkerCluster 函数。我遇到了一个问题，看起来很简单，但我很难找到它。

该脚本获取通过 Django 模板传递的 json 字符串。显示效果很好，但每个标记的链接都是相同的（json 列表的最后一个）。**但是代码对我来说似乎很直接，每次迭代都会创建一个新的 href。这不正确吗？**

当我运行脚本时，所有链接都重定向到 json 列表中的最后一项。我该如何解决？

```
var data = {{ project_data|safe }};
var markers = [];
for (var i = 1; i < {{ len|safe }}; i++) {
    var dat = data[i];
    var latLng = new google.maps.LatLng(dat.lat, dat.lng);
    var marker = new google.maps.Marker({
        position: latLng,
        title: dat.name,
        });

    google.maps.event.addListener(marker, 'click', function() {
      window.location.href = "../projects/" + dat.link;  
    });

    markers.push(marker);
} 
```

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T02:15:40.113

我认为这是变量范围问题，只需替换它

```
google.maps.event.addListener(marker, 'click', function() {
  window.location.href = "../projects/" + dat.link;  
}); 
```

有以下

```
(function(dat) {
    google.maps.event.addListener(marker, 'click', function() {
        window.location.href = "../projects/" + dat.link;  
    });
})(dat); 
```

希望它能解决问题。

# image - 八度：“加载：加载矩阵常量失败”

> ID：10973883
> 
> 赞同：1
> 
> 时间：2012-06-11T02:08:11.893
> 
> 标签：image, matlab, save, octave

我想在 Octave / Matlab 中保存和加载一组图像。[FAQ 中](http://matlab.wikia.com/wiki/FAQ#How_can_I_process_a_sequence_of_files.3F)给出的一般说明似乎不适用于保存和加载（octave 3.2.4，Ubuntu 12.04）。

即，使用[bg_header_mwlogo_notag.jpg](http://www.mathworks.com/includes_content/nextgen/images/bg_header_mwlogo_notag.jpg)

```
images = cell(1, 1);
for i=1
    images{i} = imread('/tmp/bg_header_mwlogo_notag.jpg');
end
save images;
load images; 
```

给出：

```
error: load: failed to load matrix constant
error: load: trouble reading ascii file `'
error: load: reading file 
error: load: cell array element had unexpected name
error: load: failed to load cell element
error: load: trouble reading ascii file `images'
error: load: reading file images 
```

如何在一个文件中保存和加载多张图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:30:59.677

从文件中加载矩阵的 ASCII 表示存在一些问题。如果你宁愿发出

```
images{i} = double(imread('/tmp/bg_header_mwlogo_notag.jpg')); 
```

它实际上存储了数值，这对于 Matlab 来说非常好。您可以轻松检查这两种表示是否相等。另一方面，从文件中加载这种数字版本的矩阵是成功的。

# objective-c - 使用 NSData 或 NSFileManager 检查文件是否存在的区别

> ID：10973884
> 
> 赞同：4
> 
> 时间：2012-06-11T02:08:38.097
> 
> 标签：objective-c, cocoa-touch, nsdata, nsfilemanager

我正在尝试检查文件是否存在。如果我使用这个：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:filePath]];

if (data == NULL){
   ...
} 
```

我总是得到`NULL`。

比我发现`NSFileManager`：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:filePath]) 
```

像我期望的那样工作。是什么导致这两个程序之间的差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:49:38.730

您将哪种文件路径传递给 URLWithString？如果它是普通路径（不以 file://.... 开头），那么您应该使用 fileURLWithPath: 将字符串路径转换为 ​​URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T02:11:11.510

这两个类只有轻微的相关性。您使用的第一个函数是一个方便的方法，几乎​​可以肯定在后台使用 NSFileManager。但是，否则 NSData 有许多与文件无关的用途。

您使用两者中的哪一个取决于您的意图。如果你想读取文件的内容，你可能会使用第一个。如果你想删除一个文件，如果它存在，你肯定会使用第二个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:21:22.433

NSData 处理**内容**（或数据），可能是文件，可能不是。

NSFileManager 处理文件系统上的文件，例如文件的路径、复制/移动、枚举文件夹、检查权限等。它更多地与文件的抽象有关，而不是文件的内容。

# facebook - 画布应用滚动条 - 没有“可设置”选项

> ID：10973885
> 
> 赞同：0
> 
> 时间：2012-06-11T02:08:55.533
> 
> 标签：facebook, canvas, scroll

我已经在 Facebook 开发者中心发布了这个错误报告，但是（像往常一样在 Facebook 支持下）工作人员给出了一个快速的答案，这实际上并没有解决我真正的问题。错误报告位于[http://developers.facebook.com/bugs/109891925817737](http://developers.facebook.com/bugs/109891925817737)。有关所有详细信息，请参阅此链接。

简短的版本是在所有画布文档（例如[http://developers.facebook.com/docs/appsonfacebook/tutorial/](http://developers.facebook.com/docs/appsonfacebook/tutorial/)）中，有一个名为“settable”的高度选项，您可以将其与“setAutoGrow”一起使用以确保Facebook 画布框架总是根据应用程序的大小调整大小。如果你不使用它，你会得到一个奇怪的双垂直滚动条，这使得应用程序真的很难使用。

问题是，“可设置”选项实际上并不存在于应用程序设置中。Facebook 工作人员表示，这是现在“设计好的工作流程”。好吧，这很好，但真正的问题仍然存在 - 如何删除双垂直滚动条？我已经尝试了新“工作流程”中的两种可用设置，但它们都不能与“setAutoGrow”一起使用。

有谁知道如何设置这个？是否有关于如何考虑如何考虑解决双滚动条问题的新“工作流程”的文档示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:18:26.853

FB.setAutoGrow 的文档说它只在“画布高度”设置为“固定（800px）”时才有效，但我发现情况并非如此，设置为“流体”似乎也可以。

如果这两种设置都不适合你，我猜你做错了什么——比如没有先初始化SDK。

# android - android adb shell 权限被拒绝

> ID：10973886
> 
> 赞同：6
> 
> 时间：2012-06-11T02:08:57.400
> 
> 标签：android, shell, adb

我在使用`adb.exe`.

我想使用`adb.exe`与 bash 相同的 shell 提示符，所以我决定更改默认的 bash 二进制文件（当然二进制文件是交叉编译的，一切都很完美）

更改 bash 二进制文件的顺序如下

1.  `adb remount`
2.  `adb push bash /system/bin/`

3.  `adb shell`

4.  `cd /system/bin`
5.  `chmod 777 bash`
6.  `mv sh sh.bak`
7.  `ln -s bash sh`

第一次更改成功，但第二次尝试时出现问题。

我推送了新的 bash 二进制文件，但我错过了更改 bash 的权限 777，并断开了`adb shell`.

后

```
C:\Program Files (x86)\Android\android-sdk\platform-tools>adb.exe shell
- exec '/system/bin/sh' failed: Permission denied (13) -

C:\Program Files (x86)\Android\android-sdk\platform-tools> 
```

有什么聪明的主意可以解决这个权限问题吗？

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:32:06.377

如果设备没有完全崩溃（/system/bin/sh 是很多事情的依赖项 - 重新启动可能不会很远！）并且系统分区仍然是可写的，您可能能够 adb push a new copy bash，您在推送之前在主机系统上根据需要设置了权限位（您可能必须使用 cygwin 甚至 linux 才能在本地*拥有权限位）*

听起来设备已植根，因此您可以配置或自定义终端仿真器应用程序以使用备份 sh 为您提供会话，使用一些升级工具以 root 身份再次运行备份 sh，然后解决问题。

如果您使用 adb 进行了修改恢复，则可以通过手动挂载（正常）系统分区从那里修复它。

最后的手段是从供应商签名的原版图像中恢复。

希望您不会被卡住，**但也许您已经从这次经历中学到了**——更改默认 shell 可能不是一个好主意。最好以不同的名称加载您的自定义 shell 并手动运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:38:33.180

做这些事情的一般解决方案：删除系统应用程序和所有。

```
adb shell
mount -o rw,remount -t yaffs2 /dev/block/mtdblk4 /system
cd /system/app/
rm maps.apk
mount -o ro,remount -t yaffs2 /dev/block/mtdblk4 /system
sync
reboot 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T08:47:41.410

如果您安装了最新版本的 CWM，则可以保存

a) adb reboot recovery（启动手机进入恢复）

b) 在 CWM 中恢复挂载/系统分区（使用您的手机）。

c) adb kill-server

d) sudo adb start-server

e) 亚行外壳

f）做你的事情正确设置你的权限

我受到这里答案的影响[https://android.stackexchange.com/questions/38085/is-it-a-hard-brick/113507#113507?newreg=6e0c0c0be98349058d3e1668532cd7dc](https://android.stackexchange.com/questions/38085/is-it-a-hard-brick/113507#113507?newreg=6e0c0c0be98349058d3e1668532cd7dc)

# c# - 是否有一个 C# 习惯用法要创建然后添加到集合中？

> ID：10973889
> 
> 赞同：2
> 
> 时间：2012-06-11T02:09:53.310
> 
> 标签：c#, idioms

说我有这个：

```
private list<myClass> myCollection; 
```

是否有一种编程习惯可以将这种非常常见的语句组合缩短为一条语句？：

```
 if (myCollection == null)
      myCollection = new list<myCollection>();

   myCollection.Add(someInstanceOfMyClass); 
```

该成语可以描述为“必要时创建，然后添加”

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T02:11:02.523

为什么不简单地在声明时创建？：

```
private readonly List<myClass> myCollection = new List<myCollection>(); 
```

实例化单个列表不是一件耗费时间或内存的事情。（如果你有成千上万个这样的对象并且想要惰性实例化，可能会有所不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:16:25.777

你*可以*做这样的事情：

```
private List<myClass> myCollection { get {
   if (_myCollection == null) _myCollection = new List<myCollection>();
   return _myCollection;
}}
private List<myClass> _myCollection; 
```

然后后来：

```
myCollection.Add(someInstance); 
```

它将调用 getter，它检查 null。

[但根据Mitch Wheat 的回答](https://stackoverflow.com/a/10973897/369)，最好只创建一次列表

# javascript - HTML 文本框屏蔽或验证

> ID：10973890
> 
> 赞同：0
> 
> 时间：2012-06-11T02:10:03.307
> 
> 标签：javascript, regex

我的 html 页面中有文本框，我想在小数点前后接受 2 位数字。我怎样才能在 html 或 javascript 中做到这一点？

样本值为：

```
02.50
10.25
00.00 
```

**代码：**

```
function inputControl(input,format)
{
    var value=input.val();
    var values=value.split("");
    var update="";
    var transition="";
    if (format=='int'){
        expression=/^([0-9])$/;
        finalExpression=/^([1-9][0-9]*)$/;
    }
    else if (format=='float')
    {
        var expression=/(^\d+$)|(^\d+\.\d+$)|[,\.]/;
        var finalExpression=/^([1-9][0-3]*[,\.]?\d{0,2})$/;
    }   
    for(id in values)
    {           
        if (expression.test(values[id])==true && values[id]!='')
        {
            transition+=''+values[id].replace(',','.');
            if(finalExpression.test(transition)==true)
            {
                update+=''+values[id].replace(',','.');
            }
        }
    }
    input.val(update);
} 
```

[http://jsfiddle.net/8Uuvb/39/](http://jsfiddle.net/8Uuvb/39/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:42:38.290

在分割每个数字和小数的状态下，您可以尝试如下：

```
//1st Make value to string:
value = value.toString();

//2nd Split the digit and decimal:
var values=value.split(".");

//3rd Getting Digit & Decimal in String Form & converting back to integer
var Digit = Number(values[0]);
var Decimal = Number(values[1]); 
```

参考：

1.  将字符串转换为数字：[点击这里](http://www.w3schools.com/jsref/jsref_number.asp)
2.  将数字转换为字符串：[点击这里](http://www.w3schools.com/jsref/jsref_tostring_number.asp)

# java - Java 应用程序无法启动

> ID：10973891
> 
> 赞同：3
> 
> 时间：2012-06-11T02:10:10.937
> 
> 标签：java

我目前正在使用 Ubuntu 11.10 和 java SE 1.6.0_26。我正在尝试运行一个非常简单的“Hello World”应用程序。我将 java 文件`HelloWorld.java`放在 Home 文件夹中。我使用命令编译它`javac HelloWorld.java`。我认为它可以工作，因为它没有显示任何编译错误并且 a`HelloWorld.class`已创建。

当我输入命令时`java HelloWorld`，出现此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorld
Caused by: java.lang.ClassNotFoundException: HelloWorld
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: HelloWorld.  Program will exit. 
```

顺便说一句，这是我的 java 代码：

```
public class HelloWorld {
    public static void main (String args[]) {
        System.out.println("Hello World!!!");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T02:17:46.163

可能是该文件不在您的类路径中。请尝试以下命令：

```
java -classpath . HelloWorld 
```

五

# database - 无法在 cassandra 创建列族

> ID：10973894
> 
> 赞同：1
> 
> 时间：2012-06-11T02:10:28.937
> 
> 标签：database, cassandra

我创建了一个 cassandra 的多节点集群：node0 和 node1（cassandra 版本 1.1.1），然后我使用 cassandra-cli 连接到 node0 并创建了一个列族。node0 的信息没问题，但它在 node1 处抛出异常，如下所示：

```
    错误 18:22:48,486 线程 Thread[MigrationStage:1,5,main] 中的异常
    org.apache.cassandra.db.marshal.MarshalException：无效的 UTF8 字节 4fd5c745
        在 org.apache.cassandra.db.marshal.UTF8Type.getString(UTF8Type.java:56)
        在 org.apache.cassandra.cql3.ColumnIdentifier.(ColumnIdentifier.java:47)
        在 org.apache.cassandra.cql3.CFDefinition.getKeyId(CFDefinition.java:125)
        在 org.apache.cassandra.cql3.CFDefinition.(CFDefinition.java:59)
        在 org.apache.cassandra.config.CFMetaData.updateCfDef(CFMetaData.java:1303)
        在 org.apache.cassandra.config.CFMetaData.keyAlias(CFMetaData.java:224)
        在 org.apache.cassandra.config.CFMetaData.fromSchemaNoColumns(CFMetaData.java:1187)
        在 org.apache.cassandra.config.CFMetaData.fromSchema(CFMetaData.java:1215)
        在 org.apache.cassandra.config.KSMetaData.deserializeColumnFamilies(KSMetaData.java:291)
        在 org.apache.cassandra.db.DefsTable.mergeColumnFamilies(DefsTable.java:396)
        在 org.apache.cassandra.db.DefsTable.mergeSchema（DefsTable.java:271）
        在 org.apache.cassandra.db.DefsTable.mergeRemoteSchema（DefsTable.java:249）
        在 org.apache.cassandra.db.DefinitionsUpdateVerbHandler$1.runMayThrow(DefinitionsUpdateVerbHandler.java:48)
        在 org.apache.cassandra.utils.WrappedRunnable.run（WrappedRunnable.java:30）
        在 java.util.concurrent.Executors$RunnableAdapter.call（未知来源）
        在 java.util.concurrent.FutureTask$Sync.innerRun（未知来源）
        在 java.util.concurrent.FutureTask.run（未知来源）
        在 java.util.concurrent.ThreadPoolExecutor.runWorker（未知来源）
        在 java.util.concurrent.ThreadPoolExecutor$Worker.run（未知来源）
        在 java.lang.Thread.run（未知来源）

```

然后我将数据存储到 node0 的列族中，我可以在 node0 处获取数据，并且 node1 说找不到列族。重启node1后，我可以像node0一样在node1获取数据。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:34:58.507

这是即将发布的 1.1.2 版本中修复的错误：[https](https://issues.apache.org/jira/browse/CASSANDRA-4307) ://issues.apache.org/jira/browse/CASSANDRA-4307 。如果要测试修复，可以`trunk`从 Apache 的 git 存储库中提取分支。

# php - 是否可以使用 AWS 用户的登录信息检索访问密钥？

> ID：10973895
> 
> 赞同：0
> 
> 时间：2012-06-11T02:10:49.327
> 
> 标签：php, amazon-s3, amazon-web-services

我正在尝试构建一个项目来帮助用户管理他们的 S3 帐户。然而，要做到这一点，它需要他们手动向我提供他们的访问密钥。不过这很复杂，我想让他们更容易。

有没有办法通过使用他们的登录信息来检索他们的访问密钥？

如果解决方案是在 PHP 中，我会更喜欢，但这不是义务。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:20:08.177

**如果 S3 存储桶适用于您账户中的用户**

如果您谈论的是与您控制的账户中的用户关联的访问密钥，请查看*AWS Identity and Access Management* / [ListAccessKeys](http://docs.amazonwebservices.com/IAM/latest/APIReference/API_ListAccessKeys.html)。

> IAM [身份和访问管理] 是一项 Web 服务，使 AWS 客户能够管理其 AWS 账户下的用户和用户权限

**如果 S3 存储桶用于您不拥有的账户**

如果您正在谈论与其他人的 AWS 账户关联的访问密钥（以及根据您的评论密钥），[根据 AWS](http://docs.amazonwebservices.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html#AccessKeys)，您只能从 AWS 安全凭证页面上的访问密钥选项卡获取访问密钥。

这很有意义，因为访问密钥是受保护的帐户机密。提供一个 API 来检索秘密是没有意义的。

此外，如果用户向您提供了他们的帐户凭据，那将是一个巨大的安全问题。您可以启动任何您想要的 AWS 资源，他们将承担责任。即使他们 100% 相信你不会这样做，如果你允许登录数据被黑客入​​侵，黑客也可以这样做。如果[LinkedIn 登录数据可能被黑客入侵](http://money.cnn.com/2012/06/06/technology/linkedin-password-hack/index.htm)，那么您也可能被黑客入侵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:20:53.387

给定用户名，您可以使用[ListAccessKeys](http://docs.amazonwebservices.com/IAM/latest/APIReference/API_ListAccessKeys.html) api 列出用户访问密钥。

但是您的问题似乎有问题。为了使用上述 api，您需要使用 accesskey - secret 对对请求进行签名。而且我认为您不会拥有他们，因为您正在为其他人构建工具，除非您的 aws 帐户中的用户和至少对 s3 和 iam 的完全权限。

然后再一次，这将允许您只获得访问密钥而不是他们的秘密。询问秘密就像询问某人的密码，以便您可以代表他们做某事。因此，您无法通过任何 api 从 aws 获取秘密，获取秘密的唯一方法是用户将其提供给您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:56:39.370

我找到了一种让它工作的方法。基本上，我已经建立了一个 Selenium Webdriver 服务器并下载了所有需要的 C# 文件。然后我创建了这个小脚本：

```
 static void Main(string[] args)
    {
        IWebDriver driver;
        driver = new FirefoxDriver();

        driver.Navigate().GoToUrl("https://aws-portal.amazon.com/gp/aws/securityCredentials");
        driver.FindElement(By.Id("ap_email")).Clear();
        driver.FindElement(By.Id("ap_email")).SendKeys("USER@EMAILACCOUNT.COM");
        driver.FindElement(By.Id("ap_password")).Clear();
        driver.FindElement(By.Id("ap_password")).SendKeys("HISPASSWORD");
        driver.FindElement(By.Id("signInSubmit")).Click();

        IList<IWebElement> keys = driver.FindElements(By.LinkText("Show"));
        int nbElems = keys.Count;
        System.Console.WriteLine(nbElems+" keys");
        foreach (IWebElement k in keys)
        {
            String toparse = k.GetAttribute("href");
            Regex regex = new Regex(@"'(?<key>.*)','(?<secret>.*)'");

            GroupCollection groups = regex.Match(toparse).Groups;

            System.Console.WriteLine(groups["key"] + " " + groups["secret"]);
        }

        driver.FindElement(By.LinkText("Sign Out")).Click();
        driver.Quit();
    } 
```

现在我只需要找到一种方法将用户信息安全地发送到这个脚本。

谢谢你们的帮助！

# c# - 覆盖 CreateTempDataProvider() 以解决 System.Web.Mvc.Controller.PossiblyLoadTempData() 处的空引用异常

> ID：10973901
> 
> 赞同：4
> 
> 时间：2012-06-11T02:11:42.690
> 
> 标签：c#, asp.net-mvc-3, controller, overriding

所以我刚刚在我的 MVC3 站点上实现了一个基本控制器，以便在加载每个视图之前执行一些操作。特别是我想要一些可以作为一种母版页代码的东西。一旦我滚动它并使我的所有控制器都从我的基本控制器继承，我会收到此错误：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

[NullReferenceException: Object reference not set to an instance of an object.]
System.Web.Mvc.Controller.PossiblyLoadTempData() +11
System.Web.Mvc.Controller.ExecuteCore() +38
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

我阅读了一些您需要覆盖 CreateTempDataProvider() 并返回某些内容或其他内容的地方，但我不太清楚这样做的代码。我对 .NET 比较陌生，之前还没有覆盖任何东西，所以我不知道该怎么做。如果您以前遇到过这种情况，或者知道该怎么做，请帮助！

这是我的基本控制器以及我迄今为止所做的覆盖尝试无济于事：

```
 public class BaseController : Controller
{
    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {

        string document = Path.Combine(HttpRuntime.AppDomainAppPath, "quote.xml");
        string _quote = "";
        string _author = "";
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(document);

        XmlNode Quote = xmlDoc.SelectSingleNode("quote/text");
        XmlNode Author = xmlDoc.SelectSingleNode("quote/author");

        _quote = Quote.InnerText;
        _author = Author.InnerText;

        ViewData["Quote"] = _quote;
    }

    protected override ITempDataProvider CreateTempDataProvider()
    {
        return base.CreateTempDataProvider();
    }
} 
```

这是我开始调试时尝试运行的控制器（如果需要，不知道）：

```
public class BlogController : BaseController
{
    private DarkRobotEntities1 db = new DarkRobotEntities1();

    //
    // GET: /Blog/

    public ViewResult Index()
    {
        var posts = db.Posts.Include(p => p.Blog).Include(p => p.Comments);
        return View(posts.ToList());
    }
...
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T02:20:54.260

您需要`base.Initialize()`在重写方法的顶部调用`Initialize()`以初始化基`Controller`类。

否则，`PossiblyLoadTempData()`将永远不会设置 by 使用的属性。

# javascript - 如何更快/更有效地使用 ajax 遍历 xml 文件？

> ID：10973904
> 
> 赞同：1
> 
> 时间：2012-06-11T02:12:05.983
> 
> 标签：javascript, jquery, xml, ajax, traversal

我有一个如下所示的 xml 文件：

```
<UUT>
<DKBFile>091750</DKBFile>
<part>
  <name>FL_U1</name>
  <xcoord>439</xcoord>
  <ycoord>132</ycoord>
  <width>55</width>
  <height>24</height>
</part>
</UUT> 
```

可能有几百个“零件”，我正在尝试获取名称/坐标信息。数量和我正在获取信息的部分会发生变化，但是一旦我试图获取超过 100 个部分的信息，遍历就会变得非常缓慢。这是我的代码：

```
$.ajax({
url: "PROFILER_ShopAid/shopaid.xml",
dataType: ($.browser.msie) ? "xml" : "text/xml",

success: function(data){    

var i = 1;  //array traversal
var xcoord = 0;
var ycoord = 0;
var width = 0;
var height = 0;
var part = "";
var nameFound = "";

//Get Part Count
var covCnt = DKB.GetClearedPartCnt();  //Gets number of parts

     //Get Part Info
while (covCnt >= i)
{
    part = DKB.GetClearedPart(i);  //Returns name of  part

    $(data).find("part").each(function() {
        nameFound = $(this).find("name").text();  

        if(part.toLowerCase() == nameFound.toLowerCase())
        {
            xcoord = parseInt( $(this).find("xcoord").text() );
            ycoord = parseInt( $(this).find("ycoord").text() );
            width = parseInt( $(this).find("width").text() );
            height = parseInt($(this).find("height").text() );

        }

    });
    i = i + 1;
}
},

error: function(){
}

}); 
```

xml 文件位于本地服务器上，此代码正在 HTA（HTML 应用程序文件）中使用。有没有更有效的方法来遍历 xml 文件？现在，获取大约 150 个零件的信息大约需要 15-20 秒。我已经为获取零件计数/零件名称（我注释掉了 AJAX 代码）而进行的查询计时了，对于大部分零件计数来说，这些查询的时间都在 200 毫秒以下。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:16:39.383

当您解析整个 XML 数据并在循环内创建一个新对象时`$(data)`。

相反，你应该把它放在你的循环之前，你应该会看到一个显着的差异。以下是更新的代码的相关部分：

```
...

var $data = $(data); // Do this once

while (covCnt >= i)
{

    part = DKB.GetClearedPart(i);  //Returns name of  part

    $data.find("part").each(function() {

    ... 
```

# objective-c - 如何显示相机但不让用户拍照？

> ID：10973905
> 
> 赞同：1
> 
> 时间：2012-06-11T02:12:25.070
> 
> 标签：objective-c, ios, camera

如何让用户看到前置摄像头，但阻止他们在 iPhone 4/4s 和/或 iPod Touch 4 上拍照、录像或切换到后置摄像头？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T02:44:46.900

```
cameraPicker = [[UIImagePickerController alloc] init];
....
cameraPicker.showsCameraControls = NO;
cameraPicker.cameraDevice = UIImagePickerControllerCameraDeviceFront; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:56:50.053

您可以使用 AVFoundation 框架打开相机。

试试这个示例代码[https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)。

# java - 需要帮助以正确的速率将对象从鼠标上移开

> ID：10973910
> 
> 赞同：0
> 
> 时间：2012-06-11T02:13:55.950
> 
> 标签：java, 2d, physics

我是编程新手，我正在尝试制作一个 2d 小程序，它将使一个圆圈或球远离鼠标。我希望这个程序中的物理原理起作用的方式是让对象像一个球一样，而鼠标像一个可移动的山丘。当鼠标离球越来越近时，它会越来越快地排斥球，而当鼠标离球越来越远时，球会减速并最终停止移动。我需要同时考虑鼠标和对象之间的总距离以及 x 和 y 距离，以便对象的移动更平滑且更逼真。我遇到的最大问题是，即使两点之间的距离变大，球离开的速度也保持相对恒定。目前，速率是 x 或 y 的距离乘以一个常数，并除以总距离。当鼠标靠近对象时，这或多或少会起作用，并且速率会增加，但是当鼠标移开时它会失败。当鼠标移开时，我希望速率降低并最终变为 0，但是在我当前的设置中，x 距离也会随着距离的增加而增加，并且速率不会像我想要的那样降低，如果有的话. 我现在的方式可能需要全部拼凑起来，感谢您的帮助。如果有的话，利率不会像我想要的那样下降。我现在的方式可能需要全部拼凑起来，感谢您的帮助。如果有的话，利率不会像我想要的那样下降。我现在的方式可能需要全部拼凑起来，感谢您的帮助。

```
 public void mouseMoved (MouseEvent e) 
{
    //distance between x coord
    xd=e.getX()-x;
    //distance between y coord
    yd=y-e.getY();
    //total distance between mouse and ball
    d=Math.sqrt((Math.pow(xd,2))+(Math.pow(yd,2)));

    //rate of x change
    xrate=(Math.sqrt(Math.pow(xd,2))*4)/(d);
    //rate of y change
    yrate=(Math.sqrt(Math.pow(yd,2))*4)/(d);

    //determines movement of ball based on position of the mouse relative to the ball
    if(xd>0)
    {
        x=x-((int)(xrate));
    }
    if(xd<0)
    {
        x=x+((int)(xrate));
    }
    if(yd>0)
    {
        y=y+((int)(yrate));
    }
    if(yd<0)
    {
        y=y-((int)(yrate));
    }

    //updates x and y coords of ball
    repaint();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:10:29.960

你只是做错了数学。

```
 //total distance between mouse and ball
 d=Math.sqrt((Math.pow(xd,2))+(Math.pow(yd,2)));
 //rate of x change
 xrate=(Math.sqrt(Math.pow(xd,2))*4)/(d); 
```

想想这个：

如果你只在 x 绳上移动，只会让 yd 等于 0 并且 d=|xd|

所以 xrate = |xd|*4/(d) = d*4/d = 4。

有一种简单的方法可以完成您的任务，只需将 xrate 和 yrate 与 xd 和 yd 相关联。

你可以试试这个：

```
if(xd==0){
  xd = 0.1;//minimum distance
}
if(yd==0){
  yd = 0.1;
}

xrate = (1/xd)*10; // you can change number 100 for proper speed
yrate = (1/yd)*10;
x = x - xrate;
y = y - yrate; 
```

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:45:55.223

尝试这个-

```
//rate of x change
xrate=(1.0/(d))*20; //20 is just a random constant I guessed
//rate of y change
yrate=(1.0/(d))*20; 
```

# jquery - nth-child 除非它有一个“隐藏”类

> ID：10973928
> 
> 赞同：1
> 
> 时间：2012-06-11T02:17:12.873
> 
> 标签：jquery, css, pseudo-class

我有几个带有浮动的项目 div，因此它们似乎在列中。用户可以单击任何给定项目上的“隐藏”，并为该元素添加一个“.hide”类，该元素具有 display:none css。

**问：**有办法`.item:not(.hide):nth-child(2n+2)`吗？因此，当我有一个项目列表，其中一个在中间有 .hide 时，该规则仍然适用并“忽略”该`.hide`项目。

jsbin 中的实时示例，[http://jsbin.com/ajeqal/edit#javascript,html,live](http://jsbin.com/ajeqal/edit#javascript,html,live)

如果您单击右侧列项目中的“隐藏”，则列会出现乱序，因为左侧列应该始终具有与右侧列不同的背景颜色。我可以将隐藏的项目移动到列表的末尾，但这需要更多的工作。

html:

```
<style>
  .hide { display:none;}
  .item{ float: left; width: 150px; padding: 5px; background: #ccc;}
  .item:not(.hide):nth-child(2n+1) { background: #999; margin-right:5px }
  .item a { display:inline-block; margin-left: 10px; }
  body { width: 325px; }
  #unhideAll { display: none; clear: left; margin-top: 20px;}
  #container { overflow: auto; }
</style>
<body>
  <div id="container">
  <div class="item">item<a href="#">hide</a></div>
  <div class="item">item<a href="#">hide</a></div>
  <div class="item hide">item<a href="#">hide</a></div>
  <div class="item">item<a href="#">hide</a></div>
  </div>
  <div id="unhideAll"><a href="#">Unhide All</a></div>
</body> 
```

JS：

```
$('#unhideAll').click(function(e) {
  e.preventDefault();
  $(".hide").removeClass("hide");
  $(this).hide();
});

$(".item a").click(function(e) {
  e.preventDefault();
  $(this).parent().addClass("hide");
  $("#unhideAll").show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:02:22.020

Nth-child 在处理组的过滤选择时可能会违反直觉。

使用 .each() 来绕过它的限制：

```
var count = 0;
$('.item:not(.hide)').each(function(){
    if ( count++ % 2 == 1 ) $(this).css('background-color','#999')
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:02:20.350

没有 CSS 选择器可以做到这一点。相反，我必须获取所有“.hide”元素并将它们附加到包含它们的 div 中，基本上将它们全部移到最后。如果我这样做，那么它们将不再与其他项目混合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:27:58.433

首先，您可以改为使用 nth-child(odd)。

其次，如果你想试一试，你可以尝试添加一个 notHidden 类（最初都会有），当添加 'hide' 时删除 'notHidden' ，反之亦然。然后，您可以在 .notHidden 上进行 nth-child （理论上）。

正如其他人所说，您当前的操作方式将不起作用，因为 nth-child 不认为它已被删除，而且我不确定这是否会起作用，但如果没有别的，它可能会给您一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:42:41.260

你试过`.item:not(.hide):nth-of-type(2n+2)`吗？我将做一些测试来确认，但乍一看，它似乎可以工作。

# mysql - Django 日期列表

> ID：10973933
> 
> 赞同：1
> 
> 时间：2012-06-11T02:18:06.397
> 
> 标签：mysql, django, date, django-queryset

在 Django 中，我有一个 SQL 表，其中有一列包含日期列表。该字段是日期。

在views.py 文件中，我想获取这些日期的年份列表。我试过以下没有运气：

```
from mysite.WeatherData.models import WeatherData

time_list =[]
raw_time_list = WeatherData.objects.all()

for onedatum in raw_time_list:
    time_list += onedatum.time_stamp.isocalendar()[0] 
```

WeatherData 中的列称为 time_stamp，它包含日期数据。

我得到的错误是：
'int' 对象不可迭代。

我已经用 Wea​​therData.objects.filter(location = LocationCode) 在一年中的几周内完成了这项工作，它工作得很好，所以我不确定为什么现在这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:24:57.627

您会收到该错误，因为无法将整数附加到列表中。
这是重现错误的示例：

```
>>> l = []
>>> l += 1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not iterable
>>> l.append(1) # but we can use the .append() method instead
>>> l
[1] 
```

应用于您的代码：

```
for onedatum in raw_time_list:
    time_list.append(onedatum.time_stamp.isocalendar()[0]) 
```

# android - FragmentPagerAdapter instantiateItem 与片段一起使用？

> ID：10973937
> 
> 赞同：4
> 
> 时间：2012-06-11T02:19:02.403
> 
> 标签：android, fragment, android-viewpager, fragmentpageradapter

我试图让我的 FragmentPagerAdapter 工作，但这些例子对于现实生活来说有点容易：

```
@Override
public Object instantiateItem(final ViewGroup container, final int position)
{
    final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position)
        {
        case 0:
            resId = R.layout.favorites_fragment;
            break;
        case 1:
            resId = R.layout.nearby_list_fragment;
            break;
        default:
            throw new IllegalArgumentException("Index cant be mapped to fragement:" + position);
        }

    final View view = inflater.inflate(resId, null);

    viewPager.addView(view, 0);

    return view;
} 
```

因为我想使用片段，所以我已经混淆了我的这种方法，因为所有示例我都可以找到膨胀视图而不是在那里创建片段。这该怎么做 ？

PS：我使用的是 ActionBarSherlock lib 4.1 ...

谢谢， 詹斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:28:27.943

你到底想做什么？显示你的类的定义。您必须扩展`FragmentPagerAdapter`和实施`public abstract Fragment getItem(int position)`才能返回您的片段。不要覆盖它已经*在*.`instantiateItem()``FragmentPagerAdapter`

# javascript - jQuery：围绕现有 div 创建覆盖或灯箱效果

> ID：10973941
> 
> 赞同：2
> 
> 时间：2012-06-11T02:20:10.080
> 
> 标签：javascript, jquery-ui

是否有 jQuery 插件或效果可以在现有 div 元素周围创建覆盖/灯箱效果？从本质上讲，我想使整个页面变暗，除了已经在 DOM 中的特定 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T02:21:12.597

这是一个预制的：[http ://dev7studios.com/demo/jquery-spotlight/](http://dev7studios.com/demo/jquery-spotlight/)

这里有一个关于如何自己动手的教程：[http ://web.enavu.com/tutorials/making-a-cool-spotlight-effect-with-jquery/](http://web.enavu.com/tutorials/making-a-cool-spotlight-effect-with-jquery/)

# php - 是否有用于处理信用卡信息的 php 库？

> ID：10973947
> 
> 赞同：0
> 
> 时间：2012-06-11T02:20:31.857
> 
> 标签：php, credit-card, bank

首先，我研究了这个主题和许多相邻的主题，并且知道存储和处理信用卡信息的风险。我们已经采取了所有必要的步骤来强化我们的服务器，我们也是 PCI Compliment。现在，让我们尝试在这里停留主题:)

我们的系统将允许我们的客户添加他们的银行账户信息，以便他们可以接受客户的付款。我们正在尝试做的是支持最受欢迎/常见的银行供我们的客户使用。我们不能强迫我们的客户使用 authorize.net 和所有其他支付网关，大多数都是老式的，只有一个商业银行账户。

我试图找到一个大多数银行已经设置好的开源 php 库，但找不到任何东西。有人写过这样的东西吗？当然我们会仔细分析编码并添加我们自己的安全功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:05:10.527

看看[条纹](https://stripe.com/)。这不完全是您正在寻找的东西，但有点接近。

# php - 出于 Google 抓取的目的：单个 PHP 拉页面，还是每个不同项目的单独页面？

> ID：10973948
> 
> 赞同：1
> 
> 时间：2012-06-11T02:20:41.733
> 
> 标签：php, seo, search-engine

我正在创建一个站点，并希望为数据库表中的每一行提供单独的页面。每个页面上的信息都相当有用和全面，如果谷歌能够索引它们会非常好。

我最初的想法是只创建一个 PHP 模板页面并为用户正在查看的任何内容提取正确的信息，但我担心搜索引擎将无法索引所有页面。

我的第二个想法是批量创建/自动化将单个页面创建为 html 文件的过程（对于表中的 2000 多行），因为这样我就可以保证它们会被抓取。但是，如果我需要对设计进行更改，我将不得不重新处理它们。有点痛...

我最后的考虑是在我的站点中选择一个页面并在隐藏的 div 中列出所有可能的 php 页面，但我不确定搜索引擎是否可以从中索引。我假设他们只是从 HTML 中提取，所以它能够找到它，对吗？

有什么建议么？如果我可以创建一个根据用户点击的内容填充的单个页面，我会喜欢它，但我希望它们被编入索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:28:23.683

搜索引擎可以索引动态页面，因此使用一个 PHP 文件创建数千个独特的产品页面对于 SEO 来说是很好的。毕竟，每个页面/产品都有一个唯一的 URL，因此将被视为一个唯一的页面。您需要做的就是链接到您网站中的产品页面和/或提交[XML 站点地图](http://sitemaps.org)，以便确保它们被找到并编入索引。

通过链接您的页面，我的字面意思是链接到您的产品页面。搜索引擎主要通过以下链接查找新内容。因此，如果您希望找到您的产品页面，则需要链接到它们。使用基于表单的搜索并不是一个好方法，因为搜索引擎通常不能很好地处理表单。但是有很多方法可以链接到您的页面，包括 HTML 站点地图和产品类别页面，然后可以链接到该类别中的产品。真的，您获得产品页面链接的任何方式都是帮助确保它们被搜索引擎找到的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:17:36.273

您不必在不可见的 DIV 上发布链接！只需创建页面并获取参数化内容。您可以在 XML 站点地图中包含页面并提交给 Google，或者您也可以在 HTML 站点地图中包含您的页面网址。

# java - 继承和多态的区别

> ID：10973949
> 
> 赞同：3
> 
> 时间：2012-06-11T02:20:45.247
> 
> 标签：java, interface, polymorphism

我正在研究多态性。我无法确定 Java 中关于这两个特性的类比。

假设`Animal`类是一个具体的超类，它的子类是`Cat`和`Dog`。我知道这是一个继承的例子。`Cat`但是和类不是`Dog`类的多态`Animal`吗？

我非常了解Java中的接口。我不明白为什么使用接口而不是具体的类来解释多态性。可能创建接口的全部目的是创建多态，但我想知道为什么是接口而不是具体类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T02:25:24.450

[**遗产**](http://docs.oracle.com/javase/tutorial/java/concepts/inheritance.html)

```
class Animal{
  public void speak(){ System.out.println("Speaking something");}
}

class Person extends Animal{
 @Override
 public void speak(){ System.out.println("Hello..");}
} 
```

* * *

[**多态性**](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

```
Animal a  = new Person();
a.speak();// Hello 
```

> 多态性的字典定义是指生物学中的一个原理，其中一个有机体或物种可以有许多不同的形式或阶段。这个原则也可以应用于面向对象的编程和像 Java 语言这样的语言。一个类的子类可以定义自己独特的行为，但共享一些与父类相同的功能[[..]](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

* * *

**为什么是接口？**

您知道需要做什么，但您希望实施者决定如何做，您将让实施者强制实施这些东西

*   [何时最好使用 java 中的接口](https://stackoverflow.com/questions/2586389/when-best-to-use-an-interface-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:08:40.040

接口使用一种类型的多态性，即方法覆盖。

接口通常用作常用方法的契约。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:30:55.170

我不知道接口是解释多态性的最好方法。多态性是遗传的产物。从观察者的角度来看，这是在查看继承层次结构时发生的事情。每只动物都可能发出声音，但是当观察者真正观察到动物发出声音时，猫会喵喵叫，狗会吠叫。小型犬吠叫，而大型犬吠叫。多态性是使这些属性基于它们在继承层次结构中的位置隐式展示自己的能力。

接口是实现组合的一种方式。您可以将属性添加到其他相关或不相关对象可能具有或不具有的对象。这只狗是个流口水者。而猫是一个抓挠者。其他不一定属于动物继承层次结构的东西也可能具有这些流口水和/或抓挠属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T02:35:00.567

继承在 Java 中实现为分别使用`extends`or关键字对超类或接口的方法/字段进行简单扩展。`implements`无论哪种方式，您都可以在子类中访问超类的公共和受保护数据成员，并且当从外部对子类进行操作时，只能访问公共数据成员。

以您的示例为例，您可以定义几个类：

```
class Animal {
    private int location;

    public Animal() {
        location = 0;
    }

    public void move() {
        location += 10;
    }

    public int getLocation() {
        return location;
    }
}

class Dog extends Animal {
    @Override
    public void move() {
        setLocation(getLocation() + 5);
    }
 }

/*
 * The @Override flag is optional, but I prefer to put it there
 * to ensure that I am actually overriding a method or implementing
 * a method from an interface.
 */

class Cat extends Animal {
    @Override
    public void move() {
        setLocation(getLocation() + 15);
    }
} 
```

所以`Dog`两者`Cat`都扩展了 Animal - 这是一种继承关系。

多态性是完全不同的东西。根据维基百科：

> 多态性在工业中的主要用途（面向对象编程理论）是属于不同类型的对象能够响应同名的方法、字段或属性调用，每个调用都根据适当的特定于类型的行为。

用简单的英语术语来说，这只是意味着采取相同的想法或行动，并根据它是特定类型的对象以不同的方式实现它。在代码中：

```
public static void main(String[] args) {
    Animal animalArray = {
        new Animal(),
        new Cat(),
        new Dog()
    };

    for (Animal a : animalArray) {
        a.move();
    }

    System.out.println("Animal location: " + animalArray[0].getLocation());
    System.out.println("Cat location: " + animalArray[1].getLocation());
    System.out.println("Dog location: " + animalArray[2].getLocation));
} 
```

这将产生输出：

```
Animal location: 10
Cat location: 15
Dog location: 5 
```

请注意，每个对象 the `Animal`、 the`Cat`和 the`Dog`都作为`Animal`s 访问。这是可能的，因为每个类都是或 extends `Animal`，因此每个类都将始终具有 public 方法`move()`，在某些情况下它只是被重新定义。

接口的工作原理相同；如果一个类扩展了一个接口，则可以保证接口中定义的每个方法都有一些实现，因此可以根据接口实现的方法来使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T02:43:34.100

假设您已受雇创建一种编程语言，这是要求之一：

```
1 > 3 should call code from the integer comparison library.
1.0 > 3.0 should call code from the floating point comparison library.
"McDonald" > "MacDonald" should call code from the locale-aware string comparison library. 
```

该要求是“多态性”，其中相同的文本（> 运算符）根据情况（在本例中为操作数的类型）执行不同的操作。

您可以通过将整数、浮点数和字符串全部派生自同一个基类并将基类定义为具有虚拟比较运算符来满足这些要求。这可能会变得混乱。如果稍后，语言用户想要...

```
blue > yellow 
```

...要编译为执行颜色操作的代码，基类方法意味着说颜色、字符串、浮点数和整数都是更通用基础的特殊情况。我认为那会很奇怪。

另一种方法是为应用程序开发人员提供一种语言方式来创建任意类型并说明它们支持哪些操作，并让库开发人员为支持一组操作的任何类型提供函数。例如，您可以为支持比较和赋值运算符的任何类型编写排序例程。

这种方法称为接口，它的优点是可以很好地处理非常不同的类型。

# php - 如何使用 htaccess 设置 cookie？

> ID：10973955
> 
> 赞同：0
> 
> 时间：2012-06-11T02:21:45.793
> 
> 标签：php, .htaccess, cookies

我已经使用这个网站来测试[http://www.webpagetest.org](http://www.webpagetest.org) 并且在一些优化建议中，它建议我为我的图像和全局 css 设置 cookie；

如何使用 htaccess 设置 cookie？我想对站点徽标和几乎每个页面中加载的 global.css 进行 cookie。

我也读过雅虎开发者[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)，它建议cookies应该限制在最低限度，在我的情况下，更好的性能增强器是什么？

css 和站点徽标的加载时间很长，所以我想至少将它们保存为 cookie，但是我可以将大部分图像/脚本也保存为 cookie 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:36:15.127

Cookie 仅可用于跟踪网站用户的各种访问。您正在寻找的是缓存，并且缓存是通过浏览器完成的，而不是使用“.htaccess”。您唯一能做的就是*阻止*浏览器从您的页面缓存静态内容，有关详细信息，请查看[此问题](https://stackoverflow.com/questions/1370896/what-is-the-proper-way-to-tell-the-browser-not-to-cache)。也许您为您的内容设置了一个非常低的到期时间，并且每次都会获取它。

# amazon-web-services - 使用 AWS Elastic Beanstalk 将多个应用程序部署到单个 EC2 实例

> ID：10973956
> 
> 赞同：14
> 
> 时间：2012-06-11T02:22:40.700
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我已将 .Net 网站部署到 AWS Elastic Beanstalk。我现在想将另一个 .Net Web 项目（Web 服务）部署到由 AWS Elastic Beanstalk 创建的同一个 EC2 实例，但是在发布向导的环境页面中选择“使用和现有环境”是灰色的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T20:20:55.317

更新：这现在是可能的[https://aws.amazon.com/about-aws/whats-new/2016/08/aws-elastic-beanstalk-supports-asp-net-core-and-multi-app-net-支持/](https://aws.amazon.com/about-aws/whats-new/2016/08/aws-elastic-beanstalk-supports-asp-net-core-and-multi-app-net-support/)

不。与其他框架相比，.Net 部署对 EB 有一些限制。您不能在同一实例上部署多个应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-24T10:40:53.903

您可以使用 Multicontainer docker 环境部署多个应用程序[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_ecs.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_ecs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T06:47:42.960

您不能在同一个实例（或一组实例，例如由 ElasticBeastalk 形成的实例）上部署“网站”和“Web 应用程序”，因为它们运行不同的资源和策略。这是根据我在他们的网站上遇到的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T23:40:30.257

也许这个包可以帮助您在单个 Elastic Beanstalk 实例 (Apache) 上运行多个应用程序/网站：[https ://github.com/tscheiki/ElasticDeploy](https://github.com/tscheiki/ElasticDeploy)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T13:05:53.280

您还可以使用 Visual Studio AWS Toolkit 进行多应用程序部署：

[docs.aws.com/toolkit-for-visual-studio](https://docs.aws.amazon.com/toolkit-for-visual-studio/latest/user-guide/deployment-beanstalk-multiple-application.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-26T14:31:05.343

这是 Tomcat 环境的方法 - [https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/java-tomcat-multiple-war-files.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/java-tomcat-multiple-war-files.html)。

> 要创建包含多个 WAR 文件的应用程序源包，请使用以下结构组织 WAR 文件。

```
MyApplication.zip
├── .ebextensions
├── .platform
├── foo.war
├── bar.war
└── ROOT.war 
```

> 当您将包含多个 WAR 文件的源包部署到 AWS Elastic Beanstalk 环境时，可以从根域名之外的不同路径访问每个应用程序。前面的示例包括三个应用程序：foo、bar 和 ROOT。ROOT.war 是一个特殊的文件名，它告诉 Elastic Beanstalk 在根域中运行该应用程序，以便三个应用程序在[http://MyApplication.elasticbeanstalk.com/foo](http://MyApplication.elasticbeanstalk.com/foo)、[http://MyApplication.elasticbeanstalk.com上可用/bar](http://MyApplication.elasticbeanstalk.com/bar)和[http://MyApplication.elasticbeanstalk.com](http://MyApplication.elasticbeanstalk.com)。

# android - Android：为什么我的软键盘在这些按键事件之后隐藏了？

> ID：10973957
> 
> 赞同：2
> 
> 时间：2012-06-11T02:22:41.397
> 
> 标签：android

我的 Android 应用程序中有一个 WebView，这给我带来了问题。起初没有正确处理箭头键的 keyDown 事件，我不得不抓住 keyDown 并使用这样的 Javascript 来正确处理它们：

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Log.v(TAG, "KeyCode: " + keyCode + "    KeyEvent: " + event);
    switch(keyCode) {
    case 19: /* Up */
        this.loadUrl("javascript:editor.setCursor(editor.getCursor().line - 1, editor.getCursor().ch);");
    case 20: /* Down */
        this.loadUrl("javascript:editor.setCursor(editor.getCursor().line + 1, editor.getCursor().ch);");
    case 21: /* Left */
        this.loadUrl("javascript:editor.setCursor(editor.getCursor().line, editor.getCursor().ch - 1);");
    case 22: /* Right */
        this.loadUrl("javascript:editor.setCursor(editor.getCursor().line, editor.getCursor().ch + 1);");
    }
    return super.onKeyDown(keyCode, event);
} 
```

但是现在我遇到了一个问题，每次我使用其中一个箭头键时，软键盘都会隐藏起来。

我在 Stackoverflow 上发现了另一个问题，这似乎是完全相同的问题，但没有人回答他：

[防止按钮在 Android 上隐藏软键盘](https://stackoverflow.com/questions/8016430/prevent-buttons-from-hiding-soft-keyboard-on-android)

有什么方法可以防止软键盘隐藏在我身上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:15:42.910

因为 loadUrl/loadData/loadDataWithBaseUrl 在内部隐藏了软键盘。在用户键入他想要的所有内容之前，您不应该发送 javascript 事件。如果合适，请通过 javascript 处理事件。

# php - PHP str_replace 用数组中的随机替换替换需要？

> ID：10973958
> 
> 赞同：2
> 
> 时间：2012-06-11T02:22:46.697
> 
> 标签：php, arrays, string, random, str-replace

我已经研究并需要找到最好的方法来随机地用一系列可能性代替需求。

IE：

```
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$keyword = "[city]";
$values = array("Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami");

$result = str_replace("[$keyword]", $values, $text); 
```

结果是每次出现的城市都有“数组”。我需要用 $values 中的随机值替换所有出现的城市。我想以最干净的方式做到这一点。到目前为止，我的解决方案很糟糕（递归）。什么是最好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T02:29:25.603

您可以使用[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)为每个匹配项执行一个函数并返回替换字符串：

```
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$keyword = "[city]";
$values = array("Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami");

$result = preg_replace_callback('/' . preg_quote($keyword) . '/', 
  function() use ($values){ return $values[array_rand($values)]; }, $text); 
```

样品`$result`：

> 欢迎来到亚特兰大。我希望达拉斯每次都是随机版本。迈阿密不应该每次都是同一个亚特兰大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T02:33:07.287

你可以[`preg_replace_callback`](http://nz.php.net/manual/en/function.preg-replace-callback.php)使用[`array_rand`](http://nz.php.net/manual/en/function.array-rand.php)

```
<?php
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$values = array("Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami");

$result = preg_replace_callback("/\[city\]/", function($matches) use ($values) { return $values[array_rand($values)]; }, $text);

echo $result; 
```

[这里](http://codepad.viper-7.com/d6PwET)的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T03:02:25.423

这是另一个想法

```
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$pattern = "/\[city\]/";
$values = array("Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami");

while(preg_match($pattern, $text)) {
        $text = preg_replace($pattern, $values[array_rand($values)], $text, 1);
}

echo $text; 
```

还有一些输出：

```
Welcome to Orlando. I want Tampa to be a random version each time. Miami should not be the same Orlando each time. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T02:24:28.173

您正在使用`$values`数组替换文本，因此结果只是单词“数组”。替换应该是一个字符串。

您可以使用[`array_rand()`](http://php.net/array_rand)从数组中选择随机条目。

```
$result = str_replace($keyword, $values[array_rand($values)], $text); 
```

结果是这样的：

```
Welcome to Atlanta. I want Atlanta to be a random version each time. Atlanta should not be the same Atlanta each time.
Welcome to Orlando. I want Orlando to be a random version each time. Orlando should not be the same Orlando each time. 
```

如果您希望城市*每行*都是随机的，请查看@PaulP.RO 的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T15:04:12.783

如果：

1.  随机选择的四个城市占位符不应在您的 3 句字符串中重复，并且
2.  你不介意改变输入数组和
3.  您将始终有足够的值来容纳所有占位符，然后：

您可以将数组作为引用变量传递到自定义函数范围。这意味着当您通过 访问和删除值时`array_pop()`，不可能两次遇到同一个城市。`shuffle()`在执行替换之前，您只需要输入一次数组。

代码：（[演示](https://3v4l.org/iMTOR)）

```
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$keyword = "[city]";
$values = ["Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami"];
shuffle($values);

echo preg_replace_callback(
         '/' . preg_quote($keyword) . '/',
         function() use(&$values) { return array_pop($values); },
         $text
     ); 
```

潜在产出：

```
Welcome to Detroit. I want Tampa to be a random version each time. Dallas should not be the same Orlando each time. 
```

或者

```
Welcome to Orlando. I want Miami to be a random version each time. Atlanta should not be the same Detroit each time. 
```

或者

```
Welcome to Atlanta. I want Tampa to be a random version each time. Orlando should not be the same Dallas each time. 
```

等等

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-11T02:31:30.520

试试这个[http://codepad.org/qp7XYHe4](http://codepad.org/qp7XYHe4)

```
<?
$text = "Welcome to [city]. I want [city] to be a random version each time. [city] should not be the same [city] each time.";

$keyword = "[city]";
$values = array("Orlando", "Dallas", "Atlanta", "Detroit", "Tampa", "Miami");

echo $result = str_replace($keyword, shuffle($values)?current($values):$values[0], $text); 
```

# algorithm - 确定与垂直线相交的两条线段顺序的快速方法

> ID：10973960
> 
> 赞同：0
> 
> 时间：2012-06-11T02:23:12.807
> 
> 标签：algorithm

有没有更好的方法来确定与垂直线相交的两条线段的顺序？顺序是根据交点的 y 坐标。天真的方法是计算交点并进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:20:58.897

I can give you some pointers to solve this problem:

*   A more faster way to find the intersection between lines can be with the use of determinants as show this [Wikipedia entry](http://en.wikipedia.org/wiki/Line-line_intersection "Link to Wikipedia").
*   An algorithm to solve the more general version this problem, is the [Bentley–Ottmann algorithm](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm "Bentley–Ottmann algorithm"), created for testing whether or not a set of line segments has any crossings.

I believe this entry in the [Wikipedia](http://en.wikipedia.org/wiki/Line_segment_intersection "Wikipedia entry about line intersection") about Line segment intersection encompasses your inquiries in this matter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:24:53.420

我假设这些线是使用端点指定的。

具有端点 ( `x0`, `y0`)/( `x1`, `y1`) 的线与具有 x 坐标的垂直线的交点`x`在：

```
y = (dy/dx)(x - x0) + y0 
```

哪里`dx = x1 - x0`和`dy = y1 - y0`。

您有 2 行并且正在计算：

```
(day/dax)(x - ax0) + ay0 < (dby/dbx)(x - bx0) + by0 
```

您可以将两边相乘`dax * dbx`以消除分歧：

```
(day * dbx)(x - ax0) + (ay0 * dax * dbx) < (dby * dax)(x - bx0) + (by0 * dax * dbx) 
```

并简化一点：

```
(day * dbx)(x - ax0) - (dby * dax)(x - bx0) + (ay0 - by0)(dax * dbx) < 0 
```

这不一定更好——这取决于具体情况：

*   `dax`如果坐标是整数，这可以让你精确地执行测试，但是如果/ `dbx`/etc 很大，它也容易溢出
*   如果坐标是浮点数，如果浮点除法很慢，它可能会更快

# c# - 使用 WebClient 时出现 Parallel.ForEach 错误

> ID：10973965
> 
> 赞同：0
> 
> 时间：2012-06-11T02:24:10.590
> 
> 标签：c#, webclient, parallel.foreach

首先，我的免责声明：我是一个平行的菜鸟。我认为这将是一个容易解决的“令人尴尬的并行”问题，但它让我陷入了循环。

我正在尝试从网上并行下载一些照片。原始照片是高分辨率的，占用了相当多的空间，所以我会在下载后压缩它们。

这是代码：

```
 private static void DownloadPhotos(ISet<MyPhoto> photos)
    {
        List<MyPhoto> failed = new List<MyPhoto>();

        DateTime now = DateTime.Now;
        string folderDayOfYear = now.DayOfYear.ToString();
        string folderYear = now.Year.ToString();
        string imagesFolder = string.Format("{0}{1}\\{2}\\", ImagePath, folderYear, folderDayOfYear);

        if (!Directory.Exists(imagesFolder))
        {
            Directory.CreateDirectory(imagesFolder);
        }

        Parallel.ForEach(photos, photo =>
        {
            if (!SavePhotoFile(photo.Url, photo.Duid + ".jpg", imagesFolder))
            {
                failed.Add(photo);
                Console.WriteLine("adding to failed photos: {0} ", photo.Duid.ToString());
            }
        });

        Console.WriteLine();
        Console.WriteLine("failed photos count: {0}", failed.Count);

        RemoveHiResPhotos(string.Format(@"{0}\{1}\{2}", ImagePath, folderYear, folderDayOfYear));
    }

    private static bool SavePhotoFile(string url, string fileName, string imagesFolder)
    {
        string fullFileName = imagesFolder + fileName;
        string originalFileName = fileName.Replace(".jpg", "-original.jpg");
        string fullOriginalFileName = imagesFolder + originalFileName;

        if (!File.Exists(fullFileName))
        {
            using (WebClient webClient = new WebClient())
            {
                try
                {
                    webClient.DownloadFile(url, fullOriginalFileName);
                }
                catch (Exception ex)
                {
                    Console.WriteLine();
                    Console.WriteLine("failed to download photo: {0}", fileName);
                    return false;
                }
            }
            CreateStandardResImage(fullOriginalFileName, fullOriginalFileName.Replace("-original.jpg", ".jpg"));
        }
        return true;
    }

    private static void CreateStandardResImage(string hiResFileName, string stdResFileName)
    {
        Image image = Image.FromFile(hiResFileName);
        Image newImage = image.Resize(1024, 640);
        newImage.SaveAs(hiResFileName, stdResFileName, 70, ImageFormat.Jpeg);
    } 
```

所以这就是让我感到困惑的地方：每张照片都命中了该`webClient.DownloadFile`行的 SavePhotoFile() 方法的 Catch{} 块。错误消息是在 WebClient 请求期间发生的异常，内部详细信息是“进程无法访问文件...... -original.jpg，因为它正在被另一个进程使用。”

如果我对这个错误还不够困惑，那么接下来会发生什么让我更加困惑。事实证明，如果我只是忽略消息并等待，图像最终会下载并被处理。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:06:31.347

好的，所以在我对并行性的关注中，我犯了一个简单的错误：我假设我的数据不正确。Brianestey 发现了问题所在：Duid 并不是独一无二的。它应该是唯一的，除了在创建列表的过程中缺少一些代码。

解决方法是将其添加到 MyPhoto 类

```
 public override bool Equals(object obj)
    {
        if (obj is MyPhoto)
        {
            var objPhoto = obj as MyPhoto;
            if (objPhoto.Duid == this.Duid)
                return true;
        }
        return false;
    }

    public override int GetHashCode()
    {
        return this.Duid.GetHashCode();
    } 
```

# linux-kernel - 尝试安装自定义内核时如何解决“intel_agp module not found”错误？

> ID：10973967
> 
> 赞同：1
> 
> 时间：2012-06-11T02:24:20.063
> 
> 标签：linux-kernel

我在虚拟盒中运行 Fedora 17。我正在尝试做一些内核开发。因此，我从**kernel.org**获取了源代码，然后执行了以下步骤：

```
make oldconfig
make
sudo make modules_install 
```

这让我得到了`bzImage`我复制到的文件`/boot`。然后我运行`grub2-mkconfig`更新了我的 grub 条目。

现在我可以在 grub 菜单中看到我的自定义内核。但是，当我尝试运行它时，会出现以下屏幕：

![在此处输入图像描述](../Images/85b67ce31b8ea2188663128850b0f6f1.png)

我搜索了`intel_agp`错误，发现人们在他们的系统上同时拥有`GPU`和时遇到了这个错误`intel graphics`。但是我的`GPU`机器上没有。另外，我不确定是否安装了模块？

我在这里做错了吗？如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:17:43.370

您的发行版看起来像 Ubuntu，对吗？如果是这样，那么生成 initrd 的命令是：

（假设您的当前目录与包含内核源代码的目录相同）

```
update-initramfs -c -k `cat include/config/kernel.release` 
```

然后是：

```
update-grub 
```

initrd 和 rootfs 的逻辑（大致）是这样的：

首先做一个 blkid 和 df：

```
blkid
/dev/sda5: UUID="251ce906-e4db-4eac-a2c7-58d5e1ed86a3" TYPE="reiserfs" 

df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda5             24412432  22360832   2051600  92% /
none                   2959228      2352   2956876   1% /dev 
```

你会看到 rootfs 位于 /boot 所在的 reiserfs 上。所以这意味着当内核加载时 reiserfs 内核模块必须在那里，否则它无法读取 /boot，vmlinuz 内核映像喜欢的地方。所以initrd就是为了这个目的。

使用 initrd（你可以随时执行 gunzip -c existing_initrd_file | cpio -idmv）解压内容并查看所有 fs.*ko 文件。我的是：

```
./lib/modules/2.6.32-33-generic/kernel/fs/reiserfs/reiserfs.ko
./lib/modules/2.6.32-33-generic/kernel/fs/nfs_common/nfs_acl.ko 
```

然后你尝试将其与配置文件匹配：

```
CONFIG_REISERFS_FS=m 
```

但是如果你已经完成了 CONFIG_REISERFS_FS=y，那么你将不需要在 initrd 中的 reiserfs.ko。

总之，您现在的问题是缺少 initrd 文件，或者如果在命令行中指定了 initrd 文件，则 initrd 中缺少必要的 fs 内核模块，这将使您能够读取 /boot 目录。

是的，这也不完全正确，当涉及 grub2 时 - /boot/grub 将包含它自己的 fs 内核模块来加载 /boot 目录，并且 grub.cfg 将具有必要的 insert reiserfs 语句来加载模块。对不起，太多细节无法描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:59:04.070

您的问题不是缺少 intel_agp 模块。你的问题是下一行，它说你不能挂载你的根文件系统。最可能的原因是您缺少一个 initramfs，它包含您的根块设备或文件系统的驱动程序。

我并不是真正的 Fedora 专家，但您可能需要`mkinitrd`生成一个 initramfs 之类的东西，它还需要进入 /boot 并包含在您正在构建的新模块的 grub 配置中。

或者您可以将内核配置更新为内置（即，将配置选项设置为“y”而不是“m”）您需要构建的所有内容。但这需要对您的系统及其所需的 Linux 驱动程序有相当多的了解。

# coffeescript - 下划线在 Coffeescript 的控制台中不起作用

> ID：10973968
> 
> 赞同：11
> 
> 时间：2012-06-11T02:24:25.340
> 
> 标签：coffeescript, underscore.js

我刚刚开始使用 Coffeescript 和 Coffeescript 控制台，以及 Underscore。但是，每当我定义一个函数时，Coffeescript 都会确定这`_`意味着该函数，并且似乎忘记了`_ = require 'underscore'`.

为什么会这样？我该如何预防？
（我真的很希望能够将我的文件中的粘贴代码复制到控制台中。）

（`_`在 Coffeescript 控制台中是否有一些特殊含义？它是指“最后一个结果”还是什么？这可以解释我的问题吗？）

细节：

```
$ coffee 
coffee> _.contains [1, 2, 3], 3   # no Underscore, initially
TypeError: Cannot call method 'contains' of undefined
    at ...
coffee> 
coffee> _ = require 'underscore'
{ [Function]
  _: [Circular],
  VERSION: '1.3.3',
  forEach: [Function],
  ...

coffee> _.contains [1, 2, 3], 3    # now Underscore works fine
true
coffee> 
------> someFunction = (a, b) ->   # define a function ...
......>   a + b

[Function]
coffee> 
coffee> _.contains [1, 2, 3], 3     # now `_` is not Underscore any more!
TypeError: Object function (a, b) {    # Does `_` mean "last result" or sth?
  return a + b;
} has no method 'contains'
    at evalmachine.<anonymous>:3:7
    at Object.eval (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:142:17)
    at Interface.<anonymous> (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/repl.js:131:40)
    at Interface.emit (events.js:67:17)
    at Interface._onLine (readline.js:162:10)
    at Interface._line (readline.js:426:8)
    at Interface._ttyWrite (readline.js:603:14)
    at ReadStream.<anonymous> (readline.js:82:12)
    at ReadStream.emit (events.js:88:20)
    at ReadStream._emitKey (tty.js:327:10)
coffee> 
coffee> _ = require 'underscore'
coffee> _.contains [1, 2, 3], 3    # Now all is fine again, for a short while
true 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T02:50:48.133

CoffeeScript REPL的核心是[这个 JavaScript](https://github.com/jashkenas/coffee-script/blob/1.4.0/lib/coffee-script/repl.js#L143)：

```
try {
  _ = global._;
  returnValue = CoffeeScript["eval"]("_=(" + code + "\n)", {
    filename: 'repl',
    modulename: 'repl'
  });
  if (returnValue === void 0) {
    global._ = _;
  }
  repl.output.write("" + (inspect(returnValue, false, 2, enableColours)) + "\n");
} catch (err) {
  error(err);
} 
```

所以如果最后一个命令返回了一些东西，那么`_`就是那个东西。我找不到任何关于此的文档，但搜索`_`并不是一项非常有成效的活动。如果您想在 CoffeeScript REPL 中使用 Underscore.js，则必须将其命名为`_`.

感谢[Trevor Burnham](https://stackoverflow.com/users/66226/trevor-burnham)（他写[了这本书](http://pragprog.com/book/tbcoffee/coffeescript)，所以我认为我们可以信任他），我们知道 CoffeeScript REPL 使用`_`作为最后一个结果来匹配[node.js REPL](http://nodejs.org/api/repl.html#repl_repl_features)的行为：

> **REPL 特性**
> [...]
> 特殊变量`_`（下划线）包含最后一个表达式的结果。

Ruby`irb`做同样的事情。

# java - 如何比较 Hashmap 中的 2 个数组列表？

> ID：10973970
> 
> 赞同：3
> 
> 时间：2012-06-11T02:24:36.647
> 
> 标签：java, android, arraylist, hashmap

我有一个调用的数组列表，它返回`fetchContactName()`我的联系人列表中的所有姓名 (31)，一个调用的数组列表`fetchContactNumbers()`返回与 关联的所有电话号码 (31) `fetchContactName()`，以及一个调用的数组列表，`newList`它包含向我发送短信的所有号码 (6)。

我试图通过在 中`newList`查找相同的号码来更改电话号码`fetchContactNumbers()`。当有匹配时，我会索引 in 中的位置`fetchContactNumbers()`并使用该索引在`fetchContactName()`. 从那里，我将根据索引位置将数字替换`newList`为名称。`fetchContactName()`

这是我制作的一个示例，按上述方式执行：

[http://pastebin.com/pApHNkXa](http://pastebin.com/pApHNkXa)

上面示例的问题是，当我将其应用于 my 时`listview`，列表中只有一个元素更改为名称。更奇怪的是，`newList.get(3)`是唯一一个改名的。不在`newList`岗位上`0, 1, 2, 4 and 5`。

根据其他人的建议，我如何使用 a`HashMap`来给出与上面给出的示例相同的预期结果？有人告诉我使用`fetchContactNumbers()`and然后使用 与`fetchContactNames()`进行比较，但我找不到任何来源来实现这一点。`Hashmap``HashMap``newList`

**更新：**

这是我的 HashMap 的工作代码，但结果仍然与上面相同：

```
 for (String str : fetchContactNames()) {
        contactNameNew += str + " ";
    }
    for (String str2 : fetchContactNumbers()) {
        contactNumberNew += str2 + " ";
    }

    //String to split
    String temp[];
    String temp2[];
    String delimiter = " ";

    temp = contactNameNew.split(delimiter);
    temp2 = contactNumberNew.split(delimiter);

    HashMap<String, String> contacts = new HashMap<String, String>();
    contacts.put(contactNameNew, contactNumberNew);
    for(int i = 0; i < fetchContactNames().size(); i++){
        contacts.put(temp[i], temp2[i]);
    }

    Iterator<Entry<String, String>> iterator = contacts.entrySet().iterator();

    while(iterator.hasNext()){

        Entry<String, String> entry = iterator.next();
        int position = getPosition(newlist, entry.getValue());
    if (newlist.contains(entry.getValue())) {

        newlist.set(position, entry.getKey());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:49:35.620

我认为如果我更改您的代码并回答会更好...

```
import java.util.ArrayList;
import java.util.HashMap;

public class StringT {

public static void main(String[] args) {

    // alpha would represent fetchContactNames()
    ArrayList<String> alpha = new ArrayList<String>();
    // bravo would represent fetchContactNumbers()
    HashMap<String, String> bravo = new HashMap<String, String>();
    // charlie would represent newList
    ArrayList<String> charlie = new ArrayList<String>();

    bravo.put("1", "One"); charlie.add("5");
    bravo.put("2", "Two"); charlie.add("1");
    bravo.put("3", "Three"); charlie.add("3");
    bravo.put("4", "Four"); charlie.add("4");
    bravo.put("5", "Five"); charlie.add("2");

    // this will print charlie just as you see above
    for(int i = 0; i < charlie.size(); i ++){
        System.out.println(charlie.get(i));
    }

    System.out.println("---------------------");

    // this will print charlie with the numbers replaced as names
    for(int i = 0; i < charlie.size(); i++){
        String value;
        if((value = bravo.get(charlie.get(i))) != null){
            charlie.set(i, value);
        }
    }

    for(int i = 0; i < charlie.size(); i ++){
        System.out.println(charlie.get(i));
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:16:31.593

你的代码正在工作，你放在这里[http://pastebin.com/pApHNkXa](http://pastebin.com/pApHNkXa)我在 android 中尝试过它，它的工作正常，它给出的输出为五、二、七、三。

# jdbc - 如何用两个编写查询？占位符顺序？

> ID：10973971
> 
> 赞同：2
> 
> 时间：2012-06-11T02:24:55.957
> 
> 标签：jdbc, jdbctemplate, spring-jdbc

我使用的是NamedParameterJdbcTemplate，但发现这个问题出在底层的JdbcTemplate 类中，所以我将在JdbcTemplate 出现问题时展示问题（所以这里不用担心SQL 查询的安全性）。

这是我想要实现的目标：

```
String sql = "SELECT * FROM clients ORDER BY ? ?";
    return jdbcTemplate.query(sql,
            new Object[] { "name", "ASC" },
            new ClientResultSetExtractor()); 
```

我希望第一个占位符替换为“name”，第二个占位符替换为“ASC”，这将创建有效的 SQL 查询：

```
SELECT * FROM clients ORDER BY name ASC 
```

但不幸的是，运行该 jdbc 查询不起作用：

```
ERROR:  syntax error at or near "$2" at character 35
STATEMENT:  SELECT * FROM clients ORDER BY $1 $2 
```

我究竟做错了什么？

**编辑**

我曾假设问题是按顺序排列的两个占位符，但即使我删除了第一个占位符，它仍然不会只接受最后一个占位符，它应该告诉查询是按 ASC 还是 DESC 顺序排序。这是一个错误，如果不是，为什么这是不可接受的？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:48:58.820

您正在尝试错误地使用参数。

参数不是列名或 SQL 语句关键字。它们是数据内容（例如，`WHERE LastName = ?`是有效的参数化语句，`WHERE ? = 'Smith'`不是）。

# python - 将大列表有效序列化到数据库中？

> ID：10973974
> 
> 赞同：1
> 
> 时间：2012-06-11T02:25:52.003
> 
> 标签：python, mongodb, serialization, sqlite, memcached

我有大约 2900 万个单独的 unicode 元素要序列化到数据库中。我当前的解决方案使用 SQLite，并且每次发送一个长度为 100,000 的列表：

```
cursor.executemany("insert into array values (?)", [list of length 100,000]) 
```

我认为这会足够有效，但是在睡觉和醒来（比如 6 小时）之后，看到它还没有完成，我不这么认为。

**MongoDB 或 memcached 解决方案会更有效吗？**

（随意提出任何更有效的方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:42:33.070

如果您决定选择 memcached，请以下面提到的注意事项为例。

```
Memcached has a default setting of maximum data size that can be set as 1Mb. 
Any data size greater then that would require you to start the memcached explicitly stating the maximum size. 
```

我真的很喜欢使用 redis 来存储数据结构。因为你的要求不是很清楚。我建议您使用 redis，因为您可以以多种方式存储它并有趣地使用它。

请阅读可存储在 redis 上的不同数据结构的文档。

[http://redis.io/documentation](http://redis.io/documentation)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T06:33:25.593

尝试产生`gevent`线程，例如 10 并监视在给定时间内处理了多少记录，并尝试增加数量。您还应该调查`multiprocessing`

# eclipse - 为什么没有查看弹簧依赖项？

> ID：10973977
> 
> 赞同：1
> 
> 时间：2012-06-11T02:27:31.010
> 
> 标签：eclipse, maven, dependencies

我已经安装了 STS，创建了简单的控制台 Maven 应用程序。在我想添加springframework之后，但是添加依赖的大师似乎什么也没找到。![在此处输入图像描述](../Images/6cdcb9c2ae79610e6ad2d2adfb4c9b40.png)

我应该修复一些关于 Maven 的设置吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:37:49.047

我宁愿搜索[http://search.maven.org](http://search.maven.org)并手动粘贴 XML。

想想您的 Eclipse 客户端如何在服务器中的大量工件中找到您的依赖关系？m2e 从 Maven 存储库下载一个索引文件（可能并不总是可用）。这个文件非常大，而且比使用像[http://search.maven.org](http://search.maven.org)这样的服务器端搜索引擎效率低得多。

# c++ - Find 方法在较大的字符串中查找子字符串

> ID：10973985
> 
> 赞同：1
> 
> 时间：2012-06-11T02:30:00.330
> 
> 标签：c++, string, find, substring

我真的需要帮助我的程序的最后一部分。我需要在更大的字符串中找到一个字符串，如果找到则返回子字符串的起始位置。从方向：

> 请注意，您的字符串位置从 0 开始，以长度 -1 结束。如果未找到该字符串，则将返回值 -1。

我已经开始并编译了以下代码，我只想知道这是否真的正确。我不想太过分，但我需要专家的一些反馈。我这样做对吗？或者至少我朝着正确的方向前进？

```
const int MyString::Find(const MyString& other)
{
    int start(0);
    int counter(0);
    int end = other.Size;
    int count(0);
    int end1 = Size;
    int nfound = -1;

    char* temp;
    temp = new char[other.Size];

    if(other.String[0] != '\0' && other.String[0] != ' ')
    {
             if(other.String[count] == String[counter])
                    {
                            start = counter;

                            for(int i = count; i < end-1;i++)
                            {
                                    for(int j = counter; j < end1 -1; j++)
                                    {

                                            temp[j] = String[j];
                                    }
                            }
                            if(other == temp)
                            {
                                    return start;
                            }
                            else
                                    return nfound;
                    }

            else{
            while(other.String[count] != String[counter])
            {
                    counter++;
                    if(other.String[count] == String[counter])
                    {
                            start = counter;
                            for(int i = count; i < end-1;i++)
                            {
                                    for(int j = counter; j < end1 -1; j++)
                                    {

                                            temp[j] = String[j];
                                    }
                            }
                            if(other == temp)
                            {                 
                                    return start;                               
                            }
                            else
                                    return nfound;
                    }

            }

            }

    }
    else
    {
            return nfound;
    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:36:57.613

这行没问题，虽然它想要一个相应的`delete`语句：

```
temp = new char[data.Size]; 
```

但是，我怀疑这条线是否符合您的要求：

```
temp = data.String; 
```

假设`Mystring::String`（通常命名为`Mystring::string`，但让它通过）具有类型`char *`，后一行不会将任何字符从 复制`data.String`到缓冲区中`temp`。相反，*它丢失了缓冲区，*之后`temp`只是一个同义词，并指向与 相同的内存`data.String`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T03:06:54.647

写一段代码的时候，首先需要一个算法来实现，用自然语言来描述，用纸笔画出算法是如何进行的，再用纸笔验证算法。然后，一旦你认为你有一个解决方案，编码并测试它。但实际上用编程语言编码应该是你做的最后一件事。

在较大字符串中查找子字符串的简单算法将首先在较大字符串中搜索搜索模式中的第一个字符，称为该位置`start`。一旦找到，并从该锚点比较每个后续位置。如果它们不匹配，则从 开始搜索第一个位置的元素`start+1`。如果比较成功，那么你就完成了。如果在任何时候到达原始字符串的末尾，则搜索失败：

```
// pseudocode
start <- 0
while start <> str.size()
   start <- find( str+start, pattern[0] )
   if start == str.size()
      break
   if (compare_from( str+start, pattern ) == EQUAL)
      return success(start)
if start == str.size()
   return failure 
```

现在您只需将其转换为 C++，将复杂的子操作实现为函数通常是一个好主意，因为这样您可以通过小口来处理复杂性，而不是试图立即吞下它。上面的每一个操作都应该足够简单来实现，然后整个算法就会到位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:42:42.237

我假设这是家庭作业，所以我不会直接给你答案，但你目前的算法甚至不接近正确。

要在另一个字符串中查找子字符串，您需要为字符串和子字符串设置独立的计数器。

# javascript - vb.net window.open

> ID：10973987
> 
> 赞同：1
> 
> 时间：2012-06-11T02:30:26.007
> 
> 标签：javascript, vb.net

```
 sb.Append("<script language='javascript'>")
    sb.Append("window.open('updateRT.aspx?batchno=" + batchno + "&prodcode=" + prodcode + "&maxrunningtime=" + temprunningtime + ",")
    sb.Append("top=0, left=0, width=500, height=500, menubar=yes,toolbar=yes,status=1,resizable=yes');")
    sb.Append("</script>")
    ClientScript.RegisterStartupScript(Me.GetType(), "abc", sb.ToString()) 
```

大家好...上面是我的 vb.net 代码，我试图将值传递给其他页面，同时调整将出现的窗口大小...

我不确定我遇到的原因和错误，并且大小 od 窗口仍然保持不变，即全屏而不是宽度 = 500 和高度 = 500

有谁可以帮我离开这里吗？

非常感谢你，祝你有美好的一天......

:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:34:44.867

哎呀，误读了您的代码。

您应该将窗口规范作为第三个参数传递给`window.open`- 检查[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)。现在，您在一个参数中传递所有内容，因为用于关闭第一个参数的逗号实际上是字符串的一部分。尝试

```
sb.Append("window.open('updateRT.aspx?batchno=" + batchno + "&prodcode=" + prodcode + "&maxrunningtime=" + temprunningtime + "', '_blank',")
sb.Append("'top=0, left=0, width=500, height=500, menubar=yes,toolbar=yes,status=1,resizable=yes');") 
```

# ios - UITableView.h中的ivar结构_tableFlags的语法是什么意思？

> ID：10973993
> 
> 赞同：5
> 
> 时间：2012-06-11T02:31:36.243
> 
> 标签：ios, uitableview, cocoa-touch, struct, syntax

在 UITableView.h 中，在 UITableView 的接口声明中，有一个 ivar struct _tableFlags。结构的成员都定义为 unsigned int，但是每个成员的标题后跟一个冒号，然后是一个数字。

```
struct {
    unsigned int dataSourceNumberOfRowsInSection:1;
    unsigned int dataSourceCellForRow:1; 
```

…</p>

```
 unsigned int longPressAutoscrollingActive:1;
    unsigned int adjustsRowHeightsForSectionLocation:1;
    unsigned int customSectionContentInsetSet:1;
} _tableFlags; 
```

Cocoa 倾向于在其头文件中普遍使用这种语法，但我不知道它的含义和功能是什么。会员头衔后面的冒号和数字是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T02:39:40.577

这些是位域。冒号后面的数字是变量在结构中占用的位数。

另请参阅：[如何在 C 程序中声明无符号整数](https://stackoverflow.com/questions/4253509/how-to-declare-an-unsigned-int-in-a-c-program)

# facebook - FQL - 获取访问令牌

> ID：10973995
> 
> 赞同：0
> 
> 时间：2012-06-11T02:32:05.833
> 
> 标签：facebook, facebook-graph-api

我需要有人帮助。

当我打开[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)并单击[https://graph.facebook.com/me/likes?access_token=blablabla](https://graph.facebook.com/me/likes?access_token=blablabla)时，我得到了我喜欢的所有页面。

我的问题是，我从哪里得到 access_token 值？我可以通过脚本得到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:02:56.917

Facebook 开发人员站点利用内部测试控制台应用程序，所有开发人员都可以使用该应用程序来测试文档中的调用，站点自动附加 access_token。

下一个可以找到访问令牌的地方是[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)和 Graph API Explorer 应用程序。

[您还可以按照http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)中描述的身份验证流程之一通过脚本获取它

然后，您需要在[https://developers.facebook.com/apps创建一个应用程序，](https://developers.facebook.com/apps)

例如通过 PHP 使用服务器端流程，

*   将用户重定向到 OAuth 对话框（$dialog_url 如下所示）
*   将给出一个代码作为响应
*   交换用户访问令牌的代码（$token_url 如下所示）

```
<?php 

   $app_id = "YOUR_APP_ID";
   $app_secret = "YOUR_APP_SECRET";
   $my_url = "YOUR_URL";

   session_start();
   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
     $dialog_url = "http://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

   if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me/likes?access_token=" 
       . $params['access_token'];

     $likes = json_decode(file_get_contents($graph_url));
     print_r($likes); // A dump of the likes data
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }

 ?> 
```

[在http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)上查看更多参考信息

# java - 用于会话检查的 Java FilterImplementation

> ID：10973997
> 
> 赞同：1
> 
> 时间：2012-06-11T02:32:47.303
> 
> 标签：java

我使用 JSF、Hibernate、Spring 创建了一个 Web 应用程序。我添加了一个过滤器来检查会话。我的过滤器代码是：

```
public class AdminFilter implements Filter{

     private ArrayList<String> urlList;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
       String urls = filterConfig.getInitParameter("avoid-urls");
       StringTokenizer token = new StringTokenizer(urls, ",");   
       urlList = new ArrayList<String>();

        while (token.hasMoreTokens()) {
            urlList.add(token.nextToken());  
        }
    }

    // Checking if user is logged in
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
                HttpServletRequest req= (HttpServletRequest) request;
        HttpServletResponse resp= (HttpServletResponse) response;
        String url = req.getServletPath();
        HttpSession session =   req.getSession();
                if(!urlList.contains(url) && session.getAttribute("user")==null) 
                {
                    resp.sendRedirect(req.getContextPath() + "/backend/login/index.xhtml");

                }
          chain.doFilter(req, resp);
    }

    @Override
    public void destroy() {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

在过滤器的 init 方法中，我有一些避免 URL 的会话检查应该被跳过，比如登录页面本身。这工作正常，但此过滤器限制我的 CSS、图像和 JS 在登录页面上加载。建议我过滤器有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:39:42.660

您的登录页面需要一些资源（CSS、JS、图像），这些资源是在单独的请求中从浏览器请求的，这些资源将被过滤器拦截，并且由于您没有任何参数可以跳过此类资源请求（在登录页面上使用）它将阻止此请求

**建议：**

您可以使用[Spring-Security](http://static.springsource.org/spring-security/site/)，而不是花时间编写您的，它通过配置获得了很大的灵活性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T02:39:51.653

根据您当前的配置，当前您的过滤器将忽略 URL 是否用于获取 css、图像或任何其他资源。

```
boolean staticResources = (url.contains("css") || url.contains("images"));
if(!urlList.contains(url) && session.getAttribute("user")==null && !staticResources)  {
      resp.sendRedirect(req.getContextPath() + "/backend/login/index.xhtml");
} 
```

这将避免会话检查静态内容。

更好的方法是使用声明式安全作为[Java EE Web Security](http://docs.oracle.com/javaee/5/tutorial/doc/bncas.html) using realm 的一部分。

# java - 将 char[] 转换为 byte[] 时如何定义编码（例如 UTF-16）？

> ID：10973998
> 
> 赞同：2
> 
> 时间：2012-06-11T02:32:57.177
> 
> 标签：java, encoding, char, byte, utf

我得到以下代码，它将 char[] 转换为 byte[]：

```
char[] cPwd = {'p', 'a', 's', 's', 'w', 'o', 'r', 'd'};
byte[] bPwd = new byte[cPwd.length * 2];
ByteBuffer.wrap(bPwd).asCharBuffer().put(cPwd); 
```

我猜上面的代码将使用默认的平台编码（我想是 UTF-8 或 16）。正确的？

我如何确保上面 char[] 中的字符使用特定的编码，比如 UTF-16，而不是依赖默认的平台编码？

ps - 我的场景有一个限制：我不允许将此 char[] 转换为类似 in 的字符串

```
String str = new String(cPwd, "UTF-16"); 
```

先感谢您。

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:42:15.567

当 VM 看到它们时，您在代码中指定为文字的字符将是 16 位 Unicode 字符。asCharBuffer() 方法未指定为执行任何编码。换句话说，您应该有效地获得 UTF-16，无论是小端还是大端，具体取决于 ByteBuffer 的字节序。

如果你想要另一个编码而不通过 String 构造函数，你可以使用 CharSet.encode() 方法：

```
 CharBuffer cb = CharBuffer.wrap(your chars);
        Charset cs = Charset.forName("UTF-8");
        ByteBuffer bb = cs.encode(cb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:55:05.407

> 我猜上面的代码将使用默认的平台编码（我想是 UTF-8 或 16）。正确的？

我不这么认为。如果我对 javadoc 的理解是正确的，该`asCharBuffer()`方法会返回一个“视图”，它将字符表示为字节而不进行任何编码。因此字节缓冲区将包含相当于 UTF-16（即每个字符 2 个字节）而没有任何 BOM。