# StackOverflow 问答 000005000-000005999

# .net - .NET 远程处理速度和 VPN

> ID：5002
> 
> 赞同：9
> 
> 时间：2008-08-07T17:21:58.800
> 
> 标签：.net, remoting, performance, vpn, wireless

我正在开发一个使用 .NET Remoting 在客户端应用程序和对象服务器之间进行通信的项目。对于开发，客户端、服务器和 MSSQL 数据库都在我的本地开发机器上运行。

当我在办公室工作时，响应能力还不错。

但是，当我在家工作时，速度***明显***变慢。如果我断开与 VPN 的连接，它会加速（我相信，但也许这只是一厢情愿）。如果我完全关闭我的无线连接，它会立即加速到全油门。

我的假设是，远程流量正在通过某个点进行路由，这会减慢所有速度，尽管是我的家庭路由器和/或 VPN。

有没有人知道如何强制远程流量保持完全本地化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T21:10:02.913

Perhaps during development you could use an IPC remoting channel which uses named pipes instead of TCP. If your remoting channels are set up via a config file then you won't even have to recompile.

I found the link below was useful when setting up an IPC channel.

[http://www.danielmoth.com/Blog/2004/09/ipc-with-remoting-in-net-20.html](http://www.danielmoth.com/Blog/2004/09/ipc-with-remoting-in-net-20.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-16T19:03:26.060

我有同样的问题，当你断开连接时，事情会变得非常好。

如果您使用的是 Windows VPN，则必须更改默认设置。它将强制连接在连接时使用远程路由器作为您的网关。如果您转到连接的属性，然后转到网络选项卡。选择 TCP/IPv4 并转到属性。在此窗口中选择高级...，将有一个使用远程网络上的默认网关的选项，请确保未选中此项。这应该有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-12T23:45:08.520

我当前的计算机上没有任何 VPN 连接，但在连接的 TCP/IP 属性中的某处有一个复选框，指示您将远程主机用作网关或类似的东西。

这曾经给我带来了很多问题，因为我的所有流量都会通过 VPN，然后再返回，即使我想在本地做一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-08T12:28:57.543

去年夏天，我参与了一个需要对 .NET Remoting 进行大量修改的项目。我不记得所有细节，但是如果我们有多个网络接口，我们就无法获得开箱即用的远程处理实现来可靠地检测远程处理流量来自哪一个，这会造成可怕的事情表现。这听起来像是一个相似的问题，如果不是相同的话。

# deployment - WebSphere Application Server 网络部署的错误 ADMA5026E

> ID：5013
> 
> 赞同：7
> 
> 时间：2008-08-07T17:28:16.183
> 
> 标签：deployment, websphere

使用 NetworkDeployment 控制台部署应用程序时出现 ADMA5026E 错误，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-07T17:49:47.793

尝试

[IBM 信息中心](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.messages.doc/com.ibm.ws.management.resources.AppDeploymentMessages.html?resultof=%22%41%44%4d%41%35%30%32%36%45%22%20%22%61%64%6d%61%35%30%32%36%22%20)

# apache-flex - 使用 AIR/Flex 打开本地文件

> ID：5017
> 
> 赞同：12
> 
> 时间：2008-08-07T17:31:12.167
> 
> 标签：apache-flex, actionscript-3, air

我编写了一个从服务器下载视频和文档的 AIR 应用程序。视频在应用程序内播放，但我希望用户能够在其本机应用程序中打开文档。

我正在寻找一种方法来提示用户在应用程序存储目录中存储的本地文件上打开/另存为。我曾尝试使用 FileReference + URLRequest 类，但这会引发需要远程 url 的异常。

我最后的办法就是将文件复制到他们的桌面：\

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-07-13T00:28:03.707

您可以使用 File 类上可用的新`openWithDefaultApplication();`功能（我相信它仅在 AIR 2 中可用）

例如：

```
var file:File = File.desktopDirectory.resolvePath(fileLocation);
file.openWithDefaultApplication(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T20:25:47.293

只有这样我才能弄清楚如何做到这一点，而不仅仅是移动文件并告诉用户将其传递给浏览器。

```
navigateToURL(new URLRequest(File.applicationStorageDirectory.nativePath + "/courses/" + fileName)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-23T12:03:15.183

这是 FluorineFx Aperture 框架的第一个版本。

该框架为 AIR 桌面应用程序提供本机操作系统集成（仅限 Windows）支持。

该框架以非侵入方式扩展 Adob​​e AIR 应用程序：只需将提供的库与您的 AIR 应用程序一起重新分发，在运行时框架将自动挂接到您的应用程序。

**特征**

*   使用提供的 apsystem 库启动本机应用程序和文档
*   使用提供的 apiimaging 库截取整个屏幕
*   使用提供的 apoutlook 库从 Air 应用程序访问 Outlook 联系人

[http://aperture.fluorinefx.com/](http://aperture.fluorinefx.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-14T15:32:09.147

目前 adobe 不支持在默认应用程序中打开文件。将其传递给浏览器似乎是使其工作的唯一方法。

但是，您可以使用 FileStream 并使用一些 javascript 编写一个小 html 文件，该文件将 iframe 的位置设置为文件，然后在 100 毫秒左右后调用 window.close()。然后在浏览器中打开该文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T11:28:41.940

对我来说是：

```
var request:URLRequest = new URLRequest();
request.url = file.url;
navigateToURL(request, "_blank"); 
```

由于`navigateToURL(file.nativePath)`路径“/users/mydirectory/...”在[应用程序沙箱](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7cba.html)之外，因此不起作用。AIR 只允许使用 . 打开某些协议`navigateToURL()`。

# perl - Perl 杂志可以在线获得吗？

> ID：5024
> 
> 赞同：22
> 
> 时间：2008-08-07T17:34:27.857
> 
> 标签：perl

有谁知道在哪里可以找到旧*的 The Perl Journal文章的在线副本？*

我知道它们现在归 Dobb 博士所有，只是主页上说它们也是与主题相关的任何部分的一部分，而不是被索引在一起。也就是说，我从来没有在那个网站上在线找到它们中的任何一个。

[我知道 Mark Jason Dominus在他的网站上](http://perl.plover.com/)有几篇他的文章，有人知道其他好地方吗？或者甚至在 Dobb's 使用什么搜索词？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-07T17:52:19.177

第 1-5 卷（1996 -> 2000）可在[http://www.foo.be/docs/tpj/找到](http://www.foo.be/docs/tpj/)

嗯，看起来这就是整个过程？我虽然出于某种原因它比那更长。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-09-15T17:57:42.327

许多文章的末尾都有字符串“TPJ”，所以我[只搜索“TPJ”就得到了很多结果](http://www.ddj.com/TechSearch/searchResults.jhtml?queryText=TPJ&x=0&y=0)。我会整理[他们在网站上发表的文章的索引](http://www.perlmonks.org/index.pl?node_id=711609)。您在寻找特定的文章或作者吗？

[我已经在我的个人网页上](http://www.pair.com/comdog)链接到我的 TPJ Online 文章，但它们都进入了 DDJ 网站，但 URL 无用。巨石阵[免费提供 Randal 的 TPJ 文章](http://www.stonehenge.com/merlyn/PerlJournal/)，Simon Cozens 的[大部分文章](http://simon-cozens.org/programmer/writing.html)也在网上。

除了在线文章，还有来自 O'Reilly Media: [Web, Graphics & Perl TK: Best of The Perl Journal](https://rads.stackoverflow.com/amzn/click/com/0596003110) , [Games, Diversions & Perl Culture: Best of The Perl Journal](https://rads.stackoverflow.com/amzn/click/com/0596003129)和[Computer Science & Perl Programming: Best of The Perl 的汇编书籍TPJ](https://rads.stackoverflow.com/amzn/click/com/0596003102)。

如果您只是想看一本 Perl 杂志，还有我出版[的 The Perl Review](http://www.theperlreview.com?stackoverflow)以及德语[$foo Magazin](http://www.perl-magazin.de/)。

问题在[http://www.foo.be/docs/tpj/](http://www.foo.be/docs/tpj/)是 TPJ 在被 Earthweb 收购之前的全部运行。在第 20 期，[随着 Earthweb 在 dot.bomb 时代内爆](http://lists.netisland.net/archives/phlpm/phlpm-2001/msg00005.html)，TPJ 最终[被 CMP 收购，并在 2001 年夏天为 SysAdmin 添加了一个补充](http://ubmtechnology.mediaroom.com/index.php?s=43&item=343)，情况变得很糟糕。这持续了大约一年，然后他们让它安静地死去，几年后它又作为在线杂志回来了。它最终在 2006 年停止，当时它完全融入 DDJ 并不再作为标题存在。

希望有帮助，

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-07T17:54:50.840

Randal Schwartz 的 Perl 期刊文章链接自[http://www.stonehenge.com/merlyn/PerlJournal/](http://www.stonehenge.com/merlyn/PerlJournal/)

# php - 使用 PHP 锁定 SQL Server 数据库

> ID：5025
> 
> 赞同：16
> 
> 时间：2008-08-07T17:36:23.873
> 
> 标签：php, sql-server, database, sql-server-2005

我想要为我的网络应用程序中的特定点提供额外的安全性。所以我想锁定数据库（SQL Server 2005）。有什么建议，或者这对 SQL Server 是否必要？

**编辑问题：**

查询以静默方式失败，没有记录任何错误消息，并且不会在事务内部发生。

**最终解决方案：**

我从来没有能够解决这个问题，但是我最终做的是切换到 MySQL 并在这里使用事务级查询。这不是切换的主要原因，甚至不是主要原因。我一直在使用 SQL Server 时遇到问题，它让我的 CMS 和其他各种工具都在同一个数据库上运行。以前我们有一个 SQL Server 和一个 MySQL 数据库来运行我们的站点。该端口有点耗时，但从长远来看，我认为它对站点和业务会更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-07T17:43:01.787

我想你有三个选择。

1.  设置用户权限，使用户 x 只能从数据库中读取。

2.  将数据库设置为单用户模式，以便只有一个连接可以访问它

    sp_dboption 'myDataBaseName'，单，真

3.  将数据库设置为只读

    sp_dboption 'myDataBaseName'，只读，true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T22:29:56.457

我从来没有能够解决这个问题，但是我最终做的是切换到 MySQL 并在这里使用事务级查询。这不是切换的主要原因，甚至不是主要原因。我一直在使用 MSSQL 时遇到问题，它让我的 CMS 和其他各种工具都在同一个数据库上运行。以前我们有一个 MSSQL 和一个 MySQL 数据库来运行我们的站点。该端口有点耗时，但从长远来看，我认为它对站点和业务会更好。

# asp.net - 减少 ASP.NET 菜单控件的大小（没有 3rd 方库）

> ID：5027
> 
> 赞同：9
> 
> 时间：2008-08-07T17:38:09.143
> 
> 标签：asp.net, size, menu

我有一个相当简单的 ASP.NET 2.0 菜单控件，它使用站点地图文件和安全装饰。只有 21 个菜单选项，但菜单的结果 HTML 高达 14k。该站点托管在我们公司的 Intranet 上，必须以有限的带宽为全世界的人们提供服务，因此我想减小菜单的大小。

做这个的最好方式是什么？有人有好的参考吗？我有以下限制：

*   解决方案不得引用任何第 3 部分 DLL 文件（获得批准将是一场噩梦）
*   必须使用 IE 6

CSS 和 JavaScript 没问题，只要它们与 IE 6 一起工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T17:42:00.150

看看： [http ://www.asp.net/CSSAdapters/Menu.aspx](http://www.asp.net/CSSAdapters/Menu.aspx)

默认的 Menu 控件呈现过多的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-22T17:17:10.077

您可以看看我的[ASP.NET 菜单优化帖子](http://jagbarcelo.blogspot.com/2009/03/aspnet-menu-control-optimization.html)。我所做的是将每个页面中呈现的菜单的公共部分提取到一个外部文件，该文件仅在用户浏览器中加载和缓存一次。这样，在某些情况下，页面会缩小 60-70%。

# asp.net - Joomla 的 ASP.NET 版本

> ID：5061
> 
> 赞同：15
> 
> 时间：2008-08-07T17:59:42.080
> 
> 标签：asp.net, content-management-system, joomla

有没有人发现/使用过类似于 Joomla 的 ASP.NET 应用程序？
我需要在 Windows Server 上设置一个快速而肮脏的 CMS，而我们的客户端不希望我们使用 ASP.NET 以外的其他东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T20:34:22.097

一位朋友告诉我，[Umbraco](http://www.umbraco.org/)是您在 CMS 中想要的一切（Nathan 在他的回答中包含在列表中）。这个建议来自一个多年来构建了多个 CMS 解决方案的人，在简要了解了它之后，我想我会尝试推动我的客户使用它而不是他们当前的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T16:34:42.063

[DotNetNuke](http://www.dotnetnuke.com/)可以快速设置和运行。这是我用过的最好的 ASP.NET CMS。

它带有许多模块，并且可以使用许多商业和免费的第 3 方模块进行扩展。

只需更改分配的皮肤就可以很容易地更改 DNN 站点的外观，并且还可以使用许多第 3 方皮肤。

[Warbeats.com](http://www.warbeats.com/)在 DNN 上运行，并处理相当多的流量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T18:03:48.047

Community Server 是一个非常完善的 ASP.NET CMS，提供[免费版本](http://communityserver.com/get-it-now/express/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T18:07:33.640

[Graffiti](http://graffiticms.com/)是 Telligent 的 CMS（前面提到的社区服务器的制造商），我根据您的要求更合适。

Codeplex 上也有许多[CMS 项目](http://www.codeplex.com/Project/ProjectDirectory.aspx?TagName=CMS)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T01:55:05.073

我尝试了 Graffiti 和 DotNetNuke 并认为两者都很麻烦，然后我根据朋友的推荐尝试了[Umbraco ，我喜欢它！](http://www.umbraco.org/)以至于我向 Kooshmoose 推荐了它...我还应该注意 dasBlog 不是 CMS，它只是博客软件（我在我的个人网站上使用并喜欢它，但它不是 CMS...）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T04:32:20.800

MojoPortal 可能值得一看。除此之外，内森链接的列表非常值得研究

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T04:38:12.630

[umbraco](http://www.umbraco.org/)在成熟度和开箱即用功能方面接近 Joomla 的优秀 CMS 获得了我的投票。我不是很喜欢 DNN，但至少已经有一年时间没有​​按照它的速度运行它了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-05T12:24:05.130

你看过 DotNetNuke ( [http://www.dotnetnuke.com/](http://www.dotnetnuke.com/) ) 它似乎是一个很好的系统，可以作为基础开始，但我怀疑我可以称之为完整的 CMS 吗？（由用户决定）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-07T18:55:57.327

另请参阅[Oxite](http://www.codeplex.com/oxite)。它是一个 ASP.NET MVC 博客引擎，您可以将其用于 CMS。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-01-06T16:20:43.867

If the concern isn't really about the ASP.Net language but about keeping a Windows server, you can use [Joomla on IIS](http://www.microsoft.com/web/joomla/).

You can also check the [list of CMSs](http://www.microsoft.com/web/gallery/Categories.aspx?category=ContentMgmt) on [Microsoft's Web Platform](http://www.microsoft.com/web/)

# cvs - 如何递归添加 CVS 目录

> ID：5071
> 
> 赞同：40
> 
> 时间：2008-08-07T18:05:28.183
> 
> 标签：cvs

我玩过 CVS 一点，对它的所有功能都不是最熟悉的，但对我来说，一个巨大的烦恼是尝试添加包含更多目录的新目录。运行“ `cvs add`”只添加当前目录的内容，使用“ `cvs import`”看起来也不正确，因为它仍然是我正在生成的所有代码（这个howto声称导入适用于[第3方来源](http://www.thathost.com/wincvs-howto/cvsdoc/cvs_16.html#SEC136)）

你们知道有什么方法可以将给定目录中的所有内容递归地添加到当前的 CVS 项目中（或者如果 SVN 或 git 使这变得更容易）？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2011-03-01T17:31:37.773

我发现这非常有效：

首先，添加所有目录，但不添加任何名为“CVS”的目录：

```
find . -type d \! -name CVS -exec cvs add '{}' \; 
```

然后添加所有文件，不包括 CVS 目录中的任何内容：

```
find . \( -type d -name CVS -prune \) -o \( -type f -exec cvs add '{}' \; \) 
```

现在，如果有人能治愈在这个时代使用 CVS 的尴尬......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-07T20:22:32.807

啊，空格。这将适用于空格：

```
find . -type f -print0| xargs -0 cvs add 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-17T08:21:44.183

我用这个：

首先递归地添加所有目录而不是 CVS 目录：

```
$> find . -type d \! -name CVS -exec cvs add '{}' \;
```

其次添加所有文件，减少 CVS 目录：

```
寻找 。\( -type d -name CVS -prune \) -o \( -type f -exec cvs add '{}' \; \)
```

第三做“提交”像“第一版”评论一样递归：

```
寻找 。\( -type d -name CVS -prune \) -o \( -type f -exec cvs commit -m "第一个版本" '{}' \; \)
```

最后以递归方式标记所有内容：

```
寻找 。\( -type d -name CVS -prune \) -o \( -type f -exec cvs tag -F MY_CVS_TAG '{}' \; \)
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-10-05T08:46:33.920

首先将所有目录添加到CVS

```
find . -type d -print0| xargs -0 cvs add 
```

然后将目录下的所有文件添加到CVS

```
find . -type f | grep -v CVS | xargs cvs add 
```

为我工作

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-29T21:28:58.483

`cvs import`不仅适用于第 3 方来源。事实上，CVS 没有对目录进行版本控制，因此它们不受分支策略的约束。只要导入空目录就可以了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-06T10:38:05.037

请注意，您只能`cvs add`在位于已签出的工作副本中的文件和文件夹上使用，否则您将收到[“无法打开 CVS/Entries for reading”](http://cvsgui.sourceforge.net/newfaq.htm#cvs-add_nodir)消息。`cvs add`在这个 WinCVS 常见问题项目中解释了一种用于创建新“根模块”的技术：http: [//cvsgui.sourceforge.net/newfaq.htm#add_rootmodule](http://cvsgui.sourceforge.net/newfaq.htm#add_rootmodule)

如果您在 Windows 上，TortoiseCVS 和 WinCVS 都支持在单个操作中递归添加（和可选提交）多个文件。在 WinCvs 中查找宏 Add>Recursive Add (auto-commit)... 在 Tortoise 中，在目录上使用 Add Contents 命令。两者都允许您选择要添加的文件以及为它们使用的关键字扩展模式（主要用于定义哪些文件是二进制文件）。

有关 WinCvs 中递归添加的更多信息，请参见此处：[http ://cvsgui.sourceforge.net/newfaq.htm#cvs-add_recursive](http://cvsgui.sourceforge.net/newfaq.htm#cvs-add_recursive)

* * *

除此之外，它`cvs import`非常适合大量添加。然而，`cvs import`在 vanilla CVS 中实现的方式有两个缺点（因为它**最初**是为第三方代码编写的）：

*   它创建了一个具有特殊语义的强制分支。
*   它不会创建将导入的代码建立为签出工作副本所需的存储库元数据（即隐藏的 CVS 目录），这意味着为了实际处理导入的文件，您首先必须将它们签出存储库

如果您使用 CVSNT，您可以通过指定`-nC`导入选项来避免这两个缺点。`-n`用于避免“供应商”分支并`-C`用于创建 CVS 目录。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-07T09:29:25.550

Mark 的这个回答很有用（find . -type f -print0| xargs -0 cvs add），但我解决了当 cvs add 尝试添加他自己的文件（如标签、条目等）时发生的一些问题。

1.  添加名为 NEW_FOLDER 的最高级别文件夹

```
cvs 添加 NEW_FOLDER
```

2.  使用带有某些排除项的上一个命令添加所有子文件夹树

> 找到 NEW_FOLDER/ -type d ！-名称“CVS” -和！-名称“标签” -和！-name "Entries.Log" -and ! -name "条目" -and ! -name "存储库" -and ! -name“根”-print0 | xargs -0 简历添加

3.  使用带有某些排除项的上一个命令添加所有文件

> 找到 NEW_FOLDER/ -type f ！-名称“CVS” -和！-名称“标签” -和！-name "Entries.Log" -and ! -name "条目" -and ! -name "存储库" -and ! -name“根”-print0 | xargs -0 简历添加

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T18:25:47.470

我认为这就是我在 CVS 时代所做的事情：

```
find . -type f | xargs cvs add 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-29T18:06:37.067

首先将所有目录添加到CVS

```
find . -type d -print0| xargs -0 cvs add 
```

然后将目录下的所有文件添加到CVS

```
find . -type f -print0| xargs -0 cvs add 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-12-30T11:39:53.133

我正在使用这个简单的 shell 脚本，它应该从一个已经签出的 CVS 目录开始。它会愚蠢地尝试添加/提交它在递归搜索中找到的任何文件和目录，所以最后你应该得到一个完全提交树。

只需将其保存为类似的东西`/usr/bin/cvsadd`，不要忘记`chmod +x /usr/bin/cvsadd`.

```
#!/bin/sh
# @(#) 递归添加文件和目录到当前CVS目录
# (c) 2009 年 Dirk Jagdmann

如果 [ -z "$1" ] ; 然后
    echo "用法：cvsadd '导入消息'"
    1号出口
菲

如果 [ -d "$2" ] ; 然后
    简历添加“$ 2”
    cd "$2" || 1号出口
菲

如果 [ ！-d CVS ] ; 然后
    echo "当前目录需要包含一个 CVS/ 目录"
    1号出口
菲

XARGS="xargs -0 -r -t -L 1"

# 首先添加当前目录下的所有文件
寻找 。-maxdepth 1 -type f -print0 | $XARGS 简历添加
寻找 。-maxdepth 1 -type f -print0 | $XARGS cvs ci -m "$1"

# 然后添加所有目录
寻找 。-maxdepth 1 -type d -not -name CVS -a -not -name 。-print0 | $XARGS "$0" "$1"

```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-03T07:58:54.657

已经讨论过的方法将进行递归查找，但是如果您再次执行相同的操作（如果您想将子树添加到现有树），它将失败。因此，您需要检查您的目录是否尚未添加，然后仅添加未添加的文件还添加了。为此，我们使用输出`cvs up`来查看尚未添加哪些元素 - 它会在行首带有问号。

我们使用 options `-0`，`-print0`并 `-zZ`确保我们正确处理文件名中的空格。`--no-run-if-empty`如果不需要添加任何内容，我们还使用以避免运行。

```
CVS_PATTERN=/tmp/cvs_pattern
cvs -z3 -q up | egrep '^\?.*' | sed -e 's/^? //' > $CVS_PATTERN
find . -type d \! -name CVS -print0 | grep -zZf $CVS_PATTERN | xargs -0 --no-run-if-empty cvs add
find . \( -type d  -name CVS -prune \) -o \( -type f  -print0 \) | grep -zZf $CVS_PATTERN | xargs -0 --no-run-if-empty cvs add
cvs commit -m 'commiting tree recursively' 
```

使用这种方法，我们将避免此类错误：

```
cvs add: cannot add special file `.'; skipping
cvs [add aborted]: there is a version in ./dirname1 already 
```

和

```
cvs add: `./dirname2/filename' already exists, with version number 1.1.1.1 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-07T21:18:18.933

[马克的解决方案](https://stackoverflow.com/a/5262/1287812)解决了空格问题，但产生了这个问题：

> cvs 添加：无法打开 CVS/Entries 进行读取：没有这样的文件或目录
> cvs [添加中止]：没有存储库

要修复它，实际使用的命令是：

```
find . -type f -exec cvs add {} \; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-18T10:20:08.350

我喜欢做（因为目录需要添加）

```
cvs status 2>/dev/null | awk '{if ($1=="?")system("cvs add "$2)}' 
```

您可能需要多次运行（首先是目录，然后是其子目录），直到没有输出

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2008-08-07T18:08:54.620

SVN 确实完成了这项微不足道的任务，但是使用像 Tortoise 这样的 GUI 更加容易。

这可能是一个很好的起点：[http ://www-mrsrl.stanford.edu/~brian/cvstutorial/](http://www-mrsrl.stanford.edu/~brian/cvstutorial/)

# mysql - 大于 char 但小于 blob

> ID：5075
> 
> 赞同：6
> 
> 时间：2008-08-07T18:07:48.460
> 
> 标签：mysql, database

Char's 很棒，因为它们是固定大小的，因此可以提供更快的桌子。但是，它们限制为 255 个字符。我想保存 500 个字符，但 blob 是可变长度的，这不是我想要的。

有什么方法可以在 MySQL 中使用 500 个字符的固定长度字段，还是我必须使用 2 个字符字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-07T18:12:03.350

我建议使用 varchar(500)。即使 varchar 不是固定长度，数据库也应该保留正确的空间量。使用 varchar(500) 与 2xchar(255) 相比，您应该不会注意到任何性能差异。

通过将两个 char 字段连接在一起，您也可能会导致额外的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T18:28:04.097

> 我建议使用 varchar(500)

...如果您有 MySQL 5.0.3 或更高版本。在以前的版本中，VARCHAR 被限制为 255 个字符。

此外，CHAR 和 VARCHAR 在尾随空格方面的工作方式不同。请务必阅读[10.4.1。CHAR 和 VARCHAR 类型](http://dev.mysql.com/doc/refman/5.0/en/char.html)（适用于 MySQL 5.0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-04T15:57:43.457

你太担心内部实现细节了。不要预先优化。

一起去`VARCHAR(500)`

# linux - 保护 linux 网络服务器以供公众访问

> ID：5078
> 
> 赞同：21
> 
> 时间：2008-08-07T18:10:17.033
> 
> 标签：linux, security, webserver

我想设置一个便宜的 Linux 机器作为 Web 服务器来托管各种 Web 技术（想到 PHP 和 Java EE，但我也想在未来尝试使用 Ruby 或 Python）。

我相当精通将 Tomcat 设置为在 Linux 上运行以提供 Java EE 应用程序，但我希望能够打开这个服务器，即使我可以创建一些我在工作时可以使用的工具办公室。我在配置 Java EE 站点方面的所有经验都是针对 Intranet 应用程序的，在这些应用程序中，我们被告知不要专注于保护外部用户的页面。

您对以足够安全的方式设置个人 Linux Web 服务器以开放外部流量有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T18:26:07.207

这篇文章有一些锁定事情的最佳方法：

[http://www.petefreitag.com/item/505.cfm](http://www.petefreitag.com/item/505.cfm)

一些亮点：

*   确保没有人可以浏览目录
*   确保只有 root 对所有内容具有写入权限，并且只有 root 对某些配置文件具有读取权限
*   运行 mod_security

这篇文章还从本书中获得了一些建议：

[Apache Securiy](http://spendfish.com/product/0596007248)（奥莱利出版社）

至于发行版，我运行过 Debain 和 Ubuntu，但这取决于你想要做多少。我在没有 X 的情况下运行 Debian，只要我需要任何东西就可以 ssh 进入它。这是一种降低开销的简单方法。或者 Ubuntu 有一些不错的 GUI 功能，可以轻松控制 Apache/MySQL/PHP。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-12T20:33:45.253

尽可能遵循安全最佳实践很重要，但您不想让事情变得过于困难或因担心跟上最新的漏洞而失眠。根据我的经验，有两个关键因素可以帮助您确保个人服务器足够安全，以便在保持理智的同时投放到互联网上：

**1) 通过默默无闻的安全性**

不用说，在“现实世界”中依赖它是一个坏主意，而且不值得娱乐。但那是因为在现实世界中，坏人知道那里有什么，并且有战利品。

在个人服务器上，您将遭受的大多数“攻击”只是自动扫描已经受到攻击的机器，寻找已知易受攻击的产品的默认安装。如果您的服务器在默认端口或默认位置没有提供任何诱人的东西，那么自动攻击者就会继续前进。因此，如果您要运行 ssh 服务器，请将其放在非标准端口 (>1024) 上，它很可能永远找不到。如果您可以在 Web 服务器上使用这种技术，那就太好了，也可以将其转移到一个不起眼的端口。

**2) 包管理**

除非绝对必要，否则不要自己从源代码编译和安装 Apache 或 sshd。如果你这样做了，你就有责任跟上最新的安全补丁。让来自 Linux 发行版（如 Debian 或 Ubuntu）的优秀软件包维护者为您完成工作。从发行版的预编译包安装，保持最新状态只需偶尔发出*apt-get update && apt-get -u dist-upgrade*命令，或使用 Ubuntu 提供的任何精美的 GUI 工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-12T19:52:09.723

您应该确保考虑的一件事是哪些端口对世界开放。我个人只是为 SSH 打开端口 22，为 ntpd 打开端口 123。但是，如果您打开端口 80 (http) 或 ftp，请确保您学会了至少了解您为世界提供的服务以及谁可以使用它来做什么。我对 ftp 知之甚少，但只要用 Google 搜索一下，就有数百万很棒的 Apache 教程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-15T22:48:00.427

Bit-Tech.Net 发表了几篇关于如何使用 linux 设置家庭服务器的文章。以下是链接：

[第 1](http://www.bit-tech.net/bits/2007/06/05/build_your_own_server/1)
[条 第 2 条](http://www.bit-tech.net/bits/2007/07/24/build_your_own_better_server/1)

希望这些对您有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-23T22:37:56.557

@svrist 提到了 EC2。EC2 提供了一个用于远程打开和关闭端口的 API。这样，您可以保持您的盒子运行。如果您需要在咖啡店或客户办公室进行演示，您可以获取您的 IP 并将其添加到 ACL。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T18:18:29.343

如果您对它保持低调（即，如果您只是在家庭连接上托管一个荣耀的 webroot，很少有人会追随您的家庭服务器）并且您对您的配置有智慧（即避免使用 root对于所有事情，请确保您的软件是最新的）。

关于这一点，虽然这个线程可能会缩小到只是燃烧，我对你的个人服务器的建议是坚持任何 Ubuntu（[在此处获取 Ubuntu Server](http://www.ubuntu.com/getubuntu)）；以我的经验，最快从论坛上提问的地方得到答案（虽然不知道该说什么关于吸收）。

我的家庭服务器安全 BTW 有点好处（我认为，或者我喜欢认为）没有静态 IP（在 DynDNS 上运行）。

祝你好运！

/mp

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T18:26:15.037

小心开放 SSH 端口。如果这样做，请确保禁用 root 登录（您可以随时`su`或`sudo`一旦进入）并在合理范围内考虑更积极的身份验证方法。一个周末，我在我的服务器日志中看到一个巨大的字典攻击，该攻击从 DynDNS 家庭 IP 服务器跟踪我的 SSH 服务器。

话虽这么说，能够在工作或外出时回到家里的 shell 真是太棒了……再加上你可以在同一个端口上使用 SFTP，我无法想象没有它的生活。=)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T18:55:40.733

您可以考虑[来自 Amazon 的 EC2 实例](http://www.amazon.com/gp/browse.html?node=201590011)。这样你就可以轻松地测试出“东西”，而不会影响生产。并且只需为您使用的空间、时间和带宽付费。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-07T21:08:39.607

如果您确实在家中运行 Linux 服务器，请在其上安装[ossec](http://www.ossec.net/)以获得运行良好的轻量级 IDS。

[编辑]

作为旁注，请确保您不违反 ISP 的可接受使用政策*，*并且它们允许标准端口上的传入连接。我以前工作的 ISP 用他们的条款写过，除非您使用的是企业级帐户，否则您可能会因为在端口 80/25 上运行服务器而被断开连接。虽然我们没有主动阻止这些端口（除非它引起问题，否则我们不在乎）一些 ISP 不允许端口 80 或 25 上的任何流量，因此您必须使用备用端口。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-15T22:33:40.567

如果您要这样做，请花一点钱，至少购买带有单独 DMZ 端口的专用路由器/防火墙。您需要将内部网络与服务器隔离开来，这样当（不是如果！）您的网络服务器受到威胁时，您的内部网络也不会立即受到攻击。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-07T18:12:47.077

有很多方法可以做到这一点，效果很好。我通常会使用 .htaccess 文件。快速设置且*足够*安全。可能不是最好的选择，但它对我有用。我不会把我的信用卡号码放在后面，但除此之外我真的不在乎。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-07T18:18:36.473

哇，一旦您开始向外部流量开放任何东西，您就会打开一罐蠕虫。请记住，您认为的实验服务器几乎就像一只献祭的羔羊，对于那些希望利用您的网络和资源做坏事的人来说也是很容易的选择。

您对外部可用服务器的整个方法应该非常保守和彻底。它从防火墙策略之类的简单事物开始，包括底层操作系统（对其进行修补、对其进行安全配置等），并涉及您将使用的每个堆栈的每一层。恐怕没有简单的答案或食谱。

如果您想进行实验，最好将服务器保密并在需要远程工作时使用 VPN。

# macos - 上传表单在 Mac OS X 的 Firefox 3 中不起作用？

> ID：5084
> 
> 赞同：5
> 
> 时间：2008-08-07T18:16:00.033
> 
> 标签：macos, firefox, upload

今天，我遇到了一个使用 Mac OS X 的用户的奇怪问题。这个用户总是上传失败。该表单使用常规的“输入类型=文件”。用户可以在他的 Mac 上使用除 Firefox 3 之外的任何浏览器上传。只有这个特定的用户看到了这个错误。

显然，问题只出在这个特定的用户身上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T18:17:56.833

用户通过重新创建他们的 FireFox 配置文件纠正了这个奇怪的问题。 [如何管理 FireFox 配置文件](http://support.mozilla.com/en-US/kb/Managing+profiles)

我想重新安装 FireFox 也会纠正这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T18:22:34.483

> 我想重新安装 FireFox 也会纠正这个问题。

与配置文件相关的问题通常不能通过重新安装 Firefox 来解决，因为重新安装（或升级）会重新使用相同的“损坏”配置文件。

# ruby-on-rails - 学习 Ruby on Rails 对 Grails 有好处吗？

> ID：5087
> 
> 赞同：21
> 
> 时间：2008-08-07T18:17:22.323
> 
> 标签：ruby-on-rails, ruby, grails, groovy

我的公司正在开始走**Grails**之路。原因是当前的开发人员对**Java**很感兴趣，但他们觉得未来一些 Web 开发项目需要一种**MVC 风格的语言。**就个人而言，我来自设计/可用性领域，但随着我承担更多“前端”职责，我开始觉得有必要更深入地学习一门语言，这样我就可以编写一些逻辑，尤其是前端我的 UI 和东西的代码。

我一直试图亲自进入**Python/Django**，但从来没有在它上面投入太多时间。现在我的公司正在“跳入”Grails，我购买了“ *Agile Web Development with Rails (3rd Ed - Beta)* ”，我开始进入**RoR**。我仍然想在未来或边上学习**Python ，但我最大的问题是：**

*   我是否应该学习 RoR，并在我的“投资组合”中使用更通用的语言，因为我知道我的 RoR 知识也会对我的 Grails 需求有用？

-或者-

*   我是否应该跳过 RoR 并专注于学习我很快需要工作的 Grails，然后继续学习 RoR/Django（Ruby/Python）？

基本上，问题围绕着 Grails 在非公司环境中的有用性以及 Rails 和 Grails 之间的相似之处。（还有这个，同时试图避免 Python 与 Ruby（在 Rails 上）的百年讨论 :)）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-07-21T10:52:45.673

嗯，我不知道该怎么说。有些人可能会因此而抨击我。

## 语言（Groovy 和 Ruby）

作为一门语言，我认为 Ruby 比 Groovy 更时髦。Groovy 的存在只是为了简化 Java 程序员，因为您不需要学习太多新语法。但总的来说，我认为它不像 Ruby 那样时髦。根据今年 JavaOne 与会者的投票，Groovy 不是值得学习的 JVM 语言，而是 Scala 是值得学习的语言。除此之外，[Groovy 的最初创建者本人并不相信他自己创建的语言](http://macstrac.blogspot.com/2009/04/scala-as-long-term-replacement-for.html)。

## 社区和职位空缺

在社区方面，Grails 社区没有 Rails 大，但自从被 Spring 收购以来，越来越多的人在认真的应用中使用它。与 Grails 相比，Rails 在市场上有更多的职位空缺（也就是说，如果您想投资寻找新工作）。

## 框架（Grails 和 Rails）

但是，作为一个框架，如果您真的关心可维护性并需要访问 Java 框架和遗留 Java 系统，那么 Grails 是您的最佳选择，因为它提供了对 Java 的更清洁的访问。Grails 本身建立在几个流行的 Java 框架（Spring 和 Hibernate）之上。恕我直言，Rails 本身就像 Ruby 本身一样时髦，但它的时髦会降低您的可维护性。[Matz 本人更喜欢 Merb 而不是 Rails 2](http://merbist.com/2008/11/09/merb-1-0-released/)，因为 Rails 在 Ruby 之上创建了一个 DSL，这确实违反了 Ruby 哲学。而且我认为是因为 Rails 本身是有意见的，反过来，如果您与创建者的意见不同，它可能不适合您的需求。

**结论**

So in your case, learn Grails as that is the company's consensus (you need to respect the consensus) and if you still want to secure your job. But, invest some time learning Rails and Ruby too if you want to open a chance getting a new job in the future.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-07T18:44:42.363

有个问题，他们选择 Grails 的原因是因为 Groovy 在语法上比 Ruby 更接近 Java，还是因为他们想要访问 Java？

如果是前者，那么我会说尝试专注于 Grails，因为您将使用它。如果是后者，您可能想看看开发团队是否愿意使用 JRuby。

我以前从未使用过 Grails 或 Rails，但我以前使用过 Groovy 和 Ruby，作为一门语言，我认为 Ruby 更干净、更一致，团队可能更喜欢生产。作为一个平台，Rails 出现的时间更长，也受到了很多关注，所以我认为它是一个更稳定的平台，可以使用更多充实的功能。

JRuby 可以完全访问用 Java 编写的类，所以这就是为什么我会说考虑尝试 Rails。如果在决定时间考虑它为时已晚，那么我想你可以忽略这篇文章。

基本上，如果您只是想与 Java 挂钩，那么 JRuby 是您应该考虑的一个选项，但如果团队害怕非 Java 类的语法，也许可以继续原样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-02T03:35:05.817

我会两个都学。它们都是新兴技术。学习 RESTful 编码对任何语言都有真正的好处。

我在工作中使用 GRAILS，在副项目中使用 RoR。我可以说 RoR 社区要大得多（我说的是 RoR vs Grails，而不是 RoR vs Java）并且非常有帮助。

简短的回答：它们是相似的......它会伤害什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-07T18:38:13.780

跳过 RoR。类似的东西真的不多（除了名字）

我当然相信，如果您打算使用 Grails 进行认真的开发，那么对 Java 足够熟悉，再加上一些使用动态语言编程的经验就绰绰有余了。

仅比较视图（Grails 中的 taglibs，RoR 中的 RHTML）和持久性内容（GORM 与 ActiveRecord）在核心方面差别太大，需要花时间学习 RoR 的基本细节。只需深入 Grails，您将不会后悔。

编辑：纠正错字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-20T16:36:21.630

我一直在学习 RoR 和 Grails，后者更容易学习。

这两个框架共享相同的原则（敏捷、亲吻、干式、鸭式打字等等），但 Groovy 语法……嗯，简直太棒了，你可以在眨眼间学习和使用。

我真的觉得 Grails 比 RoR 有更光明的未来。

PD：以防万一你觉得它有用，我的一所大学正在与 Grails 全职合作，并且有一个包含一些提示的博客：

[http://dahernan.net/search/label/grails](http://dahernan.net/search/label/grails)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T18:20:37.187

您应该跳过 RoR 并专注于学习工作中需要的 Grails。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-02T19:20:22.050

@Levi Figueira

一方面，Grails 比 Rails 灵活得多。Rails 很难与遗留数据库一起使用，因为 ActiveRecord 有太多的设计约束，许多遗留数据库没有遵循。Grails 等可以使用标准的 Hibernate 映射，它可以适应更广泛的数据库设计。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-06T19:21:38.940

Rails 社区在宣传 RoR 方面一直非常直言不讳，结果是人们设定了很高的期望，但并不总是能得到满足（程序员的生产力很好，但是一旦部署就确保良好的性能并不容易）。

Grails 被设计为 Java 的脚本继承者，而 JRuby on Rails 中使用的 Ruby-Java 集成必须进行改造。

我建议您坚持使用 Grails；它可能没有 RoR 那样的浮华，但它是一个务实的选择；您可以提高生产力并重用现有的 Java 库。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-08T03:05:24.057

直接跳入Grails。我确信 Ruby/Rails 很好，但在 Groovy/Grails 中也是如此。我推荐这本书。

[http://beginninggroovyandgrails.com](http://beginninggroovyandgrails.com)

记住勘误表是在线的。书中有几个错误。

[http://beginninggroovyandgrails.com/site/content/errata](http://beginninggroovyandgrails.com/site/content/errata)

此外，请查看创建您的第一个 Grails 应用程序的 3 分 30 秒演示。

[http://grails.org/Grails+Screencasts](http://grails.org/Grails+Screencasts)

本教程将向您展示基础知识。

[http://grails.org/Quick+Start](http://grails.org/Quick+Start)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T04:57:22.333

是的，Grails 是要走的路。RoR 很好，但它将您与 Ruby 生态系统联系在一起。学习新框架或语言的部分工作是学习类库和语言语法。如果您的同事都是 Java 类型，那么您将更容易获得帮助和支持，因为他们都将使用与您相同的语言。

学习一点 Groovy 和 Java 的另一个好处是 GWT 等 Web 框架将向您开放。Grails 有一个 GWT 插件，作为前端开发人员，您会喜欢它的易用性和跨浏览器兼容性。

此外，至少有一家托管公司提供免费的 Grails 应用程序托管 ( [http://www.mor.ph/](http://www.mor.ph/) )，这意味着您可以在无需付费之前以少量数据制作网站原型。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-18T20:44:18.093

我更喜欢 Grails 而不是 Rails，但是学习 Rails 会给你一个更平衡的视角，实际上让你睁开眼睛去发现 Grails 中可能被忽视的东西。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-21T09:30:32.130

乍一看，您会认为它们是完全不同的故事，因为它们基于极其不同的语言（Ruby 和 Groovy）。

然后，在阅读了几篇教程之后，您会发现它们共享相同的原则、脚手架、鸭式打字……以及最终相同的目标： **使敏捷编程变得可行**。

如果您已经对 IoC 和 MVC 等术语感到满意，您会发现这些选项中的任何一个都很容易学习并且令人兴奋。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-13T22:34:09.950

我会说不，我也在学习 Grails，我也考虑过这一点，但是仅仅学习 Grails 是相当大的，再加上学习 Groovy（这很容易，但仍然必须学习它对吗？）等等...所以学习 Rails 实在是太过分了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-07-16T09:27:30.830

是的，如果我们比较 grails 和 rails，我会选择 grails（我在 grails 中开发了一些 Intranet 应用程序）。

但是 Django 优于两者——因为 python 是一个完美的选择。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-09-28T04:09:08.137

You might also want to take a look at [Clojure](http://clojure.org/), a JVM language that's just starting to get popular. It may be a good choice for a Java-based company since it's compatible with your old codebase, and has a lot of modern innovations going for it. There are some good web frameworks emerging, including [Compojure](http://github.com/weavejester/compojure/wiki).

# python - 如何设置 Python 脚本以在 Apache 2.0 中工作？

> ID：5102
> 
> 赞同：23
> 
> 时间：2008-08-07T18:24:12.013
> 
> 标签：python, apache, apache2

我尝试按照一些关于设置 mod_python 的谷歌搜索教程进行操作，但每次都失败了。你有一个好的，一步一步的，坚如磐石的howto吗？

我的开发盒是 OS X，生产 - Centos。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-07T18:40:53.337

在 Apache 上运行 Python 有两种主要方式。最简单的方法是使用 CGI 并编写普通的 Python 脚本，而第二种方法是使用 Django 或 Pylons 等 Web 框架。

使用 CGI 很简单。确保您的 Apache 配置文件设置了 cgi-bin。如果没有，请遵循他们的文档（[http://httpd.apache.org/docs/2.0/howto/cgi.html](http://httpd.apache.org/docs/2.0/howto/cgi.html)）。此时，您需要做的就是将 Python 脚本放在 cgi-bin 目录中，标准输出将成为 HTTP 响应。有关更多信息，请参阅 Python 的文档 ( [https://docs.python.org/library/cgi.html](https://docs.python.org/library/cgi.html) )。

如果你想使用 web 框架，你需要设置 mod_python 或 FastCGI。这些步骤取决于您要使用的框架。Django 提供了关于如何使用 Apache 设置 mod_python 和 Django 的清晰说明（[http://www.djangoproject.com/documentation/modpython/](http://www.djangoproject.com/documentation/modpython/)）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-07T19:02:57.850

Yes, mod_python is pretty confusing to set up. Here's how I did it.

In httpd.conf:

```
LoadModule python_module modules/mod_python.so

<Directory "/serverbase/htdocs/myapp">
  AddHandler mod_python .py
  PythonHandler myapp
  PythonDebug On 
```

and in your application directory:

```
$ /serverbase/htdocs/myapp$ ls -l
total 16
-r-xr-xr-x 1 root sys        6484 May 21 15:54 myapp.py 
```

Repeat the configuration for each python program you wish to have running under mod_python.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-07T19:05:58.310

Are you running Python on UNIX or Windows?

An alternative to mod_python and FastCGI is mod_wsgi. You can find out more at [modwsgi](http://code.google.com/p/modwsgi/)

I have built and installed this on Solaris without problems. I had previously tried mod_python but ran into problems with shared libraries as part of the build. There are [good install docs](http://code.google.com/p/modwsgi/wiki/InstallationInstructions) available.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T20:05:07.307

对我来说，问题不在于 Apache 的设置，而在于了解 mod_apache 如何实际使用 .py 文件。*不*执行模块级语句（包括`if __name__=='__main__'`部分中的语句）——我假设在命令行运行脚本的标准输出将是服务器输出的内容，但这不是它的工作方式。

 *相反，我编写了一个名为 的模块级函数`index()`，并让它以字符串的形式返回页面的 HTML。也可以有其他模块级函数（例如，`otherFunction()`），可以作为 URI 中的进一步段访问（例如，`testScript/otherFunction`对于文件`testScript.py`。）

显然，这比我最初的标准输出概念更有意义。更好地实际使用 Python 作为脚本语言而不是庞大的标记语言。

# javascript - 如何设置 CSS 切换器

> ID：5118
> 
> 赞同：36
> 
> 时间：2008-08-07T18:31:22.780
> 
> 标签：javascript, html, asp.net, css

我正在开发一个网站，该网站将在设定的日期切换到新样式。该站点的内置语义 HTML 和 CSS，因此更改应该只需要更改 CSS 参考。我正在与需要能够查看外观的设计师以及需要能够查看当前外观的内容更新以及新外观的设计进度的客户合作。

我打算在页脚中使用一个神奇的查询字符串值和/或一个 javascript 链接，它会写出一个 cookie 来选择新的 CSS 页面。我们正在使用 ASP.NET 3.5。有什么建议吗？

我应该提到我们正在使用 IE 条件注释来支持 IE8、7 和 6。我可以创建一个进行替换的函数：

```
<link href="Style/<% GetCssRoot() %>.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 8]>
    <link type="text/css" href="Style/<% GetCssRoot() %>-ie8.css" rel="stylesheet" />
<![endif]-->
<!--[if lte IE 7]>
    <link type="text/css" href="Style/<% GetCssRoot() %>-ie7.css" rel="stylesheet" />
<![endif]-->
<!--[if lte IE 6]>
    <link type="text/css" href="Style/<% GetCssRoot() %>-ie6.css" rel="stylesheet" />
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-07T19:00:58.757

在 Asp.net 3.5 中，您应该能够将标头中的 Link 标记设置为服务器标记。然后在代码隐藏中，您可以根据 cookie 值、查询字符串、日期等设置链接元素的 href 属性。

在您的 aspx 文件中：

```
<head>
  <link id="linkStyles" rel="stylesheet" type="text/css" runat="server" />
</head> 
```

在后面的代码中：

```
protected void Page_Load(object sender, EventArgs e) {
  string stylesheetAddress = // logic to determine stylesheet
  linkStyles.Href = stylesheetAddress;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-07T19:01:05.060

您应该研究`ASP.NET`主题，这正是它们的用途。它们还允许您对控件进行皮肤控制，这意味着为它们提供一组默认属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T18:56:47.707

我建议将样式表选择存储在会话中，这样您就不必依赖一直存在的查询字符串键。您可以检查 Page_Load 中的会话并添加适当的样式表引用。听起来这是一种临时/开发情况，所以选择简单有效的方法。

```
if (!String.IsNullOrEmpty(Request.QueryString["css"]))
  Session.Add("CSS",Request.QueryString["css"]); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-08-07T19:02:00.800

我会做以下事情：

[www.website.com/?stylesheet=new.css](http://www.website.com/?stylesheet=new.css)

然后在您的 ASP.NET 代码中：

```
if (Request.Querystring["stylesheet"] != null) {
    Response.Cookies["stylesheet"].Value = Request.QueryString["stylesheet"];
    Response.Redirect(<Current Page>);
} 
```

然后在哪里定义样式表：

```
if (Request.Cookies["stylesheet"] != null) {
    // New Stylesheet
} else {
    // Default
} 
```

# svn - 在 Windows 中为 subversion 编写钩子的最佳策略

> ID：5134
> 
> 赞同：20
> 
> 时间：2008-08-07T18:47:50.580
> 
> 标签：svn, hook, svn-hooks

在**Windows**中为**Subversion编写****挂钩**的最佳方法是什么？据我所知，只能使用可执行文件。那么最好的选择是什么？

 *****   普通批处理文件（非常有限，但对于非常简单的解决方案可能还可以）
*   专用的编译可执行应用程序（大锤破解简而言之？）
*   其他一些混合选择（例如运行 Powershell 脚本的批处理文件）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-07-29T07:03:06.380

我刚刚在这个问题上拖延了几天。有可用的第三方产品和大量的 PERL 和 Python 脚本，但我想要一些简单的东西和我熟悉的语言，所以最后只是在 C# 控制台应用程序中编写挂钩。这很简单：

```
public void Main(string[] args)
{
  string repositories = args[0];
  string transaction = args[1];

  var processStartInfo = new ProcessStartInfo
                           {
                             FileName = "svnlook.exe",
                             UseShellExecute = false,
                             CreateNoWindow = true,
                             RedirectStandardOutput = true,
                             RedirectStandardError = true,
                             Arguments = String.Format("log -t \"{0}\" \"{1}\"", transaction, repositories)
                           };

  var p = Process.Start(processStartInfo);
  var s = p.StandardOutput.ReadToEnd();
  p.WaitForExit();

  if (s == string.Empty)
  {
    Console.Error.WriteLine("Message must be provided");
    Environment.Exit(1);
  }

  Environment.Exit(0);
} 
```

然后，您可以通过将 pre-commit.cmd 文件添加到 repo 的 hooks 文件夹中，使用以下行在预提交时调用它：

```
[path]\PreCommit.exe %1 %2 
```

您可能会认为这有点过头了，但最终只需要几分钟的编码。更重要的是，您可以获得 .NET 语言套件的优势，恕我直言，它比其他语言套件更可取。我将显着扩展我的钩子并针对它们编写适当的测试 - 使用 DOS 批处理文件很难做到这一点！

顺便说一句，代码已改编自[这篇文章](http://irwinj.blogspot.com/2008/04/simple-subversion-trigger.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-19T17:52:09.087

我们有复杂的要求，例如：

1.  只有特定用户可以在部分 SVN 树中创建文件夹，但每个人都可以在那里编辑文件
2.  某些文件扩展名不能在文件中包含某些文本
3.  某些文件扩展名只能存储在目录的子集中
4.  以及几个更简单的，例如，必须有一个提交评论
5.  可通过针对所有先前的 SVN 提交运行新钩子来测试回归

#5 对我们来说意义重大，没有比能够通过新钩子推送所有以前的提交更好的方法来知道你不会破坏提交。让钩子明白 1234 是修订版，1234-1 是事务，并在调用 svnlook 时进行适当的参数更改等是我们在此过程中做出的最佳决定。

对我们来说，坚果变得足够大，完全可单元测试、可回归测试的 C# 控制台 exe 最有意义。我们有提供目录限制的配置文件，解析现有的 httpd_authz 文件以获取“特权”用户等。如果我们没有在 Windows 上运行 .NET 开发人员，我可能会全部用 Python 编写，但是因为其他人将来可能需要支持它，所以我通过 .BAT、.VBS、Powershell 愚蠢去了 .NET。

就我个人而言，我认为 Powershell 与 .NET 的不同之处在于，它几乎不能用作“脚本”语言。如果产品的唯一 cmd 行支持来自 PS（Exchange、Windows 2k8）等，那很好，但如果您只想解析一些文本或访问常规 .NET 对象，PS 只会添加疯狂的语法和愚蠢的 Security Iron窗帘可能是一个快速简单的小型 .NET 应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-17T16:55:35.380

检查[CaptainHook](https://sourceforge.net/projects/captainhook/)，“一个使用 .NET 编写 Subversion 挂钩的简单插件框架”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T18:53:42.500

根据复杂程度，每种情况都不同，如果我只是简单地移动文件，我将编写一个快速批处理文件。如果我想做一些更复杂的事情，我通常只是跳过脚本部分并编写一个可以处理它的快速 c# 程序。

那么问题是你是否把那个 c# 程序放在 svn 中并对其进行版本控制:)

**编辑：**专用 c# 应用程序的好处是我可以在以后重用代码片段来创建新的挂钩，包括我为处理挂钩日志而创建的简单日志输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-08T20:41:59.577

我已经在 Windows 上用[Python](http://python.org)编写了钩子，因为网上有很多示例（通常用于 Linux，但差异很小）。我们还使用与 SVN 集成的[Trac](http://trac.edgewall.org)，并且有一个通过 Python 可访问的 Trac API，它允许我们从 SVN 挂钩脚本自动创建/修改 Trac 票证。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-14T21:05:27.327

如果您有一个借助简单 php 类的 php 可执行文件，您可以在 php 中编写钩子脚本，如下所示[http://www.devhands.com/2010/01/subversion-hook-php-framework-in/](http://www.devhands.com/2010/01/subversion-hook-php-framework-in/)

# python - 有没有人有在 MATLAB 中创建共享库的经验？

> ID：5136
> 
> 赞同：14
> 
> 时间：2008-08-07T18:47:58.487
> 
> 标签：python, c, matlab

一位研究人员在 MATLAB 中创建了一个小型模拟，我们希望其他人可以使用它。我的计划是进行模拟，清理一些东西并将其变成一组函数。然后我打算将它编译成一个 C 库并使用 SWIG 创建一个 Python 包装器。那时，我应该能够从一个小型 Django 应用程序调用模拟。至少我希望如此。

我有正确的计划吗？有没有其他人做过类似的事情？如果有任何我目前不知道的严重陷阱，你能告诉我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-02T03:43:54.723

要记住的一件事是，Matlab 编译器实际上并没有将 Matlab 代码编译成本机机器指令。它只是将其包装成一个独立的可执行文件或一个带有运行它的运行时引擎的库。您将能够在没有安装 Matlab 的情况下运行您的代码，并且您可以将其与其他语言接口，但它仍将是解释的 Matlab 代码，因此不会有加速。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T20:57:20.303

我不会有太多帮助，但我记得我能够将 MATLAB 仿真包装到 DLL 中，然后从 Delphi 应用程序中调用它。它工作得非常好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-26T09:55:39.700

我也会先尝试 ctypes 。

1.  使用 Matlab 编译器将代码编译成 C。
2.  将 C 代码编译成 DLL。
3.  使用 ctypes 从这个 DLL 加载和调用代码

最难的一步可能是 1，但如果你已经了解 Matlab 并且使用过 Matlab 编译器，那么你应该不会遇到严重的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-19T13:51:47.747

也许尝试[ctypes](http://python.net/crew/theller/ctypes/)而不是 SWIG。如果它已作为 Python 2.5 的一部分包含在内，那么它一定很好:-)

# sql - Firebird 的 SQL 的子字符串函数不起作用

> ID：5142
> 
> 赞同：9
> 
> 时间：2008-08-07T18:52:07.230
> 
> 标签：sql, firebird, interbase

*我使用 Firebird 的substring*函数在机器上创建了一个视图，并且它起作用了。当我将数据库复制到另一台机器时，视图被破坏了。这是我使用它的方式：

```
SELECT SUBSTRING(field FROM 5 FOR 15) FROM table; 
```

这是不接受该功能的机器上的输出：

```
token unknown:  FROM 
```

两台电脑都有这样的配置：

*   *IB Expert*版本 2.5.0.42 运行查询和处理数据库。
*   *Firebird* 1.5 版作为服务器到数据库。
*   *安装了BDE 管理*版本 5.01，带有*Interbase* 4.0 驱动程序。

关于为什么它在这些机器上表现不同的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:44:39.363

1.  确保 Firebird 引擎是 1.5，并且在您期望 Firebird 1.5 的端口上的同一个盒子上没有运行 InterBase 服务器。

2.  确保您没有在此数据库中注册任何名为“子字符串”的 UDF，以便 Firebird 期待不同的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T18:55:37.363

Different engine versions?

Have you tried naming that expression in the result?

```
SELECT SUBSTRING(field FROM 5 FOR 15) AS x FROM table; 
```

# sql-server - 用于浏览/编辑表和运行查询的 SQL Server Management Studio 替代方案

> ID：5170
> 
> 赞同：128
> 
> 时间：2008-08-07T19:06:03.600
> 
> 标签：sql-server

我想知道是否有 Microsoft 的 SQL Server Management Studio 的替代品？

SSMS 没有任何问题，但有时它看起来太大了，我想做的只是浏览/编辑表和运行查询。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-08-07T20:31:12.413

我已经开始使用[LinqPad 了](http://www.linqpad.net/ "Linq 垫")。除了比 SSMS 更轻量之外，您还可以练习编写 LINQ 查询——这比无聊的旧 TSQL 更有趣！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-08-07T19:17:11.410

[MS SQL 的 TOAD](http://toadworld.com/)看起来不错。我从未亲自使用过它，但我使用过 Quest 的其他产品，它们很可靠。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2010-02-26T10:11:38.273

似乎没有人提到[Query Express](http://www.albahari.com/queryexpress.aspx)（[http://www.albahari.com/queryexpress.aspx](http://www.albahari.com/queryexpress.aspx)）和一个 fork [Query ExPlus （也在](http://sourceforge.net/projects/queryexplus/)[http://www.albahari.com/queryexpress.aspx](http://www.albahari.com/queryexpress.aspx)底部链接）

顺便提一句。第一个 URL 是 LINQPad 的作者 Joseph Albahari 的主页（查看这个杀手级工具）

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2011-02-26T10:02:43.790

[数据库.NET](http://fishcodelib.com/Database.htm)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-03-07T05:34:03.017

我已经使用免费软件[Atlantis SQL Enywhere](http://www.atlantis-interactive.co.uk/products/sqleverywhere/default.aspx)将近 6 个月了，并且一直运行良好。适用于 SQL 2005 和 SQL 2008 版本。它的功能给我留下了深刻的印象，并且键盘快捷键与 VS 相似，因此可以非常顺利地过渡到新的编辑器。

一些值得一提的功能：

*   Intellisense 在使用多个表并使用别名连接时实际工作
*   使用多个表时的连接建议（减少打字时间，非常整洁）
*   丰富的sql代码格式，自动缩进使用Ctrl K，Ctrl D。
*   更好地表示 SQL 计划
*   使用时突出显示变量声明。
*   鼠标悬停时的表定义。

所有这些功能为我节省了很多时间。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-12-13T00:19:57.763

[powershell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/download.mspx) + [sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx) :)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-08-07T23:47:57.150

如果您已经在 Visual Studio 中花费时间，那么您始终可以使用**服务器资源管理器**连接到任何 .Net 兼容的数据库服务器。

如果您使用的是 Professional 或更高版本，则可以创建和编辑表和数据库、运行查询等。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-08-07T19:25:57.287

[SSMS](http://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&displaylang=en)上有一个快速版本，它的功能要少得多，但仍然具有基础知识。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-10-05T16:29:29.760

vim + [dbext](http://www.vim.org/scripts/script.php?script_id=356) :)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-12T23:22:18.990

Oracle 有一个名为 SQL Developer 的免费程序，它可以与 Microsoft SQL Server 以及 Oracle 和 MySQL 一起使用。但是，在访问 SQL Server 时，Oracle SQL Developer 仅用于轻松迁移到 Oracle，因此您的 SQL Server 数据库本质上是只读的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-12T23:17:16.347

您仍然可以从以前的 SQL Server 版本安装和使用查询分析器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-30T15:03:26.563

[Embarcadero Rapid SQL](http://www.embarcadero.com/products/rapid-sql-xe3)怎么样 真的很好但有点贵。

# javascript - 如何从 ASP.Net 发布然后重定向到外部 URL？

> ID：5179
> 
> 赞同：38
> 
> 时间：2008-08-07T19:13:04.583
> 
> 标签：javascript, c#, asp.net, forms, postback

ASP.NET 服务器端控件回发到自己的页面。这使得您想要将用户重定向到外部页面，但由于某种原因（例如用于身份验证）需要发布到该页面的情况会很痛苦。

`HttpWebRequest`如果您不想重定向，那么An效果很好，并且 JavaScript 在某些情况下也很好，但如果您确实需要服务器端代码来为帖子收集数据，则可能会变得很棘手。

那么，您如何发布到外部 URL 并将用户重定向到 ASP.NET 代码隐藏代码的结果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-07T19:36:56.580

这就是我今天解决这个问题的方法。我从C# Corner 上的[这篇文章](http://www.c-sharpcorner.com/UploadFile/desaijm/ASP.NetPostURL11282005005516AM/ASP.NetPostURL.aspx)开始，但发现该示例（虽然技术上合理）有点不完整。他说的一切都是正确的，但我需要访问一些外部站点才能将其拼凑起来才能完全按照我的意愿工作。

用户在技术上根本没有提交表单并没有帮助。他们点击一个链接进入我们的支持中心，但要让他们登录到支持中心的网站上的 http 帖子。

该解决方案涉及使用`HttpContext.Current.Response.Write()`为表单编写数据，然后在`<body onload="">`方法上使用一些 Javascript 将表单提交到正确的 URL。

当用户单击 Support Center 链接时，会调用以下方法来编写响应并重定向用户：

```
public static void PassthroughAuthentication()
{

    System.Web.HttpContext.Current.Response.Write("<body 
    onload=document.forms[0].submit();window.location=\"Home.aspx\";>");

    System.Web.HttpContext.Current.Response.Write("<form name=\"Form\" 
    target=_blank method=post 
    action=\"https://external-url.com/security.asp\">");

    System.Web.HttpContext.Current.Response.Write(string.Format("<input 
       type=hidden name=\"cFName\" value=\"{0}\">", "Username"));

    System.Web.HttpContext.Current.Response.Write("</form>");
    System.Web.HttpContext.Current.Response.Write("</body>");
} 
```

此方法的关键在于 Javascript 的 onload 位，当页面主体加载时，它会提交表单，然后将用户重定向回我自己的主页。那一点不祥的原因是我在新窗口中启动外部站点，但不希望用户在刷新页面时重新提交隐藏的表单。加上那个隐藏的表格把页面向下推了几个像素，这让我很紧张。

我会对任何人对此提出的任何更清洁的想法都非常感兴趣。

埃里克·斯普尔

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-01-21T19:23:51.363

我从[CodeProject的这个例子开始](http://www.codeproject.com/KB/aspnet/ASP_NETRedirectAndPost.aspx)

然后，我没有添加到页面中，而是从 saalon（上图）中借用并执行了 Response.Write()。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-08T03:25:07.447

我会使用 HttpWebRequest 类在您的代码中进行表单发布。这是一个很好的帮助类，可以帮助您入门：

[http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx](http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx)

从那里，您可以只执行 Response.Redirect，或者您可能需要根据帖子的结果改变您的操作（如果有错误，将其显示给用户或其他）。老实说，我认为您已经在问题中找到了答案-听起来您认为这是一个帖子或重定向，而实际上您可以从后面的代码中完成它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-07T19:17:47.023

如果您使用的是 ASP.NET 2.0，则可以通过[跨页发布](http://msdn.microsoft.com/en-us/library/ms178139.aspx)来做到这一点。

编辑：我错过了您询问*外部*页面的事实。为此，我认为您需要让您的 ASP.NET 页面生成一个 HTML 表单，其操作设置为远程 URL，方法设置为 POST。（使用跨页发布，这甚至可以是一个没有 UI 的不同页面，只有隐藏的表单元素。）然后添加一些 javascript 以在客户端收到回发结果后立即提交表单。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T19:20:48.780

我通过呈现一个自动发布（使用 JavaScript）到所需远程 URL 的表单来做到这一点 - 在 Web 表单的回发中收集发布所需的任何信息，然后为远程发布表单构建 HTML 并将其呈现回来给客户。

我为此构建了一个实用程序类，其中包含远程 URL 和表单的名称/值对集合。

如果您拥有所涉及的两个页面，则跨页面发布将起作用，但如果您需要发布到另一个站点（例如 PayPal），则不会。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-27T18:55:28.683

我需要在同一个窗口中打开，处理原始页面中可能出现的框架问题，然后在后面的代码中重定向到外部站点：

```
Private Sub ExternalRedirector(ByVal externalUrl As String)
    Dim clientRedirectName As String = "ClientExternalRedirect"
    Dim externalRedirectJS As New StringBuilder()

    If Not String.IsNullOrEmpty(externalUrl) Then
        If Not Page.ClientScript.IsStartupScriptRegistered(clientRedirectName) Then
            externalRedirectJS.Append("function CheckWindow() {")
            externalRedirectJS.Append("   if (window.top != window) {")
            externalRedirectJS.Append("       window.top.location = '")
            externalRedirectJS.Append(externalUrl)
            externalRedirectJS.Append("';")
            externalRedirectJS.Append("       return false;")
            externalRedirectJS.Append("   }")
            externalRedirectJS.Append("   else {")
            externalRedirectJS.Append("   window.location = '")
            externalRedirectJS.Append(externalUrl)
            externalRedirectJS.Append("';")
            externalRedirectJS.Append("   }")
            externalRedirectJS.Append("}")
            externalRedirectJS.Append("CheckWindow();")

            Page.ClientScript.RegisterStartupScript(Page.GetType(), clientRedirectName, externalRedirectJS.ToString(), True)
        End If
    End If
End Sub 
```

# asmx - 如何从 Visual Studio 2008 中的配置文件中提取 ASP.NET Web 引用的 URL？

> ID：5188
> 
> 赞同：8
> 
> 时间：2008-08-07T19:20:27.097
> 
> 标签：asmx

我有一个嵌入在我们的应用程序中的报表服务器的 Web 参考。不过，报告所在的服务器可能会发生变化，如果有必要，我希望能够“即时”更改它。

我知道我以前做过，但似乎不记得是怎么做的。谢谢你的帮助。

我暂时手动解决了这个问题。在代码中设置 URL 并不是什么大问题，但我想弄清楚在 VS 2008 中这样做的“正确”方式是什么。任何人都可以提供任何进一步的见解吗？谢谢！

* * *

在**VS2008**中，当我将 URL Behavior 属性更改为 Dynamic 时，我会在 Reference 类中自动生成以下代码。

我可以在 web.config 中覆盖此设置 (MySettings) 吗？我想我不知道设置的东西是如何工作的。

```
Public Sub New()
    MyBase.New
    Me.Url = Global.My.MySettings.Default.Namespace_Reference_ServiceName
    If (Me.IsLocalFileSystemWebService(Me.Url) = true) Then
        Me.UseDefaultCredentials = true
        Me.useDefaultCredentialsSetExplicitly = false
    Else
        Me.useDefaultCredentialsSetExplicitly = true
    End If
End Sub 
```

*编辑*

所以这些东西自 VS03 以来发生了一些变化（这可能是我用来做这件事的最后一个 VS 版本）。

根据： http: [//msdn.microsoft.com/en-us/library/a65txexh.a​​spx](http://msdn.microsoft.com/en-us/library/a65txexh.aspx)看起来我有一个设置对象，我可以在其上以编程方式设置属性，但我需要提供检索逻辑该 URL 来自 web.config。

这是在 VS2008 中执行此操作的新标准方式，还是我遗漏了什么？

*编辑#2*

有人在这里有什么想法吗？我在我的应用程序中绕过它，然后自己将 URL 放入我的 web.config 中并读出来。但我对此并不满意，因为我仍然觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T19:22:25.983

在属性窗口中，将“行为”更改为动态。

请参阅： http: [//www.codeproject.com/KB/XML/wsdldynamicurl.aspx](http://www.codeproject.com/KB/XML/wsdldynamicurl.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T19:22:36.123

如果您指的是 VS2005“Web 参考”，那么生成的代理类具有一个 URL 属性，即该服务的 SOAP 端点 url。您可以更改此属性并让您的后续 http 通信与该新端点进行。

编辑：啊，谢谢 bcaff86。我不知道你可以通过更改属性来做到这一点。

# c# - 何时在 LINQtoObjects 上使用带有 lambda 的扩展方法来过滤集合？

> ID：5194
> 
> 赞同：16
> 
> 时间：2008-08-07T19:23:13.127
> 
> 标签：c#, linq, .net-3.5, lambda

我正在对一些 C# 3 集合过滤器进行原型设计并遇到了这个问题。我有一系列产品：

```
public class MyProduct
{
    public string Name { get; set; }
    public Double Price { get; set; }
    public string Description { get; set; }
}

var MyProducts = new  List<MyProduct>
{            
    new  MyProduct
    {
        Name = "Surfboard",
        Price = 144.99,
        Description = "Most important thing you will ever own."
    },
    new MyProduct
    {
        Name = "Leash",
        Price = 29.28,
        Description = "Keep important things close to you."
    }
    ,
    new MyProduct
    {
        Name = "Sun Screen",
        Price = 15.88,
        Description = "1000 SPF! Who Could ask for more?"
    }
}; 
```

现在，如果我使用 LINQ 进行过滤，它会按预期工作：

```
var d = (from mp in MyProducts
             where mp.Price < 50d
             select mp); 
```

如果我将 Where 扩展方法与 Lambda 结合使用，过滤器也可以工作：

```
var f = MyProducts.Where(mp => mp.Price < 50d).ToList(); 
```

**问题：**有什么区别，为什么使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-07T19:25:49.487

LINQ 变成了方法调用，就像您拥有的代码一样。

换句话说，应该没有区别。

但是，在您的两段代码中，您没有在第一段调用 .ToList ，因此第一段代码将生成一个可枚举的数据源，但如果您在其上调用 .ToList ，则两者应该相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-11T12:52:52.080

如前所述 d 将是`IEnumerable<MyProduct>`而 f 是`List<MyProduct>`

转换由 C# 编译器完成

```
var d = 
    from mp in MyProducts
    where mp.Price < 50d
    select mp; 
```

转换为（在编译为 IL 并扩展泛型之前）：

```
var d = 
    MyProducts.
    Where<MyProduct>( mp => mp.Price < 50d ).
    Select<MyProduct>( mp => mp ); 
    //note that this last select is optimised out if it makes no change 
```

请注意，在这个简单的情况下，它几乎没有什么区别。Linq 真正有价值的地方在于更复杂的循环。

例如，该语句可以包括 group-bys、orders 和一些 let 语句，并且当等价物`.Method().Method.Method()`变得复杂时，仍然可以以 Linq 格式读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T04:19:00.847

除了 ToList 差异之外，#2 更具可读性和自然 IMO

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T04:35:51.053

The syntax you are using for *d* will get transformed by the compiler into the same IL as the extension methods. The "SQL-like" syntax is supposed to be a more natural way to represent a LINQ expression (although I personally prefer the extension methods). As has already been pointed out, the first example will return an IEnumerable result while the second example will return a List result due to the call to ToList(). If you remove the ToList() call in the second example, they will both return the same result as Where returns an IEnumerable result.

# java - 使用 Java Servlet 访问 post 变量

> ID：5222
> 
> 赞同：63
> 
> 时间：2008-08-07T19:39:31.240
> 
> 标签：java, http, servlets

什么是 PHP 的 Java 等价物`$_POST`？在网上搜索了一个小时后，我仍然没有更近的地方。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-08-14T13:52:55.730

这是一个简单的例子。我不喜欢 html 或 servlet，但你应该明白。

我希望这能够帮到你。

```
<html>
<body>
<form method="post" action="/myServlet">
<input type="text" name="username" />
<input type="password" name="password" />
<input type="submit" />
</form>
</body>
</html> 
```

现在为 Servlet

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class MyServlet extends HttpServlet {
  public void doPost(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {

    String userName = request.getParameter("username");
    String password = request.getParameter("password");
    ....
    ....
  }
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-08-07T19:43:36.113

您的`HttpServletRequest`对象具有`getParameter(String paramName)`可用于获取参数值的方法。 [http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String)](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-08-07T19:47:30.490

POST 变量应该可以通过请求对象访问：[​​HttpRequest.getParameterMap()](http://java.sun.com/products/servlet/2.3/javadoc/javax/servlet/ServletRequest.html#getParameterMap())。例外情况是表单发送多部分 MIME 数据（表单具有**enctype="multipart/form-data"**）。在这种情况下，您需要使用 MIME 解析器解析字节流。您可以自己编写或使用现有的，例如 Apache [Commons File Upload](http://commons.apache.org/fileupload/) API。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-24T11:12:07.787

前面的答案是正确的，但请记住在输入字段（html 表单）中使用 name 属性，否则您将一无所获。例子：

`<input type="text" id="username" /> <!-- won't work --> <input type="text" name="username" /> <!-- will work --> <input type="text" name="username" id="username" /> <!-- will work too -->`

所有这些代码都是 HTML 有效的，但是使用 getParameter(java.lang.String) 您需要在要接收的所有参数中设置 name 属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-19T13:12:43.453

为了获取所有发布参数，有一个 Map，其中包含请求参数名称作为键，参数值作为键。

```
Map params = servReq.getParameterMap(); 
```

并获取具有已知名称的参数正常

```
String userId=servReq.getParameter("user_id"); 
```

# javascript - JavaScript 对象的长度

> ID：5223
> 
> 赞同：2779
> 
> 时间：2008-08-07T19:42:21.060
> 
> 标签：javascript, javascript-objects

我有一个 JavaScript 对象。是否有内置或公认的最佳实践方法来获取此对象的长度？

```
const myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21; 
```

* * *

## 回答 #1

> 赞同：3013
> 
> 时间：2008-08-09T08:31:04.577

## 更新的答案

**这是 2016 年的更新以及[ES5](http://kangax.github.io/compat-table/es5/)及更高版本的广泛部署。** 对于 IE9+ 和所有其他支持 ES5+ 的现代浏览器，您可以使用[`Object.keys()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)上面的代码：

```
var size = Object.keys(myObj).length; 
```

`Object.keys()`由于现在是内置的，因此不必修改任何现有原型。

**编辑**：对象可以具有无法通过 Object.key 方法返回的符号属性。因此，如果不提及它们，答案将是不完整的。

符号类型被添加到语言中以创建对象属性的唯一标识符。Symbol 类型的主要好处是防止覆盖。

`Object.keys`或`Object.getOwnPropertyNames`不适用于符号属性。要退回它们，您需要使用`Object.getOwnPropertySymbols`.

```
var person = {
  [Symbol('name')]: 'John Doe',
  [Symbol('age')]: 33,
  "occupation": "Programmer"
};

const propOwn = Object.getOwnPropertyNames(person);
console.log(propOwn.length); // 1

let propSymb = Object.getOwnPropertySymbols(person);
console.log(propSymb.length); // 2
```

## 较旧的答案

最可靠的答案（即捕捉到您正在尝试做的事情的意图，同时导致最少的错误）将是：

```
Object.size = function(obj) {
  var size = 0,
    key;
  for (key in obj) {
    if (obj.hasOwnProperty(key)) size++;
  }
  return size;
};

// Get the size of an object
const myObj = {}
var size = Object.size(myObj);
```

JavaScript 中有一种约定，您[不要向 Object.prototype 添加东西](https://stackoverflow.com/questions/10757455/object-prototype-is-verboten)，因为它会破坏各种库中的枚举。不过，向 Object 添加方法通常是安全的。

* * *

* * *

## 回答 #2

> 赞同：1976
> 
> 时间：2011-04-03T01:44:24.820

如果您知道不必担心`hasOwnProperty`检查，则可以通过以下方式使用[Object.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)方法：

```
Object.keys(myArray).length 
```

* * *

## 回答 #3

> 赞同：304
> 
> 时间：2012-07-05T14:39:00.947

**更新**：如果您使用的是[Underscore.js](http://underscorejs.org/#size)（推荐，它是轻量级的！），那么您可以这样做

```
_.size({one : 1, two : 2, three : 3});
=> 3 
```

**如果不是**，并且您不想因任何原因弄乱 Object 属性，并且已经在使用 jQuery，那么插件同样可以访问：

```
$.assocArraySize = function(obj) {
    // http://stackoverflow.com/a/6700/11236
    var size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
    }
    return size;
}; 
```

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2013-09-01T16:12:06.933

这是最跨浏览器的解决方案。

这比接受的答案更好，因为它使用本机 Object.keys（如果存在）。因此，它是所有现代浏览器中最快的。

```
if (!Object.keys) {
    Object.keys = function (obj) {
        var arr = [],
            key;
        for (key in obj) {
            if (obj.hasOwnProperty(key)) {
                arr.push(key);
            }
        }
        return arr;
    };
}

Object.keys(obj).length; 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2008-08-07T19:52:19.840

我不是 JavaScript 专家，但看起来你必须遍历元素并计算它们，因为 Object 没有长度方法：

```
var element_count = 0;
for (e in myArray) {  if (myArray.hasOwnProperty(e)) element_count++; } 
```

@palmsey：为了公平起见，JavaScript 文档实际上明确地将 Object 类型的变量以这种方式称为“关联数组”。

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2018-01-18T10:29:26.513

只需使用它来获取`length`：

```
Object.keys(myObject).length 
```

* * *

## 回答 #7

> 赞同：35
> 
> 时间：2014-07-01T12:40:34.063

此方法在数组中获取对象的所有属性名称，因此您可以获得该数组的长度，该长度等于对象键的长度。

```
Object.getOwnPropertyNames({"hi":"Hi","msg":"Message"}).length; // => 2 
```

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2011-06-11T15:44:56.410

为了不弄乱原型或其他代码，您可以构建和扩展您自己的对象：

```
function Hash(){
    var length=0;
    this.add = function(key, val){
         if(this[key] == undefined)
         {
           length++;
         }
         this[key]=val;
    }; 
    this.length = function(){
        return length;
    };
}

myArray = new Hash();
myArray.add("lastname", "Simpson");
myArray.add("age", 21);
alert(myArray.length()); // will alert 2 
```

如果您总是使用 add 方法，那么 length 属性将是正确的。如果您担心自己或其他人忘记使用它，您也可以将其他人发布的属性计数器添加到长度方法中。

当然，您总是可以覆盖这些方法。但即使你这样做了，你的代码也可能会明显失败，从而很容易调试。;)

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2017-05-22T13:42:23.353

我们可以使用以下方法找到 Object 的长度：

```
const myObject = {};
console.log(Object.values(myObject).length);
```

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2008-08-08T19:18:45.143

以下是检查该属性是否不在原型链上的方法并且不要忘记：

```
var element_count = 0;
for(var e in myArray)
    if(myArray.hasOwnProperty(e))
        element_count++; 
```

* * *

## 回答 #11

> 赞同：20
> 
> 时间：2013-08-02T08:49:32.727

这是一个完全不同的解决方案，仅适用于更现代的浏览器（Internet Explorer 9+、Chrome、Firefox 4+、Opera 11.60+ 和 Safari 5.1+）

看到[这个 jsFiddle](http://jsfiddle.net/QHDt7/ "jsFiddle")。

设置你的关联数组类

```
/**
 * @constructor
 */
AssociativeArray = function () {};

// Make the length property work
Object.defineProperty(AssociativeArray.prototype, "length", {
    get: function () {
        var count = 0;
        for (var key in this) {
            if (this.hasOwnProperty(key))
                count++;
        }
        return count;
    }
}); 
```

现在您可以按如下方式使用此代码...

```
var a1 = new AssociativeArray();
a1["prop1"] = "test";
a1["prop2"] = 1234;
a1["prop3"] = "something else";
alert("Length of array is " + a1.length); 
```

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2016-05-18T18:16:07.027

如果您需要一个显示其大小的关联数据结构，最好使用映射而不是对象。

```
const myMap = new Map();

myMap.set("firstname", "Gareth");
myMap.set("lastname", "Simpson");
myMap.set("age", 21);

console.log(myMap.size); // 3
```

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2018-06-06T06:51:24.540

```
<script>
myObj = {"key1" : "Hello", "key2" : "Goodbye"};
var size = Object.keys(myObj).length;
console.log(size);
</script>

<p id="myObj">The number of <b>keys</b> in <b>myObj</b> are: <script>document.write(size)</script></p>
```

这对我有用：

```
var size = Object.keys(myObj).length; 
```

* * *

## 回答 #14

> 赞同：17
> 
> 时间：2019-09-08T04:45:53.830

用于`Object.keys(myObject).length`获取对象/数组的长度

```
var myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21;

console.log(Object.keys(myObject).length); //3
```

* * *

## 回答 #15

> 赞同：16
> 
> 时间：2011-07-29T13:41:54.050

在某些情况下，最好将大小存储在单独的变量中。特别是，如果您要在一个位置将一个元素添加到数组中，并且可以轻松地增加大小。如果您需要经常检查尺寸，它显然会更快。

* * *

## 回答 #16

> 赞同：16
> 
> 时间：2016-05-31T04:49:03.720

采用：

```
var myArray = new Object();
myArray["firstname"] = "Gareth";
myArray["lastname"] = "Simpson";
myArray["age"] = 21;
obj = Object.keys(myArray).length;
console.log(obj)
```

* * *

## 回答 #17

> 赞同：15
> 
> 时间：2008-08-08T22:34:56.557

> > @palmsey：为了公平起见，JavaScript 文档实际上明确地将 Object 类型的变量以这种方式称为“关联数组”。

公平地说，@palmsey 他是完全正确的。它们不是关联数组；它们绝对是对象 :) - 完成关联数组的工作。但是就更广泛的观点而言，根据我发现的这篇相当不错的文章，您似乎绝对拥有它的权利：

*[JavaScript“关联数组”被认为是有害的](http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)*

但是根据这一切，[公认的答案](https://stackoverflow.com/questions/5223/length-of-javascript-associative-array#5234)本身就是不好的做法吗？

> > 为 Object 指定原型 size() 函数

如果在 Object .prototype 中添加了任何其他内容，则建议的代码将失败：

```
<script type="text/javascript">
Object.prototype.size = function () {
  var len = this.length ? --this.length : -1;
    for (var k in this)
      len++;
  return len;
}
Object.prototype.size2 = function () {
  var len = this.length ? --this.length : -1;
    for (var k in this)
      len++;
  return len;
}
var myArray = new Object();
myArray["firstname"] = "Gareth";
myArray["lastname"] = "Simpson";
myArray["age"] = 21;
alert("age is " + myArray["age"]);
alert("length is " + myArray.size());
</script> 
```

我不认为该答案应该是公认的答案，因为如果您在同一执行上下文中运行任何其他代码，则无法信任它可以工作。要以稳健的方式执行此操作，您肯定需要在 myArray 中定义 size 方法，并在遍历成员时检查成员的类型。

* * *

## 回答 #18

> 赞同：15
> 
> 时间：2018-05-30T15:41:40.273

最简单的方法是这样的：

```
Object.keys(myobject).length 
```

其中 myobject 是您想要长度的对象。

* * *

## 回答 #19

> 赞同：12
> 
> 时间：2011-08-24T14:26:28.887

这样的事情怎么办——

```
function keyValuePairs() {
    this.length = 0;
    function add(key, value) { this[key] = value; this.length++; }
    function remove(key) { if (this.hasOwnProperty(key)) { delete this[key]; this.length--; }}
} 
```

* * *

## 回答 #20

> 赞同：12
> 
> 时间：2014-02-09T06:48:50.453

如果我们有哈希

> 哈希= {“a”：“b”，“c”：“d”}；

我们可以使用键的长度来获得长度，也就是哈希的长度：

> 键（哈希）.length

* * *

## 回答 #21

> 赞同：12
> 
> 时间：2018-04-05T23:45:02.843

```
var myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21; 
```

1.  Object.values(myObject).length
2.  Object.entries(myObject).length
3.  Object.keys(myObject).length

* * *

## 回答 #22

> 赞同：11
> 
> 时间：2015-09-15T19:15:04.340

如果您使用的是[AngularJS](http://en.wikipedia.org/wiki/AngularJS) 1.x，您可以通过创建过滤器并使用任何其他示例中的代码来以 AngularJS 的方式执行操作，例如：

```
// Count the elements in an object
app.filter('lengthOfObject', function() {
  return function( obj ) {
    var size = 0, key;
    for (key in obj) {
      if (obj.hasOwnProperty(key)) size++;
    }
   return size;
 }
}) 
```

**用法**

在您的控制器中：

```
$scope.filterResult = $filter('lengthOfObject')($scope.object) 
```

或者在你看来：

```
<any ng-expression="object | lengthOfObject"></any> 
```

* * *

## 回答 #23

> 赞同：10
> 
> 时间：2020-01-11T12:54:04.210

```
const myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21;

console.log(Object.keys(myObject).length)

// o/p 3 
```

* * *

## 回答 #24

> 赞同：9
> 
> 时间：2011-11-18T18:06:41.627

上述某些内容的变体是：

```
var objLength = function(obj){    
    var key,len=0;
    for(key in obj){
        len += Number( obj.hasOwnProperty(key) );
    }
    return len;
}; 
```

集成 hasOwnProp 是一种更优雅的方式。

* * *

## 回答 #25

> 赞同：9
> 
> 时间：2016-03-07T13:13:53.933

如果您不关心是否支持 Internet Explorer 8 或更低版本，您可以通过应用以下两个步骤轻松获取对象中的属性数量：

1.  运行以获取仅包含[**可枚举**](https://developer.mozilla.org/en/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)[**`Object.keys()`**](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)属性名称的数组，或者如果您还想包含不可枚举属性的名称。[](https://developer.mozilla.org/en/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)**[**`Object.getOwnPropertyNames()`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)**
***   获取该[**`.length`**](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/length)数组的属性。**

 *** * *

如果您需要多次执行此操作，可以将此逻辑包装在一个函数中：

```
function size(obj, enumerablesOnly) {
    return enumerablesOnly === false ?
        Object.getOwnPropertyNames(obj).length :
        Object.keys(obj).length;
} 
```

如何使用此特定功能：

```
var myObj = Object.create({}, {
    getFoo: {},
    setFoo: {}
});
myObj.Foo = 12;

var myArr = [1,2,5,4,8,15];

console.log(size(myObj));        // Output : 1
console.log(size(myObj, true));  // Output : 1
console.log(size(myObj, false)); // Output : 3
console.log(size(myArr));        // Output : 6
console.log(size(myArr, true));  // Output : 6
console.log(size(myArr, false)); // Output : 7 
```

另请参阅[**此 Fiddle**](https://jsfiddle.net/0x11tv73/5/)以获取演示。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2013-06-26T23:47:45.590

这是詹姆斯科根答案的不同版本。无需传递参数，只需制作 Object 类的原型并使代码更简洁。

```
Object.prototype.size = function () {
    var size = 0,
        key;
    for (key in this) {
        if (this.hasOwnProperty(key)) size++;
    }
    return size;
};

var x = {
    one: 1,
    two: 2,
    three: 3
};

x.size() === 3; 
```

jsfiddle 示例：http: [//jsfiddle.net/qar4j/1/](http://jsfiddle.net/qar4j/1/)

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2016-01-12T01:37:43.437

您总是可以得到与普通数组`Object.getOwnPropertyNames(myObject).length`相同的结果。`[].length`

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-09-17T01:48:20.517

您可以简单地`Object.keys(obj).length`在任何对象上使用以获取其长度。Object.keys 返回一个包含所有对象*键*（属性）的数组，可以方便地使用相应数组的长度来查找该对象的长度。你甚至可以为此编写一个*函数*。让我们发挥*创意*并为它编写一个**方法**（以及更方便的 getter 属性）：

```
function objLength(obj)
{
  return Object.keys(obj).length;
}

console.log(objLength({a:1, b:"summit", c:"nonsense"}));

// Works perfectly fine
var obj = new Object();
obj['fish'] = 30;
obj['nullified content'] = null;
console.log(objLength(obj));

// It also works your way, which is creating it using the Object constructor
Object.prototype.getLength = function() {
   return Object.keys(this).length;
}
console.log(obj.getLength());

// You can also write it as a method, which is more efficient as done so above

Object.defineProperty(Object.prototype, "length", {get:function(){
    return Object.keys(this).length;
}});
console.log(obj.length);

// probably the most effictive approach is done so and demonstrated above which sets a getter property called "length" for objects which returns the equivalent value of getLength(this) or this.getLength()
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2017-07-04T15:20:39.453

实现此目的的一个好方法（仅限 Internet Explorer 9+）是在 length 属性上定义一个魔术 getter：

```
Object.defineProperty(Object.prototype, "length", {
    get: function () {
        return Object.keys(this).length;
    }
}); 
```

你可以像这样使用它：

```
var myObj = { 'key': 'value' };
myObj.length; 
```

它会给`1`.

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2013-03-04T17:38:43.470

下面是 James Coglan 在 CoffeeScript 中为那些放弃直接 JavaScript 的人提供的答案：)

```
Object.size = (obj) ->
  size = 0
  size++ for own key of obj
  size 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2015-01-06T19:10:35.450

## 财产

```
Object.defineProperty(Object.prototype, 'length', {
    get: function () {
        var size = 0, key;
        for (key in this)
            if (this.hasOwnProperty(key))
                size++;
        return size;
    }
}); 
```

## 采用

```
var o = {a: 1, b: 2, c: 3};
alert(o.length); // <-- 3
o['foo'] = 123;
alert(o.length); // <-- 4 
```

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2020-03-05T08:07:51.200

使用 ECMAScript 6 内置的 Reflect 对象，您可以轻松计算对象的属性：

```
Reflect.ownKeys(targetObject).length 
```

它将为您提供目标对象自身属性的长度（*重要*）。

```
Reflect.ownKeys(target) 
```

> 返回目标对象自己的（非继承的）属性键的数组。

这是什么意思？为了解释这一点，让我们看看这个例子。

```
function Person(name, age){
  this.name = name;
  this.age = age;
}

Person.prototype.getIntro= function() {
  return `${this.name} is ${this.age} years old!!`
}

let student = new Person('Anuj', 11);

console.log(Reflect.ownKeys(student).length) // 2
console.log(student.getIntro()) // Anuj is 11 years old!! 
```

您可以在此处看到，它只返回自己的属性，而对象仍在从其父级继承属性。

有关更多信息，请参阅：[反射 API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect)

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-05-09T18:45:09.060

像大多数 JavaScript 问题一样，有很多解决方案。您可以扩展像许多其他语言的字典（+ 一等公民）一样工作得更好或更坏的对象。这没有错，但另一种选择是构造一个满足您特定需求的新对象。

```
function uberject(obj){
    this._count = 0;
    for(var param in obj){
        this[param] = obj[param];
        this._count++;
    }
}

uberject.prototype.getLength = function(){
    return this._count;
};

var foo = new uberject({bar:123,baz:456});
alert(foo.getLength()); 
```

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2021-04-17T08:36:44.247

尝试：`Object.values(theObject).length`

```
const myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21;
console.log(Object.values(myObject).length);
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2015-04-11T14:33:17.950

**简单的解决方案：**

```
 var myObject = {};      // ... your object goes here.

  var length = 0;

  for (var property in myObject) {
    if (myObject.hasOwnProperty(property)){
      length += 1;
    }
  };

  console.log(length);    // logs 0 in my example. 
```

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2021-12-19T16:33:32.313

在这里你可以给出任何类型的变量数组、对象、字符串

```
function length2(obj){
    if (typeof obj==='object' && obj!== null){return Object.keys(obj).length;}
    if (Array.isArray){return obj.length;}
    return obj.length;

} 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2016-08-07T16:28:48.770

该解决方案适用于许多情况和跨浏览器：

**代码**

```
var getTotal = function(collection) {

    var length = collection['length'];
    var isArrayObject =  typeof length == 'number' && length >= 0 && length <= Math.pow(2,53) - 1; // Number.MAX_SAFE_INTEGER

    if(isArrayObject) {
        return collection['length'];
    }

    i= 0;
    for(var key in collection) {
        if (collection.hasOwnProperty(key)) {
            i++;
        }
    }

    return i;
}; 
```

**数据示例：**

```
// case 1
var a = new Object();
a["firstname"] = "Gareth";
a["lastname"] = "Simpson";
a["age"] = 21;

//case 2
var b = [1,2,3];

// case 3
var c = {};
c[0] = 1;
c.two = 2; 
```

**用法**

```
getLength(a); // 3
getLength(b); // 3
getLength(c); // 2 
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2019-02-13T04:15:19.387

`Object.keys`**在对象**[继承](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)的情况下不返回正确的结果。要正确计算对象属性（包括继承的属性），请使用`for-in`. 例如，通过以下函数（相关[问题](https://stackoverflow.com/a/54553880/860099)）：

```
var objLength = (o,i=0) => { for(p in o) i++; return i } 
```

```
var myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21;

var child = Object.create(myObject);
child["sex"] = "male";

var objLength = (o,i=0) => { for(p in o) i++; return i }

console.log("Object.keys(myObject):", Object.keys(myObject).length, "(OK)");
console.log("Object.keys(child)   :", Object.keys(child).length, "(wrong)");
console.log("objLength(child)     :", objLength(child), "(OK)");
```

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2020-10-06T18:24:32.347

简单的一个班轮：

```
console.log(Object.values({id:"1",age:23,role_number:90}).length);
```

* * *

## 回答 #40

> 赞同：-1
> 
> 时间：2021-10-21T22:09:56.457

```
 vendor = {1: "", 2: ""}
 const keysArray = Object.keys(vendor)
 const objectLength = keysArray.length
 console.log(objectLength)
 Result 2 
```

* * *

## 回答 #41

> 赞同：-2
> 
> 时间：2019-08-16T14:00:40.597

我有类似的需要来计算通过 websocket 接收的对象使用的带宽。简单地找到 Stringified 对象的长度对我来说就足够了。

```
websocket.on('message', data => {
    dataPerSecond += JSON.stringify(data).length;
} 
```

* * *

## 回答 #42

> 赞同：-4
> 
> 时间：2018-04-09T10:24:09.310

```
var myObject = new Object();
myObject["firstname"] = "Gareth";
myObject["lastname"] = "Simpson";
myObject["age"] = 21;

var size = JSON.stringify(myObject).length;

document.write(size);
```

```
JSON.stringify(myObject)
```

# html - HTML 注释标记

> ID：5226
> 
> 赞同：16
> 
> 时间：2008-08-07T19:46:47.417
> 
> 标签：html, semantic-markup

我目前正在创建自己的博客，我必须标记评论，但最好的标记方法是什么？

我需要提供的信息是：

1.  人名
2.  头像图标
3.  评论日期
4.  评论

任何想法都会很受欢迎。

*PS：我只对语义 html 标记感兴趣。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-07T20:46:19.840

我认为您的带有 cite、blockquote 等的版本肯定会起作用，但如果语义是您主要关心的问题，那么我个人不会使用 cite 和 blockquote，因为它们具有它们应该代表的特定事物。

blockquote 标签用于表示从另一个来源引用的引文，而 cite 标签用于表示信息来源（如杂志、报纸等）。

我认为当然可以提出一个论点，即您可以将语义 HTML 与类名一起使用，前提是它们是有意义的。这篇关于普通旧语义 HTML 的文章引用了使用类名 - [http://www.fooclass.com/plain_old_semantic_html](http://www.fooclass.com/plain_old_semantic_html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T19:56:36.697

这是您可以使用以下 CSS 将图片浮动到内容左侧的一种方法：

```
.comment {
  width: 400px;
}

.comment_img {
  float: left;
}

.comment_text,
.comment_meta {
  margin-left: 40px;
}

.comment_meta {
  clear: both;
}
```

```
<div class='comment' id='comment_(comment id #)'>
  <div class='comment_img'>
    <img src='https://placehold.it/100' alt='(Commenter Name)' />
  </div>
  <div class='comment_text'>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed mauris. Morbi quis tellus sit amet eros ullamcorper ultrices. Proin a tortor. Praesent et odio. Duis mi odio, consequat ut, euismod sed, commodo vitae, nulla. Suspendisse potenti. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam pede.</p>
    <p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Maecenas rhoncus accumsan velit. Donec varius magna a est. </p>
  </div>
  <p class='comment_meta'>
    By <a href='#'>Name</a> on <span class='comment_date'>2008-08-21 11:32 AM</span>
  </p>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T20:16:44.423

我可能在想这样的事情：

```
<ol class="comments">
    <li>
        <a href="">
            <img src="" alt="" />
        </a>
        <cite>Name<br />Date</cite>
        <blockquote>Comment</blockquote>
    </li>
</ol> 
```

不使用 div 并且只使用一个类，这是非常语义化的。该列表显示了发表评论的顺序，到个人网站的链接，以及他们的 gravatar 的图像，发表评论的网站的引用标签和阻止引用来保存他们所说的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T20:08:13.787

我不知道在不使用 div 或类的情况下，是否有一定可以很好地代表评论结构的标记，但您可以使用定义列表。您可以在定义列表的上下文中使用多个 dt 和 dd 标签 - [http://www.w3.org/TR/html401/struct/lists.html#edef-DL](http://www.w3.org/TR/html401/struct/lists.html#edef-DL)

```
<dl>
  <dt>By [Name] at 2008-01-01<dt>
  <dd><img src='...' alt=''/></dd>
  <dd><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed mauris. Morbi quis tellus sit amet eros ullamcorper ultrices. Proin a tortor. Praesent et odio. Duis mi odio, consequat ut, euismod sed, commodo vitae, nulla. Suspendisse potenti. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam pede.</p>

  <p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Maecenas rhoncus accumsan velit. Donec varius magna a est. </p>
   </dd>
</dl> 
```

更新：我对这种方法的担忧是，为了样式目的，可能难以使用 CSS 唯一标识元素。您可以使用 JavaScript（这里 jQuery 会很棒）来查找和应用样式。如果没有跨浏览器 (IE) 的完整 CSS 选择器支持，样式将更加困难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T22:07:16.400

我明白你的意思了。好吧，看完那篇文章，你为什么不试试这样的东西呢？

```
<blockquote 
    cite="http://yoursite/comments/feederscript.php?id=commentid" 
    title="<?php echo Name . " - " . Date ?>" >
    <?php echo Comment ?>
</blockquote> 
```

用一些时髦的 CSS 让它看起来不错。

feederscript.php would be something that could read from the database and echo only the commentid called for.

# user-interface - 用户界面 - 颜色和布局

> ID：5242
> 
> 赞同：10
> 
> 时间：2008-08-07T20:01:13.520
> 
> 标签：user-interface, usability

虽然我对 Web 应用程序信息特别感兴趣，但我也会对桌面应用程序开发有些好奇。这个问题是由我在个人网站上的工作以及我的工作所驱动的，在那里我开发了一些功能，但将其留给其他人来整合到网站的外观和感觉中。

有没有关于配色方案、布局、格式等方面的指南或经验法则？我想确保访问者的可读性和清晰度，但同时又不乏味和沉闷。

至于我在这方面的知识——如果你给我一张图片，我有足够的知识在屏幕上重现它，但如果你让我设计一个新的界面或重新设计一个现有的界面，我不知道从哪里开始.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T20:04:55.197

通常，每个操作系统都有用户界面指南。对于 Windows，[请查看此处](http://blogs.msdn.com/acoat/archive/2006/09/27/773148.aspx)。（编辑：该帖子中的链接已损坏。但在 MSDN 上搜索“[用户界面指南](http://search.msdn.microsoft.com/Default.aspx?query=User+Interface+Guidelines&brand=msdn&locale=en-us&refinement=)”有关于所有内容的文章）

苹果也有自己的。此外，您可能需要牢记[可访问性](https://developer.gnome.org/accessibility-devel-guide/stable/gad-ui-guidelines.html.en)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T20:10:55.573

检查您的颜色是否具有良好对比度的一个技巧是对其进行快照并转换为灰度。如果你看不懂，颜色肯定选错了。

另外，虽然它与用户界面无关，但[Before & After 杂志](http://web.archive.org/web/20191226210247/https://www.bamagazine.com/)可以为您提供一些关于颜色、设计和相关主题的非常好的提示。它甚至有一些免费的 pdf 文件可供下载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T20:15:06.173

Jenifer Tidwell所著的[Designing Interfaces](http://designinginterfaces.com/)一书有一整章关于这个主题（第 9 章，摘录可在线访问）。整本书都值得推荐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T21:37:50.813

对于 Web UI，我要在这里冒个泡，说网页设计中最重要的颜色是白色，或“浅色”。这是您在其上放置密集内容的颜色。

当涉及到您的主要内容区域时，始终使用深色文本，浅色背景。

布局中最重要的规则是空白。让内容呼吸。

遵循这两个简单的规则比大多数“用户界面可用性”指南更有价值。

顺便说一句，MS 用户界面指南（总的来说）很糟糕。阅读 Jakob Nielsen，看 Apple 设计美学，但远离 MS “中性灰色/蓝色 crunchbox” 12 步向导 10pt 文本哲学的 UI。

（我说作为一个长期的 MS GUI 程序员）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T21:02:24.660

我很讨厌找到看起来很好的颜色，所以我作弊并使用大自然的图片，这些图片主要是我想要的颜色（比如绿色），然后我使用[这个网站](http://www.degraeve.com/color-palette/)来提取主要的配色方案。一般来说，大自然在设置自己漂亮的配色方案方面做得很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T21:41:03.770

使用高对比度的颜色组合；白色背景上的黑色文本是高对比度组合的最佳示例。

不好的组合是红色背景上的绿色文本。这对色盲的人（比如我自己）来说太可怕了。

查看您的网站在色盲者眼中的样子：[colorfilter.wickline.org](http://colorfilter.wickline.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T21:49:13.020

至于桌面应用程序：无论您做什么，都不要使用手工挑选的颜色。坚持使用命名的系统颜色，例如“窗口背景”、“菜单文本”等。否则，依赖操作系统辅助功能的人将被您的颜色选择锁定（例如，无法选择高对比度主题）并且喜欢自定义桌面主题的人会认为您的应用程序很丑。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-17T18:12:38.477

**这里有一些关于您的排版**可用性的简单提示。这些东西主要解决可读性和可访问性问题。

做：

*   使用相对字体大小 (em)
*   使用 LANG 属性识别文档中的语言更改
*   白色背景上的黑色文本
*   对于标题，使用 H1、H2 等并适当嵌套它们
*   将内容分块并使用适合您的用户正在寻找的标题进行组织
*   写出清晰简单的文案
*   左对齐，右对齐
*   文本到背景的颜色必须是高对比度

不要：

*   使用“单击此处”或“更多”作为链接文本
*   使用下划线强调
*   超过 2 个字体类型系列
*   斜体
*   使用全部大写的文本块
*   在白色背景上使用真红色或真蓝色文本（色差）

# gwt - Stand-alone charts in GWT

> ID：5251
> 
> 赞同：22
> 
> 时间：2008-08-07T20:12:16.650
> 
> 标签：gwt, charts

I've been trying to get pretty charts to work in GWT on our internal network.

Playing around with [GWT-Ext](http://gwt-ext.com)'s charts is nice, but it requires flash and is really messy to control (it seems buggy, in general).

I'd like to hear about something that works with the least amount of dependencies and it also must work without a connection to the web (so, Google' charts API isn't a solution).

**Edit:** Indeed, I would rather a library that is all client-side.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-04T06:15:39.870

我正在构建一个基于 Flot 的 GWT 图表库：http://gflot.googlecode.com[希望](http://gflot.googlecode.com) 你觉得它有用。你有任何问题请联系我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-08T06:33:18.190

谷歌搜索“GWT +sparklines”让我找到了[gchart](http://code.google.com/p/gchart/)，这似乎是我需要的。
据我了解 - 这都是客户端，只需要他们的 JAR 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-12-16T00:40:45.123

Google 的图表实际上有两种风格，其中一种不需要与 Google 的服务器交互 - 所以应该可以满足您的需求。

Google Image Charts 是您正在考虑的 API，它是 Google 服务器上返回图像的 API。

Google Interactive Charts 是一个完全在浏览器中呈现的客户端 javascript API：[Google Interactive Charts](http://code.google.com/apis/visualization/interactive_charts.html)

Google 为交互式图表提供了一个 GWT 包装器：[GWT Visualization API](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)

不是所有的彩虹和独角兽，你可以在那里找到制作更好图表的图表库，但它非常可靠，适用于所有主要浏览器，我们已经成功使用了很长一段时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-07T14:25:05.127

如果您使用的是 ext-gwt，[http://code.google.com/p/ext-ux-ofcgxt/是一个不错的选择](http://code.google.com/p/ext-ux-ofcgxt/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T02:25:19.080

另一个闪存选项，具有预构建的 GWT 集成 - [Open Flash Chart / ofcgwt](http://code.google.com/p/ofcgwt/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-09T06:37:00.203

如果您正在寻找客户端，请查看基于原型 javascript 库的 flotr 或[基于](http://solutoire.com/flotr/)jQuery 的[flot 。](http://code.google.com/p/flot/)两者都运作良好，尽管 flot 似乎得到了更大的支持。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T06:27:46.287

好吧.. 我使用了 yahoo ui 图表库（GWT-Ext 在内部使用）。非常简洁的解决方案，虽然在 beta 阶段。

让我们知道你得出的结论..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T07:03:19.850

我认为 gwt-chart 对你来说是一个更好的框架。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-08T03:09:49.707

您想要具有服务器端组件还是完全由客户端驱动的东西？我见过的最好的都是闪光灯，唉。我以前用 JS 和 GWT 做过一些小技巧，但是在我去寻找一个库来为我做之前，我只会得到一些复杂的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-08T04:22:53.787

还有“迷你图”——它们有多种口味（虽然非常简单的图表）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-08T06:44:30.053

gchart 看起来非常棒。随它去吧！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-22T21:04:08.583

如果你愿意使用 flash，[XML/SWF](http://www.maani.us/xml_charts/)是一个很棒的工具

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-08-30T12:12:55.117

+1 [flot](http://code.google.com/p/flot/)，虽然需要 jQuery，所以可能不能很好地与 GWT 一起使用，我没有使用过。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-09-11T19:21:12.757

[在http://code.google.com/p/gwt-rcharts/](http://code.google.com/p/gwt-rcharts/)上托管的 GWT 中有一个用于图表的开源 api 。该 API 适用于 SVG/VML 规范。您可能会发现它很容易实现和使用。[您可以在http://gwt-rcharts.appspot.com/](http://gwt-rcharts.appspot.com/)找到演示

# vb.net - What is the best way to wrap time around the work day?

> ID：5260
> 
> 赞同：7
> 
> 时间：2008-08-07T20:21:52.433
> 
> 标签：vb.net, date

I have a situation where I want to add hours to a date and have the new date wrap around the work-day. I cobbled up a function to determine this new date, but want to make sure that I'm not forgetting anything.

The hours to be added is called "delay". It could easily be a parameter to the function instead.

Please post any suggestions. [VB.NET Warning]

```
Private Function GetDateRequired() As Date
    ''// A decimal representation of the current hour
    Dim hours As Decimal = Decimal.Parse(Date.Now.Hour) + (Decimal.Parse(Date.Now.Minute) / 60.0) 

    Dim delay As Decimal = 3.0           ''// delay in hours
    Dim endOfDay As Decimal = 12.0 + 5.0 ''// end of day, in hours
    Dim startOfDay As Decimal = 8.0      ''// start of day, in hours

    Dim newHour As Integer
    Dim newMinute As Integer

    Dim dateRequired As Date = Now
    Dim delta As Decimal = hours + delay

    ''// Wrap around to the next day, if necessary
    If delta > endOfDay Then
        delta = delta - endOfDay
        dateRequired = dateRequired.AddDays(1)

        newHour = Integer.Parse(Decimal.Truncate(delta))
        newMinute = Integer.Parse(Decimal.Truncate((delta - newHour) * 60))
        newHour = startOfDay + newHour
    Else
        newHour = Integer.Parse(Decimal.Truncate(delta))
        newMinute = Integer.Parse(Decimal.Truncate((delta - newHour) * 60))
    End If

    dateRequired = New Date(dateRequired.Year, dateRequired.Month, dateRequired.Day, newHour, newMinute, 0)

    Return dateRequired
End Sub 
```

**Note**: This will probably not work if delay is more than 9 hours long. It should never change from 3, through.

EDIT: The goal is find the date and time that you get as a result of adding several hours to the current time. This is used to determine a default value for a due date of a submission. I want to add 3 hours to the current time to get the due date time. However, I don't want due dates that go beyond 5pm on the current day. So, I tried to have the hours split between (today, up to 5pm) and (tomorrow, from 8am on), such that adding 3 hours to 4pm would give you 19am, because 1 hour is added to the end of today and 2 hours are added to the beginning of tomorrow.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T21:20:33.563

Okay, how about these? The difference between the approaches should speak for themselves.

Also, this is tested about as far as I can throw it. The warranty lasts until... now.

Hope it helps!

```
Module Module1

    Public Function IsInBusinessHours(ByVal d As Date) As Boolean
        Return Not (d.Hour < 8 OrElse d.Hour > 17 OrElse d.DayOfWeek = DayOfWeek.Saturday OrElse d.DayOfWeek = DayOfWeek.Sunday)
    End Function

    Public Function AddInBusinessHours(ByVal fromDate As Date, ByVal hours As Integer) As Date
        Dim work As Date = fromDate.AddHours(hours)
        While Not IsInBusinessHours(work)
            work = work.AddHours(1)
        End While
        Return work
    End Function

    Public Function LoopInBusinessHours(ByVal fromDate As Date, ByVal hours As Integer) As Date
        Dim work As Date = fromDate
        While hours > 0
            While hours > 0 AndAlso IsInBusinessHours(work)
                work = work.AddHours(1)
                hours -= 1
            End While
            While Not IsInBusinessHours(work)
                work = work.AddHours(1)
            End While
        End While
        Return work
    End Function

    Sub Main()
        Dim test As Date = New Date(2008, 8, 8, 15, 0, 0)
        Dim hours As Integer = 5
        Console.WriteLine("Date: " + test.ToString() + ", " + hours.ToString())
        Console.WriteLine("Just skipping: " + AddInBusinessHours(test, hours))
        Console.WriteLine("Looping: " + LoopInBusinessHours(test, hours))
        Console.ReadLine()
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T20:57:40.723

You should probably write some automated tests for each condition you can think of, and then just start brainstorming more, writing the tests as you think of them. This way, you can see for sure it will work, and will continue to work if you make further changes. Look up Test Driven Development if you like the results.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T02:22:08.383

我使用以下公式（伪代码）取得了一些成功：

```
now <- number of minutes since the work day started
delay <- number of minutes in the delay
day <- length of a work day in minutes

x <- (now + delay) / day {integer division}
y <- (now + delay) % day {modulo remainder}

return startoftoday + x {in days} + y {in minutes} 
```

# .net - 如何使用 ADO.NET DataSet 和 DataAdapter 将树结构持久保存到具有自动递增 ID 的数据库表中

> ID：5263
> 
> 赞同：8
> 
> 时间：2008-08-07T20:23:51.057
> 
> 标签：.net, database, ado.net

我有一个表示树结构的自引用角色表

```
ID [INT] AUTO INCREMENT
Name [VARCHAR]
ParentID [INT] 
```

我正在使用 ADO.NET DataTable 和 DataAdapter 将值加载并保存到该表中。如果我只创建现有行的子级，则此方法有效。如果我创建一个子行，然后创建该子行的子行，然后更新，DataTable 生成的临时 ID 值将进入 ParentID 列。我有以下数据关系集：

```
dataset.Relations.Add(New DataRelation("RoleToRole",RoleTable.Columns("ID"), RoleTable.Columns("ParentID"))) 
```

当我在 DataTable 中创建新的子行时，我调用 SetParentRow 方法

```
newRow.SetParentRow(parentRow) 
```

当我在 DataAdapter 上调用 Update 时，是否需要做一些特别的事情才能使 ID 生成递归传播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-23T18:37:59.287

我不特别了解 ADO.net，但大多数 ORM 不会自动在关系中插入新记录的 ID。您将不得不诉诸两步过程：

1.  构建并保存父级
2.  建立和保存与父母的关系的孩子

这对 ORM 来说很困难的原因是因为您可能有循环依赖关系，并且它不知道首先需要为哪个对象创建 ID。一些 ORM 足够聪明，可以找出那些没有这种循环依赖关系的关系，但大多数都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T23:57:22.670

如果你去有什么不同吗

```
newRow.SetParentRow(parentRow, RoleTable.Relations("RoleToRole")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-01T11:29:58.610

我建议你添加一个 ForeignKeyConstraint，UpdateRule 设置为 Cascade。

# reporting-services - 如何在 MS Reporting Services 报告中动态居中图像？

> ID：5264
> 
> 赞同：17
> 
> 时间：2008-08-07T20:24:34.003
> 
> 标签：reporting-services

开箱即用，在 MS Reporting Services 中，当设计时尺寸未知时，图像元素不允许图像本身居中。换句话说，图像（如果小于设计表面上分配的尺寸）将锚定在左上角，而不是中心。

我的报告将在运行时知道图像的 URL，如果它小于我的设计器中指定的尺寸，我需要能够使该图像居中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-07T20:31:41.010

这是我能够做到这一点的方法。在[克里斯海斯的帮助下](https://docs.microsoft.com/en-us/archive/blogs/chrishays/centered-images)

将图像大小调整为报告中所需的大小，将 "Sizing" 属性更改为**"Clip"**。

使用表达式动态设置图像的左侧填充：

```
=CStr(Round((4.625-System.Drawing.Image.FromStream(System.Net.WebRequest.Create(Parameters!LogoURL.Value).GetResponse().GetResponseStream()).Width/96)/2,2)) & "in" 
```

使用表达式动态设置图像的顶部填充：

```
=CStr(Round((1.125-System.Drawing.Image.FromStream(System.Net.WebRequest.Create(Parameters!LogoURL.Value).GetResponse().GetResponseStream()).Height/96)/2,2)) & "in" 
```

对 Chris 的代码所做的第一个修改是在报告中换掉我的图像元素的尺寸（我的图像是**4.625x1.125** - 参见上面的数字）。

**我还选择从 URL**而不是**数据库**获取流。我使用了 WebRequest.Create.GetResponse。[GetResponseStream](http://msdn.microsoft.com/en-us/library/system.net.webresponse.getresponsestream.aspx)就是这样做的。

到目前为止一切顺利 - 我希望这会有所帮助！

# c# - C# 逻辑顺序和编译器行为

> ID：5269
> 
> 赞同：18
> 
> 时间：2008-08-07T20:30:00.683
> 
> 标签：c#, language-agnostic, compiler-construction, logic

在 C# 中（并且可以随意回答其他语言），运行时评估逻辑语句的顺序是什么？

例子：

```
DataTable myDt = new DataTable();
if (myDt != null && myDt.Rows.Count > 0)
{
    //do some stuff with myDt
} 
```

运行时首先评估哪个语句 -

```
myDt != null 
```

或者：

```
myDt.Rows.Count > 0 
```

?

有没有时候编译器会向后评估语句？也许当涉及“或”运算符时？

* * *

> & 被称为逻辑按位运算符，将始终评估所有子表达式

什么是何时使用按位运算符而不是“短路布尔值”的一个很好的例子？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-07T20:33:22.847

C#：从左到右，如果发现不匹配（评估为假），则处理停止。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-08T06:51:14.283

“C#：从左到右，如果找到匹配项（计算结果为真），则处理停止。”

僵尸羊错了，没有足够的代表来投票。

问题是关于 && 运算符，而不是 || 操作员。

如果发现 FALSE，则 && 评估将停止。

在 || 的情况下 如果找到 TRUE，则评估停止。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-07T22:23:56.057

我意识到这个问题已经得到解答，但我想再提供一些与该主题相关的信息。

在像 C++ 这样的语言中，您实际上可以重载 && 和 || 的行为。运营商，强烈建议您**不要这样做**。这是因为当您重载此行为时，您最终会强制对操作的双方进行评估。这做了两件事：

1.  它打破了惰性求值机制，因为重载是一个必须调用的函数，因此在调用函数之前对两个参数进行求值。
2.  不能保证所述参数的评估顺序，并且可以是特定于编译器的。因此，对象的行为方式与问题/先前答案中列出的示例中的行为方式不同。

有关更多信息，请阅读 Scott Meyers 的书，[更有效的 C++](https://rads.stackoverflow.com/amzn/click/com/020163371X)。干杯!

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-07T20:35:11.657

**VB.net**

```
if( x isNot Nothing AndAlso x.go()) then 
```

1.  从左到右进行评估
2.  **AndAlso**运算符确保只有当左侧为 TRUE 时，才会评估右侧（非常重要，因为 ifx 什么都不是 x.go 会崩溃）

您可以在 vb 中使用**And**而不是AndAlso。在这种情况下，左侧也会首先被评估，但无论结果如何，右侧都会被评估。

最佳实践：始终使用 AndAlso，除非您有充分的理由不这样做。

* * *

**有人在后续询问中为什么或何时会使用 And 而不是 AndAlso（或 & 而不是 &&）：** 这是一个示例：

```
if ( x.init() And y.init()) then
   x.process(y)
end 
y.doDance() 
```

在这种情况下，我想同时初始化 X 和 Y。必须初始化 Y 才能使 y.DoDance 能够执行。但是，在 init() 函数中，我还做了一些额外的事情，例如检查套接字是否打开，并且只有在这一切正常的情况下，对于**两者**，我都应该继续执行 x.process(y)。

同样，在 99% 的情况下，这可能不是必需的，也不优雅，这就是为什么我说默认应该使用*AndAlso*。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-07T21:58:21.723

@shsteimer

> 谦虚所指的概念是运算符重载。在语句中：...首先评估 A，如果评估为 false，则永远不会评估 B。这同样适用于

那不是运算符重载。运算符重载是为让您定义运算符的自定义行为而给出的术语，例如 *、+、= 等。

这将让您编写自己的“日志”类，然后执行

```
a = new Log(); // Log class overloads the + operator
a + "some string"; // Call the overloaded method - otherwise this wouldn't work because you can't normally add strings to objects. 
```

这样做

```
a() || b() // be never runs if a is true 
```

实际上叫做[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-07T20:45:43.273

ZombieSheep 死定了。唯一可能正在等待的“问题”是，只有在您使用 && 运算符时才会出现这种情况。使用 & 运算符时，每次都会计算两个表达式，无论一个或两个计算结果是否为 false。

```
if (amHungry & whiteCastleIsNearby)
{
   // The code will check if White Castle is nearby
   // even when I am not hungry
}

if (amHungry && whiteCastleIsNearby)
{
   // The code will only check if White Castle is nearby
   // when I am hungry
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-07T20:52:27.440

请注意，&& 和 & 在计算表达式的多少方面存在差异。

&& 被称为短路布尔 AND，并且正如其他人所指出的那样，如果在计算所有子表达式之前可以确定结果，它将提前停止。

& 被称为逻辑按位运算符，将始终评估所有子表达式。

像这样：

```
if (a() && b()) 
```

只有在*a*返回*true*时才会调用*b*。

 **但是，这：

```
if (a() & b()) 
```

将始终同时调用*a*和*b*，即使调用*a*的结果是假的，因此无论调用*b的结果如何都知道它是**假*的。

 *|| 也存在同样的差异。和 | 运营商。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-08-07T20:54:51.897

一些语言有一些有趣的情况，其中表达式以不同的顺序执行。我特别想到了 Ruby，但我确信他们是从其他地方（可能是 Perl）借来的。

逻辑中的表达式将保持从左到右，但例如：

```
puts message unless message.nil? 
```

以上将评估“message.nil？” 首先，如果它的计算结果为假（除非像 if 一样，除非它在条件为假而不是真时执行），“puts message”将执行，它将消息变量的内容打印到屏幕上。

有时这是一种构建代码的有趣方式......我个人喜欢将它用于像上面这样非常短的 1 行。

编辑：

为了更清楚一点，上面的内容与以下内容相同：

```
unless message.nil?
  puts message
end 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-07T20:31:32.973

左边的，如果它为空则停止。

编辑：在 vb.net 中，它将评估两者并可能引发错误，除非您使用 AndAlso

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-07T20:35:32.437

谦虚所指的概念是运算符重载。在声明中：

```
if( A && B){
    // do something
} 
```

首先评估 A，如果评估为 false，则永远不会评估 B。这同样适用于

```
if(A || B){
    //do something
} 
```

首先评估 A，如果评估为真，则永远不会评估 B。

这个概念，重载，适用于（我认为）所有的 C 风格语言，以及许多其他语言。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-07T21:00:27.473

不，至少 C# 编译器不能向后工作（在 && 或 || 中）。它从左到右。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-07T21:51:00.757

> 什么是何时使用按位运算符而不是“短路布尔值”的一个很好的例子？

假设您有标志，例如文件属性。假设您已将 READ 定义为 4，将 WRITE 定义为 2，并将 EXEC 定义为 1。在二进制中，即：

```
READ  0100  
WRITE 0010  
EXEC  0001 
```

每个标志都设置了一个位，并且每个标志都是唯一的。位运算符让您可以组合这些标志：

```
flags = READ & EXEC; // value of flags is 0101 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-07T22:02:36.583

当一切都在线时，它们从左到右执行。

当事物嵌套时，它们从内到外执行。这可能看起来令人困惑，因为通常“最里面”是在线的右侧，所以看起来它正在倒退......

例如

```
a = Foo( 5, GetSummary( "Orion", GetAddress("Orion") ) ); 
```

事情是这样发生的：

*   `GetAddress`用文字调用`"Orion"`
*   `GetSummary`用文字`"Orion"`和结果调用`GetAddress`
*   `Foo`用文字`5`和结果调用`GetSummary`
*   将此值分配给`a`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-07T22:33:16.833

我喜欢 Orion 的回答。我要补充两点：

1.  从左到右仍然首先适用
2.  从内到外确保在调用函数之前解析所有参数

假设我们有以下示例：

```
a = Foo(5, GetSummary("Orion", GetAddress("Orion")),
           GetSummary("Chris", GetAddress("Chris"))); 
```

以下是执行顺序：

1.  `GetAddress("Orion")`
2.  `GetSummary("Orion", ...)`
3.  `GetAddress("Chris")`
4.  `GetSummary("Chris", ...)`
5.  `Foo(...)`
6.  分配给`a`

我不能谈论 C# 的法律要求（尽管在写这篇文章之前我确实使用 Mono 测试了一个类似的示例），但这个顺序在 Java 中是有保证的。

只是为了完整性（因为这也是一个与语言无关的线程），有像 C 和 C++ 这样的语言，除非有序列点，否则不能保证顺序。参考[文献](http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.16)：[1、2](http://www.gotw.ca/gotw/056.htm)。然而，在回答线程的问题时，是C++ 中的序列点（除非重载；另请参阅 OJ 的出色答案）。所以一些例子：`&&``||`

*   `foo() && bar()`
*   `foo() & bar()`

在这种`&&`情况下，`foo()`保证在之前运行`bar()`（如果后者完全运行），因为`&&`它是一个序列点。在这种`&`情况下，没有这样的保证（在 C 和 C++ 中），并且确实`bar()`可以在之前运行`foo()`，反之亦然。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-08-07T20:34:11.800

我在某处听说编译器向后工作，但我不确定这是多么真实。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-08-07T22:01:24.493

当您特别想要评估所有子表达式时，您使用 & ，很可能是因为它们具有您想要的副作用，即使最终结果将是*错误*的，因此不会执行您的*then*部分*if*语句。

请注意 & 和 | 对位掩码和布尔值都起作用，而不仅仅是位操作。它们被*称为*按位，但它们是为 C# 中的整数和布尔数据类型定义的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-08-20T07:35:22.897

[@csmba](https://stackoverflow.com/questions/5269/c-logic-order-and-compiler-behavior#5278)：

> 有人在后续询问中为什么或何时会使用 And 而不是 AndAlso（或 & 而不是 &&）：这是一个示例：
> 
> ```
> if ( x.init() And y.init()) then
>    x.process(y)
> end 
> y.doDance() 
> ```
> 
> 在这种情况下，我想同时初始化 X 和 Y。必须初始化 Y 才能使 y.DoDance 能够执行。但是，在 init() 函数中，我还做了一些额外的事情，比如检查套接字是否打开，并且只有当这一切正常时，我才应该继续执行 x.process(y)。

我相信这相当令人困惑。尽管您的示例有效，但这不是使用的典型案例`And`（我可能会以不同的方式编写它以使其更清晰）。`And`（`&`在大多数其他语言中）实际上是按位与运算。您将使用它来计算位操作，例如删除标志位或屏蔽和测试标志：

```
Dim x As Formatting = Formatting.Bold Or Formatting.Italic
If (x And Formatting.Italic) = Formatting.Italic Then
    MsgBox("The text will be set in italic.")
End If 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2010-04-14T22:49:01.210

The D programming language Does do [left-to-right evaluation with short circuiting](http://www.digitalmars.com/d/1.0/expression.html#OrOrExpression) and [doesn't](http://www.digitalmars.com/d/1.0/operatoroverloading.html#Future) allow overloading of the [`&&` and '||'](https://stackoverflow.com/questions/5269/c-logic-order-and-compiler-behavior/5412#5412) operators.

# c# - 打印 Winform/视觉元素

> ID：5307
> 
> 赞同：12
> 
> 时间：2008-08-07T20:58:14.060
> 
> 标签：c#, winforms

我通过谷歌找到的所有文章要么已经过时，要么相互矛盾。

在 c# 中打印表单或丰富文本框的最简单方法是什么？我认为它`PrintDiaglog`通过设置来使用类`Document`，但是如何转换呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-07T21:09:17.423

至少在 VS 2008 中，它非常容易。阅读您的问题后，我花了大约几分钟来编写答案。这是我从那里借来的：

[http://msdn.microsoft.com/en-us/library/6he9hz8c.aspx](http://msdn.microsoft.com/en-us/library/6he9hz8c.aspx)

我对此进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-28T18:07:14.373

我认识的某个人创建了一个组件，该组件扩展了具有许多属性的控件，这些属性使您可以对表单的打印方式进行大量控制。值得一看。

[MCL PrintForm 帮助程序组件](http://www.xtremevbtalk.com/showthread.php?t=279707)

# css - Is there a business reason for striving for pure CSS layout?

> ID：5323
> 
> 赞同：30
> 
> 时间：2008-08-07T21:14:25.510
> 
> 标签：css

It seems like every time I try to create a pure CSS layout it takes me much longer than if I'd use a table or two. Getting three columns to be equal lengths with different amounts of data seems to require particular fancy hacks, especially when dealing with cross-browser issues.

My Question:

Who are these few tables going to hurt?

Tables seem to work particularly well on tabular data — why are they so reviled in this day and age?

Google.com has a table in its source code, so do many other sites (*stackoverflow.com does not by the way*).

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-16T18:31:32.843

由于这是堆栈**溢出**，我会给你我*的程序员的答案*

语义 101

先看看这段代码，想想这里出了什么问题……

```
class car {
    int wheels = 4;
    string engine;
}

car mybike = new car();
mybike.wheels = 2;
mybike.engine = null; 
```

当然，问题在于自行车不是汽车。汽车类是不适合自行车实例的类。代码没有错误，但语义不正确。它对程序员的反映很差。

语义 102

现在将其应用于文档标记。如果您的文档需要显示表格数据，那么适当的标签将是`<table>`. 但是，如果您将导航放置在表格中，那么您就误用了该`<table>`元素的预期用途。在第二种情况下，您没有呈现表格数据 - 您正在（错误）使用`<table>`元素来实现呈现目标。

结论

这伤害了谁？没有人。如果您使用语义标记，谁会受益？你——还有你的职业声誉。现在去做正确的事。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-08-07T21:20:11.270

Like a lot of things, it's a good idea that often gets carried too far. I like a div+css driven layout because it's usually quite easy to change the appearance, even drastically, just through the stylesheet. It's also nice to be friendly to lower-level browsers, screen readers, etc. But like most decisions in programming, the purpose of the site and the cost of development should be considered in making a decision. Neither side is the right way to go 100% of the time.

BTW, I think everyone agrees that tables *should* be used for tabular data.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-07T22:25:25.443

在现实世界中，您在不接触标记的情况下采用一种设计并完全重新设计它的机会非常渺茫。对于像 csszengarden 这样的博客和编造的演示来说这很好，但对于任何具有中等复杂设计的网站来说，这都是一个虚假的好处，真的。使用 CMS 更为重要。

DIV 加上 CSS != 语义，或者。好的 HTML 对于 SEO 和可访问性总是非常值得的，无论是表格还是 CSS 用于布局。通过将非常简单的表格与一些优秀的 CSS 相结合，您可以获得非常高效、快速的网页设计。

表格布局比 CSS 布局更易于访问，反之亦然 - 它完全取决于内容的源顺序，并且仅仅因为您避免使用表格并不意味着使用屏幕阅读器的用户会自动在您的网站上玩得开心. 布局表与屏幕阅读器访问无关，只要内容在线性化时有意义，就像你做 CSS 布局一样。数据表不同；它们真的很难正确标记，即使这样，屏幕阅读器软件的用户通常也不知道他们需要使用哪些命令来理解数据。

与其为使用几个布局表而苦恼，不如担心标题标签和替代文本的使用是否正确，以及表单标签是否正确分配。然后，您将对现实世界的可访问性有很好的了解。

这来自几年运行网络可访问性用户测试的经验，专门从事可访问性网站设计，以及为在线银行 Cahoot 提供了一年关于此主题的咨询。

所以我对海报的回答是否定的，没有商业理由更喜欢 CSS 而不是表格。它更优雅、更令人满意、更正确，但你作为构建它的人和在你之后必须维护它的人是世界上唯一的两个人，无论是 CSS 还是表格，都给了老鼠的屁股。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-08-07T21:18:49.977

I'm of the thought that CSS layout with as few tables as possible is cleaner and better, but I agree that sometimes you just gotta use a table.

Business-wise, it's generally "what's going to get it done the fastest and most reliable way." In my experience, using a few tables generally falls into that category.

I have found that a very effective way to mitigate cross-browser differences in CSS rendering is to use the "strict" doctype at the top of your page:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

Also, for the dreaded IE6 CSS issues, you can use this hack:

```
.someClass {
    background-color:black; /*this is for most browsers*/
    _background-color:white; /*this is for IE6 only - all others will ignore it*/
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-08-07T21:26:41.553

Using semantic HTML design is one of those things where you don't know what you're missing unless you make a practice of it. I've worked on several sites where the site was restyled after the fact with little or no impact to the server-side code.

Restyling sites is a very common request, something that I've noticed more now that I'm able to say "yes" to instead of try to talk my way out of.

And, once you've learned to work with the page layout system, it's usually no harder than table based layout.

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-10-16T13:16:56.920

我们将网页更改为基于 DIV/CSS 的布局的主要原因是渲染基于表格的页面的延迟。

我们有一个公共网站，它的大部分用户群位于印度等国家，那里的互联网带宽仍然是一个问题（它每天都在改善，但仍然没有达到同等水平）。在这种情况下，当我们使用基于表格的布局时，用户不得不长时间盯着空白页。然后整个页面将在一个勾号中作为一个整体显示。通过将我们的页面转换为 DIV，我们设法在用户进入我们的网站时几乎立即将一些内容带到浏览器，并且这些内容足以让用户参与，直到浏览器下载页面的全部内容。

基于表格的实现的主要缺陷是，浏览器只有在下载该表格的整个 html 后才会显示表格的内容。当我们有一个包含整个页面内容的主表，并且当我们有很多嵌套表时，这个问题就会爆发。对于“灵活表格”（没有任何固定宽度的表格），在下载整个表格标签后，浏览器必须解析到表格的最后一行以找出每列的宽度，然后必须再次解析以显示内容. 直到所有这些发生，用户必须盯着一个空白屏幕，然后一切都会在一瞬间出现在屏幕上。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-08-07T23:22:57.527

如果您有一个面向公众的网站，那么真正的商业案例就是 SEO。

可访问性很重要，维护语义 (X)HTML**比**维护表格布局要容易得多，但在 Google 上排名第一的位置将把培根带回家。

例如： [月度网络报告：7 月份的页面浏览量为 1.27 亿次](http://latimesblogs.latimes.com/readers/2008/08/colleagues-we-c.html)

> 月度网络报告：7 月份的页面浏览量为 1.27 亿次
> 
> ...
> 
> Latimes.com 在 SEO（搜索引擎优化）方面不断进步，这意味着我们的故事在 Google 和其他搜索引擎中的排名更高。我们在 Digg.com 等网站上的表现也更好。所有这些都比以往任何时候都增加了更多的曝光率和更多的读者群。

如果您查看他们的网站，他们的 CSS 布局相当不错。

通常，您发现这些天在 SERP 中表现良好的表格布局相对较少。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-08-07T21:25:07.860

Keep your layout and your content separate allows you to redesign or make tweaks and changes to your site easily. It may take a bit longer up front, but **the longest phase of software development is maintenance**. A css friendly site with clear separation between content and design is best over the course of maintenance.

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-08-07T22:16:25.337

以我的经验，唯一真正增加业务价值的时候是需要 100% 支持可访问性。当您的用户有视力障碍和/或使用屏幕阅读器查看您的网站时，您需要确保您的网站符合无障碍标准。

~~使用屏幕阅读器的用户倾向于拥有自己的高对比度、大字体样式表（如果您的网站自己不提供），这使得屏幕阅读器可以轻松解析页面。~~

~~当屏幕阅读器阅读页面并看到一张表格时，它会告诉用户这是一张表格。因此，如果您使用表格进行布局，它会变得非常混乱，因为用户不知道表格的内容实际上是文章而不是其他一些表格数据。~~菜单应该是一个列表或 div 集合，而不是带有菜单项的表格，这同样令人困惑。您应该确保使用块引用、alt-tags 标题属性等以使其更具可读性。

如果你的设计是由 CSS 驱动的，那么你的整个外观和感觉都可以被剥离并替换为对这些用户来说非常易读的原始视图。如果您有内联样式、基于表格的布局等，那么您会让这些用户更难解析您的内容。

虽然我确实觉得当您的网站完全使用 CSS 进行布局时，*某些*事情的维护会变得更容易，但我认为并非所有类型的维护都是如此——尤其是当您处理跨浏览器 CSS 时，显然是一场噩梦。

简而言之，如果您希望所述用户可以访问您的页面，则应以符合标准的方式描述其构成。如果您没有需要/要求并且将来可能不需要它，那么不要浪费太多时间尝试成为 CSS 纯粹主义者 :) 使用适合您的样式和布局技术的组合并让您的工作更轻松。

干杯!

[编辑-在此答案的错误或误导部分添加删除线-见评论]

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-08-07T22:29:08.480

我刚刚记得的另一件事是，您可以为页面分配不同的样式表以进行打印和显示。

除了正常的样式表定义之外，您还可以添加以下标签

```
<link rel="stylesheet" type="text/css" media="print" href="PrintStyle.css" /> 
```

当您将文档发送到打印机时，它将根据该样式呈现文档。这允许您去除背景图像、额外的页眉/页脚信息，并且只打印原始信息，而无需创建单独的模块。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-08-07T22:31:17.337

> > 仅通过更新 1 个文件来对 15 页的网站进行全面改造就是天堂。

这是真实的。不幸的是，让 15,000 个复杂且差异很大的页面使用一个 CSS 文件是您最糟糕的噩梦。改变一些东西——它打破了一千页吗？谁知道？

对于像我们这样的大型网站，CSS 是一把双刃剑。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-07T21:23:55.663

The *idea* is that Designers can Design and Web Developers can implement. This is especially the case in dynamic web applications where you do not want your Designers to mess around in your Source Code.

Now, while there are templating engines, Designers apparantly just love to go crazy and CSS allows to pull a lot more stunts than tables.

That being said: As a developer, i abandoned CSS Layout mostly because my Design sucks anyway, so at least it can suck properly :-) But if I would ever hire a Designer, I would let him use whatever his WYSIWYG Editor spits out.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-07T21:22:25.307

Business reason for CSS layout: You can blow away the customers by saying "our portal is totally customizable/skinnable without writing code!"

Then again, I don't see any evil in designing block elements with tables. By block elements I mean where it doesn't make any sense to break apart the said element in different designs.

So, tabular data would best be presented with tables, of course. Designing major building blocks (such as a menu bar, news ticker, etc.) within their own tables should be OK as well. Just don't rely on tables for the overall page layout and you'll be fine, methinks.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-08T01:09:44.100

> *我会让他使用他的 WYSIWYG 编辑器吐出的任何东西，
> 我只是吐了一点...
> *啊，你好？你不认为平面设计师是手工编写 CSS 的吗？

有趣的是，我曾与几位设计师合作过，其中最好的设计师***会***手动调整他们的 CSS。我想到的那个人实际上将他所有的设计工作都作为一个带有几个 CSS 文件的 XHTML 文件完成，并根据需要动态创建图形元素。他使用 Dreamweaver，但实际上只是作为一种导航工具。（我从那个人身上学到了很多）

一旦你投资学习纯粹基于 CSS 的设计并且有一点经验（发现 IE 糟糕的地方[公平地说它变得更好]），我发现它最终会更快。我从事内容管理系统的工作，应用程序很少需要更改，设计师就可以设计出完全不同的外观。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-16T12:20:16.990

除了易于更新和合规...

我曾经设计所有基于表格的网站，起初我很抗拒，但我逐渐转向 CSS。它不是一夜之间发生的，但它发生了，这也是你应该做的事情。

有几个晚上我想把我的电脑扔到窗外，因为我应用到 div 的样式没有做我想要的，但你从这些障碍中学习。

对于企业来说，一旦你通过 CSS 设计网站成为一门科学，你可以为每个网站开发流程，甚至可以使用过去的网站，只需添加不同的标题图形、颜色等。

此外，请务必嵌入/包含您网站的所有可重用部分：页眉、子页眉、页脚。

一旦你越过驼峰，一切都会从那里下山。祝你好运！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-27T12:34:41.853

肯定有。如果你还在为它而努力，那你就没有做对。

DIV+CSS 布局在可维护性和生产力方面实际上比表格布局要容易得多。继续练习，以免为时过早。

表格布局也很好，它只是不适合布局，并且在进行微调时具有特殊的缺点。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-08-07T21:39:06.740

:: nods at palmsey and Jon Galloway ::

I agree with the maintainability factor. It does take me a bit longer to get my initial layouts done (since I'm still a jedi apprentice in the CSS arts) but doing a complete revamp of a 15 page web site just by updating 1 file is heaven.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-08-07T22:09:54.400

Some additional reasons why this is good practice:

*   Accessibility - the web should ideally be accessible by all
*   Performance - save bandwidth and load faster on mobile devices (these lack bandwidth to some degree and cannot layout complex tables quickly). Besides loading fast is always a good thing...

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-08-07T22:28:52.363

> > 当屏幕阅读器阅读页面并看到一张表格时，它会告诉用户这是一张表格。因此，如果您使用表格进行布局，它会变得非常混乱，因为用户不知道表格的内容实际上是文章而不是其他一些表格数据

这实际上是不正确的；JAWS、Window Eyes 和 HAL 等屏幕阅读器会忽略布局表。他们在处理真实的网络方面工作得非常好。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-08-08T00:25:46.763

我认为根本没有商业原因。技术原因，也许，即便如此，勉强 - 这是一个巨大的世界范围内的时间，然后你在 IE 中查看它并崩溃并哭泣。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-16T01:39:44.753

我实际上可以在用户页面上看到 Stack Overflow 中的表格。

它甚至有大量的内联样式......

# java - 为什么我不能在我的 super() 调用周围使用 try 块？

> ID：5328
> 
> 赞同：48
> 
> 时间：2008-08-07T21:17:56.813
> 
> 标签：java, exception, mocking, try-catch

因此，在 Java 中，构造函数的第一行必须是对 super 的调用……无论是隐式调用 super()，还是显式调用另一个构造函数。我想知道的是，为什么我不能在它周围放一个 try 块？

我的具体情况是我有一个模拟类进行测试。没有默认构造函数，但我想要一个使测试更易于阅读。我还想将从构造函数抛出的异常包装到 RuntimeException 中。

所以，我想要做的实际上是这样的：

```
public class MyClassMock extends MyClass {
    public MyClassMock() {
        try {
            super(0);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    // Mocked methods
} 
```

但是 Java 抱怨说 super 不是第一个声明。

我的解决方法：

```
public class MyClassMock extends MyClass {
    public static MyClassMock construct() {
        try {
            return new MyClassMock();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    public MyClassMock() throws Exception {
        super(0);
    }

    // Mocked methods
} 
```

这是最好的解决方法吗？为什么Java不让我做前者？

* * *

对于“为什么”，我最好的猜测是 Java 不希望我的构造对象处于可能不一致的状态……但是，在进行模拟时，我不在乎。看来我应该能够做到以上...或者至少我知道以上对于我的情况是安全的...或者似乎无论如何都应该这样做。

我正在覆盖我在测试类中使用的任何方法，因此我没有使用未初始化变量的风险。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-07T21:32:34.367

不幸的是，编译器无法按照理论原则工作，即使您可能知道它在您的情况下是安全的，但如果他们允许，它必须对所有情况都是安全的。

换句话说，编译器不仅会阻止你，它还会阻止所有人，包括所有不知道它不安全且需要特殊处理的人。这可能还有其他原因，因为如果一个人知道如何处理它们，所有语言通常都有办法做*不安全的事情。*

在 C# .NET 中也有类似的规定，声明一个调用基本构造函数的构造函数的唯一方法是：

```
public ClassName(...) : base(...) 
```

这样做时，基本构造函数将在构造函数的主体之前被调用，并且您无法更改此顺序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T20:55:01.563

`SecurityManager`这样做是为了防止有人从不受信任的代码中创建新对象。

```
public class Evil : SecurityManager {
  Evil()
  {
      try {
         super();
      } catch { Throwable t }
      {
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-21T17:09:23.910

我知道这是一个老问题，但我喜欢它，因此，我决定给它一个我自己的答案。也许我对为什么不能这样做的理解将有助于讨论和您有趣问题的未来读者。

让我从一个对象构造失败的例子开始。

让我们定义一个类 A，这样：

```
class A {
   private String a = "A";

   public A() throws Exception {
        throw new Exception();
   }
} 
```

现在，假设我们想在一个`try...catch`块中创建一个 A 类型的对象。

```
A a = null;
try{
  a = new A();
}catch(Exception e) {
  //...
}
System.out.println(a); 
```

显然，此代码的输出将是：`null`.

为什么 Java 不返回部分构造的`A`? 毕竟，到构造函数失败的时候，对象的`name`字段已经被初始化了，对吧？

好吧，Java 不能返回部分构造的版本，`A`因为对象没有成功构建。该对象处于不一致状态，因此被 Java 丢弃。您的变量 A 甚至没有初始化，它保持为空。

现在，如您所知，要完全构建一个新对象，必须首先初始化它的所有超类。如果其中一个超类未能执行，该对象的最终状态是什么？这是不可能确定的。

看看这个更详细的例子

```
class A {
   private final int a;
   public A() throws Exception { 
      a = 10;
   }
}

class B extends A {
   private final int b;
   public B() throws Exception {
       methodThatThrowsException(); 
       b = 20;
   }
}

class C extends B {
   public C() throws Exception { super(); }
} 
```

当`C`调用 的构造函数时，如果初始化时发生异常`B`，最终`int`变量的值是`b`多少？

因此，无法创建对象 C，它是伪造的，是垃圾，它没有完全初始化。

对我来说，这解释了为什么你的代码是非法的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T21:41:59.917

我不知道Java是如何在内部实现的，但是如果超类的构造函数抛出异常，那么就没有你扩展的类的实例。例如，不可能调用`toString()`or`equals()`方法，因为它们在大多数情况下都是继承的。

Java 可能允许在构造函数中对 super() 调用进行 try/catch，如果 1\. 您覆盖超类中的所有方法，并且 2\. 您不使用 super.XXX() 子句，但这一切听起来都太复杂了我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T21:43:37.463

我不能假设对 Java 内部有深入的了解，但我的理解是，当编译器需要实例化派生类时，它必须首先创建基类（及其之前的基类（...））然后拍打子类中的扩展。

因此，甚至没有未初始化的变量或类似的东西的危险。当您尝试在基类的**构造函数***之前*在子类的构造函数中执行某些操作时，您基本上是在要求编译器扩展一个尚不存在的基对象实例。

 **编辑：在您的情况下，**MyClass**成为基础对象，而**MyClassMock**是子类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-17T15:53:27.537

我知道这个问题有很多答案，但我想谈谈为什么不允许这样做，特别是回答为什么 Java 不允许你这样做。所以给你...

现在，请记住，`super()`必须在子类的构造函数中的任何其他内容之前调用它，因此，如果您确实在调用周围使用`try`和块，则块必须如下所示：`catch``super()`

```
try {
   super();
   ...
} catch (Exception e) {
   super(); //This line will throw the same error...
   ...
} 
```

如果`super()`在块中失败`try`，它必须在块中首先执行`catch`，以便`super`在子类构造函数中的任何内容之前运行。这给您留下了与开始时相同的问题：如果抛出异常，则不会被捕获。（在这种情况下，它只是在 catch 块中再次被抛出。）

现在，Java 也不允许使用上述代码。这段代码可能会执行第一次超级调用的一半，然后再次调用它，这可能会导致某些超级类出现一些问题。

现在，Java 不允许您抛出异常*而不是*调用`super()`的原因是因为异常可能在其他地方被捕获，并且程序将继续**而不调用`super()`您的子类对象，**并且可能是因为异常可能会将您的对象作为参数并尝试更改尚未初始化的继承实例变量的值。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-28T19:35:33.583

解决它的一种方法是调用私有静态函数。然后可以将 try-catch 放置在函数体中。

```
public class Test  {
  public Test()  {
     this(Test.getObjectThatMightThrowException());
  }
  public Test(Object o)  {
     //...
  }
  private static final Object getObjectThatMightThrowException()  {
     try  {
        return  new ObjectThatMightThrowAnException();
     }  catch(RuntimeException rtx)  {
        throw  new RuntimeException("It threw an exception!!!", rtx);
     }
  }
} 
```

# tfs - MSF for CMMI 中的错误和更改请求之间有什么区别？

> ID：5329
> 
> 赞同：11
> 
> 时间：2008-08-07T21:17:58.170
> 
> 标签：tfs, workflow, lifecycle, cmmi, ms-solution-framework

我目前正在评估**TFS**`MSF for CMMI`下的流程模板以供我的开发团队使用，但我无法理解对单独的错误和更改请求工作项类型的需求。

 **我知道在生成报告时能够区分错误（错误）和变更请求（变更需求）是有益的。

然而，在我们当前的系统中，我们只有单一类型的变更请求，并且只使用一个字段来指示它是否是错误、需求变更等（该字段可用于构建报告查询）。

为错误设置单独的工作流程有什么好处？

我还对开发人员可以针对错误**或**更改请求提交工作这一事实感到困惑，我认为预期的工作流程是让错误生成更改请求，这是开发人员在进行更改时引用的内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-07T22:17:29.877

@卢克

我不同意你的观点，但这种差异通常是解释为什么有两种不同的过程可用于处理这两种类型的问题。

我想说的是，如果主页的颜色最初设计为红色，但由于某种原因它是蓝色的，那么这很容易快速修复，并且不需要很多人或工时来进行更改。只需签出文件，更改颜色，重新签入并更新错误。

但是，如果主页的颜色被设计成红色，而且是红色，但有人认为它必须是蓝色的，那对我来说无论如何都是一种不同的变化。例如，是否有人考虑过这可能对页面的其他部分产生的影响，例如覆盖蓝色背景的图像和徽标？会不会有看起来很糟糕的事物的边界？链接下划线是蓝色的，会显示吗？

举个例子，我是红/绿盲，改变某物的颜色对我来说，不是我掉以轻心的事情。网络上有足够多的网页给我带来问题。只是要指出，如果你考虑一切，即使是最微不足道的变化也可能是不平凡的。

实际的最终实现更改可能大致相同，但对我来说，更改请求**是**另一回事，正是因为需要更多地考虑它以确保它能够按预期工作。

然而，一个错误是有人说**这就是我们要这样做的方式**，然后有人以不同的方式做。

更改请求更像是，**但我们还需要考虑其他事情......嗯**......。

当然也有例外，但让我把你的例子分开。

如果服务器被*设计*为处理超过 300,000,000,000 次浏览量，那么是的，这是一个错误，它没有。但是设计一个服务器来处理这么多的浏览量不仅仅是说*我们的服务器应该处理 300,000,000,000 次浏览量*，它应该包含一个**非常**详细的规范，说明它如何做到这一点，一直到处理时间保证和磁盘访问平均时间。如果代码完全按照设计实现，并且无法按预期执行，那么问题就变成了：*我们是设计不正确还是实现不正确？*.

我同意在这种情况下，是否将其视为设计缺陷或实施缺陷取决于它未能达到预期的实际原因。例如，如果有人假设磁盘的速度是实际速度的 100 倍，而这被认为是服务器无法按预期运行的原因，我会说这是一个设计错误，有人需要重新设计. 如果仍然要保持这么多页面浏览量的原始要求，则可能必须进行具有更多内存数据和类似数据的重大重新设计。

但是，如果有人刚刚没有考虑到 RAID 磁盘的操作方式以及如何正确地从条带化媒体中受益，那么这就是一个错误，可能不需要进行那么大的更改来修复。

同样，当然会有例外。

无论如何，我所说的原始差异是我发现在大多数情况下是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-07T13:36:55.733

请记住，TFS 的工作项类型定义的一部分是它的“工作流”的定义，这意味着工作项可以处于的状态以及状态之间的转换。这可以通过安全角色来保护。

所以 - 一般而言 - “变更请求”将由组织中相对较高的人（具有与花费资源对系统进行（可能非常大的）变更相关的“赞助”权利的人）发起和批准。最终这人将是批准更改已成功进行的人。

然而，对于“Bug”，应用程序的任何用户都应该能够发起 Bug。

在我实施 TFS 的组织中，只有部门负责人可以成为“变更请求”的发起者 - 但“错误”是从“帮助台”工单创建的（不是自动化的，只是通过流程......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T21:54:48.470

通常，虽然我不能代表 CMM，但更改请求和错误的处理和考虑方式不同，因为它们通常涉及应用程序生命周期的不同部分。

错误是您的程序实现中的缺陷。例如，如果您将程序设计为能够将两个数字相加并为用户提供总和，那么缺陷将是它不能正确处理负数，从而产生错误。

更改请求是指您有设计缺陷。例如，您可能已经明确表示您的程序不应该处理负数。然后提交更改请求以重新设计并重新实现该部分。设计缺陷可能不是故意的，但很可能是因为您在最初设计程序时没有考虑该部分，或者在创建原始设计时不存在的新案例已被发明或发现自从。

换句话说，程序可能完全按照设计运行，但需要更改。这是一个变更请求。

* * *

通常，修复错误被认为比执行更改请求便宜得多，因为错误从未打算成为您程序的一部分。然而，设计是。

因此，可能需要不同的工作流程来处理这两种不同的场景。例如，您确认和提交错误的方式可能与变更请求不同，这可能需要更多的工作来说明变更的后果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T21:21:11.097

错误是已被批准实施的需求中出现的问题。

变更请求需要经历一个周期，在这个周期中，必须估计该变更的影响和工作量，然后必须批准实施，然后才能开始工作。

两者在 CMM 下有着根本的不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T21:26:59.477

我的假设是否不正确，那么应该从错误中生成更改请求？我很困惑，因为我不认为所有的错误都应该被自动批准实施——它们可能是微不足道的，至少在我们的例子中，在分配给开发人员之前，它们会经历与变更请求相同的审查过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-10T21:07:21.777

实施总是来自需求。它可能来自产品经理，也可能来自你们中的一些人的随机想法。它可能被记录在案，它可能来自一些对话。归根结底，即使是简单的事情`a := a + 1`，“真正的”实现也将基于编译器、链接器、CPU 等，这取决于现实生活中的物理定律。

错误是针对原始要求实施的。除此之外，这是一个变更请求。

如果需求改变了，实现也需要改变，那就是变更请求。

如果依赖项已更改，例如 Web 浏览器停止支持某些标签并且您需要进行一些更改，则这是一个更改请求。

实际上，任何未正确记录的内容都应视为变更请求。产品经理忘记在故事中添加内容？抱歉，这是更改请求。

所有变更请求都应该被正确估计和指出。开发人员因提出变更请求而获得报酬，而不是因制造错误和修复他们提出的问题而获得报酬。

# membership - Memcached 块限制

> ID：5349
> 
> 赞同：8
> 
> 时间：2008-08-07T21:31:59.187
> 
> 标签：membership

[为什么memcached](http://memcached.org/)中有硬编码的块限制（压缩后 0.5 兆）？有没有人重新编译他们的？我知道我不应该发送这样的大块，但是这些额外的大块不时发生在我身上并造成严重破坏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-08T17:37:02.743

这个问题以前在[官方FAQ里](http://code.google.com/p/memcached/wiki/FAQ)

[我可能会遇到的 memcached 有哪些限制？（回程机）](http://web.archive.org/web/20080927061146/http://code.google.com/p/memcached/wiki/FAQ)

去引用：

> 您可能会在 memcache 中看到的简单限制是键和项目大小限制。密钥限制为 250 个字符。存储数据的大小不能超过 1 兆字节，因为这是最大的典型平板大小。”

常见问题解答现已修订，现在有两个单独的问题涉及此问题：

[最大密钥长度是多少？（250 字节）](http://code.google.com/p/memcached/wiki/FAQ#What_is_the_maxiumum_key_length?_%28250_bytes%29)

> 密钥的最大长度为 250 个字符。请注意，如果您使用客户端“前缀”或类似功能，此值会更小，因为前缀被添加到原始键的前面。较短的密钥通常更好，因为它们可以节省内存并使用更少的带宽。

[为什么项目的大小限制为 1 兆字节？](http://code.google.com/p/memcached/wiki/FAQ#Why_are_items_limited_to_1_megabyte_in_size?)

> 啊，这是一个流行的问题！
> 
> 简短的回答：因为内存分配器的算法是如何工作的。
> 
> 长答案：Memcached 的内存存储引擎（将来可插入/调整......），使用平板方法进行内存管理。内存被分成不同大小的块，从最小数量开始，然后按阶乘上升到最大可能值。
> 
> 假设最小值为 400 字节，最大值为 1 兆字节，阶乘为 1.20：
> 
> 平板 1 - 400 字节 平板 2 - 480 字节 平板 3 - 576 字节 ... 等等。
> 
> 板坯越大，它与前一块板坯之间的间隙就越大。所以最大值越大，内存存储的效率就越低。Memcached 还必须为每个存在的slab 预先分配一些内存，因此设置一个较小的阶乘和较大的最大值将需要更多的开销。
> 
> 您不想这样做还有其他原因......如果我们谈论的是网页并且您试图存储/加载那么大的值，那么您可能做错了什么。在那个大小下，将数据结构加载和解压缩到内存中需要相当长的时间，并且您的站点可能不会表现得很好。
> 
> 如果你确实想存储大于 1MB 的项目，你可以使用编辑过的`slabs.c:POWER_BLOCK`值重新编译 memcached，或者使用低效的 malloc/free 后端。其他建议包括数据库、MogileFS 等。

# xslt - 尝试选择节点时如何在 xsl 中使用变量？

> ID：5374
> 
> 赞同：16
> 
> 时间：2008-08-07T21:53:58.440
> 
> 标签：xslt

我原以为这对谷歌来说很容易，但我没有成功。

我想为一个变量分配一个属性的值（到目前为止很容易），然后使用该变量根据该属性的值选择另一个节点。

例子：

```
<xsl:variable name="myId" select="@id" />
<xsl value-of select="//Root/Some/Other/Path/Where[@id='{@myId}']/@Name /> 
```

那是行不通的。如果我将 {@myId} 替换为变量中的值，那么它确实找到了正确的节点，但这样做不会产生任何结果。我确定我错过了一些东西，或者也许有不同的方法可以做到这一点。

上下文是不同的顶级节点下有相关数据共享相同的 id 值，所以我需要在我的模板中获取相关节点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-07T23:16:07.947

好的，我终于想通了。真是愚蠢的问题，我只需要省略引号和大括号。有一次我*以为*我已经尝试过了。:D 哦，我在第一个例子中打错了@myId，代码实际上是$myId。

```
<xsl:variable name="myId" select="@id" />
<xsl value-of select="//Root/Some/Other/Path/Where[@id=$myId]/@Name" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-19T15:19:25.887

您似乎对变量（只是 $variable）和属性值模板的使用感到困惑，它们允许您将任何 XPath 表达式放在某些属性中，例如

```
<newElement Id="{@Id}"/> 
```

它们显然可以组合，因此您可以在属性值模板中包含一个变量，例如：

```
<newElement Id="{$myId}"/> 
```

# sql-server - Web 服务器上的 SQL Server 2008 FileStream

> ID：5396
> 
> 赞同：8
> 
> 时间：2008-08-07T22:10:05.663
> 
> 标签：sql-server, sql-server-2008, iis

我一直在使用 ASP.NET MVC 开发一个站点，并决定使用新的 SQL Server 2008`FILESTREAM`工具将文件存储在数据库中，而不是作为单独的实体。虽然最初在 VS2008 中工作（使用与数据库的可信连接），但一切都很好而且很花哨。但是，当我将站点转移到 IIS7 并切换到数据库上的 SQL 身份验证时，问题就出现了。

似乎流式 a`FILESTREAM`不适用于 SQL 身份验证，仅适用于 Windows 身份验证。鉴于此，最佳实践是什么？

1.  有没有办法强制这种事情在 SQL 身份验证下工作？
2.  我应该添加`NETWORK SERVICE`为数据库用户，然后使用受信任的身份验证吗？
3.  我应该创建另一个用户，并在此运行 IIS 站点和数据库连接吗？
4.  还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T23:36:46.673

看看[这篇文章](http://www.sql-server-performance.com/articles/dba/Configure_Filestream_in_SQL_Server_2008_p1.aspx)。我不太了解 FileStreaming 和安全性，但 FileStreaming 设置中有几个有趣的选项，例如允许远程连接和允许远程客户端访问 FileStreaming

# python - 将字节转换为浮点数？

> ID：5415
> 
> 赞同：83
> 
> 时间：2008-08-07T22:24:27.740
> 
> 标签：python, floating-point

我有一个必须解析的二进制文件，我正在使用 Python。有没有办法获取 4 个字节并将其转换为单精度浮点数？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2008-09-16T14:59:37.253

```
>>> import struct
>>> struct.pack('f', 3.141592654)
b'\xdb\x0fI@'
>>> struct.unpack('f', b'\xdb\x0fI@')
(3.1415927410125732,)
>>> struct.pack('4f', 1.0, 2.0, 3.0, 4.0)
'\x00\x00\x80?\x00\x00\x00@\x00\x00@@\x00\x00\x80@' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-01-13T12:22:23.890

只是一点点补充，如果您想要一个浮点数作为 unpack 方法的输出而不是元组，只需编写

```
>>> [x] = struct.unpack('f', b'\xdb\x0fI@')
>>> x
3.1415927410125732 
```

如果你有更多的花车然后写

```
>>> [x,y] = struct.unpack('ff', b'\xdb\x0fI@\x0b\x01I4')
>>> x
3.1415927410125732
>>> y
1.8719963179592014e-07
>>> 
```

# python - Python、Unicode 和 Windows 控制台

> ID：5419
> 
> 赞同：164
> 
> 时间：2008-08-07T22:26:58.063
> 
> 标签：python, unicode

当我尝试在 Windows 控制台中打印 Unicode 字符串时，出现错误。

`UnicodeEncodeError: 'charmap' codec can't encode character ....`

我认为这是因为 Windows 控制台不接受纯 Unicode 字符。解决这个问题的最佳方法是什么？有什么办法可以让 Python`?`在这种情况下自动打印 a 而不是失败？

**编辑：** 我使用的是 Python 2.5。

* * *

**注意：** @LasseV.Karlsen 带有复选标记的答案有点过时（从 2008 年开始）。请谨慎使用下面的解决方案/答案/建议！！

从今天（2016 年 1 月 6 日）起，[@JFSebastian 的回答更加相关。](https://stackoverflow.com/a/32176732/610569)

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2015-08-24T07:35:32.270

**更新：** [Python 3.6](https://docs.python.org/3.6/whatsnew/3.6.html#pep-528-change-windows-console-encoding-to-utf-8)实现[PEP 528：将 Windows 控制台编码更改为 UTF-8](https://www.python.org/dev/peps/pep-0528/)：*Windows 上的默认控制台现在将接受所有 Unicode 字符。*[在内部，它使用与下面提到](https://github.com/Drekin/win-unicode-console)[的`win-unicode-console`](https://github.com/Drekin/win-unicode-console)包相同的 Unicode API 。`print(unicode_string)`现在应该可以工作了。

* * *

> 我得到一个`UnicodeEncodeError: 'charmap' codec can't encode character...` 错误。

该错误意味着您尝试打印的 Unicode 字符无法使用当前 ( `chcp`) 控制台字符编码来表示。代码页通常是 8 位编码，例如`cp437`只能表示 ~1M Unicode 字符中的 ~0x100 个字符：

```
>>> u"\N{EURO SIGN}".encode('cp437')
回溯（最近一次通话最后）：
...
UnicodeEncodeError：“charmap”编解码器无法在位置 0 编码字符“\u20ac”：
字符映射到
```

> 我认为这是因为 Windows 控制台不接受纯 Unicode 字符。解决这个问题的最佳方法是什么？

**Windows 控制台确实接受 Unicode 字符，如果配置了相应的字体**，它甚至可以显示它们（仅限 BMP）。`WriteConsoleW()`API 应按照[@Daira Hopwood 的回答](https://stackoverflow.com/a/4637795/4279)中的建议使用。[`win-unicode-console`它可以被透明地调用，即，如果你使用package](https://github.com/Drekin/win-unicode-console)，你不需要也不应该修改你的脚本：

```
T:\> py -m pip install win-unicode-console
T:\> py -m run your_script.py 
```

请参阅[Python 3.4、Unicode、不同语言和 Windows 有什么区别？](https://stackoverflow.com/a/30551552/4279)

> 有什么办法可以让 Python`?`在这种情况下自动打印 a 而不是失败？

如果在您的情况下替换所有不可编码的字符就足够了，`?`那么您可以设置[`PYTHONIOENCODING`envvar](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONIOENCODING)：

```
T:\> set PYTHONIOENCODING=:replace
T:\> python3 -c "print(u'[\N{EURO SIGN}]')"
[?] 
```

在 Python 3.6+ 中，除非envvar 设置为非空字符串，`PYTHONIOENCODING`否则交互式控制台缓冲区会忽略 envvar指定的编码。`PYTHONLEGACYWINDOWSIOENCODING`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-08-07T22:32:23.510

**注意：**这个答案有点过时（从 2008 年开始）。请谨慎使用以下解决方案！

* * *

这是一个详细说明问题和解决方案的页面（在页面中搜索文本*Wrapping sys.stdout into an instance*）：

[打印失败 - Python Wiki](http://wiki.python.org/moin/PrintFails)

这是该页面的代码摘录：

```
$ python -c 'import sys, codecs, locale; print sys.stdout.encoding; \
    sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout); \
    line = u"\u0411\n"; print type(line), len(line); \
    sys.stdout.write(line); print line'
  UTF-8
  <type 'unicode'> 2
  Б
  Б

  $ python -c 'import sys, codecs, locale; print sys.stdout.encoding; \
    sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout); \
    line = u"\u0411\n"; print type(line), len(line); \
    sys.stdout.write(line); print line' | cat
  None
  <type 'unicode'> 2
  Б
  Б 
```

该页面上有更多信息，非常值得一读。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2011-01-09T05:07:56.410

尽管其他看似合理的答案建议将代码页更改为 65001，但这[不起作用](http://bugs.python.org/issue1602)。（此外，更改默认编码 using`sys.setdefaultencoding`不是[一个好主意](https://stackoverflow.com/questions/3578685/how-to-display-utf-8-in-windows-console/3580165#3580165)。）

有关详细信息和有效的代码，请参阅[此问题](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/3259271)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-19T18:48:28.440

如果您对获得坏字符的可靠表示不感兴趣，您可以使用这样的东西（使用 python >= 2.6，包括 3.x）：

```
from __future__ import print_function
import sys

def safeprint(s):
    try:
        print(s)
    except UnicodeEncodeError:
        if sys.version_info >= (3,):
            print(s.encode('utf8').decode(sys.stdout.encoding))
        else:
            print(s.encode('utf8'))

safeprint(u"\N{EM DASH}") 
```

字符串中的错误字符将转换为可由 Windows 控制台打印的表示形式。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-01-06T13:38:39.843

即使在 Windows 上，以下代码也会将 Python 输出到控制台作为 UTF-8。

控制台将在 Windows 7 上很好地显示字符，但在 Windows XP 上不能很好地显示它们，但至少它会工作，最重要的是，您将在所有平台上从脚本中获得一致的输出。您将能够将输出重定向到文件。

下面的代码在 Windows 上使用 Python 2.6 进行了测试。

```
 #!/usr/bin/python
# -*- coding: UTF-8 -*-

import codecs, sys

reload(sys)
sys.setdefaultencoding('utf-8')

print sys.getdefaultencoding()

if sys.platform == 'win32':
    try:
        import win32console 
    except:
        print "Python Win32 Extensions module is required.\n You can download it from https://sourceforge.net/projects/pywin32/ (x86 and x64 builds are available)\n"
        exit(-1)
    # win32console implementation  of SetConsoleCP does not return a value
    # CP_UTF8 = 65001
    win32console.SetConsoleCP(65001)
    if (win32console.GetConsoleCP() != 65001):
        raise Exception ("Cannot set console codepage to 65001 (UTF-8)")
    win32console.SetConsoleOutputCP(65001)
    if (win32console.GetConsoleOutputCP() != 65001):
        raise Exception ("Cannot set console output codepage to 65001 (UTF-8)")

#import sys, codecs
sys.stdout = codecs.getwriter('utf8')(sys.stdout)
sys.stderr = codecs.getwriter('utf8')(sys.stderr)

print "This is an Е乂αmp١ȅ testing Unicode support using Arabic, Latin, Cyrillic, Greek, Hebrew and CJK code points.\n" 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-10-02T22:11:03.390

只需在执行 python 脚本之前在命令行中输入此代码：

```
chcp 65001 & set PYTHONIOENCODING=utf-8 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-03-09T22:14:15.093

就像 Giampaolo Rodolà 的回答，但更脏：我真的，真的打算花很长时间（很快）了解编码的整个主题以及它们如何应用于 Windoze 控制台，

目前我只是想要 sthg 这意味着我的程序不会崩溃，并且我理解......而且不涉及导入太多异国情调的模块（特别是我正在使用 Jython，所以一半的时间是 Python模块实际上不可用）。

```
def pr(s):
    try:
        print(s)
    except UnicodeEncodeError:
        for c in s:
            try:
                print( c, end='')
            except UnicodeEncodeError:
                print( '?', end='') 
```

注意“pr”的类型比“print”短（并且比“safeprint”的类型短很多）......！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-12-16T07:53:43.617

有点与 JF Sebastian 的回答有关，但更直接。

如果您在打印到控制台/终端时遇到此问题，请执行以下操作：

```
>set PYTHONIOENCODING=UTF-8 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-24T18:00:20.660

对于 Python 2 尝试：

```
print unicode(string, 'unicode-escape') 
```

对于 Python 3 尝试：

```
import os
string = "002 Could've Would've Should've"
os.system('echo ' + string) 
```

或者试试 win-unicode-console：

```
pip install win-unicode-console
py -mrun your_script.py 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-11T17:58:28.733

您的问题的原因**不是**Win 控制台不愿意接受 Unicode（因为它这样做是因为我默认为 Win2k）。它是默认的系统编码。试试这段代码，看看它给了你什么：

```
import sys
sys.getdefaultencoding() 
```

如果它说 ascii，那是你的原因 ;-) 你必须创建一个名为 sitecustomize.py 的文件并将它放在 python 路径下（我把它放在 /usr/lib/python2.5/site-packages 下，但这是不同的Win - 它是 c:\python\lib\site-packages 什么的），具有以下内容：

```
import sys
sys.setdefaultencoding('utf-8') 
```

也许您可能还想在文件中指定编码：

```
# -*- coding: UTF-8 -*-
import sys,time 
```

编辑：更多信息可以[在优秀的 Dive into Python 书中找到](http://web.archive.org/web/20120315050914/http://www.diveintopython.net/xml_processing/unicode.html)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-07-01T15:52:05.617

TL;博士：

```
print(yourstring.encode('ascii','replace')); 
```

* * *

我自己遇到了这个问题，正在开发一个 Twitch 聊天 (IRC) 机器人。（Python 2.7 最新版本）

我想解析聊天消息以做出回应...

```
msg = s.recv(1024).decode("utf-8") 
```

但也可以以人类可读的格式将它们安全地打印到控制台：

```
print(msg.encode('ascii','replace')); 
```

这更正了机器人抛出`UnicodeEncodeError: 'charmap'`错误的问题，并将 unicode 字符替换为`?`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-05-11T20:08:34.870

Python 3.6 windows7：有几种启动python的方法，您可以使用python控制台（上面有python徽标）或windows控制台（上面写着cmd.exe）。

我无法在 Windows 控制台中打印 utf8 字符。打印 utf-8 字符会给我这个错误：

```
OSError: [winError 87] The paraneter is incorrect 
Exception ignored in: (_io-TextIOwrapper name='(stdout)' mode='w' ' encoding='utf8') 
OSError: [WinError 87] The parameter is incorrect 
```

在尝试并未能理解上面的答案后，我发现这只是一个设置问题。右键单击 cmd 控制台窗口的顶部，在选项卡上`font`选择 lucida 控制台。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-14T17:47:35.337

詹姆斯·苏拉克问道，

> 有什么方法可以让 Python 自动打印一个 ? 而不是在这种情况下失败？

其他解决方案建议我们尝试修改 Windows 环境或替换 Python 的`print()`功能。下面的答案更接近于满足苏拉克的要求。

在 Windows 7 下，可以使 Python 3.5 打印 Unicode 而不会抛出 a`UnicodeEncodeError`如下：

    代替：    `print(text)`
    替代：     `print(str(text).encode('utf-8'))`

Python 现在不再抛出异常，而是将不可打印的 Unicode 字符显示为*\xNN*十六进制代码，例如：

  *Halmalo n\xe2\x80\x99\xc3\xa9tait plus qu\xe2\x80\x99un point noir*

代替

  *Halmalo n'était plus qu'un point noir*

*当然，在其他条件不变*的情况下，后者更可取，但除此之外，前者对于诊断消息是完全准确的。因为它将 Unicode 显示为文字字节值，所以前者还可以帮助诊断编码/解码问题。

**注意：**上面的`str()`调用是必需的，否则`encode()`会导致 Python 拒绝将 Unicode 字符作为数字元组。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-24T07:16:22.080

问题在于 Windows 默认编码设置为 cp1252，需要设置为 utf-8。（[检查 PEP](https://discuss.python.org/t/pep-597-use-utf-8-for-default-text-file-encoding/1819)）

使用以下命令检查默认编码：

```
import locale 
locale.getpreferredencoding() 
```

您可以覆盖区域设置

```
import os
if os.name == "nt":
    import _locale
    _locale._gdl_bak = _locale._getdefaultlocale
    _locale._getdefaultlocale = (lambda *args: (_locale._gdl_bak()[0], 'utf8')) 
```

[来自堆栈链接](https://stackoverflow.com/questions/31469707/changing-the-locale-preferred-encoding-in-python-3-in-windows/34345136#34345136)的引用代码

# html - HTML 注释分解

> ID：5425
> 
> 赞同：23
> 
> 时间：2008-08-07T22:30:25.357
> 
> 标签：html, xml, comments, sgml

我有一个生成的页面，它在页面顶部附近插入了一个 HTML 注释。注释里面是一个 *nix 风格的命令。

```
<!-- command --option value --option2 value2 --option3 --> 
```

此评论完全打破了页面。导致这种情况发生的评论有什么问题，为什么会这样？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-08-07T22:39:12.983

[w3.org](http://www.w3.org/TR/REC-xml/#sec-comments)的XML 规范中的评论：

> 为了兼容性，字符串“--”（双连字符）不得出现在注释中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-08T02:39:48.440

如果你真的想在你的页面中保留评论，你可以使用它而不是 HTML 评论：

```
<div style="display:none">command --option value --option2 value2 --option3 </div> 
```

甚至

```
<div class="comment">command --option value --option2 value2 --option3 </div> 
```

并指定：

```
.comment {display:none;} 
```

在您的样式表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T04:06:14.087

之前页面顶部的评论`<html>`会使 IE 进入怪癖模式，这可以解释为什么分页符，如果那是您的评论出现的地方。

有关更多信息，请查看[此维基百科页面上的“触发不同的渲染模式”](http://en.wikipedia.org/wiki/Quirks_mode)

# conventions - 人们在现实世界中使用匈牙利命名约定吗？

> ID：5428
> 
> 赞同：34
> 
> 时间：2008-08-07T22:31:13.653
> 
> 标签：conventions, hungarian-notation, self-documenting-code

是否值得学习该约定，或者它是否会损害可读性和可维护性？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-08-07T22:39:00.533

考虑到大多数使用*匈牙利符号*的人都在遵循被误解的版本，我会说这毫无意义。

如果你想使用它的原始定义，它可能更有意义，但除此之外它主要是语法糖。

如果您阅读有关该主题的[Wikipedia 文章](http://en.wikipedia.org/wiki/Hungarian_notation)，您会发现两个相互冲突的表示法，*Systems Hungarian Notation*和*Apps Hungarian Notation*。

原始的，好的，定义是*Apps Hungarian Notation*，但大多数人使用*Systems Hungarian Notation*。

作为这两者的一个例子，考虑用 l 表示长度、a 表示面积和 v 表示体积作为变量的前缀。

使用这种表示法，以下表达式是有意义的：

```
int vBox = aBottom * lVerticalSide; 
```

但这不是：

```
int aBottom = lSide1; 
```

如果您混合前缀，它们将被视为等式的一部分，并且体积 = 面积 * 长度对于盒子来说很好，但是将长度值复制到面积变量中应该会引发一些危险信号。

不幸的是，另一种表示法不太有用，人们在变量名称前加上值的类型，如下所示：

```
int iLength;
int iVolume;
int iArea; 
```

有些人使用 n 表示数字，或 i 表示整数，f 表示浮点数，s 表示字符串等。

最初的前缀是用来发现方程中的问题，但不知何故已经演变成使代码更容易阅读，因为你不必去寻找变量声明。对于今天的智能编辑器，您只需将鼠标悬停在任何变量上即可找到完整类型，而不仅仅是它的缩写，这种类型的匈牙利符号已经失去了很多意义。

但是，你应该自己决定。我只能说我也不用。

* * *

**编辑**只是为了添加一个简短的通知，虽然我不使用*Hungarian Notation*，但我确实使用了前缀，它是下划线。我在类的所有私有字段前面加上一个 _ ，否则拼写它们的名称，就像我拼写一个属性一样，首字母大写。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-08-07T22:56:03.883

如果使用得当，匈牙利命名约定会很有用，但不幸的是，它往往被误用的频率更高。

阅读 Joel Spolsky 的文章[Making Wrong Code Look Wrong](http://www.joelonsoftware.com/articles/Wrong.html)以获得适当的观点和理由。

本质上，基于类型的匈牙利表示法，其中变量以有关其类型的信息为前缀（例如，对象是否为字符串、句柄、int 等）大多是无用的，并且通常只会增加开销而几乎没有好处。遗憾的是，这是大多数人都熟悉的匈牙利符号。然而，所设想的匈牙利符号的意图是添加关于变量包含的数据“种类”的信息。这允许您将不应该被允许混合在一起的其他类型的数据划分类型的数据，除非可能通过一些转换过程。例如，基于像素的坐标与其他单位的坐标，或不安全的用户输入与来自安全来源的数据等。

以这种方式看待它，如果您发现自己通过代码来查找有关变量的信息，那么您可能需要调整命名方案以包含该信息，这就是匈牙利约定的精髓。

请注意，匈牙利表示法的替代方法是使用更多类来显示变量使用的意图，而不是到处依赖原始类型。例如，您可以为不安全的用户输入使用简单的字符串包装器类，并为安全数据使用单独的包装器类，而不是为不安全的用户输入使用变量前缀。在强类型语言中，这具有由编译器强制执行分区的优势（即使在不太强类型的语言中，您通常也可以添加自己的tripwire代码），但会增加不少开销。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-08T01:44:58.443

当涉及到 UI 元素时，我仍然使用匈牙利表示法，其中几个 UI 元素与特定的对象/值相关，例如，

lblFirstName 为标签对象，txtFirstName 为文本框。我绝对不能将它们都命名为“FirstName”，即使*这*是两个对象的关注/责任。

其他人如何命名 UI 元素？

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-08-07T22:52:06.873

我认为匈牙利符号是通往更易读代码的“路径”的一个有趣的脚注，如果做得好，比不做更好。

尽管如此，我宁愿取消它，而不是这样：

```
int vBox = aBottom * lVerticalSide; 
```

写这个：

```
int boxVolume = bottomArea * verticalHeight; 
```

现在是 2008 年。我们不再有 80 个字符的固定宽度屏幕了！

此外，如果您编写的变量名比那个长得多，那么无论如何您都应该考虑重构为对象或函数。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-08-07T22:45:18.227

它毫无意义（而且会分散注意力），但在我的公司中使用率相对较高，至少对于整数、字符串、布尔值和双精度数等类型而言。

`sValue`, `iCount`,`dAmount`或`fAmount`,之类的东西`bFlag`无处不在。

曾几何时，这种约定是有充分理由的。现在，它是一种癌症。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-13T16:31:27.270

很抱歉跟进一个问题，但是带有“I”前缀的接口是否符合匈牙利表示法？如果是这样的话，那么是的，很多人在现实世界中使用它。如果没有，请忽略这一点。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-17T03:24:39.943

我认为匈牙利符号是规避我们短期记忆容量的一种方式。根据心理学家的说法，我们可以存储大约**[7 正负 2 块](http://psychclassics.yorku.ca/Miller/)**信息。通过包含前缀添加的额外信息可以帮助我们提供有关标识符含义的更多详细信息，即使没有其他上下文也是如此。换句话说，我们可以猜测变量的用途，而无需查看它是如何使用或声明的。这可以通过应用[封装](http://en.wikipedia.org/wiki/Encapsulation_(classes_-_computers))和[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)等 oo 技术来避免。

我不知道这是否已经过经验研究。我假设当我们试图理解具有超过 9 个实例变量的类或具有超过 9 个局部变量的方法时，工作量会显着增加。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-09T23:05:05.023

当我看到匈牙利语的讨论时，我很高兴看到人们在努力思考如何让他们的代码更清晰，以及如何让错误更明显。这正是我们都应该做的！

但是不要忘记，除了命名之外，您还可以使用一些强大的工具。

**提取方法**如果您的方法太长以至于您的变量声明已经滚动到屏幕顶部，请考虑使您的方法更小。（如果你有太多的方法，考虑一个新的类。）

**强类型化**如果你发现你将*zip code*存储在一个整数变量中并将它们分配给一个*shoe size*整数变量，考虑为 zip code 创建一个类和一个鞋码类。然后您的错误将在编译时被捕获，而不需要人工仔细检查。当我这样做时，我通常会在我的代码中找到一堆特定于邮政编码和鞋码的逻辑，然后我可以将它们转移到我的新课程中。突然间，我的所有代码都变得更清晰、更简单，并且不受某些类型的错误的影响。哇。

总结一下：是的，请认真思考如何在代码中使用名称来清楚地表达您的想法，但也要看看您可以调用的其他强大的 OO 工具。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-20T08:44:40.637

这些天范围不是比类型更重要吗，例如

*   l 本地
*   一个 for 论点
*   m代表会员
*   g 代表全局
*   ETC

使用重构旧代码的现代技术，搜索和替换符号因为你改变了它的类型是乏味的，编译器会捕捉到类型变化，但通常不会捕捉到范围的不正确使用，明智的命名约定在这里有所帮助。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-24T13:46:41.273

我不使用非常严格意义上的匈牙利符号，但我发现自己使用它来保留一些常见的自定义对象以帮助识别它们，而且我倾向于在 gui 控件对象前面加上它们是控件的类型。例如，labelFirstName、textFirstName 和 buttonSubmit。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-08T06:09:49.703

我对按钮、文本框和标签等 UI 元素使用匈牙利命名法。主要好处是在 Visual Studio Intellisense 弹出窗口中进行分组。如果我想访问我的标签，我只需开始输入 lbl.... 并且 Visual Studio 会建议我所有的标签，nicley 组合在一起。

然而，在做了越来越多 Silverlight 和 WPF 的东西，利用数据绑定之后，我什至不再命名我所有的控件，因为我不必从代码隐藏中引用它们（因为真的没有任何代码隐藏了;)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-13T17:17:25.617

问题是混合标准。

正确的是确保每个人都做同样的事情。

```
int Box = iBottom * nVerticleSide 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-27T13:55:47.730

> 最初的前缀是用来发现方程中的问题，但不知何故已经演变成使代码更容易阅读，因为你不必去寻找变量声明。对于今天的智能编辑器，您只需将鼠标悬停在任何变量上即可找到完整类型，而不仅仅是它的缩写，这种类型的匈牙利符号已经失去了很多意义。

我稍微改掉了这个习惯，但是在没有强变量类型的 JavaScript 中，以类型为前缀可能很有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-27T14:21:39.743

在使用动态类型语言时，我偶尔会使用 Apps Hungarian。对于静态类型的语言，我没有。请参阅我[在另一个线程中的](https://stackoverflow.com/questions/26086/how-do-you-make-wrong-code-look-wrong-what-patterns-do-you-use-to-avoid-semanti#26174)解释。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-25T15:48:26.323

匈牙利符号在类型安全语言中毫无意义。例如，您将在旧 Microsoft 代码中看到的一个常见前缀是“lpsz”，意思是“指向零终止字符串的长指针”。自 1700 年代早期以来，我们还没有使用存在短指针和长指针的分段架构，C++ 中的正常字符串表示总是以零结尾，并且编译器是类型安全的，因此不会让我们将非字符串操作应用于细绳。因此，这些信息对程序员都没有任何实际用途——它只是更多的打字。

但是，我使用了类似的想法：阐明变量**用法的前缀。**主要有：

*   m = 成员
*   c = 常量
*   s = 静态
*   v = 易失性
*   p = 指针（和 pp=指向指针的指针等）
*   i = 索引或迭代器

这些可以组合，因此作为指针的静态成员变量将是“mspName”。

这些在哪里有用？

*   在用法很重要的地方，不断提醒程序员变量是（例如）易失性或指针是个好主意
*   在我使用 p 前缀之前，指针取消引用曾经让我头疼。现在很容易知道什么时候有一个对象 (Orange) 一个指向对象的指针 (pOrange) 或一个指向对象指针的指针 (ppOrange)。要取消引用一个对象，只需在其名称中的每个 p 前面加上一个星号。案例已解决，不再有 deref 错误！
*   在构造函数中，我通常会发现参数名称与成员变量的名称（例如大小）相同。我更喜欢使用“mSize = size;” 比“size = theSize”或“this.size = size”。它也更安全：当我想说“mSize = 1”（设置成员）时，我不会意外使用“size = 1”（设置参数）
*   在循环中，我的迭代器变量都是有意义的名称。大多数程序员使用“i”或“index”，然后在需要内部循环时必须编造新的无意义名称（“j”、“index2”）。我使用带有 i 前缀的有意义的名称（iHospital、iWard、iPatient），因此我始终知道迭代器正在迭代什么。
*   在循环中，您可以通过使用具有不同前缀的相同基本名称来混合多个相关变量： Orange orange = pOrange[iOrange]; 这也意味着您不会犯数组索引错误（pApple[i] 看起来不错，但将其写为 pApple[iOrange] 并且错误立即显而易见）。
*   许多程序员会在不知情的情况下使用我的系统：通过添加像“Index”或“Ptr”这样的冗长后缀 - 没有任何理由使用比单个字符更长的形式恕我直言，所以我使用“i”和“ p”。更少的打字，更一致，更容易阅读。

这是一个简单的系统，它为代码添加了有意义和有用的信息，并消除了许多简单但常见的编程错误的可能性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-08-07T22:39:04.137

过去 6 个月我一直在 IBM 工作，但我在任何地方都没有看到它（感谢上帝，因为我讨厌它。）我看到了 camelCase 或 c_style。

```
thisMethodIsPrettyCool()
this_method_is_pretty_cool() 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-08-07T22:43:19.963

这取决于您的语言和环境。通常我不会使用它，除非您所在的开发环境很难找到变量的类型。

还有两种不同类型的匈牙利符号。参见乔尔的文章。我找不到它（他的名字并不完全让他们很容易找到），有人有我的意思的链接吗？

编辑：Wedge 在他的帖子中有我的意思的文章。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-08-27T14:14:29.417

原始形式（正确的匈牙利表示法:)），其中前缀表示变量存储的值的类型（即长度、数量）是可以的，但并非在所有类型的应用程序中都是必需的。

在大多数现代编程语言中，前缀表示类型（String，int）的流行形式（The Wrong Hungarian Notation）是无用的。

尤其是像 strA 这样无意义的名字。我无法理解我们人们使用带有长前缀的无意义名称，这什么都没有。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-09T23:41:17.183

我对组件（例如editFirstName、lblStatus 等）使用基于类型的（系统HN），因为它使自动完成工作更好。

我有时将 App HN 用于类型信息不足的变量。即 fpX 表示一个固定的指向变量（int 类型，但不能与 int 混合匹配），rawInput 表示尚未验证的用户字符串等

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-09-03T02:19:25.127

作为一个 PHP 程序员，它的类型非常松散，我不打算使用它。但是，我偶尔会根据系统的大小和变量的范围将某些东西识别为数组或对象。

# php - 访问一系列类的 CONST 属性

> ID：5459
> 
> 赞同：11
> 
> 时间：2008-08-07T22:58:42.617
> 
> 标签：php, oop

这就是我想要在 PHP 5.3.0+ 中工作的方式

```
<?php
    class MyClass
    {
        const CONSTANT = 'Const var';        
    }

    $classname = 'MyClass';
    echo $classname::CONSTANT; // As of PHP 5.3.0
?> 
```

但我仅限于使用 PHP 5.2.6。谁能想到一个简单的方法来模拟这种行为而不实例化类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-21T10:48:23.407

您可以[`eval`](http://php.net/manual/en/function.eval.php)在不使用 5.3 之前的代码的情况下完成此操作。只需使用以下[`constant`](http://php.net/manual/en/function.constant.php)功能：

```
<?php

class MyClass
{
    const CONSTANT = 'Const var';
}

$classname = 'MyClass';
echo constant("$classname::CONSTANT");

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-08-07T23:21:44.877

如果您绝对需要访问这样的常量，您可以这样做：

```
<?php
class MyClass
{
        const CONSTANT = 'Const var';
}

$classname = 'MyClass';
echo eval( 'return '.$classname.'::CONSTANT;' );
?> 
```

但是，如果我是你，我会尽量不使用 eval。

# community-server - Telligent 的社区服务器

> ID：5460
> 
> 赞同：5
> 
> 时间：2008-08-07T23:00:30.053
> 
> 标签：community-server

我工作的公司希望在我们的网站上添加博客功能，他们希望花费大量资金在他们购买的 CMS 之上构建一些垃圾（sitecore）。我将他们指向 Telligent 的社区服务器，我们今天举行了一次类似销售的会议，让营销人员参与进来。我的问题是，是否有人在使用 Community Server、对其进行剥皮和扩展时遇到问题？
我想解释一下为什么我在考虑 Community Server，该公司想要多个作者的多个博客。我想尽可能地脱离管理部分，并且不认为拥有多个博客的引擎太多并不意味着数据库工作。我也喜欢 Community Server 提供的其他功能，并认为公司会发现它很有用，尤其是媒体部分，因为现在我们有一些非常糟糕的方式来处理白皮书和其他东西。

编辑：我们实际上将 Sitecore 博客模块用于我们内部网上的单个博客（这实际上是 CMS 提供的服务）。我为什么不喜欢我们的公共站点的一些原因是它们位于不同的服务器上，它不支持多个作者，没有内置的联合，从查看源代码和我个人认为 Community Server 的其他功能使其物有所值。

另一个编辑：在我公司的情况下，需要坚持在 sql server 上运行的 .net 软件，但我不介意看到其他人的建议。ExpressionEngine 看起来很有希望，将在我的个人盒子上试用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-07T23:08:54.110

我已经使用社区服务器完成了很多项目。如果你对开箱即用的功能没问题，或者你不介意坚持你开始使用的版本，我想你会很高兴的。

使用 CS 时让我头疼的时候是客户想要 CS 不提供的功能，但又坚持在 Telligent 发布更新时保持升级到最新版本的能力。您可以通过在单独的项目中进行所有更改或仅修改 aspx/ascx 文件（无代码隐藏）来支持这一点。无论您计划得多么好，都将需要某种合并。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-07T23:13:21.480

社区服务器本身对我来说非常可靠，但如果你只需要一个博客引擎，那么它可能会有点过头了。例如，对其进行剥皮是一项相当多的工作（尽管他们非常强大的变色龙主题引擎）。

如果您只需要这些，我可能会仔细研究其中一个专用博客引擎，例如 BlogEngine.NET、dasBlog 或 SubText。如果您认为需要更多“以社区为中心”的功能，例如论坛等，请使用社区服务器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-29T11:02:54.663

您还可以查看 Telligent Graffiti CMS。 [http://graffiticms.com/](http://graffiticms.com/)

它支持多个博客和作者。

更新：它现在是开源的，可在[http://graffiticms.codeplex.com/获得](http://graffiticms.codeplex.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T13:45:40.597

Community Server 2008.5 允许您添加多个可以发布文章的成员。此外，借助 Community Server 2008.5，您现在拥有 wiki 以及论坛和博客。这可能是我一段时间以来见过的更好的基于 Web 的管理控制面板之一。这让您可以轻松更改包括网站主题（或皮肤）在内的几项内容。对我来说，它是我一段时间以来见过的最具可扩展性的应用程序之一。我们将它用于我们的网站[http://knowledgemgmtsolutions.com](http://knowledgemgmtsolutions.com)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-05T01:57:49.423

换肤非常简单，侧边栏小部件也不是很难创建（如果您不介意在代码中构建控件）。这些小部件还允许用户在控制面板中非常轻松地自定义它们。但是，我怀疑您会为 Community Server 找到一个强大的小部件构建器社区。与 wordpress 等博客的开发社区相比，没有什么可比的。

我建议从头开始模板并根据需要添加 CS 控件，以获得您喜欢的样式标记并仅使用您需要的标记。

为用户设置不同的角色以发布到不同的博客也很容易，不需要编码。您可以拥有博客组，并且只允许某些用户在某些博客上发帖。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-28T02:38:04.327

Sitecore 的论坛模块由社区服务器提供支持并与 Sitecore CMS 集成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T23:49:13.777

您是否查看过Sitecore的[共享源博客模块？](http://trac.sitecore.net/Blog)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-08T00:15:04.070

带有多站点管理器的表达式引擎非常适合这种情况。

# git - 如何撤消 git reset --hard HEAD~1？

> ID：5473
> 
> 赞同：1414
> 
> 时间：2008-08-07T23:22:51.273
> 
> 标签：git, version-control, git-reset

是否可以撤消由以下命令引起的更改？如果是这样，怎么做？

```
git reset --hard HEAD~1 
```

* * *

## 回答 #1

> 赞同：2141
> 
> 时间：2008-08-22T04:36:02.187

Pat Notz 是正确的。只要提交在几天之内，您就可以取回提交。git 仅在大约一个月左右后收集垃圾，除非您明确告诉它删除较新的 blob。

```
$ git init
Initialized empty Git repository in .git/

$ echo "testing reset" > file1
$ git add file1
$ git commit -m 'added file1'
Created initial commit 1a75c1d: added file1
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file1

$ echo "added new file" > file2
$ git add file2
$ git commit -m 'added file2'
Created commit f6e5064: added file2
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file2

$ git reset --hard HEAD^
HEAD is now at 1a75c1d... added file1

$ cat file2
cat: file2: No such file or directory

$ git reflog
1a75c1d... HEAD@{0}: reset --hard HEAD^: updating HEAD
f6e5064... HEAD@{1}: commit: added file2

$ git reset --hard f6e5064
HEAD is now at f6e5064... added file2

$ cat file2
added new file 
```

您可以在示例中看到 file2 由于硬重置而被删除，但在我通过 reflog 重置时又被放回原处。

* * *

## 回答 #2

> 赞同：462
> 
> 时间：2008-08-09T05:30:13.707

您要做的是指定要恢复到的提交的 sha1。您可以通过检查 reflog ( `git reflog`) 然后执行

```
git reset --hard <sha1 of desired commit> 
```

但是不要等待太久......几周后，git 最终会将该提交视为未引用并删除所有 blob。

* * *

## 回答 #3

> 赞同：224
> 
> 时间：2011-02-26T15:13:20.330

答案隐藏在上面的详细回复中，您可以简单地执行以下操作：

```
$> git reset --hard HEAD@{1} 
```

（参见*git reflog show*的输出）

* * *

## 回答 #4

> 赞同：138
> 
> 时间：2008-08-22T06:11:27.810

如果 Git 还没有进行垃圾收集，则可以恢复它。

通过以下方式获得悬空提交的概述`fsck`：

```
$ git fsck --lost-found
dangling commit b72e67a9bb3f1fc1b64528bcce031af4f0d6fcbf 
```

使用 rebase 恢复悬空提交：

```
$ git rebase b72e67a9bb3f1fc1b64528bcce031af4f0d6fcbf 
```

* * *

## 回答 #5

> 赞同：82
> 
> 时间：2015-04-02T08:57:22.260

据我所知，`--hard`将丢弃未提交的更改。因为这些不被 git 跟踪。但您可以撤消`discarded commit`.

```
$ git reflog 
```

将列出：

```
b0d059c HEAD@{0}: reset: moving to HEAD~1
4bac331 HEAD@{1}: commit: added level introduction....
.... 
```

`4bac331`在哪里`discarded commit`。

现在只需将头部移至该提交::

```
$ git reset --hard 4bac331 
```

* * *

## 回答 #6

> 赞同：70
> 
> 时间：2012-01-13T00:48:48.443

如果你真的很幸运，就像我一样，你可以回到你的文本编辑器并点击“撤消”。

我知道这不是一个正确的答案，但它为我节省了半天的工作时间，所以希望它对其他人也能做到这一点！

* * *

## 回答 #7

> 赞同：48
> 
> 时间：2015-01-16T18:37:36.800

# 在大多数情况下，是的。

根据运行命令时存储库所处的状态，影响的`git reset --hard`范围从微不足道到撤消，再到基本上不可能。

下面我列出了一系列不同的可能情况，以及如何从中恢复。

## 我所有的更改都已提交，但现在提交已消失！

这种情况通常发生在您`git reset`使用参数运行时，例如`git reset --hard HEAD~`. 别担心，这很容易恢复！

如果您只是跑步`git reset`并且此后没有做任何其他事情，则可以使用此单线返回到原来的位置：

```
git reset --hard @{1} 
```

这将重置您当前的分支，无论它在上次修改之前处于何种状态（在您的情况下，对分支的最新修改将是您尝试撤消的硬重置）。

但是，如果您在重置后对分支*进行*了其他修改，则上面的单行将不起作用。相反，您应该运行以查看最近对您的分支所做的所有更改（包括重置）的列表。该列表将如下所示：[`git reflog`](http://git-scm.com/docs/git-reflog) *`<branchname>`*

```
7c169bd master@{0}: reset: moving to HEAD~
3ae5027 master@{1}: commit: Changed file2
7c169bd master@{2}: commit: Some change
5eb37ca master@{3}: commit (initial): Initial commit 
```

在此列表中找到您要“撤消”的操作。在上面的示例中，它将是第一行，即“重置：移动到 HEAD~”。*然后在该操作之前*（下方）复制提交的表示。在我们的例子中，这将是`master@{1}`（或者`3ae5027`，它们都代表相同的提交），并运行`git reset --hard <commit>`以将当前分支重置回该提交。

## 我用 上演了我的更改`git add`，但从未提交过。现在我的改变消失了！

这有点难以恢复。git*确实*有您添加的文件的副本，但由于这些副本从未绑定到任何特定的提交，您无法一次恢复所有更改。相反，您必须在 git 的数据库中找到各个文件并手动恢复它们。您可以使用[`git fsck`](http://git-scm.com/docs/git-fsck).

有关这方面的详细信息，请参阅[Undo git reset --hard with uncommitted files in the staging area](https://stackoverflow.com/q/7374069/1157054)。

## 我对工作目录中的文件进行了更改，这些更改我从未使用 . 暂存`git add`，也从未提交过。现在我的改变消失了！

哦哦。我不想告诉你这个，但你可能不走运。git 不会存储您未添加或提交的更改，并且根据以下[文档`git reset`](http://git-scm.com/docs/git-reset)：

> **- 难的**
> 
> 重置索引和工作树。**此后对工作树中跟踪文件的任何更改`<commit>`都将被丢弃。**

您*可能*能够使用某种磁盘恢复实用程序或专业的数据恢复服务来恢复您的更改，但在这一点上，这可能比它的价值更麻烦。

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2012-08-15T07:01:10.280

## IRL 案例示例：

### `$ git fsck --lost-found`

```
Checking object directories: 100% (256/256), done.
Checking objects: 100% (3/3), done.
dangling blob 025cab9725ccc00fbd7202da543f556c146cb119
dangling blob 84e9af799c2f5f08fb50874e5be7fb5cb7aa7c1b
dangling blob 85f4d1a289e094012819d9732f017c7805ee85b4
dangling blob 8f654d1cd425da7389d12c17dd2d88d318496d98
dangling blob 9183b84bbd292dcc238ca546dab896e073432933
dangling blob 1448ee51d0ea16f259371b32a557b60f908d15ee
dangling blob 95372cef6148d980ab1d7539ee6fbb44f5e87e22
dangling blob 9b3bf9fb1ee82c6d6d5ec9149e38fe53d4151fbd
dangling blob 2b21002ca449a9e30dbb87e535fbd4e65bac18f7
dangling blob 2fff2f8e4ea6408ac84a8560477aa00583002e66
dangling blob 333e76340b59a944456b4befd0e007c2e23ab37b
dangling blob b87163c8def315d40721e592f15c2192a33816bb
dangling blob c22aafb90358f6bf22577d1ae077ad89d9eea0a7
dangling blob c6ef78dd64c886e9c9895e2fc4556e69e4fbb133
dangling blob 4a71f9ff8262701171d42559a283c751fea6a201
dangling blob 6b762d368f44ddd441e5b8eae6a7b611335b49a2
dangling blob 724d23914b48443b19eada79c3eb1813c3c67fed
dangling blob 749ffc9a412e7584245af5106e78167b9480a27b
dangling commit f6ce1a403399772d4146d306d5763f3f5715cb5a    <- it's this one 
```

### `$ git show f6ce1a403399772d4146d306d5763f3f5715cb5a`

```
commit f6ce1a403399772d4146d306d5763f3f5715cb5a
Author: Stian Gudmundsen Høiland <stian@Stians-Mac-mini.local>
Date:   Wed Aug 15 08:41:30 2012 +0200

    *MY COMMIT MESSAGE IS DISPLAYED HERE*

diff --git a/Some.file b/Some.file
new file mode 100644
index 0000000..15baeba
--- /dev/null
+++ b/Some.file
*THE WHOLE COMMIT IS DISPLAYED HERE* 
```

### `$ git rebase f6ce1a403399772d4146d306d5763f3f5715cb5a`

```
First, rewinding head to replay your work on top of it...
Fast-forwarded master to f6ce1a403399772d4146d306d5763f3f5715cb5a. 
```

* * *

## 回答 #9

> 赞同：33
> 
> 时间：2019-08-14T08:35:30.023

`git reflog`

*   在列表中找到您的提交 sha，然后将其复制并粘贴到此命令中：

`git cherry-pick <the sha>`

* * *

## 回答 #10

> 赞同：23
> 
> 时间：2008-08-27T03:45:40.223

如果您还没有对您的存储库进行垃圾收集（例如使用`git repack -d`or `git gc`，但请注意垃圾收集也可以自动发生），那么您的提交仍然存在 - 它不再可以通过 HEAD 访问。

您可以尝试通过查看`git fsck --lost-found`.

较新版本的 Git 有一个叫做“reflog”的东西，它是对 refs 所做的所有更改的日志（与对存储库内容所做的更改相反）。因此，例如，每次切换 HEAD（即每次`git checkout`切换分支时）都会被记录。而且，当然，您`git reset`还操纵了 HEAD，因此它也被记录了下来。`@`您可以通过使用符号而不是 , 以访问存储库的旧状态的类似方式访问引用的旧`~`状态`git reset HEAD@{1}`。

我花了一段时间才明白 HEAD@{1} 和 HEAD~1 有什么区别，所以这里稍微解释一下：

```
git init
git commit --allow-empty -mOne
git commit --allow-empty -mTwo
git checkout -b anotherbranch
git commit --allow-empty -mThree
git checkout master # This changes the HEAD, but not the repository contents
git show HEAD~1 # => One
git show HEAD@{1} # => Three
git reflog 
```

因此，`HEAD~1`意味着“转到 HEAD 当前指向的提交之前的提交”，而`HEAD@{1}`意味着“转到 HEAD 指向的提交，然后再指向它当前指向的位置”。

这将很容易让您找到丢失的提交并恢复它。

* * *

## 回答 #11

> 赞同：20
> 
> 时间：2019-08-16T22:17:00.060

如果您使用的是 JetBrains IDE（任何基于 IntelliJ 的），您甚至可以通过其“本地历史记录”功能恢复未提交的更改。

右键单击文件树中的顶级目录，在上下文菜单中找到“本地历史记录”，然后选择“显示历史记录”。这将打开一个视图，您可以在其中找到您最近的编辑，找到要返回的修订后，右键单击它并单击“还原”。

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2018-04-21T16:30:45.330

在回答之前让我们添加一些背景，解释这是什么`HEAD`。

# ***`First of all what is HEAD?`***

`HEAD`只是对当前分支上的当前提交（最新）的引用。
在任何给定时间只能有一个`HEAD`。（不包括`git worktree`）

的内容`HEAD`存储在里面`.git/HEAD`，它包含当前提交的 40 字节 SHA-1。

* * *

# ***`detached HEAD`***

如果您不在最新提交上 - 意思`HEAD`是指向历史上的先前提交，则称为***`detached HEAD`***.

[![在此处输入图像描述](https://i.stack.imgur.com/OlavO.png)](https://i.stack.imgur.com/OlavO.png)

在命令行上它看起来像这样 - SHA-1 而不是分支名称，因为`HEAD`它没有指向当前分支的尖端

[![在此处输入图像描述](https://i.stack.imgur.com/U0l3s.png)](https://i.stack.imgur.com/U0l3s.png)

* * *

### 关于如何从分离的 HEAD 中恢复的一些选项：

* * *

### [`git checkout`](https://git-scm.com/docs/git-checkout)

```
git checkout <commit_id>
git checkout -b <new branch> <commit_id>
git checkout HEAD~X // x is the number of commits t go back 
```

这将签出指向所需提交的新分支。
此命令将检出给定的提交。
此时您可以创建一个分支并从这一点开始工作。

```
# Checkout a given commit. 
# Doing so will result in a `detached HEAD` which mean that the `HEAD`
# is not pointing to the latest so you will need to checkout branch
# in order to be able to update the code.
git checkout <commit-id>

# create a new branch forked to the given commit
git checkout -b <branch name> 
```

* * *

### [`git reflog`](https://git-scm.com/docs/git-reflog)

您也可以随时使用`reflog`。
`git reflog` 将显示更新的任何更改，`HEAD`并检查所需的 reflog 条目将设置`HEAD`回此提交。

**每次修改 HEAD 都会在`reflog`**

```
git reflog
git checkout HEAD@{...} 
```

这将使您回到所需的提交

[![在此处输入图像描述](https://i.stack.imgur.com/atW9w.png)](https://i.stack.imgur.com/atW9w.png)

* * *

### ***[`git reset HEAD --hard <commit_id>`](https://git-scm.com/docs/git-reset)***

“移动”你的头回到所需的提交。

```
# This will destroy any local modifications.
# Don't do it if you have uncommitted work you want to keep.
git reset --hard 0d1d7fc32

# Alternatively, if there's work to keep:
git stash
git reset --hard 0d1d7fc32
git stash pop
# This saves the modifications, then reapplies that patch after resetting.
# You could get merge conflicts, if you've modified things which were
# changed since the commit you reset to. 
```

*   注意：（[从 Git 2.7 开始](https://github.com/git/git/blob/master/Documentation/RelNotes/2.7.0.txt)）
    你也可以使用`git rebase --no-autostash`。

* * *

* * *

### ***[`git revert <sha-1>`](https://git-scm.com/docs/git-revert)***

“撤消”给定的提交或提交范围。
重置命令将“撤消”在给定提交中所做的任何更改。
将提交带有撤消补丁的新提交，而原始提交也将保留在历史记录中。

```
# add new commit with the undo of the original one.
# the <sha-1> can be any commit(s) or commit range
git revert <sha-1> 
```

* * *

这个模式说明了哪个命令做什么。
如您所见，`reset && checkout`修改`HEAD`.

[![在此处输入图像描述](https://i.stack.imgur.com/NuThL.png)](https://i.stack.imgur.com/NuThL.png)

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2014-01-20T06:27:22.903

我知道这是一个旧线程......但是由于许多人正在寻找在 Git 中撤消内容的方法，我仍然认为继续在这里提供提示可能是一个好主意。

当您在 git gui 中执行“git add”或将任何内容从左上角移动到左下角时，文件的内容将存储在 blob 中，并且可以从该 blob 中恢复文件内容。

因此，即使文件未提交但必须已添加，也可以恢复文件。

```
git init  
echo hello >> test.txt  
git add test.txt 
```

现在 blob 已创建，但它被索引引用，因此在我们重置之前它不会与 git fsck 一起列出。所以我们重新设置...

```
git reset --hard  
git fsck 
```

你会得到一个悬空的 blob ce013625030ba8dba906f756967f9e9ca394464a

```
git show ce01362 
```

会给你文件内容“你好”回来

为了找到未引用的提交，我在某处找到了提示这一点的提示。

```
gitk --all $(git log -g --pretty=format:%h) 
```

我将它作为 git gui 中的工具，它非常方便。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2014-03-11T08:09:52.093

制作了一个小脚本，以便更容易找到正在寻找的提交：

`git fsck --lost-found | grep commit | cut -d ' ' -f 3 | xargs -i git show \{\} | egrep '^commit |Date:'`

是的，它可以用 awk 或类似的东西变得更漂亮，但它很简单，我只是需要它。可能会为其他人节省 30 秒。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-04-07T08:46:19.030

我刚刚对错误的项目进行了硬重置。拯救我生命的是 Eclipse 的本地历史。据说 IntelliJ Idea 也有一个，你的编辑也可以，值得检查一下：

1.  [关于本地历史的 Eclipse 帮助主题](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/gettingStarted/qs-55.htm)
2.  [http://wiki.eclipse.org/FAQ_Where_is_the_workspace_local_history_stored%3F](http://wiki.eclipse.org/FAQ_Where_is_the_workspace_local_history_stored%3F)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2020-08-28T19:40:21.550

`git reflog`并回到最后一个 HEAD 6a56624 (HEAD -> master) HEAD@{0}: reset: 移动到 HEAD~3 1a9bf73 HEAD@{1}: commit: 在模型中添加更改生成二进制

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-03-20T02:54:23.743

这救了我的命： `https://medium.com/@CarrieGuss/how-to-recover-from-a-git-hard-reset-b830b5e3f60c`

基本上你需要运行：

```
for blob in $(git fsck --lost-found | awk ‘$2 == “blob” { print $3 }’); do git cat-file -p $blob > $blob.txt; done 
```

然后手动经历痛苦以将文件重新组织为正确的结构。

外卖：`git reset --hard`如果你不完全 100% 了解它是如何工作的，就不要使用它，最好不要使用它。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-03-13T10:53:44.120

我的问题几乎相似。在我进入之前我有未提交的文件`git reset --hard`。

谢天谢地。我设法跳过了所有这些资源。在我注意到我可以撤消（`ctrl-z`）之后。我只想将其添加到上面的所有答案中。

*笔记。`ctrl-z`未打开的文件是不可能的。*

*   [如何撤消 git reset --hard HEAD~1？](https://stackoverflow.com/questions/5473/how-can-i-undo-git-reset-hard-head1)
*   [使用暂存区域中未提交的文件撤消 git reset --hard](https://stackoverflow.com/questions/7374069/undo-git-reset-hard-with-uncommitted-files-in-the-staging-area)
*   [执行 git reset --hard HEAD^ 后恢复添加的文件](https://stackoverflow.com/questions/1108853/recovering-added-file-after-doing-git-reset-hard-head)
*   **中篇文章：** [如何：从 Git 硬重置中恢复（或者，这就是我们可能不应该但完全可以拥有美好事物的原因）](https://medium.com/@CarrieGuss/how-to-recover-from-a-git-hard-reset-b830b5e3f60c#.353djvmkb)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-06-24T10:44:20.640

git reset --hard - 你可以用来恢复一页，然后你可以再次从原点存储或拉取所有内容

# asp.net - 显示 ModalPopupExtender 时如何指定要运行的 javascript

> ID：5482
> 
> 赞同：38
> 
> 时间：2008-08-07T23:37:30.807
> 
> 标签：asp.net, javascript, asp.net-ajax

ASP.NET AJAX **ModalPopupExtender**有`OnCancelScript`和`OnOkScript`属性，但它似乎没有`OnShowScript`属性。我想指定一个javascript函数在每次显示弹出窗口时运行。

在过去的情况下，我将 设置`TargetControlID`为一个虚拟控件并提供我自己的控件，该控件首先执行一些 JS 代码，然后使用 JS 方法显示弹出窗口。但在这种情况下，我将显示来自客户端和服务器端代码的弹出窗口。

有人知道这样做的方法吗？

顺便说一句，我需要这个，因为我在模态中有一个文本框，我想制作一个 TinyMCE 编辑器。但是 TinyMCE 初始化脚本不适用于不可见的文本框，所以我必须找到一种在显示模式时运行它的方法

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-08-08T00:03:41.067

嗯...我*很确定*MPE 有一个显示的事件...这不是我的想法，但我认为您可以在 page_load 上的显示事件中添加一个事件处理程序

```
function pageLoad()
{
    var popup = $find('ModalPopupClientID');
    popup.add_shown(SetFocus);
}

function SetFocus()
{
    $get('TriggerClientId').focus();
} 
```

我不确定这是否会帮助您从服务器端调用它

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-03-02T07:24:20.683

这是在标记中执行此操作的简单方法：

```
<ajaxToolkit:ModalPopupExtender 
    ID="ModalPopupExtender2" runat="server" 
    TargetControlID="lnk_OpenGame" 
    PopupControlID="Panel1" 
    BehaviorID="SilverPracticeBehaviorID"  >
    <Animations>
        <OnShown>
             <ScriptAction Script="InitializeGame();" />  
        </OnShown>
    </Animations>                
</ajaxToolkit:ModalPopupExtender> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-03-02T18:11:23.030

您应该使用 ModalPopupExtender 的**BehaviorID**值`mpeBID`。

```
function pageLoad() {
    $find('mpeBID').add_shown(HideMediaPlayer);
}

function HideMediaPlayer() {
    var divMovie = $get('<%=divMovie.ClientID%>');
    divMovie.style.display = "none";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T23:44:27.283

如果您使用按钮或超链接或其他东西来触发弹出窗口显示，您是否还可以向触发器的 onClick 事件添加一个额外的处理程序，该事件仍应触发模式弹出窗口并同时运行 javascript？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-07T23:50:32.917

ModalPopupExtender 修改您告诉它为“触发器”元素的按钮/超链接。我在显示弹出窗口之前添加触发器的 onclick 脚本。我希望在显示弹出窗口后触发脚本。

此外，仍然给我留下了从服务器端显示模式的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-01-27T00:34:17.417

如果您使用 css (display:none;) 隐藏它，TinyMCE 将在不可见的文本框上工作您在 TargetControlID 上创建一个“onclick”事件，用于 init TinyMCE，如果您还使用更新面板

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-10T00:50:38.103

```
var launch = false;

function launchModal() {
    launch = true;
}

function pageLoad() {
    if (launch) {
          var ModalPedimento = $find('ModalPopupExtender_Pedimento');
          ModalPedimento.show();
          ModalPedimento.add_shown(SetFocus);
    }
}

function SetFocus() {
    $get('TriggerClientId').focus();
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-10T17:29:18.313

对于两种模态形式：

```
var launch = false;
var NameObject = '';

function launchModal(ModalPopupExtender) {
    launch = true;
    NameObject = ModalPopupExtender;
}

function pageLoad() {
    if (launch) {
        var ModalObject = $find(NameObject);
        ModalObject.show();
        ModalObject.add_shown(SetFocus);
                }
} 

function SetFocus() {
    $get('TriggerClientId').focus();
} 
```

服务器端：behand

```
protected void btnNuevo_Click(object sender, EventArgs e)
{
    //Para recuperar el formulario modal desde el lado del sercidor
    ScriptManager.RegisterStartupScript(Page, Page.GetType(), "key", "<script>launchModal('" + ModalPopupExtender_Factura.ID.ToString() + "');</script>", false);
} 
```

# sharepoint - 仅用于内部访问的 IIS 网站的备用主机名

> ID：5494
> 
> 赞同：3
> 
> 时间：2008-08-07T23:53:55.717
> 
> 标签：sharepoint, iis, moss, wss

我在 Windows 2003 Server 中将 IIS 用于 SharePoint 内部网。
外部传入请求将使用主机标头`portal.mycompany.com`并被迫使用 SSL。

我想知道是否有办法设置备用主机标头，例如
`http://internalportal/`
仅接受来自内部网络的请求，但不强制用户使用 SSL。

关于如何设置的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-15T17:34:38.593

丹尼尔，请记住，仅仅因为 IIS 中的某些东西是可能的，并且通过任意数量的开箱即用解决方案（如硬件负载平衡器和 SSL）并不意味着它受 SharePoint 支持，**或者**它以相同的方式实现.

您可以按照您的要求进行操作，但是您应该通过 SharePoint 管理中心、“创建或扩展 Web 应用程序”以及“扩展和现有应用程序”来完成。

通过这种方式，您可以创建一个**新**网站（在 IIS 中）来访问您现有的 SharePoint Web 应用程序，该应用程序可以通过不同的主机头、端口、使用 SSL、身份验证机制等进行访问。

作为一般规则，如果您可以在 IIS 和 SharePoint 中执行某些操作，那么您应该只在 SharePoint 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-08T00:24:26.297

假设无法从公司外部访问[http://internalportal/](http://internalportal/)，您可以在 IIS 中设置两个网站。第一个站点配置为使用主机头值“portal.mycompany.com”，需要 SSL。第二个站点配置为使用主机头值“internalportal”，不需要 SSL。主机头值在“网站”->“高级”下配置。

拥有一个硬件负载平衡器会让事情变得更容易。负载平衡器上的站点设置为需要 SSL，而您在 IIS 中的网站设置为不需要 SSL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T02:19:37.140

您可以只向站点添加第二个主机头和内部 IP 地址以进行内部非 ssl 访问

```
172.16.3.1:443:portal.mycompany.com
172.16.3.2:80:internalportal 
```

# windows - 学习低级 WinAPI 编程还有意义吗？

> ID：5507
> 
> 赞同：55
> 
> 时间：2008-08-08T00:29:13.963
> 
> 标签：windows, winapi

拥有所有 C# 管理的幸福，回到 Petzold 的编程窗口并尝试使用纯 WinAPI 生成代码是否有意义？

可以从中学到什么？是不是太过时了，没用？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-08-08T01:00:49.203

这个问题与宗教有关：）但无论如何我都会给出我的想法。

我确实看到了学习 Win32 API 的价值。大多数（如果不是全部）GUI 库（托管或非托管）都会调用 Win32 API。即使是最全面的库也不能 100% 覆盖 API，因此总是存在需要通过直接 API 调用或 P/invoking 来填补的空白。API 调用周围的一些包装器名称与底层 API 调用具有相似的名称，但这些名称并不完全是自记录的。因此，了解底层 API 以及其中使用的术语将有助于了解包装 API 及其实际功能。

另外，如果您了解框架使用的底层 API 的性质，那么您将更好地选择在给定场景中应该使用的库功能。

干杯!

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-19T18:37:48.753

在学习 Win32 API 之前，我多年来一直在使用标准 C/C++，而且坦率地说，“学习 Win32 API”部分并不是我一生中最好的技术体验。

一方面，Win32 API 非常酷。它就像 C 标准 API 的扩展（`fopen`当你有`CreateFile`. ，他们有“一切都是……窗口”（不开玩笑！看`CreateWindow`！）。

另一方面，这是一个遗留 API。您将处理原始 C 和原始 C 疯狂。

*   就像通过`void *`指向某个 Win32 函数的指针告诉一个结构自己的大小一样。
*   消息传递也可能非常令人困惑：将 C++ 对象与 Win32 窗口混合会导致非常有趣的[鸡或蛋](http://en.wikipedia.org/wiki/The_chicken_or_the_egg)问题示例（当您在类方法中编写一种时的有趣时刻`delete this ;`）。
*   当您更熟悉对象继承时，必须对 WinProc 进行子类化是令人头疼的并且不是最佳的。
*   当然，还有“*为什么在这个水力压裂的世界里他们会这样做？？* ”的喜悦，当你用你的头敲击你的键盘一次太多，然后带着刻在你额头上的钥匙回家的时候，只是因为有人认为编写一个 API 来更改“窗口”的颜色更合乎逻辑，而不是通过更改其属性之一，而是通过向其父窗口询问它。
*   等等

最后一手（*三手？？？*），考虑一些使用遗留 API 的人自己使用遗留代码样式。当您听到“*`const`傻瓜*”或“*我不使用名称空间，因为它们会降低运行时速度*”或更好的“*嘿，谁需要 C++？我用我自己品牌的面向对象 C 编码！！！ ”（不开玩笑……在专业的环境中，结果是相当的景象……），你会在*[断头台](https://secure.wikimedia.org/wikipedia/en/wiki/Guillotine)前感受到那种只有被谴责的恐惧感。

所以……总而言之，这是一次*有趣*的经历。

## 编辑

重读这篇文章后，我发现它可能被视为过于消极。它不是。

了解事物在幕后的运作方式有时很有趣（也很令人沮丧）。你会明白，尽管有巨大的（不可能的？）限制，Win32 API 团队做了出色的工作，以确保一切，从你的“旧 Win16 程序”到你的“最后一个 Win64 over-the-top 应用程序”，可以一起工作，过去、现在和未来。

问题是：你真的想要吗？

因为花费数周时间来做可以在其他更高级和/或面向对象的 API 中完成（并且做得更好）的事情可能会非常消极（现实生活中的经验：Win API 需要 3 周，而 3 周需要 4 小时其他语言和/或库）。

无论如何，您会发现 Raymond Chen 的博客非常有趣，因为他的内部人士对 Win API 及其多年来的演变的看法：

[https://blogs.msdn.microsoft.com/oldnewthing/](https://blogs.msdn.microsoft.com/oldnewthing/)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-08-08T00:31:04.660

绝对地。当没有人知道低级时，谁来更新和编写高级语言？此外，当您了解低级的东西时，您可以用高级语言编写更高效的代码，也可以更有效地进行调试。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-08-08T00:53:24.663

本机 API 是“真正的”操作系统 API。.NET 库（除了少数例外）只不过是围绕它们的精美包装器。所以，是的，我想说任何能够理解 .NET 及其所有复杂性的人，都可以理解相对平凡的事情，比如在没有中间人帮助的情况下与 API 交谈。

只需尝试从托管代码进行 DLL 注入。这是不可能的。您将被迫为此编写本机代码，用于窗口调整、真正的子类化以及其他许多事情。

所以是的：你应该（必须）知道两者。

编辑：即使您打算使用 P/Invoke。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-08-09T20:27:00.980

假设您正在构建针对 Windows 的应用程序：

*   了解较低级别的系统肯定会提供有用的信息——它们是如何工作的，你的代码如何与它们交互（即使只是间接的），以及在哪些地方你有更高级别抽象中不可用的附加选项
*   有时您的代码可能不够高效、高性能或精确，无法满足您的要求
*   然而，在越来越多的情况下，像我们这样的人（从未学习过“非托管编码”）将能够在不“学习”Win32 的情况下完成我们尝试做的编程。
*   此外，有很多网站提供工作示例、代码片段甚至功能齐全的源代码，您可以“利用”（借用、抄袭 - 但请检查您是否遵守任何重用许可或版权！）来填写在 .NET 框架类库（或您可以下载或许可的库）未处理的任何间隙中。
*   如果你能在不乱用 Win32 的情况下完成你需要的壮举，并且你在开发格式良好、可读的托管代码方面做得很好，那么我会说掌握 .NET 将是一个比分散自己瘦身更好的选择在两个非常不同的环境中。
*   如果您经常需要利用那些尚未获得良好框架类库覆盖的 Windows 功能，那么请务必学习您需要的技能。
*   我个人花了太多时间担心编码的“其他领域”，我*应该*理解这些领域以产生“好程序”，但是那里有很多自虐狂认为每个人的需求和愿望都像他们自己的一样。苦难爱陪伴。:)

假设您正在为“Web 2.0”世界构建应用程序，或者这对 *NIX 和 MacOS 用户同样有用/有益：

*   坚持使用尽可能多的跨平台环境的语言和编译器。
*   Visual Studio 中的纯 .NET 显然优于 Win32，但针对 MONO 库进行开发，或许使用 Sharp Develop IDE，可能是更好的方法。
*   你也可以花时间学习 Java，这些技能会很好地转移到 C# 编程中（加上理论上 Java 代码可以在任何具有匹配 JRE 的平台上运行）。我听说 Java 更像是“一次编写，到处调试”，但这可能与（甚至比）C# 一样正确。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-08-08T01:01:44.457

类比：如果您以制造汽车为生（编程），那么了解引擎的工作原理（Win32）非常相关。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-08-08T01:16:26.580

简单的回答，是的。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-05-29T03:17:49.137

这是任何类似问题的答案。*“即使存在高级语言/api Y，学习低级语言/api X 是否有意义”*

**是的**

您可以启动您的 Windows PC（或任何其他操作系统）并在 SO 中提出这个问题，因为微软的几个人编写了 16 位汇编代码来加载您的操作系统。

您的浏览器可以正常工作，因为有人用 C 语言编写了一个操作系统内核来满足您浏览器的所有请求。

它一直到脚本语言。

无论大小，总有一个市场和机会可以在任何抽象级别上编写一些东西。你只需要喜欢它并适合合适的工作。

任何抽象级别的 api/语言都是无关紧要的**，除非有更好的在同一级别竞争**。

另一种看待它的方式：Michael Abrash 书中的一个很好的例子：AC 程序员的任务是编写一个函数来清除屏幕。由于 C 是对汇编和所有内容的更好（更高级别）的抽象，因此程序员只知道 C 并且非常了解它。他尽了最大的努力——他将光标移动到屏幕上的每个位置并清除那里的角色。他优化了循环并确保它尽可能快地运行。但它仍然很慢......直到有人进来并说有一些 BIOS/VGA 指令或可以立即清除屏幕的东西。

知道你在走什么总是有帮助的。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2009-07-17T06:17:04.070

是的，有几个原因：

1) .net 包装 Win32 代码。.net 通常是一个优秀的编码系统，但是对底层 Win32 层有一些了解（哎呀，现在也有 64 位代码的 WinAPI）可以增强您对实际情况的了解。

2）在这个经济环境下，找工作的时候最好比其他人有一些优势。一些 WinAPI 经验可能会为您提供这一点。

3) 某些系统方面尚无法通过 .net 框架使用，如果您想访问这些功能，您将需要使用 p/invoke（请参阅[http://www.pinvoke.net](http://www.pinvoke.net)以获得那里的一些帮助）。至少有一点 WinAPI 经验将使您的 p/invoke 开发工作更有效率。

4)（添加）现在 Win8 已经出现了一段时间，它*仍然*是建立在 WinAPI 之上的。iOS、Android、OS/X 和 Linux 都已存在，但 WinAPI 仍将存在很多年。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-08-08T01:56:33.723

学习一门新的编程语言或技术是出于以下三个原因之一：
1\. 需要：您正在开始一个构建 Web 应用程序的项目，但您对 ASP.NET 一无所知
2\. 热情：您对ASP.NET MVC。为什么不试试呢？
3\. 空闲时间：但无论如何谁有。

学习新事物的最佳理由是需要。如果您需要做一些 .NET 框架不能做的事情（例如性能），那么 WinAPI 就是您的解决方案。在那之前，我们一直忙于学习 .NET

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-08-08T16:53:50.550

对于桌面上的大多数需求，您不需要了解 Win32，但是有很多 Win32 不在 .NET 中，但它存在于最终可能不到您应用程序的 1% 的支出中。

USB 支持、HID 支持、Windows Media Foundation 就在我的脑海中。有许多很酷的 Vista API 只能从 Win32 获得。

如果您进行桌面编程，学习如何与 Win32 API 进行互操作将对您大有裨益，因为当您确实需要调用 Win32 时，您不会花费数周时间摸索。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-21T13:07:30.423

就我个人而言，我不太喜欢 Win32 API，但学习它是有价值的，因为与 Visual Basic 之类的语言相比，使用 GUI 的 API 将允许更多的控制和效率，我相信如果你打算谋生写作软件即使您不直接使用 API，您也应该知道它。这是出于类似于学习 C 的好处的原因，例如 strcpy 如何比复制整数花费更多时间，或者为什么应该使用指向数组的指针作为函数参数而不是按值排列的数组。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-08-08T00:35:21.720

学习 C 或更低级别的语言绝对是有用的。但是，我没有看到使用非托管 WinAPI 有任何明显优势。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-08-08T00:40:05.453

我见过低级别的 Windows API 代码……它不漂亮……我希望我能忘记它。我认为像 C 一样学习低级是有好处的，因为你可以更好地理解硬件架构以及所有这些东西是如何工作的。学习旧的 Windows API……我认为这些东西可以留给微软的人，他们可能需要学习它来构建更高级别的语言和 API……他们构建了它，让他们受苦 ;-)

然而，如果你碰巧发现一种情况，你觉得你无法用更高级别的语言做你需要做的事情（很少而且很远），那么也许开始危险地潜入那个世界。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-06-11T03:53:11.667

是的。看看 uTorrent，一个惊人的软件效率。它的小尺寸有一半是由于它的大部分核心组件都被重写为不使用 gargatuian 库。

如果不了解这些库如何与较低级别的 API 接口，大部分工作都无法完成

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-08-08T02:21:47.853

了解 Windows API 的可用功能很重要。我认为你不需要用它编写代码，但你应该知道它是如何工作的。.NET Framework 包含许多功能，但它不为整个 Windows API 提供托管代码等效项。有时你必须离金属更近一点，知道下面有什么以及它的行为方式会让你更好地了解如何使用它。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-12T06:20:26.567

这实际上与问题相同，我应该学习像 C （甚至汇编程序）这样的低级语言。

在其中进行编码肯定会更慢（尽管结果当然要快得多），但它的真正优势是您可以深入了解接近系统级别发生的事情，而不仅仅是了解其他人对正在发生的事情的隐喻.

当事情不能很好地工作，或者速度不够快或者你需要的那种粒度时，它也可能会更好。（并且至少做一些子类化和超类化。）

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-26T02:01:45.877

我会这样说。我不喜欢对 Win32 API 进行编程。与托管代码相比，这可能会很痛苦。但是，我很高兴我知道这一点，因为我可以编写否则我无法编写的程序。我可以编写其他人无法编写的程序。此外，它还可以让您更深入地了解托管代码在幕后所做的事情。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-26T03:01:20.087

您从学习 Win32 API 中获得的价值（除了您从了解机器的基本要素如何组合在一起获得的各种一般见解之外）取决于您要实现的目标。许多 Win32 API 已经很好地包装在 .NET 库类中，但不是全部。例如，如果您希望进行一些严肃的音频编程，那么 Win32 API 的那部分将是一个很好的研究主题，因为只有最基本的操作可以从 .NET 类中获得。最后我检查了甚至托管的 DirectX DirectSound 库也很糟糕。

* * *

冒着无耻的自我推销的风险......

我刚刚遇到了 Win32 API 是我唯一选择的情况。我想在列表框中的每个项目上都有不同的工具提示。我在[这个问题](https://stackoverflow.com/questions/192584/how-can-i-set-a-different-tooltip-text-for-each-item-in-a-listbox)上写了我是如何做到的。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-06-28T18:49:44.737

即使在非常高级的语言中，您仍然可以使用 API。为什么？并不是 API 的每个方面都被各种库、框架等复制了。只要您需要 API 来完成您正在尝试做的事情，您就需要学习 API。（不再是。）

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2012-04-23T16:39:30.740

除了需要直接访问 API 的一些非常特殊的情况外，我会说不。

学习正确实现本机 API 调用需要大量时间和精力，而且返回值不值得。我宁愿花时间学习一些新的热门技术或框架，让你的生活更轻松，编程更少痛苦。不是几十年前没有人真正使用过的过时 COM 库（对不起 COM 用户）。

请不要因为这个观点而向我扔石头。我知道这里的很多工程师都非常好奇，学习事物的工作原理并没有错。好奇心是好的，真的有助于理解。但从管理的角度来看，我宁愿花一周时间学习如何开发 Android 应用程序，而不是如何调用 OLE 或 COM。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-06-28T18:59:47.883

如果你打算开发一个跨平台的应用程序，如果你使用win32，那么你的应用程序可以很容易地通过WINE在linux上运行。这导致了一个高度可维护的应用程序。这是学习win32的好处之一。

# memory-leaks - Rational Purify 无法跳转到内存泄漏

> ID：5509
> 
> 赞同：0
> 
> 时间：2008-08-08T00:31:19.823
> 
> 标签：memory-leaks, purify

所以我的公司使用了一个令人愉快的错误程序，称为 Rational Purify（作为 Microsoft Visual Developer Studio 的插件）来管理内存泄漏。该程序旨在让您在遇到内存泄漏后单击它，然后跳转到发生泄漏的行。

不幸的是，Purify 出现故障，Purify 不会跳转到发生泄漏的地方，它只会提及发生泄漏的类和方法。不幸的是，有时这与雇用指南来帮助您狩猎熊并让他指出一样有用去森林告诉你那里有熊。

有 Purify 经验的人知道我该如何解决这个问题或有一本好的手册可以看吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T10:39:03.347

通常，您有两种选择，一种是从 Purify 的检测中排除模块 DLL，它有时会有所帮助。其次是获取 BoundsChecker，这确实编译时检测要慢得多，但详细程度要好一个数量级。

当我们知道存在错误/崩溃时，我们通常在签入、健全性检查和 BoundsChecker 上使用 Purify。

BoundsChecker 有一些不错的功能，比如只有仪器文件 A.cpp 和 B.cpp，不包括其他所有文件。

请注意，这两个应用程序都不能在 64 位操作系统上运行，并且 BoundsChecker 不会安装在 64 位操作系统上。如果您使用 32 位后端端口切换到本机 64 位开发，那将是最令人沮丧的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-22T16:47:30.767

净化就像一把瑞士刀。如果你知道如何使用它，你会得到一些结果，不是最好的，但仍然是结果。如果不这样做，它就会崩溃，因为它只是在 Windows 上运行的另一个程序。

最后，您将需要很大的耐心、重建和一点运气。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-03T15:03:18.097

Purify 带有一个名为 ScanVSSolutionForPurifyPlus.pl 的脚本，它将确保您的项目文件具有所有正确的设置，以使 Purify 正常工作。如果您还没有运行它，请尝试一下。

（我个人在一个大型解决方案上使用过 ScanVSSolutionForPurifyPlus.pl，它的作用就像一个魅力。一个警告：当你给它你的`.sln`文件名时，你可能需要给它完整的路径名。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-08T13:56:40.487

你确定你有调试版本吗？或者更确切地说，您启用了所有 PDB？在您的可执行文件上尝试 WindDbg 并使用 !lmi 命令检查可见内容。

整个代码是否正确检测？

还可以考虑使用其他工具，例如[免费的 Visual Leak Detector](http://www.codeproject.com/KB/applications/visualleakdetector.aspx)或 Microsoft 的工具 LeakDiag。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-08T15:28:26.907

大约 5 年前，我使用了 Purify。那时候真的很牛逼。他们一直承诺修复“下一个版本”中的所有错误。我们最终放弃了它。人们只能想知道他们是否在他们的产品上使用了自己的 QA 工具。哦，讽刺...

# c# - WPF 中的数值数据输入

> ID：5511
> 
> 赞同：66
> 
> 时间：2008-08-08T00:37:55.020
> 
> 标签：c#, wpf

您如何处理 WPF 应用程序中的数值输入？

如果没有 NumericUpDown 控件，我一直在使用 TextBox 并使用下面的代码处理其 PreviewKeyDown 事件，但它非常难看。

有没有人找到一种更优雅的方式来从用户那里获取数字数据而不依赖第三方控件？

```
private void NumericEditPreviewKeyDown(object sender, KeyEventArgs e)
{
    bool isNumPadNumeric = (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9) || e.Key == Key.Decimal;
    bool isNumeric = (e.Key >= Key.D0 && e.Key <= Key.D9) || e.Key == Key.OemPeriod;

    if ((isNumeric || isNumPadNumeric) && Keyboard.Modifiers != ModifierKeys.None)
    {
        e.Handled = true;
        return;
    }

    bool isControl = ((Keyboard.Modifiers != ModifierKeys.None && Keyboard.Modifiers != ModifierKeys.Shift)
        || e.Key == Key.Back || e.Key == Key.Delete || e.Key == Key.Insert
        || e.Key == Key.Down || e.Key == Key.Left || e.Key == Key.Right || e.Key == Key.Up
        || e.Key == Key.Tab
        || e.Key == Key.PageDown || e.Key == Key.PageUp
        || e.Key == Key.Enter || e.Key == Key.Return || e.Key == Key.Escape
        || e.Key == Key.Home || e.Key == Key.End);

    e.Handled = !isControl && !isNumeric && !isNumPadNumeric;
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-08-11T13:47:12.253

怎么样：

```
protected override void OnPreviewTextInput(System.Windows.Input.TextCompositionEventArgs e)
{
    e.Handled = !AreAllValidNumericChars(e.Text);
    base.OnPreviewTextInput(e);
}

private bool AreAllValidNumericChars(string str)
{
    foreach(char c in str)
    {
        if(!Char.IsNumber(c)) return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-12-17T18:43:18.287

我就是这样做的。它使用正则表达式来检查框中的文本是否为数字。

```
Regex NumEx = new Regex(@"^-?\d*\.?\d*$");

private void TextBox_PreviewTextInput(object sender, TextCompositionEventArgs e)
{
    if (sender is TextBox)
    {
        string text = (sender as TextBox).Text + e.Text;
        e.Handled = !NumEx.IsMatch(text);
    }
    else
        throw new NotImplementedException("TextBox_PreviewTextInput Can only Handle TextBoxes");
} 
```

现在在 WPF 和 Silverlight 中有更好的方法来执行此操作。如果您的控件绑定到一个属性，您所要做的就是稍微更改您的绑定语句。使用以下内容进行绑定：

```
<TextBox Text="{Binding Number, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}"/> 
```

请注意，您也可以在自定义属性上使用它，如果框中的值无效并且控件将以红色边框突出显示，您所要做的就是抛出异常。如果单击红色边框的右上角，则会弹出异常消息。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-08-26T13:20:52.643

我一直在使用附加属性来允许用户使用向上和向下键来更改文本框中的值。要使用它，您只需使用

```
<TextBox local:TextBoxNumbers.SingleDelta="1">100</TextBox> 
```

这实际上并没有解决这个问题中提到的验证问题，但它解决了我没有数字上/下控制的问题。使用它一点点，我想我实际上可能比旧的数字向上/向下控件更喜欢它。

代码并不完美，但它处理了我需要它处理的情况：

*   `Up`箭，`Down`箭
*   `Shift + Up`箭，`Shift + Down`箭
*   `Page Up`,`Page Down`
*   绑定`Converter`文本属性

`Code behind`

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Input;

namespace Helpers
{
    public class TextBoxNumbers
    {    
        public static Decimal GetSingleDelta(DependencyObject obj)
        {
            return (Decimal)obj.GetValue(SingleDeltaProperty);
        }

        public static void SetSingleDelta(DependencyObject obj, Decimal value)
        {
            obj.SetValue(SingleDeltaProperty, value);
        }

        // Using a DependencyProperty as the backing store for SingleValue.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty SingleDeltaProperty =
            DependencyProperty.RegisterAttached("SingleDelta", typeof(Decimal), typeof(TextBoxNumbers), new UIPropertyMetadata(0.0m, new PropertyChangedCallback(f)));

        public static void f(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            TextBox t = o as TextBox;

            if (t == null)
                return;

            t.PreviewKeyDown += new System.Windows.Input.KeyEventHandler(t_PreviewKeyDown);
        }

        private static Decimal GetSingleValue(DependencyObject obj)
        {
            return GetSingleDelta(obj);
        }

        private static Decimal GetDoubleValue(DependencyObject obj)
        {
            return GetSingleValue(obj) * 10;
        }

        private static Decimal GetTripleValue(DependencyObject obj)
        {
            return GetSingleValue(obj) * 100;
        }

        static void t_PreviewKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
        {
            TextBox t = sender as TextBox;
            Decimal i;

            if (t == null)
                return;

            if (!Decimal.TryParse(t.Text, out i))
                return;

            switch (e.Key)
            {
                case System.Windows.Input.Key.Up:
                    if (Keyboard.Modifiers == ModifierKeys.Shift)
                        i += GetDoubleValue(t);
                    else
                        i += GetSingleValue(t);
                    break;

                case System.Windows.Input.Key.Down:
                    if (Keyboard.Modifiers == ModifierKeys.Shift)
                        i -= GetDoubleValue(t);
                    else
                        i -= GetSingleValue(t);
                    break;

                case System.Windows.Input.Key.PageUp:
                    i += GetTripleValue(t);
                    break;

                case System.Windows.Input.Key.PageDown:
                    i -= GetTripleValue(t);
                    break;

                default:
                    return;
            }

            if (BindingOperations.IsDataBound(t, TextBox.TextProperty))
            {
                try
                {
                    Binding binding = BindingOperations.GetBinding(t, TextBox.TextProperty);
                    t.Text = (string)binding.Converter.Convert(i, null, binding.ConverterParameter, binding.ConverterCulture);
                }
                catch
                {
                    t.Text = i.ToString();
                }
            }
            else
                t.Text = i.ToString();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2010-05-13T03:02:38.127

我决定使用 LINQ 表达式将此处标记为答案的回复简化为基本上 2 行。

```
e.Handled = !e.Text.All(Char.IsNumber);
base.OnPreviewTextInput(e); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-04-05T02:10:35.127

为什么不尝试使用 KeyDown 事件而不是 PreviewKeyDown 事件。您可以在那里停止无效字符，但接受所有控制字符。这似乎对我有用：

```
private void NumericKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
{
    bool isNumPadNumeric = (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9);
    bool isNumeric =((e.Key >= Key.D0 && e.Key <= Key.D9) && (e.KeyboardDevice.Modifiers == ModifierKeys.None));
    bool isDecimal = ((e.Key == Key.OemPeriod || e.Key == Key.Decimal) && (((TextBox)sender).Text.IndexOf('.') < 0));
    e.Handled = !(isNumPadNumeric || isNumeric || isDecimal);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-01-25T05:33:47.673

我使用自定义`ValidationRule`来检查文本是否为数字。

```
public class DoubleValidation : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        if (value is string)
        {
            double number;
            if (!Double.TryParse((value as string), out number))
                return new ValidationResult(false, "Please enter a valid number");
        }

        return ValidationResult.ValidResult;
    } 
```

然后，当我将 a 绑定`TextBox`到数字属性时，我将新的自定义类添加到`Binding.ValidationRules`集合中。在下面的示例中，每次`TextBox.Text`更改时都会检查验证规则。

```
<TextBox>
    <TextBox.Text>
        <Binding Path="MyNumericProperty" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:DoubleValidation/>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-04-20T06:47:01.890

```
public class NumericTextBox : TextBox
{
    public NumericTextBox()
        : base()
    {
        DataObject.AddPastingHandler(this, new DataObjectPastingEventHandler(CheckPasteFormat));
    }

    private Boolean CheckFormat(string text)
    {
        short val;
        return Int16.TryParse(text, out val);
    }

    private void CheckPasteFormat(object sender, DataObjectPastingEventArgs e)
    {
        var isText = e.SourceDataObject.GetDataPresent(System.Windows.DataFormats.Text, true);

        if (isText)
        {
            var text = e.SourceDataObject.GetData(DataFormats.Text) as string;
            if (CheckFormat(text))
            {
                return;
            }
        }

        e.CancelCommand();
    }

    protected override void OnPreviewTextInput(System.Windows.Input.TextCompositionEventArgs e)
    {
        if (!CheckFormat(e.Text))
        {
            e.Handled = true;
        }
        else
        {
            base.OnPreviewTextInput(e);
        }
    }
} 
```

此外，您可以通过提供适当的依赖属性来自定义解析行为。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-29T07:02:26.503

结合其中一些答案的想法，我创建了一个 NumericTextBox

*   处理小数
*   进行一些基本验证以确保任何输入的“-”或“。” 已验证
*   处理粘贴的值

如果您能想到应该包含的任何其他逻辑，请随时更新。

```
public class NumericTextBox : TextBox
{
    public NumericTextBox()
    {
        DataObject.AddPastingHandler(this, OnPaste);
    }

    private void OnPaste(object sender, DataObjectPastingEventArgs dataObjectPastingEventArgs)
    {
        var isText = dataObjectPastingEventArgs.SourceDataObject.GetDataPresent(System.Windows.DataFormats.Text, true);

        if (isText)
        {
            var text = dataObjectPastingEventArgs.SourceDataObject.GetData(DataFormats.Text) as string;
            if (IsTextValid(text))
            {
                return;
            }
        }

        dataObjectPastingEventArgs.CancelCommand();
    }

    private bool IsTextValid(string enteredText)
    {
        if (!enteredText.All(c => Char.IsNumber(c) || c == '.' || c == '-'))
        {
            return false;
        }

        //We only validation against unselected text since the selected text will be replaced by the entered text
        var unselectedText = this.Text.Remove(SelectionStart, SelectionLength);

        if (enteredText == "." && unselectedText.Contains("."))
        {
            return false;
        }

        if (enteredText == "-" && unselectedText.Length > 0)
        {
            return false;
        }

        return true;
    }

    protected override void OnPreviewTextInput(System.Windows.Input.TextCompositionEventArgs e)
    {
        e.Handled = !IsTextValid(e.Text);
        base.OnPreviewTextInput(e);
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-12T05:14:52.347

如果用户在您使用数据之前提交数据，您也可以尝试使用数据验证。我发现这样做比摆弄钥匙相当简单和干净。

否则，您也可以随时禁用粘贴！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-05-04T10:35:57.733

将此添加到主解决方案中，以确保在清除文本框时绑定更新为零。

```
protected override void OnPreviewKeyUp(System.Windows.Input.KeyEventArgs e)
{
    base.OnPreviewKeyUp(e);

    if (BindingOperations.IsDataBound(this, TextBox.TextProperty))
    {
        if (this.Text.Length == 0)
        {
            this.SetValue(TextBox.TextProperty, "0");
            this.SelectAll();
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-02-03T17:47:58.597

我的[Arcturus](https://stackoverflow.com/questions/5511/numeric-data-entry-in-wpf/7794#7794)答案版本，可以更改用于使用 int / uint / decimal / byte（用于颜色）或您喜欢使用的任何其他数字格式的转换方法，也适用于复制/粘贴

```
protected override void OnPreviewTextInput( System.Windows.Input.TextCompositionEventArgs e )
{
    try
    {
        if ( String.IsNullOrEmpty( SelectedText ) )
        {
            Convert.ToDecimal( this.Text.Insert( this.CaretIndex, e.Text ) );
        }
        else
        {
            Convert.ToDecimal( this.Text.Remove( this.SelectionStart, this.SelectionLength ).Insert( this.SelectionStart, e.Text ) );
        }
    }
    catch
    {
        // mark as handled if cannot convert string to decimal
        e.Handled = true;
    }

    base.OnPreviewTextInput( e );
} 
```

注意未经测试的代码。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-08T17:27:04.073

说我疯了，但是为什么不在 TextBox 控件的任一侧放置加号和减号按钮并简单地阻止 TextBox 接收光标焦点，从而创建您自己的廉价 NumericUpDown 控件？

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-11T22:13:11.153

您不能只使用以下内容吗？

```
int numericValue = 0;

if (false == int.TryParse(yourInput, out numericValue))
{
    // handle non-numeric input
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-18T15:40:15.910

```
private void txtNumericValue_PreviewKeyDown(object sender, KeyEventArgs e)
{
    KeyConverter converter = new KeyConverter();

    string key = converter.ConvertToString(e.Key);

    if (key != null && key.Length == 1)
    {
        e.Handled = Char.IsDigit(key[0]) == false;
    }
} 
```

这是我发现的最简单的技术来实现这一点。不利的一面是 TextBox 的上下文菜单仍然允许通过粘贴来输入非数字。为了快速解决这个问题，我简单地将属性/属性： ContextMenu="{x:Null}" 添加到 TextBox 从而禁用它。不理想，但对于我的场景就足够了。

显然，您可以在测试中添加更多的键/字符以包含其他可接受的值（例如，'.'、'$' 等......）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-01-23T11:26:35.977

```
Private Sub Value1TextBox_PreviewTextInput(ByVal sender As Object, ByVal e As TextCompositionEventArgs) Handles Value1TextBox.PreviewTextInput
    Try
        If Not IsNumeric(e.Text) Then
            e.Handled = True
        End If
    Catch ex As Exception
    End Try
End Sub 
```

为我工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-01-29T22:55:52.970

```
void PreviewTextInputHandler(object sender, TextCompositionEventArgs e)
{
    string sVal = e.Text;
    int val = 0;

    if (sVal != null && sVal.Length > 0)
    {
        if (int.TryParse(sVal, out val))
        {
            e.Handled = false;
        }
        else
        {
            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-08-08T05:14:09.840

**也可以使用转换器，例如：**

```
public class IntegerFormatConverter : IValueConverter
{
    public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        int result;
        int.TryParse(value.ToString(), out result);
        return result;
    }

    public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        int result;
        int.TryParse(value.ToString(), out result);
        return result;
    }
} 
```

# java - 使用 J# 有真正的好处吗？

> ID：5527
> 
> 赞同：26
> 
> 时间：2008-08-08T01:04:02.300
> 
> 标签：java, j#

我刚刚看到一条[建议 J# 的评论，](https://stackoverflow.com/questions/5516/what-happened-to-all-of-the-java-developers-how-can-i-get-started-in-net#5522)这让我想知道...... J# 是否比 Java 真正有益地使用？所以，我的感觉是，你甚至会考虑使用 J# 的唯一原因是管理层已经下令公司应该加入 Java 潮流……和 .NET 潮流。如果您使用 J#，您实际上将失去选择 Java 的最大好处……丰富的跨平台支持。当然有 Mono，但它没有得到丰富的支持或功能齐全，对吧？我记得听说表格不完全（也许完全）支持。

我不想在这里抨击 .NET，我只是说，如果你打算走微软路线，为什么不直接使用 C#？如果你打算走 Java 路线，为什么 J# 会进入画面？

我希望在这里找到一些真实世界的案例，所以如果您在真实项目中实际使用过 J#，请特别回复，以及为什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-08T01:11:58.680

J# 不再包含在 VS2008 中。除非您已经拥有 J# 代码，否则您应该远离。

从[j# 产品页面：](http://msdn.microsoft.com/en-us/vjsharp/default.aspx)

> 由于客户告诉我们现有的 J# 功能集在很大程度上满足了他们的需求并且 J# 的使用量正在下降，Microsoft 将停用 Visual J# 产品和 Java 语言转换助手工具，以便更好地为其他客户需求分配资源。J# 语言和 JLCA 工具将在 Visual Studio 的未来版本中不可用。为了保护现有客户对 J# 的投资，Microsoft 将根据我们的产品生命周期战略，继续支持 Visual Studio 2005 到 2015 年随附的 J# 和 JLCA 技术。有关详细信息，请参阅针对业务和开发产品的扩展 Microsoft 支持生命周期策略。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-08T01:19:01.427

J# 的全部目的是简化 Java 开发人员向 .NET 环境的过渡，而 .NET 环境运行得不太好（我猜这里），所以微软从 Visual Studio 2008 中删除了 J#。对于你的问题，“有没有真正的好处使用 J#？”.. 简而言之......不......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-11T05:56:14.730

而不是 J#，我更喜欢 IKVM ( [http://www.ikvm.net/](http://www.ikvm.net/) ) 将我的 JAR 转换为 .NET 程序集以及访问 C# 中的 Java API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-08T01:21:02.110

过去我发现 J# 的一个杀手锏是没有对引用 Web 服务的内置支持。从那以后，仅这一点就足以阻止我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-08T04:22:32.913

C# 语法非常接近 Java（并且在某些方面更好），因此您不妨学习 C# 而不是 J#。而且由于 C# 使用更广泛，您可以在 google 上轻松找到 Java --> C# 教程或查看[http://www.asp.net/learn](http://www.asp.net/learn)并观看一些视频。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-27T01:07:40.133

我认为这不是哪种语言更好的问题。在 .NET 世界中，不同语言提供的库之间存在一些不一致。VB.NET 中提供了某些功能，您可能希望从 C# 中使用这些功能，但不能。我记得我必须使用 J# 来使用 .NET 中任何其他语言都不可用的一些 ZIP 库。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-12T20:27:48.340

我使用 J# 作为将 java 库移植到 C# 的简单中间步骤。它是一种将我不打算维护的代码从 Java 移植到 .Net 的好方法。但是，所有新的开发都是在 C# 中完成的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-19T19:07:43.007

强烈同意 C# 在语法上胜过 Java，所以真的没有理由为 j# 的消亡而悲叹。现在尝试将 c# 编译为 Java 字节码可能是一个有趣的举动，因为 Sun 的热点 jvm 是很棒的软件。

或者，对于可能成为下一代 Java 的东西有点乐趣，[CLR 上的 Scala](http://www.scala-lang.org/node/168)怎么样......

# asp.net-mvc - 在 ASP.NET MVC 中，使用正确的类型化对象呈现用户控件时遇到类型错误

> ID：5544
> 
> 赞同：4
> 
> 时间：2008-08-08T01:31:21.963
> 
> 标签：asp.net-mvc

我遇到以下形式的错误：“传递到字典中的模型项的类型为 FooViewData，但此字典需要 bar 类型的模型项”，即使我为键入的用户传入了正确类型（bar）的对象控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T11:31:39.730

@MattMitchell 所说的可能是您看到此错误的原因。

如果你想知道*为什么*；这是因为当您在使用 RenderUserControl() 时将 null 作为 controlData 参数传递时，框架将尝试将视图数据从当前视图上下文传递到用户控件（参见 System.Web.Mvc 中的 UserControlExtensions.DoRendering 方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-08T01:32:05.567

可能发生的是在呈现用户控件时提供的对象实际上是空的。

# web-services - 基于文档或 RPC 的 Web 服务

> ID：5598
> 
> 赞同：19
> 
> 时间：2008-08-08T02:42:48.887
> 
> 标签：web-services, rest, wsdl

我的直觉是在实践中首选基于文档的 Web 服务——这是其他人的经验吗？他们更容易支持吗？（我注意到 SharePoint 在其 WSDL 接口中使用 Any 作为“文档类型”，我猜这使它基于文档）。

另外 - 人们现在是否为相同的功能同时提供 WSDL 和 Rest 类型的服务？WSDL 在代码生成方面很受欢迎，但对于 PHP 和 Rails 等前端，它们似乎更喜欢休息。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-08-08T15:55:58.517

[仅当您使用需要服务描述 ( WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language) )的 SOAP Web 服务时，文档与 RPC 才是一个问题。RESTful Web 服务不使用 WSDL，因为服务不能用它来描述，感觉就是 REST 更简单，更容易理解。有人提出[WADL](http://en.wikipedia.org/wiki/Web_Application_Description_Language)作为描述 REST 服务的一种方式。

Python、Ruby 和 PHP 等语言使使用 REST 变得更容易。WSDL 用于生成可以从静态语言轻松调用的 C# 代码（Web 服务代理）。在 Visual Studio 中添加*服务引用*或*Web 引用时会发生这种情况。*

您是否提供 SOAP 或 REST 服务取决于您的用户群。这些服务是通过 Internet 使用还是仅在您的组织内部使用会影响您的选择。SOAP 可能有一些非常适合 B2B 或内部使用的特性（WS-* 标准），但对于 Internet 服务来说却很糟糕。

[这篇IBM DevelopWorks 文章](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)中描述了 SOAP 服务的文档/文字与 RPC 。就互操作性（Java 到 .NET 等）而言，文档/文字通常被认为是最适合使用的。至于是否更容易支持，这取决于您的情况。我个人的观点是，人们倾向于让这些东西变得比它需要的更复杂，而 REST 更简单的方法更胜一筹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-05T11:19:26.520

如前所述，最好尽可能选择 Document Literal 而不是 RPC 编码。确实，旧的 Java 库（Axis1、Glue 和其他史前的东西）仅支持 RPC 编码，但是在当今最现代的 Java SOAP 库中不支持它（例如 AXIS2、XFire、CXF）。因此，只有在您知道需要处理无法做得更好的消费者时，才尝试公开 RPC 编码的服务。但话又说回来，也许只有 XML RPC 可以帮助这些遗留实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-12T17:01:44.543

BiranLy 的回答非常好。我想补充一点，document-vs-RPC 也可以归结为实现问题。我们发现微软更喜欢文档，而我们基于 Java 的库是基于 RPC 的。无论您选择什么，请确保您知道其他潜在客户也会假设什么。

# sql-server - 没有主键的表

> ID：5600
> 
> 赞同：41
> 
> 时间：2008-08-08T02:47:15.620
> 
> 标签：sql-server, indexing

我有几个表，其唯一的唯一数据是唯一标识符（Guid）列。因为 guid 是非顺序的（并且它们是客户端生成的，所以我不能使用 newsequentialid()），所以我在这个 ID 字段上创建了一个非主索引、非聚集索引，而不是给表一个聚集主索引钥匙。

我想知道这种方法对性能的影响是什么。我见过一些人建议表应该有一个自动递增（“身份”）int作为集群主键，即使它没有任何意义，因为这意味着数据库引擎本身可以使用该值快速查找一行，而不必使用书签。

我的数据库在一堆服务器上进行了合并复制，所以我避开了 identity int 列，因为它们在复制中有点麻烦。

你怎么认为？表应该有主键吗？或者，如果没有合理的列以这种方式建立索引，那么没有任何聚集索引是否可以？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-08-08T03:04:29.047

在处理索引时，您必须确定您的表将用于什么。如果您主要是每秒插入 1000 行而不进行任何查询，那么聚集索引会影响性能。如果您每秒执行 1000 次查询，那么没有索引将导致性能非常差。尝试调整查询/索引时，最好的办法是使用 SQL Server 中的查询计划分析器和 SQL 探查器。这将向您显示您在哪里遇到了代价高昂的表扫描或其他性能障碍。

至于 GUID 与 ID 的争论，你可以在网上找到同时发誓的人。我一直被教导要使用 GUID，除非我有充分的理由不这样做。Jeff 有一篇很好的文章讨论了使用 GUID 的原因：[https](https://blog.codinghorror.com/primary-keys-ids-versus-guids/) ://blog.codinghorror.com/primary-keys-ids-versus-guids/ 。

与大多数与开发相关的事情一样，如果您希望提高性能，那么没有一个单一的正确答案。这实际上取决于您要完成的工作以及您如何实施解决方案。唯一真正的答案是针对性能指标进行测试、测试和再次测试，以确保您实现目标。

[编辑] @Matt，在对 GUID/ID 辩论进行了更多研究之后，我发现了这篇文章。就像我之前提到的，没有正确或错误的答案。这取决于您的具体实施需求。但这些是使用 GUID 作为主键的一些非常正当的理由：

> 例如，有一个称为“热点”的问题，其中表中的某些数据页面处于相对较高的货币争用状态。基本上，发生的情况是表上的大部分流量（以及因此页级锁）发生在表的一小块区域，接近末尾。新记录总是会转到这个热点，因为 IDENTITY 是一个序列号生成器。这些插入很麻烦，因为它们需要在它们添加到的页面（热点）上进行排他性页面锁定。由于页面锁定机制，这有效地将所有插入序列化到表中。另一方面，NewID() 不受热点的影响。使用 NewID() 函数生成的值仅对于短时间的插入是连续的（函数被非常快速地调用，例如在多行插入期间），
> 
> 此外，由于插入是随机分布的，因此页面拆分的可能性大大降低。虽然页面拆分在这里并没有太糟糕，但效果确实很快就会增加。使用 IDENTITY，页面填充因子作为一种调整机制非常无用，最好设置为 100% - 行将永远不会插入到最后一个页面之外的任何页面中。使用 NewID()，您实际上可以将填充因子用作提高性能的工具。您可以将填充因子设置为近似于索引重建之间的估计卷增长的水平，然后使用 dbcc reindex 在非高峰时段安排重建。这有效地将页面拆分的性能影响延迟到非高峰时间。
> 
> 如果您甚至*认为*您可能需要为有问题的表启用复制 - 那么您不妨将 PK 设为唯一标识符并将 guid 字段标记为 ROWGUIDCOL。复制将需要具有此属性的唯一值 guid 字段，如果不存在，它将添加一个。如果存在合适的字段，那么它将只使用那里的那个。
> 
> 使用 PK 的 GUID 的另一个巨大好处是，该值确实保证是唯一的——不仅在*此*服务器生成的所有值中，而且在*所有*计算机生成的所有值中——无论是您的数据库服务器、Web 服务器、应用程序服务器，或客户端计算机。现在几乎每一种现代语言都具有生成有效 guid 的能力——在 .NET 中，您可以使用 System.Guid.NewGuid。这在处理缓存的主从数据集时非常方便。您不必使用疯狂的临时键控方案来在提交记录之前将它们关联起来。您只需在创建记录时为每个新记录的永久键值从操作系统获取一个完全有效的新 Guid。
> 
> [http://forums.asp.net/t/264350.aspx](http://forums.asp.net/t/264350.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-08T03:04:55.037

主键有三个用途：

*   表示列应该是唯一的
*   表示列应该是非空的
*   记录这是行的唯一标识符的意图

正如您已经完成的那样，可以通过多种方式指定前两个。

第三个理由很好：

*   为人类，所以他们可以很容易地看到你的意图
*   对于计算机，因此可能会比较或以其他方式处理您的表的程序可以查询数据库以获取表的主键。

主键不必是自动递增的数字字段，所以我想说将您的 guid 列指定为主键是个好主意。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-08-05T04:51:00.373

只是跳进去，因为马特有点引诱我。

您需要了解，虽然聚集索引默认放在表的主键上，但这两个概念是分开的，应该分开考虑。CIX 指示 NCIX 存储和引用数据的方式，而 PK 为每一行提供唯一性以满足表的逻辑要求。

没有 CIX 的表只是一个堆。没有 PK 的表通常被认为是“不是表”。最好分别了解 PK 和 CIX 概念，以便您在数据库设计中做出明智的决策。

抢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-03-19T18:17:12.213

没有人回答实际问题：没有 PK 或 CLUSTERED 索引的表的优点/缺点是什么。在我看来，如果您优化更快的插入（尤其是增量批量插入，例如当您将数据批量加载到非空表中时），这样的表：没有聚集索引，没有约束，没有外键，没有默认值和在具有简单恢复模型的数据库中，没有主键是最好的。现在，如果您想查询此表（而不是完整地扫描它），您可能需要根据需要添加一个非聚集的非唯一索引，但将它们保持在最低限度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-08T03:00:36.810

我也一直听说有一个自动递增的 int 对性能有好处，即使你实际上并没有使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-08T06:25:50.030

主键不必是自动递增字段，在许多情况下，这只是意味着您正在使表结构复杂化。

相反，主键应该是唯一标识元组的最小属性集合（请注意，大多数 DBMS 将允许复合主键）。

用技术术语来说，它应该是元组中所有其他字段在功能上完全依赖的字段。（如果不是，您可能需要正常化）。

在实践中，性能问题可能意味着您合并表并使用递增字段，但我似乎记得过早优化是邪恶的......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-03T18:20:12.173

由于您正在进行复制，因此您的正确身份是需要清除的。我会让你的 GUID 成为主键，但不是聚集的，因为你不能使用 newsequentialid。这让我觉得你最好的课程。如果你不把它做成一个PK，而是在它上面加上一个唯一的索引，迟早可能会导致维护系统的人不理解FK关系正确引入错误。

# http - Emacs 的 HTTP 库

> ID：5605
> 
> 赞同：3
> 
> 时间：2008-08-08T03:02:36.367
> 
> 标签：http, emacs

我最近在 emacs 中发现了 org-mode，它对我来说效果很好。我也喜欢 www.RememberTheMilk.com。我希望能够同步我的组织模式文件和 RTM 列表。我知道 RTM 将其 API 公开为 Web 服务。我目前正在寻找可用于编写脚本的 HTTP 库。我找到了几个链接，但我仍然不完全满意。

[http://www.koders.com/lisp/fidB46CCCA8D57FBD093BAF6E08289CFB4DA7624B2B.aspx?s=TV+](http://www.koders.com/lisp/fidB46CCCA8D57FBD093BAF6E08289CFB4DA7624B2B.aspx?s=TV+Raman) [拉曼 http://www.emacswiki.org/cgi-bin/wiki/http-post-simple.el](http://www.emacswiki.org/cgi-bin/wiki/http-post-simple.el)

与 emacs 进行 Web 服务交互的任何指针都将非常有用。另外请记住，我不是经验丰富的 emacs 专家。我已经打破了 emacs 的最初障碍，并且可以在 elisp 中找到自己的方法。所以，温柔点。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-08T16:24:48.020

Emacs 附带 url.el 和 url-http.el。尽管 http-get.el、http-post.el 和 http-cookies.el 现在很流行。这是您可以从中获取它的 GitHub 链接。

[http://github.com/wfarr/dotfiles/tree/master/.elisp](http://github.com/wfarr/dotfiles/tree/master/.elisp)

也欢迎任何其他建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-18T19:55:57.653

如果我要解决这个问题，我会使用[Pymacs](http://pymacs.progiciels-bpi.ca/)将 Emacs 连接到 Python，然后使用现有的[Python API 工具包](http://repo.or.cz/w/pyrtm.git)来记住牛奶。为什么要自己重新实现所有 HTTP crud？

# php - 更好的随机生成 PHP

> ID：5611
> 
> 赞同：22
> 
> 时间：2008-08-08T03:18:56.397
> 
> 标签：php, security, random

我知道`rand()`，如果您知道自己在做什么，并且可以访问服务器，那么使用是可以预测的。

我有一个项目**高度**依赖于选择一个尽可能不可预测的随机数。*所以我正在寻找可以生成更好*随机数的建议，无论是其他内置函数还是用户函数。

我用它做了一个小测试：

```
$i = 0;

while($i < 10000){
    $rand = rand(0, 100);

    if(!isset($array[$rand])){
        $array[$rand] = 1;
    } else {
        $array[$rand]++;
    }

    sort($array);
    $i++;
} 
```

我发现结果是均匀分布的，每个数字的生成次数有一个奇怪的模式。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-08T11:48:42.400

添加、相乘或截断较差的随机源会给您带来较差的随机结果。有关解释，请参阅[随机性和随机数简介](http://random.org/randomness/)。

你对 PHP rand() 函数是正确的。请参阅[统计分析](http://random.org/analysis/)中的第二张图以获取醒目的说明。（第一个数字很引人注目，但它是由 Scott Adams 绘制的，不是用 rand() 绘制的）。

一种解决方案是使用真正的随机生成器，例如[random.org](http://random.org/integers/)。另一个，如果你在 Linux/BSD/etc 上。是使用[/dev/random](http://en.wikipedia.org/wiki/Urandom)。如果随机性是关键任务，您将不得不使用[硬件随机生成器](http://en.wikipedia.org/wiki/Hardware_random_number_generator)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-08T12:27:05.817

[random.org](http://random.org/clients/http/)有一个可以通过 HTTP 访问的 API。

> RANDOM.ORG 是一个真正的随机数服务，它通过大气噪​​声产生随机性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-08T20:09:42.217

我会警惕随机性的印象：有很多实验人们会选择随机性较小的分布。大脑似乎不太擅长产生或估计随机性。

[Fourmilab](http://www.fourmilab.ch/hotbits/)有关于随机性的好文章，包括另一个[真正的随机生成器](https://www.fourmilab.ch/hotbits/secure_generate.html)。也许您可以从两个站点获取随机数据，因此如果一个站点出现故障，您仍然拥有另一个站点。

Fourmilab 还提供了一个[测试程序](http://www.fourmilab.ch/random/)来检查随机性。您可以使用它来检查您的各种 myRand() 程序。

至于你上一个程序，如果你生成 10000 个值，为什么不从 10000 个中选择最终值？您将自己限制在一个子集中。此外，如果您的 $min 和 $max 大于 10000，它将不起作用。

无论如何，您需要的随机性取决于您的应用程序。rand() 可以用于在线游戏，但不能用于密码学（任何未经统计程序彻底测试的东西都不适用于密码学）。你当法官！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-08T04:48:14.203

@KG 的变化，使用自 EPOCH 以来的毫秒作为 rand 的种子？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-18T08:59:40.600

另一种获取随机数的方法，在概念上类似于获取 UUID

PHP 5.3 及以上版本

```
openssl_random_pseudo_bytes(...) 
```

或者您可以使用 RFC4122尝试以下[库](https://github.com/ramsey/uuid)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-16T03:27:28.700

一个新的[PHP7](https://wiki.php.net/rfc/easy_userland_csprng)有一个函数可以完全满足您的需要：它生成[加密安全的伪随机整数。](http://php.net/manual/en/function.random-int.php)

```
int random_int ( int $min , int $max ) 
```

> 生成适用于无偏结果至关重要的加密随机整数（即洗牌扑克牌组）。

有关 PRNG 和 CSPRNG（及其区别）的更详细解释以及为什么您的原始方法实际上是一个坏主意，请阅读我的[另一个高度相似的答案](https://stackoverflow.com/a/31443898/1090562)。

# ajax - 调试：IE6 + SSL + AJAX + post form = 404 错误

> ID：5619
> 
> 赞同：6
> 
> 时间：2008-08-08T03:38:57.747
> 
> 标签：ajax, debugging, internet-explorer, ssl, internet-explorer-6

**设置：**
有问题的程序尝试通过 AJAX 调用将表单数据发布到与调用者相同的包中包含的目标过程。这是为使用安全连接 (HTTPS) 的站点完成的。这里使用的技术是[PLSQL](http://www.orafaq.com/wiki/PL/SQL_FAQ)和[DOJO](http://dojotoolkit.org/) JavaScript 库。该开发工具[基本上是一个文本编辑器](http://www.allroundautomations.nl/plsqldev.html)。

**代码片段：**

```
> function testPost() {  
>>    dojo.xhrPost( {  
             url: ''dr_tm_w_0120.test_post'',  
             form: ''orgForm'',  
             load: testPostXHRCallback,  
             error: testPostXHRError  
            });  
      }  

> function testPostXHRCallback(data,ioArgs) {  
>>          alert(''post callback'');  
          try{  
          dojo.byId("messageDiv").innerHTML = data;  
          }  
          catch(ex){  
                if(ex.name == "TypeError")  
                {  
                  alert("A type error occurred.");  
                }  
          }   
          return data;  
       }         
> 
function testPostXHRError(data, ioArgs) {    
>>          alert(data);  
          alert(''Error when retrieving data from the server!'');  
          return data;  
       } 
```

**问题：**
当使用 IE6（整个用户群都使用）时，从服务器发回的响应是 404 错误。

**观察：**
该程序在 Firefox 中运行良好。
调用过程不能针对同一包中的任何过程。
调用过程可以针对外部站点（http、https）。
包中不是表单数据帖子的其他 AJAX 调用工作正常。
我搜索了*互联网*并咨询了高级技能的团队成员，并没有发现任何令人满意的解决问题的方法。*在 Dojo 支持论坛上
尝试过[问答。](http://dojotoolkit.org/forum/dojo-core-dojo-0-9/dojo-core-support/xhrpost-firefox-fine-ie-not-so-much)

**问题：**
您推荐哪些故障排除技术？
对于 HTTPS 分析，您推荐哪些故障排除工具？
关于问题可能是什么的任何假设？
对于不是完全（坏）黑客的解决方法有什么想法吗？

**埃德。解决方案**
lomaxx，感谢[提琴手](http://www.orafaq.com/wiki/PL/SQL_FAQ)提示。您不知道获得它并将其用作调试工具有多棒。启动后，这是我发现的以及我如何修复它（至少在短期内）：

```
> ef Fri, 8 Aug 2008 14:01:26 GMT dr_tm_w_0120.test_post: SIGNATURE (parameter names) MISMATCH VARIABLES IN FORM NOT IN PROCEDURE: SO1_DISPLAYED_,PO1_DISPLAYED_,RWA2_DISPLAYED_,DD1_DISPLAYED_ NON-DEFAULT VARIABLES IN PROCEDURE NOT IN FORM: 0 
```

在看到来自服务器的消息后，我又在 Fiddler 周围踢了一脚，看看我还能从中学到什么。发现有一个 WebForms 选项卡显示了 Web 表单中的值。你不知道吗，`xxx_DISPLAYED_`上面的“”字段就在里面。

我还不明白为什么这些字段存在，因为我没有在 Web`PLSQL`代码中明确创建它们。但我现在确实明白目标过程必须将它们作为参数包含在内才能正常工作。同样，这仅适用于`IE6`我，因为 Firefox 运行良好。

好吧，这是短期的答案并破解它来修复它。希望在这个领域做更多的工作能够更好地理解这里的基本原理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-08T03:47:22.703

第一个调用端口是启动[Fiddler](http://www.fiddlertool.com/fiddler/)并分析进出浏览器的数据。

看看标头、实际调用的 url 和传递给 AJAX 方法的参数（如果有的话），看看在到达服务器之前是否一切正常。

如果看起来一切正常，有什么方法可以通过日志记录或 AJAX 方法中的跟踪来验证它实际上是在访问服务器吗？

ed：我会尝试的另一件事是构建一个测试页面，以使用基于非 ajax 的调用在服务器上调用 AJAX 方法，并分析 fiddler 中的流量并比较两者。

# asp.net-mvc - 有没有办法在使用 Asp.Net MVC ActionLink、RedirectToAction 等时包含片段标识符？

> ID：5628
> 
> 赞同：22
> 
> 时间：2008-08-08T03:54:08.090
> 
> 标签：asp.net-mvc

我希望一些链接包含片段标识符。就像这个网站上的一些网址：

[调试：IE6 + SSL + AJAX + post form = 404 错误](https://stackoverflow.com/questions/5619/ie6-ssl-ajax-post-form-404-error)**#5626**

有没有办法使用 MVC 中的任何内置方法来做到这一点？还是我必须推出自己的 HTML 助手？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-08-06T22:40:50.353

正如 Brad Wilson 所写，您可以通过简单地连接字符串在视图中构建自己的链接。但是要将片段名称附加到通过 RedirectToAction （或类似的）生成的重定向中，您需要以下内容：

```
public class RedirectToRouteResultEx : RedirectToRouteResult {

    public RedirectToRouteResultEx(RouteValueDictionary values)
        : base(values) {
    }

    public RedirectToRouteResultEx(string routeName, RouteValueDictionary values)
        : base(routeName, values) {
    }

    public override void ExecuteResult(ControllerContext context) {
        var destination = new StringBuilder();

        var helper = new UrlHelper(context.RequestContext);
        destination.Append(helper.RouteUrl(RouteName, RouteValues));

        //Add href fragment if set
        if (!string.IsNullOrEmpty(Fragment)) {
            destination.AppendFormat("#{0}", Fragment);
        }

        context.HttpContext.Response.Redirect(destination.ToString(), false);
    }

    public string Fragment { get; set; }
}

public static class RedirectToRouteResultExtensions {
    public static RedirectToRouteResultEx AddFragment(this RedirectToRouteResult result, string fragment) {
        return new RedirectToRouteResultEx(result.RouteName, result.RouteValues) {
            Fragment = fragment
        };
    }
} 
```

然后，在您的控制器中，您将调用：

```
return RedirectToAction("MyAction", "MyController")
       .AddFragment("fragment-name"); 
```

那应该正确生成 URL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-27T16:18:45.187

我们正在考虑在下一个版本中包含对此的支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-08-25T16:26:25.707

在 MVC3 中（可能之前我还没有检查过），您可以使用 UrlHelper.GenerateUrl 传入片段参数。这是我用来包装功能的辅助方法L

```
public static string Action(this UrlHelper url, string actionName, string controllerName, string fragment, object routeValues)
{
    return UrlHelper.GenerateUrl(
        routeName: null,
        actionName: actionName,
        controllerName: controllerName,
        routeValues: new System.Web.Routing.RouteValueDictionary(routeValues),
        fragment: fragment,
        protocol: null,
        hostName: null,
        routeCollection: url.RouteCollection,
        requestContext: url.RequestContext,
        includeImplicitMvcValues: true /*helps fill in the nulls above*/
    );
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-27T16:47:21.717

@多米尼克，

我几乎可以肯定，将它放在路由中会导致路由问题。

@瑞奇，

在 MVC 对此提供支持之前，您可以更加“老派”地了解如何制作路线。例如，您可以转换：

```
<%= Html.ActionLink("Home", "Index") %> 
```

进入：

```
<a href='<%= Url.Action("Index") %>#2345'>Home</a> 
```

或者您可以编写自己的助手来完成基本相同的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-10T10:22:59.670

简短的回答是：不。在 ASP.NET MVC Preview 3 中，没有一流的方法可以在操作链接中包含锚点。与 Rails 的 url_for :anchor 不同，UrlHelper.GenerateUrl（以及使用它的 ActionLink、RedirectToAction 等）没有可以让您编码锚点的神奇属性名称。

正如你所指出的，你可以自己动手做。这可能是最干净的解决方案。

Hackily，您可以在路由中包含一个锚点并在您的参数哈希中指定值：

```
routes.MapRoute("WithTarget", "{controller}/{action}/{id}#{target}");
...
<%= Html.ActionLink("Home", "Index", new { target = "foo" })%> 
```

这将生成一个类似 /Home/Index/#foo 的 URL。不幸的是，这不适用于出现在 URL 末尾的 URL 参数。因此，这种 hack 仅适用于所有参数都显示为 URL 路径组件的非常简单的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-07-20T21:48:56.060

这是一个客户端解决方案，但如果你有可用的 jquery，你可以做这样的事情。

```
<script language="javascript" type="text/javascript">
    $(function () {
        $('div.imageHolder > a').each(function () {
            $(this).attr('href', $(this).attr('href') + '#tab-works');
        });
    });
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-11T16:01:32.880

MVC 5 支持片段标识符。请参阅[https://msdn.microsoft.com/en-us/library/dd460522(v=vs.118).aspx](https://msdn.microsoft.com/en-us/library/dd460522(v=vs.118).aspx)和[https://msdn.microsoft.com/](https://msdn.microsoft.com/en-us/library/dd492938(v=vs.118).aspx)`ActionLink`处的重载[zh-CN/图书馆/dd492938(v=vs.118).aspx](https://msdn.microsoft.com/en-us/library/dd492938(v=vs.118).aspx)。

# html - 有什么理由不开始使用 HTML 5 文档类型？

> ID：5629
> 
> 赞同：132
> 
> 时间：2008-08-08T04:03:10.583
> 
> 标签：html, doctype

它应该向后兼容 HTML4 和 XHTML。[John Resig 发布了一些好处](http://ejohn.org/blog/html5-doctype/)。

只要我们不使用任何新的和尚不支持的功能，开始使用这种 doctype 构建网站会有什么缺点吗？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2008-08-18T04:42:59.413

考虑一下：

当用作 text/html 时，您只需要一个 doctype 来触发标准模式。除此之外，就浏览器而言，doctype 什么也不做。

当用作 text/html 时，无论您使用 XHTML 标记还是 HTML 标记，浏览器都将其视为 HTML。

因此，实际上归结为使用触发标准模式的最短文档类型 (<!DOCTYPE html>) 并使用在浏览器中产生正确结果的 HTML 标记。

剩下的就是关于一致性、验证和标记偏好。

话虽如此，现在使用 <!DOCTYPE html> 并尝试使您的标记符合 HTML5 并不是一个坏主意，只要您坚持现在在浏览器中工作的稳定功能。您不会在 HTML4 或 XHTML 1.x 中使用任何在浏览器中不起作用的东西，对吗？

换句话说，您使用带有类似 HTML4 的标记的 <!DOCTYPE html>，同时尊重 HTML5 中已阐明的内容。毕竟 HTML5 是关于浏览器兼容性的。

现在使用 HTML5 的缺点是规范可能会经常更改。这使得您在规范发生变化时跟上规范非常重要。此外[http://validator.nu/](http://validator.nu/)可能并不总是最新的，但[http://validator.w3.org/](http://validator.w3.org/)也不总是最新的，所以不要让它阻止你。

当然，如果您想使用 XHTML 1.0 标记并符合 XHTML 1.0，那么您不应该使用 <!DOCTYPE html>。

就个人而言，我总是将 <!DOCTYPE html> 用于 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-08T04:28:09.627

我对您的问题是，如果您不使用任何新的/不受支持的功能，为什么要使用它。我并不是说你不能玩弄它，而是为什么要开始使用没有任何好处并且可以由 XHTML5 补充的 doctype 来构建站点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-08T04:12:49.813

我会说使用它并进行广泛的测试。然后让我们知道它是否炸毁了你的房子或其他什么。:')

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-30T09:10:55.583

基于最新的 IE8 测试版，MS 似乎将使用 HTML5 doctype 作为 IE8 模式切换泥潭的旁路。似乎早期部署 HTML5 doctype 的最大风险是，如果人们在 IE8 发布之前使用 HTML5 doctype 发布大量与 IE8 不兼容的内容，MS 可能会对简化 HTML5 的模式情况感到冷漠。

*更新：*这似乎被否决了。很明显，现在 IE8 已经发布，上述考虑不再适用。事实上，[IE8 的情况并不简单](http://hsivonen.iki.fi/doctype/#ie8)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-08-18T16:11:26.983

对我来说，缺点主要涉及验证：

1.  第三方验证工具并不总是跟上不断变化的规范，这让我最喜欢的工具变得不可靠。
2.  我更喜欢针对严格的文档类型进行验证，以确保我已经关闭了所有元素。这是避免简单但耗时的嵌套错误的简单方法。使用 HTML 5，您不必关闭元素，因此无法找到不匹配的标签。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-08T05:00:37.673

如果您要使用 doctype，请尝试这些功能。只要它们不进入生产站点，并且您对它们进行彻底的测试，就可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-02T03:16:03.187

考虑你的听众和你的需求。我在配备 Ubuntu 的计算机实验室中为我的课程中使用 FireFox 3 的学生的目标受众编写了诸如[课堂测试之类的页面。](http://www.comfsm.fm/~dleeling/physci/ps83/t2mx.xhtml)我需要在 SVG 中嵌入 MathMl 作为 foreignObject 的 SVG。我自由地使用 HTML5 doctype 和新的 HTML5 标签。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-24T19:48:09.140

看看这篇博文！不是 HTML5 的粉丝 [http://www.webscienceman.com/2009/01/24/html-xhtml-html5-future-html/](http://www.webscienceman.com/2009/01/24/html-xhtml-html5-future-html/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-08-11T18:20:02.527

对于任何找到这个的人。图表 `http://hsivonen.iki.fi/doctype/`显示了不同浏览器使用的各种呈现模式，具体取决于使用的 DOCTYPE 声明。它可以让您很好地了解 DOCTYPE 切换的工作原理。

* * *

## 回答 #10

> 赞同：-16
> 
> 时间：2008-08-08T05:10:52.070

我个人会说不。HTML5 没有明显的好处，事实上甚至可以说整个事情从一开始就搞砸了。

为页眉、页脚和侧边栏使用专门的标签是一个巨大的错误——你已经以标签 (div) 和名称 (classes/id's) 的形式获得了它们。为什么我们需要专家？XHTML1.1 已经足够好了，期间。事实上，由于大多数浏览器不能正确支持 HTML4，因此使用需要数年才能获得适当支持的 doctype 几乎没有意义。

# xcode - Mac 上的 x86 汇编

> ID：5649
> 
> 赞同：67
> 
> 时间：2008-08-08T04:25:11.630
> 
> 标签：xcode, macos, x86, assembly

有谁知道在 Mac 上编写程序集的任何好工具（我正在寻找 IDE）。Xcode 对我来说有点麻烦。

另外，在 Intel Mac 上，我可以使用通用 x86 asm 吗？还是有修改过的指令集？有关发布英特尔的任何信息。

另外：我知道在 Windows 上，asm 可以在操作系统创建的模拟环境中运行，让代码认为它在自己的专用机器上运行。OS X 是否提供相同的功能？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-08-08T07:07:10.540

在安装了针对基于 Intel 的 Mac 的任何版本的 Xcode 后，您应该能够编写汇编代码。Xcode 是一套工具，其中只有一个是 IDE，所以如果您不想使用，则不必使用它。（也就是说，如果您发现某些特定的东西很笨拙，请在[Apple 的 bug 报告员](http://bugreport.apple.com/ "苹果的错误报告者")处提交错误- 每个错误都属于工程。）此外，安装 Xcode 将同时安装 Netwide Assembler (NASM) 和 GNU Assembler (GAS)；这将让您使用您最熟悉的任何汇编语法。

您还需要查看[Compiler & Debugging Guides](https://developer.apple.com/library/mac/documentation/CompilerTools/Conceptual/LLVMCompilerOverview/index.html#//apple_ref/doc/uid/TP40010019 "编译器和调试指南")，因为它们记录了用于 Mac OS X 运行的各种架构的调用约定，以及二进制格式和加载程序的工作方式。特别是 IA-32 (x86-32) 调用约定可能与您习惯的略有不同。

要记住的另一件事是，Mac OS X 上的系统调用接口与您在 DOS/Windows、Linux 或其他 BSD 风格上可能习惯的不同。系统调用在 Mac OS X 上不被视为稳定的 API；相反，您总是通过 libSystem。这将确保您编写的代码可从操作系统的一个版本移植到下一个版本。

最后，请记住，Mac OS X 运行在相当广泛的硬件上——从 32 位 Core Single 到高端四核 Xeon。通过在汇编中编码，您可能没有像您想象的那样优化；在一台机器上最佳的东西在另一台机器上可能是最差的。Apple 定期测量其编译器并使用“-Os”优化标志调整其输出以使其在整个产品线中体面，并且有广泛的矢量/矩阵处理库，您可以使用这些库通过手动调整的 CPU 特定实现获得高性能.

去集会很有趣。如今，为了速度而去组装并不适合胆小的人。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-12-10T18:46:36.263

如前所述，不要使用系统调用。您可以使用标准 C 库调用，但请注意堆栈必须按照 Apple 的[IA32 函数调用 ABI](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/LowLevelABI/130-IA-32_Function_Calling_Conventions/IA32.html)对齐 16 字节。

如果您不对齐堆栈，`__dyld_misaligned_stack_error`当您调用任何库或框架时，您的程序将崩溃。

以下代码片段在我的系统上组装并运行：

```
; File: hello.asm
; Build: nasm -f macho hello.asm && gcc -o hello hello.o

SECTION .rodata
hello.msg db 'Hello, World!',0x0a,0x00

SECTION .text

extern _printf ; could also use _puts...
GLOBAL _main

; aligns esp to 16 bytes in preparation for calling a C library function
; arg is number of bytes to pad for function arguments, this should be a multiple of 16
; unless you are using push/pop to load args
%macro clib_prolog 1
    mov ebx, esp        ; remember current esp
    and esp, 0xFFFFFFF0 ; align to next 16 byte boundary (could be zero offset!)
    sub esp, 12         ; skip ahead 12 so we can store original esp
    push ebx            ; store esp (16 bytes aligned again)
    sub esp, %1         ; pad for arguments (make conditional?)
%endmacro

; arg must match most recent call to clib_prolog
%macro clib_epilog 1
    add esp, %1         ; remove arg padding
    pop ebx             ; get original esp
    mov esp, ebx        ; restore
%endmacro

_main:
    ; set up stack frame
    push ebp
    mov ebp, esp
    push ebx

    clib_prolog 16
    mov dword [esp], hello.msg
    call _printf
    ; can make more clib calls here...
    clib_epilog 16

    ; tear down stack frame
    pop ebx
    mov esp, ebp
    pop ebp
    mov eax, 0          ; set return code
    ret 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-23T03:12:27.617

最近想学习如何在 Mac OS X 上编译 Intel x86：

### 对于 nasm：

```
-o hello.tmp - outfile
-f macho - specify format
Linux - elf or elf64
Mac OSX - macho 
```

### 对于 ld：

```
-arch i386 - specify architecture (32 bit assembly)
-macosx_version_min 10.6 (Mac OSX - complains about default specification)
-no_pie (Mac OSX - removes ld warning)
-e main - specify main symbol name (Mac OSX - default is start)
-o hello.o - outfile 
```

### 对于壳牌：

```
./hello.o - execution 
```

### 单线：

```
nasm -o hello.tmp -f macho hello.s && ld -arch i386 -macosx_version_min 10.6 -no_pie -e _main -o hello.o hello.tmp && ./hello.o 
```

让我知道这是否有帮助！

我在我的博客上写了如何做到这一点：

[http://blog.burrowsapps.com/2013/07/how-to-compile-helloworld-in-intel-x86.html](http://blog.burrowsapps.com/2013/07/how-to-compile-helloworld-in-intel-x86.html)

对于更详细的解释，我在我的 Github 上进行了解释：

[https://github.com/jaredsburrows/Assembly](https://github.com/jaredsburrows/Assembly)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2011-07-15T03:12:10.043

有关详细的 x86 Mac 专用介绍，请参阅[http://peter.michaux.ca/articles/assembly-hello-world-for-os-x](http://peter.michaux.ca/articles/assembly-hello-world-for-os-x)。我尝试过的其他链接有一些非 Mac 陷阱。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-25T15:27:18.700

在 Mac 上运行汇编代码离您只有 3 步之遥。可以使用 XCODE 完成，但更好的是使用 NASM 命令行工具。为方便起见，我已经安装了 Xcode，如果您安装了 Xcode，那就太好了。

但是你也可以在没有 XCode 的情况下做到这一点。

只需关注：

1.  首先使用 Homebrew 安装 NASM`brew install nasm`
2.  使用此命令将 .asm 文件转换为 Obj 文件`nasm -f macho64 myFile.asm`
3.  使用命令运行 Obj File 以查看 OutPut`ld -macosx_version_min 10.7.0 -lSystem -o OutPutFile myFile.o && ./64`

为方便起见，下面编写了名为 myFile.asm 的简单文本文件。

```
global start
section .text

start:
    mov     rax, 0x2000004 ; write
    mov     rdi, 1 ; stdout
    mov     rsi, msg
    mov     rdx, msg.len
    syscall

    mov     rax, 0x2000001 ; exit
    mov     rdi, 0
    syscall

section .data

msg:    db      "Assalam O Alaikum Dear", 10
.len:   equ     $ - msg 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-08T04:33:25.203

> 另外，在 Intel Mac 上，我可以使用通用 x86 asm 吗？还是有修改过的指令集？有关英特尔 Mac 组装后的任何信息都有帮助。

这是相同的指令集；这是相同的筹码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-08T04:35:51.297

可用的功能取决于您的处理器。苹果和其他人一样使用英特尔的东西。所以是的，通用 x86 应该没问题（假设你不在 PPC 上：D）。

就工具而言，我认为您最好的选择是“理解”汇编的优秀文本编辑器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-08T05:18:41.320

忘记寻找在 Mac 上编写/运行/编译汇编程序的 IDE。但是，记住 mac 是 UNIX。请参阅[http://asm.sourceforge.net/articles/linasm.html](http://asm.sourceforge.net/articles/linasm.html)。在 Linux 上通过 GCC 运行汇编程序的体面指南（虽然很短）。你可以模仿这个。Mac 使用 Intel 芯片，因此您想查看 Intel 语法。

# informix - 在 Informix SPL 过程中休眠

> ID：5667
> 
> 赞同：4
> 
> 时间：2008-08-08T04:36:30.593
> 
> 标签：informix, spl

从 Informix SPL 例程中执行与传统 sleep() 系统调用的语义等效的最佳方法是什么？换句话说，只需“暂停” N 秒（或毫秒或其他什么，但几秒就可以了）。我正在寻找一种*不*涉及将一些新的（可能由我编写的）C 代码或其他库链接到 Informix 服务器的解决方案。这必须是我可以完全从 SPL 做的事情。IDS 10 或 11 的解决方案会很好。

@RET - “显而易见”的答案对我来说并不明显！我不知道 SYSTEM 命令。谢谢！（是的，我就是你认为的那个人。）

* * *

是的，它仅用于调试目的。不幸的是，SPL 中的 CURRENT 将始终返回相同的值，在调用的入口处设置：

> *“从 SPL 函数内部对 EXECUTE FUNCTION（或 EXECUTE PROCEDURE）语句调用的任何对 CURRENT 的调用都会在 SPL 函数启动时返回系统时钟的值。”*
> 
> — [IBM Informix SQL 指南](http://publib.boulder.ibm.com/infocenter/idshelp/v10/topic/com.ibm.sqls.doc/sqls1011.htm)

将 CURRENT 包装在它自己的子程序中没有帮助。在第一次调用包装器时，您确实会得到不同的答案（前提是您使用的是 YEAR TO FRACTION(5) 或其他具有足够高的分辨率来显示差异的类型），但随后您会在每一个上得到相同的值随后的调用，确保任何类型的循环都不会终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T05:45:52.350

您不想要明显的答案一定有一些很好的理由： `SYSTEM "sleep 5"`. 如果您只想在检查各种值等时让 SPL 暂停，这里有几个想法（当然，所有这些都是完全的 hack）：

1.  使 TRACE FILE 成为命名管道（假设 Unix 后端），因此它会阻塞，直到您选择从中读取，或者
2.  创建另一个表，您的 SPL 从 WHILE 循环中轮询特定条目，然后从其他地方插入所述行（非常低效）
3.  让 SET LOCK MODE 成为您的朋友：执行“SET LOCK MODE TO WAIT n”并故意重新查询您已经打开游标的表。当然，您需要将其包装在 EXCEPTION 处理程序中。

希望这会有所帮助（如果您是 Ars 和 Rose::DB 名气的同一个 JS，这是我能做的至少 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-25T16:48:46.013

我知道答案为时已晚。但是我最近遇到了同样的问题，这个网站显示为第一个。因此，在此处放置新的 anwser 对其他人是有益的。

完美的解决方案由 Eric Herber 发现并于 2012 年 4 月在此处发布：[如何在存储过程中固定时间休眠（或屈服）](http://informix.jfmiii.com/?p=151) 不幸的是，该站点已关闭。

他的解决方案是使用以下功能：

```
integer sysadmin:yieldn( integer nseconds ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-10T16:58:39.887

我假设您希望此“暂停”用于调试目的，否则请考虑一下，您总是有一些比睡眠更好的任务要为您的服务器做......

一个建议：也许你可以得到 CURRENT，添加它几秒钟（让 mytimestamp ）然后在一个 while 循环中选择 CURRENT 而 CURRENT <= mytimestamp 。我没有在我的办公桌周围设置 informix 来尝试它，所以你必须弄清楚正确的语法。同样，不要在生产服务器上放置这样的 hack。您已被警告：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-11T08:43:31.583

然后你将不得不在另一个你将从第一个调用的函数中扭曲 CURRENT （但这是对前一个 hack 的一个 hack ...）。

# wiki - 如何在 FogBugz wiki 页面中创建 HTML 锚点？

> ID：5674
> 
> 赞同：4
> 
> 时间：2008-08-08T04:42:52.123
> 
> 标签：wiki, fogbugz

StackOverflow 成绩单非常庞大，有时我想链接到其中的一些内容。

如何在 FogBugz wiki 页面中创建 HTML 锚点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-08T05:00:35.850

根据[此支持消息](http://our.fogbugz.com/default.asp?fogbugz.4.25208)，该功能目前尚未实现：

> 不幸的是，FogBugz wiki 目前不支持文档中的锚点。不过，它肯定在我们正在考虑的下一个版本的功能列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:18:14.783

在撰写本文时，此功能现已得到支持——只需直接编辑 wiki 页面的 html（通过 <> 按钮）。

有关详细信息，请参阅[此支持问题](http://fogbugz.stackexchange.com/questions/2967/create-html-anchors-in-wiki-pages)。像在典型的 html 文档中一样使用 html 锚标记。（请注意，我确实有问题 w/FB 神奇地删除了目标锚的名称属性，并且必须在初始保存后重新添加它们，所以 YMMV）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-10T17:37:57.440

您可以使用一个脚本来[为您的 wiki 页面创建一个自动 TOC](http://support.fogcreek.com/default.asp?fogbugz.4.27712.2)，这可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-08T05:01:22.010

这似乎是不可能的。

# unicode - 只是我，还是最近字符渲染不正确？

> ID：5682
> 
> 赞同：2
> 
> 时间：2008-08-08T04:51:27.973
> 
> 标签：unicode, utf-8, fonts

我不确定它是否是我的系统，虽然我没有做任何不寻常的事情，但我已经开始注意到网页、文本文件中出现错误渲染的字符，[如下所示](http://ejohn.org/blog/html5-doctype/)：

[http://www.kbssource.com/strange-characters.gif](http://www.kbssource.com/strange-characters.gif)

我有一种预感，这与最近对所有内容都使用 unicode 的趋势有关，我认为这是一件好事，再加上不支持所有可能字符的字体。

那么，有谁知道是什么导致了这些光点（我是对的吗？），以及如何阻止这些光点出现在我自己的内容中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-08T05:08:02.807

似乎对于这个特定的作者，文本是在一些假设它不是 UTF8 的编辑器中编辑的，然后用 UTF8 重新写出来。我基于这样一个事实，即如果我告诉我的浏览器将页面解释为不同的通用编码，则没有一个可以使其正确显示。这告诉我某些转换在某些时候不正确地完成了。

UTF8 的唯一问题是没有一种标准化的方法来识别文件是 UTF8，并且在所有编辑器都对 UTF8 进行标准化之前，仍然会出现转换错误。对于其他 unicode 变体，字节顺序标记 (BOM) 是帮助识别文件的标准，但 UTF8 文件中的 BOM 非常少见。

为了防止它出现在您的内容中，请确保您始终使用支持 unicode 的编辑器，并确保您始终使用正确的编码打开文件。不幸的是，这很痛苦，并且偶尔会出现错误。关键是尽早捕获它们，以便您可以撤消它或进行一些编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-08T05:10:36.983

我相当肯定，你无能为力。我最近在 digg 的首页上看到了这个。它很可能与编码不正确的字符有关。不一定是字体的因素，只是翻译中的某个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T06:07:20.440

它看起来有一段时间好像下划线和尖括号问题已经消失了，但似乎它可能无法修复。

这是一个小样本，应该如下所示：

* * *

＃包括

```
____
#include <stdio.h> 
```

```
____
＃包括

```

更新：看起来它在显示模式下已修复，仅在编辑模式下损坏

# asp.net-mvc - MVC Preview 4 - 路由表中没有路由与提供的值匹配

> ID：5690
> 
> 赞同：4
> 
> 时间：2008-08-08T05:03:42.783
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一条通过 RedirectToRoute 调用的路由，如下所示：

```
return this.RedirectToRoute("Super-SuperRoute", new { year = selectedYear }); 
```

我也试过：

```
 return this.RedirectToRoute("Super-SuperRoute", new { controller = "Super", action = "SuperRoute", id = "RouteTopic", year = selectedYear }); 
```

global.asax 中的路由是这样的：

```
routes.MapRoute(
    "Super-SuperRoute", // Route name
    "Super.mvc/SuperRoute/{year}",  // URL with parameters
     new { controller = "Super", action = "SuperRoute", id = "RouteTopic" }  // Parameter defaults
); 
```

那么为什么我会收到错误消息：“路由表中的路由与提供的值不匹配。”？

我看到 selectedYear 的类型是 var。当我尝试使用 int.Parse 转换为 int 时，我意识到 selectedYear 实际上为空，这可以解释问题。我想下次我会更加注意断点处的变量值:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-08T05:21:07.477

选择什么类型的年份？日期时间？如果是这样，那么您可能需要转换为字符串。

# c# - 未找到导入的项目“C:\Microsoft.CSharp.targets”

> ID：5694
> 
> 赞同：136
> 
> 时间：2008-08-08T05:08:45.020
> 
> 标签：c#, visual-studio

今天尝试在 Visual Studio 2005 中打开 Visual Studio 2008**项目**时出现此错误：

> 未找到导入的项目“C:\Microsoft.CSharp.targets”。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2008-08-08T05:10:20.760

在记事本（或记事本++）中打开您的 csproj 文件找到以下行：

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" /> 
```

并将其更改为

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-10-22T10:02:32.310

> 这是一个全局解决方案，不依赖于特定的包或 bin。

就我而言，我从根目录中删除了**Packages文件夹。**

> 也许是因为你的包在那里，但编译器没有找到它的参考。所以首先删除旧包并添加新包。

**添加新包**的步骤

 ***   首先删除，packages 文件夹（**它将在您当前的项目文件夹附近或上一步**）。
*   然后重新启动项目或解决方案。
*   现在，重建解决方案文件。
*   项目将从 nuGet 包管理器获得新的引用。您的问题将得到解决。

这不是正确的解决方案，但**我在这里发布它，因为我面临同样的问题。**

就我而言，**我什至无法在 Visual Studio 中打开我的解决方案，也没有得到其他 SO 答案的任何帮助。**

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-04-18T08:44:03.097

对我来说，问题是项目的路径包含 %20 个字符，因为 git 在克隆存储库时添加了这些字符而不是空格。另一个问题可能是包的路径是否太长。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-11-23T09:39:44.783

就我而言，我无法在我的解决方案中加载5**个****项目**中的一个。

它有助于**关闭 Visual Studio**，我不得不**删除** `Microsoft.Net.Compilers.1.3.2`文件夹下的 nuget 文件`packages`夹。

**之后，再次打开您的解决方案并按预期加载项目**

*可以肯定的是，在删除文件夹之前关闭所有 VS 实例。*

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-05-18T09:15:52.590

[MSDN 上](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/4c8249db-85ad-4356-9313-5d47411f1a1a)的这个链接也有助于理解它不起作用的原因。$(MSBuildToolsPath) 是 Microsoft.Build.Engine v3.5 的路径（在 VS2008 中创建时自动插入到项目文件中）。如果您尝试为 .Net 2.0 构建项目，请确保将此路径更改为 $(MSBuildBinPath)，它是 Microsoft.Build.Engine v2.0 的路径。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-12-21T19:04:15.533

我曾经在 csproj 文件中有以下行：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

删除此文件后，它工作正常。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-08-05T06:10:50.013

如果您遇到错误`Microsoft.CSharp.Core.targets not found`，这些是我采取的纠正我的步骤：

1.  打开任何以前的工作项目文件夹并导航到错误中显示的链接，即`Projects/(working project name)/packages/Microsoft.Net.Compilers.1.3.2/tools/`搜索`Microsoft.CSharp.Core.targets`文件。

2.  复制这个文件，放到非工作项目`tools folder`中（即如上图导航到非工作项目中的tools文件夹）

3.  现在关闭您的项目（如果它已打开）并重新打开它。

它现在应该可以工作了。

此外，为了确保在您现在打开的 Visual Studio 项目中一切正常，请转到`Tools > NuGetPackage Manager > Manage NuGet Packages For Solution`. 在这里，您可能会发现一个错误，提示 CodeAnalysis.dll 正在被另一个应用程序使用。

再次，转到`tools folder`，找到指定的文件并将其删除。回来吧`Manage NuGet Packages For Solution`。您会找到一个链接，要求您重新加载，单击它并重新安装所有内容。

您的项目现在应该可以正常工作了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-08-12T15:43:35.263

我在重新安装 Windows 后得到了这个。安装了 Visual Studio，我可以在 New Project 窗口中看到 Silverlight 项目类型，但打开一个不起作用。解决方案很简单：我必须安装 Silverlight Developer 运行时和/或 Microsoft Silverlight 4 Tools for Visual Studio。这可能看起来很愚蠢，但我忽略了它，因为我认为它应该可以工作，因为 Silverlight 项目类型可用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-02-14T23:51:39.637

就我而言，我在记事本中打开了 .csproj 文件并删除了以下三行。像魅力一样工作：

```
<Import Project="..\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.1.0.0\build\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.props" Condition="Exists('..\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.1.0.0\build\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.props')" />
<Import Project="..\packages\Microsoft.Net.Compilers.1.0.0\build\Microsoft.Net.Compilers.props" Condition="Exists('..\packages\Microsoft.Net.Compilers.1.0.0\build\Microsoft.Net.Compilers.props')" />
<Import Project="..\packages\Microsoft.Net.Compilers.1.3.2\build\Microsoft.Net.Compilers.props" Condition="Exists('..\packages\Microsoft.Net.Compilers.1.3.2\build\Microsoft.Net.Compilers.props')" /> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-05-26T11:09:40.320

> 好的，如果它这样说怎么办：在 gt/lt 标志之间
> 
> 导入项目="$(MSBuildExtensionsPath)\Microsoft\Silverlight\v3.0\Microsoft.Silverlight.CSharp.targets" /
> 
> 如何修复目标错误？

我还在一个演示项目中发现了导入字符串（特别是 Rob Eisenburg 的“构建你自己的 MVVM 框架”）。

如果您用 lomaxx VS2010 RTM 报告您需要安装的建议替换该[导入](http://go.microsoft.com/fwlink/?LinkId=168436)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-08-30T06:15:36.740

对于带有 的错误`Microsoft.WebApplications.targets`，您可以：

1.  在 TFS 服务器中安装 Visual Studio 2010（或与开发机器相同的版本）。
2.  将“<code>Microsoft.WebApplication.targets”从开发机器文件复制到 TFS 构建机器。

[这是](http://stack247.wordpress.com/2011/08/29/the-imported-project-microsoft-webapplications-targets-was-not-found/)帖子。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-08-06T10:53:06.427

在您安装了 SL 5 的情况下，打开在 SL 4 中构建的 Silverlight 项目时也会发生此错误。

这是一个示例错误消息：未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\Silverlight\v4.0\Microsoft.Silverlight.CSharp.targets”。

注意 v4.0。

要解决，请编辑项目并找到：

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion> 
```

并将其更改为 v5.0。

然后重新加载项目，它将打开（除非您没有安装 SL 5）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-07T09:55:32.017

我删除了 obj 文件夹，然后按预期加载了项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-05T15:26:01.970

有时问题可能与 .csproj 文件中的硬编码 VS 版本有关。如果你的 csproj 中有这样的东西：

```
[...]\VisualStudio\v12.0\WebApplications\Microsoft.WebApplication.targets" 
```

您应该检查数字是否正确（错误的原因可能是项目是使用另一个版本的 Visual Studio 创建的）。如果错误，请将其替换为您当前版本的构建工具或使用 VS 变量：

```
[...]\VisualStudio\v$(VisualStudioVersion)\WebApplications\Microsoft.WebApplication.targets" 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-15T19:53:39.617

我在执行 Ansible 剧本时遇到了这个问题，所以我想在这里添加我的 2 美分。我注意到一条关于缺少 Visual Studio 14 的警告消息。Visual Studio 版本 14 于 2015 年发布，我的问题的解决方案是在我的 Azure DevOps 代理的主机上安装 Visual Studio 2015 Professional。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-04-17T08:40:11.893

在尝试恢复、关闭 VS、删除失败的包、重新打开、尝试恢复后，我多次删除了包中的所有内容，当我进行恢复时，它运行良好。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-23T06:14:07.293

对我来说，问题是路径。在克隆名称中有空格的项目时。项目文件夹被命名`"Sample%20-%205"`而不是它应该是什么：`"Sample - 5"`

打开项目很好，但是构建失败了

> 找不到文件：/packages/Microsoft.Net.Compilers.1.3.2/tools/Microsoft.CSharp.Core.targets

# .net - .NET 是否有轻量级、更可取的开源、可格式化标签控件？

> ID：5704
> 
> 赞同：7
> 
> 时间：2008-08-08T05:36:12.487
> 
> 标签：.net

在 WinForm 应用程序中显示文本时，我一直在寻找一种使用简单标记语言或纯 HTML 的方法。我想避免嵌入 Web 浏览器控件，因为在大多数情况下，我只想突出显示句子中的一两个单词。

我已经研究过使用 RTFControl，但我认为它有点重，而且我认为用于格式化的“语言”并不容易。

是否有一个简单的控件可以让我显示如下字符串：

> 这是*具有*不同格式的**示例字符串。**

 *如果还可以为文本指定字体和/或大小，我会非常整洁。

哦，.NET 3.5 和 WPF/XAML 不是一个选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-08T05:46:48.237

好吧，只需使用 HTML。我们在一些应用程序中使用了以下“免费”控件，它非常漂亮。

我们可以在 HTML Markup 中定义 UI，然后使用这个控件渲染它：

[http://www.terrainformatica.com/htmlayout/main.whtm](http://www.terrainformatica.com/htmlayout/main.whtm)

最初，我们开始研究 HtmlToRTF 转换器，以便我们可以使用 RTF 控件来呈现 UI，但是这两种格式之间的匹配选项太多了。因此，我们最终使用了上述控件。

唯一的先决条件是在“关于”框中提及他们的名字。

# c# - Request.Params 和 Request.Form 什么时候不同？

> ID：5706
> 
> 赞同：34
> 
> 时间：2008-08-08T05:40:49.713
> 
> 标签：c#, asp.net, request

我最近遇到了一个问题，如果使用 Request.Form 访问值为 null，但如果使用 Request.Params 检索则很好。这些方法之间有什么区别可能导致这种情况？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-08-08T05:51:54.420

Request.Form 仅包括通过表单发布的变量，而 Request.Params 包括发布的表单变量和指定为 URL 参数的 get 变量。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-08-29T10:57:21.823

Request.Params 包含 QueryString、Form、Cookie 和 ServerVariables（按该顺序添加）的组合。

不同之处在于，如果您在 QueryString 和 Form 中都有一个名为“key1”的表单变量，那么 Request.Params["key1"] 将返回 QueryString 值，Request.Params.GetValues("key1") 将返回一个[querystring-value, form-value] 的数组。

如果有多个表单值或具有相同键的 cookie，则这些值将添加到 GetValues 返回的数组中（即，GetValues 不会返回锯齿状数组）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T05:42:03.847

原因是我检索的值来自表单元素，但提交是通过链接 + JQuery 完成的，而不是通过表单按钮提交。

# windows - 更好的 Windows 命令行 shell

> ID：5724
> 
> 赞同：66
> 
> 时间：2008-08-08T06:15:11.033
> 
> 标签：windows, shell, cmd

`cmd`除了在 Windows 的窗口和控制台窗口之间有更好的复制粘贴之外，还有更好的 Windows 命令行 shell吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-09-13T14:25:30.387

在命令外壳快捷方式的*选项选项*卡下启用**快速编辑模式。**用鼠标标记，右击复制，再次右击粘贴。

 *当您在那里时，启用热键（如`CTRL`++ `ALT`）`C`以闪电般快速访问外壳。

不，你不能有 `CTRL`+`C`代表**COPY**，因为`CTRL`+`C`意味着**BREAK**。

与此相关的是，在 Windows Server 2000 和 2003 之间更改*QuickEdit 模式*的默认设置的 Microsoftee是个白痴，我每个工作日都在诅咒他。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-08-08T06:17:23.353

当谈到“比 cmd 更好的 Windows 命令行 shell”时，Windows PowerShell 是显而易见的选择。它的剪贴板处理并没有太大的改进 - 用鼠标标记，输入复制，或鼠标右键单击粘贴。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-08-08T11:06:24.380

这可能不是你想要的，但你可以看看[Console2](http://sourceforge.net/projects/console/)

我对其进行了配置，以便 shift+select 自动复制和单击鼠标中键粘贴，非常方便，在内部它使用相同的旧 cmd.exe，因此您并没有真正获得不同的外壳。

顺便说一句，我猜**`Ctrl`+`C`** = copy 在命令行上下文中不是最好的主意，因为它通常意味着中断正在运行的进程。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-08-08T11:59:40.503

[Take Command](http://www.jpsoft.com/tcmddes.htm)确实支持从键盘和鼠标复制/剪切/粘贴。如果您在命令提示符下进行大量工作，这将非常方便。它还支持：

*   命令和文件夹历史记录，带有弹出窗口以选择先前的命令或文件夹。
*   屏幕回滚缓冲区
*   增强的批处理命令
*   内置 FTP/HTTP 文件访问
*   带有可编程按钮的工具栏

注意：这是一个付费工具，价格为 99.95 美元。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-08T12:54:00.630

根据您尝试对 shell 执行的操作，cygwin[中的](http://www.cygwin.com/)[rxvt](http://www.google.com/search?q=rxvt+cygwin)很好。

您将获得选择时自动复制和中键粘贴的优点。最大的缺点是某些 Windows 控制台应用程序无法与 cygwin 配合使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-04-26T13:53:39.027

PowerCmd 比 TakeCommand 便宜，并且具有许多强大的功能 - 其中最重要的是更好地处理剪切/复制/粘贴。我只使用了很短的时间，但到目前为止我印象非常深刻：

网站总结：

> PowerCmd 通过易于使用的 Windows GUI 样式界面增强了您的命令提示符，并允许您在单个选项卡式窗口中运行多个控制台。您可以轻松地以垂直、水平和网格形式组织多个控制台。自动记录、自动完成、关键字突出显示、可配置的字体和颜色、用于常用命令或工具的可自定义工具栏以及最小化到托盘是满足日常需求的简单解决方案。使用 PowerCmd，您可以保存和恢复上次的会话。

网站： [http ://www.powercmd.com/](http://www.powercmd.com/)

特点： [http ://www.powercmd.com/features.php](http://www.powercmd.com/features.php)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-08T06:16:14.870

不确定您所说的*更好的复制/粘贴*具体是什么意思，但请尝试[Take Command](http://www.jpsoft.com)。

Take Command 支持 Shift+Ins 进行粘贴和 Shift+Del 进行剪切，但显然没有用于复制，将挖掘更多。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-31T01:16:59.380

您是否考虑过要替换当前`Ctrl`+`C`功能的行为？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-28T13:07:51.187

cmd.exe 有两个部分。首先是弹出用于处理文本控制台的窗口。我会用[ConEmu](https://code.google.com/p/conemu-maximus5/)替换它。该程序实际上是作为远程文件管理器的包装器，但没有它也可以正常工作。它与 Console2 非常相似，但也更加稳定并且具有更好的功能。

其次是命令行解释器。如果您确实需要 Powershell 的任何功能，我会将其替换为[Powershell 。](http://technet.microsoft.com/en-us/library/bb978526.aspx)

我目前使用带有批处理文件的 ConEmu 运行来设置我的首选环境。这保存在我的 Dropbox 文件夹中，因此它在我的计算机之间保持同步。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-02-15T04:22:03.897

控制台 2

[http://sourceforge.net/projects/console/](http://sourceforge.net/projects/console/)

[http://www.hanselman.com/blog/Console2ABetterWindowsCommandPrompt.aspx](http://www.hanselman.com/blog/Console2ABetterWindowsCommandPrompt.aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-05T15:44:40.780

@Chirs
我认为您需要澄清外壳与主机（模拟器）。对我来说，听起来你需要另一个更好地支持复制和粘贴的现有 shell 接口，而不是另一个支持更多/不同功能的 shell。

我赞同Pat 对Console2 的建议，它是一个非常好的启动应用程序和OSS。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-03-18T20:34:58.047

我使用标准的 CMD.EXE 外壳，但有一个转折：支持剪贴板复制粘贴的 AutoHotKey 脚本，如：[Keyboard shortcut to paste clipboard content into command prompt window (Win XP)](https://stackoverflow.com/questions/131955/keyboard-shortcut-to-paste-clipboard-content-into-command-prompt-window-win-xp/133332)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-01-07T16:24:18.533

Windows cmd shell、Cygwin Bash 和 msysgit Bash shell 可以在 Emacs 中运行。[EmacsW32 分别](http://ourcomments.org/Emacs/EmacsW32.html)提供了这三个。您只需将 bin 目录设置为使用任一 Bash shell。EmacsW32 还提供了 Windows 剪贴板和 kill ring 顶部项之间的有限交互。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-02-15T06:14:14.910

**MinGW Shell**正确设置：

*   [右键菜单项](//github.com/svnpenn/home/blob/master/bash-prompt-here/add-bash-prompt-here.reg)
*   [`~/.profile`](//github.com/svnpenn/home/blob/master/.profile)文件

远高于我尝试过的任何其他东西。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-09-15T16:10:05.413

MinGW/MSYS 上的 MinTTY 很好——比 Cygwin 上的更好，因为 MinGW/MSYS 更快。此外，如果您需要`cmd.exe`行为，您可以轻松地`cmd.exe`在里面运行。`mintty`

请参阅[http://code.google.com/p/mintty/](http://code.google.com/p/mintty/)。

# c++ - 理解指针的障碍是什么，可以做些什么来克服它们？

> ID：5727
> 
> 赞同：461
> 
> 时间：2008-08-08T06:17:51.543
> 
> 标签：c++, c, pointers

为什么指针对于许多 C 或 C++ 的新的甚至是老的大学生来说是一个如此混乱的主要因素？是否有任何工具或思维过程可以帮助您了解指针如何在变量、函数和其他级别上工作？

有哪些好的实践可以让某人达到“啊哈，我明白了”的水平，而不会让他们陷入整体概念中？基本上，像场景一样钻取。

* * *

## 回答 #1

> 赞同：754
> 
> 时间：2008-08-08T06:58:48.700

指针是一个对许多人来说一开始可能会感到困惑的概念，特别是在复制指针值并仍然引用同一个内存块时。

我发现最好的类比是将指针视为一张纸，上面有房子地址，它引用的内存块是实际房子。因此可以很容易地解释各种操作。

我在下面添加了一些 Delphi 代码，并在适当的地方添加了一些注释。我选择了 Delphi，因为我的其他主要编程语言 C# 不会以同样的方式表现出内存泄漏等问题。

如果您只想学习指针的高级概念，那么您应该忽略下面说明中标记为“内存布局”的部分。它们旨在举例说明操作后内存的外观，但它们本质上更底层。但是，为了准确解释缓冲区溢出的实际工作原理，我添加了这些图表非常重要。

*免责声明：出于所有意图和目的，此解释和示例内存布局已大大简化。如果需要在低级别处理内存，则需要了解更多开销和更多详细信息。但是，对于解释内存和指针的意图，它已经足够准确了。*

* * *

假设下面使用的 THouse 类如下所示：

```
type
    THouse = class
    private
        FName : array[0..9] of Char;
    public
        constructor Create(name: PChar);
    end; 
```

当你初始化房子对象时，给构造函数的名字被复制到私有字段 FName 中。它被定义为固定大小的数组是有原因的。

在内存中，会有一些与房屋分配相关的开销，我将在下面这样说明：

```
---[ttttNNNNNNNNNN]---
     ^ ^
     | |
     | +- FName 数组
     |
     +- 开销

```

“tttt”区域是开销，对于各种类型的运行时和语言，通常会有更多的开销，比如 8 或 12 个字节。必须确保该区域中存储的任何值都不会被内存分配器或核心系统例程以外的任何东西更改，否则您将面临程序崩溃的风险。

* * *

**分配内存**

找一个企业家来建造你的房子，然后给你房子的地址。与现实世界相比，内存分配无法告诉分配到哪里，而是会找到一个有足够空间的合适位置，并将地址报告给分配的内存。

也就是说，创业者会选择地点。

```
THouse.Create('My house'); 
```

内存布局：

```
---[ttttNNNNNNNNNN]---
    1234我的房子

```

* * *

**用地址保留一个变量**

在一张纸上写下你新房子的地址。这篇论文将作为您对房屋的参考。没有这张纸，你会迷路，找不到房子，除非你已经在里面。

```
var
    h: THouse;
begin
    h := THouse.Create('My house');
    ... 
```

内存布局：

```
    H
    v
---[ttttNNNNNNNNNN]---
    1234我的房子

```

* * *

**复制指针值**

只需将地址写在一张新纸上。你现在有两张纸可以带你去同一个房子，而不是两个单独的房子。任何尝试按照一张纸上的地址并重新排列那所房子的家具都会让人觉得*另一所房子*已经以同样的方式进行了修改，除非你能明确地检测到它实际上只是一所房子。

*注意*这通常是我向人们解释的最困难的概念，两个指针并不意味着两个对象或内存块。

```
var
    h1, h2: THouse;
begin
    h1 := THouse.Create('My house');
    h2 := h1; // copies the address, not the house
    ... 
```

```
    h1
    v
---[ttttNNNNNNNNNN]---
    1234我的房子
    ^
    h2

```

* * *

**释放内存**

拆掉房子。如果您愿意，您可以稍后将纸张重新用于新地址，或者清除它以忘记不再存在的房子的地址。

```
var
    h: THouse;
begin
    h := THouse.Create('My house');
    ...
    h.Free;
    h := nil; 
```

在这里，我首先建造了房子，并获得了它的地址。然后我对房子做一些事情（使用它，...代码，留给读者作为练习），然后我释放它。最后，我从变量中清除地址。

内存布局：

```
    h <--+
    v +- 释放前
---[ttttNNNNNNNNNN]--- |
    1234我家<--+

    h（现在无处可指）<--+
                                +- 免费后
---------------------- | （注意，记忆可能仍然
    xx34我的房子 <--+ 包含一些数据）

```

* * *

**悬空指针**

你告诉你的企业家摧毁房子，但你忘记从你的纸上抹去地址。稍后当您查看那张纸时，您忘记了房子已不存在，并去拜访它，结果失败（另请参阅下面有关无效参考的部分）。

```
var
    h: THouse;
begin
    h := THouse.Create('My house');
    ...
    h.Free;
    ... // forgot to clear h here
    h.OpenFrontDoor; // will most likely fail 
```

`h`在调用 to 之后使用`.Free` *可能会*起作用，但这只是纯粹的运气。它很可能会在关键操作过程中在客户处发生故障。

```
    h <--+
    v +- 释放前
---[ttttNNNNNNNNNN]--- |
    1234我家<--+

    h <--+
    v +- 释放后
---------------------- |
    xx34我的房子 <--+

```

如您所见， h 仍然指向内存中数据的残余，但是由于它可能不完整，因此像以前一样使用它可能会失败。

* * *

**内存泄漏**

你丢了那张纸，找不到房子。不过房子还在某个地方，当你以后想建造一座新房子时，你不能重复使用那个地方。

```
var
    h: THouse;
begin
    h := THouse.Create('My house');
    h := THouse.Create('My house'); // uh-oh, what happened to our first house?
    ...
    h.Free;
    h := nil; 
```

在这里，我们用新房子的地址覆盖了`h`变量的内容，但旧房子仍然站在……某个地方。在此代码之后，无法到达那所房子，它将保持原样。换句话说，分配的内存将保持分配状态，直到应用程序关闭，此时操作系统会将其拆除。

第一次分配后的内存布局：

```
    H
    v
---[ttttNNNNNNNNNN]---
    1234我的房子

```

第二次分配后的内存布局：

```
                       H
                       v
---[ttttNNNNNNNNNN]---[ttttNNNNNNNNNN]
    1234我的房子 5678我的房子

```

获取此方法的更常见方法是忘记释放某些内容，而不是像上面那样覆盖它。在 Delphi 术语中，这将通过以下方法发生：

```
procedure OpenTheFrontDoorOfANewHouse;
var
    h: THouse;
begin
    h := THouse.Create('My house');
    h.OpenFrontDoor;
    // uh-oh, no .Free here, where does the address go?
end; 
```

执行此方法后，我们的变量中没有位置表明房子的地址存在，但房子仍然存在。

内存布局：

```
    h <--+
    v +- 在丢失指针之前
---[ttttNNNNNNNNNN]--- |
    1234我家<--+

    h（现在无处可指）<--+
                                +- 丢失指针后
---[ttttNNNNNNNNNN]--- |
    1234我家<--+

```

如您所见，旧数据原封不动地留在内存中，不会被内存分配器重用。分配器跟踪已使用的内存区域，除非您释放它，否则不会重用它们。

* * *

**释放内存但保留（现在无效）引用**

拆掉房子，擦掉一张纸，但你还有另一张纸，上面写着旧地址，当你去地址时，你不会找到房子，但你可能会找到类似废墟的东西之一。

也许你甚至会找到一所房子，但它不是你最初获得地址的房子，因此任何试图将它当作属于你的使用都可能会失败。

有时你甚至会发现相邻的地址有一个相当大的房子，占据了三个地址（Main Street 1-3），而你的地址在房子的中间。任何将大型 3 地址房屋的那部分视为单个小房屋的尝试也可能会失败。

```
var
    h1, h2: THouse;
begin
    h1 := THouse.Create('My house');
    h2 := h1; // copies the address, not the house
    ...
    h1.Free;
    h1 := nil;
    h2.OpenFrontDoor; // uh-oh, what happened to our house? 
```

在这里，房子被拆除了，通过参考`h1`，虽然`h1`也被清理了，`h2`但仍然有旧的、过时的地址。进入不再站立的房子可能会也可能不会。

这是上面悬空指针的变体。查看它的内存布局。

* * *

**缓冲区溢出**

你搬进房子里的东西超出了你的承受能力，溢出到邻居的房子或院子里。等隔壁房子的主人以后回家时，他会发现各种他认为属于自己的东西。

这就是我选择固定大小数组的原因。为了做好准备，假设我们分配的第二个房子由于某种原因将放在内存中的第一个之前。换句话说，第二个房子的地址将低于第一个房子。此外，它们被分配在彼此旁边。

因此，这段代码：

```
var
    h1, h2: THouse;
begin
    h1 := THouse.Create('My house');
    h2 := THouse.Create('My other house somewhere');
                         ^-----------------------^
                          longer than 10 characters
                         0123456789 <-- 10 characters 
```

第一次分配后的内存布局：

```
                        h1
                        v
-----------------------[ttttNNNNNNNNNN]
                        5678我的房子

```

第二次分配后的内存布局：

```
    h2 h1
    vv
---[ttttNNNNNNNNNN]----[ttttNNNNNNNNNN]
    1234我的另一间房子某处
                        ^---+--^
                            |
                            +- 覆盖

```

最常导致崩溃的部分是当您覆盖您存储的数据的重要部分时，这些部分确实不应该被随机更改。例如，在程序崩溃方面，更改 h1-house 的部分名称可能不是问题，但是当您尝试使用损坏的对象时，覆盖对象的开销很可能会崩溃，就像这样覆盖存储到对象中其他对象的链接。

* * *

**链表**

当你按照一张纸上的地址，你到达一所房子，在那所房子里有另一张纸，上面有一个新地址，链中的下一个房子，依此类推。

```
var
    h1, h2: THouse;
begin
    h1 := THouse.Create('Home');
    h2 := THouse.Create('Cabin');
    h1.NextHouse := h2; 
```

在这里，我们创建了从我们家到我们小屋的链接。我们可以沿着链条直到房子没有`NextHouse`参考，这意味着它是最后一个。要访问我们所有的房子，我们可以使用以下代码：

```
var
    h1, h2: THouse;
    h: THouse;
begin
    h1 := THouse.Create('Home');
    h2 := THouse.Create('Cabin');
    h1.NextHouse := h2;
    ...
    h := h1;
    while h <> nil do
    begin
        h.LockAllDoors;
        h.CloseAllWindows;
        h := h.NextHouse;
    end; 
```

内存布局（添加 NextHouse 作为对象中的链接，在下图中用四个 LLLL 标注）：

```
    h1 h2
    vv
---[ttttNNNNNNNNNNLLLL]----[ttttNNNNNNNNNNLLLL]
    1234家+ 5678客舱+
                   | ^ |
                   +--------+ *（无链接）

```

* * *

**基本来说，什么是内存地址？**

内存地址在基本术语中只是一个数字。如果您将内存视为一个大字节数组，则第一个字节的地址为 0，下一个字节的地址为 1，依此类推。这是简化的，但已经足够好了。

所以这个内存布局：

```
    h1 h2
    vv
---[ttttNNNNNNNNNN]---[ttttNNNNNNNNNN]
    1234我的房子 5678我的房子

```

可能有这两个地址（最左边 - 是地址 0）：

*   h1 = 4
*   h2 = 23

这意味着我们上面的链表实际上可能是这样的：

```
    h1 (=4) h2 (=28)
    vv
---[ttttNNNNNNNNNNLLLL]----[ttttNNNNNNNNNNLLLL]
    1234首页 0028 5678客舱 0000
                   | ^ |
                   +--------+ *（无链接）

```

通常将“无处指向”的地址存储为零地址。

* * *

**基本来说，什么是指针？**

指针只是一个保存内存地址的变量。您通常可以要求编程语言给您它的编号，但大多数编程语言和运行时都试图隐藏下面有一个数字的事实，只是因为数字本身对您没有任何意义。最好将指针视为黑盒，即。您并不真正了解或关心它是如何实际实施的，只要它有效。

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2008-08-08T21:50:15.883

在我的第一堂 Comp Sci 课上，我们做了以下练习。诚然，这是一个演讲厅，里面有大约 200 名学生……

教授在黑板上写道：`int john;`

约翰站起来

教授写道：`int *sally = &john;`

莎莉站起来，指着约翰

教授：`int *bill = sally;`

比尔站起来，指着约翰

教授：`int sam;`

山姆站起来

教授：`bill = &sam;`

比尔现在指向山姆。

我想你应该已经明白了。我想我们花了大约一个小时来做​​这件事，直到我们了解了指针分配的基础知识。

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2008-08-16T11:35:11.517

我发现有助于解释指针的一个类比是超链接。大多数人都可以理解，网页上的链接“指向”互联网上的另一个页面，如果您可以复制并粘贴该超链接，那么它们都将指向同一个原始网页。如果您去编辑该原始页面，然后按照这些链接（指针）中的任何一个，您将获得该新的更新页面。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2008-08-08T06:29:59.913

指针似乎让很多人感到困惑的原因是，它们大多很少或根本没有计算机体系结构的背景。由于许多人似乎不知道计算机（机器）是如何实际实现的——在 C/C++ 中工作似乎是陌生的。

一个练习是要求他们实现一个简单的基于字节码的虚拟机（在他们选择的任何语言中，python 都非常适合），其指令集专注于指针操作（加载、存储、直接/间接寻址）。然后让他们为该指令集编写简单的程序。

任何需要比简单加法稍微多一点的东西都将涉及指针，他们肯定会得到它。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2008-08-08T06:19:41.587

> 为什么指针对于许多新的甚至是老的 C/C++ 语言的大学生来说是一个如此混乱的主要因素？

值的占位符的概念 - 变量 - 映射到我们在学校教授的东西 - 代数。如果不了解内存在计算机中的物理布局，就无法绘制现有的平行线，并且在他们处理低级事物之前没有人会考虑这种事情 - 在 C/C++/字节通信级别.

> 是否有任何工具或思维过程可以帮助您了解指针如何在变量、函数和其他级别上工作？

地址框。我记得当我学习将 BASIC 编程到微型计算机中时，有一些漂亮的书，里面有游戏，有时你必须将值插入特定的地址。他们有一堆盒子的图片，用 0, 1, 2 递增标记......并且解释说只有一个小东西（一个字节）可以放在这些盒子里，而且数量很多 - 一些计算机有多达65535！他们彼此相邻，并且都有一个地址。

> 有哪些好的实践可以让某人达到“啊哈，我明白了”的水平，而不会让他们陷入整体概念中？基本上，像场景一样钻取。

为了钻？制作一个结构：

```
struct {
char a;
char b;
char c;
char d;
} mystruct;
mystruct.a = 'r';
mystruct.b = 's';
mystruct.c = 't';
mystruct.d = 'u';

char* my_pointer;
my_pointer = &mystruct.b;
cout << 'Start: my_pointer = ' << *my_pointer << endl;
my_pointer++;
cout << 'After: my_pointer = ' << *my_pointer << endl;
my_pointer = &mystruct.a;
cout << 'Then: my_pointer = ' << *my_pointer << endl;
my_pointer = my_pointer + 3;
cout << 'End: my_pointer = ' << *my_pointer << endl; 
```

与上面相同的示例，除了在 C 中：

```
// Same example as above, except in C:
struct {
    char a;
    char b;
    char c;
    char d;
} mystruct;

mystruct.a = 'r';
mystruct.b = 's';
mystruct.c = 't';
mystruct.d = 'u';

char* my_pointer;
my_pointer = &mystruct.b;

printf("Start: my_pointer = %c\n", *my_pointer);
my_pointer++;
printf("After: my_pointer = %c\n", *my_pointer);
my_pointer = &mystruct.a;
printf("Then: my_pointer = %c\n", *my_pointer);
my_pointer = my_pointer + 3;
printf("End: my_pointer = %c\n", *my_pointer); 
```

输出：

```
Start: my_pointer = s
After: my_pointer = t
Then: my_pointer = r
End: my_pointer = u 
```

也许这通过示例解释了一些基础知识？

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2010-01-13T14:01:00.703

起初我很难理解指针的原因是，许多解释都包含很多关于通过引用传递的废话。所有这一切都是混淆了这个问题。当您使用指针参数时，您*仍然*是按值传递；但该值恰好是一个地址，而不是一个 int。

其他人已经链接到本教程，但我可以强调一下我开始理解指针的那一刻：

[C 中指针和数组教程：第 3 章 - 指针和字符串](http://pweb.netcom.com/~tjensen/ptr/ch3x.htm)

```
int puts(const char *s); 
```

> 暂且忽略`const.`传递给的参数`puts()`是指针，**也就是指针的值（因为C中所有的参数都是传值的），而指针的值就是它所指向的地址，或者，简单的说， 一个地址。**因此，当我们编写`puts(strA);`如我们所见的那样时，我们传递的是 strA[0] 的地址。

读到这句话的那一刻，乌云散开，一束阳光将我笼罩在指针的理解之中。

即使您是 VB .NET 或 C# 开发人员（就像我一样）并且从不使用不安全的代码，仍然值得了解指针的工作原理，否则您将无法理解对象引用的工作原理。然后，您将有一个常见但错误的概念，即将对象引用传递给方法会复制对象。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-08-11T04:21:07.853

我发现 Ted Jensen 的“C 语言指针和数组教程”是学习指针的绝佳资源。它分为 10 节课，从解释指针是什么（以及它们的用途）开始，到函数指针结束。[http://web.archive.org/web/20181011221220/http://home.netcom.com:80/~tjensen/ptr/cpoint.htm](http://web.archive.org/web/20181011221220/http://home.netcom.com:80/%7Etjensen/ptr/cpoint.htm)

从那里继续，Beej 的网络编程指南讲授了 Unix 套接字 API，您可以从中开始做真正有趣的事情。[http://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-08-10T18:09:16.887

指针的复杂性超出了我们可以轻松教授的范围。让学生互相指点并使用带有家庭地址的纸片都是很好的学习工具。他们在介绍基本概念方面做得很好。事实上，学习基本概念对于成功使用指针*至关重要。*但是，在生产代码中，通常会遇到比这些简单演示所能封装的复杂得多的场景。

我参与过系统，我们有指向其他结构的结构指向其他结构。其中一些结构还包含嵌入式结构（而不​​是指向其他结构的指针）。这是指针真正令人困惑的地方。如果您有多个间接级别，并且您开始使用如下代码结束：

```
widget->wazzle.fizzle = fazzle.foozle->wazzle; 
```

它很快就会变得混乱（想象更多的行，可能还有更多的关卡）。放入指针数组和节点到节点的指针（树、链表），情况会变得更糟。我见过一些真正优秀的开发人员一旦开始在这样的系统上工作就会迷失方向，即使是非常了解基础知识的开发人员。

指针的复杂结构也不一定表示编码不佳（尽管可以）。组合是良好的面向对象编程的重要组成部分，在具有原始指针的语言中，它不可避免地会导致多层间接。此外，系统通常需要使用在样式或技术上彼此不匹配的结构的第三方库。在这种情况下，复杂性自然会出现（当然，我们应该尽可能地与之抗争）。

我认为大学可以帮助学生学习指针的最好的事情就是使用好的演示，结合需要使用指针的项目。一个困难的项目比一千次演示更能帮助理解指针。演示可以让你理解浅薄，但要深入掌握指针，你必须真正使用它们。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2008-08-08T06:26:50.013

我不认为指针作为一个概念特别棘手——大多数学生的心智模型都映射到这样的东西，一些快速的方框草图可以提供帮助。

至少我过去经历过并看到其他人处理的困难在于，C/C++ 中的指针管理可能会变得不必要地复杂化。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2013-04-05T19:55:49.357

我想我应该在这个列表中添加一个类比，当我作为计算机科学导师解释指针时（过去），我发现它非常有用；首先，让我们：

* * *

**设置舞台**：

考虑一个有 3 个车位的停车场，这些车位编号：

```
-------------------
|     |     |     |
|  1  |  2  |  3  |
|     |     |     | 
```

在某种程度上，这就像内存位置，它们是连续的和连续的……有点像数组。现在里面没有汽车，所以它就像一个空数组 ( `parking_lot[3] = {0}`)。

* * *

**添加数据**

停车场永远不会空着很长时间……如果这样做了，那将毫无意义，也没有人会建造任何停车场。因此，假设随着时间的推移，停车场内有 3 辆汽车，一辆蓝色汽车、一辆红色汽车和一辆绿色汽车：

```
 1     2     3
-------------------
| o=o | o=o | o=o |
| |B| | |R| | |G| |
| o-o | o-o | o-o | 
```

这些汽车都是同一种类型（汽车），所以一种思考方式是，我们的汽车是某种数据（比如 an `int`），但它们具有不同的值（`blue`, `red`, `green`; 这可能是一种颜色`enum`）

* * *

**输入指针**

现在，如果我带你进入这个停车场，并要求你给我找一辆蓝色汽车，你伸出一根手指并用它指向位置 1 的一辆蓝色汽车。这就像拿一个指针并将它分配给一个内存地址( `int *finger = parking_lot`)

你的手指（指针）不是我问题的答案。看着你的手指***并***没有告诉我什么，但如果我看看你手指*指向的*地方（取消引用指针），我可以找到我正在寻找的汽车（数据）。

* * *

**重新分配指针**

现在我可以让你找到一辆红色的汽车，然后你可以将手指转向一辆新车。现在，您的指针（与之前相同）正在向我显示相同类型（汽车）的新数据（可以找到红色汽车的停车位）。

指针并没有发生物理变化，它仍然是*你的*手指，只是它显示给我的数据发生了变化。（“停车位”地址）

* * *

**双指针（或指向指针的指针）**

这也适用于多个指针。我可以问指针在哪里，它指向红色的汽车，你可以用另一只手，用一根手指指向第一根手指。（这就像`int **finger_two = &finger`）

现在，如果我想知道蓝色汽车在哪里，我可以按照第一根手指的方向找到第二根手指，再到汽车（数据）。

* * *

**悬空指针**

现在假设你感觉自己很像一尊雕像，你想无限期地握着你的手指向那辆红色的汽车。如果那辆红色汽车开走怎么办？

```
 1     2     3
-------------------
| o=o |     | o=o |
| |B| |     | |G| |
| o-o |     | o-o | 
```

您的指针仍然指向红色汽车所在的位置，*但*不再是。假设一辆新车停在那里……一辆橙色车。现在，如果我再问你，“红色汽车在哪里”，你仍然指着那里，但现在你错了。那不是红色的车，那是橙色的。

* * *

**指针算法**

好的，所以你仍然指向第二个停车位（现在被橙色车占用）

```
 1     2     3
-------------------
| o=o | o=o | o=o |
| |B| | |O| | |G| |
| o-o | o-o | o-o | 
```

好吧，我现在有一个新问题……我想知道*下一个*停车位的汽车颜色。您可以看到您指向的是点 2，因此您只需添加 1 即可指向下一个点。( `finger+1`)，现在因为我想知道那里的数据是什么，所以你必须检查那个位置（不仅仅是手指），这样你就可以顺从指针 ( `*(finger+1)`) 来查看那里有一辆绿色汽车（那个位置的数据)

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2008-08-08T07:54:39.897

[带有一组良好图表的教程示例对理解指针有很大帮助](http://www.augustcouncil.com/~tgibson/tutorial/ptr.html)。

Joel Spolsky 在他的[游击指南面试](http://www.joelonsoftware.com/articles/fog0000000073.html)文章中提出了一些关于理解指针的好观点：

> 出于某种原因，大多数人似乎生来就没有理解指针的大脑部分。这是一个能力问题，而不是技能问题——它需要一种复杂形式的双重间接思维，而有些人就是做不到的。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2009-04-16T23:53:59.210

指针的问题不是概念。这是所涉及的执行和语言。当教师认为是指针的概念是困难的，而不是行话，或者 C 和 C++ 对概念造成的错综复杂的混乱时，会产生额外的混淆。因此，在解释这个概念方面付出了巨大的努力（就像在这个问题的公认答案中一样），这几乎只是浪费在像我这样的人身上，因为我已经理解了所有这些。它只是解释了问题的错误部分。

为了让您了解我来自哪里，我是一个非常了解指针的人，并且我可以在汇编语言中胜任地使用它们。因为在汇编语言中它们不被称为指针。它们被称为地址。当谈到在 C 中编程和使用指针时，我犯了很多错误并且非常困惑。我还没有解决这个问题。让我给你举个例子。

当一个 api 说：

```
int doIt(char *buffer )
//*buffer is a pointer to the buffer 
```

它想要什么？

它可能想要：

表示缓冲区地址的数字

（给它，我说`doIt(mybuffer)`，还是`doIt(*myBuffer)`？）

一个数字，表示地址到缓冲区的地址

（那是`doIt(&mybuffer)`或`doIt(mybuffer)`还是`doIt(*mybuffer)`？）

一个数字，表示地址到地址到地址到缓冲区

（也许那是`doIt(&mybuffer)`。或者是`doIt(&&mybuffer)`吗？甚至`doIt(&&&mybuffer)`）

等等，所涉及的语言并没有说得那么清楚，因为它涉及到“指针”和“引用”这两个词对我来说没有像“x 将地址指向 y”和“这个函数需要一个 y 的地址”。答案还取决于到底“mybuffer”是从什么开始的，以及 doIt 打算用它做什么。该语言不支持在实践中遇到的嵌套级别。就像当我必须将“指针”交给创建新缓冲区的函数时，它会修改指针以指向缓冲区的新位置。它真的要指针，还是指向指针的指针，所以它知道去哪里修改指针的内容。大多数时候我只需要猜测“”是什么意思

“指针”太重了。指针是指向值的地址吗？或者它是一个将地址保存到值的变量。当一个函数想要一个指针时，它是想要指针变量保存的地址，还是想要指针变量的地址？我很困惑。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2010-01-13T14:34:57.983

我认为理解指针的主要障碍是糟糕的老师。

几乎每个人都被教导关于指针的谎言：它们*只不过是内存地址*，或者它们允许您指向*任意位置*。

当然，它们是难以理解的、危险的和半魔法的。

这些都不是真的。指针实际上是相当简单的概念，*只要你坚持 C++ 语言对它们的说法，*并且不要给它们灌输“通常”在实践中可以工作的属性，但语言不能保证，因此不是指针实际概念的一部分。

几个月前，我试图在[这篇博](https://github.com/kgisl/cs8251/blob/master/files/pointerConspiracy2.pdf)文中对此进行解释——希望它会对某人有所帮助。

（注意，在任何人对我迂腐之前，是的，C++ 标准确实说指针*代表*内存地址。但它并没有说“指针是内存地址，只不过是内存地址，可以与内存互换使用或考虑地址”。区别很重要）

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2008-08-22T19:19:11.050

我认为使指针难以学习的原因在于，在指针之前，您对“在此内存位置是一组表示 int、double、字符等的位”的想法感到满意。

当您第一次看到指针时，您并没有真正了解该内存位置的内容。“你的意思是，它有一个*地址*？”

我不同意“要么得到它们要么不得到它们”的概念。

当您开始为它们找到真正的用途时（例如不将大型结构传递给函数），它们会变得更容易理解。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2009-04-17T16:51:08.220

之所以这么难理解，不是因为它是一个难懂的概念，而是因为**语法不一致**。

```
int *mypointer; 
```

您首先了解到变量创建的最左边部分定义了变量的类型。指针声明在 C 和 C++ 中不能这样工作。相反，他们说变量指向左侧的类型。在这种情况下：*`*`mypointer**指向**一个 int。*

我没有完全掌握指针，直到我尝试在 C# 中使用它们（不安全），它们以完全相同的方式工作，但具有逻辑和一致的语法。指针本身就是一个类型。这里*mypointer**是**一个指向 int 的指针。*

```
int* mypointer; 
```

甚至不要让我开始使用函数指针......

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2009-04-29T02:18:09.190

当我只知道 C++ 时，我可以使用指针。我有点知道在某些情况下该做什么，以及从试错中不该做什么。但让我完全理解的是汇编语言。如果你用你编写的汇编语言程序做一些严肃的指令级调试，你应该能够理解很多东西。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2008-08-16T03:28:13.903

我喜欢房屋地址的类比，但我一直认为地址是邮箱本身。通过这种方式，您可以可视化取消引用指针（打开邮箱）的概念。

例如遵循一个链接列表：1）从你的论文开始，地址为 2）转到论文上的地址 3）打开邮箱找到一张新的论文，上面有下一个地址

在线性链表中，最后一个邮箱中没有任何内容（链表的末尾）。在循环链表中，最后一个邮箱包含第一个邮箱的地址。

请注意，第 3 步是取消引用发生的地方，当地址无效时，您将在此崩溃或出错。假设你可以走到一个无效地址的邮箱，想象那里有一个黑洞或什么东西可以把世界翻过来:)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-08-08T06:52:21.863

我认为人们对它有困难的主要原因是因为它通常没有以有趣和引人入胜的方式教授。我希望看到一个讲师从人群中抽出 10 名志愿者，给他们每人一把 1 米的尺子，让他们以一定的姿势站着，用尺子互相指点。然后通过移动人们（以及他们指向标尺的位置）来显示指针算术。这将是一种简单但有效（最重要的是令人难忘）的展示概念的方式，而不会陷入机制中。

一旦你接触到 C 和 C++，对某些人来说似乎变得更难了。我不确定这是因为他们最终将他们没有正确掌握的理论付诸实践，还是因为在这些语言中指针操作本质上更难。我不太记得自己的转换，但我**知道**Pascal 中的指针，然后转到 C 并完全迷失了方向。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-08-10T18:39:07.763

我不认为指针本身令人困惑。大多数人都能理解这个概念。现在您可以考虑多少个指针，或者您对多少个间接级别感到满意。将人们置于边缘并不需要太多。当你的代码出现问题时，它们可能会被程序中的错误意外更改，这一事实也会使它们很难调试。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-04-17T00:23:39.857

我认为这实际上可能是一个语法问题。指针的 C/C++ 语法似乎不一致，而且比它需要的更复杂。

具有讽刺意味的是，真正帮助我理解指针的是在 c++[标准模板库](http://www.sgi.com/tech/stl/stl_introduction.html)中遇到了迭代器的概念。具有讽刺意味的是，我只能假设迭代器被认为是指针的泛化。

有时，在你学会忽略树木之前，你只是看不到森林。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-05-04T08:53:22.550

混淆来自于“指针”概念中混合在一起的多个抽象层。程序员不会对 Java/Python 中的普通引用感到困惑，但指针的不同之处在于它们暴露了底层内存架构的特征。

清晰地分离抽象层是一个很好的原则，而指针不会这样做。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2013-05-22T14:42:08.290

The way I liked to explain it was in terms of arrays and indexes - people might not be familiar with pointers, but they generally know what an index is.

So I say imagine that the RAM is an array (and you have only 10-bytes of RAM):

```
unsigned char RAM[10] = { 10, 14, 4, 3, 2, 1, 20, 19, 50, 9 }; 
```

Then a pointer to a variable is really just the index of (the first byte of) that variable in the RAM.

So if you have a pointer/index `unsigned char index = 2`, then the value is obviously the third element, or the number 4\. A pointer to a pointer is where you take that number and use it as an index itself, like `RAM[RAM[index]]`.

I would draw an array on a list of paper, and just use it to show things like many pointers pointing to the same memory, pointer arithmetic, pointer to pointer, and so on.

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-08-29T18:47:30.713

邮政信箱号码。

这是一条信息，可让您访问其他内容。

（如果你对邮政信箱号码进行算术运算，你可能会遇到问题，因为这封信放在了错误的盒子里。如果有人搬到另一个州——没有转发地址——那么你就有一个悬空指针。开另一方面——如果邮局转发邮件，那么你就有一个指向指针的指针。）

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-04-17T00:34:27.087

通过迭代器来掌握它并不是一个坏方法。但是继续看你会看到 Alexandrescu 开始抱怨它们。

许多前 C++ 开发人员（在放弃该语言之前从不理解迭代器是现代指针）跳到 C# 并仍然相信他们有不错的迭代器。

嗯，问题在于，所有迭代器都与运行时平台（Java/CLR）试图实现的目标完全不同：新的、简单的、每个人都是开发者的用法。这可能很好，但他们在紫皮书中说过一次，甚至在 C 之前和之前都说过：

间接的。

一个非常强大的概念，但如果你一直这样做就不会如此。迭代器很有用，因为它们有助于算法的抽象，另一个例子。编译时是算法的地方，非常简单。你知道代码 + 数据，或者其他语言 C#：

IEnumerable + LINQ + Massive Framework = 300MB 运行时惩罚，通过引用类型实例堆的糟糕、拖拽应用程序..

“Le Pointer 很便宜。”

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2013-04-28T16:04:32.853

上面的一些答案断言“指针并不难”，但没有继续直接解决“指针很难！” 来自。几年前，我辅导过一年级的 CS 学生（只辅导了一年，因为我显然不擅长），我很清楚指针的**想法**并不难。很难理解**为什么以及何时需要指针**。

我认为您不能将这个问题（为什么以及何时使用指针）与解释更广泛的软件工程问题分开。为什么每个变量都不应该*是*全局变量，以及为什么应该将类似的代码分解为函数（即，得到这个，使用*指针*将它们的行为专门化到它们的调用站点）。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-08-08T06:28:48.947

我看不出指针有什么令人困惑的地方。它们指向内存中的一个位置，即它存储内存地址。在 C/C++ 中，您可以指定指针指向的类型。例如：

```
int* my_int_pointer; 
```

表示 my_int_pointer 包含指向包含 int 的位置的地址。

指针的问题在于它们指向内存中的一个位置，因此很容易进入您不应该在的某个位置。作为证据，看看 C/C++ 应用程序中的缓冲区溢出（增加指针）中的众多安全漏洞超过分配的边界）。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-08-22T18:25:52.443

只是为了让事情更加混乱，有时您必须使用句柄而不是指针。句柄是指向指针的指针，因此后端可以移动内存中的内容以对堆进行碎片整理。如果指针在程序中间发生变化，结果是不可预测的，因此您首先必须锁定手柄以确保没有任何东西可以移动到任何地方。

[http://arjay.bc.ca/Modula-2/Text/Ch15/Ch15.8.html#15.8.5](http://arjay.bc.ca/Modula-2/Text/Ch15/Ch15.8.html#15.8.5)比我更连贯地谈论它。:-)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-11-02T23:20:58.180

每个 C/C++ 初学者都有同样的问题，而且这个问题的出现不是因为“指针很难学习”，而是“谁以及如何解释它”。一些学习者通过视觉来口头收集它，解释它的最好方法是使用**“训练”示例**（适合口头和视觉示例）。

其中**“机车”**是**不能**容纳任何东西的指针， **“货车”**是“机车”试图拉（或指向）的东西。之后，您可以对“马车”本身进行分类，它是否可以容纳动物、植物或人（或它们的混合体）。

# firefox - Firebug 不会显示我的某些网站的控制台提要

> ID：5741
> 
> 赞同：6
> 
> 时间：2008-08-08T06:37:32.113
> 
> 标签：firefox, firebug

使用 Firebug v1.20b7 和 Firefox v3.0.1 我经常使用 firebug 进行网络开发。

我经常遇到这样的问题，即 Firebug 不会显示其 Web 控制台来查看`POSTs`和`GETs`. 我可以查看所有其他选项卡，包括 NET 选项卡，它提供了许多与 CONSOLE 选项卡相同的信息。

好奇是否有其他人遇到过这个问题，也许是一个解决方案，或者这可能是 Firebug 的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-30T09:37:52.087

firebug（或者更确切地说，firefox 本身）有一个限制，将在较新的 Firefox 版本之一中修复。

该错误是由于 firebug 需要*第二次*发送数据以监视连接中发生的情况而引起的。

现在在 firefox 主干中有一个特殊的 API 挂钩，可以防止将来出现这种变通方法，这样 firebug 就可以真正监视正在发生的事情:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-08T07:23:43.423

嗯，1.20b7 在技术上是 Firebug 的*测试*版。:)

我在关闭和打开某些功能时遇到了问题，但重新启动 Firefox 似乎经常能解决它。

# .net - .Net 的好的绘图库是什么？

> ID：5743
> 
> 赞同：19
> 
> 时间：2008-08-08T06:40:46.553
> 
> 标签：.net, windows, graphing

我正在编写一些数据采集软件，需要一个足够快的 gui 绘图库来实时更新图形。我一直在使用 Nplot，它对于免费库来说非常好，但我想知道是否有更好的库（最好是免费的或便宜的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-08T07:49:30.297

[这里](http://weblogs.asp.net/gbarnett/archive/2008/06/03/visualising-data.aspx)和[这里](http://weblogs.asp.net/gbarnett/archive/2008/03/23/free-graphing-libraries-for-net-my-thoughts.aspx)有一篇关于这个的好帖子。我在上一个项目中也使用了 NPlot，因为它更易于使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-08T08:54:26.783

如果您需要在 WinForms 应用程序中显示某些内容，那么您可以试用免费的[ZedGraph](http://zedgraph.org/wiki/index.php?title=Main_Page)。如果是 ASP.NET，那么我最近使用[Google Charts](http://code.google.com/apis/chart/)取得了一些不错的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-08T06:48:44.850

嗯，不是免费的。但我们与 Nevron 取得了非常好的结果。他们的支持也很好。

另一个不错的选择是 TeeCharts。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-04T13:59:09.373

ZedGraph 不仅仅是 WinForms，还有一个 Web 控件。这很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-24T20:08:34.313

绝对选择 Zedgraph，我们已经使用它多年了，它在“实时”绘图方面非常出色。Zedgraph 有很好的文档记录，并且有很多可用的示例。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-27T10:43:49.470

如果速度是您最关心的问题，没有什么比 TeeChart 更好的了。它提供的 fastLine 系列在一秒钟内绘制 1000 万个点。最近他们也实时推出了它。我被剧情的速度吓到了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-08T08:04:37.460

您可能想看看[Open Flash Chart](http://teethgrinder.co.uk/open-flash-chart/)。它是一个内置在 Flash 中的开源绘图工具，可以动态更新。

查看[Ajax 示例](http://teethgrinder.co.uk/open-flash-chart/gallery-js-2.php)，了解它可以做什么。

# vb.net - 'break' 的等效 VB 关键字

> ID：5759
> 
> 赞同：109
> 
> 时间：2008-08-08T07:11:40.560
> 
> 标签：vb.net, loops, vb6, exit

我刚搬到这里工作的 Visual Basic 团队。

Visual Basic中的等效关键字是什么`break`，即提前退出循环而不是方法？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2008-08-08T07:13:56.237

在 Visual Basic 6.0 和[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中，您将使用：

*   `Exit For`打破 For 循环
*   `Wend`打破 While 循环
*   `Exit Do`打破 Do 循环

取决于循环类型。有关更多详细信息，请参阅[退出声明](https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/statements/exit-statement)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T19:08:40.813

如果您在函数的 Sub 中并且想要退出它，您可以使用：

```
Exit Sub 
```

或者

```
Exit Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-08T08:37:27.080

`Exit`[construct]，智能感知会告诉你哪些（哪些）在特定的地方是有效的。

# c# - 制表符转义字符？

> ID：5787
> 
> 赞同：73
> 
> 时间：2008-08-08T09:28:41.423
> 
> 标签：c#

我只是在解析一些文本的过程中，不记得 C# 中选项卡的转义字符是什么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2008-08-08T09:30:40.860

轻松一个！"\t"

编辑：事实上，这是官方的：[Escape Sequences](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-11T20:38:15.580

对于需要快速参考可在文字中使用的**C# 转义序列的人：**`string`

> \t 水平制表符（ASCII 码值：9）
> 
> \n 换行（ASCII 码值：10）
> 
> \r 回车（ASCII 码值：13）
> 
> \' 单引号
> 
> \" 双引号
> 
> \\ 反斜杠
> 
> \? 字面问号
> 
> \x12 十六进制的 ASCII 字符（例如 0x12）
> 
> \x1234 十六进制表示法的 Unicode 字符（例如，对于 0x1234）

值得一提的是，这些（在大多数情况下）是通用代码。所以 \t 是 9 而 \n 在 Windows 和 Linux 上是 10 字符值。但是换行序列不是通用的。在 Windows 上它是 \n\r 而在 Linux 上它只是 \n。这就是为什么最好使用`Environment.Newline`根据当前操作系统设置进行调整的原因。使用 .Net Core，它变得非常重要。

# vb.net - IsNothing versus Is Nothing

> ID：5791
> 
> 赞同：133
> 
> 时间：2008-08-08T09:45:29.067
> 
> 标签：vb.net, nothing

Does anyone here use VB.NET and have a strong preference for or against using `IsNothing` as opposed to `Is Nothing` (for example, `If IsNothing(anObject)` or `If anObject Is Nothing...`)? If so, why?

EDIT: If you think they're both equally acceptable, do you think it's best to pick one and stick with it, or is it OK to mix them?

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2008-08-08T12:28:37.483

If you take a look at the MSIL as it's being executed you'll see that it doesn't compile down to the exact same code. When you use IsNothing() it actually makes a call to that method as opposed to just evaluating the expression.

The reason I would tend to lean towards using "Is Nothing" is when I'm negating it becomes "IsNot Nothing' rather than "Not IsNothing(object)" which I personally feel looks more readable.

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-08-11T14:12:57.020

I find that [Patrick Steele](http://weblogs.asp.net/psteele/default.aspx) answered this question best on his blog: [Avoiding IsNothing()](http://weblogs.asp.net/psteele/archive/2005/06/03/410336.aspx)

I did not copy any of his answer here, to ensure Patrick Steele get's credit for his post. But I do think if you're trying to decide whether to use Is Nothing or IsNothing you should read his post. I think you'll agree that Is Nothing is the best choice.

*Edit - VoteCoffe's comment here*

Partial article contents: After reviewing more code I found out another reason you should avoid this: It accepts value types! Obviously, since IsNothing() is a function that accepts an 'object', you can pass anything you want to it. If it's a value type, .NET will box it up into an object and pass it to IsNothing -- which will always return false on a boxed value! The VB.NET compiler will check the "Is Nothing" style syntax and won't compile if you attempt to do an "Is Nothing" on a value type. But the IsNothing() function compiles without complaints. -PSteele – VoteCoffee

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-06-30T16:07:10.720

## You should absolutely avoid using `IsNothing()`

Here are **4 reasons** from the article [**IsNothing() VS Is Nothing**](http://blog.reneorban.com/2011/12/vbnet-isnothing-vs-is-nothing.html)

1.  Most importantly, `IsNothing(object)` has everything passed to it as an object, even value types! Since value types cannot be `Nothing`, it’s a completely wasted check.
    Take the following example:

    ```
     Dim i As Integer
     If IsNothing(i) Then
        ' Do something 
     End If 
    ```

    This will compile and run fine, whereas this:

    ```
     Dim i As Integer
     If i Is Nothing Then
         '   Do something 
     End If 
    ```

    Will not compile, instead the compiler will raise the error:

    > 'Is' operator does not accept operands of type 'Integer'.
    > Operands must be reference or nullable types.

2.  `IsNothing(object)` is actually part of part of the `Microsoft.VisualBasic.dll`.
    This is undesirable as you have an unneeded dependency on the VisualBasic library.

3.  Its slow - 33.76% slower in fact (over 1000000000 iterations)!

4.  Perhaps personal preference, but `IsNothing()` reads like a [Yoda Condition](http://blog.codinghorror.com/new-programming-jargon/). When you look at a variable you're checking its state, with it as the subject of your investigation.

    i.e. does *it* do x? --- **NOT** Is `x`ing a property of *it*?

    So I think `If a IsNot Nothing` reads better than `If Not IsNothing(a)`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2008-08-08T13:11:51.640

I agree with "Is Nothing". As stated above, it's easy to negate with "IsNot Nothing".

I find this easier to read...

```
If printDialog IsNot Nothing Then
    'blah
End If 
```

than this...

```
If Not obj Is Nothing Then
    'blah
End If 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-08T09:49:51.007

VB is full of things like that trying to make it both "like English" and comfortable for people who are used to languages that use () and {} a lot. And on the other side, as you already probably know, most of the time you can use () with function calls if you want to, but don't have to.

I prefer IsNothing()... but I use C and C#, so that's just what is comfortable. And I think it's more readable. But go with whatever feels more comfortable to you.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-08T10:57:27.097

I'm leaning towards the "Is Nothing" alternative, primarily because it seems more OO.

Surely Visual Basic [ain't](http://web.archive.org/web/20050308014055/http://ea.3leaf.com/2004/08/vb_adds_aint_ke.html) got the Ain't keyword.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-08T13:24:51.097

I initially used IsNothing but I've been moving towards using Is Nothing in newer projects, mainly for readability. The only time I stick with IsNothing is if I'm maintaining code where that's used throughout and I want to stay consistent.

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-03-06T04:23:28.023

Is Nothing requires an object that has been assigned to the value Nothing. IsNothing() can take any variable that has not been initialized, including of numeric type. This is useful for example when testing if an optional parameter has been passed.

# sql - 继承数据库？

> ID：5802
> 
> 赞同：9
> 
> 时间：2008-08-08T10:41:00.950
> 
> 标签：sql, database, inheritance, sql-server-2005

有没有办法在数据库中使用继承（特别是在 SQL Server 2005 中）？

假设我有几个像**CreatedOn**和**CreatedBy**这样的字段，我想将其添加到我的所有实体上。我正在寻找一种替代方法，而不是将这些字段添加到每个表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-08T11:08:22.923

SQL Server 2005 中的表之间没有继承之类的东西，正如其他人所指出的那样，您可以在创建表时获得帮助，将必要的列添加到表中，但它不会像您一样继承知道。

把它想象成你的源代码文件的模板。

正如 GateKiller 所提到的，您可以创建一个包含共享数据的表并使用外键引用它，但您要么必须拥有审计挂钩、触发器，要么手动进行更新。

底线：手工作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-08T10:55:20.640

PostgreSQL 有这个特性。只需将其添加到表定义的末尾：

```
INHERITS FROM (tablename[, othertable...]) 
```

子表将拥有其父表的所有列，对父表的更改将更改子表。此外，子表中的所有内容都将出现在对父表的查询中（默认情况下）。不幸的是，索引不会跨越父/子边界，这也意味着您无法确保某些列在父子和子节点中都是唯一的。

据我所知，这不是一个经常使用的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T10:43:41.913

您可以在 Management Studio 的模板窗格中创建一个模板。然后每次要创建新表时使用该模板。

否则，您可以将 CreatedOn 和 CreatedBy 字段存储在引用原始表和 ID 的审计跟踪表中。

做不到这一点，手动做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-08T12:00:55.197

您可以使用数据建模工具，例如 ER/Studio 或 ERWin。这两种工具都有域列，您可以在其中定义可以应用于任何表的列模板。当域发生变化时，关联的列也会发生变化。ER/Studio 还具有触发器模板，您可以构建这些模板并将其应用于任何表。这就是我们无需构建和维护数百个触发器脚本即可更新 LastUpdatedBy 和 LastUpdatedDate 列的方式。

如果您确实创建了一个审计表，那么使用审计表的每个表中的每一行都会有一行。那可能会变得混乱。在我看来，最好将审计列放在每个表中。您可能还想在所有表中放置一个时间戳列。您永远不知道何时并发会成为问题。我们在每个表中放置的数据库审计列是：CreatedDt、LastUpdatedBy、LastUpdatedDt 和 Timestamp。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-08T14:59:43.777

我们有一个 SProc，它将审计列添加到给定的表中，并且（可选地）创建一个历史表和关联的触发器来跟踪对值的更改。不幸的是，公司政策意味着我不能分享，但这确实不难实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-20T12:23:15.623

如果您使用 GUID，您可以创建一个包含 GUID、CreatedOn、CreatedBy 列的 CreateHistory 表。为了填充表，您仍然必须为每个表创建触发器或在应用程序逻辑中处理它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T05:48:00.420

你不想使用继承来做到这一点！当表 B、C 和 D 继承自表 A 时，这意味着查询表 A 将为您提供来自 B、C 和 D 的记录。现在考虑...

从一个中删除；

代替继承，使用 LIKE 代替......

```
CREATE TABLE blah (
    blah_id     serial       PRIMARY KEY
    , something text         NOT NULL
    , LIKE template_table    INCLUDING DEFALUTS
); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T19:25:58.477

Ramesh - 我会在我的 ER 模型中使用超类型和子类型关系来实现这一点。您也有一些不同的物理选择来实现这些关系。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T19:48:13.870

在 OR 映射中，继承映射到父表，其中父表和子表使用相同的标识符

例如

```
create table Object (
    Id int NOT NULL --primary key, auto-increment
    Name varchar(32)
)
create table SubObject (
    Id int NOT NULL  --primary key and also foreign key to Object
    Description varchar(32)
) 
```

SubObject 与 Object 具有外键关系。创建 SubObject 行时，必须先创建一个 Object 行并在两行中​​使用 Id

# sql-server - SQL Server 转义下划线

> ID：5821
> 
> 赞同：413
> 
> 时间：2008-08-08T11:56:36.207
> 
> 标签：sql-server

如何转义下划线字符？

我正在编写类似于以下 where 子句的内容，并希望能够在末尾找到带有 _d 的实际条目。

```
Where Username Like '%_d' 
```

* * *

## 回答 #1

> 赞同：634
> 
> 时间：2008-08-08T11:59:36.340

[LIKE 的 T-SQL 参考](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/like-transact-sql?view=sql-server-ver15#using-wildcard-characters-as-literals)：

> 您可以将通配符模式匹配字符用作文字字符。要将通配符用作文字字符，请将通配符括在方括号中。下表显示了使用 LIKE 关键字和 [ ] 通配符的几个示例。

对于您的情况：

```
... LIKE '%[_]d' 
```

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2012-05-02T14:20:40.310

显然@Lasse 解决方案是正确的，但还有另一种方法可以解决您的问题：T-SQL 运算符`LIKE`定义了可选的[ESCAPE](http://msdn.microsoft.com/en-us/library/ms179859%28v=sql.90%29.aspx)子句，它允许您声明一个字符，该字符会将下一个字符转义到模式中。

对于您的情况，以下 WHERE 子句是等效的：

```
WHERE username LIKE '%[_]d';            -- @Lasse solution
WHERE username LIKE '%$_d' ESCAPE '$';
WHERE username LIKE '%^_d' ESCAPE '^'; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-10-01T10:14:28.840

我有一个类似的问题，使用类似的模式`'%_%'`不起作用 - 正如问题所示:-)

使用`'%\_%'`也不起作用，因为这首先`\`被解释为“在类似之前”。

使用`'%\\_%'`作品。（`\\`双反斜杠）首先转换为单`\`（反斜杠），然后在类似的模式中使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-01T19:50:03.330

这些解决方案完全有意义。不幸的是，两者都没有像预期的那样对我有用。我没有尝试解决它，而是解决了问题：

```
select *
from information_schema.columns 
where replace(table_name,'_','!') not like '%!%'
order by table_name 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-08T12:59:46.140

这对我有用，只需使用转义 `'%\_%'`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-28T18:58:42.450

这些在 SSIS v18.0 中都不适合我，所以我会做这样的事情：

`WHERE CHARINDEX('_', thingyoursearching) < 1`

..我试图忽略其中带有下划线的字符串。如果您想查找带有下划线的内容，只需将其翻转：

`WHERE CHARINDEX('_', thingyoursearching) > 0`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-05T19:26:34.590

Adding `[ ]` did the job for me

```
like '%[\\_]%' 
```

# c# - C# 中的二进制补丁生成

> ID：5831
> 
> 赞同：20
> 
> 时间：2008-08-08T12:22:07.713
> 
> 标签：c#, file, patch

是否有人拥有或知道 C# 中的二进制补丁生成算法实现？

基本上，比较两个文件（指定为*old*和*new*），并生成一个补丁文件，该补丁文件可用于升级*旧文件以与**新*文件具有相同的内容。

实施必须相对较快，并且可以处理大量文件。它应该展示 O(n) 或 O(logn) 运行时。

我自己的算法要么很糟糕（快速但产生巨大的补丁），要么很慢（产生小补丁但运行时间为 O(n^2)）。

任何建议或实施指针都会很好。

具体来说，该实现将用于为我们拥有一台主服务器的各种大型数据文件保持服务器同步。当主服务器数据文件发生变化时，我们也需要更新几个异地服务器。

我做过的最天真的算法，它只适用于可以保存在内存中的文件，如下所示：

1.  从*旧*文件中获取前四个字节，称之为*密钥*
2.  将这些字节添加到字典中，其中*key -> position*，其中*position*是我抓取这 4 个字节的位置，以 0 开头
3.  跳过这四个字节中的第一个，抓取另外 4 个（3 个重叠，1 个），并以相同的方式添加到字典中
4.  *对旧*文件中的所有 4 字节块重复步骤 1-3
5.  *从新*文件的开头，抓取 4 个字节，并尝试在字典中查找它
6.  如果找到，则通过比较两个文件中的字节数，找到最长的匹配项（如果有多个）
7.  *在旧*文件中编码对该位置的引用，并跳过*新*文件中的匹配块
8.  *如果未找到，则从新*文件中编码 1 个字节，然后跳过它
9.  *对新*文件的其余部分重复步骤 5-8

这有点像压缩，没有开窗，所以会占用大量内存。但是，只要我尝试使代码输出最小化，它就相当快，并且会产生很小的补丁。

一种更节省内存的算法使用窗口，但会产生更大的补丁文件。

我在这篇文章中跳过了上述算法的更多细微差别，但如有必要，我可以发布更多细节。然而，我确实觉得我需要一个完全不同的算法，所以对上述算法的改进可能不会让我走得足够远。

* * *

**编辑＃1**：这是对上述算法的更详细描述。

首先，合并这两个文件，这样你就有了一个大文件。记住两个文件之间的切入点。

其次，*抓取 4 个字节并将它们的位置添加到*整个文件中所有内容的字典步骤中。

第三，*从新*文件开始的地方开始循环，尝试定位现有的 4 个字节组合，并找到最长的匹配项。确保我们只考虑旧文件中的位置，或者*新文件中比我们当前所在位置更早的位置*。这确保了我们可以在补丁应用期间重用旧文件和新文件中的材料。

* * *

**编辑#2**：[上述算法的源代码](http://code.google.com/p/lvknet/source/browse/trunk/LVK/IO/Patching/Binary/BinaryPatch.cs)

您可能会收到有关证书存在问题的警告。我不知道如何解决这个问题，所以暂时只接受证书。

源代码使用了我库的其余部分中的许多其他类型，因此该文件并不是它所需要的全部，但这就是算法实现。

* * *

@lomaxx，我试图为 subversion 中使用的算法找到一个很好的文档，称为 xdelta，但除非您已经知道该算法是如何工作的，否则我找到的文档无法告诉我我需要知道什么。

或者也许我只是很密集...... :)

我从您提供的那个站点快速浏览了算法，不幸的是它不可用。来自二进制差异文件的评论说：

> 找到一组最佳差异需要相对于输入大小的二次时间，因此它很快就会变得不可用。

我的需求不是最佳的，所以我正在寻找更实用的解决方案。

不过，感谢您的回答，如果我需要的话，可以在他的实用程序中添加一个书签。

**编辑#1**：注意，我会查看他的代码，看看我是否能找到一些想法，稍后我还会向他发送一封电子邮件，提出问题，但我已经阅读了他引用的那本书，尽管解决方案对找到最佳解决方案，由于时间要求，它在使用中是不切实际的。

**编辑#2**：我肯定会寻找 python xdelta 实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-08T13:03:06.197

抱歉，我无法提供更多帮助。我肯定会继续关注 xdelta，因为我已经多次使用它来生成我们为分发产品而生成的 600MB+ ISO 文件的质量差异，并且它的性能非常好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-12-30T00:07:06.207

[bsdiff](http://www.daemonology.net/bsdiff/)旨在为二进制文件创建非常小的补丁。如其页面所述，它需要`max(17*n,9*n+m)+O(1)`字节的内存并`O((n+m) log n)`及时运行（其中`n`是旧文件`m`的大小，是新文件的大小）。

最初的实现是用 C 语言实现的，但是这里描述了一个 C# 端口[，](http://code.logos.com/blog/2010/12/binary_patching_with_bsdiff.html)并且可以[在此处](https://github.com/LogosBible/bsdiff.net)获得。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-06T21:10:09.710

你看过[VCDiff](http://www.yoda.arachsys.com/csharp/miscutil/usage/vcdiff.html)吗？它是看起来相当活跃的 Misc 库的一部分（最新版本 r259，2008 年 4 月 23 日）。我没用过，但觉得值得一提。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-08T12:48:09.753

可能值得看看其他一些人在这个领域所做的事情，也不一定是在 C# 领域。

[这是一个用 c# 编写的库](http://www.menees.com/index.html)

SVN 也有一个二进制差异算法，我知道在 python 中有一个实现，尽管我无法通过快速搜索找到它。他们可能会给你一些关于在哪里改进你自己的算法的想法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-08T18:26:45.793

如果这是用于安装或分发，您是否考虑过使用 Windows Installer SDK？它具有修补二进制文件的能力。

[http://msdn.microsoft.com/en-us/library/aa370578(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa370578(VS.85).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T20:40:18.110

这是一个粗略的指导方针，但以下是可用于创建二进制补丁的 rsync 算法。

[http://rsync.samba.org/tech_report/tech_report.html](http://rsync.samba.org/tech_report/tech_report.html)

# mysql - 使用 MS Access 作为 MySQL 数据库后端的前端的问题？

> ID：5842
> 
> 赞同：14
> 
> 时间：2008-08-08T12:30:48.633
> 
> 标签：mysql, database, ms-access

两个用户想要共享同一个数据库，最初是用 MS Access 编写的，而不会因单个 MDB 文件而相互冲突。

[我使用它的迁移工具包](http://www.mysql.com/products/tools/migration-toolkit/)（顺便说一句，它运行良好）将表从一个简单的 MS Access 数据库移动到 MySQL ，并设置 Access 以通过 ODBC 链接到这些表。

到目前为止，我遇到了以下问题：

*   您不能在没有主键的情况下在表中插入/更新/删除行（这并不奇怪）。
*   MS Access 中的自动编号字段必须是主键，否则它们最终会成为 MySQL 中的整数列（natch，为什么不是 PK？）
*   这些表被迁移到 MySQL 的 InnoDB 表类型，但访问关系没有成为 MySQL 外键约束。

一旦数据库在使用中，我可以期待任何其他问题吗？特别是当两个用户都在同一张桌子上工作时？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-09-12T13:27:38.617

我知道这个话题不是太新鲜，只是一些额外的解释：

如果您想有效地使用 MS Access，尤其是对于更大的多用户数据库，请执行以下操作：

*   将您的 MDB 拆分为前端应用程序和后端（仅限数据）文件 - 然后您将拥有两个单独的 MDB 文件。

*   将所有带有数据和结构的表迁移到外部数据库中。它可以是：MySQL（运行良好，没有数据库大小限制，需要更多技能，因为它不是 MS 技术，但在许多情况下它是一个不错的选择 - 此外，您可以使用更多 RAM 和额外 CPU 扩展后端，所以一切取决于您的需求和硬件能力）；Oracle（如果你有足够的钱或某种公司许可证）或 Oracle 10g XE（如果这不是问题，数据库大小限制为 4 GB，它将始终使用 1 GB 的 RAM 和 1 个 CPU）， MS SQL Server 2008（在所有情况下都具有 MS Access 前端和 MS SQL Server 后端，但您必须为许可证付费！ - 优点是：紧密集成，两种技术来自同一供应商；

*   将您的 MS Access 前端与后端数据库重新链接。如果您选择 MS SQL Server 作为后端，那么使用 MS Access 中的向导将非常简单。对于 MySQL - 您必须使用 ODBC 驱动程序（它很简单并且效果很好）。对于 Oracle - 请不要使用 Microsoft 的 ODBC 驱动程序。来自 Oracle 的这些将做得更好（您可以比较通过 Oracle ODBC 和 MS Oracle ODBC 驱动程序从 MS Access 到 Oracle 执行 SQL 查询所需的时间）。此时，您将拥有可靠的数据库后端和功能齐全的 MS Access 前端 - MDB 文件。

*   将您的 MDB 前端编译为 MDE - 它会给您带来很大的速度。此外，它是将 MS Access 应用程序分发给最终用户的唯一合理形式。

*   日常工作 - 使用带有 MS Access 前端的 MDE 文件。对于进一步的 MS Access 前端开发，请使用 MDB 文件。

*   不要使用编写不当的 ActiveX 组件来增强 MS Access 前端功能。最好自己写或购买合适的。

*   不要相信 MS Access 存在很多问题的神话 - 这是一个很棒的产品，可以在可能的情况下提供帮助。问题是很多人认为它是一个玩具，或者 MS Access 通常很简单。通常他们自己和他们缺乏知识和经验会产生很多错误和问题。要成功使用 MS Access，了解此工具非常重要 - 这是相同的规则，与其他任何技术一样。

我可以告诉你，我正在使用面向 MySQL 后端的非常先进的 MS Access，我非常满意（作为维护此应用程序的开发人员）。我的朋友们，用户也很满意，因为他们对 GUI（前端）、速度（MySQL）感到非常满意，他们在记录锁定或数据库性能方面没有任何问题。

此外，阅读大量有关良好做法和其他人经验的内容也很重要。我会说在很多情况下 MS Access 是一个很好的解决方案。我知道很多专用的定制系统，它们从私有 MS Access 数据库（MDB 文件）形式的实验开始，然后演变为：拆分的 MS Access（MDE - 前端，MDB - 后端），最后演变为：MS Access 前端（MDE）和“严肃”的数据库后端（主要是 MS SQL Server 和 MySQL）。同样重要的是，您始终可以将您的 MS Access 解决方案用作工作原型 - 您已准备好在数据库中使用后端（假设 MySQL），并且您可以将前端重写为您选择的技术（Web 解决方案？也许是桌面 C#应用程序 - 你需要什么！）。

我希望我能帮助你们中的一些人考虑使用 MS Access 进行工作。

问候， Wawrzyn [http://dcserwis.pl](http://dcserwis.pl)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-12T20:02:41.557

我有一个同样工作的应用程序：一个 MS Access 前端到一个 MySQL 后端。这是一个巨大的痛苦，我最终写了一个 Win32 前端。从我的头上，我遇到了以下问题：

*   ODBC 链接的开发似乎早就停止了。有各种不同的版本浮动——非常混乱。ODBC 链接不支持 Unicode/UTF8，我记得它还有其他问题（尽管有些问题可以通过仔细配置来克服）。
*   您可能想要手动调整您的数据库架构以使其与 MS Access 兼容。我看到您已经发现了所需的代理键（即 int 主键）:-)
*   您应该记住，您可能需要使用传递查询来对 MySQL 数据库进行更复杂的 SQL 操作。
*   使用大量 VBA 时要小心，因为这往往会损坏您的前端文件。定期压缩数据库（使用主菜单、工具 | 数据库实用程序 | 压缩和恢复，或类似的东西 --- 我使用的是荷兰语版本）并进行*大量*备份是必要的。
*   访问往往会导致大量网络流量。就像，真的很多。我一直无法找到解决方案。如果您想密切关注，建议使用网络监视器！
*   Access 坚持将布尔值存储为 0/-1。恕我直言，0/+1 更有意义，我相信这也是 MySQL 中的默认处理方式。不是一个大问题，但如果你的复选框不起作用，你一定要检查这个。

一种可能的替代方法是将后端（带有数据）放在共享驱动器上。我记得这是有据可查的，也在帮助中。您可能想查看[一些关于拆分为前端和后端](http://allenbrowne.com/ser-01.html)以及[在启动时自动重新连接到后端的代码](http://allenbrowne.com/ser-13.html)的一般建议；我还可以向您发送更多示例代码，或在此处发布。

否则，您可能还需要考虑 MS SQL。我没有这方面的经验，但我认为它与 MS Access 一起工作得更好！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T23:06:32.693

加雷斯·辛普森认为：

> 如果只有两个用户，那么如果您将 .mdb 放在共享驱动器上，Access 应该就可以了。

呃没有。没有多用户访问应用程序，每个用户都不应该拥有一个专用的前端副本。这意味着每个用户的工作站上都​​应该有一个 MDB。为什么？因为前端的对象不能很好地共享（不如 Jet 数据表，尽管在这个场景中没有任何一个使用 MySQL 作为后端）。

加雷斯·辛普森继续说道：

> 我相信 Access 的推荐最大并发用户数是 5，但有时我已经将它推到了这一点，并且永远不会被卡住。

不，这是完全不正确的。MDB 用户的理论限制是 255 个。当然，这是不现实的，因为一旦达到大约 20 个用户，您必须仔细编程您的 Access 应用程序才能正常工作（尽管您需要在 Access-to- Jet 应用程序与您为提高任何服务器数据库应用程序的效率所做的事情相同，例如，检索最小的可用数据集）。

在这种情况下，由于每个用户都应该拥有前端 MDB 的单独副本，因此 Access/Jet 的多用户限制根本不相关。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-08T12:35:16.377

我知道这并不能直接回答您的问题，但可能值得查看[用于 Access 的 SQL Server 2005 迁移工具](http://www.microsoft.com/downloads/details.aspx?FamilyID=d842f8b4-c914-4ac7-b2f3-d25fff4e24fb&displaylang=en)。我从未使用过该工具，但它可能值得与 SQL Server 2005 Express Edition 一起使用，以查看是否存在与 MySQL 相同的问题

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-15T04:34:23.507

不要忘记在每条记录上放置一些类型的时间/日期戳。有时 ms access 会认为“另一个用户已更改或删除了记录”并且不允许您进行更改！我发现这很困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-12T14:47:16.110

一般来说，这取决于:)

当应用程序端刚刚通过表单更新数据时，我没有遇到很多问题。当多个用户更新同一行时，您可能会收到警告/错误；但 Access 似乎一直在不断更新其实时记录集。

如果 Alice 已经在使用记录 365，并且 Bob 更新它，然后 Alice 尝试使用她的更改来更新它，则可能会出现问题。我记得，Alice 会收到一条神秘的错误消息。如果您捕获这些错误并至少给他们一个更友好的错误消息，那么用户会更容易。

当我通过 RecordSets 在 VB 代码中编辑记录时，我遇到了更多问题，尤其是在结合编辑表单上的相同数据时。这不一定是多用户问题。但是，您的情况几乎相同，因为您有一个用户与同一数据有多个连接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-11T16:01:53.103

如果只有两个用户，那么如果您将 .mdb 放在共享驱动器上，Access 应该就可以了。

你有没有先尝试过，而不是仅仅假设它会是一个问题。

我相信 Access 的推荐最大并发用户数是 5，但有时我已经将它推到了这一点，并且永远不会被卡住。

另一方面，我曾经在单用户环境（我）中使用 Access 作为 MySQL 的前端。这是一次非常不愉快的体验，我无法想象有两个用户会变得更好。

# php - 将 1 添加到字段

> ID：5846
> 
> 赞同：24
> 
> 时间：2008-08-08T12:34:20.887
> 
> 标签：php, mysql

如何将以下 2 个查询变成 1 个查询

```
$sql    = "SELECT level FROM skills WHERE id = $id LIMIT 1;";
$result = $db->sql_query($sql);
$level  = (int) $db->sql_fetchfield('level');
$db->sql_freeresult($result);

++$level;

$sql    = "UPDATE skills SET level = $level WHERE id = $id;";
$result = $db->sql_query($sql);
$db->sql_freeresult($result); 
```

我在 phpBB mod 中使用它，但要点是我抓住关卡，向其中添加一个然后更新，如果我可以将其作为一个查询来完成，它似乎会更容易和更快。

编辑：`$id`已经被强制为整数，因此这次不需要转义。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-08-08T12:35:53.007

我为此被降级了？

```
$sql = "UPDATE skills SET level = level+1 WHERE id = $id";
$result = $db->sql_query($sql);
$db->sql_freeresult($result); 
```

在 Teifion 的特定情况下，phpBB DDL 将该特定字段列为 NOT NULL，因此不存在递增 NULL 的危险。

在一般情况下，不应使用 NULL 来表示零。递增 NULL*应该*给出 NULL 的答案。如果您是那种认为 NULL=0 的被误导的开发人员，请远离键盘并寻找另一种消遣，那么您只会让我们其他人的生活变得艰难。当然，这是计算机行业，我们凭什么说你错了？如果你没有错，请使用

```
$sql = "UPDATE skills SET level = COALESCE(level,0)+1 WHERE id = $id"; 
```

...但让我们面对现实吧：你错了。如果每个人都从 0 级开始，那么你的 DDL 应该包括

```
level INT DEFAULT '0' NOT NULL 
```

以防程序员在创建记录时忘记设置它。如果不是每个人都从 0 级开始，那么跳过 DEFAULT 并强制程序员在创建时提供一个值。如果有的人是超层次的，对他来说有层次是没有意义的，那么在他的层次上加一个同样没有意义。在这种情况下，从 DDL 中删除 NOT NULL。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-08T12:36:42.113

这边走：

```
UPDATE skills
SET level = level + 1
WHERE id = $id 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-25T01:19:45.817

使用 PDO 和准备好的查询：

```
$query = $db->prepare("UPDATE skills SET level = level + 1 WHERE id = :id")
$query->bindValue(":id", $id);
$result = $query->execute(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-08T12:36:22.863

```
$sql = "UPDATE skills SET level = level + 1 WHERE id = $id"; 
```

我只是希望您在代码中的其他地方进行了适当的清理`$id`！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-08T12:36:27.107

试试这个

```
UPDATE skills SET level = level + 1 WHERE id = $id 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-08T12:37:17.980

怎么样：

```
UPDATE skills SET level = level + 1 WHERE id = $id; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-08-08T12:47:15.853

Mat：这就是问题中粘贴的内容。它没有被编辑，所以我将其归因于 Markdown 中的一个错误。但是，奇怪的是，我注意到了。

还有：是的，`mysql_escape_string()`！

# java - 使用 JNLP 为 Java RCP 自动构建以进行部署

> ID：5855
> 
> 赞同：9
> 
> 时间：2008-08-08T12:40:02.793
> 
> 标签：java, build-automation, rcp, jnlp

我发现了很多关于自动化 Eclipse PDE 过程的资料。我觉得这些消息来源并不能很好地解释正在发生的事情。

我可以通过功能导出在半手动过程中创建可部署包。

自动化过程需要了解 org.eclipse.pde.build 脚本的工作方式。我已经创建了一个构建，但不是针对 JNLP。

问题：

1.  有没有人通过 JNLP 部署过 RCP？
2.  你能够自动化构建吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-09T07:50:31.647

我以前没有这样做过，但我发现[这个网站](http://i-proving.com/space/RCP+and+Java+Web+Start)在网上给出了解释。

# mailto - 大型机构的邮件链接

> ID：5857
> 
> 赞同：13
> 
> 时间：2008-08-08T12:40:48.627
> 
> 标签：mailto

我有一个页面，用户可以在该页面上选择最多许多不同的段落。单击链接（或按钮）时，将打开一封电子邮件并将所有这些段落放入电子邮件正文中，地址并填写主题。但是，对于 mailto 链接，文本可能太长。

有什么办法吗？

* * *

我们正在考虑让一个来自 SQL Server 的 SP 来做这件事，但用户需要一种很好的方式来“查看”电子邮件，然后才能向 50 名高管级员工发送不应该发送的项目......当然还有整个为 IT 做 IT 而不是软件编程。80(

当你为 IT 构建东西时，它并不（有人说不应该）只是功能性的。换句话说，这不是我们唤醒的狗粮，它只是我们必须吃的狗粮。

* * *

我们开始讨论它，并决定“邮件表格”会给我们提供我们正在寻找的东西。

1.  一种非常不同的外观，让用户知道枪已装载并瞄准。
2.  更改/添加文本到电子邮件的能力。
3.  给自己发一份或不发一份。
4.  可以快速编码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-08T12:47:13.653

通过将数据放入表单中，我可以在表单停止工作之前使正文大约 1800 个字符。

代码如下所示：

```
<form action="mailto:youremail@domain.com">
    <input type="hidden" name="Subject" value="Email subject">
    <input type="hidden" name="Body" value="Email body">
    <input type="submit">
</form> 
```

* * *

**编辑**：从 Web 应用程序发送电子邮件的最佳方式当然就是这样做，直接从 Web 应用程序发送，而不是依赖于用户的邮件程序。正如您所发现的，向该程序发送信息的协议是有限的，但是使用基于服务器的解决方案，您当然不会有这些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-08T12:56:31.827

电子邮件内容是否需要在电子邮件中？您能否将大型内容集中存储在某个地方（文件共享/FTP 站点），然后发送指向该内容的链接？

这使收件人多了一个步骤，但您的电子邮件大小保持一致，因此不会因意外的大或过多的内容而遇到可靠性问题。

# c# - WCF 服务 - 向后兼容性问题

> ID：5863
> 
> 赞同：10
> 
> 时间：2008-08-08T12:48:25.197
> 
> 标签：c#, .net, wcf, web-services, backwards-compatibility

我刚刚开始创建一些 WCF 服务，但我需要使它们向后兼容旧版（.NET 1.1 和 2.0）客户端应用程序。

我已经设法让服务为 3.0 和更高版本的客户端正确运行，但是当我使用 basicHttpBinding 端点（我认为这是我需要的兼容性所必需的）发布服务时，该服务会重构我的方法签名。例如

```
public bool MethodToReturnTrue(string seedValue); 
```

在客户端应用程序中显示为

```
public void MethodToReturnTrue(string seedValue, out bool result, out bool MethodToReturnTrueResultSpecified); 
```

我已经为我的自托管控制台应用程序尝试了 app.config 中我能想到的每个配置参数，但我似乎无法按预期实现此功能。我想这可能会导致我的期望存在缺陷，但令我感到惊讶的是，WCF 服务无法处理下层客户端的 bool 返回类型。

我当前的 app.config 看起来像这样。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>  
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="MyServiceTypeBehaviors" Name="MyCompany.Services.CentreService.CentreService">
        <clear />
        <endpoint address="http://localhost:8080/CSMEX"    binding="basicHttpBinding" bindingConfiguration="" contract="IMetadataExchange" />
        <endpoint address="http://localhost:8080/CentreService" binding="basicHttpBinding" bindingName="Compatible" name="basicEndpoint" contract="MyCompany.Services.CentreService.ICentreService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceTypeBehaviors" >
            <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-10T02:09:00.523

啊，这可要了我的命！大约 3 个月前我在工作中做过这个，现在我不记得所有的细节了。

但是，我确实记得您需要 basicHttpBinding，并且不能使用新的序列化程序（这是默认值）；您必须使用“旧”XmlSerializer。

不幸的是，我不再在我做这个的地方工作，所以我不能去看代码。我会打电话给我的老板，看看我能挖出什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-19T10:45:19.497

好的，我们需要在短期内解决这个问题，因此我们提出了“互操作”或兼容层的想法。

糟糕的是，我们所做的只是将传统的 ASMX Web 服务添加到项目中，并使用本机 WCF 调用从中调用 WCF 服务。然后，我们能够将适当的类型返回给客户端应用程序，而无需进行大量重构工作。我知道这是一个 hacky 解决方案，但它是我们拥有如此庞大的遗留代码库的最佳选择。额外的好处是它实际上工作得非常好。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-28T07:42:05.627

您必须使用 XmlSerializer。例如：

```
[ServiceContract(Namespace="CentreServiceNamespace")]
[XmlSerializerFormat(Style=OperationFormatStyle.Document, SupportFaults=true, Use=OperationFormatUse.Literal)]
public interface ICentreService {
    [OperationContract(Action="CentreServiceNamespace/MethodToReturnTrue")]
    bool MethodToReturnTrue(string seedValue);
} 
```

您必须手动设置操作动作名称，因为自动生成的 WCF 名称的构造与 ASMX 动作名称不同（WCF 也包括接口名称，ASMX 不包括）。

您使用的任何数据协定都应使用`[XmlType]`而不是`[DataContract]`.

您的配置文件不需要更改。

# php - 使用 Subversion 构建 PHP 项目的生产版本

> ID：5872
> 
> 赞同：6
> 
> 时间：2008-08-08T12:57:55.880
> 
> 标签：php, svn, scripting, tortoisesvn, build-process

如果您使用 PHP（或者我猜是任何编程语言）并使用 subversion 作为源代码控制，有没有办法让您的项目（例如）：

> C:\Projects\test\.svn
> C:\Projects\test\docs\
> C:\Projects\test\faq.php
> C:\Projects\test\guestbook.php
> C:\Projects\test\index.php
> C: \项目\测试\测试.php

并构建/复制/不管它，所以它会清除某些文件并变成：

> C:\Projects\test\faq.php
> C:\Projects\test\guestbook.php
> C:\Projects\test\index.php

自动地？我已经厌倦了创建一个分支，然后遍历分支并删除所有“.svn”文件夹、docs 目录和我的原型文件。

我知道我可能可以使用 .bat 文件来仅复制我想要的特定文件，但我希望有某种方法可以使用 subversion 来伪忽略文件，它仍然会对其进行版本控制，但你可以在哪里制作忽略您告诉它伪忽略的文件的项目快照。

我知道我在网上某处读到了一些功能，这些功能至少可以让您在没有 .svn 文件夹的情况下进行复制，但我现在找不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-08T13:10:13.250

如果您使用 TortoiseSVN，您可以使用导出功能自动删除所有 .svn 文件。我认为其他 svn 事物具有相同的功能。

右键单击根项目文件夹，然后选择`TortoiseSVN > Export`，并告诉它您想要`.svn`免费目录的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-08T13:07:03.787

手动复制所有文件或首次使用现有方法。然后，由于我认为您在 Windows 平台上，因此安装[SyncToy](http://www.microsoft.com/downloads/details.aspx?FamilyId=E0FC1154-C975-4814-9649-CCE41AF06EB7&displaylang=en)并在[subscribe 方法](http://en.wikipedia.org/wiki/SyncToy#Features)中对其进行配置，这将有效地单向复制自上次伪提交到生产环境以来对已经在生产中的文件所做的更改。如果您想添加一个文件，您可以手动复制它并恢复 SyncToy 操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T17:46:03.800

好的，所以我的最终解决方案是：

使用导出命令导出到与名为“deploy.bat”的文件位于同一目录中的名为“export”的文件夹，然后我运行部署脚本（v1 代表版本 1，这是我目前在此使用的版本项目）此脚本使用 7-Zip，我已将其放在系统路径中，因此我可以将其用作命令行实用程序：

```
rem replace the v1 directory with the export directory
rd /s /q v1
move /y export\newIMS v1
rd /s /q export

rem remove the prepDocs directory from the project
rd /s /q v1\prepDocs

rem remove the scripts directory from the project
rd /s /q v1\scripts

rem remove individual files from project
del v1\.project
rem del v1\inc\testLoad.html
rem del v1\inc\testInc.js

SET /P version=Please enter version number:

rem zip the file up with 7-Zip and name it after whatever version number the user typed in.
7z a -r v%version%.zip v1

rem copy everything to the shared space ready for deployment
xcopy v%version%.zip /s /q /y /i "Z:\IT\IT Security\IT Projects\IMS\v%version%.zip"
xcopy v1 /s /q /y /i "Z:\IT\IT Security\IT Projects\IMS\currentVersion"

rem keep the window open until user presses any key
PAUSE 
```

我没有时间查看 SyncToy 解决方案，所以不要认为这是我拒绝该方法。我只知道如何做到这一点，并且没有时间检查那个（现在在时间紧迫的情况下）。

资料来源：

[http://commandwindows.com/command2.htm](http://commandwindows.com/command2.htm)
[http://www.ss64.com/nt/](http://www.ss64.com/nt/)

# upload - 拖放 ftp 文件上传网页小工具

> ID：5874
> 
> 赞同：5
> 
> 时间：2008-08-08T13:00:37.090
> 
> 标签：upload, ftp

拖放上传小部件似乎从 Web 2.0 的脸上消失了。我记得使用的最后一个是 activex 小部件，并且无法在 IE 以外的任何地方使用它注定了它。您最近使用过或看过其中一种吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-08T13:18:34.307

[Dojo Toolkit](http://dojotoolkit.org/) JavaScript 库支持一些我在 IE6+ 和 FF2+ 中看到的拖放功能。Dojo 和其他 JS 库的好处是它们抽象出所有浏览器检测的东西。

我确信其他 JS 库支持此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-08T13:03:38.300

[Yahoo Widgets 的FTP Drop](http://widgets.yahoo.com/widgets/ftp-drop)允许您将文件拖到小部件上，文件将被发送到定义的 ftp 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-08T17:35:20.407

我们当前的项目大量使用拖放，使用[GWT](http://code.google.com/webtoolkit/)和[gwt-dnd](http://code.google.com/p/gwt-dnd/)你可以做一些非常酷的事情。基于标准，适用于 IE6、Safari、Firefox、Opera 等。

我相信如何传输文件的问题是一个单独的问题。

至于 FTP 支持，我认为它主要被 HTTP 文件上传支持所取代。

如果您需要更大的灵活性（进度条、多个文件选择），那么您可以使用 Flash 来完成此操作。您可以使用 Javascript 与执行文件传输的隐形 Flash 应用程序进行交互。YUI 的文件上传控制就是这样做的。您可以在 Flickr 的增强上传页面上看到一个示例。

我们已经构建了一个专为与 GWT 应用程序一起使用的自定义版本。相同的概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-01T14:47:11.670

You can upload to FTP in browser with an applet such as JFileUpload. See: [http://www.jfileupload.com/products/jfileupload/index.html](http://www.jfileupload.com/products/jfileupload/index.html)

[Disclosure: This is my site]

It supports regular FTP, FTPS (explicit and implicit) and SFTP (FTP + SSH). It can resume broken transfer too.

Applets can be moved outside browser since JRE 1.6.0_10.

# dns - 如何防止 dnsmasq 将我的域名附加到无效的域请求中？

> ID：5876
> 
> 赞同：1
> 
> 时间：2008-08-08T13:01:48.757
> 
> 标签：dns, dnsmasq

我使用[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)来解析家庭网络上的 DNS 查询。不幸的是，如果一个域名未知，它会将我自己的域名附加到请求中，这意味着我最终总是在浏览器中查看我自己的网站。

例如，如果我在浏览器中输入[http://dlksfhoiahdsfiuhsdf.com](http://dlksfhoiahdsfiuhsdf.com)，我最终会使用该 URL 查看我自己的网站。如果我尝试类似：

```
host dlksfhoiahdsfiuhsdf.com 
```

而不是预期的：

```
Host dlksfhoiahdsfiuhsdf.com not found: 3(NXDOMAIN) 
```

我明白了：

```
dlksfhoiahdsfiuhsdf.com.mydomainname.com has address W.X.Y.Z. 
```

显然，dnsmasq 将我的域名附加到不可能的名称请求中以解决它们，但我宁愿看到 not found 错误。

我尝试过使用*扩展主机*和*域*配置设置，但无济于事。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-08T14:17:08.760

尝试使用尾随点查询以显式设置根：

```
host dlksfhoiahdsfiuhsdf.com. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T00:06:52.970

它可能不是 dnsmasq 做的，而是你本地的解析器库。如果您使用 unixish，请尝试从 /etc/resolv.conf 中删除“搜索”或“域”行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-22T22:48:21.780

您有通配符域？

dnsmasq 将附加的名称转发到外部 dns 服务器并使用通配符。

您可以使用 --server=/yourinternaldomainhere/ 来确保您的内部域名查找不会被转发出去。

这种情况下的语法是：

--server=/domain/iptoforwardto

在这种情况下，将 iptoforwardto 区域留空，因为您不希望它转发到任何地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T23:54:48.750

可能还有其他原因，但最明显的原因是 /etc/resolv.conf 的配置，以及大多数 DNS 客户端喜欢对错误非常简洁的事实。

```
benc$ host thing.one
Host thing.one not found: 3(NXDOMAIN) 
```

（好吧，我在 DNS 配置中使用了什么？）

```
benc$ cat /etc/resolv.conf 
nameserver 192.168.1.1 
```

（编辑...）

```
benc$ cat /etc/resolv.conf 
search test.com
nameserver 192.168.1.1
benc$ host thing.one
thing.one.test.com has address 64.214.163.132 
```

无需费心进行数据包跟踪，可能的行为是它返回它尝试的最后一个 FQDN 的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-08T13:36:01.230

我尝试从我自己的配置中删除*domain-needed*以复制您的问题，但它没有产生这种行为。这是我能找到的唯一可能接近相关的其他参数。

您的主机文件是什么样的？也许那里发生了一些奇怪的事情，使它认为所有奇怪的域都在您的网络中？

# architecture - 使用 N 层解决方案是否有任何负面原因？

> ID：5880
> 
> 赞同：10
> 
> 时间：2008-08-08T13:04:02.980
> 
> 标签：architecture, n-tier-architecture

我对我的公司很陌生（2 周），我们正在使用 DotNetNuke 的 .NET 3.5 Team Foundation 为我们的系统启动一个新平台。我们的“建筑师”建议我们使用一个类项目。当然，我回想一下“三层”架构（业务、数据、Web 类项目）。

使用这种架构有什么缺点吗？专业人士将代码与数据分离，使类对象远离您的代码等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-08T13:08:40.927

我想一个相当大的缺点是你必须为一个**小**项目编写、管理和维护的额外代码量可能只是过度杀伤力。

这完全取决于项目规模、最终项目的预期寿命和预算是否合适！有时，虽然“正确”做事很有吸引力，但做一些更“轻量级”的事情可能是正确的商业决策！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-08T13:06:16.813

一个没有经验的团队往往需要更长的时间来构建 3 层。代码越多，错误就越多。我只是在扮演魔鬼的拥护者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-08T13:18:38.147

即使它是一个小项目，我也会努力推动 N 分层方法。如果您使用像 codesmith + nettiers 这样的 ORM 工具，您将能够快速设置项目并开发能够快速解决业务问题的代码。

当你开始一个新项目并且你花了几天时间坐在纺车上谈论应该如何构建“架构”时，这让我很生气。您希望花时间解决业务问题，而不是解决其他人为您解决的问题。使用 ORM（不管是哪一个，只需要选择一个并坚持下去）来帮助您获得最初的牵引力，这将有助于您专注于项目的目标，而不是分散您试图解决“架构”问题的注意力。

如果在一天结束时，架构师想要采用单一项目方法，那么您没有理由不能创建一个带有 BLL 和 DAL 文件夹的 app_code 文件夹来分隔代码，这将帮助您转移到一个稍后的 N-Tiered 解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-27T09:45:20.890

因为您希望*能够*将层分布到不同的物理层（我总是使用“层”表示物理层，而“层”表示逻辑层），所以在将所有内容放入一个类之前应该三思而后行，因为你有如果或当您确实需要开始分发时，需要进行重大重构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-08T17:12:24.007

唯一的缺点是复杂性，但与使用数据集相比，添加一些域对象并绑定到它们的列表实际上有多难。您甚至不必创建三个单独的项目，您只需在 Web 应用程序中创建 3 个单独的文件夹，并为每个文件夹指定一个命名空间，例如 YourCompany.YourApp.Domain、YourCompany.YourApp.Data 等。

最大的优势是拥有更灵活的解决方案。如果您开始将您的应用程序编写为以数据为中心的应用程序，将您的 Web 表单页面与数据集强耦合，那么随着业务逻辑的复杂性增长，您将在稍后迁移到更以领域为中心的模型中做更多的工作。

也许在短期内，您通过创建非常简单的域对象并从数据集中填充它们来专注于一个简单的解决方案，然后您可以根据需要向它们添加业务逻辑并根据需要构建更复杂的 ORM，或者使用 nhibernate。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-08T13:58:59.250

与任何抽象都会产生复杂性一样，因此应该适当地证明执行 N 层的复杂性是合理的，例如，N 层实际上是否有益于系统？*将会*有一些小型系统最适合 N 层，尽管其中很多不会。

此外，即使您的系统目前很小，您也可能希望稍后为其添加更多功能——不采用 N 层*可能会对*您造成某种技术债务，因此您必须小心。

# c++ - 链接问题 (VC6)

> ID：5892
> 
> 赞同：11
> 
> 时间：2008-08-08T13:13:08.920
> 
> 标签：c++, visual-c++, linker, visual-c++-6

我打开了一个旧工作区，它是一个库及其测试工具。它过去可以正常工作，但现在不能，旧版本的代码也不能正常工作，出现相同的错误。我试过重新创建项目，这也会导致同样的错误。项目设置中似乎没有任何问题，并且生成的代码在主应用程序中有效。

我已经删除了大部分文件并将其降至最低限度以生成错误。不幸的是，我无法发布该项目，因为它用于生产代码。

我得到的 LNK2001 链接器错误通常意味着我已经离开了一个库或忘记实现一个虚函数。然而，这是标准模板库的一部分 - 并且是一个标题。

在 IOCompletionPort.obj 中列为有问题的代码实际上并没有`std::string`直接使用，而是调用了一个类：`Comms::Exception`接受 a`std::string`和`GetLastError`or的值`WSAGetLastError`。

错误（）中提到的函数`GetMessage`已实现，但它是一个虚函数，因此其他类可以在需要时覆盖它。但是，编译器似乎已将其作为 Ansi 版本，但我在设置中找不到任何可以控制它的选项。我怀疑这可能是问题所在，但由于图书馆的选择方式很少，我无法确定。但是，这两个项目都在编译器选项中指定 _MBCS。

> --------------------配置：TestComms - Win32 调试--------------------链接... Comms.lib(IOCompletionPort.obj)：错误 LNK2001：无法解析的外部符号“公共：虚拟类 std::basic_string,class std::allocator > __thiscall Comms::Exception::GetMessageA(void)const”(?GetMessageA@ Exception@ Comms@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) Debug/TestComms.exe : 致命错误 LNK1120: 1 unresolved externals 执行错误链接.exe。
> 
> TestComms.exe - 2 个错误，0 个警告

有什么建议么？我早上的大部分时间都为此而迷失，也不想下午的大部分时间都迷失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-08T13:30:03.507

一种可能性在于 Win32 ANSI/Unicode “名称修改”，它将符号`GetMessage`转换为`GetMessageA`或`GetMessageW`。有三种可能：

1.  Windows.h 尚未加载，因此`GetMessage`保留`GetMessage`

2.  Windows.h 加载了为 ANSI 设置的符号，因此`GetMessage`变为`GetMessageA`

3.  Windows.h 加载了为 Unicode 设置的符号，因此`GetMessage`变为`GetMessageW`

如果您以触发两种不同场景的方式编译了两个不同的文件，您将收到链接器错误。错误消息表明`Comms::Exception`该类是上面 #2 的实例——也许它在 windows.h 尚未加载的地方使用？

我会代替你做的其他事情，就像例行公事一样：

1) 确保我的包含和库路径不包含我不期望的任何内容。

2) 执行“构建清理”，然后手动验证它，如有必要，删除任何额外的目标文件。

3) 确保 include 语句中没有任何硬编码路径与最初重建项目时的含义不同。

编辑：与格式作斗争:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-09T10:50:00.880

@Curt：我认为你是最接近的。我没有对此进行测试，但我想我在最初的问题中给出了答案。

[GetMessage](http://msdn.microsoft.com/en-us/library/ms644936.aspx)是 Windows.h 中的一个定义，包装在 ifndef 块中，用于在 Ansi (GetMessageA) 和 Unicode (GetMessageW) 之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T13:52:29.013

windows.h 在 IOCompletionPort.h 的顶部被声明为包含 - 我厌倦了看到 7 行只是为了包含 1 个文件，所以我将它包装成自己的文件并包含它自己。这还包含一些额外的#defines（即 ULONG_PTR），因为我们的主应用程序不会在安装了 Platform SDK 的情况下编译：-(

1.  这得到了证实。没有什么是不合适的。
2.  我已经做到了 - 删除了构建目录
3.  我从不使用硬编码路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-08T13:54:35.763

假设您没有在项目设置中删除您不应该拥有的东西（这是我期望像 User32.lib 这样的外部依赖项）：

检查工具 | 选项 | 目录 | 图书馆（从这里记忆中）并确保您不会错过通用的所有花园品种 lib 目录（再次，在我面前没有 VC6，我无法告诉您它们是什么）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T18:52:32.827

这是 Microsoft 处理 ANSI 与 Unicode API 的方式的普遍问题。由于它们都是（或几乎全部）通过为解析为函数名称的“A”或“W”版本的函数名称定义宏来完成的，因此您不能安全地在命名空间/类/结构/枚举/中拥有标识符与 Windows API 名称匹配的函数。

windows.h 宏在所有其他命名空间上运行粗暴。

# c# - 家谱树控制

> ID：5894
> 
> 赞同：18
> 
> 时间：2008-08-08T13:15:34.703
> 
> 标签：c#, controls, tree, genealogy

我的任务是（由我的妻子）创建一个程序，让她跟踪我们家双方的家谱。

有谁知道代表此类信息的具有成本效益（免费）的控件？

我正在寻找的是修改后的组织结构图类型图表/树。修改是任何节点都应该有2个父节点（例如一个孩子应该有一个母亲/父亲）。

到目前为止，我提出的解决方案是拥有两棵树，一棵祖先树和一棵后代树，并将个体作为每棵树的根节点进行检查。它有效，但有点笨重。

我主要在 c# WinForms 中工作，因此最好使用 .Net 类型的控件或源代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-05T16:24:16.443

前几天我实际上发现[了 GRAMPS](http://gramps-project.org/wiki/index.php?title=Main_Page)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-08T13:31:30.523

[Geni](http://www.geni.com/)可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-08T14:15:08.047

如果您真的在寻找可以修改的应用程序，请尝试CodePlex 上的[Family.Show](http://www.codeplex.com/familyshow)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-08T13:30:36.110

当某些东西不适合您的需求并且经常重新发明轮子时，我完全赞成编写您自己的软件。但老实说，这似乎是其中之一，即解决方案是现成的，在这种情况下，以[家谱制造商](http://www.familytreemaker.com/)的形式， 我敢猜测，与你花费的时间相比，你会以 40 美元的价格领先试图让你自己的程序完全符合你的需要。

我目前使用该软件，效果很好。

现在，如果您有兴趣编写它的部分目的是因为您可以这样做并且学习一些东西......那么我无论如何都向您的学习意愿致敬，并希望您找到您正在寻找的控制。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T22:07:30.563

试试基因树。您可以开设一个免费帐户并以交互方式构建家谱。您还可以找到与您的 DNA 匹配的其他人，他们可能是您以前不认识的家庭成员。

如果功能已经存在并且免费，为什么还要编写程序？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-27T22:14:50.277

有很多使用软件的建议，但我想为[The Master Genealogist](http://www.whollygenes.com/)添加一个建议。我发现它比大多数人更适合我的工程思维方式。

几乎没有在线可以匹配独立家谱工具的灵活性，但[TNG](http://lythgoes.net/genealogy/software.php)（下一代家谱网站建设）相当不错。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-08T13:28:45.130

我对此并没有想太多，但我认为你可以在 WPF 中获得一个自定义树视图来做你想做的事。不久前我正在阅读[一篇关于代码项目的文章，它以这种方式实现了一个组织结构图](http://www.codeproject.com/KB/WPF/CustomTreeViewLayout.aspx)......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T21:14:08.127

**Family.Show是一个非常成功的家谱应用程序，您可以从**[Codeplex](http://familyshow.codeplex.com/)获得它的开源软件

# sql-server - 用户对 SQL Server 的访问日志

> ID：5908
> 
> 赞同：7
> 
> 时间：2008-08-08T13:34:38.770
> 
> 标签：sql-server, logging, statistics

我需要获取用户访问我们的日志，`SQL Server`以便跟踪**平均**和**峰值并发使用情况**。是否有隐藏的表格或我缺少的东西为我提供了这些信息？据我所知，我正在查看的应用程序不会在应用程序级别跟踪这一点。

我目前正在研究`SQL Server 2000`，但很快就会转移`SQL Server 2005`，因此非常感谢两者的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-08T13:36:47.923

在 SQL Server 2005 中，转到左侧的树视图并选择服务器（实际服务器的名称）> 管理 > 活动监视器。希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-08T13:38:51.070

*   `2000`你可以使用或`sp_who2`系统`dbo.sysprocesses`表
*   `2005`看看`sys.dm_exec_sessions`DMV _

下面是一个例子

```
SELECT COUNT(*) AS StatusCount,CASE status 
WHEN 'Running' THEN 'Running - Currently running one or more requests' 
WHEN 'Sleeping ' THEN 'Sleeping - Currently running no requests' 
ELSE 'Dormant – Session is in prelogin state' END status 
FROM sys.dm_exec_sessions 
GROUP BY status 
```

# python - 在 Python 中下载之前获取文件的大小

> ID：5909
> 
> 赞同：52
> 
> 时间：2008-08-08T13:35:19.970
> 
> 标签：python, urllib

我正在从 Web 服务器下载整个目录。它工作正常，但我不知道如何在下载之前获取文件大小以比较它是否在服务器上更新。这可以像我从 FTP 服务器下载文件一样完成吗？

```
import urllib
import re

url = "http://www.someurl.com"

# Download the page locally
f = urllib.urlopen(url)
html = f.read()
f.close()

f = open ("temp.htm", "w")
f.write (html)
f.close()

# List only the .TXT / .ZIP files
fnames = re.findall('^.*<a href="(\w+(?:\.txt|.zip)?)".*$', html, re.MULTILINE)

for fname in fnames:
    print fname, "..."

    f = urllib.urlopen(url + "/" + fname)

    #### Here I want to check the filesize to download or not #### 
    file = f.read()
    f.close()

    f = open (fname, "w")
    f.write (file)
    f.close() 
```

* * *

@Jon：感谢您的快速回答。它可以工作，但 Web 服务器上的文件大小略小于下载文件的文件大小。

例子：

```
Local Size  Server Size
 2.223.533  2.115.516
   664.603    662.121 
```

它与 CR/LF 转换有什么关系？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-08-08T14:21:51.107

我已经复制了你所看到的：

```
import urllib, os
link = "http://python.org"
print "opening url:", link
site = urllib.urlopen(link)
meta = site.info()
print "Content-Length:", meta.getheaders("Content-Length")[0]

f = open("out.txt", "r")
print "File on disk:",len(f.read())
f.close()

f = open("out.txt", "w")
f.write(site.read())
site.close()
f.close()

f = open("out.txt", "r")
print "File on disk after download:",len(f.read())
f.close()

print "os.stat().st_size returns:", os.stat("out.txt").st_size 
```

输出这个：

```
opening url: http://python.org
Content-Length: 16535
File on disk: 16535
File on disk after download: 16535
os.stat().st_size returns: 16861 
```

我在这里做错了什么？os.stat().st_size 没有返回正确的大小吗？

* * *

编辑：好的，我想出了问题所在：

```
import urllib, os
link = "http://python.org"
print "opening url:", link
site = urllib.urlopen(link)
meta = site.info()
print "Content-Length:", meta.getheaders("Content-Length")[0]

f = open("out.txt", "rb")
print "File on disk:",len(f.read())
f.close()

f = open("out.txt", "wb")
f.write(site.read())
site.close()
f.close()

f = open("out.txt", "rb")
print "File on disk after download:",len(f.read())
f.close()

print "os.stat().st_size returns:", os.stat("out.txt").st_size 
```

这输出：

```
$ python test.py
opening url: http://python.org
Content-Length: 16535
File on disk: 16535
File on disk after download: 16535
os.stat().st_size returns: 16535 
```

确保您正在打开两个文件以进行二进制读/写。

```
// open for binary write
open(filename, "wb")
// open for binary read
open(filename, "rb") 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-08-08T13:47:26.373

使用 returned-urllib-object 方法`info()`，您可以获取有关检索到的文档的各种信息。获取当前 Google 徽标的示例：

```
>>> import urllib
>>> d = urllib.urlopen("http://www.google.co.uk/logos/olympics08_opening.gif")
>>> print d.info()

Content-Type: image/gif
Last-Modified: Thu, 07 Aug 2008 16:20:19 GMT  
Expires: Sun, 17 Jan 2038 19:14:07 GMT 
Cache-Control: public 
Date: Fri, 08 Aug 2008 13:40:41 GMT 
Server: gws 
Content-Length: 20172 
Connection: Close 
```

这是一个字典，所以要获取文件的大小，你可以`urllibobject.info()['Content-Length']`

```
print f.info()['Content-Length'] 
```

并且要获取本地文件的大小（用于比较），可以使用 os.stat() 命令：

```
os.stat("/the/local/file.zip").st_size 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-04T10:21:43.087

使用HEAD 而不是 GET 的基于[请求](http://python-requests.org)的解决方案（也打印 HTTP 标头）：

```
#!/usr/bin/python
# display size of a remote file without downloading

from __future__ import print_function
import sys
import requests

# number of bytes in a megabyte
MBFACTOR = float(1 << 20)

response = requests.head(sys.argv[1], allow_redirects=True)

print("\n".join([('{:<40}: {}'.format(k, v)) for k, v in response.headers.items()]))
size = response.headers.get('content-length', 0)
print('{:<40}: {:.2f} MB'.format('FILE SIZE', int(size) / MBFACTOR)) 
```

### 用法

> ```
> $ python filesize-remote-url.py https://httpbin.org/image/jpeg
> ...
> Content-Length                          : 35588
> FILE SIZE (MB)                          : 0.03 MB 
> ```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-08T13:41:43.043

文件的大小作为 Content-Length 标头发送。以下是如何使用 urllib 获取它：

```
>>> site = urllib.urlopen("http://python.org")
>>> meta = site.info()
>>> print meta.getheaders("Content-Length")
['16535']
>>> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-08T13:51:23.290

此外，如果您要连接的服务器支持它，请查看[Etags](http://en.wikipedia.org/wiki/HTTP_ETag)以及[If-Modified-Since](http://en.wikipedia.org/wiki/List_of_HTTP_headers#Requests)和[If-None-Match](http://en.wikipedia.org/wiki/List_of_HTTP_headers#Requests)标头。

使用这些将利用网络服务器的缓存规则，如果内容没有更改，将返回[304 Not Modified状态代码。](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-26T09:31:46.327

在 Python3 中：

```
>>> import urllib.request
>>> site = urllib.request.urlopen("http://python.org")
>>> print("FileSize: ", site.length) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-27T05:33:37.410

对于 python3（在 3.5 上测试）方法，我建议：

```
with urlopen(file_url) as in_file, open(local_file_address, 'wb') as out_file:
    print(in_file.getheader('Content-Length'))
    out_file.write(response.read()) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-16T15:56:12.457

对于使用 Python 3 并使用该`requests`包寻找快速解决方案的任何人：

```
import requests 
response = requests.head( 
    "https://website.com/yourfile.mp4",  # Example file 
    allow_redirects=True
)
print(response.headers['Content-Length']) 
```

注意：并非所有响应都有一个`Content-Length`，因此您的应用程序需要检查它是否存在。

```
if 'Content-Length' in response.headers:
    ... # Do your stuff here 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-28T20:45:55.190

@PabloG关于本地/服务器文件大小差异

以下是其可能发生原因的高级说明性解释：

磁盘上的大小有时与数据的实际大小不同。它取决于底层文件系统及其对数据的操作方式。正如您在格式化闪存驱动器时可能在 Windows 中看到的那样，系统会要求您提供“块/集群大小”，它会有所不同 [512b - 8kb]。当一个文件被写入磁盘时，它被存储在磁盘块的“某种链表”中。当某个块用于存储文件的一部分时，不会将其他文件内容存储在同一个块中，因此即使该块没有占用整个块空间，该块也会被其他文件渲染为不可用。

示例：当文件系统被划分为 512b 块时，我们需要存储 600b 的文件，将占用两个块。第一个块将被充分利用，而第二个块将仅使用 88b，剩余的 (512-88)b 将无法使用，导致“file-size-on-disk”为 1024b。这就是 Windows 对“文件大小”和“磁盘大小”有不同表示法的原因。

注意：更小/更大的 FS 块有不同的优点和缺点，所以在使用文件系统之前做更好的研究。

# javascript - 从下拉框中获取文本

> ID：5913
> 
> 赞同：84
> 
> 时间：2008-08-08T13:36:16.877
> 
> 标签：javascript, dom, browser, client-side

这将获取在我的下拉菜单中选择的任何值。

```
document.getElementById('newSkill').value 
```

但是，我无法找出下拉菜单当前显示的文本要使用的属性。我尝试了“文本”然后查看了[W3Schools](http://w3schools.com/)但没有答案，这里有人知道吗？

对于那些不确定的人，这里是下拉框的 HTML。

```
<select name="newSkill" id="newSkill">
    <option value="1">A skill</option>
    <option value="2">Another skill</option>
    <option value="3">Yet another skill</option>
</select> 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2008-08-08T13:54:55.983

根据您的示例 HTML 代码，这是获取当前所选选项的显示文本的一种方法：

```
var skillsSelect = document.getElementById("newSkill");
var selectedText = skillsSelect.options[skillsSelect.selectedIndex].text; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-05-23T09:26:17.967

简单地你可以使用 jQuery 而不是 JavaScript

```
$("#yourdropdownid option:selected").text(); 
```

试试这个。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-08T13:52:02.883

这应该返回所选值的文本值

```
var vSkill = document.getElementById('newSkill');

var vSkillText = vSkill.options[vSkill.selectedIndex].innerHTML;

alert(vSkillText); 
```

道具：@Tanerax 用于阅读问题，知道被问到什么并在其他人弄明白之前回答它。

编辑：DownModed，因为我实际上完全阅读了一个问题，并回答了它，这是一个悲伤的世界。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-08T13:41:11.737

```
document.getElementById('newSkill').options[document.getElementById('newSkill').selectedIndex].value 
```

应该管用

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-02T19:35:55.210

这个工作我自己试过我想我把它贴在这里以防有人需要它......

```
document.getElementById("newSkill").options[document.getElementById('newSkill').selectedIndex].text; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-01T11:55:22.013

将更改事件附加到获取每个选定选项的文本并将它们写入 div 的选择。

您可以使用 jQuery 它非常有面子，成功且易于使用

```
<select name="sweets" multiple="multiple">
  <option>Chocolate</option>
  <option>Candy</option>
  <option>Taffy</option>
  <option selected="selected">Caramel</option>
  <option>Fudge</option>
  <option>Cookie</option>
</select>
<div></div>

$("select").change(function () {
  var str = "";

  $("select option:selected").each(function() {
    str += $( this ).text() + " ";
  });

  $( "div" ).text( str );
}).change(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-25T05:40:31.203

```
function getValue(obj)
{  
   // it will return the selected text
   // obj variable will contain the object of check box
   var text = obj.options[obj.selectedIndex].innerHTML ; 

} 
```

HTML 片段

```
 <asp:DropDownList ID="ddl" runat="server" CssClass="ComboXXX" 
  onchange="getValue(this)">
</asp:DropDownList> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-08T13:40:04.780

这能得到正确答案吗？

```
document.getElementById("newSkill").innerHTML 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-13T23:19:08.650

这是一个简单而简短的方法

```
document.getElementById('elementID').selectedOptions[0].innerHTML 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-12T18:45:29.977

```
 var ele = document.getElementById('newSkill')
    ele.onchange = function(){
            var length = ele.children.length
            for(var i=0; i<length;i++){
                if(ele.children[i].selected){alert(ele.children[i].text)};              
            }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-01T05:00:15.117

```
var selectoption = document.getElementById("dropdown");
var optionText = selectoption.options[selectoption.selectedIndex].text; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-29T05:52:32.843

请尝试以下方法，这是最简单的方法，并且效果很好

```
var newSkill_Text = document.getElementById("newSkill")[document.getElementById("newSkill").selectedIndex]; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-03T10:31:01.820

发现这是一个棘手的问题，但使用这里的想法，我最终得到了使用 PHP 和 Mysqli 填充列表的解决方案：然后使用一些 javascript 来获取工作变量。

```
 <select  id="mfrbtn" onchange="changemfr()" >   
        <option selected="selected">Choose one</option>
            <?php
            foreach($rows as $row)
                {
                echo '<option   value=implode($rows)>'.$row["Mfrname"].'</option>';
                 }
              ?>
          </select> 
```

然后 ：

```
<script language="JavaScript">

    function changemfr()
    {
     var $mfr2=document.getElementById("mfrbtn").selectedOptions[0].text;
     alert($mfr2);
    }
</script> 
```

# visual-studio - 您如何看待代码折叠？

> ID：5916
> 
> 赞同：25
> 
> 时间：2008-08-08T13:38:30.260
> 
> 标签：visual-studio, folding

对于那些在 Visual Studio 环境中的人，您对将任何代码包装在#regions 中感觉如何？（或者如果任何其他 IDE 有类似的东西......）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-08-11T13:17:40.453

十次中有九次，代码折叠意味着你没有使用[SoC 原理](http://en.wikipedia.org/wiki/Separation_of_concerns)来实现它的价值。
我或多或少对部分课程有同样的感觉。如果你有一段你认为太大的代码，你需要把它分成可管理（和可重用）的部分，而不是隐藏或拆分它。
下次有人要改的时候它会咬你，而且看不到一个250行怪物的方法中隐藏的逻辑。

只要有可能，就将一些代码从主类中拉出，并放入助手类或工厂类中。

```
foreach (var item in Items)
{
    //.. 100 lines of validation and data logic..
} 
```

可读性不如

```
foreach (var item in Items)
{
    if (ValidatorClass.Validate(item))
        RepositoryClass.Update(item);
} 
```

反正我的 0.02 美元。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-08T13:42:09.080

[这是在Coding Horror](https://blog.codinghorror.com/the-problem-with-code-folding/)上讨论过的。

我个人的信念是它们是有用的，但就像任何过量的东西都可能太多了。

我用它来将我的代码块排序到：
枚举
声明
构造函数
方法
事件处理程序
属性

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-08T14:08:27.797

有时，您可能会发现自己在一个鼓励或需要#regions 的团队中工作。如果您像我一样无法忍受折腾代码，您可以关闭 C# 的大纲：

1.  选项 -> 文本编辑器 -> C# -> 高级选项卡
2.  取消选中“打开文件时进入大纲模式”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-08T13:56:58.660

虽然我理解杰夫等人的问题。人。有区域，我*不*明白为什么点击`CTRL`+ `M`，`CTRL`+`L`来扩展文件中的所有区域是如此难以处理。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-08T14:24:50.663

我用#Region来隐藏丑陋无用的自动生成代码，真正属于partial类的自动生成部分。但是，在处理旧项目或升级项目时，您并不总是那么奢侈。

至于其他类型的折叠，我一直折叠函数。如果你很好地命名函数，除非你正在测试或（重新）编写它，否则你将永远不必查看内部。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-08T13:40:55.510

我使用具有代码折叠功能的[Textmate](http://macromates.com/)（仅限 Mac），我发现它对折叠功能非常有用，我知道我的“getGet”功能是做什么的，我不需要它占用 10 行非常宝贵的屏幕空间。

我从不使用它来隐藏 for 循环、if 语句或类似语句，除非将代码显示给其他人，我将隐藏他们看到的代码以避免重复显示相同的代码。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-08T14:01:16.750

我更喜欢部分类而不是区域。

其他人对区域的广泛使用也给我一种印象，即某人在某处违反了单一职责原则，并试图用一个对象做太多事情。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-08T19:26:51.740

@[汤姆](https://stackoverflow.com/questions/5916/how-do-you-feel-about-code-folding#5971)

提供了部分类，以便您可以将工具自动生成的代码与代码生成完成后可能需要进行的任何自定义分开。这意味着您的代码在您重新运行 codegen 后保持不变并且不会被覆盖。这是一件好事。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-08T14:08:10.043

我不喜欢部分课程 - 我尝试开发我的课程，以便每个课程都有一个非常清晰、单一的问题，由它负责。为此，我不认为应该将具有明确责任的内容拆分到多个文件中。这就是为什么我不喜欢部分课程。

话虽如此，我对地区持观望态度。大多数情况下，我不使用它们。然而，我每天都在处理包含区域的代码——有些人对它们非常重视（将私有方法折叠到一个区域中，然后每个方法都折叠到它自己的区域中），有些人对它们很轻（折叠枚举，折叠属性等）。到目前为止，我的一般经验法则是，我只在以下情况下将代码放在区域中：（a）数据可能保持静态或不会经常被触及（如枚举），或者（b）如果有方法由于子类化或抽象方法的实现，它们是出于必要而实现的，但同样不会经常被触及。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-12T17:00:35.060

绝不能在方法内部使用区域。它们可以用于对方法进行分组，但必须非常小心地处理，以免代码的读者发疯。通过它们的修饰符折叠方法是没有意义的。但有时折叠可能会增加可读性。例如，在使用外部库时将一些用于解决某些问题的方法进行分组，并且您不想经常访问可能会有所帮助。但是编码人员必须始终寻求解决方案，例如在这个特定示例中使用适当的类包装库。当一切都失败时，使用折叠来提高可读性。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-08-25T13:14:36.923

这只是那些毫无结果的愚蠢讨论之一。如果您喜欢区域，请使用它们。如果您不这样做，请将您的编辑器配置为关闭它们。在那里，每个人都很高兴。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-10-20T08:34:40.937

如果我不必根据我的代码固有的语言特性手动维护区域分组，那么区域折叠会很好。例如，编译器已经知道它是一个构造函数。IDE 的代码模型已经知道它是一个构造函数。但是，如果我想查看构造函数组合在一起的代码视图，出于某种原因，我必须重申这些东西是构造函数的事实，将它们物理地放在一起，然后在它们周围放置一个组。任何其他分割类/结构/接口的方式也是如此。如果我改变主意并希望看到公共/受保护/私人的东西首先分成组，然后按成员类型分组怎么办？

使用区域来标记公共属性（例如）与输入冗余注释一样糟糕，该注释不会对已经从代码本身可辨别的内容添加任何内容。

无论如何，为了避免为此目的使用区域，我编写了一个免费的开源 Visual Studio 2008 IDE 插件，名为 Ora。它自动提供了一个分组视图，大大减少了维护物理分组或使用区域的必要性。[您可能会发现它很有用](http://www.codeplex.com/ora)。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-17T19:23:11.907

我通常发现，在处理诸如 C# 中的事件之类的代码时，大约有 10 行代码实际上只是事件声明的一部分（EventArgs 类、委托声明和事件声明）在它们周围放置一个区域，然后将它们折叠起来的方式使它更具可读性。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-08T13:42:56.757

我个人一直使用#Regions。我发现它有助于我将属性、声明等内容彼此分开。

这可能也是一个很好的答案！

[编码恐怖](https://blog.codinghorror.com/the-problem-with-code-folding/)

编辑：当，帕特打败了我！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-08-12T17:06:10.913

我认为如果使用得当，它是一个有用的工具。在很多情况下，我觉得方法和枚举等经常被折叠的东西应该是小黑箱。除非您出于某种原因必须查看它们，否则它们的内容无关紧要，应尽可能隐藏。但是，我从不折叠私有方法、注释或内部类。方法和枚举真的是我唯一折叠的东西。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-08-12T17:22:38.337

我的方法与这里的其他一些方法类似，使用区域将代码块组织成构造函数、属性、事件等。

Roland Weigelt 的博客文章[“#region ... #endregion 更好的键盘支持”中](http://weblogs.asp.net/rweigelt/archive/2003/07/06/9741.aspx)提供了一组出色的 VS.NET 宏。我多年来一直在使用这些，映射 ctrl+。折叠当前区域并 ctrl++ 展开它。发现折叠/展开所有内容的默认 VS.NET 功能效果要好得多。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-08-08T13:57:31.657

我自己更喜欢#regions，但一位老同事无法忍受隐藏东西。一旦我在一个有 7 个#regions 的页面上工作，我就理解了他的观点，其中至少有 3 个是自动生成的并且具有相同的名称，但总的来说，我认为它们是一种有用的方式来拆分事物并减少所有内容杂乱无章。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-08-08T19:30:57.147

我真的没有使用#region 来组织代码的问题。就个人而言，我通常会为属性、事件处理程序和公共/私有方法等设置不同的区域。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-08-11T13:01:56.337

Eclipse 自己在 Java（或带有插件的 PHP）中完成了其中的一些工作。允许您折叠功能等。我倾向于喜欢它。如果我知道一个函数的作用并且我没有在处理它，我就不需要看它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-08-18T13:20:24.190

[Coding Horror](https://blog.codinghorror.com/the-problem-with-code-folding/)文章实际上也让我想到了这一点。

通常，对于大型类，我会在成员变量、常量和属性周围放置一个区域，以减少我必须滚动浏览的文本量，并将其他所有内容留在区域之外。在表单上，​​我通常会将事物分组为“成员变量、常量和属性”、表单函数和事件处理程序。再一次，这更重要的是，当我只想查看一些事件处理程序时，我不必滚动浏览大量文本。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-08-25T12:55:19.763

Emacs 有一个折叠次要模式，但我只是偶尔启动它。大多数情况下，当我正在研究从另一个物理学家那里继承来的怪物时，他显然没有多少指导或不太关心他/她的编码实践。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-08-28T18:32:08.010

使用区域（或以其他方式折叠代码）**应该**与代码气味（或隐藏它们）或任何其他隐藏代码的想法无关，您不希望人们“轻易”看到。

区域和代码折叠实际上就是提供一种方法来轻松地对可以折叠/折叠/隐藏的代码部分进行分组，以最大限度地减少您当前正在处理的外部“噪音”的数量。如果您设置正确（意味着实际上将您的区域命名为有用的名称，例如包含的方法的名称），那么您可以折叠除当前正在编辑的函数之外的所有内容，并且仍然保持一定程度的上下文，而无需实际查看其他内容代码行。

围绕这些想法可能应该有一些最佳实践类型指南，但我广泛使用区域来为我的代码文件提供标准结构（我对事件、类范围的字段、私有属性/方法、公共属性/方法进行分组）。每个方法或属性也有一个区域，其中区域名称是方法/属性名称。如果我有一堆重载方法，则区域名称是完整的签名，然后整个组被包装在一个只是函数名称的区域中。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-01-27T08:00:40.607

我个人讨厌地区。在我看来，唯一应该在区域中的代码是生成的代码。当我打开文件时，我总是从 Ctrl+M+O 开始。这折叠到方法级别。当您有区域时，您只会看到区域名称。

在签入之前，我对方法/字段进行了逻辑分组，以便在 Ctrl+M+O 之后看起来没问题。如果你需要区域，你的班级必须有很多行。我也发现这很常见。

# 区域 ThisLooksLikeWellOrganizedCodeBecauseIUseRegions

// 总垃圾，这里没有结构

# 端区

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-02-12T09:23:15.367

枚举

特性

.ctors

方法

事件处理程序

这就是我使用区域的全部内容。我不知道你可以在方法中使用它们。

听起来是个糟糕的主意:)

# yahoo-api - API 雅虎印度地图

> ID：5918
> 
> 赞同：5
> 
> 时间：2008-08-08T13:39:03.487
> 
> 标签：yahoo-api, yahoo-maps

[雅虎在http://in.maps.yahoo.com/](http://in.maps.yahoo.com/)上有单独的印度地图（比常规 maps.yahoo.com 有更多详细信息）。但是当我使用 API 时，它会转到默认地图。如何获得对 YMaps India 的 API 访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-08T14:21:09.830

我不了解雅虎，但还有另一个地图网站为印度提供 API。

[http://biz.mapmyindia.com/APIs.html](http://biz.mapmyindia.com/APIs.html)

# svn - 始终使用 SVN 提交相同的文件

> ID：5948
> 
> 赞同：10
> 
> 时间：2008-08-08T13:55:04.453
> 
> 标签：svn

在我的 Web 应用程序中，我有一个通过 $Rev$ 保存当前修订号的文件。这工作正常，除非我不对该文件进行任何更改，它不会被提交。

**无论如何我可以强制单个文件始终提交给 SVN 服务器吗？**

*我正在使用适用于 Windows 的 TortoiseSVN，因此任何代码或分步说明都会有所帮助。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-24T13:31:50.430

基本上，您希望`svnversion`在文件中输出命令。

此类文件通常保存在存储库之外，并由构建脚本自动创建。我建议你这样做。如果您不构建，而只是`svn up`在服务器端构建，则只需调用`svnversion`之后`svn up`或创建一个 shell 脚本来执行这两个操作。

另一方面，如果您**必须**`svnversion`将其保存在存储库中，那么调用预提交挂钩将是您最好的选择。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-25T18:32:54.177

如果您安装了 TortoiseSVN，您还可以使用 SubWCRev 工具。使用该工具来获取修订，而不是滥用 $REV$ 关键字。

1.  创建一个包含您的定义的模板文件，可能类似于

    常量长 WC_REV = $WCREV$;

    在名为 version.h.tmpl 的文件中

2.  在每次构建时，调用 SubWCRev 来创建可以在应用程序中使用的“真实”文件：

    SubWCRev 路径\to\workingcopy 路径\to\version.h.tmpl 路径\to\version.h

这将从 version.h.tmpl 创建文件 version.h，将文本 $WCREV$ 替换为您的工作副本当前所在的修订版。

[SubWCRev](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html)的文档也可能有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-02T15:49:37.070

我想你可能不理解 $Rev$ 标志是如何工作的。Rev 标志的目标不是让这个修订总是提交到 subversion 存储库中。目标是在更新时，Rev 标志将始终是修订版。**您不需要将代码放入包含修订的 subversion 中。**Subversion 非常擅长为您跟踪这些信息。

您可能错过的是，您需要在文件上设置一个属性，以便正确处理 Revision 关键字。

```
svn propset svn:keywords "Revision" file.txt 
```

这将确保无论何时进行更新，$Rev: xxx$ 标志都将更新为当前版本。您无需担心它是如何提交到存储库的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-08T14:28:17.087

@gatekiller：看来 TortoiseSVN 确实支持[Client Side Hooks](http://tortoisesvn.tigris.org/tsvn_1.5_releasenotes.html#client-side-hooks)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-08T14:08:33.957

> 这工作正常，除非我不对该文件进行任何更改，它不会被提交。

如果文件从不更改，为什么每次都需要它提交？

[编辑] @Sean = 我理解他想要做什么，但如果文件永远不会通过钩子或其他进程更新，因此永远不会改变，那么 SVN 将永远不会接受它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-24T12:09:28.133

我建议改变方法，每次提交一个文件意味着将全局修订号隐式保存在该文件中。那里的用户可能需要另一个关键字**GlobalKey ，**[这里](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)解释了它的不存在我实际上没有使用提到*的 svnversion*但是，它可能会引导您找到解决方案。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-24T12:48:16.200

将您的网站从 SVN 部署到 Web 服务器的脚本是否可以更改修订号文件？

不确定在 Windows 上，但使用 bash 脚本，我会做类似的事情。

```
$ version=$(svnversion)
$ svn export . /tmp/staging/
Export complete.
$ echo "Revision: ${version}" > /tmp/staging/version.txt 
```

然后`/tmp/staging/version.txt`将包含“修订：1”（或任何最高修订号）。

您当然可以替换文件中的某些标识符，例如`$Rev$`（而不是`version.txt`按照上面的示例创建）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-08T14:07:49.357

根据您的客户，其中一些提供了一个预提交挂钩，您可以实现一些简单地“接触”文件并将其标记为已更改的东西。如果您使用 Visual Studio 之类的东西，您可以创建一个“接触”文件的后期构建任务，但您必须确保在提交更改之前进行构建。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-08T14:12:15.463

@gradonmantank：因为他希望用最新的修订号更新该文件。你完全阅读了他的问题吗？

预提交挂钩可能会起作用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-08T14:15:49.717

我曾经有一种手动的方式来做到这一点。我将运行一个脚本，该脚本将使用 sed 将注释替换为我的 $Rev$ 文件中的当前时间戳。这样，文件内容会改变，Subversion 会提交它。

我没有做的是把它带到下一步：使用[Subversion 的存储库挂钩](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html#svn.reposadmin.create.hooks)来自动化这个过程。麻烦的是，我不确定您是否可以更改挂钩中的文件内容。该文档似乎表明您不能。

相反，我猜你需要一个小脚本来代替`svn commit`首先更新时间戳然后运行正常提交的命令。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-08T14:28:52.887

提交文件对你没有任何好处。该文件未与内部完整版本一起提交，它仅被关键字替换。如果您查看存储库中的文件，您将看到这一点。

因此，您需要强制以某种方式更新文件。

如果您在 Windows 平台上，则可以使用随 TortoiseSVN 分发的 SubWCRev 工具。文档[在这里](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-08T14:48:29.213

你可以使用 svn pre-commit-hooks 来做到这一点。
我想到的一般想法是创建一个，在提交之前将新的修订号放入文件中（使用 svnlook 获取它）或者可能更改文件上的虚假属性（它必须更改或 SVN 将忽略它）。

有关预提交挂钩的更多信息，我发现[此页面](http://wordaligned.org/articles/a-subversion-pre-commit-hook)很有用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-02T22:03:37.607

我认为确保您的 Web 应用程序中存在具有 SVN 修订号的文件的最佳方法是不提交您提交的文件，而是将其提取为构建脚本的一部分。

如果你使用 maven，你可以使用 maven-buildnumber-plugin 来做到这一点。

# database - 您对使用 UUID 作为数据库行标识符有何看法，尤其是在 Web 应用程序中？

> ID：5949
> 
> 赞同：79
> 
> 时间：2008-08-08T13:55:48.773
> 
> 标签：database, web-applications, uuid

为了简单和（假设的）速度，我一直更喜欢使用长整数作为数据库中的主键。但是当对对象实例使用[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)或类似 Rails 的 URL 方案时，我最终会得到这样的 URL：

```
http://example.com/user/783 
```

然后假设还有 ID 为 782、781、...、2 和 1 的用户。假设有问题的 Web 应用程序足够安全，可以防止人们在未经授权的情况下输入其他号码查看其他用户，a简单的顺序分配的代理键也“泄露”了实例的总数（比这个更早），在这种情况下是用户，这可能是特权信息。（例如，我是 stackoverflow 中的用户 #726。）

[UUID](http://en.wikipedia.org/wiki/Uuid) / GUID会是更好的解决方案吗？然后我可以像这样设置 URL：

```
http://example.com/user/035a46e0-6550-11dd-ad8b-0800200c9a66 
```

不完全简洁，但显示的有关用户的隐含信息较少。当然，它带有“通过默默无闻的安全”的味道，这不能替代适当的安全性，但它似乎至少更安全一点。

这种好处是否值得为 Web 可寻址对象实例实现 UUID 的成本和复杂性？我认为我仍然想使用整数列作为数据库 PK 来加速连接。

还有 UUID 的数据库内表示的问题。我知道 MySQL 将它们存储为 36 个字符的字符串。Postgres 似乎有更有效的内部表示（128 位？），但我自己没有尝试过。有人对此有经验吗？

* * *

更新：对于那些询问仅在 URL 中使用用户名（例如[http://example.com/user/yukondude](http://example.com/user/yukondude)）的人来说，这对于具有唯一名称的对象实例来说工作得很好，但是无数的网络呢？真正只能通过数字识别的应用程序对象？订单、交易、发票、重复的图像名称、stackoverflow 问题……

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-08-08T14:03:00.833

我不能说你问题的网络方面。但是 uuid 非常适合 n 层应用程序。PK 生成可以去中心化：每个客户端生成自己的 pk，没有冲突的风险。而且速度差异一般很小。

确保您的数据库支持高效的存储数据类型（16 字节，128 位）。至少您可以在 base64 中编码 uuid 字符串并使用 char(22)。

我已经将它们与 Firebird 一起广泛使用并推荐。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-08-08T15:20:35.857

值得一提的是，我已经看到一个长时间运行的存储过程（9 秒以上）只需从 GUID 主键切换到整数就可以缩短到几百毫秒的运行时间。这并不是说*显示*GUID 是一个坏主意，但正如其他人所指出的那样，根据定义，加入它们并为它们编制索引不会像使用整数那样快。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-08-08T14:05:56.630

我可以回答你，如果你在 SQL Server 中使用唯一标识符 (GUID) 数据类型并使用 NEWID() 函数来创建值，你会因为页面拆分而产生可怕的碎片。原因是使用 NEWID() 时生成的值不是连续的。SQL 2005 添加了 NEWSEQUANTIAL() 函数来解决这个问题

仍然使用 GUID 和 int 的一种方法是在表中包含一个 guid 和一个 int，以便该 guid 映射到该 int。guid 在外部使用，但在数据库内部使用 int

例如

```
457180FB-C2EA-48DF-8BEF-458573DA1C10    1
9A70FF3C-B7DA-4593-93AE-4A8945943C8A    2 
```

1 和 2 将用于网络应用程序中的连接和 guid。这个表会很窄，查询起来应该很快

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-16T05:24:56.510

为什么要将主键与 URI 结合起来？

为什么不让你的 URI 键是人类可读的（或不可猜测的，取决于你的需要），并且你的主索引整数基于，这样你就可以两全其美。许多博客软件都是这样做的，其中条目的公开 id 由“slug”标识，而数字 id 隐藏在系统内部。

这里的额外好处是您现在拥有一个非常好的 URL 结构，这对 SEO 有好处。显然，对于事务来说这不是一件好事，但对于像 stackoverflow 这样的东西来说，这很重要（参见顶部的 URL ...）。获得独特性并不难。如果您真的很担心，请将 slug 的哈希存储在某个表中的某个地方，并在插入之前进行查找。

**编辑：** Stackoverflow 并没有完全使用我描述的系统，请参阅下面 Guy 的评论。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-08T18:24:15.797

而不是这样的 URL：

```
http://example.com/user/783 
```

为什么没有：

```
http://example.com/user/yukondude 
```

哪个对人类更友好并且不会泄露那一点点信息？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-12T18:20:16.023

您可以使用与行号相关但不连续的整数。例如，您可以取序列 ID 的 32 位并使用固定方案重新排列它们（例如，位 1 变为位 6，位 2 变为位 15，等等）。
这将是一种双向加密，您将确保两个不同的 ID 始终具有不同的加密。
如果花时间生成足够的 ID 并获取架构，这显然很容易解码，但是，如果我正确理解您的问题，您只是不想太容易泄露信息。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-12T21:00:12.877

我们使用 GUID 作为所有表的主键，因为它兼作 MS SQL Server 复制的 RowGUID。当客户突然在世界的另一个地方开设办公室时，它变得非常容易......

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-08T15:10:04.240

我不认为 GUID 会给您带来很多好处。用户讨厌冗长、难以理解的 URL。

创建一个较短的 ID，您可以将其映射到 URL，或强制执行唯一的用户名约定 ( [http://example.com/user/brianly](http://example.com/user/brianly) )。[37Signals](http://gettingreal.37signals.com/)的人可能会嘲笑你在涉及网络应用时担心这样的事情。

顺便说一句，您可以强制您的数据库从基值开始创建整数 ID。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-16T00:31:55.903

这还取决于您关心您的应用程序的内容。对于 n 层应用程序，GUID/UUID 更易于实现，并且更易于在不同数据库之间移植。为了生成整数键，一些数据库本身支持序列对象，而一些数据库需要自定义构建序列表。

整数键可能（我没有数字）为查询和索引性能以及空间使用提供了优势。使用数字键进行直接数据库查询也更容易，复制/粘贴更少，因为它们更容易记住。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-08T13:59:46.673

我使用一个学生管理系统，它使用整数形式的 UUID。他们有一个包含下一个唯一 ID 的表。

尽管从架构的角度来看这可能是一个好主意，但它使日常工作变得困难。有时需要进行批量插入，而拥有 UUID 会使这变得非常困难，通常需要编写游标而不是简单的 SELECT INTO 语句。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-02T03:43:39.030

我在真正的网络应用程序中都试过了。

我的观点是最好使用整数并有简短易懂的 URL。

作为一名开发人员，看到连续整数并知道一些关于总记录数的信息正在泄漏，感觉有点糟糕，但老实说——大多数人可能并不关心，而且这些信息对我的业务从来没有真正重要过。

在我看来，长长的丑陋 UUID URL 对普通用户来说更像是一种关闭。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-08T14:00:49.323

我认为在您的情况下使用 GUID 会是更好的选择。它占用更多空间，但更安全。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-12T19:30:13.137

我认为这是引起准宗教辩论的问题之一，谈论几乎是徒劳的。我只想说使用你喜欢的。在 99% 的系统中，无论您使用哪种类型的密钥，使用一种类型的优势（在其他帖子中说明）永远不会成为问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-07-23T03:39:35.977

YouTube 使用 11 个字符和 base64 编码，提供 11^64 种可能性，而且它们通常很容易编写。我想知道这是否会比完整的 UUID 提供更好的性能。转换为 base 64 的 UUID 将是我认为的两倍。

更多信息可以在这里找到：[https ://www.youtube.com/watch?v=gocwRvLhDf8](https://www.youtube.com/watch?v=gocwRvLhDf8)

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-02-25T10:41:35.423

只要您使用具有高效存储的数据库系统，这些天 HDD 无论如何都很便宜......

我知道 GUID 有时可以使用并带有一些查询开销，但是从安全角度来看，它们是救世主。

通过模糊思考安全性，它们在形成模糊的 URI 和使用表、记录和列定义的安全性构建规范化 DB 时非常合适，GUID 不会出错，尝试使用基于整数的 id 来做到这一点。

# python - 抽象季节/节目/剧集数据的最佳方法

> ID：5966
> 
> 赞同：17
> 
> 时间：2008-08-08T14:05:45.290
> 
> 标签：python, data-structures

基本上，我已经用 Python 为 www.thetvdb.com 编写了一个 API。当前的代码可以在[这里](http://github.com/dbr/tvdb_api/tree/master/tvdb_api.py)找到。

它根据请求从 API 获取数据，并且必须以某种方式存储数据，并通过执行以下操作使其可用：

```
print tvdbinstance[1][23]['episodename'] # get the name of episode 23 of season 1 
```

在类中抽象这些数据的“最佳”方法是`Tvdb()`什么？

我最初使用了一个`Dict()`自动创建子字典的扩展（所以你可以做`x[1][2][3][4] = "something"`而不必做`if x[1].has_key(2): x[1][2] = []`等等）

然后我只是通过做存储数据`self.data[show_id][season_number][episode_number][attribute_name] = "something"`

这工作正常，但没有简单的方法来检查是否`x[3][24]`应该存在（所以我不能提出 season_not_found 异常）。

目前它使用四个类：`ShowContainer`、`Show`和。每一个都是一个非常基本的字典，我可以很容易地在其中添加额外的功能（例如函数）。每个都有,和。`Season``Episode``search()``Show()``__setitem__``__getitem_``has_key`

这工作得很好，如果它的`self.data`字典中有那个季节，我可以检查 Shows，如果没有，`raise season_not_found`. 我也可以检查`Season()`它是否有那一集等等。

现在的问题是它把自己呈现为一个字典，但没有所有的功能，而且因为我覆盖了`__getitem__`and`__setitem__`函数，很容易意外递归调用`__getitem__`（所以我不确定扩展`Dict`类是否会导致问题）。

另一个小问题是将数据添加到 dict 比旧`Dict`方法（原方法`self.data[seas_no][ep_no]['attribute'] = 'something'`）要多得多。见`_setItem`和`_setData`。这还不错，因为它目前只是一个只读的 API 接口（因此 API 的用户应该只检索数据，而不是添加更多数据），但它几乎没有......优雅。

我认为系列类系统可能是最好的方法，但是有没有人有更好的存储数据的想法？并且扩展`ShowContainer`/etc 类`Dict`会导致问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-14T07:08:19.280

好的，你需要的是`classobj`新模块。这将允许您动态构造异常类（`classobj`将字符串作为类名的参数）。

```
import new
myexc=new.classobj("ExcName",(Exception,),{})
i=myexc("This is the exc msg!")
raise i 
```

这给了你：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
__main__.ExcName: This is the exc msg! 
```

请记住，您始终可以通过以下方式获取类名：

```
self.__class__.__name__ 
```

因此，经过一些字符串修饰和连接后，您应该能够获得适当的异常类名称并使用该名称构造一个类对象，然后引发该异常。

PS - 你也可以提高字符串，但这已被弃用。

```
raise(self.__class__.__name__+"Exception") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-08T16:45:50.117

为什么不使用 SQLite？Python 有很好的支持，您可以编写 SQL 查询来获取数据。这是[sqlite3的 Python 文档](http://docs.python.org/lib/module-sqlite3.html)

* * *

如果你不想使用 SQLite，你可以做一个 dicts 数组。

```
episodes = []
episodes.append({'season':1, 'episode': 2, 'name':'Something'})
episodes.append({'season':1, 'episode': 2, 'name':'Something', 'actors':['Billy Bob', 'Sean Penn']}) 
```

这样您就可以将元数据添加到任何记录并非常轻松地进行搜索

```
season_1 = [e for e in episodes if e['season'] == 1]
billy_bob = [e for e in episodes if 'actors' in e and 'Billy Bob' in e['actors']]

for episode in billy_bob:
    print "Billy bob was in Season %s Episode %s" % (episode['season'], episode['episode']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-09T15:13:14.293

我过去做过类似的事情，并使用内存中的 XML 文档作为快速而肮脏的分层数据库进行存储。您可以将每个节目/季节/剧集存储为一个元素（适当嵌套），并将这些事物的属性存储为元素上的 xml 属性。然后，您可以使用 XQuery 来获取信息。

**注意：**我不是 Python 人，所以我不知道你的 xml 支持是什么样的。

**注意 2：**您需要对此进行分析，因为它会比您已有的解决方案更大且更慢。如果您正在执行一些大容量处理，那么 XML 可能不会成为您的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-11T20:07:59.520

我在这里没有得到这部分：

> 这工作正常，但没有简单的方法来检查 x[3][24] 是否应该存在（所以我不能提出 season_not_found 异常）

有一种方法可以做到 -**调用**：

```
>>>x={}
>>>x[1]={}
>>>x[1][2]={}
>>>x
{1: {2: {}}}
>>> 2 in x[1]
True
>>> 3 in x[1]
False 
```

这似乎是什么问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-12T17:55:22.233

Bartosz/澄清“这工作正常，但没有简单的方法来检查 x[3][24] 是否应该存在”

`x['some show'][3][24]`将返回“some show”第 3 季第 24 集。如果没有第 3 季，我希望伪字典提高 tvdb_seasonnotfound，如果“某些节目”不存在，则提高 tvdb_shownotfound

当前系统的一系列职业，每个职业都有一个`__getitem__`-Show检查`if self.seasons.has_key(requested_season_number)`，Season职业检查`if self.episodes.has_key(requested_episode_number)`等等。

可以，但是好像有很多重复的代码（每个类基本一样，但是报错不同）

# apache-flex - 如何摆脱“多个 describeType 条目”警告？

> ID：5982
> 
> 赞同：8
> 
> 时间：2008-08-08T14:18:09.913
> 
> 标签：apache-flex, actionscript-3, air

有谁知道为什么在 ComboBox 的 selectedItem 属性上使用 BindingUtils 时会收到以下警告？任何想法如何解决这个问题？

绑定仍然可以正常工作，但最好摆脱警告。

```
warning: multiple describeType entries for 'selectedItem' on type 'mx.controls::ComboBox':
<accessor name="selectedItem" access="readwrite" type="Object" declaredBy="mx.controls::ComboBase">
  <metadata name="Bindable">
    <arg key="" value="valueCommit"/>
  </metadata> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T17:25:15.973

最好覆盖有问题的属性并将其声明为最终属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T06:03:49.627

这是代码。它基本上是为 ComboBox 设置的 BindingUtils.bindProperty 的副本，因此当两者中的任何一个发生更改时，组合框和模型都会更新。

```
public static function bindProperty2(site:Object, prop:String, host:Object, chain:Object, commitOnly:Boolean = false):ChangeWatcher
{
    var cbx:ComboBox = null;
    if ( site is ComboBox ) { cbx = ComboBox(site); }
    if ( host is ComboBox ) { cbx = ComboBox(host); }
    var labelField:String = "listID";

    var w:ChangeWatcher = ChangeWatcher.watch(host, chain, null, commitOnly);

    if (w != null)
    {
        var func:Function;

        if ( site is ComboBox )
        {
            func = function(event:*):void
            {
                var dp:ICollectionView = ICollectionView(site.dataProvider);
                var selItem:Object = null;

                for ( var i:int=0; i<dp.length; i++ )
                {
                    var obj:Object = dp[i];
                    if ( obj.hasOwnProperty(labelField) )
                    {
                        var val:String = String(obj[labelField]);
                        if ( val == w.getValue() )
                        {
                            selItem = obj;
                            break;
                        }
                    }
                }

                site.selectedItem = selItem;
            };

            w.setHandler(func);
            func(null);
        }
        else
        {
            func = function(event:*):void
            {
                var value:Object = w.getValue();
                if ( value == null )
                {
                    site[prop] = null;
                }
                else
                {
                    site[prop] = String(w.getValue()[labelField]);
                }
            };
            w.setHandler(func);
            func(null);
        }
    }

    return w;
} 
```

# .net - 我应该为表单上的公共/受保护组件提供访问器方法/Getter Setter 吗？

> ID：5997
> 
> 赞同：6
> 
> 时间：2008-08-08T14:35:25.353
> 
> 标签：.net, winforms

如果我有一个带有组件/对象（例如我需要从父窗体或其他窗体访问的文本框）的 .Net 窗体，我显然需要将此组件的修饰符“升级”为内部或公共级别的变量。

现在，如果我在我的表单类中提供一个 int 或 string 类型等的公共变量，我不会三思而后行地使用 Getters 和（也许）Setters，即使他们没有做任何事情，只是提供直接访问变量。

但是，VS 设计器似乎没有为那些作为表单组件的公共对象实现此类 Getter/Setter（因此不符合良好的编程习惯）。

所以，问题是；为了做“正确的事情”，我应该将此类 VS 设计器组件或对象包装在 Getter 和/或 Setter 中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-08T14:50:30.130

"*然而，VS 设计者似乎并没有为那些作为表单组件的公共对象实现这样的 Getter/Setter（因此不符合良好的编程习惯）。* "

如果您指的是拖放到表单上的控件，这些控件将被标记为私有实例成员并添加到表单的 Controls 集合中。他们为什么会这样？一个表单可以有四十或五十个控件，为表单上的每个控件提供一个 getter/setter 有点不必要和笨拙。设计者让您通过公共 getter/setter 提供对特定控件的委托访问。

设计师在这里做了正确的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-08T14:42:13.233

我认为没有为表单上的组件实现 Getter 和 Setter 的原因是因为它们不是“线程安全的”.NET 对象假设只能由创建它们的表单线程修改，如果你使用 getter 和 setter您可能会为任何线程打开它。相反，您假设实现一个委托系统，其中对这些对象的更改被委托给创建它们并在那里运行的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-08T15:51:49.770

这是面向对象设计中封装的经典例子。

Form 是一个对象，其职责是向用户呈现 UI 并接受输入。Form对象与其他代码区域之间的接口应该是面向数据的接口，而不是暴露Form内部实现细节的接口。表单的内部工作（即控件）应该对任何消费代码保持隐藏。

一个成熟的解决方案可能会涉及以下设计点：

*   公共方法或属性是行为（显示、隐藏、定位）或面向数据的（设置数据、获取数据、更新数据）。
*   Form 实现的所有事件处理程序都包装在适当的线程委托代码中，以强制执行 Form 线程执行规则。
*   控件本身将数据绑定到底层数据结构（在适当的情况下）以减少代码。

这甚至没有提到元开发之类的东西，比如单元测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-08T14:41:48.697

我总是这样做，如果您遵循 MVP 设计，为您的视图组件创建 getter/setter 将是设计要求。

我不明白您所说的“不符合良好的编程习惯”是什么意思。Microsoft 违反*了许多*良好的编程实践，以便更容易在 Visual Studio 上创建东西（为了快速应用程序开发），我不认为缺少用于控件的 getter/setter 作为违反任何此类最佳实践的证据。******************