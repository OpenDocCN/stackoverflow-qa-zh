# StackOverflow 问答 11899000-11899999

# asp.net-mvc-3 - MVC3 中的默认属性值

> ID：11899002
> 
> 赞同：1
> 
> 时间：2012-08-10T09:38:03.107
> 
> 标签：asp.net-mvc-3, validation, data-annotations, model-validation

我在 MVC3 中有 2 个包含 POCO 实体的类

```
public class TeamMember 
{
  public DateTime JoinDate { get; set; }
  [Required]
  Public string Name{ get; set; }
} 

public class Project
{
   [Required]
   public string Name { get; set; }  
   public DateTime StartDate { get; set; }
} 
```

我想`JoinDate`用 Project设置 TeamMember 的默认值`StartDate`。谁能把我拉出来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:46:54.333

您可以在控制器中执行此操作，例如：

```
if(teamMember.JoinDate == null)
{
    teamMember.JoinDate = project.StartDate;
} 
```

如果`project.StartDate == null`then ，您可以添加更多逻辑`project.StartDate = DateTime.Now`。

不过，我不确定您是否可以将其作为模型本身的默认设置。

**更新**

正如你所拥有的，我认为他们`Project StartDate`看不到`TeamMember JoinDate`，我认为你需要给他们一个一对一的关系。我不确定确切的语法，因为我不在我的工作系统上，但是这样的东西应该可以工作：

```
 public class TeamMember 
    {
      public DateTime JoinDate
      { 
          get { return this.JoinDate; }
          set { JoinDate = this.Project.StartDate; }
      }
      [Required]
      public string Name{ get; set; }
      public virtual Project Project { get; set; }
    } 

    public class Project
    {
       [Required]
       public string Name { get; set; }  
       public DateTime StartDate { get; set; }
    } 
```

**更新 2**

想一想，你需要让 JoinDate 为空，否则它会抛出一个验证错误，然后你需要检查它是否有一个值。更像这样的东西：

```
 public class TeamMember 
    {
      public DateTime? JoinDate
      { 
          get { return this.JoinDate; }
          set
          {
              if(JoinDate == null)
              {
                  JoinDate = this.Project.StartDate;
              }
              else
              {
                  JoinDate = JoinDate;
              }
          }
      }
      [Required]
      public string Name{ get; set; }
      public virtual Project Project { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:46:36.860

我已将 [DefaultValue()] 用于 bool、int、string 数据类型。试试 DateTime，我不确定，但只是给你解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:48:34.627

听起来您需要 TeamMember 类的自定义模型绑定器。这当然假设您在创建 TeamMember 时可以访问 project.StartDate。

# css - 扩展激活下拉菜单的“触发区域”。

> ID：11899006
> 
> 赞同：0
> 
> 时间：2012-08-10T09:38:10.470
> 
> 标签：css, drop-down-menu

![下拉式菜单](../Images/bf6bae983e0110de90d871461580e810.png)

目前，只有当鼠标悬停在电话图标或小箭头区域附近时，当您向下移动光标单击下拉菜单中的链接时，下拉菜单不会消失。

当有人将鼠标悬停在“联系人”一词上时，他一移动光标，下拉菜单就会消失。当用户将光标从单词 'Contact' 向下移动时，我希望下拉菜单保持不变。

HTML：

```
<!DOCTYPE html>
<html>
<head>
<title></title>

<link rel="stylesheet" href="style2.css" type="text/css" />

</head>
<body>

    <div class="Navigation">

        <div id="navbar">
                <ul>
                    <li class="OP" id="OPM1"><img src="images/order.png"   /><a  href="Orders.html">Orders</a></li>

                    <li class="OP"><img src="images/contact.png" /><a href="ContactUs.html">Contact</a>
                            <div class="extended">
                                <div class="arrow-up"></div>

                                <ul class="smallNav">
                                    <li><a href="#">+65-65553333</a></li>
                                    <li><a href="http://www.facebook.com/pages/yourfanpage/12345678" target="_blank">Facebook</a></li>
                                    <li><a href="http://twitter.com/yourtwitter" target="_blank">Twitter</a></li>
                                    <li><a href="www.gmail.com" target="_blank">enquiry [at] foodstant [dot] com</a></li>
                                </ul>
                            </div>
                        </li>

                        </ul>

</div>
</div>
</body>
</html> 
```

CSS：

```
.Navigation { background:background: rgb(246,248,249); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 46%, rgba(215,222,227,1) 65%, rgba(245,247,249,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(46%,rgba(229,235,238,1)), color-stop(65%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */ 
    border-top-left-radius: 10px;
    border-bottom-left-radius:10px;
    border-top-right-radius: 10px; 
    border-bottom-right-radius:10px;

    box-shadow: -3px -5px 10px  #888888;
    font-size: 26px;

    font-family: 'Conv_LITHOSPRO-REGULAR';
}

.Navigation ul li {  position: relative; list-style: none; padding: 17px 10px; }

.Navigation ul li a { font-size: 26px; font-weight: bold; color: white; text-decoration: none; text-shadow: 0 1px 2px black; }

.Navigation ul li:hover { background: url(images/hover.png) repeat-x; height: 43px; -webkit-box-shadow: 0 0px 2px black inset; padding: 20px 9px; border-left: 1px solid #a4a4a4; border-right: 1px solid #a4a4a4;} 

.Navigation ul li:hover { background: none; -webkit-box-shadow: none; -moz-box-shadow: none; height: auto; border: none; }

.arrow-up { width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-bottom: 15px solid #6a6a63; position: absolute; left: 20px; top: -15px; }

.Navigation  ul li .extended { position: absolute; top: 45px; left: 0; width: 220px; background: url(images/dropdownback.png); z-index: 1000; -moz-box-shadow: 0 0px 8px rgba(0,0,0,0.8); -webkit-box-shadow: 0 0px 8px rgba(0,0,0,0.8); box-shadow: 0 0 8px black; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; border: 1px solid white; display: none; color: white; }

.Navigation  ul li .extended img { display: block; margin: 5px auto 15px auto; -webkit-box-reflect:below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.8, transparent), to(rgba(255,255,255,0.5))); }

.Navigation  ul li .extended a { font-size:14px;}

.Navigation  ul li .extended h2, .Navigation ul li .ultraNav h2 { padding-top: 10px; padding-left: 10px; font-size: 16px; text-shadow: 0 1px 2px black; color: white; background: url(images/headerback.png) repeat-x; height: 20px; border-radius: 3px; -webkit-border-radius: 3px; -moz-border-radius: 3px;  }

.Navigation ul li .extended span { padding-left: 10px; font-size: 11px; }

.Navigation  ul li .extended ul.smallNav { border-top: 1px solid rgba(141,141,141,0.50);  padding: 10px; height: 100px;  }

.Navigation ul li .extended ul.smallNav li { width: 200px; padding: 0; line-height: 22px; font-weight: bold; background: url(images/linkback.png) no-repeat; }

.extended ul li {float:left;}

.Navigation  ul li .extended ul.smallNav li:first-child { margin: 0; }

.Navigation  ul li .extended ul.smallNav li:last-child { margin-bottom: 10px; }

.Navigation ul li:hover .extended { display: block; }

.Navigation ul li ul li:hover a { color: white; } 

#navbar {

}

#navbar ul {
    list-style-position:inside;
    padding-top: 10px;
    padding-bottom: 10px;
}

#navbar ul li {     
        display: inline;
        padding:0 20px 0px 0px; 
        margin-bottom: 10px;
        list-style-type:disc;
    }

#navbar ul li.OP {
        padding-left: 15px;

}   

#navbar ul li.OP img {
    vertical-align: middle; 
}

#navbar li a:link {
  color: #EF174A;
  }

#navbar li a:visited {
  color: #BF4100;
  }

 #navbar li a:hover {
  color: black;
  background-color:#D2D2D2;
  border-radius: 10px; 
  }

 #navbar li a:active {
  color: #918FBC;
  } 

li a {
    text-decoration:none;
}  

#navbar ul li.OP a {
    padding-left: 10px;
}

.Navigation  ul li .extended ul.smallNav li a { color: #c7c7c7 !important; text-shadow: none !important;  } 

.Navigation ul li .extended ul.smallNav li a:hover { color: white !important;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:15:03.040

用另一个 DIV包装`arrow-up`DIV，如下所示：

```
<div class="arrow-container"><div class="arrow-up"></div></div> 
```

然后将`arrow-container`样式添加为：

```
.arrow-container { margin-top:-16px; height:16px; } 
```

# c++ - C ++中括号之间用逗号分隔的两个字符串

> ID：11899009
> 
> 赞同：12
> 
> 时间：2012-08-10T09:38:26.087
> 
> 标签：c++, string, comma, parentheses

> **可能重复：**
> [C++ 逗号运算符](https://stackoverflow.com/questions/54142/c-comma-operator)

我今天遇到了意想不到的（至少对我而言）C++ 行为，如下所示：

```
#include <iostream>

int main()
{
  std::cout << ("1", "2") << std::endl;

  return 0;
} 
```

输出：

```
2 
```

这适用于括号之间的任意数量的字符串。在 Visual Studio 2010 编译器和键盘上测试。

我想知道为什么首先要编译，这个“功能”有什么用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T09:42:20.293

啊，这是逗号运算符。当你使用一个逗号和两个（或更多）表达式时，会发生什么是所有表达式都被执行，结果作为一个整体是最后一个表达式的结果。这就是为什么你得到“2”的原因。请参阅[此处](http://en.wikipedia.org/wiki/Comma_operator)以获得更大的解释。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T09:47:13.013

它被称为逗号运算符：在表达式`x, y`中，编译器首先计算`x`（包括所有副作用），然后`y`; 表达式的结果是 的结果`y`。

在您引用的表达式中，它绝对没有用；第一个字符串被简单地忽略。但是，如果第一个表达式有副作用，它可能会很有用。（在我看来，主要是为了混淆，最好避免。）

还要注意，这仅在逗号是运算符时才有效。如果它可以是其他任何东西（例如分隔函数参数的标点符号），它就是。所以：

```
f( 1, 2 );      //  Call f with two arguments, 1 and 2
f( (1, 2) );    //  Call f with one argument, 2 
```

（看。我告诉过你它有利于混淆。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T09:44:05.197

**逗号运算符 ( , )** 逗号运算符 (,) 用于分隔两个或多个表达式，这些表达式包含在只需要一个表达式的情况下。当必须对一组表达式求值时，只考虑最右边的表达式。

例如，下面的代码：

```
a = (b=3, b+2); 
```

参考：http://www.cplusplus.com/doc/tutorial/operators/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:45:33.023

逗号 (",") 的结果是右子表达式。我在 stl 容器的循环中使用它：

```
for( list<int>::iterator = mylist.begin(), it_end = mylist.end(); it != it_end; ++it )
  ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T09:44:03.410

逗号运算符计算逗号两边的表达式，但返回第二个的结果。

# visual-studio - Visual Studio - 将插入符号/光标移动到选择的开始或结束的键盘快捷键

> ID：11899015
> 
> 赞同：5
> 
> 时间：2012-08-10T09:38:50.030
> 
> 标签：visual-studio

几年前，我读到了一个 Visual Studio 快捷方式，如果您有选择，它会将插入符号/光标移动到选择的开头或结尾。

我已经尝试过寻找它，但我终生无法再次找到它。

在下图中，文本被选中，插入符号位于末尾（突出显示的粉红色）。此快捷方式会将插入符号移动到选择的开头（以黄色突出显示）。

![vs选择插入符号移动](../Images/f560084a7127c69b90a7d2b88f2472ac.png)

有谁知道这个快捷方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:33:01.513

我很确定这个命令叫做`Edit.SwapAnchor`. [文档](http://msdn.microsoft.com/en-us/library/s033ke41.aspx)说这个命令：

> 交换当前选择的锚点和端点。

键盘快捷键可能取决于您的 IDE 配置（即，您指出您在首次启动时主要使用哪种语言进行开发），但在我的情况下，它映射到`Ctrl`+ `R`、`Ctrl`+ `P`。这是 C++ 开发人员的默认设置，与 VC++ 6 的默认快捷方式相匹配。

**编辑：**
确实，这就是您要找的那个。根据[VS Tips & Tricks Blog 上的这篇文章](http://ppe.blogs.msdn.com/b/zainnab/archive/2010/06/06/swap-the-current-anchor-position-vstipedit0068.aspx)，键盘快捷键是`Ctrl`+ `K`, `Ctrl`+ `A`。

[回到 VC++ 2](http://technet.microsoft.com/en-us/subscriptions/chc9d01a.aspx)，它被映射到`Ctrl`++ 。:-)`Shift``X`

我会打开工具 -> 选项 -> 环境 -> 键盘，在搜索框中输入“swapanchor”，然后查看它在您的环境中映射到什么。如果您经常使用它，请将其更改为令人难忘的东西。

# preg-match - preg_match 捕获的意外子模式

> ID：11899016
> 
> 赞同：0
> 
> 时间：2012-08-10T09:38:52.837
> 
> 标签：preg-match, pcre

我在 php 中做一些正则表达式并使用 preg_match();

我有一个可能看起来像这样的文本：

```
 $imy = "...without sophisticated apparatus<div class="caption"><div class="caption-inner">
 <img src="http://dev.mysite.org/Heatmap.png" alt="" title="" class="image-thumbnail" />
 Caption text</div></div>Some more text...
 <img src="http://dev.mysite.org/Heatmap.png" alt="" title="" class="image-thumbnail" />blablah..." 
```

我的目标是选择包含在“div”标签（包括“div”标签）中的“img”标签，或者如果它没有包含在 div 中，则只选择“img”。在每种情况下，我还想捕获“img”标签的 src 属性中包含的地址。

这是我使用的模式：

```
$imagepattern = '/<div class="caption-inner[^>]+>.*<img\b[^>]*\bsrc="([^">]*)"[^>]*>.*<\/div>(<\/div>)?|<img\b[^>]*\bsrc="([^">]*)"[^>]*>/Us'; 
```

它适用于“div”封闭图像，但对于没有 div 的图像，我得到捕获的子模式的奇怪结果。

我反复调用 preg_match 并从主题字符串中删除匹配项，然后再将其重新发送到 preg_match。我对 preg_match 的调用如下所示：

```
preg_match($imagepattern,$imy,$image,PREG_OFFSET_CAPTURE) 
```

与无 div 图像标签匹配时，我在图像数组中得到的内容如下所示：

```
$image = [0] => Array
        (
            [0] => <img src="http://dev.molmeth.org/Heatmap.png" alt="" title="" class="image-thumbnail" />
            [1] => 1
        )

    [1] => Array
        (
            [0] =>
            [1] => -1
        )

    [2] => Array
        (
            [0] =>
            [1] => -1
        )

    [3] => Array
        (
            [0] => http://dev.mysite.org/Heatmap.png
            [1] => 11
        ) 
```

$image 数组如何具有 '2' 和 '3' 键？我不是只有一个子模式吗？这是因为模式中的“或”条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:43:46.920

在您的 preg_match 表达式中，您有 3 个捕获组。

整个表达式匹配因为 or （因为您搜索 div 包含的图像或 divless 图像）

对于无 div 图像，仅捕获组 3 将填充数据，捕获组 1 和 2 将为空。

# mysql - Rails - 以 root 身份连接到 MySQL

> ID：11899021
> 
> 赞同：0
> 
> 时间：2012-08-10T09:39:11.933
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, mysql2

我目前正在为我的 Rails 应用程序使用 MySQL。在我的 database.yml 中，我有以下内容：

```
production:
  adapter: mysql2
  database: application_name_production
  username: root
  password: password
  host: localhost 
```

我想知道，以root用户身份连接到数据库可以吗？它会比使用 root 以外的其他用户更不安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:59:20.677

这是以明文形式存储的，所以是的，这是一件非常糟糕的事情。如果有人可以访问您的网络服务器，他可以读取密码。嘿，这可能是用户 root 访问整个系统的相同密码 :)

创建一个只能使用特定于应用程序的数据库的数据库用户。如果有人窃取了您的 database.yml，那么只有该数据可以被窃取/编辑/销毁。请勿使用已在其他地方使用过的密码。

正如您所料，当黑客侵入您的系统时，他会立即使用自动脚本搜索 database.yml 文件。因此，在进入您的系统的一秒钟内，他就可以访问您的所有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:11:16.660

让单独的用户仅对数据库（和任何系统）具有一组所需的权限，这为防止黑客提供了额外的步骤

那么为什么不花 5 分钟创建一个单独的用户来节省数小时从可能的黑客攻击中恢复的时间呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:23:27.070

提供 root 密码（用于系统、数据库等）是非常糟糕的事情。这就像给每一个汤姆、迪克和哈利一套你的前门钥匙。

因此，只需花一点时间创建具有适当权限的用户。这将实现保护系统、数据库、表和可执行操作的完整性的额外优势。

在我看来，我只是使用存储过程来访问网站，并且只允许从存储过程中执行。这确保了当卡片靠近数据库箱时，不会有任何讨厌的东西进入并保持性能。毕竟，网站的数据库是最大的断言之一。

# sql - PostgreSQL 查询以逗号分隔列表的形式返回结果

> ID：11899024
> 
> 赞同：129
> 
> 时间：2012-08-10T09:39:25.527
> 
> 标签：sql, postgresql

假设您有一个`SELECT id from table`查询（实际情况是一个复杂的查询），它确实返回了几个结果。

问题是如何`id`在一行中获得所有返回，逗号分隔？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-08-10T15:09:58.597

`SELECT string_agg(id::text, ',') FROM table`

需要 PostgreSQL 9.0 但这不是问题。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-08-10T11:11:41.660

您可以在查询中使用 array() 和 array_to_string() 函数。与`SELECT array( SELECT id FROM table );`您将得到如下结果：{1,2,3,4,5,6}

然后，如果您想删除 {} 符号，您可以使用 array_to_string() 函数并使用逗号作为分隔符，因此：`SELECT array_to_string( array( SELECT id FROM table ), ',' )`将得到如下结果：1,2,3,4,5,6

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-07-23T23:24:23.510

您可以使用 psql 从任何 SQL 查询生成 CSV：

```
$ psql
> \o myfile.csv
> \f ','  
> \a
> SELECT col1 AS column1, col2 AS column2 ... FROM ... 
```

生成的 myfile.csv 将 SQL 结果集列名称作为 CSV 列标题，将查询元组作为 CSV 行。

h/t [http://pookey.co.uk/wordpress/archives/51-outputting-from-postgres-to-csv](http://pookey.co.uk/wordpress/archives/51-outputting-from-postgres-to-csv)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-17T12:06:13.587

使用 array_to_string() & array() 函数。

```
select array_to_string(array(select column_name from table_name where id=5), ', '); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-26T06:39:48.423

使用下面的查询它将起作用并给出确切的结果。

```
SELECT array_to_string(array_agg(id), ',') FROM table 
```

**输出**：{1,2,3,4,5}

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-01-28T06:36:31.383

```
SELECT array_agg(id, ',') FROM table 
```

> {1,2,3,4}

我正在使用 Postgres 11，而 EntityFramework 将其作为整数数组获取。

# linux - 从服务器删除 TTY_00000000.log 日志

> ID：11899036
> 
> 赞同：0
> 
> 时间：2012-08-10T09:40:00.403
> 
> 标签：linux, logging

我的服务器上有一个名为 TTY_00000000.log 的日志文件，它的大小超过 2GB。谁能让我知道我是否可以清空这个文件以及如何停止创建这个巨大的日志或无论如何最小化它们？

谢谢，

高拉夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:57:46.683

See [this thread](http://lists.us.dell.com/pipermail/linux-poweredge/2008-March/035673.html). Quotes:

> These are a very important debugging tool for the PERC 5 controllers so the ability to disable them is not exposed.
> 
> What you need is a simple logrotate script (Dell should have included one). Compression would save almost all the space since they are a lot of repetitive text.

```
cat > /etc/logrotate.d/omsa-tty <<EOF
/var/log/TTY_00000000.log {
    monthly
    notifempty
    rotate 15
    compress
}
EOF 
```

# javascript - 我如何将 jquery 函数用于多个 div

> ID：11899041
> 
> 赞同：0
> 
> 时间：2012-08-10T09:40:28.373
> 
> 标签：javascript, jquery

我想`<div>`使用 JavaScript/DOM 属性为 a 提供一个显示/隐藏功能。

`onclick()`使用带有两个按钮的JavaScript`show`和`hide`，每个按钮都在它们自己`<div>`的 s 中，它会像这样工作：

*   默认情况下，`show`按钮是隐藏的，显示主`<div>`按钮和隐藏按钮。单击`hide`按钮隐藏主按钮`<div>`和“隐藏”按钮本身，显示`show`按钮。
*   单击`show`按钮显示主要`<div>`和“显示”按钮显示`hide`按钮我认为这可以使用类似的东西来实现`document.getElementById(DIVid).style.visibility="hidden"`。

但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:43:32.187

```
$('#hidebutton').click(function() {
   $('#DIVid, #showbutton').show();
   $(this).hide();
});

$('#showbutton').click(function() {
   $('#DIVid, #hidebutton').show();
   $(this).hide();
}); 
```

或者，如果您愿意：

```
$('#hidebutton, #showbutton').click(function() {
    var show = $(this).is('#showbutton');
    $('#DIVid, #hidebutton').toggle(show);
    $('#showbutton').toggle(!show);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:51:41.530

为每个定义一个类`<div>`并使其具有 jQuery 功能。这是示例代码：

```
<div class="a"></div>
<div class="a"></div>
<div class="a"></div>

Jquery code

$(".a").click(function(e){
your code goes here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:52:40.027

请检查这个：[见演示](http://codebins.com/bin/4ldqp8j)

```
$("#btnclk").click(function() {
    if ($('.test').is(':visible')) {
        $(".test").hide();
    } else {
        $(".test").show();
    }
});

<div class="test">
  Div1
</div>
<div class="test">
  Div1
</div>

<input type="button" id="btnclk" value="Show/Hide"> 
```

或者，如果你想用 JavaScript 来做，那么使用`getElementsByClassName`而不是`getElementById`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:08:28.343

## *[jsBin 演示](http://jsbin.com/ivayoy/1/edit)*

简单的jQuery：

```
$('.show_hide').click(function(){
  $(this).text( $(this).text()==='HIDE'?'SHOW':'HIDE' );
  $(this).next('.box_content').stop().slideToggle();
}); 
```

HTML：

```
 <div class="box">
    <h2>Title 1</h2><button class="show_hide">HIDE</button>
    <div class="box_content">
      <p>
        1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi tempus tortor at nisl dictum lobortis. Mauris dolor augue, porttitor non cursus et, hendrerit sed mi. Morbi sollicitudin sodales dui, et interdum justo condimentum vel.
      </p>

    </div>
  </div> 
```

CSS：

```
.box{
  position:relative;
  padding:15px;
  background:#eee;
  margin:10px;
}
.box h2{
  margin:0px;
  padding:5px;
}
.show_hide{
  position:absolute;
  right:15px;
  top:20px;
  cursor:pointer;
} 
```

# javascript - Android键盘未打开绑定到touchstart的输入标签

> ID：11899044
> 
> 赞同：0
> 
> 时间：2012-08-10T09:40:41.503
> 
> 标签：javascript, android, jquery

标记：

```
<section id="loginform">
  <input type="text" id="username" placeholder="Username"/>
  <input type="password" id="password" placeholder="Password"/>
  <input type="submit" value="login" id="login"/>
</section> 
```

JavaScript：

```
$('#loginform #username').bind('touchstart', function(e) {
   $(this).focus()
})
$('#loginform #password').bind('touchstart', function() {
   $(this).focus()
}) 
```

在 Android (4.0) 上打开此站点并单击用户名或密码的输入字段，没有弹出键盘...如果我执行如下代码：

```
$('#loginform #username').bind('touchstart', function(e) {
    alert("android why u no keyboard show!?")
    $(this).focus()
}) 
```

然后键盘会弹出... Alerting`e.isDefaultPrevented()`返回`false`

知道什么是错的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:51:20.233

试试这个：你也可以把这段代码放在`document.ready`其他地方

```
$('#username').bind('touchstart', function(e) {
   $(this).focus()
})
$('#password').bind('touchstart', function() {
   $(this).focus()
}) 
```

可能其中有一些事件正在冒泡。

# javascript - 每次调用 jquery 函数时递增变 量

> ID：11899054
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:41:20.387
> 
> 标签：javascript, jquery, ajax

这是我的代码，我想在每次调用函数时增加变量 sfrom 的值，当有人滚动到页面底部时触发该函数。

有什么想法吗？

```
<script type="text/javascript">

if (typeof sfrom=="undefined") {
    var sfrom = 0;}
$(function(){

    $('.tainer').scrollPagination(
    {
        'contentPage': 'listitem.php', 
        'contentData': {startfrom:sfrom},  
        'scrollTarget': $(window), 
        'heightOffset': 5, 
        'beforeLoad': function(){

        },
        'afterLoad': function(elementsLoaded){ 
             var i = 0;
             $(elementsLoaded).fadeInWithDelay();

        }
    });   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:45:35.833

*编辑：删除了关于超出范围的注释-不知道 javascript 的范围规则-感兴趣的注释在这里：[https](https://stackoverflow.com/a/61173/117215) ://stackoverflow.com/a/61173/117215 。*

然而，这仍然适用：

你有理由不能这样做吗？

```
var sfrom = 0;

$(function(){

    $('.tainer').scrollPagination(
    {
        'contentPage': 'listitem.php', 
        'contentData': {startfrom:sfrom},  
        'scrollTarget': $(window), 
        'heightOffset': 5, 
        'beforeLoad': function(){

        },
        'afterLoad': function(elementsLoaded){ 
             var i = 0;
             $(elementsLoaded).fadeInWithDelay();
             sfrom++;
        }
    });   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:29:00.883

在这种情况下，ContentData 是静态的。而不是插入一个变量，而是插入一个像这个答案[https://stackoverflow.com/a/8581440/96593](https://stackoverflow.com/a/8581440/96593)或类似的函数

```
var sfrom = 0;

$(function(){

$('.tainer').scrollPagination(
{
    'contentPage': 'listitem.php', 
    'contentData': {startfrom:function() {return sfrom++;}},
    'scrollTarget': $(window), 
    'heightOffset': 5, 
    'beforeLoad': function(){

    },
    'afterLoad': function(elementsLoaded){ 
         var i = 0;
         $(elementsLoaded).fadeInWithDelay();
         sfrom++;
    }
}); 
```

});

# c - 如何在C中的char指针数组中删除

> ID：11899063
> 
> 赞同：1
> 
> 时间：2012-08-10T09:41:44.447
> 
> 标签：c, arrays, string

我想删除其中有“某事”的单元格：

```
char* a[200]; 
```

我该怎么做？我试过这个，但它不起作用！

```
for(i=0;i<100;ti++)
{

 if(strcmp(a[i],"sth")!=0)
    temp[i]=a[i];
}
a=temp  //not sure here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:50:47.237

您不能像这样从数组中删除单元格。您可以将其设置为任意值，例如空字符串。

更难的方法是：

*   计算要删除的项目
*   创建一个新的更小的数组
*   将您需要的项目从旧数组复制到新数组
*   删除旧的。

您可能想知道为什么像这样简单的事情会如此复杂。原因是数组是内存中的数据序列。它就像一个有很多抽屉的办公室。你可以告诉程序把什么放在抽屉里，但你不能真正摆脱它的一部分而不破坏整个局。所以你必须做一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:51:13.560

就像是

```
j=0;
for(i=0;i<100;i++)
{
    a[j]=a[i];
    if(strcmp(a[i],"sth")) {
     j++;
    }else{
     a[j]=0;
    }
} 
```

我没有在这里释放内存，因为我不知道字符串是从哪里来的。如果字符串是用 malloc 分配的，它们应该被释放（如果没有在其他地方使用）

# java - 将私人数据保存到公共位置

> ID：11899067
> 
> 赞同：2
> 
> 时间：2012-08-10T09:42:07.240
> 
> 标签：java, android

我正在尝试使用 PDF Reader 打开我的 PDF 文件，我正在搜索更多关于如何做到这一点的信息，找到了很多答案，但每个答案都告诉我将该文件保存到“SD 卡”。

将文件保存到 SD 卡是个好主意，但问题是如果用户没有在他的手机中安装 SD 卡。目前很多手机都有大内存，例如：三星galaxy S3、HTC One V、三星Galaxy Note、索尼Xperia S等很多手机。

**所以我的问题是**：这些手机已经有很大的内置内存，所以用户不需要添加 SD 卡（这取决于用户）。在这种情况下，其他应用程序（如公共位置（SD 卡））**可以访问哪个位置。**

当我搜索我的问题时，我发现这个[链接](http://developer.android.com/guide/topics/data/data-storage.html)告诉我保存 Android 平台提供的应用程序数据的位置。

Android 平台提供以下选项来保存应用数据：

1.  共享偏好
2.  内部存储器
3.  外置储存
4.  SQLite 数据库
5.  网络连接

Android 提供了一种向其他应用程序公开私有数据的方法——使用内容提供程序

我阅读了有关内容提供商的信息，但我不明白它是如何工作的。

如果任何教程显示它是如何工作的，请提供该教程链接，或者如果可以以其他方式完成，请告诉我如何。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:08:46.367

根据[文档](http://developer.android.com/guide/topics/data/data-storage.html)，您必须将 PDF 保存在公共存储中的唯一真正选择是将其存储在外部存储中。您总是可以让您的应用程序检查外部存储是否可用，如果可用，则使用它来共享您的 PDF。

您可以尝试的另一种方法（我没有尝试过，现在才想到）是将 PDF 写入临时文件，然后共享该临时文件的位置。

[File.createTempFile()](http://developer.android.com/reference/java/io/File.html#createTempFile(java.lang.String,java.lang.String))将创建一个临时文件。您可以尝试查看该临时文件的保存位置，然后其他应用程序是否可以访问该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:49:26.257

您可以使用以下技术进行保存，而不是 SDCard..

1.  共享首选项 例如：--SharedPreferences demo_sp = getApplicationContext() .getSharedPreferences("demo", MODE_PRIVATE); 字符串 dem= demo_sp.getString("DEMO", "demo");
2.  内部存储器
3.  SQLite 数据库，一旦您在 sqlite 中存储任何内容，它将在您手机中的 .db 文件上创建，您可以访问它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:26:14.337

在我的应用程序中，我仅在可用时使用 sdCard，否则使用手机内存。

对于手机内存，您可以获得一个文件对象，如下所示：

```
File file=new File(context.getFilesDir(), FILENAME); 
```

其中 context 当然是一个 Context 对象。然后，您可以像使用具有读/写操作的常规 Java 文件一样使用此文件。

对于 SD 卡存储，您必须首先在清单中声明：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

您应该检查外部存储是否可用：

```
public static boolean hasSdCard(){
    return android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
} 
```

然后就可以得到一个文件对象

```
File file = new File(Environment.getExternalStorageDirectory() + DIRECTORY + FILENAME); 
```

# php - 在 PHP 中动态编辑 XML

> ID：11899068
> 
> 赞同：0
> 
> 时间：2012-08-10T09:42:11.480
> 
> 标签：php, xml, xml-parsing

我正在尝试读取和写入始终不同的 XML 文件。

我想要做的是定义可以为我的 css 中的每个类/id 更改的 CSS 属性（由 php 完成）。

所以一个元素可能看起来像这样：

```
<element id="header">
    <position>left</position>
    <background>#fff</background>
    <color>#000</color>
    <border>2px dotted #GGG</border>
</element> 
```

但是内部节点可能会改变（任何 CSS 属性）。

我想阅读此内容，然后制作一个可以编辑属性的表单（设法做到这一点）。

现在我需要保存 XML。由于 PHP（无法提交您不知道表单元素名称的表单），我无法立即提交完整的表单。我正在尝试使用 Ajax 并在表单中编辑时保存每个节点。(onChange)

所以我知道元素的“id”标签和节点名称。但我找不到直接访问节点并使用 DOMDocument 或 SimpleXML 编辑它的方法。

有人告诉我尝试 XPath，但我无法使用 XPath 进行编辑。

我怎么能尝试这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:07:52.550

```
$xml = <<<XML
<rootNode>
    <element id="header">
        <position>left</position>
        <background>#fff</background>
        <color>#000</color>
        <border>2px dotted #GGG</border>
    </element>
</rootNode>
XML;

// Create a DOM document from the XML string
$dom = new DOMDocument('1.0');
$dom->loadXML($xml);

// Create an XPath object for this document
$xpath = new DOMXPath($dom);

// Set the id attribute to be an ID so we can use getElementById()
// I'm assuming it's likely you will want to make more than one change at once
// If not, you might as well just XPath for the specific element you are modifying
foreach ($xpath->query('//*[@id]') as $element) {
    $element->setIdAttribute('id', TRUE);
}

// The ID of the element the CSS property belongs to
$id = 'header';

// The name of the CSS property being modified
$propName = 'position';

// The new value for the property
$newVal = 'right';

// Do the modification
$dom->getElementById($id)
    ->getElementsByTagName($propName)
    ->item(0)
    ->nodeValue = $newVal;

// Convert back to XML
$xml = $dom->saveXML(); 
```

[看到它工作](http://codepad.viper-7.com/1xMcHS)

# iphone - iOS 网站。使电话号码不可点击

> ID：11899074
> 
> 赞同：3
> 
> 时间：2012-08-10T09:42:29.377
> 
> 标签：iphone, ios, web, click, tel

如果您想让电话号码可点击，您可以使用“tel:”来执行此操作，但反过来呢？如果有 Callerid 并且我希望这个 Callerid 不可点击怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:44:28.270

您应该在 html 页面中添加以下代码，以防止电话号码周围出现超链接：

```
<meta name="format-detection" content="telephone=no" /> 
```

# java - 在实例化抽象类中导航，我的 OOP 设计是否存在缺陷？

> ID：11899075
> 
> 赞同：0
> 
> 时间：2012-08-10T09:42:40.900
> 
> 标签：java, oop, generics, interface, abstract-class

在阅读了一些关于抽象类和接口的问题之后，我仍然不确定我应该如何设计我的代码，所以冒着错过可能重复的风险，这就是我的情况。

我正在研究一些旨在处理特定类型对象的讨厌层次结构的实用程序类。虽然对象的精确细节无关紧要，但只要说它不是一个通用的解决方案就足够了。所以我从写一个`CustomNode`和一个`CustomHierarchy`类开始。

过了一会儿，我意识到生成一个更通用的解决方案要聪明得多，它可以在不同的上下文中重复使用，并且可以轻松测试，而无需创建大量上述复杂类的模拟实例。我可以轻松地提供接口和抽象类中的所有通用代码，并在需要它们的地方提供特定的位！（我相信这就是 OOP 的重点吗？）

到目前为止，我有：

*   一个接口`Relatable`，它简单地保存节点之间可能具有的可能关系的枚举，以及一​​个方法签名`getRelation(Relatable other)`

*   `Node<E>`一个实现`Relatable`并包含所有实用方法的抽象类（例如`addChild()`或`getNextSibling()`。这个类唯一缺少的方法是`getRelation(Relatable other)`.

*   一个具体的类`Hierarchy<E>`，它将定义如何建立节点的层次结构，从`Collection<E>`保存数据的 a 开始。

这个想法是根据手头的问题用适当的子类扩展`Node<E>`和类。`Hierarchy<E>`前两个完成时没有任何大的麻烦，但我遇到了这个`Hierarchy<E>`类的问题，因为它有一个*私有*方法`addNodeToHierarchy(E data)`，它试图实例化 a`Node<E>`并将其放置在层次结构中。这显然失败了，因为节点类是抽象的并且不能被实例化。

我理解为什么这不起作用，但我不确定我应该如何规避这个问题。我的设计有缺陷吗？我应该在中添加一个静态`createNewNode(E data)`方法`Node<E>`并使用它吗？我能想到的另一个选择是`Node`从获取关系中分离出来，`Relator`而是使用接口。这绝不可能是一个独特的问题，那么在这种情况下什么是“好的做法”？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:02:51.003

决定谁应该知道如何`Node<E>`从 的实例构造a `E`。它可以是 的实例`E`，可以是`Node`类，可以是层次结构，也可以是 的调用者`addNodeToHierarchy()`。

如果它是 的调用者`addNodeToHierarchy()`，那么要么让它接受一个实例`Node<E>`而不是 的一个实例`E`，要么让它接受一个 some 的实例，`NodeFactory<E>`方法将委托给它以将数据转换为一个节点。如果所有节点都由同一个工厂构造，则该工厂也可以作为参数传递给层次结构构造函数。

# ruby-on-rails - Rails，字符串的两部分，一是文本，二是附加变量。显示第一部分时发生错误

> ID：11899076
> 
> 赞同：2
> 
> 时间：2012-08-10T09:42:42.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

让我们考虑字符串“我的名字是#{@user.name}”所以我需要检查并处理这部分“#{@user.name}”中的错误。错误可能是因为“#{user.name}”（用户对象未定义）或“#{other_object.name}”或访问不属于用户表的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:45:26.570

您可以使用：

```
name = "#{object.name}" if object.respond_to?(:name) 
```

如果`object`不响应`#name`方法（它也处理 is 时的情况`object`）`nil`，`nil`将分配给`name`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T21:02:51.093

简单的错误处理

```
begin
  string = "My name is {@user.name}"
rescue
  string = "My name is not currently available"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:04:29.977

尝试这个

```
"My name is #{@user.try(:name)}" 
```

TRY 方法如果捕获到异常将返回 nil，它不会抛出任何错误。

# php - 正则表达式：如果句子超过 3 个字符，则获取句子的第一个单词

> ID：11899081
> 
> 赞同：0
> 
> 时间：2012-08-10T09:42:55.633
> 
> 标签：php, regex

我需要一个正则表达式来获取句子的第一个单词，如果它有超过 3 个字符或完整的句子。

例如：

```
Hello world -> Hello World
Eat jam -> Eat 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:45:27.860

使用这个正则表达式`^\s*?\w{3,}\b.+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:45:49.197

*如果第一个单词少于或等于*3 个字符，则您的示例将使用第一个单词，否则使用完整的句子。但是对于该要求，您可以使用

```
^[a-zA-Z]{1,3}(?![a-zA-Z])|^.*$ 
```

快速 PowerShell 测试：

```
PS> $re = '^[a-zA-Z]{3}(?![a-zA-Z])|^.*$'
PS> 'Hello world','Eat jam' |%{$_-match $re|Out-null;$Matches}

Name                           Value
----                           -----
0                              Hello world
0                              Eat 
```

# c# - 如何验证邮政编码输入数据？

> ID：11899082
> 
> 赞同：-5
> 
> 时间：2012-08-10T09:42:55.347
> 
> 标签：c#, validation

这就是我到目前为止所做的

```
 Console.Write("Enter your post code >");
        post_code = Console.ReadLine();
        if (string.IsNullOrEmpty(post_code))
        {
            Console.WriteLine("Please enter correct data");
            return;
        }

        else if (post_code.Length != 4)
        {
            Console.WriteLine("Please enter correct data");
            return;
        } 
```

我需要： - 第一个数字不能是 1、8 或 9。 - 第一个数字必须与下表中的状态相匹配：

州：新台币| 新南威尔士州| 维克| 昆士兰| 南非| 西澳| 助教|

第一个数字：0 | 2 | 3 | 4 | 5 | 6 | 7 |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:52:27.797

[正则表达式](http://msdn.microsoft.com/en-us/library/az24scfc%28v=vs.71%29.aspx)可用于验证邮政编码：

```
 Regex postCodeValidation = new Regex(@"^[0234567]\d{4}$");
    if (postCodeValidation.Match(post_code).Success)
    {
        // Post code is valid
    }
    else
    {
        // Post code is invlid
    } 
```

**请注意**：在上面的代码中，邮政编码被认为是 5 位数字（要更改长度 - 您需要用适当的数字`4`替换*正则表达式模式）。* `[0234567]\d{4}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:57:21.750

使用正则表达式：

```
using System;
using System.Text.RegularExpressions;

namespace PostCodeValidator
{
    class Program
    {
        static void Main(string[] args)
        {
            var regex = new Regex(@"^[0234567]{1}\d{3}$");
            var input = String.Empty;

            while (input != "exit")
            {
                input = Console.ReadLine();
                Console.WriteLine(regex.IsMatch(input));
            }
        }
    }
} 
```

非正则表达式解决方案：

```
 static bool ValidPostCode(string code)
    {
        if (code == null || code.Length != 4)
        {
            return false;
        }
        var characters = code.ToCharArray();
        if (characters.Any(character => !Char.IsNumber(character)))
        {
            return false;
        }
        if ("189".Contains(characters.First()))
        {
            return false;
        }
        return true;
    } 
```

另一个，没有 LINQ：

```
 static bool SimpleValidPostCode(string code)
    {
        if (code == null || code.Length != 4)
        {
            return false;
        }
        if ("189".Contains(code[0]))
        {
            return false;
        }
        for (var i = 1; i < 4; i++)
        {
            if (!"123456789".Contains(code[i]))
            {
                return false;
            }
        }
        return true;
    } 
```

`I only can do it with : if, if … else, if … else if … else constructs Nested ifs CASE and switch constructs`

如果`for`循环也不在您允许的语言结构列表中，您仍然可以尝试：

```
 static bool SimpleValidPostCode(string code)
    {
        if (code == null || code.Length != 4)
        {
            return false;
        }
        if (code[0] == '1') return false;
        if (code[0] == '8') return false;
        if (code[0] == '9') return false;

        return "0123456789".Contains(code[1]) && "0123456789".Contains(code[2]) && "0123456789".Contains(code[3]);            
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:55:15.137

我不确定状态是否是您的四字符邮政编码的一部分也包含状态。但如果没有，你可以这样做：

```
Dictionary<string,string> statePostCodeMap = new Dictionary<string,string>();

// Populate the dictionary with state codes as key and post code first character as value

if(!post_code.StartsWith(statePostCodeMap([NameOfVariableThatHoldsState])){
// Incorrect post code
} 
```

编辑：根据用户评论：

这就是你可以使用的：

```
if !((string.Compare(state, "NT", true) == 0 && post_code.StartsWith("0"))){
// Incorrect Data
}
else if(<similar condition for other values>)
... 
```

我认为这是某种学习练习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:46:50.813

看看正则表达式：http: [//msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx)这就是你需要的:)

# ruby-on-rails - Rails - 为多态关联中的父级指定 has_many

> ID：11899083
> 
> 赞同：0
> 
> 时间：2012-08-10T09:42:56.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我目前有一些模型：用户、经销商、销售和角色。Role 与 Dealer 和 Sale 以及 belongs_to User 具有多态的 belongs_to 关系（参见下面的代码）。

我的查询是这样的：如何指定`has_many :dealers, :through => :roles`经销商和销售用户的关系？User 模型将通过belongs_to 关联到Dealer 或Sale 的角色模型，因此*这种*格式的关系不起作用。

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :sales, :through => :roles
  has_many :appraisals, :through => :roles
  has_many :dealers, :through => :roles
end

class Dealer < ActiveRecord::Base
  has_many :roles, :as => :role_originator
  has_many :users, :through => :roles
end

class Sale < ActiveRecord::Base
  has_many :roles, :as => :role_originator
  has_many :users, :through => :roles
end

class Role < ActiveRecord::Base
  belongs_to :role_type
  belongs_to :user
  belongs_to :role_originator, :polymorphic => true
end 
```

将不胜感激这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:32:05.047

在我发现 :source 选项后，我能够解决这个问题 - 请参阅[http://guides.rubyonrails.org/association_basics.html#has_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)（第 4.3.2.20 部分）。

# django - Django post_save 信号是异步的吗？

> ID：11899088
> 
> 赞同：51
> 
> 时间：2012-08-10T09:43:10.793
> 
> 标签：django, signals

我有一个`like`类似于社交网络的功能或点赞功能；用户点击星/心/任何东西来标记内容为喜欢。它是用ajax完成的，必须很快。

这里唯一的问题是，由于某些原因，我必须为每个任务执行一些任务`like`，我发现它们是直接在`like`视图中编码的，这使得它变慢了。

我正在考虑使用信号使这些任务的执行异步执行，以便视图可以立即发送回，`json`而`javascript`无需等待任务完成。

我开始为 django 创建一个信号，`like`但后来意识到 Django`signals`不是异步的，它最终会是一样的，视图必须等待信号完成才能发回它的响应。

因此，我可以尝试按照`signal`此处和此处的说明进行异步操作，但我也将`post_save`信号用于`like`模型，但现在我想知道视图是否可以在信号执行之前完成？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-11T13:57:11.260

还要研究[celery](http://celeryproject.org/)（或更具体地说[django-celery](http://docs.celeryproject.org/en/latest/django/index.html)）。它是一个异步任务调度程序/处理程序。因此，您的 post_save 信号处理程序创建了一个任务，该任务通过 celery 拾取并执行。这样，您仍然拥有快速的应用程序，而繁重的工作是异步执行的，即使在不同的机器或一批机器上也是如此。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-10T14:53:38.843

你想要的是一个线程。它们非常易于使用。您只需子类化`threading.Thread`并编写一个`run`方法：

```
import threading

class LikeThread(threading.Thread):
    def __init__(self, user, liked, **kwargs):
        self.user = user
        self.liked = liked
        super(LikeThread, self).__init__(**kwargs)

    def run(self):
        # long running code here 
```

然后，当您准备好执行任务时，您可以使用以下命令启动它：

```
LikeThread(request.user, something).start() 
```

您的视图代码的其余部分或任何将恢复并返回响应的内容，线程将愉快地完成其工作，直到完成然后自行结束。

查看完整文档：[http ://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-10T09:59:32.870

嗯，首先 Django 中的信号不是异步的。对于您的特定情况，我认为这`post_save`是错误的方法。最直接的方法是简单地触发一个 ajax 请求来查看您喜欢的操作，而不是等待响应。而是在您触发请求后直接修改您的视图/html。

这当然需要您事先知道您的用户可以喜欢这个项目并且您的请求不会失败。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-13T22:13:50.027

包`async-signals`( [https://github.com/nyergler/async-signals](https://github.com/nyergler/async-signals) ) 抽象了这个问题。您调用异步信号函数；如果 Celery 存在，则包使用它从工作人员异步发出信号；如果 Celery 不可用，则包以传统的同步方式发送信号。

# ruby-on-rails - Rails 3.1 中动态（用户）生成的表单

> ID：11899091
> 
> 赞同：0
> 
> 时间：2012-08-10T09:43:23.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, dynamic

我需要在 Rails 项目中添加以下功能：

**当前功能：**

一个*ProjectUser* hasMany *Projects* 一个*Project* hasMany *Users*。用户可以*使用*基本的电子邮件/密码组合注册*项目。*

**所需功能：**

ProjectUser可以将*表单*添加到*项目*中 然后 将*表单*呈现给*用户作为注册**的*第二步。ProjectUser在添加表单时可以从预定义的表单项列表中进行选择*。*（例如 Age 字段、Company size 字段、Country 字段等）

 *****宝石**

我一直在看 Gems，但我发现的一切都是陈旧的（Pre-rails 3）。所以我的问题有两个。任何人都可以推荐一个可以提供此功能的稳定且最新的 Gem，如果没有，我应该如何解决这个问题？

**没有宝石**

我目前的想法是，我创建了一个包含许多*FormItems的**Form*模型，*ProjectUser*可以使用带有每个项目的复选框的表格将其添加到他们的表单中。为了使其工作，表单项需要是多态的——它们都是表单项，但在它们呈现/收集的信息类型方面是独一无二的。（文本字段、组合、日期选择器等）。一旦*ProjectUser*做出决定并选择了他们想要的表单项，我就会将这些决定呈现在*Form*上。

 ***我有点不清楚的部分是*Form*和*User*之间的关系。ProjectUser需要保存他们关于在表单中的某个地方包含哪些字段的决定*。*对我来说，有一个*Form*模型来存储这些决定是有意义的，所以每个*Project*都有一个*Form*，然后当*用户*想要注册一个项目时，我会根据*Project*中的数据构建一个注册表单s*表格*模型。生成的表单本身虽然是*User*的表单，而不是*Form*模型，因此当用户提交表单时，他们会登录并使用表单数据填充新的*用户模型。*

这有什么意义吗？******

# ruby-on-rails - 在 Rails 中扩展方法

> ID：11899094
> 
> 赞同：0
> 
> 时间：2012-08-10T09:43:36.067
> 
> 标签：ruby-on-rails, ruby, methods, extend

在我正在创建的应用程序中，我使用了一个 gem。这个 gem 有一个 Module ，它有一个方法，当发生变化时 gem 会调用该方法。我需要做的是扩展这个方法的功能。我无法更改此方法的名称，也无法调用其他方法。

我说的是这里定义的**重建**方法：

[https://github.com/the-teacher/the_sortable_tree/blob/master/app/controllers/the_sortable_tree_controller.rb](https://github.com/the-teacher/the_sortable_tree/blob/master/app/controllers/the_sortable_tree_controller.rb)

如何在不接触源代码的情况下向此方法添加功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:11:17.977

您需要在控制器中包含具有要覆盖的函数名称的模块，然后您可以编写具有相同名称的函数并在完成工作后调用 super。

```
class A
  include TheSortableTreeController::Rebuild
  def rebuild
     # do something here
     super
  end 
```

这样，您将能够执行您的操作以及 gem 的操作。如果要完全删除对重建功能的依赖，请从代码中删除 super。

# javascript - 执行打开新窗口并执行 Javascript

> ID：11899098
> 
> 赞同：0
> 
> 时间：2012-08-10T09:43:47.393
> 
> 标签：javascript

再会！

当我从父窗口打开新窗口时，是否有可能在新窗口上执行 javascript？

例如，如果新窗口完全加载，文本字段将更改一个值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:30:22.250

这是一个*将*函数放在子窗口中然后让子窗口运行它的示例。该`showTitle`函数将仅显示当前文档标题。子页面将等待特定函数并在它*到达*时调用它。

父.html：

```
<html>
<head>
<title>parent</title>
</head>
<body>
<script>
function showTitle() {
 alert('Page Title = '+this.document.title);
}
function childLoaded() {
 showTitle();
 var childWnd=document.getElementById('fchild').contentWindow;
 if (!childWnd) return;
 childWnd.newFunc=showTitle;
}
</script>
parent<br />
<iframe id=fchild src="child.html" width=300 height=300 onload="childLoaded()"></iframe>
</body>
</html> 
```

child.html:

```
<html>
<head>
<title>child</title>
</head>
<body>
<script>
var waiter,newFunc=null;
function waitFunc() {
 if (newFunc) {
  clearInterval(waiter);
  newFunc();
 }
}
waiter=setInterval(waitFunc, 1000);
</script>
child
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:47:46.320

从新窗口的onLoad()事件中获取参数到父窗口，通知新窗口已经加载。

我希望这能解决你的问题。

# android - 片段重叠，需要解决方案来最大化和最小化片段

> ID：11899107
> 
> 赞同：1
> 
> 时间：2012-08-10T09:44:49.363
> 
> 标签：android, for-loop, mono

谁能告诉我以下问题的解决方案。我创建了简单的聊天应用程序，我想在其中使用片段打开多个聊天窗口。我已经完成了这个，但现在的问题是我无法分离那些聊天片段，所有这些片段都相互重叠。请建议我解决方案，以便我可以使用最小化和最大化按钮将这些片段分开。如果您提供代码片段，它将对我有所帮助，因为我是新来的 android 开发。

谢谢，阿南德·贾格塔普。

我已经通过使用选项卡侦听器并将聊天记录存储在静态变量中来完成。

```
/// <summary>
/// Listener that handles the selection of a tab in the user interface
/// </summary>
/// <typeparam name="T"></typeparam>
public class TabListener<T> : Java.Lang.Object, ActionBar.ITabListener
    where T : Fragment
{
    private T _fragment;

    /// <summary>
    /// Initializes a new instance of the tab listener
    /// </summary>
    /// <param name="fragment"></param>
    public TabListener(T fragment)
    {
        _fragment = fragment;
    }

    /// <summary>
    /// Handles the reselection of the tab
    /// </summary>
    /// <param name="tab"></param>
    /// <param name="ft"></param>
    public void OnTabReselected(ActionBar.Tab tab, FragmentTransaction ft)
    {

    }

    /// <summary>
    /// Adds the fragment when the tab was selected
    /// </summary>
    /// <param name="tab"></param>
    /// <param name="ft"></param>
    public void OnTabSelected(ActionBar.Tab tab, FragmentTransaction ft)
    {
        Fragment fragment = null;
        if (tab.Text == "Users")
        {
            fragment = Global.UserFragment;
        }
        else
        {
            fragment = Global.ChatWindows.FirstOrDefault(chat => chat.User.Name == tab.Text);
            tab.SetIcon(Resource.Drawable.message);
        }

        Global.CurrentFragment = fragment;
        FragmentManager fm = Global.QActivity.FragmentManager;
        fm.BeginTransaction().Add(Resource.Id.Frame_container, fragment, tab.Text).Commit();
    }

    /// <summary>
    /// Removes the fragment when the tab was deselected
    /// </summary>
    /// <param name="tab"></param>
    /// <param name="ft"></param>
    public void OnTabUnselected(ActionBar.Tab tab, FragmentTransaction ft)
    {
        Fragment fragment = null;
        if (tab.Text == "Users")
        {
            fragment = Global.UserFragment;
        }
        else
        {
            fragment = Global.ChatWindows.FirstOrDefault(chat => chat.User.Name == tab.Text);
            tab.SetIcon(Resource.Drawable.QChatOffline);
        }

        FragmentManager fm = Global.QActivity.FragmentManager;
        fm.BeginTransaction().Remove(fragment).Commit();
    }
} 
```

private void StartChat(string userName, bool selectedFromList) { try { User user = GetUserByName(userName); ChatFragment chatFragment = Global.ChatWindows.Find(chatWindow => chatWindow.User.Name == user.Name); var ft = this.activity.FragmentManager.BeginTransaction(); if (chatFragment == null) { chatFragment = new ChatFragment(); chatFragment.User = 用户；chatFragment.CurrentUser = Global.Host.Username;

```
 var chatTab = this.activity.ActionBar.NewTab();
                chatFragment.TabListener = new TabListener<ChatFragment>(chatFragment);
                chatTab.SetTabListener(chatFragment.TabListener);
                chatTab.SetIcon(Resource.Drawable.message);
                chatTab.SetText(userName);
                // Add the new tab to the action bar
                this.activity.ActionBar.AddTab(chatTab);
                ft.Add(Resource.Id.Frame_container, chatFragment, user.Name);
                Global.ChatWindows.Add(chatFragment);

                this.activity.ActionBar.SelectTab(chatTab);

                Global.CurrentFragment = chatFragment;
                ft.Commit();
            }
            else
            {
                int index = Global.ChatWindows.FindIndex(chat => chat.User.Name == chatFragment.User.Name);
                ActionBar.Tab tab = this.activity.ActionBar.GetTabAt(index + 1);
                tab.SetIcon(Resource.Drawable.message);
                if (selectedFromList)
                {
                    ft.Remove(chatFragment);
                    ft.Commit();
                    Global.CurrentFragment = chatFragment;

                    try
                    {
                        var fragmentTransaction = this.activity.FragmentManager.BeginTransaction();
                        this.activity.ActionBar.SelectTab(tab);
                        fragmentTransaction.Commit();
                    }
                    catch (Exception ex)
                    {

                    }
                }
                else
                {
                    ft.Remove(chatFragment);
                    ft.Add(Resource.Id.Frame_container, chatFragment, user.Name);
                    ft.Commit();
                }
            }

            chatFragment.ChatHistory.Add(new ChatHistory()
            {
                FirstPartColor = Android.Graphics.Color.Red,
                FirstPartMessage = DateTime.Now.ToString("HH:mm:ss"),
                SecondPartMessage = String.Format(" {0} is {1}.", user.Name, m_chatWindowManager.GetStatusText(user.Status).Replace("%@RN@%", "\r\n" + "\r\n")),
                SecondPartColor = Android.Graphics.Color.Red
            });

            Global.ChatStarted = true;
        }
        catch (Exception exception)
        {
            ((QChatActivity)this.activity).ShowMessage("Failed StartChat(string userName) for user " + userName + " Exception : " + exception.Message + exception.StackTrace);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:57:09.863

在 Android 中，不支持最小化或最大化屏幕，取而代之的是，您可以将警报框作为在单独窗口中聊天的活动。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:background="@android:color/white"
    android:orientation="vertical" android:padding="20dp">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical"
        android:padding="5dp" >

        <TextView
            android:id="@+id/welcomeToIM"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/scrollView1"
            android:textColor="#000000"
            android:textSize="14dp" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/edittext1"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="25dp"
        android:background="@android:drawable/editbox_background_normal" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="vertical"
            android:padding="5dp" >

            <TextView
                android:id="@+id/textMsg"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#000000"
                android:textSize="14dp" />
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/btn2"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@android:drawable/editbox_background_normal"
        android:text="Contacts"
        android:textColor="#000000" />

    <Button
        android:id="@+id/btn1"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@android:drawable/editbox_background_normal"
        android:text="Send"
        android:textColor="#000000" />

    <EditText
        android:id="@+id/edittext1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btn2"
        android:layout_alignParentLeft="true"
        android:background="@android:drawable/editbox_background_normal"
        android:ems="10"
        android:hint="Type a Message"
        android:maxLines="5"
        android:textColor="#000000" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

# java - 通过反射获取getter的字段名

> ID：11899109
> 
> 赞同：1
> 
> 时间：2012-08-10T09:44:51.140
> 
> 标签：java, reflection

我的反思从来都不是很强烈，我似乎在一个看似微不足道但结果并非如此的问题上遇到了困难。至少对我来说。我有一个带有几个 getter 的 bean，然后在服务中我使用 Reflextion 循环遍历所述方法，并在某个时刻得到我想要的 get 方法。我调用该方法来获取值，现在我想知道我刚刚从其中询问值的字段的名称。这是我卡住的地方。

获取方法

```
public String getTest(){ return test } 
```

通过反射调用方法

```
Object value = method.invoke(jsonObject, new Object[]{}); 
```

现在我喜欢做这样的事情

```
String fieldName = method.findTheNameOfTheField(); 
```

我找到了很多从字段名调用 getter 的例子，但没有关于如何做相反的事情。这甚至可以不解析方法的名称而只是切割是和从方法中获取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:47:01.807

> 我调用该方法来获取值，现在我想知道我刚刚从其中询问值的字段的名称。

不，你不能这样做——至少在不分析字节码本身的情况下不能这样做。不要忘记 getter 可以包含*任何*代码。也许它不使用字段。也许它使用了多个领域。也许所有属性都使用地图。也许它使用了一个字段，但随后改变了结果（例如复制一个列表）。

您应该首先考虑对您的设计进行更改是否会消除对此的需求 - 我想不出很多情况下这是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:54:32.243

对于使用 JavaBeans，Bean [Introspector](http://docs.oracle.com/javase/7/docs/api/java/beans/Introspector.html)让生活变得更轻松。

教程

[http://v1.dione.zcu.cz/java/docs/tutorial/javabeans/introspection/index.html](http://v1.dione.zcu.cz/java/docs/tutorial/javabeans/introspection/index.html)

例子

[http://www.java2s.com/Code/Java/Development-Class/IntrospectingaBean.htm](http://www.java2s.com/Code/Java/Development-Class/IntrospectingaBean.htm)

[http://www.znetdevelopment.com/blogs/2012/04/11/java-bean-introspector-and-covariantgeneric-returns/](http://www.znetdevelopment.com/blogs/2012/04/11/java-bean-introspector-and-covariantgeneric-returns/)

[http://www.javablogging.com/inspecting-your-java-beans/](http://www.javablogging.com/inspecting-your-java-beans/)

[http://softwaresalariman.blogspot.co.uk/2011/11/minimal-javabean-introspection-example.html](http://softwaresalariman.blogspot.co.uk/2011/11/minimal-javabean-introspection-example.html)

这使用了反射，但隐藏了很多细节，例如；我想要一个吸气剂`getValue`还是`isFlag`一个吸气剂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:09:28.120

您在这里唯一可以做的就是依赖 JavaBean 约定，即方法`getFoo()`返回 field 的值`foo`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:11:44.100

getter 不一定要返回一个字段；这是一个非常简单的例子

```
public getAge() {
  return currentdate - birthdate;
} 
```

getter 的全部意义在于它们**可能**返回一个字段，但它们也可能返回其他内容，从调用该方法的人那里抽象出内部逻辑。

# sql - 让 Fluent Nhibernate 不使用参数

> ID：11899112
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:45:04.150
> 
> 标签：sql, nhibernate, parameters

.Where(x => !x.Rated) 这创建的 sql 看起来像： not (cdrcalltmp0_.Rated=1)

我们的 dba 说我必须删除 not 才能使某些过滤索引起作用。

.Where(x => x.Rated == false) 这将创建如下所示的 sql： cdrcalltmp0_.Rated=@p2 order by cdrcalltmp0_.Created asc'

由于参数，这不起作用。

他想要这个sql：cdrcalltmp0_.Rated=0 order by cdrcalltmp0_.Created asc'

是否可以让 nhibernate 不使用参数？以便过滤索引起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:55:35.150

**前言：** 下面的答案是假设您使用的是 SQL Server 2008。如果您不是，那么在使用 NOT 运算符时，所讨论的数据库技术很可能不支持索引。因此，如果您使用 SQL Server 2008...

您的 DBA 不知道他在说什么。

以下语法

```
NOT ( SomeTableAlias.SomeTableColumn = 1 ) 
```

**SQL Server 查询分析器绝对**可以理解。我从 NHibernate 得到的查询看起来与上面的语法完全一样，而且它们确实使用了正确的索引。

回答你的问题，不。NHibernate 在为您创建 SQL 时总是使用参数。参数化查询非常常见，即使您自己使用传统的 ADO.NET。

让 NHibernate 不使用参数的唯一方法是使用 session.CreateSQLQuery() 方法提供它自己执行所需的 SQL。

无论如何，您发布的上述行：

```
Where(x => x.Rated == false) This creates sql that looks like: cdrcalltmp0_.Rated=@p2 order by cdrcalltmp0_.Created asc' 
```

是完全有效的。当 SQL Server 接收到参数化查询时，它将使用您的额定列上的任何索引。

如果您的 DBA 仍然怀疑您，请告诉他在 Sql Server Management Studio 中运行查询，并启用“显示估计执行计划”功能。这将证明查询正在使用索引。

# sql - 将列数据类型从 DECIMAL(9,0) 更改为 DECIMAL(15,0)

> ID：11899131
> 
> 赞同：1
> 
> 时间：2012-08-10T09:46:08.797
> 
> 标签：sql, teradata

你能帮我解决这个问题吗（我在 Teradata 文档中没有找到它，老实说有点压倒性）：我的表有这个列 -BAN DECIMAL(9,0)-，现在我想把它改成- BAN DECIMAL(15,0) COMPRESS 0.- 我该怎么做？COMPRESS 约束 0\. 或其他任何含义是什么意思？我希望这是可能的，我不必创建一个新表然后从旧表中复制数据。该表非常非常大 - 当我对该表执行 COUNT(*) 时，我收到此错误：2616 计算期间发生数字溢出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:25:19.210

ALTER TABLE 的语法图似乎不支持直接更改列的数据类型。（[Teradata SQL DDL 文档](http://www.info.teradata.com/templates/eSrchResults.cfm?prodline=&txtpid=&txtrelno=&txtttlkywrd=SQLREF,TNTSEQ&rdsort=Title&srtord=Asc&nm=SQL%20Reference)）。`COMPRESS 0`压缩零。Teradata 支持许多不同类型的压缩。

这里的数值溢出可能意味着你已经超出了整数的范围。为了使这部分工作，只需尝试转换为更大的数据类型。（您无需更改列的数据类型即可执行此操作。）

```
select cast(count(*) as bigint) 
from table_name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:47:37.073

你问了三个不同的问题：

1.  您不能将列的数据类型从 更改`DECIMAL(9,0)`为`DECIMAL(15,0)`。您最好的选择是创建一个新列 (NEW_BAN)，从旧列分配值，删除旧列并将 NEW_BAN 重命名为 BAN)。

2.  `COMPRESS 0`不是约束。这意味着从表中压缩“零”值，从而节省磁盘空间。

3.  您`COUNT(*)`正在返回该错误，因为该表有超过 2,147,483,647 行（整数的最大值）。将结果转换为 BIGINT（如 Catcall 所示）。

我同意，文档可能是压倒性的。但请耐心等待，只关注您的确切版本的 SQL 标题。他们真的写得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:31:46.583

您不能使用`ALTER TABLE`将数据类型从更改为`DECIMAL(9,0)`，`DECIMAL(15,0)`因为它跨越了在表中存储值所需的字节边界。对于 Teradata 13.10，有关使用更改列数据类型的更多详细信息，请参阅*SQL 数据定义语言详细主题*第 61-65 页的 Teradata 手册。`ALTER TABLE`

# objective-c - 在某些情况下，如何避免在目标 c 中额外调用 -textFieldDidEndEditing？

> ID：11899132
> 
> 赞同：0
> 
> 时间：2012-08-10T09:46:18.237
> 
> 标签：objective-c, ios, xcode, uitextfield, custom-cell

我有一个带有自定义单元格的表格视图，其中包含文本字段。我现在面临一个特殊的问题：

1.  当我点击第一行文本字段时， -beginEditing 被调用。
2.  现在我更改值并点击第二行文本字段。因此，第一行的 -didEndEditing 被调用。在这个 didEnd 中，我有一些在其他类中调用的解析方法。但他们现在没有被执行。在 didEnd 之后，调用第二行文本的 -beginEditing。之后，解析发生。到现在为止，还好。
3.  解析完成后，解析的对象设置在其他类中，流程应该在这里停止，但我不知道从哪里以及为什么，第二行的 -didEndEditing 被调用！此外，尽管任何 resignfirstresponder 都没有写在任何地方，但键盘会被解雇！

任何线索为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:32:09.180

这就是 Apple 设计系统的方式——所有开发人员都必须处理它（对或错）。关键是您获得了“textField”属性，因此您知道哪个 textField 正在发送委托消息。

解决方案是使用一个或多个可变字典（或某些数据结构）来保持每个单独文本字段的状态。您可以拥有一个使用 textField 对象作为键的主字典，然后为每个 textField 提供一个具有当前状态的字典，以及您想要保留的任何其他信息。

您可能可以破解一个不太优雅但更容易编码的解决方案。在任何情况下，这些消息都存在重叠，无法避免。

编辑：使用标签作为键，或创建一个非保留的 NSValue 指针对象，但不要使用文本字段本身。

# cocoa-touch - 如何正确解决“弱接收器在 ARC 模式下可能无法预测为空”

> ID：11899134
> 
> 赞同：18
> 
> 时间：2012-08-10T09:46:31.637
> 
> 标签：cocoa-touch, cocoa, automatic-ref-counting

我在 xcode 中打开了一个新标志并收到警告“弱接收器在 ARC 模式下可能无法预测为空”。这让我很困惑，因为当然它可能是零。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-10T09:46:31.637

一周前我问了这个问题，但没有得到答复，但 Greg Parker 在邮件列表中回答了这个问题。所以我正在转发答案。

> 我们添加此警告是因为我们在实践中看到了许多微妙且难以调试的问题。
> 
> 推荐的做法是将弱变量读入一次强局部变量，然后再使用局部变量。
> 
> *   格雷格·帕克

在这个问题的第一个化身中，我发布了类似这样的内容，我认为测试 nil 应该就足够了

```
if (self.rootViewController) {
    [self.rootViewController controllerWillChangeContent:controller];
} 
```

问题是 self.rootViewController 在检查 nil 和完成调用的方法之间可能会变成 nill。我们被告知要做的是分配一个强大的本地引用并像这样使用它

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    RootViewController *rootVC = self.rootViewController;
    if (rootVC) {
        [rootVC controllerWillChangeContent:controller];
    }
} 
```

斯蒂芬巴特勒对这个警告旨在解决的问题进行了简洁的重述

> 我们要防止的是对象实例在您处于 [someMethod] 时被释放，因为您将其从弱引用中调用，并且没有任何东西强烈地持有该对象。

# javascript - 如何处理多选下拉菜单 - JQuery

> ID：11899137
> 
> 赞同：1
> 
> 时间：2012-08-10T09:46:35.937
> 
> 标签：javascript, jquery, json

我将有 3 个`<select multiple="multiple">`，我想使用 JSON 数组填充它们。

```
{
"folders": [
    {
        "name": "folderName1",
        "files": [
            {
                "name": "filesName1",
                "item": [
                    {
                        "name": "itemName1"
                    }
                ]
            }
        ]
    },
    {
        "name": "folderName2",
        "files": [
            {
                "name": "fileName2",
                "item": [
                    {
                        "name": "itemName2"
                    }
                ]
            }
        ]
    }
]
} 
```

我想`select`使用**ALL**文件夹填充第一个 - 名称。

`selects`然后使用第一个选择框中的选定值过滤其他内容。例如，当我`foldername1`在第一个选择中选择时，我只想`fileName1`在第二个选择和`itemName1`第三个中显示选项`select`；

是否可以使用 jQuery 来实现？

到目前为止，我有以下内容：http: [//jsfiddle.net/dvMv9/26/](http://jsfiddle.net/dvMv9/26/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:15:21.137

这可能是一种方法，但必须实施。无论如何，这是一个开始：

```
var json = '{"folders":[{"name":"folderName1","files":[{"name":"filesName1","item":[{"name":"itemName1"}]}]},{"name":"folderName2","files":[{"name":"fileName2","item":[{"name":"itemName2"}]}]}]}';

var jsonObject= jQuery.parseJSON( json );

var folders = jsonObject.folders;

for(var i=0; i< folders.length; i++) {
    $('#folders').append("<option>"+folders[i].name+"</option>");
}

$('#folders').on('change', function(){

    $('#files option').remove();
    $('#items option').remove();

    var $this = $(this).val()[0];
    for(k in folders) {
        if(folders[k].name == $this){
            //Here could be other loop
            var $file = folders[k].files[0].name;
            var $item = folders[k].files[0].item[0].name;
            $('#files').append("<option>"+$file+"</option>");
            $('#items').append("<option>"+$item+"</option>");
        }
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:20:53.427

这是工作代码，以及小提琴上的链接。

[http://jsfiddle.net/yPDGA/](http://jsfiddle.net/yPDGA/)

```
<select multiple="multiple" id="sel_1"></select>
<select multiple="multiple" id="sel_2"></select>
<select multiple="multiple" id="sel_3"></select>

$(document).ready(function(){
    var my_json = {
    "folders": [
        {
            "name": "folderName1",
            "files": [
                {
                    "name": "filesName1",
                    "item": [
                        {
                            "name": "itemName1"
                        }
                    ]
                }
            ]
        },
        {
            "name": "folderName2",
            "files": [
                {
                    "name": "fileName2",
                    "item": [
                        {
                            "name": "itemName2"
                        }
                    ]
                }
            ]
        }
    ]
    };

    var i, html = "";
    for (i = 0; i < my_json.folders.length; i += 1) {
        html += '<option value="' + my_json.folders[i].name + '">' + my_json.folders[i].name + '</option>';
    }
    $("#sel_1").html(html);

    $("#sel_1").change(function () {
        var html = "", i, j;
        for (i = 0; i < my_json.folders.length; i += 1) {
            if (my_json.folders[i].name === $(this).attr("value")) {
                for (j = 0; j < my_json.folders[i].files.length; j += 1) {
                    html += '<option value="' + my_json.folders[i].files[j].name + '">' + my_json.folders[i].files[j].name + '</option>';
                }
                $("#sel_2").html(html);
                $("#sel_3").html('');
                return;
            }
        }

    });

    $("#sel_2").change(function () {
        var html = "", i, j, k, sel_1_value = $("#sel_1").attr("value");
        for (i = 0; i < my_json.folders.length; i += 1) {
            if (my_json.folders[i].name === sel_1_value) {
                for (j = 0; j < my_json.folders[i].files.length; j += 1) {
                    if (my_json.folders[i].files[j].name === $(this).attr("value")) {
                        for (k = 0; k < my_json.folders[i].files[j].item.length; k += 1) {
                            html += '<option value="' + my_json.folders[i].files[j].item[k].name + '">' + my_json.folders[i].files[j].item[k].name + '</option>';
                        }
                    }
                }
                $("#sel_3").html(html);
                return;
            }
        }

    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:24:03.197

以下将做你想做的，

看看更新的[小提琴](http://jsfiddle.net/dvMv9/33/)，

```
var jsonObject= jQuery.parseJSON( json );

var folders = jsonObject.folders;
var curFolderSelection;
var curFileSelection;

for(var i=0; i< folders.length; i++) {
    $('#folders').append("<option>"+folders[i].name+"</option>");    
}

$('#folders').on('change', function(){
    curFolderSelection = $(this).val();
    for(var i=0; i< folders.length; i++) {
        if(folders[i].name == curFolderSelection){
            curFileSelection = folders[i].files;
        }                                
    }
    $('#files').html('');
    $('#items').html('');
    for(var j=0; j < curFileSelection.length; j ++) {        
        $('#files').append("<option>"+curFileSelection[j].name+"</option>");
        var items = curFileSelection[j].item;
        for(var k=0; k< items.length; k++) {
            $('#items').append("<option>"+items[k].name+"</option>");
        }            
    }    
}); 
```

好的，更新后的代码稍作改动

更新的[小提琴](http://jsfiddle.net/dvMv9/40/)

```
$('#folders').on('change', function() {
    //alert(this.val);
    $('#files').html('');
    $('#items').html('');
    curFolderSelection = $('#folders option:selected');
    curFolderSelection.each(function() {
        for (var i = 0; i < folders.length; i++) {
            if (folders[i].name == $(this).val()) {
                curFileSelection = folders[i].files;
            }
        }

        for (var j = 0; j < curFileSelection.length; j++) {
            $('#files').append("<option>" + curFileSelection[j].name + "</option>");
            var items = curFileSelection[j].item;
            for (var k = 0; k < items.length; k++) {
                $('#items').append("<option>" + items[k].name + "</option>");
            }
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T10:45:27.383

您可以拆分代码并将循环放在不同的函数中。

```
var json = '{"folders":[{"name":"folderName1","files":[{"name":"filesName1","item":[{"name":"itemName1"}]}]},{"name":"folderName2","files":[{"name":"fileName2","item":[{"name":"itemName2"}]}]}]}';

var jsonObject = jQuery.parseJSON(json);
var folders = jsonObject.folders;

var select1 = document.getElementById("folders");
var select2 = document.getElementById("files");
var select3 = document.getElementById("items");

function updateSelect1() {
    $(select1).empty();
    for (var i = 0; i < folders.length; i++) {
        $(select1).append("<option value='" + i + "'>" + folders[i].name + "</option>").val(0);
    }
}

function updateSelect2() {
     $(select2).empty();
    var files = folders[select1.value].files;
    for (var j = 0; j < files.length; j++) {
        $(select2).append("<option value='" + j + "'>" + files[j].name + "</option>").val(0);
    }
    updateSelect3();
}

function updateSelect3() {
     $(select3).empty();
    var items = folders[select1.value].files[select2.value].item;
    for (var k = 0; k < items.length; k++) {
        $(select3).append("<option value='" + k + "'>" + items[k].name + "</option>").val(0);
    }
}

$(select1).change(updateSelect2);
$(select2).change(updateSelect3);

updateSelect1();
updateSelect2();
updateSelect3(); 
```

演示：http: [//jsfiddle.net/diode/dvMv9/35/](http://jsfiddle.net/diode/dvMv9/35/)

# glsl - glsl 对低多边形表面的影响

> ID：11899139
> 
> 赞同：2
> 
> 时间：2012-08-10T09:46:37.313
> 
> 标签：glsl

我有一个顶点/片段着色器、点光源和衰减，我需要将这样的着色器应用到立方体面上，我需要看到颜色渐变的变化，如果我使用高多边形网格，一切都很好，而且效果很好，我的目标是在这个低多边形网格上进行渐变。

我试图这样做 gl_FragColor = vec4(n,1) n = normal 但我得到每个表面的纯色，这可能是我看不到渐变的原因？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:56:36.607

您正在观察的是正确的行为。立方体是完全平坦的，因此每个面顶点的法线是相同的。

但是请注意，在计算 Phong 光照时，您还应该使用片段的位置，该位置在给定（子）面的 3 个（或 4 个，当使用四边形时）顶点之间进行插值。它可用于计算给定片段位置中光位置和眼睛矢量之间的角度。

我最近遇到过类似的问题，我发现如果你想看到非平面的东西，你的立方体真的需要发光；我的意思是字面意思。将光泽度设置为相当高的值（250-500）。您应该在脸上看到一个聚焦的、移动的光点，直接反射到您身上。如果不是，您的闪电着色器可能是错误的。

# actionscript-3 - 本地播放flv

> ID：11899142
> 
> 赞同：0
> 
> 时间：2012-08-10T09:46:48.237
> 
> 标签：actionscript-3, flash, apache-flex, streaming, flex4.5

是否可以使用 AS3 中的 Sound 类播放本地保存的 flv 文件，如 mp3？

或者在任何情况下我都必须使用 NetStream 对象和 NetConnection。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:41:15.990

`NetStream`无论如何你都必须使用，但是在将它传递给构造函数之前
你需要（就像[这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#includeExamplesSummary)一样，但使用本地/相对路径）`netConnection.connect(null);``NetStream`

# html - 停止浮动 div 换行

> ID：11899145
> 
> 赞同：4
> 
> 时间：2012-08-10T09:46:56.367
> 
> 标签：html, css, css-float

我有一个包含许多左浮动 div 的容器，例如：

```
<div id="container">
    <div class="panel"></div>
    <div class="panel"></div>
    <div class="panel"></div>
</div>

<style>
    .panel {float:left; width:200px;}

</style> 
```

在我的应用程序中，用户可以动态地将越来越多的面板添加到容器中，我希望它们始终堆叠在右侧，并在用户超出可用空间时显示水平滚动条。

jsfiddle在这里：http: [//jsfiddle.net/yzTFC/6/](http://jsfiddle.net/yzTFC/6/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T10:08:02.970

浮动元素取决于其容器的宽度，不会影响容器的大小。如果可能，在这种情况下不要使用浮动元素。我会在父级上使用 display:inline-block 和 white-space:nowrap。

[http://jsfiddle.net/yzTFC/45/](http://jsfiddle.net/yzTFC/45/)

另一种方法是在容器上提供非常大的宽度，但我不建议这样做，因为它看起来很草率。

[http://jsfiddle.net/yzTFC/52/](http://jsfiddle.net/yzTFC/52/)

这是一篇关于花车如何工作的好文章：http: [//coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:07:49.043

试试这个：

**HTML**

```
<div id="parent-container">
    <div id="container">
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
    </div>
</div>​ 
```

**CSS**

```
.panel {float:left; width:200px; background-color:red; height:100px; border:solid 1px black;}

#container { width: 9999px; }

#parent-container {
    overflow: auto;
}​ 
```

**演示：http:** [//jsfiddle.net/yzTFC/50/](http://jsfiddle.net/yzTFC/50/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:15:30.877

我的回答与艾曼类似。我还添加了另一个容器。

HTML

```
<div id="wrapper">
    <div id="panel-container">
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
        <div class="panel"></div>
    </div>
</div>​ 
```

CSS

```
.panel {float: left; width:200px; background-color:red; height:100px; border:solid 1px black;}
#wrapper {width: 606px; overflow-x: scroll; overflow-y: hidden; }
#panel-container {width: 1212px;} 
```

其中#panel-container CSS 宽度是其中的 .panels 的倍数，因此需要一些脚本来实现这一点。很可能是一些javascript。

#wrapper 宽度是任意的，我只是决定在视口中一次显示三个面板。

# php - 会话中记录的用户 ID

> ID：11899147
> 
> 赞同：-4
> 
> 时间：2012-08-10T09:47:11.513
> 
> 标签：php, session

您好，我想在 php 中插入记录 u_id 的数据库。我使用 session($_SESSION['u_id']) 来获取它，但有时它会出错。使用 session 是否安全和良好，或者从 url 传递是否良好？ ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:49:56.860

这很容易。用户登录后，您应该设置一个会话，例如

```
$_SESSION['user']=1; //if the user's id is 1, for example 
```

要检查用户是否已登录，请使用

```
if(isset($_SESSION['user'])){
//user has logged in
}else{
//user has not logged in
} 
```

在两个文件的开头你应该写`sesssion_start()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:49:30.050

当您确认用户登录时使用`session_start();`并设置一个变量，例如`$loggedIn=true;

在每一页上，检查`$loggedIn`它是否存在并设置为 true。

# javascript - 修复了表格滚动中的 td

> ID：11899149
> 
> 赞同：1
> 
> 时间：2012-08-10T09:47:14.930
> 
> 标签：javascript, html-table, floating

我有一个动态表，它有很多列和行，问题是我想在滚动为空时粘贴第 th 和最左边的 td，就像它们漂浮在它们的位置上，滚动移动时不会去任何地方。

这是代码在[小提琴](http://jsfiddle.net/pZBeT/1/)中不起作用的小提琴，因为

![在此处输入图像描述](../Images/0772a7d45b2e0ed58d40fc3742c685f6.png)

display 只是暂时的，因为实际上它是从数据库中获取的。我想浮动标题和最左边的 td 值（你好）和（让它浮动）。

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:00:18.877

试试这个：

适用于`#rooms`如下：

```
#rooms {
    position: absolute;
    width: 47px;
} 
```

另外，给`position: relative`如下`<tr>`：

```
tr{
    position: relative;
} 
```

并给`<td>`它如下：`<th>``height`

```
td, th{
  height: 32px;
} 
```

我希望这会有所帮助`

# wpf - TabControl 宽度高度问题

> ID：11899160
> 
> 赞同：3
> 
> 时间：2012-08-10T09:47:44.017
> 
> 标签：wpf, size, height, width, tabcontrol

我正在使用未指定高度和宽度的 TabControl。实际上，TabControl 的高度取当前选项卡的高度。

我不希望 TabControl 自动调整它的大小。我希望它采用最大标签的尺寸（高度和宽度）。

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:22:19.820

因为有些人要求实际的 xaml，所以这对我有用。它基于@FWillem、@Floc 和其他人的提示，因此所有功劳都归于他们。

```
<TabControl>
    <TabItem Header="SomeTab1">
        <Grid Name="MasterTabGrid">
            <!-- Some content -->
        </Grid>
    </TabItem>
    <TabItem Header="SomeTab2">
        <Grid Height="{Binding ElementName=MasterTabGrid, Path=ActualHeight}" >
            <!-- Some other content -->
        </Grid>
    </TabItem>
</TabControl> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T09:53:29.763

您的大小`TabControl`将由*其父*容器控件设置，该控件负责其子控件的布局，并将为许多布局属性指定默认值。

例如，如果您将`TabControl`内部放入 (vertical) `StackPanel`，您会发现它占用的垂直空间最小。如果您`Grid`的标签周围有一个，它们将填满可用空间。

或者，您可以手动设置`VerticalAlignment="Top"`其他容器，这通常会覆盖您看到的行为。（很可能您的布局面板将其默认为`Stretch`。）

# jquery - JQUERY UI - 边界半径问题。IE7和IE8不支持，需要方法圆角

> ID：11899165
> 
> 赞同：0
> 
> 时间：2012-08-10T09:47:55.910
> 
> 标签：jquery, html, css

我有来自 Jquery UI 的标准模板。对于制表符和手风琴等，它使用其css中的border-radius属性来使角变圆。

我需要这在 IE7、8、9、Firefox 等中保持一致。

我在网上看到各种帖子告诉我现在要改变这个，但我没有任何成功。

这是来自 JQUERY UI css 的代码：

```
/* Corner radius */
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; -khtml-border-top-left-radius: 4px/*{cornerRadius}*/; border-top-left-radius: 4px/*{cornerRadius}*/; }
.ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr { -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; -khtml-border-top-right-radius: 4px/*{cornerRadius}*/; border-top-right-radius: 4px/*{cornerRadius}*/; }
.ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl { -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; -khtml-border-bottom-left-radius: 4px/*{cornerRadius}*/; border-bottom-left-radius: 4px/*{cornerRadius}*/; }
.ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br { -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; -khtml-border-bottom-right-radius: 4px/*{cornerRadius}*/; border-bottom-right-radius: 4px/*{cornerRadius}*/; } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:51:27.487

如果您想在 IE8 及以下版本中使用钻孔半径，可以尝试使用 css3pie：

[http://css3pie.com/](http://css3pie.com/)

这将启用边框半径、框阴影和其他位。]

我不喜欢亲自使用它，但它确实有效

# php - 从另一个页面更新 JavaScript 变量的值

> ID：11899167
> 
> 赞同：0
> 
> 时间：2012-08-10T09:48:05.000
> 
> 标签：php, javascript, forms

是否可以使用 JavaScript 从另一个页面更新变量的值？

*或者*

是否可以在提交时使用表单来执行此操作，只需更新其他页面，但保留在表单所在的页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:53:37.690

我认为您正在搜索的是 AJAX（异步 JavaScript 和 XML），它执行获取或发布操作并等待服务器的结果。这样就可以在不跳转到页面的情况下提交表单。

看看[这个](http://www.w3schools.com/ajax/default.asp) 或者如果你使用 JQuery[这个](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:51:36.380

您可以简单地通过 Ajax 发送所有要更新的数据，并在您所在的当前页面上简单地获取响应。

# asp.net-mvc - HTTP 500，customErrors 重定向不起作用

> ID：11899171
> 
> 赞同：2
> 
> 时间：2012-08-10T09:48:20.127
> 
> 标签：asp.net-mvc, iis, custom-errors

我正在使用 MVC2。
我的网络配置说

```
<customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="~/internal-server-error">
  <error statusCode="500" redirect="~/internal-server-error" />
  <error statusCode="404" redirect="~/not-found" />
</customErrors> 
```

我的测试方法说

```
public ActionResult ErrorTest()
{
    var z = 0;
    var x= 3/z;
    return null;
} 
```

*我仍然得到默认的**Runtime Error*** `Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed.`，而不是我的自定义错误方法，它甚至没有被调用。

为什么？*这是开发服务器问题吗？它可以在 IIS 上运行吗？*

`Application_Error`编辑：也在 IIS Express 上尝试过，在中全部注释掉`Global.asax.cs`，仍然无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:47:37.367

尝试删除`redirectMode="ResponseRewrite"`属性

[设置 redirectMode="ResponseRewrite" 时，CustomErrors 不起作用](https://stackoverflow.com/questions/781861/customerrors-does-not-work-when-setting-redirectmode-responserewrite)

# asp.net - 检测到潜在危险的 Request.Form 值 ASHX httpHandler

> ID：11899174
> 
> 赞同：6
> 
> 时间：2012-08-10T09:48:56.177
> 
> 标签：asp.net

我需要在我的 ashx http 处理程序的表单中接受 xml 数据。

但是，当我使用 request.Form 从请求中提取 xml 数据时，出现错误“检测到潜在危险的 Request.Form 值..”错误。

我无法将验证请求设置为 false，因为它不是 aspx 页面。我能做些什么？

例如

```
<textarea rows="12"  cols="50"  name="Post2Data">
 <root>
    <XML>....
 </root>
</textarea>

request.Form["Post2Data"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-20T12:48:50.597

您可以使用请求的 Unvalidated 属性，例如

```
request.Unvalidated.Form["Post2Data"]; 
```

您必须自己检查表单数据的有效性。不建议在生产环境中设置`validateRequest = false`，因为它会使您容易受到跨站点脚本攻击。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T09:55:22.303

您可以在 web.config 中添加以下条目。

```
<location path="~/YourHandler.ashx">
    <system.web>
      <pages validateRequest="false" />
    </system.web>
</location>
<system.web>
   <compilation debug="true" targetFramework="4.0"/>
   <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

# bash - 在 bash postgresql psql 命令行中转义连字符

> ID：11899176
> 
> 赞同：2
> 
> 时间：2012-08-10T09:49:04.423
> 
> 标签：bash, postgresql

如何在命令行中转义可能的连字符，如下所示：

```
$ for i in db1 db2 db1-db2; do su - postgres -c "psql -c \"alter database \"$i\" with connection limit = 0;\""; done

ALTER DATABASE

ALTER DATABASE ERROR:  syntax error at or near "-" at character 19 LINE 1: alter database db1-db2 with connection limit = 0;
                      ^ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:06:06.777

通过在标准输入中提供 SQL 作为[here-string](http://en.wikipedia.org/wiki/Here_document)可以以某种方式缓解“引用地狱” 。

在您的情况下，我认为这应该可以完成工作：

```
for i in db1 db2 db1-db2; do su - postgres -c "(psql <<EOF
alter database \"$i\" with connection limit = 0;
EOF
)"; done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:09:00.723

这会做到：

```
for i in db1 db2 db1-db2 
  do 
   su - postgres -c "psql -c \"alter database \\\"$i\\\" with connection limit = 0;\"" 
  done 
```

问题不在于转义连字符，问题在于字符串中有一个字符串。因此，您必须为 su 命令转义一次，为 psql 命令转义一次。

如果您不喜欢多个转义序列，请使用此选项。

```
for i in db1 db2 db1-db2 
  do 
   su - postgres -c "psql -c 'alter database \"$i\" with connection limit = 0;'" 
  done 
```

通过使用 ' 单引号和 " dbl 引号，您可以减少转义。;-)

# scala - Scala - 方法调用语法

> ID：11899177
> 
> 赞同：12
> 
> 时间：2012-08-10T09:49:07.490
> 
> 标签：scala, methods

我是 Scala 的初学者，我看到了一些调用方法的不同语法。有些很好，因为忽略无参数方法的括号，或忽略点，如

```
1 to 10 
```

但有些真的让我很困惑。例如：

```
breakable { ... } 
```

这只是一个方法调用对吗？我也可以对多个参数或不是无参数函数的参数执行此操作吗？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-10T15:31:27.730

调用方法有两种标准方式：

```
obj.method(params)   // dot notation
obj method (params)  // operator notation 
```

以上可以通过以下方式进行修改：

1.  如果`params`是单个参数，则可以替换`()`为`{}`.
2.  如果`params`是单个参数*并且*您正在使用运算符表示法，则可以删除括号。
3.  如果`method`不带参数，则可以丢弃`(params)`（即丢弃空的`()`）。
4.  如果`method`以 结尾`:`，那么它实际上绑定到*运算符符号*的右侧。即，`(params) method_: obj`等价于`obj.method_:(params)`。
5.  无论哪种方式，只要可以区分标识符，空格都是可选的。因此，人们可以在点符号中添加空格，例如`obj . method ( params )`在下`.method(params)`一行添加空格（就像调用链经常发生的情况一样），以及从运算符符号中删除空格，如`a+b`.

还有一些元组推理的东西，但我尽量避免它，所以我不确定确切的规则。

但是，这些都不能解释您感到困惑的示例。然而，在我解释它之前，我想展示一些也可以用来调用方法的语法糖：

```
obj(params) // equivalent to obj.apply(params)
obj.x = y   // equivalent to obj.x_=(y), if obj.x also exists
obj(x) = y  // equivalent to obj.update(x, y)
obj op= y   // equivalent to obj = obj op y, if op is symbolic
~obj        // equivalent to obj.unary_~; also for !, + and -, but no other symbol 
```

好的，现在到你给出的例子。可以*导入*稳定值的成员。Java 可以通过静态导入为静态方法做到这一点，但 Scala 有一个更通用的机制：从包、对象或公共实例导入也不例外：它同时带来类型成员和值成员。方法属于后一类。

所以，想象你有`val a = 2`，你有`import a._`。这会将所有`Int`方法纳入范围，因此您可以直接调用它们。您不能这样做`+(2)`，因为这将被解释为对 的调用`unary_+`，但您可以调用`*(4)`，例如：

```
scala> val a = 2
a: Int = 2

scala> import a._
import a._

scala> *(4)
res16: Int = 8 
```

现在，这是规则。你可以打电话

```
method(params) 
```

如果：

1.  `method`已导入范围。
2.  你保留括号（即使只有一个参数）

请注意，还有一个优先级问题。如果您编写`obj method(params)`，Scala 将假定`method`属于`obj`，即使它已导入范围。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-10T09:57:38.427

如果我们对此进行脱糖，我们将拥有：

```
breakable({ ... }) 
```

这匹配签名

```
breakable: (op: ⇒ Unit): Unit 
```

并使用如此命名**的名称调用**参数（您可能会认为这是*将代码块作为参数传递*）

更多的 scala 允许你这样写：

```
scala> def foo (op1: => Unit)(op2: => Unit) = {op1;op2;}
foo: (op1: => Unit)(op2: => Unit)Unit

scala> foo { println(1) } { println(2) }
1
2 
```

以上是柯里化函数的例子

# javascript - Document.form.submit() 不工作

> ID：11899178
> 
> 赞同：-2
> 
> 时间：2012-08-10T09:49:17.450
> 
> 标签：javascript

我有以下内容：

```
<form action="file.php" method="post" enctype="multipart/form-data"  name='form' id='form'>
    <table border="0" cellpadding="0" cellspacing="0" width="100%" align="center"  style="BORDER-RIGHT: #fe03b4 1px solid; BORDER-TOP: #fe03b4 1px solid; BORDER-LEFT: #fe03b4 1px solid; BORDER-BOTTOM: #fe03b4 1px solid">
        <tr>
            <td style="margin-left: 3px">
                <b><font color="#f803f8" size="1">Eyes</font></b>
            </td>
            <td>
                <select size="1" name="eyes" class="input" id="eyes" style="BACKGROUND-COLOR: #f7ed79; COLOR: #000000; font-family: Arial; font-size: 10px; width:150px;">`
                    <option selected="selected" value="">Select</option>
                    <option value="1"<? if ($eyes=="1") echo "selected"; ?>>Blue</option>
                    <option value="2"<? if ($eyes=="2") echo "selected"; ?>>Green</option>
                </select>
            </td>
        </tr>
    </table>

    <br />

    <table border="0" cellpadding="0" cellspacing="0" width="100%" align="center"  style="BORDER-RIGHT: #fe03b4 1px solid; BORDER-TOP: #fe03b4 1px solid; BORDER-LEFT: #fe03b4 1px solid; BORDER-BOTTOM: #fe03b4 1px solid">
        <tr>
            <td style="margin-left: 3px">
                <b><font color="#f803f8" size="1">Description</font></b>
            </td>
            <td>
                <textarea rows='5' name='description'  cols='120'><? echo "$description"; ?></textarea>
            </td>
        </tr>

    </table>

    <br />

    <table width="100%" border="0" align="center">
        <tr>
            <td  align="center">
                <input name='Update' type='submit' onClick="if(document.form.eyes.value == ''){ alert('Eyes Color?'); document.form.eyes.focus(); return false; } else 
                if(document.form.description.value==''){ alert('Description?'); document.form.description.focus(); return false; } else
                { document.form.submit(); parent.scrollTo(0,0); }" value='Update' style="width:100%; font-size:10px" />
            </td>
        </tr>
    </table>
</form> 
```

第一个警报（眼睛）有效，但第二个没有给我警报，即使没有插入文本，它也会保存。

数据库中的 EYES 列定义为 0，然后我可以选择选项 1 或 2 进行更新。

如果没有以前的保存，数据库中的文本字段可以更新吗？换句话说，数据库中的文本列是 NULL（没有保存文本），我尝试在没有保存的情况下进行更新。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:13:37.883

这是因为，按钮的类型是提交。如果您想手动控制提交，请将其更改为按钮。或者改用表单提交事件，在提交事件中验证表单，如果无效则取消提交。

[http://msdn.microsoft.com/en-us/library/ie/ms536972(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536972(v=vs.85).aspx)

# c# - 用数据填充 ComboBox

> ID：11899179
> 
> 赞同：0
> 
> 时间：2012-08-10T09:49:24.417
> 
> 标签：c#

选择单选选项后，我想在组合框中显示我的数据库中的项目。当我尝试这个时，组合框中没有显示任何内容。请帮忙

```
private void chkDetailsButton_Click(object sender, EventArgs e)
{
    if (radioButtonA.Checked)
    {
        OleDbConnection connect = db.dbConnect();

        try
        {
            connect.Open();
            MessageBox.Show("Opened");
            OleDbCommand command = new OleDbCommand();
            command.Connection = connect;

            command.CommandText = "Select * from Categories";
            DataTable dt = new DataTable();

            for (int i = 0; i < dt.Rows.Count; i++)
            {
                cmbDisplay.Items.Add(dt.Rows[i]["SeatNo"]);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception in Database" + ex);
        }
        finally
        {
            connect.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:55:44.103

您的 try 块应类似于以下内容：

```
 try
    {
        connect.Open();
        MessageBox.Show("Opened");
        OleDbCommand command = new OleDbCommand();
        command.Connection = connect;

        command.CommandText = "Select * from Categories";
        DataTable dt = new DataTable();

        //Put some data in the datatable!!
        using(OleDbDataReader reader = command.ExecuteReader())
        {
            dt.Load(reader);
        }

        for (int i = 0; i < dt.Rows.Count; i++)
        {
            cmbDisplay.Items.Add(dt.Rows[i]["SeatNo"]);
        }
    } 
```

您需要用数据填充 DataTable！

您还可以考虑以下几点：

```
 using(OleDbDataReader reader = command.ExecuteReader())
        {
            while(reader.Read())
            {
                cmbDisplay.Items.Add(reader.GetValue(reader.GetOrdinal("SeatNo"));
            }
        } 
```

这样你甚至不需要使用 DataTable；对于大型数据集，这是一种更有效的方法。

顺便说一句，您可能希望考虑使用[Using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

```
 using(OleDbConnection connect = db.dbConnect())
    {
        try
        {
            connect.Open();
            //MessageBox.Show("Opened");
            using(OleDbCommand command = new OleDbCommand())
            {
                command.Connection = connect;
                command.CommandText = "SELECT * FROM Categories";
                using(IDataReader reader = command.ExecuteReader())
                {
                    while(reader.Read())
                    {
                            cmbDisplay.Items.Add(reader.GetValue(reader.GetOrdinal("SeatNo"));
                    }
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("An erorr occured:" + ex);
        }        
    } 
```

这将确保您的连接、命令和阅读器对象被释放。如果您打算保留连接的实例，这是不合适的，但是因为一旦您的代码离开 using 语句，它将被关闭并处置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:54:04.760

缺少用您的 sql 命令返回的数据填充 DataTable dt。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:56:15.760

尝试使用此代码 - 在您的示例中，您不会将表与数据绑定，而是创建表的新实例。

```
$ private void chkDetailsButton_Click(object sender, EventArgs e) 
{
 if (radioButtonA.Checked)
        {
            OleDbConnection connect = db.dbConnect();

            try
            {
                connect.Open();
                MessageBox.Show("Opened");
                OleDbCommand command = new OleDbCommand();
                command.Connection = connect;

                command.CommandText = "Select * from Categories";
                OleDbDataReader myReader = command.ExecuteReader();
                while (myReader.Read()) 
                {
                    cmbDisplay.Items.Add(myReader["SeatNo"]);
                }

            }
            catch (Exception ex)
            {
                MessageBox.Show("Exception in Database" + ex);
            }
            finally
            {
                connect.Close();
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:58:30.957

您可以使用 Datatable 填充组合框：

```
SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=Test;Integrated Security=True");
            SqlDataAdapter da = new SqlDataAdapter("select * from Books",con);
            DataTable dt = new DataTable();
            da.Fill(dt);
            comboBox1.DisplayMember = "Name";
            comboBox1.ValueMember = "ID";
            comboBox1.DataSource = dt; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:11:48.837

在附加之前你没有在数据集中填充数据试试这个

```
 if(radio.checked) 
     {
      try 
        { 
         connect.Open();
         MessageBox.Show("Opened");
         OleDbCommand command = new OleDbCommand();
         command.Connection = connect;
         command.CommandText = "Select * from Categories";

         OleDbDataAdapter db = new OleDbDataAdapter();
         DataSet ds = new DataSet();
         db.SelectCommand = command;
         db.Fill(ds);
         for(int i=0;i<ds.Tables[0].Rows.Count;i++)
         {
           cmbDisplay.Items.Add(ds.Tables[0].Rows[i][0].ToString());      

          }
        cmDisplay.DataBind();

        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception in Database" + ex);
        }
        finally
        {
            connect.Close();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T09:56:11.953

我无法相信这一点。:D

你什么时候用数据库中的数据准确地填充数据表？中间什么都没有

`DataTable dt = new DataTable();`

和

`for (int i = 0; i < dt.Rows.Count; i++)`

# php - 将一列分成 3 列并计算每一行

> ID：11899183
> 
> 赞同：3
> 
> 时间：2012-08-10T09:49:32.137
> 
> 标签：php, mysql

我有一张普通的桌子：

```
id |value
12 |1
24 |3
35 |20 
```

..等等到 id 让我们说 100。我想知道是否有一个查询来全选，但将列拆分为 3 个相等分隔的列，并将第一个从 1 到 33、第二个 34-66、67-100（或任何接近该逻辑的东西）

**预期输出：** 我不关心 id 所以需要什么

```
order1|value1  order2|value2 order3|value3
    1 |1           34|80          67|206
    2 |4           35|100         68|207
    3 |6           36|102         69|280
    ...            ....            ...
    33|60          66|201        100|810 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:13:00.020

我认为这就是你要找的：

```
SELECT *
FROM (
      SELECT (@var_count := @var_count + 1) AS order1, value AS value1, 0 order2, 0 value2, 0 order3, 0 value3
      FROM table_name, (SELECT @var_count := 0) a
      LIMIT 33

      UNION ALL

      SELECT 0 order1, 0 value1, (@var_count := @var_count + 1) AS order2, value AS value2, 0 order3, 0 value3
      FROM table_name, (SELECT @var_count := 33) a
      LIMIT 34, 33

      UNION ALL

      SELECT 0 order1, 0 value1, 0 order2, 0 value2, (@var_count := @var_count + 1) AS order3, value AS value3
      FROM table_name, (SELECT @var_count := 66) a
      LIMIT 67, 33
     )a; 
```

# objective-c - 在 CoreData 中存储标量值（NSInteger、BOOL、double）而不转换为 NSNumber

> ID：11899186
> 
> 赞同：2
> 
> 时间：2012-08-10T09:49:39.317
> 
> 标签：objective-c, core-data

`NSNumber`我已经阅读了很多文章，他们说当我想在 CoreData 中存储标量时显式转换：

```
@property (nonatomic, assign) NSInteger value;

- (NSInteger)value
{
    return [value integerValue];
}

- (void)setValue:(NSInteger)val
{
    value = [NSNumber numberWithInteger:val];
} 
```

但是在我们的旧项目中，我们有一堆属性，我们不进行这些操作（并且它们没有自定义访问器）！为什么它有效？

## 示例代码

宣言。标量值不是瞬态的。

```
@interface ProductProperty : NSManagedObject

@property (nonatomic, strong, readonly) NSString * propertyID;
@property (nonatomic, strong, readonly) NSString * title;
@property (nonatomic, strong, readonly) NSSet * values;
@property (nonatomic, assign, readonly) BOOL filter;
@property (nonatomic, strong, readonly) NSDate *update;
@property (nonatomic, strong, readonly) NSNumber *index;
@property (nonatomic, assign, readonly) BOOL system;

@end

#import "ProductProperty.h"

@implementation ProductProperty

@dynamic propertyID;
@dynamic title;
@dynamic values;
@dynamic filter;
@dynamic update;
@dynamic index;
@dynamic system;

@end 
```

映射到对象。如果收到的 JSON 与现有的不同，则调用。否则，它会从 CoreData 存储中获取。

```
- (void)updateProperties:(NSArray*)properties
{
    for (NSDictionary *_property in properties) {
        NSString *propertyID = [_property objectForKey:@"id"];

        ProductProperty *property = [state.productPropertiesWithIDs objectForKey:propertyID];
        if (!property) {
            property = [state.ctx newObjectWithEntityName:ProductProperty.entityName];
            property.propertyID = propertyID;
            [state.productPropertiesWithIDs setObject:property forKey:propertyID];
        }

        property.update = state.update;
        property.title = [_property objectForKey:@"title"];
        property.filter = [_property objectForKey:@"filter"] ? [[_property objectForKey:@"filter"] boolValue] : YES;
        property.index = [propertyIndexes objectForKey:propertyID] ? [propertyIndexes objectForKey:propertyID] : [NSNumber numberWithInt:propertyIndex++];
        property.system = [SYSTEM_PROPERTY_IDS containsObject:propertyID] ? YES : NO;

        [self updatePropertyValues:[_property objectForKey:@"values"] forProperty:property];
    }
}

- (ProductProperty*)productPropertyWithID:(NSString*)propertyId error:(NSError**)error
{
    NSFetchRequest *req = [ProductProperty request];
    req.predicate = [NSPredicate predicateWithFormat:@"propertyID == %@", propertyId];
    return [[ctx executeFetchRequest:req error:error] lastObject];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:18:37.447

答案是，由于 iOS 5 CoreData 支持为标量自动生成访问器，所以我不需要手动实现它们。

# sql - 替换 SQL 表中的列，即 INNER JOIN 的结果

> ID：11899190
> 
> 赞同：1
> 
> 时间：2012-08-10T09:49:51.527
> 
> 标签：sql, union, inner-join

我有下表：

```
 CodeName    cnt             cnt
CodeNAmeA   1111            2222
CodeNAmeB   3333            4444
CodeNAmeC   5555            6666 
```

该表是以下查询的结果：

```
(select a.CodeName, a.cnt, b.cnt from

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName) a

   JOIN

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName,tableA.INAMALOCK) b

ON a.CodeName = b.CodeName) 
```

我有另一个这样的表：

```
 CodeName        RealName
CodeNAmeA       RealNameA
CodeNAmeB       RealNameB
CodeNAmeC       RealNAmeC 
```

此表是简单选择查询的结果

```
select CodeName
from TableCodeReal 
```

我想要做的是显示以下内容：

```
 RealName    cnt     cnt
RealNameA   1111    2222
RealNameB   3333    4444
RealNameC   5555    6666 
```

问题来了，我在aaaa..AAAA 或bbbb..BBBB 中没有真实姓名，如何获取第一个查询的结果并进行替换？非常感谢，我对如何在第一个查询中集成第二个表感到非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:56:03.937

我相信这是你需要的。使您的主查询成为子查询并加入您的第二个表的`CodeName`值。然后`RealName`从您的第二个表中选择 ，以及您的`cnt`值（我已将其别名为`acnt`和`bcnt`）。

```
SELECT T.RealName, Q.acnt, Q.bcnt
FROM
(select a.CodeName, a.cnt as acnt, b.cnt as bcnt from

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName) a

   JOIN

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName,tableA.INAMALOCK) b

ON a.CodeName = b.CodeName) Q
INNER JOIN TableCodeReal T ON Q.CodeName = T.CodeName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:59:35.933

您可以将第一个记录集视为虚拟表。将记录集加入到您的第二张表中，您可以获得所需的结果。

```
select rt.RealName, vt.cnta, vt.cntb
from TableCodeReal rt
inner join 
(select a.CodeName, a.cnt as cnta, b.cnt as cntb from

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName) a

   JOIN

  (select tableA.CodeName, count(*) cnt
   from aaaa..AAAA tableA inner join bbbb..BBBB tableB 
   on tableA.CodeName = tableB.CodeName
   where XXXXXXX
   group by tableA.CodeName,tableA.INAMALOCK) b

ON a.CodeName = b.CodeName) vt on vt.CodeName = rt.CodeName 
```

# php - 将破折号或空格后的每个字母大写（PHP）

> ID：11899191
> 
> 赞同：1
> 
> 时间：2012-08-10T09:49:51.683
> 
> 标签：php, regex, string

我正在尝试将空格和破折号后的每个字母大写。显然，将空格后的每个字母大写不是问题：

```
$string = preg_replace('/[^a-zA-Z-\s]/s', '', $string);
$string = ucwords(strtolower($string)); 
```

成功了。

但是，我找不到将破折号后的每个字母大写的方法，尽管[这个正则表达式](https://stackoverflow.com/questions/6251463/regex-capitalize-first-letter-every-word-also-after-a-special-character-like-a)似乎匹配破折号后的每个字母（如果我相信答案）。

任何帮助表示赞赏！

我也试过：

```
$string = preg_replace('#\b[a-z0-9-_]+#i', strtoupper("$0"), $string); 
```

没有成功...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T09:57:09.210

```
preg_replace_callback('/(?<=( |-))./',
                      function ($m) { return strtoupper($m[0]); },
                      $string); 
```

`/(?<=( |-))./`是*“[前面有 (](http://www.regular-expressions.info/lookaround.html) [)](http://www.regular-expressions.info/lookaround.html)空格或破折号 ( ) 的任何字符 ( `.`) ”[`(?<=)`](http://www.regular-expressions.info/lookaround.html)`( |-)`*。

# drupal - 在 Drupal 7 中以编程方式更改缓存设置

> ID：11899194
> 
> 赞同：4
> 
> 时间：2012-08-10T09:50:08.360
> 
> 标签：drupal, drupal-7

我有一个显示来自外部站点的 RSS 提要列表的块。我想继续缓存除提到的块之外的其他块。怎么做？

例如，我有*blockA*、*blockB*和*blockC*。我只想将*blockB*的缓存设置永久更改为`DRUPAL_NO_CACHE`并保留其他块，我想以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:22:16.960

您可以在创建您的块的特定模块中更改缓存角色。在如下块信息中：

```
function pref_block_info() {
  return array(
    'pref_main' => array(
      'info' => t('Display flash game for auth. users'),
      'cache' => DRUPAL_NO_CACHE,
    ),
    'pref_winner' => array(
      'info' => t('Show the winner of the last week.'),
      'cache' => DRUPAL_NO_CACHE,
    ),
    'pref_leader' => array(
      'info' => t('Show the leader of the current week.'),
      'cache' => DRUPAL_NO_CACHE,
    ),
    'pref_top' => array(
      'info' => t('Show the top 10 of the current week.'),
      'cache' => DRUPAL_NO_CACHE,
    ),
  );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:34:55.473

如果您在自己的模块中定义块，Jurgo 给出的答案是完全正确的。

如果您想更改由其他模块编写的块的缓存行为，则可以使用该函数`mymodule_block_list_alter`

```
function mymodule_block_list_alter(&$blocks, $theme, $code_blocks) {
  // Remove the caching on rss feeds block. 
  // Here rss-feeds is the unique key for the block
  $blocks['rss-feeds']['cache'] = DRUPAL_NO_CACHE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:55:22.373

这将通过转到性能设置页面（*admin/settings/performance*）并通过向下滚动单击*“清除缓存数据”来减少工作。*

但请确保此页面只能由管理员访问。

对于*Drupal 7与**Drupal 6*相同：

```
<?php
  drupal_flush_all_caches();
  drupal_set_message('cache flushed.');
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T19:38:14.300

积木从何而来？这很重要。正如 Jurgo 所说，`hook_block_info`如果它是自定义模块，您可以指定它。如果它们是视图块，则在处理此问题的视图中每个显示都有一个缓存设置。如果它们是其他模块提供的块，您需要直接查询数据库以更改块的缓存设置。

作为一般说明，要显示 RSS 提要，只需使用提要和视图。然后，您根本不需要为此编写自定义代码。

# java - 是否应该为多次调用的方法创建一个变量？

> ID：11899198
> 
> 赞同：0
> 
> 时间：2012-08-10T09:50:37.703
> 
> 标签：java

这是我的方法：

```
public void addEmployee(Employee employee) {
if(! employees.containsKey(employee.getName())) {
      employees.put(employee.getName(), employee);
  }
} 
```

如您所见，有一个访问`employee.getName()`器被多次调用。程序员应该为这样的多次调用创建一个单独的变量吗？像这样：

```
public void addEmployee(Employee employee) {
String name=employee.getName();
if(! employees.containsKey(name)) {
   employees.put(name,employee);
  }
} 
```

从性能的角度来看，它是否有意义，而不仅仅是风格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:52:32.573

从风格的角度（更清晰）和性能的角度（不做两次操作）来看，这都是有意义的。例如，`getName`可能需要对数据库进行查询，但您不希望执行其中两个！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:52:55.723

> 从性能的角度来看，它是否有意义，而不仅仅是风格？

如果包含大量计算，则可以`getName()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:54:29.767

它当然不那么冗长。

性能可能是一个问题，但我不会为此*过早地*进行优化。`getName()`但是，您可能会争辩说，如果/何时重构以在将来执行更复杂的操作，则提前提取变量将使您避免潜在的性能问题。一个普通的 getter 不一定仍然是一个普通的 getter（这就是为什么我提倡对这些东西进行单元测试——即使是粗略的方式）

然而，另一个需要考虑的问题是**不变性**。可以`employee.getName()`更改，并且可以在上述运行时由另一个线程更改吗？如果可以，那么您的映射逻辑将中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:58:00.590

从风格的角度来看，我更喜欢第一个选项，因为我不认为你应该引入局部变量，除非你要改变它们。

从性能的角度来看，我不确定会有很大的不同，我不知道 JIT 可以做什么。（在 C++ 中，getter 方法可以标记为 const，编译器可以轻松地进行优化）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T09:55:24.170

调用方法而不是读取变量会增加一点开销。如果性能是一个大问题并且每秒调用此方法很多次，它可能会有所作为。否则，这是一种风格偏好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T10:00:25.180

**1.**如果**它只被调用一次，**那么将它分配给另一个变量将是无用的。

**2.**如果它使用**了不止一次**并且**处理** `getName()` **量很大**，那么将它分配给一个变量以供以后使用，将是一个好主意，因为它会节省大量的处理时间。

# ios - IMAP 和 SMTP 的单独身份验证？

> ID：11899201
> 
> 赞同：0
> 
> 时间：2012-08-10T09:50:41.657
> 
> 标签：ios, smtp, xcode4.2, imap

我正在开发一个 iOS 应用程序，用户可以通过该应用程序从他的电子邮件帐户阅读和发送消息。

我的问题是，一旦用户登录到 IMAP 服务器来阅读邮件，他必须单独登录到 SMTP 服务器来发送邮件吗？或者问题可以反过来，一旦他登录到 SMTP 服务器，他必须单独登录到 IMAP 服务器才能阅读电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:06:23.110

我不完全确定你的问题是什么，但是是的。对于 IMAP/SMTP，传入和传出组件是完全独立的协议，甚至不必在同一台服务器上（通常不是：参见 imap.gmail.com 和 smtp.gmail.com），所以是的，他们需要单独登录。通常，它们是相同的用户名和密码，但并非总是如此。

# google-drive-api - 谷歌云端硬盘/列出文件夹中的文件

> ID：11899205
> 
> 赞同：4
> 
> 时间：2012-08-10T09:50:50.170
> 
> 标签：google-drive-api

我没什么问题。有什么办法（我读过API，但也许......）如何仅使用列出文件夹中的文件`Google Drive API`？我的意思是没有范围的文档列表 API。

如果我发送请求 GET [https://www.googleapis.com/drive/v2/files](https://www.googleapis.com/drive/v2/files)那么我会得到我的所有文件和文件夹`Google Drive`，但我只想显示特定文件夹内的文件。

我的英语不好，但我希望你能理解我。

如果没有任何方法可以做到这一点，那么我必须使用 Documents List API。感谢您的回答

PS：我用 C++/QT 为 MeeGo 和 Symbian OS 移动系统制作应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:37:17.963

解决了。我必须使用带有 =q 的搜索字符串参数

# firebird - Firebird 2.5 - 从存储过程中为表中的每一行添加唯一 ID

> ID：11899206
> 
> 赞同：2
> 
> 时间：2012-08-10T09:50:50.967
> 
> 标签：firebird, firebird2.5

我有一个没有唯一 ID 的表。我想创建一个存储过程，将行号作为 ID 添加到每一行，但我不知道如何获取当前行号。这是我到目前为止所做的

```
CREATE OR ALTER PROCEDURE INSERTID_MYTABLE 
returns (
    cnt integer)
as
declare variable rnaml_count integer;
begin
  /* Procedure Text */
  Cnt = 1;
  for select count(*) from MYTABLE r into:rnaml_count do
   while (cnt <= rnaml_count) do
    begin
     update MYTABLE set id=:cnt
       where :cnt = /*how should I get the rownumber here from select??*/
     Cnt = Cnt + 1; 
     suspend;
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:08:42.847

我认为更好的方法是：

1.  添加新的可空列（我们称之为`ID`）。
2.  创建一个生成器/序列（我们称之为`GEN_ID`）。
3.  `NEW.ID`创建一个 before update/insert 触发器，该触发器在is时从序列中获取新值`null`。[例子](http://www.firebirdfaq.org/faq29/)。
4.  做`update table set ID = ID`。（这将填充键。）
5.  将列更改`ID`为不为空。

奖金。触发器可以留在那里，因为它将在新插入的行中生成值。

# jquery - 使用 Jquery 在单击时选择所有复选框

> ID：11899207
> 
> 赞同：0
> 
> 时间：2012-08-10T09:51:10.107
> 
> 标签：jquery

我有以下 HTML：

```
<label><input type="checkbox" value="12" name="Cevent[]" /> Yoga</label>
<label><input type="checkbox" value="12" name="Cevent[]" /> Yoga 1</label>
<label><input type="checkbox" value="12" name="Cevent[]" /> Yoga 2</label>
<label><input type="checkbox" value="12" name="Cevent[]" /> Yoga 3</label>
<label><input type="checkbox" id="selectAllEventList" name="selectAllE"> Select All</label> 
```

和以下 Jquery：

```
$(document).ready(function (){

   $('#selectAllEventList').click (function () {
          $('input[name=Cevent[]]').each(function(){
          $(this).prop('checked', status);
          });

     });
 }); 
```

但我收到语法错误：

```
Error: Syntax error, unrecognized expression: [name=Cevent[]] 
```

我想我写错了选择器，`input[name=Cevent[]]`有什么问题我怎么能正确地写它，因为我必须把它作为一个数组发送，所以我必须把它写成 Cevent[]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:52:44.623

引用属性值：

```
$('input[name="Cevent[]"]') 
```

* * *

**更新**

我假设您的代码旨在在更改`Cevent[]`复选框时选中/取消选中所有复选框`selectAllE`。如果是这种情况，您可以显着缩短代码，因为大多数 jQuery 方法适用于匹配集中的每个元素（无需使用`.each()`）：

```
$(document).ready(function () {
    $('#selectAllEventList').click(function () {
        $('input[name="Cevent[]"]').prop('checked', this.checked);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:52:09.440

您可以`\`使用`escape` `[`

**[现场演示](http://jsfiddle.net/rajaadil/fA3W2/)**

```
$(document).ready(function (){

   $('#selectAllEventList').click (function () {
          $('input[name*=Cevent\\[]').each(function(){
              if( $('#selectAllEventList').is(':checked'))
                   $(this).prop('checked',true);
              else
                   $(this).prop('checked',false);
          });

     });
 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:02:02.447

请试试这个

[见演示](http://codebins.com/bin/4ldqp8i)

JS

```
$('#selectAllEventList').click (function () {
          $('.chkbox').each(function(){
          $(this).prop('checked', true);
          });

     }); 
```

HTML

```
<label><input type="checkbox" class="chkbox" value="12" name="Cevent[]" /> Yoga</label>
<label><input type="checkbox" class="chkbox" value="12" name="Cevent[]" /> Yoga 1</label>
<label><input type="checkbox" class="chkbox" value="12" name="Cevent[]" /> Yoga 2</label>
<label><input type="checkbox" class="chkbox" value="12" name="Cevent[]" /> Yoga 3</label>
<label><input type="checkbox" id="selectAllEventList" name="selectAllE"> Select All</label> 
```

# cakephp - CakePHP 在 2 个日期记录之间搜索

> ID：11899211
> 
> 赞同：3
> 
> 时间：2012-08-10T09:51:20.567
> 
> 标签：cakephp, search, date, between

我正在构建一个小型 Web 应用程序，让用户可以预订办公室和设备。对于预订，他们输入开始和结束日期。

当用户试图找出 2012 年 10 月 23 日是否有任何（例如）汽车可用，并且数据库保存 Start:`2012-10-20`和 End:的预订日期记录时，`2012-10-25`对于（假设）所有汽车，我如何包括所有我在搜索中的日期条目之间的日期？

该`$date`变量从日期搜索表单字段中获取它的值。

不幸的是，这不起作用，我不知道如何使用 daysAsSql 进行此查询：

```
$conditions = array(
    'conditions' => array(
        '? BETWEEN ? AND ?' => array($date,'Equipment.date_start','Equipment.date_end'), 
    )));

$this->set('equipments', $this->Equipment->find('all', $conditions)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T10:31:43.500

有一个更简单的解决方案，但感谢您的帮助：

（作为查找中的一个条件：）

```
array('Equipment.date_start <= ' => $date,
      'Equipment.date_end >= ' => $date
     ), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T11:02:57.437

如果您有一个日期并且想使用 BETWEEN

```
$date_start = start date;
$date_end = date_end;

$conditions = array(
    'conditions' => array(
        'date(Equipment.create) BETWEEN ? AND ?' => array($date_start, $date_end), 
    )));

$this->set('equipments', $this->Equipment->find('all', $conditions)); 
```

如果您有 From AND To

在你的情况下

```
$date_start = start date;
$date_end = date_end;

$conditions = array(
    'conditions' => array(
        'Equipment.start_date >=' => array($date_start), 
        'Equipment.end_date <=' => array($date_end)
    ));

$this->set('equipments', $this->Equipment->find('all', $conditions)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-08T11:44:57.967

这是`CakePHP BETWEEN`查询示例。

我将我的数组定义为变量，然后在我的 CakePHP find 函数调用中使用这些变量：

```
// just return these two fields
$fields = array('uri', 'page_views');

// use this "between" range
$conditions = array('Event.date BETWEEN ? and ?' => array($start_date, $end_date));

// run the "select between" query
$results = $this->Event->find('all', 
         array('fields'=>$fields, 
               'conditions'=>$conditions)); 
```

[参考自](http://alvinalexander.com/php/cakephp-find-between-select-query-syntax)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T10:49:04.453

```
$start = date('Y-m-d');
$end = date('Y-m-d', strtotime('+1 month'));

$conditions = array('Event.start <=' => $end, 'Event.end >=' => $start);

$this->Event->find('all', array('conditions' => $conditions)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T12:41:32.460

如果您使用的是 cakephp 2.0，这就是答案[http://book.cakephp.org/2.0/en/core-libraries/helpers/time.html#TimeHelper::daysAsSql](http://book.cakephp.org/2.0/en/core-libraries/helpers/time.html#TimeHelper::daysAsSql)

如果您使用的是 cakephp 1.3，您可以使用 TimeHelper，只需导入它并使用与此处文档中的示例相同的功能[http://book.cakephp.org/1.3/en/view/1471/Formatting](http://book.cakephp.org/1.3/en/view/1471/Formatting)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-28T16:39:49.403

您不能使用具有此 - 语法的数据库列`BETWEEN`。如果您在数组中分配字符串，CakePHP 将引用它们。数值相同，具体取决于您的数据库设置。

> CakePHP 将根据数据库中的字段类型引用数值。
> – 见[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

如果您仍想使用`BETWEEN`，您可以将查询写入数组键，因为 CakePHP 不会转义键，而只会转义值。

> CakePHP 只对数组值进行转义。您**永远不**应该将用户数据放入密钥中。这样做会使您容易受到 SQL 注入的攻击。
> – 见[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

关于你的问题：

```
$this->Model->find('all', array(
    'conditions' => array(
        '"YYYY-MM-DD" BETWEEN Model.date_start AND Model.date_end',
    ),
)); 
```

您甚至可以使用 MySQL 日期和时间函数：

```
$this->Model->find('all', array(
    'conditions' => array(
        'CURDATE() BETWEEN Model.date_start AND Model.date_end',
    ),
)); 
```

如果您使用日期/时间函数，请不要引用它们。如果您使用特定日期，请将其放在引号中。

# javascript - 地理位置无法返回确认？

> ID：11899217
> 
> 赞同：0
> 
> 时间：2012-08-10T09:51:41.400
> 
> 标签：javascript, oop, geolocation, leaflet

我正在寻找一种从另一个功能触发用户地理定位导航器功能的方法`mapInit()`。它几乎可以工作，但我无法正确回调`getCurrentPosition()`以确认它运行良好..它每次都返回未定义。

我的地理定位对象必须完成其他任务，所以我不希望它触发`mapInit()`。它应该必须获取用户位置，记录并返回`true`或`false`..有什么猜测吗？

谢谢 ：）

```
// Get user current position, return true or false
//
var geolocation = {
    get: function() {
        if (alert(navigator.geolocation.getCurrentPosition(this.success, this.error, {
            enableHighAccuracy: true,
            maximumAge: 5000
        })) {
            return true;
        } else {
            return false;
        }
    },
    success: function(position) {
        this.last = position; // record last position
        return true;
    },
    error: function() {
        alert('code: ' + error.code + 'n' + 'message: ' + error.message + 'n')
        return false;
    },
    last: undefined,
}

// Initialize leaflet map and get user location if coords are undefined
//
var mapInit = function(latitude, longitude) {
    if (!latitude && !longitude) { // if no latlng is specified, try to get user coords
        if (geolocation.get()) {
            latitude = geolocation.last.coords.latitude;
            longitude = geolocation.last.coords.longitude;
        } else {
            alert('oups!');
        }
    }
    var map = L.map('map').setView([latitude, longitude], 15);
    L.tileLayer('http://{s}.tile.cloudmade.com/#APIKEY#/68183/256/{z}/{x}/{y}.png', {
        minZoom: 13,
        maxZoom: 16,
    }).addTo(map);
    var marker = L.marker([latitude, longitude]).addTo(map);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:01:05.570

不确定我是否理解您要执行的操作，但是当您调用“getCurrentPosition”时，您传递的第一个参数是一个方法，一旦检索到该位置，该方法将被调用。正如您在评论中所说，getCurrentPosition 将始终立即返回，但如果可以检索用户位置（可能永远不会调用），将调用回调方法：

```
navigator.geolocation.getCurrentPosition( function(position) {
  var lat = position.coords.latitude;
  var lon = position.coords.longitude;
  //do something like recent the Map
}); 
```

您将需要首先使用一些默认坐标创建传单地图，然后使用提供给回调方法的坐标重新定位地图。

# .net - 告诉 .NET 反射程序（反射器、分析器和防病毒程序）exe 被混淆或在被反射时显示消息的选项

> ID：11899218
> 
> 赞同：0
> 
> 时间：2012-08-10T09:51:42.913
> 
> 标签：.net, reflection, reactor

我使用产品 .NetReactor 来混淆我们的产品之一。该工具非常同意，所以如果有人试图以邪恶的目的反映到 exe 中，它不仅会返回垃圾，而且会导致我们的应用程序崩溃。您可以争辩说这很好（邪恶的人看不到代码），但我们不时看到像分析器和防病毒这样的工具试图反映良好的意图（以保护和发现性能问题）。当然，这样的工具也不应该被允许查看代码，但是在 .NET 或 .NET Reactor 工具中是否有可能以某种方式将 exe 标记为受混淆保护的好意图工具将能够检测到这一点并且不反映. 或者是否有可能在代码中知道您正在被反映并显示该 exe 无法反映的消息（比仅仅崩溃更用户友好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:57:48.530

它不会使*您的*应用程序崩溃-它会使正在反射的应用程序崩溃等。这仅表明应用程序中存在错误-它应该更优雅地处理错误。

> 或者是否有可能在代码中知道你正在被反映

您的代码没有*运行*- 它只是正在检查元数据。

听起来您真正想要的是让 Reflector 等工具具有更好的错误处理能力。我完全赞成良好的错误处理，但我个人并不介意如果有人试图反编译他们不应该反编译的应用程序有糟糕的用户体验......

# php - 创建链接以重置密码的最佳做法是什么？

> ID：11899220
> 
> 赞同：1
> 
> 时间：2012-08-10T09:52:01.407
> 
> 标签：php, passwords, forgot-password, change-password

我在网站上有用户，他们的密码被加密（md5）并存储在数据库中。现在，我有他们的电子邮件，如果有人忘记了他的密码，我想给他发送链接以重置密码。

任何人都可以建议如何做到这一点？哪些是最佳实践？

问候，佐兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-07T20:17:35.873

处理密码重置的安全方法如下所示：

密码重置请求：

1.  用户打开密码重置申请表并输入电子邮件地址。
2.  您的应用程序检查电子邮件是否存在于您的数据库中。如果它存在，它会创建一个令牌，该令牌应该是随机的，而不是源自用户 ID 或时间戳等信息。令牌的**哈希**将与用户 ID 和到期日期一起存储在数据库中的单独表中。每封电子邮件都会将带有原始令牌的链接发送给用户。
3.  该应用程序显示电子邮件已发送的确认信息。此页面可以包含电子邮件地址，因此用户可以检查他是否有错字（毕竟没有信息是否在数据库中，因此攻击者无法测试它的存在）。

重设密码：

1.  用户单击链接并打开重置表单。在此表格上，他可以输入两次新密码。令牌必须作为隐藏的输入标签包含在表单中。
2.  提交表单后，应用程序对令牌进行哈希处理并在数据库中搜索这样的令牌哈希。如果匹配且未过期，则可以允许用户更改密码。最后令牌应该被标记为已使用，我自己更喜欢保留条目，所以当他再次单击链接时，我可以通知用户令牌已被使用。

您可以使用不带盐的 SHA512 之类的哈希算法对令牌进行哈希处理。如果令牌非常强（最小长度为 20，AZ 为 0-9），这是安全的。从理论上讲，您必须在将此类哈希输入数据库之前检查它是否已经存在，实际上这可以忽略不计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:00:11.760

您应该使用散列随机字符串发送电子邮件`mail()`并将其添加到数据库中。电子邮件应包含类似“domain.com/forgot.php?h=HASHEDSTRING”的链接。在该页面中，您应该检查哪个用户拥有该散列字符串并输出一个字段供他们重置密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:59:18.977

在数据库中弹出一个相当唯一的列，并且是一个随机生成的令牌字符串（很长）。当用户请求重置密码时，请通过电子邮件向他们发送该令牌以进行验证。通过链接（又名 GET）返回该令牌将确认用户有权访问电子邮件地址，并允许他们重置密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:05:45.517

您可以执行以下操作，

1.  如果用户忘记了他的密码，允许他输入注册的电子邮件。

2.  发送带有重置密码链接的电子邮件，该链接应包含 md5（一些数据）例如：www.ex.com/md5_data

3.  在发送邮件之前，输入的检查电子邮件已存在，如果存在，请获取用户 ID，存储用户 ID，您与邮件一起发送的 md5（数据）

4.  当用户单击发送到邮件的链接时，获取 url 数据并检查表中是否存在 md5 数据，如果存在则获取用户 ID 并允许他使用用户 ID 设置新密码和更新密码，并从表中删除 md5 数据所以如果他再次单击该链接，它应该不起作用。

# windows - 通过脚本为自定义文件类型设置默认程序？

> ID：11899223
> 
> 赞同：2
> 
> 时间：2012-08-10T09:52:05.940
> 
> 标签：windows, file-type, file-association

我被赋予了编写脚本的任务，该脚本将程序（比如 C:\foo.exe）与自定义文件类型（比如 .bar）相关联。我知道这涉及编辑注册表中的设置，但我不知道如何通过脚本为自定义文件类型执行此操作。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:11:29.990

你需要两个命令。

首先是`ASSOC`用于修改文件扩展名关联。它采用 .ext 形式的参数，`.ext=fileType`其中 .ext 是您的特定扩展名，文件类型将映射到要执行的实际命令。

可以使用`FTYPE`修改文件扩展名关联中使用的文件类型的命令添加文件类型。它将`fileType=openCommandString`我们的 openCommandString 将作为要执行的程序的参数作为参数，并在 %1 等中替换参数。

针对您的特定情况结合这两个命令将如下所示：

```
 ASSOC .bar=Bar2Foo
  FTYPE Bar2Foo=c:\foo.exe %1 %* 
```

请注意，您可以运行`ASSOC .bar`并`FTYPE Bar2Foo`验证结果是否符合您的预期。

# python - python中的多线程：线程何时变为非活动状态？

> ID：11899224
> 
> 赞同：1
> 
> 时间：2012-08-10T09:52:07.770
> 
> 标签：python, multithreading, sleep

这是我的代码，我得到了不同的输出。

```
import threading
import time

def th_fun(limit,sleeptime):
    print '%s' % (limit)
    print '%s number of threads are active' % (threading.activeCount())
    time.sleep(sleeptime)

if __name__ == '__main__':
    for i in range(5):
        t = threading.Thread(target = th_fun , args = (i,1))
        t.start() 
```

有人可以告诉线程何时变为非活动状态吗？我的理解是创建并运行了 5 个不同的线程对象，一旦 time.sleeptime() 被执行，它就会变为非活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:57:59.873

输出是变化的，因为多个线程的执行顺序以及每个线程的速度是不确定的。

一旦`t.start()`发生，就会使用您提供的参数调用该函数。但是，这是在设置和启动下一个线程时在后台运行的。根据运行所需的时间量，它可能在下一个线程启动之前完成运行，或者它可能在所有其他线程启动后完成。

添加以下行可能有助于您的理解：

```
 print "Finished thread %s" % limit 
```

在您的功能结束时。

# java - 使用自定义“发件人”地址发送电子邮件

> ID：11899226
> 
> 赞同：2
> 
> 时间：2012-08-10T09:52:08.270
> 
> 标签：java, jakarta-ee, gmail

在我的开源免费在线应用程序中，该工具允许人们向他们的受众发送电子邮件。为此，我使用 java 邮件 API 和 Gmail SMTP。但是，发送时，“发件人”地址始终是我用来验证 Gmail 的帐户，而不是用户的电子邮件地址。这会导致很多混乱和问题。

我理解 Gmail 不允许这样做（以防止滥用）的理念，但从我的应用程序的角度来看，这是一个严重的限制。

除了 Gmail 之外，是否有任何免费/便宜的在线电子邮件服务允许程序化接口并允许程序使用指定的“发件人”地址发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:08:07.947

为什么不为电子邮件设置回复地址，以便用户仍然回复正确的电子邮件地址？

因此，您将发件人地址保留为您的 gmail 地址，但将回复地址设置为用户地址。

就像是：

```
msg.setReplyTo(new InternetAddress("someone@yahoo.com")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:30:23.853

您的应用程序的托管服务应该为您提供一个 SMTP 服务器，您应该使用它来发送电子邮件。但如前所述，伪造`From`是垃圾邮件最常见的标志，此类电子邮件很可能会被垃圾邮件过滤器或路由上的 SMTP 服务器过滤掉。

# php - PHP Mysql 检查行和有多少有相同的电子邮件

> ID：11899228
> 
> 赞同：0
> 
> 时间：2012-08-10T09:52:08.803
> 
> 标签：php, mysql, count

我在 PHP MYSQL 上有这个问题这是我的数据库示例

```
id word email
1  Helo jon@gmail.com
2  Sim  jon@gmail.com
3  Sam  jon@gmail.com
4  Mac  mars@gmail.com
5  Mimic mars@gmail.com 
```

现在我在这里试图解决的是我如何计算具有相同电子邮件的电子邮件，例如 OUTPUT 网页：

```
id word email          submitted words dictionary
1  Helo jon@gmail.com        3         regular
2  Sim  jon@gmail.com        3         regular
3  Sam  jon@gmail.com        3         regular
4  Mac  mars@gmail.com       2         regular
5  Mimic mars@gmail.com      2         regular 
```

提交的单词是电子邮件的计数。我怎样才能在php上计算出相同的电子邮件并输出3 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:55:43.853

使用此查询：

```
SELECT email, COUNT(*) AS nb_emails
FROM your_table
GROUP BY `email` 
```

它将为您表中的每封电子邮件返回相关记录的数量。

如果您使用[mysql_* 函数](http://fr.php.net/manual/en/ref.mysql.php)，您可以使用该代码获取所有值：

```
$sql = "SELECT email, COUNT(*) AS nb_emails
          FROM your_table
          GROUP BY `email`";
$res = mysql_query($sql);
while($row = mysql_fetch_assoc($res))
{
    // do something with the values of the last fetched record. The values are stored in $row['email'] and $row['nb_emails']
} 
```

注意：不鼓励使用 MySQL 扩展。相反，应该使用[MySQLi](http://fr.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://fr.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://fr.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://fr.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:57:21.807

用这个：

```
select email,
count(email) as count_same
from table_users
group by email
having ( count(email) > 1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:54:39.030

使用`mysql_num_rows()`例如：

```
//mysql_connect() & mysql_select_db()    
$q=mysql_query("SELECT * FROM tablename WHERE email='jon@gmail.com'");
$count=mysql_num_rows($q); //3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:57:09.967

尝试这个：

```
SELECT a.ID, a.Word, a.Email, b.SubmittedWords
FROM   myTable a INNER JOIN
        (
            SELECT email, COUNT(*) SubmittedWords
            FROM mytable
            GROUP BY email
        ) b
            ON a.email = b.email 
```

# logging - 为 EAR 文件配置特定于应用程序的记录器

> ID：11899229
> 
> 赞同：0
> 
> 时间：2012-08-10T09:52:09.687
> 
> 标签：logging, war, jboss7.x, ear

有谁知道如何为 EAR 文件配置特定于应用程序的记录器？

我能够为 WAR 文件进行配置。但是如果我将这场战争包装在一个耳朵文件中，那么记录器将无法工作。

任何帮助都是可观的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:09:35.527

在 JBoss AS 7.1.x 中，您需要[排除](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)服务器版本的 log4j。对于 EAR，特别是您的 log4j 配置文件和您`jboss-deployment-structure.xml`需要位于`META-INF`EAR 目录中。

在 JBoss 7.2.x 和 EAP 6.x 中，您需要做的就是将 log4j 配置文件放在`META-INF`目录中。无需排除服务器 log4j 或捆绑您自己的服务器。

# java - GenericJDBCException：无效的列类型：getCLOB 未实现

> ID：11899232
> 
> 赞同：10
> 
> 时间：2012-08-10T09:52:28.583
> 
> 标签：java, jdbc, oracle11g

我正在尝试从 JBoss 5.1 迁移到 JBoss 7.1.1，目前遇到了这个问题。每当我尝试从包含 CLOB 字段的数据库中获取对象时，都会引发此错误：

```
11:48:58,974 INFO  [org.hibernate.event.internal.DefaultLoadEventListener] (http-localhost-127.0.0.1-8080-1) HHH000327: Error performing load command : org.hibernate.exception.GenericJDBCException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
11:48:58,984 ERROR [org.jboss.ejb3.invocation] (http-localhost-127.0.0.1-8080-1) JBAS014134: EJB Invocation failed on component PackageHandling for method public PackageManagement.PackageHandling$FilteredPackageList PackageManagement.PackageHandling.getFilterPackages(java.lang.String,java.lang.String,java.lang.Integer,java.lang.String,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Integer,int,int,java.lang.String,java.lang.String): javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:166) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at PackageManagement.PackageHandling$$$view15.getFilterPackages(Unknown Source) [classes:]
    at org.apache.jsp.View.PackageManagement.Packages_jsp._jspService(Packages_jsp.java:289)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_02]
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:261) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at PackageManagement.PackageHandling.getFilterPackages(PackageHandling.java:635) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_02]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_02]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_02]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_02]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 42 more
Caused by: org.hibernate.exception.GenericJDBCException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:52) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:108) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at $Proxy27.getClob(Unknown Source) at org.hibernate.type.descriptor.sql.ClobTypeDescriptor$4.doExtract(ClobTypeDescriptor.java:108) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:65) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:269) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:265) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:238) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:357) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2695) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1552) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1484) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.getRow(Loader.java:1384) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:640) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQuery(Loader.java:856) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.loadEntity(Loader.java:2058) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3697) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:439) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:420) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:251) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:954) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:903) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:610) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.type.EntityType.resolve(EntityType.java:438) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:150) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1006) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQuery(Loader.java:883) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2463) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2449) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2279) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.list(Loader.java:2274) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1115) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:252) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    ... 62 more
Caused by: java.sql.SQLException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
    at oracle.jdbc.driver.Accessor.unimpl(Accessor.java:412) [ojdbc5.jar:11.2.0.1.0]
    at oracle.jdbc.driver.Accessor.getCLOB(Accessor.java:1296) [ojdbc5.jar:11.2.0.1.0]
    at oracle.jdbc.driver.OracleResultSetImpl.getCLOB(OracleResultSetImpl.java:1540) [ojdbc5.jar:11.2.0.1.0]
    at oracle.jdbc.driver.OracleResultSetImpl.getClob(OracleResultSetImpl.java:686) [ojdbc5.jar:11.2.0.1.0]
    at oracle.jdbc.driver.OracleResultSet.getClob(OracleResultSet.java:358) [ojdbc5.jar:11.2.0.1.0]
    at org.jboss.jca.adapters.jdbc.WrappedResultSet.getClob(WrappedResultSet.java:783)
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source) [:1.7.0_02]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_02]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_02]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:104) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 105 more 
```

我正在使用 ojdbc6.jar Oracle 11.2。司机。我已经尝试过使用 ojdbc5.jar，但没有成功。知道如何解决这个问题吗？

在persistence.xml 中，我使用的是Oracle10gDialect。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-11T07:27:48.517

看起来有问题的列不是 CLOB，而是 VARCHAR，Oracle 驱动程序似乎不支持 VARCHAR 列上的 getCLOB。我将此基于堆栈跟踪的一部分，其中驱动程序本身显式调用一个方法`unimpl`（我假设抛出异常）并且它提到了 T4CVarcharAccessor：

```
Caused by: java.sql.SQLException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor
    at oracle.jdbc.driver.Accessor.unimpl(Accessor.java:412) [ojdbc5.jar:11.2.0.1.0]
    at oracle.jdbc.driver.Accessor.getCLOB(Accessor.java:1296) [ojdbc5.jar:11.2.0.1.0] 
```

所以看起来列的定义和 Hibernate 对其使用的期望不匹配。

# android - 在 Facebook 中发送消息时缺少消息或附件错误

> ID：11899233
> 
> 赞同：4
> 
> 时间：2012-08-10T09:52:29.753
> 
> 标签：android, facebook, facebook-graph-api

我正在将 Facebook 集成到我的应用程序中，我可以轻松完成，但是当我尝试在墙上发布带有超链接的消息时遇到问题，当我尝试这样做时，我收到 Missing message or attachment OauthException code 100，我能够在没有超链接的情况下发布消息。这是我用于在墙上张贴的代码：

```
JSONObject attachment = new JSONObject();

attachment.put("message", "Messages");
attachment.put("name", "click");
attachment.put("href", "http://www.facebook.com");
Bundle parameters = new Bundle();
parameters.putString("attachment",attachment.toString());
response = mFacebook.request("me/feed", parameters,"POST");` 
```

谁能告诉我哪里出错了？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:10:31.307

尝试做类似的事情：

```
Bundle parameters = new Bundle();
parameters.putString("message", "Messages");
parameters.putString("name", "click");
parameters.putString("link", "http://www.facebook.com");
response = mFacebook.request("me/feed", parameters, "POST"); 
```

# autocomplete - 如何让 appcode 自动将我的表达式分配给变量？

> ID：11899237
> 
> 赞同：1
> 
> 时间：2012-08-10T09:52:39.617
> 
> 标签：autocomplete, appcode

我无法弄清楚在这种情况下使用的快捷方式组合。我正在使用带有 IdeaVim 插件的 AppCode。

如何让 appcode 自动将我的表达式分配给变量？例如，我写过：

```
[self getString] 
```

它返回一个 NSString *。

有没有我可以按下的热键，可以使这条语句分配给正确的变量？所以，像：

```
NSString * newVariable = [self getString]; 
```

我认为这在 Eclipse+java 中是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:10:28.153

使用`Refactor`| `Extract`| **变量**。另请参阅[相关答案](https://stackoverflow.com/a/11892034/104891)。此重构的键盘快捷键可以在`Preferences`| `Keymap`. 默认快捷方式是`Alt`++ `Cmd`。`V`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:57:27.033

因为我在 AppCode 中使用 IdeaVim 插件。我必须按 ^T 才能获得“重构此”弹出菜单，然后按 1 选择变量。所以，我的问题的答案是：

按 ^T 然后按 1。

越用 AppCode+IdeaVim，越喜欢。感谢 CrazyCoder 为我指明了正确的方向。

# java - 自定义组件命名空间调用

> ID：11899240
> 
> 赞同：0
> 
> 时间：2012-08-10T09:53:00.780
> 
> 标签：java, android, namespaces, custom-component

我在 Eclipse 的 Android 项目中调用自定义组件时遇到问题。似乎我不明白命名空间声明如何属于一起。我在 SO 上检查了其他几个线程，这些线程起初似乎是相关的，但我无法用这些解决我的问题：

*   [android-custom-control-命名空间问题](https://stackoverflow.com/questions/9745894/android-custom-control-namespace-issue)
*   [如何在 java 和 xml 中传递自定义组件参数](https://stackoverflow.com/questions/4495511/how-to-pass-custom-component-parameters-in-java-and-xml)
*   [android-custom-widget-styles-how-to-put-them-to-a-namespace](https://stackoverflow.com/questions/1453291/android-custom-widget-styles-how-to-put-them-into-a-namespace)

我有以下设置（代码是匿名的）：

**/values/extra_attrs.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="extraComponent">
        <attr name="count" format="integer" />
    </declare-styleable>
</resources> 
```

**/layout/extra_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">    
    <ImageView
        android:id="@+id/extra_main"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/extra_main" 
    />        
</merge> 
```

**/com.site.package.extra/extra.java**

```
package com.site.package.extra;

... misc imports...

public class Extra extends FrameLayout
{
... misc code...
} 
```

**/com.site.package/main.java**（启动类）

```
package com.site.package;

... misc imports...

public class Main extends Activity
{
... misc code...
} 
```

**/layout/main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/main_style" 
  xmlns:extra="http://schemas.android.com/apk/res/com.site.package" >

  <com.site.package.Extra
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    extra:count="3">
  </com.site.package.Extra>
</RelativeLayout> 
```

我面临的问题是；无论我做什么，我都无法调用我的自定义组件。错误发生在可能的布局中，我尝试更改以下项目：

1.  命名空间声明
    *   `xmlns:extra="http://schemas.android.com/apk/res/com.site.package"`
    *   `xmlns:extra="http://schemas.android.com/apk/res/com.site.package.extra"`
    *   `xmlns:extra="http://schemas.android.com/apk/res/extra"`
2.  组件调用
    *   `<com.site.package.extraComponent />`
    *   `<com.site.package.Extra.extraComponent />`
    *   `<extraComponent />`
    *   `<Extra.extraComponent />`
    *   `<android.view.ext.extraComponent />`
3.  属性
    *   `extra:count="3"`
    *   `com.site.package.extra:count="3"`

在这两种情况下，我都设法从智能感知中获得任何帮助，所以我完全迷失了。我真的不明白命名空间是如何在这里工作的，以及我应该如何让代码工作。

**编辑 ：**

我忘了包含我的**AndroidManifest.xml**文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.site.package"
  android:versionCode="1"
  android:versionName="1.0" >

  <uses-sdk android:minSdkVersion="7" />

  <application
    android:icon="@drawable/ic_logo"
    android:label="MyApp"
    android:name="MyApp" >

  <activity
    android:label="MyApp"
    android:name=".Main" >
    <intent-filter >
      <action android:name="android.intent.action.MAIN" />
      <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
  </activity>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:58:50.517

您的自定义组件位于包中`com.site.package.extra`（来自您发布的代码），因此您可以在 xml 布局中使用它：

```
<com.site.package.extra.Extra // ... other attributes 
```

或与：

```
<view  class="com.site.package.extra.Extra"
     // ... other attributes /> 
```

自定义属性的命名空间：

```
xmlns:extra="http://schemas.android.com/apk/res/com.site.package" 
```

并使用它们：

```
extra:count="3" 
```

# c# - 如何使用模板生成解决方案？

> ID：11899242
> 
> 赞同：4
> 
> 时间：2012-08-10T09:53:15.463
> 
> 标签：c#, .net

我这里有点麻烦。

我希望能够使用类似于 VS2010 使用的模板生成 C# 项目（和解决方案）（假设是 C# 控制台应用程序）。基本上我想要一个方法 GenerateConsoleApplication 来做到这一点。但由于我需要生成其中的几个，我想使用模板来填充 program.cs 类的 Main 方法，该方法将与 .csproj 和 app.xml 文件一起生成。

```
public void GenerateConsoleApplication()
{
    var projectName = "MyConsoleApplication";
    var projectLocation = "C:\temp";

    // what goes here so that it creates a solution Visual Studio that I could use ?
} 
```

我查找了 VS2010 用来生成 C# 控制台应用程序的项目模板，我想我可以修改它以满足我的需要。但我不知道我需要写什么（代码明智）来使用上述模板并生成新解决方案的所有文件。有谁知道该怎么做？或者如果它甚至可能？

我知道我可以只编写 csproj 文件和其他文件，但我认为模板可以更轻松地进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:43:59.537

刚刚找到我需要做的。

问题归结为模板文件的解析。一旦我得到解析器，我就可以用适当的值替换标签。我想使用 Visual Studio 的解析器来做到这一点，并稍微修改它已经使用的模板，但这是不可能的。

因此，必须编写自己的解析器并使用它来生成文件。然后可以使用 Regex 将模板文件的标签替换为 Regex.Replace(String, String, MatchEvaluator) 方法。

# jquery - jquery的鼠标悬停问题

> ID：11899245
> 
> 赞同：0
> 
> 时间：2012-08-10T09:53:34.387
> 
> 标签：jquery, jquery-hover

我正在研究悬停效果。悬停时它正在改变大小，但问题是当我将鼠标悬停在包含 h3 文本的行上的任何位置时，大小正在改变。

我宁愿它只在我将鼠标悬停在 h3 文本上时才起作用。

第二个问题是立场不是绝对的。也就是说，当悬停发生时，附近东西的位置会发生变化。

这是我的jQuery代码：

```
var bindBehaviors = function (scope) {
        $('h3',scope).hover(
        function () {
        $(this).css("font-size", "40px");
        },
       function () {
       $(this).css("font-size", "25px");
       }
       );
       }
       bindBehaviors(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:57:26.813

尝试`<span>`在你的`<h3>`:

```
<h3>
    <span>Text</span>
</h3> 
```

并将您的事件绑定到跨度：

```
var bindBehaviors = function(scope) {
    $('h3 span', scope).hover(function () {
        $(this).css("font-size", "40px");
    }, function () {
        $(this).css("font-size", "25px");
    });
}

bindBehaviors(this); 
```

# c#-4.0 - 从碎片化的 MP4“mdat”原子重建 MP4 文件？

> ID：11899247
> 
> 赞同：6
> 
> 时间：2012-08-10T09:53:38.600
> 
> 标签：c#-4.0, mp4, smooth-streaming

我正在尝试从 Smooth Streaming 服务器重建视频文件。Smooth Streaming 提供 fMP4 文件，这些文件是常规 MP4 文件，既没有 FTYP 也没有 MOOV 原子。

存储在这些原子中的所有信息都放入我拥有的 Manifest XML 文件中。

有没有办法以编程方式重建原始 MP4 文件，方法是：

*   直接从位于 MDAT 中的 H264/AAC 内容（和图片格式信息）重建新文件；或者
*   重建 FTYP 和 MOOV 原子

或者，有没有可以合并fMP4的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:02:30.240

是的。这是完全可能的。

你可以用 FFmpeg 做到这一点。从 libavformat 研究 mov.c [MP4 demuxer]。

您将需要使用 fMP4 中“丢失”的所有数据来完成内存中的 MP4。换句话说，当你需要一个 fMP4 [几乎所有] 中不存在的原子时，你将不得不输入所有硬编码的信息（这些信息，大部分来自清单）。

这并不容易……但肯定有可能。我自己做过。不幸的是，代码不是我的财产。

祝你好运！;-)

**更新：** PIFF 格式规范将非常有用（[http://go.microsoft.com/?linkid=9682897](http://go.microsoft.com/?linkid=9682897)），因此人们可以了解 fMP4 中已有的内容和没有的内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T02:53:45.970

如果存在与碎片化的mp4文件相关的ism和ismc文件，则重建mp4文件很简单。

要求您了解每个 trak 的媒体类型、编解码器类型、编解码器特定数据和时间尺度，以重建 moov 和 ftyp 原子。

这些信息可以从 ism 和 ismc 文件中检索。

您可以从 ism 文件中检索每个轨道的媒体类型。您可以从 ismc 文件中检索编解码器类型、编解码器特定数据和每个轨道的时间刻度。

简单来说，ism/ismc 文件是服务器和客户端的元数据，因此您可以为 mp4 文件重建元数据（ftyp、moov atom）。

# jquery - jQuery + html img 标签

> ID：11899248
> 
> 赞同：0
> 
> 时间：2012-08-10T09:53:38.497
> 
> 标签：jquery, html

嗨，我有一个图像列表

```
images =    '<img id="new" src="../../public/images/badges/newbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">' +
                '<img id="new1" src="../../public/images/badges/swbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">'+
                '<img id="new2" src="../../public/images/badges/sswbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">'+
                '<img id="new3" src="../../public/images/badges/adbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">' +
                '<img id="new4" src="../../public/images/badges/expbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">'+
                '<img id="new5" src="../../public/images/badges/supbw.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">'; 
```

现在我只想替换 `img id="new"` 为新图像`<img id="new" src="../../public/images/badges/new.png" alt="" width="60" title="Newbie: Shared first featured campaign" height="60">`

维持其他人的原状。我发现很难，因为我的 jquery 知识有限。我如何在 jquery 中做到这一点。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:55:56.130

查看您要替换它的内容，似乎您只想更改`src`属性。

由于字符串中没有其他元素包含相同的`src`，您可以进行 javascript 替换：

```
images = images.replace("../../public/images/badges/newbw.png", "../../public/images/badges/new.png"); 
```

或者，一旦将此字符串**添加到 DOM***，您可以使用 jQuery 更改值：

```
$("#new").attr("src", "../../public/images/badges/new.png"); 
```

* * *

***注意**`$("#new")`：在将字符串添加到 DOM 之前，您不能使用`images`，因为 jQuery 选择器只能通过在 HTML 文档中查找匹配元素来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:56:15.443

因此，您只需更改 id="new" 的图像的“src”属性。使用 jQuery，你需要这个：

```
$("#new").attr("src","../../public/images/badges/new.png"); 
```

在这里，您可以选择确切的图像并通过调用其上的函数来`$("#new")`更改其“src”属性。`attr()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:56:45.387

首先。ID 是唯一的。您不能有两个具有相同 ID 的元素。id="new" 附加到两个元素。

现在将 id 等于 new 的 img 的 src 更改。

```
$("#new").attr("src", "WRITE HERE THE NEW IMAGE PATH") 
```

# sql-server-2008-r2 - 如何确定现在正在处理哪个 SSAS Cube？

> ID：11899250
> 
> 赞同：9
> 
> 时间：2012-08-10T09:53:55.597
> 
> 标签：sql-server-2008-r2, ssas, olap

当多个用户可以同时处理同一个多维数据集并导致多维数据集处理失败时会出现问题。所以我需要检查某个多维数据集当前是否正在处理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T10:40:02.063

如果其他人已经在处理它，我认为你不能阻止它被处理。您可以对“帮助”执行的操作是运行 MDX 查询以检查上次处理多维数据集的时间：

```
SELECT CUBE_NAME, LAST_DATA_UPDATE FROM $System.MDSCHEMA_CUBES 
```

或检查 realted sql server 实例上的 sys.process 表以查看它是否正在运行：

```
select spid, ecid, blocked, cmd, loginame, db_name(dbid) Db, nt_username, net_library, hostname, physical_io, 
       login_time, last_batch, cpu, status, open_tran, program_name
from master.dbo.sysprocesses
where spid > 50
  and loginame <> 'sa'
  and program_name like '%Analysis%'
order by physical_io desc
go 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-05T07:25:12.297

使用此代码选择正在运行的进程：（在 OLAP 中执行）

```
 select *

from $system.discover_Sessions

where session_Status = 1 
```

并且此代码取消运行过程！请将 PID 更改为运行 SESSISONS_SPID，例如：

```
<Cancel xmlns ="http://schemas.microsoft.com/analysisservices/2003/engine">

  <SPID>92436</SPID>

  <CancelAssociated>1</CancelAssociated>

</Cancel< 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T23:08:38.663

对于已经列出的方法，可能更好的方法是使用**SQL Server Profiler**来观察分析服务器上的活动。如前所述，当前流行的答案有两个缺陷，第一个选项仅显示最后一次处理多维数据集。第二个选项仅显示是否正在运行。但它并没有告诉您正在运行什么以及如果您的多维数据集不是从 SQL 服务器而是从不同的数据源处理的怎么办？

使用 SQL Server Profiler 不仅会告诉您是否正在处理某些内容，还会告诉您正在处理的内容的详细信息。您可以过滤掉的大多数事件。如果您想要实时信息，请观看**进度报告当前**事件...通常需要大量数据才能从中获取真实信息，但您会很清楚，至少有一个过程正在进行。仅观看**进度报告开始和结束**事件以获得更好的信息，例如当前正在处理的内容，甚至可以深入到分区级别。其他具有良好信息的事件包括**Command Begin/End**和**Query Begin/End**。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-17T10:41:47.677

如果正在处理多维数据集，您将在任务管理器中看到一个名为“MSDARCH”的作业正在运行。不知道你怎么能分辨出哪一个。

# php - db表中的php值减去不同表中的多个行值

> ID：11899256
> 
> 赞同：0
> 
> 时间：2012-08-10T09:54:14.193
> 
> 标签：php, mysql

我正在努力弄清楚如何`entitlement`从 table1 中获取原始数字，然后从 table2 中的每个请求中减去“天”，以开始日期顺序。

第一张桌子得到他们的权利数字

第二个表获取请求

任何指导将不胜感激，我正在寻找的输出是：

```
Start Date       End Date       Days to be taken        Days remaining

-                   -                   -                      22

01 Sep 2011      03 Sep 2011            3                      19
10 Sep 2011      11 Sep 2011            2                      17 
```

**这是我的代码：**

```
$is_business_result = mysql_query('SELECT * FROM holiday_entitlement_business_manual WHERE employee = \'' . $username . '\' AND academic_year = \'' . $acyear . '\' ');

if($is_business = mysql_fetch_array($is_business_result)) {
echo '<div style="float:left; width:400px;">';
echo '<table width="100%">
<tr>
<td><strong>Name:</strong></td>
<td>'.$is_business['employee'].'</td>
</tr>
<tr>
<td><strong>Entitlement:</strong></td>
<td>'.$is_business['entitlement'].' '.$is_business['units'].'</td>
</tr>
<tr>
<td><strong>Department / Division:</strong></td>
<td>'.$is_business['division'].'</td>
</tr>
<tr>
<td><strong>Line Manager:</strong></td>
<td>'.$is_business['line_manager'].'</td>
</tr>
</table>';
echo '<br/>';
echo '<br/>';
echo '<br/>';    
echo '</div>';

echo '<table width="100%">
<tr>
<td><strong>Start Date</strong></td>
<td><strong>End Date</strong></td>
<td><strong>Days to be taken</strong></td>
<td><strong>Days remaining</strong></td>
</tr>';

echo '<tr>';

echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>'.$is_business['entitlement'].'</td>';

echo '</tr>';

}

$requests_result = mysql_query('SELECT * FROM requests WHERE employee = \'' . $username . '\' AND approved = 1 AND academic_year = \'' . $acyear . '\' ORDER BY start_date ASC');

while($requests = mysql_fetch_array($requests_result)) {

$start_date = new DateTime($requests['start_date']);
$end_date = new DateTime($requests['end_date']);

$timestamp_start_date = $start_date->getTimestamp();
$timestamp_end_date = $end_date->getTimestamp();

$formatted_start_date = date("d M Y", $timestamp_start_date);           
$formatted_end_date = date("d M Y", $timestamp_end_date);           

echo '<tr>';
echo '<td>'.$formatted_start_date.'</td>';
echo '<td>'.$formatted_end_date.'</td>';
echo '<td>'.$requests['days'].'</td>';
echo '</tr>';
}

echo'</table>'; 
```

**表格**

```
CREATE TABLE IF NOT EXISTS `requests` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `academic_year` varchar(255) NOT NULL,
  `employee` varchar(255) NOT NULL,
  `start_date` varchar(255) NOT NULL,
  `end_date` varchar(255) NOT NULL,
  `days` varchar(255) NOT NULL,
  `user` int(20) NOT NULL,
  `approved` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `holiday_entitlement_business_manual` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `academic_year` varchar(255) NOT NULL,
  `employee` varchar(255) NOT NULL,
  `full_part_time` varchar(255) NOT NULL,
  `weekly_hours` varchar(255) NOT NULL,
  `division` varchar(255) NOT NULL,
  `date_of_commencement` varchar(255) NOT NULL,
  `entitlement` varchar(255) NOT NULL,
  `units` varchar(255) NOT NULL,
  `line_manager` varchar(255) NOT NULL,
  `length_of_service` varchar(255) NOT NULL,
  `band` varchar(255) NOT NULL,
  `new_entitlement` varchar(255) NOT NULL,
  `weekly_entitlement` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=227 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:09:04.967

我猜员工是外键，如果是，那么您可以根据员工加入两个表，然后获取所有数据并从 php 中的权利中减去天数

# mysql - SQL：对 DATEDIFF 求和

> ID：11899257
> 
> 赞同：0
> 
> 时间：2012-08-10T09:54:15.757
> 
> 标签：mysql

使用 mysql

2 个日期：`start_date`和`end_date`。

修改后
`TIMEDIFF(start_date, end_date) AS time_diff`

我想 SUM() all time_diff 所以我试试这个
`SUM(TIMEDIFF(start_date, end_date)) AS time_diff`

这会返回我不希望的东西。
我究竟做错了什么？

**编辑：** `SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(end_date, START_DATE)))) AS time_diff`

完美运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:56:26.487

`end_date`应该是第一和`start_date`第二，否则你会得到负值作为输出：

```
SUM(TIME_DIFF(CAST(end_date AS DATETIME), CAST(start_date AS DATETIME))) AS time_diff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:10:09.133

`SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(end_date, START_DATE)))) AS time_diff`

# c# - 获取重定向到新页面的页面地址

> ID：11899259
> 
> 赞同：0
> 
> 时间：2012-08-10T09:54:24.683
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 Response.Redirect 之后获取上一页 URL](https://stackoverflow.com/questions/3805438/get-previous-page-url-after-response-redirect)

假设在第 1.aspx 页中，如果发生错误，我在 catch() 块中使用：

```
Response.Redirect("err.aspx"); 
```

在 err.aspx 后面的代码中，我需要 1.aspx 的 url（或我从其重定向到 err.aspx 页面的任何页面）。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:58:38.203

您可以将它们作为

```
if( !IsPostBack )
{
   if(Request.UrlReferrer != null)
   {
     ViewState["PreviousPageUrl"] = Request.UrlReferrer.ToString();
   }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:57:09.380

我想你正在寻找这个：[http ://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:59:17.360

是Page.Request.UrlReferrer；如果引荐来源网址以某种方式不起作用，您也可以将其添加为重定向查询参数，或放入会话中。请参阅[在 Response.Redirect 之后获取上一页 URL](https://stackoverflow.com/questions/3805438/get-previous-page-url-after-response-redirect)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:06:28.010

```
 Response.Redirect(Request.UrlReferrer.ToString()); 
```

它会自动将您从当前页面的位置重定向到上一页...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T10:04:55.187

你应该看看这里

关于如何创建自定义错误页面 [http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/Displaying-a-Custom-Error-Page-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/Displaying-a-Custom-Error-Page-cs)

# android - 带有可扩展细节的 xml 解析

> ID：11899266
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:54:40.567
> 
> 标签：android, xml-parsing, expandablelistview

嗨，我有一个 xml 解析示例。在这里我必须添加可扩展的列表视图。如何在此处添加。请帮助我。

这是我的代码：

```
public class SingleMenuItemActivity extends ExpandableListActivity {
static final String KEY_ARTIST = "payment_method";
static final String KEY_SUBTOTAL = "subtotal";
static final String KEY_DISCOUNT = "discount";

@SuppressWarnings("unchecked")
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         Intent in = getIntent();
         String subtotal = in.getStringExtra(KEY_SUBTOTAL);
         String discount = in.getStringExtra(KEY_DISCOUNT);
         String payment_method = in.getStringExtra(KEY_ARTIST);

         TextView lblSub = (TextView) findViewById(R.id.subtotal_label);
         TextView lblTotal = (TextView) findViewById(R.id.total_label);
         TextView lblPayment = (TextView) findViewById(R.id.payment_label);

         lblSub.setText(subtotal);
         lbldiscount.setText(discount);
         lblPayment.setText(payment_method);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.
                new String[] { "Order Info" },  // the key of group item.
                new int[] { R.id.order},

                // ID of each group item.-Data under the key goes into this TextView.
                createChildList(),              // childData describes second-level entries.
                R.layout.single_list_item,             // Layout for sub-level entries(second level).
                new String[] {"payment_label:"},      // Keys in childData maps to display.
                new int[] { R.id.payment_label}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

/* Creating the Hashmap for the row */
@SuppressWarnings("unchecked")
private List createGroupList() {
      ArrayList result = new ArrayList();
      for( int i = 0 ; i < 1 ; ++i ) { // 15 groups........
        HashMap m = new HashMap();
        m.put( "Order Info","Order Info " + i ); // the key and it's value.
        result.add( m );
      }
      return (List)result;

}

/* creatin the HashMap for the children */
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 2 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList();
      for( int n = 0 ; n < 1 ; n++ ) {
        HashMap child = new HashMap();
        child.put( "payment_label", "payment_label " + n );

        secList.add( child );
      }
     result.add( secList );
    }
    return result;
}
public void  onContentChanged  () {
    System.out.println("onContentChanged");
    super.onContentChanged();
}
/* This function is called on each child click */
public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
    return true;
}

/* This function is called on expansion of the group */
public void  onGroupExpand  (int groupPosition) {
    try{
         System.out.println("Group exapanding Listener => groupPosition = " + groupPosition);
    }catch(Exception e){
        System.out.println(" groupPosition Errrr +++ " + e.getMessage());
    }
} 
```

如果我必须点击特定产品意味着它是去下一个活动。下一个活动有详细的描述和可扩展按钮。如果我必须点击详细描述意味着它被展开并显示 payment_method,subtotal,discount 否则它会留在less.please help me.how is to do....如何使用上述应用程序开发我的代码。

我的 main.xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
  <ExpandableListView android:id="@+id/android:list"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:background="@drawable/bkg"/>

 <TextView android:id="@+id/android:empty"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:text="No items"/> 
```

在这里我得到的输出为零......我可以在这里做些什么改变。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:05:10.163

```
check the below code snippet:
ListView lv;
lv = (ListView) findViewById(R.id.ListView01);
lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
gotoActivity();

            }
        });

start your activity in gotoactivity method using startActivityforResult method to take the values 
```

# javascript - 有人可以帮我调试一个带有 addClass 和 removeClass 功能的“每会话一次”cookie吗？

> ID：11899269
> 
> 赞同：0
> 
> 时间：2012-08-10T09:54:47.197
> 
> 标签：javascript, session, cookies, addclass

我找到了以下 JS 代码（根本不是我的，我不相信。感谢 Michael Regan，www.owt4nowt.ca）

所以，代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>
var key_value = "myTestCookie=true";
var foundCookie = 0;

// Get all the cookies from this site and store in an array
var cookieArray = document.cookie.split(';');

    for(var i=0;i < cookieArray.length;i++)
        {
               var checkCookie = cookieArray[i];
               while (checkCookie.charAt(0)==' ')
               {
                 checkCookie = checkCookie.substring(1,checkCookie.length);
               }

                if (checkCookie.indexOf(key_value) == 0)
               {
                  alert("Found Cookie ");
                   foundCookie = 1;
               }
    }
    if ( foundCookie == 0)
    {
        document.cookie = key_value;
        alert("Setting Cookie");
    }  
</script> 
```

警报正常工作。

但是，当 cookie 被识别时，我删除了警报：

```
 if (checkCookie.indexOf(key_value) == 0)
       {
           foundCookie = 1;
       } 
```

我用 addClass 函数替换了“设置 Cookie”警报，或者我是这么认为的。

```
if ( foundCookie == 0)
{
    document.cookie = key_value;
    $('.someClassHere').addClass("newClass");
} 
```

问题是该功能根本不起作用。如果只留给alerts，没有问题，但是addClass函数完全被忽略了。

addClass 函数是否存在语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:28:14.233

在收到许多好的评论和提示后，最好的结果是在“alun”建议将 javascript 包装在 jQuery .ready() API 中之后。

脚本在添加（或删除）类时的有效性存在明显的延迟，但至少功能是存在的，通过 CSS 等的正确组合，可以最大限度地减少中断。

我使用的结果成功代码是：

```
<script type="text/javascript">
$(document).ready(function () {
 var key_value = "myTestCookie=true";
 var foundCookie = 0;
 var cookieArray = document.cookie.split(';');
     for(var i=0;i < cookieArray.length;i++)
         {
                var checkCookie = cookieArray[i];
                while (checkCookie.charAt(0)==' ')
                {
                  checkCookie = checkCookie.substring(1,checkCookie.length);
                }
                 if (checkCookie.indexOf(key_value) == 0)
                {
                    foundCookie = 1;
                }
     }
     if ( foundCookie == 0)
     {
         document.cookie = key_value;
       $('.someClassOne').removeClass("extraClass");
     } 
});
</script> 
```

所以，是的，我希望这对其他人有帮助！

感谢论坛！

/布莱恩

# ember.js - emberjs Ember.Select 动态内容绑定

> ID：11899274
> 
> 赞同：1
> 
> 时间：2012-08-10T09:55:20.377
> 
> 标签：ember.js

我有这样的事情：

```
window.App = Ember.Application.create();

App.Person = Ember.Object.extend({
    id: null,
    firstName: null,
    lastName: null,

    fullName: function() {
        return this.get('firstName') + " " + this.get('lastName');
    }.property('firstName', 'lastName')
});

App.selectedPersonController = Ember.Object.create({
    person: null
});

App.selectedChildrenController = Ember.Object.create({
    person: null
});

App.peopleController = Ember.ArrayController.create({
    content: [
        App.Person.create({
        id: 1,
        firstName: 'John',
        lastName: 'Doe'
    }),
        App.Person.create({
        id: 2,
        firstName: 'Tom',
        lastName: 'Cruise'
    }),
        App.Person.create({
        id: 3,
        firstName: 'Peter',
        lastName: 'Pan'
    }),
        App.Person.create({
        id: 4,
        firstName: 'Sergey',
        lastName: 'Brin'
    })
        ]

});

App.childrenController = Ember.ArrayController.create({
    children: [
        App.Person.create({
        person_id: 1,
        firstName: 'Scott',
        lastName: 'Hall'
    }),
        App.Person.create({
        person_id: 1,
        firstName: 'Jim',
        lastName: 'Can'
    }),
        App.Person.create({
        person_id: 2,
        firstName: 'Will',
        lastName: 'Smith'
    }),
        App.Person.create({
        person_id: 4,
        firstName: 'Bale',
        lastName: 'Ron'
    })
        ],
    active: function() {
        if (App.selectedPersonController.person) {
            return this.get("children").filterProperty("person_id", App.selectedPersonController.person.id);
        }
        else {
            return null;
        }
    }.property("App.selectedPersonController.person").cacheable()

});

window.App.Select = Ember.Select.extend({
    contentChanged: function() {
        this.$().selectBox('destroy').selectBox();
    }.observes('content')

}); 
```

我的视图代码是这样的：

```
<script type="text/x-handlebars">
  {{view window.App.Select
         contentBinding="App.peopleController"
         selectionBinding="App.selectedPersonController.person"
         optionLabelPath="content.fullName"
         optionValuePath="content.id"
         prompt="Pick a person:"}}

     {{view window.App.Select
         contentBinding="App.childrenController.active"
         selectionBinding="App.selectedChildrenController.person"
         optionLabelPath="content.fullName"
         optionValuePath="content.id"
         prompt="Pick a child:"}}

  <p>Selected: {{App.selectedPersonController.person.fullName}}
    (ID: {{App.selectedPersonController.person.id}})</p>

</script> 
```

我希望我的第二个 window.App.Select 根据第一个 window.App.Select 中的选择动态更新。我正在为第二个 window.App.Select 使用**contentBinding="App.childrenController.active"**来完成这项工作，但它的作用是，如果我在人员选择框中选择一个值，则子选择框不会更新，现在当我选择与人员选择框不同的人，子选择框会根据我之前在人员选择框中的选择填充过滤后的值。

人员选择框 -> 选择 = John Doe（什么都没有发生）

人员选择框 -> 选择 = Tom Cruise（子选择框根据“John Doe”选择进行过滤）

等等。

请看看它有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T13:18:02.130

我再次将所有内容放在一起，试图将 Rajat 的死链接恢复到工作的 jsbin 中，使用 ember.js/1.0.0-rc3 实现此版本的链接或依赖选择框。

[http://jsbin.com/ixogag/5/](http://jsbin.com/ixogag/5/)

# iphone - 如何根据在 iPhone 中输入的 UITextField 设置 UILabel 的值？

> ID：11899277
> 
> 赞同：1
> 
> 时间：2012-08-10T09:55:22.163
> 
> 标签：iphone, objective-c, uitextfield, uilabel

我想根据输入的 UITextField 设置 UILabel 。我的意思是如果用户想输入 SAMPLE 并且他开始输入 S 那么标签应该设置为 S，那么他输入的标签也应该是 A 等等。如何做到这一点？

请分享建议。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:26:54.480

最简单的方法是创建一个方法并将其与带有事件的 UiTextfield 连接起来，`UIControlEventEditingChanged`这将为您提供在文本字段中输入的每个字符的跟踪。

```
[self.selectedTextField addTarget:self action:@selector(enterInLabel ) forControlEvents:UIControlEventEditingChanged];

-(void)enterInLabel 
{ 
    selectedLabel.text=selectedTextField.text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T00:21:54.000

正如@brain 所说，代表也为此工作。该`shouldChangeCharactersInRange:`方法可能有点令人困惑，但我认为以下内容非常简单。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

// myTextField delegate has been set

if ([textField isEqual:myTextField]){
    NSMutableString *txt = [NSMutableString stringWithString:textField.text];
    [txt replaceCharactersInRange:range withString:string]; //this is essentially how the textfield is updated after YES is returned
    previewLabel.text = txt;
}
return YES;
} 
```

文本字段的更改实际上是在返回 YES 之后完成的。这就是这个代表的全部意义所在。举个例子，如果您想将文本字段限制为 3 个字符，您可以执行以下操作来阻止文本字段“替换”文本。

```
 if (range.location > 3) 
    return NO; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T10:19:59.527

设置你的`textField`委托，然后在你的文件中调用它的方法`viewController.m`..像这样 -

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    mylabel.text = [textField.text stringByReplacingCharactersInRange:range withString:string];
    return YES;
} 
```

这将在每个字符增量后更改文本。

**或者您可以在您的 TextField 上添加操作** 请参阅此链接 - [UiTextField 事件](https://stackoverflow.com/questions/2593976/uitextfield-events)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-10T10:00:59.760

您的视图控制器将需要实现[UITextFieldDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)，这将允许它接收对文本字段的更改。在委托的适当方法中，您需要设置 UILabel 的文本。

我从未使用过 UITextFieldDelegate，因此无法提供有关如何使用它的更多详细信息。我会模拟一个简单的示例，然后只使用 NSLog 或调试委托调用以查看您获得的调用。

# objective-c - 在特定时间执行选择器

> ID：11899281
> 
> 赞同：0
> 
> 时间：2012-08-10T09:55:34.130
> 
> 标签：objective-c, ios

我想在午夜执行我的方法，但我不知道如何正确执行此操作。每分钟检查一次时间，如果当前时间等于 23:59 运行方法看起来很愚蠢。计算从现在到午夜的时间间隔并将其设置为 nstimer 的参数？

你能帮我解决这个问题吗？

更新：对不起，伙计们，我忘了一件事：方法必须在没有任何用户通知的情况下运行后台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:13:03.583

您可以使用本地通知：

```
UILocalNotification *notif = [[UILocalNotification alloc] init];
notif.soundName = @"sound.wav";
notif.alertBody = @"My Message";
notif.alertAction = @"Open";

// you need to configure interval and firedate to schedule everything
notif.repeatInterval = XXX;
notif.repeatCalendar = XXX;
notif.fireDate       = XXX;

[[UIApplication sharedApplication] presentLocalNotificationNow:notif];

[notif release]; 
```

要检测应用程序何时从通知打开，您需要在您的 App Delegate 中实现以下方法：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
- (void)applicationDidBecomeActive:(UIApplication *)application
- (void)applicationWillTerminate:(UIApplication *)application 
```

希望这可以帮助。

* * *

编辑后：

你可以使用`[NSTimer ScheduleTimerWith.....]`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:24:02.663

使用在某个时间安排的[本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1 "本地通知")

# fortran - 如何从 fortran 指针中获取唯一值

> ID：11899283
> 
> 赞同：1
> 
> 时间：2012-08-10T09:55:34.027
> 
> 标签：fortran, fortran95

我有一个 fortran 指针，指的是一些分配的内存。我想“散列”它，以便获得一个引用该内存的唯一编号。在 C 中，我会将指针位置转换为整数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:25:07.997

在 Fortran 95 中，我认为这不可能以严格符合标准的方式实现。您将需要使用供应商扩展 - 必要的功能通常可以通过称为 LOC 或类似的内在函数获得。

在 Fortran 2003 中，根据 Fortran 指针指向的对象的性质，您可以将对象的 C 地址（其内存位置）转换为整数。

```
USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_LOC, C_INTPTR_T
TYPE(thing), POINTER :: object
INTEGER(C_INTPTR_T) :: an_integer
!****
ALLOCATE(object)
an_integer = TRANSFER(C_LOC(object), an_integer) 
```

# github-for-windows - 使用 github for windows 提交时没有显示正确的更新

> ID：11899288
> 
> 赞同：4
> 
> 时间：2012-08-10T09:55:46.680
> 
> 标签：github-for-windows

我已经为 Windows [http://windows.github.com/](http://windows.github.com/)安装了 github 。

也已经将存储库克隆到我的本地驱动器中。我创建了一个分支，并对一个文件进行了一些更新，例如：index.html。当我使用 github for windows 提交时。Github 似乎将其视为整个文件更新（整行变为红色），而不是显示我已经进行的修改。但是当我使用命令行提交时，这不会发生。

有人似乎和我有同样的问题吗？请告诉我应该怎么做才能使 git 没有将我的文件视为一个整体更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:59:37.603

当您在 Windows 中编写文件时，它们具有 CRLF 行尾。对于 Git，带有 \n 和 \r\n 行尾的行是不同的。请检查您的编辑器和 Github for Windows 首选项。他们可以自动转换 CRLF<->LF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:11:20.213

基于 Rustam Safin 关于 CRLF 行结尾的内容，最近我发现这个解决方案很有帮助。

[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

我试过了，它解决了我的问题。

# javascript - 是否可以使用来自谷歌联系人 api v3 的 javascript、json？

> ID：11899294
> 
> 赞同：1
> 
> 时间：2012-08-10T09:55:59.140
> 
> 标签：javascript, json, google-api

我可以使用 json 响应从 javascript 使用 Google Contacts api v3 吗？Google api v1、v2 可以从 javascript 中使用，但它们目前已被弃用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:00:03.677

是的。`alt=json`在您的请求中使用。

来源：[https ://developers.google.com/google-apps/contacts/v3/reference](https://developers.google.com/google-apps/contacts/v3/reference)

# eclipse - 启动插件时自定义 Eclipse 应用程序启动器

> ID：11899303
> 
> 赞同：1
> 
> 时间：2012-08-10T09:56:26.093
> 
> 标签：eclipse, plugins, eclipse-plugin, eclipse-rcp

我们正在编写一个可在 ClearCase 环境中工作的 Eclipse 插件，即，我们的插件将与 Eclipse 的 ClearCase SCM 插件（可从 IBM 获得）一起工作。

在开发插件时，我们的 eclipse(RCP & RAP) 不需要 ClearCase 插件。但是，当我们通过“ [Eclipse Application Launcher](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.pde.doc.user/guide/intro/pde_overview.htm) ”启动插件时，新的 Eclipse 确实需要 ClearCase 插件。

是否可以将“Eclipse 应用程序启动器”配置为在启动另一个 Eclipse 实例时包含 ClearCase 插件（或任何其他不在基本 Eclipse 中的插件）？

我无法从文档中找到执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:08:00.280

I think [Target platform](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.pde.doc.user/concepts/target.htm) is what you are looking for.

You can use a pure Eclipse release(such as Juno) as development tool, then use another collection of compile and runtime plug-ins via specifying a target platform.

# c# - 使用 Prism 强制创建视觉树

> ID：11899305
> 
> 赞同：0
> 
> 时间：2012-08-10T09:56:33.403
> 
> 标签：c#, wpf, prism, visualtreehelper, visual-tree

我有一个`TabControl`包含棱镜区域。我想为某些事件触发某种通知（例如闪烁选项卡标题），并且我想从 Prism 区域中的组件触发此通知。

一旦包含此类组件的选项卡打开一次，它就可以很好地使用`VisualTreeUtil.GetParent()`并向上运行，直到我找到我的`TabControl`并可以对其进行修改以指示通知。

但问题是这在用户打开选项卡之前不起作用，因为`VisualTreeUtil.GetParent()`返回 null；显然是因为 Prism 直到那时才连接视觉树。

调用包含`UpdateLayout()`该`TabItem`区域并没有帮助。我不想以编程方式打开 TabItems，因为这会使用户感到困惑。

除了实施一种区域注册表（这会相当丑陋且难以维护）之外，我还能做些什么吗？

如果您想查看代码，我编写了一个[最小的解决方案](http://www.wikiupload.com/QSJ2U5R01LUXVJA)来演示该问题。*Print Structure*按钮尝试从第二个选项卡上的（最初未渲染的不可见的）hello TextBlock 向上移动可视化*树*。在您切换到选项卡之前，它只打印 TextBlock，然后您会到达可视树的根目录。这就是我想要在不切换到选项卡的情况下完成的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:29:03.307

添加评论作为答案：

这可能不是您正在寻找的答案，但似乎您正在采取一种非常程序化的方法。

您是否考虑过使用 MVVM 方法？每个都`TabItem`可以`TabControl`有一个`HeaderTemplate`。在模板中，您可以绑定到 ViewModel 中的属性，该属性会导致选项卡闪烁或更改外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:02:59.837

嗯.. IIRC Prism 区域只是一个配置的 ContentControl/ContentPresenter。一旦它们准备好工作，所有的绑定和数据模型都应该就位，但是树没有被创建，因为它们是不可见的。如果是这样，您应该能够在它们上调用 ApplyTemplate() 来强制它。但是，我不记得 Prism 是否在初始化时或按需分配内容模板/数据上下文 - 后者可能会导致调用 ApplyTemplate 无用。

# java - 在 mysql5.5 上通过 JDBC 创建触发器时出错

> ID：11899306
> 
> 赞同：1
> 
> 时间：2012-08-10T09:56:38.030
> 
> 标签：java, mysql, jdbc, triggers

这是我的代码：

```
triggerBuilder.append("DROP TRIGGER IF EXISTS `insert_associated_inquiry`; ");
triggerBuilder.append(" DELIMITER %% ");

triggerBuilder.append(" CREATE TRIGGER insert_associated_inquiry BEFORE UPDATE ON inquiry ");
triggerBuilder.append(" FOR EACH ROW Begin ");    

triggerBuilder.append(" insert into associated_inquiries(inquiry_id , subject , content , inquiry_date , preferred_date ) " );
triggerBuilder.append("values");
        triggerBuilder.append(" ( " );
            triggerBuilder.append(" OLD.id , ");
            triggerBuilder.append(" OLD.subject , " );
            triggerBuilder.append(" OLD.content , " );
            triggerBuilder.append(" OLD.created_on , " );
            triggerBuilder.append(" OLD.preffered_date " );
        triggerBuilder.append(" ) ; ");

triggerBuilder.append(" END %% ");

triggerBuilder.append(" DELIMITER ; ");

con.createStatement().execute(triggerBuilder.toString()); 
```

这是抛出的错误：

```
 com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax;
 check the manual that corresponds to your MySQL server version for the right 
 syntax to use near 'DELIMITER %%  CREATE TRIGGER insert_associated_inquiry 
 BEFORE UPDATE ON inquiry ' at line 1 
```

此错误的原因和解决方案可能是什么。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:48:23.530

不要在 JDBC 和 MySQL 中使用分隔符。分隔符仅由 MySQL 控制台使用，以便它可以判断您输入的触发器、存储过程等何时结束。在 JDBC 中，您将整个 SQL 字符串放在一起，然后将其发送到数据库。因为您可以控制 SQL 何时发送到数据库，所以无需使用分隔符。

我从您的代码中删除了这两`DELIMITER`行和分隔符的使用，并将命令分别发送到数据库。我留下的代码如下：`%%``DROP TRIGGER`

```
con.createStatement().execute("DROP TRIGGER IF EXISTS `insert_associated_inquiry`");

triggerBuilder.append(" CREATE TRIGGER insert_associated_inquiry BEFORE UPDATE ON inquiry ");
triggerBuilder.append(" FOR EACH ROW Begin ");    

triggerBuilder.append(" insert into associated_inquiries(inquiry_id , subject , content , inquiry_date , preferred_date ) " );
triggerBuilder.append("values");
        triggerBuilder.append(" ( " );
            triggerBuilder.append(" OLD.id , ");
            triggerBuilder.append(" OLD.subject , " );
            triggerBuilder.append(" OLD.content , " );
            triggerBuilder.append(" OLD.created_on , " );
            triggerBuilder.append(" OLD.preffered_date " );
        triggerBuilder.append(" ) ; ");

triggerBuilder.append(" END ");

con.createStatement().execute(triggerBuilder.toString()); 
```

这段代码似乎可以工作，因为无论触发器是否已经存在，我都可以毫无错误地运行这段代码。如果触发器以前不存在，则创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:00:06.593

原因是因为“分隔符”不是mysql标准的一部分，只需删除分隔符语句，您的代码就可以工作。

# html - 背景颜色和不同位置的内容

> ID：11899309
> 
> 赞同：0
> 
> 时间：2012-08-10T09:56:50.587
> 
> 标签：html, css, background-color

我有一个包含图像和一些文本的 div，并且有一个背景颜色。然而，当它在 chrome 和 firefox 上渲染时，背景颜色不在位置，div 内容在正确的位置，但它在 IE8 中工作正常，我只是无法理解可能导致这种情况的原因，它是一个皇家那里疼我告诉你...

```
<div style="width:800px;margin-left:auto;margin-right:auto;background-color:yellow;"> 
<div style="height:30px;">
</div>
<div style="width:400px;height:150px;">
<div style="float:left;padding:none;padding-top:40px;padding-left:30px;">
<img src="warning.jpg" style="float:left;"/>
</div>

<div style="width:300px;float:left;padding-left:10px;padding-right:10px;">
<h6 style="font-family:Palatino Linotype;font-size:12px;">
Do not give your personal information to anyone you have not met over the internet or     phone, or send money to anyone without verifying what you are paying for. lokalboard.com will not be responsible for any loss on third party transactions made between its users.
</h6>
</div>
</div>
</div> 
```

# xml - powershell 替换特殊字符

> ID：11899310
> 
> 赞同：0
> 
> 时间：2012-08-10T09:56:58.997
> 
> 标签：xml, powershell, replace, special-characters

我对 powershell 很陌生，但我正在尝试替换 .xml 文件中的某些字符。看起来我已经绊倒了第一步。

例如，我将尝试替换：

```
<?xml version="1.0"?> 
```

和

```
<?xml version="2.0"?> 
```

下面你会发现我到目前为止写的代码：

```
Get-Childitem "C:\Users\jp\Desktop\Test" | ForEach-Object {

        $Content = Get-Content $_.fullname
        $Content = ForEach-Object { $Content -replace "(<?xml version=`"1.0`"?>)","(<?xml version=`"2.0`"?>)" }

        Set-Content $_.fullname $Content -Force

        } 
```

问题是这只是我必须替换的字符串的开始。有没有办法独立于里面的字符替换一定范围内的任何文本？

我想知道无论我里面有什么特殊字符，如何替换一个完整的字符串。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:23:46.667

使用 Escape 方法在运行时转义特殊字符。您不需要转义替换模式：

```
(Get-Content c:\dump\xml) | 
ForEach-Object {$_ -replace [regex]::Escape('<?xml version="1.0"?>'),'<?xml version="2.0"?>'} | 
Set-Content c:\dump\xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:24:57.323

嗨，有很多方法可以进行正则表达式匹配，您只需将代码更改为以下代码即可。

\ 只是转义了特殊的正则表达式章程，以便匹配部分起作用。

```
Get-Childitem "c:\dump\xml" | ForEach-Object {

        $Content = Get-Content $_.fullname
        $Content = ForEach-Object { $Content -replace '(<\?xml version="1\.0"\?>)','<?xml version="2.0"?>' }

        Set-Content $_.fullname $Content -Force

        } 
```

# jquery - jQuery.each 两个键同时

> ID：11899311
> 
> 赞同：0
> 
> 时间：2012-08-10T09:56:59.467
> 
> 标签：jquery, foreach

我有这个数组：

```
row = [ "one", "two", "three", "four", "five", "six" ] 
```

我想用类似的东西进行迭代：

```
row.each(function(key, value){ doStuff(key); }); 
```

但我想在同一次迭代中抓住“一”和“二”，然后是“二”和“三”等。

这样，我想使用 jsPlumb 将每个关键元素相互连接，以创建一种元素的“火车”。

我可以手动询问`row[x+1]`每次（如果你知道我的意思），但我想知道是否有一个参数`.each`或自定义函数来实现这一点，所以我什至可以同时或更多地抓住 3 个键..

所以我可以做类似的事情：

```
row.eachTwo(function(key, value){ doStuff(key[0], key[1]); }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:02:28.777

如您所见[。](http://api.jquery.com/jQuery.each/)你不能用 function 做到这一点`.each`。最好的方法是自己实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:11:10.410

如果您对一次只处理两个值感到满意，我想您可能会滥用`reduce`Array 的方法：

```
​["one", "two", "three"].reduce(function(value1, value2) {
  doSomething(value1, value2);
  return value2;
});​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:20:47.097

您可以创建自己的`.eachTwo()`功能，

```
jQuery.fn.eachTwo = function(fn)
{
    var self = this;
    return this.each(function(key, el)
    {
        if (self.hasOwnProperty(key+1))
            fn.call(this,self[key],self[key+1],el)
    });
};

var row = [ "one", "two", "three", "four", "five", "six" ];

$(row).eachTwo(function(i,j){
    console.log(i+" "+j);
});​ 
```

[演示](http://jsfiddle.net/ocanal/wnvEF/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:21:23.007

所以我想我会这样做：

```
oldKey = "one";

row.each(function(key, value){

if (key == oldKey)
{
    console.error("SAME");
}
else
{
    jsPlumb.connect({
                    source: key, 
                    target: oldKey,
                    anchor:"Continuous",
            });
}
oldKey = key; 
}); 
```

只是我只需要用 捕获第一个重复项`key == oldKey`，但我正在寻找一种更简单、更优雅的方式，`.next()`看起来不错而且简单，但不适用于数组或简单对象。

# javascript - 如何防止 swf 重定向父 html？

> ID：11899314
> 
> 赞同：0
> 
> 时间：2012-08-10T09:57:05.583
> 
> 标签：javascript, html, flash

我在我的页面上展示了很多广告（swf 和图片）。但我有一个问题，一些 swf 上有一些重定向链接。因此，当有人点击它时，页面会重定向到 3rd 方 url 或类似的东西：/undefined。我想防止这种行为。这是我用来显示 swf 的代码

```
<embed pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" menu="false" wmode="opaque" quality="high" play="true" allowscriptaccess="never" allowNetworkAccess="never" style="width:500px;height:500px;" src="/name_of_swf.swf" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:46:17.573

我找到了这样做的方法......

使用下面的对象声明：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/
cabs/flash/swflash.cab#version=8,0,0,0" width="360" height="240"> 
```

并在嵌入代码中使用以下参数：

```
allowNetworking="none" 
```

希望这对其他人也有帮助....

# python - 使用 Python 编辑 RTF 文件

> ID：11899328
> 
> 赞同：3
> 
> 时间：2012-08-10T09:57:27.093
> 
> 标签：python, rtf, pyparsing

也许这是一个愚蠢的问题，但我不明白，所以道歉:)

我有一个 RTF 文档，我想更改它。例如，有一个表，我想复制一行并以面向对象的方式在我的代码中更改第二行中的文本。

我认为 pyparsing 应该是要走的路，但我摆弄了几个小时却不明白。我没有提供示例代码，因为我认为这都是无稽之谈：/

我是在正确的道路上还是有更好的方法？

以前有人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:14:33.630

RTF 是具有特殊“符号”的文本文档，用于创建格式。（请参阅 - [http://search.cpan.org/~sburke/RTF-Writer/lib/RTF/Cookbook.pod#RTF_Document_Structure](http://search.cpan.org/~sburke/RTF-Writer/lib/RTF/Cookbook.pod#RTF_Document_Structure)似乎 perl 有一个很好的 RTF 库），所以是的，PyParsing 是一个很好的方法去。您必须学习结构然后解析（我提到的页面中有 perl 代码示例。如果幸运的话，您可以通过一些努力将它们翻译成 python）

有一个可用于 python 的基本 RTF 模块。检查 - [http://pyrtf.sourceforge.net/](http://pyrtf.sourceforge.net/)

希望对您有所帮助。

# java - Hibernate addScalar 到 Hibernate.FLOAT 舍入

> ID：11899329
> 
> 赞同：0
> 
> 时间：2012-08-10T09:57:30.347
> 
> 标签：java, mysql, hibernate, floating-point

```
Query qry = session.createSQLQuery(qrystr)
.addScalar("id", Hibernate.INTEGER)
.addScalar("balance",Hibernate.FLOAT);

    Object[] headerDetails=(Object[])qry.uniqueResult();
    session.close();
    System.out.println("balance"+headerDetails[1]); 
```

对于上述代码，当执行查询时，数据库中的值 66996956 返回为 6.6996956E7。

即使对于 DOUBLE，输出也是 6.6996956E7。但是当提供 math.BIG_DECIMAL 时，该值是正确的。为什么 double 和 float 有问题。在代码中，我可以引入 bigdecimal，因为其余数据是浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:05:52.347

66996956 和 6.6996956E7 是相同的值，显示不同。请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#toString%28float%29)以了解为什么以这种方式显示：

> 如果 m 小于 10^-3 或大于或等于 10^7，则它以所谓的“计算机科学记数法”表示。

如果您不介意浮点数和双精度数必然具有的精度损失（对于大值甚至更多），然后使用它们。如果您想要一个绝对精确的值，请使用 BigDecimal。

# timestamp - tcpdump 时间戳测量的延迟无故增加

> ID：11899330
> 
> 赞同：1
> 
> 时间：2012-08-10T09:57:34.317
> 
> 标签：timestamp, tcpdump

我通过在网关的入口和出口 NIC 中使用 tcpdump 捕获数据包来测量网关内数据包面临的延迟或延迟。我从源主机发送大约 800,000 个数据包到通过两个 GW 连接的目标主机（即源主机=>GW1=>GW2=>目标主机）。我通过从出口 NIC 上的时间戳减去入口 NIC 的时间戳来测量每个 GW 的延迟。我发现延迟从 2 到 3000 微秒不断增加。当我交换网卡时，延迟会增加一段时间，然后急剧减少并再次增加。

令人惊讶的是，即使 GW 上的延迟增加，当所有节点都有 1000Mbps NIC 时，端到端吞吐量仍然保持在 900Mbps 左右。

请让我知道延迟的这种变化是如何发生的？或者 tcpdump 时间戳是如何在出口网卡中延迟的？有没有办法让时间戳以纳秒为单位？

* * *

感谢您的回复。

基础设施的性能不是问题。在这里，我们通过吞吐量来衡量性能，发现即使 GW 上的延迟从 2 微秒增加到 3000 微秒，吞吐量也不会降低。

更多信息：我一直在测量 GW 扮演不同角色时的延迟，例如 IP 路由器、GRE 隧道点或 NAT。当它作为 IP 路由器工作时，GW 内的数据包所经历的延迟几乎 <=4 微秒。然而，当 GW 用作 GRE 隧道点时，延迟会在几秒钟内连续增加 1000 倍。这是我测量的问题。而且由于端到端吞吐量没有变化，我猜这个延迟不是真实的，它可能是由 tcpdump 的数据包捕获和时间戳功能引入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:43:34.483

我在这里可能想得太明显了，但我认为您所指的是[抖动](https://en.wikipedia.org/wiki/Jitter)和简单的[数据包延迟变化](https://en.wikipedia.org/wiki/Packet_delay_variation)，这是日常生活中的事实。

如今，为了节省 CPU 周期，网卡上有[TCP 卸载](https://en.wikipedia.org/wiki/TCP_offload_engine)，并且不同网卡的性能会有所不同，这可能会导致您切换时的差异。

鉴于您提到的微小时间差异，它是否会导致您的基础架构性能出现问题？

您还应该监视两个网关的性能，以查看延迟变化是否与网关上的负载增加相对应。

# twitter-bootstrap - 并排的两种形式

> ID：11899333
> 
> 赞同：6
> 
> 时间：2012-08-10T09:57:38.390
> 
> 标签：twitter-bootstrap

我开始使用 Twitter Bootstrap 并尝试并排放置两个表单。默认情况下，如果我在页面上放置两个表单，它们一个接一个地跟随，我应该应用什么属性来将这些表单并排放置，宽度为 50%。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T10:01:41.150

您可以使用[twitter bootstrap 的网格功能](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)。就像是：

```
<div class="row">
    <div class="span6">
        <form>[...]</form>
    </div>
    <div class="span6">
        <form>[...]</form>
    </div>
</div> 
```

编辑：

使用 Twitter Bootstrap 3.x

```
<div class="row">
    <div class="col-sm-6">
        <form>[...]</form>
    </div>
    <div class="col-sm-6">
        <form>[...]</form>
    </div>
</div> 
```

注意：在 col - **sm** -6 中，`sm`代表 small，这意味着该网格仅适用于视口大于`768px`（使用 TWBS 默认设置）的设备

# actionscript-3 - 使用 CRTMP 服务器流式传输本地 flv 文件时出现问题

> ID：11899334
> 
> 赞同：0
> 
> 时间：2012-08-10T09:57:38.543
> 
> 标签：actionscript-3, flash, apache-flex, streaming, rtmpd

有没有人遇到过通过 CRTMP 流式传输本地保存的 flv 的问题，比如我遇到的问题：

我在文件真正结束前 10-11 秒清空并刷新了缓冲区。

在文件真正结束前 10-11 秒，我还在 crtmp 日志文件中收到“完成流式传输”消息。

最后我无法找到我的文件，因为 hte 缓冲区是空的。

发生这种情况是因为 flv 文件配置不正确还是由于某些服务器错误？

# git - GIT GUI (Windows) - 从 Unstaged 移动到 Staged

> ID：11899337
> 
> 赞同：4
> 
> 时间：2012-08-10T09:57:52.773
> 
> 标签：git, user-interface

我有一个包含 10.000 个文件的项目，我想将其推送到存储库。但在推送之前，我必须将其从 Unstaged 列表移至 Staged。愚蠢的问题，我没有看到像“全部移动”这样的按钮，它不理解拖放，我只能一个接一个地移动文件？为什么以及如何解决这个奇怪的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-12T07:18:38.600

在 git-gui 中，有两种方法可以将所有文件从 Unstaged 移动到 Staged。

1) 按 Ctrl+I 将所有未暂存文件移动到暂存文件

2）单击“Signoff”和“Commit”上方底部面板中的“Stage Changed”按钮

![在此处输入图像描述](../Images/d67eac316ae753e3bf65adc9dc3ef4e8.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T10:26:32.260

你的意思是`git gui`？然后只需使用鼠标选择所有 unstages 文件：单击第一个，滚动到最后一个，按住 shift 键并单击最后一个文件。然后舞台。

然而，`git add -A`比gui魔法容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-10T07:02:51.023

选择某些文件的答案，例如一个一个，是单击Unstaged Changes 区域中文件名左侧的文件图标，然后将其移动到Staged Changes (Will Commit) 区域。

这是适用于问题标题的答案。答案不适用于提到约 10000 个文件的问题正文。但是，这可能是搜索并找到问题标题的人正在寻找的答案。

[![在此处输入图像描述](../Images/7a578e79a3230bf8880012f2bdf5f038.png)](https://i.stack.imgur.com/xLfj7.png)

# android - SQLite 中 API16 方法需要包装器

> ID：11899340
> 
> 赞同：0
> 
> 时间：2012-08-10T09:57:58.980
> 
> 标签：android, sqlite, wrapper

在 API16 中，Android 的 SQLiteDatabase 类中引入了新的 WAL（预写日志）。我想测试是否为 SQLite 数据库启用了 WAL。该应用程序也可以在较旧的 Android 版本上运行，因此我需要 SQLiteDatabase 中这些新函数的包装类。功能是：

*   公共布尔 isWriteAheadLoggingEnabled()
*   公共布尔 enableWriteAheadLogging()
*   公共无效禁用WriteAheadLogging（）

在[Android 开发者博客](http://android-developers.blogspot.de/2009/04/backward-compatibility-for-android.html)中，我确实找到了一篇关于包装新类的包装类的文章。我没有找到一个已经存在的类中新方法的包装器。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:11:24.760

for 的构造函数`SQLiteDatabase`是私有的，因此您将无法扩展它并将“包装器”添加到类本身。但是，您可以像这样编写一个“助手”包装器：

```
public class WALWrapper {
    private boolean mAvailable;
    private Method mIsWriteAheadLoggingEnabled;
    private Method mEnableWriteAheadLogging;
    private Method mDisableWriteAheadLogging;
    private final SQLiteDatabase mDb;

    public WALWrapper(SQLiteDatabase db) {
        mDb = db;
        mAvailable = false;
        try {
            mIsWriteAheadLoggingEnabled =
                    SQLiteDatabase.class.getMethod("isWriteAheadLoggingEnabled");
            mEnableWriteAheadLogging =
                    SQLiteDatabase.class.getMethod("enableWriteAheadLogging");
            mDisableWriteAheadLogging =
                    SQLiteDatabase.class.getMethod("disableWriteAheadLogging");
            mAvailable = true;
        } catch (NoSuchMethodException e) {
        }
    }

    /**
     * Returns <code>true</code> if the {@link #isWriteAheadLoggingEnabled()},
     * {@link #enableWriteAheadLogging()} and {@link #disableWriteAheadLogging()}
     * are available.
     * @return <code>true</code> if the WALWrapper is functional, <code>false</code>
     *  otherwise.
     */
    public boolean isWALAvailable() {
        return mAvailable;
    }

    public boolean isWriteAheadLoggingEnabled() {
        boolean result = false;
        if (mIsWriteAheadLoggingEnabled != null) {
            try {
                result = (Boolean) mIsWriteAheadLoggingEnabled.invoke(mDb);
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) {
            } catch (InvocationTargetException e) {
            }
        }
        return result;
    }

    public boolean enableWriteAheadLogging() {
        boolean result = false;
        if (mEnableWriteAheadLogging != null) {
            try {
                result = (Boolean) mEnableWriteAheadLogging.invoke(mDb);
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) {
            } catch (InvocationTargetException e) {
            }
        }
        return result;
    }

    public void disableWriteAheadLogging() {
        if (mDisableWriteAheadLogging != null) {
            try {
                mDisableWriteAheadLogging.invoke(mDb);
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) {
            } catch (InvocationTargetException e) {
            }
        }
    }
} 
```

# sql - SSIS 将日期时间列导入 SQL Server 2008

> ID：11899343
> 
> 赞同：8
> 
> 时间：2012-08-10T09:58:06.587
> 
> 标签：sql, ssis, dts

我正在尝试使用 SSIS 将 PSV 文件导入 SQL Server 2008。

除了一个包含`datatime`.

正在导入的文件的内容包含格式为的日期时间

```
2012-08-08T13:31:28.170 
```

PSV 文件的文件连接器设置是精确的数据库时间戳 [DT_DBTIMESTAMP2]

SQL Server 中的目标列具有`datetime`数据类型。

SQL 表的包/内容的结果是一个日期时间导入：

```
2012-08-08 00:00:00.000 
```

您会注意到分钟/秒尚未导入。

我必须使用错误的日期时间格式，但似乎尝试了所有组合都没有成功。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T19:38:51.577

## tl;博士

使用 DT_DBTIMESTAMP 作为您的类型并将 fastParse 设置为 true

## 设置

我创建了一个包含以下行的 CSV。由于 SQL Server 的日期时间精度仅为 0.003 毫秒，这将确保任何舍入问题都会浮出水面

```
2012-08-08T13:31:28.170
2012-08-08T13:31:28.171
2012-08-08T13:31:28.172
2012-08-08T13:31:28.173 
```

我创建了我的目标表

```
CREATE TABLE [dbo].[datetime2Demo]
(
    [EventDate] [datetime2](7) NOT NULL
,   [insert_date] [datetime2](7) NOT NULL DEFAULT(current_timestamp)
,   [string_type] [varchar](50) NULL
) ON [PRIMARY] 
```

然后，我创建了一个名为 dt_dbtimestamp 的连接管理器，并在 Advanced 下定义了一列，其名称`EventDate`和数据类型为`database timestamp [DT_DBTIMESTAMP]`

在我的数据流中，我添加了一个平面文件源并使用了上述连接管理器。

然后我右键单击平面文件源并选择`Show Advanced Editor`. 在“输入和输出属性”选项卡上，我展开了我的平面文件源输出控件并再次展开了输出列，然后选择了我的 EventDate。在自定义属性下，我将默认值`FastParse`从 False 更改为**True**

我有一个派生列，它添加了 string_type 值`(DT_STR,20,1252)"DT_DBTIMESTAMP"`，因此我可以跟踪哪些有效，哪些无效。

我使用了一个 OLE DB 目标并将其连接到我创建的表。

## 结果

从 dbo.datetime2Demo 中选择 EventDate、string_type

```
EventDate                      string_type
2012-08-08 13:31:28.0000000    DT_DBTIMESTAMP2
2012-08-08 13:31:28.0000000    DT_DBTIMESTAMP2
2012-08-08 13:31:28.0000000    DT_DBTIMESTAMP2
2012-08-08 13:31:28.0000000    DT_DBTIMESTAMP2
2012-08-08 13:31:28.0000000    DT_DATE
2012-08-08 13:31:28.0000000    DT_DATE
2012-08-08 13:31:28.0000000    DT_DATE
2012-08-08 13:31:28.0000000    DT_DATE
2012-08-08 00:00:00.0000000    DT_DBDATE
2012-08-08 00:00:00.0000000    DT_DBDATE
2012-08-08 00:00:00.0000000    DT_DBDATE
2012-08-08 00:00:00.0000000    DT_DBDATE
2012-08-10 13:31:28.0000000    DT_DBTIME2
2012-08-10 13:31:28.0000000    DT_DBTIME2
2012-08-10 13:31:28.0000000    DT_DBTIME2
2012-08-10 13:31:28.0000000    DT_DBTIME2
2012-08-08 13:31:28.1700000    DT_DBTIMESTAMP
2012-08-08 13:31:28.1710000    DT_DBTIMESTAMP
2012-08-08 13:31:28.1720000    DT_DBTIMESTAMP
2012-08-08 13:31:28.1730000    DT_DBTIMESTAMP 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T10:21:17.423

我曾经遇到过类似的情况，问题出在我的源头上，而不是在目的地上。

我建议您通过右键单击它来检查 SourceComponent 上的字段，选择显示高级编辑器 -> 输入和输出属性 -> 展开“输出列” -> 选择您的列并更改为适当的数据类型（通常 [DT_DBTIMESTAMP] 有效对我来说没问题）。同样为了测试，在“输出列”上做同样的事情

# python - 如何获取for循环的第一个对象

> ID：11899345
> 
> 赞同：1
> 
> 时间：2012-08-10T09:58:11.667
> 
> 标签：python, list, object, for-loop

我有一个 for 循环，如下所示：

```
for i,x in enumerate(urunler):
    if x['fiyat'] == eklenecek['fiyat'] and x['urunobegi'] == eklenecek['urunobegi']:
        print x['id'] 
```

它输出：

```
1
2
3
9 
```

如何选择此列表的第一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:02:39.417

最简单的方法是：

```
first_value = None
for i,x in enumerate(urunler):
    if x['fiyat'] == eklenecek['fiyat'] and x['urunobegi'] == eklenecek['urunobegi']:
        first_value = x['id']
        break 
```

它的设置是如果列表中没有项目满足条件，`first_value`将设置为`None`.

如果要选择最后一个：

```
last_value = None
for i,x in enumerate(urunler):
    if x['fiyat'] == eklenecek['fiyat'] and x['urunobegi'] == eklenecek['urunobegi']:
        last_value = x['id'] 
```

但是，更好的解决方案是将其转换为列表，以便您可以随意选择任何索引。这最好作为列表理解来完成：

```
lst = [x['id'] for x in urunler if x['fiyat'] == eklenecek['fiyat']
                       and x['urunobegi'] == eklenecek['urunobegi']]

# First element: lst[0]
# Last element: lst[-1] 
```

# linq - 在 LINQ 中选择多列

> ID：11899347
> 
> 赞同：3
> 
> 时间：2012-08-10T09:58:21.433
> 
> 标签：linq, asp.net-mvc-3, model-view-controller

我编写了如下所示的 LINQ 查询：

```
List<Actions> actions = resourceActions.Actions.Select(s => s.ActionName).ToList(); 
```

我如何在这里选择多个列？即我想添加列`s.ActionId`和`s.IsActive`. 我无法应用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T10:02:00.447

创建一个类来表示您想要的数据：

```
public class ResourceAction
{
   public int Id {get;set;}
   public string Name {get; set; }
} 
```

选择这些列表：

```
List<ResourceAction> actions = resourceActions.Actions
  .Select(s => new ResourceAction() { Id = s.Id, Name = s.ActionName}).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:03:05.717

我相信这就是你要找的。但是，您需要将输出更改为匿名类型。

```
var actions = resourceActions.Actions.Select(s => new { s.ActionName, s.ActionId, s.IsActive } ).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:03:30.323

您可以为此使用匿名类型，例如

```
var actions = resourceActions.Actions.Select(s => 
    new { Id = s.Id, Name = s.ActionName, Active = s.IsActive).ToList(); 
```

但更好的方法是创建一个类

```
public class ActionWithId
{
   public int Id { get; set; }
   public string Name { get; set; }
   public bool Active { get; set; }
}

List<ActionWithId> actions = resourceActions.Actions.Select(s => 
    new ActionWithId() { Id = s.Id, Name = s.ActionName, Active = s.IsActive }).ToList(); 
```

# node.js - 安装 twilio 模块的问题

> ID：11899348
> 
> 赞同：0
> 
> 时间：2012-08-10T09:58:23.987
> 
> 标签：node.js, npm

我正在尝试[为 nodejs 安装 twilio](https://www.twilio.com/docs/node/install)。这些行将出现在控制台中。

```
npm WARN twilio@0.4.0 package.json: 'modules' object is deprecated
twilio@0.4.0 ./node_modules/twilio 
```

如何摆脱这个？

我正在使用`npm install twilio`命令。

我试图下载并复制到 node_modules 文件夹中，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:00:53.347

对此有一个[开放的错误报告](https://github.com/sjwalter/node-twilio/issues/17)，但似乎并没有引起太多关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:07:34.253

这与 package.json 文件有关，该文件是用于 npm 包管理系统的特殊格式文件。某些值是必需的，其中一些键名多年来发生了变化，有些刚刚被删除。您收到的错误是由于 package.json 文件仍在使用 modules 键：

```
},
"modules": {
    "client": "./lib/twilio",
    "twiml": "./lib/twiml"
}, 
```

[https://github.com/sjwalter/node-twilio/blob/master/package.json#L13](https://github.com/sjwalter/node-twilio/blob/master/package.json#L13)

即使您收到此错误，它也不应该影响您对模块的使用。它仍然已安装，一切都应该正常工作。

# vb.net - 重新安装的 Windows 失去了对 mshtml.dll 的访问权限

> ID：11899349
> 
> 赞同：0
> 
> 时间：2012-08-10T09:58:28.827
> 
> 标签：vb.net, mshtml

由于磁盘崩溃，我不得不重新安装 Windows 7 (x64)。当我重新打开我正在处理的项目并尝试编译它时，我收到以下错误：

找不到程序集“Microsoft.mshtml.dll”的源文件“C:\Program Files\Microsoft.NET\Primary Interop Assemblies\Microsoft.mshtml.dll”

我看了看，我的机器上当然没有那个名字的目录。我找到了这个线程

[如何在 .NET 中添加对 mshtml 版本 9 的引用](https://stackoverflow.com/questions/9533824/how-to-add-a-reference-to-mshtml-version-9-in-net)

但我不确定它是否适用。我找不到使用“where tlbimp.exe”的任何东西。我有一个从故障磁盘中恢复的 mshtml.dll 的备份。我可以复制它并使用它吗？我需要注册吗？另外，如果我没有它，我在这台机器上做了什么不同 - 我以后会遇到更多/其他问题吗？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:45:55.360

我刚遇到这个问题，是从windows 32切换到windows 64造成的，因为dll文件的路径不同。要修复，只需删除引用并重新添加它，它就会进入正确的路径。无论如何为我工作:-)

克里斯P。

# extjs - 在 extjs 中过滤网格数据

> ID：11899350
> 
> 赞同：1
> 
> 时间：2012-08-10T09:58:29.270
> 
> 标签：extjs, filter, grid

我想在 extjs 中使用复选框来过滤网格。这是我的复选框

```
xtype: 'checkboxfield',
id: 'cb1',
boxLabel: 'Online',
checked: true,
handler: function (field, value) { }

xtype: 'checkboxfield',
id: 'cb2',
boxLabel: 'offline',
checked: true,
handler: function (field, value) { } 
```

我想要的是，当我选择它时，它将过滤我的商店。它应该告诉商店显示在线记录和/或离线记录。

我读了一些关于布尔过滤器的东西，所以也许这可以用，但我不知道怎么用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:20:52.430

在处理程序上使用商店的过滤器方法，例如

```
handler: function (field, value) { 
    store.filter('online', value);
} 
```

# c# - WebMatrix 内部搜索引擎

> ID：11899353
> 
> 赞同：1
> 
> 时间：2012-08-10T09:58:48.480
> 
> 标签：c#, webmatrix

我写了一个搜索数据库的代码，但我不知道为什么当我搜索一些特定的关键字时，它会显示其他不相关的链接。这是代码和结果。

```
Page.Title = "Catalog Search";
var db = Database.Open("Shopping");
var searchWords = Request["searchTerm"].Split(' ');
IEnumerable<dynamic> result = Enumerable.Empty<string>();
var sqlSelect = "SELECT ProductId, ProductTitle FROM Products WHERE " +
"ProductTitle LIKE @0";
foreach(var word in searchWords)
{
result = result.Concat(db.Query(sqlSelect, "%" + word + "%").ToList());
} 
```

所以我搜索了“Samsung LCD”，结果如下。

```
Samsung - 15" Series 9 Ultrabook Laptop
Samsung - Galaxy Tab 2 7.0
Samsung - 32" Class - LCD
Samsung - 32" Class - LCD 
```

我已经看到了一个正是我想要的 php 代码，但不幸的是我不知道如何转换它。这是php代码。

```
$searchTerms = explode(' ', $bucketsearch);
$searchTermBits = array();
foreach ($searchTerms as $term) {
    $term = trim($term);
    if (!empty($term)) {
        $searchTermBits[] = "bucketname LIKE '%$term%'";
    }
}

...

$result = mysql_query("SELECT * FROM buckets WHERE ".implode(' AND ', $searchTermBits)."); 
```

以及 php 搜索代码的结果。

```
SELECT * FROM buckets WHERE bucketname LIKE '%apple%' AND bucketname LIKE '%and%' AND bucketname LIKE '%pear%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:13:32.427

我冒昧地添加了一些空检查等，但 C# 的代码看起来很像这样：

```
// make sure search terms are passed in, and remove blank entries
var searchTerms = Request["searchTerms"] == null ? 
                    new string[] {} : 
                    Request["searchTerms"].Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries);

// build the list of query items using parameterization
var searchTermBits = new List<string>();
for (var i=0; i<searchTerms.Length; i++) {
    searchTermBits.Add("bucketname LIKE @" + i);
}

// create your sql command using a join over the array
var query = "SELECT * FROM buckets";
if (searchTerms.Length > 0) {
  query += " WHERE " + string.Join(" AND ", searchTermBits);  
} 

// ask the database using a lambda to add the %
var db = Database.Open("StarterSite");
var results = db.Query(query, searchTerms.Select(x => "%" + x + "%").ToArray());

// enjoy!
Response.Write(results.Count()); 
```

如果您遇到更多麻烦，请告诉我！

# objective-c - 加载新视图objective-C时不出现自定义单元格

> ID：11899355
> 
> 赞同：0
> 
> 时间：2012-08-10T09:59:02.180
> 
> 标签：objective-c, ios, uitableview, storyboard

我以编程方式创建了一个 UITableView，其中包含连接到情节提要中其他视图的不同单元格和部分

**但是，如果您检查故事板缺席视图具有带有复选框部分的自定义单元格，则它不会出现在此处**

**我的问题是：**

**为什么它不显示自定义单元格？，你能帮我吗？**

提前致谢！

这是我的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString: @"WorkTime"]){

    [segue.destinationViewController setTitle:@"WorkTime"];
}if([segue.identifier isEqualToString: @"Absence"]){
    [segue.destinationViewController setTitle:@"Absence"];
}if([segue.identifier isEqualToString: @"Compensation"]){
    [segue.destinationViewController setTitle:@"Compensation"];
}
}

- (void)viewDidLoad
{
[super viewDidLoad];
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

NSString *workKey = @"work";
NSString *absKey = @"absence";
NSString *comKey = @"compensation";

[contents setObject:[NSArray arrayWithObjects:@"Work Time", nil] forKey:workKey];
[contents setObject:[NSArray arrayWithObjects:@"Absence", nil] forKey:absKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", nil] forKey:comKey];

[keys addObject:workKey];
[keys addObject:absKey];
[keys addObject:comKey];

[self setSectionKeys:keys];
[self setSectionContents:contents];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:CellIdentifier];
}

[[cell textLabel] setText:contentForThisRow];
return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedIndex = indexPath.row;
[self.tableView reloadData];

//case1
[self performSegueWithIdentifier:@"WorkTime" sender:self];
//case2
[self performSegueWithIdentifier:@"Absence" sender:self];
//case3
[self performSegueWithIdentifier:@"Compensation" sender:self];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:06:14.920

我认为你的问题在这里

```
static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

您的自定义单元格应具有唯一的单元格标识符。您需要将该唯一单元格标识符传递给`-dequeueReusableCellWithIdentifier:`.

你用什么作为你的手机标识符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:34:32.853

你应该使用 NSLOG 来确保你要去不同的视图，我认为你总是在同一个视图中是你看不到新变化的原因

# java - ZeroC Ice 对类的引用

> ID：11899356
> 
> 赞同：1
> 
> 时间：2012-08-10T09:59:05.263
> 
> 标签：java, slice, ice

我有以下两个课程：

```
class RedirectInfo{

    ["java:getset"]string originalRetUrl;

    ["java:getset"]string proposalRetUrl;

    ["java:getset"]string comment;
}; 
```

和

```
class ResultTO extends ::http::ResponseTO {

    ["java:getset"]common::StringList pagingLinks;

    ["java:getset"]RedirectInfo ri;
}; 
```

当`RedirectInfo`不为空时，我得到以下异常：

> 例外是“ice.UnmarshalOutOfBoundsException”

# android - Android Account Manager - 获取令牌秘密

> ID：11899360
> 
> 赞同：0
> 
> 时间：2012-08-10T09:59:19.607
> 
> 标签：android, oauth, gmail-imap

据我了解，要使用 XOAUTH 身份验证访问 gmail API，如果您希望使用 3-legged-authentication ，则需要您拥有[令牌和令牌密码。](https://developers.google.com/google-apps/gmail/oauth_protocol)

我可以从客户经理那里获得令牌，`AccountManager.KEY_AUTHTOKEN`但我不确定如何获得令牌秘密。

```
accountManager.getAuthToken(account,  "oauth2:https://mail.google.com/", null, MainActivity.this,
new AccountManagerCallback<Bundle>() {

    @Override
    public void run(final AccountManagerFuture<Bundle> future) {
        try {

            final String token = future.getResult().getString(
                    AccountManager.KEY_AUTHTOKEN);

        } catch (final Exception e) {
            Log.e(TAG, e.getMessage(), e);
        }
    }
}, null); 
```

是否可以从客户经理处获取令牌密钥，或者我必须启动浏览器才能获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:22:27.753

根据我得出的研究结论，这是不可能的。

然而，克服这个问题的一个可能的解决方案是使用[Signpost oAuth](https://github.com/kaeppler/signpost)库，该库允许从浏览器返回请求令牌。

# sql-server-data-tools - 针对数据库项目中的数据测试存储过程

> ID：11899367
> 
> 赞同：1
> 
> 时间：2012-08-10T09:59:45.567
> 
> 标签：sql-server-data-tools

我在 VS2012 中使用 ssdt。我正在编写一个存储过程，现在我想针对一些数据测试这个 SP。如果不在实际 SQL Server 实例上创建此 SP，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:29:04.023

您是否有任何理由不想构建数据库？由于 SSDT 与 LocalDB 一起打包，因此无需使用完整的 SQL Server 实例即可完成此操作。按 F5 从您的数据库项目构建一个数据库，并将一些数据添加到生成的数据库中。

# image - CSS悬停图像最大宽度：100％不起作用

> ID：11899368
> 
> 赞同：0
> 
> 时间：2012-08-10T09:59:50.473
> 
> 标签：image, background, hover, css

我有两个大的 css 图像悬停......我希望图像是 max-width:100% （用于手机）。我可以使 div 的最大宽度为 100%，但它们内部的图像在逻辑上只是被 div 边缘切断。如何确保 div 中的图像（在本例中为背景图像）也具有 100% 的最大宽度？

演示：[http ://www.buzz-creative.nl/_test/index.html](http://www.buzz-creative.nl/_test/index.html)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:29:32.390

[http://jsfiddle.net/ZuX4p/](http://jsfiddle.net/ZuX4p/)

这使用 background-size: 100% 使背景图像填充 div，唯一的问题是你必须指定高度和宽度，因为 div 中没有内容所以它希望是 0px x 0px

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:20:13.990

尝试，`background-size:auto;`

链接[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

# javascript - AngularJS：在指令中将数据连接到模型

> ID：11899372
> 
> 赞同：0
> 
> 时间：2012-08-10T10:00:03.530
> 
> 标签：javascript, angularjs

我的意图是让一些数据显示在页面上，并将对它的任何更改反映在模型中。但是，数据需要在显示之前应用特定的操作，并保持与模型的连接。

例如，如果数据是一个 html 片段，我会将其包装在一个带有 contentEditable 属性的 DIV 中。但是，如果它是一组选项，我将把它包装在一个 UL 和 LI 中，每个都包含一个具有属性 contentEditable 的 SPAN。

在每种情况下，contentEditable 部分都应保持与模型的连接。

我正在研究 JSFiddle 以尝试取得一些进展（从项目是 html 片段的情况开始）并标记了我目前卡住的点 (2) 和 (3)。尝试去：

```
a) Get the watch function to notice a change to the content
b) Maintain the two way binding between the displayed editable content and the model 
```

我的小提琴在这里：http: [//jsfiddle.net/rAXmV/](http://jsfiddle.net/rAXmV/)

任何有关我如何解决此问题的建议将不胜感激。

## 编辑

我一直在研究使用 $compile 来生成输出结构，它看起来确实正在获取传入的相关数据。但是它仍然与模型断开连接：

[http://jsfiddle.net/xRQ7M/](http://jsfiddle.net/xRQ7M/)

## 编辑 2

经过更多的修改后，我对提供的 HTML 中的 contenteditable 区域有了一个有效的实现。它获取了焦点输出的变化，这是我能找到从处理的 html 中的 contenteditable 区域冒泡的唯一方法。

一个更永久的 JSFiddle 在这里：http: [//jsfiddle.net/donovanh/q6auY/](http://jsfiddle.net/donovanh/q6auY/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T00:04:55.630

您可以使用[ngModelController](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController)指令来修改模型中的数据并保持模型的数据绑定。

# vb6 - MDIForm用VB填充图形文件的语法是什么

> ID：11899381
> 
> 赞同：-4
> 
> 时间：2012-08-10T10:00:37.343
> 
> 标签：vb6

我在 Visual Basic 中工作。在 Visual Basic 中通过属性选项可以在 MDIForm 中填充图形文件。但我想通过编码来填充它。

我正在使用这种语法：

```
MDIForm.Picture = "D:\GraphicFoler\MyPic.jpg" 
```

但它不能正常工作。

请在这方面指导我，我会非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:19:59.957

使用`LoadPicture()`.

例子：`MDIForm.Picture = LoadPicture("D:\GraphicFoler\MyPic.jpg")`

如果您的图片位于您的应用程序（项目）所在的同一文件夹中，那么您可以像这样使用它：`MDIForm.Picture = LoadPicture(App.path & "\MyPic.jpg")`

# asp.net-mvc - 如何对数据库迁移进行单元测试？

> ID：11899382
> 
> 赞同：0
> 
> 时间：2012-08-10T10:00:46.627
> 
> 标签：asp.net-mvc, database, entity-framework, migration

我即将在 MVC .NET 中执行数据库迁移。我想知道如何对此进行单元测试。

例如，我想在这个[问题](https://stackoverflow.com/questions/11344309/data-migration-in-mvc3-using-ef-4-3)中应用迁移：Rename a db column。我怎么能对此进行单元测试？

* * *

*我的想法：*

1.  迁移所有现有迁移，除了我要测试的最新迁移
2.  将数据添加到上下文
3.  应用新迁移
4.  测试数据还在

如果我的想法有意义，知道如何将这些应用到 MVC .NET 中吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:34:25.963

用于集成测试。只是我粗略的想法。可能取决于您的环境 - 构建服务器、数据库服务器、部署制作，...

您必须始终与数据库具有相同（已知）的起点。您将手动创建它并将其提交到 VCS 并始终手动更新为`M`-1 ( `M`=migration)。或者只是假设所有迁移`M`-1 之前都工作过（因为它已经过测试）并使用 ie 自动创建它`migrate.exe`。然后您尝试执行您的步骤，然后测试，最好使用与 EF 不同的“通道”，数据在那里，列在那里等。在这里，通过良好的旧 ADO.NET 的纯 SQL 就足够了。因为它不需要多才多艺，您可以创建一些简单的帮助程序，这些帮助程序将使用众所周知的 Connection-Command-Reader 路径运行查询并将其作为原始数据返回，即简单`IEnumerable`（我自己做了，通过`dynamic`使超级简单。）。

我的建议是保持[简单，不要花哨和聪明](https://twitter.com/cincura_net/status/205152905286778880)。只是为了支持测试。

# javascript - 创建一个可重用的 javascript 函数

> ID：11899389
> 
> 赞同：0
> 
> 时间：2012-08-10T10:01:21.183
> 
> 标签：javascript, jquery

目前我正在使用下面的函数来执行一个简单的幻灯片......

```
function jeans(jean, links) {

$(links).hide();

$(jean).hover(

  function() {
        $(links).show('slow');
    },

  function() {
        $(links).hide('slow');
});} 
```

并在需要的地方调用它......

```
jeans('#red-jeans', '#red-jeans ul');
jeans('#blue-jeans', '#blue-jeans ul');
jeans('#yellow-jeans', '#yellow-jeans ul'); 
```

我希望能够通过在父级“#red-jeans”上附加一个类来执行此操作。

我正在尝试类似的东西

```
function jeans(selector) {

$(selector 'ul').hide();

$(selector).hover(

  function() {
        $(selector 'ul').show('slow');
    },

  function() {
        $(selector 'ul').hide('slow');
});} 
```

...但是我的语法很糟糕！

如果有人能指出我正确的方向，将不胜感激！

* * *

现在的问题是幻灯片在我上课的每个元素上运行。任何人都可以推荐一个只能在当前悬停时激活它的修改吗？我认为某处需要一个（这个）......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:03:42.613

这：

```
$(selector 'ul').hide(); 
```

应该

```
$('ul', selector).hide(); 
```

以及所有其他类似的地方。这样做是在里面寻找`ul`元素`selector`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:15:27.397

有几种方法可以以干净的方式实现这一目标：

```
$(selector).find('ul')
$(selector + ' ul')
$('ul', selector) 
```

都是等价的。

一般来说，如果您更频繁地使用选择器，我建议您缓存它们，因为`$()`在内部使用选择器调用可能会非常昂贵。这样你在重构时有更好的性能和更少的麻烦。
要使幻灯片依赖于您当前的悬停，请使用`$(this)`而不是通用的`selector`.

```
function(selector){

  var $element = $('ul', selector);

  $element.hide();

  $(selector).hover(
    function() {
        $(this).find('ul').show('slow');
      },
    function() {
        $(this).find('ul').hide('slow');
  });

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:27:21.677

已经回答，但这是做同样事情的好方法。您可以像这样创建自己的 jQuery 插件...

```
$.fn.jeans = function() {
    $(this).find("ul").hide();
    $(this).hover(
        function() {
            $(this).find("ul").show('slow');
        },
        function() {
            $(this).find("ul").hide('slow');
        }
    );
} 
```

您可以通过选择要应用它的元素并像使用常规 jQuery 函数一样使用它来调用它...

```
$("#red-jeans, #blue-jeans, #yellow-jeans").jeans(); 
```

仅供将来参考；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:08:51.487

只需附加字符串： `$(selector + ' ul').hide('slow');`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:09:25.843

您可以尝试`function`如下更新您的 JavaScript：

```
function jeans(selector) {

  // you will have to use 'find' and it wil only be for the first 'ul' as well
  $(selector).find('ul:first').hide();

  $(selector).hover(

    function() {
      $(selector).find('ul:first').show('slow');
    },

    function() {
      $(selector).find('ul:first').hide('slow');
  });
} 
```

然后这样称呼它...

```
jeans('#red-jeans');
jeans('#blue-jeans');
jeans('#yellow-jeans'); 
```

我希望这会有所帮助

# sql - 同时插入和更新

> ID：11899390
> 
> 赞同：0
> 
> 时间：2012-08-10T10:01:22.617
> 
> 标签：sql, oracle

要将相同的行插入到我使用的表中

```
Insert into table (select * from table where columnA = 'a' and columnB = 'b') 
```

我可以在一个 sql 中插入和更改 columnB = 'c' 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:06:08.323

是的，只需在选择中指定值：

```
insert into table (ColumnA, ColumnB)
select ColumnA, 'c'
from table
where columnA = 'a' and columnB = 'b' 
```

（如果您有更多列，只需将它们添加到列列表中，然后像 ColumnA 一样选择。）

# java - 在延迟加载获取器上同步

> ID：11899395
> 
> 赞同：2
> 
> 时间：2012-08-10T10:01:42.673
> 
> 标签：java, lazy-loading, synchronized

由于我没有发现涉及该主题的问题，我想我会分享我对以下场景的解决方案。答案可能很明显，但我走了很长一段路才找到答案。:) 我很感激对问题和答案以及其他解决方案的反馈。

**设想：**

假设您有一个多线程程序，并且想要为程序中的某些功能建立数据库连接（或其他一些共享对象），而程序的其他部分根本不需要它。不过，与数据库的连接应该只有一个。

同时，您想检测数据库连接丢失并尝试即时重新连接。

为了解决这个问题，您实现了一个延迟加载模式“getter”，它还在返回连接对象之前检查连接有效性。

您的代码可能如下所示：

```
public class Main {
  private DB _db;

  public static void main(String[] args) {
    new Main().start();
  }

  private void start() {
    // Program code goes here
    // You create several threads, some of which may call getDB() whenever they need DB access
  }

  public DB getDB() {
    if (_db == null) {
      _db = getDBConnection();
    } else if (!_db.isConnectionValid()) {
      /*
       * DB connection is not valid anymore. Let's close it and
       * try to get a new connection.
       */
      _db.close();
      _db = getDBConnection();
    }

    return _db;
  }

  private DB getDBConnection() {
    DB db;

    // Obtain a new connection...
    ...

    return db;
  }
} 
```

**问题**：

多个线程可能几乎同时尝试获取数据库连接。当某些类保持对它们的引用时，甚至有可能多个连接共存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:28:43.863

好吧，这是我的 2c：

首先，关于您用来进行同步的 Object 实例：如果您使用 _db 对象，从某种意义上说，您将无法获得您想要的东西。这里的想法是确保如果多个线程尝试“同时”创建一个 _db 实例（就 JDK 进程而言），一旦其中一个线程创建一个实例，其他线程应该立即意识到该实例存在并且不尝试创建另一个。现在，如果您在我们试图在线程之间同步的那个实例上同步代码块，即使该实例永远不会为空，您仍然会处于竞争状态，其中两个线程各自设法创建一个_db 的实例，并且由于该实例上的代码块是同步的，因此锁不会阻塞任何线程，因为确实有 2 个独立的锁。显然，最好同步整个方法。这相当于写

```
public DB getDB() {
        synchronized (this) {
            if (_db == null) {
                _db = getDBConnection();
            } else if (!_db.isConnectionValid()) {
                /*
                 * DB connection is not valid anymore. Let's close it and
                 * try to get a new connection.
                 */
                _db.close();
                _db = getDBConnection();
            }
            return _db;
        }
    } 
```

所有调用创建 _db 实例的方法的线程都将“争夺”同一个锁（Main 类的实例），因此您可以确定一旦一个线程获得该锁，其他线程将阻塞，直到该线程完成，然后，当轮到他们执行该方法时，if 检查将阻止他们创建 _db 对象的第二个实例。

现在，另一个问题是天气你真的希望跨多个线程拥有相同的 _db 实例。这个问题真的归结为天气 _db 是线程安全的，或者换句话说，它是无状态的吗？如果它是有状态的并且由多个线程共享，并且如果该状态没有防范多线程调用，您将得到奇怪的行为甚至错误。例如：JDBC Connection 对象不是线程安全的，因为它包含事务等事物的状态，如果多个线程同时访问同一个 JDBC Connection，这些状态可能会发生不可描述的变化。因此，建议在多线程环境中使用 JDBC 连接时使用某种程度的（对象实例）隔离。您要么为每个线程创建一个新的 JDBC Connection 实例，要么只创建一个，

另一个例子是 HasmMap 和 ConcurrentHashMap。在这里，如果你在多个线程中使用同一个 HashMap，你肯定会出错（例如，如果一个线程迭代 Map 条目，而另一个线程试图修改它，你会得到一个并发修改异常），或者如果没有错误，至少会出现一个巨大的错误性能瓶颈，因为 Map 会因为从多个线程发送多个写入而进行大量重新哈希处理。另一方面，ConcurrentHashMap 非常适合在多个线程之间共享一个实例。当多个线程同时写入时，您不会得到并发修改异常，并且 Map 的性能要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:09:37.837

> 多个线程可能几乎同时尝试获取数据库连接。当某些类保持对它们的引用时，甚至有可能多个连接共存。

在这种情况下，您需要一个池，因为您可以获得多个不同的实例。有许多可用的 DatabaseConnection 池，一些 JDBC 驱动程序有自己的。建议你使用JDBC驱动自带的或者使用C3P0之类的做数据库连接池。

更具体地说，您需要以另一个线程无法获得相同连接的方式建立连接（不仅仅是获取它）。一个简单的例子是使用队列。

```
private final Queue<DB> freeDBs = new ConcurrentLinkedQueue<>();

public DB acquireDB() {
    DB db = freeDBs.poll();
    if (db != null && db.isConnectionValid()) 
        return db;
    if (db != null)
        db.close();
    return getDBConnection();
}

public void release(DB db) {
    if (freeDBs.size() >= MAX_FREE_SIZE)
        db.close();
    else
        freeDBs.add(db);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:01:42.673

同步可用于避免同时创建多个连接。如果两个（或更多）线程几乎同时调用它，其中一个会阻塞（等待）直到另一个完成。这可以确保第二个线程获得第一个线程刚刚创建的连接，而不是建立另一个连接。

我首先尝试像这样在对象上同步：

```
public DB getDB() {
  synchronized (_db) {
    if (_db == null) {
      _db = getDBConnection();
    } else if (!_db.isConnectionValid()) {
      /*
       * DB connection is not valid anymore. Let's close it and
       * try to get a new connection.
       */
      _db.close();
      _db = getDBConnection();
    }
  }

  return _db;
} 
```

这里的问题是，这不适用于延迟加载。您无法同步`null`（您得到一个`NullPointerException`），但在第一次调用 . 时还没有对象`getDB()`。

解决方案是在整个方法上同步：

```
public synchronized DB getDB() {
  if (_db == null) {
    _db = getDBConnection();
  } else if (!_db.isConnectionValid()) {
    /*
     * DB connection is not valid anymore. Let's close it and
     * try to get a new connection.
     */
    _db.close();
    _db = getDBConnection();
  }

  return _db;
} 
```

此外，您需要确保没有其他方法访问私有字段`_db`或`getDBConnection()`直接调用。那将不再同步。

您的类不应保留对连接的引用，因为这会阻止对死连接对象进行垃圾收集。但也不建议过于频繁地调用 getter，因为每个 get 都可能发出查询以检查连接有效性（取决于驱动程序）。如果每个方法在执行期间都保留一个引用，这可能是可以的（除非它执行很长时间）。

# symfony - Symfony\Component\Locale\Stub\StubIntlDateFormatter::__construct() 方法的参数 $locale value 'en_IN' 行为未实现

> ID：11899396
> 
> 赞同：5
> 
> 时间：2012-08-10T10:01:42.940
> 
> 标签：symfony, translation, symfony-sonata

我收到了这个异常，它是已知问题之一，正如我建议的那样，我已经`php5-intl`通过 apt-get 安装并重新启动了我的**Nginx**服务器。

似乎什么都没有解决。

> 在渲染模板期间抛出异常
> （“Symfony\Component\Locale\Stub\StubIntlDateFormatter::__construct() 方法的参数 $locale value 'en_IN' 行为未实现。仅支持 'en' 语言环境。
> 
> 请安装 'intl' 扩展以获得完整的本地化功能。”）
> 在 SonataAdminBundle:CRUD:base_list_field.html.twig 第 4 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:43:31.083

伙计们重新审视这个问题，团队面临同样的问题，我们尝试安装`php5-intl`扩展并重新启动`nginx`& `php5-fpm`。

它没有用。但是我们重新启动了系统，问题就消失了。所以又多了一个奇怪的答案。但为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T13:41:05.273

我在使用自制软件的本地 OSX 设置中遇到了这个问题。

我已经安装了 intl，当我运行 php -v 时它出现了，所以我不明白问题出在哪里。

原来apache使用的php版本与cli使用的php版本不同。因此，在验证您的 intl 扩展是否已启用时，请务必检查 php -v 并通过浏览器运行 phpinfo()。

就我而言，我的 apache 的 httpd.conf 中的 LoadModule 指令已更改。我运行了**brew info php54**来获取正确的 LoadModule 以放入我的 httpd.conf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-31T12:22:08.780

这些是`intl`在 Mac OS X 上安装的简单步骤：

1.  `brew install icu4c`

2.  `sudo pecl install intl`

    **ICU 库**和头文件的路径是：`/usr/local/opt/icu4c/`

3.  编辑`/etc/php.ini`、查找和取消注释

    ```
    ;extension=intl.so 
    ```

    或添加

    ```
    extension=intl.so 
    ```

    到文件末尾。

4.  创建新页面并放置

    ```
    <?php phpinfo();?> 
    ```

    查看**Intl**是否安装成功。

# intellij-idea - IntelliJ：是否可以将包括所有表达式及其值的整个监视视图复制到剪贴板？

> ID：11899398
> 
> 赞同：0
> 
> 时间：2012-08-10T10:01:49.933
> 
> 标签：intellij-idea

当然，我想将监视窗口中某些表达式的值以及表达式定义本身发送给某人。首先想到的是能够复制整个监视窗口的内容。但是，我似乎无法做到这一点。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:01:00.983

`Ctrl`+`A`选择所有手表，`Ctrl`+`C`复制。

# git - gitolite 不允许访问主分支上的目录，但不允许访问用户分支上的目录

> ID：11899405
> 
> 赞同：6
> 
> 时间：2012-08-10T10:02:08.373
> 
> 标签：git, gitolite, gitlab

考虑以下回购：

回购/src/A/

回购/src/B/

是否可以通过只有 1 个 repo 来实施以下限制？

1.  在 master 分支上，允许完全访问维护者角色
2.  在 master 分支上，禁止访问 A，但允许 B 成为贡献者角色。
3.  在个人分支上，允许创建者完全访问 A 和 B。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:46:25.463

使用 Gitolite V3[或 'g3'](http://sitaramc.github.com/gitolite/g3why.html)及其[VREF](http://sitaramc.github.com/gitolite/vref.html)，应该可以实现这些限制。

但是您可以管理的访问权限仅适用于写访问权限。*如果用户可以克隆一个 repo，他/她将拥有对所有*
repo 的读取访问权限（如“ [gitolite：仅允许更改选定的文件](https://stackoverflow.com/questions/3204881/gitolite-allow-to-change-only-selelected-files/3205192#3205192)”中所述）。 如果你真的想限制读取权限，你可以试试[gitolite '](http://sitaramc.github.com/gitolite/non-core.html#partial-copy) ['](http://sitaramc.github.com/gitolite/non-core.html#partial-copy)。 *[`partial-copy`](http://sitaramc.github.com/gitolite/non-core.html#partial-copy)*

 *几点注意事项：

*   VREF 可用于[通过 dir/file name 限制推送](http://sitaramc.github.com/gitolite/vref.html#NAME)。
*   我在这里使用**[角色](http://sitaramc.github.com/gitolite/wild.html)**的概念，而不是用户组：您需要为所述用户[单独设置权限](http://sitaramc.github.com/gitolite/user.html#perms)。
*   个人分支在[这里描述](http://sitaramc.github.com/gitolite/special.html#pers)。

[访问规则](http://sitaramc.github.com/gitolite/rules.html)如下：

```
<permission> <zero or more refexes> = <one or more users/user groups> 
```

**`<zero or more refexes>`**意味着你的 can 结合了 refexes

这将给出类似（未测试）的东西：

```
repo REPO
        RW+  master                     =   MAINTAINER
        -    master         VREF/NAME/A =   CONTRIBUTOR
        RW   master         VREF/NAME/B =   CONTRIBUTOR
        RW   personal/USER/ VREF/NAME/A =   CREATOR
        RW   personal/USER/ VREF/NAME/B =   CREATOR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:45:11.663

```
repo REPO
    - master VREF/NAME/src/A = @contributors
    RW+ master = @maintainers @contributors
    RW+ personal/ = @creators 
```*

# eclipse - 如何使用 Eclipse API 查找“.project”文件中包含的项目引用？

> ID：11899410
> 
> 赞同：0
> 
> 时间：2012-08-10T10:02:23.833
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在 Eclipse 插件中，我有一个搜索项目引用的项目并将它们添加到类路径的功能。问题是：当项目引用更改时，我们必须更改类路径以删除不必要的依赖项。所以我使用了 IProject.GetReferencedProject() 方法来重新创建类路径的依赖关系，但是这个方法不仅返回了“.project”中包含的项目，还返回了“.classpath”中的项目。因此，即使在删除对项目的引用（“.project”已更新）之后，如果将依赖项添加到类路径中，则会重新创建项目的类路径条目，因为它出现在方法 GetReferencedProject 的结果中。我需要一种方法来搜索引用的项目“.project”而不是“.classpath”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:04:37.433

你有没有尝试过

```
IProject.getProjectDescription().getReferencedProjects() 
```

# socialengine - 社交引擎时间显示格式

> ID：11899415
> 
> 赞同：0
> 
> 时间：2012-08-10T10:02:43.227
> 
> 标签：socialengine

我正在开发 SE4 中的事件模块，并希望以某种特定格式显示时间/日期。这是我现在使用的代码，用于显示事件开始时间： `echo $this->locale()->toTime($event->starttime);`这段代码显示的输出`11.00`没问题，但我的问题是：如何格式化这个输出？

假设我需要输出`11:00`，有没有办法以这种方式格式化它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:09:00.193

尝试这个

```
$this->locale()->toTime($event->starttime,array('format'=>'h:m')) 
```

# php - 我想通过 url 在另一个页面上发送 url

> ID：11899416
> 
> 赞同：0
> 
> 时间：2012-08-10T10:02:46.313
> 
> 标签：php

我想发送 $c2=@'http://marvelconcepts.net/fb3/02.php?c='.$c.'&&'.'c1='.$c1; 在 02.php 上，当我得到 $C ON 02.php 时，它没有显示完整的网址

```
 <?php
$c='Flower';
$c1='http://aux.iconpedia.net/uploads/1337412470.png';
$c2=@'http://marvelconcepts.net/fb3/02.php?c='.$c.'&amp;&amp;'.'c1='.$c1;
?>
<a href='02.php?c=<?php echo $c; ?>&amp;c1=<?php echo $c1; ?>&amp;c2="<?php echo $c2; ?>"'>share</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:07:45.140

使用**urlencode**和**urldecode**。

参考

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

[http://www.php.net/manual/en/function.urldecode.php](http://www.php.net/manual/en/function.urldecode.php)

# jquery - jQuery - 当您需要等待所有数据时，循环调用 getJSON 的最佳方法？

> ID：11899417
> 
> 赞同：4
> 
> 时间：2012-08-10T10:02:48.557
> 
> 标签：jquery, ajax, asynchronous, getjson, synchronous

我有一种情况，我需要进行几次 getJSON 调用，一旦返回所有数据，就调用另一个函数，如下所示（例如代码简化）：

```
var data = {};
for (var i in a) {
    $.getJSON(base_url+i, function(d) {
        data[i] = d;
    });
}
do_something(data); 
```

显然这不起作用，因为我在 getJSON 调用返回任何数据之前调用 do_something。

我目前解决此问题的方法是同步进行调用，如下所示：

```
var data = {};
$.ajaxSetup({'async':false});
for (var i in funcs) {
    $.getJSON(base_url+i, function(d) {
        data[i] = d;
    });
}
$.ajaxSetup({'async':true});
do_something(data); 
```

我的问题是，有没有更好的方法来做到这一点，或者我最好像上面那样同步调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:25:26.017

根据 Felix Kling 发布的类似问题的链接，答案是使用[deferred objects](http://api.jquery.com/category/deferred-object/ "延迟对象")。

`i`然而，由于在`getJSON`成功函数中的使用，还有一个更复杂的问题。这将始终是最后一次迭代的值。有关更多详细信息，请参阅我的另一个问题： [jQuery Deferred - Variable scope in deferred getJSON success functions](https://stackoverflow.com/questions/11903649/jquery-deferred-variable-scope-in-deferred-getjson-success-functions)

完整解决方案：

```
var data = {};
var calls = [];
for (var i in funcs) {
    calls.push(
        $.getJSON(base_url+i,
            (function(i) {
                return function(d) {
                    data[i] = d;
                };
            }(i)) 
        )
    );
}
$.when.apply($,calls).then(function() {
    do_something(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:08:13.530

我最近开发的一个应用程序也遇到了同样的问题。

在这种情况下，处理数据并确保您的函数在您真正拥有它时正在执行的最佳选择是将函数放在 $.getJSON 调用中。

在您的情况下，它看起来像这样：

```
var data = {};
for (var i in funcs) {
    $.getJSON(base_url+funcs[i], function(d) {
        data[f] = d;
        do_something(data);
    });
} 
```

像这样，您将确保在处理数据时调用将完成，并且不会出现错误。

# jsctypes - js-ctypes char readString() 使 Mozilla 崩溃

> ID：11899421
> 
> 赞同：1
> 
> 时间：2012-08-10T10:03:11.087
> 
> 标签：jsctypes

我正在使用 js-sctypes 从 Firefox 连接到 Linux 中的共享库。我从库中声明一个函数，如下所示：

```
var read_memory = libc.declare("read_memory", ctypes.default_abi, ctypes.int,
                   ctypes.uint32_t, ctypes.char.ptr, ctypes.int, ctypes.int); 
```

在 C++ 库中，该函数声明如下：

```
read_memory(unsigned int address, char *buf, int unit_size, int unit_count) 
```

我`read_memory`通过以下方式调用该函数：

```
var my = new ctypes.char().address();
read_memory(0, my, 4, 1);
st = st + my.readString(); 
```

它工作正常，但是当我使用更大的函数调用函数时`unit_size`，`unit_count`例如`read_memory(0, my, 4, 10)`，Firefox 崩溃了。

是因为`ctypes.char`尺寸有限，还是有别的原因造成这个故障？对此问题的任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:29:26.397

我有同样的问题，问题是因为字符编码。在我的问题中，我需要将它们从 windows-1250 转换为 utf-8。

我使用了下面的代码：

```
result = myFunctionToInvoke();
var util = priv.Load("LibToConvert.dll");
var wi12502utf8 = util.declare("win12502utf8", ctypes.default_abi, ctypes.char.ptr, ctypes.char.ptr);
var val = wi12502utf8(result);
result = val.readString(); 
```

在这段代码中，我在 C++ 中创建了自己的库（LibToConvert.dll）来转换字符。

# sharepoint-2010 - Sharepoint 列表项验证

> ID：11899422
> 
> 赞同：0
> 
> 时间：2012-08-10T10:03:11.070
> 
> 标签：sharepoint-2010

我创建了 2 个列表：

1.  CarInfo(自定义列表)
2.  订车（日历表）

我创建了 和 之类`CarName`的列`CarNumber`。当我选择`CarName`,`CarNumber`时，它会自动出现，但是，我的要求是，当我选择`CarName`,`StartTime`和`EndTime`。例如：

假设`CarName`是 Car1 ，`StartTime`是下午 1:00 和下午`EndTime`2:00。另一个用户可以登录并添加相同的汽车和时间。如果另一个用户可以提供相同的东西，它不会允许这些字段。

在这里，我需要对这些列进行验证。谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:25:42.800

您可以做的是使用 VS2010 将 ItemAdding 事件处理程序写入列表定义。

[ItemAdding 事件处理程序](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)

在事件处理程序中，您必须遍历列表检查是否已经存在匹配项。您可以使用此代码获取即将添加的项目的值。

```
string jobTitle = properties.AfterProperties["Title"].ToString(); 
```

如果项目已存在则取消作业

```
properties.Cancel = true; 
```

使用此链接获得一个想法...

[在 Visual Studio 2010 中创建 SharePoint 2010 事件接收器](http://msdn.microsoft.com/en-us/library/gg252010.aspx)

# java - 在 Java 中按服务名称检查服务可用性？

> ID：11899426
> 
> 赞同：0
> 
> 时间：2012-08-10T10:03:37.950
> 
> 标签：java, sockets, networking, port

根据以下文章，我可以在 Java 中创建一个简单的套接字来检查服务的可用性。但是，需要一个端口号来检查服务。

[从 java 检查服务可用性](https://stackoverflow.com/questions/4652293/check-service-availability-from-java)

但是，如果我只有在 /etc/services 中定义的服务名称，我如何检查服务可用性？我必须首先通过服务名称获取端口号吗？参考以下问题：

[端口到Java中的服务名称？](https://stackoverflow.com/questions/3393012/port-to-service-name-in-java)

我期待一些更原生的方式让操作系统为我翻译服务名称，而不是我自己用 Java 翻译它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:13:38.847

如果您真的不想解析`/etc/services`，我担心您正在查看[getservbyname()的一些 JNI 或](http://linux.about.com/library/cmd/blcmdl3_getservbyname.htm)[JNA](https://github.com/twall/jna#readme)实现。

我可能会从解析服务文件开始，如果这还不够好，请查看本机实现。抽象/包装它，以便将一种解决方案换成另一种解决方案并不是那么痛苦。

# url - 如何在视图中获取路由 url 参数？

> ID：11899427
> 
> 赞同：1
> 
> 时间：2012-08-10T10:03:39.290
> 
> 标签：url, backbone.js, coffeescript, chaplinjs

我在 CoffeeScript 上使用 Backbone.js 和 Chaplin.js。我有一个挑战。如何在路由视图中获取 url 参数？

路线.咖啡：

```
define ->     
  'use strict'
  (match) ->  
    match "account/albums/:page", "accounts#albums"

define [                                                      
  'chaplin'                                                   
  'collections/albums'                                        
  'views/form_view'                                           
  'views/inline/album'                                        
  'text!template/account/_form_image.html'                    
  'text!template/account/list_albums.html'                    
], (chaplin,                                                  
  Albums,                                                   
  FormView,                                                 
  AlbumView,                                                
  formTemplate,                                             
  template                                                  
) ->                                                          
  'use strict'                                                

  class AccountAlbums extends chaplin.CollectionView          
    collection: new Albums                                    
    itemView: AlbumView                                       
    template: template                                        
    containerMethod: 'html'                                   
    listSelector: '[data-placeholder=albums-tile]'            

    # TODO: understand how to get router arguments in the view
    initialize: (options) ->                                  
      super                                                   
      @on 'addedToDOM', => @collection.fetch()                
      # Need to something like this.                          
      # But I do not know how to get it.                      
      #@collection.fetch                                      
      #  data:                                                
      #    page: page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:54:18.770

这是一个老问题，但为了完整起见，这里有一个答案：

您的路线正在将数据发送到`albums`控制器 ( `accounts`) 中的方法，该方法未在上面的代码中显示。该方法应如下所示：

```
 albums: (params, route, options) ->
    @collection = new Albums()
    @view = new AccountAlbums collection: @collection
    @collection.fetch
      data:
        page: params.page 
```

视图不应该打扰检索数据，控制器的工作是告诉集合获取数据。然后视图自动渲染它。

# matlab - 对符号正交矩阵进行原型制作的最简单方法

> ID：11899430
> 
> 赞同：1
> 
> 时间：2012-08-10T10:03:59.320
> 
> 标签：matlab, math, matrix, linear-algebra, symbolic-math

我有 8 个正弦和余弦，我尝试使用 Matlab 进行符号定义，如下所示。我的目标是使用所有这些正弦和余弦符号性地构建一个 8x8 的矩阵 H（累积的吉文斯旋转矩阵），并最终看到这个 H 正交投影矩阵的公式是什么。我可以在概念上使用下面的代码来做到这一点，`G7*G6*...*G0*I`其中 I 是标识 8x8，Gi 是对应于元素 (i:i+1,i:i+1) 的 Givens 旋转。

```
c_0 = sym('c_0');
c_1 = sym('c_1');
c_2 = sym('c_2');
c_3 = sym('c_3');
c_4 = sym('c_4');
c_5 = sym('c_5');
c_6 = sym('c_6');
c_7 = sym('c_7');

s_0 = sym('s_0');
s_1 = sym('s_1');
s_2 = sym('s_2');
s_3 = sym('s_3');
s_4 = sym('s_4');
s_5 = sym('s_5');
s_6 = sym('s_6');
s_7 = sym('s_7');

% create H orthogonal matrix using the sin and cos symbols
% filling in the first rotation
I=eye(9,9)
H = I;
H(1:2,1:2) = [c_0 -s_0; s_0 c_0]

% build the 2nd rotation and update H
G = I;
G(2:3,2:3) = [c_1 -s_1; s_1 c_1]
H = G*H

% build the 3rd rotation and update H
G = I;
G(3:4,3:4) = [c_2 -s_2; s_2 c_2]
H = G*H

% build the 4rth rotation and update H
G = I;
G(4:5,4:5) = [c_3 -s_3; s_3 c_3]
H = G*H

% build the 5th rotation and update H
G = I;
G(5:6,5:6) = [c_4 -s_4; s_4 c_4]
H = G*H

% build the 6th rotation and update H
G = I;
G(6:7,6:7) = [c_5 -s_5; s_5 c_5]
H = G*H

% build the 7th rotation and update H
G = I;
G(7:8,7:8) = [c_6 -s_6; s_6 c_6]
H = G*H

% build the 8th rotation and update H
G = I;
G(8:9,8:9) = [c_7 -s_7; s_7 c_7]
H = G*H 
```

代码失败并出现以下错误，无法找到解决方法：

```
The following error occurred converting from sym to double:
Error using mupadmex
Error in MuPAD command: DOUBLE cannot convert the input expression into a double array.
If the input expression contains a symbolic variable, use the VPA function instead.

Error in build_rotH_test (line 26)
H(1:2,1:2) = [c_0 -s_0; s_0 c_0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:41:44.443

我是这样解决的。注意我意识到我需要每次旋转的转置，这样我就可以构建和应用 H'*x 即`G7'*G6'*...*G0'*I`这就是为什么在解决方案中翻转了 sin 符号。

```
clear all;

% defining 0 and 1 as symbols too, solves the problem
sym_0 = sym('0');
sym_1 = sym('1');

c0 = sym('c0');
c1 = sym('c1');
c2 = sym('c2');
c3 = sym('c3');
c4 = sym('c4');
c5 = sym('c5');
c6 = sym('c6');
c7 = sym('c7');

s0 = sym('s0');
s1 = sym('s1');
s2 = sym('s2');
s3 = sym('s3');
s4 = sym('s4');
s5 = sym('s5');
s6 = sym('s6');
s7 = sym('s7');

% create H orthogonal matrix using the sin and cos symbols
% filling in the first rotation
I = repmat(sym_0,9,9);
for i=1:9
    I(i,i)=sym_1;
end
H = I
H(1:2,1:2) = [c0 s0; -s0 c0]

% build the 2nd rotation and update H
G = I;
G(2:3,2:3) = [c1 s1; -s1 c1]
H = G*H;

% build the 3rd rotation and update H
G = I;
G(3:4,3:4) = [c2 s2; -s2 c2]
H = G*H;

% build the 4rth rotation and update H
G = I;
G(4:5,4:5) = [c3 s3; -s3 c3]
H = G*H;

% build the 5th rotation and update H
G = I;
G(5:6,5:6) = [c4 s4; -s4 c4]
H = G*H;

% build the 6th rotation and update H
G = I;
G(6:7,6:7) = [c5 s5; -s5 c5]
H = G*H;

% build the 7th rotation and update H
G = I;
G(7:8,7:8) = [c6 s6; -s6 c6]
H = G*H;

% build the 8th rotation and update H
G = I;
G(8:9,8:9) = [c7 s7; -s7 c7]
H = G*H 
```

输出是：

```
H =

[ 1, 0, 0, 0, 0, 0, 0, 0, 0]
[ 0, 1, 0, 0, 0, 0, 0, 0, 0]
[ 0, 0, 1, 0, 0, 0, 0, 0, 0]
[ 0, 0, 0, 1, 0, 0, 0, 0, 0]
[ 0, 0, 0, 0, 1, 0, 0, 0, 0]
[ 0, 0, 0, 0, 0, 1, 0, 0, 0]
[ 0, 0, 0, 0, 0, 0, 1, 0, 0]
[ 0, 0, 0, 0, 0, 0, 0, 1, 0]
[ 0, 0, 0, 0, 0, 0, 0, 0, 1]

H =

[  c0, s0, 0, 0, 0, 0, 0, 0, 0]
[ -s0, c0, 0, 0, 0, 0, 0, 0, 0]
[   0,  0, 1, 0, 0, 0, 0, 0, 0]
[   0,  0, 0, 1, 0, 0, 0, 0, 0]
[   0,  0, 0, 0, 1, 0, 0, 0, 0]
[   0,  0, 0, 0, 0, 1, 0, 0, 0]
[   0,  0, 0, 0, 0, 0, 1, 0, 0]
[   0,  0, 0, 0, 0, 0, 0, 1, 0]
[   0,  0, 0, 0, 0, 0, 0, 0, 1]

G =

[ 1,   0,  0, 0, 0, 0, 0, 0, 0]
[ 0,  c1, s1, 0, 0, 0, 0, 0, 0]
[ 0, -s1, c1, 0, 0, 0, 0, 0, 0]
[ 0,   0,  0, 1, 0, 0, 0, 0, 0]
[ 0,   0,  0, 0, 1, 0, 0, 0, 0]
[ 0,   0,  0, 0, 0, 1, 0, 0, 0]
[ 0,   0,  0, 0, 0, 0, 1, 0, 0]
[ 0,   0,  0, 0, 0, 0, 0, 1, 0]
[ 0,   0,  0, 0, 0, 0, 0, 0, 1]

G =

[ 1, 0,   0,  0, 0, 0, 0, 0, 0]
[ 0, 1,   0,  0, 0, 0, 0, 0, 0]
[ 0, 0,  c2, s2, 0, 0, 0, 0, 0]
[ 0, 0, -s2, c2, 0, 0, 0, 0, 0]
[ 0, 0,   0,  0, 1, 0, 0, 0, 0]
[ 0, 0,   0,  0, 0, 1, 0, 0, 0]
[ 0, 0,   0,  0, 0, 0, 1, 0, 0]
[ 0, 0,   0,  0, 0, 0, 0, 1, 0]
[ 0, 0,   0,  0, 0, 0, 0, 0, 1]

G =

[ 1, 0, 0,   0,  0, 0, 0, 0, 0]
[ 0, 1, 0,   0,  0, 0, 0, 0, 0]
[ 0, 0, 1,   0,  0, 0, 0, 0, 0]
[ 0, 0, 0,  c3, s3, 0, 0, 0, 0]
[ 0, 0, 0, -s3, c3, 0, 0, 0, 0]
[ 0, 0, 0,   0,  0, 1, 0, 0, 0]
[ 0, 0, 0,   0,  0, 0, 1, 0, 0]
[ 0, 0, 0,   0,  0, 0, 0, 1, 0]
[ 0, 0, 0,   0,  0, 0, 0, 0, 1]

G =

[ 1, 0, 0, 0,   0,  0, 0, 0, 0]
[ 0, 1, 0, 0,   0,  0, 0, 0, 0]
[ 0, 0, 1, 0,   0,  0, 0, 0, 0]
[ 0, 0, 0, 1,   0,  0, 0, 0, 0]
[ 0, 0, 0, 0,  c4, s4, 0, 0, 0]
[ 0, 0, 0, 0, -s4, c4, 0, 0, 0]
[ 0, 0, 0, 0,   0,  0, 1, 0, 0]
[ 0, 0, 0, 0,   0,  0, 0, 1, 0]
[ 0, 0, 0, 0,   0,  0, 0, 0, 1]

G =

[ 1, 0, 0, 0, 0,   0,  0, 0, 0]
[ 0, 1, 0, 0, 0,   0,  0, 0, 0]
[ 0, 0, 1, 0, 0,   0,  0, 0, 0]
[ 0, 0, 0, 1, 0,   0,  0, 0, 0]
[ 0, 0, 0, 0, 1,   0,  0, 0, 0]
[ 0, 0, 0, 0, 0,  c5, s5, 0, 0]
[ 0, 0, 0, 0, 0, -s5, c5, 0, 0]
[ 0, 0, 0, 0, 0,   0,  0, 1, 0]
[ 0, 0, 0, 0, 0,   0,  0, 0, 1]

G =

[ 1, 0, 0, 0, 0, 0,   0,  0, 0]
[ 0, 1, 0, 0, 0, 0,   0,  0, 0]
[ 0, 0, 1, 0, 0, 0,   0,  0, 0]
[ 0, 0, 0, 1, 0, 0,   0,  0, 0]
[ 0, 0, 0, 0, 1, 0,   0,  0, 0]
[ 0, 0, 0, 0, 0, 1,   0,  0, 0]
[ 0, 0, 0, 0, 0, 0,  c6, s6, 0]
[ 0, 0, 0, 0, 0, 0, -s6, c6, 0]
[ 0, 0, 0, 0, 0, 0,   0,  0, 1]

G =

[ 1, 0, 0, 0, 0, 0, 0,   0,  0]
[ 0, 1, 0, 0, 0, 0, 0,   0,  0]
[ 0, 0, 1, 0, 0, 0, 0,   0,  0]
[ 0, 0, 0, 1, 0, 0, 0,   0,  0]
[ 0, 0, 0, 0, 1, 0, 0,   0,  0]
[ 0, 0, 0, 0, 0, 1, 0,   0,  0]
[ 0, 0, 0, 0, 0, 0, 1,   0,  0]
[ 0, 0, 0, 0, 0, 0, 0,  c7, s7]
[ 0, 0, 0, 0, 0, 0, 0, -s7, c7]

H =

[                       c0,                       s0,                     0,                  0,               0,            0,         0,      0,  0]
[                   -c1*s0,                    c0*c1,                    s1,                  0,               0,            0,         0,      0,  0]
[                 c2*s0*s1,                -c0*c2*s1,                 c1*c2,                 s2,               0,            0,         0,      0,  0]
[             -c3*s0*s1*s2,              c0*c3*s1*s2,             -c1*c3*s2,              c2*c3,              s3,            0,         0,      0,  0]
[           c4*s0*s1*s2*s3,          -c0*c4*s1*s2*s3,           c1*c4*s2*s3,          -c2*c4*s3,           c3*c4,           s4,         0,      0,  0]
[       -c5*s0*s1*s2*s3*s4,        c0*c5*s1*s2*s3*s4,       -c1*c5*s2*s3*s4,        c2*c5*s3*s4,       -c3*c5*s4,        c4*c5,        s5,      0,  0]
[     c6*s0*s1*s2*s3*s4*s5,    -c0*c6*s1*s2*s3*s4*s5,     c1*c6*s2*s3*s4*s5,    -c2*c6*s3*s4*s5,     c3*c6*s4*s5,    -c4*c6*s5,     c5*c6,     s6,  0]
[ -c7*s0*s1*s2*s3*s4*s5*s6,  c0*c7*s1*s2*s3*s4*s5*s6, -c1*c7*s2*s3*s4*s5*s6,  c2*c7*s3*s4*s5*s6, -c3*c7*s4*s5*s6,  c4*c7*s5*s6, -c5*c7*s6,  c6*c7, s7]
[  s0*s1*s2*s3*s4*s5*s6*s7, -c0*s1*s2*s3*s4*s5*s6*s7,  c1*s2*s3*s4*s5*s6*s7, -c2*s3*s4*s5*s6*s7,  c3*s4*s5*s6*s7, -c4*s5*s6*s7,  c5*s6*s7, -c6*s7, c7] 
```

# c# - 为什么我必须在 AutoMapper 中创建地图

> ID：11899440
> 
> 赞同：1
> 
> 时间：2012-08-10T10:04:43.313
> 
> 标签：c#, automapper

为什么我必须调用 .CreateMap 方法？

实际上很明显调用 .Map 方法具有相同的源/目标参数。

这是一个典型的案例“如果你不喜欢这个软件就不要使用它”

还是有一种更简单、不那么麻烦的方法来在我不知道的一行中进行映射？

```
Mapper.CreateMap<ReleaseViewModel, Release>();
Release release = (Release)Mapper.Map(releaseViewModel, typeof(ReleaseViewModel), typeof(Release)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:21:55.133

有一段时间我对同样的事情感到困惑，如果我只想用零配置映射对象 ab 怎么办？好吧，事实证明有一种方法：

```
Mapper.DynamicMap<MyType>(mySourceObject); 
```

Map 旨在用于始终明确定义源和目标之间的合同的情况。因此，本合同的遗漏违反了这一使用原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:07:59.353

我认为您可以将“CreateMap<>”视为使用自动映射器注册映射的方法。“Map()”实际上是在执行注册的映射。

“CreateMap<>”有额外的方法来细化你的映射，这本身就是将这两种方法分开的原因。将其视为“关注点分离”原则。

**一个衬垫包装纸**

```
public abstract class Mapper<TFrom, TTo>
{
    private void Configure()
    {
        Mapper.CreateMap<TFrom, TTo>();
    }

    public TTo Map(TFrom @from)
    {
        Configure();
        return Mapper.Map<TFrom, TTo>(@from);
    }

    public IEnumerable<TTo> Map(IEnumerable<TFrom> fromList)
    {
        return fromList == null
            ? null 
            : fromList.Select(Map).ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:18:18.313

这是一种将映射注册到 AutoMapper 的方法。此方法的一个优点是您可以调用

```
Mapper.AssertConfigurationIsValid(); 
```

检查映射是否有效。

为了更容易，您可以创建一个放置所有映射的位置（例如，对于 ASP.NET MVC，您可以将其放置在 Global.asax 的 ApplicationStart 中）

顺便说一句，对于您的 Map 方法，您还可以使用以下内容：

```
Release release = Mapper.Map<ReleaseViewModel,Release>(releaseViewModel); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:45:54.277

明白了... EmitMapper：一个单行但很难读到地狱;-)

```
Release release = ObjectMapperManager.DefaultInstance.GetMapper<ReleaseViewModel,Release>().Map(releaseViewModel); 
```

[http://emitmapper.codeplex.com/](http://emitmapper.codeplex.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:06:41.457

这就是为什么我更喜欢 Value Injector 进行简单的 1<->1 映射的原因。在这里阅读：http: [//valueinjecter.codeplex.com/](http://valueinjecter.codeplex.com/)

它很简单：

```
myObject.InjectFrom(anyOtherObject); 
```

并将隐式映射具有相同名称和类型的属性。

# android - 滚动视图和可扩展列表视图

> ID：11899441
> 
> 赞同：0
> 
> 时间：2012-08-10T10:04:46.033
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/d992064ddb69a2ca696f2a8bf0ca835e.png)

我正在那里的项目中工作，大约前五个视图静态视图和下面的视图我有可扩展列表（即 9:00-10:30）如果单击它我将打开插槽我可以默认滚动可扩展列表以查看插槽，但我的设备滚动空间非常小。因为我一直滚动整个布局，所以整个屏幕没有滚动。帮助任何人。我做了很多场景，但我没有得到这个。如果想滚动整个视图我应该怎么做。任何人都可以帮助解决这个问题。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:26:27.653

由于您的前 5 个视图是静态的，您可以使用`ListView` `addHeaderView`方法将所有静态视图添加到列表视图的顶部。看看[这个](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)addHeaderView。希望这可以帮助。

**编辑：**将标题视图添加到 ListView

```
LayoutInflater layoutInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View view = layoutInflater.inflate(R.layout.xml_file, null);
listview.addHeaderView(view);

listview.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:15:00.493

```
you take that time in spinner , so that you can see the entire view 
```

# windows - 如何在多核系统上完全预留一个核？

> ID：11899443
> 
> 赞同：3
> 
> 时间：2012-08-10T10:05:01.037
> 
> 标签：windows, multithreading, process

我想为我的应用程序保留一个核心。在我的搜索中，我可以找到*dwProcessAffinityMask*来限制我的进程在我想要的内核上运行。但这并不能阻止其他进程的线程也可以在“我的”核心上运行。

有没有办法禁止除我的进程/线程之外的任何（系统范围的）进程/线程使用特定的核心/处理器？

即使可以设置*SystemAffinityMask*，这也无济于事，因为这也会禁止我的进程/线程在该处理器/内核上执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T02:07:30.627

如果您的目标是确保您的流程及时运行，只需使用 SetPriorityClass 为您的流程设置高优先级（例如[HIGH_PRIORITY_CLASS](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686219%28v=vs.85%29.aspx) ） 。除非系统正在运行其他同等高优先级的工作（在典型机器上很少），否则您的工作将在准备好执行时立即运行。

# hibernate - Hibernate 一对一映射xml

> ID：11899444
> 
> 赞同：0
> 
> 时间：2012-08-10T10:05:04.890
> 
> 标签：hibernate, hibernate-mapping

我正在使用一些旧的休眠代码，需要更新和创建一对一的。

我有一张桌子

```
Table_1
PK table_1_id
FK table_2_id

Table_2
PK table_2_id 
```

我如何将这些映射到休眠 XML 文件中，以便关系是 unqiue.. 我已经尝试过

```
<many to one ... unique='true'> 
```

但这不起作用，因为它允许 table_1 中的两条记录引用 table_2 中的一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:15:03.940

这是正确的方法，如文档中[所述](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-unidirectional-121)。

Hibernate 永远不会阻止两条记录`table_1`引用同一行`table_2`。这就是您应该在数据库中`table_2_id`的 , 列上添加的唯一约束的作用。`table_1`

# jquery - XMLHttpRequest 异常 102

> ID：11899449
> 
> 赞同：0
> 
> 时间：2012-08-10T10:05:30.933
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova, bada

您好我有一个使用 XMLHttpRequest 获取数据的函数：

```
function responseData()
            {           
                console.log("Inside responseData function @@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
                url="http://myURL.asp";

                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', url, true);

                    xhr.onload = function(e)
                    {
                        if (this.status == 200)
                        {
                            console.log("#####################"+this.responseText);

                        }

                        else
                            {
                            console.log ("!!!!!!!!!!!!inside else");
                            }

                    };

                 xhr.send();
            } 
```

上述方法在 Android、blackberry 和 symbian 平台上完美运行。但是在 Bada 上我得到了异常 102。当它尝试执行行时发生异常`xhr.send();`。我在清单中添加了权限：

```
 <Privileges>
    <Privilege>
        <Name>LOCATION</Name>
    </Privilege>
    <Privilege>
        <Name>HTTP</Name>
    </Privilege>
    <Privilege>
        <Name>ADDRESSBOOK</Name>
    </Privilege>
    <Privilege>
        <Name>SYSTEM_SERVICE</Name>
    </Privilege>
    <Privilege>
        <Name>WEB_SERVICE</Name>
    </Privilege>
</Privileges> 
```

但仍然出现异常 102。我也在移动设备上检查过它，但同样的问题。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:56:16.507

好的，config.xml 小部件标记中存在一个愚蠢的错误，没有正确关闭。

# android - 如何在android中修改最后一次通话记录

> ID：11899450
> 
> 赞同：1
> 
> 时间：2012-08-10T10:05:32.987
> 
> 标签：android, call, android-contacts

我正在做一个安卓项目。请问如何修改上次通话记录（电话号码）。我正在使用传入广播接收器，所以我知道来电何时到达。需要一些建议。欣赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:54:29.973

您的问题似乎与[Delete call from call log after call end](https://stackoverflow.com/questions/5361429/delete-call-from-call-log-after-call-end)重复。

有一个内容提供程序可用于搜索某些呼叫并将其删除。看看我链接的问题。

# iphone - 无法推特图片

> ID：11899457
> 
> 赞同：0
> 
> 时间：2012-08-10T10:05:58.947
> 
> 标签：iphone, objective-c, ios, tweets

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    forTweet = TRUE;
    switch(buttonIndex)
    {
            case 0:
            {
                TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

                // Set the initial tweet text. See the framework for additional properties that can be set.
                NSMutableString * twitterString = [displayString mutableCopy];
                [twitterString appendString: @" #LoviOtvet"];

                [tweetViewController setInitialText: twitterString];

                UIImage * imageAnswer = [self getImageFromURL: [self strToUrlConverter]];
                UIImage * imageLogo = [[UIImage alloc] initWithContentsOfFile: @"image.png"];

                [tweetViewController addImage: [self mergeImage:imageAnswer withImage:imageLogo strength:1]];

                break;
            } 
```

我补充说。没有错误，但不工作。Facebook 和保存到设备工作。发推文不行。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:28:35.450

你的问题是这一行：

```
UIImage * imageLogo = [[UIImage alloc] initWithContentsOfFile: @"image.png"]; 
```

对于此方法，您需要提供文件路径，而不是名称。你有两个选择：

UIImage * imageLogo = [UIImage imageNamed:]

或（对于包中的文件）：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"];
UIImage * imageLogo = [[UIImage alloc] initWithContentsOfFile:path]; 
```

# python - 如何在 pydev 中启用事后调试？

> ID：11899461
> 
> 赞同：5
> 
> 时间：2012-08-10T10:06:20.957
> 
> 标签：python, debugging, pydev

每当我的程序引发未处理的异常时，我想让 pydev 进入交互式控制台模式，但我不知道该怎么做。就像它现在的行为一样，会报告异常并立即终止进程。

经过一番搜索，我发现了这个： [http://sourceforge.net/tracker/index.php?func=detail&aid=3029746&group_id=85796&atid=577332](http://sourceforge.net/tracker/index.php?func=detail&aid=3029746&group_id=85796&atid=577332) 建议使用 pydevd.set_pm_excepthook()

但是，当我添加

```
import pydevd
pydevd.set_pm_excepthook() 
```

对于我的代码，我得到一个例外：

```
This function is now replaced by GetGlobalDebugger().setExceptHook and is now controlled by the PyDev UI.')
DeprecationWarning: This function is now replaced by GetGlobalDebugger().setExceptHook and is now controlled by the PyDev UI. 
```

但：

```
GetGlobalDebugger().setExceptHook() 
```

似乎不起作用，全局命名空间中不存在 GetGlobalDebugger()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:57:20.723

实际上，您不需要以编程方式执行此操作...您可以转到 Debug 透视图 > Pydev 菜单 > Manage Exception Breakpoints

[![图形用户界面示例](../Images/111ecb96bc0f403a1237e7d54500ac6b.png)](https://i.stack.imgur.com/5acrq.png)

并选中“暂停未捕获的异常”。在大多数情况下，您会想要捕获各种异常（因此选择“全选”），但您也可以选择要单独管理的异常。

[![对话](../Images/1317e30fff296ae35ae94418bcf6f7fc.png)](https://i.stack.imgur.com/LCRzA.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:50:13.847

好的，过了一会儿我明白了，代码应该是：

```
import pydevd
pydevd.GetGlobalDebugger().setExceptHook(Exception, True, False) 
```

捕获任何未处理的异常。该方法可用于在程序崩溃时以其他方式进入调试模式，如setExceptHook**文档中所述：**

> 应该调用来设置要处理的异常以及是否应该在未捕获和捕获的异常上中断。
> 
> 可以接收参数以仅在某些异常情况下停止。
> 
> ```
>  E.g.:
>         set_pm_excepthook((IndexError, ValueError), True, True)
> 
>         or
> 
>         set_pm_excepthook(IndexError, True, False)
> 
>         if passed without a parameter, will break on any exception
> 
>     @param handle_exceptions: exception or tuple(exceptions)
>         The exceptions that should be handled.
> 
>     @param break_on_uncaught bool
>         Whether it should break on uncaught exceptions.
> 
>     @param break_on_caught: bool
>         Whether it should break on caught exceptions. 
> ```

我希望这会帮助其他想要在 Eclipse 中使用 pydev 调试器在引发异常后调试程序的人。

# java-me - J2ME 中用于播放 Youtube 视频的 Flv 解码器

> ID：11899462
> 
> 赞同：1
> 
> 时间：2012-08-10T10:06:25.187
> 
> 标签：java-me, youtube, rtsp, mmapi

我正在寻找使用 J2ME 播放 flv 文件。有没有可能这样做？有没有其他方法可以通过 J2ME 播放 youtube 视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:45:58.977

`v`从 youtube url 中提取参数，让我们调用它`VIDEO_ID`。

打开[http://gdata.youtube.com/feeds/mobile/videos/](http://gdata.youtube.com/feeds/mobile/videos/)`VIDEO_ID`。内容为xml格式。

解析 xml 以查找`media:content`标签。

[使用Manager.createPlayer(url)](http://java.sun.com/javame/reference/apis/jsr135/javax/microedition/media/Manager.html#createPlayer%28java.lang.String%29)打开`media:content`标签的 url 属性。协议是.`rtsp`

# c# - 删除列表视图中选定的文件中的一行文本

> ID：11899465
> 
> 赞同：0
> 
> 时间：2012-08-10T10:06:31.770
> 
> 标签：c#, winforms, file, listview

我有一个显示消息的列表视图 - 发件人、消息、时间是列。这些消息是从包含从串行端口读取的数据的文本文件中读取的，该数据稍后会被解析并显示在带有列的列表视图中。每个列表视图项目都有一个复选框，指示要删除的项目/消息。我遇到的问题是我无法将列表视图项与文本文件内容进行比较。这是代码-

```
 private void btn_delete_Click(object sender, EventArgs e)
    {
        try
        {
            string filedata = File.ReadAllText("C:\\message.txt");
            string replacedata="";
            DialogResult result1 = MessageBox.Show("Are you sure to delete?", "Confirm Delete", MessageBoxButtons.YesNo);

            if (result1.Equals(DialogResult.Yes))
            {
                for (int i = 0; i < lvwMessages.Items.Count; i++)
                {
                    if (lvwMessages.Items[i].Checked)
                    {

                        replacedata = filedata.Replace(lvwMessages.SelectedItems[0] + Environment.NewLine, "");
                        lvwMessages.Items[i].Remove();
                        i--;
                    }

                }
                File.WriteAllText("C:\\message.text",replacedata); 
```

**更新**：如果发件人的号码在我的联系人列表中，我的列表视图中作为发件人的第一列将被名称替换。所以我无法将完整的选定行与文件中的文本进行比较，因为文件中的那一行文本将包含数字而不是名称。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:31:32.590

您可以通过 File.ReadAllLines 从文本文件中读取所有行，它会给您一个数组 (http://msdn.microsoft.com/ru-ru/library/system.io.file.readalllines.aspx)。然后您可以从中删除单个条目，如下所示：

```
List<string> lines = File.ReadAllLines("C:\\message.txt").ToList();
foreach (ListViewItem selectedItem in lvwMessages.SelectedItems)
  if (lines.Contains(selectedItem.Text))
    lines.Remove(selectedItem.Text); 
```

你得到了例外，因为你的列表视图中没有任何选定的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:49:14.243

从其余列中提取数据并清空该行：

```
 DialogResult result1 = MessageBox.Show("Are you sure to delete?", "Confirm Delete", MessageBoxButtons.YesNo);
                if (result1.Equals(DialogResult.Yes))
                {
                    string re1 = "";
                    string re2 = "";
                    string replacedata = filedata;
                    for (int i = 0; i < lvwMessages.Items.Count; i++)
                    {
                        if (lvwMessages.Items[i].Checked)
                        {
                            re1 = lvwMessages.CheckedItems[0].SubItems[1].Text;
                            re2 = lvwMessages.CheckedItems[0].SubItems[2].Text;
                            replacedata = replacedata.Replace(re1 + re2, "");
                            lvwMessages.Items[i].Remove();
                            i--;
                        }
                    }
                    StreamWriter sw = new StreamWriter("C:\\message.txt");
                    sw.Write(replacedata);
                    sw.Close();

                } 
```

# c# - 使用 LINQ 创建子数组

> ID：11899466
> 
> 赞同：0
> 
> 时间：2012-08-10T10:06:40.977
> 
> 标签：c#

> **可能重复：使用 LINQ 将**
> [列表拆分为子列表 使用 LINQ](https://stackoverflow.com/questions/419019/split-list-into-sublists-with-linq)
> [将集合拆分为 n 个部分？](https://stackoverflow.com/questions/438188/split-a-collection-into-n-parts-with-linq)

我有一个这样的数组：

```
[1,2,4,5.....n] 
```

我想将它转换成这样的子数组：

```
[
   [1,2,3],
   [4,5,6],
   ...
] 
```

基本上我想将数组分组为**n 个**成员

是否有任何 LINQ 函数可以帮助我完成此任务？

我在想`GroupBy`或`SelectMany`但我还没有弄清楚该怎么做

请注意，我已经使用`foreach`语句执行此操作，但我想使用 LINQ 执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:12:36.153

```
 int[] ar = new int[] {1,2,3,4,5,6};
        var gr = ar
            .Select( (e, i) => new {e, p=i/3})
            .GroupBy( e => e.p )
            .Select( g => g
                .Select(e => e.e)
                .ToArray()
            )
            .ToArray(); 
```

# java - JDK 7 是否使用非连续堆？

> ID：11899468
> 
> 赞同：0
> 
> 时间：2012-08-10T10:06:48.837
> 
> 标签：java, java-7, jvm-hotspot, jrockit

我知道 JDK 7 应该是热点和 jrockit 之间的合并，并且不会有 jrockit 1.7。（来源：[https](https://blogs.oracle.com/henrik/entry/java_7_questions_answers) : //blogs.oracle.com/henrik/entry/java_7_questions_answers）我有一个项目需要 jrockit 的非连续堆特性以及一些 java 1.7 特性，所以由于 JDK 7 是一个合并，所以它支持非连续堆，因为我找不到这样说的官方文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T13:10:04.913

我假设您正在询问非连续堆，因为您正遭受内存碎片的困扰。很多时候，您的 32 位地址空间是碎片化的，但您的 64 位地址空间不是。这意味着，如果您的计算机有足够的内存，使用 64 位 JVM 将允许您找到 32 位 JVM 无法找到的连续内存。当 32 位 JVM 无法分配超过 2GB 的堆时，我个人使用 64 位 JVM 来分配超过 4GB 的堆。

尽管它看起来不像是任意非连续堆进入 JDK 7，但您可以尝试使用 G1 垃圾收集器。根据[http://www.oracle.com/technetwork/java/javase/tech/g1-intro-jsp-135488.html](http://www.oracle.com/technetwork/java/javase/tech/g1-intro-jsp-135488.html)：

> 堆被划分为一组大小相等的堆区域，每个区域都是连续的虚拟内存范围。

从理论上讲，这允许您使用非连续堆。唯一的限制是区域的大小必须相同。

根据[http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/G1GettingStarted/index.html#t6](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/G1GettingStarted/index.html#t6)您可以使用此命令行选项来控制区域大小：

> **-XX:G1HeapRegionSize=n**：在 G1 中，Java 堆被细分为大小一致的区域。这设置了各个细分的大小。此参数的默认值是根据堆大小以符合人体工程学的方式确定的。最小值为 1Mb，最大值为 32Mb。

我希望这有帮助。

# android - 果冻豆通知问题

> ID：11899471
> 
> 赞同：0
> 
> 时间：2012-08-10T10:06:57.323
> 
> 标签：android, notifications, android-4.2-jelly-bean

我在状态栏上显示了一个进度条，当状态栏展开时，进度条会闪烁。直到 Ics 相同的代码工作正常。现在在果冻豆中，我看到了这个问题。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-10T10:11:23.613

我认为您必须设置一些标志，例如

```
ProgressBar pb = new ProgressBar();
pb.setCancelable(false); 
```

只有当你点击那个可扩展的 pb 而不是取消它

# jquery - jquery datepicker range (mindate maxdate) 不工作

> ID：11899472
> 
> 赞同：5
> 
> 时间：2012-08-10T10:07:03.797
> 
> 标签：jquery, datepicker, range, maxdate, mindate

我正在尝试为表单上的 jquery datepicker 设置一个范围，但是当我打开表单时，它允许我选择任何日期。

```
 <input class="span2 datepicker" name="tw#local#changeRequest#DeliveryDate" type="text" id="dp1">

 <!-- jQuery -->
 <script type="text/javascript" src="<#=tw.system.model.findManagedFileByPath('jquery-1.7.2.min.js', TWManagedFile.Types.Web).url;#>"></script>

 <!-- Datepicker Script -->
 <script type="text/javascript" src="<#=tw.system.model.findManagedFileByPath('bootstrap-datepicker_new.js', TWManagedFile.Types.Web).url;#>"></script>

 <script type="text/javascript">
 $(document).ready(function(){

 $( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });

 });
 </script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T10:12:27.833

据我所知，应该这样做：

```
$("#datepicker").datepicker('option', {minDate: <some date>, maxDate: <some date>}); 
```

您缺少的是您应该使用“选项”设置它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T07:14:23.747

```
$('#datepicker').datepicker({
            maxDate: '0'}), 
```

用于`'0'`选择今天的最大日期

也可以参考[jQueryUI Api](http://api.jqueryui.com/datepicker/#option-maxDate)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:36:12.170

```
$('#datepicker').datepicker({
                maxDate: '+1m',
                minDate: '-20d',
                }); 
```

当 min 和 max date 是表达式时，它们应该是字符串并正确定义。[这](http://jqueryui.com/demos/datepicker/#option-maxDate) 是 jquery ui datepicker MaxDate 部分的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-28T10:22:24.973

还有一件事，您可能已经注意到了，但是您的选择器正在将 ID 搜索为“datepicker”。而您的日期选择器就是您的 CLASS。所以我认为你需要从“#datepicker”更改为“.datepicker”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-03T22:05:43.157

您也可以对此进行测试。

```
$('#datepicker1').datepicker({
  format: 'mm/dd/yyyy',
});

$('#datepicker1').on('change', function() {
  $('#datepicker2').datepicker({
    startDate: $('#datepicker1').val()
  })
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T12:27:10.720

如果您使用 angularjs $scope.today = new Date()，只需添加控制器

并在 html min-date="today"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T05:23:11.643

在实现 daterangepicker 时，每次我将 minDate 和 maxDate 都设置为日期时，我都会在日历中收到一个 NaN 值。尽管我分别对它们进行编码时工作，但它们在一起运行时会提示上述错误。我发现如果我添加 startDate & endDate，日历将不再显示 NaN。

```
<script>
        let first_date = "{{first_date}}";
        let last_date = "{{last_date}}";

        console.log(first_date);
        console.log(last_date);
        $('#picker').daterangepicker({
            opens: 'right',
            timePicker: true,
            timePicker24Hour: true,
            minDate: first_date,  // with only minDate & maxDate, NaN value in the calender 
            startDate: first_date,   // startDate & endDate highlights the date range and prints values in calender 
            endDate: last_date,
            maxDate: last_date,
            locale: {
                format: 'DD-MM-YYYY HH00'
            }
        }, function (start, end, label) {
            $('#start').text(start.format('DD-MM-YYYY HH00'))
            $('#end').text(end.format('DD-MM-YYYY HH00'))
        })
</script> 
```

为了简要介绍上下文，我正在使用 Flask 框架开发一个 Web 门户。{{first_date}} 是从另一个网页转移而来的 jinjja 语法。

要了解有关 daterangepicker.js 功能的更多信息，下面的链接将告诉您所有需要了解的信息。 [https://www.youtube.com/watch?v=f5QA8N4tQwg&ab_channel=CodeTube](https://www.youtube.com/watch?v=f5QA8N4tQwg&ab_channel=CodeTube)

# wpf - 在 xaml 中设置父控件属性

> ID：11899474
> 
> 赞同：1
> 
> 时间：2012-08-10T10:07:06.547
> 
> 标签：wpf, xaml, mvvm

我有一个自定义面板`ListView`。这些`ListView's`项目包含一个`GroupBox`. `GroupBox`包含`ListView`一个. 这个`ListView's`项目包含一个`GroupBox`等等。

上面的所有控件都有自定义模板和样式

Controls VisualTree 中有`ToggleButtons`最低节点。当这些按钮被选中时，我需要禁用除单击按钮之外的所有面板。

我想避免通过 viewModel 类中的父级进行事件链接。

我正在使用 mvvm 模式，如果可能的话，我想在 xaml 端解决它。

**编辑**：这是一个屏幕截图，Pick 按钮应该禁用面板

![在此处输入图像描述](../Images/ec1bf6eafb751359234d7fbd0e500fa0.png)

任何建议都受到热烈欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:09:09.903

您需要实现如下所示的相对源绑定。

```
IsEnabled="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}},Path=IsEnabled}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:11:47.190

Just have a read-only property in your ViewModel that is the negation of the property that your ToggleButton is bound to.

**ViewModel:**

```
private Boolean mSourceIsPicked;
public Boolean SourceIsPicked
{
    get { return mSourceIsPicked; }
    set 
    { 
        SetProperty("SourceIsPicked", ref mSourceIsPicked, value); 
        NotifyPropertyChanged("IsSourceChangeable");
    }
}

public Boolean IsSourceChangeable
{
    get { return ! this.SourceIsPicked; }
} 
```

Then, in your View, just bind the IsEnabled property of the other controls to that new property.

```
<ComboBox ItemsSource="{Binding SourceTypes}"
          IsEnabled={Binding IsSourceChangeable}" /> 
```

The advantage of binding to a property is that you can add/remove controls in your view and just bind to this property without changing additional XAML. You can also change the behavior of any control by *not* binding to this property.

If you really want a XAML-only solution, you can name each of the controls in the panel, and use a DataTrigger using TargetName on the "SourceIsPicked" property to disable the others:

```
<ComboBox x:Name="cboSourceTypes" ... />
<ComboBox x:Name="cboSourceNames" ... />
<ToggleButton>
    <ToggleButton.Style>
        <Style TargetType="{x:Type ToggleButton}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding SourceIsPicked}" Value="True">
                    <Setter TargetName="cboSourceTypes" 
                            Property="IsEnabled" 
                            Value="False" />
                    <Setter TargetName="cboSourceNames" 
                            Property="IsEnabled" 
                            Value="False" />
                </DataTrigger>
            </Style.Triggers>
         </Style>
    </ToggleButton.Style>
</ToggleButton> 
```

Note that this is all freehand, so you may need to adjust it a bit, but it gives you the idea.

# ios - 从 ActiveScript Flash 调用系统默认电子邮件客户端？

> ID：11899476
> 
> 赞同：2
> 
> 时间：2012-08-10T10:07:34.470
> 
> 标签：ios, actionscript-3, air

是否可以创建相当于 HTML 的 AS3 (Flash, AIR) 触发器：

```
<a href="mailto:example@blabla.pl?subject=message subject;body=message content" target="_blank" title="contakt">click to answer</a> 
```

并在 iOS 或 Android 中调用系统电子邮件客户端？

**如果可能的话：**
附件呢？文件位于用户文档目录 ( `File.documentsDirectory`) 中。

**如果不可能：**
您推荐什么用于 AS3 的 SMTP 库？我无法使用 SMTP Mailer 连接 587 端口上的服务器。我尝试修改`authenticate()`和`sendAttachedMail()`方法，使用来自服务器的请求数据，但我仍然无法建立连接。

PS对不起我的英语；]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:43:56.697

你需要`navigateToURL`

```
var u:URLRequest=new URLRequest("mailto:example@blabla.pl?subject=message subject;body=message content");
navigateToURL(u); 
```

或者，您可以使用基于 SMTPMailer 构建的我的[SMTP 库。](https://github.com/pranavh/SMTPMailer)

只需使用 SMTPTLSMailer 类。

# java - 向量列表中的内存泄漏 Java OutOfMemoryError

> ID：11899482
> 
> 赞同：2
> 
> 时间：2012-08-10T10:07:49.600
> 
> 标签：java, multithreading, memory, vector, memory-leaks

我正在运行具有 3 个线程的多线程应用程序：

*   主线程 - 存储对象的向量列表
*   AdderThread - 将对象添加到此向量列表
*   RemoverThread - 使用 vectorList.clear() 方法删除对象（同步）

应用程序运行良好，但几个小时后它给出了 OutOfMemoryError。

我生成了堆转储并使用 eclipse MAT 进行分析，它显示 vectorList 类占用了所有内存。

方法是否`clear`释放被单个对象占用的内存？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T10:20:53.837

如果您添加任务的速度比释放它们的速度快，您将收到 OutOfMemoryError，因为您的 Vector 将增长到您的内存限制。

我建议不要使用 Vector 作为工作队列，而是使用并发库中的 BlockingQueue。

例如

```
BlockingQueue<Work> queue = new ArrayBlockingQueue<>(MAX_TASKS_WAITING);

AdderThread calls queue.put(work); // blocks if the queue is full

RemoverThread call queue.take(); // blocks if there is nothing to do. 
```

事实上，使用 ExecutorService 会简单得多，因为它结合了工作队列和线程池。您将任务提交给执行者并由它处理。这避免了为 RemoverThread 编写任何代码的需要。

# javascript - 在asp.net中使用javascript设置图片控件的图片URL

> ID：11899485
> 
> 赞同：3
> 
> 时间：2012-08-10T10:07:55.340
> 
> 标签：javascript, image, imageurl

我有一个图像、文件上传和一个按钮控件。我想将图像从 FileUpload 控件获得的本地路径保存到服务器。我在 C# 中的 Button Click 上实现了这个功能。

现在我想设置实现服务器端代码的同一按钮的图像控件 OnClientClick 的图像 URL。

根据在 FileUpload 控件中选择的文件，图像 URL 每次都会延迟。任何人都可以帮助我了解如何使用 javascript 根据在文件上传控件中选择的文件设置图像 URL 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T10:18:27.207

首先，要明白 JavaScript 并不理解、关心甚至不知道 C# 及其花哨的“控件”。它只处理 HTML。时期。也就是说，您可以使用 JavaScript 的函数来设置标签（不是控件）[`setAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)的图像 URL 。`img`像这样：

```
document.getElementById('my-image').setAttribute('src', 'http://ecx.images-amazon.com/images/I/41%2BjAZ4dUGL._SS500_.jpg'); 
```

演示在这里：http: [//jsfiddle.net/je9Gx/](http://jsfiddle.net/je9Gx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:18:15.743

您可以使用此代码找到图像控件，其中`imgid`是图像控件的ID；

```
$("[id$='imgid']").attr("src",pathfromfileuploader);

//pathfromfileuploader=it is a variable which stores the path taken from file uploader; 
```

希望它会有所帮助:)

# c# - 我怎样才能从这个文本创建一个字符串？

> ID：11899488
> 
> 赞同：0
> 
> 时间：2012-08-10T10:07:59.303
> 
> 标签：c#, escaping

我有这段文字：

```
<span class="message-text"> 
```

我想将它添加到一个字符串中，例如： string s = 问题是消息文本已经在 "" 之间并且我希望所有这些都将是一个字符串。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:11:46.650

我认为这应该做

```
string myString = "<span class=\"message-text\">"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:12:52.593

不清楚你的意思，但我试试

首先添加`runat="server"`到您的跨度，并给它一个ID

```
<span runat="server" ID="mySpan"></span> 
```

然后在后面的代码中

```
string s = "message-text";

mySpan.Attributes.Add("class", s); 
```

html中的输出将是

```
<span runat="server" ID="mySpan" class="message-text"> 
```

或者你的意思是

```
string mySpan = "<span class=\"message-text\">"; 
```

或者

```
string mySpan = "<span class='message-text'>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:12:00.570

试试这个

```
string str = "<span class='message-text'>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:12:16.403

`\`通过或使用逐字字符串来屏蔽你的符号

`@""""; //"`

`"\""' //""`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:16:57.070

反斜杠，\ 用于转义双引号和许多其他字符...因此您可以将代码行编写为：

```
String str = "<span class=\"message-text\">" 
```

[在此处](http://en.wikipedia.org/wiki/Escape_character)阅读有关转义字符的更多信息

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T10:15:36.843

```
string l = "<span class=\"message-text\">"; 
```

有关详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/aa691090 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

# java - 带有实例的类枚举结构？

> ID：11899491
> 
> 赞同：1
> 
> 时间：2012-08-10T10:08:09.477
> 
> 标签：java, enums

我使用以下枚举类型：

```
enum Status {OK,TIMEOUT,EXCEPTION} 
```

但现在我想存储 Exception 到底是什么。不幸的是，您不能实例化枚举类型。使以下内容成为可能的最佳方法是什么？

```
switch(status)
{
 case(OK)        {System.out.println("Everything OK!");break;}
 case(TIMEOUT)   {System.out.println("Timeout :-(");break;}
 case(EXCEPTION) {System.out.println("We have an exception: "+status.exception);break;}
} 
```

**我的想法**

1.  单例类

    ```
    class Status
    {
     final Exception e;
     public final Status OK = new Status(null);
     public final Status TIMEOUT = new Status(null);
     public Status(Exception e) {this.e=e;}
    } 
    ```

然后我可以这样做：

```
 if(status==Status.OK) {System.out.println("Everything OK!");}
 else if(status==Status.TIMEOUT) {System.out.println("Timeout :-(");}
 else {System.out.println("We have an exception: "+status.exception);} 
```

2.几个类

```
class Status {}
class StatusOK extends Status {}
class StatusTimeout extends Status {}
class StatusException extends Status
{
 final Exception e;    
 public StatusException(Exception e) {this.e=e;}    
} 
```

然后我需要一堆“instanceOf”语句。

**PS：**好的，看来我解释得不够清楚。在我的程序中，我回答请求并存储这些请求的处理状态：

```
Map<Request,Status> request2Status; 
```

因此我不能使用像 Status.getMessage(exception); 这样的东西。因为在我的代码中的那个位置，我不知道它是哪个异常。这就是为什么我想将它保存*在*状态中。

**选择的解决方案**

```
private static class LearnStatus implements Serializable
    {               
        private static final long   serialVersionUID    = 1L;
        public static final LearnStatus OK = new LearnStatus(null);
        public static final LearnStatus TIMEOUT = new LearnStatus(null);
        public static final LearnStatus NO_TEMPLATE_FOUND = new LearnStatus(null);
        public static final LearnStatus QUERY_RESULT_EMPTY = new LearnStatus(null);
        public static final LearnStatus NO_QUERY_LEARNED = new LearnStatus(null);

        public final Exception exception;

        private LearnStatus(Exception exception) {this.exception = exception; }

        public static LearnStatus exceptionStatus(Exception cause)
        {
            if (cause == null) throw new NullPointerException();
            return new LearnStatus(cause);
        }

        @Override public String toString()
        {
            if(this==OK) {return "OK";}
            if(this==TIMEOUT) {return "timeout";}
            if(this==NO_TEMPLATE_FOUND) {return "no template found";}
            if(this==QUERY_RESULT_EMPTY) {return "query result empty";}
            if(this==NO_QUERY_LEARNED) {return "no query learned";}
            return "<summary>Exception: <details>"+exception.getLocalizedMessage()+"</details></summary>"; 
        }
    } 
```

**这方面的问题**

如果我在其中序列化一个对象，`Status.OK`则反序列化后将`if(status==Status.OK)`不再起作用。

**新解决方案**

我现在在类中包含了一个枚举类型。你怎么看待这件事？

```
private static class LearnStatus implements Serializable
    {
        public enum Type {OK, TIMEOUT, NO_TEMPLATE_FOUND,QUERY_RESULT_EMPTY,NO_QUERY_LEARNED,EXCEPTION}

        public final Type type;

        private static final long   serialVersionUID    = 1L;
        public static final LearnStatus OK = new LearnStatus(Type.OK,null);
        public static final LearnStatus TIMEOUT = new LearnStatus(Type.TIMEOUT,null);
        public static final LearnStatus NO_TEMPLATE_FOUND = new LearnStatus(Type.NO_TEMPLATE_FOUND,null);
        public static final LearnStatus QUERY_RESULT_EMPTY = new LearnStatus(Type.QUERY_RESULT_EMPTY,null);
        public static final LearnStatus NO_QUERY_LEARNED = new LearnStatus(Type.NO_QUERY_LEARNED,null);

        public final Exception exception;

        private LearnStatus(Type type, Exception exception) {this.type=type;this.exception = exception;}

        public static LearnStatus exceptionStatus(Exception cause)
        {
            if (cause == null) throw new NullPointerException();
            return new LearnStatus(Type.EXCEPTION,cause);
        }

        @Override public String toString()
        {
            switch(type)
            {
                case OK:                return "OK";
                case TIMEOUT:           return "timeout";
                case NO_TEMPLATE_FOUND: return "no template found";
                case QUERY_RESULT_EMPTY:return "query result empty";
                case NO_QUERY_LEARNED:  return "no query learned";
                case EXCEPTION:         return "<summary>Exception: <details>"+exception.getLocalizedMessage()+"</details></summary>";
                default: throw new RuntimeException("switch type not handled");
            }           
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:13:35.510

除非一切正常，否则我会使用异常。

像

```
 System.out.println("Everything OK!");
} catch(TimeoutException te) {
   System.out.println("Timeout :-(")
} catch(Exception e) {
   System.out.println("We have an exception: " + e);
} 
```

我认为没有必要使用`enum`when Exceptions 被设计为做这种事情。

* * *

在您和原始异常之间的层之上添加另一个层，您可以执行此操作。

```
interface Status {
   String getMessage();
}

enum Statuses implements Status {
   OK("Everything OK"), TIMEOUT("Timeout :-(");

   private final String message;
   private Statuses(String message) { this.message = message; }

   String getMessage() { return message; }
}

class ExceptionStatus implement Status {
   private final String message;
   String getMessage() { return "Exception: " + message; }
}

// to print the message
System.out.println(status.getMessage()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:17:33.910

有几种方法可以解决这个问题，但所有这些方法都取决于您不使用 Enums 或者您不专门使用它们。请记住，枚举基本上是一个只有定义明确的单例作为值的类。

对此的一种可能的重构是使用具有明确定义的单例而不是枚举的普通类：

```
class Status implements Serializable {
  // for serialization
  private enum InternalStatus {
    OK, TIMEOUT, EXCEPTION
  }
  public static final Status OK = new Status(null, InternalStatus.OK);
  public static final Status TIMEOUT = new Status(null, InternalStatus.TIMEOUT);

  private final Exception exception;
  private final InternalStatus internalStatus;

  private Status(Exception exception, InternalStatus internalStatus) {
    this.exception = exception;
    this.internalStatus = internalStatus;
  }

  public Exception getException() {
    return exception;
  }

  public static Status exceptionStatus(Exception cause) {
    if (cause == null) throw new NullPointerException();
    return new Status(cause, InternalStatus.EXCEPTION);
  }

  // deserialization logic handling OK and TIMEOUT being singletons
  private final Object readResolve() {
    switch (internalStatus) {
    case InternalStatus.OK:
      return OK;
    case InternalStatus.TIMEOUT:
      return TIMEOUT;
    default:
      return this;
    }
  }      
} 
```

您现在可以检查`status == Status.OK`和`status == Status.TIMEOUT`。如果您的状态变量既不是 OK 也不是 TIMEOUT，它一定是由异常引起的，您可以通过`getException`.

不利的一面是，您失去了`switch`功能，必须通过`if`.

# ruby-on-rails - 无法在 Rails 3.2.3 中批量分配受保护的属性

> ID：11899497
> 
> 赞同：3
> 
> 时间：2012-08-10T10:08:32.390
> 
> 标签：ruby-on-rails, activerecord

移民

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :password_digest

      t.timestamps
    end
  end
end 
```

模型

```
class User < ActiveRecord::Base
  attr_accessible :name, :password_digest
  validates :name, :presence => true, :uniqueness => true
  has_secure_password
end 
```

用户注册_form

```
.main_form
  = form_for @user do |f|

    %div
      = f.label :name
      = f.text_field :name, :size=>40

    %div
      = f.label :password, "Password"
      = f.password_field :password

    %div
      = f.label :password_confirmation, "Confirmation"
      = f.password_field :password_field

    %div
      = f.submit 'Create user' 
```

当我尝试注册新用户时，它会引发异常

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#create

Can't mass-assign protected attributes: password, password_field 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:11:11.390

您应该将这两个字段添加到您的`has_accessible`列表中。Rails 不仅保护数据库字段免于大量分配，还保护所有字段，如这些“虚拟”字段。

在用户模型中（而不是你的`attr_accesible`线）：

```
attr_accessible :name, :password_field, :password 
```

此外，`password_digest`在任何情况下都不应修改，即计算字段不是用户输入。

# java - 从方法返回对象数据类型

> ID：11899499
> 
> 赞同：1
> 
> 时间：2012-08-10T10:08:36.527
> 
> 标签：java, arrays

我有一些java书，我正在做练习。但现在我被困在与数组相关的练习上。我有以下练习：

> 创建一个 CollegeCourse 课程。该类包含课程 ID（例如，“CIS 210”）、学分（例如，3）和字母等级（例如，“A”）的字段。
> 
> 包括每个字段的 get() 和 set() 方法。创建一个 Student 类，其中包含一个 ID 号和一个由五个 CollegeCourse 对象组成的数组。为学生 ID 号创建一个 get() 和 set() 方法。还创建一个 get() 方法，该方法返回学生的 CollegeCourses 之一；该方法接受一个整数参数并返回该位置（0 到 4）的 CollegeCourse。接下来，创建一个 set() 方法来设置学生的 CollegeCourses 之一的值；该方法有两个参数——一个 CollegeCourse 和一个表示 CollegeCourse 位置的整数（0 到 4）。

我已经从学生班做了数据字段和 id 和 getter。但现在我对此有点困惑：

> 还创建一个 get() 方法，该方法返回学生的 CollegeCourses 之一；该方法接受一个整数参数并返回该位置（0 到 4）的 CollegeCourse。接下来，创建一个 set() 方法来设置学生的 CollegeCourses 之一的值；该方法有两个参数——一个 CollegeCourse 和一个表示 CollegeCourse 位置的整数（0 到 4）。

谁能指出我如何解决这个问题的正确方向。因为它是数组章节，我认为它必须通过数组来解决？任何帮助，将不胜感激。

编辑：好的，这是我的大学课程

公开课 CollegeCourse {

```
String courseID;
int creditHours;
char grade;

public void setCourseId(String id) {

    this.courseID = id;

}

public String getCourse() {

    return courseID;
}

public void setHours(int hours) {

    this.creditHours = hours;
}

public int getHours() {

    return creditHours;

}

public void setGrade(char grade) {

    this.grade = grade;

} 
```

}

这是我的学生班（我被困在这里）：

公共课学生{

```
int id;
CollegeCourse[] cc = new CollegeCourse[5];

public void setId(int id) {

    this.id = id;
}

public int getId() {

    return id;
}

public void setCollegeCourse(CollegeCourse course, int position) {

    // i'm stuck here

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:13:57.217

所以这本书要求你定义一些允许检索课程的方法，给定一个整数。

您可能会这样使用它（这些只是它们的使用方式，而不是方法的实际实现 - 我将把它留给您）：

```
CollegeCourse course = Student.get(1); 
```

并且 set 方法将像这样使用：

```
Student.set(1, new CollegeCourse("CIS 210", 3, "A")); 
```

这有帮助吗？如果您发布代码以查看您所在的位置，这将很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:14:49.400

基本上它要求您为数组的内容创建一个 getter/setter；

```
CollegeCourse[] courses...

...

public CollegeCourse getCourse(int index) {
    return courses[index];
}

public void setCourse(int index, CollegeCourse course) {
    courses[index] = course;
} 
```

# mysql - percona 工具 pt-trend 输出的含义？

> ID：11899503
> 
> 赞同：1
> 
> 时间：2012-08-10T10:08:47.850
> 
> 标签：mysql, percona

最近，我正在使用[percona-toolkit](http://www.percona.com/software/percona-toolkit)。工具之一是 pt-trend。它使用 like `pt-trend mysql-slow`，它的输出如下：

*   1344442759 1.000000 0.004988 0.004988 0.004988 0.004988
*   1344442763 2.000000 1.124892 0.000889 1.124003 0.562446
*   1344442764 133.000000 1.609606 0.000284 1.483041 0.012102

每列是什么意思？我找不到有关 percona 官方文档的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:18:32.797

来自pt趋势来源：

```
ts, cnt, sum, min, max, avg, stdev 
```

# javascript - 如何动态添加和删除网格的action列中的cls

> ID：11899507
> 
> 赞同：1
> 
> 时间：2012-08-10T10:08:55.390
> 
> 标签：javascript, extjs, extjs4.1

我想在网格中动态添加和删除操作列的 cls。

任何人都可以帮助我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:05:26.900

最简单的方法是实际上不使用 actioncolumn。使用普通列并渲染您想要的图像，然后为列单击提供处理程序，这是我的应用程序中实际用于单列的代码：

```
 {
                width: 25,
                renderer: function(value, metaData, record){
                    if(record.get("node_type") == "CONDITION")
                        return "<img src=\"magnifier.png\"/>";
                    return "";
                },
                listeners: {
                    click: function(grid, htmlRow, index, columnIndex, mouseEvent, record){
                                         //do something here
                    }
                }
            } 
```

# python - libstdc++.so.5：打开失败：通过 ssh 没有这样的文件或目录

> ID：11899509
> 
> 赞同：0
> 
> 时间：2012-08-10T10:09:05.650
> 
> 标签：python, shared-libraries, python-2.4

我正在尝试从 ssh 运行 plone 服务器，`./bin/instance start`但我收到了这个奇怪的错误`Python-2.4/bin/python: fatal: libstdc++.so.5: open failed: No such file or directory`。我试着做`export LD_LIBRARY_PATH=/usr/local/Python-2.4/bin/python`，它说`LD_LIBRARY_PATH=/usr/local/Python-2.4/bin/python: is not an identifier`。但是当我这样做时 `ls -rtl /usr/local/lib/libstdc++.so.5`，我可以看到它就`libstdc++.so.5.0.5`在那里。我正在使用`ssh secure shell`. `Windows XP`谁能建议我如何消除此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:52:48.517

我必须按如下方式设置 LD_LIBRARY_PATH

```
$ LD_LIBRARY_PATH=/usr/local/lib
$ export LD_LIBRARY_PATH 
```

我`libstdc`进去了`/usr/local/lib`，我不得不告诉系统在这里找到不可用的库！

# c - 堆栈实现输出

> ID：11899510
> 
> 赞同：0
> 
> 时间：2012-08-10T10:09:14.440
> 
> 标签：c

请帮助下面的部分。当 n 从堆栈顶部移除且堆栈为空时，输出应为“-1 popped”。（我得到 0 atm）

```
void pop(void) {
    struct node *temp;
    int n;
    if (top == NULL) {
        printf("%d popped\n", top);
        return;
    }
    n = top->item;
    temp = top;
    top = top->prev;
    free(temp);
    printf("%d popped\n", n);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:12:03.013

逻辑故障，您正在与零进行比较并希望输出 -1 !!!

```
 if (top == NULL) {
         printf("%d popped\n", top);    
     return;  
   } 
```

应该

```
 if (top == NULL) {
         printf("%d popped\n",-1);    
     return;  
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:12:08.307

因为 NULL 是空指针（即指向空的指针），通常值为 0。

换行就好

```
printf("%d popped\n", top); 
```

到

```
printf("-1 popped\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:16:54.277

我认为这更符合您的意图：

```
void pop(void) {
    int n;
    if (top == NULL) {
        // empty: magic sentinel value
        n = -1;
    } else {
        n = top->item;
        // not empty: update the stack
        struct node *temp = top;
        top = top->prev;
        free(temp);
    }
    printf("%d popped\n", n);
    return;
} 
```

* * *

正如 Ed 和 Anon 正确指出的那样，您可以通过显式打印`-1`. 然而，首先让你的逻辑不那么脆弱（顺便修复这个特定的错误）对我来说似乎是一个更大的胜利。

# c# - 以下哪种文件格式最容易转换为数组？

> ID：11899515
> 
> 赞同：0
> 
> 时间：2012-08-10T10:09:38.090
> 
> 标签：c#, compact-framework, pocketpc

我正在用符号 ppt2800 PocketPC 创建一个程序，我们将用它来做商店里的东西清单。符号阅读器中的条形码阅读器将根据 PocketPC 中的列表进行检查，如果匹配，它将在列表中记录。我将从我们的结帐系统中导出一个列表，我可以将其导出为以下格式：

*   pdf
*   CSV
*   水晶报告rpt
*   html 3.2 或 4.0
*   xls
*   词rtf
*   后格式记录
*   文本
*   rtf
*   ttx
*   xml。

我的问题是什么格式最容易在 C# 中转换为数组？我需要它在紧凑框架 1.1 上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:14:27.520

对于一个简单的列表，只有文本，理想情况下每行只有一条记录。PDF、Crystal 或 Word 之类的任何内容都需要大量处理 - 不适用于袖珍 PC。对于一个简单的 txt 文件，这只是：

```
string[] entries = File.ReadAllLines(path); 
```

如果那不在 CF 上，那么只需使用 StreamReader：

```
List<string> list = new List<string>();
using(StreamReader reader = new StreamReader(path)) {
    string line;
    while((line = reader.ReadLine()) != null) {
        list.Add(line);
    }
}
string[] entries = list.ToArray(); 
```

（或者`ArrayList`/`CopyTo`如果您无权访问泛型！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:15:34.423

如果您只关心**最简单的数组读入**，我会说，那`CSV`或`TXT`带有一些由您定义的分隔符的文件可能是最简单的。

只需将文本读入字符串并制作`fileString.Split(delimeter)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:17:13.670

你应该看看 xml 和 bin xmlserialization 和 binary one

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:14:26.040

如果您可以定义结构并直接反序列化它，那么 XML 可能是最简单的。如果不是，那么它取决于数据，但很可能 csv 是恕我直言的最简单的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:15:01.763

鉴于您的简单要求，我建议使用`txt, csv or xml`.
使用内部 NET 类可以轻松读取这些格式。
（**System.IO**命名空间将提供大量选项，[请参阅此示例](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)）

其他格式将需要复杂的特定转换器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T10:15:25.980

我认为 XML 或 CSV 文件是最容易解析的。

您可以使用 .NET 框架的基础类解析 XML，也可以使用 CsvHelper 解析 CSV。

# java - java Collat ionKey排序错误

> ID：11899516
> 
> 赞同：7
> 
> 时间：2012-08-10T10:09:44.500
> 
> 标签：java, compare, locale

我在比较字符串时遇到问题。我想像这样比较两个“éd”和“ef”法语文本

```
Collator localeSpecificCollator = Collator.getInstance(Locale.FRANCE);
CollationKey a = localeSpecificCollator.getCollationKey("éd");
CollationKey b = localeSpecificCollator.getCollationKey("ef");
System.out.println(a.compareTo(b)); 
```

这将打印`-1`，但在法语字母表中`e`出现`é`。但是当我们只比较`e`并且`é`像这样

```
Collator localeSpecificCollator = Collator.getInstance(Locale.FRANCE);
CollationKey a = localeSpecificCollator.getCollationKey("é");
CollationKey b = localeSpecificCollator.getCollationKey("e");
System.out.println(a.compareTo(b)); 
```

结果是`1`。你能告诉我们第一部分代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:17:59.017

这似乎是预期的行为，**它似乎也是按法语字母排序的正确方法。**

[Android javadoc](http://developer.android.com/reference/java/text/Collator.html)给出了它为什么会这样的提示 - 我想 android 中的实现细节与标准 JDK 相似，如果不相同的话：

> 当字符串中的任何位置存在主要或次要差异时，忽略三次差异。

换句话说，因为您的 2 个字符串可以通过仅查看主要差异（不包括重音）来排序，所以整理器不会检查其他差异。

它似乎符合[Unicode Collat​​ion Algorithm (UCA)](http://www.unicode.org/reports/tr10/#Multi_Level_Comparison)：

> 如果基本字母不同，则通常会忽略重音差异。

[根据维基百科关于“ordre alphabetique”](http://fr.wikipedia.org/wiki/Classement_alphab%C3%A9tique#Exemples)的文章，这似乎也是用法语按字母顺序排序的正确方法：

> En première analysis, les caractères accentués, de meme que les majuscules, ont le meme rang alphabétique que le caractère fundamental
> Si plusieurs mots ont le meme rang alphabétique, on tâche de les distinguer entre eux grâce aux majuscules et aux 口音 (pour le e,在 l'ordre e, é, è, ê, ë)

在英语中：该顺序最初忽略重音和大小写 - 如果无法以这种方式排序 2 个单词，则会考虑重音和大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:15:49.207

从[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/text/Collator.html)：

> 您可以设置 Collat​​or 的强度属性来确定在比较中被认为显着的差异水平。提供了四种强度：初级、次级、第三和相同。语言特征的强度的确切分配取决于语言环境。例如，在捷克语中，“e”和“f”被认为是主要差异，而“e”和“ě”是次要差异，“e”和“E”是三次差异，“e”和“e”是相同的.

尝试不同的优势：

```
localeSpecificCollator.setStrength(Collator.PRIMARY); 
```

看看会发生什么。

# javascript - ExtJS 4.1 - 编辑单元格时消失的选择（组合框编辑器）

> ID：11899517
> 
> 赞同：1
> 
> 时间：2012-08-10T10:09:53.127
> 
> 标签：javascript, gridview, checkbox, extjs4.1

我有 GridPanel 有 2 列：

1.  类型：字符串
2.  详细信息：组合

我添加了 CheckBox 选择模型，我有一个小问题。

当我选择几行并想要编辑某些选定行甚至未选定行中的详细信息列时，选择就会消失。只有已编辑的行保持选中状态。我找不到任何解决方案。谁能帮我 ？

JSFiddle：http: [//jsfiddle.net/papcio28/fkJT3/6/](http://jsfiddle.net/papcio28/fkJT3/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:28:40.497

你的问题是编辑模型和复选框选择模型不兼容。其技术原因是复选框模型使用网格上的行选择模型，而grideditor 使用网格上的单元选择模型。我认为 Extjs 在这里不符合您的要求，因为单元格选择模型对于网格知道在哪里放置编辑器是必要的，而行选择模型对于您在使用复选框选择模型时直观地查看选择是必要的。在您的示例中，它听起来像是选择了行选择模型，这意味着它在您开始编辑时选择了行，因为必须选择该行才能知道将编辑器放在哪里。

我对您的建议是使用 checkcolumn 插件并通过在每一列上使用渲染器来伪造被选中的行，当您的 checkcolumn 的值为 true 时，将背景更改为所选颜色，这样它看起来就像一个行选择模型，但实际上不是一个。

# php - 普遍的 SQL 驱动程序

> ID：11899520
> 
> 赞同：1
> 
> 时间：2012-08-10T10:10:14.723
> 
> 标签：php, ubuntu, odbc, pervasive

更新：应该按照建议在服务器故障上。新帖子在这里：[https ://serverfault.com/questions/451220/psql-64bit-driver-error](https://serverfault.com/questions/451220/psql-64bit-driver-error)

我很难让 PHP 使用 Pervasive SQL 驱动程序与 ODBC 连接。

我有一个 Ubuntu Server 12.04 并从这里安装了 64 位 PSQL 客户端驱动程序： [http ://www.pervasivedb.com/psqlv11/Pages/PSQL-v11-Linux-Downloads.aspx](http://www.pervasivedb.com/psqlv11/Pages/PSQL-v11-Linux-Downloads.aspx)

我已经将带有 DSN 的 ODBC.ini 设置到我的数据库中，我可以愉快地连接然后运行查询：

```
isql Exchequer 
```

当我使用 PHP 时，odbc_connect 看起来不错并给了我一个资源，但是 odbc_exec（调用驱动程序的点）然后完全失败（SEG 错误）：

```
[Fri Aug 10 11:05:50 2012] [notice] child pid 13770 exit signal Segmentation fault (11) 
```

我究竟做错了什么？

更新：

这是gdb的输出

```
(gdb) run /var/www/default/scripts/stock/index.php
Starting program: /usr/bin/php5 /var/www/default/scripts/stock/index.php
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
[New Thread 0x7fffecc89700 (LWP 14514)]
[Thread 0x7fffecc89700 (LWP 14514) exited]
Halt[Inferior 1 (process 14513) exited normally]
(gdb) bt
No stack. 
```

和 PHP error.log 条目

```
[Fri Aug 10 15:24:53 2012] [notice] child pid 14510 exit signal Segmentation fault (11) 
```

我还添加了 Trace/TraceFile 但我似乎没有将任何输出保存到日志文件中。

**更新 2：**

这是我正在运行的简化脚本：

if(!$odbc = odbc_connect("exchequer","username","password")) { die("连接到 Exchequer 失败"); } $rows = odbc_exec($odbc,'SELECT sl.slStockCode, sl.slQtyInStock, sl.slQtyAllocated, sl.slLocCode FROM StockLocation sl WHERE sl.slLocCode IN (\'DIG\',\'WOO\',\'MEN \')'); 回声“

```
“.print_r($rows,true)。”
```

";

odbc_connect 工作（不会死），但我在浏览器中一直看到错误 342，并且在 apache 日志文件中看到“退出信号分段错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:23:36.190

它可能只是您正在使用的组件之一中的错误，但我最好的猜测是您的组件在编译时与 SQLLEN/SQLULEN 的大小不匹配。您可以在 unixODBC 中启用登录，它可能会给我们一个提示。编辑您的 odbcinst.ini 文件并将以下内容添加到顶部：

```
[ODBC]
Trace=yes
TraceFile=/tmp/unixodbc.log 
```

如果您不知道需要编辑哪个 odbcinst.ini 文件，请运行 odbcinst -j 它会告诉您。现在运行您的 PHP 脚本，上面的文件应该包含日志。

或者，您可以在调试器 (gdb) 下运行 php 并查看它在哪里崩溃。为此，您需要找到您的 php 可执行文件的位置并运行以下内容：

```
gdb /path/to/php 
```

然后键入“run /path/to/my/php/script”，当它跌倒时键入“bt”以获取回溯，这将告诉我们它跌倒的位置。

但是，如果它是 SQLLEN/SQLULEN 不匹配损坏，则可能正在发生，这可能意味着它在与问题所在位置完全不同的地方出现故障。您需要验证 PHP 的 ODBC 模块、unixODBC 和您的 ODBC 驱动程序都使用相同大小的 SQLLEN 和 SQLULEN 构建。我猜如果你从 Ubuntu 安装了 unixODBC 和 PHP，那么它们会匹配，所以奇怪的是你需要询问他们的 Pervasive 驱动程序。

odbcinst -j 输出构建 unixODBC 时使用的 SQLLEN/SQLULEN 的大小。

[您可以在64-bit ODBC](http://www.easysoft.com/developer/interfaces/odbc/64-bit.html)中找到更多相关信息

# android - 在 WebView android 4.0 中突出显示特定文本

> ID：11899521
> 
> 赞同：3
> 
> 时间：2012-08-10T10:10:32.233
> 
> 标签：android, android-layout, android-intent, android-webview

我想突出显示 WebView 上的特定（搜索）文本。我使用代码

```
 myWebView.findAll(txtSearch);

 try {
      for (Method m : WebView.class.getDeclaredMethods()) {
         if (m.getName().equals("setFindIsUp")) {
          m.setAccessible(true);
          m.invoke(myWebView, true);
          break;
        }
    }
     } catch (Exception ignored) {
       } 
```

这在 Android 2.2 上运行良好，但不适用于 Android 4.0 及更高版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:21:36.207

是的，你是对的，WebView 上的突出显示文本在 Android 2.2 上效果很好，但他似乎在 Android 4.0 及更高版本上不工作

看看这个链接

[这里](https://stackoverflow.com/questions/2120035/highlight-text-in-textview-or-webview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:28:04.613

> 我也在尝试这个突出显示的文本，它在 android 版本 2.2 上完美运行，但如果我在另一个版本中尝试相同的东西，那么突出显示文本不会显示，并且 findasync() 仅适用于 api 16 的另一件事。五月使用 java 脚本可以帮助我解决这个问题，如果它有效，我会告诉你。
> 
> 谢谢

# java - JPA：如何管理 id（或 business-id）？仍然是相同 pb 的 equals/hashcode

> ID：11899523
> 
> 赞同：1
> 
> 时间：2012-08-10T10:10:45.337
> 
> 标签：java, hibernate, jpa

我是 Hibernate、Spring、JPA 框架的初学者。目前，我正在尝试使用 Spring 3.1.1 - JPA with Hibernate 4 Implementation 创建一个简单的架构。

目前，为了不依赖于我的数据库，我使用 TableGenerator 创建了一些 id：

```
@Id
@Column(name = "AIR_ID", unique = true, nullable = false)
@TableGenerator(name="aircraftSeqStore", 
    table="T_S_APP_SEQ_STORE_AST", 
    pkColumnName="AST_SEQ_NAME",
    valueColumnName = "AST_SEQ_VALUE",
    pkColumnValue = "T_R_AIRCRAFT_AIR.AIR_ID", 
    allocationSize=1)
@GeneratedValue(strategy=GenerationType.TABLE, 
    generator="aircraftSeqStore")       
private Integer id; 
```

经过我的研究，并阅读了“不要让休眠窃取你的身份”文章之后，我真的不明白如何管理我的身份。

我是否应该修改我的实体以用分配的值替换它们（如何在 JPA 中做到这一点？）我是否应该生成一个 UUID 以在创建瞬态对象时直接影响 id？

在许多表中，我有一些简单的数据（id、name）。我以为我可以管理唯一的名称属性上的哈希码和 equals 方法，但在创建对象时也不受影响....（所以我认为相同的 pb 与 id 为空？）。

有关信息，我有一个表示多连接表的实体（此连接表中的 3 个 FK）。

那么你对我有什么建议呢？为性能生成 UUID 还不错吗？

* * *

**编辑 ：**

这个实体可行吗？

```
@Id
@Column(name = "AIR_ID", unique = true, nullable = false)
@TableGenerator(name="aircraftSeqStore", 
    table="T_S_APP_SEQ_STORE_AST", 
    pkColumnName="AST_SEQ_NAME",
    valueColumnName = "AST_SEQ_VALUE",
    pkColumnValue = "T_R_AIRCRAFT_AIR.AIR_ID", 
    allocationSize=1)
@GeneratedValue(strategy=GenerationType.TABLE, 
    generator="aircraftSeqStore")       
private Integer id;

@Column(name = "AIR_BUSINESS_ID", unique = true, nullable = false)
private String uuid = IdGenerator.createId();

public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || !(o instanceof Aircraft))
        return false;

    Aircraft other = (Aircraft)o;

    if (uuid == null) return false;
    return uuid .equals(other.getUuid ());
}

public int hashCode() {
    if (uuid  != null) {
        return uuid .hashCode();
    } else {
        return super.hashCode();
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:32:04.147

与每个问题一样，完整但很少有用的答案是：视情况而定。

更有用的变体是：

我大部分时间都使用 GenerationType.Auto，并且不实现 equals 和 hashcode。

结果是：

*   只要实体对象存在于同一个会话中，您就可以很好地比较它们，因为休眠将确保每个数据库行由每个会话的单个实例表示。

*   equals 和 hashcode 随着时间的推移是稳定的，所以你可以把你的对象放在 HashSets 中，改变对象，仍然可以再次取出它们。

*   如果你想处理来自不同会话的对象，你必须显式地比较 ids 或 ids + hashcode 或一些业务密钥，可能通过实现一个 Comparator。在决定使用什么和实现它时付出的额外努力会提醒你，你实际上正在做一些违背 Hibernate 的事情。

关于性能：取决于数据库和用例 UUID 可能具有成本性能，因为它们相当大，或者提高性能，因为它们可以在客户端上创建，从而节省数据库往返。大多数情况下，应用程序中的其他故障（尤其是在使用 Hibernate 时）比 ID 生成的任何影响都要大得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:48:33.360

我最近问了一个问题，探索了通常模式的替代方案：[这种 JPA“缓存 hashCode”模式有什么问题吗？](https://stackoverflow.com/questions/11730379)

我包含了一个我通常使用`@Entity`类的示例 - 在构造时生成`UUID`s。碰撞的可能性`UUID`是如此之小，以至于你最好担心宇宙射线。有些人不喜欢`UUID`s，因为他们觉得有性能损失。我没有看到性能与 相比有任何变化`Integer`，但我认为发生碰撞的可能性`Integer`很小，足以引起关注。

```
@Id
private UUID id = UUID.randomUUID();

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (!(obj instanceof MY_CLASS) || id == null)
        return false;
    MY_CLASS other = (MY_CLASS) obj;
    return id.equals(other.id);
}

@Override
public int hashCode() {
    Preconditions.checkNotNull(id, "id must be set before @Entity.hashCode can be called");
    return id.hashCode();
} 
```

有时我想检查实际数据本身是否匹配，在这种情况下，我创建一个这样的方法：

```
public boolean hasSameProperties(Note other) {
    Preconditions.checkNotNull(other);
    if (this == other)
        return true;
    return Objects.equal(source, other.source)
            && Objects.equal(title, other.title)
            && Objects.equal(tags, other.tags)
            && Objects.equal(contents, other.contents);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:21:41.027

通常我使用：

```
 @Id
@GeneratedValue(strategy=GenerationType.AUTO)     
    private Integer id 
```

并让持久性提供者选择正确的。希望这对你有帮助

# iphone - 在客户端上使用代理对象时在 iOS 上调用 WCF 服务

> ID：11899528
> 
> 赞同：1
> 
> 时间：2012-08-10T10:11:13.267
> 
> 标签：iphone, ios, wcf, service, client-side

我正在开发 iphone 应用程序来调用 WCF Web 服务。我阅读了有关使用 iOS 调用 Web 服务的可能方法，但问题是当前客户端应用程序正在使用代理对象来调用服务，是否可以在 iOS 中使用相同的代理对象或无论如何模拟它？或者有什么方法可以找出要发送到服务器的最终 URL 或对象是什么？

我的快捷解决方案是使用 Fiddler.exe 监控 http 请求并查看发送到服务器的内容。但按道理它不应该是唯一的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:23:04.380

无需使用 fiddler，您面前有几个选项如下：

1- 使用 NSURLConnection 、 NSXmlParser 和 NSHttpRequest 来实现 SOAP 或 REST 消息。（不推荐这种方式，因为您需要写下所有的 SOAP 结构。）

2-使用SudzC.com创建iOS客户端，教程见[http://www.sudzc.com](http://www.sudzc.com)

注意：使用 SudzC 时有一些问题，请使用以下文章处理问题： [http ://blog.exadel.com/working-with-ios-and-soap/](http://blog.exadel.com/working-with-ios-and-soap/)

祝你好运。

# c++ - 如何为向量指定默认值 在 boost::program_options

> ID：11899535
> 
> 赞同：13
> 
> 时间：2012-08-10T10:11:27.790
> 
> 标签：c++, boost, boost-program-options

我确实想为代码中的注释中的位置参数提供默认值，但编译器会抱怨。代码编译得很好。我使用 boost 1.46.1 和 g++

```
int main(int argc, char *argv[]) {
    namespace po = boost::program_options;

    po::positional_options_description p;
    p.add("path", -1);

    po::options_description desc("Options");
    std::vector<std::string> vec_str;
    std::string str;
    desc.add_options()
        ("foo,f", po::value< std::string >()->default_value(str), "bar")
        //("path,p", po::value< std::vector<std::string> >()->default_value(vec_str), "input files.")
        ("path,p", po::value< std::vector<std::string> >(), "input files.")
    ;

    po::variables_map vm;
    po::store(po::command_line_parser(argc, argv).options(desc).positional(p).run(), vm);
    po::notify(vm);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T14:40:13.177

我需要给出默认值的文本表示，请参阅[http://lists.boost.org/boost-users/2010/01/55054.php](http://lists.boost.org/boost-users/2010/01/55054.php)。

即以下行有效：

```
 ("path,p", po::value< std::vector<std::string> > ()->default_value(std::vector<std::string>(), ""), "input files.") 
```

我想这是帮助输出所需要的，在我的示例中可能

```
std::cout << desc << std::endl; 
```

由于编译器不知道如何重载`operator<<()`for `vector<string>`，它会抱怨。

# iphone - PFQuery 未在 iPhone 应用程序中返回结果

> ID：11899537
> 
> 赞同：0
> 
> 时间：2012-08-10T10:11:38.443
> 
> 标签：iphone, ios5, parse-platform

我正在为我的 iPhone 应用程序使用解析，并且我正在尝试使用 PFQuery 获取 PFObject。我的查询和其他相关代码如下：

```
PFQuery *query = [PFQuery queryWithClassName:@"UserInfo"];
[query whereKey:@"userId" equalTo:@"89b7eb8801b24ace16b35b927ef01d4f"];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
    if (!error) {
        // The find succeeded.
        NSLog(@"Successfully retrieved %d users.", objects.count);
    } else {
        // Log details of the failure
        NSLog(@"Error: %@ %@", error, [error userInfo]);
    }
}]; 
```

我尝试使用这种方法，但在 NSArray 对象中得到 0 个结果。虽然您可以在我的数据浏览器中看到有一个与 userId 匹配的对象。我可以在该类中添加数据，但无法检索它。我错过了什么吗？我是使用 Parse 的新手。 ![在此处输入图像描述](../Images/017f4b4585d241d868b805b4b1ea71ae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:13:50.163

我得到了它。这是从我的 appDidFinishLaunching 方法创建的匿名用户。

这段代码正在运行，我不知道：

```
[PFUser enableAutomaticUser];
PFACL *defaultACL = [PFACL ACL];
// Optionally enable public read access by default.
[defaultACL setPublicReadAccess:YES];
[PFACL setDefaultACL:defaultACL withAccessForCurrentUser:YES]; 
```

现在，最初是 [defaultACL setPublicReadAccess:YES]; 行被评论。我研究了一些关于创建用户和匿名用户并取消注释这一行的信息，它完全按照我的意愿工作。PFQuery 已开始返回结果。所以，我假设 defaultACL 值是问题所在。如有错误请指正。

# android - 使用谷歌地图

> ID：11899542
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:02.047
> 
> 标签：android, android-mapview

我编写了一个简单的代码，通过获取 MD5 键来显示谷歌地图。当我使用 eclipse 运行时它运行良好，但当我安装它时它在我的 android 手机中无法正常运行。使用导入“com.google.android.maps.MapActivity”时会显示一些错误，例如“未知类型或包 google”。请帮忙

这是我的代码：

公共类 MainActivity 扩展 MapActivity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {

    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:53:42.560

目标必须是 Google API 而不是 Android xx 通过将其定位到 Google API xx，您会将 maps.jar 添加到项目中的引用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:19:18.113

您需要从 google 获得 api-key，并且还应该在 AndroidManifest.xml 中包含以下行

```
<uses-library android:name="com.google.android.maps" /> 
```

按照下面的链接，您将实现在 android 中加载地图以及地图图块。

[https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

# c++ - Python 类型存在

> ID：11899544
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:07.977
> 
> 标签：c++, python, boost-python

我必须使用 boost python 库检查传递的对象类型是否存在于 python 中：

```
// bp = boost::python
bool TypeExists(const std::string &typeName)
{
    bp::object ret = bp::exec(
            (boost::format("'%1%' in globals()") % typeName).str().c_str()
    );
    return bp::extract<bool>(ret);
} 
```

所以，在这段代码中，我运行 python 表达式，它看起来像：`'TypeName' in globals()`. 这应该返回布尔类型的对象。但是提取总是返回 0。类型 100% 存在，因为在`TypeExists`调用后的下一行中，我创建了这种类型的对象。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:22:09.430

问题是*exec*执行 Python 代码并返回**执行结果**（无论是执行还是出错）；并且您需要表达式评估的结果。

您必须在此处使用**eval**来获取表达式评估结果。

```
bp::object ret = bp::eval(...) 
```

这在[文档](http://www.boost.org/doc/libs/1_43_0/libs/python/doc/v2/exec.html#eval-spec)中有所描述。

# mysql - 在比较日期时间和字符串时非法混合排序规则

> ID：11899547
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:12.303
> 
> 标签：mysql, datetime, stored-procedures, collation, sql-like

我创建了一个 MYSQL 存储过程，它搜索表的所有列（参数 1）以查找其中是否包含字符串（参数 2）。问题是，当我将 datetime 列与包含希腊字符的字符串进行比较时，我收到以下错误：

**SELECT * FROM my_table WHERE my_datetime LIKE '%ΕΛΛΗΝΙΚΑ%';**
*'like' 操作的排序规则的非法混合*

当我使用拉丁字符时，查询的执行是成功的。我知道如何避免根据数据类型检查列，但是我真的希望能够搜索日期时间字符串。我使用 MySQL 5.5.24。数据库的排序规则是utf8_general_ci，服务器的排序规则是latin1_swedish_ci。我在查询之前尝试了命令 SET NAMES utf8，但没有运气。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:24:38.100

我遇到了类似查询的问题：

```
SELECT * FROM some_table WHERE some_date LIKE '%2012-01%'; 
```

结果是“非法混合排序规则”错误。

简单地使用[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数有助于：

```
SELECT * FROM some_table WHERE DATE_FORMAT(some_date, '%Y-%m-%d') LIKE '%2012-01%'; 
```

# perl - 需要在perl中解析whois输出

> ID：11899549
> 
> 赞同：1
> 
> 时间：2012-08-10T10:12:17.053
> 
> 标签：perl, whois

我需要使用 perl 查找电子邮件地址和名称（管理员、注册商、技术人员（如果有））。

我检查了 whois 输出有不同的输出格式。我试过 Net::ParseWhois 和 Net::WhoisNG，但我没有得到不同域的电子邮件地址或名称。

例如：`whois google.com`

有什么方法可以让我使用任何 perl 模块从任何域获取上述详细信息（电子邮件和姓名），或者我如何解析 perl 中任何域的 whois 输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:35:01.747

直接从以下产生的概要中快速复制/粘贴：

```
use strict;
use warnings;
use Net::WhoisNG;
my $w=new Net::WhoisNG('google.com');
if(!$w->lookUp()){
    print "Domain not Found\n";
    exit;
}
# If lookup is successful, record is parsed and ready for use

foreach my $type (qw(admin tech registrant bill)) {
    my $contact=$w->getPerson($type);
    if ($contact) {
        print "$type\n";
        my $email = $contact->getEmail();
        if ($email and $email =~ /\S/) {
            print "$email\n";
        } else {
            my $unparsed = join(' ', @{$contact->getCredentials()});
            # Use an regexp to extract e-mail from freeform text here, you can even pick ready one somewhere here on SO
            print "$unparsed\n";
        }
        print "----\n\n";
    }
} 
```

结果：

```
admin
 dns-admin@google.com +1.6506234000 Fax: +1.6506188571
----

tech
 dns-admin@google.com +1.6503300100 Fax: +1.6506181499 
```

我将从自由文本中提取电子邮件的练习留给你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T11:34:33.007

使用[`Net::Whois::Parser`](https://www.metacpan.org/module/Net%3a%3aWhois%3a%3aParser)，它将为您解析现有`whois`文本或调用为您[`Net::Whois::Raw`](https://www.metacpan.org/module/Net%3a%3aWhois%3a%3aRaw)获取信息。

但请注意，这些`whois`信息可能不会对所有注册的域公开：`google.com`是一个例子。

这段代码演示了这个想法

```
use strict;
use warnings;

use Net::Whois::Parser;
$Net::Whois::Parser::GET_ALL_VALUES = 1;

my $whois = parse_whois(domain => 'my.sample.url.com');

my @keys = keys %$whois;

for my $category (qw/ admin  registrant  tech/) {
  print "$category:\n";
  printf "  $_ => $whois->{$_}\n" for grep /^${category}_/, @keys;
  print "\n";
} 
```

# google-app-engine - 在 App Engine 上使用联合登录/OpenID

> ID：11899551
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:23.403
> 
> 标签：google-app-engine

我想代表当前用户发送邮件。

使用 OpenID 时，我得到了众所周知的“未经授权的发件人”异常。我之前使用其他应用程序遇到过这个问题，并通过将我的应用程序列入白名单来解决。

App Engine 团队的某个人可以将我的新应用列入 OpenID 的白名单吗？

应用程序 ID：floreysoftultradox

非常感谢！

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:05:37.810

您是否尝试以通过 OpenID 登录您的应用程序的用户的名义发送电子邮件？

这是做不到的。并且有一个原因：这将是一个巨大的垃圾邮件渠道。

要以用户的名义从 GAE 发送电子邮件，您必须：

1.  在 Gmail 或 Google Apps 上拥有用户帐户
2.  将用户作为开发者/所有者添加到您的 GAE 帐户（管理员 -> 权限 -> 邀请）

**编辑：**

如果用户通过 Google 帐户登录，则代表用户发送邮件有效，但如果通过联合登录 (OpenID) 完成身份验证则无效：[代表 Google Apps 用户发送电子邮件](https://stackoverflow.com/questions/10182854/sending-email-on-behalf-of-google-apps-user)（接受的答案来自 GAE 工程师）

# android - 通过 x 和 y 坐标在网格视图中查找视图的位置

> ID：11899554
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:30.457
> 
> 标签：android, gridview

我正在制作一个 android 应用程序，其中我有 x 和 y 坐标，我需要在网格视图中找到视图的位置。我只想知道是否有任何功能或简单的方法可以找到位置。

```
 skip this line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:38:42.700

这对我有用：

```
yourGridView.pointToPosition(yourX, yourY); 
```

pointToPosition(int x, int y) 是 GridView 类中的一个函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:20:09.860

当用户单击您的 gridView 时，您可以使用以下代码：

```
gridview.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> parent, View v, int position, long id) { 

int clickedPosition = position; 

}} 
```

clickedPosition 是一个变量，其中包含从 gridView 的左上角开始并从 0 开始的单击视图的位置

# asp.net-mvc-3 - 在实体框架中使用数据库优先方法

> ID：11899555
> 
> 赞同：5
> 
> 时间：2012-08-10T10:12:33.223
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0, orm, asp.net-mvc-4

我是 MVC 新手，也是使用 EF 的新手。在我们的应用程序中，我们使用数据库优先方法。当我们使用 DB first 方法时，我们正在从 db 生成 edmx。

当我生成 edmx 时，它会为我的数据库中的表生成所有相关的分类。在这里，我很困惑是直接在我的视图中使用生成的类，还是应该在 EF 生成的类之上再创建一层类并从我的控制器和视图中使用它们。

如果我在实体之上再创建一层类，我必须处理这些类之间的映射。如果模型有任何变化，我怀疑这在未来可能会很痛苦。

如果我直接使用控制器中的实体，我觉得我将所有不必要的东西暴露给控制器和视图。

有人可以告诉我如何进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:04:10.100

你做得很好，只是你拥有它，你不需要改变它。您应该能够使用生成的类，或者如果您认为暴露太多，您可以创建一个视图模型，您将只填充您关心的数据并将其传递给视图。这就是 MVC 应该如何工作的。

假设您有一个名为的数据库表`Articles`，其中有很多您不想传递给视图的东西，您可以创建一个像这样的视图模型

```
public class ArticlesViewModel
{
    [Required] // this is optional, just to give you an idea of validation
    public string Title { get; set; }
    public DataTime Date { get; set; }
} 
```

现在在你的控制器中你会有这样的东西：

```
ArticlesViewModel articleVM = new ArticlesViewModel();
// populate it from your DB

return View(articleVM); 
```

所以现在你的视图只有`Title`and `Date`，（你也应该有，这样你就可以轻松地从数据库`ID`中检索完整。）`Article`

[这](https://stackoverflow.com/a/11592103/985284)将使您了解从数据库中获取所需信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:27:35.550

您可能希望使用 NuGet 安装 POCO（普通旧 C# 对象 - 不依赖于其他功能（如 EF）的对象）生成器之一，这样您就可以将对象传递到视图层，而视图层不需要 EF 知识一点也不。

这被称为“关注点分离”或“单一责任原则”——您的视图知道如何显示数据，您的 DAL 知道如何检索和存储数据，并且两者都不应该知道关于做其他工作的细节。

如果您将 EF 对象向上传递，那么您还需要将 EF 知识和能力向上传递——传递 POCO 绕过了这一点。

看看这个 SO 主题：

[Entity Framework 4 / POCO - 从哪里开始？](https://stackoverflow.com/questions/2478081/entity-framework-4-poco-where-to-start)

# c - 确保 uinput（内核模块）确实正在运行/加载以及一些测试代码

> ID：11899557
> 
> 赞同：1
> 
> 时间：2012-08-10T10:12:37.497
> 
> 标签：c

我正在尝试确保 uinput 正在运行/加载并且可以正常工作。

我无法使用 lsmod 找到设备，但是我可以找到文件 /dev/uinput，这是什么意思？

我通过一些谷歌搜索找到了一些代码，这些代码显然测试了 uinput，它失败并显示“无法创建 UINPUT 设备”。打印到终端。相关代码如下：

```
if (ioctl(uinp_fd, UI_DEV_CREATE))
{
  printf("Unable to create UINPUT device.");
  return -1;
} 
```

完整代码可以在这里阅读：http: [//pastebin.com/tJdUgiDz](http://pastebin.com/tJdUgiDz)

所以我的问题是这样的：

uinput 加载了吗？如果是，为什么这段代码不能正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:04:23.337

听起来 uinput 已编译到您的内核中，而不是您使用 lsmod 看到的可加载模块。这绝对是 Ubuntu 12.04 的情况。

由于权限问题，您的打开可能会失败。

```
$ ls -l /dev/uinput
crw-r----- 1 root root 10, 223 Sep 22 11:45 /dev/uinput 
```

您可以在每次运行程序时以 root 身份运行程序

```
$ sudo ./mytest-program 
```

或创建 udev 规则以永久允许任何程序使用 uinput。复制下面的粘贴命令以在 ubuntu 12.04 系统上创建正确的规则并重新启动 udev 服务以使用它

```
$ sudo bash -c 'echo -e "# allow programs without root permissions to use uinput\n KERNEL==\"uinput\", MODE=\"0666\"" >> /etc/udev/rules.d/50-uinput.rules'
$ sudo restart udev 
```

如果您更关心安全性，您可以为组设置规则并设置您的可执行文件的[setuid/setgid 。](http://en.wikipedia.org/wiki/Setuid)

# datasource - 将 ABL 表链接到 UltraWinGrid

> ID：11899558
> 
> 赞同：1
> 
> 时间：2012-08-10T10:12:43.207
> 
> 标签：datasource, progress, progress-4gl, ultrawingrid

我使用 ABL 在 OpenEdge 中创建了一个表。我现在正试图在 UltraWinGrid 中显示表格。我一直在关注这里找到的信息：

*   [http://devcenter.infragistics.com/Articles/ArticleTemplate.Aspx?ArticleID=1034](http://devcenter.infragistics.com/Articles/ArticleTemplate.Aspx?ArticleID=1034)
*   [http://devcenter.infragistics.com/Articles/ArticleTemplate.Aspx?ArticleID=1037](http://devcenter.infragistics.com/Articles/ArticleTemplate.Aspx?ArticleID=1037)

然而，这些都是用 c# 和 vb 编写的，所以代码并不完美。

所以我有一个名为 test 的表，我创建了一个像这样的数据集

```
 DEFINE DATASET WINTEST FOR TEST. 
```

但我想知道如何将该数据集链接到 UltraGrid。关于使用代码的链接

```
UltraGrid1.DataSource = DataSet 
```

但是，这不适用于 ABL。有谁知道如何将表数据与 UltraWinGrid 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:01:36.137

我没有使用基础设施网格，但通常你需要做的是填充网格是 -

. 创建一个 ProBindingSource。使用 ProBindingSource 设计器定义/导入您需要的表和字段的详细信息。

. ProBindingSource 将成为网格的数据源，因此要么在设计器中设置数据源属性，要么使用上面的语法。

. 然后，您需要填充 ProBindingSource。为此，您将附加查询、缓冲区或 ProDataSet。您使用 ProBindingSource 的 :handle 属性附加它。我倾向于使用查询，所以像 -

```
define query qCustomer for customer scrolling.

open query qCustomer
    for each customer
    no-lock.

assign pbsCustomer:handle = query qCustomer:handle. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:15:14.100

我对 ABL 或 OpenEdge 没有任何了解，也不确定 Test 对象表的结构究竟是什么。您可以尝试将其直接传递给 DataSource 属性并验证 UltraGrid 是否会正确显示它。

有关 UltraGrid 的 DataSource 属性以及您可以使用的对象类型的更多信息，请参见下面提供的链接：

[http://help.infragistics.com/NetAdvantage/WinForms/2012.1/CLR2.0/?page=Infragistics2.Win.UltraWinGrid.v12.1~Infragistics.Win.UltraWinGrid.UltraGridBase~DataSource.html](http://help.infragistics.com/NetAdvantage/WinForms/2012.1/CLR2.0/?page=Infragistics2.Win.UltraWinGrid.v12.1~Infragistics.Win.UltraWinGrid.UltraGridBase~DataSource.html)

# java - 如何在此代码中添加找不到文件的异常？

> ID：11899559
> 
> 赞同：-1
> 
> 时间：2012-08-10T10:12:45.133
> 
> 标签：java, error-handling, jakarta-mail, java-io

我使用此代码使用 java 发送邮件。在这里，我将一个 pdf 文件附加到邮件中。如果找不到文件，我想抛出并且找不到文件异常。怎么办？

```
 try{
    Message message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));
    message.addRecipient(Message.RecipientType.TO, new InternetAddress(receiver));
    message.setSubject(subject);
    // Create the message part
    BodyPart messageBodyPart = new MimeBodyPart();
    // Fill the message
    messageBodyPart.setText("hai");
    Multipart multipart = new MimeMultipart();
    multipart.addBodyPart(messageBodyPart);
    //Attachement
    messageBodyPart = new MimeBodyPart();
    String filename = "file";
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(source.getName());
        multipart.addBodyPart(messageBodyPart);
    }
    message.setContent(multipart);
    Transport transport = session.getTransport("smtp");
    try{
        transport.connect(host,from,password);
    } catch (AuthenticationFailedException err){
        String errMsg = "Authentication fails when sending mail. Sent failed to " + receiver;
        log.error(errMsg,err);
        throw new AuthenticationFailedException(errMsg + err.getMessage());
    }
    transport.send(message);
} catch (MessagingException re) {
    String localizedError = "Unexpected error occurred at Email client. Sent failed to:" + receiver + ". ";
    log.error(localizedError + re.getLocalizedMessage(), re);
    throw new MessagingException(localizedError + re.getLocalizedMessage(), re);
} 
```

这是我要添加文件未找到异常的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:16:16.663

你的意思是？

```
if(!new File(filename).exists()) throw new FileNotFoundException(filename); 
```

我会认为任何读取文件的函数都应该抛出这个，所以我认为不需要添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:20:08.420

来自[FileDataSource](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/javabeans/glasgow/javadocs/javax/activation/FileDataSource.html)的输入/输出流方法的文档：

> 此方法将返回一个表示数据的 ...Stream，如果不能这样做，将抛出一个 IOException。此方法将在每次调用时返回一个新的 InputStream 实例。

注意，您需要处理的不仅仅是`FileNotFoundException`。如果您传递了一个目录或一个不可读的文件，会发生什么？`IOException`将封装所有这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:18:52.993

我原以为 FileDataSource 或 DataHandler 会这样做，但如果不是，只需添加：

```
new FileInputStream(filename).close(); 
```

在将文件名参数传递给 FileDataSource 之前。这将为您抛出该异常。

# javascript - 点击事件复制

> ID：11899561
> 
> 赞同：0
> 
> 时间：2012-08-10T10:12:55.603
> 
> 标签：javascript, jquery, jquery-selectors

我有这个结构

```
<div>
    <ul>
        <li>...</li>
        <li....
        ...
    </ul>
</div> 
```

在jQuery中

```
$(div).click(function(){...});
$(li).click(function(){....}); 
```

现在我的问题是当我点击 li 时，div click 事件也会触发。单击 li 时如何设置为仅触发 li click 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:14:10.253

```
$(div).click(function(){...});
$(li).click(function(ev){ ev.stopPropagation(); /* other code here */ }); 
```

使用[stopPropagation()](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:14:27.083

请执行下列操作：

```
$(li).click(function(e) {e.stopPropagation()...}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:14:05.293

从`li`s 事件返回 false，这将阻止它在 DOM 树中冒泡。

更新，并且作为好的措施也是`event.preventDefault()`如此，`event`作为传递给处理函数的第一个参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T10:15:27.700

您可以使用[**event.stopPropagation() 之**](http://api.jquery.com/event.stopPropagation/)类的

```
$(li).click(function(event){ event.stopPropagation() }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:15:03.777

这将有助于

```
$(li).click(function(event) {
    event.stopPropagation()
    //you code here
}) 
```

# javascript - 用于在 SCORM1.2 中计算测验分数的 Javascript

> ID：11899564
> 
> 赞同：0
> 
> 时间：2012-08-10T10:13:10.817
> 
> 标签：javascript, xhtml, cdata, scorm, scorm1.2

我有一个 SCORM 1.2 内容包，其中包含一些包含测验问题的 HTML 页面。单击提交按钮后，javascript 计算分数并返回。我当前的 java 脚本可以很好地解决两个问题，如果我在一页中有更多问题，那么我必须通过包含一个新变量来修改 javascript。我想知道是否有任何通用方法可以为“n”个问题编写相同的 javascript；无论问题数量如何变化，它都可以计算分数。感谢您。

**我的 Java 脚本：（calculate.js）**

```
<script type="text/javascript">
<![CDATA[
var numQuestions = 2;
var rawScore = 0;
var actualScore = 0;
var question0;
var question1;
var key0 = 0;
var key1 = 1;
function getAnswer()
        {
            doLMSSetValue("cmi.interactions.0.id","key0b8");
            doLMSSetValue("cmi.interactions.0.type","choice");
            doLMSSetValue("cmi.interactions.0.correct_responses.0.pattern",
                          "0");

            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key0b8[i].checked)
               {
                  question0 = document.getElementById("quizForm8").key0b8[i].value;
                  doLMSSetValue("cmi.interactions.0.student_response",question0);
                  break;
               }
            }

            doLMSSetValue("cmi.interactions.1.id","key1b8");
            doLMSSetValue("cmi.interactions.1.type","choice");
            doLMSSetValue("cmi.interactions.1.correct_responses.0.pattern",
                          "1");

            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key1b8[i].checked)
               {
                  question1 = document.getElementById("quizForm8").key1b8[i].value;
                  doLMSSetValue("cmi.interactions.1.student_response",question1);
                  break;
               }
            }

           }
        function calcRawScore(){

            if (question0 == key0)
            {
               doLMSSetValue("cmi.interactions.0.result","correct");
               rawScore++;
            }
            else
            {
               doLMSSetValue("cmi.interactions.0.result","wrong");
            }
            if (question1 == key1)
            {
               doLMSSetValue("cmi.interactions.1.result","correct");
               rawScore++;
            }
            else
            {
               doLMSSetValue("cmi.interactions.1.result","wrong");
            }
        }

        function calcScore2()
        {
           computeTime();  // the student has stopped here.

           document.getElementById("quizForm8").submitB.disabled = true;

           getAnswer();

           calcRawScore();

           actualScore = Math.round(rawScore / numQuestions * 100);
        alert("Your score is " + actualScore + "%")   

           doLMSSetValue( "cmi.core.score.raw", actualScore+"" );

           var mode = doLMSGetValue( "cmi.core.lesson_mode" );

               if ( mode != "review"  &&  mode != "browse" ){
                 if ( actualScore < 50 )
                 {
                   doLMSSetValue( "cmi.core.lesson_status", "failed" );
                 }
                 else 
                 {
                   doLMSSetValue( "cmi.core.lesson_status", "passed" );
                 }

                 doLMSSetValue( "cmi.core.exit", "" );
                 } 

         exitPageStatus = true;

         doLMSCommit();

         doLMSFinish();

        }
]]>
</script> 
```

**(X)HTML页面：**

```
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
 <!-- Other Code -->
      <body>
        <div id="outer">
          <div class="QuizTestIdevice" id="id8">
            <script src="calculate.js" type="text/javascript"></script>
            <form name="quizForm8" id="quizForm8" action="javascript:calcScore2();">
              <div class="iDevice_inner">
                <div class="passrate" value="50"></div>
                <div class="question">
                  <div id="taquestion0b8">
                    1&gt; TEXT FOR QUESTION 1.
                  </div><br />
                  True<input type="radio" name="key0b8" value="0" id="taoptionAnswer0q0b8" /> 
                  False<input type="radio" name="key0b8" value="1" id="taoptionAnswer1q0b8" />
                </div><br />
                <div class="question">
                  <div id="taquestion1b8">
                    2&gt; TEXT FOR QUESTION 2.
                  </div><br />
                  True<input type="radio" name="key1b8" value="0" id="taoptionAnswer0q1b8" /> 
                  False<input type="radio" name="key1b8" value="1" id="taoptionAnswer1q1b8" />
                </div><br />
                <input type="submit" name="submitB" value="SUBMIT ANSWERS" />
              </div>
            </form>
          </div>
        </div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:12:02.503

您可以在函数调用时传递问题计数值

```
<form name="quizForm8" id="quizForm8" action="javascript:calcScore2();"> 
```

到

```
<form name="quizForm8" id="quizForm8" action="javascript:calcScore2(5);"> //5 -> Argument for 5 questions 
```

-

```
function calcScore2(n)
{ 
    numQuestions = n;
.
. 
```

# wpf - 如何确保无边界 WPF 应用程序在 Windows 8 中以填充模式运行？

> ID：11899566
> 
> 赞同：1
> 
> 时间：2012-08-10T10:13:29.403
> 
> 标签：wpf, windows-8

我正在创建一个无边界的 WPF 应用程序。如何确保它在所有三种视觉状态下运行，即全屏模式、填充模式和捕捉模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:08:41.840

我建议看看这个图书馆

MahApps.Metro

它有很多 Windows 8 Metro 风格控件和无边框窗口。

[http://mahapps.com/MahApps.Metro/](http://mahapps.com/MahApps.Metro/)

N Route 也有一个完整的示例应用程序，带有无边框窗口

[http://nroute.codeplex.com/](http://nroute.codeplex.com/)

# asp.net - 将 asp.net 部署到 IIS 结果然后启动站点会导致目录列表

> ID：11899567
> 
> 赞同：2
> 
> 时间：2012-08-10T10:13:34.347
> 
> 标签：asp.net, iis, directory-listing

我将我的 asp.net Web 应用程序部署到 IIS，现在当我转到 http:\servername\mywebsite 时，我得到了目录列表页面。

我必须配置什么才能使启动页面成为 http:\servername\mywebsite/login.aspx ？请记住我没有使用 default.aspx 或 home.aspx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:17:49.080

当您向 IIS 发送一个不包含页面名称的请求时，IIS 使用它的列表`Default Documents`来查看它应该显示的文件。

作为标准`default.aspx`将添加到此列表中，但如果您不使用`default.aspx`，则**必须**添加您实际要使用的文件。

这是[在 IIS6 中设置默认文档的指南](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true)

这是[在 IIS7 中设置默认文档的指南](http://technet.microsoft.com/en-us/library/cc771439%28v=ws.10%29.aspx)

* * *

至于使启动页面转到`/mywebsite/login.aspx`有许多可能性。

如果您使用 ASP.NET 身份验证，那么您可以通过 web.config 文件进行设置，以在未经身份验证的用户访问该站点时重定向到该页面。

或者您可以使用[Url ReWrite for IIS](http://www.iis.net/download/urlrewrite) - 尽管我对它的经验有限，并且不知道您是否可以编写考虑到身份验证的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:22:50.090

您可以通过以下方式禁用[目录浏览](http://technet.microsoft.com/en-us/library/cc731109%28v=ws.10%29.aspx)来做到这一点：

打开 IIS 管理器并导航到要管理的级别。

在功能视图中，双击目录浏览。

如果目录浏览功能被禁用并且您想要启用它，请在“操作”窗格中单击启用。或者，如果启用了目录浏览功能并且您想要禁用它，请单击禁用。

# ruby-on-rails - 链元搜索结果

> ID：11899571
> 
> 赞同：2
> 
> 时间：2012-08-10T10:13:40.070
> 
> 标签：ruby-on-rails, activerecord, named-scope, meta-search, active-relation

如何链接元搜索的搜索方法？

```
@result = User.search(params[:search]).search(params[:filters]) 
```

我们可以像这样在 ActiveRecord 上调用链方法

```
User.active.male.where( age: 14..20) 
```

它的链接可以在元搜索的结果上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:22:28.110

我得到它的工作..如果你有同样的问题，你可以尝试以下。

搜索方法`meta_search`返回`MetaSearch::Search::ModelName`where`ModelName`是您的模型的名称。Meta_search`relation`为这个对象提供了一个方法。您可以调用`relation`方法来获取一个`ActiveRecord::Relation`对象，然后您可以在该对象上再次调用搜索方法。请参阅下面的代码以了解我在说什么。

```
@result = User.search(params[:search])
@search = @result.relation.search(params[:filters]) 
```

这`@result`是 的实例，`MetaSearch::Search::User`因此我们可以调用`relation`方法来获取`ActiveRecord::Relation`ie的实例

```
@result.relation 
```

然后我们可以在这个实例上再次调用 search 方法。IE

```
@result.relation.search(params[:filters]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:26:58.453

一口气搜索怎么样

```
@result = User.search  params[:search].merge(params[:filters]) 
```

# actionscript-3 - 防止刷新缓冲区

> ID：11899572
> 
> 赞同：0
> 
> 时间：2012-08-10T10:13:42.670
> 
> 标签：actionscript-3, flash, apache-flex, flex4.5, rtmpd

在 AS3 中播放完成之前，如何防止刷新缓冲区？

可能吗？

在 flv 文件真正结束前 10-11 秒清空并刷新缓冲区。

该文件在本地保存，我通过 crtmp 服务器对其进行流式传输。

由于缓冲区为空，我无法寻找最后 10 秒。如何阻止闪存在最后刷新缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:52:28.377

如果您创建自己的基于 Flash 的播放器，我认为您应该使用正确的信号处理程序来发出流结束信号。

另外，我没有遇到这个问题。只是为了测试它，使用 JWPlayer 或 FlowPlayer 看看你是否可以四处寻找。在我这边，一切都按预期进行

# ms-access - 数值超出范围错误

> ID：11899579
> 
> 赞同：0
> 
> 时间：2012-08-10T10:14:03.650
> 
> 标签：ms-access, business-objects

我正在对 MS Access 数据库进行以下计算，但得到了如屏幕截图所示的错误。我有 Business Objects 作为前端工具和数据库作为 MS Access。我已经尝试使用 Round(value,2) 围绕这个操作，但没有运气。但是字段在数据库级别设置为数字，小数位为 2..感谢您的输入

![在此处输入图像描述](../Images/2239a06651b87176029514dad4ceb327.png)

sum(Votes.Value1 * Votes.Value2) / SUM(Votes.Value2)

# http - 使用浏览器冲浪时需要一个方便的工具来捕获 HTTP 响应

> ID：11899586
> 
> 赞同：3
> 
> 时间：2012-08-10T10:14:19.977
> 
> 标签：http, google-chrome-devtools

出于上述目的，我一直在使用 Chrome 的开发者工具。我有点喜欢使用该套件，因为它允许我轻松捕获和查看 HTTP 响应（在“网络”工具 ->“响应”选项卡下）。话虽如此，它缺少我需要的功能——在响应文档中搜索的能力。为了解决这个缺点，我会将响应文档保存在一个文件中，然后在编辑器中打开它，然后我会用它来执行搜索。这种解决方案相当浪费时间。那里有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:29:37.777

尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)。它具有捕获各种网络请求的强大功能。它还具有在响应文档中搜索的能力

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-19T12:58:42.357

如果您只需要公开您的浏览器 chrome 正在管理的请求，您可以使用**Chrome**中构建的一个非常强大的工具，您可以从这里访问它：

```
chrome://net-internals/#events 
```

它记录 DNS、代理、缓存、扩展和所有事件，包括 URL_REQUEST、打开的套接字、...

# java - 如何使变量跨类运行

> ID：11899593
> 
> 赞同：0
> 
> 时间：2012-08-10T10:14:41.710
> 
> 标签：java, variables, netbeans

我正在做一个简单游戏的摇摆项目。当用户单击“如何玩”选项卡时，我会显示一个带有规则的 jframe，并且游戏的计时器停止（我在不同的类中编写了 Jframe）。当用户关闭“如何播放 Jframe”时，如何让计时器再次启动（当布尔值为真时计时器启动）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:28:32.443

如果您在主框架中创建“如何玩”-JFrame，那么您可以简单地在那里保留一个私有字段，其中包含经过的时间（我假设一个 int，包含秒数）。
然后，您可以`startClock(0)`在第一次启动时调用一个方法，并在“如何玩”按钮中添加对`pauseClock()`（这应该将当前时间保存到该`currentTime`字段）方法的调用。 然后，在“怎么玩”-JFrame中，添加一个WindowListener（使用一个Adapter，所以你不需要实现所有的方法）。这应该在代码中完成，在大型机中：`ActionListener`

```
howToFrame.addWindowListener(new WindowAdapter(){
    public void onWindowClosed(WindowEvent e){
        startClock(currentTime);
    }
}); 
```

# javascript - 使用jquery计算文本框数组中的值

> ID：11899595
> 
> 赞同：0
> 
> 时间：2012-08-10T10:14:55.823
> 
> 标签：javascript, jquery, arrays

我的表单中有一个文本框数组，我需要在输入价格和 % 时根据百分比计算成本价格，cp 是用 mouseup 事件计算的

```
sp1(name = price[] class = price)  %(class = perc)  cp1(name = cost[] class = cost)
sp2(name = price[] class = price)  %(class = perc)  cp2(name = cost[] class = cost)
sp3(name = price[] class = price)  %(class = perc)  cp3(name = cost[] class = cost)
sp4(name = price[] class = price)  %(class = perc)  cp4(name = cost[] class = cost)
sp5(name = price[] class = price)  %(class = perc)  cp5(name = cost[] class = cost) 
```

这是我的jQuery代码

```
$(function(){
var price = document.getElementsByClassName('price')[0];
var taxAmount = document.getElementsByClassName('cost')[0];
var tax = document.getElementsByClassName('perc')[0];

tax.onblur = function() {
    var taxAmount1= parseFloat(price.value) * parseFloat(tax.value) / 100;
    var tt = parseInt(price.value)-parseInt(taxAmount1);
   taxAmount.value=tt;
}   
}); 
```

但这仅计算第一个文本框我如何为整个文本框数组执行此操作，并且我正在使用数组，因为我想在 php 中提交此表单。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:31:07.247

jQuery 选择器非常适合匹配元素的数组，所以如果你写，

```
$('.perc').blur( function() {
    ...
} ); 
```

将为类“perc”的所有元素处理该事件。现在要继续计算，您需要访问具有“价格”和“成本”类的剩余字段，获取值`$theElement.val()`并进行计算。

最简单的两种方法是

1.  从导致事件的元素 $(this) 开始，浏览您的 DOM 树并搜索剩余的字段。例如，如果 price、taxAmount 和 tax 的输入字段是同级的，您可以使用对应的[jQuery 方法](http://api.jquery.com/siblings/)( `$(this).siblings('.cost').val();`)。还有其他方法可以访问父级、子级等。
2.  将三个相关输入字段的索引存储在 HTML5 数据属性中，例如`<input ... class="price" data-index="0" />`. 这样，您可以轻松地选择其他字段`var index = $(this).data('index'); var price = $('input[data-index="' + index + '"].price').val();`

您应该能够继续使用这些提示。如需更详细的阐述，请提供相关的 HTML 结构。

# php - 如果一个类不存在，你应该抛出哪个 PHP SPL 异常

> ID：11899610
> 
> 赞同：3
> 
> 时间：2012-08-10T10:15:30.370
> 
> 标签：php, exception, conventions, zend-framework2, code-standards

如果一个类不存在，你应该抛出哪个[PHP SPL 异常？](http://php.net/manual/en/spl.exceptions.php)在[ZF2 编码标准的范围内例外](http://framework.zend.com/wiki/display/ZFDEV2/Coding+Standards#CodingStandards-Exceptions)。

在标准中，它说异常应该从[PHP 的 SPL Exceptions](http://php.net/manual/en/spl.exceptions.php)之一扩展。我的第一个猜测是它是某种 RuntimeException。

[PHP SPL 异常](http://php.net/manual/en/spl.exceptions.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:57:51.327

取决于您的应用程序的上下文。

如果您将类名作为方法参数接收并且您尝试在同一方法中加载该类，那么您应该使用 InvalidArgumentException 异常。

如果您从字段值或方法接收类名，那么您应该使用 RuntimeException

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T21:15:15.327

如果自动加载不存在 PHP 会吐出 RunTimeException 对吗？所以如果你的加载器没有找到类，它应该做同样的事情。（如果你正在编写自己的自动加载器）基于 ZF2 编码标准，它应该抛出一个 RunTimeException，它位于加载器的异常命名空间内。

因此，如果您的加载程序在 My\Loader 中，那么您的运行时异常将在 My\Loader\Exception\RunTimeException 中。

# javascript - 无法将 cssFile 的 javascript 注入 UIWebView

> ID：11899613
> 
> 赞同：1
> 
> 时间：2012-08-10T10:15:37.097
> 
> 标签：javascript, objective-c, ios, uiwebview

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path;
    NSBundle *thisBundle = [NSBundle mainBundle];
    path = [thisBundle pathForResource:@"htmlScript" ofType:@"html"];
    // make a file: URL out of the path
    NSURL *instructionsURL = [NSURL fileURLWithPath:path];
    [self.m_webView loadRequest:[NSURLRequest requestWithURL:instructionsURL]];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [m_webView stringByEvaluatingJavaScriptFromString:@"var script = document.createElement('script');"  
     "script.type = 'text/javascript';"  
     "script.text = \"function changeCSS(cssFile, cssLinkIndex) { " 
     "alert('test');"
     "var oldlink = document.getElementsByTagName('link').item(cssLinkIndex);"
     "var newlink = document.createElement('link');"
     "alert('test2');"
     "newlink.setAttribute('rel', 'stylesheet');"
     "newlink.setAttribute('type', 'text/css');"
     "newlink.setAttribute('href', cssFile);"     
     "alert('test3');"
     "}\";"  
     "document.getElementsByTagName('head')[0].appendChild(script);"
     "document.getElementsByTagName('head')[0].item(0).replaceChild(script,oldlink);"
    ]; 

    [m_webView stringByEvaluatingJavaScriptFromString:@"changeCSS('Zstyle.css', 0);"];
} 
```

不能打电话`document.getElementsByTagName('head').item(0).replaceChild(script.newlink, script.oldlink);`

# hash - MurmurHash - 它是什么？

> ID：11899616
> 
> 赞同：85
> 
> 时间：2012-08-10T10:15:49.377
> 
> 标签：hash, redis, murmurhash

我一直试图对[MurmurHash](http://en.wikipedia.org/wiki/MurmurHash)所做的事情有一个高层次的理解。

我已经阅读了基本描述，但还没有找到关于何时使用它以及为什么使用它的很好的解释。我知道它非常快，但想知道更多。

我问了一个有关如何将 UUID 放入 Redis bitset 的相关问题，有人建议使用 MurmurHash [。](https://stackoverflow.com/a/11690094/98978)它有效，但我想了解风险/收益。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-10T12:25:22.263

Murmur 是一系列良好的通用散列函数，适用于非加密用途。正如 Austin Appleby 所说，MurmurHash 提供以下好处：

*   简单（就生成的汇编指令的数量而言）。
*   良好的分布（通过几乎所有键集和桶大小的卡方测试。
*   良好的[雪崩](http://en.wikipedia.org/wiki/Avalanche_effect)行为（最大偏差为 0.5%）。
*   良好的抗碰撞性（通过 Bob Jenkin 的 frog.c 酷刑测试。4 字节密钥不可能发生碰撞，没有小的（1 到 7 位）差异）。
*   在 Intel/AMD 硬件上具有出色的性能，在哈希质量和 CPU 消耗之间取得了良好的平衡。

您当然可以使用它来散列 UUID（就像任何其他高级散列函数：CityHash、Jenkins、Paul Hsieh's 等）。现在，Redis 位集限制为 4 GB 位 (512 MB)。因此，您需要将 128 位数据（UUID）减少到 32 位（散列值）。无论散列函数的质量如何，都会发生冲突。

使用像 Murmur 这样的工程散列函数将最大限度地提高分布的质量，并最大限度地减少冲突的数量，但它不能提供其他保证。

以下是一些比较通用哈希函数质量的链接：

[http://www.azillionmonkeys.com/qed/hash.html](http://www.azillionmonkeys.com/qed/hash.html)

[http://www.strchr.com/hash_functions](http://www.strchr.com/hash_functions)

~~http://blog.aggregateknowledge.com/2011/12/05/choosing-a-good-hash-function-part-1/~~

~~http://blog.aggregateknowledge.com/2011/12/29/choosing-a-good-hash-function-part-2/~~

~~http://blog.aggregateknowledge.com/2012/02/02/choosing-a-good-hash-function-part-3/~~

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2020-05-21T03:23:25.643

MurmurHash 可以返回负值，原值位 AND 与 0x7fffffff。即 value & 0x7fffffff 。当输入为正时，返回原值。当输入数字为负时，返回的正值是原始值位与 0x7fffffff 不是绝对值。注意：MurmurHash 的返回值不能固定长度。

# apache - 服务器上有多个域？

> ID：11899617
> 
> 赞同：0
> 
> 时间：2012-08-10T10:15:54.660
> 
> 标签：apache, debian

我终于找到了如何设置子域以指向我服务器上的各种目录。例如：

[http://helloworld.dev.example.com](http://helloworld.dev.example.com) => /local/www/static/helloworld

使用这个：

```
<VirtualHost *:80>
    VirtualDocumentRoot /local/www/static/%1
    ServerAlias *.dev.localhost
</VirtualHost> 
```

它有效，而且很棒，但我有一些问题。一个是我想在我的主机文件中的本地机器上创建一个指向该服务器 IP 的别名。所以当我在家时，我可以去：

`hello.dev.myserver`

但是，虽然它适用于我的主域，但当我转到该地址时它不起作用。我知道它配置正确，因为如果我去`http://myserver/`我会得到这个。

`The requested URL / was not found on this server.`

但是`http://hello.dev.myserver/`不起作用。我将主机名设置为域（显然不同）example.co.uk。可能与此有关吗？

我怀疑第二个问题将在第一个问题得到解决时得到解决，我如何托管多个域？我想托管我的朋友网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:44:35.617

我不知道您使用的是什么系统，但在 Windows 上，我在端口 80 上运行 IIS，在端口 8080 上运行 Apache，现在最后一部分有多个 wordpress 单站点和多站点（网络安装）。下面的代码有效

-

```
#truncated hosts file at c:/windows/system32/drivers/etc/hosts

127.0.0.1 localhost
#must match the 
127.0.0.1 sx.localhost twt.localhost upse.localhost veet.localhost brbox.localhost eunoia.localhost
127.0.0.1 wp.dev 
```

-

以下所有内容都是 D:\xampp\apache\conf\extra\httpd-vhosts 的一部分

```
NameVirtualHost *:8080

<VirtualHost *:8080>
    DocumentRoot "D:/xampp/htdocs"
    ServerName localhost
</VirtualHost> 
```

/这是一个正常工作的 wordpress 普通 wordpress 博客。abce.localhost 必须与上面的hosts文件匹配，只是不断添加它们，但子域多站点（网络必须始终在最后）

```
<VirtualHost *:8080>
    DocumentRoot "D:/xampp/htdocs/ki/abce/wordpress"
    ServerName abce.localhost
    <Directory "D:/xampp/htdocs/ki/abce/wordpress">
    Options Indexes FollowSymLinks ExecCGI Includes
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

/下面是如果不是 8080 问题，网络子域博客将如何工作

```
<VirtualHost *:8080>
    DocumentRoot "D:/xampp/htdocs/alllive/wordpress"
    ServerAlias *.wp.dev
    ServerName wp.dev
    <Directory "D:/xampp/htdocs/alllive/wordpress">
    Options Indexes FollowSymLinks ExecCGI Includes
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:23:00.387

您的所有主机文件所做的就是将地址解析为 IP，然后使用它。hello.dev.myserver 未转发。至于托管您朋友的站点，您需要设置一个 VirtualHost，并将他的域设置为 ServerAlias，然后将 A 记录指向您的站点。

# ios - ios 如何使用带有 sso 的 ShareKit2.0 登录 facebook？

> ID：11899618
> 
> 赞同：0
> 
> 时间：2012-08-10T10:15:58.153
> 
> 标签：ios, facebook, login, single-sign-on, sharekit

使用 ShareKit 2.0 登录 Facebook 的最佳做法是什么？

现在我正在使用：

> service = [[SHKFacebook alloc] init]; 【服务授权】；

和 ：

```
- (void)authorize:(NSArray *)permissions {
self.permissions = permissions;

[self authorizeWithFBAppAuth:YES safariAuth:NO];} 
```

使用此配置，如果安装了 fb 应用程序，当按下登录时，它会转到 fb 应用程序，并说“您已经授权此应用程序......”按确定返回我的应用程序并登录而不输入凭据。

使用`[self authorizeWithFBAppAuth:NO safariAuth:NO];`提示 credtianls 登录对话框。

PS 我已经按照 Sharekit 2.0 wiki 页面中的所有步骤进行操作。

知道如何让应用程序自动登录而不去 fb 应用程序按“确定”按钮吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:38:37.840

在 facebook.m

[self authorizeWithFBAppAuth:NO safariAuth:NO];

登录后，您可以在 shkfacebook.m 中的 - (void)fbDidLogin 中进行操作

# c# - 如何将我的 switch case 操作放在 C# 的循环中？

> ID：11899620
> 
> 赞同：1
> 
> 时间：2012-08-10T10:16:16.023
> 
> 标签：c#, loops, switch-statement

我在 C# 中做了一个 switch case 语句，它为用户提供了几个可供选择的选项。如果用户输入无效选项，我希望它再次运行（可能通过某种循环）。请帮助我，我相信这是非常基本的。

```
 static void Main(string[] args)
        {
            int a,b,ch;

            Console.WriteLine("Enter the value of a:");
            a = Convert.ToInt32(Console.ReadLine());   

            Console.WriteLine("Enter the value of b:");
            b = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Enter your choice : Addition:0  Subtraction:1  Multiplication :2 :");
            ch = Convert.ToInt32(Console.ReadLine());
            switch(ch)
            {
                case 0: {
                    Console.WriteLine("Addition value is :{0}", a + b);
                    break;
                }
                case 1:
                    {
                        Console.WriteLine("Subtraction value is :{0}", a - b);
                        break;
                    }
                case 2:
                    {
                        Console.WriteLine("Multiplication value is :{0}", a * b);
                        break;
                    }
                default:
                    {
                        Console.WriteLine("Invalid choice ");
                        goto switch(ch); 

//please tell me what should i write here, it should go to the start of the switch case
                    }
                case 4:
                    {
                         continue; 

 //please tell me what should i write here.it should come out of the loop show the result
                    }       
                    }
              }
           }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:21:38.877

所以这里的主要问题是你需要一个`while`循环来停留，并且可以选择中断。不过，这里还有一些其他有趣的事情是，您确实需要更好地验证`Type`用户的输入。例如，这两行：

```
Console.WriteLine("Enter the value of a:"); 
a = Convert.ToInt32(Console.ReadLine()); 
```

真的应该替换为：

```
while (true)
{    
    Console.WriteLine("Enter the value of a:"); 
    if (Int32.TryParse(Console.ReadLine(), out a))
    {
        break;
    }
} 
```

同样，您还有其他三个地方正在做同样的事情，所以我建议构建一个方法并调用它——它可能看起来像这样。

```
private static int GetIntegerInput(string prompt)
{
    int result;
    Console.WriteLine();

    while (true)
    {
        // THIS SHOULD OVERWRITE THE SAME PROMPT EVERY TIME
        Console.Write(prompt); 
        if (Int32.TryParse(Console.ReadLine(), out result))
        {
            break;
        }
    }
    return result;
} 
```

然后你会这样称呼它：

```
a = GetIntegerInput("Enter the value of a:"); 
```

所以现在可以对所有三个块重复使用`a`,`b`和`ch`. 这是一个完整的示例，其中包括对防止键入输入的方法的调用。

```
static void Main(string[] args) 
{ 
    int a,b,ch; 

    while (ch != 4)
    { 
        // GET READY TO ASK THE USER AGAIN
        Console.Clear();

        a = GetIntegerInput("Enter the value of a:");
        b = GetIntegerInput("Enter the value of b:");
        ch = GetIntegerInput("Enter your choice : Addition:0  Subtraction:1  Multiplication :2 :");

        switch(ch) 
        { 
            case 0:
            { 
                Console.WriteLine("Addition value is :{0}", a + b); 
                break; 
            } 
            case 1: 
            { 
                Console.WriteLine("Subtraction value is :{0}", a - b); 
                break; 
            } 
            case 2: 
            { 
                Console.WriteLine("Multiplication value is :{0}", a * b); 
                break; 
            } 
            default: 
            { 
                Console.WriteLine("Invalid choice "); 

                // THIS GOES TO THE BEGINNING OF THE LOOP
                // SO THAT YOU CAN ASK THE USER AGAIN FOR
                // MORE CORRECT INPUT
                continue;
            }
        }

        // THIS WILL BREAK YOU OUT OF THE LOOP ON A GOOD ENTRY
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:21:59.840

您没有循环 int ch 将默认为 0。因此您只会进入 case 0。您需要包含`goto case 1;`

查看[http://www.dotnetperls.com/switch](http://www.dotnetperls.com/switch)了解更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:26:55.613

您的代码很容易修复。你没有循环开始！

```
int a = 0, b = 0, ch = -1; //always initialize your variables.

do 
    Console.WriteLine("Enter the value of a:");
while(!int.TryParse(Console.ReadLine(), out a));

do 
    Console.WriteLine("Enter the value of b:");
while(!int.TryParse(Console.ReadLine(), out b));

while (ch != 4) //starts at -1 so it will surely enter the loop
{
    //Will keep asking until user enters "4", then it will exit
    do
        Console.WriteLine("Enter your choice : Addition:0  Subtraction:1  Multiplication :2 :");
    while(!int.TryParse(Console.ReadLine(), out ch));

    switch (ch)
    {
        case 0:
            {
                Console.WriteLine("Addition value is :{0}", a + b);

            } break;
        case 1:
            {
                Console.WriteLine("Subtraction value is :{0}", a - b);

            } break;
        case 2:
            {
                Console.WriteLine("Multiplication value is :{0}", a * b);

            } break;
        // case 4 is not needed, it will exit from the loop anyway
        default:
            {
                Console.WriteLine("Invalid choice");
            } break;
    }
} 
```

编辑：我添加了一个粗略的错误检查，如果用户输入“A”而不是数字，则不会让代码崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T10:29:18.673

与其让用户输入不正确的内容然后再次运行直到他们正确，为什么不给他们一组严格的选择呢？请参见下面的代码：

```
using System;

public static class Program
{
    static void Main()
    {
        const int addition = 0;
        const int subtraction = 1;
        const int multiplication = 2;

        var a = GetInt32("Enter the value of a:");  
        var b = GetInt32("Enter the value of b:");

choose:        
        var choice = GetInt32(string.Format(@"Enter your choice:
            {0}: Addition
            {1}: Subtraction
            {2}: Multiplication", addition, subtraction, multiplication));  

        switch(choice)
        {
            case addition:
                {
                    Console.WriteLine("Addition value is :{0}", a + b);
                    break;
                }
            case subtraction:
                {
                    Console.WriteLine("Subtraction value is :{0}", a - b);
                    break;
                }
            case multiplication:
                {
                    Console.WriteLine("Multiplication value is :{0}", a * b);
                    break;
                }
            default:
                {
                    Console.WriteLine("Invalid choice ");
                    goto choose; 
                }
        }
    }

    private static int GetInt32(string prompt)
    {
        while(true)
        {
            Console.WriteLine(prompt);
            var line = Console.ReadLine();
            int result;
            if(int.TryParse(line, out result))
                return result;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:41:18.523

```
 static void Main(string[] args)
    {
        int a, b, ch;

        Console.WriteLine("Enter the value of a:");
        a = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("Enter the value of b:");
        b = Convert.ToInt32(Console.ReadLine());
        start:
        Console.WriteLine("Enter your choice : Addition:0  Subtraction:1  Multiplication :2 :");

        ch = Convert.ToInt32(Console.ReadLine());

        switch (ch)
        {
            case 0: Console.WriteLine("Addition value is :{0}", a + b);
                break;

            case 1: Console.WriteLine("Subtraction value is :{0}", a - b);
                break;

            case 2: Console.WriteLine("Multiplication value is :{0}", a * b);
                break;

            default: Console.WriteLine("Invalid choice ");
                ch = 0;
                goto start;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T10:21:04.533

```
int i = 0;
while(i == 0)
{
    i == 1; // this will make it exit the loop unless case 4 happens   
    switch(ch)
    {
        case 0: {
            Console.WriteLine("Addition value is :{0}", a + b);
            break;
        }
        ...
        case 4 {
            i == 0;
            break;
        }
     }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T10:21:17.017

```
int ch = -1;
while(ch!= 0 && ch!= 1 && ch!=2)
    ch = Convert.ToInt32(Console.ReadLine());
switch(ch)   //correct input 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-10T10:25:58.157

```
 static void Main(string[] args)
    {
        int firstValue, secondValue, arithmeticOperation;
    RestartProgram:
        Console.WriteLine("Enter the value of a:");
        firstValue = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("Enter the value of b:");
        secondValue = Convert.ToInt32(Console.ReadLine());
        Console.WriteLine("Enter your choice : Addition:0  Subtraction:1  Multiplication :2 :");

        arithmeticOperation = Convert.ToInt32(Console.ReadLine());
        switch (arithmeticOperation)
        {
            case 0:
                {
                    Console.WriteLine("Addition value is :{0}", firstValue + secondValue);
                    break;
                }
            case 1:
                {
                    Console.WriteLine("Subtraction value is :{0}", firstValue - secondValue);
                    break;
                }
            case 2:
                {
                    Console.WriteLine("Multiplication value is :{0}", firstValue * secondValue);
                    break;
                }
            default:
                {
                    Console.WriteLine("Invalid choice ");
                    goto RestartProgram;
                }
        }

        Console.ReadLine();
    } 
```

这是你正在寻找的吗？

# html - HTML/CSS - 按钮 - 什么时候使用什么

> ID：11899622
> 
> 赞同：9
> 
> 时间：2012-08-10T10:16:23.583
> 
> 标签：html, css, button

关于 HTML 页面上的按钮，我有一个非常基本的问题。

众所周知，创建它们有多种可能性。可以在 上设置`display: block;`，`a`因此可以为其指定颜色、宽度和高度。但也有 HTML element`button`和 element `submit`。

什么时候用什么？例如，在创建表单时，如果我没记错的话，我*需要*一个`submit`元素。但是当我在表单之外有一个按钮时，我可以使用普通的`a`. 但是，我仍然不知道如何使用`button`.

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T10:20:13.123

**当它是一个链接**而不是表单提交`<a>`时，应该使用锚 ( )。

 **搜索引擎爬虫无法跟踪由`input`or提交`button`的链接`a`。因此，出于 SEO 的目的，最好使用锚点作为链接。

如果它是一个表单，您应该始终使用 a`button`或 an，`input`因为它们可以在按下 enter 按钮时提交表单（与链接不同），并且通常更便于访问。

我不会详细说明是否使用`button`，`input`因为已经有一篇关于此的深入帖子：

[<button> 与 <input type="button" />。使用哪个？](https://stackoverflow.com/questions/469059/button-vs-input-type-button-which-to-use)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:20:02.727

## [`<button>`](https://developer.mozilla.org/en-US/docs/HTML/Element/button)

button [( `<button>`)](https://developer.mozilla.org/en-US/docs/HTML/Element/button) HTML 元素代表一个可点击的按钮。

## [`<a>`](https://developer.mozilla.org/en-US/docs/HTML/Element/a)

HTML 锚元素[( `<a>`)](https://developer.mozilla.org/en-US/docs/HTML/Element/a)定义超链接、超链接的命名目标目标，或两者兼而有之。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:24:18.467

如果感觉将事件处理程序附加到按钮而不是锚元素是正确的，我最近一直在使用按钮作为 JavaScript 钩子。

锚标签代表一个位置，而按钮对我来说更像是一种行为。我一直使用按钮作为幻灯片导航、显示/隐藏内容和执行 ajax 请求。:D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:25:02.820

在表单中，您应该使用适当的元素。

'a' 在形式中并不合适。

例如，看看 W3C 上元素的主要目标。

因为你可以使用任何元素，并且使用 CSS 或 JS 你可以改变行为和目的......这太糟糕了。（用法，可访问性，理解）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:43:37.837

据[w3Schools.com 称](http://www.w3schools.com/html5/tag_button.asp)，

> **定义和使用**
> 
> `<button>`标签定义了一个可点击的按钮。
> 
> 您可以在`<button>`元素内放置内容，例如文本或图像。这是此元素与使用该元素创建的按钮之间的区别`<input>`。
> 
> 提示：始终指定`<button>`元素的类型属性。`<button>` 不同的浏览器对元素使用不同的默认类型。

并且 ：

> **提示和注意事项**
> 
> 注意：如果您`<button>`在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。用于`<input>`在 HTML 表单中创建按钮。

就我所见，`<button>`标签旨在用于表单**之外**和`<input type="button">`内部。

`<input type="button">`默认情况下，与`<a>`标签不同，两者都被设置为浏览器习惯的样式。**

# linux - 有希望调试我的 Python3.1 进程吗？

> ID：11899624
> 
> 赞同：2
> 
> 时间：2012-08-10T10:16:44.917
> 
> 标签：linux, debugging, python-3.x

那里。我为 Python 3.1 编写了一些行为不端的代码。如果它是一些 C 代码，我会`gdbserver`先使用，附加到进程（它涉及一个相当复杂的命令行，python 进程在标准输入上接收其输入），启动我最喜欢的 GDB 前端，然后我会准备好弄清楚为什么会出错。

但它是蟒蛇。我刚刚尝试了该`pdb`模块，但是当它关​​闭时我无法中断该过程：我得到了一个“KeyboardInterrupt”（我需要更改命令链的其余部分以便他们试一试`set_ptrace`）

我尝试了 winpdb，它产生了奇怪的错误消息

```
 Unhandled Exception (in pyshared/rpdb2.py) 
```

并在我附加到该过程之前要求输入“密码”。它给了我 winpdb 仅适用于 python2 的整体感觉。

我只是尝试`gdb __main__.py`附加到正在运行的进程，但可以想象到“格式无法识别”。

我错过的联机帮助页在哪里？

PS：哦，这是一个多线程进程，如果这很重要的话。

一个最小的例子：

```
import pdb

pdb.set_trace()  # press 'c' here to continue
while(True):
    print("hi")  # hit CTRL+C here ... will just kill the program with python 3.1

print("ooh") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:13:01.667

使用 pdb 的典型方法是使用以下命令：

```
import pdb;pdb.set_trace() 
```

你想休息的地方。如果您希望中断是有条件的，那么您只需添加条件，例如：

```
if x > 1000:
    import pdb;pdb.set_trace() 
```

不涉及 CTRL-C。

但是，如果您让 pdb 模块运行脚本，则会安装一个 CTRL-C 挂钩：

```
python3 /path/to/stdlib/pdb.py myscript.py 
```

一种更短更简单的写法是：

```
python3 -m pdb myscript.py 
```

一些 linux 发行版还会在 /usr/bin 中创建指向 pdb.py 的链接，这意味着您可以将其作为命令获取：

```
pdb3 myscript.py 
```

上面所有这三个命令都做同样的事情。然而，那个东西与 不同`pdb.set_trace()`，因为按下 CTRL-C 将进入**事后**调试。这意味着您无法单步执行代码，因为下一步将退出程序。因此，它远不如上述技术有用。然而，它可以是一种快速的方法来找出你的代码中的哪些内容花费了很多时间，当它运行缓慢时，它会允许你在正确的位置放置一个 set_trace() 来找出它*为什么*会这样减缓。

正如您在上面指出的那样，它确实在 Python 3.1 中似乎被破坏了。然而，它确实适用于 Python 3.2。

它只适用于简单的情况，但在更复杂的情况下，您需要使用分析来找到罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:25:46.360

我正在使用`pdb`这个，这对我来说很好。按下 Ctrl-C 后，您可以事后调试程序的状态，并且您将可以访问回溯中的所有堆栈帧。如果要进行实时调试，请在 Ctrl-C 发生的位置设置断点并重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:32:49.207

因此，到目前为止，我最好的做法是使用 pdb（确实），但`set_trace()`仅在发生 KeyboardInterrupt 时才调用。这似乎是 python 3.1 中唯一的工作方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:59:47.567

一种结合按需中断和python解释器调试的方法可能是使用*另一个信号*，例如SIGUSR1，让它改变一个全局“调试”标志，并`set_trace()`在调试==真时有条件地调用。

# python - Debian Python 2.5 包括来自 AlchemyAPI 的模块

> ID：11899630
> 
> 赞同：2
> 
> 时间：2012-08-10T10:17:26.257
> 
> 标签：python, installation, alchemyapi

尝试安装**AlchemyAPI.py-2.5**

无法运行示例。

Debian 6.0

### python示例/sentiment.py：

```
Traceback (most recent call last):
  File "example/sentiment.py", line 4, in <module>
    import AlchemyAPI
ImportError: No module named AlchemyAPI 
```

如何安装该模块？在自述文件中说：

> 要安装此模块，请将所需的 AlchemyAPI.py 文件复制到所需的 Python 导入目录中。

如果我在 debian 上运行，我想要的目录是什么？

非常混乱，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:42:50.730

您需要将其重命名`AlchemyAPI.py-2.5`为`AlchemyAPI.py`可导入，并将其添加到 PYTHONPATH（其中包括 Python 包目录和工作目录）。

在您的示例中，您可以将文件复制到：`example/AlchemyAPI.py`.

# php - 动态长下载？

> ID：11899634
> 
> 赞同：0
> 
> 时间：2012-08-10T10:17:51.593
> 
> 标签：php, dynamic, download

所以我在一些地方和网站上看到过，文件下载似乎没有指定 Content-Length，所以下载会继续，直到服务器停止发送数据。

现在我想知道当我通过 PHP 脚本发送动态生成的文件以供下载时，如何使用 PHP 实现类似的功能。

我做了一些研究，但实际上找不到任何东西。

（作为一个具体的**例子**：我想让用户下载一个 ZIP 文件，而它仍在构建中。）

那么，如何在服务器端不知道下载时间长的情况下创建动态长下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:48:58.370

如前所述，您可以跳过发送`Content-Length`标头。这个功能可以派上用场：

```
function force_download($file){
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    //header('Content-Length: ' . filesize($file)); <--- Don't send length
    readfile($file);
} 
```

# windows-8 - Windows RT 应用程序允许的文件扩展名

> ID：11899635
> 
> 赞同：0
> 
> 时间：2012-08-10T10:17:51.233
> 
> 标签：windows-8, microsoft-metro

对于我用 c# 编写的 Windows 运行时 Metro-Application，我想使用自己的文件格式。对于这种文件格式，我想使用自己的文件扩展名。在包清单中，我已将所需的扩展名声明为“文件类型关联”并且一切正常。

我的问题是，分配/使用文件扩展名是否有一些规则或限制。我显然不会使用常用的文件扩展名，例如“.exe”、“.cab”或“.docx”。但是，关于如何构建文件扩展名（3 个字符、4 个字符……）以及永远不应使用哪些文件扩展名，是否有任何可访问的指南、建议或规则。或者甚至是否存在必须注册文件类型以便稍后在应用商店中接受的 Microsoft 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:01:07.317

以下是有关文件关联的一些通用[最佳实践](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144156%28v=vs.85%29.aspx#web_service_signup)。一个相关的部分...

> 不要使用短文件扩展名
> 
> 长文件扩展名具有以下优点：
> 
> 短扩展的有限长度使它们容易发生扩展冲突。当使用相同的扩展名对多种文件类型进行分类时，会发生扩展名冲突。使用长扩展显着降低了冲突的机会。短文件名往往有点神秘。长扩展往往更有意义，因为可以在扩展中嵌入附加信息。

对于 Metro 风格的应用程序，我能找到的唯一限制是在[这个文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh452684.aspx)中......

> 重要提示：这是一个按字母顺序排列的文件类型名称列表，您不能将它们输入到包清单中，因为它们要么被保留要么被禁止：Accountpicture-ms、Appx、application、Appref-ms、Bat、Cer、Chm、Cmd、Com、 Cpl, crt, dll, drv, Exe, fon, gadget, Hlp, Hta, Inf,Ins, jse, lnk, Msi, Msp, ocx, pif, Ps1, Reg, Scf, Scr, Shb, Shs, Sys, ttf,网址、Vbe、Vbs、Ws、Wsc、Wsf、Wsh。

# jquery-mobile - 通过 $.ajax 下载和使用图像

> ID：11899636
> 
> 赞同：2
> 
> 时间：2012-08-10T10:17:58.700
> 
> 标签：jquery-mobile

我不知道它是否可能，但我的服务器上有一个图像，我想通过 $.ajax 函数下载并显示在我的 jquery 移动应用程序中。这是我正在使用的代码：

```
$.ajax({
type: "GET",
url: $url,
dataType: "jpeg",
async: true,
timeout: 90000,
success: function($data)
    {   
 console.log("success");

},
error: function()
   {
console.log("failure");
}

}); 
```

我收到一个错误，不确定这是否是正确的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:48:50.973

用 AJAX 下载图像没有多大意义。您可能只需要设置`src`ìmg 的属性`element`：

```
<div id="example">Example</div>
<script>
  var url = 'http://lorempixel.com/output/abstract-q-c-64-48-8.jpg'; // URL of the image
  $('#example').click(function() {
    $('<img>') // create a new image element
       .attr('src', url) // set src
       .appendTo(this);
  });
</script>​ 
```

工作示例：http: [//jsfiddle.net/zrbRM/](http://jsfiddle.net/zrbRM/)

# database - 数据库同步

> ID：11899638
> 
> 赞同：0
> 
> 时间：2012-08-10T10:18:09.427
> 
> 标签：database, delphi, delphi-2006

问题是在一天结束时同步数据。

我怎样才能做到这一点。

我怎样才能做到这一点？告诉我一些与delphi或更高版本相关的事情并使用互联网。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:55:03.070

您可以继续从应用程序更新本地数据库，然后使用单独的服务在远程位置执行数据库复制。看看[SymmetricDS](http://www.symmetricds.org/ "开源数据库复制")开源数据库复制。它实际上起源于 POS 实现。它可以从 MySQL 捕获数据更改，并将数据异步同步到另一个数据库。您可以在同步数据时控制计划，这可能是在一天结束时。它包括一个冲突管理器，用于检测和解决任何更改冲突。如果您需要帮助，还有一个名为[SymmetricDS Pro](http://www.jumpmind.com/products/symmetricds "企业数据库复制")的商业版本，提供开发和生产支持。

# rally - 如何在 Rally 中共享自定义应用程序？

> ID：11899639
> 
> 赞同：2
> 
> 时间：2012-08-10T10:18:14.083
> 
> 标签：rally

我为我的公司创建了自定义应用程序。如何在不复制和粘贴的情况下与公司的其他部门共享此应用程序？

我可以将我的自定义应用程序添加到本地 Rally 应用程序目录吗？

我找到了如何使用我的应用程序创建自定义页面并共享它的信息，但这不是我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:56:02.887

这是一个很好的问题。工作区管理员现在可以与工作区中的其他用户共享自定义页面。

本地目录的想法是一个很棒的想法，我们已经讨论过几次实现类似的东西。我鼓励您在 Rally Ideas 上为这个想法投票：http: //ideas.rallydev.com/ct/ct_a_view_idea.bix?idea_id= [6C33CB02-4478-45A2-9990-6F19F859D799](http://ideas.rallydev.com/ct/ct_a_view_idea.bix?idea_id=6C33CB02-4478-45A2-9990-6F19F859D799)

# mysql - 在mysql中选择动态列

> ID：11899647
> 
> 赞同：5
> 
> 时间：2012-08-10T10:18:37.677
> 
> 标签：mysql, sql, pivot

是否可以遍历这样的表：

```
mysql> select * from `stackoverflow`.`Results`;
+--------------+---------+-------------+--------+
| 身份证 | 类型 | CRITERIA_ID | 结果 |
+--------------+---------+-------------+--------+
| 1 | 汽车 | 环境 | 1 |
| 2 | 汽车 | 气| |
| 3 | 汽车 | 年龄 | |
| 4 | 自行车 | 环境 | 1 |
| 5 | 自行车 | 气| |
| 6 | 自行车 | 年龄 | 1 |
| 7 | 巴士 | 环境 | 1 |
| 8 | 巴士 | 气| 1 |
| 9 | 巴士 | 年龄 | 1 |
+--------------+---------+-------------+--------+
一组 9 行（0.00 秒）

```

进入这个：

```
+-----+---+-----+------+
| 类型 | 环境 | 气| 年龄 |
+-----+---+-----+------+
| 汽车 | 1 | | |
| 自行车 | 1 | | 1 |
| 巴士 | 1 | 1 | 1 |
+-----+---+-----+------+

```

目的是选择所有`CRITERIA_ID`s 并将它们用作列。作为行，我喜欢使用所有的`TYPE`s 。

*   所有标准：`SELECT distinct(CRITERIA_ID) FROM stackoverflow.Results;`
*   所有类型`SELECT distinct(TYPE) FROM stackoverflow.Results;`

但是如何将它们组合成一个视图或smth。像这样？

如果你喜欢玩数据。这是生成表的脚本：

```
CREATE SCHEMA `stackoverflow`;
CREATE TABLE `stackoverflow`.`Results` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `TYPE` varchar(50) NOT NULL,
  `CRITERIA_ID` varchar(5) NOT NULL,
  `RESULT` bit(1) NOT NULL,
  PRIMARY KEY (`ID`)
) 
ENGINE=InnoDB;

INSERT INTO `stackoverflow`.`Results`
(
 `ID`,
 `TYPE`,
 `CRITERIA_ID`,
 `RESULT`
)
VALUES
( 1, "car", env, true ),
( 2, "car", gas, false ),
( 3, "car", age, false ),
( 4, "bike", env, true ),
( 5, "bike", gas, false ),
( 6, "bike", age, true ),
( 7, "bus", env, true ),
( 8, "bus", gas, true ),
( 9, "bus", age, true ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T10:33:14.170

不幸的是，MySQL 没有一个`PIVOT`基本上是你想要做的功能。因此，您需要使用带有`CASE`语句的聚合函数：

```
SELECT type,
  sum(case when criteria_id = 'env' then result end) env,
  sum(case when criteria_id = 'gas' then result end) gas,
  sum(case when criteria_id = 'age' then result end) age
FROM results
group by type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9622c/2)

现在，如果您想动态执行此操作，这意味着您事先不知道要转置的列，那么您应该查看以下文章：

[动态数据透视表（将行转换为列）](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

您的代码如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(IF(CRITERIA_ID = ''',
      CRITERIA_ID,
      ''', RESULT, NULL)) AS ',
      CRITERIA_ID
    )
  ) INTO @sql
FROM
  Results;
SET @sql = CONCAT('SELECT type, ', @sql, ' FROM Results GROUP BY type');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9622c/4)

# python - 类级装饰器

> ID：11899648
> 
> 赞同：1
> 
> 时间：2012-08-10T10:18:42.700
> 
> 标签：python, class, decorator

我正在尝试使用以下代码进行一种类型处理函数注册：

```
types = {}
def type_handler(name):
    def wrapper(f):
        types[name] = f
        return f
    return wrapper

@type_handler('a')
def handle_a(a):
    ...

@type_handler('b'):
def handle_b(b):
    ...

def handle(x):
    types[x.name](x) 
```

这很好用，但现在我希望它在课堂上工作。
我试过这个：

```
class MyClass(object):

    types = {}
    def type_handler(name):
        def wrapper(f):
            types[name] = f ## global name 'types' is undefined
            return f
        return wrapper

    @type_handler('a')
    def handle_a(self, a):
        ...

    @type_handler('b'):
    def handle_b(self, b):
        ...

    def handle(self, x):
        self.types[x.name](self, x) 
```

但它说`global name 'types' is undefined`。
我尝试将其更改为

```
 def type_handler(name):
        def wrapper(f):
            MyClass.types[name] = f ## global name 'MyClass' is undefined
            return f
        return wrapper 
```

但现在它说`global name 'MyClass' is undefined`。
我能做些什么来完成这项工作？

我知道我可以做类似的事情：

```
def handle(self, x):
    self.__getattribute__('handle_%s' % x.name)(self, x) 
```

但我更喜欢函数注册而不是基于名称的查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:51:53.413

我同意斯文·马纳赫的观点。你应该使用“更少的魔法”。但是，这是一个快速修复：

```
#decorator is declared outside of class and type dict is passed in as an argument
def type_handler(name, type_dict):
    def wrapper(f):
        type_dict[name] = f
        return f
    return wrapper

class MyClass(object):

    types = {}

    @type_handler('a', types)
    def foo_a(self, a):
        pass

    @type_handler('b', types)
    def foo_b(self, b):
        pass 
```

**版本 2**

这个使用一个类作为装饰器：

```
class TypeHandler(object):
    def __init__(self, type_dict):
        self.types = type_dict

    def __call__(self, name):
        def wrapper(f):
            self.types[name] = f
            return f
        return wrapper

class MyClass(object):
    types = {}
    thandle = TypeHandler(types)

    @thandle('a')
    def foo_a(self, a):
        pass 
```

# javascript - 上传图片，重新定位，保存图片？

> ID：11899652
> 
> 赞同：2
> 
> 时间：2012-08-10T10:19:30.310
> 
> 标签：javascript, jquery, image, drag-and-drop

我正在寻找一个脚本，我可以在其中上传图像并将其显示在容器中。然后我可以拖动图像，因为它最适合这个容器。之后应该保存图像。找了2个小时，一无所获。有许多用于裁剪的插件，但没有一个只需要在容器内移动或重新定位上传的图像并保存即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:23:48.377

[jQuery UI Draggables](http://jqueryui.com/demos/draggable/#constrain-movement)支持`containment`属性，用于设置可以拖动元素的容器。

上传图像，将其加载到 div 中，将该 div 用于`containment`，然后在用户单击保存后保存位置？

您是否遇到了问题的特定部分？

# c - 当 Switch case 输入错误时无限循环

> ID：11899653
> 
> 赞同：0
> 
> 时间：2012-08-10T10:19:31.950
> 
> 标签：c, switch-statement

我有一个非常简单的代码段，其中有一个带有 switch case 的 do while 循环，如下所示：

```
do {
    printf("Enter Choice\n");
    scanf("%d", &choice);
    switch(choice) {
          case 1: printf("1 selected");
                  break;
          case 2: printf("exit");
                  break;
          default: printf("wrong input");
                  break;
    }
} while (choice != 2); 
```

在这段代码中，如果我不小心输入了一个字符而不是一个数字，程序就会无限期地陷入混乱，甚至不接受输入。我知道如果我插入这可以纠正

```
if(isdigit(choice)) 
```

在进入开关盒之前。但我的问题是为什么它首先会发生。

它不应该转到默认情况并再次要求输入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:22:36.757

如果`scanf`无法将输入与格式说明符匹配，则将其留在缓冲区中。所以下一次它仍然不会匹配等等。换句话说，它不吃它无法匹配的东西。您必须检查 的返回值`scanf`，即匹配项的数量，以确保输入是预期的。

或者，要跳过不需要的东西，您可以尝试（未经测试）：

```
scanf("%*[^0-9]%d", &choice); 
```

在尝试读取十进制整数之前，这应该丢弃任何不是数字的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:24:22.477

请查看[scanf](http://linux.die.net/man/3/scanf)手册页。

如果在这种情况下输入中的下一个东西不是数字，它不会消耗它。

您需要检查返回值`scanf`，如果它为零，请使用下一个字符并重试（或者可能直到到达行尾）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T06:08:27.057

我试过 if(isdigit(choice)) 但问题仍然存在。如果输入的数据类型与 scanf 中的格式说明符不匹配，则此问题与缓冲区有关，则输入不会被 scanf 消耗并保留在缓冲区中。

为了解决这个问题，我尝试了 fflush(stdin)，它适用于 windows 中的 c 编译器，但不适用于 linux，对不起，我不知道 fflush(stdin) 不适用于 linux 的原因。

我还尝试了在 Windows 和 linux 上运行良好的 getchar()，我将 getchar() 放在 loop 内的语句末尾。

```
 do 
    {
       printf("Enter Choice\n");
    scanf("%d", &choice);
        switch(choice) {
              case 1: printf("1 selected");
                      break;
              case 2: printf("exit");
                      break;
              default: printf("wrong input");
                      break;
        }

    getchar();
    } while (choice != 2); 
```

# javascript - 获取包含 div 的 ID 以传入 jeditable jquery

> ID：11899659
> 
> 赞同：1
> 
> 时间：2012-08-10T10:20:00.513
> 
> 标签：javascript, jquery, parent, jeditable

我正在使用 jeditable 更新页面上的多个项目，但是可以在一个页面上修改许多不同的记录，因此我需要将每条记录的唯一 ID 与更新一起传递。每条记录都包装在自己的 div 中，id 为记录 id。

我已经设法让 Jquery 工作，但是它获得了第一个 Div 的 ID，而不是包含的 div。

这是简化的html

```
<div id="outer">
 <div id="left"> 
  <div id="3">
    <p><strong>Web ID: </strong>3</p>
    <p><strong>Record Date type (008): </strong><span class="editable_select" id="0085" style="display: inline">eng</span></p>
    <p><strong>Collection ID (035): </strong>(WlAbNL)1002</p>
    <p><strong>Date Created (260): </strong><span class="click" style="display: inline" id="260">1910 -</span></p>
  </div>
 </div>
</div> 
```

这是有效的 Jquery，但选择了“外部”而不是“3”。我认为问题出在我的 var rec 定义中？

```
<script id="source" language="javascript" type="text/javascript">
 $(document).ready(function() {
   var recid = $('.click').closest('div').attr('id');

     $('.click').editable('ajax/save.php', {     
         cancel    : 'Cancel',
         submit    : 'OK',
         indicator : 'Saving...',
         style  : "inherit",
         tooltip   : 'Click to change...',
         submitdata : function() {
              return {rid : recid }; 
            }
     });
     $('.edit_area').editable('ajax/save.php', { 
         submitdata : {record: "<?php echo $rec_id; ?>"},
         type      : 'textarea',
         cancel    : 'Cancel',
         submit    : 'OK',
         indicator : '<img src="img/indicator.gif">',
         tooltip   : 'Click to change...'
     });
     $(".editable_select").editable('ajax_save.php', { 
            submitdata : {record: "<?php echo $rec_id; ?>"},
            indicator : '<img src="img/indicator.gif">',
            data   : "{'Eng':'Eng','Cym':'Cym'}",
            type   : "select",
            submit : "OK",
            style  : "inherit",
    });
 }); 
```

更新 -

下面得到了正确的 ID，我不得不改变 VAR 来使用一个函数。

我想到了。而不是仅仅试图设置 reci，我需要关注这个函数，这样它就可以工作了。

```
var recid;
   $('.click').focus(function() {
      recid = $(this).closest('div').attr('id');
   }); 
```

但是，由于我有三个触发此事件的类（click、edit_area、editable_select），是否可以将“.click”替换为其他内容，以便它适用于使用它的任何可编辑项？还是我需要复制以上内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:23:04.127

为什么不尝试使用`parent()`, 而不是在`closest()`这里：

```
var recid = $('.click').parent('div').attr('id'); 
```

看看结果如何。

# iphone - 如何使注释字幕从标题菜单中消失？

> ID：11899665
> 
> 赞同：0
> 
> 时间：2012-08-10T10:20:16.867
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我正在为注释引脚添加字幕，但不想用引脚显示。我只是将它用于编码目的。我该如何隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:01:20.893

如果`subtitle`您的注释类的属性设置为非空值，它将显示在标注中。

如果您需要使用注释存储数据但不将其显示在标注中，请**为其创建一个单独的属性（未命名为`title`、`subtitle`或`coordinate`）**。

留空`subtitle`或只是不在注释类中实现该属性（它是可选的）。

# windows - 远程桌面端点 windows azure 云 microsoft

> ID：11899666
> 
> 赞同：1
> 
> 时间：2012-08-10T10:20:19.360
> 
> 标签：windows, azure, cloud, virtual-machine

我有一个带有 microsoft windows azure 的远程桌面帐户端点。如何创建另一个远程桌面帐户以让我的开发人员在 VM 中工作？我不想向他提供我的管理员远程桌面帐户并在他完成后删除他的帐户或更改密码。我当前的一个正在工作，我可以远程访问我的云虚拟机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:31:06.163

如果您正在使用托管服务，您可以在启动任务中添加以下内容，如果您使用虚拟机，您可以简单地在 VM 上执行它：

```
net user someUser Pa$$w0rd /add
net localgroup "Remote Desktop Users" someUser /add 
```

这会添加一个新用户并将该用户添加到远程桌面用户，从而允许通过 RDP 进行访问。

# java - 在 Java 中更改字符串值

> ID：11899667
> 
> 赞同：1
> 
> 时间：2012-08-10T10:20:19.483
> 
> 标签：java, string, immutability

我有

```
String newStr = "previous" 
```

一段时间后，我想将我的字符串更改为`next`. 现在我可以做

```
newStr=getNewString(); // Say getNewString return `next` 
```

Arent 字符串应该是不可变的。

我还有其他方法可以实现吗？谢谢。

**编辑**：`neww`取而代之`new`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T10:22:25.927

> Arent 字符串应该是不可变的。

字符串是不可变的。

对 String 的引用不必是不可变的。

```
String s = "hello";
s = "World"; // the reference s changes, not the String.

final String t = "Hi"; // immutable reference
t = "there"; // won't compile.

// immutable reference to a mutable object.
final StringBuilder sb = new StringBuilder();
sb.append("Hi"); // changes the StringBuilder but not the reference to it.
sb = null; // won't compile. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:24:26.857

字符串是不可变的。您只更改字符串引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:22:17.787

Java 中的字符串是不可变的。您要更改的是对字符串的引用，而不是字符串本身。

# c# - 替换字符串中的多个字符，最快的方法？

> ID：11899668
> 
> 赞同：29
> 
> 时间：2012-08-10T10:20:28.843
> 
> 标签：c#, regex, string, performance, replace

我正在将一些具有多个`string`字段的记录从旧数据库导入到新数据库。它似乎很慢，我怀疑这是因为我这样做：

```
foreach (var oldObj in oldDB)
{
    NewObject newObj = new NewObject();
    newObj.Name = oldObj.Name.Trim().Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š')
        .Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć')
        .Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
    newObj.Surname = oldObj.Surname.Trim().Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š')
        .Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć')
        .Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
    newObj.Address = oldObj.Address.Trim().Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š')
        .Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć')
        .Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
    newObj.Note = oldObj.Note.Trim().Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š')
        .Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć')
        .Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
    /*
    ... some processing ...
    */
} 
```

现在，我通过网络阅读了一些帖子和文章，在那里我看到了许多不同的想法。有人说如果我使用 regex 会更好`MatchEvaluator`，有人说最好保持原样。

虽然为自己做一个基准案例可能对我来说更容易，但我决定在这里问一个问题，以防其他人一直在想同样的问题，或者有人提前知道。

那么在 C# 中执行此操作的最快方法是什么？

*编辑*

我已经在[这里](https://stackoverflow.com/questions/11899668/replacing-multiple-characters-in-a-string-the-fastest-way/11900932#11900932)发布了基准。乍一看，理查德的方式可能是最快的。然而，由于错误的 Regex 模式，他的方式和 Marc 的方式都会做任何事情。改正图案后

```
@"\^@\[\]`\}~\{\\" 
```

到

```
@"\^|@|\[|\]|`|\}|~|\{|\\" 
```

似乎使用链式 .Replace() 调用的旧方法毕竟是最快的

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-10T11:42:38.867

感谢您的投入。我写了一个快速而肮脏的基准来测试你的输入。我已经用 500.000 次迭代测试了解析 4 个字符串并完成了 4 次传递。结果如下：

```
*** 通过 1
旧的 (Chained String.Replace()) 方式在 814 毫秒内完成
logicnp (ToCharArray) 方式在 916 毫秒内完成
oleksii (StringBuilder) 方式在 943 毫秒内完成
André Christoffer Andersen (Lambda w/ Aggregate) 方式在 2551 毫秒内完成
Richard（带 MatchEvaluator 的正则表达式）方式在 215 毫秒内完成
Marc Gravell（静态正则表达式）方式在 1008 毫秒内完成

*** 通过 2
旧的（Chained String.Replace()）方式在 786 毫秒内完成
logicnp (ToCharArray) 方式在 920 毫秒内完成
oleksii (StringBuilder) 方式在 905 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 2515 毫秒内完成
Richard（带 MatchEvaluator 的正则表达式）方式在 217 毫秒内完成
Marc Gravell（静态正则表达式）方式在 1025 毫秒内完成

*** 通过 3
旧的（Chained String.Replace()）方式在 775 毫秒内完成
logicnp (ToCharArray) 方式在 903 毫秒内完成
oleksii (StringBuilder) 方式在 931 毫秒内完成
André Christoffer Andersen (Lambda w/ Aggregate) 方式在 2529 毫秒内完成
Richard（带 MatchEvaluator 的正则表达式）方式在 214 毫秒内完成
Marc Gravell（静态正则表达式）方式在 1022 毫秒内完成

*** 通过 4
旧的（Chained String.Replace()）方式在 799 毫秒内完成
logicnp (ToCharArray) 方式在 908 毫秒内完成
oleksii (StringBuilder) 方式在 938 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 2592 毫秒内完成
Richard（带 MatchEvaluator 的正则表达式）方式在 225 毫秒内完成
Marc Gravell（静态正则表达式）方式在 1050 毫秒内完成

```

此基准的代码如下。请查看代码并确认@Richard 获得了最快的方法。请注意，我没有检查输出是否正确，我认为它们是正确的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Text.RegularExpressions;

namespace StringReplaceTest
{
    class Program
    {
        static string test1 = "A^@[BCD";
        static string test2 = "E]FGH\\";
        static string test3 = "ijk`l}m";
        static string test4 = "nopq~{r";

        static readonly Dictionary<char, string> repl =
            new Dictionary<char, string> 
            { 
                {'^', "Č"}, {'@', "Ž"}, {'[', "Š"}, {']', "Ć"}, {'`', "ž"}, {'}', "ć"}, {'~', "č"}, {'{', "š"}, {'\\', "Đ"} 
            };

        static readonly Regex replaceRegex;

        static Program() // static initializer 
        {
            StringBuilder pattern = new StringBuilder().Append('[');
            foreach (var key in repl.Keys)
                pattern.Append(Regex.Escape(key.ToString()));
            pattern.Append(']');
            replaceRegex = new Regex(pattern.ToString(), RegexOptions.Compiled);
        }

        public static string Sanitize(string input)
        {
            return replaceRegex.Replace(input, match =>
            {
                return repl[match.Value[0]];
            });
        } 

        static string DoGeneralReplace(string input) 
        { 
            var sb = new StringBuilder(input);
            return sb.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ').ToString(); 
        }

        //Method for replacing chars with a mapping 
        static string Replace(string input, IDictionary<char, char> replacementMap)
        {
            return replacementMap.Keys
                .Aggregate(input, (current, oldChar)
                    => current.Replace(oldChar, replacementMap[oldChar]));
        } 

        static void Main(string[] args)
        {
            for (int i = 1; i < 5; i++)
                DoIt(i);
        }

        static void DoIt(int n)
        {
            Stopwatch sw = new Stopwatch();
            int idx = 0;

            Console.WriteLine("*** Pass " + n.ToString());
            // old way
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = test1.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result2 = test2.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result3 = test3.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result4 = test4.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
            }
            sw.Stop();
            Console.WriteLine("Old (Chained String.Replace()) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            Dictionary<char, char> replacements = new Dictionary<char, char>();
            replacements.Add('^', 'Č');
            replacements.Add('@', 'Ž');
            replacements.Add('[', 'Š');
            replacements.Add(']', 'Ć');
            replacements.Add('`', 'ž');
            replacements.Add('}', 'ć');
            replacements.Add('~', 'č');
            replacements.Add('{', 'š');
            replacements.Add('\\', 'Đ');

            // logicnp way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                char[] charArray1 = test1.ToCharArray();
                for (int i = 0; i < charArray1.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test1[i], out newChar))
                        charArray1[i] = newChar;
                }
                string result1 = new string(charArray1);

                char[] charArray2 = test2.ToCharArray();
                for (int i = 0; i < charArray2.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test2[i], out newChar))
                        charArray2[i] = newChar;
                }
                string result2 = new string(charArray2);

                char[] charArray3 = test3.ToCharArray();
                for (int i = 0; i < charArray3.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test3[i], out newChar))
                        charArray3[i] = newChar;
                }
                string result3 = new string(charArray3);

                char[] charArray4 = test4.ToCharArray();
                for (int i = 0; i < charArray4.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test4[i], out newChar))
                        charArray4[i] = newChar;
                }
                string result4 = new string(charArray4);
            }
            sw.Stop();
            Console.WriteLine("logicnp (ToCharArray) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // oleksii way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = DoGeneralReplace(test1);
                string result2 = DoGeneralReplace(test2);
                string result3 = DoGeneralReplace(test3);
                string result4 = DoGeneralReplace(test4);
            }
            sw.Stop();
            Console.WriteLine("oleksii (StringBuilder) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // André Christoffer Andersen way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = Replace(test1, replacements);
                string result2 = Replace(test2, replacements);
                string result3 = Replace(test3, replacements);
                string result4 = Replace(test4, replacements);
            }
            sw.Stop();
            Console.WriteLine("André Christoffer Andersen (Lambda w/ Aggregate) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // Richard way
            sw.Reset();
            sw.Start();
            Regex reg = new Regex(@"\^|@|\[|\]|`|\}|~|\{|\\");
            MatchEvaluator eval = match =>
            {
                switch (match.Value)
                {
                    case "^": return "Č";
                    case "@": return "Ž";
                    case "[": return "Š";
                    case "]": return "Ć";
                    case "`": return "ž";
                    case "}": return "ć";
                    case "~": return "č";
                    case "{": return "š";
                    case "\\": return "Đ";
                    default: throw new Exception("Unexpected match!");
                }
            };
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = reg.Replace(test1, eval);
                string result2 = reg.Replace(test2, eval);
                string result3 = reg.Replace(test3, eval);
                string result4 = reg.Replace(test4, eval);
            }
            sw.Stop();
            Console.WriteLine("Richard (Regex w/ MatchEvaluator) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // Marc Gravell way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = Sanitize(test1);
                string result2 = Sanitize(test2);
                string result3 = Sanitize(test3);
                string result4 = Sanitize(test4);
            }
            sw.Stop();
            Console.WriteLine("Marc Gravell (Static Regex) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms\n");
        }
    }
} 
```

**编辑 2020 年 6 月**
由于此问答仍然受到欢迎，我想使用带有 IndexOfAny 的 StringBuilder 使用来自 user1664043 的额外输入来更新它，这次是使用 .NET Core 3.1 编译的，结果如下：

```
*** 通过 1
旧的 (Chained String.Replace()) 方式在 199 毫秒内完成
logicnp (ToCharArray) 方式在 296 毫秒内完成
oleksii (StringBuilder) 方式在 416 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 870 毫秒内完成
Richard (Regex w/ MatchEvaluator) 方式在 1722 毫秒内完成
Marc Gravell（静态正则表达式）方式在 395 毫秒内完成
user1664043 (StringBuilder w/IndexOfAny) 方式在 459 毫秒内完成

*** 通过 2
旧的（Chained String.Replace()）方式在 215 毫秒内完成
logicnp (ToCharArray) 方式在 239 毫秒内完成
oleksii (StringBuilder) 方式在 341 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 758 毫秒内完成
理查德（Regex w/ MatchEvaluator）方式在 1591 毫秒内完成
Marc Gravell（静态正则表达式）方式在 354 毫秒内完成
user1664043 (StringBuilder w/IndexOfAny) 方式在 426 毫秒内完成

*** 通过 3
旧的 (Chained String.Replace()) 方式在 199 毫秒内完成
logicnp (ToCharArray) 方式在 265 毫秒内完成
oleksii (StringBuilder) 方式在 337 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 817 毫秒内完成
Richard (Regex w/ MatchEvaluator) 方式在 1666 毫秒内完成
Marc Gravell（静态正则表达式）方式在 373 毫秒内完成
user1664043 (StringBuilder w/IndexOfAny) 方式在 412 毫秒内完成

*** 通过 4
旧的 (Chained String.Replace()) 方式在 199 毫秒内完成
logicnp (ToCharArray) 方式在 230 毫秒内完成
oleksii (StringBuilder) 方式在 324 毫秒内完成
André Christoffer Andersen（Lambda w/Aggregate）方式在 791 毫秒内完成
Richard (Regex w/ MatchEvaluator) 方式在 1699 毫秒内完成
Marc Gravell（静态正则表达式）方式在 359 毫秒内完成
user1664043 (StringBuilder w/IndexOfAny) 方式在 413 毫秒内完成

```

和更新的代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace Test.StringReplace
{
    class Program
    {
        static string test1 = "A^@[BCD";
        static string test2 = "E]FGH\\";
        static string test3 = "ijk`l}m";
        static string test4 = "nopq~{r";

        static readonly Dictionary<char, string> repl =
            new Dictionary<char, string>
            {
                {'^', "Č"}, {'@', "Ž"}, {'[', "Š"}, {']', "Ć"}, {'`', "ž"}, {'}', "ć"}, {'~', "č"}, {'{', "š"}, {'\\', "Đ"}
            };

        static readonly Regex replaceRegex;

        static readonly char[] badChars = new char[] { '^', '@', '[', ']', '`', '}', '~', '{', '\\' };

        static readonly char[] replacementChars = new char[] { 'Č', 'Ž', 'Š', 'Ć', 'ž', 'ć', 'č', 'š', 'Đ' };

        static Program() // static initializer 
        {
            StringBuilder pattern = new StringBuilder().Append('[');
            foreach (var key in repl.Keys)
                pattern.Append(Regex.Escape(key.ToString()));
            pattern.Append(']');
            replaceRegex = new Regex(pattern.ToString(), RegexOptions.Compiled);
        }

        public static string Sanitize(string input)
        {
            return replaceRegex.Replace(input, match =>
            {
                return repl[match.Value[0]];
            });
        }

        static string DoGeneralReplace(string input)
        {
            var sb = new StringBuilder(input);
            return sb.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ').ToString();
        }

        //Method for replacing chars with a mapping 
        static string Replace(string input, IDictionary<char, char> replacementMap)
        {
            return replacementMap.Keys
                .Aggregate(input, (current, oldChar)
                    => current.Replace(oldChar, replacementMap[oldChar]));
        }

        static string ReplaceCharsWithIndexOfAny(string sIn)
        {
            int replChar = sIn.IndexOfAny(badChars);
            if (replChar < 0)
                return sIn;

            // Don't even bother making a copy unless you know you have something to swap
            StringBuilder sb = new StringBuilder(sIn, 0, replChar, sIn.Length + 10);
            while (replChar >= 0 && replChar < sIn.Length)
            {
                var c = replacementChars[replChar];
                sb.Append(c);

                ////// This approach lets you swap a char for a string or to remove some
                ////// If you had a straight char for char swap, you could just have your repl chars in an array with the same ordinals and do it all in 2 lines matching the ordinals.
                ////c = c switch
                ////{
                ////    ////case "^":
                ////    ////    c = "Č";
                ////    ////    ...
                ////    '\ufeff' => null,
                ////    _ => replacementChars[replChar],
                ////};

                ////if (c != null)
                ////{
                ////    sb.Append(c);
                ////}

                replChar++; // skip over what we just replaced
                if (replChar < sIn.Length)
                {
                    int nextRepChar = sIn.IndexOfAny(badChars, replChar);
                    sb.Append(sIn, replChar, (nextRepChar > 0 ? nextRepChar : sIn.Length) - replChar);
                    replChar = nextRepChar;
                }
            }

            return sb.ToString();
        }

        static void Main(string[] args)
        {
            for (int i = 1; i < 5; i++)
                DoIt(i);
        }

        static void DoIt(int n)
        {
            Stopwatch sw = new Stopwatch();
            int idx = 0;

            Console.WriteLine("*** Pass " + n.ToString());
            // old way
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = test1.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result2 = test2.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result3 = test3.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
                string result4 = test4.Replace('^', 'Č').Replace('@', 'Ž').Replace('[', 'Š').Replace(']', 'Ć').Replace('`', 'ž').Replace('}', 'ć').Replace('~', 'č').Replace('{', 'š').Replace('\\', 'Đ');
            }

            sw.Stop();
            Console.WriteLine("Old (Chained String.Replace()) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            Dictionary<char, char> replacements = new Dictionary<char, char>();
            replacements.Add('^', 'Č');
            replacements.Add('@', 'Ž');
            replacements.Add('[', 'Š');
            replacements.Add(']', 'Ć');
            replacements.Add('`', 'ž');
            replacements.Add('}', 'ć');
            replacements.Add('~', 'č');
            replacements.Add('{', 'š');
            replacements.Add('\\', 'Đ');

            // logicnp way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                char[] charArray1 = test1.ToCharArray();
                for (int i = 0; i < charArray1.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test1[i], out newChar))
                        charArray1[i] = newChar;
                }

                string result1 = new string(charArray1);

                char[] charArray2 = test2.ToCharArray();
                for (int i = 0; i < charArray2.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test2[i], out newChar))
                        charArray2[i] = newChar;
                }

                string result2 = new string(charArray2);

                char[] charArray3 = test3.ToCharArray();
                for (int i = 0; i < charArray3.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test3[i], out newChar))
                        charArray3[i] = newChar;
                }

                string result3 = new string(charArray3);

                char[] charArray4 = test4.ToCharArray();
                for (int i = 0; i < charArray4.Length; i++)
                {
                    char newChar;
                    if (replacements.TryGetValue(test4[i], out newChar))
                        charArray4[i] = newChar;
                }

                string result4 = new string(charArray4);
            }

            sw.Stop();
            Console.WriteLine("logicnp (ToCharArray) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // oleksii way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = DoGeneralReplace(test1);
                string result2 = DoGeneralReplace(test2);
                string result3 = DoGeneralReplace(test3);
                string result4 = DoGeneralReplace(test4);
            }

            sw.Stop();
            Console.WriteLine("oleksii (StringBuilder) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // André Christoffer Andersen way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = Replace(test1, replacements);
                string result2 = Replace(test2, replacements);
                string result3 = Replace(test3, replacements);
                string result4 = Replace(test4, replacements);
            }

            sw.Stop();
            Console.WriteLine("André Christoffer Andersen (Lambda w/ Aggregate) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // Richard way
            sw.Reset();
            sw.Start();
            Regex reg = new Regex(@"\^|@|\[|\]|`|\}|~|\{|\\");
            MatchEvaluator eval = match =>
            {
                switch (match.Value)
                {
                    case "^": return "Č";
                    case "@": return "Ž";
                    case "[": return "Š";
                    case "]": return "Ć";
                    case "`": return "ž";
                    case "}": return "ć";
                    case "~": return "č";
                    case "{": return "š";
                    case "\\": return "Đ";
                    default: throw new Exception("Unexpected match!");
                }
            };
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = reg.Replace(test1, eval);
                string result2 = reg.Replace(test2, eval);
                string result3 = reg.Replace(test3, eval);
                string result4 = reg.Replace(test4, eval);
            }

            sw.Stop();
            Console.WriteLine("Richard (Regex w/ MatchEvaluator) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // Marc Gravell way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = Sanitize(test1);
                string result2 = Sanitize(test2);
                string result3 = Sanitize(test3);
                string result4 = Sanitize(test4);
            }

            sw.Stop();
            Console.WriteLine("Marc Gravell (Static Regex) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms");

            // user1664043 way
            sw.Reset();
            sw.Start();
            for (idx = 0; idx < 500000; idx++)
            {
                string result1 = ReplaceCharsWithIndexOfAny(test1);
                string result2 = ReplaceCharsWithIndexOfAny(test2);
                string result3 = ReplaceCharsWithIndexOfAny(test3);
                string result4 = ReplaceCharsWithIndexOfAny(test4);
            }

            sw.Stop();
            Console.WriteLine("user1664043 (StringBuilder w/ IndexOfAny) way completed in " + sw.ElapsedMilliseconds.ToString() + " ms\n");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-10T10:39:36.303

> 最快的方法

唯一的方法是自己比较性能。尝试在 Q 中，使用`StringBuilder`and also `Regex.Replace`。

但是微基准没有考虑整个系统的范围。如果此方法仅占整个系统的一小部分，则其性能可能与整个应用程序的性能无关。

一些注意事项：

1.  `String`如上所述使用（我假设）将创建大量中间字符串：为 GC 做更多工作。但这很简单。
2.  Using`StringBuilder`允许在每次替换时修改相同的基础数据。这会产生更少的垃圾。它几乎和使用一样简单`String`。
3.  使用 a[`regex`](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)是最复杂的（因为您需要有代码来计算替换），但允许使用单个表达式。我希望这会更慢，除非替换列表非常大并且输入字符串中的替换很少（即，大多数替换方法调用什么都不替换，只是通过字符串进行搜索）。

由于 GC 负载较少，我预计＃2 在重复使用（数千次）后会稍微快一些。

对于正则表达式方法，您需要以下内容：

```
newObj.Name = Regex.Replace(oldObj.Name.Trim(), @"[@^\[\]`}~{\\]", match => {
  switch (match.Value) {
    case "^": return "Č";
    case "@": return "Ž";
    case "[": return "Š";
    case "]": return "Ć";
    case "`": return "ž";
    case "}": return "ć";
    case "~": return "č";
    case "{": return "š";
    case "\\": return "Đ";
    default: throw new Exception("Unexpected match!");
  }
}); 
```

这可以以可重用的方式完成，方法是使用 a 进行参数化[`Dictionary<char,char>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)以保存替换和可重用[`MatchEvaluator`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-10T10:24:52.817

试试这个：

```
Dictionary<char, char> replacements = new Dictionary<char, char>();
// populate replacements

string str = "mystring";
char []charArray = str.ToCharArray();

for (int i = 0; i < charArray.Length; i++)
{
    char newChar;
    if (replacements.TryGetValue(str[i], out newChar))
    charArray[i] = newChar;
}

string newStr = new string(charArray); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-10T10:27:52.833

一种可能的解决方案是为此使用一个`StringBuilder`类。

您可以首先将代码重构为单个方法

```
public string DoGeneralReplace(string input)
{
    var sb = new StringBuilder(input);
    sb.Replace("^", "Č")
      .Replace("@", "Ž") ...;
}

//usage
foreach (var oldObj in oldDB)
{
    NewObject newObj = new NewObject();
    newObj.Name = DoGeneralReplace(oldObj.Name);
    ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-10T10:33:48.050

您可以在字符映射上使用 Aggregate 来使用 lambda 表达式：

```
 //Method for replacing chars with a mapping
  static string Replace(string input, IDictionary<char, char> replacementMap) {
      return replacementMap.Keys
          .Aggregate(input, (current, oldChar) 
              => current.Replace(oldChar, replacementMap[oldChar]));
  } 
```

您可以按如下方式运行：

```
 private static void Main(string[] args) {
      //Char to char map using <oldChar, newChar>
      var charMap = new Dictionary<char, char>();
      charMap.Add('-', 'D'); charMap.Add('|', 'P'); charMap.Add('@', 'A');

      //Your input string
      string myString = "asgjk--@dfsg||jshd--f@jgsld-kj|rhgunfh-@-nsdflngs";

      //Your own replacement method
      myString = Replace(myString, charMap);

      //out: myString = "asgjkDDAdfsgPPjshdDDfAjgsldDkjPrhgunfhDADnsdflngs"
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-10T10:28:52.263

好吧，我会*尝试*做类似的事情：

```
 static readonly Dictionary<char, string> replacements =
       new Dictionary<char, string>
    {
        {']',"Ć"}, {'~', "č"} // etc
    };
    static readonly Regex replaceRegex;
    static YourUtilityType() // static initializer
    {
        StringBuilder pattern = new StringBuilder().Append('[');
        foreach(var key in replacements.Keys)
            pattern.Append(Regex.Escape(key.ToString()));
        pattern.Append(']');
        replaceRegex = new Regex(pattern.ToString(), RegexOptions.Compiled);
    }
    public static string Sanitize(string input)
    {
        return replaceRegex.Replace(input, match =>
        {
            return replacements[match.Value[0]];
        });
    } 
```

这有一个需要维护的地方（在顶部），并构建了一个预编译`Regex`来处理替换。所有开销只完成一次（因此`static`）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-08T20:57:57.140

使用 IndexOfAny 的混合 StringBuilder 方法：

```
protected String ReplaceChars(String sIn)
{
    int replChar = sIn.IndexOfAny(badChars);
    if (replChar < 0)
        return sIn;

    // Don't even bother making a copy unless you know you have something to swap
    StringBuilder sb = new StringBuilder(sIn, 0, replChar, sIn.Length + 10);
    while (replChar >= 0 && replChar < sIn.Length)
    {
        char? c = sIn[replChar];
        string s = null;
        // This approach lets you swap a char for a string or to remove some
        // If you had a straight char for char swap, you could just have your repl chars in an array with the same ordinals and do it all in 2 lines matching the ordinals.
        switch (c)
        {
            case "^": c = "Č";
            ...
            case '\ufeff': c = null; break;
        }
        if (s != null) sb.Append(s);
        else if (c != null) sb.Append(c);

        replChar++; // skip over what we just replaced
        if (replChar < sIn.Length)
        {
            int nextRepChar = sIn.IndexOfAny(badChars, replChar);
            sb.Append(sIn, replChar, (nextRepChar > 0 ? nextRepChar : sIn.Length) - replChar);
            replChar = nextRepChar;
        }
    }
    return sb.ToString();
} 
```

# android - 通过 android 应用程序将图像附加到电子邮件

> ID：11899669
> 
> 赞同：0
> 
> 时间：2012-08-10T10:20:29.323
> 
> 标签：android, email

我的应用程序成功发送电子邮件，但是当我尝试附加图像时，代码崩溃是代码片段

```
 Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("message/rfc822");
        i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"email address"});
        i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
        i.putExtra(Intent.EXTRA_TEXT   , "body of email");
    //  i.putExtra(Intent.EXTRA_STREAM, R.drawable.pic4);

        try {
            startActivity(Intent.createChooser(i, "Send mail..."));
        } catch (android.content.ActivityNotFoundException ex) {
            Toast.makeText(EidCards.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
        } 
```

被注释的行使代码崩溃，请提出出路！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:30:02.400

这对您不起作用：

```
i.putExtra(Intent.EXTRA_STREAM, R.drawable.pic4); 
```

R.drawable.pic4 的类型是什么？那不是用于解析可绘制对象的整数吗？

查看其他人如何附加图片： [使用 Intent.ACTION_SEND 和 Intent.EXTRA_STREAM 与 Google+ 应用共享图片](https://stackoverflow.com/questions/9023116/sharing-an-image-with-google-app-using-intent-action-send-and-intent-extra-stre)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:31:47.020

好吧，这很简单：P

```
Intent i = new Intent(Intent.ACTION_SEND);

        int imageURI=R.drawable.pic4;

        i.setType("message/rfc822");
        i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"email address"});
        i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
        i.putExtra(Intent.EXTRA_TEXT   , "body of email");
        i.putExtra(Intent.EXTRA_STREAM, R.drawable.pic4);

            i.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+getPackageName()+"/"+imageURI));

        try {
            startActivity(Intent.createChooser(i, "Send mail..."));
        } catch (android.content.ActivityNotFoundException ex) {
            Toast.makeText(EidCards.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
        } 
```

# validation - 检查向导中的验证是否失败以及primefaces中的模式对话框

> ID：11899683
> 
> 赞同：1
> 
> 时间：2012-08-10T10:21:26.453
> 
> 标签：validation, dialog, primefaces, modal-dialog, wizard

这是我在向导中按下“下一步”按钮后检查验证是否失败的尝试。这是在 oncomplete 中完成的 - 目前我只是显示一个显示未定义值的 JS 警报消息。我不认为后端 bean 在这里是相关的，因为验证是通过 required=true 触发的 - 没有在 bean 中进行进一步检查。

当前行为：警报框显示“未定义”，然后显示验证错误消息“密码不能为空”

预期行为：警报框显示“真”，然后显示验证错误消息“密码不能为空”

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>

</h:head>

<h:body>
    <h:form prependId="false">

        <p:dialog id="modalDialog" header="add user" widgetVar="userDialog" modal="true" width="640"
                  height="400" closable="true" appendToBody="true" visible="true">
            <p:growl id="growl" sticky="true" showDetail="true"/>
            <p:wizard widgetVar="wiz" effect="fade"
                      flowListener="#{userWizard.onFlowProcess}" showStepStatus="true" showNavBar="false" onback="progressBack();" >

                <p:tab id="personal" title="Personal" >
                    <p:messages severity="warn" showDetail="true" autoUpdate="true" redisplay="true" />
                    <p:messages id="dialog_msgs" showDetail="false" autoUpdate="true" redisplay="true"/>
                    <p:panel style="height:150px;" >
                        <h:panelGrid columnClasses="label" columns="6" cellpadding="5">
                            <p:column>
                                <h:outputText value="Password: " styleClass="label" />
                            </p:column>

                            <p:column>
                                <p:password value="${userWizard.user.password}" styleClass="content" required="true"
                                            requiredMessage="Password cannot be blank"/>
                            </p:column>

                            <p:column style="width: 50;">
                                <h:outputText value=" "/>
                            </p:column>
                        </h:panelGrid>
                        <h:panelGroup>

                        </h:panelGroup>
                    </p:panel>
                    <p:commandButton value="Previous"  disabled="true" readonly="true" />
                    <p:commandButton value="Next"  oncomplete="alert(args.validationFailed); wiz.next();"  update="dialog_msgs" ajax="true" process="@this" />
                </p:tab>
                <p:tab id="personal2" title="Personal">
                    Not relevant
                    <p:commandButton value="Submit" update="growl messages @form"
                                     actionListener="#{userWizard.save}"/>

                </p:tab>
            </p:wizard>
        </p:dialog>
    </h:form>
</h:body>

</html> 
```

# xml - ImportXML Google 电子表格 - 无法获取 xml 数据

> ID：11899684
> 
> 赞同：0
> 
> 时间：2012-08-10T10:21:35.100
> 
> 标签：xml, google-sheets

我似乎无法获得这个非常简单的示例来将任何内容导入 Google 电子表格：

```
=ImportXML("http://www.w3schools.com/xml/note.xml","/note/to") 
```

尝试了不同的 xml 路径参数，但总是得到一个“分析错误”，而不是一个值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T17:09:36.357

将公式中的符号从“，”更改为“;;”

`=ImportXML("http://www.w3schools.com/xml/note.xml";"/note/to")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T04:36:05.500

您需要在 xpath 中添加两个斜线：

```
=IMPORTXML("http://www.w3schools.com/xml/note.xml","//note") 
```

# javascript - div 随文本水平扩展

> ID：11899688
> 
> 赞同：0
> 
> 时间：2012-08-10T10:21:48.827
> 
> 标签：javascript, css, html, expand

我想知道，是否可以创建一个水平扩展包含文本的 div。（纯 CSS 会很好，但我想那是不可能的）

可以说它有一个固定的高度，一个最小宽度，没有最大宽度。如果文本足够短以适合其中，则该框不会改变。如果 Box 已满，它会开始向右扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:35:49.120

Isn't this posible to do with just HTML and CSS by doing something like this? :

* * *

```
html:
<div class="text_box">...Content goes here...</div>

css:
.text_box {
    float:left;
    height:200px;
    min-width:200px;
    max-width: 1000px; /* if you want a max size. can also be 100% or something else */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:29:01.630

你可以使用`<input type='text' id='textboxsizedemo' onChange='changeSize(this);' name='text' />`. 如果 onChange 不起作用，请使用 onKeyDown，然后使用此 javascript：

```
function changeSize(elem)
{
  var widthperchar = 5; //The width per character
  var textlength = elem.value.length;
  var newwidth = textlength * widthperchar;
  if(newwidth < 200)
  {
    newwidth = 200;
  }
  elem.style.width = newwidth;
} 
```

# debugging - 在 IntelliJ 中调试时如何修改变量值，以便自动更新各个手表？

> ID：11899696
> 
> 赞同：15
> 
> 时间：2012-08-10T10:22:06.890
> 
> 标签：debugging, intellij-idea

我有以下代码：

```
Matcher matchDays = m_daysRegex.matcher(e.getKey());
if (matchDays.matches()){
...
} 
```

`e.getKey()`“周一至周五”在哪里。

现在，我已经执行了第一行并站在 if 表达式上。使用监视窗口我评估`matchDays.matches()`表达式，然后在 的各种方法上添加一些监视`matchDays`。然后使用同一个监视窗口评估`matchDays = m_daysRegex.matcher("Mon,Fri")`and`matchDays.matches()`表达式以查看会发生什么。不幸的是，监视窗口不会自行刷新，也没有明确的按钮来执行此操作： ![在此处输入图像描述](../Images/1fc7751ccb85aa9244470a6f44efbd30.png)

在上图中，请注意如何`matchDays.group(0)`显示“Mon,Fri”，但`matchDays.group(1)`显示“Mon-Fri”。这是因为我手动刷新了前者，但其余的仍然显示旧值。我必须手动刷新它们，这很烦人。

难道我做错了什么？有没有正确的方法，所以手表表达式会自动刷新？或者有没有办法刷新整个监视窗口？

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-02-25T10:54:46.897

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:09:05.037

不可能自动刷新它们，因为刷新需要调用可能对调试器和应用程序语义产生副作用的实际方法。简单的监视值会自动刷新。

另请参阅[YouTrack 中的类似请求](http://youtrack.jetbrains.com/issue/IDEA-69832)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-26T12:55:19.843

添加到@Hari Rao

一件小事我认为很重要，因为它很容易忘记，请确保您要修改的变量本身是 var 而不是 val

否则，您将看到“设置值”灰显。

# magento - 如何在 Magento 的观察者中做一个动作

> ID：11899705
> 
> 赞同：-1
> 
> 时间：2012-08-10T10:22:53.933
> 
> 标签：magento, system.reactive

我已经按照我可以找到的关于“添加大规模行动”示例的所有教程进行操作：[http ://www.smit-web.nl/magento-mass-actions-using-observers/](http://www.smit-web.nl/magento-mass-actions-using-observers/)

但是有些东西我不明白（而且更多人不明白），但我找不到答案。

本教程将质量动作放在下拉列表中。但是我如何获得行动并做我想做的任何事情？

例如，我的 config.xml 有这个：

```
<gridexample>
    <type>singleton</type>
    <!-- Observer location (e.g. SW/GridExample/Model) -->
    <class>SW_GridExample_Model_Observer</class>
    <!-- Function to call -->
    <method>addActions</method>
</gridexample> 
```

这个函数：我在观察者中找到的“addActions”。但后来我被困住了。

在观察者中它说：

```
$block->addItem('demo', array(
        'label' => Mage::helper('sales')->__('Example'),
        'url' => $block->getUrl('*/*/'),
    )
); 
```

但是然后呢？标签“示例”在下拉菜单中可用，但接下来我该怎么做？如果选择了操作示例，我如何获取 ID 以及在哪里执行我的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:33:50.750

如果您尝试向自己的模块添加批量操作，请遵循本教程：http: [//inhoo.net/ecommerce/magento/how-to-add-massactions-to-magentos-grid/](http://inchoo.net/ecommerce/magento/how-to-add-massactions-to-magentos-grid/)

您正在使用的教程是向现有模块添加批量操作。如果您还有问题，请告诉我。

# php - 带参数的 PHP SOAP 客户端调用函数

> ID：11899706
> 
> 赞同：13
> 
> 时间：2012-08-10T10:22:54.567
> 
> 标签：php, soap

我像这样创建了一个 SOAP 客户端：

```
$client = new SoapClient("file.wsdl"); 
```

然后当我想调用一个 API 函数时

```
$client->Authenticate("user", "password"); 
```

我收到以下错误：

> 格式化程序在尝试反序列化消息时抛出异常：
> 
> 反序列化操作“身份验证”的请求消息正文时出错。预期来自命名空间“ [http://schemas.xmlsoap.org/soap/envelope/ ”的结束元素“正文”。](http://schemas.xmlsoap.org/soap/envelope/)从命名空间“”中找到元素“param1”。

但是当我尝试在数组中传递参数时，它可以工作，但我得到下一个错误：

```
["errorMessage"]=>
string(35) "ORA-01008: not all variables bound 
```

我的问题是：如何将 PHP 中的参数传递给 SOAP 客户端？他们必须在一个数组中吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T10:27:42.040

您应该为参数传递一个数组并给出参数名称（可以在 wsdl 文件中找到）。在您的情况下，结果应该如下所示（假设参数名称应该是`param1`并且`param2`基于错误消息）：

```
$client->Authenticate(array('param1'=>"user", 'param2'=>"password")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-23T15:18:00.860

```
$info = $client->__call("myAction", ['body' => ['param1' => '123', 'param2' => '456']]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:34:04.207

这一切都取决于soap服务器如何定义，参数可以是字符串和数组，只要你喜欢。你的问题以前是不合法的，检查wsdl文件或so​​ap服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:28:47.927

```
 $client = new SoapClient("your wsdl file");
   $stock = "NCR";
   $parameters= array("request"=>$stock);
   $values = $client->someMethod($parameters); 
```

# asp.net - asp.net 更改密码控制

> ID：11899707
> 
> 赞同：1
> 
> 时间：2012-08-10T10:22:58.503
> 
> 标签：asp.net, controls, change-password

如何使用 asp.net 更改密码控件。当我单击更改密码按钮时，它总是会出现错误：

```
Invalid password or new password is invalid. The minimum length of new password 7\. You want to use non-alphanumeric characters: 1. 
```

我输入新密码，如“Changepassword123”，但仍然出现错误。

代码隐藏代码是：

```
protected void changep1_ChangedPassword(object sender, EventArgs e)
        {
            Response.Write(changep1.CurrentPassword);
            Response.Write(changep1.NewPassword);

        } 
```

有人可以提供代码隐藏代码来更新用户密码吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:00:48.393

您的错误表明您的新密码中至少需要 1 个非字母数字字符。你可以改变这个。

在 web.config 中，您可以更新 minRequiredNonalphanumericCharacters 设置。

```
minRequiredNonalphanumericCharacters="0" 
```

请参阅下面将 minRequiredNonalphanumericCharacters 属性设置为 0 的成员资格提供程序设置

```
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" 
      type="System.Web.Security.SqlMembershipProvider" 
      connectionStringName="ApplicationServices" 
      enablePasswordRetrieval="false" 
      enablePasswordReset="true" 
      requiresQuestionAndAnswer="false" 
      requiresUniqueEmail="false" 
      maxInvalidPasswordAttempts="5" 
      minRequiredPasswordLength="6" 
      minRequiredNonalphanumericCharacters="0" 
      passwordAttemptWindow="10" 
      applicationName="/"/>
  </providers>
</membership> 
```

# android - 打开助手 ormlite Android

> ID：11899712
> 
> 赞同：1
> 
> 时间：2012-08-10T10:23:16.457
> 
> 标签：android, database, ormlite

我在我的 android 应用程序中使用 ormlite。首先我使用：

```
OpenHelperManager.setOpenHelperClass(nameclass);
//nameclass is my class that create, update database.
//name class is defined as:
private static Class<? extends OrmLiteSqliteOpenHelper> nameclass = OpenHelper.class; 
```

我可以打开我的数据库。日志猫说：

```
E/AndroidRuntime( 6929): Caused by: java.lang.NoClassDefFoundError: com.j256.ormlite.logger.LoggerFactory 
```

E/AndroidRuntime（6929）：在 com.j256.ormlite.android.apptools.OpenHelperManager.（OpenHelperManager.java:37）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:49:42.940

我相信你正在使用，`ormlite-android`但你也需要这个`ormlite-core`包。请参阅下载文档：

> [http://ormlite.com/docs/downloading](http://ormlite.com/docs/downloading)

去引用：

> 要与 Android 应用程序一起使用，您应该下载 ormlite-android-4.41.jar 和 ormlite-core-4.41.jar 文件。对于 JDBC 或 Android，您还需要具有 ORMLite 后端实现的 ormlite-core 版本。

# google-maps - 为什么谷歌地图不绘制折线？

> ID：11899713
> 
> 赞同：0
> 
> 时间：2012-08-10T10:23:19.657
> 
> 标签：google-maps, google-maps-api-3

我正在谷歌地图上制作折线。但我看不到它。以下是代码：

```
 $('#mapdiv').html('<div id="map_convas" style="width:640px; height:427px; margin-left:auto; margin-right:auto"></div>');

  var centerLatLng = new google.maps.LatLng(obj[i].centerlat, obj[i].centerlong);

  var myOptions = {
   center: centerLatLng,
   zoom: 17,
   mapTypeId: google.maps.MapTypeId.ROADMAP,
   draggable: true
  };
  var map_polyline;

  var map = new google.maps.Map(document.getElementById("map_convas"),
                                myOptions);

  var marker = new google.maps.Marker({
   clickable: true,
   position: centerLatLng,
   map: map,
   zIndex: 1
  });
  marker.setIcon('http://localhost:8888/images/marker.png');

  var locations = obj[0].locations;
// in my current case locations.length is 1                       
  for(var p=0; p<locations.length; p++){

  var triangleCoords = new Array();

  var markerArray = locations[p];
  for(var x=0;x<markerArray.length;x++){
        triangleCoords.push(new google.maps.LatLng(markerArray[x].latitude, markerArray[x].longitude));
  }
  map_polyline = new google.maps.Polyline({
       path: triangleCoords,
       strokeColor: "#FF0000",
       strokeOpacity: 1.0,
       strokeWeight: 2
  });
  map_polyline.setMap(map);
 }

 // doing some stuff

 google.maps.event.trigger(map, "resize"); 
```

我正在解析和制作 obj 的 Json 如下：

```
 [
{
    "centerlat": 55.68369272317236,
    "centerlong": 13.176000376097194,
    "locations": [
        [
            {
                "longitude": 13.17480473780369,
                "latitude": 13.17480473780369
            },
            {
                "longitude": 13.17456847989296,
                "latitude": 13.17456847989296
            },
            {
                "longitude": 13.17426541821395,
                "latitude": 13.17426541821395
            },
            {
                "longitude": 13.1741324253503,
                "latitude": 13.1741324253503
            },
            {
                "longitude": 13.17386236043011,
                "latitude": 13.17386236043011
            },
            {
                "longitude": 13.17352138460909,
                "latitude": 13.17352138460909
            }
        ]
    ]
  }
 ] 
```

我正在使用以下代码行解析它：

```
 var obj = jQuery.parseJSON(result); 
```

地图中心、标记和大小等其他一切都运行良好。唯一的问题是我在地图上看不到任何折线。我设置了一些警报来检查 markerArray 和 triangleCoords 的值。他们很好。谁能告诉我为什么我看不到折线？我以前使用过更多的地图实例。因为他们有什么问题吗？提前致谢。

# scala - 如何关闭多项目构建的并行执行测试？

> ID：11899723
> 
> 赞同：36
> 
> 时间：2012-08-10T10:24:19.997
> 
> 标签：scala, sbt

我有一个多项目构建，其中包含子项目和父项目中的测试。构建被聚合，以便父项目运行子项目中的所有测试。

我对其进行了配置，以便在子项目和父项目中都没有并行执行测试，通过

```
parallelExecution in Test := false 
```

但是，我有一种烦人的感觉，即跨多个项目的测试是并行运行的。在其中一个子项目的情况下，这是一个问题，因为它同时改变了测试数据库中的状态，导致测试失败。

关于如何在项目之间全局切换并行执行测试的任何想法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-10T11:13:16.090

我认为您可以使用 scope 跨项目应用设置`ThisBuild`，例如

```
parallelExecution in ThisBuild := false 
```

我不知道你是否可以将它与 scope 结合起来`Test`，但这可能没有必要。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-31T21:27:33.730

要限制所有项目中同时执行的测试数量，请使用：

```
concurrentRestrictions in Global += Tags.limit(Tags.Test, 1) 
```

见[sbt 文档](http://www.scala-sbt.org/0.13/docs/Parallel-Execution.html#Defining+Restrictions)

见[讨论](https://github.com/sbt/sbt/issues/1886)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-05-11T23:13:14.470

这在 1.1.0 中对我有用：

`Test / parallelExecution := false`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-29T14:33:28.323

在此处查看我的答案[如何在测试时按顺序运行子项目测试（包括设置方法）](https://stackoverflow.com/questions/18895063/how-to-run-subprojects-tests-including-setup-methods-sequentially-when-testing/27690751#27690751)

还有另一种方法可以防止并行执行。您可以使不同项目的测试任务相互依赖：

```
test in Project2 := (test in Project2).dependsOn(test in Project1).value
parallelExecution in Test in Project2 := false 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-13T14:44:12.147

基于[https://stackoverflow.com/a/27068019/1922026](https://stackoverflow.com/a/27068019/1922026)的另一种可能性是在根项目中定义命令别名：

```
.settings(addCommandAlias("test", ";s1/test;s2/test;s3/test"): _*) 
```

其中 s1、s2 和 s3 是子项目。当您在根项目中并运行“测试”时，测试将按定义的顺序依次执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-23T13:02:50.433

你也可以试试`Global / parallelExecution := false`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-14T22:49:22.143

在范围内禁用并行执行的“现代”（即 sbt 1.x）等价物`Test`是将以下内容添加到您的`build.sbt`：

```
Global / concurrentRestrictions += Tags.limit(Tags.Test, 1) 
```

对于那些不熟悉 sbt 语法的人，在上下文中您想要执行以下操作：

```
lazy val main = project
  .in(file("."))
  .settings(
    name := "foo",
    // more settings
    // ...
    Global / concurrentRestrictions += Tags.limit(Tags.Test, 1)
  ) 
```

来自 sbt 文档的[标签和规则](https://www.scala-sbt.org/1.x/docs/Parallel-Execution.html#Built-in+Tags+and+Rules)部分。

ps 对 ScalaTest 来说是一个非常有用的设置，尤其是在数据库测试期间围绕设置/拆卸逻辑。修复了一些非常令人费解的非确定性错误，在启用并行执行时不可避免地会遇到这些错误。

# ms-access - 子表单记录覆盖

> ID：11899727
> 
> 赞同：0
> 
> 时间：2012-08-10T10:24:32.413
> 
> 标签：ms-access, header, report, footer

我正在建立一个学生数据库，

我有一个班级分配表格来添加块（学期），期间和班级名称，然后我可以在表格底部的查询子表格中查看。

我的班级分配表是这样设置的：

{ClassAssignID, StudentID, BlockID, Period, OptionID}

每个块有 4 个类可供选择。我可以为每个块添加一条记录，但我的问题是当我尝试添加第二个类时，它只会覆盖第一个类，因此它只能容纳一个类。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:00:36.353

在大多数情况下，子表单的 sql 应该相当简单，可以从组合框和链接子字段和主字段中获得额外的信息。

在这种情况下，索引也存在问题，正如聊天所揭示的那样。限制性索引和关系的组合阻止了将数据添加到表中。

# c - dlsym() 返回符号的奇怪地址

> ID：11899728
> 
> 赞同：0
> 
> 时间：2012-08-10T10:24:34.740
> 
> 标签：c, symbols, dlsym

1）。直接打印函数地址：

```
printf("strerror=%p, strerror_r=%p\n", strerror, strerror_r);
strerror=0x8049ec0, strerror_r=0x8049e20 
```

2）。dlsym 版本：

```
rtldDefault= dlopen(0, RTLD_NOW | RTLD_GLOBAL);
dlsym(rtldDefault, "strerror_r"); ==> strerror_r=0xb76544e0 
```

但

```
dlsym(rtldDefault, "strerror"); ==> strerror=0x8049ec0 
```

3）。其他：

```
dlsym((void*)0, "strerror_r") ==> strerror_r=0xb76544e0
dlsym((void*)-1, "strerror_r") ==> strerror_r=0xb76544e0 
```

我怎样才能`strerror_r=0x8049e20`使用`dlsym()`？

我已经先打印了strerror_r的地址，然后调用dlsym()。

strerror_r=0xb76544e0 是错误的地址，我用这个地址调用 strerror_r 什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:02:01.913

如果您查看`strerror_r`in的声明`/usr/include/string.h`：

> /* strerror_r'的可重入版本`strerror'. There are 2 flavors of`，GNU，它返回字符串，可能使用也可能不使用提供的临时缓冲区和将字符串填充到缓冲区中的POSIX。要使用 POSIX 版本，需要 -D_XOPEN_SOURCE=600 或 -D_POSIX_C_SOURCE=200112L 而没有 -D_GNU_SOURCE，否则首选 GNU 版本。*/
> [然后是一些相当混乱的声明]

使用默认配置编译示例程序`gcc -save-temps`，我得到以下预编译声明：

```
extern int strerror_r (int __errnum, char *__buf, size_t __buflen) 
    __asm__ ("" "__xpg_strerror_r") __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__nonnull__ (2))); 
```

所以看起来这个`strerror_r`函数是链接到符号的`__xpg_strerror_r`。

事实上，检查生成的二进制文件`objdump -t a.out | grep strerror`：

```
00000000      DF *UND*  00000000  GLIBC_2.3.4 __xpg_strerror_r 
```

所以，问你的问题，就去做`dlsym(rtldDefault, "__xpg_strerror_r")`。

# vbscript - 从批处理文件运行 vbscript

> ID：11899730
> 
> 赞同：28
> 
> 时间：2012-08-10T10:24:41.323
> 
> 标签：vbscript, batch-file, 32bit-64bit, 32-bit, syswow64

我只需要编写一个简单的批处理文件来运行 vbscript。vbscript 和批处理文件都在同一个文件夹中，并且在 SysWOW64 目录中，因为 vbscript 只能在该目录中执行。目前我的批处理文件如下：

```
@echo off
%WINDIR%\SysWOW64\cmd.exe
cscript necdaily.vbs 
```

但是 vbscript 没有执行，只是打开了命令提示符。谁能告诉我在运行这个批处理文件时如何执行 vbscript？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-10T21:50:35.630

您可以使用`%~dp0`获取当前运行的批处理文件的路径。

*编辑以在运行前将目录更改为 VBS 位置*

如果你想让 VBS 在同一个窗口中同步运行，那么

```
@echo off
pushd %~dp0
cscript necdaily.vbs 
```

如果你想让 VBS 在新窗口中同步运行，那么

```
@echo off
pushd %~dp0
start /wait "" cmd /c cscript necdaily.vbs 
```

如果您希望 VBS 在同一窗口中异步运行，则

```
@echo off
pushd %~dp0
start /b "" cscript necdaily.vbs 
```

如果您希望 VBS 在新窗口中异步运行，则

```
@echo off
pushd %~dp0
start "" cmd /c cscript necdaily.vbs 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T00:24:00.310

这是批处理文件的命令，它可以运行 vbscript。

```
C:\Windows\SysWOW64\cmd.exe /c cscript C:\Windows\SysWOW64\...\necdaily.vbs 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-04T09:46:24.210

批处理文件逐行处理，并在您直接调用可执行文件时终止。
- 要使批处理文件等待进程终止并继续，放在`call`它前面。
- 要使批处理文件无需等待即可继续执行，请将`start ""`其放在前面。

我建议使用这个单行脚本来实现您的目标：

> @call cscript "%~dp0necdaily.vbs"

（因为这是单行，所以可以用@代替@echo off）

如果您认为您的脚本只能从 cmd.exe 的 SysWOW64 版本调用，您可以尝试：

> @%WINDIR%\SysWOW64\cmd.exe /c 调用 cscript "%~dp0necdaily.vbs"

如果需要保留窗口，可以将 /c 替换为 /k

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-29T13:49:32.350

试试这个代码：

**开始 "" "C:\Users\DiPesh\Desktop\vbscript\welcome.vbs"**

并另存为.bat，它适用于我

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T02:51:25.970

好吧，我正在尝试在批处理文件中打开一个 .vbs 而不必单击打开，但这个问题的答案是......

设置应用程序数据=%CD%

开始（如果它是 vbd 文件，则此处的文件不带 .vbs 括号）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T13:10:49.137

您应该将 .bat 文件与 .vbs 文件放在同一文件夹中，并在 .bat 文件中调用以下代码。

```
start cscript C:\filePath\File.vbs 
```

# php - php snmp MIB 和 walk

> ID：11899731
> 
> 赞同：2
> 
> 时间：2012-08-10T10:24:44.317
> 
> 标签：php, snmp, mib

我正在编写一个 php 脚本，它允许我使用 snmp 在设备上获取和设置某些值。我有设备的 MIB 并且可以轻松地将其加载到 php 中。问题是我无法使用“人类可读”的 oid 字符串而不是数字字符串来获取我正在寻找的值（数字 oid 可以正常工作）。

我的代码：

```
$host = "localhost";
$community = "public";
$mibFile = "C:\wamp\www\extra\AvenueMIBv105.mib";
$oid = '.1.3.6.1.4.1.19021.1.1.0.0.1';
snmp_read_mib($mibFile);

print_r(snmprealwalk($host, $community, $oid)); 
```

，`$oid = '.1.3.6.1.4.1.19021.1.1.0.0.1'`我得到这个输出：

> 数组（[AvenueMIBv105::private.1.19021.1.1.0.0.1.1.0] => 整数：1 [AvenueMIBv105::private.1.19021.1.1.0.0.1.2.0] => 整数：1

使用 $oid = 'AvenueMIBv105::private.slotSelect' 我得到以下输出：

> 数组（[AvenueMIBv105::internet.2.1.1.3.0] => 整数：129663870 [AvenueMIBv105::internet.2.1.1.4.0] => 十六进制字符串：75 73 65 72 4E 61 6D 65 00

我希望两个输出相同。我意识到我必须有“人类可读”的 oid 错误，但我为此尝试了许多不同的字符串，但我总是得到相同的错误输出。我应该怎么做？我也知道它有时会有所不同，php 脚本在 WAMP 服务器上运行。

这是我的 MIB 树：

![在此处输入图像描述](../Images/8e63875451a3de6f45539b57cc839197.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:12:27.540

您的 PHP 库需要能够将您的 OID“解析”为人类可读的 OID 名称。您需要研究您的 PHP SNMP 库是否以及如何为其输出执行此操作。这是您的 PHP SNMP 库的问题。如果您的图书馆不这样做，那么您将需要手动进行。您的 IReasoning 浏览器之所以这样做，是因为 Ireasoning 将 OID 解析为人类可读的名称。

# credit-card - ActiveMerchant 未验证无效信用卡

> ID：11899735
> 
> 赞同：1
> 
> 时间：2012-08-10T10:24:55.523
> 
> 标签：credit-card, activemerchant, validating

我的 rails 2.3.2 应用程序中的 ActiveMerchant 信用卡验证存在问题。（ActiveMerchant 1.4.1）

我完全遵循了 railscast #145 剧集代码。

我的问题是，当我使用无效数据（例如：first_name,:last_name 为空）验证信用卡时，ActiveMerchant 没有给出验证错误

我在我的脚本/控制台中试过这个

```
credit_card = ActiveMerchant::Billing::CreditCard.new(:number => "",:first_name => "")
credit_card.errors.full_messages #=> []
credit_card.errors #=> {} 
```

我的 payment.rb 包含

```
validate_on_create :validate_card

private

def validate_card
  unless credit_card.valid?
    credit_card.errors.full_messages.each do |message|
       errors.add_to_base message
    end
  end
end

def credit_card
  @credit_card = ActiveMerchant::Billing::CreditCard.new(
    :number             => card_number,
    :month              => card_expires_on.month,
    :year               => card_expires_on.year,
    :first_name         => first_name,
    :last_name          => last_name,
    :verification_value => cvv_number, 
    :type               => card_type
    )
 end 
```

信用卡错误未添加到我在控制器中创建的@payment 对象#create 请告诉我我在哪里做错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:58:38.127

请添加一个 || 在您的信用卡功能中

```
def credit_card
  @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
    :number             => card_number,
    :month              => card_expires_on.month,
    :year               => card_expires_on.year,
    :first_name         => first_name,
    :last_name          => last_name,
    :verification_value => cvv_number, 
    :type               => card_type
    )
 end 
```

# javascript - 两个类之间的状态

> ID：11899736
> 
> 赞同：3
> 
> 时间：2012-08-10T10:24:58.913
> 
> 标签：javascript, jquery, html, css

我有两个 CSS 类 (`c1`和`c2`)，我正在使用 CSS3 过渡在它们之间切换。

现在，我希望 div**保持**（不动画）在 和 之间的状态`c1`，`c2`例如 60%`c1`和 40% `c2`。`c1`（如果我在和之间播放持续时间为 1 秒的过渡`c2`，我希望帧的状态出现在 0.4 秒）

`c1`并且`c2`具有许多属性（变换等），因此不容易按所需百分比计算每个属性并将其设置为`div`.

有没有为此目的的 CSS/jQuery 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:10:42.723

jQueryUI 的`switchClass`函数`addClass`不支持`step`function 参数，这使得实现这一点非常困难。

但是，如果您可以在动画代码本身中指定样式，则可以这样做 - 检查这个小提琴：http: [//jsfiddle.net/techfoobar/fAZqn/2/](http://jsfiddle.net/techfoobar/fAZqn/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:27:13.477

[**这是工作 jsFiddle**](http://jsfiddle.net/uZdVk/17/)，这是结构：

**jQuery：**

```
//setting animation values
var value1 = 60;
var value2 = 40;

$('a').click(function(){
 var takeClass = $(this).attr('class');
 //takes class from clicked element

 var selectEle = $('.'+ takeClass +'Box');
 //creating selector with takeClass value

 $('span').not(selectEle).animate({'width':value2+'px','height':value2+'px'},90);
 selectEle.animate({'width':value1+'px','height':value1+'px'},90);
});​ 
```

**html:**

```
<a class="c1">1</a>
<a class="c2">2</a>
<span class="c1Box"></span>
<span class="c2Box"></span>​ 
```

# java - 访问实例列表返回 NullPointerException

> ID：11899737
> 
> 赞同：1
> 
> 时间：2012-08-10T10:25:01.387
> 
> 标签：java, jboss7.x, cdi

我试图用基于 CDI 的方法替换使用反射通过字符串名称返回类的工厂类。

所以我把一个`@Inject @Any Instance<IData> possibleCandidates`作为类变量。然后在`getIDataInstanceByClassname(String className)`我通过创建一个实例`Class.forName`并将其与`possibleCandidates`列表中的每个实例进行比较，然后返回一个匹配的“可注入”实例。

但是访问`possibleCandidates`最终以`NullPointerException`. 无论我是开始`for`循环还是使用`possibleCandidates.iterator()`. 但是，检查变量不会返回 null 而是`InstanceImpl<T>`填充了各种值。

为什么访问它会产生 NPE？

一些代码：

```
@Instance
@Any
private Instance<IData> possibleCandidates;

public IData getClassByClassname( String className ) {

    try {
        Class<?> clazz = Class.forName( className );
        Iterator<IData> it = possibleCandidates.iterator(); // NPE gets thrown here
        while ( it.hasNext() ) {
            IData dataInstance = it.next();
            if ( dataInstance.getClass().equals( clazz ) ) {
                return dataInstance;
            }
        }
    }
    catch( Exception e ) { ... }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:40:33.040

该列表中有一个类，它在构造时产生了 NullPointerException，导致对 Instance 列表的任何访问都失败。我在调试模式下看不到 NPE 的原因，但是当我添加一些日志记录时，根本原因就很清楚了。

所以，记住孩子们：总是在 catch 块中重新抛出异常或用它做一些事情。但是，如果不将原始异常作为原因放入其中，则永远不要抛出不同的异常。

# excel - 使用 vb.net 导出带有列标题的 mysql 表数据

> ID：11899739
> 
> 赞同：0
> 
> 时间：2012-08-10T10:25:02.360
> 
> 标签：excel, vb.net-2010

我想将带有列标题的mysql表数据导出到excel表。我正在使用 vb.net。但无法在 Excel 工作表中获取表格列标题。我只得到 mysql 表数据。

```
my code
-------
 Dim i, j As Integer

    Dim xlApp As Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet
    Dim misValue As Object = System.Reflection.Missing.Value

    xlApp = New Excel.ApplicationClass
    xlWorkBook = xlApp.Workbooks.Add(misValue)
    xlWorkSheet = xlWorkBook.Sheets("sheet1")

    For i = 0 To ds.Tables(0).Rows.Count - 1
        For j = 0 To ds.Tables(0).Columns.Count - 1
            xlWorkSheet.Cells(i + 1, j + 1) = _
            ds.Tables(0).Rows(i).Item(j)
        Next
    Next

    xlWorkSheet.SaveAs("D:\vbexcel.xlsx")
    xlWorkBook.Close()
    xlApp.Quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:42:53.187

我不知道 Vb.net，但我遇到了类似的问题，不得不使用以下语法：

IGNORE 1 LINES 在语句中。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)（这是用于导入，但此处描述了 IGNORE 1 LINES 语法...）

# android - 在ubuntu上用Python2.7导入android库出错

> ID：11899746
> 
> 赞同：0
> 
> 时间：2012-08-10T10:25:26.610
> 
> 标签：android, python-2.7

在我的脚本中导入 android 库时出现以下错误。

当我使用

```
import android 
```

我收到以下错误：

```
>>> 

Traceback (most recent call last):
  File "/home/anoop/Python3.2/android-sdk-linux/mydroidtest.py", line 1, in <module>
    import android
ImportError: No module named android 
```

任何人请帮助。另外在哪个路径我可以找到android库？？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:25:27.703

长话短说，您需要在手机上托管一个服务器，将适当的端口转发到您的手机，`adb forward`然后您应该可以完全访问 Android 模块。

欲了解更多信息，请访问[SL4A wiki](http://code.google.com/p/android-scripting/wiki/RemoteControl)

# .net - 服务类型优先于运营商代码；用于评估错误的服务类型

> ID：11899747
> 
> 赞同：2
> 
> 时间：2012-08-10T10:25:27.903
> 
> 标签：.net, fedex

我尝试从 Fedex 接收运费，所以我发送给 Fedex (https://wsbeta.fedex.com:443/web-services/rate) 请求，如下所示（它被序列化为 xml 对象）：

```
<?xml version=\"1.0\" encoding=\"utf-16\"?>
<RateRequest xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">
  <WebAuthenticationDetail xmlns=\"http://fedex.com/ws/rate/v10\">
    <UserCredential>
      <Key>some key</Key>
      <Password>some password</Password>
    </UserCredential>
  </WebAuthenticationDetail>
  <ClientDetail xmlns=\"http://fedex.com/ws/rate/v10\">
    <AccountNumber>some account number</AccountNumber>
    <MeterNumber>some meter number</MeterNumber>
  </ClientDetail>
  <TransactionDetail xmlns=\"http://fedex.com/ws/rate/v10\">
    <CustomerTransactionId>some CustomerTransactionId</CustomerTransactionId>
  </TransactionDetail>
  <Version xmlns=\"http://fedex.com/ws/rate/v10\">
    <ServiceId>crs</ServiceId>
    <Major>10</Major>
    <Intermediate>0</Intermediate>
    <Minor>0</Minor>
  </Version>
  <ReturnTransitAndCommit xmlns=\"http://fedex.com/ws/rate/v10\">true</ReturnTransitAndCommit>
  <CarrierCodes xmlns=\"http://fedex.com/ws/rate/v10\">FDXE</CarrierCodes>
  <RequestedShipment xmlns=\"http://fedex.com/ws/rate/v10\">
    <ShipTimestamp>2012-08-10T11:42:00.2669059+02:00</ShipTimestamp>
    <ServiceType>GROUND_HOME_DELIVERY</ServiceType>
    <PackagingType>YOUR_PACKAGING</PackagingType>
    <TotalInsuredValue>
      <Currency>USD</Currency>
    </TotalInsuredValue>
    <Shipper>
      <Address>
        <City>San Francisco</City>
        <StateOrProvinceCode>CA</StateOrProvinceCode>
        <PostalCode>94129</PostalCode>
        <CountryCode>US</CountryCode>
      </Address>
    </Shipper>
    <Recipient>
      <Address>
        <StreetLines>S</StreetLines>
        <StreetLines>s</StreetLines>
        <City>New York</City>
        <StateOrProvinceCode>NY</StateOrProvinceCode>
        <PostalCode>10001</PostalCode>
        <CountryCode>US</CountryCode>
        <Residential>true</Residential>
      </Address>
    </Recipient>
    <ShippingChargesPayment />
    <RateRequestTypes>ACCOUNT</RateRequestTypes>
    <RateRequestTypes>LIST</RateRequestTypes>
    <PackageCount>1</PackageCount>
    <RequestedPackageLineItems>
      <SequenceNumber>1</SequenceNumber>
      <GroupPackageCount>1</GroupPackageCount>
      <InsuredValue />
      <Weight>
        <Units>LB</Units>
        <Value>133.00000</Value>
      </Weight>
      <Dimensions>
        <Units>IN</Units>
      </Dimensions>
    </RequestedPackageLineItems>
  </RequestedShipment>
</RateRequest> 
```

我仍然收到两个错误：

*   870 - 服务类型优先于运营商代码；用于评分的服务类型
*   809 - 包裹 1 - 重量丢失或无效。

我应该改变什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T07:34:45.683

我找到了解决方案。为了解决第一个问题，我必须更改不适合 CarrierCodes 的 ServiceType 值。GROUND_HOME_DELIVERY 的合适承运人代码是 FDXG。

第二个问题是重量超过 70 磅的包裹应该使用 FEDEX_GROUND 而不是 GROUND_HOME_DELIVERY 发送。

# jquery - 我怎样才能标记一个使用 jQuery 基于初始值选择的选项？我有一个有 50 多行 callect TopidID 的屏幕。在那个屏幕上，我有一个可能有大量行的网格。作为每行有很多选择的替代方案，我只用如下一项填充我的选择： <select title="X" data-clicked="N" data-list="N" id=" input_TempRowKey_73" name="rowKey_73" class="select-topic">< ID：11899754 赞同：0 时间：2012-08-10T10:25:50.480 标签：jquery 回答 #1 赞同：0 时间：2012-08-10T10:47:19.847 实际上非常简单（您的代码比您仍然需要添加的代码更难）： function dropdownlistprocessing () { var selectedval = $("#mydropdown").val(); // now process your dropdownlist $("#mydropdown").val(selectedval); } 编辑：如您所见，如果您使用，.val()您将获得选定的值。如果您使用 传递一个值.val(foo)，您将在下拉列表中设置选择项。 EDIT2 根据下面的评论，我想你想要这个吗？ function dropdownlistprocessing () { var selectedval = $("#mydropdown_A").val(); // now process your dropdownlist $("#mydropdown_B").val(selectedval); }</select>

# sencha-touch-2 - Ext.device.connection 覆盖（添加全局侦听器）

> ID：11899756
> 
> 赞同：0
> 
> 时间：2012-08-10T10:26:01.243
> 
> 标签：sencha-touch-2

sencha touch 2 中的 Ext.device.connection 是否可以被一些自定义代码覆盖，如下所示。基本上，我们在这里尝试在应用程序级别检查互联网连接并将用户重定向到公共页面

```
 Ext.define('SLS.BRND.WEB.common.CustomConnection', {
    override :  'Ext.device.connection',

    constructor : function() {
        var me = this;

        me.callParent(arguments);

        me.on('exception', 'checkSessionTimeout', me);
    },

    checkSessionTimeout : function() {
        alert('this');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:20:28.537

您的覆盖应该是`override : 'Ext.device.Connection',`，但我不太确定这是否会起作用，这取决于 Connection 类单例何时被实例化并且您的覆盖被注册。换句话说，注册覆盖是否会导致 ST 单例被实例化，或者 ST 本身是否在您能够覆盖它之前使用 Connection 类。你最有可能打赌混合新方法，或者，因为 ST 类是开放的，就做`Ext.device.Connection.checkSessionTimeout = function () { alert('this'); };`

# c# - NullReferenceException 长度

> ID：11899760
> 
> 赞同：2
> 
> 时间：2012-08-10T10:26:10.883
> 
> 标签：c#, linq

我有一个代码：

```
string[] sizes = new string[] {"1","11","2","22","200","222", null, "105", "101", "102", "103", "90" };

try
{
  var size = from x in sizes
           orderby x.Length, x
           select x;

  foreach (var p in size)
  {
     Console.WriteLine(p);
  }
   Console.Read();
}
catch (NullReferenceException)
{
} 
```

如何在 x.Length 中捕获 null，并继续执行代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T10:27:55.063

> 如何在 x.Lenght 中捕获 null 并继续执行代码？

那么，在这种情况下，您希望值是多少？例如，您可以使用：

```
orderby x == null ? -1 : x.Length, x 
```

或者可能：

```
orderby x == null ? int.MaxValue : x.Length, x 
```

或者可能：

```
orderby x == (x ?? "").Length, x 
```

或者，也许您应该过滤字符串以开始：

```
var size = from x in sizes
           where x != null
           orderby x.Length, x
           select x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:30:44.693

你应该尝试添加

```
where x != null 
```

在您的过滤中

# c# - 使用 HttpClient 下载的图像已损坏

> ID：11899763
> 
> 赞同：1
> 
> 时间：2012-08-10T10:26:24.927
> 
> 标签：c#, windows-runtime

我正在尝试将图像从网络保存到本地存储以供以后操作，但它似乎已损坏并且尝试使用外部应用程序打开它失败。在网络浏览器中打开图像完全正常。谢谢你的帮助。

```
var client = new HttpClient();
var clientResponse = await client.GetByteArrayAsync(imageUri);

var temp = ApplicationData.Current.TemporaryFolder;
StorageFile file;
if ((await temp.GetFilesAsync()).Any(f => f.Name == "temp_image.png")) {
    file = await temp.GetFileAsync("tempcolorizer.png");
} else {
    file = await temp.CreateFileAsync("temp_image.png");
}
using (var fs = await file.OpenReadAsync())
using (var writer = new DataWriter(fs)) {
    writer.WriteBytes(clientResponse);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:41:29.773

你必须打电话`StoreAsync`：

```
using (var fs = await file.OpenReadAsync())
using (var writer = new DataWriter(fs)) {
  writer.WriteBytes(clientResponse);
  await writer.StoreAsync();
} 
```

# ruby-on-rails - 在linux上安装mysql2 gem

> ID：11899766
> 
> 赞同：5
> 
> 时间：2012-08-10T10:26:29.327
> 
> 标签：ruby-on-rails

我正在尝试在 linux 上安装 gem，但它给了我一个错误：

```
An error occured while installing mysql2 (0.3.11), and Bundler cannot continue.
Make sure that gem install mysql2 -v '0.3.11' succeeds before bundling. 
```

我现在需要做什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T10:36:24.890

Probably, it can't build mysql2 native extension.

If you're using Ubuntu 14.04 or newer, try `sudo apt-get install ruby-mysql libmysqlclient-dev`.

On older versions of Ubuntu install this: `sudo apt-get install libmysql-ruby libmysqlclient-dev`

On OS X: `brew install mysql`

There are also similar questions: [1](https://stackoverflow.com/questions/3608287/installing-mysql2-gem-for-rails-3), [2](https://stackoverflow.com/questions/4115126/ruby-gem-mysql2-install-failing), [3](https://stackoverflow.com/questions/4297253/install-mysql2-gem-on-snow-leopard-for-rails-3-with-rvm).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T03:12:06.683

我正在使用 LInux 16 Cinnamon 并收到该错误消息。我使用“Resure”的解决方案 sudo apt-get install libmysql-ruby libmysqlclient-dev

然后为项目运行捆绑安装。

有效！

# git - 如何使用 JGit api 检出远程文件？

> ID：11899767
> 
> 赞同：0
> 
> 时间：2012-08-10T10:26:29.510
> 
> 标签：git, jgit

使用命令行 git 命令我可以执行以下操作

```
git checkout ref/origin/remotebranch projectA/* 
```

但是，如果我使用 jgit 执行以下操作，则不会签出 projectA/* 下的文件。

```
 CheckoutCommand checkout= git.checkout();
    checkout.addPath("projectA/*");
    checkout.setName("ref/origin/remotebranch");
    checkout.setAllPaths(false);//tried with both true and false
    checkout.call(); 
```

如何在 JGit 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:02:46.467

我不确定是否支持 glob 表示法，所以试试这个：

```
checkout.addPath("projectA"); 
```

`setAllPaths`应该没有必要。

# php - SEF url 没有名称，带有核心 php 和 .htaccess

> ID：11899769
> 
> 赞同：2
> 
> 时间：2012-08-10T10:26:46.177
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, sef

我想制作 SEF url 因为我也想从 url 中删除文件名。我的网站在核心 php 中，我设法从 url 中删除扩展名，但不知道如何从 url 中删除整个文件名。

当我在谷歌上搜索时，我得到了 .htaccess 的代码

```
 RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d 
    RewriteRule ^(.*)$ index.php/$1 [L] 
```

我不知道如何在 php 中编写标头，以便将其放入相关文件中，但不在 url 中显示文件名。

```
 <a href='http://mysite.com/edit/user/2/1'>click</a> 
```

现在，如果我点击上面的链接，它会使用 url“mysite.com/edit/user/2/1”转到 edit.php，

所以从这里我怎样才能删除“编辑”的文件名。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:38:05.850

为什么？这不是一个 SEO 友好和用户友好的 URL 吗？你为什么要让它变得不友好？但无论如何，我的猜测是你想通过它的外观来指出`/user`：`/edit`

```
RewriteRule ^/?user/*$ /edit.php?type=user&%{QUERY_STRING} 
```

尽管使用此功能会使您的网站变得更糟，并且不仅会增加网站维护而且还会增加用户导航的复杂性。

# objective-c - 如何避免 setStatusBarHidde:NO 后视图向下滑动

> ID：11899770
> 
> 赞同：0
> 
> 时间：2012-08-10T10:26:46.047
> 
> 标签：objective-c, ios, hidden, statusbar, overlap

问题很简单：当我调用时如何避免视图向下滑动：

```
 [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade]; 
```

实际上，我想要获得的结果是状态栏与我的视图重叠。谢谢。

L.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:17:59.213

我认为您可以将视图的 y 位置设置为 -20 以产生这种效果。或者也许只是这样做：

```
 self.view.frame = [UIScreen mainScreen].bounds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:38:26.987

诀窍是：

```
self.wantsFullScreenLayout = YES; 
```

# rest - REST 结构；获取集合的第一个/最后一个元素？

> ID：11899771
> 
> 赞同：2
> 
> 时间：2012-08-10T10:26:48.123
> 
> 标签：rest

我正在研究 REST 接口，但不确定在集合上构建“获取第一个/最后一个元素”的最佳方法？

例如，不同的选项可能是：

```
GET cart/product?id=first_element

GET cart/products?filter=first_element

... something else? 
```

如果有这样做的“标准”方式，它是什么？如果没有标准方法，你会怎么做，为什么？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:29:19.420

我会使用第二个选项：

```
GET /cart/products?filter=first_element 
```

`id`应该保留身份。

你也可以这样做：

```
GET /cart/products/12    # a product identified by ID
GET /cart/products/first # a product identified by a pseudo ID
GET /cart/products/last  # a product identified by a pseudo ID 
```

# android - 如何在布局 xml 中使用自定义视图

> ID：11899772
> 
> 赞同：0
> 
> 时间：2012-08-10T10:26:51.713
> 
> 标签：android, xml

我已经在主活动的 onCreate() 方法中设置了一个自定义视图。

像这样：

```
compassView = new CompassView(this);
setContentView(compassView); 
```

我的问题是。如何在 xml 中引用视图，以便可以将其与其他控件一起放在线性布局中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:35:31.543

First of all, you must override any constructor of your superclass. If you don't do that you will get a run time error and you activity will never be opened. Then you should use the fully qualified class name like this:

```
<your_package_name.your_class_name
   android:id="@+id/mycompass"
   your attributes here
   ...
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:31:37.903

假设您`CompassView`是一个放置在名为的包中的类，

**com.android.sample**

像这样创建一个 XML，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

  <com.android.sample.CompassView 
       android:id="@+id/compassview"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"

      />
</LinearLayout> 
```

现在像往常一样，`setContentView(R.layout.xmlname);`在您的`onCreate()`.

和`compassView = (CompassView)findViewbyId(R.id.compassview);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:32:00.363

setContentView("这里放你的 xml 布局")

在 .xml 布局中，只需简单地添加您的视图：

```
<com.example.widget.CompassView
            android:id="@+id/..."
            style="@style/..." >
    </com.example.widget.CompassView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:32:02.490

您必须在 xml 文件中添加自定义视图，如下所示：

```
<yourpackagename.yourCustomViewClass
        android:id="@+id/myCustomView" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

在此之后，您可以通过其 id 访问此视图，就像您对任何其他视图所做的那样

# c++ - C/C++ 静态库当前目录

> ID：11899775
> 
> 赞同：0
> 
> 时间：2012-08-10T10:26:56.687
> 
> 标签：c++, c, static-libraries

这只是一个快速的问题。据我了解，静态库中的代码在编译时直接包含在.exe中......所以如果我有一些库代码在程序中运行，那么说当前目录是否正确无论.lib在哪里，代码都与.exe的代码相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:28:37.503

lib 在哪里并不重要，即使它是动态链接的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:29:17.377

是，对的。当前目录对进程有意义。所以，公平地说，加载的 DLL 也是一样的

.lib 用作链接器的输入，导致 .exe 不使用它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:30:53.527

是的，一旦您的应用程序是使用静态链接的库构建的，您就不必担心库在哪里。所有代码都包含在可执行文件中。

# ruby - 如何为 Ruby 的 RestClient 设置用户代理？

> ID：11899778
> 
> 赞同：12
> 
> 时间：2012-08-10T10:27:04.997
> 
> 标签：ruby, user-agent, rest-client

我有兴趣在使用 ruby​​ RestClient gem 时设置自己的用户代理。

[http://github.com/archiloque/rest-client](http://github.com/rest-client/rest-client)

但是，我找不到任何有关如何执行此操作的文档。任何指针？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T10:36:50.870

```
RestClient.get 'http://localhost', :user_agent => "myagent" 
```

见[https://github.com/rest-client/rest-client/blob/master/lib/restclient.rb](https://github.com/rest-client/rest-client/blob/master/lib/restclient.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T20:40:09.350

不确定接受的答案是否非常清楚。用户代理仅由请求的标头设置。我在[来源](https://github.com/rest-client/rest-client/blob/master/lib/restclient/request.rb)`:user_agent`中看到的是，他们通过为请求设置标头来设置默认用户代理。这取决于您使用 API 的方式以及如何设置它。请参阅`#default_headers`链接源文件中的方法。

# svn - SVN 可以拉取请求与 GIT 相同吗？

> ID：11899782
> 
> 赞同：28
> 
> 时间：2012-08-10T10:27:20.120
> 
> 标签：svn

我是 SVN 的新手，但知道 GIT。我读了这个问题： [如何在 Git 上发送拉取请求](https://stackoverflow.com/questions/6235379/how-to-send-pull-request-on-git)

一个问题，SVN pull request 可以和 GIT 一样吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-10T10:32:52.853

Git 中的拉取请求通常用于要求某人使用他自己的存储库从另一个存储库（原始存储库的克隆）中提取更改。

SVN 只为每个人使用一个 repo，因此与拉取请求最接近的匹配项是：

*   您在分支中开发了一项功能，并要求主干维护人员将您的分支重新集成到主干中
*   您在自己的主干工作副本中开发了一项功能，并将补丁文件发送给主干维护者，以便将更改提交到主干。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-10T18:01:54.013

这可以在 SVN 中完成，但更复杂，需要二级分支。在您的分支中完成开发后：

1.  从主干创建一个合并（拉）分支并检查它。
2.  将您的开发签出分支合并到“拉”分支中。
3.  运行测试线程并进行比较以验证合并。
4.  与主干集成。

注意 1：根据您的软件基线的大小，这可能非常耗时。
注2：警告；如果您尝试直接将主干与原始开发分支合并（将更新拉入），您将创建一个悖论，该悖论会反转您想要集成的更改。这可能很难恢复。

# .net - 使用 LINQ to XML 删除属性不会持续存在

> ID：11899784
> 
> 赞同：1
> 
> 时间：2012-08-10T10:27:34.693
> 
> 标签：.net, xml, linq, xml-parsing, linq-to-xml

我有以下 xml，我正在尝试使用 LINQ to XML 从中删除所有“xmlns”属性：

```
 <Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <StackPanel>
        <LinearLayout xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly"/>                
        <TextView xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly">

  </StackPanel>
</Window> 
```

使用以下代码。它为文档中的每个“xmlns”属性命中“attributesToRemove.Remove()”。但是当我保存文档时，我仍然拥有原始 XML。任何想法，可能是什么问题？

```
 var sr = new StringReader(richTextBoxOriginalXml.Text);
            XDocument xdoc = XDocument.Load(sr);            
            foreach(var node in xdoc.Descendants().ToList())
            {
                var xmlns = node.Attributes().FirstOrDefault(a => a.Name == "xmlns");
                if (xmlns !=null)
                {
                    var attributesToRemove = node.Attributes("xmlns").ToList();
                    attributesToRemove.Remove();
                }
            }

            var writer = new StringWriter();
            var xmlWriter = new XmlTextWriter(writer);
            xmlWriter.Formatting = Formatting.Indented;
            xdoc.WriteTo(xmlWriter);
            richTextBoxTransformed.Text = writer.GetStringBuilder().ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:38:33.247

就像 Marc Gravell 在我发布之前指出的那样，`xmlns`attribute (unqualified) 本身并不是一个属性，它被认为是元素名称的一部分。

```
<StackPanel xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <LinearLayout xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
    <TextView xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
</StackPanel> 
```

`StackPanel`tag 这里没有属性。然而，它的名字是`{http://schemas.microsoft.com/winfx/2006/xaml/presentation}StackPanel`。

`Name.Namespace`是`{http://schemas.microsoft.com/winfx/2006/xaml/presentation}`（`XNamespace`类型）和`Name.LocalName == "StackPanel"`。

因此，您需要有效地重命名元素。它应该工作。

过度简化（但可编译）的程序：

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace ConsoleApplication
{
    class Program
    {          
        static void Main(string[] args)
        {
            var raw = @"<Window xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
            xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml"">
      <StackPanel>
        <LinearLayout xmlns=""clr-namespace:AndroidAssembly;assembly=AndroidAssembly""/>                
        <TextView xmlns=""clr-namespace:AndroidAssembly;assembly=AndroidAssembly""/>    
  </StackPanel>
</Window>";

            var xml = XElement.Parse(raw);
            var descendants = xml.Descendants().ToArray();
            var stackPanel = descendants.First();
            Console.WriteLine(stackPanel.ToString());

            Console.WriteLine("==================================");
            stackPanel.Name = stackPanel.Name.LocalName; // stripping the namespace off
            Console.WriteLine(stackPanel.ToString());

            Console.ReadLine();
        }
    }
} 
```

输出：

```
<StackPanel xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <LinearLayout xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
  <TextView xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
</StackPanel>
==================================
<StackPanel>
  <LinearLayout xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
  <TextView xmlns="clr-namespace:AndroidAssembly;assembly=AndroidAssembly" />
</StackPanel> 
```

元素的差异`StackPanel`很容易注意到......

顺便说一句，您发布的 XML 中有一个错字（`TextView`标签未关闭），但我无法编辑它 - 编辑必须至少有 6 个字符长:)（为什么是 6 个？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:37:39.213

`xmlns`不仅仅是一个属性；它**定义**了类型。`Window`不仅仅是一个被调用的元素`Windows`，它具有带值的属性`xmlns`；相反：是*在“http://schemas.microsoft.com/winfx/2006/xaml/presentation”命名空间中*`Window`调用的元素。您可以尝试简单地更改命名空间，但我不希望这是合法的（我希望是不可变的）。`Window` *`XName`*

 *又名：您将需要以不同的方式处理此问题。*

# html - 有没有办法在 html 电子邮件中的 Gmail 中设置行高

> ID：11899786
> 
> 赞同：4
> 
> 时间：2012-08-10T10:27:39.247
> 
> 标签：html, css, newsletter, electronic-direct-mail

我编写了一个 HTML 电子邮件。

我尝试使用像素和百分比设置行高内联，而 gmail 似乎忽略了所有内容。有没有办法设置这个或者gmail总是会去掉我的行高值？

伪代码是：

```
<div>
<span style="line-height: 110%">Text content</span>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T10:46:42.360

我总是使用下面的样式来修复 Gmail 中的行高。

```
<style>
.ExternalClass * {
line-height: 100%;
}  
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:29:48.997

您是否尝试过使用其他设备？也许`em`或者只是一个没有单位的乘数？`line-height: 2`例如将 的值加倍`font-size`。

否则，请查看[http://24ways.org/2009/rock-solid-html-emails](http://24ways.org/2009/rock-solid-html-emails)以获取有关 HTML 电子邮件的更多信息，并将您的完整代码发布给我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-27T15:40:04.527

在 中设置行高`<div>`，而不是`<span>`. Gmail 似乎在`<p>`元素中也忽略了它。

# iphone - objective-c 遍历子类类型的数组并调用类方法

> ID：11899788
> 
> 赞同：1
> 
> 时间：2012-08-10T10:27:49.200
> 
> 标签：iphone, objective-c, ios

假设我有一个带有类方法的基类：

> @interface 基础：NSObject
> 
> +（id）方法；
> 
> @结尾

而且我有10个派生类：从派生1到派生10，每个类都覆盖方法：

```
@interface derived1 : base 
@end 
```

现在这就是问题所在，我有一个这样的数组：

> NSArray *array = [NSArray arrayWithObjects:[derived1 class],[derived2 class].......[derived10 class]];

现在我想遍历这个数组并调用每个元素的方法，怎么做？

PS：我需要在foreach循环中一一执行该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:36:21.093

1.  像往常一样迭代
2.  获取对象的类
3.  调用该方法

    ```
    for (id object in objects) {
        [[object class] method];
    } 
    ```

## 编辑

以上是如果您有具体实例（@Alladinian :) 欢呼），否则如果您的示例代码是文字并且您实际上将类放在您刚刚使用的数组中

```
for (id object in objects) {
   [object method];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:38:23.603

Given that you have an array like the one you posted:

```
NSArray *array = [NSArray arrayWithObjects:[derived1 class],[derived2 class]..[derived10 class]];

[array makeObjectsPerformSelector:@selector(method)]; 
```

**EDIT:** OP edited the question and said that he needs to iterate and execute one by one. So go with Paul's answer, it's really what you need :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:43:50.633

Look up NSArray methods. makeObjectsPerformSelector or makeObjectsPerformSelector:withObject: or enumerateObjectsUsingBlock: or enumerateObjectsWithOptions:usingBlock: all do that. Plus you could simply iterate with a for and call the method on each object.

# java - 单击按钮时的 Android HTTP 发布请求

> ID：11899793
> 
> 赞同：0
> 
> 时间：2012-08-10T10:28:31.137
> 
> 标签：java, android, https, request

我想通过单击按钮向我的网站发送 HTTP 发布请求。我搜索了分配只找到了这段代码

```
// Create a new HttpClient and Post Header

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    } 
```

但我不知道单击按钮如何工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:37:58.253

use [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) for Performing Network Opertion on Button Click as:

```
public class onbuttonclickHttpPost extends AsyncTask<String, Void, Void> {
    @Override
    protected String doInBackground(String... params) {
        byte[] result = null;
        String str = "";
       // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

        try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("id", "12345"));
                nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
                StatusLine statusLine = response.getStatusLine();
                if(statusLine.getStatusCode() == HttpURLConnection.HTTP_OK){
                result = EntityUtils.toByteArray(response.getEntity());
                str = new String(result, "UTF-8");
            }
          } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }  
        return str;
    }

    /**
     * on getting result
     */
    @Override
    protected void onPostExecute(String result) {
        // something with data retrieved from server in doInBackground
    }
} 
```

and on Button Click Start AsyncTask onbuttonclickHttpPost as:

```
buttonclick.setOnClickListener(new View.OnClickListener()
        {
         public void onClick(View v) {
         new onbuttonclickHttpPost.execute(null);

     }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:46:58.900

试试这个......它来自我的工作项目

我已经使用`Thread`并`NameValuePair`执行了这个.....

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            1);
                    nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);

                    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now", sb + "");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } /*
                 * catch (ParserConfigurationException e) { // TODO
                 * Auto-generated catch block e.printStackTrace(); } catch
                 * (SAXException e) { // TODO Auto-generated catch block
                 * e.printStackTrace(); }
                 */
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method " + sb.toString());

        return sb.toString();
    } 
```

# android - 在bluestacks应用播放器上通过eclipse调试android应用

> ID：11899794
> 
> 赞同：15
> 
> 时间：2012-08-10T10:28:31.043
> 
> 标签：android, debugging, emulation, bluestacks

我读过几篇文章，BlueStacks App Player 可用于通过 Eclipse 调试 android 应用程序，而不是默认的 android 模拟器。 [示例文章](http://www.jpct.net/forum2/index.php?topic=2665.0)

但我认为这是指 Windows 版本，我无法在 MacOS 上使用它。有谁知道如何在 MAC 上使用 BlueStacks/eclipse 进行调试？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-14T12:29:23.283

```
adb connect localhost:10001 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-16T12:48:19.607

好吧，您可以尝试另一种方式：

`Window->Open Perspective->DDMS`1）首先，在Eclipse下打开DDMS 。

2）然后打开BlueStacks App Player。（保持打开状态）

3) 切换回 Eclipse 之后，您应该注意到`Device`选项卡下有两个模拟器。 ![在此处输入图像描述](../Images/bb3b1f0859725f108d2f5b9afe4537ef.png)

然后单击选项卡`Reset adb`上的小三角形下方`Device`。 ![在此处输入图像描述](../Images/5be744b17fa57ec9798126d4e72f7404.png)

几秒钟后，另一个模拟器将消失，您可以继续下一步。 ![在此处输入图像描述](../Images/f9ede4446bf7f826686d3732cfd9da55.png)

`Window->Open Perspective->Java`4）然后在Eclipse下返回。

5）选择您的项目并右键单击它，选择`Debug As->Debug Configurations` ![在此处输入图像描述](../Images/537feb077da1622604aac6b37039bca4.png)

6）在`Android Application`选择您的配置或创建一个新的。在`Target`选项卡上选择`Always prompt to pick device`After this，然后选择`Apply`then `Debug`。 ![在此处输入图像描述](../Images/85025aba64f48ce2550755f126454b74.png)

7）然后在提示窗口中选择BlueStacks emulator，最后选择`OK`.

或者，您也可以使用上述步骤（稍作改动）在 Eclipse 之前打开 BlueStacks App Player。

欲了解更多信息，请访问以下链接。（但是，中文...）

[http://www.cnblogs.com/hbbbs/archive/2012/10/30/2746950.html](http://www.cnblogs.com/hbbbs/archive/2012/10/30/2746950.html) [http://www.cnblogs.com/hbbbs/archive/2012/10/30/2746979.html](http://www.cnblogs.com/hbbbs/archive/2012/10/30/2746979.html)

希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-16T13:30:56.733

```
C:\>cd Program Files (x86)\Android\android-sdk\platform-tools

C:\Program Files (x86)\Android\android-sdk\platform-tools>adb connect 127.0.0.1:5555
connected to 127.0.0.1:5555

C:\Program Files (x86)\Android\android-sdk\platform-tools> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-01T12:49:25.347

运行 Bluestacks。

在 Windows 中打开**命令提示符。**

使用以下命令转到**平台工具。**

```
cd C:\Users\<username>\AppData\Local\Android\sdk\platform-tools 
```

然后写：

```
adb devices 
```

使用 SDK 工具 27 及更高版本！您将获得adb*检测到*的设备列表。如果安装了 BlueStacks-4，您应该会看到列出的设备 (emulator-555x)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-09T20:48:42.200

BlueStacks 捆绑了自己的`adb`,副本`%PROGRAMFILES(x86)%\BlueStacks\HD-adb.exe`。您可以`connect localhost`使用它或任何其他命令。BlueStacks 3 使用默认端口`5555`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-04T13:05:54.310

对于 Mac 用户： localhost:5037 为我工作

# hadoop - Hadoop 作为数据归档系统

> ID：11899800
> 
> 赞同：1
> 
> 时间：2012-08-10T10:28:45.253
> 
> 标签：hadoop

我正在分析使用 hadoop (HDFS) 作为数据归档解决方案的可能性，该解决方案提供线性可扩展性和更低的每 TB 维护成本。

请让我知道您的建议和参数集，例如 I/O、内存、磁盘，这些参数必须被分析为 hadoop 作为数据归档系统。

在相关查询中，尝试使用 hadoop shell 上传 500MB 大小的文件时，

$ #我们已经使用 dd 创建了 500MB 的文件

$ dd if=/dev/zero of=500MBFile.txt bs=524288000 count=1

$ hadoop fs -Ddfs.block.size=67108864 -copyFromLocal 500MBFile.txt /user/cloudera/

请让我知道为什么**输入文件没有**根据块大小（64MB）进行拆分。这很好理解，因为作为数据存档的一部分，如果我们获得 1TB 文件，它将如何在集群中拆分和分布。

我已经尝试使用单节点 cloudera hadoop 设置进行练习，复制因子为 1。

再次感谢您的出色回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:54:47.493

您可以使用 HDFS 作为归档/存储解决方案，但我怀疑它是最佳的。具体来说，它不像 OpenStack Swift 那样高可用性，也不适合存储小文件
。同时，如果您选择 HDFS，我建议使用面向存储的节点构建集群。我将它们描述为：
a) 放置大而慢的 SATA 磁盘。由于不会不断地读取/写入数据 - 桌面级磁盘可能会 - 这将是一项重大节省。
b) 放置最少的内存 - 我建议使用 4 GB。它不会增加太多成本，但仍然可以进行偶尔的 MR 处理。
c) 单 CPU 就可以了。

关于copyFromLocal。是的，文件正在根据定义的块大小进行拆分。

考虑到复制因子，集群上的分布将在整个集群中均匀分布。HDFS 还将尝试将每个块放在一个以上的机架上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T12:02:50.807

您可以加载`.har`格式的文件。

您可以在此处获得更多详细信息：[Hadoop 档案](http://hadoop.apache.org/docs/r1.2.1/hadoop_archives.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T12:28:06.313

输入很少

1.  在您的解决方案中考虑压缩。看起来您将使用文本文件。您可以实现大约 80% 的压缩。
2.  确保选择 Hadoop 友好（可拆分）压缩

# iphone - 如何创建一个始终指向该位置的组合？

> ID：11899806
> 
> 赞同：0
> 
> 时间：2012-08-10T10:29:00.400
> 
> 标签：iphone, gps, xcode4.3

我正在做一个项目，我需要将指南针指向一个位置。即使用户倾斜 iphone 或移动，我也需要这个指南针始终指向这个位置。我得到了该位置的角度以及当前的航向。但是我不知道如何实现这个指向指南针的功能。有什么可以帮助我的。

```
CLLocationDirection direction = newHeading.magneticHeading;
double radians = -direction / 180.0 * M_PI;
//For Rotate Niddle
CGFloat angle = RadiansToDegrees(radians);

double angletothelocation=[self bearingToLocation:destinationLocation];

[self rotateArrowView:arrowView degrees:(angle+radianangle)]; 
```

但是我的方向错误。有人可以建议我一种方法吗？提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:15:37.617

我们的应用程序正是您想要的这个功能。您的代码有所不同，但我认为您缺少方向修复：

```
self.arrow.transform = CGAffineTransformMakeRotation(toRadian((headingFloat+angle) + orientationCorrection)); 
```

其中方向校正是：

```
- (int)fixOrientation {
    switch ([[UIApplication sharedApplication] statusBarOrientation]) {
        case UIInterfaceOrientationPortrait:
            return 0;
        case UIInterfaceOrientationLandscapeLeft:
            return 90;
        case UIInterfaceOrientationLandscapeRight:
            return 270;
        case UIInterfaceOrientationPortraitUpsideDown:
            return 180;
    }
} 
```

# android - Android：检测应用程序何时被杀死

> ID：11899807
> 
> 赞同：4
> 
> 时间：2012-08-10T10:29:08.060
> 
> 标签：android, kill

有没有办法检测 Android 系统何时杀死我的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T20:22:06.793

经过调查，我想说即使我们尝试使用关闭挂钩，也无法检测您的应用程序是否在应用程序内部被杀死。

# wpf - 设置WPF ColorPicker的控制模板

> ID：11899808
> 
> 赞同：1
> 
> 时间：2012-08-10T10:29:08.843
> 
> 标签：wpf, exception, controltemplate, color-picker, object-reference

我正在尝试将 WPF 颜色选择器的控制模板设置为矩形。我希望只显示一个矩形来代替 ColorPicker ComboBox。但是当我在 ControlTemplate 中放置任何控件时，我会收到“对象引用未设置为对象实例”的错误。

这是我的 wpf 代码：

```
<wpfx:ColorPicker Name="ColorPicker1" Height="30" DisplayColorAndName="False"
                  Margin="29,72,366,209"
                  SelectedColorChanged="ColorPicker1_SelectedColorChanged">
    <wpfx:ColorPicker.Template>
        <ControlTemplate>
            <Rectangle ></Rectangle>
        </ControlTemplate>
    </wpfx:ColorPicker.Template>
</wpfx:ColorPicker> 
```

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:21:08.537

最可能的原因是 ColorPicker 控件在其模板中需要一些元素，通常这些元素具有以“PART_...”开头的特殊名称。我认为为了获得有关遗漏哪个元素的更多信息，您必须查看默认颜色选择器模板并找出其中的哪些元素以及它们具有哪些名称。

可能的修复方案：找到 ColorPicker 控件所必需的控件的名称，并将此名称赋予您的矩形。

这是 ColorPicker 默认模板：

```
 <ControlTemplate TargetType="{x:Type local:ColorPicker}">
           <Grid>
              <ToggleButton x:Name="PART_ColorPickerToggleButton"
                            IsTabStop="True"
                            MinHeight="22" 
                            Background="{TemplateBinding Background}" 
                            BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" 
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                            Padding="{TemplateBinding Padding}"
                            IsChecked="{Binding IsOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                            IsHitTestVisible="{Binding IsOpen, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource InverseBoolConverter}}"
                            Style="{TemplateBinding ButtonStyle}">
                 <Grid Margin="2">
                    <Border x:Name="ColorOnly" Style="{StaticResource ColorDisplayStyle}" />

                    <Border x:Name="ColorAndName" Background="White" Visibility="Hidden">
                       <StackPanel Orientation="Horizontal">
                          <Border HorizontalAlignment="Left" Width="20" Margin="2,1,4,1" Style="{StaticResource ColorDisplayStyle}" BorderThickness="1" BorderBrush="#FFC9CACA" />
                          <TextBlock Text="{Binding SelectedColorText, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center" />
                       </StackPanel>
                    </Border>
                 </Grid>
              </ToggleButton>

              <Popup x:Name="PART_ColorPickerPalettePopup" VerticalAlignment="Bottom" IsOpen="{Binding ElementName=PART_ColorPickerToggleButton, Path=IsChecked}" StaysOpen="False" AllowsTransparency="True" Focusable="False" HorizontalOffset="1" VerticalOffset="1" PopupAnimation="Slide">
                 <Border BorderThickness="1" Background="{StaticResource PopupBackgroundBrush}" BorderBrush="{StaticResource ColorPickerDarkBorderBrush}" Padding="3">
                    <Grid>
                       <Grid.RowDefinitions>
                          <RowDefinition Height="Auto" />
                          <RowDefinition />
                          <RowDefinition Height="Auto" />
                       </Grid.RowDefinitions>

                       <Grid x:Name="_gridStandardColorsHost" Margin="4">
                          <Grid.RowDefinitions>
                             <RowDefinition Height="Auto" />
                             <RowDefinition Height="Auto" />
                             <RowDefinition Height="Auto" />
                             <RowDefinition Height="Auto" />
                          </Grid.RowDefinitions>

                          <!-- Available Colors -->
                          <Grid Grid.Row="1" Visibility="{TemplateBinding ShowAvailableColors, Converter={StaticResource BooleanToVisibilityConverter}}">
                             <Grid>
                                <Grid.RowDefinitions>
                                   <RowDefinition Height="Auto" />
                                   <RowDefinition />
                                </Grid.RowDefinitions>
                                <TextBlock Text="{TemplateBinding AvailableColorsHeader}" Background="AliceBlue" Padding="2" Margin="0,0,0,1" />
                                <ListBox x:Name="PART_AvailableColors"
                                         Grid.Row="1"
                                         ItemsSource="{Binding AvailableColors, RelativeSource={RelativeSource TemplatedParent}}"
                                         Style="{StaticResource ColorListStyle}" />
                             </Grid>
                          </Grid>

                          <!-- Standard Colors-->
                          <Grid Grid.Row="2" Visibility="{TemplateBinding ShowStandardColors, Converter={StaticResource BooleanToVisibilityConverter}}">
                             <Grid>
                                <Grid.RowDefinitions>
                                   <RowDefinition Height="Auto" />
                                   <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock Text="{TemplateBinding StandardColorsHeader}" Background="AliceBlue" Padding="2" Margin="0,1,0,1" />
                                <ListBox x:Name="PART_StandardColors"
                                         Grid.Row="1"
                                         ItemsSource="{Binding StandardColors, RelativeSource={RelativeSource TemplatedParent}}"                                                      
                                         Style="{StaticResource ColorListStyle}" />
                             </Grid>
                          </Grid>

                          <!-- Recent Colors-->
                          <Grid Grid.Row="3" Margin="0,1,0,1" Visibility="{TemplateBinding ShowRecentColors, Converter={StaticResource BooleanToVisibilityConverter}}">
                             <Grid>
                                <Grid.RowDefinitions>
                                   <RowDefinition Height="Auto" />
                                   <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock Text="{TemplateBinding RecentColorsHeader}" Background="AliceBlue" Padding="2" Margin="0,1,0,1" />
                                <ListBox x:Name="PART_RecentColors"
                                         Grid.Row="1"
                                         ItemsSource="{Binding RecentColors, RelativeSource={RelativeSource TemplatedParent}}"
                                         Style="{StaticResource ColorListStyle}" />
                             </Grid>
                          </Grid>
                       </Grid>

                       <!-- ColorCanvas -->
                       <Grid x:Name="_colorCanvasHost" Visibility="Collapsed">
                          <local:ColorCanvas x:Name="PART_ColorCanvas"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             SelectedColor="{Binding SelectedColor, RelativeSource={RelativeSource TemplatedParent}}" />
                       </Grid>

                       <Separator Grid.Row="1" HorizontalAlignment="Stretch" Margin="5,0,5,0" />

                       <!-- More Colors Button -->
                       <ToggleButton x:Name="_colorMode" Grid.Row="2" Content="Advanced" Margin="5" Visibility="{TemplateBinding ShowAdvancedButton, Converter={StaticResource BooleanToVisibilityConverter}}" />
                    </Grid>
                 </Border>
              </Popup>
           </Grid>
           <ControlTemplate.Triggers>
              <Trigger Property="DisplayColorAndName" Value="True">
                 <Setter TargetName="ColorOnly" Property="Visibility" Value="Collapsed" />
                 <Setter TargetName="ColorAndName" Property="Visibility" Value="Visible" />
              </Trigger>
              <Trigger SourceName="_colorMode" Property="IsChecked" Value="True">
                 <Setter TargetName="_colorMode" Property="Content" Value="Standard" />
                 <Setter TargetName="_colorCanvasHost" Property="Visibility" Value="Visible" />
                 <Setter TargetName="_gridStandardColorsHost" Property="Visibility" Value="Collapsed" />
              </Trigger>
           </ControlTemplate.Triggers>
        </ControlTemplate> 
```

# javascript - 使用 javascript/Jquery 获取方括号内的字符串

> ID：11899809
> 
> 赞同：0
> 
> 时间：2012-08-10T10:29:10.050
> 
> 标签：javascript, jquery, regex

我有这个脚本来处理表单并预览背景更改：

```
if(!options) {
        var optionsTemp = $manageBackgroundForm.serializeArray();

        var regex =/\bg[[a-z]+\]/;
        $.each(optionsTemp, function(index, options) {
            var test = options.name.match(regex);
            debug(test[0]); // DONT WORK 

        });

        var options = new Object();
        options.color = 'red';
        options.image = 'test.png';
        options.position = '20px 20x';
        options.attachment = 'fixed';
        options.repeat = 'repeat-x';
        options.size = 'cover';
    }

    $('body').css({
        'background-color': options.color,
        'background-image': 'url('+options.image+')',
        'background-position': options.position,
        'background-attachment': options.attachment,
        'background-repeat': options.repeat,
        'background-size': options.size  //contain
     }); 
```

我的输入就像 input name="bg[color]" 。我像这样使用它来轻松处理 PHP 中的表单。但是我在用javascript处理它时遇到了问题。我想从我的表单中获取所有 BG 选项（并且只有 bg 选项） - 我还有其他输入，例如 val[example]。

我想用选项映射输入。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:01:38.273

这是您的正则表达式的解释：

```
NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  g                        'g'
----------------------------------------------------------------------
  [[a-z]+                  any character of: '[', 'a' to 'z' (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  \]                       ']'
----------------------------------------------------------------------
)                        end of grouping 
```

我确定这不是你想要的。

试试这个：

```
/\bbg\[[a-z]+\]/ 
```

注意`b`单词边界之后。

# magento - 如何通过代码编辑magento主页？

> ID：11899810
> 
> 赞同：4
> 
> 时间：2012-08-10T10:29:14.100
> 
> 标签：magento

你好我正在尝试编辑主页

[http://www.kreatifyazilim.com/magento/](http://www.kreatifyazilim.com/magento/)

比如我想在页面中间写代码，（banner）

您可以在演示中看到的下拉框必须包含在横幅一侧。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T10:41:53.403

转到 Magento 管理员-> CMS-> 页面

选择主页

在内容选项卡中，添加您的下拉列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:27:49.063

创建一个新模板 ( `home.phtml`)。
（复制`design/frontend/base/default/template/page/1column.phtml`）。
并在 CMS 页面设计布局中选择此模板。
您可以自由编辑完整的模板（PHP+HTML）

# r - 将具有不同大小向量的列表转换为平面向量

> ID：11899820
> 
> 赞同：2
> 
> 时间：2012-08-10T10:29:38.547
> 
> 标签：r

我正在努力用向量分析一个相当复杂的列表中的值。它是一个包含将 ARIMA 测试应用于多个时间序列的系数（=向量）的列表。

这些系数向量可能是空的 ( `numeric(0)`)，或者大小不同。一个例子：

```
> test <- list(numeric(0),c(ma1=0.7712434), c(ar1=0.6438842, ar2=-0.3112884))
> test
[[1]]
numeric(0)

[[2]]
      ma1 
0.7712434 

[[3]]
       ar1        ar2 
 0.6438842 -0.3112884 
```

例如，我希望能够轻松选择所有“ar”或“ar1”术语（根据名称进行选择）。我正在努力处理这个复杂的列表。所以我认为最简单的解决方案是将这个向量列表转换为单个向量（忽略空数字）。

对于上面的示例，导致：

```
> c(ma1=0.7712434, ar1=0.6438842, ar2=-0.3112884)
       ma1        ar1        ar2 
 0.7712434  0.6438842 -0.3112884 
```

谁能帮帮我？？

注意：我能够根据名称计算出 AR 术语的数量，见下文。但我无法使用它来提取这些术语的实际值。

```
tempFunName <- function(vec, name) { substr(names(vec),1,2) == name } # info on coef types
termType <- "ar" # all names starting with "ar"
sum(sapply(lapply(test, tempFunName, name=termType), sum, simplify=TRUE)) # all names starting with "ar" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:51:22.323

一种方法是：

```
unlist(test)[grep("^ar", names(unlist(test)))] 
```

`unlist()`只是将列表变成一个向量，然后我们可以从那里通过`grep`. `^`在名称开头搜索模式的方法。

如果你想保持列表形式的输出，你可以尝试：

```
lapply(test, function(x) x[grep("^ar", names(x))]) 
```

## 更新：示例

**注意**：*出于说明目的，我在您的示例数据中添加了更多变量。*

```
test <- list(numeric(0),
             c(ma1 = 0.7712434, star = .001),
             c(ar1 = 0.6438842, ar2 = -0.3112884, par = 0.12345))
lapply(test, function(x) x[grep("ar", names(x))])
# [[1]]
# numeric(0)
# 
# [[2]]
#  star 
# 0.001 
# 
# [[3]]
#       ar1        ar2        par 
# 0.6438842 -0.3112884  0.1234500 
lapply(test, function(x) x[grep("^ar", names(x))])
# [[1]]
# numeric(0)
# 
# [[2]]
# named numeric(0)
# 
# [[3]]
#       ar1        ar2 
# 0.6438842 -0.3112884 
unlist(lapply(test, function(x) x[grep("^ar", names(x))]))
#       ar1        ar2 
# 0.6438842 -0.3112884 
```

# c - 卡尔曼滤波器实现 - 可能有什么问题

> ID：11899821
> 
> 赞同：3
> 
> 时间：2012-08-10T10:29:45.687
> 
> 标签：c, algorithm, logic, implementation, kalman-filter

我很抱歉这么乏味，但我在十几篇文章的帮助下多次审查了我的代码，但我的 KF 仍然无法正常工作。“不起作用”是指 KF 的估计是错误的。这是真实、噪声和 KF 估计位置的不错[粘贴](http://pastebin.com/cNuTq8Yi)（只是一小块）。

我的示例与我发现的每个教程中的示例相同——我有一个位置和速度的状态向量。位置以米为单位，表示空气中的垂直位置。我的真实案例是跳伞（带降落伞）。在我的样本生成数据中，我假设我们从 3000m 开始，速度为 10m/s。

PS：我很确定矩阵计算没问题 - 逻辑一定有错误。

在这里我生成数据：

```
void generateData(float** inData, float** noisedData, int x, int y){
    inData[0][0]= 3000; //start position
    inData[1][0]= -10; // 10m/s velocity; minus because we assume it's falling

    noisedData[0][0]= 2998; 
    noisedData[1][0]= -10;

    for(int i=1; i<x; i++){
        inData[0][i]= inData[0][i-1] + inData[1][i-1]; 
        inData[1][i]= inData[1][i-1]; //the velocity doesn't change for simplicity's sake

        noisedData[0][i]=inData[0][i]+(rand()%6-3); //we add noise to real measurement
        noisedData[1][i]=inData[1][i]; //velocity has no noise
    }  
} 
```

这是我的实现（矩阵初始化基于[Wikipedia Kalman 示例](http://en.wikipedia.org/wiki/Kalman_filter#Example_application.2C_technical)）：

```
int main(int argc, char** argv) {
    srand(time(NULL));

    float** inData = createMatrix(100,2); //2 rows, 100 columns
    float** noisedData = createMatrix(100,2);
    float** estData = createMatrix(100,2);

    generateData(inData, noisedData, 100, 2);

    float sampleRate=0.1; //10hz

    float** A=createMatrix(2,2);
    A[0][0]=1;
    A[0][1]=sampleRate;
    A[1][0]=0;
    A[1][1]=1;

    float** B=createMatrix(1,2);
    B[0][0]=pow(sampleRate,2)/2;
    B[1][0]=sampleRate;

    float** C=createMatrix(2,1);
    C[0][0]=1; //we measure only position
    C[0][1]=0;

    float u=1.0; //acceleration magnitude
    float accel_noise=0.2; //acceleration noise
    float measure_noise=1.5; //1.5 m standard deviation
    float R=pow(measure_noise,2); //measure covariance
    float** Q=createMatrix(2,2); //process covariance
    Q[0][0]=pow(accel_noise,2)*(pow(sampleRate,4)/4);
    Q[0][1]=pow(accel_noise,2)*(pow(sampleRate,3)/2);
    Q[1][0]=pow(accel_noise,2)*(pow(sampleRate,3)/2);
    Q[1][1]=pow(accel_noise,2)*pow(sampleRate,2);

    float** P=createMatrix(2,2); //covariance update
    P[0][0]=0;
    P[0][1]=0; 
    P[1][0]=0; 
    P[1][1]=0;

    float** P_est=createMatrix(2,2);
    P_est[0][0]=P[0][0];
    P_est[0][1]=P[0][1];
    P_est[1][0]=P[1][0];
    P_est[1][1]=P[1][1];

    float** K=createMatrix(1,2); //Kalman gain

    float** X_est=createMatrix(1,2); //our estimated state
    X_est[0][0]=3000; X_est[1][0]=10; 

    // !! KALMAN ALGORITHM START !! //
    for(int i=0; i<100; i++)
    {        
        float** temp;
        float** temp2;
        float** temp3;

        float** C_trans=matrixTranspose(C,2,1);
        temp=matrixMultiply(P_est,C_trans,2,2,1,2); //2x1
        temp2=matrixMultiply(C,P_est,2,1,2,2); //1x2
        temp3=matrixMultiply(temp2,C_trans,2,1,1,2); //1x1
        temp3[0][0]+=R;
        K[0][0]=temp[0][0]/temp3[0][0]; // 1\. KALMAN GAIN
        K[1][0]=temp[1][0]/temp3[0][0];

        temp=matrixMultiply(C,X_est,2,1,1,2);
        float diff=noisedData[0][i]-temp[0][0]; //diff between meas and est

        X_est[0][0]=X_est[0][0]+(K[0][0]*diff);  // 2\. ESTIMATION CORRECTION
        X_est[1][0]=X_est[1][0]+(K[1][0]*diff);

        temp=createMatrix(2,2);
        temp[0][0]=1; temp[0][1]=0; temp[1][0]=0; temp[1][1]=1;
        temp2=matrixMultiply(K,C,1,2,2,1);
        temp3=matrixSub(temp,temp2,2,2,2,2);
        P=matrixMultiply(temp3,P_est,2,2,2,2);  // 3\. COVARIANCE UPDATE

        temp=matrixMultiply(A,X_est,2,2,1,2);
        X_est[0][0]=temp[0][0]+B[0][0]*u; 
        X_est[1][0]=temp[1][0]+B[1][0]*u; // 4\. PREDICT NEXT STATE

        temp=matrixMultiply(A,P,2,2,2,2);
        float** A_inv=getInverse(A,2);
        temp2=matrixMultiply(temp,A_inv,2,2,2,2);
        P_est=matrixAdd(temp2,Q,2,2,2,2); // 5\. PREDICT NEXT COVARIANCE

        estData[0][i]=X_est[0][0]; //just saving here for later to write out
        estData[1][i]=X_est[1][0];
    }

    for(int i=0; i<100; i++) printf("%4.2f  :  %4.2f  :  %4.2f \n", inData[0][i], noisedData[0][i], estData[0][i]); // just writing out

    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T23:06:08.670

看起来您正在为该问题假设一个刚体模型。如果是这种情况，那么对于您正在解决的问题，当您进行流程更新以预测下一个状态时，我不会输入 u。也许我遗漏了一些东西，但输入 u 在生成数据中没有任何作用。

让我换一种说法，将 u 设置为 +1 看起来你的模型假设身体应该在 +x 方向上移动，因为在那个方向上有一个输入，但是测量告诉它去另一个方向。因此，如果您对测量值施加很大的权重，它将向 -ve 方向移动，但如果您对模型施加很大的权重，则它应该向 +ve 方向移动。无论如何，根据生成的数据，我看不出将 u 设置为除零以外的任何值的理由。

另一件事，你的采样率为 0.1 Hz，但是当你生成数据时，你假设它是一秒，因为每个样本，位置都会改变 -10 米每秒。

这是一个 matlab/octave 实现。

```
l    = 1000;
Ts   =  0.1;
y    =  3000; %measurement to be fed to KF
v    = -10; % METERS PER SECOND
t    = [y(1);v]; % truth for checking if its working

for i=2:l
    y(i)   = y(i-1) + (v)*Ts;
    t(:,i) = [y(i);v];          % copy to truth vector
    y(i)   = y(i) + randn;     % noise it up
end

%%%%% Let the filtering begin!

% Define dynamics
A = [1, Ts; 0, 1];
B = [0;0];
C = [1,0];

% Steady State Kalman Gain computed for R = 0.1, Q = [0,0;0,0.1]
K = [0.44166;0.79889];

x_est_post = [3000;0];

for i=2:l
    x_est_pre = A*x_est_post(:,i-1); % Process update! That is our estimate in case no measurement comes in.

    %%% OMG A MEASUREMENT! 
    x_est_post(:,i) = x_est_pre + K*(-x_est_pre(1)+y(i));
end 
```

![在此处输入图像描述](../Images/1832b7778c1d348c530f0233a6f959ac.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:07:28.590

你正在做很多奇怪的数组索引。

```
float** A=createMatrix(2,2);
A[0][0]=1;
A[0][3]=sampleRate;
A[1][0]=0;
A[1][4]=1; 
```

在数组边界之外进行索引的预期结果是什么？

# jasper-reports - 子报告在主报告中的位置

> ID：11899822
> 
> 赞同：1
> 
> 时间：2012-08-10T10:29:49.887
> 
> 标签：jasper-reports

我正在使用*iReport*处理报告。我正在做的是制作一个子报告并在我的主报告的组标题中使用它。但是，当我将子报表位置**Fix 设置为相对于 top**或**Float**时，它会显示数据，但是当我将子报表位置设置为**Fix 相对于 bottom**时，它不会显示任何记录。

那么，我该如何解决这个问题呢？

这是我的主报告的 xml

```
 <groupHeader>
        <band height="133">
            <frame>
                <reportElement uuid="c52d695f-5b19-443e-a243-861ba2406c16" x="92" y="7" width="263" height="118"/>
                <subreport>
                    <reportElement uuid="5e344c57-d559-4fad-b4ac-7670bb25b240" positionType="FixRelativeToBottom" x="41" y="49" width="200" height="28"/>
                    <subreportParameter name="visit_id">
                        <subreportParameterExpression><![CDATA[$F{visit_id}]]></subreportParameterExpression>
                    </subreportParameter>
                    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "report1_subreport2.jasper"]]></subreportExpression>
                </subreport>
            </frame>
        </band>
    </groupHeader> 
```

# qt - 在 Qt 中编译植物样本示例时出错

> ID：11899826
> 
> 赞同：2
> 
> 时间：2012-08-10T10:30:08.877
> 
> 标签：qt, cryptography, hash, botan

我试图找出错误两天，但仍然没有弄清楚这个未知的原因。

我已经配置并编译了 Botan 库。一切正常，但是当尝试编写要运行的示例代码时..

```
S2K* s2k = get_s2k("PBKDF2(SHA-256)");
s2k->set_iterations(4049);
SecureVector<byte> key_and_IV = s2k->derive_key(48, passphrase).bits_of();
SymmetricKey key(key_and_IV, 32); 
```

它说错误：'class Botan::PBKDF' has no member named 'set_iterations'

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:36:58.603

v1.11.1 的 Botan 文档报告该功能`get_s2k()`已被弃用，建议您[`get_pbkdf()`](http://botan.randombit.net/doxygen/namespaceBotan.html#aff3f24dde647603d5c06d80dc11fcacb)改用。

根据文档，`get_sdk(algospec)`只需返回调用的结果，该结果`get_pbkdf(algo_spec)`将为您提供指向`class` [`Botan::PBKDF`](http://botan.randombit.net/doxygen/classBotan_1_1PBKDF.html).

首先，您的代码需要更像：

```
PBKDF *s2k = getpbkdf("PBKDF2(SHA-256)"); 
```

不幸的是，在不知道您想做什么的情况下，`s2k`我无能为力，因为文档没有引用`PBKDF`called的公共成员函数`set_iterations()`。您收到您提到的错误，因为`Botan::PBKDF`确实没有名为`set_iterations`. 您需要阅读文档，弄清楚`set_iterations()`您现在已弃用的示例中的目的是什么，以及如何在较新版本的库中实现该目的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T13:02:53.153

可能你错过了你的图书馆标题......因为你的错误消息说：'没有成员命名......'

# python - 使用 Xcode 在 Mac OSX 上使用 pip 安装 lxml 的 GCC 错误

> ID：11899832
> 
> 赞同：1
> 
> 时间：2012-08-10T10:30:31.983
> 
> 标签：python, xcode, macos, lxml

我是一个菜鸟，试图在我的 Mac 上将 lxml 安装到 Python 的 2.7.3 安装中。

我设法将它安装到 Apple 发行版中，但`pip install lxml`该版本返回错误：

错误：命令“gcc-4.0”失败，退出状态为 1

在 Stackoverflow 上进行了探索，一致认为没有 Xcode，但它肯定是到位的。

任何人都可以帮忙吗？原谅我的无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:32:00.713

lxml 包必须在您的系统上编译（使用 llvm-gcc-XX，它是 gcc 的 Mac OS X 版本），因此为了完成 lxml 的安装，您必须安装 XCode 以及 XCode 命令行工具（对于安装说明看[这里](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)）。就个人而言，我刚刚完成了 Scrapy-0.14 的安装，并以相同的方式编译了 lxml。祝你好运。

# java - 无法从 jsp 页面表单调用 servlet

> ID：11899840
> 
> 赞同：0
> 
> 时间：2012-08-10T10:31:12.433
> 
> 标签：java, forms, jsp, servlets, submit

我有`JoinCustomerToAccountServlet`servlet `src/controller`-

```
@WebServlet("/JoinCustomerToAccountServlet")
public class JoinCustomerToAccountServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

    }

} 
```

`joinCustomerToAccount.jsp`并形成`WebContent/ActionsPages` -

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title></title>
</head>
<body>
        <form action="JoinCustomerToAccountServlet" method="POST">
            Account join to him : <input type="text" name="account" />
            <input type="submit" value="join" />

</body>
</html> 
```

在我填写表格并按下提交按钮后，我得到

```
type Status report

message /MyBankProject/ActionsPages/JoinCustomerToAccountServlet

description The requested resource (/MyBankProject/ActionsPages/JoinCustomerToAccountServlet) is not available. 
```

它看起来像是在他的文件夹下搜索的表单，而不是搜索 servlet 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:34:08.933

因为您的 URL 映射是`/JoinCustomerToAccountServlet`并且因为您的 JSP 位于内部`/MyBankProject/ActionsPages`，所以您必须将表单的操作更改为：

`<form action="../JoinCustomerToAccountServlet"`让它工作。

# asp.net - 在另一台计算机上运行 asp.net mvc 项目

> ID：11899842
> 
> 赞同：0
> 
> 时间：2012-08-10T10:31:22.217
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我已经使用 Visual Studio 2010 创建了一个 asp.net mvc3 项目。我想知道所有菜单和 html 属性是否会出现在合适的位置。我的显示器是 15 英寸的，我想在其他 13 英寸或 17 英寸的计算机上看到我的项目。如何在没有安装 Visual Studio、EF 和...的计算机上运行我的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:06:11.810

我假设所有计算机都在同一个网络上。如果不是这样，这将不起作用（实际上，您将不得不在它们之间建立一个公共网络）。

最简单的做法是确保您已在开发机器上安装了 IIS。

接下来`deploy`将您的 MVC 应用程序连接到本地 IIS。此时，您网络上的其他计算机应该可以看到它。

这是一个类似问题的答案，其中有很多关于如何设置的链接。 [https://stackoverflow.com/a/3632434/52136](https://stackoverflow.com/a/3632434/52136)

# sublimetext2 - 修复 Sublime Text 2 行尾？

> ID：11899843
> 
> 赞同：179
> 
> 时间：2012-08-10T10:31:22.953
> 
> 标签：sublimetext2, line-endings

这是我的`Settings - User`配置：

```
{
    "auto_indent": true,
    "color_scheme": "Packages/Color Scheme - Default/Twilight.tmTheme",
    "default_line_ending": "LF",
    "detect_indentation": true,
    "font_size": 10.0,
    "ignored_packages":
    [
        "Vintage"
    ],
    "indent_to_bracket": false,
    "smart_indent": true,
    "tab_size": 4,
    "translate_tabs_to_spaces": true,
    "trim_automatic_white_space": true,
    "use_tab_stops": true
} 
```

对`default_line_ending`选项的评论说： ![注释 default_line_ending 选项](../Images/99fb378f7a8d958ba75c82c2a1af142c.png)

当我创建一个新文件时，我检查以此处结尾的行：

![检查行尾](../Images/2935bc4f3bb98556f4fd1d8175f92768.png)

如您所见，它仍然是 Windows... 有什么想法吗？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-08-10T10:59:55.310

评论指出

```
// Determines what character(s) are used to terminate each line in new files.
// Valid values are 'system' (whatever the OS uses), 'windows' (CRLF) and
// 'unix' (LF only). 
```

你正在设置

`"default_line_ending": "LF",`

你应该设置

`"default_line_ending": "unix",`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-22T02:03:31.003

[EditorConfig 项目](http://editorconfig.org/)（[Github 链接](https://github.com/sindresorhus/editorconfig-sublime)）是另一个非常可行的解决方案。类似于 sftp-config.json 和 .sublime-project/workspace 类文件，一旦在项目文件夹或父文件夹中设置了 .editorconfig 文件，每次在该目录结构中保存文件时，插件都会自动应用点文件中的设置并为您自动执行一些不同的操作。其中一些是保存 Unix 风格的换行符、添加文件结尾换行符、删除空格和调整缩进制表符/空格设置。

* * *

# 快速示例

使用 Package Control 在 Sublime 中安装 EditorConfig 插件；然后将一个名为的文件 `.editorconfig`放在父目录中（如果您愿意，甚至可以是您的主目录或根目录），其内容如下：

```
[*]
end_of_line = lf 
```

就是这样。每当您在该目录结构中保存文件时，此设置将自动应用 Unix 样式的行尾。你可以做更多很酷的事情，例如。修剪不需要的尾随空格或在每个文件的末尾添加尾随换行符。[更多详细信息，请参考https://github.com/sindresorhus/editorconfig-sublime](https://github.com/sindresorhus/editorconfig-sublime)的示例文件，即：

```
# editorconfig.org
root = true

[*]
indent_style = tab
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.md]
trim_trailing_whitespace = false 
```

该`root = true`行表示 EditorConfig 不会`.editorconfig`在目录结构的上层中查找其他文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T12:59:27.373

将行尾从 LF 更改为 CRLF：

打开 Sublime 并按照以下步骤操作：-

1 按 Ctrl+shift+p 然后安装包名行统一结尾

然后再次按 Ctrl+shift+p

2 在空白输入框中输入“行统一结尾”

3 按两次回车

Sublime 有时可能会冻结，因此会将行尾从 LF 更改为 CRLF

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-28T11:09:59.553

一次（批量）**修改项目的所有文件的**最简单方法是通过[Line Endings Unify](https://packagecontrol.io/packages/Line%20Endings%20Unify)包：

1.  `Ctrl`++类型*inst*`Shift` +选择*Install Package*。`P`
***   输入*line end* + 选择*Line Endings Unify*。*   安装后，`Ctrl`++ `Shift`+`P`输入*end* + 选择*Line Endings Unify*。*   **或**（而不是 3.）复制：

    ```
    {
     "keys": ["ctrl+alt+l"],
     "command": "line_endings_unify"
    }, 
    ```

    到*Preferences -> KeyBindings* + press + +中的*User*数组（右窗格，在打开之后`[`）。*`Ctrl``Alt``L`*** 

 ***正如[另一个答案](https://stackoverflow.com/a/1552782/6225838)中提到的：

> *   回车 ( **CR** ) 字符 ( `0x0D`, `\r`) [...] 早期的 Macintosh 操作系统（OS-9 和更早版本）。
>     
>     
> *   换行 ( **LF** ) 字符 ( `0x0A`, `\n`) [...] 基于 UNIX 的系统 (Linux, Mac OSX)
>     
>     
> *   行尾 ( **EOL** ) 序列 ( `0x0D 0x0A`, `\r\n`) [...]（非 Unix：Windows、Symbian OS）。

如果您有***node_modules*、*build***或其他自动生成的文件夹，请在运行包**之前将其删除。**

运行包时：

1.  底部会要求您通过逗号分隔的列表选择要搜索的**文件扩展名**（键入加快替换速度所需的唯一扩展名，例如`js,jsx`）。
2.  然后询问您**要使用哪个输入行结尾**，例如，如果您需要**LF** 类型`\n`。
3.  按下`ENTER`并等待，直到您看到带有*LineEndingsUnify Complete*的警报窗口。***

# java - 用于 Java 的 Akka EventBus 示例

> ID：11899845
> 
> 赞同：3
> 
> 时间：2012-08-10T10:31:33.707
> 
> 标签：java, akka, publish-subscribe

我需要一些关于如何在 Java（不是 Scala！）中使用 Akka 提供的 EventBus 的建议。我在[http://doc.akka.io/docs/akka/2.0.1/java/event-bus.html中看到了文档](http://doc.akka.io/docs/akka/2.0.1/java/event-bus.html)

我试着自己做，所以我在这里得到了这些代码：

```
public class Subscriber {

public static void main(String args[]){
    final ActorSystem actorSystem = ActorSystem.create("ServerEvents");
    final ActorRef actor = actorSystem.actorOf(new Props(ServerEventHandler.class));
    actorSystem.eventStream().subscribe(actor,ServerMessage.class);
    actorSystem.eventStream().publish(new ServerMessage());
}
  }

public class ServerEventHandler extends UntypedActor {
  @Override
  public void onReceive(final Object message) {
    System.out.println("Got event in thread: " + Thread.currentThread().getName());
    System.out.println("Event: " + message);
  }
} 
```

问题是，我知道

```
actorSystem.eventStream().subscribe(actor,ServerMessage.class);
actorSystem.eventStream().publish(new ServerMessage()); 
```

ServerMessage() 是 sub/pub 的通道和消息，但是 Class ServerMessage 中的确切内容是什么？

如果你们能提供帮助将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:18:14.140

ServerMessage 是示例事件类。基本上你可以把任何类的任何实例放在那里（所以你自己的事件实现），只要你有一个订阅了该类型事件的参与者。

# msbuild - 测试 dll 的 MSBuild 模式匹配

> ID：11899848
> 
> 赞同：2
> 
> 时间：2012-08-10T10:31:40.247
> 
> 标签：msbuild

我有一个 CreateItem 任务来匹配单元测试程序集：

```
<CreateItem Include="%(Solution.RelativeDir)**\bin\$(Configuration)\*Test*.dll">
    <Output ItemName="TestDlls" TaskParameter="Include"/>
</CreateItem> 
```

这个匹配的 dll 像：

*   Company.Product.Component1.Test.dll
*   Company.Product.Component2.UnitTests.dll
*   Company.Product.UnitTestFramework1.dll
*   Company.Product.UnitTestFramework2.dll

我的问题是如何更改匹配模式以仅选择单元测试（具有测试、测试、单元测试或单元测试命名约定）但不选择框架 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:45:47.517

只需增量添加 Test.dll 和 Tests.dll。以下将做你想要的：

```
<CreateItem Include="%(Solution.RelativeDir)**\bin\$(Configuration)\*Test.dll">
    <Output ItemName="TestDlls" TaskParameter="Include"/>
</CreateItem> 
<CreateItem Include="%(Solution.RelativeDir)**\bin\$(Configuration)\*Tests.dll">
    <Output ItemName="TestDlls" TaskParameter="Include"/>
</CreateItem> 
```

或者，您可以添加使用您的原始项目定义，然后删除那些匹配框架模式的文件。例如：

```
<CreateItem Include="%(Solution.RelativeDir)**\bin\$(Configuration)\*Test*.dll">
    <Output ItemName="TestDlls" TaskParameter="Include"/>
</CreateItem> 
<CreateItem Remove="*Framework*.dll" /> 
```

# email - 使用用户在发件人地址中输入的电子邮件发送邮件

> ID：11899854
> 
> 赞同：2
> 
> 时间：2012-08-10T05:46:59.377
> 
> 标签：email, email-address

当用户通过公司的网站发送一些查询时，他也会输入电子邮件，

现在有没有一种方法可以使查询部门收到的电子邮件反映为：

来自：user@xyz.com

至：enquiry@myCompany.com

主题：询价

一些文字

其中“user@xyz.com”是用户在查询表单中输入的电子邮件。

在一些电子贺卡网站上也可以看到同样的情况，您将电子贺卡发送给您的朋友的电子邮件，他们会在“发件人”部分使用您的地址收到它。

如何做到这一点？

**------------编辑-------------**
示例：

前端 ：

向您的朋友发送电子贺卡：您的电子邮件地址：abc@xyz.com 您朋友的电子邮件地址：lmn@pqr.com

然后朋友收到一封电子邮件：

**来自：abc@xyz.com via jkh.hk.dn.net**
至：lmn@pqr.com
主题： ecard ecard
电子邮件

如您所见，虽然电子邮件是发送到电子贺卡网站，但发件人地址反映了用户输入的电子邮件地址。

那么需要一些关于如何实现这一点的帮助吗？任何例子都会更有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:56:21.873

使用“回复”和“发件人”字段可能会更成功，这可能与发件人地址不同，并且大多数邮件客户端应该尊重 - 并且具有较少的“垃圾邮件”内涵：

所以你的表格有：

```
From address: user@abc.com
To address: friend@xyz.com 
```

然后，当您生成电子邮件时，您将其发送为：

```
from: website@example.com // Your domain name, that is allowed to send emails
to: friend@xyz.com
reply-to: user@abc.com 
```

这样，接收邮件服务器可以看到您对电子邮件的来源是否诚实，并且如果他们检查了`from`域的任何 SPF 记录，它们应该与您的服务器匹配。但是，当用户点击“回复”时，电子邮件应该转到回复地址。

如果您真的想将用户的电子邮件设置为`from`字段，那么您应该将系统电子邮件地址设置为`sender`：

```
from: user@abc.com
sender: website@example.com
to: friend@xyz.com
reply-to: user@abc.com 
```

这将导致电子邮件显示为“代表 user@abc.com 来自 website@example.com”。

另请参阅以下堆栈溢出问题：

> [将电子邮件作为服务发送给他人时，我应该使用回复标题吗？](https://stackoverflow.com/q/4728393/33051)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:33:27.173

是的，您可以这样做，但这取决于您的邮件服务器拥有什么权限。当我管理服务器时，我确保禁用此选项。您需要与管理您的 SMTP 服务器的人交谈；然而，作为一名网络开发人员，我知道你为什么想要它，但我强烈建议不要这样做。

您的提议非常危险，因为您在未经他人许可的情况下通过某人的域发送电子邮件。这意味着从技术上讲，我可以访问您的网站并通过您的服务填写任何消息、任何电子邮件地址和“垃圾邮件”。

您最好将电子邮件设置为
From name@Mycompay
To customer@hisDomain
BCC name@MYCompany

# django - Django Contrib 评论：如何覆盖评论的 textarea 小部件？

> ID：11899868
> 
> 赞同：1
> 
> 时间：2012-08-10T10:32:31.370
> 
> 标签：django, django-forms, django-comments, django-widget

使用 django.contrib.comments，我定义了一个自定义评论应用程序。我想覆盖文本区域小部件，使文本框看起来更小。

所以我创建的是这样的：

```
#forms.py
class CustomCommentForm(CommentForm):
    #...otherstuff...

    comment = forms.CharField(label=_('Comment'),
        widget=forms.Textarea(attrs={'rows':4}),
        max_length=COMMENT_MAX_LENGTH) 
```

但实际上我不想重新定义评论字段。我只想重新定义该字段使用的小部件。即似乎只有 ModelForms 可以做的事情：

```
class Meta:
    widgets = {
        'comment': Textarea(attrs={'rows': 4}),
    } 
```

有没有办法在不重新定义字段的情况下重新定义小部件？还是我应该只使用 CSS 设置高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:32:38.420

您是正确的，您只能将`widgets`选项用于模型表单的`Meta`类。

但是，您不需要重新定义整个`comment`字段。相反，覆盖表单的`__init__`方法并更改该字段`widget`。

```
class CustomCommentForm(CommentForm):
    #...otherstuff...

    def __init__(self, *args, **kwargs):
        super(CustomCommentForm, self).__init__(*args, **kwargs)
        self.fields['comment'].widget = forms.Textarea(attrs={'rows':4}) 
```

# javascript - 如何优化创建要在 javascript 字符串中使用的长 html 代码

> ID：11899869
> 
> 赞同：1
> 
> 时间：2012-08-10T10:32:45.413
> 
> 标签：javascript, html

我需要定义包含很长 html 代码的 javascript 变量。

这是一个简短的例子：

```
var text = "Select one item:<br>";
text += "<ul class='thumbnails'><li class='span3'><a href='#' class='thumbnail'><img src='http://placehold.it/260x180' alt=''></a></li></ul>"; 
```

由于 html 会长得多，我宁愿在纯 html 中工作，而不是将文本附加到 javascript 字符串。

我想创建一个单独的 html 文件，但我想这需要 Ajax 调用来获取其内容。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:38:55.110

As N.Zakas said on "[maintainable javascript](http://shop.oreilly.com/product/0636920025245.do)" book, you should «keep html out of javascript» to promote high mantainability of the code through loose coupling of UI layers.

Beside the ajax solution you could also place the markup as a comment in the html file and read it via javascript (as a regular DOM node) or you could use some kind of microtemplating system (e.g. [handlebars](http://handlebarsjs.com/)) and place your markup in a script block (the idea is to put markup where is expected to be found and not into javascript logic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:39:17.263

One possible solution is to use templates. There are a few JavaScript libraries that provide templating, underscore.js is one: [http://underscorejs.org/#template](http://underscorejs.org/#template), or more details on how to use it for templating [http://www.headspring.com/blog/developer-deep-dive/an-underscore-templates-primer/](http://www.headspring.com/blog/developer-deep-dive/an-underscore-templates-primer/)

Plus underscore is great for a number of other things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:38:06.377

Instead of constructing HTML in Javascript as a string, I would rather suggest you to emit those html elements in the page itself and hide while loading. Then in Javascript, you could select that container and display it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:39:48.593

You could break up the text into actual HTML objects.

```
var thumbnailsUL = document.createElement('ul');
for (index in {your-thumbnails-list}) {
  var thumbnail = document.createElement('li');
  thumbnail.innerHTML = {whatever you need, more objects or html as text};
  thumbnailsUL.appendChild(thumbnail);
} 
```

Ideally though, there is no reason to build this IN JavaScript - can you not emit it from the server?

# html - Bootstrap：在模态对话框中，如何使下拉菜单在对话框外展开？

> ID：11899870
> 
> 赞同：28
> 
> 时间：2012-08-10T10:32:51.183
> 
> 标签：html, twitter-bootstrap

示例代码：

[http://jsfiddle.net/vpg5g/](http://jsfiddle.net/vpg5g/)

我想让从按钮下拉的菜单扩展到模态的边框。如您所见，当前状态不可用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-10T12:19:41.847

模态不允许任何溢出，您可以使用以下方法修复它：

```
.modal { overflow: visible; }
.modal-body { overflow-y: visible; } 
```

[工作演示](http://jsfiddle.net/vpg5g/1/)

您可能希望添加一个类以仅将这些规则应用于真正需要它的模式，以防此修复产生错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T17:12:01.953

如果你不能删除溢出： auto 你可以做这样的事情

```
 $('.drop-down-inside-modal').on('click' , '.dropdown-toggle', function(event){
        var self = $(this);
        var selfHeight = $(this).parent().height();
        var selfWidth = $(this).parent().width();
        var selfOffset = $(self).offset();
        var selfOffsetRigth = $(document).width() - selfOffset.left - selfWidth;
        var dropDown = self.parent().find('ul');
        $(dropDown).css({position:'fixed', top: selfOffset.top + selfHeight , left: 'auto', right: selfOffsetRigth ,  width: '160px'});
    });

    function fixDropdownPosition(){
        var openDropdownButton = $('.drop-down-inside-modal.open');
        if($(openDropdownButton).length){
            var selfHeight = $(openDropdownButton).height();
            var selfWidth = $(openDropdownButton).width();
            var openDropdownButtonOffset = $(openDropdownButton).offset();
            var openDropdownButtonOffsetRigth = $(document).width() - openDropdownButtonOffset.left - selfWidth;
            var openDropdown = $(openDropdownButton).find('ul');
            $(openDropdown).css({position:'fixed', top: openDropdownButtonOffset.top + selfHeight , left: 'auto' , right: openDropdownButtonOffsetRigth, width: '160px'});
        };
    };

    $(".modal-body").unbind("scroll");
    $(".modal-body").scroll(function(){
        fixDropdownPosition();
    });

    $( window ).resize(function() {
        fixDropdownPosition();
    }); 
```

# hadoop - Hadoop分布式缓存存档在工作目录中解档

> ID：11899873
> 
> 赞同：1
> 
> 时间：2012-08-10T10:33:12.683
> 
> 标签：hadoop, apache-pig

我正在通过将存档发送到分布式缓存`–Dmapred.cache.archives=hdfs://host:port/path/archive.zip#foldername –D.mapred.create.symlink=yes`，它在工作目录中创建一个新文件夹并取消存档那里的文件。问题是我需要工作目录中的这些文件，并且我已经尝试使用`.`and`./`作为文件夹名称以及发送一个空文件。除了在我的 Java 代码中显式移动文件之外，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:38:28.217

文件在工作目录中的具体需求是什么（所以我可以理解并提出一些替代方案）。

无论如何，看起来分布式缓存中的档案总是会被解压到一个目录中，所以我认为你不能使用档案来解决这个问题 - 但是，根据你希望放置在工作目录中的文件数量，你可以使用分布式缓存中的文件。

例如，使用 GenericOptionsParser 参数，您可以指定要包含的文件和文件夹，然后在工作目录中可用：

```
public static class DistCacheMapper extends
        Mapper<LongWritable, Text, NullWritable, NullWritable> {
    @Override
    public void run(Context context) throws IOException,
            InterruptedException {
        Configuration conf = context.getConfiguration();

        System.err.println("Local Files:");
        listFiles(new File("."), "");
    }

    private void listFiles(File dir, String ident) {
        for (File f : dir.listFiles()) {
            System.out.println(ident + (f.isDirectory() ? "d" : "-") + "\t"
                    + f.getName());
            if (f.isDirectory()) {
                listFiles(f, ident + "  ");
            }
        }
    }
} 
```

例如 with`hadoop jar myjar.jar -files pom.xml,.project,.classpath,src dummy.txt`在 stderr 上给出以下内容（你可以看到它已经占用了 src 文件夹）：

```
-   .classpath
-   .project
d   tmp
-   pom.xml
d   src
  d test
    d   resources
    d   java
  d main
    d   resources
    d   java
      d csw
        d   sandbox
          - DistCacheJob.java
          - .DistCacheJob.java.crc
-   job.jar
-   .job.jar.crc 
```

因此，总而言之，您将不得不在 Dist Cache 文件中列出工作目录中所需的所有文件，并且子目录可以列为档案，也可以列为使用文件。

# ios - Core Data 多线程存储关系

> ID：11899875
> 
> 赞同：5
> 
> 时间：2012-08-10T10:33:14.160
> 
> 标签：ios, multithreading, ios5, core-data, entity-relationship

我的问题很奇怪，我正在寻求帮助。我想向你解释我的系统是如何工作的。我有两个问题。

我正在制作有两张桌子的应用程序。我正在使用核心数据。表是***Category***和***Products***，在核心数据中我建立了一对多关系***Category***可以有多个***Products***，***Product***可以hove一个***Categroy***。

这是基本架构

```
Category {
  site_id
  name
  allProducts ->> Product
}

Product {
  site_id
  name
  category -> Category
} 
```

*   这是简化的模型产品，catwegories 有更多的属性

在该应用程序中，我有更新过程，并且该过程在后台线程中工作。我已经为该线程创建了上下文以及我在该上下文中存储的所有更改。

我在后台线程中执行的所有计算

```
[context performBlock:^{
  // all my operations for updating storing categories and products
}] 
```

**这是更新过程的流程**

1.  从服务器获取带有类别数据的 JSON
2.  从服务器获取带有产品数据的 JSON
3.  从服务器获取带有信息的 JSON 哪个类别有哪些产品`array((category_site_id > array(product_site_id1, product_site_id2...))`

4.  通过类别 JSON 和存储类别实体，我从 JSON 获取名称和 site_id 并创建实体并设置这些属性

5.  传递产品 JSON 并创建产品实体并从 JSON 的属性中设置名称和 store_id

**然后是主要部分**

1.  现在我需要根据在步骤 3 中获得的 JSON 将产品连接到类别，这是一个问题。

我将从 JSON foreach 类别获取所有产品 site_id 作为 NSArray，我使用带有谓词和 IN 标准的 fetch 请求从具有 site_id IN 数组的上下文中获取所有**产品**实体。但我总是得到零结果。这很奇怪，因为我在后台线程的上下文中调用 fetch results，并且我还在第 3 步和第 4 步中更新了该上下文。

然后我尝试下一件事，在第 6 步之前，我`[context save:&error]`添加了大约 30 秒的睡眠时间，当该程序运行到第 6 步之后，所有的工作都非常有趣，我的 fetch 结果获得了带有 IN 标准的谓词的产品。如果您理解我的话，这是我的第一个问题，我无法通过 ID 获取产品我需要等待大约 30 秒才能将上下文存储到 SQLLiteDB，这很奇怪。这也很奇怪，因为当我想通过 id 获取请求获取类别时，我可以毫无问题地获得它***（可能是因为第 5 步大约需要一分钟）。***

我的下一个问题是当我等待 30 秒然后通过 trought 类别时。基于类别 site_id 我从上下文中获取类别实体，并且在第 6 步中，我根据 JSON 获取的产品 site_id 获取所有产品并获取请求，现在我想将产品添加到类别中，然后我调用 next

[category setAllProducts:results] //结果是产品的NSSet，类别是实体对象

NSError *error = nil; [上下文保存：&错误]；

我做那个foreach categroy（在步骤3中从服务器以JSON格式获取）

完成后，我在 UI 上看不到类别中的产品，我也在等待一段时间将所有数据存储在数据库中，但什么也没有，

然后当我停止应用程序并再次运行它时，我可以看到类别中的产品:(

很奇怪的问题请帮帮我我不知道我哪里错了。我可以发布部分代码，代码不小，我根据过程描述寻求帮助。

非常感谢你

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T11:12:45.627

我的理解是您正在使用子上下文。子上下文受到您必须处理的许多（**许多！ ）错误的影响。**

关于该主题的相当不错的文章在这里：

[http://wbyoung.tumblr.com/post/27851725562/core-data-growth-pains](http://wbyoung.tumblr.com/post/27851725562/core-data-growing-pains)

我对此的建议是使用直接连接到商店协调器的上下文，而不是子上下文。使用这样的设置一切都会正常工作。当然，您可以使用私有队列上下文。

# html - iPad、Safari 浏览器中出现异常边距

> ID：11899877
> 
> 赞同：3
> 
> 时间：2012-08-10T10:33:21.900
> 
> 标签：html, css, ios, ipad, safari

我正在测试一个网站：[这个网站](http://freshbeer.lv/final/index.html)

当我偶然发现以下问题时。在我在计算机上测试的所有浏览器（IE、Chrome、Safari、Firefox 等）中，一切看起来都是正确的，但是当我在 iPad 上测试这个网站时，在 safari 浏览器中，我在右侧得到奇怪的边距，我无法显示屏幕截图，但简而言之，所有网站页面都像您在计算机上看到的一样，但移到了左侧（因此右侧有空白区域）。任何人都可以建议是什么原因造成的？

**编辑：**

我注意到这个边距在某种程度上受到您可以在侧面看到的箭头边距的影响（用于通过幻灯片列出）。按钮的样式具有以下 id

```
#prevslide   and   #nextslide 
```

**编辑2：**

由于代码很长，我将在此处发布网站中使用的样式表的链接。

幻灯片样式表、**#prevslide、#nextslide**样式规则可以在第二个样式表

[Style1](http://freshbeer.lv/final/js/slideshow/fade/css/supersized.css)
[Style2中找到](http://freshbeer.lv/final/js/slideshow/fade/theme/supersized.shutter.css)

我用来设置网站外观样式的主要样式表，但我认为问题不在于它。

[主要风格](http://freshbeer.lv/final/css/main.css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:12:59.650

您需要在 ipad（和移动设备）的标头中设置元标记：

```
<meta name="viewport" content="width=device-width" /> 
```

这指示浏览器设置页面正文以匹配平板电脑大小。我不能 100% 确定这是您想要的确切设置，但我没有方便测试的 iPad；无论解决方案如何，它都在这个标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:49:10.663

看起来你的问题是因为你的 CSS 中的 % 和像素的组合。

例如，您的 .header 包装器设置为 100%，但其中的 .in-header 设置为 1020px。只要您的浏览器窗口宽于 1020 像素，这很好，但是当它缩小时，.header 会根据浏览器窗口调整自身大小，而 .in-header 则不会。

在你的 body 元素上设置 min-width 属性，这样它就不会小于你的主页元素的大小：

```
 body {
    min-width: 1020px;
  } 
```

# python - 计算python中的唯一单词

> ID：11899878
> 
> 赞同：5
> 
> 时间：2012-08-10T10:33:25.290
> 
> 标签：python, word-count

直接来说，到目前为止我的代码是这样的：

```
from glob import glob
pattern = "D:\\report\\shakeall\\*.txt"
filelist = glob(pattern)
def countwords(fp):
    with open(fp) as fh:
        return len(fh.read().split())
print "There are" ,sum(map(countwords, filelist)), "words in the files. " "From directory",pattern 
```

我想添加一个代码来计算模式中的唯一单词（此路径中的 42 个 txt 文件），但我不知道如何。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T10:43:09.523

在 Python 中计算对象的最佳方法是使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)为此目的而创建的类。它的作用类似于 Python dict，但在计数时使用起来更容易一些。您可以只传递一个对象列表，它会自动为您计算它们。

```
>>> from collections import Counter
>>> c = Counter(['hello', 'hello', 1])
>>> print c
Counter({'hello': 2, 1: 1}) 
```

Counter 还有一些有用的方法，例如 most_common，请访问[文档](http://docs.python.org/library/collections.html#collections.Counter)了解更多信息。

Counter 类的一种也非常有用的方法是 update 方法。通过传递对象列表实例化 Counter 后，您可以使用 update 方法执行相同操作，它将继续计数而不会删除对象的旧计数器：

```
>>> from collections import Counter
>>> c = Counter(['hello', 'hello', 1])
>>> print c
Counter({'hello': 2, 1: 1})
>>> c.update(['hello'])
>>> print c
Counter({'hello': 3, 1: 1}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:43:17.073

```
print len(set(w.lower() for w in open('filename.dat').read().split())) 
```

> 将整个文件读入内存，使用空格将其拆分为单词，将每个单词转换为小写，从小写单词创建一个（唯一的）集合，对它们进行计数并打印输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:36:32.527

如果要计算每个唯一单词的数量，请使用 dicts：

```
words = ['Hello', 'world', 'world']
count = {}
for word in words :
   if word in count :
      count[word] += 1
   else:
      count[word] = 1 
```

你会得到 dict

```
{'Hello': 1, 'world': 2} 
```

# jquery - jQuery-ui-map plugin on Rails: Map is not responding (can't move or zoom etc.)

> ID：11899879
> 
> 赞同：0
> 
> 时间：2012-08-10T10:33:25.813
> 
> 标签：jquery, ruby-on-rails, google-maps, jquery-ui-map

This html example works properly. It loads Map and it can be moved, zoomed etc.

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
  <script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript" ></script>
  <script src="C:\Sites\MyApp\app\assets\javascripts\mobile\jquery.ui.map.full.min.js" type="text/javascript"></script>
</head>

<body>
  <script>
    $(function() {
      $('#map_canvas').gmap();
    });
  </script>

<div id="map_canvas" style="width:250px;height:250px"></div>

</body>
</html> 
```

But when I put this into my Ruby on Rails application (only difference in 4th script path):

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
  <script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript" ></script>
  <script src="assets\mobile\jquery.ui.map.full.min.js" type="text/javascript"></script>
</head>

<body>
  <script>
    $(function() {
      $('#map_canvas').gmap();
    });
  </script>

  <div id="map_canvas" style="width:250px;height:250px"></div>

</body>
</html> 
```

Map is not movable anymore. It's like static image. Every js file gets loaded and everything is all the same except "jquery.ui.map.full.min.js" filepath changes. That file is loaded properly in both cases and only difference is that, in Rails case that file has one extra blank line and one extra semicolon (;) in the end of the file.

What happens? Has someone else succeeded in combining jquery-ui-map plugin and ruby on rails? Any ideas what's causing this oddity?

I'm using jquery-ui-map-3.0-rc Rails 3.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:16:01.903

尝试`jquery.ui.map.full.min.js`使用[http://jsbeautifier.org/进行 deminify](http://jsbeautifier.org/)

然后重命名`jquery.ui.map.full.min.js`为`map.js`.

这种方式对我有用。

# android - Limiting the width of image to screen width

> ID：11899880
> 
> 赞同：0
> 
> 时间：2012-08-10T10:33:31.610
> 
> 标签：android, image, width, screen

In my app, I am using an image. I do not want the width of image to exceed the width of the screen in any screen size of any density. How to achieve that and what will be issues as I am using only one image for all android densities instead of images of different resolutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:45:13.310

试试这个，但你需要为每个分辨率调整大小的图像

> hdpi、ldpi、mdpi 和 xdpi 分辨率

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/title_bar"
    android:gravity="center_vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:contentDescription="@string/desc"
        android:src="@drawable/YourPicSource" />

</RelativeLayout> 
```

# ajax - 500 System.ServiceModel.ServiceActivationException when making an Ajax call to WCF rest service

> ID：11899881
> 
> 赞同：15
> 
> 时间：2012-08-10T10:33:31.543
> 
> 标签：ajax, wcf

Ajax Call:

```
 $.ajax({
        type: "POST",
        url: "http://SomeService/ServiceName.svc/GetSearchResults",
        data: JSON.stringify({ parameters: serviceParameters }),
        contentType: "application/json; charset=utf-8",
        dataType: "XML",
        success: function (response) {
            $("#xmlText").text(response.xml);
        },
        error: function (msg) {
            alert(msg.toString);
        }
    }) 
```

WCF Interface:

```
[OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Json,
                    UriTemplate = "GetSearchResults")]
        XElement GetSearchResults(inputParameters parameters);

        [OperationContract]
        [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, UriTemplate = "getFile")]
        Stream GetFile(DocInfo info); 
```

Web.config:

```
 <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
  </system.web>

 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

 <system.serviceModel>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
   </serviceHostingEnvironment>
   <standardEndpoints>
     <webHttpEndpoint>
       <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
     </webHttpEndpoint>
   </standardEndpoints>
 </system.serviceModel> 
```

The service is hosted on IIS6.

When I call the service I get the following error message:

```
500 System.ServiceModel.ServiceActivationException 
```

I can call the `GetFile` method and get the response stream but I get the error message when calling `GetSearchResults`.

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-23T05:52:55.470

由于下面提到的原因，我遇到了这个错误

内存门检查失败，因为可用内存（258187264 字节）小于总内存的 5%。因此，该服务将无法用于传入请求。要解决此问题，请减少机器上的负载或调整 serviceHostingEnvironment 配置元素上的 minFreeMemoryPercentageToActivateService 的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-26T12:59:56.277

非常感谢您鼓舞人心的回复和评论。

我实际上遇到了同样的错误，但故事不同：

起初，我收到“404（未找到）”服务器错误，这是因为我没有用于“HTTPS”的传输，而我已经有用于“HTTP”的传输。

`<httpsTransport>`我在我的元素中添加了一个`<binding>`，所以它看起来像这样：

```
<bindings>
  <customBinding>
    <binding name="CustomBinding_ITheService">
      <httpTransport keepAliveEnabled="True" transferMode="Streamed" authenticationScheme="None" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" manualAddressing="true" />
      <httpsTransport keepAliveEnabled="True" transferMode="Streamed" authenticationScheme="None" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" manualAddressing="true" />
    </binding>
  </customBinding>
</bindings> 
```

然后我得到了`500 System.ServiceModel.ServiceActivationException`错误。但是，我浏览了“事件查看器 > Windows 日志 > 应用程序”，发现“对于同一个绑定，不能多次定义传输”。因此，我决定为“HTTPS”传输添加一个带有新绑定的附加端点。

最后，我的配置如下所示：

```
<services>
  <service name="TheService" behaviorConfiguration="WebHttpBehavior_ITheService">
    <endpoint binding="customBinding" bindingConfiguration="CustomBinding_ITheService" contract="ITheService" behaviorConfiguration="EndPointBehavior_ITheService" />
    <endpoint binding="customBinding" bindingConfiguration="CustomBinding_ITheService_Secured" contract="ITheService" behaviorConfiguration="EndPointBehavior_ITheService" />
  </service>
</services>

<bindings>
  <customBinding>
    <binding name="CustomBinding_ITheService">
      <httpTransport keepAliveEnabled="True" transferMode="Streamed" authenticationScheme="None" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" manualAddressing="true" />
    </binding>
    <binding name="CustomBinding_ITheService_Secured">
      <httpsTransport keepAliveEnabled="True" transferMode="Streamed" authenticationScheme="None" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" manualAddressing="true" />
    </binding>
  </customBinding>
</bindings> 
```

然后每件事都按正确的方式进行并完美运行。

**如果您在 Visual Studio 上开发并使用 IIS-Express“ *Cassini* ”，请记住在网站项目的属性中启用 SSL 选项，这会告诉 IIS-Express 为您之前添加到绑定的 HTTPS 传输准备一个基本 URL .**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-19T08:43:31.530

[添加站点绑定](https://i.stack.imgur.com/tubbh.png)转到 IIS => 然后默认网站 => 右键单击​​该 => 编辑绑定 => 单击添加按钮 => 在此处添加 HTTPS 绑定

详细信息在显示的屏幕截图中

# wordpress - Break out of iFrame upon action within

> ID：11899884
> 
> 赞同：0
> 
> 时间：2012-08-10T10:33:48.940
> 
> 标签：wordpress, iframe, breakout

I'm displaying a form within an iFrame.

The form is from another site which I don't control.

Once the form is submitted (via the submit button), I would like the user to be taken to the resulting page but don't want them to have to view that resulting page within the iFrame.

Currently, that 2nd page loads within the iFrame too.

How do I have it break out of the iFrame upon submit?

I'm doing all this on a wordpress page.

JH

# ruby-on-rails - Ruby on Rails：视图更改后，网站未更新

> ID：11899886
> 
> 赞同：3
> 
> 时间：2012-08-10T10:33:57.823
> 
> 标签：ruby-on-rails, ruby, view

我认为我不太了解 rails 如何更新其视图页面。我在索引视图中删除了一段代码，当我去刷新页面时，代码仍然存在。我尝试重新启动服务器，但我想不出还能做什么。一定是一个我还没有学过的简单的东西，因为我是 Rails 新手。谢谢

编辑：

路线

```
 projects GET    /projects(.:format)          projects#index
             POST   /projects(.:format)          projects#create
 new_project GET    /projects/new(.:format)      projects#new
edit_project GET    /projects/:id/edit(.:format) projects#edit
     project GET    /projects/:id(.:format)      projects#show
             PUT    /projects/:id(.:format)      projects#update
             DELETE /projects/:id(.:format)      projects#destroy
      search        /search(.:format)            projects#search
        root        /                            projects#index 
```

配置/路由.rb：

```
FinalApp::Application.routes.draw do
    resources :projects
    match "search" => "projects#search", :as => :search
    root :to => 'projects#index'
end 
```

项目控制器中的索引操作：

```
def index
    @projects = Project.all

respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @projects }
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:12:44.333

如果在编辑 html 后它保持不变，则您没有查看您认为正在查看的内容。

*   也许您同时拥有 index.html.erb 和 index.html.haml 文件？
*   你确定你没有不小心将 index.html.erb 复制到 app/views/projects/ 文件夹之外，所以 Rails 会在那个位置找到那个吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:35:25.260

尝试删除应用程序公用文件夹中的 index.html 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T10:57:48.250

确保您将`config/routes.rb`#index 指向正确的控制器和操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-12T02:15:41.737

我正在做一个教程，并`rails server`在`app`. 我很确定我停止并启动了几次服务器，浏览了目录，然后我做了一些更改，但它们没有显示。我停止了服务器，更改为`app`然后再次启动服务器，我得到了我的预期。如果您遇到问题，可能值得检查一下。

# java - Secure way to send information from Java to database?

> ID：11899891
> 
> 赞同：1
> 
> 时间：2012-08-10T10:34:16.077
> 
> 标签：java, database, security

I need a secure way to send information from a Java application to a database for my website. I currently have a PHP page on the server that accepts the parameters posted from a URLConnection in Java, and then updates the database. My fear is that, if somebody decompiles it, they can see the exact URL and parameters. I am new to this type of development, so I don't know a better/safer way to do it.

What is a better or safer way to get the data to the database?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:43:02.687

如果您想授予应用程序对数据库的访问权限，那么您永远不能 100% 阻止任何模拟您的应用程序行为的应用程序具有相同的访问权限。时期。你只能让你的模式更难被发现。

更好的是让您的服务器（在这种情况下是您的 php 文档）验证它获得的每一个输入，以便排除不良行为。让 php 生成查询，让客户端应用程序只发送所需的数据，如用户名、密码或其他信息。在您的 php 中，您必须做好准备，一切都可以发送，而不仅仅是您期望的数据。使用准备好的语句来防止 sql 注入并使用正则表达式来清理任何给定的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:07:26.823

从听起来，您使用 Java 程序连接到您的 PHP/服务器。如果您担心连接的安全性，您可以使用 HTTPS 建立 SSL 连接（[此处](http://www.mkyong.com/java/java-https-client-httpsurlconnection-example/)示例）

您还可以建立一个质询/响应协议，其中服务器从客户端请求某种密钥，这可以使用一系列滚动的公钥/私钥以及用这些加密的消息，以进一步减少错误输入请求的机会

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:32:21.263

如果我理解的很好，你怕有人会从你的代码url、用户名和密码中找出来，并用这些参数连接到数据库。您可以在网络层防止这种不当行为（即通过配置防火墙仅允许您的 IP 地址访问数据库），或者，如果您无法更改防火墙/路由器配置，则更改数据库配置。例如，PostgreSQL 有一个文件 pg_hba.conf，您可以在其中指定允许访问的 IP 地址列表。但是，您必须防止使用您与数据库的连接的其他漏洞，例如 SQL 注入。

# java - 如何从服务器端控制器返回或调用签名小程序的方法？

> ID：11899892
> 
> 赞同：1
> 
> 时间：2012-08-10T10:34:44.900
> 
> 标签：java, javascript, applet, httpclient, urlconnection

我的下载场景是：当我单击 jsp 上的下载链接时，它调用带有文件 ID 的签名小程序方法，从小程序我通过传递该 ID 调用服务器端方法。我可以在服务器端获取该文件，但我想将该文件返回/传递回我的小程序函数。我的问题是如何返回或将下载的文件传递给我的小程序？或者如何在服务器端设置一个文件来响应对象，这对小程序很有用？

**我的签名小程序：**

```
private static void downloadEncryptedFile(String uuid) throws HttpException, IOException {
  String uri = "http://localhost:8080/encryptFileDownload.works?uuid="+uuid;
  HttpClient client = new HttpClient();
  PostMethod postMethod = new PostMethod(uri);
  postMethod.setRequestHeader("Content-type", "text/xml; charset=ISO-8859-1");
  client.executeMethod(postMethod);
  postMethod.releaseConnection();   
} 
```

**我的服务器端功能：**

```
@RequestMapping(value = "/encryptFileDownload/{uuid}.works", method = RequestMethod.POST)
public String downloadEncryptFile(@PathVariable("uuid") String uuid, HttpSession session, HttpServletResponse response) {
  try {
    if (StringUtils.isNotEmpty(uuid)) {
      LOG.info("-----UUID----");
      Node node = contentRetrieveService.getByNodeId(uuid);
      Node resource = node.getNode("jcr:content");
      response.setContentType("application/octet-stream");
      response.setHeader("Content-Disposition", "attachment; filename=\"" + node.getName() + "\"");
      InputStream in = resource.getProperty("jcr:data").getBinary().getStream();
      ServletOutputStream outs = response.getOutputStream();
      int i = 0;
      while ((i = in.read()) != -1) {
        outs.write(i);
      }
      outs.flush();
      outs.close();
      in.close();
      LOG.info("File Downloaded");
    }
  } catch (Exception e) {
    e.printStackTrace();
  }
  return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:25:38.713

我得到了解决方案；我只是想传递一个文件 id 下载它并将该文件返回到我的小程序，因此我对我的代码进行了更改：

**我的小程序：**

```
try {       
            URL urlServlet = new URL("uri for your servlet");
            URLConnection con = urlServlet.openConnection();
            con.setDoInput(true);
            con.setDoOutput(true);
            con.setUseCaches(false);
            con.setRequestProperty(
                "Content-Type",
                "application/x-java-serialized-object");

            // send data to the servlet
            OutputStream outstream = con.getOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(outstream);
            oos.writeObject(uuid);
            oos.flush();
            oos.close();

            // receive result from servlet
            InputStream instr = con.getInputStream();
            ObjectInputStream inputFromServlet = new ObjectInputStream(instr);
            String name = con.getHeaderField("filename");
            File fi = new File(name);
            int i = 0;
            while ((i = inputFromServlet.read()) != -1) {
                System.out.println(inputFromServlet.readLine());
            }
            inputFromServlet.close();
            instr.close();

        } catch (Exception ex) {
            ex.printStackTrace();
        } 
```

**服务器端功能只需替换为：**

```
OutputStream outs = response.getOutputStream();
                outputToApplet = new ObjectOutputStream(outs);
                int i = 0;
                while ((i = in.read()) != -1) {
                    outputToApplet.write(i);
                } 
```

# javascript - runtinme 中的列重新排序

> ID：11899900
> 
> 赞同：4
> 
> 时间：2012-08-10T10:35:03.303
> 
> 标签：javascript, jquery, datatables

我正在使用 jQuery 的[DataTables](http://datatables.net/)插件，我想在加载数据后重新排序列。我知道我可以在创建表格时重新排序它们。

我想做的是绘制表格，从服务器加载数据，然后根据服务器的响应对列进行重新排序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:45:30.963

可以通过使用 DataTables 插件来做到这一点`ColReorder`。启用插件后，可以`fnColReorder(from, to)`像这样移动列：

```
var table = jQuery("#table_id").dataTable(settings);
table.fnColReorder(4, 10);//move the 4th column on the 10th position
table.fnAdjustColumnSizing();//a good idea to make sure there will be no displaying issues 
```

但是在使用列索引时应该注意：这些是表列数组中的索引。这意味着，索引不必与表中的列号匹配（根据您的规范，可以隐藏某些列）。

# java - 使用 JQuery 使用 Java Web 服务：错误？

> ID：11899902
> 
> 赞同：1
> 
> 时间：2012-08-10T10:35:09.803
> 
> 标签：java, jquery, web-services

我在 Netbeans 7.1.2 中创建了一个 Java Web 服务，并设法通过 netbeans 创建了一个 Java 客户端来测试它，并且它工作正常。然后我尝试创建一个 jQuery 客户端但失败了。

jQuery客户端代码是：

```
$.ajax({
    type: "POST",
    url: "http://luke-test.j.layershift.co.uk/ClubInService/getHello",
    data: "{val:luke}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: OnSuccessCall,
    error: OnErrorCall
});

function OnSuccessCall(response) {
    $tmp = "";
    $.each(response, function(index, element) {
        $tmp += element + ";";
    });
    alert($tmp);
}

function OnErrorCall(response) {
    $tmp = "";
    $.each(response, function(index, element) {
        $tmp += element + ";";
    });
    alert($tmp);
} 
```

我试图调用的函数是：

```
@WebMethod(operationName = "getHello")
public String getHello(@WebParam(name = "val", targetNamespace =
     "http://clubinservice/") String val) {
   return "Hello " + val + "!";
} 
```

使用 jQuery 使用 Java Web 服务时，我收到此错误并且不知道这意味着什么：

> 0;function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}; function (){return s===2?n:null};function (a){var c;if(s===2){if(!o){o={};while(c=bG. exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c};函数(a){ s||(d.mimeType=a);return this};function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this};function () {if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1])) }return this};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0 ],e[1]))}return this};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k =a,o(e[0],e[1]))}return this};function (){return e};function (){return!!i};function (){return!!i};function (a,b,c){i.done(a).fail(b).progress(c);return this};function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this};function (a,b,c){return f.Deferred(function(d){f.each ({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e= b[1],g;f.isFunction(c)?ia:ia})}).promise()};function (a){if(a==null)a=h;else for(var b in h )a[b]=h[b];return a};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&& (k=a,o(e[0],e[1]))}return this};function (){if(c){var a=c.length;n(arguments),j?l=c.长度：e&&e!==!0&&(k=a,o(e[0],e[1]))}return this};function (){if(c){var a=c.length;n(arguments ),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};函数(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];否则 b=a[v.status],v.then(b,b)}返回这个};;0;错误;apply(i,arguments);return this};function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b, "reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?ia:ia })}).promise()};function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a};function ( ){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]) )}return this};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[ 0],e[1]))}返回这个};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&( k=a,o(e[0],e[1]))}return this};function (a){if(a){var b;if(s<2)for(b in a)j[b ]=[j[b],a[b]];否则 b=a[v.status],v.then(b,b)}return this};;0;error;apply(i,arguments);return this};function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b, "reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?ia:ia })}).promise()};function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a};function ( ){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]) )}return this};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[ 0],e[1]))}返回这个};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&( k=a,o(e[0],e[1]))}return this};function (a){if(a){var b;if(s<2)for(b in a)j[b ]=[j[b],a[b]];否则 b=a[v.status],v.then(b,b)}return this};;0;error;延迟（函数（d）{f.each（{完成：[a，“解决”]，失败：[b，“拒绝”]，进度：[c，“通知”]}，函数（a，b）{ var c=b[0],e=b[1],g;f.isFunction(c)?ia:ia})}).promise()};function (a){if(a==null)a =h;else for(var b in h)a[b]=h[b];return a};function (){if(c){var a=c.length;n(arguments),j?l= c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c.length;n (参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this};function (){if(c){ var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this};函数(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status] ,v.then(b,b)}return this};;0;error;延迟（函数（d）{f.each（{完成：[a，“解决”]，失败：[b，“拒绝”]，进度：[c，“通知”]}，函数（a，b）{ var c=b[0],e=b[1],g;f.isFunction(c)?ia:ia})}).promise()};function (a){if(a==null)a =h;else for(var b in h)a[b]=h[b];return a};function (){if(c){var a=c.length;n(arguments),j?l= c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c.length;n (参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this};function (){if(c){ var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this};函数(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status] ,v.then(b,b)}return this};;0;error;e=b[1],g;f.isFunction(c)?ia:ia})}).promise()};function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!== !0&&(k=a,o(e[0],e[1]))}return this};function (){if(c){var a=c.length;n(arguments),j?l= c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c.length;n (参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};函数(a){if(a) {var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b )}返回这个};;0;错误;e=b[1],g;f.isFunction(c)?ia:ia})}).promise()};function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a};function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!== !0&&(k=a,o(e[0],e[1]))}return this};function (){if(c){var a=c.length;n(arguments),j?l= c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c.length;n (参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};函数(a){if(a) {var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b )}返回这个};;0;错误;j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c .length;n(参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};函数(a){ if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then (b,b)}return this};;0;error;j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};function (){if(c){var a=c .length;n(参数),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}返回这个};函数(a){ if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then (b,b)}return this};;0;error;

如果有帮助，请随意尝试并使用 Web 服务上的功能。任何帮助都会很棒！

谢谢

**编辑**

在意识到我应该使用 JSON.stringify 之后：

```
function OnSuccessCall(response) {
    alert(JSON.stringify(response));
}

function OnErrorCall(response) {
    alert(JSON.stringify(response));
} 
```

我收到了不同的错误消息：

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"} 
```

看了[这里](https://stackoverflow.com/questions/7018247/jquery-ajax-error-readystate0-responsetext-status0-statustexterr)和[这里](https://stackoverflow.com/questions/6818939/jquery-post-respond-with-readystate0-status0)之后，我尝试了

```
$.post("http://luke-test.j.layershift.co.uk/ClubInService/getHello",
{val: "John"},
function(data){
    alert(JSON.stringify(data));
}, "json")
.error(function(data){alert(JSON.stringify(data));}); 
```

它还返回了错误消息：

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:32:51.800

*   尝试相对网址
*   使用：contentType：“应用程序/json”，
*   添加：数据类型：“json”，

此外，如果您访问的 url 不是为您的内容提供服务的 url，则浏览器上存在安全性。在这种情况下，您应该阅读有关 jsonp 的信息：

[http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/](http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/)

# iphone - 如何在uiscrollview中捏缩放图像

> ID：11899903
> 
> 赞同：0
> 
> 时间：2012-08-10T10:35:09.773
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有 tableview -> 自定义单元格 -> uiscrollview -> uiimageview

如何捏和缩放uiscrollview ..

```
- (void)scrollViewDidZoom:(UIScrollView *)aScrollView
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
   methods are not working for me. 
```

我的代码是：

```
 - (void)viewDidLoad
    {
        objCellfullscreen.scroll.maximumZoomScale = 6.0f;
        objCellfullscreen.scroll.minimumZoomScale= 0.5f;
        objCellfullscreen.scroll.scrollEnabled = YES;
        objCellfullscreen.scroll.contentSize = CGSizeMake(320, 460);
        objCellfullscreen.scroll.delegate =self;

    }
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *CellIdentifier = @"Cell";

        objCellfullscreen =(cellFullScreen *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

            if (objCellfullscreen==nil) {
              .......
              ...........
              .........
      }
      return  objCellfullscreen;
    }
- (void)scrollViewDidZoom:(UIScrollView *)aScrollView
{

    CGFloat offsetX = (objCellfullscreen.scroll.bounds.size.width > objCellfullscreen.scroll.contentSize.width)?(objCellfullscreen.scroll.bounds.size.width - objCellfullscreen.scroll.contentSize.width) * 0.5 : 0.0;
    CGFloat offsetY = (objCellfullscreen.scroll.bounds.size.height > objCellfullscreen.scroll.contentSize.height)?(objCellfullscreen.scroll.bounds.size.height - objCellfullscreen.scroll.contentSize.height) * 0.5 : 0.0;
    objCellfullscreen.img.center = CGPointMake(objCellfullscreen.scroll.contentSize.width * 0.5 + offsetX,objCellfullscreen.scroll.contentSize.height * 0.5 + offsetY);

}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return objCellfullscreen.img;
} 
```

谢谢..请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:10:16.043

您不应该在 tableview 中有一个滚动视图作为`UITableView`继承自`UIScrollView`，这可能就是为什么滚动视图的某些委托方法不被偶尔调用/调用的原因。

# google-plus - Basic Google Apis Requirement

> ID：11899904
> 
> 赞同：-1
> 
> 时间：2012-08-10T10:35:10.733
> 
> 标签：google-plus

Is it necessary to have Google account to use google+ apis like google hangout etc ? Like with Google maps it is not required.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:01:46.837

是的，您确实需要一个 Google 帐户才能使用 Google+ API。不过，原因会因您有兴趣使用的 API 而异。

**REST API**

您需要 API 密钥才能使用 Google+ REST API。[您可以从Google API Console](https://developers.google.com/console)获取 API 密钥。您需要一个 Google 帐户才能使用 API 控制台。此 API 密钥用于许多事情，包括管理您的[配额](https://developers.google.com/+/api/#quota)。

**环聊 API**

Hangouts API 需要 Google 帐户有两个原因。首先，您必须使用 API 控制台来[创建您的项目](https://developers.google.com/+/hangouts/getting-started#create)。接下来，您必须拥有 Google 帐户才能发起环聊。

# android - 从填充列表生成列表

> ID：11899913
> 
> 赞同：0
> 
> 时间：2012-08-10T10:35:48.980
> 
> 标签：android, listview, custom-adapter

我有以下代码：

```
 // If CheckBox is toggled, update the planet it is tagged with.
        checkBox.setOnClickListener( new View.OnClickListener() {
          public void onClick(View v) {
            CheckBox cb = (CheckBox) v ;
            Planet planet = (Planet) cb.getTag();
            planet.setChecked( cb.isChecked() );
            **ArrayList<String> FavList = new ArrayList<String>();
            FavList.add(planet.name);**
          }
        });        

  public void test (View view){
      Intent myintent = new Intent (getApplicationContext(),     MultipleItemsList.class);
          myintent.putExtra("name", FavList);
          startActivity(myintent);
  }
} 
```

我想要做的是将选中的行星添加到“FavList”，然后在单击按钮时填充列表。方法测试已加入按钮，但我收到错误 FavList 无法解析为变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:46:48.317

这是因为您`FavList`在本地范围内定义。方法未知，`test`因此您收到错误 FavList 无法解析为变量。

全局定义`FavList`并在同一行 ( `FavList = new ArrayList<String>();`) 中对其进行初始化将解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:51:35.620

**1.**您已经**声明并初始化**了**范围**`FavList`内。`Anonymous Inner Class`

 ****2.** `Declare and Initialize`它在`Outer Class` **范围内**，并在内部类中使用它。

**3.**如果您**在方法中声明和初始化它**，请制作它`final`，**以便可以从内部类访问它。****

# javascript - array from parameter comes to parameters

> ID：11899914
> 
> 赞同：2
> 
> 时间：2012-08-10T10:36:02.763
> 
> 标签：javascript, jquery, publish-subscribe

I have a really strange situation in my actual javascript project. I created a custom event and put an array to this event

```
$.publish("merilon/TablesLoaded", getTables()); 
```

the object which subscribed this event didn't get with

```
$.subscribe("merilon/TablesLoaded", myfunc) 
```

the two parameters event and the array in the function myfunc. Instead it get event and then each entry from the array as following parameter

so what i expectet is

```
myfunc(event, [obj1, obj2, obj3 ... objn]){...} 
```

but i get

```
myfunc (event, obj1, obj2, obj3 ... objn){...} 
```

I don't want a workaround. What i need is to understand why this happen and how i can prevent this. Anyone an idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T16:11:27.907

如上所述：

```
(function($)
 {
 var o = $({}); 
 $.each(
       { on : "subscribe", trigger : "publish", 
         off : "unsubscribe" }, 
         function(key, api)
           { 
           $[api] = function()
                       {
                       o[key].apply(o, arguments); 
                       } 
            }
       ); 
       })(jQuery); 
```

# javascript - javascript prototyping explain

> ID：11899918
> 
> 赞同：0
> 
> 时间：2012-08-10T10:36:16.107
> 
> 标签：javascript, jquery, prototype

> **Possible Duplicate:**
> [JavaScript Prototype explanation needed](https://stackoverflow.com/questions/7160310/javascript-prototype-explanation-needed)

I have seen some where else this code format. can anybody explain this.

```
var readme =function(){

//some code goes here

}

readme.prototype={

//some methods
}
var obj= new readme(); 
```

Please explain the code I am very new to use prototyping in javascript.

Is there any alternate solution in jquery instead of prototyping.

# api - bloomberg API - Field Search Request

> ID：11899919
> 
> 赞同：1
> 
> 时间：2012-08-10T10:36:18.687
> 
> 标签：api, search, request, field, bloomberg

How to make use of “category” according to “A.3.4 Field Search Request” of developers guide? The Bloomberglp.Blpapi.dll is from blpapi_dotnet_3.4.8.1., development by C# .net.

I used the following code in order to get the information but it does not work.

```
 Service refDataSvc = session.GetService("//blp/refdata");
        Request request = refDataSvc.CreateRequest("ReferenceDataRequest");
        request.Append("securities", "/isin/CNE1000002Q2 HK"); 
        Element element = request.GetElement("include");
        element.SetElement("productType", "Equity");
        element.SetElement("fieldType", "Static");
        Element element1 = element.GetElement("category");
        element1.AppendValue("Ratings");
        element1.AppendValue("Analysis");
        element1.AppendValue("Corporate Actions");
        session.SendRequest(request, null); 
```

I also tried other ways

a)

```
 Service refDataService = session.GetService("//blp/refdata");
        Request request = refDataService.CreateRequest("ReferenceDataRequest");
        Element securities = request.GetElement("securities");
        securities.AppendValue("IBM US Equity");
        Element fields = request.GetElement("fields");
        fields.AppendValue("PX_LAST");
        Element element1 = fields.GetElement("category");
        element1.AppendValue("Corporate Actions");
        session.SendRequest(request, null); 
```

b)

```
 Service refDataService = session.GetService("//blp/refdata");
        Request request = refDataService.CreateRequest("ReferenceDataRequest");
        Element securities = request.GetElement("securities");
        securities.AppendValue("IBM US Equity");
        Element element1 = request.GetElement("category");
        element1.AppendValue("Corporate Actions");
        session.SendRequest(request, null); 
```

Both are not successful. Could anyone advise me on this?

# emacs - Defining environment variables in Linux for Emacs access

> ID：11899924
> 
> 赞同：0
> 
> 时间：2012-08-10T10:36:29.377
> 
> 标签：emacs, elisp

On Macs, defining environment variables in the environment.plist will allow you to use environment variables in Emacs.app. On Linux, is there such an equivalent?

I don't want to use the environment variables in one of the shell or terminal emulators but also for `find-file` (C-x C-f), `shell-command` (C-!), etc. and I have a lot of paths defined as environment variables that would be helpful here. For instance, finding a file with `find-file` can be $WORK/projectname and so on.

I suppose the most straightforward way is to use `setenv` within `.emacs`, but as I have a lot of such variables it would be better if I could define it once in an external file and have Emacs read it in.

**Edit:** Sorry for the confusion. This question is specifically addressing issue of Emacs access, as variables defined in ~/.bashrc is not available to Emacs until shell, eshell, or term is invoked.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:20:18.180

这里是一个脚本，它定义了几个环境变量，由 Emacs 以批处理模式读取

[http://bazaar.launchpad.net/~python-mode-devs/python-mode/python-mode/view/head:/test/python-mode-tests.sh](http://bazaar.launchpad.net/~python-mode-devs/python-mode/python-mode/view/head:/test/python-mode-tests.sh)

从 lisp 获取 $HOME 例如使用 (getenv "HOME")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:31:41.330

为了能够访问您的变量，您`.bashrc`需要从 bash shell 启动 emacs。如果您只是单击一个图标，`.bashrc`则不会读取该图标，并且您将无权访问您的变量。

如果您绝对无法从 bash shell 启动 emacs，请找到一个由您的桌面环境加载的 init 文件。就我而言，它是`.xsession`。我在其中导出的任何变量都可用于 emacs。

要访问环境变量，请使用`getenv`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:42:41.553

如果您在 ~/.bashrc 中定义环境变量，则它们在用户 shell 中可用于所有命令。正确的语法是：

```
export VARIABLE="value" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T10:43:25.307

您可以`.bashrc`在您的主目录中编辑您的，您可以在其中添加您自己的别名、定义环境变量并为您的自定义脚本添加路径。

# c++ - async_receive_from stops receiving after a few packets under Linux

> ID：11899926
> 
> 赞同：3
> 
> 时间：2012-08-10T10:36:36.093
> 
> 标签：c++, linux, udp, boost-asio

I have a setup with multiple peers broadcasting udp packets (containing images) every 200ms (5fps).

While receiving both the local stream as external streams works fine under Windows, the same code (except for the `socket->cancel();` in Windows XP, see comment in code) produces rather strange behavior under Linux:

*   The first few (5~7) packets sent by another machine (when this machine starts streaming) are received as expected;
*   After this, the packets from the other machine are received after irregular, long intervals (12s, 5s, 17s, ...) or get a time out (defined after 20 seconds). At certain moments, there is again a burst of (3~4) packets received as expected.
*   The packets sent by the machine itself are still being received as expected.

Using Wireshark, I see both local as external packets arriving as they should, with correct time intervals between consecutive packages. The behavior also presents itself when the local machine is only listening to a single other stream, with the local stream disabled.

This is some code from the receiver (with some updates as suggested below, thanks!):

```
Receiver::Receiver(port p)
{
  this->port = p;
  this->stop = false;
}

int Receiver::run()
{
  io_service io_service;
  boost::asio::ip::udp::socket socket(
    io_service,
    boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(),
    this->port));
  while(!stop)
  {
    const int bufflength = 65000;
    int timeout = 20000;
    char sockdata[bufflength];
    boost::asio::ip::udp::endpoint remote_endpoint;
    int rcvd;

    bool read_success = this->receive_with_timeout(
           sockdata, bufflength, &rcvd, &socket, remote_endpoint, timeout);

    if(read_success)
    {
      std::cout << "read succes " << remote_endpoint.address().to_string() << std::endl;
    }
    else
    {
      std::cout << "read fail" << std::endl;
    }
  }
  return 0;
}

void handle_receive_from(
  bool* toset, boost::system::error_code error, size_t length, int* outsize)
{
  if(!error || error == boost::asio::error::message_size)
  {
    *toset = length>0?true:false;
    *outsize = length;
  }
  else
  {
    std::cout << error.message() << std::endl;
  }
}

// Update: error check
void handle_timeout( bool* toset, boost::system::error_code error)
{
  if(!error)
  {
    *toset = true;
  }
  else
  {
    std::cout << error.message() << std::endl;
  }
}

bool Receiver::receive_with_timeout(
  char* data, int buffl, int* outsize,
  boost::asio::ip::udp::socket *socket,
  boost::asio::ip::udp::endpoint &sender_endpoint, int msec_tout)
{
  bool timer_overflow = false;
  bool read_result = false;

  deadline_timer timer( socket->get_io_service() );

  timer.expires_from_now( boost::posix_time::milliseconds(msec_tout) );
  timer.async_wait( boost::bind(&handle_timeout, &timer_overflow,
    boost::asio::placeholders::error) );

  socket->async_receive_from(
    boost::asio::buffer(data, buffl), sender_endpoint,
    boost::bind(&handle_receive_from, &read_result,
    boost::asio::placeholders::error,
    boost::asio::placeholders::bytes_transferred, outsize));

  socket->get_io_service().reset();

  while ( socket->get_io_service().run_one())
  {
    if ( read_result )
    {
      timer.cancel();
    }
    else if ( timer_overflow )
    {
      //not to be used on Windows XP, Windows Server 2003, or earlier
      socket->cancel();
      // Update: added run_one()
      socket->get_io_service().run_one();
    }
  }
  // Update: added run_one()
  socket->get_io_service().run_one();
  return read_result;
} 
```

When the timer exceeds the 20 seconds, the error message "Operation canceled" is returned, but it is difficult to get any other information about what is going on.

Can anyone identify a problem or give me some hints to get some more information about what is going wrong? Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:15:40.600

好的，您所做的是，当您调用 时`receive_with_timeout`，您正在设置两个异步请求（一个用于接收，一个用于超时）。当第一个完成时，您取消另一个。

但是，您永远不会`ioservice::run_one()`再次调用以允许它的回调完成。当您在 boost::asio 中取消操作时，它会调用处理程序，通常带有指示操作已中止或取消的错误代码。在这种情况下，我相信一旦您销毁了最后期限服务，您就会有一个处理程序悬空，因为它有一个指向堆栈的指针，用于存储结果。

解决方法是在退出函数之前再次调用run_one()处理取消的回调结果。您还应该检查传递给超时处理程序的错误代码，并且仅在没有错误时将其视为超时。

此外，在您确实有超时的情况下，您需要执行`run_one`以便`async_recv_from`处理程序可以执行，并报告它已被取消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:47:47.293

在使用 Xubuntu 12.04 进行全新安装而不是使用 Ubuntu 10.04 进行旧安装之后，现在一切都按预期工作。也许是因为新安装运行了更新的内核，可能具有改进的网络？无论如何，使用较新版本的发行版重新安装解决了我的问题。

如果其他人在使用较旧内核时遇到意外的网络行为，我建议在安装了较新内核的系统上进行尝试。

# javascript - Regex to allow hypen & number only

> ID：11899928
> 
> 赞同：3
> 
> 时间：2012-08-10T10:36:50.873
> 
> 标签：javascript, jquery, regex

I am using the RegEx `^[0-9]+$"` to allow only digits. I want to allow hyphens `-` & spaces also.

Can any one help me to modify the RegEx to a proper one?

I was using following JS code to achieve the same, but in this way if the user is copying & pasting the text then the key press is not getting accounted.

```
//Allowed characters are : 8 = Back space,
//9 = Horizontal tab, 27 = esc, 127 = Delete,
//13 = Enter digits = 48 to 57, 45 = hypen

$('#PostalCode').keypress(function (e) {
    var key = (e.keyCode ? e.keyCode : e.which);
    return (key == 8 || key == 9 || key == 127 || key == 27 || key == 13 || key == 45 || (key >= 48 && key <= 57));
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T10:39:49.757

You can add a `-` and space in the character class like so:

```
^[0-9 -]+$ 
```

Be sure to put the `-` either in the back or front (as it won't be mistaken for a range, then), or escape it:

```
^[0-9 \-]+$ 
```

You could also use `\d` instead of `0-9`, as they're equivalent:

```
^[\d -]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:38:23.667

use `^[\d-\s]+$` to allow hyphens also

# c# - Dynamic DataGrid Headers

> ID：11899935
> 
> 赞同：0
> 
> 时间：2012-08-10T10:37:53.613
> 
> 标签：c#, wpf, datagrid

I've a problem where i need to get the total number of columns, which defines the total columns. Currently i have a function which dictates the header text on the DataGrid.columns.

```
public static string ColumnHeader1 = Properties.Settings.Default.ColumnHeader1;

public void dataGridHeaders()
    {
        dataGrid.Columns[0].Header = ColumnHeader1;
        dataGrid.Columns[1].Header = ColumnHeader2;
        dataGrid.Columns[2].Header = ColumnHeader3;
        dataGrid.Columns[3].Header = ColumnHeader4;
        dataGrid.Columns[4].Header = ColumnHeader5;
        dataGrid.Columns[5].Header = ColumnHeader6;
        dataGrid.Columns[6].Header = ColumnHeader7;
        dataGrid.Columns[7].Header = ColumnHeader8;
     } 
```

the string vars being read in from an xml settings file. What i'm looking to do is depending on how many strings in the xml file depicts how many columns there will be at runtime. Or adding an int var say..

```
public static int totalNumberOfColumns = 8; 
```

and then iterating through a loop adding the columns.

are any of these ways possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:48:02.033

将 XML 文件中的列标题放入字符串列表

```
List<string> columnHeaderList = new List<string>();
foreach (string header in XmlColumnList)
    columnHeaderList.Add(header); 
```

`XmlColumnList`保存值的数组在哪里。现在添加以下方法，该方法将根据需要添加所有可用的列标题。

```
private void DataGridHeaders(List<string> headerList)
{
    for (int i = 0; i < headerList.Count; i++)
        dataGrid.Columns[i].Header = headerList[i];
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:03:32.130

```
 var xmlSample = @"<DataGridColumnsHeader>
                            <ColumnHeaderText>Name</ColumnHeaderText>
                            <ColumnHeaderText>Country</ColumnHeaderText>
                            <ColumnHeaderText>Phone</ColumnHeaderText>
                          </DataGridColumns>";

        var counter = 0;
        var elementCount = XDocument.Load(new System.IO.StringReader(xmlSample)).XPathSelectElements("//ColumnHeaderText").Count();
        foreach (var element in XDocument.Load(new System.IO.StringReader(xmlSample)).XPathSelectElements("//ColumnHeaderText"))
        {
            dataGrid.Columns[counter].Header = element.Value;
            counter++;
        } 
```

希望这可以帮助！

# xml - 比较效率：从 XML 转换为 XML 的 XSLT 与 XML-Parsing

> ID：11899937
> 
> 赞同：0
> 
> 时间：2012-08-10T10:37:57.327
> 
> 标签：xml, xslt, dom, xml-parsing, jdom

我在一篇技术论文中读到，使用 XSLT 在 XML 文件中进行修改比使用 XML 解析器（如 DOM、JDOM、SAX、JSoup 等）更有效和更可取。所以我想知道 XSLT 是哪些参数比 XML 解析器更有效且更易于使用。（XSLT 是否提供更通用和更简单的解决方案？）谢谢。

例如：如果我有一个 XML 文件：

```
<node1>
<node2> TEXT </node2>
</node1> 
```

我需要输出为：

```
<node1>
<node2> TEXT </node2>
<script src="xyz.js"></srcipt>
</node> 
```

然后我可以为此编写一个 XSLT 以获得所需的输出，或者我可以使用 XML 解析器（DOM、SAX 等）编写一个 Java 程序以在所需的位置插入所需的元素并获得所需的输出。因此，为此我读到 XSLT 被认为更可取和更有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:54:55.310

效率是一个透视的概念......

一个好的 XSLT 转换文档可能非常小，并且需要一个有经验的“XSLT 专家”几分钟的时间来整理。从“发展”的角度来看，这将是非常有效的。

但就 CPU 周期而言，XSLT 选项可能不是最有效的。

一个好的“直接”（DOM/JDOM/SAX/whatever）进程编程将比 XSLT 更快，甚至更快的是非基于 XML 的进程......（如“sed”或“awk”） .

所以，我会挑战你的“技术论文”的结论。在许多情况下，XSLT 比其他解决方案“更受欢迎”，因为它（对于专家）更容易维护、更改等。但至于“效率”，技术论文必须首先定义它的含义。

底线是 XSLT 位于某些 XML 模型（SAX/DOM/JDOM/等）之上，因此它永远不会像原始模型那样高效......然后所有 XML 模型都效率低下，如果你也摆脱那一层。

罗尔夫

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T17:14:29.860

对于许多小的转换，成本主要由解析和序列化决定，与转换逻辑是用 XSLT 还是 Java 编写的无关。（所以用 XSLT 编写它，因为这样工作量少）。

如果转换变得更加复杂，那么聪明的 Java 程序员可能会胜过 XSLT 引擎，但普通的 Java 程序员不会。好吧，你知道你很聪明。但平均而言，你可能是平均水平。

# java - 当我将代码提取到依赖项时，我是否应该重新组织我的测试

> ID：11899947
> 
> 赞同：1
> 
> 时间：2012-08-10T10:38:34.967
> 
> 标签：java, unit-testing, testing, tdd

我正在练习 TDD，并且我已经完成了满足我的测试的最简单的实现。现在在第二次和第三次测试之后，我发现我可以将我的逻辑部分提取到依赖关系中。我应该如何处理现有的测试？我应该让它们保持原样并间接测试这种依赖关系吗？或者我应该“重写”我的测试并在原始案例中使用存根/模拟将它们分成几部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:46:05.340

如果可以，我会保留您的原始测试，因为它们是作为*回归*测试运行的。即，现在您已经重新编写了原始代码，测试是否仍然有效。

然后，您可以围绕提取的功能编写其他测试。此时编写更复杂的测试以直接测试提取的功能而不是通过您已识别/重构的集成层可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:51:02.280

我认为那里没有灵丹妙药的答案。仅根据您的描述，我倾向于：

1.  保持现有测试不变
2.  专门为提取的依赖项添加新测试

如果您最终完全复制了测试代码，您可能想要减轻，但重要的是继续测试“完全集成的功能”是否按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:46:09.113

在`refactor`阶段`Test Driven Development`，它可能是业务代码或相应测试的重构。因此，在重构代码时，您也应该采取措施重构测试用例以使它们通过。

[http://en.wikipedia.org/wiki/Test-driven_development](http://en.wikipedia.org/wiki/Test-driven_development)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T20:24:46.137

提取到依赖项可能是重构，因为整体行为保持不变，您只需将其分布在更多类中。重构是 TDD 周期中的第三步也是最后一步，并且在您的测试为绿色之后发生，无需添加新测试。所以这就是我要做的：

*   从所有测试都是绿色的状态开始。
*   将行为 B 从 Class1 提取到 Class2。
*   检查损坏的测试。如果没有，那么要么你忘了测试 B，要么你的重构工具有超能力。
*   更正测试行为 B 的单元测试，使其在 Class2 而不是 Class1 上运行。
*   （可选）创建协作测试，验证 Class1 与 Class2 正确对话，反之亦然。您可能需要为此使用模拟和/或存根。

# javascript - How can I get number of child windows for a browser

> ID：11899953
> 
> 赞同：1
> 
> 时间：2012-08-10T10:38:57.760
> 
> 标签：javascript, jquery, jquery-plugins, dom-events

I have one icon (say open) in home page. When I click on this icon one child window will be open and the icon in that home page is also changed to 'close icon'. When close this popup window the icon should be same as previous icon (i.e. open icon) in home page. It's working fine when I stay on the same page.

But when redirecting from home page to next page the entire page gets reloaded. And the default image (open icon) is displaying even if the popup window is opened.

Now my requirement is:

1.  At the time of page redirection the image should be loaded based upon the popup window. i.e. if popup window is open it should display the **close** icon otherwise it display **open** icon.

2.  If page is refreshed or redirecting to another page the reference of the popup window is removed. then how can I get the reference of that popup window in a redirecting page.

3.  How to count the number of child windows for a browser

**EDIT:**

I have tried the following solutions:

1.  I set cookie at the time of opening a popup window and reset that cookie whenever I have closed that popup window. But the problem is, at the time of page redirection if I close the popup window the cookie is not reset to it's previous value, because the page is still in processing.

2.  same problem with the session variable also

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:42:07.327

打开和关闭时设置 cookie 或会话变量。这样您就可以在新请求期间记住弹出窗口的状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:23:42.703

当您从一页转到下一页时，您会丢失对弹出窗口的引用。但弹出窗口不会丢失对主窗口的引用。window.opener 将始终指向打开它的窗口，即使页面发生更改。使用此事实在导航事件后重新建立窗口之间的通信。您可能需要使用间隔函数来探测主窗口，因为我认为您无法监听事件。

# java - Using Android USB Host API to read my USB game controller/Or other USB device data

> ID：11899957
> 
> 赞同：4
> 
> 时间：2012-08-10T10:39:30.007
> 
> 标签：java, android, android-intent, usb

I am trying to use Android USB Host API to read my USB game controller data, once I get this to work, I will connect other device to test. My game controller is connected to my Android phone using OTG cable. I am now able to get device, endpoints information, but I don't know how to read the raw data and display it.

Can someone please help me? Some example codes will be appreciated.

```
TextView countDisplay;
    ArrayList<String> listItems = new ArrayList<String>();
    ArrayAdapter<String> adapter;
    String values = "";
    UsbManager mManager;
    UsbDevice device = null;
    private byte[] bytes;
    private static int TIMEOUT = 0;
    private boolean forceClaim = true;
    static PendingIntent mPermissionIntent;
    UsbDeviceConnection connection = null;
    UsbEndpoint InputEndpoint = null;
    UsbEndpoint OutputEndpoint = null;
    private Handler mHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mManager = (UsbManager) getSystemService(Context.USB_SERVICE);
    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(
            "com.android.example.USB_PERMISSION"), 0);
    IntentFilter filter = new IntentFilter();
    filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);
    filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
    registerReceiver(mUsbReceiver, filter);

    HashMap<String, UsbDevice> deviceList = mManager.getDeviceList();
    values = values + "deviceListSize:" + deviceList.size() + ",tostring:"
            + deviceList.toString();
    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
    while (deviceIterator.hasNext()) {
        device = deviceIterator.next();
        values = values + ",device id:" + device.getDeviceId()
                + ",device name:" + device.getDeviceName();
        values = values + ",Protocol:" + device.getDeviceProtocol()
                + ",ProductId:" + device.getProductId();
        values = values + ",DeviceClass:" + device.getDeviceClass()
                + ",VendorId:" + device.getVendorId();
    }
    if (device != null) {
        values = values + ",getInterfaceCount:"
                + device.getInterfaceCount();
        UsbInterface intf = device.getInterface(0);
        values = values + ",intf.getEndpointCount():"
                + intf.getEndpointCount();
        UsbEndpoint endpoint1 = intf.getEndpoint(0);
        UsbEndpoint endpoint2 = intf.getEndpoint(1);

        mManager.requestPermission(device, mPermissionIntent);
        if (mManager.hasPermission(device)) {
            values = values + ",has permission over device!";
            connection = mManager.openDevice(device);
            if (connection == null) {
                values = values + ",connection null";
            } else {
                values = values + ",getFileDescriptor:"
                        + connection.getFileDescriptor();
                if (endpoint1.getDirection() == UsbConstants.USB_DIR_IN) {
                    InputEndpoint = endpoint1;
                } else {
                    OutputEndpoint = endpoint1;
                }
                if (endpoint2.getDirection() == UsbConstants.USB_DIR_IN) {
                    InputEndpoint = endpoint2;
                } else {
                    OutputEndpoint = endpoint2;
                }
            }
            if (InputEndpoint == null) {
                countDisplay.setText(values + ",InputEndpoint is null");
            }
            if (OutputEndpoint == null) {
                countDisplay.setText(values + ",OutputEndPoint is null");
            }
            connection.claimInterface(intf, forceClaim);
            mHandler.postDelayed(runnable, 1);
        } else {
            values = values + ",Do not have permission over device!";
        }

    }

    setContentView(R.layout.activity_main);
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View v = inflater.inflate(R.layout.activity_main, null);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    int counter = 1;
    countDisplay = new TextView(this);
    ll.addView(countDisplay);

    countDisplay.setText(values + ",counter here");
    final Button button = new Button(this);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (device != null && mManager.hasPermission(device)) {
                values = values + ",device id:" + device.getDeviceId()
                        + ",device name:" + device.getDeviceName();
                values = values + ",Protocol:" + device.getDeviceProtocol()
                        + ",ProductId:" + device.getProductId();
                values = values + ",DeviceClass:" + device.getDeviceClass()
                        + ",VendorId:" + device.getVendorId();

                countDisplay.setText(values + ",okok");

            } else {
                if (device != null)
                    mManager.requestPermission(device, mPermissionIntent);
            }
        }

    });
    ll.addView(button);
    setContentView(ll);
} 
```

And Runnable:

```
private Runnable runnable = new Runnable() {
    public void run() {
        if (connection != null) {
            int count = connection.bulkTransfer(InputEndpoint, bytes,
                    bytes.length, TIMEOUT);
            countDisplay.setText(values + ",bultTransferNo:" + count);
            countDisplay.setText(values + "bulkValue:" + bytes);
        } else {
            countDisplay.setText(values + ",connection is null");
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T19:22:45.460

该程序用作以下 USB 主机功能的示例：

*   根据接口类、子类和协议匹配设备（参见 device_filter.xml）

*   批量端点上的异步 IO

所有代码版权：

```
 /*
     * Copyright (C) 2011 The Android Open Source Project
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *      http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ 
```

亚行设备

```
 package com.android.adb;

    import android.hardware.usb.UsbConstants;
    import android.hardware.usb.UsbDeviceConnection;
    import android.hardware.usb.UsbEndpoint;
    import android.hardware.usb.UsbInterface;
    import android.hardware.usb.UsbRequest;
    import android.util.SparseArray;

    import java.util.LinkedList;

    /* This class represents a USB device that supports the adb protocol. */
    public class AdbDevice {

        private final AdbTestActivity mActivity;
        private final UsbDeviceConnection mDeviceConnection;
        private final UsbEndpoint mEndpointOut;
        private final UsbEndpoint mEndpointIn;

        private String mSerial;

        // pool of requests for the OUT endpoint
        private final LinkedList<UsbRequest> mOutRequestPool = new LinkedList<UsbRequest>();
        // pool of requests for the IN endpoint
        private final LinkedList<UsbRequest> mInRequestPool = new LinkedList<UsbRequest>();
        // list of currently opened sockets
        private final SparseArray<AdbSocket> mSockets = new SparseArray<AdbSocket>();
        private int mNextSocketId = 1;

        private final WaiterThread mWaiterThread = new WaiterThread();

        public AdbDevice(AdbTestActivity activity, UsbDeviceConnection connection,
                UsbInterface intf) {
            mActivity = activity;
            mDeviceConnection = connection;
            mSerial = connection.getSerial();

            UsbEndpoint epOut = null;
            UsbEndpoint epIn = null;
            // look for our bulk endpoints
            for (int i = 0; i < intf.getEndpointCount(); i++) {
                UsbEndpoint ep = intf.getEndpoint(i);
                if (ep.getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                    if (ep.getDirection() == UsbConstants.USB_DIR_OUT) {
                        epOut = ep;
                    } else {
                        epIn = ep;
                    }
                }
            }
            if (epOut == null || epIn == null) {
                throw new IllegalArgumentException("not all endpoints found");
            }
            mEndpointOut = epOut;
            mEndpointIn = epIn;
        }

        // return device serial number
        public String getSerial() {
            return mSerial;
        }

        // get an OUT request from our pool
        public UsbRequest getOutRequest() {
            synchronized(mOutRequestPool) {
                if (mOutRequestPool.isEmpty()) {
                    UsbRequest request = new UsbRequest();
                    request.initialize(mDeviceConnection, mEndpointOut);
                    return request;
                } else {
                    return mOutRequestPool.removeFirst();
                }
            }
        }

        // return an OUT request to the pool
        public void releaseOutRequest(UsbRequest request) {
            synchronized (mOutRequestPool) {
                mOutRequestPool.add(request);
            }
        }

        // get an IN request from the pool
        public UsbRequest getInRequest() {
            synchronized(mInRequestPool) {
                if (mInRequestPool.isEmpty()) {
                    UsbRequest request = new UsbRequest();
                    request.initialize(mDeviceConnection, mEndpointIn);
                    return request;
                } else {
                    return mInRequestPool.removeFirst();
                }
            }
        }

        public void start() {
            mWaiterThread.start();
            connect();
        }

        public AdbSocket openSocket(String destination) {
            AdbSocket socket;
            synchronized (mSockets) {
                int id = mNextSocketId++;
                socket = new AdbSocket(this, id);
                mSockets.put(id, socket);
            }
            if (socket.open(destination)) {
                return socket;
            } else {
                return null;
            }
        }

        private AdbSocket getSocket(int id) {
            synchronized (mSockets) {
                return mSockets.get(id);
            }
        }

        public void socketClosed(AdbSocket socket) {
            synchronized (mSockets) {
                mSockets.remove(socket.getId());
            }
        }

        // send a connect command
        private void connect() {
            AdbMessage message = new AdbMessage();
            message.set(AdbMessage.A_CNXN, AdbMessage.A_VERSION, AdbMessage.MAX_PAYLOAD, "host::\0");
            message.write(this);
        }

        // handle connect response
        private void handleConnect(AdbMessage message) {
            if (message.getDataString().startsWith("device:")) {
                log("connected");
                mActivity.deviceOnline(this);
            }
        }

        public void stop() {
            synchronized (mWaiterThread) {
                mWaiterThread.mStop = true;
            }
        }

        // dispatch a message from the device
        void dispatchMessage(AdbMessage message) {
            int command = message.getCommand();
            switch (command) {
                case AdbMessage.A_SYNC:
                    log("got A_SYNC");
                    break;
                case AdbMessage.A_CNXN:
                    handleConnect(message);
                    break;
                case AdbMessage.A_OPEN:
                case AdbMessage.A_OKAY:
                case AdbMessage.A_CLSE:
                case AdbMessage.A_WRTE:
                    AdbSocket socket = getSocket(message.getArg1());
                    if (socket == null) {
                        log("ERROR socket not found");
                    } else {
                        socket.handleMessage(message);
                    }
                    break;
            }
        }

        void log(String s) {
            mActivity.log(s);
        }

        private class WaiterThread extends Thread {
            public boolean mStop;

            public void run() {
                // start out with a command read
                AdbMessage currentCommand = new AdbMessage();
                AdbMessage currentData = null;
                // FIXME error checking
                currentCommand.readCommand(getInRequest());

                while (true) {
                    synchronized (this) {
                        if (mStop) {
                            return;
                        }
                    }
                    UsbRequest request = mDeviceConnection.requestWait();
                    if (request == null) {
                        break;
                    }

                    AdbMessage message = (AdbMessage)request.getClientData();
                    request.setClientData(null);
                    AdbMessage messageToDispatch = null;

                    if (message == currentCommand) {
                        int dataLength = message.getDataLength();
                        // read data if length > 0
                        if (dataLength > 0) {
                            message.readData(getInRequest(), dataLength);
                            currentData = message;
                        } else {
                            messageToDispatch = message;
                        }
                        currentCommand = null;
                    } else if (message == currentData) {
                        messageToDispatch = message;
                        currentData = null;
                    }

                    if (messageToDispatch != null) {
                        // queue another read first
                        currentCommand = new AdbMessage();
                        currentCommand.readCommand(getInRequest());

                        // then dispatch the current message
                        dispatchMessage(messageToDispatch);
                    }

                    // put request back into the appropriate pool
                    if (request.getEndpoint() == mEndpointOut) {
                        releaseOutRequest(request);
                    } else {
                        synchronized (mInRequestPool) {
                            mInRequestPool.add(request);
                        }
                    }
                }
            }
        }
    } 
```

AdbMessage

```
 package com.android.adb;

    import android.hardware.usb.UsbRequest;

    import java.nio.ByteBuffer;
    import java.nio.ByteOrder;

    /* This class encapsulates and adb command packet */
    public class AdbMessage {

        // command names
        public static final int A_SYNC = 0x434e5953;
        public static final int A_CNXN = 0x4e584e43;
        public static final int A_OPEN = 0x4e45504f;
        public static final int A_OKAY = 0x59414b4f;
        public static final int A_CLSE = 0x45534c43;
        public static final int A_WRTE = 0x45545257;

        // ADB protocol version
        public static final int A_VERSION = 0x01000000;

        public static final int MAX_PAYLOAD = 4096;

        private final ByteBuffer mMessageBuffer;
        private final ByteBuffer mDataBuffer;

        public AdbMessage() {
            mMessageBuffer = ByteBuffer.allocate(24);
            mDataBuffer = ByteBuffer.allocate(MAX_PAYLOAD);
            mMessageBuffer.order(ByteOrder.LITTLE_ENDIAN);
            mDataBuffer.order(ByteOrder.LITTLE_ENDIAN);
        }

        // sets the fields in the command header
        public void set(int command, int arg0, int arg1, byte[] data) {
            mMessageBuffer.putInt(0, command);
            mMessageBuffer.putInt(4, arg0);
            mMessageBuffer.putInt(8, arg1);
            mMessageBuffer.putInt(12, (data == null ? 0 : data.length));
            mMessageBuffer.putInt(16, (data == null ? 0 : checksum(data)));
            mMessageBuffer.putInt(20, command ^ 0xFFFFFFFF);
            if (data != null) {
                mDataBuffer.put(data, 0, data.length);
            }
        }

        public void set(int command, int arg0, int arg1) {
            set(command, arg0, arg1, (byte[])null);
        }
        public void set(int command, int arg0, int arg1, String data) {
            // add trailing zero
            data += "\0";
            set(command, arg0, arg1, data.getBytes());
        }

        // returns the command's message ID
        public int getCommand() {
            return mMessageBuffer.getInt(0);
        }

        // returns command's first argument
        public int getArg0() {
            return mMessageBuffer.getInt(4);
        }

        // returns command's second argument
        public int getArg1() {
            return mMessageBuffer.getInt(8);
        }

        // returns command's data buffer
        public ByteBuffer getData() {
            return mDataBuffer;
        }

        // returns command's data length
        public int getDataLength() {
            return mMessageBuffer.getInt(12);
        }

        // returns command's data as a string
        public String getDataString() {
            int length = getDataLength();
            if (length == 0) return null;
            // trim trailing zero
            return new String(mDataBuffer.array(), 0, length - 1);
        }

        public boolean write(AdbDevice device) {
            synchronized (device) {
                UsbRequest request = device.getOutRequest();
                request.setClientData(this);
                if (request.queue(mMessageBuffer, 24)) {
                    int length = getDataLength();
                    if (length > 0) {
                        request = device.getOutRequest();
                        request.setClientData(this);
                        if (request.queue(mDataBuffer, length)) {
                            return true;
                        } else {
                            device.releaseOutRequest(request);
                            return false;
                        }
                    }
                    return true;
                } else {
                    device.releaseOutRequest(request);
                    return false;
                }
            }
        }

        public boolean readCommand(UsbRequest request) {
            request.setClientData(this);
            return request.queue(mMessageBuffer, 24);
        }

        public boolean readData(UsbRequest request, int length) {
            request.setClientData(this);
            return request.queue(mDataBuffer, length);
        }

        private static String extractString(ByteBuffer buffer, int offset, int length) {
            byte[] bytes = new byte[length];
            for (int i = 0; i < length; i++) {
                bytes[i] = buffer.get(offset++);
            }
            return new String(bytes);
        }

        @Override
        public String toString() {
            String commandName = extractString(mMessageBuffer, 0, 4);
            int dataLength = getDataLength();
            String result = "Adb Message: " + commandName + " arg0: " + getArg0() +
                 " arg1: " + getArg1() + " dataLength: " + dataLength;
            if (dataLength > 0) {
                result += (" data: \"" + getDataString() + "\"");
            }
            return result;
        }

        private static int checksum(byte[] data) {
            int result = 0;
            for (int i = 0; i < data.length; i++) {
                int x = data[i];
                // dang, no unsigned ints in java
                if (x < 0) x += 256;
                result += x;
            }
            return result;
        }
    } 
```

AdbSocket

```
 package com.android.adb;

    /* This class represents an adb socket.  adb supports multiple independent
     * socket connections to a single device.  Typically a socket is created
     * for each adb command that is executed.
     */
    public class AdbSocket {

        private final AdbDevice mDevice;
        private final int mId;
        private int mPeerId;

        public AdbSocket(AdbDevice device, int id) {
            mDevice = device;
            mId = id;
        }

        public int getId() {
            return mId;
        }

        public boolean open(String destination) {
            AdbMessage message = new AdbMessage();
            message.set(AdbMessage.A_OPEN, mId, 0, destination);
            if (! message.write(mDevice)) {
                return false;
            }

            synchronized (this) {
                try {
                    wait();
                } catch (InterruptedException e) {
                    return false;
                }
            }
            return true;
        }

        public void handleMessage(AdbMessage message) {
            switch (message.getCommand()) {
                case AdbMessage.A_OKAY:
                    mPeerId = message.getArg0();
                    synchronized (this) {
                        notify();
                    }
                    break;
                case AdbMessage.A_WRTE:
                    mDevice.log(message.getDataString());
                    sendReady();
                    break;
            }
        }

        private void sendReady() {
            AdbMessage message = new AdbMessage();
            message.set(AdbMessage.A_OKAY, mId, mPeerId);
            message.write(mDevice);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:54:58.377

有关 USB 和连接的更多信息，您可能会发现以下文章很有帮助。

[http://android.serverbox.ch/?p=549](http://android.serverbox.ch/?p=549)

最后一段解释了您可能面临的一些问题。他们提供的示例还可以向您展示如何读取数据以及如何格式化消息。

看起来你面临两个问题。一个设置您的代码以读取消息，Puspendu 的回答暗示了这一点，第二个问题是“如何”通信，您需要发送哪些消息来建立连接、握手并确定好东西，即数据你要。

Puspendu 展示了一个读取和写入设备的示例。但是我想根据您连接的设备，握手和消息结构会改变，因此您必须查找这些部分（恐怕我不知道任何其他示例）。

# python - 是否可以用两种不同的方式实例化一个类的对象？

> ID：11899959
> 
> 赞同：2
> 
> 时间：2012-08-10T10:39:38.007
> 
> 标签：python, object, methods, instantiation

[这](http://docs.python.org/library/collections.html?highlight=namedtuple#collections.namedtuple)是一个将点创建为 的示例`p=Point(x, y)`。假设我有一些数组`ppp=(x, y)`where`x`和`y`are numbers 并且我想使它成为类`Point`但方式：`p=Point(ppp)`。我可以用一种或另一种方式做，但不能同时做。有没有可能有两种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:50:32.183

有两种不同的方法来获取结果，第一种是分析你传递给 __init__ 的参数，并根据它们的数量和类型 - 选择一个决定你用什么来实例化类。

```
class Point(object):

    x = 0
    y = 0

    def __init__(self, x, y=None):
       if y is None:
           self.x, self.y = x, x
       else:
           self.x, self.y = x, y 
```

另一个决定是使用类方法作为实例化器：

```
class Point(object):

    x = 0
    y = 0

    @classmethod
    def from_coords(cls, x, y):
       inst = cls()
       inst.x = x
       inst.y = y
       return inst

    @classmethod
    def from_string(cls, x):
       inst = cls()
       inst.x, inst.y = x, x
       return inst

p1 = Point.from_string('1.2 4.6')
p2 = Point.from_coords(1.2, 4.6) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:07:18.887

如果您在创建实例时*知道*`p = Point(*ppp)`您有一个元组/列表，您可以这样做： ，`ppp`元组在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:46:21.280

```
class Point:
    def __init__(self, x, y=None):
        if isinstance(x, tuple):
            self.x, self.y = x
         else:
            self.x = x
            self.y = y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:46:23.170

是的：

```
class Point(object):
    def __init__(self, x, y=None):
        if y is not None:
            self.x, self.y = x, y
        else:
            self.x, self.y = x

    def __str__(self):
        return "{}, {}".format(self.x, self.y)

print Point(1,2)
# 1, 2
print Point((1,2))
# 1, 2 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T10:56:08.673

我猜您正在寻找一种方法来重载您的构造函数，这在 C++ 和 Java 等静态类型语言中很常见。

这在 Python 中是不可能的。您可以做的是提供不同的关键字参数组合，例如：

```
class Point(object):
  def __init__(self, x=None, y=None, r=None, t=None):
    if x is not None and y is not None:
      self.x = x
      self.y = y
    elif r is not None and t is not None:
      # set cartesian coordinates from polar ones 
```

然后您将其用作：

```
p1 = Point(x=1, y=2)
p2 = Point(r=1, t=3.14) 
```

# java - 如何使用 Hibernate session.save() 插入/保存对象而不更新旧记录

> ID：11899960
> 
> 赞同：1
> 
> 时间：2012-08-10T10:39:38.557
> 
> 标签：java, mysql, hibernate, jsp, jdbc

我有一个`search.jsp`页面，可以在其中搜索和检索数据库中的记录。我必须复制这条记录并进行修改并保存两条记录。

前任：

```
 method1(){
  Response response=new Response();
  //To perform DB search
  response=delegate.requestSearch(//some request criteria);
  Types obj1=(Types) response.getBaseEntity();
  Types obj2=obj1;
  obj2.setPromaryKeyObject(//some unique value);
 } 
```

在我的 DAO 中，保存方法：

```
session.save(obj1);
session.save(obj2);
transaction.commit(); // transaction 
```

当调试点提交事务时，我只得到一个更新查询。但我希望有两个插入查询。

但这很好用。这是一次尝试，但这不是我想做的。

```
Types tempObj1 = new Types();    
tempObj1.setValue1(obj1.getValue1();
 // all values of the object should be set
session.save(tempObj1);
Types tempObj1 = new Types();    
tempObj2.setValue1(obj2.getValue1();
 // all values of the object should be set
session.save(tempObj2);
transaction.commit(); // transaction 
```

在这种情况下，我触发了两个插入查询。

我很确定错误出在我的休眠方法中，因为我对休眠很陌生。当我使用 JDBC 和 MySql 查询时，同样的代码可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:45:36.570

这都是关于 id 的。如果数据库中存在具有给定 ID 的对象，则更新它。如果没有设置 id 则根据生成策略生成并插入新记录。有时（取决于配置）您必须明确设置 id。

由于您使用 MySQL，我猜您使用`autoincrement`列作为 id 和`IDENTITY`生成策略。您可能需要做的是将 id 保留为更新的记录，并将 id 设置`null`为您要插入的新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:51:32.637

这是由于`obj2 == obj1`. 尝试`obj2 = obj1.clone()`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:53:29.170

Hibernate 会在内部跟踪您拥有的对象`save()`。您并没有真正使用此代码创建新实例

```
 Types obj1=(Types) response.getBaseEntity();
  Types obj2=obj1; 
```

所以hibernate认为你在没有改变数据的情况下再次保存同一个对象，所以它自然什么也没做。

有两种方法可以解决这个问题：

*   将数据复制到新实例并再次调用 save。这有点像您拥有的第二个代码片段。
*   使用`merge()`不将参数与会话关联的方法，以便每次调用`merge(something)`时都会生成一个插入。（这假设您首先清除了 id`something`并将其与会话解除关联。）

# assembly - 如何将 ST(0) 移动到 EAX？

> ID：11899961
> 
> 赞同：3
> 
> 时间：2012-08-10T10:39:44.217
> 
> 标签：assembly, x86, fpu, x87

你好，我正在学习 x86 FPU 组装，我有一个简单的问题，我找不到答案：

如何将值从**`ST(0)`**（FPU 堆栈的顶部）移动到**`EAX`**？

另外：
此代码是否正确：

```
; multiply (dot) two vectors of 3 floats passed by pointers as arg 1 arg 2
; passings are ok I think, but not sure if multiplies-adds are ok

    push    ebp                                     
    mov     ebp, esp                                
    mov     eax, dword [ebp+8H]                     
    mov     edx, dword [ebp+0CH]                    

    fld     qword [eax]                             
    fmul    qword [edx]                             
    fld     qword [eax+4H]                          
    fmul    qword [edx+4H]                          
    fld     qword [eax+8H]                          
    fmul    qword [edx+8H]                          
    faddp   st1, st(0)                              
    faddp   st1, st(0)                            
    fstp    qword [ebp+10H]     ; here I vould prefer 'mov eax, st0'

    pop     ebp                                   
    ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:25:43.853

没有真正的理由你应该这样做。请记住，这`EAX`只是一个 32 位的寄存器，而所有 FPU 寄存器的宽度都是 80 位，因为 FPU 默认情况下在 80 位浮点数上进行计算。因此，将数据从 FPU 寄存器移动到通用寄存器会导致数据丢失。如果你真的想做这样的事情，试试这个（假设你有一些可用的堆栈空间）：

```
sub esp, 4           ; or use space you already reserved
fstp dword [esp]
mov eax, [esp]       ; or better,  pop eax
add esp, 4 
```

该指令序列会将当前位于 FPU 堆栈顶部的浮点数舍入为 32 位，然后将其写入临时堆栈位置，将`float`(binary32) 位模式加载到`EAX`中，并清理已使用的堆栈空间。

* * *

这几乎不是你想要的。 **标准调用约定在 中返回 float / double / long double 值`st(0)`**，因此这是 C 编译器期望`double foo()`函数保留该值的地方。（或`xmm0`使用 SSE/SSE2）。

如果你想对 FP 位模式进行整数操作/测试，你只需要这个。（即在 C 中实现类型双关语，例如`memcpy`from a `float`to `uint32_t`）。例如，对于Quake 源代码中使用的[著名但现在大多已过时的快速近似反`sqrtf`幻数 hack 。](https://stackoverflow.com/questions/1349542/john-carmacks-unusual-fast-inverse-square-root-quake-iii)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T10:53:24.760

没有 x87 指令可以在 FPU 寄存器和 CPU 寄存器之间移动浮点值。

您必须使用内存作为中间体。

# android - phonegap android中的设备宽度

> ID：11899965
> 
> 赞同：0
> 
> 时间：2012-08-10T10:39:53.843
> 
> 标签：android, html, jquery-mobile, cordova

我正在 phonegap / HTML5 中开发一个 android 应用程序。

作为第一步，我正在使用设备的宽度

```
var viewport = {
        width  : parseInt($(window).width()),
        height : parseInt($(window).height())
    };
alert(viewport.width); 
```

但是第一次将其显示 320 部署为警报，但是当我重新启动应用程序时，它显示为 0。之后经常显示 320（很少见）

如何永久获得设备的实际宽度？

对不起我的错别字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:43:12.113

这个问题时不时被提出来。请参阅我之前的答案，并阅读博客文章本身：[JavaScript+Phonegap+Android：screen.width 返回错误（几乎是随机）值](https://stackoverflow.com/questions/11524669/javascriptphonegapandroid-screen-width-returns-bad-almost-random-values/11527681#11527681)

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T04:06:20.050

你试过这个吗

```
$(function(){
    document.addEventListener("deviceready", function() {
           var windowWidth = $(window).width();
           var windowHeight = $(window).height();
    });
}); 
```

# requirejs - 要求 js 删除定义以强制重新加载

> ID：11899967
> 
> 赞同：6
> 
> 时间：2012-08-10T10:39:56.163
> 
> 标签：requirejs, js-amd

出于测试目的，我正在尝试删除一些 amd 模块并从服务器重新加载更新版本 - 目的是不刷新浏览器。

我目前正在执行以下操作，但浏览器仍然没有从网络重新加载项目。

```
var scripts = document.getElementsByTagName('script');
var context = require.s.contexts['_'];
for (var key in context.defined) {
  if(key.indexOf("tests")>-1){
  requirejs.undef(key);
  for (var i = scripts.length - 1; i >= 0; i--) {
  var script = scripts[i];
  var attr = script.getAttribute('data-requiremodule')
    if (attr === key){
    script.parentNode.removeChild(script);
    }
  }} 
```

它从上下文中删除引用并成功删除脚本标签。可惜...

有谁知道从requirejs中清除所有引用的机制？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T11:39:31.747

我们目前正在尝试这种实现：

```
require.onResourceLoad = function(context, map)
{
    require.undef(map.name);
}; 
```

到目前为止还没有任何问题浮出水面。

编辑：IE 不太关心这个修复。不过 Chrome 和 FF 都很好。

此外，您应该尝试在 PhpStorm 中进行实时编辑。奇迹般有效。可以在[这里](http://www.youtube.com/watch?v=TnnVl3ydIB0)看到一个演示。不过只有Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T21:55:06.673

这个答案类似于 user1903890 但我认为它很容易遵循其他实现。

基本上，我们必须将 index.html 中指定的 main.js requirejs 控制器封装在一个 init 函数中。一旦定义好了，我们就调用这个init函数来正常初始化requirejs

```
function init_requirejs(){
    console.log("--------------------------- INIT requirejs:");
    require([ "helpers/util"], function(util) {
        var count=0;
        $('#content').empty();

        $('#content').append("<input type='button' id='increment_button' value='click to increment the counter'>");
        $('#content').append("<h1 id='the_counter'>0</h1>");

        $('#content').append("<br><br><input type='button' id='init_button' value='click to initialize requirejs files'>");

        $('#increment_button').on('click', function(){
            count++;
            $('#the_counter').text(count);
        });
        $('#init_button').on('click', function(){
            end();
            init_requirejs();
        });

        util();

    });
};
init_requirejs(); 
```

我们还需要并使用 require.onResourceLoad 函数来存储所有参与 requirejs 应用程序的文件

```
var all=[];
require.onResourceLoad = function (context, map, depArray) {
    all.push(map.name);    
}; 
```

我们需要一个reset requirejs配置函数来删除requirejs的实际实例，我们将使用require.undef函数来完成：

```
function end(){
    console.log("--------------------------- END requirejs:");
    all.map(function(item){
        require.undef(item);
    });
}; 
```

就这样！

稍后从我们的代码中，我们可以强制重新加载应用程序而不重新加载浏览器，只调用 end() 函数和 init_rquirejs() 函数。例如在 jquery 点击事件中：

```
$('#init_button').on('click', function(){
    end();
    init_requirejs();
}); 
```

演示代码在 [https://github.com/juanantonioruz/requirejs-force-reload](https://github.com/juanantonioruz/requirejs-force-reload)

还有一个在线版本 [https://dl.dropboxusercontent.com/u/8688858/requirejs-force-reload/project.html](https://dl.dropboxusercontent.com/u/8688858/requirejs-force-reload/project.html)

我希望这个解决方案对你有用！

胡安

# c++ - 在 c++ main 中将浮点数表作为参数传递

> ID：11899969
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:02.490
> 
> 标签：c++, parameter-passing, atof

我有一个 c++ 程序，我希望 main (argv[1]) 的第一个参数对应于一个浮点表。有可能这样做吗？

我正在考虑将我的浮点数放入一个用空格分隔的字符串（例如“1.12 3.23 4.32 1.1 ...”）有没有办法自动将这样的字符串转换为浮点数表？如果我理解得很好， atof 函数会将字符串转换为双精度。因此，似乎可以使用空格拆分我的字符串，然后使用 atof 转换每个部分。这个选项对我来说似乎不是很有效？此外，它返回双精度而不是浮点数 :(

那么，有没有更好的方法将浮点表作为 c++ 程序的参数传递？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:47:26.357

A`stringstream`既可以在空格处进行拆分，也可以将其解析为浮点数。

```
std::stringstream ss(the_string);
std::vector<float> v(std::istream_iterator<float>(ss),
                     (std::istream_iterator<float>()));
                   // the extra parentheses here are ugly but necessary :( 
```

如何获取带有数据的字符串取决于它有多大以及它应该来自哪里。请记住，在许多系统中，传递给 program 的参数已经被空格分隔，将每个部分放在`argv`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:41:59.057

将其保存在文本文件中，然后在程序启动时从文件中读取。我不值得将它作为命令行参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:46:47.867

main() 参数列表保持原样。您可以将数字字符串作为参数传递给程序。主函数必须解析它的参数。

当您想要传递一个空格分隔的数字列表时，`argv[1]`您可以使用该`strtok`函数来获取各个数字字符串，并且必须将其传递给转换函数。

当您的转换函数返回双精度时，您应该检查结果是否可以用浮点数表示并将值转换为浮点变量。但我会考虑使用 double 作为内部表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:48:10.923

除了 Singer 的回答：命令行应该主要由人类使用，而不是计算机。如果您确实需要值*表*，请使用配置文件。您始终可以使用人类可读的格式。

# c++ - 我在哪里可以下载适用于 Windows 的 GCC 4.3.2 二进制文件？

> ID：11899974
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:29.420
> 
> 标签：c++, gcc, g++

我必须编写一个 c++ 程序，我想在 vstudio 2010 中执行此操作，因为这对我来说是最舒服的方式。但稍后这段代码将在 gcc 4.3.2 (ejudge) 中编译。我找不到适用于 Windows 的 gcc 4.3.2 二进制文件，是否有任何方法可以检查 gcc 编译的正确性？或者也许有人会帮助找到 gcc 二进制文件？我找到了这个链接[http://tdm-gcc.tdragon.net/download](http://tdm-gcc.tdragon.net/download)但是我找不到 4.3.2 版本的二进制文件，只有源代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:43:47.380

[MinGW](http://mingw.org/)或 Minimalist GNU for Windows，是一组用于 Windows 平台的 GNU 编译器。这是在 Windows 平台上使用 G++ 最简单的方法。您也可以使用 Cygwin，但这有点矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:34:28.603

*我记得*g++ 4.3.2 在旧版本的 Code::Blocks IDE 中用作捆绑编译器。

但是，我目前无法连接到 [http://www.codeblocks.org]，所以我不知道他们是否提供旧版本的下载。

# objective-c - iPhone 最新 Twitter oAuth 教程

> ID：11899975
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:29.663
> 
> 标签：objective-c, xcode, twitter

有人可以给我一个使用 twitter 实现 OAuth 的最新教程。我已经阅读了很多教程，我已经数不清了，其中没有一个是最新的新 xCode。我尝试了 MGTTwitter，但没有教程。在他自己的网站上，它给出了教程的链接，它只是把你链接到这个

[http://ww35.2bros1blog.com/2010/07/switching-from-basic-to-xauth-with-mgtwitterengine-on-iphone/](http://ww35.2bros1blog.com/2010/07/switching-from-basic-to-xauth-with-mgtwitterengine-on-iphone/)

所以不知道那是关于

我试过

[http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/](http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)

但我不知道如何将静态文件夹添加到 xCode。我尝试添加目标，但没有添加任何内容。

试过以下

[http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/)

但是，它已经过时了。当我使用我的消费者密钥和秘密运行应用程序时，当我单击授权时，它只是关闭窗口，然后再次打开授权窗口。我输入用户并再次通过，一遍又一遍地做同样的事情。

我下载了最新版本的sharekit，我真的不想去这个根，因为我想要的只是twitter授权，我认为添加50多个文件对于一个功能来说有点多，但我想我会试一试。但是当我打开它时，在 facebook 周围出现错误

（空）：错误：/Users/adam/Downloads/ShareKit-ShareKit-7a05403/Classes/ShareKit/Sharers/Services/Facebook/../../../../../Submodules/facebook-ios- sdk/src/FBDialog.bundle：没有这样的文件或目录

我想要的只是一个简单的身份验证，以便用户可以接受然后从应用程序发送推文。我不想使用 twitter 框架，因为用户点击发送两次，即在 textview 中输入消息，然后出现 twitter viewcontroller，然后他们再次点击发送。我希望他们能够在应用程序内发布推文。然而，我似乎找不到任何详细解释如何做到这一点的教程。

有人可以指点我做这个的教程的方向吗，我不认为在 iPhone 中实现一个简单的授权会这么麻烦，但这让我发疯了！！！

编辑：

我有

[http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/](http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)

这个工作，但是当我登录时，应用程序崩溃并且日志说

```
Authenticated with user (null) 
```

有人对那个有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:21:19.200

找出我在使用这些 Twitter 工具时遇到问题的原因。他们使用 http 而不是 https 来向 Twitter 进行身份验证，这已不再被允许。只是将其更改为 https 并且工作正常

# xpages - 在 xp 上进行部分刷新的 OnClick SSJS：链接控件不起作用？

> ID：11899978
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:39.070
> 
> 标签：xpages

我在表单上有以下 LINK 控件，并且想调用托管 bean 方法 onclick 并进行部分刷新（刷新指定页面的一部分）。但是我刚刚发现，这不起作用，我可以看到单击链接将 XHR 请求发送到服务器，但未触发托管 bean 方法调用（整个 onClick SSJS 事件）。如果我将 thi 重新设计为按钮控件，thigs 工作正常，但在这种情况下我需要链接。是一些错误还是我对概念的误用？

```
<xp:link escape="true" text="" id="link2" >
<xp:eventHandler event="onclick" submit="true" refreshMode="partial" disableValidators="true" refreshId="create_recipe_form_panel">
    <xp:this.action><![CDATA[#{javascript:F.getRecipe().adjustWt()}]]></xp:this.action>
</xp:eventHandler>
</xp:link> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:11:58.753

我会说：滥用概念。链接应该“将您发送到其他地方”，而按钮“为您做某事”。因此，链接目标和点击操作很可能会相互影响。使用一个按钮并给它一个类。玩css，直到你拥有你想要的视觉效果。

# javascript - 单引号 JSP 转 JavaScript 函数

> ID：11899980
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:45.123
> 
> 标签：javascript, html, jsp, escaping

我有一个必须用来传递给 JavaScript 函数的字符串。我尝试了很多方法，但我仍然无法使其工作。

```
<a href="javascript:goFac('<%=name%>')"><%=name%></a> 
```

name 字段是一个包含单引号的字符串，例如*It's Morning*。我曾尝试使用：

```
String nameString = rs.getString("name");
nameString = nameString.replaceAll("'","\'");

<a href="javascript:goFac('<%=nameString %>')"><%=nameString%></a> 
```

并且

```
nameString = URLEncoder.encode(nameString); 
```

并且

```
nameString = nameString.replaceAll("'","&#39;"); 
```

并且

```
 nameString = nameString.replaceAll("'","&apos;"); 
```

我仍然无法让它工作。而且我不能去EL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:50:54.277

如果您想用 Java 代码中的 JavaScript 转义（反斜杠）单引号 (\') 替换字符串中的单引号 (')，那么您需要转义反斜杠字符（使用反斜杠！）。例如：

```
nameString = nameString.replaceAll("'","\\'"); 
```

另请参阅：[String.replaceAll 带有双反斜杠的单反斜杠](https://stackoverflow.com/questions/1701839/backslash-problem-with-string-replaceall)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:40:18.610

尝试使用**String.fromCharCode(39)**代替单引号，String.fromCharCode(39) 是单引号的 ASCII 码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:18:18.823

以下对我有用，因为 HTML 编码是在函数调用之前完成的，并将单引号替换为`&#39;`.

```
nameString = nameString.replaceAll("&#39;","\\'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T21:35:35.757

如果您在 JSP 标记内执行此操作，则需要有足够的反斜杠以使其中一个真正进入网页。代码将是：

```
<a href="javascript:goFac('<%=nameString.replaceAll("'", "\\\\'") %>')"><%=nameString%></a> 
```

您需要一个反斜杠来转义另一个反斜杠，并且每个反斜杠都需要转义 - 因此需要四个反斜杠（讨厌）。

希望有帮助。

# mysql - 查询未按预期运行

> ID：11899981
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:51.787
> 
> 标签：mysql, sql, database

下面是我正在尝试使用的查询，

```
select DISTINCT c.sno from Cards as c, reservation as r 
where c.name='CRS-4-FC' AND c.sno != r.ssno; 
```

这个查询应该只从卡中选择那些不存在于保留表中的 sno，即保留表中的 ssno 列中不存在 sno。我投入

```
c.sno!=r.ssno 
```

这样我就不会选择所有的sno。但是当这个查询运行时，我得到了所有的 sno 而不是那些没有保留的。有人可以帮我解决我哪里出错了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:41:54.230

尝试

```
select DISTINCT c.sno
from Cards as c 
left outer join reservation as r on c.sno = r.ssno
where r.ssno is null
and c.name='CRS-4-FC' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:42:41.707

`LEFT JOIN`改为尝试：

```
SELECT DISTINCT c.sno
FROM Cards c
    LEFT JOIN reservation as r
        ON c.sno = r.ssno
WHERE c.name='CRS-4-FC' AND
      r.ssno IS NULL; 
```

请参阅[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:43:27.960

```
select DISTINCT c.sno 
from Cards as c LEFT JOIN reservation as r  
ON c.sno = r.ssno
where c.name='CRS-4-FC' AND r.ssno IS NULL; 
```

# extjs - EXTJS鼠标点击多次加载页面后不起作用

> ID：11899984
> 
> 赞同：0
> 
> 时间：2012-08-10T10:40:59.333
> 
> 标签：extjs, extjs4.1, extjs-mvc

我的面板上有一个网格，名为`gridView`，并且`gridView`在名为 的面板中`panelMain`，通过`dbclick`网格行上的侦听器，我通过执行以下操作加载一个 from：

```
listeners:{
itemdblclick: function(dataview, index, item, e) {

    /* I did not create new studentForm every time.*/
    var editStudent = Ext.getCmp('editStudent');
    if(editStudent == undefined)
        editStudent = Ext.create('H.view.EditStudent');

    editStudent.getForm().load({
        url: 'studentDetails.php',
        params: {studentId: studentId},
        method:'GET',
        success: function (form, action) {

            var panelMain = Ext.getCmp('panelMain');
            panelMain.items.clear();

            panelMain.add(editStudent);
            panelMain.update();
            panelMain.doLayout();
        },
        failure: function (form, action) {
            /// do nothing
        }
    });
} 
```

在我编辑了学生之后，我应该回到网格页面，所以我做了这样的事情：

```
var panelMain = Ext.getCmp('panelMain');
var gridView = Ext.getCmp('gridView');

panelMain.items.clear();

panelMain.add(gridView);
panelMain.update();
panelMain.doLayout(); 
```

问题是当我回到网格时，它不再触发任何`itemdbclick`事件（就像网格只是页面中的一个图像，没有事件触发）。

有时当我去编辑`studentForm`并返回网格工作时，但是当我再次进入学生表单时，学生页面不会触发任何事件，当我单击编辑按钮时，我没有得到任何答案，即使在鼠标上我也看不到悬停（导致按钮颜色发生变化）。

这里有什么问题？

*   我使用 Extjs 4 和 Extjs MVC。
*   我有一个用于网格和编辑学生页面的控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:12:44.953

我认为您误解了表单上的**成功**配置。尝试：

```
listeners:{
itemdblclick: function ( gridView, record, item, index, e, eOpts ) {

    var editStudent = Ext.getCmp('editStudent');
    if(editStudent == undefined)
        editStudent = Ext.create('H.view.EditStudent');

    /* Load record in the form.
       Form must have on formfields property: 'name' equals to 'dataIndex' */

    editStudent.getForm().loadRecord(record); 

    var panelMain = Ext.getCmp('panelMain');
    panelMain.items.clear();

    panelMain.add(editStudent);
} 
```

**成功**和**失败**是提交函数的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:48:51.940

a）您在这里没有使用 MVC 模式。使用 Sencha 所称的 MVC，您可以将所有这些代码放在控制器中，而不是事件侦听器中。
b) 我强烈怀疑这段代码会在某处导致死锁，事件连续触发得如此之快，以至于浏览器会冻结。您需要使用调试器来查看究竟发生了什么。

# php - 递归迭代数组以更改特定键的值

> ID：11899988
> 
> 赞同：3
> 
> 时间：2012-08-10T10:41:14.703
> 
> 标签：php

我有一个这样的数组：

```
$a = array(
    'key1' => 'value1',
    'key2' => 'value2',
    'key3' => array(
        'key4' => 'value4',
        'key5' => array(
            'key6' => 'value6'
        )
    )
); 
```

如您所见，里面有内部数组`$a`

现在，我有一个键列表，例如：

```
key1
key4
key6 
```

我需要一个脚本来搜索这些键是否存在，如果存在则更改它们的值。我需要改变他们的价值观`base64_encode($value_of_the_key)`

所以也许是一个获取当前值并使用 base64_encode() 函数转换它的回调。

有人可以帮助我吗？

我想看看当前的 php 函数，但似乎没有做这件事的函数。

谢谢

**编辑：**

使用以下代码，我可以在回调中获取键....但问题是：

如何直接修改数组中的值？我的意思是……好吧……我得到了键和值，但是如何更改原始数组中的值？( `$a`)

```
$a = array(
    'key1' => 'value1',
    'key2' => 'value2',
    'key3' => array(
        'key4' => 'value4',
        'key5' => array(
            'key6' => 'value6'
        )
    )
);

function test($item, $key)
{
    echo "$key. $item<br />\n";
}

array_walk_recursive($a, 'test'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:44:11.190

`array_walk_recursive()`提供回调应该会有所帮助。更多信息[在这里](http://php.net/manual/en/function.array-walk-recursive.php)。

# java - ReadWriteLock 受保护映射的交互缓慢：读锁、并发映射或复制？

> ID：11899996
> 
> 赞同：2
> 
> 时间：2012-08-10T10:41:56.450
> 
> 标签：java, concurrency, concurrent-collections

我有一张经常阅读但很少写入的地图。有些操作（可以是读或写）涉及多个需要原子操作的对象，所以我使用了 ReadWriteLock 来提高性能。

现在我可以选择将并发映射降级为普通哈希映射，但我担心一些缓慢的迭代代码。

如果我降级地图，长迭代器必须持有读锁以避免并发访问异常。我认为这会阻塞写入线程太久。

由于一些迭代器对不一致的数据不敏感，我可以保留并发映射，以便迭代器可以与并发写入一起使用。但是，这会为正确使用锁的操作增加不必要的开销（来自并发映射）。

或者，我可以实现类似 Read-on-write 映射，其中克隆整个（非并发）映射以进行写入操作，以便现有迭代器继续在读锁之外工作。

显然，所有这些方法都是有效的，性能取决于实际的代码和设置。但是，我想知道是否对此有任何研究（所以我不必自己做实验）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:49:58.580

> 我有一张经常阅读但很少写入的地图。

在那种情况下，我会考虑实现写映射的副本。例如

```
private final Map<Key, Value> map = ?* thread safe map */
private volatile Map<Key, Value> mapCopy = emptyMap();

// when you write
get lock
modify map
take a copy and store it in mapCopy
release lock

// when you read
Map<Key, Value> map = this.mapCopy;
use map 
```

如您所见，您永远不需要在读取时获得锁定，而只需要在写入时获得锁定。

> 如果我降级地图，长迭代器必须持有读锁以避免并发访问异常。我认为这会阻塞写入线程太久。

我建议你测量它，而不是猜测。

> 我想知道有没有这方面的研究

如果确实如此，我不会太认真地对待这样的研究。正如您所建议的，结果因您的情况而异。