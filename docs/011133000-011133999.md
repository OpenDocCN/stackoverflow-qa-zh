# StackOverflow 问答 11133000-11133999

# android - 如何限制仅在android中的特定容器中选择焦点？

> ID：11133001
> 
> 赞同：0
> 
> 时间：2012-06-21T06:54:07.620
> 
> 标签：android, containers, setfocus

我编写了为 D-Pad 优化的 android 应用程序。我有几个带有小部件的容器。该逻辑要求用户可以根据应用程序状态在一个特定容器中选择小部件。我有简单的方法来实现这个逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:31:53.843

在运行时，对任何视图使用 View.setFocusable(boolean)。要处理容器中的所有项目，请运行它们的内容，例如

```
 for (int i = 0; i < layout.getChildCount(); i++) {
        View v = layout.getChildAt(i);
        v.setFocusable(false);
    } 
```

# javascript - 检测挤压箱关闭

> ID：11133004
> 
> 赞同：1
> 
> 时间：2012-06-21T06:54:20.730
> 
> 标签：javascript, mootools, squeezebox

嗨，有没有办法检测用户关闭的[SqueezeBox ？](http://digitarald.de/project/squeezebox/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:08:46.213

Squeezebox 有一个事件。

`this.fireEvent('onClose', [this.content]);`

所以当你制作你的squeezebox时，只需添加：

```
SqueezeBox.initialize({
    onClose: function() {
        alert('dont close me');
    }, 
    other: 'options'
}); 
```

顺便说一句 - 这真的很老了。你应该得到一个更新的灯箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:41:01.127

一种简单的方法：Squeezebox 的关闭按钮的 id 为*sbox-btn-close*，因此您可以使用 jQuery 将点击事件附加到该按钮上。

```
$('#sbox-btn-close').click(function(){
      alert('Squeezebox closed');
}); 
```

# c++ - 模拟监视器并在 windows 上获取视频流

> ID：11133007
> 
> 赞同：3
> 
> 时间：2012-06-21T06:54:46.733
> 
> 标签：c++, windows, winapi, multiple-monitors

有没有办法让我以编程方式在 Windows 中设置一个假监视器并从中获取视频流？win32 api中有什么东西可以让我这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:14:12.047

我认为 Windows 桌面对象是您的答案。以下是使用它们的应用程序示例：

> 与通过显示桌面上活动的窗口并隐藏其余窗口来实现其桌面的其他虚拟桌面实用程序不同，Sysinternals Desktops 为每个桌面使用一个 Windows 桌面对象。应用程序窗口在创建时绑定到桌面对象，因此 Windows 维护窗口和桌面之间的连接，并知道在您切换桌面时要显示哪些。[...]
> 
> 桌面依赖于 Windows 桌面对象意味着它无法提供其他虚拟桌面实用程序的某些功能。例如，Windows 不提供将窗口从一个桌面对象移动到另一个桌面对象的方法，并且由于必须在每个桌面上运行单独的资源管理器进程以提供任务栏和开始菜单，因此大多数托盘应用程序仅在第一个桌面上可见. 此外，无法删除桌面对象，因此 Desktops 不提供关闭桌面的方法，因为这会导致孤立的窗口和进程。因此，退出桌面的推荐方法是注销。

[http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx](http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:09:55.407

没有办法模拟**monitor**。

桌面功能是否符合您的标准？查看[CreateDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682124%28v=vs.85%29.aspx) / [SwitchDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686347%28v=vs.85%29.aspx)。

# java - PKCS#7 登录和验证签名

> ID：11133014
> 
> 赞同：1
> 
> 时间：2012-06-21T06:55:20.883
> 
> 标签：java, cryptography, bouncycastle, public-key-encryption, pkcs#7

我正在尝试使用 PKCS#7 签名和验证签名。我正在关注*用 java 开始密码学的*书。我已经编写了示例代码来签名和验证。当我尝试附加签名并将其写入文件然后尝试验证我遇到异常时（下面给出异常）

我想知道我们如何将此签名数据写入文件？我是否还需要将密钥库共享给验证签名的第二个人？

> org.bouncycastle.cms.CMSException：消息摘要属性值与org.bouncycastle.cms.SignerInformation.verify（未知来源）
> 的 org.bouncycastle.cms.SignerInformation.doVerify（未知来源）的计算值不匹配
> 。 .cms.SignerInformation.verify(Unknown Source)
> at com.inc.cms.test.bc.Test.isValidSignature(Test.java:150)
> at com.inc.cms.test.bc.Test.verifyData(Test.java: 120)
> 在 com.inc.cms.test.bc.Test.main(Test.java:78)

**非常感谢
我的代码在下面**

请帮我解决这个问题。非常感谢

```
`package com.inc.cms.test.bc;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.math.BigInteger;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.SecureRandom;
import java.security.cert.CertPathBuilder;
import java.security.cert.CertStore;
import java.security.cert.Certificate;
import java.security.cert.CollectionCertStoreParameters;
import java.security.cert.PKIXBuilderParameters;
import java.security.cert.PKIXCertPathBuilderResult;
import java.security.cert.TrustAnchor;
import java.security.cert.X509CertSelector;
import java.security.cert.X509Certificate;
import java.util.Arrays;
import java.util.Collections;
import java.util.Date;
import java.util.Iterator;

import javax.security.auth.x500.X500Principal;
import javax.security.auth.x500.X500PrivateCredential;

import org.bouncycastle.asn1.x509.BasicConstraints;
import org.bouncycastle.asn1.x509.KeyUsage;
import org.bouncycastle.asn1.x509.X509Extensions;
import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.CMSSignedDataGenerator;
import org.bouncycastle.cms.SignerId;
import org.bouncycastle.cms.SignerInformation;
import org.bouncycastle.cms.SignerInformationStore;
import org.bouncycastle.x509.X509V1CertificateGenerator;
import org.bouncycastle.x509.X509V3CertificateGenerator;
import org.bouncycastle.x509.extension.AuthorityKeyIdentifierStructure;
import org.bouncycastle.x509.extension.SubjectKeyIdentifierStructure;

public class Test {

    private static final char[] KEY_STORE_PASSWORD = "123456".toCharArray();
    private static final long VALIDITY_PERIOD = 365 * 24 * 60 * 60 * 1000;
    private static final char[] KEY_PASSWORD = "keyPassword".toCharArray();
    public static String ROOT_ALIAS = "root";
    public static String INTERMEDIATE_ALIAS = "intermediate";
    public static String END_ENTITY_ALIAS = "end";
    public static String PLAIN_TEXT = "Hello World!123";

    public static void main(String[] args) {
        try {

            // CREATE KEY STORE
            KeyStore keyStore = createKeyStore();

            // STEP 1\. SIGN
            byte[] step1Data = PLAIN_TEXT.getBytes();
            CMSSignedData cmsSignedData = signData(keyStore, step1Data);
            new File("D:\\pkcs7\\encrypted-file.p7b");
            FileOutputStream fileOuputStream = new FileOutputStream(
                    "D:\\pkcs7\\encrypted-file.p7b");
            fileOuputStream.write(cmsSignedData.getEncoded());
            fileOuputStream.flush();
            fileOuputStream.close();

            // STEP 2\. READ ENCRYPTED DATA AND VERIFY SIGN AND DECRYPT IT
            File file = new File("D:\\pkcs7\\encrypted-file.p7b");
            FileInputStream fileInputStream = new FileInputStream(file);
            byte[] encryptedAndSignedByte = new byte[(int) file.length()];
            fileInputStream.read(encryptedAndSignedByte);
            fileInputStream.close();
            cmsSignedData = new CMSSignedData(encryptedAndSignedByte);
            if (verifyData(keyStore, cmsSignedData) == true) {
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private static CMSSignedData signData(KeyStore keyStore,
            byte[] encryptedData) throws Exception {
        // GET THE PRIVATE KEY
        PrivateKey key = (PrivateKey) keyStore.getKey(END_ENTITY_ALIAS,
                KEY_PASSWORD);

        Certificate[] chain = keyStore.getCertificateChain(END_ENTITY_ALIAS);
        CertStore certsAndCRLs = CertStore.getInstance("Collection",
                new CollectionCertStoreParameters(Arrays.asList(chain)), "BC");
        X509Certificate cert = (X509Certificate) chain[0];

        // set up the generator
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();
        gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA224);
        gen.addCertificatesAndCRLs(certsAndCRLs);

        // create the signed-data object
        CMSProcessable data = new CMSProcessableByteArray(encryptedData);
        CMSSignedData signed = gen.generate(data, "BC");

        // recreate
        signed = new CMSSignedData(data, signed.getEncoded());
        // ContentInfo conInf = signed.getContentInfo();
        // CMSProcessable sigContent = signed.getSignedContent();
        return signed;
    }

    private static boolean verifyData(KeyStore keyStore, CMSSignedData signed)
            throws Exception {
        // verification step
        X509Certificate rootCert = (X509Certificate) keyStore
                .getCertificate(ROOT_ALIAS);

        if (isValidSignature(signed, rootCert)) {
            System.out.println("verification succeeded");
            return true;
        } else {
            System.out.println("verification failed");
        }
        return false;
    }

    /**
     * Take a CMS SignedData message and a trust anchor and determine if the
     * message is signed with a valid signature from a end entity entity
     * certificate recognized by the trust anchor rootCert.
     */
    private static boolean isValidSignature(CMSSignedData signedData,
            X509Certificate rootCert) throws Exception {

        boolean[] bArr = new boolean[2];
        bArr[0] = true;
        CertStore certsAndCRLs = signedData.getCertificatesAndCRLs(
                "Collection", "BC");
        SignerInformationStore signers = signedData.getSignerInfos();
        Iterator it = signers.getSigners().iterator();

        if (it.hasNext()) {
            SignerInformation signer = (SignerInformation) it.next();
            SignerId signerConstraints = signer.getSID();
            signerConstraints.setKeyUsage(bArr);
            PKIXCertPathBuilderResult result = buildPath(rootCert,
                    signer.getSID(), certsAndCRLs);
            return signer.verify(result.getPublicKey(), "BC");
        }

        return false;
    }

    /**
     * Build a path using the given root as the trust anchor, and the passed in
     * end constraints and certificate store.
     * <p>
     * Note: the path is built with revocation checking turned off.
     */
    public static PKIXCertPathBuilderResult buildPath(X509Certificate rootCert,
            X509CertSelector endConstraints, CertStore certsAndCRLs)
            throws Exception {
        CertPathBuilder builder = CertPathBuilder.getInstance("PKIX", "BC");
        PKIXBuilderParameters buildParams = new PKIXBuilderParameters(
                Collections.singleton(new TrustAnchor(rootCert, null)),
                endConstraints);

        buildParams.addCertStore(certsAndCRLs);
        buildParams.setRevocationEnabled(false);

        return (PKIXCertPathBuilderResult) builder.build(buildParams);
    }

    /**
     * Create a KeyStore containing the a private credential with certificate
     * chain and a trust anchor.
     */
    public static KeyStore createKeyStore() throws Exception {
        KeyStore keyStore = KeyStore.getInstance("JKS");
        keyStore.load(null, null);

        keyStore.load(null, null);

        X500PrivateCredential rootCredential = createRootCredential();
        X500PrivateCredential interCredential = createIntermediateCredential(
                rootCredential.getPrivateKey(), rootCredential.getCertificate());
        X500PrivateCredential endCredential = createEndEntityCredential(
                interCredential.getPrivateKey(),
                interCredential.getCertificate());

        keyStore.setCertificateEntry(rootCredential.getAlias(),
                rootCredential.getCertificate());
        keyStore.setKeyEntry(
                endCredential.getAlias(),
                endCredential.getPrivateKey(),
                KEY_PASSWORD,
                new Certificate[] { endCredential.getCertificate(),
                        interCredential.getCertificate(),
                        rootCredential.getCertificate() });

        keyStore.store(new FileOutputStream("d:\\pkcs7\\KeyStore.jks"),
                KEY_STORE_PASSWORD);
        return keyStore;
    }

    /**
     * Create a random 1024 bit RSA key pair
     */
    public static KeyPair generateRSAKeyPair() throws Exception {
        KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "BC");
        kpGen.initialize(1024, new SecureRandom());
        return kpGen.generateKeyPair();
    }

    /**
     * Generate a sample V1 certificate to use as a CA root certificate
     */
    public static X509Certificate generateCertificate(KeyPair pair)
            throws Exception {
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();
        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setPublicKey(pair.getPublic());
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");
        return certGen.generateX509Certificate(pair.getPrivate(), "BC");
    }

    /**
     * Generate a sample V1 certificate to use as a CA root certificate
     */
    public static X509Certificate generateRootCert(KeyPair pair)
            throws Exception {
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setPublicKey(pair.getPublic());
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        return certGen.generateX509Certificate(pair.getPrivate(), "BC");
    }

    /**
     * Generate a sample V3 certificate to use as an end entity certificate
     */
    public static X509Certificate generateEndEntityCert(PublicKey entityKey,
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(caCert.getSubjectX500Principal());
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test End Certificate"));
        certGen.setPublicKey(entityKey);
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false,
                new AuthorityKeyIdentifierStructure(caCert));
        certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false,
                new SubjectKeyIdentifierStructure(entityKey));
        certGen.addExtension(X509Extensions.BasicConstraints, true,
                new BasicConstraints(false));
        certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(
                KeyUsage.digitalSignature | KeyUsage.keyEncipherment));

        return certGen.generateX509Certificate(caKey, "BC");
    }

    /**
     * Generate a X500PrivateCredential for the root entity.
     */
    public static X500PrivateCredential createRootCredential() throws Exception {
        KeyPair rootPair = generateRSAKeyPair();
        X509Certificate rootCert = generateRootCert(rootPair);

        return new X500PrivateCredential(rootCert, rootPair.getPrivate(),
                ROOT_ALIAS);
    }

    /**
     * Generate a X500PrivateCredential for the intermediate entity.
     */
    public static X500PrivateCredential createIntermediateCredential(
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        KeyPair interPair = generateRSAKeyPair();
        X509Certificate interCert = generateIntermediateCert(
                interPair.getPublic(), caKey, caCert);

        return new X500PrivateCredential(interCert, interPair.getPrivate(),
                INTERMEDIATE_ALIAS);
    }

    /**
     * Generate a X500PrivateCredential for the end entity.
     */
    public static X500PrivateCredential createEndEntityCredential(
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        KeyPair endPair = generateRSAKeyPair();
        X509Certificate endCert = generateEndEntityCert(endPair.getPublic(),
                caKey, caCert);

        return new X500PrivateCredential(endCert, endPair.getPrivate(),
                END_ENTITY_ALIAS);
    }

    /**
     * Generate a sample V3 certificate to use as an intermediate CA certificate
     */
    public static X509Certificate generateIntermediateCert(PublicKey intKey,
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(caCert.getSubjectX500Principal());
        certGen.setNotBefore(new Date(System.currentTimeMillis()));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal(
                "CN=Test Intermediate Certificate"));
        certGen.setPublicKey(intKey);
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false,
                new AuthorityKeyIdentifierStructure(caCert));
        certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false,
                new SubjectKeyIdentifierStructure(intKey));
        certGen.addExtension(X509Extensions.BasicConstraints, true,
                new BasicConstraints(0));
        certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(
                KeyUsage.digitalSignature | KeyUsage.keyCertSign
                        | KeyUsage.cRLSign));

        return certGen.generateX509Certificate(caKey, "BC");
    }

} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-21T08:46:10.520

尝试这个：

```
public static void main(String[] args)throws Exception
{
    String password = "123456";

    MessageDigest md = MessageDigest.getInstance("SHA-256");
    md.update(password.getBytes());

    byte byteData[] = md.digest();

    //convert the byte to hex format method 1
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < byteData.length; i++) {
     sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
    }

    System.out.println("Hex format : " + sb.toString());

    //convert the byte to hex format method 2
    StringBuffer hexString = new StringBuffer();
    for (int i=0;i<byteData.length;i++) {
        String hex=Integer.toHexString(0xff & byteData[i]);
        if(hex.length()==1) hexString.append('0');
        hexString.append(hex);
    }
    System.out.println("Hex format : " + hexString.toString());
} 
```

# iphone - Ios 应用和 TestFlight 集成

> ID：11133026
> 
> 赞同：2
> 
> 时间：2012-06-21T06:56:19.030
> 
> 标签：iphone, objective-c, ios, xcode, testflight

> 我无法将 Test Flight sdk 集成到我的 ios 应用程序中以获取崩溃报告。有人可以帮助我以非常简单的步骤将 TestFlight sdk 集成到我的应用程序中。但是我遵循了 TestFlight sdk 文档但无法集成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T07:27:17.547

简单的步骤是：

1]将libTestFlight.a和它的头文件复制到一个文件夹中，并将该文件夹添加到您的项目中

![在此处输入图像描述](../Images/e31ecf19c350f6c401be44d83ccad6a0.png)

2] 确保您的 libTestFlight.a 出现在链接的二进制文件中

![在此处输入图像描述](../Images/2d6cf815fad48c7f235124c522a16ff1.png)

3]您的图书馆搜索路径将有一个条目，例如

![在此处输入图像描述](../Images/10d0216cd171992138ae6415ef376ae7.png)

最后打电话给——

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [TestFlight takeOff:TESTFLIGHT_TEAM_TOKEN];
     //---- Other Stuff goes here 
} 
```

希望能帮助到你 ！！您可以在 slideshare 上找到更多资源。

**编辑：如何到达链接的二进制文件步骤 - （目前使用 XCode 4.3.3）**

**屏幕抓取** -![在此处输入图像描述](../Images/f5edaeaa381926184bbb0946bfaf382d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T17:53:40.010

快速回答：

第 1 步 -[下载 SDK](https://www.testflightapp.com/sdk/download/193/)并将其添加到您的应用程序包中

第 2 步 - 在链接的框架和库中包含 libTestFlight.a（如果它没有自动出现）

第 3 步 - #import "TestFlight.h" 在您需要试飞活动的文件上

第 4 步 - 在您的应用程序中添加启动测试飞行的调用

```
didFinishLaunchingWithOptions
-(BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

//The Line you need
  [TestFlight takeOff:@"YOUR_TEST_FLIGHT_PASSCODE_HERE"]; 
} 
```

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T04:29:44.763

请注意，Apple 已将[TestFlight 移至 iTunes Connect](https://developer.apple.com/testflight/update/)，并[警告人们从他们的产品中删除该框架，](https://twitter.com/simX/status/552912427369906176)因此您不必再这样做了。

# java - 在哪里可以看到 hadoop pig 语句生成的 mapreduce 代码

> ID：11133029
> 
> 赞同：4
> 
> 时间：2012-06-21T06:56:33.893
> 
> 标签：java, hadoop, mapreduce, apache-pig

我们都知道hadoop pig语句转换成java mapreduce代码。我想知道有什么方法可以看到从 pig 语句生成的 mapreduce 代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:20:32.163

> 我们都知道hadoop pig语句转换成java mapreduce代码

不是这种情况。Hadoop Pig 语句不会翻译成 Java MapReduce 代码。

一种更好的思考方式是在 Java MapReduce 中运行的 Pig 解释器中“解释”Pig 代码。这样想：Python 和 Perl 不会“生成”C 代码，它们通过执行指令的 C 程序（解释器）运行。基本上，Pig 为要执行的查询计划提供了一个框架。Pig 代码被解释，一个预构建的解释器 MapReduce 作业执行它。因此，这是不可能的。

如果您想了解更多正在发生的事情，请使用`EXPLAIN`并`ILLUSTRATE`深入了解 Pig 为执行您的代码而构建的查询计划。

# javascript - 在 Excel 工作表中显示 HTML 代码（使用 JavaScript）

> ID：11133034
> 
> 赞同：0
> 
> 时间：2012-06-21T06:57:17.120
> 
> 标签：javascript, html, excel, vba

我正在创建一个 Excel 应用程序，但需要显示已经创建的网页（以免在 VBA 中再次重写代码）。我正在尝试将 HTML+JavaScript 代码嵌入 Excel 工作表（不打开网络浏览器的实例），但我做不到。

有没有类似的经历？可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:11:04.000

您必须有一个浏览器实例才能正确查看 html 文件，尤其是在您需要 JavaScript 交互时。但是，IE 是可嵌入的，可以从 Excel 中调用。

# extjs4.1 - ExtJs-4.1 网格锁定+汇总功能

> ID：11133036
> 
> 赞同：2
> 
> 时间：2012-06-21T06:57:20.673
> 
> 标签：extjs4.1

我有一个带有锁定功能和摘要功能的网格。如果使用锁定功能，则摘要功能不起作用。阅读论坛发现，当使用锁定时，ExtJs 会创建两个网格 1\. 具有普通视图的网格 2\. 具有锁定视图的网格。是否有可能没有在我们锁定列时创建的第二个网格中添加摘要功能。

如果是，那么我该如何实现呢？

我认为使用 ExtJs4.1 将有助于解决这个问题。但是我无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:17:25.580

在 4.1 演示中有一个示例，用于锁定具有摘要功能的网格。

见这里：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/locking-group-summary-grid.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/locking-group-summary-grid.html)

如果您不分组，则需要对其进行一些编辑，但它应该可以工作。

# sql - ORDER BY 的结果是否始终相同（SQL Server 2005,2008）？

> ID：11133038
> 
> 赞同：1
> 
> 时间：2012-06-21T06:57:23.190
> 
> 标签：sql, sql-server

假设我有一个表 Item (Id int Primary Key, Number INT) 有记录

```
Id    Number
100     3
200     3 
```

现在我正在运行查询

```
SELECT I.Id,ROW_NUMBER()OVER(ORDER BY I.Number) RN
FROM Item I 
```

在我的机器结果集中是

```
Id   RN
100   1
200   2 
```

现在我的问题是这个结果集是否会在所有机器上，或者在某些机器上它可能会改变为

```
Id   RN
200   1
100   2 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:12:28.523

以及 Panagiotis 提到的未定义的结果顺序

如果有关系，结果`ROW_NUMBER`是不确定的。您需要将唯一列的决胜局添加到 ，`ORDER BY`以便`Number=3`应用确定性编号的两行。

假设`Id`是唯一的，以下将是确定性的

```
SELECT I.Id,ROW_NUMBER()OVER(ORDER BY I.Number,I.Id) RN
FROM Item I
ORDER BY RN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:01:15.030

您没有为最终结果指定任何顺序，因此您无法保证结果的显示方式。

要按行号 (RN) 排序，您应该添加 ORDER BY RN 子句：

```
SELECT I.Id,ROW_NUMBER()OVER(ORDER BY I.Number) RN 
FROM Item I
ORDER BY RN 
```

除非您请求，否则服务器不会以任何特定方式对结果进行排序。这意味着结果将按照服务器处理它们的顺序出现。

服务器为每个查询创建一个执行计划，该计划可以对数据进行排序以加快处理速度，并使用可能也会影响排序的不同连接技术。执行计划的形式取决于索引的存在和所涉及的表的统计信息。最后，服务器可以使用并行执行计划，在这种情况下，来自不同内核的部分结果集最终会被合并。

您可能永远不会通过简单的查询注意到这一点，但是即使对于同一台服务器，结果顺序也可能会随着数据和统计信息的变化而变化，从而导致不同的执行计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:14:15.467

结果集可以是以下任何一种：

```
Id        RN
100        1
200        2 
```

或者，

```
Id        RN
200        1
100        2 
```

或者，

```
Id        RN
100        2
200        1 
```

或者，

```
Id        RN
200        2
100        1 
```

SQL 的规则非常简单——如果你*想要*一个特定的顺序，你必须要求它。如果您*不完整*地指定排序，那么系统可以自由地以它认为最方便的任何顺序排列行，只要它符合您给它的*规范*。

如果要强制执行特定排序，请完全指定它。例如，如果您总是想要第一个结果，请在规范和子句中指定`ORDER BY I.Number,I.Id`并拥有它。`ROW_NUMBER``ORDER BY`

# comments - 在 ANTLR 语法中查找注释

> ID：11133042
> 
> 赞同：1
> 
> 时间：2012-06-21T06:57:39.870
> 
> 标签：comments, antlr

我有以下语法：

```
grammar bxk; 
options
{
    language=CSharp3;
}

// start rule
start
    : com=comment root EOF
    ;

root
    : ROOT_ID CT_ID END
    ;

comment returns [string comment]
    :  ((('/*' des=(~'*/')* '*/'))NEWLINE) {$comment=$des.text;}
    ;

CHAR    :  ('a'..'z'|'A'..'Z') ;
ROOT_ID :  'ROOT_'(CHAR | DIGIT | SPECIAL)+ ;
CT_ID   :  'ct_'(CHAR | DIGIT | SPECIAL)+ ;
DIGIT   :  '0'..'9';
SPECIAL :  '_' ;
END :  ';';
ASSIGN : '=';
STRING  :  CHAR (CHAR | DIGIT | SPECIAL)*;
WS      :  (' '|'\t' | '\n' | '\r' | '\u000C')+ {Skip();} ; 
```

`/*`现在我将得到and之间的评论`*/`。这很好用。但是空间被清理了，因为 WS 令牌带有`Skip()`调用。我可以有什么跳过空格，但在评论结构中我想要空格。

我希望有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:13:43.687

不要制定`comment`解析器规则。改为使其成为词法分析器规则：

```
COMMENT
    :  '/*' .* '*/' // no need for a NEWLINE at the end
    ; 
```

在您的解析器规则中，您可以执行以下操作：

```
p returns [string comment]
 : FOO COMMENT BAR {$comment = $COMMENT.text;} // or {$comment = $COMMENT.Text;}
 ; 
```

# xml - 如何在构建脚本中使用 XCopy 而不是在 Windows 中进行复制

> ID：11133044
> 
> 赞同：0
> 
> 时间：2012-06-21T06:57:40.993
> 
> 标签：xml, build, command-prompt, nant, xcopy

之前为了将我的 dot-net 项目部署到我的远程服务器中，我在 nant 构建配置文件中使用了**复制命令。**该命令如下所示。

```
<target name="Deploy">
    <copy  todir="${path.to.the.directory}" overwrite="true">
        <fileset basedir="${Bin.Path}">
            <include name="*.*" />          
        </fileset>
    </copy>
</target> 
```

现在随着我的项目的增长，我的 $[bin.path] 文件夹中有两个新文件夹，现在我无法使用**复制**命令将我的可执行文件复制到输出文件夹。

我能做些什么？

搜索后我发现我可以使用**XCopy**。但是我不知道如何将它集成到我的构建脚本中，类似于上面显示的那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:01:09.977

我想知道您为什么得出不能使用`<copy>`任务的结论。

如果您需要将子文件夹包含到副本集中，请将您的 NAnt 脚本更改为：

```
<target name="Deploy">
    <copy  todir="${path.to.the.directory}" overwrite="true">
        <fileset basedir="${Bin.Path}">
            <include name="**\*.*" />          
        </fileset>
    </copy>
</target> 
```

如果您不想将文件夹结构保留在目标目录中，可以使用任务`flatten`的属性`<copy>`：

```
<target name="Deploy">
    <copy  todir="${path.to.the.directory}" overwrite="true" flatten="true">
        <fileset basedir="${Bin.Path}">
            <include name="**\*.*" />          
        </fileset>
    </copy>
</target> 
```

希望这可以帮助。

# iphone - MFMailComposeViewController 附件文件

> ID：11133045
> 
> 赞同：1
> 
> 时间：2012-06-21T06:57:48.090
> 
> 标签：iphone, ipad

当我使用 MFMailComposeViewController 将文件附加到消息时，数据附加在签名之前，此签名与单独的文件 .txt 连接。是否可以在签名后显示附件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:45:45.497

如果您正在发送图像数据或图像文件（从您的描述中不清楚）根据您在按钮操作中发送的文件类型进行更改 `UIImage *imageName =[UIImage imageNamed:@"splash_sml.png"]; IMgdata = UIImagePNGRepresentation(imageName);`

并在 displayComposerSheet 方法中添加这个

```
[picker addAttachmentData:IMgdata
                 mimeType:@"image/png"
                 fileName:@"content-id"]; 
```

# c# - Linq 查询以选择列表的前 20 项，对其属性有长度限制

> ID：11133047
> 
> 赞同：-1
> 
> 时间：2012-06-21T06:57:54.987
> 
> 标签：c#, linq

```
 public IList<TagWithCount> GetTagList()
        {
        var query=(from c in this.Query() where c.coupons.Where(d => d.isPublish == true).Count() > 2 select new TagWithCount { tag = c, count = c.coupons.Count }).ToList().OrderBy(x => Guid.NewGuid()).Skip(0).Take(75).ToList();
        return query;
    } 
```

这是我正在调用的方法..

```
 var a = context.tagService.GetTagList().Distinct(c => c.tag.name.Trim()).ToList() ;
return View(a.Take(20)); 
```

我想返回 20 个标签，但不超过 20 个字或少于 4 个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:04:30.757

我相信这就是你想要的......虽然不太确定......你的问题很模糊......

```
context.tagService.GetTagList().Where(x => x.tag.name.Length < 20 
                                   && x.tag.name.Length>4)
                               .Take(20).ToList(); 
```

# rest - Yii 创建亚马逊产品 API 类

> ID：11133048
> 
> 赞同：0
> 
> 时间：2012-06-21T06:57:55.870
> 
> 标签：rest, yii, model, amazon-product-api

我正在尝试设计我的类图。但我被困在这一点上。

我已经创建了所有数据库对应的模型。但是这次我需要为 Amazon API 创建一个模型，而没有相应的数据库。

在为数据库创建模型时，我使用 CActiveRecord。但是对于这个我不知道我可以从哪一个扩展。 [看看这个 CWebService：](http://www.yiiframework.com/doc/api/1.1/CWebService)

这适用于 SOAP，但 Amazon 产品 API 使用 REST。

所以问题是，在创建模型来调用 REST API 时，我需要从哪个类扩展？

编辑：我不想创建 REST API。我想调用一个 REST API 并为此编写一个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:11:03.303

使用[Yii 的 ActiveResource 扩展](http://www.yiiframework.com/extension/activeresource)。bool.dev 也向您指出。

现在，例如，如果您想获取有关某些产品的详细信息，您`GET` `http://api.am.com/prodcut //(just a dummy url for reference)`

您需要创建的模型将需要满足/处理返回给您的数据。如果您在表单中显示返回的数据，则扩展自`CFormModel`. 如果您没有在表单中显示它，请扩展从`CModel`以创建数据模型。

例如，如果您只是在表格视图中显示数据，您可以为产品创建一个模型，如下所示： `class product extends CModel`

希望这会有所帮助，除非我误解了你的问题

（我打算将此作为评论发布，但认为评论太长了）。

# iphone - 登录iphone模拟器后模拟器停止时无法从Facebook注销

> ID：11133051
> 
> 赞同：0
> 
> 时间：2012-06-21T06:58:04.610
> 
> 标签：iphone, facebook

我已经在我的 iphone 应用程序中集成了 facebook。一旦我登录并停止模拟器，然后我调用 [facebook logout]，它就不会注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:51.973

您是否通过将所有 nsuserdefault 值设置为 nill 来清除注销时的 fbsession。然后有一件事，您正在登录 saffari 浏览器，这超出了我们的应用程序范围。我们对此无能为力，否则您可以在 facebook 类中将 saffari auth 设置为 No。否则您必须通过清除所有缓存值来清除模拟器中的 saffari 浏览器。然后就可以了。

# php - PHP MSSQL：查询返回无行时如何显示输出

> ID：11133053
> 
> 赞同：0
> 
> 时间：2012-06-21T06:58:12.737
> 
> 标签：php, sql-server

我的 PHP-MSSQL 查询有问题。我有一个连接表，需要给出这样的结果：

```
 Department        Group A              Group B           Total A+B
                 WORKHOUR A OTHOUR A    WORKHOUR B OTHOUR B      WORKHOUR  OTHOUR
    HR             10         15     25   0               35       15
    IT              5          5                               5        5
    Admin                                    12   12              12       12 
```

查询将计算每个给定日期有多少员工（管理员将输入数据，一旦提交，查询将给出上述结果）。

问题是，当没有要显示的行时，最终输出是一团糟。该列**向右移动**。

即：只有 IT 中的 A 组 只有管理员中的 B 组

```
Department        Group A              Group B           Total A+B
             WORKHOUR A OTHOUR A WORKHOUR B OTHOUR B      WORKHOUR  OTHOUR
HR      10       15       25     0               35      15
IT       5        5        5         5
Admin   12       12       12        12 
```

我的问题是，如何防止这种情况发生？我已经用 While.... if else.. 但结果仍然一样。 **如果没有要返回的行，如何显示输出“0”？** 回声“0”；

这是我的查询：

```
 select DD.DPT_ID,DPT.DEPARTMENT_NAME,TU.EMP_GROUP, sum(DD.WORK_HOUR) AS  WORK_HOUR,      
    sum(DD.OT_HOUR) AS OT_HOUR
    FROM DEPARTMENT_DETAIL DD
    left join DEPARTMENT DPT
    ON (DD.DEPT_ID=DPT.DEPT_ID)
    LEFT JOIN TBL_USERS TU
    ON (TU.EMP_ID=DD.EMP_ID) 
    WHERE DD_DATE>='2012-01-01'
    AND DD_DATE<='2012-01-31'
    AND TU.EMP_GROUP!=2
    GROUP BY DD.DEPT_ID, DPT.DEPARTMENT_NAME,TU.EMP_GROUP
    ORDER BY DPT.DEPARTMENT_NAME 
```

这是我使用过的逻辑之一，但没有返回我想要的结果::

```
 while($row = mssql_fetch_array($displayResult))
{

if ((!$row["WORK_HOUR"])&&(!$row["OT_HOUR"]))

{
echo "<td >";
echo "empty";
echo "&nbsp;</td>";

echo "<td >";
echo "empty";
echo "&nbsp;</td>";

}
else 

{
echo "<td>";
echo $row["WORK_HOUR"];
echo "&nbsp;</td>";

echo "<td>";
echo $row["OT_HOUR"];
echo "&nbsp;</td>";

}

} 
```

请帮忙。我已经这样做了2天。@__@

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:26:10.637

我希望我没有误解你的问题。缺少某些行的原因是在某些情况下您甚至没有得到任何 tup。

例如，如果我有一个简单的表 t1(key1 varchar(200), key2 varchar(200), val integer)，我写了一个查询`select key1, key2, sum(val) from t1 group by key1, key2;`

假设这些值是 -

```
apple week1 4
apple week2 5
pear  week1 3
pear  week1 3
apple week2 3
apple week2 4
apple week1 5 
```

通过查询，我永远不会得到 (pear, week2) => 一些价值。

同样，您甚至可能不会触发条件检查，例如`(!$row["WORK_HOUR"])&&(!$row["OT_HOUR"])`

我希望下面的代码会有所帮助。

```
$results = array();

$allDepts = array();
$allGroups = array();

while($row = mssql_fetch_array($displayResult))
{
    $deptId = $row['DPT_ID'];
    $deptName = $row['DEPARTMENT_NAME'];
    $group = $row['EMP_GROUP'];
    $workHours = $row['WORK_HOUR'];
    $otHours = $row['OT_HOUR'];

    // set up a thorough list of depts & groups
    $allDepts[$deptId] = $deptName;
    $allGroups[$group] = $group;

    // store the values of hours
    $results[$deptId][$group]['work'] = $workHours;
    $results[$deptId][$group]['ot'] = $otHours;
}

// go through all possible combination of (dept, groups)
foreach($allDepts as $deptId => $deptName) {
    echo "<tr><td>$deptName</td>\n";
    foreach($allGroups as $group) {
        $workHours = $results[$deptId][$group]['work'];
        printTd($workHours);
        $otHours = $results[$deptId][$group]['ot'];
        printTd($otHours);
    }
    echo "</tr>\n";
}

function printTd( $value ) {
    $value = $value ? $value:"empty";
    echo "<td>$value</td>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:13:05.913

```
$arr = array();
while($r = mysql_fetch_assoc($rec))
{
   $arr[] = $r;
}

if(count($arr) == 0){
echo 0;
}else{
//do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T05:02:05.040

唷。最后，使用@LiangLiang Zheng 的回答，我可以获得最后的总计以及每行的工作时间和加班时间（行中）。（说真的，我只知道基本的、简单的 PHP，并不真正知道如何使用数组等，所以我只编码我所知道的任何东西）。

我现在唯一需要做的就是显示每列的总计： **A 组总工作时间、A 组加班时间总时间、B 组总工作时间、B 组加班时间总时间**。（任何人都可以帮助我吗？）

无论如何，这里我如何获得每行/行的总工作时间和总加班时间以及工作时间和加班时间的最终总计（显示在表格底部）：

```
 <?php

    $total_workhours=0;
    $total_ot=0;
    // go through all possible combination of (dept, groups)
    foreach($allDepts as $deptId => $deptName) {

    $dept_workhour=0;
$dept_ot=0;

    echo "<tr><td>$deptName</td>\n";

    foreach($allGroups as $group) 
{
    $workHours = $results[$deptId][$group]['work'];
    printTd($workHours);
    $otHours = $results[$deptId][$group]['ot'];
    printTd($otHours);

    $total_workhours+=$workHours;
    $total_ot+=$ot_hour;

            $dept_workhour +=$workHours;
    $dept_ot +=$ot_hour;

    }

echo "<td> $dept_workhour</td>\n";
echo "<td>$dept_ot</td>\n";
    echo "</tr>\n";
    }
    ?>
    <tr align="center">
    <td>TOTAL</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td ><?php echo $total_workhours; ?></td>
    <td><?php echo $total_ot; ?></td>
    </tr>

    <?php
    function printTd( $value ) {
    $value = $value ? $value:"empty";
    echo "<td>$value</td>\n";
    } 
```

# html - 为什么 charset=utf-8 在某些服务器上不起作用？

> ID：11133057
> 
> 赞同：3
> 
> 时间：2012-06-21T06:58:35.000
> 
> 标签：html, encoding

我有以下 html 文件 (1.html)，一旦我在浏览器中打开它，它就会打开并正确显示俄语字母。但是一旦我将它上传到另一台服务器并浏览它，它就会错误地显示俄语字母。

这里可能存在什么问题？

html文件的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Заголовок сайта</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <bod>
    <p>Русский шрифт</p>
    </body>
</html> 
```

这是它的显示方式：

![在此处输入图像描述](../Images/21370e5da809dbe6a4a163bcffffa1d1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:03:46.963

如果服务器发送`Content-type`包含字符集的标头，则该标头中指定的字符集优先于 HTML 文档中指定的字符集。

如果您使用的是 Apache，您可以将以下内容添加到`.htaccess`文件中以强制使用正确的标头：

```
AddDefaultCharset UTF-8 
```

# javascript - Play 2.x：如何使用普通按钮发出 AJAX 请求

> ID：11133059
> 
> 赞同：60
> 
> 时间：2012-06-21T06:58:35.843
> 
> 标签：javascript, java, ajax, routes, playframework-2.0

所以我之前已经成功地让 AJAX 请求工作，但我总是不得不使用一个表单，然后在提交结束时返回 false，这样它就不会刷新页面。

我最近也刚刚将我的 JavaScript 移动到一个单独的文件中，这导致我的 @ 命令失败。因此，我不知道如何将我的 URL 设置为我的路由？

HTML：

```
<button id="saveAsDefaultButton">Save as default</button> 
```

Playframework Java 代码：

```
public static Result saveDefaultPhoneForUser(String handset) {
    User currentUser = User.findByName(session("name"));
    currentUser.lastControlledHandset = theHandset;
    currentUser.save();
    return ok();
} 
```

路线：

```
POST    /                           controllers.Application.saveDefaultPhoneForUser(handset : String) 
```

javascript:

```
$('#saveAsDefaultButton').click(function(evt) {
        $('#errors').hide();
        $.ajax({
            type : 'POST',
            url : "controllers.Application.saveDefaultPhoneForUser",
            data : $('#controlledPhone option:selected').text(),
            dataType : "text",
            success : function(data) {
                //setError('Call succedded');
                //$('#test1').attr("src", data)
            },
            error : function(data) {
                setError('Make call failed');
            }
        });
        return false;
    }); 
```

我敢肯定有办法做到这一点，但我只是没有运气找到任何东西。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-06-21T07:36:19.570

对于这项工作，您应该使用它，`javascriptRoutes`因为它会根据您的 routes.conf 生成正确的 JS 路径。您将在 Zentask 示例中找到使用[示例](https://github.com/playframework/Play20/tree/master/samples/)

无论如何，现在您可以通过更改来修复您的 AJAX`url`调用

```
url : '@routes.Application.saveDefaultPhoneForUser()', 
```

这种方式需要将整个 JS 放在模板中，这是错误的。它可以甚至应该被移动到单独的 JS 文件中，并且您需要使用 javascriptRoutes。

***更多的...***

*****官方文档中还***没有描述**javascriptRoutes**，但这里是一步一步的介绍。虽然描述看起来很复杂，但*实际上*使用这种方式带来了很多好处。**

 **## 1\. 创建公共路由

首先，您需要在`conf/routes`文件中创建公共路由：

```
GET     /item/:id     controllers.Application.getItem(id: Long)
POST    /item/new     controllers.Application.newItem
PUT     /item/:id     controllers.Application.updateItem(id: Long) 
```

当然，你至少需要在`Application`控制器中创建这三个动作：

*   `getItem(Long id){ ... }`
*   `newItem() { ... }`
*   `updateItem(Long id) { ... }`

## 2\. 创建一个将公共路由转换为 JS 的动作

*   把它放在某个地方，即。在你的`Application`控制器中
*   让我们称之为`javascriptRoutes()`

在该操作中，您将指向文件中的**现有**路线`conf/routes`

```
public static Result javascriptRoutes() {
    response().setContentType("text/javascript");
    return ok(
        Routes.javascriptRouter("myJsRoutes",
            routes.javascript.Application.getItem(),
            routes.javascript.Application.newItem(),
            routes.javascript.Application.updateItem(),
            //inside somepackage
            controllers.somepackage.routes.javascript.Application.updateItem()
        )
    );
} 
```

***注意：***不要在括号中设置任何参数。

## 3\. 创建`javascriptRoutes`行动路线并将其包含在您的模板中

路线`conf/routes`

```
GET     /javascriptRoutes     controllers.Application.javascriptRoutes 
```

查看`<head>`部分`/views/main.scala.html`

```
<script type="text/javascript" src='@routes.Application.javascriptRoutes()'></script> 
```

## 4.在你想要的地方使用javascriptRoutes

从现在开始，您可以在 JS 中使用路由来获取正确的路径，而无需指定`url`and `type`。例如，而不是：

```
 $('.getAjaxForThisContainer').click(function(e) {
    var idToGet = $("#someField").val();
    $.ajax({
        type : 'GET',
        url : '@routes.Application.getItem()',
        data : {
            id: idToGet
        },
        success : function(data) {
            // ... some code on success
        }
    });
    return false;
}); 
```

您可以使用简化版本（`myJsRoutes`从第 2 点开始）：

```
myJsRoutes.controllers.Application.getItem(idToGet).ajax({
    success : function(data) { ... some code ... }
}); 
```

或者

```
myJsRoutes.controllers.Application.newItem().ajax({
    success : function(data) { ... some code ... }
}); 
```

ETC...

*   您无需指定`type: "POST"`- JS 路由器将根据`conf/routes`规则使用正确的方法
*   您可以使用纯 JS 中的语法`id`将记录（或其他参数）设置为`GET`或`PUT`（或其他方法）`routes-like`
*   如果您的路由规则包含所有必需的参数，您可以真正最小化您的 JS：

路线：

```
GET   /some/:a/:b/:c    controllers.Application.getABC(a: String, b: Integer, c: String) 
```

JS：

```
myJsRoutes.controllers.Application.getABC("a", 1, "b" ).ajax({}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-18T03:27:44.087

我喜欢“老好”的简单方式：

**1**在页面中，使用 JQuery，

在一些偶数处理程序中

```
 $.get('/giveme', {'arg': value}, function(data) {

                                    window.alert(data);

                                  }
 ); 
```

**2**在服务器/播放端

2.1 路线：`GET /giveme controllers.Application.giveme(arg)`

2.2 斯卡拉行动：

```
object Application extends Controller { 

      def giveme(arg:String) = Action {
        Ok(Json.toJson("hello," + arg ))
      }

    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-30T04:33:33.477

需要注意的事情...打电话时

```
Routes.javascriptRouter("myJsRoutes", 
```

Routes 是从 play.Routes 导入的，而不是 play.api.Routes

实现此代码时出现错误，因为我认为它来自 api（显然我错了）。除此之外，一切都很好~！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-19T10:03:59.943

有一个更简单的解决方案，使用嵌入式路由器生成 Javascript 路由器。您可以使用 helper 指令生成 Javascript 路由器`@javascriptRouter`，将以下代码放在您的 html 页面头标记中（可能在主装饰模板中）

```
<head>
    <title>Saeed Title</title>
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
    <script src="@routes.Assets.at("javascripts/jquery/v1.12.4/jquery.min.js")" type="text/javascript"></script>
    @helper.javascriptRouter("jsRoutes")(
        routes.javascript.MyController.getById,
        routes.javascript.MyController.getByName
    )
</head> 
```

不要担心语法错误（在 Intellij 中），不要在操作名称后使用括号。现在您可以`jsRoutes.controllers.MyController.getById(id)`在您的 ajax 调用代码中使用。

```
$.ajax(jsRoutes.controllers.MyController.getById(id))
   .done( /*...*/ )
   .fail( /*...*/ ); 
```

或用于`jsRoutes.controllers.MyController.getById(id).url`获取网址。 [更多信息](https://www.playframework.com/documentation/2.5.x/JavaJavascriptRouter#embedded-router)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T23:42:10.107

Marcus 的回答非常好，所以遇到此问题的其他任何人都应该能够使用它。

我确实遇到了一个问题，但在尝试让它工作时，我花了一点时间才开始工作。当我发出我的 ajax 请求时，它路由到了错误的方法。

这是因为在我的路线文件中，我有以下内容：

```
POST    /                           controllers.Application.makeCall()
POST    /                           controllers.Application.saveDefaultPhoneForUser(handset : String) 
```

通过具有相同位置 / 的两个 post 方法。它似乎总是去打电话。所以只是给任何人的提示，不要这样做，否则它将不起作用。

我只需要将其更改为：

```
POST    /                           controllers.Application.makeCall()
POST    /saveDefaultPhoneForUser    controllers.Application.saveDefaultPhoneForUser(handset : String) 
```

希望这可以帮助某人。**

# jquery - jquery：使用 :contains 和锚标记

> ID：11133062
> 
> 赞同：0
> 
> 时间：2012-06-21T06:58:47.070
> 
> 标签：jquery, anchor, addclass

我想识别具有包含特定字符串的 href 的锚标记，然后添加一个类。我认为这样做的方法可能是使用 :contains(text) 过滤器，但这似乎不起作用。我注意到在 jQuery 文档中给出的示例中，选择器仅用于将 css 添加到目标元素。您不能使用此选择器将类添加到锚标记之类的东西吗？我的示例案例如下：

```
<script type="text/javascript">
$('a:contains("apple")').addclass("monkey");
</script> 
```

锚中的 href 是[http://www.apple.com](http://www.apple.com)

此代码不起作用。

或者，实现我的目标的最佳方法是找到包含特定字符串的锚点，然后将类或 id 添加到锚点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:59:59.273

你想要`$('a[href*="apple"]')`。`:contains()`检查元素的内部文本。

# java - 哈希表数据排序

> ID：11133067
> 
> 赞同：0
> 
> 时间：2012-06-21T06:58:56.470
> 
> 标签：java, hashtable

我正在尝试`HashTable`通过

```
HashTable ht=new HashTable(); 
```

我通过一个 xml 文件将价值放入其中。

问题是当我打印哈希表的值时，它的顺序不同，它采用升序。

假设：-如果键是 [US, AU, CA] 并具有相应的值，那么我试图按照它们在文件（xml）中出现的顺序来获取它们，但它像 [AU, CA, US]有各自的价值观。

任何帮助，将不胜感激。

问候，阿尔沙德。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T07:00:33.113

> 问题是，当我打印哈希表的值时，它的顺序不同，它采用升序。

不一定——它会以某种*未指定*的顺序排列。您*不能*依赖`Hashtable`.

如果您想要保留插入顺序的地图，请使用[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html). （您几乎可以肯定一开始就不想`Hashtable`，但是`HashMap`。）

要从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)中添加有关 a 中元素排序的信息`HashMap`：

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:03:53.497

没错，哈希表不介意您添加值的顺序。

也许你应该使用 LinkedHashMap 或 LinkedList。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-21T07:10:14.733

的键`HashTable`是根据键的类的自然顺序排序的。参考`Comparable`。

键需要实现`Comparable`，因此由于您的键是字符串，因此它们会这样做。键排序的行为将仅以这种方式控制。

# javascript - clientWidth 和 clientHeight 返回 0

> ID：11133069
> 
> 赞同：15
> 
> 时间：2012-06-21T06:59:05.983
> 
> 标签：javascript, jquery, html

为什么在 IE、Chrome 和 Safari 上 clientWidth/Height 返回 0？但在 Firefox 和 Opera 上运行良好。我使用了这段代码：

```
$(document).ready(function () {

    var imgs = document.getElementsByTagName('img');
    var imgLength = imgs.length;

    for (var i = 0; i <= imgLength - 1; i++) {

        var imgWidth = imgs[i].clientWidth;
        var imgHeight = imgs[i].clientHeight;

        $('img').eq(i).attr({
            width: imgWidth,
            height: imgHeight
        });

        console.log(imgWidth);
    }

    console.log(imgLength);

}); 
```

任何想法？谢谢。

我尝试使用带有 clientwidth 的 window.load 它在 Firefox、Chrome 和 Opera 上运行良好，但其他人则不行

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T16:49:00.520

尝试更改文档类型。
[http://forums.asp.net/post/1515655.aspx](http://forums.asp.net/post/1515655.aspx)
我不确定，但我解决了这个问题。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-21T07:12:57.773

如果您想获得包括边距和边框在内的尺寸，请尝试使用 JQuery 函数`outerWidth`和`outerHeight`. 他们应该注意跨浏览器的差异。[http://api.jquery.com/outerwidth/](http://api.jquery.com/outerwidth/)

如果您只想获取元素内容的尺寸（没有边距、边框、填充），请使用`width`and `height`。[http://api.jquery.com/width/](http://api.jquery.com/width/)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-06-21T07:07:23.593

我认为如果您使用 JQuery 来获取高度和宽度会更好，因为它在所有浏览器中都可以正常工作，所以您的代码将是这样的：-

```
$(document).ready(function() {

     var imgs = $('img');
     var imgLength = imgs.length;

     for(var i=0; i<= imgLength-1;i++){

         var imgWidth = imgs[i].width();
         var imgHeight = imgs[i].height();

         $('img').eq(i).attr({width:imgWidth, height: imgHeight});

         console.log(imgWidth);
     }

     console.log(imgLength); 

}); 
```

# c# - 解决方案资源管理器中的搜索选项

> ID：11133070
> 
> 赞同：2
> 
> 时间：2012-06-21T06:59:06.947
> 
> 标签：c#, visual-studio-2008

我的解决方案资源管理器中有 3 个项目和大量文件和文件夹。在迁移文件夹中，我想搜索其文件名包含类似**lastcreatedat**的文件，即在正常搜索选项中，我们键入类似*lastcreatedat*（即 * 后跟要搜索的单词，后跟 *）。我在哪里可以找到解决方案资源管理器中的搜索选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:08:45.057

我有一篇博客文章介绍了如何利用Visual Studio的*在文件中查找功能：*[文件搜索：我在 VS2010 中发现的东西](http://techfilth.blogspot.co.nz/2010/12/file-search-something-i-discovered-in.html)

请注意，这远远超过了 WIndows 文件资源管理器可以做的任何事情。它将向您展示如何指定您想在其中搜索的任何文件夹，包括解决方案之外的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:14:37.853

在解决方案资源管理器中选择您的项目名称单击“查看类图”按下 CTL+F 并输入您的搜索词，这样您就可以在您的项目类中搜索

# iphone - 获取 NULL 缓存

> ID：11133071
> 
> 赞同：0
> 
> 时间：2012-06-21T06:59:13.160
> 
> 标签：iphone, objective-c, ios

我在 iOS 中使用 NSCache 我在 .h 文件中有以下代码用于缓存：

```
 NSCache *_cache; 
```

我正在将从 url 下载的图像添加到 .m 中的缓存中：

```
-(void)cacheFromURL:(NSURL*)url 
```

{ [_cache setCountLimit:50];

```
UIImage* newImage = [_cache objectForKey:url.description];
if( !newImage )
{

    NSError *err = nil;

    if(url!=Nil)
    {
        newImage=[UIImage imageWithData:[NSData dataWithContentsOfURL:url options:0 error:&err]];
    }
    if( newImage )
    {

        [_cache setValue:newImage forKey:url.description];

    }
    else
    {
        NSLog( @"UIImageView:LoadImage Failed: %@", err );
    }

    if(_cache==Nil)
    {
        NSLog(@"nil");  
    }

    else 
    {
        NSLog(@"cache is not nil");
    }
} 
```

}

但我每次都得到零缓存。我可以在日志中看到下载过程。为什么我得到空缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:26:22.847

您需要先创建/初始化[`NSCache`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)对象，然后才能向其添加对象。您还需要添加对象[`setObject:forKey:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008976-CH1-SW7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:03:32.410

你必须先初始化你的`NSCache`对象：

```
_cache = [[NSCache alloc] init]; 
```

# foursquare - Foursquare 活动时间序列查看用户和解锁用户始终返回 0

> ID：11133076
> 
> 赞同：1
> 
> 时间：2012-06-21T06:59:23.313
> 
> 标签：foursquare

为什么 Foursquare Campaign Timeseries 查看用户和解锁用户总是返回 0？谢谢。我尝试了一个简单的签到特价，并且已经能够解锁它，并要求一些朋友查看并签到，但没有运气。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:51:18.503

我认为查看/解锁用户的统计信息还没有实时更新，所以只要数据在一两天后出现，这就是预期的行为。如果您关心特定的时间范围，您可能还想尝试将 startAt 和 endAt 指定为请求的一部分。

# c# - 无法从 Metro 风格的应用程序获取可用磁盘空间

> ID：11133084
> 
> 赞同：0
> 
> 时间：2012-06-21T07:00:13.580
> 
> 标签：c#, pinvoke, microsoft-metro

我正在编写一个 Metro 风格的应用程序，并想确定托管用户音乐库的驱动器的可用存储容量。我想在磁盘上没有剩余空间或剩余空间很少时禁用某些应用程序功能。我正在使用 P/Invoke 调用 GetDiskFreeSpaceExW 并得到错误并且没有有效的字节数。

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern bool GetDiskFreeSpaceExW(
   string lpDirectoryName,
   out ulong lpFreeBytesAvailable,
   out ulong lpTotalNumberOfBytes,
   out ulong lpTotalNumberOfFreeBytes
);

[DllImport("kernel32.dll", SetLastError = true)]
static extern int GetLastError();

async static void TestDiskSpace()
{
   IStorageFolder musicFolder = KnownFolders.MusicLibrary;
   IStorageFolder testFolder = await musicFolder.CreateFolderAsync("test", CreationCollisionOption.OpenIfExists);
   IStorageFolder appFolder = ApplicationData.Current.LocalFolder; 
   ulong a, b, c;
   string[] paths = new[]
   {
      null,
      "."
      "C:",
      "C:\\",
      "C:\\Users\\Jonas\\Music",
      "C:\\Users\\Jonas\\Music\\",
      musicFolder.Path,
      testFolder.Path,
      appFolder.Path
   };
   foreach(string path in paths)
   {
      GetDiskFreeSpaceExW(path, out a, out b, out c);
      int error = GetLastError();
      Debug.WriteLine(
         string.Format("{0} - Error {1} - free = {2}",
         path ?? "null", error, a));
   }
} 
```

调试输出：

```
null - Error 5 - free = 0
. - Error 123 - free = 0
C: - Error 3 - free = 0
C:\ - Error 3 - free = 0
C:\Users\J909\Music - Error 3 - free = 0
C:\Users\J909\Music\ - Error 3 - free = 0
 - Error 3 - free = 0
C:\Users\J909\Music\test - Error 123 - free = 0
C:\Users\J909\AppData\Local\Packages\long-app-id\LocalState - Error 123 - free = 0 
```

看来我提供了错误的输入。错误代码为 3：ERROR_PATH_NOT_FOUND、5：ERROR_ACCESS_DENIED、123：ERROR_INVALID_NAME。我在带有 VS Ultimate 2012 RC 的 Windows 8 RP (x64) 上运行此代码，从 Metro 风格的应用程序调用。我的应用被授予访问用户音乐库的权限。

有人设法从 Metro 风格的应用程序中成功调用此函数吗？接受什么样的目录名称来产生对可用空间的有效读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:09:57.610

[我根据Metro 的 Win32 和 COM 文档](http://msdn.microsoft.com/en-us/library/windows/apps/br205753.aspx)创建了这个问题中的代码。它调用 GetDiskFreeSpaceExW 以在 Metro 中可用，但使用 P/Invoke 的托管应用程序需要调用 GetDiskFreeSpaceEx：

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern bool GetDiskFreeSpaceEx(
    string lpDirectoryName,
    out ulong lpFreeBytesAvailable,
    out ulong lpTotalNumberOfBytes,
    out ulong lpTotalNumberOfFreeBytes);

static void TestDiskSpace()
{
    IStorageFolder appFolder = ApplicationData.Current.LocalFolder;
    ulong a, b, c;
    if(GetDiskFreeSpaceEx(appFolder.Path, out a, out b, out c))
        Debug.WriteLine(string.Format("{0} bytes free", a));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:04:29.583

你可能有更好的运气

```
long free = new DriveInfo(driveName).TotalFreeSpace; 
```

# php - 通过jquery迭代

> ID：11133087
> 
> 赞同：0
> 
> 时间：2012-06-21T07:00:30.593
> 
> 标签：php, javascript, jquery, jquery-plugins, jqgrid

我有一个 jquery 代码，它使用户能够选择他们希望借入的金额以及他们希望在多长时间内还款。

我需要做的是在表格中显示结果，这样如果用户想借 200 美元 30 天，他们可以每天支付 200/30 = 6.66 美元，所以网格将有第 1 天：6.66，第 2 天：6.66 ，第 3 天：6.66 ......直到第 30 天。

我尝试过使用迭代

创建了一个名为 days 的变量

```
for( var i=i; i<days; i++) {
    //display days and amount
} 
```

有什么帮助吗？

如果金额相同，为什么要每天显示金额？因为代码中某处有一个滑块，用户可以更改金额和日期以查看他们每天的还款额，它是更大代码的一部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:27:04.853

这是开始的东西，只需从这里扩展：

HTML：

```
Borrow Amount: <input type="text" id="borrow_amt" value="" />
<input type="button" id="update" value="Update Repayment" />

<p>&nbsp;</p>

<table border="1">
<tr><td colspan="30" align="center"> REPAYMENT SCHEME </td></tr>
<tr id="days"></tr>
<tr id="repayment"></tr>
</table>​ 
```

CSS：

```
.td_days { padding: 10px; } 
```

JS：

```
$(document).ready(function() {

    $('#update').click(function() {

        $('tr#days').html("");
        $('tr#repayment').html("");

        var days = 30;
        for (i=1; i <= days; i++) {
            $('tr#days').append('<td class="td_days">'+ i +'</td>');
        }

        for (i=1; i <= days; i++) {
            $('tr#repayment').append('<td class="td_days">'+ $('#borrow_amt').val()/30 +'</td>');
        }
    });

}); 
```

## ​</h2>

部分代码 c/0 @Alex Ball 的建议，所以给他一个信用。

在此处查看实际代码：http: [//jsfiddle.net/DHYHx/](http://jsfiddle.net/DHYHx/)

# android - android ViewSwitcher 屏幕方向更改

> ID：11133092
> 
> 赞同：0
> 
> 时间：2012-06-21T07:00:38.153
> 
> 标签：android, android-orientation, viewswitcher

我在 2 个布局文件`ViewSwitche`中有一个 r，`FragmentActivity`每个方向一个。由`ViewSwitcher`控制`radio group`。

当我旋转屏幕时，一切都如我所料，正确的布局文件用于渲染屏幕。

**但是，当屏幕旋转时会触发**广播组的`onCheckedChanged`事件。监听器看起来像这样（在 中创建）： **`onCreate`**

 **```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        //snip
        radios.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup radioGroup, int index) {

            viewSwitcher.showNext();
        }
        });
 } 
```

如何在屏幕旋转时调用**viewSwitcher.showNext()**而不会触发它？`listener`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:20:05.523

好吧，我找到了一个 hacky 解决方案，但我希望那里有更好的解决方案。

```
 private boolean wasRotatedHack;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.savedInstanceState = savedInstanceState;
    if (savedInstanceState == null) {
        wasRotatedHack = false;
    } else {
        wasRotatedHack = true;
    }

    tabRadios.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup radioGroup, int index) {

            if (!wasRotatedHack) {
                viewSwitcher.showNext();
            } else {
                wasRotatedHack = false;
            }
        }
    });

    startInspectionButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            startActivity(new Intent(getApplicationContext(), InspectionActivity.class));
        }
    });
  } 
```**

# drupal - Drupal 出版

> ID：11133096
> 
> 赞同：0
> 
> 时间：2012-06-21T07:00:56.623
> 
> 标签：drupal, drupal-7

我正在开发一个 Drupal 网站。它是由别人设计的。我想将设置从自动发布帖子更改为不自动发布。我在内容类型、我的内容类型（编辑）、发布选项中设置了选项。它设置为“未发布”。每次我添加新帖子时，它仍然会发布。

这哪里出错了？我需要更改代码中的某些内容吗？如果是，我在哪里改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:30:21.803

有许多配置选项可能会导致这种情况，可以通过用户界面进行调整，而无需深入研究代码。

匿名用户可能有权查看未发布的内容。

您也有可能将视图配置为返回未经发布 = true 过滤的结果。

# php - 使 SVN 工作副本在本地主机上工作

> ID：11133098
> 
> 赞同：0
> 
> 时间：2012-06-21T07:01:02.163
> 
> 标签：php, svn, tortoisesvn, localhost

我是 SVN 的新手。需要你们的帮助。

我有一个在线 SVN 存储库的链接。

我创建了一个文件夹 (wcf) 并从该存储库中获取“签出”。所有文件都复制到我的文件夹 (wcf) 中。据我了解，此文件夹 (wcf) 现在是该存储库的工作副本。

谁能告诉我如何在我的本地主机上访问这个工作副本（wcf）？

我试过这个：localhost/wcf/

但它什么也没做。

我在 PHP 中工作。

请帮忙！

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:31:12.503

我已经解决了我的问题。默认情况下，我们不必更改任何内容。可以像本地主机上的任何其他项目一样访问工作副本。就我而言，我使用的是 Magento。如果我们的工作副本连接到数据库并且无法从本地主机连接到该数据库，那么我们必须在本地主机上创建一个具有类似模式的新数据库。在我们的工作副本的配置文件中更改数据库路径，一切都会正常工作。

我所做的只是更改 local.xml 中的数据库路径并更改 Magento 数据库中的基本 URL（表：core_config_data）。

总之，谢谢大家！

问候！

# javascript - 页面卸载事件在 FireFox 中有效，在 Chrome 中无效

> ID：11133100
> 
> 赞同：0
> 
> 时间：2012-06-21T07:01:13.580
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

我在 JavaScript 中使用以下事件进行页面加载。每当页面关闭时，都会显示警报。它在 FireFox 中可以正常工作，但在 Chrome 中不能正常工作。如何更改**IE、FireFox 和 Chrome**常见的以下事件？

```
$(window).unload(function()
{
 alert('Bye')
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:11:48.097

暂时使用这段 JS 代码，这是最新 Chrome 版本中 JQuery 的一个错误。

```
window.onbeforeunload = function() { return "to be alerted text"; } 
```

# java - 为什么这对 ICS 不起作用

> ID：11133103
> 
> 赞同：0
> 
> 时间：2012-06-21T07:01:22.147
> 
> 标签：java, android, html, android-4.0-ice-cream-sandwich

> **可能重复：**
> [Android 应用程序中的奇怪 NetworkOnMainThreadException？](https://stackoverflow.com/questions/8995364/strange-networkonmainthreadexception-in-android-app)
> [尝试上传到 Dropbox：NetworkOnMainThreadException？](https://stackoverflow.com/questions/10892858/trying-to-upload-to-dropbox-networkonmainthreadexception)

我使用下面的代码从 url 读取 HTML 内容。这适用于 2.3.3，但是当我尝试运行相同的代码时，它不适用于 ICS。

我正在尝试将这些 html 内容附加到`edittext`. 但是当我在 ICS 上运行代码时，它总是为空。可能是什么问题？

```
public class Quiz1Activity extends Activity {
    private static BufferedReader reader = null;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

EditText ed = (EditText) findViewById(R.id.editText1);

        try {
            ed.append(getStringFromUrl("http://www.google.com"));
            //getInputStreamFromUrl("").close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static InputStream getInputStreamFromUrl(String url){
           InputStream contentStream = null;

           try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpResponse response = httpclient.execute(new HttpGet(url));
             contentStream = response.getEntity().getContent();
           } catch(Exception e){
              e.printStackTrace();
           }
           System.out.println("Content stream is " + contentStream);
           return contentStream;
        }

    public static String getStringFromUrl(String url) throws IOException{
        reader = new BufferedReader(new InputStreamReader(getInputStreamFromUrl(url)));

        StringBuilder sb = new StringBuilder();
        try{
        String line = null;
        while((line = reader.readLine()) != null)
        {
            sb.append(line);
        }    
        }catch (IOException e){
         e.printStackTrace();
        }
       getInputStreamFromUrl(url).close();
        return sb.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:32:51.503

就像@Vipul Shah 所说，您必须将 getInputStreamFromUrl() 移动到另一个使用异步任务的线程中，这是在 ICS 上的工作：

```
package com.home.anas;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.EditText;

public class WebPageContentActivity extends Activity {
    private EditText ed;

/** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ed = (EditText) findViewById(R.id.editText1);
        readWebpage();
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            for (String url : urls) {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                try {
                    HttpResponse execute = client.execute(httpGet);
                    InputStream content = execute.getEntity().getContent();

                    BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        response += s;
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
            ed.setText(result);
        }
    }

    public void readWebpage() {
        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(new String[] { "http://www.google.com" });

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:04:12.313

> 但是当我在 ICS 上运行代码时，它总是为空。可能是什么问题？

问题是 ICS 不允许您在主线程上执行异步任务，因此将您的异步移动到新线程中。

您应该在单独的线程中移动以下代码。

```
public static InputStream getInputStreamFromUrl(String url){
           InputStream contentStream = null;

           try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpResponse response = httpclient.execute(new HttpGet(url));
             contentStream = response.getEntity().getContent();
           } catch(Exception e){
              e.printStackTrace();
           }
           System.out.println("Content stream is " + contentStream);
           return contentStream;
        } 
```

# sql - sql server 获取结果延迟的问题如何解决？

> ID：11133104
> 
> 赞同：0
> 
> 时间：2012-06-21T07:01:27.287
> 
> 标签：sql, sql-server

我创建了以下视图，

```
SELECT     
   currency_cd, SUM(comprate) AS salary, employee_code,
   (SELECT SUM(c.comprate) AS Expr1
    FROM dbo.employees_compensation AS c 
    INNER JOIN
       (SELECT MAX(id) AS id, comp_ratecd
        FROM dbo.employees_compensation
        WHERE (effdt = (SELECT MAX(effdt) AS Expr1
               FROM dbo.employees_compensation AS employees_compensation_1
               WHERE (employee_code = b.employee_code)
              )
       ) AND (employee_code = b.employee_code)
    GROUP BY 
       comp_ratecd) AS a ON c.id = a.id) AS salary1
FROM 
   dbo.employees_compensation AS b
GROUP BY 
   currency_cd, employee_code 
```

它工作正常并给出了预期的结果。但问题是执行和给出结果需要时间。有时它也会给出错误，比如超时等。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:10:20.677

也许你应该重组你的数据库？例如，创建将表示连接的表。如果您不关心时间，您可以通过创建*临时表*或*虚拟表（也称为视图）*来避免超时错误。避免这样复杂和嵌套的表达式。

# ruby - 您如何添加名为“unique_id”的新列，并将邮箱与设计相关联？

> ID：11133106
> 
> 赞同：0
> 
> 时间：2012-06-21T07:01:57.123
> 
> 标签：ruby, devise, model-associations

我有个问题。设计和邮箱安装在我的 Rails 应用程序上没有任何问题。

问题是您必须使用“电子邮件”或“名称”列将设计用户与邮箱关联。显然，设计在用户表中没有名为“名称”的列。因此，如果您使用“电子邮件”，那么用户将看到他们想要隐藏的其他所有人的电子邮件地址。

我想要类似推特的注册。他们有永远不会改变的 unique_id(account name)。要实现这一点，我该怎么做？

I. 将名为“unique_id”的列添加到用户表？命令：rails g migration AddUniqueIdToUsers unique_id:string 创建迁移文件，并像这样打开和编辑

```
class AddUniqueIdToUsers < ActiveRecord::Migration  
   def change  
    add_column :users, :unique_id, :string  
    add_index :users, :unique_id,  :unique => true  
   end 
end 
```

二、如何使用“unique_id”列将设计与邮箱关联？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:21:30.537

> 显然，设计在用户表中没有名为“名称”的列

这完全取决于您，所有 Devise 所做的（或希望您做的）只是添加一些记录来告诉它如何运行。如果您查看[设计生成器](https://github.com/plataformatec/devise/blob/master/lib/generators/active_record/devise_generator.rb)，您会发现它所做的只是为您的迁移添加了几列。

> 我想要类似推特的注册。他们有永远不会改变的 unique_id(account name)。要实现这一点，我该怎么做？

首先，在 Rails 中总是免费为您提供一个唯一的 ID（事实上，在大多数使用数据库后端的典型 Web 应用程序中，每一行都有一个唯一的 ID）。

但是，如果您还希望用户选择一个用户名，并且该用户名也是唯一的，那么您可以按照[邮箱自述文件的说明](https://github.com/ging/mailboxer#user-identities)`name`进行操作，并简单地使用您自己的数据库列覆盖使用`username`，如下所示：

```
Mailboxer.setup do |config|
  # ...
  #Configures the methods needed by mailboxer
  config.email_method = :email
  config.name_method = :username
  # ...
end 
```

或者，如果您想远离邮箱配置文件，您可以简单地使用`alias_method`并执行此操作（假设您有一个用户名列）：

```
class User < ActiveRecord::Base
  alias_method :name, :username
  acts_as_messageable
end 
```

无论哪种方式，Devise 都不会限制您在 User 模型上使用哪些列，而且 Mailboxer 似乎也不会限制您使用哪些列将 gem 附加到 User 模型。因此，您可以拥有尽可能多的灵活性，而无需自己构建此功能。

# javascript - Javascript 节点点击顺序

> ID：11133110
> 
> 赞同：1
> 
> 时间：2012-06-21T07:02:10.757
> 
> 标签：javascript, html, dom, nodes

我对 Javascript 节点有一个问题。我想知道点击了哪个按钮以及点击了多少次..

所以......有一个例子。

```
 <body>
  <button></button>
  <button></button>
  <button></button>
  <button></button>
  <button></button>
  <button></button>
  <button></button>

  <p id="last-counted"></p>

</body>

<script>
   var body = document.body;
   var lastcounted = document.getElementById('last-counted');
   lastcounted.innerHTML = "test";
   // console.log(body.nodeName = 'button');
   console.log(body);
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:23:33.617

也许这是你想要的——

[http://jsfiddle.net/78GaP/](http://jsfiddle.net/78GaP/)

代码：

```
 <button data-index='1' onclick='javascript:log(this)'></button>
  <button data-index='2' onclick='javascript:log(this)'></button>
  <button data-index='3' onclick='javascript:log(this)'></button>
  <button data-index='4' onclick='javascript:log(this)'></button>
  <button data-index='5' onclick='javascript:log(this)'></button>
  <button data-index='6' onclick='javascript:log(this)'></button>
  <button data-index='7' onclick='javascript:log(this)'></button>

  <p id="last-counted"></p>

<script>
var body = document.body;
var lastcounted = document.getElementById('last-counted');

var stat = {};
function log(t){
    var index = t.getAttribute('data-index');
    if(!stat.hasOwnProperty(index)){
        stat[index] = 0;        
    }
    stat[index] ++;
    console.log(stat);
}    
</script>​ 
```

# algorithm - 如何在二维图中将相似的项目聚集在一起

> ID：11133111
> 
> 赞同：0
> 
> 时间：2012-06-21T07:02:22.417
> 
> 标签：algorithm

好吧，我不是在寻找如何在 2d 图形上绘制项目，它只是预期输出需要的图形表示

我有一个类似的清单

```
a=[]
b=['c','d','e']
c=['a','b','d']
d=['a']
e=['b','a']
l=['g','r','p']
g=['r']
r=['g']
p=['l'] 
```

现在从上面很明显 b 指向 c , d ,e
a,b,c,d 是紧密相连的，而 l,g,r,p 是相连的，
谁能告诉我一个算法（保留 2d 图片注意）如何将这些相似的项目一起表示。

以上只是一个例子。该列表将被动态创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:40:44.000

你遇到过[Graphviz](http://www.graphviz.org/)吗？它具有用于各种不同形式的图形布局的算法，我想这些算法可以很好地布置上面的小示例。它还包括一些简单的 GUI，让您可以试验它支持的不同布局。

**编辑：回应一些澄清：**

如果你需要在你的图中找到密集的子图，即使它是完全连接的，那么你正在寻找在网络中找到*社区的算法。*[在本文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CF8QFjAC&url=http%3A%2F%2Fantipaedo.lip6.fr%2FT12%2Fcommunities.pdf&ei=Nd_iT4nFNuSa0QW1trCODQ&usg=AFQjCNEOH2XnD0ybsBQsxwY-96bJNvYynw&sig2=8opDu41Af5hFVXcPMp2-5Q)中可以找到一个最近开发的算法在大图（200 万多个节点，代表一个社交网络）上有效执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:59:56.063

只是为了扩展亚历克斯的答案，这里是 graphviz 用于您的图表的示例：

图.点：

```
digraph G
{
  b -> c;
  b -> d;
  b -> e;
  c -> a;
  c -> b;
  c -> d;
  d -> a;
  e -> b;
  e -> a;
  l -> g;
  l -> r;
  l -> p;
  g -> r;
  r -> g;
  p -> l;
} 
```

Graphviz 的输出：

![示例图](../Images/c3ee000537c4c563f587346dd4aa5a5e.png)

如果您只想知道图中的集群是什么而不绘制它，只需使用[此算法](http://en.wikipedia.org/wiki/Connectivity_%28graph_theory%29#Computational_aspects)即可。

# javascript - 动态给出类和 id 时，单击事件不会触发 ans css

> ID：11133118
> 
> 赞同：0
> 
> 时间：2012-06-21T07:02:59.063
> 
> 标签：javascript, jquery, css, dynamic, click

大家好，我在动态创建表时声明了 id 和 class，如下所示我有 bing 使用许多函数来使我的点击事件运行，但一切正常，如果有人可以请帮助我？

这是我的带有 id 和类的动态表，我必须在“td”点击时调用 css，并且点击事件也应该被触发

```
 var tableid=0;               
    // display table.......
        $('#page').append("<center> <table id='tables'  cellspacing='50px' style='margin-top:70px' >");
        for(var j=0;j<row;j++){          
                $('#tables').append("<tr class='row' id='row"+j+"' style='margin-bottom:50px'>");
                        for(var k=0;k<5;k++){
                                if(tableid<tablecount-1){
                                        $("#row"+j).append("<td id='"+tableid+"' class='button' width='150' height='150' background='images/green.png' align='center'>"+
                                                            "</td>");   
                                        tableid++;
                                    }
                        }//for ends.                    
                        $('#tables').append("</tr'>");
        }//for ends
        $('#page').append("</center> </table>"); 
```

我想为所有 td 单独触发事件，单击时我想调用将我的 id 作为参数传递的函数；我为每个“td”使用唯一的 id，下面注释的代码是我试图实现/触发我的点击事件并调用我的 css 运行的方法，但一切都在脉络中，

```
/*Event.observe(window, 'load', function(){
            $('#TBL00001').observe('click', test());
            });             
            function test(){
                alert("click :)))");
            }
            $("'#"+tableCode[tableid]+"'").live(function() {
                    alert("Table"+tableCode[tableid]);
            });
            $("'#"+tableCode[tableid]+"'").click(function() {
                        alert("Table"+tableCode[tableid]);
            });

            $('#TBL00001').on( 'click', 'td', function() {
                        alert("Table"+tableCode[tableid]);});
            */ 
```

现在我也尝试了 .delegate() ，但我无法为每个 td 传递 id （唯一） all

```
 $('.button').each(function(){
                $(this).click(function{
                    alert("hi");
                });
           });

              $("tr .row > td .button").each(function() { 
            var $this = $(this);
            alert("hi"+$this);
        }

         /*$("table").delegate($(this),"click",function(){
            alert($(this));
            printBill(tabid);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:09:45.030

```
$('table').delegate('tr.row > td', 'click', function() {
    id = $(this).attr('id');
} 
```

我不确定我是否理解你的问题。

此代码将在每次 td 点击时执行，变量 id 将包含 td 的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:11:17.320

您应该使用 on 事件委托

```
$("table").on("click",function(e){
alert(jquery(e.target).attr('id');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:17:13.667

你在萤火虫中看过 tr 的 ID 吗？

像这样分配，可能是错误的。

```
 id='"+tableid+"' 
```

尝试这个。

```
id="+tableid+" 
```

祝你好运..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:17:36.427

在你的代码中有一个条件`if(tableid<tablecount-1){`很好，我认为你没有在`tablecount`任何地方拒绝，因此条件不起作用。

其次，如上所述，如果 td 可以通过以下方式获取每个**ID ：-**

```
$('td').click(function(){
   var tdId = $(this).attr('id');
   console.log(tdId); // You would get the Id of clicked td in teh consloe and now you can  use the variable **tdId** for your function.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T08:56:40.313

它在您创建表格的方法中。您应该以这样的方式创建表。

```
 $(function(){
var tableid=0;
var row = 5;

// display table.......
var theTable = $('<table />').attr('id', tableid);

for(var j = 0; j < row; j++){
    var theRow = $('<tr />').attr('id', 'row'+j).addClass('row');
    for(var k=0;k<5;k++){
        var theTd = $('<td />').addClass('button').html('test').click(function(){ alert('test') });
        theRow.append(theTd);
    }
    theTable.append(theRow);
}

$('#page').append(theTable);
    }); 
```

# windows-phone-7 - 应用通过认证后，进入应用认证的第一步？

> ID：11133122
> 
> 赞同：0
> 
> 时间：2012-06-21T07:03:18.050
> 
> 标签：windows-phone-7, windows-phone-7.1, marketplace, app-hub

最近我提交了一个到应用程序中心，应用程序获得了认证，并收到了一封来自微软的邮件，说祝贺应用程序获得了认证，在应用程序中心一个红色的小对话框要求更新其他详细信息/更新最新包 - 点击它重定向到所有我们在应用提交过程中提交的详细信息 - 按下下一个 - 下一个 - 表示应用已成功提交，现在应用生命周期状态已再次进入第 1 步。

1）在我看来，所有提交的应用程序部分，相同的应用程序显示在提交的部分和已发布的部分中。

2）我的应用程序获得认证后已经 24 小时，但我的应用程序不在市场上。

3) 应用程序生命周期现在显示提交开始 - 检查和提交完成 - 检查和第 2 和第 3 步（认证和发布）未选中。

4）我做错了什么还是在跟踪我们必须在将其发布到 Windows 市场之前提交其他详细信息/更新包。

请帮帮我，我要求你们所有人为我提供所需的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:12:02.667

没什么好担心的。我之前也遇到过类似的情况。成功认证后，您的应用需要几天时间才能出现在 Marketplace 中。这是 Microsoft Marketplace 的问题。但是，对于您的第四点，这不是更新详细信息的过程。它实际上是让我们提交应用程序的更新（如果有的话）。

您唯一需要确定的是，您是否提供了有效的关键字来帮助用户在市场上找到您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:16:23.817

如果您要发布到多个市场，则它需要一段时间才能出现在所有市场中，并且可能需要超过 24 小时。似乎是微软的问题。

# c# - Switch-case 语句未按预期工作

> ID：11133123
> 
> 赞同：-3
> 
> 时间：2012-06-21T07:03:19.800
> 
> 标签：c#, .net

我写了一个小程序，它基本上适用于 SWITCH 语句。它读取 switch 语句中的每个 case 并调用和执行适当的函数。但是，我面临一个问题，当调用 switch 语句的第一个 case 时，所有函数都被执行。不应该是这样，因为只有特定 switch-case 语句调用的函数应该被执行。有人可以建议我的代码有什么问题吗？发布我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data;
using System.Drawing;
using System.ComponentModel;
using System.ServiceModel.Security;
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.Office.Interop.Excel;
using Excel1.MWMClient.MWMServiceProxy;
namespace Excel1
{
    class WebServiceFunctions
    {
        private string siteID = "INDIA";
        static TemplateClient templateClient;
        static TaskClient taskClient;
        public WebServiceFunctions()
        {
            templateClient = new Excel1.MWMClient.MWMServiceProxy.TemplateClient();
            templateClient.ClientCredentials.UserName.UserName = "admin";
            templateClient.ClientCredentials.UserName.Password = "admin";
            templateClient.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;

            taskClient = new Excel1.MWMClient.MWMServiceProxy.TaskClient();
            taskClient.ClientCredentials.UserName.UserName = "admin";
            taskClient.ClientCredentials.UserName.Password = "admin";
            taskClient.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
        }
        public void GetAllTemplateNames(String strSite, String strRetVal)
        {
            //GetAllTemplateNames
            Console.WriteLine("Invoking GetAllTemplate method");
            Console.WriteLine("List of all templates with details");
            Console.WriteLine("-----------------------------------");
            List<Excel1.MWMClient.MWMServiceProxy.TemplateData> tData = templateClient.GetAllTemplate(strSite).ToList();
            foreach (Excel1.MWMClient.MWMServiceProxy.TemplateData data in tData)
            {
                Console.WriteLine("TemplateName:" + data.name);
                Console.WriteLine("TemplateDescription:" + data.description);
                Console.WriteLine("SiteName:" + data.site_name);
                Console.WriteLine("-----------------------------------");
            }
            Console.WriteLine("-----------------------------------");
        }
        public List<TemplateData> ReturnAllTemplateNames()
        {
            // Console.WriteLine("Invoking GetAllTemplate method");
            // Console.WriteLine("List of all templates with details");
            // Console.WriteLine("-----------------------------------");
            List<Excel1.MWMClient.MWMServiceProxy.TemplateData> tData = templateClient.GetAllTemplate(siteID).ToList();
            foreach (Excel1.MWMClient.MWMServiceProxy.TemplateData data in tData)
            {
                Console.WriteLine("TemplateName:" + data.name);
                Console.WriteLine("TemplateDescription:" + data.description);
                Console.WriteLine("SiteName:" + data.site_name);
                Console.WriteLine("-----------------------------------");
            }
            Console.WriteLine("-----------------------------------");
            return tData;
        }
        public void GetTaskInstanceFromTemplate(Excel1.MWMClient.MWMServiceProxy.TemplateData data)
        {
            Console.WriteLine("Invoking GetTaskInstanceFromTemplate method");
            Console.WriteLine("-----------------------------------");
            Excel1.MWMClient.MWMServiceProxy.TaskInstance tInstance = taskClient.GetTaskInstanceFromTemplate(siteID, data);
            if (tInstance != null)
            {
                Console.WriteLine("TaskName: " + tInstance.name);
                Console.WriteLine("TaskDescription :" + tInstance.description);
            }
            Console.WriteLine("-----------------------------------");
        }
        public TaskInstance ReturnTaskInstanceFromTemplate(Excel1.MWMClient.MWMServiceProxy.TemplateData data)
        {
            Console.WriteLine("Invoking GetTaskInstanceFromTemplate method");
            Console.WriteLine("-----------------------------------");
            Excel1.MWMClient.MWMServiceProxy.TaskInstance tInstance = taskClient.GetTaskInstanceFromTemplate(siteID, data);
            if (tInstance != null)
            {
                Console.WriteLine("TaskName: " + tInstance.name);
                Console.WriteLine("TaskDescription :" + tInstance.description);
            }
            Console.WriteLine("----------------------" + tInstance.name + "-------------");
            return tInstance;
        }
        public int CreateTask(Excel1.MWMClient.MWMServiceProxy.TaskInstance instance)
        {
            Console.WriteLine("Invoking CreateTask method");
            Console.WriteLine("-----------------------------------");
            int retVal = taskClient.CreateTask(instance);
            Console.WriteLine("Task create successfully:ID=" + retVal.ToString());
            Console.WriteLine("-----------------------------------");
            return retVal;
        }
        public void GetTaskStatus(int taskId)
        {
            Console.WriteLine("Invoking GetTaskStatus method");
            Console.WriteLine("------------------****-----------------");
            Excel1.MWMClient.MWMServiceProxy.TaskStatus taskStatus = new Excel1.MWMClient.MWMServiceProxy.TaskStatus();
            taskStatus = taskClient.GetTaskStatus(taskId);
            Console.WriteLine("Task status : " + taskStatus.taskStatus.ToString());
            Console.WriteLine("-----------------------------------");
        }
        public void PerformTaskOperation(int taskId, string operation, String reason)
        {
            Console.WriteLine("PerformTaskOperation method");
            Console.WriteLine("-----------------------------------");
            int operationStatusCode = 0;
            operationStatusCode = taskClient.PerformTaskOperation(taskId, operation, reason);
            String updateSuccess = operationStatusCode == 1 ? "update success" : "update failed";
            Console.WriteLine("Returned Operation Status Code = " + operationStatusCode + "|| Updation status message:" + updateSuccess);
        }
        //public void GetTaskHistory(int taskId, int detailLevel)
        //{
        //    Console.WriteLine("Invoking GetTaskHistory method");
        //    Console.WriteLine("------------------*****-----------------");
        //    Excel1.MWMClient.MWMServiceProxy.TaskHistory taskHistory = new Excel1.MWMClient.MWMServiceProxy.TaskHistory();
        //    taskHistory = taskClient.GetTaskHistory(taskId, detailLevel);
        //    if (taskHistory.listOfAllowedActions != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskAllowedAction allowedAction in taskHistory.listOfAllowedActions)
        //        {
        //            Console.WriteLine("Task History - allowedAction : " + allowedAction.actionName);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.listOfCustomAttributes != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskCustomAttributes customAttribute in taskHistory.listOfCustomAttributes)
        //        {
        //            Console.WriteLine("Custom Attribute : " + customAttribute.key + " | Value:" + customAttribute.value);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.taskinstanceEscalations != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskEscaltion taskEscaltion in taskHistory.taskinstanceEscalations)
        //        {
        //            Console.WriteLine("Task Escaltion : " + taskEscaltion.escalationLevel + " | escalationType : " + taskEscaltion.escalationType);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.taskInstanceUsers != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskUser taskUser in taskHistory.taskInstanceUsers)
        //        {
        //            Console.WriteLine("Task User : " + taskUser.firstName + " ,  " + taskUser.lastName);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.taskInstanceGroups != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskGroup group in taskHistory.taskInstanceGroups)
        //        {
        //            Console.WriteLine("Group : " + group.groupName + "| escalationLevel : " + group.escalationLevel);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.taskInstanceSkills != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskSkill skill in taskHistory.taskInstanceSkills)
        //        {
        //            Console.WriteLine("Skill : " + skill.skillName + "| description : " + skill.description);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.taskStatusList != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.TaskStatus taskStatus in taskHistory.taskStatusList)
        //        {
        //            Console.WriteLine("TaskStatus : " + taskStatus.taskStatus);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    if (taskHistory.userTaskInstanceList != null)
        //        foreach (Excel1.MWMClient.MWMServiceProxy.UserTaskInstance userTaskInstance in taskHistory.userTaskInstanceList)
        //        {
        //            Console.WriteLine("UserTaskInstance status: " + userTaskInstance.status);
        //            Console.WriteLine("-----------------------------------");
        //        }
        //    //taskHistory.listOfAllowedActions
        //}
        public void CreateTaskFromTemplate(Excel1.MWMClient.MWMServiceProxy.TemplateData data)
        {
            //taskClient.ClientCredentials.UserName.UserName = "USR";
            //taskClient.ClientCredentials.UserName.Password = "PWD";
            //taskClient.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;

            Console.WriteLine("Invoking CreateTaskFromTemplate method");
            Console.WriteLine("------------------***-----------------");
            int taskId = taskClient.CreateTaskFromTemplate(siteID, data);
            Console.WriteLine("Created task from template with TaskId: " + taskId);
            Console.WriteLine("-----------------------------------");

        }
    };
    class Program
    {
        static WebServiceFunctions wsf = new WebServiceFunctions();
        public static void Main(string[] args)
        {
            //
            //Initializing the excel sheet
            //
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/WebServiceTemplate.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;
            //
            //Getting row count, column count and the number of sheets 
            //
            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;
            int numSheets = xlWorkbook.Sheets.Count;
            //
            // Iterate through the sheets. They are indexed starting at 1.
            //            
            for (int row = 2; row <= rowCount; row++)
            {
                //
                // Do something with the data in the array with a custom method.
                //
                String strRetVal = xlRange.Cells[row, 3].Value;
                String strFunctionName = xlRange.Cells[row, 4].Value;
                String strParam1 = xlRange.Cells[row, 6].Value;
                String strParam2 = xlRange.Cells[row, 7].Value;
                String strParam3 = xlRange.Cells[row, 8].Value;
                String strParam4 = xlRange.Cells[row, 9].Value;
                TemplateData tData = new TemplateData();
                TaskInstance tInstance = new TaskInstance();
                int tID = 0;
                ProcessInput(strRetVal, strFunctionName, strParam1, strParam2, strParam3, strParam4, tData, tInstance, tID);
                //creating a task from templates in one flow
                //1)Get all templates.
                List<Excel1.MWMClient.MWMServiceProxy.TemplateData> templateDataList = new List<TemplateData>();
                //bool createTaskFromTemplate_Flag = false;
                templateDataList = wsf.ReturnAllTemplateNames();
                //if (createTaskFromTemplate_Flag)
                //{
                //    foreach (TemplateData templateDataInst in templateDataList)
                //    {
                //        //We are not using the method CreateTaskFromTemplate for this application
                //        //WebServiceFunctions.CreateTaskFromTemplate(templateDataInst);
                //    }
                //}
                bool createTaskForAll = false;
                if (createTaskForAll)
                {
                    foreach (TemplateData templateDataInst in templateDataList)
                    {
                        //2)Get task instance
                        TaskInstance taskInstance = new TaskInstance();
                        taskInstance = wsf.ReturnTaskInstanceFromTemplate(templateDataInst);
                        taskInstance.scheduleActivity = new ScheduleActivity();
                        taskInstance.scheduleActivity.nextRun = new DateTime();
                        taskInstance.scheduleActivity.isRecurring = 0;
                        //over riding taskType in task
                        taskInstance.taskType = "pull";

                        //3)Create task.
                        wsf.CreateTask(taskInstance);
                    }
                }
                else 
                {
                    int numberOfTemplatesReturned = templateDataList.Count();
                    Random random = new Random();
                    int randomTemplateInList = random.Next(0, numberOfTemplatesReturned);
                    Console.WriteLine("Random number from template list:" + randomTemplateInList);
                    TemplateData templateDataInstance = new TemplateData();
                    templateDataInstance = templateDataList.ElementAt(randomTemplateInList);

                    //2)Get task instance
                    TaskInstance taskInstance = new TaskInstance();
                    taskInstance = wsf.ReturnTaskInstanceFromTemplate(templateDataInstance);

                   // 3)Create task.
                    tID = wsf.CreateTask(taskInstance);
                    wsf.GetTaskStatus(tID);
                    //int detailLevel = 2;
                   // Console.WriteLine("Task History for a newly created task would contain minimal details.");
                   // Console.WriteLine("Run method with taskId of a task which has gone through various phases to see detailed history.");
                   // wsf.GetTaskHistory(tID, detailLevel);
                }
               // Console.WriteLine("Updating status via update task status");
               //wsf.PerformTaskOperation(tID, "DELETE", "trying pauseeee");

               // Console.WriteLine("Press Enter To Exit Client Application.");
                Console.ReadLine();
            }
        }
        public static void ProcessInput(String strRetVal, String strFunctionName, /*String strParamCount,*/ String strParam1, String strParam2, String strParam3, String strParam4, TemplateData tData, TaskInstance tInstance, int tID)
        {
            switch (strFunctionName)
            {
                case "ITemplate.GetAllTemplate":
                    {
                        //ITemplate.GetAllTemplate code
                        MessageBox.Show("ITemplate.GetAllTemplate");
                        wsf.GetAllTemplateNames(strParam1, strRetVal);
                        break;
                    }
                case "ITask.GetTaskInstanceFromTemplate":
                    {
                        //ITask.GetTaskInstanceFromTemplate code
                        MessageBox.Show("ITask.GetTaskInstanceFromTemplate");
                        wsf.GetTaskInstanceFromTemplate(tData);
                        break;
                    }
                case "CreateTask":
                    {
                        //CreateTask code
                        MessageBox.Show("CreateTask");
                       wsf.CreateTask(tInstance);
                        break;
                    }
                case "UpdateDatabase":
                    {
                        //UpdateDatabase code
                        MessageBox.Show("UpdateDatabase");
                        break;
                    }
                case "GetTaskStatus":
                    {
                        //GetTaskStatus code
                        MessageBox.Show("GetTaskStatus");
                        wsf.GetTaskStatus(tID);
                        break;
                    }
                case "VerifyValue":
                    {
                        //VerifyValue code
                        MessageBox.Show("VerifyValue");
                    }
                    break;
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:25:33.520

对 ProcessInput() 的调用处于循环中。你在调试中运行过这个吗？该开关应该可以工作。您确定对 ProcessInput 的 SINGLE 调用会运行所有案例条件吗？

# c# - 为什么在 OOP（例如 Java、C#）中使用中断/继续标签是一种不好的做法？

> ID：11133127
> 
> 赞同：9
> 
> 时间：2012-06-21T07:03:36.047
> 
> 标签：c#, java, oop, break, continue

有人告诉我，在 OOP 语言中使用 break 和 continue 标签不是 OOP 编程风格。你能详细解释一下为什么以及是什么问题吗？

诀窍在于这个标签词。我的意思是标记中断/继续。

```
class BreakWithLabelDemo {
    public static void main(String[] args) {

        int[][] arrayOfInts = {
            { 32, 87, 3, 589 },
            { 12, 1076, 2000, 8 },
            { 622, 127, 77, 955 }
        };
        int searchfor = 12;

        int i;
        int j = 0;
        boolean foundIt = false;

    search:
        for (i = 0; i < arrayOfInts.length; i++) {
            for (j = 0; j < arrayOfInts[i].length;
                 j++) {
                if (arrayOfInts[i][j] == searchfor) {
                    foundIt = true;
                    break search;
                }
            }
        }

        if (foundIt) {
            System.out.println("Found " + searchfor +
                               " at " + i + ", " + j);
        } else {
            System.out.println(searchfor +
                               " not in the array");
        }
    }
} 
```

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T07:22:42.767

告诉你的人可能意味着 break 和 continue 是分支语句，例如 goto ，这是命令式编程的一种机制。

中断/继续只允许您跳转到外部语句，这意味着您不能在代码中到处走。所以你留在同一个方法对象中，所以它与 OOP 不兼容。

无论如何，说break和continue不是OOP是无稽之谈。我们可以讨论它们对可读性的影响，但仅此而已。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-21T07:14:26.380

break 和 continue 不是*函数*式编程。没有任何关于 OOP 的建议`break`，`continue`甚至`goto`在方法中也是一个坏主意。

恕我直言，在 OOP 语言中不鼓励使用 break 和 continue，因为它们会导致复杂性和混乱。由于标签很少使用，它们可能会进一步混淆。我会说，当您觉得它是解决问题的最简单方法时，您仍然应该使用它们。

```
// confusing use of LABEL
http://www.google.com/
do {
    if (condition) continue http;
} while(condition2) 
```

另一个令人困惑的用途

```
GOTO: {
    // code
    if (condition)
         break GOTO; // without a loop
    // code
} 
```

善用标签

```
OUTER: 
for(outer loop) {
   for(inner loop)
      if (condition)
         continue or break OUTER;
} 
```

标签的奇怪使用

```
FOUND: {
   for(loop)
      if(found)
          break FOUND;

   // not found
   handle not found
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T08:35:14.670

不使用中断/继续的建议可能与 OOP 无关。这是基于这些语句类似于臭名昭著的 GOTO 的事实，它可以使代码完全不可读。然而，教条是不好的忠告。主要范式应该是代码的可读性。使用 break 或 continue 在第一行跳出循环比将整个其余部分放入 if 条件要清楚得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T07:15:16.900

Bruce Eckel 在“Thinking in Java”中写道：“重要的是要记住，在 Java 中使用标签的唯一原因是当您有嵌套循环并且想要中断或继续通过多个嵌套级别时。”

实际上，当您不使用标签时，代码的工作流程在许多情况下会更加清晰。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-21T07:14:11.110

我认为主要原因是代码在中断和继续时不太清楚。

但也可能是一些性能问题（与 OOP 无关）：CPU 在处理该指令之前使用预测器将指令加载到队列中。预测器很容易检测到接下来要为条件跳转加载哪些指令，而对于无条件跳转则更难。

# java - java：将动画向上转换为 CustomAnimation 时出现 ClassCastException

> ID：11133136
> 
> 赞同：0
> 
> 时间：2012-06-21T07:03:53.983
> 
> 标签：java, android, android-animation, classcastexception

我有一个扩展 android.view.Animation 的类：

```
package diffusi.on.com.fifteen_puzzle;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;

public class CustomAnimation extends Animation {

    private boolean _isLast = false;

    private View _currentTarget = null;

    public interface AnimationListener {
        void onAnimationEnd(CustomAnimation animation);
        void onAnimationRepeat(CustomAnimation animation);
        void onAnimationStart(CustomAnimation animation);
    }

    public static void animateSetOfViews(
            View[] viewsSet, 
            int animResId, 
            int[] startTimeOffsets,
            Context context,
            AnimationListener animationListener
        ) {
        CustomAnimation animation;
        int startTimeOffset; 
        boolean isLastAnim;

        for (int intA = 0; intA < viewsSet.length; intA++) {
            isLastAnim = intA == viewsSet.length - 1;
            animation = (CustomAnimation) AnimationUtils.loadAnimation(context, animResId);
            if (intA <= startTimeOffsets.length - 1) {
                startTimeOffset = startTimeOffsets[intA];
            } else startTimeOffset = 0;
            animation.applyToView(viewsSet[intA], startTimeOffset, isLastAnim, animationListener);
        }
    }

    public CustomAnimation() {

    }

    public CustomAnimation(Context context, AttributeSet attrs) {
        super(context, attrs);

    }

    public boolean isLast() {
        return this._isLast;
    }

    public View getCurrentTarget() {
        return this._currentTarget;
    }

    private void applyToView(View view, int startTimeOffset, boolean isLast, AnimationListener listener) {
        this._isLast = isLast;
        this._currentTarget = view;
        this.setStartOffset(startTimeOffset);
        this.setAnimationListener((Animation.AnimationListener) listener);
        this._currentTarget.startAnimation(this);
    }

} 
```

它在IDE中编译没有错误。但是在runtame中，它会在线抛出异常（ClassCastEcxeption）：animation = (CustomAnimation) AnimationUtils.loadAnimation(context, animResId)

为什么我不能将 Animation 实例上载到我的 CustomAnimation，它扩展了 Animation ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:09:11.253

这不是*向上倾倒*，这是*向下*倾倒。向上转换的形式`CustomAnimation`为 to `Animation`。

大概`AnimationUtils.loadAnimation`会返回对实际上*不是*`CustomAnimation`a 的对象的引用，因此您不能对其进行强制转换。只有在执行时对象的实际类型与您要转换的类型兼容时，您才能转换为一个类型。例如：

```
Object x = new Integer(10);
String y = (String) x; // Bang - invalid cast

Object a = "Foo";
String b = (String) a; // This is fine 
```

# hibernate - 引起：org.hibernate.MappingException：只有一个实体可以用@RevisionEntity注释

> ID：11133139
> 
> 赞同：0
> 
> 时间：2012-06-21T07:04:08.620
> 
> 标签：hibernate

我尝试使用 Hibernate Envers 来记录实体历史。但失败了。

我的项目使用了 Spring 3.1、JPA 和 Spring Data JPA(Hibenrate 4.1)。

有一个基础类。

代码：

> ```
> @javax.persistence.MappedSuperclass
> public abstract class BaseEntity implements Serializable {
> 
>     @Id
>     @GeneratedValue(strategy = GenerationType.IDENTITY)
>     @Column(name = "id", columnDefinition = "INT unsigned", nullable = false)
>     @RevisionNumber
>     public Long id;
> 
>     @Version
>     @Column(name = "jpaversion", nullable = false, columnDefinition = "INT unsigned")
>    @RevisionTimestamp
>     public Long version;
> 
>     public Long getId() {
>    return id;
>     }
> 
>     public void setId(Long id) {
>    this.id = id;
>     }
> 
>     public Long getVersion() {
>    return version;
>     }
> 
>     public void setVersion(Long version) {
>    this.version = version;
>     }
> 
>     @Override
>     public int hashCode() {
>    final int prime = 31;
>    int result = 1;
>    result = prime * result + ((id == null) ? 0 : id.hashCode());
>    return result;
>     }
> 
>     @Override
>     public boolean equals(Object obj) {
>    if (this == obj)
>        return true;
>    if (obj == null)
>        return false;
>    if (getClass() != obj.getClass())
>        return false;
>    BaseEntity other = (BaseEntity) obj;
>    if (id == null) {
>        if (other.id != null)
>       return false;
>    } else if (!id.equals(other.id))
>        return false;
>    return true;
>     }
> 
> } 
> ```

当我将 @RevisionEntity 添加到我的实体时。

代码：

> ```
> @Entity
> @RevisionEntity
> @Table(name = "user", uniqueConstraints = {
>     @UniqueConstraint(name = "UQ_gsmPrefix_gsmNumber", columnNames = {"gsm_prefix", "gsm_number"}),
>     @UniqueConstraint(name = "UQ_email", columnNames = "email"),
>     @UniqueConstraint(name = "UQ_username", columnNames = "username")})
> @NamedQueries({
>     @NamedQuery(name = "User.findByUsername", query = "select u from User u where u.username=:username"),
>     @NamedQuery(name = "User.findByEmail", query = "select u from User u where u.email=:email")})
> @Access(AccessType.FIELD)
> public class User extends BaseEntity implements UserDetails, Serializable { 
> ```

代码：

> @Entity @Table(name = "address") @RevisionEntity 公共类地址扩展 com.dna.bifincan.model.BaseEntity

当我将项目部署到tomcat中时，我得到了这样的异常。

引用：

> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0”的bean时出错：bean初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 URL [jar:file:/E:/MyWorks/bifincan/project/bifincan-website/target/fi/WEB-INF 中定义名称为“entityManagerFactory”的 bean 创建错误/lib/bifincan-library-1.0-SNAPSHOT.jar!/common/data-access.xml]：调用 init 方法失败；嵌套异常是 javax.persistence.PersistenceException: [PersistenceUnit: bifincan] Unable to build EntityManagerFactory at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) at org.springframework.beans。AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722) 引起：org.springframework.beans.factory.BeanCreationException：错误在 URL [jar:file:/E:/MyWorks/bifincan/project/bifincan-website/target/fi/WEB-INF/lib/bifincan-library-1.0-SNAPSHOT.jar!/ common/data-access.xml]: init 方法调用失败；嵌套异常是 javax.persistence.PersistenceException: [PersistenceUnit: @RevisionEntity 只能注释一个实体！在 org.hibernate.envers.configuration.RevisionInfoConfiguration.configure(RevisionInfoConfiguration.java:264) 在 org.hibernate.envers.configuration.AuditConfiguration.(AuditConfiguration.java:102) 在 org.hibernate.envers.configuration.AuditConfiguration.getFor( AuditConfiguration.java:165) 在 org.hibernate.cfg.Configuration 的 org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:302) 的 org.hibernate.envers.event.EnversIntegrator.integrate(EnversIntegrator.java:64)。 buildSessionFactory(Configuration.java:1740) at org.hibernate.ejb.EntityManagerFactoryImpl.(EntityManagerFactoryImpl.java:88) at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) ... 还有 71 个

显然，我同时使用了@Entity 和@RevisitonEntity，但它仍然会报告此信息。

我阅读了Hibernate Dev Guide中相关部分的文档，似乎persistence.xml或hibernate配置中不需要额外的配置。我在 Spring 项目中遗漏了什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:38:40.397

为什么你需要用 注释你的实体`@RevisionEntity`？

`@RevisionEntity`是代表修订本身的特殊目的实体。如果您想让 Envers 审核您的实体，请使用`@Audited`.

# android - Android Dialog的布局xml和png在哪里？

> ID：11133146
> 
> 赞同：0
> 
> 时间：2012-06-21T07:04:38.853
> 
> 标签：android, dialog

我需要将某些对话框编码为看起来像对话框的活动。为此，我想让它们看起来像标准的 Android 对话框，尤其是带有圆形边缘的白色自适应框架。

我在哪里/如何在 Android 库中找到这个 xml 和 png？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:08:49.307

在清单文件中写入：

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

这会将活动作为对话框打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:08:54.623

如果你想显示一个`Activity`具有 a 的外观和感觉，`Dialog`那么你可以在 AndroidManifest.xml 中的相关活动声明中添加以下属性：

```
 <activity
        android:name=".YOURACTIVITY"
        android:theme="@android:style/Theme.Dialog" /> 
```

# java - 用于访问 Java Web 服务的 gSOAP C 客户端

> ID：11133151
> 
> 赞同：1
> 
> 时间：2012-06-21T07:05:12.630
> 
> 标签：java, c, web-services, client, gsoap

我创建了一个 Java Web 服务，并尝试从 gSOAP C 客户端访问此 Web 服务：

```
wsdl2h -c CalculatorService.wsdl
soapcpp2 -c -C CalculatorService.h 
```

当我尝试用这个编译文件时：

```
g++ -o ClientWS.exe ClientWS.c soapC.c soapClient.c C:\gsoap-2.8.9\gsoap\stdsoap2.c -IC:\gsoap-2.8.9\gsoap -IC:\gsoap-2.8.9\gsoap\import -LC:\GNUstep\lib\libws2_32.a 
```

我收到很多`undefined reference`错误，如下所示：

> `C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x188): undefined reference to `sendto@24' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x1b2): undefined reference to`send@16' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x280): undefined reference to `sendto@24' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x2aa): undefined reference to`send@16' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x302): undefined reference to `send@16' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0x319): undefined reference to`WSAGetLastError@0' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0xad2): undefined reference to `recvfrom@24' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0xaf6): undefined reference to`ntohl@4' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0xb29): undefined reference to `recv@16' C:\DOCUME~1\MPERIY~1\LOCALS~1\Temp\ccvFm9ql.o:stdsoap2.c:(.text+0xb3e): undefined reference to`WSAGetLastError@0'
> *more errors like this...*
> collect2: ld returned 1 exit status`

您能否提供有关如何链接丢失文件的解决方案？我不知道链接和包含路径是如何工作的，也不知道在哪里搜索 C 中的库。

我在 Windows 中有 GNUstep 和 gSOAP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:59:49.157

试试 -LC:\GNUstep\lib\ -lws2_32

```
g++ -o ClientWS.exe ClientWS.c soapC.c soapClient.c C:\gsoap-2.8.9\gsoap\stdsoap2.c -IC:\gsoap-2.8.9\gsoap -IC:\gsoap-2.8.9\gsoap\import -LC:\GNUstep\lib\ -lws2_32 
```

**-L**给出你的库所在的*目录*

**-l**请求链接编辑器将命名库添加到搜索引用的库中。

使用 -l 指定库时，删除库和后缀。

# jquery-mobile - 本地主机网页无法在 Opera mini 中打开

> ID：11133152
> 
> 赞同：0
> 
> 时间：2012-06-21T07:05:15.153
> 
> 标签：jquery-mobile, opera, opera-mini

我已经使用 jquery mobile 创建了网站。我已经在移动默认浏览器和互联网浏览器中进行了测试，并且工作正常。但是每当我尝试在opera mini中打开它时都会出现连接错误。Opera mini 无法打开我的本地主机站点。

知道如何在 Opera mini 中打开 localhost 站点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:48:10.350

Opera Mini 是一个瘦客户端，它与在线代理服务器一起工作。因此，当您在 Opera Mini 瘦客户端中创建请求时，它会将其发送到远处的 Opera 服务器。`localhost`对 Opera 服务器没有意义，或者更确切地说，与本地计算机的意义不同。要在 Opera Mini 中测试您的页面，您必须将其托管在可通过 Web 访问的地方。

# c# - 使用 API 连接到远程 mysql 数据库

> ID：11133156
> 
> 赞同：3
> 
> 时间：2012-06-21T07:05:21.850
> 
> 标签：c#, php, mysql

我正在用 C# 设计一个桌面应用程序，它需要连接到我的在线 mysql 数据库。我试图在控制面板中提供一个“%”，这意味着来自任何 IP，但它不起作用。可能是托管服务提供商（bigrock）不允许这样做。

或者，我正在尝试在 PHP 上在线编写一些代码，它将获取“sql”作为参数，并使用 json_encode 以 JSON 格式返回输出。

有没有更好的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:13:36.103

尝试连接时遇到什么错误？超时=防火墙；权限被拒绝 = 权限不正确等。

一种解决方案是创建一个带有预编码查询的代理（我们称之为“存储过程”）——然后您可以说“运行查询 5，参数 A、B 和 C”。由于这将是服务器-服务器（非公共），因此您只需要添加一些基本的身份验证系统（例如共享轮换密钥、使用参数的校验和等），但还要确保在向其抛出任何参数时查询不危险。

免责声明：这是一个解决方案，但我实际上并不建议我这样做，除非您非常确定它是安全的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:04:45.350

我建议您不要创建可以使用应用程序中的嵌入式 MySQL 凭据从任何地方连接到数据库的通配符用户。 *这是个坏主意*。

确定您的应用程序使用的凭据将非常容易，然后恶意用户可以直接连接到您的数据库服务器并开始向您的数据库发出查询。

他们将能够`SELECT`针对您的表格中的任何信息发布语句，甚至是他们不应该看到的信息。然后，利用 MySQL 中任何已知或未知的漏洞变得更加容易，因为现在它们具有控制台访问权限并且可以直接将数据发送到服务器。如果该帐户具有`DELETE`权限，他们可以删除您表中的所有数据。

此外，拥有一个发出由应用程序/最终用户提供的查询的 PHP 脚本并不理想，因为仍然可以自由地发出查询。尽管该选项比向远程用户提供全面访问要好，但这仍然是一个坏主意。

可行的方法是识别 C# 应用程序需要访问的所有信息，以及如何访问，并编写一个简单的 Web 服务/API，该服务/API 将接收参数并发出自己的查询并使用 XML、JSON 或甚至肥皂。尝试尽可能从外部世界抽象数据库访问，以获得最佳安全性。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T05:59:39.373

你有Cpanel吗？如果是，请尝试在远程 MySQL 中添加您的主机。如果您不确定如何操作，请点击此处链接[http://www.liquidweb.com/kb/enable-remote-mysql-connections-in-cpanel/ 。](http://www.liquidweb.com/kb/enable-remote-mysql-connections-in-cpanel/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T18:44:54.847

我不确定您是否具有 root 访问权限或对 my.cfg 的访问权限。如果您可以编辑它，请确保注释或删除“skip-networking”行并且它包含“bind-address = *”行。修改配置后重启mysql。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T17:54:15.167

我会做以下事情：

[使用您的公共 ip ( www.whatismyip.com](http://www.whatismyip.com) )的主机创建一个用户。

如果这不起作用，请使用您的主机创建一个用户作为您的公共 ARPA/PTR 记录：

```
>nslookup
> set q=ptr
> 8.8.8.8

Non-authoritative answer:
8.8.8.8.in-addr.arpa    name = google-public-dns-a.google.com

8.in-addr.arpa  nameserver = ns1.Level3.net
8.in-addr.arpa  nameserver = ns2.Level3.net 
```

然后将主机设置为`google-public-dns-a.google.com`。

第二个工作，我不知道为什么我在过去工作的项目中，你会认为 IP 地址就足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T20:08:35.260

出于安全原因，您不应直接通过（公共）网络访问数据库。

一种方法是在数据库服务器上编写一个 php 脚本并通过 HTTP/POST 访问它。

您应该通过用户名和散列密码对客户端进行身份验证。您发送的数据应该加密（例如使用用户明文密码）。不要发送完整的查询，只发送你想要做的和参数。As example, you want the orders for the customer, you can send a post request with the following parameters user=abc,password=9151440965cf9c5e07f81eee6241c042a7b78e9bb2dd4f928a8f6da5e369cdffdd2b70c70663ee30d02115731d35f1ece5aad9b362aaa9850efa99e3d197212a,data=EncryptedData

您可以注意到，密码是一个 SHA512 哈希。

数据可以是 json 或其他任何内容：{ "Command": "GetOrder", "Limit": "10" }

在您的 php 代码中，您执行以下步骤： 1\. 验证用户身份，如果密码不正确，则以错误代码等响应 2\. 解密数据 3\. 执行查询 4\. 将结果作为加密数据返回

如果您不想将明文密码存储在数据库中，则可以将散列值存储在数据库中，并使用双散列值进行身份验证，使用单散列值进行加密。

如果您不想使用请求中的参数执行查询，则应使用准备好的语句来防止 sql 注入。

有关在 php 中加密/解密的更多信息，请参见： http: [//php.net/manual/de/ref.mcrypt.php](http://php.net/manual/de/ref.mcrypt.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-12T20:30:49.113

就像一些建议的答案一样，我认为你被 bigrock 防火墙了。

现在，如果你想使用 AJAX/PHP，你需要三样东西： - 你的 C# 类来发送请求和接收结果 - 你的 HTML/JS（或 jQuery）文件来接收请求并将它交给你的 PHP。然后把结果发给你。- 用于查询数据库的 PHP 文件。

AJAX 对我来说似乎是多余的，您可以通过 POST 或 GET 参数发送您的查询（即`example.com/query.php?req='SELECT * FROM clients'`）

代码如下：

C# 使用Ali Ahsan Rana 制作的[此类：](http://codesamplez.com/programming/http-request-c-sharp)

```
//create the constructor with post type and few data
MyWebRequest myRequest = new MyWebRequest("http://www.example.com/query.php","POST","req=");
//use System.Web.Script.Serialization and myRequest.GetResponse(); 
```

System.Web.Script.Serialization 的一些[教程](http://atsung.wordpress.com/2008/08/07/javascriptserializer-example/)。

在 PHP 方面：

```
<?php

  $request=$_POST['req'];
  $dsn = 'mysql:dbname=mydb;host=example.com';
  $user = 'ajay';
  $password = '0000';

  try {
      $dbh = new PDO($dsn, $user, $password);
  } catch (PDOException $e) {
      echo 'Connection failed: ' . $e->getMessage();
  }

  $response = $dbh->query($request);     

  while ($rep = $response->fetch())
  {
        $response_array[] = $rep;
  }

  $response->closeCursor();

  $return = json_encode($rep);
  return($return);

?> 
```

这是一个快速草稿，但应该适用于 AFAIK。

# javascript - Javascript函数参数字符转义

> ID：11133163
> 
> 赞同：2
> 
> 时间：2012-06-21T07:06:20.880
> 
> 标签：javascript, asp.net

我需要将变量传递给 JavaScript 函数，但我遇到了一些麻烦。在 .cs 文件中，我写道：

```
string id = "some'id";
this.Controls.Add(new LiteralControl("<input type=\"button\" onClick=\"myFunction('"+id+"')\">")); 
```

如您所见`'`，id 中有一个（单引号）。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:15:40.320

`'`用`\`（反斜杠）转义。例如，

```
console.log('string with \''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:34:20.753

为此类字符转义字符串"/","\","'"

例子

```
string id = "some/'id"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:15:06.447

您应该转义您的字符串，这将导致：

```
 id = "some\'id"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:32:46.980

```
 <script type="text/javascript">
    function myFunction(someid) {
        someid = someid.replace('#', '\'');
        alert(someid);
    }
</script> 
```

在您的代码中

```
string id = "some'id".Replace("'","#");

this.Controls.Add(new LiteralControl("<input type=\"button\" value=\"Test\" onclick=\"myFunction('" + id + "');\">")); 
```

希望这会帮助你..

# preg-replace - PHP preg_replace 有大写/小写的任何变化？

> ID：11133165
> 
> 赞同：0
> 
> 时间：2012-06-21T07:06:38.917
> 
> 标签：preg-replace

我需要在 drupal 中编写一个自定义模块来帮助我进行位置搜索。最初我只需要从查询中删除一个逗号，然后我意识到我需要用它们的缩写（加利福尼亚 - > CA）替换所有状态实例，因为信息是如何存储在我的数据库中的。但是，这样做后，我发现我使用 preg_replace 的方法似乎取决于大写/小写。所以在这一行：

`$form_state['values'] = preg_replace("/alabama/", 'al', $form_state['values']);`

"alabama" 将被替换为 "al"，但 "Alabama" 或 "ALABAMA" 不会。有没有办法在不考虑外壳的所有可能变化的情况下用其缩写替换任何 Alabama 实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T07:32:35.013

您也可以尝试 **str_ireplace()**它不区分大小写

```
<?php
$str = 'alabama ,Alabama,ALABAMA';
$replace = str_ireplace('alabama','al',$str);
echo $str;
echo "<br/>";
echo $test;
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T07:11:53.500

```
$form_state['values'] = preg_replace("/alabama/i", 'al', $form_state['values']); 
```

'i' 修饰符将使模式不区分大小写。

# axapta - AX 2009：TaxReporting 报告使 AOS 崩溃

> ID：11133183
> 
> 赞同：3
> 
> 时间：2012-06-21T07:08:20.757
> 
> 标签：axapta, dynamics-ax-2009, x++

在`TaxReporting`报告中，有一个方法叫做`printUndeclaredTaxPeriods`，代码如下：

```
/// <summary>
/// This method will retrieve if there are any transactions that happened outside
/// the date range specified for the report.
/// </summary>
void printUndeclaredTaxPeriods()
{

    TaxReportPeriod     taxReportPeriod;
    TaxTrans            taxTrans_local;
    ;

    while select taxReportPeriod
    where taxReportPeriod.FromDate < fromDate
    exists join taxTrans_local
        where taxTrans_local.TransDate      >= taxReportPeriod.FromDate
        &&    taxTrans_local.TransDate      <= taxReportPeriod.ToDate
        &&    taxTrans_local.TaxPeriod      == taxReportPeriod.TaxPeriod
        &&    taxTrans_local.TaxRepCounter  == taxReportPeriod.VersionNum
    {        
         //element.send(taxReportPeriod);          
    }
} 
```

每次运行此报告时，AOS 都会崩溃。

当我调试时，我发现我评论的那行导致崩溃。

我怎样才能避免这个过程或者对这种情况的任何解释，所以我知道我应该怎么做 AOS 崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:09:13.797

> 该问题已在 AX 2009 的修补程序汇总 2 或独立知识库文章[KB 969478](https://mbs2.microsoft.com/Knowledgebase/KBDisplay.aspx?scid=kb;en-us;969478)中得到解决。  
> 
> 将菜单项 \Menu Items\Output\TaxReporting 更改为在客户端而不是服务器上运行是一种解决方法。

[从这里](https://community.dynamics.com/product/ax/f/33/p/16920/30157.aspx#30157)引述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:27:47.187

对报告有任何自定义吗？

然后从删除它开始。

否则将字段从`TaxReportPeriodTrans`正文移动到可编程部分。一次一个地向后移动，直到它崩溃。

# javascript - 如何使用 videoId 在 vi meo 播放器中播放视频？

> ID：11133184
> 
> 赞同：1
> 
> 时间：2012-06-21T07:08:24.437
> 
> 标签：javascript, api, vimeo

vimeo javascript api中是否有任何选项可以使用videoId播放视频？播放器已加载。我在 youtube 和 dailymotion 中有这个选项。

这是功能（youtube和dailymotion api）。

```
function onYouTubePlayerReady() {
    ytplayer = document.getElementById("player");
    ytplayer.addEventListener("onError", "onPlayerError");
}

//play a video by Id

this.PlayVideo = function (videoID) {
        ytplayer.loadVideoById(videoID);
    }

function onDailymotionPlayerReady(playerId) {
    dmplayer = document.getElementById("player");
    dmplayer.addEventListener("onError", "onPlayerError");
}

//play a video by Id

 this.PlayVideo = function (videoID) {
        dmplayer.loadVideoById(videoID);
    } 
```

在 vimeo api 中，我让播放器使用以下功能

```
function vimeo_player_loaded() {
    vimeoplayer = document.getElementById("player");
} 
```

`vimeoplayer.api_play()`将播放当前视频。但我想在`videoId`不重新加载播放器的情况下加载另一个视频。

如果有人知道使用 videoId 播放视频的选项，请帮助我。提前致谢！！

# c# - stringbuilder 与 string concat

> ID：11133185
> 
> 赞同：14
> 
> 时间：2012-06-21T07:08:27.900
> 
> 标签：c#, asp.net

在我的项目中，我正在遍历数据视图结果。

```
 string html =string.empty;
 DataView dV = data.DefaultView;
 for(int i=0;i< dV.Count;i++)
 {
     DataRowView rv = dV[i];
     html += rv.Row["X"].Tostring();
 } 
```

dV 中的行数始终为 3 或 4。

在这种情况下使用字符串 concat += 运算符或 StringBuilder 更好吗？为什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-21T07:11:49.007

我会`StringBuilder`在这里使用，只是因为它描述了你在做什么。

对于 3 或 4 个字符串的简单连接，它可能不会产生任何显着差异，字符串连接甚至*可能*会稍微快一些 - 但如果你错了并且有*很多*行，`StringBuilder`将开始变得更有效率，并且它*总是*更能描述你在做什么。

或者，使用类似的东西：

```
string html = string.Join("", dv.Cast<DataRowView>()
                                .Select(rv => rv.Row["X"])); 
```

请注意，您目前在字符串之间没有任何分隔符。你确定那是你想要的吗？（另请注意，您的代码目前没有多大意义 - 您没有`i`在循环中使用。为什么？）

我有[一篇关于字符串连接](http://pobox.com/~skeet/csharp/stringbuilder.html)的文章，其中更详细地说明了*为什么*值得使用`StringBuilder`以及何时使用。

编辑：对于那些怀疑字符串连接可以更快的人，这里有一个测试 - 故意“讨厌”数据，但只是为了证明它是可能的：

```
using System;
using System.Diagnostics;
using System.Text;

class Test
{
    static readonly string[] Bits = { 
        "small string",
        "string which is a bit longer",
        "stirng which is longer again to force yet another copy with any luck"
    };

    static readonly int ExpectedLength = string.Join("", Bits).Length;

    static void Main()        
    {
        Time(StringBuilderTest);
        Time(ConcatenateTest);
    }

    static void Time(Action action)
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
        // Make sure it's JITted
        action();
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < 10000000; i++)
        {
            action();
        }
        sw.Stop();
        Console.WriteLine("{0}: {1} millis", action.Method.Name,
                          (long) sw.Elapsed.TotalMilliseconds);
    }

    static void ConcatenateTest()
    {
        string x = "";
        foreach (string bit in Bits)
        {
            x += bit;
        }
        // Force a validation to prevent dodgy optimizations
        if (x.Length != ExpectedLength)
        {
            throw new Exception("Eek!");
        }
    }

    static void StringBuilderTest()
    {
        StringBuilder builder = new StringBuilder();
        foreach (string bit in Bits)
        {
            builder.Append(bit);
        }
        string x = builder.ToString();
        // Force a validation to prevent dodgy optimizations
        if (x.Length != ExpectedLength)
        {
            throw new Exception("Eek!");
        }
    }
} 
```

我的机器上的结果（用 编译`/o+ /debug-`）：

```
StringBuilderTest: 2245 millis
ConcatenateTest: 989 millis 
```

我已经运行了几次，包括颠倒测试的顺序，结果是一致的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T07:14:31.143

建议使用 StringBuilder .. 你为什么不自己做一个分析，然后决定什么是最适合你的..

```
var stopWatch=new StopWatch();
stopWatch.Start();
string html =string.empty;
        DataView dV = data.DefaultView;
        for(int i=0;i< dV.Count;i++)
        {
           html += dV.Row["X"].Tostring();
        } 
stopWatch.Stop();
Console.Write(stopWatch.EllapsedMilliseconds());

var stopWatch=new StopWatch();
stopWatch.Start();
string html =new StringBuilder();
        DataView dV = data.DefaultView;
        for(int i=0;i< dV.Count;i++)
        {
           html.Append(dV.Row["X"].ToString());
        } 
var finalHtml=html.ToString();
stopWatch.Stop();
Console.Write(stopWatch.EllapsedMilliseconds()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T07:14:24.870

[从文档：](http://msdn.microsoft.com/En-Us/library/system.text.stringbuilder%28v=vs.80%29.aspx)

> 如果串联固定数量的 String 对象，则 String 类更适合串联操作。在这种情况下，编译器甚至可以将各个连接操作组合成一个操作。
> 
> 如果串联任意数量的字符串，则 StringBuilder 对象更适合串联操作；例如，如果一个循环连接随机数量的用户输入字符串。

所以在你的情况下，我会说字符串更好。

**编辑：**

这是一个没有结束的讨论，无论如何我建议你检查你平均有多少操作并测试每个操作的性能以比较结果。

检查这个关于这个问题[的不错的链接](http://www.codeproject.com/Articles/14936/StringBuilder-vs-String-Fast-String-Operations-wit)，包括一些性能测试代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T07:09:26.853

[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)是肯定的。字符串是不可变的记住！

编辑：对于 3-4 行，连接将是首选，正如 Jon Skeet 在他的回答中所说

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T07:11:22.563

[推荐使用StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)。它是可变的。它应该对内存分配器施加更少的压力:-)

> 字符串实例是不可变的。创建后无法更改。任何看似更改字符串的操作都会返回一个新实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T07:14:42.610

stringbuilder 是您正在寻找的。一般来说，如果有某个功能可以用于某项工作，请尝试使用它，而不是编写一些可以完成几乎相同工作的程序。

# php - 简单的 Wordpress / PHP 查询

> ID：11133186
> 
> 赞同：2
> 
> 时间：2012-06-21T07:08:36.730
> 
> 标签：php, wordpress

这是一个相对简单的问题，但我一直无法找到解决方案。我希望为每个帖子加载自定义图像大小，我想通过使用副标题的标题（一个 WordPress 插件）来完成。我使用副标题而不是“标题”、“类别”或“标签”的原因是因为它们在网站中都扮演着不同的角色。

我需要一个简单的 WordPress 命令：

```
<?php the_post_thumbnail(); ?> 
```

并将子标题的名称放在其中：

```
<?php if (function_exists('the_subheading')) { the_subheading(); } ?> 
```

所以它看起来像这样：

```
<?php the_post_thumbnail('the name of the subheading here'); ?> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:16:48.880

```
if (function_exists('the_subheading')) {
$subheading = get_the_subheading($postID);
the_post_thumbnail($subheading);
} 
```

注意：$postID 也可以写成其他方式，这取决于你如何使用 post id。或者只是有**$subheading = get_the_subheading();**

祝你好运！

# php - 用于分隔维度的正则表达式

> ID：11133197
> 
> 赞同：1
> 
> 时间：2012-06-21T07:09:17.133
> 
> 标签：php, regex, string

我是 php 新手，我需要帮助。我有宽度乘以高度的尺寸，这些尺寸输出到单个字符串（*宽度*x*高度*）。我需要分开宽度和高度。维度将始终小于 100，但可能包含十进制值。在尺寸之前或之后也有可能出现空白。

以下是一些示例尺寸：8x10、10x12、24.5x36.625

我想我可以使用 strpos 和 substr 完成任务，但是正则表达式会更快吗？更优雅？更准确的？[附带问题：学习正则表达式的好方法是什么？有什么推荐的书/网站吗？]

```
$string=' 8.5x10';
$string=trim($string);
$x = stripos($string,'x');
$size1 = substr($string, 0, $x);
$size2 = substr($string, $x+1);
echo $size1 . '<br />';
echo $size2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:11:46.340

```
$string = '8.5x10';
list($width, $height) = explode('x',$string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:18:21.427

互联网上到处都是关于正则表达式的教程，你只需要小心一点，因为周围有各种各样的家庭（perl，old-school unix ...）

关于您的问题，`substtring`解决方案很可能会更快，因为正则表达式转换为有限状态机器，这可能变得相当复杂......

当格式定义松散时很好，因为它允许快速（程序员明智地）定义格式，检查它并检索数据。

在你的情况下：`(\d+(\.\d*)?)x(\d+(\.\d*))`

*   `\d`: 匹配单个数字
*   `+`上一个块出现一次或多次
*   `*`前一个块出现零次或一次或多次
*   `?`前一个块出现零次或一次
*   `()`定义一个块

例如：`d+`将匹配 1、12、158

现在认为正则表达式可以匹配一个子集：aaaa15x15aaaa 将像 15x15 一样容易解析

何时不使用正则表达式是您需要“上下文敏感”解析（例如：一行的格式取决于先前的信息）

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:15:30.693

```
$string=' 8.5x10';
$array = explode('x',$String);
var_dump($array); 
```

$array[0] => 将有 size1 ， $array[1] => 将有 size2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:22:39.123

首先，去掉所有的空格，然后在字符上拆分字符串`x`。使用`list()`可以更容易地将数组拆分为单独的变量。

```
$string = "1.23 x5 ";
$string = str_replace(" ", "", $string);
list($width, $height) = explode("x", $string); 
```

您可能还想将值转换为浮点数，以确保它们实际上是数字：

```
$width = (float)$width;
$height = (float)$height; 
```

# jquery - 如何在 asp.net mvc 3 razor/jquery 中使用 guid 和 jquery？

> ID：11133200
> 
> 赞同：0
> 
> 时间：2012-06-21T07:09:26.963
> 
> 标签：jquery, asp.net-mvc-3, razor

如何创建一个 id 作为按钮的 newguid 并在我的 jquery 脚本中使用它？就像是：

```
 @{ var id = Guid.NewGuid().ToString(); } //

<input type=button id="@id" name="Go" /> @*how can i use this newguid as an id for my button?*@

<script>
            @*how can i use this id to attach an eventhandler to for my button?*@
            $("@id ).click(function(){ 
            });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:11:54.793

```
@{ var id = Guid.NewGuid().ToString(); }
<input type="button" id="@id" name="Go" /> 
```

和脚本：

```
<script type="text/javascript">
    $('#@(id)').click(function() { 
        alert('Thank you for clicking on button with id = ' + this.id);
    });
</script> 
```

# javascript - 堆栈溢出搜索输入如何工作？

> ID：11133206
> 
> 赞同：-1
> 
> 时间：2012-06-21T07:09:56.120
> 
> 标签：javascript, jquery, html

顶部的堆栈溢出搜索输入如何工作？它似乎随机扩展或当它为空并且退格键被击中时。

1.  其背后的 jQuery、html 和 css 是什么？
2.  它会替换或扩展链接吗？
3.  还有其他我错过的附加功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:17:37.760

如何检索搜索文本框的 jQuery 代码？

这是`<input>`：

```
<input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" type="text" maxlength="140" size="28" value=""> 
```

只需很少的 jQuery 代码（并且知道自己在做什么），就可以拉出事件处理程序：

```
$('.textbox[name="q"]').data('events')//Here jQuery saves internally the handlers 
```

在该对象中，您可以看到它们有两个处理程序，一个 for`keydown`和一个 for `focusout`。

它被缩小了，但如果你愿意，你可以理解它：

**按键**：

```
function (c){if(k||46>c.keyCode&&8!=c.keyCode&&32!=c.keyCode)return!0;k=!0;clearTimeout(e);d.clearQueue("expand");h(function(c){d[0].placeholder="";a.fadeOut(100,c)});h(function(c){d.animate({width:f,"max-width":f},100,c)});h(function(){0==d.parent().find(".search-prompt").length&&d.before('<span class="search-prompt">search:</span>')});3==d.queue("expand").length&&d.dequeue("expand")} 
```

**焦点：**

```
function (){e=setTimeout(function(){h(function(c){d.parent().find(".search-prompt").remove(); c()});h(function(a){d.animate({width:c,"max-width":c},100,a)});h(function(c){n&&""==d[0].value&&(d[0].value="search");d[0].placeholder="search";a.fadeIn(100,c)});3==d.queue("expand").length&&d.dequeue("expand");k=!1},200)} 
```

* * *

## 缩进版本：

**按键**：

```
function(c) {
    if (k || 46 > c.keyCode && 8 != c.keyCode && 32 != c.keyCode) return !0;
    k = !0;
    clearTimeout(e);
    d.clearQueue("expand");
    h(function(c) {
        d[0].placeholder = "";
        a.fadeOut(100, c)
    });
    h(function(c) {
        d.animate({
            width: f,
            "max-width": f
        }, 100, c)
    });
    h(function() {
        0 == d.parent().find(".search-prompt").length && d.before('<span class="search-prompt">search:</span>')
    });
    3 == d.queue("expand").length && d.dequeue("expand")
}​ 
```

**焦点：**

```
function() {
    e = setTimeout(function() {
        h(function(c) {
            d.parent().find(".search-prompt").remove();
            c()
        });
        h(function(a) {
            d.animate({
                width: c,
                "max-width": c
            }, 100, a)
        });
        h(function(c) {
            n && "" == d[0].value && (d[0].value = "search");
            d[0].placeholder = "search";
            a.fadeIn(100, c)
        });
        3 == d.queue("expand").length && d.dequeue("expand");
        k = !1
    }, 200)
}​ 
```

这个答案表明你可以在WEB开发中实现你想要的任何东西。
                **没有什么是秘密的！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:17:03.217

如果你想使用 jQuery 来实现这一点，基础知识是：

```
$('.search-input').keydown(function() {
    $(this).animate({width: '200px'}, {duration: 200});
});

$('.search-input').blur(function(){
    $(this).animate({width: '100px'}, {duration: 200});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:22:00.810

jQuery、html 和 css 在它背后。它替换或扩展链接。

```
$('.search-input').keydown(function() {
$(this).css( "height","100");
$("hlinks").show();
  });

$('.search-input').blur(function(){
$(this).css( "height","200");
 $("hlinks").hide();
}); 
```

# mysql - 通信链路故障 mySQL NetBeans

> ID：11133212
> 
> 赞同：0
> 
> 时间：2012-06-21T07:10:45.577
> 
> 标签：mysql, connection, mysql-error-1064

大家好，我是新手，在连接 netbeans 和 mysql 时遇到了一些问题，我需要一个在线数据库，我在 000webhost.com 创建了一个，但我认为有问题....如果有任何想法或其他服务器我真的需要将来自服务器的数据库与netbeans中的应用程序连接起来。

这是我的配置：

![在此处输入图像描述](../Images/9c6995868c8ef24738d88be0fb005f99.png)

如果您有任何想法将任何数据库（如 sql server 或 postgres 或 mysql）与在线数据库连接但有效，请告诉我，我需要一些想法或一些 HowTo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:19:46.350

从您的第一个屏幕截图（第二个屏幕截图不为我加载）它看起来是正确的。如果您仔细检查了提供的所有详细信息，则必须联系您的托管服务提供商。如果是 NetBeans 或驱动程序本身的问题，您会得到不同的错误。

确保从电子邮件中复制详细信息，而不是重新键入它们，以防止混淆 0 和 O 之类的内容。还要确保在复制文本时没有捕捉到多余的空格或隐藏的标签。

# java - 类型擦除和继承：List的一个对象 ，当从子类访问时被视为原始列表？

> ID：11133214
> 
> 赞同：0
> 
> 时间：2012-06-21T07:10:46.743
> 
> 标签：java, generics, type-erasure

## 问题：

当从子类访问时，参数化类的对象被视为非泛型。我该如何克服呢？

## 细节：

考虑一个基类：

```
public class MyBaseClass {
    protected List<Number> numbers = new ArrayList<Number>();

    public MyBaseClass(){
        //...
    }
} 
```

现在，让我们扩展这个类：

```
public class MyDerivedClass extends MyBaseClass {

    public void addSomething() {
        numbers.add(25.0f); //Warning about type-safety here
    }
} 
```

在派生类中，数字对象被视为原始类型。警告是：

> 类型安全：方法 add(Object) 属于原始类型 List。对泛型类型 List 的引用应该被参数化。

如果我尝试自己添加类型参数，则会出现编译错误：

```
 numbers.<Number>add(25.0f); //Error here 
```

我看到的错误是：

> List 类型的方法 add(Number) 不是通用的；它不能用参数参数化

但是，如果我将这两个类放在同一个 Java 源文件中，那么这个问题就会消失。首先没有警告。这是说明问题的示例。

在我的实际应用程序中，我希望能够从`List`派生类中获取元素，并对它们执行特定于类的操作，而不必先将检索到的对象转换为适当的类型。

我怀疑问题是因为类型擦除，但我不知道如何解决它。

* * *

## 编辑：

我在 Fedora Core 16 上使用 Eclipse 3.7.2 和 Oracle JDK 1.6.0_30。编译器合规性设置为 1.6，默认合规性设置。正如我所提到的，如果我将两个类放在同一个 .java 文件中，那么我看不到警告。仅当我将它们放在不同的文件中时才能看到。

我可以通过定义所有直接对父类中的列表对象进行操作的方法来解决这个问题；并从派生类中使用它。

但我仍然很好奇为什么我会看到警告。这是解决方法：

在 MyBaseClass 中：

```
 protected void addNumberToList(Number num){
        numbers.add(num);
    } 
```

然后在派生类中：

```
 public void addSomething() {
        addNumberToList(25.0f);
    } 
```

同样，所有直接操作`List`对象的操作都可以在基类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:58:46.470

您*真正的*基类是通用的，但您的子类继承自其原始类型：

```
public class MyBaseClass<X> {
    protected List<Number> numbers = new ArrayList<Number>();

    public List<Number> getNumbers() {
        return numbers;
    }
}

public class MyDerivedClass extends MyBaseClass {
    public void addSomething() {
        numbers.add(25.0f);
    }
} 
```

[JLS §4.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8-400)说成员访问将被视为原始类型。这意味着`numbers`被视为原始，因此发出警告。解决方案是参数化超类型：

```
public class MyDerivedClass extends MyBaseClass<TypeArgumentsHere> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:17:20.177

我使用 Eclipse 并且您的代码很好地遵守了，没有警告或错误。但我认为您应该提供`protected/public`方法而不是公开实例变量。

```
public class MyBaseClass {
    protected List<Number> numbers = new ArrayList<Number>();

    public List<Number> getNumbers() {
        return numbers;
    }
}

public class MyDerivedClass extends MyBaseClass {

    public void addSomething() {
        getNumbers().add(25.0f);
    }
} 
```

# activemq - activemq 故障转移：主节点恢复消费者？

> ID：11133218
> 
> 赞同：0
> 
> 时间：2012-06-21T07:11:10.437
> 
> 标签：activemq, failover

我是新手`activemq`。我已经配置了两台 activemq 服务器并在`failover`传输中使用它们。他们工作正常。我的意思是，如果一个 activemq 出现故障，另一个会拿起队列。我的问题是当主服务器启动时它不恢复队列。如果主服务器启动，是否有任何这样的配置或协议可以管理它，那么消费者应该回到它。

目前我的配置是：

```
 <transportConnectors>
                    <transportConnector name="openwire" uri="tcp://0.0.0.0:61616" updateClusterClients="true" rebalanceClusterClients="true"/>
    </transportConnectors>
<networkConnectors>
                <networkConnector uri="static:(tcp://192.168.0.122:61616)"
                networkTTL="3"
                prefetchSize="1"
                decreaseNetworkConsumerPriority="true" />
</networkConnectors> 
```

我的连接uri是：

```
failover:(tcp://${ipaddress.master}:61616,tcp://${ipaddress.backup}:61616)?randomize=false 
```

另外我想在发生故障转移的情况下发送邮件，以便我可以知道 activemq 是否已关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:13:46.303

您在那里配置的不是真正的 HA 部署，而是[代理网络](http://activemq.apache.org/networks-of-brokers.html)。如果您在网络中配置了两个代理，每个代理都有自己的消息存储，其中随时包含部分消息集（请参阅[代理网络如何工作](http://www.jakubkorab.net/2011/11/understanding-activemq-broker-networks.html)）。

您可能希望看到的行为是，如果一个代理发生故障，另一个代理会从失败的代理停止的位置恢复（故障代理持有的所有未传递消息）。为此，您需要使用（最好是共享存储）[主从](http://activemq.apache.org/masterslave.html)配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:54:15.997

我已经做到了。并发布解决方案，以防任何人遇到同样的问题。此功能在 activemq 5.6 中可用。`priorityBackup=true`连接 url 是告诉消费者返回主节点（如果可用）的关键。

我的新连接 uri 是：

```
failover:master:61616,tcp://backup:61616)?randomize=false&amp;priorityBackup=true 
```

请参阅[此处](http://activemq.apache.org/failover-transport-reference.html)了解更多详细信息。

# iis - 网页未从 IIS 显示在 iPod 中

> ID：11133221
> 
> 赞同：0
> 
> 时间：2012-06-21T07:11:29.047
> 
> 标签：iis, ipod-touch

我创建了一个托管在 IIS 中的应用程序。当我在 iPod 中显示 IIS 网页时，它会显示如下错误消息，

> 无法打开页面 Safari 无法打开页面，因为服务器停止响应。

有人知道此错误消息的原因吗？

**注意：default.html 页面正在打开。仅给出“http://ipaddress/mypage.html”时出错**

# c++ - C++中头包含的静态分析

> ID：11133222
> 
> 赞同：1
> 
> 时间：2012-06-21T07:11:32.127
> 
> 标签：c++, header-files, static-analysis

似乎我经常发现我的代码从一个 linux 安装移动到另一个或从一个 unix 移动到另一个时，我发现我错过了包含某些头文件。

当您将源代码提供给其他人希望他们能够很好地编译它时，这往往会变得很烦人，只是因为缺少头文件包含而导致它失败。

是否有任何静态分析工具可以检测应显式包含在当前似乎隐含包含的标头？有什么方法可以禁用这种隐含的头文件吗？

此外，我想检测包含的头文件，并且可能通过代码更改变得多余，并且不再需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:14:38.737

有一个名为[Include-What-You-Use](http://code.google.com/p/include-what-you-use/)的谷歌项目可能会有所帮助。但是要正确完成它仍然非常复杂。而且我不知道有任何其他工具可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:46:17.837

我使用[检查头取得](http://code.google.com/p/checkheaders/)了一些成功。去年的开发似乎放缓了一些，但它仍然可以使用。可能最好使用该`trunk`版本。

# android - 自定义 ListView OnClick 解析

> ID：11133224
> 
> 赞同：0
> 
> 时间：2012-06-21T07:11:35.403
> 
> 标签：android, onclick, custom-lists

我有一个自定义列表视图，我成功地将数据解析为一个列表，但是当我尝试使用 onclick 应用程序崩溃时，帮助？

主要活动

```
public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://dl.dropbox.com/u/48258247/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.library);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String song = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
            String thumb_url = ((TextView) view.findViewById(R.id.duration)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItem.class);
            in.putExtra(KEY_SONG, song);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_THUMB_URL, thumb_url);
            startActivity(in);

        }
    });     
}   
} 
```

SingleMenuItemActivity

```
package com.example.androidhive;

import org.scouts.android.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class SingleMenuItem  extends Activity {

// XML node keys
static final String KEY_SONG = "song";
static final String KEY_ARTIST = "artist";
static final String KEY_THUMB_URL = "thumb_url";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.libraryonclick);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String song = in.getStringExtra(KEY_SONG);
    String artist = in.getStringExtra(KEY_ARTIST);
    String thumb_url = in.getStringExtra(KEY_THUMB_URL);

    // Displaying all values on the screen
    TextView lblSong = (TextView) findViewById(R.id.textView1);
    TextView lblArtist = (TextView) findViewById(R.id.textView2);
    TextView lblThumb_Url = (TextView) findViewById(R.id.textView3);

    lblSong.setText(song);
    lblArtist.setText(artist);
    lblThumb_Url.setText(thumb_url);
}
} 
```

这是日志猫

日志猫：

```
-21 17:16:30.812: D/AndroidRuntime(281): Shutting down VM
06-21 17:16:30.812: W/dalvikvm(281): threadid=1: thread exiting with uncaught exception       (group=0x4001d800)
06-21 17:16:30.862: E/AndroidRuntime(281): FATAL EXCEPTION: main
06-21 17:16:30.862: E/AndroidRuntime(281): android.content.ActivityNotFoundException:   Unable to find explicit activity class   {org.scouts.android/com.example.androidhive.SingleMenuItem}; have you declared this activity   in your AndroidManifest.xml?
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.Activity.startActivityFromChild(Activity.java:3057)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.Activity.startActivityForResult(Activity.java:2837)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.Activity.startActivity(Activity.java:2923)
06-21 17:16:30.862: E/AndroidRuntime(281):  at com.example.androidhive.CustomizedListView$1.onItemClick(CustomizedListView.java:88)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.widget.ListView.performItemClick(ListView.java:3382)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.os.Handler.handleCallback(Handler.java:587)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-21 17:16:30.862: E/AndroidRuntime(281):  at  android.os.Looper.loop(Looper.java:123)
06-21 17:16:30.862: E/AndroidRuntime(281):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-21 17:16:30.862: E/AndroidRuntime(281):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 17:16:30.862: E/AndroidRuntime(281):  at java.lang.reflect.Method.invoke(Method.java:521)
06-21 17:16:30.862: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-21 17:16:30.862: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-21 17:16:30.862: E/AndroidRuntime(281):  at dalvik.system.NativeStart.main(Native Method) 
```

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:21:20.833

由于`SingleMenuItem.java`尚未在您的`AndroidManifest.xml`文件中注册，因此发生了强制关闭。只需在您的`<application>`标签下方注册即可

```
 <application
        android:icon="@drawable/op"
        android:label="@string/app_name" >
        <activity
            android:name=".CustomizedListView"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".SingleMenuItem" />
</application> 
```

在您的项目中有多个活动意味着，您必须像上面一样注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:21:52.693

将清单文件中的第二个活动 (SingleMenuItem.java) 条目作为

```
 have you declared this activity   in your AndroidManifest.xml? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T07:22:11.043

查看 logcat 第一行：

```
{org.scouts.android/com.example.androidhive.SingleMenuItem}; have you declared this activity   in your AndroidManifest.xml? 
```

因此，将您的`SingleMenuItem`活动添加`AndroidManifest`为：

```
<acitivity android:name=".SingleMenuItem"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:16:16.153

我认为这部分有问题。

```
String song = ((TextView) view.findViewById(R.id.title)).getText().toString();
String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
String thumb_url = ((TextView) view.findViewById(R.id.duration)).getText().toString(); 
```

`songsList`根据位置取值。

谢谢

# android - Android RotateAnimation 错误

> ID：11133235
> 
> 赞同：0
> 
> 时间：2012-06-21T07:12:18.230
> 
> 标签：android, rotateanimation

我有一个`RotateAnimation`附加到一个`ImageButton`点击旋转它并使用`OnAnimationEnd`启动一个新的活动。

问题是它不工作。在我关闭我的应用程序并返回后，我在里面`new Activity(..)`，当我返回时，动画就会执行。我希望动画发生，然后启动新的活动。

出于某种原因，在使用相同的代码之前它工作得非常好，但我不知道，一些微不足道的改变可能会影响它。

这是代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);         
     setContentView(R.layout.menu);
    ImageButton amazingPicsButton = (ImageButton) findViewById(R.id.amazingPics),              
   setViewOnClick(amazingPicsButton, new Intent("com.jasfiddle.AmazingInterface.AMAZINGPICS"));     
}
/**
 * Generic OnClick setter method for giving various View objects a click listener
 * @param b
 * @param intent
 */
private <B> void setViewOnClick(B b, final Intent intent){
    ((View) b).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            amazingPicsSound = createRandButSound();
            amazingPicsSound.start();
            rotateAndNewActivity(v, intent);

        }
    });         

}

/** function that produces rotation animation on the View v.
 * Could be applied to button, ImageView, ImageButton, etc.
 */
private void rotateAndNewActivity(View v, final Intent intent){
    // Create an animation instance
    Animation an = new RotateAnimation(30, 360, v.getWidth()/2, v.getHeight()/2);
    an.setDuration(50);               // duration in ms
    an.setRepeatCount(3);                // -1 = infinite repeate

    /*we override the Animation an object to include the start of an new Activity
    at the end of animation */
     an.setAnimationListener(new AnimationListener(){
        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub  
        }

        //start the activity onAnimationEnd
        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            startActivity(intent);
        }       
     });
    // Set the animation's parameters

    v.setAnimation(an);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:31:09.777

[`setAnimation`](http://developer.android.com/reference/android/view/View.html#setAnimation%28android.view.animation.Animation%29)只设置下一个动画在[`View`](http://developer.android.com/reference/android/view/View.html). 要立即开始动画，请使用[`startAnimation`](http://developer.android.com/reference/android/view/View.html#startAnimation%28android.view.animation.Animation%29)

在你的情况下，使用`v.startAnimation(an);`

# c# - Watin 获取 id 包含一些文本的元素

> ID：11133245
> 
> 赞同：1
> 
> 时间：2012-06-21T07:13:00.023
> 
> 标签：c#, watin

我如何从 id 以字符串开头并以另一个字符串结尾的 html 页面获取元素。也许您会通过以下示例得到我的问题：

HTML：

```
 <a href="#" onClick="" id="olla{randomtext}:id23">text</a> 
```

结果：

```
I would like to click on links where id is like olla{randomtext}:id 
```

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:25:10.567

```
HtmlElement elementid;
elementid.Id="Your id"
//focus to selected id 
webbrowser.Document.GetElementById(ElementId).ScrollIntoView(true); 
```

# jquery-mobile - 如何更改页面，以便我不会看到它使用 Jquery-mobile 发生？

> ID：11133248
> 
> 赞同：1
> 
> 时间：2012-06-21T07:13:08.493
> 
> 标签：jquery-mobile, cordova

我在我的应用程序中同时使用 phonegap(1.8.1) 和 jquerymobile(1.1.0)

现在我通过打开 index.html 页面打开我的应用程序。我的 index.html 包含很多页面，例如

```
<div data-role="page" id="page1">
<div data-role="page" id="page2">
<div data-role="page" id="page3">
<div data-role="page" id="page4"> 
```

我需要根据我拥有的标志打开一个页面。目前 page1 默认打开。但是假设我想在我的应用程序打开后立即打开 page2，然后我就这样做`changePage()`了`pagebeforeshow`

```
$("#page1").on("pagebeforeshow", function(e) {
$.mobile.changePage("#page2");
}); 
```

但它总是先显示第 1 页，然后转到第 2 页。我想直接打开page2怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:16:02.560

所以，我认为你在这里使用了错误的事件。从[jqm 事件](http://jquerymobile.com/test/docs/api/events.html)：

```
**pagebeforeshow**
Triggered on the "toPage" we are transitioning to, before the actual transition  
animation is kicked off. Callbacks for this event will recieve a data object
as their 2nd arg.  

 **pagebeforeload**

Triggered before any load request is made. Callbacks bound to this event can call  
preventDefault() on the event to indicate that they are handling the load request.  
 Callbacks that do this *MUST* make sure they call resolve() or reject() on the   
deferred object reference contained in the data object passed to the callback. 
```

因此，**pagebeforeload**可能是您切换页面需要使用的默认事件，因为它是在 LOADING 页面之前执行的，所以您看不到它。

**pagebeforeshow**的主要问题是，当触发此事件时，已经有一个页面正在加载并准备好显示。在此事件中调用 changePage() 只会将页面转换到要在当前显示页面之后显示的新页面放入队列中。也许使用这个事件和 jqm 站点中解释的“preventDefault()”技术可以让你获得所需的行为，但我从未尝试过，所以我无法进一步帮助你。祝你好运。

编辑：正如评论中的OP所述，问题是jqm的默认转换。如果加载了新页面，将触发自动幻灯片转换，因此将显示第一页，然后转换到 changePage() 中调用的页面。解决方案是避免这样的过渡：

```
$.mobile.changePage('#page', {transition:'none'}); 
```

这样，目标页面将突然显示。

# qt4 - 当鼠标悬停在 Qt 中的按钮和 lineedit 上时显示帮助文本

> ID：11133250
> 
> 赞同：0
> 
> 时间：2012-06-21T07:13:24.213
> 
> 标签：qt4

我有一个按钮和一个 lineedit，我想要的是，当我的鼠标悬停在那个按钮或 lineedit 上时，一个帮助文本（那个按钮和 lineedit 的用途）应该在按钮或 lineedit 旁边显示。请尽快回复，我急需..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:26:43.287

[QWidget::whatsThis](http://doc-snapshot.qt-project.org/4.8/qwidget.html#whatsThis-prop)，[QWidget::toolTip](http://doc-snapshot.qt-project.org/4.8/qwidget.html#toolTip-prop)或[QWidget::statusTip](http://doc-snapshot.qt-project.org/4.8/qwidget.html#statusTip-prop)做你想做的事，这取决于你的需要。

# google-api - gdata.docs.client.DocsClient

> ID：11133251
> 
> 赞同：2
> 
> 时间：2012-06-21T07:13:25.463
> 
> 标签：google-api, gdata, google-docs-api, google-drive-api, gdata-python-client

我有以下代码，读取 oauth2 令牌表单文件，然后尝试执行文档的列表查询以查找我要复制的特定电子表格，但是无论我尝试什么代码，要么出错，要么返回不包含文档的对象数据。

我正在使用 gdata.docs.client.DocsClient，据我所知，这是 API 的第 3 版

```
def CreateClient():
"""Create a Documents List Client."""
client = gdata.docs.client.DocsClient(source=config.APP_NAME)
client.http_client.debug = config.DEBUG
# Authenticate the user with CLientLogin, OAuth, or AuthSub.

if os.path.exists(config.CONFIG_FILE):
    f = open(config.CONFIG_FILE)
    tok = pickle.load(f)
    f.close()
    client.auth_token = tok.auth_token

return client 
```

**第一次查询尝试**

```
def get_doc():

new_api_query = gdata.docs.client.DocsQuery(title='RichSheet', title_exact=True, show_collections=True)

d = client.GetResources(q = new_api_query) 
```

这失败并出现以下堆栈跟踪

```
 Traceback (most recent call last):
  File "/Users/richard/PycharmProjects/reportone/make_my_report.py", line 83, in <module>
    get_doc()
  File "/Users/richard/PycharmProjects/reportone/make_my_report.py", line 57, in get_doc
    d = client.GetResources(q = new_api_query)
  File "/Users/richard/PycharmProjects/reportone/gdata/docs/client.py", line 151, in get_resources
    **kwargs)
  File "/Users/richard/PycharmProjects/reportone/gdata/client.py", line 640, in get_feed
    **kwargs)
  File "/Users/richard/PycharmProjects/reportone/gdata/docs/client.py", line 66, in request
    return super(DocsClient, self).request(method=method, uri=uri, **kwargs)
  File "/Users/richard/PycharmProjects/reportone/gdata/client.py", line 267, in request
    uri=uri, auth_token=auth_token, http_request=http_request, **kwargs)
  File "/Users/richard/PycharmProjects/reportone/atom/client.py", line 115, in request
    self.auth_token.modify_request(http_request)
  File "/Users/richard/PycharmProjects/reportone/gdata/gauth.py", line 1047, in modify_request
    token_secret=self.token_secret, verifier=self.verifier)
  File "/Users/richard/PycharmProjects/reportone/gdata/gauth.py", line 668, in generate_hmac_signature
    next, token, verifier=verifier)
  File "/Users/richard/PycharmProjects/reportone/gdata/gauth.py", line 629, in build_oauth_base_string
    urllib.quote(params[key], safe='~')))
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 1266, in quote
    if not s.rstrip(safe):
AttributeError: 'bool' object has no attribute 'rstrip'

Process finished with exit code 1 
```

然后我的第二次尝试

```
def get_doc():

    other = gdata.docs.service.DocumentQuery(text_query='RichSheet')

    d = client.GetResources(q = other) 
```

这返回一个 ResourceFeed 对象，但没有内容。我已经浏览了这些功能的源代码，但事情并不明显。

我错过了什么吗？还是我应该回到 api 的第 2 版？

# python - SCons 中的后备构建器

> ID：11133253
> 
> 赞同：0
> 
> 时间：2012-06-21T07:13:29.240
> 
> 标签：python, scons

是否可以在 SCons中实现类似*后备构建方法的东西？*

例如，我的 SConscript 中有以下代码：

```
if check_something():
    MyBuilder(a, b)
....
if dont_know_how_to_build(a):
    FallBackBuilder(a, c) 
```

我无法预测是否会激活“正常构建方法”。但我希望当它没有被激活并且 SCons 不知道如何构建`a`时，它使用`FallBackBuilder`.

当然，我知道写这样的东西是可以的：

```
if check_something():
    MyBuilder(a, b)
else:
    FallBackBuilder(a, c) 
```

但我对这个解决方案不满意，因为在我的 SConscript/SConstruct 文件中可能有数千个地方`a`可以指定一些构建器。

我只想在 SConscript 的和处指定一些“后备”方法。

你怎么看？可能吗？或者这根本就是一个错误的方向？

换句话说，如果有可能在 SConscript 中的某个地方获得已经有关联构建器的对象列表？

例如：

```
Builder1(a,b)
Builder2(b,c)
list_of_buildable_objects = get_list_of_buildable_objects()
Builder3(c,d) 
```

我想知道如何获取在此示例中必须等于或类似*的可构建对象的列表。*`[a, b]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:34:18.300

您指定的当前不可能。

SConstruct/SConscripts 用于告诉 SCons 做什么。它不会立即执行这些操作。它使用这些信息来构建依赖关系树，一些源扫描器会将其添加到系统中，以构建（希望）系统中所有依赖关系的完整图景。

然后遍历此 DAG（有向无环图）以找出要发出的命令的正确顺序。

图中的一些对象的构建器由 SCons 直接分配，而不是通过 SConstruct/SConscripts。

您是否希望在其他构建器运行并失败后运行此后备构建器？或者这仅适用于系统没有其他指定构建器的目标？

# c# - 在 Drop 事件中检查对象的格式

> ID：11133255
> 
> 赞同：0
> 
> 时间：2012-06-21T07:13:33.547
> 
> 标签：c#, silverlight

我有一个`AllowDrop`属性为 true 的堆栈面板，我必须在此堆栈面板上拖动一个用户控件 (Player.xaml)。
在`Drop`Stack Panel 事件中，我必须检查被拖动的项目是否属于该`user control (Player.xaml)`类型

```
private void StackPanel_Drop(object sender, DragEventArgs e)
    {
    if (e.Data.GetDataPresent("ProjectName.FolderName.Player"))
    {
            spHolder.Children.Clear();
            spHolder.Children.Add((UserControls.AnswerControl)e.Data.GetData("ProjectName.FolderName.Player"));
    }
} 
```

如果我要在控件上放置一个简单的文本，我会这样做：

```
private void StackPanel_Drop(object sender, DragEventArgs e)
    {
    if (e.Data.GetDataPresent(DataFormats.StringFormat))
    {
            spHolder.Children.Clear();
            spHolder.Children.Add((UserControls.AnswerControl)e.Data.GetData(DataFormats.StringFormat));
    }
} 
```

但是，当我将自定义用户控件放到堆栈面板上时，我应该怎么做？这个东西的具体格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:21.207

采用

```
Dictionary<Player, string> dropShapes = e.Data.GetData(typeof(Dictionary<Player, string>))
                as Dictionary<Player, string>; 
```

或者

```
Player dropShape = e.Data.GetData(typeof(Player)) 
```

# ruby-on-rails - 为什么在 SELECT 语句中使用“BINARY”？

> ID：11133257
> 
> 赞同：5
> 
> 时间：2012-06-21T07:13:36.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在`Vote`模型中，有一个验证：

```
validates_uniqueness_of :topic_id, :scope => [:user_id] 
```

它在开发日志中被翻译成以下SQL：

```
SELECT 1 AS one FROM `votes` WHERE (`votes`.`topic_id` = BINARY 2 AND `votes`.`user_id` = 1) LIMIT 1 
```

`BINARY`2（topic_id）前面哪里有a ？而且，这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T14:25:00.610

这是一种比较字节到字节而不是字符到字符的有效方法

例子

假设如果您有一个名为`products`record 的数据库表，其中包含`vin_number`（**某个列名**）的记录，其值为`vin_number`say`123456`

现在如果你运行这个

```
select * from products where vin= '123456' 
```

和

```
select * from products where vin = '123456 ' 
```

两者都会产生相同的结果

注意第二个选择中的空格

但是用二进制比较

```
select * from products where vin= BINARY '123456' 
```

或者

```
select * from producst where vin = BINARY '123456 ' 
```

逐字节匹配是针对字符对字符进行的

所以第一个会导致`valid`结果

和

第二个不会**有结果**

这里的[链接](http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html)将进一步帮助您

# asp.net-mvc - ASP MVC3 使用“返回视图（模型）”传递附加参数

> ID：11133261
> 
> 赞同：0
> 
> 时间：2012-06-21T07:13:47.900
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我非常需要通过 View 类传递 url 参数。这是代码：

```
 if (!ModelState.IsValid)
            {
                return View(model);
            } 
```

这不仅应该返回基于模型的视图，还应该将特定参数添加到 URL（参数不会更改视图详细信息，但需要它，因为它是少数自动生成的 SessionKeys 之一（用于查看应用程序的每个选项卡/窗口一个）和我除了作为参数传递之外，别无他法（它不能每次都生成，'cos 参数会改变；它不能是全局变量，因为它会在每次刷新时重置其值；它不能是静态的，因为静态是 evul 的）。

哦，这个动作是使用表单和提交按钮调用的，而不是 actionLink 或类似的东西。

EDIT1：我需要参数在刷新后保留在 URL 中，或者我需要一些其他形式的保持通过刷新/验证失败的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:24:35.037

利用

```
RedirectToAction("actionName","controller",
     new RouteValueDictionary(new {param1="value",param2="value2"}); 
```

或者您可以使用隐藏字段将值存储在页面中，然后在需要时将其传递下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:37:18.320

如果我对您的理解正确，您是否拥有在页面上生成 URL 时需要使用的数据？这只是你的 ViewModel 的一部分——或者至少它应该是，因为它是 View 渲染所需的数据。

您可以使用`ViewData`添加不属于您的视图模型的任何额外数据。或者，更好的是，将数据作为成员添加到其中。同样，如果具有不同视图模型的不同视图需要此数据，请添加一个 ViewModel 基类并从中派生，以便您可以共享该数据。

# installation - NSIS：默认安装路径

> ID：11133265
> 
> 赞同：4
> 
> 时间：2012-06-21T07:13:55.217
> 
> 标签：installation, nsis

如何向安装程序添加默认路径（例如 C:\Program Files...）。（我的意思是一个硬编码的变量，例如，它。）

提前谢谢大家...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:09:10.877

您可以将 设置`$INSTDIR`为任意值：

```
StrCpy $INSTDIR "c:\program files\my folder" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T12:13:13.343

不必将某些字符串复制到 $INSTDIR。

你可以简单地使用这个：

```
; The default installation directory
InstallDir "C:\Program Files\my_sw" 
```

# android - android ndk 编程：socket

> ID：11133267
> 
> 赞同：0
> 
> 时间：2012-06-21T07:14:07.037
> 
> 标签：android, linux, android-emulator, android-ndk

我是 ndk 编程的新手，并尝试制作一个项目。我的项目的目的是构建一个客户端，我可以使用按钮的侦听器来调用套接字编程的本机方法。并且，android 中已经有服务器运行。当我构建它并将其导出为 apk 时，一切运行正常。但是，不幸的是，在我安装 apk 并尝试运行它之后。系统提示：不幸的是，NativeSocket 已停止。以下是我的代码：NativeSocketActivity.java：

```
package gz.kaiwii;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class NativeSocketActivity extends Activity {
    /** Called when the activity is first created. */
    final Button button = (Button) findViewById(R.id.button1);
    /*static*/
    static{
        System.loadLibrary("NativeSocket");
    }
    /*native method stuff*/
    static native void start();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                start();

            }
        });
    }
} 
```

安卓.mk：

LOCAL_PATH := $(调用我的目录)

```
include $(CLEAR_VARS)

LOCAL_MODULE    := NativeSocket
### Add all source file names to be included in lib separated by a whitespace
LOCAL_SRC_FILES := NativeSocket.c

include $(BUILD_SHARED_LIBRARY) 
```

NativeSocket.c：

```
#include <string.h>
#include <jni.h>
/*  Make the necessary includes and set up the variables.  */

#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <sys/un.h>
#include <unistd.h>
#include <stdlib.h>

JNIEXPORT void JNICALL Java_gz_kaiwii_NativeSocketActivity_start
  (JNIEnv *env, jclass jclss)
{
    int sockfd;
    int len;
    struct sockaddr_un address;
    int result;
    char ch = 'A';

/*  Create a socket for the client.  */

    sockfd = socket(AF_UNIX, SOCK_STREAM, 0);

/*  Name the socket, as agreed with the server.  */

    address.sun_family = AF_UNIX;
    strcpy(address.sun_path, "server_socket");
    len = sizeof(address);

/*  Now connect our socket to the server's socket.  */

    result = connect(sockfd, (struct sockaddr *)&address, len);
/*
    if(result == -1) {
        perror("oops: client1");
        exit(1);
    }
    */

/*  We can now read/write via sockfd.  */

    write(sockfd, &ch, 1);
    read(sockfd, &ch, 1);
    /*
    printf("char from server = %c\n", ch);
    */
    close(sockfd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:36:09.377

在 setContentView ndk 错误后，您在 onCreate 方法中创建按钮引用永远不会强制关闭仅关闭虚拟机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:43:38.187

我不确定在这种情况下是否需要这样做 - 但是您是否尝试过添加`<uses-permission android:name="android.permission.INTERNET" />`到您的`AndroidManifest.xml`文件中？

还有什么是确切的错误/异常和崩溃时的调用堆栈？您可以在 DDMS 中或`adb logcat`在命令行中查看它。

另外 - 验证 C 函数的返回值并记录适当的错误消息。为此使用`<android/log.h>`。

# eclipse - Eclipse 中的 Subversion - 在存储库中使用未提交的工作切换分支

> ID：11133272
> 
> 赞同：1
> 
> 时间：2012-06-21T07:14:20.973
> 
> 标签：eclipse, svn

假设我有以下情况：

Trunk 是我的主要开发线，程序员在完成后会承诺。Branch V1.0 是我在发布 1.0 版本时创建的一个分支。

程序员正在主干上工作，但需要切换到分支才能修复错误。当切换回主干时，Subversion 会给我最新的 SVN 存储库，其中不包括最近的更改。因此，为了切换，他必须提交他所拥有的，否则更改将“丢失”。我知道它们仍然保存在本地存储库中，但这仍然意味着一旦他切换回它们，它们就会一一恢复。

我在这里错过了什么吗？

编辑：

现在我正在考虑以下几点：

每个程序员都会有自己的“私人”开发分支。他可以随时承诺到那里。当他完成他所写的内容时，他可以将它们合并到树干中。他重新开始下一个任务。如果在任何时候他需要修复某个其他版本中的错误，他可以提交到他自己的私有分支，获取 odl 版本并修复它。然后，在提交对修复的更改后，他可以轻松切换回自己的开发分支。

那行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:25:16.730

我认为颠覆不会像你描述的那样切换。一种解决方案是拥有两个工作区，一个用于分支，另一个用于主干，这样您就可以毫无问题地从一个工作区切换到另一个工作区。我知道这不是一个好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:42:15.947

考虑切换到更适合您的方法的版本控制工具。我自己的建议是[Mercurial](http://mercurial.selenic.com/wiki/Mercurial)，再加上[MercurialEclipse](http://javaforge.com/project/HGE)。我知道的唯一缺点是 Subversion 更适合存储二进制文件，而且 Mercurial 的子存储库不像 Subversion 的外部存储那样好用。

在 Mercurial 中，您的程序员将能够将他们的更改提交到他们的私有存储库，再次在本地合并和提交，然后将生成的更改推送到官方存储库，其他程序员将从那里将它们拉入他们自己的私有存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:06:15.700

用于此类目的的最佳解决方案是拥有两个独立的工作副本。一种用于主干，另一种用于分支。

# wpf - 绑定到边框子项的属性

> ID：11133273
> 
> 赞同：2
> 
> 时间：2012-06-21T07:14:23.467
> 
> 标签：wpf, binding, dependency-properties

我已经实现了我自己的简单版本的导航窗口，主要是因为导航窗口日志不能让我控制可以存在多少个孩子。所以我在窗口内使用边框并每次都改变它的孩子。作为孩子，我正在使用 UserControl。我想将我的 Window 的标题绑定到我当前孩子的 Title 属性。不知何故，我想不出办法来做到这一点。

主窗口 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Width="525"
    Height="350"
    Background="AliceBlue"
    Title="{Binding Path=Child.Title,
                    ElementName=borderContent}">
<DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
        <Button Content="&lt;-" x:Name="btnBack"  />
        <Button Content="->" x:Name="btnForward"  />
    </StackPanel>
    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal">
        <Button Content="1" Click="Button_Click_1" />
        <Button Content="2" Click="Button_Click_2" />
    </StackPanel>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Border x:Name="borderContent"  />
    </ScrollViewer>
</DockPanel> 
```

MainWindow 后面的代码：

```
using System;
using System.Windows;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            this.borderContent.Child = new ContentPage("Title 1");
        }

        private void Button_Click_2(object sender, RoutedEventArgs e)
        {
            this.borderContent.Child = new ContentPage("TITLE 2");
        }
    }
} 
```

用户控件 XAML：

```
<UserControl x:Class="WpfApplication1.ContentPage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <TextBlock Text="{Binding Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=Title}" />
</Grid> 
```

后面的用户控制代码：

```
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for Content.xaml
    /// </summary>
    public partial class ContentPage : UserControl
    {
        public string Title
        {
            get { return (string)this.GetValue(ContentPage.TitleProperty); }
            set { this.SetValue(ContentPage.TitleProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Title.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.Register("Title", typeof(string), typeof(ContentPage), new UIPropertyMetadata(string.Empty));

        public ContentPage(string Title)
        {
            this.Title = Title;
            InitializeComponent();

        }
    }
} 
```

不知何故，UserControl 内部的绑定也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:56:09.313

问题是 a 的`Child`属性`Border`不是 a`DependencyProperty`所以没有更改通知。每次更改时都必须`Binding`手动更新`Child`

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    this.borderContent.Child = new ContentPage("Title 1");
    UpdateTitleBindingExpression();
}

private void Button_Click_2(object sender, RoutedEventArgs e)
{
    this.borderContent.Child = new ContentPage("TITLE 2");
    UpdateTitleBindingExpression();
}
private void UpdateTitleBindingExpression()
{
    BindingExpressionBase beb = BindingOperations.GetBindingExpressionBase(this, Window.TitleProperty);
    if (beb != null)
    {
        beb.UpdateTarget();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:45:09.147

我不确定你为什么要做你正在做的事情，但关于你的问题：

将“来源”更改为“相对来源”

```
<Grid>
    <TextBlock Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=Title}" />
</Grid> 
```

那应该解决绑定问题

**编辑：**

当您真的想这样做时，您可以将borderContent 元素设为ContentControl 并改用Content 属性。由于这是一个 DependencyProperty，因此您绑定的将起作用：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Width="525"
        Height="350"
        Background="AliceBlue"
        Title="{Binding Content.Title, ElementName=borderContent}">
  <DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
      <Button Content="&lt;-" x:Name="btnBack"  />
      <Button Content="->" x:Name="btnForward"  />
    </StackPanel>
    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal">
      <Button Content="1" Click="Button_Click_1" />
      <Button Content="2" Click="Button_Click_2" />
    </StackPanel>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
      <ContentControl x:Name="borderContent"  />
    </ScrollViewer>
  </DockPanel>
</Window> 
```

# jsf - adf calendar :: 保存时验证

> ID：11133286
> 
> 赞同：0
> 
> 时间：2012-06-21T07:14:53.890
> 
> 标签：jsf, jdeveloper, oracle-adf

我正在开发 adf 日历事件表单，当用户单击任何日期时，主页会显示日历，出现一个小表单以输入事件详细信息。我做了大部分工作，但遇到了验证问题，我希望在用户保存表单时检查字段是否有值并包含非零的数字，如果表单为零，则将其保存到数据库中显示一条错误消息，我希望你明白了。

注意：我将 ActionListener = #{bindings.Commit.execute} 设置为保存按钮，我想知道执行提交时是否可以执行验证。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:27:57.670

你可以。这些验证应该添加到实体对象中。使用所有访问器等将其生成为 Java。在该类中，您可以添加验证器。

如果您愿意，您可以向 ADF 组件添加一个支持 bean 和一个值更改侦听器，并在那里进行一些检查。

但普遍的共识是应该将预提交验证添加到实体对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:35:50.503

创建一个 IMPL 文件并覆盖 DoDML。然后，您可以决定是否使用更改更新数据库。有关类似示例，请参阅

[http://docs.oracle.com/cd/E23943_01/web.1111/b31974/bcadveo.htm#CEGIBHBC](http://docs.oracle.com/cd/E23943_01/web.1111/b31974/bcadveo.htm#CEGIBHBC)

从实体 impl 您可以访问其属性以进行 0、1 比较

# quickfix - QuickFixJ：我需要知道 QuickFixJ 的限制和问题是什么

> ID：11133289
> 
> 赞同：0
> 
> 时间：2012-06-21T07:14:59.830
> 
> 标签：quickfix, fix-protocol

我需要知道 QuickFixJ 的限制和问题是什么，因为我想开始开发它并且我想知道是否有任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:58:02.807

这是 QuickfixJ 的 jira[页面](http://www.quickfixj.org/jira/browse/QFJ)。您可以查看其他人在 QuickfixJ 中发现的错误列表。但是会影响到你的问题取决于你对图书馆所做的事情。但是您确实拥有源代码，因此您可以根据需要进行调整。如果您想要一个更好的 FIX 引擎，您必须获得商业引擎而不是开源引擎。

# git - 最终将使用哪个版本的 git 文件：LOCAL、BASE 还是 REMOTE？

> ID：11133290
> 
> 赞同：180
> 
> 时间：2012-06-21T07:15:04.187
> 
> 标签：git, git-merge, meld

当 期间发生冲突时`git merge`，我打开一个名为[Meld](http://meldmerge.org/)的合并工具。它打开三个文件 LOCAL、BASE 和 REMOTE。正如我所读到的，LOCAL 是我的本地分支，BASE 是共同祖先，REMOTE 是要合并的分支。

现在我的问题是：最终将使用哪个版本的文件？是远程的吗？如果是这样，我可以根据需要编辑它吗，不管 BASE 分支中有什么？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-21T12:40:09.353

是中间那个：`BASE`。

实际上，不是共同祖先，而是冲突用和`BASE`标记的半成品合并。`>>>>``<<<<`

您可以在融合编辑窗口的顶部看到文件名。

[在此处查看屏幕截图](https://i.stack.imgur.com/IyhA4.png)

![融合基地](../Images/d9155fd33ffa74939847f4a0724ce967.png)

`BASE`您可以根据需要使用或不使用 meld 命令来编辑文件。
您还可以摆脱 meld 并使用您最喜欢的文本编辑器编辑文件。

*   `<<<< HEAD`和标记之间的代码`=====`是合并之前的本地文件之一。
*   `====`和之间的代码`>>>> <branch name>`是远程文件之一。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-09-19T09:36:30.483

Meld 有一个**隐藏的 3 路合并功能**，通过传入第 4 个参数激活：

```
meld $LOCAL $BASE $REMOTE $MERGED 
```

左右窗格以只读模式打开，因此您不会意外合并错误的方式。中间窗格显示合并的结果。对于冲突，它显示了基本版本，以便您可以看到所有重要的部分：中间是原始文本，两边是冲突的修改。最后，当您按下“保存”按钮时，将写入 $MERGED 文件 - 完全符合 git 的预期。

我使用的 ~/.gitconfig 文件包含以下设置：

```
[merge]
tool = mymeld
conflictstyle = diff3
[mergetool "mymeld"]
cmd = meld --diff $BASE $LOCAL --diff $BASE $REMOTE --diff $LOCAL $BASE $REMOTE $MERGED 
```

这将打开带有 3 个选项卡的融合，第 1 个和第 2 个选项卡包含我要合并的简单差异，默认情况下打开的第 3 个选项卡显示 3 路合并视图。

*现在，隐藏该功能的原因是它还不够完善。它现在非常有用，但融合作者 Kai Willadsen 指出需要熨平的皱纹很少。例如，没有 GUI 来启动 3 路合并模式，命令行语法有点神秘，等等。如果你会说 python 并且有一些时间在你手上 - 你知道该怎么做。*

编辑：在较新版本的 Meld 中，synax 略有变化。这是在评论中，但它属于答案。

meld 命令现在使用 --output 选项，因此上面代码段的最后一行应该是：

```
cmd = meld --diff $BASE $LOCAL --diff $BASE $REMOTE --diff $LOCAL $BASE $REMOTE --output $MERGED 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2013-08-02T07:33:32.267

涉及4个文件：

1.  **`$LOCAL`**您要合并的分支上的文件；*向您展示时不受合并过程的影响*

2.  **`$REMOTE`**您要合并的分支上的文件；*向您展示时不受合并过程的影响*

3.  **`$BASE`**$LOCAL 和 $REMOTE 的共同祖先，即。两个分支开始转移所考虑文件的点；*向您展示时不受合并过程的影响*

4.  **`$MERGED`**部分合并的文件，有冲突；*这是合并过程中唯一涉及的文件，实际上，从未向您显示`meld`*

* * *

该`$MERGED`文件是包含`<<<<<<`, `>>>>>>`, `=====`（并且，也许，`||||||`）标记（用于分隔冲突）的文件。*这*是您*手动*编辑以纠正冲突的文件。

*手动冲突编辑和视觉冲突编辑是在不同的文件上完成的，并呈现不同的信息。*

使用合并工具时（假设`meld`），其中看到的文件是：`$LOCAL`, `$BASE`, `$REMOTE`. 请注意，您看不到该`$MERGED`文件，尽管这是作为隐藏参数传递的，`meld`以便在此处写入编辑结果。

换句话说，在 中`meld`，您正在编辑中间的文件，即文件，并且您*手动*`$BASE`从左侧或右侧选择所有更改。这是一个干净的文件，没有被合并过程触及。唯一的问题是，当你保存时，你没有保存到文件中，而是在第四个隐藏参数中，即文件（你甚至看不到）。该文件不*包含*任何冲突或部分成功的合并，因为*它不是该**文件*。*`$BASE``meld``$MERGED``$BASE`**`$MERGED`***

 **在可视化编辑中，当向您呈现`$BASE`文件（而不是`$MERGED`文件）时，`git`基本上会丢弃所有尝试进行合并（如果需要，这些尝试在 $MERGED 文件中可见）并让您*完全*进行合并*从头开始*。

*底线是，在手动和视觉合并冲突中，您查看的不是同一个文件，而是最终结果写入同一个文件（即`$MERGED`文件）中。*

冲突的手动更正已完成，`$MERGED`因为`git` *无法*向您展示三个文件，因此它会压缩该文件中三个文件（`$LOCAL`, `$BASE`, `$REMOTE`）中的信息`$MERGED`。

但是可视化工具*可以*向您显示三个文件：它们向您显示`$LOCAL`, `$BASE`,`$REMOTE`文件。您正在从`$LOCAL`和`$REMOTE`文件中挑选更改，并将这些更改带入`$BASE`文件，完全重建甚至覆盖失败的合并尝试，即`$MERGED`文件。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-03-06T07:28:15.570

Cosmin 的解决方案有效，但*$BASE*文件已更新——不是*$MERGED*。这将更新*$MERGED*文件：

融合：`v1.8.4`

```
[merge]
  conflictstyle = diff3
  tool = mymeld
[mergetool "mymeld"]
  cmd = meld --auto-merge --output $MERGED $LOCAL $BASE $REMOTE --diff $BASE $LOCAL --diff $BASE $REMOTE 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-04-07T11:59:16.363

使用**Meld 1.7**，Tomek Bury 的解决方案不再起作用。

**默认设置**不满足我：

![默认设置](../Images/7ae8f30795725044d908d21ee19d4a0c.png)

而对于**Meld >=1.7**，我建议使用其他两种解决方案之一。

**第一个解决方案**：

```
 meld $LOCAL $BASE $REMOTE --auto-merge 
```

![第一个解决方案](../Images/8a0185d328585ba2a76b4cffb9579eee.png)

**第二种解决方案**：

```
 meld $LOCAL $MERGED $REMOTE 
```

![第二种解决方案](../Images/0903e634bd0e8d5af813746e1608ef77.png)

**.gitconfig**

将其复制并粘贴到您的`.gitconfig`文件中以获得上述解决方案：

```
[merge]
    tool = meld16
[mergetool "meld17"]
    # use this for Meld >=1.7
    # see http://stackoverflow.com/a/22911793/859591
    # second solution:
    cmd = meld $LOCAL $MERGED $REMOTE
    # first solution:
    #cmd = meld $LOCAL $BASE $REMOTE --auto-merge
[mergetool "meld16"]
    cmd = meld --diff $BASE $LOCAL --diff $BASE $REMOTE --diff $LOCAL $BASE $REMOTE --output $MERGED

[include]
    # requires git v1.7.10+
    path = .gitconfig.local 
```

`.gitconfig.local`如果您在多台机器上使用 .gitconfig ，请将其复制并粘贴到一个文件中，以便仅为这台机器设置 meld17 或 meld16：

```
# This is a host specific config file!
# Note that git 1.7.10+ is needed
# http://stackoverflow.com/a/9733277/859591
[merge]
    tool = meld17 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-03-22T17:11:34.267

我发现显示的默认文件都没有被保存。meld 显示`$LOCAL`，默认情况下`$REMOTE`。`$BASE`为了使它工作，我需要制作融合显示`$MERGED`而不是`$BASE`. 把它放在我的`~/.gitconfig`固定它为我：

```
[merge]
        tool = mymeld
[mergetool "mymeld"]
        cmd = meld "$LOCAL" "$MERGED" "$REMOTE" 
```

我正在使用 Arch，有：

```
$ git --version
git version 1.8.2
$ meld --version
meld 1.7.1 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-05T15:08:32.830

有关正确答案，请参阅 Saad 的答案。

在 Ubuntu 上使用 meld 1.8.1 我得到了

> 提供给 --diff 的参数数量错误

并在 $MERGED 之前添加 --output 为我修复它：

```
[mergetool "mymeld"]
cmd = meld --diff $BASE $LOCAL --diff $BASE $REMOTE --diff $LOCAL $BASE $REMOTE --output $MERGED 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-09-04T19:02:26.000

由于某种原因，最新版本的融合不显示为冲突添加的标记线 (<<<<<<<, =======, >>>>>>)。如果您想查看这些行，您应该安装 meld v 1.3.3 或更高版本。**

# java - 搜索和替换包中所有 java 文件中的文本

> ID：11133294
> 
> 赞同：0
> 
> 时间：2012-06-21T07:15:17.507
> 
> 标签：java, android

我在我的应用程序中使用了一些函数，我想用其他函数替换（以使其向后兼容） 我的问题：是否可以使用某些工具在包中的所有 java 文件中查找和替换某些特定文本，或者我必须在每个 java 文件上手动执行吗？我在包中有很多 java 文件。

例如：我想替换

```
getExternalCacheDir() 
```

有类似的东西

```
Environment.getExternalStorageDirectory + "/Android/data/<package_name>/cache/" 
```

我使用的 IDE 是 Eclipse Helios。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:18:58.960

在 Eclipse 中使用*Search - File...*搜索`getExternalCachDir()`in ，然后在*Search*视图`*.java`中右键单击，选择*Replace All...*，输入替换文本，然后单击 OK。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:25:02.443

在日食中，只要做

```
right click on function->Refector->Rename 
```

或者

> 选择方法 + 按 shift+alt+R

这将在整个项目中更改您的方法名称。**

# iphone - 在 ios 5.0 中出现 twitter 错误

> ID：11133295
> 
> 赞同：0
> 
> 时间：2012-06-21T07:15:19.080
> 
> 标签：iphone, objective-c, ios, ios5, twitter

在 iphone 中，我添加了 twitter 框架。

当我运行该项目时，它给了我错误，但同一个项目在我朋友的 Xcode 上运行良好

![在此处输入图像描述](../Images/40fb6cde22b84bcc0dd972bc8c205676.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:16:59.047

您需要添加 lib xml 头文件。按照本教程了解如何从[此处添加 lib xml 框架工作](http://welcome.totheinter.net/2008/03/11/adding-the-libxml-framework-to-your-iphone-app/)

转到目标-> 构建设置-> 搜索“标题搜索路径”并添加此行“/usr/include/libxml2”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:20:10.220

在您的项目目标 > 构建阶段添加 libxml 库

# jquery - 为嵌入 Google 地图信息窗口的缩略图调用 fancybox

> ID：11133297
> 
> 赞同：1
> 
> 时间：2012-06-21T07:15:23.310
> 
> 标签：jquery, google-maps, fancybox

我想在一些我想放入谷歌地图信息窗口的缩略图上使用fancybox。

我不确定这是否可能，因为我还没有看到这样做，但我应该认为这是可能的。我有以下内容：

```
$.each(value.items,function(k,mi){
  content_str+="<div class='info-window-item clearfix'><div class='info-window-image-box'>";
  content_str+="<a class='fancybox' href='" + mi.assets[0].full + "'><img  src='" + mi.assets[0].thumb +  "'></a></div>";
  content_str+="<div class='info-window-text'>";
  content_str+="<div class='my-info-window'>" + mi.header + "</div>";
  content_str+="<div class='info-window-detail'>" + mi.detail + "</div>";
  content_str+="</div>";
  content_str+="</div>";
  $(".fancybox").fancybox();    
});

infowindows[i]= new google.maps.InfoWindow({
  content: content_str,
  maxWidth: 600
}); 
```

但这不起作用。任何想法如何设置？

谢谢

# jquery - 如何使用 jQuery 基于表单元素中输入的搜索关键字打开网页

> ID：11133298
> 
> 赞同：-3
> 
> 时间：2012-06-21T07:15:28.333
> 
> 标签：jquery, html

我想使用 html`form`元素打开一个网页（html 文件），这样当我`keyword`在`text`输入字段中输入 a 并按下提交按钮时，应该加载一个以关键字作为文档/文件名的新页面。

例如 ：

我将输入一个名为的关键字`123`，然后按提交按钮。按下提交按钮后，页面应重定向到`123.html`

我希望这样做`jQuery`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:29:26.327

```
$("#submit_btn_id").click(function(){
    var page = $("#page_txtbox_id")+".html";
    location.href = page;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:38:45.803

尝试一个例子：http: **[//jsbin.com/ifipoy](http://jsbin.com/ifipoy)**

```
$(function() {
  $('#submit').bind('click', function(e){
    e.preventDefault();
    var val = $('#txt').val();
    if( val !== (null || "")){
      var page = val+ ".html";
      alert("loading the page : " + page + " in 2 seconds!");
      setTimeout(function() {
        window.location.href = page;
      }, 2000);      
    }
  });
}); 
```

# java - Java 中的工具提示管理器

> ID：11133301
> 
> 赞同：5
> 
> 时间：2012-06-21T07:15:43.903
> 
> 标签：java, swing, model-view-controller, tooltip

我正在实施 a`MVC`并且我想在我看来有 a `JToolTip`on a `JLabel`。我成功了，但现在我想设置解雇和初始计时器。

我阅读了[JToolTip](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToolTip.html)和[TollTipManager](http://docs.oracle.com/javase/7/docs/api/javax/swing/ToolTipManager.html)的 Javadoc 。我在 ToolTipManager 中找到了我想要的东西，但现在我不明白如何使用它。

`JToolTip`没有设置`ToolTipManager`并在他们说的文档中：

> 管理系统中的所有工具提示。

我真的不明白我应该如何使用`ToolTipManager`. 我的观点应该扩展`ToolTipManager`还是完全误导？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T07:18:06.787

`ToolTipManager`是单例。要使用它，您需要调用一个[`sharedInstance`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ToolTipManager.html#sharedInstance%28%29)返回此类实例的静态方法。

`ToolTipManager`管理所有工具提示 - 它是一个全局配置类，对 的更改`sharedInstance`将应用​​于应用程序中的每个工具提示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T07:18:16.007

下面是一个展示如何使用 ToolTipManager 的示例：

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.ToolTipManager;

public class TestTooltips {

    protected static void initUI() {
        ToolTipManager.sharedInstance().setInitialDelay(0);
        ToolTipManager.sharedInstance().setDismissDelay(500);
        JFrame frame = new JFrame("test");
        JLabel label = new JLabel("Label text");
        label.setToolTipText("My cool nice and fun tooltip");
        frame.add(label);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T07:24:35.830

不知道您尝试了什么以及您真正想要什么...，您是否通过以下代码成功

```
import java.awt.*;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.*;
import javax.swing.table.DefaultTableCellRenderer;

public class JScrollableToolTip extends JToolTip {

    private static final long serialVersionUID = 1L;
    private final MouseWheelListener mouseWheelListener;
    private final JTextArea tipArea;

    public JScrollableToolTip(final int rows, final int columns) {
        setLayout(new BorderLayout());
        mouseWheelListener = createMouseWheelListener();
        tipArea = new JTextArea(rows, columns);
        tipArea.setLineWrap(true);
        tipArea.setWrapStyleWord(true);
        tipArea.setEditable(false);
        LookAndFeel.installColorsAndFont(tipArea, "ToolTip.background",
                "ToolTip.foreground", "ToolTip.font");
        JScrollPane scrollpane = new JScrollPane(tipArea);
        scrollpane.setBorder(null);
        scrollpane.getViewport().setOpaque(false);
        add(scrollpane);
    }

    private MouseWheelListener createMouseWheelListener() {
        return new MouseWheelListener() {

            @Override
            public void mouseWheelMoved(final MouseWheelEvent e) {
                JComponent component = getComponent();
                if (component != null) {
                    tipArea.dispatchEvent(new MouseWheelEvent(tipArea, e.getID(),
                            e.getWhen(), e.getModifiers(), 0, 0, e.getClickCount(),
                            e.isPopupTrigger(), e.getScrollType(), e.getScrollAmount(),
                            e.getWheelRotation()));
                }
            }
        };
    }

    @Override
    public void addNotify() {
        super.addNotify();
        JComponent component = getComponent();
        if (component != null) {
            component.addMouseWheelListener(mouseWheelListener);
        }
    }

    @Override
    public void removeNotify() {
        JComponent component = getComponent();
        if (component != null) {
            component.removeMouseWheelListener(mouseWheelListener);
        }
        super.removeNotify();
    }

    @Override
    public void setComponent(JComponent c) {
        JComponent component = getComponent();
        if (component != null) {
            component.removeMouseWheelListener(mouseWheelListener);
        }
        super.setComponent(c);
    }

    @Override
    public void setTipText(final String tipText) {
        String oldValue = this.tipArea.getText();
        tipArea.setText(tipText);
        tipArea.setCaretPosition(0);
        firePropertyChange("tiptext", oldValue, tipText);
    }

    @Override
    public Dimension getPreferredSize() {
        return getComponent(0).getPreferredSize();
    }

    @Override
    public String getTipText() {
        return tipArea == null ? "" : tipArea.getText();
    }

    @Override
    protected String paramString() {
        String tipTextString = (tipArea.getText() != null ? tipArea.getText() : "");
        return super.paramString() + ",tipText=" + tipTextString;
    }

    //for testing only:
    public static void main(final String args[]) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    e.printStackTrace();
                }
                JFrame f = new JFrame("JScrollableToolTip");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setSize(300, 200);
                f.setLocationRelativeTo(null);
                ToolTipManager.sharedInstance().setInitialDelay(500);
                ToolTipManager.sharedInstance().setDismissDelay(10000);
                ToolTipManager.sharedInstance().mousePressed(null);
                JTable table = new JTable(50, 4) {

                    private static final long serialVersionUID = 1L;

                    @Override
                    public JToolTip createToolTip() {
                        JScrollableToolTip tip = new JScrollableToolTip(3, 20);
                        tip.setComponent(this);
                        return tip;
                    }
                };
                table.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {

                    private static final long serialVersionUID = 1L;

                    @Override
                    public Component getTableCellRendererComponent(JTable table, Object value,
                            boolean isSelected, boolean hasFocus, int row, int column) {
                        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
                        setToolTipText("Row " + row + " Column " + column
                                + "\nUsed to display a 'Tip' for a Component. "
                                + "Typically components provide api to automate the process of "
                                + "using ToolTips. For example, any Swing component can use the "
                                + "JComponent  setToolTipText method to specify the text for a standard tooltip.");

                        return this;
                    }
                });
                f.add(new JScrollPane(table));
                f.setVisible(true);
            }
        });
    }
} 
```

# jquery - 使用 yepnope/modernizr.load() 加载 HTML 片段

> ID：11133303
> 
> 赞同：1
> 
> 时间：2012-06-21T07:16:00.267
> 
> 标签：jquery, modernizr, yepnope

我有一系列 JS 和 CSS 文件，这些文件正在使用modernizr.load() 函数（这是yepnope.js）加载并注入到页面中。但我还想加载一些 HTML 片段，将它们放在脚本标签中，稍后在我的 javascript 代码中使用它们。

HTML 片段位于远程服务器上（例如：domain.com/template/default/tweetlist），但是当我加载此文件时，它会立即执行，从而导致错误。我可以禁用此执行（通过在 URL 前添加 !noexec）并停止错误，但我不知道内容的去向。回调不返回响应正文。

```
scriptArray.push({
    load: "noexec!domain.com/template/default/"+widgetType,
    callback: function (url, result) {
        console.log("Template loaded!");
        // code to handle response body should go here
    }
}) 
```

这是我到目前为止的代码，我现在被困在该注释行 (5) 上。

顺便说一句：这不是跨域问题。内容被加载并且 noexec 被禁用时的错误证明了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:11:33.490

我为我的问题找到了解决方案/破解方法。我将模板文件的内容包装在 javascript 中，这样 Modernizt 脚本就不会抛出错误，并且新的 var 在回调中可用。

这是 PHP 文件的（部分）：

```
$template = file_get_contents($requestFilepath);
$template = str_replace("\r","",$template);
$template = str_replace("\n","",$template);
$template = str_replace("\t","",$template);
$template = str_replace("\r\n","",$template);
$template = str_replace("\"","'",$template);

echo 'var template = "'.$template.'"'; 
```

这是 Javascript 部分：

```
$("body").append('<script type="text/html" id="tpl_'+templateName+'">'+template+'</script>'); 
```

# windows - 是否有任何用于 Windows Explorer FTP（在 Windows XP 下）的本机（Microsoft）API 用于访问登录凭据？

> ID：11133307
> 
> 赞同：1
> 
> 时间：2012-06-21T07:16:34.013
> 
> 标签：windows, ftp, explorer

重新开放的返工：

如何通过命令行或 PowerShell 或 VBScript 以编程方式访问 Windows Explorer FTP？THNX

原始问题：我一直使用 Windows 资源管理器作为 FTP。登录时我不小心单击了保存密码，这意味着当我连接到该特定服务器时，它会自动将我登录到该帐户。如何删除那些保存的凭据？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:24:34.180

通过单击开始按钮 、单击控制面板、单击用户帐户和家庭安全（或单击用户帐户，如果您连接到网络域）打开用户帐户，然后单击用户帐户。

在左窗格中，单击引用。

单击要删除的密码，然后单击删除。

# c# - 了解 String 的显式转换在 c# 和 Java 中产生不同的结果

> ID：11133309
> 
> 赞同：2
> 
> 时间：2012-06-21T07:16:47.287
> 
> 标签：c#, java

我为 Java 7 和 C#(.net 3.5) 编写了一段相同的（..similar？）代码，得到了一个令人困惑的输出。请帮助我理解这种行为：

爪哇：

```
public class strTest {
    public static void main(String [] s) {      
        String s1 = "abc";
        String s2 = new String(new char[] {'a', 'b', 'c'});
        System.out.println(s1 == s2);                      // false
        System.out.println(((Object)s1) == ((Object)s2));  // false
        System.out.println(s1.equals(s2));                 // true
    }
} 
```

输出：假假真

C＃：

```
namespace ConsoleApplication1
{
    class Program2
    {
        static void Main(string[] args)
        {
            String s1 = "abc";
            String s2 = new String(new Char[] {'a', 'b', 'c'});
            Console.WriteLine(s1 == s2);                     // true
            Console.WriteLine(((Object)s1) == ((Object)s2)); // false
            Console.WriteLine(s1.Equals(s2));                // true
        }
    }
} 
```

输出：真假真

我知道诸如字符串不变性和字符串池之类的概念，但我想我错过了更详细的说明。

在 java 中：为什么它可以使用 s1 引用的对象，但它会为 s2 创建一个新的 String 对象？这不是字符串池应该实现的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T07:22:01.293

您的问题有两个方面：创建对象的时间以及`==`比较的工作方式：

**对象创建**

就实习（“池”）而言 - 只有*常量*会自动实习。`Intern`您可以使用/实习其他字符串`intern`，但是当您只调用将*始终*创建一个新字符串的字符串构造函数时。（嗯，除了 .NET 中的一个奇怪的极端情况，但我们现在可以忽略它。）

所以在你的代码中，`s1`总是`s2`引用不同的对象。

**比较**

造成差异的原因是您使用`==`. C# 支持用户定义的运算符重载，并`String`像这样重载它：

```
public static bool operator ==(string x, string y) 
```

它比较字符串的内容而不是引用。因此，当您有两个类型的操作数时`string`，`x == y`最终会进行相等比较而不是身份比较。这就是为什么 C# 输出的第一行是`True`.

Java*没有*这种行为，这就是 prints 的原因`false`。

当操作数类型为`Object`时，C# 和 Java 都将使用引用相等，这就是为什么第二行在两种情况下都是 false 的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:22:25.670

我假设您在问为什么 C# 说 s1==s2？字符串比较以区分大小写的方式比较两个字符串的内容。由于两个字符串具有相同的内容，因此它们的比较返回 true。

在 Java 中，仅比较字符串引用，以确定两个变量是否引用相同的字符串。它们的内容没有进行比较。

至于池化，Java 和 C# 都对文字使用池化（在 C# 中实习）。以编程方式创建的字符串会产生两种语言的新实例，即使已存在池化实例也是如此。检查[String.Intern](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)的文档以获取与您类似的示例，其中实习字符串与生成的字符串是不同的实例，即使它们的值相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:23:59.483

字符串池仅用于文字。如果你说 String s1 = "abc"; 字符串 s2 = "abc"; 只会创建一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:25:55.240

java 语言规范要求，当您使用“new”关键字时，会创建一个实际的新对象，不作弊并返回内部缓存副本。

[当评估类实例创建表达式（第 15.9 节）导致类被实例化时，会显式创建一个新类实例。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

实习应用于表示为文字的字符串，但是当您明确使用新关键字时，语言必须使您成为一个实际的新的、不同的对象。

# visual-studio-2010 - 如何在 TFS 下的发布模式下禁用单元测试

> ID：11133318
> 
> 赞同：3
> 
> 时间：2012-06-21T07:17:08.860
> 
> 标签：visual-studio-2010, unit-testing

我想设置 TFS 来构建我的解决方案的调试和发布版本，但仅在调试模式下运行单元测试。我尝试在我的解决方案的配置属性中禁用测试项目的构建，但无济于事。令人讨厌的是，测试在发布模式下总是会失败，因为即使它们存在，它似乎也找不到文件......

所以有人知道如何让 TFS 仅在调试模式下运行单元测试（但仍然构建调试和发布模式）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:26:46.143

在 VS2010 中：

`Team Explorer`→ `Project`→ `Builds`→ 在您的“*构建定义*”中选择`Edit Build Definition`→`Process`

在这里你应该配置：

*   1.Required → Items to Build：选择这里的项目和配置来构建，即在您的情况下发布或调试
*   3.高级→禁用测试：真/假

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T05:27:45.380

我终于找到了怎么做。在 TFS 构建定义文件 (.proj) 中，在列出测试列表/DLL 的部分下，只需为每个项目添加 $(Configuration) 条件，如下所示：-

```
<ItemGroup>
    <MetaDataFile Condition="'$(Configuration)'=='Debug'" Include="$(BuildProjectFolderPath)/SubFolders/MyTestListFile.vsmdi">
      <TestList>My Test List Name</TestList>
    </MetaDataFile>

    <TestContainer Condition="'$(Configuration)'=='Debug'" Include="$(OutDir)\MyTests.dll" />
</ItemGroup> 
```

# sql - NWDS 7.0 中的 DB2 选择查询不返回任何结果

> ID：11133319
> 
> 赞同：0
> 
> 时间：2012-06-21T07:17:12.840
> 
> 标签：sql, db2

这次我遇到了另一个问题，它与 DB2 查询有关，在 NWDS 中运行。我使用的数据库规范是：

```
Database:-     EP1,
Schema:-       W2HCMSC,
Tablespace:-   W2HCMTS,
Table:-        TESTEMPLOYEE,
Cloumns:-      ZONE, Workshop, Year, Employee Name, Designation, DOB. 
```

带有值的数据库快照是我要运行的选择语句，它是带有 where 子句的选择查询，但它不返回任何行。这些是详细信息：

```
select * from w2hcmsc.testemployee 
```

（返回 4 行）

```
select * from w2hcmsc.testemployee where 'w2hcmsc.Zone' = '1' 
```

（0 行返回）

```
select * from w2hcmsc.testemployee where 'Zone' = 1 
```

（SQL0420N 在函数“DECFLOAT”的字符串参数中发现无效字符。SQLSTATE=22018）

```
select * from w2hcmsc.testemployee where zone = 1 
```

SQL0206N “ZONE”在使用它的上下文中无效。SQLSTATE=42703

```
select * from w2hcmsc.testemployee where Zone = 1 
```

SQL0206N “ZONE”在使用它的上下文中无效。SQLSTATE=42703

```
select * from w2hcmsc.testemployee where 'Zone' = '1' 
```

（选择了 0 条记录）。

请告诉我为什么带有 where 子句的选择查询不起作用。我必须以任何不同的方式编写它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:24:42.607

尝试列的完全限定名称：

```
select * from w2hcmsc.testemployee where w2hcmsc.testemployee.ZONE = 1 
```

或为表创建别名并使用它：

```
select * from w2hcmsc.testemployee AS t1 where t1.ZONE = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:58:14.383

您的列名似乎是混合大小写。避免在列名中使用混合大小写通常是一个好主意——虽然 DB2 支持这一点，但它会产生诸如此类的令人头疼的问题。

解决方案是使用双引号（而不是单引号）引用您的列名：

```
select * from w2hcmsc.testemployee where "Zone" = 1 
```

或者，使用表相关名称：

```
select * from w2hcmsc.testemployee as t1 where t1."Zone" = 1 
```

# c# - 将视频分享到 Facebook 墙

> ID：11133321
> 
> 赞同：1
> 
> 时间：2012-06-21T07:17:14.780
> 
> 标签：c#, html, facebook, youtube, ooyala

嗨，我们在网站上使用第三方工具 'ooyala' 来处理我们的视频，Ooyala 还提供了类似的功能，可以通过 ooyala 播放器将视频分享到 Facebook，类似于 YouTube，我们使用在单个（视频）页面上显示所有视频，用户可以观看不同的视频，但页面未回发。现在的问题是，当我们要用这种架构将视频分享到 Facebook 墙时，Ooyala 播放器有预定义的分享标签（类似的其他视频播放器也有将视频分享到 Facebook 墙的标签）。标签用于示例：

```
<link rel='video_src' href='http://player.ooyala.com/player.swf?embedCode=BxZWw2NTruU9_ZvZffjOtKxWE19RtyQq&keepEmbedCode=true'/>     
<meta name='title' content="Wozniack&apos;s Big Deal" />
<meta name='description' content="Sports Business Analyst,Looks into Caroline Wozniacki&apos;s new sponorship deal." />
<link rel='image_src' href='http://ak.c.ooyala.com/BxZWw2NsTruU9_ZvZffjOtKxWE1df9RtyQq/4DSSlmQqiwve8yKn5hMDoxOjI0O1edhIv' />    
<title id="PageTitle">Video</title>    
<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" name="viewport"/>     
<meta name="medium" content="video" /> 
```

**问题是，页面标题中的这些预定义标签在页面加载时加载一次，我们如何在不回发页面的情况下更改这些标签。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:12:49.027

我认为每个视频都必须有一个单独的页面。如果您宁愿每次都使用 Javascript 来更改属性（这不仅很棘手，而且很混乱），我想您可以。

# android - 带有圆角的 ImageView 通过另一个 Image 作为背景

> ID：11133335
> 
> 赞同：4
> 
> 时间：2012-06-21T07:18:46.357
> 
> 标签：android, imageview, layer

我有两个图像 - 1）一个矩形，显示实际内容和 2）一个带有圆形透明角的白色图像

是否可以将图像 1 放在图像 2 中，保持其大小但使其与 2 的形状相同？

基本上我希望图像 2 是图像 1 的容器。

我已经尝试过图层和插图可绘制对象，但图像 1 一直与图像 2 重叠。

提前致谢！

**更新 1：**

这是我的 ImageView xml 部分：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="72dp"
android:orientation="horizontal">

    <ImageView
        android:id="@+id/avatar"
        android:src="@drawable/mainImg"
        android:background="@drawable/backgroundImg"
        android:layout_width="56dp"
        android:layout_height="56dp"
        android:layout_gravity="center"
        android:contentDescription="@string/desc" />

</LinearLayout> 
```

**更新 2：**

以下是三张图片的链接 1) 背景 2) 主图 3) 预期结果（带圆角）

[ImageShack 上传](http://imageshack.us/g/707/backgroundmi.png/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:29:12.207

一个简单的解决方案是只为你的 image2 使用一个`ImageView`with `android:background`，你说它是容器，而`android:src`对于 image1，它是实际的图像：

```
<ImageView
    ...
    android:background="@drawable/image2"
    android:src="@drawable/image1"
    android:padding="2dp" /> 
```

只需添加一个填充，以指定您希望在“框架”和实际“图片”之间留下多少空白空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:07:35.530

[我不得不用我最近制作](https://play.google.com/store/apps/details?id=com.makario.bitcam)的一个应用程序来处理这个问题。请注意，在第一个和第二个屏幕截图中，缩略图都是加框的。

为此，我将图像和框架堆叠在 FrameLayout 中。首先我布局实际图像（@id/thumbnail），然后是框架（@id/frame）。

需要注意的重要事项是缩略图使用的 scaleType 为“fitXY”，并且有轻微的边距，因此角落不会在框架的圆角后面伸出。

这仅在您的框架边框不透明时才有效，因此您可能必须使您的框架边缘与背景颜色相同。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/thumbnail_size"
    android:layout_height="@dimen/thumbnail_size"
    android:layout_margin="5dp"
    android:gravity="center"
    android:orientation="vertical"
     >

    <ImageView
        android:id="@+id/thumbnail"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_margin="4dp"
        android:scaleType="fitXY" />

    <ImageView
        android:id="@+id/frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/pixel_frame"
        android:scaleType="fitXY" />

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T07:30:27.650

使用 ImageButton.. 将背景设置为 Image1，将 Image src 设置为 Image2

```
 <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/image2"
            android:src="@drawable/image1" /> 
```

# javascript - 无法让 javascript 中的 setTimeout 正常工作

> ID：11133338
> 
> 赞同：2
> 
> 时间：2012-06-21T07:19:02.463
> 
> 标签：javascript

我在javascript中有一个函数：

```
function test(){
...
    if (){
        setTimeout(test(), 1000);
    }
} 
```

根据手册，我可以这样称呼：

```
setTimeout(test(), 1000); 
```

事实上，它会调用，但不要等待 1s。所以我尝试像下面这样使用它并且它有效。

```
setTimeout(function(){test();}, 1000); 
```

任何人都可以向我解释这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:20:38.243

哪个手册？调用`test()`将调用返回的东西`test()`并将其传递给`setTimeout`，因此除非您`test()`返回一个函数，否则这将不起作用。

您可以使用 anon 函数替代方案，也可以像`setTimeout(test, 1000)`没有`()`.

您可能会发现另一个不好的用法是将其作为字符串传递，例如：

`setTimeout("test()", 1000)`

不惜一切代价避免这种情况，因为这相当于打电话`eval`，你迟早会遇到范围问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:22:23.240

你应该打电话给

```
setTimeout(test, 1000); 
```

而不是

```
setTimeout(test(), 1000); 
```

也就是说，你要在1000ms后调用的函数是test，而不是调用test的结果！

之所以

```
setTimeout(function(){test();}, 1000); 
```

起作用的是，你在1000ms后调用的函数是调用test的函数，它基本上是`test`它自己。对于 lambda 微积分极客来说，这称为 eta-reduction。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:23:03.307

`setTimeout`需要一个函数引用。当你通过它时：

```
setTimeout(test(), 1000); 
```

那就是将调用函数的*结果*传递给. 相反，将引用传递给它以测试自身：`test``setTimeout`

`setTimeout(test, 1000);`

想看一些花哨的东西吗？

```
function test () {
    var what_are_you = 'a closure';
    return function () {
       alert('I am '+what_are_you+'!')
    }
}
setTimeout(test(), 1000); 
```

在这里，我从函数调用返回一个函数引用。有关更多信息，请参阅下面的文章！

**文档**

*   `setTimeout`在 MDN - [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)
*   关于函数、函数参考的文章 - [http://jszen.blogspot.com/2008/07/function-reference-vs-function-call.html](http://jszen.blogspot.com/2008/07/function-reference-vs-function-call.html)

# python - 以二叉树方式在pyparsing中解析复杂的逻辑表达式

> ID：11133339
> 
> 赞同：19
> 
> 时间：2012-06-21T07:19:09.190
> 
> 标签：python, pyparsing

我正在尝试解析如下所示的复杂逻辑表达式；

```
x > 7 AND x < 8 OR x = 4 
```

并将解析后的字符串作为二叉树获取。对于上述表达式，预期的解析表达式应如下所示

```
[['x', '>', 7], 'AND', [['x', '<', 8], 'OR', ['x', '=', 4]]] 
```

“OR”逻辑运算符的优先级高于“AND”运算符。括号可以覆盖默认优先级。更一般地说，解析后的表达式应该是这样的；

```
<left_expr> <logical_operator> <right_expr> 
```

另一个例子是

```
input_string = x > 7 AND x < 8 AND x = 4
parsed_expr  = [[['x', '>', 7], 'AND', ['x', ',', 8]], 'AND', ['x', '=', 4]] 
```

到目前为止，我想出了这个简单的解决方案，遗憾的是它无法以二叉树的方式生成解析表达式。operatorPrecedence 在这里似乎没有帮助我，因为与前面的示例中连续存在相同的逻辑运算符。

```
import pyparsing as pp
complex_expr = pp.Forward()
operator = pp.Regex(">=|<=|!=|>|<|=").setName("operator")
logical = (pp.Keyword("AND") | pp.Keyword("OR")).setName("logical")
vars = pp.Word(pp.alphas, pp.alphanums + "_") | pp.Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")
condition = (vars + operator + vars)
clause = pp.Group(condition ^ (pp.Suppress("(") + complex_expr + pp.Suppress(")") ))

expr = pp.operatorPrecedence(clause,[
                            ("OR", 2, pp.opAssoc.LEFT, ),
                            ("AND", 2, pp.opAssoc.LEFT, ),])

complex_expr << expr
print complex_expr.parseString("x > 7 AND x < 8 AND x = 4") 
```

非常感谢任何建议或指导。

`BNF`对于表达式（不带括号）可以是

```
<expr>       -> <expr> | <expr> <logical> <expr>
<expr>       -> <opnd> <relational> <opnd>
<opnd>       -> <variable> | <numeric>
<relational> -> <'>'> | <'='> | <'>='> | <'<='> | <'!='> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T08:59:44.663

*注意：`operatorPrecedence`不推荐使用 pyparsing 的方法，取而代之的是方法名称`infixNotation`。*

尝试改变：

```
expr = pp.operatorPrecedence(clause,[ 
                            ("OR", 2, pp.opAssoc.LEFT, ), 
                            ("AND", 2, pp.opAssoc.LEFT, ),]) 
```

至：

```
expr = pp.operatorPrecedence(condition,[ 
                            ("OR", 2, pp.opAssoc.LEFT, ), 
                            ("AND", 2, pp.opAssoc.LEFT, ),]) 
```

operatorPrecedence 的第一个参数是要与运算符一起使用的原始操作数 - 无需在括号中包含您的 complexExpr - operatorPrecedence 将为您执行此操作。由于您的操作数实际上是另一个更深入的比较，您可能会考虑更改：

```
condition = (expr + operator + expr) 
```

至：

```
condition = pp.Group(expr + operator + expr) 
```

使 operatorPrecedence 的输出更容易处理。通过这些更改，解析`x > 7 AND x < 8 OR x = 4`给出：

```
[[['x', '>', '7'], 'AND', [['x', '<', '8'], 'OR', ['x', '=', '4']]]] 
```

它识别 OR 的更高优先级并首先对其进行分组。（您确定要这种 AND 和 OR 优先顺序吗？我认为传统的顺序是相反的，如[本维基百科条目](http://en.wikipedia.org/wiki/Order_of_operations)所示。）

我想你也在问为什么 pyparsing 和 operatorPrecedence 不返回嵌套二进制对的结果，也就是说，你期望解析“A and B and C”会返回：

```
[['A', 'and', 'B'] 'and', 'C'] 
```

但你得到的是：

```
['A', 'and', 'B', 'and', 'C'] 
```

这是因为 operatorPrecedence 使用重复而不是递归来解析相同优先级的重复操作。请参阅与您的问题非常相似的[这个问题，其答案包括将重复解析树转换为更传统的二叉解析树的解析操作。](https://stackoverflow.com/questions/4571441/recursive-expressions-with-pyparsing/4589920#4589920)您还可以在 pyparsing wiki 页面上找到[使用 operatorPrecedence 实现的示例布尔表达式解析器。](http://pyparsing.wikispaces.com/file/view/simpleBool.py)

**编辑**：为了澄清，我建议您将解析器减少到：

```
import pyparsing as pp

operator = pp.Regex(">=|<=|!=|>|<|=").setName("operator")
number = pp.Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")
identifier = pp.Word(pp.alphas, pp.alphanums + "_")
comparison_term = identifier | number 
condition = pp.Group(comparison_term + operator + comparison_term)

expr = pp.operatorPrecedence(condition,[
                            ("AND", 2, pp.opAssoc.LEFT, ),
                            ("OR", 2, pp.opAssoc.LEFT, ),
                            ])

print expr.parseString("x > 7 AND x < 8 OR x = 4") 
```

如果您还想添加对 NOT 的支持，则如下所示：

```
expr = pp.operatorPrecedence(condition,[
                            ("NOT", 1, pp.opAssoc.RIGHT, ),
                            ("AND", 2, pp.opAssoc.LEFT, ),
                            ("OR", 2, pp.opAssoc.LEFT, ),
                            ]) 
```

在某些时候，您可能希望`comparison_term`使用更完整的算术表达式来扩展 的定义，并使用它自己的定义进行`operatorPrecedence`定义。我建议这样做，而不是创建一个怪物`opPrec`定义，因为您已经提到了`opPrec`. 如果您仍然遇到性能问题，请查看`ParserElement.enablePackrat`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T09:11:45.513

让我建议这种解析方法，它直接来自 Peter Norvig 在 udacity 的计算机程序设计课程（并根据您的需要进行了调整）。

```
from functools import update_wrapper
from string import split
import re

def grammar(description, whitespace=r'\s*'):
    """Convert a description to a grammar.  Each line is a rule for a
    non-terminal symbol; it looks like this:
        Symbol =>  A1 A2 ... | B1 B2 ... | C1 C2 ...
    where the right-hand side is one or more alternatives, separated by
    the '|' sign.  Each alternative is a sequence of atoms, separated by
    spaces.  An atom is either a symbol on some left-hand side, or it is
    a regular expression that will be passed to re.match to match a token.

    Notation for *, +, or ? not allowed in a rule alternative (but ok
    within a token). Use '\' to continue long lines.  You must include spaces
    or tabs around '=>' and '|'. That's within the grammar description itself.
    The grammar that gets defined allows whitespace between tokens by default;
    specify '' as the second argument to grammar() to disallow this (or supply
    any regular expression to describe allowable whitespace between tokens)."""
    G = {' ': whitespace}
    description = description.replace('\t', ' ') # no tabs!
    for line in split(description, '\n'):
        lhs, rhs = split(line, ' => ', 1)
        alternatives = split(rhs, ' | ')
        G[lhs] = tuple(map(split, alternatives))
    return G

def decorator(d):
    def _d(fn):
        return update_wrapper(d(fn), fn)
    update_wrapper(_d, d)
    return _d

@decorator
def memo(f):
    cache = {}
    def _f(*args):
        try:
            return cache[args]
        except KeyError:
            cache[args] = result = f(*args)
            return result
        except TypeError:
            # some element of args can't be a dict key
            return f(args)
    return _f

def parse(start_symbol, text, grammar):
    """Example call: parse('Exp', '3*x + b', G).
    Returns a (tree, remainder) pair. If remainder is '', it parsed the whole
    string. Failure iff remainder is None. This is a deterministic PEG parser,
    so rule order (left-to-right) matters. Do 'E => T op E | T', putting the
    longest parse first; don't do 'E => T | T op E'
    Also, no left recursion allowed: don't do 'E => E op T'"""

    tokenizer = grammar[' '] + '(%s)'

    def parse_sequence(sequence, text):
        result = []
        for atom in sequence:
            tree, text = parse_atom(atom, text)
            if text is None: return Fail
            result.append(tree)
        return result, text

    @memo
    def parse_atom(atom, text):
        if atom in grammar:  # Non-Terminal: tuple of alternatives
            for alternative in grammar[atom]:
                tree, rem = parse_sequence(alternative, text)
                if rem is not None: return [atom]+tree, rem  
            return Fail
        else:  # Terminal: match characters against start of text
            m = re.match(tokenizer % atom, text)
            return Fail if (not m) else (m.group(1), text[m.end():])

    # Body of parse:
    return parse_atom(start_symbol, text)

Fail = (None, None)

MyLang = grammar("""expression => block logicalop expression | block
block => variable operator number
variable => [a-z]+
operator => <=|>=|>|<|=
number => [-+]?[0-9]+
logicalop => AND|OR""", whitespace='\s*')

def parse_it(text):
    return parse('expression', text, MyLang)

print parse_it("x > 7 AND x < 8 AND x = 4") 
```

输出：

```
(['expression', ['block', ['variable', 'x'], ['operator', '>'], ['number', '7']], ['logicalop', 'AND'], ['expression', ['block', ['variable', 'x'], ['operator', '<'], ['number', '8']], ['logicalop', 'AND'], ['expression', ['block', ['variable', 'x'], ['operator', '='], ['number', '4']]]]], '') 
```

# vb.net - 在 vb.net 中将字符串转换为双精度

> ID：11133342
> 
> 赞同：1
> 
> 时间：2012-06-21T07:19:27.157
> 
> 标签：vb.net, datatable

数据表包含名为 Fld_primary 的列。此列包含 0.00 之类的值，它是 mysql 表中的双数据类型。我想将该数据表值存储在双变量中。当我转换为双数据类型时总是出错。

```
my code
------- 
Dim ds5 As dataset1.DTSUMDataTable = TA5.GetData(users)

Dim dttot As Double
dttot = CType(ds5("fld_primary").ToString, Double) 
```

## 错误

```
 Conversion from string "fld_primary" to type 'Integer' is not valid. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:10:03.503

你可以使用[**`Convert`**](http://msdn.microsoft.com/en-us/library/system.convert.aspx)类转换它。

```
Dim dttot As Double = Convert.ToDouble(ds5("fld_primary")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T07:47:06.337

编辑@ 3:01 AM，使用最新的屏幕截图。

有时我发现自己会根据人们的答案再次猜测某些代码，但我继续并花时间检查他们都使用的代码是否有效： ![在此处输入图像描述](../Images/c784d74b36dbbba44c3450af7530c89a.png)

如您所见，该代码是行不通的，因此我使用了您在底部看到的正确代码来引用一列。

但是，如果您希望获得单个单元格，请使用下面使用 foreach 循环的代码块（其余的是我的基本设置，向您展示它是如何工作的）：

![在此处输入图像描述](../Images/8f799fe97d87cad026ef8e84ab9b5b69.png)

“Y”将等于数据表单元格的值，您可以使用 Double.Parse() 方法对其进行转换：

```
Dim y = Double.Parse(zDataRow("cat").ToString()) 
```

请注意，如果您有多行，您会注意到 y 的值会随着它穿过所有行而发生变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:25:22.430

您最好使用“Double.TryParse”转换方式，因为这可以更好地处理任何错误，并且如果成功与否只返回一个布尔值，使用“解析”将抛出一个异常优雅的异常。

```
Dim dub as Double = 0
Double.TryParse("Your String Here", dub) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T07:22:23.957

您的错误实际上是：`ds5`需要一个整数作为参数，因此 using`ds5("fld_primary")`在您的代码中无效。或许你可以试试`ds5(0)("fld_primary")`。

修复后，使用

```
dttot = Double.Parse(whatever_string_you_should_put_here) 
```

如果您不能确保您的字符串**必须**是有效的`double`，请使用`Double.TryParse`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T07:25:06.843

尝试使用`Double.TryParse(text,value)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-02T19:39:05.023

尝试使用这个：

```
 For a=0 to yourgridview.rows.count-1
Yourgridview.rows(a).cells(targetcolumnnumber).value=cdbl(Yourgridview.rows(a).cells(targetcolumnnumber).value)
Next 
```

# objective-c - 在objective-c中添加字符串中的整数

> ID：11133343
> 
> 赞同：2
> 
> 时间：2012-06-21T07:19:28.663
> 
> 标签：objective-c, string, floating-point, integer, add

例如，我在两个字符串中有“$100”和“$50”，我想将它们相加以获得输出“$150”。我知道一般方法（将它们转换为整数并添加它们），但我正在寻找一种更短的方法，它不会调用很多函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:35:56.823

您可以使用[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)将字符串解析为 NSNumber，对它们求和，然后再转换回 String：

```
NSString *strNum1 = "$100";
NSString *strNum2 = "$150";

NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterCurrencyStyle];
NSNumber * myFirstNumber = [f numberFromString:strNum1];
NSNumber * mySecNumber = [f numberFromString:strNum2];

NSNumber *sum = [NSNumber numberWithFloat:([myFirstNumber floatValue] + [mySecNumber floatValue])];
NSString * strSum = [f stringFromNumber:sum]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:27:28.793

```
float result = [[fiftyBucks substringFromIndex:1] floatValue] + [[hundredBucks substringFromIndex:1] floatValue]; 
```

或使用 NSScanner，但它会更长一点，但更可靠/安全：

```
float fifty, hundred, result;
[[NSScaner scannerWithString: fiftyBucks] scanFloat: &fifty];
[[NSScaner scannerWithString: hundredBucks] scanFloat: &hundred];
result = fifty + hundred; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:58:09.920

我认为您最好将价格存储在 CGfloat 中。

显示字符串“$100”是前端任务，计算价格总和是后端任务。这两个应该分开。

如果您将价格存储为 CGFloat，您可以简单地进行数学运算。当你想显示那个字符串时，juz 实现一个方法。

```
- (NSString *)priceLabel:(CGFloat) _price {
     return [NSString stringWithFormat: @"$.1f", _price];
} 
```

此外，在编写代码时不要害怕制作 Front-end Helper 模型。我把所有这些次要方法都放在这个模型中作为一个类方法。无论您需要在哪里重用此方法，您都可以简单地导入模型。

# java - 找出在 sdcard 中保存解压缩文件所需的大小

> ID：11133344
> 
> 赞同：0
> 
> 时间：2012-06-21T07:19:30.380
> 
> 标签：java, android, android-sdcard, unzip

这是我的要求。我需要解压缩一个 zip 文件并将其存储在 sdcard 中。我现在已经使用[此处提供的示例将文件解压缩并存储在 sdcard 中。](https://stackoverflow.com/a/7697493/603744)它工作正常。现在在将文件保存到 sdcard 之前，我需要确定 sdcard 中是否有可用空间，以便我可以毫无问题地提取我的 zip 文件。我发现这个[例子](https://stackoverflow.com/q/4040912/603744)有助于找出 sdcard 中文件夹的大小。所以我用它来找出解压缩文件的大小。

但这是我的问题。众所周知，在提取 zip 文件时，我们可能需要一点额外空间来保存文件，因为解压缩文件的大小与 zip 文件本身不同，并且需要更多空间。这是我的问题。

1.  如何在 SDCard 中找到可用空间？
2.  有没有办法在解压缩之前识别解压缩文件所需的总空间，以便我可以在 SD 卡中的可用空间不足时通知用户？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:00:12.827

您可以迭代`ZipEntry`文件中的 '，在每个上调用[getSize()](http://developer.android.com/reference/java/util/zip/ZipEntry.html#getSize%28%29)并将其相加以获得近似值。但是，这并不总是保证可用（它可能返回-1）。再加上实际 zi​​p 文件的大小，可能会四舍五入到兆字节。您可以使用类似这样的方法来获取外部存储上的可用空间：

```
StatFs stats = new StatFs(Environment.getExternalStorageDirectory().getAbsolutePath());
long free = ((long) stats.getBlockSize()) * stats.getAvailableBlocks(); 
```

# filter - hbase 扫描时间范围返回旧版本

> ID：11133345
> 
> 赞同：3
> 
> 时间：2012-06-21T07:19:33.277
> 
> 标签：filter, hbase, version, database-scan

我有一个关于使用 timerange 进行 hbase 扫描的问题。我创建了一个“测试”表，它有一个系列“cf”和一个版本，在我将 4 行数据放入该表中后，并使用时间范围扫描该表，但是，我在时间范围内得到一个旧版本行。

例如：

```
 create 'test',{NAME=>'cf',VERSIONS=>1}
 put 'test','row1','cf:u','value1' 
 put 'test','row2','cf:u','value2'
 put 'test','row3','cf:u','value3'
 put 'test','row3','cf:u','value4' 
```

然后我扫描这个表，以下是输出：

```
 hbase(main):008:0> scan 'test'
 ROW                                      COLUMN+CELL                                                                                                          
 row1                                    column=cf:u, timestamp=1340259691771, value=value1                                                                   
 row2                                    column=cf:u, timestamp=1340259696975, value=value2                                                                   
 row3                                    column=cf:u, timestamp=1340259704569, value=value4 
```

没错，row3 有最新版本。

但是，如果我使用 timerange 扫描它，我会得到：

```
 hbase(main):010:0> scan 'test',{TIMERANGE=>[1340259691771,1340259704569]}
  ROW                                      COLUMN+CELL                                                                                                          
  row1                                    column=cf:u, timestamp=1340259691771, value=value1                                                                   
  row2                                    column=cf:u, timestamp=1340259696975, value=value2                                                                   
  row3                                    column=cf:u, timestamp=1340259701085, value=value3 
```

它返回 row3 旧版本，但这张表我设置版本等于 1

如果我增加 maxtimestamp ，我得到：

```
 hbase(main):011:0> scan 'test',{TIMERANGE=>[1340259691771,1340259704570]}
  ROW                                      COLUMN+CELL                                                                                                          
  row1                                    column=cf:u, timestamp=1340259691771, value=value1                                                                   
  row2                                    column=cf:u, timestamp=1340259696975, value=value2                                                                   
  row3                                    column=cf:u, timestamp=1340259704569, value=value4 
```

0.0330 秒内 3 行

没错，我能理解。

我想要的是在一个时间范围内扫描一个表，它只返回最新版本，我知道有一个 TimestampsFilter，但是该过滤器只支持特定的时间戳，而不是时间范围。

有没有办法在一个时间范围内扫描一个表并且只返回最新的版本？

我尝试编写自己的时间范围过滤器，以下是我的代码。

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
import java.util.ArrayList;

import org.apache.hadoop.hbase.KeyValue;
import org.apache.hadoop.hbase.filter.Filter;
import org.apache.hadoop.hbase.filter.FilterBase;
import org.apache.hadoop.hbase.filter.ParseFilter;

import com.google.common.base.Preconditions;  

public class TimeRangeFilter extends FilterBase {

private long minTimeStamp = Long.MIN_VALUE;
private long maxTimeStamp = Long.MAX_VALUE;

public TimeRangeFilter(long minTimeStamp, long maxTimeStamp) {
    Preconditions.checkArgument(maxTimeStamp >= minTimeStamp, "max timestamp %s must be big than min timestamp %s", maxTimeStamp, minTimeStamp);
    this.maxTimeStamp = maxTimeStamp;
    this.minTimeStamp = minTimeStamp;
}

@Override
public ReturnCode filterKeyValue(KeyValue v) {
    if (v.getTimestamp() >= minTimeStamp && v.getTimestamp() <= maxTimeStamp) {
        return ReturnCode.INCLUDE;
    } else if (v.getTimestamp() < minTimeStamp) {
        // The remaining versions of this column are guaranteed
        // to be lesser than all of the other values.
        return ReturnCode.NEXT_COL;
    }
    return ReturnCode.SKIP;
}

public static Filter createFilterFromArguments(ArrayList<byte[]> filterArguments) {
    long minTime, maxTime;
    if (filterArguments.size() < 2)
        return null;
    minTime = ParseFilter.convertByteArrayToLong(filterArguments.get(0));
    maxTime = ParseFilter.convertByteArrayToLong(filterArguments.get(1));
    return new TimeRangeFilter(minTime, maxTime);
}

@Override
public void write(DataOutput out) throws IOException {
    // TODO Auto-generated method stub
    out.writeLong(minTimeStamp);
    out.writeLong(maxTimeStamp);
}

@Override
public void readFields(DataInput in) throws IOException {
    // TODO Auto-generated method stub
    this.minTimeStamp = in.readLong();
    this.maxTimeStamp = in.readLong();
} 
```

}

我将此 jar 添加到 hbase-env.sh 中的 hbase HBASE_CLASSPATH 中，但是，我收到以下错误：

> org.apache.hadoop.hbase.client.ScannerCallable@a9255c，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:33:36.387

```
java.io.IOException: IPC server unable to read call parameters: Error in readFields 
```

您需要将 jar 复制到所有区域服务器，并相应地在区域服务器上编辑 hbase-env.sh 中的 HBASE_CLASSPATH

您可以在 Scanner 上指定 timerange 和 MaxVersions 以获取时间范围内的旧版本

```
scan.setMaxVersions(Integer.MAX_VALUE);
scan.setTimeRange(startVersion, endVersion); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T17:12:51.350

大佩，

当您将最大版本设置为 1 并且一个单元格有多个条目时，Hbase 会删除较旧的单元格并获取和扫描无法看到它们，除非您当然指定了一个特定的时间戳范围，该时间戳范围仅限定一个单元格。只有在对表运行 Major_compact 后才会删除墓碑单元格，此时旧单元格将停止弹出。

要始终从扫描中获取最新的单元格，您需要做的就是使用以下方法 -

```
 Result.getColumnLatest(family, qualifier) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T14:25:07.607

我认为这与我在这里遇到的问题完全相同：[HBase get return old values even with max versions = 1](https://stackoverflow.com/questions/20425707/hbase-get-returns-old-values-even-with-max-versions-1)

原来是hbase的一个bug。请参阅：[https ://issues.apache.org/jira/browse/HBASE-10102](https://issues.apache.org/jira/browse/HBASE-10102)

# tomcat - Tomcat 一段时间后不加载 HTTPS 站点

> ID：11133351
> 
> 赞同：0
> 
> 时间：2012-06-21T07:20:09.407
> 
> 标签：tomcat, ssl, configuration, https

我们创建的http和https站点，重启服务器后就可以访问了（当用户访问http站点时，它会将它们转发到https）。最终，（一两天后）http 站点仍然将用户重定向到 https 站点（这意味着服务器正在运行）。但是 https 站点不会加载。即使我们直接访问https站点。

这发生在任何人身上吗？我怎样才能解决这个问题？我需要检查什么来确定原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:47:28.500

检查日志文件。

使用[Visual VM](http://visualvm.java.net/index.html)监控运行 Tomcat 的 JVM 的状态。

调查监视[由 Tomcat 公开的 JMX 数据](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html#Introduction)。

考虑监控传入的 TCP/IP 连接

理想情况下，尝试在临时环境中通过使用流量重击站点来重现此行为将是有用的，因为这将是进行上述监控的更安全的地方。

# iphone - Facebook 登录后应用程序崩溃

> ID：11133352
> 
> 赞同：0
> 
> 时间：2012-06-21T07:20:10.367
> 
> 标签：iphone, ios, facebook, xcode4.2, iphone-4

我制作了一个我在 App Store 中提交的 iphone 应用程序。该应用程序在 App Store 中存在大约一年。它基本上有一个 facebook 登录按钮。美好的一天它崩溃了，当我在我的 iPhone 4、iPhone 4s 中单击我的 Facebook 登录按钮时。当我尝试在我的 Macbookpro 中运行它时，它也崩溃了。我收到错误“**由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[NSNull lowercaseString]: unrecognized selector sent to instance 0x2125ce8** '”............

它在我的 iPhone 3Gs 中运行良好......请帮助我。iPhone 应用程序如何在运行良好一年后崩溃。是与 Facebook 更新方法有关还是与 iPhone 版本有关。应用程序在调用 Fbrequest 后崩溃！请帮助我，我正在失去我的声誉.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:14:13.533

看起来您的应用程序中有一个字符串设置为指向 NSNull。当您尝试将该字符串设为小写时，应用程序会崩溃。由于 NSNull 指向 NSNull 类型的静态对象，因此尝试向其发送消息“lowercaseString”会导致应用程序崩溃。（如果它是 nil，Objective-C 将简单地忽略该消息）

会不会是某个地方有一个字符串曾经被设置为一个值，但由于某种原因现在已被删除并设置为 NSNull？这可能是由于 FaceBook-API 的变化，但也可能是由于服务器发送给您的内容的变化、您的 Facebook 帐户中的不同信息以及许多其他因素造成的。每当服务器发送 NULL 值时，您使用的解析器可能会设置 NSNull 而不是 nil。

请记住，它也可能根本与 Facebook 无关，因为您在 iPhone3GS 上会发现不同的行为。

您可以尝试在您尝试制作小写的代码中查找 NSString 值。使用调试器尝试识别 NSNull 类型的字符串。您可以像这样将您的字符串与 NSNull 进行比较：

```
if (text == (id)[NSNull null]) {
    // String is NSNull!
} 
```

# ruby-on-rails - 为简单的搜索 Rails 3 构建静态下拉菜单

> ID：11133358
> 
> 赞同：2
> 
> 时间：2012-06-21T07:20:31.543
> 
> 标签：ruby-on-rails, select

我在我的 rails 应用程序中有一个简单的搜索，但它只搜索我表的单个列。我正在尝试添加一个简单的下拉菜单，其中包含“last_name”和“city”等选项，以便用户可以选择要搜索的列。

在我看来，我有：

```
<%= form_tag teachers_path, :method => 'get', :id => "teachers_search" do %>
<%= hidden_field_tag :direction, params[:direction]%>
<%= hidden_field_tag :sort, params[:sort]%>
  <p>
    <%= text_field_tag :search, params[:search], placeholder: 'First Name' %>
    <%= submit_tag "Search", :first_name => nil %>
  </p>
<% end %> 
```

在我的模型中：

```
 def self.search(search)
    if search
      where('first_name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:32:17.093

您可以为下拉菜单添加一个 select_tag

```
<%= select_tag "search_from", "<option>first_name</option><option>last_name</option><option>city_name</option>".html_safe%> 
```

在您的控制器中，您可以将 params[:search_from] 中的值传递给您的搜索方法。并修改它以包含列名

```
def self.search(search, column_name)
  if search
    where('? LIKE ?', column_name, "%#{search}%")
  else
    scoped
  end
end 
```

我用粗略的方式写了它，但我希望它能传达信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:03:35.783

如果您只允许用户使用一些固定属性过滤结果，那么扩展@sohaibs 的答案下拉列表是一个好主意

**意见**

```
<%= select_tag "search_by", options_for_select(['first_name','last_name','city'].map{|o| [o.humanize,o] }) %>
<%= f.text_field 'search' %> 
```

**控制器**

```
def search
  User.search params[:teacher][:search_by],params[:teacher][:search]
end 
```

和**模型**

```
def self.search(search_by,search_value)
     where('? LIKE ?', search_by, search_value)
end 
```

真棒Rails :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:29:16.920

你有没有尝试过：

```
def self.search(column, search)
  # some logic
  where('? LIKE ?', column, "%#{search}%")
  # some logic
end 
```

# android - Inputstream，无法在android中读取逗号'或引号“”

> ID：11133359
> 
> 赞同：0
> 
> 时间：2012-06-21T07:20:36.397
> 
> 标签：android, text, inputstream, comma

我正在尝试从原始文件夹中读取文本文件，除了一个问题外，它运行良好。

[http://imageshack.us/photo/my-images/217/inputt.jpg/](http://imageshack.us/photo/my-images/217/inputt.jpg/)

如图所示，问题在于文本文件中的任何引号“”或逗号'，它会显示这个问号符号。

代码：

```
try {
        Resources res = getResources();
        InputStream in_s = res.openRawResource(R.raw.hr_consultant);

        byte[] b = new byte[in_s.available()];

        in_s.read(b);

        tv_data.setText(new String(b));
    } catch (Exception e) {
        // e.printStackTrace();
        tv_data.setText("Error: can't show help.");
    } 
```

注意：raw 中的文本文件被称为 int 值，因此其他 Reader 类型可能不起作用。所以有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:17:49.460

感谢上帝，
当您完成文本文件时，我找到了解决该问题的方法；

*   选择文件 > 另存为

*   将“编码”属性编辑为 UTF-8

# android - 在imageview中解码返回false

> ID：11133363
> 
> 赞同：0
> 
> 时间：2012-06-21T07:20:40.567
> 
> 标签：android, image

我在将图像从 sd 卡加载到我的页面查看器时遇到问题。这是我得到的错误：

```
06-21 09:12:03.795: D/skia(881): --- decoder->decode returned false
06-21 09:12:03.795: I/System.out(881): resolveUri failed on bad bitmap uri: file:///sdcard/DinEgen/852-0.jpg
06-21 09:12:03.795: V/Fotski(881): file:///sdcard/DinEgen/852-0.jpg
06-21 09:12:03.795: D/skia(881): --- decoder->decode returned false
06-21 09:12:03.795: I/System.out(881): resolveUri failed on bad bitmap uri: file:///sdcard/DinEgen/852-1.jpg
06-21 09:12:03.795: V/Fotski(881): file:///sdcard/DinEgen/852-1.jpg
06-21 09:12:03.795: D/skia(881): --- decoder->decode returned false
06-21 09:12:03.795: I/System.out(881): resolveUri failed on bad bitmap uri: file:///sdcard/DinEgen/852-2.jpg
06-21 09:12:03.795: V/Fotski(881): file:///sdcard/DinEgen/852-2.jpg
06-21 09:12:03.795: D/skia(881): --- decoder->decode returned false
06-21 09:12:03.795: I/System.out(881): resolveUri failed on bad bitmap uri: file:///sdcard/DinEgen/852-3.jpg
06-21 09:12:03.795: V/Fotski(881): file:///sdcard/DinEgen/852-3.jpg 
```

这是我添加新 imageView 的类：

```
public class ServiceImages1 extends LinearLayout{
    public ServiceImages1(Context context, String id) {
        super(context);
        init(id);
    }
    public ServiceImages1(Context context, AttributeSet attrs, String id) {
        super(context, attrs);
        init(id);
    }
    private void init(String id) {
        File file;
        file = new File("/sdcard/DinEgen/"+id);
        ImageView imageView = new ImageView(getContext());
        imageView.setImageURI(Uri.fromFile(file));
        Log.v("Fotski", ""+Uri.fromFile(file));

        addView(imageView);
    }
} 
```

这是我的pageViewer：

```
 final MyPagerAdapter adapter = new MyPagerAdapter(this);
    viewPager.setAdapter(adapter);

    if( adapter.getCount() > 18){
        indicatorLayout.setVisibility(View.GONE);

    }
    viewPager.setOnPageChangeListener(new OnPageChangeListener() {

        public void onPageSelected(int page) {

            indicatorLayout.removeAllViews();
            for(int i = 0; i < adapter.getCount(); i++){
            if(i==page){
                indicatorLayout.addView(new IndicatorDotsView(getApplicationContext(), R.drawable.showpic_active));
            }else{
                indicatorLayout.addView(new IndicatorDotsView(getApplicationContext(), R.drawable.showpic_normal));
            }
        }

        }

        public void onPageScrolled(int arg0, float arg1, int arg2) {

        }

        public void onPageScrollStateChanged(int arg0) {

        }
    });

}

public class MyPagerAdapter extends PagerAdapter {

    private ArrayList<LinearLayout> views;
    private ArrayList<LinearLayout> dots;

    public MyPagerAdapter(Context context) {
        views = new ArrayList<LinearLayout>();
        dots = new ArrayList<LinearLayout>();
        PhotoDao photoDb = new PhotoDaoImpl(context); 
        for(Photo photo: photoDb.findByParentType(parentType)){
            views.add(new ServiceImages1(context, photo.getFileName()));
        //photo.getFileName return picture name from sd card.   
        }

        for(int i = 0; i< getCount(); i++){
            if(i==0){
                dots.add(new IndicatorDotsView(context, R.drawable.showpic_active));
            }else{
                dots.add(new IndicatorDotsView(context, R.drawable.showpic_normal));
            }
        }

        for(int i = 0; i< getCount(); i++){
            indicatorLayout.addView(dots.get(i));
        }

    }

    @Override
    public void destroyItem(View view, int arg1, Object object) {
        ((ViewPager) view).removeView((LinearLayout) object);
    }

    @Override
    public void finishUpdate(View arg0) {

    }

    @Override
    public int getCount() {
        return views.size();
    }

    @Override
    public Object instantiateItem(View view, int position) {
        View myView = views.get(position);
        ((ViewPager) view).addView(myView);
        return myView;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }

} 
```

我不知道为什么这个解决方案不起作用。我只需要从 sd 卡中获取图片并将它们放入查看寻呼机。

# wcf - 如何从另一个 Windows 应用程序停止托管在 IIS 上的 WCF 服务（使用 net.MSMQ 绑定）

> ID：11133369
> 
> 赞同：2
> 
> 时间：2012-06-21T07:21:09.897
> 
> 标签：wcf

我有一个使用 IIS 上托管的 MSMQ 的 WCF 服务。我想创建一个可以阻止 WCF 服务选择 MSMQ 消息的 Windows 应用程序。一旦我看到队列中的 MSMQ 消息，我需要单击一个按钮并启动 WCF 服务来选择 MSMQ 中的消息。代码示例将被理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:31:39.433

IIS 不是承载 MSMQ 客户端的合适容器。这是因为当应用程序池在低流量期间卸载时，队列客户端也会卸载。这种行为是自动的，您无法控制它。

将客户端托管在 Windows 服务中会好得多。但是，您需要的那种“按需消费”功能并不容易实现，而且标准绑定当然也不支持。

我可以建议的最好的方法是在收到消息后立即使用它并将其保留在某处，直到用户单击按钮，您可以在该按钮上执行任何您想要的操作，因为消息中的数据已经可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:22:55.960

我能够通过应用解决方法来解决这个问题。我在另一台机器上创建了另一个队列。将 WCF 客户端端点地址的地址更改为配置中的此队列。我创建了另一个外部应用程序，将消息从备用队列移动到实际队列。从而实现了通过 MSMQ 绑定停止 IIS 托管的 WCF 服务的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T19:48:36.700

停止“Net.Msmq 侦听器适配器”Windows 服务和“Windows 进程激活服务”将阻止消息被拉出队列。启动服务备份将导致消息再次从队列中拉出。我是手动执行此操作，而不是通过另一个应用程序，但我假设您也可以通过另一个应用程序执行此操作。我还没有完全测试过这个，但这样的事情可能会起作用：

```
 Dictionary<string,List<string>> runningDependentServices = new Dictionary<string,List<string>>();
    private void StartMsmqBinding()
    {
        StartService("WAS");
        StartService("NetMsmqActivator");
    }
    private void StopMsmqBinding()
    {
        StopService("NetMsmqActivator");
        StopService("WAS");
    }
    private void StartService(string serviceName)
    {
        List<string> previouslyRunningServices = null;
        var sc = new ServiceController();
        sc.ServiceName = serviceName;
        if (runningDependentServices.ContainsKey(serviceName))
        {
            previouslyRunningServices = runningDependentServices[serviceName];
        }
        try
        {
            sc.Start();
            sc.WaitForStatus(ServiceControllerStatus.Running);
            if(previouslyRunningServices != null)
            {
                previouslyRunningServices.ForEach(a =>
                {
                    var serviceController = new System.ServiceProcess.ServiceController() { ServiceName = a };
                    serviceController.Start();
                    serviceController.WaitForStatus(ServiceControllerStatus.Running);
                });
            }

        }
        catch (InvalidOperationException)
        {
        }
    }
    private void StopService(string serviceName)
    {
        var sc = new System.ServiceProcess.ServiceController() { ServiceName = serviceName };
        runningDependentServices[serviceName] = sc.DependentServices.Where(a => a.Status == System.ServiceProcess.ServiceControllerStatus.Running).Select(a => a.ServiceName).ToList();
        if (sc.CanStop)
        {
            try
            {
                sc.Stop();
                sc.WaitForStatus(ServiceControllerStatus.Stopped);
            }
            catch (InvalidOperationException)
            {
            }
        }
    } 
```

我认为类似的方法适用于 Net.Tcp 绑定。在这种情况下，您可能必须停止“Net.Tcp 侦听器适配器”Windows 服务（服务名称：“NetTcpActivator”）和“Windows 进程激活服务”。

# .net - 如何从 .NET Web 服务返回 JSON 编码的数组？

> ID：11133381
> 
> 赞同：1
> 
> 时间：2012-06-21T07:21:47.317
> 
> 标签：.net, arrays, json, web-services

我用 JSON 创建了一个 .NET Web 服务。但结果没有显示为数组。如何将 JSON 结果转换为我的 Web 服务中的数组？

这是我的网络服务代码：

```
[WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public String GetReport()
    {
        ModelReport.Report report = new ModelReport.Report();
        string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
            connection.Open();

            SqlCommand command = new SqlCommand(sql, connection);
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                report.type = reader["type"].ToString();
                report.total = reader["total"].ToString();
            }
        }

        MemoryStream stream = new MemoryStream();
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(ModelReport.Report));
        serializer.WriteObject(stream, report);
        stream.Position = 0;
        StreamReader streamReader = new StreamReader(stream);
        return streamReader.ReadToEnd(); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:56:15.960

您正在序列化对象的单个实例`Report`，而不是数组。所以第一步是构建一个数组：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public String GetReport()
{
    List<ModelReport.Report> reports = new List<ModelReport.Report>();
    string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
        connection.Open();

        SqlCommand command = new SqlCommand(sql, connection);
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            ModelReport.Report report = new ModelReport.Report();
            report.type = reader["type"].ToString();
            report.total = reader["total"].ToString();
            reports.Add(report);
        }
    }

    MemoryStream stream = new MemoryStream();
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(ModelReport.Report[]));
    serializer.WriteObject(stream, reports.ToArray());
    stream.Position = 0;
    StreamReader streamReader = new StreamReader(stream);
    return streamReader.ReadToEnd(); 
} 
```

第二步当然是正确地执行此操作，并删除您方法中的任何管道代码，并将其留给基础设施：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public ModelReport.Report[] GetReport()
{
    List<ModelReport.Report> reports = new List<ModelReport.Report>();
    string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
    using (SqlConnection connection = new SqlConnection(connectionString))
    using (SqlCommand command = connection.CreateCommand)
    {
        string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
        connection.Open();

        command.CommandText = sql;
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                ModelReport.Report report = new ModelReport.Report();
                report.type = reader["type"].ToString();
                report.total = reader["total"].ToString();
                reports.Add(report);
            }
        }
    }

    return reports.ToArray();
} 
```

在我的第二个示例中，您还会注意到处理`IDisposable`资源的正确方法是始终将它们包装在`using`语句中。

# jquery - 如何在这个 web 服务中使用 jQuery Autocomplete？

> ID：11133389
> 
> 赞同：1
> 
> 时间：2012-06-21T07:22:09.610
> 
> 标签：jquery, jquery-autocomplete

***更新*** 对不起，我应该更好地澄清这一点！我使用 2 阶段 web 服务，第一次调用返回完整的街道地址和一个密钥，然后可以反过来使用该密钥返回地址部分。为此，我想使用 jQuery Autocomplete 组件，但我不知道该怎么做。

**这是第一个返回带有密钥的完整地址的 Web 服务，然后可以使用该密钥对地址部分进行后续请求：**

```
jsonCallback({
"Address": [
    {
        "Moniker": "03OAUSAQXcBwEDAQAAAAAvuBHAAAAAADMxABQA",
        "FullAddress": "31KhanRoad,GURRANANGNSW2460"
    },
    {
        "Moniker": "0XOAUSAQXcBwEDAQAAAAAvuBHAAAAAADMzABQA",
        "FullAddress": "33KhanRoad,GURRANANGNSW2460"
    },
    {
        "Moniker": "0POAUSAQXcBwEDAQAAAAAvuBHAAAAAADM1ABQA",
        "FullAddress": "35KhanRoad,GURRANANGNSW2460"
    },
    {
        "Moniker": "0NOAUSAQXcBwEDAQAAAAAvuBbAAAAAAAAUAA--",
        "FullAddress": "43KhanRoad,GURRANANGNSW2460"
    }
] 
```

})

**这是返回特定选择的[JSON](http://www.website.com.au/WebApp.asp?action=parse&reqtype=Mcntab&resulttype=JSON&moniker=0HOAUSHgHcBwEDAQAAAAEnco4AAAAAADE5AGQA)的后续调用 - 这是我最终需要保存在数据库中的信息**

**生成的 JSON 对象：**

```
jsonCallback({"Result":"OK","Address":{"DPID":"68847810","Full Address":"20 Some Ct, TRUGANINA VIC 3029","Unit Number":"","Street Number":"19","Street Name":"Khan","Street Type":"Court","Street Type Suffix":"","Suburb":"TRUGANINA","State":"VIC","Postcode":"3029","Building Name":"","Building Name 2":""}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:15:27.347

最后想通了

```
$( "#addressline" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://www.website.com.au/WebApp.asp?action=parse&reqtype=cnlist&ResultType=JSON&callback=?",
                dataType: "jsonp",
                data: { adddata: request.term },
                success: function( data ) {
                    //console.log(data.Address);
                    response( $.map( data.Address, function( item ) {
                        console.log(item);
                        return {
                            value: item["Moniker"],
                            label: item["Full Address"]
                        }
                    }));
                },
                error:function(){

                    alert('error');
                }

            });
        },
        minLength: 5,
        focus: function( event, ui ) {
            $( "#addressline" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) { 
            //  show label in box, not value
            $( "#addressline" ).val( ui.item.label ); 
            $( "#addressline_moniker_hidden").val(ui.item.value);
            $.ajax({
                url: "http://www.website.com.au/WebApp.asp?action=parse&reqtype=Mcntab&resulttype=JSON&callback=?",
                dataType: "jsonp",
                data: { moniker: ui.item.value },
                success: function( data ) {

                    if(data.Address){
                        console.log(data.Address);

                        // set hidden fields with verified address
                        $('#dpid').val(data.Address.DPID);
                        if(data.Address.qaserror){
                            $('#qaserror').val(data.Address.qaserror);
                        }

                        $('#unitno').val(data.Address["Unit Number"]);
                        $('#streetno').val(data.Address["Street Number"]);
                        $('#streetname').val(data.Address["Street Name"]);
                        $('#streettype').val(data.Address["Street Type"]);
                        $('#suburb').val(data.Address.Suburb);
                        $('#state').val(data.Address.State);
                        $('#postcode').val(data.Address.Postcode);

                        // show verification msg
                        $( "#addrverified" ).text('Address VERIFIED').effect("pulsate", { times:2 }, 2000);

                    }
                },
                error:function(){

                    alert('error');
                }

            });

            console.log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
            return false;

        },
        change: function(event, ui) { 

        }

    }); 
```

# soap - JAXWS 中 SOAP 请求参数的 JAXB 绑定

> ID：11133401
> 
> 赞同：2
> 
> 时间：2012-06-21T07:22:46.970
> 
> 标签：soap, jaxb, jax-ws

我的任务是为更新操作编写一个 Web 服务，其中将对象列表传递给该方法。

```
@WebMethod(operationName = "updateObjects", action = "urn:preferences")
public boolean updateObjects(List<MyObject> objects){

} 
```

MyObject 类很简单。

```
 @XmlRootElement(name="Object")
 public class MyObject{
    private String item1;
    private String item2;
 } 
```

现在是问题陈述。当我查看此方法的 SOAP 请求（为我生成的 SOAP UI）时，请求如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pref="preferences">
   <soapenv:Header/>
   <soapenv:Body>
      <pref:updateObjects>
         <!--Zero or more repetitions:-->
         <arg0>
            <!--Optional:-->
            <item1>?</item1>
            <!--Optional:-->
            <item2>?</item2>
         </arg0>
      </pref:updateObjects>
   </soapenv:Body>
</soapenv:Envelope> 
```

但我希望它看起来像下面。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pref="preferences">
   <soapenv:Header/>
   <soapenv:Body>
      <pref:updateObjects>
         <!--Zero or more repetitions:-->
         <Objects>
             <Object>
                <!--Optional:-->
                <item1>?</item1>
                <!--Optional:-->
                <item2>?</item2>
             </Object>
             <Object>
                <!--Optional:-->
                <item1>?</item1>
                <!--Optional:-->
                <item2>?</item2>
             </Object>
         </Objects>  
      </pref:updateObjects>
   </soapenv:Body>
</soapenv:Envelope> 
```

有人可以请教。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:52:13.913

您只需要向您`List`的对象添加一个“包装器”，如下所示：

```
 @XmlRootElement(name="objects")
 public class MyObjects{

    @XmlElement(name="object")
    List<MyObject> myObjects;
 }

public class MyObject{
    private String item1;
    private String item2;
 } 
```

*注意：将根元素从 更改`arg0`为`objects`标记`@XmlRootElement(name="objects")`将不起作用，因为您`<objects>`不是 Web 服务定义中的根元素。实际上它是你的一部分`<wsdl:message>`（所以 JAXB 会丢弃它）。*

您需要更改的是添加`@WebParam(name = "objects")`到您`@WebMethod`喜欢的 Web 服务消息：

```
@WebMethod(operationName = "updateObjects", action = "urn:preferences")
public boolean updateObjects(@WebParam(name = "objects") MyObjects objects){

} 
```

如果你不想使用“包装器”，你可以保留你的`WebMethod`但是像这样：

```
@WebMethod(operationName = "updateObjects", action = "urn:preferences")
public boolean updateObjects(@WebParam(name = "object") List<MyObject> objects){

} 
```

但你会松开`<objects>`包装纸。请求应该是这样的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pref="preferences">
   <soapenv:Header/>
   <soapenv:Body>
      <pref:updateObjects>
         <!--Zero or more repetitions:-->
         <object>
            <!--Optional:-->
            <item1>?</item1>
            <!--Optional:-->
            <item2>?</item2>
         </object>
      </pref:updateObjects>
   </soapenv:Body>
</soapenv:Envelope> 
```

# perl - Spreadsheet::WriteExcel 基于其他单元格值的条件格式

> ID：11133403
> 
> 赞同：6
> 
> 时间：2012-06-21T07:22:59.870
> 
> 标签：perl, excel

我正在尝试在我的 Excel 工作表中添加条件格式。不幸的是，Spreadsheet::WriteExcel 页面上的示例太简单了，我不知道该怎么做。

我想通过 RC10 单元格值更改行背景颜色。在excel中，我将添加格式公式

```
=IF(RC10="xxxx";1;0) 
```

我试图在 Spreadsheet::WriteExcel 中做类似的事情：

```
my $detail_rest_fmt = $excel->add_format(font => "Calibri", size => 11, valign  => "vcenter", align => "right", border => 1);
$detail_rest_fmt->set_num_format("[Green]=IF(RC10=\"xxxx\";1;0);[Red]=IF(RC10=\"yyyyyy\";1;0)"); 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:40:30.447

坏消息是我认为用Spreadsheet::WriteExcel 很难做到。

好消息是它可以通过 Excel::Writer::XLSX 轻松完成。这恰好是 Spreadsheet::WriteExcel 的一种后代。请阅读文章： [Spreadsheet::WriteExcel 已死。Excel::Writer::XLSX 万岁](http://web.archive.org/web/20140804070349/http://perlbuzz.com/2011/10/spreadsheetwriteexcel-is-dead-long-live-excelwriterxlsx.html)

以下代码完全符合您的要求（仅基于单元格 A1 而不是 RC10，这当然可以更改）：

```
#!/usr/bin/perl -w
use strict;
use Excel::Writer::XLSX;

my @matrix = (
    ['xxxx', '<-- Change the value in cell A1 to change the colour of row 4'],
    [qw(Redyard Kipling)],
    [qw(If--)],
    [qw(If you can keep your head when all about you)],
    [qw(Are losing theirs and blaming it on you;)],
);

writeSpreadsheet('conditional.formatting.xlsx', \@matrix);

sub writeSpreadsheet {
    my ($outFile, $matrix) = @_;
    my $MIN_COL_WIDTH = 5;
    my $MAX_COL_WIDTH = 35;
    my $workbook = Excel::Writer::XLSX->new($outFile);
    my $worksheet = $workbook->add_worksheet();
    my $redFormat = $workbook->add_format(font => 'Arial', color => 'red');
    my $greenFormat = $workbook->add_format(font => 'Arial', color => 'green', bold => 1);
    $worksheet->set_row(0, undef,
        $workbook->add_format(font => 'Arial', align => 'center', bold => 1));
    $worksheet->conditional_formatting('A4:Z4',
        {
            type => 'formula',
            criteria => '=$A$1 = "xxxx"',
            format => $greenFormat
        }
    );
    $worksheet->conditional_formatting('A4:Z4',
        {
            type => 'formula',
            criteria => '=$A$1 = "yyyyyy"',
            format => $redFormat
        }
    );
    foreach my $row (0 .. $#$matrix) {
        foreach my $col (0 .. $#{$matrix->[$row]}) {
            $worksheet->write($row, $col, $matrix->[$row][$col] || '');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:31:52.593

安东，没错。[Spreadsheet::WriteExcel](http://search.cpan.org/dist/Spreadsheet-WriteExcel/)并不真正支持条件格式。

但是，更新的 API 兼容替代品[Excel::Writer::XLSX](http://search.cpan.org/dist/Excel-Writer-XLSX/)提供了一组丰富的条件格式功能。

请参阅Excel::Writer::XLSX 和此[示例](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Examples.pm#Example%3a_conditional_format.pl)中更新的[条件格式](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#CONDITIONAL_FORMATTING_IN_EXCEL)文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:36:23.407

conditional_formatting 的行为非常奇怪。我得到了类似的东西：

```
my $yyy = $excel->add_format(font => "Calibri", size => 11, valign  => "vcenter", align => "right", border => 1, border_color => "black", bg_color => $green);

for my $section (@sections) {
   for my $sector (@sectors) {
       my $xxxx = $excel->add_format(font => "Calibri", size => 11, valign  => "vcenter", align => "right", border => 1, border_color => "black", bg_color => $green);
            $sheet->conditional_formatting("A1", 
            {
                type => "formula",
                criteria => '=J4="T1"',
                format => $yyy
            });
   }
} 
```

当我使用 $yyy 时它不起作用（在 excel 中有设置的图案填充而不是背景颜色）当我使用 $xxxx 时它工作正常。$yyy 和 $xxxx 是一样的，为什么不起作用呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T09:59:31.130

对于你的第二个问题：

由于范围问题，您可能会遇到格式在您开始使用它们之前被垃圾收集的问题。

如果是范围问题，请尝试`$workbook->close()`在程序末尾添加 a 以查看它是否修复了它。

否则我们需要一个更完整的示例程序来调试它。

# javascript - 通过代码模拟 ctrl+/-

> ID：11133405
> 
> 赞同：0
> 
> 时间：2012-06-21T07:23:03.597
> 
> 标签：javascript, css

当您使用浏览器冲浪时，您可以通过按`CTRL`+`+`或`CTRL`+来增加或减少字体尺寸`-`。

有没有办法通过代码（如javascript）**模拟此操作？**

我必须在我的网站上放置几个按钮来增加或减小大小，但要做到这一点，我必须动态更改很多字体大小属性（BODY、INPUT、OPTIONS 等...）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:33:40.770

不要这样做。浏览器缩放是一项功能：

*   浏览器中可能存在也可能不存在，
*   通过浏览器以不同的方式实现，
*   仅作为不良网站的最后手段存在。

* * *

> 我网站上的几个按钮来增加或减少大小，但要做到这一点，我必须动态更改很多字体大小属性

**你*真正*想做的是：**

*   在任何地方以相对单位（如`em`或`%`）缩放字体，
*   更改`document.body.style.fontSize`以修改您的基本尺寸（其他元素将用作其基本尺寸）。

也以相对单位指定`body`的字体大小 - 这样您还可以尊重用户的系统设置（每个体面的网站都应该这样做）。

有大量关于 CSS 字体缩放的资源。这是一个：

[http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

# javascript - 针对 Drupal 7 中的特定错误

> ID：11133407
> 
> 赞同：1
> 
> 时间：2012-06-21T07:23:12.320
> 
> 标签：javascript, jquery, drupal, drupal-7

我们在使用 Drupal 时都会遇到错误——其中大部分都很容易修复。然而，有些并不那么容易修复并且需要花费数小时的挖掘，即使该网站可以正常处理错误。

我的问题：为了解决这个问题，是否可以让 Drupal 为每个错误分配一个特定的 CSS 类，以便您可以轻松地使其显示：无？

如果没有办法做到这一点，是否可以分配一个 display:none; 到父元素（下面这种情况下的错误“div”）如果 - 例如 - 错误字符串=`"Warning: Invalid argument supplied for foreach() in element_children() (line 6282 of /var/www/html/includes/common.inc)."`使用jQuery / Javascript？

```
<div class="messages error">
    <h2 class="element-invisible">Error message</h2>
    <em class="placeholder">Warning</em>
    : Invalid argument supplied for foreach() in
    <em class="placeholder">element_children()</em>
    (line
    <em class="placeholder">6282</em>
    of
    <em class="placeholder">/var/www/html/includes/common.inc</em>
    ).
</div> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:57:51.370

使用 CSS 隐藏错误消息是一个非常非常非常糟糕的主意。相反，您应该通过转到**Administration » Configuration » Development » Logging and errors**并将**错误消息显示**为**none**来关闭屏幕错误报告。

关闭该功能后，没有人会看到这些错误，但作为管理员，您可以通过转到**管理 » 报告 » 最近的日志消息**自己查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:07:01.537

如果您需要更改这些消息的呈现方式，则需要覆盖`theme_status_messages()`主题函数，其中包含以下代码。

```
function theme_status_messages($variables) {
  $display = $variables['display'];
  $output = '';

  $status_heading = array(
    'status' => t('Status message'), 
    'error' => t('Error message'), 
    'warning' => t('Warning message'),
  );
  foreach (drupal_get_messages($display) as $type => $messages) {
    $output .= "<div class=\"messages $type\">\n";
    if (!empty($status_heading[$type])) {
      $output .= '<h2 class="element-invisible">' . $status_heading[$type] . "</h2>\n";
    }
    if (count($messages) > 1) {
      $output .= " <ul>\n";
      foreach ($messages as $message) {
        $output .= '  <li>' . $message . "</li>\n";
      }
      $output .= " </ul>\n";
    }
    else {
      $output .= $messages[0];
    }
    $output .= "</div>\n";
  }
  return $output;
} 
```

如果您需要过滤掉特定消息，我宁愿从要显示的消息列表中删除消息，而不是使用 CSS 样式隐藏消息。

# matlab - 如果使用类型单元格，则函数

> ID：11133409
> 
> 赞同：1
> 
> 时间：2012-06-21T07:23:25.957
> 
> 标签：matlab, if-statement

我有这样的数据类型单元格：

```
A = 'red' 'red' green' 'red'
B = 'red' 'blue' 'red' 'green'
C = 'green' 'red' green' 'blue'
D = 'blue' 'red' 'green' 'red'
E = 'green' 'blue' 'red' 'green' 
```

然后我像这样混合在一个单元格中：

```
X = {A{:},B{:},C{:},D{:},E{:}} 
```

我这样制表：

```
Y = tabulate(X) 
```

所以我可以得到结果：

```
'red'  '9'   '45'
'green' '7'  '35'
'blue' '4'  '20' 
```

如果我想对我的数据进行分类，例如：

```
if 'red' > 90% and 'green' <10% the result is "good"
if 'red' between 70 and 90 % and the result is "ok"
if 'red < 60% the result is "bad" 
```

我不能`if`在单元格中使用，因为当我使用`==`它时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:27:07.993

如果我尝试这个（如果我手动输入，则事先将这些`A{:},B{:},...`内容更改为`A,B,...`；在你的情况下可能不需要；在你的情况下，`[A B C D E ...]`应该也可以工作......），我得到一个`X`这样的数组：

它看起来像这样：

```
>> X={'red' 'red' 'green' 'blue' 'green'}

X = 

    'red'    'red'    'green'    'blue'    'green'

>> 
```

如果是这种情况，您将包含数字格式的数字数据，而不是在某处`Y`带有符号。将是一个包含字符串列和 2 个数值列的元胞数组：`%``Y`

```
>> Y=tabulate(X)

Y = 

    'red'      [2]    [40]
    'green'    [2]    [40]
    'blue'     [1]    [20] 
```

现在我可以把这些东西放在一起了。举个例子：

```
Z = cell2struct(Y(:,3), Y(:,1)) 
```

在这里，我将元胞数组的第 2 列作为数据，将第 1 列作为要创建的结构的字段名称。所以这将导致

```
>> Z=cell2struct(Y(:,3), Y(:,1))

Z = 

      red: 40
    green: 40
     blue: 20 
```

> 为什么会这样？第一个参数是要放入结构字段的数据，在我们的例子中是“百分比”列。第二个参数给出了相应的字段名称，在我们的例子中是“颜色”列。所以在`Z`字段中`red`获取值`40`，`green`获取`40`并`blue`获取`20`。）

那我可以做

```
if Z.red > 90 && Z.green < 10 % why this 2nd condition? The 1st should be enough...
    result = 'good'
elseif Z.red > 70
    result = 'ok'
else
    result = 'bad'
end 
```

或类似的东西（你没有指定在 60% 到 70% 之间应该发生什么......）

# java - 处理大型 XML/JSON 文件的方法

> ID：11133413
> 
> 赞同：0
> 
> 时间：2012-06-21T07:23:36.753
> 
> 标签：java, android, xml, database, json

我正在寻找创建一个 Android 应用程序（对于 iOS，问题将是相同的），它的功能几乎就像一个网上商店。

它将包含很多产品——可以通过我们想要的任何方式访问，因为仍然需要构建。

问题是，我们创建了一个纯文本文件来测试大小，结果发现即使是选择的产品，没有结构（XML、JSON..）也已经是 300mb。一旦我们添加了一个结构，这在逻辑上只会导致更多的开销并增加这个大小。

就像我说的，在接收数据方面几乎一切皆有可能。他们可以构建一个 API，以便能够在需要时一次获取产品，或者在后台进程中解析 1 个大文件......

但是，其中一个愿望是（尽可能）离线。这通常意味着将所有数据保存到手机上的数据库中，但如果这会导致您的 SD 卡上有 300mb 大小，那就不好了。

总结一下我到底想知道什么；有没有其他方法可以处理这样的大数据，而不必经常保持与互联网的连接，或者不必在某人的手机上下载 300mb。

某种压缩，将其保存在数据库中的特殊方式......欢迎任何想法。

# c# - 在 C# 中启动计时器时执行回调

> ID：11133423
> 
> 赞同：0
> 
> 时间：2012-06-21T07:24:34.860
> 
> 标签：c#, timer

有没有办法在定时器启动时第一次执行定时器回调（使用 start() 方法），而不是等待间隔通过第一次执行？

更新：我正在使用 System.Timers.Timer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:27:44.627

相信您正在寻找的东西在这里被描述为dueTime：http: [//msdn.microsoft.com/en-us/library/2x96zfy7.aspx](http://msdn.microsoft.com/en-us/library/2x96zfy7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:29:18.947

不，因为它被设计为在它开始的某个时间间隔**后**`Timer`调用事件。`Tick`

 **相反，在您的代码中，您可以`Tick`在首次启动`Timer`.

PS 我说的是 WinForms 计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:32:38.990

第三个参数（1000）是您希望的到期时间：

```
_timer = new System.Threading.Timer(new TimerCallback(InvokeTimerCallback), null, 1000, 3600000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:33:00.053

尝试不同的计时器，例如[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。这支持初始延迟（您想要一个 0）加上一个句点。**

# ios - 如何将webview的最后一页从一个视图返回到另一个视图

> ID：11133426
> 
> 赞同：0
> 
> 时间：2012-06-21T07:24:43.913
> 
> 标签：ios, ipad

我有一个适用于 iPad 的 ios 程序。它使用2个视图，一个视图有webview，另一个有imageview。当我从 imageview 返回 webview 时，打开了 webview 主页。我想返回最后一页。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:09:44.620

如果我对您的理解正确，您要确保当您切换回 UIWebView 时，将再次显示在 UIWebView 中加载的最后一页。

为此，您可以跟踪在 UIWebView 中加载的最后一个 URL。您可以在以下 UIWebViewDelegate 方法中执行此操作（声明`currentURL`为属性）：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   self.currentURL = request.URL;
   return YES;
} 
```

然后当你带回你的 UIWebView 时：

```
- (void)showWebView {
  [yourWebView loadRequest:[NSURLRequest requestWithURL:currentURL]];
} 
```

# replication - 将文章添加到在另一个数据库上创建的出版物时出错

> ID：11133428
> 
> 赞同：2
> 
> 时间：2012-06-21T07:25:00.183
> 
> 标签：replication, sql-server-2012

我正在使用 sql server 2012 及其复制功能。我在这里尝试手动创建出版物并使用脚本向其中添加文章。我能够成功创建该出版物，但在向其中添加文章时遇到问题。

这是我添加文章的脚本

```
EXEC ScriptDB.dbo.sp_addarticle 
            @publication = 'PublicationOne',
            @article = 'Departments',
            @source_object = 'Departments',
            @source_owner = 'dbo',
            @type = N'logbased',
            @schema_option = 0x000000000803509F,
            @identityrangemanagementoption = N'manual',
            @pre_creation_cmd = N'none' 
```

最重要的是，Departments 表在 PublisherDB 数据库中，我正在从 ScriptDB 数据库运行这个脚本。由于我将拥有许多发布者，因此我将动态传递这些值。

当我执行上述脚本时，出现以下错误

```
Msg 14027, Level 11, State 1, Procedure sp_MSrepl_addarticle, Line 590  [dbo].[Departments] does not exist in the current database. 
```

Departments 表在 ScriptDB 中不存在，但在 PublisherDB 数据库中。所以我将脚本更改为

```
EXEC PublisherDB.dbo.sp_addarticle 
            @publication = 'PublicationOne',
            @article = 'Departments',
            @source_object = 'Departments',
            @source_owner = 'dbo',
            @type = N'logbased',
            @schema_option = 0x000000000803509F,
            @identityrangemanagementoption = N'manual',
            @pre_creation_cmd = N'none' 
```

现在它说，

```
Msg 20026, Level 11, State 1, Procedure sp_MSreinit_article, Line 40 The publication 'PublicationOne' does not exist. 
```

告诉我一些事情，我不能在另一个数据库上运行脚本来创建出版物。

例如，考虑这种情况，我有一个主数据库和两个发布者数据库。我想创建两个单独的出版物（每个发布者数据库一个）。现在我可以在主数据库中执行上述脚本来创建发布者（使用两个发布者数据库）。这是否可以实现。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:40:22.377

[sp_addarticle](http://msdn.microsoft.com/en-us/library/ms173857.aspx)必须在发布服务器上对发布数据库执行。如果您希望发布 PublisherDB 数据库，则为 PublisherDB 创建发布并在 PublisherDB 数据库上调用 sp_addarticle 以将文章添加到发布中。

# createfile - CreateFile 不会阻止其他进程打开我的设备

> ID：11133432
> 
> 赞同：2
> 
> 时间：2012-06-21T07:25:09.780
> 
> 标签：createfile, wdf

我正在使用 CreateFile 打开与我的 USB 硬件的连接。如果我有两个（或更多）硬件连接到 PC，我想防止我的 PC 应用程序的多个实例（不同的 PID）连接到相同的硬件。

我认为这是通过使用 dwShareMode = 0 运行 CreateFile 来完成的。由于某种原因，这不起作用。当对同一 USB 设备运行 CreateFile 时，PC 应用程序的几个不同实例将获得有效句柄。

```
hDev = CreateFile(
    "\\\\?\\usb#vid_0442&pid_0891&mi_01#6&2ea0fbc8&0&0001#{ff646f80-8def-11d2-9449-00105a075f6b}"
    GENERIC_READ | GENERIC_WRITE,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL | FILE_FLAG_OVERLAPPED,
    NULL
); 
```

如果可能的话，我想在不更改驱动程序的情况下按我的意愿进行这项工作，因为这将调用驱动程序证书签名，yadayada ...

我错过了什么？

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:18:43.733

EvtDeviceAdd 的 WdfDeviceInitSetExclusive(...) 使它*重新签名我的驱动程序*8-]

# visual-c++ - 为什么在 Visual C++ 2012 中将 bad_alloc(const char*) 设为私有？

> ID：11133438
> 
> 赞同：7
> 
> 时间：2012-06-21T07:25:43.367
> 
> 标签：visual-c++, compatibility, visual-studio-2012

我只是想使用 Visual Studio 2012 Release Candidate C++ 编译一个更大的项目。该项目现在使用 VS2010 编译。（我只是贪婪地获得 C++11 的东西，所以我尝试了。:)

除了我可以自己解释的事情之外，该项目使用如下代码：

```
ostringstream ostr;
ostr << "The " __FUNCTION__ "() failed to malloc(" << i << ").";
throw bad_alloc(ostr.str().c_str()); 
```

编译器现在抱怨

```
error C2248: 'std::bad_alloc::bad_alloc' : cannot access private member declared 
    in class 'std::bad_alloc' 
```

......这是真的。该版本的构造函数现在是私有的。

将该版本的构造函数设为私有的原因是什么？C ++ 11标准是否建议不要将该构造函数与参数一起使用？

（我可以想象，如果分配失败，尝试构建新的东西可能会导致更多问题。但是，这只是我的猜测。）

谢谢，彼得

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T20:23:50.457

C++11 标准`bad_alloc`是这样定义的（18.6.2.1）：

```
class bad_alloc : public exception {
public:
    bad_alloc() noexcept;
    bad_alloc(const bad_alloc&) noexcept;
    bad_alloc& operator=(const bad_alloc&) noexcept;
    virtual const char* what() const noexcept;
}; 
```

没有带字符串的构造函数。提供这种构造函数的供应商会使使用它的代码不可移植，因为其他供应商没有义务提供它。

C++03 标准定义了一组类似的构造函数，所以 VS 甚至在 C++11 之前就没有遵循这部分标准。MS 确实试图使 VS 尽可能地符合标准，所以他们可能只是利用这个场合（新的 VS，新的标准）来修复不兼容的问题。

**编辑：**现在我已经看到了 VS2012 的代码，也很清楚为什么提到的构造函数是私有的，而不是被完全删除：在类中似乎只有一个构造函数的使用`bad_array_new_length`。所以在 bad_alloc`bad_array_new_length`中声明为 a `friend`，因此可以使用该私有构造函数。`bad_array_new_length`如果只是将消息存储在 by 使用的指针中，则可以避免这种依赖关系`what()`，但无论如何它并不是很多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T18:19:45.643

如果您习惯于在抛出 std::bad_alloc 时传递消息，则一种合适的技术是定义一个派生自 std::bad_alloc 的内部类，并覆盖“what”以提供适当的消息。

您可以将类公开并直接调用赋值构造函数，或者制作一个辅助函数，例如 throw_bad_alloc，它接受参数（和附加标量信息）并将它们存储在内部类中。

在调用“what”之前，该消息不会被格式化。这样，堆栈展开可能已经释放了一些内存，因此可以在捕获站点使用实际原因（内存耗尽、错误请求大小、堆损坏等）格式化消息。如果格式化失败，只需分配并返回静态消息。

修剪示例：

（提示：复制构造函数可以将 _Message 分配给 nullptr，而不是复制消息，因为消息是按需格式化的。移动构造函数当然可以没收它:-)。

```
class internal_bad_alloc: public std::bad_alloc
   {
   public:
      // Default, copy and move constructors....

      // Assignment constructor...
      explicit internal_bad_alloc(int errno, size_t size, etc...) noexcept:
         std::bad_alloc()
         {
         // Assign data members...
         }

      virtual ~internal_bad_alloc(void) noexcept
         {
         // Free _Message data member (if allocated).
         }

      // Override to format and return the reason:
      virtual const char* what(void) const noexcept
         {
         if (_Message == nullptr)
            {
            // Format and assign _Message.  Assign the default if the
            // format fails...
            }
         return _Message;
         }

   private:
      // Additional scalar data (error code, size, etc.) pass into the
      // constructor and used when the message is formatted by 'what'...
      mutable char* _Message;
      static  char  _Default[];
   }
};

//
// Throw helper(s)...
//
extern void throw_bad_alloc(int errno, size_t size, etc...)
   {
   throw internal_bad_alloc(errno, size, etc...);
   } 
```

# wxpython - 如何扩展 wx.grid.GridCellRenderer？

> ID：11133439
> 
> 赞同：1
> 
> 时间：2012-06-21T07:25:48.570
> 
> 标签：wxpython, wxwidgets

这是我的代码。我想覆盖 Draw 方法

```
import  wx.grid             as  gridlib

class MyCellRenderer(gridlib.GridCellRenderer):

    def __init__(self, *args):
        gridlib.GridCellRenderer.__init__(self, *args)  

    def Draw(self, *args):
        super(MyCellRenderer,self).Draw(*args) 
```

...在脚本的其他部分

```
 r2 = MyCellRenderer()
        # self is a grid here
        self.SetCellRenderer(15,0, r2) 
```

这是堆栈跟踪

```
Traceback (most recent call last):
  File "c:\SY_FI\wxPython-2.8.12.1\demo\GridSimple2.py", line 274, in <module>
    frame = TestFrame(None, sys.stdout)
  File "c:\SY_FI\wxPython-2.8.12.1\demo\GridSimple2.py", line 264, in __init__
    self.grid = SimpleGrid(self, log)
  File "c:\SY_FI\wxPython-2.8.12.1\demo\GridSimple2.py", line 96, in __init__
    r2 = MyCellRenderer()
  File "c:\SY_FI\wxPython-2.8.12.1\demo\GridSimple2.py", line 13, in __init__
    gridlib.GridCellRenderer.__init__(self)
  File "D:\ATHENA~1\RELEAS~1\build\ext\vc90_xp/lib\python2.6\site-packages\wx-2.8.12.0\wx\grid.py", line 113, in __init__

AttributeError: No constructor defined 
```

wx的版本是2.8.12.0。蟒蛇是2.6.6。平台是winxp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:23:27.470

我应该从 PyGridCellRenderer 扩展 MyCellRenderer

# ms-word - 使用加载项获取 Word 的自动恢复文件路径

> ID：11133443
> 
> 赞同：0
> 
> 时间：2012-06-21T07:26:10.380
> 
> 标签：ms-word, vsto, add-in

如何使用 C# 在 VSTO 加载项中获取单词设置，如自动恢复文件位置、自动恢复时间等。我尝试过 Globals.ThisAddin.Application.Options，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:35:22.990

自动恢复时间：`Globals.ThisAddIn.Application.Options.SaveInterval`

自动恢复路径：

```
Globals.ThisAddIn.Application.Options.DefaultFilePath(WdDefaultFilePath.wdAutoRecoverPath) 
```

# java - java eclipse maven（和ant）在通过ssh复制jar文件时出现问题

> ID：11133444
> 
> 赞同：1
> 
> 时间：2012-06-21T07:26:10.293
> 
> 标签：java, ssh, maven-3, eclipse-indigo, maven-antrun-plugin

我有以下内容：

*   跑`eclipse-indigo`进去`CentOS 6.2`，
*   我还安装`apache-ant-1.8.4`在我的系统`ANT_HOME`中并在`eclipse`.
*   在 Eclipse 中，我安装了`maven2`使用版本的插件，该`maven-3.0.4`版本安装在我的系统上（我配置`eclipse`为使用它）。

我在我的 Eclipse 上有一个 Maven 项目，我希望每次当我`install`- （`maven`目标） - 它时，将结果`jar`文件复制到我服务器上的特定位置 - 通过`ssh`. 为此，我在我的`pom.xml`：

```
 <build>
    <plugins >
            <plugin>
        <groupId > org.apache.maven.plugins </groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>install</phase>
                    <configuration>
                        <tasks name="ssh_task">
                            <taskdef name="scp" 
                                      classname="org.apache.tools.ant.taskdefs.optional.ssh.Scp" classpathref="/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jsch.jar" />
                            <scp file="/absolute/path/to/myfile.jar" 
                                 todir="root@$10.3.1.1:/remote/location" 
                                 password="mypass" 
                                 trusted="true"/>
                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
  </build> 

```

我`pom.xml`在这篇文章之后以这种方式配置了我的：

*   [Maven Ant SCP 错误](https://stackoverflow.com/questions/8402387/maven-ant-scp-error)
*   Maven 使用 SSH和其他一些外部链接[将本地文件复制到远程服务器。](https://stackoverflow.com/questions/909867/maven-copy-local-file-to-remote-server-using-ssh#910047)

现在的问题是，当我运行`install`目标时，`eclipse`出现以下错误：

> 错误] 无法执行目标 org.apache.maven.plugins:maven-antrun-plugin:1.3:run (default) on project myprojectname: An Ant BuildException has occurred: Reference /usr/local/apache-ant/apache-ant- 1.8.4/lib/ant-jsch.jar 未找到。-> [帮助 1]

问题是`ant-jsch.jar`存在。

**问题**：您对如何处理我的问题有什么建议吗？如果您想知道完整的堆栈跟踪，请告诉我。

编辑：

```
 ant -diagnostics
------- Ant diagnostics report -------
Apache Ant(TM) version 1.8.4 compiled on May 22 2012

-------------------------------------------
 Implementation Version
-------------------------------------------
core tasks     : 1.8.4 in file:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant.jar

-------------------------------------------
 ANT PROPERTIES
-------------------------------------------
ant.version: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
ant.java.version: 1.6
Is this the Apache Harmony VM? no
Is this the Kaffe VM? no
Is this gij/gcj? no
ant.core.lib: /usr/local/apache-ant/apache-ant-1.8.4/lib/ant.jar
ant.home: /usr/local/apache-ant/apache-ant-1.8.4

-------------------------------------------
 ANT_HOME/lib jar listing
-------------------------------------------
ant.home: /usr/local/apache-ant/apache-ant-1.8.4
commons-logging-1.0.4.jar (38015 bytes)
jruby-0.9.8.jar (1683526 bytes)
servlet-api-2.3.jar (77977 bytes)
serializer-2.7.1.jar (278281 bytes)
jasper-compiler-4.1.36.jar (184124 bytes)
commons-logging-api-1.1.jar (44598 bytes)
bcel-5.1.jar (515920 bytes)
xml-apis-1.3.04.jar (194354 bytes)
ant-javamail.jar (13773 bytes)
ant-commons-logging.jar (9715 bytes)
jsch-0.1.42.jar (185746 bytes)
log4j-1.2.14.jar (367444 bytes)
xalan-2.7.1.jar (3176148 bytes)
ant-jai.jar (28241 bytes)
ant-junit4.jar (12923 bytes)
ant-antlr.jar (11550 bytes)
jasper-runtime-4.1.36.jar (72397 bytes)
jai-core-1.1.3.jar (1900631 bytes)
ant-netrexx.jar (16215 bytes)
ant-junit.jar (108138 bytes)
bsh-core-2.0b4.jar (143992 bytes)
ant-jdepend.jar (14024 bytes)
asm-commons-2.2.3.jar (15114 bytes)
regexp-1.2.jar (29871 bytes)
ant.jar (1941731 bytes)
regexp-1.3.jar (25429 bytes)
commons-net-1.4.1.jar (180792 bytes)
ant-jsch.jar (46176 bytes)
asm-2.2.3.jar (34832 bytes)
bsh-2.0b4.jar (281694 bytes)
ant-apache-oro.jar (45515 bytes)
antlr-2.7.7.jar (445288 bytes)
mail-1.4.jar (388864 bytes)
ant-jmf.jar (12541 bytes)
asm-tree-2.2.3.jar (16248 bytes)
js-1.6R7.jar (813521 bytes)
activation-1.1.jar (62983 bytes)
ant-testutil.jar (21004 bytes)
ant-apache-bcel.jar (14548 bytes)
ant-swing.jar (13497 bytes)
ant-commons-net.jar (91451 bytes)
junit-4.8.1.jar (237047 bytes)
ant-apache-xalan2.jar (8097 bytes)
jdepend-2.9.1.jar (57933 bytes)
ant-apache-regexp.jar (9563 bytes)
maven-artifact-ant-2.0.4-dep.jar (887507 bytes)
oro-2.0.8.jar (65261 bytes)
which-1.0.jar (17398 bytes)
jai-codec-1.1.3.jar (258160 bytes)
ant-apache-resolver.jar (9886 bytes)
bsf-2.4.0.jar (113369 bytes)
NetRexxC.jar (355931 bytes)
ant-launcher.jar (18429 bytes)
ant-apache-log4j.jar (8861 bytes)
ant-apache-bsf.jar (9733 bytes)
xml-resolver-1.2.jar (84091 bytes)

-------------------------------------------
 USER_HOME/.ant/lib jar listing
-------------------------------------------
user.home: /root
No such directory.

-------------------------------------------
 Tasks availability
-------------------------------------------
All defined tasks are available

-------------------------------------------
 org.apache.env.Which diagnostics
-------------------------------------------
#---- BEGIN: Which report
Which.version=Which.java:($Revision: 1.2 $) WhichJar.java:($Revision: 1.2 $)
java.version=1.6.0_31
file.encoding=UTF-8
java.ext.dirs=/usr/java/jdk1.6.0_31/jre/lib/ext:/usr/java/packages/lib/ext
java.class.path=/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-launcher.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-logging-1.0.4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jruby-0.9.8.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/servlet-api-2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/serializer-2.7.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jasper-compiler-4.1.36.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-logging-api-1.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bcel-5.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xml-apis-1.3.04.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-javamail.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-commons-logging.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jsch-0.1.42.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/log4j-1.2.14.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xalan-2.7.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jai.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-junit4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-antlr.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jasper-runtime-4.1.36.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jai-core-1.1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-netrexx.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-junit.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsh-core-2.0b4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jdepend.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-commons-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/regexp-1.2.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/regexp-1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-net-1.4.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jsch.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsh-2.0b4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-oro.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/antlr-2.7.7.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/mail-1.4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jmf.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-tree-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/js-1.6R7.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/activation-1.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-testutil.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-bcel.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-swing.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-commons-net.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/junit-4.8.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-xalan2.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jdepend-2.9.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-regexp.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/maven-artifact-ant-2.0.4-dep.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/oro-2.0.8.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/which-1.0.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jai-codec-1.1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-resolver.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsf-2.4.0.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/NetRexxC.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-launcher.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-log4j.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-bsf.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xml-resolver-1.2.jar:/usr/java/jdk1.6.0_31/lib/tools.jar
os.name=Linux
java.vendor=Sun Microsystems Inc.
sun.boot.class.path=/usr/java/jdk1.6.0_31/jre/lib/resources.jar:/usr/java/jdk1.6.0_31/jre/lib/rt.jar:/usr/java/jdk1.6.0_31/jre/lib/sunrsasign.jar:/usr/java/jdk1.6.0_31/jre/lib/jsse.jar:/usr/java/jdk1.6.0_31/jre/lib/jce.jar:/usr/java/jdk1.6.0_31/jre/lib/charsets.jar:/usr/java/jdk1.6.0_31/jre/lib/modules/jdk.boot.jar:/usr/java/jdk1.6.0_31/jre/classes
java.runtime.name=Java(TM) SE Runtime Environment
#----   END: Which report

-------------------------------------------
 XML Parser information
-------------------------------------------
XML Parser : com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl
XML Parser Location: unknown
Namespace-aware parser : com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser
Namespace-aware parser Location: unknown

-------------------------------------------
 XSLT Processor information
-------------------------------------------
XSLT Processor : org.apache.xalan.transformer.TransformerIdentityImpl
XSLT Processor Location: file:/usr/local/apache-ant/apache-ant-1.8.4/lib/xalan-2.7.1.jar

-------------------------------------------
 System properties
-------------------------------------------
java.runtime.name : Java(TM) SE Runtime Environment
sun.boot.library.path : /usr/java/jdk1.6.0_31/jre/lib/i386
java.vm.version : 20.6-b01
ant.library.dir : /usr/local/apache-ant/apache-ant-1.8.4/lib
java.vm.vendor : Sun Microsystems Inc.
java.vendor.url : http://java.sun.com/
path.separator : :
java.vm.name : Java HotSpot(TM) Server VM
file.encoding.pkg : sun.io
user.country : US
sun.java.launcher : SUN_STANDARD
sun.os.patch.level : unknown
java.vm.specification.name : Java Virtual Machine Specification
user.dir : /home/artaxerxe
java.runtime.version : 1.6.0_31-b04
java.awt.graphicsenv : sun.awt.X11GraphicsEnvironment
java.endorsed.dirs : /usr/java/jdk1.6.0_31/jre/lib/endorsed
os.arch : i386
java.io.tmpdir : /tmp
line.separator : 

java.vm.specification.vendor : Sun Microsystems Inc.
os.name : Linux
ant.home : /usr/local/apache-ant/apache-ant-1.8.4
sun.jnu.encoding : UTF-8
java.library.path : /usr/java/jdk1.6.0_31/jre/lib/i386/server:/usr/java/jdk1.6.0_31/jre/lib/i386:/usr/java/jdk1.6.0_31/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib
java.specification.name : Java Platform API Specification
java.class.version : 50.0
sun.management.compiler : HotSpot Tiered Compilers
os.version : 2.6.32-220.17.1.el6.i686
user.home : /root
user.timezone : Europe/Bucharest
java.awt.printerjob : sun.print.PSPrinterJob
file.encoding : UTF-8
java.specification.version : 1.6
user.name : root
java.class.path : /usr/local/apache-ant/apache-ant-1.8.4/lib/ant-launcher.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-logging-1.0.4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jruby-0.9.8.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/servlet-api-2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/serializer-2.7.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jasper-compiler-4.1.36.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-logging-api-1.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bcel-5.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xml-apis-1.3.04.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-javamail.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-commons-logging.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jsch-0.1.42.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/log4j-1.2.14.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xalan-2.7.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jai.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-junit4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-antlr.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jasper-runtime-4.1.36.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jai-core-1.1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-netrexx.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-junit.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsh-core-2.0b4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jdepend.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-commons-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/regexp-1.2.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/regexp-1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/commons-net-1.4.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jsch.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsh-2.0b4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-oro.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/antlr-2.7.7.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/mail-1.4.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-jmf.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/asm-tree-2.2.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/js-1.6R7.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/activation-1.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-testutil.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-bcel.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-swing.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-commons-net.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/junit-4.8.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-xalan2.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jdepend-2.9.1.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-regexp.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/maven-artifact-ant-2.0.4-dep.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/oro-2.0.8.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/which-1.0.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/jai-codec-1.1.3.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-resolver.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/bsf-2.4.0.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/NetRexxC.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-launcher.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-log4j.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/ant-apache-bsf.jar:/usr/local/apache-ant/apache-ant-1.8.4/lib/xml-resolver-1.2.jar:/usr/java/jdk1.6.0_31/lib/tools.jar
java.vm.specification.version : 1.0
sun.arch.data.model : 32
java.home : /usr/java/jdk1.6.0_31/jre
sun.java.command : org.apache.tools.ant.launch.Launcher -cp  -diagnostics
java.specification.vendor : Sun Microsystems Inc.
user.language : en
java.vm.info : mixed mode
java.version : 1.6.0_31
java.ext.dirs : /usr/java/jdk1.6.0_31/jre/lib/ext:/usr/java/packages/lib/ext
sun.boot.class.path : /usr/java/jdk1.6.0_31/jre/lib/resources.jar:/usr/java/jdk1.6.0_31/jre/lib/rt.jar:/usr/java/jdk1.6.0_31/jre/lib/sunrsasign.jar:/usr/java/jdk1.6.0_31/jre/lib/jsse.jar:/usr/java/jdk1.6.0_31/jre/lib/jce.jar:/usr/java/jdk1.6.0_31/jre/lib/charsets.jar:/usr/java/jdk1.6.0_31/jre/lib/modules/jdk.boot.jar:/usr/java/jdk1.6.0_31/jre/classes
java.vendor : Sun Microsystems Inc.
file.separator : /
java.vendor.url.bug : http://java.sun.com/cgi-bin/bugreport.cgi
sun.cpu.endian : little
sun.io.unicode.encoding : UnicodeLittle
sun.desktop : gnome
sun.cpu.isalist : 

-------------------------------------------
 Temp dir
-------------------------------------------
Temp dir is /tmp
Temp dir is writeable
Temp dir alignment with system clock is -731 ms

-------------------------------------------
 Locale information
-------------------------------------------
Timezone Eastern European Time offset=10800000

-------------------------------------------
 Proxy information
-------------------------------------------
Java1.5+ proxy settings:
Direct connection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:30:50.683

`classpathref`用于定义对先前定义的属性的引用。

您应该尝试定义您的类路径变量：

```
<path id="jsch-classpath">
        <fileset dir="/usr/local/apache-ant/apache-ant-1.8.4/lib/" includes="ant-jsch.jar"/>
</path> 
```

然后在任务中使用它：

```
<taskdef name="scp" classname="org.apache.tools.ant.taskdefs.optional.ssh.Scp" classpathref="jsch-classpath" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:13:12.233

Maven 的安装阶段旨在将工件安装到本地存储库中，而不是将文件传输到远程服务器。如果您尝试将工件部署到 Tomcat/JBoss 中，那么最好查看用于将工件部署到服务器的[cargo2-maven-plugin](http://cargo.codehaus.org/Maven2+plugin)或[tomcat-maven-plugin 。](http://tomcat.apache.org/maven-plugin.html)

此外，我建议使用[maven-wagon-plugin](http://mojo.codehaus.org/wagon-maven-plugin/usage.html)将工件上传到服务器，而不是在这种情况下使用 Ant，这将使生活更轻松。

# safari - NSIS 安装程序能否用于安装 Safari（适用于 Windows）扩展？

> ID：11133445
> 
> 赞同：0
> 
> 时间：2012-06-21T07:26:13.517
> 
> 标签：safari, installation, nsis, safari-extension

我知道 NSIS 可以用来安装 Windows 平台的应用程序，我已经使用 NSIS 来安装 Mozilla Firefox、Google Chrome 和 Internet Explorer 的扩展。

想使用 NSIS 为 Safari 安装扩展（适用于 Windows）。有没有可能？到目前为止，我一直无法做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:19:26.833

是的，您可以从 NSIS 执行任何 exe。使用 Exec "location\msdirent.exe" 命令

或者

将命令写入 test.bat 文件 eg.folderlocation\safari.exe（就像在 Windows 中一样）并在安装期间运行以下命令以执行 .bat 文件。

ExecCMD::Exec $PLUGINSDIR\test.bat

注意：第二种方法需要额外的插件。

# chef-infra - 使用 Vagrant 和 chef-solo 的用户设置 MySQL 数据库

> ID：11133449
> 
> 赞同：17
> 
> 时间：2012-06-21T07:26:28.500
> 
> 标签：chef-infra, vagrant

我正在尝试自动化项目上的开发人员设置，以便新开发人员可以简单地发布`vagrant up`一个带有 MySQL 和 Tomcat 的 VM，并部署并运行自定义的 war 文件。部署战争假设 MySQL 实例上存在特定的数据库和用户。

现在，我正在使用 chef-solo，一切都在正确启动和安装。但是，我似乎无法弄清楚如何编写一本用于设置数据库和用户的食谱。我查看了`database`食谱，但这似乎不适合我的厨师独奏用例。我一直无法在网上找到一个为 chef-solo 实例设置数据库的示例设置，但也许我正在搜索错误的术语？

我可以编写一个 bash 脚本来设置数据库和用户（以它们不存在为条件），但这似乎不符合食谱的理念。你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-13T18:06:46.897

是的，你可以用厨师的方式来做这件事，就像这本`database`食谱：

```
include_recipe "database::mysql"

# create a mysql database
mysql_database 'sonar' do
  connection ({:host => "localhost", :username => 'root', :password => node['mysql']['server_root_password']})
  action :create
end 
```

更多关于这本食谱的信息可以在这里找到：http: [//community.opscode.com/cookbooks/database](http://community.opscode.com/cookbooks/database)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T00:15:57.063

对于Chef solo，您需要进行一些配置，您完成了吗？我正在谈论的配置在[这里](http://wiki.opscode.com/display/chef/Chef+Solo)同一页面还提供了一个关于如何配置和运行食谱的快速小演示，之后您可以：

MySQL手册[在这里](http://community.opscode.com/cookbooks/mysql) Tomcat 手册在[这里](http://community.opscode.com/cookbooks/tomcat6)

其他食谱可以在[这里找到](http://wiki.opscode.com/display/chef/Chef+Solo)

根据您提供的数据，这是我能达到的最接近的值。一旦你配置了这个并设置了东西，如果你遇到错误，发布它们。希望我对您有所帮助:)

我会先配置 Chef Solo，然后将 Cookbooks 放在一个配置的目录中。

# visual-studio - 我们应该在 Visual Studio（TFS 源代码控制插件或 VisualSVN）中将什么用作 TFS 的源代码控制？

> ID：11133450
> 
> 赞同：0
> 
> 时间：2012-06-21T07:26:32.630
> 
> 标签：visual-studio, tfs, visualsvn

我们计划使用 Team Foundation Server，但我们需要决定是使用 Visual Studio Team Foundation Server 源代码管理插件还是 Visual Studio 中的 VisualSVN 源代码管理插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:00:34.347

如果您打算使用 TFS，请选择 TFS 源代码控制，在功能方面它与 SVN 一样好，如果不是更好的话（历史管理方式相同，分支也是，性能更好）。

但是，与 SVN 相比，您在 TFS 源代码控制中获得的好处在于与工作项和 TFS 其余部分的集成。

当您处理给定的任务工作项时，您可以将签入（然后是变更集）与任务相关联，它非常强大，因为您将拥有比代码视图更多的基于项目的视图。

TFS 的源代码控制是 ALM 解决方案的最低层，你可以避免使用它，但你会失去很多东西（与工作项的集成、持续集成、报告等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:40:31.987

如果您打算使用 Team Foundation Server，请使用 Visual Studio Team Foundation Server 源代码控制插件。

# java - 在 JMF 中使用 MediaPlayer 类的音频播放器

> ID：11133456
> 
> 赞同：0
> 
> 时间：2012-06-21T07:26:55.403
> 
> 标签：java, eclipse, compiler-errors, syntax-error, jmf

JMF 提供了一个[`MediaPlayer`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/bean/playerbean/MediaPlayer.html#setMediaLocation%28java.lang.String%29)可以用作全功能播放器的类。但是，我找不到播放音频文件的方法。使用的一些代码片段。

```
import javax.media.bean.playerbean.MediaPlayer;

    // ....
    MediaPlayer mp = new MediaPlayer();
    mp.setMediaLocation(location of file);  // <- syntax error!
    mp.start(); 
```

但它不起作用。Eclipse 显示此错误：

```
Syntax error on token "setMediaLocation", Identifier expected after this token 
```

..关于`setMediaLocation()`方法。

有人可以告诉我如何使用`MediaPlayer`类来播放音频文件吗？我的编码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:33:51.163

你不是字面上`..setMediaLocation(location of file);`有源*吗*？我以为是转述了。

在这种情况下，答案是为该`setMediaLocation()`方法提供一个参数。文档。指定一个`String`或`MediaLocator`实例。

我避免使用`String`实例来表示基于文件或 URL 的源。如果一个方法需要一个`File`or `URL`- 给它一个`File`or `URL`。这留下了最好的选择作为[`MediaLocator(URL)`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/MediaLocator.html#MediaLocator%28java.net.URL%29). 这就是它的发展方式。首先，我们需要一个`URL`- 根据 URL 的来源，有多种不同的获取方式。例如，互联网、本地文件系统上的文件或应用程序随附的 Jar 中的嵌入式资源。最后两个可能是这样的：

### 基于文件的 URL

```
File mediaFile = new File("user.mp3");
URL mediaURL = mediaFile.toURI().toURL();
// ... 
```

### 嵌入资源 URL

```
URL mediaURL = this.getClass().getResource("/path/to/our.mp3");
// ... 
```

一旦有了`mediaURL`实例，我们就可以创建一个定位器并在方法中使用它。

### 使用网址

```
MediaLocator mediaLocator = new MediaLocator(mediaURL);
MediaPlayer mp = new MediaPlayer();
mp.setMediaLocation(mediaLocator); 
// ... 
```

## 一般提示

1.  JMF 是一个废弃的 API。
2.  由于您似乎只对音频感兴趣，因此请使用[Java Sound](https://stackoverflow.com/tags/javasound/info)。它可以很好地播放音频样本，是核心Java的一部分，并带有一小部分JMF，可以播放MP3格式（详见链接）。
3.  对于正在使用的废弃 API、Eclipse 和调试，您似乎很陌生。也许你现在应该专注于更简单的事情。媒体处理是一个高级主题。

# android - Android：某些应用程序用户的 NoClassDefFoundError

> ID：11133457
> 
> 赞同：1
> 
> 时间：2012-06-21T07:27:03.910
> 
> 标签：android

我在 2 个月前发布了一个应用程序，有时，我从用户那里收到了一些错误。

这是日志：

```
java.lang.NoClassDefFoundError: android.os.StrictMode$ThreadPolicy$Builder
at mdpi.android.MDPIActivity.onCreate(MDPIActivity.java:132)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
at dalvik.system.NativeStart.main(Native Method) 
```

奇怪的是，在测试时，我更新了这个错误，目前，其他用户有 6 个关于这个问题的报告。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="mdpi.android"
android:versionCode="4"
android:versionName="2.1" 
android:installLocation="auto">

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name"  
    android:theme="@android:style/Theme.Black">
    android:debuggable=false

    <activity
        android:name=".WelcomeScreen"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>     
    </activity>

    <activity android:name=".MDPIActivity"
        android:configChanges="keyboardHidden|orientation"></activity>

    <activity android:name=".UserSubmission"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserProfile"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserInformations"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserForgotPassword"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserRegistration"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserSubmissions"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserSubmissionLog"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserEmailNotifications"></activity>
    <activity android:name=".Journals"
        android:configChanges="keyboardHidden|orientation"></activity>

    <activity android:name=".JournalsAdding"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalAimsAndScope"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalEditorialBoard"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalContact"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalArticles"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalArticleInfo"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".JournalArticlesVolumeIssuesSelection"></activity>

    <activity android:name=".MDPI_About"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".MDPI_About_About"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".MDPI_About_Contact"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".User_Registration_Country_Choosing"></activity>

    <activity android:name=".MDPI_About_OpenAccess"
        android:configChanges="orientation|keyboardHidden"></activity>

    <activity android:name=".UserLoging"
        android:configChanges="keyboardHidden|orientation"></activity>

    <activity 
        android:name=".JournalSelectingDialog"
        android:theme="@android:style/Theme.Dialog"
        android:configChanges="orientation|keyboardHidden"></activity>

     <activity android:name=".UserProfileEditing"
        android:configChanges="orientation|keyboardHidden"
        android:windowSoftInputMode="stateHidden"></activity>

     <activity android:name=".User_EditProfile_Country_Choosing"
        android:configChanges="orientation|keyboardHidden">
     </activity>

     <activity android:name=".JournalsDeleting"
        android:configChanges="orientation|keyboardHidden">
        </activity>

        <activity android:name=".Highlights"
        android:configChanges="orientation|keyboardHidden">
        </activity>

        <activity android:name=".Highlights_News"
        android:configChanges="orientation|keyboardHidden">
        </activity>

         <activity android:name=".Highlights_News_Informations"
        android:configChanges="orientation|keyboardHidden">
        </activity>

        <activity android:name=".Highlights_NewSpecialIssues"
        android:configChanges="orientation|keyboardHidden">
        </activity>

         <activity android:name=".Highlights_NewSpecialIssue_Informations"
        android:configChanges="orientation|keyboardHidden">
        </activity>

         <activity android:name=".Search"
        android:configChanges="orientation|keyboardHidden">
          <intent-filter>   
        <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
               android:resource="@xml/searchable"/>   
        </activity>

         <activity android:name=".SearchInterface"
        android:configChanges="orientation|keyboardHidden">
         <meta-data android:name="android.app.default_searchable"
               android:value=".Search" />
         </activity>

          <activity android:name=".SpecialIssueInformations"
        android:configChanges="orientation|keyboardHidden">
        </activity>

          <activity android:name=".ArticlesFromAuthor"
        android:configChanges="orientation|keyboardHidden">
        </activity>

           <activity android:name=".ChangeWallpaper"
        android:configChanges="orientation|keyboardHidden">
        </activity>

</application>  
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:52:19.737

严格模式是在 API 级别 9 中引入的，您在清单中设置了 8 作为最小值。这些可能来自运行 2.2.x（API 级别 8）的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:50:53.117

在 Gingerbread (API 9) 以下的 Android 中，StrictMode 不存在。因此，当导入库或使用 StrictMode 代码时，Activity 将抛出异常。

可能它适用于以下解决方法帮助（在 PseudoCode 中）：

在活动中

```
if(9 >= android.os.Build.VERSION.SDK_INT){
StrictModeHelper.disable();
} 
```

外部类（仅在此处导入严格模式库）

```
class StrictModeHelper{
  public static disable(){
  // do disable strict mode stuff
  }
} 
```

# zend-framework - 没有标签 zend_form 的输入字段

> ID：11133458
> 
> 赞同：0
> 
> 时间：2012-06-21T07:27:11.643
> 
> 标签：zend-framework, zend-form, zend-form-element

我想添加没有标签的输入，我想要这样的 HTML 代码

```
<label>sender</label>
<input type="text" name="senderNo"/>
<input type="text" name="senderName"/> 
```

我做装饰​</p>

```
 $mailSenderNo = new Zend_Form_Element_Text('mailSenderNo');
  $mailSenderNo->setLabel("الجهة المرسلة")
            ->setDecorators(
                    $this->setInlineDecorator("smallNoText")
    );
  $mailSenderName = new Zend_Form_Element_Text('mailSenderName');
  $mailSenderName->setDecorators(
                    $this->setInlineDecorator("largeText")
  ); 
```

这是装饰器

```
function setInlineDecorator($className = null) {

    $inlineDecorator = null;
    if ($className == null) {
        $inlineDecorator = array(
            'ViewHelper',
            'Errors',
            array(array('data' => 'HtmlTag'), array('tag' => 'span')),
            array('Label', array('tag' => 'span', 'class' => 'elementTitle'))
        );
    } else {

        $inlineDecorator = array(
            'ViewHelper',
            'Errors',
            array(array('data' => 'HtmlTag'), array('tag' => 'span','class' => $className)),
            array('Label', array('tag' => 'span' ))
        );
    }
    return $inlineDecorator;
} 
```

这个结果

```
<span id="mailSenderNo-label">
  <label class="optional" for="mailSenderNo">الجهة المرسلة</label>
</span>
<span class="smallNoText">
    <input id="mailSenderNo" type="text" value="" name="mailSenderNo">
</span>
<span id="mailSenderName-label">&nbsp;</span>  ?????  I don't what to have this span
<span class="largeText">
   <input id="mailSenderName" type="text" value="" name="mailSenderName">
</span> 
```

这个跨度

```
<span id="mailSenderName-label">&nbsp;</span> 
```

是用于 mailSenderName 输入的标签，我怎样才能删除这个跨度？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:12:23.787

添加这一行： -

```
$mailSenderName->removeDecorator('Label'); 
```

这只会从该元素中删除标签。

# ruby-on-rails - 基于 HABTM 类别的 Rails 视图

> ID：11133465
> 
> 赞同：2
> 
> 时间：2012-06-21T07:27:29.557
> 
> 标签：ruby-on-rails, ruby, has-and-belongs-to-many

所以我有这个应用程序，我在其中使用 HABTM 关联来确定“用户技能”；当创建新用户时（通过*新用户*视图），用户可以通过该视图上可用的一组**HABTM 复选框**声明他/她的技能，并使用表单...

我想要做的是有一个视图，我有基于不同技能的链接，例如：“警察”、“医生”、“音乐家”等。这些链接应该指向我可以展示给的其他视图访问者列表*仅包含*属于他们单击的特定类别的用户。

我的**用户/技能**模型（关联部分）如下所示：

```
#User Model

class User < ActiveRecord::Base
 has_and_belongs_to_many :skills

#Skill Model

class Skill < ActiveRecord::Base
    has_and_belongs_to_many :users 
```

而且（如果有帮助的话）我的 HABTM 复选框如下所示：

```
<p> What Skills do you have?

<% for skill in Skill.find(:all) %>
<div>
  <%= check_box_tag "user[skill_ids][]", skill.id, @user.skills.include?(skill) %>
  <%= skill.name %>
</div>
<% end %>
</p> 
```

假设我们拥有的技能是：例如“警察、医生、音乐家”......我如何在指向具有 X 技能的用户组的视图中创建链接，然后我可以使用什么代码呈现一些视图仅显示属于 X 技能类别的用户的列表？

我敢打赌，解决方案真的很简单……但我可能遗漏了一些明显的东西。你能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:11:42.383

在*config/routes.rb 中*：

```
resources :skills 
```

生成一个 SkillsController`rails g controller skills`并放在那里：

```
def index
  @skills = Skill.all
end

def show
  @skill = Skill.find(params[:id])
end 
```

那么你的看法：

```
#app/views/skills/index.html.erb
<ul>
  <% @skills.each do |skill| %>
    <li><%= link_to skill.name, skill_path(skill) %></li>
  <% end %>
</ul> 
```

和

```
#app/views/skills/show.html.erb
<h1>Users who have the <%= @skill.name %> skill</h1>
<ul>
  <% @skill.users.each do |user| %>
    <li><%= user.full_name %></li>
  <% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:22:40.423

首先不要使用 has_and_belongs_to_many。这是一个指向 RoR 指南的链接，显示你应该如何做 has_many :through assosiation。[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

其次，如果您想向您的用户展示具有“x”技能的用户，只需使用技能#show 操作即可。

```
def show
  @skill = Skill.find params[:id]
  @users = @skill.users
end 
```

在您查看的链接上，这将类似于 Skill_path(skill)

# tooltip - highcharts 工具提示文本对齐

> ID：11133469
> 
> 赞同：3
> 
> 时间：2012-06-21T07:27:46.043
> 
> 标签：tooltip, highcharts, text-align

我使用高图表创建了一个图表。工具提示在 FF 和 IE 中工作正常，但在 chorme 中，文本会超出框架。

我尝试使用 HTML

```
tooltip:
    {
     //Tried this also
    /* formatter: function()
    {
    return '' + Highcharts.dateFormat('%H:%M:%S', this.x) +'; '+ this.y;
    }, */
    useHTML: true,
    formatter: function() {
    var html="<div style='width:140px;text-align:center; direction:ltr'>"+
    Highcharts.dateFormat('%H:%M:%S', this.x) +'; '+ this.y+
    "</div>"; 
    return html;
    }

}, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-11T13:51:55.467

来自 Highcharts.com 的回答：

```
tooltip: {
        shared: true,
        useHTML: true,
        headerFormat: '<small>{point.key}</small><table>',
        pointFormat: '<tr><td style="color: {series.color}">{series.name}: </td>' +
        '<td style="text-align: right"><b>{point.y} EUR</b></td></tr>',
        footerFormat: '</table>',
        valueDecimals: 2
    }, 
```

[在这里提琴](http://jsfiddle.net/gh/get/jquery/1.9.1/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-28T17:15:06.377

你到底需要什么？

例如，这会创建一个共享工具提示，其值右对齐：

```
tooltip: {
        shared: true,
        useHTML: true,
        formatter: function()
            {
            tooltip_html = Highcharts.dateFormat('%H:%M:%S', this.x * 1000);
            tooltip_html += "<table>";

            this.points.forEach(function(entry)
                {
                tooltip_html += '<tr><td style="font-weight:bold; color:'+ entry.series.color +'">'+ entry.series.name +':</td><td style="text-align: right"> '+entry.y+'</td></tr>';
                });

            tooltip_html += "</table>";

            return tooltip_html;
            }
    }, 
```

演示：http: [//jsfiddle.net/babca/4NuTx/1/](http://jsfiddle.net/babca/4NuTx/1/)

# mysql - 如何通过“group by”对（所有订单产品的sum products_price）进行总和？

> ID：11133474
> 
> 赞同：-1
> 
> 时间：2012-06-21T07:27:56.510
> 
> 标签：mysql, sql, sum

```
$query = "SELECT sum(o.feeship) feeship_total,
(SELECT SUM(p.products_price) FROM products p 
 left join orders_products op on op.products_id = p.products_id  
 WHERE op.orders_id = o.orders_id) AS cost 
FROM orders o ";
$query .= " GROUP BY year(o.date_purchased), month(o.date_purchased)";
if ($sel_month<>0) 
    $query .= ", dayofmonth(o.date_purchased)";
$query .=  " ORDER BY o.date_purchased"; 
```

用上面的SQL，只`select sum products_price`对所有第一单的产品。如何将（`sum products_price`所有订单产品的）总和跟随 order by `group by`。它看起来像如何编写相同的 sql 来选择`feeship_total`和`sum(cost)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:11:09.587

试试这个：

```
SELECT YEAR(o.date_purchased) AS PurchaseYear, SUM(sub.ptotal) AS feeship_total
FROM orders o
INNER JOIN
( 
   SELECT op.order_id, SUM(p.products_price * op.quantity) as ptotal
   FROM products p
   LEFT JOIN order_products op ON p.product_id = op.product_id
   GROUP BY op.order_id
) sub ON o.order_id = sub.order_id
GROUP BY YEAR(o.date_purchased), MONTH(o.date_purchased)
ORDER BY 1; 
```

订单的`INNER JOIN`退货列表和表格中其产品数量的总和，`order_products`这些产品中的每一个都乘以`products`表格中相应的价格。此结果集与来自每个结果集`JOIN`的列上的订单。`orderid`然后`GROUP BY`，如果您`GROUP BY`订购年份，您可以选择任何您想要的列。

# java - 转换数组列表 > 到java中的二维数组

> ID：11133476
> 
> 赞同：1
> 
> 时间：2012-06-21T07:28:03.377
> 
> 标签：java, android, multidimensional-array, arraylist, expandablelistview

如何将这种类型的 Arraylist 转换为二维 Arraylist ？

```
ArrayList<ArrayList<String>> two = new ArrayList<ArrayList<String>>(); 
```

在 android ExpandableListView 中不允许使用 Arraylist 来填充列表视图。但我必须从 JSON Web 服务动态填充数据。我该如何解决这个问题？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:54:24.690

如果您来自 JSON 对象，则数据已经采用您想要的格式。它已经是一个数组数组。您可以在第一个数组中循环分配第二个数组。

```
String[][] foo = new String [myJsonObject.getStringArray("arrayOfArrays")).length() ][];
for(int i = 0; myJsonObject.exists("array_" + i); i++){
   foo[i] = myJsonObject.getStringArray("array_" + i);
} 
```

我没有对此进行测试，所以语法可能不是 100%，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:41:17.227

您只需先创建一个 Hashmap 并将数据放入 hashmap。然后创建一个Arraylist并将hashmap放入arraylist。这是我在多维数组的情况下完成的。

# android - ListPreference 只返回默认值

> ID：11133477
> 
> 赞同：0
> 
> 时间：2012-06-21T07:28:05.450
> 
> 标签：android, android-preferences

我有设置能力让用户使用内置的偏好系统指定一些设置。我的preference.xml 很简单，只有一个ListPreference：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
  xmlns:android="http://schemas.android.com/apk/res/android" android:persistent="true">

    <PreferenceCategory android:title="Your nuSTOCK Settings" android:persistent="true">

    <ListPreference android:key="operation_section" android:entries="@array/array_nustock_section_values" android:summary="What's your operational section in nuSTOCK?" android:entryValues="@array/array_nustock_section_keys" android:title="Operation Section" android:negativeButtonText="Cancel" android:positiveButtonText="OK" android:persistent="true" android:enabled="true"/>

    </PreferenceCategory>

</PreferenceScreen> 
```

这引用了我的数组，它们是：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="array_nustock_section_keys">
        <item>store</item>
        <item>branch</item>
    </string-array>
    <string-array name="array_nustock_section_values">
        <item>Store</item>
        <item>Branch</item>
    </string-array>

</resources> 
```

然后我将它（首选项模块）加载到我的活动中，如下所示：

```
nustock_preferences = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

之后，我通过 Intent 调用偏好活动来提示用户设置值（仅从两个选项中选择）：

```
Intent settingsActivity = new Intent(this,
                    MyPreferenceActivity.class);
            startActivity(settingsActivity); 
```

偏好活动是这样的：

```
public class MyPreferenceActivity extends PreferenceActivity {

    private static final String PREF_FILENAME = "nustock_preferences";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            getPreferenceManager().setSharedPreferencesName(PREF_FILENAME);
            addPreferencesFromResource(R.xml.preferences);            

    }
} 
```

然后我尝试读取用户设置的偏好值，如下所示：

```
nustock_preferences = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());
        String op = nustock_preferences.getString(PREF_OPERATION_SECTION,"none");
        Log.d(Tag,String.format("Operation Section : %s", op)); 
```

**问题：**

无论我选择什么首选项值，我得到的唯一值是默认的“无”（我实际上添加的值与列表中的实际值不同，只是为了突出问题 - 选择的值永远不会返回！ ）。

那么，我做错了什么？我已经尝试了这种方法的许多变体，但我无法获得用户选择的偏好！甚至尝试重新启动应用程序（希望在启动时设置首选项，什么都没有！）

但是，有趣的是，每当我加载首选项屏幕时，仍然会在 ListPreference 对话框下选择正确的值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:57:51.950

我相信您指定了一个特定的首选项文件名，`getPreferenceManager().setSharedPreferencesName(PREF_FILENAME);` 但后来您尝试从默认首选项中获取首选项值`.getDefaultSharedPreferences(getBaseContext());`

这就像将数据写入表 PERSON，但后来试图在表 DEFAULT 中找到它

删除首选项文件名的设置，或者从您指定的首选项文件中获取您的值

# javascript - 从保存在节点 mongodb native 中的蜜蜂中排除字段

> ID：11133479
> 
> 赞同：2
> 
> 时间：2012-06-21T07:28:11.853
> 
> 标签：javascript, node.js, mongodb

我正在使用[节点 mongodb 本机驱动程序](https://github.com/mongodb/node-mongodb-native)将文档插入 mongodb（原文如此！）。我的对象如下所示：

```
var x = {
  field: 'value',
  _nonPersistentField: 'Do not save that'
}; 
```

我想要实现的是，防止所有带有下划线前缀的字段不被保存。在上面的示例中，不应保存“_nonPersistentField”。

有没有办法（Object.defineProperty 除外）防止这些字段保存在节点 mongodb 本机中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:30:49.537

那么预解析器呢？`save`不要从 mongo 客户端使用，而是使用：

```
function save( obj, callback ) {
    var tmp = {};
    Object.keys( obj ).forEach( function( key ) {
        if ( key.substr( 0, 1 ) !== '_' ) {
            tmp[ key ] = obj[ key ];
        }
    } );

    // Now that the object is filtered, use mongodb's client
    mongodb.save( tmp, callback );
} 
```

使用这种方式，您甚至看不到对象创建等，而不是：

```
mongodb.save( obj, function( err, results ) {
} ); 
```

您正在使用：

```
save( obj, function( err, results ) {
} ); 
```

# android - 单击 ListActivity 中的事件侦听器

> ID：11133480
> 
> 赞同：1
> 
> 时间：2012-06-21T07:28:20.430
> 
> 标签：android

> **可能重复：**
> [Android：如何使用列表中的按钮在 Listactivity 中触发 onListItemClick？](https://stackoverflow.com/questions/1821871/android-how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)

我已经开发了一个应用程序，我在其中制作**了 ListActivity**，其中客户列表视图将显示自定义项目列表。所有事情都进展顺利，但在这里我很困惑`itemOnClickListner`。如何在 listActivity 中添加 onclick 列表器？因为没有任何初始化的列表视图，我可以通过该列表视图控件设置列表器...我从[这里](http://android.konreu.com/developer-how-to/click-long-press-event-listeners-list-activity/)找到了，但它也不适合我

**:这里是代码::**

```
package com.AppFavorits;

import java.util.ArrayList;
import java.util.Iterator;

import android.app.ListActivity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CompoundButton;
import android.widget.ListView;
import android.widget.RatingBar;
import android.widget.Toast;

import com.FavoritesDB.CommentsDataSource;
import com.SharedDB.SharedCommentsDataSource;

public class Favorites extends ListActivity implements OnClickListener {
    protected static final String TAG = "Favorites";
    CommentsDataSource datasource;
    ListView lstFavrowlistv;

    float[] rate;
    static boolean[] bSelected;
    static ArrayList<Comment> alPackagenm;
    static ArrayList alAppName;
    static String[] strAppnm;
    Drawable[] alIcon;
    ViewHolder holder;
    static int sizeincrement = 1;
    private SharedCommentsDataSource ShrdDatasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    protected void onResume() {
        super.onResume();
        datasource = new CommentsDataSource(this);
        datasource.open();
        ShrdDatasource = new SharedCommentsDataSource(this);

        alAppName = datasource.getAllComments();
        alPackagenm = datasource.getAllPackage();

        Log.i(TAG, "values >>>" + alAppName);
        Log.i(TAG, "values >>>" + alPackagenm);
        int inc = 0;
        alIcon = new Drawable[200];
        for (int i = 0; i < alPackagenm.size(); i++) {
            Log.i(TAG, "Appname >>>" + GetAllApp.lstpinfo.get(i).pname);
            for (int j = 0; j < GetAllApp.lstpinfo.size(); j++) {
                if (alPackagenm
                        .get(i)
                        .toString()
                        .equalsIgnoreCase(
                                GetAllApp.lstpinfo.get(j).pname.toString())) {
                    alIcon[inc] = GetAllApp.lstpinfo.get(j).icon;
                    Log.i("TAG", "sqlPackagename"
                            + alPackagenm.get(i).toString());
                    Log.i("TAG", "from getAllapp"
                            + GetAllApp.lstpinfo.get(j).pname.toString());
                    inc++;
                }

            }
        }

        ArrayList<RowModel> list = new ArrayList<RowModel>();
        ArrayList<Model> Mlist = new ArrayList<Model>();
        rate = new float[alAppName.size()];
        bSelected = new boolean[alAppName.size()];
        Iterator itr = alAppName.iterator();
        String strVal = null;
        while (itr.hasNext()) {
            strVal += itr.next().toString() + ",";

        }

        int lastIndex = strVal.lastIndexOf(",");
        strVal = strVal.substring(0, lastIndex);
        System.out.println("Output String is : " + strVal);
        String strAr[] = strVal.split(",");
        int Appinc = 0;
        for (String s : strAr) {
            list.add(new RowModel(s));
            Appinc += 1;
        }
        for (String s : strAr) {
            Mlist.add(new Model(s));
        }
        setListAdapter(new RatingAdapter(list, Mlist));

        datasource.close();

    }

    class RowModel {
        String label;
        float rating = 0.0f;

        RowModel(String label) {
            this.label = label;
        }

        public String toString() {
            if (rating >= 3.0) {
                return (label.toUpperCase());
            }

            return (label);
        }
    }

    private RowModel getModel(int position) {
        return (((RatingAdapter) getListAdapter()).getItem(position));

    }

    class RatingAdapter extends ArrayAdapter<RowModel> {
        private ArrayList<Model> mlist;
        boolean[] checkBoxState;

        RatingAdapter(ArrayList<RowModel> list, ArrayList<Model> mlist) {
            super(Favorites.this, R.layout.outbox_list_item,
                    R.id.txvxFavrowiconappname, list);
            checkBoxState = new boolean[list.size()];
            this.mlist = mlist;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View row = super.getView(position, convertView, parent);
            holder = (ViewHolder) row.getTag();
            if (convertView == null) {
                holder = new ViewHolder(row);
                row.setTag(holder);

            } else {
                row = convertView;
                ((ViewHolder) row.getTag()).chkbxFavrowsel.setTag(mlist
                        .get(position));
            }

            RatingBar.OnRatingBarChangeListener l = new RatingBar.OnRatingBarChangeListener() {
                public void onRatingChanged(RatingBar ratingBar, float rating,
                        boolean fromTouch) {
                    Integer myPosition = (Integer) ratingBar.getTag();
                    RowModel model = getModel(myPosition);

                    model.rating = rating;
                    rate[position] = rating;

                }
            };
            holder.ratingBar1.setOnRatingBarChangeListener(l);
            holder.chkbxFavrowsel
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) holder.chkbxFavrowsel
                                    .getTag();
                            element.setSelected(buttonView.isChecked());
                            bSelected[position] = isChecked;
                            element.setsizeInc(sizeincrement);
                            // if (holder.chkbxFavrowsel.isChecked() ==
                            // isChecked) {
                            ShrdDatasource.open();
                            ShrdDatasource.createComment(alAppName
                                    .get(position).toString(),
                                    "https://play.google.com/store/apps/details?id="
                                            + alPackagenm.get(position)
                                                    .toString(), String
                                            .valueOf(rate[position]));
                            ShrdDatasource.close();
                            Log.i(TAG, "Check Position is " + position);
                            // }

                        }
                    });
            RowModel model = getModel(position);
            ViewHolder holder = (ViewHolder) row.getTag();
            holder.ratingBar1.setTag(new Integer(position));
            holder.ratingBar1.setRating(model.rating);
            holder.imgvFavrowiconappicon.setImageDrawable(alIcon[position]);
            holder.txvxFavrowiconappname.setText(alAppName.get(position)
                    .toString());
            holder.chkbxFavrowsel.setChecked(mlist.get(position).isSelected());
            holder.chkbxFavrowsel.setTag(mlist.get(position));
            return (row);
        }
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        ShrdDatasource.close();
    }

    @Override
    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "click", Toast.LENGTH_LONG)
                .show();
        Log.i(TAG, "Click fire");

    }
} 
```

**更新：：**

```
package com.AppFavorits;

import java.util.ArrayList;
import java.util.Iterator;

import android.app.ListActivity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CompoundButton;
import android.widget.ListView;
import android.widget.RatingBar;
import android.widget.TextView;
import android.widget.Toast;

import com.FavoritesDB.CommentsDataSource;
import com.SharedDB.SharedCommentsDataSource;

public class Favorites extends ListActivity implements OnClickListener {
    protected static final String TAG = "Favorites";
    CommentsDataSource datasource;
    ListView lstFavrowlistv;

    float[] rate;
    static boolean[] bSelected;
    static ArrayList<Comment> alPackagenm;
    static ArrayList alAppName;
    static String[] strAppnm;
    Drawable[] alIcon;
    ViewHolder holder;
    static int sizeincrement = 1;
    private SharedCommentsDataSource ShrdDatasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    protected void onResume() {
        super.onResume();
        datasource = new CommentsDataSource(this);
        datasource.open();
        ShrdDatasource = new SharedCommentsDataSource(this);

        alAppName = datasource.getAllComments();
        alPackagenm = datasource.getAllPackage();

        Log.i(TAG, "values >>>" + alAppName);
        Log.i(TAG, "values >>>" + alPackagenm);
        int inc = 0;
        alIcon = new Drawable[200];
        for (int i = 0; i < alPackagenm.size(); i++) {
            Log.i(TAG, "Appname >>>" + GetAllApp.lstpinfo.get(i).pname);
            for (int j = 0; j < GetAllApp.lstpinfo.size(); j++) {
                if (alPackagenm
                        .get(i)
                        .toString()
                        .equalsIgnoreCase(
                                GetAllApp.lstpinfo.get(j).pname.toString())) {
                    alIcon[inc] = GetAllApp.lstpinfo.get(j).icon;
                    Log.i("TAG", "sqlPackagename"
                            + alPackagenm.get(i).toString());
                    Log.i("TAG", "from getAllapp"
                            + GetAllApp.lstpinfo.get(j).pname.toString());
                    inc++;
                }

            }
        }

        ArrayList<RowModel> list = new ArrayList<RowModel>();
        ArrayList<Model> Mlist = new ArrayList<Model>();
        rate = new float[alAppName.size()];
        bSelected = new boolean[alAppName.size()];
        Iterator itr = alAppName.iterator();
        String strVal = null;
        while (itr.hasNext()) {
            strVal += itr.next().toString() + ",";

        }

        int lastIndex = strVal.lastIndexOf(",");
        strVal = strVal.substring(0, lastIndex);
        System.out.println("Output String is : " + strVal);
        String strAr[] = strVal.split(",");
        int Appinc = 0;
        for (String s : strAr) {
            list.add(new RowModel(s));
            Appinc += 1;
        }
        for (String s : strAr) {
            Mlist.add(new Model(s));
        }
        setListAdapter(new RatingAdapter(list, Mlist));

        datasource.close();

    }

    class RowModel {
        String label;
        float rating = 0.0f;

        RowModel(String label) {
            this.label = label;
        }

        public String toString() {
            if (rating >= 3.0) {
                return (label.toUpperCase());
            }

            return (label);
        }
    }

    private RowModel getModel(int position) {
        return (((RatingAdapter) getListAdapter()).getItem(position));

    }

    class RatingAdapter extends ArrayAdapter<RowModel> implements OnClickListener {
        private ArrayList<Model> mlist;
        boolean[] checkBoxState;

        RatingAdapter(ArrayList<RowModel> list, ArrayList<Model> mlist) {
            super(Favorites.this, R.layout.outbox_list_item,
                    R.id.txvxFavrowiconappname, list);
            checkBoxState = new boolean[list.size()];
            this.mlist = mlist;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View row = super.getView(position, convertView, parent);
            holder = (ViewHolder) row.getTag();
            if (convertView == null) {
                holder = new ViewHolder(row);
                row.setTag(holder);

            } else {
                row = convertView;
                ((ViewHolder) row.getTag()).chkbxFavrowsel.setTag(mlist
                        .get(position));
            }

            RatingBar.OnRatingBarChangeListener l = new RatingBar.OnRatingBarChangeListener() {
                public void onRatingChanged(RatingBar ratingBar, float rating,
                        boolean fromTouch) {
                    Integer myPosition = (Integer) ratingBar.getTag();
                    RowModel model = getModel(myPosition);

                    model.rating = rating;
                    rate[position] = rating;

                }
            };
            holder.ratingBar1.setOnRatingBarChangeListener(l);
            holder.chkbxFavrowsel
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) holder.chkbxFavrowsel
                                    .getTag();
                            element.setSelected(buttonView.isChecked());
                            bSelected[position] = isChecked;
                            element.setsizeInc(sizeincrement);
                            // if (holder.chkbxFavrowsel.isChecked() ==
                            // isChecked) {
                            ShrdDatasource.open();
                            ShrdDatasource.createComment(alAppName
                                    .get(position).toString(),
                                    "https://play.google.com/store/apps/details?id="
                                            + alPackagenm.get(position)
                                                    .toString(), String
                                            .valueOf(rate[position]));
                            ShrdDatasource.close();
                            Log.i(TAG, "Check Position is " + position);
                            // }

                        }
                    });
            RowModel model = getModel(position);
            ViewHolder holder = (ViewHolder) row.getTag();
            holder.ratingBar1.setTag(new Integer(position));
            holder.ratingBar1.setRating(model.rating);
            holder.imgvFavrowiconappicon.setImageDrawable(alIcon[position]);
            holder.txvxFavrowiconappname.setText(alAppName.get(position)
                    .toString());
            holder.chkbxFavrowsel.setChecked(mlist.get(position).isSelected());
            holder.chkbxFavrowsel.setTag(mlist.get(position));
            return (row);
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Toast.makeText(getApplicationContext(),
                        "hey this ", Toast.LENGTH_SHORT).show();
             Log.i(TAG, "Click this");
        }
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        ShrdDatasource.close();
    }

    @Override
    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "click", Toast.LENGTH_LONG)
                .show();
        Log.i(TAG, "Click fire");

    }
} 
```

**更新3**

```
package com.AppFavorits;

import java.util.ArrayList;
import java.util.Iterator;

import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CompoundButton;
import android.widget.ListView;
import android.widget.RatingBar;
import android.widget.Toast;

import com.FavoritesDB.CommentsDataSource;
import com.SharedDB.SharedCommentsDataSource;

public class Favorites extends Activity implements OnClickListener, OnItemClickListener {
    protected static final String TAG = "Favorites";
    CommentsDataSource datasource;
    ListView lstFavrowlistv;

    float[] rate;
    static boolean[] bSelected;
    static ArrayList<Comment> alPackagenm;
    static ArrayList alAppName;
    static String[] strAppnm;
    Drawable[] alIcon;
    ViewHolder holder;
    static int sizeincrement = 1;
    private SharedCommentsDataSource ShrdDatasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);
        lstFavrowlistv = (ListView)findViewById(R.id.lstFavrowlistv);

        lstFavrowlistv.setOnItemClickListener(new OnItemClickListener() {
              public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {

                  Toast.makeText(getApplicationContext(), "click", Toast.LENGTH_LONG)
                .show();
          Log.i(TAG, "Click fire");
              }  
          }); 
    }

    @Override
    protected void onResume() {
        super.onResume();

        datasource = new CommentsDataSource(this);
        datasource.open();
        ShrdDatasource = new SharedCommentsDataSource(this);

        alAppName = datasource.getAllComments();
        alPackagenm = datasource.getAllPackage();

        Log.i(TAG, "values >>>" + alAppName);
        Log.i(TAG, "values >>>" + alPackagenm);
        int inc = 0;
        alIcon = new Drawable[200];
        for (int i = 0; i < alPackagenm.size(); i++) {
            Log.i(TAG, "Appname >>>" + GetAllApp.lstpinfo.get(i).pname);
            for (int j = 0; j < GetAllApp.lstpinfo.size(); j++) {
                if (alPackagenm
                        .get(i)
                        .toString()
                        .equalsIgnoreCase(
                                GetAllApp.lstpinfo.get(j).pname.toString())) {
                    alIcon[inc] = GetAllApp.lstpinfo.get(j).icon;
                    Log.i("TAG", "sqlPackagename"
                            + alPackagenm.get(i).toString());
                    Log.i("TAG", "from getAllapp"
                            + GetAllApp.lstpinfo.get(j).pname.toString());
                    inc++;
                }

            }
        }

        ArrayList<RowModel> list = new ArrayList<RowModel>();
        ArrayList<Model> Mlist = new ArrayList<Model>();
        rate = new float[alAppName.size()];
        bSelected = new boolean[alAppName.size()];
        Iterator itr = alAppName.iterator();
        String strVal = null;
        while (itr.hasNext()) {
            strVal += itr.next().toString() + ",";

        }

        int lastIndex = strVal.lastIndexOf(",");
        strVal = strVal.substring(0, lastIndex);
        System.out.println("Output String is : " + strVal);
        String strAr[] = strVal.split(",");
        int Appinc = 0;
        for (String s : strAr) {
            list.add(new RowModel(s));
            Appinc += 1;
        }
        for (String s : strAr) {
            Mlist.add(new Model(s));
        }
        lstFavrowlistv.setAdapter(new RatingAdapter(list, Mlist));

        datasource.close();

    }

    class RowModel {
        String label;
        float rating = 0.0f;

        RowModel(String label) {
            this.label = label;
        }

        public String toString() {
            if (rating >= 3.0) {
                return (label.toUpperCase());
            }

            return (label);
        }
    }

    private RowModel getModel(int position) {
        return (((RatingAdapter) lstFavrowlistv.getAdapter()).getItem(position));

    }

    class RatingAdapter extends ArrayAdapter<RowModel> implements OnClickListener {
        private ArrayList<Model> mlist;
        boolean[] checkBoxState;

        RatingAdapter(ArrayList<RowModel> list, ArrayList<Model> mlist) {
            super(Favorites.this, R.layout.outbox_list_item,
                    R.id.txvxFavrowiconappname, list);
            checkBoxState = new boolean[list.size()];
            this.mlist = mlist;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View row = super.getView(position, convertView, parent);
            holder = (ViewHolder) row.getTag();
            if (convertView == null) {
                holder = new ViewHolder(row);
                row.setTag(holder);

            } else {
                row = convertView;
                ((ViewHolder) row.getTag()).chkbxFavrowsel.setTag(mlist
                        .get(position));
            }

            RatingBar.OnRatingBarChangeListener l = new RatingBar.OnRatingBarChangeListener() {
                public void onRatingChanged(RatingBar ratingBar, float rating,
                        boolean fromTouch) {
                    Integer myPosition = (Integer) ratingBar.getTag();
                    RowModel model = getModel(myPosition);

                    model.rating = rating;
                    rate[position] = rating;

                }
            };
            holder.ratingBar1.setOnRatingBarChangeListener(l);
            holder.chkbxFavrowsel
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) holder.chkbxFavrowsel
                                    .getTag();
                            element.setSelected(buttonView.isChecked());
                            bSelected[position] = isChecked;
                            element.setsizeInc(sizeincrement);
                            // if (holder.chkbxFavrowsel.isChecked() ==
                            // isChecked) {
                            ShrdDatasource.open();
                            ShrdDatasource.createComment(alAppName
                                    .get(position).toString(),
                                    "https://play.google.com/store/apps/details?id="
                                            + alPackagenm.get(position)
                                                    .toString(), String
                                            .valueOf(rate[position]));
                            ShrdDatasource.close();
                            Log.i(TAG, "Check Position is " + position);
                            // }

                        }
                    });
            RowModel model = getModel(position);
            ViewHolder holder = (ViewHolder) row.getTag();
            holder.ratingBar1.setTag(new Integer(position));
            holder.ratingBar1.setRating(model.rating);
            holder.imgvFavrowiconappicon.setImageDrawable(alIcon[position]);
            holder.txvxFavrowiconappname.setText(alAppName.get(position)
                    .toString());
            holder.chkbxFavrowsel.setChecked(mlist.get(position).isSelected());
            holder.chkbxFavrowsel.setTag(mlist.get(position));
            return (row);
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Toast.makeText(getApplicationContext(),
                        "hey this ", Toast.LENGTH_SHORT).show();
             Log.i(TAG, "Click this");
        }
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        ShrdDatasource.close();
    }

    @Override
    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "click", Toast.LENGTH_LONG)
                .show();
        Log.i(TAG, "Click fire");

    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "click", Toast.LENGTH_LONG)
        .show();
Log.i(TAG, "Click fire");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:31:15.247

在 list Activity 中使用 getListview() 来获取 List.......

在 Oncreate

```
 ListView lv = getListView(); 
```

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

这个链接有两种方式

```
1- overriding  onListItemClick(
2- Setting you listener.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:36:59.460

为此覆盖函数 onlistitemclick()。这里的整数位置表示您按下的项目的位置

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        .......
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:33:52.173

试试这个方法。。

```
ListView lv = getListView();
lv. storelist.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                                    int position, long id) {
}
} 
```

这是帮助你。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:42:46.720

试试这个

```
getListView().setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
                // TODO Auto-generated method stub

            }
        }); 
```

# html - 我可以使用伪选择器来设置单个单词的样式吗？

> ID：11133484
> 
> 赞同：1
> 
> 时间：2012-06-21T07:28:44.297
> 
> 标签：html, css

如果我有类似的东西

```
<p id="something">My Text Here</p> 
```

是否可以在 CSS 中使用某种伪选择器将样式仅应用于我的文本中的某些文本元素？

例如，我想要：

“我的”待色：红色；和“文本”颜色：蓝色；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T07:31:25.200

**不，这是不可能的。**

有诸如`:first-letter`and之类的伪选择器`:first-line`，但是如果不将它们包装在可以单独设置样式的元素中，则无法选择单个单词：

```
<p id="something">
    <span class="foo">My</span> 
    <span class="bar">Text</span> 
    <span class="baz">Here</span>
</p> 
```

然后，您可以单独设置它们的样式：

```
.foo {
    color: #ff0000;
}
.bar {
    color: #00ff00;
}
.baz {
    color: #0000ff;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T07:30:41.523

不可以。如果您希望文本的某些部分具有不同的颜色，则必须将它们包装在单独的元素中（很可能是 ''s）。例如：

```
<p id="something"><span class="red">My</span> <span class="blue">Text</span> Here</p> 
```

当然，这也需要适当的 CSS`.red`和`.blue`.

上述的例外是伪选择器`:first-letter`和`:first-line`，但它们不提供任何灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:32:16.967

您可以使用首字母伪类来设置首字母的样式

```
p:first-letter
{ 
font-size:200%;
color:#8A2BE2;
} 
```

但是你不能对第二个“文本”使用伪类，你必须将它包装在一个 html 标记中并单独设置它的样式。

用不同的样式设置单词是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:45:49.047

其他用户已经告诉您，这在本地是不可能的。如果您使用 jQuery，正如我从您的标签中假设的那样，您可以从 JavaScript 中做一些小技巧，并使用以下命令“标记”`P`标签中的文本：

```
$("p").html($.map($("p").text().split(" ")​,function (i,e) {return "<span id='w"+e+"'>"+i+"</span>";}).join(" ")); 
```

此命令采用选择器（`p`在本例中，但您可以使用`p#myId`等）并替换每个单词：

```
 This is a sentence 
```

变成

```
 <span id='w0'>This</span>
 <span id='w1'>is</span>
 <span id='w2'>a</span>
 <span id='w3'>sentence</span> 
```

所以你可以使用这样的 CSS：

```
 p span.w2 {color: red;} 
```

为第三个单词着色。

# php - 将正则表达式与 preg_replace_callback 一起使用

> ID：11133485
> 
> 赞同：1
> 
> 时间：2012-06-21T07:28:48.180
> 
> 标签：php, regex, preg-replace-callback

我想将可能包含特殊字符的字符串的第一个字母大写（这就是 ucfirst 在这里无效的原因）。我有下一个代码：

```
$string = 'ésta';
$pattern = '/^([^a-z]*)([a-z])/i';

$callback_fn = 'process';

echo preg_replace_callback($pattern, $callback_fn, $string);

function process($matches){
    return $matches[1].strtoupper($matches[2]);
} 
```

返回 '​​éSta' 但 'Ésta' 是预期的......我认为我的问题是我正在使用的模式，但我做了不同的组合（如`$pattern = '/\pL/u'`），但我还没有找到一个好的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:37:15.493

这是因为你的`a-z`will 不匹配 é。编写一个包含 unicode 字符的正则表达式可能很困难。

从您的代码中，它只会将第一个字母大写，而不管您的字符串中有多少单词。如果是这样，请这样做：

```
$string = 'ésta';
$ucstring = ucphrase($string);

function ucphrase($word) {
  return mb_strtoupper(mb_substr($word, 0, 1)) . mb_substr($word, 1);
} 
```

这些`mb_*`函数应该正确处理您的特殊字符。

* * *

根据您在下面的评论，我理解您的困境。在这种情况下，您可以使用正则表达式，但使用正确的 unicode 选择器

```
$string = 'ésta';
$pattern = '/(\p{L})(.+)/iu';

$callback_fn = 'process';

echo preg_replace_callback($pattern, $callback_fn, $string);

function process($matches){
    return mb_strtoupper($matches[1], 'UTF-8') . $matches[2];
} 
```

# c# - 我可以使用 C# 获取 Windows 的原始安装日期吗？

> ID：11133495
> 
> 赞同：3
> 
> 时间：2012-06-21T07:30:15.043
> 
> 标签：c#

如何使用 C# 获取 Windows 的原始安装日期？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T07:34:57.077

从[这个网站](http://alanjuden.com/2009/09/09/get-windows-installation-date-in-csharp-or-vb-net/)，使用注册表而不是 WMI（未经测试）：

```
public static DateTime GetWindowsInstallationDateTime(string computerName)
{
    Microsoft.Win32.RegistryKey key = Microsoft.Win32.RegistryKey.OpenRemoteBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, computerName);
    key = key.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion", false);
    if (key != null)
    {
        DateTime startDate = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
        Int64 regVal = Convert.ToInt64(key.GetValue("InstallDate").ToString());

        DateTime installDate = startDate.AddSeconds(regVal);

        return installDate;
    }

    return DateTime.MinValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T23:51:13.140

HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate 是使用 Unix 时间戳的 Windows InstallDate，但从技术上讲它是**错误的 date**。

让我解释;

UNIX 时间戳的[定义与时区无关。](https://en.wikipedia.org/wiki/Unix_time)UNIX 时间戳定义为自 1970 年 1 月 1 日星期四 00:00:00 协调世界时 (UTC) 以来经过的秒数，不包括闰秒。

换句话说，如果您已将计算机安装在华盛顿州西雅图市并搬到纽约州纽约市，则 HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate 将为您提供纽约时区的日期，而不是 Windows 所在的西雅图时区原装安装。这是**错误的日期**，它不存储最初安装计算机的时区。

**解决方案**

1.  将您的计算机时区（右键单击您的时钟->调整日期/时间->调整时区）更改为安装 Windows 或首次打开的时区。然后运行 ​​systeminfo.exe find /i "Original Install Date"
2.  HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate 但您已添加安装 Windows 或首次打开的时区。

# android - 如何在 Air for Android 中禁用方向更改

> ID：11133498
> 
> 赞同：0
> 
> 时间：2012-06-21T07:30:26.573
> 
> 标签：android, flash, air, locking, orientation

我在使用 Air 为 Android 制作的游戏时遇到问题。该应用程序会正确定位自身（保持横向），直到我锁定我正在测试的手机然后解锁它。当手机解锁时，应用程序将处于纵向模式（它应该始终处于横向）。

在描述符 xml 文件中，我将全屏设置为 true，将纵横比设置为横向，将自动定向设置为 false，但这似乎不会影响应用程序在被锁定和解锁时（它在任何其他情况下都可以正常工作）。解锁后它会再次变成纵向并且不会移回横向（因此自动定向是错误的绝对不会被干预）。

此问题仅在您运行游戏并锁定手机并解锁时触发。例如，如果您按下主页按钮，应用程序不再处于焦点状态，然后锁定并解锁并返回暂停的游戏，它仍将处于横向状态。

编辑：我刚刚有了一个重要的发现！这似乎取决于您在手机上使用的锁屏类型。我使用的是安卓 4 Galaxy s3。我将其切换为不使用锁定屏幕，当我解锁时应用程序保持在横向！这是进步。不幸的是，我的朋友使用不同的 android 4.0 手机报告了同样的问题，所以不仅仅是我的手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:18:53.940

我有同样的问题。我已经在几种不同的设备上进行了测试。如果锁定屏幕需要密码，它们中的大多数实际上会崩溃或获得极大的延迟。我的解决方案允许在设备入睡后自动定向，然后在设备处于横向状态后再次禁用它。当设备处于纵向时，我隐藏了我的所有内容。仅供参考，我还没有测试所有这些代码，所以它可能会遗漏一些东西。

```
//Before the device goes to sleep, enable auto-orientation
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, handleDeactivate, false, 0, true);
function handleDeactivate(e:Event):void
{
    stage.autoOrients = true;

    //listen for the device to re-activate
    e.currentTarget.addEventListener(Event.ACTIVATE, handleActivate, false, 0, true);
}

//Once the device is re-activated, check the orientation.
function handleActivate(e:Event):void
{
    e.currentTarget.removeEventListener(Event.ACTIVATE, handleActivate, false, 0, true);

    //if the orientation is portait, just listen for an orientation change
    if (stage.stageHeight > stage.stageWidth)
    {
        //It makes sense that you would just use stage.setAspectRatio(StageAspectRatio.LANDSCAPE) here,
        //however in my experience I've found that setting the aspect ratio here seems to cause an infinite loop of the device attempting to reset the orientation.
        //Instead, I will wait for the user to change orientation, and then lock it in landscape
        stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, onOrientationChange);
    }
    else
    {
        disableAutoOrientation();
    }
}

//Check if the new orientation is landscape. If so, disable orientation changes.
function onOrientationChange():void
{
    if (stage.stageWidth > stage.stageHeight)
    {
        stage.removeEventListener(StageOrientationEvent.ORIENTATION_CHANGE, onOrientationChange);
        disableAutoOrientation();
    }
}

//disable the auto-orientation feature
function disableAutoOrientation():void
{
    stage.autoOrients = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:14:02.797

把它放到应用程序描述符 xml

```
<aspectRatio>portrait</aspectRatio>
<autoOrients>false</autoOrients> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:01:41.560

我遇到了完全相同的问题......以至于我决定用拳头滚动并将我的游戏重建为流畅的布局，并且一切都被重新定位和调整大小。总的来说，它奏效了，但我宁愿保持风景。我不认为这是谷歌的事情，我认为这是 Flash CS6 的问题。这个错误在我在 CS5.5 中发布时没有发生，但是我得到了 CS6，因为我可以将 AIR 集成到我的游戏中。我不知道为什么，但这是我的观察。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T07:17:18.947

经过一番折腾，我找到了一个简单的解决方案，可以在我的设备上可靠地工作。基本上只需监听正在激活的应用程序，然后将方向重置为您想要的方向。

```
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, onDeactivate);

private function onDeactivate(e:Event):void
{
    this.addEventListener(Event.ACTIVATE, onActivate);
}

private function onActivate(e:Event):void
{
    this.removeEventListener(Event.ACTIVATE, onActivate);

    if(stage.deviceOrientation == StageOrientation.ROTATED_RIGHT)
        stage.setOrientation(StageOrientation.ROTATED_LEFT);
    else
        stage.setOrientation(StageOrientation.ROTATED_RIGHT);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T17:58:10.200

从锁屏恢复后，我在强制肖像行为方面也遇到了同样的问题，我使用了类似这样的东西，这似乎有效：

```
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, onOrientationChange, false, 0, true);

private function onOrientationChange():void
{
    if (stage.stageWidth > stage.stageHeight)
    {
        stage.setAspectRatio(StageAspectRatio.PORTRAIT);
    }
    else
    {
        stage.setAspectRatio(StageAspectRatio.LANDSCAPE);
    }
} 
```

虽然我不确定如果设备将 stageWidth 报告为长边并将 stageHeight 报告为短边会发生什么，即所有设备是否都按照我们的预期报告方向

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-28T12:22:28.193

我想这是一个旧线程，但我自己也遇到了同样的问题，这似乎为我解决了这个问题。一个额外的听众有点粗糙，但它确实有效。

```
var default_orientation:String;
default_orientation=stage.orientation;

stage.addEventListener(Event.ENTER_FRAME,check_if_stage_is_rotated);

function check_if_stage_is_rotated(e:Event):void{
    if (stage){
        if(stage.orientation!=default_orientation){
            stage.setOrientation(default_orientation);
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T21:55:40.617

我遇到了同样的问题，这是我关于这个主题的信息转储。

据我所见，原因是锁定屏幕是主屏幕上的叠加层，因此要显示锁定屏幕，显示器会与您的应用程序一起被激活（它接收“激活”事件并开始运行）。如果设备在锁定屏幕上默认为纵向（手机大多如此，平板电脑大多不如此），则无论其偏好和 AIR 清单愿望如何，您的应用程序都会被拖走。

因此，当您的应用最终进入前台（用户解锁屏幕）时，它是纵向的。解决方法是在收到激活事件时手动设置所需的方向。ICS 上有一个额外的怪癖 - 系统通知栏在解锁后重新出现（不再全屏），并且将阶段重新设置为全屏没有效果。这就是我设法得到的。如果您找到解决方案，将不胜感激。

一个相关的问题是，当显示锁定屏幕时，您的游戏开始在下面运行，例如，如果这是一款动作游戏，而您在需要立即输入的内容（例如，游戏中的任何位置）中间停下来，这是很糟糕的情况:-))。很想*找到*解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-15T11:07:33.263

我的手机游戏android应用程序应该处于**横向**模式，当我最小化应用程序后最大化时，它将以横向模式显示并且屏幕不旋转，但问题是高度和宽度互换了。所以它显示**了一半的屏幕，**剩下的就是**空白屏幕**。如果我们锁定和解锁设备，高度和宽度会根据屏幕尺寸自动匹配。

**我使用Event.ACTIVATE**处理了上述问题，如果应用程序处于活动状态，那么我重置宽度、高度、scaleX 和 scaleY。在**4.0、4.1、4.2**版本的 android 中它工作正常，但是当我们使用**4.4、5.1 时，**它会显示同样的问题。我们怎样才能纠正这个问题？

# ios - NSTimer 不想在 fireDate 被通过后触发

> ID：11133500
> 
> 赞同：-1
> 
> 时间：2012-06-21T07:30:38.243
> 
> 标签：ios, ios4, nstimer, ios5

我有一个`NSTimer`在用户设置的特定时间在当前日期触发的。例如，2012 年 6 月 22 日下午 12:00。当用户点击一个按钮时，如果小时等于 12:00 PM，它会触发计时器。没关系，但是在这段时间之后`NSTimer`，当用户单击按钮时再次通过触发器。我不想要这样的行为，那么当触发日期过去时，我该怎么做才能让计时器不触发呢？

```
NSTimer *t = [[NSTimer alloc] initWithFireDate:fireDate                                          
              interval:0.0     
              target:self
              selector:@selector(doTimerAction:)
              userInfo:nil repeats:NO];

NSRunLoop *runner = [NSRunLoop currentRunLoop];
[runner addTimer:t forMode: NSDefaultRunLoopMode];
[t release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:42:44.770

你确定你需要 NSTimer 吗，前提是我明白你不能这样做

```
-(IBAction)btnPush:(id)sender{

if (hourInput == currentHour){
[self performSelector:@selector(doAction)];
} 
```

希望这会有所帮助，如果没有给我留下评论并且我会尝试提供更多帮助。

# c# - Excel 工作表作为 C# 后端服务器的前端

> ID：11133503
> 
> 赞同：1
> 
> 时间：2012-06-21T07:30:49.353
> 
> 标签：c#, excel

我有一个 C# feeder，它生成一些数据并将它们发送到某种前端。有没有直接的方法可以让我使用 excel microsoft office 接收这些数据？PS我不想编写接收数据然后将其写入excel表的代码。我希望能够直接从 excel 本身获取数据，作为我的 C# 后端的前端。这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:42:24.387

我做了一个快速的博士。Google 搜索**Excel 中的 WebService 调用**，发现以下[文章](http://www.webcontinuum.net/ws_4.aspx)

```
Option Explicit
' Excel VBA Function wrapper to call currency conversion Web Service on the web!
Public Function ccyConvert(rsCurrIn As String, rsCurrOut As String, 
                           ByVal vfAmtIn As Single) As Single
    Dim objSClient As MSSOAPLib30.SoapClient30      
   ' Remove the 30 if using an earlier version of SOAP
    Dim fResult As Single

    ' Point the SOAP API to the web service that we want to call...
    Set objSClient = New SoapClient30
    Call objSClient.mssoapinit(
              par_WSDLFile:="http://webcontinuum.net/webservices/ccydemo.wsdl") 

    ' Call the web service 
    fResult = objSClient.calcExcRate(rsCurrIn, rsCurrOut, vfAmtIn)
    Set objSClient = Nothing

    ccyConvert = fResult 
End Function 
```

由于**Excel**可以**访问数据（来自不同的数据源） ，因此***创建 ac# WebService*来*传递**请求*的数据可能是一个合适的解决方案。

请注意，**这不是我的代码**- 它只是上述文章的副本 - 所以归功于作者！

我只是想到了另一种解决方案。您可以考虑制作自己的**C# com 组件**。在任何**excel VBA 代码**中，您现在可以**调用程序集中的任何方法**。再次先生。谷歌找到了[一篇](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)描述如何实现这一点的文章！

**自己的 com 组件的**c# 代码****

 **```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace DotNetLibrary
{
  [ClassInterface(ClassInterfaceType.AutoDual)]
  public class DotNetClass
  {
    public DotNetClass()
    {
    }
    public string DotNetMethod(string input)
    {
        return "Hello " + input;
    }
  }
} 
```

**excel宏中的**VBA代码****

 **```
Private Sub TestDotNetCall()
    Dim testClass As New DotNetClass
    ' or do whatever you want with return value
    MsgBox testClass.DotNetMethod(“World”)
End Sub 
```****

# android - 安卓致命异常

> ID：11133505
> 
> 赞同：0
> 
> 时间：2012-06-21T07:30:50.567
> 
> 标签：android, classnotfoundexception

我目前正在运行一个用于接收消息的项目，但是当我即将运行我的应用程序时，它向我发送了一个致命异常，并且我的应用程序被强制关闭，并显示消息 com.project.SMSresponder 已停止运行。

**日志猫：**

```
06-21 11:57:24.188: D/AndroidRuntime(335): Shutting down VM
06-21 11:57:24.188: W/dalvikvm(335): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-21 11:57:24.208: E/AndroidRuntime(335): FATAL EXCEPTION: main
06-21 11:57:24.208: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.project.smsresponder/com.project.SMSresponderActivity}: java.lang.ClassNotFoundException: com.project.SMSresponderActivity in loader dalvik.system.PathClassLoader[/data/app/com.project.smsresponder-1.apk]
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-21 11:57:24.208: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 11:57:24.208: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 11:57:24.208: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-21 11:57:24.208: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-21 11:57:24.208: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
06-21 11:57:24.208: E/AndroidRuntime(335): Caused by: java.lang.ClassNotFoundException: com.project.SMSresponderActivity in loader dalvik.system.PathClassLoader[/data/app/com.project.smsresponder-1.apk]
06-21 11:57:24.208: E/AndroidRuntime(335):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
06-21 11:57:24.208: E/AndroidRuntime(335):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
06-21 11:57:24.208: E/AndroidRuntime(335):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-21 11:57:24.208: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
06-21 11:57:24.208: E/AndroidRuntime(335):  ... 11 more
06-21 11:57:34.199: I/Process(335): Sending signal. PID: 335 SIG: 9 
```

* * *

**Maniseft.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mydroidX.first"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Starting_point"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

**java文件：**

```
 public class Recieve extends BroadcastReceiver 
{

        String lsms;
        /* package */ static final String ACTION =
                "android.provider.Telephony.SMS_RECEIVED";

        private static final String TAG = "SMSBroadcastReceiver";
        private static final int MAX_SMS_MESSAGE_LENGTH = 0;

            @Override
            public void onReceive(Context context, Intent intent) {
                 //---get the SMS message passed in---       
                Log.i(TAG, "Intent recieved: " + intent.getAction());

                if (intent.getAction().equals(ACTION)) {

                Bundle bundle = intent.getExtras();               
                SmsMessage[] msgs = null;        
                String str = "";                    
                if (bundle != null)        {           
                    //---retrieve the SMS message received---            
                    Object[] pdus = (Object[]) bundle.get("pdus");            
                    msgs = new SmsMessage[pdus.length];                        
                    for (int i=0; i<msgs.length; i++){                
                        msgs[i] =  SmsMessage.createFromPdu((byte[])pdus[i]);                                
                        str += "SMS from " + msgs[i].getOriginatingAddress();                                     
                        str += " :";                
                        str += msgs[i].getMessageBody().toString();                
                        str += "\n";                    
                        }            
                    //---display the new SMS message---            
                    Toast.makeText(context, str,   
                        Toast.LENGTH_SHORT).show();        
                    }
            }

            }
    } 
```

* * *

**第二个：**

```
 public class Stat extends Activity{

            Button btstat;

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);
                 setContentView(R.layout.rtlayout);

                 btstat = (Button) findViewById(R.id.button1);

                    btstat.setOnClickListener(new View.OnClickListener() 
                    {

                        public void onClick(View v) 
                        {
                            // TODO Auto-generated method stub

                            Intent intent = new Intent(Stat.this,Recieve.class);                    
                        startActivity(intent);
                    }
                }); 
        }   
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:35:55.183

```
Caused by: java.lang.ClassNotFoundException: com.project.SMSresponderActivity 
```

你`com.project.SMSresponderActivity`在清单上不见了。

```
<activity
    android:name=".SMSresponderActivity"
    android:label="@string/smsResponder_name" >
</activity> 
```

您需要在清单中指定所有活动以及接收者。我看到您也没有它们（如@imran khan 所述）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:37:06.163

将您的`Recieve` BroadcastReciver 和`Stat.java`Activity 在清单中注册为：

```
<receiver android:name=".Recieve" android:exported="true" > 
<intent-filter android:priority="999"> 
<action android:name="android.provider.Telephony.SMS_RECEIVED" />
</intent-filter> 
</receiver>

<activity
    android:name=".Stat" />
 <activity
android:name=".SMSresponderActivity" /> 
```

清单文件中的使用权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission> 
```

**编辑**：最后一个大错误是 Recieve 不是一个活动，它是广播接收器，或者你正在将它作为 Activity 启动，所以当任何新的短信接收时改变它，你的 Recieve 会自动启动

```
public void onClick(View v) 
                {
                  // TODO Auto-generated method stub

                  //Intent intent = new Intent(Stat.this,Recieve.class);
           Intent intent = new Intent(Stat.this,YOUR_NEXT_ACTIVITY.class); //you are passing Recieve here    
                        startActivity(intent);
                    } 
```

# python - 导入python的winreg模块时出现ImportError

> ID：11133506
> 
> 赞同：1
> 
> 时间：2012-06-21T07:30:59.180
> 
> 标签：python, winreg

我想使用 python 的 winreg 模块来处理 Windows 注册表。但是当我尝试导入 winreg 模块时，它给出了 ImportError。

```
Python 2.4.3 (#1, Dec 11 2006, 11:39:03) 
[GCC 4.1.1 20061130 (Red Hat 4.1.1-43)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import __winreg
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
ImportError: No module named __winreg
>>> import _winreg
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
ImportError: No module named _winreg 
```

我需要单独安装这个模块吗？任何建议都会很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:35:15.887

看起来您正试图在 *nix 平台上导入[仅 Windows](http://docs.python.org/library/_winreg.html)的模块（RedHat 不是 Windows）。

> **_winreg – Windows 注册表访问**
> 
> 平台：Windows

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T07:38:22.573

它不能在 Linux 上运行。

> _winreg - Windows 注册表访问
> 
> 可用性：Windows。
> 
> 2.0 版中的新功能。这些函数将 Windows 注册表 API 暴露给 Python。不是使用整数作为注册表句柄，而是使用句柄对象来确保正确关闭句柄，即使程序员忽略了显式关闭它们。
> 
> 该模块向 Windows 注册表公开了一个非常低级的接口；预计将来将创建一个新的 winreg 模块，为注册表 API 提供更高级别的接口。

来源：[http ://docs.python.org/release/2.1.2/lib/module--winreg.html](http://docs.python.org/release/2.1.2/lib/module--winreg.html)

# java - org.hibernate.PropertyAccessException: IllegalArgumentException 发生调用 getter

> ID：11133507
> 
> 赞同：0
> 
> 时间：2012-06-21T07:31:00.113
> 
> 标签：java, hibernate

我试图将我的应用程序从 Hibernate 3.2 升级到 Hibernate 3.5.6，但我得到了以下以前没有的异常：

```
org.hibernate.PropertyAccessException: IllegalArgumentException occurred calling getter of Employee.phoneNumbers    
at org.hibernate.property.BasicPropertyAccessor$BasicGetter.get(BasicPropertyAccessor.java:198) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.tuple.entity.AbstractEntityTuplizer.getPropertyValue(AbstractEntityTuplizer.java:506) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.tuple.entity.AbstractEntityTuplizer.getPropertyValue(AbstractEntityTuplizer.java:524) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.persister.entity.AbstractEntityPersister.getPropertyValue(AbstractEntityPersister.java:3844) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.StatefulPersistenceContext.isFoundInParent(StatefulPersistenceContext.java:1236) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.StatefulPersistenceContext.getOwnerId(StatefulPersistenceContext.java:1146) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.property.BackrefPropertyAccessor$BackrefGetter.getForInsert(BackrefPropertyAccessor.java:139) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.tuple.entity.AbstractEntityTuplizer.getPropertyValuesToInsert(AbstractEntityTuplizer.java:500) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.tuple.entity.PojoEntityTuplizer.getPropertyValuesToInsert(PojoEntityTuplizer.java:255) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.persister.entity.AbstractEntityPersister.getPropertyValuesToInsert(AbstractEntityPersister.java:3952) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:290) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:144) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:677) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:669) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:252) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.engine.Cascade.cascade(Cascade.java:161) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:451) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:283) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:144) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:705) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:693) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:689) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final] 
```

...

```
Caused by: java.lang.IllegalArgumentException: java.lang.ClassCastException@424ada59
    at sun.reflect.GeneratedMethodAccessor376.invoke(Unknown Source) ~[na:na]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_26]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_26]
    at org.hibernate.property.BasicPropertyAccessor$BasicGetter.get(BasicPropertyAccessor.java:172) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final] 
```

我在这个页面[堆栈溢出](https://stackoverflow.com/questions/3631349/how-do-i-cure-the-cause-of-hibernate-exception-illegalargumentexception-occurre)上发现它可能是缓存的问题。我仍在使用ehcache，没有改变任何东西。所以我尝试禁用它，但我仍然遇到问题。

此问题发生在此方法中

```
@Transactional
public void createLocalEntriesForEmployeeType(List<RemotePhone> dataToBeAddedLocally, Integer employeeId) {
{
    for (RemotePhone remote : dataToBeAddedLocally) {
        ExternalDetails externalDetails = new ExternalDetails();
        externalDetails.setRemoteId(remote.getRemoteId().toString());
        externalDetails.setLastUpdated(remote.getUpdateDate());
        EmployeePhoneNumber localPhone = createLocalPhone(remote);

        employeeService.savePhoneNumber(localPhone, employeeId);

        ExternalPhoneDetails externalPhoneDetails = new externalPhoneDetails();
        externalPhoneDetails.setPayrollDataType(localPhone);
        externalPhoneDetails.setExternalDetails(externalDetails);
        externalDao.save(externalPhoneDetails);
    }
} 
```

方法 savePhoneNumber 是：

```
@Transactional
public void savePhoneNumber(EmployeePhoneNumber phoneNumber, Integer employeeId) {
    validationService.assertValid(phoneNumber, "employeePhoneNumber");
    Employee employee = getEmployee(employeeId);
    employee.getPhoneNumbers().add(phoneNumber);
} 
```

映射是：

```
<class
    name="Employee"
    table="EMPLOYEE"
    lazy="true"
>
    <id
        name="id"
        column="EMPLOYEEID"
        type="java.lang.Integer"
        unsaved-value="undefined"
    >
        <generator class="sequence">
            <param name="sequence">EMPLOYEEID_SEQ</param>
        </generator>
    </id>

    <property name="firstName" column="FIRSTNAME" type="java.lang.String"/>
    <bag
        name="phoneNumbers"
        table="PHONE_NUMBERS"
        cascade="all, delete-orphan"
        lazy="true"
        order-by="id"
    >
        <key column="EMPLOYEE" not-null="true"/>
        <one-to-many class="EmployeePhoneNumber"/>
    </bag>
</class>

<class name="EmployeePhoneNumber"
       table="PHONE_NUMBERS"
       lazy="true" >

    <id name="id"
        column="ID"
        type="java.lang.Integer"
        unsaved-value="undefined">
          <generator class="sequence">
            <param name="sequence">employee_phone_numbers_id_seq</param>
          </generator>
    </id>

    <property name="number" column="NUMBER" type="java.lang.String"/>
    <many-to-one
        name="employee" 
        class="Employee" 
        column="EMPLOYEE"
        insert="false"
        update="false"
    />
</class>

<class
    name="ExternalDetails"
    lazy="true"
    table="EXTERNAL_DETAILS"
>
    <id
        name="id"
        column="ID"
        type="java.lang.Integer"
        unsaved-value="undefined"
    >
          <generator class="sequence">
              <param name="sequence">EXTERNAL_DETAILS_ID_SEQ</param>
          </generator>
    </id>

    <property name="remoteId"       column="REMOTE_ID"      type="java.lang.String"/>
</class>

<class
    name="ExternalPhoneDetails"
    table="EXTERNAL_PHONE_NUMBER_DETAILS"
    lazy="true"
>
    <id
        name="id"
        column="ID"
        type="java.lang.Integer"
        unsaved-value="undefined"
    >
        <generator class="sequence">
            <param name="sequence">EXTERNAL_PHONE_NUMBER_DETAILS_ID_SEQ</param>
        </generator>
    </id>

    <many-to-one
        name="externalDetails"
        column="EXTERNAL_DETAILS"
        class="ExternalDetails"
        cascade="save-update, delete"
    />

    <many-to-one
        name="payrollDataType"
        column="PHONE_NUMBER"
        class="EmployeePhoneNumber"
        cascade="save-update, delete"
    />
</class> 
```

我找到了一种通过在调用 employeeService.savePhoneNumber() 后刷新 hibernateSession 来解决此问题的方法，但我不喜欢此解决方案，并且它曾经在 Hibernate 3.2 中正常工作。这是hibernate 3.5中的错误还是我想升级时需要更改的东西？

谢谢

# java - java -classpath xxx -jar jarfile调用时找不到依赖类，但是java -classpath xx class可以找到

> ID：11133510
> 
> 赞同：1
> 
> 时间：2012-06-21T07:31:08.837
> 
> 标签：java, command-line, invoke

情况1：

```
java  -cp LRS3rdPartyClient.jar -jar tasks.jar 
```

案例二：

```
java -classpath LRS3rdPartyClient.jar;tasks.jar com.lombardrisk.build.WaitForServerStart 
```

`Case 1`不执行，因为`LRS3rdPartyClient.jar`无法找到驻留在其中的类，而`Case 2`正确执行。

我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:32:18.043

使用`-jar`时，[类路径被忽略](https://stackoverflow.com/questions/8789683/setting-classpath-for-a-jar)。仅使用 jar 文件清单中指定的类路径。

# java - .jar 导出时不起作用（文件路径）

> ID：11133514
> 
> 赞同：0
> 
> 时间：2012-06-21T07:31:17.447
> 
> 标签：java, jar, export, execute

我正在尝试合并 2 个简单的程序。我想制作一个.jar文件，这是我编写的代码：（project1.jar和project2.exe都打包到这个.jar中）

```
public class main
{
   public static void main(String[] args) 
   {
      try 
      {
         Runtime.getRuntime().exec("cmd /c project1.jar");
         Runtime.getRuntime().exec("cmd /c project2.exe");
      }  
      catch(Exception exce)
      { 
         /*handle exception*/
      }
   }
} 
```

当我在 Eclipse 中运行项目时，一切正常（两个文件都被执行，就像我想要的那样）。但是当我将这个项目导出到 .jar 并运行它时，什么也没有发生。我认为它与文件路径有关，因为它在 eclipse 中运行时工作正常。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:54:30.080

如果您将这两个罐子包装到第三个罐子中，这将行不通。
为了让您的“cmd...”查看和使用这两个 .jar 文件，它们必须直接存在于磁盘上，而不是打包在另一个 jar 文件中。

要解决这个问题，您可以：
- 分发 3 个 jar 文件，并使用上面的“主”类。您可能需要调整“main”以使 jar 路径正确。
或
- 从这两个 jar 中解压缩类并将它们的 .class 文件 jar 到您的大 jar 中，然后更改您的“main”以对正确的入口点类进行分类，而不是引用 .jar 文件。
或
- 像其他人提到的那样使用 onejar

# java - 如何解释 java 程序集？

> ID：11133518
> 
> 赞同：1
> 
> 时间：2012-06-21T07:31:31.567
> 
> 标签：java

```
 // Method descriptor #8 ()V
  // Stack: 3, Locals: 1
  public EGLConfig();
     0  aload_0 [this]
     1  invokespecial java.lang.Object() [1]
     4  new java.lang.RuntimeException [2]
     7  dup
     8  ldc <String "Stub!"> [3]
    10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
    13  athrow
      Line numbers:
        [pc: 0, line: 4]
      Local variable table:
        [pc: 0, pc: 14] local: this index: 0 type: javax.microedition.khronos.egl.EGLConfig
} 
```

任何人都可以“阅读”这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:33:58.680

[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)记录了 Java 字节码指令的含义以及 JVM 如何处理它们。

它看起来像这样，当翻译成 Java 时：

```
// Constructor of class EGLConfig
public EGLConfig() {
    super();
    throw new RuntimeException("Stub!");
} 
```

逐行：

```
 0  aload_0 [this]
 1  invokespecial java.lang.Object() [1] 
```

压栈`this`（对当前对象的引用）并调用超类的构造函数，即`Object`.

```
 4  new java.lang.RuntimeException [2]
 7  dup
 8  ldc <String "Stub!"> [3]
10  invokespecial java.lang.RuntimeException(java.lang.String) [4] 
```

创建一个新`RuntimeException`对象并调用其构造函数，该构造函数采用`String`; 它传入字符串`"Stub!"`。

```
13  athrow 
```

抛出`RuntimeException`.

# bdd - Specflow 场景描述为长

> ID：11133521
> 
> 赞同：0
> 
> 时间：2012-06-21T07:31:41.290
> 
> 标签：bdd, specflow, gherkin

我曾经创建场景，在场景名称中我解释什么是场景。例如：

场景：在上下文切换过程中，上下文不匹配并向用户显示要删除的事实列表，如果用户在列表中选择了事实，则应删除事实。

但问题是场景越来越复杂，场景名称越来越长。我应该继续写长名字还是你有更好的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:17:36.470

好吧，听起来你在重复自己。

下面的测试可能与您的意思不符。但假装它确实如此。

如果您的场景如下所示：

```
Given the current context is Green
And the following list of facts for delete are selected
   | Fact | Checkboxstate |
   | A    | checked       |
   | B    |               |
   | C    | checked       |
   | D    |               |
When I perform a context switch to Orange
Then the following facts should be deleted
   | Fact |
   | A    |
   | C    |
And the following facts should not be deleted
   | Fact |
   | B    |
   | D    | 
```

然后测试几乎不比您建议的场景标题复杂。（如果测试比这复杂得多，那可能是另一个问题）

而是尝试保持功能和场景标题简短而有意义：例如

```
Feature: Context Switching

    Scenario: New Context should be enabled
    Scenario: Selected facts should be deleted
    etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:56:02.807

问题中概述的场景听起来与系统高度耦合。您指定的行为是什么？

但是，为了适应你所拥有的，我认为这只是一个语言问题。

我个人认为我会将其重命名为：

```
Scenario: Should be able to delete non-matching facts 
```

它更通用，但仍然可以告诉您当有人阅读场景时发生了什么（考虑到功能的上下文和其他相关场景）。

归根结底，场景名称的长度无关紧要——只要参与开发的人员（想想 3 位朋友、开发人员、测试人员和业务利益相关者）即可；都知道是什么意思。但显然，别人越容易理解越好。

# magento - Magento 获取用于 phtml 文件的布局

> ID：11133522
> 
> 赞同：5
> 
> 时间：2012-06-21T07:31:53.613
> 
> 标签：magento, layout, e-commerce, magento-1.6

有没有办法让我在某个 phtml 文件上使用哪种布局？

在我的例子中，我想检查目录/list.phtml 上使用的布局，我使用该信息对产品图像网格大小进行条件“如果”。

我试过用谷歌搜索它。但是所有的结果都只是解释了关于 xml 布局的事情。我得到的最接近的线索是这个线程

[Magento 获取给定页面的布局](https://stackoverflow.com/questions/7027822/magento-get-layout-for-given-page)

其中说明了此代码段的使用

```
$left_block = $this->loadLayout()->getLayout()->getBlock('left'); 
```

但是当我在 phtml 文件上尝试它时，出现异常错误

**更新**

乔在下面的回答给了我更多线索，异常消失了。但这种行为并不是我真正需要的。那段代码似乎只是检查是否在 XML 上定义了指定的块。我真正需要的是该块是否存在于某个页面上。

就我而言，我需要检查目录/产品/list.phtml 上使用的布局。如果它是 3 列，我会缩小图像的大小。如果它是 1 列，我会把它变大。

有什么办法我可以做到吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T02:21:52.177

如果我正确阅读了问题，请尝试：

```
$this->getLayout()->getBlock('root')->getTemplate(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T16:21:22.107

删除`loadLayout()`：

```
$left_block = $this->getLayout()->getBlock('left'); 
```

当您在 PHTML 文件中时，布局已经加载。

在 PHTML 文件中，$this 指的是`Mage_Core_Block_Template`类（或扩展它的类）。这个类没有定义 loadLayout() 方法，这就是你得到异常的原因；相反， loadLayout() 是`Mage_Core_Controller_Varien_Action`.

# c++ - 虚函数不能成为朋友

> ID：11133524
> 
> 赞同：2
> 
> 时间：2012-06-21T07:32:10.977
> 
> 标签：c++

我希望为具有此功能的 C 类创建一个接口：

```
friend bool operator==(const C& a, const C& b);* 
```

我希望为 C 创建一个模拟以用于测试驱动的目的。

我试着这样做：

```
class IC
{
    virtual friend bool operator==(const IC& a, const IC& b) = 0;
}; 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:37:37.740

`operator ==`是二元运算符。要做到这一点`virtual`，它必须是类成员。

```
class IC
{
    virtual bool operator==(const IC& b) = 0;
}; 
```

在这种情况下，第一个参数`==`是隐含的`this`。

您的声明是关于一个自由函数，而不是一个类成员。

编辑：正如评论中所建议的，您应该避免这种情况，而是实现一个`compare`功能或类似的功能。

# c# - 获取 windows 事件日志文件的位置

> ID：11133530
> 
> 赞同：0
> 
> 时间：2012-06-21T07:32:25.063
> 
> 标签：c#, .net, logging, event-log

我们使用 EventLog 来记录异常。有一个后台线程检查事件日志是否已满，并以编程方式将条目传输到 XML 文件中，然后清除事件日志。

这工作正常，但似乎有太多工作要做，我认为最好简单地复制用于记录当前应用程序的 .evt 文件，然后清除事件日志。

有没有办法找到适用于每个 Windows 操作系统的文件的位置/路径？

[建议](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.overflowaction.aspx)使用_

```
Registry.LocalMachine.OpenSubKey("System\\CurrentControlSet\\Services\\EventLog\\" + e.Log); 
```

但后来我的应用程序日志名称没有 File 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:03:45.267

你现在如何归档它们？也许可以改进该方法以获得性能。

这是一个例子。

```
EventLogSession els = new EventLogSession();
els.ExportLogAndMessages("Security",             // Log Name to archive
                         PathType.LogName,       // Type of Log
                         "*",                    // Query selecting all events
                         "C:\\archivedLog.evtx", // Exported Log Path 
                         false,                  // Stop archive if query is invalid
                         CultureInfo.CurrentCulture); 
```

或者您可以使用 ClearLog() 方法。

```
EventLogSession els = new EventLogSession();

// Clears all the events and archives them to the .evtx file
els.ClearLog("System",          //  Channel to Clear
             "c:\\myLog.evtx"); //  Backup File Path 
```

更多信息可以在这里找到：

[导出、存档和清除事件日志](http://msdn.microsoft.com/en-us/library/bb671203%28v=vs.90%29.aspx)

# jquery - 为 Jquery DatePicker 禁用周末为周五和周六

> ID：11133531
> 
> 赞同：2
> 
> 时间：2012-06-21T07:32:29.527
> 
> 标签：jquery, asp.net, jquery-ui-datepicker

我正在开发 ASP.net Webform 应用程序，我需要阻止某些日期和周末作为周五和周六。

以下代码工作正常，它会阻止日期，但默认情况下会阻止周六和周日作为周末，而我需要阻止日历上的所有周五和周六。

我将不胜感激修复此特定代码。我不确定 jQuery Calendar 是否有一个内置属性来指定不同的周末

```
var holiDays = [[2012, 07, 06, 'New Years Day'], [2012, 07, 14, 'Event XYZ'], [2011, 17, 25, 'Christmas Day']];
$(function () {
    $("#<%=txtBookDate.ClientID %>").datepicker({
        dateFormat: "yy-mm-dd",
        minDate: "-0d",
        maxDate: "+60d",
        beforeShowDay: noWeekendsOrHolidaysOrBlockedDates
    });

    function noWeekendsOrHolidaysOrBlockedDates(date) {
        var noWeekend = jQuery.datepicker.noWeekends(date);
        return noWeekend[0] ? setHoliDays(date) : noWeekend;
    }

    // set holidays function which is configured in beforeShowDay
    function setHoliDays(date) {
        for (i = 0; i < holiDays.length; i++) {
            if (date.getFullYear() == holiDays[i][0]
  && date.getMonth() == holiDays[i][1] - 1
  && date.getDate() == holiDays[i][2]) {
                return [false, 'holiday', holiDays[i][3]];
            }
        }
        return [true, ''];
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:40:42.843

您无法访问 jQuery UI 源代码吗？奇怪，因为它是 javascript，并且通常免费提供：

```
/* Set as beforeShowDay function to prevent selection of weekends.
   @param  date  Date - the date to customise
   @return [boolean, string] - is this date selectable?, what is its CSS class? */
noWeekends: function(date) {
    var day = date.getDay();
    return [(day > 0 && day < 6), ''];
} 
```

看起来很好不可定制，但相对容易重新实现为您自己的功能。

# c++ - UML 中变量参数列表的操作

> ID：11133537
> 
> 赞同：3
> 
> 时间：2012-06-21T07:32:51.083
> 
> 标签：c++, uml

我正在尝试`printf()`在 UML 中对具有变量参数列表（如 ）的方法的类进行建模。知道在参数字符串中写什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:59:01.203

据我所知，从 UML 2.3 上层结构规范中可以看出，可以为操作参数定义 multiplicity 属性。因此，一组可选参数可以用定义的参数表示并应用 [0..*] 的多重性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:41:16.077

C++ 省略号不能通过多重性在 UML 下建模，因为省略号不是一个参数，其类型是给定类型的值的集合，C++ 省略号是非常具体的。如果没有其他可能性，则使用名为“...”的参数是正确的方法（在 Bouml 下，可以在不使用名为“...”的伪参数的情况下添加省略号）。

**g-makulik**也是对的，当您不知道如何建模某些东西时，反向可以提供很大帮助。

# codeigniter - 在 form_dropdown 中添加类和 id

> ID：11133540
> 
> 赞同：11
> 
> 时间：2012-06-21T07:32:52.223
> 
> 标签：codeigniter, select, drop-down-menu, codeigniter-form-helper

有没有办法在 CodeIgniter 的 form_dropdown 中添加 class 和 id 属性？我试过`form_dropdown('name',$array,'class','id')`了，它没有改变任何东西，请告诉我如何实现它？

已编辑：如果我从浏览器中看到我的源代码，则
使用这样的下拉表单，它看起来像这样，但是如果我按照您的方式编写而不是在我的浏览器源代码中这样写`form_dropdown('name',$array,set_value('someValue'),'id="myId"');``<select name="provinsi" id="provinsi_id">``form_dropdown('name',$array,set_value('someValue'),'class="myClass"','id="myId"');``<select name="provinsi" class="myClass">`

那是我的意思是
谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-21T07:34:54.200

像这样：

```
form_dropdown('name', $array, '', 'class="my_class" id="my_id"') 
```

第三个参数是您希望选择的值，第四个参数是附加数据。阅读[更多](http://codeigniter.com/user_guide/helpers/form_helper.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T16:55:51.940

您可以在函数的第四个参数中将 class、id 或任何其他 HTML 属性`form_dropdown()`定义为关联数组，如下所示：

form_dropdown('name', $array, set_value('someValue'), ['class' => 'myClass', 'id' => 'myId']);

# c# - Sitecore 创建包含字段[] 的项目

> ID：11133541
> 
> 赞同：3
> 
> 时间：2012-06-21T07:32:52.317
> 
> 标签：c#, .net, sitecore, sitecore6

我想使用后面的代码为 sitecore 创建一个项目。

我找到了这段代码，它工作得很好。

```
public void CreateItem(String itmName)
{
    //Again we need to handle security
    //In this example we just disable it
    using (new SecurityDisabler())
    {
        //First get the parent item from the master database
        Database masterDb = Sitecore.Configuration.Factory.GetDatabase("master");
        Item parentItem = masterDb.Items["/sitecore/content/SOHO/Settings/Metadata/Project"];

        //Now we need to get the template from which the item is created
        TemplateItem template = masterDb.GetTemplate("SOHO/Misc/Project");
        //Now we can add the new item as a child to the parent
        parentItem.Add(itmName, template);

        //We can now manipulate the fields and publish as in the previous example
    }
} 
```

但我也想填写这些字段。喜欢..

```
Item.Fields["test"].Value="testing"; 
```

为此，我发现了如何编辑项目

```
public void AlterItem()
{
  //Use a security disabler to allow changes
  using (new Sitecore.SecurityModel.SecurityDisabler())
  {
    //You want to alter the item in the master database, so get the item from there
    Database db = Sitecore.Configuration.Factory.GetDatabase("master");
    Item item = db.Items["/sitecore/content/home"];

    //Begin editing
    item.Editing.BeginEdit();
    try
    {
      //perform the editing
      item.Fields["Title"].Value = "This value will be stored";
    }
    finally
    {
      //Close the editing state
      item.Editing.EndEdit();
    }
  }
} 
```

但我不知道如何将这两件事结合起来。

我想到了2个方法。

**方法一**

抓住我创建`ID`的那个。`Item`

我可以抓住`Name`但`Name`可能会被复制。

**方法二**

在创建之前填写字段`Item`

但是然后..我又不知道如何做这两种方法。

如果我能得到一些提示，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:44:13.670

方法**item.Add()**返回创建的项目，因此您的代码应如下所示：

```
 Item newItem = parent.Add(itemName, template);
    newItem.Editing.BeginEdit();
    newItem.Fields["fieldName"].Value = "fieldValue";
    newItem.Editing.EndEdit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-07T07:21:47.177

这是完整的代码，可用于[基于 sitecore 中的模板以编程方式创建项目](https://itsmycode.com/create-items-programmatically-based-template-sitecore/)。

```
using Sitecore.Data.Items;    
// The SecurityDisabler is required which will overrides the current security model, allowing the code
// to access the item without any security. 
using (new Sitecore.SecurityModel.SecurityDisabler())
{
  // Get the master database
  Sitecore.Data.Database master = Sitecore.Data.Database.GetDatabase("master");
  // Get the template for which you need to create item
  Items.TemplateItem template = master.GetItem("/sitecore/templates/Sample/Sample Item");

  // Get the place in the site tree where the new item must be inserted
  Item parentItem = master.GetItem("/sitecore/content/home");

  // Add the item to the site tree
  Item newItem = parentItem.Add("NameOfNewItem", template);

  // Set the new item in editing mode
  // Fields can only be updated when in editing mode
  // (It's like the begin transaction on a database)
  newItem.Editing.BeginEdit();
  try
  {
    // Assign values to the fields of the new item
    newItem.Fields["Title"].Value = "NewValue1";
    newItem.Fields["Text"].Value = "NewValue2";

    // End editing will write the new values back to the Sitecore
    // database (It's like commit transaction of a database)
    newItem.Editing.EndEdit();
  }
  catch (System.Exception ex)
  {
    // Log the message on any failure to sitecore log
    Sitecore.Diagnostics.Log.Error("Could not update item " + newItem.Paths.FullPath + ": " + ex.Message, this);

    // Cancel the edit (not really needed, as Sitecore automatically aborts
    // the transaction on exceptions, but it wont hurt your code)
    newItem.Editing.CancelEdit();
  }
} 
```

# javascript - 在 https 上使用 Google 地图时如何避免 IE8 中的安全警告

> ID：11133548
> 
> 赞同：0
> 
> 时间：2012-06-21T07:33:32.363
> 
> 标签：javascript, google-maps, security-warning

我通过https在我的项目上使用谷歌地图，但是会导致上面的这个问题，其他浏览器可以正常工作。找了很久，没有解决，有人说这个问题是使用免费的谷歌地图密钥引起的（根据[谷歌的FAQ](https://developers.google.com/maps/faq#ssl)）。

我不确定。

主要代码如下：

```
<script id="mapLink1" type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.3&sensor=false&region=hk&language=<%= MapLanguage %>"></script>
<script id="mapLink2" type="text/javascript" src="http://www.geocodezip.com/scripts/v3_epoly.js"></script> 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:23:30.530

您是否确保任何标记图像都使用 HTTPS URL 加载？

达伦

# asp.net - 如何将 XLS 转换为 RESX？

> ID：11133549
> 
> 赞同：9
> 
> 时间：2012-06-21T07:33:34.140
> 
> 标签：asp.net, excel, resx

我有一个带有翻译的 Excel 文件，我必须将一种新语言加载到项目中。

如何将 XLS 文件转换为 RESX 格式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-17T18:35:49.423

在 Visual Studio 2012 中，这就像选择要复制的 excel 列并将它们粘贴到 VS 2012 提供的 resx 界面一样简单。

它也可以反过来工作。您只需从 resx 中选择/复制内容到 excel 文档中，即可从 resx 中创建一个 xls 文件。 ![在此处输入图像描述](../Images/a0a5f754e9e426d873cac61802463c16.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T13:22:21.710

这是一个免费工具，可以将 resx 导出到 xls 并将 xls 导入回 resx。但是您应该首先通过此工具导出到 xls：http: [//www.winking.be/resource-translation-helper](http://www.winking.be/resource-translation-helper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:28:00.317

你检查过那个话题吗？

[将 CSV 文件或 Excel 电子表格转换为 RESX 文件](https://stackoverflow.com/questions/223533/convert-csv-file-or-excel-spreadsheet-to-resx-file)

我认为他们提供了很好的链接：

[http://blog.lavablast.com/post/2008/02/RESX-file-Web-Editor.aspx](http://blog.lavablast.com/post/2008/02/RESX-file-Web-Editor.aspx)

工具： http: [//www.codeproject.com/Articles/16068/Zeta-Resource-Editor](http://www.codeproject.com/Articles/16068/Zeta-Resource-Editor)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-29T08:37:16.727

*   你不能尝试使用这个`Visual Studio`扩展[https://visualstudiogallery.msdn.microsoft.com/2676967b-0516-4f5f-b312-6873e2f9d219](https://visualstudiogallery.msdn.microsoft.com/2676967b-0516-4f5f-b312-6873e2f9d219)。
*   它允许将您的项目资源导出/导入到/从 excel 中并添加新的文化。

# java - 将java编程为对称词

> ID：11133556
> 
> 赞同：0
> 
> 时间：2012-06-21T07:34:01.720
> 
> 标签：java, symmetry

> **可能的重复：**
> [编程java以确定对称词](https://stackoverflow.com/questions/11130012/programming-java-to-determine-a-symmetrical-word)

我是新来的，但是我很难弄清楚如何编写代码来确定单词的输入并查看第一个是否与单词的结尾匹配。您可以输入 abba 并得到答案，它是均匀对称的，而 aba 是奇怪对称的。

请告诉我如何:(

主要有两点。

首先我想知道它是奇数还是偶数的字母（字母数除以2，如果它以0.5结尾，它是奇怪对称的，如果是一个整数它是均匀对称的。

第二个我想得到（即1=n,2=n-1,3=n-2...）字母在单词中的位置作为执行的主要思想。如果在最后一个字母奇怪的对称词，忽略最后一个字母。

我感谢任何先机或想法：）谢谢！

感谢 KDiTraglia，我编写了代码并编译了，这就是我放的。我没有更进一步。

报告的问题：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: reverse cannot be resolved or is not a field reverse cannot be resolved or is not a field Syntax error, insert ") Statement" to complete IfStatement 
```

这就是我得到的，KDiTraglia 的帮助

```
 public class WordSymmetric {
public static void main(String[] args) {
 String word = "abccdccba";

if ( (word.length() % 2) == 1 ) {
    System.out.println("They are oddly symmetric");
    //odd
}
else {
    System.out.println("They are evenly symmetric");
    //even
}

int halfLength = word.length() / 2;
String firstHalf = word.substring(0, halfLength);
String secondHalf = word.substring(halfLength, word.length());

System.out.println(secondHalf.reverse());

if (firstHalf.equals(secondHalf.reverse()) {
    System.out.println("They match");
    //they match
} 
} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:39:40.350

字符串没有反向方法。为此，您可以使用 apache commons lang 库：

[http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html#reverse%28java.lang.String%29](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html#reverse%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:36:58.673

```
System.out.println(secondHalf.reverse()); 
```

没有`reverse()`定义方法[`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:40:23.797

使用类[`StringBuffer`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html) 而不是`String`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:46:26.537

我可能会`word`从索引 0 循环到一半 ( `word.length() / 2`) 并将当前索引 ( `word.charAt(i)`) 处的字符与另一半 ( `word.charAt(word.length() - i`) 的对应字符进行比较。这只是一个粗略的草案，您可能需要考虑循环结束索引，取决于奇数或均匀对称性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T08:02:57.920

该`reverse()`方法非常简洁易读。不幸的是，没有`reverse()`字符串的方法。因此，您要么必须采用外部库（来自 appache 通用 lang3 库的[StringUtils](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html#reverse%28java.lang.String%29)`reverse`有一个方法），要么自己编写代码。

```
public static String reverse(String inputString) {
  StringBuilder reverseString = new StringBuilder();
  for(int i = inputString.length(); i > 0; --i) {
    char result = inputString.charAt(i-1);
    reverseString.append(result);
  }
  return reverseString.toString();
} 
```

（这仅适用于可以放入字符的字符。因此，如果您需要更通用的内容，则必须对其进行扩展。）

然后你可以有这样的方法：

```
enum ePalindromResult { NO_PALINDROM, PALINDROM_ODD, PALINDROM_EVEN };
public static ePalindromResult checkForPalindrom(String inputStr) {
  // this uses the org.apache.commons.lang3.StringUtils class: 
  if (inputStr.equals(StringUtils.reverse(inputStr)) {
    if (inputStr.length % 2 == 0) return PALINDROM_EVEN;
    else return PALINDROM_ODD;
  } else return NO_PALINDROM;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T08:04:31.337

你可以适应这个：

```
 final char[] word = "abccdccba".toCharArray(); // work also with "abccccba"
    final int t = word.length;
    boolean ok = true;    
    for (int i = t / 2; i > 0; i--) {
        if (word[i - 1] != word[t - i]) {
            ok = false;
            break;
        }
        System.out.println(word[i - 1] + "\t" + word[word.length - i]);
    }
    System.out.println(ok); 
```

安慰 ：

cc
cc
bb
aa
真的

# c++ - 用于模糊解析 C++ 的 Clang

> ID：11133557
> 
> 赞同：22
> 
> 时间：2012-06-21T07:34:02.030
> 
> 标签：c++, parsing, syntax, clang, fuzzy

是否有可能使用其现有的 libclang API 使用 clang 解析具有不完整声明的 C++？即在不包括所有标题的情况下解析.cpp 文件，即时推断声明。所以，例如以下文本：

```
A B::Foo(){return stuff();} 
```

将检测未知符号 A，调用我的回调，使用我的魔法启发式扣除 A 是一个类，然后以与 B 和 Foo 等相同的方式调用此回调。最后，我希望能够推断出我看到 B 类的成员 Foo 返回 A，而 stuff 是一个函数。或者类似的东西。上下文：我想看看我是否可以在不快速解析所有标题的情况下进行合理的语法突出显示和动态代码分析。

[编辑] 为了澄清，我正在寻找非常严格的 C++ 解析，可能有一些启发式来解除一些限制。

C++ 语法充满了上下文依赖。Foo() 是函数调用还是类 Foo 的临时构造？是 Foo<Bar> 的东西；模板 Foo<Bar> 实例化和声明变量，还是看起来很奇怪的 2 次重载 operator < 和 operator > 调用？只能在上下文中判断，而上下文通常来自解析标题。

我正在寻找的是一种插入我的自定义约定规则的方法。例如，我知道我不会重载 Win32 符号，所以我可以放心地假设 CreateFile*始终*是一个函数，我什至知道它的签名。我也知道我所有的类都以大写字母开头并且是名词，而函数通常是动词，所以我可以合理地猜测 Foo 和 Bar 是类名。在更复杂的场景中，我知道我不会编写像 a < b > c 这样的无副作用表达式；所以我可以假设 a 总是一个模板实例化。等等。

所以，问题是每次遇到未知符号时是否可以使用 Clang API 进行回调，并使用我自己的非 C++ 启发式给出答案。如果我的启发式失败，那么解析失败，很明显。而且我不是在谈论解析 Boost 库:) 我说的是非常简单的 C++，可能没有模板，在这种情况下仅限于 clang 可以处理的最低限度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-13T11:33:39.967

我知道这个问题已经相当老了，但请看[这里](https://github.com/kapf/clang-highlight/blob/master/docs/LibFuzzy.rst)：

> LibFuzzy 是一个基于 Clang 的 Lexer 启发式解析 C++ 的库。模糊解析器是容错的，在不了解构建系统和不完整的源文件的情况下工作。由于解析器必须进行猜测，因此生成的语法树可能部分错误。

它是 clang-highlight 的一个子项目，一个似乎不再开发的（实验性？）工具。

我只对模糊解析部分感兴趣，并在[我的 github 页面](https://github.com/Davidbrcz)上对其进行了分叉，在那里我修复了几个小问题并使工具自治（它可以在 clang 的源代码树之外编译）。不要尝试用 C++14（这是 G++ 6 的默认模式）编译它，因为会与`make_unique`.

根据[这个页面](http://lists.llvm.org/pipermail/cfe-dev/2014-July/038332.html)，clang-format 有自己的模糊解析器（并且正在积极开发），但解析器（是？）与该工具更紧密地耦合。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T07:48:12.500

除非您严格限制允许人们编写的代码，否则基本上不可能在不解析所有标题的情况下很好地解析 C++（因此语法高亮超出关键字/正则表达式）。预处理器特别擅长为您解决问题。

关于模糊解析的困难（在视觉工作室的上下文中）有一些想法，这可能是有趣的：http: [//blogs.msdn.com/b/vcblog/archive/2011/03/03/10136696.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/03/03/10136696.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-20T08:02:18.910

我认为另一种解决方案更适合 OP 而不是模糊解析。

*解析时，clang 通过分析器的Sema*部分维护语义信息。当遇到未知符号时，[Sema](http://clang.llvm.org/doxygen/classclang_1_1Sema.html)将回退到[ExternalSemaSource](http://clang.llvm.org/doxygen/classclang_1_1ExternalSemaSource.html)以获取有关此符号的一些信息。通过这个，你可以实现你想要的。

这是一个如何设置它的快速示例。它并不完全起作用（我没有在*LookupUnqualified*方法中做任何事情），您可能需要做进一步的调查，我认为这是一个好的开始。

```
// Declares clang::SyntaxOnlyAction.
#include <clang/Frontend/FrontendActions.h>
#include <clang/Tooling/CommonOptionsParser.h>
#include <clang/Tooling/Tooling.h>
#include <llvm/Support/CommandLine.h>
#include <clang/AST/AST.h>
#include <clang/AST/ASTConsumer.h>
#include <clang/AST/RecursiveASTVisitor.h>
#include <clang/Frontend/ASTConsumers.h>
#include <clang/Frontend/FrontendActions.h>
#include <clang/Frontend/CompilerInstance.h>
#include <clang/Tooling/CommonOptionsParser.h>
#include <clang/Tooling/Tooling.h>
#include <clang/Rewrite/Core/Rewriter.h>
#include <llvm/Support/raw_ostream.h>
#include <clang/Sema/ExternalSemaSource.h>
#include <clang/Sema/Sema.h>
#include "clang/Basic/DiagnosticOptions.h"
#include "clang/Frontend/TextDiagnosticPrinter.h"
#include "clang/Frontend/CompilerInstance.h"
#include "clang/Basic/TargetOptions.h"
#include "clang/Basic/TargetInfo.h"
#include "clang/Basic/FileManager.h"
#include "clang/Basic/SourceManager.h"
#include "clang/Lex/Preprocessor.h"
#include "clang/Basic/Diagnostic.h"
#include "clang/AST/ASTContext.h"
#include "clang/AST/ASTConsumer.h"
#include "clang/Parse/Parser.h"
#include "clang/Parse/ParseAST.h"
#include <clang/Sema/Lookup.h>

#include <iostream>
using namespace clang;
using namespace clang::tooling;
using namespace llvm;

class ExampleVisitor : public RecursiveASTVisitor<ExampleVisitor> {
private:
  ASTContext *astContext;

public:
  explicit ExampleVisitor(CompilerInstance *CI, StringRef file)
      : astContext(&(CI->getASTContext())) {}

  virtual bool VisitVarDecl(VarDecl *d) {
    std::cout << d->getNameAsString() << "@\n";
    return true;
  }
};

class ExampleASTConsumer : public ASTConsumer {
private:
  ExampleVisitor visitor;

public:
  explicit ExampleASTConsumer(CompilerInstance *CI, StringRef file)
      : visitor(CI, file) {}
  virtual void HandleTranslationUnit(ASTContext &Context) {
    // de cette façon, on applique le visiteur sur l'ensemble de la translation
    // unit
    visitor.TraverseDecl(Context.getTranslationUnitDecl());
  }
};

class DynamicIDHandler : public clang::ExternalSemaSource {
public:
  DynamicIDHandler(clang::Sema *Sema)
      : m_Sema(Sema), m_Context(Sema->getASTContext()) {}
  ~DynamicIDHandler() = default;

  /// \brief Provides last resort lookup for failed unqualified lookups
  ///
  /// If there is failed lookup, tell sema to create an artificial declaration
  /// which is of dependent type. So the lookup result is marked as dependent
  /// and the diagnostics are suppressed. After that is's an interpreter's
  /// responsibility to fix all these fake declarations and lookups.
  /// It is done by the DynamicExprTransformer.
  ///
  /// @param[out] R The recovered symbol.
  /// @param[in] S The scope in which the lookup failed.
  virtual bool LookupUnqualified(clang::LookupResult &R, clang::Scope *S) {
     DeclarationName Name = R.getLookupName();
     std::cout << Name.getAsString() << "\n";
    // IdentifierInfo *II = Name.getAsIdentifierInfo();
    // SourceLocation Loc = R.getNameLoc();
    // VarDecl *Result =
    //     // VarDecl::Create(m_Context, R.getSema().getFunctionLevelDeclContext(),
    //     //                 Loc, Loc, II, m_Context.DependentTy,
    //     //                 /*TypeSourceInfo*/ 0, SC_None, SC_None);
    // if (Result) {
    //   R.addDecl(Result);
    //   // Say that we can handle the situation. Clang should try to recover
    //   return true;
    // } else{
    //   return false;
    // }
    return false;
  }

private:
  clang::Sema *m_Sema;
  clang::ASTContext &m_Context;
};

// *****************************************************************************/

LangOptions getFormattingLangOpts(bool Cpp03 = false) {
  LangOptions LangOpts;
  LangOpts.CPlusPlus = 1;
  LangOpts.CPlusPlus11 = Cpp03 ? 0 : 1;
  LangOpts.CPlusPlus14 = Cpp03 ? 0 : 1;
  LangOpts.LineComment = 1;
  LangOpts.Bool = 1;
  LangOpts.ObjC1 = 1;
  LangOpts.ObjC2 = 1;
  return LangOpts;
}

int main() {
  using clang::CompilerInstance;
  using clang::TargetOptions;
  using clang::TargetInfo;
  using clang::FileEntry;
  using clang::Token;
  using clang::ASTContext;
  using clang::ASTConsumer;
  using clang::Parser;
  using clang::DiagnosticOptions;
  using clang::TextDiagnosticPrinter;

  CompilerInstance ci;
  ci.getLangOpts() = getFormattingLangOpts(false);
  DiagnosticOptions diagnosticOptions;
  ci.createDiagnostics();

  std::shared_ptr<clang::TargetOptions> pto = std::make_shared<clang::TargetOptions>();
  pto->Triple = llvm::sys::getDefaultTargetTriple();

  TargetInfo *pti = TargetInfo::CreateTargetInfo(ci.getDiagnostics(), pto);

  ci.setTarget(pti);
  ci.createFileManager();
  ci.createSourceManager(ci.getFileManager());
  ci.createPreprocessor(clang::TU_Complete);
  ci.getPreprocessorOpts().UsePredefines = false;
  ci.createASTContext();

  ci.setASTConsumer(
      llvm::make_unique<ExampleASTConsumer>(&ci, "../src/test.cpp"));

  ci.createSema(TU_Complete, nullptr);
  auto &sema = ci.getSema();
  sema.Initialize();
  DynamicIDHandler handler(&sema);
  sema.addExternalSource(&handler);

  const FileEntry *pFile = ci.getFileManager().getFile("../src/test.cpp");
  ci.getSourceManager().setMainFileID(ci.getSourceManager().createFileID(
      pFile, clang::SourceLocation(), clang::SrcMgr::C_User));
  ci.getDiagnosticClient().BeginSourceFile(ci.getLangOpts(),
                                           &ci.getPreprocessor());
  clang::ParseAST(sema,true,false);
  ci.getDiagnosticClient().EndSourceFile();

  return 0;
} 
```

这个想法和*DynamicIDHandler*类来自[未知](https://root.cern.ch/cling)符号是可变的项目（因此是注释和代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-13T13:51:11.643

OP 不想要“模糊解析”。他想要的是对 C++ 源代码进行完全上下文*无关*的解析，而不需要任何名称和类型解析。他计划根据解析结果对类型进行有根据的猜测。

Clang 正确的缠结解析和名称/类型解析，这意味着它在解析时必须具有所有可用的背景类型信息。其他答案表明 LibFuzzy 会产生不正确的解析树，以及一些用于 clang 格式的模糊解析器，我对此一无所知。如果坚持生成经典的 AST，那么这些解决方案都不会在面对模棱两可的解析时生成“正确”的树。

我们的 DMS Software Reengineering Toolkit 及其 C++ 前端*可以*[在没有类型信息的情况下](https://stackoverflow.com/a/1004737/120163)解析 C++ 源代码，并生成准确的“AST”；这些实际上是*抽象语法 dag*，其中树中的分叉表示根据语言精确语法（*歧义（子）解析*）对源代码的不同可能解释。

Clang 试图做的是通过在解析时使用类型信息来避免产生这些多个子解析。DMS所做的是产生歧义解析，并在（可选）解析后（属性-语法-评估）传递中，收集符号表信息并消除与类型不一致的子解析；对于格式良好的程序，这会产生一个没有歧义的普通 AST。

*如果 OP 想要对类型信息进行启发式猜测，他将需要知道这些可能的解释*。如果提前被淘汰，他就无法直截了当地猜测可能需要哪些类型。一个有趣的可能性是修改属性语法（作为 DMS 的 C++ 前端的一部分以源代码形式提供）的想法，它已经知道所有 C++ 类型规则，以使用部分信息执行此操作。鉴于它必须从标准中了解大约 600 页的神秘名称和类型解析规则，这将是从头开始构建启发式分析器的一个巨大的开端。

[您可以看到 DMS 解析器生成的 (dag) 示例。](https://stackoverflow.com/a/17393852/120163)

# html - 如何在 div 中适合图像 图像大小是 max 然后 div 或 min 然后 div

> ID：11133560
> 
> 赞同：9
> 
> 时间：2012-06-21T07:34:08.743
> 
> 标签：html, css

如何在 div 中放置图像？图像大小可以是 max 然后 div 或 min 然后 div。

html代码

```
<div class="main">
  <img scr="image.jpg">
</div> 
```

CSS 代码

```
.main{
  height:200px;
  width:200px;
}

img{
  // answer code
} 
```

如何使用以下设置图像 css：

1.  图像高度 100 和宽度 100
2.  图像高度 300 和宽度 300

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T07:37:37.557

您可以使用：

```
img { max-width: 100%; height: auto; } // This would help you to automatically fit the image. 
```

上面的 css 代码将帮助您处理尺寸大于 div 的图像。但不适合小于 div 的图像。需要一些 jQuery 来实现您的目标，请在下面找到它：

```
$(document).ready(function(){
    imageWidth = $('.main img').width();
    parentWidth = $('.main').width();
    if (imageWidth > parentWidth) {
        $('.main img').css('width', '100%');
    }
}); 
```

当图像小于 div 时会发生什么情况，它会根据您的要求自行调整大小并适合 div。

因此，将 css 和脚本放置在这两种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-12T21:48:02.103

在子元素“height：inherit;”中使用它 并且这个元素将是相同高度的伙伴。

```
.main{
       height:200px;
       width:200px;
}

.img{
  height: inherit; //the imagem will be heigth 200px automatic
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T08:50:43.680

如果您的图像始终是正方形，则只需添加 `img{ width: 200px; height: 200px; }`

如果没有，那么

```
.main {
    width: 200px;
    height: 200px;
    text-align: center;
    display: table-cell;
    vertical-align: middle;
}
img {
    max-width: 200px;
    max-height: 200px;
    /* IE7 doesn't support display: table-cell property? so hack */
    *margin-top: expression((parentNode.offsetHeight.offsetHeight/2)-(parseInt(this.offsetHeight)/2) <0 ? "0" :(parentNode.offsetHeight/2)-(parseInt(this.offsetHeight)/2) +'px');     } 
```

在这里查看[http://jsfiddle.net/qBDT4/1/](http://jsfiddle.net/qBDT4/1/)

# php - Jquery对话框错误

> ID：11133561
> 
> 赞同：0
> 
> 时间：2012-06-21T07:34:12.080
> 
> 标签：php, javascript, jquery, ajax

我正在使用一个对话框在我的页面上显示并提交一个查询表单。当我尝试**一次又一次**调用它时遇到问题。第一次一切正常并且表单提交成功。但是如果我点击 GO按钮（在下面添加了 html）。我收到此行文档的错误。 **编辑：**

```
<div class="hidden" id="dialog">
    <form action="index.php" class="testForm" id="testForm">
        <div class="name" id="name">
            <div class="displayName" id="dispName">Name</div>
            <div class="textName" id="viewName"><input type="text" class="fname" id="fullName" /></div>
            <div class="hide" id="nameErr"></div>

        </div>
        <div class="address" id="addressDetails">
            <div class="displayAddress" id="dispAddress">Address</div>
            <div class="textAddress" id=""><input type="text" class="taddress" id="fullAddress" /></div>
            <div class="hide" id="addressErr"></div>

        </div>
        <div class="submitForm" ><input type="button" class="submitDetails" id="submitInfo" name="Submit" value="Submit" onClick="validateAndSubmitForm()"/>
        <a name="Close" onclick="$('#dialog').dialog('close');">Close</a>
        </div>

    </form>
    </div> 
```

Javascript\jquery

```
function submitEnquiryForProperty() 
```

{

```
document.forms.testForm.reset();

$("#dialog").dialog({
                modal:true,
                resizable:false,
                autoOpen:false,
                width:260,
        });
openDialog(); 
```

}

```
 function openDialog(){
$("#dialog").dialog("open");    
  }

  function closeDialog(){
$("#dialog").dialog("close");   
 } 
```

表单提交回调函数

```
$.ajax({
            type:'POST',
            url:"processForm.php",
            data:"name="+name+"&address="+address,
            dataType:"html",

            success:function(msg){
                if(msg=="success"){
                    $("#dialog", window.parent.document).html("<div class='pad5'><div class='flt' style='padding-left:3px; width:235px;'><div class='thanx_msg'>Thank you for submitting the details. <br /><div class='spacer5'>&nbsp;</div><span class='gre'>Our Sales team shall revert to your query soon.</span></div></div><div class='spacer5'>&nbsp;</div><div style='padding-left:3px;' class='text'><strong>You can also:</strong></div><div style='margin-left:20px; line-height:20px;'>&bull; Apply for a <a href='homeloan.php'>Home Loan</a><br />&bull; Visit <a href='http://www.proptiger.com'>proptiger.com</a> for more properties<br />&bull; See our <a href='http://www.proptiger.com/blog'>Blog</a> for latest updates</div></div><br/><div class='msg' style='color:red;'>Click to close the box</div>");

                    $(function(){
                                $('#dialog').click(function() {
                                    closeDialog();
                                });
                            });

                }
                else
                {
                    alert("Operation cannot be completed,please try again");        
                }
            } 
```

但我面临同样的问题。`.reset()`在线错误。
谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:36:52.723

### 更新的答案

如果您想要一个可重用的对话框，请这样做：

1.  `<div>`在您的初始 HTML 中包含对话框元素（几乎可以肯定是 a ）。使用 CSS 类，使其不会立即可见，例如：

    ```
    HTML:
    <div id="dialog" class="hidden">...</div>

    CSS:
    .hidden { display: none } 
    ```

2.  `$("#dialog").dialog(options)`页面加载后立即从 Javascript无条件调用。请务必`autoOpen: false`在选项中进行设置。

3.  每当您想显示对话框时，请使用`$("#dialog").dialog("open")`.

4.  每当您想隐藏对话框时，请使用`$("#dialog").dialog("close")`.

5.  尽可能多地重复步骤 3 和 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:48:56.613

```
.dialog( "destroy" ) 
```

完全删除对话框功能。这将使元素返回到它的预初始化状态。

```
.dialog( "close" ) 
```

关闭对话框。

# c# - Ninject.Extensions.Logging.Log4Net 为类/方法名称生成不正确的输出

> ID：11133576
> 
> 赞同：3
> 
> 时间：2012-06-21T07:35:05.323
> 
> 标签：c#, log4net, ninject, ninject-extensions

我正在使用[Ninject](http://www.ninject.org/ "忍者") 3.0.1.10 进行依赖注入，并希望将[Ninject.Extensions.Logging](https://github.com/ninject/ninject.extensions.logging "Ninject.Extensions.Logging") 3.0.1.0 用于[log4net](http://logging.apache.org/log4net/ "log4net") 1.2.11 日志记录。但是，当我使用扩展而不是直接使用 log4net 时，我的日志文件中会得到不同的输出。我希望输出包含执行日志记录的类/方法的名称，如下在我的 app.config 中：

```
<log4net>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="MyConsoleAppender" />
    </root>

    <appender name="MyConsoleAppender" type="log4net.Appender.ConsoleAppender">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %-5level %C{1}.%M():%L - %m%n" />
        </layout>
    </appender>
</log4net> 
```

我制作了一个示例项目来演示我看到的问题，如下所示：

```
public class LoggingWithLog4Net
{
    private readonly ILog log;

    public LoggingWithLog4Net(ILog log)
    {
        this.log = log;
    }

    public void LogMessage(string message)
    {
        log.Debug(message);
    }
}

public class LoggingWithNinject
{
    private readonly ILogger log;

    public LoggingWithNinject(ILogger log)
    {
        this.log = log;
    }

    public void LogMessage(string message)
    {
        log.Debug(message);
    }
}

public class Program
{
    static void Main(string[] args)
    {
        log4net.Config.XmlConfigurator.Configure();

        NinjectSettings settings = new NinjectSettings()
        {
            LoadExtensions = false
        };

        using (IKernel kernel = new StandardKernel(settings, new Log4NetModule()))
        {
            kernel.Bind<ILog>()
                .ToConstant(LogManager.GetLogger("*"));

            LoggingWithLog4Net l4n = kernel.Get<LoggingWithLog4Net>();
            LoggingWithNinject ninject = kernel.Get<LoggingWithNinject>();

            l4n.LogMessage("log4net message");
            ninject.LogMessage("ninject message");
        }
    }
} 
```

这会产生以下输出（注意 Ninject 版本中的类/方法名称不正确）：

```
2012-06-21 08:25:19,000 DEBUG LoggingWithLog4Net.LogMessage():21 - log4net message
2012-06-21 08:25:19,015 DEBUG Log4NetLogger.Debug():98 - ninject message 
```

我希望第二行`LoggingWithNinject.LogMessage():21`作为源类/方法，但 Ninject`Log4NetLogger`被用作源。如何正确识别来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:08:25.377

看来我想要的东西是不可能的。`%C{1}.%M():%L`部分配置导致log4net打印调用类的位置信息。在 log4net 版本中，您调用`Log4NetLogger`它会将您的调用传递到 log4net。这意味着源始终是`Log4NetLogger`.

作为妥协，我使用了以下方法：

```
<conversionPattern value="%date [%thread] %-5level %c - %m%n" /> 
```

这会丢失调用的方法名称和行号，但是在使用 Ninject 扩展时确实会获得正确的类名称，因为始终请求记录器`Type`，默认情况下会使用类的完整命名空间/名称组合。

另一种选择是`log4net.ILog`直接注入并停止使用 Ninject 扩展。

# android - 在 KEY_DOWN 上设置下一个 EditText 聚焦和可编辑

> ID：11133585
> 
> 赞同：13
> 
> 时间：2012-06-21T07:36:03.547
> 
> 标签：android, android-layout

我有一个带有两个编辑文本的布局。当在第一个上按下回车键时，我需要将第二个设置为焦点和可编辑。我有设置焦点的代码，但是当第二个获得焦点时我***无法开始输入。***

PS我还需要edittext恰好是一个行高，而不能制作额外的行。它也有效。pss安卓2.3

XML 代码：

```
<EditText
            android:id="@+id/email"
            style="@style/profileLoginInput"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:hint="@string/email" android:ems="10" android:lines="1" android:maxLines="1" android:ellipsize="end">

            <requestFocus />
        </EditText>

<EditText
            android:id="@+id/password"
            style="@style/profileLoginInput"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:ems="10"
            android:inputType="textPassword" android:hint="@string/password"> 
```

Java代码：

```
((EditText) findViewById(R.id.email)).setOnKeyListener(new OnKeyListener(){
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event)
            {
                if (event.getAction() == KeyEvent.ACTION_DOWN)
                {
                    switch (keyCode)
                    {
                        case KeyEvent.KEYCODE_DPAD_CENTER:
                        case KeyEvent.KEYCODE_ENTER:
                        ((EditText) findViewById(R.id.password)).requestFocus();
                        return true;
                        default:
                            break;
                    }
                }
                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T07:37:55.917

你多虑了。您可以直接在 XML 中指定 EditText 输入的顺序，而无需在 Java 中执行任何操作。

使用`android:nextFocusDown`参数指定当用户按下回车键时您希望获得焦点的字段。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-19T08:28:22.203

```
android:inputType="text"
android:nextFocusDown="@+id/..." 
```

为我工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-20T07:33:19.537

android:nextFocusDown 对我来说工作得很好但是只有在它的工作之后才删除以下方法：

```
editText1.setOnEditorActionListener(new EditText.OnEditorActionListener() {

 @Override

public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
      if (actionId == EditorInfo.IME_ACTION_DONE ||   
              actionId == EditorInfo.IME_ACTION_NEXT) {
         editText2.requestFocus();
         return false;
      }

      return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-16T22:09:06.517

除了在 id 前面添加 + 之外：

```
android:inputType="text"
android:nextFocusDown="@+id/..." 
```

我还必须补充：

```
android:imeOptions="actionNext" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T07:09:52.643

在模拟器上运行此代码时似乎有问题。但是，它适用于手机

# c# - Active Directory 密码策略

> ID：11133589
> 
> 赞同：0
> 
> 时间：2012-06-21T07:36:46.233
> 
> 标签：c#, .net, active-directory

我在 .Net(C#) 中使用了一个 foreach 语句，该语句从用户列表中获取用户并将它们添加到活动目录中。我有 89 个用户，他们的属性（名字、姓氏、sAMAccountname、密码）相似但独一无二。但是，在插入第 86 个左右的用户时，我收到一条错误消息，提示密码不符合策略要求。当这个用户的密码是EpwrID86，而之前正确插入的用户密码是EpwrID85，这怎么可能？

关于密码策略有什么我不知道的吗？也许如果 acitve 目录发现太多密码遵循某种模式，它会引发错误？我在哪里可以配置不发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:27:08.160

嗯，我想通了。正如它所说，密码不尊重密码策略。要查看密码策略，请转到组策略管理，然后在树中搜索密码策略。我的问题是用户的 sAMAccountname 的一部分在密码中（2 个连续字符），这是策略不允许的。

# database - 在 VB.Net 数据表中查找特定行数/列数的平均值并存储到数组

> ID：11133605
> 
> 赞同：1
> 
> 时间：2012-06-21T07:37:40.070
> 
> 标签：database, vb.net, algorithm, math, noise-reduction

[在我的其他问题](https://stackoverflow.com/questions/11118678/convert-csv-data-to-datatable-in-vb-net)得到帮助后，我正在尝试编写一种降噪算法，该算法适用于 VB.NET DataTable 中的一组数据点。基本上，我想取两个整数，一个坐标值（`yCoord`例如）和一个平滑阈`NoiseThresh`值`(yCoord - NoiseThresh, yCoord + NoiseThresh)`（我会为每一列（在这个例子中）重复这个过程，最终得到一个一维的平均值数组。我的问题是：

1）我刚才说的有什么意义吗；），和
2）有人可以帮我写代码吗？我几乎没有使用数据库的经验。

谢谢！

我正在尝试做的一个例子：

```
//My data (pretend it's a database)
1  4  4  9  2  //yCoord would equal 5
6  3  8  12 3  //yCoord = 4
8  3 -2  2  0  //yCoord = 3
9 17  3  7  5  //yCoord = 2
4  1  0  9  7  //yCoord = 1

//In this example, my yCoord will equal 3 and NoiseThresh = 1

//For the first column
    Array(column1) = //average of the set of numbers centered at yCoord = 3 _
//(in this case 8) and the NoiseThresh=1 number on either side (here 6 & 9)
//For the second column
    Array(column2) = //average of the numbers 3,3,17 for example
    //etc., etc., 
```

这将在大型数据集上执行（典型数字为 yCoord=500，NoiseThresh = 50，数组长度 = 1092），因此不可能手动输入数字。

我希望这有助于澄清我的问题！

PS：是的，我知道 // 不是 VB.NET 注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:46:17.633

我必须承认我还没有理解范围部分（NoiseThresh 等），但这是一个开始：

```
Dim averages = (From col In tbl.Columns.Cast(Of DataColumn)()
               Select tbl.AsEnumerable().
                      Average(Function(r) r.Field(Of Int32)(col.ColumnName))).
               ToArray() 
```

它计算 中每列的每个平均值，`DataTable`并从结果中创建一个`Double()`（即使用于整数，平均值也可能导致小数位）。

**编辑**：通过您的示例，我现在已经了解了范围部分。所以基本上`yCord`是行索引（+1）并且`noiseThreas`是行范围（+/- n 行）。

然后这会给你正确的结果（做了一些代码注释）：

```
Dim yCord = 2 ' the row index(-1 since indices are 0-based) '
Dim noiseThresh = 1 ' +/- row '
' reverse all rows since your sample begins with index=5 and ends with index=1 '
Dim AVGs As Double() = (
    From colIndex In Enumerable.Range(0, tbl.Columns.Count)
    Select tbl.AsEnumerable().Reverse().
    Where(Function(r, index) index >= yCord - noiseThresh _
                     AndAlso index <= yCord + noiseThresh).
    Average(Function(r) r.Field(Of Int32)(colIndex))).ToArray() 
```

这个`LINQ`查询最重要的部分是`Where`. 它将您的范围应用于`IEnumerable(of DataRow)`. 然后我正在计算每一列的这些行的平均值。最后一步是将查询具体化为`Double()`.

结果：

```
 (0) 7.666666666666667   Double  => (6+8+9)/3
    (1) 7.666666666666667   Double  => (3+3+17)/3
    (2) 3.0                 Double  => (8-2+3)/3
    (3) 7.0                 Double  => (12+2+7)/3
    (4) 2.6666666666666665  Double  => (3+0+5)/3 
```

**编辑2**：

> 最后一件事。我假设要对另一个轴做同样的事情，我只需切换 x & y 和行 & 列？

没那么简单。但是你自己看看：

```
Dim noiseThresh = 1 ' +/- column '
Dim xCord = 2 ' the column index(-1 since indices are 0-based) '
' assuming that your x-cords now start with index=0 and ends with tbl.Column.Count-1 '
Dim AVGs As Double() = (
    From rowIndex In Enumerable.Range(0, tbl.Rows.Count)
    Select tbl.Columns.Cast(Of DataColumn)().
    Where(Function(c, colIndex) colIndex >= xCord - noiseThresh _
                        AndAlso colIndex <= xCord + noiseThresh).
    Average(Function(c) tbl.Rows(rowIndex).Field(Of Int32)(c.Ordinal))).ToArray() 
```

结果：

```
 (0) 5.666666666666667   Double  => (4+4+9)/3
    (1) 7.666666666666667   Double  => (3+8+12)/3
    (2) 1.0                 Double  => (3-2+2)/3
    (3) 9.0                 Double  => (17+3+7)/3
    (4) 3.3333333333333335  Double  => (1+0+9)/3 
```

# php - Facebook Like Gate like_status 为空

> ID：11133609
> 
> 赞同：0
> 
> 时间：2012-06-21T07:38:16.660
> 
> 标签：php

所以基本上我试图让一个类似的门工作，但 $like_status 变量永远不会改变，所以我改变为喜欢的内容的条件永远不会起作用。有谁知道为什么这永远不会改变？已将我的应用程序添加到 facebook 上的页面选项卡，它获取所有其他变量 $page_id、$page_admin、$country 和 $locale，但没有 $like_status。

谢谢查理

请参阅下面的代码

```
<?php

    enter code here

require_once('AppInfo.php');

// Enforce https on production
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
  header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
  exit();
}

// This provides access to helper functions defined in 'utils.php'
require_once('utils.php');

require 'includes/facebook.php';

// Create our Application instance.
$facebook = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret(),
  'cookie' => true
));

$signed_request = $facebook->getSignedRequest();

$page_id = $signed_request["page"]["id"];
$page_admin = $signed_request["page"]["admin"];
$like_status = $signed_request["page"]["liked"];
$country = $signed_request["user"]["country"];
$locale = $signed_request["user"]["locale"];

echo "<br>page id = $page_id";
echo "<br>page admin = $page_admin";
echo "<br>like status = $like_status";
echo "<br>country = $country";
echo "<br>locale = $locale";

function grokSignedRequest() 
{
    if (isset($_REQUEST['signed_request'])) 
    {
      $encoded_sig = null;
      $payload = null;
      list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
      $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
      $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), true));
      return $data;
    }
    return false;
}

// call the function to parse the signed request
$sr_data = grokSignedRequest();

// check like status
if ($sr_data->page->liked==1) 
{
    include ('includes/index2.php');
} 

else
{
  include ('includes/index1.php');
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:36:26.910

如果您在标签页上运行您的 PHP 代码，`like_status`则可能实际存在，但设置为值 0（零）。因此，该`echo`语句*似乎*没有为 输出任何内容`$like_status`，但实际上它的值为零。为了证明这一点，试试这样的代码：

```
if ($like_status == 0)
    echo "it's zero";
else 
    echo "it's not zero"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T12:06:30.310

编辑：对不起，我没有看到@robbie 在问题的评论中解决了这个问题

用户必须从页面选项卡到达应用程序，并且：

与 Canvas 页面一样，在用户授权您的应用之前，您不会在 signed_request 中收到您的应用可访问的所有用户信息。

[https://developers.facebook.com/docs/appsonfacebook/pagetabs/#integrating](https://developers.facebook.com/docs/appsonfacebook/pagetabs/#integrating)

# php - 我已将我的网站从 php 更改为 ASP？现在如何处理我的旧网址

> ID：11133613
> 
> 赞同：0
> 
> 时间：2012-06-21T07:38:24.870
> 
> 标签：php, asp.net, seo, indexing

最近我已将我的网站从 PHP (wordpress) 迁移到 ASP。现在如何处理我的旧网址，因为它在谷歌中被编入索引，现在显示 404 错误。而且我也迁移了服务器。有人可以帮助我解决这个问题。是否可以将我的旧 php url 重定向到 asp，或者有没有其他方法可以做到这一点。我有大约 2500 个网址..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:11:12.910

我可以想到两种方法来实现这一目标 -

如果有模式 - 例如，所有 URL 的格式都`scriptname.php?id=xxx` 遵循[http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/处的说明](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)

或者

您应该做的是设置一个 404 页面，您可以在其中检查请求 URL 是什么。例如，如果向旧用户发出请求，`url www.yourdomain.com/products.php?id=10`则显示您的 404 页面，您将在其中检查是否

```
//If URL == products.php
//Get ID of the product
//Redirect to products_new.asp?id=10 or whatever URL you require 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:41:40.130

是的，可以将旧的 php url 重定向到新的 asp.net url。

您应该查看 IIS Url Rewrite 2 插件：[http ://learn.iis.net/page.aspx/737/url-rewrite-module-2/](http://learn.iis.net/page.aspx/737/url-rewrite-module-2/)

您应该设置规则，从而导致永久重定向。谷歌将及时抓取您的旧页面，获取永久重定向响应代码并更新其索引。

# unicode - unicode 拼写检查器的开发平台？

> ID：11133616
> 
> 赞同：2
> 
> 时间：2012-06-21T07:38:41.553
> 
> 标签：unicode, nlp, spell-checking, pos-tagger, morphological-analysis

我决定为我最后一年的南亚语言项目开发一个（Unicode）拼写检查器。我想将其开发为插件或 Web 服务。但是我需要为它决定一个合适的开发平台。（这不仅会检查字典文件，还会使用形态分析/生成模块（词干分析器））。

java 脚本是否能够以公平的响应时间处理此类处理？

我可以在客户端处理大型字典吗？

有没有更好的建议可以提出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:17:46.807

Javascript 不能胜任这项任务，至少不能单独完成；它的 Unicode 支持太原始了，而且在很多地方，实际上是缺失的。例如，Javascript 不支持 Unicode 字素集群。

如果您使用 Java，请确保使用[ICU 库](http://site.icu-project.org/)，以便获得文本分割所需的所有 whizbang Unicode 属性。Java 的原生 Unicode 处理发生故障的地方是它的正则表达式库，这就是为什么 Android JNI 转向 ICU C/C++ 正则表达式库的原因。有很多为 Java 编写的 NLP 工具，其中一些您可能会觉得很方便。我所知道的其中大部分是针对英语或至少是西方语言的。

如果您愿意通过 CGI 而不仅仅是客户端操作在服务器端运行部分计算，那么您将不再受语言选择的束缚。例如，您可以将客户端上的 Javascript 与服务器上的 Perl 结合起来，后者的 Unicode 支持甚至比 Java 更好。这将如何融合在一起以及如何获得您想要的性能和行为取决于您实际想要做什么。

Perl 也有相当多的行业标准 NLP 模块可供广泛使用，其中大多数已经知道使用 Unicode，因为与 Java 一样，Perl 在内部使用 Unicode。

[此处](http://training.perl.com/YAPC2012/nlp.html)提供了有关在 Perl 中使用 NLP 工具进行某些形态分析（即词干提取和 lammatization）的简短幻灯片演示。众所周知，该演示文稿可以在 Safari、Firefox 或 Chrome 下运行，但在 Opera 或 Microsoft 的 Internet Explorer 下运行不佳。

[我不知道有任何专门针对亚洲语言的工具，尽管 Perl 确实通过 CPAN 的Unicode::LineBreak](http://search.cpan.org/perldoc?Unicode%3a%3aLineBreak)模块支持 UAX#11（东亚宽度）和 UAX#14（Unicode 换行符），而且 Perl 确实带有一个完全-通过标准[Unicode::](http://search.cpan.org/perldoc?Unicode%3a%3aCollate) Collat​​e 模块兼容的排序模块（实现 UTS#10，Unicocde 排序算法），并从同样标准的[Unicode::Collat​​e::Locale](http://search.cpan.org/perldoc?Unicode%3a%3aCollate%3a%3aLocale)模块提供语言环境支持，其中支持许多亚洲语言环境。如果您使用 CJK 语言，您可能需要访问 Unihan 数据库，该数据库可通过CPAN的[Unicode::Unihan模块获得。](http://search.cpan.org/perldoc?Unicode%3a%3aUnihan)更根本的是，Perl 通过它的`\X`其内置正则表达式引擎中的元字符，Java 和 Javascript 都没有提供。

所有这些都是 Javascript 中您可能需要的，并且发现非常缺乏的东西。

# java - 寻找下一个预期的令牌如果发生错误 ANTLR 3

> ID：11133617
> 
> 赞同：0
> 
> 时间：2012-06-21T07:38:44.577
> 
> 标签：java, antlr, grammar, antlr3, antlrworks

我正在使用 ANTLR 3，我有一个问题是，如果输入中发生任何错误，我如何找到下一个预期的令牌。我试图覆盖解析器的 getErrorMessage(RecognitionException e, String[] tokenNames)，我可以得到错误，但我无法得到 What is next expected token 。如果有人可以提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:57:58.437

这并不像听起来那么容易。而且很多时候，这样的信息是不可用的。

例如，您的语法可以匹配带括号的表达式，如下所示：`(1+2)`.

如果您的解析器现在尝试解析`"(1+2"`，`MismatchedTokenException`则会抛出 a ，其`expecting`属性将是`')'`. 所以，这很容易。

但是，当它尝试解析时`"1+2)"`，`MismatchedTokenException`会再次抛出 a，但现在解析器会抱怨它需要`EOF`，因为它只希望解析像`1+2`. 它*不会*告诉你在“过去”的某个地方，你忘记了一个`'('`.

因此，只有少数情况可以让您从解析器引发的异常中提取预期标记。在大多数情况下，您需要自己做（大量的）工作来提取这些信息。在解析器中创建有意义的错误消息并非易事！（至少，不能与简单地为不太复杂的语言编写语法相比）

我建议通过[ANTLR 的 API 文档](http://www.antlr3.org/api/ActionScript/org/antlr/runtime/RecognitionException.html)查看 ANTLR 抛出了哪些异常，并按目的为您的解析器提供无效输入，并`reportError(...)`在您的解析器中覆盖以查看抛出了哪些异常：

```
@parser::members {

  @Override
  public void reportError(RecognitionException e) {
    // inspect 'e' and handle/report it
  }
} 
```

# lua - 我们如何在 lua 中显示图像/颜色

> ID：11133619
> 
> 赞同：1
> 
> 时间：2012-06-21T07:38:53.093
> 
> 标签：lua, embedded-linux, lua-5.2

我遇到了这个问题，我无法找出解决方案。如果可能的话，我希望在某个窗口中显示一个图像（不一定很难），然后通过从键盘发送事件将它移动到整个页面。

问题是我不能使用 LÖVE 框架，因为我们不能将它集成到我们的设置中。所以我会要求 Lua api 这样做。

这里有人知道吗？我还必须安装某种额外的库来支持颜色和图像操作吗？

感谢分享知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:18:12.163

Lua 是一门相当简单的语言，因此没有任何内置的图像支持。但这也适用于几乎所有其他编程语言，图像支持通常包含在补充库中。

您需要安装一些提供 GUI 功能的库（如[IUP](http://www.tecgraf.puc-rio.br/iup/)），或使用将 Lua 与图形库集成的应用程序（如[murgaLua](http://www.murga-projects.com/murgaLua/index.html)、[Löve](http://love2d.org/)等）

从您附加到问题的标签来看，您似乎正在使用嵌入式平台。为了提供更有用的答案，人们可​​能知道哪个是有用的。

# android - 有没有其他方法可以从线程中占用 cpu aprt

> ID：11133623
> 
> 赞同：0
> 
> 时间：2012-06-21T07:39:19.957
> 
> 标签：android, xamarin.android

> **可能重复：**
> [在单声道中为 Android 模拟 CPU 使用情况](https://stackoverflow.com/questions/10910663/simulate-cpu-usage-in-mono-for-android)

有没有其他方法可以在单声道/安卓应用程序中使用更多的 cpu 而不是线程？请给一些建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:32:52.190

您可以像这样实现使每次都无效的 Canvas：

```
private class Painter extends View{
        ArrayList<Point> points;
    public Painter(Context context){
        super(context);
    }

    public void draw() {
    points = new ArrayList<Point();

            for (int i = 0; i < 10000; i++) {
                //assign Points to the array
                Point p = new Point();
                p.x = 10;
                p.y = 30;
                points.add(p);
            }
            nameOfTheInstancePainter.invalidate();
    }

    @Override 
    protected void onDraw(Canvas c) {
        for (int i = 0; i < 10000; i++) {
                //paint aaaall the points
            }
        nameOfTheInstancePainter.invalidate(); //that will cause the ReDraw of everything everytime
    }
} 
```

哦，顺便说一句，绘制画布使用不同的线程，这就是我编写此代码的原因！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:42:46.083

多么奇怪的问题。您可以在主线程中执行各种处理器密集型操作。读取和写入位图数据，执行各种计算等。为什么要这样做？您希望占用多少 CPU？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:19:33.100

不知道它的用途是什么，但这不使用任何工作线程并且会很好地吸收 CPU：

```
[Activity(MainLauncher = true)]
public class PointlessActivity : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        while(true) { }
    }
} 
```

# iphone - 如何在 [NSDate 日期] 当天 00:00 获取 NSDate？

> ID：11133632
> 
> 赞同：12
> 
> 时间：2012-06-21T07:40:21.567
> 
> 标签：iphone, nsdate, nscalendar, nsdatecomponents

我需要从 [NSDate 日期] 获取 00:00（一天的开始）的 NSDate 对象，假设当前是 11:30（由 [NSDate 日期] 返回），在 2012 年 1 月 6 日，现在我需要在 2012 年 1 月 6 日上午 00:00 进行 NSDate。

我没有尝试过，但我的想法是：

```
NSDate *now = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:now];
[components setHour:0];
[components setMinute:0];
[components setSecond:0];
NSDate *morningStart = [calendar dateFromComponents:components]; 
```

所以我首先获取当前日期（比如说它是 01/06/2012），并为该日期构造一个 NSDateComponent，然后我将小时/分钟/秒设置为 0，并且不应更改年/月/日（即 01 /06/2012）然后我为此组件设置创建一个 NSDate，我可以获得 00:00:00 01/06/2012 的日期吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T07:48:28.740

您所做的是正确的，但是当您 NSLog 早上开始时，日期将显示在 GMT 时区

如果您想确保日期正确，请将其转换为 NSString

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
 [formatter setDateFormat:@"yyyy-MMM-dd HH:mm:ss"];
 NSString *strFromDate = [formatter stringFromDate:morningStart]; // this will return 2012-Jun-21 00:00:00 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T08:31:35.693

将 NSDate 转换为 NSString 可能会有所帮助，但如果您需要保留一个 NSDate 对象以进行进一步处理，这里是您的解决方案，将您真正的 morningStart NSDate 对象设置在 00:00:00 时间，同时注意时区...正如您将看到的那样，您离解决方案并不远：

```
NSDate *now = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:now];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];
int timeZoneOffset = [destinationTimeZone secondsFromGMTForDate:now] / 3600;
[components setHour:timeZoneOffset];
[components setMinute:0];
[components setSecond:0];
NSDate *morningStart = [calendar dateFromComponents:components]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-22T19:02:16.790

在 iOS8 中使用以下方法很容易做到这一点`startOfDayForDate`：

```
let date = NSDate() 
let calendar = NSCalendar.currentCalendar(calendarIdentifier: NSGregorianCalendar)
let dateAtStartOfDay = calendar.startOfDayForDate(date) 
```

或者您可以在 Swift 中以传统方式执行此操作，如下所示：

```
let date = NSDate()
let calendar = NSCalendar.currentCalendar(calendarIdentifier: NSGregorianCalendar)
// Use a mask to extract the required components from today's date
let components = calendar.components(.CalendarUnitYear | .CalendarUnitMonth | .CalendarUnitDay, fromDate: date)
let dateAtStartOfDay = calendar.dateFromComponents(components)!
print(dateAtStartOfDay) 
```

（**注意：** NSDates 是相对于 GMT 存储的。因此`print`将显示相对本地时间。清楚地了解 TimeZone 对正确使用 NSDates 至关重要。）

# macos - TextMate：在编辑器和项目抽屉之间切换焦点的快捷方式

> ID：11133633
> 
> 赞同：0
> 
> 时间：2012-06-21T07:40:23.280
> 
> 标签：macos, osx-lion, textmate

我正在寻找在 TextMate 中的编辑器和项目抽屉之间切换焦点的快捷方式。我用谷歌搜索了一些不同的结果，但没有一个快捷方式对我有用：

[http://dirtystylus.com/2007/10/26/toggling-between-main-window-and-drawer-in-textmate/](http://dirtystylus.com/2007/10/26/toggling-between-main-window-and-drawer-in-textmate/) [http://gtdmarc.blogspot.de/2008/06/some-useful-textmate-快捷方式.html](http://gtdmarc.blogspot.de/2008/06/some-useful-textmate-shortcuts.html)

[此](https://superuser.com/questions/343773/focusing-the-drawer-in-textmate-on-lion)链接建议安装 MissingDrawer 插件，但这不是我正在寻找的解决方案。

我在具有德语键盘布局的 MacBook Pro 上安装了 OS X Lion 10.7.3 和 TextMate 1.5.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T09:34:47.647

TextMate 2 中的快捷键（使用西班牙语键盘）是`ctrl`+ `tab`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:06:23.287

官方答案在文档中：

> ⌘` ⌘~ 切换到下一个/上一个窗口。此键盘快捷键基于键的物理位置，因此在许多欧洲键盘映射中它是 ⌘< 和⌘> （它是 Z 左边的键）。
> 
> ⌥⌘` ⌥⌘~ 在主窗口和抽屉之间切换。与上一个键一样，这个键也是基于物理位置的。该功能在 Panther 上不可用。

***编辑***

两者都在我的法语键盘上为我工作，但不是文档所说的：两者都不是`⌘</kbd>+`<` nor `⌘</kbd>+`>` did work but `⌘</kbd>+``` did. YMMV.```

***结束编辑***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:12:12.000

刚找到，是`⌘</kbd>+`⌥</kbd>+`<`.``

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T09:43:01.033

在 2.0-beta `cmd`++`alt`中`tab`工作正常。相当于 Navigate->Move focus to file browser

# javascript - 如何对调用服务器以获取信息的 JavaScript 文件进行外部接口调用

> ID：11133636
> 
> 赞同：0
> 
> 时间：2012-06-21T07:40:36.917
> 
> 标签：javascript, actionscript, externalinterface

我有一个javascript文件，它有一个调用服务器（url）来获取信息的函数。这是javascript函数：

```
sendQuery = function(devstr) {

    var baseUrl = 'http://serverurl/' + devstr;

    alert("the url is " + baseUrl);

    $.ajax(baseUrl, {
       type: 'GET',
       dataType: 'json'
    }).done(function(results){
       return results;
    }).fail(function(e) {
       showError(e);
    });
} 
```

从actionscript我调用这个函数如下：

```
var result:String = ExternalInterface.call("sendQuery", parameter) as String; 
```

调用实际上发生了（我从带有正确 url 的 javascript 收到警报），但结果只是空或 null。没有结果回来。我在javascript中添加了一个“完成”的警报，并且没有调用该警报。

我尝试使用 ExternalInterface.addcallback 但我无法传递参数，我也不完全确定这是否会起作用。

我不完全确定从 Actionscript 调用 Javascript 文件，该文件调用服务器，然后将信息返回给 actionscript，以便我可以解析它并用它做更多事情。

**我还应该注意，我将执行的一些操作需要 POST 操作。我没有通过 actionscript 执行此操作的原因是因为它需要在我请求此信息的服务器上有一个 crossdomain.xml 文件。**

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:53:44.667

您正在尝试做的事情，可以在没有`Javascript`URLLoader类`ActionScript3.0`的情况下[**完成：**](http://injun.ru/flash10api/flash/net/URLLoader.html)

```
 var baseUrl:String = 'http://serverurl/'+parameter;
 var request:URLRequest = new URLRequest(baseUrl);
 request.contentType = 'application/json';
 request.method = URLRequestMethod.GET;    //For 'POST' request-> URLRequestMethod.POST
 var urlLoader:URLLoader = new URLLoader();
 urlLoader.addEventListener(Event.COMPLETE, function(e:Event):void{
     var result:* = e.target.data;
 });
 urlLoader.load(request); 
```

# java - 从 Servlet 执行批量更新时的 Java EXCEPTION_ACCESS_VIOLATION

> ID：11133638
> 
> 赞同：0
> 
> 时间：2012-06-21T07:40:41.280
> 
> 标签：java, sql, exception, servlets

我想从 java Servlet 在 MS Access 文件中插入多条记录。前 10 条记录的批处理更新运行良好，但下一次批处理更新会出现以下错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6966ef76, pid=5688, tid=5368
#
# JRE version: 6.0_33-b03
# Java VM: Java HotSpot(TM) Client VM (20.8-b03 mixed mode windows-x86 )
# Problematic frame:
# C  [odbcjt32.dll+0x1ef76]
#
# An error report file with more information is saved as:
# D:\SOFT\Eclipse IDE for Java EE\hs_err_pid5688.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

这是我正在使用的示例代码：

```
statement = dbConnection.prepareStatement(insertQuery);

            for(int i = 0; i < DataCache.seriesTable.getRows().size(); i++) {
                ArrayList<String> row = DataCache.seriesTable.getRow(i);
                for(int j = 0; j < row.size(); j++) {
                    statement.setString(j+1, row.get(j));
                }
                statement.addBatch();

                if ((i + 1) % 5 == 0) {
                    statement.executeBatch(); // Execute every 5 items.
                }
            }
            int[] n = statement.executeBatch(); 
```

知道如何摆脱这个问题吗？

以下是“D:\SOFT\Eclipse IDE for Java EE\hs_err_pid5688.log”文件的内容。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6966ef76, pid=5688, tid=5368
#
# JRE version: 6.0_33-b03
# Java VM: Java HotSpot(TM) Client VM (20.8-b03 mixed mode windows-x86 )
# Problematic frame:
# C  [odbcjt32.dll+0x1ef76]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x184c9400):  JavaThread "http-8080-2" daemon [_thread_in_native, id=5368, stack(0x18b60000,0x18bb0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000000

Registers:
EAX=0x00000000, EBX=0x0000000e, ECX=0x0000000a, EDX=0x00000005
ESP=0x18baf258, EBP=0x18baf274, ESI=0x18940340, EDI=0x189402d8
EIP=0x6966ef76, EFLAGS=0x00010246

Top of Stack: (sp=0x18baf258)
0x18baf258:   00000000 18940340 189402d8 00000000
0x18baf268:   00000000 00000001 00000001 18baf2a8
0x18baf278:   6966f95b 00000000 0000000e 00000001
0x18baf288:   00000001 000000ff 00000000 184ea710
0x18baf298:   00000000 00000000 0029d830 0029b240
0x18baf2a8:   18baf2e8 700be766 189402d8 0000000e
0x18baf2b8:   00000001 00000001 00000001 000000ff
0x18baf2c8:   00000000 184ea710 00000000 00000000 

Instructions: (pc=0x6966ef76)
0x6966ef56:   52 e8 34 ea ff ff 85 c0 0f 84 56 ff ff ff 66 83
0x6966ef66:   7d 08 00 8b 40 20 75 14 83 f8 ff 75 08 8b 45 24
0x6966ef76:   83 38 ff 75 07 c7 45 f0 01 00 00 00 0f bf 4d 14
0x6966ef86:   6a 00 6a 00 51 6a 02 53 56 8d 87 30 03 00 00 50 

Register to memory mapping:

EAX=0x00000000 is an unknown value
EBX=0x0000000e is an unknown value
ECX=0x0000000a is an unknown value
EDX=0x00000005 is an unknown value
ESP=0x18baf258 is pointing into the stack for thread: 0x184c9400
EBP=0x18baf274 is pointing into the stack for thread: 0x184c9400
ESI=0x18940340 is an unknown value
EDI=0x189402d8 is an unknown value

Stack: [0x18b60000,0x18bb0000],  sp=0x18baf258,  free space=316k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [odbcjt32.dll+0x1ef76]  SQLNumParams+0x946
C  [odbcjt32.dll+0x1f95b]  SQLBindParameter+0x9b
C  [ODBC32.dll+0x2e766]  SQLBindParameter+0x1df
C  [ODBC32.dll+0x2e5fd]  SQLBindParameter+0x76
C  [JdbcOdbc.dll+0x2c24]  Java_sun_jdbc_odbc_JdbcOdbc_bindInParameterString+0x106
j  sun.jdbc.odbc.JdbcOdbc.bindInParameterString(JII[BII[B[B[J)V+0
j  sun.jdbc.odbc.JdbcOdbc.SQLBindInParameterString(JIIII[B[B[J)V+110
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setChar(IIILjava/lang/String;)V+135
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setString(ILjava/lang/String;)V+39
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(ILjava/lang/Object;II)V+376
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(ILjava/lang/Object;I)V+5
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.emulateExecuteBatch()[I+268
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeBatchUpdate()[I+564
j  sun.jdbc.odbc.JdbcOdbcStatement.executeBatch()[I+1
j  com.SDAM.servlets.Upload_Data_File.saveSeriesData()V+100
j  com.SDAM.servlets.Upload_Data_File.extractSeriesData(Ljava/sql/Connection;)V+149
j  com.SDAM.servlets.Upload_Data_File.processRequest(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+278
j  com.SDAM.servlets.Upload_Data_File.doPost(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+3
j  javax.servlet.http.HttpServlet.service(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+139
j  javax.servlet.http.HttpServlet.service(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+30
j  org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+376
j  org.apache.catalina.core.ApplicationFilterChain.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+101
j  org.apache.catalina.core.StandardWrapperValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+804
j  org.apache.catalina.core.StandardContextValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+365
j  org.apache.catalina.core.StandardHostValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+64
j  org.apache.catalina.valves.ErrorReportValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+6
j  org.apache.catalina.core.StandardEngineValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+42
j  org.apache.catalina.connector.CoyoteAdapter.service(Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;)V+158
j  org.apache.coyote.http11.Http11Processor.process(Ljava/net/Socket;)V+514
j  org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Ljava/net/Socket;)Z+82
j  org.apache.tomcat.util.net.JIoEndpoint$Worker.run()V+41
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub
V  [jvm.dll+0xfadcb]
V  [jvm.dll+0x18c3e1]
V  [jvm.dll+0xfaf71]
V  [jvm.dll+0xfafcb]
V  [jvm.dll+0xb5569]
V  [jvm.dll+0x1190a4]
V  [jvm.dll+0x14108c]
C  [msvcr71.dll+0x9565]  endthreadex+0xa0
C  [kernel32.dll+0x51174]  BaseThreadInitThunk+0x12
C  [ntdll.dll+0x5b3f5]  RtlInitializeExceptionChain+0x63
C  [ntdll.dll+0x5b3c8]  RtlInitializeExceptionChain+0x36

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  sun.jdbc.odbc.JdbcOdbc.bindInParameterString(JII[BII[B[B[J)V+0
j  sun.jdbc.odbc.JdbcOdbc.SQLBindInParameterString(JIIII[B[B[J)V+110
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setChar(IIILjava/lang/String;)V+135
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setString(ILjava/lang/String;)V+39
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(ILjava/lang/Object;II)V+376
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(ILjava/lang/Object;I)V+5
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.emulateExecuteBatch()[I+268
j  sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeBatchUpdate()[I+564
j  sun.jdbc.odbc.JdbcOdbcStatement.executeBatch()[I+1
j  com.SDAM.servlets.Upload_Data_File.saveSeriesData()V+100
j  com.SDAM.servlets.Upload_Data_File.extractSeriesData(Ljava/sql/Connection;)V+149
j  com.SDAM.servlets.Upload_Data_File.processRequest(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+278
j  com.SDAM.servlets.Upload_Data_File.doPost(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+3
j  javax.servlet.http.HttpServlet.service(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+139
j  javax.servlet.http.HttpServlet.service(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+30
j  org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+376
j  org.apache.catalina.core.ApplicationFilterChain.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+101
j  org.apache.catalina.core.StandardWrapperValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+804
j  org.apache.catalina.core.StandardContextValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+365
j  org.apache.catalina.core.StandardHostValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+64
j  org.apache.catalina.valves.ErrorReportValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+6
j  org.apache.catalina.core.StandardEngineValve.invoke(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V+42
j  org.apache.catalina.connector.CoyoteAdapter.service(Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;)V+158
j  org.apache.coyote.http11.Http11Processor.process(Ljava/net/Socket;)V+514
j  org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Ljava/net/Socket;)Z+82
j  org.apache.tomcat.util.net.JIoEndpoint$Worker.run()V+41
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x184aa400 JavaThread "http-8080-7" daemon [_thread_blocked, id=3684, stack(0x18df0000,0x18e40000)]
  0x184a9c00 JavaThread "http-8080-6" daemon [_thread_blocked, id=2220, stack(0x18da0000,0x18df0000)]
  0x184a9400 JavaThread "http-8080-5" daemon [_thread_blocked, id=5920, stack(0x18d50000,0x18da0000)]
  0x184a9000 JavaThread "http-8080-4" daemon [_thread_blocked, id=5112, stack(0x18c00000,0x18c50000)]
  0x184ed400 JavaThread "http-8080-3" daemon [_thread_blocked, id=4956, stack(0x18bb0000,0x18c00000)]
=>0x184c9400 JavaThread "http-8080-2" daemon [_thread_in_native, id=5368, stack(0x18b60000,0x18bb0000)]
  0x184c3c00 JavaThread "http-8080-1" daemon [_thread_blocked, id=5892, stack(0x18b10000,0x18b60000)]
  0x1851c800 JavaThread "TP-Monitor" daemon [_thread_blocked, id=3596, stack(0x18ac0000,0x18b10000)]
  0x1851c400 JavaThread "TP-Processor4" daemon [_thread_in_native, id=4256, stack(0x18a70000,0x18ac0000)]
  0x1851bc00 JavaThread "TP-Processor3" daemon [_thread_blocked, id=5900, stack(0x18a20000,0x18a70000)]
  0x18520800 JavaThread "TP-Processor2" daemon [_thread_blocked, id=5576, stack(0x188d0000,0x18920000)]
  0x184af000 JavaThread "TP-Processor1" daemon [_thread_blocked, id=700, stack(0x18880000,0x188d0000)]
  0x184b7800 JavaThread "http-8080-Acceptor-0" daemon [_thread_in_native, id=2364, stack(0x18830000,0x18880000)]
  0x184afc00 JavaThread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon [_thread_blocked, id=3148, stack(0x180e0000,0x18130000)]
  0x18400c00 JavaThread "GC Daemon" daemon [_thread_blocked, id=708, stack(0x18090000,0x180e0000)]
  0x0194c400 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=1964, stack(0x17f30000,0x17f80000)]
  0x01952800 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=5404, stack(0x17e80000,0x17ed0000)]
  0x0193a400 JavaThread "JDWP Command Reader" daemon [_thread_in_native, id=5256, stack(0x17e30000,0x17e80000)]
  0x01939400 JavaThread "JDWP Event Helper Thread" daemon [_thread_blocked, id=5760, stack(0x17dc0000,0x17e10000)]
  0x01937400 JavaThread "JDWP Transport Listener: dt_socket" daemon [_thread_blocked, id=3956, stack(0x17d70000,0x17dc0000)]
  0x0192b000 JavaThread "Attach Listener" daemon [_thread_blocked, id=5712, stack(0x17c60000,0x17cb0000)]
  0x0192a000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=5516, stack(0x17c10000,0x17c60000)]
  0x018fa400 JavaThread "Finalizer" daemon [_thread_blocked, id=5284, stack(0x17bc0000,0x17c10000)]
  0x018f8c00 JavaThread "Reference Handler" daemon [_thread_blocked, id=3564, stack(0x17b70000,0x17bc0000)]
  0x003e9400 JavaThread "main" [_thread_in_native, id=448, stack(0x00370000,0x003c0000)]

Other Threads:
  0x018f5800 VMThread [stack: 0x17b20000,0x17b70000] [id=3760]
  0x0194e000 WatcherThread [stack: 0x18040000,0x18090000] [id=1532]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 4992K, used 4236K [0x039e0000, 0x03f40000, 0x08f30000)
  eden space 4480K,  83% used [0x039e0000, 0x03d87c10, 0x03e40000)
  from space 512K,  96% used [0x03e40000, 0x03ebb4f0, 0x03ec0000)
  to   space 512K,   0% used [0x03ec0000, 0x03ec0000, 0x03f40000)
 tenured generation   total 10944K, used 6149K [0x08f30000, 0x099e0000, 0x139e0000)
   the space 10944K,  56% used [0x08f30000, 0x09531738, 0x09531800, 0x099e0000)
 compacting perm gen  total 12288K, used 10772K [0x139e0000, 0x145e0000, 0x179e0000)
   the space 12288K,  87% used [0x139e0000, 0x144653b0, 0x14465400, 0x145e0000)
No shared spaces configured.

Code Cache  [0x01960000, 0x01af8000, 0x03960000)
 total_blobs=697 nmethods=539 adapters=102 free_code_cache=31904832 largest_free_block=192

Dynamic libraries:
0x00400000 - 0x00425000     C:\Program Files\Java\jre6\bin\javaw.exe
0x77660000 - 0x7779c000     C:\Windows\SYSTEM32\ntdll.dll
0x77310000 - 0x773e4000     C:\Windows\system32\kernel32.dll
0x75a20000 - 0x75a6a000     C:\Windows\system32\KERNELBASE.dll
0x777f0000 - 0x77890000     C:\Windows\system32\ADVAPI32.dll
0x77440000 - 0x774ec000     C:\Windows\system32\msvcrt.dll
0x76f80000 - 0x76f99000     C:\Windows\SYSTEM32\sechost.dll
0x75c20000 - 0x75cc1000     C:\Windows\system32\RPCRT4.dll
0x75e00000 - 0x75ec9000     C:\Windows\system32\USER32.dll
0x773f0000 - 0x7743e000     C:\Windows\system32\GDI32.dll
0x774f0000 - 0x774fa000     C:\Windows\system32\LPK.dll
0x75b80000 - 0x75c1d000     C:\Windows\system32\USP10.dll
0x76d10000 - 0x76d2f000     C:\Windows\system32\IMM32.DLL
0x76e20000 - 0x76eec000     C:\Windows\system32\MSCTF.dll
0x7c340000 - 0x7c396000     C:\Program Files\Java\jre6\bin\msvcr71.dll
0x6d7f0000 - 0x6da9f000     C:\Program Files\Java\jre6\bin\client\jvm.dll
0x73c40000 - 0x73c72000     C:\Windows\system32\WINMM.dll
0x756c0000 - 0x7570b000     C:\Windows\system32\apphelp.dll
0x6d7a0000 - 0x6d7ac000     C:\Program Files\Java\jre6\bin\verify.dll
0x6d320000 - 0x6d33f000     C:\Program Files\Java\jre6\bin\java.dll
0x6d370000 - 0x6d399000     C:\Program Files\Java\jre6\bin\jdwp.dll
0x6d690000 - 0x6d696000     C:\Program Files\Java\jre6\bin\npt.dll
0x6d7e0000 - 0x6d7ef000     C:\Program Files\Java\jre6\bin\zip.dll
0x6d200000 - 0x6d207000     C:\Program Files\Java\jre6\bin\dt_socket.dll
0x777a0000 - 0x777d5000     C:\Windows\system32\WS2_32.dll
0x75df0000 - 0x75df6000     C:\Windows\system32\NSI.dll
0x73f20000 - 0x73f30000     C:\Windows\system32\NLAapi.dll
0x75200000 - 0x7523c000     C:\Windows\System32\mswsock.dll
0x750c0000 - 0x75104000     C:\Windows\system32\DNSAPI.dll
0x71be0000 - 0x71be8000     C:\Windows\System32\winrnr.dll
0x71bd0000 - 0x71be0000     C:\Windows\system32\napinsp.dll
0x71bb0000 - 0x71bc2000     C:\Windows\system32\pnrpnsp.dll
0x003c0000 - 0x003d9000     C:\Program Files\Bonjour\mdnsNSP.dll
0x73700000 - 0x7371c000     C:\Windows\system32\Iphlpapi.DLL
0x736f0000 - 0x736f7000     C:\Windows\system32\WINNSI.DLL
0x73590000 - 0x735c8000     C:\Windows\System32\fwpuclnt.dll
0x71ba0000 - 0x71ba6000     C:\Windows\system32\rasadhlp.dll
0x74d40000 - 0x74d45000     C:\Windows\System32\wshtcpip.dll
0x6d550000 - 0x6d559000     C:\Program Files\Java\jre6\bin\management.dll
0x6d780000 - 0x6d788000     C:\Program Files\Java\jre6\bin\sunmscapi.dll
0x75900000 - 0x75a1c000     C:\Windows\system32\CRYPT32.dll
0x75870000 - 0x7587c000     C:\Windows\system32\MSASN1.dll
0x6d600000 - 0x6d613000     C:\Program Files\Java\jre6\bin\net.dll
0x751f0000 - 0x751f6000     C:\Windows\System32\wship6.dll
0x75240000 - 0x75256000     C:\Windows\system32\CRYPTSP.dll
0x74fe0000 - 0x7501b000     C:\Windows\system32\rsaenh.dll
0x74e10000 - 0x74e27000     C:\Windows\system32\USERENV.dll
0x75760000 - 0x7576b000     C:\Windows\system32\profapi.dll
0x75740000 - 0x7574c000     C:\Windows\system32\CRYPTBASE.dll
0x6d360000 - 0x6d36d000     C:\Program Files\Java\jre6\bin\JdbcOdbc.dll
0x70090000 - 0x7011a000     C:\Windows\system32\ODBC32.dll
0x72840000 - 0x72878000     C:\Windows\system32\odbcint.dll
0x753e0000 - 0x753f7000     C:\Windows\system32\bcrypt.dll
0x74f20000 - 0x74f5d000     C:\Windows\system32\bcryptprimitives.dll
0x6ffa0000 - 0x6ffe5000     C:\PROGRA~1\COMMON~1\MICROS~1\OFFICE14\ACEODBC.DLL
0x733c0000 - 0x73463000     C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.5570_none_509463cabcb6ef2a\MSVCR90.dll
0x75b00000 - 0x75b7b000     C:\Windows\system32\COMDLG32.dll
0x77280000 - 0x772d7000     C:\Windows\system32\SHLWAPI.dll
0x745b0000 - 0x7474e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7600.16385_none_421189da2b7fabfc\COMCTL32.dll
0x75ed0000 - 0x76b19000     C:\Windows\system32\SHELL32.dll
0x77500000 - 0x7765c000     C:\Windows\system32\ole32.dll
0x5cca0000 - 0x5de7e000     C:\Program Files\Common Files\Microsoft Shared\office14\mso.dll
0x19070000 - 0x192b0000     C:\Windows\system32\msi.dll
0x61e60000 - 0x6226f000     C:\Program Files\Common Files\Microsoft Shared\office14\Cultures\office.odf
0x73990000 - 0x7399f000     C:\Program Files\Common Files\Microsoft Shared\OFFICE14\1033\ACEODBCI.DLL
0x747d0000 - 0x747db000     C:\Program Files\Common Files\Microsoft Shared\OFFICE14\ACEERR.DLL
0x61ab0000 - 0x61cca000     C:\Program Files\Common Files\Microsoft Shared\OFFICE14\ACECORE.DLL
0x73330000 - 0x733be000     C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.5570_none_509463cabcb6ef2a\MSVCP90.dll
0x76ef0000 - 0x76f7f000     C:\Windows\system32\OLEAUT32.dll
0x624c0000 - 0x62592000     C:\Program Files\Common Files\Microsoft Shared\OFFICE14\1033\ACEWSTR.DLL
0x709f0000 - 0x70a0e000     C:\Windows\system32\odbccp32.dll
0x74cb0000 - 0x74cb9000     C:\Windows\system32\VERSION.dll
0x756a0000 - 0x756ba000     C:\Windows\system32\SspiCli.dll
0x74470000 - 0x744b0000     C:\Windows\system32\uxtheme.dll
0x58770000 - 0x5cc9a000     C:\Program Files\Common Files\Microsoft Shared\office14\MSORES.DLL
0x72b60000 - 0x72b76000     C:\Windows\system32\DavClnt.DLL
0x747e0000 - 0x747e8000     C:\Windows\system32\DAVHLPR.dll
0x60120000 - 0x60382000     C:\Program Files\Common Files\Microsoft Shared\office14\1033\MSOINTL.DLL
0x741c0000 - 0x741d3000     C:\Windows\system32\dwmapi.dll
0x696a0000 - 0x69743000     C:\PROGRA~1\COMMON~1\MICROS~1\OFFICE14\ACEEXCL.DLL
0x70470000 - 0x704a2000     C:\Program Files\Common Files\Microsoft Shared\OFFICE14\1033\ACEINTL.DLL
0x76d90000 - 0x76e13000     C:\Windows\system32\CLBCatQ.DLL
0x71d90000 - 0x71ee7000     C:\Windows\System32\msxml6.dll
0x69650000 - 0x6969e000     C:\Windows\system32\odbcjt32.dll
0x5fc30000 - 0x5fdb5000     C:\Windows\system32\msjet40.dll
0x693c0000 - 0x69458000     C:\Windows\system32\mswstr10.dll
0x71450000 - 0x71456000     C:\Windows\system32\odbcji32.dll
0x709d0000 - 0x709e1000     C:\Windows\system32\msjter40.dll
0x70940000 - 0x70946000     C:\Windows\system32\MSJINT40.DLL
0x692e0000 - 0x69328000     C:\Windows\system32\msjtes40.dll
0x1ded0000 - 0x1dedb000     C:\Windows\system32\VBAJET32.DLL
0x230d0000 - 0x23132000     C:\Windows\system32\expsrv.dll
0x777e0000 - 0x777e5000     C:\Windows\system32\PSAPI.DLL

VM Arguments:
jvm_args: -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:52879 -Dcatalina.base=D:\SOFT\Eclipse IDE for Java EE\Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0 -Dcatalina.home=C:\apache-tomcat-6.0.32 -Dwtp.deploy=D:\SOFT\Eclipse IDE for Java EE\Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps -Djava.endorsed.dirs=C:\apache-tomcat-6.0.32\endorsed -Dfile.encoding=Cp1252 
java_command: org.apache.catalina.startup.Bootstrap start
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_25
CLASSPATH=C:\apache-tomcat-6.0.32\lib\servlet-api.jar;C:\apache-tomcat-6.0.32\lib\jsp-api.jar;.;
PATH=C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;C:\Ruby192\bin;C:\Program Files\Java\jdk1.6.0_25\bin;E:\ApacheAnt\bin;D:\SOFT\Eclipse IDE for Java EE;
USERNAME=khawar.raza
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 7, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 Build 7600 

CPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 23 stepping 7, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1

Memory: 4k page, physical 3088716k(1133348k free), swap 6175668k(3980664k free)

vm_info: Java HotSpot(TM) Client VM (20.8-b03) for windows-x86 JRE (1.6.0_33-b03), built on May  9 2012 09:39:57 by "java_re" with MS VC++ 7.1 (VS2003)

time: Thu Jun 21 12:32:43 2012
elapsed time: 54 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:46:49.037

完成后尝试关闭：

```
statement.close(); 
```

**编辑**对不起，由于某种原因，我误解了你的问题。从错误消息中：

`# The crash happened outside the Java Virtual Machine in native code.`

我用谷歌搜索了这个错误，但这是我所能得到的：

[http://www.java-forums.org/eclipse/312-exception_access_violation-0xc0000005.html](http://www.java-forums.org/eclipse/312-exception_access_violation-0xc0000005.html)

一些帖子报告说它可能是 JVM 中的错误，您需要升级。其他人则认为 DLL 已损坏。

我要做的第一件事是在另一台机器上测试它，然后从那里移动。

没有太多帮助，我知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:15:37.833

我找到了解决方案。实际上，我使用 MS Access 作为 DBMS，速度非常慢，我认为这是真正的问题。Java 的插入速度与 MS Access 不兼容。MS Access 被大量数据淹没，因为我一次插入超过 200000 条记录，由于这种压倒性，MS Access 无法处理如此大量的数据，并且引发了 ACCESS VIOLATION。我用 MySQl 替换了 MS Access，现在它看起来很好。谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-05T17:13:50.040

我有同样的错误，从抓取程序中保存数据。这是完全随机的，但似乎发生的频率越来越高。

经过一天的各种尝试，我终于尝试进入 Access 并做一个压缩和修复数据库。这似乎成功了。所以这也可能是其他人的解决方案。

# asp.net - Asp.Net Web 表单中的 SignalIR 和 KnockoutJS

> ID：11133642
> 
> 赞同：2
> 
> 时间：2012-06-21T07:40:54.117
> 
> 标签：asp.net, webforms, knockout.js, signalr

我在 MVC 平台上看到了 SignalIR 和 KnockoutJS 示例，但在 WebForm 上没有。请建议我，我们可以在 WebForm 上使用吗？任何文章链接都将是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:48:55.643

我知道这正好晚了一个月，但这是一个简单的例子[这是我通过探索[MVC 示例构建的一个简单的例子](http://raselbappi.blogspot.com/2012/03/aspnet-mvc-4-real-time-communication.html)]

假设你有一个名为 MyPage 的页面

在 .aspx 文件中写入以下内容：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="MyPage.aspx.cs" Inherits="MyPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.signalR-0.5.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" src='<%= ResolveClientUrl("~/signalr/hubs") %>'></script>

    <script type="text/javascript">
        $(function () {
            var conChat = $.connection.chat;
            conChat.addMessage = function (message) {
                $('#disMess').append('<li>' + message + '</li>');
            };
            $("#btnSend").click(function () {
                conChat.send($('#txtMess').val());
                $('#txtMess').val('');
            });
            $.connection.hub.start();
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <ul id="disMess"></ul>
        <input id="txtMess" />
        <!-- see onclick also -->
        <input id="btnSend" type="button" value="Send" />
    </div>
    </form>
</body>
</html> 
```

实际上 .cs 文件中没有任何内容[或背后的代码]

您需要添加 ASP.NET 文件夹“Add_Code”并使用以下代码在其中放置一个类“Chat.cs”：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SignalR.Hubs;

namespace NewSignalRChat
{
    public class Chat : Hub
    {
        public void Send(string msg)
        {
            Clients.addMessage(msg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:21:38.447

SignalR 托管（服务器端）作为 AspNetHandler 实现，因此对 mvc 没有任何依赖。SignalR 客户端和 KnockoutJs 是 javascript 组件，不依赖于 mvc 或 Web 表单。只需对 web 表单使用[web 方法](http://dotnetslackers.com/columns/ajax/ASPNETAjaxWebService.aspx)，而不是 mvc 的操作方法。

# sql - 在 SQL Reporting Services 中对齐文本

> ID：11133644
> 
> 赞同：12
> 
> 时间：2012-06-21T07:41:04.527
> 
> 标签：sql, reporting-services, report

在 SQL Reporting Services 中是否有完全对齐文本的方法？

我一直在四处寻找，似乎 Reporting Services 仍然不支持该功能，但是有什么解决方法吗？

我知道以前有人问过这个问题，但与此同时可能已经取得了进展。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:42:58.807

**这是不可能的**，至少在 SSRS 2008 及以下版本中是不可能的。对齐文本的唯一选项是左、中和右。

我能想到的唯一解决方法是在文本框中启用 HTML 标签，但是 Justify 对齐的样式被忽略了。所以真的没有任何合适的解决方法AFAIK，没有使用*带有合理文本的图片*（〜颤抖！〜）。

您应该密切关注[相应的 MS 反馈项目](https://feedback.azure.com/forums/908035-sql-server/suggestions/32894215-full-justification-in-reporting-services-2008-need)，并可能对其进行投票。它曾经有 527 票，但在从 MS Connect 迁移到这个新的反馈站点期间被重置为 0。[我通过这个 social.msdn 线程](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/ecf375d1-7991-4e07-9180-ddbcc2bffd55)找到了错误报告，该线程已经持续了很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T15:42:10.210

'SSRS 中带有对齐文本的图片'：您可以创建一个 AdvRichTextBox 控件（参见代码[http://geekswithblogs.net/pvidler/archive/2003/10/14/182.aspx](http://geekswithblogs.net/pvidler/archive/2003/10/14/182.aspx)）并按照以下步骤在 ssrs 中使用它：[http ://binaryworld.net/Main/CodeDetail.aspx?CodeId=4049](http://binaryworld.net/Main/CodeDetail.aspx?CodeId=4049)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T17:58:43.673

这是一个可能的解决方法：[全文只是](http://knackbi.blogspot.com/)

它利用 RS 实用程序和 OLE 自动化来完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T20:16:12.897

在 Standard 中，SSRS 不支持 justify。有可能解决：

1.  使用第三方控件执行此操作：（我无法让其中一个工作。）
2.  通过 COM 调用组件，如 Word。（这是一个安全问题，但可能。）
3.  用 HTML 格式化该框并在单词之间放置小空格。这可以在存储过程中完成。

解决方案3很长，无法详细描述。这就是为什么我将我的解决方案免费下载到我的网页上的原因。

我的解决方案的优点是无需安装。

这是我的解决方案的链接：[http ://www.rupert-spaeth.de/justify/](http://www.rupert-spaeth.de/justify/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-20T22:46:18.823

如果您使用`<p>`尝试：

```
$("[style*='padding-bottom:10pt']").css("text-align", "justify"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-07T21:40:21.167

如果您打开 .rdl 代码文件（即 xml），以下将起作用。

你需要一个段落标签，如果它不存在的话。

这会将数字格式化为使用逗号（美国风格），小数点后有两个点。

然后通过 Right 标签右对齐 {我一直在寻找 justify 标签，但它是 TextAlign}

```
 <Paragraph>
            <TextRuns>
              <TextRun>
                <Value>=Format( Sum(Fields!ourField.Value, "DataSet2") , "N2") </Value>
                <Style>
                  <FontFamily />
                  <Color>White</Color>
                </Style>
              </TextRun>
            </TextRuns>
            <Style>
              <TextAlign>Right</TextAlign>
            </Style>
          </Paragraph> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-20T11:34:26.613

实际上，如果您将值作为 HTML 传递并使用某些东西将文本格式化为 justify'ed html 文本，则实际上可以在 SSRS 报告中对齐文本，在我的情况下，我使用 .NET C# 将传递的字符串格式化为对齐的 html 文本。

但在此之前，我们需要配置我们的 SSRS 报告以接受 HTML，为此我们需要添加一个文本框并创建一个占位符。

要添加占位符，请单击文本框，直到它允许您向其中写入文本，然后右键单击并选择“创建占位符...”

[![创建占位符](../Images/e1db48a25964c9a1b2e76ca0e3503d6f.png)](https://i.stack.imgur.com/NDqxf.png)

创建占位符后，系统会提示您输入占位符的属性，您只需指定值和标记类型

[![占位符属性](../Images/5eb7f705f9e2b4180ad7c63edb33cf82.png)](https://i.stack.imgur.com/LZIw6.png)

确保将标记类型选择为 HTML，并为值指定将具有对齐的 html 文本的变量，在我们的例子中，我们将其称为transformedHtml。

现在我们需要创建一个函数，将我们的字符串转换为对齐的 HTML 文本

```
 /// <summary>
    /// 
    /// </summary>
    /// <param name="text">The text that we want to justify</param>
    /// <param name="width">Justified text width in pixels</param>
    /// <param name="useHtmlTagsForNewLines">if true returns the output as justified html if false returns the ouput as justified string</param>
    /// <returns>Justified string</returns>
    public string GetText(string text, int width, bool useHtmlTagsForNewLines = false)
    {
        var palabras = text.Split(' ');
        var sb1 = new StringBuilder();
        var sb2 = new StringBuilder();
        var length = palabras.Length;
        var resultado = new List<string>();

        var graphics = Graphics.FromImage(new Bitmap(1, 1));
        var font = new Font("Times New Roman", 11);

        for (var i = 0; i < length; i++)
        {
            sb1.AppendFormat("{0} ", palabras[i]);
            if (graphics.MeasureString(sb1.ToString(), font).Width > width)
            {
                resultado.Add(sb2.ToString());
                sb1 = new StringBuilder();
                sb2 = new StringBuilder();
                i--;
            }
            else
            {
                sb2.AppendFormat("{0} ", palabras[i]);
            }
        }
        resultado.Add(sb2.ToString());

        var resultado2 = new List<string>();
        string temp;

        int index1, index2, salto;
        string target;
        var limite = resultado.Count;
        foreach (var item in resultado)
        {
            target = " ";
            temp = item.Trim();
            index1 = 0; index2 = 0; salto = 2;

            if (limite <= 1)
            {
                resultado2.Add(temp);
                break;
            }
            while (graphics.MeasureString(temp, font).Width <= width)
            {
                if (temp.IndexOf(target, index2) < 0)
                {
                    index1 = 0; index2 = 0;
                    target = target + " ";
                    salto++;
                }
                index1 = temp.IndexOf(target, index2);
                temp = temp.Insert(temp.IndexOf(target, index2), " ");
                index2 = index1 + salto;

            }
            limite--;
            resultado2.Add(temp);
        }
        var res = string.Join(useHtmlTagsForNewLines ? "<br> " + Environment.NewLine : "\n", resultado2);

        if (useHtmlTagsForNewLines)
            res = $"<div>{res.Replace(" ", "&nbsp;").Replace("<br>&nbsp;", "<br>")}</div>";

        return res;
    } 
```

通过使用此函数，我们可以将任何字符串转换为两端对齐的文本，并且我们可以选择输出是 HTMl 还是简单字符串

然后我们可以像这样调用这个方法

```
 string text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";
        string transformedHtml = GetText(text, 350, true); 
```

我们得到如下输出：

在 C# 中

[![点网视图](../Images/fe8b2f6c3ddde1341e7b2898d1ca4b4d.png)](https://i.stack.imgur.com/faVqY.png)

在 SSRS

[![SSRS 视图](../Images/55e5d563af22b1ab274f320653691fd7.png)](https://i.stack.imgur.com/OjoOy.png)

现在这个例子主要展示了如果你将值从 C# 代码传递到 ssrs 报告，如何获得对齐的文本，但是如果你在存储过程中创建相同的函数，以相同的方式格式化任何文本，你可以实现这一点。希望这可以帮助某人。

# android - ImageView 内存不足异常

> ID：11133645
> 
> 赞同：2
> 
> 时间：2012-06-21T07:41:08.880
> 
> 标签：android, imageview, android-imageview

在 ImageView 中插入图像时出现问题。我尝试了几种方法来解决它，但仍然失败，最新版本如下。图像尺寸为 3000x3000。

代码：

```
ImageView iv = (ImageView) findViewById(R.id.imageView);  
Bitmap originalBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.prueba_plano_2).copy(Bitmap.Config.ARGB_8888, true);
iv.setImageBitmap(originalBitmap); 
```

XML:

```
 <FrameLayout
        android:id="@+id/root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/buttonlayer" >

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:contentDescription="@string/desc"
            android:scaleType="matrix" />
</FrameLayout> 
```

日志猫：

```
06-21 09:32:06.721: E/AndroidRuntime(25709): FATAL EXCEPTION: main
06-21 09:32:06.721: E/AndroidRuntime(25709): java.lang.OutOfMemoryError
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.Bitmap.nativeCreate(Native Method)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
06-21 09:32:06.721: E/AndroidRuntime(25709):    at 

............. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:52:44.450

位图的最大尺寸为 2048x2048，如果您的位图大于此大小，您应该对其进行缩放。
我正在使用这种方法来缩放位图：

```
public static Bitmap scaleBitmap(Bitmap bitmapToScale, float newWidth, float newHeight) {   
    if(bitmapToScale == null)
        return null;
    //get the original width and height
    int width = bitmapToScale.getWidth();
    int height = bitmapToScale.getHeight();
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();

    // resize the bit map
    matrix.postScale(newWidth / width, newHeight / height);

    // recreate the new Bitmap and set it back
    return Bitmap.createBitmap(bitmapToScale, 0, 0, bitmapToScale.getWidth(), bitmapToScale.getHeight(), matrix, true);
} 
```

您还可以使用以下方法检查内存状态：

```
ActivityManager actMgr = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
ActivityManager.MemoryInfo minfo = new ActivityManager.MemoryInfo();
actMgr.getMemoryInfo(minfo);
if(minfo.lowMemory) { //do something} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:12:50.630

您也可以在不加载完整图像的情况下加载图像尺寸。

```
android.graphics.BitmapFactory.Options options = new
    android.graphics.BitmapFactory.Options();

options.inJustDecodeBounds = true;

android.graphics.BitmapFactory.decodeFile(filepath, options); 
```

现在您可以通过以下方式获得图像尺寸：

```
options.outHeight
options.outWidth 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:04:26.040

尝试阅读官方的 Android 开发者文档：在此[链接中](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)**有效地加载大型位图**，鉴于您正在使用有限的内存（手机），理想情况下您只需在内存中加载较低分辨率的版本。按照链接中发布的建议，您将避免 OM 问题

# jquery - 将搜索查询附加到 iframe src URL

> ID：11133652
> 
> 赞同：2
> 
> 时间：2012-06-21T07:41:49.153
> 
> 标签：jquery, url, search, iframe, append

我的主页上有一个表格供访问者搜索他们的邮政编码。单击提交按钮时，主页会重定向到另一个具有 iframe 的内部页面。我希望将搜索查询字符串附加到 iframe src URL。

例如，搜索邮政编码 3000 会将“?postcode=3000”附加到 iframe src URL

```
<iframe src="https://www.externalwebsite.com?postcode=3000" class="auto-height" scrolling="no" frameborder="0"></iframe> 
```

这是我在主页上用于搜索的代码：

```
<input type="text" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value='Submit Postcode...';" value="Submit Postcode..." id="postcodesearchQuery" maxlength="4"/>
<input name="searchbutton" value="" type="button" onClick="location.href='postcode.aspx?postcode=' + $('#postcodesearchQuery').attr('value')" id="postcodesearchbutton" /> 
```

这当然会将搜索结果添加到“postcode.aspx”页面的 URL 中。例如`www.mywebsite.com/postcode.aspx?postcode=3000`

是否可以使用 jQuery append 将其添加`?postcode=' + $('#postcodesearchQuery').attr('value')`到 iframe URL src？

*编辑*

如果我将以下内容添加到我的 head 标签中，它将不起作用：

```
<script type="text/javascript">    
    $('.myiframe' + iFrameID).attr('src', url);
    url += '?postcode=' + postcodeValue;

    function setIFrameSrc(iFrameID, postcodeValue)
{
    var myFrame = $('.myiframe' + iFrameID);
    var url = $(myFrame).attr('src') + '?postcode=' + postcodeValue;
    $(myFrame).attr('src', url);

}
</script> 
```

iframe 代码：

```
 <iframe src="www.externalwebsite.com" class="myiframe" width="100%" height="750px" scrolling="no" frameborder="0"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:59:16.190

您可以使用 jQuery 设置它，使用 attr 函数：

```
$('#' + iFrameID).attr('src', url); 
```

当然你必须先设置 url，像这样：

```
url += '?postcode=' + postcodeValue; 
```

将这些放入一个函数中，我们得到：

```
function setIFrameSrc(iFrameID, postcodeValue)
{
    var myFrame = $('#' + iFrameID);
    var url = $(myFrame).attr('src') + '?postcode=' + postcodeValue;
    $(myFrame).attr('src', url);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:46:34.743

你可能不需要 jquery，像这样：

```
window.frames["postcodesearchQuery"].href += ?postcode=' + ... 
```

# opencv - JavaCV 拼接

> ID：11133660
> 
> 赞同：1
> 
> 时间：2012-06-21T07:42:38.273
> 
> 标签：opencv, javacv, image-stitching

我正在尝试通过在 Java 中使用 JavaCV 0.1 和 OpenCV 2.4.0 来拼接多个图像，我使用此代码来拼接图像：

```
stitcher = Stitcher.createDefault(false);

MatVector images = new MatVector(imageN.size());
for(...){
   CvArr image = cvLoadImage(imageN);
   images.put(index,image);
}

MatVector result = new MatVector(1);
int status = stitcher.stitch(images,result);

if( status == stitcher.OK )
{
   cvSaveImage(result.getIplImage(0));
} 
```

注意 1：此示例中加载的图像是用于拼接的有效图像。

注意 2：代码的 C++ 版本在当前配置上运行没有问题

在stitcher.stitch 方法中，opencv 会抛出一个断言异常，例如“k == MAT”。我应该如何解决这个问题？MatVector 的使用在这个示例代码中是否正确？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:49:19.963

我找到了，这是一个与 JavaCv 相关的错误。

实际上 JavaCv 是无罪的。OpenCV 拼接器 API 使用 cv::OutputArray 来返回拼接图像，但此方法在执行时将 cv::OutputArray 转换为 cv::Mat。JavaCV 仅通过使用参数接口来移植 OpenCV 方法，因此它将参数转换为 std::vector，这导致断言失败。

需要将 std::vector 转换为 Mat 才能使其工作。我不知道这种转换存在任何其他方式，但否则只能由 lib 的作者修复。

据说 c++ 版本正在工作，但实际上，当 pano 参数以 cv::Mat 给出时，它正在工作，当输入 std::vector 时，它再次给出相同的失败断言。

# javascript - 在活动选项卡上启用链接的 Javascript 函数

> ID：11133662
> 
> 赞同：0
> 
> 时间：2012-06-21T07:42:46.010
> 
> 标签：javascript, tabs, onclick

我有 3 个标签，由 js 创建。活动选项卡具有名为“活动”的类，每次单击选项卡时都会更改

```
<div class='tab'>
    <ul class='tabs'>
    <li class="active"><a href='http://link1.com#t1'>First</a></li>
    <li><a href='http://link2.com#t2'>Second</a></li>
    <li><a href='http://link3.com#t3'>Third</a></li>    
    </ul>
<div>
    <h2>First tab!</h2>
</div>
<div>
    <h2>Second tab!</h2>
</div>
<div>
    <h2>Thrid tab1</h2> 
    </div>
</div> 
```

默认情况下，链接返回“假”。我需要创建一些 js 函数，在活动选项卡上启用链接 (onclick="return true";)，并在我切换到另一个选项卡 (li) 时禁用它。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:48:21.750

我可以建议您动态检查父元素（在本例中为`li`元素）是否具有类`active`并返回负值

```
$('#tabs a').on('click', function(){
    // if parent has class active returns false
    return !$(this).parent().hasClass('active'); 
}); 
```

# sql - 无法将计算列设置为非 Null

> ID：11133665
> 
> 赞同：6
> 
> 时间：2012-06-21T07:43:03.093
> 
> 标签：sql, sql-server, database, rdbms

我在将计算列设置为`not null`.

我想要实现的是`C001`,`C002...`等，同时将其设置为`not null`.

我在一个论坛上读到，这可以通过使用 NULL 值的默认值 0 来实现。
例如，`ISNULL(Price + Taxes, 0)`

我试图应用到这个公式：

```
('C'+right('000'+CONVERT([varchar](3),[ID],(0)),(3))) 
```

但它似乎没有用。谁能告诉我我错过了什么？

```
ALTER CreditCard accountNo AS ISNULL('C'+right('000'+CONVERT([varchar](3),[idCreditCard],(0)),(3)),0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:20:45.707

我终于找到了解决我问题的方法！

正确的查询应该是：

```
ALTER TABLE CreditCard ADD accountNo AS ISNULL('C'+right('000'+CONVERT([varchar](3),[idCreditCard],(0)),(3)),0) 
```

谢谢你们的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-12T08:32:59.747

如果这与 SQL Server 相关，您可能会从 MSDN 对此感兴趣。

*'只有在还指定了 PERSISTED 时，才能为计算列指定 NOT NULL。* [http://msdn.microsoft.com/en-us/library/ms190273.aspx](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

...但是在尝试从答案中对问题进行逆向工程之后，我认为 'keenlearner 只想确保在没有约束的情况下列中永远没有空值。

# iphone - 可达性方法（startnotifier）未调用

> ID：11133668
> 
> 赞同：0
> 
> 时间：2012-06-21T07:43:07.337
> 
> 标签：iphone

这是我的参考代码。我在 startnotifier 方法中设置了断点，但它没有被调用。

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];

 internetReach = [[Reachability reachabilityForInternetConnection] retain];

 [internetReach startNotifier]; 
```

我在 appdelegate.m (didFinishLaunchingWithOptions) 中编写了这部分代码。

我已经在 appdelegate.h 中声明了 var，如下所示....

```
 @interface AppDelegate : UIResponder < UIApplicationDelegate >

 {

   Reachability *internetReach;

    Reachability *wifiReach;

    Reachability *hostReach;

 } 
```

为什么没有调用 startnotifier 中的断点，因此如果我更改网络，nsnotification 不会调用观察者函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:59:23.657

```
+(BOOL)ConnectedToNetWork
{

Reachability *HostReach = [Reachability reachabilityForInternetConnection];
NetworkStatus internetStatus = [HostReach currentReachabilityStatus];   
bool result = false;
if (internetStatus == ReachableViaWiFi)
    result = true;  
else if(internetStatus==ReachableViaWWAN)
    result = true;  

return result;
 } 
```

在您想检查连接时使用此方法

# javascript - 如何在没有周末的情况下添加天数以从当前日期获取下一个日期

> ID：11133669
> 
> 赞同：2
> 
> 时间：2012-06-21T07:43:14.683
> 
> 标签：javascript, jquery

我想补充一些没有。获得未来日期的天数。周末不应该包括在其中。我怎样才能得到这个？

var startdate = "2012 年 6 月 8 日"; 不。要添加的天数 = 10；结束日期应为“2012 年 6 月 22 日”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:46:08.803

试试这个 ：

```
 var startDate = "8-June-2012";
    startDate = new Date(startDate.replace(/-/g, "/"));
    var endDate = "", noOfDaysToAdd = 10, count = 0;
    while(count < noOfDaysToAdd){
        endDate = new Date(startDate.setDate(startDate.getDate() + 1));
        if(endDate.getDay() != 0 && endDate.getDay() != 6){
           //Date.getDay() gives weekday starting from 0(Sunday) to 6(Saturday)
           count++;
        }
    } 
```

这是[演示](http://jsfiddle.net/HaJpQ/40/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:06:46.657

```
function calculateWorkingDayNumbers(startDate, offset)
{
    var startDay = startDate.getDay();
    if ((startDay % 7) === 1)
    {
        return ((offset - (offset % 7)) / 7) + ((offset % 7 === 1) ? (1) : (0));
    }
    else if (offset < 7)
    {
        if ((startDay === 6))
            return 1 + ((offset > 0) ? (1) : (0));
        else if (startDay === 0)
            return 1 + ((offset === 6) ? (1) : (0));
    }
    else
    {
        return calculateWorkingDayNumbers(startDate, (((startDay % 7) + 1) % 7)) + calculateWorkingDayNumbers(startDate.setDate(startDate.getDate() + (((startDay % 7) + 1) % 7)), offset - (((startDay % 7) + 1) % 7));
    }
} 
```

这个（未经测试的）代码非常快。您也可以通过处理假期来改进您的解决方案。

# html - 为什么会出现这种 z-index 行为？

> ID：11133670
> 
> 赞同：0
> 
> 时间：2012-06-21T07:43:15.200
> 
> 标签：html, css, z-index

这是我的[代码](http://jsfiddle.net/tRr34/4/)：

```
<div id="first">
    <div id="first-internal">&nbsp;</div>
</div>

<div id="fixed">&nbsp;</div>

#first
{
    position:relative;
}

#first-internal
{
    position:relative;
    z-index:100;
    background-color:blue;
    width:400px;
    height:400px;
}

#fixed
{
    position:absolute;
    top:0;
    left:0;
    width:200px;
    height:200px;
    background-color:red;
    z-index:41;
} 
```

为什么我看不到`#fixed`？它在 之后`#first`，所以它必须有更多的“z-index 点”然后`#first`。必须显示`#fixed`（即使是`#first`have的子级）的内容。`z-index:9000`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:49:40.033

z-index 较大的块应始终位于顶部。如果您阅读[规范](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)，您会看到放置 z-index 将创建一个新的堆栈上下文，这意味着它将基本上在具有较小 z-index 的其他层之上创建一个层，无论 HTML 中的顺序或css。

因此，在您的情况下，#fixed 的 z-index 低于 #first-internal，因此 #first-internal 位于顶部。就这样 ;）

顺便说一句，这个堆栈上下文在 IE 中的实现很糟糕，它的行为会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:19:34.660

这都是关于在[css 视觉格式化模型文档](http://www.w3.org/TR/CSS2/visuren.html#z-index)中链接到的[堆叠上下文](http://www.w3.org/TR/CSS2/zindex.html)。n 的上下文：`body`

*   `#first`（无 z 索引）~~有资格作为堆栈级别为 0 的定位后代~~此元素*不会*启动新的堆叠上下文（详见下文）

*   `#fixed`(z-index > 0) 具有正堆栈级别并呈现更高

~~因此，无论您将后代的 z-index 设置`#first`多高，它们仍将保留在相对于`#first`~~

~~如链接文档中所述，这些行为分别与第 6 层和第 7 层的行为相同。~~

## 更新：

我一直发现[MDN 文档](https://developer.mozilla.org/en/CSS/Understanding_z-index/The_stacking_context)更容易理解。基本上`#first` *不会启动*新的堆叠上下文（它是相对定位的，但它有默认的`z-index:auto`）。

这意味着`#first-internal`和`#fixed`渲染在相同的堆叠上下文中，具有较高 z-index 的渲染在顶部！这是第 6 层行为，如链接的原始规范中所述。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T08:02:50.900

当您创建一个元素时，`position:absolute`它不会占用文档中的任何空间。相反，它表现得好像它的浮动。并且它的 HTML/CSS 的基本性质是`position:absolute`对象`z-index`小于`position:relative`.

这是因为`position:relative`对象有它自己的存在，它不会像`absolute`元素一样浮动。

我在下面发布了几个链接，您可以对这两个属性进行简短的研究：

*   [http://webdesign.about.com/od/advancedcss/a/aa061307.htm](http://webdesign.about.com/od/advancedcss/a/aa061307.htm)
*   [http://www.onextrapixel.com/2009/05/29/an-indepth-coverage-on-css-layers-z-index-relative-and-absolute-positioning/](http://www.onextrapixel.com/2009/05/29/an-indepth-coverage-on-css-layers-z-index-relative-and-absolute-positioning/)

希望这可以澄清您的查询。

# java - 无法获取 href 标签的实际内容（.jpg 图像）

> ID：11133676
> 
> 赞同：0
> 
> 时间：2012-06-21T07:43:55.747
> 
> 标签：java, html, web-scraping, jsoup

我有以下代码：

```
String website = "http://www.somewebsite.com/";

Document doc = Jsoup.connect(website).get();

Elements aElements = doc.select("a");

for (Element element : aElements)
{
    System.out.println(element.attr("href"));
} 
```

当我看到 href 内容的输出时，它如下所示：

？

当我使用浏览器 (Firefox) 访问网页时，href 内容如下所示：

.../../../picture1.jpg
.../../../picture2.jpg .../../../
picture3.jpg .../../../
picture4 .jpg

我尝试使用以下代码将“Referer”变量更改为网站名称：

```
Document doc = Jsoup.connect(website).header("Referer", "http://www.somewebsite.com/").get(); 
```

但这不起作用..

网站如何以某种方式“隐藏”我的 Jsoup“下载器”中的 href 内容，但在我实际使用我的真实浏览器浏览时显示它？

我怎样才能绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:04:16.483

通过设置 userAgent 方法的参数解决了这个问题：

```
Document doc2 = Jsoup.connect(website).userAgent("Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)").get(); 
```

# php - php会话检查您是否已经重定向用户

> ID：11133677
> 
> 赞同：0
> 
> 时间：2012-06-21T07:44:01.217
> 
> 标签：php, session, redirect

我没有数据库。

我的网站将使用 php 类 ( `mobiledetect.php`) 来查找用户代理和浏览器类型，从而解析某个 .css 文件。如果用户更喜欢查看完整的 css 站点，我如何创建一个 php 会话以免再次重定向用户。那么，只问第一个php类一次？

我是 php 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:52:12.517

基本上，我看到您有两种选择——一种是仅在本地存储信息（在 PHP 会话中），另一种是将用户首选项存储在 cookie 中。

如果您实际上可以向我们展示您的`mobiledetect.php`代码，那么帮助您使用实际代码可能会更容易。

# internet-explorer-7 - 在短时间内为 IE6-7 开发应用程序：哪些工具？

> ID：11133678
> 
> 赞同：0
> 
> 时间：2012-06-21T07:44:04.433
> 
> 标签：internet-explorer-7, internet-explorer-6, local

我的任务是开发一个供我们公司内部使用的应用程序，最终用户是呼叫中心的操作员和他们的主管。

因此将有两种类型的用户：操作员和主管。

操作员视图将是完全被动的：能够查看他们的每月目标（接听电话、接听电话等）以及他们的“单元”（操作员+主管组）和其他“单元”的目标，仅此而已。

然而，主管可以主动：他们需要能够为下属设定每月目标并查看它们。

应用程序需要存在于浏览器中，而那个浏览器是……*叹息*，要么是 IE6 要么是 IE7。所以我的问题是，我应该使用像backbone.js 这样的客户端，还是像Code Igniter 这样的服务器端？

我需要能够在短时间内开发它并根据要求添加功能。

任何意见是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:15:30.113

首先，IE6 已经很老了。它仍然受支持，但支持将很快结束（我认为大约一年），因此您的公司*需要*制定升级计划。IE7 的运行时间更长，但在某些时候也会失去支持。您的公司*必须*为升级过程制定计划。而且您需要确保您今天编写的任何内容都将在升级的浏览器版本到来时继续工作。

好的，除此之外，今天您需要支持这些浏览器。

我要给出的第一个建议是使用 jQuery 来满足您的所有 Javascript 需求。它专门针对与 IE6 及更高版本兼容，它隐藏了开发人员支持跨浏览器和旧浏览器的许多复杂性，但也适用于较新的浏览器。

IE6/7 在它们的 Javascript 支持中确实有许多严重的错误和遗漏，但这些通常可以解决。使用 jQuery 意味着您可以忘记其中的大部分。

总的来说，我建议不要使用像 Backbone 这样的客户端框架。坚持使用服务器驱动的简单 HTML 页面。也许有点使用 jQuery 的 ajax，但仅此而已。IE6 和 IE7 是非常非常慢的浏览器，所以你让它们做的工作越少，它们就会越快乐。在前端放置过多的 Javascript，您可能会得到一个太慢而无法使用的系统。此外，许多现代 JS 库根本不支持 IE6。我不确定 Backbone，但即使它现在可以工作，你也不能确定以后的版本会继续支持它。（即使使用 jQuery，一些开发人员也开始推动放弃 IE6。我认为这不会发生）

确保为所有页面指定一个有效值`<!DOCTYPE>`。没有它，IE 将进入怪癖模式。这将使您以后很难将您的网站升级到更新的浏览器。有许多有效的文档类型，但你使用哪一个并不重要，只要它是有效的。因此，我建议使用 HTML5 文档类型，仅仅是因为它有效且简短：`<!DOCTYPE html>`-- 仅此而已。

如果您习惯于使用现代浏览器，那么 CSS 是您真正感到痛苦的地方。尤其是 IE6 有糟糕的 CSS 支持。对于 IE6/7 CSS 兼容性，我建议使用[Quirksmode.org 兼容性图表](http://quirksmode.org/compatibility.html)来了解在这些浏览器中哪些功能有效，哪些无效。

最后，确保您阅读了众所周知的 IE6 错误。它们有很多，它们经常在完全有效的代码上导致奇怪而奇妙的渲染错误。提前了解它们将帮助您避免它们，并在您（不可避免地）撞到它们时帮助您识别它们。

希望有帮助。

哦，祝你好运——听起来你需要它！;-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T12:17:15.963

只要您不使用诸如 HTML5 Javascript 函数之类的东西，就可以为 Internet Explorer 6 开发网站或 Web 应用程序。

至于现场部分，也许你可以使用 AJAX 长轮询或类似的东西。示例：[http ://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

希望这可以帮助！

# java-me - 如何在 lwit 中实现日期选择器？

> ID：11133683
> 
> 赞同：2
> 
> 时间：2012-06-21T07:44:31.903
> 
> 标签：java-me, datepicker, lwuit, midp-2.0, cldc

我正在使用 j2me 和 lwuit 开发一个移动应用程序。

j2me 中有一个 lcdui DateField（充当日期选择器）。像这样，lwuit 中有任何组件或项目。

如何在 lwuit 中实现日期选择器（类似于 lcdui DateField）。

日历（在 lwit 中）对象不是用户友好的。如果手机屏幕尺寸小，则无法正确显示。在普通的 j2me (lcdui) 中，日期字段的外观非常好。我想在 lwuit 中创建一个类似的组件/项目（在 j2me 中使用 lwuit）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:02:41.710

您可以`lcdui` `DateField`在`lwuit`. 我这样做是这样的：

```
import java.util.Calendar;
import java.util.Date;
import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.DateField;
import javax.microedition.lcdui.Displayable;
import javax.microedition.lcdui.Form;

import com.sun.lwuit.Button;
import com.sun.lwuit.Display;
import com.sun.lwuit.events.ActionEvent;
import com.sun.lwuit.events.ActionListener;
import com.sun.lwuit.plaf.UIManager;

public class DatePicker extends Button implements ActionListener {

  private static final String OK = "ok";
  private static final String CANCEL = "cancel";

  private Date date;

  public DatePicker() {
    setUIID("TextArea");
    addActionListener(this);
  }

  public Date getDate() {
    return date;
  }

  public void actionPerformed(ActionEvent evt) {
    final Form dateForm = new Form();
    final DateField dateField = new DateField(null, DateField.DATE);
    if (date != null) {
      dateField.setDate(date);
    }
    dateForm.append(dateField);
    final javax.microedition.lcdui.Command acceptCommand = new javax.microedition.lcdui.Command(UIManager.getInstance().localize(OK, OK),
    javax.microedition.lcdui.Command.OK, 0);
    final javax.microedition.lcdui.Command cancelCommand = new javax.microedition.lcdui.Command(UIManager.getInstance().localize(CANCEL, CANCEL), javax.microedition.lcdui.Command.CANCEL, 0);
    dateForm.addCommand(acceptCommand);
    dateForm.addCommand(cancelCommand);
    CommandListener commandListener = new CommandListener() {
      public void commandAction(javax.microedition.lcdui.Command command, Displayable displayable) { 
        if (command == acceptCommand && dateField.getDate() != null) {
          DatePicker.this.date = dateField.getDate();
          DatePicker.this.setText(DatePicker.toString(DatePicker.this.date));
        }
        Display.init(Application.getInstance().midlet); // You have to save your midlet
        Application.getInstance().mainForm.show();      // and the last lwuit Form
      }
    };
    dateForm.setCommandListener(commandListener);
    javax.microedition.lcdui.Display.getDisplay(Application.getInstance().midlet).setCurrent(dateForm);  // Application.getInstance().midlet - your j2me application midlet

  }      
} 
```

所以现在你可以像 一样使用它`lwuit` `Component`，但它会在顶部`actionPerformed`打开`lcdui`原生。`Form``DateField`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:59:58.593

我开发了一个日历扩展组件，它在 LWUIT 中运行良好，我使用的代码如下

```
public class Calendar extends Container {

    private ComboBox month;
    private ComboBox year;
    private MonthView mv;
    private static final String[] MONTHS = new String[]{"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"};
    private static final String[] DAYS = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
    private static final String[] LABELS = {"Su", "M", "Tu", "W", "Th", "F", "Sa"};
    static final long MINUTE = 1000 * 60;
    static final long HOUR = MINUTE * 60;
    static final long DAY = HOUR * 24;
    static final long WEEK = DAY * 7;
    private EventDispatcher dispatcher = new EventDispatcher();
    private EventDispatcher dataChangeListeners = new EventDispatcher();
    private long[] dates = new long[42];
    private boolean changesSelectedDateEnabled = true;
    private TimeZone tmz;

    private static ComboListCellRenderer comboListCellRenderer = new ComboListCellRenderer();;

    private int[] bgColorArray = new int[]{0x2E9AFE, 0x39FEB6, 0x39FEB6};

    /**
     * Creates a new instance of Calendar set to the given date based on time
     * since epoch (the java.util.Date convention)
     *
     * @param time time since epoch
     */
    public Calendar(int[] bgColorArray, ListCellRenderer listCellRenderer, long time) {
        this(bgColorArray, listCellRenderer, time, java.util.TimeZone.getDefault());
    }

    /**
     * Constructs a calendar with the current date and time
     */
    public Calendar(int[] bgColorArray, ListCellRenderer listCellRenderer) {
        this(bgColorArray, listCellRenderer, System.currentTimeMillis());
    }

    /**
     * Constructs a calendar with the current date and time
     */
    public Calendar() {

        this(null, comboListCellRenderer, System.currentTimeMillis());
    }

    /**
     * Creates a new instance of Calendar set to the given date based on time
     * since epoch (the java.util.Date convention)
     *
     * @param time time since epoch
     * @param tmz a reference timezone
     */
    public Calendar(int[] bgColorArray, ListCellRenderer listCellRenderer, long time, TimeZone tmz) {
        super(new BorderLayout());
        if(bgColorArray != null)
            this.bgColorArray = bgColorArray;
        this.tmz = tmz;
        setUIID("Calendar");
        Container upper = new Container(new FlowLayout(Component.CENTER));
        month = new ComboBox();
        year = new ComboBox();
        mv = new MonthView(time);

        Vector months = new Vector();
        for (int i = 0; i < MONTHS.length; i++) {
            months.addElement("" + getLocalizedMonth(i));
        }

        ListModel monthsModel = new DefaultListModel(months);
        int selected = months.indexOf(getLocalizedMonth(mv.getMonth()));
        month.setModel(monthsModel);
        month.setSelectedIndex(selected);
        month.addActionListener(mv);

        if(listCellRenderer != null){
             month.setListCellRenderer(listCellRenderer);
             year.setListCellRenderer(listCellRenderer);
        }

        month.getSelectedStyle().setBgColor(bgColorArray[1]);
        month.getUnselectedStyle().setBgColor(bgColorArray[0]);
        month.getPressedStyle().setBgColor(bgColorArray[2]);

        year.getSelectedStyle().setBgColor(bgColorArray[1]);
        year.getUnselectedStyle().setBgColor(bgColorArray[0]);
        year.getPressedStyle().setBgColor(bgColorArray[2]);

      /*  month.getSelectedStyle().setBgColor(0xff00000);
        year.getSelectedStyle().setBgColor(0xff00000);
        ComboListCellRenderer comboListCellRenderer = new ComboListCellRenderer();

        */

        java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
        cal.setTime(new java.util.Date(time));
        month.getStyle().setBgTransparency(0);
        int y = cal.get(java.util.Calendar.YEAR);
        Vector years = new Vector();
        for (int i = 2100; i > 1900; i--) {
            years.addElement("" + i);
        }
        ListModel yearModel = new DefaultListModel(years);
        selected = years.indexOf("" + y);
        year.setModel(yearModel);
        year.setSelectedIndex(selected);
        year.getStyle().setBgTransparency(0);
        year.addActionListener(mv);
        Container cnt = new Container(new BoxLayout(BoxLayout.X_AXIS));
        cnt.setRTL(false);

        Container dateCnt = new Container(new BoxLayout(BoxLayout.X_AXIS));
        dateCnt.setUIID("CalendarDate");
        dateCnt.addComponent(month);
        dateCnt.addComponent(year);
        cnt.addComponent(dateCnt);
        upper.addComponent(cnt);

        addComponent(BorderLayout.NORTH, upper);
        addComponent(BorderLayout.CENTER, mv);
    }

    /**
     * Returns the time for the current calendar.
     *
     * @return the time for the current calendar.
     */
    public long getSelectedDay() {
        return mv.getSelectedDay();
    }

    private String getLocalizedMonth(int i) {
        Hashtable t = UIManager.getInstance().getResourceBundle();
        String text = MONTHS[i];
        if (t != null) {
            Object o = t.get("Calendar." + text);
            if (o != null) {
                text = (String) o;
            }
        }
        return text;
    }

    void componentChanged() {
        java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
        cal.set(java.util.Calendar.YEAR, mv.getYear());
        cal.set(java.util.Calendar.MONTH, mv.getMonth());
        cal.set(java.util.Calendar.DAY_OF_MONTH, mv.getDayOfMonth());
        month.getParent().revalidate();
    }

    /**
     * Return the date object matching the current selection
     *
     * @return the date object matching the current selection
     */
    public Date getDate() {
        return new Date(mv.getSelectedDay());
    }

    /**
     * Sets the current date in the view and the selected date to be the same.
     *
     * @param d new date
     */
    public void setDate(Date d) {
        mv.setSelectedDay(d.getTime());
        mv.setCurrentDay(mv.currentDay, true);
        componentChanged();
    }

    /**
     * This method sets the Calendar selected day
     * @param d the selected day
     */
    public void setSelectedDate(Date d){
        mv.setSelectedDay(d.getTime());
    }

    /**
     * Sets the Calendar view on the given date, only the the month and year
     * are being considered.
     *
     * @param d the date to set the calendar view on.
     */
    public void setCurrentDate(Date d){
        mv.setCurrentDay(d.getTime(), true);
        componentChanged();
    }

    /**
     * Sets the Calendar timezone, if not specified Calendar will use the
     * default timezone
     * @param tmz the timezone
     */
    public void setTimeZone(TimeZone tmz){
        this.tmz = tmz;
    }

    /**
     * Gets the Calendar timezone
     *
     * @return Calendar TimeZone
     */
    public TimeZone getTimeZone(){
        return tmz;
    }

    /**
     * Sets the selected style of the month view component within the calendar
     *
     * @param s style for the month view
     */
    public void setMonthViewSelectedStyle(Style s) {
        mv.setSelectedStyle(s);
    }

    /**
     * Sets the un selected style of the month view component within the calendar
     *
     * @param s style for the month view
     */
    public void setMonthViewUnSelectedStyle(Style s) {
        mv.setUnselectedStyle(s);
    }

    /**
     * Gets the selected style of the month view component within the calendar
     *
     * @return the style of the month view
     */
    public Style getMonthViewSelectedStyle() {
        return mv.getSelectedStyle();
    }

    /**
     * Gets the un selected style of the month view component within the calendar
     *
     * @return the style of the month view
     */
    public Style getMonthViewUnSelectedStyle() {
        return mv.getUnselectedStyle();
    }

    /**
     * Fires when a change is made to the month view of this component
     *
     * @param l listener to add
     */
    public void addActionListener(ActionListener l) {
        mv.addActionListener(l);
    }

    /**
     * Fires when a change is made to the month view of this component
     *
     * @param l listener to remove
     */
    public void removeActionListener(ActionListener l) {
        mv.removeActionListener(l);
    }

    /**
     * Allows tracking selection changes in the calendar in real time
     *
     * @param l listener to add
     */
    public void addDataChangeListener(DataChangedListener l) {
        mv.addDataChangeListener(l);
    }

    /**
     * Allows tracking selection changes in the calendar in real time
     *
     * @param l listener to remove
     */
    public void removeDataChangeListener(DataChangedListener l) {
        mv.removeDataChangeListener(l);
    }

    /**
     * This flag determines if selected date can be changed by selecting an
     * alternative date
     *
     * @param changesSelectedDateEnabled if true pressing on a date will cause
     * the selected date to be changed to the pressed one
     */
    public void setChangesSelectedDateEnabled(boolean changesSelectedDateEnabled) {
        this.changesSelectedDateEnabled = changesSelectedDateEnabled;
    }

    /**
     * This flag determines if selected date can be changed by selecting an
     * alternative date
     *
     * @return true if enabled
     */
    public boolean isChangesSelectedDateEnabled() {
        return changesSelectedDateEnabled;
    }

    /**
     * This method creates the Day Button Component for the Month View
     *
     * @return a Button that corresponds to the Days Components
     */
    protected Button createDay() {
        Button day = new Button();
        day.setAlignment(CENTER);
        day.setUIID("CalendarDay");
        day.setEndsWith3Points(false);
        day.setTickerEnabled(false);
        return day;
    }

    /**
     * This method creates the Day title Component for the Month View
     *
     * @param day the relevant day values are 0-6 where 0 is sunday.
     * @return a Label that corresponds to the relevant Day
     */
    protected Label createDayTitle(int day) {
        String value = UIManager.getInstance().localize("Calendar." + DAYS[day], LABELS[day]);
        Label dayh = new Label(value, "CalendarTitle");
        dayh.setEndsWith3Points(false);
        dayh.setTickerEnabled(false);
        return dayh;
    }

    /**
     * This method updates the Button day.
     *
     * @param dayButton the button to be updated
     * @param day the new button day
     */
    protected void updateButtonDayDate(Button dayButton, int currentMonth, int day) {
        dayButton.setText("" + day);
    }

        class MonthView extends Container implements ActionListener{

        private long currentDay;
        private Button[] buttons = new Button[42];
        private Button selected;
        private long selectedDay = -1;

        public MonthView(long time) {
            super(new GridLayout(7, 7));
            setUIID("MonthView");
            for (int iter = 0; iter < DAYS.length; iter++) {
                addComponent(createDayTitle(iter));
            }
            for (int iter = 0; iter < buttons.length; iter++) {
                buttons[iter] = createDay();

                addComponent(buttons[iter]);
                if (iter <= 7) {
                    buttons[iter].setNextFocusUp(year);
                }
                buttons[iter].addActionListener(this);
            }
            setCurrentDay(time);

        }

        public void setCurrentDay(long day){
            setCurrentDay(day, false);
        }

        private void setCurrentDay(long day, boolean force) {
            repaint();
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTime(new Date(currentDay));
            cal.set(java.util.Calendar.HOUR, 1);
            cal.set(java.util.Calendar.HOUR_OF_DAY, 1);
            cal.set(java.util.Calendar.MINUTE, 0);
            cal.set(java.util.Calendar.SECOND, 0);
            cal.set(java.util.Calendar.MILLISECOND, 0);

            int yearOld = cal.get(java.util.Calendar.YEAR);
            int monthOld = cal.get(java.util.Calendar.MONTH);
            int dayOld = cal.get(java.util.Calendar.DAY_OF_MONTH);

            cal.setTime(new Date(day));
            cal.set(java.util.Calendar.HOUR, 1);
            cal.set(java.util.Calendar.HOUR_OF_DAY, 1);
            cal.set(java.util.Calendar.MINUTE, 0);
            cal.set(java.util.Calendar.SECOND, 0);
            cal.set(java.util.Calendar.MILLISECOND, 0);
            int yearNew = cal.get(java.util.Calendar.YEAR);
            int monthNew = cal.get(java.util.Calendar.MONTH);
            int dayNew = cal.get(java.util.Calendar.DAY_OF_MONTH);
            year.setSelectedItem("" + yearNew);
            month.setSelectedIndex(monthNew);

            if (yearNew != yearOld || monthNew != monthOld || dayNew != dayOld || force) {
                currentDay = cal.getTime().getTime();
                if(selectedDay == -1){
                    selectedDay = currentDay;
                }
                int month = cal.get(java.util.Calendar.MONTH);
                cal.set(java.util.Calendar.DAY_OF_MONTH, 1);
                long startDate = cal.getTime().getTime();
                int dow = cal.get(java.util.Calendar.DAY_OF_WEEK);
                cal.setTime(new Date(cal.getTime().getTime() - DAY));
                cal.set(java.util.Calendar.HOUR, 1);
                cal.set(java.util.Calendar.HOUR_OF_DAY, 1);
                cal.set(java.util.Calendar.MINUTE, 0);
                cal.set(java.util.Calendar.SECOND, 0);
                cal.set(java.util.Calendar.MILLISECOND, 0);
                int lastDay = cal.get(java.util.Calendar.DAY_OF_MONTH);
                int i = 0;
                if(dow > java.util.Calendar.SUNDAY){
                    //last day of previous month

                    while (dow > java.util.Calendar.SUNDAY) {
                        cal.setTime(new Date(cal.getTime().getTime() - DAY));
                        dow = cal.get(java.util.Calendar.DAY_OF_WEEK);
                    }
                    int previousMonthSunday = cal.get(java.util.Calendar.DAY_OF_MONTH);
                    for (; i <= lastDay - previousMonthSunday; i++) {
                        buttons[i].setUIID("CalendarDay");
                        buttons[i].setEnabled(false);

                        buttons[i].setText("" + (previousMonthSunday + i));
                    }
                }
                //last day of current month
                cal.set(java.util.Calendar.MONTH, (month + 1) % 12);
                cal.set(java.util.Calendar.DAY_OF_MONTH, 1);
                cal.setTime(new Date(cal.getTime().getTime() - DAY));

                lastDay = cal.get(java.util.Calendar.DAY_OF_MONTH);

                int j = i;
                for (; j < buttons.length && (j - i + 1) <= lastDay; j++) {
                    buttons[j].setEnabled(true);
                    dates[j] = startDate;
                    if(dates[j] == selectedDay){
                        buttons[j].setUIID("CalendarSelectedDay");
                        selected = buttons[j];
                    }else{
                        buttons[j].setUIID("CalendarDay");
                    }
                    buttons[j].getSelectedStyle().setBgColor(bgColorArray[1]);
                    buttons[j].getUnselectedStyle().setBgColor(bgColorArray[0]);
                    buttons[j].getPressedStyle().setBgColor(bgColorArray[2]);

                    buttons[j].getStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getSelectedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getUnselectedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getPressedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_PLAIN, Font.SIZE_SMALL));
                    updateButtonDayDate(buttons[j], month, j - i + 1);
                    startDate += DAY;
                }
                int d = 1;
                for (; j < buttons.length; j++) {
                    buttons[j].setUIID("CalendarDay");
                    buttons[j].setEnabled(false);
                    buttons[j].setText("" + d++);

                    buttons[j].getStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getSelectedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getUnselectedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_SMALL));
                    buttons[j].getPressedStyle().setFont(Font.createSystemFont(
                            Font.FACE_PROPORTIONAL, Font.STYLE_PLAIN, Font.SIZE_SMALL));

                }
            }
        }

        public int getDayOfMonth() {
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTime(new Date(currentDay));
            return cal.get(java.util.Calendar.DAY_OF_MONTH);
        }

        public int getMonth() {
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTime(new Date(currentDay));
            return cal.get(java.util.Calendar.MONTH);
        }

        public void incrementMonth() {
            int month = getMonth();
            month++;
            int year = getYear();
            if (month > java.util.Calendar.DECEMBER) {
                month = java.util.Calendar.JANUARY;
                year++;
            }
            setMonth(year, month);
        }

        private long getSelectedDay() {
            return selectedDay;
        }

        public void setSelectedDay(long selectedDay){
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTime(new Date(selectedDay));
            cal.set(java.util.Calendar.HOUR, 1);
            cal.set(java.util.Calendar.HOUR_OF_DAY, 1);
            cal.set(java.util.Calendar.MINUTE, 0);
            cal.set(java.util.Calendar.SECOND, 0);
            cal.set(java.util.Calendar.MILLISECOND, 0);
            this.selectedDay = cal.getTime().getTime();
        }

        private void setMonth(int year, int month) {
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTimeZone(TimeZone.getDefault());
            cal.set(java.util.Calendar.MONTH, month);
            cal.set(java.util.Calendar.DAY_OF_MONTH, 1);
            cal.set(java.util.Calendar.YEAR, year);

            Date date = cal.getTime();
            long d = date.getTime();

            // if this is past the last day of the month (e.g. going from January 31st
            // to Febuary) we need to decrement the day until the month is correct
            while (cal.get(java.util.Calendar.MONTH) != month) {
                d -= DAY;
                cal.setTime(new Date(d));
            }
            setCurrentDay(d);
        }

        public void decrementMonth() {
            int month = getMonth();
            month--;
            int year = getYear();
            if (month < java.util.Calendar.JANUARY) {
                month = java.util.Calendar.DECEMBER;
                year--;
            }
            setMonth(year, month);
        }

        public int getYear() {
            java.util.Calendar cal = java.util.Calendar.getInstance(tmz);
            cal.setTime(new Date(currentDay));
            return cal.get(java.util.Calendar.YEAR);
        }

        public void addActionListener(ActionListener l) {
            dispatcher.addListener(l);
        }

        public void removeActionListener(ActionListener l) {
            dispatcher.removeListener(l);
        }

        /**
         * Allows tracking selection changes in the calendar in real time
         *
         * @param l listener to add
         */
        public void addDataChangeListener(DataChangedListener l) {
            dataChangeListeners.addListener(l);
        }

        /**
         * Allows tracking selection changes in the calendar in real time
         *
         * @param l listener to remove
         */
        public void removeDataChangeListener(DataChangedListener l) {
            dataChangeListeners.removeListener(l);
        }

        protected void fireActionEvent() {
            componentChanged();
            super.fireActionEvent();
            dispatcher.fireActionEvent(new ActionEvent(Calendar.this));
        }

        public void actionPerformed(ActionEvent evt) {
            Object src = evt.getSource();
            if(src instanceof ComboBox){
                setMonth(Integer.parseInt((String)year.getSelectedItem()),
                        month.getSelectedIndex());
                componentChanged();
                return;
            }
            if(changesSelectedDateEnabled){
                System.out.println("ttttttttttttttttttttttttttttt");
                for (int iter = 0; iter < buttons.length; iter++) {
                    if (src == buttons[iter]) {
                        selected.setUIID("CalendarDay");
                        buttons[iter].setUIID("CalendarSelectedDay");
                        selectedDay = dates[iter];

                        selected.getSelectedStyle().setBgColor(bgColorArray[1]);
                        selected.getUnselectedStyle().setBgColor(bgColorArray[0]);
                        selected.getPressedStyle().setBgColor(bgColorArray[2]);

                        selected = buttons[iter];

                        selected.getSelectedStyle().setBgColor(bgColorArray[1]);
                        selected.getUnselectedStyle().setBgColor(bgColorArray[0]);
                        selected.getPressedStyle().setBgColor(bgColorArray[2]);

                        fireActionEvent();
                        if (!getComponentForm().isSingleFocusMode()) {
                            setHandlesInput(false);
                        }
                        return;
                    }
                }
            }
        }

    }
} 
```

# javascript - js定位移动到上角

> ID：11133684
> 
> 赞同：0
> 
> 时间：2012-06-21T07:44:39.067
> 
> 标签：javascript, jquery

我一直在寻找答案，一切似乎都表明这段代码可以工作。任何想法为什么它不是？

```
$('.entertext').click(function(){

    $('.entertext').animate({opacity:0});
        //$('.move').animate({top:200, left:350});
        //$('.move').animate({top:0, left:0});

    $('.move').animate({"left": "-=350px", "top": "-=200px"});
        if ($('.move').left > 50) {
            $('.homepage').animate({opacity:1.0});
        }
    //$(this).animate({left:100});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:48:08.880

代替`$('.move').left`

经过`$('.move').offset().left`

或者`$('.move').css('left')`根据你的需要。

# android - 我们可以跟踪从 gmail 下载附件的情况吗？

> ID：11133690
> 
> 赞同：0
> 
> 时间：2012-06-21T07:45:19.157
> 
> 标签：android, networking, gmail

假设我在wifi网络上并且我从我的手机下载了一些附件。那么下载的副本是否有可能保存在我的手机和gmail服务器之间的任何服务器机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:50:05.260

Gmail 客户端使用 HTTPS (SSL)，甚至网络客户端也默认使用 HTTPS。如果您将 Web 客户端设置为使用 HTTP，则有人可能会拦截您的流量并提取附件。但在标准的 HTTPS 配置中，即使您使用未受保护的 WiFi 热点等，他们也无法执行此操作。

# java - java - 如何从参数化参数中获取参数的类型

> ID：11133693
> 
> 赞同：0
> 
> 时间：2012-06-21T07:45:40.503
> 
> 标签：java, generics

我在试图找到解决方案（如果有的话）时遇到了麻烦：

```
public class Generics {
    Map<Class<? extends SomeObject1>, SomeObject2>> map;
    map = new HashMap<Class<? extends SomeObject1>, SomeObject2>>();

    public static <E extends SomeObject1> SomeObject2 get(Class<E> c) {
        if (map.containsKey(c))
           return map.get(c);
        else {
           SomeObject2 o = new SomeObject2();
           map.put(c, o);
           return o;
        }
    }
}
...
//somewhere
public <T extends SomeObject1> void aMethod(AnInterestedClass<T> list) {
    // How to get the value from the map
    // knowing that the key is of type T?
    Generics.get(); 
} 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:50:36.103

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您只能通过将 Class 对象传递给`aMethod`. 请参阅[此相关线程](https://stackoverflow.com/questions/416540/java-map-with-values-limited-by-keys-type-parameter?rq=1)。

# c# - 任务延续以保持 UI 线程响应能力

> ID：11133701
> 
> 赞同：2
> 
> 时间：2012-06-21T07:46:18.070
> 
> 标签：c#, task-parallel-library

我正在使用 WinForms 中的任务从我的 UI 线程中删除昂贵的方法。在我的 updateComplete 和 updateFailed 任务中，我必须将 _updateMessageTaskInProgress 设置为 false 并启用我的控件。有什么方法可以在单独的任务中执行此操作，一旦完成，updateComplete 或 updateFailed 也会继续（因为我目前有重复的代码）？另外，是否有更好的方法来实现 _updateMessageTaskInProgress - 我不希望同时运行多个任务。

```
private void PerformUpdate()
{
    if (!_updateMessageTaskInProgress)
        {
            LoadButton.Enabled = false;
            MonthEndDateEdit.Enabled = false;
            BankIssuerListEdit.Enabled = false;

            Task updateMessages = Task.Factory.StartNew(() =>
            {
                _updateMessageTaskInProgress = true;

                ExpensiveMethod();
            });

            // Task runs when updateMessages completes without exception.  Runs on UI thread.
            Task updateComplete = updateMessages.ContinueWith(update =>
            {
                DoSuccessfulStuff();

                _updateMessageTaskInProgress = false;
                LoadButton.Enabled = true;
                MonthEndDateEdit.Enabled = true;
                BankIssuerListEdit.Enabled = true;
            }, System.Threading.CancellationToken.None, TaskContinuationOptions.NotOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());

            // Task runs when updateMessages completes with exception.  Runs on UI thread.
            Task updateFailed = updateMessages.ContinueWith(task =>
            {
                DoFailureStuff();

                _updateMessageTaskInProgress = false;
                LoadButton.Enabled = true;
                MonthEndDateEdit.Enabled = true;
                BankIssuerListEdit.Enabled = true;
            }, System.Threading.CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:36:03.870

你为什么不只是提取一个方法？

```
 private void SetLock(bool lock)
    {
        LoadButton.Enabled = !lock;
        MonthEndDateEdit.Enabled = !lock;
        BankIssuerListEdit.Enabled = !lock;
        _updateMessageTaskInProgress = lock;
    }

    private void PerformUpdate()
    {
        if (!_updateMessageTaskInProgress)
        {
            SetLock(true);
            Task updateMessages = Task.Factory.StartNew(() =>
            {
                ExpensiveMethod();
            });

            // Task runs when updateMessages completes without exception.  Runs on UI thread.
            Task updateComplete = updateMessages.ContinueWith(update =>
            {
                DoSuccessfulStuff();
                SetLock(false);
            }, System.Threading.CancellationToken.None, TaskContinuationOptions.NotOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());

            // Task runs when updateMessages completes with exception.  Runs on UI thread.
            Task updateFailed = updateMessages.ContinueWith(task =>
            {
                DoFailureStuff();
                SetLock(false);
            }, System.Threading.CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:29:11.280

我会为此使用[基于事件的异步**类型**模式](http://msdn.microsoft.com/en-us/library/dd997423.aspx)。下面是我用来使用 TPL 将方法衍生到后台线程的代码的简化版本

```
private void TaskSpin(TaskScheduler uiScheduler, 
                      Func<TaskScheduler, object[], bool> asyncMethod, 
                      object[] methodParameters)
{
    try
    {
        Task asyncTask = Task.Factory.StartNew<bool>(() => 
            asyncMethod(uiScheduler, methodParameters));

        // Callback for finish/cancellation.
        asyncTask.ContinueWith(task =>
        {
            // Check task status.
            switch (task.Status)
            {
                // Handle any exceptions to prevent UnobservedTaskException.             
                case TaskStatus.RanToCompletion:
                    if (asyncTask.Result)
                        UpdateUI(uiScheduler, "OK");
                    else
                    {
                        string strErrComplete = "Process failed.";
                        UpdateUI(uiScheduler, strErrComplete);
                    }
                    break;
                case TaskStatus.Faulted:
                    string strFatalErr = String.Empty;
                    UpdateUI(uiScheduler, "Fatal Error);
                    if (task.Exception != null)
                        strFatalErr = task.Exception.InnerException.Message;
                    else
                        strFatalErr = "Operation failed";
                    MessageBox.Show(strFatalErr);
                    break;
            }
            asyncTask.Dispose();
            return;
        }, TaskScheduler.FromCurrentSynchronizationContext());
    }
    catch (Exception eX)
    {
        Utils.ErrMsg(eX.Message);
    }
} 
```

我希望这有帮助。

*编辑。注意，上面`uiScheduler`是`TaskScheduler`针对 UI Thread 的。那是*

```
TaskSheduler uiScheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

# c++ - 具有历史记录的搜索结构（持久性）

> ID：11133710
> 
> 赞同：7
> 
> 时间：2012-06-21T07:46:57.730
> 
> 标签：c++, data-structures, persistent

我需要一个类似地图的数据结构（在 C++ 中）来存储具有以下功能的对（Key，T）：

*   您可以将新元素 (Key,T) 插入到当前结构中
*   可以根据当前结构中的Key搜索元素
*   您可以制作当前版本结构的“快照”
*   您可以切换到您拍摄快照的结构版本之一，并从那里继续所有操作
*   完全删除其中一个版本

我不需要什么

*   从结构中移除元素
*   将不同版本的结构合并为一个
*   迭代当前存储在结构中的所有（或部分）元素

换句话说，您可以建立一些搜索结构，但在任何时候您都可以跳入历史，并以不同的方式扩展结构的早期/不同版本。稍后您可能会在这些不同的版本之间跳转。

在我的项目中，Key 和 T 可能是整数或指针值，而不是字符串。

主要目标是降低时间复杂度；空间消耗是次要的（但也应该是合理的）。为了澄清，对我来说 log(N)+log(S) （其中 N 个元素，S 个快照）就足够了，虽然更快更好:)

我对如何实现它有一些粗略的想法——例如：作为二叉搜索树的结构，插入新元素可以克隆从根到插入位置的路径，同时保持树的其余部分完好无损。切换树版本相当于选择不同版本的根节点，其中一些更改根本不可见。

然而，为了使这个自定义树高效（例如自平衡），它需要一些额外的努力和仔细的编码。当然我可以自己做，但也许已经有现有的库可以做到这一点？

此外，这种数据结构可能有一个我根本不知道的专有名称，这使得我的 Google 搜索（或 SO 搜索）完全失败......

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:55:41.997

我认为您正在寻找的是不可变的地图。函数式（或受函数启发的）编程语言（例如 Haskell 或 Scala）具有您在 STL 中找到的大多数容器的不可变版本。诸如插入/删除等操作然后返回地图的副本（保留原件）以及包含您请求的修改的副本。在设计数据结构方面进行了大量工作，以便副本能够尽可能多地指向原始数据结构，以减少每个操作的时间和内存复杂性。

您可以在一本书中找到更多详细信息，例如：[http](http://www.amazon.co.uk/Purely-Functional-Structures-Chris-Okasaki/dp/0521663504) ://www.amazon.co.uk/Purely-Functional-Structures-Chris-Okasaki/dp/0521663504 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:40:08.807

在搜索一些持久性搜索树库时，我偶然发现了这一点：

[http://cg.scs.carleton.ca/~dana/pbst/](http://cg.scs.carleton.ca/~dana/pbst/)

虽然它没有所需的完全相同的功能，但它似乎非常接近它。我会调查的。

（在这里发布，因为有人可能会发现它也很有用）

# ruby-on-rails - 使用已声明的 Rails 模型

> ID：11133712
> 
> 赞同：1
> 
> 时间：2012-06-21T07:47:05.277
> 
> 标签：ruby-on-rails, testing, dependency-injection, specifications, isolation

为（快速）测试目的声明一个类很棒：

```
require 'fast_helper'
require 'site_search'

class Post; end # This allows not to load the whole Rails env

describe SiteSearch do
  it "searches on posts" do
    Post.stub_chain(:scoped, :by_term).with("ruby").and_return ["post1", "post2"]
    SiteSearch.by_term("ruby").should == ["post1", "post2"]
  end
end 
```

它的问题在于，当整个规范套件运行时，它似乎会破坏 Rails 模型的自动加载。

之前声明类时不再加载模型。

有[4 种方法可以注入卸载的依赖项](https://www.destroyallsoftware.com/screencasts/catalog/stubbing-unloaded-dependencies)：

1.  声明类（如示例here）
2.  设置/删除常量
3.  存根包装器方法
4.  实际加载它们

我只想使用第一个。

**问题：**保持相同的规范结构，即使已经声明了类，我如何告诉 rails 实际加载模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:00:08.820

为了使您的空类抢占技巧起作用，您必须设置您的应用程序`config.cache_classes = false`，因此除非您调用，否则不会发生急切加载

```
Rails.application.eager_load! 
```

运行整个测试套件时，您需要确保类预加载，然后空重新定义应该没有效果。

现在的问题是如何控制它仅在调用完整的测试套件时才运行。诚实的答案是我不知道，但你肯定可以从环境中控制它。在您的 rspec 助手中的某个地方初始化 rails，将其更新为：

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
Rails.application.eager_load! unless ENV["FORCE_EAGER_LOAD"].blank? 
```

然后在全套中调用 rspec 为：

```
FORCE_EAGER_LOAD=t rspec 
```

# c# - 匿名代表命名约定

> ID：11133714
> 
> 赞同：-3
> 
> 时间：2012-06-21T07:47:06.977
> 
> 标签：c#, .net, reflection, delegates

如果我要创建一个匿名委托，例如：

```
 var x = new Func(x => x != null) 
```

结果是什么：

```
 x.Method.FullName 
```

它遵循什么样的命名约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:25:25.897

据我所知，命名约定类似于'method'__b'num'，其中'method'是声明匿名方法的方法，'num'是数字标识符。

查看[http://www.codeproject.com/Articles/149929/Under-the-hood-of-anonymous-methods-in-C](http://www.codeproject.com/Articles/149929/Under-the-hood-of-anonymous-methods-in-C)

# iphone - 是否可以在 iPhone 的 UIWebView 上浏览文件系统并上传文件？

> ID：11133721
> 
> 赞同：0
> 
> 时间：2012-06-21T07:47:32.533
> 
> 标签：iphone, objective-c, file-upload, uiwebview

在网页中，我有文件上传小部件。我需要在 上显示此网页`UIWebView`。是否可以浏览文件系统并上传pdf、doc、xls文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:51:34.260

*注意：这个答案在 2012 年编写时是正确的，并且 iOS 5 是最新的。iOS 6 引入了媒体上传，iOS 8 允许任意文件上传。*

不，是简短的回答。iOS 没有用户可访问的文件系统。

在 WWDC 上，他们宣布了在 iOS6 中上传图片的能力，但没有公开的信息说明它是如何工作的。

您可以通过使用较低级别的工具（NSURLConnection 等）直接与网站交互并创建自己的“打开”对话框来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:58:04.980

iOS 不允许 webView 浏览文件系统，所以你将无法在 UIWebView 中使用正常的上传机制

您必须向您的网络服务器提供一些 API，以允许您将图像作为 POST 发送

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:32:11.230

答案是否定的，因为与原生应用程序相比，webview 在不同的沙箱中运行。

也没有像适用于 iOS 的 android 这样的可访问文件系统机制。甚至本机应用程序的文件访问权限也非常有限，仅与他们自己和某些用户目录（如 tmp、文档等）有关。

# c# - 调试 .NET 内存泄漏 - 如何知道什么持有对什么的引用？

> ID：11133722
> 
> 赞同：8
> 
> 时间：2012-06-21T07:47:36.100
> 
> 标签：c#, memory-leaks, garbage-collection

我正在开发一个似乎存在内存泄漏的 .NET 应用程序。我知道教科书上的答案，应该取消订阅事件，应该处置一次性物品等......

我有一个可以重现错误的测试工具。在某个类的终结器中，我写信给控制台

```
public class Foo
{
   // Ctor
   public Foo()
   {
   }

   ~public Foo()
   {
       Console.WriteLine("Foo Finalized");
   }
} 
```

在测试工具中，我创建了 Foo 的单个实例（它反过来创建并与数百种其他类型交互）然后删除它并调用垃圾收集器。

我发现永远不会调用 Foo 终结器。我有一个与此设置类似的课程，最终确定为控制测试。

所以我的问题是：

> 我如何使用商业或开源工具来确定究竟什么是对 Foo 的引用？

我有 dotTrace Memory profiler 的专业许可证，但无法从帮助文件中弄清楚如何使用它。

**更新：**我现在正在使用[dotMemory 4.0](http://www.jetbrains.com/dotmemory/)，它是（好的，但不可用的）dotTrace Memory 3.5 的继承者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T08:15:41.373

[查看](http://msdn.microsoft.com/en-us/library/bb190764.aspx)SOS[调试器](https://msdn.microsoft.com/en-us/library/bb190764(v=vs.110).aspx)扩展（它是免费的，可以在 Visual Studio 中使用）。

您可能会发现[这](http://www.simple-talk.com/dotnet/.net-framework/investigating-.net-memory-management-and-garbage-collection/)有助于[入门](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)。

如果您已成功设置 SOS（有时这可能很棘手），那么知道什么包含对什么的引用就像

```
// load sos
.load sos
// list of all instances of YourTypeName in memory with their method tables
!DumpHeap -type YourTypeName  
// put here the method table displayed by the previous command
// it will show you the memory address of the object
!DumpHeap -mt 07f66b44              
// displays information about references the object at the specified address
!GCRoot 02d6ec94 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T08:26:50.670

调试内存泄漏可能是一个相当复杂的过程，需要彻底了解您的程序逻辑和至少一些 .Net 内部结构（尤其是垃圾收集器行为）。

有关更多信息，请参阅以下链接：

**很好的介绍**

*   [http://msdn.microsoft.com/en-us/library/ee658248.aspx](http://msdn.microsoft.com/en-us/library/ee658248.aspx)

**动手课程：**

*   [http://www.dotnetfunda.com/articles/article508.aspx](http://www.dotnetfunda.com/articles/article508.aspx)
*   [http://www.dotnetfunda.com/articles/article524.aspx](http://www.dotnetfunda.com/articles/article524.aspx)

**GC 和 .Net 内部结构**

*   [http://blogs.msdn.com/b/tess/archive/2008/04/17/how-does-the-gc-work-and-what-are-the-sizes-of-the-different-generations。 aspx](http://blogs.msdn.com/b/tess/archive/2008/04/17/how-does-the-gc-work-and-what-are-the-sizes-of-the-different-generations.aspx)
*   [http://msdn.microsoft.com/en-us/magazine/cc163491.aspx](http://msdn.microsoft.com/en-us/magazine/cc163491.aspx)
*   [http://blogs.msdn.com/b/maoni/archive/2004/06/03/148029.aspx](http://blogs.msdn.com/b/maoni/archive/2004/06/03/148029.aspx)

**带有 SOS 扩展的 WinDbg**

*   [http://www.codeproject.com/Articles/19490/Memory-Leak-Detection-in-NET](http://www.codeproject.com/Articles/19490/Memory-Leak-Detection-in-NET)
*   [http://www.simple-talk.com/dotnet/.net-framework/investigating-.net-memory-management-and-garbage-collection/](http://www.simple-talk.com/dotnet/.net-framework/investigating-.net-memory-management-and-garbage-collection/)

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T07:59:58.527

终结器不是确定性地调用的，所以要小心使用它以可靠的方式跟踪事物。如果您删除终结器并改为使用 a`WeakReference<Foo>`您应该能够确定对象是否被收集。

所有内存分析器都应该能够找到这样的问题，但难度不同。我个人使用过 ANTS，它很容易使用，但不是免费的。它将帮助您显示 Foo 实例的引用图，从 GC 根对象开始。看到这张图，通常很容易发现谁在持有参考。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T07:55:11.937

您可以使用内存分析器来识别内存泄漏。这里有一些，

[内存分析器](http://memprofiler.com/)

[蚂蚁探查器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T08:17:03.703

首先你不应该使用终结器，因为：

> Finalize 操作具有以下限制：
> 
> *   垃圾回收期间终结器执行的确切时间未定义。除非调用 Close 方法或 Dispose 方法，否则不保证在任何特定时间释放资源。
>     
>     
> *   不保证两个对象的终结器以任何特定顺序运行，即使一个对象引用另一个对象。也就是说，如果对象 A 具有对对象 B 的引用并且都具有终结器，则对象 B 可能在对象 A 的终结器启动时已经终结。
>     
>     
> *   运行终结器的线程未指定。

引用自： http: [//msdn.microsoft.com/en-us/library/system.object.finalize.aspx](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)
我建议改用 Dispose 方法。

其次，任何内存分析器都应该能够找到保存这些引用的内容。我个人使用的是 ANTS Profiler，它是一个非常好的工具，并且有相当丰富的文档。您可以尝试阅读此文档： http: [//downloads.red-gate.com/HelpPDF/ANTS_Memory_Profiler/InstanceCategorizer.pdf](http://downloads.red-gate.com/HelpPDF/ANTS_Memory_Profiler/InstanceCategorizer.pdf) 实例分类器显示从对象集到 GC 根的引用链。

# python - 对象跟踪：MATLAB 与 Python Numpy

> ID：11133724
> 
> 赞同：10
> 
> 时间：2012-06-21T07:47:42.270
> 
> 标签：python, matlab, numpy, tracking, video-processing

我将很快开始最后一年的工程项目，包括实时跟踪在 2D 表面上移动的物体。我的算法将使用[特征提取](http://en.wikipedia.org/wiki/Feature_extraction)来注册对象。

我正在尝试做一些研究来决定我应该使用 MATLAB 还是使用 Python Numpy (Numerical Python)。我考虑的一些因素：

1.) 经验

我在这两个方面都有相当的经验，但在使用 Numpy 进行图像处理方面可能更有经验。但是，我一直发现 MATLAB 非常直观且易于上手。

2.) 实时能力

我的选择能够支持从外部摄像头实时采集视频数据是非常重要的。我找到了[MATLAB](http://www.mathworks.com/matlabcentral/fileexchange/18596-real-time-microphone-and-camera-data-acquisition-and-audio-video-processing)的这个链接，展示了如何做到这一点。我确信 Python 也有可能，也许使用 OpenCV 库？

3.) 性能

我听说，虽然从未使用过，但 MATLAB 可以轻松地将独立计算拆分到[多个内核](http://www.mathworks.com/matlabcentral/fileexchange/13775)。我应该认为这会非常有用，我不确定 Numpy 是否同样简单？

4.) 价格

我知道与 MATLAB 相关的成本，但我将在一所大学工作，因此可以使用完整的 MATLAB 而无需自己支付任何费用，因此价格不是一个因素。

我将非常感谢任何做过类似事情的人提供的任何意见，以及您的经验。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T18:04:58.893

Python（带有 NumPy、SciPy 和 MatPlotLib）是新的 Matlab。所以我强烈推荐 Python 而不是 Matlab。

一年多前我做出了改变，我对结果非常满意。

这是 Python 和 Matlab 的简短优缺点列表

Python 优点：

*   面向对象
*   易于编写大型和“真实”的程序
*   开源（因此完全免费使用）
*   快速（大多数重型计算算法都有一个 python 包装器来连接 C 库，例如 NumPy、SciPy、SciKits、libSVM、libLINEAR）
*   舒适的环境，高度可配置（iPython，VIM 的 python 模块，...）
*   快速增长的 Python 用户社区。大量的文档和愿意提供帮助的人

Python 缺点：

*   安装起来可能很痛苦（尤其是 OS X 中的某些模块）
*   绘图操作不如 Matlab 好/容易，尤其是 3D 绘图或动画
*   它仍然是一种脚本语言，因此仅将其用于（快速）原型设计
*   Python 不是为多核编程而设计的

Matlab 优点：

*   非常容易安装
*   强大的工具箱（例如信号处理、系统生物学）
*   只要您购买许可证，即可获得统一的文档和个性化支持
*   易于绘制动画和交互式图形（我发现这对于运行实验非常有用）

Matlab 缺点：

*   不是免费的（而且很贵）
*   基于 Java + X11，看起来非常难看（好吧，我承认我在这里完全有偏见）
*   难以编写大型且可扩展的程序
*   许多 Matlab 用户正在切换到 Python :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T12:21:42.833

我会推荐python。

我通过我的博士学位从 MATLAB -> python 切换了大约 1/2，并且不后悔。最简单地说，python 是一种更好的语言，具有真实的对象等。

如果您希望在 c/c++ 中执行代码的任何部分，我肯定会推荐 python。mex 接口可以工作，但是如果你的构建变得复杂/大，它就会开始变得很痛苦，我从来没有弄清楚如何有效地调试它。mex+分配与matlab的内存管理交互的大块时我也遇到了很大的困难（我无法解决这个问题是促使我切换的原因）。

作为旁注/自我宣传，我有[C++](https://github.com/tacaswell/tracking)中的 Crocker-Grier （带有 swig 包装器）和纯[python](https://github.com/tacaswell/trackpy)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T08:25:13.087

1.  如果您对两种语言都有经验，那么这并不是一个真正的决策标准。

2.  Matlab 在处理实时设置方面存在问题，尤其是因为大多数计算机视觉算法都非常昂贵。这是使用久经考验的库（例如 OpenCV）的优势，您将使用的许多算法都可以有效地实现。Matlab 提供了将代码编译成 Mex 文件的可能性，但这需要大量工作。

3.  Matlab 具有并行 for 循环`parfor`，这使得多核处理变得容易（或至少更容易）。但问题是这是否足以获得实时速度。

4.  没有意见。

5.  Matlab 的主要优点是由于其良好的文档，您将很快获得运行程序。**但是**我发现 Matlab 的代码可重用性很差，除非你非常重视它。

我认为最终决定必须是您是否必须/可以实时运行您的算法，我在 Matlab 中对此表示怀疑，但这取决于您计划使用的方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T00:57:41.217

其他人发表了很多很棒的评论（我之前在另一个答案[https://stackoverflow.com/a/5065585/392949](https://stackoverflow.com/a/5065585/392949)中对此主题发表过意见），但我只想指出 Python 有很多非常优秀的用于并行计算/跨多个内核拆分工作的工具。这是一个简短但绝不是全面的列表：

*   IPython 并行工具包：http: [//ipython.org/ipython-doc/dev/parallel/index.html](http://ipython.org/ipython-doc/dev/parallel/index.html)

*   mpi4py：[https ://code.google.com/p/mpi4py](https://code.google.com/p/mpi4py)

*   标准库中的多处理模块：http: [//docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

*   pyzmq：http://zeromq.github.com/pyzmq/ [（](http://zeromq.github.com/pyzmq/) IPython 并行工具包基于什么）

*   并行python（pp）： http: [//www.parallelpython.com/](http://www.parallelpython.com/)

*   Cython 的 openmp 包装：http: [//docs.cython.org/src/userguide/parallelism.html](http://docs.cython.org/src/userguide/parallelism.html)

如果您需要连接外部 C 库或编写 C 扩展，您可能还会发现 cython 与 Matlab 提供的工具相比是一个非常优越的工具，并且它内置了出色的 numpy 支持。

这里有一个包含许多其他选项的列表： [http ://wiki.python.org/moin/ParallelProcessing](http://wiki.python.org/moin/ParallelProcessing)

# c# - 验证一对在两个方向上的唯一性：添加到容器中的 AB 或 BA

> ID：11133729
> 
> 赞同：0
> 
> 时间：2012-06-21T07:48:05.757
> 
> 标签：c#, .net, unique, tuples

我正在构建一个图形并验证要添加的顶点的唯一性`HashSet<T>`。如果尚未添加项目，则其方法 Add() 返回 true。

我可以对边缘使用什么技术？我需要验证是否添加了一次 AB 对或 BA 对。

这是我正在使用的数据的轻量级版本：

```
interface INode
{
    INode[] Previous { get; }

    Node Next { get; }
} 
```

然后我有：

```
INode current;
INode[] allPrevious = ExternalMethod1(current);
INode[] allNext = ExternalMethod2(current); 
```

所以我不能在递归的时候建立一个图，我已经存储了所有的数据来迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:02:43.427

为边缘创建自己的相等比较器实现并设置[`HashSet<T>.Comparer`](http://msdn.microsoft.com/en-us/library/bb346458.aspx)为它的实例。例如：

```
class Edge
{
    public string From { get; set; }
    public string To { get; set; }
}

class EdgeEqualityComparer : IEqualityComparer<Edge>
{
    public bool Equals(Edge lhs, Edge rhs)
    {
        return (lhs.From.Equals(rhs.From) && lhs.To.Equals(rhs.To)) ||
               (lhs.From.Equals(rhs.To) && lhs.To.Equals(rhs.From));
    }

    public int GetHashCode(Edge e)
    {
        return e.From.GetHashCode() ^ e.To.GetHashCode();
    }
} 
```

当然，您还必须检查无效性。所有[标准警告](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)也适用于`GetHashCode`实现。

# c# - 如何优化使用 Dictionary 的代码

> ID：11133741
> 
> 赞同：2
> 
> 时间：2012-06-21T07:48:49.817
> 
> 标签：c#, optimization, dictionary

我有以下代码：

```
// Dictionary which I want to optimize
Dictionary<string, MyClass> myDict;
//
Dictionary<int, KKSKey> kksKeyList;

...    
...
...

// Classes
[Serializable]
public class MyClass : MyBaseClass
{
    Dictionary<int, DebugValue> myDebugValues;    
    ...
    ...
    ...
}

//
[Serializable]
public class DebugValue
{
    public int ValueType {get;set;}
    public double Value {get;set;}
    ...
    ...
    ...
}

public class KKSKey
{
    public string KKS { set; get; }
    public string Variable { set; get; }
    ...
    ...
    ...
} 
```

我到处使用字典的原因是因为我需要通过键访问列表。

我在一个`for`循环中有以下几行，它运行了超过 550,000 次（是的！）。`myDict`有大约 10,000 件商品，`kksKeyList`超过 550,000 件商品。

以下每一行运行`i = 0 to 550,000`：

```
myDict[kksKeyList[i].KKS].myDebugValues[i].ValueType = DOUBLE;
myDict[kksKeyList[i].KKS].myDebugValues[i].Value = tempdouble; 
```

基本上，上面的行用通过 TCP 接收的原始数据填充字典项。`for`上述每一行每个循环大约需要 90-100 毫秒（550,000 次）。这对我的申请是不可接受的。它必须在 50 毫秒内完成上述行之一。谁能建议如何优化上述操作的性能？我愿意接受任何建议，即使这意味着在必要时重新定义相关类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:59:55.130

你的时间太慢了。对于这类问题，一毫秒是永恒的，字典中的 550,000 个元素是鸡饲料。我的第一个想法是您的问题在于您的数据源，而不是您的字典；在网络通信中，一毫秒的时间要多得多。

*如果*字典*是*问题，看看你的记忆。字典是哈希表，本质上是数组。当你创建一个时，它从一个特定大小的数组开始。随着它的扩展，它会分配一个新的、更大的数组并丢弃旧的数组。如果您的 550,000 元素字典开始时有 10 个元素的空间，它将使“可用”内存充满无法使用的大块内存，因为下一次分配仍然更大。GC 将努力重新排列内存并使所有这些块连续，如果它在您运行两个问题语句时这样做，它会减慢速度。要解决此问题，请在创建字典时首先为 550,000 个条目分配空间。这可能就足够了，但也调用`GC.Collect()`. 这将一次性完成 GC 工作，并在您需要时为您提供干净的时间安排。

另一个内存问题可能是`myDebugValues`。对于`myDict`. 正如您从一开始就希望 myDict 很大一样，这些也需要很小。我什至可能会建议使用 ListDictionary 或 HybridDictionary ( [System.Collections.Specialized](http://msdn.microsoft.com/en-us/library/system.collections.specialized) )。

内存的关键是只使用真实内存而不是虚拟内存；一旦你的机器开始寻呼，你就有麻烦了。并让您的 GC 开心。

希望这会有所帮助，否则其他人会提出更好的答案。（我喜欢 Urik 的，但优化器可能已经这样做了。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:58:04.550

你可以试试：

```
string kks = kksKeyList[i].KKS;
myDict[kks].myDebugValues[i].ValueType = DOUBLE;
myDict[kks].myDebugValues[i].Value = tempdouble; 
```

或许：

```
myDict[kksKeyList[i].KKS] = new DebugValue(DOUBLE, tempdouble) 
```

如果它适合您的构造函数...

# node.js - Fedora 16 上的 Node.js 符号查找错误

> ID：11133742
> 
> 赞同：1
> 
> 时间：2012-06-21T07:48:51.627
> 
> 标签：node.js, installation, fedora

我在 Fedora 16 上安装了 Node.JS，但是当我启动守护进程时，它抛出错误：

```
sdfnode: symbol lookup error: node: undefined symbol: _ZN2v82V816IdleNotificationEv 
```

为了解决我从这个存储库重新安装的问题：[http](http://nodejs.tchol.org/) ://nodejs.tchol.org/ ，它没有帮助。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:40:35.697

通过从源安装解决了这个问题。

首先从 Node.js 网站下载源代码并在命令行中执行：

```
./configure make
make
install 
```

您将需要`make`一个 C 编译器，例如`gcc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:00:38.493

我真的建议在 Fedora 上安装 node.js 时遵循[这个建议。](https://stackoverflow.com/a/10375827/1229023)

# c# - 如何在 VS 2010 中使用 webpart 加入共享点列表？

> ID：11133744
> 
> 赞同：2
> 
> 时间：2012-06-21T07:48:54.373
> 
> 标签：c#, sharepoint, datagridview

我在 SharePoint 中创建了 2 个列表：

*   **具有以下列的客户**：
    *   ID
    *   姓名
    *   地址
*   **具有以下列的产品**：
    *   ID
    *   customer_id（查找）
    *   产品名称

我想在 VS2010 中使用 Web 部件在[DataGridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.aspx)中显示属于每个客户的所有产品详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:18:15.123

[查看位于http://www.bendsoft.com/home/](http://www.bendsoft.com/home/)的用于 SharePoint 的 Camelot .NET 连接器中的新连接功能

Thsi 将使您能够编写这样的查询

```
using (var connection = new SharePointConnection(connectionString))
{
    connection.Open();
    using (var command = new SharePointCommand(@"SELECT Customer.name AS Name
                , Customer.address AS Address
                , Customer.ID AS CustomerId
                , Product.ID AS ProductId
                , Product.customer_id AS ProductCustomerId
                , Product.productname AS ProductName
                FROM Customers
                INNER JOIN Log ON CustomerId = ProductCustomerId"
                , connection))
    {
        using (var reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                Console.WriteLine(reader["Name"].ToString().PadRight(30) + " : " + reader["Event"].ToString().PadRight(30) + " : " + reader["Created"].ToString());
            }
        }
    }
} 
```

[http://www.bendsoft.com/documentation/camelot-net-connector/latest/sql-statement-syntax/join/](http://www.bendsoft.com/documentation/camelot-net-connector/latest/sql-statement-syntax/join/)

# jquery - 无法使 jQuery Dropkick 工作

> ID：11133747
> 
> 赞同：0
> 
> 时间：2012-06-21T07:49:02.577
> 
> 标签：jquery, html

当我点击时 - 它什么也没做。

html代码：

```
 <fieldset>
      <form action="#" method="post" accept-charset="utf-8" class="example_form">
        <select name="country" class="default" tabindex="2">
          <option value="">Try Me!</option>
          <option value="AU">Australia</option>
          <option value="CA">Canada</option>
          <option value="DE">Germany</option>
          <option value="JP">Japan</option>
          <option value="GB">United Kingdom</option>
          <option value="US">United States</option>
        </select>       
      </form>
    </fieldset> 
```

js代码：

```
 $('.default').dropkick(); 
```

Google Chrome 控制台中没有任何错误。

**已编辑**

```
 <%= javascript_include_tag 'jquery-1.7.2', 'jquery.validate.min','jquery.dropkick-1.0.0','application' %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:26:47.930

我尝试了 jsfiddle.net 中的代码。它工作得很好。这是我使用的小提琴[http://jsfiddle.net/guanxiaohua2k6/36pkP/](http://jsfiddle.net/guanxiaohua2k6/36pkP/)

```
jquery 1.7.2
jquery.validate 1.9
jquery.dropkick 1-0.1 
```

您可以在“管理资源”选项卡中确认它们。

# sharepoint - 在 Sharepoint 中使用 COM

> ID：11133749
> 
> 赞同：0
> 
> 时间：2012-06-21T07:49:10.980
> 
> 标签：sharepoint, com, sharepoint-2010, 64-bit, gac

我有两个 ocx 文件，我使用 regsvr32 在我的计算机上注册了它们。我通过在项目中添加对 COM 对象的引用，在我的 Visual Studio 项目中使用它们。

问题是当我尝试将这些添加到 SharePoint 项目时，当我尝试调用 COM 对象时，我收到错误：

> > “无法加载文件或程序集 'Interop.TsSDKActiveX, Version=1.0.0.0, Culture=neutral, PublicKeyToken=60b2ad56e2b9ec22' 或其依赖项之一。系统找不到指定的文件。”

我该如何解决这个问题？TsSDKActiveX 在 GAC 中不存在（但在我的 Program Riles (x86) 中，这就是为什么我认为它没有找到它的原因。另外，我怀疑 sharepoint 喜欢 64 位 DLL 的事实是一个问题。

我试图将代码隔离在一个单独的应用程序中，并通过 WCF 服务调用它，但是由于这个 COM 组件的工作方式，这给了一些问题。我需要取消服务。

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:38:22.813

即使通过 COM，也无法将 32 位 DLL 加载到 64 位进程中。您可能会依靠 COM 跨进程边界进行通信，但我认为它不适用于您的情况。我认为您最初使用 WCF 的方法是最自然的方法。公开一个瘦 WCF 终结点，该终结点将 COM 包装器对象的接口包装在托管代码中，然后使用标准 WCF 客户端 API 从 SharePoint 与其交互。现在，如果您必须在交互中具有状态，请在共享点流程中创建一个业务对象，该流程维护并仅根据需要调用 WCF。你放弃 WCF 的原因是什么？

# c++ - 在 AD 服务器上使用 winldap.h 进行 LDAP 搜索

> ID：11133752
> 
> 赞同：2
> 
> 时间：2012-06-21T07:49:35.107
> 
> 标签：c++, search, active-directory, ldap, windows-server-2008-r2

我正在尝试进行 LDAP 搜索，但它在我的 Active Directory 测试服务器上不起作用。我使用这段代码：

```
#include <winldap.h>
...
LDAP* ld = ldap_init("AD-servername", 389);
int myVersion =LDAP_VERSION3;
ldap_set_option(ld, LDAP_OPT_PROTOCOL_VERSION, &myVersion);
ldap_connect(ld, NULL);
//ldap_simple_bind_s(ld, NULL, NULL); I tried using this line too. but got the same error
LDAPMessage *pMsg = NULL;
int retVal = ldap_search_s(ld, "dc=myDomain,dc=extension", LDAP_SCOPE_SUBTREE, "(samAccountName=testaccount)", NULL, NULL, &pMsg);
//retVal = 1 which is LDAP_OPERATIONS_ERROR 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:01:05.013

除非另有配置，否则您**必须**使用 Microsoft Active Directory 服务器的有效帐户名和密码进行绑定，否则它将返回除[极少数](http://technet.microsoft.com/en-us/library/cc755809%28v=ws.10%29.aspx)之外的所有查询的操作错误。

即：

```
ldap_simple_bind_s(ld, NULL, NULL); 
```

需要用类似的东西替换：

```
char *username = "cn=aUser,ou=Users,dc=myDomain,dc=extension";
char *password = "this is the password";
ldap_simple_bind_s(ld, username, password); 
```

# java - 将命名空间添加到已创建的 XML 文档

> ID：11133754
> 
> 赞同：8
> 
> 时间：2012-06-21T07:49:45.973
> 
> 标签：java, xml, dom

我正在使用字符串值创建一个 W3C 文档对象。创建 Document 对象后，我想将命名空间添加到该文档的根元素。这是我当前的代码：

```
Document document = builder.parse(new InputSource(new StringReader(xmlString)));
document.getDocumentElement().setAttributeNS("http://com", "xmlns:ns2", "Test");
document.setPrefix("ns2");
TransformerFactory tranFactory = TransformerFactory.newInstance();
Transformer aTransformer = tranFactory.newTransformer();
Source src = new DOMSource(document);
Result dest = new StreamResult(new File("c:\\xmlFileName.xml"));
aTransformer.transform(src, dest); 
```

我用作输入的内容：

```
<product>
    <arg0>DDDDDD</arg0>
    <arg1>DDDD</arg1>
</product> 
```

输出应该是什么样子：

```
<ns2:product xmlns:ns2="http://com">
    <arg0>DDDDDD</arg0>
    <arg1>DDDD</arg1>
</ns2:product> 
```

我还需要将前缀值和命名空间添加到输入 xml 字符串中。如果我尝试上面的代码，我会得到这个异常：

```
NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces. 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T21:23:06.290

由于没有简单的方法来重命名根元素，因此我们必须将其替换为具有正确名称空间和属性的元素，然后将所有原始子元素复制到其中。不需要强制命名空间声明，因为通过为元素提供正确的命名空间 (URI) 并设置前缀，声明将是自动的。

用这个替换`setAttribute`and `setPrefix`（第 2,3 行）

```
String namespace = "http://com";
String prefix = "ns2";
// Upgrade the DOM level 1 to level 2 with the correct namespace
Element originalDocumentElement = document.getDocumentElement();
Element newDocumentElement = document.createElementNS(namespace, originalDocumentElement.getNodeName());
// Set the desired namespace and prefix
newDocumentElement.setPrefix(prefix);
// Copy all children
NodeList list = originalDocumentElement.getChildNodes();
while(list.getLength()!=0) {
    newDocumentElement.appendChild(list.item(0));
}
// Replace the original element
document.replaceChild(newDocumentElement, originalDocumentElement); 
```

在原始代码中，作者试图像这样声明一个元素命名空间：

```
.setAttributeNS("http://com", "xmlns:ns2", "Test"); 
```

第一个参数是属性的名称空间，因为它是名称空间属性，所以它需要有[http://www.w3.org/2000/xmlns/](http://www.w3.org/2000/xmlns/) URI。声明的命名空间应该进入第三个参数

```
.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:ns2", "http://com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T06:34:56.463

波纹管方法也适用于我，但可能不应该在性能关键的情况下使用。

1.  将名称空间作为属性添加到文档根元素。
2.  将文档转换为 XML 字符串。此步骤的目的是使 XML 字符串中的子元素继承父元素命名空间。
3.  现在 xml 字符串具有名称空间。
4.  您可以使用 XML 字符串再次构建文档或用于 JAXB 解组等。

* * *

```
private static String addNamespaceToXml(InputStream in)
        throws ParserConfigurationException, SAXException, IOException,
        TransformerException {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    /*
     * Must not namespace aware, otherwise the generated XML string will
     * have wrong namespace
     */
    // dbf.setNamespaceAware(true);
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document document = db.parse(in);
    Element documentElement = document.getDocumentElement();
    // Add name space to root element as attribute
    documentElement.setAttribute("xmlns", "http://you_name_space");
    String xml = transformXmlNodeToXmlString(documentElement);
    return xml;
}

private static String transformXmlNodeToXmlString(Node node)
        throws TransformerException {
    TransformerFactory transFactory = TransformerFactory.newInstance();
    Transformer transformer = transFactory.newTransformer();
    StringWriter buffer = new StringWriter();
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    transformer.transform(new DOMSource(node), new StreamResult(buffer));
    String xml = buffer.toString();
    return xml;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-22T20:55:00.060

部分从[这里](https://stackoverflow.com/a/28497163/32453)收集，也从上面的评论中收集，我能够让它工作（转换任意 DOM 节点并为其及其所有子节点添加前缀），因此：

```
 private String addNamespacePrefix(Document doc, Node node) throws TransformerException {
    Element mainRootElement = doc.createElementNS(
            "http://abc.de/x/y/z", // namespace
            "my-prefix:fake-header-element" // prefix to "register" it with the DOM so we don't get exceptions later...
    );
    List<Element> descendants = nodeListToArrayRecurse(node.getChildNodes()); // for some reason we have to grab all these before doing the first "renameNode" ... no idea why ...

    mainRootElement.appendChild(node);
    doc.renameNode(node, "http://abc.de/x/y/z", "my-prefix:" + node.getNodeName());
    descendants.stream().forEach(c -> doc.renameNode(c, "http://abc.de/x/y/z", "my-prefix:" + c.getNodeName()));
  }

  private List<Element> nodeListToArrayRecurse(NodeList entryNodes) {
    List<Element> allEntries = new ArrayList<>();
    for (int i = 0; i < entryNodes.getLength(); i++) {
      Node child = entryNodes.item(i);
      if (child.getNodeType() == Node.ELEMENT_NODE) {
        allEntries.add((Element) child);
        allEntries.addAll(nodeListToArray(child.getChildNodes())); // recurse
      } // ignore other [i.e. text] nodes https://stackoverflow.com/questions/14566596/loop-through-all-elements-in-xml-using-nodelist
    }
    return allEntries;
  } 
```

如果它可以帮助任何人。然后我将其转换为字符串，然后手动删除额外的标题和结束行。好痛啊，我一定是做错了什么……

# remote-desktop - 远程桌面：来自 Windows 7 的 Ubuntu 12.04

> ID：11133755
> 
> 赞同：0
> 
> 时间：2012-06-21T07:49:47.223
> 
> 标签：remote-desktop, remote-access, desktop-sharing

我想将我的 Ubuntu 12.04 桌面共享（并控制）给我的兄弟（使用 Windows 7）。我们不在同一个网络上。（我们在不同的城市）。

完成此任务的最简单方法是什么（不影响安全性）？我读到 VNC 不是很安全。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:54:41.720

我会尝试 Teamviewer。不错的工具，我经常在私人和工作中使用它来远程访问 PC。使用 Teamviewer，还可以通过 Android/iPhone 访问客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T15:16:36.207

您也可以使用 UltraVNC。它适用于 Windows-Linux 远程桌面。[超VNC](http://www.uvnc.com/downloads/ultravnc.html)

# unit-testing - 如何使用 gmock 模拟这个类，它的实例作为其他类中的类成员

> ID：11133758
> 
> 赞同：3
> 
> 时间：2012-06-21T07:50:07.710
> 
> 标签：unit-testing, gmock

我是新用户`gmock`。我不知道如何使用`gmock`这个类来模拟它的实例作为其他类中的类成员。代码如下所示：

```
classs B
{
    B_fun();
};
class A
{
    B b;
    A_fun()
    {
    if( b.B_fun() === XXX )
    {
     doXXXXX...
    }
} 
```

现在，我想用来`gmock`模拟`B`，然后`mockB`在`A`UnitTest 中使用。你能告诉我怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:01:00.330

您可以将 B 类模拟为：

```
class MockB: public class B
{
    MockMethod0(B_func, void())
}; 
```

然后使用：

```
MockB mockb; 
```

并假设您的 A 类的构造函数之一是：

```
A(B b_)b(b_){} 
```

因此，您可以通过以下方式使模拟功能可用：

```
A test_a = A(mockb);
EXPECT_CALL(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T08:45:25.720

您可以使用工厂方法（这与工厂模式不同）。

对于您的情况，这是一个示例代码：

```
class B
{
    B_fun();
};

class A
{

    A()
    {
        b = CreateB();
    }

    A_fun()
    {
        if( b->B_fun() === XXX )
        {
           doXXXXX...
        }
    }

    private:

    virtual B* CreateB()
    {
        return new B();
    }

    B* b;
} 
```

所以在这里你有一个虚拟的 CreateB 方法。

现在创建一个 MockA 类并仅模拟此方法（CreateB）。

模拟方法应该返回一个 MockB 类实例。这可以通过在测试夹具中设置模拟方法（CreateB）来返回 MockB 实例来完成。

现在根据需要对 MockB 实例寄予期望。

在实际中：

```
class MockA : public A
{
public:
    virtual ~MockA() {}
    MOCK_METHOD1(CreateB, B*());
};

TEST_F(TestA, TestSomething)
{
    MockB* b(new MockB()); // mock that will be used
    MockA  a;                // class under test, factory method(s) mocked
    // setup mocks
    EXPECT_CALL( a, CreateB()).Times(Exactly(1)).WillOnce(Return(b));

    EXPECT_CALL(*b, SomeMethod()).Times(Exactly(1));

    // execute test
    a.A_fun(3u);
 } 
```

# java - '0000-00-00 00:00:00' 不能表示为 java.sql.Timestamp 错误

> ID：11133759
> 
> 赞同：153
> 
> 时间：2012-06-21T07:50:23.203
> 
> 标签：java, mysql, jdbc, timestamp

我有一个包含日期的数据库表

```
 (`date` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'). 
```

我正在使用 MySQL。从程序中，有时数据会在没有日期的情况下传递到数据库。`0000-00-00 00:00:00` 因此，当使用给出错误的日期列调用表数据时，日期值会自动分配给

```
...'0000-00-00 00:00:00' can not be represented as java.sql.Timestamp....... 
```

我试图在插入数据时将空值传递给日期，但它被分配给当前时间。

有什么方法可以在`ResultSet`不更改表结构的情况下获得？

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2012-06-21T08:00:06.487

您可以直接在数据源配置中使用此 JDBC URL：

> jdbc:mysql://yourserver:3306/yourdatabase?zeroDateTimeBehavior=convertToNull

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-14T11:29:25.433

“日期”“0000-00-00”是否是有效的“日期”与问题无关。“只需更改数据库”很少是可行的解决方案。

事实：

*   MySQL 允许使用零值的日期。
*   此“功能”在其他语言中得到广泛使用。

因此，如果我“只更改数据库”，数千行 PHP 代码将会中断。

Java 程序员需要接受 MySQL 的零日期*，并且*当其他语言依赖此“功能”时，他们需要将零日期放回数据库中。

连接到 MySQL 的程序员需要处理 null 和 0000-00-00 以及有效日期。将 0000-00-00 更改为 null 不是一个可行的选择，因为这样您就无法再确定日期是否应为 0000-00-00 以写回数据库。

对于 0000-00-00，我建议将日期值检查为字符串，然后将其更改为 ("y",1) 或 ("yyyy-MM-dd",0001-01-01) 或任何无效MySQL 日期（小于 1000 年，iirc）。MySQL 还有另一个“特性”：低日期自动转换为 0000-00-00。

我意识到我的建议是一团糟。但是 MySQL 的日期处理也是如此。两个kludges不能让它正确。事实是，许多程序员将不得不*永远*处理 MySQL 零日期。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-06T05:03:51.823

将以下语句附加到 JDBC-mysql 协议：

```
?zeroDateTimeBehavior=convertToNull&autoReconnect=true&characterEncoding=UTF-8&characterSetResults=UTF-8 
```

例如：

```
jdbc:mysql://localhost/infra?zeroDateTimeBehavior=convertToNull&autoReconnect=true&characterEncoding=UTF-8&characterSetResults=UTF-8 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-21T07:59:01.277

`0000-00-00 00:00:00`不要使用像or之类的假日期`0001-01-01 00:00:00`（后者应该被接受，因为它是有效日期），而是更改您的数据库架构以允许`NULL`值。

```
ALTER TABLE table_name MODIFY COLUMN date TIMESTAMP NULL 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-10T15:28:44.617

作为一个极端的转变，当您无法更改日期列或更新值时，或者当这些修改发生时，您可以使用 case/when 进行选择。

```
SELECT CASE ModificationDate WHEN '0000-00-00 00:00:00' THEN '1970-01-01 01:00:00' ELSE ModificationDate END AS ModificationDate FROM Project WHERE projectId=1; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T23:33:35.870

我努力解决了这个问题，并在上​​面接受的答案中实现了@Kushan 提供的 URL 连接解决方​​案。它在我本地的 MySql 实例中工作。但是当我将我的 Play/Scala 应用程序部署到 Heroku 时，它就不再工作了。Heroku 还将几个 args 连接到他们提供给用户的 DB URL，以及这个解决方案，因为 Heroku 使用连接“？” 之前自己设置的args，是行不通的。但是我发现了一个不同的解决方案，它似乎同样有效。

```
SET sql_mode = 'NO_ZERO_DATE'; 
```

我把它放在我的表描述中，它解决了 '0000-00-00 00:00:00' 不能表示为 java.sql.Timestamp 的问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-20T08:18:15.240

你可以试试这样

```
ArrayList<String> dtlst = new ArrayList<String>();
String qry1 = "select dt_tracker from gs";

Statement prepst = conn.createStatement();
ResultSet rst = prepst.executeQuery(qry1);
while(rst.next())
{
    String dt = "";
    try
    {
        dt = rst.getDate("dt_tracker")+" "+rst.getTime("dt_tracker");
    }
    catch(Exception e)
    {
        dt = "0000-00-00 00:00:00";
    }

    dtlst.add(dt);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-21T07:53:18.857

没有 0000 年，也没有 00 月或 00 日。我建议你试试

```
0001-01-01 00:00:00 
```

虽然在某些标准中定义了第 0 年，但它比有用的恕我直言更容易令人困惑。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-11T15:15:45.267

如果不需要，您可以从 mysql 表中的列中删除“not null”属性。当您删除“not null”属性时，不需要“0000-00-00 00:00:00”转换，问题就消失了。

至少对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-06T07:54:55.337

我知道这将是一个迟到的答案，但这是最正确的答案。

在 MySQL 数据库中，将`timestamp`默认值更改为`CURRENT_TIMESTAMP`. 如果您有带有虚假值的旧记录，则必须手动修复它们。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-03T06:36:18.770

只需将字段转换为 char

例如： cast(updatedate) as char as updatedate

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-03-27T06:45:04.863

我相信这对于在通过logstash 错误：logstash.inputs.jdbc - 执行 JDBC 查询时出现异常 {:exception=>#}

答案：jdbc:mysql://localhost:3306/database_name?zeroDateTimeBehavior=convertToNull"

或者如果你正在使用 mysql

# mysql - MySQL将日期字符串转换为Unix时间戳

> ID：11133760
> 
> 赞同：154
> 
> 时间：2012-06-21T07:50:26.507
> 
> 标签：mysql, datetime, timestamp, unix-timestamp

如何将以下格式转换为 unix 时间戳？

```
Apr 15 2012 12:00AM 
```

我从 DB 获得的格式似乎`AM`在最后。我试过使用以下方法，但没有奏效：

```
CONVERT(DATETIME, Sales.SalesDate, 103) AS DTSALESDATE,  
CONVERT(TIMESTAMP, Sales.SalesDate, 103) AS TSSALESDATE

where Sales.SalesDate value is Apr 15 2012 12:00AM 
```

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-06-21T08:10:16.353

以下是如何**转换`DATETIME`为 UNIX 时间戳**的示例：
`SELECT UNIX_TIMESTAMP(STR_TO_DATE('Apr 15 2012 12:00AM', '%M %d %Y %h:%i%p'))`

以下是如何**更改日期格式**的示例：
`SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(STR_TO_DATE('Apr 15 2012 12:00AM', '%M %d %Y %h:%i%p')),'%m-%d-%Y %h:%i:%p')`

**文档：** [`UNIX_TIMESTAMP`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_unix-timestamp) ,[`FROM_UNIXTIME`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_from-unixtime)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-21T08:07:23.870

您当然必须使用两者[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)来将您的日期转换为 MySQL 标准日期格式，并 [`UNIX_TIMESTAMP`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)从中获取时间戳。

鉴于您的日期格式，例如

```
UNIX_TIMESTAMP(STR_TO_DATE(Sales.SalesDate, '%M %e %Y %h:%i%p')) 
```

将给你一个有效的时间戳。查看[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)文档以获取有关格式字符串的更多信息。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-06T11:51:51.070

对于当前日期，只需`UNIX_TIMESTAMP()`在您的 MySQL 查询中使用。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2015-02-19T12:44:52.900

From [http://www.epochconverter.com/](http://www.epochconverter.com/)

```
SELECT DATEDIFF(s, '1970-01-01 00:00:00', GETUTCDATE())

My bad, SELECT unix_timestamp(time) Time format: YYYY-MM-DD HH:MM:SS or YYMMDD or YYYYMMDD. More on using timestamps with MySQL:

http://www.epochconverter.com/programming/mysql-from-unixtime.php 
```

# jquery - 对 Windows8 Metro App 的 Javascript 触摸事件支持

> ID：11133766
> 
> 赞同：1
> 
> 时间：2012-06-21T07:50:52.337
> 
> 标签：jquery, touch

我正在将 iPad 应用程序移植到 Windows8 Metro 应用程序，但在有限的时间内转换所有与触摸相关的事件时遇到问题。

我想知道是否有任何支持 Windows8 Metro 应用程序触摸事件的现有库，如果也使用 jQuery 会更好。仅供参考，我在 iPad 版本中使用 jQuery 触摸事件。

任何形式的支持将不胜感激。先感谢您。

# iphone - 如何确保项目中的所有 UIViewController 对象只创建一次？

> ID：11133768
> 
> 赞同：1
> 
> 时间：2012-06-21T07:50:57.083
> 
> 标签：iphone, objective-c, ios, architecture, uiviewcontroller

在我目前正在处理的项目中，创建和使用了很多`UIViewController`（某些子类的）对象。`UIViewController`相信我，这会产生很多问题。我正在研究它（一种重构）。

如我所见，大多数（那些）对象只需要初始化一次并多次使用。由于我将从现在开始从事这个项目（而且该项目持续时间很长），我如何确定每个`UIViewController`Subclass 对象一次只有一个活着。

我怀疑我是否应该制作所有的`UIViewControllers`单身人士。如果是这样，我应该如何实施。意义; 我应该在其中或在哪里初始化所有对象 `applicationDidFinishedLaunching:WithOptions`？

另一个问题是：（我认为可能不是真的）项目中的所有`UIViewController`项目都应该是单例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:55:04.917

如果你想确保项目中的所有 UIViewController 对象只被创建一次，那么唯一的方法就是 Singleton。而且您不需要在 applicationDidFinishLaunching 中初始化它们。你可以在任何地方初始化它们（通常是你需要它们的地方）。

转到正确创建单身人士的链接：http: [//cocoasamurai.blogspot.in/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.in/2011/04/singletons-your-doing-them-wrong.html)

来源：[让 UIViewController 成为单例？](https://stackoverflow.com/questions/9842221/make-uiviewcontroller-a-singleton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:54:30.800

如果您希望它们只是每个子类的一个对象，那么将它们设为单例并不是一个坏主意，

如果您将它们设为单例，请不要初始化它们，`applicationDidFinishedLaunching:WithOptions`而是在需要它们时立即初始化它们（阅读有关延迟初始化的更多信息）

但是我建议让每个 webView 成为您的 Appdelegate 的属性，这样每当您需要它们时，您都可以从 appDelegate 获取它们

# nosql - 在 CQL cassandra 中使用 Where 过滤器时出现奇怪的结果

> ID：11133770
> 
> 赞同：3
> 
> 时间：2012-06-21T07:51:06.553
> 
> 标签：nosql, cassandra, cql, nosql-aggregation

我有一个列族使用计数器作为下面的创建表命令：（查询时我使用 bigin 进行过滤）。

```
CREATE TABLE BannerCount (
KEY bigint PRIMARY KEY
) WITH
comment='' AND
comparator=text AND
read_repair_chance=0.100000 AND
gc_grace_seconds=864000 AND
default_validation=counter AND
min_compaction_threshold=4 AND
max_compaction_threshold=32 AND
replicate_on_write='true' AND
compaction_strategy_class='SizeTieredCompactionStrategy' AND
compression_parameters:sstable_compression='SnappyCompressor'; 
```

但是当我向这个列族插入数据，并选择使用`Where`命令来过滤数据结果时，我很奇怪:(就像这样：

使用查询：

```
select count(1) From BannerCount where KEY > -1

count
-------
71 
```

使用查询：

```
select count(1) From BannerCount where KEY > 0;
count
-------
3 
```

使用查询：

```
select count(1) From BannerCount ;
count
-------
122 
```

我的查询会发生什么，谁告诉我为什么会这样:( :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:32:03.107

要了解其中的原因，您应该了解 Cassandra 的数据模型。您可能`RandomPartitioner`在这里使用，因此表中的每个 KEY 值都被散列为令牌值，因此它们以分布式方式存储在您的环周围。

因此，查找键值高于 X 的所有行并不是 Cassandra 优化的查询类型。您可能应该将您的行键入其他值，然后使用宽行作为您的 bigint 值（因为列已排序）或将它们放在第二列中，并在其上创建索引。

更详细地解释一下为什么你的结果看起来很奇怪：CQL 2 隐式地将 " `KEY >= X`" 转换为 " `token(KEY) >= token(X)`"，以便查询器可以以某种有效的方式遍历所有行。所以实际上，您会找到所有*哈希*值大于X*哈希值的行。请参阅*[CASSANDRA-3771](https://issues.apache.org/jira/browse/CASSANDRA-3771)了解如何在 CQL 3 中解决这种混淆。也就是说，正确的解决方法是根据您希望在其上运行的查询。

# excel - 如何限制单元格只输入数字

> ID：11133771
> 
> 赞同：5
> 
> 时间：2012-06-21T07:51:13.540
> 
> 标签：excel, vba

我有一个 excel 文件，验证一列仅输入数字，但它的格式设置为数字小于 18，将添加前导零。但是现在第 15 位之后的数字将转换为 0 例如：“002130021300020789”，九位更改为 0。将列转换为文本后，它接受但我无法添加前导零并且无法限制输入 onlu 数字。

感谢任何帮助..提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:13:39.470

[MS 文章](http://support.microsoft.com/kb/269370)：Excel 遵循关于如何存储和计算浮点数的[IEEE 754 规范。](http://en.wikipedia.org/wiki/IEEE_floating_point)因此，Excel 仅在数字中存储 15 位有效数字，并将第 15 位之后的数字更改为零。

要获取您的数字格式并确保用户只输入数字，您可以这样做。我假设您正在验证 Range A1 中的文本。请酌情修改。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Range("A1")) Is Nothing Then
        '~~> If entered text is not a number then erase input
        If Not IsNumeric(Range("A1").Value) Then
            MsgBox "invalid Input"
            Application.Undo
            GoTo LetsContinue
        End If

        Range("A1").Value = "'" & Format(Range("A1").Value, "000000000000000000")
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**跟进**

如果您要复制和粘贴，则必须***先手动将 Range G11:G65536 格式化为 TEXT***，然后使用此代码

**SNAPSHOT（粘贴数值时）**

![在此处输入图像描述](../Images/b02105b0d9fa63b9dccdf523291aab62.png)

**SNAPSHOT（粘贴非数字值时）**

![在此处输入图像描述](../Images/e8b0afc800dbabc5e94268cddd062ed2.png)

**代码**

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Dim cl As Range

    Application.EnableEvents = False

    If Not Intersect(Target, Range("G11:G" & Rows.Count)) Is Nothing Then
        For Each cl In Target.Cells
            '~~> If entered text is not a number then erase input
            If Not IsNumeric(cl.Value) Then
                MsgBox "invalid Input"
                Application.Undo
                GoTo LetsContinue
            End If

            cl.Value = "'" & Format(cl.Value, "000000000000000000")
        Next
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:58:27.470

首先，您可以将单元格的格式更改为文本

```
Range("A1").NumberFormat = "@" 
```

然后你可以添加零

```
cellvalue2 = Format(cellvalue1, "000000000000000")  // for numeric fields

                   or 
             = TEXT(cellvalue1,"000000000000000")    // for textfields 
```

# php - 谷歌翻译无法更改语言？

> ID：11133775
> 
> 赞同：2
> 
> 时间：2012-06-21T07:51:23.420
> 
> 标签：php, jquery, css, google-translate

我刚刚在网站上添加了一个谷歌翻译。并设置了默认语言英语。我在此页面上有一个 jquery 滑块。现在发生的情况是，仅在页面重新加载时才显示文本，以描述 jquery 滑块中包含的图像。通过 GOOGLE translate 更改语言后，文本消失，jquery 滑块中只显示图像。谁能帮我弄清楚为什么会这样。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:58:09.573

谷歌翻译在翻译时会在文档中注入`span`标签。jQuery-ui 驱动的小部件（例如滑块）也使用 span 来表示按钮、图形和图标。翻译页面时，谷歌翻译添加的 span 与 jQuery-ui 元素使用的 span 冲突，通常会导致功能和外观损坏。

解决方案是将一个`notranslate`类添加到您不想翻译的元素（[ref](http://support.google.com/translate/#2641276)）。例子：

```
<div id="slider" class="notranslate"></div> 
```

```
$(function() {
    $( "#slider" ).slider();
}); 
```

# android - 活动开始时显示视图

> ID：11133778
> 
> 赞同：2
> 
> 时间：2012-06-21T07:51:50.433
> 
> 标签：android, view, dismiss

我需要在活动开始时显示某个视图，并且当用户单击`ckecked`以关闭视图时。它看起来像这样

：![在此处输入图像描述](../Images/f77255f99a277eb9238660549fe6e835.png)

有谁知道我该怎么做？欢迎任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:53:20.470

是的，您可以使用自定义[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)

只需创建一个自定义 XML 并将其膨胀到您的对话框对象中

```
Dialog dialog = new Dialog(mContext);

dialog.setContentView(R.layout.custom_dialog);

dialog.show(); 
```

然后通过调用将其关闭`dialog.dismiss();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:56:13.020

使用以下链接创建自定义对话框并在活动开始时打开它...

您需要增加边距以提供更多空间

查看自定义对话框示例 -

[自定义对话框 1](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

[自定义对话框 2](http://www.mkyong.com/android/android-custom-dialog-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:56:35.443

是的，您可以使用[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)创建窗口

请参阅这些教程以在您的 Activity 中添加 PopupWindow：

[在 Android 应用程序中使用 PopupWindow 类](http://www.mobilemancer.com/2011/01/08/popup-window-in-android/)

[使用 PopupWindow 的示例](http://android-er.blogspot.in/2012/03/example-of-using-popupwindow.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:00:08.163

您可以`RelativeLayout`为此使用 a 。当用户点击`check`时，`visibility`'upper' 布局的 必须设置为`GONE`。

# facebook - 如何获取邀请好友的用户？

> ID：11133780
> 
> 赞同：3
> 
> 时间：2012-06-21T07:51:54.817
> 
> 标签：facebook, invite, invitation, facebook-app-requests

我的网站有一个赞助系统，允许用户通过电子邮件邀请朋友（带有指向发件人的链接），因为有一些奖金（“如果 X 人因为你而订阅，你赢了这个那个”）。我想对应用程序的 Facebook 端做同样的事情，所以我使用“apprequest”方法来邀请要邀请的朋友列表，但我想知道如何获得发件人/新订户关联。看来我可以知道 A（成员）通过响应请求邀请 B（不是成员），所以我可以说“A 邀请 B，如果 B 订阅，则 A 是 B 的赞助商”。但是如果 A 和 C 邀请了 B，我怎么知道 B 都选择了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:24:54.917

当收件人接受邀请请求时，他/她将被引导至该应用程序。发生这种情况时，您应该`apprequest`使用`$_REQUEST['request_ids']`.

现在您有了 的 ID ，您将能够通过对表`apprequest`执行 FQL 查询来找出发件人。`apprequest`

```
SELECT sender_uid FROM apprequest WHERE request_id = 10150308414012941 
```

您可以从`apprequest`表中获取的其他信息包括`app_id`、`recipient_uid`、`message`和。`data``created_time`

FQL apprequest：http: [//developers.facebook.com/docs/reference/fql/apprequest/](http://developers.facebook.com/docs/reference/fql/apprequest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:34:15.567

快速阅读请求对话框文档：[https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

`data`：可选的附加数据，您可以传递用于跟踪。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

因此，在您的请求中，您可以添加`UID`发送邀请的用户，这样您就可以确定谁邀请了用户 B。

# database - 用于 MSISDN 存储的最佳数据类型和长度

> ID：11133785
> 
> 赞同：6
> 
> 时间：2012-06-21T07:52:30.760
> 
> 标签：database, storage, phone-number, sim-card, msisdn

用于存储 MSISDN（电话号码）的最佳数据类型是什么。

需要能够存储世界上任何电话号码。

有谁知道最大可能的 MSISDN 长度，包括国际拨号代码？

例如，南非的电话号码是 +27xxxxxxxxx，这会产生 11 位数字，不包括 +

+ 不必存储。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T12:20:38.733

我会使用 BIGINT。请不惜一切代价避免使用 varchar。使用 varchar 或 char 是一个非常糟糕的主意。

原因。Varchar/char 占用更多空间，查找和交叉引用更慢，索引也更大。

在设计表格时，尽量让它们保持设定的行长，事情会运行得更快。如果您必须有一些文本字段，通常最好使用 char 而不是 varchar，因为 varchar 的开销成本很高。

我在电信行业工作了 12 年，现在设计/优化 VoIP/SMS 平台。当我来修复系统时，头号杀手是无处不在的 varchars。

只是我的 0.02 价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:33:31.930

MSISDN 限制为 15 位数字，不包括前缀。

GSM 变体中的 MSISDN 构建为：

```
MSISDN = CC + NDC (or NPA ) + SN
CC = Country Code
NDC = National Destination Code
NPA = Number Planning Area
SN = Subscriber Number 
```

理想情况下，您不必保存 +。它只是代表一个出口。

只有在使用 Thuraya 拨打电话时才会使用最长的国际拨号代码，即 882 16。您可以将其保存在其他地方。

如果您计划将国际拨号代码和 MSISDN 结合使用，您可以使用 nvarchar(21) 或 varchar(21)。

# javascript - javascript保存历史记录

> ID：11133788
> 
> 赞同：2
> 
> 时间：2012-06-21T07:52:48.787
> 
> 标签：javascript, html

我有一个分页的html表单。我需要可以保存输入值历史的javascipt，用户单击下一页，当返回上一页时可以看到写了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:54:50.550

你有几个选择。例如，您可以使用[本地存储](http://www.w3schools.com/html5/html5_webstorage.asp)。

但由于旧版浏览器不支持此功能，因此您可以回退到例如 cookie 机制。查看[jstorage.info](http://www.jstorage.info)以获取为您处理此回退行为的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:23:46.987

在 javascript 中使用 Cookies 方法来存储文本框的值。 [页面刷新后保留 JavaScript 变量值？](https://stackoverflow.com/questions/11841771/keep-a-javascript-variables-value-after-a-page-refresh)此页面提供有关 cookie 的更多信息。

# jquery - JTemplate中的嵌套foreach

> ID：11133792
> 
> 赞同：0
> 
> 时间：2012-06-21T07:53:21.783
> 
> 标签：jquery, jtemplates

我需要显示具有多条记录的数据，其中每条记录在数组中还有多个值。

我正在尝试这样的代码：

```
{#foreach $T.Data as item extData=$T}

{#foreach $T.item.Items as item1}

//data
{#/for}
{#/for} 
```

它正确地为外部循环进行一次迭代，但然后停止。

有没有办法让它进入模板文件？

一种方法是创建单独的模板并包含在主模板中，但我正在寻找在 Jtemplates 中使用嵌套 for 的可能性。

问候， 拉曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:50:15.740

对于这个老问题，我认为您的模板有问题。尝试这个 ：

```
{#foreach $T as item}

{#foreach $T.item.Items as item1}

//data
{#/for}
{#/for} 
```

# c# - 如何制作 OpenFileDialog 控件中选择的文件的副本

> ID：11133793
> 
> 赞同：4
> 
> 时间：2012-06-21T07:53:26.037
> 
> 标签：c#, winforms, openfiledialog

```
// Browses file with OpenFileDialog control

    private void btnFileOpen_Click(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialogCSV = new OpenFileDialog();

        openFileDialogCSV.InitialDirectory = Application.ExecutablePath.ToString();
        openFileDialogCSV.Filter = "CSV files (*.csv)|*.csv|All files (*.*)|*.*";
        openFileDialogCSV.FilterIndex = 1;
        openFileDialogCSV.RestoreDirectory = true;

        if (openFileDialogCSV.ShowDialog() == DialogResult.OK)
        {
            this.txtFileToImport.Text = openFileDialogCSV.FileName.ToString();
        }

    } 
```

在上面的代码中，我浏览要打开的文件。我想要做的是，浏览一个文件，选择它，然后按确定。单击确定后，我想复制所选文件并为该重复文件提供 .txt 扩展名。我需要帮助来实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T08:08:54.357

```
if (openFileDialogCSV.ShowDialog() == DialogResult.OK)
{
    var fileName = openFileDialogCSV.FileName;
    System.IO.File.Copy( fileName ,Path.Combine(Path.GetDirectoryName(fileName), Path.GetFileNameWithoutExtension(fileName)+".txt"));
} 
```

上面的代码会将选定的文件复制为具有相同名称的 txt 并复制到同一目录中。

如果您需要覆盖具有相同名称的现有文件，请将另一个参数添加到 Copy 方法为 true。

[`System.IO.File.Copy(source, destination, true);`](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:57:17.820

您使用**File.Copy**如下，

```
File.Copy(openFileDialogCSV.FileName., openFileDialogCSV.FileName + ".txt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:57:51.883

试试这个

```
private void btnFileOpen_Click(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialogCSV = new OpenFileDialog();

        openFileDialogCSV.InitialDirectory = Application.ExecutablePath.ToString();
        openFileDialogCSV.Filter = "CSV files (*.csv)|*.csv|All files (*.*)|*.*";
        openFileDialogCSV.FilterIndex = 1;
        openFileDialogCSV.RestoreDirectory = true;

        if (openFileDialogCSV.ShowDialog() == DialogResult.OK)
        {
            this.txtFileToImport.Text = openFileDialogCSV.FileName.ToString();
    System.IO.File.Copy(this.txtFileToImport.Text,"C://123.txt")
        }

    } 
```

123 可以通过您想要的任何文件名进行更改。

# asp.net - 如何在 html 字符串中找到额外的关闭 div

> ID：11133797
> 
> 赞同：3
> 
> 时间：2012-06-21T07:53:46.027
> 
> 标签：asp.net, html

我有一些 html 存储在**数据库**中。我不知道存储在数据库中的html 是否有额外的关闭**div**`</div>`。我想在 html 字符串中找到额外的关闭 div。我试图找到使用**HTML 敏捷**包但没有找到实现这一目标的方法。例子：

```
<div class="readers">
    A total of 218 users are reading this article.
</div>
</div>
</div> 
```

我怎样才能找到这两个额外的关闭**div**并提取完全有效的 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:20:30.937

在呈现 html 之前使用这个纯 javascript 解析器：http: [//ejohn.org/blog/pure-javascript-html-parser/](http://ejohn.org/blog/pure-javascript-html-parser/)

您可以通过在此处粘贴代码来检查， [http](http://ejohn.org/apps/htmlparser/) ://ejohn.org/apps/htmlparser/ 它删除了多余`</div>`的 s。

您只需要将 html 传递给`HTMLtoXML`函数，如下所示：

```
HTMLtoXML(your_html); 
```

它会删除额外的结束标签。事实上，它的作用是将其转换为 xml 格式，但由于您正在处理 html 字符串，并且所有标签都应在 html 中有效，因此您可以安全地使用它。

**编辑：**您可以轻松地从 C# 文件调用 javascript 函数。有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/6775606/how-to-call-javascript-jquery-function-from-cs-file-c)问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-12T17:00:04.650

单击此处查找未闭合（悬挂）以及额外的 div 标签：[tormus](http://www.tormus.com/tools/div_checker)

# android - 使用res中的文件在libgdx android中加载纹理？

> ID：11133799
> 
> 赞同：5
> 
> 时间：2012-06-21T07:54:06.570
> 
> 标签：android, libgdx

在 LibGdx 中，纹理图像存储在资产文件夹中，并使用以下代码加载。

```
Texture texture = new Texture(Gdx.files.internal("image/someImage.jpg")); 
```

我对不同的屏幕分辨率有不同的纹理，所以我想使用 Android 的“res/”目录来保存纹理图像，这有助于加载适当的图像文件以获得适当的分辨率。

有没有办法从Android“res/”目录加载图像文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:43:53.103

您应该查看 libgdx 的 ResolutionFileResolver，并使用 AssetManager（它将为您简化一切）。

您为其提供分辨率和要使用的正确文件夹，然后 libgdx 会自动选择最匹配的文件夹。

```
Resolution[] resolutions = { new Resolution(320, 480, ".320480"),
                          new Resolution(480, 800, ".480800"),
                          new Resolution(480, 856, ".480854") };
ResolutionFileResolver resolver = new ResolutionFileResolver(new InternalFileHandleResolver(), resolutions);
manager = new AssetManager(); 
```

这是在 libgdx 中执行此操作的方法，您不应该触摸 res 文件夹。

# javascript - openDatabase 卡住了

> ID：11133801
> 
> 赞同：1
> 
> 时间：2012-06-21T07:54:13.047
> 
> 标签：javascript, html, cordova, blackberry-webworks, opendatabase

我有一个 Blackberry Web Work 项目，这是我第一次进行移动编程。我想使用window.openDatabase创建缓存数据库但是有些奇怪，我在显示这个数据库之后发出警报，但它没有显示任何东西。

我还在这个函数之前和之后放置了警报，只在这个函数之前显示警报我尝试放置try catch错误，但它仍然不显示错误消息。

需要你的帮助

谢谢

这是我的简单代码：

```
$(document).ready(function() {
    try {
        if (!window.openDatabase) {
            alert('not supported');
        } else {
            var shortName = 'mydatabase';
            var version = '1.0';
            var displayName = 'My Important Database';
            var maxSize = 65536; // in bytes
            alert("prepare to open database");
            var db = openDatabase(shortName, version, displayName, maxSize);
            alert("open Database");
            // You should have a database instance in db.
        }
    } catch (e) {
        // Error handling code goes here.
        if (e == 2) {
            // Version number mismatch.
            alert("Invalid database version.");
        } else {
            alert("Unknown error " + e + ".");
        }
        return;
    }

    alert("Database is: " + db);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T01:42:33.740

您的问题似乎与您的 try/catch 语句的定位有关。我重新排列了您的示例代码，它正在工作：

```
$(document).ready(function () {

if (!window.openDatabase) {
    alert('not supported');
} else {
    try {
        var shortName = 'mydatabase';
        var version = '1.0';
        var displayName = 'My Important Database';
        var maxSize = 65536; // in bytes
        alert("prepare to open database");
        var db = openDatabase(shortName, version, displayName, maxSize);
        alert("open Database");
        // You should have a database instance in db.
    } catch (e) {
        // Error handling code goes here.
        if (e == 2) {
            // Version number mismatch.
            alert("Invalid database version.");
        } else {
            alert("Unknown error: " + e + ".");
        }
        return;
    }

    alert("Database is: " + db);
}
}); 
```

请记住，并非所有浏览器都支持 openDatabase。FireFox 和 IE 会给你“不支持”的警报，而 Chrome 和 Safari 会显示剩余的警报。

这是测试修改后代码的 JSFIDDLE 链接[http://jsfiddle.net/sdarya/0pkvLfpv/](http://jsfiddle.net/sdarya/0pkvLfpv/)

# c# - 实体框架 4.0 出现 3032 错误

> ID：11133809
> 
> 赞同：0
> 
> 时间：2012-06-21T07:54:31.963
> 
> 标签：c#, asp.net, entity-framework, entity-framework-4, entity-framework-4.1

我已经尝试了很多解决方案，但它对我没有任何指导。以下是我的表格映射 ![在此处输入图像描述](../Images/234069b760748fbd42fa1a5bb2dfdc47.png)

我从该表中继承了一个具有以下映射的实体

![在此处输入图像描述](../Images/d9cf20c87bc13215d89bcc10e6c55745.png)

收到以下错误 ![在此处输入图像描述](../Images/9b0727a79bf42e5fc1d57da5c15acad0.png)

如果像这样在 PolicyType 中添加映射 ![在此处输入图像描述](../Images/717914655c2f8b82d9989f06d64e72d8.png)

然后得到这个错误

![在此处输入图像描述](../Images/e5baa93c27866cf6d0b1612e945d6df8.png)

知道如何摆脱这个错误，我从过去 2 天开始就被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:39:31.720

第一个例外抱怨在没有不同条件的情况下同一表中的多个实体按层次结构继承 - 确保`PolicyType`为继承树中的每个实体设置唯一过滤器（或其他列）。

第二个异常抱怨将用于条件的列映射到属性。一旦您使用任何列作为条件，您就不能将其映射到属性（条件为 的情况除外`IsNull=False`）。该列已用于映射实体类型，任何列都不能用于映射两次。

# android - eclipse中的Android布局文件没有显示真正的布局设计

> ID：11133810
> 
> 赞同：0
> 
> 时间：2012-06-21T07:54:36.087
> 
> 标签：android, xml, layout, screen

Eclipse 布局文件中的 Android 屏幕设计与设备或模拟器上的显示方式不同。当我第一次设计布局时，它可以正常工作，但突然所有布局在 Eclipse 上都损坏了，但在真实手机和模拟器上却没有

损坏的设计：

![在此处输入图像描述](../Images/afd1e4d8365762f44349fd3081b5b5d8.png) ![在此处输入图像描述](../Images/8ada4c33c87eb6e44736ba6d3e4a82b2.png)

它在手机上的显示方式：

![在此处输入图像描述](../Images/76e1d4b24eed56d24defabac122bc74a.png) ![在此处输入图像描述](../Images/d5c774a04e44d4291136679454521287.png)

那么有人遇到过这种情况吗？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:57:28.577

嘿，您使用的是绝对布局还是相对布局，然后尝试使用 LinearLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:10:07.047

这对我来说发生了很多次。在那个时候，我只是重新启动我的eclipse，然后从工作区中删除项目，然后从本地历史中恢复它。这将给出解决方案。试试这些方法。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:01:04.787

SpK 几乎回答了这个问题。

任何遇到此问题的人都可以退出 eclipse 并从任务管理器尝试在进程选项卡下找到 adb 任务，然后结束此任务。然后再次打开eclipse；它对我有用。

# asp.net-mvc-3 - 在asp.net mvc 3中使用LINQ更新特定列

> ID：11133811
> 
> 赞同：1
> 
> 时间：2012-06-21T07:54:37.423
> 
> 标签：asp.net-mvc-3, linq-to-sql

我有以下用于更新用户列的代码

```
 public void UpdateLastModifiedDate(string username)
        {
            using (AppEntities db = new AppEntities())
            {
                var result = from u in db.Users where (u.UserName == username) select u;

                if (result.Count() != 0)
                {
                    var dbuser = result.First();

                    dbuser.LastModifiedDate = DateTime.Now;
                    db.SaveChanges();
                }
            }
        } 
```

对于UpdateLastLogOutDate，UpdateLastLoginDate，我有其他2个与上述功能几乎相同的功能。因此，我决定为所有人定义单个函数来更新 Last Date，例如：

```
public void UpdateLastDate(string username, string ColumnName); 
```

在这里，我不能像这样放置 ColumnName 变量：

```
dbuser.ColumnName = DateTime.Now; 
```

有没有其他方法可以使用 LINQ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T08:05:29.620

您可以像这样定义方法：

```
public void Update(string username, Action<User> action)
{
    using (AppEntities db = new AppEntities())
    {
        var result = from u in db.Users where (u.UserName == username) select u;

        if (result.Count() != 0)
        {
            var dbuser = result.First();
            action(dbuser);
            db.SaveChanges();
        }
    }
} 
```

现在这种方法可能有不同的用法：

```
Update("john", user => user.LastModifiedDate = DateTime.Now);                
Update("smith", user => user.UpdateLastLogOutDate = DateTime.Now);
Update("admin", user => 
{
    user.LastModifiedDate = DateTime.Now;
    user.UpdateLastLogOutDate = DateTime.Now;
}); 
```

但是，如果在编译时不知道表达式，您可以查看[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T01:02:11.630

您也可以通过发送实体实例作为参数以这种方式编写代码：

```
public void UpdateLastModifiedDate(Entityclassname ent) //[like if table name is item then Entityclassname should be items etc..]
{   
  using (AppEntities db = new AppEntities())            
  {      
    var result = from u in db.Users where (u.UserName == ent.username) select u;   
    if (result.Count() != 0)         
      {                   
           var dbuser = result.First();        
             dbuser.LastModifiedDate = DateTime.Now; 
             dbuser.UpdateLastLogOutDate=ent.UpdateLastLogOutDate ;
             db.SaveChanges();    
      }
  } 
} 
```

# objective-c - 尝试实现OpenGL画笔

> ID：11133814
> 
> 赞同：1
> 
> 时间：2012-06-21T07:54:45.743
> 
> 标签：objective-c, xcode, macos, cocoa, opengl

我正在尝试为 mac os 实现 OpenGL 画笔。使用 GLPaint 作为示例。主要问题是 GLPaint 是 iOS 应用程序，我在 mac os 上需要它。不知何故，我几乎将它编辑为在 MAC OS 上工作（至少我是这么认为的），但它仍然没有运行。我想，主要问题在于*“EAGLContext”*和*“NSOpenGLContext”*或者*“OpenGL”*和*“OpenGL ES”的*差异。当我尝试使用*'renderLineFromPoint:ToPoint:* '

*   `[self renderLineFromPoint:vieta toPoint:buvusVieta];`

它向我显示错误

*   `glBindFramebuffer(GL_FRAMEBUFFER, viewFramebufferis);

带有错误代码

> 线程 1：EXC_BAD_ACCSESS（代码=1，地址=0x1508）

整个 'renderLineFromPoint:toPoint:' 代码如下

```
- (void) renderLineFromPoint:(CGPoint)pradzia toPoint:(CGPoint)pabaiga
{
static GLfloat*     vertexBuffer = NULL; 
static NSUInteger   vertexMax = 64;
NSUInteger          vertexCount = 0, count, i;

[context makeCurrentContext];
glBindFramebuffer(GL_FRAMEBUFFER, viewFramebufferis);

//Convert from point to pixel
CGFloat scale = self.contentsScale;
pradzia.x *= scale;
pradzia.y *= scale;
pabaiga.x *= scale;
pabaiga.y *= scale;

//Vertex array buffer
if(vertexBuffer == NULL)
    vertexBuffer = malloc(vertexMax * 2 * sizeof(GLfloat));

//Add points to buffer at X pixels
count = MAX(ceilf(sqrtf((pabaiga.x - pradzia.x) * (pabaiga.x - pradzia.x) + (pabaiga.y - pradzia.y) * (pabaiga.y - pradzia.y)) / kBrushPixelStep), 1);
for(i = 0; i < count; ++i) {
    if (vertexCount == vertexMax) {
        vertexMax = 2 * vertexMax;
vertexBuffer = realloc(vertexBuffer, vertexMax * 2 * sizeof(GLfloat));
    }

    vertexBuffer[2 * vertexCount + 0] = pradzia.x + (pabaiga.x - pradzia.x) * ((GLfloat)i / (GLfloat)count);
    vertexBuffer[2 * vertexCount + 1] = pradzia.y + (pabaiga.y - pradzia.y) * ((GLfloat)i / (GLfloat)count);
    vertexCount += 1;
}

//Render vertex array
glVertexPointer(2, GL_FLOAT, 0, vertexBuffer);
glDrawArrays(GL_POINTS, 0, vertexCount);

//Show buffer
glBindRenderbuffer(GL_RENDERBUFFER, viewRenderbufferis);
[context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

任何人都可以帮助我吗？

或者也许有人可以指出我类似的示例代码？

即使有人将我链接到解释诸如实时绘图等内容的教程，这也会非常有用。我对鼠标事件跟踪和注册它的点没有任何问题。我只需要以某种方式使 OpenGL 在两点之间画线或在每个注册点绘制例如圆形。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:02:07.403

我认为您不小心启用了断点。只需删除断点或禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:30:41.870

我解决了我的问题。我只需要使用

> 鼠标向下鼠标拖动鼠标向上

注册鼠标事件的函数，然后调用函数[self drawSomething]；在女巫中写了要绘制和使用的坐标女巫是由*'mouseDown' 'mouseDragged' 'mouseUp'*给我的。

# facebook-opengraph - 分数越低越好的游戏故事

> ID：11133818
> 
> 赞同：1
> 
> 时间：2012-06-21T07:54:53.857
> 
> 标签：facebook-opengraph, facebook-stream-story

我的公司正在制作一款赛车游戏，其中最好的成绩是最快的时间。Facebook 将时间发布为常规分数，分数越高越好。这当然是颠倒了一切。

有没有办法控制游戏分数在故事中的显示方式？理想情况下，我们也希望显示“秒”而不是点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:22:45.597

不，Scores API 目前仅支持分数的“越高越好”。如果您无法修改评分方案以考虑到这一点，请考虑改用 Open Graph 操作 - 您可以将出现在用户时间轴上的聚合按您需要它们排序的对象和操作的任何字段排序，

# .net - .NET Regex string negation

> ID：11133828
> 
> 赞同：0
> 
> 时间：2012-06-21T07:55:30.050
> 
> 标签：.net, regex

Just another regex question...

I have a project to replace all strong resource links in a C# project files with calls for our new translation system.

For the following two lines, i need to get only the first one. That means, I want to exclude the ResourceManager calls.

```
Resources.SomeGlobalResxFile.SomeKey
Resources.SomeGlobalResxFile.ResourceManager //mostly followed with GetString 
```

I've written the following regex, which works well but unfortunately includes the ResourceManager

```
//"Resources" must have no alfa or dot character before them -> [^\w\.]
//The link is consisted of a global key (the first parenthesis linking 
//the RESX file) and the resource key
[^\w\.]Resources\.(?<global_key>\w+)\.(?<key>\w+) 
```

What i need (or what I think i need) is the negative lookahead...those negative/positive lookaheads/lookbehinds give me headache everytime I realize I need them because I'm never sure how to place them correctly...or if it's better to use a lookahed or a lookbehind...

```
//still includes the ResourceManager
[^\w\.]Resources\.(?!ResourceManager)(?<global_key>\w+)\.(?<key>\w+)
[^\w\.]Resources\.(?<global_key>(?!ResourceManager)\w+)\.(?<key>\w+) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:00:46.267

If I understood you correctly, you are making everithing right, but misplaced the negative lookahead. It should be within a `key`:

```
[^\w\.]Resources\.(?<global_key>\w+)\.(?!ResourceManager)(?<key>\w+) 
```

# groovy - 使用 Groovy XmlParser 更新时，Xml 变为空白

> ID：11133834
> 
> 赞同：1
> 
> 时间：2012-06-21T07:56:08.543
> 
> 标签：groovy

我对 groovy 很陌生，并寻求您的帮助。我想读取一个 delta xml 文件并根据 name 属性更新主 xml 文件。两个 xml 文件具有相同的结构。我正在尝试更新主 xml 文件中的属性值。但是主文件一旦变为空白，文件就会更新。我不确定我错在哪里。

下面是xml结构：

```
<item-descriptor name="user" cache-mode="simple" item-cache-size="3000" query-cache-size="1000"  item-cache-timeout="900000"  query-expire-timeout="60000" />
<item-descriptor name="contactInfo" cache-mode="simple" item-cache-size="10000" query-cache-size="1000"  item-cache-timeout="900000"  query-expire-timeout="60000" /> 
```

下面是这个的代码：

```
def templatexmlConfig = new XmlParser().parse(templateConfigFile)
def basexmlConfig = new XmlSlurper().parse(baseConfigFile)
def templateItemDesNode = templatexmlConfig.'item-descriptor'
def baseItemDesNode=basexmlConfig.'item-descriptor'
templateItemDesNode.each()
{
    Map bindings=[:]
    def nameAttr=it.attribute('name')
    it.attributes().each{attrName,attrValue->
    if(!attrName.equals('name'))
    {
             bindings.put(attrName,attrValue)
    }}

    if(baseItemDesNode.find{ it.@name.text().equals(nameAttr)}.size()!=0)
    {   
             bindings.each
             {   
                 def a=it.key
                 def v=it.value
             baseItemDesNode.find{ it.@name.text().equals(nameAttr)}.@'a'="${v}"                                             }

    }                           
}
new XmlNodePrinter(new PrintWriter(outputFile)).print(basexmlConfig) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:30:15.367

好的，给定两个示例 xml 文档：

```
def templateXml = '''<xml>
                    |  <item-descriptor name="a" cache-mode="r1" item-cache-size="1"/>
                    |  <item-descriptor name="b" cache-mode="r2" item-cache-size="2" new-attr="tim"/>
                    |  <item-descriptor name="z" cache-mode="r3" item-cache-size="3"/>
                    |</xml>'''.stripMargin() ;
def baseXml = '''<xml>
                |  <item-descriptor name="b" cache-mode="o1" item-cache-size="10"/>
                |  <item-descriptor name="c" cache-mode="o2" item-cache-size="11"/>
                |  <item-descriptor name="a" cache-mode="o3" item-cache-size="12"/>
                |</xml>'''.stripMargin() 
```

我们可以解析这些（两者都使用 XmlParser，你有一个解析器，另一个有 slurper）：

```
def templatexmlConfig = new XmlParser().parseText( templateXml )
def basexmlConfig = new XmlParser().parseText( baseXml ) 
```

然后获取`item-descriptor`节点（就像你拥有的那样）

```
def templateItemDesNode = templatexmlConfig.'item-descriptor'
def baseItemDesNode = basexmlConfig.'item-descriptor' 
```

然后，遍历模板`item-descriptors`，生成非名称属性的映射（使用`findAll`比循环更容易），并用`baseXml`相同的名称替换节点上的所有节点：

```
templateItemDesNode.each() { tidn ->
  Map bindings = tidn.attributes().findAll { it.key != 'name' }
  def nameAttr = tidn.@name
  baseItemDesNode.find { b -> b.@name == nameAttr }?.with { node ->
    bindings.each { a, v ->
      node.@"$a" = v
    }
  }
} 
```

对于这个易于运行的示例，只需打印出 Xml：

```
println new StringWriter().with { sw ->
  new XmlNodePrinter( new PrintWriter( sw ) ).print(basexmlConfig)
  sw.toString()
} 
```

运行时，上面的内容会打印出来：

```
<xml>
  <item-descriptor name="b" cache-mode="r2" item-cache-size="2" new-attr="tim"/>
  <item-descriptor name="c" cache-mode="o2" item-cache-size="11"/>
  <item-descriptor name="a" cache-mode="r1" item-cache-size="1"/>
</xml> 
```

显然，对于您的工作代码，您需要返回使用`parse`on`XmlParsers`来解析您的文件，而不是我在这里拥有的字符串，并将输出更改回写入文件...

希望能帮助到你！

# iphone - Iphone：ScrollView 强制到底部

> ID：11133837
> 
> 赞同：0
> 
> 时间：2012-06-21T07:56:14.120
> 
> 标签：iphone, objective-c, ios, xcode, scrollview

我希望 ScrollView 从底部开始。有什么方法吗？

我已经尝试过了，但我无法回到顶部......

```
CGPoint bottomOffset = CGPointMake(0, [yourScrollView contentSize].height);

[yourScrollView setContentOffset:bottomOffset animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:14:45.280

你应该打电话

```
CGPoint bottomOffset = CGPointMake(0, [yourScrollView contentSize].height); 
[yourScrollView setContentOffset:bottomOffset animated:NO]; 
```

在 viewDidLoad 中。并检查`yourScrollView`它是否应该正确连接到它的 IBOutlet，或者从它接收`[self.view viewWithTag:];`并`contentSize`应该设置为`UIScrollView`内容大小，然后再尝试更改`contentOffset`.

顺便说一句，从一开始就让它在底部，你应该设置动画：NO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:51:04.933

我认为你必须使用

```
[self.catScroll scrollRectToVisible:CGRectMake(fr.frame.origin.x,0 , self.catScroll.frame.size.width, self.catScroll.frame.size.height) animated:NO]; 
```

`catScroll`滚动视图在哪里

或使用将委托方法`setContentOffset:`中的此属性更改为新的 contentoffset`scrollView``scrollViewDidEndDecelerating:`

我认为这肯定会对你有所帮助。

快乐编码:)

# iphone - 如何避免多次分配 CLLocationManager 实例？

> ID：11133843
> 
> 赞同：0
> 
> 时间：2012-06-21T07:56:50.400
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我在我的应用程序中使用核心位置框架并在 didUpdateToLocation 方法中向服务器发送更新的位置，我分配 CLLocationManager 实例的视图是登录后的第二个视图，从登录视图调用此视图并在 dealloc 方法中释放 CLLocationManager 但每个当我来自登录屏幕时，didUpdateToLocation 方法调用两次和三次，具体取决于我来自登录视图的次数，所以问题是什么，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:07:42.233

我通常只使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)来处理这类事情。只需定义一个类方法（在方法定义上使用 + vs a -）。下面是一个单例定义的例子：

```
+(id)sharedLocationManager
{
static BCLocationManager *sharedLocationManager;
@synchronized(self)
{
    if (!sharedLocationManager)
    {
        sharedLocationManager = [[BCLocationManager alloc] init];
    }

    return sharedLocationManager;
}
return sharedLocationManager;
} 
```

基本上，您定义了类的静态实例，并且仅在它不存在时才对其进行初始化。使用单例，您永远不会访问实例 init 函数。始终将单例访问器的结果分配给适当的指针，如下所示：

```
BCLocationManager * testInstance = [BCLocationManager sharedLocationManager]; 
```

现在您所要做的就是包含适当的 header.h 并且您的应用程序中的每个人都可以看到您的位置管理器的单个实例。只要您不使用 init 实例，就永远不会创建多个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:05:36.600

如果您想避免多次分配 CLLocationManager 实例，请将实例定义为您的`appDelegate`

每次您需要获取此实例时，您都会这样做

```
YouAppDelegate *appDelegate = (YouAppDelegate *)[UIApplication sharedApplication].delegate;
appDelegate.yourLocationInstance; 
```

# java - jersey-client 在 ClientResponse.getLastModified() 中抛出 NPE

> ID：11133844
> 
> 赞同：1
> 
> 时间：2012-06-21T07:56:50.767
> 
> 标签：java, rest, jersey, rest-client

我使用 jersey-client 来使用 REST 服务。我需要请求的实体和 Last-Modified 标头。

所以我做了以下事情：

```
ClientResponse response = webResource.get(ClientResponse.class);
Person person = response.getEntity(Person.class); 
```

这样可行。我得到响应，我可以将实体（即 XML）编组到我的 POJO 中。当我调试并查看响应的标头时，我看到有一个 Last-Modified 标头集。

但是当我尝试通过检索日期时

```
response.getLastModified(); 
```

我在 URLConnectionClientHandler 的某个地方得到了一个 NPE。

有谁知道我做错了什么？

**编辑：**根据要求跟踪

```
java.lang.NullPointerException: null
at com.sun.jersey.api.client.ClientResponse.getLastModified(ClientResponse.java:647) ~[jersey-client-1.12.jar:1.12]
at a.o.u.user.dao.impl.uds.PersonenUdsClient.getPerson(PersonenUdsClient.java:103) ~[um-user-2.5.0-Beta1-SNAPSHOT.jar:na]
at a.o.u.user.dao.impl.UserDaoUdsImpl.mergeWithUdsUser(UserDaoUdsImpl.java:282) ~[um-user-2.5.0-Beta1-SNAPSHOT.jar:na]
at a.o.u.user.dao.impl.UserDaoUdsImpl.getUserWithEmail(UserDaoUdsImpl.java:124) ~[um-user-2.5.0-Beta1-SNAPSHOT.jar:na]
at ... 
```

**编辑：**正如 npe 建议的那样，我深入研究了代码。我想我找到了问题所在。除了 jersey-client 之外，我在类路径中也有 cxf。jersey 和 cxf 都提供了一个名为*RuntimeDelegateImpl*的类。但是 CXFs 版本没有 DateHeaderDelegate。我认为 RuntimeDelegateImpl 的错误版本（CXF）*被*采用。

到目前为止，我还没有找到如何明确设置要使用的*RuntimeDelegateImpl*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:26:16.867

[*使用来源，卢克*](http://search.maven.org/remotecontent?filepath=com/sun/jersey/jersey-client/1.12/jersey-client-1.12-sources.jar)

1.12 版的实现`ClientResponse#getLastModified()`如下所示：

```
/*639*/  /**
/*640*/   * Get the last modified date.
/*641*/   *
/*642*/   * @return the last modified date, otherwise <code>null</code> if not present.
/*643*/   */
/*644*/  public Date getLastModified() {
/*645*/      String d = getHeaders().getFirst("Last-Modified");
/*646*/  
/*647*/      return (d != null) ? dateDelegate.fromString(d) : null;
/*648*/  } 
```

你`NullPointerException`在第 647 行得到一个，所以看起来，`dateDelegate`就是`null`. 现在，`dateDelegate`对象在第 321 行初始化，如下所示：

```
/*321*/  protected static final HeaderDelegate<Date> dateDelegate =
/*322*/          RuntimeDelegate.getInstance().createHeaderDelegate(Date.class); 
```

现在，该字段是`final`，因此在此初始化之后无法更改它 - 这意味着从一开始就 - 这意味着`dateDelegate`您**有某种配置问题**并且未创建委托。`null`

 **此外，委托是在`AbstractRuntimeDelegate`类中创建的（[此处为 1.12 的源代码](http://search.maven.org/remotecontent?filepath=com/sun/jersey/jersey-core/1.12/jersey-core-1.12-sources.jar)），如下所示：

```
/* 88*/  map.put(Date.class, _createHeaderDelegate(Date.class)); 
```

这个兔子洞越来越深，所以我要在这里停下来，但你知道路。

最后但并非最不重要的一点 - 调试器是你的朋友，我的朋友 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:26:48.967

To make it a wrap.

The problem is that I have both jersey-client and cxf in the classpath. Both RuntimeDelegateImpl. But CXFs version does not feature a DateHeaderDelegate. The wrong version (CXFs) of RuntimeDelegateImpl is taken.

I solved the issue by retrieving the Last-Modified Header 'manually':

```
private Date getLastModified(ClientResponse response){
    String lastModifiedString = response.getHeaders().getFirst(
            "Last-Modified");
    if (StringUtils.isEmpty(lastModifiedString)) {
        LOG.warn("Expect to get Last-Modified header when retrieving a Person by pnr "
                + "but there is none.");
        return null;
    } else {
        try {
            // format is Thu, 21 Jun 2012 08:00:42 GMT
            return new SimpleDateFormat(
                    "EEE, dd MMM yyyy HH:mm:ss zzz", Locale.US)
                    .parse(lastModifiedString);
        } catch (ParseException e) {
            LOG.error("Could not parse Last-Modified date "
                    + e.getMessage());
            return null;
        }
    }
} 
```

Thanx to npe for the hints.**

# html - div 和 img 浮动的 CSS 对齐问题：IE7 中的左侧

> ID：11133845
> 
> 赞同：2
> 
> 时间：2012-06-21T07:57:08.223
> 
> 标签：html, css, internet-explorer-7

我必须在两列中显示 4 条带有图像、日期和出版标题的新闻 - 左列用于图像，右列用于日期和标题。

尝试使用 dl 和现在使用 dl 类的 div 来实现排列的不同方法，仅在 FF 和 IE8 和 9 中有效。

IE7 不应用我想要的对齐方式。

安排[jsfiddle](http://jsfiddle.net/a3JCS/1/)进行测试 - 当结果窗口比平时更宽时，问题会显示出来。

也将接受有关显示新闻的更好 HTML 结构的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:14:30.877

这是工作版本[检查更新的jsfiddle](http://jsfiddle.net/a3JCS/8/)

请在下面找到 css 和 HTML 结构的变化：-

**CSS：**

```
#section{
    width: 560px;
    float: left;
    font-size: 0.8em;
    position: relative;
}
.dl .dd h4{
    font-size: 0.9em;
 }
.dl h4 a{
    text-decoration: none;
    font-weight: normal;
}
.dl h4 a:hover{
    text-decoration: underline;
}
.dl .dt{
    float: left;
    width: 100px;
    height: 75px;
    font-size: 0.5em;
    margin: 0 0 5px 0;
}
.dl .dd{
    width: 480px;
    float: right;
}
.dl .wrapper { /* new element added */
    overflow: hidden;
    height: 100%;
    padding: 10px 0 5px;
}
.dl .dd p{
    font-size: 0.7em;
    font-style: italic;
}

/* No need of this code
.dl:after,
.dl .dt:after,
.dd:after,
.dl .dt img:after
{
    content:"";
    height: 0;
    clear: both;
    display: block;
}
*/ 
```

**HTML：**

```
<div class="dl">
  <div class="wrapper">
      <div class="dt"><img src="/news_pics/16.jpg" alt="pic 1" width="100px" height="75px"/> </div>
      <div class="dd"><p>12 06 2012</p><h4><a href="#">News 1 title khfk ds khf kdsfkdsh fkkds hfkhdsjkf kj kjs hdfkjdsk kds k hfkjhds k ks hdfkjhds fjk hdsk hfkjds kgjkl f dflgk dflkdf lk lf jdl glklk dllgdldl l dfljlgkjdflgkjdf</a></h4></div>
  </div>   
  <div class="wrapper">
      <div class="dt"><img src="/news_pics/16.jpg" alt="pic 2" width="100px" height="75px"/></div>
      <div class="dd"><p>21 05 2012</p><h4><a href="#">News 2 title</a></h4></div>
  </div>
  <div class="wrapper">
      <div class="dt"><img src="/news_pics/16.jpg" alt="pic 3" width="100px" height="75px"/></div>
      <div class="dd"><p>19 05 2012</p><h4><a href="#">News 3 title title khfk ds khf kdsfkdsh fkkds hfkhdsjkf kj kjs hdfkjdsk kds k hfkjhds k ks hdfkjhds fjk hdsk hfkjds kgjkl f dflgk dflkdf lk lf jdl glklk dllgdldl l dfljlgkjdflgkjdf</a></h4></div>
  </div>
  <div class="wrapper">    
      <div class="dt"><img src="/news_pics/16.jpg" alt="pic 4" width="100px" height="75px"/></div>
      <div class="dd"><p>8 05 2012</p><h4><a href="#">News 4 title</a></h4></div>
  </div> 
```

**编辑：**

这`<div class="wrapper"`有助于`float`在包括 IE6 和 7 在内的所有浏览器中正确清除和显示元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:11:21.303

```
<div style="clear:both"></div> 
```

将它放在每个项目之间可以为 IE7 修复它。或者从 html5 样板 [http://html5boilerplate.com/中获取 clearfix](http://html5boilerplate.com/)

或者，您可以将每个 dt/dd 对包装在一个 div 中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:30:46.467

```
enter code here 
```

试试这个html：

```
<ul class="ul">
    <li class="li">
        <img src="/news_pics/16.jpg" class="thumb" width="100" height="75">
        <div class="text">
            <p class="date">
                12 06 2012
            </p>
            <h4>
                <a href="" class="title">
                    News 1 title khfk ds khf kdsfkdsh fkkds hfkhdsjkf kj kjs hdfkjdsk kds k hfkjhds k ks hdfkjhds fjk hdsk hfkjds kgjkl f dflgk dflkdf lk lf jdl glklk dllgdldl l dfljlgkjdflgkjdf
                </a>
            </h4>
        </div>
    </li>
    <li class="li">
        <img src="/news_pics/16.jpg" class="thumb" width="100" height="75">
        <div class="text">
            <p class="date">
                12 06 2012
            </p>
            <h4>
                <a href="" class="title">
                    News 1 title khfk ds khf kdsfkdsh fkkds hfkhdsjkf kj kjs hdfkjdsk kds k hfkjhds k ks hdfkjhds fjk hdsk hfkjds kgjkl f dflgk dflkdf lk lf jdl glklk dllgdldl l dfljlgkjdflgkjdf
                </a>
            </h4>
        </div>
    </li>
</ul> 
```

和CSS

```
.ul {
margin: 0;
padding: 0;
list-style: none;
}
.li {
overflow: hidden;
margin-bottom: 5px;
}
.thumb {
float: left;
width: 100px;
height: 75px;
}
.text {
margin-left: 120px;
}
.title {
font-size: 0.9em;
text-decoration: none;
font-weight: normal;
}
.title:hover {
text-decoration: underline;
} 
```

在 jsfiddle [http://jsfiddle.net/sgMKy/](http://jsfiddle.net/sgMKy/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:16:36.990

为了您的快速参考，我把[小提琴](http://jsfiddle.net/a3JCS/9/)结帐这个

存在的问题是您放置该部分`width 560px;`，其中的内容将超过限制，从而发生问题。和`<p>`宽度最大的标签

变化：

```
.dl .dd p{
   width: 210px; //changed
    font-size: 0.7em;
    font-style: italic;
} 
```

对于每个带有主 div 的 dd,dt div surrond

```
 <div class="fix_float">
   <dt>
      date content
   </dt>
   <dd>
        text content
   </dd>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T08:06:13.910

`:before`并且`:after`不在 IE7 中工作

请参阅[:after 和 :before IE 7 的 css 伪元素 hack](https://stackoverflow.com/questions/4181884/after-and-before-css-pseudo-elements-hack-for-ie-7)

# java - Android JSON解析英镑符号出现？

> ID：11133851
> 
> 赞同：1
> 
> 时间：2012-06-21T07:57:51.497
> 
> 标签：java, android

我有一个 JSON 文件，其中包含一个磅符号。此 json 是从临时存储在手机上的文件中提取的。它将来自服务器，但暂时我只是将它存储在手机上。我将 JSON 文件转换为输入流并使用一种方法将其转换为这样的字符串

```
Resources res = getResources();
String sJsonVariables = iStream_to_String(res
                .openRawResource(R.raw.widgvariables)); 
```

iStream_to_String 方法是这样的

```
public String iStream_to_String(InputStream is) {
        BufferedReader rd = new BufferedReader(new InputStreamReader(is), 4096);
        String line;
        StringBuilder sb = new StringBuilder();
        try {
            while ((line = rd.readLine()) != null) {
                sb.append(line);
            }
            rd.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
        String contentOfMyInputStream = sb.toString();
        return contentOfMyInputStream;
    } 
```

我已经尝试使用 Log.v 打印出 json 来测试它是否可以打印出来。除了磅符号外，一切都打印得很好。我已经尝试了几种不同的编码方式

```
byte []b = sJsonVariables.getBytes();

        String s1 = new String(b, "UTF-8");
        String s2 = new String(b, "ASCII");
        String s3 = new String(b, "Cp1252");
        String s4 = new String(b, "ISO8859_1"); 
```

但是，它们都不会打印出英镑符号，它要么是黑色问号，要么是其他一些奇怪的符号。有谁知道我做错了什么，以及如何让这个符号正确打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:02:18.620

将其与 try catch`byte []b = sJsonVariables.getBytes("UTF8");`和 String 一起使用`String s3 = new String(b, "Cp1252");`

# multithreading - 根据文件大小对java中的线程进行负载均衡

> ID：11133857
> 
> 赞同：0
> 
> 时间：2012-06-21T07:58:00.293
> 
> 标签：multithreading, load-balancing, file-processing

嗨，我需要通过 java 中的多线程处理大量文件。这些文件将是随机大小（最小：100 MB，最大：1.5GB）。配置是我最多只能创建 8 个线程，每个线程将从源目录分配 8 个文件进行处理。问题有时是巨大的文件被分配给单个线程本身，从而降低了性能。我想知道是否无论如何都可以将文件分配给线程，以便所有线程都将处理相同数量的大小。我的意思是我想根据文件大小平衡线程之间的负载。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:28:42.713

您甚至不应该从单个机械磁盘执行并行 I/O，因为它实际上比单线程 I/O 慢。这里有很多答案可以解释这一点。基本上磁盘的机械头每次都需要旋转以寻找下一个读取位置。这是一项昂贵的操作。如果您并行执行此操作，那么您只是在每个线程轮到运行时弹跳头部。

最好的方法是使用单个生产者线程逐个顺序读取文件，并使用工作线程池并行处理它们。

# qt - QUdpSocket 和 QThread

> ID：11133859
> 
> 赞同：1
> 
> 时间：2012-06-21T07:58:01.667
> 
> 标签：qt, sockets, qthread

据我从文档中了解到，QUdpSocket 是异步的，但是，当发出信号 readyRead() 时，仍然在 UI 线程上执行从套接字读取。那是对的吗？从性能的角度来看，这安全吗？我应该在另一个线程中读取套接字的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:47:40.607

一切都取决于您是否需要处理大量数据。我已经使用了 TCP 套接字，其平均传输速度约为 20mbps，而不会阻塞 gui。最好的事情是自己检查。我认为您不必将套接字移动到其他线程

# opencl - 仅 clCreateFromGLTexture 的链接错误

> ID：11133866
> 
> 赞同：0
> 
> 时间：2012-06-21T07:58:11.117
> 
> 标签：opencl

我试图让 OpenCL 渲染到 2D 纹理。我第一次遇到函数[clCreateFromGLTexture2D](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateFromGLTexture2D.html)。我写进去了，但是我去编译的时候发现没有定义。我最终在“cl_gl.h”中找到了它：

```
#ifdef CL_USE_DEPRECATED_OPENCL_1_1_APIS
#warning CL_USE_DEPRECATED_OPENCL_1_1_APIS is defined. These APIs are unsupported and untested in OpenCL 1.2!
    extern CL_API_ENTRY cl_mem CL_API_CALL
    clCreateFromGLTexture2D(cl_context      /* context */,
                            cl_mem_flags    /* flags */,
                            cl_GLenum       /* target */,
                            cl_GLint        /* miplevel */,
                            cl_GLuint       /* texture */,
                            cl_int *        /* errcode_ret */) CL_EXT_SUFFIX__VERSION_1_1_DEPRECATED;

    extern CL_API_ENTRY cl_mem CL_API_CALL
    clCreateFromGLTexture3D(cl_context      /* context */,
                            cl_mem_flags    /* flags */,
                            cl_GLenum       /* target */,
                            cl_GLint        /* miplevel */,
                            cl_GLuint       /* texture */,
                            cl_int *        /* errcode_ret */) CL_EXT_SUFFIX__VERSION_1_1_DEPRECATED;
#endif /* CL_USE_DEPRECATED_OPENCL_1_2_APIS */ 
```

所以，我在“cl_gl.h”的其他地方看了看，我找到了[clCreateFromGLTexture](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateFromGLTexture.html)。为了向前兼容，我将其写入代码中。但是，函数 clCreateFromGLTexture 会导致 LNK2019（未解决的外部问题）。我觉得这很可疑，因为我可以在使用[clCreateFromGLBuffer](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateFromGLBuffer.html)和[clCreateFromGLRenderbuffer](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateFromGLRenderbuffer.html)时进行编译，而且这两者也在“cl_gl.h”中。

所以，我的问题是：为什么 clCreateFromGLTexture 没有定义，而在同一个模块中它旁边的函数有定义？我目前正在链接“OpenCL.lib”。还有什么我需要的吗？我什么也没看到。这是图书馆本身的问题吗？

[编辑：clGetDeviceInfo(device_id,CL_DEVICE_IMAGE_SUPPORT,sizeof(cl_bool),&result,NULL); 是 CL_TRUE，值得。]

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:56:14.250

尝试将 OpenCL 库更新到最新版本 ( `1.2`)。

`clCreateFromGLTexture`被定义为 OpenCL`1.2`标准的一部分，而`clCreateFromGLTexture2D`和`clCreateFromGLTexture3D`是 OpenCL 的一部分`1.0`。如果您的 OpenCL 库不是最新的，您将收到未定义的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:52:57.780

即使我遇到了这个错误，我也很难修复它。我猜你正在使用VS2010。这可能由于以下原因而发生：

1.  您没有在项目属性 -> 链接器 -> 输入 -> 附加库依赖项中包含对库的引用

2.  您已将解决方案编译为 32 位并使用 64 位库文件，反之亦然。

一探究竟。

# c - 主程序中未使用的动态库的包装函数（ld -wrap）

> ID：11133867
> 
> 赞同：0
> 
> 时间：2012-06-21T07:58:17.233
> 
> 标签：c, linker, wrapper

我想在动态库中围绕 pthread_create 编写一个包装器。我使用 ld -wrap 链接我的 libwrap.so 文件。

当我用“-Wl,--wrap,pthread_create -lwrap”链接我的应用程序时，它工作正常，我的函数被调用而不是真正的函数。

如果我只使用“-lwrap”，那么只有 libwrap.so 的函数使用我的函数，应用程序中的函数使用真正的函数。

有没有办法让应用程序使用动态库的包装函数而不用“-Wl,--wrap,pthread_create”链接应用程序？

谢谢，弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:09:54.563

> 有没有办法让应用程序使用动态库的包装函数而不用“-Wl，--wrap，pthread_create”链接应用程序

是的，但是包装函数不是正确的方法。

你想要的是一个插入器库。[在此处](http://developers.sun.com/solaris/articles/lib_interposers.html)阅读有关库插入器的信息。

# php - 求一个月的真实周数

> ID：11133870
> 
> 赞同：1
> 
> 时间：2012-06-21T07:58:28.760
> 
> 标签：php, week-number

我应该考虑一个月中的周数它包含的星期一数吗？无论如何，我需要的最终输出是这样的：

1 月 - 第 1 周 1
月 - 第 2 周 1 月 - 第 3 周 1 月 - 第 4 周 2
月
-
第 5
周 2 月 - 第 6
周 2 月 - 第 7 周
2 月 - 第 8 周
...................

我搜索了但我没有找到这个问题的好答案。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:23:39.793

这可以满足您的要求：

```
for($i = 1; $i <= 12; $i++)
{
    $timestamp = mktime(0, 0, 0, $i, 1, 2012);
    while(date('n', $timestamp) == $i)
    {
        echo date('F', $timestamp).' - Week '.  date('W', $timestamp)."<br>";
        $timestamp = strtotime("+1 week", $timestamp);
    }   
} 
```

# memory-management - 如何正确处理 QLPreviewController？

> ID：11133874
> 
> 赞同：2
> 
> 时间：2012-06-21T07:58:38.037
> 
> 标签：memory-management, memory-leaks, qlpreviewcontroller

我正在使用 QLPreviewController 来预览文件。但是当我打开大文件时，内存会增长并且不处理。

例如：iPhone 4s，打开 6 Mb txt 和 5Mb txt 后 - 应用程序将冻结或崩溃。查看 Instruments - 使用的内存 230Mb。

我在课堂上有字段：

```
private QLPreviewController previewController;

    public void OpenAnotherFile()
    {
    if (previewController != null) {
        previewController.DataSource.Dispose ();
        previewController.DismissViewController (false, null);
    } else {
        previewController = new QLPreviewController ();
    }
    // loading new file here                
    previewController.DataSource = new QLPreview ();

    previewController.ReloadData ();
    view.AddSubview (previewController.View);
    } 
```

此变体没有重新创建 previewController，但我尝试了 previewController.Dispose() 和重新创建。尝试调用 GC.Collect() - 没有。

我尝试了很多情况（处理数据源、视图等），但内存没有被清除。

我建议-我自己不对。但是哪里？。

请帮忙。谢谢。

# php - 如何使用“.htaccess”添加“.php”扩展名

> ID：11133880
> 
> 赞同：-2
> 
> 时间：2012-06-21T07:59:11.000
> 
> 标签：php, .htaccess

> **可能重复：**
> [如何使用 .htaccess url 重写添加 .php 扩展名？](https://stackoverflow.com/questions/8799342/how-to-add-php-extension-using-htaccess-url-rewriting)

我想将 .php 扩展名添加到 url。使用 ."htaccess" 我该怎么做我当前的 URL 是

```
http://www.abc 
```

我想把它改成

```
http://www.abc.php 
```

.htaccess 的内容是

```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

它位于我的应用程序的根目录中 问题[已经存在](https://stackoverflow.com/questions/8799342/how-to-add-php-extension-using-htaccess-url-rewriting)，但对我不起作用。我正在使用 xampp 服务器运行 php

我不知道如何使用htaccess。我想知道

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T08:07:25.573

此代码将所有 .html 文件重写为 .php

```
RewriteRule (.*)\.html$ $1.php 
```

# asp.net - asp.net fileupload 控制大文件的超时

> ID：11133886
> 
> 赞同：3
> 
> 时间：2012-06-21T07:59:45.347
> 
> 标签：asp.net, file-upload, web-config

通过asp.net`ERR_CONNECTION_RESET`文件上传控件上传一个相当大的文件（90 MB）大约需要 2 分钟。

在共享主机环境中对此进行测试，因此我不确切知道对我执行了哪些策略。

我认为 web.config 设置就足够了：

```
 <httpRuntime requestValidationMode="2.0" maxRequestLength="1000000" executionTimeout="45000" /> 
```

我应该查看其他异步文件上传控件吗？我是否缺少 web.config 设置？对于慢速连接上的大文件，上传控件是否根本不够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:21:03.473

重置连接并将最大请求长度提高到一定程度的原因可能有很多，但您对异步文件上传器的看法是正确的。最重要的部分是使用一个将文件“分块”成更小的部分，从而避免请求限制等。我在 plupload 方面有最好的经验：

[http://www.plupload.com/](http://www.plupload.com/)

这是一些用于接收文件的代码（这是 MVC，但您可以重构以在 .NET 经典中使用处理程序）：

```
 [HttpPost]            
        public ActionResult UploadImage(int? chunk, int? chunks, string name)
        {
            var fileData = Request.Files[0];

            if (fileData != null && fileData.ContentLength > 0)
            {
                var path = GetTempImagePath(name);
                fileSystem.EnsureDirectoryExistsForFile(path);

                // Create or append the current chunk of file.
                using (var fs = new FileStream(path, chunk == 0 ? FileMode.Create : FileMode.Append))
                {
                    var buffer = new byte[fileData.InputStream.Length];
                    fileData.InputStream.Read(buffer, 0, buffer.Length);
                    fs.Write(buffer, 0, buffer.Length);
                }
            }

            return Content("Chunk uploaded", "text/plain");
        } 
```

# c - 在 Linux 上使用信号的 IPC

> ID：11133887
> 
> 赞同：6
> 
> 时间：2012-06-21T07:59:50.320
> 
> 标签：c, linux, signals, ipc

可以`IPC (inter process communication)`使用信号捕获和信号提升吗？

我做了两个程序。在第一个程序中我处理了信号，而在另一个程序中我只是提出了我想在另一个程序中处理的信号。我工作得很好，但我想使用信号在这两个程序之间进行通信，并且还想用这个 raise 信号发送一些数据字节。我怎样才能做到这一点？

我也想用这个信号传递消息。我可以做吗？有可能的？

另外，使用信号的 IPC 机制的优缺点是什么？

以下是我的两个程序的工作代码。这样做，我只能发出信号并捕获信号，但我想将数据从一个程序传递到另一个程序。

在第二个程序中，我使用了第一个程序的进程 ID。我怎样才能使它动态。？

**第一个程序：**

```
/* Example of using sigaction() to setup a signal handler with 3 arguments
 * including siginfo_t.
 */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <string.h>

static void hdl (int sig, siginfo_t *siginfo, void *context)
{
    printf("sig no = %d \n", sig);
    if(sig == SIGINT)
        exit(0);
    printf ("Sending PID: %ld, UID: %ld\n",
            (long)siginfo->si_pid, (long)siginfo->si_uid);
}

int main (int argc, char *argv[])
{
    struct sigaction act;

    sigemptyset(&act.sa_mask);

    act.sa_sigaction = &hdl;
    act.sa_flags = SA_SIGINFO;

    if (sigaction(SIGUSR1, &act, NULL) < 0) {
        perror ("sigaction SIGUSR1");
        return 1;
    }
    if (sigaction(SIGINT, &act, NULL) < 0) {
        perror ("sigaction SIGINT");
        return 1;
    }

    while (1)
    {
        sleep(1);
    }

    return 0;
} 
```

**第二个节目**

```
#include  <stdio.h>
#include  <signal.h>

void  main(void)
{

   while (1)
    {
        sleep(1);
        kill(11558, SIGUSR1);
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T09:06:08.560

[信号](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)旨在提供对进程的基本控制形式，而不是作为 IPC 机制。信号在用作其他任何东西时有几个问题：

*   很多系统调用会被信号打断，需要特殊处理。

*   因此，大量的代码都不是信号安全的。

*   信号没有任何类型的数据内容，除了它们自己。这使得它们作为消息传递方法几乎毫无用处。

*   在信号处理程序中你能做的只有这么多。

*   最重要的是，相同类型的后续信号不会排队 - 它们被*合并*到一个实例中。

*   更重要的*是，不能保证信号的传递顺序与它们生成的顺序相同*。从手册页：

    > 相反，如果一个进程有多个标准信号待处理，**则它们的传递顺序是未指定的**。

*从理论上讲*，您可能可以使用多个来回传递的信号建立某种通道，其中一些信号的作用类似于某种确认，但没有理智的人会想要尝试这样的事情。您不妨改用烟雾信号...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T08:07:31.937

> 可以使用信号捕获和信号引发进行 IPC（进程间通信）吗？

是和不是。仅考虑信号，您可以将信号发送到另一个进程，但除了信号之外，您不能发送任何其他内容。

> 我也想用这个信号传递消息。我可以做吗？有可能的？

不，不是你想要的方式。您可以使用套接字、文件、管道或命名管道来执行此操作。如果您想了解有关 UNIX IPC 的更多信息，请阅读[UNIX 环境中的高级编程](https://rads.stackoverflow.com/amzn/click/com/0201433079)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T08:09:34.947

不，不要尝试为此使用信号。您不能使用 siginfo 结构以外的信号附加额外数据。使用信号的主要问题是信号安全性太小。您必须避免几乎所有的 C 运行时例程，并确保接收程序对其所有内核调用进行 EINTR 检查。关于信号何时出现，您唯一可以说的是它不会在您期望的时候出现（有点像西班牙宗教裁判所）。

我建议您研究其他 IPC 机制，例如共享内存、消息队列、fifos（命名管道）和套接字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T08:58:22.663

除了我遇到的一种特定情况外，信号通常不能用作 IPC 机制。

我唯一一次使用信号是作为 IPC 机制的一部分，当您需要中断信号进程的正常操作流程来处理某些事情时，例如计时器中断。信号（已经使用信号和boost共享内存来实现进程间事件管理。共享内存包含需要处理的事件列表，信号用于获取进程处理这些事件。这些事件是带外的并且不可预测，所以使用信号是理想的。我进行了大量的测试来验证实现（很难让它全部稳定）。

这在使用 glibc 的 Linux 环境中使用 sigqueue 和信号 SIGRTMIN+1 并在 sigaction 上使用 SA_RESTART 将避免直接处理 EINTR 的需要，请参见[glibc: Primitives Interrupted by Signals](http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html)。BSD 有一个类似的方案，所以我的系统不需要 EINTR 处理。其他答案提出的所有观点都被考虑和处理（和测试）。

但是，如果您只想在进程的正常操作中来回传递值，那么另一个 IPC（例如套接字、文件、管道或命名管道）会更好。如果您可以使用[ZeroMQ](http://www.zeromq.org/)那就更好了，因为它以一种非常优雅的方式为您完成了很多艰苦的工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-28T17:08:34.077

我目前正在阅读`man 7 signal`：

> 实时信号的区别如下：
> 
> 2.  如果使用 sigqueue(3) 发送信号，则可以随信号一起发送一个伴随值（整数或指针）。...

注：实时信号从`SIGRTMIN`到开始`SIGRTMAX`。

# lua - Lua 中的赋值混淆

> ID：11133888
> 
> 赞同：0
> 
> 时间：2012-06-21T07:59:53.340
> 
> 标签：lua, variable-assignment, coronasdk

我正在从 Corona 的示例代码中分析 Fishies 项目，但我无法理解该任务。

```
background = ( backgroundLandscape == background and backgroundPortrait ) or backgroundLandscape 
```

这是完整的代码：

```
-- Seed randomizer
local seed = os.time(); 
math.randomseed( seed )

display.setStatusBar( display.HiddenStatusBar )

-- Preload the sound file (theoretically, we should also dispose of it when we are completely done with it)
local soundID = audio.loadSound( "bubble_strong_wav.wav" ) 

 -- Background
 local halfW = display.viewableContentWidth / 2
 local halfH = display.viewableContentHeight / 2

 -- Create a table to store all the fish and register this table as the 
 -- "enterFrame" listener to animate all the fish.
 local bounceAnimation = {
container = display.newRect( 0, 0, display.viewableContentWidth, display.viewableContentHeight ),
reflectX = true,
 }

 local backgroundPortrait = display.newImage( "aquariumbackgroundIPhone.jpg", 0, 0 )
 local backgroundLandscape = display.newImage( "aquariumbackgroundIPhoneLandscape.jpg", -80, 80 )
 backgroundLandscape.isVisible = false
 local background = backgroundPortrait

 -- Handle changes in orientation for the background images
 local backgroundOrientation = function( event )
-- TODO: This requires some setup, i.e. the landscape needs to be centered
-- Need to add a centering operation.  For now, the position is hard coded
local delta = event.delta
if ( delta ~= 0 ) then
    local rotateParams = { rotation=-delta, time=500, delta=true }

    if ( delta == 90 or delta == -90 ) then
        local src = background

        -- toggle background to refer to correct dst
        background = ( backgroundLandscape == background and backgroundPortrait ) or       backgroundLandscape
        background.rotation = src.rotation
        transition.dissolve( src, background )
        transition.to( src, rotateParams )
    else
        assert( 180 == delta or -180 == delta )
    end

    transition.to( background, rotateParams )

    audio.play( soundID )           -- play preloaded sound file
end
 end

 -- Add a global listener
 Runtime:addEventListener( "orientation", backgroundOrientation )      
 -- 
 -- Fishies
 local numFish = 10
 local file1 = "fish.small.red.png"
 local file2 = "fish.small.blue.png"      
 --  
 -- Define touch listener for fish so that fish can behave like buttons.
 -- The listener will receive an 'event' argument containing a "target" property
 -- corresponding to the object that was the target of the interaction.
 -- This eliminates closure overhead (i.e. the need to reference non-local variables )
 local buttonListener = function( event )
if "ended" == event.phase then
    local group = event.target

    -- tap only triggers change from original to different color
    local topObject = group[1]

    if ( topObject.isVisible ) then
        local bottomObject = group[2]

        -- Dissolve to bottomObject (different color)
        transition.dissolve( topObject, bottomObject, 500 )

        -- Restore after some random delay
        transition.dissolve( bottomObject, topObject, 500, math.random( 3000, 10000 ) )
    end

    -- we handled it so return true to stop propagation
    return true
end
  end                                        
  -- 
  -- 

 -- 
 -- Add fish to the screen
 for i=1,numFish do
-- create group which will represent our fish, storing both images (file1 and file2)
local group = display.newGroup()

local fishOriginal = display.newImage( file1 )
group:insert( fishOriginal, true )  -- accessed in buttonListener as group[1]

local fishDifferent = display.newImage( file2 )
group:insert( fishDifferent, true ) -- accessed in buttonListener as group[2]
fishDifferent.isVisible = false -- make file2 invisible

-- move to random position in a 200x200 region in the middle of the screen
group:translate( halfW + math.random( -100, 100 ), halfH + math.random( -100, 100 ) )

-- connect buttonListener. touching the fish will cause it to change to file2's image
group:addEventListener( "touch", buttonListener )

-- assign each fish a random velocity
group.vx = math.random( 1, 5 )
group.vy = math.random( -2, 2 )

-- add fish to animation group so that it will bounce
bounceAnimation[ #bounceAnimation + 1 ] = group
 end                                                       
 -- 
 -- Function to animate all the fish
 function bounceAnimation:enterFrame( event )
local container = self.container
container:setFillColor( 0, 0, 0, 0)     -- make invisible
local containerBounds = container.contentBounds
local xMin = containerBounds.xMin
local xMax = containerBounds.xMax
local yMin = containerBounds.yMin
local yMax = containerBounds.yMax

local orientation = self.currentOrientation
local isLandscape = "landscapeLeft" == orientation or "landscapeRight" == orientation

local reflectX = nil ~= self.reflectX
local reflectY = nil ~= self.reflectY

-- the fish groups are stored in integer arrays, so iterate through all the 
-- integer arrays
for i,v in ipairs( self ) do
    local object = v  -- the display object to animate, e.g. the fish group
    local vx = object.vx
    local vy = object.vy

    if ( isLandscape ) then
        if ( "landscapeLeft" == orientation ) then
            local vxOld = vx
            vx = -vy
            vy = -vxOld
        elseif ( "landscapeRight" == orientation ) then
            local vxOld = vx
            vx = vy
            vy = vxOld
        end
    elseif ( "portraitUpsideDown" == orientation ) then
        vx = -vx
        vy = -vy
    end

    -- TODO: for now, time is measured in frames instead of seconds...
    local dx = vx
    local dy = vy

    local bounds = object.contentBounds

    local flipX = false
    local flipY = false

    if (bounds.xMax + dx) > xMax then
        flipX = true
        dx = xMax - bounds.xMax
    elseif (bounds.xMin + dx) < xMin then
        flipX = true
        dx = xMin - bounds.xMin
    end

    if (bounds.yMax + dy) > yMax then
        flipY = true
        dy = yMax - bounds.yMax
    elseif (bounds.yMin + dy) < yMin then
        flipY = true
        dy = yMin - bounds.yMin
    end

    if ( isLandscape ) then flipX,flipY = flipY,flipX end
    if ( flipX ) then
        object.vx = -object.vx
        if ( reflectX ) then object:scale( -1, 1 ) end
    end
    if ( flipY ) then
        object.vy = -object.vy
        if ( reflectY ) then object:scale( 1, -1 ) end
    end

    object:translate( dx, dy )
end
 end

 -- Handle orientation of the fish
 function bounceAnimation:orientation( event )
print( "bounceAnimation" )
for k,v in pairs( event ) do
    print( "   " .. tostring( k ) .. "(" .. tostring( v ) .. ")" )
end

if ( event.delta ~= 0 ) then
    local rotateParameters = { rotation = -event.delta, time=500, delta=true }

    Runtime:removeEventListener( "enterFrame", self )
    self.currentOrientation = event.type

    for i,object in ipairs( self ) do
        transition.to( object, rotateParameters )
    end

    local function resume(event)
        Runtime:addEventListener( "enterFrame", self )
    end

    timer.performWithDelay( 500, resume )
end
 end

 Runtime:addEventListener( "enterFrame", bounceAnimation );
 Runtime:addEventListener( "orientation", bounceAnimation )

 -- This function is never called, 
 -- but shows how we would unload the sound if we wanted to
 function unloadSound()
audio.dispose(soundID)
soundID = nil
 end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:45:36.243

`and`Lua 对s 和s有一点奇怪的行为`or`。

表达式的`a and b`计算结果为`a`if`a`被认为是假的（只有`nil`并且`false`被认为是假的，包括 0 在内的所有其他值都被认为是真），如果`a`被认为是真，则表达式的计算结果为`b`。

该表达式的`a or b`计算结果为`a`if`a`被认为是 true 并且`b`if`a`被认为是 false 。

注意：在这两种情况下，如果表达式计算`a`为该值，`b`甚至都不会计算。这称为短路逻辑。如果为假，则`and`不可能为真，因此浪费计算时间来评估是没有意义的。同样，如果为真，则没有必要评估，因为不可能是假的。`a``and``b``a``a or b``b``or`

该构造`cond and valiftrue or valiffalse`（或等效的，由于运算符优先级，`(cond and valiftrue) or valiffalse`）等效于其他语言的三元 if 语句，但有一个警告：**`valiftrue`不得评估为 false**。如果是这种情况，整个表达式将始终计算为`valiffalse`。（尝试并推理出来，这是我发现掌握这个结构的最好方法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:49:54.607

即将详细发布，但@JPvdMerwe 找到了它。

准确地说，

```
background = ( backgroundLandscape == background and backgroundPortrait ) or backgroundLandscape 
```

翻译成

```
if backgroundLandscape == background then 
    background = backgroundPortrait
else 
    background = backgroundLandscape
end 
```

**编辑**

正如@JPvdMerwe 指出的那样，在这种情况下，如果 backgroundPortrait 为假，那么

```
background = backgroundLandscape 
```

将一直执行。

# c - webkitgtk，导航请求的信号，检索发布的数据

> ID：11133889
> 
> 赞同：3
> 
> 时间：2012-06-21T07:59:55.093
> 
> 标签：c, webkit, webkitgtk

在处理信号“resource-request-starting”时检查提供的数据时，我可以看到 post 请求也通过了信号：

```
static gboolean resourceRequestStartingWebViewCb(
WebKitWebView *web_view,
WebKitWebFrame *web_frame,
WebKitWebResource *web_resource,
WebKitNetworkRequest *request,
WebKitNetworkResponse *response,
gpointer user_data)
    {
        printf("RESOURCE REQUEST STARTING");
        analyzeRequest(request);
        return FALSE;
    } 
```

但是，发布的数据没有通过：

```
static void analyzeRequest(WebKitNetworkRequest *request)
{
    const char* uri=webkit_network_request_get_uri(request);
    printf(" for %s.\n",uri);

    SoupMessage* soupMessage=NULL;
    if(request!=NULL) //REQUEST VALID
    {
        soupMessage=webkit_network_request_get_message(request);
        printf("valid request\n");
    }

    SoupMessageBody* request_body=NULL;
    if(soupMessage!=NULL) //SOUP MESSAGE VALID
    {
        request_body=soupMessage->request_body;
        printf("valid soup message\n");
        printf("method: %s\n",soupMessage->method);
    }

    SoupBuffer* soupBuffer=NULL;
    if(request_body!=NULL) //REQUEST BODY VALID
    {
        //THIS SHOULD LOAD THE POST DATA, NO ???
        soupBuffer=soup_message_body_flatten(request_body);
        printf("valid request_body\n");
    }

    const char* requestData=NULL;
    gsize requestLength=0;
    if(soupBuffer!=NULL) //SOUP BUFFER VALID
    {
        requestData=soupBuffer->data;
        printf("valid soup buffer\n");
        requestLength=soupBuffer->length;
        printf("length:%d\n",requestLength);
    }

    if(requestData!=NULL) //REQUEST DATA VALID
    {
        printf("request data\n%s\n",requestData);
        printf("valid request_data\n");
    }
} 
```

我可以看到 POST 方法请求在标准输出上飞过，但我似乎无法掌握他们的数据。有谁知道如何掌握它？谢谢！

# nancy - 如何在 NancyFX 中将表单绑定到模型

> ID：11133903
> 
> 赞同：2
> 
> 时间：2012-06-21T08:01:01.157
> 
> 标签：nancy

我是 NancyFX 的新手，并试图简单地将发布的表单绑定到我的模型。

在模块中尝试访问发布的值时，我运行以下语句：

```
 string email = this.Context.Request.Form["Email"];
        Debug.WriteLine(email); 
```

结果是：“Nancy.DynamicDictionaryValue”而不是发布的值

谁能告诉我我在做什么新手错误：

表格如下所示：

```
<form method="post" action="account">
    <input type="text" id="Email" />
    <input type="password" id="Password" />
    <input type="submit" value="Create" />
</form> 
```

模块构造器中的路由：

```
 Post["/"] = parameters => CreateAccount(parameters); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:25:45.663

动态字典返回一个动态值，如果你将它转换为一个字符串（隐式或显式）你会得到你想要的，或者只是使用内置模型绑定器[https://github.com/NancyFx/Nancy/wiki/模型绑定](https://github.com/NancyFx/Nancy/wiki/Model-binding)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T23:52:35.673

只是添加到上面的正确答案，希望它对像我这样的新手有用。

由于 Nancy Form 和 Query 属于类型`dynamic`，因此您可以使用表单名称或查询字符串参数访问值（参见示例代码中的`terms`和）。`max`我使用一个简单的基类只是为了使我的其余模块中的语法更简洁。

**注意**：基类中的 ExpandoObject`Model`在那里，所以我可以在我的视图模型中抛出值，而不必担心强类型数据传输类会使事情变得混乱（这也有助于防止暴露任何秘密域实例数据）。

```
public class SearchModule : _BaseModule
{
    public SearchModule(ISearchService searchService)
    {
         Get["/search"] = _ =>
            {
                if (!Query.terms.HasValue) return HttpStatusCode.BadRequest;
                var terms = (string) Query.terms;
                var max = (Query.max.HasValue) ? (int) Query.max : 3;
                Model.SearchResults = searchService.GetResults(max, terms);
                ...
            };
    }
}

public class _BaseModule : NancyModule
{
    protected dynamic Model = new ExpandoObject();
    public dynamic Query { get { return Request.Query; } }
    public dynamic Form { get { return Request.Form; } }
} 
```

# drupal-7 - 无法在我的本地系统中更改 Drupal 7 密码？

> ID：11133907
> 
> 赞同：0
> 
> 时间：2012-06-21T08:01:49.403
> 
> 标签：drupal-7

我在实时服务器中运行 Drupal 7 站点。在我的本地系统上设置时，我无法使用我的用户名和密码（它不起作用）。我什至无法更改我的管理员密码。有人可以给出解决方案吗？

注意：当它设置在不同的服务器上时，它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:39:50.740

这是有关如何重置 drupal 密码的链接。

[http://drupal.org/node/1023428](http://drupal.org/node/1023428)

# javascript - 如何在 mongodb-native findAndModify 中使用变量作为字段名？

> ID：11133912
> 
> 赞同：6
> 
> 时间：2012-06-21T08:02:31.883
> 
> 标签：javascript, node.js, mongodb

在这段使用 mongodb-native 驱动程序的代码中，我想增加我在单独变量中指定的字段的值。问题是 $inc 子句中的字段名称在这种情况下将是“变量”，而不是变量的内容。在查询部分，所选变量按预期工作并找到正确的 id。

```
var selected = 'id_of_the_selected_one';
var variable = 'some_string';
collection.findAndModify(
     {_id : selected}, 
     {},
     {$inc : {variable : 1}},
     {new : true, upsert : true},
     function(err, autoincrement) { /* ... */ }
); 
```

我应该怎么做才能让变量的内容代替“变量”这个词？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T08:09:03.020

将另一个变量的键设置为其值并将其作为对象传递。*行动*注意事项：

```
var selected = 'id_of_the_selected_one';
var variable = 'some_string';
var action = {};
action[variable] = 1; // the value

collection.findAndModify(
    {_id : selected}, 
    {}, 
    {$inc : action}, 
    {new : true, upsert : true}, 
    function(err, autoincrement) { /* ... */ }
); // Same as {$inc: {'some_string': 1} } 
```

# asp.net-mvc - 如何避免重复此网格配置代码？

> ID：11133913
> 
> 赞同：3
> 
> 时间：2012-06-21T08:02:39.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3, devexpress

我有以下代码在 Razor 视图中用于为 DevExpress GridView MVC 扩展配置网格设置。代码一切都很好，但现在我希望从网格中导出数据，这需要“服务器”上的相同配置代码，即视图的上游。我可以很容易地做到这一点，并在我的视图模型上提供一个 GridSettings 属性，如果它不是对`WebViewPage<TModel>.ViewContext`属性的必需访问。

现在我正在使用一个非常丑陋的解决方法并`ViewContext`从视图传回控制器；然后控制器构建网格设置。不用说，在控制器上调用方法的视图相当臭。

```
settings.Columns.Add(column =>
                        {
                            column.Caption = "#";
                            column.SetDataItemTemplateContent(c =>
                                                                    {
                                                                        ViewContext.Writer.Write(
                                                                            Html.ActionLink("Edit", "Edit", new {id = DataBinder.Eval(c.DataItem, "Id")}) + "&nbsp" +
                                                                            Html.ActionLink("Delete", "Delete", new {id = DataBinder.Eval(c.DataItem, "Id")},
                                                                                            new {onclick = "return confirm('Do you really want to delete this record? [Just say no!]')"})
                                                                            );
                                                                    });
                            column.SetHeaderTemplateContent(c => ViewContext.Writer.Write(Html.ActionLink("New", "Create")));
                            column.Settings.AllowDragDrop = DefaultBoolean.False;
                            column.Settings.AllowSort = DefaultBoolean.False;
                            column.Width = 70;
                        });
settings.Columns.Add("RefNum", "Emp. No."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:15:14.803

通常，在 PartialView 和 Controller 端**都只**需要导出的 GridViewSettings 对象的**“名称”属性。**

GridView 的 PartialView 也应该用表单包裹起来。

请参阅DX 代码库和[此](http://www.devexpress.com/Support/Center/p/Q396028.aspx)线程中的[此示例。](http://www.devexpress.com/Support/Center/Example/Details/E3898)

可以在静态对象内的控制器端指定共享的 GridViewSettings（就像在[这个](http://demos.devexpress.com/MVC/GridView/Export)演示中一样）。

# android - 什么是android中的覆盖？

> ID：11133915
> 
> 赞同：1
> 
> 时间：2012-06-21T08:02:44.783
> 
> 标签：android, overlay

我知道如何使用它`Overlay`，`Android applications`我用过很多次。

但现在我想知道关键字`overlay`的一般含义是什么。

一个基本定义是

```
Overlay is the individual items placed on the map 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:09:28.650

通常，类的名称、关键字是在其真正含义的上下文中给出的。叠加的字典含义是：

> 用涂层覆盖（事物）的表面：“他们的指甲被黄金覆盖”。

这同样适用于安卓。就像你说的：

> 叠加层是放置在地图上的单个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:10:45.837

通常用于显示地图顶部的图像，如地图表面上的图钉

[演示链接](http://developer.android.com/resources/tutorials/views/hello-mapview.html) [API 链接](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay)

# excel - 在 IF 语句中使用 Concatenate 函数

> ID：11133922
> 
> 赞同：0
> 
> 时间：2012-06-21T08:03:14.313
> 
> 标签：excel

我试图在 excel 单元格中找到一个字符串，它在某种程度上可以工作，但是当该值返回 false 时，我只是在单元格中得到“FALSE”，尽管当它返回一个 true 值时，它实际上将单元格更改为我所拥有的声明中定义`IF`。

这是因为我在 if 语句中错误地插入了连接查询吗？

我的公式如下：

```
=IF(ISNUMBER(SEARCH(ET2:ET4,B2)),"yes",F2=CONCATENATE("NA ",B2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:10:07.910

你得到错误的原因是说

```
F2=CONCATENATE("NA ",B2) 
```

我认为您正在尝试将其用作分配（即将单元格 F2 设置为 ConCat 的值）。

它实际上要做的是比较 F2 的值和 concat 的值，`TRUE`如果相等则返回，`FALSE`否则返回。这个`TRUE`或`FALSE`值是你在你的单元格中最终得到的。

所以要修复它：

如果上面的公式在单元格 F2 中，那么只需`F2=`从公式中删除它就可以了。

如果上述公式不在单元格 F2 中，那么您需要将相同的公式或稍微更改的公式放入该单元格以填充 F2。

# java - 如何在 GAEJ 中建模实体关系？

> ID：11133924
> 
> 赞同：6
> 
> 时间：2012-06-21T08:03:31.080
> 
> 标签：java, google-app-engine, google-cloud-datastore, referenceproperty

我想知道 - 一个例子非常感谢 -

**如何在 Google App Engine for Java 中建模关系？**

-
一对多 - 多对多

我在网上搜索了所有关于 Java 的内容，所有指南和教程都是关于 Python 的。

我从这篇[文章](https://developers.google.com/appengine/articles/modeling)中了解到，在 Python 中，关系是使用**ReferenceProperty**建模的。但是，我在 Javadoc 参考资料中没有发现任何关于此类的信息。

此外，在[本文中](http://blog.notdot.net/2009/9/Advanced-Bulk-Loading-Part-5-Bulk-Loading-for-Java)，他们讨论了以下内容：

> 目前 Java 用户缺少工具，这主要是由于 App Engine 的 Java 平台相对较新。

但是，那是在 2009 年写的。

最后，我最终使用每个实体的祖先路径对关系进行建模。事后我发现这种方法存在问题并限制了应用程序的可扩展性。

您能否指导我使用与 Python 的**ReferenceProperty**类等效的 Java类？或者您能否给我一个示例，说明如何使用 java 数据存储低级 API 在 AppEngine 中建模关系。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:40:00.427

在 GAE/J 中创建实体之间的关系取决于您使用的 db API：

1.  JDO：[实体关系](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)。

2.  JPA：[见文档](https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2)。

3.  物化：[单值关系](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Single-Value_Relationship)。

4.  低级 API：将一个实体的键作为属性添加到另一个实体：请参阅属性类型[。](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:29:38.573

只是一个提示。在定义您的数据模型时，请考虑最终用户查询并相应地定义您的数据模型。

例如，让我们以商店出租书籍为例。在传统应用程序中，您将拥有三个主要实体：

--> 书

--> 客户端

--> Rent（解决多对多）

要显示哪个客户正在租用哪本书的报告，您将发出一个查询连接 Rent 表、Book 表和 client 表。

但是，在 GAE 中，由于不支持连接操作，因此无法正常工作。

我找到的解决方案（可能是其他解决方案）是使用相同的三个表进行建模，但将书籍和客户定义嵌入到 Rent 表中。

这样，显示正在租借的书籍列表非常快速且便宜。唯一的缺点是，例如，如果一本书的标题发生变化，我必须检查所有嵌入的对象。但是，与只读查询相比，这种情况发生的频率如何。

总而言之，考虑最终用户查询

# postgresql - 如何获取 PostgreSQl 日志

> ID：11133928
> 
> 赞同：0
> 
> 时间：2012-06-21T08:04:09.850
> 
> 标签：postgresql, postgresql-9.1

如何从 PostgreSQl 服务器获取日志信息？

我发现可以在 pgAdmin Tolls->ServerStatus 中观看它。是否有 SQL 方式、API 或 consol 方式来显示日志文件的内容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:17:20.417

我是命令行迷，所以我更喜欢“控制台”方式。

您在哪里找到日志以及其中的内容取决于您如何[配置 PostgreSQL 集群](http://www.postgresql.org/docs/9.1/static/runtime-config-logging.html)。这是我在创建新集群后更改的第一件事，以便在预期位置获得所需的所有信息。

请检查您的`$PGDATA/postgresql.conf`文件以了解当前设置并以适当的方式进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:39:30.177

该[`adminpack`](http://www.postgresql.org/docs/current/static/adminpack.html)扩展提供了 pgAdmin3 的服务器状态功能背后的有用信息。

# android - 在 Android 中使用 DownloadManager 下载完成后通知栏消失

> ID：11133930
> 
> 赞同：3
> 
> 时间：2012-06-21T08:04:14.370
> 
> 标签：android, notifications, download-manager

我正在使用**DownloadManager**类在 Android 中下载应用程序。下载完成后，通知栏消失。如何让它可见，直到用户点击它？

**编辑**

我可以`VISIBILITY VISIBLE _NOTIFY COMPLETED`在 API 级别 11 及以上使用，但我使用的是 API 级别 10。怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:09:05.920

您可以使用：

```
my_notification.flags |= Notification.FLAG_AUTO_CANCEL; 
```

创建通知时将代码放在上面。

# iphone - 使用委托在选项卡之间传递数据不起作用

> ID：11133934
> 
> 赞同：1
> 
> 时间：2012-06-21T08:04:23.797
> 
> 标签：iphone, objective-c, ios, delegates, tabbar

我想使用委托将数据从第二个选项卡传递到第一个选项卡。但委托方法未触发。这是代码（我正在使用情节提要）

在 SecondViewController.h

```
#import <UIKit/UIKit.h>

 @class SecondViewController;
 @protocol SecondViewControllerDelegate <NSObject>

 -(void) sliderValueDidChanged: (SecondViewController *)controller data:(float)      sliderValue;

 @end

 @interface SecondViewController : UIViewController{
__weak id<SecondViewControllerDelegate> delegate;   
 }
 - (IBAction)sliderPressed:(id)sender;

 @property (weak, nonatomic) IBOutlet UISlider *mySlider;
 @property(weak,nonatomic) id<SecondViewControllerDelegate> delegate;

 @end 
```

在 SecondViewController.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

 @implementation SecondViewController
 @synthesize mySlider;
 @synthesize delegate;

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
 {
[super viewDidLoad];
// Do any additional setup after loading the view.
 }

 - (void)viewDidUnload
 {
[self setMySlider:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
 }

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }

- (IBAction)sliderPressed:(id)sender {
float value = mySlider.value;

[self.delegate sliderValueDidChanged:self data:value];
NSLog(@"%@",self.delegate);
}
@end 
```

第一视图控制器.h

```
 #import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface FirstViewController : UIViewController<SecondViewControllerDelegate>
@property (weak, nonatomic) IBOutlet UILabel *myLabel;

@end 
```

在 FirstViewController.h

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize myLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
   SecondViewController *svc = [[SecondViewController alloc]init];
   svc.delegate = self;

}

- (void)viewDidUnload
{
    [self setMyLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
-(void) sliderValueDidChanged: (SecondViewController *)controller data:(float) sliderValue{
    myLabel.text = [[NSString alloc]initWithFormat:@"%f",sliderValue];
    NSLog(@"delegate called");
}

@end 
```

我正在尝试在第二个选项卡中设置一个滑块并将边值发送到具有标签的第一个选项卡。self.delegate 打印 null 并且从未调用过委托方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:31:54.563

很简单，因为您已经有了委托代码，只需更改创建`SecondViewController`对象的行。而不是创建一个新的，你应该有一个标签栏将显示的引用。

在FirstViewController的viewDidLoad中，改变

```
SecondViewController *svc = [[SecondViewController alloc]init]; 
```

到

```
//assuming you have 2 view controllers in the tab bar controller, first being FirstViewController
SecondViewController *svc = [self.tabBarController.viewControllers objectAtIndex:1]; 
```

那应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:11:35.150

您实际上是如何进入第二个选项卡的？您正在 viewDidLoad 中创建它的一个实例，但如果您切换选项卡，该实例将不会用于在屏幕上显示。系统将创建另一个它将使用的实例。您可以通过访问标签栏控制器的`viewcontrollers`属性并检查 SecondViewController 来访问它。

**编辑：**您也可以质疑您的设计。我不太了解您的应用程序，但您的第一个选项卡可能不应该真正成为您的第二个选项卡的代表。如果要传递数据，请考虑使用`NSNotificationCenter`或持久存储。

# javascript - 有什么办法可以写这个更短/更干的？

> ID：11133935
> 
> 赞同：1
> 
> 时间：2012-06-21T08:04:24.890
> 
> 标签：javascript, dry

只是想知道我是否可以将这个循环写得更短。

```
var m, d, y

// date.length === format.length
for (var i = 0, len = format.length; i < len; i++) {
  if (/m/.test(format[i])) m = date[i]
  if (/d/.test(format[i])) d = date[i]
  if (/y/.test(format[i])) y = date[i]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:01:45.810

语法节省？保存一个变量；把它放在 for 标题中

```
// date.length === format.length
for (var m, d, y, i = 0, len = format.length; i < len; i++) {
  if (/m/.test(format[i])) m = date[i]
  if (/d/.test(format[i])) d = date[i]
  if (/y/.test(format[i])) y = date[i]
} 
```

或者可能是条件：

```
for (var m, d, y, i = 0, len = format.length; i < len; i++) {
  (/m/.test(format[i])) ? m = date[i] 
  :(/d/.test(format[i])) ? d = date[i] 
  :(/y/.test(format[i])) y = date[i] 
  : continue;
} 
```

但这改变了逻辑，我不确定这是想要的

也许您可以添加 continue 以加快执行速度，但再次不确定逻辑

```
for (var m, d, y, i = 0, len = format.length; i < len; i++) {
  if (/m/.test(format[i])){
    m = date[i]
    //jump to next since this has been found
    continue;
  }
  if (/d/.test(format[i])){
    d = date[i]
    continue;
  }
  if (/y/.test(format[i])){
    y = date[i]
    continue;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:59:11.060

您的示例足够短，因此我不会更改它，但为了举例，您可以使您的代码更加动态，如下所示：

```
var obj = {};
var mdy = ['m', 'd', 'y']
var curLetter;
for (var i = 0, len = format.length; i < len; i++) {
    curLetter = mdy[i];
    if ((new Regexp(curLetter)).test(format[i])) obj[curLetter] = date[i];
}
var m = obj.m;
var d = obj.d;
var y = obj.y; 
```

如果您只是 obj 的属性，则不需要最后三行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T12:46:32.337

您可以使用`eval()`编写更通用的循环。

```
var parts = ['d', 'm', 'y'],
    part,
    indexOfPart,
    d, m, y;

// Iterate over the variable you want to assign
for (int i = 0; i < parts.length; i++) {
    part = parts[i];

    // Find out where in the format is the current part of the date
    indexOfPart = format.indexOf(part);

    // If it is present, use eval to assign your variable
    if (indexOfPart !== -1) {
        eval(part + " = date[" + indexOfPart + "];");
    }
} 
```

# javascript - 隐藏的表单字段没有进入spring mvc中的控制器

> ID：11133938
> 
> 赞同：1
> 
> 时间：2012-06-21T08:04:29.160
> 
> 标签：javascript, spring-mvc

我的意图是在spring mvc中向控制器发送一个隐藏的计数值表单视图，一切正常，但我没有得到控制器中的计数，请帮我看一下

```
<HTML>
<HEAD>

<script type="text/javascript" src="resources/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var i = 1;
    //var c = 0;
    $("#AddSection").click(function() {
        i++;
        $("<div />").append($("<input />", {
            type: "text",
            name: "Section" + i
        })).appendTo("#someContainer");

        //c = i;
        document.getElementsByName("Count").Value = i;
        alert(i);
    });

    $("input").live("click", function() {
        $("span").text("Section: " + this.name);

    });
});​
</SCRIPT>
</HEAD>
<BODY>
    <form method="get" action="addProfile">
        ProfileName<input type="text" name="pname"><br />
         SectionName<input type="text" name="Section1">
          <input type="button" id="AddSection" value="AddSection">
        <div id="someContainer"></div>
    <input type="hidden" id="hiddenSection" name="Count" />
        <span></span> <input type="submit" value="save"> 
    </form>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:06:06.447

你有一个错字：

```
document.getElementsByName("Count").Value = i;
//                                  ^----Typo! 
```

`value`是小写：

```
document.getElementsByName("Count")[0].value = i;   
//                                     ^----Fixed!  
//                                 ^-------- return HTML Collection, take first. 
```

更好的使用`id`：

```
document.getElementById("hiddenSection").value = i; 
```

您正在使用 jQuery，因此您可以使用以下方法之一：

```
$("#hiddenSection").val(i);
$('input[name="Count"]').val(i); 
```

# jquery - 如何在 Internet Explorer 上使用边框半径 CSS

> ID：11133939
> 
> 赞同：-6
> 
> 时间：2012-06-21T08:04:29.737
> 
> 标签：jquery, css, internet-explorer

如何在所有版本的 IE 上使用边框半径？

```
.myclass {
    border-style: solid;
    border-width: 2px;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
} 
```

用jquery可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:07:34.167

由于旧版浏览器不支持边框半径（和其他 CSS3 属性），因此您可以使用[CSS3 Pie](http://css3pie.com/)例如。请记住，您指的是样式而不是脚本。所以问它是否可以用 jQuery 完成有点奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:07:20.290

使用 CSS3 PIE [http://css3pie.com/](http://css3pie.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:08:22.767

您已尝试使用插件 dd_roundies（[下载链接](http://dillerdesign.com/experiment/DD_roundies/#download)）作为 IE 上的边框半径。希望它可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:08:50.593

考虑到您的代码，您已经在正确的位置。

[您可以在更下方找到问题的答案。](https://stackoverflow.com/a/3909146)

# jsf-2 - JBoss Profiler 未显示在 JBoss 中

> ID：11133941
> 
> 赞同：1
> 
> 时间：2012-06-21T08:04:36.220
> 
> 标签：jsf-2, jboss, profiling, jboss5.x

我正在尝试在我的 JBoss AS5.0 上运行 JBoss Profiler(jboss-profiler-2.0.0.Beta5)，用于在 RF3.3 上创建的 Web 应用程序

我遵循了 JBoss profiler 用户指南中提到的所有步骤：-

```
Copy jboss-profiler.jar to jbossas/bin
• Copy jboss-profiler.properties to jbossas/bin
• Edit jboss-profiler.properties in jbossas/bin to include the classes to be profiled
• Copy jboss-profiler-plugins.jar to jbossas/bin
• Edit run.conf (Unix) or run.bat (Windows) in jbossas/bin to include JBoss Profiler in JAVA_OPTS
• Copy jboss-profiler.sar to jbossas/server/<conf>/deploy
• Boot application server
Include the following in JAVA_OPTS
-javaagent:jboss-profiler.jar -Djboss-profiler.properties=jboss-profiler.properties 
```

发布此消息后，我启动了我的 JBoss AS。MBean 正在注册，我也可以看到 MBean。在启动期间，我观察到 Profiler 将条目作为 IP（比如 10.10.10.10）和端口 5400，而我在其中指定了 8080 jboss-profiler.props 文件。

现在，当我导航到 10.10.10.10:8080/jboss-profiler 时，我得到 404 页面未找到。当我导航到 10.10.10.10:5400/jboss-profiler 时，出现以下异常：-

```
java.lang.reflect.InvocationTargetException

        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)

        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)

        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)

        at org.jboss.remoting.transport.socket.ServerThread.createServerSocketWrapper(ServerThread.java:907)

        at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:489)

        at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:230)

Caused by: java.io.StreamCorruptedException: invalid stream header: 47455420

        at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:782)

        at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)

        at org.jboss.remoting.loading.ObjectInputStreamWithClassLoader.<init>(ObjectInputStreamWithClassLoader.java:97)

        at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.createInput(JavaSerializationManager.java:54)

        at org.jboss.remoting.marshal.serializable.SerializableUnMarshaller.getMarshallingStream(SerializableUnMarshaller.java:7

        at org.jboss.remoting.marshal.serializable.SerializableUnMarshaller.getMarshallingStream(SerializableUnMarshaller.java:5

        at org.jboss.remoting.transport.socket.ClientSocketWrapper.createInputStream(ClientSocketWrapper.java:179)

        at org.jboss.remoting.transport.socket.ClientSocketWrapper.createStreams(ClientSocketWrapper.java:162)

        at org.jboss.remoting.transport.socket.ClientSocketWrapper.<init>(ClientSocketWrapper.java:66)

        at org.jboss.remoting.transport.socket.ServerSocketWrapper.<init>(ServerSocketWrapper.java:46)

        ... 7 more 
```

当我尝试从命令提示符运行命令 java -jar jboss-profiler-client.jar 它说

```
org.jboss.remoting.CannotConnectException: Can not get connection to server. Problem establishing socket connection for InvokerLocator [socket://localhost:5400/]
        at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:579)
        at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:122)
        at org.jboss.remoting.Client.invoke(Client.java:1634)
        at org.jboss.remoting.Client.invoke(Client.java:548)
        at org.jboss.remoting.Client.invoke(Client.java:536)
        at org.jboss.profiler.client.cmd.Client.main(Client.java:281)
Caused by: java.net.ConnectException: Connection refused: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at org.jboss.remoting.transport.socket.SocketClientInvoker.createSocket(SocketClientInvoker.java:192)
        at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.getConnection(MicroSocketClientInvoker.java:827)
        at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:569)
        ... 5 more 
```

谁能指导我如何设置 PROFILER.... 同样的疑问也发布在 JBoss 论坛上。 [https://community.jboss.org/message/743228#743228](https://community.jboss.org/message/743228#743228)

# php - 非常复杂的正则表达式

> ID：11133943
> 
> 赞同：-2
> 
> 时间：2012-06-21T08:05:11.873
> 
> 标签：php, regex

所以有一个字符串，

```
<?php

$string = <<<STR

/\!@#$%^&*()?.,djasijdiwqpk,=-c./zcxzo123154897kp02ldz.,world90iops02&&&8ks

STR; 
```

我想将所有内容都替换为 NULL，除了单词“world”和数字 1 和 3，

我只想使用正则表达式从该字符串中获取“world13”或“world31”

我已经通过 strpos() 和 substr() 实现了基本解决方案，这是例外情况。但我需要通过 RegExp 做到这一点

问题是：

**是否可以使用 RegEx 提取该单词？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:08:33.793

> 是否可以使用 RegEx 提取该单词？

是的。你可以使用这个正则表达式：

```
(world) 
```

* * *

> 我知道，但我无法提取 world13 或 world31

啊我懂了！您可以使用：

```
$string = preg_replace('/.*/s', 'world13', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:18:03.700

`~(world(?:(31|13))~i`. 使`'i'`正则表达式不区分大小写。`?:`存在所以它不会将它放在匹配数组中的单独结果中。顺便说一句，不会说它很复杂:)如果你想要*每个*1 和 3 都在里面，你可以使用`~(world|1|3)~i`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:31:48.947

一个简单的解决方案是找到您需要的东西，然后将它们连接到一个字符串中。

```
preg_match_all('/world|[13]/', $string, $matches);
$ret = join($matches[0]); 
```

# shell - 使用具有 2 个搜索条件的 SED

> ID：11133945
> 
> 赞同：1
> 
> 时间：2012-06-21T08:05:33.810
> 
> 标签：shell, sed

我需要修改使用 SED 在文件中搜索和替换的现有脚本。我的问题是我需要使用 sed 进行相同的搜索和替换，但前提是满足 2 个条件。

我使用 find 和 sed 如下：

```
find . -name 'search.do*' -exec sed -i "/href/\
s/href=\"[^\"]*sommerhus\/detail\.do[^\"]*unitId=\([^\"]*\)\"/href=\"sommerhus-\1.html\"/g" {} \; 
```

但现在我需要确保仅在满足“href”和另一个搜索条件时才进行替换 fx“href”&&“语言”存在

我试过 -e 但没有成功。可能吗 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:29:47.653

您可以使用`/href.*language\|language.*href/`（可能带有一些额外的约束，例如每次匹配中第二个单词之前的空格）。

您还可以将命令嵌套在块中：

```
sed '/href/{ /language/s/<match>/<replace>/ }' 
```

这更具扩展性：添加第三个模式只需要添加一对大括号和模式，而上面的交替解决方案总共需要 6 个模式（每个可能的顺序一个）。

* * *

此外，为了避免`/`在模式内部使用反斜杠，sed 允许您使用任何字符作为分隔符，例如`@`：

```
find . -name 'search.do*' -exec sed -i "/href/\
s@href=\"[^\"]*sommerhus/detail\.do[^\"]*unitId=\([^\"]*\)\"@href=\"sommerhus-\1.html\"@g" {} ;' 
```

（在这种情况下是一个小收获，但在处理文件路径或 URL 等时很高兴知道其他情况。）

# c# - 如何从 WPF 中的第一个窗口打开第二个窗口？

> ID：11133947
> 
> 赞同：144
> 
> 时间：2012-06-21T08:05:39.380
> 
> 标签：c#, wpf

我是 WPF 的新手。我有两个窗口，例如window1 和window2。我在window1 中有一个按钮。如果我单击该按钮，window2 必须打开。我该怎么做？

这是我尝试过的代码：

```
window2.show(); 
```

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2012-06-21T08:51:28.440

将您的代码写入`window1`.

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    window2 win2 = new window2();
    win2.Show();
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-06-21T08:32:57.940

创建新的 WPF 应用程序后，您应该有一个 .xaml 文件和一个 .cs 文件。这些代表您的主窗口。*创建一个额外的 .xaml 文件和 .cs 文件来表示您的子窗口。*

### 主窗口.xaml

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Open Window" Click="ButtonClicked" Height="25" HorizontalAlignment="Left" Margin="379,264,0,0" Name="button1" VerticalAlignment="Top" Width="100" />
    </Grid>
</Window> 
```

### 主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void ButtonClicked(object sender, RoutedEventArgs e)
    {
        SubWindow subWindow = new SubWindow();
        subWindow.Show();
    }
} 
```

然后将您需要的任何附加代码添加到这些类中：

```
SubWindow.xaml
SubWindow.xaml.cs 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-21T08:11:41.560

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    window2 win2 = new window2();
    win2.Show();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-21T10:49:23.343

在 WPF 中，我们有几个使用 Show() 和 ShowDialog() 方法的选项。

好吧，如果你想在新窗口打开时关闭打开的窗口，那么你可以使用 Show() 方法：

```
Window1 win1 = new Window1();
win1.Show();
win1.Close(); 
```

ShowDialog() 也会打开一个窗口，但在这种情况下，您不能关闭之前打开的窗口。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-21T08:10:21.833

假设第二个窗口定义为`public partial class Window2 : Window`，您可以通过以下方式进行：

```
Window2 win2 = new Window2();
win2.Show(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-07T22:51:42.930

这对我有帮助： Owner 方法基本上将窗口与另一个窗口联系起来，以防您想要具有相同窗口的额外窗口。

```
LoadingScreen lc = new LoadingScreen();
lc.Owner = this;
lc.Show(); 
```

考虑这一点。

```
this.WindowState = WindowState.Normal;
this.Activate(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-24T14:27:38.777

您可以使用以下代码：

```
private void OnClickNavigate(object sender, RoutedEventArgs e)
{
    NavigatedWindow navigatesWindow = new NavigatedWindow();
    navigatesWindow.ShowDialog();
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-21T08:11:19.913

您可以在 window1 中创建一个按钮并双击它。它将创建一个新的单击处理程序，您可以在其中编写如下内容：

```
var window2 = new Window2();
window2.Show(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-20T18:48:14.090

您将需要像这样创建一个新窗口的实例。

```
var window2 = new Window2(); 
```

一旦你有了实例，你可以根据你想要做的事情使用[Show()](https://msdn.microsoft.com/en-us/library/system.windows.window.show%28v=vs.110%29.aspx)或[ShowDialog()方法。](https://msdn.microsoft.com/en-us/library/system.windows.window.showdialog%28v=vs.110%29.aspx)

```
window2.Show(); 
```

或者

```
var result = window2.ShowDialog(); 
```

`Nullable<bool>`如果您需要，ShowDialog() 将返回 a 。

# coding-style - Doctrine 1.2 可以生成带有制表符而不是空格的实体文件吗？

> ID：11133950
> 
> 赞同：0
> 
> 时间：2012-06-21T08:06:06.310
> 
> 标签：coding-style, doctrine, whitespace

对于特定项目，整个代码库使用制表符，而不是空格。

当然，**这是错误**的，每个人都知道。但是在这个特定的项目中，Doctrine 打破了编码约定，**以正确的方式做事**并创建带有空格的实体文件。

如何将 Doctrine 1.2 配置为使用选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T15:09:56.817

您可以更改`$this->spaces`为其他内容，例如`$this->spaces = "\t";`在[EntityGenerator.php](https://github.com/doctrine/doctrine2/blob/2.4/lib/Doctrine/ORM/Tools/EntityGenerator.php#L426)中。

您还可以更改模板（例如[`getMethodTemplate`](https://github.com/doctrine/doctrine2/blob/2.4/lib/Doctrine/ORM/Tools/EntityGenerator.php#L218)）以适合您的支架放置偏好。

请注意，这违反了[PSR-2 编码风格指南](http://www.php-fig.org/psr/2/)，它需要 4 个空格进行缩进。

# php - 看看 $_SESSION 的变化

> ID：11133956
> 
> 赞同：0
> 
> 时间：2012-06-21T08:06:36.883
> 
> 标签：php, session, hook

我正在使用带有 jumi 页面的 joomla。Joomla 和我的 php 代码在所有页面中共享会话，但没有一个...

我需要一种 PHP 方法来了解 $_SESSION 变量将在哪里更改....

有没有办法给这个变量添加一个“钩子”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:23:11.557

好的，没有办法做到这一点。

感谢大家的回复。

我添加这个回复只是为了设置一个接受的答案

# html - 在 CSS 中将所有类转换为内联的最简单方法

> ID：11133959
> 
> 赞同：0
> 
> 时间：2012-06-21T08:07:00.150
> 
> 标签：html, css

我有一些用于样式的类，它们都使用块模式显示。我想将它们全部转换为内联。有没有一种简单的方法可以将它们全部转换为内联，而不是手动转到每个类将它们单独转换为内联...

您的代码部分：

```
<div class="contentbody">
    <p>
        Register here!
    </p>
    <a href="{% url 'parent_register_step1' %}"
       class="bbutton textshadowclass boxshadow">
        <div class="boxshadowinset green">
            Register
        </div>
    </a>
    <p>
        Forgot your password?
    </p>
    <a href="{% url 'parent_forgot_password' %}"
       class="bbutton textshadowclass boxshadow">
        <div class="boxshadowinset green">
            Reset Password
        </div>
    </a>
</div> 
```

我想将类 bbutton、textshadowclass、box shadow、boxshadowinset green 更改为 inline .. 最简单的方法是什么？

注意：此类在页面的其他部分中使用。我想将某个部分更改为仅内联。它不应该影响整个页面......

让我更详细地解释一下我在做什么： ![在此处输入图像描述](../Images/0cafbd6d08f81f972e667ea860f77fe0.png)

我想将其转换为内联，以便注册和重置密码出现在同一行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:10:01.100

要仅选择不是类的`contentbody`类，您需要一个[CSS element>element Selector](http://www.w3schools.com/cssref/sel_element_gt.asp)：

```
div.contentbody>.bbutton, div.contentbody>.textshadowclass, ... {
  display: inline;
} 
```

（如果您希望其他课程也包括在内，请在列表中添加更多课程）

附加说明：如果您永久需要这些类是内联的，那么我建议只（一次）进入每个类并为每个元素添加一个内联类，从长远来看，这会使您的代码更清晰。

**编辑**：

使用[联合选择器](http://steveliles.github.com/a_multi_class_union_css_selector.html)（对不起，我找不到更官方的链接）来选择具有多个类集的元素：

```
div.contentbody>.boxshadowinset.green {
  display: inline;
} 
```

注意和之间的（`.`没有空格）`boxshadowinset``green`

我确实相信现代浏览器支持这一点，但 IE6 似乎确实存在一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:15:57.817

一种方法是将 id 应用于您的包装元素。

```
<div class="contentbody" id="contentbody"> 
```

然后在你的CSS中，添加样式

```
div#contentbody a, div#contentbody div{ display: inline; } 
```

由于 CSS 元素层次结构，它们都将采用内联样式而不是自己的样式。

这里的基本示例。[http://jsfiddle.net/H97c5/2/](http://jsfiddle.net/H97c5/2/)

# jquery - jQuery simpletip 和 hoverIntent（在显示工具提示之前延迟）

> ID：11133961
> 
> 赞同：0
> 
> 时间：2012-06-21T08:07:02.610
> 
> 标签：jquery, hoverintent, simpletip

我有同样的问题：

[显示工具提示前的延迟](https://stackoverflow.com/questions/4797769/delay-before-showing-the-tooltip)

在显示工具提示之前我需要延迟。

所以我想使用[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件。

我不明白如何组合这两个插件。

```
$("#demo2 li").hoverIntent( makeTall, makeShort ) 
```

和

```
$("#demo2 li").simpletip() 
```

一起

```
$("#demo2 li").hoverIntent(
       $("#demo2 li").simpletip("show"),
       $("#demo2 li").simpletip("hide")
) 
```

对我不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:14:15.483

```
var timeout = null;
$("#demo2 li").onmouseenter(function(){
  clearTimeout(timeout);
  timeout = setTimeout(function(){
          $(this).fadeTo(1, "slow"); // or any other action
         }, 300);
})
.onmouseleave(function(){
  clearTimeout(timeout);
  timeout = setTimeout(function(){
          $(this).fadeTo(0.3, "fast"); // or any other action
        }, 300);
}); 
```

也许是一个日历插件，或者一个不错的对话框。但不是为了延迟悬停。

# sql - 查询执行问题

> ID：11133963
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:07:18.433
> 
> 标签：sql, oracle

我有一个像这样的查询

```
select user_id ,'abc' as  user_name from t_user where user_refId=123 
```

，我想在这里再添加一个子句，例如

```
select user_id ,
'abc' as  user_name
select count(user) from users as user_num
 from t_user where user_refId=123 
```

这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:10:07.100

```
select user_id,
      'abc' as user_name, 
       (select count(user) from users)  as user_num
from t_user 
where user_refId=123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:14:51.890

请将`'abc' as user_name`and`select count(user) from users as user_num`语句分开，`","`并将第二个语句放在括号中，如`(select count(user) from users) as user_num`.

```
 select user_id,
      'abc' as user_name, 
       (select count(user) from users)  as user_num
       from t_user where user_refId=123; 
```

# html - 改变两个不同html属性的样式

> ID：11133971
> 
> 赞同：2
> 
> 时间：2012-06-21T08:07:35.620
> 
> 标签：html, css, iframe

我对 iframe 中的样式有疑问

问题我只能访问 css 文件

我可以说以下

```
<html>
<body>
...
<iframe src="abc" />
...
</body>
</html> 
```

无论如何我可以将第一个 html 的宽度更改为 960px，另一个更改为 100%，因为如果我更改 css 中的 html 属性，它将影响它们两者

我试过了`first-child`，`iframe html {}`但没有用

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:42:37.323

加载到 iframe 中的文档是一个独立的文档。CSS 不会通过 iframe 级联到其中。您可以使用它们自己的样式表独立地设置两个页面的样式。

# ios5 - iOS >> 如何为尚未分配/初始化的对象创建“占位符”数组

> ID：11133972
> 
> 赞同：0
> 
> 时间：2012-06-21T08:07:44.260
> 
> 标签：ios5, memory-management, init, alloc

在某个视图中，我有一堆 AVAudioPlayer 属性，每个属性都应该在某个用户操作时播放。在播放选定的 AVAudioPlayer 时，如果播放了另一个 AVAudioPlayer - 它应该停止。

为了管理它，我创建了一个包含所有 AVAudioPlayer 属性的数组，并且在用户选择时，在播放选定的 AVAudioPlayer 之前，我希望检查所有 AVAudioPlayer 并停止它们。

问题是创建数组的合理位置是在开始时（比方说，在 ViewDidLoad 中），此时没有任何 AVAudioPlayer 属性通过 alloc+init - 所以如果我在调试器中查看数组，它显示为空（对象数 = 0）。目前，我只在用户实际选择某个 AVAudioPlayer 时才执行 alloc+init 操作。

我也可以在开始时为所有 AVAudioPlayers 执行 alloc+init，但这会占用不必要的资源。

有没有办法在不占用所需资源的情况下创建这个数组？即用“空”对象创建数组，然后分配和启动它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:20:08.847

我也有类似的情况。我一直在做的是：

```
NSArray *myArray = [NSArray arrayWithObjects:@"",@"",@"",@""]; 
```

in `viewDidLoad`（如果我的数组将有 4 个对象）。然后，当我有可用的信息时，我会：

```
[myArray replaceObjectAtIndex:myLocationToAddValue withObject:myObject]; 
```

我看到了我公司的其他人用完全不同的语言编写的一个非常古老的项目中的一些代码，从而产生了这个想法。它似乎可以满足我的需要，并且它确实具有额外的好处，我可以遍历我的数组并检查

```
if ([[myArray objectAtIndex:i] length] == 0) 
```

看看我已经在哪里有物品了。我应该注意，我要添加的对象都将是 NSStrings - 如果它循环并发现一个对象已放入不是字符串的数组中（或者，更一般地说，没有“长度" 方法），我猜会发生一些令人讨厌的事情，但我还没有检查过。

我敢肯定一定有更好的解决方案，但我会把它放在那里，因为还没有任何答案。我认为一个看似有效的草率答案总比没有答案好。

# c# - 提高字符串生成器的性能

> ID：11133973
> 
> 赞同：2
> 
> 时间：2012-06-21T08:07:45.510
> 
> 标签：c#, .net

可以通过使用在线程堆栈上分配来使用指针按字符构建字符串`StringBuilder.Append()`来优化广泛的操作吗？`char[]`

```
 unsafe
        {
            const Int32 width = 1024;

            Char* msg = stackalloc Char[width];

            Int32 index = 0;

            property = Environment.MachineName;

            for (Int32 i = 0; i < property.Length; i++)
                    msg[index++] = property[i];             

            return new String(msg, 0, width);
        } 
```

与使用相比，这提供了大约 25% 的改进`StringBuilder`，因此不太令人满意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T08:13:56.713

如果您预先知道最终的字符串将有多大（就像您所做的那样），您可以构建`StringBuilder`具有该容量的开始，因此它花费更少的时间重新分配空间：

```
var sb = new StringBuilder();   
// capacity 16, will expand as needed

var sb30000 = new StringBuilder(30000);   
// capacity 30000, will not need to expand until that length is passed 
```

这可能会有所帮助。

# java - 如何使用 java 中的现有对象模拟方法？

> ID：11133975
> 
> 赞同：0
> 
> 时间：2012-06-21T08:07:48.947
> 
> 标签：java, mocking

有什么方法可以使用现有对象模拟某些方法？

我使用 Power Mock 来模拟私有方法，但找不到执行上述任务的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:18:52.373

如果我理解正确，您只需要删除一个真实对象的方法。如果是这种情况，并且如果您将 PowerMock 与[Mockito](http://code.google.com/p/mockito/)一起使用，您可以查看“间谍”功能。你可以[在这里找到一个例子](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:13:36.820

最简单的方法就是覆盖测试用例中的方法。

```
public class ClassToTest {

    public int someMethod() {
        return 1 + otherMethod();
    }

    protected int otherMethod() {
        return 2;
    }

}

public class ClassToTestTest {
    @Test
    public void testSomeMethod() {
        ClassToTest classUnderTest = new ClassToTest() {
            @Override
            protected int otherMethod() {
                return 3;
            }
        }
        Assert.assertEquals(4, classUnderTest.someMethod());
    }
} 
```

# php - wordpress中搜索的自定义

> ID：11133977
> 
> 赞同：3
> 
> 时间：2012-06-21T08:08:02.950
> 
> 标签：php, wordpress, plugins

> 我需要为我的网站自定义“搜索”。要求是仅按“类别”“作者”“日期时间”和两个“自定义字段”搜索帖子。或者是否有任何插件可以用于此任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:15:55.787

有一个名为*WP Custom Search*的插件。我使用这个插件按用户、类别搜索（使用自己的 ajax 脚本）。您也可以按自定义字段搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:19:26.133

[http://wordpress.org/extend/plugins/wp-custom-fields-search/](http://wordpress.org/extend/plugins/wp-custom-fields-search/)

或在 search.php 文件中工作，然后在此处使用[http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)或[http://codex.wordpress.org/Class_Reference/WP_Query更新查询](http://codex.wordpress.org/Class_Reference/WP_Query)

祝你好运！:)

# drupal - Drupal 6：不从 db_query() 填充选择列表

> ID：11133979
> 
> 赞同：0
> 
> 时间：2012-06-21T08:08:17.853
> 
> 标签：drupal, drupal-6, drupal-forms

我在使用选择列表的模块中制作了一个自定义表单，我试图用 OG 名称的名称填充它。

我为 db_query() & 编写了一个函数，它给了我准确的输出，但我无法从选择中填充它。

db_query() 的函数：-

```
function taskform_project_select(){
    $options=array();
    $project_query = "SELECT node.title FROM {node}, {og} WHERE node.nid = og.nid";
    $project_details = db_query($project_query);
    while($project_title = db_fetch_object($project_details)){
        $options = $project_title->title;       
        dpm($options);
    }
    return $options;
} 
```

表格中的代码：-

```
 $options = taskform_project_select();
  $form['edproject'] = array(
    '#type' => 'select', 
    '#title' => t('Project'),    
    '#options' => $options,
    '#description' => t('Choose a project'),
    '#prefix' => '<td>',
    '#suffix' => '</td>',
  ); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:28:57.723

正确的语法是：

```
$options[] = $project_title->title; 
```

..带方括号。

```
$options[$project_title->title] = $project_title->title; 
```

为结果提供有意义的键值。您还可以检索 nid 并将其用作密钥。

# ios - 如何从 url 中获取 xml 包含的 NSString？

> ID：11133980
> 
> 赞同：1
> 
> 时间：2012-06-21T08:08:19.347
> 
> 标签：ios, xml, cocoa, url

我知道如何使用 DOM 解析器解析 NSString 对象，但我不知道如何从 web 上的 xml 文件中获取该 NSString。

任何信息都有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:00:31.167

`NSString`根据在线`.xml`文件创建：

```
NSURL *theURL = [NSURL URLWithString:@"http://www.website.com/feed.xml"];
NSError *error = nil;
NSString *theXML = [NSString stringWithContentsOfURL:theURL encoding:NSUTF8StringEncoding error:&error]; 
```

# ios - 带有 SDK 绝对路径的 xcodebuild 命令

> ID：11133981
> 
> 赞同：8
> 
> 时间：2012-06-21T08:08:20.523
> 
> 标签：ios, xcode, command-line, sdk, xcodebuild

我正在使用**xcodebuild**命令行工具来构建 iOS 应用程序。

安装**Xcode45-DP1**后，它会自动使用来自新 Xcode45-DP1 应用程序包的 6.0 SDK 来构建应用程序。将此应用程序提交到 AppStore 时有 2 个问题。

1.  该应用程序现在使用最新的 SDK (6.0) 自动构建，尚未支持该应用程序，因此无法提交应用程序。解决方案：我将旧版 SDK (5.1) 复制到 Xcode45-DP.app 并在命令行中指定`-sdk iphoneos5.1`

2.  第二个问题是，当 ApplicationLoader 验证应用程序时，发现 SDK 是从不受支持的 Xcode 版本（45-DP1）使用并拒绝上传应用程序。解决方案：我想为 SDK 指定绝对路径，例如：`xcodebuild -sdk /path/to/5.1sdk...`

问题是 xcodebuild 总是说 SDK "/path/to/iPhoneOS5.1.sdk/" 找不到。

有没有人有过如何使用 sdk 的绝对路径以及它应该指向什么文件/目录的经验？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:07:09.163

我也一直在寻找这个，似乎没有直接的方法来获取特定 SDK 的完整绝对路径。但是，如果您为任意库设置`-sdk`开关并`-find-library`去掉最后几个路径部分，您可以获得完整的 sdk 路径，如下所示：

```
[ 13:02 jon@MacBookPro ~ ]$ export SYS_ROOT=`xcodebuild -sdk iphoneos6.0 -find-library system`
[ 13:02 jon@MacBookPro ~ ]$ echo "${SYS_ROOT/\/usr\/lib\/libsystem.dylib/}"
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk

[ 13:02 jon@MacBookPro ~ ]$ export SYS_ROOT=`xcodebuild -sdk iphonesimulator6.0 -find-library system`
[ 13:02 jon@MacBookPro ~ ]$ echo "${SYS_ROOT/\/usr\/lib\/libsystem.dylib/}"
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk 
```

# python - 自定义模型 app_label 不适用于 django 1.4？

> ID：11133984
> 
> 赞同：1
> 
> 时间：2012-06-21T08:08:24.173
> 
> 标签：python, django

我做了一个非常简单的应用程序来存储可以在 django 管理界面上编辑的变量：

模型很简单：

```
class LiveGlobal(models.Model):
    name = models.CharField(max_length=30,primary_key=True)
    value = models.CharField(max_length=255)
    comment = models.CharField(max_length=255, blank=True)

    def __unicode__(self):
        return '%s = %s (%s)' % (self.name,self.value,self.comment) 
```

管理员太：

```
class LiveGlobalAdmin(admin.ModelAdmin):
    list_display=('name','value','comment')
    search_fields = ('name','value','comment')
admin.site.register(LiveGlobal, LiveGlobalAdmin) 
```

它运作良好，但现在我想在管理索引页面上将“实时全局”更改为“全局变量”，为此我放入模型：

```
class Meta:
        app_label = 'Global variables' 
```

但是我在管理界面上收到了这条消息：

```
Reverse for 'app_list' with arguments '()' and keyword arguments '{'app_label': 'Global variables'}' not found. 
```

为什么 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:13:10.397

更改您的 app_label，如下所示：

```
app_label = 'global_variables' 
```

小写且无空格

# deployment - 在哈德逊部署 Bndtools 项目

> ID：11133987
> 
> 赞同：0
> 
> 时间：2012-06-21T08:08:33.200
> 
> 标签：deployment, hudson, bndtools

因为我是使用 Bndtools 开发 OSGi 的忠实粉丝。我也想将它用于我的新项目请求。但一项要求是所有构建过程都应由 Hudson 完成。

我的问题是如何实现我可以使用连接到我的 Bndtools 项目的 Hudson？也许有人为我提供了分步教程:) 此外，Hudson 会使用 OBR 来解决 Bndtools 正在做的依赖关系吗？这样的部署过程应该如何？顺便说一句，Bndtools 有一个“集成测试”项目环境，它在后台启动一个 OSGi 环境。哈德森会理解这种测试吗？

尽可能多地使用 Bndtools 的最佳实践是什么？

谢谢你的帮助。

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:52:51.413

我找到了一种方法，只需在每个项目 build.xml 中使用自定义主 build.xml 进行迭代。我工作，没什么特别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:48:38.590

在 hudson 中创建一个新的构建任务并在那里定义 ant 构建步骤，而不是引入和维护一个新的构建文件。为每个项目创建一个 ant 构建步骤。

在我的例子中，我创建了一个名为 BuildAll 的任务，其中包含几个 ant 构建步骤。

# logging - 将日志记录添加到 MFC 桌面应用程序 *编译后*

> ID：11133990
> 
> 赞同：0
> 
> 时间：2012-06-21T08:08:45.373
> 
> 标签：logging, mfc, aop

我们有一个用 C++ 编写的大型遗留应用程序。我需要追踪一个仅在特定异常情况下长时间后才会出现的错误。我们有时可以让它在实验室中失败。

我想追求的一种途径是在编译ala PostSharp for .net 但用于Microsoft MFC（win32）之后注入某种日志记录。这优于手动添加数千行日志记录代码（但我最终可能会尝试扩展我的 python 技能来自动化一个特殊的构建，但我对此无能为力。

我的互联网搜索技能让我失望（或者没有这样的事情）

**关于更广泛背景的注释：**我也在研究性能计数器并正在使用故障转储，但这是为时已晚后的状态，而不是如何到达那里。我也在尝试追踪非恶意软件[键盘记录器或记录工具](https://stackoverflow.com/questions/9805205/video-and-or-key-logger-for-user-activity-before-application-crash)

# java - 支付网关重复交易检测？

> ID：11133993
> 
> 赞同：0
> 
> 时间：2012-06-21T08:08:56.167
> 
> 标签：java, transactions, payment-gateway

我在了解我当前的支付网关（[ProcessPink](http://www.processpink.com/)）如何识别重复交易时遇到了一些问题。“文件人”说：

> 如果同一张信用卡在 20 分钟内发生 2 笔相同金额的交易，则会被视为重复交易。将返回一个错误。

我个人认为这是一个过于简单的技术，它可以防止我们的客户发出 2 个订单：例如，我们的网上商店有 2 个价格相同的东西，我怎么能告诉人们应该等待 20 分钟再尝试购买第二个？

这是我的问题：

1) 这是支付网关的流行做法吗？或者有其他选择吗？

2）我该如何解决这个问题？我想到了一个购物车，但它不适合我的上下文。简而言之，我的应用程序需要在 20 分钟内执行 2 次或更多单独的交易（来自同一张卡且金额相同）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:46:42.503

1.  是的，但通常时间窗口较小且可调整。Authorize.Net 的默认值为 3 分钟，您可以在交易期间使用参数更改它。

2.  仅在第二次购买时进行授权，然后在 20 分钟后获取。设置和做起来很痛苦，但我看不到任何其他用户友好的方式来解决这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-08T09:23:00.580

您的系统可以为每笔交易生成一个唯一的密钥。然后实现一个自动验证机制：如果系统检测到重复的密钥，那么它应该拒绝它。

# asp.net - 如何使用存储过程将图像存储在sql中？

> ID：11133996
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:09:06.480
> 
> 标签：asp.net, sql, sql-server, stored-procedures

在我的网页图像从文件上传控件中获取，它必须存储在 sql server.how 编写存储过程以将图像保存在 sql server 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:22:58.847

一些示例代码（未经测试，可能需要一些修复）：

```
CREATE PROCEDURE SaveFile(@id int, @file varbinary(max)) AS

INSERT INTO MyFiles VALUES(@id, @file)
GO 
```

在 .NET 代码中：

```
SqlCommand comm = new SqlCommand(@"SaveFile")
comm.CommandType = CommandType.StoredProcedure;

SqlParameter id = new SqlParameter("int", SqlDbType.Int);
id.value = 1; // some id

FileStream fileStream = ... your file;
byte[] buf = new byte[fileStream.length];
fileStream.Read(buf, 0, buf.length);
SqlParameter file = new SqlParameter("@file", SqlDbType.VarBinary, buf.Length);
file.Value = buf;

comm.Parameters.Add(id)    
comm.Parameters.Add(file)

comm.Execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:13:00.143

只需使用通常的存储过程，只需使用不同的数据类型，将其保存为字节数组，因此您必须先将图像转换为字节数组，然后再将其作为参数传递给您的存储过程，同时保存长度和文件类型。

这是一个示例存储过程。我会把剩下的留给你。如果您知道如何在 Web 应用程序中执行查询，则可以调用此过程。只是谷歌它。

```
USE [mydatabasename]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[myprocedurename]

    @ImageFile image,
    @FileType nvarchar(10),
    @FileSize int
AS
-- INSERT a new row in the table.
INSERT [dbo].[mytablename]
(
    [ImageFile],
    [FileType ],
    [FileSize ]
)
VALUES
(
    @ImageFile,
    @FileType,
    @FileSize
)
-- Get the IDENTITY value for the row just inserted.
SELECT @ImageId=SCOPE_IDENTITY() 
```

我猜图像文件类型将过时，所以你应该使用不同的文件类型来保存你的字节

# iphone - 如何强制我的 iPhone 应用程序保持在特定方向

> ID：11133997
> 
> 赞同：0
> 
> 时间：2012-06-21T08:09:08.037
> 
> 标签：iphone, ios, xcode, uiviewcontroller, uinavigationcontroller

是的，我知道这个问题已经被问过很多次了，但是我找不到任何可以进一步帮助我的东西。

使用带有 3 个视图控制器的导航控制器，我需要保留以前屏幕中的数据，所以我不使用 segue，但像这样：

```
// When button is pressed
- (IBAction)changeView:(id)sender {
NSLog(@"Skipped connection screen");
ViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondView"];

[self.navigationController pushViewController:vc animated:YES]; 
```

其中 SecondView 是应该出现的视图控制器的标识符。因为我只希望旋转在水平右侧，所以我在每个 .m 文件的顶部添加了这段代码，用于我的视图：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

return (self.interfaceOrientation == UIInterfaceOrientationLandscapeRight);  
} 
```

在我的 project-Info.plist 中，我添加了`Initial interface orientation = Landscape (right home button`，在我的项目设置中，我只添加了对这个方向的支持。

问题是，在 iPhone 上运行时，如果我以任何一种方式转动手机，方向都会从横向改变。当我试图把它转回来时，它就不会了。我想确保此应用程序**永远**无法从横向旋转。

有什么建议么？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:22:30.623

我认为如果您将以下密钥添加到您的 .plist 文件中，那么它将被修复。

`"Supported interface orientations"` 此键的值可以是`"Landscape (right home button)"`您想要的任何值，因此您的应用程序将仅支持指定的方向。

还要将此代码添加到每个视图控制器中。

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)toInterfaceOrientation{
return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:19:58.690

您应该在“返回”代码中使用该参数：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
   return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);  
} 
```

# symfony - 如何在电子邮件发件人上加上名字？

> ID：11133999
> 
> 赞同：5
> 
> 时间：2012-06-21T08:09:12.770
> 
> 标签：symfony, swiftmailer

当我在 Symfony2 应用程序中发送电子邮件时，我正在尝试命名发件人

```
Administrator <no-reply@app.com> 
```

我已经尝试过`parameters.ini`：

```
mailer_from      = {"no-reply@app.com : Administrator"} 
```

似乎可以这样做，因为在 SimpleMessage.php 中我们确实有：

```
 /**
   * Set the sender of this message.
   * This does not override the From field, but it has a higher significance.
   * @param string $sender
   * @param string $name optional
   * @return Swift_Mime_SimpleMessage
   */
  public function setSender($address, $name = null)
  {
    if (!is_array($address) && isset($name))
    {
      $address = array($address => $name);
    }

    if (!$this->_setHeaderFieldModel('Sender', (array) $address))
    {
      $this->getHeaders()->addMailboxHeader('Sender', (array) $address);
    }
    return $this;
  } 
```

**我尝试的所有事情都`parameters.ini`失败了。你知道我做错了什么吗？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-04T23:08:01.780

```
// Set a single From: address
$message->setFrom('your@address.tld');

// Set a From: address including a name
$message->setFrom(array('your@address.tld' => 'Your Name'));

// Set multiple From: addresses if multiple people wrote the email
$message->setFrom(array(
  'person1@example.org' => 'Sender One',
  'person2@example.org' => 'Sender Two'
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:20:20.847

> 似乎可以这样做，因为在 SimpleMessage.php 我们确实有

好吧，可以设置名称，但没有任何迹象表明您可以使用配置进行设置。

`SwitfMailerBundle` ( )的可用配置的快速转储`php app/console config:dump-reference SwiftmailerBundle`将返回：

```
Default configuration for "SwiftmailerBundle"
swiftmailer:          
    transport:            smtp 
    username:             ~ 
    password:             ~ 
    host:                 localhost 
    port:                 false 
    encryption:           ~ 
    auth_mode:            ~ 
    spool:                
        type:                 file 
        path:                 %kernel.cache_dir%/swiftmailer/spool 
    sender_address:       ~ 
    antiflood:            
        threshold:            99 
        sleep:                0 
    delivery_address:     ~ 
    disable_delivery:     ~ 
    logging:              true 
```

如您所见，有`sender_address`which 被传递给`ImpersonatePlugin.php`.

我不确定，您是否可以设置名称，但标准的方式，原始地，是使用该形式的字符串：

“行政人员 ”

如果它不工作，它可能意味着，你会做一些工作，写一个真正的EmailManager。

SwiftMailerBundle 实际上只是 SwiftMailer 库的一个集成，它是一个库，而不是一个“Manager”。