# StackOverflow 问答 11403000-11403999

# java - lwjgl isKeyDown 取消其他键

> ID：11403010
> 
> 赞同：0
> 
> 时间：2012-07-09T20:56:36.187
> 
> 标签：java, opengl, conflict, lwjgl

在尝试创建一个通过键盘按键操作正方形的简单游戏时，我遇到了一个小而令人恼火的问题。我希望它能够工作，以便当按下相反的方向键时，角色会停止；在这种情况下，角色可能会在停止时移动其他两个方向。

这在按住 LEFT 和 RIGHT 的情况下完美工作；玩家可以向上或向下移动。但是，如果按住 UP 和 DOWN，玩家将不会移动，Java 也不会识别出按下了 LEFT 或 RIGHT 键。

```
import java.util.ArrayList;
import java.util.Random;

import org.lwjgl.*;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.*;

import static org.lwjgl.opengl.GL11.*;

public class Main {
    private Man p;
    private ArrayList<Integer> keysDown, keysUp;
    public Main() {
        try {
            Display.setDisplayMode(new DisplayMode(640, 480));
            Display.setTitle("LWJGLHelloWorld");
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
        }

        p = new Man(0, 0);
        keysDown = new ArrayList<>();
        keysUp = new ArrayList<>();

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, 640, 480, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);

        while (!Display.isCloseRequested()) {
            glClear(GL_COLOR_BUFFER_BIT);

            checkKeys();

            p.draw();

            Display.update();
            Display.sync(60);
        }

        Display.destroy();
    }

    public void checkKeys() {
        ArrayList<Integer> keys = new ArrayList<>();
        keys.add(Keyboard.KEY_A);
        keys.add(Keyboard.KEY_D);
        keys.add(Keyboard.KEY_W);
        keys.add(Keyboard.KEY_S);

        for (int key : keys) {
            if (Keyboard.isKeyDown(key)) 
                keysDown.add(key);
            else 
                keysUp.add(key);
        }

        keysDown.removeAll(keysUp);
        keysUp = new ArrayList<>();

        int speed = 4;
        int dx = 0;
        int dy = 0;
        if (keysDown.contains(keys.get(2))) {
            System.out.println("keyUP");
            dy -= speed;
        }
        if (keysDown.contains(keys.get(3))) {
            System.out.println("keyDOWN");
            dy += speed;
        }
        if (keysDown.contains(keys.get(0))) {
            System.out.println("keyLEFT");
            dx -= speed;
        }
        if (keysDown.contains(keys.get(1))) {
            System.out.println("keyRIGHT");
            dx += speed;
        }
        //if (keysDown.contains(keys.get(0)) && keysDown.contains(keys.get(1))) dx = 0;

        //if (keysDown.contains(keys.get(2)) && keysDown.contains(keys.get(3))) dy = 0;
        p.update(dx, dy);

    }

    public static void main(String[] args) {
        new Main();
    }

    class Man {
        public int x, y, w, h;
        public float cR, cG, cB;

        public Man(int x, int y) {
            this.x = x;
            this.y = y;
            w = 50;
            h = 50;

            Random rand = new Random();
            cR = rand.nextFloat();
            cG = rand.nextFloat();
            cB = rand.nextFloat();
        }

        public void draw() {
            glColor3f(cR, cG, cB);
            glRecti(x,  y,  x+w,  y+h);
        }

        public void update(int dx, int dy) {
            x += dx;
            y += dy;
        }
    }
} 
```

这就是我正在使用的代码。此外，我不确定如何编译除了 slick-util 之外还使用 lwjgl 库的可执行 jar。

编辑：我忘了提到当前的设置：ASDW，它有问题。我在使用 JKLI 和 LEFT RIGHT UP DOWN 时也遇到了这些问题。如果将其更改为一行中的键（例如：ASDF），它将按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:44:25.207

您遇到了键盘的硬件限制，[此处](https://gaming.stackexchange.com/questions/6669/how-do-i-remove-the-limit-on-pc-keyboard-button-presses)的答案中对此进行了描述。

您可能想尝试使用另一个键盘，如果可能的话，一个 ps/2 键盘，因为它们允许[全键翻转](http://www.overclock.net/t/491752/mechanical-keyboard-guide#post_6009418)。

# ios - Xcode 推送和弹出视图以保存数据

> ID：11403013
> 
> 赞同：0
> 
> 时间：2012-07-09T20:56:39.520
> 
> 标签：ios, cocoa-touch, uitableview, uinavigationcontroller, pushviewcontroller

我正在尝试将数据从 FirstView（一个文本字段和一个按钮）记录到 SecondView（UiTableView），例如联系人列表。我想简要解释一下我的代码。

我在 AppDelegate.m 中添加了带有 TabBar 的 NavigationController；

```
UINavigationController *pointer = [[UINavigationController alloc] init];
self.window.rootViewController = pointer;
[pointer setNavigationBarHidden:NO];
[pointer pushViewController:self.viewController animated:YES]; 
```

我已经使用 a`[self.navigationController pushViewController:push animated:YES];`将数据推送到第二个屏幕，但它总是转到另一个 NavigationController 视图作为带有 BACK 按钮的循环，然后我使用 `[self.navigationController popToRootViewControllerAnimated:YES];`它不会将数据传递到另一个视图。除非我完全关闭程序并再次打开它。那么有没有办法同时push和pop呢？或者你能告诉我另一种方式吗？

提前致谢。

注意我已经在这个链接中分享了我的代码； [我的代码](https://docs.google.com/document/d/1NEuMa7g5PRrF64-E8-5aRAG51cFQN8dutn3Wnfgz63o/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:22:57.340

您可以尝试创建一个`singleton`管理这些数据的类。然后您只需在整个代码中调用相同的单例类，它应该在您的应用程序的整个生命周期中保持相同的状态。

或者，更简单的方法是将“myArray”设置为您的 App Delegate 中的属性。然后，在您的类的实现文件中，执行以下操作：

```
UIApplicationDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
appDelegate.myArray = newArray; 
```

这假设 myArray 和 newArray 已正确初始化。

# apache - mod_rewrite 反斜杠转义

> ID：11403018
> 
> 赞同：0
> 
> 时间：2012-07-09T20:56:53.220
> 
> 标签：apache, .htaccess, url, mod-rewrite

我目前正在使用 mod_rewrite 重写我的一些 URL，但是在使用 2 个参数时遇到了问题。我想要的结果是有 Search/search-term/Page-1 但是当我使用以下...

```
RewriteRule ^Search/([^/.]+)/Page-([0-9]+)$ Search/index.php?search=$1&pageno=$2 [L] 
```

它不能正常工作。从那以后，我发现问题是搜索后的第一个/之后，因为当我将规则更改为...

```
RewriteRule ^Search-([^/.]+)/Page-([0-9]+)$ Search/index.php?search=$1&pageno=$2 [L] 
```

然后 URL 重写工作完美。

我是否需要以某种方式逃避第一个反斜杠？谁能想到为什么这行不通？

提前致谢。

# dart - 在 Dart 中按类映射

> ID：11403020
> 
> 赞同：5
> 
> 时间：2012-07-09T20:56:56.493
> 
> 标签：dart

我正在将一些 Java 代码移植到 Dart，它大量使用了这些类型的映射：

```
Map<Class<? extends SomeClass>, SomeOtherClass> map = new HashMap<>(); 
```

目前这在飞镖中似乎是不可能的。我知道有一个引入第一级类型的提议：http: [//news.dartlang.org/2012/06/proposal-for-first-class-types-in-dart.html](http://news.dartlang.org/2012/06/proposal-for-first-class-types-in-dart.html)这将引入

```
class Type {
    @native String toString();
    String descriptor(){...} // return the simple name of the type
} 
```

所以在这个提议得到实施之前，我已经创建了以下类：

```
class Type {
    final String classname;
    const Type(this.classname);
    String descriptor() => classname;
} 
```

我需要它的类有一个简单的get方法

```
abstract Type get type(); 
```

这样我就可以`Type`像使用真实的一样使用我的`Type`，稍后切换我只需要删除我的解决方法。

我的问题：在引入真正的课程之前，是否有一些做这种映射的飞镖方式（我没有看到）或者我这样做的方式是一种合理的解决方法`Type`？

**Dart 1.0 更新**

可以这样做：

```
var map = new Map<Type, SomeOtherClass>();
// either
map[SomeOtherClass] = new SomeOtherClass();
// or
var instance = new SomeOtherClass();
map[instance.runtimeType] = instance; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:26:30.387

**更新**：这种结构目前在 Dart 中是不可行的

```
Map<Class<? extends SomeClass>, SomeOtherClass> 
```

您将不得不等待**.type/.class**到达，以便找到一个优雅的解决方案（我们很多 Dartisans 都希望它能够早日到达）。但是对于更简单的情况

```
Map<? extends SomeClass, SomeOtherClass> 
```

你可以做

```
 Map<SomeClass, SomeOtherClass> aMap; 
```

与 Dart 一样，任何扩展**SomeClass**的类也将是有效的**SomeClass**。例如，如果您在检查模式下运行以下代码：

```
main() {
  Map<Test, String> aMap = new HashMap<Test, String>();
  var test = new Test("hello");
  var someTest = new SomeTest("world");
  var notATest = new NotATest(); 

  aMap[test] = test.msg;
  aMap[someTest] = someTest.msg;
  aMap[notATest] = "this fails";
}

class Test implements Hashable {
  Test(this.msg);

  int hashCode() => msg.hashCode();

  final String msg;
}

class SomeTest extends Test {
  SomeTest(String message): super(message);
}

class NotATest implements Hashable {
  int hashCode() => 1;
} 
```

然后你会得到错误：

```
type 'NotATest' is not a subtype of type 'Test' of 'key'. 
```

# exception-handling - 我应该如何在 WebAPI 的控制器构造函数中处理异常？

> ID：11403028
> 
> 赞同：18
> 
> 时间：2012-07-09T20:57:18.790
> 
> 标签：exception-handling, asp.net-web-api, asp.net-4.5

假设我有一个构造函数，由于我无法控制的原因，它的初始化可能会引发异常。

```
FantasticApiController(IAwesomeGenerator awesome,
    IBusinessRepository repository, IIceCreamFactory factory)
{
       Awesome = awesome;
       Repository = repository;
       IceCream = factory.MakeIceCream();

       DoSomeInitialization(); // this can throw an exception
} 
```

通常，当 WebAPI 中的 Controller 操作引发异常时，我可以通过 csutom 处理它`ExceptionFilterAttribute`：

```
public class CustomErrorHandler
{
    public override void OnException(HttpActionExecutedContext context)
    {
        // Critical error, this is real bad.
        if (context.Exception is BubonicPlagueException)
        {
            Log.Error(context.Exception, "CLOSE EVERYTHING!");
            Madagascar.ShutdownAllPorts();
        }

        // No big deal, just show something user friendly
        throw new HttpResponseException(new HttpResponseMessage
        {
            Content = new StringContent("Hey something bad happened. " +
                                        "Not closing the ports though"),
            StatusCode = HttpStatusCode.InternalServerError;
        });
    } 
```

因此，如果我有一个`BoardPlane`抛出 的 API 方法`BubonicPlagueException`，那么我`CustomerErrorHandler`将关闭到马达加斯加的端口并按预期将其记录为错误。在其他情况不严重的情况下，我只是显示一些用户友好的消息并返回 500 `InternalServerError`。

但是在那些`DoSomeInitialization`抛出异常的情况下，这绝对没有任何作用。**如何处理 WebAPI 控制器构造函数中的异常？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T14:31:37.967

WebApi 控制器被创建，因此构造函数通过 HttpControllerActivators 调用。默认激活器是 System.Web.Http.Dispatcher.DefaultHttpControllerActivator。

github 上选项 1 和 2 的非常粗略的示例[https://github.com/markyjones/StackOverflow/tree/master/ControllerExceptionHandling/src](https://github.com/markyjones/StackOverflow/tree/master/ControllerExceptionHandling/src)

**效果很好的**选项 1涉及使用 DI 容器（您可能已经在使用一个）。**我在示例中使用了 Ninject，并使用“拦截器”[阅读更多内容](http://innovatian.com/2010/03/using-ninject-extensions-interception-part-1-the-basics/)来拦截和尝试/捕获对 DefaultHttpControllerActivator 上的 Create 方法的调用。我至少知道 AutoFac 和 Ninject 可以做与以下类似的事情：**

 ***创建拦截器*

我不知道您的 Madagascar 和 Log 项目的生命周期范围是多少，但它们很可能被注入到您的拦截器中

```
public class ControllerCreationInterceptor : Ninject.Extensions.Interception.IInterceptor
{
    private ILog _log;
    private IMadagascar _madagascar;

    public ControllerCreationInterceptor(ILog log, IMadagascar madagascar)
    {
        _log = log;
        _madagascar = madagascar;
    } 
```

但请注意您问题中的示例，其中 Log 和 Madagascar 是某种静态全局

```
public class ControllerCreationInterceptor : Ninject.Extensions.Interception.IInterceptor
{

    public void Intercept(Ninject.Extensions.Interception.IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
        }
        catch(InvalidOperationException e)
        {
            if (e.InnerException is BubonicPlagueException)
            {
                Log.Error(e.InnerException, "CLOSE EVERYTHING!");
                Madagascar.ShutdownAllPorts();
                //DO SOMETHING WITH THE ORIGIONAL ERROR!
            }
            //DO SOMETHING WITH THE ORIGIONAL ERROR!
        }
    }
} 
```

*最后在全局 asax 或 App_Start (NinjectWebCommon)*中注册拦截器**

 *```
kernel.Bind<System.Web.Http.Dispatcher.IHttpControllerActivator>()
            .To<System.Web.Http.Dispatcher.DefaultHttpControllerActivator>().Intercept().With<ControllerCreationInterceptor>(); 
```

**方案二**是实现自己的Controller Activator，实现IHttpControllerActivator接口，并在Create方法中处理创建Controller的错误。您可以使用装饰器模式来包装 DefaultHttpControllerActivator：

```
public class YourCustomControllerActivator : IHttpControllerActivator
{
    private readonly IHttpControllerActivator _default = new DefaultHttpControllerActivator();

    public YourCustomControllerActivator()
    {

    }

     public System.Web.Http.Controllers.IHttpController Create(System.Net.Http.HttpRequestMessage request, System.Web.Http.Controllers.HttpControllerDescriptor controllerDescriptor, Type controllerType)
    {
        try
        {
            return _default.Create(request, controllerDescriptor, controllerType);
        }
        catch (InvalidOperationException e)
        {
            if (e.InnerException is BubonicPlagueException)
            {
                Log.Error(e.InnerException, "CLOSE EVERYTHING!");
                Madagascar.ShutdownAllPorts();
                //DO SOMETHING WITH THE ORIGIONAL ERROR!
            }
            //DO SOMETHING WITH THE ORIGIONAL ERROR!
            return null;
        }

    }
} 
```

一旦你有了自己的自定义激活器，就可以在全局 asax中[切换默认激活器：](http://lucid-nonsense.co.uk/dependency-injection-web-api-and-mvc-4-rc/)

```
 GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerActivator), new YourCustomControllerActivator()); 
```

**选项 3**当然，如果您在构造函数中的初始化不需要访问实际的控制器方法、属性等......即假设它可以从构造函数中删除......那么将初始化移动到一个过滤器，例如

```
public class MadagascarFilter : AbstractActionFilter
{
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
    try{
          DoSomeInitialization(); // this can throw an exception
        }
        catch(BubonicPlagueException e){
    Log.Error(e, "CLOSE EVERYTHING!");
        Madagascar.ShutdownAllPorts();
            //DO SOMETHING WITH THE ERROR                           
        }

        base.OnActionExecuting(actionContext);
    }

public override void OnActionExecuted(System.Web.Http.Filters.HttpActionExecutedContext actionExecutedContext)
    {
        base.OnActionExecuted(actionExecutedContext);
    }

    public override bool AllowMultiple
    {
        get { return false; }
    }

} 
```***

# javascript - Mozilla 和 Opera 'background-size:cover' 不起作用

> ID：11403034
> 
> 赞同：0
> 
> 时间：2012-07-09T20:57:42.543
> 
> 标签：javascript, jquery, css

我正在制作一个带有背景图像滑块的网站，其中图像必须覆盖它们所在的 div 元素的 100% 宽度和高度。问题是在 Safari 和 Chrome 中一切正常，但在 Opera 和 Mozilla Firefox 中，图像无法缩放。

我尝试添加 '-o-background-size:cover' 和 '-moz-background-size:cover' 但这并没有成功。

这是代码：`

```
---HEAD---

        ....
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="css/style.css" type="text/css" />

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

        <script type="text/javascript">
         $(document).ready(function()
            {
         var imgArr = new Array() // relative paths of images
         imgArr[0]="images/artema_big.jpg";
         imgArr[1]="images/donskoi_big.jpg";
         imgArr[2]="images/dzerzhinski_big.jpg";

         var preloadArr = new Array();
         var i;

         /* preload images */
         for(i=0; i < imgArr.length; i++){
         preloadArr[i] = new Image();
         preloadArr[i].src = imgArr[i];
         }

         var currImg = 1;
         var intID = setInterval(changeImg, 1000);

         /* image rotator */
         function changeImg(){
         $(".fakeBackground").animate({opacity: 0}, 1000, function(){
         $(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src +')top left no-repeat');
         }).animate({opacity: 1}, 1000);

         };

         });

        </script>

    </head>
<body>

    <div class="parent">
     <div class='fakeBackground'></div>

         <div class="menuLeft">
         <div class="logo"></div>
            <ul id="menu">
                <li class="about"><a href="http://">О клубе</a></li>
                <li class="offers"><a href="http://">Услуги</a></li>
                <li class="cards"><a href="http://">Карты</a></li>
                <li class="personal"><a href="http://">Персонал</a></li>
                <li class="news"><a href="http://">Новости</a></li>
                <li class="contacts"><a href="http://">Контакты</a></li>

            </ul> 

        </div>
      </div>
            <div class="rightBottom"><img src="images/virtualTour.png" alt="virtual_tour" /></div>
     </div>
        </div>

</body>
</html> 
```

和 CSS：

```
 *{
    margin: 0px;
    }
    body, html{
    height: 100%;
    margin: 0px;
    }

    .parent {
    width: 100%;
    height: 100%;
    margin: 0px auto;
    position: relative;

    }   
    .parent .fakeBackground {
     position: absolute;
     z-index: -1;
     width: 100%;
     height: 100%;
     margin: 0px auto;
     background-size: cover;
     -o-background-size: cover;
     background: url(../images/artema_big.jpg) no-repeat;
     background-position: center center;
     }

    .logo{
    width: 188px;
    height: 78px;
    background-image: url(../images/logo.png);
    margin-bottom: 20px;
    margin-left: 60px;
    }

    .menuLeft{

    width: 678px;
    height: 100%;
    background-image: url(../images/artemaDescr.png);
    background-size: cover;
    background-repeat: no-repeat;
    }

    #menu li{
    list-style: none;
    margin-bottom: 10px;
    position: relative;
    }

    #menu li a{
    font-family: Arial;
    font-size: 14px;
    border-bottom: 1px dotted;
    text-decoration: none;
    color: #373e96;
    }

    /*Menu Items*/

    .about{

    margin-left: 70px;
    }

    .offers{
    margin-left: 60px;
    }

    .cards{
    margin-left: 50px;
    }

    .personal{
    margin-left: 11px;
    }

    .news{
    margin-left: 5px;
    }
    .contacts{
    margin-left: -10px;
    }

    .rightBottom{
    position: absolute;
    bottom: 0;
    right: 0;
    width: 301px;
    height: 520px;
    display: block;
} 
```

任何帮助将不胜感激。

PS。该网站的链接是：[http ://sportmax.codo.dn.ua](http://sportmax.codo.dn.ua)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:36:08.250

问题可能是“背景”覆盖了“背景大小”。还看

[这个答案](https://stackoverflow.com/questions/6739178/css-cant-get-background-size-contain-to-work-in-firefox-5)。

因此，在必要时将背景放在首位。

# javascript - 如何访问 jquery 插件中的函数？

> ID：11403038
> 
> 赞同：0
> 
> 时间：2012-07-09T20:57:51.783
> 
> 标签：javascript, jquery, youtube

我正在使用我找到的这个 youtube api jquery 插件（代码位于此处）：

[http://pastie.org/4227879](http://pastie.org/4227879)

在我的 index.html 中，我编写了这段代码来访问插件，在我想要使用的插件的第 124 行调用了一个函数`seekTo`。

```
$(document).ready(function(){

    $('#player').youTubeEmbed({
        video :"http://www.youtube.com/watch?v=0NcJ_63z-mA",
        width: 500,
        // access seekTo here i.e. seekTo(123, true)
        }); 
```

那可能吗？谢谢 ：））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:11:02.137

修改插件将是最简单的方法。只需将数据值添加到`originalDiv`.

```
$(elements.originalDiv).data("youTubeEmbed",elements);
return elements.originalDiv; 
```

现在，您可以通过以下方式访问它：

```
$("#player").data("youTubeEmbed").elements.player.seekTo(123,true); 
```

# php - 将多个 SQL 查询合并为一个

> ID：11403039
> 
> 赞同：0
> 
> 时间：2012-07-09T20:57:54.047
> 
> 标签：php, mysql, sorting, while-loop

我知道这可能真的很简单，但我试图找到一些类似的例子但失败了。

问题是我想从数据库中的图库中列出 8 张随机图像，按添加日期排序。我已经设法做到了这一点，但只有几个迭代查询变得非常慢。因此，如果有人会这么好心地教我将它们组合起来以获得更快的速度，我想 UNION 是要走的路吗？这是我的工作（但代码很慢）

```
<?php       
        $latestPictures = mysql_query("SELECT pictureID, addedDate FROM picture ORDER BY addedDate DESC LIMIT 8"); 

        $latestConcerts = mysql_query("SELECT concertID, addedDate FROM concert WHERE pictureID is null ORDER BY addedDate DESC LIMIT 8"); 

        // Add concerts and pictures to array
        while($curFestival = mysql_fetch_object($latestPictures))
        {
            $array[$curFestival->addedDate] = "p" . $curFestival->pictureID;
        }

        while($curConcert = mysql_fetch_object($latestConcerts))
        {
            $array[$curConcert->addedDate] = "c" . $curConcert->concertID;
        }

        // Order array by key
        krsort($array);

        $latestArray = array_slice($array, 0, 8);

        foreach($latestArray as $key => $value) {

            $type = substr($value, 0, 1);
            $ID = substr($value, 1);

            // If type == picture
            if($type == 'p')
            {           
                $picturesPicturesID = mysql_query("SELECT concertID, name FROM photo WHERE concertID IN(SELECT concertID FROM concert WHERE pictureID = $ID) ORDER BY photoID");

                // Get random picture
                $curRandomPicture = rand(0, (mysql_num_rows($picturesPicturesID) - 1));
                $curPictureConcertID = mysql_result($picturesPicturesID, $curRandomPicture, "concertID");
                $curPictureName = mysql_result($picturesPicturesID, $curRandomPicture, "name");             
                $curPicture = mysql_fetch_object(mysql_query("SELECT c.URL, p.name FROM concert c, picture p WHERE p.pictureID = c.pictureID AND c.concertID = $curPictureConcertID")); 

             echo "Some image"; 
             }
            // If type == concert
            if($type == 'c')
            {
                $concertPicturesID = mysql_query("SELECT concertID, name FROM photo WHERE concertID = $ID ORDER BY photoID");

                // Get random picture
                $curRandomPicture = rand(0, (mysql_num_rows($concertPicturesID) - 1));  
                $curPictureConcertID = mysql_result($concertPicturesID, $curRandomPicture, "concertID");
                $curPictureName = mysql_result($concertPicturesID, $curRandomPicture, "name");              
                $curPicture = mysql_fetch_object(mysql_query("SELECT URL, name FROM concert WHERE concertID = $curPictureConcertID")); 

            echo "Some image";
            }
        }
?> 
```

我意识到我忘了包括表格，它们是：

```
TABLE OF photo:
PKEY: photoID
FKEY: concertID
name

TABLE OF concert:
PKEY: concertID
FKEY: pictureID
name
URL
addedDate

TABLE OF picture
PKEY: pictureID
name
date 
```

所以每个帖子都是 TABLE 照片和音乐会的一部分，但只有一些是图片的一部分，女巫有时只用于将不同的专辑组合在一起。当他们组合在一起时，我想要一个来自该分组 ID（图片）的随机名称帖子，如果他们是他们自己，则从那里随机名称帖子（音乐会）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:15:09.757

啊啊啊啊！（用比尔猫的臭名昭著的话。）

很难从数据库中找出您的代码真正想要的结果集。

此查询不是最有效的，但它会从`photos`表中返回 8 个随机行，这些行按 addedDate 排序：

```
SELECT r.*, c.*
  FROM (SELECT p.*
          FROM photo p
         WHERE p.concertid IS NOT NULL
         ORDER BY RAND()
         LIMIT 0,8
       ) r
  JOIN concert c
    ON c.concertid = p.concertid
 ORDER BY r.addedDate ASC 
```

如果你有一个非常大的`photo`表，这会很**慢**，因为`RAND()`必须为表中的每一行调用该函数，并且 MYSQL 必须生成一个临时结果集（表的副本）然后对其进行排序在该派生列上。

（注意：我在这里假设它`photo`是您要从中返回“随机”行的表，并且我假设这`concertid`是表上的主键和`concert`表中的外键`photo`。很明显，你有三个表... `concert`，`picture`和`photo`，但不清楚哪些列是主键，哪些列是外键，所以很可能我错了。）

（注意：将`p.*`and替换`c.*`为您实际想要返回的表达式列表。）

有更有效的方法可以返回单个随机行。在您的情况下，您需要正好八行，并且您可能不想返回重复项。

# java - 新窗口不加载

> ID：11403041
> 
> 赞同：0
> 
> 时间：2012-07-09T20:57:58.787
> 
> 标签：java, wait

我需要一些帮助，我有一个在单击按钮时执行的方法，然后此方法会打开一个新窗口来更新另一个类中的变量，然后该方法从该类中获取该变量然后使用它。

加载的窗口是空白的，似乎 wait() 函数导致线程在新窗口加载之前停止。

```
private void autoFillUsersActionPerformed(java.awt.event.ActionEvent evt) {                                              
    publicLesson pL= new publicLesson();
    new dateSelect().setVisible(true);
    try{
        synchronized(this){
            this.wait();
        }
    }
    catch(Exception e){

    }
  int var= pL.getAmount();
  System.out.println("var ="+var);

    DefaultTableModel defaultModel = (DefaultTableModel) pupilTable.getModel();
    for (int i = 0; i <= (userCountAmount - 1); i++) {
        defaultModel.setValueAt(var, 5, i);
        System.out.println("BeingSet");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:05:09.530

确实是的。等待事件调度线程使其完全阻塞，从而防止任何重绘发生。所以在你等待的时候，EDT 不能再画任何东西了。

长时间运行的任务，甚至更多的阻塞任务，都不应该在事件调度线程中完成。`wait()`顺便说一句，根本不清楚你为什么在这里使用。

捕获异常并完全忽略它是您可以做的最糟糕的事情之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:05:25.887

您正在阻止[*Event Dispatch Thread*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。通过不允许 EDT 跳过`wait`调用，无法处理任何事件，这意味着无法绘制任何内容。

尝试使用[模态对话框](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)，而不是使用新窗口。模态对话框阻止对其他顶级组件的所有访问（取决于模态类型），直到它们被正确处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:04:12.983

你不能那样做，因为 Swing 只在一个线程上运行！您需要将等待后正在进行的处理移动到您正在创建的窗口中。你不能依赖等待。

这是一个很好的阅读文档：

[http://www.javapractices.com/topic/TopicAction.do?Id=153](http://www.javapractices.com/topic/TopicAction.do?Id=153)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:06:57.207

wait 方法继承自 Object() 和[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#wait%28%29)状态

> 使当前线程等待，直到另一个线程为此对象调用 notify() 方法或 notifyAll() 方法。换句话说，此方法的行为与它只是执行调用 wait(0) 完全相同。

因此，你必须给它一些等待的东西，但是当你阻塞唯一的线程时，它不可能同时绘制一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:07:55.543

您的目标是在您的主 JFrame 中等待，直到用户在另一个 JFrame 中输入您需要的数据吗？如果那是您的目标，请查看 Dialog ModalityTypes。

[http://download.java.net/jdk7/archive/b123/docs/api/java/awt/Dialog.ModalityType.html](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/Dialog.ModalityType.html)

构造新对话框时，只需将父对话框作为参数提供给构造函数，然后调用

```
super(parentDialog, Dialog.ModalityType.DOCUMENT_MODAL); 
```

然后你的主 JFrame 将等待你的新 JDialog 关闭，直到它运行其余的函数。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T21:23:02.387

我同意一些答案：删除 try/catch/synchronized 块并使用 javax.swing.JDialog 接收用户输入。请参阅官方 Swing 文档，它提供了足够好的示例，即关于 JDialog 的[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html 。](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# c# - 在 Windows azure 上启动存储模拟器时出错

> ID：11403042
> 
> 赞同：12
> 
> 时间：2012-07-09T20:58:05.960
> 
> 标签：c#, windows, azure, emulation, storage

启动存储模拟器时出现以下错误。我错误地删除了文件夹`mdf`中的和日志文件`users/admin`。它在某处保存引用，不允许我再次创建数据库。请帮我。

```
Added reservation for 127.0.0.1:10000/ in user account RaviBorra-PC\Ravi Borra.
Added reservation for 127.0.0.1:10001/ in user account RaviBorra-PC\Ravi Borra.
Added reservation for 127.0.0.1:10002/ in user account RaviBorra-PC\Ravi Borra.

Found SQL Instance (localdb)\v11.0.
Creating database DevelopmentStorageDb201206 on SQL instance '(localdb)\v11.0'.
Cannot create database 'DevelopmentStorageDb201206' : Database 'DevelopmentStorageDb201206' already exists. Choose a different database name..

One or more initialization actions have failed. Resolve these errors before attempting to run the storage emulator again. Please refer to http://go.microsoft.com/fwlink/?LinkID=248088 for more details. 
```

谢谢你，拉维克里希纳 B.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-21T09:30:05.763

执行以下步骤：

1.  打开 cmd.exe（命令提示符）
2.  写这个：

    ```
    SqlLocalDb stop "v11.0"
    SqlLocalDb delete "v11.0" 
    ```

    并按下`Enter`

请注意，“v11.0”是`MyInstance`.

有关详细信息，请访问[此链接](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-22T11:31:45.527

如果您删除数据文件`C:\Users\<Username>\DevelopmentStorageDb201206.mdf`但没有删除LocalDB服务器实例上的相应数据库，则可能会出现此问题。一种可能的解决方案是：

1.  *从SQL Server Management Studio*连接到`(localdb)\v11.0`实例。
**   删除`DevelopmentStorageDb201206`数据库。将出现数据库删除以错误结束的错误消息。忽略此消息并手动刷新数据库列表。*   现在您可以启动 Azure 存储模拟器。*

 ** * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-09T21:58:41.977

这不是与 Azure 组件相关的问题，而是 LocalDB 实例向 Azure 请求报告 DB 仍然存在。首先使用“sqllocaldb i”检查您机器中的 LocalDB 实例，然后使用“sqllocaldb d 'instance_name'”删除该实例。我无法在我的机器上对其进行测试，但如果 localdb 实例阻止了您，这可能会解除您的阻止。

在 Windows Azure SDK 1.7 中，Windows Azure 存储模拟器在以下位置使用 LocalDB 实例特定配置：

```
%LocalAppData%\DevelopmentStorage\DevelopmentStorage.201206.config 
```

基于此，您将看到 v11.0 实例是特定于 Windows Azure 存储模拟器的，因此请验证该实例是否正在运行，删除它将使 DSInit 在 LocalDB 中再次创建数据库。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-06-08T22:36:34.560

如果您在本地机器上安装了 Sql Express，那么 (localdb)\v11.0 很可能不是您的本地 Sql 实例。更有可能是 {MyComputerName}\SQLEXPRESS。

即将：

```
C:\Users\<yourloginname>\AppData\Local\DevelopmentStorage\DevelopmentStorage.201206.config 
```

并改变：

```
 <SQLInstance>(localdb)\v11.0</SQLInstance> 
```

至：

```
<SQLInstance>{MyComputerName}\SQLEXPRESS</SQLInstance> 
```

为我解决了这个错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-05T07:45:16.413

我希望这有帮助..

如果您已经尝试过但失败了，请执行：

```
 SQLLocalDB stop v11.0
 SQLLocalDB delete v11.0
 Delete all the files in C:\Users\<accontname>\WAStorageEmulatorDb* (usually one mdf and one ldf)
 Create a new account (I called it Azure, with administrative rights)
 Run again the installation
 Installation completed! 
```

对我来说，这很有效......我曾尝试在以这种方式使用之前格式化 PC。我认为我的问题与我的用户名有关，其中包含“无效”字符，例如 Name 'NickName' Surname，而“Azure”帐户对他来说似乎没问题。

我弄明白了，因为在日志中的某个地方我有一个属性目标路径设置为“C:\Users\Name$_”，这对于我的用户帐户文件夹的路径来说很远。

之后，您可以继续 CMD.exe 并提示：

```
 control userpasswords2 
```

从控件中，您可以在不删除文件夹的情况下删除 Azure 登录！

希望能帮助到你！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-19T18:06:03.830

我只是删除了 C:\Users\accountname\ 中以 DevelopmentStorage... 或 WAStorageEmulator 开头的所有 mdf 和 ldf。

重新运行安装，它工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-04T05:34:26.090

这也可能是由 localDB 不存在的文件夹引起的。看起来 Visual Studio / Azure 不会自动创建包含文件夹。我只是将错误代码中的路径复制到资源管理器中，并创建了 .MDF 文件的目录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-16T15:37:04.073

在 Visual Studio 中，转到**工具-> 选项-> 数据库工具-> 数据连接**并将 localdb 实例名称从 v11.0 更改为其他名称。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-16T03:03:55.547

正如 Brian Ogden 在他的回答中建议的那样，我确实安装了 SQL Express，但我想尝试将 Azure Storage Emulator 指向我的 SQL Express 实例，而无需修改配置文件。

我通过运行存储模拟器的初始化过程并使用可用的开关为 SQL Express 传递我的服务器\实例详细信息来做到这一点。下面是我执行的命令示例（来自提升的命令提示符）：

```
AzureStorageEmulator.exe init -server MY-PC-NAME -instance MYSQLINST 
```

这成功地创建了数据库（在我的 SQL Express 实例中）并让我的存储模拟器工作。

`-instance`我正在使用命名实例，但我认为可以通过省略开关将相同的方法用于默认实例。*

# .net - 将 DataTemplates 用于视图模型。

> ID：11403043
> 
> 赞同：0
> 
> 时间：2012-07-09T20:58:07.163
> 
> 标签：.net, wpf, mvvm, datatemplate, avalondock

首先，我在尝试将 Avalon Dock 从 1.3 升级到 2.0 时遇到了这个问题。无论如何，我有一个 ViewModel 集合，它使用数据模板并将每个 ViewModel 变成一个单独的选项卡。

所以我有这样的东西。

```
 <ad:DockingManager x:Name="_dockingManager" DocumentsSource="{Binding Scenarios}">

    <ad:DockingManager.LayoutItemTemplateSelector>
        <local:PanesTemplateSelector>
            <local:PanesTemplateSelector.ScenarioMainTemplate>
                <DataTemplate >
                    <TabControl>
                        <TabItem Header="View1">
                            <winForm:WindowsFormsHost Name="_host1" />
                            <TextBlock Text="{Binding SampleText}"/>
                        </TabItem>
                        <TabItem Header="View2">
                            <winForm:WindowsFormsHost Name="_host2" />
                        </TabItem>
                    </TabControl>
                </DataTemplate>
            </local:PanesTemplateSelector.ScenarioMainTemplate>
        </local:PanesTemplateSelector>
    </ad:DockingManager.LayoutItemTemplateSelector>

    <ad:LayoutRoot>
        <ad:LayoutPanel Orientation="Vertical" >
            <ad:LayoutDocumentPane/>
        </ad:LayoutPanel>
    </ad:LayoutRoot>
</ad:DockingManager> 
```

所以上面要做的是对于每个绑定到文档源的场景，它将在`<ad:LayoutDocumentPane/>`.

绑定有效，除了现在我需要在 ViewModel 端设置 winFormHost 的子节点。而且我不知道如何在视图模型中做到这一点。SampleText 的绑定虽然有效。

我只需要在视图模型中获取 _host1 控件并进行设置。

对我来说，这样做似乎不正确/正确的 MVVM，因为感觉就像我在玩视图模型中的视图。

有没有其他方法可以这样做，或者这种尝试是否可以（如果可以，我该怎么做？）

谢谢，Kev84

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:50:44.467

通常 viewmodels 和 datatemplate 是通过 datatype 属性连接的

```
 <DataTemplate DataType="{x:Type local:MyViewmodelForHost1}">
   <winForm:WindowsFormsHost Name="_host1" />
 </DataTemplate/> 
```

我不知道您的场景对象是什么样子，但如果我假设它具有属性 Host1、Host2。

```
 <local:PanesTemplateSelector.ScenarioMainTemplate>
            <DataTemplate >
                <TabControl>
                    <TabItem Header="View1">
                        <ContentPresenter Content="{Binding Host1}"/>
                        <TextBlock Text="{Binding SampleText}"/>
                    </TabItem>
                    <TabItem Header="View2">
                        <ContentPresenter Content="{Binding Host2}"/>
                    </TabItem>
                </TabControl>
            </DataTemplate>
        </local:PanesTemplateSelector.ScenarioMainTemplate> 
```

如果 host1 和 2 是同一类型，这不起作用。也许您可以在您的问题中添加一些视图模型代码。

# xslt - 匹配节点（孙节点除外）

> ID：11403045
> 
> 赞同：1
> 
> 时间：2012-07-09T20:58:08.613
> 
> 标签：xslt, xpath, html-lists

# 背景

将文档从 OpenOffice 转换为 DocBook 格式。

# 问题

该文件的部分内容包括：

```
<ul><li><ul><li><ul><li><p>...</p></li></ul></li></ul></li></ul> 
```

而文件的其他部分包括：

```
<ul><li><p>...</p></li></ul> 
```

我尝试使用以下方法仅匹配最里面的`ul`标签：

```
<xsl:template match="xhtml:ul[not(child::xhtml:li/child::xhtml:ul)]">
...
</xsl:template> 
```

但这不匹配。以下表达式：

```
<xsl:template match="xhtml:ul"> 
```

将按预期创建：

```
<itemizedlist>
<itemizedlist>
<itemizedlist>
...
</itemizedlist>
</itemizedlist>
</itemizedlist> 
```

### 期望的输出

无论`ul`嵌套如何，所需的输出格式是：

```
<itemizedlist>
...
</itemizedlist> 
```

# 问题

匹配最里面的子`ul`节点的正确语法是什么？

# 想法

有几种方法可以解决这个问题：

*   搜索/替换原始文档（只有大约 20 个实例）。
*   `xsl:test`在节点内使用`li`查看子节点是否为`ul`.

什么 XPath 表达式可以工作？例如：

```
<xsl:template match="xhtml:ul[not(grandchild::xhtml:ul)]"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:10:45.790

```
<xsl:template match="xhtml:ul[not(descendant::xhtml:ul)]">
  <itemizedlist><xsl:apply-templates /></itemizedlist>
</xsl:template> 
```

# python - python中类型构造函数的奇怪之处

> ID：11403046
> 
> 赞同：1
> 
> 时间：2012-07-09T20:58:13.043
> 
> 标签：python, constructor

在 python 中，我可以执行以下操作：

```
d = dict()
i = int()
f = float()
l = list() 
```

但是没有字符串的构造函数

```
>>> s = string()
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
NameError: name 'string' is not defined 
```

这是为什么？或者，是否有字符串类型的构造函数？

此外，根据上述定义，

```
d['a'] = 1 
```

有效，但是

```
>>> l[0] = 1
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: list assignment index out of range 
```

才不是。

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:00:39.843

你的意思是：

```
a = str() 
```

我相信。然后一切正常。

至于`d['a']`和`l[0]`:之间的区别`d`是一个字典，它具有存储元素的稀疏表示。而列表 ( `l`) 密集地表示数据：所以如果您有：

`l = [1,2]`

你随后写道：

`l[200] = 31`

这意味着，以及分配给元素 200，是完全一致的，也将一些任意值放入其中`l[3:199]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:04:33.617

正如其他人所指出的，您想要`str`，而不是`string`.

但是要回答您的其他问题，不能通过分配来扩展列表。如果您尝试在列表范围之外进行分配，则会出现错误。另一方面，字典在任何有意义的意义上*都没有界限。*他们只有定义的键和未定义的键。

把字典想象成一袋捆绑在一起的物品，把列表想象成一个带有固定数量隔间的托盘。你可以随时把一对东西扔进包里，但如果没有这样的隔间，你就不能把东西放在托盘的隔间里。你必须创建隔间，使用[`append`](http://docs.python.org/tutorial/datastructures.html#more-on-lists)或类似的东西。由于您的“托盘”还*没有*隔间，因此`l[0] = x`失败了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:00:40.783

是的，我们已经`str()`：

```
>>> s=str()
>>> s
'' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:06:08.507

有一个用于创建字符串的内置函数：

```
s = str()  # s == '' 
```

至于您的分配到列表与您的分配到字典：

字典是无序的，因此能够随时随地添加键值对是完全有意义的。事实上，字典键甚至不需要是相同的类型 ( `d[1]='foo'; d["string"]='bar'`)。然而，列表是有序的。考虑以下：

```
a=list()
a[1]='foo' 
```

在这种情况下，语言应该做什么？ `a[0]`尚未定义，因此语言必须编造一些东西以保持列表的有序性，否则会引发错误。分配给`a[0]`或序列中的下一个元素（例如`a=list(); a[0]='bar'`）是一种非常特殊的情况，从阅读“Python 之禅”来看，特殊情况并不足以打破规则。我猜这就是为什么 Guido 决定在分配给它之前强制列表元素存在的原因（例如`a=list(); a.append('foo'); a[0]='bar'`）

# php - PHP将嵌套查询的结果分配到数组中

> ID：11403047
> 
> 赞同：0
> 
> 时间：2012-07-09T20:58:18.133
> 
> 标签：php, mysql, arrays, temp-tables, nested-query

我需要帮助才能将嵌套查询的结果分配到数组中。这是场景：

```
$Date_Collection = mysql_query("SELECT DISTINCT Date FROM TblDate");

while($date = mysql_fetch_array($Date_Collection)) // Loop through all the dates
{
    $var_date = $date['Date'];
    $result = mysql_query("select min(Speed) as Min_spd, max (Speed) as Max_spd, avg   
                  (Speed) as Avg_spd from ... where Date= $var_date");

  while($row = mysql_fetch_array($result))
   {
     echo "row[Min_spd]";
     echo "row[Max_spd]";
     echo "row[Avg_spd]";
    }
 } 
```

此查询的输出如下所示：

```
Min_Spd |Max_Spd |Avg_Spd|       Date|
    12.0|    25.0|   20.4| 2012-10-01|
    11.0|    28.0|   21.4| 2012-10-02|
    10.0|    26.0|   23.4| 2012-10-05|
    08.0|    22.0|   21.4| 2012-10-08| 
```

我基本上需要显示所有这些日期的 Min_Spd 总和、Max_spd 总和、Avg_spd 总和。所以，我认为如果我可以将这些值分配到一个数组中，然后从数组中计算这些总和，这可能是一个好主意。

有人可以帮我解决这个问题吗？我可以使用数组来存储值，然后访问这些值并计算这些值的总和。如果我可以使用数组，谁能告诉我在 PHP 中使用数组的语法。我非常感谢您对此的任何帮助。

除了使用数组之外，还有什么替代方法，比如创建一个临时表来保存这些值，然后再删除临时表。如果可以使用临时表，请告诉我如何做到这一点。我可以将 temptable 用于单个循环，但是有一个嵌套循环，我不完全知道如何在嵌套循环内创建一个临时表来存储所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:18:58.287

I would first of all save yourself a nested query by doing the first query as:

```
$result = mysql_query("select Date, min(Speed) as Min_spd, max (Speed) as Max_spd, avg(Speed) as Avg_spd from ... group by Date") 
```

And then create a running total for the sums as you're looping through each row:

```
$sumMinSpeeds=0;
$sumMaxSpeeds=0;
$sumAvgSpeeds=0;
while($row = mysql_fetch_array($result))
{
    echo row['Min_spd'];
    echo row['Max_spd'];
    echo row['Avg_spd'];

    $sumMinSpeeds += $row['Min_spd'];
    $sumMinSpeeds += $row['Max_spd'];
    $sumMinSpeeds += $row['Avg_spd'];

}
echo $sumMinSpeeds;
echo $sumMaxSpeeds;
echo $sumAvgSpeeds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:11:44.040

我不知道MySQL [SUM](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)函数是否可以用于te 查询，尝试一下。但是在这个例子中，使用数组你应该存储值，然后使用[array_sum](http://mx2.php.net/manual/en/function.array-sum.php)返回元素的总和。像这样的东西：

```
$min_spd = array();
$max_spd = array();
$avg_spd = array();
while($row = mysql_fetch_assoc($result))
{
    $min_spd[] = $row['Min_spd'];
    $max_spd[] = $row['Max_spd'];
    $avg_spd[] = $row['Avg_spd'];
}

echo array_sum($min_spd); 
```

也可以使用变量来存储和添加值：

```
$min_spd = 0;
$max_spd = 0;
$avg_spd = 0;

while($row = mysql_fetch_assoc($result))
{
    $min_spd += $row['Min_spd'];
    $max_spd += $row['Max_spd'];
    $avg_spd += $row['Avg_spd'];
}

echo $min_spd; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:07:51.763

```
$data = array();
while ($row = mysql_fetch_assoc($result)) {
    $data[] = $row;
} 
```

然后以后你可以做

```
foreach($data as $row) {
   echo $row['Min_spd'];
   echo ...
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:29:20.570

与其在一个循环中执行多个 MySQL 查询，不如考虑构建这样一个查询，它将返回您需要的所有结果。

**SQL**

首先，使用[`GROUP`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)SQL 结构是有意义的。

```
SELECT
    s.Date       date,
    MIN(s.Speed) min,
    MAX(s.Speed) max,
    AVG(s.Speed) avg
FROM speed_table s
WHERE s.Date IN (SELECT DISTINCT d.Date FROM date_table d)
GROUP BY s.Date 
```

了解此查询的每个部分的作用很重要。如果遇到任何问题，请查阅[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.5/en/)。

**PHP**

忘记使用`mysql_*`函数：它们已被[弃用](http://www.php.net/manual/en/intro.mysql.php)，并且出现了更好的实现：[`PDO`](http://php.net/manual/en/book.pdo.php)和[`mysqli`](http://www.php.net/manual/en/book.mysqli.php). 我的示例使用`PDO`.

```
try {
    $dbh = new \PDO('mysql:dbname=my_db_name;host=127.0.0.1', 'dbuser', 'dbpass');
} catch (\PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$sql  = '...';  // This is the query
$stmt = $pdo->prepare($sql);
$stmt->execute(); 
```

您现在可以遍历返回的结果集

```
while ($row = $stmt->fetch()) {
    printf("%s; %s; %s; %s\n", $row['date'], $row['min'], $row['max'], $row['avg']);
} 
```

或者让`Statement`对象通过使用返回整个数组

```
$result = $stmt->fetchAll(\PDO::FETCH_ASSOC); 
```

# casting - 在 Go 中对多个返回值进行转换/类型断言的惯用方法

> ID：11403050
> 
> 赞同：83
> 
> 时间：2012-07-09T20:58:22.627
> 
> 标签：casting, go, return-value

在 Go 中转换多个返回值的惯用方式是什么？

您可以在一行中完成，还是需要使用临时变量，例如我在下面的示例中所做的？

```
package main

import "fmt"

func oneRet() interface{} {
    return "Hello"
}

func twoRet() (interface{}, error) {
    return "Hejsan", nil
}

func main() {
    // With one return value, you can simply do this
    str1 := oneRet().(string)
    fmt.Println("String 1: " + str1)

    // It is not as easy with two return values
    //str2, err := twoRet().(string) // Not possible
    // Do I really have to use a temp variable instead?
    temp, err := twoRet()
    str2 := temp.(string)
    fmt.Println("String 2: " + str2 )

    if err != nil {
        panic("unreachable")
    }   
} 
```

顺便问一下，`casting`当涉及到接口时，它会被调用吗？

```
i := interface.(int) 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-09T21:26:53.207

你不能在一行中做到这一点。您的临时变量方法是可行的方法。

> 顺便说一句，当涉及到接口时，它是否称为强制转换？

它实际上被称为[类型断言](http://golang.org/ref/spec#Type_assertions)。类型~~转换~~是不同的：

```
var a int
var b int64

a = 5
b = int64(a) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-20T13:40:16.773

```
func silly() (interface{}, error) {
    return "silly", nil
}

v, err := silly()
if err != nil {
    // handle error
}

s, ok := v.(string)
if !ok {
    // the assertion failed.
} 
```

但更可能的是您真正想要的是使用类型开关，例如：

```
switch t := v.(type) {
case string:
    // t is a string
case int :
    // t is an int
default:
    // t is some other type that we didn't name.
} 
```

Go 实际上更多的是关于正确性，而不是关于简洁性。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-09T10:53:39.980

或者只是一个如果：

```
if v, ok := value.(migrater); ok {
    v.migrate()
} 
```

Go 将处理 if 子句中的转换，并让您访问转换类型的属性。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-09T21:39:52.087

[template.Must](http://golang.org/pkg/text/template/#Must)是标准库在一个语句中只返回第一个返回值的方法。可以为您的情况类似地完成：

```
func must(v interface{}, err error) interface{} {
    if err != nil {
        panic(err)
    }
    return v
}

// Usage:
str2 := must(twoRet()).(string) 
```

通过使用`must`你基本上说不应该有错误，如果有，那么程序不能（或至少不应该）继续运行，而是会恐慌。

# c++ - 在 Windows 上使用 Qt Creator 设置 ccache

> ID：11403055
> 
> 赞同：6
> 
> 时间：2012-07-09T20:58:49.813
> 
> 标签：c++, qt, qt-creator, ccache

我正在尝试在 Windows 上的 Qt Creator 中设置 ccache。

不幸的是，我找不到任何好的指导。如何让它工作？

我已经用 Cygwin 安装了 ccache。

编辑：

我试过添加

```
QMAKE_CXX+="ccache g++" 
```

作为 qmake 构建步骤中的附加参数。

但是在编译输出中我仍然有“g++ -c -g -Wall ...”，我想它应该是“ccache g++ ...”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T00:25:30.733

它应该是：

```
"QMAKE_CXX=ccache g++" 
```

如果在您添加该参数后 QtCreator 没有自动更新 makefile，您可能需要从 Build 菜单重新运行 qmake。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T21:44:54.367

QtCreator 不了解 ccache，此外，它还在寻找将 Cygwin 二进制文件与 Windows 上的本机二进制文件混合的麻烦。

# django - 为 Django Heroku 应用程序、Amazon S3 设置 MEDIA_URL

> ID：11403063
> 
> 赞同：6
> 
> 时间：2012-07-09T20:59:37.333
> 
> 标签：django, heroku, amazon-s3

我一直在尝试为我的 Heroku 应用程序设置 MEDIA_URL，该应用程序目前通过来自 Amazon S3 的 STATIC_URL 提供静态文件。静态文件工作正常，但是当我尝试在当前 STATIC_URL 之外添加 MEDIA_URL 时，页面根本不再呈现并且应用程序停止工作。

当前设置为：

```
AWS_STORAGE_BUCKET_NAME = 'bucketname'
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
S3_URL = 'http://%s.s3.amazonaws.com/' % AWS_STORAGE_BUCKET_NAME
STATIC_URL = S3_URL
AWS_ACCESS_KEY_ID = 'KEY'
AWS_SECRET_ACCESS_KEY = 'SECRET_KEY' 
```

当我添加：

```
MEDIA_URL = S3_URL
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 
```

这导致了这个问题。具体来说，MEDIA_URL 是有问题的，因为当 DEFAULT_FILE_STORAGE 被删除时，它仍然有同样的问题。但我正在尝试确定如何通过这种方式为用户上传的媒体提供最佳服务，但未成功。

如果有人对如何最好地实现这一点有任何见解，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T06:12:45.683

[该](https://stackoverflow.com/questions/10390244/how-to-set-up-a-django-project-with-django-storages-and-amazon-s3-but-with-diff/10825691#10825691)解决方案效果很好，如下所述。

`s3utils.py`在与以下目录相同的目录中创建一个文件`settings.py`：

```
from storages.backends.s3boto import S3BotoStorage

StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')
MediaRootS3BotoStorage  = lambda: S3BotoStorage(location='media') 
```

然后在`settings.py`：

```
DEFAULT_FILE_STORAGE = 'myproyect.s3utils.MediaRootS3BotoStorage'
STATICFILES_STORAGE = 'myproyect.s3utils.StaticRootS3BotoStorage' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:31:44.857

STATIC_URL 和 MEDIA_URL 不能具有相同的值，它会引发错误。

我有/仍然有同样的问题，找不到一个干净的方法来做到这一点。等待更好的答案，但这就是我解决它的方法（丑陋的黑客）：

我正在使用[django_storages](http://code.larlet.fr/django-storages/)和[django_compressor](https://github.com/jezdez/django_compressor)。由于媒体文件出现在我的 S3 存储桶的根目录中，我可以通过 STATIC_URL 访问它们。在我的 settings.py 中：

```
COMPRESS_URL = "https://s3.amazonaws.com/bucketname/"
STATIC_URL = COMPRESS_URL 
```

在我的本地开发环境中，我使用 MEDIA_URL 和生产 STATIC_URL。为您的本地环境设置一个值为 True 的环境变量，在 Heroku 上设置一个值为 False 的环境变量，并将其放入 context_processor 环境中。

然后您可以像这样访问模板中的媒体文件：

```
background-image: url({% if env == 'True' %}{{ MEDIA_URL }}{% else %}{{ STATIC_URL }}{% endif %}{{ course.image }}); 
```

它有效，但它很丑陋。希望有人找到更好的解决方案，所以我重构了我的代码:)

**编辑** 有一个更好的方法：[这个应用程序](https://github.com/jamstooks/django-s3-folder-storage)允许您在 S3 中创建一个静态和一个媒体文件夹。

# c# - C# 绘图 - 最佳解决方案

> ID：11403065
> 
> 赞同：2
> 
> 时间：2012-07-09T20:59:55.603
> 
> 标签：c#, .net, drawing, panel

今天，当我在上面画画时，我正在尝试用闪烁的面板解决问题。

我读了很多线程，比如：

*   [如何停止闪烁的 C# winforms](https://stackoverflow.com/questions/8046560/how-to-stop-flickering-c-sharp-winforms)，
*   [面板双缓冲](https://stackoverflow.com/questions/7569471/double-buffering-with-panel)，
*   [如何在 Panel 上绘图使其不闪烁？](https://stackoverflow.com/questions/4777135/how-can-i-draw-on-panel-so-it-does-not-blink)

因此，我尝试使用 doubleBuffered 在 PictureBox、MyPanel 上绘图，但是当我阅读时，我发现我不能每次都使用 g.Clear() 的最佳解决方案，此后，即使在非 doubleBuffered 面板上，闪烁也消失了。

我什至读到，我应该在绘制完成后释放图形。所以我到处使用(Graphics g = panel.CreateGraphics())。

**所以我的问题**是，仅当我在位图上绘制一些东西时才为位图创建图形是个好主意吗？因为在我创建 Bitmap 和 Graphics 之前（仅针对此位图，并非针对所有组件），所以我每次都有可用于此位图的 Graphics

这是我的代码：

```
public void newSizeDrawing()
    {
        Size size = collector.getLetterSize(selectedName);
        Size drawingSize = new Size(size.Width * (pixelSizeArray[pixelSize] + 1),size.Height * (pixelSizeArray[pixelSize] + 1));
        bitmapDraw = new Bitmap(drawingSize.Width, drawingSize.Height);
        int width = (this.MinimumSize.Width - panelDraw.MinimumSize.Width) + drawingSize.Width + 10;
        int height = (this.MinimumSize.Height - panelDraw.MinimumSize.Height) + drawingSize.Height + 10;
        this.Size = new Size(
            (width > this.MinimumSize.Width) ? width : this.MinimumSize.Width,
            (height > this.MinimumSize.Height) ? height : this.MinimumSize.Height);
        zeroDrawPosition = new Point((panelDraw.Size.Width - bitmapDraw.Width) / 2 - 1, (panelDraw.Size.Height - bitmapDraw.Height) / 2 - 1);
        using (Graphics g = panelDraw.CreateGraphics())
        {
            g.Clear(panelDraw.BackColor);
        }
        redrawDrawingLetter();
    }
public void redrawDrawingLetter()
    {
        bool[][] grid = collector.getArray(selectedName);
        using (Graphics graphicDraw = Graphics.FromImage(bitmapDraw))
        {
            graphicDraw.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighSpeed;
            graphicDraw.Clear(panelDraw.BackColor);
            int pxSize = pixelSizeArray[pixelSize];
            for (int y = 0; y < grid.Length; y++)
            {
                for (int x = 0; x < grid[y].Length; x++)
                {
                    graphicDraw.FillRectangle((grid[y][x] ? Brushes.Black : Brushes.White), x * (pxSize + 1), y * (pxSize + 1), pxSize, pxSize);
                }
            }
        }
        redrawDrawingPanel();
    }
private void redrawDrawingPanel()
    {
        using (Graphics g = panelDraw.CreateGraphics())
        {
            if (bitmapDraw != null)
                g.DrawImage(bitmapDraw, zeroDrawPosition);
        }
    }
private void panelDraw_Paint(object sender, PaintEventArgs e)
    {
        redrawDrawingPanel();
    } 
```

没有人能向我解释如何用 C# 画出最好的画法。所以也许我的代码不好，但这就是我问如何正确执行它的原因。

`newSizeDrawing`仅由我自己调用，当用户单击**+**或**-**按钮时。如果像素打开或关闭，我有 bool 二维数组。这是用于为微芯片和 LED 显示屏绘制字母的程序（通常是 8px 的字母高度）。

我写了一个方法来检查鼠标是否从一个“像素”移动到另一个，所以我不会在每次调用 mouseMove 事件后重新绘制它，因为“像素”可以从 10x10 像素到 30x30 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:14:53.170

```
private void panelDraw_Paint(object sender, PaintEventArgs e)
{
    redrawDrawingPanel();
} 
```

这是根本错误的。Paint 事件通过 e.Graphics 让您绘制您想要绘制的任何内容。当您打开双缓冲时，e.Graphics 引用位图，它使用 BackColor 进行初始化。然后，您继续使用从 CreateGraphics() 获得的*另一个Graphics 对象进行绘图。*那个直接画到屏幕上。

您看到的闪烁效果*非常*明显。一瞬间，您会看到其他 Graphics 上下文绘制的内容。然后您的 panelDraw_Paint() 方法返回并且 Winforms 绘制双缓冲位图。它上面什么都没有，所以它会立即删除你画的东西。

修改 redrawDrawingPanel() 方法并给它一个 Graphics 类型的参数。在调用中传递 e.Graphics。并且只使用该图形对象，删除对 CreateGraphics() 的所有调用。

# javascript - 在 JavaScript 中声明数组的方式是什么？

> ID：11403068
> 
> 赞同：48
> 
> 时间：2012-07-09T21:00:10.627
> 
> 标签：javascript, arrays

我只是在学习 JavaScript，似乎有很多方法可以声明数组。

1.  `var myArray = new Array()`
2.  `var myArray = new Array(3)`
3.  `var myArray = ["apples", "bananas", "oranges"]`
4.  `var myArray = [3]`

它们有什么区别，首选的方法是什么？

根据[该网站](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays)，以下两行非常不同：

```
var badArray = new Array(10); // creates an empty Array that's sized for 10 elements
var goodArray= [10];          // creates an Array with 10 as the first element 
```

> 正如你所看到的，这两行代码做了两件非常不同的事情。如果您想要添加多个项目，那么 badArray 将被正确初始化，因为 Javascript 会足够聪明，知道您正在初始化数组，而不是说明您想要添加多少元素。

作者想说的是`Array(10)`创建一个恰好包含 10 个元素的数组，并`[10]`创建一个大小未定义的数组，第 0 个元素为 10？或者这是什么意思？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T21:06:06.550

在您的第一个示例中，您正在制作一个空白数组，与`var x = []`. 第二个示例创建一个大小为 3 的数组（包含所有元素`undefined`）。第 3 和第 4 个示例是相同的，它们都使用这些元素创建数组。

使用时要小心`new Array()`。

```
var x = new Array(10); // array of size 10, all elements undefined
var y = new Array(10, 5); // array of size 2: [10, 5] 
```

首选方法是使用`[]`语法。

```
var x = []; // array of size 0
var y = [10] // array of size 1: [1]

var z = []; // array of size 0
z[2] = 12;  // z is now size 3: [undefined, undefined, 12] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-09T21:02:00.657

首选方法是始终使用带方括号的文字语法；`Array`与's.不同，它的行为对于任意数量的项目都是可预测的。更重要的`Array`是，不是关键字，虽然不是现实情况，但有人可以轻松覆盖它：

```
function Array() { return []; }

alert(Array(1, 2, 3)); // An empty alert box 
```

然而，更大的问题是一致性问题。重构代码的人可能会遇到这个函数：

```
function fetchValue(n) {
    var arr = new Array(1, 2, 3);

    return arr[n];
} 
```

事实证明， only`fetchValue(0)`是永远需要的，所以程序员放弃了其他元素并破坏了代码，因为它现在返回`undefined`：

```
var arr = new Array(1); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-15T21:46:33.683

有多种方法可以创建数组。

声明和初始化数组的传统方式如下所示：

```
var a = new Array(5); // declare an array "a", of size 5
a = [0, 0, 0, 0, 0];  // initialize each of the array's elements to 0 
```

或者...

```
// declare and initialize an array in a single statement
var a = new Array(0, 0, 0, 0, 0); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-04-21T18:28:01.883

声明它：

```
var myArr = ["apples", "oranges", "bananas"]; 
```

要使用它：

```
document.write("In my shopping basket I have " + myArr[0] + ", " + myArr[1] + ", and " + myArr[2]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T23:11:05.413

如果您要创建一个数组，其主要特征是它的长度，而不是每个索引的值，请根据需要定义一个数组`var a=Array(length);`。

例如-

```
String.prototype.repeat= function(n){
    n= n || 1;
    return Array(n+1).join(this);
} 
```

# ms-access - 由于锁定冲突，访问无法删除记录

> ID：11403076
> 
> 赞同：0
> 
> 时间：2012-07-09T21:00:38.127
> 
> 标签：ms-access, ms-access-2010

从过去几年开始，我们一直在使用 XP 机器的 Access 2003 上使用 Delete 命令，并且在我们将系统升级到 Access 2010 和 Windows 7 之前它运行良好。

请参阅下面的错误。不知道我错过了什么。我尝试创建一个新的链接 oracle 表，但它不起作用。

![在此处输入图像描述](../Images/0ffc4f776e4b76a3f6f926a714809852.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:07:54.030

我在尝试通过 MS Access 2010 更新链接的 SQL Server 表时遇到了同样的锁定错误。

由于线程太旧了，这对您来说可能不再是问题，但希望它在将来让其他人更容易。

**我可以通过将 SQL Server 中的 ID 字段从 bigint 更改为 int 来修复它。**

您可能还需要确保“默认记录锁定”在访问选项中设置为“无锁定”-> 客户端设置--> 高级 [DefaultRecordLocking http://www.tmetrics.net/support/patrick/stackoverflow/defaultrecordlocking .jpg](http://www.tmetrics.net/support/patrick/stackoverflow/defaultrecordlocking.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T11:11:09.640

我在具有主键和唯一键的链接表中遇到此错误。链接表时，Access 假定唯一键是主键。

通过暂时禁用或删除唯一键并使用链接表管理器刷新 ling”，问题得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:08:57.943

似乎它无法删除的 332 条记录已被锁定，也许是由其他进程锁定的？是否有一个停滞的进程在某个地方运行并锁定这些记录？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T12:40:17.570

我在使用 Access 2016 和 Oracle 数据库时遇到了同样的问题。我可以很好地附加到 Oracle 表，但是当我运行删除查询以删除这些相同的记录时，它会删除一些记录并说其他记录被锁定。如果我循环查询足够多次，它最终会删除所有记录。

我找到的解决方案是在 Access 删除查询中，我将“使用事务”属性设置为“否”，并且它在没有任何记录锁的情况下开始正常工作。我不知道这是否是一个完美的解决方案，但它适用于我的情况。

- 更新 -

上述解决方案适用于我的一些查询，但后来我仍然遇到其他查询的问题。所以它在某些情况下有所帮助，但并没有完全发挥作用。

现在似乎正在工作的是，我在 Oracle 中存储了一个过程，该过程将删除我需要删除的数据，并且我正在从 Access 调用该过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-05T18:18:45.423

我有一个类似的问题......可以手动删除记录，但通过查询得到该消息。

即使我以一对多的关系删除“多”表中的记录，“密钥违规”消息仍然出现。

我编辑了与 ADD **Cascade Update**和**Cascade Delete**的关系，问题就消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-30T16:43:00.853

我有这个问题。我有一个 Oracle 数据库的 Access 前端。我正在尝试从链接表中删除记录。我在互联网上的任何地方都没有找到解决方案。这是我的“解决方案”。
我从 DoCmd.RunSQL 转换为 DBS.Execute 以运行我的删除查询。这摆脱了错误消息。但并不是所有的记录都被删除了。所以现在我在循环中执行删除查询。recCount = DLookup("count(*)", "my_table")

```
Do While recCount > 0       
    DBS.Execute "DELETE * FROM my_table", dbSeeChanges 
    recCount = DLookup("count(*)", "prod_nmpsia_premiums")
Loop 
```

有时只需要一次通过。其他时候需要一些。我知道这是一个杂牌。但它有效。

# ruby-on-rails - Aptana Studio 3 - 在服务器上运行（不适用于某些项目）

> ID：11403084
> 
> 赞同：1
> 
> 时间：2012-07-09T21:01:19.410
> 
> 标签：ruby-on-rails, aptana3, radrails

我能够“在服务器上运行/调试”一个在 Aptana 中创建的新 Rails 项目。

但是，对于现有项目，“在服务器上运行/调试”会静默失败。

我无法弄清楚为什么行为会有所不同。

这是日志中显示的内容。

```
!ENTRY org.eclipse.ui 4 0 2012-07-09 16:33:49.264
!MESSAGE 未处理的事件循环异常
!堆栈 0
java.lang.NullPointerException
    在 org.radrails.rails.internal.ui.commands.RunServerHandler.findOrCreateServer(RunServerHandler.java:77)
    在 org.radrails.rails.internal.ui.commands.RunServerHandler.execute(RunServerHandler.java:44)
    在 org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
    在 org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
    在 org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
    在 org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
    在 org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
    在 org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
    在 org.eclipse.ui.menus.CommandContributionItem.handleWidgetSelection(CommandContributionItem.java:829)
    在 org.eclipse.ui.menus.CommandContributionItem.access$19(CommandContributionItem.java:815)
    在 org.eclipse.ui.menus.CommandContributionItem$5.handleEvent(CommandContributionItem.java:805)
    在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
    在 org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588)
    在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3209)
    在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    在 org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    在 org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    在 com.aptana.rcp.IDEApplication.start(IDEApplication.java:125)
    在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:616)
    在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    在 org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)

```

谢谢，杰米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:50:09.597

我有同样的问题。我不知道发生了什么，但这是我为解决这个问题所做的：

1.  去`Preferences->Aptana Studio->Web Servers`。
2.  单击`New`。
3.  `Rails server`从列表中选择。

在对话框中：*输入服务器名称*（我不确定，但最好输入您正在为其设置服务器的项目的确切名称 - 这与下面列表中显示的名称相同）；从您要为其配置服务器的列表中选择一个项目名称；保持**0.0.0.0**和**3000**不变。

单击确定并享受！

# android - 为什么我的 BaseAdapter 类不增加 getView 中的位置？

> ID：11403086
> 
> 赞同：6
> 
> 时间：2012-07-09T21:01:22.377
> 
> 标签：android, android-listview, baseadapter

编辑：我的问题似乎`BaseAdapter`不会发布超过 1 个 Spinner。如果我将数组的大小更改为 0，它不会放任何东西，但任何超过 1 的东西都会截断它。它永远不会从位置 0 过去，`getView()`而且它永远不会超过 1。我已经在它上面呆了好几个小时了。是否有一个原因？

我`Spinners`在`ListView`使用`BaseAdapter`. 我之前尝试过它作为测试，以确保它可以在测试类中正确完成，并且它可以正确地迭代位置。但现在我又做了一次，但它失败了。我所说的失败不是`getView()`创建新的`Spinner`，而是永远不会离开位置 0。它仍然运行。只是永远不要添加更多`Spinner`。这是我的代码：

**主适配器代码**

* * *

```
public class RemindersAdapter extends BaseAdapter{
Spinner[] shownReminders = new Spinner[1];
TextView[] removeReminders = new TextView[1];
String[] reminders = new String[1]; //this hlds the values of the coresponding spinner

RemindersAdapter mAdapter;

@Override
public int getCount() {
    return shownReminders.length;
}

@Override
public Object getItem(int position) {
    return shownReminders[position];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View view, ViewGroup parent) {
    Log.d("TAG", "A NEW SPINNER AND TEXTVIEW IS CREATED HERE WITH POSITION"+position);
    if(view == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        view = inflater.inflate(R.layout.reminder_spinner, parent, false);
    }

    Spinner reminderSpinner = (Spinner)view.findViewById(R.id.reminder_spinner);
    reminderSpinner.setTag(String.valueOf(position));
    ArrayAdapter<CharSequence> reminderAdapter = ArrayAdapter.createFromResource(
            parent.getContext(), R.array.reminders_array, android.R.layout.simple_spinner_item);
    reminderAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    reminderSpinner.setAdapter(reminderAdapter);
    reminderSpinner.setOnItemSelectedListener(new MyOnReminderSelectedListener());
    shownReminders[position] = reminderSpinner;

    TextView remove = (TextView)view.findViewById(R.id.remove_reminder);
    remove.setTag(String.valueOf(position));
    removeReminders[position] = remove;
    remove.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("The Array positioning of this remove view is: ", ""+v.getTag());

        }
    });

    return view;
}

public void addReminder() {
    Log.d("addReminder METHOD", "The Add Reminder method is running");

    Spinner[] temp = new Spinner[shownReminders.length+1];
    TextView[] temp2 = new TextView[removeReminders.length+1];
    String [] temp3 = new String[reminders.length+1];
    for(int i = 0; i < shownReminders.length; i++) {
        temp[i] = shownReminders[i];
        temp2[i] = removeReminders[i];
        temp3[i] = reminders[i];
    }
    shownReminders = temp;
    removeReminders = temp2;
    reminders = temp3;
    mAdapter.notifyDataSetChanged();//this just makes the adapter refresh itself

}

public void giveYourself(RemindersAdapter adapter) {
    mAdapter = adapter;
}

public class MyOnReminderSelectedListener implements OnItemSelectedListener{

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        int position = Integer.parseInt(parent.getTag().toString()); //gets the position of the Spinner and puts it in the same index in the reminders array
        reminders[position] = parent.getItemAtPosition(pos).toString();
        for(int i =0; i < reminders.length; i++) Toast.makeText(parent.getContext(), i+": "+reminders[i], Toast.LENGTH_SHORT).show();
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // Do nothing for now   
    }   
}//end of MyOnReminderSelectedListener innerclass   

}//end of Class 
```

* * *

**Activity 中运行的内容**

* * *

```
reminderList = (ListView)findViewById(R.id.reminders_list);
    reminderAdapter = new RemindersAdapter();
    reminderAdapter.giveYourself(reminderAdapter);
    reminderList.setAdapter(reminderAdapter);

    TextView addReminder = (TextView)findViewById(R.id.add_reminder);
    addReminder.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("TAG", "The onClick is running !");
            reminderAdapter.addReminder();
        }
    }); 
```

* * *

我不知所措，因为我的代码看起来和我的测试代码一模一样，只是做了一些修改才能与我的应用程序一起使用。但是使用的信息`Adapter`几乎相同。我也将发布测试代码，以便你们可以看到有效的代码。

**测试代码**

* * *

```
public class RemindersAdapter extends BaseAdapter{
Spinner[] shownReminders = new Spinner[1];
ArrayList<TextView> removeSpinner = new ArrayList<TextView>();
Context mContext;

public RemindersAdapter(Context context) {
    mContext = context;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return shownReminders.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return shownReminders[position];
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View view, ViewGroup parent) {
    Log.d("TAG", "Number of times this is running"+position);
    Log.d("TAG", "Address of the Spinner Object"+shownReminders[position]);
    if(view == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        view = inflater.inflate(R.layout.reminder_spinner, parent, false);
    }

    Spinner reminderSpinner = (Spinner)view.findViewById(R.id.reminders_spinner);
    reminderSpinner.setTag("1"); 
    ArrayAdapter<CharSequence> reminderAdapter = ArrayAdapter.createFromResource(
            parent.getContext(), R.array.reminders_array, android.R.layout.simple_spinner_item);
    reminderAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    reminderSpinner.setAdapter(reminderAdapter);
    reminderSpinner.setOnItemSelectedListener(new MyOnReminderSelectedListener());
    shownReminders[position] = reminderSpinner;

    TextView remove = (TextView)view.findViewById(R.id.remove_reminder);
    remove.setTag(position);
    removeSpinner.add(remove);
    remove.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            int pos = Integer.parseInt(v.getTag().toString());
            removeSpinner.remove(pos);
            Spinner[] temp = new Spinner[shownReminders.length-1];
            for(int i =0; i < shownReminders.length; i++) {
                if(i == pos || i > pos) {
                    temp[i-1] = shownReminders[i];
                } else {
                    temp[i] = shownReminders[i];
                }
            }
            //Here i should refresh somewhow

        }
    });

    return view;
}

public void addReminder() {
    Spinner[] temp = new Spinner[shownReminders.length+1];
    for(int i = 0; i < shownReminders.length; i++) {
        temp[i] = shownReminders[i];
    }
    shownReminders = temp;
}

/*
 * Listener for when the reminder spinner gets a value the user entered
 * */
public class MyOnReminderSelectedListener implements OnItemSelectedListener{

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        //does nothing for now

    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // Do nothing for now   
    }   
}//end of MyOnReminderSelectedListener innerclass 
```

* * *

我也有一个问题，为什么适配器自己运行这么多。例如，使用 Log，我注意到它`getView()`无缘无故地调用了两次。它有这种行为很奇怪。我想我不是很明白`BaseAdapter`。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-28T10:52:09.290

如果您将 ListView 放在 ScrollView 中，则会发生此错误。ListView 本身会进行垂直滚动，因此不能将其放入 ScrollView。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T02:07:46.063

当 listView 需要显示新项目时，适配器将调用 getView。因此，如果您的 listView 没有滚动，则不会创建新项目，也不会调用 getView。
但您不应存储所有微调器对象，或在 getView 中创建新对象。那是因为它会很慢并且可能会浪费内存。

# javascript - 比较对象类型时，第三个 = 是否必要？

> ID：11403088
> 
> 赞同：0
> 
> 时间：2012-07-09T21:01:24.790
> 
> 标签：javascript

给我一个很好的理由为什么我不应该停止使用第三个等于。

```
typeof x === "object"
typeof x == "object" // does the same thing 100% of the time and uses one less character 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:03:52.953

1（非常）好的理由：**一致性**。

一般来说**，**您应该尽可能具体。如果您遵循应尽可能具体的一般规则，则应保持`===`一致性。另外，假设你遵循一般规则，如果你做了一个例外，那么就会有更多的例外，很快你就没有一般规则了。

对于必须 100% 输入 1 个字符的麻烦，我会采取一致性和特异性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:03:54.793

在这种特定情况下，唯一的优点`===`是速度稍快。

有关分析结果，请参阅：http: [//jsperf.com/equal-performance](http://jsperf.com/equal-performance)（特别是“字符串 + 双等号”和“字符串 + 三等号”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:25:05.983

好的，现在大多数人已经告诉过你（理所当然地）使用三个`=`是最佳实践。但是，您的示例在使用`type of value-of`比较时提出了一个可能的陷阱。以此为例：

```
var date1 = new Date();
var date2 = new Date(date1.valueOf()); 
```

这意味着 dat 两者`date1`都`date2`属于同一类型（对象，甚至是同一对象：日期）并且具有完全相同的值。所以逻辑上：

```
console.log(date1 === date2);//logs FALSE 
```

为什么？因为 JS 对象变量是引用。上面的语句实际上是在检查内存中的两个位置（都是新实例）是否相同。不是检查它们的内容，而是检查它们的内存地址。
因此，逻辑表明：

```
var date1 = new Date();
var date2 = date1;
console.log(date1 === date2);//True 
```

注意：JS 总是复制其变量的值，但是对于对象，这些变量是引用，所以 JS 将存储`date1`在`date2`.

很公平，检查两个单独的实例也是双等号出现的问题。不管类型，甚至值：两个内存地址永远不会相同。

许多人过去应用的一个简单修复方法是覆盖 JS 对象原型的`valueOf`方法。这仍然有效，但会导致类型和值检查出现问题（然后对象类型仍在发挥作用）：

```
function SomeConstructor()
{
    this.foo = 'foobar';
    this.bar = function()
    {
        console.log('I am a messy constructor!');
        return this.foo;
    };
}
var inst = new SomeConstructor();
inst.valueOf = function()
{
    return 1;
}

console.log(inst == 1);//logs true
console.log(inst === 1);//logs FALSE 
```

有很多方法可以解决这个问题，我见过人们`JSON.stringify`- 处理两个对象，然后解析它们，人们`for...in`用来检查每个属性，......虽然需要做的只是将`valueOf()`返回值存储在一个额外的变量中. 工作完成（？）人们实际上需要做的是编写更好的代码，但我很累并且*偏离*了主题......回到手头的问题：

那么，可能有人会问，选择额外`=`标志的原因是什么。好吧，我看到上面提到了一致性，以及边际速度增益。
但是就像没有人提到这个陷阱一样，没有人提到*稳定性*。

我的意思是，当您编写代码时，尤其是在软类型语言中，您会发现自己正在编写函数或方法，这些函数或方法*假定*一定数量的某种类型的参数。
下一步，通常是在调试时，是你的函数以这样的行开始，这样的`argument1 = parseInt(argument1);`代码`argument1 = argument1 || 0;`永远不能一起避免，但应该保持在最低限度。

就我自己而言，如果我看到函数进行类型和值检查，我倾向于检查调用函数时需要哪些类型的参数。如果不是，我假设该函数将从我选择传递给它的任何参数中解析它需要的任何数据。
基本上：你的代码*看起来*越严格，它可能被使用的越严格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:03:51.213

您不是在比较对象类型。您比较字符串：文字一 ( `'object'`) 和`typeof`运算符返回的字符串。

因为你总是会在这个语句中比较字符串，所以我想在这里使用`==`or`===`不会有任何区别。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-09T21:08:59.997

第三个等于比较偶数数据类型。

JavaScript **typeof**返回字符串，仅当测试变量为 null 时才返回“null”，而是返回 null。

如果您将**typeof x**与**string**进行比较，第二个等于返回总是相同的，例如第三个。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-09T21:05:16.760

`==`- 表示检查变量的值但不检查它们的类型（例如“2” == 2 => 返回真）。

`===`- 表示检查值及其类型（例如“2” === 2 => 返回 false，因为左参数是字符串，第二个参数是数字，所以 vars 不一样）

编辑： `===`通常与`var1 == var2 && var1.contructor == var2.contructor`.

# scala - 特征中的隐式 val 与类型注释的行为不同

> ID：11403093
> 
> 赞同：1
> 
> 时间：2012-07-09T21:01:48.337
> 
> 标签：scala

只是想知道以下是错误还是功能：

```
Welcome to Scala version 2.10.0-M3 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala> class TypeClass[T]
defined class TypeClass

scala> trait A[T] {
     |   implicit val t = implicitly[TypeClass[T]]
     | }
<console>:9: error: could not find implicit value for parameter e: TypeClass[T]
         implicit val t = implicitly[TypeClass[T]]
                                    ^ 
```

正如预期的那样，这不会编译，因为`T`. 但是当我添加类型注释时，它会编译：

```
scala> trait A[T] {
     |   implicit val t: TypeClass[T] = implicitly[TypeClass[T]]
     | }
defined trait A 
```

编译器不应该在这里抱怨吗？为什么类型注释应该有所作为？如果我们用这个特征实例化一些东西，`t`就是`null`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:27:24.610

实际上，您只是在这里自欺欺人。:-)

您刚刚声明隐式`TypeClass[T]`is `val t`。也就是说，`val t = t`，这使它为空。哎哟!

`T`是抽象的，所以编译器不能`TypeClass`为它提供一个。您必须使用`T`参数来获取它，但您将无法在`trait`. 中`class`，做出来`T : TypeClass`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:36:40.720

我想说这既不是错误也不是功能，只是某些功能的结果。

在第一个示例中，范围内没有类型`TypeClass[T]`的隐式值。您依靠类型推断来知道 of 的类型，`t`并且由于隐式在编译时已解决，`t`因此由于找不到隐式值，因此未定义 of 的类型。

在第二个示例中，范围中有一个合适的隐式值，即`t`. 如果您通常不允许这种行为，则无法进行递归定义，例如：

```
val fibs: Stream[Int] = 0 #:: 1 #:: fibs.zip(fibs.tail).map{case (x,y) => x+y} 
```

# ruby-on-rails-3 - 如何在 Rails 3 中使用 gem 中的模型？

> ID：11403094
> 
> 赞同：0
> 
> 时间：2012-07-09T21:01:49.373
> 
> 标签：ruby-on-rails-3

我有一个包含一些 ActiveRecord 派生模型的 gem。它们经过测试并且可以工作。

我已经向该 gem 添加了一个依赖项，但是当我尝试访问在 form_for 语句中引用该模型的页面时，例如，我得到了可怕的 method_missing 错误：

`undefined method`mygem_mymodel_path'`

请注意，我的 app/models 目录中的模型和往常一样，一切都很好；将我的模型迁移到这个 gem 一直是悲伤的原因。

**更新1：回应罗宾的问题：**

```
> rails console
> MyModel
=> MyGem::MyModel(id:string, name:string) 
```

**更新 2：对于 Robin 的表格代码** 表格 erb 请求：

```
<%= form_for(MyModel.new, :remote => true, :html => { :class => "new_mymodel_form", :id => "new_mymodel_form"}) do |f| -%> 
```

在罗宾的建议之后，这是我找到的唯一方法：

**更新 3：一个丑陋的解决方法**

使用一个名为 Mymodel 的模型和一个名为 MyModule 的模块：

```
post '/mymodels', to: 'mymodels#create', as: 'my_module_mymodels 
```

因为'as'让你控制路径符号名称。我更愿意使用“资源”宏，但它似乎不知道在创建它时将模块名称添加到路径符号，即使 form_for 附加了模块名称。我认为有办法解决这个问题，但我找不到关于这种情况的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:32:56.553

使用`scope`：

```
scope :as => "mymodule" do
  resources :my_resources
end 
```

# objective-c - 从另一个对象 ios 设置文本字段

> ID：11403100
> 
> 赞同：0
> 
> 时间：2012-07-09T21:02:19.657
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uitextfield

我被困在试图`UITextField`在 titleViewController 上的对象中设置和检索文本。

我有一个 Journal 对象，它引用了 titleViewController 对象，但我似乎无法为`UITextField`.

我在 titleViewController 中有一个 UITextField 对象的出口，Journal 可以看到它，但是当我编写代码来设置值时，它运行时没有任何反应。

XCode 或 Log 中没有弹出错误。我知道它应该可以工作，因为设置可以访问由同一日志管理的其他此类视图控制器中的自定义方法。

-编辑-

以下是要求的代码示例：

```
//Get viewController from Array
TitleVC *titlePage = [_PageArray objectAtIndex:0];

//Get string from Dictionary
NSString *test = [_saveDictionary objectForKey:@"Name"];

//This is one of the attempts to set the UITextField 
//FIXED by Tomy211(but still does not work)
[titlePage.textName setText:test];

//This is attempting dot notation
titlePage.textName.text = test
titlePage.textName = test //Wrong I know but had to test

//Also made sure test was a proper string
NSLog(test) //Displayed "Dan" as Expected 
```

这是在 Journal.m 中，它使用以下代码从情节提要中访问了对 titleVC 的引用：

```
-(UIViewController *)loadView:(NSString *)viewID{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:viewID];
    return viewController;
} 
```

从该方法返回的 ViewController 用于在滚动视图中显示视图，并且我没有遇到过以这种方式从 ViewControllers 访问方法的问题。

我要做的就是让 Journal.m 设置并从 textName 读取值，这是一个连接到`UITextField`.

-更新-

我检查并发现我可以读取 textField 的值但不能写入它。

-最终更新-

我发现我的代码有问题。代码是正确的（减去 Tomy211 的更正），但问题是我在哪里调用代码。我在视图显示之前调用了该方法，因此当视图确实显示时它恢复为默认值。

注意所有有类似问题的人：在更新视图的 UIObject 部分的值之前检查以确保视图正在显示。如果您必须在未显示视图的情况下更新值，请使用实例变量并让 UIObject 在 vi​​ewDidLoad 方法中从它们那里获取它们的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:16:48.057

问题是我试图在加载视图之前更新 TextField 对象。将方法调用移到我加载视图的点之后可以解决问题。我已经更新了我的问题以反映什么是正确的，什么是不正确的。

注意所有有类似问题的人：在更新视图的 UIObject 部分的值之前检查以确保视图正在显示。如果您必须在未显示视图的情况下更新值，请使用实例变量并让 UIObject 在 vi​​ewDidLoad 方法中从它们那里获取它们的值。

# sql-server - 按经理 ID 分组

> ID：11403101
> 
> 赞同：0
> 
> 时间：2012-07-09T21:02:38.847
> 
> 标签：sql-server, database, sql-server-2008, tsql

我有一张如下表

Emp_id、Emp_user_id、Emp_Name、Emp_mgr_id

Emp_mgr_id 将是 Manager 的 emp_id。

所以例如我有如下数据

```
Emp_id Emp_user_id Emp_Name Emp_mgr_id
1      D021         Joe      6
2      D024         Kathy    6
3      D054         Shaun    1
4      D058         Tippu    2
5      D059         Paul     4
6      D070         David    9
7      D075         Jack     9 
```

现在我需要创建一个表单，当 David 使用他的 id D070 登录时，我需要将所有员工报告拉给 David。

```
D021 Joe
 -->D054 Shaun
D024  Kathy
  -->D058   Tippu
  -->D059   Paul 
```

我想按他的直接下属对行进行分组。

有人知道如何编写查询来提取这样的数据吗？输入将是 Emp_User_id，输出我需要按直接下属分组的所有下属。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:12:46.633

您可以为此使用[递归公用表表达式](http://blog.sqlauthority.com/2008/07/28/sql-server-simple-example-of-recursive-cte/)。事实上，这是它们最常见的用途之一（经理 -> 员工类型层次结构）

```
WITH Emp_CTE AS (
SELECT Emp_ID, Emp_User_ID, Emp_Name, Emp_Mgr_ID
FROM EmpTable
WHERE Emp_Mgr_ID IS NULL -- This assumes the top-level managers have no manager.
UNION ALL
SELECT Emp_ID, Emp_User_ID, Emp_Name, Emp_Mgr_ID
FROM EmpTable AS e
    INNER JOIN Emp_CTE AS cte ON cte.Emp_ID = e.Emp_Mgr_ID
)
SELECT *
FROM Emp_CTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:48:57.350

嗨找到下面的存储过程以按顺序获取名称。

```
CREATE TABLE emptbl(Emp_id int, Emp_user_id varchar(10), Emp_Name varchar(100), Emp_mgr_id int)

INSERT INTO emptbl
VALUES(1,'D021','Joe',6),
(2,'D024','Kathy',6),
(3,'D054','Shaun',1),
(4,'D058','Tippu',2),
(5,'D059','Paul',4),
(6,'D070','David',9),
(7,'D075','Jack',9)

SELECT * FROM emptbl

CREATE Proc sp_getRepportees
@emp_id varchar(20)
As
--sp_getRepportees 'D070'
DECLARE @min int=1
DECLARE @max int

DECLARE @empout TABLE(Emp_id int, Emp_user_id varchar(10), Emp_Name varchar(100), Emp_mgr_id int)
;WITH CTEEmp(Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id) As
(
SELECT Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from emptbl where Emp_user_id=@emp_id
UNION ALL
SELECT et.Emp_id,et.Emp_user_id,et.Emp_Name,et.Emp_mgr_id from emptbl et inner join CTEEmp e on et.Emp_mgr_id = e.emp_id)

,CTE2(rno,Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id) as(
SELECT ROW_NUMBER() over (order by emp_id) as rno,* FROM CTEEmp where Emp_user_id<>@emp_id)

select * into #tempe from CTE2
SELECT @max=COUNT(*) from #tempe

select * from #tempe
While(@min<=@max)
begin

IF EXISTS(select Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from #tempe where Emp_mgr_id in (select Emp_id from #tempe where rno=@min))
begin
INSERT INTO @empout
select Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from #tempe where rno=@min
union  
select Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from #tempe where Emp_mgr_id in (select Emp_id from #tempe where rno=@min)
end

delete from #tempe where rno=@min
SET @min+=1
end

select Emp_user_id,Emp_Name from @empout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T09:54:16.113

这是 CTE 的输出。但是在这里你需要做一点改变才能以所需的格式显示结果。

创建表emptbl（Emp_id int，Emp_user_id varchar（10），Emp_Name varchar（100），Emp_mgr_id int）

插入空值（1，'D021'，'Joe'，6），（2，'D024'，'Kathy'，6），（3，'D054'，'Shaun'，1），（4，' D058','Tippu',2), (5,'D059','Paul',4), (6,'D070','David',9), (7,'D075','Jack',9 )

```
SELECT * FROM emptbl

;WITH CTEEmp(Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id) As
(
SELECT Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from emptbl where Emp_user_id='D070'
UNION ALL
SELECT  et.Emp_id,et.Emp_user_id,et.Emp_Name,et.Emp_mgr_id from emptbl et inner join CTEEmp e on et.Emp_mgr_id = e.emp_id)

,CTEEmp1(Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id)As
(SELECT Emp_id,Emp_user_id,Emp_Name,Emp_mgr_id from CTEEmp where Emp_user_id<>'D070')

SELECT * FROM CTEEmp1 
```

# r - 从 ggplot 条形图中删除未使用的因子水平

> ID：11403104
> 
> 赞同：19
> 
> 时间：2012-07-09T21:03:08.267
> 
> 标签：r, plot, ggplot2, factors

我想做这个问题的反面[，和这个问题](https://stackoverflow.com/questions/10834382/ggplot2-keep-unused-levels-barplot)[的](https://stackoverflow.com/questions/10002627/ggplot2-0-9-0-automatically-dropping-unused-factor-levels-from-plot-legend)反面，虽然那是关于传说，而不是情节本身。

其他 SO 问题似乎是在询问如何*保持*未使用的因子水平。我实际上希望我的删除。我有几个名称变量和几个变量属性列（宽格式），用于创建大量条形图。这是一个可重现的示例：

```
library(ggplot2)
df <- data.frame(name=c("A","B","C"), var1=c(1,NA,2),var2=c(3,4,5))
ggplot(df, aes(x=name,y=var1)) + geom_bar() 
```

我明白了：

![在此处输入图像描述](../Images/b254cc1b76857d0a4dca62161c39e105.png)

我只想在我的条形图中显示具有相应 var [n]的名称（例如，B 没有空白区域）。

`y=var`如果我可以简单地更改输出文件名和位，重用基本绘图代码将非常容易。如果可能的话，我不想仅仅为了在每个图的结果上使用 droplevels 而对我的数据框进行子集化！

* * *

**根据`na.omit()`建议更新**

考虑一个修改后的数据集：

```
library(ggplot2)
df <- data.frame(name=c("A","B","C"), var1=c(1,NA,2),var2=c(3,4,5), var3=c(NA,6,7))
ggplot(df, aes(x=name,y=var1)) + geom_bar() 
```

我需要`na.omit()`用于绘图`var1`，因为存在 NA。但是由于 na.omit 确保*所有列*都存在值，因此该图也会删除`A`，因为它在 NA 中有一个 NA `var3`。这更类似于我的数据。我总共有 15 条回复，其中充斥着 NA。我只想删除*当前*绘制的 y 向量没有值的因子水平，而不是在整个数据帧中的*任何向量中具有 NA 的因子水平。*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-09T21:07:29.560

一个简单的选择是`na.omit()`在您的数据框上使用`df`以删除这些行`NA`

```
ggplot(na.omit(df), aes(x=name,y=var1)) + geom_bar() 
```

鉴于您的更新，以下

```
ggplot(df[!is.na(df$var1), ], aes(x=name,y=var1)) + geom_bar() 
```

工作正常，只考虑`NA`在`Var1`. 鉴于您只绘制`name`和`Var`，适用`na.omit()`于仅包含这些变量的数据框

```
ggplot(na.omit(df[, c("name", "var1")]), aes(x=name,y=var1)) + geom_bar() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T21:30:39.693

请注意，在绘图时，您仅使用数据框的两列，这意味着您可以将相关列`x[,c("name", "var1")]`应用 na.omit 以删除不需要的行（正如 Gavin Simpson 建议的那样） ，而不是传递整个 data.frame`na.omit(x[,c("name", "var1")])`然后绘制这些数据。

我的 R/ggplot 很生锈，我意识到可能有更清洁的方法来实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-03T17:54:52.130

自从最初提出这个问题以来，已经过去了很多时间。如果我在 2021 年处理这个问题，我会使用类似的东西：

```
library(ggplot2)
library(tidyr)
df <- data.frame(name=c("A","B","C"), var1=c(1,NA,2),var2=c(3,4,5))

df %>% 
  drop_na(var1) %>% 
  ggplot(aes(name, var1)) +
  geom_col() 
```

![](../Images/7bc07d654fb86909595fd2094ea58d8f.png)

^(由[reprex 包](https://reprex.tidyverse.org)于 2021-12-03 创建(v2.0.1))

# javascript - 捕获javascript console.log？

> ID：11403107
> 
> 赞同：80
> 
> 时间：2012-07-09T21:03:12.700
> 
> 标签：javascript

> **可能重复：**
> [在 Chrome 中拦截对 console.log 的调用](https://stackoverflow.com/questions/9216441/intercept-calls-to-console-log-in-chrome)
> [我可以在 javascript 中扩展控制台对象（用于重新路由日志记录）吗？](https://stackoverflow.com/questions/9277780/can-i-extend-the-console-object-for-rerouting-the-logging-in-javascript)

当我的 JS 应用程序写入时`console.log`，我想捕获该日志消息，以便我可以将该日志输出 AJAX 到服务器。我怎么做？

写入日志的代码来自外部服务，这就是为什么我不能直接 ajax 它。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-07-09T21:05:38.407

您可以通过以下方式劫持 JavaScript 函数：

```
(function(){
    var oldLog = console.log;
    console.log = function (message) {
        // DO MESSAGE HERE.
        oldLog.apply(console, arguments);
    };
})(); 
```

1.  **第 1**行将您的函数包装在一个闭包中，因此没有其他函数可以直接访问`oldLog`（出于可维护性原因）。
2.  **第 2 行**捕获了原始方法。
3.  **第 3 行**创建了一个新函数。
4.  **第 4 行**是您发送`message`到服务器的位置。
5.  **第 5 行**调用原始方法，因为它本来会被处理。

`apply`被使用，因此我们可以使用原始参数调用它*。* `console`简单地调用`oldLog(message)`会失败，因为`log`取决于它与`console`.

* * *

**更新**Per zzzzBov 下面的评论，在 IE9`console.log`中实际上不是一个函数，所以`oldLog.apply`会失败。有关更多详细信息，请参阅[console.log.apply not working in IE9](https://stackoverflow.com/questions/5538972/console-log-apply-not-working-in-ie9)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-09T21:04:42.267

简单的：

```
function yourCustomLog(msg) {
  //send msg via AJAX
}

window.console.log = yourCustomLog; 
```

您可能想要覆盖整个`console`对象来捕获`console.info`，`console.warn`例如：

```
window.console = {
  log : function(msg) {...},
  info : function(msg) {...},
  warn : function(msg) {...},
  //...
} 
```

# iphone - iPhone 注册时钟更新

> ID：11403108
> 
> 赞同：5
> 
> 时间：2012-07-09T21:03:18.907
> 
> 标签：iphone, objective-c, nstimer, clock

我的应用程序中的一个视图有一个我想与系统保持同步的时钟。许多堆栈问题都围绕着 NSTimer，但在此之前，我想检查是否有我可以注册的系统通知每分钟触发一次。

这样的事情存在吗？我正在浏览 NSNotificationCenter 但到目前为止什么都没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T04:40:08.663

您可以通过计算分钟的下一次更改来使用`NSTimer`'s`initWithFireDate`在分钟内触发：

```
NSDate *currentDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"ss"];
int currentTimeSeconds = [dateFormatter stringFromDate:currentDate].intValue;

NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:60 - currentTimeSeconds];
NSTimer *updateTimer = [[NSTimer alloc] initWithFireDate:fireDate
                                                 interval:60
                                                   target:self
                                                 selector:@selector(updateSelector)
                                                 userInfo:nil
                                                  repeats:YES];

NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop addTimer:updateTimer forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:10:09.730

据我所知，没有`NSNotificationCenter`电话存在。这真的就像设置一个`NSTimer`. 只要您将间隔设置`NSTimer`为**1 秒，就可以了。**以下是我如何在我的一个应用程序的标签中使用时间/日期。

```
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self 
                 selector:@selector(clockDateAndTime:) userInfo:nil repeats:YES];

-(void)clockDateAndTime:(NSTimer*)timer 
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init]; 
    NSDate * date = [NSDate date];
    [formatter setDateFormat:@"MMM dd, yyyy hh:mm:ss a"];
    [lblLocalDate setText:[formatter stringFromDate:date]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T19:36:47.207

[上面beggs](https://stackoverflow.com/a/11771148/1415713)的答案是正确的......这里是为了迅速：

```
let dateComp = self.calendar.components(NSCalendarUnit.CalendarUnitDay | NSCalendarUnit.MonthCalendarUnit | NSCalendarUnit.YearCalendarUnit | NSCalendarUnit.CalendarUnitHour | NSCalendarUnit.CalendarUnitMinute | NSCalendarUnit.CalendarUnitSecond, fromDate: NSDate())
    dateComp.minute += 1
    dateComp.second = 0

    println(self.calendar.dateFromComponents(dateComp)!)
    let myTimer =  NSTimer(fireDate: self.calendar.dateFromComponents(dateComp)!, interval: 60, target: self, selector: "refreshCountdownNextMeal", userInfo: nil, repeats: true)
    let runloop = NSRunLoop.currentRunLoop()
    runloop.addTimer(myTimer, forMode: NSDefaultRunLoopMode) 
```

我不必告诉你，每分钟调用一次定时器不如每分钟 60 次更好，对吧？;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T21:21:17.097

@beggs 答案的更直接的 swift 2 翻译：

```
let currentDate = NSDate()
let dateFormatter = NSDateFormatter()
dateFormatter.dateFormat = "ss";
let currentTimeSeconds = Double(dateFormatter.stringFromDate(currentDate))
let fireDate = NSDate(timeIntervalSinceNow: 60 - currentTimeSeconds!)

let timer = NSTimer(fireDate: fireDate, interval: 60, target: self, selector: "minuteLoop", userInfo: nil, repeats: true)
NSRunLoop.mainRunLoop().addTimer(timer, forMode: NSDefaultRunLoopMode) 
```

# objective-c - 如何正确分离视图和控制器？

> ID：11403110
> 
> 赞同：0
> 
> 时间：2012-07-09T21:03:27.477
> 
> 标签：objective-c, model-view-controller, view, controller

我有个问题。我想在我的主视图中自定义一个按钮，所以，在 viewDidLoad 这个视图的控制器中，有这个代码：

```
 [self.buttonGenerate setBackgroundImage:[[UIImage imageNamed:@"blueButton.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:10] forState:UIControlStateNormal];
    [self.buttonGenerate setBackgroundImage:[[UIImage imageNamed:@"blueButtonHighlight.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:10] forState:UIControlStateHighlighted]; 
```

但是，我不确定相对于 MVC 模式是否好，这段代码在我的控制器中，而它应该在视图代码中。你的意见 ？什么是好的做法？

（对不起我的英语不好）

谢谢你

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T21:54:23.837

Ideally it would be in your view code.

Here's a [link](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html "link") on the MVC design pattern in Apple's docs.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-03T18:29:17.320

在这里您可以找到一篇关于[如何将视图逻辑与视图控制器分离](http://jpellat.com/how-to-separate-view-controllers-from-his-view-logic/)的文章。我希望它有帮助:)

# caching - 如何修复高内存缓存浪费空间？

> ID：11403125
> 
> 赞同：0
> 
> 时间：2012-07-09T21:04:19.163
> 
> 标签：caching, memcached, sysadmin

我们正在使用一个相当大（20GB）、非常活跃（>92% 命中率）的 Memcache 集群，并且看到超过 10% 的空间浪费。

驱逐率极低（0.1/秒），回收率持平 - 0。

这是否值得关注，有什么可以做的——甚至是定期做的——以确保它不会像目前那样占用那么多可用空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:27:38.287

我最近对大约两倍大小的 memcached 集群的空间使用情况进行了分析。

我们发现，当 memcached 在各种尺寸的平板中有空卡盘时，通常会出现“浪费”空间，而这些卡盘根本没有被填充。

这似乎是memcached < 1.4.11 中的slab 分配是静态的，并且特定slab 大小的内存仅从相同大小的slab 中逐出（一旦分配）这一事实的副作用。

[http://code.google.com/p/memcached/wiki/ReleaseNotes1411](http://code.google.com/p/memcached/wiki/ReleaseNotes1411)

从 1.4.11 开始，引入了slab 重新分配的功能，据说这意味着允许 LRU 从其他slab 类中驱逐对象以在所需的slab 类上使用。

我不确定如果逐出率使得内存不断被逐出并重新分配给不同的平板类会发生什么。

然而，鉴于驱逐率低，除非您在其他地方遇到性能问题，否则我不会过分担心。

希望这会有所帮助。

# xml - XSLT 选择所有包含文本的项目

> ID：11403127
> 
> 赞同：1
> 
> 时间：2012-07-09T21:04:35.240
> 
> 标签：xml, xslt, xpath

我已经有 5 年没有接触过 XSLT 了，而且我不记得有人会如何做到这一点。本质上，我有一个如下所示的 XML 结构：

```
<xml>
    <MenuDataResult>
        <Item name="firstlayeritem">
            <Item></Item>
            <Item></Item>
            <Item name="secondlayeritem">
                <Item name="thirdlayeritem">
                    <ItemSelected>true</ItemSelected>
                </Item>
            </Item>
            <Item></Item>
            <Item></Item>
        </Item>
    </MenuDataResult>
</xml> 
```

此 XSLT 正在基于此结构构建 UL，但仅在 Items 的第二级（这是针对仅包含二级导航项的页面左侧的辅助导航栏）。这曾经是最多两层深，因此对第二层中的 ItemSelected 节点的简单检查将允许我们向该节点的“当前”或类似的 LI 元素添加一个类，以启用该元素的 CSS 突出显示导航。

现在他们想添加第三层，就像上面一样。这里的技巧是，第三层实际上并没有显示在无序列表中，只有第二层项目是，所以第二层项目需要是获得“当前”类的项目，即使“ItemSelected”节点在它的一个孩子身上。

我们曾经做过这个检查：

```
<xsl:variable name="SelectedMenu" select="ItemSelected/text()" />
<xsl:if test="contains('true', $SelectedMenu)">...</xsl:if> 
```

然后检查是否等于 true 以添加类。但现在我需要它不仅查看当前项目，还查看所有子项目，以查看其中是否有任何“真实”。

有人可以帮我弄清楚需要做什么才能做到这一点吗？我不记得 XSLT 的任何细微差别或如何做这类事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:32:32.223

> 但现在我需要它不仅查看当前项目，还查看所有子项目，以查看其中是否有任何“真实”。

**使用**：

```
.//*[. = 'true'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:18:50.413

Select any `Item` that has a `name` attribute whose value is `secondlayeritem` and that has a descendant element (at any level) named `ItemSelected` whose string value is `true`:

```
//Item[@name='secondlayeritem'][descendant::ItemSelected[.='true']] 
```

Use this expression to test for the presence of such an element, which indicates that the item should be included in the output.

# python - 关于 Python 列表切片结果的困惑

> ID：11403132
> 
> 赞同：2
> 
> 时间：2012-07-09T21:04:56.820
> 
> 标签：python, list

我是 Python 新手，我从一个简单的列表切片操作中得到的以下输出让我很困惑。

这是代码。

```
>>> a = [1,2,3,4];
>>> a[1:3]
[2, 3]

>>> a[3]
4 
```

不应该`a[1:3]`返回`[2,3,4]`而不是`[2,3]`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T21:05:53.170

`a[1:3]`指定一个*半封闭区间*，这意味着它包括从*第一个*指定索引开始到*但不包括*在*第二个*索引处的值。

所以在这种情况下`a[1:3]`意味着切片包括`a[1]`and `a[2]`，但*不* `a[3]`

[您在range()](http://docs.python.org/library/functions.html#range)函数的使用中看到了相同的情况。例如

```
 range(1, 5) 
```

将生成一个从 1 到 4 的列表，但*不*包括 5。

这与许多编程语言的工作方式非常一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:12:05.347

[slice](http://docs.python.org/library/functions.html#slice)的文档可能会有所帮助。

> **slice([start], stop[, step])**
> 返回一个切片对象，表示由 指定的索引集`range(start, stop, step)`。

大多数人熟悉的切片格式只是一个简写：

```
a[start:stop:step] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:06:07.943

切片最多返回（但不包括）第二个切片索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:52:47.457

You've got some good answers about how it works, here's one with why:

> > > a = '0123456789' a[2:4] '23' a[4:6] '45' a[6:8] '67'

IOW, it makes it easy to step through a list or string or tuple n characters at a time, without wasting time on the +1 / -1 stuff needed in most languages.

# android - Android MediaPlayer/VideoView 带字幕 (SRT)

> ID：11403134
> 
> 赞同：12
> 
> 时间：2012-07-09T21:05:00.170
> 
> 标签：android, google-tv

Android 的 MediaPlayer 是否支持 SRT 字幕？我试图将 SRT 文件放在与视频文件相同的目录中，并将其命名相同（当然扩展名除外），但没有任何运气让它们显示。有什么想法、建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T21:19:55.373

**Android 4.0.x 及以下版本**

Android 4.0 及以下版本，默认媒体播放器不支持字幕。

Google Play 中提供了支持字幕的第三方播放器应用程序。其中之一是[MoboPlayer](https://play.google.com/store/apps/details?id=com.clov4r.android.nil&hl=en)

如果您打算使用代码执行此操作，以下链接是一个很好的资源[http://www.ittiam.com/wp-content/knowledge-center/whitepapers/WP006_rendering-subtitles-in-android.pdf](http://www.ittiam.com/wp-content/knowledge-center/whitepapers/WP006_rendering-subtitles-in-android.pdf)

**Android 4.1 (果冻豆 - JB))**

Android JB 版本内置了对内部（存在于 MP4 文件中）和 SRT 外部字幕的支持。更多详细信息，请访问[http://developer.android.com/about/versions/android-4.1.html#Multimedia](http://developer.android.com/about/versions/android-4.1.html#Multimedia)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-25T16:13:11.063

[这](http://intellectualcramps.wordpress.com/2013/04/04/subtitle-support/#comment-1377)是关于 Pre-Jellybean 设备上的字幕支持的精彩帖子。对我来说工作得很好，确实比 4.1 上的原生支持更好。希望这可以帮助。

更新：我在我的[博客](http://sriharia.blogspot.sg/2014/08/subtitles-support-to-android.html)中做了一个演示项目以供代码参考

# shell - 如何在 shell 脚本中使用 chmod

> ID：11403135
> 
> 赞同：2
> 
> 时间：2012-07-09T21:05:00.237
> 
> 标签：shell, chmod

所以这是在一个shell脚本中：

```
#!/bin/bash
trialName= "trial.txt"

chmod a+rwx $trialName 
```

这真的行不通。我正在尝试添加单引号/双引号，`$trialName`但这也不起作用。我有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:08:16.470

您需要删除之后的空格`=`：

```
trialName="trial.txt" # note the absence of the space between '=' and '"'
chmod a+rwx "$trialName" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:09:45.847

```
#!/bin/bash
TRIALNAME="trial.txt"

chmod a+rwx $TRIALNAME 
```

它有效吗？之间不能有空格`=`

# c++ - 是否可以在启用 RTTI 的同时从可执行文件中删除类型名称？

> ID：11403136
> 
> 赞同：3
> 
> 时间：2012-07-09T21:05:04.587
> 
> 标签：c++, visual-c++, compiler-optimization, rtti

我最近在我的编译器 (MSVC10) 上禁用了 RTTI，并且可执行文件大小显着减小。通过使用文本编辑器比较生成的可执行文件，我发现无 RTTI 版本包含的符号名称要少得多，这说明了节省的空间。

AFAIK，这些符号名称仅用于填充`type_info`与每个多态类型关联的结构，并且可以通过编程方式调用它们来访问它们`type_info::name()`。

根据标准，返回的字符串的格式`type_info::name()`是未指定的。也就是说，没有人可以依靠它便携地做严肃的事情。因此，实现应该有可能始终返回一个空字符串而不破坏任何内容，从而在不禁用 RTTI 支持的情况下减小可执行文件大小（因此我们仍然可以安全地使用`typeid`运算符 & compare`type_info`的对象）。

但是……这可能吗？我正在使用 MSVC10，但没有找到任何选项。我可以完全禁用 RTTI ( `/GR-`)，也可以使用完整的类型名称 ( `/GR`) 启用它。有没有编译器提供这样的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:31:22.593

> 因此，实现应该有可能始终返回一个空字符串而不会破坏任何内容，从而在不禁用 RTTI 支持的情况下减小可执行文件大小（因此我们仍然可以使用 typeid 运算符并安全地比较 type_info 的对象）。

你误读了标准。`type_info::name()`从未指定（以空结尾的二进制字符串除外）生成返回值的目的是让编译器/库/运行时环境的实现者自由支配以实现他们认为最好的 RTTI 要求。作为程序员，您对如何设计或实现应用程序二进制接口（如果有）没有发言权。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T23:47:07.167

你在这里问三个不同的问题。

1.  最初的问题询问是否有任何方法可以让 MSVC 不生成名称，或者是否有可能与其他编译器一起使用，或者，如果失败了，是否有任何方法可以在不破坏任何东西的情况下从生成的 type_info 中删除名称。

2.  然后您想知道是否可以修改 MS ABI（可能不会太激进），以便可以剥离名称。

3.  最后，您想知道是否可以设计一个没有名称的 ABI。

问题 #1 本身就是一个复杂的问题。据我所知，没有办法让 MSVC 不生成名称。大多数其他编译器针对的是专门定义 typeid(foo).name() 必须返回的 ABI，因此它们也不能不生成名称。

更有趣的问题是，如果去掉名字会发生什么。对于 MSVC，我不知道答案。最好的办法可能是尝试一下——进入您的 DLL 并将每个名称的第一个字符更改为 \0 并查看它是否会破坏 dynamic_cast 等（我知道您可以使用 Mac 和 linux x86_64 可执行文件执行此操作由 g++ 4.2 生成并且它可以工作，但我们暂时把它放在一边。）

关于问题 #2，假设空白名称不起作用，将基于名称的系统修改为不再需要名称并不难。一个简单的解决方案是使用名称的散列，甚至是 ROT13 编码的名称（请记住，这里的原始目标是“我不希望普通用户看到我的类的令人尴尬的名称”）。但我不确定这是否适用于您正在寻找的东西。稍微复杂一点的解决方案如下：

*   对于“dllexport”类，生成一个 UUID，将其放入 typeinfo，并将其放入与 DLL 一起生成的 .LIB 导入库中。
*   对于“dllimport”ed 类，从 .LIB 中读取 UUID 并改用它。

因此，如果您设法正确获取 dllexport/dllimport，它将起作用，因为您的 exe 将使用与 dll 相同的 UUID。但如果你不这样做呢？如果您“不小心”在 DLL 和 EXE 中指定了相同的类（例如，具有相同参数的相同模板的实例化），而没有将一个标记为 dllexport 和一个标记为 dllimport，该怎么办？RTTI 不会将它们视为同一类型。

这是一个问题吗？好吧，C++ 标准并没有说它是。也没有任何 MS 文档。事实上，文档明确表示您不允许这样做。您不能在两个不同的模块中使用相同的类或函数，除非您明确地将其从一个模块导出并导入另一个模块。使用类模板很难做到这一点的事实是一个问题，而且这是一个他们没有尝试解决的问题。

让我们举一个现实的例子：创建一个基于节点的`linkedlist`类模板，其中包含一个全局静态哨兵，其中每个列表的最后一个节点都指向该哨兵，end() 函数只返回一个指向它的指针。（微软自己的 std::map 实现正是这样做的；我不确定这是否仍然正确。）`linkedlist<int>`在你的 exe 中新建 a ，并通过引用你的 dll 中试图从 to 迭代的函数来传递`l.begin()`它`l.end()`. 它永远不会完成，因为 exe 创建的节点都不会指向 dll 中哨兵的副本。当然，如果你传递`l.begin()`并`l.end()`进入 DLL，而不是传递`l`自身，你就不会有这个问题。您通常可以通过`std::string`或各种其他类型的引用，只是因为它们不依赖于任何破坏的东西。但你实际上并没有被允许这样做，你只是走运了。因此，虽然用必须在链接时查找的 UUID 替换名称意味着在链接加载器时无法匹配类型，但在链接加载器时类型*已经无法匹配*的事实意味着这是无关的。

建立一个没有这些问题的基于名称的系统是可能的。[ARM C++ ABI](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ihi0041c/index.html) （以及基于它的iOS 和 Android ABI）限制了程序员可以比 MS 少得多的东西，并且对链接加载器如何使其工作有非常具体的要求（3.2.5）。这个不能修改为不基于名称，因为它是设计中的明确选择：

> • type_info::operator== 和 type_info::operator!= 比较 type_info::name() 返回的字符串，而不仅仅是指向 RTTI 对象及其名称的指针。
> 
> • 不依赖type_info::name() 返回的地址。（也就是说，t1.name() != t2.name() 并不意味着 t1 != t2）。
> 
> 第一个条件有效地要求这些运算符（和 type_info::before()）必须被调用，并且执行环境必须提供它们的适当实现。

但也可以构建一个不存在此问题且不使用名称的 ABI。这很好地延续到#3。

[Itanium ABI](http://refspecs.linuxbase.org/cxxabi-1.83.html) （除其他外，在 x86_64 和 i386 上被OS X 和最近的 linux 使用）确实保证`linkedlist<int>`在一个对象中`linkedlist<int>`生成的 a 和从另一个对象中的相同标头生成的 a 可以在运行时链接在一起，并将成为相同类型，这意味着它们必须具有相同的 type_info 对象。从 2.9.1 开始：

> 当且仅当指针相等时，两个 type_info 指针才指向等价的类型描述。实现必须满足这个约束，例如通过使用符号抢占、COMDAT 部分或其他机制。

编译器、链接器和链接加载器必须协同工作，以确保在可执行文件中创建的 a指向与在共享对象`linkedlist<int>`中创建的完全相同的 type_info 对象。`linkedlist<int>`

所以，如果你只是把所有的名字都拿出来，那根本就没有任何区别。（这很容易测试和验证。）

但是你怎么可能实现这个 ABI 规范呢？j_kubik 有效地辩称这是不可能的，因为您必须在 .so 文件中保留一些链接时间信息。这指向了一个明显的答案：在 .so 文件中保留一些链接时间信息。事实上，您已经必须这样做来处理加载时重定位等问题；这只是扩展了您需要保留的内容。事实上，Apple 和 GNU/linux/g++/ELF 都是这样做的。（这也是几年前每个构建复杂 linux 系统的人都必须了解符号可见性和模糊链接的部分原因。）

有一个更明显的方法来解决这个问题：编写一个基于 C++ 的链接加载器，而不是试图让 C++ 编译器和链接器一起工作来欺骗基于 C 的链接加载器。但据我所知，自从 Be 之后没有人尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:03:12.930

类型描述符的要求：

*   在多编译单元和共享库环境中正常工作；
*   适用于不同版本的共享库；
*   工作正常，**尽管不同的编译单元不共享任何关于类型的信息，除了它的名称：**通常一个头文件用于所有编译单元来定义相同的类型，但这不是必需的；即使，它不会影响生成的目标文件。
*   尽管模板实例化必须在使用它们的每个库中完全定义（因此包括 type_info 数据），但可以正常工作，并且如果一起使用多个此类库，则其行为类似于一种类型。

第四条规则本质上禁止所有基于非名称的类型描述符，如 UUID（除非在类型定义中特别提及，但这充其量只是名称替换，可能需要标准更改）。

在单独的文件（如建议 .LIB 文件）中存储 UUID 也会导致麻烦：实现新类型的不同库版本会导致麻烦。

编译单元应该能够共享相同的类型（及其`type_info`）而不需要涉及链接器 - 因为它应该不受任何语言细节的影响。

因此 type-name 只能是唯一的类型描述符，无需完全重新建模编译和链接（也是动态的）。我可以想象它可以工作，但不是在当前方案下。

# iphone - 在 iPhone 设备上运行时如何不覆盖应用程序？

> ID：11403138
> 
> 赞同：0
> 
> 时间：2012-07-09T21:05:11.830
> 
> 标签：iphone, version, overwrite

我正在制作一个项目，我想展示同一个项目的三个不同版本，但是当我运行其中一个时，它会覆盖前一个。我想同时拥有这三个，我该怎么做？我试图更改捆绑显示名称，但它仍然会覆盖它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:09:12.580

更改捆绑标识符。您将无法更改产品名称，但您可以在其后附加 .1 或其他名称![标识符](../Images/c1daec8eb4f913c8e57999d96334adee.png)

# c++ - C++ 中是否存在错误类型？

> ID：11403140
> 
> 赞同：1
> 
> 时间：2012-07-09T21:05:23.227
> 
> 标签：c++, types

考虑以下类型

```
template <typename T1, typename T2, typename T3>
struct either_or
{
    /* Here I need such an error type that says "Sorry, T1 is not an accepting type." */
    typdef error<T1> type;
};
template <typename T1, typename T3>
struct either_or <T1, T1, T3>
{
    typedef T1 type; //T1 Ok
};
template <typename T1, typename T2>
struct either_or <T1, T2, T1>
{
    typedef T1 type; //T1 Ok
};

/* Here is function that might accept error type variable */

template <typename T>
void foo(typename either_or<T, char, unsigned char>::type x)
{
    /*print char or unsigned char except that T is not printable*/
} 
```

在这种情况下使用的 C++ 类型系统中是否存在错误类型？如果没有，我可以实现它还是如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:12:16.717

不，语言或标准库没有提供这种类型。如果您愿意，欢迎您自己制作：

```
template <typename T>
struct error { }; 
```

另一种选择是简单地从基本模板中*省略定义。*`type`当 、 和 的值`T1`不`T2`匹配`T3`两个特化中的任何一个时，您将获得没有`type`成员的基本模板。这将导致编译器不考虑该版本`foo`，并且当您尝试使用无效参数类型调用它时，最终会出现编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:27:53.763

怎么样：

```
template <typename T1, typename T2, typename T3>
struct either_or
{
    static_assert(false, "Sorry but this doesn't work for type T1");
    //typdef error<T1> type;
};
template <typename T1, typename T3>
struct either_or <T1, T1, T3>
{
    typedef T1 type; //T1 Ok
};
template <typename T1, typename T2>
struct either_or <T1, T2, T1>
{
    typedef T1 type; //T1 Ok
};

/* Here is function that might accept error type variable */

template <typename T>
void foo(typename either_or<T, char, unsigned char>::type x)
{
    /*print char or unsigned char except that T is not printable*/
} 
```

这应该显示如下内容：

```
error: Sorry but this doesn't work for type T1
when instantiating either_or<T1,T2,T3>
with T1 = <typename>, T2=<typename>, T3=<typename> 
```

如果已编译 - 确切的错误消息当然取决于编译器。如果您想问-不，不可能将实际类型名集成到消息中`"Sorry but this doesn't work for type T1"`-请参阅[此](https://stackoverflow.com/questions/6415186/integrate-type-name-in-static-assert-output)线程。

# eclipse - 在 Eclipse 中安装 Drools Planner

> ID：11403141
> 
> 赞同：2
> 
> 时间：2012-07-09T21:05:24.107
> 
> 标签：eclipse, eclipse-plugin, drools, drools-planner

我几乎是 Java 技术的新手（不包括学校的编程基础）。但我对 NP 问题很感兴趣，我想看看 Drools Planner。

所以我正在尝试按照[本教程](http://docs.jboss.org/drools/release/5.4.0.Final/droolsjbpm-introduction-docs/html_single/index.html#d0e95)安装 Drool Planner 。

脚步：

*   安装 Eclipse（至少 3.4.*）：完成，版本：3.4.2 已经安装在我的电脑中（Windows XP PRO，好的，这是我的老好驴）。
*   安装 GEF：完成
*   安装 Drools 插件：失败。

我已将存档下载并解压缩到我的 Eclipse 根目录中。该教程指出，在正确目录中解压缩存档后重新启动 Eclipse 应该启用 Drools Perspective。

但是没有可用的 Drools 视角。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:35:21.707

那是 Drools 专家文档。相反，请遵循[Drools Planner 文档的这一部分](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#downloadAndRunTheExamples)。该部分和以下部分*1.4.2。在 IDE（IntelliJ、Eclipse、NetBeans）*中运行示例应该让您立即在 Eclipse 中运行 Drools Planner 示例。

安装 drools-eclipse-plugin 是完全可选的，尽管在编辑 DRL 文件时可以方便地完成代码。无论哪种方式，首先要专注于让示例运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:34:45.247

在较新版本的 Eclipse (>= Indigo) 和 Drools (>= 5.5) 中，这两个教程都不起作用。是否通过更新站点或 Eclipse Marketplace 或通过提取下载的 zip 文件来安装 Drools。

唯一对我有用的解决方案：

第一步，如教程中所述 1\. 使用“安装新软件”安装 GEF 2.使用“安装新软件”安装 Drools 包

现在 Eclipse 中没有出现 Drools 功能。因此：

1.  关闭 Eclipse 并使用参数“-console”重新启动
2.  键入“安装[http://download.jboss.org/drools/release/5.5.0.Final/org.drools.updatesite/plugins/org.drools.eclipse_5.5.0.Final.jar](http://download.jboss.org/drools/release/5.5.0.Final/org.drools.updatesite/plugins/org.drools.eclipse_5.5.0.Final.jar) ”（在较新版本上正确更改 url ) --> Eclipse 会给你一个 bundle id

3.  键入“开始 [捆绑 ID]”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:09:48.460

最终，我按照 droolsjbpm-tools-distribution-5.4.0.Final.zip 存档中包含的 ReadMeDroolsJbpmTools.txt 中的说明进行操作：

> *   打开 Eclipse。
> *   打开菜单“帮助”，菜单项“安装新软件...”
> *   单击按钮“添加...”以添加新的软件站点。
> *   填写名称“drools 本地更新站点”
> *   单击“本地...”按钮并选择“.../binaries/org.drools.updatesite”
> *   选择所有插件。单击“下一步”和“完成”按钮。

现在我成功打开了 Drool Perspective。

# tcp - Erlang 套接字：提早发回 FIN/RST？

> ID：11403143
> 
> 赞同：1
> 
> 时间：2012-07-09T21:05:29.943
> 
> 标签：tcp, erlang, wireshark, erlang-otp

**tl;博士**：Wireshark 说 gen_tcp 正在发送`FIN`,`RST`标志，然后我才能完成接收我的*所有*数据......

我正在通过 gen_tcp 从活动套接字接收数据。它来自通过 BIO_write() 的（未加密的）OpenSSL 套接字（参见[http://linux.die.net/man/3/bio_write](http://linux.die.net/man/3/bio_write)）并且 gen_tcp 正在使用以下选项进行侦听：

`[binary,{packet,0},{active,true},{reuseaddr,false},{recbuf,256000}]`

我正在使用 Erlang/OTP 的 Win32 发行版运行它，并希望收到一些相当大的数据，因此会收到很大的 recbuf。过去，这对我来说效果很好。

我从每个发出的*总*`FIN`数据包中只得到前 1516 个字节，然后 gen_tcp 发回 a ，我不知道为什么会这样。

[这是我的Wireshark 转储](http://pastebin.com/fRvHpWPE)的快照：

![在此处输入图像描述](../Images/8a49e74ce1ee19e7269e8a139814096b.png)

*37.184 是 Erlang 接收器，*35.125 是 OpenSSL 发送器。

蓝线是“标头”数据包，通过协议版本发送。数据长度为“Len=1460”的块是第一个大数据块。然后是 ACK @#3，然后 Erlang 用`FIN`@#4表示错误

黄线是成功发送的最后一块数据。

有任何想法吗？

# sql - SQL 命令组合字段中的行

> ID：11403144
> 
> 赞同：1
> 
> 时间：2012-07-09T21:05:32.500
> 
> 标签：sql, sql-server

我正在尝试将一个表中的行与我在服务器 2008 上的 MS SQL 中的查询结合起来。我相信我在这里取消了这段代码。这几乎符合我的需求，但它是对 SOPartsUsed 的序列号进行分组，但我需要它根据 tblServiceOrders.ProjectKeyID 进行分组。任何帮助将不胜感激我对 SQL 了解不多。我将在下面对我要完成的工作进行更详细的解释。

```
SELECT        
p1.ItemID, SerialNumbers AS SerialNumber 
FROM            
tblSOPartsUsed p1 INNER JOIN
tblServiceOrders p2 ON p1.SONumber = p2.SONumber
    CROSS APPLY
       (SELECT        
        stuff
           ((SELECT ',' + p3.SerialNumber
             FROM tblSerialNumbers p3
             WHERE p3.FKSOPartsUsed = p1.SOPartsUsedKeyID
             ORDER BY SerialNumber FOR XML PATH(''), TYPE ).value('.', 'varchar(max)'), 1, 1, '')
    ) D (SerialNumbers)
 WHERE        (p1.QuantityFilled > 0) AND (p2.ProjectKeyID = 385)
 GROUP BY p1.ItemID, SerialNumbers, p2.ProjectKeyID
 ORDER BY p1.ItemID 
```

我有一个带有序列号的表格，一个带有服务订单上使用的零件的表格和一个服务订单表格。

tblSerialNumbers -> tblSOPartsUsed -> tblServiceOrders

**tblSerialNumbers**
*itemID SerialNumber FKSOPartsUsed*
1 1444 233
1 1555 234
1 1666 236

1 1999 237
1 1888 238

1 2222 239
1 2121 240

**tblSOPartsUsed**
*itemID SOPartsUsed SONumber QuantityFilled*
1 233 SO544 5
1 234 SO544 7
1 236 SO544 7
1 237 SO577 7
1 238 SO577 7

1 239 SO581 7
1 240 SO580 7

**tblServiceOrders**
*SOnumber ProjectKeyID*
SO544 PJ366
SO577 PJ366
SO580 PJ111
SO581 PJ111

我想要什么
itemID ProjectKeyID SerialNumber
1 PJ366 1444,1555,1666,1999,1888

我得到什么
itemID ProjectKeyID SerialNumber
1 PJ366 1444,1555,1666
1 PJ366 1999,1888

我正在尝试通过在 tblServiceOrders 中找到的 ProjectKeyID 对序列号和项目 ID 进行分组。现在上面的查询有效，但它正在对 tblSOPartsUsed 上的 ItemID 进行分组，并希望在 ProjectKeyID 上进行分组。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:17:36.053

试试这个

```
SELECT        
p1.ItemID, p2.ProjectKeyID,D.SerialNumbers AS SerialNumber 
FROM            
tblSOPartsUsed p1 INNER JOIN
tblServiceOrders p2 ON p1.SONumber = p2.SONumber
CROSS APPLY
   (SELECT        
    stuff
       ((SELECT ',' + p3.SerialNumber
         FROM tblSerialNumbers p3
         WHERE p3.ItemID = p1.ItemID
         ORDER BY SerialNumber FOR XML PATH(''), TYPE ).value('.', 'varchar(max)'), 1, 1, '')
) D (SerialNumbers)
WHERE        (p1.QuantityFilled > 0) AND (p2.ProjectKeyID = 'PJ366')
GROUP BY p1.ItemID, p2.ProjectKeyID, SerialNumbers 
ORDER BY p1.ItemID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:16:43.377

```
SELECT  itemID ,
    ProjectKeyID ,
    ( SELECT    SerialNumber + ', ' AS 'data()'
      FROM      dbo.tblSOPartsUsed u
                JOIN tblSerialNumbers nbr ON u.SOPartsUsed = nbr.FKSOPartsUsed
      WHERE     SONumber IN ( SELECT    SOnumber
                              FROM      dbo.tblServiceOrders
                              WHERE     ProjectKeyID = tso.ProjectKeyId )
                AND itemID = tso.itemID
    FOR
      XML PATH('')
    )
FROM    ( SELECT DISTINCT
                c.itemID ,
                ProjectKeyId
      FROM      dbo.tblServiceOrders a
                JOIN dbo.tblSOPartsUsed b ON a.SOnumber = b.SONumber
                JOIN dbo.tblSerialNumbers c ON b.SOPartsUsed = c.FKSOPartsUsed
    ) tso 
```

我认为我不完全理解您要使用 itemID 完成的工作 - 样本中只有一个不同的值使得验证结果变得困难 - 但这可能会让您更接近

# eclipse - 在 Eclipse Juno 上安装 Marketplace 插件

> ID：11403147
> 
> 赞同：119
> 
> 时间：2012-07-09T21:05:46.613
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno, eclipse-marketplace

我下载了[Eclipse Juno 4.2 经典包](http://eclipse.org/downloads/)，发现它`Help > Marketplace...`不可用。AFAIK，这是由[mpc 插件提供的。然而，在他们的网站上](http://eclipse.org/mpc/)，我没有看到如何为 Juno 安装 mpc 客户端的痕迹。

如何将 Marketplace Client 添加到经典的 Juno 捆绑包中？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-07-09T21:07:46.717

据我所知，Classic 发行版不包含 Marketplace 客户端（这是唯一的官方发行版）。但是，它可以下载。

从菜单中选择 Help/Install new software...，选择 Juno 更新站点 (http://download.eclipse.org/releases/juno)，然后查找 Marketplace 客户端 - 它位于 General Purpose Tools 类别中.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-07T16:28:27.420

添加 Eclipse MarketPlace 有一种更简单的方法 1\. 转到[http://eclipse.org/mpc/archive.php](http://eclipse.org/mpc/archive.php)并为您的 eclipse 下载 mpc zip。2\. 去 Eclipse -> 帮助 -> 安装新软件并添加并选择存档文件位置然后按确定，它将检查依赖关系并安装它。享受....

# html - 滑块图像和背景重复？

> ID：11403148
> 
> 赞同：0
> 
> 时间：2012-07-09T21:05:48.000
> 
> 标签：html, css

我有一个滑块，由于某种原因，它一半服从边距 0？另外，无论如何我可以让顶部栏背景周围没有这么大的白色边框吗？我试图让它在浏览器 url 栏下方开始，但它似乎留下了相当大的差距？ [http://ispiked.net/tests](http://ispiked.net/tests)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:10:08.510

添加`position: relative`到 div 中`class="oneByOne1"`。那应该修复滑块。

至于顶栏，添加`margin: 0;`到`body`元素和`p`里面的元素`.topbar`- 之后您可能想要向`padding-top: 15px`同一个`p`元素添加类似的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T21:08:04.140

> 另外，无论如何我可以让顶部栏背景周围没有这么大的白色边框吗？

尝试过类似 CSS

```
html, body { margin: 0px; padding: 0px; } 
```

在开始时重置布局？

# mongodb - 如何在 Mongodb 中处理连接？

> ID：11403155
> 
> 赞同：0
> 
> 时间：2012-07-09T21:06:08.610
> 
> 标签：mongodb, postgresql, join, database

我在 PostgreSQL 中有两个表：urls（带有索引页面的表，主机是索引列，3000 万行）主机（带有主机信息的表，主机是索引列，100 万行）

我的应用程序中最常见的 SELECT 之一是：

```
SELECT urls.* 
FROM urls 
JOIN hosts ON urls.host = hosts.host 
WHERE urls.projects_id = ? 
  AND hosts.is_spam IS NULL 
ORDER by urls.id DESC, LIMIT ? 
```

在 urls 表中有超过 100 000 行的项目中，查询执行速度非常慢。

由于表已经增长，查询的执行速度越来越慢。我已经阅读了很多关于 NoSQL 数据库（如 MongoDB）的内容，这些数据库旨在处理如此大的表，并且我正在考虑将我的数据移动到 MongoDB。如果我在从 urls 表中选择数据时不必检查主机表，那么一切都会很容易。我听说 MongoDB 不支持连接，所以我的问题是如何解决上述问题？我可以将有关主机的信息放在 urls 集合中，但是字段 hosts.is_spam 可以由用户更新，我必须更新整个 urls 集合。我不知道这是正确的解决方案。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:18:00.227

如果您不使用连接，那么关系数据库也可以很快工作。我认为，在这种情况下，您需要为了性能而进行非规范化。

### 选项1

将`is_spam`列复制到 urls 表。当主机的这个值发生变化时，更新所有相关的 url。如果您不经常这样做，这没关系。

### 选项 2

我不知道您的应用程序，但我认为垃圾邮件主机的数量相对较少。在这种情况下，您可以将他们的 id 放入内存存储（memcached，redis，...），查询所有 url 并过滤掉应用程序中的垃圾邮件 url。这样你的分页就会有点破损，但有时这是一个可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:10:46.440

确实，MongoDB 不支持连接。在这种情况下，我会像这样构建我的`urls`收藏

```
urls : {
    name,
    some_other_property,
    host
} 
```

然后，您可以获取特定 URL 的主机，并在集合中检查`is_spam`它的字段。`hosts`请注意，这需要由查询数据库的客户端完成，并且不能像使用 JOIN 那样在数据库本身完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:36:01.327

*与@xbones 的答案类似，但有具体示例*

在文档中添加一个`host_id`字段`urls`是一种方法。它将要求您首先提取 url 文档的结果，然后提取垃圾邮件主机的结果，然后在客户端代码中进行本地过滤

大致：

```
var urls = db.urls.find({projects_id:'ID'}, {_id: 1, host_id: 1});
var hosts = db.hosts.find({is_spam: 1}, {_id: 1});

# psuedocode
ids_array = _id for _id in urls if host_id is not in hosts

urls = db.urls.find({_id: {$in: ids_array}}); 
```

或者：

```
var urls = db.urls.find({projects_id:'ID'});
var hosts = db.hosts.find({is_spam: 1}, {_id: 1});

# psuedocode
urls = url for url in urls if host_id is not in hosts 
```

第一个示例假设`project_id`查询的结果可能很大（并且您的 url 文档更大）并且您只想获取尽可能少的数据，然后在本地进行过滤，然后批量获取完整的最终 url 文档。

第二个示例只是获取完整的 url 文档以启动，并在本地过滤它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:40:46.790

你是对的，问题是连接，但我的猜测是它只是错误的连接。正如 Frank H. 所提到的，PostgreSQL 应该能够根据`hosts.is_spam`. 您可能希望对`urls`表进行集群`id`以优化 order by-limit 阶段。由于您只关心`urls.*`您可以通过创建部分索引来最小化磁盘 io，`hosts.host`以便`is_spam is not null`轻松获取要避免的主机的简短列表。

试试这个：

```
select urls.* 
from urls 
left join hosts 
   on urls.host = hosts.host 
   and hosts.is_spam is not null
where urls.projects_id = ? 
and hosts.host is null 
```

或这个：

```
select * 
from urls
where urls.projects_id = ? 
and not exists (
   select 1
   from hosts
   where hosts.host = urls.hosts
   and hosts.is_spam is not null
) 
```

这将允许 PostgreSQL 使用反连接来仅提取未映射到已知垃圾邮件主机的 url。如果 URL 的主机为空或无效，则结果可能与您的查询不同。

# java - Java中的静态和非静态方法调用

> ID：11403156
> 
> 赞同：2
> 
> 时间：2012-07-09T21:06:12.960
> 
> 标签：java, static, non-static

我正在清除我对 Java 的概念。我对 Java 的了解还远远不够，所以请多多包涵。

我正在尝试了解静态方法和非静态方法间调用。我知道 -

1.  静态方法可以在同一类中简单地通过其名称调用另一个静态方法。
2.  静态方法只有在创建类的实例后才能调用同一类的另一个非静态方法。
3.  非静态方法可以简单地通过 classname.methodname 调用同一类的另一个静态方法 - 不确定这是否正确？

我的问题是关于对同一类的另一个非静态方法的非静态方法调用。在类声明中，当我们声明所有方法时，我们可以从非静态类中调用同一类的另一个非静态方法吗？
请举例说明。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:14:36.093

您的 #3 是正确的，您可以使用 classname.methodname 从非静态方法调用静态方法。

而且您的问题似乎是在询问您是否可以从其他非静态方法调用类中的非静态方法，这也是可能的（也是最常见的）。

例如：

```
public class Foo {

public Foo() {
    firstMethod();
    Foo.staticMethod(); //this is valid
    staticMethod(); //this is also valid, you don't need to declare the class name because it's already in this class. If you were calling "staticMethod" from another class, you would have to prefix it with this class name, Foo
}

public void firstMethod() {
    System.out.println("This is a non-static method being called from the constructor.");
    secondMethod();
}

public void secondMethod() {
    System.out.println("This is another non-static method being called from a non-static method");

}

public static void staticMethod() {
    System.out.println("This is the static method, staticMethod");
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:22:13.460

首先，方法是并且应该在语义上绑定到类或实例。

某物的列表具有长度或大小，因此您要求特殊列表的大小。您需要该类的对象来调用`.size ()`.

一个典型的、众所周知的静态方法示例是`Integer.parseInt ("123");`. 那时您没有 Integer 实例，但想创建一个。

如果我们将那个方法绑定到一个实例，我们会将它绑定到一个 String 实例——这是有道理的：

```
int a = "123".parseInt (); 
```

那将是一个合理的选择，但这意味着 float、double、long、short、Boolean 以及每个具有对称“toString”方法的类的类似方法都必须放入 String。那将意味着对 String 类的无数扩展。

相反，String 是 final，因此放置此类方法的合理位置是目标类，如 Integer、Float 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:17:54.003

```
public class TestClass{

  public static void testStatic(){
   System.out.println("test1");
  }

  public void testNonStatic(){
    System.out.println("test2");
  }

  public void test1(){
    // both is valid
    testStatic();  
    TestClass.testStatic();

    // this is valid, cause it can call the method of the same instance of that class
    testNonStatic();   
    this.testNonStatic();

    // this is not valid, cause without a concrete instance of a class you cannot call
    // non static methods
    TestClass.testNonStatic();
  }

  public static void test2(){
    // again these are both correct
    testStatic();  
    TestClass.testStatic();

    // this doesn't work, cause you cannot call non static methods out of static methods
    testNonStatic();   
    this.testNonStatic();

    // this instead does work cause you have a concrete instance of the object
    TestClass myTestClass = new TestClass();
    myTestClass.testNonStatic();

    // this still doesn't work
    TestClass.testNonStatic();
  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:14:00.813

不确定我是否正确理解了这个问题，但非静态方法是在 OO 中设计类的标准方法。也许这个示例将有助于引发讨论：

```
public class MySampleClass{

   private void methodA(){
       System.out.println('a called');
   }

   public void methodB(){
       this.methodA();
       staticMethod(this);
   }

   private static void staticMethod( MySampleClass inst ){
       inst.methodA(); 
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:28:34.763

您可以使用对要调用该方法的对象的显式引用`someObject.method`，或不指定该对象`someMethod()`（在这种情况下，它将在您正在调用当前非静态的同一对象上调用）从非静态方法调用非静态方法方法）。

也许这会更好地显示它

```
class Demo {
    private String name;

    public Demo(String n) {
        name = n;
    }

    public String getName() {// non static method
        return name;
    }

    public void test(Demo d) {// non-static method
        System.out.println("this object name is: "+getName());// invoking method on this object
        System.out.println("some other object name is: "+d.getName());// invoking method on some other object
    }
    //test
    public static void main(String[] args) {
        Demo d=new Demo("A");
        Demo d2=new Demo("B");
        d.test(d2);
    }
} 
```

输出：

```
this object name is: A
some other object name is: B 
```

# javascript - 我可以在 webworker 中加载 AMD 模块吗？

> ID：11403161
> 
> 赞同：4
> 
> 时间：2012-07-09T21:06:31.067
> 
> 标签：javascript, requirejs, web-worker, js-amd

我正在尝试网络工作者让我的计算量大的 Javascript 真正并行。但是，我有一个问题，我的所有 javascript 文件都是 AMD 模块。我可以在我的网络工作者中使用 requirejs 吗？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:14:06.420

在 Web Worker 中，可以使用[`importScripts`函数](https://developer.mozilla.org/en/Using_web_workers#Importing_scripts_and_libraries)加载其他脚本。RequireJS的[源代码](https://github.com/jrburke/requirejs/blob/master/require.js#L23)显示也支持 Web Worker：

```
// Line 23:
isWebWorker = !isBrowser && typeof importScripts !== 'undefined',
// Line 1877:
} else if (isWebWorker) {
    //In a web worker, use importScripts. This is not a very
    //efficient use of importScripts, importScripts will block until
    //its script is downloaded and evaluated. However, if web workers
    //are in play, the expectation that a build has been done so that
    //only one script needs to be loaded anyway. This may need to be
    //reevaluated if other use cases become common.
    importScripts(url); 
```

# objective-c - 将对象存储在目标c的数组中

> ID：11403163
> 
> 赞同：0
> 
> 时间：2012-07-09T21:06:55.977
> 
> 标签：objective-c

我正在尝试将 25 个对象存储在一个数组中

```
for (int iy=0; iy<5; iy++) {
        for (int ix=0; ix<5; ix++) {

            TerrainHex *myObject = [[TerrainHex alloc] initWithName:(@"grassHex instance 10000") width:mGameWidth height:mGameHeight indexX:ix indexY:iy];
            myObject.myImage.y += 100;

            [TerrainHexArray addObject:myObject];

            [self addChild:(id)myObject.myImage];
        }
    }
    NSLog(@"Terrain array: %u", [TerrainHexArray count]); 
```

日志返回为零。

在 .h 文件中我有

```
@property NSMutableArray *TerrainHexArray; 
```

在 .m 文件中我有..

```
@synthesize TerrainHexArray; 
```

我刚刚尝试了下面有人建议的内容，即..

```
NSMutableArray *TerrainHexArray = [[NSMutableArray] alloc] init]; 
```

但这只是给我一个警告，说预期的标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:57:10.590

当您执行 addObject 调用和 NSLog 时，几乎可以肯定 TerrainHexArray 不存在。你说你在有人建议后尝试添加 alloc/init，这表明你不了解 Objective-C 中的对象管理。

我建议你退后一步，找一本关于 Objective-C 的书，并在尝试更多编码之前至少阅读前几章（通过 alloc/init 等的讨论）。

顺便说一句，标准的 C++/Objective-C 编码实践（Microsoft 除外）使用带有前导小写字符的标识符作为实例名称，为类型/类名称保留前导大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:31:15.417

什么是 TerrainHexArray？它看起来像一个类名，而不是数组的实例。如果您创建一个可变数组，那么您可以将项目添加到数组中。

```
NSMutableArray *hexArray = [[NSMutableArray] alloc] init];
for (int iy=0; iy<5; iy++) {
        for (int ix=0; ix<5; ix++) {

            TerrainHex *myObject = [[TerrainHex alloc] initWithName:(@"grassHex instance 10000") width:mGameWidth height:mGameHeight indexX:ix indexY:iy];
            myObject.myImage.y += 100;

            [hexArray addObject:myObject];

            [self addChild:(id)myObject.myImage];
        }
}
NSLog(@"Terrain array: %u", [hexArray count]); 
```

# asp.net - 当“使用本地 IIS Web 服务器”打开时，任何抛出的异常似乎都会挂起 W3WP 进程

> ID：11403165
> 
> 赞同：0
> 
> 时间：2012-07-09T21:06:59.623
> 
> 标签：asp.net, debugging, iis, iis-7

在我们的商店，我们在运行 IIS 7 的 Windows Server 2008 VM 上进行开发，与我们的生产 Web 服务器相同。使用 VS2010（和 VS2008，但更多的是 2010），我在调试我们的 ASP.NET 应用程序时遇到了问题。如果应用程序抛出异常，我通常会终止调试器 (Shift-F5)，以便更正错误代码。但是在这样做之后，IIS中的进程继续运行，但有异常！

这导致了许多错误的场景。有时异常会在 IIS 上浮动到顶部，并且我会收到一个提示，询问“您想在 [Visual Studios 的选择] 中调试此进程”，而其他时候没有提示，但调试器会重新连接到有故障的进程而不是启动下次去调试的时候换一个新的。

我在这里做错了什么？或者是什么配置错误？我想要我的工作流程：运行网站，查看异常，修复代码，再次运行网站以验证修复。相反，我必须在任务管理器中手动终止 W3WP 才能继续工作。

额外信息：这也可能与解决方案同时包含网站应用程序和网站应用程序访问的 Web 服务应用程序这一事实有关，两者都在本地 IIS 上的两个虚拟目录中运行。通常，如果其中一个有问题，附加的调试器将放入网站或服务中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:21:17.487

我想知道是否还有其他事情正在隐藏。您可以设置 Visual Studio 以中断所有异常。在 IDE 中按 CTRL + ALT + E。这将打开“例外”对话框。

默认情况下，IDE 只会中断用户未处理的异常。如果抛出不同的异常，您可能不知道。为“Thrown”列中的每个复选框添加检查，并尝试再次运行您的代码。如果正在生成另一个异常，Visual Studio 将立即对其进行中断。

# html - 在 Opera 中设置每个域的本地存储限制

> ID：11403166
> 
> 赞同：1
> 
> 时间：2012-07-09T21:07:04.870
> 
> 标签：html, opera, local-storage

如果我第一次在 Opera 中运行[这个测试](http://arty.name/localstorage.html)，我会得到一个弹出窗口，我可以在其中设置这个域的存储大小。但是如果我点击取消，那么下次没有弹出，存储大小将是默认的。

那么如何在 Opera 中设置每个域的 localStorage 大小呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:57:06.183

要更改一般配额限制，请访问`opera:config#PersistentStorage|DomainQuotaForlocalStorage`。

要阅读/编辑**每个域的配额**首选项，请打开您的个人资料目录（该位置可以通过帮助 > “关于 Opera”找到），然后编辑`override.ini`^((multi-user))。您还可以打开 Opera 的应用程序文件夹，然后编辑`operaprefs.ini`.

格式如下：

```
[domain.tld]
Persistent Storage|Domain Quota For localStorage=<bytes>
Persistent Storage|Domain Quota Exceeded Handling For localStorage=0

[Overrides]
domain.tld 
```

在域部分，第一个条目是配额限制。当您拒绝配额扩展请求时，第二个条目为零。

有关详细信息，请参阅[Opera 的设置文件解释#Persistent storage](http://www.opera.com/support/usingopera/operaini/#persistent_storage)。

# objective-c - 尝试通过 Youtube API 直接上传并获得无效请求（NSURLErrorDomain 错误 400。）

> ID：11403167
> 
> 赞同：2
> 
> 时间：2012-07-09T21:07:06.407
> 
> 标签：objective-c, ios, youtube, youtube-api, gdata

我正在尝试通过[Youtube API](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)将视频直接上传到 Youtube 。我不知道问题出在哪里……是我的请求 URL 语法吗？我将视频文件添加到正文的方式有问题吗？（我使用 MKNetworkkit 作为我的请求引擎。）

这是我的代码：

```
 //*********************************************************
    //* Setup the request URL and params
    //*********************************************************

    NSString *baseUrl = @"http://uploads.gdata.youtube.com/feeds/api/users/default/uploads";
    NSString *_accessToken = // the google API access token
    NSString *xml = 
    @"<?xml version='1.0'>"
    "<entry xmlns='http://www.w3.org/2005/Atom'"
    "xmlns:media='http://search.yahoo.com/mrss/'"
    "xmlns:yt='http://gdata.youtube.com/schemas/2007'/>"
      "<media:group>"
        "<media:title type='plain'>My Video Title</media:title>"
        "<media:description type='plain'>"
        "This is a test video. Hopefully it'll upload to Youtube succesfully."
        "</media:description>"
        "<media:category"
        "scheme='http://gdata.youtube.com/schemas/2007/categories.cat'>People"
        "</media:category>"
        "<media:keywords>test, video</media:keywords>"
      "</media:group>"
    "</entry>";
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   _accessToken, @"access_token",
                                   myYouTubeDeveloperKey, @"DEVELOPER_KEY",
                                   @"vid1.mp4", @"VIDEO_FILENAME",
                                   xml, @"API_XML_Request",
                                   nil];

    //*********************************************************
    //* Configure the request
    //*********************************************************
    MKNetworkOperation *op = [globalMKNetworkEngine operationWithURLString:baseUrl params:params httpMethod:@"POST"];
    [op addFile:[[self getVideoFileURL] absoluteString] forKey:@"Binary File Data"];
    [op onUploadProgressChanged:^(double progress) {
        NSLog(@"progress: %@", progress);
        [uploadProgressBar setProgress:progress animated:YES];
    }];
    [op onCompletion:^(MKNetworkOperation *operation) {

        //*********************************************************
        //* On success, do this
        //*********************************************************

        dispatch_async(dispatch_get_main_queue(), ^{
           NSLog(@"Success!");
        });

    } onError:^(NSError *error) {
        DLog(@"%@", [error localizedDescription]);
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Uh oh..." message:@"There was a network error. Please try again later." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }];
    [globalMKNetworkEngine enqueueOperation:op]; 
```

这是 MKNetworkKit 报告的响应：

```
 Danceplanet[16449:707] -[MKNetworkOperation     operationFailedWithError:]
Request
-------
curl -X POST "http://uploads.gdata.youtube.com/feeds/api/users/default/uploads" \
-F     "VIDEO_FILENAME=vid1" -F "DEVELOPER_KEY=(the developer key is here)" \
-F "access_token=(an access token)" -F "API_XML_Request=<?xml version='1.0'>\
<entry xmlns='http://www.w3.org/2005/Atom'xmlns:media='http://search.yahoo.com/mrss/'xmlns:yt='http://gdata.youtube.com/schemas/2007'/>\
<media:group>\
<media:title type='plain'>My Video Title</media:title>\
<media:description type='plain'>This is a test video. Hopefully it'll upload to Youtube succesfully.</media:description>\
<media:categoryscheme='http://gdata.youtube.com/schemas/2007/categories.cat'>People</media:category>\
<media:keywords>test, video</media:keywords>\
</media:group>\
</entry>" \
-F "Binary File Data=@file://localhost/var/mobile/Applications/BBD79FFD-01D5-402C-995A-D9F9CE61F312/Documents/savedVideos/vid1.mp4;type=application/octet-stream"

--------
Response
--------
Invalid Request
, [The operation couldn‚Äôt be completed. (NSURLErrorDomain error 400.)]
 Danceplanet[16449:707] __block_global_3 [Line 167] The operation     couldn‚Äôt be completed. (NSURLErrorDomain error 400.)
 Danceplanet[16449:707] -[MKNetworkOperation operationFailedWithError:]     [Line 1283] State: 0` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:56:42.773

我认为问题可能出在 NSString

```
NSString * xmlEx =@"<?xml version=\"1.0\" encoding=\"utf-8\"?>" 
                                "<Data xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">"
                                "<MediaFile>"
                                "<FileName>%@</FileName>"
                                "<Folder>%@</Folder>"
                                "</MediaFile>"
                                "</Data>" 
```

这就是我在发布之前将 xml 写入字符串的方式。问题可能出在特殊字符上。比较 XML 版本的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:08:58.643

我已经放弃了这种方法，现在改用 Google obj-c 客户端库。

# jquery - jQuery中的if语句

> ID：11403179
> 
> 赞同：0
> 
> 时间：2012-07-09T21:07:53.350
> 
> 标签：jquery, syntax, if-statement

这是检查 div 是否隐藏 && 具有“视图”类的正确 jQuery 语法吗？如果是这样，那么在 0.3 秒后显示下一个具有“视图”类的隐藏 div？

请注意，它目前不起作用，它会在所有隐藏的 div 中消失，无论类如何。

```
<script type="text/javascript">
            $(function() {
                // Start showing the divs
                showDiv();
            });

            function showDiv() {
                // If there are hidden divs left
                if($('div:hidden').length.hasClass('view')) {
                    // Fade the first of them in
                    $('div:hidden:first').fadeIn();
                    // And wait one second before fading in the next one
                    setTimeout(showDiv, 300);
                }
            }
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:09:42.543

可能更好的解决方案是

```
if($('div.view:hidden').length) {
  // Fade the first of them in
  $('div.view:hidden:first').fadeIn();
  // And wait one second before fading in the next one
  setTimeout(showDiv, 300);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:09:54.173

```
// get all hidden divs with a class of view
var $hiddenViewDivs = $('div.view:hidden');
// if there are any...
if ($hiddenViewDivs.length) { 
    // get the first one and invoke fadeIn() on it
    $hiddenViewDivs.first().fadeIn(); 
    // And wait one second before fading in the next one
    setTimeout(showDiv, 300);
} 
```

我将解释您的代码在做什么（请参阅我的新评论，周围有星星）：

```
// **Get the length (count) of all hidden divs and invoke hasClass('view') on that number (will throw an error)**
if($('div:hidden').length.hasClass('view')) {
    // **Get the first hidden div and invoke fadeIn() on it, regardless of if it has a class of view or not**
    $('div:hidden:first').fadeIn();
    // And wait one second before fading in the next one
    setTimeout(showDiv, 300);
} 
```

**编辑（替代解决方案）：**

此解决方案的优点是您不必一直`$('div.view:hidden')`在 DOM 中查找。在这里，你得到它一次，安抚表演之神。

```
function showDiv() {
    var $hiddenViewDivs = $('div.view:hidden');
    var i = 1;
    $hiddenViewDivs.each(function(){
        (function($target){ 
            setTimeout(function(){$target.fadeIn();}, 300*i);
        })($(this));
        i++;
    });
}​ 
```

示例：http: [//jsfiddle.net/lbstr/LdzYm/](http://jsfiddle.net/lbstr/LdzYm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:10:31.533

刚刚怎么样`$('div.view:hidden').length`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:32:28.017

```
$('div.view:hidden:first').fadeIn(function() {
   setTimeout(showDiv, 300); 
}); 
```

你不需要if。jQuery 会为你解决这个问题。

# php - 编辑 Magento 商店的“创建帐户”注册表单

> ID：11403182
> 
> 赞同：0
> 
> 时间：2012-07-09T21:08:15.503
> 
> 标签：php, forms, magento, registration, account

当客户在我的商店创建新帐户时，我想编辑必填字段。目前，该表格要求客户输入他的名字、姓氏、电子邮件和密码。我想禁用名字和姓氏的要求，甚至可能不显示这些字段。我只对电子邮件感兴趣，也许还有用户名，当然还有密码。

我目前正在使用 Magento 1.7 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T18:16:55.063

有一个扩展（[快速注册](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/19173/s/fast-registration-6987/)）允许禁用名字、姓氏和电子邮件字段。

在您更改数据库中的所需状态后，您需要覆盖`AccountController.php`( `app/code/core/Mage/Customer/controllers/AccountController.php`)。在`createPostAction()`你需要评论这一行：

```
$customerErrors = $customer->validate();
if (is_array($customerErrors)) {
    $errors = array_merge($customerErrors, $errors);
} 
```

# wordpress - 如何将简码插入wordpress菜单

> ID：11403189
> 
> 赞同：13
> 
> 时间：2012-07-09T21:08:51.213
> 
> 标签：wordpress, menu, shortcode, add-filter

我用这个代码做了一个菜单项。菜单项显示，但简码输出不存在。有没有我可以添加的东西或可以做到这一点的不同方法。我还添加了希望这可能会有所帮助。

```
add_filter('wp_nav_items', 'do_shortcode', 7); 
```

或者也许有人知道这是不可能的并且可以告诉我。

```
/* Nav Menu */
function add_profile_link_to_nav(){ 
 if ( is_user_logged_in() ) { ?> 

<ul> 
  <li class="menu-item"id="one"> <a href="http://example.com/members/">All  Members</a>
  <ul class="sub-menu"> 
      <li class="menu-item"><?php echo custom_execute_shortcode(); ?> </li>
  </ul> 
 </li>
</ul>    <!--end menu--->
<?php } 
}
add_action( "wp_nav_items","add_profile_link_to_nav" );

function custom_execute_shortcode() {
$myfunction= '[my shortcode"]';
$myfunction_parsed = do_shortcode($myfunction);
return $myfunction_parsed;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-13T11:10:58.570

@Tim 此代码将起作用

把它放在functions.php文件中

```
add_filter('wp_nav_menu_items', 'do_shortcode'); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-07T21:43:35.670

您不能直接在菜单页面的菜单 URL 中使用简码，因为括号会被去掉。但是你可以使用这样的占位符：`#profile_link#`.

使用以下代码`functions.php`，您可以使用 URL 创建自定义菜单项`#profile_link#`，并将其替换为您的简码。

```
/**
 * Filters all menu item URLs for a #placeholder#.
 *
 * @param WP_Post[] $menu_items All of the nave menu items, sorted for display.
 *
 * @return WP_Post[] The menu items with any placeholders properly filled in.
 */
function my_dynamic_menu_items( $menu_items ) {

    // A list of placeholders to replace.
    // You can add more placeholders to the list as needed.
    $placeholders = array(
        '#profile_link#' => array(
            'shortcode' => 'my_shortcode',
            'atts' => array(), // Shortcode attributes.
            'content' => '', // Content for the shortcode.
        ),
    );

    foreach ( $menu_items as $menu_item ) {

        if ( isset( $placeholders[ $menu_item->url ] ) ) {

            global $shortcode_tags;

            $placeholder = $placeholders[ $menu_item->url ];

            if ( isset( $shortcode_tags[ $placeholder['shortcode'] ] ) ) {

                $menu_item->url = call_user_func( 
                    $shortcode_tags[ $placeholder['shortcode'] ]
                    , $placeholder['atts']
                    , $placeholder['content']
                    , $placeholder['shortcode']
                );
            }
        }
    }

    return $menu_items;
}
add_filter( 'wp_nav_menu_objects', 'my_dynamic_menu_items' ); 
```

您只需要`'shortcode'`在`$placeholders`数组中设置，并且可以选择`'atts'`and `'content'`。

例如，如果您的简码是这样的：

```
[example id="5" other="test"]Shortcode content[/example] 
```

你会更新：

```
'#placeholder#' => array(
    'shortcode' => 'example';
    'atts' => array( 'id' => '5', 'other' => 'test' );
    'content' => 'Shortcode content';
), 
```

* * *

请注意，我[不使用`do_shortcode()`](http://codesymphony.co/dont-do_shortcode/)它是因为它是一项资源密集型功能，并且在这种情况下不是适合该工作的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-20T13:10:01.177

在菜单页面上启用描述，粘贴到您的简码链接的描述文本区域，在functions.php中添加下一个代码：

```
add_filter('walker_nav_menu_start_el', function($item_output, $item) {
    if (!is_object($item) || !isset($item->object)) {
        return $item_output;
    }

    if ($item->ID === 829) {
        $item_output = do_shortcode($item->description);
    }

    return $item_output;
}, 20, 2); 
```

# java - 如何防止 Java 中的无头异常？

> ID：11403190
> 
> 赞同：4
> 
> 时间：2012-07-09T21:08:52.993
> 
> 标签：java, linux, swing, headless

我有一个 Applet，当我尝试在笔记本电脑上运行它时，Java 在创建 JFrame 的那一行抛出了一个无头异常。现在我知道为什么 JFrame 通常会导致异常，但我的计算机一开始就没有处于无头模式。我也仍然不确定无头模式到底需要什么。

我正在运行 Ubuntu，并且有一个非常新的 java 版本。

此外，在我的笔记本电脑上运行 Windows 时，我已经在 Eclipse 中成功创建了 JFrame 等（如果有帮助的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:26:43.083

你试过设置`java.awt.headless=true`吗？为了使用 java.awt 打印库，我之前在没有 x 服务器的 Solaris 上做过一次。它奏效了。但是那是五年多以前的事了，我手边没有源。

请参阅[以编程方式设置 java.awt.headless=true](https://stackoverflow.com/questions/2552371/setting-java-awt-headless-true-programmatically)

PS你是在Ubuntu服务器还是桌面？如果是后者，我会质疑为什么 Java 认为你是无头的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:16:32.760

看看@以下可能有帮助的链接：

[http://www.theserverside.com/discussions/thread.tss?thread_id=52535](http://www.theserverside.com/discussions/thread.tss?thread_id=52535)

# r - R count 次单词出现在列表元素中

> ID：11403196
> 
> 赞同：1
> 
> 时间：2012-07-09T21:09:12.637
> 
> 标签：r, list, apply, stringr

我有一个由单词组成的列表。

```
> head(splitWords2)
[[1]]
 [1] "Some"        "additional"  "information" "that"        "we"          "would"       "need"        "to"          "replicate"   "the"        
[11] "experiment"  "is"          "how"         "much"        "vinegar"     "should"      "be"          "placed"      "in"          "each"       
[21] "identical"   "container"   "or"          "what"        "tool"        "use"         "measure"     "mass"        "of"          "four"       
[31] "different"   "samples"     "and"         "distilled"   "water"       "rinse"       "after"       "taking"      "them"        "out"        

[[2]]
 [1] "After"       "reading"     "the"         "expirement"  "I"           "realized"    "that"        "additional"  "information" "you"        
[11] "need"        "to"          "replicate"   "expireiment" "is"          "one"         "amant"       "of"          "vinegar"     "poured"     
[21] "in"          "each"        "container"   "two"         "label"       "containers"  "before"      "start"       "yar"         "and"        
[31] "three"       "write"       "a"           "conclusion"  "make"        "sure"        "results"     "are"         "accurate" 
```

我有一个单词向量，我想计算列表的每个元素中出现的次数，而不是整个列表中出现的总数。

我认为这样做的方法是结合包中的`str_count()`功能`stringr`和其中一个`*ply()`功能，但我无法使其工作。

```
numWorder1 <- sapply(ifelse(str_count(unlist(splitWords2), ignore.case("we" ) )> 0, 1, 0)) 
```

其中“我们”最终将是来自单词向量的单词，用于计算 .

我理想的输出是这样的：

```
lineNum       count
   1           0
   2           1
   3           1
   4           0
  ...         ... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:45:24.907

对于一个特定的词：

```
words <- list(a = c("a","b","c","a","a","b"), b = c("w","w","q","a"))
$a
[1] "a" "b" "c" "a" "a" "b"

$b
[1] "w" "w" "q" "a"
wt <- data.frame(lineNum = 1:length(words))
wt$count <- sapply(words, function(x) sum(str_count(x, "a")))
  lineNum count
1       1     3
2       2     1 
```

如果向量`w`包含您要计算的单词：

```
w <- c("a","q","e")
allwords <- lapply(w, function(z) data.frame(lineNum = 1:length(words), 
            count = sapply(words, function(x) sum(str_count(x, z)))))
names(allwords) <- w
$a
  lineNum count
a       1     3
b       2     1

$q
  lineNum count
a       1     0
b       2     1

$e
  lineNum count
a       1     0
b       2     0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T21:35:42.237

像这样的东西：

```
wordlist <- list(
    c("the","and","it"),
    c("we","and","it")
)
require(plyr); require(stringr)
> ldply(wordlist, function(x) str_count(x, "we"))
  V1 V2 V3
1  0  0  0
2  1  0  0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T12:21:45.627

```
library(qdap)

#create a fake data set like yours:
words <- list(first = c("a","b","c","a","a","bc", "dBs"), 
    second = c("w","w","q","a"))
## termco functions require sentence like structure in a data frame so covert:
words2 <- list2df(lapply(words, paste, collapse = " "), "wl", "list")[2:1]

## trailing and leading spaces are important in match terms
## both a trailing and leading space will match exactly that trerm
termco(text.var=words2$wl, grouping.var=words2$list, match.list=c(" a "))
termco(words2$wl, words2$list, match.list=c(" b ", " a "))

## notice no space at the end of b finds and case of b + any.chunk
termco(words2$wl, words2$list, match.list=c(" b", " a "))

## no trailing/leading spaces means find any words containing the chunk b
termco(words2$wl, words2$list, match.list=c("b", " a "))

#ignores case
termco(words2$wl, words2$list, match.list=c("b", " a "), ignore.case=T)

## Last use yields:
## 
##     list word.count  term(b) term( a )
## 1  first          7 3(42.86)  2(28.57)
## 2 second          4        0     1(25)
## Also:

## transpose like function that transposes a raw matrix 
with(words2, termco2mat(termco(wl, list, match.list=c("b", " a "))))

## Which yields raw.score(percentage):
## 
##   first second
## b     2      0
## a     2      1 
```

*请注意，termco 创建了一个实际上是 data.frames 列表的类。*

raw = 原始频率计数（数字） prop = 计数比例（数字） rnp = 原始和比例组合（字符）

使用斯科特的例子：

```
words <- list(
    first=c("the","and","it", "we're"),
    second=c("we","and","it")
)
words2 <- data.frame(list=names(words), 
    wl=unlist(lapply(words, paste, collapse=" ")))

termco(words2$wl, words2$list, match.list=c(" we ", " we"))
termco(words2$wl, words2$list, match.list=c(" we ", " we"), short.term = FALSE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T22:46:41.030

为简单起见，您始终可以坚持使用基本包中的 grep ...

```
LinesList <- list ( "1"=letters[1:10], "2"=rep(letters[1:3],3) )
CountsA <- grep("[a]", LinesList) # find 'a' in each element of list
length(CountsA) <- length(LinesList) # gives NAs if not counted
data.frame( lineNum = names(LinesList), count = CountsA) 
```

# javascript - HTML5 视频 - 等待事件未触发

> ID：11403202
> 
> 赞同：2
> 
> 时间：2012-07-09T21:09:52.560
> 
> 标签：javascript, html, google-chrome, webkit, html5-video

我正在处理 HTML5 视频和自定义控件，我希望使用等待事件来理想地显示加载图像，但现在只需写入控制台即可。

**等待事件**

> 播放已停止，因为下一帧不可用，但用户代理希望该帧在适当的时候可用。

我在这里设置了一个示例-> [http://jsbin.com/uvipev/2/edit#javascript,html,live](http://jsbin.com/uvipev/2/edit#javascript,html,live)

这是减去控件的视频代码：

```
<video controls preload="meta">
   <source src="http://www.tools4movies.com/dvd_catalyst_profile_samples/The%20Amazing%20Spiderman%20tablet.mp4" />
   This is video fallback
</video> 
```

这是我的等待事件的事件监听器。

```
 var video = document.getElementsByTagName('video')[0];   

    video.addEventListener('waiting', function() {
        console.log('waiting');
    }, false); 
```

谁能看到为什么这没有运行？等待事件听起来像我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:23:29.367

您是否希望在视频第一次缓冲时显示等待图像？如果是这样，您可能没有在寻找`waiting`.

看看这个演示：[http ://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

如果您在`play()`没有任何预加载的情况下调用，您应该会看到`waiting`火，即使在缓存副本上也是如此。如果你之前调用`load()`过`play()`，你可能永远看不到`waiting`火，因为下一帧总是可用的。

最好的过程是显示您的图像，调用`load()`然后收听等待`canplay`或`canplaythrough`。那时，隐藏您的图像并开始`play()`。

**更新**

查看此小提琴中的视频：http: [//jsfiddle.net/bnickel/zE8F3/](http://jsfiddle.net/bnickel/zE8F3/) Chrome 并未发送`waiting`事件，而是`stalled`在视频冻结后不久发送事件。您可能需要检查您支持的每个浏览器的工作方式。请记住，像 VideoJS 这样的播放器非常庞大（~142KB），因为它们处理了很多浏览器的不一致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T17:27:16.267

这里有一个很好的图表，它试图记录不同浏览器在“缓冲区不足”情况下的行为，这就是我认为您正在寻找的。

[https://web.archive.org/web/20130902074352/http://www.longtailvideo.com/html5/buffering/](https://web.archive.org/web/20130902074352/http://www.longtailvideo.com/html5/buffering/)

不幸的是，浏览器非常不一致，所以虽然我相信“等待”事件是你想要的，但 Chrome 不会触发它。

当播放器根据视频的经过时间进行缓冲时，我一直在尝试“猜测”，检查播放/暂停/等。事件，以便我知道什么时候*应该*增加时间。

# ruby - 安装 linecache19 gem bundler rvm 时出错

> ID：11403203
> 
> 赞同：1
> 
> 时间：2012-07-09T21:09:52.683
> 
> 标签：ruby, gem, rvm

我无法通过捆绑器安装 linecache19 gem，并在 aptosid（即 debian sid）上安装了 ruby​​ 1.9.2 的 rvm。

我是 ruby​​ 新手，但我的 ruby​​ 安装显然没有完全错误配置，因为我已经能够安装 rails 和一堆 gem。

我得到的输出如下：

```
 Installing linecache19 (0.5.12) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/caz/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb                 
*** extconf.rb failed ***                                                         
Could not create Makefile due to some reason, probably lack of                    
necessary libraries and/or headers.  Check the mkmf.log file for more             
details.  You may need configuration options.                                     

Provided configuration options:                                                   

/home/caz/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- openssl (LoadError)              
ms/custom_require.rb:36:in `require'                                              
in `<top (required)>'                                                             
ms/custom_require.rb:36:in `require'
        from /home/caz/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/caz/.rvm/gems/ruby-1.9.2-p320/gems/ruby_core_source-0.1.5/lib/contrib/uri_ext.rb:11:in `<top (required)>'
        from /home/caz/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/caz/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/caz/.rvm/gems/ruby-1.9.2-p320/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:6:in `<top (required)>'
        from <internal:lib/rubygems/custom_require>:33:in `require'
        from <internal:lib/rubygems/custom_require>:33:in `rescue in require'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from extconf.rb:2:in `<main>'

Gem files will remain installed in /home/caz/.rvm/gems/ruby-1.9.2-p320/gems/linecache19-0.5.12 for inspection.
Results logged to /home/caz/.rvm/gems/ruby-1.9.2-p320/gems/linecache19-0.5.12/ext/trace_nums/gem_make.out
An error occured while installing linecache19 (0.5.12), and Bundler cannot continue.
Make sure that `gem install linecache19 -v '0.5.12'` succeeds before bundling. 
```

我尝试了通常建议的解决方案：

```
 gem install ruby-debug19 -- --with-ruby-include=$rvm_path/src/ruby-1.9.2-p320 
```

我也尝试过使用 --force 选项但没有成功，如下所示：

[以 root 身份安装没有 rvm 的 Gems，使用显式版本的 ruby](https://stackoverflow.com/questions/7700828/installing-gems-without-rvm-as-root-with-explicit-version-of-ruby/7781550#7781550)

我对输出中报告的路径中“1.9.1”的存在感到困惑——我想知道这是否是 debian ruby​​ 包的后遗症以及我的问题的根源。

ps 这一切都是为了帮助安装最小的联合维基。我鼓励读者看看这个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:27:52.577

在你的终端输入`rvm requirements`

它会为您提供类似的东西

```
Additional Dependencies:
# For Ruby / Ruby HEAD (MRI, Rubinius, & REE), install the following:
  ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion 
```

继续复制命令并运行它。它将安装运行 ruby​​ 所需的所有依赖项。

# matlab - 将变量从 GUI 传递给 MATLAB 中的函数

> ID：11403207
> 
> 赞同：1
> 
> 时间：2012-07-09T21:10:02.790
> 
> 标签：matlab, matlab-guide

我有一个 MATLAB GUI，可以加载以帮助对数据进行可视化预处理。本质上，它会提示用户调整数据范围、减少数据点的数量等……同时提供更新的图表。完成这项工作后，我希望能够关闭 GUI 并将变量从 GUI 传递到另一个执行数据分析的 MATLAB 函数。我发现了很多关于如何从函数 TO 和 GUI 传递信息的信息，但反之则不然。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:03:12.660

全局变量可能会导致难以发现的错误。您的问题的最佳解决方案（您希望在关闭时将数据直接传递给另一个函数）可能是从[Figure Close Request Function](http://www.mathworks.com/help/techdoc/creating_plots/f7-21193.html)调用分析函数。当您的 GUI 正在运行的图形被告知关闭时，它将运行此函数中的代码，该代码可以调用您的分析函数并访问 GUI 的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:03:26.023

`.m`Matlab GUI 是函数：代码与其他函数一样存在于文件中。像常规函数一样，它们可以有返回值。您可以随心所欲地弄乱`varargout`系统，或者您可以简单地返回一个包含您想要的任何内容的值、结构或元胞数组。打开 m 文件并对其进行编辑以返回您想要的内容。

注意：如果在关闭图窗时需要特殊处理以生成适当的返回值，您可以根据需要重新实现 closeRequestFcn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:33:39.520

最简单的方法：您声明为`global variable`，其中**变量**存储您想要从 GUI 传输到主 MATLAB 工作区的数据。然后，您还可以`global variable`在命令窗口中声明相同的内容。在下文中，**变量**可以从两个范围、GUI 和主工作区访问。

您也可以使用或`save`任何其他替代方法将数据存储到文件中，但这似乎不是您的情况。`csvwrite``dlmwrite`

# c# - 选择 IpEndPoint 时无法连接到远程服务器

> ID：11403208
> 
> 赞同：1
> 
> 时间：2012-07-09T21:10:08.353
> 
> 标签：c#, httpwebrequest, ip, webrequest

我在具有多个 IP 地址的计算机上运行了 c# 代码，并且我有以下代码来为 httpWebRequest 选择 IP 地址：

```
class Interact
{
    <data, cookies, etc>

    HttpWebRequest CreateWebRequest(...)
    {
        .....

            request.ServicePoint.BindIPEndPointDelegate = delegate(
            ServicePoint servicePoint,
            IPEndPoint remoteEndPoint,
            int retryCount)
                      {
                          if (lastIpEndpoint!=null)
                          {
                              return lastIpEndpoint;
                          }
                          var candidates =
                              GetAddresses(remoteEndPoint.AddressFamily);
                          if (candidates==null||candidates.Count()==0)
                          {
                              throw new NotImplementedException();
                          }

                          return
                              lastIpEndpoint = new IPEndPoint(candidates[rnd.Next(candidates.Count())],0);
                      };
            };

        return request;
    } 
} 
```

这是GetAddresses的代码：

```
 static IPAddress[] GetAddresses(AddressFamily af)
    {
        System.Net.IPHostEntry _IPHostEntry = System.Net.Dns.GetHostEntry(System.Net.Dns.GetHostName());
        return (from i in _IPHostEntry.AddressList where i.AddressFamily == af select i).ToArray();
    } 
```

此代码应该从可用 IP 列表中选择一个随机 IP，然后坚持使用它。

相反，每次我用它发送请求时，我都会收到以下异常：

`Unable to connect to the remote server`

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:32:00.090

看起来您正在将端点的端口号设置为零：

```
lastIpEndpoint = new IPEndPoint(candidates[rnd.Next(candidates.Count())],0); 
```

除非稍后更改此设置，否则您不太可能能够连接到端口 0 上的 HTTP 服务器。您可能能够使用 中包含的端口`remoteEndPoint`，或者如果端口号正常，您可以硬编码端口号已知（例如，80 表示在默认端口上运行的 HTTP 服务器）。

```
lastIpEndpoint = new IPEndPoint(candidates[rnd.Next(candidates.Count())], remoteEndPoint.Port); 
```

# c++ - 头文件中的预编译头文件

> ID：11403211
> 
> 赞同：14
> 
> 时间：2012-07-09T21:10:10.667
> 
> 标签：c++, visual-studio, visual-c++, gcc, precompiled-headers

我今天第一次遇到预编译的头文件……永远改变了我的生活。我不敢相信编译我的 C++ 代码会这么快。现在完全有道理了..

无论如何，让我感到困惑的一件事是，从我目前所读的内容来看，只应将预编译的头文件添加到源文件（cpp？）中。

在 Visual Studio 中，在 Project Properties->C/C++->Advanced 下有一个选项可以“强制包含文件”。我将该编译器选项设置为*stdafx.h*。

这样做之后..我不再需要包含我添加到我的*stdafx.h*的标题，即使在我的头文件中（源文件应该自动包含 stdafx.h ）。这是预期的行为吗？

我找不到一个清楚区分头文件/源文件的地方。

如果确实如此.. 很好，但我担心这是 VC++ 让你逃脱但会在 GCC 中破坏的另一件事。是的..它需要便携；至少在 GCC 和 VC++ 之间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T21:48:48.713

StdAfx.h 真的应该只包含在源文件中，而不是头文件中。我建议您在每个 cpp 中首先 #include "StdAfx.h" 并且不要使用“强制包含文件”选项。这就是我对跨平台项目的处理方式。作为记录，我实际上并没有在 GCC 中使用预编译的头文件，我只是正常构建它并且它运行良好。

对于一些背景。编译器只查看源文件（即*.cpp、*.c 等），因此当它编译它们时，它必须包含每个头文件并编译在头文件中找到的任何代码。预编译头选项允许编译所有代码（即 StdAfx.h 中的全局包含代码），这样您就不必一直这样做。这就是 StdAfx.cpp 的用途。编译器使用 StdAfx.h 中包含的所有代码编译 StdAfx.cpp 一次，而不必每次构建时都这样做。

因此，由于您将 StdAfx.h 作为第一项包含在每个源文件中，因此将其包含在任何标题中都没有意义，因为它们将包含在 StdAfx.h 之后，因此可以访问所有代码在 StdAfx.h 中。另外，您可以在其他项目中使用这些标头，而不必担心周围有 StdAfx.h 或包含错误的标头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T21:26:29.730

是的，这是预期的行为。Project Properties->C/C++->Advanced to "Force Include File" 设置控制[Visual C++ 编译器选项 /FI](http://msdn.microsoft.com/en-us/library/8c5ztk84.aspx)：

> 此选项与在每个源文件的第一行的 #include 指令中使用双引号指定文件的效果相同

因此，它使您无需手动包含 stdafx.h。

虽然，您可以将预编译的头文件与 GCC 和其他编译器一起使用。Visual C++ 的快捷方式行为不能跨其他编译器移植。那么，检查[如何在跨平台代码中处理 stdafx.h？](https://stackoverflow.com/questions/1191248/how-to-handle-stdafx-h-in-cross-platform-code)讨论便携式解决方案的想法。

长话短说，在您的 .cpp 源文件中手动包含 stdafx.h 并且您应该也可以使用 GCC（假设您将为 GCC 配置您的构建以使用预编译头文件）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-13T12:32:27.737

不要使用“强制包含文件”设置 (/FI)，因为它会破坏编辑并继续！（而且 MS 似乎不想解决这个问题）

请参阅 [https://connect.microsoft.com/VisualStudio/feedback/details/668339/vs-2010-sp1-c-edit-and-continue-fails-with-fi](https://connect.microsoft.com/VisualStudio/feedback/details/668339/vs-2010-sp1-c-edit-and-continue-fails-with-fi)

和 [https://connect.microsoft.com/VisualStudio/feedback/details/342441/visual-studio-2005-force-includes-breaks-edit-and-continue-with-pre-compiled-headers](https://connect.microsoft.com/VisualStudio/feedback/details/342441/visual-studio-2005-force-includes-breaks-edit-and-continue-with-pre-compiled-headers)

`#include "stdafx.h"`只能作为源文件中的第一个非注释行找到，而不是在头文件中。

# android - 顶部的 ListView 和底部的按钮的布局？

> ID：11403212
> 
> 赞同：0
> 
> 时间：2012-07-09T21:10:16.787
> 
> 标签：android, android-layout

如何`ListView`在顶部显示布局并`Buttons`在底部显示多个布局（如图所示）

![在此处输入图像描述](../Images/bcec15a553ae973b97cc968a89c1a31b.png)

下面是我尝试过的代码（问题是按钮与列表重叠，在按钮后面有些可见，虽然我使用了重量总和，但 3 个按钮的大小不相等）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:weightSum="3" >

        <Button
            android:id="@+id/bDone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Done" />

        <Button
            android:id="@+id/bCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />

        <Button
            android:id="@+id/bSelAll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Select All" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:37:41.873

我所做的基本上是做 2 个线性布局，1 个用于列表，1 个用于按钮。还设置 weight = 1 和 width = 0 将使它们大小相等 此代码对我有用：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="5dip"  
    android:layout_marginBottom="5dip"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_above="@+id/footerlayout"
    android:id="@+id/listviewlayout">
    <ListView
        android:id="@+id/list"               
        android:layout_width="fill_parent"               
        android:layout_height="wrap_content"  
        android:layout_weight="1">
    </ListView> 
 </LinearLayout>
 <LinearLayout android:id="@+id/footerlayout"
        android:layout_marginTop="3dip"
        android:layout_height="45dip"
        android:orientation="horizontal" 
        android:layout_width="fill_parent" 
        android:gravity="center"
        android:layout_alignParentBottom="true">
        <Button
            android:id="@+id/bDone" 
            android:text="Done" 
            android:layout_width="0dip"
            android:layout_height="40dip"
            android:layout_weight="1">
        </Button>   
        <Button
            android:id="@+id/bCancel" 
            android:text="Cancel"
            android:layout_width="0dip"
            android:layout_height="40dip"
            android:layout_weight="1"   
            >
        </Button>   
        <Button
            android:id="@+id/bSelAll" 
            android:text="Select All"
            android:layout_width="0dip"
            android:layout_height="40dip"
            android:layout_weight="1"
            >
        </Button>   
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:17:07.060

添加到`LinearLayout`id 属性并将其添加到`ListView`

```
android:layout_above="@id/linear_layout_id" 
```

要使按钮的属性大小相同，请更改此

```
android:layout_width="wrap_content" 
```

对此

```
android:layout_width="match_parent" 
```

# class - 将日期时间字符串转换为整数（秒），然后添加 ms

> ID：11403214
> 
> 赞同：0
> 
> 时间：2012-07-09T21:10:23.937
> 
> 标签：class, parsing, datetime, python-2.7, logfile

我正在编写一个程序，它基本上从日志文件中提取一行，解析它，并以简化的形式返回解析的数据。我目前的主要问题是我应该解析我的日期时间搅拌的方法。这是日志中的一行示例。

日志文件示例：

```
2012-06-12 14:02:16,341 [main] INFO ---
2012-06-12 14:02:16,509 [main] INFO ---
2012-06-12 14:02:17,000 [main] INFO ---
2012-06-12 14:02:17,112 [main] INFO ---
2012-06-12 14:02:20,338 [main] INFO ---
2012-06-12 14:02:21,813 [main] INFO --- 
```

我解析 SO FAR 的代码（非常粗糙）：

```
class LogLine:

    SEVERITIES = ['EMERG','ALERT','CRIT','ERR','WARNING','NOTICE','INFO','DEBUG']
    severity = 1

    def __init__(self, line):
        try:
            t, s, self.filename, n, self.message =
                re.match(r"^(\d\d\d\d-\d\d-\d\d[ \t]\d\d:\d\d:\d\d,\d\d\d)", line)
            self.line = int(n)
            self.sev = self.SEVERITIES.index(s)
            self.time = time.strptime(t)

    def get_t(self):
        return

    def get_severity(self):
        return self.SEVERITIES.index(self)
    def get_message(self):
        return
    def get_filename(self):
        return
    def get_line(self):
        return 
```

所以基本上（如果你不能从我糟糕的代码中推断出来）我正在使用正则表达式解析字符串以获取日期时间。我也一直在阅读有关 strptime 作为解决此问题的可能方法。最终，我需要将日期时间解析为毫秒，然后将其添加到日期时间中的毫秒整数（以逗号分隔）

我确信这个问题非常令人费解，我提前道歉。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:20:37.857

```
>>> datetime.datetime.strptime('2012-06-12 14:02:16,341' + '000', '%Y-%m-%d %H:%M:%S,%f')
datetime.datetime(2012, 6, 12, 14, 2, 16, 341000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:26:57.737

以下是如何解析一行的示例：

```
>>> # A line from the logfile.
>>> line = "2012-06-12 14:02:16,341 [main] INFO ---"
>>> # Parse the line.
>>> m = re.match(r"^(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}),(\d{3}) \[([^]]*)\] (\S+) (.*)", line)
>>> timestamp, line_number, filename, severity, message = m.groups()
>>> # Show the various captured values.
>>> timestamp
'2012-06-12 14:02:16'
>>> line_number
'341'
>>> filename
'main'
>>> severity
'INFO'
>>> message
'---' 
```

# android - 从android中的HTML字符串中提取数据

> ID：11403216
> 
> 赞同：-3
> 
> 时间：2012-07-09T21:10:29.660
> 
> 标签：android

我有一个 HTML 字符串作为`By<!--[10018729]//--> <a href=\"/author/10018729_kurt-ernst\" title=\"show Kurt Ernst's profile page\"><img src=\"http://images.thecarconnection.com/tny/avatar-image-for-ernst_100345731_0.jpg\" alt=\"Kurt Ernst\" width=\"20\" height=\"20\"/> Kurt Ernst</a>, Contributor"`. 我必须从这个字符串中获取数据，将其命名为**Kurt Ernst** The Url 为**http://images.thecarconnection.com/tny/avatar-image-for-ernst_100345731_0.jpg**。我不知道如何获得它？请提出任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:13:45.653

我使用自己的逻辑进行了这种解析。它对我有用。您可以从 URL 获取字符串，然后使用 if 条件通过编写 while 或 for 循环来获取标题和 src。当你得到标题和 src 时打破循环。

# powershell - 脚本块作为字典的值？

> ID：11403224
> 
> 赞同：0
> 
> 时间：2012-07-09T21:10:58.583
> 
> 标签：powershell, closures, powershell-2.0

是否可以实现以下powershell脚本？

目的是稍后调用脚本块以获取 html 控件。

```
$sites = @{
    site1= @{ 
        url = "......."; 
        inputUserID = { $doc.getElementsByID("username"]) }; #Some code to get the html input control
        inputPassword = { $doc.getElementsByName("passowrd"]) }; #Some code to get the html input control
    };
    .....
}

$ie = New-Object -ComObject "InternetExplorer.Application"
$ie.navigate($sites[$site]["url"])
$ie.visible = $true
while ($ie.busy) { start-sleep -milliseconds 1000; }

... #Get the input controls and fill the values 
```

* * *

**问题已更新。够清楚吗？应该不难理解。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:12:37.840

从 PowerShell 中的脚本块获取闭包的方法是：

```
{  #code here  }.GetNewClosure() 
```

从上面的代码中很难判断这是否会有所帮助，但这就是您所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:36:21.267

您需要遍历每个站点的信息。我不确定您如何将 DOM 选择器与 IE COM 对象一起使用，所以我猜到了代码的那部分：

```
$sites = @{
    site1= @{ 
        url = "......."; 
        inputUserID = ( 'doc.getElementsByID("username")' ); #Some code to get the html input control
        inputPassword = ( 'doc.getElementsByName("passowrd")' ); #Some code to get the html input control
    };
    .....
}

$sites.Keys | 
    ForEach-Object {
        $siteInfo = $sites[$_]
        $ie = New-Object -ComObject "InternetExplorer.Application"
        $ie.navigate($siteInfo.url)
        $ie.visible = $true
        while ($ie.busy) { start-sleep -milliseconds 1000; }
        ... #Get the input controls and fill the values
        $usernameElement = $ie.someFunction( $siteInfo.inputUserID )
        $passwordElement = $ie.someFunction( $siteInfo.inputPassword )
    } 
```

# javascript - 当所选元素不可见时，滚动条不会滚动

> ID：11403231
> 
> 赞同：2
> 
> 时间：2012-07-09T21:11:22.117
> 
> 标签：javascript, jquery, html, css, scroll

我们在一个无序列表中有许多列表项，我们一次可以看到五个。当前选中的列表项有它自己的类（“selected”），当我们点击向上或向下时，下一个列表项会获得“selected”类，而前一个会丢失它。我们如何使当带有“已选择”类的列表项从 ul 的可视区域中出来时，滚动条也将与“已选择”项一起滚动？

它可以用鼠标很好地滚动，但是当单击向上/向下按钮时，选定的类会发生变化，但它不会滚动。在 CSS 中，ul 使用overflow:auto 设置样式。我试过改变溢出，但它对结果没有影响。

编辑问题可以在这里看到：http: [//jsfiddle.net/E7MSN/63/](http://jsfiddle.net/E7MSN/63/) 点击文本框上的回车，会出现一个下拉列表。然后使用键盘上/下箭头，继续前进，直到超出界限。请注意，滚动不跟随“选定”元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:21:49.283

用于`scrollTop`上下移动`ul`滚动位置。所以在你的情况下：

```
$(".services ul").scrollTop($('li').index($(".selected")) * $('.services li').height()); 
```

在上面的代码中，`$('li').index($(".selected"))`获取当前选中`li`元素的编号。然后这个数字乘以每个的高度`li`。

[更新了 jsFiddle](http://jsfiddle.net/E7MSN/90/)

您可能需要根据自己的喜好对其进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:16:36.310

你试过了`style="overflow:scroll"`吗？

# java - Spring：如果一个构造函数参数是 ref bean 而另一个不是，如何使类成为 bean？

> ID：11403236
> 
> 赞同：0
> 
> 时间：2012-07-09T21:11:46.660
> 
> 标签：java, spring

我有一堂课

```
public class MakeMeBean {
  @Autowired private IAmBean var1;
  private IAmNOTBean var2;

  public MakeMeBean() {}

  public MakeMeBean(IAmNOTBean var) {
    this.var2 = var;
  }
} 
```

我想把这个类作为一个豆子，所以我把一个`wireup.xml`作为

```
<bean id="make-me-bean" class="com.blah.blah.MakeMeBean">
  <constructor-arg index="0" ref=<PUT REFERENCE BEAN HERE>
  <constructor-arg index="1" <I don't want to put anything>
</bean> 
```

**问题**
a.) 如何制作一个 bean，其中一个实例变量是 bean 而另一个不是？我不想注入 var2（另一个 bean `wireup.xml`）

b.)`<PUT REFERENCE BEAN HERE>`是从 jar 文件导入的 bean，我如何在`wireup.xml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:27:42.817

您不能只在您创建的上下文中拥有一些 bean 和 spring 创建的另一半（至少不是那么简单），如果您想在 spring 上管理实例，spring 应该在其上下文中包含对象。当然，您可以在上下文中实例化对象，并且在实例化之后您可以调用一些设置器来设置一些属性。

为了使用另一个来使用另一个 bean，我想它来自另一个 Spring 上下文，另一个 spring 上下文需要在第一个中导入。为了导入上下文文件，您可以使用：

```
<import resource="resourcePath" /> 
```

# android - Android 在屏幕旋转期间保存 Activity 数据

> ID：11403237
> 
> 赞同：2
> 
> 时间：2012-07-09T21:11:46.750
> 
> 标签：android, screen-rotation

我google了很多，但现在我决定问..

我的活动只做一件简单的事情——它使用 AsyncTask 从 Internet 下载图片。

但是有很多问题，我不确定，如何解决..

1.] AsyncTask 下载图片**后用户旋转屏幕.. 我应该如何处理这个屏幕旋转？**活动重新创建后在哪里可以临时保存图片？

我**不想**锁定屏幕方向（android:screenOrientation="landscape"）或自己处理它（android:configChanges="orientation"）..

我只是想把图片保存在某个地方..

我知道可以通过使用**onRetainNonConfigurationInstance()**和**getLastNonConfigurationInstance()**来完成，但现在两者**都已弃用**。Bundle 不适用于图像，因为它是为字符串（可序列化）数据制作的。我可以将图片保存到数据库或某处的文件，但这是不必要的。我在某处读到，它可以由 Loader 完成，但我不知道如何？可能吗？

**2.] 用户在**AsyncTask 下载图片时旋转屏幕。

我希望 AsyncTask 继续下载。下载完成后，AsyncTask 应该将图像保存到 onPostExecute 方法中的新（重新创建）活动。

我认为如果 AsyncTask 是活动的内部类，它可以工作..？但是如果我不希望它成为内部类，我必须保存对活动的引用，例如在变量中。但是，如果我将 Activity 的引用作为 AsyncTask 的构造函数的参数发送，并且在屏幕旋转后重新创建 Activity，AsyncTask 中的变量确实引用了原始 Activity，因此新的不知道下载的图片，它必须重新开始下载..

还是 AsyncTask 是下载图像的错误选择？我应该使用其他东西吗？服务？

那么..如何解决这些问题呢？我相信很多应用程序开发人员也必须解决这个问题。但对我来说这都是希腊语:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:34:18.833

当您的 AsyncTask 完成下载图像后，将其保存到应用程序的缓存目录中。将保存图像的路径保留在 Activity 类的属性中。然后，您可以覆盖`onSaveInstanceState`Activity 的方法，以在方向更改期间将缓存的图像路径传递给自身。在您的`onCreate`方法中检查`savedInstanceState`捆绑包以获取已保存的图像路径。如果该路径存在，请不要尝试重新下载图像。相反，只需从磁盘加载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:17:25.277

I've already answered somewhere. I found a very nice example: read [this](http://www.codeproject.com/Articles/162201/Painless-AsyncTask-and-ProgressDialog-Usage?fid=1612106). This example for old APIs.

For new you can use `setRetainInstance` method of a fragment (if you use fragments).

# ios - ASIHTTPRequest 下载正在将 JSON 错误写入 zip

> ID：11403238
> 
> 赞同：0
> 
> 时间：2012-07-09T21:11:56.730
> 
> 标签：ios, asihttprequest

我有一种将文件作为 file_name.zip 下载到文档目录的方法。但是，如果我收到错误消息，例如“文件不存在”，则库正在将 JSON 有效负载写入 file_name.zip。

我们如何检查 JSON 错误`requestFinished:`？

responseString 或 responseData 始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:40:30.170

您可能想要检查`request.responseStatusCode`并检查 404 错误。但老实说，您应该研究一下 AFNetworking。不再支持 ASIHTTPRequest 并且 AFNetworking 有成功/失败块。

# macos - Couchbase 服务器拒绝网络连接 - 任何想法可能是什么问题？

> ID：11403245
> 
> 赞同：1
> 
> 时间：2012-07-09T21:12:30.477
> 
> 标签：macos, couchdb, couchbase

我下载了 couchbase 服务器的社区版，并在 mac 系统上运行它。

它根据控制台启动并运行：

![在此处输入图像描述](../Images/e78937eea449b913b261b7d80b37e1d4.png)

但是，当我尝试测试它时：

```
$ telnet localhost 8091
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.

Connection closed by foreign host. 
```

我已经告诉防火墙应用程序允许“Couchbase Server.app”应用程序接受传入的网络连接，但似乎没有帮助。

有什么想法可能是这里的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:14:54.747

是的，telnet 到 Couchbase 应该是通过 11211... [http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-getting-started-testing.html](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-getting-started-testing.html)

您是否尝试通过任何 SDK（C/Ruby/Java/.NET/PHP/Python/Perl）连接到它？如果您需要即时帮助，您也可以访问 IRC (freenode.net)，在 #libcouchbase 或 #couchbase 频道中，当然也可以在此处发布另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:28:47.093

我在错误的端口上连接到服务器。要查看访问服务器时要使用的端口，请打开相关的数据桶，并检查它在哪个端口上运行。默认情况下，它很可能在 11211 上可以访问

# php - PHP stream_context_set_option SSL 证书作为字符串

> ID：11403253
> 
> 赞同：11
> 
> 时间：2012-07-09T21:12:52.780
> 
> 标签：php, ssl, curl, pem

我有一个奇怪的问题。基本上，我需要这样做：

```
 $handle = stream_context_create();
 stream_context_set_option($handle , 'ssl', 'local_cert', '/tmp/cert'); 
```

然而。证书不作为文件保存在服务器中。相反，它是一个保存在集群数据库环境中的加密字符串。因此，证书不是文件名指针，而是证书的物理内容。因此，我需要指定证书的内容，而不是使用文件名。

例如：

```
 $cert = '-----BEGIN CERTIFICATE-----....
 upWbwmdMd61SjNCdtOpZcNW3YmzuT96Fr7GUPiDQ
 -----END CERTIFICATE-----'; 
```

有谁知道我到底怎么能做到这一点？我正在为这个问题挠头，但我的直觉告诉我这是可行的。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T21:54:53.890

正如 Maerlyn 所说，这样做的唯一方法似乎是将证书从内存写入临时文件，调用函数，提出请求，然后删除临时文件。

我查看了 PHP 源代码（[此处](http://lxr.php.net/xref/PHP_5_3/ext/openssl/openssl.c#4486)为相关代码），当您发出将使用 SSL 的请求时，它会检查是否设置了`local_cert`上下文选项，如果设置了，则最终调用 OpenSSL 函数[SSL_CTX_use_PrivateKey_file](http://linux.die.net/man/3/ssl_ctx_use_privatekey_file)从磁盘读取证书文件。

请注意，在执行请求之前不会读取文件，因此在请求之后才能删除临时文件，而不是在调用`stream_context_set_option`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-16T09:54:26.777

我尝试使用stream_wrapper（php：//内存和自定义流包装器）但没有成功:-(。至少，您可以创建一个随机临时文件，将其注册为在关机时删除，然后运行您的代码

```
$tmp_file = tempnam(sys_get_temp_dir(), "key");
register_shutdown_function("unlink",  $tmp_file);

//rest of your code go there 
```

# php - 带有列数组的 MySQL INSERT 语法

> ID：11403256
> 
> 赞同：0
> 
> 时间：2012-07-09T21:13:06.917
> 
> 标签：php, mysql

我是 PHP 和 MySQL 查询构造的新手。我有一个大型处理器。一些字段是必需的，大多数字段是用户可选的。在我的例子中，HTML id 和 MySQL 列名是相同的。我找到了有关使用数组将 $_POST 转换为 INSERT INTO 的字段和值的教程，但我无法让它们工作 - 很多小时后。我已经退后一步，使用数组和变量制作了一个非常简单的 INSERT，但我仍然很难过。以下行有效并将 5 个项目插入到具有 100 多列的数据库中。前 4 项是字符串，第 5 项，monthlyRental 是一个整数。

```
$query = "INSERT INTO `$table` (country, stateProvince, city3, city3Geocode, monthlyRental) VALUES ( '$country', '$stateProvince', '$city3', '$city3Geocode', '$monthlyRental')"; 
```

当我为字段创建一个数组并使用它时，如下所示：

```
$colsx = array('country,', 'stateProvince,', 'city3,', 'city3Geocode,', 'monthlyRental');
$query = "INSERT INTO `$table` ('$colsx') VALUES ( '$country', '$stateProvince', '$city3', '$city3Geocode', '$monthlyRental')"; 
```

我知道我需要添加一个 null 作为第一个数组项来触发 MySQL 自动增量 ID。还有什么？

我很新，所以请具体一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:15:11.310

```
$query = "INSERT INTO `$table` ('$colsx') etc... 
```

行不通。$colsx 是一个数组，所以你最终要产生的是字面意思

```
$query = "INSERT INTO `sometable` ('Array')
                                    ^^^^^---yes, it'll literally say "Array" 
```

在执行此操作之前，您必须将数组预处理为字符串，例如

```
$colsx = array(...);
$col_string = implode(',', $colsx);
$query = "INSERT INTO `$table` ($col_string) etc..."; 
```

# iphone - 如何在不丢失标签栏控制器的情况下切换模态

> ID：11403258
> 
> 赞同：1
> 
> 时间：2012-07-09T21:13:11.053
> 
> 标签：iphone, ios, xcode

好的，所以我希望能够有一个带有两个选项卡的 TabBar 控制器（就像 Xcode 中的模板），但是在第二个选项卡中，我想要一个按钮，将视图带到第三个视图控制器。我希望第三个视图控制器有一个返回到第二个选项卡的按钮，我不希望第三个视图保留 TabBar，但是当我返回到第二个选项卡时，我希望 TabBar 返回。

所以这就是我实际所做的，但它不起作用。我在第二个视图和第三个视图中放置了一个按钮，我控制单击并拖动到各自的视图，然后单击模态。一切正常，除了当我回到第二个视图时，我失去了标签栏。

我正在谈论的图片：

Xcode 的屏幕截图：

iOS 在第二个视图上的屏幕截图：

单击按钮转到第三个视图后的屏幕截图：

单击按钮返回第二个视图后的屏幕截图。（失去标签栏！）

[http://s13.postimage.org/78gqghflj/Screen_Shot_2012_07_09_at_2_03_41_PM.png](http://s13.postimage.org/78gqghflj/Screen_Shot_2012_07_09_at_2_03_41_PM.png) http://s16.postimage.org/gdwus4w6t/i_OS_Simulator_Screen_shot_Jul_9_2012_2_02_50_PM.png [http://s10.postimage.org/5uq3ste7d/i_OS_Simulator_Screen_shot_Jul_9_2012_2_02_57_PM.png的](http://s10.postimage.org/5uq3ste7d/i_OS_Simulator_Screen_shot_Jul_9_2012_2_02_57_PM.png) http：// S8 .postimage.org/gpmsx959x/i_OS_Simulator_Screen_shot_Jul_9_2012_2_03_54_PM.png

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:19:18.653

您不需要单独的模态 Segue 回到第二个视图控制器，您可以在单击“返回第二个视图”时关闭模态视图控制器

```
[self dismissModalViewControllerAnimated:YES]; 
```

# php - 使用fitnesse登录

> ID：11403260
> 
> 赞同：0
> 
> 时间：2012-07-09T21:13:27.590
> 
> 标签：php, http, post, fitnesse

这是一个基本的 HTTP 编码和格式问题。我需要从 RESTFixture 登录到 PHP Web 服务。我需要传递帐户、用户名和密码，就像登录页面一样作为 POST 变量。

Wireshark 显示我的登录页面将其格式化为 `accountNumber=accounttest&username=usertest&password=passtest`

当我在测试中这样做时，我得到一个 POST 数组 `$_POST: Array ( [accountNumber] => accounttest [amp;username] => usertest [amp;password] => passtest )`

那会起作用，但是“amp;” 显然它使PHP找不到用户名。

实时和测试的内容类型相同。[CONTENT_TYPE] => 应用程序/x-www-form-urlencoded

以下是我尝试过的其他几种格式。在所有三种情况下，它都无法解析，因此所有字段都以一个数组条目结尾。

输入：accountNumber=accounttest%amp;username=usertest%amp;password=passtest

结果： $_POST: Array ( [accountNumber] => accounttest%amp;username=usertest%amp;password=passtest )

输入：accountNumber=accounttest;username=usertest;password=passtest
`Result: $_POST: Array ( [accountNumber] => accounttest;username=usertest;password=passtest )`

输入：accountNumber=accounttest%26username=usertest%26password=passtest
结果：$_POST: Array ( [accountNumber] => accounttest&username=usertest&password=passtest )

所以最后一个正确地将 %26 转换为 &，但不会将项目分解为数组元素。

# event-handling - Instance-Specific EventHandler 提供超越类级别的数据可见性

> ID：11403262
> 
> 赞同：1
> 
> 时间：2012-07-09T21:13:43.837
> 
> 标签：event-handling

我可以就以下问题寻求帮助吗？

我正在尝试通过一台 GlobalCache GC-100 和 iTach 用计算机连接和控制三台家用电子设备。正如您将在下面的代码中看到的，我创建了一个可以通信和控制设备的类（“GlobalCacheAdapter”），并为每个设备创建了该类的实例。尽管每个实例似乎都可以很好地进行通信和控制每台设备，**但从设备返回的******反馈****似乎仅在定义类级别的“ReaderThreadProc”过程中可见。每件设备都需要进一步处理反馈，我不确定如何**在设备特定实例级别转发此反馈**. 我怀疑需要实现一个特定于实例的 EventHandler；但是我不知道如何实现这种类型的特定于实例的 EventHandler 以完成处理和更新适当的控件。

任何帮助将不胜感激。

```
 using System;
  using System.IO;
  using System.Net;
  using System.Net.Sockets;
  using System.Threading;
  using System.Windows.Forms;

  namespace WindowsFormsApplication1
  {
       public partial class Form1 : Form
       {

             // Create three new instances of GlobalCacheAdaptor and connect.
             // GC-100 (Elan) 192.168.1.70 4998  
             // GC-100 (TuneSuite) 192.168.1.70 5000  
             // GC iTach (Lighting) 192.168.1.71 4999

             private GlobalCacheAdaptor elanGlobalCacheAdaptor;
             private GlobalCacheAdaptor tuneSuiteGlobalCacheAdaptor;
             private GlobalCacheAdaptor lutronGlobalCacheAdaptor;

             public Form1()
             {
                  InitializeComponent();

                  elanGlobalCacheAdaptor = new GlobalCacheAdaptor();
                  elanGlobalCacheAdaptor.ConnectToDevice(IPAddress.Parse("192.168.1.70"), 4998);
                  tuneSuiteGlobalCacheAdaptor = new GlobalCacheAdaptor();
                  tuneSuiteGlobalCacheAdaptor.ConnectToDevice(IPAddress.Parse("192.168.1.70"), 5000);
                  lutronGlobalCacheAdaptor = new GlobalCacheAdaptor();
                  lutronGlobalCacheAdaptor.ConnectToDevice(IPAddress.Parse("192.168.1.71"), 4999);

                  elanTextBox.Text = elanGlobalCacheAdaptor._line;
                  tuneSuiteTextBox.Text = tuneSuiteGlobalCacheAdaptor._line;
                  lutronTextBox.Text = lutronGlobalCacheAdaptor._line;
           }

           private void btnZoneOnOff_Click(object sender, EventArgs e)    {    elanGlobalCacheAdaptor.SendMessage("sendir,4:3,1,40000,4,1,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,800" + Environment.NewLine); }
           private void btnSourceInput1_Click(object sender, EventArgs e) {    elanGlobalCacheAdaptor.SendMessage("sendir,4:3,1,40000,1,1,20,179,20,179,20,179,20,179,20,179,20,179,20,179,20,278,20,179,20,179,20,179,20,780" + Environment.NewLine); }        
           private void btnSystemOff_Click(object sender, EventArgs e)    {    elanGlobalCacheAdaptor.SendMessage("sendir,4:3,1,40000,1,1,20,184,20,184,20,184,20,184,20,184,20,286,20,286,20,286,20,184,20,184,20,184,20,820" + Environment.NewLine); }

           private void btnLightOff_Click(object sender, EventArgs e)     {    lutronGlobalCacheAdaptor.SendMessage("sdl,14,0,0,S2\x0d"); }
           private void btnLightOn_Click(object sender, EventArgs e)      {    lutronGlobalCacheAdaptor.SendMessage("sdl,14,100,0,S2\x0d"); }

           private void btnChannel31_Click(object sender, EventArgs e)    {    tuneSuiteGlobalCacheAdaptor.SendMessage("\xB8\x4D\xB5\x33\x31\x00\x30\x21\xB8\x0D"); }
           private void btnChannel30_Click(object sender, EventArgs e)    {    tuneSuiteGlobalCacheAdaptor.SendMessage("\xB8\x4D\xB5\x33\x30\x00\x30\x21\xB8\x0D"); }
      }
}

public class GlobalCacheAdaptor
{
      public Socket _multicastListener;
      public string _preferredDeviceID;
      public IPAddress _deviceAddress;
      public Socket _deviceSocket;
      public StreamWriter _deviceWriter;
      public bool _isConnected;
      public int _port;
      public IPAddress _address;
      public string _line;

      public GlobalCacheAdaptor() { }
      public static readonly GlobalCacheAdaptor Instance = new GlobalCacheAdaptor();

      public bool IsListening { get { return _multicastListener != null; } }

      public GlobalCacheAdaptor ConnectToDevice(IPAddress address, int port)
      {
            if (_deviceSocket != null) _deviceSocket.Close();
            try
            {
                  _port = port;
                  _address = address;
                  _deviceSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                  _deviceSocket.Connect(new IPEndPoint(address, port)); ;
                  _deviceAddress = address;
                  var stream = new NetworkStream(_deviceSocket);
                  var reader = new StreamReader(stream);
                  var writer = new StreamWriter(stream) { NewLine = "\r", AutoFlush = true };
                  _deviceWriter = writer;
                  writer.WriteLine("getdevices");
                  var readerThread = new Thread(ReaderThreadProc) { IsBackground = true };
                  readerThread.Start(reader);
                  _isConnected = true;
                  return Instance;
           }
           catch { DisconnectFromDevice(); MessageBox.Show("ConnectToDevice Error."); throw; }
}
     public void SendMessage(string message)
     {
           try
           {
                 var stream = new NetworkStream(_deviceSocket);
                 var reader = new StreamReader(stream);
                 var writer = new StreamWriter(stream) { NewLine = "\r", AutoFlush = true };
                 _deviceWriter = writer;
                 writer.WriteLine(message);
                 var readerThread = new Thread(ReaderThreadProc) { IsBackground = true };
                 readerThread.Start(reader);
           }
           catch { MessageBox.Show("SendMessage() Error."); }
    }

    public void DisconnectFromDevice()
    {
         if (_deviceSocket != null)
         {
               try { _deviceSocket.Close(); _isConnected = false; }
               catch { MessageBox.Show("DisconnectFromDevice Error."); }
               _deviceSocket = null;
         }
        _deviceWriter = null;
        _deviceAddress = null;
    }

    **private void ReaderThreadProc(object state)**
    {
          var reader = (StreamReader)state;
          try
          {
              while (true)
              {
                 var line = reader.ReadLine();
                 if (line == null) break;
                 _line = _line + line + Environment.NewLine;
              }
             **// Feedback from each piece of equipment is visible here.
               // Need to create EventHandler to notify the TextBoxes to update with _line**
           }
           catch { MessageBox.Show("ReaderThreadProc Error."); }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:07:21.623

根据我对这个问题的理解，你想做这样的事情吗？

![在此处输入图像描述](../Images/1e987e19d524e211e662e917cc074fbb.png)

您需要知道 GlobalCacheAdapter 何时更新以及更新哪一个以更新表单上的文本框。我对你的问题是——你真的需要知道哪个更新了吗？

如果你在你的类中声明一个这样的事件处理程序：

```
public class GlobalCacheAdaptor
{
    public event EventHandler<EventArgs> Updated;

    protected virtual void OnUpdated()
    {
        var handler = Updated;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }

    private void Foo()
    {
        // When an update is received, raise Updated event
        OnUpdated();
    }
} 
```

然后在您的表单中订阅所有三个 GlobalCacheHandler 实例的更新

```
public Form1()
{
    elanGlobalCacheAdaptor.Updated += (s,e) => 
    {
        elanTextBox.Text = elanGlobalCacheAdaptor._line;
    }

    tuneSuiteGlobalCacheAdaptor.Updated += (s,e) => 
    {
        tuneSuiteTextBox.Text = tuneSuiteGlobalCacheAdaptor._line;
    }

    lutronGlobalCacheAdaptor.Updated += (s,e) => 
    {
        lutronTextBox.Text = lutronGlobalCacheAdaptor._line;
    }
} 
```

当适当的缓存处理程序引发更新事件时，您应该能够更新正确的文本框。

最后，您可能需要处理跨线程交互。如果是这样，[请参阅 MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)，尤其是“线程安全调用 Windows 窗体控件”部分

# jquery - 在 iife 中理解 $ vs. jQuery 而不是 $

> ID：11403266
> 
> 赞同：9
> 
> 时间：2012-07-09T21:14:05.577
> 
> 标签：jquery, iife

我试图了解以下之间是否有任何区别：

```
(function($){

...

})(jQuery); 
```

对比

```
(function($){

...

})($); 
```

请注意，jQuery 被替换为 $。这个可以吗？它是不是因为它不能工作而没有在任何地方使用？它有效，但也许它是非标准的？有人可以解释一下这是错误还是可以？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T21:16:09.223

其他 JavaScript 框架也可能使用 $ 作为快捷方式。为了保证 $ 在你的函数中是 jQuery，在最后传递 jQuery 而不是 $。这种定义函数或“代码区”的方式是为了确保在混合框架时 $ 确实是 jQuery。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T21:21:02.917

许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

在“无冲突”模式下，$ 快捷方式不可用，使用较长的 jQuery。例如：

```
$(document).ready(function(){
     $(#somefunction) ...
}); 
```

变成：

```
jQuery(document).ready(function(){
    jQuery(#somefunction) ...
}); 
```

为了使用 $ 的默认 jQuery 快捷方式，您可以在代码周围使用以下包装器：

```
jQuery(document).ready(function($) {
    // $() will work as an alias for jQuery() inside of this function
}); 
```

该包装器将导致您的代码在页面完成加载时执行，并且 $ 将用于调用 jQuery。如果出于某种原因，您希望您的代码立即执行（而不是等待 DOM 就绪事件），那么您可以使用此包装器方法：

```
(function($) {
    // $() will work as an alias for jQuery() inside of this function
})(jQuery); 
```

**好读：** [http ://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

**进一步，如果你热衷：**

[jQuery 中的 $ 是什么意思？](https://stackoverflow.com/questions/7486661/what-does-mean-in-jquery)

这应该有助于解渴`:)`可能希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:18:40.610

有。
`$`只是 jQuery 的一个*快捷方式*。它没有定义库，因此它也可以被其他框架使用。
考虑这种情况：

```
// remove the jQuery shortcut ($ === undefined)
var j = jQuery.noConflict();
// redefine the dollar sign
window.$ = function(){
    // some other plugin
}

// case A
(function($){
   alert(jQuery === $);//true
})(jQuery)

 // case B
(function($){
   alert(jQuery === $);//false
})($) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:19:59.437

你的第二个例子是多余的。如果你可以通过 jQuery 使用`$`then`$`已经是 jQuery，即你可以写：

```
(function(){
   $('#selectme');
})(); 
```

第一个例子，只有在你想在 noConflict 模式下使用 jQuery 时才值得，但仍然`$`在选择的代码片段中使用 jQuery 来引用。否则，从技术上讲，您甚至不需要闭包（尽管出于许多其他原因，闭包是一种很好的做法）。

# encryption - 稍微修改一个 MP3 来改变数据的外观

> ID：11403268
> 
> 赞同：0
> 
> 时间：2012-07-09T21:14:10.253
> 
> 标签：encryption, mp3, data-loss

我正在考虑在数据库中加密 MP3，这样当用户使用他的软件桌面播放器下载它们时，只有软件可以解密它们。这部分不是问题。问题是我不希望用户将 mp3 上传到数据库，然后检查对文件进行了哪些更改，以便他可以对文件进行逆向工程，或者至少查看用于加密文件的算法。

所以，用户上传MP3-A，然后它变成了MP3-B，因为它已经被修改了，我将它加密为MP3-C。解密后，听起来 99.99% 像 MP3-A。

我知道 MP3 格式是有损的，但我想知道是否有办法以有限的损失转换音频，或者我现在需要忘记它。

# python - 如何在Python中给定时间后结束程序运行

> ID：11403275
> 
> 赞同：4
> 
> 时间：2012-07-09T21:14:46.873
> 
> 标签：python, multithreading, time

我希望我的 Python 程序在给定的秒数内运行算法，然后打印迄今为止的最佳结果并结束。

最好的方法是什么？

我尝试了以下方法，但没有成功（打印后程序继续运行）：

```
def printBestResult(self):
    print(self.bestResult)
    sys.exit()

def findBestResult(self,time):
    self.t = threading.Timer(time, self.printBestResult)
    self.t.start() 

    while(1):
        # find best result 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:20:11.193

Untested code, but something like this?

```
import time    
threshold = 60
start = time.time()

best_run = threshold
while time.time()-start < threshold:
   run_start = time.time()
   doSomething()
   run_time = time.time() - start
   if run_time < best_run:
       best_run = run_time 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:23:14.543

在 unix 上，您可以使用信号——此代码在 1 秒后超时，并计算它在该时间内遍历 while 循环的次数：

```
import signal
import sys

def handle_alarm(args):
    print args.best_val
    sys.exit()

class Foo(object):
    pass

self=Foo() #some mutable object to mess with in the loop
self.best_val=0
signal.signal(signal.SIGALRM,lambda *args: handle_alarm(self))

signal.alarm(1) #timeout after 1 second
while True:
    self.best_val+=1 # do something to mutate "self" here. 
```

或者，您可以轻松地让您的 alarm_handler 引发异常，然后在 while 循环之外捕获该异常，打印出您的最佳结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:31:22.203

如果您想使用线程执行此操作，一个好方法是使用[`Event`](http://docs.python.org/library/threading.html#event-objects). 请注意，这`signal.alarm`在 Windows 中不起作用，所以我认为线程是你最好的选择，除非在这种情况下。

```
import threading
import time
import random

class StochasticSearch(object):
    def __init__(self):
        self.halt_event = threading.Event()

    def find_best_result(self, duration):
        halt_thread = threading.Timer(duration, self.halt_event.set)
        halt_thread.start()
        best_result = 0
        while not self.halt_event.is_set():
            result = self.search()
            best_result = result if result > best_result else best_result
            time.sleep(0.5)
        return best_result

    def search(self):
        val = random.randrange(0, 10000)
        print 'searching for something; found {}'.format(val)
        return val

print StochasticSearch().find_best_result(3) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T21:19:45.283

You need an exit condition, or the program will run forever (or until it runs out of memory). Add one yourself.

# javascript - 跟踪某个方格中的地图标记而不刷新

> ID：11403277
> 
> 赞同：1
> 
> 时间：2012-07-09T21:15:00.143
> 
> 标签：javascript, map, websocket

我正在尝试为以下问题找到正确（或最佳）的解决方案：

说，我有一个谷歌地图（实际上是什么样的地图并不重要），人们可以在其中创建和删除标记。任何用户都可以查看地图，并且我知道用户现在查看的正方形范围。因此，如果其他人在这个正方形上创建标记，我需要立即在地图上显示它。为此，我将使用 websockets。但问题不在于技术方面，而在于逻辑。将标记数据发送给用户的最佳方式是什么？我应该以某种方式存储显示位置的当前范围吗？我不想向所有用户发送新标记，因为他们可能不需要它，我只想发送给那些看那个正方形的人。或者我必须让生产者将这些信息提供给消费者？

对不起，如果我写了令人困惑的东西，如果有不清楚的地方请问我。感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:16:50.753

跟踪您当前连接的用户的地图边界。当他们平移地图时，请确保使用这些边界更新服务器。

添加新点时，在服务器端，循环遍历每个连接并检查坐标是否在这些范围内。如果是，则发送新标记。

# asp.net-mvc - 从返回 ActionResult 的 Action 执行 JavaScript

> ID：11403281
> 
> 赞同：0
> 
> 时间：2012-07-09T21:15:16.023
> 
> 标签：asp.net-mvc, razor, error-handling

我正在尝试在我的 MVC 项目中实现错误处理机制。我正在寻找一种在同一页面上向用户显示错误消息的方法。我试过了 -

[返回 JavaScript(..)](https://stackoverflow.com/questions/1312408/asp-net-mvc-javascript-actionresult) - 但是，这不起作用，因为我通过 ActionLink 而不是 Ajax 调用操作。我无法通过 Ajax 调用它，因为即使页面第一次加载也可能会生成错误。

[返回 Content(..)](http://forums.asp.net/t/1716356.aspx/1) - 这也不显示警报

我在 catch 块中执行此操作 -

```
public ActionResult Index()
{
    try
    {
        //something that generates an exception
    }
    catch(Exception e)
    {
        //show an alert with the error through JS
    }
} 
```

有没有什么方法可以在不使用 Ajax 调用来执行操作的情况下执行 javascript 来向用户显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:35:35.163

你可以做类似的事情

```
 catch(Exception e) 
    {
       ViewBag.Error = "error:" + e.ToString();
    }

    return View(); 
```

在你看来绑定喜欢

```
 <%if(ViewBag.Error != null) 
    {%>
      <script type="text/javascript">
        alert('<%=ViewBag.Error%>');
      </script>
    <%}%> 
```

# javascript - 使用 % 宽度时的 JScrollPane 问题

> ID：11403283
> 
> 赞同：1
> 
> 时间：2012-07-09T21:15:51.363
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

我刚刚开始使用 JScrollPane，它似乎可以完美地工作，但有 1 个例外。我试图在需要 % 宽度的场景中使用它，尽管最初看起来一切都很好，但 div 不会随着浏览器窗口动态拉伸。这仅在我将 JScrollPane 应用于 div 后才会发生。

有谁知道如何解决这一问题？事实上，一旦页面加载，div 确实会像它应该做的那样拉伸，但是如果浏览器窗口随后被拉伸，则 div 不会像它应该做的那样拉伸。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:59:11.810

经过一番修补后，我能够找到解决此问题的方法。只需刷新对 .jScrollPane() 的调用；on .resize() 似乎很有魅力。在 Win7 上的 Chrome、Firefox、IE 和 Safari 中测试。

```
$(window).resize(function() { 
    $('.scroll-pane').jScrollPane();
}); 
```

# wpf - 我需要用什么来像在图片中一样绘制表格？

> ID：11403292
> 
> 赞同：0
> 
> 时间：2012-07-09T21:16:25.043
> 
> 标签：wpf, winforms

我想画这样的表格（Windows Form 或者我不知道它是什么）。
![在此处输入图像描述](../Images/42217bdc6bd7d934bd75de86425e0099.png)
这是“HTC Home 3 的时钟小部件”。
我知道，这种形式已经用框架 4 绘制（开发，发明:)。
我需要使用什么？也许是 Windows 窗体、WPF 或......有
什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:28:06.590

WPF 将使它比 WinForms 容易得多。

也就是说，根据您的问题，我猜测您将需要更多的指导，而不仅仅是指出“正确”的技术......

# iphone - App builds & runs in iPhone Simulator, but doesn't deploy to iPhone

> ID：11403293
> 
> 赞同：0
> 
> 时间：2012-07-09T21:16:36.087
> 
> 标签：iphone, osx-lion, xcode4.3, ios5.1

The app I'm working on builds & runs just fine in the iPhone Simulator, but, when I try to test it on an iPhone 4S, XCode says, "Finished running ..." immediately after I click "Run", and, when I look at the iPhone, there's no icon for the app at all. It's as though XCode doesn't detect that XCode isn't deploying the app to the device.

I've got a signed certificate, a developer profile, and a valid provisioning profile (XCode's Organizer says so). The provisioning profile is present on the iPhone.

I've tried restoring the iPhone, and I still get the same error.

How do I successfully deploy my app to the iPhone?

**Edit:**

It's deep in the comments of the below answer, but the problem was that I had a misspelled within `Info.plist`'s required `Required device capabilities` section. I solved it by deleting that row.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:29:45.700

几件事要检查：

清理你的构建文件夹并重建。在 Xcode 项目导航器的产品文件夹下，您的应用程序是否存在？

打开 iTunes 并尝试将这个应用程序拖入 iTunes。它会出现在 iTunes 中还是出现错误？如果它出现，你可以通过 iTunes 将它安装到 iPhone 上吗？

您的 iPhone iOS 版本和 Xcode 版本以及构建设置是否同步？我知道某些版本的 Xcode 4.x 在 iOS 4.x 上构建和运行应用程序时存在问题。

# oracle - How Can I Configure an Oracle Data Source in Lightswitch to Map Tables Owned by Another User?

> ID：11403307
> 
> 赞同：0
> 
> 时间：2012-07-09T21:17:57.367
> 
> 标签：oracle, configuration, datasource, visual-studio-lightswitch

We are using a SaaS provider at my company, who also offers direct read-only access to their back end Oracle database.

Our Oracle user does not *own* any of the tables, therefore the tables we want to read belong to other users. So the tables must be addressed as follows: OwnerUser.table1, OwnerUser.table2, etc.

When setting up a data source in LightSwitch, no tables are visible, because the Entity Data Model is mapping to tables owned by our user (the one which we connect with).

Does anyone know if I can tweak the data source somewhere to inject the owner prefix (e.g. OwnerUser) so that the LightSwitch Designer will show the tables owned by OwnerUser?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:19:47.547

您可能会发现，在这种情况下，为传递用户信息和设置表的数据源创建自定义 RIA 服务层可能会更容易。

# php - Sort WordPress posts by numerical custom fields

> ID：11403311
> 
> 赞同：1
> 
> 时间：2012-07-09T21:18:17.063
> 
> 标签：php, wordpress

I added a code that allows me to sort WordPress posts by custom fields. I'm trying to sort the posts by prices, but it's sorting by the first number and not the value:

```
$116.99
$12.95
$149.00
$15.99 
```

Instead of:

```
$12.95
$15.99
$116.99
$149.00 
```

How can I get it to sort properly?

Here's the code: [http://pastebin.com/Pe5yfvrE](http://pastebin.com/Pe5yfvrE)

I took it from this discussion, but it was left unresolved there..

[http://wordpress.org/support/topic/sort-posts-by-custom-field-in-backend](http://wordpress.org/support/topic/sort-posts-by-custom-field-in-backend)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:28:17.727

如果您想手动进行（尽管引用的答案`WP_Query`是更好的选择），一个相当不错的处理可能会使用[`array_multisort`](http://php.net/manual/en/function.array-multisort.php)：

```
$arr = array(
  '$116.99',
  '$12.95',
  '$149.00',
  '$15.99'
);

$keys = array();

foreach ($arr as $value) {
    $keys[] = floatval(substr($value, 1));
}

array_multisort($keys, SORT_ASC, $arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:24:03.910

使用[WP_Query 类和 orderby=meta_value_num 参数](http://codex.wordpress.org/Function_Reference/WP_Query#Order_.26_Orderby_Parameters)进行数字排序。此外，请确保您将价格作为数字存储在自定义字段中，并且不带“$”。

```
$query = new WP_Query( array ( 'orderby' => 'meta_value_num', 'meta_key' => 'price' ) ); 
```

`$query`然后包含按价格数字排序的帖子行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:22:27.477

我没有看过你的代码，但你这与你的情况下的数字是字符串有关。如果你对一个字符串进行排序，它会像你描述的那样排序。为了按它的值对其进行排序，您需要删除该`$`符号并将其转换为一个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:24:28.943

你见过这种技术吗？- 将零添加到 的元值以强制将其视为整数。多年来，该帖子也已多次更新，因此可能会对您有所帮助；

[http://wordpress.org/support/topic/order-by-meta_key-where-meta_value-is-number?replies=11](http://wordpress.org/support/topic/order-by-meta_key-where-meta_value-is-number?replies=11)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:33:07.447

```
function order($a, $b) {return intval($b) - intval($a);}
uasort($array, 'order'); 
```

我想知道这可以帮助你;）

# semantic-web - 芝麻内存三重存储

> ID：11403314
> 
> 赞同：3
> 
> 时间：2012-07-09T21:18:36.857
> 
> 标签：semantic-web, triplestore, sesame

```
- Using openrdf-sesame-latest
- Using in-memory repository in Sesame Standalone Server
- Using REST api interface (SPARQL queries) to Sesame Standalone server
- Have few hundred thousands triples for now
- have 16GB of memory on Sesame Server
- Moderate writes and reads 
```

我只是在这里寻求专家的意见/帮助

我从 POC 开始，并在它之上构建了我的应用程序。我在看 4Stores 和 Mulgara，Alleograph（免费）选项。

*   鉴于我的经验较少，我想知道什么时候绝对强制我离开 Sesame Server。
*   会是规模、安全性、写/读性能等吗？
*   如果我只有 100,000 个三元组，我是否需要搬到其他商店，为什么？
*   我也打算将它用于生产用例。

只是我试图避免在迁移上投入时间，除非它绝对需要。让我换一种说法“我可以在生产中使用带有内存存储库（16GB）的 openrdf-sesame-latest 独立服务器吗？如果不能，为什么不呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T23:59:54.233

作为芝麻开发者之一，我显然有偏见，但我不明白为什么你不能。

Sesame 已成功用于许多生产环境。内存存储随着可用 RAM 的数量而扩展，虽然我个人从未用超过几百万的三倍数对其进行过测试，但我希望你可以继续添加而不会显着降低性能，只要你没有用完堆空间. 您提到了 100,000 个三元组，这很小，Sesame 可以轻松应对数量级更大的数据集。

Sesame 的一个优点还在于它实际上不是一个单一的三元存储，而是一个支持多个存储后端的框架和 API。对于高达 1.5 亿个三元组的任何东西，Sesame 本机存储都是一个很好的解决方案（更好的持久性，更少的内存占用，即使您拥有的数据量适合内存，这也可能是使用它的好理由）。

如果您需要超出此范围，还有其他几个选项，包括支持 Sesame API 的第三方三元存储，例如 OWLIM 或 BigData——因此即使您发现需要更大的三元存储，您也不必在代码级别 - 您只需插入不同的商店。

# iphone - NSMutableArray 整数存储

> ID：11403316
> 
> 赞同：0
> 
> 时间：2012-07-09T21:18:44.417
> 
> 标签：iphone, objective-c, nsmutablearray, long-integer

我正在尝试将数字存储在 NSMutableArray 中，并像这样包装它们：

```
-(IBAction)opUp:(id)sender{
    opBool = YES;
    opNum = [sender tag];
    [numArray addObject:[NSNumber numberWithLong:number2]];
    [opArray addObject:[NSNumber numberWithInt:opNum]];
    number1 = 0;
    number2 = 0;
    opNum = 0;
    NSLog(@"Operand %i", opNum);
    NSLog(@"%i, %i", numArray.count, opArray.count);
 } 
```

但是当我稍后用这个给他们打电话时：

```
 final2 = [numArray objectAtIndex:i];
    operthing = [opArray objectAtIndex:i]; 
```

我收到此错误消息：

> 操作等于 111526320

'operthing' 不应该超过 20。有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:30:32.260

```
operthing = [[opArray objectAtIndex:i] intValue]; 
```

# javascript - 优化 Jquery 动画

> ID：11403319
> 
> 赞同：0
> 
> 时间：2012-07-09T21:18:51.147
> 
> 标签：javascript, jquery, html, animation

因此，我正在寻找优化 Jquery .animate(scrollTo:value) 函数的最佳方法。举个例子：

```
$('#returnToTop').on('click', function(){
        $('html, body').animate({
            scrollTop: 0
        }, 'slow');
    }); 
```

在这里，您有一个 div，它充当“顶部”按钮，单击该按钮会将页面滚动回顶部。现在在复杂的页面上，这是相当生涩和不流畅的。我想知道是否有任何 jQuery 忍者可以启发我们了解 animate 函数的作用。在简单的页面上，它很好而且流畅。

现在，我假设它可能会进行一些遍历 DOM 的计算，所以当它很复杂时，它需要一段时间并且看起来很跳跃。所以这里是问题的核心：

作为开发人员，我们可以采取哪些步骤来为 jQuery 提供精确的参数，使其计算更简单，从而使动画更流畅。可能有一些重要的特定值，如果提供，将提供显着的加速。

有没有人有任何见解？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:30:57.910

对于 jQuery，“慢”是一段时间（准确地说是 600 毫秒）。如果是大页面，需要在600ms内跳转到顶部。

如果您想以与页面高度无关的恒定速度制作此动画，请将持续时间设置为`t = offsetTop / k`每秒走 k 像素，其中 offsetTop 类似于`$(clickedElement).offset().top`.

jQuery 也有一些插件可以直接完成。

# jquery-mobile - Change icon of button jQuery Mobile

> ID：11403323
> 
> 赞同：2
> 
> 时间：2012-07-09T21:19:03.623
> 
> 标签：jquery-mobile

I'm trying to change an icon of a button to another, but is not working.

I have:

```
<a id="login" href="login.html" data-role="button" data-icon="user" data-iconpos="top">Login</a> 
```

And I did:

```
$('#login').data('icon', 'user_highlight');
$('#login').button("refresh"); 
```

But it did not work. How can I solve?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:30:20.820

看到这个[答案](https://stackoverflow.com/a/10370235/41782)。基本上你使用buttonMarkup。

```
 $('#login').buttonMarkup({ icon: "star" }); 
```

见工作示例[小提琴](http://jsfiddle.net/ati_ozgur/dJY8L/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T19:49:32.297

该`buttonMarkup`方法对我不起作用，但*手动*方法确实有效：

```
$('#login').removeClass('ui-icon-foo').addClass('ui-icon-bar').trigger('refresh'); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-10T14:07:58.590

尝试放置代码以更改图标[`pageshow`](http://jquerymobile.com/demos/1.1.0/docs/api/events.html) `event`

```
 $('#page2').bind('pageshow', function () {
        $('#login').data('icon', 'user_highlight');
        try {
            $('#login').button("refresh");
        } catch (e) {
            $('#login').button();
        }
    }); 
```

# html5boilerplate - Build script not working with HTML5Boilerplate new download

> ID：11403327
> 
> 赞同：1
> 
> 时间：2012-07-09T21:19:17.670
> 
> 标签：html5boilerplate

My first problem was that, though the documentation warned the JDK was required, and though I set the bin directory to that of the JDK, tools.jar was being searched for in the JRE folder. This made no sense, but I copied the tools.jar file over and it got past that problem. The next problem I had was the build script failing due to a failure to find a main.css file. I'm on a Windows 7 machine, and this is what I did to attempt the build:

1.  Downloaded WinAnt v7 and installed it, specifying the jdk1.7.0_04/bin folder when asked for a Java directory.
2.  Downloaded and unpacked a brand new package from HTML5Boilerplate, keeping the extra comments and such.
3.  Downloaded the build project, unpacked it, and dropped its contents into a build folder at the root of the HTML5Boilerplate folder.
4.  Opened a command prompt, navigated to the build directory, and ran the ant command.

The only thing I could think of that was causing the JDK/JRE problem was that this is a 64-bit system. That's just a guess, but the copied file worked OK for now.

This process performs some of the work without complaint, creating intermediate and publish directories, but then fails out, saying that it can't find a main.css file to copy. I want to stress that I didn't make any modifications at all to the files, so I'm confused as to why the build script can't find a file I didn't remove or rename. In the config/default.properties file of the build folder, on lines 74 and 80, it hard-codes main.js and main.css as file names used. I'm not sure if those are supposed to be dynamically generated, or if they must be manually created and included in the project for the build script to run. If so, why doesn't the default structure downloaded from the website have them? If they're dynamically created, I need advice on what is going wrong.

I'd really like to get this up and running so I can get started using HTML5Boilerplate, but I'm a little lost here.

-edit

After renaming the styles.css file to main.css, the build completed correctly, but the resulting files aren't correct. I read that the script would update the html file references to css and javascript files, but it didn't. For instance, I ended up with e68668b.css after the script ran, but the html file still referenced styles.css. Same for the javascript file. Help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:50:54.217

我发现了问题。构建脚本现在是一个单独的项目，我从 github 下载。我从 HTML5Boilerplate 网站下载了 HTML5Boilerplate zip 文件，不幸的是它仍然具有旧的文件夹结构。我去了 github 并在那里下载了 HTML5Boilerplate 模板，这有所作为。

[HTML5Boilerplate网站的链接指向github的3.0.2版本](http://github.com/h5bp/html5-boilerplate/zipball/v3.0.2)

[github 的链接指向版本 3.0.2-69](https://github.com/h5bp/html5-boilerplate/)

这就是她写的全部内容。在这两个版本之间，一些文件的名称以及一些文件夹结构发生了变化，并且我下载的构建脚本引用了最新的结构。

# servlets - 阅读后丢失 HttpServletRequest 部分

> ID：11403332
> 
> 赞同：0
> 
> 时间：2012-07-09T21:19:31.733
> 
> 标签：servlets, java-ee-6, httprequest, multipartform-data

我有一个接收上传文件的 servlet。我们一直遇到某个客户的请求没有附加文件或 servlet 认为的问题。上传 servlet 是旧 servlet 的替代品，我们使用 Apache Commons FileUpload 库从请求中解析文件。旧代码使用 JavaZoom 库。我们遇到问题的请求客户端在旧代码中工作得很好。

为了解决问题，我添加了一堆日志记录来查看请求标头和部分，以比较来自客户端的请求与不兼容的客户端的请求。这是我如何看待这些部分的片段：

```
Collection<Part> parts = request.getParts();

for(Part part : parts)                
{
    String partName = part.getName();

    log.debug("Part=" + partName);

    Collection<String> headerNames = part.getHeaderNames();

    for(String headerName : headerNames)
    {
        String headerValue = part.getHeader(headerName);                    
        log.debug(headerName + "=" + headerValue);

        InputStream inputStream = part.getInputStream();                    
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"));
        StringBuilder builder = new StringBuilder();

        try 
        {
            for(String line=bufferedReader.readLine(); line!=null; line=bufferedReader.readLine()) 
            {
                builder.append(line);
                builder.append('\n');
            }
        } 

        catch (IOException ignore) 
        {
            // empty
        }
        finally
        {
            inputStream.reset();
        }

        log.debug("InputStream=" + builder.toString());
    }
} 
```

所有这些代码都可以正常工作，并且我得到了我期望的日志记录。但是，下一段代码没有按预期运行：

```
if (isMultipart)
{
    // Create a factory for disk-based file items
    FileItemFactory factory = new DiskFileItemFactory();

    // Create a new file upload handler
    ServletFileUpload upload = new ServletFileUpload(factory);

    @SuppressWarnings("rawtypes")
    List items = null;

    // Parse the request
    try
    {
        items = upload.parseRequest(request);
        log.debug("items=" + items);
    }
    catch (FileUploadException ex)
    {
        log.warn("Error parsing request", ex);
        response.sendError(HttpServletResponse.SC_BAD_REQUEST, ex.getMessage());
    } 
```

记录时`items`变量为空。如果我注释掉记录请求部分的代码，这段代码就可以工作，并且`items`变量包含上传的文件。

我只能假设从请求中获取/读取部分的行为以某种方式将它们从中删除并且不再可用于进一步处理。是否有某种方法可以读取它们以用于记录目的，并且仍将它们保留在请求中以供进一步处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:01:45.530

这`Collection<Part> parts = request.getParts();`是一个 Sevlet 3.0 API，用于替代`Commons Apache File Upload API`.

您应该只使用这两种方法中的一种。两者都支持处理上传的文件和参数。

[这是使用 Servlet 3.0 上传文件](http://rameshpvk.blogspot.in/2012/06/fileuplod-using-servlet-30.html)的示例

您面临的问题是因为您正在调用此`Collection<Part> parts = request.getParts();` 请求将消耗请求输入流。然后您正在使用 Apache Commons API 再次阅读这些部分。因为已经读取了流，所以您看到没有可用的部分。

**Servlet 3.0 文件上传参考：**

*   [与文件一起发布数据](https://stackoverflow.com/questions/10810490/http-post-with-image-and-data/10811197#10811197)
*   [Servlet 3.0 多部分示例](https://stackoverflow.com/questions/11217611/java-servlet-jsp-image-upload-along-with-form-values/11219548#11219548)
*   [Servlet 3.0 多部分配置](https://stackoverflow.com/questions/7908886/sending-a-image-to-servlet-in-java-how-to-get-the-image-in-servlet/7912603#7912603)

# .net - 支持 HTTPS 的 Httplistener

> ID：11403333
> 
> 赞同：76
> 
> 时间：2012-07-09T21:19:38.260
> 
> 标签：.net, x509certificate, httplistener

关于使 .NET HTTPListener 支持 HTTPS，似乎有很多令人困惑的信息，有时甚至是相互矛盾的信息。我的理解如下：

*   一个人的 C# 代码需要一个`https`前缀（例如，`https://*:8443`），以便侦听器了解它需要在此端口上服务 SSL 请求。

*   实际的 SSL 握手发生在幕后，并由`http.sys`（埋在 Windows 机器上的某个地方）处理。C# 代码不必显式管理 SSL 握手，因为它发生在幕后。

*   需要在机器上拥有“X.509 受信任证书” `httpListener`，并且该证书需要以某种方式绑定到端口 8443（在此示例中）。

我上面的理解正确吗？如果没有，请教育我。

关于 X.509 证书，我的理解是：

*   用于`makecert`创建 X.509 证书。此证书存储在个人存储中，需要转移到受信任的存储（这是 HTTP 侦听器将查看的位置）。看来我可以`certMgr`用来执行移动，或者我可以`mmc`用来实现移动。似乎有不止一种 X.509 证书格式（`DER`, `Base64`, `pks`, pswd protected, `pks`private 等）...有我应该使用的首选格式吗？

将证书放入可信存储后，我需要将其绑定到 TCP 端口。我在 Windows 7 上：我应该使用`httpcfg`还是`netsh`？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-12T17:55:07.233

我做了一堆功课并得到了这个工作。为 .NET HttpListener 添加 SSL 支持的步骤如下：

1.  更新 C# 应用程序代码以包含`https`前缀。例子：

    ```
    String[] prefixes = { "http://*:8089/","https://*:8443/" }; 
    ```

    从代码方面来说就是这样。

2.  对于证书方面，使用[Windows SDK](https://en.wikipedia.org/wiki/Microsoft_Windows_SDK)命令控制台或 Visual Studio Professional 命令控制台

    *   用于`makecert.exe`创建证书颁发机构。例子：

        ```
        makecert -n "CN=vMargeCA" -r -sv vMargeCA.pvk vMargeCA.cer 
        ```

    *   用于`makecert.exe`创建 SSL 证书

        ```
        makecert -sk vMargeSignedByCA -iv vMargeCA.pvk -n "CN=vMargeSignedByCA" -ic vMargeCA.cer vMargeSignedByCA.cer -sr localmachine -ss My 
        ```

    *   使用 MMC GUI 在 Trusted Authority 存储中安装 CA

    *   使用 MMC GUI 在个人商店中安装 SSL 证书
    *   将证书绑定到`IP address:port`应用程序。例子：

        ```
        netsh http add sslcert ipport=0.0.0.0:8443 certhash=585947f104b5bce53239f02d1c6fed06832f47dc appid={df8c8073-5a4b-4810-b469-5975a9c95230} 
        ```

        certash 是您的 SSL 证书的指纹。您可以使用 mmc 找到它。appid 在 Visual Studio 中找到...通常在 assembly.cs 中，查找 GUID 值。

可能还有其他方法可以完成上述操作，但这对我有用。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-11-24T22:23:34.380

以下是我在 Windows 上设置独立服务器的详细步骤，使用 OpenSSL 为 C#`HTTPListener`应用程序创建自签名证书。它包含大量链接，以防您想做进一步的研究。

1.  通过以下方式在 .NET 中创建独立服务器`HttpListener`：

    ```
    var prefixes = {"http://localhost:8080/app/root", "https://localhost:8443/app/root"};
    var listener = new HttpListener();
    foreach (string s in prefixes)
        listener.Prefixes.Add(s);
    listener.Start(); 
    ```

2.  创建自签名证书：^*

    1.  [`openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365`](https://stackoverflow.com/a/10176685/712526)，它将提示您在命令行上输入每个证书字段的值。对于公用名，输入域名（例如`localhost`）
    2.  [`openssl pkcs12 -inkey bob_key.pem -in bob_cert.cert -export -out bob_pfx.pfx`](https://stackoverflow.com/a/808742/712526), 以便可以在目标机器上使用其密钥导入它。

    ^*有关使用 的替代方法`makecert`，请参阅 Walter 自己的[答案](https://stackoverflow.com/a/11457719/712526)。

3.  打开本地计算机的证书管理器。当您运行时，它会为*当前用户*`certmgr.msc`打开证书管理器，这不是我们想要的。反而：

     *1.  从目标计算机上的管理命令提示符处，运行`mmc`
    2.  按或单击``Ctrl` + `M````File` > `Add/Remove Snap-in``
    3.  选择`Certificates`，然后单击`Add >`
    4.  在出现的对话框中，选择`Computer Account`，然后单击`Next`
    5.  选择`Local Computer`。点击`Finish`，然后`Okay`* 
**   将证书 ( `pfx`) 导入目标计算机上的[Windows 证书存储区](https://stackoverflow.com/a/15673952/712526)

    1.  在`mmc`之前打开的窗口中，向下钻取到``Certificates (Local Computer)` > `Personal``
    2.  右键单击`Personal`，然后单击``All Tasks` -> `Import...``
    3.  在出现的对话框的第二个屏幕中，找到并导入您的证书。您必须将文件类型过滤器更改为`Personal Information Exchange`或`All Files`才能找到它
    4.  在下一个屏幕上，输入您在步骤 2.1 中选择的密码，并密切注意第一个复选框。这决定了您的证书存储的安全程度，以及使用的方便程度
    5.  在最后一个屏幕上，选择`Place all certificates in the following store`。验证它是否显示`Personal`，然后单击`Finish`
    6.  `Trusted Root Certification Authorities`对证书部分重复上述导入过程。*   为您的应用程序创建端口关联。在 Windows Vista 及更高版本上`netsh`，像我一样使用 。（对于 Windows XP 及更早版本，请使用`httpcfg`）

    *   在管理命令行中，键入以下内容以设置[SSL 绑定](https://msdn.microsoft.com/en-us/library/ms733791%28v=vs.110%29.aspx)^*到您的应用程序和相应的端口。 **注意：**这个命令很[容易出错](https://stackoverflow.com/q/779228/712526)，因为（在 PowerShell 中）大括号需要[转义](http://ss64.com/ps/syntax-esc.html)。以下 PowerShell 命令将起作用：

        ```
        netsh http add sslcert ipport=0.0.0.0:8443 `
            certhash=110000000000003ed9cd0c315bbb6dc1c08da5e6 `
            appid=`{00112233-4455-6677-8899-AABBCCDDEEFF`} 
        ```

        对于`cmd.exe`，应改为使用以下内容：

        ```
        netsh http add sslcert ipport=0.0.0.0:8443 certhash=110000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
        ```

        *   该`ipport`参数将导致 SSL 证书绑定到`8443`每个网络接口上的端口；要绑定到特定接口（仅），请选择与该网络接口关联的 IP 地址。
        *   这`certhash`只是证书指纹，已删除空格
        *   这`appid`是存储在应用程序的程序集信息中的 GUID。（旁注：从这个[问题](https://stackoverflow.com/q/2346620/712526)及其答案`netsh`来看，该机制显然是一个COM接口）

        ^(* Microsoft 已将)*SSL 绑定*链接从[这里](https://web.archive.org/web/20161207061833/https://msdn.microsoft.com/en-us/library/ms733791(v=vs.110).aspx)重定向到[那里](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate)。

        *   启动您的网络服务器，一切顺利！* 

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-14T17:48:16.123

我们可以使用 PowerShell 和 C# 导入证书（无需手动步骤）。

详情见：[https ://blog.davidchristiansen.com/2016/09/howto-create-self-signed-certificates-with-powershell/](https://blog.davidchristiansen.com/2016/09/howto-create-self-signed-certificates-with-powershell/)

我正在使用这段代码：

```
/// <summary>
/// Create and install a self-signed certificate for HTTPS use
/// </summary>
private static void CreateInstallCert(int expDate, string password, string issuedBy)
{
    // Create/install certificate
    using (var powerShell = System.Management.Automation.PowerShell.Create())
    {
        var notAfter = DateTime.Now.AddYears(expDate).ToLongDateString();
        var assemPath = Assembly.GetCallingAssembly().Location;
        var fileInfo = new FileInfo(assemPath);
        var saveDir = Path.Combine(fileInfo.Directory.FullName, "CertDir");
        if (!Directory.Exists(saveDir))
        {
            Directory.CreateDirectory(saveDir);
        }

        // This adds certificate to Personal and Intermediate Certification Authority
        var rootAuthorityName = "My-RootAuthority";
        var rootFriendlyName = "My Root Authority";
        var rootAuthorityScript =
            $"$rootAuthority = New-SelfSignedCertificate" +
            $" -DnsName '{rootAuthorityName}'" +
            $" -NotAfter '{notAfter}'" +
            $" -CertStoreLocation cert:\\LocalMachine\\My" +
            $" -FriendlyName '{rootFriendlyName}'" +
            $" -KeyUsage DigitalSignature,CertSign";
        powerShell.AddScript(rootAuthorityScript);

        // Export CRT file
        var rootAuthorityCrtPath = Path.Combine(saveDir, "MyRootAuthority.crt");
        var exportAuthorityCrtScript =
            $"$rootAuthorityPath = 'cert:\\localMachine\\my\\' + $rootAuthority.thumbprint;" +
            $"Export-Certificate" +
            $" -Cert $rootAuthorityPath" +
            $" -FilePath {rootAuthorityCrtPath}";
        powerShell.AddScript(exportAuthorityCrtScript);

        // Export PFX file
        var rootAuthorityPfxPath = Path.Combine(saveDir, "MyRootAuthority.pfx");
        var exportAuthorityPfxScript =
            $"$pwd = ConvertTo-SecureString -String '{password}' -Force -AsPlainText;" +
            $"Export-PfxCertificate" +
            $" -Cert $rootAuthorityPath" +
            $" -FilePath '{rootAuthorityPfxPath}'" +
            $" -Password $pwd";
        powerShell.AddScript(exportAuthorityPfxScript);

        // Create the self-signed certificate, signed using the above certificate
        var gatewayAuthorityName = "My-Service";
        var gatewayFriendlyName = "My Service";
        var gatewayAuthorityScript =
            $"$rootcert = ( Get-ChildItem -Path $rootAuthorityPath );" +
            $"$gatewayCert = New-SelfSignedCertificate" +
            $" -DnsName '{gatewayAuthorityName}'" +
            $" -NotAfter '{notAfter}'" +
            $" -certstorelocation cert:\\localmachine\\my" +
            $" -Signer $rootcert" +
            $" -FriendlyName '{gatewayFriendlyName}'" +
            $" -KeyUsage KeyEncipherment,DigitalSignature";
        powerShell.AddScript(gatewayAuthorityScript);

        // Export new certificate public key as a CRT file
        var myGatewayCrtPath = Path.Combine(saveDir, "MyGatewayAuthority.crt");
        var exportCrtScript =
            $"$gatewayCertPath = 'cert:\\localMachine\\my\\' + $gatewayCert.thumbprint;" +
            $"Export-Certificate" +
            $" -Cert $gatewayCertPath" +
            $" -FilePath {myGatewayCrtPath}";
        powerShell.AddScript(exportCrtScript);

        // Export the new certificate as a PFX file
        var myGatewayPfxPath = Path.Combine(saveDir, "MyGatewayAuthority.pfx");
        var exportPfxScript =
            $"Export-PfxCertificate" +
            $" -Cert $gatewayCertPath" +
            $" -FilePath {myGatewayPfxPath}" +
            $" -Password $pwd"; // Use the previous password
        powerShell.AddScript(exportPfxScript);

        powerShell.Invoke();
    }
} 
```

需要 PowerShell 4 或更高版本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-17T12:34:01.197

以下命令为 localhost 生成 10 年的自签名证书，将其导入本地计算机存储并在输出中显示 Thumbprint (certhash)：

```
powershell -Command "New-SelfSignedCertificate -DnsName localhost -CertStoreLocation cert:\LocalMachine\My -NotAfter (Get-Date).AddYears(10)" 
```

然后您可以从输出中复制指纹并使用 netsh.exe 将证书附加到 localhost:443，例如：

```
netsh http add sslcert ipport=localhost:443 certhash=110000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

适用于 Windows 8 或更高版本。需要管理员权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-27T20:39:06.763

由于在答案中制作您自己的自签名证书对我不起作用，并且问题特别要求使 .NET HTTPListener 能够支持 HTTPS 并要求提供任何提示/建议，因此我想分享我的方法。

您需要一个主机名，例如 www.made-up.com，它需要指向您的 WAN IP 地址（例如，向您的主机提供商索取说明）并将其端口（例如 443）转发到您的本地计算机。不要忘记在本地计算机的防火墙中打开入站 443 端口。

我使用[了 https://letsencrypt.org/](https://letsencrypt.org/)。在 Windows 上，这不像在 Linux 上那么容易，因为没有任何官方的 certbot ACME 客户端用于 Windows。但是，您可以使用[https://github.com/Lone-Coder/letsencrypt-win-simple](https://github.com/Lone-Coder/letsencrypt-win-simple)，其中也有二进制文件。但是“当前仅支持 IIS”。但是您可以轻松地欺骗它在您的计算机上创建一个证书，以便您可以通过 SSL 方式访问您的 HTTP 侦听器：

1.  安装 IIS（通过打开/关闭的 Windows 功能），在 IIS 中创建一个网站并分配主机名。还要为它建立一个安全的（443 端口）网站。
2.  运行letsencrypt-win-simple EXE 文件（我使用的是1.9.1 版）。回答问题，让它生成证书。
3.  之后，您可以停止 de IIS 服务器。

我相信您必须注意生成的刷新任务，因为我不确定几个月后它会成功（您可能必须再次启动 IIS 才能更新证书）。*

# apache - 如何以这种方式配置.htaccess？

> ID：11403339
> 
> 赞同：1
> 
> 时间：2012-07-09T21:20:10.237
> 
> 标签：apache, .htaccess, subdomain, wildcard-subdomain

我已成功安装通配符。我设法让动态子域使用一个简单的技巧。

.ht 访问：

```
Options +FollowSymLinks
        RewriteEngine On
        RewriteBase /

        # *.example.com
        RewriteCond &#37;{HTTP_HOST} !^www\.example\.com$ [NC]
        RewriteCond %{HTTP_HOST} ^([a-zA-Z0-9]+)\.example\.com$ [NC]
        RewriteCond %{REQUEST_URI} !^/?subdomain\.php$
        RewriteRule .? subdomain.php?subdomain=%1&path=%{REQUEST_URI} [L,QSA] 
```

目前在something.example.com 中显示了subdomain.php 的输出，很棒。

但我想让它工作，因为我可以输入

> pre102.example.com/folder/anotherfolder/script.php?param=1

并显示输出

> example.com/folder/anotherfolder/script.php?param=1&pre=102

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:22:34.220

```
RewriteCond %{QUERY_STRING} !pre=[0-9]
RewriteCond %{HTTP_HOST} ^pre([0-9]+)\.example\.com$ [NC]
RewriteRule ^(.*)$ /$1?pre=%1 [L,QSA] 
```

# c# - Asp.net website very slow because of roles checkin on every page

> ID：11403341
> 
> 赞同：2
> 
> 时间：2012-07-09T21:20:11.887
> 
> 标签：c#, asp.net, roles

I have roles on my ASP.NET application. I have figure the problem (I think). The problem every page in the applications uses role and permission. Therefore it uses the following function in page load

if (Roles.IsUserInRole("Admin")) { // display the page } else { // No }

I found a solution to my problem from this question [Poor Performance with WindowsTokenRoleProvider](https://stackoverflow.com/questions/1929073/poor-performance-with-windowstokenroleprovider/1929290#comment15032329_1929290)

But there are a couple of differences 1\. The above question uses **WindowsTokenRoleProvider**, I am using **SqlRoleProvider**

Because of the above problem, the above solution does not exactly work for me.

What I have done so far, and I am partially successful, I have derived a class from SqlRoleProvider and include this function which is the same from above question but modified. I changed web.config so that it looks like this

```
<roleManager enabled="true" cacheRolesInCookie="true" cookieName=".ASPR0L3S" cookieTimeout="117" cookieSlidingExpiration="true" cookieProtection="All" createPersistentCookie="false" defaultProvider="CustomSqlRoleProvider">
            <providers>
                <add name="CustomizedRoleProvider" type="CustomSqlRoleProvider" connectionStringName="PEGConn" applicationName="/CRM"/>
            </providers>
        </roleManager> 
```

This is the function inside my class, which does get (executed only when a user login)

```
public override string[] GetRolesForUser(string username)
    {
        // Will contain the list of roles that the user is a member of
        List<string> roles = null;

        // Create unique cache key for the user
        string key = String.Concat(username, ":", base.ApplicationName);

        // Get cache for current session
        Cache cache = HttpContext.Current.Cache;

        // Obtain cached roles for the user
        if (cache[key] != null)
        {
            roles = new List<string>(cache[key] as string[]);
        }

        // Was the list of roles for the user in the cache?

        if (roles == null)
        {
            string[] AllRoles = GetAllRoles();
            roles = new List<string>();

            // For each system role, determine if the user is a member of that role
            foreach (String role in AllRoles)
            {
                if (base.IsUserInRole(username, role))
                {
                    roles.Add(role);
                }
            }

            // Cache the roles for 1 hour
            cache.Insert(key, roles.ToArray(), null, DateTime.Now.AddHours(1), Cache.NoSlidingExpiration);
        }

        // Return list of roles for the user
        return roles.ToArray();
    } 
```

The problem is when Roles.IsUserInRole function calls the same old

> System.Web.Security.Roles.IsUserInRole

function. I have even overloaded this function in my new class but it never gets executed. I am basically caching all the roles so that on each page refresh the application does not go search for all roles right from the start.

Do I need to derive another class from `System.Web.Security.Roles.IsUserInRole`? Has anyone done it.

Each page takes about 4-8 seconds on fresh which is too long. Code is in VS 2008, C# 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:04:26.620

我认为这也可能隐藏了您的应用程序设计的一个基本问题。您应该遵守 DRY 原则。不要重复自己，即不要在每一页上重复相同的查找/代码。我建议使用会话变量，以便您可以“缓存”这些昂贵的角色查找。这是使用会话变量的快速指南：

[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

旁注。我看到您正在使用 cookie 来存储您的这些“角色”。这听起来不太安全，因此我假设安全性不是本练习的主要目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:10:23.810

如果 Roles.IsUserInRole("Admin") 需要时间，您可以检查一次用户的角色（登录时）并将值保存为会话对象。

```
const string IS_ADMIN_KEY; //this can be on a base class of page / master page

Session[IS_ADMIN_KEY] = Roles.IsUserInRole("Admin"); // do this when logging in

//Add this to page load
bool isAdmin = Session[IS_ADMIN_KEY]; 
if(isAdmin)) 
{ 
   // display the page 
} else 
{ 
   // don't display the page 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T13:51:43.907

1.  我建议你利用 GetRolesForUser 的基类实现，而不是重复调用 IsUserInRole，它会在每次调用时访问数据库

    ```
    public override string[] GetRolesForUser(string username)
    {
        // Create unique cache key for the user
        string key = String.Concat(username, ":", base.ApplicationName);

        string[] roles = HttpRuntime.Cache[key] as string[];

        if (roles != null)
        {
            roles = base.GetRolesForUser(username);

            HttpRuntine.Cache.Insert(key, roles.ToArray(), ...);
        }

    } 
    ```

2.  我还会考虑使用滑动到期，其值可以配置并默认为大约 30 分钟 - 类似于默认的 RoleManagerSection.CookieTimeout）。这可能是您绝对到期 1 小时的补充。

3.  最后，您应该重写 IsUserInRole 以使用您的缓存。它可以按如下方式实现：

    ```
    public override bool IsUserInRole(string username, string roleName)
    {
        // Case-insensitive comparison for compatibility with RolePrincipal class
        return thisGetRolesForUser(username).Contains(roleName, 
                            StringComparer.OrdinalIgnoreCase);
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:53:01.393

By default there are a couple of providers added to your application besides those your specify. Removing them from the list of providers could certainly help out your performance, as you'll only be using the provider(s) that you want.

```
<system.web>
  <membership defaultProvider="MyMembershipProvider">
    <providers>
      <clear />
      <add name="MyMembershipProvider" type="MyMembershipProvider" applicationName="My App" />
    </providers>
  </membership>
  <roleManager defaultProvider="MyRoleProvider" enabled="true" cacheRolesInCookie="true" cookieTimeout="60">
    <providers>
      <clear />
      <add name="MyRoleProvider" type="MyRoleProvider" applicationName="My App" />
    </providers>
  </roleManager>
</system.web> 
```

Also it is my understanding if you want to cache the results in a cookie you don't need to implement anything extra in your provider. The setting of the cacheRolesInCookie attribute to True directs .NET to handle the caching for you. As long as you are calling into the role provider using the System.Web.Security.Roles, .NET will handle the caching and putting the roles in the cookie.

I would try:

```
<system.web>
  <roleManager enabled="true" cacheRolesInCookie="true" cookieName=".ASPR0L3S" cookieTimeout="117" cookieSlidingExpiration="true" cookieProtection="All" createPersistentCookie="false" defaultProvider="SqlRoleProvider">
    <providers>
      <clear />
      <add name="SqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="PEGConn" applicationName="/CRM"/>
    </providers>
  </roleManager>
</system.web> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T22:37:13.450

首先，你做错了。您不应该在 Page_Load 中放置任何与此相关的内容。如果您的角色是静态的，您应该使用授权密钥 web.config，如果它们是动态的，您应该在 global.asax Application_AuthorizeRequest 事件中执行此操作。

这将使页面生命周期更进一步，使其更安全且资源浪费更少。

其次，您需要调查缓慢的原因。您可以通过在 cookie 中缓存角色来解决它（JG 提到了如何做到这一点），但实际上，请查看数据库本身。角色查找不应该花费很长时间。执行支持角色查找的存储过程（它们在数据库中）并查看执行速度是否缓慢。

# javascript - 磁性随机？

> ID：11403343
> 
> 赞同：1
> 
> 时间：2012-07-09T21:20:13.173
> 
> 标签：javascript

我已经着手制作一个谜题，我正在尝试在 javascript 中制作一个随机播放函数。当我单击文档时，这些片段会按应有的顺序随机播放。但是当紫色方块移动到网格中的#1 位置时，它不会移动！

这是我的 HTML/Javascript：

```
<head>
<link rel="stylesheet" type="text/css" href="css/css.css" />
</head>

<div id="poster">

    <div id="row1">
        <div>
            <img src="images/black.gif" alt="" id="poster_place_1"/>
        </div>

        <div>
            <img src="images/blue.gif" alt="" id="poster_place_2" />
        </div>

        <div>
            <img src="images/brown.gif" alt="" id="poster_place_3"/>
        </div>
    </div>

    <div id="row2">    
        <div>
            <img src="images/cyan.gif" alt="" id="poster_place_4"/>
        </div>

        <div>
            <img src="images/darkgreen.gif" alt="" id="poster_place_5"/>
        </div>

        <div>
            <img src="images/green.gif" alt="" id="poster_place_6"/>
        </div>
    </div>

    <div id="row3">
        <div>
            <img src="images/orange.gif" alt="" id="poster_place_7"/>
        </div>

        <div>
            <img src="images/pink.gif" alt="" id="poster_place_8"/>
        </div>

        <div>
            <img src="images/purple.gif" alt="" id="poster_place_9"/>
        </div>
    </div>

</div>

<script type="text/javascript" charset="utf-8">

function Shuffle(o) {
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};

document.onclick = function()
{
    var testArray = ["poster_place_1","poster_place_2","poster_place_3","poster_place_4","poster_place_5","poster_place_6","poster_place_7","poster_place_8","poster_place_9"];
    Shuffle(testArray);
    document.getElementById("poster_place_9").id = testArray[0];
    document.getElementById("poster_place_8").id = testArray[1];
    document.getElementById("poster_place_7").id = testArray[2];
    document.getElementById("poster_place_6").id = testArray[3];
    document.getElementById("poster_place_5").id = testArray[4];
    document.getElementById("poster_place_4").id = testArray[5];
    document.getElementById("poster_place_3").id = testArray[6];
    document.getElementById("poster_place_2").id = testArray[7];
    document.getElementById("poster_place_1").id = testArray[8];

}
</script> 
```

这是CSS：

```
#poster_place_1 {
    position: absolute;
    left: 0px;
    top: 0px;
}

#poster_place_2 {
    position: absolute;
    left: 167px;
    top: 0px;
}

#poster_place_3 {
    position: absolute;
    left: 334px;
    top: 0px;
}

#poster_place_4 {
    position: absolute;
    left: 0px;
    top: 167px;
}

#poster_place_5 {
    position: absolute;
    left: 167px;
    top: 167px;
}

#poster_place_6 {
    position: absolute;
    left: 334px;
    top: 167px;
}

#poster_place_7 {
    position: absolute;
    left: 0px;
    top: 334px;
}

#poster_place_8 {
    position: absolute;
    left: 167px;
    top: 334px;
}

#poster_place_9 {
    position: absolute;
    left: 334px;
    top: 334px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:49:19.423

您正在使用元素 id 来存储图像的位置；但是，该 id 在 HTML 中必须是唯一的。重新分配 id 时，发生的情况是暂时存在同时重复的 id。例如，如果`testArray[0]`是poster_place_1，则在此行之后

```
document.getElementById("poster_place_9").id = testArray[0]; 
```

HTML中有两个poster_place_1。getter 似乎采用了它找到的第一个，并且由于 Purple 是 HTML 中的最底部，因此当它恰好是一系列`getElementById`调用中的最后一个时（即在位置“poster_place_1”，左上角） ，它永远不会被替换角），因为上面有另一种颜色，它上面有 poster_place_1，或者它已经在那个位置。

我可以建议两个更改，首先，为位置重新分配设置临时 id，这不会导致重复，然后在分配所有新位置后，再次将它们更改为正确的 id。我[**在这个演示中这样**](http://jsfiddle.net/Qebrr/2/)做。因为我没有你的图片，所以颜色被替换为 51-59 之间的数字。临时名称只是数字。

或者，您可以重构代码并使用它`class`来存储位置和`id`颜色名称。然后您将不需要临时变量，因为您直接将 id 与类匹配。在重新分配课程时，我必须警告您跨浏览器的混淆。我发现一些方法推荐`className`，其他方法添加和删除类（这对我来说似乎过于复杂）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:56:55.983

```
....id = testArray[0];
document.getElementById("poster_place_8")... 
```

您在为元素分配新 ID 后选择元素。那怎么能行？您首先需要获取所有元素，然后分配所有新 ID：

```
var ids = [];
var els = [];
for (var i=1; i<10; i++) {
    var id = "poster_place_"+i;
    ids.push(id);
    els.push(document.getElementById(id));
}
shuffle(ids); // the function should be named lowercase, btw
for (var i=0; i<els.length; i++)
    els[i].id = ids[i]; 
```

# css - CSS3 target first paragraph inside a few container elements without using "of-type"

> ID：11403344
> 
> 赞同：0
> 
> 时间：2012-07-09T21:20:15.140
> 
> 标签：css, css-selectors

How can i style the first letter of the first paragraph in this code, without using ":nth-of-type" pseudo selectors?

```
<div id="content-wrapper">
<div id="breadcrumbs">
<ul>
<li><a href="">Link</a></li>
</ul>
</div>
<article>
<section>
<h2>Page Name</h2>
<h3>Title</h3>
<p>Here, i'd like to style the first letter here</p>
</section>
</article>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:09:56.743

如果您尝试支持旧版本的 IE，恐怕您将不得不将第一个字母包装在`<span>`标签中并以这种方式设置样式。

```
<p><span class="letter">H</span>ere, i'd like to style the first letter here</p> 
```

或者，如果您的内容是动态的，您可以使用 jQuery 将第一个字母包装在 a`<span>`中，然后应用样式。

```
text = $('p').html();
first = $('<span>'+text.charAt(0)+'</span>').addClass('letter');
$('p').html(text.substring(1)).prepend(first); 
```

希望这可以帮助。

# pentaho - How to change a Pentaho report's JNDI at runtime?

> ID：11403346
> 
> 赞同：1
> 
> 时间：2012-07-09T21:20:34.737
> 
> 标签：pentaho

I have a lot of Pentaho reports that were built in Pentaho Report Designer 3.8 and use JDBC. I would like to set the data source's JNDI at runtime. I tried accomplishing this using an Action Sequence (without SQLLookupRule) but the report keeps using the JNDI stored within the report.

Is there a way to do this? I am really trying to avoid moving the SQL for every report into an xaction.

# sockets - 套接字发送到抛出 Errno-101

> ID：11403348
> 
> 赞同：2
> 
> 时间：2012-07-09T21:20:50.017
> 
> 标签：sockets

运行此程序后，它正在抛出 Errno-101。我只是想使用 DGRAM Socket 发送一个广播数据包。仅此而已。有人可以帮助我理解这段代码中的错误吗？

```
 //###########ALGORITHM FOR CHECKSUM CALCULATION################################
unsigned short csum(unsigned short*buf,int nwords) {
   unsigned long sum;
  for(sum=0; nwords>0;nwords--)
      sum += *buf++;
   sum = (sum >> 16) + (sum &0xffff);
   sum += (sum >>16);
   return (unsigned short) (~sum);
 }
//##############################################################################

int main() {

//######################### Variable Declarataions#################################
int optval,optlen,opt_broadcast = 1,one=1;
const int* val = &one;
int sockfd,bytes_read,bytes_send,addr_len,n,i,j,dhcp_msg_type,fn_return = -5,z=0,temp;
unsigned char txmsg[1024],buffer[10],original[1024];
unsigned char* rxmsg;
socklen_t abc;
char str[50];

struct sockaddr_in server_addr,client_addr,recv_addr;
struct iphdr *iph,*iph_trans;struct udphdr *udph,*udph_trans;

BOOTP *dhcp_ptr;
//##########################################################################################

//######################Original Implementation#############################################
if((sockfd = socket(PF_INET,SOCK_RAW,IPPROTO_UDP)) < 0) {
perror("Error in Socket Creation \n");
exit(1);
}

fn_return = setsockopt(sockfd,SOL_SOCKET,SO_BROADCAST,&opt_broadcast,sizeof(opt_broadcast));
optval = 1;
setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof optval);
if(setsockopt(sockfd,IPPROTO_IP,IP_HDRINCL,val,sizeof(one)) < 0) {
  perror("Socket() Error \n");
  }

client_addr.sin_family=AF_INET;
client_addr.sin_port=htons(68);
client_addr.sin_addr.s_addr=INADDR_BROADCAST;
bzero(&(client_addr.sin_zero),8);
addr_len = sizeof(client_addr);

bzero(txmsg,sizeof(txmsg));

//####################Packet Receiving#####################################################
while(1) {

bytes_read = recvfrom(sockfd, original,4096,0,(struct sockaddr*)&recv_addr, &addr_len);

printf("\n\n******************STARTING HERE***************\n");
printf("No:of Bytes Read are %d \n",bytes_read);
/*for(i=0;i<=bytes_read;i++) {
printf("%d-%x:",i,rxmsg[i]);
} */

iph = (struct iphdr*)original;
udph = (struct udphdr*)(original + (4*(iph->ihl)));

//printf("The Value of iph is %p \n",iph);
//printf("The Value of udph is %p \n",udph);
printf("The Value in UDP Header Source Port  was %d \n",ntohs(udph->source));
printf("The Value in UDP Header Destination Port  was %d \n",ntohs(udph->dest));

iph_trans = (struct iphdr*)txmsg;
//udph_trans = (struct udphdr*)(txmsg + sizeof(struct iphdr));
udph_trans = (struct udphdr*)(txmsg + (4*(iph->ihl)));
dhcp_ptr = (BOOTP *)(txmsg + sizeof(struct iphdr) + sizeof(struct udphdr));

//Filling the IP Header & UDP Header
iph_trans->ihl=5;
iph_trans->version=4; 
iph_trans->tos=16;
iph_trans->tot_len=sizeof(struct iphdr) + sizeof(struct udphdr);
iph_trans->id=htons(54321);
//iph_trans->frag_off = ;
iph_trans->ttl=64;
iph_trans->protocol=17;
iph_trans->saddr=inet_addr("192.168.117.129");
iph_trans->daddr=client_addr.sin_addr.s_addr;

udph_trans->source=htons(67);
udph_trans->dest=htons(68);
udph_trans->len=htons(sizeof(struct udphdr));
//udph_trans->check=0;
//htons(csum((unsigned short*)dhcp_ptr,sizeof(struct iphdr)+sizeof(struct udphdr)));

if(ntohs(udph->dest) == 67) {

rxmsg = original+28;

if(rxmsg[240] == 53 && rxmsg[242] == 1) {
printf("DHCP DISCOVER Packet was received....\n");

//printf("The Value of txmsg was %p \n",txmsg);
//printf("The Value of iph is %p \n",iph_trans);
//printf("The Value of udph is %p \n",udph_trans);
//printf("The Value of dhcp_ptr is %p \n",dhcp_ptr);

dhcp_ptr->op = 2;
dhcp_ptr->htype = 1; 
dhcp_ptr->hlen = 6;
dhcp_ptr->hops = 2;
dhcp_ptr->xid[0] = (unsigned char)rxmsg[4];
dhcp_ptr->xid[1] = (unsigned char)rxmsg[5];
dhcp_ptr->xid[2] = (unsigned char)rxmsg[6];
dhcp_ptr->xid[3] = (unsigned char)rxmsg[7];
dhcp_ptr->secs = 0; 
dhcp_ptr->flags= 0;
inet_pton(AF_INET,"0.0.0.0",&(dhcp_ptr->ciaddr.s_addr));
inet_pton(AF_INET,"8.5.5.5",&(dhcp_ptr->yiaddr.s_addr));
inet_pton(AF_INET,"192.168.117.129",&(dhcp_ptr->siaddr.s_addr));
inet_pton(AF_INET,"0.0.0.0",&(dhcp_ptr->giaddr.s_addr));
dhcp_ptr->chaddr[0]=(unsigned char)rxmsg[28];
dhcp_ptr->chaddr[1]=(unsigned char)rxmsg[29];
dhcp_ptr->chaddr[2]=(unsigned char)rxmsg[30];
dhcp_ptr->chaddr[3]=(unsigned char)rxmsg[31];
dhcp_ptr->chaddr[4]=(unsigned char)rxmsg[32];
dhcp_ptr->chaddr[5]=(unsigned char)rxmsg[33];
for(i=6;i<=15;i++){dhcp_ptr->chaddr[i]=0;}
strcpy(dhcp_ptr->sname,"Test_DHCP_SERVER\0"); /* 40: Server name */
strcpy(dhcp_ptr->file,"bc.txt\0"); /* 104: Boot filename */
dhcp_ptr->magic_cookie[0] = 99; 
dhcp_ptr->magic_cookie[1] = 130;
dhcp_ptr->magic_cookie[2] = 83;
dhcp_ptr->magic_cookie[3] = 99;

dhcp_ptr->options[0]=53;
dhcp_ptr->options[1]=1 ;
dhcp_ptr->options[2]=2;

dhcp_ptr->options[3]=54;
dhcp_ptr->options[4]=4;
dhcp_ptr->options[5]= 0xc0;
dhcp_ptr->options[6]= 0xa8;
dhcp_ptr->options[7]= 0x38;
dhcp_ptr->options[8]= 0x65;

dhcp_ptr->options[9]=1;
dhcp_ptr->options[10]=4;
dhcp_ptr->options[11]= 0xff;
dhcp_ptr->options[12]= 0xff;
dhcp_ptr->options[13]= 0x00;
dhcp_ptr->options[14]= 0x00;

//Address Lease Time
dhcp_ptr->options[15]=51;
dhcp_ptr->options[16]=4;
dhcp_ptr->options[17]=0x00;
dhcp_ptr->options[18]=0x00;
dhcp_ptr->options[19]=0x0e;
dhcp_ptr->options[20]=0x10;

//END OPTION
dhcp_ptr->options[21]=0xff;

//PADDING
for(i=22;i<=298;i++) {
dhcp_ptr->options[i] = 0;
}
}

else {
printf("DHCP Request Packet was Recieved...\n");

dhcp_ptr->op = 2;
dhcp_ptr->htype = 1; 
dhcp_ptr->hlen = 6;
dhcp_ptr->hops = 2;
dhcp_ptr->xid[0] = (unsigned char)rxmsg[4];
dhcp_ptr->xid[1] = (unsigned char)rxmsg[5];
dhcp_ptr->xid[2] = (unsigned char)rxmsg[6];
dhcp_ptr->xid[3] = (unsigned char)rxmsg[7];
dhcp_ptr->secs = 0; 
dhcp_ptr->flags= 0;
inet_pton(AF_INET,"0.0.0.0",&(dhcp_ptr->ciaddr.s_addr));
inet_pton(AF_INET,"8.5.5.5",&(dhcp_ptr->yiaddr.s_addr));
inet_pton(AF_INET,"0.0.0.0",&(dhcp_ptr->siaddr.s_addr));
inet_pton(AF_INET,"0.0.0.0",&(dhcp_ptr->giaddr.s_addr));
dhcp_ptr->chaddr[0]=(unsigned char)rxmsg[28];
dhcp_ptr->chaddr[1]=(unsigned char)rxmsg[29];
dhcp_ptr->chaddr[2]=(unsigned char)rxmsg[30];
dhcp_ptr->chaddr[3]=(unsigned char)rxmsg[31];
dhcp_ptr->chaddr[4]=(unsigned char)rxmsg[32];
dhcp_ptr->chaddr[5]=(unsigned char)rxmsg[33];
for(i=6;i<=15;i++){dhcp_ptr->chaddr[i]=0;}
strcpy(dhcp_ptr->sname,"Test_DHCP_SERVER\0"); /* 40: Server name */
strcpy(dhcp_ptr->file,"bc.txt\0"); /* 104: Boot filename */
dhcp_ptr->magic_cookie[0] = 99; 
dhcp_ptr->magic_cookie[1] = 130;
dhcp_ptr->magic_cookie[2] = 83;
dhcp_ptr->magic_cookie[3] = 99;

//DHCP Message Type
dhcp_ptr->options[0]=53;
dhcp_ptr->options[1]=1 ;
dhcp_ptr->options[2]=5;

//DHCP Server Identifier
dhcp_ptr->options[3]=54;
dhcp_ptr->options[4]=4;
dhcp_ptr->options[5]=0xc0;
dhcp_ptr->options[6]=0xa8;
dhcp_ptr->options[7]=0x38;
dhcp_ptr->options[8]=0x65;

//Address Lease Time
dhcp_ptr->options[9]=51;
dhcp_ptr->options[10]=4;
dhcp_ptr->options[11]=0x00;
dhcp_ptr->options[12]=0x00;
dhcp_ptr->options[13]=0x0e;
dhcp_ptr->options[14]=0x10;

// Subnet Mask
dhcp_ptr->options[15]=1;
dhcp_ptr->options[16]=4;
dhcp_ptr->options[17]=0xff;
dhcp_ptr->options[18]=0xff;
dhcp_ptr->options[19]=0x00;
dhcp_ptr->options[20]=0x00;

//END OPTION
dhcp_ptr->options[21]= 0xff;

//PADDING
for(i=22;i<=299;i++) {
dhcp_ptr->options[i] = 0;
}
}

iph_trans->check = htons(csum((unsigned short*)txmsg,sizeof(struct iphdr)+sizeof(struct udphdr)+sizeof(BOOTP)));

// SENDING THE STRUCTURE VIA SENDTO
if(bytes_send=sendto(sockfd,txmsg,1024,0,(struct sockaddr *)&client_addr, sizeof(client_addr)) < 0) {
   printf("Send to ERROR %d\n",errno); }
else {
   printf("Packet Sent \n"); }

}}

close(sockfd);
return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T06:38:01.807

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

最后发现问题不在于代码，而在于默认网关。我没有在我的 PC 上配置默认网关，因此看到了 ERR-101。一旦配置了默认网关，广播包就会出来。对此感到抱歉。– 凯萨瓦

# algorithm - 确定图中的一组节点是否是一个集群

> ID：11403351
> 
> 赞同：-1
> 
> 时间：2012-07-09T21:21:11.253
> 
> 标签：algorithm, graph, set, graph-algorithm

如果我有一个类似网格的图和一组像 [A,B,J,K] 这样的节点。

```
Grid Graph:

A B C D
E F G H
I J K L

Note: diagonals not considered neighbours 
```

检查这些节点是否都相邻并形成集群的最佳方法是什么？

在上面的例子中，[A,B] 是相邻的，[J,K] 是相邻的，但是作为一个整体，这个集合并没有形成一个簇。如果将“F”添加到集合中以形成 [A,B,F,J,K]，那么我会认为它是一个集群。

**更新：**我已经有一个函数来检查两个节点是否相邻 boolean isAdjacent(Node a, Node b)。只需要扩展它来检查集群。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:25:50.783

让您的原始图形成为`G = (V,E)`所需`SET`的节点集 ( `SET <= V`)

创建一个图表`G' = (V',E')`，其中`V' = SET`和`E' = { (u,v) | (u,v) is in E and u,v is in SET }`

如果图表`G'`是连接的，则您有一个包含所有元素的集群。
最大簇是 中的最大连通分量`G'`。

找到最大连通分量可以通过[Flood fill](http://en.wikipedia.org/wiki/Flood_fill)之类的方法来完成。

（**注意**，首先使用带有限制的洪水填充，可以调整图的创建，`G'`而无需实际构建它）。

伪代码，使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)查找集群：

```
int maximalCluster(E,SET): //SET is the set of desired nodes, E is the edges in G.
    roots <- new map<node,interger>
    for each node n in SET: 
       //run a BFS for each root, 
       //and count the total number of elements reachable from it
       queue <- { n } 
       roots.put(n,1)
       while (queue is not empty):
           curr <- queue.takeFirst()
           for each edge (curr,u) in E:
              if (u is in SET):
                  SET.delete(u)
                  queue.add(u)
                  roots.put(roots.get(n) + 1)
    return max { roots.get(v) | for each  v in roots.keys } 
```

虽然上面的伪代码没有生成`G'`，但它通过仅检查其节点在 SET 中的边来模拟它。

# visual-studio-2010 - 放大 WP 应用程序

> ID：11403353
> 
> 赞同：0
> 
> 时间：2012-07-09T21:21:14.003
> 
> 标签：visual-studio-2010, windows-phone-7

我的 WP 应用程序页面上有一张大图。它几乎看不见，所以我想放大这张图片。我必须在我的应用程序中进行哪些更改才能执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:49:19.327

`var scale = new ScaleTransform { ScaleX = 1.5, ScaleY = 1.5 }; imgPhoto.RenderTransform = scale;`

[比例变换](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)

# javascript - 为什么在将函数作为参数传递时必须省略括号？

> ID：11403357
> 
> 赞同：7
> 
> 时间：2012-07-09T21:21:27.190
> 
> 标签：javascript

我试图弄清楚为什么在包含括号时以下代码会导致堆栈溢出，但在省略括号时却不会。

我将函数本身作为 setTimeout 的参数调用，它可以在没有括号的情况下工作，但是当我添加它们时当然会失败。我的直觉是在函数后面加上 ()。只是希望有人可以为我解决这个问题。什么时候参数是可选的而不是？

情况1：

```
var a = 1;

function foo() {
    a++;
    document.write(a);
    setTimeout(foo(), 2000)
}​ 
// RangeError: Maximum call stack size exceeded 
```

案例二：

```
var a = 1;

function foo() {
    a++;
    document.write(a);
    setTimeout(foo, 2000)
}​
// parens are omitted on foo function and it works. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T21:37:35.287

这个问题通常首先参考 被问到`setTimeout`，但我认为重要的是要指出这里的行为并不特定于该函数。您只需要了解括号的作用以及不使用括号的含义。

假设以下函数：

```
function foo() {
    return 5;
} 
```

考虑以下两个变量声明/赋值：

```
var one = foo();
var two = foo; 
```

这些变量有什么值？

在第一种情况下，我们正在执行*函数*`foo`并将其返回值——数字`5`——分配给`one`. 在第二种情况下，我们将自己分配给——`foo`更准确地说，是对 的引用。该函数永远不会执行。`foo``two`

有了这些知识和理解，`setTimeout`它的第一个参数是对函数的*引用*，你的第一个案例失败的原因应该很明显，但第二个案例有效。

当然，您正在执行的函数是对自身的递归调用，这一事实加剧了您的问题。这将永远运行——对于永远的定义——因为没有终止递归的基本情况。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-09T21:23:43.087

通过写作

```
foo() 
```

那时你实际上是在打电话给 foo 。当然，然后再次调用 foo() ......直到你stackoverflow。

在案例 2 中，您有效地将“引用”传递给 foo，说“在 2 秒内运行它”。实际上没有调用 foo()。

因此，当您真正想要调用它时，请使用括号。不是当你想引用它时。

# java - 谷歌应用引擎杀死实例启动

> ID：11403358
> 
> 赞同：0
> 
> 时间：2012-07-09T21:21:33.687
> 
> 标签：java, google-app-engine, google-cloud-datastore

因为几天我的应用程序没有开始。应用程序启动 1 分钟后，它被杀死。这使得它无法为请求处理做好准备。

你知道如何延长这个超时时间吗？

服务器的日志显示应用程序在 61 秒后被终止。下面我使用的是 Spring，并且有一个 bean 类路径探索。我想这就是导致启动缓慢的原因。

我正在努力减少这个时间，但它仍然不应该阻止我的应用程序启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:30:42.947

处理每个请求有 60 秒的最后期限。

您可能会考虑使用[预热请求](https://developers.google.com/appengine/docs/java/config/appconfig#Warmup_Requests)，但您应该真正尝试减少启动时间。大多数应用程序通常需要几秒钟。

我在 App Engine 邮件列表上看到了一些关于如何减少 Java 启动时间的讨论，您可能想在那里进行一些搜索。

# multithreading - 关于渲染循环策略的思考

> ID：11403359
> 
> 赞同：2
> 
> 时间：2012-07-09T21:22:00.093
> 
> 标签：multithreading, synchronization, rendering, game-engine

我知道这些考虑的数百种变体已经发布在整个网络上。但是，我还没有找到任何可以解决我的确切问题的东西，所以我希望你能帮助我看到光明。

我目前正在使用 OpenGL 在 Java 中进行 2D 游戏开发。使用的语言和图形库与我的问题无关，因为它具有更一般的特征。

我正在尝试设计一个通用的游戏循环，它可以或多或少地用于任何具有中等重量图形（主要是位图纹理）和可能更重的游戏逻辑（AI、碰撞检测等）的游戏。

基本上，我希望维护一个可以更新（位置、速度和其他与游戏相关的更新）和渲染（更新位置的纹理/帧）的对象列表/数组/缓冲区，尽可能流畅和高效。

**1）一个线程更新+渲染**

我已经尝试并放弃了仅使用一个线程的顺序解决方案（好吧，计算用户输入时是两个）。

*   计算更改并更新缓冲区对象
*   将更新位置处的纹理渲染到后备缓冲区
*   将后台缓冲区交换到前台

显然，当交换缓冲区阻塞硬件时，浪费了大量的计算时间，这需要更有效的解决方案

**2) 一个线程更新，一个渲染线程**

通过将程序拆分为更新线程和渲染线程并同步访问共享缓冲区，我应该能够确保相当稳定的帧速率。可以通过多种方式实现对共享缓冲区的同步访问，但它们都有一个共同点。它们都禁止线程并发。虽然这可能是一个公平的权衡，但我想知道是什么使同步变得必要。

**3) 同2，但不同步**

我确实了解并发线程的粗心实现可能导致的许多问题。生产者/消费者、读者/作者和类似情况导致潜在的死锁。但是，我不明白如果满足以下条件（并且应该满足），为什么我需要确保共享数据的同步：

*   渲染线程只能从共享缓冲区中读取
*   更新线程可以读取和写入共享缓冲区（因此它是唯一的“写入器”）
*   游戏运行时共享缓冲区永远不会是空的或满的
*   线程永远不会休眠
*   渲染不必是 100% 准确的。如果某些共享对象尚未更新，导致它们比其他对象落后一个更新步骤（即大约 10-20 毫秒），则任何人都不应注意到。

-

那么......我在这里错过了什么明显的事情？为什么我需要此设置的同步？

*   线程是否可以在未正确同步时缓存导致问题的数据？
*   或者如果写入线程在不幸的时间被中断，数据会以某种方式出现乱码吗？
*   或者我提出的策略是否存在任何一般性问题，使其无用？

任何想法、评论或建议都非常受欢迎。或者，如果这个特定问题已经在其他地方得到解决，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:01:49.800

我决定花一点时间对此进行测试，并且由于我从这个站点得到了很多好的答案，我想我会发布这个来完成这个问题。也许其他人会发现这些信息很有用。

我对一个简单的精灵渲染应用程序做了 3 种不同的实现，其中更新和渲染在不同的线程中运行。

1) 没有同步

渲染器以最高 60 FPS 运行。更新程序尽可能快地运行 更新和渲染的精灵存在于两个线程共享的列表中。不存在同步，因此线程只是随意读取和写入数据。

2）共享数据的同步

渲染器以最高 60 FPS 运行。Updater 以与 Renderer 相同的速度运行。要更新和渲染的数据存在于两个线程共享的列表中。该列表是完全同步的。更新程序更新列表中的所有精灵。然后渲染器获得对列表的访问权，并将所有精灵渲染到屏幕上。

3）同步使用双渲染队列

渲染器以最高 60 FPS 运行。Updater 以与 Renderer 相同的速度运行 Updater 更新列表并将精灵发送到 2 渲染队列的被动队列。同时，渲染器渲染活动渲染队列中的精灵。当更新程序将最后一个对象复制到被动渲染队列时，它会尝试交换主动和被动队列。如果渲染器未完成渲染前一个队列，则交换将阻塞。这是唯一的阻塞同步。一旦渲染器完成当前帧，就进行交换，渲染器可以开始渲染新队列，更新器可以开始更新并发送到另一个（现在是被动的）队列。

我对每种方法进行了 3 次测试，其中我计算了每秒执行更新和渲染的次数。

**测试 1：**
精灵的数量足够少，因此渲染器可以全速运行 (60 FPS)
每个精灵的更新逻辑太重，无法让更新器跟上。

**测试 2：**
精灵数量过多，渲染器无法全速运行。
每个精灵的更新逻辑非常简单，所以他们可以跟得上。

**测试 3：**
精灵的数量正好足够让渲染器运行在略低于最大速度的水平。
每个精灵的更新逻辑足够重，以使更新程序运行在略低于渲染器的最大速度。

## 结果

**不同步 - 测试 1：**
渲染器每秒运行 60 次（最大速度）。
更新程序每秒运行 45 次。

**不同步 - 测试 2：**
渲染器每秒运行 24 次。
更新程序每秒运行 1150 次。

**不同步 - 测试 3：**
渲染器每秒运行 58 次。
更新程序每秒运行 51 次。

**同步共享数据 - 测试 1：**
渲染器每秒运行 23 次（最大速度）。
更新程序每秒运行 24 次。

**同步共享数据 - 测试 2：**
渲染器每秒运行 23 次。
更新程序每秒运行 23 次。

**同步共享数据 - 测试 3：**
渲染器每秒运行 17 次。
更新程序每秒运行 17 次。

**同步双队列 - 测试 1：**
渲染器每秒运行 43 次（最大速度）。
更新程序每秒运行 43 次。

**同步双队列 - 测试 2：**
渲染器每秒运行 24 次。
更新程序每秒运行 24 次。

**同步双队列 - 测试 3：**
渲染器每秒运行 54 次。
更新程序每秒运行 54 次。

## 结论

正如您所指出的，Jirka，即使只有一个写入器时不同步的方法看起来无害，它也会产生不必要的副作用，而且它肯定不会保持渲染帧的一致性。

使用双队列渲染比使用一个大型共享精灵列表渲染更快也就不足为奇了。然而，令人惊讶的是，如果考虑到渲染多个帧而不更新，也没有更新多次而不渲染的事实，那么双队列方法的最终结果实际上与非同步方法一样快。

可能还有其他可以说或尝试的事情，但我已经看够了。我永远不会考虑再次对更新/渲染系统使用非同步访问..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:12:52.710

在没有（很多）同步的情况下，可以有一个单独的渲染和更新线程。查看

[http://blog.slapware.eu/game-engine/programming/multithreaded-renderloop-part1/](http://blog.slapware.eu/game-engine/programming/multithreaded-renderloop-part1/)

和

[http://blog.slapware.eu/game-engine/programming/multithreaded-renderloop-part2/](http://blog.slapware.eu/game-engine/programming/multithreaded-renderloop-part2/)

用于解释和实现（源代码 + 二进制文件）。这并不容易，但这正是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:59:11.317

不同步的方法对您来说效果很好；^(如果这是库存的英特尔硬件1)，那就更是如此。我仍然不会使用它。

非同步并发几乎从不可靠工作的原因是处理器可以自由支配何时在主 RAM 和缓存之间进行存储和加载。这可以颠覆几乎所有不同步的协议。但是，正如您所说，如果您的应用程序中的场景从未突然改变，那么没有人可能会注意到；所有数据都将进入 RAM 并迟早对另一个线程可见。

但是，您无法保证何时以及以何种顺序进行，这使您理论上有可能以奇怪的方式混合两个后续帧（场景或其照明的突然变化之前和之后）。

根据您的编程语言及其内存模型（我猜是 C++ 早于 C++11？），您可能会发现轻量级同步原语，其保证副作用是适当的内存屏障，其对性能的影响可以忽略不计。这是我建议的起点。极端性能优化（超出可以证明是安全的）应该是优化引擎的最后阶段。

* * *

¹ ) i86 从不重新订购商店。我认为这在任何地方都没有记录，我不想依赖它。您仍然可以重新排序读取，因此无论如何这对您的场景没有帮助。

# sitecore - OMS 中的 TriggerEvent 不是 DMS

> ID：11403367
> 
> 赞同：0
> 
> 时间：2012-07-09T21:22:53.047
> 
> 标签：sitecore, sitecore6, sitecore-dms

我一直在尝试替换 6.4 的 OMS 中已弃用的方法，即“TriggerEvent”。我现在使用以下代码收到以下错误。在新的 DMS 6.5 中。我不确定什么是正确的新方法。

```
var tracker = Sitecore.Analytics.Tracker.Visitor.CurrentVisit.CurrentPage;
if (tracker != null)
{
    string dataXml = Review_Module.sitecore_modules.Review_module.Classes
         .AnalyticsHelper.FillDataField(new string[]
              {
                 "Title", title, "Description", description, "Rate", rate
              });

    PageEventData eventData = new PageEventData("Review");
    eventData.Data = dataXml;
    VisitorDataSet.PageEventsRow pageEventsRow = Sitecore.Analytics.Tracker.CurrentPage.Register(eventData);
    Sitecore.Analytics.Tracker.Submit(); 
```

错误

```
[PageEventDefinitionNotFoundException: The page event definition Review could not be found.]
   Sitecore.Analytics.Data.DataAccess.DataSets.PagesRow.Register(PageEventData data) +170
   Sitecore.Analytics.Data.DataAccess.DataSets.PagesRow.Register(String name, String text, String dataKey, String data) +127
   ReviewModule.Nicam_Modules.Review_module.Controls.Review.ReviewClicked(Object sender, EventArgs e) +808
   System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +111
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +79
   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +175
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

6.4 OMS 中的工作代码

```
 string dataXml = Review_Module.sitecore_modules.Review_module.Classes.AnalyticsHelper.FillDataField(new string[]
       {
          "Title", title, "Description", description, "Rate", rate
       });
       tracker.CurrentPage.TriggerEvent("Review", "Review: \"" + Sitecore.Context.Item.Name + "\"", string.Empty, dataXml);
       tracker.Submit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:28:59.333

好的，我终于有机会回到这里并更新这篇文章。我能够在 6.5 中使用它。不确定他们是否要更新模块或是否有计划。

首先，我必须删除对 TriggerEvent 方法的调用。同样，AnalyticsTracker 也不再存在。它现在使用 PageEventData 和 Sitecore.Analytics.Tracker.CurrentPage；

```
var tracker = Sitecore.Analytics.AnalyticsTracker.Current;
if (tracker != null)

{

string dataXml = Review_Module.sitecore_modules.Review_module.Classes.AnalyticsHelper.FillDataField(new string[]

{"Title", title, "Description", description, "Rate", rate});

 tracker.CurrentPage.TriggerEvent("Review", "Review: \"" + Sitecore.Context.Item.Name + "\"", string.Empty, dataXml);
 tracker.Submit();

} 
```

并将其替换为：

```
var tracker = Sitecore.Analytics.Tracker.CurrentPage;

if (tracker != null)

{

 string dataXml = Review_Module.sitecore_modules.Review_module.Classes.AnalyticsHelper.FillDataField(new string[]

{
 "Title", title, "Description", description, "Rate", rate
});

 PageEventData eventData = new PageEventData("Review");

 Guid Gu = new Guid();

 eventData.Text = "Review: \"" + Sitecore.Context.Item.Name + "\"";
 eventData.DataKey = String.Empty;
 eventData.Data = dataXml;
 eventData.ItemId = new Guid(Sitecore.Context.Item.ID.ToString());
 Tracker.CurrentPage.Register(eventData);
 Tracker.Submit();
} 
```

此外，必须更新为 UI 公共视图发布的评论的 SQL。

从：

```
 //var sql = @"select {0}PageEvents{1}.Data from {0}PageEvents{1} inner join {0}Pages{1} on {0}PageEvents{1}.PageId = {0}Pages{1}.PageId
 //inner join {0}PageEventDefinitions{1} on {0}PageEventDefinitions{1}.PageEventDefinitionId = {0}PageEvents{1}.PageEventDefinitionId
 //where {0}Page{1}.ItemId = @itemId
 //and {0}PageEventDefinitions{1}.Name = 'Review'"; 
```

到：

```
 var sql = @"select {0}PageEvents{1}.Data from {0}PageEvents{1}
 where {0}PageEvents{1}.ItemId = @itemId
 and {0}PageEvents{1}.[Text] LIKE 'Review:%'"; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:59:10.130

您可以在 SDN 上查看 DMS 的 API。我认为您应该关注两个文档：

*   [参与分析 API 参考指南](http://sdn.sitecore.net/Reference/Sitecore%206/Engagement%20Analytics%20API%20Reference%20Guide.aspx)
*   [参与分析 API 手册](http://sdn.sitecore.net/Reference/Sitecore%206/Engagement%20Analytics%20API%20Cookbook.aspx)

# ios - Youtube 搜索 api 解析问题

> ID：11403368
> 
> 赞同：0
> 
> 时间：2012-07-09T21:22:55.763
> 
> 标签：ios, xml, xcode, rss, youtube

我正在开发 youtube IOS 应用程序。我想得到响应的视频图像。

这是响应部分，

```
"media:thumbnail" =         (
                        {
                "@height" = 360;
                "@time" = "00:00:51.500";
                "@url" = "http://i.ytimg.com/vi/S8OG7dN-66Q/0.jpg";
                "@width" = 480;
            },
                        {
                "@height" = 90;
                "@time" = "00:00:25.750";
                "@url" = "http://i.ytimg.com/vi/S8OG7dN-66Q/1.jpg";
                "@width" = 120;
            },
                        {
                "@height" = 90;
                "@time" = "00:00:51.500";
                "@url" = "http://i.ytimg.com/vi/S8OG7dN-66Q/2.jpg";
                "@width" = 120;
            },
                        {
                "@height" = 90;
                "@time" = "00:01:17.250";
                "@url" = "http://i.ytimg.com/vi/S8OG7dN-66Q/3.jpg";
                "@width" = 120;
            }
        ); 
```

我想获得@url 标签值，但我没有

谢谢

# javascript - 从 $.ajax 移植到 javascript XMLHttpRequest？

> ID：11403369
> 
> 赞同：1
> 
> 时间：2012-07-09T21:22:56.360
> 
> 标签：javascript, jquery, ajax

寻找一些帮助来使用 XMLHttpRequest 将以下内容从 jquery ajax 转换为 javascript？

```
$.ajax({
    url: 'api/dev/blah?id=4F',        
    type: 'GET',
    beforeSend: function(req) {
        req.setRequestHeader("Accept", "application/xml");
    },
    success: function (result) {
        alert('success');
        // Parse xml here...
    },
    error: function() { 
        alert('error');
}
}); 
```

我试过类似的东西，但我看不到提琴手发送的请求，暗示没有响应或错误（不是 xmlhttprequest savvy）：

```
function junk() {
  var request = new XMLHttpRequest();
   request.addEventListener('load', successCallback, false);

   request.open("GET", 'api/dev/blah?id=4F', true);
   request.setRequestHeader("Accept","application/xml");
   request.setRequestHeader("Content-Type", "application/xml");
   request.send();
}

function successCallback(data) {
  alert('success');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:40:20.807

来自[Eloquent JavaScript - 第 14 章](http://eloquentjavascript.net/chapter14.html)：

```
function makeHttpObject() {
  try {return new XMLHttpRequest();}
  catch (error) {}
  try {return new ActiveXObject("Msxml2.XMLHTTP");}
  catch (error) {}
  try {return new ActiveXObject("Microsoft.XMLHTTP");}
  catch (error) {}

  throw new Error("Could not create HTTP request object.");
}

var request = makeHttpObject();
request.open("GET", "api/dev/blah?id=4F", true);
request.setRequestHeader("Accept", "application/xml");
request.setRequestHeader("Content-Type", "application/xml");
request.send(null);
request.onreadystatechange = function() {
    if (request.readyState==4 && request.status==200) {
        console.debug(request.responseText);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:29:50.853

尝试这个

```
 request.onreadystatechange = callBackfunction();
 request.send(null); 
```

......

```
 function callBackfunction()
 {

  if(request.readyState == 4)   
  {
     //alert(request.responseText)
     if(request.status == 200)
      {     
          var xmlDoc = request.responseXML;
      var root = xmlDoc.documentElement;
      var nodesList = root.childNodes; 
      nodeListLen = nodesList.length;

    }// end of if(xmlRequest.status==200)

   } // end of if(xmlRequest.readyState==4)

  } // end of callBackfunction 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:34:29.640

问题是 XHR 没有响应加载事件。它回应`onreadystatechange`：

```
request.onreadystatechange = function(){
    if (request.readyState == 4 && (request.status >= 200 && request.status < 300)) {
        successCallback();
    }
} 
```

# python - 为什么函数不打印列表中值的总和？

> ID：11403372
> 
> 赞同：0
> 
> 时间：2012-07-09T21:23:11.770
> 
> 标签：python, list, function, variables

该程序的目标是让函数“Fib”接收两个值，并将它们放入一个斐波那契数列，在变量“sequence”中添加项。当它通过'check'函数并返回Limit Reached时，它会将偶数添加到列表'final'中，然后循环打印出'final'的总和。

问题是，无论 Fib 采用什么值，'final' 总是以没有值结束。我对编程很陌生，似乎无法弄清楚为什么要这样做......

```
def even(x):
    v = list(str(x))[-1]
    if v == '0' or v == '2' or v == '4' or v == '6' or v == '8':
        return x
    else:
        return 0 
def check(sequence):
    for v in sequence:
        if v >= 20:
            return 'Limit Reached'
        else:
            return None

def Fib(x,y):
    sequence = [x,y]
    a = 0
    b = 1
    final = []
    while len(sequence) < 100:
        term = sequence[a] + sequence[b]
        sequence.append(term)
        if check(sequence) == 'Limit Reached':
            for v in sequence:
                final.apppend(even(v))
            print sum(final)
            break
        a += 1
        b += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:28:40.157

`check``None`如果列表中的第一项小于 20，将始终返回。

你可能的意思是：

```
def check(sequence):
    for v in sequence:
        if v >= 20:
            return 'Limit Reached'
    else:
        return None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:37:18.563

这段代码有很多问题。我会这样写：

```
def even(x):
    # is the modulo operator, it's used to calculate a remainder
    return x % 2 == 0

def check(sequence):
    # you need to check all the values, not just the first one
    return max(sequence) >= 20

def Fib(x, y):
    sequence = [x, y]

    while len(sequence) < 100:
        # it's not necessary to keep a and b around, you can use 
        # negative indices instead
        sequence.append(sequence[-2] + sequence[-1])

        if check(sequence):
            # this is called a "generator comprehension"
            print sum(v for v in sequence if even(v))
            break 
```

仍然可以进一步简化，但是这种结构与您自己的结构相匹配。实际上甚至没有必要保留`sequence`，因为您可以随时保持运行总计，但我认为以这种方式完成它会更有启发性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:28:23.720

你没有返回 final，所以每次调用 Fib() 时它的值都会被清除，因为它是一个局部变量。我确定它会打印出预期的结果，不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:38:38.740

也许你想要更简单的东西：

```
def fib(a, b, iterations = 20):
    result = 0
    if not (a & 1): result += a
    if not (b & 1): result += b
    for x in xrange(iterations):
        nextval = a + b
        if not (nextval & 1):
            result += nextval
        a = b
        b = nextval
    return result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:31:59.000

与大多数语言不同，Python 会在这样的错字上引发运行时错误（而不是根本不编译您的程序）。

```
 final.apppend(even(v)) 
```

没有看到运行时错误表明`if`永远不会满足周围条件，这是因为该`check`方法在检查序列中的第一项后立即返回，而不是检查整个序列。

# c# - 将csv文件导入firebird数据库

> ID：11403377
> 
> 赞同：0
> 
> 时间：2012-07-09T21:23:22.617
> 
> 标签：c#, csv, firebird

我正在编写一个使用 firebird 数据库的 C# 应用程序。我必须用存储在 csv 文件中的数据填充数据库。你能告诉我这样做的简单方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:34:52.157

您可以使用 Filehelpers 导入 CSV 数据，然后使用普通的 ADO.NET 或您喜欢的 ORM 将其推送到 Firebird 数据库中。但我几乎可以肯定 Firebird 本身将有一种直接导入 CSV 数据的方法。尽管如此，谷歌文件助手。它是处理分隔文本的绝佳库。

# visual-c++ - 可重用类 - 使用“抽象”而不是预定义

> ID：11403378
> 
> 赞同：0
> 
> 时间：2012-07-09T21:23:23.593
> 
> 标签：visual-c++, windows-runtime, c++-cx

我正在构建一个应用程序，其中有多个从单个基类继承的类。假设我有这个声明：

```
ref class WorkScreenBase abstract
{
internal:
   WorkScreenBase(void);
   bool isLoaded;
} 
```

我有几个实现它的类，例如：

```
ref class MainScreen : public WorkScreenBase
{
internal:
   MainScreen(void);
   ~MainScreen(void);
} 
```

在应用程序的另一部分，我想为任何潜在的实现提供一个容器`WorkScreenBase`，所以我尝试使用：

```
WorkScreenBase^ myCurrentBase; 
```

但是，这似乎是非法的。解决问题的最佳方法是什么？

**更新：**我可以使用 a `MainScreen^ myCurrentScreen`，但出于灵活性原因，我更愿意使用基类作为参考点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:20:26.890

这个问题以我没想到的方式得到了解决（至少根据抛出的编译器错误）。问题出在头文件交叉引用中。不知何故，无论是标题保护还是.h `#pragma once`，我都得到了一个循环的**.h**引用。

所以，**结论**：

*   编译器可能会抛出可能无法准确描述问题的错误。
*   仔细检查循环引用的标题。头球后卫`#pragma once`很好，但对你没有帮助。

# android - android模拟器不会在窗口中打开

> ID：11403379
> 
> 赞同：0
> 
> 时间：2012-07-09T21:23:24.590
> 
> 标签：android, eclipse, ubuntu, window, emulation

我在 Ubuntu 上运行 Eclipse Indigo，我的 Android 模拟器无法打开。窗口甚至没有出现。

它曾经可以工作，但我更新了一些东西（忘了什么），现在不行了。当控制台感觉可以工作时，它会说模拟器正在启动，但窗口永远不会打开。当我尝试删除 AVD 时，它说它正在模拟器中运行并且无法删除，但仍然没有窗口。

我已经重新安装了 ADT 的 AVD，但仍然没有。谁能帮帮我？我在 ./android 的 Eclipse 之外尝试过它，但它仍然无法打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:53:33.320

我有同样的问题，到目前为止，我发现的唯一解决方法是重新启动我的机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:38:42.947

您可以从 Eclipse 或仅从您的机器打开 AVD 管理器吗？如果可以，您是否看到那里列出了任何模拟器？单击开始时会发生什么？也许您的模拟器已被删除，当您启动 Android 应用程序时，AVD 管理器找不到任何可启动的模拟器。

# iphone - 调用 [super scrollViewDidScroll]; 关于 UIWebView 的子类崩溃

> ID：11403382
> 
> 赞同：0
> 
> 时间：2012-07-09T21:23:39.030
> 
> 标签：iphone

我不确定这是如何工作的。我在关注这篇文章： [检查 UIWebView 是否滚动到底部](https://stackoverflow.com/questions/8857655/check-if-uiwebview-scrolls-to-the-bottom)

我想知道 scrollViewScrolls 什么时候做一些自定义的事情。我继承了 UIWebView。到目前为止，我所做的只是：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [super scrollViewDidScroll:scrollView];
    NSLog(@"%s", __FUNCTION__);
} 
```

`[super scrollViewDidScroll:scrollView]`它在方法上崩溃。当我删除该行时，它工作正常。我不想带走这个方法的超类实现。我只是想为其添加一些自定义功能（在 web 视图上方放置一个工具栏，如 Facebook 应用程序）。这是崩溃的原因吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:26:14.813

您确定`UIWebView`实际上实现了该委托方法吗？因为听起来好像没有。在覆盖这样的可选委托方法时，您应该使用以下构造：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if ([UIWebView instancesRespondToSelector:_cmd]) {
        [super scrollViewDidScroll:scrollView];
    }
    NSLog(@"%s", __PRETTY_FUNCTION__);
} 
```

如果超类实际上没有实现该方法，这不仅可以避免调用 super，而且如果操作系统更新导致超类开始响应该方法，它将自动开始调用 super。

另请注意，您需要对超类名称进行硬编码（例如`UIWebView`）。尝试使用其中一个`[self superclass]`或`[super class]`将给您错误的结果。

# iphone - 如果我不为 iPhone 和 iPad 创建单独的 xib，我的通用应用程序会被拒绝吗？

> ID：11403385
> 
> 赞同：0
> 
> 时间：2012-07-09T21:24:00.877
> 
> 标签：iphone, ios, ipad

该应用程序将主要用于 iPhone，但我也希望可以选择部署到 iPad（无需做额外的工作！）。

如果 iPad 版本的尺寸与 iPhone 相同，即如果我没有在资源和视图控制器等方面进行任何更改，而只是指定应用程序在 iPhone 和 iPad 上运行，应用程序会被拒绝吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:02:35.983

我最近在商店中放了一个通用应用程序，其中只包含为 iPhone 设计的 xib。没有提交问题，尽管制作不同大小的图标仍然很痛苦。确保您的自动调整大小的蒙版是正确的，它可能看起来仍然很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:27:17.077

除非您同时指定 iphone 和 ipad，否则它不被视为通用应用程序。我想你会被拒绝。iPhone 应用程序将在 iPad 上运行，默认情况下只是在 iphone 的尺寸。

在 iPad 模拟器上运行你的应用程序，看看我的意思。用户可以将大小翻倍 (2x)，但这不会改变分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:27:53.170

所有 iPhone 应用程序都将自动在 iPad 上运行在一个模拟器中，该模拟器基本上完全按照您的描述运行：使用手机上的尺寸和代码运行应用程序。

如果这是您的目标，什么也不做，让模拟器为您完成工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:37:24.493

通用应用程序不同于在 iPad 上运行的 iPhone 应用程序。如果您仅将其编译为 iPhone 应用程序，则可以将其加载到 iPad 上并以屏幕居中的原生 iPhone 窗口尺寸进行查看，或者将其放大两倍，但仍居中在屏幕上。

但是如果你把它编译成一个通用的应用程序，那么你在 iPad 上的窗口就更大了。如果你所有的其他视图都是 iPhone 使用的相同视图，它们都将占据屏幕的左上角，对应 iPhone 的寡妇框架。这看起来很奇怪，并且会剥夺用户扩大规模的机会。

我建议您不要编译为通用应用程序；只能编译为 iPhone 应用程序。（我怀疑您已经在这样做了。您只是不应该将其称为通用应用程序。）

# sql - 将超链接从表单插入到表访问 VBA SQL

> ID：11403386
> 
> 赞同：0
> 
> 时间：2012-07-09T21:24:01.300
> 
> 标签：sql, ms-access, vba, hyperlink, ms-access-2010

我想通过 VBA 将表单上输入的超链接（作为超链接）带到它需要去的表。我正在使用 Access 2010。它一直给我一个 SQL 语句错误。我知道这与超链接# 的符号有关。我不太了解如何处理超链接。我已经阅读了很多论坛帖子，但它们都不同（不同年份），我似乎无法破解他们的例子来满足我的需求。谁能让我知道我做错了什么？谢谢

```
Private Sub SaveReq_Click()
' 
' Saves the current entry to the database
' Into the TABLE 'pr_req_table'
' 

' Open a connection to the database
dim data_base as Database
set data_base = OpenDatabase(CurrentProject.Path & "\test_database.accdb")

' Grab all information from form
' Add information to pr_req_table
data_base.Execute "INSERT INTO pr_req_table " _
    & "(pr_no, pr_date, pr_owner, pr_link, pr_signed) " _
    & "VALUES (" & pr_num.Value & ", #" &  Format(pr_date.Value, "mm/dd/yyyy") & "#, " _
        &  List22.Value & ", " & "Excel Copy #" & elec_copy.Value & ", " & "Signed Copy #" & sign_copy.Value & ");"

' Close Database connection
data_base.Close

End Sub 
```

提前感谢您的帮助！

弥敦道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:57:09.203

我将使用如下参数查询：

```
Sub InsertRecord()
Dim data_base As Database
Set data_base = OpenDatabase(CurrentProject.Path & "\test_database.accdb")

' Grab all information from form
' Add information to pr_req_table
Dim qd As QueryDef
Set qd = data_base.CreateQueryDef("")
qd.sql = "INSERT INTO pr_req_table(pr_no, pr_date, pr_owner, pr_link, pr_signed) " & _
    "values([p1],[p2],[p3],[p4],[p5])"
qd.Parameters("p1").Value = pr_num.Value
qd.Parameters("p2").Value = Format(pr_date.Value, "mm/dd/yyyy")
qd.Parameters("p3").Value = List22.Value
qd.Parameters("p4").Value = "Excel Copy #" & elec_copy.Value
qd.Parameters("p5").Value =  "Signed Copy #" & sign_copy.Value 
qd.Execute

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:50:21.250

如果你把 sql 分离出来，就更容易找到错误。

```
' Grab all information from form
' Add information to pr_req_table
sSQL="INSERT INTO pr_req_table " _
    & "(pr_no, pr_date, pr_owner, pr_link, pr_signed) " _
    & "VALUES (" & pr_num.Value & ", #" _
    &  Format(pr_date.Value, "mm/dd/yyyy") & "#, " _
    &  List22.Value & ", " & "Excel Copy #" & elec_copy.Value & ", " _
    & "Signed Copy #" & sign_copy.Value & ");"
data_base.Execute sSQL 
```

您可以看到超链接没有被引用，所有者也没有。

```
INSERT INTO pr_req_table (pr_no, pr_date, pr_owner, pr_link, pr_signed) 
VALUES (pr_num, #07/09/2012#, List22, Excel Copy
#elec_copy, Signed Copy #sign_copy); 
```

所以：

```
sSQL="INSERT INTO pr_req_table " _
    & "(pr_no, pr_date, pr_owner, pr_link, pr_signed) " _
    & "VALUES (" & pr_num.Value & ", #" _
    &  Format(pr_date.Value, "mm/dd/yyyy") & "#, '" _
    &  Replace(List22.Value, "'","''") & "', '" _
    & "Excel Copy #" & elec_copy.Value & '",' " _
    & "Signed Copy #" & sign_copy.Value & "');" 
```

您可能应该在 elec_copy 和 sign_copy 上使用 Replace。

# php - 我需要添加什么到我的 .htaccess 所以 看来我的服务器没有响应

> ID：11403390
> 
> 赞同：0
> 
> 时间：2012-07-09T21:24:18.857
> 
> 标签：php

看来我的服务器没有响应`<?`，需要`<?php`。我怎样才能让它也识别出来`<?`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:27:24.673

```
// On: 
php_flag short_open_tag on 
// Off: 
php_flag short_open_tag off 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:17:24.703

它`short_open_tag`被归类为**PHP_INI_PERDIR**，这意味着它可以在 php.ini、.htaccess、httpd.conf 或 .user.ini 中设置（自 PHP 5.3 起）。你不能使用`ini_set()`. A`phpinfo()`会告诉您是否使用 mod_php5（在这种情况下，您可以使用**php_flag**指令或使用 suEXEC/suPHP/FastCGI 在这种情况下，您可以使用 php.ini 或 .user.ini 来设置它。

然而，正如 hakre 所说，最好摆脱使用短标签的习惯。

# c# - 为什么 Blend 和 Visual Studio 12 会抛出异常？

> ID：11403396
> 
> 赞同：0
> 
> 时间：2012-07-09T21:24:28.057
> 
> 标签：c#, exception, blend

嗨，我在构造函数中使用了一些带有空逻辑的 UserControl，它们正在引发异常。我不明白发生了什么。我所有的用户控件在发布候选版本之前在开发人员预览中都可以使用，但是在对 RC 进行一些调整后，用户控件拒绝显示。代码运行完美，但我无法正确设计。

```
 {
        this.InitializeComponent();
 } 
```

![在此处输入图像描述](../Images/c5bab623d93403dafb0f1f758eafd811.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:30:46.867

您的 C# 代码没有任何问题。查看最里面的异常：`XAML parsing failed.`这意味着您很可能在 XAML 文件（属于`TouristAttractionsListControl`. 这也是可能的，只是有一些改变会为你打破这个。你检查过发行说明吗？您还可以尝试重新创建您的控件（仅限 XAML 部分），然后比较生成的 X(A)ML。

# mysql - 未找到结果时返回 '0'

> ID：11403402
> 
> 赞同：1
> 
> 时间：2012-07-09T21:25:10.130
> 
> 标签：mysql

如果没有找到记录，有没有办法修改此查询以在 Grade 列中返回“0”？现在，当什么都没有找到时，我得到一个空白行。

```
SELECT  COALESCE(Score, 0) AS Score, COALESCE(Grade,0) AS Grade, LAST_UPDATE, '' as  dummy
FROM (
SELECT (CASE ScanName WHEN '%=APP%' THEN '= Network System' END) AS   System, 
(sum(CASE severity WHEN 1 THEN 10 WHEN 2 THEN 9 WHEN 3 THEN 6 WHEN 4 THEN 3    
END)/COUNT(severity )) AS Score,
(sum(CASE severity WHEN 1 THEN 10 WHEN 2 THEN 9 WHEN 3 THEN 6 WHEN 4 THEN 3   
END)/COUNT(severity )) AS Grade, LAST_UPDATE 

FROM missing_internal

WHERE ScanName like '%APP%'

and LAST_UPDATE >= SUBDATE((SELECT MAX(LAST_UPDATE) from missing_internal), INTERVAL 1 day) 
HAVING System IS NOT NULL  
LIMIT 1

UNION ALL 

SELECT NULL AS Score, NULL AS Grade, 0 AS LAST_UPDATE, '' as dummy

ORDER BY LAST_UPDATE DESC

)  as T2
LIMIT 1; 
```

分数和成绩的目的是相同的，因为我使用单独的脚本将字母成绩应用于分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:31:50.850

看看[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)函数...

如果我很好地理解了您的问题，那么下面的查询应该完全符合您的要求（现在返回行时得到零）：

```
SELECT COALESCE(Score, 0) AS Score, COALESCE(Grade,0) AS Grade, LAST_UPDATE 
FROM (
SELECT (CASE ScanName WHEN 'APP' THEN 'Network System' END) AS System, 
(sum(CASE severity WHEN 1 THEN 10 WHEN 2 THEN 9 WHEN 3 THEN 6 WHEN 4 THEN 3    
END)/COUNT(severity )) AS Score,
(sum(CASE severity WHEN 1 THEN 10 WHEN 2 THEN 9 WHEN 3 THEN 6 WHEN 4 THEN 3   
END)/COUNT(severity )) AS Grade, LAST_UPDATE

FROM missing_internal

WHERE ScanName like '%APP%'

and LAST_UPDATE >= SUBDATE((SELECT MAX(LAST_UPDATE) from missing_internal), INTERVAL 1 day)
HAVING System IS NOT NULL  
LIMIT 1

UNION ALL 

SELECT NULL AS Score, NULL AS Grade, 0 AS LAST_UPDATE 

ORDER BY LAST_UPDATE DESC
) AS T2
LIMIT 1; 
```

我还没有测试过查询，所以你可能需要安排它......但是采取这个想法......

如果您只想在列返回空结果时获得零，您可以按照与上面示例相同的方式使用[COALESCE ：](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

```
COALESCE(sum(CASE severity WHEN 1 THEN 10 WHEN 2 THEN 9 WHEN 3 THEN 6 WHEN 4 THEN 3   
END)/COUNT(severity ), 0) AS Grade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:31:08.753

添加一个`ELSE`到`CASE`

```
(sum(CASE severity 
    WHEN 1 THEN 10 
    WHEN 2 THEN 9 
    WHEN 3 THEN 6 
    WHEN 4 THEN 3 
    ELSE 0
END)/COUNT(severity )) AS Grade 
```

或使用`IFNULL()`

```
IFNULL((sum(CASE severity 
        WHEN 1 THEN 10 
        WHEN 2 THEN 9 
        WHEN 3 THEN 6 
        WHEN 4 THEN 3 
        ELSE 0
    END)/COUNT(severity )), 0)  AS Grade 
```

# ios - UIPanGestureRecognizer 在 UIImageView 上不起作用

> ID：11403405
> 
> 赞同：2
> 
> 时间：2012-07-09T21:25:28.047
> 
> 标签：ios, drag-and-drop, uiimageview, uipangesturerecognizer

好吧，这个想法是在带有字符的小圆圈上实现拖放功能。看起来很简单，但我无法立即完成。问题是代表小圆圈的 UIImageView 根本不响应平移。这是我写的代码：

```
- (void)createLiterasAndPlacesForThemForCard:(UIView *)frontCard andWord:(NSString *)word;
for (int i=0; i<[word length]; i++) {
    UIImageView * oneChar = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"LetterFull"]];
    oneChar.frame = CGRectMake(26+i*24, 175, 23, 24);
    oneChar.backgroundColor = [UIColor clearColor];
    oneChar.userInteractionEnabled = YES;
    UIPanGestureRecognizer * oneCharPanGestureRecognizer = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(move:)];
    [oneCharPanGestureRecognizer setMinimumNumberOfTouches:1];
    [oneCharPanGestureRecognizer setMaximumNumberOfTouches:1];
    [oneCharPanGestureRecognizer setDelegate:self];
    [oneChar addGestureRecognizer:oneCharPanGestureRecognizer];
    [frontCard addSubview:oneChar];
} 
```

这是层次结构 - 我有一个上面称为“self”的 viewController，它包含一个滚动视图，包含一些卡片，每张卡片都有可以拖动的小圆圈。我在设置委托的行收到警告，但我想这不是实际问题。

这是“move：”方法的代码：

```
- (void)move:(id)sender
{
    NSLog(@"THE PAN OCCURED");
    float firstX;
    float firstY;

    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

        firstX = [[sender view] center].x;
        firstY = [[sender view] center].y;
    }

    translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);
    [[sender view] setCenter:translatedPoint];
} 
```

而且我看不到对平底锅的任何反应——无论是在控制台还是在屏幕上。请帮助我，我自己找不到解决方案，我已经启用了 userInteraction 并没有帮助。

# linux - 每次我推送时，Git 都会询问用户名

> ID：11403407
> 
> 赞同：812
> 
> 时间：2012-07-09T21:25:38.203
> 
> 标签：linux, git, github

每当我尝试进入我的仓库时，git 都会要求两者`username & password`。

我每次重新输入密码都没有问题，但问题在于输入用户名。我`https`用来克隆我的存储库。

那么，我怎样才能配置 git 以便它不要求`username`每个`git push`.

我是 linux 新手，但 Windows 中的 IIRC`git push`只要求输入密码。

* * *

## 回答 #1

> 赞同：1110
> 
> 时间：2013-07-31T19:49:48.157

*编辑（由@dk14 由版主和评论建议）*

**警告：如果您`credential.helper store`从答案中使用，您的密码将完全未加密（“原样”）存储在`~/.git-credentials`. 请查阅下面的评论部分或“链接”部分的答案，特别是如果您的雇主对安全问题零容忍。**

即使被接受，它也不能回答实际 OP 关于仅省略用户名（而不是密码）的问题。对于有确切问题的读者@grawity 的[答案](https://superuser.com/questions/847181/skip-username-prompt-when-using-git)可能会派上用场。

* * *

**原始答案（@Alexander Zhu）：**

您可以使用以下命令存储您的凭据

```
$ git config credential.helper store
$ git push http://example.com/repo.git
Username: <type your username>
Password: <type your password> 
```

另外我建议你阅读
[`$ git help credentials`](https://git-scm.com/docs/gitcredentials)

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2012-07-10T06:02:33.703

`.git/config`您可以在本地存储库的文件中完成此操作。该文件包含一个名为“remote”的部分，其中包含一个名为“url”的条目。“url”条目应包含您正在谈论的存储库的 https 链接。

当您在主机“url”前加上您的用户名时，`git`不应再询问您的用户名。这是一个例子：

```
url = https://username@repository-url.com 
```

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2015-02-17T13:31:38.810

### 使用 Git 存储库进行永久身份验证

运行以下命令以启用凭据缓存：

```
$ git config credential.helper store
$ git push https://github.com/repo.git

Username for 'https://github.com': <USERNAME>
Password for 'https://USERNAME@github.com': <PASSWORD> 
```

* * *

使用时还应指定**缓存过期**

```
git config --global credential.helper "cache --timeout 7200" 
```

启用凭证缓存后，将缓存**7200 秒（2 小时）**。

* * *

阅读凭证**文档**

```
$ git help credentials 
```

* * *

## 回答 #4

> 赞同：124
> 
> 时间：2016-01-22T23:06:17.703

[按照本文在 GitHub 上](https://help.github.com/articles/generating-an-ssh-key/)的描述添加新的 SSH 密钥。

如果 Git 仍然要求您输入用户名和密码，请尝试在远程 URL 中更改`https://github.com/`为：`git@github.com:`

```
$ git config remote.origin.url 
https://github.com/dir/repo.git

$ git config remote.origin.url "git@github.com:dir/repo.git" 
```

* * *

## 回答 #5

> 赞同：65
> 
> 时间：2015-12-28T05:12:26.363

我发现最简单的方法是使用以下命令：

```
git config --global credential.https://github.com.username <your_username> 
```

这适用于逐个站点并修改您的全局 git 配置。

要查看更改，请使用：

```
git config --global --edit 
```

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2014-01-19T11:24:30.370

如果您使用 https 而不是 ssh，您可以`.git/config`按照 user701648 的说明编辑“url”，但如果您愿意，还可以添加密码：

```
url = https://username:password@repository-url.com 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2014-11-19T01:42:39.360

您可以通过在 Git 配置文件中添加以下内容来为给定站点的所有存储库设置用户名。您需要将“ [https://example.com](https://example.com) ”和“me”更改为实际 URL 和您的实际用户名。

```
[credential "https://example.com"]
    username = me 
```

（这直接来自“git help credentials”）

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2019-04-24T15:14:06.000

```
git config --global credential.helper cache 
```

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2017-11-09T05:11:32.467

更改克隆的仓库有效：

```
git remote set-url origin git@github.com:gitusername/projectname.git 
```

使用缓存的凭据是可行的，并且设置超时期限可以让事情变得不那么烦人。如果您使用 Windows 凭据助手，那应该是最简单的方法（尤其是在 SSH 被阻止的情况下）。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-07-10T10:20:58.220

确保您使用的是 SSH 而不是 http。检查[这个](https://stackoverflow.com/a/6565661/1322460)SO 答案。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2017-05-22T05:56:55.237

除了 user701648 的回答之外，您还可以使用以下命令将凭据存储在主文件夹（所有项目的全局文件夹）中，而不是项目文件夹中

```
$ git config --global credential.helper store
$ git push http://example.com/repo.git
Username: <type your username>
Password: <type your password> 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2018-09-04T23:39:36.503

最简单的方法是创建一个`~/.netrc`包含以下内容的文件：

```
machine github.com
login YOUR_GITHUB_USERNAME
password YOUR_GITHUB_PASSWORD 
```

（如图所示： [https](https://gist.github.com/ahoward/2885020) ://gist.github.com/ahoward/2885020 ）

您甚至可以关闭此文件的权限，这样任何人都无法通过键入以下内容读取您的密码：

```
chmod 600 ~/.netrc 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2018-06-12T12:26:59.240

当我只 git pull， git pull origin xxx 时， git 要求用户名和密码。

```
git config credential.helper store 
```

有用。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2016-04-28T19:16:10.637

如果你使用**SSH**版本，你不会有任何密码问题。只有一次你生成**SSH**密钥，告诉 git，**这**台电脑将使用**这个**github 帐户，并且不再询问我任何访问权限（对于这台电脑）。

[如何为 Github 生成 SSH](http://www.w3docs.com/snippets/git/how-to-generate-ssh-key-for-git.html)

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-06-09T13:13:57.650

为避免输入用户名，但仍会提示输入密码，您可以简单地克隆包含用户名的存储库：

```
git clone user_name@example.gitrepo.com/my_repo.git 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2019-06-18T17:12:10.683

# 快速方法

在工作目录中获取 git 的 url：

```
git config remote.origin.url 
```

然后 ：

```
git config credential.helper store

git push "url of your git" 
```

将最后一次询问用户名和密码

完毕。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2019-12-24T06:06:02.607

`ssh`+`key authentication`比`https`+更可靠`credential.helper`

您可以将所有存储库配置为使用 SSH 而不是 HTTPS，如下所示：

```
git config --global url.ssh://git@github.com/.insteadOf https://github.com/ 
```

`url.<base>.insteadOf`记录[在这里](https://mirrors.edge.kernel.org/pub/software/scm/git/docs/git-config.html)。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2020-11-20T19:28:48.680

请[注意](https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/)，从 2021 年 8 月 13 日开始，**github 在对 Git 操作进行身份验证时将不再接受帐户密码**，并将要求对 GitHub.com 上所有经过身份验证的 Git 操作使用基于令牌的身份验证。您也可以在您喜欢的地方继续使用 SSH 密钥。

因此，对于您必须使用的给定身份验证上下文的用户名静态配置（使用 github 时）：

```
https://username:<personal-access-tokens>@repository-url.com 
```

请注意，我们正在使用`<personal-access-tokens>`而不是`<password>`

有关如何创建个人访问令牌的更多详细信息，请查看[文档](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token)。

github[文档](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/about-authentication-to-github)说：

> GitHub over HTTPS... 每次您使用 Git 向 GitHub 进行身份验证时，系统都会提示您输入凭据以通过 GitHub 进行身份验证，除非您使用[凭据助手](https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git)缓存它们。
> 
> ...
> 
> 使用 SSH ... 每次使用 Git 向 GitHub 进行身份验证时，系统都会提示您输入 SSH 密钥密码，除非您已 [存储密钥](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#adding-your-ssh-key-to-the-ssh-agent)。

github[建议](https://docs.github.com/en/free-pro-team@latest/github/getting-started-with-github/set-up-git#next-steps-authenticating-with-github-from-git)通过 HTTPS 连接。可能是因为他们[希望您使用](https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git)Git Credential Manager Core。但是[Git Credential Manager Core](https://github.com/microsoft/Git-Credential-Manager-Core#linux-install-instructions)可以在 Windows 和 macOS 上运行。Linux 支持（截至发布时间）处于**早期预览阶段**。

所以，我只会给出 Git 和 SSH 的解决方案。

Git 的[文档](https://git-scm.com/docs/gitcredentials#_avoiding_repetition)讨论了如何避免使用 gitcredentials 一遍又一遍地输入相同的凭据。

**解决方案 1**

使用凭证助手缓存密码（在内存中短时间）。

```
git config --global credential.helper cache 
```

**解决方案 2**

使用凭证助手存储密码（无限期地在磁盘上）。

```
git config --global credential.helper 'store --file ~/.my-credentials' 
```

[您可以在文档](https://git-scm.com/docs/git-credential-store#FILES)中找到凭证的保存位置（如果未使用 --file 明确设置）。

**注意：** 为了解决 gitcredentials 存储完全未加密的凭据（“原样”）的[问题](https://stackoverflow.com/a/17979600/1772898)，您始终可以在使用前加密文件并解密它。

**解决方案 3**

这几乎是从[生成新的 SSH 密钥并将其添加到 ssh-agent 中](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#adding-your-ssh-key-to-the-ssh-agent)的直接复制粘贴。我认为跟随链接会比从这里阅读更好。无论如何，我将在这里复制粘贴命令。

1.  使用 . 创建 ssh 密钥`ssh-keygen -t ed25519 -C "your_email@example.com"`。您也可以使用 RSA 而不是 Ed25519 使用`ssh-keygen -t rsa -b 4096 -C "your_email@example.com"`

2.  [将 SSH 密钥添加到您在 GitHub 上的帐户](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)。

3.  如果未启动，请使用 ssh-agent 在后台启动`$ eval "$(ssh-agent -s)"`

4.  使用 将您的 SSH 私钥添加到 ssh-agent `$ ssh-add ~/.ssh/id_ed25519`。如果您使用不同的名称创建了密钥，或者如果您要添加具有不同名称的现有密钥，请将命令中的 id_ed25519 替换为您的私钥文件的名称。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2017-04-06T05:40:26.583

1.  $ git config credential.helper 存储

2.  $ git push/push [https://github.com/xxx.git](https://github.com/xxx.git)

3.  然后输入您的用户名和密码。

4.  完毕

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2019-04-15T12:32:33.710

你可以跑

```
git config --global credential.helper wincred 
```

在系统中安装并登录 GIT for windows 之后。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-07-08T06:03:46.010

设置全天 24 小时的凭据。

```
git config --global credential.helper 'cache --timeout=86400' 
```

否则 1 小时将 86400 秒替换为 3600。

**或者**

“缓存”身份验证助手的所有配置选项：

`git help credential-cache`

更多信息：[https ://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git](https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git)

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2020-09-27T11:30:04.527

我使用将我的 Git 存储库用户名和密码存储在磁盘上。所以git不会在我每次推送代码时都询问用户名和密码

按照这些命令将凭据保存在本地存储中

```
$ git config credential.helper store
or
$ git config --global credential.helper store 
```

从现在开始，当第一次访问时，Git 会将凭据写入每个 URL 上下文的 ~/.git-credentials 文件。要查看该文件的内容，可以使用如图所示的 cat 命令。

```
$ cat  ~/.git-credentials 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2020-12-06T23:43:22.763

解决它的正确方法是更改`http`​​为`ssh`.

您可以使用它`git remote rm origin`来删除您的远程仓库。

然后您可以使用 ssh sintax（您可以从 github 复制）再次添加它 `git remote add origin git@github.com:username/reponame.git`：

检查这篇文章。 [https://www.freecodecamp.org/news/how-to-fix-git-always-asking-for-user-credentials/](https://www.freecodecamp.org/news/how-to-fix-git-always-asking-for-user-credentials/)

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2020-03-10T23:27:38.833

### （仅适用于**Mac**操作系统）

对于**Windows**和**Linux** ，请参考下面提到的 Github 文档链接。

来自 Github 文档：[文档链接](https://help.github.com/en/github/using-git/caching-your-github-password-in-git)

*在 Git 中缓存你的 GitHub 密码*

*   您需要 Git 1.7.10 或更高版本才能使用 osxkeychain 凭证助手。

    > 检查您的 Git 版本：`git --version`

*   找出**osxkeychain helper**已经安装：

    > `git credential-osxkeychain`

    如果您收到以下响应，那么您已经安装并准备在您的 Mac 上使用它：

    > `> Usage: git credential-osxkeychain <get|store|erase>`

    如果您没有收到如上所示的响应，那么您可以运行以下命令安装它：

    > `git credential-osxkeychain`

*   告诉 git 全局使用 osxkeychain 获取 git 凭据：

    > `git config --global credential.helper osxkeychain`

    它会在将凭据保存到**keychain**之前提示一次。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2021-07-29T03:09:38.237

使用以下命令可以给你 15 分钟的超时时间。

```
$ git config --global credential.helper cache 
```

您也可以通过以下命令修改时间。这是 1 小时的示例。

```
$ git config --global credential.helper 'cache --timeout=3600' 
```

* * *

如果您想在本地缓存，请使用该命令一小时超时。

```
$ git config credential.helper 'cache --timeout=3600' 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-06-19T08:12:30.390

对我来说，当我为我的帐户启用 2 因素身份验证 (2FA) 时，就会出现这个问题。我会输入正确的凭据，但身份验证仍然会失败，因为终端身份验证当然不要求提供身份验证代码。

我只需要为我的帐户禁用 2FA。这样做后，我只需要在`git push`. 从那时起他们就不再需要了。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-06-29T19:24:27.323

当使用 HTTPS 而不是 SSH 下载时会发生这种情况，我实现的最简单的方法是我推送所有内容，因为我做了一些更改，其中它要求输入用户名和密码，然后我从我的机器中删除了目录并 git clone SSH 地址. 解决了。

只需使用 SSH 而不是 HTTP 克隆它，它不会询问用户名或密码。

即使您使用 SSH 下载，双重身份验证也会产生问题，因此禁用它可以解决问题。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-07-20T07:18:22.080

1.  打开 Windows 凭据管理器并从通用凭据中删除 git： [https ://dev.azure.com/orgname。](https://dev.azure.com/orgname)有关步骤，请查看[为什么带有 GIT 的 TFS 不能从命令行工作？](https://stackoverflow.com/questions/37736232/why-tfs-with-git-is-not-working-from-command-line/53590162#53590162)
2.  从文件夹中删除`.git-credentials`文件`C:\Users\{username}`。
3.  [确保从https://git-scm.com/download/win](https://git-scm.com/download/win)更新 git 最新版本

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-11-28T18:48:29.770

自 2021 年 8 月 13 日起，不再接受基于密码的登录。您现在需要使用基于令牌/SSH 的身份验证。

如果您不想每次推送时都被询问，请安装[GitHub CLI](https://github.com/cli/cli#installation)，然后缓存您的凭据：

```
git config --global credential.helper store
gh auth login 
```

并按照提示进行操作。但请确保您`Authenticate Git with your GitHub credentials?`使用`Y`.

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-11-29T18:20:42.890

我今天遇到了这个问题。如果您在 2020 年 11 月遇到此问题，那么您需要更新您的 git 版本。我收到一封电子邮件，告诉我这件事。这是 github 团队的电子邮件。

> 我们检测到您最近尝试使用旧版本的 Windows 版 Git 对 GitHub 进行身份验证。GitHub 改变了用户在使用 Git for Windows 时的身份验证方式，现在需要使用 Web 浏览器来对 GitHub 进行身份验证。为了能够通过 Web 浏览器登录，用户需要更新到最新版本的 Git for Windows。您可以在以下位置下载最新版本：
> 
> *   [https://gitforwindows.org/](https://gitforwindows.org/)
> 
> 如果您无法将适用于 Windows 的 Git 更新到最新版本，请参阅以下链接以获取更多信息和建议的解决方法：
> 
> *   [https://aka.ms/gcmcore-githubauthchanges](https://aka.ms/gcmcore-githubauthchanges)
> 
> 如果您对这些更改有任何疑问或需要任何帮助，请联系 GitHub 支持，我们很乐意为您提供进一步帮助。
> 
> *   [https://support.github.com/contact](https://support.github.com/contact)
> 
> 谢谢，GitHub 团队

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-07-09T12:39:12.437

我尝试了这些步骤并且成功了：

1.  创建个性化访问令牌：[https ://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)

2.  将令牌添加到Android Studio（文件->设置->版本控制->Github->添加-使用令牌登录）

3.  转到文件-> 设置-> 版本控制-> Git 并取消选中*“使用凭据助手”*

# c++ - 图数据结构的良好内存管理策略

> ID：11403415
> 
> 赞同：2
> 
> 时间：2012-07-09T21:26:18.240
> 
> 标签：c++, memory-management, data-structures, graph

我曾多次为几位雇主有理由实现我自己的图形数据结构。为了获得完全的访问灵活性，我经常需要使用两个类来实现它，一个`Node`类和一个`Edge`类。

然后一个节点将有一组传出边（可能还有传入边），并且一个边将有一个源和一个接收器（都是指向节点的托管指针）。这些图经常有循环。

我的问题是：在此类图形数据结构中管理内存的最佳方法是什么，尤其是在转换和变异图形时？由于循环的存在，它们不适合引用计数（即使您尝试使用弱指针，通常也不清楚循环的位置以及弱链接的放置位置）。

在我的各种实现中，我经常跟踪所有分配的节点和边，与图表以及图表的入口点列表分开。然后我实现了一个简单的垃圾收集器。定期应用各种图形转换（包括取消链接一些节点/边）后，我运行 gc，其中涉及：

1.  从入口点节点开始，并将通过图形从那里可到达的所有节点和边标记为活动的（通过 BFS/DFS）。
2.  迭代整个集合中的所有节点和边，并删除上一步中未标记的任何节点和边。

这很好用（并且是标记/扫描的简单实现）。但它总是看起来有点笨拙。有没有人对此问题有任何见解，或更好的替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:25:01.770

当您有有限图时，不要将它们表示为指针结构。相反，使用

*   一个边列表（`vector`, `list`, 不管）和一个顶点列表，或者
*   顶点到索引的映射（`map`或）和表示顶点和是否连接`unordered_map`的布尔值（或加权图的浮点数）矩阵（二维数组） 。`i``j`

前一种表示称为[邻接表](https://en.wikipedia.org/wiki/Adjacency_list)，后一种称为[邻接矩阵](https://en.wikipedia.org/wiki/Adjacency_matrix)。使用哪一个取决于您拥有的图表和您要执行的操作。两者在内存管理方面都更简单，并且通常比指针结构更高效，因为它们占用的内存更少并且倾向于保留引用的局部性。

# c++ - 自动计算 TMP 中实例化类的数量？

> ID：11403417
> 
> 赞同：11
> 
> 时间：2012-07-09T21:26:29.317
> 
> 标签：c++, templates, counter, instantiation, template-meta-programming

给定一个模板元程序 (TMP)，C++ 编译器是否会生成计算实例化类数量的构建统计信息？或者有没有其他方法可以自动获取这个号码？因此，例如无处不在的阶乘

```
#include <iostream>

template<int N> struct fact { enum { value = N * fact<N-1>::value }; };
template<> struct fact<1> { enum { value = 1 }; };

int main()
{
    const int x = fact<3>::value;
    std::cout << x << "\n";
    return 0;
} 
```

我想取回数字 3（因为 fact<3>、fact<2> 和 fact<1> 已实例化）。这个例子当然是微不足道的，但是当你开始使用例如 Boost.MPL 时，编译时间真的会爆炸，我想知道其中有多少是由于隐藏的类实例化。我的问题主要是针对 Visual C++，但对于 gcc 的答案也将不胜感激。

**编辑**：我目前对 Visual C++ 非常脆弱的方法是从 Stephan T. Lavavej 的[视频](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Advanced-STL/C9-Lectures-Stephan-T-Lavavej-Advanced-STL-3-of-n)/d1reportAllClassLayout 之一添加编译开关并对输出文件进行 grep + 字数统计，但它 (a) 极大地增加了编译时间和 (b)正则表达式很难 100% 正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T22:33:01.233

我对 GCC 进行了[一行更改](http://gcc.gnu.org/ml/gcc/2011-06/msg00110.html)，使其在实例化每个类模板时打印出它的名称。`cc1plus`您已经可以在没有标志的情况下直接调用 C++ 前端`-quiet`来为函数模板获取相同的功能。

我还没有把它变成一个合适的 GCC 选项，这只是我自己的源代码树上的一个 hack。我正在考虑将它作为一个插件来实现，但它不在我的 TODO 列表的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T00:03:52.243

当然，没有便携的方法可以做到这一点。

对于大多数编译器来说，有一些 hacky 方法可以做到这一点。您已经为 MSVC 找到了一个。对于 gcc，您可能可以使用 gccxml。或者，对于任何开源编译器（gcc 或 clang），在实例化点添加代码应该非常简单，这些代码要么保持计数，要么记录一些您可以在编译完成后过滤的内容。

对于 Clang/LLVM，您可以构建一个挂钩实例化的插件，这样更简洁，但实际上可能需要更多工作。

带有调试符号、没有优化和剥离的构建最终可能会导致每个实例化的名称混乱，您可以使用 grep 查找。然而，一些编译器（包括 gcc）总是会内联至少一些方法，不管你是否想要它们。如果您愿意修改您的代码，您可能会强制它生成离线实例化，可能是这样的：

```
template<int N> struct fact { 
  enum { value = N * fact<N-1>::value }; 
  int *dummy() { return &fact<N-1>::value; }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T12:55:18.577

有一个由 Steven Watanabe 编写的工具，可以用来计算模板实例化的数量。你可以在[这里](http://svn.boost.org/svn/boost/sandbox/tools/profile_templates/)得到它。基本上，它会修改代码，以便在每次实例化类时生成编译器警告，然后您可以使用正则表达式处理生成的文本。

# apache - 使用变量在htaccess中重写url

> ID：11403421
> 
> 赞同：0
> 
> 时间：2012-07-09T21:26:35.183
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

我有一个可以包含两个元素的 url：1\. TYPE 2\. LOCATION。这是没有格式的 url：
`list-hotels-ai.php` 我想用 htaccess 重写 url，但我遇到了问题。有时 url 会有： `list-hotels-ai.php?c=Cancun`或`list-hotels-ai.php?c=Cancun&t=AllInclusive`

我想将 url 重写为： `list-hotels-ai.php?c=Cancun`TO `cancun-hotels.php` `list-hotels-ai.php?c=Cancun&t=AllInclusive`TO`all-inclusive-cancun-hotels.php`

有谁知道如何通过 htaccess 做到这一点？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:56:13.270

制作一个使用 JavaScript 进行重定向的 html 页面。

# java - NB JUnit 6分钟后自动关闭程序的解决方法

> ID：11403423
> 
> 赞同：0
> 
> 时间：2012-07-09T21:26:46.890
> 
> 标签：java, netbeans, junit, jelly, jemmy

我将 NB JUnit 与 JUnit 4、Jelly Tools 和 Jemmy 一起使用。

按照提供的教程，我在 suite() 函数中有一个非常标准的设置。

```
public static Test suite() {
    // run tests with specific configuration
    NbModuleSuite.Configuration conf =
            NbModuleSuite.createConfiguration(Tester.class).
            clusters(".*").
            enableModules(".*");
    conf = conf.addTest("test1", "test2", "test3");
    return NbModuleSuite.create(conf);
} 
```

（如果您想了解我提到的教程的更多详细信息，请参阅[http://platform.netbeans.org/tutorials/nbm-test.html ）](http://platform.netbeans.org/tutorials/nbm-test.html)

似乎正在发生的事情是，在 6 分钟左右，无论测试人员应该做什么，它都会关闭 NetBeans 窗口。

就在它关闭之前，测试人员会跳到前面，尝试填入所有尚未完成的测试。

就我而言，我正在打电话

```
new Timeout("pausing", 1000).sleep(); 
```

在一个while循环中，它等待某个函数调用返回true。但是，在测试开始的 5:30 左右，测试人员从这个功能继续，完成了其他测试，并关闭了窗口。

我不确定每个单独的测试是否有时间限制，或者测试人员是否完全超时。但是，我确实注意到，如果我添加另一个或两个长时间暂停或足够的随机点击和按钮按下以持续几分钟的测试，测试仪仍会在 6 分钟左右关闭。时间永远不会完全相同，但它的范围就在附近。

我尝试了几种不同的方法来暂停测试仪，但都没有成功。而且我在网上找不到任何可以帮助的东西，因为这些都没有被广泛宣传。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:43:55.570

默认情况下，超时时间应设置为 0L (http://junit.sourceforge.net/javadoc/org/junit/Test.html#timeout()) 可能会尝试将超时参数更改为一个非常大的值。

[http://forums.netbeans.org/post-31002.html&highlight=](http://forums.netbeans.org/post-31002.html&highlight=)

看起来您可以通过设置在您的每用户项目属性（private.properties）或 project.properties 文件中设置超时

```
test.timeout=3600000 
```

希望有帮助！

# jquery - 基本 - 将 jquery 插件添加到 django 表单

> ID：11403427
> 
> 赞同：0
> 
> 时间：2012-07-09T21:27:07.477
> 
> 标签：jquery, django

我正在寻找这个基本问题的解决方案：我正在使用 jquery 插件（datepicker）让用户选择一个日期。这应该如何在 django 表单中使用？

表单集似乎不是正确的解决方案，但制作和调用我自己的小部件也不是。我没有继续尝试新的选择，而是在寻找一些方向。这是一个简单的测试场景。

模型.py

```
 class DateTest(models.Model):
        date_nm = models.CharField(max_length=120)
        fromdate = models.DateTimeField() 
```

表格.py

```
def datetest_save_page(request):
    if request.method == 'POST': 
        form = DateTestSaveForm(request.POST)
        if form.is_valid():
            date_nm, dummy = DateTest.objects.get_or_create(
                date_nm=form.cleaned_data['date_nm']
            )
            fromdate = form.cleaned_data['fromdate']
            return HttpResponseRedirect('datetest_page.html') 
    else:
        form = DateTestSaveForm()
    return render_to_response('datetest_save.html', {
        'form': form,
    }) 
```

表格.py

```
class DateTestSaveForm(forms.Form):
    date_nm = forms.CharField(
        label=u'Date Name',
        max_length=30
    )
    fromdate = forms.DateTimeField() 
```

我在 base.html 中设置了 datepicker，并在 datetest_save.html 中调用。它调用，我可以选择一个刚刚找到的日期，但我不知道如何获取我选择的日期并将其粘贴到我的数据库中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:36:33.870

实际上有很多名为“datepicker”的 jQuery 插件，所以很难知道你可能在这里使用哪个。但是，如果您不想创建自定义表单字段，则需要找到一个库，该库以某种方式提供自定义使用的日期格式。具体来说，字段值需要采用以下格式：“YYYY-MM-DD”。

如果您不能或不想使用该格式的日期，那么您将必须创建一个自定义表单字段，该字段将自动将您选择的日期格式解析为 Django 可用的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:24:17.940

听起来您指的是 jQuery UI 日期选择器。您可以设置日期选择器的格式。

此外，您不需要为日期/时间的输入创建自定义字段。你的意思是使用`DateTimeField`? 如果您只需要日期，则可以使用`DateField`表格和模型。

要设置 a 的输入格式，`DateField`您可以这样做：

```
fromdate = forms.DateField(input_formats=['%Y-%m-%d']) 
```

[有关更多详细信息，请参阅此](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.DateField.input_formats)内容。

如果您想提供字段格式的格式，您可以执行以下操作：

```
fromdate = forms.DateField(input_formats=['%Y-%m-%d'],
                           widget=forms.DateInput(format='%Y-%m-%d')) 
```

有关格式的详细信息，[请参阅此内容。](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)

笔记：

最好使用`YYYY-MM-DD`格式，因为新的 HTML5 日期字段只允许您使用这种格式。

此外，您可以使用`ModelForms`您的表格。

# jsf - 在 .taglib.xml 中注册自定义组件后，Netbeans 中没有属性自动完成

> ID：11403434
> 
> 赞同：2
> 
> 时间：2012-07-09T21:27:30.570
> 
> 标签：jsf, netbeans, jsf-2, custom-component, taglib

我为 . 创建了一个自定义组件`SelectOneRadio`，并在其中注册了它，`xyz.taglib.xml`到目前为止它可以工作。唯一的问题是我的 NetBeans 在自动完成中看不到我的标记属性。例如，如果我`layout="pageDirection"`在我的自定义组件中有，那么它会正确呈现，但是当我（Ctrl + 空格）我看不到`layout`, `value`... 属性时。这是我在我的自定义组件中注册的方式`WEB-INF/faces-config.xml`，我有

```
<component>
    <component-type>com.xyz.om.ui.component.SelectOneRadio</component-type>
    <component-class>
        com.xyz.om.ui.component.SelectOneRadio
    </component-class>
    <component-extension>
        <component-family>com.xyz.om.ui.component.SelectOneRadio</component-family>
        <renderer-type>com.xyz.om.ui.renderer.SelectOneRadioRenderer</renderer-type>
    </component-extension>
</component>
<render-kit>
    <renderer>
        <component-family>com.xyz.om.ui.component.SelectOneRadio</component-family>
        <renderer-type>com.xyz.om.ui.renderer.SelectOneRadioRenderer</renderer-type>
        <renderer-class>
            com.xyz.om.ui.renderer.SelectOneRadioRenderer
        </renderer-class>    
    </renderer>
</render-kit> 
```

在我的`WEB-INF/xyz.taglib.xml`，我有

```
<facelet-taglib xmlns="http://java.sun.com/xml/ns/javaee"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
            version="2.0">
<namespace>http://example.com/ui</namespace>
<tag>
    <tag-name>selectOneRadio</tag-name>
    <component>
        <component-type>com.xyz.om.ui.component.SelectOneRadio</component-type>
        <renderer-type>com.xyz.om.ui.renderer.SelectOneRadioRenderer</renderer-type>            
    </component>
</tag>
</facelet-taglib> 
```

所以我注册`xyz.taglib.xml`如下`web.xml`

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/xyz.taglib.xml</param-value>
</context-param> 
```

在这一步之后，如果我在自定义组件上按 Ctrl + 空格（Netbeans），我只能看到`class, id, parent , rendered, rendererType, transient`. `xyz.tld`所以我尝试在WEB-INF下创建一个，像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
<tlib-version>1.0</tlib-version>
<short-name>xyz</short-name>
<uri>http://example.com/ui</uri>

<tag>       
    <name>selectOneRadio</name>
    <tag-class>com.xyz.om.ui.tag.SelectOneRadioTag</tag-class>
    <body-content>JSP</body-content>
    <attribute>
        <description>
            xyz description
        </description>
        <name>name</name>
        <required>false</required>
        <deferred-value>
            <type>java.lang.String</type>
        </deferred-value>         

    </attribute>
</tag>
</taglib> 
```

但是`name`当我写出标签时，属性仍然没有显示在netbeans中。**我想我的问题是如何让 netbeans 自动完成我的自定义组件的属性，因为一切正常，但没有自动完成是一种痛苦**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:08:00.800

属性根据`.taglib.xml`文件自动完成。您需要在`<tag>`元素中注册每个单独的属性。

```
<tag>
    <tag-name>selectOneRadio</tag-name>
    <component>
        <component-type>com.xyz.om.ui.component.SelectOneRadio</component-type>
        <renderer-type>com.xyz.om.ui.renderer.SelectOneRadioRenderer</renderer-type>            
    </component>
    <attribute>
        <name>id</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <name>binding</name>
        <required>false</required>
        <type>javax.faces.component.UIComponent</type>
    </attribute>
    <attribute>
        <name>rendered</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
    <!-- Etc.. -->
</tag> 
```

`.tld`仅当您计划在 Facelets 旁边支持 JSP 时，它才是强制性的。请注意，JSF 2.0 本身不支持 JSP，它将以 JSF 1.2 后备模式运行。

# python - Python：如何检查对象是否为模块？

> ID：11403436
> 
> 赞同：2
> 
> 时间：2012-07-09T21:27:33.080
> 
> 标签：python, object, module

如何在 Python 中检查给定对象是否为模块？

这是我尝试过的：

```
>>> import sys
>>> sys.modules["sys"].__class__
<class 'module'>
>>> isinstance(sys.modules["sys"], module)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'module' is not defined
>>> sys.modules["sys"].__class__.__module__
'builtins'
>>> import builtins
>>> builtins.module
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'module' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:31:05.727

```
>>> import sys, types
>>> isinstance(sys, types.ModuleType)
True 
```

该`types`模块还提供了许多其他类型：

```
>>> dir(types)
['BooleanType', 'BufferType', 'BuiltinFunctionType', 'BuiltinMethodType', 'ClassType', 'CodeType', 'ComplexType', 'DictProxyType', 'DictType', 'DictionaryType', 'EllipsisType', 'FileType', 'FloatType', 'FrameType', 'FunctionType', 'GeneratorType', 'GetSetDescriptorType', 'InstanceType', 'IntType', 'LambdaType', 'ListType', 'LongType', 'MemberDescriptorType', 'MethodType', 'ModuleType', 'NoneType', 'NotImplementedType', 'ObjectType', 'SliceType', 'StringType', 'StringTypes', 'TracebackType', 'TupleType', 'TypeType', 'UnboundMethodType', 'UnicodeType', 'XRangeType', '__builtins__', '__doc__', '__file__', '__name__', '__package__']
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T21:37:31.907

inspect.ismodule 几乎是你能得到的最简单的。

```
import inspect
inspect.ismodule(inspect) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-09T21:29:42.660

`if type(obj) == type(__builtin__)`应该有帮助

# c# - NLog 文件目标和 keepFileOpen 标志

> ID：11403437
> 
> 赞同：7
> 
> 时间：2012-07-09T21:27:34.127
> 
> 标签：c#, nlog

NLog 中的 FileTarget 对象有一个名为“keepFileOpen”的属性（布尔值）。默认情况下，此属性设置为 false，这意味着每个日志事件都会打开文件、写入文件并关闭文件。

对性能的影响很大，所以我将“keepFileOpen”指定为 true，而不是 false，这意味着文件只会打开一次。

是否有人知道（或只是知道）为什么此属性默认设置为“false”，从而对日志记录造成巨大的性能影响？

是否存在将此属性设置为 true 会导致问题的任何情况（因此将其默认为“false”是有意义的）。

谢谢 ！

**编辑**

基本布局的性能测量，将 100K 事件写入记录器：

*   keepFileOpen = false（默认）：~ 101 秒
*   keepFileOpen = true : ~ 1 秒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T14:11:49.200

我会说关闭文件是预期的行为。如果您在 NLog 进程处于活动状态时尝试从另一个进程访问文件或在文件系统中删除它，则会导致那些烦人的系统错误，说某些进程持有文件等。

如果打开文件的时间对您来说太长，请尝试使用 AsyncWrapper，您将获得即发即弃的行为。

因此我认为默认值是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:52:53.413

我会尝试给他们发送一封电子邮件并询问他们。我无法弄清楚为什么此选项默认为 false 的任何原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T02:40:17.613

默认值“false”没有意义。预期的行为是快速和合理的。

并且 keepFileOpen 永远不应该保存文件，因为有一个`FileStream`名为`FileShare.ReadWrite`.

# python - Python如何用未知数量的参数初始化线程？

> ID：11403439
> 
> 赞同：0
> 
> 时间：2012-07-09T21:27:41.837
> 
> 标签：python, multithreading, iterable-unpacking

在尝试创建线程时，我无法将星号表达式与固定参数列表结合使用。

考虑以下代码：

```
the_queue = Queue()

def do_something(arg1, arg2, queue):
    # Do some stuff...
    result = arg1 + arg2

    queue.put(result)

def init_thread(*arguments):
    t = Thread(target=do_something, args=(arguments, the_queue))
    t.start()
    t.join()

init_thread(3,6) 
```

这会引发异常：

```
TypeError: do_something() takes exactly 3 arguments (2 given) 
```

换句话说，“参数”元组被评估为一个元组对象（即它没有被解包），而 the_queue 被视为第二个参数。

代码需要能够初始化调用具有未知数量参数的不同方法的线程，但最后总是会有一个“队列”参数。

有什么办法可以做到这一点？在那种情况下，怎么办？如果不是 - 我做错了什么？

谢谢。

编辑：我应该补充一点，以队列作为参数调用“init_thread()”方法不是一个选项，因为我不希望我的其余代码“知道”线程处理程序在内部是如何工作的。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:33:53.233

你需要制作一个新的`tuple`.

```
t = Thread(target = do_something, args = arguments + (the_queue, )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:26:02.013

您还可以解压缩打包的 *arguments 元组，如下所示：

```
>>> def Print(*args):
...     print('I am prepended to every message!', *args)
... 
>>> Print('This', 'has', 'four', 'arguments')
I am prepended to every message! This has four arguments
>>> def Print(*args):
...     print('I am prepended to every message!', args)
... 
>>> Print('This', 'has', 'four', 'arguments')
I am prepended to every message! ('This', 'has', 'four', 'arguments') 
```

所以你看，引用 *agruments，而不是参数，将解包元组。因此，您的代码可能是：

```
def init_thread(*arguments):  
    t = Thread(target=do_something, args=(*arguments, the_queue))
    t.start()
    t.join() 
```

# java - 为什么我在向按钮添加 ActionListener 时突然需要将变量声明为“final”？

> ID：11403441
> 
> 赞同：0
> 
> 时间：2012-07-09T21:27:44.423
> 
> 标签：java, jframe, jbutton, actionlistener, final

> **可能重复：**
> [为什么在匿名类中只能访问最终变量？](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)

这是我为班级创建的“随机数学游戏”的代码：

```
package RandomMathGame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class RandomMathGame {

    public static void main(String[] args) {
        RandomProblemGenerator randomProblems = new RandomProblemGenerator(10);
        final int numberProblems = 10;
        int correctScore = 0;
        JPanel panel = new JPanel();
       int answer;
        int correctAnswer;
        JLabel[] mathProblems = new JLabel[numberProblems];
        final JTextField[] mathAnswers = new JTextField[numberProblems];
        JLabel[] correctYesNo = new JLabel[numberProblems];
        final JLabel score = new JLabel(correctScore + "/10");
        JButton submit = new JButton("Submit");
        for (int i = 1; i <= numberProblems; i++)
        {
            final int X = randomProblems.createNumberX();
            final int Y = randomProblems.createNumberY();

            mathProblems[i] = new JLabel("" + X + " * " + Y + " = ");
            mathAnswers[i] = new JTextField();

             answer = Integer.parseInt(mathAnswers[i].getText());
             correctAnswer = X * Y;

            if (answer == correctAnswer)
            {
                correctYesNo[i] = new JLabel("Correct answer; good job!");
                correctScore = correctScore + 1;
            }
            else
            {
               correctYesNo[i] = new JLabel("Incorrect answer; try again!");

            }
             panel.add(mathProblems[i]);
             panel.add(mathAnswers[i]);
             panel.add(correctYesNo[i]);
            }
      submit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                score.setText("Score: " + correctScore + "/10");
            }
        });

        panel.add(submit);
        panel.add(score);

        JFrame gameFrame = new JFrame();
        gameFrame.setTitle("Random Math Game");
        gameFrame.setSize(150, 150);
        gameFrame.setVisible(true);
        gameFrame.setContentPane(panel);

        }
  } 
```

我收到一个错误，必须将正确的分数变量声明为 final，然后 ActionListener 才能使用它。但是当我将correctScore设置为final时，它会导致各种其他错误。任何人都可以想办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:32:02.613

要将局部变量传递给匿名类，它必须是 final 的——这是 Java 语言的一部分。现在，当原始变量为 final 时，您无法修改它，因此在制作`correctScore`final 时会出现问题。

一种解决方法是在调用之前使用临时变量`addActionListener`：

```
final int temp = correctScore; 
```

并在您的方法中使用该`temp`变量。`actionPerformed`

请注意，当您这样做时，将来对 correctScore 所做的任何更改都**不会**反映在 temp 的值中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:31:44.223

在 Java 中，如果要从本地类（

```
new ActionListener() {
...
...
} 
```

是一个新的本地匿名类）该变量必须声明为 final。

本地类不能访问没有`final`修饰符的封闭方法的局部变量，例如：

```
public class Main {
    private int b=5;
    public void bla() {
    int a = 5;
    ActionListener al = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            a = 4; // Error. a must be final
            b = 5; // OK!
        }
    };
  }
} 
```

您的问题的一个可能解决方案是使用在任何方法之外声明的变量（上例中的 b ）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T21:34:33.093

您收到该消息是因为您已宣布 JLabel 分数为最终分数。您不能使用非最终变量来设置最终变量的值。我不知道你为什么要打进决赛。只需删除该决赛。

编辑：我在第一次阅读时错过了 correctScore 是一个函数变量。如果您将其设为类变量，我认为您的许多问题都会消失。

# asp.net-mvc - 将集合传递给 EditorFor() 时，它会为输入元素生成无效名称

> ID：11403442
> 
> 赞同：10
> 
> 时间：2012-07-09T21:27:44.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, model-binding, editorfor

我有一个 BookCreateModel，其中包含书籍的平面信息，例如 Title、PublishYear 等以及书籍作者的集合（复杂类型）：

```
public class BookCreateModel
{
    public string Title { get; set; }
    public int Year { get; set; }
    public IList<AuthorEntryModel> Authors { get; set; }
}

public class AuthorEntryModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

在 CreateBook 视图中，我使用了`EditorFor`helper ：

```
@Html.EditorFor(m => m.Authors, "AuthorSelector") 
```

## 编辑1：

AuthorSelector 模板如下：

```
<div class="ptr_authors_wrapper">
    @for (int i = 0; i < Model.Count; i++)
    {
       <div class="ptr_author_line" data-line-index="@i">
        @Html.TextBoxFor(o => o[i].FirstName)
        @Html.TextBoxFor(o => o[i].LastName)
       </div>
    }
</div>
<script>
     ...
</script> 
```

模板包含一些包装标记，这些`AuthorSelector`标记需要了解每个渲染项目的索引以及一些处理子输入交互的 javascript，并且需要渲染一次（在`AuthorSelector`模板内），因此摆脱了 for 循环/或 AuthorSelector 模板是不可能。

现在的问题是 EditorFor 的行为有点奇怪，并生成这样的输入名称：

```
<input id="Authors__0__FirstName" name="Authors.[0].FirstName" type="text" value="" />
<input id="Authors__0__LastName" name="Authors.[0].LastName" type="text" value="" /> 
```

正如您所看到的，它没有像生成名称那样`Authors[0].FirstName`添加一个额外的点，这使得默认模型绑定器无法解析发布的数据。

任何想法 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T22:01:03.737

我建议您遵守约定，即替换：

```
@Html.EditorFor(m => m.Authors, "AuthorSelector") 
```

和：

```
@Html.EditorFor(m => m.Authors) 
```

然后将您的重命名`~/Views/Shared/EditorTemplates/AuthorSelector.cshtml`为`~/Views/Shared/EditorTemplates/AuthorEntryModel.cshtml`并将其强类型化为单个`AuthorEntryModel`模型并摆脱循环：

```
@model AuthorEntryModel
@Html.TextBoxFor(o => o.FirstName)
@Html.TextBoxFor(o => o.LastName) 
```

ASP.NET MVC 将自动为集合的所有元素呈现编辑器模板并生成正确的名称。

* * *

更新：

看到您的更新后，这是我的回复：

在您的主视图中：

```
<div class="ptr_authors_wrapper">
    @Html.EditorFor(m => m.Authors)
</div> 
```

在您的编辑器模板中：

```
@model AuthorEntryModel
<div class="ptr_author_line">
    @Html.TextBoxFor(o => o.FirstName)
    @Html.TextBoxFor(o => o.LastName)
</div> 
```

您会注意到模板中没有脚本，这是完全正常的。脚本与标记无关。它们进入单独的 javascript 文件。在这个文件中，您可以使用 jQuery 对您的标记做任何您需要做的事情。它为您提供了一些方法，例如`.index()`允许您在匹配的选择器中获取元素的索引，这样您就不需要编写任何循环并用`data-line-index`属性之类的东西污染您的标记。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-22T08:10:49.747

我参加聚会有点晚了，但希望这对某人有所帮助。

深入到`System.Web.Mvc.Html.DefaultEditorTemplates.CollectionTemplate(HtmlHelper html, TemplateHelpers.TemplateHelperDelegate templateHelper)`，框架的默认模板通过临时将 设置`HtmlFieldPrefix`为空字符串并将前缀和索引显式传递给对 的调用来处理此问题`EditorFor()`。

```
<div class="ptr_authors_wrapper">
@{
    var prefix = ViewData.TemplateInfo.HtmlFieldPrefix;

    ViewData.TemplateInfo.HtmlFieldPrefix = String.Empty;

    for (int i = 0; i < Model.Count; i++)
    {
        <div class="ptr_author_line" data-line-index="@i">
            @* You can also use null instead of "TextBox" to let the framework resolve which editor to use. *@
            @Html.EditorFor(o => o[i].FirstName, "TextBox", String.Format("{0}[{1}].FirstName", prefix, i))
            @Html.EditorFor(o => o[i].LastName, "TextBox", String.Format("{0}[{1}].LastName", prefix, i))
        </div>
    }

    ViewData.TemplateInfo.HtmlFieldPrefix = prefix;
}
</div>
<script>
     ...
</script> 
```

`[0].Children.[0].ChildProperty`由于 Children 集合的命名模板，当框架编写名称时，我发现这特别有用。就我而言，解决方案是调用：

```
@Html.EditorFor(m => m[i], null, String.Format("{0}[{1}]", prefix, i)) 
```

而不是简单地调用：

```
@Html.EditorFor(m => m[i]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:07:44.200

不知道它是否仍然相关，但此博客涵盖了您的问题的解决方案：http: [//btburnett.com/2011/03/correcting-mvc-3-editorfor-template-field-names-when-using-collections .html](http://btburnett.com/2011/03/correcting-mvc-3-editorfor-template-field-names-when-using-collections.html)

--> 感谢[itsmatt](https://stackoverflow.com/a/7114739/1499046)找到它 :) Jakob

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T23:04:21.480

这是您可以使用的扩展方法，它将呈现部分视图并使用正确的 HTML 字段前缀：

**扩展方法**

```
 /// <summary>
    /// Helper method that renders the specified partial view as a HTML-encoded string using the specified
    /// collection as the model, with the intention that the partial view will use an editor template on the items
    /// in the collection.
    /// </summary>
    /// <typeparam name="TModel">the model type</typeparam>
    /// <typeparam name="TProperty">the property type</typeparam>
    /// <param name="htmlHelper">the <see cref="HtmlHelper"/> instance</param>
    /// <param name="partialViewName">the name of the partial view to render</param>
    /// <param name="collectionExpression">the model collection property expression</param>
    /// <returns>the HTML-encoded string</returns>
    public static MvcHtmlString PartialContainingEditorForCollection<TModel, TProperty>
        (this HtmlHelper<TModel> htmlHelper, string partialViewName,
         Expression<Func<TModel, TProperty>> collectionExpression)
        where TProperty : IEnumerable
    {
        var viewData = htmlHelper.ViewContext.ViewData;
        var model = (TModel) viewData.Model;
        var collection = collectionExpression.Compile().Invoke(model);

        var htmlFieldPrefix = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(
            ExpressionHelper.GetExpressionText(collectionExpression));

        return htmlHelper.Partial(partialViewName, collection,
                                  new ViewDataDictionary
                                      {
                                          TemplateInfo = new TemplateInfo {HtmlFieldPrefix = htmlFieldPrefix}
                                      });
    } 
```

**示例使用**

```
@Html.PartialContainingEditorForCollection("_TableWithSummary", m => Model.FormModel.ItemsToOrder) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:23:55.743

我还没有找到任何解决此错误的方法，但作为一种解决方法，我`UpdateModel`通过使用自定义包装类而不是直接使用集合来更改我的方法：

```
public class BookCreateModel
{
    public string Title { get; set; }
    public int Year { get; set; }
    public BookAuthorsList Authors { get; set; }
}

public class BookAuthorsList
{
    public IList<AuthorEntryModel> AuthorsList { get; set; }
}

public class AuthorEntryModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

因此生成的输入不会再产生命名问题了:)

```
<input  id="Authors_AuthorsList_0__FirstName" name="Authors.AuthorsList[0].FirstName" type="text"/>
<input  id="Authors_AuthorsList_0__LastName" name="Authors.AuthorsList[0].LastName" type="text"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-18T17:04:15.827

当我试图找到几乎相同问题的解决方案时，我偶然发现了这一点。我的解决方法是把罐子踢到路上，即。为集合制作包装模型并在编辑器模板中使用它。在提供的情况下，它将是：

```
public class BookCreateModel
{
    public string Title { get; set; }
    public int Year { get; set; }
    public BookAuthorsModel Authors { get; set; }
}

public class BookAuthorsModel
{
    IList<AuthorEntryModel> Items { get; set; }
} 
```

然后将您的编辑器模板重命名为“BookAuthorsModel.cshtml”并使其如下所示：

```
@model BookAuthorsModel
<div class="ptr_authors_wrapper">
    @for (int i = 0; i < Model.Items.Count; i++)
    {
       <div class="ptr_author_line" data-line-index="@i">
        @Html.TextBoxFor(o => Items.o[i].FirstName)
        @Html.TextBoxFor(o => Items.o[i].LastName)
       </div>
    }
</div>
<script>
     ...
</script> 
```

当你想使用它时，只需调用：

```
@Html.EditorFor(m => m.Authors) 
```

然后它应该生成如下输入字段：

```
<input id="Authors_Items_0__FirstName" name="Authors.Items[0].FirstName" type="text" value="" />
<input id="Authors_Items_0__LastName" name="Authors.Items[0].LastName" type="text" value="" /> 
```

就我而言，我还适当地更改了 Automapper 映射设置控制器代码。然而，这不适用于一些更复杂的场景，因此可能只是一种解决方法。

# eclipse - 通过 ANT 将文件从工作空间中的文件夹复制到项目中的文件夹

> ID：11403447
> 
> 赞同：0
> 
> 时间：2012-07-09T21:28:10.533
> 
> 标签：eclipse, ant

我有一个文件需要从工作区/dir1 复制到当前项目[workspace/dir2]

我的 ANT 构建文件在 dir2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:34:14.993

您是否查看了可供您使用的[ant 任务？](http://ant.apache.org/manual/tasksoverview.html)

[复制任务](http://ant.apache.org/manual/Tasks/copy.html)可用于执行此操作：

```
<copy file="../dir1/filename" todir="."/> 
```

仅当项目目录中不存在该文件，或者其中的文件`../dir1`比项目目录中的现有副本新时，才会发生副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T06:52:08.113

使用以下代码复制工作区

```
<project name="ant_workspace_demo">
    <target name="copy_workspace">
        <copy todir="../New_files">
            <fileset dir="AntWorkspace"/>
        </copy>
    </target>
</project> 
```

然后，在命令提示符（Windows）中输入“ant copy_workspace”。

# php - 使用 jQuery .val() 方法处理空格。（使用 Codeigniter）

> ID：11403449
> 
> 赞同：1
> 
> 时间：2012-07-09T21:28:18.587
> 
> 标签：php, jquery, ajax, codeigniter

我对 jQuery 中的 .val() 方法如何处理空格（如果它根本是 jQuery 问题）感到困惑。

我的示例是使用我正在慢慢开发的 AJAX 建议框功能。它使用 Codeigniter 作为框架。

我有这个 jQuery 代码：

```
$(document).ready(function(){
    $("#suggestbox").hide();
    $("#searchboxinput").live("keyup", function(){
        if ($("#searchboxinput").val().length==0){
            $("#suggestbox").fadeOut(100);
        }else{
            $("#suggestbox").fadeIn(100);
            $("#sugresultcontain").load('http://localhost/ajaxtest/ajaxhandle/suggest/'+$("#searchboxinput").val()+' #loadsuggest');
        };
    });
}); 
```

'#suggestboxinput' 是一个文本输入，如下所示：

```
<div id="content" class="clear">
    <div id="searchwrap" class="clear">
        <div id="searchbox" class="float-left"><input id="searchboxinput" name="" value="" type="text"></div>
        <div id="searchbutton" class="float-right"><input id="searchbuttoninput" name="" type="button" value="Go"></div>
    </div>
    <div id="suggestbox" class="clear">
        <div id="suggesthead">Suggestions:</div>
        <div id="sugresultcontain"></div>
    </div>
</div> 
```

然后我有（使用代码点火器）一个处理 .load() 的方法，如图所示：

```
public function suggest($q=''){

        $suggest = $this->ajax_handle->suggest();

        for($i=0; $i<count($suggest); $i++){
            $db[$i] = $suggest[$i]['firstname'].' '.$suggest[$i]['lastname'];
        }

        if(strlen($q)>0){
            $sugstr = '';
            $e = 0;

            for($f=0; $f<count($db); $f++){
                if (strtolower($q)==strtolower(substr($db[$f],0,strlen($q)))){
                    $sugresult[$e] = $db[$f];
                    $e++;
                }
            }

            if(isset($sugresult)){
                $data['sugresult'] = $sugresult;
                $this->load->view('ajaxref/suggest', $data);
            }else{
                $this->load->view('ajaxref/suggest');
            }
        }else{
            $this->load->view('ajaxref/suggest');
        }
    } 
```

这几乎可以按预期工作，如果我加载页面然后使用数据库中的名称显示的文本输入（根据文本字段）。如果我输入名字，它会正常工作，并且无论我在字段后放置多少空格都会继续显示（这是完美的）。

然而，问题在于即使只在一个空格（Dominic Sore）或什至只在第一个字母或姓氏（Dominic S）之后输入姓氏。建议框中不显示名称。

我读过在输入框中使用“+”符号会起作用。我对其进行了测试，它确实有效（Dominic+Sore 在建议框中输出 Dominic Sore）。不过可以理解的是，我不能让用户为他们想要使用的每个空间都输入一个“+”。

所以我只是想知道我该如何处理？我已经阅读了很多，但我找不到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:32:51.263

鉴于 using有效，在提交变量进行匹配之前`+`，可能值得使用对变量进行 url 编码，以提供：`encodeURIComponent()`

```
$("#sugresultcontain").load('http://localhost/ajaxtest/ajaxhandle/suggest/'+encodeURIComponent($("#searchboxinput").val())+' #loadsuggest'); 
```

或者，您可以进行简单的替换：

```
$('#searchboxinput').val().replace(/\w/g,'+'); 
```

但是`encodeURIComponent`更可靠，并且会正确编码撇号（O'Neill）以及空格字符。

参考：

*   [`encodeURIComponent()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent).
*   [`string.replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/string/replace).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:33:54.047

尝试[`$.trim`](http://api.jquery.com/jQuery.trim/)方法：

> 删除字符串开头和结尾的空格。

```
var txt = $.trim($("#searchboxinput").val()).replace(' ', '+') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:37:10.140

如果我理解正确，问题就出在这条线上

```
$("#sugresultcontain").load('http://localhost/ajaxtest/ajaxhandle/suggest/'+$("#searchboxinput").val()+' #loadsuggest'); 
```

这样想，你是通过连接几个部分来制作一个字符串。假设您的输入`" something"`中有，这意味着您正在加载：

```
'http://localhost/ajaxtest/ajaxhandle/suggest/    something #loadsuggest' 
```

这显然不会按预期工作。您需要做的是修剪输入中的值，最好确保它仅包含有效的 url 字符（否则输入中的 / 或 ? 可能会出于同样的原因破坏查询）

沿着这些思路：

```
var suggest_url_part = encodeURIComponent($("#searchboxinput").val().trim());
if (suggest_url_part.length) {    
  $("#sugresultcontain").load('http://localhost/ajaxtest/ajaxhandle/suggest/' + suggest_url_part + '#loadsuggest');
} 
```

# asp.net - 如何最好地在单个表行中跟踪任务开始时间和结束时间？

> ID：11403453
> 
> 赞同：0
> 
> 时间：2012-07-09T21:28:29.270
> 
> 标签：asp.net, sql-server-2008, tsql, webforms

一个人打开网站上的页面以执行质量控制任务。在一页上，质量控制活动在用户点击开始按钮时开始。在另一个页面上，活动在页面加载时开始。

质量控制活动可以在以下人员结束时结束：

1.  完成任务，
2.  另存为不完整，或
3.  只是关闭浏览器窗口。

EndTime 可以发生在质量控制任务开始后 10 秒到 30 分钟的任何时间。

**问题：** 如果您有一个包含**ActivityID**、**StartTime**和**EndTime**列的表，那么当更新现有记录的行为发生在存储过程之外时，将这些信息保存到表中的最佳方法是什么插入记录？必须捕获 StartTime，这很简单，但是，无论任务完成多久，都必须捕获唯一 Activity 的 End Time，并且必须将 Activity EndTime 从 NULL 更改为“完成”。

需要考虑的一些场景：

*   人 A 开始一个活动，然后完成它。10 秒后，B 人开始并结束。

*   A 人开始一个活动，然后 B 人在 10 秒后开始，A 人比 B 人提前 5 秒完成。（我相信任何类型的范围函数都可以在这里工作...... [http://blog.sqlauthority.com /2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)？）

这条路线可以接受吗...？编写一个 proc 以在页面加载时调用 Insert。作为 proc 的一部分，插入新活动和开始时间，并返回 ActivityID 的值（此处描述的一种方法： [获取最后插入记录的 ID](https://stackoverflow.com/questions/5323528/get-the-id-of-last-inserted-records)）。当网页遇到“结束”事件时，传递从第一个 proc 返回的 ActivityID，并调用一个 proc，为来自第一个 proc 的 AcitivityID 添加结束时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:34:25.017

```
 insert into [Table_2] ([valueStart]) values('start');
  select SCOPE_IDENTITY();

  int sqlIden = SQLcommand.execute();

  // perform task

  update [Table_2] set [valueFinish] = 'finish' where [id] = sqlIden.ToString(); 
```

# c# - 文件名加密（无非法字 符）

> ID：11403463
> 
> 赞同：2
> 
> 时间：2012-07-09T21:29:28.550
> 
> 标签：c#, encryption, filenames

我有一个加密函数，可以加密字符串以用作文件名。问题是许多加密字符串包含在 Windows 中的文件名中不允许出现的字符，例如 / 或 \ ...

有什么方法可以加密文件名（或者至少让用户无法直接读取它们，直到它们被程序解密）？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:34:27.803

假设文件名没有值（如果有，我会将该数据添加为文件内容），我将只使用[Path.GetRandomFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename.aspx)并传递它。

> [Path.GetRandomFileName] 返回可用作文件夹名称或文件名的加密强随机字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T21:39:01.467

我会让文件名*没有意义*，但不*加密*。这将使您的生活更轻松。然后我会加密文件的*内容*。

要获得随机名称，您可以尝试

*   [`Path.GetRandomFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename.aspx). 它返回一个名称，但不创建文件。

    示例输出：**atqsfpoj.rsh**

*   [`Path.GetTempFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx). *它在%TEMP%*文件夹中创建一个唯一命名的零字节文件。

    示例输出：**C:\Users\%UserName%\AppData\Local\Temp\tmp35AD.tmp**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:49:01.840

我认为他要求的是一个只返回字母的函数。不久前我写了类似的东西，但是有一个库：试试这个[链接](http://www.codeproject.com/Articles/6465/Using-CryptoStream-in-C)

# jquery - 谷歌在搜索栏上自动完成？

> ID：11403464
> 
> 赞同：0
> 
> 时间：2012-07-09T21:29:30.567
> 
> 标签：jquery, jquery-ui, autocomplete, google-search

我发现了许多不同的方法来将自动完成添加到文本输入中。

如：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

我想要的是一种不必键入某人可能键入的所有可能性而只需使用 Google 的自动完成选项的方法。就像当你输入“狗”时，我得到“狗品种”“狗堆”和“赏金猎人狗”。我希望在输入文本时出现相同的内容。我发现的这些工具要求您添加人们可以单击的选项。

如果您需要进一步解释，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:35:28.990

这很容易做到。谷歌为此提供了一个 api：

[http://suggestqueries.google.com/complete/search?client=firefox&q=dog](http://suggestqueries.google.com/complete/search?client=firefox&q=dog)

该`client`参数是必需的。

结果：

`["dog",["dog breeds","dogpile","dog the bounty hunter"],["","",""],[],{"google:suggesttype":["QUERY","QUERY","QUERY"]}]`

然后你的工作就是解析它并将信息提供给你的自动完成插件。

* * *

编辑：我还发现了这种访问 api 的方式：http: [//google.com/complete/search](http://google.com/complete/search?output=toolbar&q=microsoft) ?output=toolbar&q=microsoft来自[https://groups.google.com/forum/?fromgroups#!topic/google- ajax-搜索-api/UXTiCJMvKLo](https://groups.google.com/forum/?fromgroups#!topic/google-ajax-search-api/UXTiCJMvKLo)

至少根据这个人的说法，您似乎无法将其用于您的网站。

# iphone - 如何获取 UIWebView 正在加载的 url？

> ID：11403465
> 
> 赞同：0
> 
> 时间：2012-07-09T21:29:34.940
> 
> 标签：iphone

在我的 WebView 中，当用户单击 webview 中的链接时，该属性在哪里？我查看了文档并尝试了类似的东西

```
[webView.request.URL description]
webView.request.URL.absoluteURL or absoluteString 
```

，一切都是空白的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:00:58.273

实现委托功能，如

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType 
{
    if(navigationType == UIWebViewNavigationTypeLinkClicked)
    {
        // Its following the click on some link on the loaded webpage
        NSString  *strLink = [[request URL] absoluteString]; // Clicked Link URL
    }
    return YES; // return YES if you allow the page to load else return NO  
} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:45:51.943

当用户点击任何链接时，您需要捕获 webview 委托功能

> ```
> - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
>   NSURL *url = [request URL];
>   NSString *link =   [url absoluteString];
>   return YES;   
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:15:55.260

也许试试这个：

```
NSString *link = [webView.request.URL absoluteString]; 
```

希望这可以帮助！

# python - Python Regex - 删除特殊字符但保留撇号

> ID：11403474
> 
> 赞同：5
> 
> 时间：2012-07-09T21:30:14.697
> 
> 标签：python, regex

我正在尝试从某些文本中删除所有特殊字符，这是我的正则表达式：

```
pattern = re.compile('[\W_]+', re.UNICODE)
words = str(pattern.sub(' ', words)) 
```

超级简单，但不幸的是它在使用撇号（单引号）时会引起问题。例如，如果我有单词“doesn't”，则此代码将返回“doesn”。

有什么方法可以调整这个正则表达式，使其不会在这样的情况下删除撇号？

**编辑：**这是我所追求的：

> ```
> doesn't this mean it -technically- works? 
> ```

应该：

> 这是否意味着它在技术上有效

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T21:44:01.110

像这样？

```
>>> pattern=re.compile("[^\w']")
>>> pattern.sub(' ', "doesn't it rain today?")
"doesn't it rain today " 
```

如果下划线也应该被过滤掉：

```
>>> re.compile("[^\w']|_").sub(" ","doesn't this _technically_ means it works? naïve I am ...")
"doesn't this  technically  means it works  naïve I am    " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:43:10.260

我能够使用此正则表达式将您的样本解析为单词列表：`[a-z]*'?[a-z]+`。

然后你可以用空格将列表的元素连接回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:44:35.570

怎么样

```
re.sub(r"[^\w' ]", "", "doesn't this mean it -technically- works?") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:44:36.690

怎么样`([^\w']|_)+`？

请注意，这不适用于以下情况：

```
doesn't this mean it 'technically' works? 
```

这可能不是你所追求的。

# iis - Windows 7 starter 32bit 的 iis 配置

> ID：11403478
> 
> 赞同：0
> 
> 时间：2012-07-09T21:30:28.437
> 
> 标签：iis, iis-7, asp-classic

我遵循了很多配置 IIS 的教程，因为我需要查看一个用 ASP clasic 构建的网站，我的问题是当我尝试配置 IIS 时我看不到 ASP 文件夹 ![在此处输入图像描述](../Images/d574fad2ae13f562eea4308466057e26.png)

我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:33:37.807

不知道你的Windows版本，但是在我的Win7 Pro英文系统上，是

> Internet 信息服务 -> 万维网服务 -> 应用程序开发功能 -> ASP

# pentaho - 在 Pentaho 报表设计器中使用默认公式中的参数作为另一个参数

> ID：11403482
> 
> 赞同：0
> 
> 时间：2012-07-09T21:30:35.887
> 
> 标签：pentaho

我在 Pentaho 报告中定义了两个参数，它们都是日期，结束日期是用户选择的，例如。2012-07-09（2012 年 7 月 9 日）。另一个参数（开始日期）是隐藏的，应该是结束日期-6，所以是 2012 年 7 月 3 日。有什么办法可以将结束日期传递给开始日期参数并在默认公式值中使用它.

如果有人可以帮助我，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:53:08.787

是的。首先定义结束日期，然后在开始日期的默认值中，您可以参考公式中的 [enddate] 减去 6。

关键是在隐藏开始日期之前先定义 endDate。

# sql-server - 这个关于独特功能的“提示”是否已过时？

> ID：11403488
> 
> 赞同：0
> 
> 时间：2012-07-09T21:30:52.327
> 
> 标签：sql-server, sql-server-2008, distinct

所以根据[这个](http://weblogs.sqlteam.com/jeffs/archive/2007/10/12/sql-distinct-group-by.aspx)大约在 2007 年的网站，我们不应该将`distinct`其用作函数，即不要做类似的事情

```
select distinct(employeeID), salary
from salaryhist 
```

这仍然是真的吗？我很难通过查询弄清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:45:10.557

DISTINCT***不是***函数。它从来没有（而且可能永远不会）

该表达式`select distinct (employeeID)`不是函数调用。

它是关键字`select`后跟 keyowrd`distinct`后跟列表达式`(employeeID)`。

为了让事情更清楚，以下三件事是相同的：

*   `select distinct employeeID, (salary)`
*   `select distinct (employeeID), (salary)`
*   `select distinct employeeID, salary`

所有都是相同的，因为`employeeID`并且`(employeeID)`是相同的东西：对列的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:34:38.597

与查询相比，您必须获得更好的结果，

按employeeID 从salaryhist 组中选择employeeID, sum(salary)

# asp.net - 用户键入暂停时，ASP.NET 下拉列表位置丢失

> ID：11403494
> 
> 赞同：1
> 
> 时间：2012-07-09T21:31:12.753
> 
> 标签：asp.net, drop-down-menu, position

我的一个最终用户刚刚报告了一个 ASP.NET 2.0 应用程序中的一个奇怪问题，我已经确认了这一点，但这对我来说似乎很奇怪。我的 Web 表单上有一个 DropDownList 控件，它显示了几十个不同的项目。他们浏览列表的最简单方法是键入他们要选择的项目的前几个字母。没问题，我们都熟悉这种方法。

当他们暂停输入，等待一秒钟左右（例如，查阅文档以获取序列号），然后继续输入目标选择的下一个字母时，就会出现问题。一旦他们继续输入，他们在列表中的位置就会被忽略，并且光标会移动到以他们键入的新字符序列开头的值。例如，如果他们试图选择“ PREAMBLE”，然后他们键入字母 PRE，第一个包含“PRE”的项目被突出显示。但是，如果他们暂停片刻，然后继续“AMBL”，列表会跳回到开头，并且第一个包含“AMBL”的列表项会突出显示。由于用户在其中一个下拉列表中输入序列号，这种暂停片刻的习惯是完全自然的，

我已经在 Chrome 和 Internet Explorer 和 Firefox 上对此进行了测试，所以我得出结论它不是特定于浏览器的。我可以在下拉列表中调整时间参数以允许更长时间的暂停吗？有没有办法禁用我在这里描述的行为？我可以在一个列表中复制该行为，其中只有七个项目。在一个有七项的清单上，这不是问题，但在一个有一百个项目的清单上，它就会变得很麻烦。

对此的任何见解将非常感激，以及有关如何避免它发生的任何建议，特别是如果我可以在逐个控制的基础上禁用它。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:38:20.310

您所看到的是任何下拉列表的正常行为..
直到您继续键入它作为自动完成.. 但是一旦您停止它就会开始在它包含的项目列表中再次搜索，

如果您只想保留当前的状态也..然后寻找像`Jquery AutoComplete`present [here](http://jqueryui.com/demos/autocomplete/)这样的解决方案，它将保持状态，并对所有键入的字符给予应有的重视。您可能面临的问题是它应用于文本框，但它会是用户更容易一路输入并同时查找提示

# jquery - jQuery 不会显示我的输入值？

> ID：11403496
> 
> 赞同：1
> 
> 时间：2012-07-09T21:31:18.223
> 
> 标签：jquery, html

我正在尝试从我的文本输入中获取值，并且现在只是在单击按钮时提醒它。无论出于何种原因，警报始终为空白？我尝试了许多不同的方法来解决这个问题，但没有一个奏效。请帮帮我。:\

正如你[在这里](http://jsfiddle.net/uA2we/65/ "JSFiddle")看到的。

我的 HTML：

```
<input type="text" id="item_text" />
<button id="button1">ClickMe</button> 
```

我的 jQuery：

```
$(document).ready(function(){

value = $("#item_text").attr('value'); 

$("#button1").click(function(){
alert(value);
});

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:34:40.253

您在页面加载时设置了值，然后在单击时将其打印出来。所以如果你改变了

```
<input type="text" id="item_text" /> 
```

...到...

```
<input type="text" id="item_text" value="waffles"/> 
```

...那么输出将永远是华夫饼。您要做的是检查单击时的值，然后将其打印出来。

解决此问题的最简单方法是检查 click 函数中的值，如下所示：

```
$(document).ready(function(){
    $("#button1").click(function(){
        value = $("#item_text").attr('value'); 
        alert(value);
    });
}); 
```

正如其他人指出的那样，最好使用`.val()`而不是`.attr('value')`. 不管怎样都行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:33:30.077

如何在点击事件中获取值

```
$(document).ready(function(){ 

 $("#button1").click(function(){
    value = $("#item_text").val();
    alert(value);
  });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:33:13.200

尝试直接访问值

```
$("#item_text").val(); 
```

# c++ - 保护可执行文件/应用程序以进行许可

> ID：11403497
> 
> 赞同：0
> 
> 时间：2012-07-09T21:31:20.453
> 
> 标签：c++, distribution, protection

当我想保护通用数据块以将此原则应用于通用应用程序的分发时，我正在考虑我拥有的各种选项。

*   加密没有意义，这就像给用户提供一些无法使用的东西，或者我必须同时提供加密文件和密钥来解密它，这更没有意义。
*   生成熵没有意义，因为这个过程只会以其他方式重新排列数据，而不会破坏应用程序的业务逻辑。
*   将我的应用程序包装在一个需要用户密码的可执行文件中，我的真实应用程序和我的包装器是双重链接的，如果我的包装器没有发出绿灯，我的应用程序将无法运行。
*   基于 Web 的分发，如流行的“Steam”服务，基于一些登录/ID 验证为每个用户定制编译。

还有哪些其他选择？我知道这不会最终得到一个明确的解决方案，但至少我想避免用户只是通过简单的复制和粘贴来重新分发我的应用程序，并且我希望在软件分发系统上至少有一点优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:38:20.990

这样做的通常方法是使用用户系统上已经存在的一些信息作为密钥来加密数据；然后将数据键入该系统。例如，在 Mac OS X 上，您可以通过库调用获取系统序列号。Sun 系统有一个 gethostid() 库调用，使这变得微不足道。*在哑*系统上工作的另一种方法*是*使用以太网接口的 MAC 地址或类似的东西。

这可能很棘手，您通常必须编写一个小程序，该程序将在系统中运行并生成密钥，然后让客户将此密钥通过电子邮件发送给您，或者至少确定程序将密钥通过电子邮件发送给您。然后，您可以使用返回的密钥信息对受保护的数据进行加密，并让客户下载。如果数据 blob 的大小合理，则可以将整个事务添加到您的应用程序安装程序中。

# facebook - Facebook Like 按钮网址？

> ID：11403502
> 
> 赞同：0
> 
> 时间：2012-07-09T21:31:30.270
> 
> 标签：facebook, facebook-social-plugins

是否有一个实际链接，如果单击并且有人登录，它们会自动像我的粉丝页面一样吗？我厌倦了 Facebook 糟糕的代码，正在寻找更好的“喜欢”按钮的替代品。欢迎提出建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:49:40.190

除了“喜欢”按钮之外没有其他任何东西。您唯一的其他选择是使用“赞”框。

[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)

如果您的意思是一个 Like Box，那么没有什么可以实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T14:24:00.893

最好使用 facebook like 按钮，因为它为您的网站或博客提供统计信息，您还可以创建或使用类似引用您的按钮的应用程序。

[Facebook Like 按钮 (Graph API v2.3)](https://developers.facebook.com/docs/plugins/like-button)

[脸书洞察](https://www.facebook.com/insights/)

[![在此处输入图像描述](../Images/af0c659e28b97a0e06da7be56662e73e.png)](https://i.stack.imgur.com/AVVLd.png)

# c++ - 与 HandsGenerator 相比，OpenNI UserGenerator 的手部位置坐标非常不稳定

> ID：11403504
> 
> 赞同：1
> 
> 时间：2012-07-09T21:31:39.113
> 
> 标签：c++, tracking, kinect, openni

我正在使用 Kinect 和 OpenNI 库来跟踪用户的手部。

据我所知，有两种方法可以做到这一点；要么使用[HandsGenerator](http://openni.org/docs2/Reference/classxn_1_1_hands_generator.html)并分别跟踪每只手，要么使用[UserGenerator](http://openni.org/docs2/Reference/classxn_1_1_user_generator.html)，然后使用[`GetSkeletonJoint`](http://openni.org/docs2/Reference/classxn_1_1_skeleton_capability_a7d231c73542460bc5b2d6c7ec7bf06ac.html#a7d231c73542460bc5b2d6c7ec7bf06ac)and `XN_SKEL_LEFT_HAND`/询问手的位置`XN_SKEL_RIGHT_HAND`。

由于各种原因，如果我可以只使用 会更方便`UserGenerator`，但它为我提供的两只手的坐标非常不稳定，以至于无法使用，即使在设置高平滑值时也是如此。相比之下，由 给出的坐标`HandsGenerator`非常精确和稳定。

两种方法的精度怎么差别这么大，有什么办法可以提高`UserGenerator`方法给出的坐标精度吗？

# c# - 在 XI 查询生成器中转换 SI_SCHEDULE_STATUS 的值

> ID：11403511
> 
> 赞同：0
> 
> 时间：2012-07-09T21:32:04.860
> 
> 标签：c#, business-objects, business-objects-sdk

我开始使用 Business Objects SDK，但在查找 SI_SCHEDULE_STATUS 属性的数值参考时遇到了麻烦。我在网上看到了一些示例查询，例如：

```
SELECT SI_NAME FROM CI_INFOOBJECTS WHERE SI_RECURRING = 1 and SI_SCHEDULE_STATUS = 9 
```

但是什么是 SI_SCHEDULE_STATUS 9？其他可能的值是什么？我发现[这个](http://devlibrary.businessobjects.com/businessobjectsxir2/en/en/boe_sdk/boesdk_dotnet_doc/doc/boesdk_net_doc/html/QueryLanguageReference150.html#2301823)提到值被映射到一个枚举，但我不确定如何（或是否）我可以将它转换为查询预期的数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:35:21.830

[再搜索一次，我在这里](http://www.forumtopics.com/busobj/viewtopic.php?p=799366&sid=e2e7321f72d1dc78c1105196a236f961)找到了答案。

```
COMPLETE 1 
FAILURE  3 
PAUSED   8 
PENDING  9 
RUNNING  0 
```

# php - 成功注销后如何管理php会话？

> ID：11403512
> 
> 赞同：1
> 
> 时间：2012-07-09T21:32:05.827
> 
> 标签：php, cakephp

在我的应用程序中有三个网页。1.) 登录页面。2.) 欢迎页面 3.) 登出页面

我已经使用 PHP 会话对象管理了会话。在我的应用程序中，登录和注销功能正常工作。

这里的问题是：当用户从logout.php页面点击浏览器后退按钮成功注销后，他再次到达welcome.php页面而他成功注销。但是我希望那里的页面已经过期或者不应该回到welcome.php 页面。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:36:24.573

这实际上有点棘手，但是（据我所知）这与缓存有关。

我设法通过 PHP 添加一些标头来避免这个特殊问题：

```
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
header("Pragma: no-cache"); 
```

这些当然应该只在用户登录时设置，因为缓存通常应该被认为是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:55:35.857

Why dont you check the authentication on ur welcome page.

Example:

`if($_SESSION['authenticated'] = true)` `include('welcome.php')` `else` `include('login.php)`

Another better application will be to redirect using Headers. `header('Location: ' (LINK) );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:34:43.263

您需要强制它刷新页面而不是从缓存中加载它。

加上不同的浏览器处理这个不同。尝试在浏览页面上向您的文档添加第二个部分

```
<HEAD>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
</HEAD> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:10:36.737

如果你使用 CakePHP 2，你也可以这样做

```
$this->response->disableCache(); 
```

这基本上与Repox给出的答案相同

# berkeley-db - 未找到伯克利 DB -ldb_cxx

> ID：11403513
> 
> 赞同：1
> 
> 时间：2012-07-09T21:32:08.260
> 
> 标签：berkeley-db

我正在构建一个需要 Berkeley DB (http://www.resiprocate.org) 的应用程序。我在 OS X 上构建，我必须安装 Berkeley DB，因为机器还没有它。但是，我尝试构建的 reSIProcate 包找不到 db_cxx 库 ( `-ldb_cxx`)。安装的 Berkeley DB`lib`目录只有以下文件：

```
libdb-5.3.a
libdb-5.3.dylib
libdb-5.4.la
libdb.a 
```

究竟是什么`db_cxx`……`-ldb_cxx`过时了？或者在安装 Berkeley DB 以创建和安装 db_cxx 库时我需要指定一些选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:42:42.213

libdb-cxx 是 c++ 所需的 API，默认情况下不构建它。要构建 libdb-cxx，请转到构建 Berkeley Db 的目录，然后

```
cd build_unix
../dist/configure --enable-cxx
make
sudo make install 
```

# ios - iOS 中的粒子效果

> ID：11403515
> 
> 赞同：-1
> 
> 时间：2012-07-09T21:32:18.437
> 
> 标签：ios, animation, core-graphics, particle-system

我聘请了一位开发人员来开发 iPhone 和 iPad 应用程序，作为应用程序的一部分，我们希望有粒子效果。

如何使用 CoreGraphics 实现粒子效果？请注意，我已将开发人员推荐到以下链接，但他告诉我由于泄漏而无法正常工作：http: [//www.clingmarks.com/generate-particles-along-a-path/822](http://www.clingmarks.com/generate-particles-along-a-path/822)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:35:44.090

如果我可以建议这个：[http](http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial) ://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial教程尝试实现你的粒子，也许你会有更好的运气。我没有亲自使用它，但我使用了 Ray 网站上的大量其他教程，它们都很棒。

此外，如果您只想调试当前的实现，这似乎是您的小菜一碟：[http ://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments -教程](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)。

希望有帮助！

# php - MySQL 将数据查询到 PHP 变量中

> ID：11403519
> 
> 赞同：0
> 
> 时间：2012-07-09T21:32:39.483
> 
> 标签：php, mysql

我想从 MySQL 数据库中获取一个值并将其放入 PHP 变量中。

我试过这个：

```
$data = mysql_query("SELECT userid FROM ao_user " . 
  "WHERE username = '{$this->_username}' " . 
  "AND password = '{$this->_password}' AND display = '{$this->_display}'"); 
```

代码显示用户名/密码无效。

这是用户登录代码：

```
<?php
  $username = "Nynex71";
  mysql_connect("localhost", "root", "test") or die(mysql_error());
  mysql_select_db("test") or die(mysql_error());
  $result = mysql_query("SELECT display FROM ao_user " . 
    "WHERE username = '{$username}'") or die(msyql_error());
  $row = mysql_fetch_assoc($result);
  echo $row['display'];
?> 
```

和

```
public function getDisplay()
  {
    mysql_connect("localhost", "root", "test") or die(mysql_error());
    mysql_select_db("test") or die(mysql_error());

    $result = mysql_query("SELECT display FROM ao_user " . 
      "WHERE username = '{$this->_username}'");
    $row = mysql_fetch_assoc($result);
    $this->_display = $row['display'];
    $_SESSION['display'] = $this->_display;
  } 
```

该程序不会将任何单词放入 PHP 变量中。我做错了什么，你是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:36:19.160

`mysql_query`返回结果句柄，而不是您选择的值。您必须先获取一行，然后从该行中检索值：

```
$result = mysql_query("SELECT ...") or die(msyql_error());
$row = mysql_fetch_assoc($result);
echo $row['userid']; 
```

# python - SWIG 中的预处理器宏

> ID：11403520
> 
> 赞同：5
> 
> 时间：2012-07-09T21:32:44.823
> 
> 标签：python, c, swig

我试图让 SWIG 识别一个简单的预处理器宏，该宏基于另一个定义和更复杂的函数“定义”一个新函数。因此，在 C 头文件中，我有：

```
#define FOO 1
#define my_macro_fun(args) my_fun(args,FOO) 
```

SWIG 看到并成功 wraps `my_fun`，但我希望它改为 wrap `my_macro_fun`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:38:04.460

SWIG 尝试找出[常量宏](http://www.swig.org/Doc1.3/Preprocessor.html#Preprocessor_nn5)并将它们包装起来，但它无法用这样的宏做任何聪明的事情。幸运的是，有一个简单的解决方法。假设您有以下头文件：

```
#define FOO 1
#define my_macro_fun(args) my_fun(args,FOO)

void my_fun(int a, int b); 
```

你可以像这样包装它：

```
%module test
%{
#include "test.h"
%}

%include "test.h" 
```

跳过该`my_macro_fun`功能。要让 SWIG 包装它，您需要做的就是：

```
%module test
%{
#include "test.h"
%}

// Lie! Tell SWIG that it should be wrapped like any other function.
void my_macro_fun(int);

// This is entirely optional: it will cause my_fun to be wrapped as well
%include "test.h" 
```

这个小谎言在 SWIG 中非常好——它会生成假设`my_macro_fun(int)`是可调用的包装器代码，就像你使用宏时一样。编译包装器时，编译器最终会在那里使用宏，没有人更聪明。

请注意，顺序很重要 - 真正是宏的函数需要`%include`位于接口文件中的 之前，否则 SWIG 将在解析您的声明期间尝试扩展宏，这会导致语法错误。您可以完全跳过`%include`，或者`%ignore`如果您想将它包含在其他部分但`my_fun`在生成的界面中抑制原始部分，则也可以使用。

* * *

对于一些 SWIG 语言（例如 Python），您还可以[使用 typemap default](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_nn30)：

```
%module test
%{
#include "test.h"
%}

%typemap(default) int b {
  $1 = FOO;
}

%include "test.h" 
```

如果没有为参数提供值，则为参数提供值。

# mysql - 庞大的数据集，ORDER BY 日期和限制

> ID：11403522
> 
> 赞同：0
> 
> 时间：2012-07-09T21:32:48.553
> 
> 标签：mysql, sql-order-by, limit

我有一个大约 3.5mio 行的 MySQL 表。我想遍历每一行。由于我不想加载所有 3.5mio 行，因此我将查询拆分为小查询。对于拆分，我使用日期字段。

现在的问题是：当我从表中选择大于指定日期的行时，它仍然会关注每个日期，将它们放在一个临时列表中，而不是削减 90% 的条目，因为我只想要小部分。

我怎样才能创建我的查询，以便我的计算机不会崩溃它加载整个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:42:14.350

简短的回答是确保您`ORDER BY`可以使用索引来满足您的需求，而不是需要文件排序操作。

您可以使用 EXPLAIN SELECT ... 来获取查询计划。

```
EXPLAIN
SELECT t.*
  FROM mytable t FORCE INDEX FOR ORDER BY (mytable_IX1)
 WHERE t.created_at > @last_created_at
    OR t.created_at = @last_created_at AND t.id > @last_id
 ORDER BY t.created_at, t.id
 LIMIT 1000

id select_type table  type  possible_keys key         key_len ref    rows Extra        
-- ----------- ------ ----- ------------- ----------- ------- ------ ---- -------------
 1 SIMPLE      t      range mytable_IX1   mytable_IX1 13      (NULL) 1000 Using where; Using index 
```

在第一次执行时，您只需要一个`t.created_at IS NOT NULL`谓词。在随后的执行中，您将从您获取的最后一行的列中传递值，因此您将从该点开始您的下一个查询。

# windows-phone-7 - 点击收到的 toast 通知时恢复应用

> ID：11403540
> 
> 赞同：1
> 
> 时间：2012-07-09T21:34:26.707
> 
> 标签：windows-phone-7

当用户点击收到的 toast 通知时，我正在尝试打开我的应用程序。我已设置服务器以发布此消息：

```
<?xml version="1.0" encoding="utf-8"?>
<wp:Notification xmlns:wp="WPNotification">
  <wp:Toast>
    <wp:Text1>Message</wp:Text1>
    <wp:Text2>Resume application</wp:Text2>
  </wp:Toast>
</wp:Notification> 
```

当我的应用程序在后台（或完全关闭）时，我会按预期收到通知，但是当我点击通知时，它只会打开应用程序并运行我的主页。

相反，我希望它：

*   如果应用关闭 => 打开主页（就像现在一样）
*   **如果后台应用程序 => 恢复应用程序**

我也尝试过使用“wp:Param”参数以及页面的绝对网址（这不是我想要的）和以“？”开头。（表示它应该将该参数传输到主页）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:31:17.763

内部机制的工作方式是，当从 toast 调用时，应用程序将始终在新实例中启动。

# c# - 运行单元测试时如何获得正确的字符串本地化？

> ID：11403542
> 
> 赞同：4
> 
> 时间：2012-07-09T21:34:28.237
> 
> 标签：c#, testing, localization, resource-file

我有一个项目需要支持法语和英语。我将所有字符串放入资源文件中。当我在 Visual Studio 中调试程序时，我可以成功查看法语程序。但是，当我为程序运行测试时，程序会恢复为英语。我将法语资源 dll 文件添加到部署中。这允许我用法语调试单个单元测试，但是当我单击测试 -> 调试 -> 解决方案中的所有测试时，程序以英语运行。

我也尝试将 [DeploymentItem(@"..\bin\x86\Release\fr", "fr-FR")] 添加到其中一项测试中，但这没有帮助。有人对如何解决这个问题有任何建议吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T03:55:32.313

我将语言测试包装在这样的 using 语句中：

```
[Test]
public void Loads_correct_labels_from_language()
{
    using(new LanguageSwitchContext("fr"))
    {
       var okayString = MyResources.Okay_Button;
       Assert.Equals("your localized string here", okayString);
    }
}

public class LanguageSwitchContext : IDisposable
{
    public CultureInfo PreviousLanguage { get; private set; }

    public LanguageSwitchContext(CultureInfo culture) 
    {
        PreviousLanguage = System.Threading.Thread.CurrentThread.CurrentCulture;
        System.Threading.Thread.CurrentThread.CurrentCulture = culture;
    }

    public LanguageSwitchContext(string language) 
    {
        //create culture from language
    }

    public void Dispose() 
    {
        System.Threading.CurrentThread.CurrentCulture = PreviousCulture;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T20:23:09.580

这里有两个潜在的问题：

1.  运行测试时，`CurrentUICulture`可能未设置为您希望测试的语言
2.  卫星程序集（在您的示例中只有法语）可能不会部署在单元测试环境中。当 ResourceManager 没有为 UI 文化找到匹配的附属程序集时，它默认为嵌入在项目的 DLL 本身中的基本语言（因此你会得到英语，假设那是你的基本语言）。

1.您可以确保`System.Threading.CurrentThread.CurrentUICulture = new CultureInfo("fr-FR");`在您的测试或测试类的初始化中设置。

对于 2\. 使用`DeploymentItemAttribute`你提到的类似应该工作。请确认在您成功运行法语应用程序时部署的附属程序集确实以相同的名称复制到测试部署的相同子文件夹中。这可能更像是`[DeploymentItem(@"bin\fr-FR", "fr-FR")]`

# jquery - 内容完全加载后颜色框返回 html

> ID：11403548
> 
> 赞同：1
> 
> 时间：2012-07-09T21:34:47.147
> 
> 标签：jquery, colorbox

我认为这个问题很容易解决，但我无法自己解决。

我正在使用`colorbox`简单的`ajax`请求从服务器加载一些 html，如下所示：

```
$.colorbox({
            href: false,
            scrolling:false,
            html: function(){
                $.post("image/render_image", {data: cardData},
                    function(response){
                        alert("I got response!");
                    }, "json"
                );

                return "I got displayed before response got back :/";
            }
        }); 
```

现在我正在发送发布请求，只有在收到回复后，我才想返回一些回复，我`html`该`colorbox`怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:47:21.663

尝试以下操作：

```
$.colorbox({
    href: "image/render_image",
    data: {data: cardData},
    scrolling:false,
    onComplete: function() {
        // do what do you want
    }
}); 
```

# mysql - 按邻近度排序结果（带坐标和半径）

> ID：11403552
> 
> 赞同：5
> 
> 时间：2012-07-09T21:34:59.333
> 
> 标签：mysql, sql, postgresql, geolocation, neo4j

给定一个包含 4 个圆的数据库，其中每个圆都有一个半径和一个地理定位中心：

```
id | radius | latitude | longitude
---+--------+----------+----------
 1 |      3 |    40.71 |    100.23
 2 |     10 |    50.13 |    100.23
 3 |     12 |    39.92 |    100.23
 4 |      4 |    80.99 |    100.23 
```

注意：为了简单起见，每个圆圈的经度都是相同的。

假设我们在圆 2 上，我想根据每个圆的`latitude`/`longitude`坐标和找到附近`radius`的每个圆。

例如，根据经纬度坐标，我们有这样的顺序：

1.  圈1（因为接近`9.42 <- 50.13 - 40.71`：）
2.  圈 3（因为接近`10.21 <- 50.13 - 39.92`：）
3.  圈4（因为接近`30.86 <- 80.99 - 50.13`：）

但是根据经纬度坐标和每个圆的半径，我们应该有：

1.  圈 3（因为接近`1.79 <- 12 - 10.21`：）
2.  圈1（因为接近`6.42 <- 9.42 - 3`：）
3.  圈4（因为接近`26.86 <- 30.86 - 4`：）

有没有一种简单的方法可以在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:38:37.217

postgresql 的 contrib 中提供的`cube`and`earthdistance`扩展可以处理这个问题，以产生至少近似的答案。具体来说，他们假设地球是一个简单的球体，这使得数学变得容易得多。

通过这些扩展，您可以生成第 2 圈和其他圈之间的距离，如下所示：

```
select circle.id,
       earth_distance(ll_to_earth(circle.latitude, circle.longitude),
                      ll_to_earth(x.latitude, x.longitude))
 from circle,
      circle x
 where x.id = 2 and circle.id <> x.id
 order by 2; 
```

校正圆半径应该只涉及从上面的距离中减去`x.radius`和`circle.radius`，尽管您需要考虑半径的单位。默认情况下，`earth_distance`将计算以米为单位的值。

现在，让查询做一些事情，而不是扫描整个圆圈列表并计算每个圆圈的距离，然后对它们进行排序和限制，这更具挑战性。有几种方法：

*   使用立方体的 gist 索引能力，因此您可以创建索引以在任何圆心周围的某些框中进行搜索，从而减少要考虑的圆列表。
*   每次编辑圆时，预先计算每个圆与所有其他圆之间的距离，使用触发器在单独的表中维护此计算。

第二个选项基本上从以下开始：

```
create table circle_distance as
select a.id as a_id, b.id as b_id,
 earth_distance(ll_to_earth(a.latitude, a.longitude),
                ll_to_earth(b.latitude, b.longitude))
 from circle a, circle b
 where a.id <> b.id;
alter table circle_distance add unique(a_id, b_id);
create index on circle_distance(a_id, earth_distance); 
```

然后是一些相当繁琐的函数来删除/插入相关行`circle_distance`，由触发器调用`circle`。这意味着您可以执行以下操作：

```
select b_id from earth_distance where a_id = $circle_id order by earth_distance limit $n 
```

此查询将能够使用该索引进行`(a_id,earth_distance)`快速扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:39:18.540

我建议查看 PostGIS Geography 数据类型及其相关功能（例如`ST_Distance`：），而不是重新发明轮子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:56:13.030

我建议你以下几点：

创建 1 个表格用于计算相对于起始圆的相对距离

例如：

```
id | calc1  | calc2    
---+--------+----------
 1 |  9.42  |    1.97
 3 |  10.21 |    6.42
 4 |  30.86 |   62.86 
```

Calc1 是没有半径的计算 calc2 是有半径的计算

然后创建一个存储过程，它在运行时首先删除表，然后用正确的数据填充它，然后从目标表中读取结果

[存储过程](http://www.eioba.com/a/1ign/a-basic-introduction-to-postgres-stored-procedures) [的介绍你也需要光标来做这个](http://www.postgresql.org/docs/current/static/plpgsql-cursors.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:22:17.057

在 neo4j 中，您可以查看 Neo4j Spatial，在[https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/pipes/GeoPipesTest 测试不同的操作。 java](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/pipes/GeoPipesTest.java)，其中也包括邻近搜索，例如[https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/pipes/GeoPipesTest.java#L150](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/pipes/GeoPipesTest.java#L150)

# php - jQuery 自定义模板无法正常工作

> ID：11403553
> 
> 赞同：0
> 
> 时间：2012-07-09T21:35:05.513
> 
> 标签：php, javascript, jquery, html, codeigniter

我在 Javascript/jQuery 中有一个自定义模板设置，我需要从 CodeIgniter 控制器中提取数据并将返回的 JSON 插入到 js/jQuery 模板中。我确实相信我的逻辑是正确的，但由于某种原因似乎没有任何效果，并且我在脚本的开头收到以下错误：

> 未捕获的 SyntaxError：输入意外结束

我该怎么做呢？到目前为止，我编写的代码如下所示：

```
$("#projects").click(function () {
    jQuery.ajax({
        type: "POST",
        dataType: "JSON",
        url: "<?=base_url()?>index.php/home/projectsSlider",
        data: dataString,
        json: {
            returned: true
        },
        success: function (data) {
            if (data.returned == true) {
                $("#content").fadeOut(150, function () {
                    $(this).replaceWith(projectsSlider(), function () {
                        var html = projectsSlider(data.projectId, data.projectName, data.startDate, data.finishedDate, data.createdFor, data.contributors, data.screenshotURI, data.websiteURL);
                        jQuery(html).appendTo("#content").fadeIn();
                    });
                });
            }
        }
    });
}); 
```

这是我的PHP：

```
function projectsSlider() {
    $query  = $this->db->query("SELECT * FROM projects ORDER BY idprojects DESC");
    foreach ($query->result() as $row) {
        $projectId = $row->projectId;
        $projectName = $row->projectName;
        $startDate = $row->startDate;
        $finishedDate = $row->finishedDate;
        $createdFor = $row->createdFor;
        $contributors = $row->contributors;
        $projectDesc = $row->projectDesc;
    }
    $query1 = $this->db->query("SELECT * FROM screenshots s WHERE s.projectId = '{$projectId}' ORDER BY s.idscreenshot DESC");
    foreach ($query1->result() as $row2) {
        $screenshotURI = $row2->screenshotURI;
        $websiteURL = $row->websiteURL;
    }
    echo json_encode(array('returned' => true,
        'projectId' => $projectId,
        'projectName' => $projectName,
        'startDate' => $startDate,
        'finishedDate' => $finishedDate,
        'projectDesc' => $projectDesc,
        'createdFor' => $createdFor,
        'contributors' => $contributors,
        'screenshotURI' => $screenshotURI,
        'websiteURL' => $websiteURL));
}
} 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:49:31.510

问题看起来像你有一个尾随}

编辑：在我重构时有人回答了，但我还是提供了这个版本：

```
function projectsSlider() {

    $query  = $this->db->query("SELECT * FROM projects ORDER BY idprojects DESC");
    $project = $query->fetch(PDO::FETCH_OBJECT);
    $project->screenshots = array();

    $query = $this->db->query("SELECT * FROM screenshots WHERE projectId = '$projectId' ORDER BY idscreenshot DESC");

    foreach ($query->result() as $screenshot) {
        $project->screenshots[] = $screenshot;
    }
    echo json_encode(array('returned' => true,'project'=>$project));

} 
```

由于您可以取而代之的是获取对象，因此您不必进行所有循环和转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:42:31.277

语法错误与您的代码逻辑无关。这意味着您的语法错误。`}`如果那是您唯一的 PHP 代码，那么它正在发生，因为您在函数末尾有一个额外的代码。您应该查看 PHP linter 以避免这些挂断。

# coldfusion - 在远程 CFC 方法中使用“var this”

> ID：11403555
> 
> 赞同：3
> 
> 时间：2012-07-09T21:35:18.390
> 
> 标签：coldfusion, coldfusion-9, cfc

我继承了一个项目，其中为一些 Ajax 请求打开了许多远程 CFC，并且在 CFC 中的大多数方法**内部**具有以下内容：

`<cfset var this.response = true />`

现在我从来没有见过像这样一起使用的`var`和`this`范围，所以我真的不知道该怎么做所以我想我的问题是：

**这是如何编码的有什么问题吗？如果是这样，它们是否足够重要，以至于我应该努力将所有 CFC 更新为类似的东西** `<cfset var req.response = true />`**？**

这是我所看到的一个简单示例：

```
<cfcomponent>

    <cffunction name="check_foo" access="remote" returnformat="plain">

        <cfargument
          name     = "isfoo"
          type     = "string"
          required = "false"
          default  = "nope"
          hint     = "I check the string for foo"
          />

        <cfscript>

          /*setup new response*/
          var this.response = false;

          /*check for foo*/
          if( !findnocase( "foo", arguments.isfoo ) ) {

            /*no foo!*/
            this.response = false;

          }

          return this.response;

        </cfscript>

    </cffunction>

</cfcomponent> 
```

.

* * *

## 更新：

1.  根据下面的反馈/答案，我已经替换了`var this`. 再次感谢所有提供帮助的人！

.

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:54:22.087

**更新**：检查您的转储后，“this”`var this`仍然是这个`this`范围，而不是 local.this。

它正在设置对`this`范围的响应，它在这种情况下起作用，因为每次远程调用 CFC 时都会实例化它。但是，最好重命名`this`为其他名称以确保线程安全，以防该方法被其他 CFC 作为公共方法调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T09:23:55.607

使用`var this`与使用相同`this`。

转储`local`范围将包括局部变量以及`Arguments`和`This`范围。（找不到这个记录；但我在一个裸 cfc 中得到了这个结果，你在你的截图中得到了它。）

因为您的功能是`access="remote"`每次调用都会获得 cfc 的新实例，因此是一个裸`This`范围。所以这些是“安全的”，但仍然是个坏主意。

`var this`如果在非远程函数中有任何使用，那么您将获得不希望的持久性，并且可能会遇到导致无效数据的竞争条件。

相关 CF 文档：

"[通过 Flash Remoting 和 Web 服务远程执行的方法总是在执行该方法之前创建一个新的 CFC 实例。](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=buildingComponents_15.html) "

"[只要 CFC 实例存在，此范围中的变量值就会持续存在，因此可以在对 CFC 实例的方法的调用之间持续存在。](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7dfb.html#WSc3ff6d0ea77859461172e0811cbec22c24-7e15) "

# asp.net-mvc-3 - 尝试在 MVC 3 中创建动态链接

> ID：11403563
> 
> 赞同：2
> 
> 时间：2012-07-09T21:35:46.600
> 
> 标签：asp.net-mvc-3, dynamic, hyperlink, webgrid

我在公司的 Intranet 站点上工作，在其中一个页面上，我需要包含指向 .PDF 文件的链接（如果存在）。没问题，我让它工作得很好。如果 .PDF 不存在，我遇到的问题是更改链接。这是我目前拥有的：

```
, grid.Column(format: (item) => (File.Exists(item.FileName)==true ? @<a href="@Url.Content(item.FileName)">Art Work</a> : Html.Raw(""))) 
```

我收到错误消息：参数 3：无法从 'lambda 表达式' 转换为 'System.Func'

AND 'System.Web.Helpers.WebGrid.Column(string, string, System.Func, string, bool)' 的最佳重载方法匹配有一些无效参数

我已经对 Google 进行了一些尽职调查，但找不到任何东西。有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:54:53.630

我肯定会编写一个自定义助手来负责生成正确的链接：

```
public static class HtmlExtensions
{
    public static IHtmlString LinkToFile(
        this HtmlHelper htmlHelper, 
        string filename
    )
    {
        var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);
        var file = htmlHelper.ViewContext.HttpContext.Server.MapPath(filename);
        if (!File.Exists(file))
        {
            return MvcHtmlString.Empty;
        }

        var anchor = new TagBuilder("a");
        anchor.Attributes["href"] = urlHelper.Content(filename);
        anchor.SetInnerText("Art Work");
        return new HtmlString(anchor.ToString());
    }
} 
```

然后在视图中简单地使用这个助手：

```
grid.Column(format: @<text>@Html.LinkToFile((string)item.FileName)</text>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:45:22.030

尝试这样的事情：

```
format: (item) =>
{
    if (File.Exists(item.FileName))
    {
        return new HtmlString(string.Format("<a href=\"{0}\">Art Work</a>", @Url.Content(item.FileName)));
    }

    return string.Empty;
} 
```

# javascript - Javascript array.length 为 0，直到我执行 alert()

> ID：11403566
> 
> 赞同：0
> 
> 时间：2012-07-09T21:36:10.143
> 
> 标签：javascript, scope, alert

我正在尝试编写一些基于来自 Sharepoint WebServices getList 的响应构建 html 控件的 javascript。我将控件存储在一个数组中。构建数组后，长度为 0，直到我执行警报，然后它变成正确的数字。

```
var controls = [];

$(document).ready(function() {
    // Make call to WebServices to retrieve list data
    $().SPServices({
        operation:    "GetList",
        listName:     qs["list"],
        completefunc: parseList
    });

    console.log(controls.length);           // this outputs 0
    alert("This has to be here to work.");  // this has to be here, no idea why
    console.log(controls.length);           // this outputs 6
    for (var i=0; i<controls.length; i++) {
        controls[i].addControl();
    }
});

function parseList(xData,status) {
    $(xData.responseXML).find("Field").each(function() {
        if ($(this).attr("ID") && $(this).attr("SourceID") != "http://schemas.microsoft.com/sharepoint/v3") {
            if ($(this).attr("Type") == "Text") {
                controls.push(new Textbox(this));
            } else if ($(this).attr("Type") == "Choice" && $(this).attr("Format") == "Dropdown") {
                controls.push(new Dropdown(this));
            } else if ($(this).attr("Type") == "Choice" && $(this).attr("Format") == "RadioButtons") {
                controls.push(new RadioButtons(this));
            } else if ($(this).attr("Type") == "MultiChoice") {
                controls.push(new MultiChoice(this));
            } else if ($(this).attr("Type") == "Boolean") {
                controls.push(new Boolean(this));
            }
        }
    });
} 
```

警报似乎是唯一可以`controls.length`正常工作的东西。我只能认为这是某种范围界定问题。任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:38:07.867

可能是由于这个异步代码

```
$().SPServices({
        operation:    "GetList",
        listName:     qs["list"],
        completefunc: parseList
}); 
```

警报会暂时停止线程执行，足以允许调用回调函数

所以试着移动这部分

```
console.log(controls.length);           // this outputs 6
for (var i=0; i<controls.length; i++) {
    controls[i].addControl();
} 
```

进入`parseList()`功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:38:45.350

`$().SPServices`是一个异步函数。在调用`controls`之前不会填充数组 。`parseList`移动循环以将控件添加到您的`parseList`回调中。

# asp.net-mvc-3 - 在输入文本框中获取值并将其发送到控制器

> ID：11403568
> 
> 赞同：-2
> 
> 时间：2012-07-09T21:36:15.600
> 
> 标签：asp.net-mvc-3, jquery

呈现输入值**文件名**并将其发送到控制器的方法有哪些：

```
<div id="fileuploaddiv" class="fileuploaddivclass">
<form action="@Model.FormAction" method="@Model.FormMethod"
    enctype="@Model.FormEnclosureType">
<input type="hidden" name="key" value="uploads/${filename}" id="filename" />
<input type="hidden" name="AWSAccessKeyId" value="@Model.AWSAccessKey" />
<input type="hidden" name="Content-Type" value="image/jpeg">
<div>
    Please specify a file, or a set of files:
    <input type="file" name="file" />
</div>
<input type="submit" value="Upload" />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:03:54.283

您需要查找一些 MVC3 约定（我建议将 NerdDinner 作为一个很好的入门教程），但这里有一个与您想要做的有点相似的方法：

```
@Model YourViewModel
<div id="fileuploaddiv" class="fileuploaddivclass">
    @using(Html.BeginForm(Model.FormAction, Model.FormController, FormMethod.Post)
        @Html.HiddenFor(model.key => ${fileName})
        @Html.HiddenFor(model.AWSAccessKeyID)
        @Html.HiddenFor(model.Content-Type)
        @<input type="submit" value="Submit My Form" />
    @Html.EndForm()
</div> 
```

您的模型看起来像（我在这里很困惑，因为您似乎在动态设置控制器和操作，这很不寻常）：

```
public class YourViewModel
{
     public string FormAction { get; set; }
     public string FormController { get; set; }
     public int AWSAccessKeyID { get; set; }
     public string Content-Type { get; set; }
} 
```

现在到控制器：

```
[HttpGet]
public ActionResult WhateverControllerName()
{
    YourViewModel yvm = new YourViewModel();
    //Initalize viewmodel here
    Return view(yvm);
}

[HttpPost]
public ActionResult WhateverControllerName(YourViewModel yvm)
{
    if (ModelState.IsValid) {
        //Do whatever you want here. Perhaps a redirect?
    }
    return View(yvm);
} 
```

注意：我的语法很垃圾，所以你必须检查一下，但 Visual Studio 应该告诉你什么是有效的。

# for-loop - 如何在找到每个点的最近邻居的同时迭代VTK中的点？

> ID：11403570
> 
> 赞同：3
> 
> 时间：2012-07-09T21:36:23.617
> 
> 标签：for-loop, iterator, vtk

我正在将 VTK 用于一个项目，但似乎无法弄清楚其中的一部分。我正在尝试遍历数千个点并找到每个点的 5 个最近点。似乎是一个简单的 for 循环操作，但我的问题是，由于某种原因，我被告知相同的 5 个点是我数据中每个点的最近点......我知道这不是真的。我将附上我在下面描述的代码：

```
 //test
  vtkSmartPointer<vtkPointSource> pointSource =
    vtkSmartPointer<vtkPointSource>::New();
   pointSource->SetNumberOfPoints( Output->GetNumberOfPoints() );
   pointSource->Update();

   vtkSmartPointer<vtkKdTreePointLocator> Tree =
     vtkSmartPointer<vtkKdTreePointLocator>::New();
   Tree->SetDataSet( pointSource->GetOutput() );
   Tree->BuildLocator();

   unsigned int k = 5;
   double testpoint[3];

   vtkSmartPointer<vtkIdList> result = 
     vtkSmartPointer<vtkIdList>::New();

   for(vtkIdType n = 0; n < Output->GetNumberOfPoints(); n++)
     {

     result->Reset();
     Output->GetPoint( n,testpoint );
     Tree->Update();
     std::cout << "Point: " << testpoint[0] << ", " << testpoint[1] << ", " << testpoint[2] << ": " << endl;

     Tree->FindClosestNPoints(k, testpoint, result);

     for(vtkIdType i = 0; i < k; i++)
       {
       vtkIdType point_ind = result->GetId(i);
       double p[3];
       pointSource->GetOutput()->GetPoint(point_ind, p);
       std::cout << "Closest point " << i+1 << ": Point "
       << point_ind << ": (" << p[0] << ", " << p[1] << ", " << p[2] << ")" << std::endl;
       }

     }
     //end test 
```

这正在做我想做的事情......它正在打印出与兴趣点最近的 5 个点，但是尽管兴趣点发生了变化，但 5 个最近点保持不变。我假设我只是在我的代码中传递了一个小细节，但我可能是错的。如果您需要更多信息来提供帮助，请直接询问。

感谢您的时间和帮助，卢克 H

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:30:25.987

我发现了问题...我正在使用 /vtkPointSource 生成随机点，并且我正在将我的点输入到该函数中。我不知道为什么，但这使得结果变得非常困难，但是一旦我传递了正确的信息并在点 Id 数组和结果 Id 数组上放置了一个 Reset()，它就像一个冠军一样工作。希望这会给其他人带来一些麻烦，因为我花了一些时间来解决这个问题。

卢克 H

```
 vtkSmartPointer<vtkKdTreePointLocator> Tree =
 vtkSmartPointer<vtkKdTreePointLocator>::New();
 Tree->SetDataSet( Output );
 Tree->BuildLocator();

 vtkSmartPointer<vtkIdList> result = 
   vtkSmartPointer<vtkIdList>::New();

 vtkSmartPointer<vtkIdList> point_ind =
   vtkSmartPointer<vtkIdList>::New();

 unsigned int k = 5;

 double testpoint[3];

 for( vtkIdType n = 0; n < Output->GetNumberOfPoints(); n++ )
   {

   Output->GetPoint( n,testpoint );
   std::cout << "Point: " << testpoint[0] << ", " << testpoint[1] 
     << ", " << testpoint[2] << ": " << endl;

   Tree->FindClosestNPoints( k, testpoint, result );

   for(vtkIdType i = 0; i < k; i++)
     {

 vtkIdType point_ind = result->GetId( i );

     double p[3];

     Output->GetPoint( point_ind, p );
 std::cout << "Closest point " << i+1 << ": Point "
   << point_ind << ": (" << p[0] << ", " << p[1] << ", " 
       << p[2] << ")" << std::endl;

    }

    result->Reset();
point_ind->Reset();

  } 
```

# php - 通过 php ldap_add 在微软活动目录中添加用户

> ID：11403575
> 
> 赞同：1
> 
> 时间：2012-07-09T21:36:35.633
> 
> 标签：php, active-directory, ldap

我曾尝试通过 php ldap Active-Directory 为 Microsoft Server 2008 R2 数据中心添加用户，但我不能。我总是收到这个错误：

```
An error occurred. Error number 64: Naming violation 
```

代码是：

```
<?php 
$ldaprdn = 'administrador@correo.mx'; 
$ldappass = 'dir378prob@'; 
$ds = 'correo.mx'; 
$dn = 'ou=usuarios,dc=correo,dc=mx'; 
$puertoldap = 389; 
$ldapconn = ldap_connect($ds,$puertoldap)or die("ERROR: I Don'n connect to LDAP."); 

if ($ldapconn) 
{ 
  ldap_set_option($ldapconn, LDAP_OPT_PROTOCOL_VERSION,3); 
  ldap_set_option($ldapconn, LDAP_OPT_REFERRALS,0); 
  $con = ldap_bind($ldapconn, $ldaprdn, $ldappass); 
  if ($con) 
  {                 

    $info["cn"] = $_POST['cn'];
    $info["sn"] = $_POST['sn'];
    $info["mail"] = $_POST['mail'];
    $info["objectclass"] = "inetorgperson";

    // prepare DN for new entry
    $dn_aux = "mail=" . $_POST['mail'] . ",ou=usuarios,dc=correo,dc=mx";
    $result = ldap_add($ldapconn, $dn_aux, $info);

    if($result) 
    {
      echo "New entry with DN " . $dn . " added to LDAP directory."; 
    } 
    // else display error   
    else 
    {
      echo "An error occurred. Error number " . ldap_errno($conn) . ": " .
      ldap_err2str(ldap_errno($conn)); 
    }
  } 
  else 
  { 
    echo "LDAP bind error..."; 
  } 
} 
ldap_close($ldapconn); 
?> 
```

我正在这个 ldap 中迈出第一步，所以请你详细解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:43:44.160

不确定正确的 PHP 语法，但以下行：

```
$dn_aux = "mail=" . $_POST['mail'] . ",ou=usuarios,dc=correo,dc=mx"; 
```

关于 Active-Directory 是不正确的。解释是在这样的目录中，您无法选择用于命名对象的属性。例如，“InetOrgPerson”对象必须使用 CN 属性来命名它。有关更多详细信息，请仔细阅读Microsoft 文档中的[对象命名中的命名属性。](http://technet.microsoft.com/en-us/library/cc977992.aspx)

尝试 ：

```
dn_aux = "CN=" . $_POST['cn'] . ",ou=usuarios,dc=correo,dc=mx"; 
```

# c++ - 函数指针重载错误？

> ID：11403578
> 
> 赞同：2
> 
> 时间：2012-07-09T21:36:59.767
> 
> 标签：c++, function-pointers, pointer-to-member

我有以下定义和原型（它们是类的成员函数），我基本上尝试使用函数指针将不同类型的策略传递给 divideQuery 方法：

```
typedef vector<ConstraintManager> (*strategyType1)(const Query&);
typedef vector<ConstraintManager> (*strategyType2)(const Query&, int);

vector<ConstraintManager> divideQuery (strategyType1 s, const Query& query);
vector<ConstraintManager> divideQuery (strategyType2 s, const Query& query, int parts);

vector<ConstraintManager> divideByHalf(const Query& query);
vector<ConstraintManager> divideRandom(const Query& query);
vector<ConstraintManager> divideByN(const Query& query, int n); 
```

但是，当我尝试调用时（`query`参数是从包装函数传递的）：

```
vector<ConstraintManager> result =  divideQuery(divideRandom, query); 
```

它失败并显示错误消息：

```
DividingSolver.cpp:200:70: error: no matching function for call to ‘DividingSolver::divideQuery(<unresolved overloaded function type>, const klee::Query&)’
DividingSolver.cpp:82:27: note: candidates are: std::vector<klee::ConstraintManager>   DividingSolver::divideQuery(std::vector<klee::ConstraintManager> (*)(const klee::Query&),  const klee::Query&)
DividingSolver.cpp:87:27: note: std::vector<klee::ConstraintManager>     DividingSolver::divideQuery(std::vector<klee::ConstraintManager> (*)(const klee::Query&, int), const klee::Query&, int) 
```

就我从网上阅读的内容而言，这似乎是一个重载错误（或者可能是其他错误），但无论如何我不太确定到底出了什么问题。任何提示/解释表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:57:07.323

问题是非静态成员函数与自由函数没有相同的签名。特别是它有一个*隐藏* `this`的指针。现在您所拥有的是`divideQuery`对第一个参数是指向成员函数的指针的调用，但是没有重载需要指向成员函数的指针，因此编译器会以错误消息退出。

如果函数不使用类中的状态，您可以制作它们`static`，这将删除隐式`this`并且它应该可以工作。`divideQuery`另一种选择实际上是在接口中使用指向成员的指针。第三个选项是使用更高级别的构造，例如`std::function<>`（或`boost::function<>`）作为函数参数，然后使用`std::bind`（`boost::bind`）绑定`this`参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T21:53:34.230

设为`divideRandom`静态，则它将与普通函数指针兼容。

# typo3 - 我应该在 Typo3 中使用哪个模板系统？

> ID：11403581
> 
> 赞同：1
> 
> 时间：2012-07-09T21:37:10.217
> 
> 标签：typo3, template-engine, fluid, templavoila

到目前为止，我一直使用模板自动解析器。我喜欢这样一个事实，即我可以使用打字稿修改模板的任何元素，而无需更改初始 HTML 文件。我也喜欢我可以直接在 Web 浏览器中呈现 html 模板，用虚拟元素填充它以查看菜单和内容元素的示例。最后，使用新的后端模板，我现在可以将内容元素放置在网格上的任何位置，以模仿网站的真实方面。

我知道还有TemplaVoila。我从来没有花时间去学习它。我的感觉是它与某些扩展的兼容性较差，但也许我错了。

现在，有一种流体，它将用于下一版本的 Typo3。虽然很明显使用它比使用模板标记更好，但我真的不明白为什么我应该使用 Fluid 比使用模板自动解析器或 TemplaVoila 更好。我不喜欢的是它需要使用特殊标签修改 html 模板，这意味着网页设计师必须了解 Fluid，或者 Typo3 集成商必须在每次执行修改时从设计师那里修改模板。

我的问题是：我应该为我的网站模板将表单模板自动解析器迁移到 Fluid 吗？使用流体有什么好处？为什么应该更好？我应该在 Typo3 中使用什么模板系统？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:12:44.643

只要 TypoScript 不支持对象，FLUIDTEMPLATE 相对于模板自动解析器的好处只是少数。所以没有必要迁移。

但是恕我直言，有一些论点可以改用流体：

*   越来越多的扩展会使用fluid，所以它会帮助你学习fluid
*   您可以使用带有代码完成功能的 ide（它只是 XML！）
*   流体真的很强大，你可以有 fe if 语句来检查空内容
*   有一天 TypoScript 也会支持对象

但是对于扩展开发，就完全不同了。在扩展中，我总是更喜欢使用 FLUID。您不必再处理扩展中的模板内容。只需将数据传递给流体，与视图有关的事情将在您的模板中完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-06T23:10:34.277

无论您选择什么，它都应该是基于 Fluid 的——这将使您变得非常通用，并且它使实现不如模板重要，这非常好。

我本人是“Fluid Powered TYPO3”框架（以前称为 FED）的创建者，当然会建议您看看这个框架可以为您做什么——它可以做很多事情，其中​​最重要的是*为您节省大量时间，同时允许您为页面和内容甚至后端模块创建更加一致的模板*。

我们总是乐于帮助新用户。我们目前正在改进我们的文档，但是您已经可以在我们的 Github 页面上找到许多完全最新的指南 - [https://github.com/FluidTYPO3](https://github.com/FluidTYPO3) - 名为“文档”的存储库是我们将存储所有文档。

您可能想看看~~[http://fedext.net](http://fedext.net)~~ [http://fluidtypo3.org](http://fluidtypo3.org) - 特别是“功能之旅”，它试图用尽可能少的文字解释流体动力 TYPO3 的要点。之后，文档中的示例将使您更清楚地了解 Fluid Powered TYPO3 可以为您做什么。

我们始终关注效率 - 我们尝试完成所有繁重的工作，以便您真正可以坐下来开始创建页面模板。我们从 TemplaVoila 中汲取了很多灵感，但不再需要重新映射内容和类似的事情：当您更改模板时，该更改会立即反映出来，这使得在迭代中使用并执行诸如连续之类的事情非常好交付和集成。

希望这会有所帮助！

干杯，
克劳斯。无名编码者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:06:27.240

您也可以争辩说，添加特殊标签，例如

```
<f:section name="typo-content">
   <div id="content">This is where the designer intended content to go</<div>
</f:section> 
```

可以在重新设计时帮助您的设计师了解您将内容元素“映射”到的位置。自动解析器和 TemplaVoila 都不是这种情况。因此，如果设计师在您周围移动东西，可能会取回您的模板，并且它们仍然可以在没有任何修改的情况下工作。

# android - 在不同屏幕上定位位图

> ID：11403582
> 
> 赞同：0
> 
> 时间：2012-07-09T21:37:14.433
> 
> 标签：android, resolution, dpi

我知道还有很多关于此的其他线程。在过去的两天里，我一直在检查它们，但无济于事，现在它让我发疯了。所以基本上我有一个精灵表，我将其加载到位图中，将帧分开，对它们执行缩放并将它们加载到列表中以供以后制作动画。从 ldpi 到 xhdpi 的缩放看起来不错，动画也是如此。

但还有一件事让我很烦恼，那就是在不同设备上的定位。我用 canvas.drawBitmap(bitmap, srcRect, destRect, paint) 绘制它们。好吧，我猜代码能说出一千多个单词。

```
//converting dps to pixels
int xCoord = convertToPixels(100);
int yCoord = convertToPixels(150);

//defining destination rectangle; sprite is a Bitmap object
Rect destRect = new Rect(xCoord, yCoord, xCoord+sprite.getWidth(), yCoord+sprite.getHeight());

//drawing
canvas.drawBitmap(sprite, null, destRect, null); 
```

convertToPixels(float dp) 只返回带有公式 Math.round(dp*DENSITY) 的像素数。

我相信，如果我指定 dps，所有设备上的纵横比应该是相同的，例如，如果我在一个设备的屏幕尺寸的 10% 上放置一些东西，它应该在另一个更小/更大/不那么密集/上保持这 10%更密集的屏幕。但我想我的逻辑是有缺陷的，因为它不起作用。它在不同地方的不同设备上绘制精灵。

总结一下：用 destRect 绘制一个位图对象，x 和 y 坐标为 100 dps，应该在所有设备上保持与画布大小的比例，或者我应该这样想。

我想请你帮我解决这件事，因为我现在迷路了，更多的是字面意思而不是比喻。并且请不要只给我一个链接到开发者网站或类似网站上的“支持多个屏幕”主题，因为我已经阅读了很多次，但似乎我不理解它们。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:56:34.840

Are you sure the dip to px calculation is correct? I wrote the following code to do this:

```
public class ViewHelper {
    public static int getPxFromDip(int dips){
        return (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dips, Application.getContext().getResources().getDisplayMetrics());
    }
} 
```

Where Application.getContext() is the Application wide context, or provide the local Activity context.

# backbone.js - 如何使用 Backbone.js 报告无效的表单字段

> ID：11403586
> 
> 赞同：3
> 
> 时间：2012-07-09T21:37:30.467
> 
> 标签：backbone.js, validation

我正在使用 Backbone 来管理 HTML 表单的状态。模型的作用是处理验证。View 的作用是包装 HTML 表单并响应模型发出的`change`or事件。`error`

Backbone 似乎只`change`在给定字段实际有效时才发出事件。这导致了一些非常出乎意料的行为，让我觉得我做错了。

以下是我正在做的总结： 1\. 初始加载序列化表单并将其注入模型 2.`error`发出事件时，我在无效字段旁边生成错误节点。3.`change`发出事件时，我删除（现在有效）字段旁边的错误注释。

当页面以最初有效的表单呈现时，并且用户使字段无效，则消息按预期显示；但是，模型从不在内部更新该字段。因此，当用户更正错误时，`change`永远不会发出事件。

[示例：最初有效](http://jsfiddle.net/BUJe6)

当页面以最初*无效*的形式呈现时，事情似乎工作正常......但这只是因为模型的初始属性是空的。更正该字段会使消息消失，但如果您再次将其更改为无效状态，则消息永远不会消失。

[示例：最初无效](http://jsfiddle.net/BUJe6/1)

我究竟做错了什么？也许我应该使用另一种方法？

### 我的模特

```
var Foo = Backbone.Model.extend({
    validate: function(attr) {
        var errors = {};

        if (_.isEmpty(attr)) return;

        if (attr.foo && attr.foo != 123) {
            errors.foo = ['foo is not equal to 123'];
        }

        if (attr.bar && attr.bar != 456) {
            errors.bar = ['bar is not equal to 456'];
        }

        return _.isEmpty(errors) ? undefined : errors;
    }
}); 
```

### 我的观点

```
FooForm = Backbone.View.extend({
    events: {
        'change :input': 'onFieldChange'
    },

    initialize: function(options) {
        this.model.on('error', this.renderErrors, this);
        this.model.on('change', this.updateFields, this);

        // Debugging only
        this.model.on('all', function() {
            console.info('[Foo all]', arguments, this.toJSON())
        });

        this.model.set(this.serialize());
    },

    onFieldChange: function(event) {
        var field = event.target,
            name = field.name,
            value = field.value;

        this.model.set(name, value);
    },

    renderErrors: function(model, errors) {
        _.each(errors, function(messages, fieldName) {
            var el = $('#' + fieldName),
                alert = $('<div/>').addClass('error');

            el.parent().find('.error').remove();

            _.each(messages, function(message) {
                alert.clone().text(message).insertAfter(el);
            });
        });
    },

    updateFields: function(model, options) {
        if (!options || !options.changes) return;

        _.each(_.keys(options.changes), function(fieldName) {
            var el = $('#' + fieldName);

            el.parent().find('.error').remove();
        });
    },

    serialize: function() {
        var raw = this.$el.find(':input').serializeArray(),
            data = {},
            view = this;

        $.each(raw, function() {
            // Get the model's field name from the form field's name
            var name = this.name;

            if (data[name] !== undefined) {
                if (!data[name].push) {
                    data[name] = [data[name]];
                }

                data[name].push(this.value || '');
            }
            else {
                data[name] = this.value || '';
            }
        });
        return data;

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:57:47.880

您无法使用本机 Backbone 验证来验证单个字段。

在我的应用程序中，我使用了这个验证插件：[https ://github.com/thedersen/backbone.validation](https://github.com/thedersen/backbone.validation)

然后在您的模型中为每个字段添加验证规则（它是可选的，因此您不需要将其添加到所有模型）：

```
var NewReview = Backbone.Model.extend({
  initialize: function() {
     /* ... */
  },

  validation: {
    summary: {
      required: true,
      minLength: 10
    },
    pros: {
      required: true,
      minLength: 10
    },
    cons: {
      required: true,
      minLength: 10
    },
    overall: function(value) {
      var text = $(value).text().replace(/\s{2,}/g, ' ');
      if (text.length == 0) text = value;
      if (text.length < 20) return "Overall review is too short";
    },
    rating: {
      range: [0.5, 5]
    },
    product_id: {
      required: true
    }
  }
}); 
```

与在视图或其他地方相比，您可以验证整个模型或单个字段：

```
if (this.model.validate()) { ... } 
```

或者

```
if (this.model.isValid("summary")) { ... } 
```

# android - kSoap 2 2.6.5 找不到类“org.ksoap2.serialization.SoapObject”

> ID：11403590
> 
> 赞同：1
> 
> 时间：2012-07-09T21:37:51.153
> 
> 标签：android, ksoap

```
Caused by: java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject 
```

我在 ksoap 2 上需要一些新的东西所以我更新到 2.6.5 但我不工作。给了我这个错误。但它的构建也不例外。我怀疑这个不确定；添加 jar 后，我在库中有 ksoap2 它也出现在根目录（src - gen - android 4.0.3 - ksoap2 - assets bla bla）

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:16:36.390

好吧，为了让下一个追随者更清楚解决方案：

1.  右键单击您的项目->*属性*
2.  选择*Java 构建路径*
3.  选项卡*顺序和导出*-> 检查您的 jar 库文件，该文件是 KSOAP jar 问题。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:19:09.687

这是您可能会发现它对我有用的这个 jar 文件的链接。

[点击这里](http://code.google.com/p/ksoap2-android/downloads/detail?name=ksoap2-android-assembly-2.4-jar-with-dependencies.jar&can=2&q=)

# asp.net - PostedFile.FileName 在 .Net 4.0 中的工作方式是否不同？

> ID：11403593
> 
> 赞同：3
> 
> 时间：2012-07-09T21:38:08.520
> 
> 标签：asp.net, .net, file-upload, .net-4.0, .net-2.0

我正在开发一个允许用户使用 UNC 路径链接文档的 ASP.Net 站点。我们的客户将此站点用于内部流程，因此其域中的所有用户都应有权访问 UNC 路径。

当用户想要添加链接文档时，他们使用 FileUpload 控件选择文件。以前在 .Net 2.0 中，控件的 PostedFile.FileName 属性返回文件名和完整的 UNC 路径。现在我们使用的是 .Net 4.0，它只返回文件名。

**这是我的主要问题：** 与 2.0 相比，.Net 4.0 中的 PostedFile.FileName 工作方式是否不同？

如果不是，还有什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:47:27.047

我认为它不是.NET，而是在安全性方面成长起来的 Internet Explorer。

从[这里](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)：

> 此外，Internet 区域的“上传文件时包括本地目录路径”URLAction 已设置为“禁用”。此更改可防止潜在敏感的本地文件系统信息泄露到 Internet。例如，Internet Explorer 8**现在将只提交文件名 image.png ，而不是提交完整路径 C:\users\ericlaw\documents\secret\image.png**。

所以你可以

1.  更改服务器端代码中的逻辑 - 它不应依赖于客户端文件路径位置，而应仅使用 FileUpload 控件的 FileName 属性。

2.  启用 IE 8 / IE 9 选项以在客户端包含 Internet 区域的本地目录路径（惹恼用户）。

![在此处输入图像描述](../Images/e5b9fb8670b4303982f410e7906d0642.png)

# sql - 用于识别配对项目的 SQL 查询（具有挑战性）

> ID：11403594
> 
> 赞同：2
> 
> 时间：2012-07-09T21:38:11.450
> 
> 标签：sql, sql-server

假设有一个包含一个表的关系数据库：

```
{datetime, tapeID, backupStatus}

2012-07-09 3:00, ID33, Start
2012-07-09 3:05, ID34, Start
2012-07-09 3:10, ID35, Start
2012-07-09 4:05, ID34, End
2012-07-09 4:10, ID33, Start
2012-07-09 5:05, ID33, End
2012-07-09 5:10, ID34, Start
2012-07-09 6:00, ID34, End
2012-07-10 4:00, ID35, Start
2012-07-11 5:00, ID35, End 
```

tapeID = 100 个不同的磁带中的任何一个，每个磁带都有自己的唯一 ID。

backupStatus = Start 或 End 两个分配之一。

我想编写一个返回五个字段的 SQL 查询

```
{startTime,endTime,tapeID,totalBackupDuration,numberOfRestarts}
2012-07-09 3:00,2012-07-09 5:05, ID33, 0days2hours5min,1
2012-07-09 3:05,2012-07-09 4:05, ID34, 0days1hours0min,0
2012-07-09 3:10,2012-07-10 5:00, ID35, 0days0hours50min,1
2012-07-09 5:10,2012-07-09 6:00, ID34, 0days0hours50min,0 
```

我希望将开始日期和结束日期配对，以确定每个备份集何时真正完成。这里需要注意的是，单个备份集的备份可能会重新启动，因此可能有多个开始时间，直到下一个结束事件才被认为是完整的。一个备份集可能一天备份多次，这需要用单独的开始时间和结束时间来标识。

提前感谢您的帮助！乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:55:31.250

您需要做的是将下一个结束日期分配给所有开始。然后计算中间的启动次数。

```
select tstart.datetime as starttime, min(tend.datetime) as endtime, tstart.tapeid
from (select *
      from t
      where BackupStatus = 'Start'
     ) tstart join
     (select *
      from t
      where BackupStatus = 'End'
     ) tend
     on tstart.tapeid = tend.tapeid and
        tend.datetime >= tstart.datetime 
```

这很接近，但每个结束时间都有多行（取决于开始的次数）。为了处理这个问题，我们需要按tapeid和结束时间分组：

```
select min(a.starttime) as starttime, a.endtime, a.tapeid,
       datediff(s, min(a.starttime), endtime), -- NOT CORRECT, DATABASE SPECIFIC
       count(*) - 1 as NumRestarts
from (select tstart.dt as starttime, min(tend.dt) as endtime, tstart.tapeid 
      from (select *
            from #t
            where BackupStatus = 'Start'
           ) tstart join
           (select *
            from #t
            where BackupStatus = 'End'
           ) tend
           on tstart.tapeid = tend.tapeid and
              tend.dt >= tstart.dt
     group by tstart.dt, tstart.tapeid
    ) a
group by a.endtime, a.tapeid 
```

我使用 SQL Server 语法编写了这个版本。要创建测试表，您可以使用：

```
create table #t (
    dt datetime,
    tapeID varchar(255),
    BackupStatus varchar(255)
)

insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 3:00', 'ID33', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 3:05', 'ID34', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 3:10', 'ID35', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 4:05', 'ID34', 'End')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 4:10', 'ID33', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 5:05', 'ID33', 'End')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 5:10', 'ID34', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-09 6:00', 'ID34', 'End')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-10 4:00', 'ID35', 'Start')
insert into #t (dt, tapeID, BackupStatus) values ('2012-07-11 5:00', 'ID35', 'End') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:14:58.257

这是我的版本。如果您添加`INSERT #T SELECT '2012-07-11 12:00', 'ID35', 'Start'`到表中，您还将在此查询中看到未完成的备份。`OUTER APPLY`是解决问题的自然方法。

```
SELECT
   Min(T.dt) StartTime,
   Max(E.dt) EndTime,
   T.tapeID,
   Datediff(Minute, Min(T.dt), Max(E.dt)) TotalBackupDuration,
   Count(*) - 1 NumberOfRestarts
FROM
   #T T
   OUTER APPLY (
      SELECT TOP 1 E.dt
      FROM #T E
      WHERE
         T.tapeID = E.tapeID
         AND E.BackupStatus = 'End'
         AND E.dt > T.dt
      ORDER BY E.dt
   ) E
WHERE
   T.BackupStatus = 'Start'
GROUP BY
   T.tapeID,
   IsNull(E.dt, T.dt) 
```

关于 CROSS APPLY 的一件事是，如果您只返回一行并且外部引用都是真实的表，那么通过将其移动到派生表的 WHERE 子句中，您可以在 SQL 2000 中获得等效项：

```
SELECT
   Min(T.dt) StartTime,
   Max(T.EndTime) EndTime,
   T.tapeID,
   Datediff(Minute, Min(T.dt), Max(T.EndTime)) TotalBackupDuration,
   Count(*) - 1 NumberOfRestarts
FROM (
      SELECT
         T.*,
         (SELECT TOP 1 E.dt
            FROM #T E
            WHERE
               T.tapeID = E.tapeID
               AND E.BackupStatus = 'End'
               AND E.dt > T.dt
            ORDER BY E.dt
         ) EndTime
      FROM #T T
      WHERE T.BackupStatus = 'Start'
   ) T
GROUP BY
   T.tapeID,
   IsNull(T.EndTime, T.dt) 
```

对于不是所有真实表的外部引用（您需要从另一个子查询的外部引用中计算出的值），您必须添加嵌套派生表来完成此操作。

我终于硬着头皮做了一些真正的测试。我使用 SPFiredrake 的表格填充脚本来查看大量数据的实际性能。我以编程方式完成了它，因此没有打字错误。我每次执行 10 次，并为每一列抛出最差和最好的值，然后对该统计数据的剩余 8 列值进行平均。

索引是在填充表后创建的，填充因子为 100%。当仅存在聚集索引时，索引列显示 1。添加 BackupStatus 上的非聚集索引时，它显示 2。

为了从测试中排除客户端网络数据传输，我将每个查询选择为如下变量：

```
DECLARE
   @StartTime datetime,
   @EndTime datetime,
   @TapeID varchar(5),
   @Duration int,
   @Restarts int;

WITH A AS (
-- The query here
)
SELECT
   @StartTime = StartTime,
   @EndTime = EndTime,
   @TapeID = TapeID,
   @Duration = TotalBackupDuration,
   @Restarts = NumberOfRestarts
FROM A; 
```

我还将表列长度修剪为更合理的值：tapeID varchar(5)、BackupStatus varchar(5)。实际上，BackupStatus 应该是位列，tapeID 应该是整数。但我们暂时会坚持使用 varchar。

```
 Server  Indexes       UserName   Reads  Writes    CPU  Duration
---------  -------  -------------  ------  ------  -----  --------
   x86 VM        1          ErikE   97219       0    599       325
   x86 VM        1  Gordon Linoff     606       0  63980     54638
   x86 VM        1    SPFiredrake  344927     260  23621     13105

   x86 VM        2          ErikE   96388       0    579       324
   x86 VM        2  Gordon Linoff  251443       0  22775     11830
   x86 VM        2    SPFiredrake  197845       0  11602      5986

x64 Beefy        1          ErikE   96745       0    919        61
x64 Beefy        1  Gordon Linoff  320012      70  62372     13400
x64 Beefy        1    SPFiredrake  362545     288  20154      1686

x64 Beefy        2          ErikE   96545       0    685       164
x64 Beefy        2  Gordon Linoff  343952      72  65092     17391
x64 Beefy        2    SPFiredrake  198288       0  10477       924 
```

笔记：

*   x86 VM：几乎空闲的虚拟机，Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (Intel X86)
*   x64 Beefy：一个非常强大且可能非常繁忙的 Microsoft SQL Server 2008 R2 (RTM) - 10.50.1765.0 (X64)

第二个索引帮助了所有查询，我的查询最少。

有趣的是，Gordon 最初在一台服务器上的低读取次数在第二台服务器上很高——但它的持续时间较短，因此它显然选择了不同的执行计划，可能是因为有更多资源可以更快地搜索可能的计划空间（被更强大的服务器）。但是，该索引提高了读取次数，因为该计划将 CPU 成本降低了一吨，因此在优化器中的成本更低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:46:26.010

以为我会试一试。测试了 Gordon Linoff 的解决方案，在他自己的示例中，tapeID 33 的计算并不完全正确（匹配到下一个开始，而不是对应的结束）。

我的尝试假设您使用的是 SQL Server 2005+，因为它使用了 CROSS/OUTER APPLY。如果您需要它用于服务器 2000，我可能会使用它，但这对我来说似乎是最干净的解决方案（因为您从所有结束元素开始并匹配第一个开始元素以获得结果）。我也会注释，所以你可以理解我在做什么。

```
SELECT 
    startTime, endT.dt endTime, endT.tapeID, DATEDIFF(s, startTime, endT.dt), restarts
FROM 
    #t endT -- Main source, getting all 'End' records so we can match.
    OUTER APPLY ( -- Match possible previous 'End' records for the tapeID
        SELECT TOP 1 dt 
        FROM #t 
        WHERE dt < endT.dt AND tapeID = endT.tapeID 
        AND BackupStatus = 'End') g
    CROSS APPLY (SELECT ISNULL(g.dt, CAST(0 AS DATETIME)) dt) t 
    CROSS APPLY ( 
        -- Match 'Start' records between our 'End' record
        -- and our possible previous 'End' record.
        SELECT MIN(dt) startTime, 
            COUNT(*) - 1 restarts -- Restarts, so -1 for the first 'Start'
        FROM #t 
        WHERE tapeID = endT.tapeID AND BackupStatus = 'Start' 
                -- This is where our previous possible 'End' record is considered
            AND dt > t.dt AND dt < endt.dt) starts
WHERE 
    endT.BackupStatus = 'End' 
```

[编辑：在此链接中找到](https://gist.github.com/3091448)测试数据生成脚本。

因此决定针对这三种方法运行一些数据，发现 ErikE 的解决方案最快，我的解决方案非常接近，而 Gordon 的解决方案对于任何规模庞大的集合都效率低下（即使处理 1000 条记录，它也开始显示缓慢）。对于较小的集合（大约 5k 条记录），我的方法胜过 Erik 的方法，但幅度不大。老实说，我喜欢我的方法，因为它不需要任何额外的聚合函数来获取数据，但是 ErikE 在效率/速度之战中获胜。

编辑 2：对于表中的 55k 记录（和 12k 匹配的开始/结束对），Erik 需要 ~0.307s 而我需要 ~0.157s（平均超过 50 次尝试）。我对此有点惊讶，因为我假设单个运行会转换为整体运行，但我猜我的查询更好地利用了索引缓存，因此后续命中成本更低。查看执行计划，ErikE 的主路径只有 1 个分支，因此他最终会为大部分查询使用更大的集合。我有 3 个分支，它们结合得更接近输出，所以我在任何给定时刻都在搅动更少的数据，并在最后结合起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T00:02:13.310

让它变得非常简单——为开始事件创建一个子查询，为结束事件创建另一个子查询。对于具有开始和结束的每一行，每个集合中的排名函数。然后，对 2 个子查询使用左连接：

```
-- QUERY
WITH CTE as 
(
SELECT  dt
        , ID
        , status  
        --, RANK () OVER (PARTITION BY ID ORDER BY DT) as rnk1
        --,  RANK () OVER (PARTITION BY status ORDER BY DT) as rnk2
FROM INT_backup
)
SELECT * 
FROM CTE 
ORDER BY id, rnk2

select * FROM INT_backup order by id, dt

SELECT * 
FROM 
(
    SELECT  dt
            , ID
            , status  
            , rank () over (PARTITION by ID ORDER BY dt) as rnk
    FROM INT_backup
    WHERE status = 'start' 
) START_SET
LEFT JOIN 
(
    SELECT  dt
            , ID
            , status  
            , rank () over (PARTITION by ID ORDER BY dt) as rnk
    FROM INT_backup
    where status = 'END'
) END_SET
ON Start_Set.ID = End_SET.ID 
AND Start_Set.Rnk = End_Set.rnk 
```

# c++ - 使用 SDL_FillRect 创建矩形

> ID：11403597
> 
> 赞同：0
> 
> 时间：2012-07-09T21:38:22.683
> 
> 标签：c++, sdl

我的代码并没有真正工作（没有错误，但没有显示矩形）。我有 3 个类：CFramework、CRectangle、CGame。有什么问题/遗漏？

我的 CFramework 类启动 SDL 并设置视频模式等。

**CRectangle.hpp：**

```
#ifndef  RECTANGLE_HPP
#define RECTANGLE_HPP

#include "Framework.hpp"

class CRectangle
{
    public:    
        CRectangle ();
        void createRectangle (int x, int y, int width, int height, int r, int g, int b);

    private:
        SDL_Surface *m_pScreen; // Pointer at the screen of CFramework
        SDL_Rect m_Rect;
};

#endif 
```

**CRectangle.cpp：**

```
#include "Rectangle.hpp"

// Konstruktor
//
// Aufgabe: Zeiger auf Screen holen
//
CRectangle::CRectangle ()
{
    // Zeiger auf Screen holen
    m_pScreen = g_pFramework->GetScreen ();

} // Konstruktor

// createRectangle
//
// Aufgabe: Viereck erstellen
//
void CRectangle::createRectangle (int x, int y, int width, int height, int r, int g, int b)
{
        m_Rect.x = x;
        m_Rect.y = y;
        m_Rect.w = width;
        m_Rect.h = height;
        SDL_FillRect(m_pScreen, &m_Rect, SDL_MapRGB(m_pScreen->format, r, g, b));
} // createRectangle 
```

**CGame.cpp：**

```
... // just the important stuff
    m_pRectangleMenu = new CRectangle;
    m_pRectangleMenu->createRectangle(100,100,400,400,233,34,34);
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:53:24.900

```
// just the important stuff
m_pRectangleMenu = new CRectangle;
m_pRectangleMenu->createRectangle(100,100,400,400,233,34,34); 
```

好吧，因为您没有包含“SDL_Flip（screen_variable）”......也许这是您的问题。如果没有，您应该发布到 SDL_Flip()。

里根

# objective-c - 如何在 SBJSON 的 NSDictionary 中测试 null？

> ID：11403598
> 
> 赞同：0
> 
> 时间：2012-07-09T21:38:32.870
> 
> 标签：objective-c, ios5, xcode4.3

我有一个 API 返回一个 JSON 编码的数据字符串，该字符串返回一个实数或“null”作为值。只要 JSON 包含数字或字符串值，一切都会按预期工作。如果 key:value 对的值为 null，则下面的代码会崩溃。

*从 SBJSON 获取 NULL 时，如何正确测试 NSDictionary objectForKey？*

当 API**为 filetype 返回 null 时**，下面的代码会在 if() 行崩溃。

我的 Objective-C 代码尝试测试预期值：

```
if (1 == [[task valueForKey:@"filetype"] integerValue]) {
    // do something
} else {
    // do something else
} 
```

API JSON 输出：

```
{"tclid":"3","filename":null,"filetype":null} 
```

NSDictionary 的 NSLog() 输出是：

```
task {
    filename = "<null>";
    filetype = "<null>";
    tclid = 3;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:41:58.673

当将数据从 JSON 传输到 Cocoa 集合时，[`NSNull`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)该类用于表示“无值”，因为 Cocoa 集合不能有空槽。`<null>`是如何`NSNull`打印自己。

要对此进行测试，您可以使用`someObject == [NSNull null]`. 这是一个单例——每个进程只有一个实例`NSNull`——所以指针比较有效，尽管您可能更喜欢遵循通常的 Cocoa 比较约定并使用`[someObject isKindOfClass:[NSNull class]]`.

您正在崩溃，因为您正在发送`integerValue`到该`NSNull`对象。`NSNull`不响应`integerValue`并引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:43:46.180

您应该首先测试是否有一个值为 null，如果它为 null，则执行 intValue 方法可能会使您的应用程序崩溃。这样做应该可以。

```
if ([[task valueForKey:@"filetype"] isKindOfClass:[NSNumber Class]] && 1 == [[task valueForKey:@"filetype"] integerValue]) {
    // do something
} else {
     // do something else
} 
```

我希望它有所帮助。

# c# - 如何使用 MVC4 将 .Mobile 视图放在另一个文件夹中？

> ID：11403601
> 
> 赞同：4
> 
> 时间：2012-07-09T21:38:43.417
> 
> 标签：c#, asp.net, asp.net-mvc, mobile, asp.net-mvc-4

在 MVC 4 中，您只需将 .Mobile 附加到任何视图，移动设备将自动从同一控制器获取该视图。有没有办法将 .Mobile 文件存储在不同的文件夹中？我真的很想将桌面文件存储在一个“区域”中，而将移动设备存储在另一个“区域”中。有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:20:20.760

这可以通过创建 RazorViewEngine 的自定义实现并将自定义映射添加到 ViewLocationFormats 轻松完成。请务必记住将自定义映射添加到 ViewLocationFormats 数组的开头，因为它们比现有映射更具体。

```
namespace MobileViewsInMobileFolder.Utility {

    public class MyCustomViewEngine : RazorViewEngine {

         public MyCustomViewEngine() {
             List<string> existingViewLocationFormats = ViewLocationFormats.ToList();

             //Folder Structure: Views\Home\Desktop and Views\Home\Mobile
             existingViewLocationFormats.Insert(0, "~/Views/{1}/Desktop/{0}.cshtml");
             existingViewLocationFormats.Insert(0, "~/Views/{1}/Mobile/{0}.cshtml");

             //Folder Structure: Views\Desktop\Home and Views\Mobile\Home
             existingViewLocationFormats.Insert(0, "~/Views/Desktop/{1}/{0}.cshtml");
             existingViewLocationFormats.Insert(0, "~/Views/Mobile/{1}/{0}.cshtml");

             ViewLocationFormats = existingViewLocationFormats.ToArray();
         }
    }
} 
```

然后确保在 Application_Start 中添加自定义视图引擎

```
ViewEngines.Engines.Clear();
ViewEngines.Engines.Add(new MyCustomViewEngine()); 
```

# java - 弹簧异步不起作用

> ID：11403609
> 
> 赞同：6
> 
> 时间：2012-07-09T21:39:05.383
> 
> 标签：java, spring, asynchronous, concurrency, aop

我们有一个用 spring 3.0 编写的应用程序。我注意到@Async 不起作用。我四处搜索，发现我需要添加

```
<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>
<task:executor id="myExecutor" pool-size="5"/>
<task:scheduler id="myScheduler" pool-size="10"/> 
```

但是当我这样做时，我得到了一个例外。

这是我的配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:amq="http://activemq.apache.org/schema/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:batch="http://www.springframework.org/schema/batch"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:int-jmx="http://www.springframework.org/schema/integration/jmx"
xmlns:int-mail="http://www.springframework.org/schema/integration/mail"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:jms="http://www.springframework.org/schema/jms" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p" xmlns:task="http://www.springframework.org/schema/task"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util"
xmlns:ws="http://www.springframework.org/schema/web-services"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core-5.5.0.xsd
      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
      http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/integration/jmx http://www.springframework.org/schema/integration/jmx/spring-integration-jmx.xsd
      http://www.springframework.org/schema/integration/mail http://www.springframework.org/schema/integration/mail/spring-integration-mail.xsd
      http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
      http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
      http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
      http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
      http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
      http://www.springframework.org/schema/web-services http://www.springframework.org/schema/web-services/web-services-1.5.xsd">

<bean id="applicationProperties"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:version.properties</value>
        </list>
    </property>
    <property name="ignoreResourceNotFound" value="true" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean>

<context:annotation-config />
<context:component-scan base-package="package" />

<aop:aspectj-autoproxy />   

<bean id="globalConfig" class="package.GlobalConfig" />

<mvc:annotation-driven />

<amq:connectionFactory id="connectionFactory1"
    brokerURL="tcp://localhost:61616?jms.useAsyncSend=true" />

<amq:connectionFactory id="connectionFactory2"
    brokerURL="tcp://localhost:61616?jms.useAsyncSend=true" />

<bean id="singleConnectionFactory1"
    class="org.springframework.jms.connection.SingleConnectionFactory"
    p:targetConnectionFactory-ref="connectionFactory1"
    p:reconnectOnException="true" />

<bean id="singleConnectionFactory2"
    class="org.springframework.jms.connection.SingleConnectionFactory"
    p:targetConnectionFactory-ref="connectionFactory2"
    p:reconnectOnException="true" />

<bean id="cachingConnectionFactory1"
    class="org.springframework.jms.connection.CachingConnectionFactory"
    p:targetConnectionFactory-ref="singleConnectionFactory1"
    p:sessionCacheSize="100" />

<bean id="cachingConnectionFactory2"
    class="org.springframework.jms.connection.CachingConnectionFactory"
    p:targetConnectionFactory-ref="singleConnectionFactory2"
    p:sessionCacheSize="100" />

<bean id="jmsTemplate1" class="org.springframework.jms.core.JmsTemplate"
    p:connectionFactory-ref="cachingConnectionFactory1" />

<bean id="jmsTemplate2" class="org.springframework.jms.core.JmsTemplate"
    p:connectionFactory-ref="cachingConnectionFactory2" />

<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass">
        <value>
            org.springframework.web.servlet.view.tiles2.TilesView
        </value>
    </property>
</bean>

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>AppBundle</value>
        </list>
    </property>
</bean>

<!-- Declare the Interceptor -->
<mvc:interceptors>
    <bean class="package.PipelineInterceptor" />
</mvc:interceptors>

<!-- Declare the Resolver -->
<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.SessionLocaleResolver" />

<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean>

<bean id="otherViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver"
    p:order="1" p:location="/WEB-INF/views.xml" />

</beans> 
```

这是我得到的例外：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'locationBrowserController': Injection of autowired dependencies failed; nested exception is  org.springframework.beans.factory.BeanCreationException: Could not autowire field: private package.srv.homepage.impl.HomepageSrvImpl  package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl; nested exception is java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field  package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private package.srv.homepage.impl.HomepageSrvImpl  package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl; nested exception is java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field  package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
... 29 more
Caused by: java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
at java.lang.reflect.Field.set(Field.java:657)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:498)
... 31 more
Jul 9, 2012 2:13:25 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet  threw load() exception
java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
at java.lang.reflect.Field.set(Field.java:657)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:498)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Jul 9, 2012 2:13:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jul 9, 2012 2:13:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jul 9, 2012 2:13:25 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 14033 ms
Jul 9, 2012 2:13:25 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'expresso'
Jul 9, 2012 2:13:26 PM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'locationBrowserController': Injection of autowired dependencies failed; nested exception is  org.springframework.beans.factory.BeanCreationException: Could not autowire field: private package.srv.homepage.impl.HomepageSrvImpl package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl; nested exception is java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field    package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
 Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private package.srv.homepage.impl.HomepageSrvImpl     package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl; nested exception is java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field     package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
... 33 more
Caused by: java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
at java.lang.reflect.Field.set(Field.java:657)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:498)
... 35 more
Jul 9, 2012 2:13:26 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet expresso
java.lang.IllegalArgumentException: Can not set package.srv.homepage.impl.HomepageSrvImpl field package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
at java.lang.reflect.Field.set(Field.java:657)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:498)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:42:04.993

为了`@Async`工作（我假设基于注释的配置），您需要做两件事：

1.  `<task:annotation-driven/>`在你的配置中
2.  用注释的公共方法`@Async`

......就是这样。

您的例外并不表明这`@Async`不起作用。这表明 field 存在自动装配问题`HomepageSrvImpl`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-08T15:01:14.780

这是一个老问题，但由于到目前为止它还没有被接受的答案，所以我们开始吧。

问题的本质是`@Async`机制如何工作。正在发生的事情的提示是堆栈跟踪的这一部分，特别是用粗体标记的内容：

> 原因：java.lang.IllegalArgumentException：无法将 package.srv.homepage.impl.HomepageSrvImpl 字段 package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl 设置 **为 $Proxy24**

发生的事情是，为了能够拦截对标有 的方法的调用`@Async`，Spring 需要为其创建一个代理。

正如用户“El Guapo”在另一个答案中指出的那样，您可能是在声明自动装配属性的类型，而不是通过使用接口，而是使用实际实现。（请注意，stackTrace 中的错误并不具体指向正在代理的对象，而是指向需要将其作为属性自动装配的对象，但它仍然将您的故障排除指向正确的方向）。

在您开始使用`@Async`注释之前，这可以正常工作，因为这会强制 sprint 创建代理并且无法自动装配它。

我还没有测试过它，但我假设这会发生在 Spring 需要与你的代码交错的任何其他方面（例如`@Transactional`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:11:57.477

我遇到了同样的问题......我有一堆不同的“IMPLS”实现了我试图自动装配的接口，问题是我正在自动装配实现而不是接口......一旦我开始自动装配界面（带有@Qaulifier）一切正常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:43:57.780

堆栈跟踪中的此部分指示错误是什么。字段 homepageSrvImpl 应该是接口类型而不是具体类。如果您无法弄清楚添加 LocationBrowserController 和 HomepageSrvImpl 的定义 - 只是类和自动装配部分。

```
Caused by: java.lang.IllegalArgumentException: Can not set
package.srv.homepage.impl.HomepageSrvImpl field
package.mvc.controller.browser.LocationBrowserController.homepageSrvImpl to $Proxy24 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T16:42:25.023

我也遇到了同样的问题。

添加属性`proxy-target-class="true"`为`<task:annotation-driven/>`我修复它。我的定义现在看起来像这样：

```
<task:annotation-driven 
   executor="myExecuter" scheduler="myScheduler" proxy-target-class="true"/> 
```

这解决了我的问题（使用 Spring 3.1.1）。有关说明，请参阅[将 @Transaction 注释与 @Autowired - Spring](https://stackoverflow.com/questions/19624354)一起使用。

# c - 为什么返回自动（内部范围）指针不好？

> ID：11403610
> 
> 赞同：0
> 
> 时间：2012-07-09T21:39:08.753
> 
> 标签：c

> **可能重复：**
> [从 C 中的函数返回局部变量](https://stackoverflow.com/questions/4824342/returning-a-local-variable-from-function-in-c)

我想得越多，我就越不确定为什么这不是一个好主意......编译器抱怨让函数内部的自动变量返回给调用者。例如：

```
char * foo() {
   char bar[11];
   fgets(bar, 10, stdin);
   return bar;
} 
```

相对：

```
char bar[11];
char * foo() {
   fgets(bar, 10, stdin);
   return bar;
} 
```

我可能没有多大意义。我不太明白在里面有一个指针声明的问题，调用者会不会只是假设内存地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:41:12.523

在您的第一个示例中，数组`bar`是函数的本地数组，因此当函数返回时它不再存在。因此，结果指针不太可能指向任何有用的东西，因为它曾经指向的东西不再存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:41:27.770

第一个例子是完全错误的。您创建内存空间并在函数内部写入并返回指向它的指针，因此您将指针返回到不存在的内存段。从函数返回后，该内存将被释放。第二个例子是正确的，但你应该尽可能避免使用全局变量。

编辑：如果您希望内存在返回指针后在函数外部可用，请使用动态内存分配（检查[calloc](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:41:35.273

`bar`，出于所有意图和目的，在您的函数返回时不再存在。它分配有自动存储持续时间，并且稍后尝试从该内存中读取会导致未定义的行为。由于通常使用堆栈，您如何想象在函数返回后将数据保持在有效状态？

相反，您可以将 a`char*`作为函数的输入，以及它所引用的内存块的大小，并为调用者填充该缓冲区，即：

```
void foo(char *buf, buf_size) {
   fgets(buf, buf_size, stdin);
} 
```

这在 C 语言中非常常见和惯用。看看在`fgets`做什么。它要求调用者提供一个缓冲区来填充。这样可以避免混淆谁负责释放从函数返回的内存（如果函数返回指向动态分配的内存的指针，则必须记录下来）。

顺便说一句，`fgets`读取`num-1`字符并为您终止 null，因此只需传递缓冲区的大小，无需`size-1`像您当前所做的那样传递。

# wpf - 如何在拖放期间检测鼠标释放

> ID：11403611
> 
> 赞同：4
> 
> 时间：2012-07-09T21:39:27.783
> 
> 标签：wpf, drag-and-drop

我有一个处理拖放的自定义 WPF 控件。我重写 OnDragOver 以便控件在忙于执行其他操作时不会接受放置的对象：

```
protected override void OnDragOver(DragEventArgs e)
{
     base.OnDragOver(e);

     if (isBusy)     
          e.Effects = DragDropEffects.None;
     else
          e.Effects = DragDropEffects.Move;

     e.Handled = true;
} 
```

在另一个启动拖放的控件中，有一些 UI 元素在操作开始时被禁用，如果操作被取消或在目标上释放鼠标时应该启用，而上述目标表示不允许操作。

我可以在源代码管理中使用哪些事件来检查第二个条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T12:16:43.883

正如[Hans Passant 在评论中回答的那样](https://stackoverflow.com/questions/11403611/how-to-detect-mouse-release-during-drag-drop#comment15036675_11403611)，要检查操作是否被取消，您可以使用[返回值`DragDropEffects`](http://msdn.microsoft.com/en-us/library/system.windows.dragdropeffects.aspx), of [`DragDrop.DoDragDrop()`](http://msdn.microsoft.com/en-us/library/system.windows.dragdrop.dodragdrop.aspx)。

> **无：放置目标不接受数据。**
> 
> 复制：将数据复制到放置目标。
> 
> 移动：将拖动源中的数据移动到放置目标。
> 
> 链接：来自拖动源的数据链接到放置目标。
> 
> 滚动：滚动即将开始或当前正在放置目标中发生。
> 
> 全部：数据被复制，从拖动源中删除，并在放置目标中滚动。

`None`是您感兴趣的值。当鼠标松开时，操作将被取消，并`DoDragDrop()`返回`None`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:04:48.640

在 WPF 拖放过程中，GiveFeedback 事件不断在拖动源上触发，您可以检查事件参数状态并相应地更新拖动源。

这是一个代码示例：（假设被拖动的元素称为dragSource）

```
// Attach the event handler
dragSource += OnDragSourceGiveFeedback;

// Event Handler
private void OnDragSourceGiveFeedback(object sender, GiveFeedbackEventArgs e)
    {
        if (e.Effects == DragDropEffects.None)
        {
            // Drop is not allowed on the Drop Target
            dragSource.IsEnabled = false;
        }
    } 
```

# php - 使用 phonegap，有没有办法让 Android 设备与 PHP 通信？

> ID：11403612
> 
> 赞同：1
> 
> 时间：2012-07-09T21:39:29.937
> 
> 标签：php, javascript, html, css, cordova

我有一个 php 页面，它连接 API 并获取信息，然后可以显示。

我想把它变成一个安卓应用。我听说过PhoneGap，我知道它使用javascript、html 和css。我知道 javascript 能够调用 php 文件，但我不确定如何或是否可以从 android 设备调用 php 文件。我不确定android浏览器是否可以处理php，或者它们的处理方式是什么。因此，如果您对此有任何信息，我将不胜感激。

我也愿意用 javascript 重写 API 调用，但我认为这是不可能的。如果你有不同的想法，请告诉我你在说什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:43:13.900

Android 不能直接与 PHP 对话。phonegap、javascript 等所做的只是发出恰好由 PHP 脚本处理的 HTTP 请求。

PHP 代码将执行，输出一些数据（json、html、xml、gif、jpg 等...）并将其作为 HTTP 请求的回复发送出去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:43:31.047

`PHP`只是一种服务器端语言，因此您的浏览器“可以或不能”处理它并不重要，只会`HTML`返回（除非您设置不同的内容类型）。

您可能值得研究一下允许发送 XMLRequest 的`REST`样式api。`JSON`看看[这个文件](http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile)

这里还有一个[很好的教程](http://blogs.developerforce.com/developer-relations/2011/05/calling-the-rest-api-from-javascript-in-phonegap.html)，展示了如何调用`REST`API 和[PHP 教程](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)来创建`REST`API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:57:23.693

1.它与托管 PHP 的 PhoneGap 或其 PHP 或 ASP.NET 或 ASP.NET MVC
无关 2.如果您想在生产中自己托管 PHP 代码（您可能不应该在生产中这样做）。那么你需要一个服务器和一个静态 IP 地址
3.如果你只是想为开发目的设置一个 PHP 服务器，那么只需将它绑定到 127.0.0.1:81 并且你可以直接使用这个地址，不管你是否有一个静态的IP 地址与否。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T23:20:12.187

我已经使用 jsonp [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)使用 phonegap 完成了这项工作，效果 很好

# sql-server - 无法连接到 SQL LocalDB

> ID：11403614
> 
> 赞同：2
> 
> 时间：2012-07-09T21:39:40.263
> 
> 标签：sql-server, sql-server-2012, localdb

我有一个本机 C++ 应用程序，我在其中尝试使用 ADO 连接到 localdb 实例。手动启动我的实例后，我可以运行`sqllocaldb info v11.0`并查看数据库实例正在运行。

我的代码如下。

```
ADO::_ConnectionPtr spConnection (__uuidof (ADO::Connection));
spConnection->Open (L"Provider=SQLNCLI11;Server=(localdb)\\v11.0;Integrated Security=true", L"", L"", 0); 
```

错误代码为 DB_E_ERRORSOCCURRED (0x80040e21)，错误消息为**多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。**

我能够使用 SQL Server Management Studio 成功连接到数据库，并且在连接字符串中使用和不使用提供程序以及指定初始目录都进行了尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:45.733

我发现了我的问题。安全性必须设置`sspi`为如下所示。

```
ADO::_ConnectionPtr spConnection (__uuidof (ADO::Connection));
spConnection->Open (L"Provider=SQLNCLI11;Server=(localdb)\\v11.0;Integrated Security=SSPI", L"", L"", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:52:39.113

ADO connection object has an Error collection that holds the list oft error that has occured so far. You can take a look at these error to see what's wrong. Usually two things can go wrong while connecting to SQL Server. 1.Login Failed. 2.SQL Server is not configured so that you can connect to it remotely. Since you are trying to connect to a local server it can hardly be the second reason. As you might now there are two different type of authentication when it comes to SQL Server:Windows and SQL Server.You can use one of therm if each of them is set in your SQL Server options or both of them if the mixed mode is selected. According to your connection string you are using windows mode authentication therefor you should be logged in using a windows user that can login to SQL Server.If that's not the case with your SQL Server then you should provide a SQL user credentials in your connection string. Anyway check the Error collection of connection object as see if there's anything else is wrong with your local db.

# python - Python日期时间和夏令时

> ID：11403615
> 
> 赞同：0
> 
> 时间：2012-07-09T21:39:44.943
> 
> 标签：python, datetime

我的代码用于`datetime.now()`获取当前日期和时间。问题是由于夏令时，时间落后了 1 小时。

如何获得“真实”当前时间（与我在系统时钟中看到的相同）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:27:46.757

我可能完全关闭，但如果 BIOS 中的时间设置为 UTC（因此与本地时间相差一小时）

```
datetime.datetime.utcnow() 
```

应该产生你正在寻找的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:45:55.453

如果你只想要当前系统时间，你可以试试这个`time`模块。`time.time()`会给你一个当前系统时间的unix时间戳。

**编辑**：回应OP的评论

使用`time.strftime()`并`time.localtime()`与`datetime`对象和数据库交互

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:06:30.310

你应该阅读[python 的 datetime 文档直到第 8.1 节](http://docs.python.org/library/datetime.html#tzinfo-objects)，其中给出了一个关于如何实现你想要的例子的例子。

```
from datetime import tzinfo, timedelta, datetime
ZERO = timedelta(0)
HOUR = timedelta(hours=1)

# A UTC class.
class UTC(tzinfo):
    """UTC"""

    def utcoffset(self, dt):
        return ZERO

    def tzname(self, dt):
        return "UTC"

    def dst(self, dt):
        return ZERO
utc = UTC()
datetime.now(utc) 
```

# api - Magento 中的肥皂错误（打开 SoapClient.php 失败）

> ID：11403625
> 
> 赞同：0
> 
> 时间：2012-07-09T21:41:04.693
> 
> 标签：api, magento, soap, installation, soap-client

我在 Magento 中的 SoapClient 遇到问题，导致外部模块无法正常工作。该模块正在另一个 Magento 安装上工作，所以我猜它与我的 magento 安装有关。

在我的 magento 日志中，我看到以下错误：

```
2012-07-09T16:52:40+00:00 ERR (3): Warning: include(SoapClient.php): failed to open stream: No such file or directory in /var/www/vhosts/domain.com/httpdocs/lib/Varien/Autoload.php on line 93
2012-07-09T16:52:40+00:00 ERR (3): Warning: include(SoapClient.php): failed to open stream: No such file or directory in /var/www/vhosts/domain.com/httpdocs/lib/Varien/Autoload.php on line 93
2012-07-09T16:52:40+00:00 ERR (3): Warning: include(): Failed opening ‘SoapClient.php’ for inclusion (include_path=’/var/www/vhosts/domain.com/httpdocs/app/code/local:/var/www/vhosts/domain.com/httpdocs/app/code/community:/var/www/vhosts/domain.com/httpdocs/app/code/core:/var/www/vhosts/domain.com/httpdocs/lib:.:/usr/share/pear:/usr/share/php’) in /var/www/vhosts/domain.com/httpdocs/lib/Varien/Autoload.php on line 93 
```

我搜索了这个论坛和谷歌，发现它与 open_basedir 限制有关。我已按照与这些主题相关的所有说明进行操作，但仍然遇到上述错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:23:33.777

检查您的服务器上是否安装了 SOAP/PEAR PHP 扩展。
（在 Debian/Ubuntu 上，这些是软件包`php-pear php-soap`）

请查看此帖子以解决问题

[http://nickescobedo.com/583/soapclient-error-after-enabling-fedex-shipping-method-on-magento-ecommerce-solution](http://nickescobedo.com/583/soapclient-error-after-enabling-fedex-shipping-method-on-magento-ecommerce-solution)

[http://www.magentocommerce.com/boards/viewthread/263573/#t403847](http://www.magentocommerce.com/boards/viewthread/263573/#t403847)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-15T16:20:06.697

对我来说，我只是通过安装soap扩展`sudo apt-get install php5.6-soap`并通过重启apache `sudo service apache2 restart`，它现在运行良好。

# vb.net - 安装后 VB.NET 2005 启动应用程序

> ID：11403627
> 
> 赞同：0
> 
> 时间：2012-07-09T21:41:21.653
> 
> 标签：vb.net, installation

我正在使用内置的安装项目。我已经在安装程序上尝试了提交事件，但它是在安装程序退出之前触发的，而不是之后。我也试过这个人的代码：

[http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx)

他的目标与我的相同，但是当我尝试让他的代码在构建后事件上运行时，它会出现“未指定的错误”...

如何让安装程序在安装后运行我的应用程序？你知道，用复选框“完成后启动”。？？？

这应该很简单…………

*沮丧的*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:59:29.777

好吧，他们的博客是对的。我让它工作，这正是我想要的。为了找出问题所在，我显示了输出窗口 (CTRL+ALT+O)，它显示了调用他的脚本时构建后事件的 CScript 输出。事实证明，我系统上的 .js 文件正在由 Notepad++ 处理，我需要更改与 CScript 的关联才能使他的脚本正常工作（如果 .vbs 或 .js 文件不是默认应用程序，CScript 将无法使用它对于文件......太愚蠢了）。我还必须在 Notepad++ 的设置中取消 Notepad++ 与 .js 文件的关联，因为它会在我重新启动 Notepad++ 时重新捕获文件关联。

# node.js - nodejs + passport + express 3.0 + connect-flash 不闪烁？

> ID：11403628
> 
> 赞同：10
> 
> 时间：2012-07-09T21:41:25.430
> 
> 标签：node.js, express, connect, passport.js

我正在使用本地护照策略来验证用户身份。我按照 Jared Hanson 给出的指南安装了 connect-flash，以便为 req 对象提供 flash 方法。所以我的请求处理程序之一如下：

```
 app.post('/login',                             
      passport.authenticate('local', {           
          successRedirect: '/'                   
        , failureRedirect: '/login'              
        , successFlash: 'Bienvenido'             
        , failureFlash: 'Credenciales no válidas'                             
      })                                         
  ); 
```

当用户登录失败时，它会再次将用户重定向到 /login 但它不会闪烁任何东西：/

更新：我使用 mongodb 进行会话存储，我看到了这个：

```
> db.sessions.find()
{ "_id" : "qZ2eiTnx6r9LR25JOz/TGhiJ", "session" : "{\"cookie\":{\"originalMaxAge\":null,\"expires\":null,\"httpOnly\":true,\"path\":\"/\"},\"passport\":{\"user\":\"4ffb5b5db9cc16b615000001\"},\"flash\":{\"error\":[\"Credenciales no válidas\"],\"success\":[\"Bienvenido\"]}}" } 
```

因此，消息被插入到会话对象中，但不会被拉出。我应该做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-09T23:08:44.127

我假设您正在将消息拉出并在视图中呈现它们？就像是：

```
app.get('/login', function(req, res){
  res.render('login', { message: req.flash('error') });
}); 
```

# javascript - 使用 Web Audio API 流式传输在线广播流

> ID：11403633
> 
> 赞同：2
> 
> 时间：2012-07-09T21:41:31.373
> 
> 标签：javascript, html, audio

我有一个更笼统的问题；有没有办法使用 Web Audio API 流式传输（例如）广播？我喜欢 API，但我想将它与恒定的数据流 (SHOUTcast) 一起使用。我一直在寻找一种方法，但没有找到。

# php - mod_rewrite 导致 $_POST 无法访问 PHP

> ID：11403641
> 
> 赞同：0
> 
> 时间：2012-07-09T21:42:16.847
> 
> 标签：php, forms, apache, mod-rewrite

首先，这是我的 .htaccess：

```
RewriteEngine On
Options FollowSymLinks

# check if url ends in a slash and if it does redirect to same url without one
RewriteCond %{REQUEST_URI} !-d 
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(([^/]+/)*([^/.]+))/\ HTTP/
RewriteRule ^(([^/]+/)*([^/.]+))/$ http://localhost/example/$1 [R=301,L]

# extionless url rewrite for urls in form example.com/cmd
RewriteRule ^([^/.]+)$ index.php?cmd=$1 [L,QSA]

# extionless url rewrite for urls in form example.com/cmd/action
RewriteRule ^([^/]+)/([^/.]+)$ index.php?cmd=$1&action=$2 [L,QSA]

# extionless url rewrite for urls in form example.com/cmd/ajax
RewriteRule ^([^/]+)/([^/]+)/([^/.]+)$ index.php?cmd=$1&action=$2&ajax=$3 [L,QSA] 
```

所以这适用于url重写。但是，当我在向 PHP 提交表单后根据我的请求查看 Firebug 时，状态为 303 永久移动。我相当确定问题出在这一行：

```
RewriteRule ^(([^/]+/)*([^/.]+))/$ http://localhost/example/$1 [R=301,L] 
```

但我不知道如何解决它。我想让 mod_rewrite 完全按照它在功能上所做的工作，但我需要解决这个问题。

谢谢您的帮助！

编辑：我还想提一下，如果我使用 jquery .ajax 将数据从 JavaScript 发送到 PHP 并且有要发布的类型，它确实有效。而且， $_GET 无论如何都可以工作。从 HTML 发送到 PHP 时，只是 $_POST 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:46:06.503

您正在强制进行客户端重定向，这意味着浏览器将通过 GET 请求指定的新页面 - 这就是您的表单数据丢失的地方。POST 数据不会通过重定向保留，因为新页面不是通过 POST 加载的。

# android - 设置 Android 字符宽度

> ID：11403644
> 
> 赞同：1
> 
> 时间：2012-07-09T21:42:36.520
> 
> 标签：android, text, canvas

您可以使用 setTextSize() 控制绘制到画布中的文本字符的高度。例如，如果你想要高度为 8 像素的文本，你可以这样写：

```
mPaint.setTextSize(8); 
```

这工作得很好。但是，我似乎找不到设置宽度的方法。因此，8x12 像素字符看起来与 12x12 字符完全相同。我正在使用等宽字体，并希望仔细控制画布中每个字符的大小。

关于如何以像素为单位设置字符宽度的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:49:59.133

我相信文本的垂直高度被认为是文本的“大小”，而水平宽度被认为是“比例”。例如，如果您使用 Paint 在画布上绘制文本，则 Paint 具有称为[getTextScaleX](http://developer.android.com/reference/android/graphics/Paint.html#getTextScaleX%28%29)和[setTextScaleX](http://developer.android.com/reference/android/graphics/Paint.html#setTextScaleX%28float%29)的方法，您可以使用它们：

> 获取 [并设置] 绘制文本的水平比例因子。

根据您使用画布的方式，这些可能是您想要使用的方法 - 大多数其他文本方法处理水平文本间距，而不是修改实际字符本身的大小。

# powershell - 从 CSV PowerShell 中删除一行

> ID：11403646
> 
> 赞同：1
> 
> 时间：2012-07-09T21:42:41.670
> 
> 标签：powershell, csv, cmdlet

我目前有以下 csv

```
These, Are, Several, Columns
-----, ---, -------, -------
"And", "here", "is", "data"
"And", "some", "more", "data" 
```

虽然我希望我可以简单地更改创建 csv 的过程以删除不可能的破折号线。

破折号线始终是第 2 行，我可以使用 powershell 删除第 2 行数据吗？

额外的问题，我希望在底部添加一个空行，然后是一段文字。我猜我可以使用 add-content cmdlet，但我不完全确定如何使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:50:48.500

该命令应该可以工作：

```
gc file.txt | ? { $_ -notlike '*----*' } | sc file2.txt 
```

它基本上执行以下任务：

1.  检索内容`file.txt`
2.  过滤（使用`Where-Object`）不喜欢的行的内容----
3.  将剩余内容写入`file2.txt`

# c# - 访问列表视图列时的对象/实例异常

> ID：11403647
> 
> 赞同：0
> 
> 时间：2012-07-09T21:42:43.837
> 
> 标签：c#, winforms, listview

我正在使用 WinForms/VS2010 c# 创建一个包含 12 列和 8 行的列表视图。这是 WinForms 自动编码文件的片段：

```
 /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.listView1 = new System.Windows.Forms.ListView();
       .....
    } 
```

然后，在 Form1.cs 文件中，我有以下方法：

```
 // in my form1.cs file
    public void listView1_Populate()
    {
        var columnIndex = listView1.Columns[2].Index;
        int counter = 0;

        foreach (ListViewItem item in listView1.Items)
        {
             if (item.SubItems[columnIndex].Text == "2")
             {
                 counter += 100;
                 item.SubItems[columnIndex].Text = counter.ToString(); 
             }
        }
    } 
```

`Object reference not set to an instance of an object`但是当代码到达该行时， 我得到了异常：`var columnIndex = listView1.Columns[2].Index;`

我做错了什么（除了在 54 岁时尝试学习 c#！）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:56:31.417

从您的问题中不清楚什么是空引用。但是，如果您在此行之前添加以下内容，`var columnIndex = listView1.Columns[2].Index;`您可能会更清楚地了解出了什么问题。

```
if (listView1 == null)
    throw new Exception("listView1 is null");
if (listView1.Columns == null)
    throw new Exception("Columns is null");
if (listView1.Columns.Length < 3)
    throw new Exception("Columns length is out of range"); 
```

# objective-c - Objective-C：创建一个纯粹用于保存变量的文件

> ID：11403653
> 
> 赞同：0
> 
> 时间：2012-07-09T21:43:23.643
> 
> 标签：objective-c

我想在我的项目中添加一个文件，其唯一目的是保存一个数组。然后我会`#import`在需要从数组中添加/获取的任何地方使用这个文件。

我的问题是，当我创建一个新文件（我使用的是 Xcode 4）时，我不确定要选择什么类型的模板，然后选择什么子类。

我做这一切的原因是因为我有一个基于 SplitView 的应用程序，其中一个视图有一个文本字段，我试图在其中输出数据。我的问题是，每当我切换到不同的视图然后切换回来时，只有最近的条目在那里。我不是 100% 为什么会这样，但我怀疑这是因为当我切换到不同的视图时，当前视图以及其中的变量都会被遗忘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:50:32.520

这不是一个好方法。有很多方法可以做你想做的事：`prepareForSegue:`如果你使用故事板，委托，在代码中实例化你的视图控制器和在头文件中设置一个属性..这些只是几种方法。

您提出的方式是糟糕的 Objective-C 代码的滑坡，只会让您在未来更加头疼。花时间学习做正确的事。

看看[这个](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)，让你思考正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:02:19.510

如何保存数据似乎不是您的问题。看看 MVC 设计模式以及视图控制器如何实现它。它们通常依赖于 dataSource 协议，该协议以逻辑方式将数据从“模型”链接到您的“视图”，以实现您的预​​期目的。

然后视图控制器应该能够分配一个委托（通常是它自己（self）来保持视图填充正确的数据，无论视图是否被卸载。

如果您的视图控制器没有引用数据源或相应的协议，那么您仍然值得花时间看看如何利用该设计模式。从长远来看，知道这一点会有所回报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:55:06.500

与其将变量保存到文本文件，不如考虑使用 NSUserdefaults。

但我认为这不是您问题的真正解决方案，只是想让您知道除了将内容保存到文本文件之外还有其他方法。

# django - django模型相关字段集

> ID：11403654
> 
> 赞同：0
> 
> 时间：2012-07-09T21:43:28.097
> 
> 标签：django

我有一个小问题，我似乎无法弄清楚。

我有以下模型：

```
class UserWhale(models.Model):
    currencyPair = models.ForeignKey('currencies.CurrencyPair', verbose_name='Currency Pair')
    currency = models.ForeignKey('currencies.Currency', verbose_name='Source Currency')
    currencyTarget = models.ForeignKey('currencies.Currency', related_name='whale_currency_target_rel', verbose_name='Target Currency')
    userBankAccount = models.ForeignKey(UserBankAccount, verbose_name='Deposit Bank Account')
    whale_fee_percentage = models.DecimalField(max_digits=11, decimal_places=2)
    whale_amount = models.DecimalField(max_digits=11, decimal_places=2)
    whale_matched = models.DecimalField(max_digits=11, decimal_places=2)
    priority = models.IntegerField()
    user = models.ForeignKey('auth.User', related_name='whale_relation_user', editable=False)
    created_by = models.ForeignKey('auth.User', editable=False)
    created = models.DateTimeField(auto_now_add=True, editable=False)
    modified = models.DateTimeField(auto_now=True, editable=False)
    history = audit.AuditTrail() 
```

当我输出以下内容时：

```
{{ request.user.userwhale_set.count }} 
```

即使当前用户在该表中有数据，它也始终输出为零。“user”和“created_by”字段总是不同的，所以我想知道上面的代码是否使用“created_by”关系而不是“user”关系。如果是这样，我如何指定使用哪一个？

非常感谢本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:56:59.603

您已经在外键`related_name`上指定了属性`user`，因此您应该调用该名称：`request.user.whale_relation_user.count`。

# iis - IIS7重定向规则更改友好网址中的国家/地区别名

> ID：11403657
> 
> 赞同：0
> 
> 时间：2012-07-09T21:43:41.903
> 
> 标签：iis, iis-7, url-rewriting

目前我有一个别名

```
http://mysite/ru/folder/pagename 
```

我想重定向到

```
http://mysite/us/folder/pagename 
```

所以在 IIS7 中我试图使用 URL Rewrite

示例网址可能看起来像

```
http://mysite/ru/Solutions/Education+Solutions 
```

上述规则如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:50:37.407

以下代码应该为您完成

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="http://mysite/ru/folder/pagename">
                <match url="http://mysite/[a-z]{2}/(.*)" />
                <action type="Rewrite" url="http://mysite/us/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

这分解为

*   `[a-z]{2}`任意两个字母的国家代码
*   `(.*)`零个或多个字符
*   `{R:1}`对 (.*) 的反向引用 () 将其标记为一个组

# html - 如何防止 img:hover 舍入/摆动？（仅限火狐）

> ID：11403662
> 
> 赞同：3
> 
> 时间：2012-07-09T21:43:57.920
> 
> 标签：html, css, firefox

我注意到标准 :hover 在以非原始宽度值显示的图像上，当鼠标悬停生效时会导致轻微的摇晃动画。我认为这是由于发生了一些像素舍入，但是为什么悬停时显示的图像不同？

[请参考我在http://jsfiddle.net/z29LM/8/](http://jsfiddle.net/z29LM/8/)上的测试用例

请注意，前两个图像在悬停时很好（因为它们使用原始图像宽度/高度），但所有其他图像似乎在右侧和底部添加了 1 个像素。应用哪种悬停效果似乎并不重要（例如，背景颜色会导致相同的问题）。

所以解决方法似乎是打开 Gimp 并手动将图像调整到目标宽度/高度，或者是否有针对这种现象的 html/css 修复？

***编辑：*** 所以这似乎是一个仅限 Firefox 的错误（使用 13.0.1）。答案中发布的链接建议通过添加`box-shadow: #000 0em 0em 0em;`到图像元素来快速修复。有关固定/工作版本，请参阅[http://jsfiddle.net/z29LM/9/ 。](http://jsfiddle.net/z29LM/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:57:29.993

[这是 Firefox 的一个错误](https://bugzilla.mozilla.org/show_bug.cgi?id=745549)（它最初曾一度被修复，但在 FF10 之后重新出现）。

我的圣人建议？将浏览器调整大小保持在最低限度。

# python - 如何在不为其分配变量的情况下实例化对象

> ID：11403664
> 
> 赞同：0
> 
> 时间：2012-07-09T21:44:02.553
> 
> 标签：python

我有一个类，它的`__init__`功能做了很多事情，这就是我所需要的。

所以我真的只想调用`__init__`这个类的函数。我怎么能做到这一点，而不将它分配给一个变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:45:45.947

假设您的课程被调用`Foo`，您可以执行以下操作：

```
Foo() 
```

但是，如果您需要这样做，则可能表明您需要重新考虑您的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:50:00.157

首先，这显然是一个设计错误——代码应该只是一个独立的函数。

但是，有几种方法可以做到这一点：

1.  只需像往常一样实例化 - 没有理由必须将表达式的结果分配给变量。但是，这将导致完整的对象构造（并且可能在此后不久破坏）。

    ```
    Foo() 
    ```

2.  调用底层函数：

    ```
    Foo.__dict__.get('__init__')(None) 
    ```

这不会触发对象构造，但您可能不希望这样。请注意，在此处的示例中，我已将`None`. `self`这只适用`__init__`于不做任何事情`self`（或者，处理它的情况`None`）。

2a. 您可以使用 staticmethod 使这更容易：

```
In [32]: class Foo(object):
   ....:     @staticmethod
   ....:     def __init__():
   ....:         print "Foo init"
   ....:

In [33]: Foo()
Foo init
Out[33]: <django.core.management.commands.shell.Foo at 0x46d49b0>

In [34]: Foo.__init__()
Foo init 
```

# sql-server-2005 - 查找未使用的字段（全部为空）

> ID：11403665
> 
> 赞同：0
> 
> 时间：2012-07-09T21:44:07.360
> 
> 标签：sql-server-2005

我继承了一个遗留数据库，并且许多字段不再使用。我可以通过查询过去几年并查看哪些字段为空来判断，至少可以获得我可能查看的位置的基线。

有没有一种优雅的方法来确定数据库中的哪些字段对于给定集合中的所有记录都为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:57:44.233

```
DECLARE @table NVARCHAR(512);
SET @table = N'dbo.tablename';

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'';

SELECT @sql = @sql + QUOTENAME(name) 
     + ' = SUM(CASE WHEN ' + QUOTENAME(name) + ' IS NULL THEN 1 ELSE 0 END),'
  FROM sys.columns
  WHERE object_id = OBJECT_ID(@table)
  AND is_nullable = 1;

SELECT @sql = 'SELECT ' + @sql + ' Total_Count = COUNT(*)
  FROM ' + @table + ';';

EXEC sp_executesql @sql; 
```

任何输出为 0 的列都为空值（除非 Total_Count 列也输出为 0，在这种情况下，表为空）。请注意，此查询在大型表上会非常昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:46:03.647

这是你需要的吗？

```
 SELECT count(*)
  FROM table
  WHERE field IS NULL 
```

或者当然

```
 SELECT SUM(CASE WHEN field IS NULL THEN 1 ELSE 0 END) AS [field is null count]
        COUNT(*) as [total count]
 FROM table 
```

也可以，你可以一次为一堆领域做。

* * *

窃取 Aaron Bertrand 的模板：

```
DECLARE @tableName NVARCHAR(512)

SET @tableName = N'dbo.tablename';

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'';

SELECT @sql = @sql + N' SUM(CASE WHEN ' + QUOTENAME(name) + ' IS NULL THEN 1 ELSE 0 END) AS ['+name+' null count], '
FROM sys.columns
WHERE object_id = OBJECT_ID(@tableName) AND is_nullable = 1;

SELECT @sql = 'SELECT ' + @sql + ' Total_Count = COUNT(*)
FROM ' + @tableName + ';';

EXEC sp_executesql @sql; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:01:54.407

这为您提供了具有 NULL 字段的所有记录的计数，您可以将其与所有记录的计数进行比较

```
SELECT COUNT(*)
FROM Table1
WHERE COALESCE (Field1, Field2, etc) IS NULL 
```

# java - fbconnect 与 java play 框架

> ID：11403669
> 
> 赞同：1
> 
> 时间：2012-07-09T21:44:23.760
> 
> 标签：java, playframework, fbconnect

我在我的播放应用程序中使用 fbconnect 模块，但出现以下错误。

**无法编译文件 {module:fbconnect}/app/controllers/FBConnect.java。引发的错误是：无法解析 play.modules.fbconnect.FBConnectPlugin**

[我从Here](https://github.com/murz/play-fbconnect)下载了 fbconnect 。将文件夹重命名为 fbconnect 并放入

```
C:/play/myproject/modules 
```

在 dependencies.yml 我放

```
require:
- play -> fbconnect 0.6 
```

在 C:/play/myproject/conf/application.config

```
# Facebook Connect
# ~~~~~
fbconnect.id=APP_ID
fbconnect.apiKey=API_KEY
fbconnect.secret=APP_SECRET
fbconnect.model=models.User
fbconnect.landUrl=/ 
```

我做错了什么。下载 fbconnect 并在 dependencies.yml 和 application.conf 中进行必要的更改后。我也运行播放依赖项。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:55:56.110

如果您打算进行 Facebook 登录以及其他网络登录（如 twitter 或 google），我建议您选择一个最新的 Java 库，1.x 模块的问题在于该方法用于与其 API 通信的网络通常已经过时。

我想做一个 Facebook 和 Google 登录，并尝试在 1.2.4 中使用安全社交，问题是 Google 现在使用 OAuth2 而不是第一个 OAuth。我什至尝试使用 play 2.0 scala securesocial 中的源代码更改模块，并将其“翻译”为 java。

所以我刚刚选择了一个 java 库（通常是最新的），scribe（[https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)），它工作得非常好。

我到底做了什么：

*   检查 scribe-java github 页面
*   从fork列表中下载我想要的fork
*   从 Maven 构建
*   编码我需要的东西

祝你的应用好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:51:05.780

以下 URL 提供了有关安全社交（使用游戏框架 1.0+）的更多详细信息：

[http://www.playframework.org/modules/securesocial-0.2.4/home](http://www.playframework.org/modules/securesocial-0.2.4/home)

如果您希望使用社交图而不仅仅是身份验证，我建议您使用 restFB 或 batchFB。

步骤：对于设置：使用：

```
play install socialsecure-0.2.4 
```

或添加到 dependencies.yml 文件

```
require:
  -play -> securesocial 0.2.4 
```

& 然后运行

```
play deps 
```

将路由添加到路由文件：

```
*       /auth       module:securesocial 
```

将以下内容添加到需要身份验证的任何控制器类中：

```
@With( SecureSocial.class )
public class Application extends Controller { 
```

确保您的提供商（例如 twitter 或 facebook）在 application.conf 文件的提供商列表中。还要确保您的应用程序具有正确的密钥/ID 和密码（在 application.conf 文件中指定）。完成后，确保您对securesocial 的引用已经到位（如果没有，请针对您使用的任何IDE 运行play eclipsify 或适当的命令）。完成后，启动应用程序并测试 facebook（或其他提供商链接） - 确保在 facebook 应用程序（在 facebook 上）中正确指定了 facebook 返回 URL。

可以根据需要修改 main.html 页面等，以确保您根据需要使用 CSS/content/login 显示。

如果使用 groovy 模板，您可以在 html 视图中添加以下内容以显示一些用户信息：

```
 <h2><img src="${user.avatarUrl}" width="40px" height="40px"/> Welcome    ${user.displayName}</h2> 
```

希望能帮助到你

# jquery - 在jQuery中获取单击表的行索引时出错

> ID：11403671
> 
> 赞同：1
> 
> 时间：2012-07-09T21:44:27.397
> 
> 标签：jquery

我正在尝试获取我单击的表项的行号。我认为这会起作用，但我收到一条错误消息，提示“对象不支持属性或方法'父'”我做错了什么？该表是动态创建的，这就是我通过 css 类指定它的原因。

```
<script type="text/javascript">
    var table = $('<table></table>');
    $(document).ready(function () {
        $(".tbl").click(function () { 
            var row = $('<tr></tr>').text($(this).index);
            table.append(row); 
            $('#please').append(table);
        });
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:45:59.247

你错过了`()`，改变这个：

```
$(this).index 
```

至：

```
$(this).index() 
```

# php - 是否可以在 Symfony2 中调试 php 代码？

> ID：11403682
> 
> 赞同：3
> 
> 时间：2012-07-09T21:45:38.253
> 
> 标签：php, debugging, symfony

我在 Ruby on Rails 之后开始使用 Symfony2，并且能够调试 Ruby 代码。我对 Symfony2 上的 php 很好奇。是否可以调试它？我是否需要扩展、捆绑或其他？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:01:08.433

是的，XDebug FTW，但 Symfony2 实际上有它自己的调试工具——比如 Web Debug Toolbar，它可以非常方便（至少用于检查发送的 SQL 查询）。[您可以在此处](http://symfony.com/doc/current/book/internals.html#visualizing-profiling-data)阅读有关其设置和使用的更多信息。此外，您可能需要将开发环境与生产环境分开（这也不是 XDebug 关心的问题），这里有一些[关于](http://symfony.com/doc/current/cookbook/debugging.html)如何正确执行的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:08:32.297

如果您需要一个强大的调试器并使用 Windows 作为您的主要开发平台，那么[PHPEd 的](http://www.nusphere.com/products/phped.htm)调试器是迄今为止最好的 PHP 调试器。请注意，所有操作系统都有服务器扩展，因此您实际上只需要基于 Windows 的开发计算机，但您的部署和测试服务器可以是您想要的任何服务器。

但是，如果您使用 Linux`xDebug`可能会满足您的需求，但请注意它有一些怪癖，并且与 NetBeans 等一些 IDE 不能很好地相处。NetBeans 特别麻烦，因为 xDebug 中的一个直接错误阻止它使用“on飞行”评估能力（在调试过程中您将无法使用评估气泡）。

PHPEd 还带有一个非常强大的分析器。

# excel - Excel VBA宏通过FTP上传下载

> ID：11403692
> 
> 赞同：-1
> 
> 时间：2012-07-09T21:46:10.687
> 
> 标签：excel, vba

请告诉任何人如何使用 Excel VBA 宏通过 ftp 上传和下载 csv 文件。谁能指出任何示例或示例代码。我想将该文件复制到 unix 位置。

问候，

柴兔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:07:09.563

如果您将*Microsoft Internet 传输控制*作为可用库，这看起来是最优雅的解决方案：http: [//officeone.mvps.org/vba/ftp_upload_file.html](http://officeone.mvps.org/vba/ftp_upload_file.html)

否则，最常见的解决方案涉及执行 shell 命令：[http ://www.mrexcel.com/forum/showthread.php?471016-Import-an-FTP-file-into-Excel](http://www.mrexcel.com/forum/showthread.php?471016-Import-an-FTP-file-into-Excel)

# opengl - 在opengl（2D）中旋转星星

> ID：11403693
> 
> 赞同：0
> 
> 时间：2012-07-09T21:46:16.937
> 
> 标签：opengl, rotation

我有一个 2D 星，我不知道如何围绕它的中心旋转它，我也不知道如何用键盘键来做。另外，我怎样才能让我的对象按一定百分比变大或变小（因为当我试图通过改变像素来做到这一点时，星星会出错）。

这是我的代码：

```
#include <GL/glut.h>
#include <GL/gl.h>
#include <GL/freeglut.h>

void init (void)
{
    glClearColor(0.0,0.0,0.0,00);
    glMatrixMode(GL_PROJECTION);
    gluOrtho2D(0.0,200.0,0.0,200.0);

}
void LineSegment(void)
{
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0,1.0,1.0);
    glBegin(GL_LINE_LOOP);
    glVertex2i(20,120);
    glVertex2i(180,120);
    glVertex2i(45,20);
    glVertex2i(100,190);
    glVertex2i(155,20);
    glEnd();
    glFlush();
}
int main(int argc,char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowPosition(50,100);
    glutCreateWindow("STAR");
    init();
    glutDisplayFunc(LineSegment);
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:03:08.243

如果您使用 glRotatef() 函数围绕 z 轴旋转星星，它应该围绕它的中心旋转。我会创建一个全局变量来测量旋转，并使用您要使用的任何键来增加减少该值。所以，glRotatef（角度，0.0f，0.0f，1.0f）；应该做的伎俩。查看 NeHe 教程，我发现它们对此特别有帮助：http: [//nehe.gamedev.net/](http://nehe.gamedev.net/)

查看 1-10 之间的必要项，还有一些关于键盘控制和旋转等的内容。

此外，对于缩放它，您也可以尝试 glScalef() ，并进行数学运算以将其增加为不会太难的百分比。

希望其中一些有用，我对这一切都很陌生>。>

# php - 删除 YouTube API 标题标签开头的前 24 个字符

> ID：11403695
> 
> 赞同：1
> 
> 时间：2012-07-09T21:46:56.623
> 
> 标签：php, javascript, regex, youtube

我有一个从播放列表中提取 YouTube 视频缩略图的脚本，当您将鼠标悬停在它们上时，会显示视频标题，**我想删除**每次自动显示在标题标签中的前 24 个字符？我该怎么做呢？这是否需要使用正则表达式来完成，如果需要，怎么做？

我设置的 PHP 代码是：

```
<?php get_playlists(); ?>

<?php
function get_playlists(){
$data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?    orderby=published&max-results=12");
$xml = simplexml_load_string($data);

foreach($xml->entry as $playlist){
$media = $playlist->children('http://search.yahoo.com/mrss/');
$attrs = $media->group->thumbnail[1]->attributes();
$thumb = $attrs['url'];
$attrs = $media->group->player->attributes();
$video = $attrs['url'];
$title = $media->group->title;
$url = $video;

parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
$vid_Id = $my_array_of_vars['v'];

$thumbnail .= '<div style="float:left; cursor:pointer;">
<p class="crop"><a class="videobox various iframe" href="http://www.youtube.com/embed/' .     $vid_Id . '?autoplay=1&hd=1"><img src="' .$thumb . '" title="' . $title . '" width="74"     height="56"/></a></p></div>';
}

print $thumbnail;

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:48:01.740

您只需要[`substr()`](http://php.net/substr)通过更改此值来使用该值：

```
$title = $media->group->title; 
```

对此：

```
$title = substr( $media->group->title, 23); 
```

请注意，该值是 23，而不是 24，因为第 0 个字符索引实际上是第一个字符。

# xslt - xslt 根据属性值获取第 n 个兄弟

> ID：11403698
> 
> 赞同：0
> 
> 时间：2012-07-09T21:47:03.400
> 
> 标签：xslt

我需要根据属性值及其在 xml 文档中的位置，将 xml 节点添加到输出文档中的特定位置。

在下面的示例中，每次出现 product="111" 时，我都需要为 product="222" 的子项获取相应的路径属性。需要注意的是：它们在文档中的相对位置必须匹配。对于第一个产品 =“111”，我需要第一个产品的路径 =“222”。对于第二个“111”，我需要第二个产品“222”的路径。

我需要的输出（我还添加了当前产品的路径，但没有问题）：

```
<output>
    <product_out id="111">
        <path>b</path>
    </product_out>
    <product_out id="111">
        <path>g</path>
    </product_out>
    <product_out id="111">
        <path>i</path>
    </product_out>
</output> 
```

我的 xml 文档。

```
<?xml version="1.0"?>
<order xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<item product="111">
    <sub_item path="a" />
</item>
<item product="222">
    <sub_item path="b" />
</item>
<item product="333">
    <sub_item path="c" />
</item>
<item product="111">
    <sub_item path="d" />
</item>
<item product="111">
    <sub_item path="e" />
</item>
<item product="555">
    <sub_item path="f" />
</item>
<item product="222">
    <sub_item path="g" />
</item>
<item product="555">
    <sub_item path="h" />
</item>
<item product="222">
    <sub_item path="i" />
</item>
</order> 
```

我的 xsl 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
<xsl:template match="/">
<output>
    <xsl:apply-templates />
</output>
</xsl:template>

<xsl:template match="order/item">
<product_out>
    <xsl:attribute name="id"><xsl:value-of select="@product"/></xsl:attribute>

    <xsl:if test="@product = 111">
        <the_correct_sibling_position><xsl:value-of select="1+count(preceding-sibling::item[@product='111'])"/></the_correct_sibling_position>
        <path_test1><xsl:value-of select="/order/item[position()=4]/sub_item/@path"/></path_test1>
        <path_test2><xsl:value-of select="/order/item[2]/sub_item/@path"/></path_test2>
        <path_test3><xsl:value-of select="/order/item[position()=number(1+count(preceding-sibling::item[@product='111']))]/sub_item/@path"/></path_test3>
        <path_test4><xsl:value-of select="/order/item[position()=1+count(preceding-sibling::item[@product='111'])]/sub_item/@path"/></path_test4>
    </xsl:if>
    <path><xsl:value-of select="sub_item/@path[1]"/></path>
</product_out>
</xsl:template>
</xsl:stylesheet> 
```

我可以得到我需要使用的正确数组位置

> 1+count(前兄弟::item[@product='111'])

我通过输出**<the_correct_sibling_position>**节点中的值进行了测试。

我还可以对节点位置进行硬编码：

```
path_test1 always returns d
path_test2 always returns b 
```

接下来的 2 个测试不输出值 b、g，我希望如此。

```
path_test3 always returns a
path_test4 always returns a 
```

如何根据产品节点**“111”**和**“222”**的位置获得返回b、g和i的路径？在我的 select 语句的路径中，previous-sibling 变量没有像我期望的那样工作。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:36:45.327

我重新测试了我以前的一些尝试，现在它正在工作，不知道为什么以前没有。我添加了一个变量，然后在我的 select 语句中使用它。

变量代码：

```
<xsl:variable name="t1"><xsl:value-of select="1+count(preceding-sibling::item[@product='111'])"/></xsl:variable> 
```

我的选择声明：

```
 <path_test_good><xsl:value-of select="/order/item[@product='222'][position()= $t1]/sub_item/@path"/></path_test_good> 
```

# visual-studio-2010 - cs转vb

> ID：11403707
> 
> 赞同：-2
> 
> 时间：2012-07-09T21:47:51.917
> 
> 标签：visual-studio-2010, windows-phone-7, zooming

谁能告诉我这个 .cs 代码中的“j”和“i”是什么？

```
private void zoom_out(object sender, RoutedEventArgs e)
    {
        if(j>0)
        {
            image1.Height -= 50;
            image1.Width -= 50;
            j--;
            i = j;
        }
    }
private void zoom_in(object sender, RoutedEventArgs e)
    {
       if(i<2)
        {
            image1.Height += 50;
            image1.Width += 50;
            i++;
            j = i;
        }
    } 
```

并为 .vb 代码更改“j”和“i”。它是用于缩小和缩小的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T21:58:32.860

我相信它们是最常被称为“变量”的编程概念。它们用于存储应用程序状态并执行计算。

# python - PyQt 系统托盘和全屏

> ID：11403711
> 
> 赞同：1
> 
> 时间：2012-07-09T21:48:24.743
> 
> 标签：python, qt, pyqt4, system-tray

我已经构建和应用程序通过 ZeroMQ 获取一些消息并使用 PyQt 在系统托盘中显示它们。问题是，如果有一个应用程序以全屏模式运行，它仍然会显示消息，这对用户来说很痛苦，原因很明显。我的问题是：

有什么方法可以知道是否有全屏应用程序，以便我可以告诉我的应用程序不显示消息？

到目前为止，我是否有任何选项可以告诉应用程序在全屏显示时不显示消息？

无论如何，如果全屏显示某些内容，是否可以告诉系统根本不显示消息？

总而言之，我可以对此做些什么吗？或者只是在我的应用程序中创建一个用户可以修改的变量，如果他不想看到这些消息，请检查它。

# c - 人们一直告诉我我正在用 ruby 编写“C 风格的迭代器”，而且我应该以其他方式来做，没有 i++ 的东西

> ID：11403712
> 
> 赞同：1
> 
> 时间：2012-07-09T21:48:27.340
> 
> 标签：c, ruby, iterator, block, syntactic-sugar

这里的细节并不重要，这只是一个例子，重要的是 i=0, i+=1 动作

```
def sortAndIndex
  #sorting keys
  @disco = Hash[@disco.sort]

  #basic setup for both input types
  @years = @disco.keys
  @albums = @disco.values
  sum = @years.count

  #setup for "albums" input
  @allalbums = []
  i = 0
  sum.times do
  thatyear = @years[i] + ", " + @albums[i]
  @allalbums << thatyear
  i += 1
 end
end 
```

现在这确实有效，ruby 或大多数其他语言中的任何其他“i++”类型（“C 风格”）迭代器也应该如此。但是，我一直听说 ruby​​ 有更好的方法来做到这一点，基本上我会传递第二个参数变量，而不是这里的“a”。

我会为此做哪些修改，并且 ruby​​ 是否有多个“快捷方式”涉及这些 i++ ary[i] 迭代器问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:53:39.893

是的，您应该以“Ruby 方式”做事，而忘记索引。为什么？因为它是惯用的并且看起来更好。您传入要在集合的每个元素上执行的代码块。元素如何存储，以什么顺序，如果它们可以被索引，都是无关紧要的。

```
# nice, eh?
some_array.each do |elem|
  some_action(elem)
end 
```

如果您需要一个索引计数器（在您的示例中不需要），请`each_with_index`改用。

还要注意，除了迭代集合之外，块的概念在 Ruby 中很重要。你有什么......奇怪......你应该听他们，但许多方法将块作为参数（或可选参数），它们不返回可以索引的集合。例如，`File.open`获取一个块，如果提供，则在块返回时为您关闭文件

另外，还有一点需要注意；您的命名约定对于 Ruby 来说是非典型的。Rubyists 使用小写的函数和变量名`underscores_between_words`。最好坚持这里的社区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:49:54.190

人们告诉你这个：

```
ary.each do |a|
  puts a
end 
```

简单多了，不是吗？

### 更新

这就是我用惯用的 ruby​​ 编写更新示例的方式

```
def sort_and_index
  @disco.sort.map do |year, album|
    "#{year}, #{album}"
  end
end 
```

我不确定您是否需要所有这些实例变量以供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:53:25.207

该`times`方法不会将第二个参数传递给块。您可能正在寻找`each_with_index`，它将对象和该对象的索引传递给块：

```
ary.each_with_index do |object, i|
  puts "Index #{i} => #{object.inspect}"
end 
```

但最终是的，Ruby 有几种迭代集合的方法，它们都比 C 风格的`for`循环更好:-)

# php - 使用 PHP 的 MYSQL 查询生成的 HTML 列表

> ID：11403716
> 
> 赞同：-3
> 
> 时间：2012-07-09T21:48:42.377
> 
> 标签：php, html, mysql, list

我的桌子的结构；

```
VARCHAR username,
VARCHAR user_support_message,
VARCHAR user_support_topic,
VARCHAR admin_support_reply,
VARCHAR request_date,
VARCHAR request_time,
BOOL replied, 
```

我有一张桌子，用来保存用户的支持请求。我想要做的是从我的数据库中获取未答复的支持消息（WHERE REPLIED=NO）并在 html 页面中表示它们。我将尝试逐个导航到每个条目并编辑它们，然后保存它们。

使用 php 脚本获取记录列表时我没有问题。但我不知道如何在 HTML 页面中正确地表示它们。

也许有一个工具，比如表示从数据库收集的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:55:16.740

这将列出结果

```
$result = // mysql query response

echo '<table>';

while($data = mysql_fetch_assoc($result)) {
   echo '<tr>';

   foreach($data as $v) {
      echo '<td>'.$v.'</td>';
   }

   echo '</tr>';
}

echo '</table>'; 
```

但如果你只想编辑 db-entries，你可能想看看 phpmyadmin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T13:12:14.713

您不需要循环，只需使用 mysql 命令的 --html 选项：

```
mysql --html -uroot -e "USE mydb;select * from mytable" 
```

# c# - Windows UI 自动化 API 在服务器上运行时找不到子元素

> ID：11403720
> 
> 赞同：3
> 
> 时间：2012-07-09T21:48:53.400
> 
> 标签：c#, nunit-2.5, microsoft-ui-automation

我在 NUnit 2.5.10 测试中使用[Microsoft UI 自动化 API](http://msdn.microsoft.com/en-us/library/ms747327)来为 WPF 应用程序执行自动化 UI 测试。

在某些情况下，在我的开发机器上运行测试能够找到某些 UI 元素，但是当在我们的构建代理机器上针对相同的二进制文件运行相同的脚本时，它无法找到这些元素。

我找不到代理机器行为不同的任何原因。我怀疑它与 UIAccess 标志或 UAC 有关，但没有遇到任何具体的问题。

**任何人都可以就构建代理为什么会有不同的行为提供一些指导，或者如何修复代理以查看与我的其他机器相同的元素？**

例如，我有一个组合框，里面有十几个选项。使用 Win7 SDK 中的“检查对象”工具，我可以看到每个选项都有一个子元素，其中包含实际显示的文本。所以在我的测试代码中，我做了这样的事情：

```
// get the child elements
var options = comboBoxElement.FindAll(TreeScope.Children, (System.Windows.Automation.Condition) new PropertyCondition(AutomationElement.IsControlElementProperty, (object) true));

foreach (AutomationElement child in viewOptions)
{
    var subControls = child.GetChildren();
    Console.WriteLine("Child: {0} w/ {1} children", child.Current.Name,  subControls.Count);
    foreach (AutomationElement subControl in subControls)
        Console.WriteLine("SubControl: {0}", subControl.Current.Name);
} 
```

在我的开发机器上，我得到以下结果：

```
Child: My.BoundObject.ClassName w/ 1 children
SubControl: Displayed Text for first item
Child: My.BoundObject.ClassName w/ 1 children
SubControl: Displayed Text for second item
Child: My.BoundObject.ClassName w/ 1 children
SubControl: Displayed Text for third item 
```

但是在服务器上，我得到了这个：

```
Child: My.BoundObject.ClassName w/ 0 children
Child: My.BoundObject.ClassName w/ 0 children
Child: My.BoundObject.ClassName w/ 0 children 
```

在这两种情况下，Inspect Objects 都会显示子对象。 ![检查选项屏幕截图](../Images/8d5f10526e710134e2cf211fafc6837e.png)

构建代理和我的本地计算机都在运行带有 .Net 4 的 Windows 7 SP1。在这两种情况下，我都运行 nunit-console.exe 来启动测试。我在机器之间复制整个环境，所以它不仅是相同版本的 nunit 和我的应用程序的二进制文件，而且是完全相同的文件、配置、库等。 nunit 控制台以管理员用户身份运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T18:59:37.163

在多台机器上运行场景后，我能够确定那些安装了 .Net 4.5 的机器能够访问子元素，而那些仅安装了 .Net 4.0 的机器则不能。请注意，应用程序和测试都是针对 .Net 4.0 编译的。

希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:50:19.613

请选择 windows 的用户版本而不是服务器版本。即 Windows2003/Windows2008 之上的 XP/Windows7。UIA 的自动化支持在 Windows 的服务器版本中通常很差。

[在这里查看](http://white.codeplex.com/wikipage?title=Using%20with%20Continuous%20Integration&referringTitle=Home)

# regex - 从字符串中提取正则表达式数字

> ID：11403722
> 
> 赞同：0
> 
> 时间：2012-07-09T21:49:07.950
> 
> 标签：regex

我正在查看以下字符串是否与其中的数字 1 匹配

23_13_15_145_34_1_135

23_13_15_145_34_1

1_23_13_15_145_3

我只想完全匹配它，所以第一个示例不能包含 13、15 或 145，只包含 1。

与字符串开头和结尾处的 1 的开头和结尾示例相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:50:31.640

尝试这个：

```
/(^|_)1(_|$)/ 
```

它检查`1`紧跟在字符串开头 ( `^`) 或`_`字符之前，以及紧跟在另一个`_`字符或字符串结尾 ( `$`) 之后。

当然，`?:`如果您关心（并且您的 RE 引擎支持它），请添加到每个分组以避免捕获：

```
/(?:^|_)1(?:_|$)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:56:37.997

The following should work (uses [lookaround](http://www.regular-expressions.info/lookaround.html)):

```
(?<!\d)1(?!\d) 
```

This regex will match a single `1` character, but only if there are not any digits before or after it.

# python - Python，Tkinter，Checkbutton：有没有办法检查开/关值

> ID：11403723
> 
> 赞同：0
> 
> 时间：2012-07-09T21:49:10.203
> 
> 标签：python, if-statement, tkinter, checkbox

我要做的是设置 if 语句来检查 checkbuttons 值是打开还是关闭

我在想的是这样的

```
from Tkinter import *

def checkbutton_value():
    #If statement here
    #is their something like 

    #if checkbox_1.onvalue == True:
    #   checkbox_2.deselect()

    #if checkbox_1.varible == checkbox_1.onvalue:
    #   checkbox_2.deselect()

    print 'Need Help on lines 7-8 or 10-11'

root=Tk()

checkbox_1 = Checkbutton(root, text='1   ', command=checkbutton_value).pack()
checkbox_2 = Checkbutton(root, text='2   ', command=checkbutton_value).pack()

checkbox_3 = Checkbutton(root, text='QUIT', command=quit).pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T21:57:32.120

首先，**不要在一行上创建和打包小部件**。 `pack`返回`None`，所以在你上面的代码中，`checkbox_1`是`None`。反而：

```
checkbox_1 = Checkbutton(root, text='1   ', command=checkbutton_value)
checkbox_1.pack() 
```

现在，要获取检查按钮的值：

```
def checkbutton_value1():
    if(var1.get()):
       var2.set(0)

def checkbutton_value2():
    if(var2.get()):
       var1.set(0)

var1=IntVar()
checkbox_1 = Checkbutton(root, text='1   ', variable=var1, command=checkbutton_value1)
checkbox_1.pack()
var2=IntVar()
checkbox_2 = Checkbutton(root, text='2   ', variable=var2, command=checkbutton_value2)
checkbox_2.pack() 
```

通常希望为这样的事情创建自己的检查按钮类：

```
class MyCheckButton(CheckButton):
    def __init__(self,*args,**kwargs):
        self.var=kwargs.get('variable',IntVar())
        kwargs['variable']=self.var
        Checkbutton.__init__(self,*args,**kwargs)

    def is_checked(self):
        return self.var.get() 
```

# ruby - 如何在 Ruby 中发送 HTTP PUT 请求？

> ID：11403728
> 
> 赞同：20
> 
> 时间：2012-07-09T21:49:36.163
> 
> 标签：ruby, http, rest, put

我正在尝试将 PUT 请求发送到特定的 URL，但到目前为止还没有成功。

如果我是通过一个 HTTP 请求者 GUI 来做的，比如[这个](https://addons.mozilla.org/en-us/firefox/addon/httprequester/)，它就像在以下 url 上做一个 PUT 一样简单：

`http://www.mywebsite.com:port/Application?key=apikey&id=id&option=enable|disable`

请注意，在上述请求中指定了端口号。通过 ruby​​ 代码提交请求时，我也需要这样做。

如何在 Ruby 中复制这样的请求？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-09T21:56:03.823

```
require 'net/http'

port = 8080
host = "127.0.0.1"
path = "/Application?key=apikey&id=id&option=enable"

req = Net::HTTP::Put.new(path, initheader = { 'Content-Type' => 'text/plain'})
req.body = "whatever"
response = Net::HTTP.new(host, port).start {|http| http.request(req) }
puts response.code 
```

Larry's answer helped point me in the right direction. A little more digging helped me find a more elegant solution guided by this answer.

```
http = Net::HTTP.new('www.mywebsite.com', port)
response = http.send_request('PUT', '/path/from/host?id=id&option=enable|disable') 
```

# python - 将行转换为列

> ID：11403733
> 
> 赞同：5
> 
> 时间：2012-07-09T21:50:07.533
> 
> 标签：python, ruby, perl, unix

我有一个如下行中的文件，并想转换为两列格式。

```
>00000_x1688514
TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968
TGCTTGGACTACATATTGTTGAGGGTTGTA
... 
```

所需的输出是

```
>00000_x1688514 TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968 TGCTTGGACTACATATTGTTGAGGGTTGTA
... 
```

我将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T22:25:56.877

我不知道您是否知道用于读/写和其他遗传功能的 BioPerl 模块。你的问题可以这样写。

```
#!/usr/bin/perl
use strict;
use warnings;
use Bio::SeqIO;

my $file = 'o33.txt';
my $in  = Bio::SeqIO->new( -file   =>  $file,
                           -format => 'fasta');

while ( my $seq = $in->next_seq() ) {
    print $seq->id, "\t", $seq->seq, "\n";
}

__END__
00000_x1688514  TGCTTGGACTACATATGGTTGAGGGTTGTA
00001_x238968   TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T22:09:40.720

在蟒蛇中：

```
fd = open('filepath')
cols = izip(fd, fd)
with open('output_filepath') as outfile:
    for col in cols:
        outfile.write('\t'.join(col).replace('\n', '') +'\n') 
```

所需的输出应该在`output_filepath`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T23:20:45.167

另一个 Perl 选项是将记录分隔符设置为 '>'，一次读取两行，然后用换行符替换制表符：

```
use Modern::Perl;

local $/ = '>';
do { s/\n/\t/; print }
  for <DATA>;

__DATA__
>00000_x1688514
TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968
TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

输出：

```
>00000_x1688514 TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968  TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

对于文件：

```
use Modern::Perl;
use autodie;

open my $inFile,  '<', 'inFile.txt';
open my $outFile, '>', 'outFile.txt';

local $/ = '>';
do { s/\n/\t/; print $outFile $_ }
  for <$inFile>;

close $inFile;
close $outFile; 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:55:29.383

One approach:

```
perl -i -pe 's/\n/ / unless m/^[ACGT]+$/' FILENAME 
```

This will in-place edit the file `FILENAME`, replacing a newline with a space in every line that isn't a string of A's, C's, G's, and T's.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T11:50:29.717

假设输入是真实`FASTA`格式，您可以使用`awk`和`getline`功能：

```
awk '/^>/ { printf "%s ", $0; getline; print }' file.txt 
```

输出：

```
>00000_x1688514 TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968 TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T00:00:21.347

在 Ruby 中，我会使用类似的东西：

```
File.readlines('test.txt').map(&:strip).each_slice(2) do |row|
  puts row.join(' ')
end 
```

哪个输出：

```
>00000_x1688514 TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968 TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T22:07:30.967

使用`awk`：

```
awk '{ printf "%s", $0 (substr( $0, 1, 1 ) == ">" ? " " : ORS) }' infile 
```

输出：

```
>00000_x1688514 TGCTTGGACTACATATGGTTGAGGGTTGTA
>00001_x238968 TGCTTGGACTACATATTGTTGAGGGTTGTA 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T00:40:40.847

一个更整洁的 Python 解决方案：

```
from itertools import izip

with open('test.txt') as inf, open('newtest.txt', 'w') as outf:
    for head,body in izip(inf, inf):
        outf.write(head.rstrip() + ' ' + body) 
```

# android - Android 适配器和上下文菜单

> ID：11403734
> 
> 赞同：1
> 
> 时间：2012-07-09T21:50:10.507
> 
> 标签：android, contextmenu

我是android的新手，我不太了解适配器的使用？我一直在尝试制作 ContextMenu，它会在单击列表中的一个项目时弹出：我的 Activity 就像这样，没有我尝试过的 ContextMenu，因为它很有用：

```
public class Proj2Activity extends Activity {
public static final String TAG = "MyActivity";
private TweetListAdapter1 twa;
private ListView myListView;
ArrayList<TweetModel> tweets;
public static double distance(float lat_a, float lng_a, float lat_b, float lng_b) {
    float pk = (float) (180/3.14169);

    float a1 = lat_a / pk;
    float a2 = lng_a / pk;
    float b1 = lat_b / pk;
    float b2 = lng_b / pk;

    float t1 = FloatMath.cos(a1)*FloatMath.cos(a2)*FloatMath.cos(b1)*FloatMath.cos(b2);
    float t2 = FloatMath.cos(a1)*FloatMath.sin(a2)*FloatMath.cos(b1)*FloatMath.sin(b2);
    float t3 = FloatMath.sin(a1)*FloatMath.sin(b1);
    double tt = Math.acos(t1 + t2 + t3);

    return 6366000*tt;
}

public static Location getLocation(Context ctx) {
    LocationManager lm = (LocationManager) ctx
            .getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = lm.getProviders(true);

    /*
     * Loop over the array backwards, and if you get an accurate location,
     * then break out the loop
     */
    Location l = null;

    for (int i = providers.size() - 1; i >= 0; i--) {
        l = lm.getLastKnownLocation(providers.get(i));
        if (l != null)
            break;
    }
    return l;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LoadTweetsTask ltt = new LoadTweetsTask("androiddev");
    ltt.execute();

    final TextView text1 = (TextView) findViewById(R.id.nume);
    final Button btnGo = (Button) findViewById(R.id.button1);

    btnGo.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            String name1 = text1.getText().toString();

            SharedPreferences settings = getSharedPreferences("My_Pref", 0);
              SharedPreferences.Editor editor = settings.edit();
              editor.putBoolean(name1, true);
              editor.commit();
             LoadTweetsTask ltt = new LoadTweetsTask(name1);
             ltt.execute();
        }
    });

}

private class LoadTweetsTask extends AsyncTask<Void, Void, Void> {

    ProgressDialog progressDialog;
    public String name;

    public LoadTweetsTask(String name) {
        this.name = name;
    }

    @Override
    protected void onPreExecute() {
        tweets = new ArrayList<TweetModel>();

        progressDialog = new ProgressDialog(Proj2Activity.this);
        progressDialog.setMessage("Loading Tweets");
        progressDialog.show();

    }

    @Override
    protected void onPostExecute(Void result) {
        progressDialog.dismiss();

        TweetListAdapter1 adapter = new TweetListAdapter1(getApplicationContext(), tweets);
        ((ListView)findViewById(R.id.listTweets)).setAdapter(adapter);
    }

    @Override
    protected Void doInBackground(Void... params) {

        HttpClient client = new DefaultHttpClient();

        String requestUrl = "http://api.twitter.com/1/statuses/user_timeline.json" + "?screen_name=" + name + "&count=200";
        HttpGet request = new HttpGet(requestUrl);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        try {
            String jsonResponse = client.execute(request, responseHandler);

            JSONArray json = new JSONArray(jsonResponse);
            //used to display 20 valid tweets from 200 tweets which have the location specified
            int count = 0;
            for (int i = 0; i < json.length(); i++) {
                if(count <= 20){
                    JSONObject jsonTweet = json.getJSONObject(i);

                    try{

                        JSONObject obj = jsonTweet.getJSONObject("geo");

                        if(obj!=null){
                            Location myLocation = getLocation(getBaseContext());
                            double distance;
                            JSONArray arr = obj.getJSONArray("coordinates");
                            float tweetc1 = (float) arr.getDouble(0);
                            float tweetc2 = (float) arr.getDouble(1);
                            Log.d("COORDTweet",Float.toString(tweetc1)+  "  " +Float.toString(tweetc2) );
                            float my1 = (float) 44.438254;
                            float my2 = (float) 26.051009;
                            Log.d("COORDMY",Float.toString(my1)+  "  " +Float.toString(my2) );
                            distance = distance(tweetc1, tweetc2, my1, my2);
                            Log.d("Distance",Double.toString(distance));
                            tweets.add(new TweetModel(jsonTweet.getJSONObject("user").getString("name"), jsonTweet.getString("created_at"), jsonTweet.getString("text"),(int)distance/1000));

                            count++;
                        }

                        Log.d("TRY", "OK");

                    }catch(JSONException e){
                        Log.d("EXCP","NULL");
                    }

                }
                else{
                    break;
                }
            }

        }

        catch(ClientProtocolException e) {
            Log.e(TAG, e.getMessage(), e);
        }
        catch (IOException e ) {
            Log.e(TAG, e.getMessage(), e);
        }
        catch (JSONException e ) {
            Log.e(TAG, e.getMessage(), e);
        }
        return null;

    }

}
} 
```

适配器类：

```
public class TweetListAdapter1 extends BaseAdapter {
Context context;
ArrayList<TweetModel> items;

public TweetListAdapter1(Context context, ArrayList<TweetModel> items) {
    this.context = context;
    this.items = items;
}

public int getCount() {
    return items.size();
}

public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list_item_tweet, parent, false);

    TextView txtMessage = (TextView)rowView.findViewById(R.id.txtMessage);
    TweetModel m = items.get(position);
    txtMessage.setText("Name: " + m.getName()  +"\n"+ "Distance :"+ m.getDistance() +  " Km\n" + "Tweet: " +  m.getTweet() + "\n" + "Date: " + m.getDate() + "\n");

    TextView txtMessage1 = (TextView)rowView.findViewById(R.id.txtMessage1);
    txtMessage1.setText("Ala bala ");
    return rowView;
}

} 
```

我想要做的是打开一个包含两个动作的上下文菜单：Action1 和 Action2 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:56:56.917

> I've been trying to make ContextMenu, that will pop up to at click on a item from the list

So you need to implement it in your `Activity` class.

First you need to override `onCreateContextMenu` and then also override `onContextItemSelected` method

```
@Override
    public void onCreateContextMenu(ContextMenu cMenu, View parent, ContextMenu.ContextMenuInfo info) {
        new MenuInflater(YourActivity.this).inflate(R.menu.conmenu, cMenu);
    }

@Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.option1:
                //do some work
                        break;
                        case R.id.option2:
                               // do some work
                        break;
            }
        ... 
    } 
```

You need to read some tutorial so [`Android: Context menu example`](http://www.stealthcopter.com/blog/2010/04/android-context-menu-example-on-long-press-gridview/) and [`Context Menu | Android Developer Tutorial`](http://saigeethamn.blogspot.cz/2011/05/context-menu-android-developer-tutorial.html)

# macos - NSMatrix 侧面带有阴影按钮

> ID：11403745
> 
> 赞同：0
> 
> 时间：2012-07-09T21:51:08.760
> 
> 标签：macos, cocoa, appkit, nsmatrix, nsbuttoncell

我有一个以一堆 NSButtonCells 作为其内容的 NSMatrix。我想创建一个类似于 Xcode4 导航器区域（[来自 Apple 网站的图像](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/art/new_proj_struct_nav.png)）的效果，其中选定的按钮具有凹陷的感觉，左右两侧都有阴影。

我在许多第三方应用程序的首选项面板中看到了类似的带有较大图标的样式，我想知道是否有一种简单的方法可以实现这种效果。很可能，我不知道正确的术语。

我当然可以自己绘制这些阴影按钮并将其设置为 ButtonCell 的替代图像，我认为苹果附带的标准艺术品非常优雅，并想使用它来代替。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:48:12.027

在大图标的情况下，效果由`NSToolbar`. 不幸的是，工具栏非常有限（例如，它不是普通视图；它只能出现在标准窗口框架中，沿顶部以全宽显示）。“首选项面板”样式很容易创建，但几乎在其他任何地方重新创建都需要您自己做所有事情。

# javascript - 未知数量的 jQuery 动画 的

> ID：11403748
> 
> 赞同：1
> 
> 时间：2012-07-09T21:51:33.577
> 
> 标签：javascript, jquery, html, css

我知道这段代码超级蹩脚，但直到现在它运行良好，所以我保留了它。但是现在我的 <li> 太多了，我不能在 js 中手动添加它们，因为它在 wordpress 上，它取决于类别页面，所以 <li> 的数量每次都在变化。

我的问题是；**如何保留该动画并使其与未定义数量的 < li > 一起工作，而无需手动添加它们？有没有办法在不使用 css overflow-y: hidden 的情况下停止滚动条滚动？！**

这是演示：http: [//jsfiddle.net/NdRDh/](http://jsfiddle.net/NdRDh/)

非常感谢你！希望你能帮我！！

汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:55:03.883

我建议：

```
$(document).ready(
    function() {
        $('li').each(
            function(i) {
                $(this)
                    .delay(400)
                    .animate(
                        {
                            'top' : '10px'
                        }, 1500 + (500*i));
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NdRDh/10/)。

哦，请注意，您`id`对*所有*元素都重复相同的`li`内容：这是无效的 HTML，如：

> `id`=**名称 [CS]**
> 
> > 此属性为元素分配名称。此名称在文档中必须是唯一的。

[（引自：[http](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2) ://www.w3.org/TR/html401/struct/global.html#h-7.5.2 ）]

参考：

*   [`each()`](http://api.jquery.com/each/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:53:44.380

```
$('li').each(function(i) {
      $(this).delay(400).animate({'top': '10px'}, (500*i)+1000);
}); 
```

小提琴示例：http: [//jsfiddle.net/NdRDh/6/](http://jsfiddle.net/NdRDh/6/)

作为旁注，您不能有多个具有相同 id 的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:53:44.840

您可以使用`each()`，如下所示：http: [//jsfiddle.net/Skooljester/NdRDh/1/](http://jsfiddle.net/Skooljester/NdRDh/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T21:54:23.723

你有 id 和 class 交换：给他们 'common' 作为类和他们的类名作为 id，然后你可以选择它们并调用 animate ：

```
 $('li.common').animate(...); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:55:35.077

试试这个：

```
$("li").each(function(index) {
    $(this).delay(400).animate({'top' : '10px'}), 1000 + 500 * index);
}); 
```

# ios - 核心数据 setPrimitive-setter 导致 EXC_BAD_ACCESS

> ID：11403749
> 
> 赞同：3
> 
> 时间：2012-07-09T21:51:39.940
> 
> 标签：ios, core-data, exc-bad-access

当我尝试设置我的变量`eventId`时，我`NSManagedObject (Event)`得到了错误`EXC_BAD_ACCESS`。我不知道原因。

这是我班级的代码`Event`

```
@interface Event : NSManagedObject 

@property (assign)              NSInteger   eventId;

@end

@interface Event (PrimitiveAccessors)
- (NSInteger)primitiveEventId;
- (void)setPrimitiveEventId:(NSInteger)event_id;
@end

@implementation Event
@dynamic eventId;

...

-(NSInteger)eventId
{
    [self willAccessValueForKey:@"eventId"];
    NSInteger id = [self eventId];
    [self didAccessValueForKey:@"eventId"];
    return id;
}

-(void)setEventId:(NSInteger)event_id
{
    [self willChangeValueForKey:@"eventId"];
    [self setPrimitiveEventId:event_id]; //Here I get the error
    [self didChangeValueForKey:@"eventId"];
}

... 
```

任何人都可以解决问题？

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:16:14.710

如果您仔细查看[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html#//apple_ref/doc/uid/TP40001919-SW13)，您会发现示例中标量属性的原始访问器方法`double length`仍然使用`NSNumber *`参数和返回值：

```
@interface MyManagedObject (PrimitiveAccessors)
@property (nonatomic, retain) NSNumber *primitiveLength;
@end 
```

[注意：我添加了`*`Apple 文档中原始代码片段中缺少的内容。]

所以尝试用`NSNumber *`参数和返回值声明你的原始访问器。

或者如果你真的必须，考虑[实现你自己的原始访问器方法](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:25:20.043

解决方案：

```
@interface Event (PrimitiveAccessors)
- (NSNumber *)primitiveEventId;
- (void)setPrimitiveEventId:(NSNumber*)event_id;
@end

-(NSInteger)eventId
{
    [self willAccessValueForKey:@"eventId"];
    NSNumber *id = [self primitiveEventId];
    [self didAccessValueForKey:@"eventId"];
    return [id integerValue];
}

-(void)setEventId:(NSInteger)event_id
{
    [self willChangeValueForKey:@"eventId"];
    [self setPrimitiveEventId:[NSNumber numberWithInteger:event_id]];
    [self didChangeValueForKey:@"eventId"];
} 
```

# asp.net - 远程服务器子域上的 asp.net Web 服务的 Jquery Ajax 方法错误

> ID：11403751
> 
> 赞同：0
> 
> 时间：2012-07-09T21:51:55.357
> 
> 标签：asp.net, ajax, web-services, jquery

我创建了一个项目，它是一个 asp.net 项目，它有一个 Service1.asmx，我把这个项目托管到远程服务器上，就像一个子域 ( **myservice.test.com/Service1.asmx** )，我从一个带有 jquery ajax 方法的 asp.net 应用程序。此应用程序位于同一远程服务器上，当我调用 admin.test.com/Default.aspx（此页面使用 Web 服务 abow）时，我像子域（ **admin.test.com** ）一样托管它用 chrome 控制台查看，它说：* *（Access-Control-Allow-Origin 不允许。）* *4444

```
GET_CAT_ALL: function (userId, callback, callback_err) {
    try {
        $.ajax({
            type: "POST",
            url: myservice.test.com/Service1.asmx + "/GET_CAT_ALL",
            data: "{userId:" + userId + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d == "0" || msg.d.length == 0 || msg.d == null) {
                    if (typeof callback == 'function') {
                        callback(null);
                    }
                }
                else if (msg.d <= 0) {
                    if (typeof callback_err == 'function') {
                        callback_err(msg.d, msg, 'GET_CAT_ALL');
                    }
                }
                else {
                    var _data = eval("(" + msg.d + ")");
                    if (typeof callback_err == 'function' && _data[0] != null && typeof _data[0].ErrorCode != 'undefined') {
                        callback_err(_data, msg, 'GET_CAT_ALL');
                    }
                    else if (typeof callback == 'function') {
                        callback(_data);
                    }
                }
            },
            error: function (msg) {
                if (typeof callback_err == 'function') {
                    callback_err(-1, msg, 'GET_CAT_ALL');
                }
            }
        });
    }
    catch (err) {
        if (typeof callback_err == 'function') {
            callback_err(-2, err, 'GET_CAT_ALL');
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:53:31.463

This means that your subject to the Cross Side restrictions put in place by your browser. Consider using JSONP if you can to try and get around this issue or if you can guarentee your users are using more up to date browsers you could get around it by using headers on your webserver. Have a look at the [mozilla document](https://developer.mozilla.org/en/http_access_control) about it.

# memory - 循环函数的意外内存使用

> ID：11403757
> 
> 赞同：3
> 
> 时间：2012-07-09T21:52:29.503
> 
> 标签：memory, haskell, cycle

在下面的程序中，我只希望`cycle3`以恒定的内存运行（它明确地打结）。然而，`cycle2`由于我无法理解的原因，它也在不断的记忆中运行。我希望做与因为`cycle2`完全相同的工作`cycle1`

```
xs' = xs ++ xs'
xs' = xs ++ xs ++ xs' -- substitute value of xs'
xs' = xs ++ xs ++ xs ++ xs' -- substitute value of xs' again
xs' = xs ++ xs ++ xs ++ ... -- and so on 
```

* * *

有人可以解释我在这里缺少什么吗？

* * *

```
module Main where

import System.Environment (getArgs)

cycle1 :: [a] -> [a]
cycle1 [] = error "empty list"
cycle1 xs = xs ++ cycle1 xs

cycle2 :: [a] -> [a]
cycle2 [] = error "empty list"
cycle2 xs = xs' where xs' = xs ++ xs'

cycle3 :: [a] -> [a]
cycle3 [] = error "empty list"
cycle3 xs = let
  xs' = go xs' xs
  in xs'
  where
    go :: [a] -> [a] -> [a]
    go start [last] = last : start
    go start (x:xs) = x : go start xs

testMem :: (Show a) => ([a] -> [a]) -> [a] -> IO ()
testMem f xs = print (xs', xs') -- prints only first val, need second val holds onto reference
  where
    xs' = f xs

main :: IO ()
main = do
  args <- getArgs
  let mCycleFunc = case args of
        ["1"] -> Just cycle1
        ["2"] -> Just cycle2
        ["3"] -> Just cycle3
        _ -> Nothing
  case mCycleFunc of
    Just cycleFunc -> testMem cycleFunc [0..8]
    Nothing -> putStrLn "Valid args are one of {1, 2, 3}." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:58:13.583

`cycle1`每次消耗一个周期时都会创建一个新列表。原因应该很明显。

`cycle2`，但是，不这样做。它创建一个变量`xs'`，在它自己的定义中使用。每次你消费时`cycle1`都必须重新评估函数，但它没有任何递归函数。它只是引用相同的变量，该变量已经具有已知值。`cycle1``xs``cycle2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:57:08.680

它归结为共享或不共享相等的thunk。两个相等的 thunk 是保证产生相同结果的 thunk。在 的情况下`cycle1`，您`cycle1 xs`每次`[]`在`xs`. 需要为该 thunk 分配新内存，并且需要从头开始计算其值，这会在您遍历它时分配新的列表对。

我认为如果您重命名为（并且我删除了“错误”案例） ，`cycle2`避免这种情况的方法会变得更容易理解：`xs'``result``[]`

```
cycle2 :: [a] -> [a]
cycle2 xs = result 
    where result = xs ++ result 
```

这个定义在语义上等同于`cycle1`（对相同的参数产生相同的结果），但理解内存使用的关键是根据创建的 thunk 来看待它。当您执行此函数的编译代码时，它会立即为`result`. 您可以将 thunk 视为或多或少像这样的可变类型（完全虚构的伪代码）：

```
type Thunk a = union { NotDone (ThunkData a), Done a }
type ThunkData a = struct { force :: t0 -> ... -> tn -> a
                          , subthunk0 :: t0
                          , ...
                          , subthunkn :: tn } 
```

这要么是一条记录，其中包含指向所需值的 thunk 的指针以及指向强制这些 thunk 的代码的指针，或者只是计算的结果。在 的情况下`cycle2`，thunk for`result`指向目标代码 for和`(++)`thunk 。最后一位意味着 thunk for有一个指向自身的指针，这解释了常量空间行为；强制的最后一步是让它指向自身。`xs``result``result``result`

`cycle1`另一方面，在 thunk的情况下，thunk 具有 的代码、用于`(++)`的 thunk`xs`和要从头开始计算的*新thunk。*`cycle1 xs`原则上，编译器可能会认识到对后一个 thunk 的引用可以替换为对“父”块的引用，但编译器不会这样做；而在其中，`cycle2`它不得不这样做（一个变量的一个实例化绑定=一个块）。

请注意，这种自引用 thunk 行为可以分解为以下的合适实现`fix`：

```
-- | Find the least fixed point of @f@.  This implementation should produce
-- self-referential thunks, and thus run in constant space.
fix :: (a -> a) -> a
fix f = result
    where result = f result

cycle4 :: [a] -> [a]
cycle4 xs = fix (xs++) 
```

# php - Zend_Service_Amazon_S3 createBucket signature calculated does not match

> ID：11403758
> 
> 赞同：1
> 
> 时间：2012-07-09T21:52:32.707
> 
> 标签：php, zend-framework, amazon-s3

When trying to createBucket or createObject

I get the following response:

```
object(Zend_Http_Response)#13 (5) {
["version":protected] => string(3) "1.1"
["code":protected] => int(403)
["message":protected] => string(9) "Forbidden"
["headers":protected] => array(6) {
["X-amz-request-id"] => string(16) "XXX"
["X-amz-id-2"] => string(64) "XXX"
["Content-type"] => string(15) "application/xml"
["Transfer-encoding"] => string(7) "chunked"
["Date"] => string(29) "Mon, 09 Jul 2012 21:45:45 GMT"
["Server"] => string(8) "AmazonS3"
}
["body":protected] => string(875) "35f
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated   does not match the signature you provided. Check your key and signing method.</Message><StringToSignBytes>50 55 54 0a 0a 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 2d 77 77 77 2d 66 6f 72 6d 2d 75 72 6c 65 6e 63 6f 64 65 64 0a 4d 6f 6e 2c 20 30 39 20 4a 75 6c 20 32 30 31 32 20 32 31 3a 34 35 3a 34 35 20 2b 30 30 30 30 0a 2f 65 64 75 70 72 6f 74 6f 6e 64 62 2f</StringToSignBytes><RequestId>XXXX</RequestId><HostId>XXX</HostId><SignatureProvided>XXX</SignatureProvided><StringToSign>PUT

application/x-www-form-urlencoded
Mon, 09 Jul 2012 21:45:45 +0000 
/eduprotondb/</StringToSign><AWSAccessKeyId>XXXAWSAccessKeyId></Error>
0
"
} 
```

I am not really sure what I am doing wrong since getBuckets, deleteBuckets works just fine?

```
$s3 = new Zend_Service_Amazon_S3($access_key, $secret_key, $region);
$s3->createBucket('eduprotondb'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-02T21:43:21.733

添加您正在使用的亚马逊 S3 区域作为函数中的“位置”参数。我只是有同样的问题，这解决了它！

```
$s3->createBucket($bucket, "us-west-1"); 
```

# xml - xslt 按每个属性分组

> ID：11403760
> 
> 赞同：3
> 
> 时间：2012-07-09T21:52:42.133
> 
> 标签：xml, xslt, composite-key, xslt-grouping

我有多种类型的 xml 消息，我需要通过将多个节点分组到同一个父节点下来“压缩”（相同的父节点意味着它们共享相同的节点名称，并且声明的每个属性也是相等的）。例如：

```
<TopLevel CodeTL="Something">
    <Ratings>
          <Rating CodeA="ABC" Start="1-1-2012" End="1-2-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
          </Rating>
    </Ratings>
</TopLevel>
    <TopLevel CodeTL="Something">
    <Ratings>
          <Rating CodeA="ABC" Start="1-2-2012" End="1-3-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
          </Rating>
    </Ratings>
</TopLevel>
<TopLevel CodeTL="Something">
    <Ratings>
          <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
          </Rating>
    </Ratings>
</TopLevel>
<TopLevel CodeTL="Something">
    <Ratings>
          <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
              <RatingByNumber Code="X" Rating="30" Number="3">
              <RatingByNumber Code="X" Rating="39" Number="4">
          </Rating>
    </Ratings>
</TopLevel> 
```

请注意它们如何共享相同的 CodeTL 属性，最后 2 个共享相同的 CodeA、Start 和 End 属性，所以我需要使用 xslt 生成以下输出

```
<TopLevel CodeTL="Something">
    <Ratings>
          <Rating CodeA="ABC" Start="1-1-2012" End="1-2-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
          </Rating>
          <Rating CodeA="ABC" Start="1-2-2012" End="1-3-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
          </Rating>
          <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
              <RatingByNumber Code="X" Rating="10" Number="1">
              <RatingByNumber Code="X" Rating="19" Number="2">
              <RatingByNumber Code="X" Rating="30" Number="3">
              <RatingByNumber Code="X" Rating="39" Number="4">
          </Rating>
    </Ratings>
</TopLevel> 
```

这更清洁，并且根据使用它的应用程序，它可能会节省处理时间并节省空间。

我遇到的问题是我有不同类型的 xml 消息，它们具有不同的节点名称和属性（以及属性数量），但它们都共享我在这里展示的相同结构。这将是一种很好的通用方式来处理所有这些，但我会感谢 XSLT 来转换我提供的示例，这样我就可以为我需要发送的每条 xml 消息创建自定义代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:42:35.073

这个 XSLT 1.0 样式表产生了期望的结果：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:key name="byCodeTL" match="TopLevel" use="@CodeTL"/>
    <xsl:key name="byAttrs" match="Rating" 
             use="concat(../../@CodeTL, '|', @CodeA, '|', @Start, '|', @End)"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="TopLevel[generate-id()=
                                  generate-id(key('byCodeTL', @CodeTL)[1])]">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <Ratings>
                <xsl:apply-templates 
                        select="key('byCodeTL', @CodeTL)/Ratings/*"/>
            </Ratings>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="Rating[generate-id()=
                                generate-id(key('byAttrs', 
            concat(../../@CodeTL, '|', @CodeA, '|', @Start, '|', @End))[1])]">
        <xsl:copy>
            <xsl:apply-templates select="@*|key('byAttrs', 
                concat(../../@CodeTL, '|', @CodeA, '|', @Start, '|', @End))/*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="TopLevel"/>
    <xsl:template match="Rating"/>
</xsl:stylesheet> 
```

所有`TopLevel`元素都按其`CodeTL`属性分组。所有元素都按其属性及其对应`Rating`的属性的组合进行分组。`CodeTL``TopLevel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:02:24.213

**这个通用的 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:my="my:my" exclude-result-prefixes="xs my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     <t>
       <xsl:sequence select="my:grouping(*)"/>
     </t>
 </xsl:template>

 <xsl:function name="my:grouping" as="node()*">
   <xsl:param name="pElems" as="element()*"/>

   <xsl:if test="$pElems">
       <xsl:for-each-group select="$pElems" group-by="my:signature(.)">
         <xsl:copy>
          <xsl:copy-of select="@*"/>

            <xsl:sequence select="my:grouping(current-group()/*)"/>
         </xsl:copy>
       </xsl:for-each-group>
   </xsl:if>
 </xsl:function>

 <xsl:function name="my:signature" as="xs:string">
  <xsl:param name="pElem" as="element()"/>

  <xsl:variable name="vsignAttribs" as="xs:string*">
      <xsl:for-each select="$pElem/@*">
       <xsl:sort select="name()"/>

       <xsl:value-of select="concat(name(), '=', .,'|')"/>
      </xsl:for-each>
  </xsl:variable>

  <xsl:sequence select=
  "concat(name($pElem), '|', string-join($vsignAttribs, ''))"/>
 </xsl:function>
</xsl:stylesheet> 
```

**当应用于提供的 XML 时**（包装到单个顶部元素中以成为格式良好的 XML 文档）：

```
<t>
    <TopLevel CodeTL="Something">
        <Ratings>
              <Rating CodeA="ABC" Start="1-1-2012" End="1-2-2012">
                  <RatingByNumber Code="X" Rating="10" Number="1"/>
                  <RatingByNumber Code="X" Rating="19" Number="2"/>
              </Rating>
        </Ratings>
    </TopLevel>
        <TopLevel CodeTL="Something">
        <Ratings>
              <Rating CodeA="ABC" Start="1-2-2012" End="1-3-2012">
                  <RatingByNumber Code="X" Rating="10" Number="1"/>
                  <RatingByNumber Code="X" Rating="19" Number="2"/>
              </Rating>
        </Ratings>
    </TopLevel>
    <TopLevel CodeTL="Something">
        <Ratings>
              <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
                  <RatingByNumber Code="X" Rating="10" Number="1"/>
                  <RatingByNumber Code="X" Rating="19" Number="2"/>
              </Rating>
        </Ratings>
    </TopLevel>
    <TopLevel CodeTL="Something">
        <Ratings>
              <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
                  <RatingByNumber Code="X" Rating="30" Number="3"/>
                  <RatingByNumber Code="X" Rating="39" Number="4"/>
              </Rating>
        </Ratings>
    </TopLevel>
</t> 
```

**产生想要的正确结果**：

```
<t>
   <TopLevel CodeTL="Something">
      <Ratings>
         <Rating CodeA="ABC" Start="1-1-2012" End="1-2-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
         </Rating>
         <Rating CodeA="ABC" Start="1-2-2012" End="1-3-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
         </Rating>
         <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
            <RatingByNumber Code="X" Rating="30" Number="3"/>
            <RatingByNumber Code="X" Rating="39" Number="4"/>
         </Rating>
      </Ratings>
   </TopLevel>
</t> 
```

**说明**：

1.  执行的分组在函数中实现`my:grouping()`并且是递归的。

2.  顶部元素在其级别上是单一的，除了自身的浅拷贝之外不需要任何其他分组。然后在这个浅拷贝的主体内部，较低级别的分组由函数执行`my:grouping()`。

3.  该函数`my:grouping()`有一个参数，它是上一级组中所有元素的所有子元素。它返回当前级别的所有组。

4.  作为参数传递给函数的元素序列根据它们的*签名*进行分组——元素名称与其属性的所有名称-值对及其对应值的串联，并使用适当的分隔符将它们分开。元素的签名由函数生成`my:signature()`。

* * *

**二、通用 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
         xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
         xmlns:ext="http://exslt.org/common"
         xmlns:my="my:my" exclude-result-prefixes="my ext">
         <xsl:output omit-xml-declaration="yes" indent="yes"/>
         <xsl:strip-space elements="*"/>

         <xsl:variable name="vrtfPass1">
          <xsl:apply-templates select="/*"/>
         </xsl:variable>

         <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)"/>

         <xsl:template match="/">
          <xsl:apply-templates select="$vPass1/*" mode="pass2"/>
         </xsl:template>

         <xsl:template match="/*" mode="pass2">
             <xsl:copy>
               <xsl:call-template name="my:grouping">
                <xsl:with-param name="pElems" select="*"/>
               </xsl:call-template>
             </xsl:copy>
         </xsl:template>

         <xsl:template name="my:grouping">
           <xsl:param name="pElems" select="/.."/>

           <xsl:if test="$pElems">
             <xsl:for-each select="$pElems">
              <xsl:variable name="vPos" select="position()"/>

              <xsl:if test=
               "not(current()/@my:sign
                   = $pElems[not(position() >= $vPos)]/@my:sign
                   )">

                 <xsl:element name="{name()}">
                  <xsl:copy-of select="namespace::*[not(. = 'my:my')]"/>
                  <xsl:copy-of select="@*[not(name()='my:sign')]"/>
                   <xsl:call-template name="my:grouping">
                    <xsl:with-param name="pElems" select=
                    "$pElems[@my:sign = current()/@my:sign]/*"/>
                   </xsl:call-template>
                 </xsl:element>
               </xsl:if>

             </xsl:for-each>
           </xsl:if>
         </xsl:template>

     <xsl:template match="/*">
             <xsl:copy>
               <xsl:apply-templates/>
             </xsl:copy>
     </xsl:template>

     <xsl:template match="*/*">
      <xsl:variable name="vSignature">
       <xsl:call-template name="signature"/>
      </xsl:variable>
      <xsl:copy>
       <xsl:copy-of select="@*"/>
       <xsl:attribute name="my:sign">
        <xsl:value-of select="$vSignature"/>
       </xsl:attribute>

       <xsl:apply-templates/>
      </xsl:copy>
     </xsl:template>

     <xsl:template name="signature">
       <xsl:variable name="vsignAttribs">
         <xsl:for-each select="@*">
          <xsl:sort select="name()"/>

                <xsl:value-of select="concat(name(), '=', .,'|')"/>
             </xsl:for-each>
        </xsl:variable>

        <xsl:value-of select=
          "concat(name(), '|', $vsignAttribs)"/>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，再次产生相同的正确结果**：

```
<t>
   <TopLevel>
      <Ratings>
         <Rating CodeA="ABC" Start="1-1-2012" End="1-2-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
         </Rating>
         <Rating CodeA="ABC" Start="1-2-2012" End="1-3-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
         </Rating>
         <Rating CodeA="XYZ" Start="1-2-2012" End="1-3-2012">
            <RatingByNumber Code="X" Rating="10" Number="1"/>
            <RatingByNumber Code="X" Rating="19" Number="2"/>
            <RatingByNumber Code="X" Rating="30" Number="3"/>
            <RatingByNumber Code="X" Rating="39" Number="4"/>
         </Rating>
      </Ratings>
   </TopLevel>
</t> 
```

**说明**：

1.  这是一个两遍转换。

2.  在每个元素的第一遍中，计算一个签名，它成为一个新属性的值`my:sign`。

3.  使用与 XSLT 2.0 解决方案相同的递归分组算法。

# httpwebrequest - Configuring Request Headers in BITS (Microsoft Background Intelligent Transfer Service) in C#

> ID：11403764
> 
> 赞同：3
> 
> 时间：2012-07-09T21:53:01.377
> 
> 标签：httpwebrequest, http-headers, microsoft-bits

I am trying to download a file through BITS and the job is failing ( giving me a error) as i failed to mention "referer" in http header in the GET request.

```
 BitsManager manager = new BitsManager();           
        manager.EnumJobs(JobOwner.CurrentUser);
        BitsJob newJob = manager.CreateJob(j.filename, JobType.Download);
        j.jobID = newJob.JobId;

        newJob.AddFile(j.serverLink, "C:\\Downloads\\" + j.filename);
        newJob.Priority = JobPriority.ForeGround;
        newJob.MinimumRetryDelay = 60;
        manager.OnJobTransferred += new EventHandler<NotificationEventArgs>(manager_OnJobTransferred);
        manager.OnJobModified += new EventHandler<NotificationEventArgs>(manager_OnJobModified);
        newJob.Resume(); 
```

Is there a way to *configure the header* for the GET request for the jobs ?

Thanks a ton,

Sunny

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-09T01:49:15.540

BITS 允许您在请求上设置自定义标头。

Microsoft 的 BITS 团队现在有一个关于[使用参考 DLL 从 .NET 和 C#](https://docs.microsoft.com/en-us/windows/desktop/Bits/bits-dot-net)调用 BITS以及 GitHub 上的完整示例调用[BITS Manager的页面。](https://github.com/Microsoft/BITS-Manager)

我刚刚尝试对示例进行自定义修改。在 setJobPropertyControl.xaml.cs 中，我将作业转换为 IBackgroundCopyJobHttpOptions，如下所示：

```
var jobHttpOptions = job as BITS4.IBackgroundCopyJobHttpOptions; 
```

我也必须做

```
using BITS4 = BITSReference4_0; 
```

那我可以

```
jobHttpOptions.SetCustomHeaders (text); 
```

其中 text 是您需要设置的标题。您可以通过连接一个大字符串来设置多个标题（“referer: [http://www.example.com](http://www.example.com) \r\nx-other-header: another header\r\n”）。请注意，HTTP 标头必须用 \r\n! 分隔！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:57:23.827

在我看来，您的 HTTP 服务器可能与 BITS 的 HTTP 要求不兼容

> ## BITS 下载的 HTTP 要求
> 
> BITS 支持 HTTP 和 HTTPS 下载和上传，要求服务器支持 HTTP/1.1 协议。对于下载，HTTP 服务器的 Head 方法必须返回文件大小，并且它的 Get 方法必须支持 Content-Range 和 Content-Length 标头。因此，除非 ASP、ISAPI 或 CGI 脚本支持 Content-Range 和 Content-Length 标头，否则 BITS 仅传输静态文件内容并在您尝试传输动态内容时生成错误。
> 
> 只要满足 Head 和 Get 方法要求，BITS 就可以使用 HTTP/1.0 服务器。
> 
> 为了支持文件的下载范围，服务器必须支持以下要求：
> 
> *   允许 MIME 标头包含标准的 Content-Range 和 Content-Type 标头，以及最多 180 字节的其他标头。
>     
>     
> *   在 HTTPheaders 和第一个边界字符串之间最多允许两个 CR/LF。

有关更多信息，请查看[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362846%28v=vs.85%29.aspx)

# mysql - 选择不使用索引的查询变量

> ID：11403768
> 
> 赞同：7
> 
> 时间：2012-07-09T21:53:21.467
> 
> 标签：mysql, indexing, hierarchical-data, adjacency-list, query-variables

我正在玩（出于兴趣）在一个简单的邻接列表中检索节点树，并使用局部变量进行递归查询。

到目前为止我的解决方案很有趣，但我想知道（这是我唯一的问题）为什么 MySQL 拒绝使用 any`INDEX`来优化这个查询。MySQL不应该能够通过使用查找最近的孩子`INDEX`吗？

我很好奇为什么 MySQL 没有。即使我使用`FORCE INDEX`执行计划也不会改变。

这是到目前为止的查询，`5`是父节点的 ID：

```
SELECT 
  @last_id := id AS id,
  parent_id,
  name,
  @depth := IF(parent_id = 5, 1, @depth + 1) AS depth
FROM 
  tree FORCE INDEX (index_parent_id, PRIMARY, index_both),
  (SELECT @last_id := 5, @depth := -1) vars
WHERE id = 5 OR parent_id = @last_id OR parent_id = 5 
```

> [在 SQLfiddle 尝试实时示例](http://sqlfiddle.com/#!2/73b4b/2)

请注意，原因不能是小数据集，因为当我指定`FORCE INDEX (id)`or`FORCE INDEX (parent_id)`或`FORCE INDEX (id, parent_id)`...时行为不会改变

文档说：

> 您还可以使用 FORCE INDEX，它的作用类似于 USE INDEX (index_list)，但另外假设表扫描非常昂贵。换句话说，仅当无法使用给定索引之一来查找表中的行时，才使用表扫描。

一定有一些东西使查询无法使用索引，但我不明白它是什么。

* * *

**免责声明：**我知道在 SQL 中存储和检索分层数据有不同的方法。我知道嵌套集模型。我不是在寻找替代实现。我不是在寻找嵌套集。

*我也知道查询本身很疯狂并且会产生错误的结果。*

**我只想（详细）了解为什么 MySQL`INDEX`在这种情况下不使用 an 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:50:22.753

原因在于在**WHERE**子句中使用了**OR**条件。

 **为了说明，再次尝试运行查询，这次只使用`id = 5`条件，并获取（EXPLAIN 输出）：

```
+----+-------------+------------+--------+--------------------+---------+---------+-------+------+----------------+
| id | select_type | table      | type   | possible_keys      | key     | key_len | ref   | rows | Extra          |
+----+-------------+------------+--------+--------------------+---------+---------+-------+------+----------------+
|  1 | PRIMARY     | <derived2> | system | NULL               | NULL    | NULL    | NULL  |    1 |                |
|  1 | PRIMARY     | tree       | const  | PRIMARY,index_both | PRIMARY | 4       | const |    1 |                |
|  2 | DERIVED     | NULL       | NULL   | NULL               | NULL    | NULL    | NULL  | NULL | No tables used |
+----+-------------+------------+--------+--------------------+---------+---------+-------+------+----------------+ 
```

再一次，这一次只有`parent_id = @last_id OR parent_id = 5`条件，并得到：

```
+----+-------------+------------+--------+-----------------+------+---------+------+------+----------------+
| id | select_type | table      | type   | possible_keys   | key  | key_len | ref  | rows | Extra          |
+----+-------------+------------+--------+-----------------+------+---------+------+------+----------------+
|  1 | PRIMARY     | <derived2> | system | NULL            | NULL | NULL    | NULL |    1 |                |
|  1 | PRIMARY     | tree       | ALL    | index_parent_id | NULL | NULL    | NULL |   10 | Using where    |
|  2 | DERIVED     | NULL       | NULL   | NULL            | NULL | NULL    | NULL | NULL | No tables used |
+----+-------------+------------+--------+-----------------+------+---------+------+------+----------------+ 
```

MySQL 不太擅长在同一个查询中处理多个索引。使用 AND 条件会稍微好一些；一个人更有可能看到[index_merge](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html#jointype_index_merge)优化而不是[索引联合](http://dev.mysql.com/doc/refman/5.1/en/index-merge-optimization.html#index-merge-union)优化。

随着版本的进步，情况正在改善，但我已经测试了您对 version 的查询`5.5`，这是当前最新的生产版本，结果如​​您所描述的那样。

要解释为什么这很困难，请考虑：两个不同的索引将回答两个不同的查询条件。一个会回答`id = 5`，另一个回答（顺便说一句，后者内部的**OR**`parent_id = @last_id OR parent_id = 5`没有问题，因为这两个术语都是在同一个索引中处理的）。

 **没有一个索引可以同时回答这两个问题，因此该`FORCE INDEX`指令被忽略。看，`FORCE INDEX`MySQL 必须在表扫描上使用索引*。*这并不意味着它必须在一次表扫描中使用多个索引。

所以 MySQL 遵循这里的文档规则。但为什么这么复杂？因为要使用两个索引来回答，MySQL 必须从两者收集结果，将一个存储在某个临时缓冲区中，同时管理第二个。然后必须遍历该缓冲区以过滤掉相同的行（某些行可能适合所有条件）。然后扫描该缓冲区以返回结果。

但是等等，那个缓冲区本身没有被索引。过滤重复项并不是一项显而易见的任务。所以 MySQL 更喜欢在原始表上工作并在那里进行扫描，并避免所有这些混乱。

当然这是可以解决的。Oracle 的工程师可能还在改进这一点（最近他们一直在努力改进查询执行计划），但我不知道这是否在 TODO 任务上，或者它是否具有高优先级。****

# java - Is there an alternative syntax (or scripting language) to simplify Maven pom files?

> ID：11403774
> 
> 赞同：2
> 
> 时间：2012-07-09T21:53:34.777
> 
> 标签：java, maven, maven-2, maven-3

Our repository has several projects which have very large pom.xml files with many dependencies and plugin configurations in each.

Does there exist any way of specifying our pom.xml outside of the standard xml on the Maven website?

The closest solution I know of is to abuse inheritance and separate dependencies and plugin configuration into parent projects, but this can only take us so far.

When the pom file splitting for Maven 3 is [released](https://stackoverflow.com/questions/2271082/is-it-possible-to-split-maven-pom-files) it will relieve some of the pain, but my preferred solution would be a scripting language which could do the following:

*   specify dependencies as a single line instead of 5/6,
*   allow for simple reuse of plugin configurations between projects, and
*   be easily usable by new developers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:26:48.920

pom继承不是唯一的方法。您是否已经尝试使用像“材料清单”（BOM）这样的 POM 并且他们使用范围导入来导入它？

[您可以在此页面](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)`Importing Dependencies`的部分中找到有关此的更多信息。它将允许在项目之间简单地重用插件配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:42:22.567

我发现简化 pom 文件的最简单方法之一是将编译阶段与部署阶段分开，而不是使用大量配置文件。

换句话说，您有一个项目可以以最简单的方式*编译*每个模块。*使用默认名称*生成 jar 或 war 文件！

然后，您为每个单独的“部署”（即部署到测试服务器）创建了一个项目，其中包含所有各种配置片段。然后“mvn clean package”重新部署。

# google-analytics - Google Analytics Content Experiments A/B 测试服务器端代码，无需刷新页面

> ID：11403778
> 
> 赞同：4
> 
> 时间：2012-07-09T21:53:47.390
> 
> 标签：google-analytics, google-website-optimizer, ab-testing

基本上，我们想要 A/B 测试 2 个不同的页面布局标题。存在一些结构差异（不仅仅是切换 CSS）。我们也不想等待谷歌掷硬币来确定访问者应该看到哪个变体；相反，我们希望选择服务器端的变体并避免页面重定向。

下面的代码符合我的预期；如果我没有从 head 标签中省略它，它生成的 UTMX cookie 看起来与 Google 提供的 javascript 生成的 cookie 相同。

服务器端 PHP 代码：

```
public function setUtmxCookie($cookieName, $experimentsString)
{
    $domainHash = $this->getDomainHash($_SERVER['SERVER_NAME']);
    $cookieVal = $domainHash . $experimentsString;
    $expire = time() + 60 * 60 * 24 * 30;
    $domain = '.' . $_SERVER['SERVER_NAME'];
    setrawcookie($cookieName, $cookieVal, $expire, '/', $domain);
}

private function getExperimentsFromUtmxCookie($cookieName)
{
    if (isset($_COOKIE[$cookieName])) {
        $cookieVal = $_COOKIE[$cookieName];
        $experimentsArray = array();
        $experimentMatches = preg_split('/\./', $cookieVal);
        $domainHash = array_shift($experimentMatches); //remove the first item.  All that will remain in $experimentMatches is an array of experimentIds with their combos.
        foreach ($experimentMatches as $m) {
            $segments = preg_split('/:/', $m);
            $experimentsArray[$segments[0]] = $segments[1];
        }
        return $experimentsArray;
    }
    return array();
}

private function getExperimentsString($cookieName, $experimentId, $variation)
{
    $experiments = $this->getExperimentsFromUtmxCookie($cookieName);
    $experiments[$experimentId] = $variation;
    $experimentsString = '';
    foreach ($experiments as $key => $val) {
        $experimentsString .= '.' . $key . ':' . $val;
    }
    return $experimentsString;
} 
```

那么，为什么我的 Google Analytics（分析）内容实验仪表板没有显示我的实验的任何访问者？我是否不完美地设置了 utmx cookie？除了设置 UTMX cookie，GACE 是否还在寻找其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:26:45.070

在过去的几个月里，我们一直在使用一种完全不同的方法：亚马逊负载均衡器 (AWS ELB) 加上谷歌分析（不是内容实验）。（见我上面的评论。）正如我们所希望的，它极大地改善了我们合并回主干的体验。

```
_gaq.push(['_setCustomVar', 2, varName, varValue, 2]);//https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables
_gaq.push(['_trackPageview']);//This must come AFTER the setCustomVar
//varName should be whatever you want to call the experiment
//varValue should be something like "original" for the original and "variation" for the variation.  We just use "trunk" and [name of variation branch]. 
```

明显的缺点是谷歌没有为我们做数学计算（告诉我们变化是否在统计上显着优于原始版本）并且我们不能轻松地一次运行多个实验。我们也不能有很多变化（我们需要添加比我们想要的更多的负载平衡实例）。

但是出于我们的目的（例如，考虑到不刷新页面对我们的重要性），它比其他方法效果更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:22:14.797

@danmaz74 在客户端也仅使用 Google Analytics 采取了一种有趣的方法：

[https://github.com/danmaz74/ABalytics](https://github.com/danmaz74/ABalytics)

# ruby-on-rails - 除了正常路由外，在“/api”内挂载资源

> ID：11403791
> 
> 赞同：0
> 
> 时间：2012-07-09T21:55:09.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望能够在他们的“自然”路线和“/api”内安装我们所有的资源。有没有一种简单的方法可以用 Rails 路线做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:21:46.923

创建一些文件`config/routes/api_routes.rb`，并为它们的“自然”和“ `/api`”状态放置您想要的路线。然后将文件加载到您的文件`config/routes.rb`中，一次直接加载到块中，一次加载到`namespace`块中*（假设您`Api`是命名空间的）*。

```
Your::Application.routes.draw do
  load 'routes/api_routes.rb'

  namespace :api do
    load 'routes/api_routes.rb'
  end

  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:09:26.123

我最终得到`unitialized constant Api::SomeControllerClass`了与上述解决方案类似的错误。

通过执行以下操作，我能够使其正常工作

```
Rails.application.routes.draw do
  def api_enabled_routes
    resources :foo do
      resources :bar
    end
    <etc>
  end

  api_enabled_routes

  scope '/api' do
    api_enabled_routes
  end
end 
```

# ios - iOS 开发框架的基准测试

> ID：11403792
> 
> 赞同：0
> 
> 时间：2012-07-09T21:55:14.853
> 
> 标签：ios, performance, cocoa, jquery-mobile, sencha-touch

Cocoa、JQuery Mobile、Sencha Touch、钛等是否有基准？我们能看到它们之间的真正区别吗？

你认为速度是框架的限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:43:55.847

撇开在性能方面处于明显劣势的基于浏览器的框架不谈，iOS 原生代码框架的性能可能与用 CocoaTouch 编写的相同应用程序非常相似（当然它可能会有所不同，特别是如果框架提供了一些有用的-但您使用的功能很慢）。

我是 MonoTouch 的忠实粉丝，并且强烈地感觉到它允许我使用现代编程语言跨平台进行编程，而不会在性能或功能方面付出任何重大代价。

# php - push notification provider built in php

> ID：11403795
> 
> 赞同：1
> 
> 时间：2012-07-09T21:55:21.080
> 
> 标签：php, iphone, mysql, ios, push-notification

I downloaded a php code from internet for apple push notification at the beginning it is work when I assigned the device token value to the variable direct but when I edited this php code to take the device token value from database MYSQL it did not work :

```
<?php
// Put your private key's passphrase here:
$passphrase = '123456';

// Put your alert message here:
$message = 'hi push message';

 ////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.sandbox.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS</br>' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

////////////////////////////////////////////////////////////////////////
//make global array
$x = array();

function selectfromdb(){
    $con = mysql_connect("localhost","root","root");
    mysql_select_db("my_db", $con);
 mysql_query("set character_set_server='utf8'");
 mysql_query("set names 'utf8'");
 $result = mysql_query("SELECT idip FROM iphoneid");
$c = 0;
while($r = mysql_fetch_array($result))
{
$x[$c] = $r['idip'];
$c++;
}
}
///////////////////////////////////////////////////////////////////////
selectfromdb();
$i = 0;
while ($i < sizeof($x)){
// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*',$x[$i]) . pack('n', strlen($payload)) .$payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered</br>' . PHP_EOL;
else
echo 'Message successfully delivered</br>' . PHP_EOL;

$i++;
}
echo 'end</br>';

// Close the connection to the server
fclose($fp);
?> 
```

output : Connected to APNS end

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:59:31.253

看起来你需要添加

`global $x;`到您的顶部 selectfromdb 函数。不过，让它返回一个值可能会更好。

```
function selectfromdb(){
    $x = array();
    $con = mysql_connect("localhost","root","root");
    mysql_select_db("my_db", $con);
    mysql_query("set character_set_server='utf8'");
    mysql_query("set names 'utf8'");
    $result = mysql_query("SELECT idip FROM iphoneid");
    $c = 0;
    while($r = mysql_fetch_array($result))
    {
        $x[$c] = $r['idip'];
        $c++;
    }
    return $x;
} 
```

# c - 无内存重复的可内联常量 C 数组

> ID：11403800
> 
> 赞同：13
> 
> 时间：2012-07-09T21:55:54.793
> 
> 标签：c, arrays, linker, constants

我想声明一个可以从多个 C 文件访问的常量数组，其内容可以由编译器内联，而无需在多个编译单元中复制内存。性能在我的应用程序中至关重要。

图表 1：

```
header.h:
static const int arr[2] = { 1, 2 };

file1.c:
#include "header.h"
void file1() { printf("%d\n", arr[0]); }

file2.c:
#include "header.h"
int file2() { for (int i = 0; i < 2; i++) printf("%d\n", arr[i]); } 
```

在这种情况下，编译器可以在 file1中替换`arr[0]`为。`1`但是，由于`arr`被声明`static const`，它的内存在两个 C 文件中都是重复的。AFAIK C 标准要求两个文件中的数组地址不同。我已经通过打印地址在 Linux 下验证了这一点。`-fmerge-all-constants`即使在 gcc 中也不会发生链接器合并。

图表 2：

```
header.h:
extern const int arr[2];

file1.c:
#include "header.h"
void file1() { printf("%d\n", arr[0]); }

file2.c:
#include "header.h"
const int arr[2] = { 1, 2 };
int file2() { for (int i = 0; i < 2; i++) printf("%d\n", arr[i]); } 
```

在这种情况下，不会发生内存重复，但`arr[0]`不会内联。

我认为 C 标准定义的可见性范围是有缺陷的。因此，我可以接受在 Linux/gcc 下违反 C 标准的工作解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:13:26.430

不幸的是，在“经典”C（参考 C89/90）中没有标准的方法来实现这一点。在 C89/90 中，只要您坚持使用数组，您就只能使用您描述的两种方法，各有优缺点。

在 C99 中情况会更好。在 C99 中，您可以使用所谓的*复合文字*，即只需`arr`在头文件中定义为宏

```
#define arr ((const int []) { 1, 2 }) 
```

然后希望编译器将“内联”数组。类型的复合文字`const`与字符串文字的处理方式相同：编译器可以将程序中不同出现的相同文字合并到实际对象的一个​​实例中（如果编译器没有内联它）。

AFAIK，GCC 编译器即使在非 C99 模式下也支持复合文字作为扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T22:40:37.477

我认为你的分析有些错误。当您打印 的地址时`arr`，您**强制**编译器保留两份副本。如果您不这样做，GCC 将消除这两个副本。

确定链接器已消除和未消除什么的更好方法是查看输出文件中的实际对象。在 Linux 下，`nm`程序会告诉你这一点。

如果我用 'gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1' 编译你的代码（图表 1）：

```
gcc -std=c99 -g3 -O6 -fmerge-all-constants file1.c file2.c main.c 
```

然后我用`nm -a a.out | grep '\<arr\>'`它在符号表中查找它：

```
$ nm -a a.out|grep '\<arr\>'|wc -l
0 
```

事实上，如果你试图在 中找到它`gdb`，你什么也找不到：

```
(gdb) b file1
Breakpoint 1 at 0x400540: file /usr/include/x86_64-linux-gnu/bits/stdio2.h, line 105.
(gdb) r
Starting program: a.out 
Breakpoint 1, file1 () at file1.c:5
5   void file1() { printf("%d\n", arr[0]); }
(gdb) print arr
$1 = <optimized out> 
```

编译器已经完全优化了它。

如果我添加`printf("%p\n",arr);`到 and 的开头`file1()`并`file2()`以相同的方式编译它，则`nm -a a.out|grep '\<arr\>'`返回两个对 的引用`arr`：

```
$ nm -a a.out|grep '\<arr\>'|wc -l
2
$ nm -a a.out|grep '\<arr\>'
00000000004006c8 r arr
00000000004006d0 r arr 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T22:17:32.023

您可以尝试的一件事：

```
const int arr[2] __attribute__((weak)) = { 1, 2 }; 
```

现在该数组仍然存在于每个 *.o 对象中，但是当这些对象在程序中链接在一起时，GNU`ld`会将它们缩减为仅一个公共数据块。

如果您还没有这样的东西，您可能需要一些常见的头文件：

```
#ifndef __GNUC__
#define __attribute__(x)
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:18:33.053

使用`selectany` [variable 属性](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)并为您的数组提供外部链接（即不要声明它们`static`）。这会将数组值保留在标头中，以便可以正确内联，并且该`selectany`属性将告诉链接器任意选择一个定义作为真实定义并丢弃其他定义（因为它们都是相同的，没关系）。

例如：

```
const int arr[] __attribute__((selectany)) = {1, 2}; 
```

* * *

**编辑**：这显然只适用于 Windows 目标；该`weak`属性在我对 Cygwin 的 GCC 进行的快速测试中不起作用，因为它在结果数据段中生成了数组的多个副本。

# java - Android XML-RPC 错误

> ID：11403803
> 
> 赞同：0
> 
> 时间：2012-07-09T21:56:05.263
> 
> 标签：java, android, xml-rpc

我正在尝试使用此库[https://github.com/timroes/aXMLRPC从 Android(http://foxrate.org/) 调用此 XML-RPC 方法](https://github.com/timroes/aXMLRPC)

调用代码为：

```
 XMLRPCClient client = new XMLRPCClient(new URL("http://www.foxrate.org/rpc/"));
    try {
        Object o = client.call("foxrate.currencyConvert", "USD","GBP",(double)1);
    } catch (XMLRPCException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

它生成正确的 XML 调用，但服务器返回 Http 错误代码 301。当我尝试使用 POSTER 插件从 firefox 执行此调用时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:26:43.370

HTTP 301 状态码表示服务器想要转发到另一个 URL。

在这种情况下，它想要删除“www”并重定向到 foxrate.org/rpc。

如果您希望 aXMLRPC 客户端遵循此重定向（在默认模式下不这样做），请使用[`FLAGS_FORWARD`flag](https://github.com/timroes/aXMLRPC#flags_forward)。代码的第一行应如下所示：

```
XMLRPCClient client = new XMLRPCClient(new URL("http://www.foxrate.org/rpc/"), FLAGS_FORWARD); 
```

[您会在文档](https://github.com/timroes/aXMLRPC/blob/master/README.md)中找到更多标志——如果发生其他情况（如无效的 SSL 证书；））。

当然，您也可以直接使用[http://foxrate.org/rpc](http://foxrate.org/rpc)作为 URL，但这太简单了 :) （他们可能会稍后将其更改为其他重定向。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:32:27.003

使用这个[http://code.google.com/p/android-xmlrpc/](http://code.google.com/p/android-xmlrpc/)

它非常好，对我来说效果很好。

# jquery - How to get object via jQuery using one of cell content for example **Some Text**?

> ID：11403811
> 
> 赞同：0
> 
> 时间：2012-07-09T21:57:07.357
> 
> 标签：jquery

How to get `<tr>` object via jQuery using one of cell content for example **Some Text**?

```
<tr style="border: 1px solid #07234B; border-collapse: collapse;">
 <td style="border: 1px solid #07234B; border-collapse: collapse; padding: 2px 2px 2px 2px;">
     Some text
 </td>
 <td style="border: 1px solid #07234B; border-collapse: collapse; padding: 2px 2px 2px 2px;">
     7/8/2012 
 </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:59:33.283

```
$("td:contains('Some text')").parent() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:00:13.330

```
$('td').find('Some Text').parentUntil('tr'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:59:52.777

试试这个：**演示** [http://jsfiddle.net/YYdCE/](http://jsfiddle.net/YYdCE/)

```
var tableRow = $("td").filter(function() {
    return $(this).text() == "Some text";
}).closest("tr"); 
```

# scala - Splitting out 3 or more Arrays in Scala

> ID：11403812
> 
> 赞同：2
> 
> 时间：2012-07-09T21:57:07.517
> 
> 标签：scala, collections

Martin Odersky gives this example to split out an array into 2 collections:

```
val people: Array[Person]
val (minors, adults) = people partition (_.age < 18)

class Person(val name: String, val age: Int) 
```

What is the best way to split out into 3 or more arrays:

val (minors, adults, seniors) = people partition?? x < 18, 18 < x < 65, x > 65 // ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T22:17:47.843

用单线做这件事可能不太漂亮。

```
val (minors, older) = people partition {_.age < 18}
val (adults, seniors) = older partition {_.age < 65} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T00:35:15.943

```
def multiPartition[T: Manifest](xs: Traversable[T])(fs: T => Boolean *) = {
  val builders = Vector.fill(fs.length)(ArrayBuffer.empty[T])
  for (e <- xs) {
    val i = fs.indexWhere(f => f(e))
    if (i >= 0) builders(i) += e
  }
  builders.map(_.toArray)    
} 
```

示例用法是：

```
val Seq(minors, adults, seniors) = 
    multiPartition(people)(_.age < 18, _.age < 65, _ => true) 
```

所以第二个 arg 列表中的每个术语都是一个“桶”，`_ => true`是“其他所有”。

这将返回数组。[我做了一个非常相似的版本，在这里](https://gist.github.com/3080119)吐出你原来的集合类型，虽然我不知道如何让它也适用于数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T23:00:11.353

这将返回一个 Tuple3，就像您在关于未成年人、成年人和老年人的问题中所说的那样。不过，可能有一种更有效和更通用的方法。

`Tuple3(people.filter(_.age < 18), people.filter(p => p.age > 18 && p.age < 65), people.filter(_.age > 65))`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T01:16:49.093

您可以使用 groupBy 方法：

```
case class Person(name: String, age: Int)

val people = Array(Person("A",1),Person("B",2),Person("C",14),Person("D",19),Person("E",70))

def typeByAge(p: Person): String = 
  if(p.age < 4) "BABY"
  else if(p.age < 18) "MINOR"
  else if(p.age < 65) "ADULT"
  else "OLD"

val g = people groupBy typeByAge

val (babys,minors,adults,olds) = (g("BABY"),g("MINOR"),g("ADULT"),g("OLD")) 
```

# python - 使用 wxPython 保存/加载 GUI

> ID：11403818
> 
> 赞同：1
> 
> 时间：2012-07-09T21:57:24.133
> 
> 标签：python, user-interface, wxpython, wxwidgets

我使用 wxpython 创建了一个 UI 构建器，这意味着我可以动态创建按钮和其他小部件，然后程序会给我代码。

问题来了：我怎样才能让用户保存他们的工作？然后稍后加载它，所有小部件都会回到屏幕上？

我尽我所能尝试了所有方法，即使是使用，`exec()`但我总是遇到问题。

有人可以发布一个关于如何做到这一点的例子吗？对于这个问题，我在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:51:04.550

您可以使用 PersistenControls 来帮助解决这个问题：http: [//xoomer.virgilio.it/infinity77/main/PersistentControls.html](http://xoomer.virgilio.it/infinity77/main/PersistentControls.html)

我认为它现在实际上包含在 wxPython 中。可能从 2.8.11 开始。否则，您可以使用 XRC 将其保存为 XML。有关更多信息，请参阅以下链接：

*   [http://wiki.wxpython.org/XRCTutorial](http://wiki.wxpython.org/XRCTutorial)
*   [http://www.blog.pythonlibrary.org/2010/05/11/wxpython-an-introduction-to-xrc/](http://www.blog.pythonlibrary.org/2010/05/11/wxpython-an-introduction-to-xrc/)

# linux - 确定shell程序中的相对路径还是绝对路径

> ID：11403820
> 
> 赞同：27
> 
> 时间：2012-07-09T21:57:31.793
> 
> 标签：linux, shell, path

如标题所述，如果路径是相对路径还是绝对路径，我需要确定何时运行程序：

```
./program #relative
dir/dir2/program #relative
~User/dir/dir2/program #absolute
/home/User/dir/dir2/program #absolute 
```

这是我的测试用例。我怎么能在 shell 程序中做这件事呢？

或者更一般地说，在这种情况下，如何检查路径`$0`是相对的还是绝对的？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-09T22:06:51.707

```
if [[ "$0" = /* ]]
then
   : # Absolute path
else
   : # Relative path
fi 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-15T01:40:52.357

any 的通用解决方案`$path`，而不仅仅是`$0`

### POSIX 一班轮

```
[ "$path" != "${path#/}" ] && echo "absolute" || echo "relative" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-09T22:05:58.127

```
case "$directory" in
   /*)
      echo "absolute"
      ;;
   *)
      echo "relative"
      ;;
esac 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-01-26T13:38:38.823

```
if [ ${path:0:1} == / ]
then
     echo Absolute path
else
     echo Non-absolute path
fi 
```

# forms - 以编程方式在 jsp 中创建输入表单元素

> ID：11403829
> 
> 赞同：0
> 
> 时间：2012-07-09T21:58:02.097
> 
> 标签：forms, jsp

我有一个独特的要求，我的 jsp 上的输入文本元素是根据数据库中表中的数据显示的。这个想法是以编程方式在 jsp 上显示输入元素，而不是对它们进行硬编码。由于我正在处理数百个奇怪的输入元素，我认为创建 JSON 对象将是最可行的选择，但这在进行服务器端验证时并没有真正帮助。所以我最终决定使用 Spring MVC 并对 jsp 中的每个元素进行硬编码，这在这种情况下似乎不是最好的方法。当我们不确定输入元素将是什么时（在这种情况下，列表来自数据库），是否有更好、更优雅的方式来动态构建表单？
我会很感激你的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:26:52.110

您是否从数据库中获取了一个简单的字符串列表？
你可以使用 JSTL 吗？如果没有，那么您可以使用 scriptlet。但是，很多人不喜欢使用一个。无论如何，这里有一个演示两种方式的 JSP。

```
<%@ page import="java.util.*" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%  
   // create a list for testing
   List<String> list = new ArrayList<String>();
   list.add("blue");
   list.add("green");
   list.add("red");
   list.add("yellow");
   pageContext.setAttribute("list", list);
%>
<html>
<body>
<form>
<c:forEach items="${list}" var="current">
   ${current}<input name="${current}" type="text" />
</c:forEach>
<br/>
<%
  for(String item: list){
    out.print(item + "<input name=\"" + item + "\" type=\"text\" />");
  }
%>
   <input type="submit"  />
</form>
</body>
</html> 
```

# java - 原始类型的泛型类可以采用该泛型类的所有不同变体这一事实与 Java 兼容性有关吗？

> ID：11403830
> 
> 赞同：2
> 
> 时间：2012-07-09T21:58:07.977
> 
> 标签：java, generics, casting, compatibility, raw-types

我注意到泛型类的原始类型可以采用（指向）泛型类的所有不同变体，并且泛型类的所有不同变体都可以采用（指向）泛型类的原始类型。为什么 Java 泛型会有这样的行为？纯粹是因为兼容旧版本的Java吗？

例子：

```
//Main.java
public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

    List listRaw = new ArrayList();
    List<Student> listQualified = new ArrayList<Student>();
    List<?> listUnbounded = new ArrayList<Student>();
    List<? extends Student> listUpBounded = new ArrayList<Student>();
    List<? super Student> listDownBounded = new ArrayList<Student>();

    // List raw type can take all different variations of List
    List rawList1 = listRaw;
    List rawList2 = listQualified;
    List rawList3 = listUnbounded;
    List rawList4 = listUpBounded;
    List rawList5 = listDownBounded;

    // All different variations of List can take List raw type
    listRaw = rawList1;
    listQualified = rawList2;
    listUnbounded = rawList3;
    listUpBounded = rawList4;
    listDownBounded = rawList5;

    }

}

//People.java
public class People {

    public static class Student extends People {
    }

    public class HistoryStudent extends Student {
    }

    public class MathStudent extends Student {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:20:13.367

Sun 工程师面临的主要挑战之一是保持向后兼容性。例如，如果您无法分配：

```
List list = new ArrayList<Student>(); 
```

那么，您将无法使用较旧的库方法。IE：

```
List org.apache.commons.collections.ListUtils.intersection(List arg0, List arg1) 
```

还要记住这些类型在运行时消失，如[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html中所述](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:10:57.833

是的。实际上泛型是在 java 5 中添加的，并且该语言必须保持与旧版本的运行时兼容性。这种折衷是有效的，因为一旦代码被编译（类型 ereasure）到 .class 中，实际上泛型信息就会消失，即使您可以通过反射获得信息，无论某些方法是否接受泛型类型参数。如果您编译与您编写的代码类似的代码，它可以正常工作，但通常编译器会警告您您正在使用“原始”类型。

# c# - 使用 FreeImage 对 JPEG 进行无损优化

> ID：11403831
> 
> 赞同：6
> 
> 时间：2012-07-09T21:58:08.390
> 
> 标签：c#, .net, jpeg, freeimage

有几种工具可以在不牺牲质量的情况下优化 JPEG，例如[jpegtran.exe](http://jpegclub.org/jpegtran/)和[Smush.it](http://www.smushit.com/ysmush.it/)。我一直在寻找一种通过代码（最好是在.NET 中）来实现它的方法，我目前选择了[FreeImage](http://freeimage.sourceforge.net/)，但我没有得到我想要的结果。

有一个`JPEG_OPTIMIZE`标志，但您还必须设置一个质量标志，然后它就不再是无损的了。

这是我尝试过的：

```
var image = FreeImage.Load(FREE_IMAGE_FORMAT.FIF_JPEG, fileIn, FREE_IMAGE_LOAD_FLAGS.JPEG_ACCURATE);
FreeImage.Save(FREE_IMAGE_FORMAT.FIF_JPEG, image, fileOut, FREE_IMAGE_SAVE_FLAGS.JPEG_OPTIMIZE); 
```

但它会进行压缩。我认为 FreeImage 可以优化（通过去除元数据等），但我找不到如何保持相同的压缩/图像质量。正确的方法是什么？

编辑：对于无法优化 JPEG 存在一些困惑，简短的回答是*可以，*因为您可以去除未使用的元数据。我不是在谈论压缩。请参阅这些线程或查看 Michael B 的答案。

[用于进一步无损 jpeg 压缩的库](https://stackoverflow.com/questions/7895697/library-for-further-lossless-jpeg-compression)

[是否有可用的 Windows 版本的 Smush.it？](https://stackoverflow.com/questions/1610417/is-there-a-windows-version-of-smush-it-available)

[图像压缩工具](https://stackoverflow.com/questions/10959557/tool-for-image-compression)

[用于网络上使用的图像（jpg、gif 和 png）的图像优化器](https://stackoverflow.com/questions/1060763/image-optimizer-for-images-used-on-the-web-jpg-gif-and-png)

问题是：可以用 FreeImage 完成吗？如果可以：如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:18:52.397

当您提到优化时，我看到人们大多会考虑压缩...

您提到的程序（jpegtran）可以无损地优化jpeg图像，而无需解压缩和重新压缩数据。这就是为什么你不会失去质量。您可以做些什么来优化 jpeg 是：

*   优化 JPEG 文件的 Huffman 编码层以增加压缩率，
*   在渐进式和非渐进式 JPEG 格式之间转换，
*   消除一些图像程序插入的非标准应用程序特定数据
*   你也可以应用灰度、旋转或裁剪而不会失去质量，但我猜你对此不感兴趣。

来源：维基百科。

我从来没有做过，所以我手头没有任何东西，但我很确定有一个图书馆可以为你做这件事。否则，自己制作东西应该不会那么困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:36:59.100

我认为 FreeImage 只支持无损**转换**（即`FreeImage_JPEGTransform`）。

这可以保存到不同的文件，但不幸的是，似乎没有办法在新文件上设置任何保存标志以允许剥离元数据等。

我只能建议您查看源代码，看看是否有任何您可以自己利用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:01:33.690

恐怕`JPEG`是有损格式。即使是很小的规模。质量标志告诉它您希望损失的比例，压缩越大，损失越小，文件越大，损失越小。

*   `JPEG/2000`可以做无损格式，但不太受支持
*   `PNG`支持无损压缩。

但是，您可以优化 JPEG 文件，但这仍然会导致数据丢失，它可能是无意义的数据（即 EXIF 信息），但它会丢失其中一些，大小增益很小（除非您的文件已经非常小） . [在这里](http://techmikael.blogspot.co.uk/2009/07/remove-exif-data-from-image-files-with.html)查看有关如何删除 EXIF 数据的教程。

但是，如果您尝试从文件中挤出最后一滴大小，则最好切换到“更好”的格式（我松散地使用该术语，因为定义更好或更差格式是您自己的要求）。但是还有其他格式支持更高的压缩率和更少的损失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T14:33:16.680

您可以使用 FreeImage 删除元数据，但是对于 jpeg，图像将在保存时重新压缩，并会导致图像质量下降。

```
' by default, FreeImage will have copied the metadata to the new image
If Not (args.CopyMetadata) Then
    Dim tag As New FreeImageAPI.FITAG
    FreeImage.SetMetadata(FREE_IMAGE_MDMODEL.FIMD_COMMENTS, dib2, Nothing, tag)
    FreeImage.SetMetadata(FREE_IMAGE_MDMODEL.FIMD_IPTC, dib2, Nothing, tag)
    FreeImage.SetMetadata(FREE_IMAGE_MDMODEL.FIMD_XMP, dib2, Nothing, tag)
    ' value of 11 is for FIMD_EXIF_RAW
    FreeImage.SetMetadata(DirectCast(11, FreeImageAPI.FREE_IMAGE_MDMODEL), dib2, Nothing, tag)
    FreeImage.DeleteTag(tag)
End If

If File.Exists(targetFile) Then
    File.Delete(targetFile)
End If

FreeImage.Save(FREE_IMAGE_FORMAT.FIF_JPEG, dib2, targetFile, FREE_IMAGE_SAVE_FLAGS.JPEG_OPTIMIZE Or FREE_IMAGE_SAVE_FLAGS.JPEG_QUALITYGOOD) 
```

如果要从 FIF_JPEG 以外的文件类型中删除元数据，则应查阅文档以查看哪些是可写的。

要在不影响图像的情况下删除元数据，您需要查看 jpeg 文件交换格式并仅提取所需的数据。如果您碰巧有 Photoshop 6 安装 CD（6，而不是 CS6），则在安装 PS6 SDK 时可以获得包含相关信息的文档。

# python - 单击按钮时如何打开新的子窗口？(wxpython)

> ID：11403835
> 
> 赞同：1
> 
> 时间：2012-07-09T21:58:18.533
> 
> 标签：python, user-interface, wxpython

在主窗口上单击按钮时如何打开子框架？下面的代码创建了一个下拉框。我的问题是我的主窗口有一个单独的类，我不知道如何在我的主应用程序中打开这个新的下拉框窗口。主窗口只是一个添加了按钮的 wx.frame。

```
import wx
class MyFrame(wx.Frame):

    def __init__(self ):
        wx.Frame.__init__(self, None, -1, 'wxChoice test', size=(300, 150))
        colorList = ['blue','green','yellow','red']
        # create the dropdown box
        self.choice1 = wx.Choice(self, -1, choices=colorList)

        # select item 1 = 'green' to show
        self.choice1.SetSelection(1)
        # set focus to receive optional keyboard input
        # eg. type r for red, y for yellow
        self.choice1.SetFocus()
        # new event handler wxPython version 2.5 and higher
        self.choice1.Bind(wx.EVT_CHOICE, self.onChoice)
    def onChoice(self, event):
        '''get the slected color choice'''
        self.color = self.choice1.GetStringSelection()
        self.SetTitle(self.color) # test

# this is only a small application
application = wx.PySimpleApp()
# call class MyFrame
frame1 = MyFrame()
# show the frame
frame1.Show(True)
# start the event loop
application.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:17:04.133

我可以在几分钟内做的最简单的例子 import wx

```
def show_other(evt):
    f2 = wx.Frame(None,-1)
    c = wx.Choice(f2,-1,choices=['red','blue','green'])
    f2.Show()

a = wx.App(redirect = False)

f = wx.Frame(None,-1)
b = wx.Button(f,wx.ID_OK)
b.Bind(wx.EVT_BUTTON,show_other)
f.Show()
a.MainLoop() 
```

# ruby - Ruby：模块和超级？

> ID：11403836
> 
> 赞同：31
> 
> 时间：2012-07-09T21:58:28.497
> 
> 标签：ruby

我不明白为什么会这样。

```
module Base
  attr_reader :first
  def setup
    @first = 1
  end
end

module Addon
  attr_reader :second
  def setup
    #super
    @second = 2
  end
end

class Test
  include Base
  include Addon

  def initialize(num)
    @num = num
    setup
  end
end

a = Test.new(1)
p a.first
p a.second 
```

基本上我有一个“基础”模块，它设置了一些东西。我还有一个插件模块，如果某个类想要包含它，它会设置更多的东西。

现在当我测试它时，如果我没有那个超级电话，我会得到

```
nil
2 
```

当我有超级电话时，我得到

```
1
2 
```

super 在这里实际上做了什么？它从 Base 模块调用 setup 方法，即使 Base 和 Addon 不相关。

这是我第一次在模块的上下文中使用 super。以前我总是对类使用超级调用，并认为它只是在继承树上找到具有相同方法的父级。

包含多个模块是否也设置了某种继承树？

编辑：就上下文而言，如果没有 Base 模块，就永远不会包含 Addon 模块，并且 Base 模块将始终包含在任何其他 Addon 模块之前。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-09T22:33:25.590

是的，当您包含模块时，它们会被注入到继承链中

```
Test.ancestors # => [Test, Addon, Base, Object, Kernel, BasicObject] 
```

`Addon`模块，当包含时，`setup`从 .重新定义现有方法`Base`。如果要`Base`调用 's 版本，请使用`super`.

# c++ - 如何将完整的字符串传递给批处理？

> ID：11403840
> 
> 赞同：1
> 
> 时间：2012-07-09T21:58:56.843
> 
> 标签：c++, batch-file

我正在编写一个 C++ 程序，它可以让我搜索 Wikipedia、Google、Wolfram Alpha 等。我通过询问输入（我想要搜索的内容，例如“猫的图片”）来做到这一点，然后我将输入传递给批处理，它运行命令以使用我的输入打开谷歌搜索。这是它的样子：

```
string input;
cout<<"What do you want to search?"<<endl;
getline(cin, input, '\n');
system(("START https://www.google.com/search?q="+input).c_str()); 
```

问题是，如果我让它搜索“有趣的猫”，它只会搜索有趣的。我应该怎么办？除了使用 cmd，我也愿意接受其他方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:05:00.780

Url-encode 搜索字符串：[https ://en.wikipedia.org/wiki/Percent-encoding](https://en.wikipedia.org/wiki/Percent-encoding)

# sql - 返回具有完全相同员工的所有组

> ID：11403847
> 
> 赞同：2
> 
> 时间：2012-07-09T21:59:34.457
> 
> 标签：sql, sql-server, sql-server-2005

有2张桌子：

```
Employee
(id_employee, worker_name)

Groups
(id_employee, group_name) 
```

这是为您准备的创建脚本：

```
CREATE TABLE Employee (
   id_employee int identity(1,1) NOT NULL CONSTRAINT PK_Employee PRIMARY KEY CLUSTERED,
   worker_name nvarchar(100) CONSTRAINT UQ_Employee_worker_name UNIQUE
);

CREATE TABLE Groups (
   id_employee int NOT NULL CONSTRAINT FK_Groups_id_employee FOREIGN KEY REFERENCES Employee (id_employee),
   group_name varchar(10) NOT NULL,
   CONSTRAINT PK_Groups PRIMARY KEY CLUSTERED (group_name, id_employee)
);

INSERT Employee
SELECT 'worker 1'
UNION ALL SELECT 'worker 2'
UNION ALL SELECT 'worker 3'
UNION ALL SELECT 'worker 4';

INSERT Groups
SELECT 1, 'a1'
UNION ALL SELECT 2, 'a1'
UNION ALL SELECT 3, 'a2'
UNION ALL SELECT 4, 'a2'
UNION ALL SELECT 1, 'b1'
UNION ALL SELECT 2, 'b1'
UNION ALL SELECT 3, 'b2'
UNION ALL SELECT 4, 'b2'
UNION ALL SELECT 2, 'b3'
UNION ALL SELECT 3, 'b3'
UNION ALL SELECT 4, 'b3'; 
```

我需要一个查询，对于给定的`id_group`将返回具有完全相同员工的所有其他组。

例如：

```
SELECT for 'a1' 
```

-> 应该返回 'b1' 因为在这两个组中都有：工人 1 和工人 2

```
SELECT for 'a2' 
```

-> 应该返回“b2”，因为在这两个组中都有：工人 3 和工人 4

请注意，组需要完全相同，所有成员都`a1`需要在其中，`b1`并且两个组的大小也需要相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:54:49.623

您可以使用 SQL 集合操作来完成这项工作。这个想法是在组内将员工匹配在一起并计算组中的总数。

```
select others.group_name
from (select g.*, count(*) over (partition by group_name) as numemps
      from groups g
      where group_name <> @group
     ) others left outer join
     (select g.*, count(*) over (partition by group_name) as numemps
      from groups g
      where group_name = @group
     ) thegroup
     on others.id_employee = thegroup.id_employee and
        others.numemps = thegroup.numemps
group by others.group_name
having count(*) = max(thegroup.numemps) and
       max(case when thegroup.id_employee is null then 1 else 0 end) = 0 
```

因此，此查询将世界分为两部分。. . 您的小组和所有其他小组。然后它按名称匹配它们并按组聚合。唯一的候选群体是员工人数相同的群体。

having 子句选择匹配的组。这意味着其他组中的每个名称都与您关心的组中的名称匹配。由于组的大小相同，并且组中的每个名称都匹配，因此这些组包含相同的员工。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:09:01.797

你可以试试这个解决方案：

```
SELECT b.group_name
FROM
(
    SELECT aa.id_employee, aa.group_name, bb.group_count
    FROM groups aa
    CROSS JOIN
    (
        SELECT COUNT(1) AS group_count FROM groups WHERE group_name = 'a1'  
    ) bb
    WHERE aa.group_name = 'a1'
) a
INNER JOIN groups b ON a.id_employee = b.id_employee AND a.group_name <> b.group_name
INNER JOIN
(
    SELECT group_name, COUNT(1) AS other_group_count
    FROM groups
    GROUP BY group_name
) c ON b.group_name = c.group_name
WHERE a.group_count = c.other_group_count
GROUP BY b.group_name, a.group_count
HAVING COUNT(1) = a.group_count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:51:51.227

这行得通。如果您想尝试，请参阅我添加到问题中的设置脚本。

```
SELECT DISTINCT G.group_name
FROM Groups G
WHERE
   G.group_name <> @group
   AND NOT EXISTS (
      SELECT *
      FROM
         (SELECT * FROM Groups WHERE group_name = @group) G1
         FULL JOIN (SELECT * FROM Groups WHERE G.group_name = group_name) G2
            ON G1.id_employee = G2.id_employee
      WHERE EXISTS (SELECT G1.id_employee EXCEPT SELECT G2.id_employee)
   ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:07:18.037

这是获得所需结果的 sql 查询。

```
DECLARE @group_name varchar(10)='a1'
;WITH CTE(group_name,emp_ids) as (select group_name,(SELECT  cast(id_employee as varchar(10))+ ', ' as [text()]
    FROM    Groups where group_name=g.group_name 
    ORDER BY id_employee DESC
    FOR XML PATH('') )  as emp_ids from Groups g group by group_name)

SELECT group_name FROM CTE where emp_ids in(select emp_ids from CTE where group_name = @group_name)
and group_name <> @group_name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T23:03:45.587

花了一些编辑才得到我想要的

```
with pairs as (
    select gs1.group_name as group1, gs2.group_name as group2, gs1.emp_count as emp_count
    from
    (select group_name, count(1) as emp_count from groups group by group_name) as gs1 inner join
    (select group_name, count(1) as emp_count from groups group by group_name) as gs2
        /* choose parameterized */
        --on gs1.group_name = 'a1' and gs1.group_name != gs2.group_name and gs1.emp_count = gs2.emp_count
        /* or all pairs */
        on gs1.group_name < gs2.group_name and gs1.emp_count = gs2.emp_count
)
select
    pairs.group1, pairs.group2
from
    pairs inner join

    (select group_name, id_employee from Groups) as g1
        on g1.group_name = pairs.group1 inner join

    (select group_name, id_employee from Groups) as g2
        on g2.group_name = pairs.group2 and g1.id_employee = g2.id_employee
group by
    pairs.group1, pairs.group2
having
    min(pairs.emp_count) = count(g1.group_name); 
```

# java - AppEngine Jersey Junit 测试不起作用（未为此线程注册 api）

> ID：11403850
> 
> 赞同：3
> 
> 时间：2012-07-09T22:00:04.053
> 
> 标签：java, google-app-engine, jersey, junit4

我很难让 Jersey、AppEngine 和 JUnit 工作。当前错误如下：

**没有为此线程注册 API 环境。**

我正在做以下事情：

*   通过 JUnit @Before 注解加载 helper.setUp() (LocalDataStoreService)

*   通过 JUnit @Before 注解创建 Grizzly Webserver 的实例

*   执行 testCreateCard 测试

*   停止 Grizzly 网络服务器

*   在 JUnit @After 注解上运行 helper.tearDown() 方法

我使用 Eclipse Indigo 启动（运行方式）Junit 测试（我在 Java BuildPath 上包含了 jar）。

似乎 Jersey 或 Grizzly Webcontainer 正在打开不适用于本地数据存储方法 helper.setUp() 和 helper.tearDown() 的新线程。

我发现了一些问题/答案，但与将 AppEngine 与 Jersey 结合使用无关。

有没有人可以帮忙？Jersey 和 AppEngine 和 JUnit 的设置真的可行吗？我用rest-assured和jersey-test-framework尝试了几种可能性，但所有尝试都以错误和调试告终，并且在AppEngine Mailinglist中发帖也没有任何结果。

我最后的希望是我目前的设置：

*   Grizzly 2.1（泽西岛提供）

*   泽西 1.12

*   JUnit 4.10

堆栈跟踪如下：

```
java.lang.NullPointerException: No API environment is registered for this thread.
    at  com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId(DatastoreApiHelper.java:86)
at     com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppIdNamespace(DatastoreApiHelper.java:96)
at com.google.appengine.api.datastore.Key.<init>(Key.java:106)
at com.google.appengine.api.datastore.Key.<init>(Key.java:90)
at com.google.appengine.api.datastore.Key.<init>(Key.java:86)
at com.google.appengine.api.datastore.Entity.<init>(Entity.java:125)
at com.google.appengine.api.datastore.Entity.<init>(Entity.java:106)
at org.datanucleus.store.appengine.DatastoreFieldManager.<init>(DatastoreFieldManager.java:189)
at  org.datanucleus.store.appengine.DatastorePersistenceHandler.insertPreProcess(DatastorePersistenceHandler.java:354)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObjects(DatastorePersistenceHandler.java:267)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:256)
at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3185)
at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3161)
at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1298)
at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1175)
at org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:669)
at org.datanucleus.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:694)
at com.acolsolutions.loyaltycard.dataobjects.CardDAO.create(CardDAO.java:23)
at com.acolsolutions.loyaltycard.resources.CardResource.create(CardResource.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer._service(GrizzlyContainer.java:215)
at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.service(GrizzlyContainer.java:185)
at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
at org.glassfish.grizzly.http.server.HttpHandlerChain.service(HttpHandlerChain.java:207)
at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:164)
at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:265)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:200)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:134)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:78)
at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:816)
at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:111)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:115)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:55)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:135)
at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:566)
at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:546)
at java.lang.Thread.run(Unknown Source) 
```

我的 Jersey Test 课程如下所示：

```
import java.io.IOException;
import java.net.URI;
import java.util.HashMap;
import java.util.Map;

import javax.ws.rs.core.UriBuilder;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.google.appengine.tools.development.testing.LocalDatastoreServiceTestConfig;
import com.google.appengine.tools.development.testing.LocalServiceTestHelper;

import org.glassfish.grizzly.http.server.HttpServer;

import com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory;
import com.sun.jersey.api.core.PackagesResourceConfig;
import com.sun.jersey.api.core.ResourceConfig;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.Client;

import org.codehaus.jettison.json.JSONObject;

public class CardResourceTests {
private final LocalServiceTestHelper helper = new LocalServiceTestHelper(
        new LocalDatastoreServiceTestConfig()); 

private HttpServer httpServer;
private URI uri;

@Before
public void setUp() throws Exception {
    helper.setUp();

    uri = UriBuilder.fromUri("http://localhost/").port(9998).build();
    ResourceConfig rc = new PackagesResourceConfig("com.acolsolutions.loyaltycard.resources");
    httpServer = GrizzlyServerFactory.createHttpServer(uri, rc);
}

@After
public void tearDown() throws Exception {
    helper.tearDown();

    httpServer.stop();
}

@Test
public void testCreate() {
    boolean thrown = false;
    Client client = Client.create();
    WebResource webResource = client.resource(uri);
    JSONObject card = new JSONObject();

    try {
        card.put("id", "1")
        .put("name", "Name of Card")
        .put("code", "123456")
        .put("codeTypeId", "1")
        .put("cardProviderName", "The Card Provider")
        .put("picturePath", "provider.jpg")
        .put("cardProviderUrl", "http://www.provider.com")
        .put("creationDate", "Sun Jun 10 08:55:14 UTC 2012")
        .put("modificationDate","Sun Jun 10 08:55:14 UTC 2012");
    webResource.path("cards").type("application/json").post(card);
    } catch(Exception e) {
        e.printStackTrace();
        thrown = true;          
    }

    assertEquals("Result", false, thrown);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:33:36.030

如果您使用的是appengine，为什么要尝试使用grizzly？Appengine 是您的容器，而不是灰熊……

# eclipse - 意外的 Eclipse m2e 获取的依赖项比我的源更新

> ID：11403854
> 
> 赞同：0
> 
> 时间：2012-07-09T22:00:19.303
> 
> 标签：eclipse, maven, m2eclipse

当我想获取依赖项时，是否有比将 eclipse 的 maven 首选项设置为**脱机并使用 maven 命令行更好的方法来使用 eclipse 和 maven？**

Eclipse + maven via m2e 下载与我的源不同步的二进制文件。

在处理我想要控制的错误时，我何时将源代码和依赖项拉入我的 Eclipse 工作区。然而，我的持续集成系统总是构建新的快照供我获取。有时 Eclipse 会获取破坏我本地构建的依赖项，因为我还没有（也不想）更新源。

有没有我遗漏的技巧，或者这对于那些不想持续集成的人来说是最佳选择？

*   将 Eclipse Window -> Preference -> Maven 设置为**离线**
*   从源代码控制更新
*   使用 maven 在命令行上构建
*   在 Eclipse 中工作：改变、测试、思考、重复
*   准备好接收更改时：更新源代码，在命令行上构建 mvn 并返回 eclipse

谢谢

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:04:02.323

如果您可以选择，您可以将项目的 SNAPSHOT 依赖项检出到工作区，并在项目设置中启用“解决工作区项目的依赖项”。使用此解决方案，您可以控制何时获取依赖项的新来源，而不会出现使 Maven 脱机的所有缺点。

# java - 在 Hibernate 中优雅地处理 ConstraintValidationExceptions

> ID：11403855
> 
> 赞同：2
> 
> 时间：2012-07-09T22:00:32.843
> 
> 标签：java, mysql, hibernate, persistence

SO 和其他站点上有很多与执行 Hibernate 验证、捕获异常等相关的帖子。然而，所有这些都让我在下面描述的情况下遇到了一些非常不理想的设计选择。这似乎是一种常见的情况，我不敢相信没有一个干净的解决方案。

*   我想利用 Javax（和 Hibernate）的验证注释，
*   我想纠正或丢弃无效的对象，
*   我想利用 javax 的 PrePersist 等注释来处理对我的对象的重复或基于时间的操作。

三个一起使用似乎并不奏效。

*   当发生异常时，[Hibernate 不会让您提交事务](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/transactions.html#transactions-demarcation-exceptions)。只要我有一个无效的对象，我就会得到一个违反约束的异常。我无法权威地找到*ConstraintViolationException*是否包含在其中，或者被视为特殊情况[1]，但是......

*   如果我捕捉到 ConstraintViolationException 并继续处理下一个对象，我似乎能够继续，但是当我尝试刷新或提交事务时，Hibernate 会抱怨，因为[我有没有（由数据库分配）id 的对象](https://stackoverflow.com/questions/5298825/save-method-dont-flush-the-session-after-an-exception-occurs)。

    *   我曾想过尝试将对象设置为 null 或使用*session.evict(myObject)*来“破坏”Hibernate 对该对象的了解。
*   在尝试保存之前，我可以 [“手动”运行验证]（[http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2697](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2697)），但要付出代价被执行了两次——这看起来很傻，但这并没有调用 @PrePersist 钩子，导致错误的违规行为。

一个人做什么？

具体来说，我有很多（10,000 多个）对象，其中一小部分总是无效的。

```
@Entity
public class myPojo implements Serializable {

  @Id
  @GeneratedValue
  private long id;

  @NotBlank
  private String anotherString;

  @NotNull
  @Temporal(TemporalType.TIMESTAMP)
  private Date createdAt;

  @NotNull
  @Temporal(TemporalType.TIMESTAMP)
  private Date updatedAt;  

  @NotNull
  @Temporal(TemporalType.TIMESTAMP)
  private Date postedDate;  

  @PrePersist
  protected void onPrePersist() {
    this.createdAt = new Date();
    this.updatedAt = this.createdAt;
    if (this.postedDate == null)
      this.postedDate = this.createdAt;
  }
} 
```

我想保存这个函数，并捕获任何违反约束的对象：

```
void saveResource(MyPojo myPojp) {
  try {
    session.saveOrUpdate(mypojo);
  }
  catch (final ConstraintViolationException ex) {
     System.err.println("Could not save " + myPojo + " because " +
        this.getValidationErrors(myPojo));
  }
} 
```

其中 getValidationErrors() 返回通过手动创建和使用验证工厂找到的所有*ConstraintViolation的字符串。*

我知道的唯一其他可能性是围绕每次保存执行单个事务（这似乎是个坏主意，因为如果确实发生真正的异常，我不希望任何项目持续存在）或者可能编写自定义验证器以手动运行在我调用保存之前调用 prepersist 钩子（可维护性的噩梦！）。

[1]：我知道这是一个糟糕的参考，但我读了这么多书，我再也找不到了。希望有人能在更多技术细节中澄清哪些错误导致交易无效与可恢复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:29:50.370

想法 1：为什么将应用程序级别的验证注释放在 PrePersist 中您自己管理的字段上，这些字段不是由用户设置的？

想法2：您可以使用验证组，以便您可以仅预先检查在用户级别设置的那些字段并忽略系统管理的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:24:47.897

```
 public interface PersistValidationGroup { }

  @NotBlank
  private String anotherString;

  @NotNull(groups={PersistValidationGroup.class})
  @Temporal(TemporalType.TIMESTAMP)
  private Date createdAt;

  @NotNull(groups={PersistValidationGroup.class})
  @Temporal(TemporalType.TIMESTAMP)
  private Date updatedAt;  

  @NotNull(groups={PersistValidationGroup.class})
  @Temporal(TemporalType.TIMESTAMP)
  private Date postedDate; 
```

然后，当您手动验证时：

```
validator.validate(object, javax.validation.groups.Default.class); 
```

此时，只有那些标有默认验证组的字段（顺便说一下，如果您将“组”属性留空，则使用该组）将被验证。PersistValidationGroup 中的任何内容都不会被验证。

但是，我相信休眠会这样调用：

```
validator.validate(object); 
```

因此，所有组都将被验证。

# emacs - 如何让 emacs-helm list 提供当前目录中的文件作为选项？

> ID：11403862
> 
> 赞同：11
> 
> 时间：2012-07-09T22:01:39.307
> 
> 标签：emacs

有没有办法从`helm-mini`命令列出当前目录中的文件作为潜在搜索匹配的一部分？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T00:26:28.750

你会发现`helm-mini`定义为：

```
(defun helm-mini ()
  "Preconfigured `helm' lightweight version \(buffer -> recentf\)."
  (interactive)
  (helm-other-buffer '(helm-c-source-buffers-list
                       helm-c-source-recentf
                       helm-c-source-buffer-not-found)
                     "*helm mini*")) 
```

所以它只是调用源列表。添加任何现有源非常容易。

`helm-mode`启用运行（`C-h v``helm-c-source files`注意空格），您应该会发现：

> helm-c-source-files-in-current-dir

因此，使用您需要的来源制作您自己的 helm 命令：

```
(defun helm-my-buffers ()
  (interactive)
  (helm-other-buffer '(helm-c-source-buffers-list
                       helm-c-source-files-in-current-dir
                       helm-c-source-recentf
                       helm-c-source-buffer-not-found)
                     "*helm-my-buffers*")) 
```

查看`helm-for-files-prefered-list`您可能感兴趣的其他来源的定义。并使用帮助系统发现新的好东西。

# asp.net - 在 .net 项目中使用 Ajax 调用 .aspx.cs 函数不起作用

> ID：11403863
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:01:44.370
> 
> 标签：asp.net, jquery, asp.net-ajax

我在 .net 项目中使用 Ajax（不是 MVC.net）。我想从 JScript 函数中调用我的 .aspx.cs 函数。

这是我的 JScript 代码：

```
 $("a#showQuickSearch").click(function () {
        if ($("#quick_search_controls").is(":hidden")) {
            $.ajax({
                type: "POST",
                url: "Default.aspx/SetInfo",
                data: "{showQuickSearch}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
               success: function(response) {
                     alert(response.d);
               }

            });
            $("#quick_search_controls").slideDown("slow");
            $("#search_controls").hide();
            $("#search").hide();
        } else {
            $("#quick_search_controls").hide();
        }

    }); 
```

这是我的 .aspx.cs 函数：

```
 [WebMethod]
    public string SetInfo(string strChangeSession)
    {
        Label1.Text = strChangeSession;
        return "This is a test";
    } 
```

问题是我的 .aspx.cs 函数没有被调用，也没有更新 label.text。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:03:39.080

尝试使您的功能静态。

```
[WebMethod]
    public static string SetInfo(string strChangeSession)
    {
        //Label1.Text = strChangeSession; this wont work
        return "This is a test";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:04:05.390

`data: "{showQuickSearch}"`不是有效的 JSON。

下面是一个有效的 JSON 的样子：

```
data: JSON.stringify({ strChangeSession: 'showQuickSearch' }) 
```

您的 PageMethod 也需要是静态的：

```
[WebMethod]
public static string SetInfo(string strChangeSession)
{
    return "This is a test";
} 
```

这显然意味着您无法访问任何页面元素，例如标签和内容。在您的成功回调中，您现在可以使用 PageMethod 的结果来更新某些标签或其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:29:17.737

```
 $.ajax({
            type: "POST",
            url: "Default.aspx/SetInfo",
            data: "{'strChangeSession':'showQuickSearch'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(response) {
                 alert(response.d);
           },
          error: function (xhr, status, error) {

                var msg = JSON.parse(xhr.responseText);
                alert(msg.Message);
            }
        }); 
```

你的后端代码：

```
 [WebMethod]
 public static string SetInfo(string strChangeSession)
 {
   return "Response ";
 } 
```

# jquery - jQuery：删除当前元素之后的元素

> ID：11403867
> 
> 赞同：7
> 
> 时间：2012-07-09T22:01:51.387
> 
> 标签：jquery, jquery-selectors

我有一个关于删除当前元素之后的所有元素的问题。

这是场景：

我有一个位置树，我的用户需要遍历它才能获得特定值。我有一个通过 ajax 加载顶级位置的 SELECT。为了缩小选择范围，数据具有更精细的值，因此我根据用户选择的内容添加了一个新的 SELECT。当用户到达数据可用选项的末尾时，我停止添加 SELECT 并获取最后一个的值，这就是我所追求的。

我编写代码的方式是从一个 SELECT 开始，该 SELECT 具有硬连线的顶级位置 ID，然后有一个“onchange”事件处理程序，该处理程序输出到我的数据库并获取该选择的子项，然后创建新的在当前 TD 内选择。

这种情况一直持续到最后一个选择没有孩子返回。那时，我可以得到这个最终位置的 ID。

这很有效，直到用户决定改变一两个选择“上游”的东西。

下面是一个从位置树下来的用户可能有什么的说明（这些是代码中的 SELECT）：

美国 -> 俄亥俄州 -> 凯霍加 -> 克利夫兰 -> 1 区

如果“地区 1”是此位置链中的最后一个可用项目，我可以使用 $('#locations select:last').val() 获取它。奇妙吧。

如果用户决定“嗯，不，我追求的不是 Cuyahoga，而是 Stow”，并更改*第三个*选择选项，则效果不佳的情况。我需要做的是在具有“Cuyahoga”的选择之后删除所有选择，因为我现在必须为“Stow”获取任何进一步的数据。先前选择之后的任何选择都不再有效。

正在操作的 select 在 onchange 事件中传递自身，以便我拥有当前元素。我试过 $(elem).after().remove()，但这不起作用。

关于如何在当前选择之后删除所有选择的任何想法？

谢谢！

文档的结构如下所示：

```
<table border id="loctable">
  <tr><th>Location:</th><td><select id="loc0" onchange="return UpdateLocationSelect(this);">
    <option>choose..</option>
    <option value="3">USA</option>
    </select>
  </td>
  </tr> 
```

[剪辑]

```
function UpdateLocationSelect(elem) {
    // load sub locations for PPID given. IN this case, locations under USA. add options to elem
    // Also, erase any selects after this one, in case the user has "backed up" his selection

    $(elem).next().remove();  // Help needed here!! how to remove any SELECTs after this one??

    $.ajax({
        url: "api.php",
        dataType: "json",
        data: { cmd: "sublocs", "pid": elem.value },
        async: false,
        success: function( data, textStatus ) {
            // results
            if( $(data).length ) {
                $('#loctable td').append( "<select onchange='return UpdateLocationSelect(this);'><option>choose..</option></select>");
                $.each( data, function( key, val ){
                    $('#loctable select:last').append( '<option value="'+key+'">'+val+'</option>' );
                });
            }
            else
            {
                // we've hit the end of this location branch. Alert to check val is right
                alert( "LocID: " + $('#loctable select:last').val() );
            }
        },
      });
      return false;
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-09T22:12:28.120

```
$(elem).nextAll().remove(); 
```

如果您需要指定一个选择器，您可以使用相同的方法来完成。

```
$(elem).nextAll('select.some-class').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:14:42.480

要删除当前选择之后发生的那些选择，只需使用：

```
var curSelect = $('select').index('select');
$('select').gt(curSelect).remove(); 
```

将选择器传递给`index()`意味着它将查找文档中与该选择器匹配的所有元素，而不是从其兄弟元素中提供该元素的索引。

`gt()`查找初始选择器返回的所有元素，其索引大于`curSelect`变量传入的索引，在这种情况下，将它们传递给`remove()`方法。

参考：

*   [`gt()`](http://api.jquery.com/gt/).
*   [`index()`](http://api.jquery.com/index/).
*   [`remove()`](http://api.jquery.com/remove/).

# .htaccess - .htaccess 重写全域名

> ID：11403869
> 
> 赞同：1
> 
> 时间：2012-07-09T22:02:11.180
> 
> 标签：.htaccess, mod-rewrite, dns, rewrite

无论如何让用户通过让他们输入来下载文件：`download.mywebsite.com/thefile` 在浏览器地址中，而“download.mywebsite.com/thefile”不存在但“www.mywebsite.com/thefile”存在。

我对 .htaccess 和 mod_rewrite 引擎的了解几乎为零。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:08:28.990

如果你拥有`mywebsite.com`，那么是的，你可以，你必须`ServerAlias`在你的根`httpd.conf`指令中放置 a 然后使用 mod_rewrite 重写所有请求，`download.mywebsite.com/thefile`但`www.mywebsite.com/thefile`e`mod_rewrit`不会提前知道文件是否存在。

另一种方法是为 404 处理程序实现自定义错误文档，将用户重定向到建议的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:10:55.010

```
RewriteEngine On

RewriteRule ^/download/(.*)$ http://download.mywebsite.com/$1 [R=301,L] 
```

您还需要设置 Web 服务器以侦听子域

# c++ - 奇怪的 if 语句导致关闭计时器

> ID：11403875
> 
> 赞同：0
> 
> 时间：2012-07-09T22:02:26.430
> 
> 标签：c++, windows, if-statement, directx

所以我一直试图弄清楚以下几点：

```
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    HDC hDC;                // Display context handle
    PAINTSTRUCT PaintSt;    // Structure defining area to be drawn
    RECT aRect;             // A working rectangle
    HPEN hPen;              // A working pen
    HBRUSH hBrush;          // A working brush
    switch(message)
    {
        case WM_TIMER:
            switch(wParam)
            {
            case IDT_TIMER1: 
                    redraw = true;
                InvalidateRect(hWnd, NULL, TRUE);
            case IDT_TIMER2:
                if(keys[UP])
            {
                rect2.bottom -= 5;
                rect2.top -= 5;
            }
            if(keys[DOWN])
            {
                rect2.bottom += 5;
                rect2.top += 5;
            }
            if(keys[RIGHT])
            {
                rect2.left += 5;
                rect2.right += 5;
            }
            if(keys[LEFT])
            {
                rect2.left -= 5;
                rect2.right -= 5;
            }
        }
        return 0;
    case WM_PAINT:
            //if(redraw)
            {
                redraw = false;
                render_frame();
            }
        return 0;

    case WM_KEYDOWN:

            switch(wParam)
            {
            case VK_UP:
                keys[UP] = true;
                break;
            case VK_DOWN:
                keys[DOWN] = true;
                break;
            case VK_LEFT:
                keys[LEFT] = true;
                break;
            case VK_RIGHT:
                keys[RIGHT] = true;
                break;
            default:
                break;
            }

        return 0;
    case WM_KEYUP:
        switch(wParam)
        {
        case VK_UP:
            keys[UP] = false;
            break;
        case VK_DOWN:
            keys[DOWN] = false;
            break;
        case VK_LEFT:
            keys[LEFT] = false;
            break;
        case VK_RIGHT:
            keys[RIGHT] = false;
            break;
        default:
                break;
        }
        return 0;
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

    default:
        return DefWindowProc(hWnd, message, wParam, lParam);    // default message processing
    }
} 
```

所以这就是问题所在：在**WM_PAINT: 的情况下**，当我取消注释 if 语句时，时间由于某种原因停止计时。我不知道为什么，也不知道如何将这与任何事情联系起来。因此，如果我取消注释它，它将不会呈现，也不会从另一个计时器（有两个计时器）接收信息。请帮助我，如果它很傻，请不要笑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:30:24.867

WM_TIMER 消息是“低优先级”消息，它仅在不需要执行其他任何操作时生成。您的 WM_PAINT 处理程序的问题在于它不会在第一次生成时绘制，而是在创建窗口后立即绘制。未调用 EndPaint()，这使“窗口脏”状态位处于打开状态。这会立即导致生成另一个 WM_PAINT 消息。仍然不会绘制，因为*重绘*不是真的。等等，您的应用程序正在 WM_PAINT 消息上消耗 100% 的核心，并且永远不会空闲到足以允许生成 WM_TIMER 消息。

只需删除*重绘*测试即可解决您的问题。当 Windows 要求时，请始终绘制。或者将消息传递给 DefWindowProc()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:17:01.633

`WM_PAINT`不绘制任何东西（假设`redraw`保持错误），甚至不调用的处理`DefWindowProc`是非常不正统的。你的应用程序甚至可能在你不注意的情况下还活着。

从[文档](http://msdn.microsoft.com/en-us/library/aa922583.aspx)：

> 应用程序必须调用 BeginPaint 和 EndPaint 以响应 WM_PAINT 消息，或者将消息传递给 DefWindowProc 函数以验证窗口。DefWindowProc 验证更新区域；如果需要擦除窗口背景，它可以发送 WM_ERASEBKGND 消息。

# php - 外部“预订工具”，允许通过外部网站登录

> ID：11403886
> 
> 赞同：0
> 
> 时间：2012-07-09T22:03:39.487
> 
> 标签：php, jquery, html, web-services

我有一个预订工具，您可以通过在您的网站中插入来自我们服务器的单个 javascript 并创建一个我们检测到的 div 节点来“安装”在外部网站中，当 javascripts 加载时，它会执行对 web 服务的调用，然后将加载将来自我们网络服务的 JSON 响应的 html 插入到 div 节点中。

所以基本上，我们的工具与您的网站“融合”，我们非常小心地命名我们所有的 css 和 javascript，以阻止我们干扰您的网站，以至于有点偏执:)

安装我们的工具后，它会将所有 Web 服务运行到我们的服务器以检索数据。

我坚持的部分是如何保护登录数据，基本上，我们这里有一个问题，我们不知道拥有外部网站的人，他们允许人们按顺序注册和登录我们的工具为了购买我们的服务，我们使用该工具存储、处理登录信息并为活动和功能提供门票。

我们遇到的问题是这些凭据可能会被盗，因为该网站可以访问 html、javascript，并且可能会做一些顽皮的 jquery 技巧来获取用户名和密码数据。

如果可能的话，我想阻止它。

我怎样才能保护登录，所以我可以将该工具嵌入任何网站（http 或 https）并保护输入该工具并用于登录的用户名和密码。

有任何想法吗？

# javascript - 多个jquery noConflict文件

> ID：11403887
> 
> 赞同：0
> 
> 时间：2012-07-09T22:03:49.570
> 
> 标签：javascript, jquery-ui, jquery, jquery-widgets

我正在实现以下两组功能：-

对于窗口生成 - 所需的 jQuery 库是： - jquery.js (v1.3.2) - jquery-ui.js (v1.7.2)

我在[这里](http://fstoke.me/jquery/window/js/jquery/window/jquery.window.js)使用了一个扩展库——它使用 $.window{...} 创建了一个基于 jquery 的对话框窗口。

对于自动完成/插件搜索， - 我使用的所需库是： - jquery.js (v1.7.2) - jquery-ui.js (v1.8.18)

这 2 个分别工作得很好。但是，当在同一页面上使用时，我必须创建无冲突文件，以便这两个函数在两者之间的某个地方相遇。因此，现在，我正在使用：

*   jquery.js (v1.3.2)
*   jquery.js (v1.7.2)
*   jquery-ui.js (v1.8.1)

作为：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript" src="http://jqueryui.com/ui/jquery.ui.autocomplete.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.3.2.js"></script>
<script type="text/javascript">
    var jQuery_1_3_2 = $.noConflict(true);
</script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.js"></script>

/* Here I would like to use the script below with another noConflict, because v1.8.1 (above) causes flickering of dialog boxes while dragging around & isnt smooth like the one below, which is v1.7.2:-
<script type="text/javascript" src="http://fstoke.me/jquery/window/js/jquery/jquery-ui.js"></script>
*/

<script type="text/javascript" src="http://fstoke.me/jquery/window/js/jquery/window/jquery.window.js"></script> 
```

当像上面那样使用时，与窗口交互时会有相当多的视觉故障。在移动窗口时，页面的其他部分通常会突出显示或闪烁（快速突出显示） - 大约 50% 的时间。拖动和调整大小也不是很流畅。

如果我删除 v1.7.2 jquery.js，窗口会平滑很多，但自动完成功能停止工作。如果我删除 v1.3.2 jquery.js，则不会生成窗口。

现在，我使用如下功能：-

```
function createSampleWindow() { 
sampleWnd = $.window({
.......//Code here
}(jQuery_1_3_2); 
```

我如何在这里也使用 v1.7.2 jquery-ui.js 使用一些变量，例如：-

```
<script type="text/javascript" src="http://fstoke.me/jquery/window/js/jquery/jquery-ui.js"></script>
<script type="text/javascript">
    var jq_172= $.noConflict(true);
</script> 
```

**Qn 1**使用两个变量的正确语法是什么 - jQuery_1_3_2 AND jq_172 - 用于同一个函数？[这里使用](http://fstoke.me/jquery/window/#example10)的东西像： -

```
function createSampleWindow() { 
sampleWnd = $.window({
.......//Code here
}(jQuery_1_3_2, jq_172); 
```

或者

```
function createSampleWindow() { 
sampleWnd = $.window({
.......//Code here
}(jQuery_1_3_2),(jq_172); 
```

不工作。

**Qn 2**是否有可能使用 jquery.js v1.7.2 而不是 v1.3.2 实现一个大型 javascript，例如[fstoke](http://fstoke.me/jquery/window/js/jquery/window/jquery.window.js)中使用的那个 - 如果有人可以对为什么用 v1.7.2 替换 v1.3.2 做出显着区别它停止工作 - 我将非常感激。

如果我可以补充的话，因为窗户是由 $.window({...}); - 将 $.window 替换为 $.dialog 不会生成对话框。我有什么地方出错了吗？[请浏览fstoke 中使用](http://fstoke.me/jquery/window/js/jquery/window/jquery.window.js)的 js 文件。

**Qn 3**有人可以指出[fstoke jquery-ui](http://fstoke.me/jquery/window/js/jquery/jquery-ui.js)和[cdn 托管 jquery-ui](https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js)之间有什么区别- 两者都是 v1.7.2 jquery-ui.js 文件。

我觉得这是一个很长的查询，但我迫切需要帮助。请尽早帮助我。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:40:30.683

我会回答问题1。

使用两个版本的 jQuery 的正确语法类似于

```
var jQuery_1_3_2 = jQuery.noConflict(true);

function createSampleWindow() { 
    var no_op = jQuery.noop;       // refers to jQuery 1.7.2's noop function
    var no_op = $.noop;            // same as the above
    var no_op = jq_172.noop;       // same as the above
    var guid = jQuery_1_3_2.guid;  // refers to jQuery 1.3.2's guid member
} 
```

换句话说，如果您已经定义了它们，您只需使用它们。`noConflict(true)`将返回`$`并恢复`jQuery`到以前的含义，因此您可以像往常一样继续使用它们。

# ruby-on-rails - Apotomo 替代品

> ID：11403891
> 
> 赞同：0
> 
> 时间：2012-07-09T22:04:08.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, presenter, apotomo

我正在工作的项目主页上的信息一直在堆积，现在我们正在寻找一些东西来创建类似仪表板的界面。

这就是我找到 Apotomo 的方式，但我想知道有哪些值得研究的替代方案。

到目前为止，我已经浏览了[ruby​​-toolbox 上的 Rails Presenters](https://www.ruby-toolbox.com/categories/rails_presenters)。

*感谢您提出任何加快开发速度的建议。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:18:47.143

[ActiveAdmin](http://activeadmin.info/)有一个不错的仪表板，可能值得一试。这是他们的[演示](http://demo.activeadmin.info/admin)和[注释代码](https://github.com/gregbell/demo.activeadmin.info/blob/master/app/admin/dashboards.rb)

# jquery - 通过 Ajax 在 jQuery UI 对话框中的 PartialView 中提交表单只执行第一次成功

> ID：11403894
> 
> 赞同：1
> 
> 时间：2012-07-09T22:04:34.903
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我想我错过了一些简单的东西，但我被一遍又一遍地查看相同的代码蒙蔽了双眼，并且可以使用另一双眼睛。

我有一个包含表单的 MVC 部分视图。

```
<div class="Clear"></div>
 <div class="OverFlow">
     @using (Html.BeginForm(null, null, FormMethod.Post, new {id = "formId"}))
     {
         <div class="ErrorBx1">@Html.GetData()</div>
         <table>
             @Html.EditorFor(m => m.FormModel, "MyEditorTemplate") 
             <tr>
                 <td colspan="2"></td>
                 <td><input type="image" src="@Images.ResolveDefault("btn-send.jpg")" alt="Send" class="Send" /></td>
             </tr>
         </table>
     }
 </div> 
```

此视图还包含一些 Javascript

```
<script type="text/javascript">
    $(function () {
        $('#formId').submit(function () {
            $.ajax({
                cache: false,
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (res) {
                    if (res.success) {
                        alert("success");
                        closeDialog();
                        window.parent.specialFunction();
                    } else {
                        alert("not success");
                        $('#someElement').replaceWith(res);
                    }
                }
            });
            return false;
        });
    });
</script> 
```

这是执行的控制器方法

```
[HttpPost]
public ActionResult Index(MyViewModel viewModel)
{
    if (CheckSuccess())
    {
        return Json(new { success = true });
    }

    return ViewNoLayout("otherView", viewModel);
} 
```

这个视图被加载到一个 jQuery.UI 对话框中。第一次加载对话框时，单击表单上的提交按钮正确执行成功函数 - 弹出警报，关闭对话框并调用父函数。如果我再次弹出对话框并单击提交按钮，则调用将转到服务器并正确处理，但页面会重新加载并且仅显示 JSON 字符串（无警报等）。我假设我缺少某种客户端缓存，或者类似的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:07:56.807

`document.ready`从您的视图中删除：

```
<script type="text/javascript">
    $('#formId').submit(function () {
        $.ajax({
            cache: false,
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (res) {
                if (res.success) {
                    alert("success");
                    closeDialog();
                    window.parent.specialFunction();
                } else {
                    alert("not success");
                    $('#someElement').html(res);
                }
            }
        });
        return false;
    });
</script> 
```

原因是`document.ready`当您将部分注入 DOM 时，第二次不再执行。因此，您的提交事件不再附加。请注意前面的问题：删除`document.ready`第一次加载此页面时必须将此脚本放置在标记中的表单之后的方法，它根本不会附加它。

* * *

显然，我所说的所有这些只是为了解决您当前的问题。

但您真正的问题是您正在混合标记和 HTML。永远不应该这样做。标记属于视图，脚本属于 javascript 文件。**单独**的 javascript 文件。所以你应该把它外部化到一个单独的 js 文件中。所以真正的解决方案是在一个单独的文件中使用以下脚本[`.on()`](http://api.jquery.com/on/)（或者[`.delegate()`](http://api.jquery.com/delegate/)如果您使用的是旧的 jQuery 版本，并且[`.live()`](http://api.jquery.com/live/)如果您使用的是史前版本的 jQuery）来*活跃*地订阅可能尚未出现在您的 DOM 上的元素订阅时：

```
$(document).on('submit', '#formId', function() {
    $.ajax({
        cache: false,
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function (res) {
            if (res.success) {
                alert("success");
                closeDialog();
                window.parent.specialFunction();
            } else {
                alert("not success");
                $('#someElement').html(res);
            }
        }
    });
    return false;    
}); 
```

# .net - WCF 基地址

> ID：11403895
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:04:40.377
> 
> 标签：.net, wcf

我有一个可以通过 http 或 https 访问**的wcf 服务。**它在共享主机环境中运行。

我取消了 SSL 托管。即 SSL 的私有 IP 被删除，等等。

我没有对我的配置进行任何更改。

现在，如果我只是尝试访问我的服务，例如

[http://myservice.com/myservice.svc?wsdl](http://myservice.com/myservice.svc?wsdl)

我收到以下错误：

**找不到与绑定 BasicHttpBinding 的终结点的方案 https 匹配的基地址。注册的基地址方案是 [http]。**

请注意，错误消息提到了**https**的方案。不知道为什么。

对此有任何帮助吗？

**更新配置信息：**

```
 <baseAddressPrefixFilters>
    <add prefix="http://mysite.com/"/>
  </baseAddressPrefixFilters>
</serviceHostingEnvironment>
<services>
  <service behaviorConfiguration="MySiteServiceBehavior" name="MySite.MyService">
    <clear/>
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="MySiteBasicBinding" name="MySiteBasicEndpoint"
      contract="MySite.IMyService"/>
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="MySiteBasicSslBinding" name="MySiteBasicSslEndpoint"
      contract="MySite.IMyService"/>
    <endpoint address="json" endpointConfiguration="myJson" kind="webHttpEndpoint" binding="webHttpBinding" bindingConfiguration="MySiteBasicBinding"
      name="jsonEndpoint" contract="MySite.IMyService" behaviorConfiguration="MySite.MyServiceBehavior.json"/>
    <endpoint address="json" endpointConfiguration="myJson" kind="webHttpEndpoint" binding="webHttpBinding" bindingConfiguration="MySiteBasicSslBinding"
      name="jsonSslEndpoint" contract="MySite.IMyService" behaviorConfiguration="MySite.MyServiceBehavior.json"/>
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://MySite.com/MyService.svc"/>
        <add baseAddress="https://MySite.com/MyService.svc"/> **--- still have problem with this line commented out**
      </baseAddresses>
    </host>
  </service>
</services>
<bindings>
  <basicHttpBinding>
    <binding name="MySiteBasicBinding"/>
    <binding name="MySiteBasicSslBinding">
      <security mode="Transport"/>
    </binding>
  </basicHttpBinding>
  <webHttpBinding>
    <binding name="MySiteBasicBinding"/>
    <binding name="MySiteBasicSslBinding">
      <security mode="Transport"/>
    </binding>
  </webHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="MySiteServiceBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/> **--- still have problem with httpsGetEnabled set to false**
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="MySite.MyServiceBehavior.json">
      <!--<enableWebScript/>-->
    </behavior>
  </endpointBehaviors>
</behaviors>
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="myJson" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
  </webHttpEndpoint>
</standardEndpoints> 
```

更新

我删除了任何/所有引用，甚至与 https 远程相关并且它有效。我很惊讶这是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:12:05.103

听起来您在 serviceBehaviors 中的行为元素上仍然有 httpsGetEnabled。

# ruby-on-rails - 检查 Rails 数据库查询是否返回任何内容

> ID：11403898
> 
> 赞同：2
> 
> 时间：2012-07-09T22:05:01.380
> 
> 标签：ruby-on-rails, activerecord

我想知道 Rails 数据库查询是否返回一行（我不需要知道行中有什么，只要返回一行）。

我可以做这个：

```
academic_year = AcademicYear.find_by_raw_input(year)

if academic_year 
 ...
end 
```

但如果我输入错误并执行以下操作`find_all_by`：

```
academic_year = AcademicYear.find_all_by_raw_input(year) 
```

然后返回一个空数组，这导致该`if`语句为真。

我知道，我应该小心并避免`all`调用，但是是否有一个 rails-esque 调用来查看任何查询（`all`或不是）的返回结果是否是`nil`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:11:33.160

正如你所说，`find_by_...`会回来`nil`，`find_all_by_...`还会回来`[]`。我想你要找的是[`.blank?`](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F).

```
if !academic_year.blank?
  #...
end 
```

在控制台中

```
> AcademicYear.find_by_raw_input(some_non_existent_year).blank?
  => true
> AcademicYear.find_all_by_raw_input(some_non_existent_year).blank?
  => true 
```

# css - DIV 内没有填充问题

> ID：11403900
> 
> 赞同：0
> 
> 时间：2012-07-09T22:05:18.253
> 
> 标签：css, html

```
<div id="navMenu">
    <div id="navigation_horiz">
        <ul>
            <li>
                <a href="" class="navlink">Find a Doctor</a>
            </li>
            <li>
                <a href="" class="navlink">Why Interfaith</a>
                <div class="dropdown" id="dropdown_one">
                    <div class="test" style="padding: 10px;">History & Mission</div>
                    <div class="test" style="padding: 10px;">Executive Director</div>
                    <div class="test" style="padding: 10px;">Career Opportunities</div>
                    <div class="test" style="padding: 10px;">News & Events</div>
                </div>
                <!-- .dropdown_menu -->
            </li>
            <li>
                <a href="" class="navlink">Medical Services</a>
                <div class="dropdown" id="dropdown_one">
                    <div class="test" style="padding: 10px;">
                        <a href="#">Behavioral Health</a>
                    </div>
                    <div class="test" style="padding: 10px;">Clinical Laboratory</div>
                    <div class="test" style="padding: 10px;">Dentistry</div>
                    <div class="test" style="padding: 10px;">Emergency</div>
                    <div class="test" style="padding: 10px;">Gynecology</div>
                    <div class="test" style="padding: 10px;">Medicine</div>
                    <div class="test" style="padding: 10px;">Pastoral</div>
                    <div class="test" style="padding: 10px;">Pediatrics</div>
                    <div class="test" style="padding: 10px;">Physical Medicine & Rehab</div>
                    <div class="test" style="padding: 10px;">Radiology</div>
                    <div class="test" style="padding: 10px;">Surgery</div>
                    <div class="test" style="padding: 10px;">Other Services</div>
                </div>
                <!-- .dropdown_menu -->
            </li>
            <li>
                <a href="" class="navlink">Medical Trainings</a>
                <div class="dropdown" id="dropdown_one">
                    <div class="test" style="padding: 10px;">Medical Training</div>
                    <div class="test" style="padding: 10px;">Behavioral Health</div>
                    <div class="test" style="padding: 10px;">Predoctoral Externship</div>
                    <div class="test" style="padding: 10px;">Podiatric Residency</div>
                    <div class="test" style="padding: 10px;">Dental Residency</div>
                    <div class="test" style="padding: 10px;">Pulmonary Residency</div>
                </div>
                <!-- .dropdown_menu -->
            </li>
            <li>
                <a href="" class="navlink">For Patients & Visitors</a>
                <div class="dropdown" id="dropdown_three">
                    <p>
                        <a href="#">This is a Link</a>
                    </p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin blandit
                        sodales justo, id fringilla eros dapibus vitae. Morbi molestie enim diam,
                        a vulputate neque. Morbi sit amet nunc id quam mollis aliquet. Donec sed
                        massa justo, ut congue enim. Praesent lobortis viverra dolor commodo euismod.</p>
                </div>
                <!-- .dropdown_menu -->
            </li>
            <li>
                <a href="" class="navlink">Contact Us</a>
            </li>
        </ul>
    </div>
    <!-- #navigation_horiz -->
</div>
<!-- END NAVIGATION --> 
```

我有以下CSS：

```
#navMenu { 
    width: 960px;
    height: 50px;
    border: 1px solid black;
}

    /* * {margin:0; padding:0; font-family:Arial, Helvetica, sans-serif; font-size:11px; font-weight:bold; line-height:16px} */
    .container {margin:0px auto; width:960px; background:#fff; padding:0px;}

    /* ----------------------------------------------------- */
    /* navigation styles - BEGIN */ 

    /* style for horizontal nav */  
    #navigation_horiz {width:960px; clear:both; padding:0 0 0 0; margin:0 auto}
    #navigation_horiz  ul {height:40px; display:block}
    #navigation_horiz  ul li {display:block; float:left; width:160px; height:40px; background:#999; margin:0 1px 0 0; position:relative}
    #navigation_horiz  ul li a.navlink {display:block; width:160px; height:35px; padding: 12px 0 0 0; text-align:center; color:#fff; text-decoration:none}
    #navigation_horiz .dropdown {position:absolute; padding:5px 10px 5px 10px; border-bottom-right-radius:10px; border-bottom-left-radius:10px; -moz-border-radius-bottomright:10px; -moz-border-radius-bottomleft:10px}

        /* style for each drop down - horizontal */
        #navigation_horiz ul li #dropdown_one {background:#ccc; color:#fff}
        #navigation_horiz ul li #dropdown_one a {color:red}
        #navigation_horiz ul li #dropdown_two {background:#ccc; color:#fff}
        #navigation_horiz ul li #dropdown_two a {color:black}
        #navigation_horiz ul li #dropdown_three {background:#ccc; color:#fff}   
        #navigation_horiz ul li #dropdown_three a {color:gray} 
```

由于某种原因，UL 列表位于中心，而不是从 DIV 的 LEFT 开始并一直延伸到右侧。你可以在这里看到它的样子：http: [//i46.tinypic.com/2wnz7g1.gif](http://i46.tinypic.com/2wnz7g1.gif)

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:12:28.490

应用`margin:0`（而不是`margin: 0 1px 0 0`）到**#navigation_horiz ul li**以及**#navigation_horiz ul**（假设您没有使用 css 重置；也添加`padding:0`到 ul 中。）

这里：[jsFiddlyFooFoo](http://jsfiddle.net/fLsmK/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:17:41.290

ul 默认有 40px padding-left，设置 padding: 0; 它将固定水平位置。

```
ul { padding: 0; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:26:42.470

用户代理样式通常有填充和边距，`ul`只需删除它们

```
#navMenu ul{
    padding: 0;
    margin: 0;
} 
```

此外，您`li`占用的宽度比`ul`它包裹的宽度更大，您为每个添加 1px 大小，`li`因此 1x6=6 额外像素

[http://jsfiddle.net/EJttX/1/](http://jsfiddle.net/EJttX/1/)

# html - 将应用程序开发为可移植到 ios 和 Android 的网站

> ID：11403902
> 
> 赞同：0
> 
> 时间：2012-07-09T22:05:30.223
> 
> 标签：html, ios, offline

我正在考虑编写一个简单的 android 应用程序，它只包含我为工作所做的笔记，供我个人参考。我想也许我的一些同事也想使用这个应用程序，但他们中的大多数人都使用 iPhone。我没有任何 Apple 产品，对 iOS 开发一无所知。经过一些研究，我决定也许最好的方法是将“应用程序”开发为一个网站，以便离线查看。这种方法是否有意义，我可以在 Apple 设备上分发这样的产品而没有任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:13:26.050

我建议使用[PhoneGap](http://phonegap.com/)开发离线应用程序。PhoneGap 允许您使用网络标准构建您的应用程序一次，用 PhoneGap 包装它，然后将其部署到多个移动平台。

# ruby-on-rails - 更改 Rails 控制器的功能，同时保持遗留代码和路由不变的最佳实践是什么？

> ID：11403903
> 
> 赞同：0
> 
> 时间：2012-07-09T22:05:36.473
> 
> 标签：ruby-on-rails, model-view-controller, controller, routes

我有一个使用 RESTful API 返回一些 XML 数据的 Web 服务。我将使用完全不同的控制器代码实现一个新数据库，该数据库将在某个日期后生效。但是任何对旧数据的 WS 调用仍应使用旧数据库。

现在，部分 URL 包含日期。我在控制器的开头解析它，然后转到旧功能或新功能。

```
def web_service_action

  #shared code between old and new methods
  @some_instance_variables = ...

  # check the date and fork appropriately
  if use_new?
    web_service_action_new
  else
    web_service_action_old
  end

  def use_new?
    date_match = params[:id_string].match(/^.*([0-9]{8})$/)
    matched_date = date_match[1]
    date = Time.local(date_match[0,4],date_match[4,2],date_match[6,2])
    if date >= DATE_CONSTANT
      return true
    else
      return false
    end  
  end

end 
```

我想知道是否有一种聪明的方法可以通过路由文件中的 before_filter 或条件来做到这一点？

附加信息：我使用的是旧版本的 Rails (2.3.x)，新方法是完全重写，而不是增量更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:26:22.960

首先，我建议在[REST API 版本控制](http://railscasts.com/episodes/350-rest-api-versioning)上观看 Ryan Bates 的 railscast 。他很好地解释了如何在维护 BC 的同时管理应用程序中的 API 更改。

# python - Python 在大量数字中寻找模式？

> ID：11403905
> 
> 赞同：4
> 
> 时间：2012-07-09T22:05:52.423
> 
> 标签：python, pattern-matching

我正在处理一个列表列表，其中每个列表中都有非完美平方根的连分数周期。

我试图用它们做的是检查每个列表中最大重复模式的大小。

例如一些列表：

```
[
 [1,1,1,1,1,1....],
 [4,1,4,1,4,1....],
 [1,2,10,1,2,10....],
 [1,1,1,1,1,4,1,4,1,20,9,8,1,1,1,1,1,4,1,4,1,20,9,8....],
 [2,2,2,4,2,2,2,4....],
 [1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15,1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15....],
 [1,1,1,3,28,1,1,1,3,28,67,25,1,1,1,3,28,1,1,1,3,28,67,25....]
] 
```

我一直在使用的两种类似方法是：

```
def lengths(seq):
    for i in range(len(seq),1,-1):
        if seq[0:i] == seq[i:i*2]:
            return i

def lengths(seq):
    for i in range(1,len(seq)-1):
        if seq[0:i] == seq[i:i*2]:
            return i 
```

它们都采用列表的大小并从当前位置比较它的索引大小。问题是第一个仅针对一个重复数字返回错误，因为它开始很大并且看到的只是一个大模式。第二个的问题是存在嵌套模式，如第六个和第七个示例列表，它将满足嵌套循环并忽略模式的其余部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:54:24.943

作品（在您的样本的第 4 个元素中发现了一个错字）

```
>>> seq_l = [
...  [1,1,1,1,1,1],
...  [4,1,4,1,4,1],
...  [1,2,10,1,2,10],
...  [1,1,1,1,1,4,1,4,1,20,9,8,1,1,1,1,1,4,1,4,1,20,9,8],
...  [2,2,2,4,2,2,2,4,2,2,2,4,2,2,2,4],
...  [1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15,1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15],
...  [1,1,1,3,28,1,1,1,3,28,67,25,1,1,1,3,28,1,1,1,3,28,67,25]
... ]
>>> 
>>> def rep_len(seq):
...     s_len = len(seq)
...     for i in range(1,s_len-1):
...         if s_len%i == 0:
...             j = s_len/i
...             if seq == j*seq[:i]:
...                 return i
...                 
... 
>>> [rep_len(seq) for seq in seq_l]
[1, 2, 3, 12, 4, 18, 12] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:00:41.053

如果将列表转换为字符串并非不可行，那么使用正则表达式将使这成为一项微不足道的任务。

```
import re

lists = [
    [1,1,1,1,1,1],
    [4,1,4,1,4,1],
    [1,2,10,1,2,10],
    [1,1,1,1,1,4,1,4,1,20,9,8,1,1,1,1,1,4,1,4,1,20,9,8], #I think you had a typo in this one...
    [2,2,2,4,2,2,2,4],
    [1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15,1,1,1,13,21,45,3,3,1,16,4,1,4,1,1,1,24,15],
    [1,1,1,3,28,1,1,1,3,28,67,25,1,1,1,3,28,1,1,1,3,28,67,25]
]

for l in lists:
    s = "x".join(str(i) for i in l)
    print s
    match = re.match(r"^(?P<foo>.*)x?(?P=foo)", s)
    if match:
        print match.group('foo')
    else:
        print "****"
    print 
```

`(?P<foo>.*)`创建一个称为“foo”的组并`(?P=foo)`与之匹配。由于正则表达式是贪心的，默认情况下你会得到最长的匹配。“x？” 只允许中间有一个 x 来处理偶数/奇数长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:13:58.483

你可能可以做一个 collections.defaultdict(int) 来记录所有子列表的数量，除非你知道有一些你不关心的子列表。在制作字典键之前将子列表转换为元组。

不过，如果空间有限，您也许可以使用一系列布隆过滤器到达某个地方。您将有一个用于长度为 1 的子序列的布隆过滤器，另一个用于长度为 2 的子序列等。然后，发生冲突的最大布隆过滤器具有您的最大长度子列表。

[http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/](http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:41:13.630

从第一个示例方法开始，您可以递归地搜索子模式。

```
def lengths(seq):
    for i in range(len(seq)-1,1,-1):
        if seq[0:i] == seq[i:i*2]:
            j = lengths(seq[0:i]) # Search pattern for sub pattern
            if j < i and i % j == 0: # Found a smaller pattern; further, a longer repeated
                # pattern length must be a multiple of the shorter pattern length
                n = i/j # Number of pattern repetitions (might change to // if using Py3K)
                for k in range(1, n): # Check that all the smaller patterns are the same
                    if seq[0:j] != seq[j*n:j*(n+1)]: # Stop when we find a mismatch
                        return i # Not a repetition of smaller pattern
                else: return j # All the sub-patterns are the same, return the smaller length
            else: return i # No smaller pattern 
```

我觉得这个解决方案不太正确，但我会做一些测试并根据需要进行编辑。（快速说明：最初的 for 循环不应该从 len(seq)-1 开始吗？如果不是，您将 seq[0:len] 与 seq[len:len] 进行比较，这看起来很愚蠢，并且会导致递归循环无限地。）

编辑：似乎有点类似于发布的相关问题 senderle 中的[最佳答案](https://stackoverflow.com/questions/10441715/finding-a-repeating-sequence-at-the-end-of-a-sequence-of-numbers?answertab=active#tab-top)，所以你最好去读一下。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T22:35:01.063

我认为你只需要一次检查两个级别的序列。`0..i == i..i*2`和`0..i/2 != i/2..i`。

```
def lengths(seq):
    for i in range(len(seq),1,-1):
        if seq[0:i] == seq[i:i*2] and seq[0:i/2] != seq[i/2:i]:
            return i 
```

如果 的两半`0..i`相等，则意味着您实际上是在比较两个连接的模式。

# ios - Xcode 中的委托

> ID：11403907
> 
> 赞同：1
> 
> 时间：2012-07-09T22:06:13.187
> 
> 标签：ios, xcode, delegates

当用户按下“添加”按钮时，会弹出一个模式视图供他们输入信息。我在导航栏的左上角有一个“取消”按钮，我希望它在按下时关闭当前的视图控制器。如何将对象设置为类的委托？我了解创建协议并实现其方法，但我似乎无法设置委托。在“添加”视图控制器中运行调试器时，我`[self delegate]`始终是`nil`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:09:12.893

如果您在 IB 中创建了视图，按住 Control 键将该按钮拖动到 ViewController 的头文件中并添加一个 IBOutlet。在 .m 文件中的该方法中，您可以

`[self dismissModalViewControllerAnimated:YES];`

或者，您可以以编程方式创建按钮：

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(processCancel:)];

-(void)processCancel:(UIBarButtonItem *)item{
     [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:13:43.133

您是否通过情节提要中设置的 segue 生成模态视图控制器？如果是这样，那么在该`prepareForSegue:`方法中您将在那里设置委托。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{ 
    if([identifier isEqualToString:@"userGuideSegue_home"]){
        UserGuideViewController* vc = segue.destinationViewController;
          [[segue destinationViewController] setDelegate:self];
    }

} 
```

另一方面，如果您完全通过代码设置模态视图控制器，那么您将创建模态视图控制器的一个实例，然后将其设置为委托。

```
- (void)showModelView:(NSString*)viewName
{
    // code ripped out of project so a bit specific

    if ([viewName isEqualToString:@"userGuide_name"]) {
        modalViewController = (UserGuideViewController * )
        [[UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:NULL] 
         instantiateViewControllerWithIdentifier:@"UserGuide"];
    }

    modalViewController.delegate = self;
    modalViewController.modalPresentationStyle = UIModalPresentationFormSheet;
    modalViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    modalViewController.view.frame = [[UIScreen mainScreen] applicationFrame];; 

    [self presentViewController:modalViewController 
                       animated:YES 
                     completion:^{
                         //put your code here
                     }];
} 
```

当然，所有这些都假设您已经`delegate`在模态视图控制器上定义了一个属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:13:58.473

```
@interface MyViewController : UIViewController {
  id delegate;
}
@property (nonatomic,retain) id delegate;
@synthesize delegate; 
```

这应该可以完成这项工作，您现在可以`[MyViewController setDelegate:self]`在显示模态视图之前使用并`[[self delegate] dismissModalViewControllerAnimated:YES]`在取消按钮点击事件中调用`MyViewController`

# c# - 将列表视图项与 C# 中的数组列表匹配

> ID：11403913
> 
> 赞同：0
> 
> 时间：2012-07-09T22:06:57.870
> 
> 标签：c#, listview, arraylist, hashtable

我有一个`ArrayList`包含一些`HashTables`的，我有一个`ListView`包含一些项目的。

我需要的是将数组列表与列表项匹配。

如果列表视图中的项目而不是数组列表中的项目，则应将其从列表视图中删除。

如果不在列表视图或数组列表中，则将其添加到列表视图。

这是一些代码：

```
 ArrayList online_list = users;
 foreach (Hashtable i in online_list)
            {
                    ListViewItem item = new ListViewItem();
                    item.Text = (string)i["u_name"];
                    item.Name = (string)i["id"];
                    item.ImageIndex = 0;
                    lstvUsers.Items.Add(item);
            } 
```

此代码将所有数组列表项添加到列表视图中，无需检查！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:16:46.593

您可以首先[`clear`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.clear.aspx)将 的所有项目`ListView`，然后将所有项目添加到`ArrayList`：

```
lstvUsers.Clear();
foreach (Hashtable i in online_list)
{
    ListViewItem item = new ListViewItem();
    item.Text = (string)i["u_name"];
    item.Name = (string)i["id"];
    item.ImageIndex = 0;
    lstvUsers.Items.Add(item);
} 
```

您应该使用[`ListView.Clear`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.clear.aspx)而不是`ListView.Items.Clear`：[https ://stackoverflow.com/a/10170049/284240](https://stackoverflow.com/a/10170049/284240)

**编辑**：由于您坚持只想从 ListView 中删除不在 ArrayList 中的项目，并添加不在 ListView 但在 ArrayList 中的项目。这种方法的效率要低得多，因为您需要将 ListView 中的每个项目与 ArrayList 中的每个项目进行比较（反之亦然），而不是什么都不比较。

例如：

```
var addItems =  online_list
    .Cast<Hashtable>()
    .Where(ht => !lstvUsers.Items.ContainsKey((string)ht["id"]));
var removeItems = lstvUsers.Items
    .Cast<ListViewItem>()
    .Where(lvi => !online_list.Cast<Hashtable>().Any(ht => (string)ht["id"] ==lvi.Name));

foreach (var removeItem in removeItems)
{
    lstvUsers.Items.Remove(removeItem);
}
foreach (var addHashTable in addItems)
{
    ListViewItem item = new ListViewItem();
    item.Text = (string)addHashTable["u_name"];
    item.Name = (string)addHashTable["id"];
    lstvUsers.Items.Add(item);
} 
```

# linux-kernel - 一个中断处理程序可以被同一个中断处理程序抢占吗？

> ID：11403915
> 
> 赞同：7
> 
> 时间：2012-07-09T22:07:00.707
> 
> 标签：linux-kernel, linux-device-driver

CPU 是否在调用中断处理程序之前禁用本地 CPU 上的所有中断？或者它是否只禁用正在服务的特定中断线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T06:46:04.097

x86 在跳转到中断向量之前禁用所有本地中断（当然 NMI 除外）。Linux 通常屏蔽特定中断并重新启用其余中断（未屏蔽），除非将特定标志传递给中断处理程序注册。

请注意，虽然这意味着您的中断处理程序不会在同一个 CPU 上与自身竞争，但它可以并且将与在 SMP / SMT 系统中的其他 CPU 上运行的自身竞争。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:33:28.193

通常（至少在 x86 中），中断会禁用中断。

当收到中断时，硬件会做这些事情：
1\. 将所有寄存器保存在预定位置。
2\. 将指令指针（AKA 程序计数器）设置为中断处理程序的地址。
3\. 将控制中断的寄存器设置为禁用所有（或大部分）中断的值。这可以防止另一个中断中断这个中断。

一个例外是不能被禁用的 NMI（不可屏蔽中断）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:12:21.060

是的，没关系。我还想添加我认为可能相关的内容。

在许多现实世界的驱动程序/内核代码中，经常使用“下半部分”（bh）处理程序——tasklet、softirqs。这些 bh 在中断上下文中运行，并且*可以*与 SMP（尤其是软中断）上的上半部分（th）处理程序并行运行。

当然，最近有一个向主线移动（主要是从 PREEMPT_RT 项目迁移的代码），它基本上摆脱了“bh”机制——所有中断处理程序都将在所有中断禁用的情况下运行。不仅如此，处理程序（可以）转换为内核线程——这些是所谓的“线程”中断处理程序。

直到今天，选择仍然留给开发人员——您可以使用“传统”th/bh 样式或线程样式。

参考和详细信息：

[http://lwn.net/Articles/380931/](http://lwn.net/Articles/380931/)

[http://lwn.net/Articles/302043/](http://lwn.net/Articles/302043/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T14:30:56.020

引用 Intel 自己写得非常出色的“Intel® 64 and IA-32 Architectures Software Developer's Manual”，第 1 卷，第 6-10 页：

> 如果通过中断门调用中断或异常处理程序，处理器将清除 EFLAGS 寄存器中的中断使能 (IF) 标志，以防止后续中断干扰处理程序的执行。当通过陷阱门调用处理程序时，IF 标志的状态不会改变。

所以要清楚 - 是的，CPU在调用中断处理程序之前有效地“禁用”了所有中断。正确描述，处理器只是触发一个标志，使其忽略所有中断请求。除了可能不可屏蔽的中断和/或它自己的软件异常（请有人纠正我，**未验证**）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-22T11:50:24.807

我们希望 ISR 是原子的，没有人应该能够抢占 ISR。

因此，ISR 会禁用本​​地中断（即当前处理器上的中断），并且一旦 ISR 调用 ret_from_intr() 函数（即我们完成了 ISR），当前处理器上的中断就会再次启用。

如果发生中断，它将由另一个处理器（在 SMP 系统中）提供服务，并且与该中断相关的 ISR 将开始运行。

在 SMP 系统中，我们还需要在 ISR 中包含适当的同步机制（自旋锁）。

# r - 如何查找data.frame行子集中的所有元素是否为TRUE

> ID：11403919
> 
> 赞同：5
> 
> 时间：2012-07-09T22:07:35.297
> 
> 标签：r

我有一个带有逻辑列块的data.frame，例如

```
> tmp <- data.frame(a=c(13, 23, 52),
+                   b=c(TRUE,FALSE,TRUE),
+                   c=c(TRUE,TRUE,FALSE),
+                   d=c(TRUE,TRUE,TRUE))
> tmp
   a     b     c    d
1 13  TRUE  TRUE TRUE
2 23 FALSE  TRUE TRUE
3 52  TRUE FALSE TRUE 
```

我想计算一个汇总列（例如：e），它`AND`在整个逻辑列范围内都是逻辑的。换句话说，对于给定的行，如果所有 b:d 都是`TRUE`，那么 e 将是`TRUE`; 如果有任何 b:d 是`FALSE`，那么 e 将是`FALSE`。

我的预期结果是：

```
> tmp
   a     b     c    d     e
1 13  TRUE  TRUE TRUE  TRUE
2 23 FALSE  TRUE TRUE FALSE
3 52  TRUE FALSE TRUE FALSE 
```

我想通过索引来表示列的范围，因为我有一堆列，而且名称很麻烦。以下代码有效，但我宁愿使用矢量化方法来提高性能。

```
> tmp$e <- NA
> for(i in 1:nrow(tmp)){
+     tmp[i,"e"] <- all(tmp[i,2:(ncol(tmp)-1)]==TRUE)
+ }
> tmp
   a     b     c    d     e
1 13  TRUE  TRUE TRUE  TRUE
2 23 FALSE  TRUE TRUE FALSE
3 52  TRUE FALSE TRUE FALSE 
```

有什么方法可以在不使用`for`循环遍历data.frame的行的情况下做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T22:26:54.027

您可以使用`rowSums`遍历行...和一些花哨的步法使其准自动化：

```
# identify the logical columns
boolCols <- sapply(tmp, is.logical)
# sum each row of the logical columns and
# compare to the total number of logical columns
tmp$e <- rowSums(tmp[,boolCols]) == sum(boolCols) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:48:34.917

通过在 ifelse 语句中使用 rowSums，可以一次性实现：

```
tmp$e <- ifelse(rowSums(tmp[,2:4] == T) == 3, T, F) 
```

# java - 如何决定在java中创建合适的线程数？

> ID：11403920
> 
> 赞同：4
> 
> 时间：2012-07-09T22:07:53.440
> 
> 标签：java, multithreading

我有一个使用远程主机创建 SSL 套接字的 java 应用程序。我想使用线程来加速这个过程。

我想要不影响程序性能的最大可能利用率。如何确定要使用的合适线程数？运行以下行后：`Runtime.getRuntime().availableProcessors();`我得到了 4。我的处理器是 Intel core i7，具有 8 GB RAM。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:16:17.330

如果您有 4 个内核，那么理论上您应该在任何给定时间恰好有四个工作线程运行以实现最大优化。不幸的是，理论上发生的事情在实践中从未发生过。您可能有工作线程，无论出于何种原因，它们都有大量的停机时间。也许他们正在上网获取更多数据，或者从磁盘读取，其中大部分只是在等待而不是使用 CPU。

根据你等待的时间，你会想要增加这个数字。增加线程数量的代价是您将有更多的上下文切换和资源竞争。好处是您将准备好另一个线程以防万一其他线程决定它必须中断某些事情。

您最好的选择是将其设置为某个值（让我们从 4 开始）并逐步上升。使用每个设置分析您的代码，并查看您的基准是上升还是下降。您应该很快就会看到一个模式和一个盈亏平衡点。

在优化方面，您可以根据您想要的所有关于什么应该是最快的理论化，但是您不会击败实际运行和计时您的代码来真正回答这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:16:38.530

正如 DarthVader 所说，您可以使用 ThreadPool ( `CachedThreadPool`)。使用此构造，您不必指定具体的线程数。

从[甲骨文](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)网站：

*   newCachedThreadPool 方法创建一个带有可扩展线程池的执行器。此执行器适用于启动许多短期任务的应用程序。

也许这就是你要找的。关于核心数量很难说。你有 4 个超线程核心，至少一个核心应该留给你的操作系统。我会说 4-6 线程。

# database - JPA - 计算列作为实体类属性？

> ID：11403924
> 
> 赞同：6
> 
> 时间：2012-07-09T22:08:43.550
> 
> 标签：database, hibernate, jakarta-ee, jpa

JPA 相对较新，所以我有一种架构问题。假设我有具有多对一关系的表 EMPLOYEE 和 DEPARTMENT（即许多员工为一个部门工作）：

```
EMPLOYEE
  EMPLOYEE_ID
  EMPLOYEE_NAME
  DEPARTMENT_ID 

DEPARTMENT
  DEPARTMENT_ID
  DEPARTMENT_NAME 
```

所以我可以为员工和部门定义适当的实体，没有问题。但是，在一个视图中，我想显示为该部门工作的员工人数的部门列表，如下所示：

```
SELECT D.DEPARTMENT_NAME, 
       (SELECT COUNT(*) FROM EMPLOYEE E WHERE E.DEPARTMENT_ID = D.DEPARTMENT_ID) NUMBER_OF_EMPLOYEES
FROM DEPARTMENT D 
```

我只是不确定使用 JPA 完成此任务的正确策略是什么……我不想总是为部门实体获取员工人数，因为在需要时只有一个视图。

看起来 Hibernate 的 @Formula 将是一种可能的方法，但是 afaik 它不符合 JPA 标准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T23:25:24.290

您可以使用“new”语法在 QL 中创建任何对象——您的类只需要一个构造函数，该构造函数接受查询返回的值。

例如，对于像 DepartmentEmployeeCount 这样的类，具有构造函数：

```
public DepartmentEmployeeCount(String departmentName, Integer employeeCount) 
```

你可以使用 QL 之类的东西：

```
SELECT NEW DepartmentEmployeeCount(D.DEPARTMENT_NAME, count(E.id)) from Department D left join D.employees E GROUP BY D.DEPARTMENT_NAME 
```

或者，如果您只是选择 count(*)，您可以简单地将查询结果转换为数字。

或者，要在没有 DepartmentEmployeeCount 类的情况下执行相同操作，您可以省略 NEW，因此：

```
SELECT D.DEPARTMENT_NAME, count(E.id) 
```

这将返回一个`List<Object[]>`其中每个列表项是 2 个元素的数组，departmentName 和 count。

要在评论中回答您后面的问题，要填充部门的所有字段以及临时的employeeCount 字段，一个建议是进行 2 次查询。这仍然比您的原始查询（每个员工计数的子选择）更有效。

所以一个查询来阅读部门

```
SELECT D from Department D 
```

给你一个`List<Department>`

然后第二个查询返回一个临时数组：

```
SELECT D.DEPARTMENT_ID, count(E.id) from Department D left join D.employees E GROUP BY D.DEPARTMENT_ID 
```

给你一个`List<Object[]>`DEPARTMENT_ID 并计算在内。

然后使用第二个列表更新第一个列表上的瞬态计数属性。（您可以尝试选择 Map 以使此查找更容易，但我认为这是 Hibernate 功能）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T04:53:42.127

选项 1：我建议这样做是因为您不喜欢 MattR 建议的构造函数路线。您多次提到“视图”这个词，我知道您在向用户谈论视图，但为什么不在您的数据库中设置一个包含计算列的视图，然后创建一个映射到计算列的只读实体列？

选项 2：回应您关于不想创建视图的评论。您可以创建一个包含实体和计算列的容器对象，然后就像 MattR 建议的那样，您在选择中使用新的。就像是：

```
public class DepartmentInfo {
    private Department department;

    // this might have to be long or something
    // just see what construct JPA tries to call
    private int employeeCount;

    public DepartmentInfo( Department d, int count ) { 
        department = d;
        employeeCount = count;
    }
    // getters and setters here
} 
```

然后你的选择变成

```
SELECT new my.package.DepartmentInfo( D, 
       (SELECT COUNT(*) FROM EMPLOYEE E WHERE E.DEPARTMENT_ID = D.DEPARTMENT_ID))
FROM DEPARTMENT D 
```

有了它，您可以使用 DepartmentInfo 来获取您感兴趣的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-05T00:17:11.457

您可以在实体中创建一个成员作为附加列，然后在查询中使用别名引用它。`@Column`注释中的列名必须与别名匹配。

说，对于您的原始查询，您可以添加一个`countEmployees`成员，如下所示。还要添加`insertable=false`，`updatable=false`因此实体管理器不会尝试将其包含在插入或更新语句中：

```
public class Department {

    @Column(name="DEPARTMENT_ID")
    Long departmentId;

    @Column(name="DEPARTMENT_NAME")
    String departmentName;

    @Column(name="countEmployees", insertable=false, updatable=false)
    Long countEmployees;

    //accessors omitted

} 
```

你的查询：

```
SELECT D.DEPARTMENT_NAME, 
(SELECT COUNT(*) FROM EMPLOYEE E WHERE E.DEPARTMENT_ID = D.DEPARTMENT_ID) AS countEmployees
FROM DEPARTMENT D 
```

这也适用于使用 Spring Data Jpa Repositories 时。

# sas - SAS：使用多个数据集的盒须图

> ID：11403925
> 
> 赞同：0
> 
> 时间：2012-07-09T22:08:48.897
> 
> 标签：sas, boxplot

我的目标是使用来自多个数据集的数据创建一个盒须图。重要提示：数据集的大小不一样 - 我不确定这是否会成为问题。我正在尝试以下代码：

```
 %macro plot;
    %do i=1 %to 10;
    ods graphics on;
    title 'Box Plot for Durations';
    proc boxplot data=d&i; /*where d&i refers to my datasets*/
    plot durations / *HERE I am also having some difficulties because I have to refer to a y(durations)*x values. But I only have a y(durations) the one I want to boxplot - my x corresponds to the different datasets where I take the value. 
         boxstyle = schematic
         nohlabel;
      label durations = 'Durations';
   run;
    %end;
    %mend plot;
   %plot; 
```

我希望我的`x`值引用我将持续时间值用于箱线图的每个数据集。每个`d1 d2 d3...d10`都是对应于 10 家不同公司的 10 个不同数据集。因此，我希望在一张图中有 10 个箱线图……有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:38:21.197

我认为最好的办法是简单地从我的数据集中获取我希望绘制的所有数据并将它们合并到一个文件中。`id`在合并数据之前，我创建了一个与每个数据集关联的唯一值。然后很容易通过执行以下操作来绘制数据：

```
title 'Box Plot for Durations';
    proc boxplot data=ALL_DATA; 
    plot boxplotdata*id / 
         boxstyle = schematic
         nohlabel;
      label durations = 'Durations';
   run; 
```

# edi - 寻找资源来理解/学习西班牙语的 EDI 消息

> ID：11403926
> 
> 赞同：0
> 
> 时间：2012-07-09T22:09:00.123
> 
> 标签：edi, edifact

那么，有人知道了解 EDI 消息的好资源吗？（例如消息 856 (ASN)）。我想要西班牙语的资源，但英语也可以接受，用于虚拟人，博客，书籍/电子书，文档等......一步一步，我们可能会在几个月后开始与他们合作，并且我们真的迷路了，我们有来自客户的文档，但是如果您知道一个好的来源，可以通过，从哪里开始，将受到欢迎。

我刚刚找到了FrameworkEDI [www.edidev.co](http://www.edidev.co)

有什么推荐吗？有人用它工作过吗？

致以我的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:39:18.730

我很困惑：您标记了 edifact，但您引用了 ANSI X12 文档 (856)。您正在使用哪个标准？

EDI 的 A 到 Z：

[http://www.amazon.com/EDI-Its-Role-E-Commerce/dp/1882419162/ref=sr_1_2?ie=UTF8&qid=1341941255&sr=8-2&keywords=EDI+A+to+Z](https://rads.stackoverflow.com/amzn/click/com/1882419162)

当您选择翻译人员时，您通常可以获得有关如何翻译数据的手册。也许您正在寻找可以提供帮助的商业级翻译产品。市场上有数百种。试试这个： http: [//liaison.com/products/transform/delta](http://liaison.com/products/transform/delta)

[从 Liaison ( http://liaison.com/products/integrate/edi-notepad](http://liaison.com/products/integrate/edi-notepad) )下载 EDI 记事本该工具将帮助您查看并理解 EDI 数据。

EDIFACT wiki 可能会有所帮助，因为它根据段和元素进行讨论：[http ://en.wikipedia.org/wiki/EDIFACT](http://en.wikipedia.org/wiki/EDIFACT)

[http://ediacademy.com/EdiQuiz.html](http://ediacademy.com/EdiQuiz.html)

# vim - 如何在vim中用抽出的行替换搜索到的行？

> ID：11403929
> 
> 赞同：3
> 
> 时间：2012-07-09T22:09:17.083
> 
> 标签：vim

如果我有一个文件：

```
aaa / new replacement line
AAA / old target line
random line
random line 
BBB / old target line
CCC / old target line 
```

在此示例中，有 4 个替换项，因此最终文件应如下所示：

```
aaa / new replacement line
aaa / new replacement line
random line
random line 
aaa / new replacement line
aaa / new replacement line 
```

我尝试在下面给出答案，但也希望看到您对此的意见。也许我不知道有一种更成功的“vim 高尔夫”方法。也许我真的很笨，有一个简单的命令。

基本上，问题是这样的：如果我将一条线拉入寄存器，我如何完全替换匹配“旧目标行”的搜索行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T22:22:17.073

用于`0y$`拉出您的替换行 - 这不包括换行符。

然后使用：

```
%s/.*old target line.*/\=@" 
```

用寄存器的内容替换目标行`unnamed`，其中将包含最后一个 yank。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:09:17.473

我首先使用 'aaa / new replacement line'`"aY`保存到寄存器 a

然后我使用以下内容删除回车符，从[vim中的寄存器中删除换行符？](https://stackoverflow.com/questions/6228079/remove-newlines-from-a-register-in-vim)：

```
:let @a=substitute(strtrans(@a),'\^@',' ','g') 
```

或者，我可以简单地使用视觉选择`v`并抓住线而不返回（这更容易）。

然后我可以使用全局命令来执行替换：

```
:g/old target line/s/.*/\=@a 
```

# sql - "||" 和有什么不一样 Oracle中的运算符和concat函数？

> ID：11403931
> 
> 赞同：12
> 
> 时间：2012-07-09T22:09:24.383
> 
> 标签：sql, database, oracle

能否解释一下Oracle中`concat()`函数和运算符的区别？`||`

哪一个在性能方面更好？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T22:18:48.903

没有功能上的区别。

`||`是 ANSI 标准字符串连接运算符（但不幸的是，并非每个数据库都`<cough>SQL Server</cough>`选择支持该标准）。许多数据库都支持一个`CONCAT`函数，因此将代码移植`CONCAT`到不同的数据库可能会更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T23:23:47.303

'concat' 函数只能对 2 个变量或列进行操作，而 'concat' 操作可以对任意数量的变量或列进行。

# python - Python AttributeError：“模块”对象没有属性“序列”

> ID：11403932
> 
> 赞同：155
> 
> 时间：2012-07-09T22:09:25.193
> 
> 标签：python, serial-port, raspberry-pi

我正在尝试在运行 Debian 的 Raspberry Pi 上使用 Python 2.6 访问串行端口。我的脚本名为`serial.py`尝试导入 pySerial：

```
import serial
ser = serial.Serial('/dev/ttyAMA0', 9600)
ser.write("hello world!") 
```

由于某种原因，它拒绝建立与此错误的串行连接：

```
AttributeError: 'module' object has no attribute 'Serial' 
```

当我尝试在交互式 Python 解释器中键入相同的代码时，它仍然不起作用。

奇怪的是，它曾经在大约几个小时前工作过。

可能是什么问题呢？我试图解决这个问题一段时间，再次安装 pySerial，重写我的代码，仔细检查串口等。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-08-08T21:19:10.737

我正在为与我犯相同错误的人添加此解决方案。

在大多数情况下：重命名您的项目文件“serial.py”并删除serial.pyc（如果存在），那么您可以执行简单的“导入序列”而不会出现属性错误。

当您的 python 文件名为“something.py”时，当您导入“某物”时会出现问题。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2017-10-30T13:27:01.040

我不小心安装了 'serial' ( `sudo python -m pip install serial`) 而不是 'pySerial' ( `sudo python -m pip install pyserial`)，这导致了同样的错误。

如果前面提到的解决方案对您不起作用，请仔细检查您是否安装了正确的库。

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2012-07-09T22:21:46.857

您正在导入模块，而不是类。所以，你必须写：

```
from serial import Serial 
```

您需要`serial`正确安装模块：`pip install pyserial`.

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2018-03-22T04:35:30.267

您安装了**名为“ *serial* ”**的错误包。

*   `pip uninstall serial`为 python 2.x 或`pip3 uninstall serial` python 3.x运行
*   如果尚未安装***pyserial***`pip install pyserial` ，则通过运行python 2.x 或`pip3 install pyserial`python 3.x来安装。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-03-05T17:06:37.047

这个问题是因为你的项目被命名为 serial.py 并且导入的库也被命名为 serial ，更改名称就可以了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-01T15:16:32.100

如果你像我一样无助，试试这个：

使用此处描述的方法列出“串行”（或您遇到问题的任何包）的所有子模块： [列出作为 python 包一部分的所有模块](https://stackoverflow.com/questions/1707709/list-all-the-modules-that-are-part-of-a-python-package)

就我而言，问题一个接一个地解决了。

...在我看来像一个错误...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-13T18:57:20.833

如果您有循环依赖项，也会发生此错误。检查您的进口并确保您没有任何周期。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-12T08:41:40.237

是的，这个话题有点老了，但我想为那些可能需要它的人分享对我有用的解决方案

正如阿里所说，尝试使用终端中的以下内容找到您的程序：

```
 sudo python3
 import serial 
```

`print(serial.__file__)` **--> 复制**

`CTRL+D #(to get out of python)`

`sudo python3`**-->粘贴**`/__init__.py`

激活`__init__.py`将对您的程序说“好的，我将使用来自 python3 的串行”。我的问题是我的 python3 程序使用的是来自 python 2.7 的 Serial

其他解决方案：删除其他python版本

曹

资料来源： [https ://raspberrypi.stackexchange.com/questions/74742/python-serial-serial-module-not-found-error/85930#85930](https://raspberrypi.stackexchange.com/questions/74742/python-serial-serial-module-not-found-error/85930#85930)

努力

# jquery - Javascript/JQuery - 如果未满足超时延迟，请勿在 setTimeout 内调用该函数

> ID：11403933
> 
> 赞同：1
> 
> 时间：2012-07-09T22:09:36.187
> 
> 标签：jquery, settimeout, delay

我正在尝试在悬停时显示帮助提示之前设置延迟。但是，我面临的问题是，一旦用户的鼠标触摸 HTML 元素并快速移动，它仍然会在 500ms 结束后显示帮助提示。我只想在鼠标悬停 500 毫秒时显示悬停提示。如果它在 500 毫秒之前离开该区域，那么它不应该显示悬停提示。你能帮忙吗？这是代码片段。请不要说我知道现有的插件，如 hoverIntent 等，但由于我在我的功能中做了很多自定义的事情，我不想避免使用插件并简单地调整我的自制解决方案。提前感谢您的建议。

这是代码片段

```
function displayTip(displayText, displayElement)
{
 // some sanity check code here
 setTimeout(function() {introduceDelay(displayText, displayElement) } ,500);    
} 
```

我想要实现的是，如果用户的鼠标没有悬停在给定的 html 元素上 500 毫秒，那么根本不会调用引入延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:10:55.587

保存返回值`setTimeout()`，然后在“mouseleave”处理程序中，用`clearTimeout`.

```
var timer;
function displayTip(displayText, displayElement)
{
 // some sanity check code here
 timer = setTimeout(function() {introduceDelay(displayText, displayElement) } ,500);    
}   

// ...

$('whatever').mouseleave(function() {
  clearTimeout(timer);
}); 
```

你真的不必担心检查它已经多久了。如果您`clearTimeout()`使用已触发的计时器 ID 调用，则不会发生任何不好的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:12:42.397

```
var timer;

$("element").mouseenter(function(){
    timer = setTimeout(function(){
        //show help box
    }, 500);
});

$("element").mouseleave(funciton(){
    clearTimeout(timer);
}); 
```

# three.js - Three.js：在不同的电脑上做多灯环境的不同灯光效果

> ID：11403936
> 
> 赞同：0
> 
> 时间：2012-07-09T22:09:49.083
> 
> 标签：three.js

我正在使用 Three.js 做一个多灯环境。我添加了 4 个定向灯和 1 个环境光。它适用于我的 windows 7+Chrome 电脑、另一台 Mac 桌面和 Macbook pro。但是当我使用另一台笔记本电脑进行测试时，它不起作用。笔记本电脑使用相同的 Windows 7 64 位系统和相同的 chrome。但是当灯超过2个时，那台笔记本电脑根本没有灯。只有一个灯时它工作正常。我想可能那里的灯太多了。有人知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:07:36.653

每盏灯都消耗属性和不同的插槽。您的笔记本电脑的 GPU 可能非常糟糕，以至于只有两盏灯就超过了最大值。Three.js 还在内部限制了常规灯光的数量（到 4 IIRC），可以用构造函数的`maxLights`参数覆盖`THREE.WebGLRenderer`。不过，这需要一个像样的 GPU 和驱动程序。

# objective-c - 使 UIImageView 变灰

> ID：11403939
> 
> 赞同：8
> 
> 时间：2012-07-09T22:10:28.470
> 
> 标签：objective-c, ios, uiimageview, afnetworking

我正在使用 AFNetworking 库中的 setImageWithUrl 在表格单元格中设置 UImageViews，但我需要图像是灰度的……有什么办法可以做到这一点。我尝试了一些 UIImage 灰度转换器，但我猜它们不起作用，因为我正在设置尚未下载的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T22:39:53.423

试试这个方法：

```
- (UIImage *)convertImageToGrayScale:(UIImage *)image
{
  // Create image rectangle with current image width/height
  CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);

  // Grayscale color space
  CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();

  // Create bitmap content with current image size and grayscale colorspace
  CGContextRef context = CGBitmapContextCreate(nil, image.size.width, image.size.height, 8, 0, colorSpace, kCGImageAlphaNone);

  // Draw image into current context, with specified rectangle
  // using previously defined context (with grayscale colorspace)
  CGContextDrawImage(context, imageRect, [image CGImage]);

  // Create bitmap image info from pixel data in current context
  CGImageRef imageRef = CGBitmapContextCreateImage(context);

  // Create a new UIImage object  
  UIImage *newImage = [UIImage imageWithCGImage:imageRef];

  // Release colorspace, context and bitmap information
  CGColorSpaceRelease(colorSpace);
  CGContextRelease(context);
  CFRelease(imageRef);

  // Return the new grayscale image
  return newImage;
} 
```

我在这里找到它：http: [//mobiledevelopertips.com/graphics/convert-an-image-uiimage-to-grayscale.html](http://mobiledevelopertips.com/graphics/convert-an-image-uiimage-to-grayscale.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:26:18.817

我从上面的@Jesse Gumpo 的示例中获取了代码，但这里它是一个接口。

```
@implementation UIImage ( Greyscale )

- (UIImage *)greyscaleImage
{
    CIImage * beginImage = [ self CIImage ] ;
    CIImage * evAdjustedCIImage = nil ;
    {
        CIFilter * filter = [ CIFilter filterWithName:@"CIColorControls" 
                                        keysAndValues:kCIInputImageKey, beginImage
                                            , @"inputBrightness", @0.0
                                            , @"inputContrast", @1.1
                                            , @"inputSaturation", @0.0
                                            , nil ] ;
        evAdjustedCIImage = [ filter outputImage ] ;
    }

    CIImage * resultCIImage = nil ;
    {
        CIFilter * filter = [ CIFilter filterWithName:@"CIExposureAdjust" 
                                        keysAndValues:kCIInputImageKey, evAdjustedCIImage
                                            , @"inputEV", @0.7
                                            , nil ] ;
        resultCIImage = [ filter outputImage ] ;
    }

    CIContext * context = [ CIContext contextWithOptions:nil ] ;
    CGImageRef resultCGImage = [ context createCGImage:resultCIImage 
                                              fromRect:resultCIImage.extent ] ;
    UIImage * result = [ UIImage imageWithCGImage:resultCGImage ] ;
    CGImageRelease( resultCGImage ) ;

    return result;
}

@end 
```

现在你可以这样做：

```
UIImage * downloadedImage = ... get from AFNetwork results ... ;
downloadedImage = [ downloadedImage greyscaleImage ] ;

... use 'downloadedImage' ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:45:13.637

而不是 uiimageView，子类化 UIView，给它

```
@property (strong, nonatomic) UIImage *image; 
```

和

```
@synthesize image = _image; 
```

覆盖设置器

```
-(void)setImage:(UIImage *)image{
     _image = [self makeImageBW:image];
     [self setNeedsDisplay];
}

- (UIImage *)makeImageBW:(UIImage *)source
{
    CIImage *beginImage = source.CIImage;
    CIImage *blackAndWhite = [CIFilter filterWithName:@"CIColorControls" keysAndValues:kCIInputImageKey, beginImage, @"inputBrightness", [NSNumber numberWithFloat:0.0], @"inputContrast", [NSNumber numberWithFloat:1.1], @"inputSaturation", [NSNumber numberWithFloat:0.0], nil].outputImage;
    CIImage *output = [CIFilter filterWithName:@"CIExposureAdjust" keysAndValues:kCIInputImageKey, blackAndWhite, @"inputEV", [NSNumber numberWithFloat:0.7], nil].outputImage; 
    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef ref = [context createCGImage:output fromRect:output.extent];
    UIImage *newImage = [UIImage imageWithCGImage:ref];
    CGImageRelease(cgiimage);
    return newImage;
}

-(void)drawRect:(CGRect)rect{
     [_image drawInRect:rect];
} 
```

在其他地方你可以用你的 NSURLRequest 设置图像：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^{
      NSData *data = [NSURLConnection sendSynchronousRequest:(NSURLRequest *) returningResponse:nil error:nil];
      if (data){
           UIImage *image = [UIImage imageWithData:data];
           if (image) dispatch_async(dispatch_get_main_queue(),^{
                [view setImage:image];
           });
      }
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-10T12:43:15.740

这个线程有点旧，但我在搜索时遇到了它。在[这篇文章](https://stackoverflow.com/a/36870323/4244501)中，我指出了在 Swift 中创建灰度图像的两种不同方法，考虑到图像的 alpha 和比例，可以在 imageView 中显示该图像。

```
import CoreImage

extension UIImage
{
    /// Applies grayscale with CIColorControls by settings saturation to 0.0.
    /// - Parameter brightness: Default is 0.0.
    /// - Parameter contrast: Default is 1.0.
    /// - Returns: The grayscale image of self if available.
    func grayscaleImage(brightness: Double = 0.0, contrast: Double = 1.0) -> UIImage?
    {
        if let ciImage = CoreImage.CIImage(image: self, options: nil)
        {
            let paramsColor: [String : AnyObject] = [ kCIInputBrightnessKey: NSNumber(double: brightness),
                                                      kCIInputContrastKey:   NSNumber(double: contrast),
                                                      kCIInputSaturationKey: NSNumber(double: 0.0) ]
            let grayscale = ciImage.imageByApplyingFilter("CIColorControls", withInputParameters: paramsColor)

            let processedCGImage = CIContext().createCGImage(grayscale, fromRect: grayscale.extent)
            return UIImage(CGImage: processedCGImage, scale: self.scale, orientation: self.imageOrientation)
        }
        return nil
    }

    /// Create a grayscale image with alpha channel. Is 5 times faster than grayscaleImage().
    /// - Returns: The grayscale image of self if available.
    func convertToGrayScale() -> UIImage?
    {
        // Create image rectangle with current image width/height * scale
        let pixelSize = CGSize(width: self.size.width * self.scale, height: self.size.height * self.scale)
        let imageRect = CGRect(origin: CGPointZero, size: pixelSize)
        // Grayscale color space
        if let colorSpace: CGColorSpaceRef = CGColorSpaceCreateDeviceGray()
        {
            // Create bitmap content with current image size and grayscale colorspace
            let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.None.rawValue)
            if let context: CGContextRef = CGBitmapContextCreate(nil, Int(pixelSize.width), Int(pixelSize.height), 8, 0, colorSpace, bitmapInfo.rawValue)
            {
                // Draw image into current context, with specified rectangle
                // using previously defined context (with grayscale colorspace)
                CGContextDrawImage(context, imageRect, self.CGImage)
                // Create bitmap image info from pixel data in current context
                if let imageRef: CGImageRef = CGBitmapContextCreateImage(context)
                {
                    let bitmapInfoAlphaOnly = CGBitmapInfo(rawValue: CGImageAlphaInfo.Only.rawValue)
                    if let contextAlpha = CGBitmapContextCreate(nil, Int(pixelSize.width), Int(pixelSize.height), 8, 0, nil, bitmapInfoAlphaOnly.rawValue)
                    {
                        CGContextDrawImage(contextAlpha, imageRect, self.CGImage)
                        if let mask: CGImageRef = CGBitmapContextCreateImage(contextAlpha)
                        {
                            // Create a new UIImage object
                            if let newCGImage = CGImageCreateWithMask(imageRef, mask)
                            {
                                // Return the new grayscale image
                                return UIImage(CGImage: newCGImage, scale: self.scale, orientation: self.imageOrientation)
                            }
                        }
                    }
                }
            }

        }
        // A required variable was unexpected nil
        return nil
    }
} 
```

# objective-c - 在自动 Segue 远离自身之前查看不更新

> ID：11403940
> 
> 赞同：1
> 
> 时间：2012-07-09T22:10:33.820
> 
> 标签：objective-c, ios, uiviewcontroller, storyboard, segue

本质上，我有一个视图控制器，用户可以从三个选项中进行选择。一旦用户选择了某些东西，视图就会转移到另一个视图控制器，该控制器会显示一些关于他们选择的信息大约 5 秒钟，然后自动回到原始视图控制器，用户必须在其中做出更多选择......（它基本上是一个循环，直到某事完成）。

我遇到的问题是当用户触摸他们的选项时，它似乎只是回到自身而没有显示中间屏幕。我添加了一个 sleep(5); 到 viewDidLoad 但所有导致它做的只是在原来的选择屏幕上暂停 5 秒钟，然后再继续自己。我还输入了一个 NSLog 以确保它实际上正在使用新的控制器，确实如此。

我没有包含代码，因为它是如此微不足道。新控制器上的 viewDidLoad 具有 sleep(5) 和对 segue 回原始视图控制器的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:39:40.223

我通过将代码移动到 viewDidAppear 解决了这个问题。老实说，应该从一开始就这样做，只是我猜想的不够透彻。

# xml - XQuery 嵌套返回花

> ID：11403946
> 
> 赞同：3
> 
> 时间：2012-07-09T22:11:21.110
> 
> 标签：xml, xml-parsing, xquery

我被一个看似简单的 XQuery 练习困住了。下面是一段 XML 文件。

```
<Ships>
<Class name = "Kongo" type = "bc" country = "Japan" numGuns = "8" 
        bore = "14" displacement = "32000">
    <Ship name = "Kongo" launched = "1913" />
    <Ship name = "Hiei" launched = "1914" />
    <Ship name = "Kirishima" launched = "1915">
        <Battle outcome = "sunk">Guadalcanal</Battle>
    </Ship>
    <Ship name = "Haruna" launched = "1915" />
</Class>
</Ships> 
```

我正在尝试将 XML 转换为带有类名称属性 (Kongo) 作为标题和子船名称和发射年份的枚举列表的 XHTML：

```
<h1>Kongo</h1>
<table>
<tr><th>Name</th><th>Launched</th><tr>
<tr><td>Kongo</td><td>1913</td></tr>
<tr><td>Hiei</td><td>1914</td></tr>
<tr><td>Kirishima</td><td>1915</td></tr>
<tr><td>Haruna</td><td>1915</td></tr>

<h1>Next Class name</h1>
.... 
```

我坚持使用以下嵌套的 return-FLOWR XQuery：

```
declare option output "method=xml";
declare option output "doctype-public=-//W3C//DTD XHTML 1.0 Strict//EN";
declare option output "doctype-system=http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd";
declare option output "omit-xml-declaration=no";
declare option output "indent=yes";

<html xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>XQ-7</title>
  </head>
  <body>
       {for $class in doc("xml/battleships.xml")/Ships/Class 
    let $cname := data($class/@name) 
    let $sname := data($class/Ship/@name)
    let $slaunched := data($class/Ship/@launched)
      return   
      <h1>{$cname}</h1>
      <table>
      {for $ship in doc("xmlbattleships.xml")/Ships/Class/Ship
      where data($ship/../@name) eq $cname
        let $sname := data($ship/@name)
        let $slaunched := data($ship/@launched)
        return
         <tr><td>{$sname}</td><td>{$slaunched}</td></tr>
  }
</table>
    }
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:35:02.663

我认为你遇到的问题是 return 需要一个元素或一个序列，而你想同时返回 the`<h1>`和一个`<table>`元素。在这里使用一个序列：

```
return
(
    <h1>{$cname}</h1>,
    <table>
    [snip]
) 
```

注意标题标签后的括号和冒号。您的子句还有另一个问题`where`，我将其移入谓词。

您想要的输出不是有效的 XHTML：您必须在表头之前关闭表格。您还将获得一个表格而不是枚举，您到底在寻找什么？

这个清理和修复的代码对我有用，我删除了您的文档和一些声明，但您将能够找到更改：

```
<html xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>XQ-7</title>
    </head>
    <body>
        {
            for $class in /Ships/Class 
            let $cname := data($class/@name) 
            let $sname := data($class/Ship/@name)
            let $slaunched := data($class/Ship/@launched)
            return
                (
                    <h1>{$cname}</h1>,
                    <table>
                    {
                        for $ship in /Ships/Class/Ship[@name = $cname]
                        let $sname := data($ship/@name)
                        let $slaunched := data($ship/@launched)
                        return
                        <tr>
                            <td>{$sname}</td>
                            <td>{$slaunched}</td>
                        </tr>
                    }
                    </table>
                )
        }
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:59:42.357

这一点终于成功了，在其他地方进行了调节并进行了细微的调整。Xquery，你一定会喜欢它；）：P。

```
 declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
    declare option output:method "xml";

    <html xml:lang="en">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title>XQ-7</title>
        </head>
        <body>
            {
                for $class in doc("xml/battleships.xml")/Ships/Class 
                let $cname := data($class/@name) 
                let $sname := data($class/Ship/@name)
                let $slaunched := data($class/Ship/@launched)
                return
                    (
                        <h1>{$cname}</h1>,
                        <table>
                        <tr><th>Name</th><th>Launched</th></tr>
                        {
                            for $ship in doc("xml/battleships.xml")/Ships/Class/Ship[../@name = $cname]
                            let $sname := data($ship/@name)
                            let $slaunched := data($ship/@launched)
                            return
                            <tr>    
                                <td>{$sname}</td>
                                <td>{$slaunched}</td>
                            </tr>
                        }
                        </table>
                    )
            }
       </body>
    </html> 
```

# r - 返回 R 中的列表和函数式编程行为

> ID：11403947
> 
> 赞同：-2
> 
> 时间：2012-07-09T22:11:28.063
> 
> 标签：r

我有一个关于 R 函数式编程的基本问题。

给定一个返回列表的函数，例如：

```
myF <- function(x){
   return (list(a=11,b=x))
} 
```

为什么在使用范围或向量调用函数时返回的列表对于“a”总是相同的长度 例如：

```
myF(1:10) 
```

返回：

```
$a
[1] 11

$b
[1]  1  2  3  4  5  6  7  8  9 10 
```

如何改变行为以使“a”列表的样本长度为 b。

我实际上正在使用一堆 S4 对象，这些对象我无法轻松转换为列表（使用 as.list），因此 _apply 不是我的首选。

感谢您的任何见解或帮助！

编辑（添加了进一步的解释）我不一定只想填充“a”以使其长度等于 b。但是，使用解决方案 as.list(data.frame(a=myA,b=x)) 用首先计算的相同值填充“a”。

```
myF <- function(x){
  myA = ceiling(runif(1, max=100))
  return (as.list(data.frame(a=myA
               ,b=x)))
}

myF(1:5)
$a
 [1] 79 79 79 79 79 79 79 79 79 79

$b
 [1]  1  2  3  4  5  6  7  8  9 10 
```

我仍然不确定为什么会这样！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:17:56.923

您是否只是希望重复 11 个以使 a 与 b 的长度相同？如果是这样：

```
> myF <- function(x){
+    return (list(a=rep(11,length(x)),b=x))
+ }
> myF(1:10)
$a
 [1] 11 11 11 11 11 11 11 11 11 11

$b
 [1]  1  2  3  4  5  6  7  8  9 10 
```

根据 OP 的澄清/评论进行编辑。如果您希望“a”改为长度等于“b”的随机向量：

```
> myF <- function(x){
+    return (list(a=ceiling(runif(length(x),max=100)),b=x))
+ }
> myF(1:10)
$a
 [1]  4 31  8 45 25 74 36 95 64 32

$b
 [1]  1  2  3  4  5  6  7  8  9 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:17:57.583

我不太明白你不能使用 as.list 是什么意思。通过执行以下操作，您应该能够获得满足列表的所有组件长度相同的要求的函数版本：

```
myF <- function(x){
   return as.list(data.frame(a=11,b=x))
} 
```

编辑：原因`list`不能按您期望的方式工作，因为`list`应用于许多列表/向量/等就是这样，这些列表/向量/等的列表；它不会“检查”它们的结构。

我认为您想要的是列表中包含的向量应该匹配并产生一组“行”的附加语义，每个“行”都有一个来自每个向量的对应元素。这正是假设的数据框（实际上，我认为数据框是如何在 R 中表示的）。最后的`as.list`调用只改变了它标记为的类型。

EDIT2：请注意，如果我在上面错了（这不是您想要的一般行为），那么 Mac 的解决方案更合适，因为它为您提供了两个向量应该具有相同长度的行为，而不暗示它们应该“排队”。

这会让任何阅读代码的人感到困惑（因为使用 data.frame 意味着您认为您的向量是匹配的）以及强制您添加到列表中的任何其他元素转换为适当长度的向量（这可能是也可能不是你想要的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T23:37:55.593

如果我上次没有正确理解您，这里还有另一种可能性：

如果您想*生成*第二个向量，给定一些函数/表达式，与您的参数长度相同，您可以执行以下操作：

```
myF <- function(x){
   return (list(a=replicate(length(x),f),b=x))
} 
```

在您的示例中`f`可能是`runif(1, max=100)`，尽管在特定情况下您可以通过在函数内部`runif`调用来明确告诉它生成适当长度的向量。`runif(length(x), max=100)`

`replicate`只需重新评估`f`您请求的次数，并为您提供所有结果的向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:29:07.740

看来您的功能是“硬编码” a。因此，无论您指定什么，它总是会给出 11。

例如，如果您将功能更改为：

```
myF <- function(x){    return (list(a=x,b=x)) }

myF(1:10) 

$a
 [1]  1  2  3  4  5  6  7  8  9 10

$b
 [1]  1  2  3  4  5  6  7  8  9 10 
```

a 可以像 b 一样改变。

或者

```
myF <- function(x,y){    return (list(a=y,b=x)) }

myF(10:1,1:10) 
$a
 [1]  1  2  3  4  5  6  7  8  9 10

$b
 [1] 10  9  8  7  6  5  4  3  2  1 
```

现在允许 a 独立于 b 改变。

# c# - 从泛型集合到非泛型集合

> ID：11403949
> 
> 赞同：2
> 
> 时间：2012-07-09T22:11:47.397
> 
> 标签：c#, collections, automapper

我在较旧的应用程序中工作（从 1.1 天开始），并且有许多非通用集合，例如：

```
[Serializable]
public class MyEntityList : CollectionBase
{
    private int _virtualRecordCount;

    public int VirtualRecordCount
    {
        get { return _virtualRecordCount; }
        set { _virtualRecordCount = value; }
    }

    public MyEntityList()
    {
    }

    public MyEntityList(MyEntity[] arr)
    {
        AddRange(arr);
    }

    public MyEntityList this[int index]
    {
        get { return (MyEntity)InnerList[index]; }
    }

    public void Add(MyEntity item)
    {
        InnerList.Add(item);
    }

    etc... 
```

我已经升级了应用程序的一层以使用泛型`Collection<T>`作为返回类型。该层是自动生成的，类名基于数据源表名。业务实体类也不需要排队，但在这种情况下并非如此。在这种情况下，它们完美匹配 1:1。

我尝试像这样映射集合：

```
Collection<MyEntityResponse> responses = GetMyEntityResponses();

AutoMapper.Mapper.CreateMap<MyEntityResponse, MyEntity>();
myEntityList = AutoMapper.Mapper.Map<MyEntityList>(responses); 
```

最奇怪的事情......我以为它可能会在使用时发出尖叫声`CollectionBase`，但我还是按了 F5。令我惊讶的是，没有编译器错误，也没有例外。哇哦！

但是，稍后在应用程序中，当它尝试执行从Mapper.Map 返回的操作时，它抛出了一个异常，抱怨类型转换 from `MyEntityResponse`to 。`MyEntity``foreach()``MyEntityList`

发生的事情是`MyEntityList`返回了一个新集合，但其中充满了`MyEntityResponse`对象。啊？？自定义集合覆盖该`Add()`方法并指定类型必须是 type `MyEntity`。我希望它在尝试将错误的类型添加到集合时会爆炸，但它似乎没有任何问题与`CollectionBase`.

所以我的问题是，如果我尝试映射的两种类型完美匹配（属性到属性），并且 AutoMapper 没有 CollectionBase 问题，为什么它不能映射实体？为什么它不抛出异常而不是将错误的类型推入集合？

* * *

编辑：我想我知道为什么......因为非泛型集合没有与之关联的已知类型，就像泛型集合一样。

所以，新问题......我如何告诉它使用`MyEntity`而不是`MyEntityResponse`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:25:44.700

我想我找到了答案：[http ://automapper.codeplex.com/wikipage?title=Lists%20and%20Arrays](http://automapper.codeplex.com/wikipage?title=Lists%20and%20Arrays)

> 对于非泛型可枚举类型，仅支持未映射的可分配类型，因为 AutoMapper 将无法“猜测”您要映射的类型。如上例所示，无需显式配置列表类型，只需配置其成员类型即可。
> 
> **从 0.2.0 版开始，不支持自定义目标集合类型。**

# string - 如何让 getch() 接受输入命中 (\n)？

> ID：11403950
> 
> 赞同：0
> 
> 时间：2012-07-09T22:11:50.950
> 
> 标签：string, visual-c++, getch

我用 C++ 制作了一个触摸打字控制台程序。它从文件中读取文本并将其加载到屏幕上。用户必须输入正确的字母才能继续下一个字母。我唯一的问题是'\ n'，所以如果我在文本文件（我正在读取的文件）中有这样的东西：

```
"
hello
dude
Sup
" 
```

用户输入“你好”后，他应该按`enter`对吗？但每当他按下 时`enter`，getch() 就会将他带回到当前行的开头。

我怎样才能解决这个问题？

我正在读取整个文件并将其存储到一个字符串中，如下所示：

```
void getTextFromFile()
{
    text.assign(istreambuf_iterator<char>(fin), istreambuf_iterator<char>());       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:21:23.377

首先， getch() 已被弃用（如果您开始遇到更多问题，则仅供参考）。据我了解，您一次尝试接受字符输入 1 个字符。如果您将 getch() 用于 '\n' 输入，则应该没问题。如果不是，请解释更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:32:15.257

我只是尝试了一个快速的实验。显然[`getch()`](http://msdn.microsoft.com/en-us/library/ms235446.aspx)（正如里根所说，它已被弃用；改为使用）在您按下 时[`_getch()`](http://msdn.microsoft.com/en-us/library/078sfkak%28v=vs.110%29.aspxa)返回`'\r'`，而不是。`'\n'``Enter`

使用您当前的程序，尝试输入`Ctrl-J`而不是`Enter`; 那应该给你一个`'\n'`结果`getch()`。

为了将来参考，您应该向我们展示调用`getch()`. 我不知道`currentLetter = getch();`您在评论中提到的内容与问题中的代码有何关系。

# android - 带有 Open Graph 对象的 Android 和 Facebook Like 操作

> ID：11403951
> 
> 赞同：5
> 
> 时间：2012-07-09T22:11:51.027
> 
> 标签：android, facebook-like

Facebook like action 已针对移动应用发布。

正如文档所说：

```
To publish a built-in Like action on an Open Graph object,
invoke the following HTTP POST request with a user’s access
token and the url of the Open Graph object.
This Open Graph object can be of any type.

curl -X POST \
    -F 'access_token=USER_ACCESS_TOKEN' \
    -F 'object=OG_OBJECT_URL' \
    https://graph.facebook.com/[User FB ID]/og.likes 
```

通常，为了请求用户信息，我使用这种代码：

```
Facebook facebook;
facebook = new Facebook(AppConfig.FACEBOOK_APP_ID);

if (facebook.isSessionValid())
{
    JSONObject obj = facebook.request("me");
    ...
}
else
{
    facebook.authorize(...)
    {
        @Override public void onComplete(Bundle values)
        {
            String token = facebook.getAccessToken();
            long expires = facebook.getAccessExpires();
            ...
        }
    }
} 
```

我的问题很简单，但我找不到答案，一旦我检索到用户访问令牌和过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:00:53.227

您将执行以下操作：

1/ 初始化 facebook 实例后，您可以声明以下内容：

```
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook); 
```

2 /然后当你想发布喜欢你可以使用以下代码：

```
Bundle params = new Bundle();
params.putString("object",OG_OBJECT_URL);

mAsyncRunner.request("me/og.likes", params, 
                    "POST", new BaseRequestListener() {
                       @Override
                       public void onComplete(final String response, final Object state) {
                           // handle success
                       }
                    }); 
```

3/ 你可以在这里选择 BaseRequestListener 的实现：[https ://github.com/fbsamples/android-social-cafe/blob/master/src/com/facebook/samples/socialcafe/BaseRequestListener.java](https://github.com/fbsamples/android-social-cafe/blob/master/src/com/facebook/samples/socialcafe/BaseRequestListener.java)

最后，要查看 Open Graph 示例，请参阅此示例：[https ://github.com/fbsamples/android-social-cafe](https://github.com/fbsamples/android-social-cafe)

# modelica - Modelica：在自定义类/模型中使用 der()

> ID：11403952
> 
> 赞同：1
> 
> 时间：2012-07-09T22:11:58.090
> 
> 标签：modelica

我正在尝试学习 Modelica，并且使用多体库构建了一个非常简单的模型。该模型由一个世界对象和一个连接到梁的主体（质量）组成，然后连接到 2 个扩展的 PartialOneFrame_a 类（见下文），我对其进行了修改以在一个轴上创建一个恒定的力。本质上，这组物体所做的所有事情都是在重力作用下下落并旋转，这是由于两个力作用于与身体中心纵向偏移的位置，从而在 cg 周围产生了一对。

```
 model Constant_Force
      extends Modelica.Mechanics.MultiBody.Interfaces.PartialOneFrame_a;
      parameter Real force = 1.0;

    equation 
      frame_a.f = {0.0,0.0,force};
      frame_a.t = {0.0,0.0,0.0};
    end Constant_Force; 
```

接下来我想看看我是否可以创建一个非常简单的空气动力分量，我将其连接到旋转“臂”的末端。我的想法是遵循上面的 Constant_force 模型示例，并在我的第一个简单切割中根据局部框架速度生成力。这就是我的问题出现的地方 - 我尝试使用 der(frame_a.r_0) 计算速度，然后我将使用 resolve2 函数将其转换为本地帧，但添加 der(...) 行导致模型无法正常工作 -它会“成功”模拟（使用 OpenModelica），但 v11b 向量（见下文）将全为零，出现用于绘图的 der(frame_a.r_0) 也是如此 - 不仅如此，所有其他组件行为现在也只是始终为零 - （身体的 frame_a.r_0、w_a 等）。

```
 model Aerosurf
      extends Modelica.Mechanics.MultiBody.Interfaces.PartialOneFrame_a;
      import Modelica.Mechanics.MultiBody.Frames;
      import Modelica.SIunits;
      //Real[3] v11b;
      SIunits.Velocity v11b[3];
    //initial equation
    //  v11b={0.0,0.0,0.0};
    algorithm
      //v11b:=der(frame_a.r_0);
    equation 
      v11b=der(frame_a.r_0);
      frame_a.f = {0.0,0.0,0.0};
      frame_a.t = {0.0,0.0,0.0};
    end Aerosurf; 
```

我尝试了多种方法来简单地计算速度（您将从注释行中看到），因此我可以绘制检查正确的行为但无济于事。我使用了算法或方程方法——我确实用不同的方法实现了一些不同的（但也有不正确的行为）。

有小费吗？我必须在这里遗漏一些基本的东西，似乎框架组件本身并不携带速度矢量，所以我必须计算它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:38:49.727

最简单的方法是使用`Modelica.Mechanics.MultiBody.Sensors.AbsoluteVelocity`MSL 中的模块并将其连接到您的 MB 框架，然后只需在方程式中使用输出连接器的变量。

# node.js - 温斯顿：如何轮换日志

> ID：11403953
> 
> 赞同：45
> 
> 时间：2012-07-09T22:12:04.823
> 
> 标签：node.js, flatiron.js

使用 Winston 处理 node.js 的日志记录时如何轮换日志。也就是说，如何为应用程序运行的每一天创建一个新文件？

```
 var logger = new (winston.Logger)({
       transports: [
          new (winston.transports.Console)(),
          new (winston.transports.File)({ filename: '2012-07-09.log' })
      ]
});

logger.log('info', 'Test Log Message', { anything: 'This is metadata' }); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-10T08:04:56.733

*温斯顿的作者和维护者在这里。*

每天登录一个新文件目前是一个开放的功能请求：[https](https://github.com/flatiron/winston/issues/10) ://github.com/flatiron/winston/issues/10 。很想看到有人实施它。

也就是说，还有其他选择：

1.  文件传输接受一个 maxsize 选项，该选项将在日志文件超过特定字节大小时轮换日志文件。

2.  还有一个带有新传输的开放拉取请求，我没有机会真正深入研究“fileRotate”，它似乎是这种基于日期的轮换：[https ://github.com/flatiron/winston /拉/120/文件](https://github.com/flatiron/winston/pull/120/files)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-03-08T05:02:24.663

该功能存在，我们正在生产中使用它，winston.transports.DailyRotateFile：

```
var timeFormatFn = function() {
    'use strict';
    return moment().format(cfg.timeFormat);
};

var logger = new(winston.Logger)({
    exitOnError: false,
    transports: [
        new(winston.transports.DailyRotateFile)({
            filename: cfg.appLogName,
            dirname: __dirname + '/../' + cfg.logsDirectory,
            datePattern: cfg.rollingDatePattern,
            timestamp: timeFormatFn
        }),
        new(winston.transports.Console)({
            colorize: true,
            timestamp: timeFormatFn
        })
    ]
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-29T11:11:59.000

您可以使用以下代码每天轮换日志文件：

```
var winston = require('winston');
require('winston-daily-rotate-file');
var transport = new (winston.transports.DailyRotateFile)({
    filename: './log',
    datePattern: 'yyyy-MM-dd.',
    prepend: true,
    level: 'info'
});
var logger = new (winston.createLogger)({
    transports: [
      transport
    ]
});
logger.info('Hello World!'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-21T03:40:15.230

根据[winston-filerotatedate](https://github.com/CycoPH/winston-filerotatedate)的作者，它是：

> winston 的文件传输，允许根据大小和时间轮换日志文件。
> 
> 文件传输通过“文件名”选项接受文件名，并将该文件用作主要日志记录目标。如果文件增长超过 'maxsize' 字节，则重命名当前日志文件并创建新的主日志图块。重命名的日志文件的名称格式为“basenameYYYYMMDD[az].bak”。
> 
> 可用选项有：
> 
> *   **级别：**此传输应记录的消息级别。
> *   **静音：**布尔标志，指示是否抑制输出。
> *   **时间戳：**布尔标志，指示我们是否应该在输出前加上时间戳（默认为真）。如果指定了函数，则将使用其返回值而不是时间戳。
> *   **文件名：**要写入输出的日志文件的文件名。
> *   **dirname：**将在其中创建日志文件的文件夹。
> *   **maxsize：**日志文件的最大大小（以字节为单位），如果超过大小，则创建一个新文件。
> *   **json：**如果为 true，则消息将记录为 JSON（默认为 true）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T09:35:33.440

自 2012 年 12 月 18 日起，此功能现已在 Winston 中可用（请参阅[https://github.com/flatiron/winston/pull/205](https://github.com/flatiron/winston/pull/205)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-18T21:32:44.870

对于这个问题，其他人已经给出了很好的答案。但是对于那些正在寻找如何使用[winston-daily-rotate-file](https://github.com/winstonjs/winston-daily-rotate-file#readme)以更现代的 JavaScript 语法（ES6 及更高版本）执行此操作的示例的人来说，以下代码应该会有所帮助：

```
const { createLogger, transports } = require('winston');
require('winston-daily-rotate-file');

const logger = createLogger({
    level: 'info',
    transports: [
      new transports.DailyRotateFile({
         filename: 'info-%DATE%.log',
         datePattern: 'YYYY-MM-DD',
         zippedArchive: true,
         level: 'info'
      })
    ]
});

logger.log('info', 'Test Log Message', { anything: 'This is metadata' }); 
```

# android - 如何在 android 中加载 .pdf 或 .doc 文件

> ID：11403961
> 
> 赞同：1
> 
> 时间：2012-07-09T22:12:49.420
> 
> 标签：android

我想在我的应用程序中显示 pdf（最好）或 word 文档；就像隐私通知屏幕一样。许多应用程序都有它，所以它应该是可能的。我尝试加载一个简单的文本文件作为开始，但不提供格式、字体或商标符号。我已经浏览了一些帖子，但无法将其应用于我的应用程序。谁能告诉我它是怎么做的？我可以将文件存储在 res 文件夹中的某个位置并提供通过我的代码打开它的路径吗？我查看了以下链接，但不确定在我的情况下这是否是正确的方法[android: open a pdf from my app using the built-in pdf viewer](https://stackoverflow.com/questions/2916108/android-open-a-pdf-from-my-app-using-the-built-in-pdf-viewer)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:24:26.153

Android 不支持原生打开 PDF 和 DOC 文件。你必须自己实现。

就像 t0mm13b 所说，您应该考虑使用 HTML (+ CSS) 并使用 WebView。

# c# - 使用 Rhino Mocks 如何存根使用 params 关键字的方法？

> ID：11403965
> 
> 赞同：9
> 
> 时间：2012-07-09T22:13:29.597
> 
> 标签：c#, mocking, rhino-mocks, stub, rhino-mocks-3.5

我正在尝试在存储库上设置期望。该方法使用了[params 关键字](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.100%29.aspx)：

```
string GetById(int key, params string[] args); 
```

我设置的期望：

```
var resourceRepo = MockRepository.GenerateMock<IResourceRepository>();
resourceRepo.Expect(r => r.GetById(
    Arg<int>.Is.Equal(123),
    Arg<string>.Is.Equal("Name"),
    Arg<string>.Is.Equal("Super"),
    Arg<string>.Is.Equal("Mario"),
    Arg<string>.Is.Equal("No"),
    Arg<string>.Is.Equal("Yes"),
    Arg<string>.Is.Equal("Maybe")))
    .Return(String.Empty); 
```

抛出此异常：

> 测试方法 XYZ 抛出异常：System.InvalidOperationException：在录制时仅在模拟方法调用中使用 Arg。预计有 2 个参数，已定义 7 个。

我的期望设置有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T05:59:43.193

params 只是一个数组：

```
var resourceRepo = MockRepository.GenerateMock<IResourceRepository>();
resourceRepo
  .Expect(r => r.GetById(
    Arg<int>.Is.Equal(123),
    Arg<string[]>.List.ContainsAll(new[]
                                   {
                                       "Name",
                                       "Super",
                                       "Mario",
                                       "No",
                                       "Yes",
                                       "Maybe"
                                   })))
  .Return(String.Empty); 
```

# memory-leaks - SignalR 和/或 ConcurrentDictionary 或 SignalR.InMemoryMessage 可能存在内存泄漏？

> ID：11403967
> 
> 赞同：2
> 
> 时间：2012-07-09T22:13:40.107
> 
> 标签：memory-leaks, asp.net-4.0, signalr

SignalR (=< v0.5.1) 存在一个问题，即请求四处游荡并占用内存。这似乎已在 v0.5.2 中得到纠正。但是，可能还有一个额外的问题。

使用[WINDBG](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)，我创建了我的新闻提要进程的内存转储。

首先，这是 SignalR.InMemoryMessage 的计数和内存消耗：

```
133099      6388752 System.Collections.Concurrent.ConcurrentDictionary`2+Node[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage... 
```

最后，这是前 3 个内存消耗对象的值：

```
000007fef9960bb0    79307    140001536 System.Byte[]
000007fef9956960  1704571    175128912 System.String
000007fef995ae68  1901299    549202440 System.Object[] 
```

执行`!dumpheap -mt 000007fef995ae68`时，我得到了相当长的方法表概要。大多数对象的尺寸相对较小，这是意料之中的。但是，在转储结束时，我看到以下内容：

```
00000001eb0f3220 000007fef995ae68      160     
00000001eb0f3580 000007fef995ae68       40     
00000001eb0f35f0 000007fef995ae68       40     
00000001eb0f3758 000007fef995ae68       56     
00000001eb0f37c8 000007fef995ae68       88     
00000001eb0f3820 000007fef995ae68       48     
00000001eb0f3cc8 000007fef995ae68       40     
00000001eb0f4570 000007fef995ae68       40     
00000001eb0f45e0 000007fef995ae68       40     
00000001eb0f4650 000007fef995ae68       40     
00000001eb0f4de8 000007fef995ae68      176     
00000001eb0f4ed0 000007fef995ae68       40     
00000001eb9b3380 000007fef995ae68       40     
00000001eb9b33c0 000007fef995ae68       40     
0000000237580080 000007fef995ae68  1146888 
```

所以我继续做`!gcroot 0000000237580080`。一些初始转储如下：

```
0000000237580080 000007fef995ae68  1146888     
total 0 objects
------------------------------
total 0 objects
Statistics:
              MT    Count    TotalSize Class Name
000007fef995ae68  1901299    549202440 System.Object[]
Total 1901299 objects
0:045> !gcroot 0000000237580080 
Note: Roots found on stacks may be false positives. Run "!help gcroot" for
more info.
Scan Thread 11 OSTHread 1040
Scan Thread 24 OSTHread c18
Scan Thread 26 OSTHread 488
Scan Thread 27 OSTHread 1144
Scan Thread 28 OSTHread 14b0
RSP:57ae0f0:Root:  000000012acea438(MyApp.Newsfeed.Hubs.NewsfeedHub)->
  000000012acea5f8(SignalR.GroupManager)->
  0000000185a17328(SignalR.Connection)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae100:Root:  000000012acea098(System.Linq.Enumerable+WhereSelectEnumerableIterator`2[[SignalR.Hubs.IDisconnect, SignalR],[System.Threading.Tasks.Task, mscorlib]])->
  000000012acea058(System.Func`2[[SignalR.Hubs.IDisconnect, SignalR],[System.Threading.Tasks.Task, mscorlib]])->
  000000012ace9ea8(SignalR.Hubs.HubDispatcher+<>c__DisplayClass1a`1[[SignalR.Hubs.IDisconnect, SignalR]])->
  0000000185a13640(SignalR.Hubs.HubDispatcher)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae130:Root:  000000012acea438(MyApp.Newsfeed.Hubs.NewsfeedHub)->
  000000012acea5f8(SignalR.GroupManager)->
  0000000185a17328(SignalR.Connection)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae140:Root:  000000012acea438(MyApp.Newsfeed.Hubs.NewsfeedHub)->
  000000012acea5f8(SignalR.GroupManager)->
  0000000185a17328(SignalR.Connection)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae188:Root:  000000012ace9ea8(SignalR.Hubs.HubDispatcher+<>c__DisplayClass1a`1[[SignalR.Hubs.IDisconnect, SignalR]])->
  0000000185a13640(SignalR.Hubs.HubDispatcher)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae190:Root:  000000012ace9ea8(SignalR.Hubs.HubDispatcher+<>c__DisplayClass1a`1[[SignalR.Hubs.IDisconnect, SignalR]])->
  0000000185a13640(SignalR.Hubs.HubDispatcher)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[])
RSP:57ae1a0:Root:  000000012acea438(MyApp.Newsfeed.Hubs.NewsfeedHub)->
  000000012acea5f8(SignalR.GroupManager)->
  0000000185a17328(SignalR.Connection)->
  000000011f655ed0(SignalR.InProcessMessageBus)->
  000000011f656680(System.Collections.Concurrent.ConcurrentDictionary`2[[System.String, mscorlib],[SignalR.Infrastructure.LockedList`1[[System.Action`1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]])->
  0000000237580080(System.Object[]) 
```

在我的应用程序中，我将客户端列表保存在 ConcurrentDictionary 中并删除客户端对象，如下所示：

```
Newsfeed.ClientList.TryRemove(fromHubClient.Key, out newsfeedClient); 
```

我看不出有什么问题，并且看到许多对`SignalR.Infrastructure.LockedList`1[[System.Action `1[[System.Collections.Generic.IList`1[[SignalR.InMemoryMessage] 的引用`1[[System.UInt64, mscorlib]], SignalR]], mscorlib]], mscorlib]], SignalR]`

SignalR 是否还有一些内存泄漏的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:38:04.473

SignalR 0.5.3 中存在内存泄漏。我们目前处于 1.0 alpha2，因此您可能需要更新以使用最新版本。

# ruby-on-rails - 设计不尊重 config.email_regexp

> ID：11403969
> 
> 赞同：1
> 
> 时间：2012-07-09T22:13:49.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我想更改在我的应用程序中定义有效电子邮件的正则表达式。我正在尝试在 config/initializers/devise.rb 中执行此操作。为了检查正则表达式是否有效，我尝试从简单的事情开始，例如

```
config.email_regexp = /\d+/ 
```

当那不起作用时，我想也许我对 ruby​​ 的正则表达式语法的了解已经关闭并尝试了我认为是一个超级简单的正则表达式

```
config.email_regexp = /a/ 
```

虽然更改以下内容对允许的密码有影响，但前两行似乎没有效果。

```
config.password_length = 2..128 
```

为了修改正则表达式验证电子邮件，我还应该做什么？（在我进行了这些修改之后，我重新启动了服务器以确保更改被拾取。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:08:21.197

你知道那些正则表达式的匹配吗？

/\d+/ 匹配一个或多个数字，而 /a/ 匹配单个 'a'。这会使几乎每个电子邮件地址都无效，不是吗？

查看此站点以测试您的正则表达式，看看是否有帮助：

[http://rubular.com/](http://rubular.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T20:59:18.633

我遇到了类似的问题，这次是在将 email_regexp 设置为其他地方定义的常量时。我在[https://github.com/plataformatec/devise/issues/2233](https://github.com/plataformatec/devise/issues/2233)上报告了它，并通过一些失败/通过的测试用例比较来尝试确定它。

# javascript - 如何让vim跳转到html文件中jquery函数中的大括号

> ID：11403971
> 
> 赞同：1
> 
> 时间：2012-07-09T22:13:54.307
> 
> 标签：javascript, jquery, html, vim

我已经安装了几个 vim 插件，并且在编辑具有 jquery 的 html 文件时一切似乎都正常工作。

当我转到一个大括号时，它似乎识别出相应的大括号，因为它突出显示了它。

问题是当我像往常一样按 % 时它不会跳转到相应的大括号。

当大括号离得很远并且不适合与封闭大括号相同的屏幕上时，这会成为一个问题。

如何解决这个问题？

# objective-c - 类似于 iPad 地图应用程序的注释视图

> ID：11403975
> 
> 赞同：0
> 
> 时间：2012-07-09T22:14:13.990
> 
> 标签：objective-c, cocoa-touch, ipad

在 iPad 上的地图应用程序中，注释视图的右侧标注附件视图看起来像一个细节披露按钮，因为它是蓝色的，带有白色边框，但它不是右箭头，而是一个小写的“i”，类似到信息按钮。假设这不是自定义的，我该如何创建一个？

此外，一旦单击该按钮，注释视图就会使用动画调整大小，以在标题下方包含一个表格视图，并使用动画将视图移动到左侧。这也是自定义调用，还是有针对此行为的内置 API 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:17:47.837

好吧，这里是如何显示表格 + 弹出框：[https ://stackoverflow.com/a/5583505/394504](https://stackoverflow.com/a/5583505/394504)

这是一个可以满足我要求的可可控件：http: [//www.cocoacontrols.com/platforms/ios/controls/gikanimatedcallout](http://www.cocoacontrols.com/platforms/ios/controls/gikanimatedcallout)

# php - 未捕获 PDO 异常

> ID：11403976
> 
> 赞同：4
> 
> 时间：2012-07-09T22:14:16.233
> 
> 标签：php, mysql, pdo, error-handling

我是使用 PDO 的新手，我发现由于查询语句中的错误导致的异常没有被捕获和正确显示。发生这种情况时的页面输出通常如下所示：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: ... 
```

我使用以下函数进行 PDO 查询：

```
/**************************************************************************************************************
* Function: makeQuery                                                                                         *
* Desc: Makes a PDO query.                                                                                    *
* Pre conditions: The statement/query and an array of named parameters (may be empty) must be passed.         *
* Post conditions: The PDO query is executed. Exceptions are caught, displayed, and page execution stopped.   *
**************************************************************************************************************/
function makeQuery($stmt, $array, $errMsg = '')
{
    try 
    {
        $stmt->execute($array);
    }
    catch (PDOException $e) 
    {
        print $errMsg != ''?$errMsg:"Error!: " . $e->getMessage() . "<br/>";
        die();
    }
} 
```

知道为什么没有捕获异常吗？

编辑：这就是我创建 PDO 对象的方式：

```
function createPDO()
{
    // MySQL connection details
    $dbhost = '';
    $dbuser = '';
    $dbpass = '';
    $dbname = '';

    try
    {
        $db = new PDO("mysql:$dbhost=localhost;dbname=$dbname;charset=utf8", $dbuser, $dbpass, array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    }
    catch (PDOException $e)
    {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }

    return $db;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:59:45.500

您捕获异常的文件是否有可能使用名称空间？在这种情况下，它应该是：

```
catch (\PDOException $e) 
```

或添加：

```
use PDOException; 
```

在文件顶部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:22:50.060

您确定*每个*查询都通过该功能运行吗？可能会查看您的代码以 100% 确定。

另一种选择是定义一个全局异常处理程序，然后只询问抛出的异常它来自哪一行和文件：

[http://php.net/manual/en/function.set-exception-handler.php](http://php.net/manual/en/function.set-exception-handler.php)

```
function exception_handler($exception)
{
  echo "Uncaught exception: " . $exception->getMessage() . PHP_EOL;
  echo "In file: " . $exception->getFile() . PHP_EOL;
  echo "On line: " . $exception->getLine() . PHP_EOL;
}

set_exception_handler('exception_handler'); 
```

编辑：在与 OP 进行一些对话之后，我现在确定对 PDOStatement::prepare 的调用是引发异常的地方，因此我向库推荐另一个包装函数：

```
function prepareStmt(PDO $oPdo, $sStmt, array $aDriverOptions=array())
{
  try
  {
    return $oPdo->prepare($sStmt, $aDriverOptions);
  }
  catch(PDOException $e)
  {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
  }
} 
```

# c++ - C ++中的异常如何返回“主菜单”

> ID：11403977
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:14:25.663
> 
> 标签：c++, exception

好吧，我正在准备考试，所以我试图让我的代码尽可能简单，但后来发生了一些非常奇怪的事情：练习是更改以下代码，并通过使用异常返回主菜单。

这是问题的代码：

```
void ha_ha_loop()
{
 int i, c;

 while(1)
  {
     for(i=0; i < 3; i++)
     {
       cout << "Ha Ha Ha" << endl;
       sleep(3);
     } // for 
    ask_return(); 
  } // while 

} // ha_ha_loop 

void dollar_loop()
{

 int i;

   while(1)
    {
     for(i=0; i < 3; i++)
      {
        cout << "$$$$$$$$$ " << endl;
        sleep(3);
      } // for 

      ask_return(); 
    } /* while */

} // dollar_loop 

void mainloop()
{
  string answer;

 while (1)
 {

    cout << "Press 1 for Ha Ha Ha." << endl;
    cout <<  "Press 2 for $$$$$$$$." << endl;
    cout << "Press 3 for to quit." << endl;

    cin >> answer;

    switch (answer[0])
    {
      case '1':
       ha_ha_loop();
      case '2':
       dollar_loop();
      case '3':
       return;
    } // switch 

  } // while 

} // mainloop 
```

我所做的是：

```
void ask_return() {
    char c;
    cout << "Return to main menu? y/n:"<<endl;
    cin >> c;
    if (c=='y') throw 1;
}

void ha_ha_loop()
{
 int i, c;

 while(1)
  {
     for(i=0; i < 3; i++)
     {
       cout << "Ha Ha Ha" << endl;

     } // for 
    ask_return(); 
  } // while 

} // ha_ha_loop 

void dollar_loop()
{

 int i;

   while(1)
    {
     for(i=0; i < 3; i++)
      {
        cout << "$$$$$$$$$ " << endl;
      } // for 

      ask_return(); 
    } /* while */

} // dollar_loop 

void mainloop()
{
  char answer;

 while (1)
 {

    cout << "Press 1 for Ha Ha Ha." << endl;
    cout <<  "Press 2 for $$$$$$$$." << endl;
    cout << "Press 3 for to quit." << endl;

    cin >> answer;

    switch (answer)
    {
      case '1':
       ha_ha_loop();
      case '2':
       dollar_loop();
      case '3':
       return;
    }
  }

}

int main() {
    try {
        mainloop();
    } catch (...) {
        mainloop();
    }
} 
```

一开始它工作得很好，但有一次它用未处理的异常消息终止了我的程序。为什么？

最简单的正确方法是什么？

编辑：这是一种工作方式：

```
void ask_return() {
    char c;
    cout << "Return to main menu? y/n:"<<endl;
    cin >> c;
    if (c=='y') throw 1;
}

void ha_ha_loop()
{
 int i, c;

 while(1)
  {
     for(i=0; i < 3; i++)
     {
       cout << "Ha Ha Ha" << endl;

     } // for 
    ask_return(); 
  } // while 

} // ha_ha_loop 

void dollar_loop()
{

 int i;

   while(1)
    {
     for(i=0; i < 3; i++)
      {
        cout << "$$$$$$$$$ " << endl;
      } // for 

      ask_return(); 
    } /* while */

} // dollar_loop 

void mainloop()
{
  char answer;

 while (1)
 {
    try {
    cout << "Press 1 for Ha Ha Ha." << endl;
    cout <<  "Press 2 for $$$$$$$$." << endl;
    cout << "Press 3 for to quit." << endl;

    cin >> answer;

    switch (answer)
    {
      case '1':
       ha_ha_loop();
      case '2':
       dollar_loop();
      case '3':
       return;
    }
    } catch (...) {
    }
  }

}

int main() {
    mainloop();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:18:34.723

我只会回答“怎么来”的部分，因为最简单的正确方法是您应该自己解决的问题。当你这样做

```
try {
    mainloop();
} catch (...) {
    mainloop();
} 
```

你执行`mainloop`，捕捉任何异常。当捕获到异常时，处理程序会在**block****之外**`mainloop`再次执行。你会想要反复进入，每次都捕捉到异常。**`try`**`mainloop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:27:02.573

好的，这是我的建议。

首先，`ask_return()`需要写出来。这很简单，据我所知，你或多或少是正确的。我将建议实际使用`std::exception`虽然：

```
void ask_return()
{
    char c;
    cout << "Return to main menu? y/n" << endl;
    cin >> c;
    if ( c == 'y' )
    {
        throw std::exception(); // might as well use the class designed for this
    }
} 
```

有很多地方可以捕捉到异常，但最简单的地方是`mainloop()`：

```
void mainloop()
{
    string answer;

    while (1)
    {

        cout << "Press 1 for Ha Ha Ha." << endl;
        cout <<  "Press 2 for $$$$$$$$." << endl;
        cout << "Press 3 for to quit." << endl;

        cin >> answer;

        try
        {
            switch (answer[0])
            {
                case '1':
                    ha_ha_loop();
                case '2':
                    dollar_loop();
                case '3':
                    return;
            } // switch 
        }
        catch (std::exception& e)
        {
            // do nothing, let the loop re-run.
        }

    } // while 

} // mainloop 
```

在这种情况下，您甚至不需要对异常做任何事情：您只需让函数继续循环，它就会工作。

# php - 使用 PDO 的语法错误或访问冲突

> ID：11403978
> 
> 赞同：2
> 
> 时间：2012-07-09T22:14:38.703
> 
> 标签：php, pdo

我正在在线迁移我的本地文件，并且我的 db 脚本存在 PHP 问题。在本地工作正常（运行 PHP 5.3.8）但在我的服务器上出现以下错误（PHP 5.3.10）

没有 $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

> 致命错误：在第 108 行的 /.../...php 中的非对象上调用成员函数 setFetchMode()

使用 $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

> SQLSTATE [42000]：语法错误或访问冲突：1142 SELECT 命令拒绝用户 '...'@'205.186.180.26' 用于表 'invited'

这是我的代码：

```
class guest {
    public $id;
    public $guest_name;
    public $url_phrase;
}

$guest = new guest;

if (isset($_GET['p'])) {
    $url_phrase = urldecode($_GET['p']); 
} else if (isset($_POST['p'])) {
    $url_phrase = urldecode($_POST['p']); 
}

if (isset($url_phrase)) {

    try {

    $DBH = new PDO("mysql:host=myhost.com;dbname=mydbname", "myusername", "mypassword");
    $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

    $url_phrase = $DBH->quote($url_phrase);
    $sql = "SELECT id, guest_name, url_phrase FROM mydbname.invited WHERE url_phrase = $url_phrase";

    $stmt = $DBH->query($sql);
    $stmt->setFetchMode(PDO::FETCH_INTO, new guest);

    $guestNumber = $stmt->rowCount();

    if($guestNumber > 0) {
        etc...  
    }
    if($guestType == "solo") {
        foreach($stmt as $guest) {
            $name = $guest->guest_name;
            etc...  
        }
    }
} else {
    other stuff.. etc..
    $DBH = null;
} catch (PDOException $e) {
    echo $e->getMessage();
}
} 
```

作为这个用户，我得到了简单的选择语句可以正常工作（我认为它与权限无关），我的问题似乎与我的 PDO 实现有关。我怎样才能摆脱这个错误？我是否以一种搞砸了的奇怪方式准备/执行声明？谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-13T20:01:37.610

我有同样的问题。在我将代码从本地上传到生产服务器后，用户拥有所有权限。问题是数据库名称——在我的本地环境中，它类似于 dattabase1，而在生产中，名称不同...prefix_ddatabas1。我将数据库的名称更改为正确的名称，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:18:46.750

听起来像是服务器上的访问问题：

> SQLSTATE [42000]：语法错误或访问冲突：1142 SELECT 命令拒绝用户 '...'@'205.186.180.26' 用于表 'invited'

您是否从 CLI（或 PHP 之外的其他一些 sql 客户端）进行了测试，以确保您的脚本可以访问？

您可能需要登录数据库以访问您的脚本正在运行的用户，或者检查您在脚本中使用的凭据对于服务器环境中的数据库是否准确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-05T15:38:11.810

我有同样的问题，代码在开发服务器上工作，但在生产服务器上没有，其他使用同一张表的脚本正在工作。我错过了在 dev 和 prod 环境之间更正数据库表前缀。（数据库名称不一样）^^

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T20:18:31.963

我收到了同样的错误。开发数据库名称与生产数据库名称不同，因此导致此错误。我将代码中的数据库名称更改为生产数据库名称，并且它起作用了。

谢谢

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-09T22:20:11.467

您有访问冲突：

```
Syntax error or access violation 
```

您正在使用的用户/主机：

```
1142 SELECT command denied to user '...'@'205.186.180.26' 
```

无法从“邀请”表中选择

# mysql - 如何在 OS X 上以 root 身份登录 MySQL？

> ID：11403980
> 
> 赞同：13
> 
> 时间：2012-07-09T22:14:53.650
> 
> 标签：mysql, macos, osx-lion, mysql-error-1064

我刚刚在我的计算机（OS X 10.7）上设置了 MySQL，它似乎正在工作，从活动监视器中的“mysqld”和我的系统偏好设置中的新图标来看。

但是，我在使用 MySQL 做任何事情时都遇到了麻烦，因为我至少需要以 root 用户身份登录，但它不允许我这样做。所以让我们来看看我一直在做的事情以及我收到的错误消息：

首先，我通过“mysql” unix 可执行文件启动 MySQL。这似乎有效，因为我的条目现在前面有

```
 mysql> 
```

另外，我可以输入

```
 help; 
```

我得到了 MySQL 的帮助列表。然后我去做一些事情，比如创建一个数据库：

```
 CREATE DATABASE books; 
```

但我收到以下错误：

```
 ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'books' 
```

所以我想我需要登录，并且以 root 用户身份登录就足够了。我输入以下内容：

```
 mysql -u root -p; 
```

但是我收到 1064 错误，说我的语法错误。我浏览了许多网站，这似乎从来都不是一个有问题的步骤。关于我出了什么问题的任何线索？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T22:45:10.533

在**OSX 终端提示符**下，您输入`mysql -u root`以实际启动连接到服务器的命令行客户端。

`shell>`代表您的 shell 提示符实际的样子。

在命令行提示符下键入*后*，您无需**输入**此内容。*`mysql`*

 *这是一个示例会话：

```
shell> mysql -u root
mysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('newpwd');
mysql> SET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('newpwd');
mysql> SET PASSWORD FOR 'root'@'::1' = PASSWORD('newpwd');
mysql> SET PASSWORD FOR 'root'@'host_name' = PASSWORD('newpwd'); 
```

> *注意：*您可能需要在前面`shell> mysql -u root`加上`shell> sudo mysql -u root`

我的 shell 提示符被定制为最后`[jhr@Blackintosh] [/usr/local/mysql-5.5.25a-osx10.6-x86_64/bin]`带有 a `\n`，因此`./mysql -u root`它在下一行输入。其余的是该命令的输出应该是什么。shell 提示符替换为`mysql`程序提示符的提示符。

### 这是我的 shell 输出的样子

```
[jhr@Blackintosh] [/usr/local/mysql-5.5.25a-osx10.6-x86_64/bin] 
./mysql -u root
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 5
Server version: 5.5.25a MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-29T23:11:11.173

执行此命令：

```
mysql -u root -p 
```

将在您的控制台上提示：

```
#:=> Enter password: [enter your pass] 
```

这样你就可以登录mysql dbms

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-18T17:18:48.593

我最近遇到了这个问题，并意识到我的登录路径是 bin/bash，所以如果其他人有这个问题，我是如何解决它的。如果您安装了 XAMPP，请转到您的应用程序文件夹，然后转到 XAMPP 文件夹。然后转到 bin 文件夹。如果您在 bin 文件夹中，这将是您使用以下命令的路径

```
mysql -uroot 
```

现在打开您的终端应用程序，然后在左上角单击终端，然后单击首选项。在它显示“shell open with”的地方，选择默认选项，然后关闭终端窗口。现在重新打开它，你的终端应该像这样开始

```
 Last login: Mon Dec 18 12:06:25 on ttys
 [yourname]-air:~ [yourname]$ 
```

现在输入路径

```
 /Applications/XAMPP/bin/mysql -uroot 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T22:17:38.933

`mysql -u root`如果您有密码设置，或者`mysql -u root -p root`如果您没有。

这将提示`root`密码。无论如何，我总是使用 mac 终端。安装时，只要使用`mysql`就可以登录，并且可以设置密码`root`。我还建议您阅读[创建 MySQL 用户](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-10T00:54:44.710

当你第一次开始在 mac 上使用 mysql 时，没有一个帐户有密码，甚至没有 root。因此，您可以使用 root 和无密码登录，然后您必须按照 Jarrod 的说明设置密码，或者更多详细信息请阅读： [http ://dev.mysql.com/doc/refman/5.0/en/default-privileges.html](http://dev.mysql.com/doc/refman/5.0/en/default-privileges.html)*

# c++ - Excel 不会从 C++ DLL 加载函数

> ID：11403981
> 
> 赞同：0
> 
> 时间：2012-07-09T22:15:10.060
> 
> 标签：c++, excel, vba, dll

大家下午好。

我今天在玩 Excel 和 VBA 加载一些 DLL，看看我会遇到什么样的麻烦。

我制作了自己的非常简单的 DLL 来尝试一下。我一生都无法弄清楚为什么，但是当我尝试运行时，我不断收到“找不到指定的 DLL 函数”消息。

这是我的工作簿中的内容...

```
 Private Declare Sub MouseClick Lib "\location\of\myDLL" Alias "_MouseClick" ()
    'I have also tried...
    'Private Declare Sub MouseClick Lib "\location\of\myDLL" ()

    Sub Test()
            MouseClick
    End Sub 
```

这是我在 DLL 中的简单函数声明...

```
 extern "C" 
    {
            void MouseClick();
            ...
    } 
```

我想也许我的函数的名称在编译时被破坏了，所以我用'nm'来检查......

```
 $ nm myDLL.dll | grep MouseClick
    6df81254 T _MouseClick

    $ nm -C myDLL.dll | grep MouseClick
    6df81254 T MouseClick 
```

我不明白...我已经使用了这两种方法来尝试使其正常工作。另外，我反汇编了一个使用 gdb 调用 MouseClick 函数的函数...

```
 $ gdb myDll.dll
    (gdb) disass testFunction
    Dump of assembler code for function testFunction:
       0x6df81327 <+0>:     push   %ebp
       0x6df81328 <+1>:     mov    %esp,%ebp
                       ...
       0x6df81361 <+58>:    call   0x6df81a44 <SetCursorPos@8>
       0x6df81366 <+63>:    sub    $0x8,%esp
    -> 0x6df81369 <+66>:    call   0x6df81254 <MouseClick>
       0x6df8136e <+71>:    jmp    0x6df8138a <testFunction+99>
                       ...
       0x6df8138a <+99>:    leave
       0x6df8138b <+100>:   ret
    End of assembler dump. 
```

在这里，该功能也被称为“MouseClick”。

我可能会走错路，但我不明白为什么 gdb 和 nm 都显示“干净”的函数名称，但 Excel 不能与我认为的任何一个一起工作。我确实让 dll 与我的 VBA 子一起工作了一段时间，但我更改了文档，现在它无法正常工作。

以前做过这件事的人会善意地为我指出这一切的正确方向吗？我应该在 Excel 中给函数起什么名字？为什么 nm 显示未损坏的函数名称？我是否以正确的方式去做这件事？

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:43:57.273

有人已经经历了所有这些并更新了他的问题以包含解决方案：

[用 C/C++ 编译一个 DLL，然后从另一个程序调用它](https://stackoverflow.com/questions/847396/compile-a-dll-in-c-c-then-call-it-from-another-program)

答案是特定于 gcc 的，这就是您似乎使用的。

# .net - ELMAH：引发 ErrorLog_Logged 事件

> ID：11403983
> 
> 赞同：1
> 
> 时间：2012-07-09T22:15:39.720
> 
> 标签：.net, c#-4.0, elmah

我是新手`ELMAH`，但我想尝试将 GUID 传递给错误页面。

我尝试了[本文](https://stackoverflow.com/questions/2885487/problem-passing-elmah-log-id-to-custom-error-page-in-asp-net)所讨论的内容，但无法触发 ErrorLog_Logged。任何想法为什么会发生这种情况。我是否需要在 web.config 文件中添加一些额外的配置？（对于下面代码的格式，提前抱歉，无法正确显示）。

谢谢，

这是我的 web.config 文件的内容：

```
<?xml version="1.0"?>
<configuration>
<configSections>
<sectionGroup name="telerik.web.ui">
        <section name="radScheduler" type="Telerik.Web.UI.RadSchedulerConfigurationSection, Telerik.Web.UI" allowDefinition="MachineToApplication" requirePermission="false"/>
        <section name="radCompression" type="Telerik.Web.UI.RadCompressionConfigurationSection, Telerik.Web.UI, PublicKeyToken=121fae78165ba3d4" allowDefinition="MachineToApplication" requirePermission="false"/>
    </sectionGroup>
<sectionGroup name="elmah">
  <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah"/>
  <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
  <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
  <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah"/>
</sectionGroup> 
```

这是我的`global.asax`文件的内容

```
void ErrorLog_Logged(object sender, ErrorLoggedEventArgs args)
{
    //if (args.Entry.Error.Exception is HandledElmahException)
    //    return;

    var config = WebConfigurationManager.OpenWebConfiguration("~");
    var customErrorsSection = (CustomErrorsSection)config.GetSection("system.web/customErrors");

    if (customErrorsSection != null)
    {
        switch (customErrorsSection.Mode)
        {
            case CustomErrorsMode.Off:
                break;
            case CustomErrorsMode.On:
                FriendlyErrorTransfer(args.Entry.Id, customErrorsSection.DefaultRedirect);
                break;
            case CustomErrorsMode.RemoteOnly:
                if (!HttpContext.Current.Request.IsLocal)
                    FriendlyErrorTransfer(args.Entry.Id, customErrorsSection.DefaultRedirect);
                break;
            default:
                break;
        }
    }
}

void FriendlyErrorTransfer(string emlahId, string url)
{
    Response.Redirect(String.Format("{0}?id={1}", url, Server.UrlEncode(emlahId)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:27:18.263

在你的 web.config 确保你有

```
<add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" /> 
```

IE

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true">
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
  <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
</modules> 
```

还添加

```
Elmah.ErrorLogModule logModule = new Elmah.ErrorLogModule();
logModule.Logged += new Elmah.ErrorLoggedEventHandler(logModule_Logged);
Elmah.ErrorSignal.FromCurrentContext().Raise(ex); 
```

到你的`Application_Error`功能。

# javascript - 如何在没有 JSONP 的情况下通过 AJAX 调用访问来自不同服务器的数据？

> ID：11403984
> 
> 赞同：3
> 
> 时间：2012-07-09T22:15:40.760
> 
> 标签：javascript, jquery, ajax, cross-domain, cross-domain-policy

我正在开发一个项目，其中客户端在 ServerA 中有后端代码，而我的前端代码（应该通过 AJAX 请求与后端通信）位于 ServerB 上，它们位于不同的域中。由于相同的来源策略，我无法成功发出这些请求（POST 和 GET 都没有）。是否可以在不更改后端代码来处理 JSONP 的情况下以某种方式启用它？例如，将特定域列入白名单，还是什么？

我试图在我的本地网络中模拟这个，后端代码在 10.0.1.4（不同的机器）上运行，我从 localhost（apache）访问它，但无法找出任何不需要的东西使用 jsonp。进行调用时，我什至在后端的日志中都看不到任何内容，但它可以从 REST 客户端正常工作，只需加载 GET 请求的 URL。如何实现不使用 JSONP 的公共 API 请求？

我至少需要一种方法（POST 或 GET）才能工作。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:16:53.463

> 是否可以在不更改后端代码来处理 JSONP 的情况下以某种方式启用它？例如，将特定域列入白名单，还是什么？

是的，您可以在您的域上编写一个服务器端脚本，作为您和远程域之间的桥梁，然后向您的脚本发送 AJAX 请求。

不要期待奇迹。如果您无法控制远程域，您将被淘汰。出于安全原因，内置在浏览器中的[相同来源策略限制会破坏您。](http://en.wikipedia.org/wiki/Same_origin_policy)好吧，您总是可以编写自己的浏览器，但不执行此策略，但我想您明白我的意思。

常见的解决方法包括[JSONP](http://en.wikipedia.org/wiki/Same_origin_policy)和[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但它们涉及对远程域的控制。如果您无法控制，请阅读我的上一句以及我的第一句。

这是一个[很好的指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)，我邀请您咨询，其中涵盖了一些允许使用 jQuery 实现跨域 AJAX 的常用技术。然后调整最适合您的场景的那个。并且总是存在涉及使用服务器端脚本桥接两个域的重型火炮解决方案，如果其他解决方法都没有帮助您，则该脚本在 100% 的情况下可以防弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:19:10.090

> 是否可以在不更改后端代码来处理 JSONP 的情况下以某种方式启用它？例如，将特定域列入白名单，还是什么？

嗯，基本上没有。[您必须通过CORS](http://www.w3.org/TR/access-control/)允许 JSONP 或“白名单”事物（这很容易做到）。或者您可以[使用 YQL 作为跨域代理](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:31:14.287

这里发布了三个解决方案：

[http://devlog.info/2010/03/10/cross-domain-ajax/](http://devlog.info/2010/03/10/cross-domain-ajax/)

我尝试了第三个选项，因为它对我有用..而且我不必承受任何额外的压力，因为它就像处理常规 ajax 调用一样处理事情。

**更新答案，因为这是 2 年前发布的：**

**上面的链接不再有效。**

**服务器端代理：**

旧页面还谈到了使用服务器端代理，这意味着您的服务器调用另一台服务器，获取所有数据并将其发送到基于该服务器的页面。一台服务器从另一台服务器获取数据没有问题。因此，您的页面可以对该服务器进行常规 ajax 调用。我没有选择这个选项，因为它需要更多的体力劳动。所以我建议使用此处详述的选项：

**带有 jQ​​uery 的 JSONP**

1.  确保提供程序支持 JSONP。
2.  将 dataType 选项设置为 jsonp，如果提供者使用除“回调”之外的其他 GET 参数，请为该参数名称指定 jsonp 选项。

`$.ajax({ // ... Use the AJAX utility as you normally would dataType: 'jsonp', // ... });`

jQuery 将为这个请求生成一个唯一的回调名称（类似于 json1268267816）。因此，来自 Web 服务的回复将类似于：

```
json1268267816({'uid': 23, 'username': 'Chroder', 'name': 'Christopher Nadeau'}); 
```

但是 jQuery 可以无缝地处理这一切，因此您作为开发人员只需使用相同的 jQuery 成功/失败/完成回调钩子像普通的 AJAX 请求一样处理它。

**缺点：**

此方法的第一个限制是您必须依赖提供者来实现 JSONP。提供者需要实际支持 JSONP——他们需要用回调函数名称包装他们的 JSON 数据。

然后下一个限制——这是一个很大的限制——是 JSONP 不支持 POST 请求。由于所有数据都作为 GET 数据在查询字符串中传递，因此如果您的服务需要传递长数据（例如，论坛帖子或评论或文章），您将受到严重限制。但对于大多数获取的数据多于推送的数据的消费者服务来说，这并不是什么大问题。

然而，

使用像 jQuery 这样支持 JSONP 的库，插入特殊脚本标签和创建特殊回调函数的这些细节都是自动处理的。使用 JS 库，JSONP 和真正的 AJAX 之间的唯一区别通常是您启用了“jsonp”选项。

# git - 如何从 git 中删除已删除的文件？

> ID：11403985
> 
> 赞同：4
> 
> 时间：2012-07-09T22:15:46.893
> 
> 标签：git, version, push, commit, bitbucket

我已经在bitbucket中提交并推送了一个太大的文件，我已经在本地删除了它，再次提交并推送。但是在站点 bitbucket 上，存储库的大小仍然太大。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T22:26:31.723

听起来您在删除文件的地方创建了一个*新提交。*这意味着该文件仍然存在于先前的提交中。

你需要做的是*重写历史*。假设两个最新的提交正在删除和添加该文件，您可以执行以下操作：

```
git reset --hard HEAD~2
git push --force 
```

这将删除两个最新的提交，然后将其强制推送到 bitbucket。如果这无助于减少站点，您需要联系 bitbucket 支持，以便他们可以`git gc`在您的远程存储库上运行以真正摆脱已删除的提交/文件。

如果您只想删除给定文件*而不*删除整个提交，您可以[按照 GitHub 文档中的说明进行](https://help.github.com/articles/remove-sensitive-data)`git-filter-branch`操作（它不是特定于 GH 的）：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch THE_FILE' \
--prune-empty --tag-name-filter cat -- --all 
```

显然，您需要替换`THE_FILE`为要删除的文件的名称。在此之后，您还需要执行强制推送。

# jquery - jquery / ajax / 表达式引擎 - 在安全破解器表单中设置自定义成员字段

> ID：11403986
> 
> 赞同：1
> 
> 时间：2012-07-09T22:15:49.623
> 
> 标签：jquery, ajax, expressionengine, safecracker

我正在使用带有表达式引擎的 jquery 来提交一个 ajax 表单，利用安全破解模块，记录在这里：

[http://expressionengine.com/user_guide/modules/safecracker/examples.html](http://expressionengine.com/user_guide/modules/safecracker/examples.html)

基本上，我的表格允许登录的会员投票。我希望他们只能投票一次，所以我设置了一个名为“voted”的自定义配置文件数据字段，一旦他们提交表单，我想将其设置为“true”。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:24:46.693

SafeCracker 有一个名为`safecracker_submit_entry_end`( [documentation](http://expressionengine.com/user_guide/modules/safecracker/development.html#id3) ) 的扩展挂钩，因此您可以构建一个使用该挂钩的扩展，然后在该挂钩的方法中执行您需要做的事情。

提示：该扩展挂钩传递了对 SafeCracker 对象的引用，该对象未记录...因此，当您第一次测试扩展时，只需打印该对象，以便您可以查看它包含的内容：

```
function safecracker_submit_entry_end($safecracker)
{
    print_r($safecracker); exit();
} 
```

如果您不熟悉开发扩展和 ExpressionEngine、使用数据库类等，那完全是另一回事。如果是这种情况，我可以发布一些链接让你开始。

# xcode - 将 Google GTL 库添加到 Xcode 项目

> ID：11403991
> 
> 赞同：0
> 
> 时间：2012-07-09T22:16:43.427
> 
> 标签：xcode, libraries

我想将 Google GTL Objective-C 库添加到我的 Xcode 项目中，但我无法解决它，并且几乎没有任何关于该主题的有用信息（Google 的文档很糟糕）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T19:43:47.613

试试这个：

[http://i.stack.imgur.com/n95fl.png](https://i.stack.imgur.com/n95fl.png)

如果它对您没有帮助，只需从 GTL 项目中获取所有需要的文件，然后手动将它们全部添加到您的项目中。像这样的东西：http: [//i.stack.imgur.com/sEt0O.png](https://i.stack.imgur.com/sEt0O.png)

不要忘记为所有这些文件禁用 ARC。

[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

# haskell - 一种更好的方法来映射需要 IO 超过列表的函数

> ID：11403993
> 
> 赞同：3
> 
> 时间：2012-07-09T22:16:48.980
> 
> 标签：haskell

所以最近我有一个字符串列表，需要独立检查每个字符串并执行一些`IO`功能。

所以基本上我所拥有的是：

```
goOverList :: [String] -> IO ()
goOverList (x:[]) = do
    putStrLn x
goOverList (x:xs) = do
    goOverList [x]
    goOverList xs

main = do
    let myList = ["first", "second", "third"]
    goOverList myList 
```

我`IO`的有点复杂，但这就是它的要点（需要有一个函数遍历列表并`IO`根据列表成员执行）我希望有人可以告诉我如何更好地做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T22:21:40.590

您的`goOverList`功能几乎等同于`mapM_ putStrLn`. （几乎是因为`mapM_`它也适用于空列表，而您的函数却不适用）。

[`mapM`](http://hackage.haskell.org/packages/archive/haskell98/latest/doc/html/Prelude.html#v:mapM)是一个函数，它将`a -> IO b`¹ 类型的函数应用于 s 列表中的每个项目，`a`并返回`IO`带有 s 列表的 ² `b`。`mapM_`与它相同，`mapM`只是它不将结果存储在列表中（这对于返回的操作没有意义`()`）`putStrLn`。

¹实际上它比这更笼统：该函数的类型为`a -> m b`where `Monad m`，但在本例`m`中为`IO`.

² 它实际上是 m。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-09T22:42:20.477

sepp2k 和 solrize 是正确的推荐`mapM_`。但是，本着教你钓鱼而不是给你鱼的精神，你可以在未来尝试以下方法：

1.  尝试提出您需要的操作的类型签名。例如，在您的情况下，您需要 type 的东西`(String -> IO ()) -> [String] -> IO ()`。
2.  转到[Hoogle 搜索引擎以查找 Haskell 库](http://www.haskell.org/hoogle/)并搜索该类型。
3.  那个没有结果，所以尝试稍微修改一下类型以使其更通用。替换`String`为`a`get `(a -> IO ()) -> [a] -> IO ()`，然后搜索。

现在[第二次搜索](http://www.haskell.org/hoogle/?hoogle=%28a+-%3E+IO+%28%29%29+-%3E+%5Ba%5D+-%3E+IO+%28%29)的第三个结果是`mapM_ :: Monad m => (a -> m b) -> [a] -> m ()`，这正是你想要的。（第一个答案，`closeFdWith :: (Fd -> IO ()) -> Fd -> IO ()`不是一个相关的结果；第二个，`traverse_ :: (Foldable t, Applicative f) => (a -> f b) -> t a -> f ()`是相关的，但理解和使用有点复杂。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T22:23:19.373

一、易改进：

```
goOverList' :: [String] -> IO ()
goOverList' []     = return ()
goOverList' (x:xs) = do
    putStrLn x
    goOverList' xs 
```

递归的基本情况应该是空列表：在这种情况下，您只需返回`return ()`不执行任何操作的 IO 操作。当你有一个或多个元素时，你打印它并继续列表的其余部分，就这么简单。

同样的事情可以通过更紧凑的定义来实现`mapM_ :: Monad m => (a -> m b) -> [a] -> m ()`：它与常规相同`map`，除了它适用于单子动作。`m [b]`它不会像常规那样返回结果集合`mapM`，而是将其丢弃。在这种情况下，它对您来说很好，因为您只对打印出他列表中的元素感兴趣。

```
goOverList'' :: [String] -> IO ()
goOverList'' = mapM_ putStrLn 
```

为了更通用，我们可以在输入中依赖`print :: Show a => a -> IO ()`而不是`putStrLn`接受每个“可显示”项目列表：

```
goOverList''' :: (Show a) => [a] -> IO ()
goOverList''' = mapM_ print

data T = One | Two | Three deriving (Show)

main = do
    let myList = [One, Two, Three]
    goOverList''' myList 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T22:24:03.330

您的`goOverList`函数可以写`mapM_ putStrLn`在`mapM_`标准 Prelude 中的函数位置。

您还可以简化自己的实现：

```
goOverList :: [String] -> IO ()

goOverList [] = return ()

goOverList (x:xs) = do
    putStrLn x
    goOverList xs 
```

# jquery - load link src into iframe with jquery

> ID：11403994
> 
> 赞同：0
> 
> 时间：2012-07-09T22:16:51.620
> 
> 标签：jquery, iframe, src

I was wondering if it's possible to have jQuery look at a group of links within a div class, and when one of those links are clicked the src of that link will load in the iframe.

I think it would be something like

```
$(function() {
$('.link_group a').on('click', function(){
   $('iframe#frameID').attr('src', $(this).attr);
});
}); 
```

EDIT- my jQuery now looks like this

```
$(function() {
$('.link_group a').on('click', function(){
$('iframe#frameID').attr('src', $(this).prop('href'));
});
}); 
```

HTML

```
<div class="link_group">
<a href="Link 1.asp">Link 1</a>
<a href="Link 2.asp">Link 2</a>
<a href="Link 3.asp">Link 3</a>
<a href="Link 4.asp">Link 4</a>
</div> 
```

but thats definitely not working..

Would anyone know how to do this properly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:18:40.383

You have to pass a parameter to the `attr()` method, and also select which attribute:

```
$(this).attr('href') 
```

Or, more recently in jQuery:

```
$(this).prop('href'); 
```

Also, an `id` is unique within the document, so unless you use exactly the same script in other pages and use that `id` on other element types, specifying the `iframe` is redundant, and potentially slows down your selector.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:18:21.650

try:

```
$(this).attr("href") 
```

or preferably in jQuery 1.6+:

```
$(this).prop("href") 
```

instead of:

```
$(this).attr 
```

# components - 如何使用操作组件每个实例的 API 在 D3 中创建可重用组件？

> ID：11403996
> 
> 赞同：7
> 
> 时间：2012-07-09T22:17:00.313
> 
> 标签：components, d3.js

Mike 有一篇关于在 D3 中编写[可重用组件的优秀文章。](http://bost.ocks.org/mike/chart/)本文描述了如何使组件可配置以及如何将组件应用于选择的模式。

该模式允许通过将单个组件对象连接到数据来重复使用多个选择；例如

```
var chart = myChart();

d3.select("div.chart")
  .data(data)
  .call(chart); 
```

我的组件实现如下所示：

```
function myChart() {

    function my(selection) {
        selection.each(function(d, i) {

            // generate chart here
            // `d` is the data, `i` is the index, `this` is the element

            var state = false;

            var circle = d3.select(this).append("circle")
                .attr("r", "10")
                .style("fill", "#000")
                .on("click", toggleState);

            function toggleState() {
                // this function updates the current instance trapped by this closure
                (state = !state)
                    ? circle.style("fill", "#fff")
                    : circle.style("fill", "#000");
            }
        });
    }

    my.toggleState(i) {
        // How do I access the `i`th instance of the component here?
    }

    return my;
} 
```

我想要实现的是允许调用者在给定索引的情况下操作该组件的实例。例如，如果`div.chart`上面的选择器返回一个包含两个元素的选择，我想调用`chart.toggleState(1)`并让它更新选择中的第二个 div。

只是为了不让任何人混淆我为什么要这样做，调用者需要将两种类型的组件同步在一起。想象一下，我有一个由圆形表示的组件和另一个由矩形表示的组件。这两个组件必须是独立的，不能相互捆绑。我需要能够创建 4 个圆和 4 个矩形，当我单击一个矩形时，我希望能够根据索引顺序更新相应的圆。我已经想出了如何从组件中引发事件（d3.dispatch）并提供当前索引作为事件中的参数，但我还没有想出如何在给定索引的情况下调用组件的特定实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T13:05:52.587

我认为最简单的方法是为每个组件提供相同的类。然后当你打电话时`chart.toggleState(1)`你可以做`d3.selectAll('.component').each(function(d, i) { if (i == index) doWhatever; });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T22:31:59.217

特定选择的数据在 selection[0] 中。您可以选择第 i 个元素并因此设置属性：

```
var i = 3
d3.select(mySelection[0][i]).attr("fill","#fff") 
```

如果你知道 i，你可以这样写 toggleState：

```
function toggleState(i) {
    var toggle_me = d3.select(circles[0][i])
    var state = !(toggle_me.attr("fill") == "#fff")
    toggle_me.attr("fill", (state ? "#fff": "#000"))
} 
```

如果你不知道 i，你可以这样写 toggleState：

```
function toggleState() {
    var toggle_me = d3.select(this)
    var i = circles[0].findIndex(function(d) {
        return d == toggle_me[0][0]
    })
    if (i !== -1) {
        var state = !(toggle_me.attr("fill") == "#fff")
        toggle_me.attr("fill", (state ? "#fff": "#000"))
      // Do additional functions with i here
      //var triange = d3.select(triangles[0][i])
      //...
    }
} 
```

工作示例：[https ://jsfiddle.net/fd7fyeoq/](https://jsfiddle.net/fd7fyeoq/)

对于不同上下文中的相同答案，请参阅： [d3js：如何选择组的第 n 个元素？](https://stackoverflow.com/questions/29278107/d3js-how-to-select-nth-element-of-a-group)

# iphone - 如何通过调整将图标添加到 SpringBoard

> ID：11403997
> 
> 赞同：0
> 
> 时间：2012-07-09T22:17:01.013
> 
> 标签：iphone, ios, tweak, logos

我想做一个 iOS 调整，向 SpringBoard 广告一个图标，但我找不到任何解决方案。我找到了 IconSupport，但我从未使用过它，也找不到任何示例或开源项目。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:27:00.600

只需将 .png 文件添加到您的项目中。对于 iPhone，它需要为 57x57 像素，如果您愿意，您可以为视网膜添加 114 像素的版本。转到您的应用程序的项目信息（导航器中的蓝色图标），然后在应用程序信息选项卡中有两个图标空间。将文件拖到适当的空间，然后您将在应用程序的跳板中看到它们