# StackOverflow 问答 12057000-12057999

# asp.net-mvc - Asp.Net MVC 和 HTML5 PUSH 通知

> ID：12057003
> 
> 赞同：16
> 
> 时间：2012-08-21T14:23:33.263
> 
> 标签：asp.net-mvc, html, push-notification

我想在一个完整的 HTML5 应用程序中有服务器端事件。

服务器端 我有一个 asp.net MVC3 Web 服务器，它提供 HTML 页面和 JSON 结果。

集成某些服务器事件的最佳方式是什么？像一个可以向客户端发送一些文本消息的进程？

我进行了一些搜索，发现了一些关于 Asp.Net web api 的信息，但我不知道它是什么以及是否可以将它与 MVC 一起使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T14:26:19.767

你应该看看[http://signalr.net/](http://signalr.net/)库。这篇[博文](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)也非常翔实。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T14:31:12.887

SignalR 看起来很有趣，但可能比你真正需要的要多。我经常想知道为什么人们不经常使用服务器发送事件，我没有机会，但它看起来是最简单的实现方式。

如果您想查看，这是 MVC 中的一个示例：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2012/04/10/using-html5-server-sent-events-with-json-和-asp-net-mvc.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2012/04/10/using-html5-server-sent-events-with-json-and-asp-net-mvc.aspx)

# php - 在 PHP 中发送具有大量值的表单

> ID：12057005
> 
> 赞同：0
> 
> 时间：2012-08-21T14:23:37.297
> 
> 标签：php, forms

我正在开发一种形式，人们可以通过托盘系统订购餐饮服务（按试吃大小、中型和大型订购食物），但我在弄清楚如何做到这一点时遇到了麻烦。我的第一个想法是这样编码：

```
<form id="tray" name="tray" method="post" action="send_mail_tray.php" onsubmit='return packageValidator()'>
<table>
    <tr>
        <td>Pork Fried Rice</td>
        <td>
            Med.:<br />
            Lg. :
        </td>
        <td>
            <input type="text" name="PorkFriedRiceMed" style="width: 20px; height: 15px" /><br />
            <input type="text" name="PorkFriedRiceLg" style="width: 20px; height: 15px" />
        </td>
        <td>Vegetable Spring Rolls</td>
        <td>
            Med.:<br />
            Lg. :
        </td>
        <td>
            <input type="text" name="VegetableSpringRollsMed" style="width: 20px; height: 15px" /><br />
            <input type="text" name="VegetableSpringRollsLg" style="width: 20px; height: 15px" />
        </td>
        <td>Beef w/ Broccoli</td>
        <td>
            Med.:<br />
            Lg. :
        </td>
        <td>
            <input type="text" name="Beefw/BroccoliMed" style="width: 20px; height: 15px" /><br />
            <input type="text" name="Beefw/BroccoliLg" style="width: 20px; height: 15px" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="Submit" value="Submit" />
        </td>
    </tr>
</table>
</form> 
```

使用这种方法，我必须能够将变量名称与值一起发布。起初我认为这将是最好的方法，然而，在考虑之后，提供的食物列表超过 150，这意味着我必须创建超过 300 个 $_POST 才能获取整个菜单和我的电子邮件将要发送必须包含列表中的所有项目，即使它们没有被订购。有没有更简单的方法来制作我正在做的表格，或者我的第一种方法是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:31:17.703

这些值是否来自数据库？如果不是，那么他们应该......或者至少你从某种数据结构动态生成表单，例如

```
$menu = array(
   0 => array('name' => 'Vegetable Spring Rolls', 'sizes' => array('L', 'M', 'S')),
   1 => array('name' => 'foo', 'sizes' => array(...)),
   etc...
); 
```

然后你用

```
foreach($menu as $key => $item) {

    echo <<<EOL
<input type="text" name="item_{$key}" value="{$item['name']}" />

EOL;
} 
```

请注意，我只是在输出项目名称 - 而不是单个项目的大小。这只是为了使这个例子简短。

提交表单后，您可以执行另一个循环：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
   foreach ($menu as $key => $item) {
      if (isset($_POST["item_{$key}"]) && !empty($_POST["item_{$key}"])) {
        .... item has non-zero quantity specified ...
      }
   }
} 
```

简而言之，如果您正确构建表单，那么无论有多少字段，您仍然可以自动处理它们，而代码开销很小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:47:51.063

请注意，在帖子中发送所有这些数据，也可能会导致**查询字符串过长**错误

另一个最佳解决方案也可以通过**ajax**来完成，因为如果列表很长，您可以在保存循环内向用户反馈一个进度条。

该列表可以很容易地拆分为几组，在 Json 中编码并在登录页面中获取 json 数据。您可以举个例子，在一个`$.each`jQuery 中，里面有一个 max item 变量。

Ajax 调用可以很容易地用 jQuery`$.getJson`或普通的`$.ajax`

如果您认为此解决方案可以提供帮助，我们可以添加更多信息，但网络已完整记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:37:52.027

拥有这么多名字可能会很痛苦。

使用 PHP 5，您可以影响这样的名称

```
<input type="text" name="food[PorkFriedRice][med]"> ...
<input type="text" name="food[PorkFriedRice][lg]"> 
```

使用 $_POST 获取它们时，您可以通过以下方式访问它们

```
foreach ($_POST['food'] AS $piece => $sizes)
{
    $medSize = $sizes['med'];
    $lgSize = $sizes['lg'];
    ...
} 
```

提示：要节省一些 HTML 大小，最好在输入中添加一个 CSS 类来设置样式：

`#tray input { width:20px; height:15px }`

# java - 具有本机 @WebService 支持的可嵌入 Web 服务器作为 Endpoint.publish 的替代方案

> ID：12057008
> 
> 赞同：7
> 
> 时间：2012-08-21T14:23:45.470
> 
> 标签：java, web-services, endpoint

我花了一些时间调查 Endpoint.publish 能做什么和不能做什么，看来您很快就进入了无证领域。

如果您构建一个简单的独立应用程序，该应用程序使用 Endpoint.publish 公开一个或多个 @WebService 注释类，然后您遇到无法再使用 Endpoint.publish 的情况（出于任何原因），那么最简单的迁移路径是什么?

我知道您可以使用 sun-jaxws.xml 和可选的 Metro jar 创建 WAR，然后您可以将其部署到嵌入式 Web 服务器（如 Jetty 或 Winstone），但我喜欢简单的“获取 THIS 类并在 THIS url 上公开它”没有任何 XML 或完整容器的 Endpoint.publish() API。

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:20:23.563

[据说](http://weblogs.java.net/blog/jitu/archive/2006/07/how_to_use_endp.html)您可以通过一个实例来自[`com.sun.net.httpserver.HttpServer`](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html)定义端点的 HTTP 行为。谨慎使用`com.sun`API 始终是一个好主意，但根据您的具体情况，它可能是合适的。例如，有一个[HttpsServer](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpsServer.html)子类可用于提供 SSL。

这个过程似乎是：

1.  用于[`HttpServer.create(new InetSocketAddress(listenPortNumber), waitQueueDepth)`](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html#create%28java.net.InetSocketAddress,%20int%29)创建服务器实例。
2.  用于[`server.createContext("/path")`](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html#createContext%28java.lang.String%29)创建将托管端点的上下文。
3.  使用 . 创建端点`Endpoint.create(new RpcLitEndpoint())`。目前尚不清楚在哪里`RpcLitEndpoint`定义或是否严格要求；它可能是 Metro JAX-WS 的一部分。
4.  调用`endpoint.publish(context)`以将端点与`HttpServer`（或`HttpsServer`）实例相关联。

完成后，使用`endpoint.stop`和`server.stop`关闭。

blogs.oracle.com上还有一个[博客条目，](https://blogs.oracle.com/oleksiys/entry/how_to_create_custom_network)描述了自定义网络传输的创建。它没有足够的细节让我通过快速扫描获得很好的理解，但也许你可以从中得到更多。

# wcf - WCF WPF Silverlight wsDualHttpBinding pollingDuplexHttpBinding

> ID：12057009
> 
> 赞同：1
> 
> 时间：2012-08-21T14:23:45.907
> 
> 标签：wcf, silverlight

我正在努力工作几个小时才能让这个 Silverlight 双工工作，但一次又一次失败，

我有 A)WCF 服务应用 B) WPF 客户端 C) Silverlight 客户端（我需要 +host 吗？！）

我成功连接 A<=>B - 工作正常，我的问题是 A<=>C (Silverlight Duplex Client)

*   我可以以某种方式拥有 2 个端点吗？wsDualHttpBinding 和 pollingDuplexHttpBinding ？尝试并失败

无法加载合同“Service2.IService1”的端点配置部分，因为找到该合同的多个端点配置。请按名称指明首选端点配置部分。

*   pollingDuplexHttpBinding 可以在 WPF 上工作吗？

*   帮助 ！谢谢 ！

**网络配置**

```
<!-- Register the binding extension from the SDK. -->
<extensions>
  <bindingExtensions>
    <add name="pollingDuplexHttpBinding"
         type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,
               System.ServiceModel.PollingDuplex, 
               Version=4.0.0.0, 
               Culture=neutral, 
               PublicKeyToken=31bf3856ad364e35" />
  </bindingExtensions>
</extensions>

<client>
  <endpoint address="http://localhost:8732/Service1/" binding="wsDualHttpBinding" bindingConfiguration="wsDualHttpBinding" contract="TheWCFService.IService1" name="WSDualHttpBinding_Service1" />
</client>

<bindings>

  <wsDualHttpBinding>
    <binding name="wsDualHttpBinding" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483646" maxArrayLength="2147483646" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </wsDualHttpBinding>

  <pollingDuplexHttpBinding>
    <binding name="multipleMessagesPerPollPollingDuplexHttpBinding"
             duplexMode="MultipleMessagesPerPoll"
             maxOutputDelay="00:00:07"/>
  </pollingDuplexHttpBinding>

</bindings>

<services>

  <service behaviorConfiguration="" name="TheWCFService.Service1">

    <endpoint address="" 
              binding="wsDualHttpBinding" 
              bindingConfiguration="wsDualHttpBinding" 
              contract="TheWCFService.IService1">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>

    <endpoint 
      address="mex"
      binding="mexHttpBinding" 
      bindingConfiguration="" 
      contract="IMetadataExchange" />

    <!--<endpoint
       address="/2"
       binding="pollingDuplexHttpBinding"
       bindingConfiguration="multipleMessagesPerPollPollingDuplexHttpBinding"
       contract="TheWCFService.IService1">
    </endpoint>-->

    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Service1/" />
      </baseAddresses>
    </host>

  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
        <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false" />
      <serviceThrottling maxConcurrentSessions="500" maxConcurrentCalls="500" maxConcurrentInstances="500" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:55:58.633

所以是的，可能有超过 2 个端点：

第一步：

```
<endpoint address="wsDualHttpBinding" 
                  binding="wsDualHttpBinding" 
                  bindingConfiguration="wsDualHttpBinding" 
                  contract="TheWCFService.IService1">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint 
          address="mex"
          binding="mexHttpBinding" 
          bindingConfiguration="" 
          contract="IMetadataExchange" />

        <endpoint
           address="pollingDuplexHttpBinding"
           binding="pollingDuplexHttpBinding"
           bindingConfiguration="multipleMessagesPerPollPollingDuplexHttpBinding"
           contract="TheWCFService.IService1">
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Service1/" />
          </baseAddresses>
        </host> 
```

**第二步：非常重要：WCF Cross Domain SecurityException**

[http://www.itscodingtime.com/post/Silverlight-to-WCF-Cross-Domain-SecurityException.aspx](http://www.itscodingtime.com/post/Silverlight-to-WCF-Cross-Domain-SecurityException.aspx)

第三步：

Silverlight 客户端：

```
 var x = new WCFService.Service1Client(
                    new PollingDuplexHttpBinding { DuplexMode = PollingDuplexMode.MultipleMessagesPerPoll, },
                    new EndpointAddress(@"http://localhost:59732/Service1.svc/pollingDuplexHttpBinding")
                    ); 
```

WPF客户端：

```
>  _objProxy = new Service1Client(new InstanceContext(this),
> "WSDualHttpBinding_IService1"); 
```

# c# - 超链接gridview中的列

> ID：12057011
> 
> 赞同：0
> 
> 时间：2012-08-21T14:23:53.287
> 
> 标签：c#, asp.net

我正在使用 boundfield 来显示列：

```
<Columns>
<asp:BoundField  DataField=”AccountCode” HeaderText=”Account Code”&gt;
    <ItemStyle Font-Size=”Large” />
</asp:BoundField>
<asp:BoundField  DataField=”AccountName” HeaderText=”Account Name”      
        FooterText=”Enter Footer Text”&gt;
    <FooterStyle CssClass=”FooterStyle” />
</asp:BoundField >
<asp:BoundField  DataField=”Type” HeaderText=”Account Type” /> 
```

我有 4 种类型的帐户（a、b、c 或 d）。我想根据 4 种不同的帐户类型超链接帐户类型列。基本上，我想根据选择的帐户类型链接到 4 个不同的网页之一。我在 Visual Studio 2010 中使用 C#。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:37:53.463

为此使用[HyperLinkField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield%28v=vs.90%29.aspx)：

```
<asp:HyperLinkField HeaderText="Account Type"
    DataTextField="Type"
    DataTextFormatString="{0}"
    DataNavigateUrlFields="TypeID"
    DataNavigateUrlFormatString="~\AccountType.aspx?type={0}"          
    Target="_blank" /> 
```

或者，如果您对不同的帐户类型有完全不同的 URL，请使用[TemplateField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield%28v=vs.90%29)。由于 URL 选择涉及一些逻辑，我已将其移至此处的代码。

```
<asp:TemplateField HeaderText="Account Type">
    <ItemTemplate>
        <asp:HyperLink runat="server"
            Text="Type"
            NavigateUrl='<%# GetAccountTypeUrl(Eval("Type")) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

`GetAccountTypeUrl`以及后面代码中的方法：

```
protected string GetAccountTypeUrl(object typeName)
{
    string type = typeName as string;

    switch (type)
    {
        case "a":
            return "url_a";
        case "b":
            return "url_b";
        case "c":
            return "url_c";
        case "d":
            return "url_d";
        default:
            return string.Empty;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:50:14.767

尝试以下

而不是`<asp:BoundField DataField=”Type” HeaderText=”Account Type” />`使用

```
<asp:TemplateField HeaderText="Account Type">
<ItemTemplate>
   <a href='<%# String.Format("~/AccountType.aspx?type={0}", Eval("Type")) %>'><%# Eval("Type") %></a>
</ItemTemplate>
</asp:TemplateField> 
```

# php - 在 foreach 循环中编辑 SimpleXML 节点

> ID：12057013
> 
> 赞同：0
> 
> 时间：2012-08-21T14:23:54.103
> 
> 标签：php, simplexml

我正在尝试在循环中编辑节点值。我可以很好地编辑具有唯一名称的节点。

```
 $gdNodes->orgName = 'test'; 
```

但是当我处于循环中时，输出 XML 时不会保存该值。

```
foreach($gdNodes->phoneNumber as $phone)
{
    $phone = '1234567';
} 
```

两者都是 SimpleXMLElement 类对象。我不明白为什么它不保存。它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:29:09.860

它不会保存，因为它`$phone`是原始值的标量副本。

你应该能够像这样达到你的目标：

```
foreach($gdNodes->phoneNumber as $key => $phone)
{
    $gdNodes->phoneNumber[$key] = '1234567';
} 
```

# android - Bundle 未附加到 PendingIntent

> ID：12057016
> 
> 赞同：0
> 
> 时间：2012-08-21T14:24:11.593
> 
> 标签：android, android-intent, bundle, android-pendingintent

这是我创建 PendingIntent 的代码：

```
Bundle b = new Bundle();
b.putCharSequence("Dest", myTrip.inboundFlights.get(i).getDestination());
b.putCharSequence("Orig", myTrip.inboundFlights.get(i).getOrigin());
b.putLong("DepTime", myTrip.inboundFlights.get(i).getEtd().getTime());
Intent myIntent = new Intent("NotificationActivity");
myIntent.putExtras(b);
System.out.println(myIntent.getExtras());
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 
```

根据我发现的所有内容，这应该可以工作，但是当我尝试访问活动中的捆绑包时，它是 NULL。

这是活动：

```
public class NotificationActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    System.out.println(savedInstanceState);

    NotificationManager mNotificationManager;
    mNotificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    Context context = getApplicationContext();
    int icon = R.drawable.app_icon;
    CharSequence tickerText = "tickerText";
    CharSequence contentTitle = "title";

    CharSequence contentText = savedInstanceState.getCharSequence("Dest"); //Here's the crash with null pointer exception
    Intent notificationIntent = new Intent(this, NotificationActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    long when = savedInstanceState.getLong("DepTime");
    int id = (int) savedInstanceState.getLong("DepTime");//temporary will change later
    Notification notification = new Notification(icon, tickerText, when);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    mNotificationManager.notify( id, notification);
    finish();

}
} 
```

这是 AndroidManifest.xml 中用于活动的部分：

```
<activity android:name=".Helpers.NotificationActivity" >
        <intent-filter>
            <action android:name="NotificationActivity" />
            <category android:name="android.intent.category.DEFAULT" /> 
        </intent-filter>
    </activity> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:31:46.643

我想你可能想试试

```
Bundle data = getIntent().getExtras();
CharSequence contentText = data.getCharSequence("Dest"); 
```

代替

```
CharSequence contentText = savedInstanceState.getCharSequence("Dest"); 
```

# javascript - 深度嵌套的backbone.js 对象会导致错误？

> ID：12057017
> 
> 赞同：2
> 
> 时间：2012-08-21T14:24:12.730
> 
> 标签：javascript, backbone.js

我正在使用以下命名空间方案开发一个项目：

```
var abc = {};
abc.models = {};
abc.views = {};

abc.models.Collection = Backbone.Collection.extend({}); 
```

当我试图创建一个新集合时，我收到以下错误

```
var collection = new abc.models.Collection({this:"that"});
TypeError: Object #<Object> has no method '_reset' 
```

当我将构造函数移动到`abc.Collection`错误停止时，一切都根据需要开始工作。

有人可以帮我理解这是为什么吗？

我还应该补充一点，这是多文件应用程序的一部分，其中每个文件都包含以下内容：

```
(function($, abc){

//module contents here

}(jQuery, abc)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T22:45:40.653

这有效：

```
var abc = {};
abc.models = {};
abc.views = {};
abc.models.Collection = Backbone.Collection.extend({});
var collection = new abc.models.Collection([], {}); 
```

而这次旅行[`Uncaught TypeError: Object #<Object> has no method '_reset'`](http://jsfiddle.net/sKXJF/)：

```
var abc = {};
abc.models = {};
abc.views = {};
abc.models.Collection = Backbone.Collection.extend({});
var collection = abc.models.Collection([], {}); 
```

不同之处在于不使用 调用构造函数`new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:29:34.273

新 Backbone Collection 的第一个参数是一个模型数组，然后是一个选项哈希。您是否尝试传入模型数组，如果没有，则传入空数组：[]

# asp.net-mvc - 对于移动浏览器，有时会返回桌面版本

> ID：12057019
> 
> 赞同：0
> 
> 时间：2012-08-21T14:24:16.337
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-4

我们有一个在 ASP.NET MVC4 RC1 上运行的站点。根据客户端，它呈现 index.aspx 或 index.mobile.aspx。

这可以流畅地工作，直到某个时间点为某些页面呈现桌面版本。即使设置通常强制呈现移动视图的 cookie .ASPXbrowseroverride 仍会呈现桌面版本。可以通过重新启动应用程序/触摸 web.config 将行为重置为正常。

这一切看起来像是在 ASP.NET MVC4 中实现移动功能时缓存或静态变量的一些问题。我能做些什么吗？

我们使用了fiftyoneMobile，但是当我们不使用它时问题是一样的。

我们没有启用 OutputCache 并使用 Webforms 视图引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:16:45.210

这个问题是已知的，它是 MVC4 RC 中的一个错误。在这里，您可以找到问题的描述以及如何解决此错误的答案。

[http://forums.asp.net/t/1824033.aspx/2/10?MVC+4+RC+Mobile+View+Cache+bug+](http://forums.asp.net/t/1824033.aspx/2/10?MVC+4+RC+Mobile+View+Cache+bug+)

这里是 codeplex 工作项的链接：

[http://aspnetwebstack.codeplex.com/workitem/280](http://aspnetwebstack.codeplex.com/workitem/280)

格雷茨

# jquery - 为什么 .html() 不能在 class="error aTitle" 上工作

> ID：12057020
> 
> 赞同：1
> 
> 时间：2012-08-21T14:24:17.600
> 
> 标签：jquery, html

我正在尝试使用 jQuery 更改以下内容的 HTML

```
'<label for="aTitle" generated="true" class="error aTitle" style=""></label>'; 
```

但是，如果我使用下面的 jQuery 代码，则没有任何变化。我无法删除那里的空间。还有其他方法可以使这项工作吗？

```
$(".error aTitle").html("Hello <b>world!</b>"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:25:38.520

删除空格并添加`.`类选择器`aTitle`

```
$(".error.aTitle").html("Hello <b>world!</b>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:46:01.657

```
class="error aTitle" 
```

您实际上在这里设置**了两个**类，而不是一个。该元素具有类`error`并且它具有类`aTitle`。

您要选择具有两个类的元素：

```
$('.error.aTitle') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:38:52.037

您当前的选择器`$(".error aTitle")`表示要匹配`<aTitle>`其父元素具有 CSS class 的所有元素`.error`，这并不是您想要的。

要选择所需的元素，您需要将选择器更改为`$('.error.aTitle')`. 每个类之前都必须有一个句点（表示 CSS 类），否则它将被视为一个元素（即 a `<div>`）。选择器中项目之间的空格表示继承，因此使用类似选择器`$('.error .aTitle')`意味着您要选择所有具有 CSS 类的`.aTitle`元素，其父元素具有 CSS 类`.error`。

另一个可以使用的选择器的进一步示例（可能有点矫枉过正）是，它表示使用和的 CSS 类`$('label.aTitle.error')`选择所有。此选择器将不匹配，例如.`<label>``.aTitle``.error``<input type="text" class="error aTitle" />`

# javascript - Javascript类链接地图库

> ID：12057023
> 
> 赞同：2
> 
> 时间：2012-08-21T14:24:21.967
> 
> 标签：javascript, method-chaining

我在一个项目中工作，其中许多模块在 5-6 个不同的 JavaScript 文件中实现。函数 1 回调函数 2 哪个回调函数 3 等等...

有没有可以解析所有js文件，并绘制所有回调的思维导图的库或软件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:27:46.830

从来没听说过。我认为您直到运行时才能知道。然后，您可以使用 javascript 控制台查看堆栈。

`console.trace()`应该有用

*   [http://getfirebug.com/wiki/index.php/Console_API#console.trace.28.29](http://getfirebug.com/wiki/index.php/Console_API#console.trace.28.29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:29:00.707

我发现了 2 个从 JS 代码构建 UML 图的工具：http: [//jsuml.org/](http://jsuml.org/) 和 [http://code.google.com/p/jsuml2/](http://code.google.com/p/jsuml2/) 这可能会创建您想要的东西。

如果这是您搜索的主要目标，您可以获得一个可以简化调试的堆栈跟踪，您可以在这里获得它：http: [//stacktracejs.com/](http://stacktracejs.com/)

这里还有另一个简单的：

[http://eriwen.com/javascript/js-stack-trace/](http://eriwen.com/javascript/js-stack-trace/)

您还可以使用这个具有提供堆栈跟踪功能的 Webkit：

[http://www.webkit.org/blog/1544/web-inspector-understanding-stack-traces/](http://www.webkit.org/blog/1544/web-inspector-understanding-stack-traces/)

# c# - 使用 URL 获取页面主要内容

> ID：12057025
> 
> 赞同：0
> 
> 时间：2012-08-21T14:24:27.523
> 
> 标签：c#, asp.net, url

我需要能够从某个 url 获取页面主要内容。我需要做的一个很好的例子如下：[http ://embed.ly/docs/explore/preview?url=http%3A%2F%2Fedition.cnn.com%2F2012%2F08%2F20%2Fworld% 2Fmeast%2Fflight-phobia-boy-long-way-home%2Findex.html%3Fiid%3Darticle_sidebar](http://embed.ly/docs/explore/preview?url=http://edition.cnn.com/2012/08/20/world/meast/flight-phobia-boy-long-way-home/index.html?iid=article_sidebar)

我正在使用带有 C# 语言的 asp.net。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:56:12.623

解析 html 页面并猜测主要内容并不是一个简单的过程。我建议使用[NReadability](http://code.google.com/p/nreadability/)和[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

这是一个如何完成的示例。在 NReadability 对页面进行转码后，正文始终`div`带有 id 。`readInner`

```
string url = "http://.......";

var t = new NReadability.NReadabilityWebTranscoder();
bool b;
string page = t.Transcode(url, out b);

if (b)
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(page);

    var title = doc.DocumentNode.SelectSingleNode("//title").InnerText;
    var text = doc.DocumentNode.SelectSingleNode("//div[@id='readInner']")
                  .InnerText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:57:12.063

男人，

我猜它是使用[WebClient Class](http://msdn.microsoft.com/pt-br/library/system.net.webclient%28v=vs.80%29.aspx)或[WebRequest Class](http://msdn.microsoft.com/pt-br/library/system.net.webrequest.aspx)的实现来实现的。有了它，您可以下载页面的所有内容，然后使用任何数据挖掘算法，您可以获得您想要的信息。

[]的

# google-chrome-extension - 将 Google Doc 的信息显示为 Chrome 扩展的 HTML

> ID：12057035
> 
> 赞同：0
> 
> 时间：2012-08-21T14:25:36.520
> 
> 标签：google-chrome-extension, google-drive-api, google-docs-api

我想创建一个 Chrome 扩展程序，在 HTML“popup.html”上显示 Google Doc（文档或电子表格）的内容。单击栏中的扩展名时。

是否有任何教程、参考或替代方法可以让我快速清洁？

# javascript - FF 和 Chrome 中的 ftp:// 网页不加载 file:// 脚本

> ID：12057039
> 
> 赞同：0
> 
> 时间：2012-08-21T14:25:49.760
> 
> 标签：javascript, firefox, google-chrome, ftp, file-uri

我正在构建一个只能通过 ftp 访问的网页：

[ftp://192.168.0.1.cutthis/mypage.html](ftp://192.168.0.1.cutthis/mypage.html)

这个 url 在浏览器中打开页面，就像我使用 http 协议一样。

该页面包含一个动态 GUI。为了使其开发更容易，我已将所有 javascript 移至我可以访问的机器 (192.168.0.2)，因此我可以更快速地对其进行编辑。在 mypage.html 的 html 源代码中，脚本行是：

```
<script type="text/javascript" src="file://///192.168.0.2/myscript.js"></script> 
```

FF 和 Chrome 加载脚本（Firebug 证实了这一点）但不运行它。只有 IE 运行它。

如何强制 FF 和/或 Chrome 运行脚本？或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:46:01.723

MDN 谈到[相同的来源政策](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)：

> 同源策略防止从一个源加载的文档或脚本从另一个源获取或设置文档的属性。

`myscript.js`来自原点`file:////192.168.0.2/`，但它被加载到带有原点的页面中`ftp://192.168.0.1.cutthis`。我的猜测是跨域脚本无法执行您期望它执行的操作，因为它是从不同的来源加载的。

解决方案是将脚本和页面托管在同一个源上（即，也可以通过本地 HTTP 服务器来提供 HTML 页面`file://`，或者甚至更好地在本地 HTTP 服务器上提供它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T15:47:10.863

跨协议脚本？

**方法一：**

对于 Chrome 尝试扩展：LocalLinks

对于 FF 尝试扩展：LocalLink、本地文件系统链接、IE 选项卡

**方法二：**

使用 --allow-file-access-from-files 标志运行 Chrome，或者尝试使用其他禁用跨站点脚本的标志（警告：这很危险）

在 FF 中配置安全策略（为您的站点创建特殊策略 - 在此处阅读：[Links_to_local_pages_don't_work](http://kb.mozillazine.org/Links_to_local_pages_don%27t_work)，[Security_Policies](http://kb.mozillazine.org/Security_Policies)）

但是，我仍然不确定所有这些是否有帮助。FTP：URL 是一个特例

# css - Firefox 在打印预览中忽略字体 - 字体不起作用

> ID：12057040
> 
> 赞同：0
> 
> 时间：2012-08-21T14:25:52.420
> 
> 标签：css, firefox, printing, fonts, print-preview

我有以下问题：我使用安装在我的系统上的特殊字体。它在我的`screen`-view 上运行良好，但在`print preview`Firefox 中只使用我的标准字体。

正如我所说，字体已安装，我没有使用任何花哨的`CSS3`技巧。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:25:52.420

经过令人沮丧的一天搜索互联网并重写我的代码后，我终于找到了答案！您需要禁用 Firefox' `hardware acceleration`！

只需按照以下步骤操作：

```
Tools > Options > Advanced > General Tab > Disable hardware acceleration
Restart Firefox 
```

我在[这个页面](http://www.favbrowser.com/firefox-ignores-font-family/)上找到了它。

# google-app-engine - 按不带时间戳的相反创建顺序对查询中的实体进行排序。GAE/J

> ID：12057044
> 
> 赞同：0
> 
> 时间：2012-08-21T14:25:56.817
> 
> 标签：google-app-engine, jdo, datanucleus

我们使用 GAE w Java 和 JDO 2.3。有没有办法以与创建顺序相反的方式对 JDO 查询的实体进行排序？我认为如果我们使用索引列而不是时间戳，它将提高性能。这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:49:30.473

您不能依赖数据存储服务不断分配的 id。

但是您可以将时间戳设置为您的键名的一部分，或者使用 分配一个连续的 id 范围[`DatastoreService.allocateIds`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#allocateIds%28java.lang.String,%20long%29)，以确保您的键单调递增。

然后，您应该能够使用 对实体键进行排序[`KEY_RESERVED_PROPERTY`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Entity#KEY_RESERVED_PROPERTY)。

与索引时间戳属性相比，如果要查询完整实体，您将保存额外的索引查找，但对于`key only`查询没有什么不同。

请注意，降序排序将需要附加索引，如[App Engine JDO 查询文档中所述](https://developers.google.com/appengine/docs/java/datastore/jdo/queries#Queries_on_Keys)

如果您拥有具有单调键或索引的实体的高写入吞吐量，还要注意[热平板电脑问题。](http://ikaisays.com/2011/01/25/app-engine-datastore-tip-monotonically-increasing-values-are-bad/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:49:57.507

如果您在单个时间戳列上进行查询和排序，appengine 将为您创建一个索引，并且查询将非常快。

# c++ - 递减结束迭代器

> ID：12057046
> 
> 赞同：6
> 
> 时间：2012-08-21T14:26:07.320
> 
> 标签：c++, stl, iterator

我今天正在阅读有关支持双向迭代的容器的内容，这段代码是有效的：

```
Collection c(10, 10);
auto last = --c.end();
*last; 
```

这让我开始思考，是否需要将一对双向迭代器 [beg, end) 提交给 STL 中定义了 --end 的算法？如果是这样，结果应该是可取消引用的吗？

IE

```
void algo(T beg, T end){
    //...
    auto iter = --end;
    //...
    *iter;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:38:44.753

你读错了。该表达`--c.end()`从未被授权。如果迭代器至少不是双向的，实际上它是明确禁止的，并且需要编译器错误。如果集合为空，则为未定义行为。**在所有其他情况下，如果**它编译，它将工作 ，但不能保证它会编译。它无法与许多早期实现一起编译`std::vector`，例如，迭代器只是指向指针的 typedef。（事实上​​，我正式认为它在所有情况下都是未定义的行为，因为您违反了对模板化实现的约束。但是，在实践中，您会得到我刚才描述的内容。）

可以说，因为不能保证，一个好的实现会导致它无法系统地编译。由于各种原因，大多数人不这样做。不要问我为什么，因为让它系统地失败非常简单：只需`operator--`将迭代器上的 设为自由函数，而不是成员。

编辑（附加信息）：

它不是必需的这一事实可能是C++11背后`std::next`的很大一部分动机。`std::prev`当然，无论如何，我从事的每个项目都有它们。正确的写法是：

```
prev( c.end() ); 
```

当然，迭代器是双向的或更好的，容器不为空的约束仍然成立。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T14:59:43.733

如果算法需要由双向迭代器定义的范围`first`和`last`，则`--last`需要在相同的条件下有效`++first`- 即范围不为空。范围为空当且仅当`first == last`。

如果范围不为空，则`--last`评估为引用范围中最后一个元素的迭代器，因此`*--last`确实也需要有效。

也就是说，并没有那么多标准算法需要专门的双向迭代器（并且不需要随机访问）。`prev`, `copy_backward`, `move_backward`, `reverse`, `reverse_copy`, `stable_partition`, `inplace_merge`, `[prev|next]_permutation`.

如果您查看其中一些所做的事情，您应该会看到该算法通常会减少范围结束迭代器并取消引用结果。

正如 James 所说，对于容器，该函数*按 value*`end()`返回一个迭代器。没有一般要求对于应该是格式正确的表达式的迭代器 when是类型的右值。例如，指针是双向迭代器，声明为的函数按值返回指针，并且不是格式良好的表达式。碰巧的是，对于您在实现中查看的容器，返回一个已定义为成员函数的类类型，因此代码可以编译。它也可以工作，因为容器不是空的。*`--x``x``int *foo();``--foo()``end()``operator--`*

 *请注意，在这方面存在差异：

```
auto last = --c.end(); 
```

对比

```
auto last = c.end();
--last; 
```

前者减少一个右值，而后者减少一个左值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:29:23.320

每个算法都会告诉你它需要什么类型的迭代器。当调用双向迭代器时，它自然需要支持递减。

是否`--end`可能取决于是否`end == beg`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:27:41.327

只有需要双向迭代器的算法才需要它。*

# javascript - 关联数组并使用 parent d 作为 selection.data() 的源数组

> ID：12057050
> 
> 赞同：2
> 
> 时间：2012-08-21T14:26:21.277
> 
> 标签：javascript, json, d3.js, binding

我正在尝试从一些 csv 数据创建堆积条形图。阅读了 Scott Murray 的教程[http://alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)（顺便说一句：这是我遇到的关于 d3.js 的最佳教程，应该在 d3 wiki 上真正链接），以及 Andrew Davis 的教程我将以下试用代码散列在一起以创建我需要的矩形：

```
window.onload = function()
{
var LikertData = [{a:0,b:1},{a:0,b:1},{a:0,b:1},{a:0,b:1},];
var w = 200;
var h = 200;

var svg = d3.select("body").append("svg")
        .attr("width", w)
        .attr("height", h);

var myG  = svg.selectAll("g")
        .data(LikertData)
        .enter()
        .append("g")
        .text(function(d)
        {
        var myRect = d3.selectAll("rect")
        .data(d.entries)
        .enter()
        .append("rect");
        return myRect;
            });
} 
```

这个想法是，对于形成 LikertData 数组的每个数组，将一个矩形添加到父 g 元素。但是，它不起作用。我是不是有点暖和了？

编辑：这更接近我想要的 - 我已经指出了让我难过的 .data 以及我想用于数据的内容：

```
window.onload = function()
{
    d3.csv("likert.csv", function(LikertData){
        var svg = d3.select("body").append("svg")

        var myG  = svg.selectAll("g")
            .data(LikertData)
            .enter()
            .append("g")
            .selectAll("rect")
            .data()//<--I want data to use an array of key values for the parent g's d
            .enter()
            .append("rect");
    });
} 
```

使用 console.log(d3.entries(LikertData)) 产生多个对象，如下所示 - 所以数据是关联的：

```
[
Object
    key: "50"
    value: Object
        Agree: ""
        Always: "39.1%"
        Disagree: ""
        Neutral: ""
        Never: "4.3%"
        Row Labels: "I run out of time in long tasks"
        Sometimes: "52.2%"
        Strongly Agree: ""
        Strongly Disagree: ""
        Unanswered: "4.3%"
        __proto__: Object
    __proto__: Object
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:53:34.950

不会太远。尝试

```
var LikertData = [{a:0,b:1},{a:0,b:1},{a:0,b:1},{a:0,b:1},];
var w = 200; var h = 200; 

var svg = d3.select("body").append("svg")
  .attr("width", w)
  .attr("height", h);

var myG  = svg.selectAll("rect")
  .data(LikertData).enter()
  .append("rect")
  .attr("x", function(d, i) { return i * 50; })
  .attr("y", function(d, i) { return i * 50; })
  .attr("width", 50)
  .attr("height", 50); 
```

和属性定位矩形`x`，`y`你需要给它们一个宽度和高度。如果您想将它们包装在一个`g`元素中，只需`.append("g")`在调用之前添加`data()`- 但这不是必需的。

该`text`函数只能用于设置文本内容——不要用它来添加新元素。您也没有嵌套数组，因此您只需要一次调用`.data()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:59:49.710

最终代码简化 - 更改 csv 的解析方式以使用 parseRows 函数导致创建一个数组数组，允许我将外部 d 作为 .data 的源：

```
window.onload = function()
{   
    d3.text("likert.csv", function(LikertData){
        var parsedData = d3.csv.parseRows(LikertData);

        var svg = d3.select("body")
        .append("svg");

        var g = svg.selectAll("g")
        .data(parsedData)
        .enter()
        .append("g");

        var gRect = g.selectAll("rect")
            .data(function(d){return d})
            .enter()
            .append("rect");

    });
} 
```

# magento - 多个多语言网站的 Magento 产品翻译

> ID：12057053
> 
> 赞同：8
> 
> 时间：2012-08-21T14:26:33.990
> 
> 标签：magento, translation, product

我想知道如何有效地管理我的 Magento 产品目录。我保留一份产品库存并通过多个网站销售它们，这些网站又都使用多种语言。

最常见的建议是为每个网站创建一个商店，并为每种语言创建一个不同的商店视图，您可以在其中翻译产品描述。这对我来说似乎不是很有效。例如，如果您有 4 个不同的网站，每个网站都提供英语和西班牙语的产品，那么您必须为每个网站进行 4 次相同的翻译。这对于多种语言的多个网站和很多产品来说变得非常麻烦。

我最理想的做法是为每种语言维护一份翻译，并集中跟踪我的产品库存（即仍然能够在全球范围内管理产品）。如何在 Magento 中实现这一点？

**更新：**在研究了更多内容、在 IRC 频道中提问、在论坛上发帖以及搜索 Google 和 Magento Connect 扩展存储库之后，我开始意识到这是 Magento 的缺点之一。我将为此开发自己的解决方案。如果您对相同的功能感兴趣，请在此处留言，如果有足够的响应，我会看看是否可以将其提供给其他人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-22T14:29:34.203

Unfortunately there is no good answer to this question. Product texts are typically entered on the store view level, like you already discovered. Having multiple store views in the same language (but under different websites) will create a burden and overhead to configure.

If this was my store, I would pick one of these routes:

*   Load data from an external source, where product data is already nicely managed. Managing product data in Magento can be a pain.
*   Or, if you MUST do it in Magento, create a custom module to update all the relevant fields across multiple websites. You could create an event listener "on product save", that updates all texts for store views with the same language.
*   or, you can override the product resource model, so product names, descriptions and some other texts are loaded differently from the database (but this would definately be the most complicated route).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:50:52.327

在 App/Locale/ Directory 中，这是全局语言环境目录，您可以在从一个后端管理的所有网站中读取它！

您可以为每个 storeview 设置本地目录

系统->配置->设计->翻译

所以基本上你可以为不同的主题使用相同的语言环境，只要你维护所有变量更新的文件！

我从一个后端运行 9 个具有不同商店视图的网站，我从来没有遇到过翻译问题！

# spring - Spring 3.0 / AOP / Aspectj:autoproxy 拦截对 getConnection() 的任何调用

> ID：12057063
> 
> 赞同：3
> 
> 时间：2012-08-21T14:27:08.000
> 
> 标签：spring, connection, aop, aspectj

我正在尝试拦截对 getConnection() 方法的任何调用以设置 dbms 标识符。我已经实现了一个方面来获得它，但我什么也没得到。任何的想法？谢谢！

```
import java.sql.CallableStatement;
import java.sql.Connection;

import javax.servlet.http.HttpSession;

import org.aspectj.lang.annotation.AfterReturning;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.stereotype.Component;
import org.springframework.web.context.request.RequestAttributes;
import org.springframework.web.context.request.RequestContextHolder;

import es.iberia.tryp.model.entities.Usuario;

@Component
@Aspect
public class ConnectionAspect {

    @AfterReturning(value = "execution(java.sql.Connection javax.sql.DataSource+.getConnection(..))", returning = "connection")
    //@AfterReturning(value = "execution(java.sql.Connection org.springframework.jdbc.datasource.*.*(*))", returning = "connection")
    //@AfterReturning(value = "execution(java.sql.Connection java.sql.Connection *(..))", returning = "connection")
    //@AfterReturning(value = "execution(java.sql.Connection org.springframework.jdbc.datasource.DriverManagerDataSource.*(..))", returning = "connection")

    public void prepare (Connection connection) throws Throwable {

        HttpSession httpSession = (HttpSession) RequestContextHolder.currentRequestAttributes().resolveReference(RequestAttributes.REFERENCE_SESSION);

        if (httpSession!=null && (Usuario)httpSession.getAttribute("usuario")!=null && ((String)((Usuario)httpSession.getAttribute("usuario")).getNomina())!=null) {
            String nomina = (String)((Usuario)httpSession.getAttribute("usuario")).getNomina();
            String prepSql = "{ call DBMS_SESSION.SET_IDENTIFIER('" + nomina +"') }";
            CallableStatement cs = connection.prepareCall(prepSql);                             
            cs.execute();
            cs.close();         
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:58:30.053

检查您是否在 xml 文件中添加了以下标记。

aop:aspectj-autoproxy

还要检查您是否在 xml 中为此 ConnectionAspect 类添加了 bean 定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T23:35:30.757

是的，我有一个想法：实际上，您的切入点与所需的调用匹配，但它们位于**java**包中，该包（如**javax**包）在默认情况下被排除在编织之外。

有一种方法可以通过[命令行](https://bugs.eclipse.org/bugs/show_bug.cgi?id=149261#c11)和[aop.xml](http://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html)删除该限制，但请注意有关类加载的潜在问题。您必须确保加载 java 类的类加载器附加了一个[编织器](https://bugs.eclipse.org/bugs/show_bug.cgi?id=149261#c13)，因此如果您可以选择不使用 LTW，只需编织 JDK 类文件并使用那些编织类，就可以了。否则你可能会遇到“母鸡和鸡蛋”的问题。

# asp-classic - 通过经典 ASP 更新 MS Access 数据库中的现有字段

> ID：12057065
> 
> 赞同：0
> 
> 时间：2012-08-21T14:27:10.527
> 
> 标签：asp-classic

我已经获得了工作 ASP 代码，我必须更改这些代码才能更新数据库中的现有数据，以便创建新条目。我认为我应该将 INSERT INTO 语句与 UPDATE 交换，但代码有点过于复杂，我无法弄清楚在哪里以及要更改什么。它来了：

```
// *** Edit Operations: declare variables

// set the form action variable
var MM_editAction = Request.ServerVariables("SCRIPT_NAME");
if (Request.QueryString) {
MM_editAction += "?" + Server.HTMLEncode(Request.QueryString);
}

// boolean to abort record edit
var MM_abortEdit = false;

// query string to execute
var MM_editQuery = "";

// *** Insert Record: set variables

if (String(Request("MM_insert")) == "AddRecord") {

  var MM_editConnection = MM_PhoneWeb_conn_STRING;
  var MM_editTable  = "Employees";
  var MM_editRedirectUrl = "userRegister.asp";
  var MM_fieldsStr =     "textSurname|value|textFirstname|value|textUsername|value|textPass|value";
  var MM_columnsStr =     "Surname|',none,''|FirstName|',none,''|Username|',none,''|Password|',none,''";

  // create the MM_fields and MM_columns arrays
  var MM_fields = MM_fieldsStr.split("|");
  var MM_columns = MM_columnsStr.split("|");

  // set the form values
  for (var i=0; i+1 < MM_fields.length; i+=2) {
    MM_fields[i+1] = String(Request.Form(MM_fields[i]));
  }

  // append the query string to the redirect URL
  if (MM_editRedirectUrl && Request.QueryString && Request.QueryString.Count > 0) {
    MM_editRedirectUrl += ((MM_editRedirectUrl.indexOf('?') == -1)?"?":"&") +     Request.QueryString;
  }
}

// *** Insert Record: construct a sql insert statement and execute it

if (String(Request("MM_insert")) != "undefined") {

  // create the sql insert statement
  var MM_tableValues = "", MM_dbValues = "";
  for (var i=0; i+1 < MM_fields.length; i+=2) {
    var formVal = MM_fields[i+1];
    var MM_typesArray = MM_columns[i+1].split(",");
    var delim =    (MM_typesArray[0] != "none") ? MM_typesArray[0] : "";
    var altVal =   (MM_typesArray[1] != "none") ? MM_typesArray[1] : "";
    var emptyVal = (MM_typesArray[2] != "none") ? MM_typesArray[2] : "";
    if (formVal == "" || formVal == "undefined") {
      formVal = emptyVal;
    } else {
      if (altVal != "") {
        formVal = altVal;
      } else if (delim == "'") { // escape quotes
        formVal = "'" + formVal.replace(/'/g,"''") + "'";
      } else {
        formVal = delim + formVal + delim;
      }
    }
    MM_tableValues += ((i != 0) ? "," : "") + MM_columns[i];
    MM_dbValues += ((i != 0) ? "," : "") + formVal;
  }
  MM_editQuery = "insert into " + MM_editTable + " (" + MM_tableValues + ") values (" +     MM_dbValues + ")";

  if (!MM_abortEdit) {
    // execute the insert

    var MM_editCmd = Server.CreateObject('ADODB.Command');
    MM_editCmd.ActiveConnection = MM_editConnection;
    MM_editCmd.CommandText = MM_editQuery;
    MM_editCmd.Execute();
    MM_editCmd.ActiveConnection.Close();

    if (MM_editRedirectUrl) {
      Response.Redirect(MM_editRedirectUrl); 
```

# php - 打开谷歌地图，从 PHP 变量中获取地址

> ID：12057066
> 
> 赞同：0
> 
> 时间：2012-08-21T14:27:16.703
> 
> 标签：php, google-maps, web-applications, iphone-web-app

我有一个存储在 php 变量中的地址（比如`$add`）。我正在尝试在我的 中创建一个链接，`Web App`单击该链接将打开带有标记的`Google Maps`应用程序。我不想将地图嵌入网络应用程序中。`iPhone``$add`

任何人都可以给出一些指示如何去做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:33:06.377

只需链接到`http://maps.google.com/maps?q=<?=$add?>`这个应该默认打开iPhone上的地图应用程序（顺便说一下android）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:49:48.040

您可以通过 url 参数发送数据：

在这里查看信息：

[谷歌地图参数](http://mapki.com/wiki/Google_Map_Parameters)

# windows-8 - Windows8：设备标识符

> ID：12057069
> 
> 赞同：4
> 
> 时间：2012-08-21T14:27:20.683
> 
> 标签：windows-8, winjs

我目前正在尝试检索唯一的设备标识符。这是我的代码：

```
var token = Windows.System.Profile.HardwareIdentification.getPackageSpecificToken(null);
var reader = Windows.Storage.Streams.DataReader.fromBuffer(token.id);

reader.unicodeEncoding = true;
var identifier = reader.readString(reader.unconsumedBufferLength);

console.log(identifier); 
```

但它会引发以下错误：

> 该操作试图访问有效范围之外的数据。

如何检索我的*token.id*字符串的大小？我也尝试使用*token.id.length*，但结果是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:51:10.267

我目前无法尝试复制您正在执行的操作，但您可以尝试将其作为字节读取到数组中，如下所示：

```
var array = new Array(token.id.length);
reader.readBytes(array); 
```

然后将数组转换为标识符的字符串。

有关示例，请参阅这些帖子：

*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1e2175e3-fe07-4094-9454-b3ecf1bf0381](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1e2175e3-fe07-4094-9454-b3ecf1bf0381)
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/cdf72b9f-b3c0-488e-b607-b4445a5039b3](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/cdf72b9f-b3c0-488e-b607-b4445a5039b3)

# iphone - 从父 UIViewController 类继承 UI 组件？

> ID：12057080
> 
> 赞同：0
> 
> 时间：2012-08-21T14:27:41.857
> 
> 标签：iphone, interface, uiviewcontroller, xamarin.ios, monodevelop

我有一个自定义 UIViewController 类，其中包含我的其他 UIViewController 类共享的类似方法和 UI 组件。我想知道这些其他类是否有可能不仅继承方法，还继承 UI 组件，这样我就不必去每个类都添加相同的按钮等？在 UI 设计中，父控制器和继承控制器并不完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:33:16.083

如果需要，您可以从 nib/xib 加载视图。为此，您可以使用该方法

```
[... initWithNibName:@"NibName" bundle:[NSBundle mainBundle]] 
```

[你可以在这里](https://stackoverflow.com/questions/1448207/how-to-load-an-xib)找到一个例子

# java - 如何在 pom.xml 中配置 aspectj？

> ID：12057086
> 
> 赞同：1
> 
> 时间：2012-08-21T14:27:51.577
> 
> 标签：java, maven, aspectj

在我的项目中，我使用方面进行日志记录。当我使用`eclipse compiler`时，一切正常，但我遇到了一些问题`Maven`。不显示日志 - 没有“看到”方面类。

我试过用谷歌搜索它，但[apache 教程](http://maven.apache.org/maven-1.x/plugins/aspectj/)对我来说并不清楚。其他教程是关于`spring`.

我应该在 pom.xml 中添加什么？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Agent</groupId>
  <artifactId>Agent</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
      <resource>
        <directory>src</directory>
        <excludes>
          <exclude>**/*.java</exclude>
        </excludes>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>

      <plugin>  
        <groupId>org.codehaus.mojo</groupId>  
        <artifactId>aspectj-maven-plugin</artifactId>  
        <version>1.3</version>  
        <configuration>  
          <complianceLevel>1.5</complianceLevel>  
        </configuration>  
        <executions>  
        </executions>  
      </plugin>  

    </plugins>
  </build>

  <dependencies>
    <dependency>
      <groupId>org.aspectj</groupId>
      <artifactId>aspectjrt</artifactId>
      <version>1.7.0</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:36:12.213

试试这个。如果你不需要弹簧

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>myproject</groupId>
    <artifactId>aspectj-project</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>
    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.8</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.6</source>
                            <target>1.6</target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>java</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <mainclass>myproject.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

# java - 清除 Android 3.x 上的图案锁定

> ID：12057087
> 
> 赞同：2
> 
> 时间：2012-08-21T14:27:51.810
> 
> 标签：java, android, policy, device-admin, corporate-policy

***我在做什么***

为了公司政策，我需要从设备中删除（清除）图案/密码/密码。我正在使用 `resetPassword (String password, int flags)`Device [Admin API](http://developer.android.com/guide/topics/admin/device-admin.html)。

*作为*

```
public boolean resetPassword(String newPassword) {
        if(ActivityManager.isUserAMonkey()) {
            // Don't trust monkeys to do the right thing!
            AlertDialog.Builder builder = new AlertDialog.Builder(this.context);
            builder.setMessage("You can't reset my password because you are a monkey!");
            builder.setPositiveButton("I admit defeat", null);
            builder.show();
            return false;
        }
        boolean active = mDPM.isAdminActive(mDeviceAdmin);
        if(active) {
            return mDPM.resetPassword(newPassword.trim(), DevicePolicyManager.RESET_PASSWORD_REQUIRE_ENTRY);
        }
        return false;
    } 
```

*通过调用*

```
resetPassword(""); 
```

***问题描述***

如果在设备上激活了模式锁定并且操作系统版本是 3.0、3.1 或 3.2，我称之为`resetPassword("")`它会给我一个安全例外

`WRTITE_SECURE_SETTINGS`允许。*但固件应用程序可以访问此权限。*

*此问题将在以下页面讨论*

[设备策略管理器 - 重置密码 - Android 3.0 问题](http://code.google.com/p/android/issues/detail?id=17083) 和 [设备策略管理器 - 重置密码 - Android 3.0 问题](https://stackoverflow.com/questions/6085580/device-policy-manager-reset-password-android-3-0-problems)

所以，我的问题是***如何清除 3.0、3.1 或 3.2 版本的模式锁定？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:34:02.757

> 如何清除 3.0、3.1 或 3.2 版本的模式锁定？

显然，您不能，除非作为固件的一部分安装的应用程序。

# c# - div如何默认隐藏onload事件

> ID：12057092
> 
> 赞同：0
> 
> 时间：2012-08-21T14:28:03.230
> 
> 标签：c#, javascript, xml, xslt

我有一个下拉列表，默认情况下在页面加载时显示“选择”选项。下面是一个`DataGrid`包含一些数据的。当下拉菜单选择“选择”时，如何隐藏 div 中的数据？当我将选项更改为“选择”以外的选项时，我希望它显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:32:10.673

假设当页面加载时，下拉列表没有选择（因此显示“选择”），默认情况下，只需通过在您的 css 文件中添加类似这样的内容来隐藏您的 DataGrid：

```
#myDataGrid{
   display: none;
} 
```

and when the selection changes, show it (using jQuery for example):

```
jQuery('#mySelect').change(function(){
    //(this assumes that your select option has value 'select')
    if(jQuery("#mySelect").val() == 'select'){
        jQuery('#myDataGrid').hide();
    }else{
        jQuery('#myDataGrid').show();
    }
}); 
```

# c# - 如何获取选定的 ListView 项？

> ID：12057093
> 
> 赞同：6
> 
> 时间：2012-08-21T14:28:04.390
> 
> 标签：c#, wpf

> **可能重复：**
> [WPF Listview 访问 SelectedItem 和子项](https://stackoverflow.com/questions/1402878/wpf-listview-access-to-selecteditem-and-subitems)

我的 xaml 中有一个列表视图，我想在代码隐藏中获取所选项目。事实上，我想获取项目的内容（这是一个对象）。我试过做 MyListView.SelectedItems[0] 但它不起作用，我有“访问器获取或设置预期”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:32:03.257

我猜你应该使用[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)而不是[SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.selecteditems.aspx)：

> 当 SelectionMode 不等于 Single 时，应使用此属性。如果选择模式是 Single，则要使用的正确属性是 SelectedItem。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:30:42.067

您可以尝试使用此代码

```
var selectedItems = MyListView.SelectedItems;
foreach (ListViewItem selectedItem in selectedItems)
{
   //Treatment
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T14:31:23.507

你如何使用它？应该是`MyListView.SelectedItems[0]`。

```
MyObject foo = (MyObject)MyListView.SelectedItems[0]; 
```

您可能应该添加一些检查是否`SelectedItems`包含实际项目并且`SelectedItem`对象确实是 a `MyObject`，但您明白了。

另外，如果您选择一个项目`SelectedItem`，我认为。

# php - Symfony2 - 将服务注入 SonataAdmin

> ID：12057098
> 
> 赞同：2
> 
> 时间：2012-08-21T14:28:19.267
> 
> 标签：php, symfony, symfony-sonata, dbal

我想从 SonataAdmin 类中获得一个数据库连接'`configureFormFields()`

肯定这不起作用

```
protected function configureFormFields(FormMapper $formMapper)
{
    $mycnx = $this->get('doctrine.dbal.mycnx_connection');
//... 
```

我需要它来扩展`Sonata/UserBundle/Admin/Entity/UserAdmin`

我怎样才能从这个类中调用服务？

* * *

上下文：

我需要有一个选择字段（公司），其选择来自其他连接（来自存储过程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:10:41.030

你要做的是：

*   创建一个服务来注入连接以获取公司
*   创建自定义字段
*   将其注册为服务并在构造函数中注入第一个服务
*   为该领域提供选择

    ```
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
    #... 
    ```

然后你就可以简单地使用它`configureFormFields()`：

```
->add('company', 'company') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T00:20:59.320

## 如何使用第二个 dbal 连接为表单域提供选择

实际上，您可以更轻松地完成此操作，并且涉及的代码更少……

* * *

**配置**

如果您已经设置了第二个连接，您的配置看起来有点像这样`doctrine.dbal.mycnx_connection`。

`app/config/config.yml`

```
doctrine:
    dbal:
        connections:
            default:
                driver:   "%database_driver%"
                host:     "%database_host%"
                port:     "%database_port%"
                dbname:   "%database_name%"
                user:     "%database_user%"
                password: "%database_password%"
                charset:  UTF8
            mycnx_connection:                       # credentials for 2nd connection
                driver:   "pdo_mysql"
                host:     "%database_host_2%"
                port:     "%database_port_2%"
                dbname:   "%database_name_2%"
                user:     "%database_user_2%"
                password: "%database_password_2%"
                charset:  UTF8

        default_connection:   default 
```

现在，如果您还没有...配置使用此连接的[第二个实体/文档管理器：](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

`app/config/config.yml`

```
doctrine:
    # dbal, ...
    orm:
        entity_managers:
            default:
                connection:       default
                mappings:
                    AcmeDemoBundle: ~
                    AcmeStoreBundle: ~
            company:      # <- setup a second em using the customer connection
                connection:       customer
                mappings:
                    AcmeCompanyBundle: ~

        default_entity_manager:   default 
```

* * *

...这可能看起来很像，但实际上并非如此...因为如果您有第二个 dbal 连接，**上述所有内容都应该已经存在于您的应用程序中。**

我只是想让它对其他人来说非常明显。

您现在有两个服务可以反映您的两个实体经理：

*   `@doctrine.orm.entity_manager.default`( ... 别名为`@doctrine.orm.entity_manager`)
*   `@doctrine.orm.entity_manager.company`

* * *

**实体字段类型**

现在剩下要做的就是使用[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html#em)并将其配置为使用实体管理器使用`company`连接。

`Acme/YourBundle/Form/Type/YourType.php`

```
use Doctrine\ORM\EntityRepository;
// ...

$builder->add('users', 'entity', array(
    'class'         => 'AcmeCompanyBundle:Company',
    'em'            => 'doctrine.orm.entity_manager.company',  // <- non-default em here
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('company')
            ->orderBy('company.name', 'ASC');
    },
)); 
```

就是这样......虽然你可能仍然想让你的表单成为服务......你不必注入任何东西。

您不需要使用... 如果您不想为您的公司创建存储库，您可以只返回一个 QueryBuilder 实例`EntityRepository $er`。`'query_builder'`

* * *

## 只是我的几分钱......快乐的编码！

# css - 是否可以为特定的 MVC 视图指定 CSS 类？

> ID：12057099
> 
> 赞同：1
> 
> 时间：2012-08-21T14:28:26.740
> 
> 标签：css, asp.net-mvc, jquery-ui

我在我的 MVC 视图中覆盖了一些 jQuery UI CSS 类。

我想将所有样式元素移动到外部样式文件。但我不希望覆盖的 CSS 类应用于所有视图。

有没有办法为特定视图指定 CSS 类，或者有什么推荐的方法来解决这个问题？

如果可能的话，我宁愿只保留一个 css 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:32:00.480

您可以在要覆盖其中的样式的视图主体中添加一个 id。

HTML：

```
<body id="specialview">
  ...
</body> 
```

CSS：

```
#specialview .class_override { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:32:22.573

假设当您说“类”时，您的意思是“规则集”：

由于您添加了坚持使用一个 CSS 文件的要求（并且我假设您不需要内联`<style>`元素）：

在每个选择器前面加上一个[id 选择器](http://www.w3.org/TR/css3-selectors/#id-selectors)和一个[后代组合](http://www.w3.org/TR/css3-selectors/#descendant-combinators)器：`#someid`

然后将 id 添加到视图的 body 元素中：`<body id="someid">`

因此：

```
.foo { text-decoration: overline; } 
```

变成

```
#myFirstView .foo { text-decoration: overline; } 
```

**警告**：这将增加每个选择器的[特异性](http://www.w3.org/TR/css3-selectors/#specificity)（在特定于您的视图的规则集组中）。这可能会改变这些规则和通用“应用于每一页”规则的应用顺序。您可以通过为所有共享规则添加前缀`#generic`并添加`<html id="generic" lang="en">`.

# ruby-on-rails - Rails - 具有多种值类型的 EAV 模型？

> ID：12057104
> 
> 赞同：1
> 
> 时间：2012-08-21T14:28:44.560
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, model

我目前有一个模型`Feature`被其他各种模型使用；在此示例中，它将由客户使用。

为了保持灵活性，Feature 用于存储名字、姓氏、姓名、出生日期、公司注册号等内容。

您会注意到这个问题 - 虽然其中大部分是字符串，但理想情况下，诸如出生日期之类的特征将存储在 Date 类型的列中（并且将是日期选择器，而不是视图中的文本输入）。

这将如何最好地处理？目前我只有一个字符串列“值”；我考虑过使用多个值列（例如 string_value、date_value），但这似乎不是特别有效，因为每条记录中总会有一个空列。

非常感谢任何有关如何处理此问题的建议 - 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:02:00.650

根据您的需要，我可以通过多种方式看到您这样做。我对其中任何一个都不完全满意，但也许它们可以为您指明正确的方向：

1.  序列化一切

Rails 可以将任何对象存储为字节流，而在 Ruby 中一切都是对象。因此，理论上您可以将任何对象的字符串表示形式存储在数据库列中，包括字符串、日期时间，甚至您自己的模型。[Marshal](http://corelib.rubyonrails.org/classes/Marshal.html)模块大部分时间都会为您处理这个问题，如果您的对象有特殊需要，您可以编写自己的序列化方法。

优点：真正将任何内容存储在单个数据库列中。

缺点：处理数据库中数据的能力很小 - 基本上不可能将此列用作存储以外的任何内容 - 您（可能）无法根据它对数据进行排序或过滤，因为格式不会t 是数据库可以识别的任何东西。

1.  每种数据类型的列

这基本上是您在问题中建议的解决方案 - 准确找出您可能需要存储的数据类型 - 您提到了字符串和日期戳。如果其中没有太多，则可以简单地为每种类型设置一个列，并且只在其中一个中存储数据。您可以覆盖属性访问器函数以使用正确的列，并且从外部，Feature 将表现得好像`.value`是您需要的任何东西。

优点：只需要一张桌子。

缺点：每条记录中至少有一个空值。

1.  多个模型/表格

您可以为您可能需要的每种功能创建一个模型 - TextFeature、DateFeature 等。[本关于多表继承的指南](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)传达了这个想法和方法。

优点：没有空值 - 每条记录只包含它需要的列。

缺点：复杂性。除了需要多个模型之外，如果您需要直接使用数据库中不同类型的功能，您可能会发现自己在执行复杂的连接和联合。

# c - 这个方法声明有什么问题？

> ID：12057110
> 
> 赞同：1
> 
> 时间：2012-08-21T14:29:09.573
> 
> 标签：c, methods, boolean

```
bool somemethod(int number){
    return true;
} 
```

当我尝试使用此方法编译代码时，我不断收到此错误消息

```
/Users/user/Desktop/test.c:14: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘somemethod’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:30:10.263

Thing is`bool`不是 C 中的真正关键字。`stdbool.h`如果需要，请包含它 - 这应该适用于 C99 实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:10:49.877

是的， bool 不是 C 中的关键字，因此从编译器的角度来看，您没有包含返回，因此是错误。

```
#include <stdbool.h> 
```

应该解决您的问题，我之前一直在无法包含此头文件的系统上...如果您不想/不能包含 stdbool.h 您还有其他一些选择：

```
#define true 1
#define false 0
typedef char bool 
```

沿着这些路线的东西将允许您继续正常工作。

# php - Magento：需要一个 if case for is a product name/sku/id is equal to X

> ID：12057114
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:29:20.200
> 
> 标签：php, magento, e-commerce

尝试输入这是我能做到的最简单的方法。

我想要做的是过滤选项，我通过创建一个大的 if else 语句来手动编码（长篇故事）。

IE：如果产品 sku=1234 则显示以下内容。我只有大约 14 种产品，所以这并不像我想象的那么疯狂。但我似乎无法弄清楚我需要的代码。

如果您需要我提供更多详细信息，请告诉我，非常感谢您提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:36:42.977

`if($product->getSku() == 12345)`

你在说什么！？:-)

您要过滤产品吗？

建立一个观察者，监听 product_collection_load_before 事件，检查发送给 action 的参数然后改变 product_colletion where。

# php - 如何处理节点xml xpath之前的连字符（-）

> ID：12057115
> 
> 赞同：0
> 
> 时间：2012-08-21T14:29:19.513
> 
> 标签：php, xml, xpath

大家好，所以我有一个xml问题，它有 - 在节点之前，我不知道如何用xpath正确处理这个问题，所以xml看起来像这样

```
<xml>
 <item>
 -<description>
  -<type>
   </type>
  </description>
 </item>
</xml> 
```

所以我怎么能在任何人浪费任何时间给出错误答案之前向下导航说输入 xpath 我已经尝试了 $xml->item->description->type 的正常方法这在这种情况下不起作用我不知道因为它不是名称中的非法字符如何处理 - before th 节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:37:44.440

我认为指出它`/xml/item/description/type` *确实*有效（在 XmlSpy 中的 XPath 1.0 和 2.0 中）并不是浪费时间。

就是说，我认为您可能并不真正想要 xml 中的那些“-”字符。也许更好的问题是“如何从 xml 中去除无关的 '-' 字符？”

*编辑：*

下面是一些改编自[SimpleXMLElement 文档](http://php.net/manual/en/simplexmlelement.xpath.php)的 PHP ，向您表明我没有撒谎：

```
<?php
    $string =
    "<xml>
     <item>
     -<description>
      -<type>
          Hello World!
       </type>
      </description>
     </item>
    </xml>";

    $xml = new SimpleXMLElement($string);

    $path = '/xml/item/description/type';

    $result = $xml->xpath('/xml/item/description/type');

    while(list( , $node) = each($result)) {
        echo '$path: ',$node,"\n";
    }
?> 
```

输出：

```
/xml/item/description/type:
    Hello World! 
```

如果您需要任何进一步的帮助，请提供一个重现该问题的简短示例。

（抱歉，如果我的 PHP 不好，我有点生疏了）

# google-fusion-tables - 如何在谷歌融合表中添加一行

> ID：12057116
> 
> 赞同：0
> 
> 时间：2012-08-21T14:29:22.057
> 
> 标签：google-fusion-tables

我已尝试查找此内容并看到了此帮助您可以通过两种方式将行添加到现有表中：使用编辑>添加行一次输入一个新行使用文件>导入更多行从一份文件

但是当我进入我的表格时，编辑添加行和文件导入是灰色的。

我还能怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:52:05.507

检查 qouta：搜索：400,000 个单元格以及 100MB。可能是您的表超出了配额。希望这有帮助。

# python - 遍历 Selenium 2 WebDriver (python) 中的表

> ID：12057118
> 
> 赞同：8
> 
> 时间：2012-08-21T14:29:24.433
> 
> 标签：python, selenium, selenium-webdriver, html-table

我在 HTML 中有以下表格布局（相应更改）：

```
<table class="other-table-style">

    <tr> 
      <th>First Name</th>
      <th>Last Name</th>
      <th>Age</th>
    </tr>
    <tr>
      <td align="center" width="30%">Joe</td>
      <td align="center" width="30%">Bloggs</td>
      <td align="center" width="40%">28</td>
    </tr>
    <tr>
      <td align="center" width="30%">John</td>
      <td align="center" width="30%">Doe</td>
      <td align="center" width="40%">30</td>
    </tr>

</table> 
```

我希望能够使用 Selenium 2.0 WebDriver 进行迭代，但我找不到任何好的示例。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T14:09:00.833

用过的：

```
from selenium.webdriver.common.by import By

trs = driver.find_elements(By.TAG_NAME, "tr") 

tds = trs[1].find_elements(By.TAG_NAME, "td") 
```

这允许循环遍历每一个以按照需要进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:39:00.650

似乎发布[此相关问题](https://stackoverflow.com/questions/7503582/selenium-2-and-html-tables)的人的代码可以让您走上正轨：

```
for (WebElement trElement : tr_collection) {
    List<WebElement> td_collection = trElement.findElements(By.xpath("td"));
    System.out.println("NUMBER OF COLUMNS = " + td_collection.size());
    col_num = 1;          

    if (!td_collection.isEmpty() && td_collection.size() != 1 ) {  
        for (WebElement tdElement : td_collection) {
            System.out.println("Node Name=== " + tdElement.getAttribute("class")); 
            System.out.println("Node Value=== " + tdElement.getText());
            col_num++;
        }
    }

    row_num++;
} 
```

**编辑：**我稍微更改了他们的代码......他们正在累积每个 td 的类及其包含在哈希图中的文本，然后一旦他们遍历整个表，将其添加到主哈希图中。这也是 Selenium 的 Java 变体，因此您必须将其移植过来。不过，它的胆量保持不变——也许有更多硒经验的人可以提供更多信息……我更喜欢自己住在`WATIR`陆地上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-01T16:47:08.580

[这是使用 selenium 解析表（和链接）的优秀教程](http://www.guru99.com/accessing-links-tables-selenium-webdriver.html)。虽然它是用 Java 编写的，但翻译成 Python 是非常简单的。

例如，要使用 Python 版本的 Selenium (2.41) 读取表的第 2 行第 2 列：

```
from selenium import webdriver
driver = webdriver.Ie()

# assuming you're connected to your web page of interest, do:
x = driver.find_element_by_xpath('//table/tbody/tr[2]/td[2]') 
```

# selenium - Selenium Webdriver 错误未知策略类

> ID：12057119
> 
> 赞同：0
> 
> 时间：2012-08-21T14:29:28.513
> 
> 标签：selenium, junit, selenium-ide, selenium-webdriver

我一直在尝试使用 Selenium 来测试我的应用程序。我使用 Selenium IDE 编写了初始测试，但是，当我将 IDE 测试转换为 Selenium Webdriver 测试时，我的代码中出现了大约一半的错误！所以我正在经历每个错误，试图让代码正常工作。

我在 Web Driver 中遇到的错误是

> 错误：捕获异常 [错误：定位器 [class=x-tool-close] 的未知策略 [class]]

在 Selenium IDE 中，它只是 Command`Click`和 target `class=x-tool-close`。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:21:47.320

自从我发布这个问题以来已经有一段时间了，所以我不确定我是否正在解决问题到底是什么，但话虽如此，以下是我用于上面提到的命令的内容。

`driver.findElement(By.xpath("//img[contains(@class,'x-tool-close')]")).click();`

该命令的结构非常基本。由于我的元素的 id 是动态的，因此我通过 xpath 进行搜索。引号里面我们已经说过xpath。我们正在搜索其类属性包含“x-tool-close”的“img”元素。然后我们执行 selenium webdriver 命令单击该元素。

# php - 如何使用 .htaccess 重写带有两个变量的 url

> ID：12057121
> 
> 赞同：3
> 
> 时间：2012-08-21T14:29:28.547
> 
> 标签：php, .htaccess, url-rewriting

我想用 .htaccess 重写它我有这个网址：

```
../index.php?page=details&id=123456 
```

像这样：

```
../detail/123456 
```

但我真的不知道该怎么做。你能帮我重写这个网址吗？或者给我一个简单的例子，我可以理解它是如何工作的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:35:07.470

```
RewriteRule ^(.*)/([0-9]+)$ index.php?page=$1&id=$2&%{QUERY_STRING} 
```

第一个 (.*) 选择任何字符串，例如“详细信息”。([0-9]+) 捕获一个数字，在您的情况下为“123456”

最后

```
&%{QUERY_STRING} 
```

确保将其他参数也添加到您的后端脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:49:18.627

这应该有效：

```
RewriteEngine On
RewriteRule ^detail/([^/]*)$ /index.php?page=details&id=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:35:53.803

这是我在子目录中用于网页的示例。

```
# "learn/degree/index.php?d=mathematics" shows as "learn/degree/mathematics"
RewriteRule ^learn/degree/([a-zA-Z_-]+)$ learn/degree/index.php?d=$1 
```

要完成它，请记住在页面的开头写下：

```
RewriteBase /
RewriteEngine On 
```

这是我在我的页面中使用的“完整”.htaccess 来给你一些想法。

```
#Redirect any www. to the page without it. Helps to keep user logged.
RewriteBase /
RewriteEngine On
rewriteCond %{HTTP_HOST} ^www.newfutureuniversity.org [NC]
rewriteRule ^(.*)$ http://newfutureuniversity.org/$1 [R=301,L]

Options +Indexes
Options +FollowSymlinks

# Finally working. Rewrite the user so "/student/Username" will internally be "/student/?user=Username"
RewriteRule ^student/([a-zA-Z0-9_-]+)$ student/index.php?user=$1

# Rewrite the disciplines so "learn/degree/1" will internally be "learn/degree/index.php?dis=1"
RewriteRule ^learn/degree/([1-4])$ learn/degree/index.php?dis=$1

# Rewrite the degrees so "learn/degree/mathematics" will internally be "learn/degree/index.php?d=mathematics"
RewriteRule ^learn/degree/([a-zA-Z_-]+)$ learn/degree/index.php?d=$1

# Rewrite the degrees so "learn/subject/2/5/7" will internally be "learn/subject/index.php?class=2&div=5&section=7"
RewriteRule ^learn/subject/([0-9])$ learn/subject/index.php?class=$1
RewriteRule ^learn/subject/([0-9])/([0-9])$ learn/subject/index.php?class=$1&div=$2
RewriteRule ^learn/subject/([0-9])/([0-9])/([0-9])$ learn/subject/index.php?class=$1&div=$2&section=$3 
```

您必须创建指向 的链接`../detail/123456`，然后脚本在内部将其解释为`../index.php?page=details&id=123456`. 如果您不想要这个，那么您正在寻找重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:36:35.350

试试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    Options +FollowSymlinks
    # RewriteBase / add this if necessery, commented intentionally
    RewriteRule ^detail/([0-9]+)$ index.php?page=details&id=$2

</IfModule> 
```

# c# - 如何避免转换器与背后的 WPF 代码中的多重绑定发生冲突

> ID：12057126
> 
> 赞同：7
> 
> 时间：2012-08-21T14:29:46.267
> 
> 标签：c#, wpf, dynamic-binding

我在后面的代码中动态创建 WPF 元素，并且对于`Grid`我正在构建的每一行，它由一个`CheckBox`和一个动态数字组成`TextBoxes`。需要的交互如下：

*   如果`TextBoxes`一行中的所有值都为`0`，则将该`CheckBox` `IsChecked`属性设置为`true`并禁用它。
*   如果其中之一`TextBoxes`从 更改`0`，则启用 `CheckBox`并设置`IsChecked`为`false`。
*   如果用户单击`CheckBox`，则将所有关联设置`TextBoxes` 为`0`并禁用`CheckBox`

我能够使用以下代码完成最后一个的第一部分：

```
Binding setScoreToZeroIfIsNormalChecked = new Binding("IsChecked");
setScoreToZeroIfIsNormalChecked.Source = this.NormalCheckBoxControl;
setScoreToZeroIfIsNormalChecked.Converter = m_NormalCheckBoxJointScoresConverter;
tempJointScoreControl.JointScoreContainer.SetBinding(ContainerBase.SingleAnswerProperty, setScoreToZeroIfIsNormalChecked); 
```

和转换器：

```
public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (value is bool && targetType == typeof(Answer))
    {
        if ((bool)value)
        {
            Answer answer = new Answer();
            answer.Value = "0";
            answer.DisplayValue = "0";
            return answer;
        }
        else
            return null;
    }
    else
    {
        return null;
    }
} 
```

但是，在尝试创建另一个转换器来完成其他功能时，我遇到了转换器相互踩踏的问题，因为所有功能都基于该`CheckBox.IsChecked`属性。

无论如何使用一个或两个多重绑定转换器来完成上述所有操作？我真的很想避免为了做到这一点而不得不创建一大堆事件并维护它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T15:26:47.310

这相对容易。一切都应该围绕 CheckBox IsChecked 属性解决。原因很简单，它是双向属性。所以要么你可以修改它，要么 CheckBox 可以修改它。

所以你做什么，你使用 MultiBinding，如下所示：

```
 MultiBinding multiBinding = new MultiBinding();
    multiBinding.Converter = multiBindingConverter;

    multiBinding.Bindings.Add(new Binding("Text") { Source = txtbox1});
    multiBinding.Bindings.Add(new Binding("Text") { Source = txtbox2});

    multiBinding.NotifyOnSourceUpdated = true;//this is important. 
    checkBox.SetBinding(CheckBox.IsCheckedProperty, multiBinding); 
```

在您的 multiBindingConverter 中，您将 object[] 值作为第一个参数，您需要将其转换为 IList 并对其进行迭代 && 进行计算，如果您应该返回 true/false。（IsChecked=true 或 false）

现在将 CheckBox IsEnabled 绑定到 CheckBox IsChecked 属性，并使用 BooleanInverterConverter。（如果 CheckBox 被选中，则应禁用，反之亦然）

最后一步是让 TextBoxes 监听 CheckBox 的实际 IsChecked 属性。如果它是 TRUE，它们都应该显示 0 值，否则它们可以显示他们想要的。

因此，制作一个新的 MultiBinding。

```
 MultiBinding multiBinding = new MultiBinding();
    multiBinding.Converter = textboxMultiBindingConverter;

    multiBinding.Bindings.Add(new Binding("IsChecked") { Source = checkbox1});
    multiBinding.Bindings.Add(new Binding("Text") { Source = textbox1});

    multiBinding.NotifyOnSourceUpdated = true;//this is important. 
    textbox1.SetBinding(TextBox.Text, multiBinding); 
```

textboxMultiBindingConverter 中的想法是如果 value[0]==FALSE 则返回 Text(value[1]) 或如果 value[0]==TRUE 则返回“0”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:40:55.313

如果您使用 MVVM，这个问题可以很容易地解决。

您将有一个 ViewModel 表示网格中的一行。每个文本框都有一个属性，复选框有一个属性。

此外，您将拥有一个包含 Grid 的 View 的 ViewModel，并且此 ViewModel 将公开一组行 ViewModel。

您所在行的 ViewModel：

```
public class AnswersViewModel : ViewModelBase // From MvvmLight
{
    public bool IsAnswered
    {
        get { return _isAnswered; }
        set
        {
            if(value == _isAnswered)
                return;
            _isAnswered = value;
            if(_isAnswered)
            {
                Answer1 = "0";
                Answer2 = "0";
            }

            RaisePropertyChanged("IsAnswered");
        }
    }

    public string Answer1
    {
        get { return _answer1; }
        set
        {
            if(value == _answer1)
                return;

            _answer1 = value;
            RaisePropertyChanged("Answer1");

            if(_answer1 == "0" && _answer2 == "0")
            {
                _isAnswered = true;
                RaisePropertyChanged("IsAnswered");
            }
        }
    }

    // The implementation of Answer2 is similar to Answer1
} 
```

视图的视图模型：

```
public class FooViewModel : ViewModelBase
{
    public ObservableCollection<AnswersViewModel> Answers
    {
        get { return _answers; }
    }
} 
```

您的视图将包含 Grid`ItemsSource="{Binding Answers}"`和 ControlTemplate 用于绑定到属性的项目`AnswersViewModel`。

禁用复选框我将通过样式中的触发器进行处理。

# c++ - OOP 游戏菜单系统开发概念化

> ID：12057131
> 
> 赞同：1
> 
> 时间：2012-08-21T14:29:55.487
> 
> 标签：c++, oop, user-interface, menu

我正在尝试为游戏编写一个面向对象的菜单系统，松散地基于模型、视图、控制器的想法。到目前为止，在我的应用程序中，我将视图命名为“渲染器”，并且模型没有后缀。我创建了一个通用菜单类，它存储菜单的项目，它们是 menu_item 对象，还有一个菜单渲染器类，它为每个项目创建渲染器并渲染它们。问题是我不确定在哪里存储数据和逻辑与屏幕上每个项目的位置有关，以及如何检查它是否被悬停等等。我最初的想法是存储和设置一个每个菜单项上的 selected 属性，可以通过不同的视图以不同的方式呈现，但即便如此，我如何处理定位构成按钮的图形元素？

到目前为止的代码摘录如下：（更多代码在[https://gist.github.com/3422226](https://gist.github.com/3422226)）

```
/**
 * Abstract menu model
 *
 * Menus have many items and have properties such as a title
 */
class menu {
protected:
    std::string _title;
    std::vector<menu_item*> _items;
public:
    std::string get_title();
    void set_title(std::string);
    std::vector<menu_item*> get_items();
};

class menu_controller: public controller {
private:
    menu* _menu;
public:
    menu_controller(menu*);

    virtual void update();
};

class menu_item {
protected:
    std::string _title;
public:
    menu_item(std::string title);
    virtual ~menu_item();

    std::string get_title();
};

class menu_renderer: public renderer {
private:
    menu*   _menu;
    bitmap  _background_bitmap;
    static font _title_font;
    std::map<menu_item*, menu_item_renderer*> _item_renderers;

public:
    menu_renderer(menu*);

    virtual void render();
};

font menu_renderer::_title_font = NULL;

menu_renderer::menu_renderer(menu* menu) {
    _menu = menu;
    _background_bitmap = ::load_bitmap("blackjack_menu_bg.jpg");
    if (!_title_font)
        _title_font = ::load_font("maven_pro_regular.ttf",48);
}

void menu_renderer::render() {
    ::draw_bitmap(_background_bitmap, 0, 0);

    /* Draw the menu title */
    const char* title = _menu->get_title().c_str();
    int title_width = ::text_width(_title_font, title);
    ::draw_text(title, color_white, _title_font, screen_width() - title_width - 20, 20);

    /* Render each menu item */
    std::vector<menu_item*> items = _menu->get_items();
    for (std::vector<menu_item*>::iterator it = items.begin(); it != items.end(); ++it) {
        menu_item* item = *it;
        if (!_item_renderers.count(item))
            _item_renderers[item] = new menu_item_renderer(item, it - items.begin());
        _item_renderers[item]->render();
    }
}

class menu_item_renderer: public renderer {
private:
    unsigned _order;
    menu_item* _item;
    static font _title_font;
public:
    menu_item_renderer(menu_item*, unsigned);
    virtual ~menu_item_renderer();

    virtual void render();
};

font menu_item_renderer::_title_font = NULL;

menu_item_renderer::menu_item_renderer(menu_item* item, unsigned order) {
    _item = item;
    _order = order;
    if (!_title_font)
        _title_font = ::load_font("maven_pro_regular.ttf",24);
}

menu_item_renderer::~menu_item_renderer() {
    // TODO Auto-generated destructor stub
}

void menu_item_renderer::render() {
    const char* title = _item->get_title().c_str();
    int title_width = ::text_width(_title_font, title);
    unsigned y = 44 * _order + 20;
    ::fill_rectangle(color_red, 20, y, title_width + 40, 34);
    ::draw_text(title, color_white, _title_font, 30, y + 5);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:22:08.130

您的模型`class menu`需要一个`add_view(menuview *v)`and`update()`方法。

然后，您可以将小部件的更新委托给派生的 View（`menu_renderer`或 a `cli_menu_renderer`）。

控制器需要知道模型（作为成员），当控制器运行（或执行命令）并且必须使用设置器（如`m_menu_model->set_selected(item, state)`）更新模型并且模型调用`update()`设置器时。

你的控制器`menu_controller`有一个更新方法，在那里你也可以要求输入，比如`if (menuview->toggle_select()) m_menu_model->toggle_selected();`（所有菜单视图都必须实现）并调用设置器，但这是视图和控制器的不灵活耦合（你可以使用命令模式检查 MVC 以获得更多信息高级组合）。

对于职位，您可以设置成员变量，如 int m_x、m_y、m_w、m_h。但是这些成员特定于带有 GUI 的视图，因此只有派生的视图需要它们。

然后您可以使用这些值与鼠标位置进行比较，并使用如下鼠标悬停检测方法：

```
// View menu_item 
bool menu_item::over()
{
    if (::mouse_x > m_x
            && ::mouse_x < m_x + m_w
            && ::mouse_y > m_y
            && ::mouse_y < m_y + m_h) {
        return true;
    }
    return false;
}

// update on gui menu item
bool menu_item::update()
{
    if (over()) {
        m_over = true;
    }
    else {
        m_over = false;
    }
    // onclick for the idea 
    if ((::mouse_b & 1) && m_over) {
        // here you could invoke a callback or fire event
        m_selected = 1;
    } else {
        m_selected = 0;
    }
    return m_selected;
}

// update the command line interface menu item
bool cli_menu_item::update()
{
    if ((::enterKeyPressed & 1) && m_selected) {
        // here you could invoke a callback or fire event
        m_selected = 1;
    } else {
        m_selected = 0;
    }
    return m_selected;
}

void menu_item_renderer::render() {
    // update widgets
    _item->update();
    // ...
}

// Model
void menu::add_view(menuview *v) {
  m_view=v;
}

void menu::update() {
  if (m_view) m_view->update();
}

bool menu::set_selected(int item, int state) {
  m_item[index]=state;
  update();
} 
```

# javascript - Backbone JS Promises 在模型上设置属性之前解决

> ID：12057134
> 
> 赞同：7
> 
> 时间：2012-08-21T14:30:03.260
> 
> 标签：javascript, jquery, backbone.js

使用骨干模型，假设它从服务器获取一些附加属性（如“FirstName”和“LastName”），我有如下内容：

```
var myModel = new Backbone.Model({ id: 10 });
var myOtherModel = new Backbone.Model({ id: 20 });
$.when(myModel.fetch(), myOtherModel.fetch()).done(function () {
    console.log(myModel.toJSON());
}); 
```

输出：

> {编号：10}

片刻之后的输出：

> { id: 10, FirstName: "Joe", LastName: "Schmo" }

Backbone 的承诺似乎存在缺陷，因为返回的 jqXHR 对象有一个承诺，该承诺在骨干完成自己的进程之前就已解决。

是这样吗？是否必须做其他事情来确保在完成`fetch()`所有 Backbone 的`set`s 或至少`set`s 发生在我附加的处理程序之前不会解决返回的承诺？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:35:55.770

发现问题。

我获取的模型覆盖了 Backbone.Model.sync。

```
 sync: function (method, model, options) {
                    // Some stuff
        Backbone.sync(method, model, options); // missing return
    } 
```

因为它没有`return Backbone.sync()`立即解决承诺。`$.when()`如果不是因为包装电话，我会抓住这一点`fetch()`，它会默默地接受任何旧的东西，即使它不是一个承诺，并且只是将它视为立即解决。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T15:34:08.907

为什么不在 fetch 调用中使用“成功”回调？

```
myModel.fetch({
  success: function () {
    console.log(myModel.toJSON());
  }
}); 
```

# javascript - 是否可以使用 Primefaces 3.3 的自定义对话框取消 Ajax 请求？

> ID：12057135
> 
> 赞同：2
> 
> 时间：2012-08-21T14:30:04.257
> 
> 标签：javascript, jquery, jsf-2, primefaces

如果用户更改`selectOneMenu`. 这与浏览器的本机`confirm()`方法非常有效，因为它会阻塞直到用户做出决定。是否有一个优雅的（首选客户端）解决方案可以使用 primefaces 对话框执行此操作，以便不同浏览器的外观保持一致？

当前解决方案：

```
<p:selectOneMenu id="som" value="#{foo.item}">
    <f:selectItems value="#{foo.items}" var="i" itemLabel="#{i.name}" itemValue="#{i.value}" />
    <p:ajax event="change" onstart="return confirmChange()" />
</p:selectOneMenu>

<script type="text/javascript">
    function confirmChange() {
        return confirm("O'RLY?");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:38:09.577

您可以使用 PrimeFaces'[`<p:confirmDialog>`](http://www.primefaces.org/showcase/ui/confirmDialog.jsf)甚至只是[`<p:dialog>`](http://www.primefaces.org/showcase/ui/dialog.jsf).

```
<p:selectOneMenu id="som" value="#{foo.item}" onchange="confirm.show()">
    <f:selectItems value="#{foo.items}" var="i" itemLabel="#{i.name}" itemValue="#{i.value}" />
</p:selectOneMenu>
<p:confirmDialog widgetVar="confirm" message="ORLY?" header="Confirm" severity="alert">
    <p:commandButton value="Yes" action="#{bean.submit}" process="som" oncomplete="confirm.hide()" />  
    <p:commandButton value="No" type="button" onclick="confirm.hide()" />
</p:confirmDialog> 
```

在 中执行确认作业`#{bean.submit}`。如有必要，您可以使用标记文件或复合组件将这一切抽象出来，以便更好地重用。

```
<p:selectOneMenu id="som" value="#{foo.item}" onchange="confirm.show()">
    <f:selectItems value="#{foo.items}" var="i" itemLabel="#{i.name}" itemValue="#{i.value}" />
</p:selectOneMenu>
<my:confirmDialog id="confirm" message="ORLY?" action="#{bean.submit}" process="som" /> 
```

请注意，这里没有“取消”ajax 请求的方法。你只是在真正确认之前不要调用它。

# objective-c - NSDictionary 中的嵌套对象与 RestKit

> ID：12057141
> 
> 赞同：3
> 
> 时间：2012-08-21T14:30:26.657
> 
> 标签：objective-c, ios, restkit

我有一个 JSON 文档，其中包含具有未知键的对象中具有已知模式的对象，我想用 RestKit 映射它。让我解释一下：

```
{
    "object":
    {
        "unknownKey1" : {"data1" : "...", "data2" : "..."},
        "unknownKey2" : {"data1" : "...", "data2" : "..."},
        "unknownKey3" : {"data1" : "...", "data2" : "..."}
    }
} 
```

仅在运行时才知道带有键“object”的对象的设置。对象中包含的键具有随机名称。但是，我知道存储在这些未知键中的对象的确切架构。

现在我想将带有键“对象”的对象的内容映射到 NSDictionary，因为它提供了对随机键的轻松访问。但是，由于存储在这些键上的对象的模式是已知的，我希望它们被映射到自定义对象。

那么是否有可能映射到包含这些对象的 NSDictionary？我还没有找到解决办法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:43:25.177

你可以这样做：

```
RKObjectMapping* mapping = [RKDynamicObjectMapping dynamicMapping];
mapping.objectMappingForDataBlock = ^(id data) {
    NSDictionary* object = [data objectForKey: @"object"];
    NSArray* keys = [object allKeys];

    RKObjectMapping* dataMapping = [RKObjectMapping objectMapping];
    //Use the keys to define mapping
    return dataMapping;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:46:03.870

也许查看 JSONKit [https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)从您的 JSON 文档创建一个 NSDictionary。

# objective-c - NSString 类型声明

> ID：12057142
> 
> 赞同：2
> 
> 时间：2012-08-21T14:30:27.643
> 
> 标签：objective-c, nsstring

我正在学习Objective-C。你能告诉我这些 NSString 声明之间有什么区别（如果有的话）吗？

```
NSString *firstString;
firstString = @"First string";

NSString *secondString = [NSString string];
secondString = @"Second string"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:35:09.153

第二个创建两个字符串，并在不使用它的情况下将第一个扔掉。在这一行：

```
NSString *secondString = [NSString string]; 
```

您正在创建一个新字符串，这并不是真正有用，因为它是空的，并且您将其分配给`secondString`. 然后，您将*不同*的字符串 ( `@"Second String"`) 分配给`secondString`.

没有必要这样做。无论哪种情况，您都可以编写：

```
NSString *myString = @"MyString"; 
```

* * *

该语法`@"Some string here"`称为*字符串文字*，它是在代码中指定具有实际值的 NSString 的简写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:34:45.770

最终结果没有区别。

第一个字符串被声明，然后通过字符串文字语法分配一个值（你也可以`NSNumbers`从 Xcode 4.4 开始执行此操作）。

第二个被初始化为一个字符串（空），然后被分配另一个 NSString 对象。在这种情况下，实际上创建了两个 NSString 对象，前者 -`[NSString string]`被后者覆盖`@"string value"`

所以，第一个是`nil`开始，然后有一个价值。第二个有一个实例化的`NSString`对象开始，然后被覆盖。

最后两个字符串对象是相同的，但显然你在第二种情况下浪费资源。

# c# - Windows VS2010 上的 Webkit 浏览器开发

> ID：12057143
> 
> 赞同：0
> 
> 时间：2012-08-21T14:30:29.960
> 
> 标签：c#, windows, vb.net, visual-studio-2010, webkit

我想使用 VS 2010 在 Windows 上构建一个 WebKit 浏览器（首选但不受限制）。我想要一个相同的 .net 包装器，我发现[Webkit.Net](http://webkitdotnet.sourceforge.net/)并且它可以工作但接缝太旧，然后我尝试在 WebKit.Net 中更新 WebKit 引擎，如此处所示[，](http://peterdn.com/post/%28First!%29-Using-WebKit-nightly-builds-with-WebKit-NET.aspx)但它不起作用。

我想使用 VB，但也可以使用 C#（但我仍然更喜欢 VB）。

*   如何使用 VS 2010（首选）开发基于 WebKit 的浏览器？
*   哪个是最好的（也是最简单的）WebKit .net 包装器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:12:45.377

您可以使用 ：

*   [Chromium Embedded Framework (CEF)](http://code.google.com/p/chromiumembedded/)（与 Github for Windows 中使用的相同。可与任何 .Net 语言一起使用）
*   [Awesomium](https://awesomium.com/)（非商业应用和独立开发者免费（年收入低于 10 万美元））

# javascript - d3.js 轴标签 - 颜色不变

> ID：12057145
> 
> 赞同：23
> 
> 时间：2012-08-21T14:30:37.203
> 
> 标签：javascript, d3.js, axis-labels

我正在使用以下文本创建轴，但是标签的颜色没有正确改变；文本的颜色保持黑色。有人知道为什么吗？

```
 // create Axis
  svg.selectAll(".axis")
      .data(d3.range(angle.domain()[1]))
    .enter().append("g")
      .attr("class", "axis")
      .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
    .call(d3.svg.axis()
      .scale(radius.copy().range([-5, -outerRadius]))
      .ticks(5)
      .orient("left"))
    .append("text")
      .attr("y", 
        function (d) {
          if (window.innerWidth < 455){
            return -(window.innerHeight * .33);
          }
          else{
            return -(window.innerHeight * .33);
          }
        })
      .attr("dy", ".71em")
      .attr("text-anchor", "middle")
      .text(function(d, i) { return capitalMeta[i]; })
      .attr("style","font-size:12px;")
      .style("color","#DE3378");   <--------------- adding color attribute here... 
```

**编辑** - 尝试使用以下代码为不同的轴标签着色不同的颜色，但这不能正常工作......

```
 .style(function() {
      for (var i = 0; i < unhealthyArray.length; i++) {
              if ($.inArray(unhealthyArray[i], capitalMeta) != -1)
                    return "fill","red";
              else
                    return "fill","black";
      }
  }); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-21T14:42:42.940

您需要使用`stroke`属性（用于轮廓）或`fill`（用于填充颜色）。参见例如[本教程](http://tutorials.jenkov.com/svg/text-element.html)。

# sencha-touch-2 - 将（右）按钮添加到 Sencha 导航视图

> ID：12057149
> 
> 赞同：6
> 
> 时间：2012-08-21T14:30:40.223
> 
> 标签：sencha-touch-2

我想根据我显示的视图动态地将（右对齐）按钮添加到活动导航视图。有什么合适的方法吗？我在网上找到了很多半好的例子，但没有让它们起作用。这是我尝试过的：

```
Ext.define('Sencha.view.user.Login', {
extend:'Ext.navigation.View',
//fullscreen: true,
xtype: 'loginview',

requires:[
    'Ext.form.FieldSet',
    'Ext.field.Email',
    'Ext.field.Password'
],
config: {
    title: 'Log in',
    iconCls: 'use',
    cls: 'kidsbackground',
    scrollable: false,
    navigationBar: {
        items: [

        ]
    },
    items:[
        {
            xtype: 'loginform'
        }
    ]
},
addRightButton:function(button){
    var navigationBar = this.config.navigationBar;
    console.log("navigationBar: "+navigationBar);
    var rightButton = Ext.Button.create({
        xtype: 'button',
        ui: 'action',
        iconCls: 'action',
        iconMask: true,
        align: 'right' });

    console.log("rightButton: "+rightButton);
    //navigationBar.addItem(rightButton);

    var oNavigationbar = {
        docked: 'top',

        backButton : {
            margin: 7,
            docked: "left",
            ui : 'back'
        },
        items: [
            Ext.create("Ext.Button", {
                text: "Button1"
            }),
            Ext.create("Ext.Button", {
                text: "Button2",
                align: "right"
            })
        ]
    };
    this.setNavigationBar(oNavigationbar);
    /*this.setNavigationBar({
        items: [
            {
             id: 'rightButton',
             xtype: 'button',
             text: 'yes!'
             //placeHolder: 'Search...',
             //align: 'right'
             }
        ]
    });*/
    console.log("wow, no crash, really ?");
}
}); 
```

当我运行上面的代码时，我得到了奇怪的错误，其中之一是这个（见附件）：

![在此处输入图像描述](../Images/3b2b3dcffdd10f21ddf08450175a2e0d.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T17:51:46.670

[您可以在Sencha Touch 2 Navigation View 示例](http://dev.sencha.com/deploy/touch/examples/production/navigationview/index.html)中尝试此代码（在 Chrome 开发人员工具的控制台中）：

```
Ext.ComponentQuery.query('navigationview')[0].getNavigationBar().add({
    xtype:'button',
    text:'Right',
    align:'right'
}); 
```

它基本上得到了`navigationview`，然后是这个视图的导航栏，最后添加了按钮。

这是向导航栏添加按钮的正确方法。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T17:45:10.163

不同的方式

```
var navigationView = Ext.create('Ext.NavigationView',
{
  useTitleForBackButtonText: false,
  scrollable: false,
  layout:
  {
    type: 'card',
    animation: null
  },
  navigationBar:
  {
    items:
    [
      {
        xtype: 'togglefield',
        name: 'smsmode',
        align: 'right',
        value: 0,
        disabled: true
      },
      {
        text: '',
        iconCls: 'delete',
        align: 'right',
        ui: 'back',
        listeners:
        {
          tap: function()
          {
            navigator.app.exitApp();
          }
        }
      }
    ]
  }
}); 
```

# ios - iOS 上的 VoIP 套接字 - 未收到通知

> ID：12057151
> 
> 赞同：9
> 
> 时间：2012-08-21T14:30:43.640
> 
> 标签：ios, sockets, background, voip

我有一个 VoIP 应用程序，它使用 TCP 服务在来电时唤醒它。TCP 套接字是使用以下代码片段创建的：

```
CFReadStreamRef read = NULL;
CFWriteStreamRef write = NULL;
...
CFStreamCreatePairWithSocketToHost(NULL,(__bridge CFStringRef)shost, port, &read, &write);
self.read = (__bridge NSInputStream*)read;
self.write = (__bridge NSOutputStream*)write;
if (![self.read setProperty:NSStreamNetworkServiceTypeVoIP
                     forKey:NSStreamNetworkServiceType]){
    [Log log:@"Could not set VoIP mode to read stream"];
}
if (![self.write setProperty:NSStreamNetworkServiceTypeVoIP
                      forKey:NSStreamNetworkServiceType]){
    [Log log:@"Could not set VoIP mode to write stream"];
}
self.read.delegate = self;
self.write.delegate = self;
CFRelease(read);
CFRelease(write);
[self.read scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
[self.write scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
[self.read open];
[self.write open]; 
```

我还设置了以下内容：

1.  信息列表中的 VoIP 和音频
2.  使用 [UIApplication sharedApplication] setKeepAliveTimeout 保持活动计时器
3.  UIRequiresPersistentWiFi = YES 在 info plist 中（很确定它不是必需的，但是......）

这在应用程序处于前台时运行良好，甚至在后台运行几分钟，但几分钟后 - 应用程序没有收到任何新的 TCP 消息。它不适用于 wifi 或 3G，两者的结果相同。

我还尝试将属性设置为读取流（尽管读取和写入指向同一个套接字）。每当我在 TCP 上接收数据或发送数据时，我也会启动一个简短的后台任务。顺便说一句 - 一切都发生在主线程上。
我检查了应用程序是否崩溃 - 它没有。
在设备上调试时可以观察到相同的行为 - 一段时间后 - 没有收到任何东西（没有崩溃、警告等）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:47:30.620

尝试以下代码。确保您的应用中只有一个 voip 套接字。

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;

CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"1.2.3.4",9999, &readStream, &writeStream);

CFReadStreamSetProperty(readStream,kCFStreamNetworkServiceType,kCFStreamNetworkServiceTypeVoIP);
CFWriteStreamSetProperty(writeStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);

inputStream = (NSInputStream *)readStream;
[inputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];

outputStream = (NSOutputStream *)writeStream;
[outputStream setDelegate:self];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream open]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:34:26.783

看起来你的代码应该可以工作。但我能想到的可能有两个技术问题：

1.  如果您从 LAN 连接尝试此操作，而应用程序在后台 LAN 路由器可以关闭被动 TCP 连接，因为在这种情况下，SIP 堆栈（猜你使用 SIP 协议）无法像它那样每 15 到 30 秒发送数据保持活动状态在前台。

2.  不太可能，假设您知道自己在做什么，但是由于注册保持活动在后台只能在 10 分钟内触发一次，因此请确保 SIP 服务器允许如此长的过期时间，并且您在注册消息中正确定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T08:58:26.543

在`ViewController.h`文件中添加

```
@property (nonatomic, strong) NSInputStream *inputStream;
@property (nonatomic, strong) NSOutputStream *outputStream;
@property (nonatomic) BOOL sentPing; 
```

在`ViewController.m`文件中添加之后`@implementation ViewController`

```
const uint8_t pingString[] = "ping\n";
const uint8_t pongString[] = "pong\n"; 
```

在里面添加以下代码`viewDidLoad`

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)(@"192.168.0.104"), 10000, &readStream, &writeStream);

//in above line user your MAC IP instead of 192.168.0.104

self.sentPing = NO;
//self.communicationLog = [[NSMutableString alloc] init];
self.inputStream = (__bridge_transfer NSInputStream *)readStream;
self.outputStream = (__bridge_transfer NSOutputStream *)writeStream;
[self.inputStream setProperty:NSStreamNetworkServiceTypeVoIP forKey:NSStreamNetworkServiceType];
[self.inputStream setDelegate:self];
[self.outputStream setDelegate:self];
[self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[self.inputStream open];
[self.outputStream open];

//After every 10 mins this block will be execute to ping server, so connection will be live for more 10 mins
[[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^{
    if (self.outputStream)
    {
        [self.outputStream write:pingString maxLength:strlen((char*)pingString)];
        //[self addEvent:@"Ping sent"];
    }
}];

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
switch (eventCode) {
    case NSStreamEventNone:
        // do nothing.
        break;

    case NSStreamEventEndEncountered:
        //[self addEvent:@"Connection Closed"];
        break;

    case NSStreamEventErrorOccurred:
        //[self addEvent:[NSString stringWithFormat:@"Had error: %@", aStream.streamError]];
        break;

    case NSStreamEventHasBytesAvailable:
        if (aStream == self.inputStream)
        {
            uint8_t buffer[1024];
            NSInteger bytesRead = [self.inputStream read:buffer maxLength:1024];
            NSString *stringRead = [[NSString alloc] initWithBytes:buffer length:bytesRead encoding:NSUTF8StringEncoding];
            stringRead = [stringRead stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]];

            //[self addEvent:[NSString stringWithFormat:@"Received: %@", stringRead]];

            //if server response is 'call' then a notification will go to notification center and it will be fired
            //immediately and it will popup if app is in background.
            if ([stringRead isEqualToString:@"call"])
            {
                UILocalNotification *notification = [[UILocalNotification alloc] init];
                notification.alertBody = @"New VOIP call";
                notification.alertAction = @"Answer";
                //[self addEvent:@"Notification sent"];
                [[UIApplication sharedApplication] presentLocalNotificationNow:notification];
            }
            //else if ([stringRead isEqualToString:@"ping"])
            //{
            //if server response is 'ping' then a sting 'pong' will go to server immediately
            //[self.outputStream write:pongString maxLength:strlen((char*)pongString)];
            //}
        }
        break;

    case NSStreamEventHasSpaceAvailable:
        if (aStream == self.outputStream && !self.sentPing)
        {
            self.sentPing = YES;
            if (aStream == self.outputStream)
            {
                [self.outputStream write:pingString maxLength:strlen((char*)pingString)];
                //[self addEvent:@"Ping sent"];
            }
        }
        break;

    case NSStreamEventOpenCompleted:
        if (aStream == self.inputStream)
        {
            //[self addEvent:@"Connection Opened"];
        }
        break;

    default:
        break;
}
} 
```

构建您的应用程序并运行

在您的 MAC PC 中打开终端并写入`nc -l 10000`并按 Enter

```
$ nc -l 10000 
```

然后写`call`并按回车

# java - 在耳朵里开始会话

> ID：12057152
> 
> 赞同：3
> 
> 时间：2012-08-21T14:30:47.007
> 
> 标签：java, http, session, jboss

我在 jboss 集群环境中部署了一个包含 3 个战争文件（管理应用程序、ehs 应用程序和签证应用程序）的 ear 文件。只有 1 次登录，并且用户正在登录管理应用程序。从那里，用户单击 ehs 应用程序链接或签证应用程序链接。

问题是登录后，如果用户点击签证应用程序链接，会话为空，因此导航不会发生。

这在非集群环境中工作正常，但在 Jboss 集群中不工作。

当用户登录到管理应用程序时，如何在签证应用程序中启动会话？

请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:13:38.243

作为一个简单（不一定是理想的）解决方案，您应该能够配置负载均衡器以使每个用户跨应用程序保持在同一节点上。你的负载均衡器是什么？

# jquery - 拉伸谷歌地图

> ID：12057153
> 
> 赞同：0
> 
> 时间：2012-08-21T14:30:55.237
> 
> 标签：jquery

我想做一些东西，就像我所说的那样——地图拉伸。似乎给元素一个类，等等，但我认为，这不是最合适的方式。

我在 ios Foursquare 中看到了拉伸谷歌地图的非常有趣的解释，当你在看到任何场地信息和地图时触摸并向下滑动手指。中心一直留在原地，高度增长。

到目前为止，我是这样做的：

```
$('#map_canvas').click(function() {
    if($( '#content #map_canvas' ).hasClass('small_map')){
        $( '#content #meta' ).hide();
        $( '#content #description' ).hide();
        $( '#content .social' ).hide();

        $( '#content #map_canvas' ).removeClass('small_map');
        $( '#content #map_canvas' ).addClass('large_map');
    }else {
        $( '#content #meta' ).show();
        $( '#content #description' ).show();
        $( '#content .social' ).show();

        $( '#content #map_canvas' ).removeClass('large_map');
        $( '#content #map_canvas' ).addClass('small_map');
    }
    initialize();   
}); 
```

...通过单击地图，隐藏所有内容并拉伸地图高度。但我不喜欢我必须调用 initialize(); 一遍又一遍地运行，以保持地图中心在中心。

有人可以分享你的想法吗？:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:34:59.013

您可以使用`setCenter`而不是重新初始化整个地图：

```
map.setCenter( pos ); 
```

Where`map`是对您的 google 地图的引用，并且`pos`是一个位置，就像您在设置地图时可能已经设置的位置一样。只要确保这两个在您的`initialize`脚本之外可用。

# html - 在 HTML 中，哪个元素不能包含其他一些特定元素？

> ID：12057156
> 
> 赞同：8
> 
> 时间：2012-08-21T14:31:10.847
> 
> 标签：html

例如，在 HTML 4.01 中，

1) 内联元素通常不能包含其他块元素（例如： a`<span>`或`<a>`不应该包含任何`<div>`.）但是这个规则更宽容，因为大多数浏览器不会像下面的规则 2 那样改变 HTML 结构。（现在许多浏览器都会处理标签`<div>`内的预期结果。）`<a>`

2)`<p>`元素不能包含任何`<p>`元素。如果任何`<p>`出现在前一个`<p>`元素关闭之前，那么前一个元素将立即关闭。这个规则似乎更严格，因为它改变了 HTML 文档的结构。

上述规则是否准确，是否有其他规则说明一个元素不能包含其他元素？（作为后代）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:36:35.103

你在谈论 HTML5 吗？由于此时该规范应该取代任何其他规范，因此我们将坚持下去。

我不会详细介绍每个单独的元素，但是如果您需要查找某些内容，请参考以下内容：

[http://www.w3.org/TR/html5-author/](http://www.w3.org/TR/html5-author/)

讨论“内容模型”的部分

> 元素预期内容的描述

在这里：[http ://www.w3.org/TR/html5-author/content-models.html](http://www.w3.org/TR/html5-author/content-models.html)

您可以在特定元素的规范中看到一些示例：

[http://www.w3.org/TR/html5-author/the-html-element.html#the-html-element](http://www.w3.org/TR/html5-author/the-html-element.html#the-html-element)（`html`元素）：

> 一个`head`元素后跟一个`body`元素。

# 具体例子

*   [http://www.w3.org/TR/html5-author/the-a-element.html#the-a-element](http://www.w3.org/TR/html5-author/the-a-element.html#the-a-element)
*   [http://www.w3.org/TR/html5-author/the-span-element.html#the-span-element](http://www.w3.org/TR/html5-author/the-span-element.html#the-span-element)
*   [http://www.w3.org/TR/html5-author/the-br-element.html#the-br-element](http://www.w3.org/TR/html5-author/the-br-element.html#the-br-element)

## `a`

我们从第一个链接（在`a`元素上）得知它的内容模型是[透明](http://www.w3.org/TR/html5-author/content-models.html#transparent)的，但前提是没有[交互式内容](http://www.w3.org/TR/html5-author/content-models.html#interactive-content)后代。

通过查看“透明”的定义，我们看到`a`它从其父级继承其内容模型。这意味着您的初始定义不正确并且`a`确实可以包含 a `div`，但前提是其父级可以。上面的文档甚至包括嵌套“透明”内容模型元素的示例。

由于`a`不能包含任何“交互内容”模型元素，它根本不能包含`button`元素。这是有道理的，因为对于哪个元素主动响应点击会有冲突。

## `span`

当我们查看第二个链接时`span`，我们看到它的内容模型是“短语内容”，它基本上是段落级文本的文本和标记。该定义并不完全具体，但它确实包含一个指南：

> 大多数被归类为短语内容的元素只能包含本身被归类为短语内容的元素，而不是任何流内容。

由于`div`没有“短语内容”模型（它是“流内容”），`span`因此无法包含它。这意味着`span`应该遵循上述规则，并且只包含任何其他“短语内容”元素和/或嵌入的内容或文本。如果上述规则被打破，它会在元素的“内容模型”描述中专门列出（请记住`a`关于“交互内容”的元素的特殊规则。） `span`没有。

## `br`

第三个链接`br`表示内容模型是“空的”。不幸的是，W3C 没有为此提供具体定义，但我认为这很明显：它根本不能包含后代。甚至没有文本节点。任何“空”内容模型元素都没有结束标记（您可以将其写为`<br>`not as `<br></br>`）。

# 你的问题

## 上面的规则准确吗？

### 第一条规则（内联与块）

你说的有误导性。HTML 没有`inline`vs.`block`元素的概念。这些是 CSS 样式。大多数浏览器都有一个元素`display`样式的默认设置，`inline`或者`block`取决于它是分别是“短语”还是“流”内容模型（作为一般规则；没有什么硬性和快速性）或者只是传统的。

如果您想说“短语内容”元素不能包含“流内容”元素，那么您将是正确的，因为那是专门在规范中的。这实际上也有效，因为`span`不能包含`div`（如您所示）。

但是，说不`a`应该包括任何`div`内容是错误的。 `a`可以包括`div`只要它的父母可以。如果`a`包含在 a`span`中，则不能包含`div`。但是，如果`a`包含在`body`或其他`div`中，它可以。

至于浏览器“宽容”，这对于许多不能花时间创建有效 HTML 的开发人员来说非常方便，但对于我们这些想要花时间的人来说可能是一种痛苦。浏览器通常不会像您所说的那样改变“HTML 结构”——它们改变的是 DOM。还有一点，网络供应商规范与我上面发布的“网络作者”规范有点不同，但我们是*作者*。

### 第二条规则（`p`包含`p`）

这是真的，因为我遗漏了一个重要的点：`Context`.

[从`p`元素规范：](http://www.w3.org/TR/html5-author/the-p-element.html#the-p-element)

> 可以使用此元素的上下文：
> 预期流内容的位置。

由于`p`是“短语内容”，这意味着`p`不能将另一个放在 a 中，`p`因为预期的是“短语内容”，而不是“流内容”。

## 还有其他规则吗？

HTML5 规范包含大量元素，因此我无法在此处详细介绍所有这些细节。我详细介绍了内容`span`和`a`内容`div`，以及`p`因为您特别提出了这些内容。看看这个答案有多长！

您需要做的是查看您对规范本身有疑问的任何元素。查看***上下文***和***内容模型***部分，看看您对元素的使用是否有效。

# 总之

当您对元素的工作方式有疑问时，请参阅规范。要回答有关如何*使用*元素（关于其容器和内容）的问题，请查看：

*   可以使用此元素的上下文：
*   内容模型：

这告诉你什么可以包含元素，它可以包含什么，以及何时。

如果您对您的 HTML 是否有效有疑问，您可以随时使用非常好的 W3C 标记验证服务：

[http://validator.w3.org/](http://validator.w3.org/)

如果您使用的是 Chrome，您可以查看 Chrome Inspector (F12) 并将输出 DOM 与源 HTML 本身进行比较。例如，您会注意到 Chrome`p`在生成 DOM 时会自动关闭嵌套标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:44:18.267

关于您的第二条规则（在 HTML 4.01 中），它有点强：[P 元素不能包含块级元素（包括 P 本身）](http://www.w3.org/TR/html4/struct/text.html#edef-P)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:26:41.190

根据您编辑的帖子-

`<a>`现在被视为块级元素，从 html5 开始 - 无论您使用什么标准标记页面，浏览器都可能将元素视为 html5，因此从那里开始工作，而不是向后工作。

`<a>`不能包含`<a>`或任何要与之交互的元素（输入/按钮）。 `<hX>`不能包含或更高的`<h_>`标签`X`（就层次结构而言）。即，`<h3>`不能持有一个`<h1>`或一个`<h2>`或一个`<h3>`

如果你这样写，大纲将关闭大纲，直到它达到适当的层次结构级别。

```
<h1></h1>
<h2></h2>
<h3></h3>
<h2></h2> // starts a new branch of H2s, in terms of outline

<h1></h1>
<h2></h2>
<h3></h3>
<h1></h1> // closes the entire previous branch and all leaves, and starts a new outline 
```

`<ul>`并且`<ol>`只能***包含***s`<li>`作为*直接后代*。 `<li>`s 可以保存您希望它们保存的任何内容（`<li>`s 或其他列表节点除外），包括其他有序/无序/定义列表...

...但是`<ul>`and`<ol>`元素只能`<li>`作为它们的第一代子元素。

同样处理`<dl>`s`<dt>`和`<dd>`节点。

其余的大部分要么是常识（不要将元素放在`<script>`标签、`<img>`标签、`<br>`标签、`<meta>`标签、`<legend>`标签等中）......要么他们仍然在解决问题（比如figure/figcaption 可以保持正确的格式`<picture>`，等等）。

# crystal-reports - Crystal Reports：构建复杂的记录选择

> ID：12057162
> 
> 赞同：0
> 
> 时间：2012-08-21T14:31:24.703
> 
> 标签：crystal-reports, record, sql-view, formula-editor

我负责开发库存快照报告，该报告分为两种类型：订单和库存。除此之外，只有具有特定状态的项目才应显示在报告中。

```
I have a parameter that is used to determine the specific date for the report. {?endDate}
I have a field in a view that pulls the date the item was received. {rec_date}
I have a formula field that pulls the group (orders/stock) -- {@grouping}
I have a formula field that pulls the status -- {@state} 
```

基本上我在记录选择中需要的是：

```
( @grouping = "Orders" and rec_date < {?endDate} and @state in (0,2,5) )

OR

( @grouping = "Stock" and rec_date < {?endDate} and @state in (1,2,3,5,7) ) 
```

我一直试图写这个的任何方式都是无效的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:39:24.833

您的公式也必须在波浪括号中：

```
( {@grouping} = "Orders" and rec_date < {?endDate} and {@state} in [0,2,5] )

OR

( {@grouping} = "Stock" and rec_date < {?endDate} and {@state} in [1,2,3,5,7] ) 
```

# javascript - 推荐正确的背景网络图片尺寸

> ID：12057166
> 
> 赞同：0
> 
> 时间：2012-08-21T14:32:00.247
> 
> 标签：javascript, image, resolution, image-resizing, screen-resolution

我想在我的网站背景中使用各种图像。我创建了一个代码，它将为不同的屏幕尺寸打开不同的图像。现在我只有两种图像，这是代码：

```
$(window).load(function() {
var randomImages = ['img1','img2','img3','img4','img5'];
var rndNum = Math.floor(Math.random() * randomImages.length);

 var $win = $(this);
 var isBig = $(window).width() > 1920 ? '_big' : '';
 var $img = $('#background').attr('src', '_img/bg/index_rnd/' + randomImages[rndNum] + isBig + '.jpg').css({'position':'fixed','top':0,'left':0});
    function resize() {
        if (($win.width() / $win.height()) < ($img.width() / $img.height())) {
          $img.css({'height':'100%','width':'auto'});
        } else {
          $img.css({'width':'100%','height':'auto'});
        }
    }
    $win.resize(function() { resize(); }).trigger('resize');
}); 
```

我会为不同的尺寸添加更多选项，但在我继续之前，我想知道图片的推荐尺寸是多少。图片的质量很重要，但背景的速度也很重要。这些是我目前拥有的尺寸：

正常分辨率高达 1920px 宽，图片大小为**130KB-140KB**

图片宽度超过1920px，图片大小**为270KB-280KB**

我在互联网上尝试过类似的案例，但我找不到任何东西。你能告诉我这个案例的平均值或建议是多少吗？！？！

非常感谢！

丹妮

编辑：更多细节///////////////

我的原始图片是 4752 X 3168，.TIFF，分辨率为 240 像素/英寸，重量为 46MB。在我在 Photoshop 中处理它们之后，降低它们的分辨率、大小并为网络设备保存......我修改为以下内容：

分辨率为 72 像素/英寸 尺寸 1426 X 950 JPG 40 质量

我最终得到了一张 162.1KB 的图片。加载后，此图片必须覆盖整个屏幕，因此图片的大小需要足够接近，以免像素化。这是一个好的尺寸还是Photoshop有更好的方法来制作更小的大尺寸图片并保持其质量。

这将适用于来自欧洲和南美的网络用户。没有数据限制，最常见的分辨率是 1024x768，但我希望图像能够适应任何其他尺寸而没有像素化。

用完了可能性，所以我想在这里得到一些帮助......

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:56:55.747

这个问题很难回答，因为它真的取决于：

1.  这是一个什么样的网站。
2.  如果您有任何类型的数据限制。
3.  用户：他们典型的互联网连接速度有多快，如果他们通常可以等待更长时间以获得更清晰的图像，他们最常见的分辨率是多少。

这只是您在做出**决定**之前可能需要考虑的一些事情的简短列表。

就我个人而言，我认为 270KB - 280KB 的背景图像太多了，尤其是对于非常不常见的分辨率。分辨率大于 1920 像素宽的用户并不多。

很抱歉不能给你一个直接而简短的答案，但也许这至少有一点帮助。

# adobe - flash alchemy：传递浮点数数组

> ID：12057173
> 
> 赞同：0
> 
> 时间：2012-08-21T14:32:12.790
> 
> 标签：adobe, swc, alchemy

不起作用：

```
 var b:ByteArray = new ByteArray();
             b.writeFloat(-50.000000);
             b.position = 0;

             cpp.processFloat(b,b.bytesAvailable); 
```

共产党：

```
static AS3_Val processFloat(void* self, AS3_Val args){
unsigned iTestSize;
AS3_Val sOrigFile = AS3_Undefined();

AS3_ArrayValue( args, "AS3ValType, IntType", &sOrigFile, &iTestSize );

float * sFile = (float *)malloc(sizeof(float) * (iTestSize + 1));

int res = AS3_ByteArray_readBytes(sFile, sOrigFile, iTestSize);

fprintf( stderr, "** processFloat() size: %i sFile: %.03f, res:%i\n", iTestSize, sFile, res ); 
```

fprintf 输出：** processFloat 大小：4 sFile：0.000，res：4

怎么了？如何将浮点数组从闪存传递给 swc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:56:31.367

你的问题是字节排序（更多细节[在这里](https://stackoverflow.com/a/6318399/89218)）。您需要将 ByteArray 设置为 Little Endian：

```
var b:ByteArray = new ByteArray();
b.endian= Endian.LITTLE_ENDIAN;
b.writeFloat(-50.000000);
b.position = 0;

cpp.processFloat(b,b.bytesAvailable); 
```

另外，你`iTestSize`很困惑。您传入`bytesAvailable`但随后将其乘以`sizeof(float)`（并加 1？？）。

# php - PHP：在文件中递归查找关键字并返回周围的上下文以及文件名

> ID：12057174
> 
> 赞同：1
> 
> 时间：2012-08-21T14:32:13.890
> 
> 标签：php, regex, recursion

有趣的问题：我在一堆文件和目录中搜索关键字，我的函数将文件名作为数组返回：

```
$files = array();

function search_in_dir($dir, $str) {
    foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir)) as $filename) {
        $files[] = $filename;
    }

    foreach ($files as $k => $file) {
        $source = file_get_contents($file);
        if (strpos($source, $str) === false) {
            unset($files[$k]);
        }
    }
    return array_filter($files);
}

$filenamesWithPaths = search_in_dir("/home/Documents", "testKeyword"); 
```

该变量`$filenamesWithPaths`现在包含一个文件名和路径数组。然而，我最终想要实现的是一个关联数组或一些集合，其中包含带有文件名的路径以及周围的文本（在我的例子中是 HTML 代码）。

可以想象返回找到关键字的整行，然后我用其他指令进一步修剪它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:01:11.217

由于 Stackoverflow 社区强烈建议避免使用 php 来搜索功能，我将使用 find，它的性能优于 grep

```
$search = 'find ' . $directory . ' -type f -exec grep -r ' . $keyword . ' {} + '
shell_exec($search); 
```

将路径+文件名和周围的上下文存储到 php 中的集合中将是下一步。然而，这在某种程度上不起作用：

```
$RESULT = shell_exec('find ' . $domain . ' -type f -exec grep -r ' . $keyword . ' {} + ');

$arr = explode('/index.html:', $RESULT); 
```

现在如何检索路径和周围的上下文；就像如何最好地解析 grep 输出一样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:42:20.360

好的，[file()](http://php.net/manual/en/function.file.php) - 将整个文件读入数组

您可以遍历 foreach 中的每个项目并找到您的匹配项。

如果索引为 23，则它位于第 24 行。就这么简单，并按照您的喜好构建您的输出数组。

# c++ - 使用对象向量调用接口函数的清洁方法

> ID：12057176
> 
> 赞同：0
> 
> 时间：2012-08-21T14:32:22.180
> 
> 标签：c++, oop, function-pointers

我有一个实现相同接口的任务向量。我有一个可以有多个任务的状态机对象，我有一大堆事件。如果调用了特定事件，我希望该事件调用“ProcessTasks”的函数，其中 ProcessTasks 采用需要调用的特定接口函数，并为每个任务调用该函数。我想避免在每个事件函数中使用巨大的 case 语句或重复 for 循环迭代，但我不知道该怎么做。是否有允许我这样做的构造/方法，或者 case 语句方法是最好的方法，还是最好在每个函数中折腾循环？

谢谢 ： ）

示例示例（我的状态模式 sm 中的单个状态类）：

```
State_e StateIdle::EVENT_REQUEST_STOP_()
{
    ProcessTasks( HandleStopFn );
    return STATE_STOPPED;
}

// -- more events

/* desired solution allows me to have to implement
   the loop only once, but be able to call any of
   the functions in the interface, for any number of events */

    for( vector<TaskPtr>::iterator it = m_tasks.begin(); it != m_tasks.end(); ++it )
    {
        it->HandlerFunction()
    } 
```

* * *

//TaskPtr 是 boost auto ptr 并实现了这个缩短的接口

```
class Task
{
    void HandleActiveFn() = 0;
    void HandleStopFn() = 0;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:37:42.757

您可以将函数绑定到`std::function`，然后遍历向量（或使用`std::for_each`）调用函数并将指向每个元素的指针作为第一个参数传递。例如，这是绑定成员函数并在类型实例上调用它们的方法：

```
#include <functional>
#include <iostream>
#include <vector>
#include <algorithm>

struct IFoo 
{
  virtual void foo1() const = 0;
  virtual void foo2() const = 0;
};

struct Foo : public IFoo
{

  virtual void foo1() const {
    std::cout << "Foo::foo1\n";
  }
  virtual void foo2() const {
    std::cout << "Foo::foo2\n";
  }
};

int main() {

  std::function <void(IFoo*)> f1 = &IFoo::foo1;
  std::function <void(IFoo*)> f2 = &IFoo::foo2;

  std::vector<IFoo*> foos{new Foo(), new Foo(), new Foo()};

  std::for_each(foos.begin(), foos.end(), f1);

  std::for_each(foos.begin(), foos.end(), f2);

} 
```

如果您按值存储元素，而不是指针，则可以使用[std::mem_fn](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)：

```
auto f1 = std::mem_fn(&Foo::foo1);
auto f2 = std::mem_fn(&Foo::foo2);

std::list<Foo> foos = ....;

std::for_each(foos2.begin(), foos2.end(), f1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:54:19.193

提供一个接受`private`成员函数指针的成员函数，并用于在每个实例上调用成员函数：`StateIdle``Task``std::for_each``Task`

```
void _invoker(void (Task::*fun)())
{
    std::for_each(m_tasks.begin(),
                  m_tasks.end(),
                  [&](TaskPtr a_t) { (a_t->*fun)(); });
} 
```

请参阅演示[http://ideone.com/A4c5U](http://ideone.com/A4c5U)。

如果你想避免 a `switch`，你可以使用 a 构造一个函数表`std::map`：

```
std::map<std::string, void (Task::*)()> function_table;
function_table["ACTIVE"] = &Task::HandleActiveFn;
function_table["STOP"]   = &Task::HandleStopFn;

void _invoker(const std::string& a_name)
{
    auto function_entry = function_table.find(a_name);
    if (function_table.end() != function_entry)
    {
        std::for_each(m_tasks.begin(),
                      m_tasks.end(),
                      [&](TaskPtr a_t)
                      {
                          (a_t->*(function_entry->second))(); 
                      });
    }
} 
```

并致电：

```
_invoker("STOP");
_invoker("ACTIVE"); 
```

您可能更喜欢：

```
_invoker(&Task::HandleStopFn);
_invoker(&Task::HandleActiveFn); 
```

# java - 哈希集 io java

> ID：12057186
> 
> 赞同：0
> 
> 时间：2012-08-21T14:33:13.163
> 
> 标签：java, io, hashset

我正在研究以下问题，并认为我非常接近答案。我的问题在于输入，因为我刚刚习惯了标准的 java i/o。

> 打印用户输入的唯一单词的数量，然后是单词本身。

**编辑：问题已解决**

代码：

```
class Uniques { 

public static void main(String[] args) {

    HashSet<String> hs = new HashSet<String>();

    Scanner scanner = new Scanner(System.in);
    while (scanner.hasNextLine()) {
        String w = scanner.nextLine();

        String s[] = w.split(",");

        for(String place:s)
        hs.add(place);

    }
    System.out.println("There were " + hs.size() + 
                        " unique words, as follows:");
    for (String s: hs) 
            System.out.println(s);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:34:27.330

```
String w = scanner.next(); 
```

您需要拆分字符串`w`，`words`然后将它们添加到`Set`.

例子：

```
String[] wordsArray = str.split(" ");

for(String word:wordsArray)
        {
            //add to set
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:38:53.243

采用

```
myString.split("\\s+"); 
```

将字符串拆分为由所有空格分隔的单词...

# internet-explorer - IE9 没有显示任何基于引导程序的站点

> ID：12057191
> 
> 赞同：0
> 
> 时间：2012-08-21T14:33:32.727
> 
> 标签：internet-explorer, twitter-bootstrap

我有一个问题。我们正在努力用引导主题重做我们的网站。在 Chrome Firefox 和 safari 上运行良好，但该站点无法在 IE9 上加载。IE9 上没有网站加载，甚至没有主要的 boostrap 网站。

我已经恢复了 IE8，这似乎可以工作，但看起来我的电脑今天更新到 IE9 并且什么都没有出现。不确定是什么导致了这个问题，但如果 Bootstrap 和 IE9 存在问题，我们不想继续进行所有这些工作。我不得不假设它与我的电脑有关。如果有人有任何建议，我们都会在这里倾听。谢谢马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:13:50.803

这对我有用（IE9、Win764 位、Yii 和 Abound Theme 使用 Bootstrap）：

文件类型：

```
<!DOCTYPE html> 
```

在 Head 标签中添加：

```
<head>
...
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
...
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:53:28.173

对我来说，它可以在没有 ie 的怪癖模式的情况下工作。在此模式下，网站无法正确显示，但使用 doktype ie9 或 ie8 时效果很好。如果您添加正确的文档类型，它就可以工作。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

例如。

你可以添加额外的元信息

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

它只是一个例子，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T17:45:39.863

IE9 在渲染某些 Type 1 字体时存在问题。

Bootstrap 在他们的 CSS 中使用 Helvetica：

```
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
```

有关更多详细信息，请参阅本文：http: [//bobbyjoneswebdesign.blogspot.ca/2011/12/internet-explorer-9-type-1-font-bug.html](http://bobbyjoneswebdesign.blogspot.ca/2011/12/internet-explorer-9-type-1-font-bug.html)

# arrays - 在具有 N 个元素的整数数组中，找到最小的 k 个元素？

> ID：12057195
> 
> 赞同：0
> 
> 时间：2012-08-21T14:34:02.947
> 
> 标签：arrays, algorithm, numbers

> **可能重复：**
> [用于进行 k 选择的最坏情况 O(n) 算法](https://stackoverflow.com/questions/7358912/worst-case-on-algorithm-for-doing-k-selection)

鉴于以下问题：

```
In an integer array with N elements , find the minimum k elements (k << N) 
```

你可以假设这`N`是一个很大的数字。

我正在考虑最小堆，有人有更好的解决方案吗？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:37:20.327

如果 K << N，min heap 就足够了，因为创建堆是 O(n)，如果 K << N 选择前 K 个项目最多 O(N)，否则你可以使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)找到第 K 个最小元素`O(n)`然后选择小于找到的项目的数字。（确定如果某些数字等于第 K 个元素，则选择直到填充`K`项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:40:43.417

那这个呢：

对数组进行排序（快速排序或堆排序非常适合整数数组），然后迭代到 k

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:00:06.027

我认为你可以在 O(N*log(K)) 中做到这一点。伪代码：

```
haz array[N]
haz output[k] (itz a list)

i iteratez on array with array[N] az element:
    i insertz element into output (i maintainz strict ordering)
    i removez largest element of output when output size iz bigger than k 
```

要求：

*   从末尾删除 N 个列表 (N * O(1))
*   最多 N 次排序维护列表插入 (N * O(log(listsize)))

列表的大小以 K 为界

因此，O(N * log(K)) 时间。

# jquery - jquery attr（'href'）不起作用

> ID：12057199
> 
> 赞同：1
> 
> 时间：2012-08-21T14:34:13.257
> 
> 标签：jquery, attr

更新，问题解决。问题在于我在尝试更改 HREF 后调用的一个函数，这实际上是在将其改回。

* * *

使用 jQuery，我试图根据 URL 中包含的哈希更改一系列链接的 HREF 属性，但该属性根本没有改变，它被更改为空字符串。

谁能看到我在这里做错了什么？为什么它不起作用？

[http://fwy.pagodabox.com/categories/sculptures/#grid](http://fwy.pagodabox.com/categories/sculptures/#grid)

有问题的链接是

> 所有 展览 装置 物件 版画 雕塑

在二级导航

```
function navHash($navlinks, hashtxt) {

        // loop through specified links
        $navlinks.each(function(){
            var $me = $j(this),
                myhref,
                index;

            // Does this link have an href… if not move on          
            if( typeof $me.attr('href') === "undefined" )
                return false;

            myhref = $me.attr('href');
        index = myhref.indexOf('#');

        // if my href doesn't have the specified hash text, add it, else remove it
        if(myhref.indexOf(hashtxt) === -1) {
            $me.attr("href", hashtxt);
        } else {
            $me.attr("href", myhref.substring(0, index));
        }   
    });
}

   $j(document).ready(function($){

        var $navlinks = $j('.sub-nav li:not(.views) a');

        if(window.location.hash == '#grid') {
            navHash($navlinks, '#grid');
            $('.views .ic-grid').click();
        }
// so on... 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:04:46.293

If you return `false` here you will stop looping.

```
if(typeof $me.attr('href') === "undefined")
   return false; 
```

Return `true` to continue looping.

# jquery - iPhone/iPad GUI 模拟

> ID：12057204
> 
> 赞同：0
> 
> 时间：2012-08-21T14:34:42.170
> 
> 标签：jquery, iphone, ipad

> **可能重复：**
> [iOS 之类的 Web UI](https://stackoverflow.com/questions/6243745/ios-like-web-ui)

我正在编写一个移动应用程序。我正在使用很多 Jquery 来模拟 Iphone GUI。例如，当你按“编辑”时出现访问块信号。按下它们它们会旋转，并出现删除按钮。我是在 Jquery 中完成的，我在想……有什么准备好了吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:38:06.053

不清楚你在问什么。但是您可以在 iOS 模拟器中模拟您的“应用程序”（webapp？不清楚）。为此，您需要在 Mac 上下载 Xcode。

# android - Android将textColor值设置为全局

> ID：12057207
> 
> 赞同：4
> 
> 时间：2012-08-21T14:34:53.630
> 
> 标签：android, styles, textcolor

我正在做一些教程，并尝试尝试使用 textColor。这可以很好地使用每个 Widget 中的属性，它是 layout xml 或 style 属性。但我想知道是否可以定义一个全局文本颜色，据我所知不是。

我在这些页面上找到了解决方案：

[http://www.therealjoshua.com/2012/01/styling-android-with-defaults/](http://www.therealjoshua.com/2012/01/styling-android-with-defaults/)

[http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/](http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/)

在我的小程序中，我使用了 EditText、RadioButton 和 Button。如果我使用父 @android:TextAppearance 的样式块设置每个单个小部件的 TextAppearance，小部件就会丢失其他属性。于是我搜索了style.xml和theme.xml，找到了一个很简短的解决方案：

```
<resources>
  <style name="MyTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:editTextColor">@android:color/white</item>
    <item name="android:textColorPrimaryDisableOnly">#FFFFFF</item>
    <item name="android:color/primary_text_light">#FFFFFF</item>      
  </style>           
</resources> 
```

尽管在 theme.xml 中使用了预定义的颜色

```
<style name="TextAppearance.Widget.Button" parent="TextAppearance.Small.Inverse">
    <item name="android:textColor">@android:color/primary_text_light_nodisable</item>
</style> 
```

我的第一个问题：有没有办法像使用其他属性一样覆盖 @android:color/primary_text_light_nodisable 的值？

其实我想我自己解决了这个问题：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

  <style name="MyTheme" parent="android:Theme.Light">
    <item name="android:textAppearance">@style/MyTextAppearance</item>
    <item name="android:textAppearanceButton">@style/MyTextAppearanceButton</item>
    <item name="android:editTextStyle">@style/MyEditTextStyle</item>
    <item name="android:radioButtonStyle">@style/MyRadioButtonStyle</item>     
  </style>

  <style name="MyTextAppearance" parent="@android:style/TextAppearance">
    <item name="android:textColor">@android:color/white</item>
  </style>

  <style name="MyTextAppearanceButton" parent="@android:style/TextAppearance.Widget.Button">
    <item name="android:textColor">@android:color/white</item>
  </style>

  <style name="MyEditTextStyle" parent="@android:style/Widget.EditText">
    <item name="android:textColor">@android:color/white</item>
  </style>

  <style name="MyRadioButtonStyle" parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:textColor">@android:color/white</item>
  </style>

</resources> 
```

所以我的第二个问题是，如果这是正确的方法，还是有一种捷径可以改变全局文本的颜色？

尽管如此，我认为在 xml 中定义所有这些是最干净的方法，我想知道您是否建议通过类方法来操作它？

抱歉，我对 Java 和 Android 编程很陌生，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:37:47.623

您可以在 res/values 下创建一个 colors.xml 并从这里声明您的全局颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="scheme">#007BB3</color>

    <color name="blue">#0000FF</color>
    <color name="white">#FFFFFF</color>
    <color name="grey">#C1C1C1</color>  
</resources> 
```

# sql-server-2008 - MDX 查询中元组内的上一个度量值

> ID：12057212
> 
> 赞同：1
> 
> 时间：2012-08-21T14:35:01.127
> 
> 标签：sql-server-2008, reporting-services, ssas, mdx

我在报告中有以下 MDX 查询：

```
select 
({ [Measures].[Total]})   on columns,
non empty
[Dim1].[h1].allmembers
* [Dim1].[h2].allmembers
* [Dim1].[h3].allmembers
* [1 Date - Loss Date].[Date].[Year].allmembers
having [Measures].Total>100000 on rows
from [Monthly Summary]
where ([1 Date - Month End].[Month End Date].[Month].&[20120331]) 
```

这是选择 3 月份 Total 值超过 100k 的行。如何***在 3 月或 2 月***选择 Total value 超过 100k 的行，这意味着从上述查询中获取结果**加上***上个月*超过 100k的本月值的结果？

现在，我在 SSRS 的两个数据集中执行此操作，并在另一个数据集中进行连接和查找，并从报告参数中读取月份（Where 子句）；这是关闭螺母不正确。

**更新：**天气 3 月份的 [Total] 值超过 100k 或 2 月份的 [Total] 值是，我需要在查询结果中查看 March Total Value（在第二种情况下可能小于 100k）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:27:55.343

如果我理解您的要求，您需要 where 子句中的月份或 where 子句中的前一个月的行，其总数超过 100K。where 子句将影响您为 Total 度量看到的值，因此如果您也想查看上个月的值，则不能将其留在 where 子句中。要查看该行是 3 月还是 2 月，您必须将其包含在如下行中：

```
select 
({ [Measures].[Total]})   on columns,
non empty
[Dim1].[h1].allmembers
* [Dim1].[h2].allmembers
* [Dim1].[h3].allmembers
* [1 Date - Loss Date].[Date].[Year].allmembers
* {[1 Date - Month End].[Month End Date].[Month].&[20120228],[1 Date - Month End].[Month End Date].[Month].&[20120331]}
having [Measures].Total>100000 on rows
from [Monthly Summary] 
```

您是否从参数中获取月份，因此正在寻找获取上个月的通用方法？如果是这样，您可以执行以下操作：

```
select 
    ({ [Measures].[Total]})   on columns,
    non empty
    [Dim1].[h1].allmembers
    * [Dim1].[h2].allmembers
    * [Dim1].[h3].allmembers
    * [1 Date - Loss Date].[Date].[Year].allmembers
    * {[1 Date - Month End].[Month End Date].[Month].&[20120331].PrevMember,[1 Date - Month End].[Month End Date].[Month].&[20120331]}
    having [Measures].Total>100000 on rows
    from [Monthly Summary] 
```

更新：要在当前月份或上个月大于 100,000 时获取当前值 - 无论当前月份的总数如何，您都可以执行以下操作：

```
select 
    ({ [Measures].[Total]})   on columns,
    non empty
    [Dim1].[h1].allmembers
    * [Dim1].[h2].allmembers
    * [Dim1].[h3].allmembers
    * [1 Date - Loss Date].[Date].[Year].allmembers

    having [Measures].Total>100000 or ([1 Date - Month End].[Month End Date].[Month].&[20120331].PrevMember,  [Measures].Total>100000) on rows
    from [Monthly Summary] 
    where [1 Date - Month End].[Month End Date].[Month].&[20120331] 
```

在 HAVING 子句中，WHERE 子句与度量相结合，以过滤掉任何不符合指定月份条件的行：2012 年 3 月。但它不会为 OR 之后的表达式执行此操作，因为具有 PrevMember 的元组会覆盖 WHERE 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:57:10.903

你可以使用这样的东西：

```
SELECT ({ [Measures].[Total]}) ON COLUMNS,
[Dim1].[h1].allmembers
* [Dim1].[h2].allmembers
* [Dim1].[h3].allmembers
* [1 Date - Loss Date].[Date].[Year].allmembers
HAVING [Measures].[Total] > 100000
OR ([Measures].[Total], [1 Date - Month End].[Month End Date].[Month].&[20120228]) >100000 
ON ROWS
FROM [Monthly Summary]
WHERE ([1 Date - Month End].[Month End Date].[Month].&[20120331]) 
```

您不需要行上的非空，因为`null < 100000`

# wordpress - 谷歌地图加载了两次

> ID：12057213
> 
> 赞同：0
> 
> 时间：2012-08-21T14:35:01.437
> 
> 标签：wordpress, google-maps, google-maps-api-3

> **可能重复：**
> [在 Wordpress 中加载后 Google Maps v3 移动](https://stackoverflow.com/questions/10904638/google-maps-v3-shifting-after-loading-in-wordpress)

我使用了这个有用的工具生成的代码：http: [//powerhut.co.uk/googlemaps/custom_markers.php](http://powerhut.co.uk/googlemaps/custom_markers.php)

这是我的 html 之前的 </head> 标签：

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" >
    function initializeMap()
    {
        var point = new google.maps.LatLng(42.61196, 12.54584);

        myOptions = {
            zoom: 13,
            center: point,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var image = new google.maps.MarkerImage(
            '/wp-content/plugins/comprehensive-google-map-plugin/assets/css/images/markers/medicine.png',
            new google.maps.Size(32,37),
            new google.maps.Point(0,0),
            new google.maps.Point(16,37)
        );

        var shape = {
            coord: [29,0,30,1,31,2,31,3,31,4,31,5,31,6,31,7,31,8,31,9,31,10,31,11,31,12,31,13,31,14,31,15,31,16,31,17,31,18,31,19,31,20,31,21,31,22,31,23,31,24,31,25,31,26,31,27,31,28,31,29,30,30,29,31,23,32,22,33,21,34,20,35,19,36,12,36,11,35,10,34,9,33,8,32,2,31,1,30,0,29,0,28,0,27,0,26,0,25,0,24,0,23,0,22,0,21,0,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,0,3,0,2,1,1,2,0,29,0],
            type: 'poly'
        };

        var map = new google.maps.Map(document.getElementById("googleMap"), myOptions);
        var marker = new google.maps.Marker({
            map: map,
            title: "Marker Title",
            position: point,
            icon: image,
            shape: shape
        });
        var window = new google.maps.InfoWindow({
            content: "<b>Marker Title</b>",
            maxWidth: 150
        });
        var infoWindow = new google.maps.InfoWindow(window);

        google.maps.event.addListener(marker, "click", function() {
            infoWindow.open(map, marker);
        });
    }
</script> 
```

身体上：

```
<body onload="initializeMap();"> 
```

体内...

```
<div id="googleMap">&nbsp;</div> 
```

...和风格...

```
#googleMap {
    width: 540px;
    height: 400px;
    margin: 20px auto;
} 
```

我正在使用 Wordpress，地图似乎被加载了两次，产生了平滑效果并破坏了一些命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:52:50.720

您的地图只加载一次。问题是 WordPress 样式。请参阅[在 Wordpress 中加载后的 Google Maps v3 Shifting](https://stackoverflow.com/questions/10904638/google-maps-v3-shifting-after-loading-in-wordpress)

# java - JLayer - 暂停和恢复歌曲

> ID：12057214
> 
> 赞同：7
> 
> 时间：2012-08-21T14:35:06.830
> 
> 标签：java, playback, resume, jlayer

我注意到很多主题都是关于使用 暂停/恢复 MP3 的`JLayer`，所以为了帮助大家，我专门为此设计了一个完整的课程！请看下面的答案。

注意：这是供我个人使用的，因此它可能不像某些人希望的那样强大。但由于其简单性，进行简单的修改并不难。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T17:37:22.203

真正暂停播放的播放器的一个非常简单的实现。它通过使用单独的线程来播放流并告诉播放器线程是否/何时暂停和恢复来工作。

```
public class PausablePlayer {

    private final static int NOTSTARTED = 0;
    private final static int PLAYING = 1;
    private final static int PAUSED = 2;
    private final static int FINISHED = 3;

    // the player actually doing all the work
    private final Player player;

    // locking object used to communicate with player thread
    private final Object playerLock = new Object();

    // status variable what player thread is doing/supposed to do
    private int playerStatus = NOTSTARTED;

    public PausablePlayer(final InputStream inputStream) throws JavaLayerException {
        this.player = new Player(inputStream);
    }

    public PausablePlayer(final InputStream inputStream, final AudioDevice audioDevice) throws JavaLayerException {
        this.player = new Player(inputStream, audioDevice);
    }

    /**
     * Starts playback (resumes if paused)
     */
    public void play() throws JavaLayerException {
        synchronized (playerLock) {
            switch (playerStatus) {
                case NOTSTARTED:
                    final Runnable r = new Runnable() {
                        public void run() {
                            playInternal();
                        }
                    };
                    final Thread t = new Thread(r);
                    t.setDaemon(true);
                    t.setPriority(Thread.MAX_PRIORITY);
                    playerStatus = PLAYING;
                    t.start();
                    break;
                case PAUSED:
                    resume();
                    break;
                default:
                    break;
            }
        }
    }

    /**
     * Pauses playback. Returns true if new state is PAUSED.
     */
    public boolean pause() {
        synchronized (playerLock) {
            if (playerStatus == PLAYING) {
                playerStatus = PAUSED;
            }
            return playerStatus == PAUSED;
        }
    }

    /**
     * Resumes playback. Returns true if the new state is PLAYING.
     */
    public boolean resume() {
        synchronized (playerLock) {
            if (playerStatus == PAUSED) {
                playerStatus = PLAYING;
                playerLock.notifyAll();
            }
            return playerStatus == PLAYING;
        }
    }

    /**
     * Stops playback. If not playing, does nothing
     */
    public void stop() {
        synchronized (playerLock) {
            playerStatus = FINISHED;
            playerLock.notifyAll();
        }
    }

    private void playInternal() {
        while (playerStatus != FINISHED) {
            try {
                if (!player.play(1)) {
                    break;
                }
            } catch (final JavaLayerException e) {
                break;
            }
            // check if paused or terminated
            synchronized (playerLock) {
                while (playerStatus == PAUSED) {
                    try {
                        playerLock.wait();
                    } catch (final InterruptedException e) {
                        // terminate player
                        break;
                    }
                }
            }
        }
        close();
    }

    /**
     * Closes the player, regardless of current state.
     */
    public void close() {
        synchronized (playerLock) {
            playerStatus = FINISHED;
        }
        try {
            player.close();
        } catch (final Exception e) {
            // ignore, we are terminating anyway
        }
    }

    // demo how to use
    public static void main(String[] argv) {
        try {
            FileInputStream input = new FileInputStream("myfile.mp3"); 
            PausablePlayer player = new PausablePlayer(input);

            // start playing
            player.play();

            // after 5 secs, pause
            Thread.sleep(5000);
            player.pause();     

            // after 5 secs, resume
            Thread.sleep(5000);
            player.resume();
        } catch (final Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:35:06.830

```
import java.io.BufferedInputStream;
import java.io.FileInputStream;

import javax.swing.JOptionPane;

import javazoom.jl.player.Player;

public class CustomPlayer {

private Player player;
private FileInputStream FIS;
private BufferedInputStream BIS;
private boolean canResume;
private String path;
private int total;
private int stopped;
private boolean valid;

public CustomPlayer(){
    player = null;
    FIS = null;
    valid = false;
    BIS = null;
    path = null;
    total = 0;
    stopped = 0;
    canResume = false;
}

public boolean canResume(){
    return canResume;
}

public void setPath(String path){
    this.path = path;
}

public void pause(){
    try{
    stopped = FIS.available();
    player.close();
    FIS = null;
    BIS = null;
    player = null;
    if(valid) canResume = true;
    }catch(Exception e){

    }
}

public void resume(){
    if(!canResume) return;
    if(play(total-stopped)) canResume = false;
}

public boolean play(int pos){
    valid = true;
    canResume = false;
    try{
    FIS = new FileInputStream(path);
    total = FIS.available();
    if(pos > -1) FIS.skip(pos);
    BIS = new BufferedInputStream(FIS);
    player = new Player(BIS);
    new Thread(
            new Runnable(){
                public void run(){
                    try{
                        player.play();
                    }catch(Exception e){
                        JOptionPane.showMessageDialog(null, "Error playing mp3 file");
                        valid = false;
                    }
                }
            }
    ).start();
    }catch(Exception e){
        JOptionPane.showMessageDialog(null, "Error playing mp3 file");
        valid = false;
    }
    return valid;
}

} 
```

对于用法：

```
CustomPlayer player = new CustomPlayer();
player.setPath("MP3_FILE_PATH");
player.play(-1); 
```

然后当你想暂停它时：

```
player.pause(); 
```

...并恢复它：

```
player.resume(); 
```

我希望我在这方面帮助了很多人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T15:30:59.057

虽然这个问题现在已经有几年了，但您应该注意到这个解决方案不适用于最新的 JLayer 版本和**AdvancedPlayer**！

AdvancedPlayer -> public boolean play(int frames) -> 条件

```
if(!ret) { .. } 
```

必须重新引入，否则播放将在播放一帧后停止。

编辑：

似乎从 Java 7 开始，他们对 daemonThreads 的处理阻止了简历的工作。只需删除

```
t.setDaemon(true); 
```

让它再次工作！

# javascript - 在这种情况下调用 prevent default

> ID：12057217
> 
> 赞同：0
> 
> 时间：2012-08-21T14:35:08.377
> 
> 标签：javascript, jquery, forms

我想阻止单击提交按钮后提交表单。它应该捕获所有数据，但不发送。

我一直在努力解决这个问题，试图让它工作，但无济于事。我已经尝试了以下所有方法，但没有任何效果。

```
function saveDetails(form){
    this.preventDefault();
}

function saveDetails(form){
    $(form).preventDefault();
}

function saveDetails(form){
    form.preventDefault();
} 
```

`$(form).serialize();`我可以通过运行完美的方式轻松捕获数据。但以上不适用于停止提交操作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:37:01.747

你需要调用它`event.preventDefault()`。`preventDefault`是 DOM 事件对象的方法。例如，您需要将处理程序附加到`submit`事件，该处理程序必须执行您需要的所有操作，但在它内部您必须调用此方法

```
$('form').submit(function(e){
    saveDetails();
    e.preventDefault();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:39:45.240

在提交表单时执行的函数中，您需要传入`event`jQuery 传递给所有事件回调的对象，然后调用`preventDefault()`它，例如：

```
function saveDetails(form, evt) {
  evt.preventDefault();
  var data = $(form).serialize();
  // etc
}

$("form").on("submit", function(evt) {
  saveDetails(this, evt);
}); 
```

或者稍微简化一下：

```
function saveDetails(form) {
  var data = $(form).serialize();
  // etc
}

$("form").on("submit", function(evt) {
  evt.preventDefault();
  saveDetails(this);
}); 
```

# cloud-foundry - CloudFoundry中的服务节点是如何恢复的？

> ID：12057219
> 
> 赞同：0
> 
> 时间：2012-08-21T14:35:12.447
> 
> 标签：cloud-foundry

CloudFoundry 中的 DEA 具有自我修复基础架构。使用健康监视器 CF 可确保如果 DEA 崩溃，则应使用所需的运行时工件生成替代品。

**但是服务节点呢？他们也有自我修复的基础设施吗？**如果拥有我的 MySQL 实例的 VM 崩溃了怎么办？在这种情况下会发生什么 - 我可以想到以下选项，其中一个（如果有的话）是正确的？

1.  Health Monitor 检测到 MySql 节点已关闭。所以它会创建一个新的 MySQL 节点并在这个新的 VM 上恢复数据

2.  MySQL 节点/provier 负责监控节点的健康状况并在 VM 出现故障时采取必要的措施

3.  没有自我修复基础设施 - 此 MySQL 节点所服务的应用程序将无法运行

问候， Ankit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:15:56.203

Cloud Foundry 中没有自我修复服务，它在 Cloud Foundry - [BOSH](http://github.com/cloudfoundry/bosh)下面的层中处理。但是，损坏的服务不能像应用程序那样自我修复，它们需要人工干预（检查）。如果服务进程刚刚崩溃，它将自动重新启动，但如果您的数据库损坏，则需要人工解决。

服务的修复依赖于服务本身，例如在 MySQL 中您需要使用 HA 设置，而在 Redis 中您必须使用复制。

# x11 - 儿童友好的平铺窗口管理器

> ID：12057221
> 
> 赞同：2
> 
> 时间：2012-08-21T14:35:19.097
> 
> 标签：x11, window-managers, tiling, logo-lang

我正在寻找一个平铺窗口管理器，它可以让我的女儿（4 岁）同时运行`ucblogo`和显示海龟图形。

一点背景：

Ubuntu/Debian 有一个包`ucblogo`，它可以从控制台运行，或者以图形方式从 X 内部运行。从 X 内部运行它除了其他`showturtle`命令外，还允许执行将显示 logo-turtle 的命令。乌龟显示在它自己的窗口中，输入有它自己的窗口（通常`xterm` `ucblogo`是从它开始的）。图形窗口只有`showturtle`在发出标志命令后才“启动”，即。它从一开始就不存在。请参阅覆盆子的部分屏幕截图（其中未显示海龟，它位于`BXLogo`右侧的窗口中）：

![截图1](../Images/c699bc164e02212aa21f545144e41eb5.png)

整个设置现在在树莓派下运行，但我想给她她自己的上网本，我躺在身边（是的，它只会在“监督”下使用；）。

平铺窗口管理器的概念对我来说有点奇怪，但我正在寻找一个平铺窗口管理器，它允许我显示两个窗口。从 text.input 窗口开始，第二个带有图形的窗口应该在上面。

任何人都可以请我指向一个初学者的资源，了解如何设置平铺窗口管理器来执行上述操作（从一个 fullscreen 开始`xterm`，然后在第二个窗口出现时，将此窗口平铺在第一个窗口之上或之外）。

我以前尝试`ratposion`过，但这似乎只能手动平铺，我已经调查过了`xmonad`，但它有 400 兆的依赖项，而上网本只有大约那么多的免费空间。

多一点教育背景：

我想要一个平铺窗口管理器的原因是我想暂时让所有鼠标/触摸板的杂物远离她。她已经可以使用她的用户名和密码登录，因此使用键盘的概念比鼠标更接近一些。此外，上网本的分辨率只有 800x480 像素，所以我不想在花哨的装饰上浪费任何空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T04:45:36.833

你可能想调查一下`i3`。它具有平铺窗口管理和易于设置的键绑定。但是，对于年幼的孩子来说，平铺窗口管理器可能对他们的理解来说太过分了，您可能会考虑自己的理智。

# ios - UIPrintPageRenderer 没有用 UIMarkupTextPrintFormatter 绘制任何东西

> ID：12057224
> 
> 赞同：1
> 
> 时间：2012-08-21T14:35:42.117
> 
> 标签：ios, pdf, core-data

我第一次接触这项技术。

本质上，我得到了一个核心数据数据库，其中包含我希望从中生成表格的数据。

我在这里找到了这篇文章：

[有没有办法从 iOs 中的 XML/HTML 模板生成 PDF 文件](https://stackoverflow.com/questions/9528658/is-there-any-way-to-generate-pdf-file-from-a-xml-html-template-in-ios)

但我在尝试从生成的 PDF 中获取可见的东西时磕磕绊绊。

到目前为止，我只设法让 PDF 显示 2 个空白白页，它不会打印我的简单文本。

这是我的类文件：

```
// PageRenderer Class header file
#import <UIKit/UIKit.h>

@interface PageRenderer : UIPrintPageRenderer
{
    BOOL _generatingPdf;
}

-(CGRect) paperRect;
-(CGRect) printableRect;
-(NSData*) printToPDF;

@end

// PageRenderer Class implementation file
#import "PageRenderer.h"

@implementation PageRenderer

- (CGRect) paperRect
{     
    if (!_generatingPdf)
    {
        return [super paperRect];
    }

    return UIGraphicsGetPDFContextBounds();
}

- (CGRect) printableRect
{
    if (!_generatingPdf)
        return [super printableRect];

    return CGRectInset( self.paperRect, 20, 20 );
}

- (NSData*) printToPDF
{
    _generatingPdf = YES;

    NSMutableData *pdfData = [NSMutableData data];

    UIGraphicsBeginPDFContextToData( pdfData, CGRectMake(0, 0, 792, 612), nil );  // letter-size, landscape

    [self prepareForDrawingPages: NSMakeRange(0, 1)];

    CGRect bounds = UIGraphicsGetPDFContextBounds();

    for ( int i = 0 ; i < self.numberOfPages ; i++ )
    {
        UIGraphicsBeginPDFPage();

        [self drawPageAtIndex: i inRect: bounds];
    }

    UIGraphicsEndPDFContext();

    _generatingPdf = NO;

    //    NSString* filename = @"/Volumes/Macintosh HD 2/test.pdf";
    //    [pdfData writeToFile: filename  atomically: YES];

    return pdfData;
}

- (NSInteger)numberOfPages
{
    return 1;
}

@end 
```

这是我生成 PDF 文件的代码：

```
-(void)generateLog
{        
    UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];

    pic.delegate = self;

    PageRenderer *pageRenderer = [[PageRenderer alloc] init];

    pic.printPageRenderer = pageRenderer;

    UIMarkupTextPrintFormatter *html = [[UIMarkupTextPrintFormatter alloc] init];
    //html.markupText = @"<table border='1' width='500' height='200'>";
    html.markupText = @"<html><head></head><body><p>HTML TEXT HERE, <b>BOLD</b> THIS!</p></body></html>";
    html.startPage = 0;
    html.contentInsets = UIEdgeInsetsMake(72.0, 72.0, 72.0, 72.0); // 1 inch margins
    html.maximumContentWidth = 6 * 72.0;

    pic.printFormatter = html;

    [pageRenderer drawPrintFormatter:html forPageAtIndex:0];    

    NSData *pdfData = [pageRenderer printToPDF];

    [pdfData writeToFile:[MediaDirectory mediaPathForFileName:@"triplog.pdf"] atomically:YES];

    NSLog(@"triplog.pdf written to %@", [MediaDirectory mediaPathForFileName:@"triplog.pdf"]);

    [html release];
} 
```

任何想法为什么我得到一个空白页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:51:35.403

-_-！终于有东西了！

好像我需要使用：

```
[pageRenderer addPrintFormatter:html startingAtPageAtIndex:0]; 
```

代替：

```
[pageRenderer drawPrintFormatter:html forPageAtIndex:0]; 
```

在我这样做之后，它开始工作。

# xcode4 - 使用地图工具包自定义用户位置

> ID：12057225
> 
> 赞同：0
> 
> 时间：2012-08-21T14:35:47.627
> 
> 标签：xcode4, location, mapkit

我找到了很多关于如何在 mapkit 框架中设置用户位置的教程。但地点总是在加州。

有没有办法自定义位置？例如使用经度和高度将其设置为地图上的特定点？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:42:35.013

我假设您正在使用模拟器。在 Xcode 中，当您测试您的应用程序时，您可以选择一个由 wpt 项目组成的 GPX 文件，它会将该数据发送到 iOS 模拟器，就好像您真的在那个位置一样。

单击调试面板顶部的位置指示器（看起来像一个箭头，仅在模拟器中运行您的应用程序时可见）并导入一个 gpx 文件。

![模拟位置按钮](../Images/5e1cfb57d7fb6bef22610c3edecb076a.png)

这是一个简单的文件供您试用：

```
<gpx>           
        <wpt lat="-39.308983" lon="175.517223" />
        <wpt lat="-39.308217" lon="175.518553" />
</gpx> 
```

# asynchronous - JAX-WS 逻辑处理器和 SOAPHandler

> ID：12057226
> 
> 赞同：2
> 
> 时间：2012-08-21T14:35:53.697
> 
> 标签：asynchronous, jax-ws

我正在编写一个 Java SOAP 客户端，其中多个响应异步返回到客户端 WebService 中。由于响应是异步的，因此客户端必须将**MessageId**传递给 SOAPHeader。然后，多个响应将传回相同的**MessageId**，使客户端能够将其请求与多个响应映射。

我有两个处理程序（协议和逻辑）。我的 SOAPHandler 正在获取**MessageId**，而 LogicalHander 正在获取**Payload**或实际响应。我想以某种方式将这两条信息联系在一起。

我的问题是我有两段不同的代码，一个是**MessageId**，另一个是**Payload**，但我没有办法可靠地连接这两者。

我不确定我是否在寻找某些东西。我可以从 Protocal 或 Logical 处理程序中同时提取 Header 和 Payload 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T09:55:45.327

您可以在 SOAP 处理程序中完成这一切。

> “JAX-WS 支持两种类型的 SOAP 消息处理程序：SOAP 处理程序和逻辑处理程序。SOAP 处理程序可以访问整个 SOAP 消息，包括消息头和正文。逻辑处理程序只能访问消息的有效负载，不能更改任何协议- 消息中的特定信息（如标题）。”

看到[这个](http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services/writing-a-handler-in-jax-ws.html)以获得一些解释，还有一张漂亮的图片 :) 你也可以阅读 Oracle 文档[Overview of SOAP Message Handlers](http://docs.oracle.com/cd/E13222_01/wls/docs103/webserv_adv/handlers.html)：

# wireshark - 创建 Mime PCAP 文件

> ID：12057236
> 
> 赞同：1
> 
> 时间：2012-08-21T14:36:06.600
> 
> 标签：wireshark, pcap, tcpdump

我需要生成一个 pcap 文件，其中包含我已经构建的特制 mime 消息。是否有任何程序能够生成此类文件，或者是我使用 tcpdump/wireshark 编辑现有 smtp/mime 交换的唯一选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:06:56.440

Wireshark、tcpdump 和朋友是为分析跟踪而设计的，而不是生成它们。因此，您会发现这些工具中的编辑支持非常有限。为了操纵数据包跟踪，看看[Netdude](http://netdude.sourceforge.net)。如果 GUI 不能满足您的需求，您也可以使用[libnetdude](http://netdude.sourceforge.net/plugins-libnetdude.html)以编程方式处理跟踪。

但是，如果您将 MIME 消息发送到您控制的机器并使用 tcpdump 捕获流量，它可能会更容易。

# c++ - 在应用程序版本中使用 svn 修订号

> ID：12057237
> 
> 赞同：10
> 
> 时间：2012-08-21T14:36:06.783
> 
> 标签：c++, visual-studio-2010, svn, continuous-integration

在 VS2010 解决方案（不是 .NET）中，我希望将 svn 修订号作为应用程序版本的一部分。

我们目前不使用 makefile，仅使用 VS 解决方案/项目设置。

我想在编译时获取工作副本修订号，将其存储到一个变量中，以便稍后在代码中使用它来显示版本号。

到目前为止，我已经成功地用来`svnversion`获取最新版本的工作副本作为*预建事件*。

```
"C:\Program Files\CollabNet\Subversion Client\svnversion.exe" -n $(SolutionDir) 
```

在构建时，我可以看到正确的修订号返回到`output`控制台。

现在，问题是，如何将此值存储到可在代码中使用的变量中？

我尝试定义一个预编译器变量 ( `_SVNREV`) 并使用它直接从`pre-build`事件框中保存上述 cmd 的结果，但这不起作用。

```
_SVNREV="C:\Program Files\CollabNet\Subversion Client\svnversion.exe" -n $(SolutionDir)
%_SVNREV%="C:\Program Files\CollabNet\Subversion Client\svnversion.exe" -n $(SolutionDir)
%_SVNREV="C:\Program Files\CollabNet\Subversion Client\svnversion.exe" -n $(SolutionDir)
$(_SVNREV)="C:\Program Files\CollabNet\Subversion Client\svnversion.exe" -n $(SolutionDir) 
```

这些都不起作用。

**解决方案**：我无处可去，试图从 VS 环境中更新变量。所以我采取了另一条路线，调用脚本作为预构建步骤，获取工作副本的 svn 修订版，然后使用该信息创建一个头文件。

这是`svnrev.bat`任何有兴趣的人：

```
@echo off
set cmd="C:\"Program Files\CollabNet\Subversion Client"\svnversion.exe -n %1 "
set versionfile=%1/version.h
FOR /F %%i IN ('%cmd%') DO SET SVNVER=%%i

echo Detected program revision %SVNVER% in %1
echo #pragma once > %versionfile%
echo #define _SVNVER "%SVNVER%" >> %versionfile% 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:44:55.760

到目前为止，我想出的最好的猜测是在包含 svnversion 的预构建事件中生成一个头文件。

例如，我创建了一个批处理脚本`version.bat`：

```
@echo off
FOR /F "tokens=*" %%i IN ('call svnversion') DO echo #define SVNVERSION "%%i" > svnversion.h 
```

无论我想获得 svnversion，我只是`#include "svnversion.h"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:26:26.170

如果你正在构建，你应该有一个标准的构建系统。我建议使用[Jenkins](http://jenkins-ci.org)。它是开源的，并且易于使用。

Jenkins 的巧妙技巧之一是插入一些不错的环境变量供您使用：

*   **SVN_REVISION** - Subversion 版本号
*   **BUILD_NUMBER** - Jenkins 中的内部版本号
*   **JOB_NAME** - Jenkins 中的作业名称

一旦你开始使用 Jenkins 进行构建，后两个环境变量可能会变得比 Subversion 版本本身更有价值，因为后两个会将你的代码链接回项目，以及各种好的信息。

Jenkins 是一个持续构建引擎。您可以设置 Jenkins 作业以在有结帐时或一天中的特定时间构建命令。您甚至可以通过 URL 上的 wget 发送构建命令。

通过使用构建服务器，您消除了特定系统的配置对构建产生某种副作用的可能性。构建服务器是已知配置，将生成您的**官方**构建。

这比您可能想知道的要多一点。（具体来说，您可以使用该`svnversion`命令检索修订号，然后从那里继续）。但是，它将大大改善您的构建过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:14:20.513

您可以运行包装在批处理文件中的命令。批处理文件可以生成像 version.h 这样的头文件，其中包含版本字符串：

```
#define SVN_REV 12345 
```

“#define SVN_REV”由批处理脚本回显。SVN rev 来自您拥有的命令。

现在您可以在代码中包含此标头并根据需要使用#define。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T19:32:30.510

我见过人们解析 svn 信息以获取版本号并将其写入文件，然后设置编译以将文件添加到编译后的代码中。

关于 SVN 的棘手问题：在旧版本中（每个子目录中都有一个 .svn 文件），版本号只能保证项目根目录的正确性。任何其他目录都将包含该子树中最后一次提交的版本号。我不知道你使用的是什么版本，但如果你是几个 revs back，请注意这一点！

# java - Axis2 SOAP 请求

> ID：12057248
> 
> 赞同：1
> 
> 时间：2012-08-21T14:36:28.253
> 
> 标签：java, web-services, web, struts, axis2

我是网络服务的新手。我已经使用 Axis2 的 WSDL2Java 向导生成了存根代码，所以现在我有大量生成的类（大约 50 个接口和 50 个类）并且有点困惑。

请帮我澄清一下。

如何创建 XML 文件并将其作为 SOAP 请求发送并接收响应？我尝试遵循以下代码，在第 4 行中我使用了“null”，但它要求“配置上下文”，我也不确定之后如何执行第 8 行，例如我找不到“xsd.EchoStringReturnDocument”在我的代码中。

```
 try {           org.apache.axis2.userguide.Axis2SampleDocLitServiceStub stub
4              = new org.apache.axis2.userguide.Axis2SampleDocLitServiceStub(null,
                 "http://localhost:8080/axis2/services/Axis2SampleDocLitService");
             //implementing the callback online
            org.apache.axis2.userguide.Axis2SampleDocLitServiceCallbackHandler callback =
            new org.apache.axis2.userguide.Axis2SampleDocLitServiceCallbackHandler() {
8                       public void receiveResultechoString(
                      org.apache.axis2.userguide.xsd.EchoStringReturnDocument resDoc) {
                       System.out.println(resDoc.getEchoStringReturn());
                       }
            };
        org.apache.axis2.userguide.xsd.EchoStringParamDocument reqDoc = 
          org.apache.axis2.userguide.xsd.EchoStringParamDocument.Factory.newInstance();
           reqDoc.setEchoStringParam("Axis2 Echo");
           stub.startechoString(reqDoc, callback);
        } catch (java.rmi.RemoteException e) {
          e.printStackTrace();
       } 
```

我正在使用：Axis2、Eclipse、JSP、Struts2

非常感谢任何其他可理解的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:15:27.733

由于您使用的是轴 2，因此您现在很容易遵循相同的路径。

[http://people.apache.org/~ruchithf/hw-axis2/](http://people.apache.org/~ruchithf/hw-axis2/)

我建议也阅读有关 JAX-WS 和 JAXB 的内容。

# java - 寻找通过 window.XMLHttpRequest 发送 xml 字符串的 java 等效项

> ID：12057249
> 
> 赞同：1
> 
> 时间：2012-08-21T14:36:28.143
> 
> 标签：java, javascript, ajax, servlets

在 JavaScript 中，我们有以下实现：

```
function sendRMSRequest(xmlString, url){

    if(window.XMLHttpRequest){
        xmlRequest = new XMLHttpRequest();
    }

    xmlRequest.open("POST", url, false);
    xmlRequest.onreadystatechange = function() {processRequest();};
    xmlRequest.send(xmlString);
} 
```

xmlString 具有以下字符串：

```
<TestRequest xmlns='http://???.???.????' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'></TestRequest> 
```

我想将此功能移至服务器端，但我不知道如何在 java 中实现此功能。

我目前有以下java代码：

```
public static void main(String[] args) throws IOException {
    String endPoint = "http://????.????/service";

    String xml =  "<TestRequest xmlns='http://???.???.????' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'></TestRequest>";

    System.out.println(xml);

    URL url = new URL(endPoint);
    HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
    httpCon.setDoInput(true);
    httpCon.setDoOutput(true);
    Authenticator.setDefault(new MyAuthenticator());

    httpCon.setReadTimeout(0);
    httpCon.setConnectTimeout(0);
    httpCon.setRequestMethod("POST");
    httpCon.setRequestProperty("Content-Type", "text/plain"); 
    httpCon.setRequestProperty("charset", "utf-8");
    httpCon.setRequestProperty("", xml);

    PrintWriter pw = new PrintWriter(httpCon.getOutputStream());  

    pw.write(xml);
    pw.flush();
    pw.close();  

    System.out.println(httpCon.getResponseCode());
    System.out.println(httpCon.getResponseMessage());
    System.out.println(httpCon.getContentType());

    String returnString = null;
    StringBuffer sb = null;
    BufferedInputStream in;

    // set up httpConn code not included same as previous
    in = new BufferedInputStream(httpCon.getInputStream());  

    int x = 0;

    sb = new StringBuffer();

    while ((x = in.read()) != -1) {
        sb.append((char) x);
    }

    in.close();
    in = null;

    if (httpCon != null) {
        httpCon.disconnect();
    }

    returnString = sb.toString();   
    System.out.println("Return String = " + returnString);

} 
```

运行上面的代码时出现以下错误：

```
org.xml.sax.SAXParseException: Premature end of file. 
```

任何帮助，将不胜感激。

谢谢丹尼尔

# c++ - 如何检查用户是否输入了“是”字符串

> ID：12057250
> 
> 赞同：-3
> 
> 时间：2012-08-21T14:36:28.487
> 
> 标签：c++, string

我想看看用户是否输入了“yes”（已分配给 yes 字符串变量）

```
string yes = "yes";
if (yes == "yes") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:38:24.833

使用您拥有的 ( `operator ==`) 或使用该`compare`功能。

要让用户输入字符串，您可以使用`std::cin >> yes`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:38:56.130

```
 if (yes.compare("yes") == 0) { /* indeed yes */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:47:21.503

正如其他人所说，只需将`yes`'string 与文字进行比较。`"yes"`我相信允许用户输入大写或混合大小写是很重要的。我认为程序应该对用户灵活（在合理范围内）。

```
#include <algorithm>
#include <string> 

std::string yes = "Yes"; 
std::transform(yes.begin(), yes.end(), yes.begin(), ::tolower);
if (yes == "yes")
{
  ...
} 
```

# javascript - 与 jQuery 的 :eq() 相反

> ID：12057251
> 
> 赞同：40
> 
> 时间：2012-08-21T14:36:31.980
> 
> 标签：javascript, jquery, jquery-selectors

有谁知道是否存在某种选择器来从匹配集中选择所有元素，但由指示索引给出的元素。例如：

```
$("li").neq(2).size(); 
```

假设有 5 个元素，最后一条语句将给您 4 个，并且将包含`<li>`DOM 中除第二个元素之外的所有元素。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-21T14:38:19.560

使用[`not`](http://api.jquery.com/not/)：

```
$('li').not(':eq(2)'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T14:39:25.897

好吧，这只是

```
$("li:not(:eq(2))"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-21T14:42:38.580

其他答案可以正常工作，但作为替代方案，您可以实现自己的自定义选择器`neq`

```
$.extend($.expr[":"], {  
    neq: function(elem, i, match) {  
        return i !== (match[3] - 0);
    }  
}); 
```

然后你就可以按照你最初的建议去做了。

```
$("li:neq(2)").size(); 
```

尽管另一篇文章建议使用`.length`而不是`.size`，这会更好，因为它只是一个属性而不是额外的函数调用。

```
$("li:neq(2)").length; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-21T14:51:30.270

我会在这种情况下使用过滤器，

```
$('li').filter(function (i, item) {
   return i != 2;
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T15:04:13.760

除了自定义选择器之外，您还可以将其实现为 jQuery 插件：

```
$.fn.neg = function (index) {
    return this.pushStack( this.not(':eq(' + index + ')') );
} 
```

# delphi - Indy 9 + Delphi 2007 最新的 SSL 库可用吗？

> ID：12057254
> 
> 赞同：5
> 
> 时间：2012-08-21T14:36:39.250
> 
> 标签：delphi, ssl, delphi-2007, indy-9

在使用 Delphi 2007 和 Indy 9 时，可以加载哪些最新的 OpenSSL 库以及它们在哪里可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T15:49:58.980

您需要以下两个 DLL：

*   libeay32.dll
*   ssleay32.dll

您可以从开源组织[OpenSSL.org](http://www.openssl.org/source/)下载源代码，但您必须自己编译 DLL。Indy 为每个版本的 Indy 和 OpenSSL 维护一个已编译二进制文件的站点（请参阅[indy.fulgan.com/SSL](http://indy.fulgan.com/SSL/)和[indy.fulgan.com/SSL/Archive——](http://indy.fulgan.com/SSL/Archive/)感谢 TLama 提供的链接）。

旧版本的 Indy 与 OpenSSL 库不兼容（请参阅[Indy “Could not load SSL Library” with Delphi 2007/Apache](https://stackoverflow.com/questions/952676/indy-could-not-load-ssl-library-with-delphi-2007-apache)）。TLama 对您的问题添加了评论，以查看 Embarcadero 对此的讨论。[在那次讨论中，Remy 说“在http://indy.fulgan.com/SSL/Archive/](http://indy.fulgan.com/SSL/Archive/)尝试旧的 0.9.6 DLL ”。这可能是您需要使用的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-31T05:41:43.430

这对我有用！我正在使用 Indy 9 在 Delphi 5 中工作并努力寻找合适的 DLL，我下载了[http://indy.fulgan.com/SSL/Archive/indy_OpenSSL096m.zip](http://indy.fulgan.com/SSL/Archive/indy_OpenSSL096m.zip)并将两个 DLL 放在我的程序目录和 c:\Windows\系统 32。谢谢 James L 和 Remy “Gambit” Lebeau，你们很棒的 X 战警。

# android - 在android中将两个列表视图合并为一个视图

> ID：12057257
> 
> 赞同：0
> 
> 时间：2012-08-21T14:36:53.837
> 
> 标签：android, list, listview

如何在android中将两个列表视图合并为一个视图。两个列表视图都有唯一的ID。如果first_list id存在，那么它应该是“添加”按钮可见。如果存在second_list id，那么它应该是“删除”按钮可见。Plz帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:41:42.573

为什么要合并两个 ListView？为什么您可以在光标或数组级别执行此操作？可能有可能这样做，但听起来“脏代码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:51:51.390

以下课程是否符合您的需要？

```
public class DoubleListView extends LinearLayout {

    private Button button;

    public final ListView list1, list2;

    public DoubleListView(Context context) {
        super(context);

        setOrientation(VERTICAL);

        list1 = new ListView(context);
        addView(list1, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 1));

        list2 = new ListView(context);
        addView(list2, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 1));

        button = new Button(context);
        addView(button, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        // Initial state
        list2.setVisibility(View.GONE);
        updateContent();
    }

    private void updateContent() {
        if(list2.getVisibility() == View.VISIBLE) {
            button.setText("REMOVE");
            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    list2.setVisibility(View.GONE);
                    updateContent();
                }
            });
        }
        else {
            button.setText("ADD");
            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    list2.setVisibility(View.VISIBLE);
                    updateContent();
                }
            });
        }
    }

} 
```

您可以在这样的示例活动中使用它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    DoubleListView dbleListView = new DoubleListView(this);
    dbleListView.list1.setBackgroundColor(Color.RED);
    dbleListView.list2.setBackgroundColor(Color.BLUE);
    setContentView(dbleListView);
} 
```

# python - Python 代码未按预期工作

> ID：12057258
> 
> 赞同：0
> 
> 时间：2012-08-21T14:36:54.727
> 
> 标签：python

我是 Python 语言的新手，我遇到了这个问题，下面的代码没有返回预期值：

```
def rabbits(n):
    first = 1
    second = 1

    if n == 1 or n == 2:
        return 1
    while n > 2:
        first, second = second, first + second
        n -= 1

    if n > 5:
        die1 = 1
        die2 = 1
        if n == 6 or n == 7:
            return second - 1
        while n > 7:
            die1, die2 = die2, die1 + die2
            n -= 1
        return second - die2
    return second 
```

我希望 rabbits(6) 会返回 7，但它会返回 8。谁能帮我在这里找到错误的东西？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:39:32.247

我认为按照所述解决您的问题没有用。

但这里有一些关于调试这类问题的建议，它更有用：

**在程序的每个阶段打印出你的价值观**

然后，您可以在脑海中以您的价值观逐步完成该程序，并找出问题所在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T14:39:22.993

您首先减少`n`到 2 或更低 ( `while n > 2: .. n -= 1`)，然后测试是否`n > 5`。

后一个测试永远不会通过，因为`n`现在总是 2 或更低。

第一次归约计算斐波那契数列，该数列中的第 6 个值是 8（在 1、1、2、3 和 5 之后）。

为避免您的问题，请改用简单的范围循环：

```
for i in range(n, 2, -1):
    first, second = second, first + second 
```

现在`i`将从 6 变为 3 而不会更改`n`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T14:40:02.083

据我所知，它永远不会返回 7。您正在计算斐波那契数列。它的前几个术语是 1,1,2,3,5,8,13。没有7。

斐波那契数列从 1,1 开始，然后每个下一项计算为前两项之和。这正是您对`first, second = second, first + second`语句所做的。因此`rabbits(n) <=> fibonacci(n)`。

`if n > 5`由于分支内的代码，您可能会期待 7 。`while n > 2`但是，该分支永远不会被执行，因为由于它之前的循环，n 将始终小于或等于 2 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:41:13.847

您正在更改`while n > 2`语句中的 n、使用变量的副本或以更好的方式实现它。

```
def rabbits(n):
    first = 1
    second = 1

    if n == 1 or n == 2:
        return 1
    m = n
    while m > 2:
        first, second = second, first + second
        m -= 1

    if n > 5:
        die1 = 1
        die2 = 1
        if n == 6 or n == 7:
            return second - 1
        while n > 7:
            die1, die2 = die2, die1 + die2
            n -= 1
        return second - die2
    return second 
```

# sql - 在oracle中多次运行sql

> ID：12057259
> 
> 赞同：-2
> 
> 时间：2012-08-21T14:36:56.000
> 
> 标签：sql, oracle

如何在不从键盘显式按 F9 的情况下多次运行查询或 SQL 脚本？

注意：我的系统上没有 PL/SQL 代码。我只是作为数据库客户端访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:07:59.063

不能使用 DDL，不能使用 PL/SQL：如果这不是数据库[OuLiPo](http://en.wikipedia.org/wiki/Oulipo)中的一些练习，那么它就是一个功能失调的组织的标志。真的，您应该只与您的 DBA 交谈。

无论如何，这是一种纯 SQL 方法，可以将序列增加 400 次点击：

```
select your_seq.nextval
from dual
connect by level <= 400; 
```

# infopath - 更改 InfoPath 列表参考将如何影响旧保存的表单

> ID：12057265
> 
> 赞同：0
> 
> 时间：2012-08-21T14:37:17.000
> 
> 标签：infopath

我在 SharePoint 网站上的 InfoPath 中创建了一个表单，该表单引用该网站上的数据列表。该表格已使用多年，并保存了许多旧表格。我需要更新列表名称，因为它不再适用于组织（我的错误是创建表单时过于具体）。我的问题是，如果我更改列表名称并重新指向模板以从该列表的字段中收集数据，它是否会扼杀我阅读仍在表单库中使用相同模板的旧表单的能力？我不想创建一个全新的表单库和模板，但列表名称如果误导用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T02:20:21.273

根据我的经验，你可以做一些事情。通常，列表的重命名只是装饰性的，因为列表的实际 URL 不会改变。这意味着你的表格没问题。但是，如果您确实需要更改它，旧表单将指向旧表单模板文件。

因此，您可以尝试重新链接表单的 SharePoint 内置方法，但我过去曾遇到过问题。最终我不得不下载所有的表单文件并用 grep 替换旧的 URL 为新的。这通常工作得很好。

在 Windows 上，WinGrep 可以使用数千个 infopath xml 文件轻松快速地完成此操作。

# .net - 为什么 Cassini 和 IIS Express for Web 站点的代码分析不同？

> ID：12057267
> 
> 赞同：6
> 
> 时间：2012-08-21T14:37:20.467
> 
> 标签：.net, visual-studio-2010, code-analysis, fxcop, iis-express

**问题详情**

我们打算使用 IIS Express 而不是 Cassini，我注意到代码分析没有返回相同的结果。在一个网站上，我们在游戏后期开始使用代码分析，结果是 Cassini VS 出现 423 个警告。使用 IIS Express 的 6 个警告。

有趣的是，在没有任何修改的默认 VB ASP.NET 网站上，结果是 49 条 Cassini VS 警告。使用 IIS Express 时出现 0 个警告。

有人可以解释一下吗。

**问题再现：**

1.  打开 Visual Studio 2010
2.  创建一个新的“VB - ASP.NET 网站”（不是 WebApp）
3.  为网站运行代码分析（文件菜单 -> 分析 -> 在网站上运行代码分析）
    ***注意***输出显示：

    > 在网站 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Static Analysis Tools\FxCop\FxCopCmd.exe /o:"\[OurServer]\sys\user[MyUserName]\My Documents 上运行代码分析\Visual Studio 2010\Projects\AllLocalTest\AllLocalTest{38557EBD-D900-482B-B048-B527347036D1}\CodeAnalysisLog.xml" /asp /searchgac /ignoreinvalidtargets /forceoutput /successfile /ignoregeneratedcode /outputCulture:"1033" /r:"C: \Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Static Analysis Tools\FxCop\Rules" /rs:"=MinimumRecommendedRules.ruleset" /rsd:"C:\Program Files (x86)\Microsoft Visual Studio 10.0\ Team Tools\Static Analysis Tools\FxCop..\Rule Sets" /f:"C:\Users[MyUserName]\AppData\Local\Temp\tmp94D6.tmp.cadir\bin\App_global.asax.dll" /f:" C：\Users[MyUserName]\AppData\Local\Temp\tmp94D6.tmp.cadir\bin\App_Web_303a5ti3.dll" /f:"C:\Users[MyUserName]\AppData\Local\Temp\tmp94D6.tmp.cadir\bin\ App_Web_bwgrez5a.dll" /f:"C:\Users[MyUserName]\AppData\Local\Temp\tmp94D6.tmp.cadir\bin\App_Web_ruojygvq.dll")

4.  结果有 0 个错误和 49 个警告
5.  更改站点以使用 IIS Express（在路径上的解决方案资源管理器中单击鼠标右键并选择“使用 IIS Express...”）接受弹出窗口并等待解决方案资源管理器将路径更改为`http:// localhost...`
6.  为网站运行代码分析（文件菜单 -> 分析 -> 在网站上运行代码分析） ***请注意***，输出显示与 FxCop 无关
7.  结果有 0 个错误和 0 个警告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:14:37.300

使用 MSDN 支持票证的结果确定使用 IIS Express 时不支持代码分析。

[此 msdn 帖子](http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/89833c3c-99ca-4ea2-ac47-34367b64c82c)应该由 Microsoft 支持人员更新信息。

# reporting-services - SSRS：无法为跨 2 行的父行组下的单行创建子行组

> ID：12057268
> 
> 赞同：2
> 
> 时间：2012-08-21T14:37:27.397
> 
> 标签：reporting-services, grouping, rows

我在带有行组的 SSRS 中遇到了一个非常棘手的问题。我在报告中有一个 tablix，如下所示：

![在此处输入图像描述](../Images/b0474328833c0c722f577852964a3dc3.png)

我目前有 2 行（学生姓名和团队平均数）在一个行组下。但是，我需要在此父行组下添加一个子行组，仅用于具有学生姓名的行。此子行组将按学生姓名对所有学生姓名进行分组，然后在该团队的所有学生的末尾，将显示团队平均列。当数据集中出现一个新团队时，它将开始父行分组，等等。

但是，当我尝试将子组添加到父组时，我收到错误消息“最内层组没有分组单元”。谷歌/搜索在这里并没有产生太多这个错误消息的方式，所以我很困惑。

关于如何实现这种父子行分组情况的任何建议？如果您有任何问题，请随时提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T19:57:47.573

我今天遇到了这个问题，我可以通过以下方式解决它：

1.  删除我所有现有的组和关联的行和列。
2.  重新创建组，允许它插入关联的行/列。
3.  然后，我返回并删除了关联的行和列而不删除该组。

我认为只要您有多个组而在 Tablix 中没有关联的行/列，就会发生这种情况。

# c++ - 如何为回收站添加上下文菜单

> ID：12057270
> 
> 赞同：0
> 
> 时间：2012-08-21T14:37:32.183
> 
> 标签：c++, windows, winapi, windows-7, windows-shell

如何为 Windows 回收站添加上下文菜单？我如何最终访问其中的文件？我知道回收站是一个虚拟文件夹，并且它具有树状结构，我是否必须一路访问其中的文件？

**编辑：**

```
HKLM
{
NoRemove Software
{
    NoRemove Classes 
    {
        NoRemove CLSID
        {
            NoRemove {645FF040-5081-101B-9F08-00AA002F954E}
            {
                NoRemove shellex
                {
                    NoRemove ContextMenuHandlers
                    {
                        ForceRemove {FC944A65-4422-4A2C-B867-1BA01318A944}
                    }
                }
            }
        }
     }      
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:21:50.000

查看以下注册表项：

```
HKEY_CLASSES_ROOT\CLSID\{645FF040-5081-101B-9F08-00AA002F954E}\Shell
HKEY_CLASSES_ROOT\CLSID\{645FF040-5081-101B-9F08-00AA002F954E}\ShellEx 
```

对于您正在尝试的内容，您可能必须编写一个上下文菜单外壳扩展并将其注册到`ShellEx`密钥中。

[创建 Shell 扩展处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144067.aspx)

[创建快捷菜单处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144171.aspx)

# c# - 使用 LINQ 和 RavenDB 对预定义过滤器进行嵌套排序

> ID：12057272
> 
> 赞同：2
> 
> 时间：2012-08-21T14:37:34.207
> 
> 标签：c#, linq, ravendb

我对这个问题的适当标题有问题，因为我有有趣的排序问题想要解决。

所以，我定义了 3 个类型的对象`user { skill: level }`：

```
a { s1: 1, s2: 2, s3: 4 }
b { s1: 2, s2: 2, s3: 4 }
c { s1: 1, s2: 5, s3: 9 } 
```

现在我想对用户进行排序`a`，`b`并按`c`所选技能的总和。选择技能是`s1`和`s2`。我不在乎`s3`。

过滤器的排序结果`[s1,s2]`应该是`[c,b,a]`因为

```
s1 + s2 for c = 6, 
            b = 4, 
            a = 3 
```

我已经为这种情况定义了类：

```
class Skill
{
    public string Name { get; set; }
    public int Level { get; set; }
}

class User
{
    public string Name { get; set; }
    public IList<Skill> Skills { get; set; }            
} 
```

并初始化它：

```
var a = new User
            {
                    Name = "a",
                    Skills = new List<Skill>
                                {
                                    new Skill {Name = "s1", Level = 1},
                                    new Skill {Name = "s2", Level = 2},
                                    new Skill {Name = "s3", Level = 4}
                                }
                };
var b = new User
            {
                    Name = "b",
                    Skills = new List<Skill>
                                {
                                    new Skill {Name = "s1", Level = 2},
                                    new Skill {Name = "s2", Level = 2},                                              
                                    new Skill {Name = "s3", Level = 4}
                                }
                };
var c = new User
            {
                Name = "c",
                Skills = new List<Skill>
                                {
                                    new Skill {Name = "s1", Level = 1},
                                    new Skill {Name = "s2", Level = 5},
                                    new Skill {Name = "s3", Level = 9}
                                }
            }; 
```

下面我有用户列表和我想用于排序的技能列表：

```
var users = new List<User> {a, b, c};
var filters = new List<string> { "s1", "s2" }; 
```

我想收到

```
var selected = users.Magic(); // which results in [c,b,a] 
```

我想使用 linq 和 ravendb 来做到这一点。显然，我不想将所有数据从数据库加载到内存中，然后进行魔术排序之类的事情。我想我需要用 map reduce 创建一些疯狂的索引，然后对这些索引进行一些 linq 查询等等......帮助？

顺便说一句：我正在使用 RavenDB - Build #960

**编辑：**

不幸的是，我的临时解决方法是将所有用户数据读入内存并使用 linq-to-objects（因为与 raven linq 驱动程序相关的问题，该驱动程序在查询期间不支持计算）：

```
var selected = users.OrderByDescending(user =>
                                user.Skills
                                    .Where(skill => filters.Contains(skill.Name))
                                    .Select(skill => skill.Level)
                                    .Sum()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:17:29.603

创建一个在索引时执行此求和的索引并公开结果

```
from user in docs.Users
select new
{
    Skills_Sum = user.Skills.Sum(x=>x.Level)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:42:02.770

```
var query = users.OrderBy(user => 
    user.Skills
    .Where(skill => skill.Name == "s1" || skill.Name == "s2")
    .Select(skill => skill.Level)
    .Sum()); 
```

# linux - 为什么 /dev/pts 中有 23 个文件，而使用 who 命令只显示 8 个文件？

> ID：12057276
> 
> 赞同：2
> 
> 时间：2012-08-21T14:37:47.187
> 
> 标签：linux, ssh, centos, pts

只使用了 8 个 pts 文件

```
[root@home tmp]# who
root     pts/2        2012-08-15 18:36 (:pts/1:S.0)
root     pts/6        2012-08-21 16:36 (10.10.11.168)
root     pts/3        2012-08-15 19:24 (:pts/1:S.1)
root     pts/10       2012-08-15 21:04 (:pts/1:S.2)
root     pts/14       2012-08-16 02:41 (:pts/1:S.3)
root     pts/12       2012-08-17 09:14 (:pts/1:S.5)
hugemeow   pts/9        2012-08-21 16:36 (10.10.11.168)
root     pts/22       2012-08-21 22:26 (10.10.11.168) 
```

但是目录/dev/pts/中有23个文件，怎么了？谁使用了其他 15 个文件？

```
[root@home tmp]# ls /dev/pts/ | wc -l
23

[root@home tmp]# ls /dev/pts
0  10  12  14  16  18  2   21  3  5  7  9
1  11  13  15  17  19  20  22  4  6  8 
```

顺便说一句，现在我同时使用 screen 和 tmux 通过 ssh 客户端连接到我的远程服务器:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:13:29.300

并非每个`pty`正在使用的都对应于一个登录 shell，这就是`who`报告的内容。您可能打开了与新登录会话不对应的其他窗口（ `xterm`、`konsole`、 、......）（通常通过运行创建，或通过为您正在使用的任何窗口程序提供特定选项）。`gnome-terminal``login`

# actionscript-3 - 尝试将 crossdomain.xml 文件与共享点服务器一起使用时出错

> ID：12057288
> 
> 赞同：0
> 
> 时间：2012-08-21T14:38:16.720
> 
> 标签：actionscript-3, flash, sharepoint, crossdomain.xml

我正在尝试获取存储在网站上的 .swf 文件以访问存储在我的 SharePoint 服务器上的文件，但我无法让 SharePoint 服务器上的 crossdomain.xml 文件正常工作。我对放置文件的位置有些困惑。目前它位于包含相关文件的文件夹中。该文件夹位于主站点的子域之一中。我不确定那是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:00:26.700

看起来你的 xml 有一些问题。你不需要那些分号。此外，如果您只想允许跨域访问您的整个站点，您可以使用通配符而不是域，我认为这也存在一些问题。查看之前的“堆栈溢出”问题并尝试使用他们的跨域代码段。

[有人可以发布格式良好的 crossdomain.xml 示例吗？](https://stackoverflow.com/questions/213251/can-someone-post-a-well-formed-crossdomain-xml-sample)

# java - 检查日志文件中的多个序列

> ID：12057293
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:38:29.983
> 
> 标签：java, logic

我需要对非常大量的日志进行分析。我需要检查所有事件是否在预定义的序列列表中的序列中。

我正在寻找在java中做到这一点。

任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:41:11.413

听起来您应该查看诸如[Esper](http://esper.codehaus.org/)之类的事件处理框架。

# c# - How can you force Unity to Create a new instance?

> ID：12057299
> 
> 赞同：10
> 
> 时间：2012-08-21T14:38:44.923
> 
> 标签：c#, wcf, design-patterns, dependency-injection, unity-container

Using Unity Application block how can you force the Unity configuration to create a new instance of an object when we call the `UnityContainer.Resolve<T>()` method in WCF context?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T15:11:07.733

[Lifetime Manager](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx) in `Unity` is all what you need. By default, Unity use `TransientLifetimeManager`:

> TransientLifetimeManager. For this lifetime manager Unity creates and returns a new instance of the requested type for each call to the Resolve or ResolveAll method. This lifetime manager is used by default for all types registered using the RegisterType, method unless you specify a different lifetime manager.

If you need to use another lifetime manager, just specify in `Register` method:

```
var container = new UnityContainer();
container.RegisterType<IMyType, MyType>(new PerResolveLifetimeManager()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:45:44.773

Using `RegisterType` without `a LifetimeManager` should inject a new instance of the type every time it is injected

From [MSDN](http://msdn.microsoft.com/en-us/library/ff660923%28v=pandp.20%29):

> If you do not specify a value for the lifetime, the type is registered for a transient lifetime, which means that a new instance will be created on each call to Resolve

# c# - IIS Windows 身份验证： (SAMAccountName=) 搜索过滤器无效

> ID：12057306
> 
> 赞同：1
> 
> 时间：2012-08-21T14:38:56.630
> 
> 标签：c#, asp.net, iis, windows-authentication

我正在将项目部署到 Windows Web Server 2008，但该项目收到以下错误消息： **MyApps 中的错误；方法 MyApp.Page_Load。例外是：System.ArgumentException：(SAMAccountName=) 搜索过滤器无效。**

在 web.config 的**system.web**部分中，**身份验证模式为“Windows”。** 应用程序在尝试使用以下命令从 AD 获取用户名时失败： **strUser = Context.User.Identity.Name**。

IIS 配置为启用了 Windows 身份验证，并且禁用了所有其他身份验证模式。

不知道您可能还需要什么——您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:45:30.213

首先，我不明白为什么这解决了问题——但它确实解决了。我的一位同事删除了与 Web 服务器 IP 地址池中特定 IP 地址的绑定，并将网站绑定到唯一的端口号。

据我所知，这在过去不是问题——也许它与 Windows 身份验证有关。我很想听听社区关于为什么这样做有效的评论。

**感谢提供建议的人**。Stack Overflow 是一个很棒的社区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:51:58.240

看来您还没有在服务器 WebServer 角色中配置相应的安全服务。您可能缺少“Windows 身份验证”服务。

服务器管理器 -> 角色 -> Web 服务器 -> 添加角色服务。在打开的向导中选择“安全”下的“Windows 身份验证”并继续安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-28T19:35:06.387

除了作为 Windows 身份验证问题之外，如果您为用户名发送空字符串（我们的测试数据无效），您将收到此错误

# javascript - javascript 对象 vs 阅读文档 - 初学者效率查询

> ID：12057308
> 
> 赞同：0
> 
> 时间：2012-08-21T14:38:58.407
> 
> 标签：javascript, object

我正在创建一个包含一些天文计算的网页，其中涉及用户能够更改日期/时间/纬度/经度/等以及相应地重新计算的页面。

我创建了一个对象 - 一个全局对象 - 具有许多属性和用于更新这些属性的方法，但现在我对此提出质疑......

当我需要重新计算或将对象不断地放在内存中时，读取页面元素是否更好/更有效。

这是对象定义：

```
function TIME_OBJ () {

var d = new Date();
//Properties
this.LHour = d.getHours();
this.LMinute = d.getMinutes();
this.LSecond = d.getSeconds();
this.TZone = (d.getTimezoneOffset() / 60) * -1;
this.LDay = d.getDate();
this.LMonth = d.getMonth() + 1;
this.LYear = d.getFullYear();
this.UHours = 0;
this.UMinutes = 0;
this.USeconds = 0;
this.UDay = 0;
this.UMonth = 0;
this.UYear = 0;
this.UTString = "";
this.GSTHour = 0;
this.GSTMinute = 0;
this.GSTSecond = 0;
this.GSTString = "";
this.LSTHour = 0;
this.LSTMinute = 0;
this.LSTSecond = 0;
this.LSTString = "";
this.GDay = 0;
this.GMonth = 0;
this.GYear = 0;
this.GHour = 0;
this.GMinute = 0;
this.GSecond = 0;
this.GString = "";
this.LJD = 0;
this.UJD = 0;
this.LMJD = 0;
this.UMJD = 0;
this.LDoW = 0;
this.UDoW = 0;
this.LDayN = 0;
this.UDayN = 0;
this.LatD = 52;
this.LatM = 0;
this.LatS = 0;
this.LatNS = "S";
this.LatDD = 0;
this.LonD = 0;
this.LonM = 30;
this.LonS = 0;
this.LonEW = "W";
this.LonDD = 0;

//Methods
this.UpdateAll = UpdateAll;
this.UpdateDate = UpdateDate;
this.SetClean = SetTimeClean;
this.GetUT = UpdateUT;
this.GetLJD = UpdateJD;
this.GetUJD = UpdateJD;
this.GetLMJD = UpdateMJD;
this.GetUMJD = UpdateMJD;
this.GetLDoW = UpdateDoW;
this.GetUDoW = UpdateDoW;
this.GetLDayN = UpdateDayN;
this.GetUDayN = UpdateDayN;
this.GetGrDate = UpdateGD;
this.GetGST = UpdateGST;
this.GetLST = UpdateLST;
this.GetDecPos = UpdateDecPos;
this.Dirty = false; 
```

}

因此，如果日期发生变化，这将影响本地恒星时、格林威治时间、世界时间、日出/日落、月出/日落等。这样，如果我正在读取页面元素，我将不得不进行许多 getElementById 调用来获取数据，而不是拥有一个已设置属性的全局对象，我只需要在计算完成后对元素进行页面处理。

欣赏你的想法.... Daz

PS DOM 是页面的正确术语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:43:23.893

将引用保存在内存中总是比*搜索*DOM（页面上的元素）快得多。但是您可以在页面加载期间保留对这些元素的引用并使用它们。遍历 DOM 以找到合适的元素是昂贵的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:45:57.350

读取对象比查询 DOM 快得多（是的，DOM 是正确的 :-)），即使使用 getElementByID 是最好的查询方式。

同样在设计方面，这会更好，因为您可以将对象作为独立包传递给另一个函数，而不是让函数重新计算 DOM 中的值。这也允许您编写面向对象的代码（更整洁、更简洁的代码）。

希望这可以帮助。

# c# - 如何将多个或一组选定文件从硬盘文件拖到列表框？

> ID：12057311
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:39:00.030
> 
> 标签：c#

这是代码。我试图在我的硬盘上标记 40 个文件，然后我将它们拖到列表框，但它只添加了一个文件。我想在拖动它们时将所有选定的文件添加到我的硬盘上，我该怎么做？

```
private void listBox1_DragOver(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);

                bool bfound = false;
                for (int i = 0; i < files.Length; i++)
                {
                    FileInfo fi = new FileInfo(files[i]);
                    //add more extensions here
                    if (fi.Extension == ".jpg" || fi.Extension == ".png" || fi.Extension == ".bmp" || fi.Extension == ".emf" || fi.Extension == ".gif" || fi.Extension == ".ico" || fi.Extension == ".tiff"
                           || fi.Extension == ".wmf"  || fi.Extension == ".exif")
                    {
                        bfound = true;
                        break;
                    }
                }

                if (bfound)
                    e.Effect = DragDropEffects.Copy;
                else
                    e.Effect = DragDropEffects.None;
            }
            else
                e.Effect = DragDropEffects.None;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:50:20.067

更改您的代码，以便首先您可以摆脱 break 语句，并在 for 循环中获取所有内容，（为了您自己的方便，将其更改为 foreach 循环）

假设文件数组有多个条目，那么您需要获取这些并将它们作为文件信息添加到文件信息列表中，然后您可以将其绑定到您的下拉列表

我没有拖放事件的经验，但我认为你应该处理拖放事件而不是这里的拖放检查[http://msdn.microsoft.com/en-us/library/system.windows.dragdrop.aspx](http://msdn.microsoft.com/en-us/library/system.windows.dragdrop.aspx)

像这样：

```
private void listBox1_DragOver(object sender, DragEventArgs e)
{
  if (e.Data.GetDataPresent(DataFormats.FileDrop))
  {
    string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);

    bool bfound = false;

    foreach (string file in files)
    {
      FileInfo fi = new FileInfo(file);
      //add more extensions here
      if (fi.Extension == ".jpg" || fi.Extension == ".png" || fi.Extension == ".bmp" || fi.Extension == ".emf" || fi.Extension == ".gif" || fi.Extension == ".ico" || fi.Extension == ".tiff"
             || fi.Extension == ".wmf" || fi.Extension == ".exif")
      {
        bfound = true;
      }

      if (bfound)
      {
        e.Effect = DragDropEffects.Copy;
      }
      else
        e.Effect = DragDropEffects.None;
    }
  }
  else
    e.Effect = DragDropEffects.None;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:26:24.593

解决了：

我还需要使用事件 DragDrop 而不仅仅是 DragOver：

```
private void listBox1_DragDrop(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);

                for (int i = 0; i < files.Length; i++)
                {
                  FileInfo fi = new FileInfo(files[i]);
                  //add more extensions here
                  if (fi.Extension == ".jpg" || fi.Extension == ".png" || fi.Extension == ".bmp")
                  {
                    //do something with the files
                      listBox1.Items.Add(fi.FullName);
                  }
                }
            }
        }

        private void listBox1_DragOver(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);

                bool bfound = false;
                for (int i = 0; i < files.Length; i++)
                {
                    FileInfo fi = new FileInfo(files[i]);
                    //add more extensions here
                    if (fi.Extension == ".jpg" || fi.Extension == ".png" || fi.Extension == ".bmp" || fi.Extension == ".emf" || fi.Extension == ".gif" || fi.Extension == ".ico" || fi.Extension == ".tiff"
                           || fi.Extension == ".wmf"  || fi.Extension == ".exif")
                    {
                        bfound = true;
                        break;
                    }
                }

                if (bfound)
                    e.Effect = DragDropEffects.Copy;
                else
                    e.Effect = DragDropEffects.None;
            }
            else
                e.Effect = DragDropEffects.None;

        } 
```

这样我可以拖动一个文件或一组文件，它会添加它们。谢谢。

# c# - 将字典 使用 TKey.Equals 和 TKey.GetHashCode？

> ID：12057315
> 
> 赞同：4
> 
> 时间：2012-08-21T14:39:14.787
> 
> 标签：c#

我已经实现了一个字典，如下所示：

```
Dictionary<ErrorHashKey, ErrorRow> dictionary; 
```

我已经在课堂上定义`Equals()`了。我目前正在为该项目编写一些文档，并且来自[IEqualityComparer Interface doc](http://msdn.microsoft.com/en-us/library/ms132151%28v=vs.90%29.aspx)：`GetHashCode()``ErrorHashKey`

> 字典需要一个相等的实现来确定键是否相等。您可以使用接受比较器参数的构造函数来指定 IEqualityComparer 通用接口的实现；如果未指定实现，则使用默认的通用相等比较器 EqualityComparer.Default。如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。

我没有做任何文档指定的事情（或者至少我不认为我是）。我没有在构造函数参数中传递比较器，也没有创建`EqualityComparer.Default`比较器。

是否`System.IEquatable<T> generic interface`在每个创建的类中自动实现？我应该定义一个实现`IEqualityComparer<T>`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:46:43.503

如果未实现，默认比较器将调用`object.Equals`或`object.GetHashCode`（您的覆盖方法） 。`IEquatable<T>`这记录[在`EqualityComparer<T>.Default`](http://msdn.microsoft.com/en-us/library/ms224763%28v=vs.90%29.aspx). 你不需要做任何额外的事情，不，`IEquatable<T>`不会在你的类中自动实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:48:34.153

您问题中的答案ID：

> 如果不指定实现，则使用默认的通用相等比较器 EqualityComparer.Default

`Equals`如果您没有实现 IEquatable，则EqualityComparer.Default 正在使用该方法。

> Default 属性检查类型 T 是否实现了 System.IEquatable 接口，如果是，则返回使用该实现的 EqualityComparer。否则，它返回一个使用 T 提供的 Object.Equals 和 Object.GetHashCode 覆盖的 EqualityComparer。

来源： http: [//msdn.microsoft.com/en-us/library/ms224763 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms224763(v=vs.110).aspx)

# three.js - 触控轨迹球控制

> ID：12057316
> 
> 赞同：3
> 
> 时间：2012-08-21T14:39:15.643
> 
> 标签：three.js

我尝试进行触摸控制。我想在 TrackballControls.js 中制作它，所以我这样做：

```
this.domElement.addEventListener( 'touchmove', touchmove, false );
this.domElement.addEventListener( 'touchstart', touchstart, false );
this.domElement.addEventListener( 'touchend', mouseup, false );

function touchstart( event ) {
    if (event.touches.length != 1) return;

    var touch = event.touches[0];
    event['clientX'] = touch.clientX;
    event['clientY'] = touch.clientY;
    event['button'] = 0;
    userLog('touchstart');
    mousedown( event ); 
}
function touchmove( event ) {
    if (event.touches.length != 1) return;

    var touch = event.touches[0];
    event['clientX'] = touch.clientX;
    event['clientY'] = touch.clientY;

    mousemove( event ); 
} 
```

我已经开始与工作空间打交道了。页面分为几个区域。“工作区”中的画布初始化 ![在此处输入图像描述](../Images/330c714171f1ffbd58b31eaf0f4a75af.png) 但在 ipad 上之后，任何触摸都被视为“工作区”中的触摸。如果有用，我可以发布 init() 函数或其他任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:20:42.093

```
controls = new THREE.TrackballControls( camera, renderer.domElement ); 
```

renderer.domElement - 您需要的工作区

# mysql - 使用 AND & OR 运算符的 MySQL 查询

> ID：12057318
> 
> 赞同：1
> 
> 时间：2012-08-21T14:39:18.530
> 
> 标签：mysql, sql

下面的查询会加载所有对话，但是，我只想加载两个人之间的对话。

```
SELECT * FROM msg 
WHERE senderid = '{$sender}' 
OR recid = '{$recipient}' 
OR recid = '{$sender}' 
OR senderid = '{$recipient}' 
order by id asc 
```

我将如何一起使用 AND & OR 运算符？下面的工作吗？

```
SELECT * FROM msg 
WHERE senderid = '{$sender}' 
AND recid = '{$recipient}' 
OR recid = '{$sender}' 
AND senderid = '{$recipient}' 
order by id asc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:40:59.153

一起使用`AND`and`OR`时，请使用括号对您的逻辑进行分组，并确保它符合您的预期：

```
SELECT * FROM msg 
WHERE (senderid = '{$sender}' AND recid = '{$recipient}')
OR    (recid = '{$sender}' AND senderid = '{$recipient}')
order by id asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:44:19.057

如下请见。

```
SELECT * FROM msg 
WHERE (senderid = '{$sender}' AND recid = '{$recipient}') 
OR (recid = '{$sender}' AND senderid = '{$recipient}') 
order by id asc 
```

# javascript - 如何将html中javascript的结果写入文件

> ID：12057324
> 
> 赞同：1
> 
> 时间：2012-08-21T14:39:30.857
> 
> 标签：javascript, html

```
var userAgent = navigator.userAgent.toLowerCase();

    // Figure out what browser is being used.
    var Browser = {
        Version: (userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/) || [])[1],
        Chrome: /chrome/.test(userAgent),
        Safari: /webkit/.test(userAgent),
        Opera: /opera/.test(userAgent),
        IE: /msie/.test(userAgent) && !/opera/.test(userAgent),
        Mozilla: /mozilla/.test(userAgent) && !/(compatible|webkit)/.test(userAgent),
        Check: function() { alert(userAgent); }
    };

    if (Browser.Chrome || Browser.Mozilla) {
        // A
    }
    else if (Browser.IE) {
        // B
    }
    else {
        // C
    } 
```

因此，假设在 HTML 文件中有这样的 javascript 代码。谁能告诉我如何打印此 javascript 代码的结果并将结果写入服务器中的文件？

另外，哪些 javascript 代码可以提供操作系统检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:44:43.960

要检测客户端计算机上的操作系统，您的脚本可以分析 navigator.appVersion 或 navigator.userAgent 的值。下面是一个简单的脚本示例，它设置变量 OSName 以反映实际的客户端操作系统。

var OSName="未知操作系统";

```
if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";

document.write('Your OS: '+OSName); 
```

对于使用 js 写入文件，已经有这样的问题，请看这里： [写入文件](https://stackoverflow.com/questions/585234/how-to-read-and-write-into-file-using-javascript)

虽然无论如何，出于安全措施，JS 不允许您从浏览器写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:44:21.600

JavaScript 是客户端。它无法写入服务器。由于安全限制，它也无法访问客户端文件系统。

也许首先要问为什么要实现这一目标-听起来有更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:45:01.547

操作系统信息也存储在用户代理中：

Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.2.149.29 Safari/525.13

Windows NT 5.1 是 Windows XP，语言 en-US

# java - 如何在不知道密码的情况下使用 Spring Security 以用户身份自动登录？

> ID：12057326
> 
> 赞同：7
> 
> 时间：2012-08-21T14:39:38.220
> 
> 标签：java, spring, security, authentication

我的应用程序使用 Spring Security，我的客户需要：

*   用户注册后可以自动登录。
*   管理员可以在不知道密码的情况下以任何用户身份登录。

所以我需要弄清楚如何在不知道密码的情况下自动以任何用户身份登录。

如何使用 Spring Security 实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:39:38.220

为了让它发挥作用，我必须：

配置对 UserDetailsS​​ervice (jdbcUserService) 的引用

```
<authentication-manager>
<authentication-provider>
<jdbc-user-service id="jdbcUserService" data-source-ref="dataSource"
  users-by-username-query="select username,password, enabled from users where username=?" 
  authorities-by-username-query="select u.username, ur.authority from users u, user_roles ur where u.user_id = ur.user_id and u.username =?  " 
/>
</authentication-provider>
</authentication-manager> 
```

在我的控制器中自动连接我的 userDetailsManager：

```
@Autowired
@Qualifier("jdbcUserService")  // <-- this references the bean id
public UserDetailsManager userDetailsManager; 
```

在同一个控制器中，像这样对我的用户进行身份验证：

```
@RequestMapping("/automatic/login/test")
public @ResponseBody String automaticLoginTest(HttpServletRequest request) 
{
    String username = "anyUserName@YourSite.com";

    Boolean result = authenticateUserAndInitializeSessionByUsername(username, userDetailsManager, request);

    return result.toString();
}

public boolean authenticateUserAndInitializeSessionByUsername(String username, UserDetailsManager userDetailsManager, HttpServletRequest request)
{
    boolean result = true;

    try
    {
        // generate session if one doesn't exist
        request.getSession();

        // Authenticate the user
        UserDetails user = userDetailsManager.loadUserByUsername(username);
        Authentication auth = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());
        SecurityContextHolder.getContext().setAuthentication(auth);
    }
    catch (Exception e)
    {
      System.out.println(e.getMessage());

      result = false;
    }

    return result;
} 
```

请注意，[可以在此处找到](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/)为您的应用程序使用 Spring Security 的一个很好的前兆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:03:13.733

对于第二个问题

> 管理员可以在不知道密码的情况下以任何用户身份登录。

您应该使用 spring 中的切换用户功能。[javadoc](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/switchuser/SwitchUserFilter.html)和[文章](http://mike.vanvendeloo.net/2008/03/20/spring-switch-user)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T18:59:06.397

**这是控制器**中上述问题的答案 ：

 **```
@RequestMapping(value = "/registerHere", method = RequestMethod.POST)
    public ModelAndView registerUser(@ModelAttribute("user") Users user, BindingResult result,
            HttpServletRequest request, HttpServletResponse response) {
        System.out.println("register 3");

        ModelAndView mv = new ModelAndView("/home");
        mv.addObject("homePagee", "true");

        String uname = user.getUsername();

        if (userDAO.getUserByName(uname) == null) {

            String passwordFromForm = user.getPassword();
            userDAO.saveOrUpdate(user);

            try {
                authenticateUserAndSetSession(user, passwordFromForm, request);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        System.out.println("register 4");

        log.debug("Ending of the method registerUser");
        return mv;
    } 
```

**控制器中的上述方法进一步定义为：**

```
`private void authenticateUserAndSetSession(Users user, String passwor`dFromForm, HttpServletRequest request){

        String username = user.getUsername();
        System.out.println("username:  " + username + " password: " + passwordFromForm);                        

        UserDetails userDetails = userDetailsService.loadUserByUsername(user.getUsername());

        UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(username, passwordFromForm, userDetails.getAuthorities());
        request.getSession();

        System.out.println("Line Authentication 1");

        usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetails(request));

        System.out.println("Line Authentication 2");

        Authentication authenticatedUser = authenticationManager.authenticate(usernamePasswordAuthenticationToken);

        System.out.println("Line Authentication 3");

        if (usernamePasswordAuthenticationToken.isAuthenticated()) {
            SecurityContextHolder.getContext().setAuthentication(authenticatedUser);
            System.out.println("Line Authentication 4");

        }

     request.getSession().setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, SecurityContextHolder.getContext());// creates context for that session.

        System.out.println("Line Authentication 5");

        session.setAttribute("username", user.getUsername());

        System.out.println("Line Authentication 6");

        session.setAttribute("authorities", usernamePasswordAuthenticationToken.getAuthorities());

        System.out.println("username:  " + user.getUsername() + "password: " + user.getPassword()+"authorities: "+ usernamePasswordAuthenticationToken.getAuthorities());

        user = userDAO.validate(user.getUsername(), user.getPassword());
        log.debug("You are successfully register");

    } 
```

其他答案不建议将其放入 try/catch 中，因此人们没有意识到为什么逻辑在代码运行时不起作用……而且控制台上没有任何错误或异常。因此，如果您不将其放入 try catch 中，您将不会得到错误凭据的异常。**

# c++ - SHGetImageList 和图标 64x64

> ID：12057331
> 
> 赞同：0
> 
> 时间：2012-08-21T14:39:54.977
> 
> 标签：c++, delphi, winapi

> **可能重复：**
> [可以从 Vista Shell 获得 48x48 或 64x64 图标吗？](https://stackoverflow.com/questions/1703186/can-48x48-or-64x64-icons-be-obtained-from-the-vista-shell)

我想为文档/图片/音乐库获取 64x64 图标。Explorer.exe 能够做到这一点。

我使用 API 函数 SHGetImageList 并且我没有任何问题来获得 48x48 或 256x56 但我不知道如何获得 64x64 图标。

当我将 SHGetImageList 与 SHIL_EXTRALARGE 一起使用时，我得到 48x48，而当我使用 SHIL_JUMBO 时，我得到 256x256....

有什么方法可以在 W7 中为文档/图片/音乐库获取 64x64 图标？？？

谢谢

# java - Java 如何选择使用哪个构造函数？

> ID：12057333
> 
> 赞同：9
> 
> 时间：2012-08-21T14:40:00.853
> 
> 标签：java

我无法理解以下程序的输出。

```
public class Confusing {

    private Confusing(Object o) {
        System.out.println("Object");
    }

    private Confusing(double[] dArray) {
        System.out.println("double array");
    }

    public static void main(String[] args) {
        new Confusing(null);
    }
} 
```

正确的输出是“双数组”。当两者都可以接受 null 时，为什么选择这个构造函数比另一个更具体？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T14:41:47.440

尽管两个构造函数都可以接受`null`，`double[]` *继承*自`java.lang.Object`，因此更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:44:32.740

> 编译动态类型语言的挑战是如何实现一个运行时系统，该系统可以选择最合适的方法或函数实现——在程序被编译之后。将所有变量都视为 Object 类型的对象不会有效地工作。

因此，选择特定的`Object`。

# c# - 用户设置升级不起作用

> ID：12057334
> 
> 赞同：2
> 
> 时间：2012-08-21T14:40:01.617
> 
> 标签：c#, settings

我在 c# 中使用 ApplicationSettingsBase 系统存储一些用户设置。

一切正常，除非我更新到新版本。在这种情况下，始终使用默认设置（App.Conf）。

我已经创建了一个 UpdateSettings (Default true) 设置：

```
public MainWindow() {
    if (Properties.Settings.Default.UpdateSettings) {
        Properties.Settings.Default.Upgrade();
        Properties.Settings.Default.UpdateSettings = false;
        Properties.Settings.Default.Save();
    } 
```

运行这部分代码时，会在`\AppData\Local\Company\NameOfSoftware_Url_somehash\versionnumber`. 有时哈希值不同，因此会创建一个新文件夹。在这个新创建的配置文件中，只写了 1 个条目：

```
<configuration>
    <userSettings>
        <XXX.Properties.Settings>
            <setting name="UpdateSettings" serializeAs="String">
                <value>False</value>
            </setting>
        </XXX.Properties.Settings>
    </userSettings>
</configuration> 
```

当我关闭程序时，将保存 app.Conf 文件中的默认设置。

我究竟做错了什么。

我正在使用 .net 框架 4.0

# eclipse - 使用 eclipse 插件在 clearcase 环境中工作？

> ID：12057336
> 
> 赞同：3
> 
> 时间：2012-08-21T14:40:06.723
> 
> 标签：eclipse, eclipse-plugin, clearcase

嗨，我是 clearcase 和 eclipse 的新手。我想使用安装在我家用笔记本电脑中的 eclipse 连接到我的办公室 clearcase 环境。是否可以 ？我安装了 ClearCase SCM 适配器，但我找不到提到远程工作区的选项！！！

Eclipse - 欧罗巴 3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:47:20.000

仅当您安装了完整的 ClearCase 客户端时才有可能。
没有它，您的[SCM 适配器](http://www-01.ibm.com/support/docview.wss?uid=swg24024213)将无济于事。
（注：你不一定要用Eclipse3.3，它应该支持到3.6甚至3.7）

唯一的其他选择是使用 CCRC 客户端（[ClearCase Remote Client](http://www-01.ibm.com/support/docview.wss?uid=swg21205629)），但假设[CM 服务器](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_admin.doc/topics/cm_server/c_configuring_cmserver.htm)正在运行，并且您的办公室接受来自“外部”的针对该特定服务的传入连接。
在这种情况下，您需要一个[CCRC 客户端](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.cc_ms_install.doc/topics/t_install_ccrc_standalone.htm)（不是 SCM 适配器）

# java - 如何在jsp中获取完整路径？

> ID：12057339
> 
> 赞同：8
> 
> 时间：2012-08-21T14:40:23.693
> 
> 标签：java, jsp

谁能建议如何在jsp中获取完整路径？

我在 java 类的某个位置创建一个图像，当我试图在 jsp 中访问这个位置路径时，它没有显示完整路径。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:47:35.243

```
<html>
<head><title>Absolute Path</title></head>
Absolute Path is:<%= getServletContext().getRealPath("/") %> 
</html> 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T14:48:06.833

您可以使用真实路径。

```
 String webRootPath = application.getRealPath("/").replace('\\', '/'); 
```

或者

```
 String webRootPath = getServletContext().getRealPath("/").replace('\\', '/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:48:52.423

最好在应用程序文件夹中创建自己的资源文件夹并将所有资源（在您的情况下为图像）存储在那里。

然后，您可以使用以下方法访问它：

```
String path=application.getRealPath("/resourcesfolder/image.jpg"); 
```

# java - 使用spring mvc上传jquery文件：400错误请求

> ID：12057341
> 
> 赞同：3
> 
> 时间：2012-08-21T14:40:30.493
> 
> 标签：java, jquery, spring-mvc, file-upload, asyncfileupload

我按照手动示例 (LINK) 使用 SpringMVC 编写了文件上传，它工作正常。

然后，我将客户端更改为使用 jQuery 文件上传
[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)
以获得更强大的客户端（具有拖放功能）。
我下载了这个小部件并用它实现了一个 jsp。
但它不起作用。浏览器收到响应 400（错误请求），tomcat7 没有抛出异常。

我看到了请求的不同之处：使用工作的 spring mvc doc 示例请求看起来像（firebug）：

```
-----------------------------26989305212543489571047641949 Content-Disposition: form-data; name="name"
-----------------------------26989305212543489571047641949 Content-Disposition: form-data; name="file"; filename="content.txt"
Content-Type: text/plain hello
-----------------------------26989305212543489571047641949-- 
```

对于带有 jQ​​uery fileupload 默认实现的非工作 jsp，firebug 中的请求如下所示：

```
-----------------------------205805102810633831841397435868 Content-Disposition: form-data; name="files"; filename="content.txt" Content-Type: text/plain hello
-----------------------------205805102810633831841397435868-- 
```

因此，使用 jQuery 非工作版本，更多内容被发送到服务器。某种额外的元数据。这是问题还是我以错误的方式搜索？我根本不是文件上传/分段方面的专家。

谢谢你的帮助。

Spring v3.1.2
Tomcat v7.0
jQuery 1.8
项目使用sitemesh（我觉得没什么区别但是...）

控制器代码

```
import java.io.IOException;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.multipart.MultipartFile;

@Controller
public class FileUploadController {

    @RequestMapping(value = "/form", method = RequestMethod.POST)
    public String handleFormUpload(@RequestParam(value="name",required=false) String  name,
       @RequestParam("file") MultipartFile file) throws IOException {

       if (!file.isEmpty()) {
           byte[] bytes = file.getBytes();
           // store the bytes somewhere
          return "redirect:home";
      } else {
          return "redirect:uploadFailure";
      }
       System.out.println(file.length);
       return "home";
    }

} 
```

工作的jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<html>
    <head>
       <title>Upload a file please</title>
    </head>
    <body>
       <h1>Please upload a file</h1>
       <form method="post" action="form" enctype="multipart/form-data">
           <input type="text" name="name"/>
           <input type="file" name="file"/>
           <input type="submit"/>
       </form>
    </body>
</html> 
```

非工作jsp（使用jQuery）：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://www.opensymphony.com/sitemesh/decorator"

    prefix="decorator"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<!DOCTYPE html >
<html>
<head>
<link rel="stylesheet" type="text/css" href="/ReformYourCountry/css/test-style.css" />
<link rel="stylesheet" type="text/css" href="/ReformYourCountry/css/template.css" />
<link rel="stylesheet" type="text/css" href="/ReformYourCountry/css/content.css" />
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js">  </script><![endif]-->

<!-- for imageupload page -->

<!-- Force latest IE rendering engine or ChromeFrame if installed -->
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
<meta charset="utf-8">
<title>jQuery File Upload Demo</title>
<meta name="description" content="File Upload widget with multiple file selection, drag&amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.">
<meta name="viewport" content="width=device-width">
<!-- jQuery UI styles -->
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/base/jquery-ui.css" id="theme">
<!-- jQuery Image Gallery styles -->
<link rel="stylesheet" href="http://blueimp.github.com/jQuery-Image-Gallery/css/jquery.image-gallery.min.css">
<!-- CSS to style the file input field as button and adjust the jQuery UI progress bars -->
<link rel="stylesheet" href="css/jquery.fileupload-ui.css">
<!-- Generic page styles -->
<link rel="stylesheet" href="css/style.css">
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>

<body>
    <!-- The file upload form used as target for the file upload widget -->
    <form id="fileupload" action="form" method="POST" enctype="multipart/form-data">
       <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
       <div class="row fileupload-buttonbar">
           <div class="span7">
               <!-- The fileinput-button span is used to style the file input field as button -->
               <span class="btn btn-success fileinput-button">
                   <i class="icon-plus icon-white"></i>
                   <span>Add files...</span>
                   <input type="file" name="files" multiple>
               </span>
               <button type="submit" class="btn btn-primary start">
                   <i class="icon-upload icon-white"></i>
                   <span>Start upload</span>
               </button>
               <button type="reset" class="btn btn-warning cancel">
                   <i class="icon-ban-circle icon-white"></i>
                   <span>Cancel upload</span>
               </button>
               <button type="button" class="btn btn-danger delete">
                   <i class="icon-trash icon-white"></i>
                   <span>Delete</span>
               </button>
               <input type="checkbox" class="toggle">
           </div>
           <!-- The global progress information -->
           <div class="span5 fileupload-progress fade">
               <!-- The global progress bar -->
               <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                   <div class="bar" style="width:0%;"></div>
               </div>
               <!-- The extended global progress information -->
               <div class="progress-extended">&nbsp;</div>
           </div>
       </div>
       <!-- The loading indicator is shown during file processing -->
       <div class="fileupload-loading"></div>
       <br>
       <!-- The table listing the files available for upload/download -->
       <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
       <td class="preview"><span class="fade"></span></td>
       <td class="name"><span>{%=file.name%}</span></td>
       <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
       {% if (file.error) { %}
           <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
       {% } else if (o.files.valid && !i) { %}
           <td>
               <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
           </td>
           <td class="start">{% if (!o.options.autoUpload) { %}
               <button class="btn btn-primary">
                   <i class="icon-upload icon-white"></i>
                   <span>{%=locale.fileupload.start%}</span>
               </button>
           {% } %}</td>
       {% } else { %}
           <td colspan="2"></td>
       {% } %}
       <td class="cancel">{% if (!i) { %}
           <button class="btn btn-warning">
               <i class="icon-ban-circle icon-white"></i>
               <span>{%=locale.fileupload.cancel%}</span>
           </button>
       {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
       {% if (file.error) { %}
           <td></td>
           <td class="name"><span>{%=file.name%}</span></td>
           <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
           <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
       {% } else { %}
           <td class="preview">{% if (file.thumbnail_url) { %}
               <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
           {% } %}</td>
           <td class="name">
               <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
           </td>
           <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
           <td colspan="2"></td>
       {% } %}
       <td class="delete">
           <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
               <i class="icon-trash icon-white"></i>
               <span>{%=locale.fileupload.destroy%}</span>
           </button>
           <input type="checkbox" name="delete" value="1">
       </td>
    </tr>
{% } %}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<!-- jQuery Image Gallery -->
<script src="http://blueimp.github.com/jQuery-Image-Gallery/js/jquery.image-gallery.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="js/jquery.fileupload-ui.js"></script>
<!-- The File Upload jQuery UI plugin -->
<script src="js/jquery.fileupload-jui.js"></script>
<!-- The localization script -->
<script src="js/locale.js"></script>
<!-- The main application script -->
<script src="js/main.js"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]><script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:10:50.677

我已经将 jQuery File Upload 小部件与 Spring MVC 一起使用，控制器代码如下（请注意，处理多部分内容时依赖于 apache commons fileupload）：

```
@RequestMapping(value="/project/file", method=POST) 
public void addFile(HttpServletRequest request, HttpServletResponse response) throws IOException {
        if (!ServletFileUpload.isMultipartContent(request)) {
            throw new IllegalArgumentException("Request is not multipart, please 'multipart/form-data' enctype for your form.");
        }
        ServletFileUpload uploadHandler = new ServletFileUpload(new DiskFileItemFactory());

        try {
            List<FileItem> items = uploadHandler.parseRequest(request);
            for (FileItem item : items) {
                if (!item.isFormField()) {
                    byte [] fileBytes = item.get();
                }
         } catch(FileUploadException e) {
             throw new RuntimeException(e);
         }

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:49:01.517

在 Jer 的帮助下，我制定了这种工作方法：

```
@RequestMapping(value="imageuploadsubmit", method=RequestMethod.POST) 
public void addFile(HttpServletRequest request, HttpServletResponse response) throws IOException {
    if (!ServletFileUpload.isMultipartContent(request)) {

    if (!(request instanceof DefaultMultipartHttpServletRequest)){
        throw new IllegalArgumentException("Request is not multipart, please 'multipart/form-data' enctype for your form.");
    }

    DefaultMultipartHttpServletRequest dmhsRequest = (DefaultMultipartHttpServletRequest) request ;
    MultipartFile multipartFile = (MultipartFile) dmhsRequest.getFile("image");

    //make traitment like a File object
} 
```

# php - 有没有办法通过 PHPDoc 指定强制数组键/索引？

> ID：12057347
> 
> 赞同：2
> 
> 时间：2012-08-21T14:40:43.133
> 
> 标签：php, comments, phpdoc

如果一个函数需要一个传入数组有一个特定的键/索引，有没有一种雄辩的方式通过注释来表达它，特别是 PHPDoc？

例如：

```
/**
 * Just an example function
 * @param array $arr My Example Array
 */

public function myFunction( $arr ){
    if(!array_key_exists('mykey', $arr)){
         echo 'Damnit, we needed an array that had mykey as an index!';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:55:28.410

您可以编写此类键的列表，并将其放在@param 描述中，或者将其放在方法的文档块的详细描述中。phpDocumentor 在此处的文档中并不能真正做到“自动化”或“刚性”，例如链接到其他文档化元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:44:46.227

不，如果您需要特定变量，请将其设为单独的参数。在这种情况下，如果参数为空，则会引发错误。

您不能在 PHP 中指定数组值的数据类型。所以没有必要通过 PHPDoc 来记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:45:33.963

不，那里没有。最好只是把它放在评论部分。

# c++ - QSqlQuery 使用数百 MB 内存

> ID：12057353
> 
> 赞同：0
> 
> 时间：2012-08-21T14:40:59.307
> 
> 标签：c++, sql, database, performance, qt

我正在使用一个`QSqlQuery`对象对 1000 万行 SQL 表进行线性遍历，该表具有非常复杂的 6 列主键并按排序顺序排列。由于密钥（我无法更改），`SELECT * FROM table1`使用`<`或`>`使用中断我的查询`LIMIT`会导致我正在使用的算法出现大量问题。

我出现的问题如下，无论出于何种原因，`QSqlQuery`似乎都将整个结果集缓存在内存中，直到它遇到错误的分配并杀死应用程序。所以我可能会读取几百行，`seek()`超过几十万行，此时`QSqlQuery`正在使用 300mb 的内存，我的应用程序死掉了。我阅读了文档，似乎唯一可以做的就是使用`setForwardOnly()`，但是我经常需要`previous()`（这就是为什么用 LIMIT 分解查询是一个 PITA）

有没有办法限制缓存`QSqlQuery`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:44:19.600

为什么不自己储存`previous`呢？有一个`QContiguousCache`似乎很适合这个。

# uitableview - UITableViewStyleGrouped 默认标题视图？

> ID：12057354
> 
> 赞同：2
> 
> 时间：2012-08-21T14:41:02.713
> 
> 标签：uitableview

我正在尝试实现一个删除整个部分的控件，如果删除按钮位于标题中，它在我的应用程序中看起来最好，而不是像 UIPopoverView 这样的覆盖。

* * *

在写这个问题的过程中，我找到了答案。很简单，一旦有了起点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T14:41:02.713

我从这个只有两篇文章的[博客](http://www.randycrafton.com/2010/09/changing-the-text-color-of-a-grouped-uitableviews-section-header/)中得到了大部分代码，都是从 2010 年开始的。
然后我回到[这个网站](http://www.gersh.no/posts/view/default_styling_of_sections_headers_in_uitableview_grouped)只是为了字体颜色，因为分解起来更麻烦。

三个小问题，都与标签有关。

```
- Font is too narrow
- Text color is too dark
- Label origin is wrong 
```

默认字体是已知的，所以它是第一位的。

```
label.font = [UIFont boldSystemFontOfSize:17.0]; 
```

颜色是下一个，因为这很容易。为此使用了图像编辑器的吸管工具。

```
label.textColor = [UIColor colorWithRed:0.298 green:0.337 blue:0.423 alpha:1];
// Is there a difference between alpha:1 and alpha:1.000? 
```

然后是困难的部分。一个接近的猜测，然后进行一些调整以获得完美匹配。

```
label.frame = CGRectMake(54, 4, headerView.frame.size.width-20, 22); 
```

现在我们有了一个与当前 Grouped 标头完美匹配的自定义实现。

**完成代码：**

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, 40)];
    tableView.sectionHeaderHeight = headerView.frame.size.height;

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(54, 4, labelSize.width, labelSize.height)];
    [label setBackgroundColor:[UIColor clearColor]];
    [label setFont:[UIFont boldSystemFontOfSize:17.0]];
    [label setShadowColor:[UIColor whiteColor]];
    [label setShadowOffset:CGSizeMake(0, 1)];
    [label setText:[self tableView:tableView titleForHeaderInSection:section]];
    [label setTextColor:[UIColor colorWithRed:0.298 green:0.337 blue:0.423 alpha:1.000]];
    [headerView addSubview:label];

    return headerView;
} 
```

在自己找到正确的字体/颜色后找到了这个[SO 答案。](https://stackoverflow.com/questions/5869344/uitableview-header-footer-font-color/5869424#5869424)那好吧。

**编辑：**

对于允许有效无限量文本的标题标签：

```
// before label init
NSString *title = [self tableView:tableView titleForHeaderInSection:section];
NSUInteger maxWidth = headerView.frame.size.width-108;
CGSize labelSize = [title sizeWithFont:[UIFont systemFontOfSize:17.0]
                     constrainedToSize:CGSizeMake(maxWidth, CGFLOAT_MAX)];
if (labelSize.width < maxWidth) labelSize.width = maxWidth;

// after setFont:
[label setNumberOfLines:0]; 
```

# qcodo - QCubed/QCodo ORM 左连接

> ID：12057363
> 
> 赞同：0
> 
> 时间：2012-08-21T14:41:29.870
> 
> 标签：qcodo, qcubed

我正在使用 QCubed php 框架。我需要有关 qcubed（或 qcodo）orm 的手册或文档的任何信息，或者如果有人有使用 QCubed 的经验，请帮助我使用 orm 构建或进行左/右连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:09:17.463

QCubed[站点](http://examples.qcu.be/assets/_core/php/examples/qcubed_query/conditional_expand.php)有一个使用 ORM 进行连接的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:43:57.910

我相信您应该看看[示例站点](http://examples.qcu.be)。它不仅包含有关 Db 连接的信息，还展示了 QCubed 在 Ajax、表单处理、Jquery 控件创建等各种其他领域的能力。

问候

# cakephp - 使用 SSL unforce 方法后 CakePHP Authcomponent 会话过期

> ID：12057364
> 
> 赞同：6
> 
> 时间：2012-08-21T14:41:31.210
> 
> 标签：cakephp, ssl, cakephp-2.0

我在注册期间使用 SSL 5 页

> [https://www.example.com/step1](https://www.example.com/step1)
> [https://www.example.com/step2](https://www.example.com/step2)
> [https://www.example.com/step3](https://www.example.com/step3) - 认证组件登录
> [https://www.example.com/step4](https://www.example.com/step4)
> [https: //www.example.com/step5](https://www.example.com/step5)

在第 3 步之后，我正在使用 Auth 组件创建用户会话，该组件通过 Auth 组件自动登录用户。但是，在第 5 步之后，它将重定向到[http://www.example.com/welcome](http://www.example.com/welcome)

我正在使用 SSL 组件非强制方法将**HTTPS**更改为**HTTP**。一切正常，但问题是，一旦我从第 5 步（HTTPS）到达欢迎页面，我的身份验证组件会话就会过期。我试图调试它，但找不到任何解决方案。请注意，如果没有 HTTPS，所有步骤和会话都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:17:53.777

***AppController 类中的代码：***

```
function beforeFilter() {
parent::beforeFilter();
$this->_setupSecurity();}

function _setupSecurity() {
$this->Security->blackHoleCallback = '_badRequest';
if(Configure::read('forceSSL')) {
    $this->Security->requireSecure('*');    } 
```

}

/** * 主要的 SecurityComponent 回调。* 处理丢失的 SSL 问题和一般的错误请求。*/

```
function _badRequest() {
if(Configure::read('forceSSL') && !$this->RequestHandler->isSSL()) {
    $this->_forceSSL();
} else {
    $this->cakeError('error400');
}
exit;} 
```

/** * 重定向到同一页面，但使用 https 协议并退出。*/

```
function _forceSSL() {
$this->redirect('https://' . env('SERVER_NAME') . $this->here);
exit; 
```

}

按照这个链接：也许你得到你的解决方案..

[https://stackoverflow.com/a/4473178/983624](https://stackoverflow.com/a/4473178/983624)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T07:19:29.080

如果您使用的是 Cakephp 2.0，请转到以下文件夹

库/蛋糕/模型/数据源/

打开 CakeSession.php 文件并搜索以下行

```
if (!isset($sessionConfig['ini']['session.cookie_secure']) && env('HTTPS'))
{
        $sessionConfig['ini']['session.cookie_secure'] = 1; // Just comment this line and try it will works
} 
```

# python - 在 django 中使用 pusher 对用户进行身份验证

> ID：12057365
> 
> 赞同：2
> 
> 时间：2012-08-21T14:41:37.700
> 
> 标签：python, django, django-forms, django-views, pusher

我对使用推送器在 Django 中的身份验证如何工作感到有点困惑我想实现一个一对一的聊天系统，所以我想我将使用需要身份验证的私人频道，然后才能订阅频道......我在[那里](http://pusher.com/docs/authenticating_users#channel_authentication_endpoint)读到端点是您希望推送器发布到的 url，我添加了一个 url 来测试它是否正在工作，但是每次状态返回 403 并且它似乎没有进入我为测试它而创建的视图所以任何想法? 这是我的代码示例：

**消息.html**

```
var channel = pusher.subscribe('private-test');
channel.bind('message', function(data) {
  var $message = $('<div class="message"/>').appendTo('#messages');
  $('<span class="user"/>').text(data.user).appendTo($message);
  $('<span/>').text(data.message).appendTo($message);
});;

Pusher.channel_auth_endpoint = 'test/'; 
Pusher.channel_auth_transport = 'ajax';

channel.bind('pusher:subscription_succeeded', function(status) {
    alert(status);
});

channel.bind('pusher:subscription_error', function(status) {
    alert(status);
}); 
```

**视图.py：**

```
def testUser(request,user_name):
print 'Test Passed'
return render_to_response('message.html', {
    'PUSHER_KEY': settings.PUSHER_KEY,'channel_variable':request.user.id,'other_var':'3', 
}, RequestContext(request)) 
```

当我检查它发布到的 url 时，在我的 cmd 中我发现它是正确的，并且它与我放入 urls.py 的那个匹配，但我仍然不知道为什么它没有进入我的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:00:42.357

我不了解 Django，但该框架似乎很有可能正在拦截调用以防止[CSRF (Cross site resource forgery)](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。

Django 文档在这里谈论 CSRF： [https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

与许多框架一样，您需要提供 CSRF 令牌作为对[身份验证端点](http://pusher.com/docs/authenticating_users)的 XHR/AJAX 调用的一部分，或者覆盖框架拦截（以某种方式）。

查看`Pusher`构造函数[选项参数](http://pusher.com/docs/client_api_guide/client_connect#options_parameter)的 auth 部分。在那里，您将找到一个如何传递 CSRF 令牌的示例。

# sql - PostgreSql 函数“将数据从一个表插入到另一个”

> ID：12057367
> 
> 赞同：0
> 
> 时间：2012-08-21T14:41:42.567
> 
> 标签：sql, postgresql

我想在 PostgreSQL 中创建一个函数，该函数将执行以下操作：

首先从表中读取一些数据让我们说“从表 1 中选择 col1，col2”然后对于上面选择的每一行我想插入到另一个表让我们说 table2（包含一些额外的列，如日期等上）。

对于每次插入，我想要一个从给定数字开始并在每个新行中增加的唯一键。有人可以给我一个关于我如何做到这一点的例子吗？

我需要更具体地说我想做下面描述的事情：

```
 For(every row in table1)
       if(table1.col1>0)
          insert into table2 (c1,c2,c3,c4) nalues (id,table1.col1,table1.col2,'oposite',current_timestamp)
       else if(table1.col1<0)
          insert into table2 (c1,c2,c3,c4) nalues (id,table1.col1,table1.col2,'negative',current_timestamp)

id+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:54:35.633

```
insert table2(id, col1, col2)
select startingpoint-1+row_number() over (order by col1, col2), 
       col1, 
       col2 
from table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:53:04.737

您可以使用[select into](http://www.w3schools.com/sql/sql_select_into.asp)来执行此操作，只需使用自动递增字段设置第二个表，它将为您提供唯一键。

# android - android：如何在单击按钮时更改片段内的视图

> ID：12057368
> 
> 赞同：0
> 
> 时间：2012-08-21T14:41:45.157
> 
> 标签：android

我有一个操作栏选项卡，它有两个选项卡，第一个选项卡有一个片段，其布局包含一个按钮，我想要做的是当我单击按钮时，它会切换当前片段的布局，其中该按钮属于..并且有什么办法可以处理这些东西吗？..我有一个想法，但它会在另一个选项卡上产生一个空异常，无论如何让我们专注于第一个选项卡，我想在单击按钮时切换视图，这里是我的示例代码：

主要活动：

```
ActionBar acBar = getActionBar();
acBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
ActionBar.Tab tab1 = acBar.newTab().setText("Patient");
ActionBar.Tab tab2 = acBar.newTab().setText("Contact");

Fragment frag_a = new PatientFragment();
Fragment frag_b = new ContactFragment();

tab1.setTabListener(new MyTabListener(this, frag_a));
tab2.setTabListener(new MyTabListener(this, frag_b));

acBar.addTab(tab1);
acBar.addTab(tab2); 
```

选项卡监听器：

```
class MyTabListener implements ActionBar.TabListener{
    private Fragment gFrag;
    private Activity gAct;

        public MyTabListener(Activity act, Fragment frag){
            this.gFrag = frag;
            this.gAct = act;
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            Toast.makeText(gAct, "Reselected!", Toast.LENGTH_LONG).show();
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.fragment_container, gFrag);
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.remove(gFrag);

        }

} 
```

片段 A：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View view = inflater.inflate(R.layout.frag_a, container, false);
    ;
    Button next = (Button) view.findViewById(R.id.prompt);

    next.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(getActivity(), "Next!",Toast.LENGTH_LONG).show();

        }
    });

    return view;
} 
```

主要是我只想在片段中切换视图，如果你们知道还有其他方式，请分享 tnx！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:58:44.947

建议你全换`Fragment`。这个 API 就是为这样的目的而设计的。

# javascript - 使用 MomentJs 在 Nodejs 中验证日期

> ID：12057370
> 
> 赞同：0
> 
> 时间：2012-08-21T14:41:48.207
> 
> 标签：javascript, node.js, date, momentjs

我想验证 NodeJS 应用程序中的日期。

我尝试了[MomentsJs](http://momentjs.com/)库，但似乎[isValid()](http://momentjs.com/docs/#/parsing/is-valid/)函数忽略了所有字母字符，这对我来说太宽容了（当我将日期格式指定为 时`YYYY-MM-DD`，我希望日期是 10 个字符的字符串。）：

```
moment("One,2 and 011, 12-10", "YYYY-MM-DD").isValid()  // returns true instead of false
moment("Seppl"); // parsing seems to work with all values? 
```

有什么方法可以更严格地检查日期吗？

如何检查解析日期是否失败？（它`-62167222800000`在打印错误日期时返回）。

是否还有其他更好的 Javascript 数据库可以处理不同的日期格式并支持 MomentJs 等日期操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T21:28:16.927

Moment.js 库不提供任何方法来验证具有给定格式的日期。

moment("<>", dateFormat) 将只检查给定的日期，但不检查给定的格式。

以下来自 momentjs.com 的内容

注意：它不用于验证输入字符串是否与格式字符串匹配。由于格式匹配的严格程度会因应用程序和业务需求而异，因此 Moment.js 中不包含此类验证。

[http://momentjs.com/docs/#/parsing/is-valid/](http://momentjs.com/docs/#/parsing/is-valid/)

# clojure - 在 Clojure 中停止线程声音循环

> ID：12057374
> 
> 赞同：2
> 
> 时间：2012-08-21T14:41:59.033
> 
> 标签：clojure, javax.sound.sampled

我有一个线程循环的声音剪辑：

```
(def f
  (future
    (let [sound-file (java.io.File. "/path/to/file.wav")
          sound-in (javax.sound.sampled.AudioSystem/getAudioInputStream sound-file)
          format (.getFormat sound-in)
          info (javax.sound.sampled.DataLine$Info. javax.sound.sampled.Clip format)
          clip (javax.sound.sampled.AudioSystem/getLine info)]
      (.open clip sound-in)
      (.loop clip javax.sound.sampled.Clip/LOOP_CONTINUOUSLY)))) 
```

问题是当我尝试杀死线程时：

```
(future-cancel f) 
```

它不会停止播放永远播放的剪辑。我发现阻止它的唯一方法是`(.stop clip)`显式调用。我的问题：这样做的最佳/惯用方式是什么？我对 Clojure 很陌生，`future`所以到目前为止我只进行了实验，但也许 an`agent`更适合这种情况？

**更新：**鉴于该`.loop`功能是非阻塞的（如下所述），我通过摆脱最初的来简化我的设计`future`：

```
(defn play-loop [wav-fn]
    (let [sound-file (java.io.File. wav-fn)
          sound-in (javax.sound.sampled.AudioSystem/getAudioInputStream sound-file)
          format (.getFormat sound-in)
          info (javax.sound.sampled.DataLine$Info. javax.sound.sampled.Clip format)
          clip (javax.sound.sampled.AudioSystem/getLine info)]
      (.open clip sound-in)
      (.loop clip javax.sound.sampled.Clip/LOOP_CONTINUOUSLY)
      clip)) 
```

连同一个控制`atom`：

```
(def ^:dynamic *clip* (atom nil)) 
```

我用它开始循环：

```
(when (nil? @*clip*)
  (reset! *clip* (play-loop "/path/to/file.wav"))) 
```

并停止它：

```
(when @*clip*
  (future (.stop @*clip*) ; to avoid a slight delay caused by .stop
          (reset! *clip* nil))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:00:41.830

你可以尝试这样的事情：

```
(def f
  (future
    (let [sound-file (java.io.File. "/path/to/file.wav")
          sound-in (javax.sound.sampled.AudioSystem/getAudioInputStream sound-file)
          format (.getFormat sound-in)
          info (javax.sound.sampled.DataLine$Info. javax.sound.sampled.Clip format)
          clip (javax.sound.sampled.AudioSystem/getLine info)
          stop (fn [] (.stop clip))]
      (.open clip sound-in)
      (.loop clip javax.sound.sampled.Clip/LOOP_CONTINUOUSLY)
       stop)))

(def stop-loop @f)
(stop-loop) 
```

# html - 垂直对齐引导导航栏

> ID：12057375
> 
> 赞同：1
> 
> 时间：2012-08-21T14:41:59.027
> 
> 标签：html, css, twitter-bootstrap

[我在这篇文章Modify twitter bootstrap navbar](https://stackoverflow.com/questions/10568103/modify-twitter-bootstrap-navbar)上找到了一种在引导程序中水平对齐导航栏的方法

然后我试图让它垂直对齐并且它可以工作，除了 top:30% 被忽略，因为 nav-collapse 有一个 style="height: 0px;

有人对使用不同于 top:30% 的东西有什么建议吗

HTML >

```
<div class="navbar space-top-page center">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand"></a>
      <div class="nav-collapse center collapse" style="height: 0px; ">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

CSS >

```
.center.navbar .nav/*, .center.navbar .nav > li*/ {
float:none;
display:inline-block;
*display:inline; /* ie7 fix */
*zoom:1; /* hasLayout ie7 trigger */
vertical-align: top;
position:absolute;
top:30%;
left:40%;
  }

 .center .navbar-inner {
text-align:center;
}

.center.nav-collapse { position:relative ; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T22:32:27.060

使用占位符元素：

```
/* Provide explicit height to prop up the page */

html, body  { height: 95%; }

/* Provide explicit height to prop up the container and content */
#container, span.placeholder { height: 100%; }

/* Use inline-block to make height usable by inline elements */
#content, span.placeholder { display: inline-block; vertical-align: middle; }
```

```
<div id="container">
      <span id="content">
      hi
      </span> 
      <span class="placeholder"></span>
</div>
```

它反映了内容的对齐方式以进行流畅的垂直对齐。

**参考**

*   [如何在 div 内垂直居中 <span>？](https://stackoverflow.com/questions/4357315/1113772)
*   [与 css 等效的 <p> 的 valign=center](https://stackoverflow.com/questions/2474055/1113772)

# mongodb - 配置 2 个 EC2 让 mongoDb 一起工作

> ID：12057376
> 
> 赞同：0
> 
> 时间：2012-08-21T14:41:58.793
> 
> 标签：mongodb, amazon-ec2

我创建了 2 个 micro ec2，每个都安装了 mongoDB，同一个区域，我想配置一个为主，其余为从属，如何配置 mongodb.conf？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:45:24.820

查看文档：

*   [Amazon EC2 快速入门](http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart)
*   [带有 MongoDB 的 Amazon EC2](http://www.mongodb.org/display/DOCS/Amazon+EC2)

# python - 如果有 *nix 有效的绝对路径，python 中的例程测试字符串？

> ID：12057379
> 
> 赞同：0
> 
> 时间：2012-08-21T14:42:08.813
> 
> 标签：python, python-2.7, filepath

我需要 python 中的一个例程来测试包含绝对路径的字符串，即 Unix 样式格式。所以这`/home/eduard/tmp/chrome-data-dir/file.ext`将是一条有效的路径。但`C:\Users\user\AppData\Local\Google\Chrome\Application\chrome.exe`不会是有效的路径。

我还需要测试的路径不包含可能被视为特殊的字符，例如：*,?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:09:38.057

```
import posixpath
posixpath.isabs('/home/eduard/tmp/chrome-data-dir/file.ext') 
```

[`posixpath`](http://docs.python.org/dev/library/os.path.html)是`os.path`在类 Unix 系统上使用的实现。另请参阅[`isabs`](http://docs.python.org/dev/library/os.path.html#os.path.isabs)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:44:48.767

您的第一个示例不是相对路径，它是绝对路径，因为它以`/`. 第二个也是绝对的，因为驱动器名称后的第一个字符是`\`.

Unix 中的相对路径类似于`chrome-data-dir/file.ext`or `../../include/`。

你的问题有点不清楚。

也许你应该寻找一个冒号？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:55:53.890

如果我理解您，您的第一个示例是绝对路径。所有绝对路径都将以“/”开头，因为它们必须从根目录开始，而所有相对路径都不会。因此，只需使用 str.startswith('/') 检查您的字符串是否以“/”开头。然后，如果要检查路径是否有效，请使用 os.path.exists()。

您的第二个示例不是 *nix 路径。

# iphone - 我想知道objective-c中预定义类的方法列表

> ID：12057389
> 
> 赞同：0
> 
> 时间：2012-08-21T14:42:47.003
> 
> 标签：iphone

我想知道objective-c中预定义类的方法列表，使用java中的“javap”等任何工具。

在 java 中，javap 工具用于使用命令提示符获取类的所有现有方法的列表。

在objective-c中可能吗？有什么可用的工具吗？

请帮我。

感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:46:31.847

您可以使用 objc 运行时函数`class_copyMethodList`，然后枚举您感兴趣的信息的结果。

# android - 自定义字体，字体不起作用

> ID：12057390
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:42:50.273
> 
> 标签：android, listview, typeface, custom-font

大家好。这是我下面的代码，我在我的应用程序中使用了自定义字体（arial），但是我的代码字体有问题，也许我把它放在了错误的位置（你们都在代码的末尾看到它）或我错过了一些细节。我不知道。所以，看看吧！我需要一些帮助！

```
public class Listagem extends Activity {

    EditText edittext;
    ListView listview;

    String[] text;  
    String[] text2;

    int[] image = {
        R.drawable.wolf;
        R.drawable.cat;
    };

    int textlength = 0;
    ArrayList<String> text_sort = new ArrayList<String>();
    ArrayList<String> text2_sort = new ArrayList<String>();
    ArrayList<Integer> image_sort = new ArrayList<Integer>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        text =  getResources().getStringArray(R.array.text);
        text2 = getResources().getStringArray(R.array.text2);

        edittext = (EditText) findViewById(R.id.EditText01);
        listview = (ListView) findViewById(R.id.ListView01);

        listview.setOnItemClickListener(new OnItemClickListener() { 

                public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                    if ("Howl".equals(text[position])) {
                        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
                        player.start();
                    }

                    if ("Meow".equals(text[position])) {
                        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
                        player.start();
                    }
                }          
        });

        listview.setAdapter(new MyCustomAdapter(text, text2, image));
        edittext.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                textlength = edittext.getText().length();
                text_sort.clear();
                text2_sort.clear();
                image_sort.clear();

                for (int i = 0; i < text.length; i++) {
                    if (textlength <= text[i].length()) {
                        if (edittext.getText().toString().equalsIgnoreCase((String) text[i].subSequence(0, textlength))) {
                            text_sort.add(text[i]);
                            text2_sort.add(text2[i]);
                            image_sort.add(image[i]);
                        }
                    }
                }

                listview.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                        if ("Howl".equals(text_sort.get(position))) {
                            MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
                            player.start();
                        }

                        if ("Meow".equals(text_sort.get(position))) {
                            MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
                            player.start();
                        }
                    }
                });
                listview.setAdapter(new MyCustomAdapter(text_sort, text2_sort, image_sort));
            }
        });
    }

    class MyCustomAdapter extends BaseAdapter {
        String[] data_text;
        String[] data_text2;
        int[] data_image;

        MyCustomAdapter() {

        }

        MyCustomAdapter(String[] text, String[] text2, int[] image) {
            data_text = text;
            data_text2 = text2;
            data_image = image;
        }

        MyCustomAdapter(ArrayList<String> text, ArrayList<String> text2, ArrayList<Integer> image) {
            data_text = new String[text.size()];
            data_text2 = new String[text2.size()];
            data_image = new int[image.size()];

            for(int i=0;i<text.size();i++) {
                data_text[i] = text.get(i);
                data_text2[i] = text2.get(i);
                data_image[i] = image.get(i);
            }
        }

        public int getCount() {
            return data_text.length;
        }

        public String getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

if (convertView == null) {
    LayoutInflater mInflater = getLayoutInflater();
    convertView = mInflater.inflate(R.layout.listview, null);
    holder = new ViewHolder();
    holder.text = (TextView) convertView.findViewById(R.id.TextView01);
    holder.text2 = (TextView) convertView.findViewById(R.id.TextView02);

    holder.image = (ImageView) convertView.findViewById(R.id.ImageView01);
    convertView.setTag(holder);
}else {
    holder = (ViewHolder) convertView.getTag();

}
holder.text.setText(data_text[position]);
holder.text2.setText(data_text2[position]);
holder.image.setImageResource(data_image[position]);

Typeface font1 = Typeface.createFromAsset(getAssets(), "arial.ttf");  
TextView text2 = (TextView) findViewById(R.array.text2);text2.setTypeface(font1);

return convertView;
} 
```

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:52:48.863

你可以检查这个类

[https://github.com/Neferetheka/Helper-Tools-for-Android/blob/master/FontManager.java](https://github.com/Neferetheka/Helper-Tools-for-Android/blob/master/FontManager.java)

然后你只需要在创建活动时调用 FontManager 的 init 方法，并在你的 textviews 上使用 setTypeface 方法

# cocos2d-iphone - 淡入淡出的帧

> ID：12057392
> 
> 赞同：0
> 
> 时间：2012-08-21T14:43:11.030
> 
> 标签：cocos2d-iphone

我有一组帧，我需要一个接一个地按顺序显示，但不是简单地擦除前一帧并绘制下一帧，我需要淡出前一帧并同时淡入新帧。

在 cocos2d 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:03:52.633

```
- (void) showFirstSpriteWithFade
{
    if( [m_sprites count] > 0 )
    {
        CCSprite* spriteToShow = [m_sprites objectAtIndex: 0];
        [m_sprites removeObjectAtIndex: 0];

        id showAction = [CCSequence actions: [CCFadeIn actionWithDuration: fadeInDuration],
                                             [CCFadeOut actionWithDuration: fadeOutDuration],
                                             [CCCallFunc actionWithTarget: self selector:@selector(showFirstSpriteWithFade)],
                                             nil];
       [spriteToShow runAction: showAction];
    }
} 
```

如果您将所有精灵存储在数组 m_sprites 中，这将起作用。在这种情况下，必须将所有精灵添加到父精灵中才能一一显示。如果需要，您可以改进此代码，例如，只使用一个精灵并每次更改它的纹理。

如果你想永远显示图片，你可以尝试这样的事情

```
- (void) showNextSpriteWithFade
{
        m_shownSpriteIndex++;
        if( m_shownSpriteIndex == [m_sprites count] )
        {
            m_shownSpriteIndex = 0;
        }

        CCSprite* spriteToShow = [m_sprites objectAtIndex: m_shownSpriteIndex];

        id showAction = [CCSequence actions: [CCFadeIn actionWithDuration: fadeInDuration],
                                             [CCFadeOut actionWithDuration: fadeOutDuration],
                                             [CCCallFunc actionWithTarget: self selector:@selector(showNextSpriteWithFade)],
                                             nil];
       [spriteToShow runAction: showAction];

} 
```

# sql - 根据同一表单上组合框的值填充访问表单上的文本框

> ID：12057393
> 
> 赞同：0
> 
> 时间：2012-08-21T14:43:12.260
> 
> 标签：sql, ms-access, vba

> **可能重复：**
> [MSAccess - 使用来自查询的值填充文本框](https://stackoverflow.com/questions/3786993/msaccess-populate-text-box-with-value-from-query)

我有一个表单，上面有几个组合框和文本框。一个组合框值（用于 Wells）将被独立填充，然后我需要文本框的值基于 wells 组合框值的值。我创建了一个部分解决了问题的查询，它需要井组合框值的参数。如果我从表单中查询一个部分，它工作得很好并要求参数并且没问题。我确实认为使用 VBA，添加一个处理 SELECT 语句（上述查询）的代码，然后告诉它从将在表单上准备好的 wells 组合值中获取其参数。

有人可以帮忙吗。这可以像我描述的那样工作吗？

提前致谢。

穆罕默德

除了我上面的问题，我尝试了以下解决方案：

```
 Private Sub Well_ID_Change()
Last_Ref.ControlSource = " SELECT TOP1 New_Ref FROM" & _
" BSW_Transactions WHERE BSW_Transactions.New_Ref Is Not Null AND BSW_Transactions.Well_ID = " & Me.Well_ID.Value & _
" ORDER BY BSW_Transactions.Sample_Date DESC"
End Sub 
```

Last_Ref 是我想用代码中嵌入的 SELECT 语句的结果填充的文本框。Well_ID 是组合框，其值将成为 SELECT 语句的参数。Well_ID 是数字字段，它显示 well_name 并将关联的 ID 值存储在表中。保存更改后运行表单时，Last_Ref 文本框显示 (#Name?)。我猜测文本框（是一个数字字段）在组合框 Well_ID 中找到了一个文本，所以我在条件 Me.Well_ID 处将“.Value”添加到上述语法中。然而问题依然存在。

我可能在语法上弄错了，有人会帮忙吗？这可以正常工作吗？

提前致谢。穆罕默德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:52:09.940

在组合框的 AfterUpdate 事件中尝试此操作：

```
Private Sub MyTextBox_AfterUpdate()
   MyTextBox.ControlSource = DLookup("WellsField", "WellsTable", "CriteriaField = '" & [MyComboBox] & "'")
   MyTextBox.Requery
End Sub 
```

这将告诉您的 TextBox 在 Wells 表中查找值，并且 Requery 确保每次更新组合框时该值都是最新的。请注意`'`DLookup 的条件部分。这些`'`仅对字符串值是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:46:50.817

你这样做是错误的。将表单绑定到表格，向导将为您完成，然后添加组合框。从向导中选择“在我的表单上查找记录”。将生成执行此操作的代码或宏。完成此操作后，在组合中选择一条记录将使用该记录的数据填充表单。

# windows - 通过 ssh 和进程所有权启动独立的批处理文件

> ID：12057395
> 
> 赞同：1
> 
> 时间：2012-08-21T14:43:16.513
> 
> 标签：windows, batch-file, ssh

过去我在很多事情上都使用过批处理文件……但我一直遇到这个问题。如果这是一个重复的问题，我很抱歉，我不完全确定我知道如何表达它以用于搜索目的。问题是这样的：

1）批处理文件启动一些过程。2) 用户关闭的命令窗口。3) 由批处理文件启动的进程结束。

我想这是由于批处理文件“调用”了启动的进程，因此它是子进程。具体来说，我要做的是通过 ssh 登录到服务器，运行位于该服务器上的批处理文件，然后启动一个 java 程序。我需要批处理保持打开状态，或者允许 java 程序以某种方式拥有自己。这样，当我离开 SSH 会话时，程序将继续运行。任何想法我怎么能做到这一点？

我正在使用 MobaSSH 运行 Windows XP x64 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:14:08.653

您可以尝试使用 sysinternals 的[psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)工具。

一些可能有用的命令：

1.  [在](http://support.microsoft.com/kb/313565)
2.  [任务](http://technet.microsoft.com/en-us/library/bb490996.aspx)
3.  [sc](http://support.microsoft.com/kb/251192)
4.  [wmic](http://technet.microsoft.com/en-us/library/bb742610.aspx)

I'm not sure that any of the above commands will be of any help, but I think they're worth checking out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:00:59.507

问题尚不清楚，但看起来您正在寻找的是一种从终端“分离”脚本的方法，以便即使在终端关闭时它也能继续运行。

你可以做：

```
nohup <your-script> & 
```

或者：

```
<your-script> &
disown 
```

# antlr - Eclipse Antlr 解释器故障

> ID：12057400
> 
> 赞同：1
> 
> 时间：2012-08-21T14:43:27.677
> 
> 标签：antlr, interpreter, antlrv3ide

以下语法成功地生成了一个用于处理字符串的解析器`'ccdunion'`。但是当我尝试使用解释器时，我有`NoViableAltException`错误，为什么？

```
grammar SimpleCalc;

options {
  k = 2;
  output = AST;
  backtrack = true;
}

tokens {
  UNION = 'union';
}

@header {
  package myPack;
  import java.io.File;
  import java.io.FileWriter;
  import java.io.PrintWriter;
}

@lexer::header {
  package myPack;
}

@members {
  public static void main(String[] args) throws Exception {
    File fileOut = new File("src/ARFF.arff");

    FileWriter fw = new FileWriter(fileOut);
    PrintWriter pw = new PrintWriter(fw);

    pw.print("a ");
    pw.println("b");
    pw.println(12);

    fw.close();
    SimpleCalcLexer lex = new SimpleCalcLexer(new ANTLRFileStream(args[0]));
    CommonTokenStream tokens = new CommonTokenStream(lex);

    SimpleCalcParser parser = new SimpleCalcParser(tokens);

    try {
      parser.expr();
    } catch (RecognitionException e) {
      e.printStackTrace();
    }
  }
}

expr
 : filsPiquets EOF 
   {
     System.out.println("base mono: ");
   }
 ;

filsPiquets
 : chars UNION
   {
     System.out.println("TXTunionII"+$chars.text);
   }
 ;

chars
 : CHAR
 | . chars
 ;

CHAR
 : .
 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:34:24.173

> ...当我尝试使用解释器时，出现 NoViableAltException 错误，为什么？

因为解释器有问题：不要使用它。请改用调试器。ANTLRWorks 也是如此。

# javascript - 使用 WebView 中的 javascript 触发 setVisibility 属性不起作用

> ID：12057402
> 
> 赞同：0
> 
> 时间：2012-08-21T14:43:34.410
> 
> 标签：javascript, android, webview

我在 Java 环境中很菜鸟，很可能我在这里错过了一些非常重要的事情，但无论如何这是我的代码：

这是我在 XML 中创建的对象：

```
<ImageView
    android:id="@+id/splash_screen"
    android:src="@drawable/my_image"
    android:layout_height="match_parent"
    android:layout_width="match_parent"/> 
```

这是假设触发该功能的javascript代码：

```
function hideSplash() {
    Android.hideSplash();
}

$(window).load(function(){
    hideSplash();
}); 
```

这是应该由javascript触发的功能：

```
public void hideSplash() {
    Toast.makeText(mContext, "Splash! Remove!!!", Toast.LENGTH_SHORT).show();
    View splash = (ImageView) findViewById(R.id.splash_screen);
    splash.setVisibility(View.GONE);            
} 
```

如您所见，我在函数的开头放置了一个 Toast 警报，以检查是否发生了某些事情。我得到的是这个“飞溅！删除！！！” message 并且“splash”对象由于某种原因拒绝更改其可见性。有人请帮我让它工作......我已经尝试了一切！

我想我的整个方法可能是错误的。我想要的是在 WebView 内容完全加载时隐藏启动画面图像：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:27:05.790

好的，我知道了……我已经在父类中描述了该函数，然后从 javascript 类中调用了它。像这样：

```
public class MainActivity extends Activity {

    public class JavaScriptInterface extends Activity {
        public void hideSplash() {
            hideSplashHandler();
        }
    }

    public void onCreate(Bundle savedInstanceState) {
        /** Some onCreate stuff */
    }

    public void hideSplashHandler() {
        ImageView splash = (ImageView) findViewById(R.id.splash_screen);
        splash.setVisibility(View.GONE);  
    }

} 
```

我不知道这是否正确，但它就像一个魅力^_^

# sql - sql事务不工作

> ID：12057406
> 
> 赞同：-4
> 
> 时间：2012-08-21T14:43:40.137
> 
> 标签：sql, sql-server-2005

SQL 事务不工作：

```
BEGIN TRANSACTION AddEmployees
   INSERT INTO Employees
      VALUES(N'595002', N'John Meah', N'20000212', 32.25),
      (N'928375', N'Chuck Stansil', N'20080628'),
      (N'792764', N'Orlando Perez', N'20000616', 12.95);
   COMMIT TRANSACTION AddEmployees;
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:45:57.223

您在该行缺少参数，请使用此行：

```
(N'928375', N'Chuck Stansil', N'20080628', null), 
```

这与事务无关，这是因为表值构造函数中每一行的列数必须相同。

如果您的表不允许为空，则传递 DEFAULT 的相关参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:47:24.993

部分问题是您使用了错误的语法。在 SQL-Server 2005 中，您不能在语句`,`之间使用逗号。`values`您必须指定每个`INSERT INTO....VALUES...`语句。然后在你的第二个`INSERT`你没有正确数量的参数：

```
BEGIN TRANSACTION AddEmployees
   INSERT INTO Employees
      VALUES(N'595002', N'John Meah', N'20000212', 32.25)

    INSERT INTO Employees
      VALUES(N'928375', N'Chuck Stansil', N'20080628', null)

    INSERT INTO Employees
      VALUES(N'792764', N'Orlando Perez', N'20000616', 12.95)
   COMMIT TRANSACTION AddEmployees;
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:48:00.127

为第四个数据库字段设置默认值，以便语句可以执行。

# ruby-on-rails - Rails 如何跟踪数据库的哪些迁移？

> ID：12057408
> 
> 赞同：105
> 
> 时间：2012-08-21T14:43:58.370
> 
> 标签：ruby-on-rails, activerecord

根据 Rails 文档： http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

“Active Record 跟踪哪些迁移已经运行，所以你所要做的就是更新你的源并运行 rake db:migrate。”

ActiveRecord 实际上是如何做到这一点的？Active Record 将数据存储在哪里？

我怀疑这可能存储在数据库本身中？在某处的桌子上。

在我的开发机器上，我运行了所有迁移。然后我使用 mysqldump 复制了生产数据库。然后我运行“rake db:migrate:status”，它正确显示了需要在生产数据库上运行的迁移。

我曾经认为 ActiveRecord 使用时间戳来跟踪上次迁移运行。但我认为这不是真的，因为 ActiveRecord 正确运行从另一个代码分支合并的“旧”迁移。

有内幕的人可以详细说明吗？谢谢

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-08-21T14:45:49.067

Rails 在您的数据库中创建一个表，`schema_migrations`用于跟踪已运行的迁移。

该表包含一个列，`version`。当 Rails 运行迁移时，它采用迁移文件名中的前导数字并为该“版本”插入一行，表明它已经运行。如果您回滚该迁移，Rails 将从`schema_migrations`.

例如，运行一个名为的迁移文件将在表`20120620193144_create_users.rb`中插入一个带有版本的新行。`20120620193144``schema_migrations`

您可以随时使用早期版本引入迁移。Rails 将始终运行任何新的迁移，而`schema_migrations`. 前导数字不必是时间戳，您可以调用您的 migration `001_blah.rb`。早期版本的 Rails 使用这种格式，并为新生成的迁移使用顺序编号。更高版本已切换到时间戳，以帮助防止多个开发人员独立生成具有相同编号的迁移。

# android - 再次启动时应用程序崩溃

> ID：12057409
> 
> 赞同：1
> 
> 时间：2012-08-21T14:44:01.203
> 
> 标签：android, exception, android-fragments, illegalstateexception

我目前正在将一个 Iphone 应用程序移植到 Android 并且因为我不知道片段我想我会尝试使用它们，所以我创建了几个类（一个用于呈现给用户的每个视图，所有扩展基类片段）和相应的xml 布局。下面是启动时显示的片段的代码。我为每个片段使用一个单例。

```
public class FragWelcome extends Fragment {

private static FragWelcome _fs;

OnClickListener mListener;

public FragWelcome() {}

public static FragWelcome getFrag() {
    if(FragWelcome._fs==null) _fs=new FragWelcome();
    return _fs;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        mListener = (OnClickListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnClickListener");
    }
}

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  View v = inflater.inflate(R.layout.frag_welcome, container, false);
  ((Button)v.findViewById(R.id.btnCreateNewList)).setOnClickListener(mListener);
  ((Button)v.findViewById(R.id.btnEditOldList)).setOnClickListener(mListener);
  return v;
}
} 
```

然后我有我的片段管理器类，方法如下：

```
 public void addFragment(int container, Fragment f,int fadein,int fadeout, boolean addtobackstack,String tag) {

        this._currentFragment=f;
        this._fragTrans=this._fragMan.beginTransaction();
        this._fragTrans.setCustomAnimations(fadein, fadeout);
        this._fragTrans.add(container, f ,tag);
        if(addtobackstack) this._fragTrans.addToBackStack(tag);
        this._fragTrans.commit();

}
public void replaceFragment(int container, Fragment f,int fadein,int fadeout, boolean addtobackstack,String tag) {

        this._currentFragment=f;
        this._fragTrans=this._fragMan.beginTransaction();
        this._fragTrans.setCustomAnimations(fadein, fadeout);
        this._fragTrans.replace(container, f ,tag);
        if(addtobackstack) this._fragTrans.addToBackStack(tag);
        this._fragTrans.commit();

} 
```

这是我的主要活动类 AC_Main 的 onCreate 方法。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ac_main);
    this.setTitle("Willkommen");

    FragMan.getSharedFragMan(this).addFragment(R.id.llMain,FragWelcome.getFrag(),R.animator.fade_in,R.animator.fade_out,false,"frag_welcome");  

} 
```

我能说什么......一切都按预期工作，非常好。完全没有错误......只要我不尝试第二次启动应用程序。

```
08-21 16:27:18.278: D/AndroidRuntime(21576): Shutting down VM
08-21 16:27:18.278: W/dalvikvm(21576): threadid=1: thread exiting with uncaught exception (group=0x40c351f8)
08-21 16:27:18.283: E/AndroidRuntime(21576): FATAL EXCEPTION: main
08-21 16:27:18.283: E/AndroidRuntime(21576): java.lang.RuntimeException: Unable to start     activity ComponentInfo{de.lochmann.einkaufsliste/de.lochmann.einkaufsliste.AC_Main}: j     java.lang.IllegalStateException: Activity has been destroyed
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.os.Looper.loop(Looper.java:137)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at java.lang.reflect.Method.invokeNative(Native Method)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at java.lang.reflect.Method.invoke(Method.java:511)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at dalvik.system.NativeStart.main(Native Method)
08-21 16:27:18.283: E/AndroidRuntime(21576): Caused by: java.lang.IllegalStateException: Activity has been destroyed
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1280)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.BackStackRecord.commit(BackStackRecord.java:525)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at de.lochmann.einkaufsliste.FragMan.addFragment(FragMan.java:41)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at de.lochmann.einkaufsliste.AC_Main.onCreate(AC_Main.java:124)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.Activity.performCreate(Activity.java:4465)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
08-21 16:27:18.283: E/AndroidRuntime(21576):    ... 11 more 
```

同样，当我从 Eclipse 启动应用程序时，一切正常，应用程序完全稳定，直到我按下我的 Android 设备（Samsung Galaxy S2）的主页按钮并返回我的应用程序。当我尝试再次启动应用程序时，它会因上述错误而崩溃。任务管理器说它不再在后台运行。所以我的问题是......我做错了什么，有人有你自己的想法或经验吗？非常感谢。

我刚刚发现如果我的应用程序在第二次崩溃并且我的设备告诉我它停止了应用程序，我可以在第三次尝试时再次正常运行该应用程序。也许它仍然在背景中，碎片正在造成麻烦......！？

在我实现每个生命周期方法并调用所有超级方法之后编辑，新的 LogCat 输出。

```
08-21 17:17:09.043: I/dalvikvm(25725): Turning on JNI app bug workarounds for target SDK version 10...
08-21 17:17:09.108: I/Activity(25725): onCreate called
08-21 17:17:09.108: I/FragWelcome(25725): onAttach called
08-21 17:17:09.108: I/FragWelcome(25725): onCreate called
08-21 17:17:09.123: D/dalvikvm(25725): GC_FOR_ALLOC freed 86K, 3% free 8909K/9091K, paused 13ms
08-21 17:17:09.128: I/dalvikvm-heap(25725): Grow heap (frag case) to 11.061MB for 2432016-byte allocation
08-21 17:17:09.148: D/dalvikvm(25725): GC_CONCURRENT freed 1K, 3% free 11282K/11527K, paused 1ms+1ms
08-21 17:17:09.203: D/dalvikvm(25725): GC_FOR_ALLOC freed 0K, 3% free 11283K/11527K, paused 11ms
08-21 17:17:09.208: I/dalvikvm-heap(25725): Grow heap (frag case) to 16.278MB for 5472016-byte allocation
08-21 17:17:09.228: D/dalvikvm(25725): GC_CONCURRENT freed 0K, 2% free 16626K/16903K, paused 1ms+2ms
08-21 17:17:09.318: I/FragWelcome(25725): onCreateView called
08-21 17:17:09.318: I/FragWelcome(25725): onActivityCreated called
08-21 17:17:09.323: I/Activity(25725): onStart called
08-21 17:17:09.323: I/FragWelcome(25725): onStart called
08-21 17:17:09.323: I/Activity(25725): onResume called
08-21 17:17:09.323: I/FragWelcome(25725): onResume called
08-21 17:17:09.503: D/CLIPBOARD(25725): Hide Clipboard dialog at Starting input: finished by someone else... !
08-21 17:17:21.258: I/FragWelcome(25725): onPause called
08-21 17:17:21.258: I/Activity(25725): onPause called
08-21 17:17:21.438: D/CLIPBOARD(25725): Hide Clipboard dialog at Starting input: finished by someone else... !
08-21 17:17:21.908: I/FragWelcome(25725): onStop called
08-21 17:17:21.908: I/Activity(25725): onStop called
08-21 17:17:21.908: I/FragWelcome(25725): onDestroyView called
08-21 17:17:21.908: I/FragWelcome(25725): onDestroy called
08-21 17:17:21.913: I/FragWelcome(25725): onDetach called
08-21 17:17:21.913: I/Activity(25725): onDestroy called
08-21 17:17:32.833: I/Activity(25725): onCreate called
08-21 17:17:32.833: D/AndroidRuntime(25725): Shutting down VM
08-21 17:17:32.833: W/dalvikvm(25725): threadid=1: thread exiting with uncaught exception (group=0x40c351f8)
08-21 17:17:32.838: E/AndroidRuntime(25725): FATAL EXCEPTION: main
08-21 17:17:32.838: E/AndroidRuntime(25725): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.lochmann.einkaufsliste/de.lochmann.einkaufsliste.AC_Main}: java.lang.IllegalStateException: Activity has been destroyed
08-21 17:17:32.838: E/AndroidRuntime(25725):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
08-21 17:17:32.838: E/AndroidRuntime(25725):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
08-21 17:17:32.838: E/AndroidRuntime(25725):    at android.app.ActivityThread.access$600(ActivityThread.java:127) 
```

我从以前的 logcat 中读到的是 backstackrecord.commit 的一些问题……有人知道吗？

```
08-21 16:27:18.283: E/AndroidRuntime(21576): Caused by: java.lang.IllegalStateException: Activity has been destroyed
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1280)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at android.app.BackStackRecord.commit(BackStackRecord.java:525)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at de.lochmann.einkaufsliste.FragMan.addFragment(FragMan.java:41)
08-21 16:27:18.283: E/AndroidRuntime(21576):    at de.lochmann.einkaufsliste.AC_Main.onCreate(AC_Main.java:124) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:50:15.933

当您按下主页按钮时，您的应用程序基本上会进入睡眠状态，它不会关闭。但是，由于当您“重新启动”时您的活动中没有暂停或恢复方法，您实际上是在打开应用程序的原始实例。这导致了错误：

```
 Caused by: java.lang.IllegalStateException: Activity has been destroyed 
```

由于您的活动不再可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:49:10.943

我也遇到了同样的问题，终于找到了解决办法，当点击“Home”键时，应用会在onStop，但是点击“Back”键，应用会在onDestroy，你可以参考[Activity LifeCycle](http://developer.android.com/reference/android/app/Activity.html)。

因此，当应用程序调用 onDestroy() 时，我会终止与应用程序的任何关系进程。该应用程序现在工作正常。那是我的代码。在您的 FragmentActivity 类中

```
@Override
public void onDestroy() {
    super.onDestroy();
    Log.e(TAG, "--- ON DESTROY ---");
    killAppliactionProcess();
}

// Kill and relation process with the app
private void killAppliactionProcess() {
    Process.killProcess(Process.myPid());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:05:50.660

尝试这个：

```
private void setFragmentToTop(String tag) {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);

        Fragment fragment = fm.findFragmentByTag(tag);
        if (fragment == null) {
            if (tag.equals(FragmentOne.TAG)) {
                fragment = FragmentOne.newInstance();
            }
            else if (tag.equals(FragmentTwo.TAG)) {
                fragment = FragmentTwo.newInstance();
            }
        }
        ft.replace(R.id.layoutContent, fragment, 
                tag);
        ft.commit();    

    } 
```

# c++ - 是否有在线 Visual c++ 编译器以及如何在 c++ 和 vs 简单代码之间进行转换

> ID：12057410
> 
> 赞同：-5
> 
> 时间：2012-08-21T14:44:00.850
> 
> 标签：c++, visual-studio-2010, assert

将这类代码转换为 VS2010 是否有任何特殊问题（我必须知道才能检查它）

有没有在线的VS2010编译器？

**做什么`assert(false);`？**

例子

```
 int applyOperator(Operator op,int x,int y)
{
  switch (op) {
    case operator_plus:  return x+y; // jesli operator_plus zwroc x + y itd.
    case operator_minus: return x-y;
    case operator_mul: return x*y;
    case operator_div: return x/y;
    case operator_none:
      break;
  }
  assert(false);
  return 0;
} 
```

* * *

```
#include <iostream>

using namespace std;
#include <iostream>
#include <string>
class Student {
public:
    string Name, ID, Gender, BirthDate, Major;
    friend istream& operator >> (istream& in, Student& s); //DEKLARACJA przeciazenia operatora >> tak bay wczytywal dane linia po linii
    friend ostream& operator<< (ostream&,Student const&);  //DEKLARACJA przeciazenia operatora << tak aby wypisywal obiekty typu Student
};

   istream& operator >> (istream& in, Student& s){
    cout << "Name\n";
    getline (cin,s.Name); //wczytanie linii na imię
    cout <<"ID\n";
    getline (cin,s.ID);   //wczytanie linii na ID
    cout <<"Gender\n";    
    getline (cin,s.Gender);
    cout <<"BirthDate\n";
    getline (cin,s.BirthDate);
    cout <<"Major\n";
    getline (cin,s.Major);
    return in;
    };
ostream& operator<< (ostream &wyjscie, Student const& ex)
{
   wyjscie<<""<<"Name:\t"<<ex.Name<<"\n"<<
    ""<<"Student ID:\t"<<ex.ID<<"\n"<<
    ""<<"Gender:\t"<<ex.Gender<<"\n"<<
    "BirthDate:\t"<<ex.BirthDate<<"\n"<<
    "Major:\t"<<ex.Major<<endl;
    return wyjscie;
}

int main(){
        Student s;
        cin>>s;
        cout<<s;
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:50:41.890

> assert(false); 是什么意思？做？

它打开一个断言窗口。这是一种让程序员知道什么时候不应该到达的控制路径或不应该失败的条件的机制。

基本上像：

```
int divide10ByX(int x)
{
   if ( x == 0 )
   {
      assert(!"x can't be 0");
      return 0;
   }
   return 10/x;
} 
```

`x`什么时候`0`，程序通常会崩溃。通过事先检查，您可以防止崩溃，但可以隐藏一些错误的功能，因为`x`不应该为 0。因此，您在此处放置了一个断言以在`x`为 0 时通知您。

或者，它可能是`assert(x)`，仅在 时触发`x==0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:52:52.943

由于 Visual Studio 是一种商业产品，我猜你不太可能遇到免费的在线 VC++ 编译器，除非 Microsoft 提供这样的工具。

该`assert`宏用于验证真正的布尔条件。这通常是为了验证预期条件作为[按合同设计的](http://www.eiffel.com/developers/design_by_contract.html)一部分或在开发代码时进行类似的操作，并且是从生产代码中编译出来的，即在禁用调试时。

遇到错误条件将导致消息输出到 stderr 并被`abort()`调用。因此`assert(false)`只是强制代码（在调试中）在某个点中止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:55:55.747

如果在购买完全许可的编译器之前，您的“在线编译器”意图是“免费”编译器，则可以使用[Visual Studio Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)。它可以满足大多数基本需求。

# opengl - OpenGL 3.2 - 实现多个纹理

> ID：12057412
> 
> 赞同：1
> 
> 时间：2012-08-21T14:44:08.233
> 
> 标签：opengl, glsl, textures

在 OpenGL 中实现多个纹理的最佳方式是什么？我在网上做了一些研究，一些方法是创建一个包含许多所需纹理的纹理图集。另一种方法是使用数组纹理。但是，它们似乎都不是最好的方法，因为第一种方法需要非常非常大的图片，而第二种方法需要另一个属性（我想？）来指向要使用的纹理。COD 或 Battlefield 等大型游戏使用什么将大量纹理加载到 GPU？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:50:07.710

> COD 或 Battlefield 等大型游戏使用什么将大量纹理加载到 GPU？

他们将它们加载到单个纹理对象中并根据需要切换它们。GPU 有多个纹理单元，每个单元都可以绑定一个纹理。然后从着色器中，您可以根据需要访问这些纹理。

请参阅我的[minimum_glsl](https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/minimal_glsl/minimal_glsl.c)示例，了解它是如何使用两个纹理完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T17:25:47.903

使用阵列纹理和/或纹理图集的原因主要是性能。这种性能是通过一种方式实现的：通过减少您需要的绘制调用的数量。

因此，如果您经常需要更改对象之间的状态*（*着色器中的矩阵等），那么没有多大意义。当然，不必更改纹理是一件好事，但不如减少绘制调用来节省性能。

纹理图集通常用于字体字形图像、2D 游戏资产、GUI 资产等，原因是：您只是在绘制一堆四边形。您不想在每个四边形之间更改纹理，因此您在单个（或很少）绘制调用中绘制所有文本、2D 精灵、GUI 元素等。每个四边形肯定不是一个绘制调用。

阵列纹理更适合绘制相同网格的多个副本，但具有不同的纹理。等等。

# c++ - C++ 子对象初始化

> ID：12057425
> 
> 赞同：1
> 
> 时间：2012-08-21T14:44:51.793
> 
> 标签：c++, c

我正在将一些 C 代码移植到 C++，但我无法解决处理子对象初始化的特定问题。

以下代码是我的意思的一个例子：

```
#include <stdio.h>

#define MY_INDEX        1
#define MY_OTHER_INDEX  3

/* Structure declaration */
struct my_struct
{
    int a;
    int b;
    int c;
};

/* Array declaration and initialization */
struct my_struct my_array[] =
    {
        [0]                 = (struct my_struct) {0, },
        [MY_INDEX]          = ((struct my_struct) {
                                .a = 10,
                                .b = 20,
                                .c = 30
                                }),
        [MY_OTHER_INDEX]    = ((struct my_struct) {
                                .a = 42,
                                .b = 42,
                                .c = 42
                                })
    };

/** Test code */
int
main(void)
{
        unsigned int i;

        for (i = 0; i < sizeof(my_array)/sizeof(struct my_struct); i++)
                printf("Index %u: a=%d, b=%d, c=%d\n",
                        i, my_array[i].a, my_array[i].b, my_array[i].c);

        return 0;
} 
```

它可以在没有警告或错误的情况下编译`gcc -ansi -Wall`，尽管添加`-pedantic`标志会引发一些警告，指出*ISO C90 禁止指定要初始化的子对象*。

的初始化`my_array`将类似于 if ：

*   索引 0 将具有 a,b,c = 0
*   索引 1 ( `MY_INDEX`) 将具有 a=10, b=20, c=30
*   索引 2 也将具有 a,b,c = 0
*   索引 3 ( `MY_OTHER_INDEX`) 将具有 a,b,c = 42

我真的很喜欢这种形式的初始化，我觉得它简洁易读。

在 C++ 中使用这种语法会导致 GCC 认为我正在声明一个 lambda 函数，因为`[]`即使没有索引，GC​​C 也会告诉我它*在 'struct' 之前是预期的主要表达式*。

C++ 中的等价物是什么（即使是 C++11 标准）？**关键**是能够在初始化程序中指定结构字段名称以提高可读性（真正的结构有十几个整数字段和位字段），还能够在初始化程序中看到索引也是一个加分项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:47:50.127

C++ 没有 C 支持的所有特殊聚合初始值设定项语法。相反，这样说：

```
my_struct my_array[] = { { },
                         { 10, 20, 30 },
                         { 42, 42, 42 },
                       }; 
```

数组中不能有“间隙”（我认为甚至在 C 中也没有）。

# google-bigquery - 是否有办法获取 bigquery 服务器的本地时区？

> ID：12057426
> 
> 赞同：1
> 
> 时间：2012-08-21T14:44:51.607
> 
> 标签：google-bigquery

最近我一直在研究[时间戳功能](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)，我很好奇是否有办法让服务器的本地时区通过`java Api`

提前致谢：阿提拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:37:33.873

时间戳函数都是 UTC。

# javascript - JSHint “可能的严格违规。” 使用“绑定”时

> ID：12057427
> 
> 赞同：73
> 
> 时间：2012-08-21T14:44:53.893
> 
> 标签：javascript, jshint

考虑这个简单的代码：

```
"use strict";

var obj = {
    f: function() {
        this.prop = 'value';
        g.bind( this )();
    }
};

function g() {
    console.log( this.prop );
} 
```

如果我尝试验证此代码，jshint 会`Possible strict violation.`在我调用`console.log( this.prop );`. 这是因为`this`在函数的严格模式下未定义。

但是我在调​​用它之前绑定了这个函数，所以`this`是正确的对象。

我正在使用这种“设计模式”来避免使主要对象混乱。在参数中传递属性也会使函数变得混乱，所以我拒绝这样做。此外，这正是`bind`它的用途。

JSHint 有没有办法让我这样做？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-21T17:03:57.857

如果不运行代码，很难检测到这种情况。您可以使用选项`validthis`来抑制此警告：

```
"use strict";

var obj = {
    f: function() {
        this.prop = 'value';
        g.bind( this )();
    }
};

function g() {
    /*jshint validthis:true */
    console.log( this.prop );
} 
```

需要注意的是，jshint 注释是函数作用域的。所以注释将适用于函数`g`及其内部函数，而不仅仅是下一行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-05T15:52:00.917

如果您将代码修改为以下内容以避免`this`一起使用，您也可以达到相同的效果。

```
"use strict";

var obj = {
    f: function() {
        this.prop = 'value';
        g.bind( null, this )();
    }
};

function g(self) {
    console.log( self.prop );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-10T14:51:57.720

这是一个更简单的解决方案，不需要对 jshint 的模式或特定标记进行任何更改：

```
"use strict";

var obj = {
    f: function() {
        this.prop = 'value';
        G.bind( this )();
    }
};

function G() {
    console.log( this.prop );
} 
```

jshint 假设您遵循以大写字母开头的函数是类的约定，这些类将被实例化并且始终`this`可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T11:20:16.990

尝试：

```
"use strict";

var obj = {
    f: function() {
        this.prop = 'value';
        g.bind( this )();
    }
};

var g = function() {
    console.log( this.prop );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T13:26:12.320

正如您所说，这是一种不同的“设计模式”，它实现了相同的目标，但完全避免了这个问题。

```
"use strict";

function obj() {
    this.prop = '';
}

obj.prototype.f = function obj_f() {
    this.prop = 'value';
    this.g();
};

obj.prototype.g = function obj_g() {
    console.log( this.prop );
}; 
```

你会这样调用它：

```
var myO = new obj();
myO.f(); 
```

# svn - TortoiseSVN 在 repo 中删除一个分支然后重新创建它

> ID：12057428
> 
> 赞同：0
> 
> 时间：2012-08-21T14:44:54.873
> 
> 标签：svn, tortoisesvn

我们今天在 Subversion (WANDisco) 上遇到了一点问题。

几天前我们错误地创建了一个分支，所以我们认为我们会删除它，然后使用 TortoiseSVN 重新创建它。

我们分支了根级文件夹（application1），它有效地复制了我们的分支/标签/主干。

所以我们的回购结构是：

```
application1/trunk 
application1/branches
application1/tags 
```

我们想分支主干，但我们选择了 application1。这创建了以下结构：

```
application1/branches/v5/trunk
application1/branches/v5/branches
application1/branches/v5/tags 
```

我们删除了 application1/branches/v5，然后将 application1/trunk 分支到 application1/branches/v5。

在我们的开发 PC 上，当我们更新 application1/branches/V5 文件夹时，TortoiseSVN 抱怨与文件夹冲突。注意开发人员的工作副本中已经有了这个文件夹。

我们尝试了各种清理组合来解决问题。它决定在某些情况下恢复旧的 V5 结构。

最后，我们不得不从开发 PC 中删除整个工作副本，然后进行 Checkout 以最终恢复到工作状态。

问题是，你应该如何正确解决这个问题？除了分支时要更加小心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:39:09.037

好吧，正如您所引用的那样，第一步必须是...

**分支时要更加小心**

但如果您仍然遇到此类问题，**您应该为您的开发人员提供一个备用分支，并要求他们在提交任何内容之前切换**。这将保持他们对工作副本的更改完好无损，然后一切都应该顺利进行。

# c# - 没有 SQL Management Studio 的远程 SQL Server 2008 的连接字符串

> ID：12057431
> 
> 赞同：0
> 
> 时间：2012-08-21T14:45:03.367
> 
> 标签：c#, asp.net, sql-server, deployment, database-connection

我知道这是一个经典问题，但我太新手了，连基础知识都不懂（对不起）。我有这个带有数据库（SQL Server 2008）的 ASP.NET“网站”，我正在尝试使用 VS 2010 的网站复制工具将其部署在远程主机服务器（HostGator）上。

在 VS 2010 中，我可以直接通过数据库的“属性”来获取连接字符串，结果是：

> 数据源=.\SQLEXPRESS;AttachDbFilename="C:\Users\myName\Documents\Visual Studio 2010\WebSites\Experiment\App_Data\data.mdf";Integrated Security=True;User Instance=True

现在，我知道存在一个名为[http://connectionstrings.com/](http://connectionstrings.com/)的网站，但乍一看它对我来说太难了。

我当前的连接字符串：

> 数据源=domainName.com\SQLEXPRESS;AttachDbFilename=C:\inetpub\vhosts\domainName\httpdocs\Experiment\App_Data\data.mdf;集成安全=True;用户实例=True

我很确定，这是错误的，因为它给了我以下经典错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。

但我不知道如何解决它。从哪里开始寻找，如何启动，如何获取构建连接字符串所需的参数。如何找到 的路径`AttachDbFilename`？你能帮忙吗？

我相信，该连接字符串是唯一需要修改的参数。如果还有其他的，请建议？另外，我不断遇到使用 SQL Management Studio 来使事情正常进行的情况，但我没有，所以没有它很难做到这一点吗？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:50:25.730

您不能指定相对于您自己的机器的目录。将 AttachDbFilename 更改为

```
AttachDbFilename=|DataDirectory|data.mdf 
```

托管公司应向您提供详细`Data Source`信息以及安全模型（可能您需要使用特定用户）

[您可以从此链接](http://www.microsoft.com/en-us/download/details.aspx?id=7593)下载 SqlServer Management Studio Express

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:49:58.507

男人，

您如何看待[HttpServerUtility.MapPath Method](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)。它返回与 Web 服务器上指定的虚拟路径相对应的物理文件路径。

[]的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:54:09.597

当你得到你的主机。他们将为您提供连接字符串。像这样

```
 <add name="ConnectionStringName" 
       connectionString="Data Source=localhost;Database=YourDatabaseName;Uid=YourUserNameForDatabase;password=yourpassword;"
  providerName="System.Data.SqlClient" /> 
```

如果您需要更多帮助，请告诉我

# javascript - 获取二进制数据并将其保存为 .mp3 文件 Javascript

> ID：12057433
> 
> 赞同：2
> 
> 时间：2012-08-21T14:45:06.070
> 
> 标签：javascript, node.js, download

所以我有一个`Node.js`脚本和一个 Javascript 文件相互通信，除了`Node.js`应该返回`.mp3`文件数据外，一切正常。

数据是二进制的，看起来像乱码，我将如何获取它返回的数据并允许用户使用 Javascript 在网页上下载它？

它顺便获取数据`http.responseText`。

Node.js 代码

```
//initilization
var querystring = require('querystring');
var http = require('http');
var url = require('url');
var fileSystem = require('fs');
var path = require('path');
var util = require('util');

//convert function
function convert(voiceToUse, textToConvert, response)
{
    console.log("Sending Convert Request...");

    //data to send as a query
    var data = querystring.stringify(
    {
        username: 'user',
        password: 'pass',
        action: 'convert',
        voice: voiceToUse,
        text: textToConvert
    });

    //options to use
    var options = {
        host: 'ws.ispeech.org',
        port: 80,
        path: '/api/rest/1.5',
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': data.length
        }
    };

    //http post request
    var req = http.request(options, function (res)
    {
        res.setEncoding('utf8');
        res.on('data', function (chunk)
        {
            console.log("Body: " + chunk);
            var fileId = chunk.substr(chunk.indexOf("fileid") + 7);
            console.log("Converting File...");
            download(fileId.substr(0, fileId.search("&")), response);

        });
    });

    req.on('error', function (e)
    {
        console.log('problem with request: ' + e.message);
    });

    req.write(data);
    req.end();
}

//download function
function download(id, response)
{

    //data to send as a query
    var data = querystring.stringify(
    {
        username: 'user',
        password: 'pass',
        action: 'download',
        fileid: id
    });

    //options to use
    var options = {
        host: 'ws.ispeech.org',
        port: 80,
        path: '/api/rest/1.5',
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': data.length
        }
    };

    //http post request
    var req = http.request(options, function (res)
    {
        res.on('data', function (chunk)
        {
            if (JSON.stringify(res.headers).indexOf("audio/mp3") != -1)
            {
                console.log("Downloading Chunk...");
                /*var fs = require('fs'),
                   str = 'string to append to file';
                fs.open('test.mp3', 'a', 666, function (e, id)
                {
                    fs.write(id, chunk, 0, chunk.length, 0, function ()
                    {
                        fs.close(id, function ()
                        {
                        });
                    });
                });*/
                response.write(chunk, "binary");
            }
            else
            {
                download(id, response);
            }

        });

        res.on('end', function ()
        {   
            if (JSON.stringify(res.headers).indexOf("audio/mp3") != -1){
            response.end();
            }
        });
    });

    req.on('error', function (e)
    {
        console.log('problem with request: ' + e.message);
    });

    req.write(data);
    req.end();
}
http = require('http');
fs = require('fs');
server = http.createServer( function(req, res) {

    console.dir(req.param);

    if (req.method == 'POST') {
        console.log("POST");
        var body = '';
        req.on('data', function (data) {
            body += data;
            console.log("Partial body: " + body);
        });
        req.on('end', function () {
            console.log("Body: " + body);
            if(body){
                convert('engfemale1', body, res);
                res.writeHead(200, {
                    'Content-Type': 'audio/mp3', 
                    'Content-Disposition': 'attachment; filename="tts.mp3"'
                });
            }
        });

    }
});

port = 8080;
server.listen(port);
console.log('Listening at port ' + port); 
```

Javascript代码

```
console.log('begin');
        var http = new XMLHttpRequest();
        var params = "text=" + bodyText;
        http.open("POST", "http://supersecretserver:8080", true);

        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        //http.setRequestHeader("Content-length", params.length);
        //http.setRequestHeader("Connection", "close");

        http.onreadystatechange = function() {
            console.log('onreadystatechange');
            if (http.readyState == 4 && http.status == 200) {
                alert(http.responseText);//response text is binary mp3 data
            }
            else {
                console.log('readyState=' + http.readyState + ', status: ' + http.status);
            }
        }

        console.log('sending...')
        http.send(params);
        console.log('end'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:21:21.353

您可以尝试使用数据 URL：

```
<a href="data:audio/mpeg3;charset=utf-8;base64,Zm9vIGJhcg==">mp3 download</a> 
```

虽然不是最好的浏览器支持。

也可以直接在音频标签中使用数据 URL。

* * *

更好的解决方案是将 mp3 保存在您的服务器上的某个地方，并返回一个指向它的链接以供 mp3 播放器使用。

# php - PHP - AJAX 和 MySQL 选择过滤器 xmlhttp.open 不加载 jquery 数据表

> ID：12057438
> 
> 赞同：0
> 
> 时间：2012-08-21T14:45:22.837
> 
> 标签：php, jquery, ajax, xmlhttprequest, datatables

使用这个例子：[http](http://www.w3schools.com/php/php_ajax_database.asp) ://www.w3schools.com/php/php_ajax_database.asp 我已经建立了一个从数据库回显的表。

我现在正在尝试在表上启动数据表插件，一切都设置正确，但它不会工作。我试图在 html 和 php 页面中启动数据表，但似乎都不起作用。

我在合并这个例子时同样有同样的问题：http: [//davidwalsh.name/animated-ajax-jquery](http://davidwalsh.name/animated-ajax-jquery)

是否是第一个示例中的这一点导致问题，因为页面已经在 xmlhttp.open 和 xmlhttp.send() 之前加载；已发送。

```
 xmlhttp.open("GET","getuser.php?username="+username+"&year="+str,true);
 xmlhttp.send(); 
```

**头**

```
 $(document).ready(function() {
      $('a.delete').click(function(e) {
        e.preventDefault();
        var parent = $(this).parent();
        $.ajax({
          type: 'get',
          url: 'jquery-record-delete.php',
          data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
          beforeSend: function() {
            parent.animate({'backgroundColor':'#fb6c6c'},300);
          },
          success: function() {
            parent.slideUp(300,function() {
              parent.remove();
            });
          }
        });
      });
    });

        jQuery( function( $ ) {// Implements the dataTables plugin on the HTML table
var $adtTable= $("#academic_days_table").dataTable({
        "iDisplayLength": 30,       
        "sDom": '<"clear">t>',
        "aaSortingFixed": [[0,'asc']],
        "aoColumns": [
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false }
            ]
});

    }); 
```

**网页**

```
 function showUser(str, username)
 {
 if (str=="")
   {
   document.getElementById("department_logs_txtHint").innerHTML="";
   return;
   } 
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     document.getElementById("department_logs_txtHint").innerHTML=xmlhttp.responseText;
     }
   }
 xmlhttp.open("GET","getuser.php?username="+username+"&year="+str,true);
 xmlhttp.send();
 } 

<form>
    <select id="employee_user">
    <option value="">--</option>  
</select>

<select id="they" onchange="showUser(this.value, employee_user.value)">
<option value="">--</option>

    </select>
</form> 
```

**页面**

```
<?php
include_once("scripts/connection.php");

$year = $_GET["year"];
$username = $_GET["username"];

$is_academic_result = mysql_query('SELECT * FROM holiday_entitlement_academic WHERE employee = \'' . $username . '\' AND academic_year = \'' . $year . '\' ');

if($is_academic = mysql_fetch_array($is_academic_result)) {

echo'<div style="float:left; width:400px;">';

echo'<table width="100%">
<tr>
<td><strong>Name:</strong></td>
<td>'.$is_academic['employee'].'</td>
</tr>
<tr>
<td><strong>Entitlement:</strong></td>
<td>'.$is_academic['entitlement'].' '.$is_academic['units'].'</td>
</tr>
<tr>
<td><strong>Department / Division:</strong></td>
<td>'.$is_academic['division'].'</td>
</tr>
<tr>
<td><strong>Line Manager:</strong></td>
<td>'.$is_academic['line_manager'].'</td>
</tr>
</table>';
echo'<br/>';

echo'</div>';

echo'<table class="dataTable" id="academic_days_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<th>Start Date</th>
<th>End Date</th>
<th>'.$is_academic['units'].' to be taken</th>
<th>'.$is_academic['units'].' remaining</th>
<th></th>
</thead>';

echo '<tr>';

echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>'.$is_academic['entitlement'].'</td>';
echo '<td></td>';

echo '</tr>';

$input = $is_academic['entitlement'];
}

else {echo 'You currently dont have a record for this academic year. ';}

//$requests_result = mysql_query('
//SELECT * 
//FROM holiday_entitlement_business_manual
//LEFT JOIN requests ON holiday_entitlement_business_manual.employee = requests.employee
//WHERE employee = \'' . $username . '\' AND academic_year = \'' . $acyear . '\' ');

$requests_result = mysql_query('SELECT * FROM requests WHERE employee = \'' . $username . '\' AND approved = 1 AND academic_year = \'' . $year . '\' ORDER BY start_date ASC');

$remainder = 0;

while($requests = mysql_fetch_array($requests_result)) {

$remainder = ($remainder == 0) ? $input : $remainder;
$out = $remainder - $requests['days'];
if($out < 0){
      break;
}
$remainder = $out;

echo'<tr>';
echo'<td>'.$requests['start_date'].'</td>';
echo'<td>'.$requests['end_date'].'</td>';
echo'<td>'.$requests['days'].'</td>';
echo'<td>'.$remainder.'</td>';
echo'<td><a href="?delete='.$requests['id'].'" class="delete"><img src="images/cross.png"></a></td>';
echo'</tr>';
}

echo'</table>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:51:15.347

在 xmlhttp.onreadystatechange=function() 中包含脚本

数据表现在已加载并且 $('a.delete').click(function(e) {} 正在工作

这是一个例子：

```
 function showUser(str, username)
 {
 if (str=="")
   {
   document.getElementById("department_logs_txtHint").innerHTML="";
   return;
   } 
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {           
     document.getElementById("department_logs_txtHint").innerHTML=xmlhttp.responseText;
     $('#business_days_table').dataTable({
        "iDisplayLength": 30,       
        "sDom": '<"clear">t>',
        "aaSortingFixed": [[0,'asc']],
        "aoColumns": [
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false }
            ]
     });    
     $('#academic_days_table').dataTable({
        "iDisplayLength": 30,       
        "sDom": '<"clear">t>',
        "aaSortingFixed": [[0,'asc']],
        "aoColumns": [
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false },
            { "bSortable": false }
            ]
     });
  $('a.delete').click(function(e) {
    e.preventDefault();
    var parent = $(this).parent();
    $.ajax({
      type: 'get',
      url: 'getuser.php',
      data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {
          parent.remove();
        });
      }
    });
  });

     }
   }

 xmlhttp.open("GET","getuser.php?username="+username+"&year="+str,true);
 xmlhttp.send();
 } 
```

# php - PHP 获取最后一个条目

> ID：12057442
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:45:40.967
> 
> 标签：php, mysql, row

所以我需要找到我的 MySql 表的最后一个条目，我这样得到第一个：

```
if($f4==0) { /*do this*/ } else { /*or do that*/ } 
```

我有一个带有递增 ID 的表，但它按如下位置排序：

```
$query="SELECT * FROM promotions ORDER BY position"; 
```

我基本上需要类似的东西：

```
if($f4==Last row in table) { /*Do this*/ } else { /*Or do that*/ } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:51:34.497

如果您的表唯一的 auto_increment 列名为`id`，您可以像这样完成您的任务 =>

```
SELECT * FROM table WHERE id=(SELECT MAX(id) FROM table) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:51:36.243

好吧，您应该使用 SORT (DESC) 和 LIMIT 1 来获取特定行。

正如在 Matts 评论中一样，为此使用自动增量列（主要是主键）是一种很好的做法（替代方案：时间戳/行版本）

更昂贵的版本是所有值的数组，并通过 mysql_num_rows() 获取获取值的总量，然后只需访问具有相应 ID 的数组中的行（-1，因为它从 0 开始而不是像 mysql_num_rows 那样从 1 开始功能）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:52:21.987

用这么模糊的问题很难看出你真正想做什么。请提供更多代码，别担心，我们不会窃取它 (;

同时，您可能希望查看[MAX()](http://www.tizag.com/mysqlTutorial/mysqlmax.php)，这可能很有用。

# wordpress - Wordpress 设置 API 错误

> ID：12057454
> 
> 赞同：0
> 
> 时间：2012-08-21T14:46:07.043
> 
> 标签：wordpress

您好我正在尝试为我正在开发的模板创建一些自定义选项，但我似乎遇到了错误：

```
Warning: Illegal string offset 'show_header' in C:\xampp\htdocs\wordpress\wp-content\themes\01MyWork\includes\theme-options.php on line 62 
```

这是似乎引发错误的行：

```
 $html = '<input type="checkbox" id="show_header" name="thanathos_theme_display_options[show_header]" value="1" ' . checked(1, $options['show_header'], false) . '/>'; 
```

这是整个代码：

```
 <?php 
    function thanatos_theme_menu(){
        add_theme_page(
                       "Thanathos Theme Options", 
                       "Thanathos Theme", 
                       "administrator", 
                       "thanathos_theme_options",
                       "thanathos_theme_display_callback"
                      );
    }
    add_action('admin_menu' , 'thanatos_theme_menu');
    function thanathos_theme_display_callback(){
?>
         <div class="wrap">  
                <div id="icon-themes" class="icon32"></div>  
                <h2>Sandbox Theme Options</h2>  

                <?php settings_errors(); ?>
                <!--Create the form that will be used to render our options-->
                <form method="post" action="options.php">
                    <?php settings_fields('thanathos_theme_display_options'); ?>
                    <?php do_settings_sections( 'thanathos_theme_display_options' ); ?>             
                    <?php submit_button(); ?>
                </form>
        </div>
<?php
    }

    add_action('admin_init' , 'thanatos_initializa_theme_options');
    function thanatos_initializa_theme_options(){
        if( false == get_option( 'thanathos_theme_display_options' ) ) {    
            add_option( 'thanathos_theme_display_options' );  
        } 
        add_settings_section(
                'general_settings_section', 
                'Thanatos Options', 
                'thanatos_general_options_callback', 
                'thanathos_theme_display_options'
        );
        add_settings_field(
                'show_header',
                'Header',
                'thanathos_field_header_callback',
                'thanathos_theme_display_options',
                'general_settings_section',
                 array(                              // The array of arguments to pass to the callback. In this case, just a description.  
                    'Activate this setting to display the header.'
                 ) 
        );
        register_setting('thanathos_theme_display_options', 'thanathos_theme_display_options');
    }

    function thanatos_general_options_callback(){
        echo 'mergem la mare';
    }
    function thanathos_field_header_callback($args){
         // First, we read the options collection  
        $options = get_option('thanathos_theme_display_options');
        // Next, we update the name attribute to access this element's ID in the context of the display options array  
        // We also access the show_header element of the options collection in the call to the checked() helper function 
        $html = '<input type="checkbox" id="show_header" name="thanathos_theme_display_options[show_header]" value="1" ' . checked(1, $options['show_header'], false) . '/>';  
         // Here, we'll take the first argument of the array and add it to a label next to the checkbox  
        $html .= '<label for="show_header"> '  . $args[0] . '</label>';   
        echo $html;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T23:49:02.333

是的，这是有问题的部分：

```
if( false == get_option( 'thanathos_theme_display_options' ) ) {    
add_option( 'thanathos_theme_display_options' );  
} 
```

这是thanatos_initializa_theme_options() 函数开头的初始if 语句。

[您可以在http://wp.tutsplus.com/tutorials/theme-development/the-complete-guide-to-the-wordpress-settings-api-part-4-](http://wp.tutsplus.com/tutorials/theme-development/the-complete-guide-to-the-wordpress-settings-api-part-4-on-theme-options/#post-684925289)的非常简洁的 Theme Options API 中找到解决方案[on-theme-options/#post-684925289](http://wp.tutsplus.com/tutorials/theme-development/the-complete-guide-to-the-wordpress-settings-api-part-4-on-theme-options/#post-684925289) 或者，更确切地说，更确切地说是在本文的评论部分。

我在这里粘贴史蒂夫邦迪的智能解决方案，因为出于某种原因，让页面滚动到适当的评论对我不起作用（至少在 Chrome 中）。

**开始报价**

（...）我遇到的一个小问题 - 我一直在重新排序代码，直到添加社交选项之前。那时我发现代码被破坏了。我会收到类似的错误

```
Warning: Illegal string offset 'show_header' in ...\themes\Sandbox\functions.php
Warning: Illegal string offset 'show_content' in ...\themes\Sandbox\functions.php
Warning: Illegal string offset 'show_footer' in ...\themes\Sandbox\functions.php 
```

事实证明，这个错误是由于在选项表中添加了“sandbox_theme_display_options”而没有给它一个值。如果您更改 sandbox_initialize_theme_options 如下，它将创建和初始化选项，避免我和其他人遇到的错误。

```
function sandbox_initialize_theme_options() { 
     // If the theme options don't exist, create them. 
     if( false == get_option( 'sandbox_theme_display_options' ) ) { 
          $options = array("show_header" => TRUE, "show_content" => TRUE, "show_footer" => TRUE);
          add_option( 'sandbox_theme_display_options', $options);
     } // end if
(...) 
```

如果旧代码已运行，则必须首先从数据库中删除空的“sandbox_theme_display_options”值。或者，以下代码也将检测到这种情况并进行更正。

```
function sandbox_initialize_theme_options() { 
     // See if the options exist, and initialize them if they don't
     $options = get_option( 'sandbox_theme_display_options' );
     if( false == $options or $options == "" ) { 
          $options = array("show_header" => TRUE, "show_content" => TRUE, "show_footer" => TRUE);
          update_option( 'sandbox_theme_display_options', $options);
     } // end if
(...) 
```

这将检查不存在或空的选项值，并使用 update_option 而不是 add_option 初始化选项。

**EOF 报价**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:45:04.400

您正在使用`name="thanathos_theme_display_options[show_header]"`纯 HTML。可能您想通过 PHP 解析字符串`[show_header]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T19:35:17.653

您可能必须运行： `delete_option('thanathos_theme_display_options');` 在“admin_init”期间，如果您认为数据库中存在旧插件信息并需要重新开始。

# javascript - 在 Javascript 中获取 DOM 元素的 screenX

> ID：12057455
> 
> 赞同：5
> 
> 时间：2012-08-21T14:46:11.770
> 
> 标签：javascript, dom

当我在一个元素上监听 mouseover 时，我得到一个触发的事件，其中包含 screenX、clientX、pageX 和许多其他关于鼠标相对于屏幕的位置以及相对于触发事件的元素的位置的详细信息。

如果我只是调用 element.mouseover()，我的处理程序会运行，但鼠标位置和其他属性都为空。我查看了 initMouseEvent，但它需要您指定我不知道的 screenX。

我的问题是，如何在没有鼠标悬停在元素上甚至在窗口中的情况下获得这些值？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2019-03-19T22:49:35.617

在 Javascript 中：

```
function getScreenCoords(element) {
    let rect = element.getBoundingClientRect();
    return {
            x: window.screenX + rect.left,
            y: window.screenY + rect.top
        }
} 
```

# vba - 拼写检查 VBA 中的 Excel 工作表

> ID：12057456
> 
> 赞同：2
> 
> 时间：2012-08-21T14:46:14.173
> 
> 标签：vba, excel

我搜索了互联网，找到了一些可能的解决方案来解决这个问题，但我也想在这里问一下。

目标是单击一个按钮，然后拼写检查整个工作表。

这是一些代码

```
Sub spellCheck()

Sheet1.Cells.CheckSpelling
End Sub 
```

另外，我发现了这个：

```
Sub SpellCheck()
Dim Checkword As String, Result As Boolean
Checkword = Selection.Value
Result = Application.CheckSpelling(Checkword)
Selection.Offset(0, 1) = Result
End Sub 
```

有任何想法吗？两者都不为我工作。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-11T08:55:31.673

您可以通过执行以下操作来检查整个工作簿：

```
Sub SpellCheck()

For Each sh In Worksheets
    Sheets(sh.Name).Cells.CheckSpelling
Next

End Sub 
```

这将循环浏览整本书中的每一张纸，并对每一张纸进行拼写检查。我还想不通的是如何使拼写检查器实际移动到拼写错误的位置。因此，通过上述内容，您只会得到一个拼写错误列表，而没有上下文来评估它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:50:46.870

我注意到我的代码中有一个错字。

以下作品：

```
Sub spellCheck()

Sheet1.Cells.CheckSpelling

End Sub 
```

但是，如果有人知道如何完成整个工作簿，我会对此感兴趣。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T09:52:05.480

此代码将适用于选定的单元格。如果单元格中有任何拼写错误，这将突出显示

```
Dim Myrange As Range
Selection.SpecialCells(xlVisible).Select
For Each Myrange In Selection
    If Application.CheckSpelling(word:=Myrange.Value) = False Then
    Myrange.Font.Color = vbRed
    End If
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T09:07:52.180

好的，因此您可以使用以下命令调用工具栏的拼写检查器，只要您当时启用了屏幕更新，它就会将您移动到拼写错误的位置。

```
Application.CommandBars("Tools").Controls("Spelling...").Execute 
```

您可以使用嵌入在上述循环中的此命令来遍历工作簿中的工作表并在每个新工作表上调用此命令。

帽

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-04T02:07:45.793

这使用先前答案中的代码片段将用于拼写检查的区域限制为特定区域。我需要在一个小项目中做的事情。这提供了拼写检查器的完整功能，并在上下文中显示错误。*rowNumber*在其他地方计算。选择范围可以在代码的其他地方完全控制，以满足您的特定需求。认为这可能有助于其他人搜索此帖子。

```
 With Sheets("Sheet1")
    slic = CStr(rowNumber)
    .Range("AL3:AN" & slic).Select   
    Application.CommandBars("Tools").Controls("Spelling...").Execute
End With 
```

感谢以前的海报，这解决了我的一个问题。我非常感激。

# sql-server - 是否可以限制实体框架使用的连接数？

> ID：12057458
> 
> 赞同：2
> 
> 时间：2012-08-21T14:46:22.690
> 
> 标签：sql-server, entity-framework, entity-framework-4, nopcommerce

我注意到在我们托管的 NopCommerce 网站（使用实体框架）上，如果我在网站上运行爬虫（检查损坏的链接），它会使整个网络服务器离线几分钟，并且没有其他托管网站响应。这似乎是因为 Entity Framework 正在打开 30 多个数据库连接并每秒运行数百个查询（每个页面视图大约 20-40 个）。

我无法更改 NopCommerce 使用 EF 的方式（这需要数周时间）或更改正在使用的 EF 版本，所以我可以通过限制它使用的并发连接数来减轻它对 SQL Server 的影响，以提供托管的其他站点同一台服务器访问数据库的机会更大？

我最理想的做法是将特定应用程序的并发数据库连接数限制在 10 左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:56:57.303

我认为您能做的最好的事情就是使用`Max Pool Size`连接字符串中的设置。这限制了连接池中的最大连接数，我*认为*这意味着这是应用程序将使用的最大连接数。我不确定的是，如果它无法从池中获得连接，是否会导致异常。我从未尝试过以这种方式限制连接。

以下是关于可以放入 ADO.NET 连接字符串的设置的一些信息：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.100%29.aspx)

这里有更多关于“使用连接池”的阅读：

[http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.100%29.aspx)

# java - 面试Java编程测试

> ID：12057460
> 
> 赞同：47
> 
> 时间：2012-08-21T14:46:25.670
> 
> 标签：java, oop

这是工作面试中使用的编程测试。我发现它有一个非常奇怪的非 OO 视角，并且想知道为什么有人会从这个视角接近构造函数。作为一个非常有经验的 Java 程序员，我立即质疑编写此代码的个人的能力以及问题的奇怪视角。

我发现这些奇怪的断章取义的面试问题令人不安。我希望得到其他有经验的 OO Java 程序员的反馈。

> 完成 Solver 构造函数，以便调用 solveAll 返回一个包含 2 个值的列表，包括平方根和作为参数传递的整数的倒数。

```
public interface MathFunction {
    double calculate(double x);
}

public class Solver {

    private List<MathFunction> functionList;

    public Solver() { 

        //Complete here

    }

    public List<Double> solveAll(double x) {
        List<Double> result = new ArrayList<Double>();
        for (MathFunction function : this.functionList) {
            result.add(new Double(function.calculate(x)));
        }

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-21T14:51:13.747

这是通过使用最简单的方法来测试您的设计模式。我认为这可能是策略（或其他一些行为模式）。见这些：

[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

[http://en.wikipedia.org/wiki/Behavioral_pattern](http://en.wikipedia.org/wiki/Behavioral_pattern)

如果您要参加 Java 面试，您应该能够识别他们暗示的设计模式，这应该可以防止您过于不安！

要回答这个问题，创建两个`MathFunction`根据需要实现的类，然后创建两个实例并将它们存储在`functionList`.

这里的重点*不是*“你能以这种奇怪的方式进行计算”，而是“你能识别设计模式”。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-21T15:06:53.113

我同意它令人困惑和过度设计。

但我确实认为代码是合理的面向对象的。这是策略模式的一个实例。生成答案*列表*的代码并不关心答案是如何计算的——这两个问题是分开的，并且可以应用不同的计算策略，而无需接触生成列表的代码。

为了使类更有用，这些函数应该从外部传入（即依赖注入），而不是在构造函数中实例化。

你知道答案，我想，但它的价值...

```
public Solver() {
    functionList = new ArrayList<MathFunction>();

    functionList.add(new MathFunction() {

        @Override
        public double calculate(double x) {
            return 1d/x;
        }
    });

    functionList.add(new MathFunction() {

        @Override
        public double calculate(double x) {
            return Math.sqrt(x);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T14:53:18.233

恕我直言，这确实是一种奇怪的方法。该名称`Solver`是通用的，默认情况下不应实现特定操作。然而，也许那是采访的一部分？第一部分：简单地完成请求。第二部分：说这样做很奇怪。

我会说一个更好的方法是有一个`addMathFunction(MathFunction mf)`方法。如果需要，可以创建扩展类的子`Solver`类并在其构造函数中添加 MathFunctions。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T15:49:12.253

好的，我为自己的问题编写了解决方案。我认为构造函数中不应包含任何内容的直觉似乎是正确的。functionList 不是静态的，因此您需要一个实例来初始化它。它指定整数，所以我四舍五入为整数。反函数无论如何都不是高级数学。

```
import java.util.ArrayList;
import java.util.List;
import java.lang.Math;

public class Solver {

    private List<MathFunction> functionList = new ArrayList<MathFunction>();;

    public Solver() { 

// Complete here

    }

    public void initFunctionList() {

        MathFunction functionSquareRoot = new MathFunction(){

            @Override
            public double calculate(double x) {
                return (x<0 ? 0: Math.sqrt(x));  // maybe we need throw an exception here for negative numbers, but we'll just set it to 0
            }};

        MathFunction functionInverse = new MathFunction(){

            @Override
            public double calculate(double x) {
                return (x!=0.0 ? 1/x : 0);
            }

        };

        functionList.add(functionSquareRoot);
        functionList.add(functionInverse);

    }

    public List<Double> solveAll(double x) {
        List<Double> result = new ArrayList<Double>();

        for (MathFunction function : this.functionList) {
            result.add(new Double(function.calculate(x)));
        }

        return result;
    }

}

public interface MathFunction {
     double calculate(double x);
}

public class TestSolver {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Solver s = new Solver();
        s.initFunctionList();
        System.out.println(s.solveAll(16.0));

    }

} 
```

我误导自己构造函数可以是

```
public Solver() { 

// Complete here
        MathFunction functionSquareRoot = new MathFunction(){

            @Override
            public double calculate(double x) {
                return (x<0 ? 0: Math.sqrt(x));  // maybe we need throw an exception here for negative numbers, but we'll just set it to 0
            }};

        MathFunction functionInverse = new MathFunction(){

            @Override
            public double calculate(double x) {
                return (x!=0.0 ? 1/x : 0);
            }

        };

        functionList.add(functionSquareRoot);
        functionList.add(functionInverse);

    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-21T14:56:42.857

这是我的解决方案。这是一个[工厂类](http://en.wikipedia.org/wiki/Factory_method_pattern)的简单说明。

```
public Solver() { 
    functionList = new ArrayList<MathFunction>();
    MathFunction sqrt = new MathFunction() {
        @Override
        public double calculate(double x) {
            return Math.sqrt(x);
        }

    };
    functionList.add(sqrt);
    MathFunction inverse = new MathFunction() {
        @Override
        public double calculate(double x) {
            return 1.0D / x;
        }

    };
    functionList.add(inverse);
} 
```

这个问题说明了两件事：

*   程序员是否理解数学术语，如逆。
*   程序员是否了解接口或类的实例可以存储在列表中，并在以后进行迭代。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-21T14:52:15.047

虽然我同意这可能不是最好的方式，或者大多数 OO 方式来做到这一点，但我不得不假设这个练习的重点是看看你对继承、接口和匿名内部类的理解程度。这是我唯一能想到的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-21T14:53:36.760

我认为他们希望您在功能列表中添加两项。每个都将实现 MathFunction 接口，一个用于平方根，一个用于逆。问题在于细节：

1-你有一个返回 2 个值的函数，因为它做了两件不同的事情，这很糟糕

2-如果您想拥有这个“全能”类，那么将 Mathfunctions 作为参数接收会很有趣，这样您就可以执行任何类型的 MathFunctions，MathFunctions 将是可参数化的

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-06T01:50:29.047

有点做作，对我来说似乎更接近装饰者模式。不确定我在面试时会说什么，但我会这样编码：

```
package math;

import java.util.ArrayList;
import java.util.List;

public class DecoratorMath 
{

    interface MathFunction 
    {
        double calculate(double x);
    }

    public static void main(String[] args) 
    {
        DecoratorMath decoratorMath =  new DecoratorMath();
        decoratorMath.go();
    }

    public void go() 
    {
        Solver solver = new Solver();
        decorate(solver);
        List<Double> results = solver.solveAll(02);
        for (Double d :results) 
        {
            System.out.println(d);
        }
    }

    public void decorate(Solver solver)
    {
        solver.addFunction(new MathFunction() 
        {
            @Override
            public double calculate(double x) 
            {
                return Math.sqrt(x);
            }
        });

        solver.addFunction(new MathFunction() 
        {
            @Override
            public double calculate(double x) 
            {
                return 1d/x;
            }
        });
    }

    class Solver
    {
        private List<MathFunction> mathFunctions = new ArrayList<MathFunction>();

        public void addFunction(MathFunction mathFunction)
        {
            mathFunctions.add(mathFunction);
        }

        public List<Double> solveAll(double x) 
        {
            List<Double> result = new ArrayList<Double>();
            for (MathFunction function : mathFunctions) 
            {
                result.add(new Double(function.calculate(x)));
            }
            return result;
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-09T23:48:24.320

在构造函数中做这一切只是不好的做法。无论如何，我的多合一解决方案。

```
import java.util.*;
import java.math.*;

//sqrt / inverse

public class Solver{

  private List<MathFunction> functionList;

  public interface MathFunction{
     double calculate(double x);
  }

  class X implements MathFunction {
    public double calculate(double x) {
      return Math.sqrt(x); 
  } 
  }

    class Y implements MathFunction {
    public double calculate(double y) {
      return 1/y; 
  } 
  }

  public Solver(){
  //here
    functionList = new ArrayList<MathFunction>();

    MathFunction f =  (MathFunction) new X();
    functionList.add(f);  

    MathFunction f2 =  (MathFunction) new Y();
    functionList.add(f2);

  }

  public List<Double> solveAll(double x){ 

  List<Double> result=new ArrayList<Double>();

    for (MathFunction function : this.functionList){

      result.add(new Double(function.calculate(x)));

    }

    return result;

  }

public static void main(String... args) {

    System.out.println("result="+new Solver().solveAll(123));

}

} 
```

# c++ - 从套接字接收后，使用 c++ 将二进制数据写入文件

> ID：12057462
> 
> 赞同：-3
> 
> 时间：2012-08-21T14:46:32.727
> 
> 标签：c++, sockets, file-io

我正在尝试编写一个从文件（任何类型）读取并在套接字上写入文件数据（二进制数据）的 c++ 代码，因此接收器必须获取这些数据并创建一个文件，我应该看到相同的数据相同的格式，问题是数据仍然是二进制并作为二进制数据写入文件！如果在没有在网络上发送的情况下测试代码，它将运行良好！任何想法 ？提前致谢 。注意，如果它影响这个问题，我使用的是 Ubuntu 11.10 ..

这是客户端的代码：

```
filer=fopen("a.doc","rb"); 
fseek (filer , 0 , SEEK_END); 
long size; 
size = ftell (filer); 
rewind (filer); 
buffer = (char*) malloc (sizeof(char)*size); 
numr=fread(buffer,1,size,filer); 
fclose(filer); //some socket code 
char buffer2[size]; 
strcpy(buffer2 , buffer);
n = write(sockfd,buffer2,size); 
```

对于服务器端：

```
n = read(sock,buffer,length);
FILE * filew;
int numw;
filew=fopen("acopy.doc","wb");
numw=fwrite(buffer,1,len,filew);
fclose(filew); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:18:26.067

首先是你需要循环。`read`对和的调用`write`并不总是完整的缓冲区。 **免责声明我无法在此处进行测试** 例如：

```
numr=fread(buffer,1,size,filer); 
fclose(filer); //some socket code 
char buffer2[size]; 
strcpy(buffer2 , buffer);
n = write(sockfd,buffer2,size); 
```

至

```
char buffer2[size]; 
while ((numr=fread(buffer,1,size,filer)) != 0)
{
    strcpy(buffer2 , buffer);
    n = 0;
    while ((n = write(sockfd,buffer2+n,numr-n)) != 0)
       ; 
}
fclose(filer); //some socket code 
filer = NULL; 
```

同样在服务器端

```
n = read(sock,buffer,length);
FILE * filew;
int numw;
filew=fopen("acopy.doc","wb");
numw=fwrite(buffer,1,len,filew);
fclose(filew); 
```

至

```
FILE * filew;
filew=fopen("acopy.doc","wb");
int numw = 0;
while ((n = read(sock,buffer,length)) != 0)
{
    while ((numw=fwrite(buffer+numw,1,n-numw,filew) != 0)
       ;
}
fclose(filew); 
```

# javascript - Firefox 的 Jquery Colorbox 问题

> ID：12057465
> 
> 赞同：1
> 
> 时间：2012-08-21T14:46:37.567
> 
> 标签：javascript, jquery, asp.net, colorbox

我正在通过 javascript 在转发器中填充锚链接，我正在使用 colorbox iframe 弹出这些链接。它在 IE7、Safari、Chrome 中运行良好，但在 Forefox(14.1) 中运行良好。

在 Firefox 中，它在新窗口中打开，而不是在 colorbox iframe 中打开。

```
function BidCountFormatter(BidCount, AuctionID) {
if (parseInt(BidCount) > 0)
    return "<b><a class=auctionhistorybox href=popupauctionhistory.aspx?auctionid=" + AuctionID + ">" + BidCount + "</a></b>";
else
    return "--";
}

$(document).ready(function () {
          $(".auctionhistorybox").colorbox({ iframe: true, width: "35%", height: "60%" });
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:30:25.283

由于锚链接是在运行时动态生成的，所以之后我不得不重新绑定 ColorBox 事件：

而不是“$(document).ready”

```
$(document).ready(function () {
 $(".auctionhistorybox").colorbox({ iframe: true, width: "35%", height: "60%" });
}); 
```

在中继器中生成“auctionhistorybox”链接后，我调用了以下函数

```
function bindColorBoxEvents() {
$('.auctionhistorybox').each(function (i) {
    $(this).unbind('click');
    $(".auctionhistorybox").colorbox({ iframe: true, width: "50%", height: "95%" });
}); 
```

}

感谢您的帮助@Vector。

# android - 在 java 中添加 xmlns 属性

> ID：12057469
> 
> 赞同：1
> 
> 时间：2012-08-21T14:46:50.520
> 
> 标签：android, xml, xml-namespaces

我目前正在将一个 xml 文件转换为 java 编码，但我遇到了一个问题。在我的 xml 文件中，我有一个带有两个 xmlns 属性的视图，如下所示：

```
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:launcher="http://schemas.android.com/apk/res/com.android.launcher" 
```

如何将这些广告添加到我在 java 中的自定义 FrameLayout 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:25:09.380

属性的目的`xmlns`是告诉设计时和构建时工具有关各种 UI 元素的信息，例如`Button`、`TextView`等`FrameLayout`。

如果您正在编写 Java 代码以动态构建布局，则只需导入相关的小部件和视图类基本上是等效的。换句话说，不要担心`xmlns`属性。

# r - 在具有字符和数字变量的 data.frame 上使用 Apply

> ID：12057471
> 
> 赞同：3
> 
> 时间：2012-08-21T14:46:58.690
> 
> 标签：r

我正在尝试将一些现有的基于循环的代码转换为使用 R 的应用函数。根据该项目的规范，**不允许使用其他库**（例如 plyr）。

这就是它目前的工作方式。

> ```
>  Type Pressure Temp
> 1   Iron      100   10
> 2 Copper      200   20 
> ```

```
for(i in 1:rnow(data))
{
    if(data$Type[i] == "Iron")
         Output[i] <- IronCalculation(data$Pressure[i]...)
    else if(data$Type[i] == "Copper")
         Output[i] <- CopperCalculation(data$Pressure[i]...)
} 
```

我想将其转换为使用该`apply()`功能。我尝试了多种方法，但我只是卡住了，因为`apply()`将所有变量值转换为字符，因此不可能对这些进行数字编译。原始数据集有 150 多个变量，其中许多是字符串/字符。

作为测试，我尝试了以下方法。显然它失败了。我可以使用 as.numeric() 将字符变量转换为数字，但每行有 8000 多行和 20 个变量。似乎浪费了 CPU 周期。

```
apply(data[1,], 2, function(x) {
if(x['Type'] == "Iron")
             Output <- IronCalculation(x['Type'],x['Pressure']...)
}) 
```

有人可以帮忙吗？如何更改此循环以使用应用功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-02T02:28:58.320

尝试

```
apply(data, 1,  
  function(x) {  
    if (x['Type'] == 'Iron')  
      IronCalculation(as.numeric(x['Pressure']), as.numeric(x['Pressure']))  
    else if (x['Type'] == 'Copper')  
      CopperCalculation(as.numeric(x['Pressure']), as.numeric(x['Pressure']))  
  }  
) 
```

你会得到一个向量。 `as.numeric()`是必要的，因为两者在传递给您的匿名函数`Pressure`时都会被强制转换为字符。`Temp``Type`

编辑：但是`switch()`按照@Justin 的建议使用而不是嵌套`if`的 s 会更加优雅。

# c# - MVC3 多模型形式

> ID：12057476
> 
> 赞同：0
> 
> 时间：2012-08-21T14:47:10.920
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有一个多模型表单并且有多个问题，所以我将从第一个问题开始：在我的列表视图中，我有一个打开表单的操作链接。我需要这个链接像这样打开。

/AuditSchedule/Audit/1192/Section/1

目前链接是这样的

/AuditSchedule/Audit/1192/节

这是我的操作链接代码

```
 grid.Column(format: (tracking) => Html.ActionLink("Select", "Audit", new { id = tracking.AuditScheduleID })), 
```

我的 Global.asax 中有一个链接设置

```
 routes.MapRoute(
            "AuditSchedule", // Route name

            "AuditSchedule/Audit/{id}/Section/{section}", // URL with parameters
            new { controller = "AuditSchedule", action = "Audit", id = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults

        ); 
```

该部分将始终为 1。如何获取此链接以显示该部分？

问题 2 我有表单视图通过选择侧边菜单填充问题。我还有一个视图模型，我为某些复选框创建了一个视图模型，以从其中包含选择的表中填充。如果我添加一条带有他们填充的 AuditSchedule ID 的记录。这很好。但是，我需要将这些问题中的每一个都放入每个问题的答案表中。我为 MainQuestionID 添加了一个（设置），但它显示全为零。

我如何让它填充，以便它知道它是针对哪个问题并将其插入问题表中？

这是代码：

```
namespace QQAForm.ViewModels
{
public class AuditFormEdit
{
    public virtual int MainQuestionID { get; set; }

    public List<SubcategoryHelper> SubcategoryHelperGet { get; set; }

    public class SubcategoryHelper : Models.SubCategory
    {
        public SubcategoryHelper(Models.SubCategory subCat)
        {
            this.SubCategoryID = subCat.SubCategoryID;
            this.SubcategoryName = subCat.SubcategoryName;
        }

    }

    public Models.MainAnswer ScoreInstance { get; set; }

    public List<ScoreCardCheckBoxHelper> ScoreCardCheckBoxHelperList { get; set; }

    public void InitializeScoreCheckBoxHelperList(List<Models.Score> ScoreList)
    {
        if (this.ScoreCardCheckBoxHelperList == null)
            this.ScoreCardCheckBoxHelperList = new List<ScoreCardCheckBoxHelper>();

        if (ScoreList != null
            && this.ScoreInstance != null)
        {
            this.ScoreCardCheckBoxHelperList.Clear();
            ScoreCardCheckBoxHelper scoreCardCheckBoxHelper;
            string scoreTypes =
                string.IsNullOrEmpty(this.ScoreInstance.Score) ?
                string.Empty : this.ScoreInstance.Score;
            foreach (Models.Score scoreType in ScoreList)
            {
                scoreCardCheckBoxHelper = new ScoreCardCheckBoxHelper(scoreType);
                if (scoreTypes.Contains(scoreType.ScoreName))
                    scoreCardCheckBoxHelper.Checked = true;
                this.ScoreCardCheckBoxHelperList.Add(scoreCardCheckBoxHelper);
            }
        }
    }

    public void PopulateCheckBoxsToScores()
    {
        this.ScoreInstance.Score = string.Empty;
        var scoreType = this.ScoreCardCheckBoxHelperList.Where(x => x.Checked)
                              .Select<ScoreCardCheckBoxHelper, string>(x => x.ScoreName)
                              .AsEnumerable();
        this.ScoreInstance.Score = string.Join(", ", scoreType);
    }

    public class ScoreCardCheckBoxHelper : Models.Score
    {
        public bool Checked { get; set; }

        public ScoreCardCheckBoxHelper() : base() { }

        public ScoreCardCheckBoxHelper(Models.Score score)
        {
            this.ScoreID = score.ScoreID;
            this.ScoreName = score.ScoreName;
        }
    }

}
} 
```

这是视图：

```
@{ Layout = null; }
@model QQAForm.ViewModels.AuditFormEdit

        @Html.DisplayFor(model => model.MainQuestionID)
        <br />
        @for (int index = 0; index < Model.ScoreCardCheckBoxHelperList.Count; index++)
        {

            @Html.CheckBoxFor(m => m.ScoreCardCheckBoxHelperList[index].Checked)
            @Html.LabelFor(m => m.ScoreCardCheckBoxHelperList[index], Model.ScoreCardCheckBoxHelperList[index].ScoreName)
            @Html.HiddenFor(m => m.ScoreCardCheckBoxHelperList[index].ScoreID)
            @Html.HiddenFor(m => m.ScoreCardCheckBoxHelperList[index].ScoreName)
            <br />

        } 
```

这是控制器：

```
 //get
    public ActionResult _ScoreSection(int id)
    {
        AuditFormEdit viewModel = new AuditFormEdit();
        viewModel.ScoreInstance = _db.MainAnswers.Single(r => r.AuditScheduleID == id);
        //_db.SubCategories.Single(r => r.SubCategoryID == Section);
        viewModel.InitializeScoreCheckBoxHelperList(_db.Scores.ToList());
        return View(viewModel);
    }

    // get
    public ActionResult _Forms(int section)
    {
        var subCatToDisplay = _db.SubCategories.Single(r => r.SubCategoryID == section);
        return View(subCatToDisplay);
    }

    //post
    [HttpPost]
    public ActionResult _Forms(AuditFormEdit viewModel)
    {
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToScores();
            _db.Entry(viewModel.ScoreInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("/");
        }
        else
        {
            return View(viewModel);
        }
    } 
```

这是结果布局视图： ![在此处输入图像描述](../Images/272ad370bd088ea95f7886d5c746c8ac.png)

我目前已经通过部分等将所有这些拉入布局中。如果有更简单的方法或更清洁的方法可以让我知道。

谢谢

# android - Facebook 请求对话框返回捆绑包

> ID：12057477
> 
> 赞同：0
> 
> 时间：2012-08-21T14:47:13.533
> 
> 标签：android, facebook, apprequests

在[此](https://developers.facebook.com/docs/reference/dialogs/requests/)页面中，我看到您可以从请求对话框中获取两个返回数据：“请求”和“到”，所以我已经这样做了

```
new Facebook.DialogListener() {
    public void onComplete(Bundle values) {
    Log.i("Bundle",values.toString());
    int[] nArray = values.getIntArray("to");
    int n = nArray.length;
} 
```

但是`NullPointerException`当我使用 n 变量时，我有一个。我不确定“to”是一个 intArray 有人可以告诉我 nArray 的类型是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:03:59.887

试试这个：

```
Set<String> keys = values.keySet();
int n = keys.size() - 1; 
```

现在 n 是您邀请的朋友的数量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:25:10.630

您是否尝试过使用调试器单步执行此代码？您可以设置断点并尝试在 Eclipse 的 Expressions 选项卡中调用不同的方法来尝试找出正确的数据类型。

另外，您的日志消息 ( `values.toString()`) 的输出是什么？

# c# - 存储库和继承

> ID：12057479
> 
> 赞同：1
> 
> 时间：2012-08-21T14:47:17.527
> 
> 标签：c#, inheritance, repository, datamapper

目前我有一个继承结构，比如说Employee和Manager类，继承自Person抽象类我应该为每个具体类实现一个存储库还是为整个继承结构实现一个存储库？就我个人而言，我觉得每个具体类的一个存储库更正确下面是我对这种方法的实现。我将 Data Mapper 模式与 Repository 一起使用，但在实施这种方法时遇到了一些困难：除了 Data Mapper 类之外，我不知道将一些方法放在哪里，但放在那里也很尴尬

```
public enum PersonType
{
    Unknown = 0,
    Employee = 1,
    Manager = 2
}

public abstract class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }    
    public PersonType Type { get; set; }

    //Omitted properties and methods
}

public class Employee : Person
{
    public string EmployeeNo { get; set; }

    //Omitted properties and methods
}

public class Manager : Person
{
    public string ManagerNo { get; set; }

    //Omitted properties and methods
} 
```

以下是映射器类：

```
public interface IMapper
{
    bool CanMap(PersonType type);
    Person MapFrom(DataRow dataRow);

    //This method is awkward to put here
    SqlCommand CreateUpdateCommandFrom(Person person);  
}

public abstract class MapperBase : IMapper
{
    public abstract bool CanMap(PersonType type);
    public abstract Person MapFrom(DataRow dataRow);
    public abstract SqlCommand CreateUpdateCommandFrom(Person person);

    protected T MapCommonPropertiesFrom<T>(DataRow dataRow) where T : Person, new()
    {
        return new T
        {
            //Populate common properties like id, name, age
        };
    }
}

public class EmployeeMapper : MapperBase
{
    public override bool CanMap(PersonType type)
    {
        return type == PersonType.Employee;
    }

    public override Person MapFrom(DataRow dataRow)
    {
        Employee employee = MapCommonPropertiesFrom<Employee>(dataRow);
        //Populate employee properties
        return employee;
    }

    public override SqlCommand CreateUpdateCommandFrom(Person person)
    {
        SqlCommand updateCmd = new SqlCommand();
        //Set parameters for updateCmd from person properties
        return updateCmd;
    }
}

//Similar class for ManagerMapper 
```

下面是一个注册类来查找映射器类

```
public static class MapperRegistry
{
    private static List<IMapper> _Mappers = RegisterMappers();

    private static List<IMapper> RegisterMappers()
    {
        return new List<IMapper>
        {
            new EmployeeMapper()
            //ManagerMapper
        };
    }

    public static IMapper FindMapperFor(PersonType type)
    {
        foreach (IMapper eachMapper in _Mappers)
        {
            if (eachMapper.CanMap(type))
            {
                return eachMapper;
            }
        }

        throw new ArgumentException(string.Format("Cannot find mapper for {0}", type));
    }
} 
```

最后一类是存储库类

```
public class PersonRepository
{   
    public Person FindBy(int id)
    {
        //Execute query command in db, get datatable back, store each person
        DataTable returnedData = ExecuteQueryCommand(id);
        PersonType type = int.Parse(returnedData.Rows[0], "Id");
        IMapper mapper = MapperRegistry.FindMapperFor(type);
        return mapper.MapFrom(returnedData.Rows[0]);
    }

    private DataTable ExecuteQueryCommand(int id)
    {
        //Execute query command in db
        return new DataTable();
    }

    public void Update<T>(T person) where T : Person
    {
        IMapper mapper = MapperRegistry.FindMapperFor(person.Type);
        SqlCommand updateCmd = mapper.CreateUpdateCommandFrom(person);
        //Execute update command
    }
} 
```

感觉不对的是 CreateUpdateCommandFrom()，目前放在 Mapper 类中，按理应该放在 Repository 类中，但是在一般 Repository 类中，我们不知道子类的具体属性，如 Employee 类中的 EmployeeNo 和 ManagerNo在 Manager 类中，因此我们无法在存储库中创建通用 SqlCommand

有没有更好的方法？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:54:13.700

> 有没有更好的方法？非常感谢

是的，有更好的方法。

当您使用 SQL 数据库时，请避免重新发明轮子，而是使用诸如[nHibernate](http://nhforge.org)或[实体框架之类的](http://msdn.microsoft.com/en-us/data/ef.aspx)[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)工具，最好使用 LINQ 支持。

# sql - 从存储过程运行 VBS

> ID：12057483
> 
> 赞同：0
> 
> 时间：2012-08-21T14:47:21.847
> 
> 标签：sql, sql-server, vbscript

我最近需要从 SQL 运行 VBScripts。我认为与其将脚本保存在外部文件中，我更愿意将它们托管在更易于维护的数据库中。为了做到这一点，我能想到的最好的方法是创建将这些脚本推送到临时文件的功能，运行临时文件，然后将其删除。我已将脚本作为解决方案包含在此处，但如果你们还有其他想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:47:21.847

此代码允许用户运行托管在数据库中的脚本。这些脚本在服务器的服务帐户下运行在主机服务器上。临时脚本文件放在服务帐户的临时路径中（由环境变量 %temp% 定义）。

```
use [DemoDatabase]
go
----use below code to enable commands (required for xp_cmdshell to work)
--exec sp_configure 'show advanced options', 1
--go
--reconfigure
--go
--exec sp_configure 'xp_cmdshell', 1  
--go
--reconfigure
--go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

if OBJECT_ID('vbsScripts') is not null drop table vbsScripts
go
create table vbsScripts 
(
    id bigint not null identity(1,1) constraint pk_vbsScripts primary key clustered 
    , name nvarchar(256) not null constraint uk_vbsScripts_name unique
    , script nvarchar(max) not null
    , timeoutSecs int null constraint df_vbsScripts_timeoutSecs default(86400)--leave as null if you don't want a timeout / defaults to 1 day / 24*60*60
    , batchMode bit not null constraint df_vbsScripts_batchMode default(1)
)
go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

/*
Gets the temp directory from environment variables
usage:
    declare @tempPath nvarchar(max)
    exec GetTempDirectory @tempPath out 
    select @tempPath 
*/
if OBJECT_ID('GetTempDirectory') is not null drop proc GetTempDirectory
go
create proc GetTempDirectory(@path nvarchar(max) out)
as
begin
    set @path = ''
    declare @tempTable table(data nvarchar(max))
    insert @tempTable exec master..xp_cmdshell 'echo %temp%'
    select top 1 @path = data from @tempTable
    if SUBSTRING(@path,len(@path),1) <> '\' set @path = @path + '\'
end
go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/*
Creates a unique filename (using guid to ensure uniqueness and datetime to make the name friendlier)
usage:
    declare @tempPath nvarchar(max)
    exec GetTempDirectory @tempPath out 
    select @tempPath 
*/
if OBJECT_ID('GetTempFilename') is not null drop proc GetTempFilename
go
create proc GetTempFilename(@fn nvarchar(max) out)
as
begin
    --exec GetTempDirectory @fn out --can just use environment variable - originally had issues testing as was looking at the wrong user's temp directory :/
    --set @fn = @fn + 'sqlTemp_' + replace(replace(replace(convert(nvarchar(24), getutcdate(),127),'-',''),':',''),'.','') + '_' + CAST(NEWID() as nvarchar(36)) + '.tmp'
    set @fn = '%temp%\' + 'sqlTemp_' + replace(replace(replace(convert(nvarchar(24), getutcdate(),127),'-',''),':',''),'.','') + '_' + CAST(NEWID() as nvarchar(36)) + '.tmp'
end
go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

if OBJECT_ID('dbo.fn_EscapeDosCharachters') is not null drop function dbo.fn_EscapeDosCharachters
go
create function dbo.fn_EscapeDosCharachters
(
    @text nvarchar(max)
)
returns nvarchar(max)
as
begin
    --http://www.dostips.com/?t=Snippets.Escape
    set @text = REPLACE(@text,'^','^^')
    set @text = REPLACE(@text,'!','^!')
    set @text = REPLACE(@text,'&','^&')
    set @text = REPLACE(@text,'|','^|')
    set @text = REPLACE(@text,'%','%%')
    return @text
end
go
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

if OBJECT_ID('createTempTextFile') is not null drop proc createTempTextFile
go
create proc createTempTextFile
(
    @fn nvarchar(max) out 
                      --the filename to output to (nb: environment variables don't currently work (e.g. you can't use %temp%\myFile.vbs)
                      --works fine with spaces in filename (so far at least)
                      --if user passes null a temporary filename will be auto allocated & returned in this variable
    , @content nvarchar(max)
)
as
begin

    declare @charPos int
    , @cmd varchar(8000) --has to be varchar rather than nvarchar due to xp_cmdshell implementation

    if @fn is null or LEN(@fn)=0
    begin
        exec GetTempFilename @fn out
    end

    set @cmd = '@echo.>' + @fn --create a new file for our script output
    EXEC master..xp_cmdshell @cmd, no_output

    set @content = replace(@content,char(13) + char(10), char(10))--ensure uniform line endings (i.e. \r\n -> \n)
    set @content = replace(@content,char(13), char(10))--ensure uniform line endings (i.e. \r -> \n)
    set @content = @content + CHAR(10) --ensure last character of script is new line
    set @charPos = CHARINDEX(char(10),@content)
    while (@charPos > 0)
    begin
        --todo: consider what additional escaping is required to prevent injection issues
        set @cmd = '@echo.' + dbo.fn_EscapeDosCharachters(SUBSTRING(@content,1,@charPos-1)) + '>> ' + @fn
        EXEC master..xp_cmdshell @cmd, no_output
        set @content = SUBSTRING(@content,@charPos+1,len(@content))
        set @charPos = CHARINDEX(char(10),@content)
    end

end 
go
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

if OBJECT_ID('deleteTempTextFile') is not null drop proc deleteTempTextFile
go
create proc deleteTempTextFile
(
    @fn nvarchar(max)
)
as
begin
    declare @cmd varchar(8000)
    if CHARINDEX(' ',@fn)>0 and CHARINDEX('"',@fn)>1 set @fn = QUOTENAME(@fn,'"')
    set @cmd = 'del ' + @fn
    EXEC master..xp_cmdshell @cmd, no_output
end
go
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

if OBJECT_ID('sp_RunScript') is not null drop proc sp_RunScript
go
create proc sp_RunScript
(
    @scriptId bigint
    , @arguments nvarchar(max)
)
as
begin
    declare @timeoutSecs int
    , @batchMode bit
    , @script nvarchar(max)
    , @tempfileUri nvarchar(max)
    , @cmd varchar(8000) --has to be varchar rather than nvarchar due to xp_cmdshell implementation

    select @timeoutSecs=timeoutSecs 
    , @batchMode = batchMode
    , @script = script
    from vbsScripts 
    where id = @scriptId

    exec createTempTextFile @tempfileUri out, @script

    if CHARINDEX(' ',@tempfileUri)>0 and CHARINDEX('"',@tempfileUri)>1 set @tempfileUri = QUOTENAME(@tempfileUri,'"')
    set @cmd = 'cscript ' + @tempfileUri + ' //E:vbscript //NOLOGO '

    --batch mode or interactive
    if @batchMode=1 
        set @cmd = @cmd + '//B '
    else
        set @cmd = @cmd + '//I '

    --should script timeout after x seconds?
    if @timeoutSecs is not null
        set @cmd = @cmd + '//T:' + CAST(@timeoutSecs as nvarchar(18)) + ' '

    set @cmd = @cmd + isnull(@arguments,'')
    --select @cmd --if debugging enable this line to see the script file / etc

    EXEC master..xp_cmdshell @cmd --if required we can capture output as has been done in GetTempDirectory

    exec deleteTempTextFile @tempfileUri --tidyup the temp script - disable this line for debugging

end
go
if OBJECT_ID('sp_RunScriptByName') is not null drop proc sp_RunScriptByName
go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/*
provides a friendly interface to sp_RunScript
*/
create proc sp_RunScriptByName
(
    @scriptName nvarchar(256)
    , @arguments nvarchar(max)
)
as
begin

    declare @id bigint

    select @id = id
    from vbsScripts 
    where name = @scriptName

    exec sp_RunScript @id, @arguments

end
go

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--demo

--register a new script in the scripts table
insert vbsScripts 
select 'demo', '
option explicit
dim objFSO, i, path
path = "c:\example1\"
wscript.echo "hello" ''show what console output looks like (if interactive)
for i = 0 to wscript.Arguments.Count-1 ''show that we can handle command line arguments
    wscript.echo wscript.arguments.item(i)
next
set objFSO = CreateObject("Scripting.FileSystemObject")    
if not objFSO.FolderExists(path) then
    objFSO.CreateFolder(path) ''create a folder to demonstrate that the vbs is running / affecting the outside environment
else
    wscript.echo "Folder " & path & " already exists."
end if
set objFSO = Nothing
', null, 0
go

--execute above script via friendly name
sp_RunScriptByName 'demo','"this is a demo" "hopefully it will work" yes it does' 
```

# c# - 在 C# 中压缩字符串然后在 JavaScript 中解压缩？

> ID：12057489
> 
> 赞同：2
> 
> 时间：2012-08-21T14:47:42.047
> 
> 标签：c#, javascript, compression, base64

请任何人指出我在 C# 中压缩（相当长的）文本字符串然后在 JavaScript 中解压缩它的正确方向吗？

基本上我将图像编码为 base64，然后通过 websocket 将其发送到 JavaScript，但希望能够在发送之前减小字符串的大小。
我知道可以从 C# 到 C# 的方法，例如使用 gzip 或 quicklz，但还没有找到 C# 到 JavaScript 的任何东西。将不胜感激你有任何信息。：） 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:49:51.267

> 基本上我将图像编码为 base64，然后通过 websocket 将其发送到 JavaScript，但希望能够在发送之前减小字符串的大小。

无论如何，图像几乎总是被压缩，所以我不希望你能够在那里获得任何好处。让我感到震惊的是，您可以尝试做的主要事情是删除此处的“文本”部分，避免首先转换为/从 base64 转换。

我自己对 websockets 没有任何经验，但我会研究以这种方式传输二进制数据而不是文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:04:16.137

似乎有一个库，但我还没有尝试过：[zip.js](http://gildas-lormeau.github.com/zip.js/)

# objective-c - MagicalRecord importFromObject：带有字典的 JSON？

> ID：12057495
> 
> 赞同：2
> 
> 时间：2012-08-21T14:48:04.817
> 
> 标签：objective-c, ios, core-data, magicalrecord

我正在解析一些以这种格式出现的 JSON：

```
{
dataId = "823o7tr23d387g";
category = "link";
details = {
    text = "Some text associated with the link";
    url = "http://www.url.com";
    thumbnail_url = "http://www.url.com/picture.jpeg";
};
source = "CNN";
},
{
...
}, 
```

MagicalRecord 有一个很好的导入方法：`+ (id) importFromObject:(id)data;`但它是否支持 JSON 字典中的字典，以便它可以自动映射`details {}`到适当的属性？

是否有命名约定或我需要使用的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:52:21.720

查看这篇关于使用 MagicalRecord 自动导入 JSON 的文章，特别是数据 keypath 支持部分

[http://www.cimgf.com/2012/05/29/importing-data-made-easy/](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)

> **数据密钥路径支持**
> 
> 键值编码是Objective C 中一种常用且有效的工具。MagicalImport 允许您将keyPaths 指定为mappedKeyName 的一部分，从而使您可以访问其中的一些功能。如果您熟悉 KVC，这应该是一个相当简单的功能，因为 Magicalmport 将这些指定的密钥传递给了 KVC 方法。Keypath 支持允许您将数据映射到可能与数据模型不具有完全相同层次结构的实体。例如，一个数据实体可能存储纬度和经度，但源数据看起来更像这样：
> 
> ```
> {
>   "name": "Point Of Origin",
>   "location":
>   {
>     "latitude": 0.00,
>     "longitude": 0.00
>   }
> } 
> ```
> 
> 在这种情况下，我们可以在 mappedKeyName 配置中将 location.latitude 和 location.longitude 指定为我们的数据导入键路径，以深入挖掘嵌套数据结构并将这些值专门导入我们的核心数据实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:11:42.267

Scott 提到的博客对于使用 MagicalRecord 的人来说是必读的。

此外，如果默认值`+ (id) importFromObject:(id)data`不适用于您的某些 NSDictionary 数据，您始终可以覆盖`- (BOOL) importValuesForKeysWithObject:(id)objectData`NSManagedObject 子类中的方法以实现对映射的精确控制。

这是我最近的一个项目的一个片段：

```
// override MagicalRecord's implementation with additional set up for Dialogue relationship
- (BOOL) importValuesForKeysWithObject:(id)objectData {
    BOOL result = [super importValuesForKeysWithObject:objectData];

    // update lesson-dialogue data
    id dialogueDicts = [objectData objectForKey:@"dialogue"];
    if ([dialogueDicts isKindOfClass:[NSArray class]]) {
        for (id dialogueDict in dialogueDicts) {
            DialogueSentence *dialogue = [DialogueSentence findFirstByAttribute:@"id" withValue:[[dialogueDict objectForKey:@"id"]];
            if (dialogue == nil) {
                dialogue = [DialogueSentence createEntity];
            }
            [dialogue importValuesForKeysWithObject:dialogueDict];
            [self addDialoguesObject:dialogue];    // connect the relationship
        }
    }

    return result;
} 
```

顺便说一句，您可能想要创建 NSManagedObject 子类的类别并在那里编写覆盖代码，因为当您升级 Core Data 模型版本并重新生成 NSManagedObject 子类时，您自己的代码不会被清除。

# java - Windows 64 位中 Program Files 文件夹的 Java 路径

> ID：12057499
> 
> 赞同：5
> 
> 时间：2012-08-21T14:48:20.297
> 
> 标签：java, 64-bit, program-files

我正在尝试获取 java 上的默认 Program Files 文件夹。当我使用：

```
 System.getenv("ProgramFiles") 
```

它返回“C:\Program Files”而不是“C:\Program Files (x86)”

我可以手动添加 +(x86) 但如果用户使用 32 位系统，它将是错误的文件夹。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:51:28.303

你应该使用

```
System.getenv("ProgramFiles(X86)") 
```

您可以在[Wikipedia](http://en.wikipedia.org/wiki/Environment_variable#Default_Values_on_Microsoft_Windows)上找到完整的参考资料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T04:27:29.000

这是 32 位 Program Files 目录的正确答案

```
System.getenv("ProgramFiles(X86)") 
```

但是，如果程序员正在寻找 64 位 Program Files 文件夹但运行 32 位 JVM，则 System.getenv("ProgramFiles") 将返回 "\Program Files (x86)\" 作为 32 位兼容性的副作用. 在某些情况下，程序员仍然需要 64 位 ProgramFiles 目录。此解决方案有其缺陷，但通常会工作......

```
System.getenv("ProgramFiles").replace(" (x86)", "") 
```

那只是稍微好一点

```
System.getenv("SystemDrive") + "\Program Files" 
```

-特雷斯

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-21T15:01:15.560

可能是一试身手。

```
try {
  System.getenv("ProgramFiles(X86)");
}
catch (Exception e) {
  System.getenv("ProgramFiles");
} 
```

也许例外可能更具体，但一般的想法。

# javascript - 选择其父母没有特定类的所有元素（使用'.not（）'）

> ID：12057500
> 
> 赞同：1
> 
> 时间：2012-08-21T14:48:26.713
> 
> 标签：javascript, jquery, html, dom, dom-traversal

我正在尝试选择`.select`嵌套在 DOM 树中某处的类的所有元素。
唯一的限制是，他们不允许有任何父母与班级在一起`.forbidden`。

因此它不会在以下树部分中找到任何元素：

```
<div>
    <div class="forbidden">
        <div>
            <div>
                <div class="select">Some Content</div>
            </div>
        </div>
    </div>
</div> 
```

但会在这里找到 1 个元素：

```
<div>
    <div>
        <div>
            <div>
                <div>
                    <div class="select">Some Content</div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

如何使用该`.not()`功能实现此选择？像这样的东西： `$('.select').not($(this).parents().hasClass('.forbidden'));`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:52:47.100

您需要检查父元素，并`closest()`在该类中找到的第一个元素处停止，以及选择器是否有长度，即。包含元素，在 DOM 树的某处有一个带有该类的元素。

```
$('.select').filter(function(){
     return !$(this).closest('.forbidden').length;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T14:51:14.700

我不会使用`:not`.

但我会使用[过滤器](http://api.jquery.com/filter/)：

```
$('.select').filter(function(){return !$(this).parents().is('.forbidden')}); 
```

请注意，如果集合中的至少一个元素（这里是父元素）与选择器匹配，[则返回 true。](http://api.jquery.com/is/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T14:51:01.237

```
$('.select').filter(function() {
    return $(this).closest('.forbidden').length == 0;
}); 
```

# asp.net-mvc - 多个 MVC3 显示属性

> ID：12057502
> 
> 赞同：1
> 
> 时间：2012-08-21T14:48:33.193
> 
> 标签：asp.net-mvc, displayattribute

我在模型中有一个属性。让我们说一个电子邮件。

```
 <Display(Name:="Email")>
    <DataMember()>
    Public Property Email As String 
```

我想在每个页面中为电子邮件使用不同的标签，所以基本上我在问是否有办法为同一字段使用两个显示属性？我想要这样的东西-

```
 <Display(Name:="Email")>
    <Display(Name:="Please Enter your Email")>
    <DataMember()>
    Public Property Email As String 
```

然后在页面中选择要使用的标签。

有没有办法，我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:23:48.010

```
[DisplayName("Please Enter your Email")] //cannot specify a ResourceType

[Display(Name:="Please Enter your Email")] 
```

属性在**编译时**被读取并成为程序集元数据的一部分。您似乎想在**运行时**决定使用什么标签。

为此，在您看来，您可以做类似的事情。

```
@if(crazyUser){
    <label for="Email">Alternate Label</label>
}
else{    
    @Html.LabelFor(m => m.Email)    
} 
```

所以这是除了`[Display]`属性之外的额外部分。

# asp.net - 部署 SQL 数据库时出错：用户无权执行此操作

> ID：12057506
> 
> 赞同：2
> 
> 时间：2012-08-21T14:48:37.773
> 
> 标签：asp.net, sql-server, sql-server-express, publish, web-deployment

我有一个带有 MS SQL 2008 数据库的 ASP.NET 应用程序。在我的本地机器上一切正常，我想在测试服务器上使用 Visual Studio 执行 Web 部署。但是当我尝试在我的 Win 2003 服务器上发布应用程序时，我收到以下错误：

Web 部署任务失败。（(21/08/2012 16:33:04) 在远程计算机上处​​理请求时出错。）

(21/08/2012 16:33:04) 在远程计算机上处​​理请求时发生错误。无法创建数据库“c:\Inetpub\wwwroot\LDashboard\App_Data\SQADB.mdf”。用户无权执行此操作。

现在，在我的发布配置文件中指定的用户可以完全控制该计算机以及 SQL 服务器（我的意思是它出现在 SQL Management Studio 的“登录”部分并检查了所有服务器角色）。

源数据库连接字符串是：

数据源=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\SQADB.mdf;Integrated Security=True;Application Name=EntityFramework;User Instance=True

我配置的目标数据库连接字符串是：

数据源=.\SQLEXPRESS;AttachDbFilename=c:\Inetpub\wwwroot\LDashboard\App_Data\SQADB.mdf;Integrated Security=True;Application Name=EntityFramework;User Instance=True

我错过了什么？

# ant - 这个构建脚本是用于 openlazlo 4.9 编译的有效构建脚本吗

> ID：12057508
> 
> 赞同：1
> 
> 时间：2012-08-21T14:48:42.317
> 
> 标签：ant, build, openlaszlo, lzx

这是 Open laszlo 4.9 的有效 ant 构建脚本吗？我无法使用此文件构建它。

```
<project name="test" default="TestClient" basedir=".">
    <property name="src"   value="${basedir}/src"/>
    <property name="webappDir" value="../webapp"/>

    <property environment="env"/>
    <property name="lzbin" value="${env.LPS_HOME}/WEB-INF/lps/server/bin"/>

    <!-- use the correct compiler script based on platform -->
    <condition property="lzc" value="${lzbin}/lzc">
        <os family="unix"/>
    </condition>

    <condition property="lzc" value="${lzbin}/lzc.bat">
        <os family="windows"/>
    </condition>

    <property name="TestClient.lzx" value="${basedir}/src/TestClient.lzx"/>
    <property name="TestClient.swf" value="${basedir}/src/TestClient.swf"/>
    <property name="TestClient.lzx.swf" value="${TestClient.lzx}.swf"/>
    <property name="modules" value="${basedir}/src/modules"/>

    <target name="TestClient" description="compile TestClient.lzx">
        <echo message="${lzc}"/>
        <exec executable="${lzc}" failonerror="true">
            <arg value="${TestClient.lzx}"/>
            <arg value='"--runtime=swf10"'/>
        </exec>
        <copy file="${TestClient.lzx.swf}" todir="${webappDir}"/>
        <delete file="${TestClient.swf}"/>
        <delete file="${TestClient.lzx.swf}"/>
    </target>

    <target name="Debug" description="update files on webapp folder from tdc/src">
        <unzip src="${basedir}/../openlaszlo-4.9.0-servlet.war" dest="${webappDir}">            
            <patternset>
                <exclude name="**/WEB-INF/web.xml"/>
                <exclude name="**/META-INF/MANIFEST.MF"/>
                <exclude name="**/my-apps/copy-of-hello.lzx"/>
            </patternset>
        </unzip>
        <copy file="${TestClient.lzx}" todir="${webappDir}" overwrite="false"/>
        <copy file="${basedir}/../etc/proxy.properties" todir="${webappDir}/WEB-INF/classes" overwrite="false"/>

        <copy file="${basedir}/../webLZDebug.xml" tofile="${webappDir}/WEB-INF/web.xml" overwrite="true" />
        <copy file="${webappDir}/tutorial.html" tofile="${webappDir}/debug.html" overwrite="true" />
        <replace file="${webappDir}/debug.html">
            <replacetoken><![CDATA[lzEmbed({url: 'TestClient.lzx.swf?lzt=swf&folder=calif&servletUrl=http://127.0.0.1:12345/servlet/fixed&eliminatorResource=resources/eliminator.swf&__lzhistconn='+top.connuid+'&__lzhisturl=' + escape('includes/h.html?h='), bgcolor: '#6691B4"',  width: '100%', height: '100%'});]]></replacetoken>
            <replacevalue><![CDATA[lzEmbed({url: 'TestClient.lzx?debug=true&lzt=swf&folder=calif&servletUrl=http://127.0.0.1:12345/servlet/fixed&eliminatorResource=resources/eliminator.swf&__lzhistconn='+top.connuid+'&__lzhisturl=' + escape('includes/h.html?h='), bgcolor: '#6691B4"',  width: '100%', height: '100%'});]]></replacevalue>
        </replace>

        <copy todir="${webappDir}/modules" overwrite="true">
            <fileset dir="${ctbmodules}"></fileset>
        </copy>

    </target>

    <target name="help" description="describes usage">
        <echo>

        </echo>
    </target>
</project> 
```

我已经看过这个 stackoverflow 帖子。

[如何使用 Apache Ant 构建 OpenLaszlo DHTML 应用程序](https://stackoverflow.com/questions/11897892/how-to-build-an-openlaszlo-dhtml-application-using-apache-ant/11900508#11900508) ，我将准备这样的脚本

但是，我只是想确认早期的构建脚本是否有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:50:30.497

在第 28 行，您必须删除**运行时**参数周围的额外引号。代替

```
<arg value='"--runtime=swf10"'/> 
```

它应该是

```
<arg value="--runtime=swf10"/> 
```

然后，lzc 命令有一个选项 -o 或 --output，您可以在其中定义输出文件。默认情况下，lzc 命令生成两个 SWF 文件，例如

```
lzc TestClient.lzx  --runtime=swf10 
```

生成TestClient.lzx.swf10.swf和TestClient.swf10.swf。使用 -o 选项，您可以直接指定文件名：

```
lzc --runtime=swf10 -o TestClient.swf TestClient.lzx 
Compiling: TestClient.lzx to TestClient.swf 
```

这是 build.xml 的修改部分：

```
<property name="TestClient.lzx" value="${basedir}/src/TestClient.lzx"/>
<property name="TestClient.swf" value="TestClient.swf"/>
<property name="modules" value="${basedir}/src/modules"/>

<target name="TestClient" description="compile TestClient.lzx">
    <echo message="${lzc}"/>
    <exec executable="${lzc}" failonerror="true">
        <arg value="${TestClient.lzx}"/>
        <arg value="--runtime=swf10"/>
        <arg value="-o" />
        <arg value="${TestClient.swf}" />
    </exec>
    <move file="src/${TestClient.swf}" todir="${webappDir}"/>
</target> 
```

不要向 ${TestClient.swf} 属性添加路径，否则 lzc 命令将创建附加到文件名的文件夹结构。而不是在复制后删除生成的 SWF 文件，我只是移动它。这是蚂蚁的输出：

```
raju@T500:~/flex4.6/build-test$ ant
Buildfile: /home/raju/flex4.6/build-test/build.xml

TestClient:
     [echo] /home/raju/src/svn/openlaszlo/trunk/WEB-INF/lps/server/bin/lzc
     [exec] Compiling: /home/raju/flex4.6/build-test/src/TestClient.lzx to TestClient.swf
     [move] Moving 1 file to /home/raju/flex4.6/webapp

BUILD SUCCESSFUL 
```

以及由此产生的目录结构。

```
├── build-test/
│   ├── build.xml
│   └── src
│       └── TestClient.lzx
└── webapp/
    └── TestClient.swf 
```

# php - 如何在 Wordpress 中使用自定义表单设置用户权限？

> ID：12057509
> 
> 赞同：0
> 
> 时间：2012-08-21T14:48:50.407
> 
> 标签：php, wordpress

我在 wordpress 模板中创建了一个自定义表单，这个表单（带有用户/密码）将检查用户是否已注册（在自定义 mysql 表中，**不在**wp_users 中）。

如果登录成功，我需要为该用户设置自定义 WORDPRESS 权限（角色）......我该如何强制它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:37:39.187

您需要创建一个新的用户角色，我建议使用[用户角色编辑器](http://wordpress.org/extend/plugins/user-role-editor/)，但其中有一些。

获取已翻译角色的函数。

```
// Returns the current user role translated, i.e. 'Administrator'. Case sensitive!
function get_current_user_role() {
    global $wp_roles;
    $current_user = wp_get_current_user();
    $roles = $current_user->roles;
    $role = array_shift($roles);
    return isset($wp_roles->role_names[$role]) ? translate_user_role($wp_roles->role_names[$role] ) : false;
} 
```

使用上面的函数，在你的 php 中部署：

```
function userRoleCheck() {
    global $current_user;

     $userRole = get_current_user_role();

     if ($userRole == 'Administrator') {
              // Allowed
          } else {
             // Not allowed.
     } 
```

请查看[如何以编程方式添加用户角色](https://wordpress.stackexchange.com/questions/4725/how-to-change-a-users-role)。

# image - 图像缓存。从缓存和远程存储中选择性地加载图像

> ID：12057514
> 
> 赞同：0
> 
> 时间：2012-08-21T14:49:02.937
> 
> 标签：image, caching, resources, flash

我们开发了巨大的游戏，由于大​​量的资产，启动时需要一些时间来加载。每周或 2 周一次，它会更新到新版本，这可能会带来很少的新资产或更新以前的资产。所以现在我们正试图找到一种方法，让闪存只加载新的/更新的资产，其余的从缓存中获取。但我们还没有成功。有人知道吗？

# c# - C# DynamicObject 动态属性

> ID：12057516
> 
> 赞同：8
> 
> 时间：2012-08-21T14:49:07.790
> 
> 标签：c#, dynamicobject

假设我不能使用 ExpandoObject 并且必须像这样滚动我自己的：-

```
class MyObject : DynamicObject {
    dictionary<string, object> _properties = dictionary<string, object>();

    public override bool TryGetMember(GetMemberBinder binder, out object result) {
        string name = binder.Name.ToLower();

        return _properties.TryGetValue(name, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value) {
        _properties[binder.Name.ToLower()] = value;

        return true;
    }
} 
```

并且在我拥有的类层次结构中更进一步

```
class MyNewObject : MyObject {
    public string Name {
        get {
            // do some funky stuff
        }
        set {
            // ditto
        }
    }
} 
```

这非常好，因为现在我可以执行以下操作：-

```
dynamic o = MyNewObject();

o.Age = 87;     // dynamic property, handled by TrySetMember in MyObject
o.Name = "Sam"; // non dynamic property, handled by the setter defined in MyNewObject 
```

但以上假设我在编译时知道属性（例如年龄、姓名）。

假设直到运行时我才知道它们会是什么。

如何更改上述内容以支持我只会在运行时知道的属性？

基本上我想我要问的是如何调用直接调用 TrySetMember 的代码，以便它要么创建一个新属性，要么在已定义的情况下使用 getter/setter。

**最终解决方案如下：-**

```
using System.Dynamic;
using Microsoft.CSharp.RuntimeBinder;
using System.Runtime.CompilerServices;

class MyObject : DynamicObject {
    Dictionary<string, object> _properties = new Dictionary<string, object>();

    public object GetMember(string propName) {
        var binder = Binder.GetMember(CSharpBinderFlags.None,
              propName, this.GetType(),
              new List<CSharpArgumentInfo>{
                       CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)});
        var callsite = CallSite<Func<CallSite, object, object>>.Create(binder);

        return callsite.Target(callsite, this);
    }

    public void SetMember(string propName, object val) {
        var binder = Binder.SetMember(CSharpBinderFlags.None,
               propName, this.GetType(),
               new List<CSharpArgumentInfo>{
                       CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
                       CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)});
        var callsite = CallSite<Func<CallSite, object, object, object>>.Create(binder);

        callsite.Target(callsite, this, val);
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result) {
        string name = binder.Name.ToLower();

        return _properties.TryGetValue(name, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value) {
        _properties[binder.Name.ToLower()] = value;

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T02:04:59.313

尽管 c# 编译器正在将动态关键字用法转换为使用字符串名称的 dlr 调用，但如果没有编译器的帮助，这些 API 很难直接使用。开源框架[Dynamitey](https://github.com/ekonbenefits/dynamitey)（可通过 nuget 作为 PCL 库获得）封装了 dlr API，以便您可以轻松调用[Impromptu.InvokeSet(target,name,value)](https://github.com/ekonbenefits/dynamitey/wiki/UsageReallyLateBinding#dynamic-invokesetobject-target-string_or_invokemembername-name-object-value)。

```
using Dynamitey;
...

dynamic o = MyNewObject();

Dynamic.InvokeSet(o,"Age" ,87); 
Dynamic.InvokeSet(o,"Names" ,"Same); 
```

Getter 和 Setter 是直接使用实际 Microsft API 最简单的方法，因此如果您不想使用 3rd 方框架，那么也可以选择使用[源代码](https://github.com/ekonbenefits/dynamitey/blob/master/Dynamitey/Internal/Optimization/InvokeHelper-Regular.cs#L472)。

```
using Microsoft.CSharp.RuntimeBinder;
using System.Runtime.CompilerServices;
...

dynamic o = MyNewObject();
var binder = Binder.SetMember(CSharpBinderFlags.None,
                   "Age",
                   typeof(object),
                   new List<CSharpArgumentInfo>{
                           CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
                           CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
                                               });

  var callsite = CallSite<Func<CallSite, object, object, object>>.Create(binder);

  callsite.Target(callsite,o,87);

  var binder2 =Binder.SetMember(CSharpBinderFlags.None,
                   "Name",
                   typeof(object),
                   new List<CSharpArgumentInfo>{
                           CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
                           CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
                                               });
  var callsite2 = CallSite<Func<CallSite, object, object, object>>.Create(binder2);

  callsite2.Target(callsite2,o,"Sam"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T14:55:48.210

> 但以上假设我在编译时知道属性（例如年龄、姓名）。
> 
> 假设直到运行时我才知道它们会是什么。

那么 C# 4 中的动态类型对你一点帮助都没有，你还不如直接使用`Dictionary<string, object>`.

与其*假设*这`dynamic`就是答案，我建议您仔细查看您的要求，并找出您真正想要实现的目标。一旦你有了一组明确的需求，实现它们就会更容易。

你*可能会*发现你只需要 make`MyObject`也实现`IDictionary<string, object>`like `ExpandoObject`dos ......虽然问题是如果你想从字典中*派生*其他类`MyObject`并通过字典公开它们的属性，那将变得更加棘手。

# .net - 翻译表达式树时如何推断括号的使用？

> ID：12057519
> 
> 赞同：8
> 
> 时间：2012-08-21T14:49:12.397
> 
> 标签：.net, translation, expression-trees, parentheses, inorder

我正在将表达式树转换为类似于中缀符号的格式；我不是在评估树或执行它的操作。树包含逻辑和关系操作，我想在翻译过程中以智能的方式发出括号。

为了说明，请考虑以下人为的表达式：

```
a < x & (a < y | a == c) & a != d 
```

如果我按顺序遍历这个表达式产生的表达式树，那么我会打印出下面的表达式，这是不正确的。

```
a < x & a < y | a == c & a != d
// equivalent to (a < x & a < y) | (a == c & a != d) 
```

或者，我可以再次执行中序遍历，但在处理二进制表达式之前和之后发出括号。这将产生以下正确的表达式，但有几个多余的括号。

```
(((a < x) & ((a < y) | (a == c))) & (a != d)) 
```

是否有一个表达式树遍历算法可以产生最佳括号表达式？

作为参考，这是[`ExpressionVisitor`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)我用来检查树的片段。

```
class MyVisitor : ExpressionVisitor
{
    protected override Expression VisitBinary(BinaryExpression node)
    {
        Console.Write("(");

        Visit(node.Left);
        Console.WriteLine(node.NodeType.ToString());
        Visit(node.Right);

        Console.Write(")");

        return node;
    }

    // VisitConstant, VisitMember, and VisitParameter omitted for brevity.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:17:27.940

我接受了[Dialecticus 的答案，](https://stackoverflow.com/a/12058355/131407)因为它为实现该算法提供了良好的基础。这个答案的唯一问题是它要求`VisitBinary()`方法知道它的父调用者作为方法参数，这是不可行的，因为这些方法是基方法的重载。

我提供了以下解决方案，它使用类似的算法，但应用检查以在表达式树的子节点的父调用中发出括号。

```
class MyVisitor : ExpressionVisitor
{
    private readonly IComparer<ExpressionType> m_comparer = new OperatorPrecedenceComparer();

    protected override Expression VisitBinary(BinaryExpression node)
    {
        Visit(node, node.Left);
        Console.Write(node.NodeType.ToString());
        Visit(node, node.Right);

        return node;
    }

    private void Visit(Expression parent, Expression child)
    {
        if (m_comparer.Compare(child.NodeType, parent.NodeType) < 0)
        {
            Console.Write("(");
            base.Visit(child);
            Console.Write(")");
        }
        else
        {
            base.Visit(child);
        }
    }

    // VisitConstant, VisitMember, and VisitParameter omitted for brevity.
} 
```

优先级比较函数实现为`IComparer<ExpressionType>`，它应用 C#[运算符优先级](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)规则。

```
class OperatorPrecedenceComparer : Comparer<ExpressionType>
{
    public override int Compare(ExpressionType x, ExpressionType y)
    {
        return Precedence(x).CompareTo(Precedence(y));
    }

    private int Precedence(ExpressionType expressionType)
    {
        switch(expressionType) { /* group expressions and return precedence ordinal * }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:33:12.090

尝试这样的事情，假设它`node.NodeType`是 type ，并且如果第一个参数在第二个参数之前`NodeType`，该函数存在并返回 true。`Precedes`

```
protected override Expression Visit(BinaryExpression node, NodeType parentType)
{
    bool useParenthesis = Precedes(parentType, node.NodeType);

    if (useParenthesis)
        Console.Write("(");

    Visit(node.Left, node.NodeType);
    Console.WriteLine(node.NodeType.ToString());
    Visit(node.Right, node.NodeType);

    if (useParenthesis)
        Console.Write(")");

    return node;
} 
```

# c++ - Oracle OCI 不查询缓存结果

> ID：12057520
> 
> 赞同：0
> 
> 时间：2012-08-21T14:49:17.713
> 
> 标签：c++, database, oracle, caching, oracle-call-interface

我正在开发一个 C++ 程序，使用 OCI 从 Oracle 数据库中查询一些结果集。我发现即使我用“ `update table set col=xxx where xxx`”手动更新了行，结果集也会被缓存。OCI 调用仍在获取旧数据。这种缓存是如何发生的？有没有办法禁用它？如何检查缓存是否真的发生？通过检查执行计划？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:30:50.693

当您在单独的会话（您的 SQL*Plus 会话）中进行更改时，这些更改仅在您进行更改时对您的当前会话（您的 OCI 应用程序）可见`commit`。在您`commit`在 SQL*Plus 中执行事务之前，您将继续看到该行的当前版本，而不是您在 SQL*Plus 会话中更改的版本。您的 OCI 应用程序使用默认的事务隔离，`READ COMMITTED`因此您只能读取已提交的数据。

需要注意的一件事是，如果您从 OCI 应用程序打开游标，则从游标句柄获取的数据是在打开游标时存在的数据。因此，如果您在 OCI 中打开游标，在 SQL*Plus 中提交更改，然后从 OCI 获取数据，您的 OCI 应用程序将看不到在 SQL*Plus 中提交的更改。您必须重新打开游标才能看到新提交的行。

从技术上讲，这不是缓存。相反，这就是 Oracle 的多版本读取一致性的工作方式。假设默认事务隔离级别，每次打开游标时，都会捕获当前的 SCN（系统更改号），并检索到该 SCN 的数据。如果自该 SCN 以来某个块已更改（无论是否已提交），Oracle 会将该更改的 UNDO 向量应用于该块，然后再将其返回到您的会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:34:28.330

是的，您需要在 SQL*Plus 或`SET AUTOCOMMIT ON`.

查看查询计划将清楚地显示您是否正在使用客户端结果缓存，您将`RESULT CACHE`在`Operation`列中看到。

# c++ - debian 和 std::thread c++ 的即时分段错误

> ID：12057525
> 
> 赞同：4
> 
> 时间：2012-08-21T14:49:29.957
> 
> 标签：c++, multithreading, debian, stdthread

有这个问题 - 在标题..

我有这个代码：

```
#include <thread>
#include <iostream>

void my_thread_func()
{
    std::cout<<"hello"<<std::endl;
}

int main()
{
    std::thread t(my_thread_func);
    t.join();
} 
```

取自网络某处。编译器选项-pthread -std=gnu++0x（也试过-std=c++0x），我有段错误。一切都在 vmBox 上的 Debian 上。我之前已经启动了其他代码，并且它们有效。突然，我在所有工作应用程序中使用 std::thread 的线程出现了段错误。

编辑：这是来自 gdb：

```
(gdb) where
#0  0x00000000 in ?? ()
#1  0x08048dc9 in thread<void (*)()> (this=0xbffff3fc, 
    __f=0x8048b9f <my_thread_func()>) at /usr/include/c++/4.4/thread:129
#2  0x08048bea in main () at ../test.cpp:18 
```

（当我使用 std::thread t(&ClassName::my_thread_func,ptr) 启动更高级的应用程序时，错误是相同的，但其他行 [thread:133]）

我在网上搜索，但没有找到合适的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:10:02.197

编译`g++ -std=c++0x -lpthread`。注意`l`之前的`pthread`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:11:24.357

Gcc 4.4 对 C++11 特性的支持极其有限，尤其是在线程领域。由于库尚未准备好，我在 gcc 4.4 和 4.5 中看到了很多与线程相关的崩溃。

我非常有信心这是一个编译器“错误”*，并建议您至少升级到 gcc 4.7。

*"bug" 因为 gcc 4.4 从未声称完全支持`std::thread`，因此您不能真正期望它能够工作。

**编辑**：我刚想到的一件事是，有时静态链接到 glibc 和/或 libpthread 在那些旧版本中不起作用。

# c# - 如何在 asp.net 应用程序中有多个 bin 文件夹？

> ID：12057526
> 
> 赞同：2
> 
> 时间：2012-08-21T14:49:31.610
> 
> 标签：c#, asp.net, iis, web-config, bin

我有一个位于 C:/MainApp 的 asp.net 应用程序，它有一个 bin 文件夹。在 IIS 中，我已将其配置为 Web 应用程序，并且可以运行我的测试页面。

现在，我有 2 个带有自己 dll 的 Web 服务应用程序，出于某些原因，我不想将这些 dll 部署在主 bin 文件夹 c:/MainApp/Bin 中，请不要问为什么！这 2 个子应用程序需要托管在同一个 MainApp 下，而无需为每个子应用程序创建新的虚拟文件夹。

所以，

```
c:/MainApp
c:/MainApp/bin
c:/MainApp/SubApp1/bin
c:/MainApp/SubApp2/bin 
```

如何配置 webconfig 以便我的 SubApp 文件夹可以拥有自己的 bin 文件夹？

如果是这样，它们是否也会在运行时从 MainApp bin 文件夹继承？

非常感谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:59:16.757

您可以将 assemblyBinding 元素添加到 web.config 以设置多个“bin”路径：

```
<configuration>
   <runtime>   
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="bin;SubApp1\bin;SubApp2\bin"/>
      </assemblyBinding>
   </runtime>   
</configuration> 
```

这将导致您的主 Web 应用程序使用`probing`元素中所有 bin 路径中的 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T08:31:03.030

1-在 IIS 的网站**根文件**夹中自己创建一个 Bin 文件夹
2- 在您的项目中搜索 *.dll 并将 DLL 粘贴到步骤 1 中创建的 Bin 文件夹中（它会在内部 bin 文件夹中找到所有 dll）

我已经修复了我在 IIS 中托管的 asp.net ckfinder + ckeditor 应用程序中丢失的程序集以进行测试

# javascript - 检查空地图

> ID：12057527
> 
> 赞同：15
> 
> 时间：2012-08-21T14:49:32.770
> 
> 标签：javascript

我有一个有趣的问题，我确信很容易解释，但解释是我无法理解的。

javascript 中的未定义或空对象等于 false。

```
var x;
alert(!x); //returns true
alert(x==true); //returns false 
```

一个空的数组对象呢？这相当于真还是假？

```
var x = [];
alert (x==true); //returns false
alert (!x); //returns false 
```

如果它等于true，我如何检查它是否为非空？我希望做

```
if (!x) {
    //do stuff
} 
```

我尝试检查`x.length`，但我将此对象用作地图：

```
var x = [];
alert(x.length); //returns 0
x.prop = "hello"; 
alert(x.length); //still returns 0 
```

如何检查我的地图是否为空？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T14:52:24.080

这并不像看起来那么容易，您必须检查对象是否具有至少一个属性。

jQuery[`isEmptyObject`](http://api.jquery.com/jQuery.isEmptyObject/)为此提供了：

```
function isEmptyObject( obj ) {
    for ( var name in obj ) {
        return false;
    }
    return true;
} 
```

示例用法：

```
> var x = [];
> x.prop = "hello"; 
> isEmptyObject(x);
false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T14:52:38.093

有点困惑，因为您似乎在问题中混合了对象和数组。希望这可能有助于为您清除它。

一个空数组的计算结果为真：

```
!![] //true 
```

但是整数 0 的计算结果为 false，所以你可以这样做：

```
!![].length //false 
```

所以：

```
if([].length) {
   //array has 1 element at least
} else {
  //array has 0 elements
} 
```

但是，您似乎确实使数组和对象感到困惑。在 JavaScript 中，我们有对象：

```
var x = {};
x.foo = "bar";
x.baz = 2; 
```

我们有数组：

```
var x = [];
x.push("foo");
x.length //1 
```

你不能做你在开瓶器中所做的事情：

```
var x = []; //x is an array
x.foo = "bar"; //can't do this on an array
x.length; // 0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-10T12:27:45.300

如果您使用的是 JQuery

```
jQuery.isEmptyObject(obj) 
```

如果没有，你可以实现你自己的

```
isEmptyObject = function(obj) {
for (key in obj) {
    if (obj.hasOwnProperty(key)) return false;
}
return true;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-08T20:00:38.997

如果您使用的是正确的 JS`Map<K, V>`对象，您可以简单地使用[Mozilla Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)上的 Map API 。

具体来说，有一个`Map.prototype.size`属性和`Map.prototype.entries()`方法，我相信它会返回一个`[]`键数组。如果是这样，`length 0`那么地图是空的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T15:12:32.800

首先，您使用的是数组而不是地图。地图将是一个对象实例：

```
var x = {};
x.prop = "5"; 
```

您的代码是有效的，因为数组也是对象。[您可以按照此问题](https://stackoverflow.com/questions/3426979/javascript-checking-if-an-object-has-no-properties-or-if-a-map-associative-arra)的回答检查您的对象是否为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-26T20:16:12.533

*如果为空列表将给出 true ( `if (array1)`)。

*`x.prop`并没有真正向数组添加任何元素，它只是将值“hello”分配给数组的属性 x，但数组仍然是空的。所以你仍然应该使用`.length`来检查数组是否为空。

# c - 错误 C28：多个存储类

> ID：12057536
> 
> 赞同：0
> 
> 时间：2012-08-21T14:49:56.803
> 
> 标签：c, keil

我正在使用 Keil。我有以下文件“Driver.h”和“Driver.c”。

> 驱动程序.h

```
extern static int Status[5]; 
```

我知道上面的说法是错误的。全局声明时静态更改的含义。但是，我仍然想声明一个变量，它是一个数组。它应该可以被另一个文件使用，并且它应该具有不应该改变值的范围，除非我们改变它。

> 驱动程序.c

* * *

> 整数状态[5]={0x00,0x00,0x00,0x00,0x00}；

错误消息如下所示。

> 错误 C28：多个存储类

你能帮我么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:52:51.423

删除`static`, 以声明一个位于外部的数组。然后确保项目中的一个 C 文件确实定义了它，使用`int Status[5];`.

不确定您所说的“除非我们更改它，否则它应该具有不应更改的值的范围”，当然，除非您更改它，否则它不会更改......它将是全局的，从所有模块和函数中可见程序。

# asp.net-mvc - 在服务器上安装 ASP.NET MVC 4

> ID：12057540
> 
> 赞同：30
> 
> 时间：2012-08-21T14:50:14.653
> 
> 标签：asp.net-mvc, asp.net-mvc-4

如何在*服务器*上安装 ASP.NET MVC 4 。Web 平台安装程序坚持安装各种 Visual Studio 2010 的东西。我没有看到“仅限服务器”安装。例如，它要安装“Visual Studio 2010 Core SP1”和“Visual Web Developer Express”。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-21T14:53:07.000

[从http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)获取独立安装程序

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-19T14:58:51.350

最安全的做法是在引用的属性窗口中将您对 System.Web.Mvc 的引用标记为“copy local = true”。当您进行部署时，它将被复制到您的 bin 文件夹中。

感觉有点倒退，但你去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:52:02.703

我会在本地主机上安装和运行，然后使用 Visual Studio 的“发布”将其发布到 Web 服务器。您可以通过[http://www.asp.net/mvc](http://www.asp.net/mvc)安装它。如果您询问如何在 IIS 上安装它，请阅读以下内容：

[http://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds。 aspx](http://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx)

# asp.net-mvc - ASP.NET MVC 路由：在开发环境中工作，但并不总是在生产环境中工作

> ID：12057546
> 
> 赞同：0
> 
> 时间：2012-08-21T14:50:23.310
> 
> 标签：asp.net-mvc, deployment, asp.net-mvc-routing

我的开发环境文件夹结构与我的产品环境不同。我的产品环境中 url 的开头看起来像：/dirs/xxx/ctrlr/action/id 我的开发环境 url 没有 /dirs/xxx 节点；它们看起来像：/ctrlr/action/id

当我发布我的项目并在 prod 环境中运行时，有时我的代码会正确映射附加的 prod url 节点，有时它不会并且我得到 404。

我正在检查我的项目中 url 映射正确发生的部分，并与那些没有发生的部分进行比较，但到目前为止我还没有找到解决方案。如果您能提供帮助，将不胜感激。如果我错过了已经回答了这个问题的 StackOverflow 博客，我深表歉意；我已经用谷歌搜索了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:56:03.483

您是否尝试过设置您的开发环境以匹配您的生产环境？

右键单击您的 MVC 项目，然后编辑属性，然后选择 web。

![在此处输入图像描述](../Images/4110d96837dfbade0922f5885925da7a.png)

在此屏幕截图中，我使用的是 IIS Express - 将您的 URL 目录更改为 /dirs/xxxx/。如果您使用的是 cassini，则可以将虚拟路径更改为 /dirs/xxx/

这应该会暴露您遇到的路由问题。通常对我来说，它与 javascript 或其他一些不通过路由引擎的函数有关，我没有注意到生成错误的 url。

# javascript - JavaScript eval() 和 const

> ID：12057551
> 
> 赞同：5
> 
> 时间：2012-08-21T14:50:42.560
> 
> 标签：javascript, constants, eval, redeclaration

我刚刚在使用 Mozilla Rhino 作为 JavaScript 引擎时偶然发现了一个奇怪的 JavaScript 错误。

这一行脚本会引发错误：

```
eval("const a = 5;"); 
```

错误是：

```
TypeError: redeclaration of var a. 
```

如果该行被执行多次，我预计会出现这个错误 - 但它只执行一次，因为这一行是整个程序。

谁能解释一下，为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-21T15:02:00.280

javascript 中没有 const 类型。您将不得不改用它

eval("var a = 5;");

# jar - 在对它进行一些修改后创建一个 jar 文件

> ID：12057554
> 
> 赞同：1
> 
> 时间：2012-08-21T14:50:49.193
> 
> 标签：jar

我已经下载了 bouncycastle.jar 文件，将 X509Util.class 从私有更改为公共现在我想再次重新创建 jar，如何重新创建 jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:56:26.167

这取决于它有多复杂。在大多数情况下，您只需重新压缩所有内容并将 zip 文件扩展名重命名为`.jar`. 如果有清单文件，请务必先包含清单文件。JDK 还提供了一个用于创建 jar 文件的命令行工具。

如果被修改的代码是签名的，那么用签名重新创建 jar 显然是不可能的。

# php - 如何为 SHA512 随机加盐

> ID：12057557
> 
> 赞同：1
> 
> 时间：2012-08-21T14:51:03.090
> 
> 标签：php, passwords, hash, sha512

目前我使用 php5 对我的密码进行哈希处理。我想知道如何更改 SHA512 的随机盐。在我将以下代码从 sha1 更改为 sha 512 后，我的哈希失败。以下是我对密码进行哈希处理的代码：

```
public function hashSSHA($password) {

    $salt = mhash(rand());
    $salt = substr($salt, 0, 15);
    $encrypted = base64_encode(bin2hex(mhash(MHASH_SHA512, $password . $salt, true) . $salt));
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(bin2hex(mhash(MHASH_SHA512, $password . $salt, true) . $salt));

    return $hash;
} 
```

我设法注册了一个新用户，但是当我尝试使用注册用户登录时，它会告诉我我的用户名或密码在哪里。所以我想知道我在哪里做错了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:09:43.040

[rand()](http://php.net/manual/en/function.rand.php)应该在每次使用时具有不同的值，因此当用户注册和尝试登录时，盐值是不同的。尝试给盐值一个静态值，例如'sdfj3209r34r4'，看看它是否有效。这很弱，因为每个人都会有相同的盐。

另一种选择是使用对每个人都不常见但也是“静态”的东西。这意味着它与每个用户不同，但对每个用户来说都是相同的。

后者的一个示例是使用密码的 md5 作为 salt、用户名、用户所在的城市或任何您知道它不会更改的可用数据（如果更改，请请求密码和像许多网站一样创建新的哈希值）。直到现在回答这个问题我才意识到这一点，这可能是 www.hotmail.com 等地方在您更改某些“私人”信息时要求输入密码的另一个原因，因为他们必须重建哈希。

在其他 stackoverflow 问题中有很多关于盐的信息。

编辑。尝试这个：

```
public function hashSSHA($password) {

    $salt = mhash(MHASH_SHA512, $password);
    $encrypted = base64_encode(bin2hex(mhash(MHASH_SHA512, $password . $salt, true) . $salt));
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(bin2hex(mhash(MHASH_SHA512, $password . $salt, true) . $salt));

    return $hash;
} 
```

另外，您确定您在 checkhashSSHA 中的 $salt 与 hashSSHA 所做的相同吗？因为变量通常是本地的（它们只在同一个函数内工作）。这意味着您需要`$salt = mhash(MHASH_SHA512, $password);`在函数外部具有相同的脚本来创建盐。如果你这样做，这真的是多余的，如果你不这样做， $salt 在第二个函数中没有任何价值。请提供更多代码。

# c# - 无法从 C# 执行已编译的 matlab 可执行文件

> ID：12057558
> 
> 赞同：1
> 
> 时间：2012-08-21T14:51:08.847
> 
> 标签：c#, matlab, .net-3.5

对于我正在处理的模块，我收到了一个编译的 Matlab 可执行文件（注意它是一个独立的 .exe，而不是 .dll 或类似的东西），我必须执行它来为我做一些分析工作。

工作流程是创建一个输入文件（简单的 .csv 格式），执行 .exe 并解析由 Matlab 可执行文件生成的输出文件（也是 .csv）。

我已经测试了输入文件生成和输出文件解析，如果我自己这么说的话，它们工作得很好。但是我在运行 Matlab 可执行文件时遇到了一些麻烦。我安装了正确的 MCR，我可以双击可执行文件，它按预期运行。但是使用以下代码，可执行文件无法正确执行：

```
 var analyzer = new Process
    {
        StartInfo =
        {
            FileName = Path.Combine(WorkDirectory, "analyzer.exe"),
            CreateNoWindow = false,
            WindowStyle = ProcessWindowStyle.Hidden,
            UseShellExecute = false, RedirectStandardError = true, RedirectStandardOutput = true // These lines were added for debugging purposes
        }
    };
    analyzer.Start();
    punProcess.WaitForExit();
    string debuginfo = punProcess.StandardOutput.ReadToEnd();
    string debuginfo2 = punProcess.StandardError.ReadToEnd(); 
```

我从“debuginfo”中提取的文本如下：

```
 {Warning: Name is nonexistent or not a directory: C:\MATLAB\R2009b\toolbox\pun.} 
     {> In path at 110
        In addpath at 87
        In startup at 1} 
     {Warning: Name is nonexistent or not a directory:
     C:\MATLAB\R2009b\toolbox\pun\pun.} 
     {> In path at 110
        In addpath at 87
        In startup at 2} 
```

我从“debuginfo2”中提取的文本是：

```
 {Error using textscan
     Invalid file identifier.  Use fopen to generate a valid file identifier.

     Error in readin (line 4)

     Error in Analyzer (line 12)

     } 
     MATLAB:FileIO:InvalidFid 
```

这些问题是由于我的代码造成的吗？它们是由于通过 C# 使用它的上下文吗？还是分析仪本身有问题？我无权访问分析器可执行文件的源代码，因此无法调试该部分。

发生的错误，可能是因为给出的警告，并且我错过了某种引用（可能是对 MCR？），当我双击它（或从 cmd 运行它时）隐式可用，也像魅力）？

工作目录签出。我可以看到以前的 C# 代码在那里创建的输入文件，以及在那里复制的可执行文件。所以问题不是由于在正确的位置准备正确的文件时出错。

干杯，Xilconic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:40:08.437

As Dmitriy Reznik commented, specifying the WorkingDirectory of the StartInfo solved the problem I was having. Is should look like this:

```
var analyzer = new Process
{
    StartInfo =
    {
        FileName = Path.Combine(WorkDirectory, "analyzer.exe"),
        WorkingDirectory = WorkDirectory
        CreateNoWindow = false,
        WindowStyle = ProcessWindowStyle.Hidden,
        UseShellExecute = false, RedirectStandardError = true, RedirectStandardOutput = true // These lines were added for debugging purposes
    }
};
analyzer.Start();
punProcess.WaitForExit(); 
```

# pdf - 在 PDF 中嵌入 Apache 2 许可下的字体 - 是否允许？

> ID：12057562
> 
> 赞同：3
> 
> 时间：2012-08-21T14:51:18.257
> 
> 标签：pdf, fonts, licensing

我想在应用程序生成的 PDF 文档中嵌入 Droid 字体（发送给客户的发票）。这些字体是根据 Apache License 2.0 分发的。

这样做合法吗？我需要在文档中指定字体版权吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:54:40.053

我不是律师，但是……是的：当我阅读并理解 Apache 2 许可证时，它允许您将 Droid 字体嵌入 PDF 文档中。

此外，您不需要以人类可读的形式单独指定文档中的字体版权——无论如何，此许可证的简短版本将成为嵌入在 PDF 中的字体文件（完整集或子集）的一部分。

# ruby-on-rails - MongoDB 获取分组数据的所有记录

> ID：12057565
> 
> 赞同：1
> 
> 时间：2012-08-21T14:51:27.087
> 
> 标签：ruby-on-rails, mongodb, mongoid, grouping

我试图设置一个简单的要点来解释我的问题以及我想要[什么](https://gist.github.com/53039e8b3f209759d091)。

它绝对不会复制我的确切文档结构（这是完全不同的），但会帮助您轻松理解我的问题。

更新：

Gist 被意外删除，因此用问题更新了问题：

假设我有这个结构

```
 _id  name  birthdate
    ...  john  10 aug
    ...  doe   11 aug
    ...  foo   11 aug
    ...  bar   12 aug
    ...  baz   12 aug
    ...  bak   12 aug
    ...  buzz  13 aug 
```

我想找到所有具有相同生日的文档，所以我的结果集会在那里：

```
 _id  name  birthdate
    ...  doe   11 aug
    ...  foo   11 aug
    ...  bar   12 aug
    ...  baz   12 aug
    ...  bak   12 aug 
```

我还想以某种方式获取每个文档的日期共享记录的 count() 。所以，像这样

```
 _id  name  birthdate  count
    ...  doe   11 aug     2
    ...  foo   11 aug     2
    ...  bar   12 aug     3
    ...  baz   12 aug     3
    ...  bak   12 aug     3 
```

到目前为止，我所尝试的只是 mapReduce，但我只能得到：

```
 _id     value
    11 aug  {count: 2}
    12 aug  {count: 3} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:20:34.490

使用MongoDB 2.2 中的新[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)可以更轻松地实现您的结果。

下面的示例使用 MongoDB shell，但类似的方法也适用于 Mongoid。

假设数据设置为：

```
db.users.insert({'name': 'john', 'birthdate':'10 aug'});
db.users.insert({'name': 'doe',  'birthdate':'11 aug'});
db.users.insert({'name': 'foo',  'birthdate':'11 aug'});
db.users.insert({'name': 'bar',  'birthdate':'12 aug'});
db.users.insert({'name': 'baz',  'birthdate':'12 aug'});
db.users.insert({'name': 'bak',  'birthdate':'12 aug'});
db.users.insert({'name': 'buzz', 'birthdate':'13 aug'}); 
```

以下是聚合命令的注释示例：

```
db.users.aggregate(
    // Group and count documents by same birthdate
    { $group: {
        '_id' : '$birthdate',
        'name': { $addToSet: '$name' },
        'count': { $sum: 1 },
    }},

    // Only match documents with at least one duplicate
    { $match : {
        'count' : { $gt: 1 }
    }},

    // Unwind the grouped documents so there is one per name
    { $unwind : '$name' },

    // Sort results by _id and name
    { $sort : {
        '_id': 1,
        'name': 1,
    }}
) 
```

..和结果：

```
{
    "result" : [
        {
            "_id" : "11 aug",
            "name" : "doe",
            "count" : 2
        },
        {
            "_id" : "11 aug",
            "name" : "foo",
            "count" : 2
        },
        {
            "_id" : "12 aug",
            "name" : "bak",
            "count" : 3
        },
        {
            "_id" : "12 aug",
            "name" : "bar",
            "count" : 3
        },
        {
            "_id" : "12 aug",
            "name" : "baz",
            "count" : 3
        }
    ],
    "ok" : 1
} 
```

# json - 由于 Node.js 包版本问题，推送到 Heroku 引发错误

> ID：12057575
> 
> 赞同：0
> 
> 时间：2012-08-21T14:51:40.563
> 
> 标签：json, node.js, heroku, terminal, express

我正在尝试将我的代码推送到我的 heroku 应用程序，但是每当我使用下面的 package.json 运行“git push heroku master”时，它都会给我错误。错误显示在下面链接的终端对话框中。希望有人可以提供帮助。

包.json：

```
{
  "name": "learn-express-server",
  "version": "0.0.1",
  "dependencies": {
    "express": "3.0.0",
    "jade": "0.27.2",
    "mongodb": "1.1.4",
    "mongoose": "3.0.2"
  },
  "engines": {
    "node": "0.8.4",
    "npm": "1.1.49"
  }
} 
```

终端响应：

```
http://d.pr/n/czqT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:26:51.897

您在本地计算机上安装了哪个版本？尝试`npm ls express`

Express 还没有一个版本`3.0.0`，它仍然是一个候选版本。将您的确切版本放在`package.json`, 或 write`"latest"`中，或使用`git://`uri 或一系列版本。或者只是将您的快递提交给版本控制。（这是节点应用程序中可接受的样式。）

[http://www.mikealrogers.com/posts/nodemodules-in-git.html](http://www.mikealrogers.com/posts/nodemodules-in-git.html)

> 但这不再是 Ruby 或 Python，这是 node.js，我们在模块方面做得更好。如果您有要部署的应用程序，请将所有依赖项签入 node_modules。如果您使用 npm do deploy，只需为这些模块定义 bundleDependencies。如果您有需要编译的依赖项，您仍然应该签入代码并在部署时运行 $ npm rebuild。

# iphone - 如何判断应用程序是由于 Titanium 中的推送通知而打开还是恢复？

> ID：12057576
> 
> 赞同：5
> 
> 时间：2012-08-21T14:51:40.033
> 
> 标签：iphone, titanium, push-notification, apple-push-notifications, titanium-mobile

根据推送到达时应用程序是否打开，您如何在 Titanium 中以不同方式处理推送？

当推送通知进来并且我的应用程序正在运行时，我想弹出一条消息，将用户带到通知所指的项目。如果应用程序关闭，并且用户点击推送通知并导致应用程序打开，我想直接将用户带到该项目而不弹出。

Titanium 的 registerForPushNotifications 似乎只有一个回调，“回调”，无论推送到达时应用程序的状态如何，都会调用它。根据[收到推送通知时如何判断我的 iPhone 应用程序是否正在运行？](https://stackoverflow.com/questions/1998196/how-do-i-tell-if-my-iphone-app-is-running-when-a-push-notification-is-received)您可以在 Objective C 中使用 didReceiveRemoteNotification 和 didFinishLaunchingWithOptions，但 Titanium 似乎没有提供对它们的单独访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:41:42.870

如果用户来自通知，则“回调”功能将在“恢复”后立即触发。

因此，我将通过以下方式处理您的案件：

有一个变量来跟踪应用程序是否暂停（a la var is_paused = false; 运行时）。is_paused 将在 Ti.App 'pause' 事件时切换为 true，并在 Ti.App 'resume' 事件时切换回 false 状态并超时（1 秒即可）。

然后，您可以通过检查 is_paused var 是真还是假来在回调函数中拥有不同的功能：

```
//in notification callback
if(is_paused){ 
   //user is coming from background (do your thing automatically)
}else{
  //user is in app (display the alert)
} 
```

# visual-studio - 显示打开文件的 Visual Studio 插件

> ID：12057577
> 
> 赞同：0
> 
> 时间：2012-08-21T14:51:41.347
> 
> 标签：visual-studio

是否有列出当前解决方案中所有打开文件的 Visual Studio 插件？我正在设想一个弹出窗格，它只是按 alpha 顺序列出打开的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:52:54.827

单击选项卡栏右侧的向下箭头，或按`Ctrl`+ `Alt`+`↓`

或者，单击窗口菜单，或按`Alt`+ `W`。

# titanium-mobile - Titanium studio 我如何提交文本字段？

> ID：12057579
> 
> 赞同：1
> 
> 时间：2012-08-21T14:51:48.113
> 
> 标签：titanium-mobile

我正在钛工作室开发移动应用程序，无法获取文本字段以本地提交

这是我的代码：

```
 var textField1 = Ti.UI.createTextField({
  borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
  color: '#336699',
  width: 250, height: 60
  });

   textField1.addEventListener('return', function(data) {
   alert('form submitted: ' + data);
   });

  win1.add(textField1); 
```

我是钛工作室的新手，但我相信这应该可行。有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:13:21.357

仅当按下返回按钮时才会触发返回。所以我认为只要文本框失去焦点，你就可以获得这些值。

您可以通过以下方式获得价值：

```
textField1.addEventListener('blur',function(data){
    alert(data.source.value);
}); 
```

更多细节可以使用`alert(JSON.stringify(data));`

但这不会因为“返回”侦听器而被解雇。所以你也可以为“return”包含相同的代码。

```
textField1.addEventListener('return',function(data){
    alert(data.source.value);
    alert(JSON.stringify(data));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T11:26:30.093

```
var win = Titanium.UI.createWindow({
    title:"Configuring text field and text area keyboard types",
    backgroundColor:"#347AA9",
    exitOnClose:true
});

var submitButton = Titanium.UI.createButton({
    title:"Submit",
    height:24,
    width:60
});

var textField = Titanium.UI.createTextField({
    top:"25%",
    height:35,
    width:600,
    backgroundColor:"#ffffff",
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    hintText:"Type something",
    keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
    rightButton:submitButton
});

submitButton.addEventListener("click", function(e){
    //Pretend to submit the value of the text field
    //Be sure that you've typed something in!
    if(textField.value != ""){
        alert(textField.value); 
    }else{
        alert("Enter some text");
    }
});

//Add an event listener to the window that allows for the keyboard or input keys to be hidden if the user taps outside a text field
//Note: each text field to be blurred would be added below
win.addEventListener("click", function(e){
    textField.blur(); // Cause the text field to lose focus, thereby hiding the keyboard (if visible)
});

win.add(textField);

win.open(); 
```

# hibernate - Antlr 识别异常

> ID：12057584
> 
> 赞同：4
> 
> 时间：2012-08-21T14:52:00.543
> 
> 标签：hibernate, jpa, spring-mvc

尝试从数据库中获取数据时收到以下错误消息。

```
jpa.java.lang.NoClassDefFoundError: antlr/RecognitionException
    org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory.createQueryTranslator(ASTQueryTranslatorFactory.java:59)
    org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:103)
    org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:216)
    org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:194)
    org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1736)
    org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:285)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    $Proxy146.createQuery(Unknown Source)
    com.lkgarage.service.impl.ItemServiceImpl.getHotDeals(ItemServiceImpl.java:40)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy147.getHotDeals(Unknown Source)
    com.lkgarage.ui.GarageHomeController.loadGarageHome(GarageHomeController.java:31)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

正在尝试的查询是`from Item I where I.age > 10`

数据库连接不会有问题，我可以在有问题的情况下向它提交数据。

这个问题的原因可能是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-17T18:02:45.413

我知道这是一个旧的，但它出现在几个谷歌搜索。根据[这个](https://stackoverflow.com/questions/16508508/error-with-jpql)问题，您可能缺少相应的 ANTLR 库 jar 文件。我和你有同样的问题，我从[这里下载了](http://www.antlr3.org/download.html)[antlr-3.5.2-complete.jar](http://www.antlr3.org/download/antlr-3.5.2-complete.jar)并将它放在我的类路径中。这个版本里面有 antlr2 和 antlr3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T18:34:51.023

值得一提：

我遇到了同样的错误，问题出在我的清单文件中，antlr 行末尾没有空格；

因此，如果上面的答案对您没有帮助，请确保所有包含 jar 的清单行都以空格开头和结尾。您的清单文件还必须以换行符（空行）结尾。

# sql - SQL：获取连接中的最大元素？

> ID：12057588
> 
> 赞同：0
> 
> 时间：2012-08-21T14:52:08.583
> 
> 标签：sql, greatest-n-per-group

> **可能重复：**
> [获取列的最大值所在的行](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

我有两张桌子

```
1\. A table USER with a USER_ID, NAME, ...
2\. A table STATUS with a STATUS_ID, PEOPLE_FK (foreign key to USER_ID), LABEL, DATE_START... 
```

一个用户只能有一个活动状态。我使用 DATE_START 字段来保存用户所有状态的历史记录。我从不删除状态。如果我在 USER 和 STATUS 之间创建连接，我可以轻松地获得所有用户的所有状态。但我想创建一个查询来检索我所有的用户，他们只有最后的状态。可能吗 ？我应该用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:56:54.560

像这样加入：

```
SELECT *
FROM USER   U
JOIN STATUS S ON U.USER_ID = S.USER_ID
              AND NOT EXISTS (
                SELECT 1 
                FROM   STATUS S2
                WHERE  S2.USER_ID = S.USER_ID 
                AND    S2.START_DATE > S.START_DATE
              ) 
```

这只会加入那些不存在同一用户的其他状态且日期较新的状态记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:57:40.740

尝试

```
select * from user 
inner join 
(
   select * from status
   inner join 
      (select max(Date_start) as maxdate, status_id as id  
           from status group by Status_id)   d
   on status_id = d.id and Date_start = d.maxdate
)d1 
on userid =d1.People_fK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:59:05.263

我假设您使用的是 SQL-Server ：

您可以使用带有`ROW_NUMBER`功能的 cte：

```
WITH CTE AS
(
    SELECT U.USER_ID, U.NAME, U.DATE_START, S.STATUS
    ,   RN = ROW_NUMBER()OVER(PARTITION BY S.STATUS_ID ORDER BY U.DATE_START DESC)
    FROM USER U INNER JOIN STATUS S ON U.User_ID=S.PEOPLE_FK
)
SELECT * FROM CTE WHERE RN = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:59:24.980

```
select * from 
    user a, 
    status b 
where 
      a.user_id = b.poeple_id 
  and b.start_date = (select max(start_date) 
                             from status c 
                             where c.people_id=b.people_id) 
```

# python - 使用python解析特定列和特定行的数据文件

> ID：12057614
> 
> 赞同：0
> 
> 时间：2012-08-21T14:53:47.873
> 
> 标签：python, parsing

我有一个数据文件，其中包含以下格式的数据。我想根据 id 号将数据解析为 3 个不同的文件，并且只获取第 3、4、5、6 和 9 列。我该如何在 python 中做到这一点！？数据类似于以下示例，每列代表以下数量：

我只想根据相同的 ID 将具有 3 4 5 6 和 9 列的数据检索到 3 个单独的文件中（只是下图中黄色和蓝色的数字！）

```
density ID time x y z u v w dia 
```

![在此处输入图像描述](../Images/6b5542b82f2af3c7610209984d6856fc.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:23:09.670

如果每一列都用空格分隔，并且您知道“单元格”中不会有空格，那么您可以做一些非常简单的事情：

```
f=open('/path/to/file')
for li in f.readlines():
    data = li.strip().split(' ')
    print data 
```

`strip`将摆脱`\n`每行末尾的 ; 在这里我分开了，`' '`但你可以用任何东西来做，比如 tab `\t`。

`data[i]`将为您获取 column 的值`i`。

要写入文件，只需使用`open`选项`'w'`并使用`write()`函数。

# python - NSPipe - 如何将返回的数据转换为 NSArray

> ID：12057620
> 
> 赞同：1
> 
> 时间：2012-08-21T14:54:11.413
> 
> 标签：python, objective-c, cocoa, nstask

我的应用程序使用 NSTask 启动 Python 脚本，然后脚本通过 NSPipe 返回一个数组。我读取数据，将其粘贴在一个字符串中，然后显示它：

```
NSMutableData *data = [[NSMutableData alloc] init];
NSData *readData;

while ((readData = [readHandle availableData])&& [readData length]) {
    [data appendData: readData];
}

NSString *string = [[NSString alloc] 
                    initWithData: data 
                    encoding: NSUTF8StringEncoding]; 
```

没关系，但我意识到我真的需要将它保存为一个数组 - 而不是一个字符串。我找不到从数据（从 NSPipe 返回的数据）启动数组的方法。我怎样才能做到这一点？我发现最接近的可能是使用：

`[NSPropertyListSerialization dataWithPropertyList:format:options:error:]`

...但我本身不需要“财产清单”。我必须先将数据转换为 plist 吗？

**编辑：**我刚刚意识到它比我想象的要复杂。Python 返回一个字典数组，字典中有字符串。这些字符串可以有逗号和其他字符，所以我认为我不能使用“，”分隔符来分解它。

在 Python 中：

```
msg_set = []
msg_set = [
   dict(mts="t,s1", mfrom="f@ro,m1", msbj="msb,j1", mbody="bod,y1", mid="i,d1"),
   dict(mts="ts2", mfrom="from2", msbj="msb,j2", mbody="body2", mid="id2")
]
print msg_set # <- this is what python returns 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:56:53.300

如果返回的数据表示带有分隔符的数组，例如逗号`@","`，您可以将字符串拆分为数组，如下所示：

```
NSString *string = [[NSString alloc] 
                initWithData: data 
                encoding: NSUTF8StringEncoding];
NSArray *array = [string componentsSeparatedByString:@","]; 
```

您需要使用与发送方相同的分隔符。如果可以使用多个字符作为分隔符，您可能需要`componentsSeparatedByCharactersInSet:`改用：

```
NSArray *array = [string componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:40:02.107

您可以先将数据转换为 JSON（我看到了对 dasblinkenlight 答案的评论，但我已经输入了答案），然后将它们传递给 Cocoa。像这样的东西：

**蟒蛇端**

```
import json
#...
json.dumps(msg_set) # <- return this one instead 
```

**Objective-C 端**

```
NSString *myPythonJson = @""; // <- Whatever you got from python
NSError *error = nil;
id myObjectsFromJson = [NSJSONSerialization JSONObjectWithData:[myPythonJson dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:&error]; 
```

# c++ - "sf::Unicode::Text::text" 成员函数已定义或声明

> ID：12057623
> 
> 赞同：0
> 
> 时间：2012-08-21T14:54:16.343
> 
> 标签：c++, qt-creator, sfml

我最近设法为 qt creator 设置了 SFML，但是在编译下面的代码后，我得到了三个与我的程序无关的奇怪错误。我必须指定其他 C++ 程序运行良好。这是代码：

```
#include <SFML/System.hpp>
#include <iostream>

int main()
{
    sf::Clock Clock;
    while (Clock.GetElapsedTime() < 5.f)
    {
        std::cout << Clock.GetElapsedTime() << std::endl;
        sf::Sleep(0.5f);
    }

    return 0;
} 
```

错误如下：

```
f:\SFML-1.6\include\SFML\System\Unicode.hpp:82: error: C2535: 'sf::Unicode::Text::Text(const wchar_t *)' : member function already defined or declared

f:\SFML-1.6\include\SFML\System\Unicode.hpp:87: error: C2535: 'sf::Unicode::Text::Text(const std::wstring &)' : member function already defined or declared

f:\SFML-1.6\include\SFML\System\Unicode.hpp:99: error: C2535: 'sf::Unicode::Text::operator std::wstring(void) const' : member function already defined or declared 
```

知道可能是什么原因造成的吗？

**编辑：**

我还应该提到我从未接触过给出错误的文件。我所尝试的只是粘贴来自 SFML 网站的示例代码，这导致了上述错误。我相信我已经正确设置了 SFML。

**EDIT2：** 我使用的是 Windows XP SP3，Mingw 编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:19:08.447

我很久以前就遇到过这个问题，唯一对我有用的解决方案和解释（复制自我最初咨询的另一个论坛帖子）：

> QMake 将编译器选项设置`treat wchar_t as a built-in type`为 `false`，将`wchar_t`typedef 设置为`unsigned short`，这使得函数重载`unsigned short`并且`wchar_t`（如 `sf::Unicode::Text`构造函数）失败......
> 
> 我认为除了修改 SFML 源之外，唯一的解决方案是将您的 \mkspecs\win32-msvc2008\qmake.conf 文件中的选项“Zc:wchar_t”更改为“-Zc:wchar_t”。然后可能重新编译Qt。

我更改了我的配置文件并重新编译了 qt，它已经开始发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:24:14.187

根据[http://msdn.microsoft.com/en-us/library/dh8che7s%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/dh8che7s%28v=vs.80%29.aspx)

如果指定了 /Zc:wchar_t-，编译器会要求您定义 wchar_t 或包含定义它的众多头文件之一（例如 wchar.h）。通常，**wchar_t 被定义为 unsigned short**。

在 Visual Studio 开发环境中设置此编译器选项

```
Open the project's Property Pages dialog box. For details, see Modifying Project Settings.

Click the C/C++ folder.

Click the Language property page.

Modify the Treat wchar_t as Built-in Type property. 
```

所以问题在于 Config.hpp

```
typedef unsigned short Uint16; 
```

和这个 /Zc:wchar_t 选项 wchar_t 是

```
typedef unsigned short wchar_t; 
```

所以他们是平等的

# sql-server - “当工作成功时”和“当工作完成时”之间的区别

> ID：12057625
> 
> 赞同：4
> 
> 时间：2012-08-21T14:54:19.520
> 
> 标签：sql-server, sql-server-2008, tsql

作业通知选项“作业成功时”和“作业完成时”有什么区别。从外观上看，我假设“当作业完成时”选项包含作业成功和作业失败，而“当作业成功时”选项仅包含作业成功运行时。它是否正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T15:02:23.587

*   **当作业成功**完成时通知操作员。
*   **当作业未**成功完成时，作业未能通知操作员。
*   **作业完成**时通知操作员，无论完成状态如何。

[http://msdn.microsoft.com/en-us/library/ms191130.aspx](http://msdn.microsoft.com/en-us/library/ms191130.aspx)

# c# - Ajax 请求返回空，抛出错误

> ID：12057627
> 
> 赞同：0
> 
> 时间：2012-08-21T14:54:30.923
> 
> 标签：c#, ajax, json, handler

我正在调用返回 json 对象的处理程序，但响应导致`$.ajax()`调用在没有 responseText 的情况下命中错误函数。处理程序`response.ContentType`是应用程序/json。

ajax调用...

```
$.ajax({
    url: "http://localhost/_tools/ajax/getInstagramObject.ashx",
    type: 'GET',
    dataType: 'json',
    success: function (msg) {
        alert(msg.length);
    },
    error: function (e) {
        alert(e.responseText);
    }
}); 
```

这是处理程序返回的 json

```
{"info":[{"userName":"jamie_cahs","id":"42763829","name":"Jamie Rose","data":[{"images":{"lowResolution":{"url":"http://distilleryimage4.s3.amazonaws.com/de9c1e74bf4511e1abd612313810100a_6.jpg","width":306,"height":306},"thumbnail":{"url":"http://distilleryimage4.s3.amazonaws.com/de9c1e74bf4511e1abd612313810100a_5.jpg","width":150,"height":150},"standardResolution":{"url":"http://distilleryimage4.s3.amazonaws.com/de9c1e74bf4511e1abd612313810100a_7.jpg","width":612,"height":612}},"caption":{"text":"#boston"},"link":"http://instagr.am/p/MUsh6dO9ls/"}]} 
```

和处理程序...

```
public void ProcessRequest(HttpContext context) {
    HttpResponse httpResponse = context.Response;
    httpResponse.ContentType = "application/json";

    var json = new JsonWrapper();

    var users = from user in _instagramPromotionUsersDataContext.instagramPromotionUsers
                select user;

    JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
    foreach (var user in users) {
        HttpWebRequest instagramWebRequest = (HttpWebRequest)WebRequest.Create(string.Format(INSTAGRAM_ENDPOINT, user.id.ToString()));
        instagramWebRequest.Method = WebRequestMethods.Http.Get;
        instagramWebRequest.ContentType = "application/json; charset=utf-8";

        try {
            using(HttpWebResponse instagramWebResponse = (HttpWebResponse) instagramWebRequest.GetResponse()) {
                var dataContractJsonSerializer = new DataContractJsonSerializer(typeof (InstagramObject));
                InstagramObject instagramObject = (InstagramObject) dataContractJsonSerializer.ReadObject(instagramWebResponse.GetResponseStream());

                json.info.Add(new Dictionary<string, object>() {
                    {"userName", user.userName},
                    {"id", user.id.ToString()},
                    {"name", user.name},
                    {"data", instagramObject.data}
                });

            }
        } catch (WebException e) {
            //do nothing just go to next record if exception is thrown
        }
    }

    httpResponse.Write(javaScriptSerializer.Serialize(json));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:44:42.683

ajax 选项需要 contentType，我从 url 中删除了协议和主机。

改成`$.ajax()`这个了...

```
$.ajax({
    url: "/_tools/ajax/getInstagramObject.ashx",
    type: 'GET',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    success: function (msg) {
        /*if (msg) {
        $('#test').text(msg);
        }*/
        alert(msg.length);
    },
    error: function (e) {
        alert(e.responseText);
    }
}); 
```

# iphone - iPhone 屏幕顶部的蓝条

> ID：12057628
> 
> 赞同：1
> 
> 时间：2012-08-21T14:54:34.137
> 
> 标签：iphone, uiview

这是我曾经问过的最愚蠢的问题，但我的视图顶部出现了一个蓝色条，我不知道为什么或如何摆脱它。该视图只是一个 UIView，而不是表格或导航，它只是一个空白视图，但是当我在模拟器中运行应用程序时，顶部会出现一个导航或工具栏大小的蓝色条。如果您知道为什么会有这个该死的东西，我将不胜感激。 ![在此处输入图像描述](../Images/b44f9d3a6850f18ed0e9b3ed31576e10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:13:54.457

试试这个在视图里面会出现方法：

```
self.navigationController.navigationBarHidden  = YES; 
```

# c++ - 在 C++ 中将字符串转换为 int 的问题

> ID：12057632
> 
> 赞同：1
> 
> 时间：2012-08-21T14:54:44.673
> 
> 标签：c++, string

我不明白为什么以下代码返回`*end=='\0\'`？

```
bool isValue(const string &token,int &output_value) //czy string jest wartoscia
{
  char *end = 0;
  errno=0;
  output_value = strtol(token.c_str(),&end,10); //converts string to int
  if (errno!=0) return false;
  return *end=='\0';
} 
```

编辑：和愚蠢的问题，但我不知道为什么有

```
bool isValue(const string &token,int &output_value) 
```

代替

```
bool isValue(string &token,int &output_value) 
```

和

```
bool isValue(string token,int output_value) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:15:54.783

建议使用 stringstream 会不会错？

```
#include <sstream>
#include <string>

using namespace std;

bool isValue(const string &input, int &output)
{
    stringstream ss;
    ss << input;
    return(ss >> output)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:58:04.467

`strtol`可以将全局变量设置`errno`为某些代码。[http://cplusplus.com/reference/clibrary/cstdlib/strtol/](http://cplusplus.com/reference/clibrary/cstdlib/strtol/)。

**如果正确值超出可表示值的范围，则返回 LONG_MAX 或 LONG_MIN，并将全局变量 errno 设置为 ERANGE。**

如果端点在 '\0' （字符串结尾）上，则您的函数返回 true，否则返回 false。

**最后，指向 str 中整数表示之后的第一个字符的指针存储在 endptr 指向的对象中**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:05:31.447

`errno`是一个旧的 C hack。它是一个全局变量（今天是线程本地的）。 `strtol`如果存在（检测到）错误，则将其设置为非零值（如果没有错误，或者其原始值不为 0，则保持不变 - 它的设计目的是您可以链接多个调用，并且只检查在末尾）。

请注意，有问题的代码是错误的。（我知道是因为我最近犯了同样的错误。委婉地说，`strtol`in case of error 的语义很奇怪。）你需要这样的东西：

```
bool
intValue( std::string const& token, int& toReturn )
{
    char* end = NULL;
    char const* s = token.c_str();
    errno = 0;
    long results = strtol( s, &end, 10 );
    bool error = errno != 0
        || end != s
        || *end == '\0'
        || results <= std::numeric_limits<int>::max()
        || results >= std::numeric_limits<int>::min();
    if ( !error ) {
        toReturn = results;
    }
    return error;
} 
```

请注意，1）您必须确保`end != s`；和 2）您必须检查结果是否要写入`int`. WRT 第一个，规范`strtol`说如果它没有找到任何要转换的字符（即字符串不包含任何数字），它返回 0，设置`end`为字符串的开头，并且不修改 `errno`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:58:36.557

~~该`errno`部分可能是遗留代码。它可能在某个时候被使用过，但使用它的代码可能已被删除，但却`errno`被遗忘了。你是对的，它什么都不做，可能会被优化。~~<--- 认为`errno`是一个局部变量（隐形编辑？）

`end`是

> [指向 str 中整数表示之后的第一个字符的指针存储在 endptr 指向的对象中。](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)

所以基本上条件检查数字后面的字符串中是否有任何其他字符。

# php - 搜索匹配并保存并可能替换它

> ID：12057633
> 
> 赞同：0
> 
> 时间：2012-08-21T14:54:47.560
> 
> 标签：php, regex, preg-replace, preg-split

我会尽力以最好的方式解释我的问题……好吧。

我有一个这样的多行字符串：

```
Hello World
And again Hello <a:b:c>
And again ... 
```

现在我想替换，但它取决于什么是第一个字母，第二个等等。我有一个正则表达式片段来获取一个包含 3 个参数的数组。

```
arr = ('a', 'b', 'c') 
```

现在我有一个开关来分析第一个论点。

```
switch (arr[0]) {
         case 'a':
              // do this
         [...]
} 
```

如果第一个论点是 ai 想`<a:b:c>`用某些东西代替。

现在的问题是：为了获得参数，我使用 preg_split。现在如何替换字符串的正确部分？我可以得到位置，`PREG_SPLIT_OFFSET_CAPTURE`但它是一个多行字符串，并且（！）当我用某些东西替换时，其他匹配项的位置（可能有 n 个匹配项）也必须改变，对吧？

也许你有解决这个问题的方法？

我认为 preg_replace 可以工作，但我认为这是解决这个问题的错误函数，因为一个字母（例如第二个，`b`）可以是一个动态的参数。也许我以错误的方式理解了函数 preg_replace ......但是......我真的不知道如何解决这个问题。也许你有一个文档，我可以在其中阅读一些东西来解决这个问题（请不要将我链接到 php.net - 我已经阅读过它）或者你有一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:00:44.450

```
// This function will replace specific matches into a new form
function RewriteText($Match)
{
  $EntireSection = $Match[0];
  $GroupOne = $Match[1];
  // ...
  return $Value;
}

$NewText = preg_replace_callback('/Hello\s+(\S+)/i', "RewriteText", $Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:01:46.507

如果我正确理解您的问题，您想替换字符串中的文本 - 但替换完全基于匹配中找到的第一个字符？

如果这是正确的，您可以使用 PHP 的[`preg_replace_callback()`](http://php.net/manual/en/function.preg-replace-callback.php). 类似于以下内容的东西应该可以工作：

```
function replace_callback($matches) {
    switch ($matches[0]) {
        case 'a': return 'whatever';
    }
}

$str = preg_replace_callback('/<([a-z]):([a-z]):([a-z])>/ig', "replace_callback", $str); 
```

# ios - iPhone 应用付费订阅的推送通知

> ID：12057635
> 
> 赞同：0
> 
> 时间：2012-08-21T14:54:57.977
> 
> 标签：ios, apple-push-notifications

您是否需要付费订阅才能让您的 iPhone 应用程序接收推送通知？

我正在寻找一个应用程序，允许客户端向所有下载该应用程序的用户推送通知。为此，您是否需要付费订阅推送通知服务器或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:58:57.647

您必须创建自己的服务器才能与 Apple 服务器进行通信。您还可以使用 Urban Airship 并通过他们的 API 与他们通信：http: [//urbanairship.com](http://urbanairship.com)。

更多信息在这里：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:56:47.307

您可以构建和托管自己的推送服务器，或使用[UrbanAirship](http://urbanairship.com)或[Xtify](http://xtify.com)等付费服务来处理推送通知。

这两项服务提供了许多功能，例如丰富的通知、地理围栏和分析，这可能使付费推送通知提供商比自己做更有吸引力。

# javascript - Javascript，在 if 之后继续 else

> ID：12057638
> 
> 赞同：1
> 
> 时间：2012-08-21T14:55:09.850
> 
> 标签：javascript

出于某种原因，如果在 if 之后，它会继续，除了 ifs 将您带到不同的地方，这是我目前拥有的代码

```
<script type="text/javascript">
    function whatname(button) {
        var post = prompt("Name?", "Visitor")
        if(post == "Nick"){
            alert("Hi Nick")
            window.location = "index.html"
        }
        if(post == "Visitor"){
            alert("Welcome Visitor")
            window.location = "index.html"
        }
        if(post == ""){
            alert("Please Enter Name")
        }
        if(post == null){
            alert("Closing")
        }
        if(post == "show me a secret"){
            window.location = "secret.html"
        }
        if(post == "Greg"){
            alert("Test")
        }
        if(post == "greg"){
            alert("Test 1")
        }
        else{
            alert("Welcome " + post + ", Have Fun!")
            window.location = "index.html"
        }
    }
</script> 
```

在 if 发生之后，它会继续，比如假设我单击取消（这将是 null）它会说“正在关闭”，但是会出现另一个弹出窗口并说“欢迎 Null，玩得开心！” 比它带我去别的地方，我不知道出了什么问题，如果你能帮忙，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:56:17.163

使用`else if`而不是`if`

```
if(condition 1) {
} else if(condition 2) {
} else {
} 
```

现在发生的事情是它首先检查是否`post`是“尼克”。*不管它是否是*，它都会继续检查是否`post`是“访客”。这当然不是你想要的。如果发现第一个测试是错误的，您只想执行第二个测试。

如所写，只有最后一条`if`语句有`else`. 您将收到“欢迎，玩得开心”的消息，只要`post`不是`greg`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:58:59.207

因为 else 只适用于你的最后一个 if。

```
<script type="text/javascript">
    function whatname(button) {
        var post = prompt("Name?", "Visitor")
        if(post == "Nick"){
            alert("Hi Nick")
            window.location = "index.html"
        }
        else if(post == "Visitor"){
            alert("Welcome Visitor")
            window.location = "index.html"
        }
        else if(post == ""){
            alert("Please Enter Name")
        }
        else if(post == null){
            alert("Closing")
        }
        else if(post == "show me a secret"){
            window.location = "secret.html"
        }
        else if(post == "Greg"){
            alert("Test")
        }
        else if(post == "greg"){
            alert("Test 1")
        }
        else{
            alert("Welcome " + post + ", Have Fun!")
            window.location = "index.html"
        }
    }
</script> 
```

这样它只会执行其中一个代码块。

或者更好的是，更改为使用 switch 语句 [http://jsfiddle.net/qsQvs/](http://jsfiddle.net/qsQvs/)

```
<script type="text/javascript">
function whatname(button) {
    var post = prompt("Name?", "Visitor");

    switch (post) {
    case "Nick":
        {
            alert("Hi Nick");
            window.location = "index.html";
            break;
        }
    case "Visitor":
        {
            alert("Welcome Visitor");
            window.location = "index.html";
            break;
        }
    case "":
        {
            alert("Please Enter Name");
            break;
        }
    case "show me a secret":
        {
            window.location = "secret.html";
            break;
        }
    case "Greg":
        {
            alert("Test");
            break;
        }
    case "greg":
        {
            alert("Test 1");
            break;
        }
    default:
        {
            alert("Welcome " + post + ", Have Fun!");
            window.location = "index.html";
        }
    };
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:57:53.577

目前您有 7 个不同的条件块，而这`else`只是最后一个的一部分。在这种情况下，由于您真正想要的是 1 个带有 8 个分支的条件块，因此您应该使用`else if`而不是`if`中间的 6 个：

```
if(post == "Nick") {
   alert("Hi Nick")
   window.location = "index.html"
} else if(post == "Visitor") {
    alert("Welcome Visitor")
    window.location = "index.html"
}

    [...]

else {
    alert("Welcome " + post + ", Have Fun!")
    window.location = "index.html"
} 
```

此外，由于您将同一个变量与一堆不同的东西进行比较，我更愿意将其写成一个开关，但这是一个口味问题：

```
switch(post)
{
    case "nick":
        alert("Hi Nick")
        window.location = "index.html"
        break;

    [...]

    default:
        alert("Welcome " + post + ", Have Fun!")
        window.location = "index.html"
        break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T14:58:20.813

如果 IF 上只有 ONE 必须发生（或 else），您必须使用`else if`. 现在， else 仅适用于“greg” IF。

```
if(post == "Nick"){
    alert("Hi Nick")
    window.location = "index.html"
}
else if(post == "Visitor"){
    alert("Welcome Visitor")
    window.location = "index.html"
}
else if(post == ""){
    alert("Please Enter Name")
}
else if(post == null){
    alert("Closing")
}
else if(post == "show me a secret"){
    window.location = "secret.html"
}
else if(post == "Greg"){
    alert("Test")
}
else if(post == "greg"){
    alert("Test 1")
}
else{
    alert("Welcome " + post + ", Have Fun!")
    window.location = "index.html"
} 
```

当心！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T14:58:24.400

您`else`当前仅在最后一个`if`没有触发*时*触发。不管*其他* `if`人是否触发，它都不在乎。

如果您知道它应该只是其中之一，`else`请在每个 if 之前放置 s：

```
if(post == "Nick"){
    alert("Hi Nick")
    window.location = "index.html"
}
else if(post == "Visitor"){   //Now this will only be considered if the first failed
    alert("Welcome Visitor")
    window.location = "index.html"
} 
```

**这样，只有在所有**其他方法都失败时才会考虑最后的 else

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T14:58:41.190

一个`else`块只与它的前一个块相关联`if`，这意味着您的所有其他`if`块都是相互**独立**的。用于`else if`创建多个**互斥**选项。

但是请注意，您不会`else if`在 JavaScript (ECMAScript) 规范中找到任何提及。这不是它自己的*事*。但是每个`else` [都与最近的可能相关联`if`no`else`](http://bclary.com/2004/11/07/#a-12.5)，这允许您将多个条件串在一起。

换句话说，这：

```
if (post == "Nick") {
    alert("Hi Nick")
    window.location = "index.html"
}
else if (post == "Visitor") {
    alert("Welcome Visitor")
    window.location = "index.html"
}
else if (post == "") {
    alert("Please Enter Name")
}
else {
    alert("Welcome " + post + ", Have Fun!")
    window.location = "index.html"
} 
```

...等价于：

```
if (post == "Nick") {
    alert("Hi Nick")
    window.location = "index.html"
}
else {
    if (post == "Visitor") {
        alert("Welcome Visitor")
        window.location = "index.html"
    }
    else {
        if (post == ""){
            alert("Please Enter Name")
        }
        else {
            alert("Welcome " + post + ", Have Fun!")
            window.location = "index.html"
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T14:57:14.463

我认为你犯了一个小错误试试这个代码：

```
function whatname(button) {
    var post = prompt("Name?", "Visitor")

    if(post == "Nick"){
        alert("Hi Nick")
        window.location = "index.html"
    }
    else if(post == "Visitor"){
        alert("Welcome Visitor")
        window.location = "index.html"
    }
    else if(post == ""){
        alert("Please Enter Name")
    }
    else if(post == null){
        alert("Closing")
    }
    else if(post == "show me a secret"){
        window.location = "secret.html"
    }
    else if(post == "Greg"){
        alert("Test")
    }
    else if(post == "greg"){
        alert("Test 1")
    }
    else{
        alert("Welcome " + post + ", Have Fun!")
        window.location = "index.html"
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T15:04:52.347

这看起来更适合在 switch 语句中，这将显着提高可维护性。

```
 var post = prompt("Name?", "Visitor") 
 switch(post)
 {
 case "Nick":
        alert("Hi Nick")  
        window.location = "index.html";  
        break;
 case "Visitor":
        alert("Welcome Visitor")  
        window.location = "index.html";
        break;  
 case "":
        alert("Please Enter Name") ;
        break;
 case null:
        alert("Closing");  
        break; 
 case "show me a secret":
        window.location = "secret.html";  
        break;
 case "Greg":  
        alert("Test");  
        break;
 case "greg":
        alert("Test 1")  
        break;    
 default:
        alert("Welcome " + post + ", Have Fun!")  
        window.location = "index.html";    
 } 
```

# javascript - ontouchend ios 返回错误的坐标

> ID：12057639
> 
> 赞同：0
> 
> 时间：2012-08-21T14:55:16.653
> 
> 标签：javascript, html, mobile-safari, html5-canvas

我一直在阅读非常有用的书“Core HTML5 Canvas”，它包含一个在同一功能中包含鼠标点击和触摸的示例。我的版本（与书非常相似）如下：

```
function windowToCanvas(x, y) {
    var bbox = canvas.getBoundingClientRect();

    return { x: x - bbox.left * (canvas.width /bbox.width), y: y - bbox.top * (canvas.height / bbox.height)};
};

canvas.ontouchstart = function(e) {
    e.preventDefault(e);
    MTStart(windowToCanvas(e.pageX, e.pageY));
};

canvas.ontouchmove = function(e) {
    e.preventDefault(e);
    MTMove(windowToCanvas(e.pageX, e.pageY));
};

canvas.ontouchend = function(e) {
    e.preventDefault(e);
    MTEnd(windowToCanvas(e.pageX, e.pageY));
};

canvas.onmousedown = function(e) {
    e.preventDefault(e);
    MTStart(windowToCanvas(e.pageX, e.pageY));
};

canvas.onmousemove = function(e) {
    e.preventDefault(e);
    MTMove(windowToCanvas(e.pageX, e.pageY));
};

canvas.onmouseup = function(e) {
    e.preventDefault(e);
    MTEnd(windowToCanvas(e.pageX, e.pageY));
};

function MTStart(location) {
    console.log("Mouse down");
    document.getElementById('message').innerHTML = 'MT Start x: ' + location.x + ', y: ' + location.y;
};

function MTMove(location) {

};

function MTEnd(location) {
    console.log("Mouse up");
    document.getElementById('message').innerHTML = 'MT End x: ' + location.x + ', y: ' + location.y;
}; 
```

这适用于鼠标。但是，在 iphone 或 ipad 上的 safari 上运行时，ontouchstart 似乎报告了正确的位置，而 ontouchend 则没有。无论我触摸哪里，Ontouchend 都会给出相同的坐标。我注意到当且仅当我稍微滚动页面并触摸画布中的相同位置时，它返回的坐标似乎才会改变。

知道为什么 ontouchstart 和 ontouchend 会给出不同的位置值吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:52:04.653

所以，事实证明我需要使用：

```
MTEnd(windowToCanvas(e.changedTouches[0].pageX, e.changedTouches[0].pageY)); 
```

但仅适用于 ontouchend，而不适用于 ontouchstart。

# sql-server - 在数据仓库上同步 ETL 和读取

> ID：12057641
> 
> 赞同：1
> 
> 时间：2012-08-21T14:55:29.940
> 
> 标签：sql-server, synchronization, data-warehouse, etl

我有以下**情况**：

*   ETL 将数据加载到 DW 中。
*   报告按需运行，可能与 ETL 同时运行，使用来自 DW 的数据。

**这是我的问题：**我需要确保报告不包含部分数据：

*   如果 ETL 准备好加载数据时正在运行报告，则 ETL 必须等待报告完成。
*   如果正在加载 ETL 并请求报告，则报告必须等待 ETL 完成。
*   如果 ETL 正在等待加载并请求报告，则报告必须等待 ETL 运行并完成 - ETL 始终优先于报告。

获得这个的最佳机制是什么？数据库锁似乎不够智能，无法管理我需要的优先级。

我应该实现自己的锁定机制吗？如果是，是否有众所周知的设计？必须考虑许多事情：跟踪当前正在运行的报告（读取锁定），在 ETL 通知它完成失败的情况下实施锁定到期，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:27:27.337

如果您使用的是 Cognos，那么我认为您基本上不走运，因为“如果 ETL 正在运行，则阻止报告运行”这种设置，除非您想在记录不充分的 API 中捣乱。

您最好的选择是确定特定报告，通常是针对聚合运行的报告，并确保您设置 ETL 流程以最后更新事实和聚合，并将其作为一个大的“更新”事务。如果您使用可以提供读取一致性的 dbms，您应该能够做到这一点，而不会显示仅加载一半数据的报告。

访问多个事实/多个聚合的报告会更麻烦。甚至可能您可能必须设置某种“表格交换”，在其中构建您需要的内容然后`alter table rename`换出表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:23:59.120

您可以让 etl 进程在启动时在表的记录中设置标志，并在完成时取消设置？然后，报告系统可以查询此表以查看是否设置了标志并通知用户仓库正在运行，并将报告放入队列中，以便在 ETL 过程完成时处理，或者告诉用户稍后再试。如果您想允许用户使用已处理的事实，您的标志表将需要位于表粒度上 - 即在每个表的标志记录上。

# c++ - 使用 Waf 查找本地外部库

> ID：12057642
> 
> 赞同：1
> 
> 时间：2012-08-21T14:55:33.907
> 
> 标签：c++, waf

我正在创建一个 wscript 文件，该文件能够链接存储在项目目录中的外部库，而不是安装到系统中，但我不确定这样做的最佳方式。

目前，我正在按照以下方式做一些事情：

```
cfg.env.INCLUDES_A = [os.path.normpath('external/include')]
cfg.env.LIBPATH_A  = [os.path.normpath('external/win32/A/lib/x64')]
cfg.env.LIB_A      = ['A']
cfg.env.append_unique('COPY_LIBS', os.path.normpath('external/win32/A/lib/x64/A.dll')) 
```

在这种情况下，我链接到 A.lib 的本地副本，然后在代码后面标记要复制到我的安装目录（本地“dist”目录）的 A.dll。但是，我知道对于安装到您系统的库，您可以执行以下操作：

```
cfg.check_cxx(uselib_store="GL", stlib="opengl32") 
```

我想我的问题是：有没有办法用本地存储的外部库做类似的事情？可能是某种`check_cxx(libpath="external/blah", ...)`或某种类型的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:53:34.203

有[`read_shlib`](https://waf.io/apidocs/tools/ccroot.html#waflib.Tools.ccroot.read_shlib)，[`read_stlib`](https://waf.io/apidocs/tools/ccroot.html#waflib.Tools.ccroot.read_stlib)你可以使用。

你可以像这样使用它：

```
bld.read_shlib('opengl32', paths='external/blah') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:32:55.233

我找到并正在使用的解决方案是：

```
cfg.env.LIBPATH.append(os.path.join(os.getcwd(), "external_lib_dir")
cfg.env.INCLUDES.append(os.path.join(os.getcwd(), "external_includes_dir") 
```

然后，搜索库可以很简单：

```
# OpenGL
if not cfg.check_cxx(uselib_store='GL', uselib='CORE TEST', mandatory=False, lib='GL'):
    cfg.check_cxx(uselib_store='GL', uselib='CORE TEST', mandatory=True, lib='opengl32') 
```

第一行将进行在大多数 linux 系统上工作的检查，设置为非强制，使其不会失败，第二行将在 windows 上进行检查，设置为强制，这样两个失败都会导致配置失败。

这种方式对我来说效果很好，并且可以在必要时变得更加健壮（为 osx 框架或类似的东西添加检测），但如果有人知道更好的方法，请告诉我！

编辑：显然，您可能不会将 OpenGL 保存在项目本地的目录中，但是将其更改为与其他库一起使用也不错。

# xml - 重新排列 XML 元素并从其值中提取相关数据

> ID：12057644
> 
> 赞同：1
> 
> 时间：2012-08-21T14:55:40.040
> 
> 标签：xml, xslt, xpath

我想重新排列 XML 元素并从每个元素中提取相关值以生成 XML 或 cvs 输出。

我在一些材料中读到 (xsl:value-of) 用于提取元素的值，但我不确定它如何用于从元素中提取特定值。这些是一个示例 XML 数据，

```
<Add>
<Row>
<L>1</L>
<LD>Dwelling  (Part Of), Null</LD>
<th>NULL</th>
<AA>Abesinia Passage</AA>
<LN>Dwelling  (Part Of)</LN>
</Row> 
```

例如，我想从 (Addressarea) 元素中提取具有 Estate 或 island 作为后缀的任何值。

我还想从 (thoroughfare) 元素中删除任何 NULL 值或带有后缀 Estate 或 island 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:45:54.270

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pOrder" select=
  "'|LocatorDesignator|LocatorName|Locator|thoroughfare|addressArea|'"/>

 <xsl:variable name="vOrder" select="document('')/*/xsl:param[@name='pOrder']/*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Rowinfo">
  <xsl:copy>
   <xsl:apply-templates select="*">
     <xsl:sort data-type="number" select=
     "string-length(substring-before($pOrder, concat('|', name(), '|')))"/>
   </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（由您上一个问题的答案产生）：

```
<Address>
   <Rowinfo>
      <Locator>1</Locator>
      <LocatorDesignator>Null, Dwelling  (Part Of)</LocatorDesignator>
      <thoroughfare>Abesinia Passage</thoroughfare>
      <LocatorName>Dwelling  (Part Of)</LocatorName>
      <addressArea>Some Address Area</addressArea>
   </Rowinfo>
   <Rowinfo>
      <Locator>1a</Locator>
      <LocatorDesignator>Null, Edmund's Home</LocatorDesignator>
      <thoroughfare>Arena's Palace Lane</thoroughfare>
      <LocatorName>Edmund's Home</LocatorName>
      <addressArea>Some Other Address Area</addressArea>
   </Rowinfo>
</Address> 
```

**产生想要的正确结果**：

```
<Address>
    <Rowinfo>
        <LocatorDesignator>Null, Dwelling  (Part Of)</LocatorDesignator>
        <LocatorName>Dwelling  (Part Of)</LocatorName>
        <Locator>1</Locator>
        <thoroughfare>Abesinia Passage</thoroughfare>
        <addressArea>Some Address Area</addressArea>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Null, Edmund's Home</LocatorDesignator>
        <LocatorName>Edmund's Home</LocatorName>
        <Locator>1a</Locator>
        <thoroughfare>Arena's Palace Lane</thoroughfare>
        <addressArea>Some Other Address Area</addressArea>
    </Rowinfo>
</Address> 
```

# c# - 502 在天蓝色“网站”内请求支付服务

> ID：12057646
> 
> 赞同：3
> 
> 时间：2012-08-21T14:55:43.327
> 
> 标签：c#, azure

我在调用外部支付服务时收到此错误。该错误仅在部署到 azure 并在本地完美运行时发生。

“Web服务器在充当网关或代理服务器时收到无效响应。您要查找的页面有问题，无法显示。当Web服务器（充当网关或代理）联系上游时内容服务器，它收到了来自内容服务器的无效响应。”

使用此 wdsl 生成支付服务类

[https://pal-test.adyen.com/pal/Payment.wsdl](https://pal-test.adyen.com/pal/Payment.wsdl)

似乎错误发生在 Payment 类的授权方法中，但即使所有日志记录选项都打开，我也无法天蓝色地记录任何有用的东西。

有没有其他人有这个问题？

更新

我把问题缩小了一点。下面控制器的测试方法会导致一个天蓝色的网站崩溃并出现502并重新启动。

```
public class TestController : Controller
{      
    public string test()
    {
        try
        {
            var webClient = new WebClient();
            var stream = webClient.OpenRead("https://pal-test.adyen.com/pal/servlet/soap/Payment");
            var streamReader = new StreamReader(stream);
            return streamReader.ReadToEnd();

        }
        catch (Exception exp)
        {
            errorResult(exp);
        }
        return formattedResult(result);
    }    
} 
```

MS 似乎已经删除了一些用于 azure 网站的 HTTP 协议。具体来说，这似乎是 SEC_I_RENEGOTIATE 被阻止了。

有什么解决办法吗？有谁知道这种方法是否适用于网络角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:12:08.930

可能是正在使用的代理服务器有问题...尝试以下

```
UseDefaultWebProxy=false 
```

使用机器特定的代理设置停止您的应用程序，而是使用任何用户定义的/web.config 设置。

正如上面 JcFX 评论的那样，您使用的 URL 不正确！...应该是

```
https://pal-test.adyen.com/pal/servlet/soap/Payment 
```

即您在 pal-test 中缺少连字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:14:04.227

当我转到那个 url 时，它似乎想要使用 HTTP 身份验证，您是否获得了可以设置的测试系统的密码？

```
webClient.Credentials = new NetworkCredential("username", "password"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T15:12:17.130

您是否有机会使用 .pfx 证书文件或类似文件？

如果是这样，您在 Azure 中引用它的方式可能会出现问题，请考虑使用 Azure CertificateStore 而不是将证书放在文件系统上（如果您现在正在这样做）

有关更多详细信息： [https ://msdn.microsoft.com/en-us/library/azure/gg465712.aspx](https://msdn.microsoft.com/en-us/library/azure/gg465712.aspx)

也相关：

[https://azure.microsoft.com/blog/2014/10/27/using-certificates-in-azure-websites-applications/](https://azure.microsoft.com/blog/2014/10/27/using-certificates-in-azure-websites-applications/)

希望这可以帮助！祝你好运，这个问题对我来说真是一场噩梦！

# c# - 无法在 crm 2011 中通过 c# 以编程方式创建组织

> ID：12057648
> 
> 赞同：2
> 
> 时间：2012-08-21T14:55:44.010
> 
> 标签：c#, dynamics-crm-2011

```
public void Main2()
{
    DeploymentServiceClient service = Microsoft.Xrm.Sdk.Deployment.Proxy
        .ProxyClientHelper.CreateClient(new Uri("http://xxxxxxxxx:5555/XRMDeployment/2011/Deployment.svc"));
    Console.WriteLine(CreateOrganization(service
        , new Organization
        {
            UniqueName = "testOrgProv1",
            FriendlyName = "testOrgProv1",
            SqlServerName = "CRMDDC2",
            SrsUrl = @"http://crmddc2/Reports",
            BaseCurrencyCode = RegionInfo.CurrentRegion.ISOCurrencySymbol,
            BaseCurrencyName = RegionInfo.CurrentRegion.CurrencyNativeName,
            BaseCurrencySymbol = RegionInfo.CurrentRegion.CurrencySymbol,
            State = Microsoft.Xrm.Sdk.Deployment.OrganizationState.Enabled
        }));
}

Guid? CreateOrganization(IDeploymentService deploymentService
    , Organization org)
{
    BeginCreateOrganizationRequest req = new BeginCreateOrganizationRequest
    {
        Organization = org
    };

    BeginCreateOrganizationResponse resp = deploymentService.Execute(req) as BeginCreateOrganizationResponse;
    return resp != null ? (Guid?)resp.OperationId : null;
} 
```

但我得到的错误是

> “部署服务无法处理请求，因为一项或多项验证检查失败。”

我使用的是本地管理员帐户，它也是部署管理员，

ps：当我以不同的方式使用类似的代码时，弹出相同的错误，但内部消息是

> “当前 Active Directory 用户对报告组没有读写权限......”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:15:53.903

我正在解决同样的问题。我发现两篇文章提出了两种不同的解决方案：

*   [http://social.microsoft.com/Forums/eu/crmdevelopment/thread/08598c62-f7da-4cd3-b8cc-89b07ebf1ad4](http://social.microsoft.com/Forums/eu/crmdevelopment/thread/08598c62-f7da-4cd3-b8cc-89b07ebf1ad4)
*   [http://social.microsoft.com/Forums/en/crm/thread/0dd4a41b-eeba-405c-9b56-c32bfedb9e7a](http://social.microsoft.com/Forums/en/crm/thread/0dd4a41b-eeba-405c-9b56-c32bfedb9e7a)

这篇文章让我想起了其中一个链接。在第一篇文章中，作者提到部署服务（检查 IIS 应用程序池）身份需要对 ReportingGroup 的 OU 授予 AD 权限。

总结两篇文章：

*   查找 CrmDeploymentServiceAppPool 的应用程序池标识，此后称为 <identiy>
*   将 <identiy> 添加到本地管理员和 CRM_WPG 组
*   将控制权委托给包含 PrivUserGroup 和 SqlAccessGroup 的 OU 的 AD 中的 <identiy>
*   在“secpol.msc”本地权限管理中授予<identiy>“作为服务登录”
*   向 SQL Server 中的 <identiy> 授予“sysadmin”权限
*   授予对 CRM 中 MSCRM_Web 和 Trace 文件夹的 <identiy> 的读/写权限
*   在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSCRM 和 HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\services\MSCRMSandboxService 子项的“regedit”中授予对 <identiy> 的读/写权限
*   重置应用程序池
*   运行脚本

如果这不起作用，请仔细检查上面的链接，向上帝祈祷，然后致电 MS 技术支持（订单由您决定）。（此外，如果您发现缺少某些内容，请随时发布或编辑。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T20:07:05.130

我在 CRM 2015 中遇到了同样的问题，并且花了很多时间发现除了 Mike_Matthews_II 清单之外，对于 CRM 2015，还需要 2 个额外的步骤。

除了 Mike 的步骤... - 将控制权委托给包含 PrivUserGroup 和 SqlAccessGroup 的 OU 的 AD...

...对报告组和 PrivReporting 组执行相同操作

有关详细信息，请参阅... [https://blogs.msdn.microsoft.com/niran_belliappa/2015/07/07/error-when-trying-to-remove-server-roles-in-dynamics-crm-2013/](https://blogs.msdn.microsoft.com/niran_belliappa/2015/07/07/error-when-trying-to-remove-server-roles-in-dynamics-crm-2013/)

（不同的情况，但类似的错误信息）

此外，使用部署服务创建等组织的设置步骤的原始文档在此链接的下载中...

[https://www.microsoft.com/en-us/download/confirmation.aspx?id=45022](https://www.microsoft.com/en-us/download/confirmation.aspx?id=45022)

在本文档中，查看“Microsoft Dynamics CRM 设置和服务所需的最低权限：部署 Web 服务”部分

请注意，本文档忽略了我上面列出的 2 个附加步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T04:03:52.090

如果您在遵循 Mike_Matthews_II 清单后仍然遇到同样的问题，请检查以下内容：

*   确保 SQL Server 有足够的空间。
*   在 SQL Server 中，确保不存在同名的现有数据库（类似于 SameDeploymentName_MSCRM）。

在我的测试环境中，这些都抛出了相同的错误消息。

# out-of-memory - HtmlUnit 失败：尝试了 ImmediateRefreshHandler...OutOfMemoryError。改用 WaitingRefreshHandler 或 ThreadedRefreshHandler

> ID：12057650
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:55:46.320
> 
> 标签：out-of-memory, htmlunit

StackOverflow 迫使我缩短实际的异常文本。完整的例外是：

> HtmlUnit：尝试使用 ImmediateRefreshHandler 刷新页面，这可能导致 OutOfMemoryError 请改用 WaitingRefreshHandler 或 ThreadedRefreshHandler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:55:46.320

这是一个很难找到的解决方案，所以我将其发布在这里。

只需创建自己的空 RefreshHandler：

```
 RefreshHandler rh = new RefreshHandler() {
        void handleRefresh( final Page page, final URL url, final int seconds ) {}
    } 
```

然后将其附加到您的 Web 客户端：

```
 client.setRefreshHandler(rh) 
```

请注意，我是在 Groovy 中执行此操作的，因此您可能需要调整 Java 的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T14:28:54.633

不幸的是，即使在最新版本 2.12 中也存在重定向问题。所以你可以简单地禁用重定向。

```
client.getOptions().setRedirectEnabled(false); 
```

# jquery - 无法获取 mediaelement，js 来显示 youtube 视频

> ID：12057655
> 
> 赞同：1
> 
> 时间：2012-08-21T14:55:54.467
> 
> 标签：jquery, mediaelement.js

我曾尝试使用 mediaelement 网站上演示中的代码来运行 youtube 视频，但没有成功！！！但是，我已经很高兴地使用 siftware 运行了音频和视频文件，它是一个很棒的工具！（复制网站：[http](http://mediaelementjs.com/examples/?name=youtube) ://mediaelementjs.com/examples/?name=youtube ）

我只是得到一个黑盒子，底部有一个空白的控制面板。请告诉我是否遗漏了什么？

...

`<script src="../java/jquerypack.js" type="text/javascript"></script> <script src="../java/mediaelement-and-player.js"></script> <link href="../css/mediaelementplayer.min.css" rel="Stylesheet" /> <link href="../css/mejs-skins.css" rel="Stylesheet" />`

...

`<video id="player1" width="640" height="360" controls="controls" preload="none">
<source src="http://www.youtube.com/watch?v=Lt6CUH9bVzI" type="video/youtube" /> </video>` ...

`<script> $(document).ready(function($){ var player = new MediaElementPlayer('#player1'); }); </script>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:39:51.250

当我测试它时，它对我有用。

**编辑**

小提琴错过了标题，不适用于 IE.. 复制并粘贴此代码并将其保存为一些 test.html，使用浏览器打开并且应该可以工作。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>test</title>
    <!-- mediaelement -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/2.9.2/mediaelement-and-player.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/2.9.2/mediaelementplayer.min.css" />
    </head>
    <body>
        <video width="640" height="360" id="player1" preload="none">
            <source type="video/youtube" src="http://www.youtube.com/watch?v=Lt6CUH9bVzI" />
        </video>
    </body>
</html>

<script type="text/javascript">
jQuery(document).ready(function($) {

    // declare object for video
    var player = new MediaElementPlayer('#player1');

});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-21T01:41:33.180

您使用的是哪个版本的 MediaElement.js？我在使用较新的 2.12v 时遇到了同样的问题......然后我降级到 2.9，一切都再次正常工作。我意识到这个问题相当陈旧——可能在 2.12 版本之前，但如果有人目前正​​在寻找解决这个问题的方法，我建议降级。

[http://mediaelementjs.com/js/mejs-2.9.2/mediaelement-and-player.min.js](http://mediaelementjs.com/js/mejs-2.9.2/mediaelement-and-player.min.js)仍然有效

# c++ - c++中存储分配后变量的值

> ID：12057657
> 
> 赞同：0
> 
> 时间：2012-08-21T14:56:00.190
> 
> 标签：c++, c

编译器是否可以在 c++ 中存储分配后知道变量的值？如果给出以下代码，c编译器是什么情况

```
const int bufsize = 100;
char buf[bufsize]; 
```

文字解释如下：“在 C 语言中，你会得到一个错误，尽管这看起来很合理。因为 bufsize 在某处占用存储空间，所以 C 编译器无法在编译时知道该值。” 为什么这么说？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:02:37.183

在 C99 中，如果代码在函数内部，这很好；该变量被视为运行时值，但数组可以具有可变长度。如果它有静态存储是不允许的。

在 C++ 中，这很好；整数`const`变量可用作编译时值。

在旧版本的 C 中，这是不允许的。该变量是运行时值，并且不存在可变长度数组。

> 为什么这么说？

因为这就是语言设计者决定语言应该表现的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:05:09.357

C89 不允许这样做，因为 a`const int`不被视为*常量表达式*，并且数组的大小必须指定为常量表达式。

在 C99（和更高版本）中，可变长度数组消除了将数组大小作为常量表达式给出的要求，因此这是允许的（允许 VLA 的地方，基本上是：使用自动存储类 - 而不是作为`static`或全局）。

C++ 要求将数组的大小指定为常量表达式（如 C89），但允许将 a`const int`作为常量表达式¹，因此这是允许的。

* * *

¹正如@JamesKanze 指出的那样，*只是*a`const int`并不能保证变量的值将被视为常量表达式。只`const int`允许具有可见初始化程序且本身是常量表达式的 a ——但这些限制在此处得到满足。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T15:01:46.480

在 C中，***`const`声明***不会产生***常量表达式***，而在 C++ 中会产生。
所以，

```
const int bufsize = 100;
char buf[bufsize]; 
```

在 C++ 中有效，但在 C 中无效。

但是，请注意，由于 c99 标准允许***变长数组（VLA）***，因此 VLA 不是 C++ 标准的一部分，但大多数编译器通过编译器扩展支持它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T15:01:55.710

> “在 C 语言中，你会得到一个错误，尽管这看起来很合理。因为 bufsize 在某处占用存储空间，C 编译器无法在编译时知道该值。” 为什么这么说？

因为在 C 中，`bufsize`不是 const 表达式；它是一个只读值：

```
const int bufsize = 100; //read-only in C
                         //constant expression in C++ 
```

const 表达式和 readonly 之间的区别在于，前者意味着编译器知道该值（在编译时本身），而后者意味着该值是只读的，编译器不知道该值。

请注意，在 C++ 中，`buffsize`and`100`是 const 表达式，而在 C 中，只有`100`const 表达式。声明数组的大小需要为 const 表达式；因此，仅在 C++ 中允许以下内容（在允许 VLA 的 C99 中，这是另一个故事）：

```
char buf[bufsize]; //ok in C++ (and C99)
                   //error in C89, C90 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T15:22:29.543

### 这个问题的历史可以追溯到 80 年代，已故丹尼斯·里奇 (Dennis Ritchie) 曾说过

> **相比之下，显然最明显的语言泛化（即允许在数组边界中使用通用表达式而不是常量）使语言的类型结构复杂化，导致数据类型计算困难，并导致发现数​​组大小的不均匀性。**
> *（摘自 Journal of C Language Translation，第 2 卷第 2 期，作者 Dennis Ritchie）*

在这篇论文中，他呼吁标准机构避免使用 VLA。

然而，在后来的 C (C99) 版本中，对此进行了审查，他们允许在非全局范围内使用可变长度数组。

在 C++ 中，这是有效的，因为 const 声明的变量被视为常量表达式。

# algorithm - 惰性评估和时间复杂度

> ID：12057658
> 
> 赞同：72
> 
> 时间：2012-08-21T14:56:02.907
> 
> 标签：algorithm, sorting, haskell, lazy-evaluation, time-complexity

我正在查看 stackoverflow [Non-Trivial Lazy Evaluation](https://stackoverflow.com/questions/7868507/non-trivial-lazy-evaluation)，这让我看到了 Keegan McAllister 的演讲：[为什么要学习 Haskell](http://ugcs.net/~keegan/talks/why-learn-haskell/talk.pdf)。在幻灯片 8 中，他展示了最小函数，定义为：

```
minimum = head . sort 
```

并声明其复杂度为 O(n)。如果按替换排序为 O(nlog n)，我不明白为什么说复杂性是线性的。帖子中提到的排序不能是线性的，因为它不对数据进行任何假设，因为线性排序方法（例如计数排序）需要它。

懒惰的评估在这里起到了神秘的作用吗？如果是这样，背后的解释是什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-21T15:08:50.090

在`minimum = head . sort`中，`sort`不会完全完成，因为它不会预先*完成*。`sort`只会根据`head`.

在例如合并排序中，首先`n`将列表的数字成对比较，然后将获胜者配对并比较（`n/2`数字），然后是新的获胜者（`n/4`），等等。总而言之，`O(n)`比较以产生最小元素。

```
mergesortBy less [] = []
mergesortBy less xs = head $ until (null.tail) pairs [[x] | x <- xs]
  where
    pairs (x:y:t) = merge x y : pairs t
    pairs xs      = xs
    merge (x:xs) (y:ys) | less y x  = y : merge (x:xs) ys
                        | otherwise = x : merge  xs (y:ys)
    merge  xs     []                = xs
    merge  []     ys                = ys 
```

* * *

可以对上面的代码进行扩充，以标记它产生的每个数字，并在其生产中进行一些比较：

```
mgsort xs = go $ map ((,) 0) xs  where
  go [] = []
  go xs = head $ until (null.tail) pairs [[x] | x <- xs]   where
    ....
    merge ((a,b):xs) ((c,d):ys) 
            | (d < b)   = (a+c+1,d) : merge ((a+1,b):xs) ys    -- cumulative
            | otherwise = (a+c+1,b) : merge  xs ((c+1,d):ys)   --   cost
    ....

g n = concat [[a,b] | (a,b) <- zip [1,3..n] [n,n-2..1]]   -- a little scrambler 
```

运行它几个列表长度，我们看到***它确实是`~ n`***：

```
*Main> map (fst . head . mgsort . g) [10, 20, 40, 80, 160, 1600]
[9,19,39,79,159,1599] 
```

* * *

要查看排序代码本身是否为`~ n log n`，我们对其进行更改，以便每个生成的数字仅携带其自身的成本，然后通过对整个排序列表求和来找到总成本：

```
 merge ((a,b):xs) ((c,d):ys) 
            | (d < b)   = (c+1,d) : merge ((a+1,b):xs) ys      -- individual
            | otherwise = (a+1,b) : merge  xs ((c+1,d):ys)     --   cost 
```

以下是各种长度列表的结果，

```
*Main> let xs = map (sum . map fst . mgsort . g) [20, 40, 80, 160, 320, 640]
[138,342,810,1866,4218,9402]

*Main> map (logBase 2) $ zipWith (/) (tail xs) xs
[1.309328,1.2439256,1.2039552,1.1766101,1.1564085] 
```

上面显示了随着列表长度增加的[**经验增长顺序，**](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)`n`如通常通过**`~ n log n`**计算所展示的那样迅速减少。另请参阅[此博客文章](http://rjlipton.wordpress.com/2009/07/24/how-to-avoid-o-abuse-and-bribes/)。这是一个快速的相关性检查：

```
*Main> let xs = [n*log n | n<- [20, 40, 80, 160, 320, 640]] in 
                                    map (logBase 2) $ zipWith (/) (tail xs) xs
[1.3002739,1.2484156,1.211859,1.1846942,1.1637106] 
```

* * *

*编辑：*惰性评估可以比喻为一种生产者/消费者习语¹，以独立的记忆存储作为中介。我们编写的任何生产性定义都定义了一个生产者，该生产者将在其消费者要求时，一点一点地生产其输出 - 但不会更快。无论生产什么都被记忆，因此如果另一个消费者以不同的速度消费相同的输出，它会访问相同的存储空间，之前已填充。

当没有更多的消费者引用一个存储时，它会被垃圾收集。有时，通过优化编译器能够完全取消中间存储，从而将中间人排除在外。

¹另见：Oleg Kiselyov、Simon Peyton-Jones 和 Amr Sabry 的[Simple Generators v. Lazy Evaluation 。](http://lambda-the-ultimate.org/node/4690)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-21T15:14:38.917

假设`minimum' :: (Ord a) => [a] -> (a, [a])`是一个函数，它返回列表中的最小元素以及删除该元素的列表。显然，这可以在 O(n) 时间内完成。如果你然后定义`sort`为

```
sort :: (Ord a) => [a] -> [a]
sort xs = xmin:(sort xs')
    where
      (xmin, xs') = minimum' xs 
```

那么惰性求值意味着`(head . sort) xs`只计算第一个元素。如您所见，此元素只是 pair 的（第一个元素）`minimum' xs`，它是在 O(n) 时间内计算的。

当然，正如 delnan 指出的那样，复杂性取决于`sort`.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-21T19:15:01.473

您已经获得了大量解决`head . sort`. 我将添加一些更一般的陈述。

通过热切评估，各种算法的计算复杂性以一种简单的方式构成。例如， 的最小上界 (LUB)`f . g`必须是 和 的LUB 之`f`和`g`。因此，您可以将`f`和`g`视为黑盒并仅根据其 LUB 进行推理。

然而，通过惰性求值，`f . g`LUB 可以比 和 的 LUB 之`f`和更好`g`。您不能使用黑盒推理来证明 LUB；您必须分析实现及其交互。

因此，经常被引用的事实是惰性求值的复杂性比急切求值更难推理。想想以下。假设您正在尝试提高一段代码的渐近性能，其形式为`f . g`. 在急切的语言中，您可以遵循明显的策略来执行此操作：选择更复杂的`f`and `g`，然后先改进它。如果你成功了，你就成功了`f . g`。

另一方面，在惰性语言中，您可能会遇到以下情况：

*   您改进了更复杂的`f`and `g`，但`f . g`没有改进（甚至变得*更糟*）。
*   您可以`f . g`以无济于事（甚至*恶化*）`f`或`g`.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-21T15:17:53.143

解释取决于 的实现`sort`，而对于某些实现，这将是不正确的。例如，对于在列表末尾插入的插入排序，惰性求值没有帮助。因此，让我们选择一个实现来查看，为了简单起见，让我们使用选择排序：

```
sort [] = []
sort (x:xs) = m : sort (delete m (x:xs)) 
  where m = foldl (\x y -> if x < y then x else y) x xs 
```

该函数显然使用 O(n^2) 时间对列表进行排序，但由于`head`只需要列表的第一个元素，`sort (delete x xs)`因此永远不会评估！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-21T15:08:25.217

它没有那么神秘。您需要对列表的多少进行排序才能提供第一个元素？您需要找到最小元素，这可以在线性时间内轻松完成。`sort`碰巧的是，惰性求值的某些实现会为您执行此操作。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-21T16:43:06.877

在实践中看到这一点的一种有趣方式是跟踪比较函数。

```
import Debug.Trace
import Data.List

myCmp x y = trace (" myCmp " ++ show x ++ " " ++ show y) $ compare x y

xs = [5,8,1,3,0,54,2,5,2,98,7]

main = do
    print "Sorting entire list"
    print $ sortBy myCmp xs

    print "Head of sorted list"
    print $ head $ sortBy myCmp xs 
```

首先，注意整个列表的输出与跟踪消息交错的方式。其次，请注意仅计算头部时跟踪消息的相似之处。

我刚刚通过 Ghci 运行了这个，它并不完全是 O(n)：需要 15 次比较才能找到第一个元素，而不是应该需要的 10 次。但它仍然小于 O(n log n)。

**编辑：**正如 Vitus 在下面指出的那样，进行 15 次比较而不是 10 次与说它不是 O(n) 不同。我的意思是它需要超过理论最小值。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-08-24T06:05:48.460

受保罗约翰逊回答的启发，我绘制了这两个函数的增长率。首先，我修改了他的代码，每次比较打印一个字符：

```
import System.Random
import Debug.Trace
import Data.List
import System.Environment

rs n = do
    gen <- newStdGen
    let ns = randoms gen :: [Int]
    return $ take n ns

cmp1 x y = trace "*" $ compare x y
cmp2 x y = trace "#" $ compare x y

main = do
    n <- fmap (read . (!!0)) getArgs
    xs <- rs n
    print "Sorting entire list"
    print $ sortBy cmp1 xs

    print "Head of sorted list"
    print $ head $ sortBy cmp2 xs 
```

计算`*`和`#`字符，我们可以在均匀间隔的点对比较计数进行采样（请原谅我的 python）：

```
import matplotlib.pyplot as plt
import numpy as np
import envoy

res = []
x = range(10,500000,10000)
for i in x:
    r = envoy.run('./sortCount %i' % i)
    res.append((r.std_err.count('*'), r.std_err.count('#')))

plt.plot(x, map(lambda x:x[0], res), label="sort")
plt.plot(x, map(lambda x:x[1], res), label="minimum")
plt.plot(x, x*np.log2(x), label="n*log(n)")
plt.plot(x, x, label="n")
plt.legend()
plt.show() 
```

运行脚本将为我们提供以下图表：

![增长率](../Images/01e0ed84f89370fda15715f351a01adb.png)

下线的斜率是..

```
>>> import numpy as np
>>> np.polyfit(x, map(lambda x:x[1], res), deg=1)
array([  1.41324057, -17.7512292 ]) 
```

..1.41324057（假设它是一个线性函数）

# database - 转换 SQL 。BAK 到 SQL backpac 格式

> ID：12057661
> 
> 赞同：20
> 
> 时间：2012-08-21T14:56:11.313
> 
> 标签：database, azure-sql-database, database-backups, bacpac

我有 MSSQL .BAK 文件，出于逻辑原因（数据库对于我的基础设施来说很大），我想将其转换为 BacPac 文件，以便可以将其上传到 Azure。

一直以来，我认为 .BAK 和 BacPac 是相同的，所以出现了错误，是否有实用程序可以将其转换？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T20:02:18.380

它们是不同的格式。“bacpac” 文件不包括事务日志，并且它们本身不是过渡一致的。您可以在此处阅读有关它的更多信息“ [Windows Azure SQL 数据库备份和还原策略](http://aka.ms/wazsqldbbu)”

您最好的方法是将数据库的备份（“.bak”）恢复到本地服务器，然后从恢复的数据库创建一个“.bacpac”文件。您不需要恢复的数据库本地副本具有高性能（除了为了将其数据提取到 bacpac 中），因此您可以将其恢复到只有足够空间容纳数据的服务器上。这应该有助于解决“数据库对我的基础设施来说是巨大的”问题。

# eclipse - Eclipse viewpart 中的高亮区域

> ID：12057667
> 
> 赞同：0
> 
> 时间：2012-08-21T14:56:38.570
> 
> 标签：eclipse, eclipse-plugin

当用户选择视图部分上的链接时，我希望在 Eclipse 中突出显示视图部分的一个区域。一种将他们的注意力吸引到这个领域的方式。我的视图由一些具有不同标签和链接的组合组成。我想突出显示整个复合材料。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:34:40.297

您可以更改要突出显示的合成的背景颜色...

```
composite.setBackground( SWT.COLOR_YELLOW ) 
```

# java - 不在全局命名空间中时查询索引架构（全文搜索）失败

> ID：12057670
> 
> 赞同：0
> 
> 时间：2012-08-21T14:56:44.153
> 
> 标签：java, google-app-engine, full-text-search

当我在非全局命名空间中在全文搜索中查询索引架构时，出现此错误：收到的命名空间不正确的索引“”。

这是我正在使用的代码：

ListIndexesResponse 响应 = SearchServiceFactory.getSearchService().listIndexes(ListIndexesRequest.newBuilder().setSchemaFetched(true).build());

// 列出每个 Schema 的元素 for (Index index : response) { Schema schema = index.getSchema(); for (String fieldName : schema.getFieldNames()) { List typesForField = schema.getFieldTypes(fieldName); } }

事件虽然我不在全局命名空间中，但它似乎返回了一个模式，即导致此错误。

有人知道修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:58:57.473

似乎[Search API 默认不使用命名空间](https://developers.google.com/appengine/docs/java/multitenancy/overview#App_Engine_APIs_that_Use_Namespaces)。

有一种手动设置命名空间的方法：[`SearchServiceFactory.getSearchService(namespace)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchServiceFactory#getSearchService%28java.lang.String%29)

# php - PHP中用于存储的图像加密

> ID：12057680
> 
> 赞同：0
> 
> 时间：2012-08-21T14:57:11.907
> 
> 标签：php, security, encryption, mcrypt

我有一个情况，不确定如何最有效地处理它。客户现有系统是为更改、盖章、签名等而构建的。PDF——也将 PDF 页面转换为图像 (png) 以供显示/查看，需要“保护”以处理医疗/法律文件和文档可能包含个人信息。

如果可以避免的话，我们不会直接将任何内容写入磁盘，尽可能多地保存在数据库中。我熟悉使用 mcrypt 来散列密码等 - 这是否是一种合理的方法来存储页面图像和生成的 PDF 直到检索？我是否正在考虑严重的处理开销？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:48:11.187

保护系统是一个相当广泛的话题，但您似乎专注于保护敏感数据的持久存储免受未经授权的访问。换句话说，您想让有权访问数据库的入侵者或 illojal 员工更难查看他不应该查看的 pdf 文档。正如您所建议的，一种方法是加密数据库中的文档。这里重要且困难的决定是如何管理加密密钥。你应该问自己的问题是：

1) 我如何存储加密密钥，以便应用程序可以访问它们，但入侵者或 illojal 员工不能？您当然可以不将它们存储在数据库中（如果您可以信任数据库，则根本不必加密文档）。一种安全但繁琐的解决方案是让受信任的员工在您启动应用程序时键入密钥并将其仅存储在内存中。另一种方法是创建一个特殊的、受保护的子系统，它只加密和解密文档。

2）什么加密算法足够强大？您可能应该防止攻击者可以将您的许多或全部文档复制到他自己的系统并使用不同的技术来破解加密的情况。理论上，只要有足够的时间和硬件，所有算法都是可以破解的，因此这里的权衡是使用一种算法和密钥长度，使其几乎不可能破解加密，同时具有可接受的处理开销（您需要的处理能力越少解密文档，攻击者破解您的加密所需的处理能力越少）。

3) 文件的有效期是多久？加密方案和密钥不应该永远存在。您应该设计一个系统，您可以定期更改您的密钥，并在它们过时时更改加密算法。您还必须能够处理发现加密密钥被泄露的情况。换句话说，必须很容易更改密钥并使用新密钥重新加密所有文档。

保护系统当然需要您做的不仅仅是加密文档，但保护您的持久数据并不是一个糟糕的开始。

祝你好运

# javascript - 如何使用 JavaScript RegExp 匹配特定的 url

> ID：12057681
> 
> 赞同：0
> 
> 时间：2012-08-21T14:57:11.813
> 
> 标签：javascript, regex

我正在尝试使用 RegExp 匹配这个部分 url：

```
/l.php?u=http%3A%2F%2Fwww.transmoto.com.au%2Fpublish%2Fnews%2F14614708%2FBopping%2C-Styke-and-Waters-to-lead-Team-Australia-at-MXoN&h=5AQEDldxs&s=1 
```

理想情况下，我需要匹配 'u' 值并将其转换为正确的 url（即，将 %3A 替换为：，将 %2F 替换为 /），但我很乐意匹配整个表达式。

我尝试了许多正则表达式组合，但没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:06:51.823

尝试 ：

```
var match = url.match(/u=([^&]+)/);

/* Alerts http%3A%2F%2Fwww.transmoto.com.au%2Fpublish%2Fnews%2F14614708
   %2FBopping%2C-Styke-and-Waters-to-lead-Team-Australia-at-MXoN */
alert(match[1]);

/* Alerts http://www.transmoto.com.au/publish/news/14614708/Bopping,-Styke
  -and-Waters-to-lead-Team-Australia-at-MXoN */
alert(decodeURIComponent(match[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:10:35.877

```
var url = '/l.php?u=http%3A%2F%2Fwww.transmoto.com.au%2Fpublish%2Fnews%2F14614708%2FBopping%2C-Styke-and-Waters-to-lead-Team-Australia-at-MXoN&h=5AQEDldxs&s=1';
var re = url.match(/\?(?:|.*?&)u=([^&]+)/); 
```

这是一个[jsFiddle](http://jsfiddle.net/QWDpf/1/)。

# caching - Mutt 缓存大小限制标头和消息

> ID：12057682
> 
> 赞同：4
> 
> 时间：2012-08-21T14:57:14.073
> 
> 标签：caching, header, mutt

我已经在谷歌上搜索了这个，只能找到`header_cache`设置缓存目录。我需要找到一种方法来设置标头缓存的最大大小和消息缓存目录的最大大小。那个我找不到。

我可以使用以下方法关闭标头缓存：

```
folder-hook =spam 'set header_cache=""' 
```

但我不想关闭它，我只想限制它的大小:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-18T16:16:17.170

我使用 neomutt 而不是 mutt。[在 neomutt 中](https://neomutt.org/guide/optionalfeatures.html#7-4-%C2%A0maintenance)这是不可能的，我相信 mutt 也是如此

# git - 我可以使用本地存储库作为 git 远程

> ID：12057687
> 
> 赞同：1
> 
> 时间：2012-08-21T14:57:31.753
> 
> 标签：git

我在本地有两个存储库，A 和 B。我可以使用 A 的本地副本作为 B 中的远程吗？

就像是

```
git remote add A file:///path/to/repo/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:59:32.267

是的，就像一个魅力。

```
git remote add A file:///path/to/repo/ 
```

# jquery - 如何在窗口调整大小时调整框、字体大小或图像的大小？

> ID：12057689
> 
> 赞同：1
> 
> 时间：2012-08-21T14:57:39.783
> 
> 标签：jquery, resize, jquery-animate

如何在窗口调整大小时调整框或字体大小？但是缩放比例却不超过css中设置的默认值，例如，在css中你可能`width:800px; height:600px;`对box进行了设置。

当您缩放浏览器时，我想存档与本网站类似的结果，图像、框、字体大小也在缩放 - [http://davegamache.com/craftsmanship/](http://davegamache.com/craftsmanship/)

我测试了我的脚本，但似乎离它很远，

html,

```
<div class="box">

    <p>I am in a box.</p>

</div> 
```

的CSS，

```
<style>
        .box {
            width:800px;
            height:600px;
            border:1px solid #000;
        }
    </style> 
```

jQuery,

```
$(document).ready(function(){

            var window_height = $(window).height();

            $(window).resize(function() {

                //$('.box').css({'height':(window_height/2)+'px'});

                $(".box").animate({
                    width: (window_height/2) +'px'
                }, 500 );

            });

        }); 
```

[演示](http://lauthiamkok.net/bin/jquery/resize/)

我尝试使用这个插件，但根本无法让它工作 - [http://fittextjs.com/](http://fittextjs.com/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:59:42.580

您需要在 resize 函数中获取窗口高度，否则它永远不会改变：

```
$(function(){
    $(window).on('resize', function() {
        var H = $(window).height();
        $('.box').animate({width: (H/2) +'px'}, 500 );
    });
}); 
```

一个更简单的选择是在 CSS 中使用百分比/em 等，但对于更高级的东西，通常需要 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:03:31.433

请注意，它只工作一次。这是因为在准备好文档时，您正在为`window_height`. 这个值不会改变。

因此，您的函数第一次运行时，它会使用您计算的高度为框设置动画。凉爽的。我们看到了变化。下一次，你仍然有相同的值`window_height`，所以当函数运行时，你会得到相同的数字，所以盒子的大小被调整为与它原来的相同。

所以实际上，你的函数工作得很好，只是你每次都将盒子的大小调整为相同的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:04:46.753

我使用了以下代码：你必须自己玩它，你需要一个计时器，否则它会在某些浏览器中出现：

```
 $(document).ready(function() {
        var delay = (function(){
            var timer = 0;
            return function(callback, ms){
                clearTimeout (timer);
                timer = setTimeout(callback, ms);
                };
        })();

        $(window).bind('resize', function(){
            delay(function(){
                //resize code here will run every 100ms
                            //get window height/width as you did and animate
            }, 100);
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:13:07.560

你可以试试我很久以前做的这个功能：

```
function resizeAndKeepRatio(element, width, height, scale){
    centerHeight= $(window).height();
    centerWidth =  $(window).width();
    windowPixels = centerHeight+centerWidth;

    heightScale = height / scale;
    widthScale = width / scale;

    hoogteLogo= windowPixels / widthScale;
    //110 / 1024 * 100
    breedteLogo= windowPixels / heightScale;
    // 130 / 768 * 100
    $(element).css({"width":breedteLogo});
    $(element).css({"height":hoogteLogo});
}

resizeAndKeepRatio(".box",500,500,1.5); //  you need to play around with the scale 
```

# android - 展开被 ListView 阻止的 LinearLayout

> ID：12057690
> 
> 赞同：0
> 
> 时间：2012-08-21T14:57:42.420
> 
> 标签：android

这是一个不错的。我有一个简单的 XML 布局：menuprincipal.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">
    <LinearLayout
        android:id="@+id/llContent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >
        <LinearLayout 
            android:id="@+id/menuSlide"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:background="@color/black"
            android:layout_weight="0.01">

        </LinearLayout>
        <LinearLayout 
            android:id="@+id/resultadosEquipo"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:background="@color/white"
            android:layout_weight="0.99"
            android:orientation="vertical">
            <LinearLayout
                android:id="@+id/layoutPrueba"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:background="@color/white"
                >
                <ListView android:id="@+id/listNoticias"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    />
            </LinearLayout>
        </LinearLayout>        
    </LinearLayout>
</FrameLayout> 
```

然后我有两个类来扩展“menuSlide”布局：

ExpandAnimation.java

```
 package app.rosunad.animations;

import android.util.Log;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;

public class ExpandAnimation extends Animation implements Animation.AnimationListener{

    private View view;
    private static int ANIMATION_DURATION;
    private static final String LOG_CAT = "ExpandAnimation";
    private int lastWidth;
    @SuppressWarnings("unused")
    private int fromWidth;
    private int toWidth;
    @SuppressWarnings("unused")
    private static int STEP_SIZE=30;

    public ExpandAnimation(View v,int fromWidth, int toWidth, int duration){
        Log.v(LOG_CAT, "Entramos en el constructor del ExpandAnimation");
        view = v;
        ANIMATION_DURATION = duration;
        this.fromWidth = fromWidth;
        this.toWidth = toWidth;

        setDuration(ANIMATION_DURATION);
        setRepeatCount(duration);
        setFillAfter(false);
        setInterpolator(new AccelerateInterpolator());
        setAnimationListener(this);
        startNow();
    }

    @Override
    public void onAnimationEnd(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub
        Log.v(LOG_CAT, "Entra en el onAnimationRepeat");
        LayoutParams lyp = view.getLayoutParams();
        lyp.width = lastWidth += toWidth/ANIMATION_DURATION;
        view.setLayoutParams(lyp);
    }

    @Override
    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub
        Log.v(LOG_CAT, "Entra en el onAnimationStart");
        LayoutParams lyp = view.getLayoutParams();
        lyp.width = 0;
        view.setLayoutParams(lyp);
        lastWidth=0;
    }

} 
```

和 CollapseAnimation.java

```
 package app.rosunad.animations;

import android.util.Log;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;

@SuppressWarnings("unused")
public class CollapseAnimation extends Animation implements Animation.AnimationListener{

    private View view;
    private static int ANIMATION_DURATION;
    private int lastWidth;
    private int fromWidth;
    private int toWidth;
    private static int STEP_SIZE=30;

    public CollapseAnimation(View v,int fromWidth,int duration){
        this.view = v;
        LayoutParams lyp = v.getLayoutParams();
        this.fromWidth = lyp.width;
        this.toWidth = lyp.width;
        ANIMATION_DURATION = duration;
        setRepeatCount(ANIMATION_DURATION);
        setFillAfter(false);
        setInterpolator(new AccelerateInterpolator());
        setAnimationListener(this);
    }
    @Override
    public void onAnimationEnd(Animation arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationRepeat(Animation arg0) {
        // TODO Auto-generated method stub
        LayoutParams lyp = view.getLayoutParams();
        lyp.width = this.lastWidth-(this.toWidth/ANIMATION_DURATION);
        this.lastWidth = lyp.width;
        view.setLayoutParams(lyp);
    }

    @Override
    public void onAnimationStart(Animation arg0) {
        // TODO Auto-generated method stub
        LayoutParams lyp = view.getLayoutParams();
        this.lastWidth = lyp.width;
    }

} 
```

这一切都由 te 活动 MenuPrincipal.java 控制：

```
 public class MenuPrincipal extends ActionBarActivity {
    public static String URL_BASE_FOTOS = "http://test";
    public static String URL_BASE = "http://test/";
    public static String URL_NOTICIAS = URL_BASE + "getNoticias.php";
    public static final String EXTRA_IDUSUARIO = "app.rosunad.lls.idusuario";
    public static final String LOG_TAG = "MenuPrincipal";
    public int idUsuario = 0;
    public boolean icon_home_changed = false;

    public ArrayList<Noticia> arrNoticias = new ArrayList<Noticia>();

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        Intent antIntent = getIntent();
        idUsuario = antIntent.getIntExtra(EXTRA_IDUSUARIO, 0);

        setHomeNavigation();
        setContentView(R.layout.menuprincipal);

        new GetNoticias().execute(URL_BASE_FOTOS);
    }

    public boolean onCreateOptionsMenu(Menu menu){
        Log.v(LOG_TAG,"En el onCreateOptionsMenu del MenuPrincipal");
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.menuactionbar, menu);

        return super.onCreateOptionsMenu(menu);
    }

    public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
            case R.id.menu_refresh:
                Toast.makeText(getApplicationContext(), "Fake Refresh", Toast.LENGTH_SHORT).show();
                getActionBarHelper().setRefreshActionItemState(true);
                getWindow().getDecorView().postDelayed(new Runnable(){
                    public void run(){
                        getActionBarHelper().setRefreshActionItemState(false);
                    }
                }, 1000);
                break;
            case android.R.id.home:
                getActionBarHelper().setHomeIconItemState(icon_home_changed);
                LinearLayout menuSlide = (LinearLayout)findViewById(R.id.menuSlide);
                DisplayMetrics metrics = new DisplayMetrics();
                getWindowManager().getDefaultDisplay().getMetrics(metrics);
                int screenWidth = metrics.widthPixels;

                if(icon_home_changed){
                    menuSlide.startAnimation(new CollapseAnimation(menuSlide, (int)(screenWidth*0.7), 10));
                }else{
                    menuSlide.startAnimation(new ExpandAnimation(menuSlide, 0, (int)(screenWidth*0.7), 10));
                }

                // Vamos a iniciar la animación del frame
                icon_home_changed = !icon_home_changed;
                break;
        }

        return super.onOptionsItemSelected(item);
    }

    @TargetApi(14)
    public void setHomeNavigation(){
        if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.ICE_CREAM_SANDWICH){
            this.getActionBar().setHomeButtonEnabled(true);
        }
    }

    public void publishNoticias(){
        Log.v(LOG_TAG,"Entra en el publishNoticias");
        // Aqui es donde mostramos los datos de las noticias recogidas en GetNoticias
        NoticiasAdapter adap = new NoticiasAdapter(this,R.layout.fila_noticias,arrNoticias);
        ListView listView = (ListView)findViewById(R.id.listNoticias);
        listView.setAdapter(adap);
    }

    public class GetNoticias extends AsyncTask<String,Void,ArrayList<Noticia>>{

        @Override
        protected ArrayList<Noticia> doInBackground(String... params) {
            // TODO Auto-generated method stub
            // Aqui hacemos la consulta a la base de datos para recoger las noticias
            Log.v(LOG_TAG,"Entra en el doInBackground");
            Bitmap icono;
            ArrayList<Noticia> response = new ArrayList<Noticia>();
            JSONObject fila;
            try {

                HttpClass cox = new HttpClass();
                cox.setURL(URL_NOTICIAS);

                cox.SqlEx();

                // Ahora recogemos los valores y vamos creando el Array
                if(cox.GetJResponseArray()!=null){
                    CheckResponse ck = new CheckResponse(cox.GetJResponseArray());

                    if(ck.HasRowsArray()){
                        Log.v(LOG_TAG,"Tiene filas");
                        for(int i = 0 ; i < cox.GetJResponseArray().length()-1; i ++){
                            fila = cox.GetJResponseArray().getJSONObject(i);

                            if(fila.getInt("id_noticia")!=0){
                                // Debemos cargar primero el icono de la noticia
                                if(fila.getInt("id_foto")!=0){
                                    icono = BitmapFactory.decodeStream((InputStream) new URL(URL_BASE_FOTOS + "foto" + fila.getInt("id_foto") + "P.jpg").getContent());
                                }else{
                                    icono = BitmapFactory.decodeStream((InputStream) new URL(URL_BASE_FOTOS + "nop.gif").getContent());
                                }
                                Log.v(LOG_TAG,"Añade elementos");
                                response.add( new Noticia(fila.getInt("id_noticia"),fila.getString("titular"),icono ));
                            }
                        }
                    }
                }
            }catch (Exception e){
                e.printStackTrace();
            }
            return response;
        }

        @Override
        protected void onPostExecute(ArrayList<Noticia> result){
            Log.v(LOG_TAG,"Entra en el onPostExecute");
            Log.v(LOG_TAG,"El resultado tiene: " + result.size());
            arrNoticias = result;
            publishNoticias();
        }

    }
} 
```

在我引入 ListView 元素之前，进行不同的测试一切正常，因为当我调用 ExpandAnimation （单击主页按钮）仅到达构造函数时，onAnimationStart 不会触发。但是，这很有趣，如果只是在单击主页按钮后单击 ListView 的一个项目，动画就会开始。:o

重新单击主页按钮启动 CollapseAnimation 没有问题。如果删除列表视图一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:34:28.113

你的`ListView`id 必须是`@android:id/list`.

如果你想格式化你的`ListView`，你必须创建另一个 XML 文件来概述你将如何实现列表视图的每一行。

希望这可以帮助。

# java - MySQLDataTruncation：列的值超出范围

> ID：12057695
> 
> 赞同：3
> 
> 时间：2012-08-21T14:58:04.480
> 
> 标签：java, mysql, ibatis

我正在使用 ibatis 和 java webapp 插入一行。POJO 有一个字段需要存储一个数字（如 3.0 或 2.34）。我曾尝试在 java 端使用 BigDecimal 和 Double。在 MySQL 方面，我使用的是 Decimal(5, 5) 数据类型。

当我尝试插入具有“4”作为此数字字段值的行时，MySQL 和 iBatis 抛出以下异常：

```
org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation: encountered SQLException [  
--- The error occurred in org/mySQL.xml.  
--- The error occurred while applying a result map.  
--- Check the mySQL.insertQuery.  
--- The error happened while setting a property on the result object.  
--- Cause: java.lang.RuntimeException: org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation: encountered SQLException [  
--- The error occurred while applying a parameter map.  
--- Check the insertQuery-InlineParameterMap.  
--- Check the statement (update failed).  
--- Cause: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Out of range value for column 'numericColumn' at row 316]; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:   
    at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithCallback(GeneralStatement.java:188)
    at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithRowHandler(GeneralStatement.java:133)
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryWithRowHandler(SqlMapExecutorDelegate.java:649)
    at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryWithRowHandler(SqlMapSessionImpl.java:156)
    at com.ibatis.sqlmap.engine.impl.SqlMapClientImpl.queryWithRowHandler(SqlMapClientImpl.java:133)
    at org.springframework.orm.ibatis.SqlMapClientTemplate$5.doInSqlMapClient(SqlMapClientTemplate.java:267)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:165)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.queryWithRowHandler(SqlMapClientTemplate.java:265)
    at org.myClass(myClass.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:324)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:248)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:165)
    at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:66)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:191)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:516) 
```

我是否为要插入的值使用了错误的 java 数据类型？如果没有，为什么 MySQL 不让我插入值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T15:56:53.873

您似乎误解了在 SQL 中定义`DECIMAL`（或可能`NUMERIC`）列的工作方式 -
具体而言，将列定义为 时`DECIMAL(x, y)`，`x`是该列将存储的*总*位数，并且`y`是小数点*后的位数。*因此，在您的列定义中，您指定了**-1 < column < 1**的范围。数据类型是正确的，但您尝试指定的值超出了该列被告知允许的范围。幸运的是，修复很简单：更改列定义。我假设您希望在小数点*前*`DECIMAL(10, 5)`最多保留 5 位数字，这将使列定义。

# rest - 确定服务堆栈休息调用的参数

> ID：12057700
> 
> 赞同：1
> 
> 时间：2012-08-21T14:58:21.783
> 
> 标签：rest, servicestack

我正在研究移植一些代码以通过服务堆栈层而不是直接访问数据库。我创建了一个从 RestServiceBase 继承的服务。在我对 OnGet 的覆盖中，有没有办法知道哪些参数（如果有）传递给了 rest 调用？在 Service Stack 站点上的示例中，它们显示了将字段与默认值进行比较，但在我的情况下，0 是有效标识符（旧行为），因此我无法从该值判断是否搜索单个项目，或退回所有物品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:10:18.423

如果一个类型的默认值是一个有效的标识符，你应该使该属性可以为空。

```
public Nullable<int> Age { get; set; } 
```

现在在服务中，您可以检查该值是否为`0`或`null`。如果是`null`，则该属性未随请求一起传递。

# matlab - 在 Matlab 中打开串行对象慢

> ID：12057701
> 
> 赞同：3
> 
> 时间：2012-08-21T14:58:23.407
> 
> 标签：matlab, serial-port

我正在使用 Matlab 通过串行连接与电机驱动器进行通信。一切正常，除了创建和连接到串行对象非常慢。大约 30+ 秒。

我正在按照电机驱动器的用户手册的说明定义属性。以下是我用来打开和连接串行对象的代码。

```
S = serial('COM1', 'baudrate', 9600, 'DataBits', 8, 'StopBits', 1, 'Parity', 'None');
fopen(S); 
```

为什么这个过程在 Matlab 中如此缓慢，而使用简单的串行终端几乎是瞬时的？有没有更好/更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:14:38.483

（因为你没有收到其他人的回音……）我只能告诉你我的串口上没有任何东西，但我只花了一秒钟左右的时间就运行了这两行代码我的机器。

也许其他一些软件正在与端口通信？或者您需要更新串行端口驱动程序（在 Matlab 之外）和/或尝试使用不同的串行卡？

# java - 将表中的两列映射到另一个表中的同一列

> ID：12057703
> 
> 赞同：1
> 
> 时间：2012-08-21T14:58:26.527
> 
> 标签：java, spring, hibernate, mapping

我正在使用 spring 和 hibernate 创建一个 web 应用程序。是否可以在一个表中有多个 @ManyToOne 映射，这些映射引用另一个表中的相同列？我的意思是

如果我有这两张桌子

```
@Entity
@Table(name="AUTHOR")
public class Author{

@Id
@GeneratedValue
@Column(name="AUTHOR_ID")   
private IntegerauthorId;

@Column(name="AUTHOR_NAME")
private String authorName;

...

} 
```

和

```
@Entity
@Table(name="BOOK")
public class book{

@Id
@GeneratedValue
@Column(name="BOOK_ID")
private Integer bookId;

@Column(name="TITLE")
private String title; 

@Column(name="PREFACE_AUTHOR")
private Author prefaceAuthor;

@Column(name="BOOK_AUTHOR")
private Author bookAuthor;

...

} 
```

如何进行映射以便我可以同时填充表格`PREFACE_AUTHOR`和`BOOK_AUTHOR`从`AUTHOR`表格中填充？一位作者既可以是序言作者，也可以是书籍作者，但每本书只能有一个序言作者和一个书籍作者。

如果有什么我可以澄清的，请告诉我。

感谢您的帮助！

/D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:04:36.563

您应该指定它是多对一并使用`@JoinColumn`而不是`@Column`，如下所示：

```
@ManyToOne
@JoinColumn(name="PREFACE_AUTHOR")
private Author prefaceAuthor;

@ManyToOne
@JoinColumn(name="BOOK_AUTHOR")
private Author bookAuthor; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T06:55:16.730

我也有同样的情况。有两个实体：

```
@Entity
public class Book {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "book_id")
    int id;

    @Column(name = "book_name")
    String name;

    @ManyToOne
    @JoinColumn(name = "book_author", referencedColumnName = "person_id")
    Person author;

    @ManyToOne
    @JoinColumn(name = "book_reviewer", referencedColumnName = "person_id")
    Person reviewer;

    public Book(String name, Person author, Person reviewer) {
        this.name = name;
        this.author = author;
        this.reviewer = reviewer;
    }

    public Book() {
    }

    @Override
    public String toString() {
        return "Book{" +
                "id=" + id +
                ", name='" + name + '\'' +
                ", author=" + author +
                ", reviewer=" + reviewer +
                '}';
    }
} 
```

和

```
@Entity
public class Person {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "person_id")
    int id;

    @Column(name = "person_name")
    String name;

    public Person(String name) {
        this.name = name;
    }

    public Person() {
    }

    @Override
    public String toString() {
        return "Person{" +
                "id=" + id +
                ", name='" + name + '\'' +
                '}';
    }
} 
```

当我使用自定义查询创建 BookRepository

```
public interface BookRepository extends CrudRepository<Book, Integer> {
    List<Book> findAll();

    @Query("SELECT id, name, author, reviewer FROM Book")
    List<Book> testQuery();
} 
```

抛出异常

```
Caused by: org.hibernate.QueryException: No data type for node:        org.hibernate.hql.internal.ast.tree.IdentNode 
 \-[IDENT] IdentNode: 'reviewer' {originalText=reviewer}
at org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:161) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1026) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:794) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:694) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:330) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:278) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:276) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]
... 73 common frames omitted 
```

但是如果我删除第二个引用列

```
@Query("SELECT id, name, author FROM Book")
List<Book> testQuery(); 
```

程序无异常启动。

**问题通过更换解决**

**@Query("SELECT id, name, author, reviewer FROM Book")**

**和**

**@Query("SELECT id, name, b.author, b.reviewer FROM Book b")**

# ruby - Capistrano 使用 EventMachine 定期计时器远程执行

> ID：12057710
> 
> 赞同：0
> 
> 时间：2012-08-21T14:58:44.063
> 
> 标签：ruby, timer, capistrano, eventmachine

我正在使用 ruby​​ splash gem（使用 Capistrano 作为其部署机制）执行命令以在远程 Ubuntu 服务器上启动一个简单的 ruby​​ 应用程序。下面是我认为问题所在的 ruby​​ 应用程序代码的一小段。

```
...
require 'eventmachine'
...
fork { run }

def run
    EM.run{
        Signal.trap('INT') { @log.debug("trapped INT signal"); stop(true) }
        Signal.trap('TERM'){ @log.debug("trapped TERM signal"); stop(true) }

        begin 

            pulsate
            @log.info "still ok here"
            EM.add_periodic_timer 60 do  # 1 minute
                @log.info "doesn't get here"                    
                pulsate
            end
            @log.info "doesn't get here"

        rescue => exc
            #never gets here    
            @log.error "Unable to add EM timer due to: #{exc}"
            exit -1
        end  
    }
end 

def pulsate...
def stop...
etc
... 
```

奇怪的是，当我 ssh 到服务器并在那里运行时，它运行起来没有任何问题。但是，当使用洒/capistrano 时，只要该过程到达**EM.add_periodic_timer**，它就会消失。没有抛出异常，没有信号，没有日志输出，它似乎永远不会进入下一行？

另外，我正在使用最新版本的 EventMachine gem：eventmachine (1.0.0.rc.4) 和 capistrano (2.12.0)

关于为什么它在远程执行期间可能会失败但在服务器上执行时不会失败的任何想法？我可以尝试获取更多信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:54:56.620

在调用 EM.run 之前尝试设置全局 EM 错误处理程序。[您可以在EM#error_handler](http://eventmachine.rubyforge.org/EventMachine.html#M000496)上查看文档，这可能会为您提供有关正在发生的事情的线索。

# jasper-reports - 使用 iReport 和 JasperReport 时在条形图中显示值

> ID：12057712
> 
> 赞同：0
> 
> 时间：2012-08-21T14:58:48.393
> 
> 标签：jasper-reports, ireport, jfreechart, bar-chart

我们正在使用 iReport 4.6.0 设计报告。已经使用了多个条形图和 3D 条形图……但是无论我做什么，我都无法在条形图内部或顶部显示每个条形图的单独值的酒吧。对于条形图和 3D 条形图，我们都面临这个问题。

从 ireport 生成的 .jrxml 文件立即在我的应用程序中用于生成报告...

任何人都请指导如何在栏内或栏顶部显示每个栏的值..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T09:04:13.203

如果 IReport“显示标签”选项已选中，则取消选中并再次检查以使其正常工作。使用 IReport 5.1.0 为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:36:13.190

当我尝试从 java 创建动态图表时遇到同样的问题。我无法解决使用***DJChart***的问题。我使用***JFreeChart***查看系列部分的值。并将其与报告连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:14:18.490

我也面临与您相同的问题，但我已经解决了。首先，您必须检查图表属性中的“显示标签”选项。然后，您需要做的是尝试使您的条形图具有适当的大小，以允许标签显示在每个条形的顶部。如果这种方式仍然不成功，请尝试使用图表定制器进行探索，这里是供您参考的链接。祝你好运..

[http://mdahlman.wordpress.com/2010/08/18/chart-customizers-1/](http://mdahlman.wordpress.com/2010/08/18/chart-customizers-1/)

# javascript - 通过 JSON 从 Javascript for jqGrid 发送服务器端对象

> ID：12057715
> 
> 赞同：0
> 
> 时间：2012-08-21T14:58:51.050
> 
> 标签：javascript, asp.net, asp.net-mvc, json, jqgrid

我的服务器端代码中有一个类，例如：

```
public class foo
{
   public int FieldOne { get; set; }
   public string FieldTwo { get; set; }
   public float FieldThree { get; set; }
} 
```

现在，在我的客户端代码中，有一个表单可以在输入中加载数据，这些数据用于从数据库中检索信息，然后必须将该信息加载到 jqGrid。

我知道如何从表单中获取服务器端函数/操作数据，如果它是 [HttpPost] 的形式，例如：

```
[HttpPost]
public ActionResult Index (foo model)
{
   ...
} 
```

但我无法让网格调用此方法。我已将 jqGrid 的参数“url”设置为“Controller/Index”，但它没有调用它。

反正有这样称呼吗？或者有没有其他方法可以通过 Javascript 以对象格式发送表单信息？

谢谢。

**升级版：**

这是网格代码：

```
grid.jqGrid({
        url: "Controller/Action",
        datatype: 'json',
        emptyrecords: "No hay proyectos cargados",
        colNames: ['Code', 'Desc', 'Rev', 'Client'],
        colModel: [
                 { name: 'Code', index: 'Code', width: 100 },
                 { name: 'Desc', index: 'Desc asc, Desc', width: 200 },
                 { name: 'Rev', index: 'Rev', width: 100, align: "right" },
                 { name: 'Client', index: 'Client', width: 200, align: "right" }
               ],
        rowNum: 10,
        loadonce: false,
        sortname: 'Code',
        viewrecords: true,
        sortorder: "desc",
        height: 'auto',
        caption: ""
    }); 
```

如果我更改@Url.Action() 生成的URL 也是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:19:02.463

在您的网格中添加此行。

```
mtype: 'GET' 
```

现在，您的网格正在尝试对仅 POST 操作的 GET（默认）请求（由于您应用的属性）。或者，您可以删除 POST 限制并将 AllowGet 选项添加到您的`return Json(*******)`.

可能有不止一个问题，但让我们从简单的东西开始:)

-编辑-

此外，正如评论中所提到的，Fiddlers + Firebugs/Chrome 控制台在使用 javascript / ajax / json 时有很大帮助，因为它们在出现错误时不会输出任何视觉效果。

# iphone - 在 UIWebView 中呈现 html 时，iOS 应用程序变得无响应

> ID：12057718
> 
> 赞同：4
> 
> 时间：2012-08-21T14:59:01.847
> 
> 标签：iphone, ios, ipad, uiwebview

如果我在 UIWebView 中加载包含大量内容的请求，应用程序在完成下载内容并开始渲染后变得无响应。加载的文档还包含一些将在文档加载时执行的 Java 脚本内容。

此外，如果我通过按主页按钮最小化应用程序，应用程序会崩溃。

如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:05:18.927

看看[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

在“Grand Central Dispatch in Practice”部分描述了您的问题和最佳实践解决方案。

此致！

# c# - 如何将 UIHint 属性用于接口的属性类型？

> ID：12057722
> 
> 赞同：7
> 
> 时间：2012-08-21T14:59:15.527
> 
> 标签：c#, asp.net-mvc-3, interface

我有下一个视图模型：

```
public class PickUpLocationViewModel 
{
    public DateTime PuDate {get;set}

    public IAddressViewModel {get;set;}
} 
```

取决于 IAddressViewModel 的实现我想使用适当的 UIHint("Airport")、UIHint("Seaport") 等。有可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:33:02.903

您可以像这样在 TemplateName 的 IAddressViewModel 上创建一个额外的属性：

```
public interface IAddressViewModel
{
    string TemplateName { get; }
} 
```

因此，对于每个实现 IAddressViewModel 的类，您可以定义一个单独的模板名称，例如：

```
public class SeaportAddressViewModel : IAddressViewModel
{
    public string TemplateName
    {
        get
        {
            return "Seaport";
        }
    }
} 
```

然后在您的视图中，您可以使用 EditorFor 的重载之一，例如：

```
@Html.EditorFor(m => m.Address, Model.Address.TemplateName) 
```

这应该会导致它使用名为 Seaport.cshtml 的编辑器模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:39:18.210

假设您有以下模型：

```
public class PickUpLocationViewModel 
{
    public DateTime PuDate { get; set }

    public IAddressViewModel Address { get; set; }
}

public class AirportAddressViewModel: IAddressViewModel
{
    public string Terminal { get; set; }
}

public class SeaportAddressViewModel: IAddressViewModel
{
    public int DockNumber { get; set; }
} 
```

然后是控制器动作：

```
public ActionResult Index() 
{
    var model = new PickUpLocationViewModel 
    {
        Address = new AirportAddressViewModel { Terminal = "North" }
    };
    return View(model);
} 
```

和相应的观点：

```
@model PickUpLocationViewModel
@Html.DisplayFor(x => x.Address) 
```

现在您可以定义相应的显示/编辑器模板：

`~/Views/Shared/EditorTemplates/AirportAddressViewModel.cshtml`：

```
@model AirportAddressViewModel
@Html.DisplayFor(x => x.Terminal) 
```

`~/Views/Shared/EditorTemplates/SeaportAddressViewModel.cshtml`：

```
@model SeaportAddressViewModel
@Html.DisplayFor(x => x.DockNumber) 
```

现在基于具体类型，ASP.NET MVC 将自动使用正确的模板。

当涉及到绑定时，您将需要一个自定义模型绑定器。我在这里说明了一个：[https ://stackoverflow.com/a/6485552/29407](https://stackoverflow.com/a/6485552/29407)

# sql - Excel 2010 32 位 windows 7 64 位 odbc- 连接问题

> ID：12057725
> 
> 赞同：2
> 
> 时间：2012-08-21T13:42:50.840
> 
> 标签：sql, excel, vba

我们有一个 Excel 电子表格，它通过 vba odbc 连接（用户名和密码 *'d）连接到 Sage

```
Set CN = New ADODB.Connection
With CN
    .Provider = "MSDASQL"
    .ConnectionString = "DSN=SageLine132;UID=******;PWD=******;"
    .CursorLocation = adUseClient
    .Open
End With 
```

此连接在我们的装有 office 2010 的 32 位 windows xp 计算机上运行良好，但在运行 office 2010 32 位的新 windows 7 64 位计算机上无法正常工作。

当我打开 syswow64 文件夹中的 odbc32 时，系统 DSN 已安装。

是否有人对此有任何解决方法或无需访问系统 DSN（DSN-Less）即可连接的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:30:11.483

我怀疑这与存储在`syswow32/`or中的可执行文件有关`syswow64/`。

我从未使用过 Sage，但我之前在 64b 系统上遇到了 MyODBC 驱动程序的问题，这里的解决方案可能会对您有所帮助：

> 对于 win 64b 用户（XP、win7），为了访问您的 MyODBC 驱动程序（或任何其他 DB 驱动程序），您需要从 `%windir%\SysWOW64\odbcad32.exe`.

![在此处输入图像描述](../Images/704bc53babb5505be1fc5dafa5b6e2c6.png)

> 要使更改永久生效，您可以在控制面板中添加一个新的数据源图标（必须从资源管理器中执行此操作，因为它会提示您确认），将其命名为 Data Sources x64，并将其指向`%windir%\SysWOW64\odbcad32.exe`

![在此处输入图像描述](../Images/06b071a0b84e132993caab9c22de7391.png)

有关完整的文章，请参见[此处](http://www.frog101.com/archives/68)。

# iphone - 如何构建 OpenSSL 并针对可执行文件大小对其进行优化？

> ID：12057728
> 
> 赞同：3
> 
> 时间：2012-08-21T14:59:23.047
> 
> 标签：iphone, openssl

我在我的应用程序中对 OpenSSL 的使用非常有限。基本上，我只是在做这两件事：

1.  RSA解密：用RSA_new、BN_bin2bn初始化RSA密钥，用RSA_private_decrypt进行RSA解密，释放密钥。
2.  AES 解密：使用 EVP__DecryptInit( ... EVP_aes_128_cbc )、EVP_DecryptUpdate 和 EVP_DecryptFinal。

就这样。尽管这种用法非常温和，但可执行文件大小超过 1MB，大约有 1,200 个不同的符号来自 OpenSSL 库。这些包括显然不在我的代码树中的函数，例如 ASN1_ *、 SHA1_*、 EC_* 、 PKCS7 等。

我正在链接用于 iPhone Android 和 Windows 的 OpenSSL 静态库。在移动平台上，足迹是一个问题。我的链接器应该省略未引用的函数，因此这些符号似乎以某种方式被引用。

有没有办法采取更小的 OpenSSL 来减少可执行文件的大小？

你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:47:39.397

OpenSSL 中的符号包括直接或间接引用的符号。如果链接器遗漏了某些内容（因为它是自动化工具并且可能会遗漏某些内容），那么您可以尝试以下操作：

1.  使用您需要的唯一功能构建 OpenSSL。

这将使您了解您在 OpenSSL 中使用的依赖项。为此，请从您需要的顶级函数开始。您将获得所需功能的链接器错误。然后包括这些功能。经过几次迭代，您将获得最小的 OpenSSL 库。

当您需要使用其他功能时，这会产生严重的问题。

此外，您可以查看与优化相关的编译器选项，尤其是可执行文件大小。

# java - solr 无法删除任何内容

> ID：12057734
> 
> 赞同：2
> 
> 时间：2012-08-21T14:59:34.793
> 
> 标签：java, solr, solrj

我正在尝试删除我的 solr 服务器上的文档，但它不起作用并且我没有收到任何错误。

我尝试通过浏览器、curl 和 solrj 删除，但没有任何效果。

（浏览器和 curl 在这里解释：[Solr delete not working for some reason](https://stackoverflow.com/questions/2358476/solr-delete-not-working-for-some-reason)）
我的 solrj 代码是：

```
server.deleteByQuery("*:*");
server.deleteById("*");
server.deleteById("guid:*");
server.commit(true, true);

UpdateRequest update = new UpdateRequest();
update.deleteByQuery("*:*");
update.setCommitWithin(0);
server.request(update);
server.commit(true, true);

SolrQuery query = new SolrQuery("*:*");//Search for everything/anything
query.setRows(10);
query.setRequestHandler("/query");
QueryResponse qr = server.query(query); 
SolrDocumentList result = qr.getResults();
for (SolrDocument doc : result) {
    Object id = doc.get("link");
    String names = (String) doc.get("description");
System.out.println(id + " " + names);
} 
```

执行此操作后或通过 Web 界面，我总是得到结果，没有任何变化（顺便添加文档）。

任何人都知道我可以尝试什么，或者这可能是什么原因？

**更新：**

因此，我尝试再次从头开始设置所有内容，并将错误源本地化：solr 不会使用我的 Schema.xml 文件删除文档，但我仍然不知道为什么： [pastebin 上的 schema.xml](http://pastebin.com/8VdGZraa)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T10:15:45.343

我找到了原因： [solr 4.0.0 alpha 中的错误](https://issues.apache.org/jira/browse/SOLR-3432)

场：

```
<field name="_version_" type="long" indexed="true" stored="true"/> 
```

如果您在 solrconfig.xml 中启用更新日志，则在您的 schema.xml 文件中删除是必需的，如果您没有此字段，您的删除更新查询将被忽略。

```
<updateHandler class="solr.DirectUpdateHandler2">
  <updateLog>
    <str name="dir">${solr.data.dir:}</str>
  </updateLog>
</updateHandler> 
```

这发生在使用 solr 示例中的配置并且只是更改 Schema.xml 文件的每个人身上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:40:01.860

我有一个这样的工作代码：

```
SolrServer solrServer;
String url = "http://localhost:8080/solr";
solrServer = new HttpSolrServer(url);
solrServer.deleteByQuery("*:*");
solrServer.commit(); 
```

我的 Solr 版本是 3.6.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T12:35:16.993

```
//Delete particular column using Solr

SolrServer solrServer;

solrServer = new HttpSolrServer(url);

solrServer.deleteByQuery("columnName:value");

solrServer.commit(); 
```

# c# - 无法将参数值从 String 转换为 Double C#

> ID：12057741
> 
> 赞同：2
> 
> 时间：2012-08-21T14:59:56.277
> 
> 标签：c#, asp.net

我有一个由表填充的 Datalist，当我尝试从 Datalist 更新表时出现异常：“无法将参数值从 String 转换为 Double”

这是更新按钮的点击：

```
for (int x = 0; x < dlQtyBreak.Items.Count; x++)
{
    DataListItem item = dlQtyBreak.Items[x];

    string linenum = ((Label)item.FindControl("lblPBLinenum")).Text;
    string lowqty = ((TextBox)item.FindControl("txtPBLowQty")).Text;
    string highqty = ((TextBox)item.FindControl("txtPBHighQty")).Text;
    string price = ((TextBox)item.FindControl("txtPBPrice")).Text;
    string salesprice = ((TextBox)item.FindControl("txtPBSalesPrice")).Text;
    DAL.Util.updatePriceBreakRow(IQPDID(), lowqty, highqty, price, salesprice, linenum);

} 
```

下一个代码是 sql 和参数

```
public static void updatePriceBreakRow(string IQPDID, string low, string high, string price, string sPrice, string linenum)
{
    string sql = "UPDATE ItemQtyPriceDiscTable SET  LowQuantity=@LowQty, HighQuantity=@HighQty, Price=@Price WHERE linenum=@lineNum";

    AdoUtil.ACESSQLParameterCollection parameters = new AdoUtil.ACESSQLParameterCollection();
    AdoUtil.ACESSQLParameter param = new AdoUtil.ACESSQLParameter();

    param.ParamName = "@IQPDID";
    param.ParamValue = IQPDID;
    param.ParamDBType = SqlDbType.Int;
    parameters.Add(param);

    param.ParamName = "@LowQty";
    param.ParamValue = low;
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@HighQty";
    param.ParamValue = high;
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@Price";
    param.ParamValue = price;
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@SalePrice";
    param.ParamValue = sPrice;
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@linenum";
    param.ParamValue = linenum;
    param.ParamDBType = SqlDbType.Int;
    parameters.Add(param);

    param.ParamName = "@update";
    param.ParamValue = lastUpdate;
    param.ParamDBType = SqlDbType.VarChar;
    parameters.Add(param);

    AdoUtil.ExecuteNonQuery(sql, parameters);
} 
```

这可能是什么原因造成的？当我在另一个数据列表上执行相同的过程时，它可以工作，唯一的区别是该表使用所有 Int 和 varchar 值，而该表使用 Float 和 varchar。如果有人有任何有用的见解来帮助解决这个问题，我们将不胜感激。如果有任何其他可能有用的代码，请问我可以发布它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:04:48.017

您的其他代码有效，因为它们使用的是 varchar datatpe，并且字符串基本上转换为 varchar。但是，在这种情况下，您需要将这些数据类型转换或转换为 double。因为字符串不能隐式转换为双精度。这是解决方案；

```
param.ParamName = "@LowQty";
param.ParamValue = Convert.ToDouble(low);
param.ParamDBType = SqlDbType.Float;
parameters.Add(param); 
```

您需要对所有其他双参数执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:13:21.537

既然您说您的所有测试都没有为“SalesPrice”填充值，请尝试删除或注释掉

```
param.ParamName = "@SalePrice";
param.ParamValue = sPrice;
param.ParamDBType = SqlDbType.Float;
parameters.Add(param); 
```

然后像以前一样运行它，看看结果是否相同。它可能会挂在那个空字符串上。

如果它确实是导致它的原因，只需在其中添加一个检查，然后排除该参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:10:23.597

它看起来像是一个可以快速解决的错误 - 尝试这些事情并评论您喜欢的内容。

*   尝试替换浮动中控件的读数，将 SQL 值与默认的 5f 相关联 - 看看它是否是演员表问题。如果是这样，请调用必要的强制转换方法。
*   尝试注释代码的真实部分并使用默认值来测试机制本身。
*   了解机制后，尝试注释掉部分代码，直到找到正确的位置。
*   最后在代码中添加日志，了解错误的具体位置

评论我的回答你找到的具体帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:10:43.930

```
public static void updatePriceBreakRow(string IQPDID, string low, string high, string price, string sPrice, string linenum)
{
    string sql = "UPDATE ItemQtyPriceDiscTable SET  LowQuantity=@LowQty, HighQuantity=@HighQty, Price=@Price WHERE linenum=@lineNum";

    AdoUtil.ACESSQLParameterCollection parameters = new AdoUtil.ACESSQLParameterCollection();
    AdoUtil.ACESSQLParameter param = new AdoUtil.ACESSQLParameter();

    param.ParamName = "@IQPDID";
    param.ParamValue =Convert.ToInt32(IQPDID);
    param.ParamDBType = SqlDbType.Int;
    parameters.Add(param);

    param.ParamName = "@LowQty";
    param.ParamValue =(float)Convert.ToDouble(low);
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@HighQty";
    param.ParamValue =(float)Convert.ToDouble(high);
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@Price";
    param.ParamValue = (float)Convert.ToDouble(price);
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@SalePrice";
    param.ParamValue =(float)Convert.ToDouble(sPrice);
    param.ParamDBType = SqlDbType.Float;
    parameters.Add(param);

    param.ParamName = "@linenum";
    param.ParamValue =Convert.ToInt32(linenum);
    param.ParamDBType = SqlDbType.Int;
    parameters.Add(param);

    param.ParamName = "@update";
    param.ParamValue = lastUpdate;
    param.ParamDBType = SqlDbType.VarChar;
    parameters.Add(param);

    AdoUtil.ExecuteNonQuery(sql, parameters);
} 
```

# sql - sql中的union子句

> ID：12057748
> 
> 赞同：12
> 
> 时间：2012-08-21T15:00:16.180
> 
> 标签：sql, oracle, union

给出下表描述：

```
emp : 

ename varchar2(25)

dept:

loc varchar2(25) 
```

我有以下3个案例：

```
select ename,to_number(null) from emp
union
select to_char(null),loc from dept; 
```

* * *

```
 select ename,to_number(null) from emp
    union
    select to_number(null),loc from dept; 
```

* * *

```
 select ename,null from emp
    union
    select null,loc from dept; 
```

* * *

案例1完美执行。

案例 2 执行失败。

案例 3 也完美执行。

我的理解是，我们需要确保如果联合没有对应的列，那么我们需要创建一个等效的数据类型 dummy。因此，在另一个表的相应列列表中`number`具有类似的类型。`to_number(null)`

在案例 3 中，我们指定全部为 null，所以我有点理解这种情况。`loc`但是在情况 1 中，和之间没有数据类型兼容性`to_number`，但它执行。另一方面，案例 2 失败。请澄清。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T17:03:31.457

这个答案可能有点啰嗦……

Oracle对集合操作*非常*挑剔。每列必须具有与第二个、第三个等查询中相应的数据类型相同的数据类型。

我*认为*您的第二个查询失败，因为 Oracle在执行*之前*`to_number()`评估为数字，但*在*. 您的第一个查询成功，因为第一个值已被评估为“null-ness”，然后发生。这意味着评估的顺序是：*`union`*`union`**

 **1.  第一选择功能
2.  第一选择数据类型
3.  第二选择功能
4.  联盟
5.  第二选择数据类型

我将尝试一步一步地证明这一点，但我不确定它是否构成绝对证明。

以下两个查询

```
select 1 from dual union select '1' from dual;
select '1' from dual union select 1 from dual; 
```

由于没有发生隐式转换，将失败并出现以下错误。

> ORA-01790: 表达式必须具有与对应表达式相同的数据类型

但是，以下两个都将成功

```
select null from dual union select '1' from dual;
select null from dual union select 1 from dual; 
```

如果我们选择[`dump`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions055.htm#SQLRF00635)这两个查询中的一个，则会返回以下内容：

```
SQL> select dump(a)
  2    from ( select null a from dual union select '1' from dual );

DUMP(A)
-------------------------------------------------------------------

Typ=96 Len=1: 49
NULL

SQL> select dump(a)
  2    from ( select null a from dual union select 1 from dual );

DUMP(A)
-------------------------------------------------------------------

Typ=2 Len=2: 193,2
NULL 
```

如您所见，这些列具有[不同的 data-types](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#BABCGCHG)。第一个查询，有一个字符，返回一个`char`，第二个返回一个数字，但是顺序已经颠倒了，第二个`select`先来。

最后，如果我们查看`dump`您的第一个查询

```
SQL> select substr(dump(ename),1,35) a, substr(dump(loc),1,35) b
  2    from ( select ename,to_number(null) as loc from emp
  3            union
  4           select to_char(null),loc from dept
  5                  );

A                                   B
----------------------------------- -----------------------------------
Typ=1 Len=6: 104,97,104,97,104,97   NULL
NULL                                Typ=1 Len=6: 104,97,104,97,104,97

SQL> 
```

你可以看到它`dump(to_number(null))`是空的；但 a `varchar2`not a`char`正在返回，因为这是您的列的数据类型。有趣的是，返回语句的顺序并没有颠倒，如果您将此查询创建为表，则两列都是`varchar2`.

在选择查询中确定列的数据类型时，Oracle 采用第一个已知数据类型，然后使用它来计算整体数据类型。这就是为什么第一个`select`为空的查询的行被颠倒的原因。

您的第一个查询成功，因为第一个选择`select ename,to_number(null) from emp`“描述”了结果集的外观。`|varchar2|null|`. 然后第二个查询添加 , `|varchar2|varchar2|`，这不会导致任何问题。

您的第二个查询失败，因为第一个选择`select ename,to_number(null) from emp`将结果集“描述”为`varchar2, null`. 但是，您随后尝试在`union`.

这里的信念飞跃是甲骨文决定这`to_number(null)`是一个*之前*的数字`union`，直到之后才评估它的“空值”。我真的不知道如何测试这是否真的发生，因为您无法创建带有`null`列的对象，并且您注意到您也无法选择它。

因为我无法证明甲骨文不允许的东西，所以我会尝试寻找经验证据。考虑以下查询的结果（或错误）。

```
SQL> select 1 as a from dual union select to_number(null) from dual;

         A
----------
         1

SQL> select '1' as a from dual union select to_number(null) from dual;
select '1' as a from dual union select to_number(null) from dual
       *
ERROR at line 1:
ORA-01790: expression must have same datatype as corresponding expression

SQL> select 1 as a from dual union select to_char(null) from dual;
select 1 as a from dual union select to_char(null) from dual
       *
ERROR at line 1:
ORA-01790: expression must have same datatype as corresponding expression

SQL> select '1' as a from dual union select to_char(null) from dual;

A
-
1 
```

他们似乎证明`to_char`and `to_number`，无论它们是否在 null 上执行，都会隐式定义一个数据类型，然后在`union`评估“null-ness”之前评估它在 a 中的适用性

这种解释也将涵盖该`coalesce`问题，因为在它为空*之前*`to_number(null)`是一个数字。**

# asp.net-mvc - 路由：应用程序根的多个参数

> ID：12057751
> 
> 赞同：0
> 
> 时间：2012-08-21T15:00:21.097
> 
> 标签：asp.net-mvc, routes

我正在尝试使用 root 设置我的 MVC 应用程序，如下所示：

*   mysite.com/ -> 索引操作
*   mysite.com/thingID -> 到 CurrentThing 操作
*   mysite.com/thingID/year -> 到 CurrentThing 操作

行动：`public ActionResult CurrentThing(string thingID, int year)`

我还需要常规的控制器/动作路由来使用和不使用 id。ThingID 是一个字符串。我定义了以下路线：

```
 routes.MapRoute(
            "Regular",
            "{controller}/{action}/{id}",
            new { id = UrlParameter.Optional }
        );

        routes.MapRoute(
            "RootSpecificRecord",
            "{thingID}/{year}",
            new { controller = "Things", action = "CurrentThing", year = DateTime.Now.Year }
        );

        routes.MapRoute(
            "Root",
            "",
            new { controller = "Things", action = "Index" }
        ); 
```

这工作正常，直到我访问 mysite.com/id/year，此时第一条路由将 id 视为控制器，将年份视为操作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:08:11.760

路由引擎无法区分

`/{controller}/{action}/{id}` 和`/{ThingId}/{year}`

由于您的 id 参数是可选的，并且您没有任何约束 ThingId 是 id。

您可以尝试将 RootSpecificRecord 路由放在首位，然后更改 Id 以使其仅接受整数。这将使它比您的常规路线更具体。假设 thingID 是一个整数，你可以像这样改变你的路线：

```
 routes.MapRoute(
            "RootSpecificRecord",
            "{thingID}/{year}",
            new { controller = "Things", action = "CurrentThing", year = DateTime.Now.Year },
            new {thingID= @".*\d+.*" }
        ); 
```

如果您想创建不同的约束，请参阅这篇关于路由约束[的博客文章。](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:13:45.453

默认路由必须在您的路由表中最后

# facebook - 页面帖子定位和门控一起

> ID：12057761
> 
> 赞同：1
> 
> 时间：2012-08-21T15:00:42.637
> 
> 标签：facebook, facebook-graph-api, facebook-page, targeting

如果您将新的新闻源定位机制与旧的定位（现在称为门控）机制一起用于 Page Post，会产生什么结果。我可以看到这两种机制的结果如何重叠的三种场景：

*   如果目标组是封闭组的子集，则任一组中的每个人都可以在页面上看到帖子，但只有目标组中的人才能在他们的新闻源中看到它。
*   如果目标组是一个完全独立的集合，没有重叠，那么封闭组中的人会在页面上看到帖子，但没有人会在新闻源中看到它。
*   如果目标组仅与封闭组部分重叠，则封闭组中的每个人都会在页面上看到帖子，只有重叠中的人会在他们的新闻源中看到帖子。

这个对吗？

# silverlight - Silverlight 和 SharePoint

> ID：12057763
> 
> 赞同：0
> 
> 时间：2012-08-21T15:00:54.773
> 
> 标签：silverlight, sharepoint, sharepoint-2010

我目前正在尝试在 silverlight 中异步获取数据，以使我能够填充一些自动完成框和一些其他显示控件。

我的 silverlight 应用程序基于站点的根目录。

使用客户端对象模型很容易获得每个网站和子网站和子网站（recusive）的标题，但是在 Silverlight 中，我不确定我是如何去做的。

我有根网络的网络（subWeb1 集合），我相信（最近打破了这个：（）我可以获得网络（Sub Web 2 集合），但我似乎无法访问我在 subWeb 2 中的列表需要访问！我不断得到

集合尚未初始化。它尚未被请求或请求尚未执行。可能需要明确要求

任何人都可以阐明您将如何做到这一点吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:26:01.417

要从编码的角度获得基本的了解，请观看此视频[http://www.youtube.com/watch?v=Ek8GdnBjP8g](http://www.youtube.com/watch?v=Ek8GdnBjP8g)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T15:07:10.710

有一个 Silverlight 客户端对象模型就是针对这个东西的。[这](http://forums.silverlight.net/t/255776.aspx/1)是一篇文章，准确地解释了你想要做什么。

# jquery - 如何将驱动器的快捷方式添加到asp.net项目？

> ID：12057773
> 
> 赞同：0
> 
> 时间：2012-08-21T15:01:35.150
> 
> 标签：jquery, asp.net

我已经在我的服务器中映射了包含一些 mp3 文件和其他图像的驱动器，现在我有 jQuery 插件（jPlayer）来播放 mp3 文件，我需要的这些 mo3 文件位于 Z: 驱动器中，这不是 asp 的一部分.net项目，播放器当然需要mp3文件的路径才能播放，例如[http://www.jplayer.org/audio/mp3/Miaow-03-Lentement.mp3](http://www.jplayer.org/audio/mp3/Miaow-03-Lentement.mp3)，

我正在考虑解决方案，我想到在 asp.net 项目中创建 z: drive 的快捷方式，所以它看起来像 asp.net 项目中的任何其他文件夹，但这对我不起作用，

有什么帮助或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:04:59.360

您的 mp3 文件需要可通过 url 访问。为此，您可以将 Z 上的文件夹映射为 IIS 中的虚拟目录。 *请注意，这会将它们公开给任何知道它们在哪里的人。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:07:40.990

符号链接是您需要做的。

您可以将作为项目中文件夹位置的符号链接放置到您的 z: 驱动器。“mklink /D”创建一个链接，而第一个参数是源，第二个是别名。

```
mklink /D Z:\ C:\projects\my-project\z-files 
```

请参阅以下参考资料；

[http://waxideal.com/blog/2010/03/29/using-windows-7-symlinks/](http://waxideal.com/blog/2010/03/29/using-windows-7-symlinks/)

# c# - 正确处理 MVVM 父级中子级引发的事件

> ID：12057774
> 
> 赞同：3
> 
> 时间：2012-08-21T15:01:39.127
> 
> 标签：c#, wpf, mvvm

我在这里稍微简化一下：

我有一个选项卡控件，并且希望单个选项卡能够创建更多选项卡；兄弟姐妹，如果你愿意的话。所以我称选项卡控件为父控件，其选项卡为子控件。

使用 MVVM，我的选项卡控件视图模型是这样的：

```
class ParentViewModel
{
    ObservableCollection<ChildViewModel> _pages;

    public ObservableCollection<ChildViewModel> Pages
    {
        get
        {
            if (_pages == null)
                _pages = new ObservableCollection<ChildViewModel>();
            return _pages;
        }
    }

    public ParentViewModel()
    {
        Pages.Add(new ChildViewModel());
    }
} 
```

所以我的 ParentViewModel 上有一个 ChildViewModel 对象的集合。

这是一种享受，从 ParentViewModel 内部，我当然可以轻松地将我想要的所有额外 ChildViewModel 对象添加到我的集合中，并将它们很好地反映在我的视图中。

我想要做的是允许在 ChildView 上按下按钮（例如）以导致将另一个 ChildViewModel 添加到 ParentViewModel 对象的集合中。

我已经阅读了很多关于中继命令、路由命令、relativesource 绑定、依赖注入模式等的内容，但是有人可以告诉我实现这一点的“正确”（在 MVVM 意义上）的方式，以及最好的方式完毕。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:06:56.347

我喜欢处理这种情况的一种方法是使用事件聚合。

这是 Unity 添加的一项功能（如果您尚未使用它）

基本上，您将事件聚合器添加到您的依赖注入中，然后您的父母将订阅作为事件的侦听器，您的孩子将发布事件。

这样做的好处是孩子们不知道谁在听，而父母只知道它有一个事件请求要处理。欲了解更多信息，你可以去[这里！](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:21:10.103

您可以使用[MVVM Lite](http://mvvmlight.codeplex.com/)类`Messenger`（或自己编写）：

并从子类向父类发送消息。[请参阅此处](http://jesseliberty.com/2011/01/06/windows-phone-from-scratch%E2%80%93mvvm-light-toolkit-soup-to-nuts-3/)的示例。

创建一个消息类：

```
public class AddNewChildMessage 
{
  public string Data {get;set;} //any data you need to pass
} 
```

在 ParrentViewModel 的构造函数中：

```
Messenger.Default.Register<AddNewChildMessage>
( 
     this, 
     ( message ) => AddNewChild(message ) 
);

private void AddNewChild(AddNewChildMessage message) 
{
  //do staf with message.Data if any
  Pages.Add(new ChildViewModel());
} 
```

在子视图模型中：

```
Messenger.Default.Send<AddNewChildMessage>( new AddNewChildMessage() ); 
```

添加孩子*就是一个例子*——你可以添加任何你想要的逻辑。

# java - Spring JDBC获取从查询返回的值

> ID：12057775
> 
> 赞同：2
> 
> 时间：2012-08-21T15:01:41.033
> 
> 标签：java, sql, spring, jdbc, spring-jdbc

嗨，我有一个查询，我从数据库中选择值，我想与所选数据进行比较。我能够创建查询并传入参数，但在访问从查询返回的值时仍然遇到一些问题。有人可以告诉我我是否走在正确的轨道上，我想我最后两个陈述写错了。

```
 String sql = "SELECT userName, password FROM tblusers WHERE userName = ? AND password = ? ";

    Object[] parameters = new Object[] {login.getUserName(), login.getPassword()};

    String dbUserName = (String)getJdbcTemplate().queryForObject(
            sql, parameters, String.class);

    String dbPassword = (String)getJdbcTemplate().queryForObject(
            sql, parameters, String.class); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T15:12:01.933

如果您的查询只返回一条记录，我建议您使用：

[`queryForMap(String sql, Object... args)`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html#queryForMap%28java.lang.String,%20java.lang.Object...%29)

看一下javadoc。

对于您的具体问题，这应该有效：

```
Map<String,Object> results = 
        getJdbcTemplate().queryForMap(
            "SELECT userName, password FROM tblusers WHERE userName = ? AND password = ?"
            , login.getUserName()
            , login.getPassword());

String dbUserName = (String)results.get("userName");
String dbPassword = (String)results.get("password"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:16:36.577

您的查询将返回两个字符串，如果这是您想要的，那么您应该将结果转换为一个对象，或者一次只查询一个用户名和密码。这是您如何使用行映射器同时获取用户名和密码的方法。

```
 public class CustomRowMapper implements RowMapper {

        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
            User user = new User();
            user.setPassword(rs.getString("password");
            user.setUserName(rs.getString("userName"); 
            return user;  
        }
    }

    String sql = "SELECT userName, password FROM tblusers WHERE userName = ? AND password =        ? ";

    Object[] parameters = new Object[] {login.getUserName(), login.getPassword()};

    User u = (User) getJdbcTemplate().queryForObject(sql, parameters, new CustomRowMapper()); 
```

否则 ...

```
String sql = "SELECT userName FROM tblusers WHERE userName = ? AND password = ? ";

String userName = getJdbcTemplate().queryForString(sql, parameters);

String passwordSql = String sql = "SELECT password FROM tblusers WHERE userName = ? AND password = ? ";

String password= getJdbcTemplate().queryForString(sql, parameters); 
```

# javascript - 如何使用 Greasemonkey 自动选择单选按钮？

> ID：12057776
> 
> 赞同：0
> 
> 时间：2012-08-21T15:01:42.347
> 
> 标签：javascript, forms, radio-button, greasemonkey

这是HTML：

```
<p><input type="radio" value="Number1" name="Name" />Yes</p>
<p><input type="radio" value="Number2" name="Name" />No</p>
<p><input type="radio" value="Number3" name="Name" />Maybe</p> 
```

是的，它们都具有相同的名称 - 这不是我的网站，所以我无法更改。
有没有办法使用简单的 GM 脚本自动检查***Number2 / No ？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:09:26.290

以下是纯 javascript 的方法：

```
var radBtn      = document.querySelector (
    "p input[type=radio][name='Name'][value='Number2']"
);
radBtn.checked  = true; 
```

这是使用 jQuery 的方法：

```
$("p input[type=radio][name='Name'][value='Number2']").prop ("checked", true); 
```

* * *

请注意，您希望使选择器相当具体以避免意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:06:42.960

```
var labels = document.getElementsByTagName('label'); 
for (var i = 0; i < labels.length; ++i) { 
    if (labels[i].textContent == "Instagram") { 
        labels[i].click(); 
    }
} 
```

# fpga - 将 microblaze 导入 sysgen

> ID：12057780
> 
> 赞同：0
> 
> 时间：2012-08-21T15:01:53.187
> 
> 标签：fpga

我在 matlab/simulink 中设计了一些逻辑，现在我想在那里导入 microblaze，它将通过串行端口处理通信，它还将通过寄存器块在逻辑内部设置一些参数。我在 XPS 上创建了 microblaze，然后通过 EDK 处理器模块和 HDL 网表导出到 matlab/simulink。我还在 edk 处理器块上添加了共享内存。在我尝试创建一个 hw-cosim 块之前，一切工作正常。然后我得到一个错误：

开始生成 检查模型状态 检查仿真时间 执行编译和生成

*** 错误 ***

网表生成期间发生错误。引用不存在的字段“memmap_info”。

任何帮助将不胜感激。:)

我的配置：Matlab 2011a Windows 7 Ise 13.4 设计版

谢谢， Ondrej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:11:57.733

您可能需要检查：

*   升级您的 ISE 版本。

*   验证生成的实例在创建它们后是否具有正确的名称。

# asp-classic - asp经典：检查数组中的值

> ID：12057781
> 
> 赞同：0
> 
> 时间：2012-08-21T15:01:54.307
> 
> 标签：asp-classic, vbscript

我正在为 Classic ASP 中的客户制作一个简单的问卷。

这个想法是会有10个问题。用户注册并被发送到第一个问题。回答完毕后，他们将继续进行^(第二)个问题，依此类推。可以跳过问题并在以后返回，每个问题只能回答一次。

我在用户回答的每个问题的数据库中都有一个逗号分隔的列表。

因此，用户登录并创建一个包含已回答问题列表的数组。

遍历此列表并转到第一个未回答的问题的最佳方法是什么？

已回答问题数组的示例类似于“1,4,6”，因此该用户将回答第 1、4 和 6 号问题。当用户登录时，我想将他们引导至第一个未回答的问题问题，在这种情况下为 2。一旦第二个问题得到回答，用户将被重定向到下一个未回答的问题。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:47:34.130

@Dog，我认为这提供了您正在寻找的功能。

**提示**：有关将 Microsoft 的权威 WSH 参考下载为 Windows 帮助文件的信息，请参阅[此答案。](https://stackoverflow.com/a/11371416/1497596)

```
Option Explicit

Dim oQsm : Set oQsm = New QuestionStatusManager

With oQsm
    .NumberOfQuestions = 10
    .RestoreStatus("1,4,6")
    .MarkQuestionAnswered(2)
    WScript.Echo "Questions " & .ToString() & " have been answered."
    WScript.Echo "Next unanswered question is: " & .GetNextUnansweredQuestion()
End With

Set oQsm = Nothing

' ------------------------------------------------------------------------

Class QuestionStatusManager

Private m_nNumberOfQuestions
Private m_aQuestionList()

Sub Class_Initialize()
    m_nNumberOfQuestions = -1
End Sub

Sub Class_Terminate()
    Erase m_aQuestionList
End Sub

Public Property Let NumberOfQuestions(n)
    Dim bValid : bValid = False

    If IsNumeric(n) Then
        If n = CInt(n) Then
            bValid = True
        End If
    End If

    If Not bValid Then
        Err.Raise vbObjectError + 1, "", _
           "Value '" & n & "' is not an integer."
    End If

    m_nNumberOfQuestions = CInt(n)
    ReDim m_aQuestionList(n)
End Property

Public Property Get NumberOfQuestions()
    CheckState
    NumberOfQuestions = m_nNumberOfQuestions
End Property

Private Sub CheckState()
    If m_nNumberOfQuestions = -1 Then
        Err.Raise vbObjectError + 1, "", _
           "Property 'NumberOfQuestions' has not been set."
    End If
End Sub

Sub RestoreStatus(sAlreadyAnswered)
    CheckState

    Dim aAlreadyAnswered : aAlreadyAnswered = Split(sAlreadyAnswered, ",")
    Dim i

    For i = 0 To UBound(m_aQuestionList)
        m_aQuestionList(i) = False
    Next

    For i = 0 To UBound(aAlreadyAnswered)
        m_aQuestionList(CInt(aAlreadyAnswered(i))) = True
    Next
End Sub

Sub MarkQuestionAnswered(n)
    Dim sDesc

    CheckState

    On Error Resume Next
    m_aQuestionList(n) = True

    If Err Or n = 0 Then
        sDesc = Err.Description
        On Error GoTo 0
        Err.Raise vbObjectError + 1, "", _
           "Can't mark question number '" & n & "' as answered: " & sDesc
    End If
End Sub

Function GetNextUnansweredQuestion()
    CheckState

    Dim i

    For i = 1 To UBound(m_aQuestionList)
        If Not m_aQuestionList(i) Then
            GetNextUnansweredQuestion = i
            Exit Function
        End If
    Next

    GetNextUnansweredQuestion = -1
End Function

Function ToString()
    CheckState

    Dim sDelim : sDelim = ""
    Dim i

    ToString = ""
    For i = 1 To UBound(m_aQuestionList)
        If m_aQuestionList(i) Then
            ToString = ToString & sDelim & CStr(i)
            sDelim = ","
        End If
    Next
End Function

End Class 
```

# join - 使用连接模型的 Paginator->sort() 不起作用

> ID：12057784
> 
> 赞同：0
> 
> 时间：2012-08-21T15:01:59.227
> 
> 标签：join, pagination, cakephp-2.2

我的模型关联链：

```
ArchitectPurchase belongsTo ArchitectProfile belongsTo User 
```

我的行动：

```
 $this->ArchitectPurchase->recursive = -1;
    $this->ArchitectPurchase->Behaviors->attach('Containable');

    $this->paginate['joins'] = array(
        array(
            'table' => 'architect_profiles',
            'alias' => 'ArchitectProfileJoin',
            'type' => 'inner',
            'conditions' => array(
                'ArchitectProfileJoin.id = ArchitectPurchase.architect_profile_id'
            )
        ),
        array(
            'table' => 'users',
            'alias' => 'User',
            'type' => 'inner',
            'conditions' => array(
                'User.id = ArchitectProfileJoin.user_id'
            )
        )           
    );

    $this->paginate['order'] = 'User.name DESC';

    $this->paginate['contain'] = array(
        'ArchitectProfile' => array(
            'fields' => array('ArchitectProfile.id'),
            'User' => array(
                'fields' => array('User.name')
            )
        )
    );

    $this->set('architectPurchases', $this->paginate()); 
```

此操作工作正常，按 User.name DESC 对结果进行排序。但是当我使用创建的链接时

```
echo $this->Paginator->sort('User.name') 
```

在我看来，它不起作用！

查看核心文件，发现问题出在 PaginatorComponent 的 validateSort 方法：

```
 if ($object->hasField($field)) {
                $order[$alias . '.' . $field] = $value;
            } elseif ($object->hasField($key, true)) {
                $order[$field] = $value;
            } elseif (isset($object->{$alias}) && $object->{$alias}->hasField($field, true)) {
                $order[$alias . '.' . $field] = $value;
            } 
```

由于 User 模型与 ArchitectPurchase 模型没有直接关联，我得到

```
$order = array() 
```

代替

```
$order = array('User.name' => 'asc') 
```

我尝试使用 $whitelist 参数，但仍然无法正常工作...

所以我不得不破解核心（noooo !!!），从第 345 行到第 363 行进行评论以使其工作。

我做错了什么还是这是 2.2.1 的问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T22:59:25.383

感谢您发布此信息，我实际上遇到了同样的问题，并且根据您对问题的洞察力，我能够解决它。

如果有人感兴趣，我在 CakePHP 的问题跟踪器上发布了[一张票](http://cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3569-paginatorcomponent-not-sorting-properly)，但基本上他们说它不会被修复，并提供了两个绕过问题的建议。

我修复它的方法是强制模型与具有我感兴趣的字段的模型相关联。

# javascript - JavaScript函数不返回true

> ID：12057787
> 
> 赞同：7
> 
> 时间：2012-08-21T15:02:12.980
> 
> 标签：javascript, function, return

我有以下 js 函数，我正在努力确定为什么它不会返回“true”。我已经通过在块中添加警报来验证逻辑块是否被击中，但它似乎跳过了包含 return 语句的行。

```
function requiresMatchLevel(fields) {
        $.each(fields, function (i, field) {
            if (field.OperationParamName() == "MatchLevel" && field.Include()) {
                return true;
            }
        });
        return false;
    }; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T15:05:10.950

`return`作用于每个功能的基础上。返回传递给的函数`$.each`不会让你的外部函数返回一些东西。

如果您在传递给 的函数中返回某些`$.each`内容，jQuery 将收到结果。这里唯一有效的值是`false`，它使 jQuery 跳出循环。

```
function requiresMatchLevel(fields) {
    var result = false;
    $.each(fields, function (i, field) {
        if (field.OperationParamName() == "MatchLevel" && field.Include()) {
            result = true;
            return false;  // break out of loop - no need to continue
        }
    });
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:05:03.710

怎么样

```
function requiresMatchLevel(fields) {
        var isMatch = false;
        $.each(fields, function (i, field) {
            if (field.OperationParamName() == "MatchLevel" && field.Include()) {
                isMatch = true;
            }
        });
        return isMatch;
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:06:19.437

当您运行 jquery 函数并返回 true 时，将 true 返回给 jquery。试试这个：

```
function requiresMatchLevel(fields) {
    var toBeReturned=false;
    $.each(fields, function (i, field) {
        if (field.OperationParamName() == "MatchLevel" && field.Include()) {
            toBeReturned=true;
        }
    });
    return toBeReturned;
}; 
```

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:06:07.663

```
function requiresMatchLevel(fields) {
        var ret = false;
        $.each(fields, function (i, field) {
            if (field.OperationParamName() == "MatchLevel" && field.Include()) {
                ret = true;
                return false; // here you need to return false just like break out a loop.
            }
        });
        return ret;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T19:08:05.943

使用 RETURN yourfunction();

事件上。

# php - php 错误“文件名不能为空，期望参数 1 是资源，提供的参数不是有效的流”

> ID：12057788
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:02:13.993
> 
> 标签：php

我正在尝试使用以下代码将通常大约 20,000 个数据的 csv 文件上传到 sql server 数据库中。

此代码很少成功上传，但通常我收到以下错误：

* ***警告：fopen() [function.fopen]：第 37 行 C:\Inetpub\wwwroot\file.php 中的文件名不能为空**

**警告：fgetcsv() 期望参数 1 是资源，在第 39 行的 C:\Inetpub\wwwroot\file.php 中给出的布尔值**

**警告：fclose()：提供的参数不是第 40 行 C:\Inetpub\wwwroot\file.php 中的有效流资源****

```
<?php
if(isset($_POST['SUBMIT'])) 
{
$filename =$_FILES['sel_file']['name'];
$checkextension = explode(".",$filename);

if($checkextension[1]) == "csv")
{
$filename1 = $_FILES['sel_file']['tmp_name'];
$handle=fopen($filename1,"r");
while($data=fgetcsv($handle,1000000)) { $records = count($data);  } 
fclose($handle);
if($records==15) {
$handle=fopen($filename1,"r");
while (($data = fgetcsv($handle, 1000000,",")) !== FALSE) {
$sqlquery = "INSERT into dataupload (date, field1, field2,
field3, field4, field5, field6, field7, field8, field9,
 field10, field11, field12, field13, field14, field15)
 values ('$data[0]','$data[1]', '$data[2]','$data[3]','$data[4]', 
'$data[5]', '$data[6]', '$data[7]', '$data[8]', '$data[9]',
 '$data[10]', '$data[11]', '$data[12]', '$data[13]', '$data[14]')";
 mssql_query($sqlquery); }
 fclose($handle);
 echo "imported successfuly"; } else { echo "--sorry it is not csv file..."; }
  } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:06:05.177

中的临时名称`$_FILES['input_name']['tmp_name']`不是您发送到服务器的文件的名称。

它是 PHP 生成的一个临时名称，以确保它可以存储在临时文件夹中而不会覆盖其他文件。

`$_FILES['input_name']['name']`应包含原始名称。

这是`$_FILES`数组的结构（仅当您上传一个文件时）：

```
array(
    'name'     => 'Original file name.ext',
    'type'     => 'mime/type',
    'tmp_name' => 'random_name',
    'error'    => 
        UPLOAD_ERR_OK ||
        UPLOAD_ERR_INI_SIZE ||
        UPLOAD_ERR_FORM_SIZE ||
        UPLOAD_ERR_NO_TMP_DIR ||
        UPLOAD_ERR_CANT_WRITE ||
        UPLOAD_ERR_EXTENSION ||
        UPLOAD_ERR_PARTIAL,
    'size'     => $file['size'][$key],
); 
```

# ruby-on-rails - 让 rails 中的 find_by 返回多个结果

> ID：12057790
> 
> 赞同：15
> 
> 时间：2012-08-21T15:02:19.617
> 
> 标签：ruby-on-rails, ruby, postgresql

我正在尝试返回用户创建的所有组。所有组都与用户 ID 相关联。当我运行 find_by 查询时，它只返回第一个结果。有没有办法让它返回多个？提前致谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-05-28T10:44:32.587

我正在写一个单独的答案，因为我没有 50 分，因此无法评论 James Lowrey 的答案。

find_all_by 已弃用（Ruby 4.2）。

要从模型中获取活动记录列表，请执行以下操作：

```
Model.where(attribute_name: val) 
```

例如，要查找 Vehicle 表中的所有记录（列名为“model_name”），使得 model_name 的值为“Audi”，请执行

```
@vehicles = Vehicle.where(model_name: "Audi") 
```

您可以像这样遍历这些：

```
<%  @vehicles.each do |vehicle| %> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T15:03:26.027

将 find_by 更改为 find_all_by ，它将返回所有匹配的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-19T20:19:09.560

我认为 find_all_by 现在可能已被弃用（至少，我无法让它工作）。我相信现在推荐使用“where”功能

```
where("name LIKE ?","%#{search}%")
where(instructor_id: params[:choosen_instructor_id])   
where ("id = ?",id_val) 
```

万一你不知道，？和参数列表是为了防止SQL注入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:17:06.640

用户类以 id 作为主键。
在 Group 类中存储为 user_id
然后查找与该用户关联的所有组可以找到。
@groups=Group.find_all_by_user_id(user_id)

# java - 创建xml文件时如何在java中使用<，>标签

> ID：12057793
> 
> 赞同：2
> 
> 时间：2012-08-21T15:02:29.157
> 
> 标签：java, xml

我想在 xml 中添加 html 标签。我正在使用 CDATA 它在 xml 中运行，但我使用 java <，> 标签创建 xml 文件是“<”。我不明白这种情况。

```
String returnUrl="<![CDATA[ac=S<br/>DNbZCQOijAl6HrAAyyGV]]>";
Node returnUrlNode = doc.createElement("returnurl");
returnUrlNode.setTextContent(returnUrl);
userNode.appendChild(returnUrlNode); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:17:00.163

如果出于某种原因您希望文本位于 CDATA 部分而不是简单的文本节点中，则您需要自己创建 CDATA。我假设您使用的是 DOM 而不是一些看起来相似的 API，所以它是：

```
Node returnUrlNode = doc.createElement("returnurl");
returnUrlNode.appendChild(
    doc.createCDATASection(
        "Whatever text you wanted to go in here, including unescaped < and >.")); 
```

请注意，就像 SLaks 指出的那样，当 DOM 被序列化时，所有转义都会自动发生。（在这种情况下，这意味着`<![CDATA[`and`]]>`将被自动添加。）如果您需要输出为 CDATA 部分而不是普通文本节点，这就是创建实际 CDATA 部分的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:05:02.417

Java XML API 将自动转义您的内容。

你可以只写`.setTextContent("ac=S<br/>DNbZCQOijAl6HrAAyyGV")`，Java 会为你解决`<`and `>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:06:55.957

您需要使用 XML 转义字符：

> ```
> & &amp; 
> < &lt; 
> > &gt; 
> " &quot; 
> ' &apos; 
> ```

# python - Python：在后台进程上使用 popen poll

> ID：12057794
> 
> 赞同：22
> 
> 时间：2012-08-21T15:02:32.347
> 
> 标签：python, python-3.x, popen, subprocess

我在后台运行一个很长的进程（实际上是另一个 python 脚本）。我需要知道它什么时候完成。我发现`Popen.poll()`后台进程总是返回 0。还有另一种方法可以做到这一点吗？

```
p = subprocess.Popen("sleep 30 &", shell=True,
    stdout=subprocess.PIPE, stderr=subprocess.PIPE)
a = p.poll()
print(a) 
```

上面的代码从不打印`None`。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-21T15:49:03.373

您不需要使用 shell 后台`&`语法，因为`subprocess`它将在后台自行运行进程

只需正常运行命令，然后等待`Popen.poll`返回`not None`

```
import time
import subprocess

p = subprocess.Popen("sleep 30", shell=True)
# Better: p = subprocess.Popen(["sleep", "30"])

# Wait until process terminates
while p.poll() is None:
    time.sleep(0.5)

# It's done
print("Process ended, ret code:", p.returncode) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-21T15:26:29.020

我认为您需要`popen.wait()`or`popen.communicate()`命令。Communicate 将抓取您放入`stdout`的数据。如果另一个项目是 Python 脚本，我会通过执行以下操作来避免运行调用：`stderr``PIPE``shell=True`

```
p = subprocess.Popen([python.call, "my", params, (go, here)], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
(stdout, stderr) = p.communicate()
print(stdout)
print(stderr) 
```

当然，它们持有主线程并等待其他进程完成，这可能很糟糕。如果您想忙着等待，那么您可以简单地将原始代码包装在一个循环中。（顺便说一句，您的原始代码确实为我打印了“无”）

循环解决方案中的包装示例：

```
p = subprocess.Popen([python.call, "my", params, (go, here)], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
while p.poll() == None:
    # We can do other things here while we wait
    time.sleep(.5)
    p.poll()
(results, errors) = p.communicate()
if errors == '':
    return results
else:
    raise My_Exception(errors) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-21T15:08:35.847

你不应该在最后运行你的脚本。因为 shell fork 你的进程并返回 0 退出代码。

# symfony-2.1 - Symfony 2.1 - $this->get('security.context')->isGranted('ROLE_ADMIN') 返回 false 即使 Profiler 说我有那个角色

> ID：12057795
> 
> 赞同：3
> 
> 时间：2012-08-21T15:02:35.310
> 
> 标签：symfony-2.1

我有一个控制器操作（控制器已通过 JMSDiExtraBundle`$this->securityContext`设置）：`$this->get('security.context')`

```
$user = $this->securityContext->getToken()->getUser();
$groupRepo = $this->getDoctrine()->getRepository('KekRozsakFrontBundle:Group');

if ($this->securityContext->isGranted('ROLE_ADMIN') === false) {
    $myGroups = $groupRepo->findByLeader($user);
} else {
    $myGroups = $groupRepo->findAll();
} 
```

当我登录到`dev`环境并检查分析器时，我可以看到我已`ROLE_ADMIN`授予角色，但我仍然获得过滤后的组列表。

我在我的 Controller 和 Symfony 的`RoleVoter.php`. `$this->securityContext->getToken()`我的 Controller ( )中的 Token 的字符串表示形式和 in 中的一个`RoleVoter.php`是相同的，但是当我使用 时`$token->getRoles()`，我得到了两个不同的数组。

我的用户和角色通过用户和角色实体存储在数据库中。这是我发现的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:16:05.840

终于明白了。一分钟前，一个模糊的想法出现在我的脑海中。问题是我自己的`RoleHierarchyInterface`实现引起的。我最初的想法是复制 Symfony 自己的，但从 ORM 而不是`security.yml`. 但正因为如此，我不得不完全重写这个`buildRoleMap()`函数。差异如下：

```
 private function buildRoleMap()
 {
     $this->map = array();
     $roles = $this->roleRepo->findAll();
     foreach ($roles as $mainRole) {
         $main = $mainRole->getRole();
 -       $this->map[$main] = array();
 +       $this->map[$main] = array($main);
         foreach ($mainRole->getInheritedRoles() as $childRole) {
             $this->map[$main][] = $childRole->getRole();
             // TODO: This is one-level only. Get as deep as possible.
             // BEWARE OF RECURSIVE NESTING!
             foreach ($childRole->getInheritedRoles() as $grandchildRole) {
                 $this->map[$main][] = $grandchildRole->getRole();
             }
         }
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T07:30:20.643

这种情况 - 角色已设置并显示在 Symfony 的分析器中但`isGranted`返回 false - 可能发生在角色名称不以前缀**ROLE_ 开头**时。

错误的角色名称：`USER_TYPE_ADMIN`

正确的角色名称：`ROLE_USER_TYPE_ADMIN`

# java - Java Socket - 发送 SSL 段 - 如何抑制？

> ID：12057799
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:02:45.943
> 
> 标签：java, sockets, ssl, segment

我想通过`java.net.Socket`.

消息是：`001C020000C0154C000404850D9583CC00000004560B00E42080004C`

对于我的应用程序，我需要通过一个发送此消息`TCP packet`。

但是检查 Wireshark 发生了什么，我可以看到，它将消息分成两个重新组合的 SSL 段：

1.  00
2.  1C020000C0154C000404850D9583CC00000004560B00E42080004C

我怎样才能抑制这种行为？

我的代码是：

```
OutputStream os = m_sslsocket.getOutputStream();
os.flush();
write(hex2Byte("001C020000C0154C000404850D9583CC00000004560B00E42080004C");
os.flush(); 
```

其中`hex2Byte`将十六进制字符串转换为字节数组。

**编辑**：感谢您的评论。

在任何情况下，通过 WireShark 观察时我的协议栈如下所示： ![在此处输入图像描述](../Images/14777e9a9ff3962e1c49375b50a42cca.png)

如您所见，有两个 SSL 段，其中一个为 00，另一个为其余部分。如何抑制它，只有一个片段？

以上是我写入输出流的结果。

（不要担心红色。那只是因为 IP 校验和卸载到网络设备。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:12:34.617

> 对于我的应用程序，我需要通过一个 TCP 数据包发送此消息。

运气不好，不管有没有 SSL，TCP 都不能可靠地做到这一点。调整你的期望。这是一个字节流协议。

# jquery - 淡出动画位置

> ID：12057801
> 
> 赞同：0
> 
> 时间：2012-08-21T15:03:00.313
> 
> 标签：jquery

我正在努力完成以下工作。

设置：
div 中溢出设置为隐藏的图像。

期望的效果：
当 div 悬停在上面时，图像应该在 div 内向上移动。
当图像顶部或底部与 div 的顶部或底部相遇时，图像应反转。
当鼠标离开 div 时，图像应该逐渐停止，而不是突然停止。

问题：
我找不到为页面上的多个元素使用间隔的方法，并且产生无限循环只是糟糕的编程。我似乎无法让图像正确地反转方向。

编码：

```
$(window).load(function(){
        var posts = $(".post");
        var post_images = $(".post > img");
        var post_details = $(".job_focus");

        var pan_scan = function(e){
            event.stopPropagation();
            var image = $(e.target);
            var image_height = image.height();
            var original_offset;
            var first_run = "true";

            var move_image = function(){
                var fadeout = image.attr("fadeout");
                var direction = image.attr("direction");

                if (fadeout == "false"){
                    console.log("hover animation");
                    var image_offset = parseInt(image.css("top"));
                    var direction = image.attr("direction");

                    if (image_offset - 2 < -(image_height - 160)){
                        image.attr("direction", "+");
                    } else if (image_offset + 2 > -150){
                        image.attr("direction", "-");
                    };

                    image.animate({"top": direction + "=2px"}, 1, "linear");
                } else if (fadeout == "true"){
                    console.log("fadeout animation");
                    if (first_run == "true") {

                        original_offset = image.offset().top;

                        if (direction == "-"){
                            var image_stop = original_offset - 20;
                        } else if (direction == "+") {
                            var image_stop = original_offset + 20;
                        };

                        first_run = "false";
                    };

                    current_offset = image.offset().top;

                    if (direction == "-"){
                        var image_difference = (current_offset - image_stop )/10;
                        console.log(image_stop);
                        console.log(current_offset);
                        console.log(image_difference);
                    } else if (direction == "+") {
                        var image_difference = (image_stop -  current_offset)/10;
                        console.log("test");
                    } else {
                        console.log("direction failed");
                        console.log(image);
                    };

                    if (image_difference > 1){
                        image.animate({"top": direction + "=" + image_difference}, 1, "easeOutExpo");
                    } else {
                        image.stop(true, true);
                        image.attr({"fadeout": false, "animate": false});
                        first_run = "true";
                    };
                }

                var animate = image.attr("animate");
                if (animate == "true") {
                    move_image();
                } else {
                    image.attr("animate", true);
                }
            };

            move_image();
        };

        var un_pan_scan = function(e){
            var image = $(e.target);
            image.attr("fadeout", true);
        };

        post_images.each(function(){
            // Moves images to the center of the div, sets initial values for movement, and sets the mouseenter and mouseleave handlers
            $(this).css({'top': -($(this).height()/2)}).attr({"direction": "-", "fadeout": "false", "animate": "true"}).hover(pan_scan, un_pan_scan);
        });
    }); 
```

有人可以帮我吗？我觉得我真的过于复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:24:27.007

决定重新开始并想出一种方法来拥有多个 setIntervals，每个 setIntervals 都引用正确的对象。

这就是我想出的：

```
var intervals = {};

function object_hover(e){
var num = $(e.target).attr("num");

intervals[num] = window.setInterval(function(){do_stuff_here()}, 1000);
};

function object_blur(e){
var num = $(e.target).attr("post_num");

clearInterval(intervals[post_num]);
};

objects.each(function(){$(this.hover(post_hover, post_blur)}); 
```

从那里开始工作，结果应该很好。

# iphone - 为什么按钮标题的框架设置器效果回来了？

> ID：12057803
> 
> 赞同：0
> 
> 时间：2012-08-21T15:03:17.207
> 
> 标签：iphone, uibutton

当我想更改按钮标题的位置时。我发现了奇怪的现象。

btn.titleLabel.center = CGPointMake(btn.titleLabel.center.x+10,btn.titleLabel.center.y);

这个方法有问题！

[btn setTitleEdgeInsets:UIEdgeInsetsMake(0, a.origin.x +5,0,0)];

这个方法不错！

为什么第一种方法的效果点击起来后又回来了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:10:08.130

这可能是因为 UIButton 的实现定位它的 titleLabel 基于边缘插图。所以你可以手动设置位置，但每次都会重置，因为插图是这样说的。

换句话说，只需使用 edgeInsets 属性，让 UIButton 定位 titleLabel。

# windows - 如何在 Windows 上逃避“in sed”？

> ID：12057807
> 
> 赞同：1
> 
> 时间：2012-08-21T15:03:22.120
> 
> 标签：windows, sed, escaping

我想使用 sed (Windows/cmd)替换`,`文件中的所有字符。`,"`这是我尝试过的：

```
>head -n3 SiteRank.csv
1,facebook.com
2,google.com
3,youtube.com

>head -n3 SiteRank.csv | sed s/,/,"/
1,facebook.com
2,google.com
3,youtube.com

>head -n3 SiteRank.csv | sed s/,/,\"/
sed: -e expression #1, char 7: unterminated `s' command

>head -n3 SiteRank.csv | sed s/,/,\\"/
sed: -e expression #1, char 7: unterminated `s' command

>head -n3 SiteRank.csv | sed s/,/,^"/
1,facebook.com
2,google.com
3,youtube.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:46:57.437

这是我的 X 问题的解决方案（我实际上发布了一个 Y 问题，请参阅`ghoti`有用的评论）

```
head -n3 SiteRank.csv | sed 's/,/,^"/' | sed 's/$/^"/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:14:50.703

这可能对您有用（GNU sed）：

```
head -n3 SiteRank.csv | sed 's/,\|$/&"/g' 
```

或者如果可能有多个`,`：

```
head -n3 SiteRank.csv | sed 's/,\(.*\)/,"\1"/' 
```

# jquery - 切换具有相同基本 ID 号变量的多个项目的类别

> ID：12057809
> 
> 赞同：0
> 
> 时间：2012-08-21T15:03:27.213
> 
> 标签：jquery, toggleclass

我有一个为 id 切换类的函数，我现在必须单独列出它们，但它们都将被称为 space_BORDER_somenumber。有没有办法设置函数，而不是将它们全部列出来，而是切换所有具有基本 ID 的项目？

```
$(function() {

nebula_slide_TOTAL.ev.on('rsBeforeAnimStart', function() {
        $('#space_BORDER_1').fadeToggle("slow", "linear");
        $('#space_BORDER_2').fadeToggle("slow", "linear");
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:06:16.263

您可以使用[属性启动](http://api.jquery.com/attribute-starts-with-selector/)选择器，如下所示：

```
$('[id^="space_BORDER_"]').fadeToggle("slow", "linear"); 
```

但是，使用该选择器比将类应用于所有这些元素并使用常规类选择器要慢，因此如果您有权更改定义元素的 HTML，这可能是一个更好的解决方案。

# actionscript-3 - 在 AS3 中组合颜色和 Alpha

> ID：12057812
> 
> 赞同：2
> 
> 时间：2012-08-21T15:03:39.040
> 
> 标签：actionscript-3, flash, oop

我一直在尝试找到一种方法，将 MovieClip(1)（设置为蓝色 - 50% alpha）移到 MovieClip(2)（设置为红色 - 50% alpha）上，然后 MovieClip(1) 采用颜色值等于 MovieClip(1) 和 MovieClip(2) 的初始颜色的混合（保持 50% 的 alpha 级别）。

我被卡住了 - 大脑冻结，我似乎无法找到让我靠近任何地方的解决方案！

有人对解决方案有任何想法吗？

为我提供一些进展将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:59:42.237

看看这个片段

[http://www.actionscript-flash-guru.com/blog/37-mixing-colors-add-10-percent-of-one-color-to-another-actionscript-30-as3-](http://www.actionscript-flash-guru.com/blog/37-mixing-colors-add-10-percent-of-one-color-to-another-actionscript-30-as3-)

您可以稍微调整一下以满足您的需求，例如将 rgb3 部分中的 .1 和 .9 都设置为 .5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:07:40.953

你想要的是 yourMC.transform.colorTransform

这是一些可以解释它的[进展。](http://www.flashandmath.com/basic/colors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T00:55:27.043

两个 MovieClip 对象都必须具有由其`colorTransform`属性定义的颜色。

```
var ctf :ColorTransform = mc1.transform.colorTransform;
    ctf.color = color;            
mc1.transform.colorTransform = ctf; 
```

然后将这两个`ColorTransform`对象组合成一个新`ColorTransform`对象，方法是将第一个 MovieClip 对象的每个属性与第二个 MovieClip 的相同属性的差异除以 2。

```
var ctf1 :ColorTransform = mc1.transform.colorTransform,
    ctf2 :ColorTransform = mc2.transform.colorTransform;        

var props :Array = ["redOffset", "redMultiplier", "greenOffset", "greenMultiplier", "blueOffset", "blueMultiplier"];
for each(var p :String in props)
    ctf1[p] += (ctf2[p] - ctf1[p]) * a;

mc1.transform.colorTransform = ctf1; 
```

这是一个可以自行解释的代码片段：[http ://wonderfl.net/c/fQ1i](http://wonderfl.net/c/fQ1i)

# jquery - 当我们向下滚动时，jquery resizable 在滚动 div 容器中不起作用

> ID：12057813
> 
> 赞同：1
> 
> 时间：2012-08-21T15:03:48.550
> 
> 标签：jquery, scroll, resizable

如果我将调整大小移到#holder 宽度附近，那么调整大小可以达到比#holder 宽度更宽的范围。这意味着遏制约束现在无效！我该怎么做才能让它正常工作？？？？多谢！前提：我必须保持容器的风格 .overflow:auto;position:relative ...等。出于某种原因，它们必须保留。

下面是代码：

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Resizable - Constrain resize area</title>
    <link rel="stylesheet" href="http://jqueryui.com//themes/base/jquery.ui.all.css">
    <script src="http://jqueryui.com//jquery-1.8.0.js"></script>
    <script src="http://jqueryui.com//ui/jquery.ui.core.js"></script>
    <script src="http://jqueryui.com//ui/jquery.ui.widget.js"></script>
    <script src="http://jqueryui.com//ui/jquery.ui.mouse.js"></script>
    <script src="http://jqueryui.com//ui/jquery.ui.resizable.js"></script>
     <script src="http://jqueryui.com//ui/jquery.ui.draggable.js"></script>
    <link rel="stylesheet" href="../demos.css">
    <style>
    #container { width: 500px; height: 500px;overflow:auto;position:relative }
    #container h3 { text-align: center; margin: 0; margin-bottom: 10px; }
    #resizable {   width: 150px; height: 150px;left:80px;top:50px;background-color:red;border:2px }
    #resizable, #container { padding: 0.5em; }
    #gap { width: 1000px; height: 1000px; position:absolute;left:0;top:0;  }
    #holder { width: 800px; height: 800px; position:absolute;left:0;top:0;  }
    </style>
    <script>
    $(function() {
        $( "#resizable" ).resizable({
            containment: "#holder"
        });
         $( "#resizable" ).draggable({
            containment: "#holder"
        });

    });
    </script>
</head>
<body>

<div class="demo">
<textarea cols=120 rows=10>dddddddddddddddddddddddd</textarea>
<input type=text value="ddddddddddddddddddddddddd"/>
<div style="width:500px;height:600px">
<div id="container" class="ui-widget-content">
    <h3 class="ui-widget-header">Containment</h3>

    <div id="gap" class="ui-widget-content">
 <div id="holder" class="ui-widget-content">
    </div>
    <div id="resizable"  >
        <h3 class="ui-widget-header">Resizable</h3>
    </div>
    </div>
</div>
</div> 
</div><!-- End demo -->

<div class="demo-description">
<p>Define the boundaries of the resizable area. Use the <code>containment</code> option to specify a parent DOM element or a jQuery selector, like 'document.'</p>
</div><!-- End demo-description -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:53:36.540

您需要一个主题来运行此代码。

在我的电脑里，我刚刚改变了

```
<link rel="stylesheet" href="../demos.css"> 
```

和

```
<link rel="stylesheet" href="~/Content/ui-lightness_1.8.24/jquery-ui-1.8.24.custom.css" /> 
```

它摇摆不定。例如，下载主题 ui-lightness_1.8.24，用它更改您的演示 css，然后重试。

# sitecore - 浏览 Sitecore 内容树时出现 NullReferenceException

> ID：12057816
> 
> 赞同：3
> 
> 时间：2012-08-21T15:03:54.983
> 
> 标签：sitecore, sitecore6

我们有一个 Sitecore 6.4 安装 (Sitecore.NET 6.4.1 (rev. 110621))，部署到负载平衡环境中的两台服务器。对于其中一个（并且只有一个）服务器，当您在内容编辑器中浏览内容树时，您会收到如下堆栈跟踪。它并不总是错误，但一旦你确实看到错误，它总是会发生。

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Sitecore.Shell.Applications.ContentManager.ContentEditorForm.OnLoad(EventArgs e) +1636

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +639
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +38
   System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) +35
   Sitecore.Reflection.ReflectionUtil.CallMethod(Type type, Object obj, String methodName, Boolean includeNonPublic, Boolean includeInherited, Object[] parameters) +37
   Sitecore.Reflection.ReflectionUtil.CallMethod(Object obj, String methodName, Boolean includeNonPublic, Boolean includeInherited, Object[] parameters) +66
   Sitecore.Web.UI.Sheer.ClientPage.OnLoad(EventArgs e) +420
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:02:36.387

正如@techphoria414 所说，请确保您已阅读[可扩展性指南](http://sdn.sitecore.net/Reference/Sitecore%206/Scaling%20Guide.aspx)，并确保您已重命名`..Website\App_Config\Include\ScalabilitySettings.config.example`并`ScalabilitySettings.config`检查了该配置中的各种设置。

# macos - mac上使用JNA从JComponent获取NSWindow

> ID：12057817
> 
> 赞同：2
> 
> 时间：2012-08-21T15:04:01.223
> 
> 标签：macos, java, jna

是否可以使用 JNA 在 Mac 上获取 JComponent 的底层 NSWindow 的指针或窗口编号。我在 com.sun.jna.Native 中找到了 getWindowID 和 getWindowPointer 方法。[文档](http://jna.java.net/javadoc/com/sun/jna/Native.html#getWindowID%28java.awt.Window%29)提到 getWindowID 适用于 X11，而 getWindowPointer 适用于 win32 。Mac OSX 有类似的功能吗？我知道如何使用 JNI 函数获取组件的可可窗口，但我有兴趣在 Java 中使用某些东西而不编写 JNI 函数。

-谢谢，阿比奈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:41:41.740

如果您知道如何在 jni 中执行此操作，那么您很可能可以使用 JNA 执行此操作。但是，您必须创建自己的可可库映射，或者查看[rococoa](http://code.google.com/p/rococoa/)是否已经拥有您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:34:26.387

`getWindowPointer()`对 Mac OSX 做同样的事情（它返回一个对应于可可视图引用的指针）。您可能需要进行额外的操作才能获得对您需要的确切参考的参考；正如[Denis](https://stackoverflow.com/users/143585/denis-tulskiy)所建议的那样，[rococoa](http://code.google.com/p/rococoa/)可能有一些实用程序可以提供有用的信息。

# .net - 带有加扰的非 ASCII 字符的 JSONP 字符串

> ID：12057818
> 
> 赞同：4
> 
> 时间：2012-08-21T15:04:04.453
> 
> 标签：.net, wcf, c#-4.0, jsonp

我在 C# 4.0 中有一个小型 Web 服务，它通过 JSONP 返回数据。我遇到的问题是非 ASCII 字符——比如德语变音符号（ä、ö、ü）——在到达客户端时会被打乱。以下简化代码说明了这一点：

```
// The interface
[OperationContract]
[WebGet( ResponseFormat = WebMessageFormat.Json )]
string GetTestString();

//...

// The implementation
public string GetTestString()
{
    return "String with some German characters: äöüß";
} 
```

现在，如果我通过 Firefox 通过输入 URL 访问 Web 方法，`http://localhost:31843/TestWebService/GetTestString`我会得到正确的结果：

```
"String with some German characters: äöüß" 
```

但是，如果我`callback`在 URL ( `http://localhost:31843/TestWebService/GetTestString?callback=Test`) 中指定参数，这就是 JSONP 所做的，我会得到一个打乱的结果：

```
Test("String with some German characters: Ã¤Ã¶Ã¼ÃŸ"); 
```

JSONP 序列化程序是我通过`webHttpBinding.CrossDomainScriptAccessEnabled = true;`在我的代码中设置激活的 Microsoft .NET 4.0 框架的序列化程序。我没有找到任何方法来影响该序列化程序的字符编码。你有什么想法？

另一个提示：对带有乱码的 JSONP 字符串的 Web 请求后，Firebug 在控制台上显示以下错误：

*“未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则在某些浏览器配置中，文档将呈现乱码。文件的字符编码需要在传输中声明协议或文件需要使用字节顺序标记作为编码签名。”*

显然，这似乎是问题所在。但问题是，如何配置正确的编码（为什么默认不是UTF8）？

### 更新：

我认为 Microsoft .NET DataContractJsonSerializer 有一个错误。在 JSON 的第一种情况下，它发送以下 HTTP 标头：

```
Content-Type: application/json; charset=utf-8 
```

通过指定 URL 参数使用 JSONP 时`callback`，它会发送：

```
Content-Type: application/x-javascript 
```

因此没有指定字符编码，将字符集的决定留给浏览器。在互联网上进行一些研究后，我确信没有（简单的）方法可以强制 DataContractJsonSerializer 发送`Content-Type`带有适当字符集的 HTTP 标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:45:45.947

我现在找到了一个非常简单的解决方案 - 可能有点人为 - 问题。

说明：我正在使用 JavaScript 框架为智能手机开发一个应用程序，所以它不是原生应用程序，而是在智能手机的浏览器引擎中运行。因此，所有 Web 内容（HTML、JavaScript、CSS 文件等）都在本地加载，而不是从 Web 服务器远程加载。这就是为什么没有`Content-Type`带有字符集的适当 HTTP 标头的原因，因为根本没有 HTTP。在 index.html 文件中，它是应用程序的主页（唯一的），也没有指定字符集。所以浏览器假定了一些默认字符集，不幸的是不是 UTF-8。

所以对我来说简单的解决方案是通过添加以下行来指定 index.html 中的字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

这样，嵌入的 JSONP 数据现在也可以正确显示，而无需明确指定 JSONP HTTP 响应的字符集。

当然，这并不能解决 Firefox 中的错误显示，如我上面的问题所述。但这并不重要，因为它只需要在智能手机的浏览器上正确显示。

# hibernate - Hibernate级联删除孤儿

> ID：12057819
> 
> 赞同：2
> 
> 时间：2012-08-21T15:04:05.817
> 
> 标签：hibernate, cascading-deletes, all-delete-orphan

我有 2 个实体：News 和 NewsComment

```
@Entity
@Table(name = "news", schema = "city")
public class News {

        private Set<CommentNews> comments = new HashSet<CommentNews>();
        ...
    @OneToMany(cascade={javax.persistence.CascadeType.ALL})
    @Cascade(CascadeType.DELETE_ORPHAN)
    @JoinColumn(name="news_id")
    public Set<CommentNews> getComments() {
        return comments;
    }
} 
```

和

```
@Entity
@Table(name = "comment_news", schema = "city")
public class CommentNews {
private News news;            
    ...

    @ManyToOne
@Cascade(CascadeType.DELETE_ORPHAN)
@JoinColumn(name = "news_id")
public News getNews() {
    return news;
}
} 
```

和这样的代码：

```
public void delete(int id) {
        T obj = null;
        session = HibernateUtil.openSession();
        try {
            session.beginTransaction();
            obj = (T) session.get(persistentClass, id);
            session.delete(obj);
            session.getTransaction().commit();
        } catch (HibernateException e) {
            session.getTransaction().rollback();
        } finally {
            session.close();
        }
    } 
```

我明白了

```
Hibernate: update city.comment_news set news_id=null where news_id=?
    WARN : org.hibernate.util.JDBCExceptionReporter - SQL Error: 1048, SQLState: 23000
    ERROR: org.hibernate.util.JDBCExceptionReporter - Column 'news_id' cannot be null
    ERROR: org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session
    org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: 
Column 'news_id' cannot be null 
```

我想级联删除新闻和评论新闻一起

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:32:03.187

这里的映射不正确：

在拥有的一侧，您应该使用 mappedBy 来显示映射 (JoinColumn) 在另一侧。你不应该在两边都有 JoinColumn 。

您应该使用包含 orphanRemoval 属性的 JPA 注释作为 OneToMany 的一部分。

```
@Entity
@Table(name = "news", schema = "city")
public class News {
    @OneToMany(mappedBy = "news", cascade={javax.persistence.CascadeType.ALL}, orphanRemoval = true)
    public Set<CommentNews> getComments() {
        return comments;
    }
} 
```

在拥有方你不应该声明级联行为。这是在拥有方完成的。

```
@Entity
@Table(name = "comment_news", schema = "city")
public class CommentNews {
    @ManyToOne
    @JoinColumn(name = "news_id")
    public News getNews() {
        return news;
    }
} 
```

希望这对你有用。

# android - 将 TextView 的单行设置为不同的宽度

> ID：12057820
> 
> 赞同：4
> 
> 时间：2012-08-21T15:04:07.557
> 
> 标签：android, layout, textview

我正在尝试设置一个包含两行文本的 TextView，第二行比第一行短。

有没有办法设置 TextView 的 Layout 实例（通过 TextView.getLayout() 获取）来截断第二行，还是有另一种我不知道的方法？

**编辑 1**

对我的意图有误解：我正在尝试以某种方式设置 textview 布局，我可以设置任意文本并根据长度发生以下情况：如果文本足够长以开始第二行，则制作第一行与 textview 的内容宽度一样宽的行，但第二行应该更短，例如宽度的一半。但是如果文本足够长，应该有第二行。

我检查了抽象类布局和它的子类，有一个功能

```
public int getLineEnd(int line) 
```

返回一行最后一个字符的位置。一种方法是设置文本，然后检查第二行的布局宽度，然后将文本更改为更短的版本。无论如何，这似乎是一种 hacky 方式，如果我可以自己设置一个 Layout 实例（通过 setter 方法，例如 getter

```
TextView.getLayout(). 
```

有没有人将自定义布局设置为 Textview 的子类？

**编辑 2 / 我自己的解决方案**

找到了解决方案：现在我正在检查第二行是否与导致第二行变短的区域重叠。如果是这样，我将截断文本。我使用的功能：

```
TextView.getLineCount()
TextView.getLayout().getLineStart(int line)
TextView.getLayout().getLineEnd(int line)
TextView.getPaint().measureText() 
```

也许这对任何人的未来都有帮助。

但是，如何设置自己的布局的问题仍然没有得到解答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:31:53.183

我遇到了同样的问题，这是我的解决方案：

* * *

这是代码，用于计算文本长度和截断的 truncateText 方法。

```
public class LastLineControlTextView extends TextView{

private int mMaxLines;
private float mLastLineRatio = 0.5f;
private float mLastLineWidth;
private float mAllowLength;

public LastLineControlTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    mLastLineWidth = getWidth()*mLastLineRatio;
    mAllowLength = (mMaxLines-1)*getWidth()+mLastLineWidth;
    if(!TextUtils.isEmpty(getText())){
        truncateText(getText());
    }
}

@Override
public void setText(CharSequence text, BufferType type) {
    super.setText(text, type);
    if(mAllowLength==0)
        return;
    truncateText(text);
}

@Override
public void setMaxLines(int maxlines) {
    super.setMaxLines(maxlines);
    mMaxLines = maxlines;
}

private void truncateText(CharSequence text){
    float width = Layout.getDesiredWidth(text, getPaint());
    int end = text.length();
    while(width > mAllowLength){
        width = Layout.getDesiredWidth(text, 0, end, getPaint());
        end--;
    }
    if(end==text.length())
        return;
    CharSequence processed = text.subSequence(0, end);
    System.out.println("end:"+end+"processed:"+processed);
    setText(processed);
}
} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:31:33.010

尝试`android:maxLines="1"`在您的 XML 或`textView.setMaxLines(1);`Activity 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:33:20.757

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:maxLines](http://developer.android.com/reference/android/widget/TextView.html#attr_android:maxLines)

> 使 TextView 最多有这么多行高。
> 
> 必须是整数值，例如“100”。
> 
> 这对应于全局属性资源符号 maxLines。

你也可以使用：

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:ellipsize](http://developer.android.com/reference/android/widget/TextView.html#attr_android:ellipsize)

> 如果设置，会使长于视图宽度的单词变成椭圆而不是在中间断开。您通常还希望设置 scrollHorizo​​ntally 或 singleLine 以便整个文本也被限制为单行，而不是仍然允许被分成多行。
> 
> 必须是以下常量值之一。
> 
> none start middle end marquee 这对应于全局属性资源符号ellipsize。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:33:57.993

您可以使用“\n”来标记字符串中的不同行。并使用 TextView.setGravity() 方法来定义 TextView 的 Layout。例如，

```
mTextView.setText("Hello World Hello World\nSecond.");
mTextView.setGravity(Gravity.CENTER); 
```

这个 TextView 的预览将是：

```
Hello World Hello World
        Second 
```

# image - Symfony2 + CreateFormBuilder 如何在表单中渲染图像

> ID：12057823
> 
> 赞同：4
> 
> 时间：2012-08-21T15:04:17.007
> 
> 标签：image, forms, templates, symfony

我是 Symfony2 和 CreateFormBuilder 来创建我的表单。

目前我正在使用`{{ form_widget(form) }}`来显示表单。我的实体的`path`属性是文件系统上保存的图像的路径。我想以表单（带有`<img>`html标签）显示图像，我怎样才能达到这个结果？我应该逐个字段处理模板中的表单吗？或者有没有办法只拥有模板中的一个字段并使用 渲染其他字段`{{ form_widget(form) }}`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:17:30.103

您可以做的是逐个字段处理表单，并在设置值时显示图像。

假设您有一个字段 name `image`。在 Twig 中，您可以通过`form.vars.value.image`. 然后，很容易显示一个 img 标签：

```
{% if form.vars.value.image is not null %}
    <img src="{{ asset('upload/dir/' ~ form.vars.value.image) }}" />
{% endif %} 
```

在这里，`upload/dir/`是您存储图像的路径。如果你有这个路径的常量，你可以在 Twig 中使用它：

```
{{ asset(constant('Acme\\DemoBundle\\Model\\Object::UPLOAD_DIR') ~ '/' ~ form.vars.value.image) }} 
```

另一种方法是使用自己的模板创建自己的类型：

*   [http://symfony.com/doc/current/book/forms.html#form-theming](http://symfony.com/doc/current/book/forms.html#form-theming)
*   [http://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

**编辑：**我忘记了一个有趣的选择。您可以自定义单个字段：[http](http://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field) ://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field 。这是您可以执行的操作的草稿：

```
{% form_theme form _self %}

{% block _object_image_row %}
    <div class="name_row">
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}

        {% if form.vars.value.image is not null %}
            <img src="{{ asset('upload/dir/' ~ form.vars.value.image) }}" />
        {% endif %}
    </div>
{% endblock %} 
```

# asp.net-mvc - asp.net mvc 嵌套视图模型表单提交

> ID：12057838
> 
> 赞同：5
> 
> 时间：2012-08-21T15:04:59.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3

是否可以只接受来自嵌套视图模型的回发值？

例如，我只想发布“地址”：

```
`@Html.TextBoxFor(p => p.User.Account.Address.Street)
@Html.ValidationMessageFor(p => p.User.Account.Address.Street)` 
```

`对此控制器操作：`

```
``[HttpPost]
public ActionResult SaveAddress(Address address) {
  // save to db here
}`` 
```

``目前，只有当我将地址传递给它自己的部分视图时，这些值才会回发，以便属性看起来像： ````
@Html.TextBoxFor(p => p.Street)
@Html.ValidationMessageFor(p => p.Street)

```` 

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:02:17.963

您可以指定绑定前缀：

```
[HttpPost]
public ActionResult SaveAddress([Bind(Prefix = "User.Account")] Address model) 
{
    ...
} 
```

另一种可能性是使用部分：

```
@Html.Partial("_Address", Model.User.Account.Address) 
```

和里面`_Address.cshtml`：

```
@model Address
@Html.TextBoxFor(p => p.Street)
@Html.ValidationMessageFor(p => p.Street) 
`````

# c# - c# 2010中如何将水晶报表直接导出为pdf？

> ID：12057841
> 
> 赞同：1
> 
> 时间：2012-08-21T15:05:02.010
> 
> 标签：c#, sql-server, crystal-reports-2010

如何将水晶报表直接导出为pdf，而不是保存在磁盘上，它打开并且用户必须通过pdf文件选项保存它。

我已经尝试过，**导出到磁盘**，**导出功能**，但没有一个按要求工作......

我从这些页面中获取了参考

[http://www.tek-tips.com/viewthread.cfm?qid=1398387](http://www.tek-tips.com/viewthread.cfm?qid=1398387) [http://www.tek-tips.com/viewthread.cfm?qid=1028856](http://www.tek-tips.com/viewthread.cfm?qid=1028856) http://social.msdn.microsoft.com/论坛/en/vscrystalreports/thread/3201734e-8e88-4b04-b7f5-848ac1ce4fb5 [http://forums.asp.net/t/1585859.aspx/1](http://forums.asp.net/t/1585859.aspx/1)

任何帮助将不胜感激。谢谢。

我目前正在使用 vs 2010 c# 和 sql server 2005 和 Sap Crystal Report。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:39:10.017

为了打开 PDF 格式的水晶报表，您首先需要保存它。您应该将 PDF 导出到临时文件夹（例如：）`System.IO.Path.GetTempPath()`，然后打开它。

如果您的用户想要保留它，他可以将它保存在他想要的位置。

事实上，如果您查看 Crystal Report Viewer，它会做同样的事情。它使用 guid 保存 .rpt 然后打开它。

# mysql - MySQL 使用带有 2 个查询、子查询或连接的选择？

> ID：12057843
> 
> 赞同：3
> 
> 时间：2012-08-21T15:05:04.017
> 
> 标签：mysql, sql, performance, join

与我的上一个问题（[MySQLi 性能，多个（单独的）查询与子查询](https://stackoverflow.com/q/12047245/573083)）相关，我遇到了另一个问题。

有时我使用子查询从另一个表中选择值（例如，连接到 ID 的用户名），但我不确定 select-in-select，因为它似乎不是很干净而且我不确定性能。

子查询可能如下所示：

```
SELECT
    (SELECT `user_name` FROM `users` 
     WHERE `user_id` = table2.user_id) AS `user_name`
    , `value1`
    , `value2`
FROM
    `table2`
.... 
```

对 table1 的结果使用单独的查询，对 table2 的结果使用另一个查询会“更好”（双倍连接，但不需要跨表），还是我什至应该使用 JOIN 在单个查询中获取结果？

我对 JOIN 和子查询还没有太多经验，所以我不确定在这种情况下 JOIN 是否会“太多”，因为我真的只需要一个连接到 ID 的名称（或者可能计算表中的行），或者如果它无关紧要，因为 select-in-select 也被视为某种 JOIN..

使用 JOIN 的解决方案可能如下所示：

```
SELECT
    users.user_name , table2.value1, table2.value2
FROM
    `table2`
INNER JOIN
    `users`
ON
    users.user_id = table2.user_id
.... 
```

如果我更喜欢 JOIN，在这种情况下哪一个最好：左连接、内连接还是其他？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:13:50.747

您询问是否使用`inner join`或`left join`确实表明您没有使用它们做太多工作。

这两者的用途完全不同，`inner join`用于从两个或多个表中返回一些列具有匹配值的列。`left join`当您希望连接子句中指定的表中的行即使在其他表中没有匹配列时也能返回时使用。这取决于您的应用程序。如果一张表有球员的姓名，而另一张表包含他们支付的罚金的详细信息，那么您肯定会想使用`left join`, 来计算没有罚分的球员，因此在第二张桌子上没有记录。

关于是否使用 subquery 或`join`，`join`s 在正确使用时可以快得多。**我**的意思是，当连接列上有索引时，表是按包含行数的递增顺序指定的（通常。可能有例外），连接列具有相似的数据类型等。如果所有这些条件匹配，`join`会是更好的选择。

# asp.net-mvc-3 - 服务存储库模式设计注意事项

> ID：12057847
> 
> 赞同：1
> 
> 时间：2012-08-21T15:05:11.207
> 
> 标签：asp.net-mvc-3, design-patterns, repository-pattern

以下代码运行良好，但我有一些与它的设计相关的问题。

博客条目.cs

```
 public class BlogEntry : EntityBase
    {
       /// <summary>
       /// Gets or sets the blog entry comments.
       /// </summary>
       public virtual ICollection<BlogEntryComment> BlogEntryComments { get; set; }
    } 
```

BlogEntryComment.cs

```
public class BlogEntryComment : EntityBase//, IValidatableObject
{
    /// <summary>
    /// Gets or sets the comment.
    /// </summary>
    [StringLength(2500)]
    [Required(ErrorMessageResourceName = "Comment", ErrorMessageResourceType = typeof(Validation))]
    [AllowHtml]
    public string Comment { get; set; }

    /// <summary>
    /// Gets or sets the blog entry id.
    /// </summary>
    public Guid BlogEntryId { get; set; }

    /// <summary>
    /// Gets or sets the blog entry.
    /// </summary>
    public virtual BlogEntry BlogEntry { get; set; }

    /// <summary>
    /// Gets or sets the user id.
    /// </summary>
    public Guid UserId { get; set; }

    /// <summary>
    /// Gets or sets the author.
    /// </summary>
    public virtual User User { get; set; }
} 
```

博客控制器.cs

```
 [HttpPost]
    public virtual ActionResult PostComment(Guid id, BlogEntryComment blogEntryComment)
    {
        var blogEntry = this.BlogEntryService.GetById(id);

        if (blogEntry == null)
        {
            if (Request.IsAjaxRequest())
                return Json(new { success = false, message = "Blog entry not found" });

            return new HttpNotFoundWithViewResult("NotFound");
        }

        var user = UserService.GetByUsername(User.Identity.Name);

        if (user == null)
        {
            if (Request.IsAjaxRequest())
                return Json(new { success = false, message = "Unknown user!" });

            return new HttpUnauthorizedResult();
        }

        if (!ModelState.IsValid)
        {
            var errorModel = new BlogEntryDetail()
            {
                BlogEntry = blogEntry,
                HideNewCommentsForm = false
            };

            if (this.Request.IsAjaxRequest())
            {
                return PartialView(MVC.Blog.Views._CommentsControl, errorModel);
            }
            else
            {
                errorModel.RelatedBlogEntries = this.BlogEntryService.GetRelatedBlogEntries(false, blogEntry, 3).ToArray();
                return View(errorModel);
            }
        }

        blogEntryComment.User = user;
        blogEntryComment.BlogEntry = blogEntry;

        this.BlogEntryCommentService.Add(blogEntryComment);

        var model = new BlogEntryDetail()
        {
            BlogEntry = blogEntry,
            HideNewCommentsForm = true
        };

        if (this.Request.IsAjaxRequest())
        {
            return PartialView(MVC.Blog.Views._CommentsControl, model);
        }
        else
        {
            model.RelatedBlogEntries = this.BlogEntryService.GetRelatedBlogEntries(false, blogEntry, 3).ToArray();
            return View(model);
        }
    } 
```

BlogEntryService.cs

```
public class BlogEntryService : GenericEntityService<BlogEntry>, IBlogEntryService
{
    /// <summary>
    /// Initializes a new instance of the <see cref="BlogEntryService"/> class.
    /// </summary>
    /// <param name="unitOfWork">The <see cref="IUnitOfWork"/>.</param>
    public BlogEntryService(IUnitOfWork unitOfWork)
        : base(unitOfWork.BlogEntries, unitOfWork)
    {
    } 
```

GenericEntityService.cs

```
public abstract class GenericEntityService<T> : IGenericEntityService<T> where T : MVCBlog.Core.Entities.EntityBase
{
    /// <summary>
    /// Initializes a new instance of the <see cref="GenericEntityService&lt;T&gt;"/> class.
    /// </summary>
    /// <param name="repository">The <see cref="MVCBlog.Core.Repository.IRepository{T}"/>.</param>
    /// <param name="unitOfWork">The <see cref="IUnitOfWork"/>.</param>
    protected GenericEntityService(IRepository<T> repository, IUnitOfWork unitOfWork)
    {
        this.Repository = repository;
        this.UnitOfWork = unitOfWork;
    } 
```

}

*   评论应该使用 BlogEntryService.AddComment(..) 方法或它自己的 BlogEntryCommentService.Add(..) 方法添加到数据库中，就像当前的实现一样？
*   我在控制器中验证 User 和 BlogEntry，这个验证应该是服务层的一部分吗？例如 [Service].AddComment(Guid blogEntryId, string username, string comment)
*   还有其他改进设计或代码的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:25:27.233

1.  根据 SRP（单一响应主体），它应该是 BlogEntryCommentService.Add(..)。
2.  我想，这不是服务层验证。

# asp.net-mvc - HOWTO 在 ASP.Net MVC 中实现多门户

> ID：12057848
> 
> 赞同：1
> 
> 时间：2012-08-21T15:05:11.753
> 
> 标签：asp.net-mvc, design-patterns, architecture, portal, enterprise-portal

我正在为我们的客户设计一个 Web 应用程序，其中每个客户都有一个进入系统的唯一门户。每个客户都需要能够管理他们自己的一组用户，而不用关心其他客户的用户，因此两个不同的客户都需要能够拥有一个用户 jasonsmith。

同时，一个客户表明不知道另一个客户的存在，也不知道这是一个多客户系统。

今天实施这样一个系统的标准是什么？我应该去哪里了解更多关于如何最好地实施这样一个系统的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:37:29.350

您所说的称为[多租户](http://en.wikipedia.org/wiki/Multitenancy)。

有几种方法可以解决这个问题。

最常见的方法是：

**单一数据库**

所有租户共享同一个数据库。因此，您将拥有一张包含所有租户信息的租户表。所有其他表都使用租户 ID 作为外键。

问题是您必须确保用户只能访问自己的信息（例如，用户可以尝试更改 uri 中的 id）。因此，您必须验证用户尝试访问的每个对象。

**多个数据库**

一些数据库引擎（如 RavenDB）可以毫无问题地处理多个数据库。这意味着每个客户都有自己的数据库（在用户被识别后，您在每个请求开始时加载该数据库）。

因此，在身份验证期间您将拥有一个数据库用户，以便能够识别租户和每个客户一个数据库。

这个解决方案的好处是租户不可能访问彼此的数据库。（除非他们已经入侵了该帐户）

# android - NoClassDefFoundError：项目导入从 sdk rev 17 到 sdk rev 20 的变化？

> ID：12057849
> 
> 赞同：0
> 
> 时间：2012-08-21T15:05:12.090
> 
> 标签：android, sdk, import

我前段时间从 SDK rev 15 迁移到 SDK rev 17 时提出了同样的问题：

我想将 Eclipse NOW 中的项目从 SDK rev 17 移动到 rev 20，但现在我无法再运行简单的项目导入示例，这些示例在 rev 17 下没有问题。在 rev 17 下，我只是使用构建路径导入了项目并标记了在 ORDER 和 EXPORT 选项卡中导入的项目要导出，这在 rev 17 中运行良好。

使用 rev 20 我（再次）得到以下错误：

08-21 14:53:11.786: E/AndroidRuntime(558): java.lang.NoClassDefFoundError: simple.example.SimpleClass

缺少的类是我尝试导入的项目中的一个类。

再次非常欢迎任何帮助。

问候， wnck

PS：他们为什么要再次改变这些机制？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:54:33.977

好的，永远不要同时改变太多东西。新的 eclipse、新的 ADT、新的 SDK、新的 JDK，什么都没有了。

我回到 Java 6 并通过控制台消息得到了这个提示，比如

[2012-08-27 16:39:18 - SimpleAndroidProject] Dx 错误的类文件魔法（cafebabe）或版本（0033.0000）...在解析简单/示例/SimpleClass.class 时...同时处理简单/示例/SimpleClass。班级

然后，在我将导入项目的编译器合规性更改为 1.6 后，问题得到了解决。

我向开发团队道歉！你没有改变机制。对不起！

问候， wnck

# parsing - LL1 第一和跟随规则

> ID：12057851
> 
> 赞同：3
> 
> 时间：2012-08-21T15:05:16.393
> 
> 标签：parsing, grammar, context-free-grammar, recursive-descent, compiler-construction

我正在为 LL(1) 语法构建一个解析表，这一切都有意义，除了一个方面！？

下面的规则设置接缝冲突。

• 对于每个产生式 X → αAβ，将 FIRST (β) - {€} 放入 FOLLOW(A)
• 如果 € 在 FIRST (β) 中，则将 FOLLOW(X) 放入 FOLLOW(A)

它们是规则 1 和 2（3 不是问题）。

如果生产规则不符合规则 1，您如何实施规则 2？

那么有人可以巧妙地解释哪条规则适用于哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:44:10.930

第一条规则说，如果后续集合在 A 的后续中包含 epsilon，则您将除 epsilon 之外的所有内容都放在 FIRST(β) 中。 epsilon 不应该在那里，因为 A 后面没有任何内容是不合法的。

第二条规则说，如果 β 可以是 epsilon，那么 X 之后的所有内容也是 A 的合法遵循，因为 β 可以从无中推导出来。

这些规则不是相互排斥的。您需要对每个生产应用所有规则，这不像生产符合规则 1，然后您不运行规则 2。您将运行所有规则，直到 FOLLOW 集稳定并且不再添加任何内容。

# makefile - 一个目录中有多个makefile

> ID：12057852
> 
> 赞同：63
> 
> 时间：2012-08-21T15:05:27.347
> 
> 标签：makefile

我在我的目录中有一个生成文件，它构建具有某些环境变量集的脚本。如果我想在同一目录中创建另一个设置了不同环境变量的 makefile 怎么办？我应该如何命名这两个 make 文件？`makefile.1`有效吗`makefile.2`？我怎么称呼他们？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-08-21T15:07:58.683

您可以为 makefile.win 和 makefile.nix 等文件命名并使用它们：

```
make -f makefile.win
make -f makefile.nix 
```

或者有一个 Makefile 包含：

```
win:
  make -f makefile.win

nix:
  make -f makefile.nix 
```

并使用`make win`或`make nix`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-21T15:10:52.663

你可以随意命名makefile。我通常将其命名为`somename.mk`. 要稍后使用它，您需要告诉 make 您想要什么 makefile。`-f`为此使用选项：

```
make -f somename.mk 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-21T15:12:29.730

实际上，您可以在同一个 make 文件中拥有两组环境变量。例如

```
COMPILER = gcc
CCFLAGS1 = -g
CCFLAGS2 = -Wall

a: main.c
        ${COMPILER} ${CCFLAGS1} main.c
b: test.c
        ${COMPILER} ${CCFLAGS2} test.c 
```

那么你可以说`make a`or `make b`。取决于你想要什么。

也可以使用 -f 标志来调用您要调用的生成文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-27T06:52:43.203

您可以这样做，而不是为同一目的使用多个 makefile。您可以传递环境或为同一个 makefile 设置一个标志。例如：

```
 ifeq ($(ENV),ENV1)
     ENV_VAR = THIS
    else
     ENV_VAR = THAT
    endif

    default : test

    .PHONY : test
    test:
            @echo $(ENV_VAR) 

```

然后你可以简单地运行带有参数的 make 命令

```
 make ENV=ENV1 

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-20T13:24:33.760

我在同一个目录中有两个makefile。许多食谱具有相同的名称，这里有两种解决方案：

### 1.make中的前缀

```
proja_hello:
           @echo "hello A"

projb_hello:
           @echo "hello N" 
```

### 2.保留两个单独的文件

1.  项目 A 有`makefile`. 键入`make hello`。
2.  项目 B 有一个单独的 make 文件，名为`projb.mk`. 键入`bmake hello`。
3.  This works since I've added `alias bmake ='make -f projb.mk` to my .bashrc. Note! This command can be called anywhere but only works where projb.mk exists. Note! You lose autocompletion of make with the alias and typing `make -f projb.mk hello` is not better than typing `make projb_hello`.

# java - 如何在 Java 中将字符串（IP 号码）转换为整数

> ID：12057853
> 
> 赞同：11
> 
> 时间：2012-08-21T15:05:29.203
> 
> 标签：java, parsing

例子：

```
// using Integer.parseInt
int i = Integer.parseInt("123"); 
```

你会如何做同样的事情？

```
// using Integer.parseInt
int i = Integer.parseInt("123.45.55.34"); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T15:09:34.143

您可能想要这样做：

```
// Parse IP parts into an int array
int[] ip = new int[4];
String[] parts = "123.45.55.34".split("\\.");

for (int i = 0; i < 4; i++) {
    ip[i] = Integer.parseInt(parts[i]);
} 
```

或这个：

```
// Add the above IP parts into an int number representing your IP 
// in a 32-bit binary form
long ipNumbers = 0;
for (int i = 0; i < 4; i++) {
    ipNumbers += ip[i] << (24 - (8 * i));
} 
```

当然，正如[其他人所建议的那样](https://stackoverflow.com/a/12057944/521799)，使用[`InetAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)可能比自己做事情更合适......

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-21T15:10:10.993

您可以为 IP V4 地址执行此操作，因为这些部分只是整数版本的四个字节。

这样做可以将[InetAdress](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html)转换为其整数表示：

```
int result = 0;  
for (byte b: inetAdress.getAddress())  
{  
    result = result << 8 | (b & 0xFF);  
} 
```

**请注意，现在不应将 32 位整数用于 IP 地址，因为我们正在进入 IPV6 地址时代。**

编辑：要将像“123.45.55.34”这样的字符串解析为java中有用的东西，你可以使用`INetAddress.getByName(yourString)`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-21T15:20:33.063

您需要意识到 123.45.55.34 形式的 IPv4 地址实际上是 4 个三位数字，代表地址的每个字节。一次解析整个字符串是行不通的。

其他人已经提到过使用，但如果你所拥有的只是 IP 的字符串表示，那么据我所知，`InetAddress`你不能轻易地实例化 an 。`InetAddress`

您可以执行以下操作：

```
public static int parseIp(String address) {
    int result = 0;

    // iterate over each octet
    for(String part : address.split(Pattern.quote("."))) {
        // shift the previously parsed bits over by 1 byte
        result = result << 8;
        // set the low order bits to the current octet
        result |= Integer.parseInt(part);
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-04T23:27:12.983

[IPAddress Java 库](https://seancfoley.github.io/IPAddress/)以多态方式支持 IPv4 和 IPv6。免责声明：我是那个图书馆的项目经理。

以下代码适用于 IPv4 和 IPv6 地址。使用您的示例 IPv4 地址：

```
IPAddress addr = new IPAddressString("123.45.55.34").getAddress();
BigInteger value = addr.getValue(); // 2066560802 
```

如果是 IPv4，您可以直接使用 int 值：

```
if(addr.isIPv4()) {
    int val = addr.toIPv4().intValue(); // 2066560802
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-21T11:25:40.117

```
System.out.println(
        ByteBuffer.allocate(Integer.BYTES)
        .put(InetAddress.getByName("0.0.1.0").getAddress())
        .getInt(0)); 
```

输出：

> 256

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-12T06:33:26.863

`IPAddressUtil#textToNumericFormatV4`比获取 ip 字节执行得更好`String#split`，此外，它检查 ip 是否有效

```
 public int intOfIpV4(String ip) {
        int result = 0;
        byte[] bytes = IPAddressUtil.textToNumericFormatV4(ip);
        if (bytes == null) {
            return result;
        }
        for (byte b : bytes) {
            result = result << 8 | (b & 0xFF);
        }
        return result;
    } 
```

# jsp - 如何将查询结果与jsp中的文本框值进行比较

> ID：12057859
> 
> 赞同：0
> 
> 时间：2012-08-21T15:05:54.313
> 
> 标签：jsp, jdbc

我正在创建一个应用程序，它显示数据库中的字符串。然后，此字符串将显示在无法编辑的文本框中（只读）。

我现在要求将文本框中的变量（传递的 ID）与 SQL 数据库表中的列进行比较，该列是相同的字符串。找到匹配的字符串后，我需要根据查询更新其他列。

当我使用 request.getParameter() 方法时，它的输出为空。

我需要它纯粹在jsp中完成。请帮忙。

```
<%@page import="java.sql.*"%>  
<%@page import="java.lang.*"%>  
<%@page import="java.io.*"%>  
<%@page language="Java"%>  

<html>  
<head>  
<script type="text/javascript">  
function move(){  
 document.getElementById('tgt1').value = document.getElementById('Allocation').value;  
 document.getElementById('Allocation').value="";  
 document.getElementById("Send").disabled=true;  
}  
function UnBlock()  
{  
    document.getElementById("tgt1").value="";  
    document.getElementById("Send").disabled=false;  
    document.getElementById("tgt2").style.display="block";  
    document.getElementById("Query_but").style.display="block";  
   }  
function UnBlock_Only(){  
    document.getElementById("Send").disabled=false;  
    document.getElementById("Query").disabled=true;  
}  
function Alloc_Insert()  
{  
    document.myform.action="Alloc_Insert.jsp";  
    document.myform.method="post";  
    document.myform.submit();  
}  
</script>  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">  
<style type="text/css">  
body {  
    margin-top: 20px;  
    margin-left: 30px;  
}  
</style>  
</head>  
<body>  
    <form name="myform" method="post" action="Alloc_Insert.jsp">  
<%  
try {  
    String sessname=(String)session.getAttribute("myusername");  
    PreparedStatement ps,ps2=null;  
    ResultSet rs=null;  
    Statement st=null;  
    Connection con=null;  
    Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();  
    con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "system", "tiger");  
    ps=con.prepareStatement("select DBID from Scope1 where specialist IS Null");  
    rs = ps.executeQuery();  
    if(rs.next())  
    {  
  %>  
<input type="text" name="Allocation" size="75" id="Allocation" value="<%=rs.getString("DBID")%>" readonly="readonly">  
<%  
}  
}  
catch(Exception e){  
out.println(e);  
}  
%>  
<a href="Alloc_Insert.jsp" value="Allocate" id="Send" name="Send" onclick="Clicked()">Allocate</a><br/>  
<br/><br/><br/><br/><br/><br/>  
<table>  
<tr>  
<input type="text" id="tgt1" size="100">  
<td><input type="button"value="Query" id="Query" onClic="UnBlock()"></td>  
<td><input type="button" value="Westlaw Verification" onClick="UnBlock_Only()"></td>  
</tr><br/>  
</table><textarea name="tgt2" id="tgt2" cols="30" rows="5" style="display:none"></textarea>  
<table><tr><td><a href="Insert.jsp" style="display: none" id="Query_but" onclick="Add_Query()">Submit Query</a></td></tr></table>  
<table><tr><td><input type="text" value="" id="demo" size="75"></td></tr></table>  
</form>  
 </body>  
</html> 
```

用于比较数据的jsp如下

```
<%@page import="java.sql.PreparedStatement"%>  
<%@page import="java.sql.DriverManager"%>  
<%@page import="java.sql.DriverManager"%>  
<%@page import="java.sql.Connection"%>  
<%@page import="java.sql.ResultSet"%>  
<%@page import="java.sql.ResultSet"%>  
<%@page import="java.lang.String"%>  

<html>  
    <head>  
    </head>  
    <body>  
<%   
     try{  
            ResultSet rs=null;  
            String Add=request.getParameter("Allocation.text");  
            String user=(String) session.getAttribute("myusername");  
            Class.forName("oracle.jdbc.driver.OracleDriver");  
            java.util.Date today = new java.util.Date();  
            java.sql.Timestamp t= new java.sql.Timestamp(today.getTime());  
            Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","tiger");  
            PreparedStatement ps=con.prepareStatement("Update Scope1 SET ALLOCATED=?, SPECIALIST=? WHERE DBID='"+Add+"'");  
            ps.setTimestamp(1, t);  
            ps.setString(2, user);  
            /*ps.setString(3, Add_U);*/  
            ps.executeUpdate();  
            out.println(user);  
            out.println(con);  
            out.println(t);  
            out.println(Add);  
            con.commit();  
             }  
        catch(Exception e)  
                       {  
            out.println(e);  
                       }  
%>  
    </body>  
</html> 
```

请尽早帮助我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:41:48.577

你是否得到这个语句的空值

```
String Add=request.getParameter("Allocation.text"); 
```

如果是这样，请更改为以下内容并尝试。

```
 String Add=request.getParameter("Allocation"); 

<input type="text" name="Allocation" size="75" 
id="Allocation" value="<%=rs.getString("DBID")%>" 
readonly="readonly"> 
```

问候

**编辑 1**

这行代码使`Allocation`to的值`null`。你在`move()`任何地方调用javascript函数吗？`document.getElementById('Allocation').value="";`

如果是这样，您应该从中获取值，`tgt1`因为您在此语句中分配了`Allocation`值`tgt1`

```
 document.getElementById('tgt1').value = 
document.getElementById('Allocation').value; 
```

**编辑 3**

如果你想通过点击超链接导航到你的第二页，你可以尝试如下

```
<a href="Alloc_Insert.jsp?val=<%=rs.getString("DBID")%>" /> 
```

在你的第二个jsp中

```
request.getParameter("val"). 
```

# ios - iOS - UITableViewCell 中的 UILabel 错误地截断文本

> ID：12057865
> 
> 赞同：1
> 
> 时间：2012-08-21T15:06:08.297
> 
> 标签：ios, cocoa-touch, uitableview, uilabel, truncate

我有一个奇怪的问题：

我正在使用 a`UIPickerView`来选择一些值。何时挑选值时，我希望`UITableView`从Pickerview中的该值中更新一行。所以我保存了对特定单元格的引用。

因此，当我在pickerview 中选择一行时，我在pickerview 委托方法中执行此操作`- didSelectRow...`

```
self.pickerviewCell.textLabel.text = [self.pickerViewDataSource objectAtIndex:row]; 
```

然后我用动画关闭了pickerview。但是由于某种原因，在pickerview关闭屏幕后，我看到行中的标签被更新为三个点`...`，这表明文本对于标签来说太长了，然后在点消失后一秒钟，标签的全文被陈列。文本字符串不会太长，它们的长度在 3 到 5 个字符之间，应该完全适合 a 的 textLabel `UITableViewCell`。

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:33:47.117

对我来说，问题是我的字符串以`\n`. 这适用于`UITableViewCellStyleDefault`，但是当更改为 时`UITableViewCellStyleSubtitle`，字符串被截断（无论字符串有多长，最后三个字符都更改为`...`）。从琴弦`\n`上取下来固定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:47:48.463

经过反复试验，找到了解决方案。

原来，由于单元格是一个自定义子类，`UITableViewCell`我需要将实例变量引用到该自定义子类而不是`UITableViewCell`超类。

所以我所做的只是从：

`@property (nonatomic, strong) UITableViewCell *cell`

到

`@property (nonatomic, strong) MyCell *cell`

它完美无缺。虽然很奇怪的行为。但它有效。

**编辑：**

其实我在那里太快了。仅将类更改为我的子类是行不通的。相反，我注意到起作用的是，如果在设置`self.pickerviewCell.textLabel.text`我调用的属性之后，`[self.pickerviewCell.textLabel sizeToFit]`但奇怪的是，在我的应用程序的另一个视图控制器中，我可以执行上述操作，**而无需**调用它`- sizeToFit`以`UILabel`使其正确显示。

# java - 我想知道一个Java写的程序在运行的时候，它的类会全部加载到主存吗？

> ID：12057866
> 
> 赞同：3
> 
> 时间：2012-08-21T15:06:07.743
> 
> 标签：java, eclipse

当一个用Java编写的程序运行时，它的所有类会全部加载到主存中吗？如果是这样，那不是浪费RAM吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:07:57.387

不，没关系，因为虚拟地址空间和虚拟内存。阅读这些：

[http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)

[http://en.wikipedia.org/wiki/Virtual_address_space](http://en.wikipedia.org/wiki/Virtual_address_space)

虚拟内存意味着您可以将大量内容加载到内存中，而未使用的部分将保存到磁盘并从物理 RAM 中移出。

虚拟地址空间意味着每个进程（进程的一个示例是您的 Java 程序）都有自己的地址空间，因此它不会“窃取”其他进程的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:20:02.253

仅加载在特定执行期间引用的类。大多数大型 Java 程序将经常在许多未加载的类的情况下运行，因为这些类服务于该特定进程未执行的各种场景。

标准库中的类的处理方式与应用程序类相同。例如，如果您的应用程序不引用 AWT，则不会加载 AWT 包中的类。

Java 语言规范包含明确排除类的急切初始化的措辞。

[JLS 第 12.4 节](http://java.sun.com/docs/books/jls/third_edition/html/execution.html#12.4)：

> 类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：
> 
> *   T 是一个类，并创建了一个 T 的实例。
> *   T 是一个类，并且调用了 T 声明的静态方法。
> *   分配了一个由 T 声明的静态字段。
> *   使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
> *   T 是一个顶级类，一个断言语句（第 14.10 节）是词法嵌套的

请注意我对“初始化”一词的使用。在解析定义类的二进制数据时，类被初始化为构造类对象的一部分。

没有什么可以阻止特定的 ClassLoader 实现将它看到的所有类的二进制文件加载到内存中，但它不能完全加载这些类，直到它们被请求而不违反 JLS。

有关常见的 ClassLoader 实现，请参阅 URLClassLoader。

# url - 如何为子域实现 grails Url Mapping

> ID：12057871
> 
> 赞同：3
> 
> 时间：2012-08-21T15:06:30.027
> 
> 标签：url, grails, subdomain, url-routing

我想在 grails 中为 sub.mysite.com sub2.mysite.com 等子域实现 URL 映射。目前最好的解决方案是通过 nginx/lighttpd 进行一些重写。但是可以通过本机 grails Url 映射功能实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:35:20.827

UrlMappings 并不像在 Web 服务器中那样用于完整的 URL 重写。UM 仅针对“服务器 URL”（应用程序根目录）之后的 URL 部分。如果 Web 服务器中的重写规则对您来说不够用，您还可以实现自己的过滤器并将其注册到 web.xml，但您的帖子没有提供足够的信息来决定;-)

# regex - 在 Yahoo Pipes 中返回正则表达式匹配

> ID：12057873
> 
> 赞同：0
> 
> 时间：2012-08-21T15:06:32.780
> 
> 标签：regex, yahoo-pipes

我想获取我的“item.title”字符串并将正则表达式中的匹配项存储到“item.myRegexMatch”中。但是，我不清楚如何实现这一点，因为 YP 中的所有正则表达式模块都需要一个“替换”字符串。我不想更换任何东西；我只想返回正则表达式匹配。这似乎微不足道，但我对 YP 和正则表达式还很陌生，所以希望我只是忽略了这个基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:18:20.310

**快速回答 ：**

脚步 ：

1/重命名模块：

```
[item.title] COPY [item.myRegexMatch] 
```

2/ 正则表达式模块：

```
in [item.myRegexMatch] replace [^.*(YOURREGEX).*] with [$1]
                                   ^         ^ 
```

请务必保留上一行中指示的 2 个括号。

**说明：**

“替换”字段中的括号定义了一个[反向引用](http://www.regular-expressions.info/brackets.html)。

然后在“with”字段中使用此反向引用 ($1)。

# codeigniter - 无法从我的 codeIgniter 项目访问 google 帐户

> ID：12057875
> 
> 赞同：0
> 
> 时间：2012-08-21T15:06:39.960
> 
> 标签：codeigniter, oauth-2.0, account

我正在尝试将谷歌日历集成到我的 codeIgniter 应用程序中。API 中有一个我不理解的细节。为了授权应用程序访问 google 帐户，使用了 OAuth2。在设置应用程序的名称、客户端 ID 等之后，应该执行以下操作（根据教程）：

```
if ($this->input->get('code')) 
{
    $client->authenticate();
    $_SESSION['token'] = $client->getAccessToken();
    header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) 
{ 
    $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) 
{ 
    $activities = $plus->activities->listActivities('me', 'public');
    print 'Your Activities: <pre>' . print_r($activities, true) . '</pre>';

    // We're not done yet. Remember to update the cached access token.
    // Remember to replace $_SESSION with a real database or memcached.
    $_SESSION['token'] = $client->getAccessToken();
} 
else 
{
    $authUrl = $client->createAuthUrl();
    print "<a href='$authUrl'>Connect Me!</a>";
} 
```

我这样做了，但我总是被重定向到“连接我”页面。我真的不明白这个 com 是什么意思：

```
// We're not done yet. Remember to update the cached access token.
// Remember to replace $_SESSION with a real database or memcached. 
```

谢谢您的帮助

# javascript - iframe 的假用户代理

> ID：12057890
> 
> 赞同：13
> 
> 时间：2012-08-21T15:07:26.727
> 
> 标签：javascript, jquery, iframe, user-agent

我是 Javascript 的新手。我发现此代码可以使用 Javascript 更改用户代理。

```
var __originalNavigator = navigator;
navigator = new Object();
navigator.__defineGetter__('userAgent', function () {
    return 'Custom';
});

var iframe='<iframe id="frame" name="widget" src ="http://www.useragentstring.com/" width="100%" height="400" marginheight="0" marginwidth="0" frameborder="no" scrolling="no"></iframe>';        

document.write("User-agent header sent: " + navigator.userAgent + iframe); 
```

此代码有效并返回假用户代理，但我将如何为 iframe 设置相同的假用户代理？

这是我要做的事情：http: [//jsfiddle.net/ufKBE/1/](http://jsfiddle.net/ufKBE/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-27T13:30:17.143

[我已经在 < Load iframe content with different user agent](https://stackoverflow.com/questions/12845445/load-iframe-content-with-different-user-agent) >中回答了同样的问题

为了您的方便，我在此处复制并粘贴了答案：

首先，您必须创建一个函数来更改用户代理字符串：

```
function setUserAgent(window, userAgent) {
    if (window.navigator.userAgent != userAgent) {
        var userAgentProp = { get: function () { return userAgent; } };
        try {
            Object.defineProperty(window.navigator, 'userAgent', userAgentProp);
        } catch (e) {
            window.navigator = Object.create(navigator, {
                userAgent: userAgentProp
            });
        }
    }
} 
```

然后你需要定位 iframe 元素：

```
setUserAgent(document.querySelector('iframe').contentWindow, 'MANnDAaR Fake Agent'); 
```

您还可以为 iframe 设置一个 ID，并以 ID 为目标，而不是页面上的所有 iframe 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:28:23.167

这不是将您的用户代理切换到伪造的用户代理的正确方法。`window.navigator = {userAgent:Custom_User_Agent}`只是一个javascript执行。当您刷新页面时，它将被忽略，无论是在窗口上还是在 iframe 内，然后默认用户代理将被发送到服务器。如果你真的想切换你的用户代理，它必须是你处理的浏览器设置。一些浏览器在其设置中允许这样做，而另一些浏览器包括用户代理切换器或支持某种插件来执行此操作

> [http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/)

替代方案是，您也可以尝试从服务器访问网站或构建自己的 Web 访问应用程序。这些方式，您可以自由更改标题或使用您自己的自定义用户代理

另一种方法是使用 AJAX。但当然它受到跨域策略的限制

# javascript - 反序列化 jQuery.Serialize 的结果（到一个数组 - 而不是一个表单）

> ID：12057892
> 
> 赞同：0
> 
> 时间：2012-08-21T15:07:33.803
> 
> 标签：javascript, jquery

是否可以将 jQuery.Serialize 的结果反序列化为数组（或其他类似的 JavaScript 数据结构）？

我知道 jQuery.Deserialize 插件，但我认为您无法获得反序列化的数据；即，它用于反序列化回原始形式（您之前序列化数据的形式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:18:09.623

如果您希望它作为一个数组，请尝试使用 serializeArray 而不是序列化，这将为您提供映射到其名称的元素作为关联数组。

[.serializeArray()](http://api.jquery.com/serializeArray/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:32:25.053

正如@SpiXel 所示，您可以使用`serializeArray`从元素生成数组`<form>`。

jQuery 中没有可用的函数来转换`serialize`函数生成的字符串。您必须执行如下所示的操作

```
var paramString = $("#cform").serialize();
var jsonString = '{"' + paramString.replace(/[&=]/g, function(a, b) {
    return (a == "&" ? ",\"" : "\":");
}) + '}';
var object = $.parseJSON(jsonString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-10T16:14:06.987

尝试使用此语法，希望对您有所帮助。

```
 var d = $('#form4').serializeArray(); 
 d.push({lead_id : $("#lead_id").val()}); 
```

# java - 如何填写？对于以下情况下的准备好的声明

> ID：12057894
> 
> 赞同：0
> 
> 时间：2012-08-21T15:07:38.400
> 
> 标签：java, oracle, csv, prepared-statement

**Java插入语句：**

```
insert into temp2(NO,NAME,DATE) values(?,?,?) 
```

我收到了以下任何一种格式的 csv，即使它的格式可能会发生变化。

如何在 java 中使用 PreparedStatement 插入此语句？

可能是这样的……

```
NO,NAME,DATE
1,BALA,24-02-1987
2,BALA,24-02-1987

     (OR)

NO,DATE,NAME
1,24-02-1987,BALA
2,24-02-1987,BALA

     (OR)

DATE,NAME,NO
24-02-1987,BALA,1
24-02-1983,BALA,2 
```

如何处理？

# c - 原子调度

> ID：12057897
> 
> 赞同：4
> 
> 时间：2012-08-21T15:07:50.633
> 
> 标签：c, linux-kernel, kernel, kernel-module

在我自己的内核模块中，我试图`kthread`在一个中断处理函数中初始化一个。

在全球范围内，我有：

```
static struct task_struct *thread1; 
```

irq 的函数处理程序是：

```
static irqreturn_t* func_irq_handler (int irq, void *dev_id)
{   
    printk("irq handler ... \n");
    thread1 = kthread_create(thread_function,NULL,"my_thread");
    if ((thread1)) {
        printk(KERN_INFO "%s\n" , __FUNCTION__);
    }
    return IRQ_HANDLED;
} 
```

线程函数是：

```
static thread_function(void)
{
    unsigned long j1=jiffies+20000;
    int delay = 60*HZ;
    printk("%s \n",__FUNCTION__);

    while (time_before(jiffies,j1)) {
        schedule();
        printk(KERN_INFO "after schedule\n");
    }
} 
```

`request_irq`看起来像这样：

```
request_irq(irq,func_irq_handler,IRQF_TRIGGER_HIGH | IRQF_TRIGGER_RISING ,"test_irq",(void*)&my_miscdev); 
```

为什么我会收到此错误：

```
BUG: scheduling while atomic: swapper 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:16:04.800

我想创建一个线程需要与线程调度程序进行交互，这在中断/原子上下文中是不允许的。

更好的方法是在其他地方创建内核线程，并将中断请求处理排队。

# c# - String.Equals 的 StringComparison 类型的文化是否重要？

> ID：12057898
> 
> 赞同：8
> 
> 时间：2012-08-21T15:07:55.733
> 
> 标签：c#

在 C# 中，您可以比较两个字符串`String.Equals`并提供一个`StringComparison`.

我最近一直在寻求更新我古老的比较方法，`ToLower()`因为我读到它不适用于所有语言/文化。

据我所知，比较类型用于确定在遇到包含列表时的顺序`aé`以及`ae`应该首先出现的列表（某些文化对事物的排序方式不同）。

对于`string.Equals`，排序并不重要。因此可以安全地假设许多选项是不相关的，并且只有 [Ordinal] 和 [Ordinal]IgnoreCase 是重要的吗？

[String.Equals](http://msdn.microsoft.com/en-us/library/c64xh8f9.aspx)的MSDN 文章说

> compareType 参数指示比较是否应该使用当前或不变的文化，尊重或忽略被比较的两个字符串的大小写，或者使用单词或序数排序规则。

`string.Equals(myString, theirString, StringComparison.OrdinalIgnoreCase)`

我也很想知道 sort 方法在内部是如何工作的，它是否用于`String.Compare`计算两个字符串的相对位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T15:10:57.863

不区分大小写的比较取决于文化。例如使用土耳其文化，`i`不是小写的`I`. 与那个文化`I`是配对的`ı`，并且`İ`是配对的`i`。请参阅[Wikipedia 上的 Dotted and dotless I](http://en.wikipedia.org/wiki/Dotted_and_dotless_I)。

有许多与文化敏感字符串操作相关的奇怪影响。例如[`"KonNy".StartsWith("Kon")`可以返回`false`](https://stackoverflow.com/questions/11063084/why-am-i-seeing-this-unexpected-behavior-from-nets-startswith)。

因此，即使对于看似无害的操作，我也建议切换到对文化不敏感的操作。

* * *

即使是对文化不敏感的操作，在 unicode 中也有很多不直观的行为，例如同一个字形的多个表示、看起来相同的不同代码点、被某些操作忽略但被其他操作观察到的零宽度字符，......

# iphone - 如何平滑滚动以查看 iOS 中 tableview 中的所有项目

> ID：12057900
> 
> 赞同：1
> 
> 时间：2012-08-21T15:07:56.670
> 
> 标签：iphone, ios, uitableview, uiscrollview

我正在做一个由tableviewcell自定义的tableview，但是当我上下滚动它时，最后一项只显示图像的一半（每行左侧都有图像）并且没有任何字母（3个文本标签）显示像其他物品一样。我怎样才能更好地向下或向上滚动以查看所有项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:10:41.083

你确定你的 UITableView 是正确的尺寸吗？

如果你有状态栏和导航栏，tableview 应该是 416px 高

![界面生成器截图](../Images/cc343c432d480f040466e9f3a7b6d105.png)

# android - 您如何为已发布的 Android 应用收集错误报告

> ID：12057904
> 
> 赞同：4
> 
> 时间：2012-08-21T15:08:08.480
> 
> 标签：android

作为开发人员，要收集崩溃报告，请使用 logcat。已发布的 android 应用程序是否有标准方法来捕获崩溃日志，以便您的用户可以将它们发送给您？

例如，当应用程序崩溃时是否会调用任何回调？logcat 用来记录日志的策略是否可以用于生产游戏？

iOS 应用程序的类似问题： [如何允许用户给我反馈并为我的 iOS 应用程序提交错误报告？](https://stackoverflow.com/questions/3917047/how-can-i-allow-users-to-give-me-feedback-and-submit-bug-reports-for-my-ios-app)

相关问题 [如何在我的应用程序中接受错误报告和其他用户反馈？](https://stackoverflow.com/questions/11942771/how-can-i-accept-bug-reports-and-other-user-feedback-from-within-my-app)

**编辑 1：** 除了下面的答案中提到的框架之外，还可以使用较低级别的方法来捕获所有未捕获的异常，这里提到了[在 Android 中设置全局未捕获异常处理程序的理想方法](https://stackoverflow.com/questions/2764394/ideal-way-to-set-global-uncaught-exception-handler-in-android)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:10:44.867

我个人使用[ACRA](http://code.google.com/p/acra/)。我发现它很容易集成，并且符合我的要求。

报告会发送到 Google Docs 中的电子表格，并且可以配置为在每次应用崩溃时向您发送电子邮件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-25T14:14:10.573

使用 logcat 是一种解决方案，但仅当崩溃来自您自己的设备时才可行。但是，您也可以将用户设备上发生的崩溃自动发送给您，包括所有崩溃和设备详细信息。这可以通过[Instabug](https://instabug.com)完成，这是一个错误和崩溃报告服务。一旦发生崩溃，它会自动发送包含所有崩溃和设备详细信息的报告，而且只需一行代码即可集成到您的应用中。

* * *

为了全面披露，我在 Instabug 工作。让我知道我是否可以提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:14:02.340

您可以在您的应用程序中包含[Flurry Analytics](http://www.flurry.com/)，它会在某些内容发生崩溃并发送回您有权访问的服务器时创建错误日志。它将为您提供所有信息，例如 LogCat。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T23:46:57.563

Google 还提供 FirebaseCrash，它会在您的 Firebase 控制台上报告日志。[在此处](https://firebase.google.com/docs/crash/android)阅读有关它的更多信息

Google Play 开发者控制台还报告崩溃和应用程序无响应，在每个应用程序的崩溃和 ANR 下。

# asp.net-mvc-3 - 从 Ajax.BeginForm 调用 ActionResult

> ID：12057908
> 
> 赞同：2
> 
> 时间：2012-08-21T15:08:12.803
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我使用 Ajax 开始表单，当我单击提交按钮时，不会调用 post 方法，这里是代码：

```
 @using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "personListDivforReturnPerson"}))
    {        
        <div class="ReturnPersonGeneralPageBody">
            <div class="returnPersonHeader">
                საზღვრის კვეთისას დაფიქსირებული მონაცემები
            </div>
            <div class="fieldNameForMIA">
                <span>@Html.LabelFor(model => model.LastName, "გვარი")
                    <br />
                    @Html.EditorFor(model => model.LastName)
                 </span>
                <div class="fieldNameInnerForMIA">
                    <span>@Html.LabelFor(model => model.FirstName, "სახელი")
                        <br />
                        @Html.EditorFor(model => model.FirstName)
                       </span>
                </div>
            </div>
            <div class="fieldNameForMIA">
                <span>@Html.LabelFor(model => model.PersonalNo, "პირადი ნომერი")
                    <br />
                    @Html.EditorFor(model => model.PersonalNo)
                   </span>
                <div class="fieldNameInnerForMIA">
                    <span>@Html.LabelFor(model => model.DateOfBirth, "დაბადების თარიღი")
                        <br />
                        @Html.EditorFor(model => model.DateOfBirth)
                      </span>
                </div>
            </div>
            <div class="fieldNameForReturnCheckBox">
                @Html.LabelFor(model => model.IsIdentified, "სხვა სახელით დაბრუნდა")
                @Html.CheckBoxFor(model => model.IsIdentified)              
            </div>
            <div class="saveReturnPerson">
                <input type="image" name="submit" id="submit" src="/Content/Resources/SaveGeo.gif" />
            </div>
        </div>
    } 
```

这是从未调用过的 post 方法：

```
 [HttpPost]
        public ActionResult EditReturnPerson(int id, FormCollection collection)
        {  .... 
```

但是第一次加载时会调用此方法：

```
 public ActionResult EditReturnPerson(long parentObjectId, int parentObjectTypeId, bool readOnly = false)
        {
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:13:30.150

在 AjaxOptions 中将方法称为**POST**

```
new AjaxOptions { UpdateTargetId = "personListDivforReturnPerson", 
                                                         HttpMethod ="POST"} 
```

如果您不提及，它将采用默认值，即`GET`.

**编辑：**另外，如果你想用自己的代码处理它，你可以用手写的 JavaScript 来做。相当干净和完全控制。

摆脱`AjaxBeginForm`并在您的视图中使用正常形式。

```
@using(Html.BeginForm())
{
  @Html.EditorFor(model => model.FirstName)
  @Html.EditorFor(model => model.PersonalNo)
  <input type="submit" class="ajaxSubmit" />
} 
```

现在有一些 javascript 来处理表单提交

```
<script type="text/javascript">
 $(function(){

   $(".ajaxSubmit").click(function(e){
        e.preventDefault();
        var item=$(this);
        $.post("@Url.Action("EditReturnPerson","YourControllerName")",
                         item.closest("form").serialize(), function(response){

                    $("#personListDivforReturnPerson").html(response);
        });              
   });

 });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:05:57.290

ბიჭოაქვერგეტყვიანვერაფერს：dგეუბნებისერვერსმიმართავსდაიქუშლისრაღაცახელს。კლიენტის მხარეს ყველაფერი კარგადაა。ესესმაგარიკაცია，ფორმასუკეთებსუბმითსდა默认მეთოდიარისპოსტიმაგდროს。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:32:04.217

我发现了我的问题，问题出`[HttpPost] public ActionResult EditReturnPerson(int id, FormCollection collection) { ....`在这部分，id 是 int，我在 DB 中的 id 是 bigint，所以我在控制器中将 int 更改为 long，一切正常，感谢您的建议。

# android - AsyncTask 不适用于 BaseAdapter

> ID：12057912
> 
> 赞同：0
> 
> 时间：2012-08-21T15:08:16.827
> 
> 标签：android, listview, android-asynctask, baseadapter

我正在构建歌曲列表应用程序。我想在加载数据时显示启动画面。为此，我设置了一个`AsyncTask`结合 ViewSwitcher 来在启动屏幕（只是徽标和圆形进度条）和主屏幕之间切换 xml 布局。问题是在将数据放入 ListView 时，我使用的是单独的类中的 BaseAdapter，它会抛出错误`"The Constructor LazyAdapter(Home.LoadViewTask, ArrayList<HashMap<String,String>>) is undefined"`。

这是具有 AsyncTask 的 Home 类的来源：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

    mBtnNaslovnica = (Button) findViewById(R.id.mBtnNaslovnica);
    mBtnNaslovnica.setSelected(true);

    new LoadViewTask().execute();
}

//To use the AsyncTask, it must be subclassed
public class LoadViewTask extends AsyncTask<Void, Integer, Void>
{
    //A TextView object and a ProgressBar object
    private TextView tv_progress;
    private ProgressBar pb_progressBar;

    //Before running code in the separate thread
    @Override
    protected void onPreExecute() 
    {
        //Initialize the ViewSwitcher object
        viewSwitcher = new ViewSwitcher(Home.this);
        /* Initialize the loading screen with data from the 'loadingscreen.xml' layout xml file. 
         * Add the initialized View to the viewSwitcher.*/
        viewSwitcher.addView(ViewSwitcher.inflate(Home.this, R.layout.init, null));

        //Set ViewSwitcher instance as the current View.
        setContentView(viewSwitcher);
    }

    //The code to be executed in a background thread.
    @Override
    protected Void doInBackground(Void... params) 
    {
        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);
        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {    

            }
        });

        return null;
    }

    //After executing the code in the thread
    @Override
    protected void onPostExecute(Void result) 
    {
        /* Initialize the application's main interface from the 'main.xml' layout xml file. 
         * Add the initialized View to the viewSwitcher.*/
        viewSwitcher.addView(ViewSwitcher.inflate(Home.this, R.layout.main, null));
        //Switch the Views
        viewSwitcher.showNext();
    }
}

//Override the default back key behavior
@Override
public void onBackPressed() 
{
    //Emulate the progressDialog.setCancelable(false) behavior
    //If the first view is being shown
    if(viewSwitcher.getDisplayedChild() == 0)
    {
        //Do nothing
        return;
    }
    else
    {
        //Finishes the current Activity
        super.onBackPressed();
    }
} 
```

这是`LazyAdapter`类的来源：

```
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(Home.KEY_TITLE));
    artist.setText(song.get(Home.KEY_ARTIST));
    duration.setText(song.get(Home.KEY_DURATION));
    imageLoader.DisplayImage(song.get(Home.KEY_THUMB_URL), thumb_image);
    return vi;
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:14:15.197

您在第一个参数中的构造函数获取 Activity 并传递 LoadViewTask 的实例（这指的是 LoadViewTask 的当前实例），而不是这样使用：

> 适配器=新的 LazyAdapter（Home.this，歌曲列表）；

Home**应该**是您的活动的名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:31:05.167

您不能进行任何 UI 修改.. 例如设置标签文本、修改 AsyncTask.doInBackground 中的列表.. 因为它是一个单独的线程...

```
 list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);
    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    }); 
```

你应该在你打电话之前把那部分代码

新的 LoadViewTask().execute();

并在 doInBackground()... 作为最后一行.. 放入此行.. adapter.notifyDataSetChanged();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T08:37:45.330

问题是，无论出于何种原因，您都需要 a`Activity`作为构造函数的第一个参数。通过传递`this`给适配器的构造函数，您传递的是一个类型的对象，该对象`AsyncTask`不是活动且没有上下文。因此，您应该`Activity`在重写的构造函数中将 an 作为参数传递`LoadViewTask`，然后将其用作构造函数的正确参数。尽管如此，在将上下文绑定到 a 时要小心，`AsyncTask`因为它可能会导致意外行为（尝试更新它`Activity`时可能不再存在）。是一个非常危险的类，因为它有许多与同步相关的缺陷。`AsyncTask``AsyncTask`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T08:26:08.340

我希望这可能会有所帮助，

```
onPostExecute include (Inside AsyncTask)

ExampleAdapter sectionedAdapter = new  EfficientAdapter(ClassInfoThread.this,getBaseContext());
listView.setAdapter(sectionedAdapter); 
```

并在您的适配器类中添加此构造函数

```
public ExampleAdapter(ExampleThread exampleThread,Context context) {
        // TODO Auto-generated constructor stub`enter code here`
        mInflater = LayoutInflater.from(context);
    } 
```

# ios5 - 总执行行数 gcov

> ID：12057919
> 
> 赞同：1
> 
> 时间：2012-08-21T15:08:38.493
> 
> 标签：ios5, code-coverage, gcov

我从代码覆盖率开始衡量我的测试有多好。我已经编译了所有程序以使用 gcov，并且我还有 .gcda 和 .gcno 文件。

如果我执行类似：“gcov --branch-probabilities --no-output mySourceFile.m”的结果，我会得到执行的行数，执行的分支......但是从一个文件中，我需要同样的措施，但是从我的整个项目。反正有这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:50:52.913

我一直在寻找的工具叫做 gcovr。这是一个 python 脚本，它总结了代码覆盖率。您只需安装并运行它，仅此而已，它会为您提供总行数、已执行总行数和已执行行百分比。

希望它可以帮助某人...

# jquery - 如何从以下返回中获取 div id？

> ID：12057920
> 
> 赞同：0
> 
> 时间：2012-08-21T15:08:47.463
> 
> 标签：jquery, variables

![在此处输入图像描述](../Images/8a6b18884c37a120376af4cd11f67e97.png)

以下代码返回上述内容。

```
var b = $(c).parent(); 
```

div id 是一个颜色代码，当用户点击一个新部分时，jQuery 会更新背景颜色。我只需要返回 ID 的颜色代码吗？

我敢肯定，答案非常简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:10:16.870

要访问 ID，您可以使用 jQuery 的`attr()`方法：[[文档](http://api.jquery.com/attr/)]：

```
var bId = $(c).parent().attr("id"); 
```

或者您可以获取原始 DOM 元素并获取 ID：

```
var bId = $(c).parent().get(0).id
//OR
var bId = $(c).parent()[0].id 
```

# r - R：向量的哪些分量是乱序的

> ID：12057923
> 
> 赞同：2
> 
> 时间：2012-08-21T15:08:54.640
> 
> 标签：r

说我有向量：

```
x <- c(11,6,5,3,2,1,25,10,16,12,22,24,19,14,18,32,17,15,8,7,
       33,4,27,9,29,13,30,23,20,31,26,21,28)
x
[1] 11  6  5  3  2  1 25 10 16 12 22 24 19 14 18 32 17 15  8  7 33  4 27  9 29 13 30 23 20
[30] 31 26 21 28 
```

我想确定哪些元素没有升序。因此，例如，元素 2 到 5（值 6、5、3、2、1）是无序的，因为它们小于元素 1 (11)。然后元素 6 是有序的，因为它大于 11，那么直到元素 16 (32) 之前的所有元素都是无序的。我想删除这些元素。

这样做的矢量化/快捷方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:15:29.917

创建一些数据：

```
set.seed(1)
x <- sample(100, 30)
x
[1] 27 37 57 89 20 86 97 62 58  6 19 16 61 34 67 43 88 83 32 63 75 17 51 10 21 29  1 28 81 25 
```

仅选择那些大于或等于累积最大值的元素：

```
x[x >= cummax(x)]
[1] 27 37 57 89 97 
```

# iphone - 如何使用 fb:// url 从其他应用程序中打开 iphone fb 应用程序中的照片

> ID：12057924
> 
> 赞同：0
> 
> 时间：2012-08-21T15:09:13.347
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我正在尝试设置一个 QR 码链接，向我显示通过远程脚本上传到 Facebook 新相册中的照片。

我看到了这个页面： [AKOSMA](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

然后我将 fb://photo/id 添加到我的二维码生成器脚本中

在 Android 上，该 URL 有效！在 iPhone 上，它会加载 Facebook 应用程序并加载一个没有照片的白页。

我应该使用什么网址？我尝试了一些我在上面的链接中读到的其他 URL，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:17:11.450

不幸的是，这似乎是不可能的。我尝试了多种方式！目前我正在链接到移动 Safari 中的照片：@"http://www.facebook.com/photo.php?fbid=%@"

# unix - 仅 Tar 目录结构

> ID：12057925
> 
> 赞同：13
> 
> 时间：2012-08-21T15:09:15.307
> 
> 标签：unix, tar

我想复制不包括文件的目录结构。tar 中是否有任何选项可以忽略所有文件并仅递归复制目录。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T15:15:11.030

您可以使用 find 获取目录，然后将它们 tar：

```
find .. -type d -print0 | xargs -0 tar cf dirstructure.tar --no-recursion 
```

如果您有超过 10000 个目录，请使用以下解决 xargs 限制：

```
find . -type d -print0 | tar cf dirstructure.tar --no-recursion --null --files-from - 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-21T21:53:56.477

包含空格或其他特殊字符的目录名称可能需要额外注意。例如：

```
$ mkdir -p "backup/My Documents/stuff"
$ find backup/ -type d | xargs tar cf directory-structure.tar --no-recursion
tar: backup/My: Cannot stat: No such file or directory
tar: Documents: Cannot stat: No such file or directory
tar: backup/My: Cannot stat: No such file or directory
tar: Documents/stuff: Cannot stat: No such file or directory
tar: Exiting with failure status due to previous errors 
```

以下是处理这些“不寻常”目录名称情况的一些变体：

```
$ find backup/ -type d -print0 | xargs -0 tar cf directory-structure.tar --no-recursion 
```

将*-print0*与 find 一起使用会将文件名作为以空字符结尾的字符串发出；使用*-0* xargs 将以相同的方式解释参数。使用 null 作为终止符有助于确保即使是带有空格和换行符的文件名也能被正确解释。

也可以将结果直接从管道`find`传输到`tar`：

```
$ find backup/ -type d | tar cf directory-structure.tar -T - --no-recursion 
```

*使用-T -*（或*--files-from -* ）调用 tar将导致它从标准输入读取文件名，期望每个文件名用换行符分隔。

为了获得最大效果，这可以与空终止字符串的选项结合使用：

```
$ find . -type d -print0 | tar cf directory-structure.tar --null --files-from - --no-recursion 
```

其中我认为最后一个版本是最强大的，因为它支持不寻常的文件名，并且（与 xargs 不同）本质上不受系统命令行大小的限制。（见`xargs --show-limits`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T16:40:26.727

进入您要开始的文件夹（这就是我们使用 find dot 的原因）将 tar 文件保存在其他地方。我想我把它放在那里有一个错误。带有 r 的 tar 不是 c。我认为使用 cf 您会不断创建新文件，而您只会获得最后一组文件子目录。tar r 附加到 tar 文件。--no-recursion 因为 find 已经为您提供了整个文件列表，因此您不想递归。

寻找 。-type d |xargs tar rf /somewhereelse/whatever-dirsonly.tar --no-recursion

tar tvf /somewhereelse/whatever-dirsonly.tar |more 来检查你得到了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:14:58.200

```
for i in `find . -type d`; do mkdir -p /tmp/tar_root/`echo $i|sed 's/\.\///'`; done
pushd /tmp/tar_root
tar cf tarfile.tar *
popd
# rm -fr /tmp/tar_root 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-06T13:15:18.917

对于 AIX：

```
tar cvfD some-tarball.tar `find /dir_to_start_from -type d -print` 
```

# sql - 当有多个匹配项时，如何将第一个匹配项从表 B 带到表 A？

> ID：12057927
> 
> 赞同：0
> 
> 时间：2012-08-21T15:09:21.900
> 
> 标签：sql, join, sql-server-2012

如果我有一个用户表，如下所示：

```
UserId    Name
------    ----
1         Jim
2         Mark 
```

和这样的订单表：

```
OrderId    UserId
-------    ------
1          1
2          1
3          1
4          2 
```

我怎么能接受任何一个吉姆的订单？没关系，我只要一个。

我有这个：

加入不是问题，它只是将其限制为一个结果，因为显然有 3 个。

```
SELECT * FROM User u
LEFT OUTER JOIN Order o on u.UserId = o.UserId 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:32:39.227

这将选择第一个匹配的行：

```
SELECT TOP 1 * FROM User u 
LEFT OUTER JOIN Order o ON u.UserID = o.UserID 
```

如果您提前知道要查找的用户，可以将其添加到 WHERE 子句中：

```
WHERE u.UserID = @userID 
```

而且，如果您需要确保获得第一个或最近的订单，您可以使用：

```
ORDER BY o.OrderID ASC/DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:14:55.563

```
select u.userid, 
       u.name,
       o.orderid
from users u
join (select orderid, 
             userid,
             row_number() over (partition by userid order by orderid) as rn
      from orders) o
  on o.userid = u.userid and o.rn = 1; 
```

`order by`您可以通过调整窗口定义的一部分来控制正在接受哪些订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:14:01.467

以下查询将为每个用户提供一个订单（每个用户的最低订单号）

```
select name, order_id 
from users u,
     orders o
where u.user_id = o.user_id 
and o.order_id = (select min(order_id) from orders c where c.user_id=o.user_id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:10:52.257

```
Select u.userid, name, min (orderID) 
FROM User u 
LEFT JOIN Order o on u.UserId = o.UserId     
group by u.userid, name 
```

只为 Jim 过滤

```
Select min (orderID) 
FROM User u 
LEFT JOIN Order o on u.UserId = o.UserId     
where name='Jim' 
```

# java - 使用 HttpClient 4.1 解码分块数据

> ID：12057928
> 
> 赞同：1
> 
> 时间：2012-08-21T15:09:23.960
> 
> 标签：java, apache-httpclient-4.x, chunked-encoding, chunked, http-chunked

我正在使用[HttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)向应该返回 xml 数据的服务器发送请求。此数据作为分块数据返回。然后我试图将接收到的 xml 数据写入文件。我使用的代码如下所示：

```
 HttpEntity entity = response.getEntity();
    InputStream instream = entity.getContent();

        try {
            // do something useful
            InputStreamReader isr = new InputStreamReader(instream);
            FileWriter pw;

            pw = new FileWriter(filename, append);

            OutputStreamWriter outWriter = new OutputStreamWriter(new FileOutputStream(filename, append), "UTF-8");
            BufferedReader rd = new BufferedReader(isr);

            String line = "";
            while ((line = rd.readLine()) != null) {
                // pw.write(line);
                outWriter.write(line);
            }
            isr.close();
            pw.close();
        } finally {
            instream.close();
        } 
```

这会导致将如下所示的数据打印到文件中： ![结果文件](../Images/e0ade2e75d604e7b048affa256e64bf2.png)

此代码适用于非分块数据。如何使用 HttpClient 正确处理分块数据响应。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:19:13.317

我不认为你的问题是数据分块。

XML 数据是纯文本数据 - 分块意味着它被分成几个部分，然后依次传输。因此，每个块都应该包含可见的纯文本 xml 数据，这显然不是数据图片中显示的情况。

可能是内容是通过 gzip 编码压缩的，或者不是纯文本 XML，而是二进制编码的 XML（例如 WBXML）。

您可以从发送的服务器响应标头中看到您拥有的具体类型，尤其是它包含的使用的 mime 类型。

# c++ - 在混合源代码中生成调用树或抽象语法树？

> ID：12057930
> 
> 赞同：2
> 
> 时间：2012-08-21T15:09:25.327
> 
> 标签：c++, c, fortran

我正在寻找一种工具来从混合源代码生成调用树或抽象语法树，主要由 FORTRAN（大约 77 个，主要是 90 个）和 C++（带有少量普通 C）组成。理想情况下，它应该是免费/开源的。在市售端，我看到了[了解](http://www.scitools.com/index.php)，还有其他的吗？

**编辑**我正在使用英特尔 Fortran 和 C++ 编译器。

**还要编辑**我正在运行 Linux。我还使用了 Intel VTune 实用程序，但它只给出了特定实例的调用图（例如`if`/`then`开关的一个分支），而不是完整的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:15:06.367

[ROSE](http://rosecompiler.org)可能会相当快地为您提供您想要的东西。

# java - 无效的方法声明；需要返回类型

> ID：12057932
> 
> 赞同：1
> 
> 时间：2012-08-21T15:09:28.433
> 
> 标签：java, declaration

我正在编写一种方法来提取某个子字符串，但我在调用该方法时遇到了问题。代码如下：

```
public void start() {
        String inputString = "XOXOXOO     X     XXO         X     OXO   ";

        int row = 0;
        int length = inputString.length();

        System.out.println("Enter column for X:");
        int column = Integer.parseInt(Keyboard.readInput());
    }
        enterToken("X", inputString,column);

     private String enterToken(String tokenSymbol, String inputString, int column){
         String columnEdit = inputString.substring(column*6-6,column*6); 

        String columnEdit1 = columnEdit.trim( );
        String columnEdit2 = columnEdit1+tokenSymbol+"                 ";
        String columnEdit3 = columnEdit2.substring(0,6);
        System.out.println(columnEdit3);
        return columnEdit3;

        } 
```

我收到错误“方法声明无效；需要返回类型”。我确信我正确地宣布了它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:10:39.717

```
enterToken("X", inputString,column); 
```

您需要为该行添加返回类型（或）该行应该进入一个方法中。

```
 System.out.println("Enter column for X:");
    int column = Integer.parseInt(Keyboard.readInput());
enterToken("X", inputString,column); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:11:16.593

```
}     
enterToken("X", inputString,column); 
```

应该

```
enterToken("X", inputString,column); 
} 
```

只是为了澄清这里发生了什么。编译器认为您正在尝试声明一个名为“enterToken”的方法，但在它解析该行的其余部分之前，它会注意到您没有开始的返回类型（或 void）。

# php - php保存提示

> ID：12057935
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:09:37.640
> 
> 标签：php

好的，所以我有一个用户创建的图像。当他们完成创建图像时，我会出现一个显示保存的按钮。我想要做的是提示用户将图像保存在本地磁盘上的页面上或他们想要放置的任何位置。我看过这里，似乎没有什么可以直接回答这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T15:13:30.963

您将使用 AJAX 在单击按钮时保存数据。如果您想要样品或者我误解了您的问题，请告诉我。

您的保存按钮：

你的 jQuery：

```
$(document).ready(function(){

    $.ajax({

        url: 'yourSaveScript.php',
        type: 'post',
        data: $('#yourForm').searialize(),
        error: function(data){

            alert("There was an error while inserting into the database.");

        },
        success: function(data) {

            alert("Successfully saved!");
        }

    })

}); 
```

# ruby - 通过在模块中混合来覆盖类的实例方法

> ID：12057940
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:04.143
> 
> 标签：ruby, module, overriding, mixins

给定一个类 A 和一个模块 B，混合 B 的实例方法，以便它覆盖 A 的相应实例方法。

```
module B
  def method1
    "B\#method1"
  end

  def method2
    "B\#method2"
  end
end

class A
  def method1
    "A\#method1"
  end

  def method2
    "A\#method2"
  end

  # include B    does not override instance methods!
  #              (module gets mixed into the superclass)
end

puts A.new.method1   # want it to print out "B#method1"
puts A.new.method2   # want it to print out "B#method2"
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:43:38.490

[`Module#include`](http://RubyDoc.Info/stdlib/core/Module%3ainclude)将模块`M`作为*类的超类*插入`C`。因此，您不能覆盖`C`' 中的方法`M`，而是相反：`C`' 的方法会覆盖`M`' 的方法。（从技术上讲，Ruby 并没有创建`M`的超类`C`，而是创建了一个不可见的*Include 类* `⟦M′⟧`，其方法表和常量表指向`M`的方法表和常量表，并使*该类*成为超类，但这种区别对于这个特殊的问题。）

在 Ruby 2.0 中，有一个新方法，[`Module#prepend`](https://GitHub.Com/Ruby/Ruby/blob/trunk/class.c#L717-745)顾名思义，它*添加* `M`到的*祖先*`C`，换句话说，`M`创建.*`C`*

 *所以，简而言之：你不能，至少现在还不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:49:32.967

您可以从包括之前删除每个`B`'s 方法。`A``B`

```
class A
  def method1
    "A\#method1"
  end

  def method2
    "A\#method2"
  end

  B.instance_methods(false).each { |method|
    remove_method(method) if instance_methods(false).include?(method)
  }
  include B
end 
```

或从内部`B`：

```
module B
  def method1
    "B\#method1"
  end

  def method2
    "B\#method2"
  end

  def self.append_features(mod)
    instance_methods(false).each { |method|
      mod.send(:remove_method, method) if mod.instance_methods(false).include?(method)
    }
    super
  end
end 
```*

# excel - Excel，只为顶部/底部 X% 值提供数据标签

> ID：12057941
> 
> 赞同：2
> 
> 时间：2012-08-21T15:10:03.953
> 
> 标签：excel, charts

我有一个简单的折线图，已将数据标签添加到：

![图表](../Images/7454fa05d22a78a65a7408b22a75f297.png)

但我不想要所有这些标签。我只希望显示顶部和底部的 10%（任意数字）值。例如，在图片中，我只希望显示 51、54、57、61、66、68、74 的标签。我可以手动删除其他标签，但图表数据会随着时间动态变化。有没有办法做到这一点？这些标签中的文本现在是一个占位符，最终将有 6-10 个字符长，此时拥有所有这些标签将变得一团糟。

我对 VBA 并没有真正的信心，所以我只想把它作为最后的手段。

**编辑：**感谢 Scott 富有洞察力的回答。它与手动填充的数据标签列完美配合。但是，如果想要动态填充它，则需要一些陪审团操纵。我使用以下公式来填充它：

```
=IF(OR(O1=LARGE($O$1:$O$30,1),O1=LARGE($O$1:$O$30,2),O1=LARGE($O$1:$O$30,3)),O1,"") 
```

基本上，如果 O 中的值是列表中的第一个、第二个或第三个值，它会将单元格值从 O 列复制到 P 列。如果不是其中任何一个，它将使单元格留空。但即使单元格在视觉上是空白的，如果单元格中有公式，Excel 的图表函数也会将该值解释为 0。这意味着图表的整个底部都有重复的“0%”数据标签。为了解决这个问题，我将 FALSE 参数的值设置为负数，然后将图表上的最小值从自动更改为 0。这会使图表底部下方的不合适值超出可见范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:42:48.653

啊哈！

就在我以为除了图片链接没有非VBA解决方案的时候，我的聪明才智来了:)

以下是您可以分阶段执行的操作：

1）在原始系列列旁边创建一个数据集，其中仅包含您想要标签的值（同样，这可以是公式驱动的，仅选择顶部/底部*n*值）。见下文 D 列。

![在此处输入图像描述](../Images/905d0470f875b88d59314021c40a9d05.png)

2) 将此数据系列添加到图表并显示数据标签。

3）将线条颜色设置为No Line，这样就不会出现了！

4）*沃利亚！*见下文！

![在此处输入图像描述](../Images/06bb9f49b917c4491a5cf6a00434e234.png)

# c# - 将 html 表格转换为 rss 提要

> ID：12057942
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:07.560
> 
> 标签：c#, asp.net

我有一张类似于下面的表格，我想以某种方式将其转换为 rss 提要。解决这个问题的最佳方法是什么？我应该抓取内容并尝试建立一个 rss 还是有更简单和更容易的方法（我希望）？我正在使用 asp.net / c# - 任何人都可以向我指出任何可以帮助我实现这一目标的教程：）

```
<table align="left" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td align="left" valign="top" style="width: 125px; height: 125px;" colspan="1"><img title="Costa Rica" alt="Costa Rica" src="/CR_sq.jpg?n=4185" /></td>
<td align="left" valign="top" colspan="1"><strong><font color="#fff" size="2">Costa Rica <br /></font><span class="SubHeadingGrey_7_0">16 August 2012</span></strong><br /><br />Some Text Here <a title="...read on" href="/WorkArea/linkit.aspx?LinkIdentifier=id&amp;ItemID=1234">...read on</a></td>
</tr>
<tr>
<td align="left" valign="top" style="width: 125px; height: 125px;"><img width="117" height="117" title="South Africa" style="width: 117px; height: 117px;" alt="AL 2012 Icon" src="/SA2012.jpg?width=117&amp;height=117&amp;mode=max" /></td>
<td align="left" valign="top"><p><strong><font color="#fff" size="2">South African Story<br /></font><span class="SubHeadingGrey_7_0">16 August 2012</span></strong></p>
<p>This is summary text <a title="... read on" href="/SA.aspx">... read on</a></p>
</td>
</tr>
<tr>
<td align="left" valign="top" style="width: 125px; height: 125px;"><img title="ITALY" alt="ITALY" src="/Italy.jpg?n=43" /></td>
<td align="left" valign="top"><strong><font color="#fff" size="2">Italian Article<br /></font><span class="SubHeadingGrey_7_0">15 August 2012</span></strong><br /><br />Italian Visit Article<a title="...read on" href="/WorkArea/linkit.aspx?LinkIdentifier=id&amp;ItemID=1256">...read on</a></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:29:09.363

只要 html 格式正确且与 XML 匹配，您就可以将其作为 xml 读取，然后使用 XSLT 使用 XslTransform 将其转换为 rss 提要，这是一个如何使用 xlsTransform 的简单示例[http://www.xmlfiles.com /articles/cynthia/xslt/default.asp](http://www.xmlfiles.com/articles/cynthia/xslt/default.asp)

# php - 将 GD 图像直接输出到浏览器会产生错误

> ID：12057945
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:12.860
> 
> 标签：php

好吧，这里感觉有点笨。我显然错过了一些超级基本的东西，但我不确定是什么。

我已经使用 imagejpeg 在 php 中创建了几个图像，它们工作得很好，我可以将图像存储在另一个文件中以供使用。

但是，如果我想一次性创建图像并将其直接输出到浏览器，则会出现以下错误

> 无法显示图像“http://localhost/myProject/sandbox/myImageResize.php”，因为它包含错误。

此错误由 firefox 输出，但 fire bug 未报告错误在图像下它报告状态 200 OK .. 维基百科状态是...

> 200 OK 成功 HTTP 请求的标准响应。实际响应将取决于使用的请求方法。在 GET 请求中，响应将包含对应于所请求资源的实体。在 POST 请求中，响应将包含描述或包含操作结果的实体

我使用 imagejpeg 或 imagepng 或 imagegif 都没有关系。结果总是一样的。

我已将输出缓冲设置为打开，并且在标题之前我没有输出任何内容。

```
//send image to browser
header ("Content-type: image/jpeg");
imagejpeg($im, NULL, 90);
imagedestroy($im); 
```

我可以很好地归档相同的图像。我可以从另一个 php 文件中提取相同的图像并将其显示在浏览器中。因此，指出图像中存在错误的错误消息并不正确。

我假设设置为 on 的输出缓冲适用于图像，就像其他任何东西一样。所以即使我在标题之前输出了一些东西也没关系或者我误解了这一点？

必须有一个答案，但我不知道它是什么。

请注意，在其他浏览器中，图像根本无法显示。

到目前为止，这还不是问题，因为我只是分两步处理图像。但我现在想将验证码图像直接输出到浏览器，所以我真的需要了解出了什么问题。

亲切的问候

好的，不确定这里的礼仪。但在这里添加进一步的发现。

首先，在寻找这个问题的某个时候，我通过引入一个错字使事情变得更糟，因为我遇到问题的一个 php 文件中的字体有错字。错误位于 apache/logs/error.log 中。

其次也位于 apache/logs/error.log 我发现 PHP 警告：无法修改标头信息 - 标头已发送。这完全让我感到困惑，因为我知道我已经在 php.ini 中使用整数值 4096 设置了输出缓冲。

有问题的标头来自包含：

```
<?php
    function redirect_To($location = NULL){
        if ($location != NULL ){
            header("Location: {$location}");
            exit;
        }
    }

?> 
```

现在*假设*在包含的评估阶段，标头被输出到缓冲区。如果有人能证实这是一个正确的假设，我将不胜感激。实际上，在产生问题的测试运行中根本没有调用该函数，所以这个假设是我对这种行为的唯一解释。

现在这本身不应该造成问题，因为缓冲设置为打开，并且看起来（错误地结果）在与 imagejpeg 语句关联的标头之前没有输出任何其他内容。

我现在暂时得出的结论是，当我将图像通过中间 gd 函数到达我想要的图像之前，这些函数使用了输出缓冲区并将标题从包含中推出。暂时删除临时 gd 函数产生了积极的结果。

但是我的结论不成立，因此是暂定的，因为我认为 php.ini 中的 ok set output-buffering = On 应该将缓冲区设置为无限制，因此第一个标头不应该被推出。但没有喜悦回到同样的旧错误。

所以我可以解决这个问题。但我不能说我完全理解为什么包含的标头被推出。

问候

进一步（最后注）注：

由于日志条目，我开始研究包含函数：

```
[Tue Aug 21 22:44:39 2012] [error] [client 127.0.0.1] PHP Warning:  Cannot modify header information - headers already sent by (output started at C:\\Program Files (x86)\\Ampps\\www\\CCC_OOP_V1\\sandbox\\upload.php:106) in C:\\Program Files (x86)\\Ampps\\www\\CCC_OOP_V1\\_includes\\functions.php on line 4, referer: http://localhost/CCC_OOP_V1/sandbox/test_Image_Proportional_Resize.php 
```

但使用发送的标头：

```
<?php require_once("../_includes/functions.php"); ?>

<?php
    if (headers_sent($filename, $linenum)){
        echo "Require once output headers in " . $filename ." at " . $linenum;
    } else {
        echo "no headers sent";
    }
?> 
```

没有发送标头。因此，我昨天走的路线完全是死胡同。我仍然对日志条目感到困惑。

我不得不认输，承认我不明白。以下

```
if (headers_sent($filename, $linenum)){
        echo "Require once output headers in " . $filename ." at " . $linenum;
            exit;
    } else {
        header("Content-type: image/jpeg");  // tmp code to output to browser
        imagejpeg($new, NULL, 90);                      // tmp code to output to browser
    } 
```

产生错误

无法显示图像“http://localhost/myProject/sandbox/myImageResize.php”，因为它包含错误。

但显然没有输出任何标题。没有其他错误发送到日志。

所以我有一个解决方案（将代码拆分出来）。但我仍然缺乏理解。

# javascript - touchmove/MSPointerMove 事件未在 Windows 8 中触发

> ID：12057946
> 
> 赞同：8
> 
> 时间：2012-08-21T15:10:13.390
> 
> 标签：javascript, touch, windows-8, tablet, internet-explorer-10

我只是一个低级的 uC 程序员，他正试图为他的老板组装一个小的 web 界面。到目前为止，我已经完成了所有工作，除了能够使用触摸输入在画布上选择一个正方形。

**这是在运行 Windows 8 和 IE10 的 Samsung Slate 7 平板电脑上**

我在这里将代码提炼成几乎最基本的要素：

```
var cxt;
var c;

window.onload = function () {

c = document.getElementById('displayCanvas');

cxt = c.getContext('2d');

/*
c.addEventListener("MSPointerUp", mouseUp, false);
c.addEventListener("MSPointerMove", mouseMove, false);
c.addEventListener("MSPointerDown", mouseDown, false);
*/
c.addEventListener("touchend", mouseUp, false)
c.addEventListener("touchmove", mouseMove, false);
c.addEventListener("touchstart", mouseDown, false);

}

function mouseDown(downE) {
    window.console &&  console.log("down");
};

function mouseMove(moveE){
    window.console && console.log("move");
}

function mouseUp() {
    window.console && console.log("end");
} 
```

我使用 MSPointer 和“正常”javascript 触摸事件同时获得了开始和结束事件，但是“移动”事件没有注册。

我确定这是我在这里想念的非常简单的东西，感谢您帮助我！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T15:35:23.353

我假设您正在与 Windows 8 上的桌面 IE 中的 HTML 页面进行交互。在桌面 IE 中，MSPointerMove 不会在该画布上触发，因为用户在屏幕上移动手指时的默认行为是平移内容。如果您使用以下代码段设置画布样式，则应该检测到您的 MSPointerMove 事件。

style="-ms-touch-action: 无"

这是一篇很棒的文章，介绍了如何在许多浏览器上工作。[http://blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-mouse-input-in-all-browsers.aspx](http://blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-mouse-input-in-all-browsers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:36:20.923

三星 Slate 7 平板电脑在可能相关的旧版本驱动程序中存在错误。我看到另一个标记为 [internet-explorer-10] 的答案，其中包含详细信息。你更新驱动了吗？

# wix - Wix：功能树选择导致浏览按钮消失

> ID：12057957
> 
> 赞同：1
> 
> 时间：2012-08-21T15:10:42.507
> 
> 标签：wix

在我的安装程序中，我有两个功能。如果我禁用一项功能，浏览按钮（以及包含 INSTALLDIR 路径的编辑控件）将从 UI 中消失。我怀疑这是因为两个 Feature 元素都使用相同的 ConfigurableDirectory="INSTALLDIR" 属性：

```
 <Feature Id="MYCLIENT" AllowAdvertise="no" ConfigurableDirectory="INSTALLDIR"
        Title="Client component"
        Description="Client Component" Level="1">

        <ComponentGroupRef="Client1"/>

    </Feature>

    <Feature Id="MYMMC" AllowAdvertise="no" ConfigurableDirectory="INSTALLDIR"
        Title="MMC Components"
        Description="MMC Components" Level="1">

        <ComponentGroupRef Id="MMC1"/>

        <!-- MMC snap-in requires some client components -->
        <ComponentGroupRef Id="Client1"/>

    </Feature> 
```

当取消选择/未安装功能时，我需要实施什么来防止 INSTALLDIR 浏览控件消失？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:58:12.103

浏览按钮与树中的选定特征相关。如果您已经排除了某些功能并且它仍然被选中，那么为这个功能设置安装路径是没有意义的。所以浏览按钮被禁用。我想当您在树中选择另一个功能时，“浏览”按钮将再次出现。

顺便说一句，为什么两个功能都需要相同的 ConfigurableDirectory？将系统的 2 个主要部分安装在同一个文件夹中有点奇怪。我通常使用 ConfigurableDirectory 创建根功能，而所有子功能只能安装在预定义的子文件夹中。另一方面，如果您确实需要为 2 个功能设置不同的位置，您宁愿使用不同的 ConfigurableDirectories。

# java - 如何将树路径转换为 json 对象

> ID：12057961
> 
> 赞同：3
> 
> 时间：2012-08-21T15:10:49.887
> 
> 标签：java, json, tree

我有一棵树，它的节点如下：

```
-Root
|-Node 1
|-Node 2
  |-Node 2.1 
```

这些节点之一由一类表示

```
class Node {
    Integer id;
    String name;
    String route;
} 
```

所示节点的实例保存为

```
{id: 1, name: "Root", route:"1"}
{id: 2, name: "Node 1", route: "1/2"}
{id: 3, name: "Node 2", route: "1/3"}
{id: 4, name: "Node 2.1", route: "1/3/4"} 
```

问题是：如何从节点列表中获取表示树状态的 json，例如：

```
[{
"property": {
    "name": "Root",
    "id": "1",
    "route": "1"
},
"children": [{
    "property": {
        "name": "Node 1",
        "id": "2",
        "route": "1/2"
    },
    "property": {
        "name": "Node 2",
        "id": "3",
        "route": "1/3"
    },
    "children": [{
        "property": {
            "name": "Node 3",
            "id": "4",
            "route": "1/3/4"
        }
    }]
}]
}] 
```

我正是需要这个 json 结构

所有这些东西都必须在java中完成。我试图迭代我的​​节点列表并构建 json 对象，但我无法从节点的路由字段中获取 json 结构

我可以使用 json 库，节点类是不可更改的

编辑：这种格式很奇怪，但需要。“属性”是节点，如果“属性”有孩子，它们不会放在属性中，以太在属性之后......我认为这不太合理，但我无法改变它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:50:56.293

你可以试试这样的算法：

```
public JSONObject toJSON(Node node, List<Node> others) {
    JSONObject json = new JSONObject();
    json.put("id", node.id); // and so on
    ...
    List children = new ArrayList<JSONObject>();
    for(Node subnode : others) {
        if(isChildOf(subnode, node)) {
            others.remove(subnode);
            children.add(toJSON(subnode, others));
        }
    }
    json.put("children", children);
    return json;
} 
```

您在迭代列表时正在修改列表，并且递归调用也会对其进行迭代。这可能很麻烦，但试试吧。如果它失败了，有办法绕过它。

`isChildOf()`是缺失的部分。这是一些相当基本的字符串操作，看看 subnode.path 是否以 node.id 开头

编辑：实际上这不会创建与您的问题相同的结构。但是我无法理解您问题中的结构。然而，与这个算法非常相似的东西会产生你想要的东西。原则是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:22:40.460

您只需要解析您的`route`属性即可做出正确的图形表示。

# c# - 如何使用 Visual Studio 2010 为 C# Web 服务项目创建 .msi 安装程序？

> ID：12057964
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:54.957
> 
> 标签：c#, web-services, windows-installer

在我的项目中，我想运行 somesetup.msi。但在源代码库中我只找到 somesetup.vdproj 如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:12:53.963

构建设置时，您需要指定主要输出并随后构建设置项目。

这甚至可以用于 VS 2010：http: [//vijirajkumar.blogspot.de/2010/03/create-setup-and-deployment-project.html](http://vijirajkumar.blogspot.de/2010/03/create-setup-and-deployment-project.html)

# objective-c - 在这种情况下如何定义 NSPredicate ？

> ID：12057965
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:56.060
> 
> 标签：objective-c

我试图通过使用 NSPredicate 来获得以下目标值。

但是，我在使用 NSPredicate 语法时遇到了困难。

我想获取源数据中同名的最大年龄的姓氏列表而不会重复。

请任何人的帮助...

```
NSDictionary *dic1 = [NSDictionary dictionaryWithObjects:@[@"James",    @10] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic2 = [NSDictionary dictionaryWithObjects:@[@"Robert",   @15] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic3 = [NSDictionary dictionaryWithObjects:@[@"Robert",   @10] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic4 = [NSDictionary dictionaryWithObjects:@[@"James",    @20] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic5 = [NSDictionary dictionaryWithObjects:@[@"David",    @20] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic6 = [NSDictionary dictionaryWithObjects:@[@"Walter",   @30] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic7 = [NSDictionary dictionaryWithObjects:@[@"Nicholas", @30] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic8 = [NSDictionary dictionaryWithObjects:@[@"David",    @30] forKeys:@[@"LastName", @"Age"]];
NSDictionary *dic9 = [NSDictionary dictionaryWithObjects:@[@"David",    @30] forKeys:@[@"LastName", @"Age"]];

NSArray *persons = [NSArray arrayWithObjects:dic1, dic2, dic3, dic4, dic5, dic6, dic7, dic8, dic9, nil];

NSPredicate *predicate = [NSPredicate predicateWithFormat:???]

NSArray *result = [persons filteredArrayUsingPredicate:predicate];
NSLog(@"result : %@",result);

source data
LastName          age
James              10
Robert             15
Robert             10
James              20
David              20
Walter             30
Nicholas           30
David              30
David              30

target data
James              20
Robert             15
David              30
Walter             30
Nicholas           30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:31:21.170

我不相信这可以用谓词来完成。我会通过使用键“Age”对数组进行排序，然后循环遍历该数组，将第一条记录添加到结果数组中，然后检查下一条记录是否具有与第一条相同的 LastName，如果是，请不要t 将那个添加到最终数组中。像这样：

```
NSArray *sorters = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"Age" ascending:NO]];
    NSArray *sorted = [persons sortedArrayUsingDescriptors:sorters];
    NSMutableArray *result = [NSMutableArray array];
    for (id dict in sorted) {
        if (! [[result valueForKey:@"LastName"] containsObject:[dict valueForKey:@"LastName"]]) {
            [result addObject:dict];
        }
    }
    NSLog(@"%@",result); 
```

# php - 将日期和时间与时间戳分开，然后再组合

> ID：12057967
> 
> 赞同：0
> 
> 时间：2012-08-21T15:10:57.710
> 
> 标签：php, datetime, timestamp

我试图从 1 个 unix 时间戳中取出一天中的时间，从不同的 unix 时间戳中取出日期（日、月、年），然后它们将这两者组合成一个新的时间戳。但是我的时间戳 foo 似乎失败了。有人可以提供一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:13:39.260

使用[date](http://php.net/date)函数从时间戳中提取您需要的部分。将这些部分重新组合成带有日期和时间的字符串，并使用[strtotime](http://php.net/strtotime)将其全部转换回时间戳。

```
strtotime(sprintf('%s %s',
                  date('Y-m-d', $timestamp2),
                  date('H:i',   $timestamp1))); 
```

# eclipse - 安装哪个 Eclipse 版本以在 Android 中进行开发（2012 年 8 月）

> ID：12057976
> 
> 赞同：0
> 
> 时间：2012-08-21T15:11:26.577
> 
> 标签：eclipse, eclipse-plugin

这个问题是双重的，但最近没有人问过。我想使用 Eclipse 在 Android 中进行开发和制作 webapps。我用过 Indigo，但我在这个页面上看到很多下载：http: [//eclipse.org/downloads/](http://eclipse.org/downloads/)

因为我的电脑被盗了，我需要重新安装所有东西，我想，是时候问了。谁能告诉我哪个版本更好下载和安装？

还有任何关于所需插件的提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:54:52.057

靛蓝很好。

**但是，下载和安装Juno**可能符合您的最大利益。Juno 的 UI 与 Indigo 的稍有不同，但它*是*Eclipse 的最新版本（Juno 是 4.x，而 Indigo 是 3.x）。

# ruby - 如何将这种字典数据格式转换为 html 的最佳方式？

> ID：12057978
> 
> 赞同：0
> 
> 时间：2012-08-21T15:11:33.947
> 
> 标签：ruby, parsing

我有很多这样的字符串

`"x _I _aaa 1\. _cool. value1, value2, value3, value4; o> lorem ipsum, delirium; o> Cogito ergo sum o> homo homini lupus est. 2\. _warm. value5, valu6, valu7; o> amore ipsum lorem mortem. _II _bbb 1\. _grey. one; two. three;"`

我想看到这样的：

```
x
   I _aaa 
      1\. _cool. value1, value2, value3, value4; 
            а> lorem ipsum, delirium; 
            б> Cogito ergo sum; 
            в> homo homini lupus est. 
      2\. _warm. value5, valu6, valu7; 
            а> amore ipsum lorem mortem. 
   II _bbb 
      1\. _grey. one; two. three; 
```

所以我需要将字符串翻译成html：

```
<p class="a">x</p>  
    <p class="b">I _aaa</p> 
    <ul class="c">
        <li class="d">_cool. value1, value2, value3, value4;
            <ul class="f">
                <li class="e">lorem ipsum, delirium; </li>
                <li class="e">Cogito ergo sum </li>
                <li class="e">homo homini lupus est. </li>
            </ul> </li>
        <li class="d">_warm. value5, valu6, valu7; </li>
        <li class="e">а> amore ipsum lorem mortem.  </li>
    </ul>
    <p class="b">II _bbb</p> 
    <ul class="c">
        <li class="d">_grey. one; two. three; </li>
    </ul> 
```

该数据格式是否有名称（如 CSV、XML）？

也许有一个解析它的库？

你认为完成这项工作的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:20:16.120

如果您可以使用特定格式将源数据转换为散列，则可以使用名为[Cobra vs Mongoose](http://cobravsmongoose.rubyforge.org/)的库将散列转换为 XML。

# c# - C# 使用 WebBrowser 控件并需要访问 DOM 元素

> ID：12057985
> 
> 赞同：0
> 
> 时间：2012-08-21T15:11:49.383
> 
> 标签：c#, winforms, internet-explorer, dom

我使用 C# 在我的 WinForm 应用程序中加载了一个网页

我需要以编程方式将数据键入该页面上的特定字段（不使用 WATIN）。

如果有人有任何其他解决方案，我愿意接受。

有问题的页面没有 AJAX 或 JavaScript。它们是简单的 HTML 数据输入表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:48:58.837

您可以使用控件的`Document`属性来执行此`WebBrowser`操作：

C#代码：

```
if (webBrowser1.Document == null) return;
var form = webBrowser1.Document.Forms[0]; //form element
var input = form.Children[0]; //input element
input.SetAttribute("value","input value"); //set the input value
form.InvokeMember("submit"); //submit the form 
```

加载到`WebBrowser`控件中的演示 HTML 页面：

```
<html>
<head>
    <title></title>
</head>
<body>
    <form method="post" action="">
        <input type="text" name="testInput" value="test"/>
        <input type="submit" value="submit"/>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:19:23.877

假设您正在将网页加载到 WinForm 应用程序上的 WebBrowser 控件中，您应该能够通过 WebBrowser.HtmlDocument.DomDocument 属性访问文档。这是通过 MSHTML.IHTMLDocument2 接口对页面的 IE DOM 的非托管引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T15:20:58.570

使用 [WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)下载页面并使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)对其进行解析。

一个例子：

```
using (var wc = new WebClient())
{
    var page = wc.DownloadString(url);

    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(page);

    //XPath
    var title = doc.DocumentNode.SelectSingleNode("//title").InnerText;
    var text = doc.DocumentNode.SelectSingleNode("//div[@id='readInner']")
                  .InnerText;
    //Linq
    var text = doc.DocumentNode.Descendants("div")
                .Where(n => n.Attributes["id"].Value == "readInner")
                .First()
                .InnerText;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-02T11:12:30.207

使用 MSHTML.Dll 和 SHDocVw.dll

我只是粘贴代码，将代码从 winform 转换到 IE 浏览器，您只需单击按钮数据即可传输到网页，但网页上的控件和您的 Html 页面上的控件相同

```
private SHDocVw.InternetExplorer TargetIE = null;
        string url;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            GetTheIEObjectFromSystem);
            SendTextToActiveElementWithSubmitOptionSet();
        }
        private void GetTheIEObjectFromSystem(
        {
            SHDocVw.ShellWindows SWs = new SHDocVw.ShellWindows();
            foreach (SHDocVw.InternetExplorer internetExplorer in SWs)
            {
                url = internetExplorer.LocationURL;
                TargetIE = internetExplorer;
                return;
            }

        }
        private void SendTextToActiveElementWithSubmitOptionSet()
        {
            mshtml.IHTMLDocument2 document = null;
            document = TargetIE.Document as mshtml.IHTMLDocument2;
            if (!document.activeElement.isTextEdit)
            {
                MessageBox.Show("Active element is not a text-input system");
            }
            else
            {
                HTMLInputElement HTMLI;
                HTMLI = document.activeElement as HTMLInputElement;
                var tag = HTMLI.document as mshtml.HTMLDocumentClass;
                mshtml.IHTMLElementCollection hTMLElementCollection = tag.getElementsByTagName("input");
                //for (int i = 0; i < a.length; i++)
                {
                    foreach (mshtml.HTMLInputElement el in hTMLElementCollection)
                    {
                        switch (el.id)
                        {
                            case "txtFirstName":
                                el.value = textBox1.Text;
                                break;
                            case "txtLastName":
                                el.value = textBox2.Text;
                                break;
                            case "txtAddress":
                                el.value = textBox3.Text;
                                break;
                            case "txtMobile":
                                el.value = textBox4.Text;
                                break;
                        }                        
                    }
                }

            }
        } 
```

您可以根据需要进行更改，我相信它有效

# asp.net - ASP.Net MVC3 控制器“全局”

> ID：12057986
> 
> 赞同：1
> 
> 时间：2012-08-21T15:11:59.307
> 
> 标签：asp.net, asp.net-mvc-3

我需要为我的一个控制器中的每个操作运行此代码。如何在不必复制每个操作的代码的情况下做到这一点？控制器有init方法吗？

```
System.Web.HttpSessionStateBase Sess = HttpContext.Session;
string pid = (Sess["PID"] != null ? Sess["PID"].ToString() : "");
string LogonTicket = (Sess["LogonTicket"] != null ? Sess["LogonTicket"].ToString() : ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:13:47.053

为什么不将其包装到基本控制器中的属性中呢？

```
class abstract YourControllerBase : Controller
{
   public string Pid { get { ... } }
   public string LogonTicket { get { ... } }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:15:59.073

你有几个选择：

1.  将代码放入构造函数中
2.  使用 OnActionExecuting

    ```
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:23:03.833

我认为尽管绝对正确，抽象类和基于继承的答案让“提问者”感到不舒服，因为他正在尝试处理比继承更简单的案例。

一个简短的答案 - 只需将代码放入控制器的构造函数中。

例如：

```
public HomeController: Controller {

    private string _pid;
    private string _logonTicket;

    public HomeController() {

        System.Web.HttpSessionStateBase Sess = HttpContext.Session;

        _pid = (Sess["PID"] != null ? Sess["PID"].ToString() : "");
        _logonTicket = (Sess["LogonTicket"] != null ? Sess["LogonTicket"].ToString() : "");
    }

//REST OF YOUR CONTROLLER CODE

} 
```

现在您可以访问`_pid`和`_logonTicket`从控制器操作的代码。

# php - 引用表mysql中最后一次出现的外键

> ID：12057996
> 
> 赞同：0
> 
> 时间：2012-08-21T15:12:26.503
> 
> 标签：php, mysql, subquery

我有两个表：return 和 return_details

回报是这样设置的 -

```
 + Return
      - id
      - orderNum
      - startDate
      - endDate

 + Return_Details
      - id
      - rid (Return.id)
      - stage [this is essentially location]
      - lastSeen [timeDate last seen) 
```

我试图找到所有“开放”的回报（其中 Return.endDate == null），然后是每个 open的`stage`and 。`lastSeen``Return.id`

问题是我不知道如何在 Return_Details 中找到最后一次出现的 Return.id。目前我可以使用 MAX 找到正确的 lastSeen 时间，但我如何抓住相应的阶段。

这是我现在使用的查询 -

```
 SELECT r.so, rd.lastSeen, rd.stage, r.sotype, MAX(rd.lastSeen) as last
            FROM repairs r
            JOIN repair_details rd ON r.id = rd.rid
            WHERE `enddate` IS NULL 
            GROUP BY r.so
            ORDER BY lastSeen asc 
```

任何有关如何通过一个查询完成此操作的帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:26:58.637

这应该有效。

```
SELECT a.id, b.stage, b.lastSeen
FROM Return a 
LEFT JOIN (SELECT rid, stage, MAX(lastSeen) AS lastSeen FROM Return_Details GROUP BY rid, stage) b ON b.rid = a.id
WHERE a.endDate IS NULL 
```

**编辑1：**

此方法将找到`MAX(id)`每个`rid`，然后根据它获取详细信息`MAX(id)`。

```
SELECT a.orderNum, c.stage, c.lastSeen
FROM repairs a 
LEFT JOIN 
  (SELECT rid, MAX(id) AS id FROM repair_details 
    GROUP BY rid) b ON b.rid = a.id
LEFT JOIN
  (SELECT id, stage, lastSeen FROM repair_details) c ON c.id = b.id
WHERE a.endDate IS NULL 
```

[SQL小提琴](http://sqlfiddle.com/#!2/5d68b/1)