# StackOverflow 问答 10094000-10094999

# python - 从 Django Rest Framework 调用的 Python Urlobject 中的神秘错误

> ID：10094005
> 
> 赞同：0
> 
> 时间：2012-04-10T18:03:49.703
> 
> 标签：python, django, rest, django-rest-framework, urlsplit

我正在使用[Django Rest Framework](http://django-rest-framework.org/ "Django 休息框架")来构建一个 api，并在我的开发机器上实现了。我今天想快速部署它，事实证明它比我预期的更容易出错。我重新安装了依赖项，重新安装了 Django，花了几个小时寻找错误，但是这个最新的已经打败了我和谷歌。

在开发机器上，当我从框架调用其中一个视图时，我得到了正确的响应（减去静态文件，但我稍后会处理。）然而，在部署机器上，我得到了这个错误：

```
'SplitResult' object has no attribute '_replace' 
```

回溯通过rest框架中的一个模板标签，但是这个方法中的urlobject中似乎抛出了错误：

```
def __replace(self, **replace):
        """Replace a field in the ``urlparse.SplitResult`` for this URL."""
        return type(self)(urlparse.urlunsplit(
            urlparse.urlsplit(self)._replace(**replace))) 
```

我无法在我的开发机器上重现此错误，并且在任何地方都找不到对此错误的任何引用。以防万一我在部署服务器上使用 Django 1.2、1.3 和 1.4 进行了尝试，但该错误似乎与 Django 本身无关。

这是完整的回溯：

```
Django Version: 1.3.1
Python Version: 2.5.2
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'char',
 'djangorestframework']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.5/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/python2.5/site-packages/django/views/generic/base.py" in view
  47\.             return self.dispatch(request, *args, **kwargs)
File "/usr/lib/python2.5/site-packages/django/views/decorators/csrf.py" in wrapped_view
  39\.         resp = view_func(*args, **kwargs)
File "/usr/lib/python2.5/site-packages/django/views/decorators/csrf.py" in wrapped_view
  52\.         return view_func(*args, **kwargs)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/django-rest-framework/djangorestframework/views.py" in dispatch
  243\.         return self.final(request, response, *args, **kwargs)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/django-rest-framework/djangorestframework/views.py" in final
  196\.         return self.render(response)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/django-rest-framework/djangorestframework/mixins.py" in render
  251\.             content = renderer.render(response.cleaned_content, media_type)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/django-rest-framework/djangorestframework/renderers.py" in render
  351\.         ret = template.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  123\.             return self._render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/usr/lib/python2.5/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/usr/lib/python2.5/site-packages/django/template/defaulttags.py" in render
  311\.             return self.nodelist_true.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/usr/lib/python2.5/site-packages/django/template/defaulttags.py" in render
  227\.                 nodelist.append(node.render(context))
File "/usr/lib/python2.5/site-packages/django/template/defaulttags.py" in render
  500\.         output = self.nodelist.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in render
  792\.             output = self.filter_expression.resolve(context)
File "/usr/lib/python2.5/site-packages/django/template/base.py" in resolve
  536\.                 new_obj = func(obj, *arg_vals)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/django-rest-framework/djangorestframework/templatetags/add_query_param.py" in add_query_param
  7\.     return unicode(URLObject(url).with_query(param))
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/urlobject/lib/urlobject/urlobject.py" in with_query
  117\.         return self.__replace(query=query)
File "/home/wfrp/wfrp-django/DjangoWfrp/external apps/urlobject/lib/urlobject/urlobject.py" in __replace
  181\.             urlparse.urlsplit(self)._replace(**replace)))

Exception Type: AttributeError at /api/
Exception Value: 'SplitResult' object has no attribute '_replace' 
```

这是我第一次使用 Stack Overflow — 感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:27:33.210

我怀疑您的开发和部署机器正在运行不同的 Python 版本。[SplitResult](http://docs.python.org/library/urlparse.html?highlight=splitresult#urlparse.SplitResult)的Python 文档没有提及有关内部`_replace`方法的任何内容，但前面的下划线表明它是一个内部 API。这是一个 Django Rest Framework 错误，我建议向他们提交错误报告。

如果你好奇，`SplitResult`它是`namedtuple`（在 Python 2.6 中引入）的子类。它需要 kwargs 并返回一个`SplitResult`替换相关值的新值。

```
In [16]: sr = urlparse.urlsplit("http:///www.google.com")

In [17]: sr
Out[17]: SplitResult(scheme='http', netloc='', path='/www.google.com', query='', fragment='')

In [18]: sr._replace(scheme='https')
Out[18]: SplitResult(scheme='https', netloc='', path='/www.google.com', query='', fragment='') 
```

我相信`SplitResult`Python < 2.6 中的版本是 的子类`tuple`，它没有`_replace`方法，可以解释您看到的错误

# php - php捕捉array_push的魔术方法

> ID：10094007
> 
> 赞同：2
> 
> 时间：2012-04-10T18:03:52.240
> 
> 标签：php, arrays, magic-methods, array-push

我正在寻找一种拦截动作的方法[`array_push`](http://php.net/array_push)，因为当它被检索时，数组的每个值都有另一个信息，例如：

```
class ClassName {

    var $test = array();

    function __set($attr, $value) {
      $this->$attr = 'My extra value'.$value;
    }    

    function index(){
      array_push($this->test, "some val");
      array_push($this->test, "some other val");

      print_r($this->test);

    }
}

$o = new ClassName();
$o->index(); 
```

并期望得到类似的东西：

```
Array
(
    [0] => My extra value some val
    [1] => My extra value some other val
) 
```

但我得到：

```
Array
(
    [0] => some val
    [1] => some other val
) 
```

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:23:41.523

您可以使用实现 ArrayAccess 接口的类，而不是使用数组。这样，您可以完全控制追加到数组时发生的情况。

[http://php.net/manual/en/class.arrayaccess.php](http://php.net/manual/en/class.arrayaccess.php)

缺点是并非所有数组函数都适用于对象（即排序等），但您可以像这样推送：

```
$object[] = 'new value'; 
```

另一种方法是简单地制作一个包装函数来添加到数组中。

```
public function addToArray($key, $value) {
   if ($key === null) {
      $this->test[] = 'My extra value ' . $value;
   } else {
      $this->test[$key] = 'My extra value ' . $value;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:10:23.353

我不完全明白你在问什么，但你是否试图这样做：

```
$this->test['key'] = "some val"; 
```

这将允许您很好地设置自己的输出。因为 array_push() 将抛出另一个嵌套级别。

**更新：也许是这些方面的东西？**

```
function push($prefix)
{
    $refl = new ReflectionClass($this);
    $prop = $refl->getProperties();
    foreach($prop as $p) {
        $this->{$p} = $prefix . $this->{$p};
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:22:49.777

为了实现您正在寻找的东西，我建议您自己创建一个函数，该函数在任何与其用途无关的值前面加上前缀：

```
function prefix($value) {
    return 'My extra value '.$value;
} 
```

然后，您可以在函数内部使用该`index()`函数：

```
function index()
{
    $test = array("some val", "some other val");
    foreach($test as $value)
    {
        $this->test[] = $this->prefix($value);
    }
    print_r($this->test);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T19:04:48.820

来自 PHP 手册：

```
__set() is run when writing data to inaccessible properties.
__get() is utilized for reading data from inaccessible properties. 
```

这仅在读取/写入不可访问的属性时调用。但是，您的财产是公开的，这意味着它是可访问的。将访问修饰符更改为受保护解决了这个问题。

尝试这个：

```
 class ClassName {

        private $test = array();

        public function __set($attr, $value) {
          $this->test[$attr] = $value;

        }    

        public function __get($attr) {
        return $this->test[$attr];
        }    

        public function index(){

          array_push($this->test, "some val");
          array_push($this->test, "some other val");

          return $this->test;

        }
    }

    $o = new ClassName();
    $o->setData = 'My extra value';
    print_r($o->index()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:15:37.660

PHP 手册中关于魔术方法的内容如下：

> __set() 在将数据写入**不可访问**的属性时运行。（强调我的）

因为`test`属性在方法内部，而访问它的函数在方法内部，所以函数将直接看到变量，*不会*使用魔法设置器。

此外，即使您尝试在类本身**之外**的魔法设置器上使用 array_push ，它仍然不起作用。你会得到错误`array_push() expects parameter 1 to be array, object given`。

如果你想支持array_push，你应该编写自己的`push($item)`方法：

```
function push($item) {
    $this->test[] = 'My extra value' . $item
} 
```

或者：

```
function push() {
    $items = func_get_args();

    // Using array_map is one of the many ways to do this.
    // You could also do it with a simpler `foreach` but I like this way.
    $prepend = function($item) {
        return 'My extra value' . $item;
    };
    $items = array_map($prepend, $items);
    array_push($this->test, $items);
} 
```

如果您想支持一次推送多个项目。

# android - Android 从位置获取速度

> ID：10094008
> 
> 赞同：0
> 
> 时间：2012-04-10T18:03:52.653
> 
> 标签：android, performance, gps, location

我正在创建一个应用程序，让用户在使用 Android Location 类驾驶时提高速度。我面临的问题是论坛或文章上的每个帖子都解释了 getSpeed() 方法的问题。刚刚进入我的车测试几次，它返回0。我不知道为什么，只是想知道是否有人能够找出原因以及如何获得实际速度？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:54:45.273

getSpeed 工作得很好，只要您的设备中有功能强大的 GPS 硬件并且您有足够多的卫星在视线范围内。我将它用于飞行记录应用程序。

getSpeed 的一个问题是，模拟器总是返回 0；即使它提供了具有速度信息的 NMEA 数据。所以测试需要真实的设备。

如果 GPS 接收器在车内，一个问题可能是它无法及时获取足够的卫星进行测试。尝试将设备放在挡风玻璃附近（如果它没有被基于金属的反射表面覆盖！）并给它时间进行修复。考虑使用 GpsStatusListener 来获取可见卫星的计数。

上面提到的从样本距离计算速度的技巧需要过滤数据。你使用的样本越多，得到的噪音就越多（需要过滤，在这里搜索，关于这个主题的 stackoverflow 上有几篇文章）。您使用的样本越少，不沿直线移动时的误差就越大。

# ios - 为什么 renderInContext 比绘制到屏幕慢得多？

> ID：10094009
> 
> 赞同：3
> 
> 时间：2012-04-10T18:03:53.200
> 
> 标签：ios, core-animation, calayer

我有一个相当大`CAShapeLayer`的我正在渲染。该层是完全静态的，但它包含在 a 中，`UIScrollView`因此它可以四处移动和缩放——基本上，它必须不时地重绘。为了提高这种滚动的帧率，我设置`shouldRasterize = YES`了图层，效果很好。因为我从不更改图层的任何属性，所以它永远不会出现光栅化错误，并且我得到了稳定的 60 fps。到处都是击掌，对吧？

直到图层变大一点。最终——不久之后——光栅化的图像变得太大，GPU 无法处理。根据我的控制台，`<Notice>: CoreAnimation: surface 2560 x 4288 is too large`它只是不会在屏幕上绘制任何东西。我并不真的责怪它——`2560 x 4288`它相当大——但我花了一段时间挠头，才在设备控制台中注意到这一点。

现在，我的问题是：我该如何解决这个限制？如何栅格化一个非常大的图层？

显而易见的解决方案似乎是将层分解为多个子层，例如每个象限一个，并独立地光栅化每个子层。是否有捷径可寻？我可以创建一个从另一层渲染矩形区域的新层吗？还是我应该探索其他一些解决方案？

## 编辑

创建平铺合成的性能似乎非常糟糕，因为每次进入屏幕时都会重新栅格化图层，从而产生非常生涩的滚动体验。有没有办法缓存这些光栅化？或者这完全是错误的方法？

## 编辑

好的，这是我当前的解决方案：将图层渲染一次到`CGImageRef`. 使用该图像中的子矩形创建多个平铺层，并将它们实际放在屏幕上。

```
- (CALayer *)getTiledLayerFromLayer:(CALayer *)sourceLayer withHorizontalTiles:(int)horizontalTiles verticalTiles:(int)verticalTiles
{
    CALayer *containerLayer = [CALayer layer];
    CGFloat tileWidth = sourceLayer.bounds.size.width / horizontalTiles;
    CGFloat tileHeight = sourceLayer.bounds.size.height / verticalTiles;

    // make sure these are integral, otherwise you'll have image alignment issues!
    NSLog(@"tileWidth:%f height:%f", tileWidth, tileHeight);

    UIGraphicsBeginImageContextWithOptions(sourceLayer.bounds.size, NO, 0);
    CGContextRef tileContext = UIGraphicsGetCurrentContext();
    [sourceLayer renderInContext:tileContext];
    CGImageRef image = CGBitmapContextCreateImage(tileContext);
    UIGraphicsEndImageContext();

    for(int horizontalIndex = 0; horizontalIndex < horizontalTiles; horizontalIndex++) {
        for(int verticalIndex = 0; verticalIndex < verticalTiles; verticalIndex++) {
            CGRect frame = CGRectMake(horizontalIndex * tileWidth, verticalIndex * tileHeight, tileWidth, tileHeight);
            CGRect visibleRect = CGRectMake(horizontalIndex / (CGFloat)horizontalTiles, verticalIndex / (CGFloat)verticalTiles, 1.0f / horizontalTiles, 1.0f / verticalTiles);
            CALayer *tile = [CALayer layer];
            tile.frame = frame;
            tile.contents = (__bridge id)image;
            tile.contentsRect = visibleRect;
            [containerLayer addSublayer:tile];
        }
    }

    CGImageRelease(image);

    return containerLayer;
} 
```

这很好用……有点。一方面，我`1980 x 3330`在视网膜 iPad 上以 60fps 的速度平移和缩放图层。另一方面，启动需要20秒！因此，虽然这个解决方案解决了我原来的问题，但它给了我一个新问题：如何更快地生成图块？

从字面上看，所有时间都花在了`[sourceLayer renderInContext:tileContext];`通话中。这对我来说似乎很奇怪，因为如果我直接添加该层，我可以每秒渲染大约 40 次，根据 Core Animation Instrument。创建我自己的图像上下文是否有可能导致它不使用 GPU 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:30:07.983

将图层分成瓷砖是唯一的解决方案。但是，您可以通过许多不同的方式来实现它。我建议手动进行（自行创建图层和子图层），但许多人建议使用 CATiledLayer [http://www.mlsite.net/blog/?p=1857](http://www.mlsite.net/blog/?p=1857)，这是通常实现地图的方式 - 缩放和旋转是这个很容易。CATiledLayer 的瓦片在它们被放到屏幕上之后*按需加载（绘制）。*这意味着在瓷砖完全绘制之前有一个短暂的延迟（闪烁），并且 AFAIK 很难摆脱这种行为。

# c# - 一旦单击一行的选择按钮，就会在该行和其余的gridview 之间出现一个gridview。可能的？

> ID：10094014
> 
> 赞同：0
> 
> 时间：2012-04-10T18:04:02.497
> 
> 标签：c#, asp.net, gridview

我想让用户单击 400 行网格视图的第 250 行的选择按钮。当他们点击它时，另一个 3x12 的 gridview 出现在该行下方，然后其他 150 行出现在该行下方。这是可能吗？我想我可以创建一个完整的其他 div，它将具有三个 gridview 输出，具体取决于 <= 和 > 所选行的索引。

**它开始于：**

Gridview 行 1-400

**然后在选择第 350 行之后是：**

Gridview 行 1-350

* * *

第 350 行信息的 Gridview

* * *

Gridview 行 351-400。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:31:22.423

这绝对是可能的，但我会使用 a `ListView`or`DataList`作为您的父容器，因为使用 a `GridView`，您必须将子列表放在一列中，这看起来很难看。这应该使您走上正确的道路：

```
<asp:ListView ID="lstOuterList" runat="server" DataKeyNames="ID, OtherColumn">
    <LayoutTemplate>
        <table width="100%">
            <asp:PlaceHolder runat="server" ID="itemPlaceHolder" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td><asp:LinkButton ID="LinkButton1" runat="server" Text="Expand" OnCommand="LinkButton1_Command" CommandArgument='<%#Container.DisplayItemIndex%>'></asp:LinkButton></td>
            <td><%#Eval("Value")%></td>
            <td><%#Eval("OtherValue")%></td>
            <td><%#Eval("OtherOtherValue")%></td>
        </tr>
        <asp:PlaceHolder ID="plcInnerList" runat="server">
            <asp:ListView ID="lstInnerList" runat="server" Width="100%">
                <LayoutTemplate>
                    <tr>
                        <td colspan="4">                                
                            <div style="padding:20px;background-color:#fffeee;">
                                <table width="100%">
                                    <asp:PlaceHolder runat="server" ID="itemPlaceHolder" />
                                </table>
                            </div>
                        </td>                        
                    </tr>
                </LayoutTemplate>   
                <ItemTemplate> 
                    <tr>                       
                        <td><%#Eval("Value")%></td>
                        <td><%#Eval("OtherValue")%></td>
                        <td><%#Eval("OtherOtherValue")%></td>  
                    </tr>                         
                </ItemTemplate>
            </asp:ListView>
        </asp:PlaceHolder>
    </ItemTemplate>        
</asp:ListView> 
```

当用户单击 DataList1 中的 LinkBut​​ton/Button 时，请执行以下操作：

```
protected void LinkButton1_Command(object sender, CommandEventArgs e)
{
    //pass index of item in command argument
    var itemIndex = Convert.ToInt32(e.CommandArgument);      

    //find the pnlChildView control
    var innerPlaceHolder = lstOuterList.Items[itemIndex].FindControl("plcInnerList") as PlaceHolder;
    if (innerPlaceHolder != null)
    {
        innerPlaceHolder.Visible = !innerPlaceHolder.Visible;          
        if (innerPlaceholder.Visible)
        {
            var innerList = innerPlaceHolder.FindControl("lstInnerList") as ListView;
            if (innerList != null)
            {
                //the id to retrieve data for the inner list
                int keyValue = (int)lstOuterList.DataKeys[itemIndex]["ID"];

                //bind the list using DataList1 data key value
                innerList.DataSource = new DataTable("DataSource"); //your datasource
                innerList.DataBind();
            }  
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:09:11.640

一种方法是：

在主网格的 rowcommand 上：

*   为网格创建 C# 代码将在里面 `GridView grd = new GridView();`

*   像任何其他网格一样绑定此实例

*   从主网格当前行添加控件，应该类似于

    ```
    e.Cells[0].Controls.Add(grd); 
    ```

我现在没有 VS，但我想你可以明白，我一直使用这种方法

# facebook - facebook连接数据库中的用户信息

> ID：10094015
> 
> 赞同：0
> 
> 时间：2012-04-10T18:04:04.330
> 
> 标签：facebook

我，我打算使用 facebook connect 连接到我的网站，我想知道是否全部

使用 facebook 连接的网站将用户信息存储在自己的数据库中吗？

如果是，那么使用哪个字段来验证数据库中的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:31:24.360

这很容易。将用户的 Facebook 用户 ID 存储在您的用户数据库表中。没有两个人共享相同的 Facebook 用户 ID。

# java - 实践中的 Java 并发：BoundedExecutor 中的竞争条件？

> ID：10094017
> 
> 赞同：8
> 
> 时间：2012-04-10T18:04:09.267
> 
> 标签：java, concurrency, race-condition, executor

`BoundedExecutor`Java Concurrency in Practice 一书中的实现有些奇怪。

当 Executor 中有足够多的线程排队或运行时，它应该通过阻塞提交线程来限制向 Executor 提交的任务。

这是实现（在 catch 子句中添加缺少的重新抛出之后）：

```
public class BoundedExecutor {
    private final Executor exec;
    private final Semaphore semaphore;

    public BoundedExecutor(Executor exec, int bound) {
        this.exec = exec;
        this.semaphore = new Semaphore(bound);
    }

    public void submitTask(final Runnable command) throws InterruptedException, RejectedExecutionException {
        semaphore.acquire();

        try {
            exec.execute(new Runnable() {
                @Override public void run() {
                    try {
                        command.run();
                    } finally {
                        semaphore.release();
                    }
                }
            });
        } catch (RejectedExecutionException e) {
            semaphore.release();
            throw e;
        }
    } 
```

当我`BoundedExecutor`用 an`Executors.newCachedThreadPool()`和 4 来实例化 时，我希望缓存线程池实例化的线程数永远不会超过 4。但实际上，确实如此。我得到了这个小测试程序来创建多达 11 个线程：

```
public static void main(String[] args) throws Exception {
    class CountingThreadFactory implements ThreadFactory {
        int count;

        @Override public Thread newThread(Runnable r) {
            ++count;
            return new Thread(r);
        }           
    }

    List<Integer> counts = new ArrayList<Integer>();

    for (int n = 0; n < 100; ++n) {
        CountingThreadFactory countingThreadFactory = new CountingThreadFactory();
        ExecutorService exec = Executors.newCachedThreadPool(countingThreadFactory);

        try {
            BoundedExecutor be = new BoundedExecutor(exec, 4);

            for (int i = 0; i < 20000; ++i) {
                be.submitTask(new Runnable() {
                    @Override public void run() {}
                });
            }
        } finally {
            exec.shutdown();
        }

        counts.add(countingThreadFactory.count);
    }

    System.out.println(Collections.max(counts));
} 
```

我认为在信号量的释放和任务结束之间有一个很小的时间框架，另一个线程可以在释放线程尚未完成时获得许可并提交任务。换句话说，它有一个竞争条件。

有人可以证实这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:51:41.580

BoundedExecutor 确实旨在说明如何限制任务提交，而不是作为限制线程池大小的一种方式。正如至少有一条评论指出的那样，有更直接的方法可以实现后者。

但是其他答案没有提到书中说使用无界队列和

> 将信号量的界限设置为等于池大小*加上*您希望允许的排队任务数，因为信号量限制了当前正在执行和等待执行的任务数。*[JCiP，第 8.3.3 节结束]*

通过提到无界队列和池大小，我们暗示（显然不是很清楚）使用有界大小的线程池。

然而，BoundedExecutor 一直困扰着我的是它没有实现 ExecutorService 接口。实现类似功能并仍然实现标准接口的现代方法是使用 Guava 的[listenerDecorator](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/util/concurrent/MoreExecutors.html#listeningDecorator%28java.util.concurrent.ExecutorService%29)方法和[ForwardingListeningExecutorService](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/util/concurrent/ForwardingListeningExecutorService.html)类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T18:18:04.597

您对比赛条件的分析是正确的。ExecutorService 和 Semaphore 之间没有同步保证。

但是，我不知道限制线程数是否是 BoundedExecutor 的用途。我认为更多的是限制提交给服务的任务数量。想象一下，如果您有 500 万个任务需要提交，并且如果您提交的任务超过 10,000 个，那么您的内存就会用完。

好吧，在任何给定时间你只会有 4 个线程在运行，你为什么要尝试将所有 500 万个任务排队？您可以使用与此类似的构造来限制在任何给定时间排队的任务数量。您应该从中得到的是，在任何给定时间只有 4 个任务在运行。

显然，解决方案是使用`Executors.newFixedThreadPool(4)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T18:22:07.630

我看到一次创建了多达 9 个线程。我怀疑存在竞争条件导致线程数量超过所需数量。

这可能是因为在运行任务之前和之后有工作要做。这意味着即使您的代码块中只有 4 个线程，也有许多线程停止前一个任务或准备开始一个新任务。

即线程在它仍在运行时执行释放（）。即使它是你做的最后一件事，它也不是在获得新任务之前做的最后一件事。

# c# - 菜单项快捷方式

> ID：10094019
> 
> 赞同：0
> 
> 时间：2012-04-10T18:04:10.727
> 
> 标签：c#, wpf, menuitem, keyboard-shortcuts

下面是我尝试为菜单项分配快捷方式的内容。当我单击菜单项时，它运行良好，但快捷方式不起作用。任何想法？

```
<Window.CommandBindings>
    <CommandBinding Command="ApplicationCommands.Save" Executed="MyCommand" />
</Window.CommandBindings>

<Window.InputBindings>
    <KeyBinding Key="S" Modifiers="Control" Command="ApplicationCommands.Save"/>
</Window.InputBindings>

<MenuItem Header="Save" Name="MainMenu_File_Save" Command="ApplicationCommands.Save">
    <MenuItem.Icon>
        <Image Height="16" Width="16" Source="/NewGUI_WPF;component/Images/saveHS.png" />
    </MenuItem.Icon>
</MenuItem>

private void MyCommand(object sender, ExecutedRoutedEventArgs e) {...} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:13:09.297

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace test
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void MyCommand(object sender, ExecutedRoutedEventArgs e)
        {
            MessageBox.Show("Test");
        }
    }
}

<Window x:Class="test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
  <Window.CommandBindings>
    <CommandBinding Command="ApplicationCommands.Save" Executed="MyCommand" />
  </Window.CommandBindings>

  <Window.InputBindings>
    <KeyBinding Key="S" Modifiers="Control" Command="ApplicationCommands.Save"/>
  </Window.InputBindings>

  <Grid>
    <Menu IsMainMenu="True">
     <MenuItem Header="_File">
      <MenuItem Header="Save" Name="MainMenu_File_Save" Command="ApplicationCommands.Save" />
     </MenuItem>
   </Menu>
  </Grid>
</Window> 
```

这对我行得通。对你起作用吗 ？

# javascript - tabIndex 和 Javascript 弹出窗口

> ID：10094022
> 
> 赞同：1
> 
> 时间：2012-04-10T18:04:32.063
> 
> 标签：javascript, popup, window, tabindex

我的 html 页面中几乎没有包含 tabIndex 属性的元素。

现在我从这个页面打开了一个基于 div 的模态弹出窗口。这个弹出窗口中的元素很少，它有 tabIndex。

问题：当用户按下选项卡时，焦点被设置为弹出窗口中的每个元素，在弹出窗口中的最后一个元素获得焦点并且用户仍然按下选项卡时，焦点将转到主页中的元素，而我没有想。

有什么方法可以将焦点旋转到弹出窗口本身的元素上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:53:21.797

如果您只需要在最后一个元素焦点消失后重新关注第一个元素，那么将 Jquery 的 focustout() 用于最后一个元素，然后使用 $('#FirstElement').focus()

我希望这会有所帮助

# ruby-on-rails - Rails：使用 has_many 对简单数据建模：通过

> ID：10094023
> 
> 赞同：1
> 
> 时间：2012-04-10T18:04:33.847
> 
> 标签：ruby-on-rails, data-modeling, has-many-through

我对宠物和兽医有一组非常简单的数据要求。

*   一个`owner`可以有很多`pets`
*   一个`pet`可以有一个`owner`
*   A`pet`可以被 (belongs_to) many 对待`veterinarians`
*   一个`veterinarian`可以治疗（have_many）`pets`

`Owner`并且`Veterinarian`都是`User`使用 STI 的子类。

这是一些代码：

```
class Owner < User
  has_many :pets
  has_many :veterinarians, :through => :pets
end

class Veterinarian < User
  attr_accessible :clinic_name

  has_many :pets
  has_many :owners, :through => :pets
end

class Pet < ActiveRecord::Base
  attr_accessible :name, :date_of_birth, :species, :breed, :gender, :neutered

  belongs_to :owner
  belongs_to :veterinarian
end 
```

这是失败的规范：

```
it "has various veterinarians" do
  o = Owner.make!(:email => 'owner1@gmail.com')
  v1 = Veterinarian.make!(:email => 'vet_1@gmail.com')
  v2 = Veterinarian.make!(:email => 'vet_2@gmail.com')
  p = Pet.make!(:name => 'fluffy')

  o.pets << p
  v1.pets << p
  v2.pets << p

  o.pets.should have(2).records
  o.veterinarians.should have(2).records
end 
```

这`make!`与使用机械师夹具更换有关。它只是工厂创建对象。

失败发生在最后一行。原来 o.veterinarians 只有 1 条记录。我知道 a`pet`不是传统意义上的联接表，因为我不想每次创建所有者和兽医之间的关系时都创建一个全新的宠物。我应该使用更像`Owner`has_many `Pet`s、`Pet`belongs_to :owner 和`Pet`has_and_belongs_to_many `Veterinarian`s 的模式吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:18:45.270

`Pet`您必须在和之间使用连接表`Veterinarian`。让我们称之为`Treatment`：

```
class Treatment < ...
...
  belongs_to :pet
  belongs_to :veterinarian
...
end

class Veterinarian < ...
...
  has_many :treatments
  has_many :pets, through: :treatments
...
end

class Pet < ...
...
  has_many :treatments
  has_many :veterinarians, through: :treatments
...
end 
```

# linkedin - 获取linkedin公开状态更新

> ID：10094027
> 
> 赞同：0
> 
> 时间：2012-04-10T18:04:50.313
> 
> 标签：linkedin

我正在尝试从linkedin（例如：[http](http://www.linkedin.com/company/4043/activity) ://www.linkedin.com/company/4043/activity ）获取我们公司最新的 3 项公开活动并将其展示在我们的网站上，但不幸的是我没有看到明确的解释这样做在 API 文档中。我注册了一个 API 密钥，但我很困惑是否需要针对什么进行 OAuth，然后调用什么 API 来获取公开可用的信息？可用的东西真的需要 OAuth 吗？我可以为内部用户存储 OAuth 令牌并继续获取数据吗？我真的不想使用 oauth 对网站访问者进行身份验证以获取免费的链接内容。

这个问题与这个问题有关，但我仍然想问[一下](https://stackoverflow.com/questions/9113699/linkedin-api-to-get-public-data)，看看我是否能得到更好的回应/答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:49:37.330

要从 LinkedIn API 获取公司更新，您需要参考以下文档：

[https://developer.linkedin.com/reading-company-updates](https://developer.linkedin.com/reading-company-updates)

API 当前处于预览模式，但上述文档解决了您的问题：OAuth，并显示了特定调用以及示例输出。如果您在查看文档后有任何问题，请随时访问我们的开发者论坛：

[https://developer.linkedin.com/forums/rest](https://developer.linkedin.com/forums/rest)

我们团队中的一位成员将非常乐意为您提供进一步的帮助。

享受！

-杰里米

# c# - PRISM：带有名称和 ContainerControlledLifeTimeManager 的 RegisterType

> ID：10094030
> 
> 赞同：0
> 
> 时间：2012-04-10T18:04:53.707
> 
> 标签：c#, prism, unity-container, ioc-container, resolve

我有这个问题`RegisterType`。

```
container.RegisterType<IFoo, Foo>("Foo", new ContainerControlledLifetimeManager()); 
```

我创建的每个模块都将包含一个类似的最后一个寄存器。另一个模块将 Foo2、Foo3 实现为具体类型。

对我来说，包含寄存器类型的名称真的很有必要，因为在外部模块中会用键调用这个对象。

问题也在模块内部，在它的构造函数中需要 IFoo 作为参数（据我所知，这样做是必要的，对象是**ContainerControlledLifetimeManager**），当我设置函数 RequestNavigate 并尝试生成viewModel时：

```
public class FooViewModel
{
    // here cannot create the object.
    public FooViewModel(IFoo foo, ...)
    { .. }
} 
```

它抛出：

> 用户代码未处理 ResolutionFailedException。依赖项解析失败，type = "System.Object"，name = "FooView"。异常发生时：解决时。例外情况是： InvalidOperation - 当前类型 Prism4Demo.ModuleA.IFoo 是一个接口，无法构造。您是否缺少缺少类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:08:28.870

您还可以在解析期间使用 DependencyOverride

```
container.Resolve<FooViewModel>(new DependencyOverride<IFoo>(container.Resolve<IFoo>("Foo"))) 
```

或RegisterType 期间的ResolvedParameter。

更新：

```
container.RegisterType<FooViewModel>(
    new InjectionConstructor(new ResolvedParameter<IFoo>("Foo"))); 
```

您甚至可以将 Resolve 用于 View 而不是仅用于 ViewModel。它会自动解决 ViewModel 的依赖关系。

```
regionManager.RegisterViewWithRegion(RegionNames.LeftRegion,
    () => this.container.Resolve<FooView>(new DependencyOverride<IFoo>
        (this.container.Resolve<IFoo>("Foo")))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:18:34.023

有两种方法可以做到这一点。一种方法是获取您的容器，然后通过提供参数“Foo”来解析实例。这不是一个真正干净的方法。您不仅限于使用 prism 提供的 DI 容器。Prism 还包含 ServiceLocator 并链接到容器。

服务定位器仅用于解析实例，您只需调用

```
ServiceLocator.Current.GetInstance<IFoo>("Foo"); 
```

您确实需要添加对 Microsoft.Prism.ServiceLocation.dll 的引用

# android - Actionbarsherlock 开关 Actionbar Overlay Mode 程序化

> ID：10094033
> 
> 赞同：3
> 
> 时间：2012-04-10T18:04:58.880
> 
> 标签：android, android-layout, actionbarsherlock

我为我的应用程序使用 Actionbarsherlock，我喜欢在我的代码中切换操作栏覆盖模式。我有 2 个片段（一个是 Mapview，我想要一个半透明的操作栏），另一个是 ListFragment，需要一个实心的操作栏。

我试过了

```
requestWindowFeature((int) Window.FEATURE_ACTION_BAR & ~Window.FEATURE_ACTION_BAR_OVERLAY); 
```

问题在于请求功能仅在添加内容之前有效。

我使用这种风格来完成透明的Actionbar

```
<style name="TransparentActionbar" parent="@style/Theme.Sherlock" xmlns:android="http://schemas.android.com/apk/res/android">
    <item name="windowActionBarOverlay">true</item>
    <item name="windowActionModeOverlay">true</item>
    <item name="abBackground">#96000000</item>
    <item name="abDivider">@null</item>
</style> 
```

有没有办法设置

```
<item name="windowActionBarOverlay">true</item>
<item name="windowActionModeOverlay">true</item> 
```

在活动/片段内为假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:27:07.467

编辑：遗憾的是，它不适用于 Actionbarsherlock 和 Compatibility Package 中的 ListFragment。出于某种原因，上边距被添加到下边距。左右边距在 LayoutListener 内工作正常。

[在Android 开发者示例](http://developer.android.com/resources/samples/HoneycombGallery/src/com/example/android/hcgallery/TitlesFragment.html)中找到了解决此问题的方法

```
// Attach a GlobalLayoutListener so that we get a callback when the layout
// has finished drawing. This is necessary so that we can apply top-margin
// to the ListView in order to dodge the ActionBar. Ordinarily, that's not
// necessary, but we've set the ActionBar to "overlay" mode using our theme,
// so the layout does not account for the action bar position on its own.
ViewTreeObserver observer = getListView().getViewTreeObserver();
observer.addOnGlobalLayoutListener(layoutListener);

// Because the fragment doesn't have a reliable callback to notify us when
// the activity's layout is completely drawn, this OnGlobalLayoutListener provides
// the necessary callback so we can add top-margin to the ListView in order to dodge
// the ActionBar. Which is necessary because the ActionBar is in overlay mode, meaning
// that it will ordinarily sit on top of the activity layout as a top layer and
// the ActionBar height can vary. Specifically, when on a small/normal size screen,
// the action bar tabs appear in a second row, making the action bar twice as tall.
ViewTreeObserver.OnGlobalLayoutListener layoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int barHeight = getActivity().getActionBar().getHeight();
        ListView listView = getListView();
        FrameLayout.LayoutParams params = (LayoutParams) listView.getLayoutParams();
        // The list view top-margin should always match the action bar height
        if (params.topMargin != barHeight) {
            params.topMargin = barHeight;
            listView.setLayoutParams(params);
        }
        // The action bar doesn't update its height when hidden, so make top-margin zero
        if (!getActivity().getActionBar().isShowing()) {
          params.topMargin = 0;
          listView.setLayoutParams(params);
        }
    }
}; 
```

# django - Django 项目/应用程序布局 - 正确的方式？

> ID：10094036
> 
> 赞同：1
> 
> 时间：2012-04-10T18:05:02.667
> 
> 标签：django, django-models

我正在 Django 中创建一个简单的项目，以进一步了解它和 Python，基本上只是存储书签和标签，两者都有视图，并且会有 3 个模型：
Tag
Bookmark
Bookmark_Tag（关系）

我阅读了 django 文档中的“项目与应用程序”面板，但我仍然不确定如何布置它，现在它都在一个书签应用程序中，**是否应该有一个单独的书签应用程序和一个单独的标签应用程序，如果是这样，关系模型在哪里？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:21:51.717

不，您不需要为每个单独的应用程序。它们密切相关，听起来它们共同定义了您的应用程序，而不是单独定义。如果稍后，您向您的站点添加了另一个功能，该功能使用相同的数据库和设置，但与您当前的应用程序没有太多共享，这将是同一项目中的另一个应用程序。

请参阅本网站上的[Django 项目 models.py 与应用程序 models.py](https://stackoverflow.com/questions/2610727/django-project-models-py-versus-app-models-py)和[Django：“项目”与“应用程序”](https://stackoverflow.com/questions/4879036/django-projects-vs-apps)以及[Django 技巧：布置应用程序](http://www.b-list.org/weblog/2006/sep/10/django-tips-laying-out-application/)以获取更多指南。

如果`Bookmark`s 和`Tag`s 具有多对多关系，并且您需要向该关系添加额外的字段（除了`id`相关对象的 s 之外），您可以使用 a`ManyToManyField`并设置`through`表：

```
class Bookmark(models.Model):
    # whatever fields you need on Bookmark
    tags = models.ManyToManyField('Tag', through = 'BookmarkTag')

class Tag(models.Model):
    # whatever fields you need on Tag
    pass

class BookmarkTag(models.Model):
    bookmark = models.ForeignKey(Bookmark)
    tag = models.ForeignKey(Tag)
    # whatever additional fields you need on the relationship 
```

[有关更多信息，请参阅有关多对多关系的额外字段](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)的 Django 文档。

# opengl - SetPixelFormat 返回 0，但没有设置错误？

> ID：10094037
> 
> 赞同：1
> 
> 时间：2012-04-10T18:05:03.263
> 
> 标签：opengl, vb6, wine

我在 WINE 中运行 VB6 应用程序，但程序的 OpenGL 部分不起作用。它正在使用 PFD_DRAW_TO_BITMAP。PFD_DRAW_TO_WINDOW 格式似乎有效。

我列举了所有像素格式（大约有 256 种），其中一些符合我的要求。ChoosePixelFormat 似乎返回了正确的格式（在本例中为 pixelFormat 6），但是当我将此值传递给 SetPixelFormat 时，它返回 0。我查看了文档，它说要检查 GetLastError() 以获取更多信息，但是当我调用它时，它返回 0 格式为空白错误消息。

有谁知道无论如何要弄清楚为什么 SetPixelFormat 会失败？我做了一些阅读，听起来 DRAW_TO_BITMAP 自 2009 年 5 月以来已经实施。

我知道 DRAW_TO_BITMAP 不是硬件加速的。这是完全可以接受的。这个应用程序在 Windows 中运行良好——我只需要弄清楚为什么支持的像素格式似乎无法被识别。

我正在他们的软件包管理器中运行 Ubuntu，这是 WINE 的最新版本，如果这很重要，则在 Quadro 上运行（不确定 Wine 是否尝试使用底层显卡，或者它是否虚拟化所有像素格式以进行软件渲染）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T20:17:33.237

我不知道为什么`SetPixelFormat`只会在 WINE 上失败，但在任何情况下`GetLastError`从 VB6 代码手动调用都是不正确的。VB 在幕后进行自己的 DLL 调用。这些将（通常）成功，重置看到的错误代码`GetLastError`并使其在 VB 代码中无用。

相反，VB`GetLastError`在每次用户启动的 DLL 调用后立即调用自己。它保存该值并使其可用作属性`Err.LastDllError`。使用它来找出真正的错误代码。

# iphone - 在类之间保存数组

> ID：10094041
> 
> 赞同：0
> 
> 时间：2012-04-10T18:05:13.963
> 
> 标签：iphone, objective-c, cocoa-touch

当前尝试保存一个数组，该数组根据选择 UITableView 中的哪些单元格来填充，并将该数组保存在单独对象的实例中。我让数组填充得很好，但是，我的保存方法，这是一个通过单击条形按钮调用的 IBAction 似乎不起作用。这是一些代码：

```
-(IBAction)saveWorkout:(id)sender {
    Workouts *new = [[Workouts alloc] init];
    [new addNewWorkout:customWorkout];

    [customWorkout removeAllObjects];
} 
```

这段代码来自第一堂课。

这是我在 Workouts 类中的 addNewWorkouts 方法的代码：

```
-(void)addNewWorkout:(NSMutableArray*)array {
    NSMutableArray *temp = [[NSMutableArray alloc] init];
    temp = array;

    self.workoutList = temp;

    [temp release];

} 
```

这是我的“Workout.h”

```
#import <Foundation/Foundation.h>

@interface Workouts : NSObject {
    NSString *workoutName;
    NSMutableArray *workoutList;
    NSString *description;
    int *reps;
    int *weights;
    int *sets;
}
@property (nonatomic, retain) NSString *workoutName;
@property (nonatomic, retain ) NSString *description;
@property (nonatomic, retain) NSMutableArray *workoutList;

-(void)addNewWorkout:(NSMutableArray*)array; 
```

@结尾

在运行此代码之前，我收到来自 Xcode 的警告，说“锻炼可能无法响应“addNewWorkouts”。

有谁知道是什么导致了这个错误？构建并运行后，单击“保存”按钮，应用程序崩溃，并出现无法识别的选择器发送到实例 0x3b04410 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:10:25.320

`[new addNewWorkouts:customWorkout]` 当方法的选择器是时你调用`addNewWorkout:`（注意方法名中没有复数）

这将导致错误的方法调用并导致崩溃。

另外，addNewWorkout 方法的内存管理也有问题。

```
1- NSMutableArray *temp = [[NSMutableArray alloc] init];
2- temp = array;
3- self.workoutList = temp;
4- [temp release]; 
```

您在第 1 行分配了一个新的 NSMutableArray，然后当您将其指针替换为“数组”时，在第 2 行丢失了它的引用。刚才的分配丢失了，程序会泄露。

然后，在第 4 行，您向“temp”发送一条释放消息，该消息实际上指向“array”，从而释放您收到的参数而不是临时对象。

创建临时数组有什么原因吗？您可以根据需要分配财产并复制或保留财产。

# php - SQL 保护提交的数据免受 SQL 注入

> ID：10094046
> 
> 赞同：0
> 
> 时间：2012-04-10T18:05:42.270
> 
> 标签：php, sql

我正在执行以下操作以保护提交的数据免受 sql 攻击

```
$myusername = stripslashes($myusername);
$myusername = mysql_real_escape_string($myusername);
$mypassword = stripslashes($mypassword);
$mypassword = mysql_real_escape_string($mypassword);
$confirm_password = stripslashes($confirm_password);
$confirm_password = mysql_real_escape_string($confirm_password);
$fullname = stripslashes($fullname);
$fullname = mysql_real_escape_string($fullname); 
```

有没有更简单的方法来做到这一点？这是一个注册表单，我有许多领域需要保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:10:29.250

> 有没有更简单的方法来做到这一点？

是的，首先，[禁用自动斜线](http://www.php.net/manual/en/security.magicquotes.disabling.php)，所以你不需要剥离它们。这将减少代码已经：

```
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$confirm_password = mysql_real_escape_string($confirm_password);
$fullname = mysql_real_escape_string($fullname); 
```

如果您随后使用所谓的参数化查询，您甚至不需要再调用`mysql_real_escape_string`，但您可以安全地使用变量。

请注意，您使用的是 unsafe 变体，`mysql_real_escape_string`因为您没有提供指向它的数据库链接。

另请参阅：[在 PHP 中停止 SQL 注入的最佳方法](https://stackoverflow.com/q/60174/367456)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:13:51.173

是的，使用 PHP 的**PDO 对象**（PHP 数据库对象）并创建[准备好的语句。](http://php.net/manual/en/pdo.prepare.php)

```
$dbh = new PDO('mysql:dbname=YOURDB;host=localhost', 'user', 'pass');
$sql = 'SELECT name FROM user WHERE id = :id';
$sth = $dbh->prepare($sql);
$sth->execute(array(':id' => 25);
$result = $sth->fetchAll(); 
```

它还可以帮助您知道您可以寻找 PDO Wrapper 来让您的生活更轻松。

# knockout.js - 将 2 个可观察数组与淘汰赛 js 链接在一起

> ID：10094048
> 
> 赞同：2
> 
> 时间：2012-04-10T18:05:51.140
> 
> 标签：knockout.js

我有 2 个数组。一个是一个地区所有学校的数组，另一个是这些学校所有学生的列表。学生对象包含知道他们属于哪个学校。我可以列出所有学校，也可以列出所有学生。我希望能够选择一所学校（或几所学校）并让学生列表仅显示该学校的学生。

这是我得到的（在 CoffeeScript 中）：

```
ViewModel = () ->
    @accounts = ko.observableArray([])
    @players_to_teams = ko.observableArray([])
    @selected_players_to_teams = ko.observableArray([])
    @selected_schools = ko.observableArray([])
    null 
```

看法：

```
<label for="school_selection">School</label>
<select id="school_selection" class="inline" multiple=true size="50" data-bind="options:accounts, optionsText: 'Name', selectedOptions: selected_schools"></select>

<div id="player_list" class="inline">
  <table class="table table-striped">
    <thead>
    <tr>
      <th id="firstName">First Name</th>
      <th id="lastName">Last Name</th>
      <th id="position">Position</th>
      <th id="teamName">Team Name</th>
      <th id="accountId">Account ID</th>
    </tr>
    </thead>
    <tbody data-bind="foreach: selected_players_to_teams">
    <tr>
      <td data-bind="text: FirstName"></td>
      <td data-bind="text: LastName"></td>
    </tr>
    </tbody>
  </table>
</div> 
```

更改时`selected_schools`，我需要更新`selected_players_to_teams`以仅包含`selected_schools`数组中有学校的学生记录吗？

有没有办法链接 observableArrays，使 observableArrays 成为一个函数，或者可能捕获 observableArray 的回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:31:52.257

我建议将 selected_players_to_teams 实现为在 selected_schools 更新时运行的 ko.computed，并返回 selected_schools 的 player_to_teams。

有关仅代码示例，请参见此 jsfiddle：http: [//jsfiddle.net/MqNPm/](http://jsfiddle.net/MqNPm/)

团

# jquery - 为什么 Firefox 一直突出显示我的下拉菜单链接？可能与 CSS/JQuery 相关

> ID：10094050
> 
> 赞同：2
> 
> 时间：2012-04-10T18:05:52.660
> 
> 标签：jquery, css

每次我单击激活/下拉下拉菜单的 div 时，链接都会突出显示：

![在此处输入图像描述](../Images/dafd402fdbe5cf4fa4ec16a5c61c2b2f.png)

很烦人。这是一个 CSS 或 JQuery 问题。我有一个 .postHolder 类，它保存页面上发布的每个帖子。现在，如果我单击屏幕上的任何位置关闭菜单，然后再次单击菜单打开按钮，问题就消失了。如果我转到下一篇文章并尝试问题存在，直到我单击关闭然后再次单击。

如果我刷新浏览器，问题又回来了，从第一篇文章开始。这很令人困惑，因为它在我的任何其他浏览器中都没有发生。

这是菜单的 CSS：

```
.postMenu {
    position:absolute;
    display:none;
    padding-bottom:20px;
    background-color:white !important;
    border:1px solid $main-background-color;
    height:163px;
    width:170px;
    top:18px;
    right:2px;
    -webkit-box-shadow: 0 10px 6px -6px #777;
    -moz-box-shadow: 0 10px 6px -6px #777;
    box-shadow: 0 10px 6px -6px #777;
    color:gray;
    z-index:3000;

        li {

        font-size:12px;
        height:33px;
        background-color:white !important;

            a span {
                float:left;
                width:160px;
                height:33px;
                line-height:33px;
                padding-left:10px;
                color:gray;

                  &:hover {
                    background-color:#4D90FE !important;
                    color:white;
                    //  #DD4B39,#D14836
                    }
            }

            &:hover {
            background-color:#4D90FE;
            color:white;

            }
        }

        .deletePost {
            //position:relative;
            padding-top:0px !important;
            padding-left:0px !important;
            height:39px;
            width:170px;
            text-align:center;
            padding-bottom:7px;
            border-bottom:1px solid #d9d9d9;

                a {

                    span {
                    float:left;
                    padding-left:0px !important;                            
                        height:46px !important;
                        width:170px !important;
                        line-height:46px;
                    }
                }

                a span:hover {
                    background-color:#DD4B39 !important;
                    color:white;
                //  #DD4B39,#D14836
                }
        }

        .reportAbuse {
            border-top:1px solid #d9d9d9;

                a span:hover {
                    background-color:gray !important;;
                }

        }

} 
```

JQuery incase 这是与 JQuery 相关的：

```
 $(".microposts").on("click", ".micropostOptions", function() {
        var postMenu = $(this).find('.postMenu');

        if(postMenu.is(':hidden') ){
            $('.postMenu').hide();
            $('.micropostOptions').removeClass("postMenuHoverState");
            postMenu.show();
            $(this).hide().addClass('postMenuHoverState').show(60);

        }else{
            postMenu.hide();
            $(this).removeClass("postMenuHoverState");
        }

    $(document.body).click(function(e) {
        var clickedElement = $(e.target);
        if(clickedElement.is('.micropostOptions:visible')) {
            return;
        }
        $('.postMenu').hide();
        $('.micropostOptions').removeClass("postMenuHoverState");
    });

}); 
```

HTML：

```
 <nav class="micropostOptions">
         <ul class="postMenu">
           <li class="deletePost"><%= link_to content_tag(:span, "Delete post"), m, :method => :delete, :confirm => "Are you sure?", :title => m.content, :class => "message_delete" %>
           </li>
           <li class="disableCommenting"><%= link_to content_tag(:span, "Pause commenting"), "2" %></li>
           <li class="blockCommenter"><%= link_to content_tag(:span, "Block commenter"), "3" %></li>
           <li class="openInNewWindow"><%= link_to content_tag(:span, "Open in new window"), "4" %></li>
           <li class="reportAbuse"><%= link_to content_tag(:span, "Report abuse"), "5" %></li>
         </ul>  
       </nav> 
```

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:11:30.630

```
&:hover {
    background-color:#4D90FE; 
```

假设您的下拉列表中的链接也采用`<li>`这种样式正在被继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:12:59.840

您的 CSS 在悬停时设置背景颜色：

```
 &:hover {
    background-color:#4D90FE;
    color:white;
    } 
```

这

```
a span {
color:gray;
} 
```

覆盖您设置的颜色`:hover`并将其设置为灰色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:06:47.240

这暂时解决了我的问题。掩饰得好。

```
span::-moz-selection {
    background: none; /* Firefox */
} 
```

# java - Android - 创建自己的日历

> ID：10094053
> 
> 赞同：0
> 
> 时间：2012-04-10T18:05:53.957
> 
> 标签：java, android, xml, android-layout, sdk

是否可以在 Eclipse 中使用 java 和 xml 从头开始​​为 android 创建日历应用程序，或者是否已经制作了日历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:09:37.637

日历只是一个表格，您可以在 Android 中创建它。顶部的 TextView 可用于当前月份。单击单元格可以打开当天的事件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-15T13:44:06.117

好吧，有两种方法可以“创建自己的日历”。简单的方法是创建一个谷歌日历或其他服务的客户端。第二个是创建日历的客户端和服务器。

# r - 嵌套 if else 语句以将标签附加到值

> ID：10094054
> 
> 赞同：2
> 
> 时间：2012-04-10T18:05:59.207
> 
> 标签：r, if-statement

我有一列从 1:1000 开始的数字。我想将标签“s”附加到每个数字的前面，以便每个单元格中的字符总数保持不变。例如，“1”会变成“s0001”，“15”会变成“s0015”，“620”会变成“s0620”，“1000”会变成“s1000”。

我曾尝试使用嵌套`if else`语句来完成此操作，但我不断收到条件长度 > 1 且仅使用第一个元素的错误。

这是一个示例数据集和我正在使用的代码：

```
df=data.frame(code=seq(1:1000))
df$code=
  if (df$code < 10) { df$code=paste("s000",df$code,sep="") } else
    if (100 > df$code & df$code >= 10) { df$code=paste("s00",df$code,sep=="") } else
      if (1000 > df$code & df$code >= 100) { df$code=paste("s0",df$code,sep="") } else
      { df$code=paste("s",df$code,sep="") } 
```

我怀疑有一种更简单的方法可以在不使用`if else`. 有什么想法吗？

谢谢！

* * *

**解决方案**

感谢乔兰！如果 x 是非连续整数：

```
d=data.frame(x=sample(1:1000,500))
d$nc=nchar(d$x)
ddply(d,.(nc),transform,lab = paste("s",paste(rep("0",4-unique(nc)),collapse = ""),x,sep = "")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:47:30.367

怎么样`sprintf`？

```
> sprintf('s%04d', c(1,10,100,1000))
[1] "s0001" "s0010" "s0100" "s1000" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:15:50.033

我 100% 肯定有更好的方法来做到这一点，我有点不好意思诉诸`ddply`，但这至少有效：

```
d <- data.frame(x = 1:1000,nc = nchar(1:1000))
ddply(d,.(nc),transform,lab = paste("s",paste(rep("0",4-unique(nc)),collapse = ""),x,sep = "")) 
```

我们走了，这好多了，我认为：

```
paste("s",sapply(4-nchar(1:1000),function(i) paste(rep("0",i),collapse = "")),1:1000,sep = "") 
```

# java - 可以使用 JAVA sql 打开到不同远程 MySQL 服务器的两个持久连接吗？

> ID：10094055
> 
> 赞同：1
> 
> 时间：2012-04-10T18:06:06.390
> 
> 标签：java, mysql, jdbc, persistent-connection

因此，我试图通过引用位于不同 MYSQL 服务器中的表来运行在远程 MySQL 服务器中创建表的代码。我试图在其中创建表的服务器有空间限制，并且被引用的表非常大，因此它们必须保存在不同的远程服务器上。

我正在尝试找到一种方法来同时建立与两个数据库的持久连接（使用 JDBC 库），这样我就不必一直缓冲少量数据行......我希望能够直接引用数据。

例如，数据库 A 包含我引用的数据，而数据库 B 是我创建新表的位置。假设我在数据库 A 中引用的表是 1,000,000 行。而不是说，打开与数据库 A 的连接，缓冲 10,000 行，关闭连接，打开与数据库 B 的连接，写入该数据库，删除我的缓冲区，然后重复......

我只想与数据库 A 建立持久连接，因此每次写入数据库 B 都可以引用数据库 A 中的数据。

这可能吗？我尝试了几种方法（主要是通过创建仅在连接中断时才刷新的新连接对象），但我似乎无法让这个想法奏效。

有没有人使用 JDBC 做过类似的事情？如果是这样，如果你能指出我正确的方向，或者告诉我你是如何让它工作的，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:48:33.977

我认为最好有两个单独的连接，一个读取连接和一个写入连接，并使用某种小型缓冲区通过您的 Java 应用程序传递数据。

另一个更复杂但可能更优雅的解决方案是使用 FEDERATED 表。它使远程服务器上的表看起来是本地的。查询被传递到远程服务器并将结果发回。您必须小心索引，否则它会非常慢，但它可能适用于您想要做的事情。

[http://dev.mysql.com/doc/refman/5.5/en/federated-description.html](http://dev.mysql.com/doc/refman/5.5/en/federated-description.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:24:01.163

您可以在数据库 A 中创建数据，然后通过复制将其复制到数据库 B。

或者，听起来您正在实现某种队列。我曾经用 Java 构建了一个数据复制程序，它使用了 Queue 接口的内置实现。我有一个从数据库 A 读取数据并填充队列的线程，以及一个从队列读取数据并写入数据库 B 的线程。如果有用的话，我可以尝试挖掘我使用的类吗？

编辑：

这是代码，对发布进行了一些调整。我没有包含配置类，但它应该让您了解如何使用队列类；

```
package test;

import java.io.File;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;

/**
 * This class implements a JDBC bridge between databases, allowing data to be
 * copied from one place to another.
 * <p>This implementation is threaded, as it uses a {@link BlockingQueue} to pass
 * data between a producer and a consumer.
 */
public class DBBridge {

    public static void main( String[] args ) {

        Adaptor fromAdaptor = null;
        Adaptor toAdaptor = null;

        BridgeConfig config = null;

        try {
            /* BridgeConfig is essentially a wrapper around the Simple XML serialisation library.
             * http://simple.sourceforge.net/
             */
            config = BridgeConfig.loadConfig( new File( "db-bridge.xml" ) );
        }
        catch ( Exception e ) {
            System.err.println( "Failed to read or parse db-bridge.xml: " + e.getLocalizedMessage() );
            System.exit( 1 );
        }

        BlockingQueue<Object> b = new ArrayBlockingQueue<Object>( config.getQueueSize() );

        try {
            HashMap<String, DatabaseConfig> dbs = config.getDbs();

            System.err.println( "Configured DBs" );

            final String sourceName = config.getSource();
            final String destinationName = config.getDestination();

            if ( !dbs.containsKey( sourceName ) ) {
                System.err.println( sourceName + " is not a configured database connection" );
                System.exit( 1 );
            }

            if ( !dbs.containsKey( destinationName ) ) {
                System.err.println( destinationName + " is not a configured database connection" );
                System.exit( 1 );
            }

            DatabaseConfig sourceConfig = dbs.get( sourceName );
            DatabaseConfig destinationConfig = dbs.get( destinationName );

            try {
                /*
                 * Both adaptors must be created before attempting a connection,
                 * as otherwise I've seen DriverManager pick the wrong driver!
                 */
                fromAdaptor = AdaptorFactory.buildAdaptor( sourceConfig, sourceConfig );
                toAdaptor = AdaptorFactory.buildAdaptor( destinationConfig, destinationConfig );

                System.err.println( "Connecting to " + sourceName );
                fromAdaptor.connect();

                System.err.println( "Connecting to " + destinationName );
                toAdaptor.connect();

                /* We'll send our updates to the destination explicitly */
                toAdaptor.getConn().setAutoCommit( false );
            }
            catch ( SQLException e ) {
                System.err.println();
                System.err.println( "Failed to create and configure adaptors" );
                e.printStackTrace();
                System.exit( 1 );
            }
            catch ( ClassNotFoundException e ) {
                System.err.println( "Failed to load JDBC driver due to error: " + e.getLocalizedMessage() );
                System.exit( 1 );
            }

            DataProducer producer = null;
            DataConsumer consumer = null;

            try {
                producer = new DataProducer( config, fromAdaptor, b );
                consumer = new DataConsumer( config, toAdaptor, b );
            }
            catch ( SQLException e ) {
                System.err.println();
                System.err.println( "Failed to create and configure data producer or consumer" );
                e.printStackTrace();
                System.exit( 1 );
            }

            consumer.start();
            producer.start();
        }
        catch ( Exception e ) {
            e.printStackTrace();
        }
    }

    public static class DataProducer extends DataLogger {

        private BridgeConfig config;
        private Adaptor adaptor;
        private BlockingQueue<Object> queue;

        public DataProducer(BridgeConfig c, Adaptor a, BlockingQueue<Object> bq) {
            super( "Producer" );
            this.config = c;
            this.adaptor = a;
            this.queue = bq;
        }

        @Override
        public void run() {
            /* The tables to copy are listed in BridgeConfig */
            for ( Table table : this.config.getManifest() ) {

                PreparedStatement stmt = null;
                ResultSet rs = null;

                try {
                    String sql = table.buildSourceSelect();
                    this.log( "executing: " + sql );
                    stmt = this.adaptor.getConn().prepareStatement( sql );

                    stmt.execute();

                    rs = stmt.getResultSet();

                    ResultSetMetaData meta = rs.getMetaData();

                    /* Notify consumer that a new table is to be processed */
                    this.queue.put( table );
                    this.queue.put( meta );

                    final int columnCount = meta.getColumnCount();

                    while ( rs.next() ) {
                        ArrayList<Object> a = new ArrayList<Object>( columnCount );

                        for ( int i = 0; i < columnCount; i++ ) {
                            a.add( rs.getObject( i + 1 ) );
                        }

                        this.queue.put( a );
                    }
                }
                catch ( InterruptedException ex ) {
                    ex.printStackTrace();
                }
                catch ( SQLException e ) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                try {
                    /* refresh the connection */
                    /* Can't remember why I can this line - maybe the other
                     * end kept closing the connection. */
                    this.adaptor.reconnect();
                }
                catch ( SQLException e ) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            try {
                /* Use an object of a specific type to "poison" the queue
                 * and instruct the consumer to terminate. */
                this.log( "putting finished object into queue" );
                this.queue.put( new QueueFinished() );

                this.adaptor.close();
            }
            catch ( InterruptedException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch ( SQLException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    /* Superclass for producer and consumer */
    public static abstract class DataLogger extends Thread {

        private String prefix;

        public DataLogger(String p) {
            this.prefix = p;
        }

        protected void log( String s ) {
            System.err.printf( "%d %s: %s%n", System.currentTimeMillis(), this.prefix, s );
        }

        protected void log() {
            System.err.println();
        }
    }

    public static class DataConsumer extends DataLogger {

        private BridgeConfig config;
        private Adaptor adaptor;
        private BlockingQueue<Object> queue;
        private int currentRowNumber = 0;
        private int currentBatchSize = 0;
        private long tableStartTs = -1;

        public DataConsumer(BridgeConfig c, Adaptor a, BlockingQueue<Object> bq) throws SQLException {

            super( "Consumer" );

            this.config = c;
            this.adaptor = a;
            this.queue = bq;

            /* We'll send our updates to the destination explicitly */
            this.adaptor.getConn().setAutoCommit( false );
        }

        public void printThroughput() {
            double duration = ( System.currentTimeMillis() - this.tableStartTs ) / 1000.0;
            long rowsPerSec = Math.round( this.currentRowNumber / duration );
            this.log( String.format( "%d rows processed, %d rows/s", this.currentRowNumber, rowsPerSec ) );
        }

        @Override
        public void run() {

            this.log( "running" );

            Table currentTable = null;
            ResultSetMetaData meta = null;

            int columnCount = -1;

            PreparedStatement stmt = null;

            while ( true ) {
                try {
                    Object o = this.queue.take();

                    if ( o instanceof Table ) {
                        currentTable = (Table) o;

                        this.log( "processing" + currentTable );

                        if ( this.currentBatchSize > 0 ) {
                            /* Commit outstanding rows from previous table */

                            this.adaptor.getConn().commit();

                            this.printThroughput();
                            this.currentBatchSize = 0;
                        }

                        /* refresh the connection */
                        this.adaptor.reconnect();
                        this.adaptor.getConn().setAutoCommit( false );

                        /*
                         * Arguably, there's no need to flush the commit buffer
                         * after every table, but I like it because it feels
                         * tidy.
                         */
                        this.currentBatchSize = 0;
                        this.currentRowNumber = 0;

                        if ( currentTable.isTruncate() ) {
                            this.log( "truncating " + currentTable );
                            stmt = this.adaptor.getConn().prepareStatement( "TRUNCATE TABLE " + currentTable );
                            stmt.execute();
                        }

                        this.tableStartTs = System.currentTimeMillis();
                    }
                    else if ( o instanceof ResultSetMetaData ) {

                        this.log( "received metadata for " + currentTable );

                        meta = (ResultSetMetaData) o;
                        columnCount = meta.getColumnCount();

                        String sql = currentTable.buildDestinationInsert( columnCount );
                        stmt = this.adaptor.getConn().prepareStatement( sql );
                    }
                    else if ( o instanceof ArrayList ) {

                        ArrayList<?> a = (ArrayList<?>) o;

                        /* One counter for ArrayList access, one for JDBC access */
                        for ( int i = 0, j = 1; i < columnCount; i++, j++ ) {

                            try {
                                stmt.setObject( j, a.get( i ), meta.getColumnType( j ) );
                            }
                            catch ( SQLException e ) {
                                /* Sometimes data in a shonky remote system
                                 * is rejected by a more sane destination
                                 * system. Translate this data into
                                 * something that will fit. */
                                if ( e.getMessage().contains( "Only dates between" ) ) {

                                    if ( meta.isNullable( j ) == ResultSetMetaData.columnNullable ) {
                                        this.log( "Casting bad data to null: " + a.get( i ) );
                                        stmt.setObject( j, null, meta.getColumnType( j ) );
                                    }
                                    else {
                                        this.log( "Casting bad data to 0000-01-01: " + a.get( i ) );
                                        stmt.setObject( j, new java.sql.Date( -64376208000L ), meta.getColumnType( j ) );
                                    }
                                }
                                else {
                                    throw e;
                                }
                            }
                        }

                        stmt.execute();

                        this.currentBatchSize++;
                        this.currentRowNumber++;

                        if ( this.currentBatchSize == this.config.getBatchSize() ) {
                            /*
                             * We've reached our non-committed limit. Send the
                             * requests to the destination server.
                             */

                            this.adaptor.getConn().commit();

                            this.printThroughput();
                            this.currentBatchSize = 0;
                        }
                    }
                    else if ( o instanceof QueueFinished ) {
                        if ( this.currentBatchSize > 0 ) {
                            /* Commit outstanding rows from previous table */

                            this.adaptor.getConn().commit();

                            this.printThroughput();

                            this.log();
                            this.log( "completed" );
                        }

                        /* Exit while loop */
                        break;
                    }
                    else {
                        throw new RuntimeException( "Unexpected obeject in queue: " + o.getClass() );
                    }
                }
                catch ( InterruptedException e ) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                catch ( SQLException e ) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            try {
                this.adaptor.close();
            }
            catch ( SQLException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    public static final class QueueFinished {
        /*
         * This only exists as a completely type-safe value in "instanceof"
         * expressions
         */
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:01:43.827

在我为工作而写的一个程序中，我有两个同时连接。在不泄露代码的情况下，您会想要

```
public void initialize() {

    String dbUrl, dbUrl2, dbClass, dbClass2, user, user2, password, password2;
    Connection con, con2;
    Statement stmt, stmt2;
    ResultSet rs, rs2;

    try {
        Class.forName(dbClass);
        con = DriverManager.getConnection(dbUrl,user,password);
        con2 = DriverManager.getConnection(dbUrl2,user2,password2);
        stmt = con.createStatement();
    } catch(ClassNotFoundException e) {
        e.printStackTrace();
    }
    catch(SQLException e) {
        e.printStackTrace();
    }
} 
```

然后，一旦您的两个连接运行，

```
rs = stmt.executeQuery("query");
rs2 = stmt2.executeQuery("second query"); 
```

我不知道如何具体解决您的问题，但此代码可能对您的系统有点负担（假设您没有高端个人/公司机器）并且可能需要一段时间。这至少应该给你足够的入门，如果可以的话，我会发布更多，遗憾的是模拟一个版本有点太复杂了。不过祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:15:05.207

我以前做过，我建议你做我所做的，即从 DB A 获取你需要的数据，并将其写入 1 个或多个文件作为 SQL 'set' 语句。当我这样做时，我不得不分成大约 10 个文件，因为在 DB B 中加载的文件大小受到限制

# objective-c - 使用文本字段添加两个数字

> ID：10094063
> 
> 赞同：0
> 
> 时间：2012-04-10T18:07:06.623
> 
> 标签：objective-c, ios, cocoa, uitextfield, nsnumberformatter

我是目标 c 的新手，所以请帮我解决这个问题...我在界面构建器中使用了三个文本字段 textfield1 输入第一个数字 textfield2 输入第二个数字

我创建了一个名为 sum 的按钮，它将计算总和，而 textfield(ans) 将显示结果

.h 文件代码

```
 {
      IBOutlet UITextfield txtfield1;
      IBOutlet UITextfield txtfield2;
      IBOutlet UITextfield ans;
 }
 -(IBAction)add; 
```

.m 文件代码

```
 -(IBAction)add
  {
      int result=[txtfield1.text intValue]+[txtfield2.text intValue];
      ans.text=[NSString StringWithFormat:@"%d",result];
  } 
```

程序运行良好，但我只想在文本字段中输入整数值，如果我输入字母并单击求和按钮，我得到 0 作为答案，我该怎么做才能让用户在输入字母时出错。 。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:13:22.587

最好的方法是将键盘更改为仅数字，您可以直接从界面生成器中执行此操作，转到 UITextField 属性并在文本字段底部附近您将看到选项键盘，将其更改为：数字软垫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:19:35.300

您必须在控制器中实现 UITextFieldDelegate 方法 [textFieldShouldReturn:]。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    NSDecimalNumber *n = [NSDecimalNumber decimalNumberWithString:textField.text];
    if( [n notANumber] ) {
       // This means the user entered an invalid number;
       return NO;
    }
    return YES; // Do something with the number it is valid.
} 
```

这将完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:11:56.403

创建一个`NSTextFieldCell`子类（或适用于 iOS 的子类；下面的代码对纯 Cocoa 100% 有效），如下所示：

**界面**

```
#import <AppKit/AppKit.h>

@interface decimalCell : NSTextFieldCell

@end 
```

**执行**

```
#import "decimalCell.h"
#import "NumberFormatter.h"

@implementation decimalCell

- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void) awakeFromNib{

    NumberFormatter *formatter = [NumberFormatter withAllowedCharacters:@"0123456789"];
    [self setFormatter:formatter];

}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:51:03.787

`-textField:shouldChangeCharactersInRange:replacementString:`是一个委托方法，让您只允许某些字符出现在文本字段中。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string { 
    NSCharacterSet *nonNumberSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
    return ([string stringByTrimmingCharactersInSet:nonNumberSet].length > 0);
} 
```

这将返回 YES，因此只允许**不在**decimalDigitCharacterSet 字符集中的字符。

# c# - 如何将 C# 对象拆箱为动态类型

> ID：10094067
> 
> 赞同：11
> 
> 时间：2012-04-10T18:07:14.627
> 
> 标签：c#, .net, reflection, casting, dynamictype

我正在尝试做这样的事情：

```
void someMethod(TypeA object) { ... }

void someMethod(TypeB object) { ... }

object getObject()
{
    if (...) return new TypeA();
    else return new TypeB();
}

object obj = getObject();
(obj.GetType()) obj;  // won't compile
someMethod(obj); 
```

显然我在这里很困惑。我知道我可以通过写出一个条件语句来完成这项工作——

```
if (obj.GetType() == typeof(TypeA)) obj = (TypeA)obj;
else if (obj.GetType() == typeof(TypeB)) obj = (TypeB)obj; 
```

——但是在运行时没有办法做到这一点吗？

**编辑** 我同意这似乎不是最好的设计选择，所以这里是上下文。上面代码的重点是 Mongo DB 的 Repository 基类。我希望它能够处理不同类型的表格。所以， someMethod() 实际上是*remove*；和 TypeA 和 TypeB 是*ObjectID*和*Guid*；底部的代码是与类型无关的*remove*方法的一部分，该方法接受 ID 作为字符串；getObject() 是解析 ID 参数的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T18:08:36.930

如果您使用的是 .NET 4 和 C# 4，则可以使用`dynamic`：

```
dynamic obj = GetObject();
SomeMethod(obj); 
```

否则，您将不得不使用反射来查找和调用正确的方法。重载解析（对于非`dynamic`类型）在*编译*时执行。

（请注意，除非`TypeA`和`TypeB`是结构，否则您无论如何都不会*拆箱*......）

# php - 从数据库语言到 PHP

> ID：10094069
> 
> 赞同：-3
> 
> 时间：2012-04-10T18:07:17.013
> 
> 标签：php, database

我需要一些帮助。我的数据库中有这个：

```
SELECT DISTINCT 
    iwi.item Item, ppd.item_des Des, iwi.qty_on_hand QOH, iwi.qty_allocated QA, 
    iwi.qty_on_order QOO, iwi.min_qty Minimum, MAX(ppm.expected_date)Exp_Date
FROM inv_warehouse_items iwi, pur_po_master ppm, pur_po_detail ppd)
WHERE IWI.CO = '100'
AND iwi.item_key = ppd.item_key
AND ppm.po_key = ppd.po_key
AND iwi.warehouse = '01'
AND iwi.item IN ('BXHP335',
'BXHP435',
'BXHP535',
'BXHP644',
'BXHP743',
'BXHP965',
'BXHP10741',
'BXHP10748',
'BXHP1253',
'BXHP1257',
'BXHP121210',
'BXHP151410',
'BXHP16114',
'BXHP181411',
'BXHP241612',
'BX1195',
'BX6636',
'BXHP201512',
'BXHP1949',
'BXHP2015',
'BXHP201515',
'BXHP351011',
'BXHP241814',
'BXHP2257',
'BXHP1824')

GROUP BY iwi.item, iwi.qty_on_hand, iwi.qty_allocated, iwi.qty_on_order, 
     iwi.min_qty, ppd.item_des
ORDER BY iwi.item" 
```

我需要它用 php 打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:09:43.877

可能是这样的

```
$query = "...";
$result = $mysqli_query($db, $query);
while($row = mysqli_fetch_assoc($result)) {
    print_r($row);
} 
```

# c# - 延迟交换服务器中的邮件传递

> ID：10094070
> 
> 赞同：2
> 
> 时间：2012-04-10T18:07:19.227
> 
> 标签：c#, asp.net, exchange-server

我想在交换服务器中创建电子邮件传递延迟（比如 3 分钟）。我尝试使用 settng 传输规则，但找不到延迟的传输规则（操作），我如何创建执行此任务的自定义传输规则。

# php - 清洁条件代码

> ID：10094072
> 
> 赞同：0
> 
> 时间：2012-04-10T18:07:23.533
> 
> 标签：php, conditional, conditional-operator

我有这个变量。

```
$productId = 2; // Testing ID
$value->id; // Contains INT
$value->datePurchaseEnd; // Contains UNIXTIME or NULL 
```

我想做的条件。 `if ($value->id == $productId) return true;`

但如果`$value->datePurchaseEnd;`不是`NULL`那么也将它与当前时间进行比较，它必须大于当前时间才能返回`TRUE`；

现在这是我制作的代码：

```
if( $value->id == $productId){
        if( $value->datePurchaseEnd == NULL ){
            $return = TRUE; break;
        }else{
            if( $value->datePurchaseEnd > mktime() ){
                $return = TRUE; break;
            }
        }
    } 
```

但我觉得这段代码不好。
有什么建议可以用上面的条件编写更好的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:09:02.530

我会说要么

```
if( ($value->id == $productId) && ($value->datePurchaseEnd == NULL || $value->datePurchaseEnd > mktime() )) {
        $return = true;
        break;
} 
```

或者

```
if($value->id == $productId) {
    if($value->datePurchaseEnd == NULL || $value->datePurchaseEnd > mktime()) {
        $return = true;
        break;
    }
} 
```

取决于条件是否需要`else`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:11:08.873

```
if( $value->id == $productId){
    $return = ($value->datePurchaseEnd == NULL || $value->datePurchaseEnd > mktime());
    break;
} 
```

或者

```
 $return = $value->id == $productId && ($value->datePurchaseEnd == NULL || $value->datePurchaseEnd > mktime());
 break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:14:41.790

如果您的代码不在循环中，我更喜欢内联条件：

```
return $value->id == $productId && ($value->datePurchaseEnd == null || $value->datePurchaseEnd > mktime()) 
```

# mysql - 仅使用 2 个模型对象设置 play 2.0 标记？

> ID：10094073
> 
> 赞同：1
> 
> 时间：2012-04-10T18:07:25.513
> 
> 标签：mysql, jpa, playframework-2.0, ebean

好的，所以我想在我的 play 2.0 应用程序中实现标签，

基本上我现在想做的是使用 3 个表格，问题、标签和 Question_Tags。

我应该为每个使用不同的模型对象吗？

或者有什么方法可以设置它，以便我只使用项目和标签模型，并且标签项目是通过播放自动生成的？

例如，我是否可以改为：

```
 @Id
public String tag;
public ArrayList<Question> questions; 
```

让ebean处理映射？似乎这将是一个更好的抽象......

我正在使用 Play 2.0、EBean 和 MySql 数据库、jdbc 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:32:25.010

Ebeans 使用 JPA 注释，因此您可以在问题和标签之间使用标准 JPA **@ManyToMany**注释，Ebeans 将在后台管理所需的表。

# mod-rewrite - mod_rewrite 一个 url 字符串

> ID：10094075
> 
> 赞同：0
> 
> 时间：2012-04-10T18:07:41.837
> 
> 标签：mod-rewrite

有人可以告诉我如何让 mod_rewrite 重命名：

```
our-work-section.php?id=3&title=something
to
our-work-section/something/3 
```

现在我的 .htaccess 在目录**C:\workspace\www\brown**中，我的虚拟主机是为**http://workspace/**设置的，所以我在下面做了一个 RewriteBase。我目前有：

```
RewriteEngine On
RewriteBase /www/brown/
RewriteRule ^/our-work-section/?$    our-work-section.php?id=$1 [NC,L] 
```

我的错误日志什么也没说，页面什么也没做。我试过在这里和那里切换斜线/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:24:20.897

试试这个

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^(our-work-section)/?$ /our-work-section.php?id=$1 [L] 
```

**编辑**

这个会起作用的。我测试了它

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^(our-work-section)/([^/\.]+)/?$ /our-work-section.php?id=$1 [L] 
```

# c++ - C++ 前向声明错误 - 无法绑定左值

> ID：10094076
> 
> 赞同：0
> 
> 时间：2012-04-10T18:07:44.200
> 
> 标签：c++, forward-declaration

我玩了很多不同的前向声明组合，这似乎是最好的。这是唯一一个编译的，直到我取消注释该行

```
e->process( this ); 
```

我从 xcode 收到一个错误，上面写着：

```
non-const lvalue reference to type 'Event::ModemSimV2' cannot bind to a temporary type 'ModemSimV2' 
```

我真的不明白这是什么意思，任何帮助将不胜感激。

谢谢，

资源：

```
#include "ModemSimV2.h"

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Event +++++++++++++++++++++++++++++

Event::Event(){

}

Event::Event( const Event &e ) {
    *this = e;
}

Event::~Event( ) {

}

/*
bool Event::operator > ( const Event & rhs ) const { 
    return time > rhs.time; 
}

bool Event::operator < ( const Event & rhs ) const { 
    return time < rhs.time; 
}

bool Event::operator <= ( const Event & rhs ) const { 
    return time < rhs.time; 
}

bool Event::operator != ( const Event & rhs ) const { 
    return time != rhs.time; 
}
 */

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Dialin +++++++++++++++++++++++++++++

Dialin::Dialin (int name, int tm )
: time( tm ), who( name ) { 
    return;
}

Dialin::Dialin ( const Dialin &d ) {
    *this = d;
}

Dialin::~Dialin( ) {

}

void Dialin::process( ModemSimV2 &m ) {

}

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ EventHeap ++++++++++++++++++++++++++++

EventHeap::EventHeap( ) {

    size = 0;
}

EventHeap::EventHeap( int numVals ) { 

    size = 0;
}

//insert
void EventHeap::push( const Event e ) {

    *array[size] = e;
    reIndex( size );
    size++;
}

//removes the min val   
Event* EventHeap::pop( ) {

    Event *e = array[0];
    array[0] = array[size - 1];
    size--;
    if( !empty( ) )
        buildHeap(0);

    return e;
}

//re do
void EventHeap::buildHeap( int nodeIndex ) {

    int leftChildIndex, rightChildIndex, minIndex;
    Event *tmp;

    leftChildIndex = getLeft(nodeIndex);

    rightChildIndex = getRight(nodeIndex);

    if (rightChildIndex >= size) {

        if (leftChildIndex >= size)

            return;

        else

            minIndex = leftChildIndex;

    } else {

        if (array[leftChildIndex] <= array[rightChildIndex])

            minIndex = leftChildIndex;

        else

            minIndex = rightChildIndex;

    }

    if (array[nodeIndex] > array[minIndex]) {

        tmp = array[minIndex];

        array[minIndex] = array[nodeIndex];

        array[nodeIndex] = tmp;

        buildHeap(minIndex);

    }
}

//re index
void EventHeap::reIndex( int hole ) {

    while( array[hole] != NULL && array[hole] <  array[getParent( hole )] ) {
        int pIndex = getParent( hole );
        Event *temp( array[hole] );
        array[hole] = array[pIndex];
        array[pIndex] = temp;
        hole = pIndex;
    }
}

//is Empty
bool EventHeap::empty() const {
    return ( size == 0 );
}

int EventHeap::getLeft( int index ) const {
    return ( index * 2 ) + 1;
}

int EventHeap::getRight( int index ) const {
    return ( index * 2 ) + 2;
}

int EventHeap::getParent( int index ) const {
    return ( index - 1 ) / 2;
}

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ ModemSimV2 +++++++++++++++++++++++++++

// Constructor for ModemSim.
ModemSimV2::ModemSimV2( int modems, double avgLen, int callIntrvl, EventHeap e )
: freeModems( modems ), avgCallLen( avgLen ),
freqOfCalls( callIntrvl ), r( (int) time( 0 ) )
{
    eventSet = &e;
    nextCall( freqOfCalls );  // Schedule first call
}

// Place a new DIAL_IN event into the event queue.
// Then advance the time when next DIAL_IN event will occur.
// In practice, we would use a random number to set the time.
void ModemSimV2::nextCall( int delta ){
    static int nextCallTime = 0;
    static int userNum = 0;

    Event *e;
    Dialin d = Dialin( userNum++, nextCallTime ); 
    *e = d;
    eventSet->push( *e );
    nextCallTime += delta;
}

// Run the simulation until stopping time occurs.
void ModemSimV2::runSim( int stoppingTime ){
    Event *e;

    while( !eventSet->empty( ) ){
        e = eventSet->pop();
        if ( e->getTime() > stoppingTime )
            break;
        e->process( this );
        nextCall( freqOfCalls );
    }
} 
```

标题：

```
#ifndef MODEM_SIM_V2_H
#define MODEM_SIM_V2_H

#include <queue>
#include <vector>
#include <functional>  // for greater()
#include <climits>     // for INT_MAX
#include <iostream>
#include "random.h"

using namespace std;

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Event +++++++++++++++++++++++++++++

class Event{

protected:
    int who;        // the number of the user
    int time;       // when the event will occur
    int what;       // DIAL_IN or HANGUP
    class ModemSimV2;

public:
    Event( );
    Event( const Event &e );
    virtual ~Event( );

    bool operator > ( const Event & rhs ) const;
    bool operator < ( const Event & rhs ) const;
    bool operator <= ( const Event & rhs ) const;
    bool operator != ( const Event & rhs ) const;

    int getTime( ) { return time; };

    virtual void process( ModemSimV2 &m ) = 0;
};

 class Dialin : public Event{
 public:
     Dialin( int name = 0, int tm = 0 );
     Dialin( const Dialin &d );
     ~Dialin( );

     virtual void process( ModemSimV2 &m );

 private:
     int who;
     int time;
     int what;
 };

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ EventHeap ++++++++++++++++++++++++++++

class EventHeap{

public:
    EventHeap();
    EventHeap( int numIndex );

    bool empty( ) const;
    const int & findMin( ) const;

    void push( const Event x );
    Event * pop();

private:
    int size;         // Number of elements in heap
    vector <Event*> array;            // The heap array

    void buildHeap( int index );
    void reIndex( int hole );
    int getLeft( int index ) const;
    int getRight( int index )const;
    int getParent( int index )const;
};

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ ModemSimV2 +++++++++++++++++++++++++++

class ModemSimV2{

public:
    ModemSimV2( int modems, double avgLen, int callIntrvl, EventHeap e );
    // Add a call to eventSet at the current time,
    // and schedule one for delta in the future.
    void nextCall( int delta );

    // Run the simulation
    void runSim( int stoppingTime );// = INT_MAX );

    friend class Event;

private:
    Random r;                       // A random source
    EventHeap *eventSet;                    // Pending events

    // Basic parameters of the simulation
    int freeModems;                 // Number of modems unused
    const double avgCallLen;        // Length of a call
    const int freqOfCalls;          // Interval between calls
};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:14:33.343

问题是您将前向声明放在标题中的错误位置。该`process`方法认为`ModemSimV2`属于`Event`，因此`Event::ModemSimV2`在错误消息中。从受保护的部分移出`class ModemSimV2;`到班级上方。

```
class ModemSimV2;

class Event
{
    ... 
```

Also`this`是一个指针`ModemSimV2`，您需要在将其传递给`process`.

```
e->process(*this); 
```

# google-maps - 如何在 Google Maps API v3 中设置点数组的中心

> ID：10094085
> 
> 赞同：1
> 
> 时间：2012-04-10T18:08:21.067
> 
> 标签：google-maps

我有一张地图，上面有多个位置。位置是在运行时根据显示的页面确定的（它们是我们经销商的位置，因此它们会根据经销商 ID 而有所不同。（标记显示正常，但现在我想将地图居中，以便缩放以包括所有标记的数量并根据显示的标记居中。我该怎么做？现在，缩放和中心是手动设置的。到目前为止，这是我的代码：

```
<script type="text/javascript">
    function initialize() {
    var locations = [
        <?php 
            $loc = '';
            $i = 1;
            foreach ($coordinates as $c)  {
                $loc .= '["' . $c->company . '", ' . $c->latitude . ', ' . $c->longitude . '], ';
            $i++;
            }
            echo substr($loc, 0, -2); 
        ?>
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
    }

    google.maps.event.addDomListener(window, 'load', initialize);
  </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:19:03.410

创建[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)对象，其中包含所有标记的位置，然后使用[google.maps.Map](https://developers.google.com/maps/documentation/javascript/reference#Map)对象`fitBounds`的方法：

```
var bounds = new google.maps.LatLngBounds();
for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });
  //Extends bounds to contain marker position
  bounds.extend( marker.getPosition() );
  .....
}

map.fitBounds( bounds ); 
```

# ruby-on-rails - pjax 标题不起作用

> ID：10094092
> 
> 赞同：1
> 
> 时间：2012-04-10T18:09:01.423
> 
> 标签：ruby-on-rails, pjax

Pjax 标题在我的 Rails 3.2.3 应用程序中不起作用。其他一切正常。

这是我的 application.html.haml 中的标题标签：

```
%title= content_for?(:title) ? yield(:title) : SITE_NAME 
```

我已经通过在 pjax 加载的部分中渲染它来验证确实存在`content_for(:title)`（如果重新加载整个页面，它可以正常工作）。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:32:44.947

当页面由 pjax 请求时，它会在没有布局的情况下呈现，因此在 application.html.haml 中所做的任何事情都是无关紧要的。

您需要在呈现的 HTML 中包含该标记。Pjax 将从页面中删除它（因为很明显标题标签不属于正文）并使用它来设置页面标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T13:45:09.617

由于[#57](https://github.com/defunkt/jquery-pjax/pull/57) pjax 还在加载的片段中查找数据属性`data-title`，并且应该更新主标题。

这更干净，不会`html`与`title`.`body`

# python - 如何从 DNS 请求中获取访问者的 IP 地址？

> ID：10094099
> 
> 赞同：-2
> 
> 时间：2012-04-10T18:09:28.463
> 
> 标签：python, dns, cdn

我正在运行我自己用 python 开发的 DNS 名称服务器。我有一个注册域名说“abc.in”。域的名称服务器设置为我计算机的 IP 地址（由 ISP 提供）。现在，每当有人访问该域名时，我都会获取访问者的 ISP 的 IP 地址。我想获取访问者的 IP 地址。实际上我想做一个类似 CDN 的小型项目，但我也找不到任何好的信息来源。是否可以获取访问者的 IP 地址，我正在用 Python 开发它？

我在[CloudFlare](http://cloudflare.com)的博客中读到，他们从最初的 DNS 查找中获取访问者的地理信息（IP 地址）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:16:19.253

您可以在 python 中使用套接字函数。跟下面一样。

```
>>> socket.getaddrinfo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:55:25.333

你正在尝试的根本不可能。您将始终从解析器而不是最终客户端获得连接。

# java-me - Displaying a message box or notification bar in java apps?

> ID：10094101
> 
> 赞同：0
> 
> 时间：2012-04-10T18:09:35.963
> 
> 标签：java-me

In my J2ME app, I have some forms, and some threads running on background. If in any of these threads I decide to display a message box or notification bar on top of the app, I have the problem of not knowing in which form I am, therefore I don't know which form to show after the messagebox or notification bar is hidden.

Does anyone have any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:47:17.983

A ticker is an object that provides scrolling text across the top of the display. A Ticker is associated with the display, not with the screen. You place a Ticker on a screen using the Screen.setTicker(Ticker t) method, as shown in the code below.

You can associate the same Ticker object with multiple screens, however. The implementation renders the Ticker on some constant portion of the display, in this case at the top of the display. Ticker is not an Item. Its derivation directly from java.lang.Object gives you a clue as to why a Ticker can be tied to the display and not to a screen. It doesn't need to be derived from Item, because it really is not something that is placed in a Form.

```
import javax.microedition.lcdui.Command; 
import javax.microedition.lcdui.CommandListener; 
import javax.microedition.lcdui.Display; 
import javax.microedition.lcdui.Displayable; 
import javax.microedition.lcdui.Ticker; 
import javax.microedition.lcdui.Form; 
/** 
This class demonstrates use of the Ticker MIDP UI 
component class. 
@see javax.microedition.lcdui.Gauge 
*/ 
public class TickerDemo extends Form 
implements CommandListener 
{ 
private String str = 
"This text keeps scrolling until the demo stops..."; 
private Ticker ticker = new Ticker(str); 
private Command back = new Command("Back", Command.BACK, 1); 
private static Displayable instance; 
/** 
Constructor. 
*/ 
public TickerDemo() 
{ 
super("Ticker demo"); 
instance = this; 
addCommand(back); 
setTicker(ticker); 
setCommandListener(this); 
} 
... 
} 
```

Hope this will help you. Thanks

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:56:22.757

You can get current form that is already displaying with "Display.getCurrent()".For example this canvas is a SplashScreen that get current form before displays in the screen:

```
import javax.microedition.lcdui.Canvas;
/*    */ import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Form;
/*    */ import javax.microedition.lcdui.Graphics;
/*    */ import javax.microedition.lcdui.Image;

public class StaticSplashScreen extends Canvas
        implements Runnable {

    private HelloMIDlet mainMidlet;
    private boolean isSplashOver;
    private long currentTime;
    private long previousTime;
    private Form currentForm;

    public StaticSplashScreen(HelloMIDlet mid) {
        this.mainMidlet = mid;
        currentForm = (Form) this.mainMidlet.getDisplay().getCurrent();
        this.previousTime = System.currentTimeMillis();
        new Thread(this).start();
    }

    protected void paint(Graphics g) {
        g.setColor(255, 255, 255);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(0, 0, 0);
        g.drawString("In the name of God", 40, 70, 0);
    }

    public void run() {
        while (!this.isSplashOver) {
            this.currentTime = System.currentTimeMillis();

            if (this.currentTime - this.previousTime >= 10000L) {
                this.isSplashOver = true;
            }
        }
        this.mainMidlet.getDisplay().setCurrent(currentForm);
    }
} 
```

In this midlet you can see two forms with some commands.When you press "help" in each form,**method()** calls and SplashScreen diplays and after 10 seconds you can see the form that launched it again:

```
public class HelloMIDlet extends MIDlet implements CommandListener {

...

public void commandAction (Command command, Displayable displayable) {
    ...
if (command == helpCommand) {
method ();
}
    ...
}

public Form getForm () {
if (form == null) {
form = new Form ("Welcome");
form.addCommand (getHelpCommand());
form.setCommandListener (this);
}
return form;
}

public void method () {

if (true) {
    StaticSplashScreen sss = new StaticSplashScreen(this);
    this.getDisplay().setCurrent(sss);
} else {
}
}

public Form getForm1 () {
if (form1 == null) {
form1 = new Form ("form1");
form1.addCommand (getHelpCommand ());
form1.setCommandListener (this);
}
return form1;
}

} 
```

# php - 如何使用谷歌翻译获得所有语言中单词的含义？

> ID：10094106
> 
> 赞同：1
> 
> 时间：2012-04-10T18:09:54.280
> 
> 标签：php, google-translate

如何使用谷歌翻译获得以英语表示的所有语言的单词的含义？例如，如果输入是 Lion(English)，那么输出应该是，

```
leon(Spanish)
lion(French)
singam(Tamil)
simhah(Hindi) 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:27:30.990

使用[此处](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/translate/simple.php)的示例：

```
<?php
require_once '../../src/apiClient.php';
require_once '../../src/contrib/apiTranslateService.php';

$client = new apiClient();
$client->setApplicationName('Google Translate PHP Starter Application');

// Visit https://code.google.com/apis/console?api=translate to generate your
// client id, client secret, and to register your redirect uri.
// $client->setDeveloperKey('insert_your_developer_key');
$service = new apiTranslateService($client);

$langs = $service->languages->listLanguages();
print "<h1>Languages</h1><pre>" . print_r($langs, true) . "</pre>";

$translations = $service->translations->listTranslations('Hello', 'hi');
print "<h1>Translations</h1><pre>" . print_r($translations, true) . "</pre>"; 
```

`listTranslations`为您提供所需的信息。

我还建议阅读文档，因为它很简短：[code.google.com/apis/language/translate/v2/using_rest.html](http://code.google.com/apis/language/translate/v2/using_rest.html)

# servlets - 如何使用锚标记通过 http 请求发送参数

> ID：10094119
> 
> 赞同：0
> 
> 时间：2012-04-10T18:10:35.287
> 
> 标签：servlets, anchor, httprequest, http-request-parameters

我想使用`<a>`标签通过 http 发送参数值，但我不希望在`href`属性中设置它。

有没有办法做到这一点，以便我可以在服务器端接收该值？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:42:11.187

*要么*使用 JS 提交（隐藏）表单。

```
<form id="foo" method="post" action="servletURL">
    <input type="hidden" name="yourParamName" value="yourParamValue" />
</form>
<a href="#" onclick="document.getElementById('foo').submit(); return false;">link</a> 
```

*或者*使用 CSS 来设置默认提交按钮的样式，使其看起来像一个链接。

```
<form id="foo" method="post" action="servletURL">
    <input type="hidden" name="yourParamName" value="yourParamValue" />
    <input type="submit" value="link" class="link" />
</form> 
```

和

```
input[type=submit].link {
    margin: 0;
    border: 0;
    background: transparent;
    color: blue;
    text-decoration: underline;
    cursor: pointer;
    overflow: visible;
} 
```

# mysql - 使用 mySQL JOIN CASE 选择“朋友”

> ID：10094120
> 
> 赞同：1
> 
> 时间：2012-04-10T18:10:43.303
> 
> 标签：mysql, join, case

在这里，我发布了一个关于根据行中列的值进行 JOIN 的问题。您将需要创建一个添加好友功能，在其中将相互添加的 2 个用户的 ID 写入`user_1_id`(my id) 和 `user_2_id`(friend id)。当您想查看与谁成为朋友时，请选择取决于当前用户（正在浏览的用户）的 ID是否`user_1_id`或有`user_2_id`

我想通了，下面是您想要使用的查询，以防您需要这样做。

这是查询

```
$sql_inp = 'SELECT DISTINCT
                 users.id, users.first_name, users.last_name,
    CASE 
                 WHEN friends.user_2_id="'.$_SESSION[USER][id].'" //equal to current user id
                 THEN (SELECT friends.user_1_id FROM friends WHERE friends.user_2_id="'.$_SESSION[USER][id].'") // if user_2_id is My id, then fetch the other row
         ELSE friends.user_2_id // obviously the opposite
    END  
    FROM users
    LEFT JOIN friends ON users.id=    // this case is completely the same as one above
    CASE 
                 WHEN friends.user_2_id="'.$_SESSION[USER][id].'" THEN (SELECT friends.user_1_id FROM friends WHERE friends.user_2_id="'.$_SESSION[USER][id].'") 
    ELSE friends.user_2_id 
        END 
    WHERE  friends.user_1_id="'.$_SESSION[USER][id].'" OR  friends.user_2_id="'.$_SESSION[USER][id].'" // fetch the row where the either one of the values is equal to My id 
  '; 
```

如果有人遇到问题，希望这会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:19:20.010

就个人而言，我讨厌使用 CASE 语句。它使查询看起来很混乱。尝试使用[IF 函数](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)

```
$sql_inp = 'SELECT
    table1.val1,table1.val2,
            table2.val1,table2.val2,
            IF(table3.val1="'.$user_id.'",table3.val1,
            IF(table3.val2 ="'.$user_id.'",table3.val2,
            IFNULL(table3.val2,-1))) users_fetch
    FROM table1
    INNER JOIN table2 ON table2.val1=table1.val1
    LEFT JOIN table3 ON table2.val1=users_fetch'; 
```

在此查询中，如果 table3.val1 和 table3.val2 <> $user_id，则 users_fetch 为 -1。

试试看 ！！！

# java - 从 XMLSchema 数据类型转换为 Java int

> ID：10094126
> 
> 赞同：1
> 
> 时间：2012-04-10T18:11:22.267
> 
> 标签：java, sparql, jena, dbpedia

我正在从事一个涉及从 Dbpedia 获取数据的项目，我想知道是否有办法将从 dbpedia 查询返回的对象（即 XMLSchema#double）转换为 java int，以便我可以对其执行操作并修改供我使用的数据。我正在使用 jena 从 jena 提供的 sparql 端点获取数据。我尝试使用 toString 方法将 RDFnode 更改为字符串，而不是转换为 int/double，但这似乎不起作用，并给了我下面列出的异常：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "147181000000^^http://www.w3.org/2001/XMLSchema#double"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) 
```

这里有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:04:26.827

转换为字符串后，它看起来像：“147181000000^^http://www.w3.org/2001/XMLSchema#double”

并且您想转换为 int/double ，因为您必须将此字符串中的第一个数字 Number= 147181000000 分开。您可以使用 indexOf 或 split 方法从 String 中获取 Number。

示例代码：

```
 String number = "147181000000^^http://www.w3.org/2001/XMLSchema#double";
    number = number.subString(0,nuber.indexOf(^));
    int num = Integer.ParseInt(number); 
```

# git - 我可以使用 git-svn 克隆远程 SVN 存储库的特定分支并提交回它吗？

> ID：10094128
> 
> 赞同：4
> 
> 时间：2012-04-10T18:11:25.167
> 
> 标签：git, svn, branch, git-svn

我有一个非常大的代码库，在远程 SVN 服务器上有许多标签和分支。

我想使用 git 克隆一个特定的分支来处理，然后最终将它合并回远程 SVN。这可能吗？我见过的大多数文档都没有直接说这是支持的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T23:51:12.927

是的，这很好用。你可以做`git svn clone https://svn.example.com/project/branches/somebranch/`然后正常使用 git-svn （即`git svn rebase`拉和`git svn dcommit`推。）

# sql - 如何为查询编写 T-SQL 代码

> ID：10094130
> 
> 赞同：1
> 
> 时间：2012-04-10T18:11:32.843
> 
> 标签：sql, sql-server, tsql

我需要使用 t-sql 来查询两个表。第一个表是书籍。第二个表是作者。对于每个 Book 记录，可能有多个子 Author 记录。我想编写一个查询，它只返回为当前 Book 记录找到的第一个 Author 记录。表中有数十万条记录，因此我需要高效的查询。

```
select a.FirstName, a.LastName, b.BookName
from Books b
left join 
(
    select TOP 1 t.BookID, t.FirstName, t.LastName 
    from Authors t
) a 
    on a.BookID = b.BookID
where b.BookClassification = 2 
```

这个查询是不对的。我只想选择与 BookID 匹配的 Authors 中的前 1 条记录。我怎样才能得到我正在寻找的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:21:12.623

你很接近：

```
select a.FirstName, a.LastName, b.BookName
from Books b
outer apply 
(
    select TOP 1 t.BookID, t.FirstName, t.LastName 
    from Authors t
    WHERE t.BookID = b.BookID
    -- uncomment the next line to control which author to prefer
    -- ORDER BY t.<someColumn>...
) a 
where b.BookClassification = 2 
```

虽然在我看来，Authors 会是 Books 的孩子，这似乎很奇怪...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:43:34.787

看看这是否更有效率。通过查找 min(authorID) 一次，您可能会获得更好的性能。

```
select author.FirstName, author.LastName, author.BookName    
from Books with (nolock) 
join 
(   select min(authorID) as authorID, bookID 
    from Authors with (nolock) 
    group by bookID 
)   as Author1
  on Author1.authorID = Books.authorID 
join Authors with (no lock) 
 on  Authors.authorID = Author1.authorID 
 and Authors.bookID = Author1.bookID
where Books.BookClassification = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:10:55.473

本着 TIMTOWDI 的精神。

您可以使用[CTE](http://msdn.microsoft.com/en-us/library/ms190766.aspx)，这是一个花哨的子查询，但如果子查询多次使用会很有帮助。还有一个[等级函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)，row_number()。

```
with bookAuthors as ( 
  select a.FirstName, a.LastName, b.BookName, BookClassification, 
    row_number() over(partition by b.BookName order by a.lastName ) as rank
  from Books b
  left join Authors a
    on a.BookID = b.BookID

)

select a.FirstName, a.LastName, b.BookName
from bookAuthors 
where rank = 1
  and BookClassification = 2 
```

# android - 活动并行生命周期

> ID：10094131
> 
> 赞同：10
> 
> 时间：2012-04-10T18:11:40.030
> 
> 标签：android, android-activity, lifecycle

想象一下，我有一个活动 A，我正在从该活动开始一个新的活动 B。

**并排**的活动生命周期是什么？

 **```
 1\. A: onCreate 
 2\. A: onStart 
 3\. A: onResume 
```

在 A => startActivity(B)

```
 4\. B: onCreate
 5\. B: onStart

 6\. A: onPause

 7\. B: onResume

 8\. A: onStop 
```

它是否正确？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T18:18:59.837

几乎正确，只是细微的差别。首先 A.onPause() 然后 B.onCreate()... 等等

```
A: onCreate
A: onStart
A: onResume 
```

在 A => startActivity(B)

```
A: onPause
B: onCreate
B: onStart
B: onResume
A: onStop 
```

检查此链接以获取完整的详细信息

[http://developer.android.com/guide/topics/fundamentals/activities.html#CoordinatingActivities](http://developer.android.com/guide/topics/fundamentals/activities.html#CoordinatingActivities)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:01:33.123

开发者网站上有一个漂亮的应用程序，它显示了活动的生命周期，请看一下。你可以在[这里](http://developer.android.com/shareables/training/ActivityLifecycle.zip)下载应用程序的源代码。认为它可能会帮助某人:)。**

# c - sizeof char ** 指针是否依赖于机器的架构？

> ID：10094137
> 
> 赞同：2
> 
> 时间：2012-04-10T18:12:02.337
> 
> 标签：c, pointers, sizeof

当我执行以下代码时：

```
int main()
{
    char **temp;
    printf("Size of **temp %d", sizeof(**temp));
    printf("Size of *temp %d", sizeof(*temp));
    printf("Size of temp %d", sizeof(temp));
    return 0;
} 
```

我得到：

```
Size of **temp 1
Size of *temp 8
Size of temp 8 
```

我不明白的是`char`指针的大小如何`8`？它是独立于机器的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:13:14.497

> sizeof char ** 指针是否依赖于机器的架构

它不仅依赖于机器，还依赖于编译器。您始终可以依赖的唯一尺寸是`sizeof(char) == 1`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T18:14:20.743

在最初的问题中，您没有打电话给`sizeof`.
[黄昏](https://stackoverflow.com/users/149341/duskwuff)为你解决了这个问题。

**产生的输出是：**

```
Size of **temp 1
Size of  *temp 8
Size of   temp 8 
```

**原因：**

在 64 位架构上，指针是 8 字节（不管它们指向什么）

```
 **temp is of type char ==> 1 byte
  *temp is of type pointer-to-char ==> 8 bytes
   temp is of type pointer-to-pointer-to-char ==> 8 bytes 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-15T21:08:18.233

如果您在 64 位机器上运行 MS Visual Studio，您可以将解决方案平台从 win32 更改为 x64，以使用此代码查看指针的大小从 4 字节增长到 8 字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:26:37.220

指针的大小取决于机器。

> 我不明白的是 char 指针的大小如何为 8

在您的系统上，一个 char 指针，即一个`char*`变量的大小确实为 8。在你的代码`sizeof(*temp)`中给出了一个 char 指针的大小，它是 8。原因`sizeof(**temp)`是 1 就是它，`**temp`并且`char`根据`sizeof(char)`定义是 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T20:24:29.093

sizeof 运算符由编译器在编译时解析。在运行时不会发生实际的尊重。运算符的大小返回的是类型的大小。所以

```
sizeof(*(char *)0) is 1 
```

如果目标平台有 64 位指针，则 sizeof(temp) 将为 8。如果目标平台有 128 位指针，则 sizeof(temp) 将为 16。

“目标”并不意味着它是您编译的平台，因为您可以交叉编译。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-18T05:09:48.590

指针的大小取决于您的机器（检查您的机器类型）。如果您的机器是 64 位，则指针大小为 8 个字节，而 32 位机器指针大小为 4 个字节。

无论指针变量指向的指针的类型如何，指针大小都是相同的。指针类型对指针运算更有用，使用 sizeof 运算符时不要与它的大小混淆

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-09T16:01:03.843

```
Size of **temp 1
Size of *temp 8
Size of temp 8 
```

它显示了正确的答案。为什么？

```
Because
Size of **temp 1--->> pointing to char.
Size of *temp 8----->>pointing pointer to char.
Size of temp 8---->>>>pointing pointer to pointer to char. 
```

并且您使用的是 64 位编译器，如果您将在 32 位编译器上运行此代码，它将为您提供

```
Size of **temp 1
Size of *temp 4
Size of temp 4 
```

# ruby-on-rails-3 - Rails 3 中每个用户一个会话，有 Thoughtbot Clearance？

> ID：10094139
> 
> 赞同：0
> 
> 时间：2012-04-10T18:12:12.797
> 
> 标签：ruby-on-rails-3, authentication, clearance

有没有既定的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:49:37.417

您是否在问如何使 Clearance 工作以使用户一次只能在一台机器上登录？（即在特定机器上登录的用户在他们登录的其他任何地方结束他们的会话？）

如果是这样，[这就是你的答案（清仓维基）](https://github.com/thoughtbot/clearance/wiki/concurrent-sign-in)

如果没有，你能澄清你的问题吗？

# bash - 直接传参数给pbs脚本

> ID：10094141
> 
> 赞同：12
> 
> 时间：2012-04-10T18:12:14.450
> 
> 标签：bash, unix, pbs, qsub

有没有办法在提交作业之前直接将参数传递给 .pbs 脚本？我需要遍历由不同数字表示的文件列表并应用脚本来分析每个文件。

我能想到的最好的方法如下：

```
#!/bin/sh 

for ((i= 1; i<= 10; i++))
do
        export FILENUM=$i
        qsub pass_test.pbs
done 
```

其中 pass_test.pbs 是以下脚本：

```
#!/bin/sh

#PBS -V
#PBS -S /bin/sh
#PBS -N pass_test
#PBS -l nodes=1:ppn=1,walltime=00:02:00
#PBS -M XXXXXX@XXX.edu

cd /scratch/XXXXXX/pass_test

./run_test $FILENUM 
```

但这感觉有点不靠谱。特别是，我想避免必须创建一个环境变量来处理这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T18:40:35.577

该`qsub`实用程序可以从标准输入读取脚本，因此通过使用此处的文档，您可以*动态*创建脚本：

```
#!/bin/sh

for i in `seq 1 10`
do
    cat <<EOS | qsub -
#!/bin/sh

#PBS -V
#PBS -S /bin/sh
#PBS -N pass_test
#PBS -l nodes=1:ppn=1,walltime=00:02:00
#PBS -M XXXXXX@XXX.edu

cd /scratch/XXXXXX/pass_test

./run_test $i
EOS
done 
```

就个人而言，我会使用更紧凑的版本：

```
#!/bin/sh

for i in `seq 1 10`
do
    cat <<EOS | qsub -V -S /bin/sh -N pass_test -l nodes=1:ppn=1,walltime=00:02:00 -M XXXXXX@XXX.edu -
cd /scratch/XXXXXX/pass_test
./run_test $i
EOS
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-24T23:17:26.470

You can use the `-F` option, as described [here](http://docs.adaptivecomputing.com/torque/3-0-5/commands/qsub.php#F):

> -F
> 
> Specifies the arguments that will be passed to the job script when the script is launched. The accepted syntax is:
> 
> ```
> qsub -F "myarg1 myarg2 myarg3=myarg3value" myscript2.sh 
> ```
> 
> Note: Quotation marks are required. qsub will fail with an error message if the argument following -F is not a quoted value. The pbs_mom server will pass the quoted value as arguments to the job script when it launches the script.

See also [this answer](https://stackoverflow.com/a/46328955/1667423)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T18:22:32.300

If you just need to pass numbers and run a list of jobs with the same command except the input file number, it's better to use a job array instead of a for loop as job array would have less burden on the job scheduler.

To run, you specify the file number with PBS_ARRAYID like this in the pbs file:

```
./run_test ${PBS_ARRAYID} 
```

And to invoke it, on command line, type:

```
qsub -t 1-10 pass_test.pbs 
```

where you can specify what array id to use after `-t` option

# css - 动态内容的绝对位置

> ID：10094143
> 
> 赞同：0
> 
> 时间：2012-04-10T18:12:27.930
> 
> 标签：css, dynamic-data, css-position

我有动态评论列表框。在每个评论框中，我需要在角落的顶部显示徽章图标。我使用具有绝对位置的 css 设置此图标。但实际上我看不到每个盒子的徽章图标。例如：如果结果`10 comments`和 php 打印`10 div`，我看到 1 个徽章，因为 10 个徽章图标重叠。这个问题是因为：我在css中设置`top`并`right`看到在一行中显示所有徽章图标（10）。有什么方法可以在动态内容中显示绝对位置？谢谢

网页：

```
<div class="commentbox">
<div class="badge"></div>
<!-- ...... comment description1 -->
</div> 

<div class="commentbox">
<div class="badge"></div>
<!-- ...... comment description2 -->
</div>
<div class="commentbox">
<div class="badge"></div>
<!-- ...... comment description3 -->
</div>
<div class="commentbox">
<div class="badge"></div>
<!-- ...... comment description4 -->
</div> 
```

CSS：

```
.badge{position:absolute; background:url(../images/sprite.png) -146px -355px no-repeat; width:30px;height:60px;right:254px; top:124px;}

NOTE : My Comment box Is dynamic generated. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:15:31.767

```
.commentbox{
    position: relative;
} 
```

绝对定位的项目将相对于最近的父容器相对或绝对定位（或者我想也是固定的）。

# wpf - 如何将旋转的 TextBlock 锚定到顶部？

> ID：10094145
> 
> 赞同：2
> 
> 时间：2012-04-10T18:12:34.590
> 
> 标签：wpf, xaml

使用以下代码，文本 ABCDE 从网格顶部开始，并将字母放在网格之外。

我怎样才能使文本保持在网格内并且最后一个字母在网格的顶部结束？

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="300" Width="300">
    <Grid>
        <TextBlock Text="ABCDE"  >
                <TextBlock.RenderTransform>
                    <RotateTransform Angle="-90" />
                </TextBlock.RenderTransform>
        </TextBlock>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:14:07.563

使用 a`LayoutTransform`而不是 a`RenderTransform`

`LayoutTransform`在布局过程中应用，而不是渲染过程

```
<TextBlock Text="ABCDE"  >
    <TextBlock.LayoutTransform>
        <RotateTransform Angle="-90" />
    </TextBlock.LayoutTransform>
</TextBlock> 
```

# extjs - 方法 getEl() 不起作用

> ID：10094148
> 
> 赞同：0
> 
> 时间：2012-04-10T18:12:54.773
> 
> 标签：extjs

有人能告诉我为什么“getEl()”方法在我的代码中不起作用吗？

**通知容器：**

```
Ext.define('common.NotificationContainer', {
    extend: 'Ext.container.Container',
    alias: 'widget.NotificationContainer',
    border: true,
    layout: {
        type:'fit'
    },
    style: {
        zIndex: '999999'
    },
    defaultType: 'container',
    items: [{
        cls: 'notification-box',
        border: true,
        width: 500,
        items:[{
            html: ''
        },{
            layout: {
                type: 'vbox',
                align: 'center'
            },
            items: [{
                xtype: 'button',
                text: 'OK',
                minWidth: 75,
                margin: '10 0 0 0',
                handler: function() {
                    this.up().up().up().getEl().slideOut('t', { duration: 1000 });
                }
            }]
        }]
    }]
}); 
```

**功能：**

```
var con_notification = Ext.create('common.NotificationContainer');
var con_notification_box = con_notification.child();

con_notification_box.addCls(cls);
if (server_response == undefined) {
    con_notification_box.items.items[0].update('<p><span class="custom-msg">' + custom_msg + '</span></p>');
} else {
    con_notification_box.items.items[0].update('<p><span class="custom-msg"> ' + custom_msg + '</span><br /><br /><span class="server-response">Server Response:</span>' + server_response + '</p>')
}

con_notification.add(con_notification_box);
con_notification.getEl().slideIn('t', {
    easing: 'easeOut',
    duration: 1000
}); 
```

非常感谢您的支持！

亲切的问候，嘘

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T19:42:40.113

从这样的小代码中检查错误非常困难，但有一个事实是，`getEl()`只有在渲染组件时才返回有效元素。

希望能帮助到你。

# fastcgi - 支持 FastCGI 过滤器的 Web 服务器

> ID：10094154
> 
> 赞同：4
> 
> 时间：2012-04-10T18:13:25.817
> 
> 标签：fastcgi

我正在用[C 编写一个 FastCGI 有线协议实现](https://github.com/AndreLouisCaron/cfcgi)（还导出了一个用于编写应用程序服务器的更高级别的 C++ 接口），并且我已经完成了足够多的工作来执行更彻底的测试。

我最近完成了一个完整的实现 HTTP 基本身份验证的 FastCGI 授权器，我正在针对其他 FastCGI 实现对其进行测试，以验证它是否按照[规范](http://www.fastcgi.com/devkit/doc/fcgi-spec.html)工作。但是，似乎大多数网关（Web 服务器）只支持“响应者”角色，极少数支持“授权者”角色，我还没有找到支持“过滤器”角色的网关。

我正在测试针对 NGINX 的“响应者”角色和针对[LigHTTPd](http://www.lighttpd.net/)[的](http://nginx.org/)“授权者”角色。到目前为止，我已经验证 NGINX、LigHTTPd 和[Apache](http://httpd.apache.org/)都不支持“过滤器”角色。 [Cherokee](http://www.cherokee-project.com/)和[IIS](http://www.iis.net/)似乎不支持设置角色，所以我假设它们只支持“响应者”角色。

有谁知道支持 FastCGI“过滤器”角色的 Web 服务器，或者它是从未实现过的规范的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:17:46.797

[Oracle iPlanet Web Server 7.0.9](http://docs.oracle.com/cd/E19146-01/821-1828/gfsum/index.html)提到了这一点：

```
<Object name=<"filter.fcgi">
  Service
    fn="filter-fastcgi"
    app-path="/fastcgi/apps/filter/SimpleFilter.exe" 
    bind-path="localhost:3434"
    app-env="LD_LIBRARY_PATH=/fastcgi/fcgi-2.4/libfcgi/.libs"
</Object> 
```

这清楚地提到`filter`了多次，所以这听起来像它会支持它。

# ruby-on-rails - 找不到 RubyGem 耙子

> ID：10094156
> 
> 赞同：1
> 
> 时间：2012-04-10T18:13:35.573
> 
> 标签：ruby-on-rails, capistrano

```
sh -c 'cd /home/xyz/xyz.com/releases/20120410180718 &&
/home/xyz/.gems/bin/rake RAILS_ENV=production RAILS_GROUPS=assets
assets:precompile' [out ::] /usr/lib/ruby/1.8/rubygems.rb:779:in
`report_activate_error' [out ::] : Could not find RubyGem rake (>= 0)
(Gem::LoadError [out ::] ) [out ::] from
/usr/lib/ruby/1.8/rubygems.rb:214:in `activate' [out ::] from
/usr/lib/ruby/1.8/rubygems.rb:1082:in `gem' [out ::] from
/home//.gems/bin/rake:18 
```

我正在使用**cap deploy:migrations**命令，请帮忙。

这是我的 Gemfile

```
source 'https://rubygems.org'

gem 'rails'
gem "mysql2", "~> 0.3.11"
gem "rake"
# Gems used only for assets and not required
# in production environments by default.
group :assets do
   gem 'compass-rails'
   gem 'sass-rails',   '~> 3.2.3'
   gem 'haml'
   gem 'haml-rails'
   gem 'coffee-rails', '~> 3.2.1'
   gem 'uglifier', '>= 1.0.3'
end

#Media managment
gem 'carrierwave'
gem 'ruby_parser'
gem 'hpricot'

# deployment 
gem 'capistrano' 
```

在服务器端

```
[ps89405]$ rake --version
rake, version 0.9.2.2 
```

更新：

从服务器运行没有上限的相同命令有效！

```
[ps89405]$ cd /home//.com/releases/20120410183344 &&    /home//.gems/bin/rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile
[ps89405]$ 
```

更新：我添加了要求“捆绑器/capistrano”

到我的 deploy.rb

现在我有这个问题

用这个命令

> ```
>  cd /home/.com/releases/20120410201511 && bundle install --gemfile 
> ```
> 
> /home/.com/releases/20120410201511/Gemfile --path /home/.com/shared/bundle --deployment --quiet --无需开发测试

如果我使用**cap**命令，我会得到

```
bundle: command not found 
```

当我在服务器上手动运行它时它工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:57:04.860

您`bundle install`在部署目标上完成了吗？该错误似乎暗示您的捆绑包未安装。

`Could not find RubyGem rake (>= 0)`表示`rake`镜头在未安装 gem 的上下文中运行。

# ruby-on-rails - JQuery Mobile 无法保持会话

> ID：10094159
> 
> 赞同：1
> 
> 时间：2012-04-10T18:14:08.250
> 
> 标签：ruby-on-rails, jquery-mobile

我在 Rails 3.1 应用程序中启动并运行了 Authlogic。一切运行正常。

当我使用 jQuery Mobile 尝试“移动”应用程序时，应用程序无法“保持”会话。这意味着在登录时，应用程序会前进到正确的屏幕，但用户没有登录。因此，无法访问后续屏幕。此外，“登录后”网址显示：

```
http://localhost:3000/user_sessions 
```

它应该是

```
http://localhost:3000/mobiles 
```

（我正在使用“mobiles”控制器给我一个 /mobiles 视图，我在其中放置了所有 jQuery Mobile 嵌套页面。）

我已将其范围缩小到 jQuery 脚本。如果我将它包含在布局中，则无法保存会话。如果我将其注释掉，会话将被保存并且一切正常，但我会丢失登录表单上的 jQuery Mobile 格式/样式。

这是脚本：

```
<script src="http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.js"></script> 
```

有人也有这个问题吗？

# javascript - Mongoose.js：使用空 ObjectId 保存

> ID：10094161
> 
> 赞同：6
> 
> 时间：2012-04-10T18:14:16.910
> 
> 标签：javascript, node.js, mongoose

如何使用空的 ObjectId 保存。我想创建一个项目，这还没有附加到任何用户。所以所有者必须是一个空的 ObjectId。

这该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T20:41:21.640

如果您将所有者设为必填字段，则必须设置一个值，否则您可能会在保存时将其保留为空/未定义。

# android - 从数据库中删除，不成功

> ID：10094164
> 
> 赞同：2
> 
> 时间：2012-04-10T18:14:25.340
> 
> 标签：android

我试图从数据库中删除一个条目不成功。这是我的代码来显示我在做什么。我创建了一个`ContextMenu`，它会打开一个名为“删除”的新菜单，但是当我单击此删除时，它不会删除所选项目。它只是没有做任何事情。

主.java：

```
import java.util.List;
import java.util.Random;

import android.app.ListActivity;
import android.os.Bundle;
import android.text.Editable;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuInflater;
import android.view.View;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.view.MenuItem;

public class Announce extends ListActivity{
    private CommentsDataSource datasource;
    EditText edit;      

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.announce);

        datasource = new CommentsDataSource(this);
        datasource.open();      

        List<Comment> values = datasource.getAllComments();

        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
        registerForContextMenu(getListView());
    }

    public void onClick(View view) {
        @SuppressWarnings("unchecked")
        ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
        Comment comment = null;
        switch (view.getId()) {
        case R.id.add:  
            edit = (EditText)findViewById(R.id.editTxt);            
            Editable txt=(Editable)edit.getText();
            String insert = txt.toString();         
            comment = datasource.createComment(insert);
            adapter.add(comment);
            edit.setText("");
            break;      
        }
        adapter.notifyDataSetChanged();
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo){
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item){
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();          
        if(item.getTitle() == "Delete") {
            datasource.deleteCommentById(info.id);          
            return true;
        }
        return super.onContextItemSelected(item);
    }

    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

} 
```

这是我的 SQLHelper，我要求删除它。

```
import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class CommentsDataSource {

    // Database fields
    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
            MySQLiteHelper.COLUMN_COMMENT };

    public CommentsDataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public Comment createComment(String comment) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_COMMENT, comment);
        long insertId = database.insert(MySQLiteHelper.TABLE_COMMENTS, null,
                values);
        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
        cursor.moveToFirst();
        Comment newComment = cursorToComment(cursor);
        cursor.close();
        return newComment;
    }

    public void deleteComment(Comment comment) {
        long id = comment.getId();
        System.out.println("Comment deleted with id: " + id);
        database.delete(MySQLiteHelper.TABLE_COMMENTS, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
    }

    public void deleteCommentById(long id) {
        System.out.println("Comment deleted with id: " + id);
        database.delete(MySQLiteHelper.TABLE_COMMENTS, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
    }

    public List<Comment> getAllComments() {
        List<Comment> comments = new ArrayList<Comment>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Comment comment = cursorToComment(cursor);
            comments.add(comment);
            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return comments;
    }

    private Comment cursorToComment(Cursor cursor) {
        Comment comment = new Comment();
        comment.setId(cursor.getLong(0));
        comment.setComment(cursor.getString(1));
        return comment;
    }
} 
```

我究竟做错了什么？它只是不会删除我选择的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:24:20.553

尝试改变

```
if(item.getTitle() == "Delete") { 
```

到

```
if(item.getTitle().equals("Delete")) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:30:10.363

我认为你应该这样称呼

```
 adapter.notifyDataSetChanged(); 
```

在这部分代码之后..

```
 datasource.deleteCommentById(info.id); 
```

# android - Android 多屏限定符定义

> ID：10094174
> 
> 赞同：5
> 
> 时间：2012-04-10T18:14:55.690
> 
> 标签：android, size, screen, qualifiers

我想创建一个与大量设备和屏幕兼容的布局。正如我一直在研究的那样，我发现最常见的屏幕分辨率是 249x320、480x800、600x1024、720x1280（以及与这些成比例的其他一些屏幕）。

好吧，在阅读了文档后，我发现有两种方法可以做到这一点。在 3.2 Android 版本之前，我可以对布局使用限定符，例如“small、normal、large、xlarge”，并将它们与“port”（纵向）或“land”（横向）结合使用。

现在，第二种方式（这似乎是最推荐的）仅适用于 Android 3.2 及更高版本。无论屏幕方向如何 (???)，您都必须指定必须使用布局的最小宽度。

由于使用第二种方法时无法指定端口或土地限定符，我更喜欢第一种。我的问题是：第一种方法与Android 3.2 及更高版本兼容吗？我必须对 Android < 3.2 使用第一种方法，对 Android > 3.2 使用第二种方法吗？如果是这样，我应该创建两个项目，或者将这两种方法结合起来（创建大约 10 个布局尺寸，用于一般尺寸限定符和特定最小宽度限定符）。我想这需要更多的资源。

感谢和抱歉我的语言不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:39:00.523

在 Android 中，您不会根据像素来设计布局……而是根据与密度无关的像素（dip 或 dp）来设计布局。这些是按设备每英寸屏幕密度的点数缩放的设备像素。Android 有 4 个通用屏幕密度桶，您必须在适当的文件夹（res/drawable-ldpi、res/drawable-mdpi、res/drawable-hdpi、res/drawable-xhdpi）下为每个提供可绘制对象。

使您的布局与多种设备兼容的其他方法是使用 9png 可拉伸图形，并使用依赖 dp 尺寸的 XML 可绘制对象。

Android屏幕支持推荐阅读：http:
[//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

至于最小宽度限定符，您错过了以 dp 而不是像素为单位指定最小宽度的事实。检查本节中的表 2：http:
[//developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

第一种方法适用于所有设备，包括 Android 3.2+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T03:40:30.277

可能是最好的方法是使用两个布局限定符：-

1.  资源\布局-大
2.  资源\布局-sw720dp

[使用布局别名](http://developer.android.com/training/multiscreen/screensizes.html)在两个目录中设置相同的布局。

# c++ - 卡尔曼，最小二乘，或

> ID：10094180
> 
> 赞同：0
> 
> 时间：2012-04-10T18:15:29.630
> 
> 标签：c++, gps, least-squares, kalman-filter

为了帮助人们理解我的问题是我在问什么，我选择完全改写它。我希望这能解决问题。

我正在以 1 秒的速度收集 GPS 数据（纬度/经度）。了解这些数据可能不是 100% 准确，并且偶尔有一个（1 个或多个）数据点偏离标准，为了确定相当准确的路线，去除异常点的最合适方法是什么？车辆的速度？这辆车可以以每小时 0-60 英里的速度行驶，通常是直线，但也容易突然转弯（加权值？）。

对于造成的混乱，以及未能理解已经提出的建议，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:54:15.793

The standard algorithm [`adjacent_difference`](http://en.cppreference.com/w/cpp/algorithm/adjacent_difference) will produce the difference between each element in a range of iterators. So If there are 5 elements it produces 4 differences.

These are the standard libraries we'll be using:

```
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <numeric> 
```

I don't know what your GPS class would look like. I'm going to assume it's one dimensional:

```
class Position
{
public:
    Position() :
    m_position(0)
    {
    }

    Position(int position) :
    m_position(position)
    {
    }

    Position operator-(const Position& other) const
    {
        return Position(m_position - other.m_position);
    }
    operator int() const
    {
        return m_position;
    }
private:
    int m_position;
};

Position abs_sum(const Position& lhs, const Position& rhs)
{
    return Position(abs(int(lhs)) + abs(int(rhs)));
} 
```

Putting it together:

```
int main()
{
    using namespace std; // for brevity - don't really do this in your code

    vector<Position> positions;
    positions.push_back(Position(13));
    positions.push_back(Position(23));
    positions.push_back(Position(17));
    positions.push_back(Position(19));

    vector<Position> displacements;

    adjacent_difference(positions.begin(), positions.end(),
                        back_inserter(displacements));

    cout << "Displacements: ";
    copy(displacements.begin(), displacements.end(),
         ostream_iterator<int>(cout, ", "));

    cout << endl;

    int distance = accumulate(displacements.begin(), displacements.end(),
                              0, abs_sum);
    cout << "Total: " << distance << endl;

    return 0;
} 
```

Output:

```
Displacements: 13, 10, -6, 2, 
Total: 31 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T09:28:08.627

这个问题似乎是不正确的，因为您没有足够的数据。所以，你的 GPS 正在收集位置，这些基本上是一堆坐标。你在问“它们是否正确”以及“如何使它更精确”。显然，我们需要更多的数据来做到这一点。

在机器人技术中，典型的“另一个数据”是来自其他传感器（例如 IMU - 惯性测量单元，实际上是加速度计）或里程计（对电机的命令）的数据。从这两个方面，机器人知道它正在“直行”，并且可以纠正向左/向右的任何分支。或者，他们使用计算机视觉算法跟踪“地标”（例如树木或角落），这也提供了有关机器人运动的良好信息。你没有这些。

你所拥有的是汽车的物理模型。你知道，在 60 MPH 时，汽车不可能进行 90 度转弯（这就是为什么这个问题对你来说似乎并不适合，因为你自然知道汽车应该如何表现）。这种约束不如额外的传感器信息好，但它应该这样做。您可以使用非线性最小二乘法或卡尔曼滤波器等。

我不是卡尔曼滤波器的忠实粉丝，所以我不会告诉你如何实现它。

使用 NLS，您可以将汽车的位置作为图表（不要与绘图混淆）。汽车的每个位置都是一个顶点。每两个相邻的顶点（对应于“先前和当前位置”）由“汽车运动定律”约束（边）链接。每个顶点也有 GPS 位置约束，它是一元边。

这种图由稀疏矩阵表示。它是一个雅可比矩阵（或 Hessian 矩阵），其中的值对应于顶点相对于给定系统状态（所有顶点的位置）的约束的推导。在每一步，矩阵大小都会增加，因为添加了下一个位置。为了保持解决方案的低复杂性，您可以删除旧位置，仅保留最后 N 步。在每一步，您都需要评估物理约束（计算速度和旋转速率，看看它是否合理）并计算雅可比矩阵/黑森矩阵和误差向量（当前向量位置与 GPS 修复/物理约束的差异向量运动）。然后求解这个系统（dx = Jacobians / errors），得到向量 dx，它是顶点位置的差异。您只需将其添加到顶点即可。这本质上是高斯-牛顿算法。

这不是一件容易实现的事情。有一些库可以有效地解决这类图形问题，例如[SLAM++](https://sourceforge.net/projects/slam-plus-plus/)、[iSAM](http://people.csail.mit.edu/kaess/isam/)、[GTSAM](http://borg.cc.gatech.edu/)或[g2o](http://www.openslam.org/g2o.html)。问题是，这些都不是开箱即用的，因为物理合理性约束没有在那里实现（GPS 约束也没有，但那只是减法）。您将必须实现自己的顶点/边类型。

我建议你使用更简单的东西。只需了解 GPS 告诉您的差异，计算窗口中位数，看看最后一次测量是否离中位数太远。如果它太远（您将不得不尝试并查看哪个阈值有效），请不要使用该测量值来计算速度/路线（但仍然保留它来计算中位数）。这应该是相当准确的，并且可以满足您的目的。

如果您将测量数据作为文本文件上传，并带有您在街区周围行驶的 lat/lon/timestamp，我们可以看到有关编写代码来处理它的信息。

# asp.net-mvc-3 - 如何在 MVC3 的 ActionLink 中包装图像？

> ID：10094185
> 
> 赞同：3
> 
> 时间：2012-04-10T18:15:46.437
> 
> 标签：asp.net-mvc-3, image

我有一个局部视图，需要将图像包装在 ActionLink 中，因此当用户单击它时，它将去编辑图像。我有一个名为 img.ashx 的内容处理程序。

这是我的图片文字：

这是我的 ActionLink：@Html.ActionLink(item.Title, "EditMediaItem", new { location = item.Location, id = item.Id })

如何才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T18:19:16.623

使用 Url 帮助器方法 Url.Action，例如：

```
<a href="@Url.Action(item.Title, "EditMediaItem", new { location = item.Location, id = item.Id })"><img src="#" /></a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:24:32.730

我喜欢使用这个扩展：

```
public static class ImageHelpers
    {
        /// <summary>
        /// return image link
        /// </summary>
        /// <param name="helper"></param>
        /// <param name="id">Id of link control</param>
        /// <param name="controller">target controller name</param>
        /// <param name="action">target action name</param>
        /// <param name="strOthers">other URL parts like query string, etc</param>
        /// <param name="strImageURL">URL for image</param>
        /// <param name="alternateText">Alternate Text for the image</param>
        /// <param name="strStyle">style of the image like border properties, etc</param>
        /// <returns></returns>
        public static string ImageLink(this HtmlHelper helper, string id, string controller, string action, string strOthers, string strImageURL, 
            string alternateText, string strStyle, string cssClass = "imagelink")
        {
            return ImageLink(helper, id, controller, action, strOthers, strImageURL, alternateText, strStyle, null, cssClass);
        }
        /// <summary>
        /// return image link
        /// </summary>
        /// <param name="helper"></param>
        /// <param name="id">Id of link control</param>
        /// <param name="controller">target controller name</param>
        /// <param name="action">target action name</param>
        /// <param name="strOthers">other URL parts like query string, etc</param>
        /// <param name="strImageURL">URL for image</param>
        /// <param name="alternateText">Alternate Text for the image</param>
        /// <param name="strStyle">style of the image like border properties, etc</param>
        /// <param name="htmlAttributes">html attributes for link</param>
        /// <returns></returns>
        public static string ImageLink(this HtmlHelper helper, string id, string controller, string action, string strOthers, string strImageURL,
            string alternateText, string strStyle, object htmlAttributes, string cssClass = "imagelink")
        {
            // Create tag builder
            var divBuilder = new TagBuilder("div");
            divBuilder.AddCssClass(cssClass);

            var aBuilder = new TagBuilder("a");

            // Create valid id
            if (!string.IsNullOrEmpty(id))
                aBuilder.GenerateId(id);

            // Add attributes
            aBuilder.MergeAttribute("href", "/" + controller + "/" + action + strOthers); //form target URL
            aBuilder.InnerHtml = "<img src='" + strImageURL + "' alt='" + alternateText + "' class='" + cssClass + "' style='border: none;'/>" + alternateText; //set the image as inner html
            aBuilder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

            divBuilder.InnerHtml = aBuilder.ToString(TagRenderMode.Normal); //to add </a> as end tag

            // Render tag
            return divBuilder.ToString(TagRenderMode.Normal);
        }
    } 
```

你像这样使用它：

```
@Html.ImageLink("", "Controller", "Action", "", 
  "~/images/whatever.png", "My test link", "imagelinkcssclass") 
```

# windows - 多核上的 Windows 网络 IOCP 可扩展性

> ID：10094186
> 
> 赞同：0
> 
> 时间：2012-04-10T18:15:47.930
> 
> 标签：windows, sockets, networking, scalability, iocp

行为如下：例如，一个具有 200 个套接字的服务器工作者每秒处理 100K 回声。在同一个端口上启动另一个服务器工作程序（每个工作程序的套接字数量相同或少一倍，没关系），立即将第一个工作程序的性能降低到大约 50%，并且稍微提高了每台机器的整体性能（每个工作程序服务每秒大约 50K 回波）。

因此，6 核机器的性能与 1 核机器的性能大致相同。

我尝试了不同的方法，例如为每个工作人员设置一个独立的 IOCP 端口（在 CreateIoCompletionPort 中将 NumberOfConcurrentThreads 指定为 1），或者为所有工作人员尝试一个共享的 IOCP 端口（NumberOfConcurrentThreads 等于工作人员的数量），性能是相同的。我的工作人员共享零数据，因此没有锁等。

我希望我遗漏了一些东西，而不是 Windows 内核网络可扩展性问题。我正在使用 Windows 7 企业版 x64。

当然，期望是近似线性扩展性能。

有人知道 IOCP 在一台机器上的多核上的实际可扩展性吗？当活动套接字的数量增加时会出现什么情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:48:22.337

非 NUMA 系统的常用方法是为所有连接设置一个 IOCP，并为 IOCP 提供一组线程（通常大小可调）。

然后，您可以根据 CPU 的数量以及线程所做的任何工作是否本质上是阻塞的，来调整线程的数量。

性能应该可以很好地扩展，除非您有一些所有连接都必须访问的共享资源，此时共享资源的争用将影响您的可扩展性。

[我在这里](http://www.serverframework.com/products---the-free-framework.html)有一些免费的 IOCP 代码和一个简单的多客户端测试，它允许您在[这里](http://www.serverframework.com/asynchronousevents/2010/10/stress-testing-wasp-using-the-echoservertest-program.html)运行数千个并发连接。

对于 NUMA 系统，事情可能稍微复杂一些，因为理想情况下，您希望每个 NUMA 节点有一个 IOCP、线程池和缓冲区分配器，以保持对本地节点的内存访问。

# html - 如何将图像放置在盒子中，以使其适合宽度或高度（以较小者为准）？

> ID：10094189
> 
> 赞同：5
> 
> 时间：2012-04-10T18:15:50.230
> 
> 标签：html, css, image-scaling

我想从服务器加载一些照片并将它们中的每一个显示在一个自己的盒子中，这样盒子被填充并且图像居中（不拉伸），如果它太大的话。例如，我可以在不知道每个图像大小的情况下使用 CSS 实现这一点吗？也许有最大宽度左右？

这是我想要的一个例子：

![一个例子。](../Images/3c15b5755919a6b6245214a173a4d952.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:20:30.817

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:18:07.977

您可以做的最快的事情是将图像作为居中的背景图像：

```
style="background: url(images/42.png) 50% 50% no-repeat" 
```

小于框的图像将在框中居中。较大的图像会被裁剪。

缺点是没有缩放。

对于缩放，您必须知道尺寸，使用一些数学来计算将保留纵横比的缩放量，并使用位于使用“溢出：隐藏”的裁剪容器内的实际元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:03:12.357

在这里你做什么。例如，如果图像位于 ID 为“boxer”的 DIV 中，您现在将创建一个 CSS，该 CSS 将自动调整 ID 为“boxer”的 DIV 中的每个图像的大小 CSS 将如下所示

```
#boxer img {
 Width: 600px
 Height: 600px;
} 
```

上面的 CSS 会自动根据 CSS 中的规范重新调整您放入的任何图像的大小。如果尺寸与 CSS 的尺寸相对应，这将精确地适合 ID 为“boxer”的盒子。你可以对宽度和高度都做 100%，这样它就适合盒子。

# linux - 集成 gpu + 外部设备上的 cuda

> ID：10094192
> 
> 赞同：1
> 
> 时间：2012-04-10T18:16:12.000
> 
> 标签：linux, ubuntu, cuda, gpgpu

我有一台集成 GPU 的戴尔台式电脑。如果我在 PCIe 上再添加一个 gpu，我可以运行 cuda 吗？大概是。集成的 gpu 有自己的驱动程序（i915），我不确定 nvidia 驱动程序（用于第二个 gpu）会发生什么。有什么特殊的程序，需要考虑吗？

编辑：忘了提到操作系统是 Ubuntu 11.10。对不起

提前致谢

更新：终于有问题了。我只是把显卡gtx 460。我想把显示器放在集成卡上，以便使用专用于计算的“好”卡。但如果我不将显示器电缆插入 gtx，我会收到以下消息

> 系统暂停！注意：检测到不支持的视频配置
> 
> 需要采取行动
> 
> 这台计算机具有附加显卡，但显示器已插入集成视频连接器。要将显示器电缆连接到附加显卡：
> 
> 1.  关闭计算机
> 2.  将显示器电缆插入附加显卡连接器。这可能需要视频适配器或视频适配器电缆。（系统自带）
> 3.  打开电脑。
> 
> 完成这些步骤后，不应出现此消息。如需更多信息或帮助，请参阅系统文档。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:56:00.613

CUDA 仅支持 NVidia GPU，因此它甚至看不到嵌入式英特尔 GPU。

CUDA 启动函数还返回找到的所有 CUDA 设备的类型和功能，以便您可以选择在哪个设备上运行任务。

附言。您可能希望在 Windows 资源管理器-> 属性中手动将应用程序设置为“使用增强/性能图形” - 我们在带有 Intel+Nvidia optima 系统的笔记本电脑中遇到问题，其中应用程序由于某种原因默认看不到 Nvidia GPU

# objective-c - 如何使用 NSFileManager 将 UIImage 保存到文件中？

> ID：10094195
> 
> 赞同：22
> 
> 时间：2012-04-10T18:16:20.370
> 
> 标签：objective-c, xcode, xcode4

如何使用 NSFileManager 将 UIImage 保存到文件中？

谢谢，

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-10T18:27:45.923

开始了。

这会将 a 存储`UIImage`到您的 iOS 应用程序的文档目录中。你不需要`NSFileManager`.

```
NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

UIImage * imageToSave = [UIImage imageNamed:@"Icon.png"];
NSData * binaryImageData = UIImagePNGRepresentation(imageToSave);

[binaryImageData writeToFile:[basePath stringByAppendingPathComponent:@"myfile.png"] atomically:YES]; 
```

**编辑：** 如果您从 iOS 相机存储图像，您可能会查看如何将图像旋转到正确的方向。[在那种情况下看这里](https://stackoverflow.com/questions/6358559/uiimagepngrepresentation-writetofile-is-always-landscape)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:27:28.230

要将其保存为文件，您需要将其放在 plist 中，或创建图像的 png/jpg 表示。您可以使用 NSCoding 更轻松地保存 UIImage 数据。

有关更多信息，请参阅本教程：[http ://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)

# android - 如何在 Android 中将像素转换为倾角（密度无关像素）

> ID：10094196
> 
> 赞同：6
> 
> 时间：2012-04-10T18:16:32.177
> 
> 标签：android

在我的 Android 应用程序中，我有像素（69 像素），我需要将此像素转换为倾角（密度独立像素）。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T19:11:10.910

只需将像素值除以 DisplayMetrics.density。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T18:20:49.120

希望这会有所帮助

```
Resources r = getResources();
float dp = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX, 69, r.getDisplayMetrics()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-17T06:54:33.980

你可以试试这个：

```
public int convertDiptoPx(int pixel){

    float scale = getResources().getDisplayMetrics().density;
    int dips=(int) ((pixel * scale) + 0.5f);
    logMessage("Px=" +pixel+"  DipValue="+dips );   
    return dips;
} 
```

编辑：

 ````
public int convertPxtoDip(int pixel){
    float scale = getResources().getDisplayMetrics().density;
    int dips=(int) ((pixel / scale) + 0.5f);
    return dips;
} 
````

# c# - WPF 窗口在启动时抛出 TypeInitializationException

> ID：10094197
> 
> 赞同：5
> 
> 时间：2012-04-10T18:16:33.647
> 
> 标签：c#, wpf, visual-studio-2010, window, excel-addins

我有一个带有多个功能区的 Excel 插件，一个功能区是设置窗口。单击它时，将显示一个自定义窗口。但是，单击时没有任何显示。我在日志文件中看到了以下异常。是什么原因造成的以及如何解决？多谢

```
2012-04-09 09:59:50,161 [1] 错误助手 [(null)] - 名称：TypeInitializationException
消息：“System.Windows.Window”的类型初始化程序引发了异常。
目标：无效 .ctor()
堆栈：在 System.Windows.Window..ctor()
   在 MyShared.View.ConnectionSetup..ctor()
   在 MyAddIn.Connect.GetSettings()
   在 MyAddIn.Connect.BtnClick（IRibbonControl 控件）

名称：类型初始化异常
消息：“System.Windows.FrameworkElement”的类型初始化程序引发了异常。
目标：无效 .cctor()
堆栈：在 System.Windows.Window..cctor()

名称：类型初始化异常
消息：“System.Windows.Documents.TextElement”的类型初始化程序引发异常。
目标：无效 .cctor()
堆栈：在 System.Windows.FrameworkElement..cctor()

名称：类型初始化异常
消息：“MS.Internal.FontCache.Util”的类型初始化程序引发异常。
目标：Int32 get_Dpi()
堆栈：在 MS.Internal.FontCache.Util.get_Dpi()
   在 System.Windows.SystemFonts.ConvertFontHeight（Int32 高度）
   在 System.Windows.Documents.TextElement..cctor()

名称：UriFormatException
消息：无效的 URI：无法确定 URI 的格式。
目标：Void CreateThis(System.String, Boolean, System.UriKind)
堆栈：在 System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
   在 System.Uri..ctor（字符串 uriString，UriKind uriKind）
   在 MS.Internal.FontCache.Util..cctor()

```

编辑，这里是 xaml 代码

```
<Window x:Class="MyShared.View.ConnectionSetup"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
    xmlns:Converter="clr-namespace:MIMICShared.Converter" 
    WindowStartupLocation="CenterOwner"
    Title="Settings" Width="446" Height="650"  Closing="WindowClosing"
DataContextChanged="UserControlDataContextChanged" Foreground="Black" FontWeight="Normal" HorizontalAlignment="Stretch">
<Window.Resources>
    <ResourceDictionary>
        <Converter:Status2ImageConverter x:Key="string2Image"/>
    </ResourceDictionary>
</Window.Resources>

<Grid FocusManager.FocusedElement="{Binding ElementName=uname}" >
    <Grid.RowDefinitions>
        <RowDefinition Height="0"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
        <RowDefinition Height="0"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="0"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="5"></RowDefinition>
    </Grid.RowDefinitions>
    <GroupBox Grid.Row="1" Foreground="Blue">
        <Grid >
            <Grid.ColumnDefinitions>                    
                <ColumnDefinition Width="5"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="5"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="2"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="2"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="2"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="2"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="2"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="2"></RowDefinition>
            </Grid.RowDefinitions>
            <Label Grid.Row="1" Grid.ColumnSpan="4" FontSize="14" HorizontalAlignment="Center" FontWeight="Bold" VerticalAlignment="Bottom">Historical</Label>
            <GroupBox Grid.Column="1" Grid.Row="3" Header="Connections" Foreground="Blue" Grid.ColumnSpan="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" ></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <toolkit:DataGrid x:Name="connectionlist" Margin="5" Style="{DynamicResource DataGridStyleDefault}" Background="White"
              AutoGenerateColumns="False" HeadersVisibility="All"
              SelectionMode="Single"
              GridLinesVisibility="None"                  
              ItemsSource="{Binding SettingList}" CanUserAddRows="False" CanUserDeleteRows="True"
              SelectionUnit="FullRow" SelectedItem="{Binding SelectedItem}" 
              SelectionChanged="ConnectionlistSelectionChanged"                               
              VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <!-- Column definition -->
                        <toolkit:DataGrid.Columns>
                            <!-- Pool -->
                            <!--<toolkit:DataGridCheckBoxColumn Header="Pool" Width="40" Binding="{Binding pool}" />-->
                            <!-- Connections info -->
                            <toolkit:DataGridTextColumn Header="Connection Info" Width="*" Binding="{Binding host}" />
                            <toolkit:DataGridTextColumn Header="Description" Width="*"  Binding="{Binding desc}" >
                                <toolkit:DataGridTextColumn.ElementStyle>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="TextWrapping" Value="Wrap" />
                                    </Style>
                                </toolkit:DataGridTextColumn.ElementStyle>
                            </toolkit:DataGridTextColumn>
                        </toolkit:DataGrid.Columns>
                    </toolkit:DataGrid>

                    <Grid Grid.Row="2" HorizontalAlignment="Center">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Button Margin="2" Padding="10 0" x:Name="AddButton" Click="AddClicked">Add</Button>
                            <Button Grid.Column="1" Margin="2" Padding="10 0" Command="{Binding Remove}">Remove</Button>
                        </Grid>
                    </Grid>
                </Grid>
            </GroupBox>

            <GroupBox Header="Authentication" Grid.Row="5" Grid.Column="1" Foreground="Blue" Grid.ColumnSpan="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition  Height="Auto"/>
                        <RowDefinition  Height="2"/>
                        <RowDefinition  Height="Auto"/>
                        <RowDefinition  Height="2"/>
                        <RowDefinition  Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  Width="Auto"/>
                        <ColumnDefinition  Width="5"/>
                        <ColumnDefinition  Width="Auto"/>
                        <ColumnDefinition  Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0">Username:</Label>
                    <TextBox x:Name="uname" Width="100" Grid.Row="0" Grid.Column="2" Text="{Binding UserName, UpdateSourceTrigger=PropertyChanged}" ></TextBox>

                    <Label Grid.Row="2" Grid.Column="0">Password:</Label>
                    <PasswordBox x:Name="pwd" ToolTip="Password" PasswordChar="*"                             
                         Width="100" Grid.Row="2" Grid.Column="2" KeyDown="OnKeyDownHandler"></PasswordBox>
                    <Label Grid.Row="2" Grid.Column="3">
                        <Hyperlink Click="HyperlinkClick">Forgot Password?</Hyperlink>
                    </Label>
                    <CheckBox Margin="10 0 0 0" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" x:Name="saveauth" IsChecked="{Binding SaveAuth}">Save username and password</CheckBox>
                    <Button Margin="10 0 0 0" Grid.Row="4" Grid.Column="3" Click="VerifyButtonClick">OK</Button>
                </Grid>
            </GroupBox>
            <GroupBox Header="Status" Grid.Row="7" Grid.Column="1" Foreground="Blue" Grid.ColumnSpan="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition  Height="0"/>
                        <RowDefinition  Height="Auto"/>
                        <RowDefinition  Height="0"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  Width="80"/>
                        <ColumnDefinition  Width="20"/>
                        <ColumnDefinition  Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Row="1" Grid.Column="0">Historical</Label>
                    <Image Grid.Row="1" Grid.Column="1" 
                           Source="{Binding ElementName=historicalStatusLabel, Path=Content, Converter={StaticResource string2Image}}"
                           ToolTip="Connection Status"></Image>
                    <Label  Name="historicalStatusLabel" Grid.Row="1" Grid.Column="2" Content="{Binding ConnectionStatus, UpdateSourceTrigger=PropertyChanged}"/>
                </Grid>
            </GroupBox>
        </Grid>
    </GroupBox>
    <GroupBox Grid.Row="3" Grid.Column="1" Foreground="Blue">
        <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="0"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="0"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="0"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="0"></RowDefinition>
        </Grid.RowDefinitions>
            <Label Grid.Row="1" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Bottom">Real Time</Label>
                <GroupBox Header="Authorization" Grid.Row="3" Grid.Column="1" Foreground="Blue">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition  Height="Auto"/>
                <RowDefinition  Height="2"/>
                <RowDefinition  Height="Auto"/>
                <RowDefinition  Height="2"/>
                <RowDefinition  Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition  Width="Auto"/>
                <ColumnDefinition  Width="2"/>
                <ColumnDefinition  Width="Auto"/>
                <ColumnDefinition  Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="0">Username:</Label>
            <TextBox x:Name="RTDemail" Width="100" Grid.Row="0" Grid.Column="2" Text="{Binding RTDUserName, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="2" Grid.Column="0">Password:</Label>
            <PasswordBox x:Name="RTDpwd" ToolTip="Password" PasswordChar="*"                             
                         Width="100" Grid.Row="2" Grid.Column="2" KeyDown="OnKeyDownHandler"></PasswordBox>
            <Label Grid.Row="2" Grid.Column="3">
                <Hyperlink Click="HyperlinkClickRTD">Forgot Password?</Hyperlink>
            </Label>
            <CheckBox Margin="10 0 0 0" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" x:Name="RTDsaveauth" IsChecked="{Binding RTDSaveAuth}">Save username and password</CheckBox>
            <Button Margin="10 0 0 0" Grid.Row="4" Grid.Column="3" Click="RTDVerifyButtonClick">OK</Button>
        </Grid>
    </GroupBox>
    <GroupBox Grid.Row="5" Grid.ColumnSpan="3">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="1" Margin="0 0 0 0" Foreground="Blue">Server</Label>
            <Label Name="RTDServerURLLabel" Grid.Column="2" Content="{Binding RTDServerURL}"></Label>
        </Grid>
    </GroupBox>
    <GroupBox Header="Status" Grid.Row="7" Grid.Column="1" Foreground="Blue">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition  Height="2"/>
                <RowDefinition  Height="Auto"/>
                <RowDefinition  Height="2"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition  Width="80"/>
                <ColumnDefinition  Width="20"/>
                <ColumnDefinition  Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Row ="1" Grid.Column="0">Real Time</Label>
            <Image Grid.Row ="1" Grid.Column="1" 
                    Source="{Binding ElementName=RTDStatusLabel, Path=Content, Converter={StaticResource string2Image}}"
                   ToolTip="Connection Status" HorizontalAlignment="Left" Width="20"></Image>
            <Label Name="RTDStatusLabel" Grid.Row="1" Grid.Column="2" Content="{Binding RTDConnectionStatus, UpdateSourceTrigger=PropertyChanged}"></Label>
        </Grid>
    </GroupBox>
    </Grid>
    </GroupBox>        
    <Grid Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="60"></ColumnDefinition>
                <ColumnDefinition Width="20"></ColumnDefinition>
        </Grid.ColumnDefinitions>
            <Button x:Name="CloseButton" Click="CloseButtonClick" Grid.Column ="1" Margin="0,0,0,0">Close</Button>
        </Grid>                  
</Grid> 
```

点击ribbon时，执行代码，ConnectionSetup就是上面的xaml文件

```
private bool GetSettings()
{
    var settingUI = new ConnectionSetup();
    settingUI.DataContext = Settings;

    CenterMainWindow(settingUI, wndHandle.Handle);

    bool? result = settingUI.ShowDialog();
    return result ?? false;
}

    private void CenterMainWindow(System.Windows.Window window, IntPtr ownerHandle)
    {
        var helper = new System.Windows.Interop.WindowInteropHelper(window) {Owner = ownerHandle};

        // Center window
        // Note - Need to use HwndSource to get handle to WPF owned window,
        //        and the handle only exists when SourceInitialized has been
        //        raised

        window.SourceInitialized += delegate
                                        {
                                            // Get WPF size and location for non-WPF owner window
                                            var nonWPFOwnerLeft = XLApp.Left;
                                            var nonWPFOwnerWidth = XLApp.Width;
                                            var nonWPFOwnerTop = XLApp.Top;
                                            var nonWPFOwnerHeight = XLApp.Height;

                                            // Get transform matrix to transform non-WPF owner window
                                            // size and location units into device-independent WPF
                                            // size and location units
                                            var source = System.Windows.Interop.HwndSource.FromHwnd(helper.Handle);
                                            if (source != null && source.CompositionTarget != null)
                                            {
                                                var matrix = source.CompositionTarget.TransformFromDevice;
                                                var ownerWPFSize =
                                                    matrix.Transform(new System.Windows.Point(nonWPFOwnerWidth,
                                                                                              nonWPFOwnerHeight));
                                                var ownerWPFPosition =
                                                    matrix.Transform(new System.Windows.Point(nonWPFOwnerLeft,
                                                                                              nonWPFOwnerTop));

                                                // Center WPF window
                                                window.WindowStartupLocation = WindowStartupLocation.Manual;
                                                window.Left = Math.Max(0,
                                                                       ownerWPFPosition.X +
                                                                       (ownerWPFSize.X - window.Width)/2);
                                                window.Top = Math.Max(0,
                                                                      ownerWPFPosition.Y +
                                                                      (ownerWPFSize.Y - window.Height)/2);
                                            }
                                        };
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:22:33.877

~~从您发布的错误堆栈来看，您的设置窗口上可能有一个链接。不幸的是，该链接中包含无效的 url，这导致创建窗口失败。~~

编辑：更仔细地查看了您的代码和错误消息，很明显我在寻找错误的区域。一些搜索在[wpf中发现了一个](http://connect.microsoft.com/VisualStudio/feedback/details/522003/precreatedefaultfamilycollection-fails-on-application-startup)[错误](http://connect.microsoft.com/VisualStudio/feedback/details/618027/uriformatexception-thrown-by-ms-internal-fontcache-util)。

简短版：windir 环境变量可能在目标机器上设置不正确，导致字体子系统中断。解决方法是在目标机器的注册表或代码中通过在启动时添加类似以下内容来修复环境变量：

```
Environment.SetEnvironmentVariable("windir", Environment.GetEnvironmentVariable("SystemRoot")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-21T07:26:19.723

We had a couple of people experience this problem. The solution described [here](https://superuser.com/a/379173/14894) (caused by PATH being greater than 2048 characters) resolved the issue.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T23:36:16.970

我担心上面建议的语句在以太多或太少权限运行的代码中可能存在问题。当然，我作为管理员在我的工作站上运行的应用程序对 Environment.SetEnvironmentVariable("windir",Environment.GetEnvironmentVariable("SystemRoot")); 的调用没有问题。

但我不确定 SetEnvironmentVariable 是否真的可以在锁定的操作系统上工作。有没有人a）真正尝试过这个，b）在低权限环境中尝试过>

此外，在使用此调用安装应用程序并运行一次后，我在应用程序启动时看到了一些奇怪的情况。所有其他应用程序不再能看到 windir，它没有扩展到 C:\Windows。我将完成整个安装并在没有它的情况下运行，看看 TypeInvocation 异常是否重新出现，如果没有，OS windir 变量是否完好无损。

更新：

我已经确认我注意到的不良行为是由于未指定 SetEnvironment 调用的目标。使用以下我的问题似乎得到了缓解：

```
System.Environment.SetEnvironmentVariable("windir", System.Environment.GetEnvironmentVariable("SystemRoot"), EnvironmentVariableTarget.User); 
```

当我没有设置目标时，我的 Windows 会话发生了非常奇怪的事情，需要我注销并登录甚至重新启动。因此，除非此更改确实是在机器或过程级别，否则不要假设默认的结果令人满意

# opencv - 如何使用 CUDA 和 OpenCV 访问 cv::gpu::GpuMat 矩阵上的元素？

> ID：10094201
> 
> 赞同：2
> 
> 时间：2012-04-10T18:16:43.037
> 
> 标签：opencv, matrix, cuda, gpu

我正在做一个在 CUDA 平台上实现人脸检测算法的项目。

目前我要访问`GpuMat`实例上的元素。

我尝试了以下常规方法：

1.  试图从中进行归纳`cv:Mat`， `GpuMat`没有`<T>.at`方法。
2.  我试过使用`CV_MAT_ELEM`，我收到一个错误。

这是我在**FaceDetection.cu**文件上的代码：

```
 int DetectFacesGPU(cv::gpu::GpuMat * sumMat ,cv::gpu::GpuMat * qSumMat , float factor)
            {
                //
                int i = CV_MAT_ELEM(*sumMat,int ,0,0); 
                // 
```

我收到一个错误

```
Error   29  error : expression must have class type C:\Users\Shahar\Dropbox\OpenCV2.3\OpenCV2.3\FaceDetectionLatest\FaceDetectionCuda\FaceDetectionLatest\FaceDetection.cu  139 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:50:36.023

您必须将其下载到 a`cv::Mat`然后以标准方式访问它。

我认为下载它很简单：

```
cv::Mat mat;
sumMat->download(mat); // or something like that. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T13:13:52.733

从 的定义`CV_MAT_ELEM`，`CV_MAT_ELEM(*sumMat, int, 0, 0);`扩展为：

```
*(int*)CV_MAT_ELEM_PTR_FAST(*sumMat, 0, 0, 4)); 
```

进而扩展为：

```
*(int*)(assert ( 0 < (*sumMat).rows && 0 < (*sumMat).cols ),
               (*sumMat).data.ptr + (size_t)(*sumMat).step*0 + 4*0); 
```

假设您的`DetectFacesGPU`函数被定义为设备代码，则上述语句是错误的，因为您无法`sumMat`在设备代码中取消引用。通过这样做，您正在从设备代码访问主机内存。您必须小心，因为*`GpuMat`类本身*是在主机内存中分配的。它只是分配在设备内存中*的实际矩阵数据。*

所以`GpuMat`类本身通常不会传递给内核。要访问内核中的单个像素`GpuMat`，您必须将引用实际矩阵数据（位于设备内存中）的指针传递给内核并对该指针进行指针运算。

# tfs - 如何使用 TFS Power Tools 备份/还原功能将整个 TFS 安装从一台服务器还原到另一台服务器

> ID：10094202
> 
> 赞同：3
> 
> 时间：2012-04-10T18:16:44.310
> 
> 标签：tfs, backup

我在现有服务器上安装了 TFS 2010，并希望将其移至新服务器。我想保持我所有的排序规则完好无损，并使移动尽可能顺利。我还想使用 Power Tools 备份/恢复功能来执行此操作。我现在在网络位置有备份，那么如何将这些备份可靠地还原到我新安装和打补丁的 TFS 2010 机器上（无需配置）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T20:46:00.237

将 TFS 实例移动到新服务器是一个微妙的过程。TFS 配置数据库包含大量 URI、服务帐户和其他重要信息。

您可以快速将 TFS 备份还原到同一台服务器，而不会出现问题。要实际移动到不同的硬件或全新安装，[请遵循以下（冗长的）过程](http://msdn.microsoft.com/en-us/library/ms404869%28v=vs.100%29.aspx)。您可以使用现有的备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:53:51.563

+1 for @jessehouwing

But if you have the same URI's, you can do the following

After you back up TFS 2010 using TFS Power Tools 2011, then you restored the TFS 2010 back up to another SQL Server or instance, or restored in the original SQL Server which your TFS 2010 configured?

If you want backup TFS 2010 using TFS Power Tools and restore to the original SQL Server, please refer to the detailed steps in this article: [http://myalmblog.com/2010/09/12/tfs-2010-power-tools-tfs-backup-and-restore-hands-on-lab/.](http://myalmblog.com/2010/09/12/tfs-2010-power-tools-tfs-backup-and-restore-hands-on-lab/)

If you want to backup TFS 2010 and restore to another SQL Server or instance, after restore TFS 2010 database on the new SQL Server, you need to configure the new SQL Server for your TFS 2010, please refer to the detailed steps in this document: [http://msdn.microsoft.com/en-us/library/ms252516.aspx](http://msdn.microsoft.com/en-us/library/ms252516.aspx).

# android - android中数据库的电子表格视图

> ID：10094204
> 
> 赞同：0
> 
> 时间：2012-04-10T18:17:02.007
> 
> 标签：android, database

我想知道是否有可能在类似于 excel 或 SQLServer 的电子表格视图中获取数据库。我尝试将数据库文件转换为 txt 我确实得到了结果，但不是我希望的清晰的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:21:26.163

一旦你从数据库中提取信息，创建一个表格视图，然后填充单元格/行，你就有了一个电子表格视图。

您也可以将其保存为分隔字符串并将其通过电子邮件发送到某处，以便您可以在 Excel 中打开它。

# php - 使用 HTML 表单插入 MySQL

> ID：10094205
> 
> 赞同：0
> 
> 时间：2012-04-10T18:17:05.003
> 
> 标签：php, mysql, html

我想使用在html表单中输入的数据并插入到MYSQL中。我有一个单独的 php (cus.php)。但是我拥有的当前代码没有发生任何事情

在我点击“注册”的那一刻，我正在导航到 php 文件。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:20:56.833

您忘记了 HTML 表单中最重要的东西：`<form>`标签。

您必须包装应在单击时提交的整个表单（所有输入），如下所示：

```
<form method="POST" action="cus.php">
...
</form> 
```

这会将所有输入发送到`cus.php`并使其作为变量可用`$_POST['input_name']`。您也可以使用 GET 作为方法（然后改用 $_GET 数组）。

编辑：没看到，你实际上有一个表单标签。但是，它的`action`属性中缺少目标文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:21:14.550

首先，请参阅 DCoder 的评论。这是最重要的。

改变：

```
<form action="" method="seller"> 
```

至：

```
<form action="cus.php" method="post"> 
```

这能解决吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:20:51.580

尝试这样做

```
FORM action="your script" method="Post" 
```

# node.js - 没有错误 - 仍然没有写入

> ID：10094207
> 
> 赞同：0
> 
> 时间：2012-04-10T18:17:25.883
> 
> 标签：node.js, mongodb, coffeescript, ubuntu-11.10, gridfs

让 node.js 和 gridfs 玩起来并不容易。在我尝试过的所有事情中，我决定在有限的知识和我理解当前支持的功能允许的情况下尽可能接近。

（在咖啡下面，使用[http://js2coffee.org/](http://js2coffee.org/)获取 js，反之亦然）

```
util = require("util")
mongodb = require("mongodb")
GridStore = mongodb.GridStore
parse = (options) ->
  opts = {}
  opts = options[0]  if options.length > 0
  opts.metadata = {}  unless opts.metadata
  opts

db = new Db("local", new Server("127.0.0.1", 27017,
  auto_reconnect: false
  poolSize: 1
),
  native_parser: false
)
db.open()
putFile = (path, name, options, fn) ->
  options = parse(options)
  options.metadata.filename = name
  new GridStore(db, name, "w", options).open (err, file) ->
    return fn(err)  if err
    file.writeFile path, (err, fn) ->
      file.close()

opts = content_type: "plain/text"
myfileupload = putFile("myfile.txt", "known_hosts", opts)
db.close() 
```

然而奇怪的是，在 Ubuntu 11.10 上使用 apt-get install mongodb-10gen，我的文件没有保存。并且没有错误消息可以帮助我理解原因。

我几乎相信我读到的关于 gridfs 和 nodejs 的一切都只是一个残酷的笑话，我永远不会看到这项工作。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:11:42.213

我怀疑是异步问题。您在`db.close()`调用 to 之后立即调用`putFile`，所以在的回调触发`db.close()`之前运行，对吗？似乎这可能是一个问题。尝试进入与.`GridStore``open``db.close()``file.close()`

# facebook - Facebook 画布 iframe 和安全性

> ID：10094214
> 
> 赞同：1
> 
> 时间：2012-04-10T18:18:11.823
> 
> 标签：facebook, facebook-iframe, facebook-canvas

我想向开发人员开放我的小平台，这样他们就可以构建可以作为 iframe 插入我们网站的应用程序。与 facebook 正在做的类似，但不，我不是要建立另一个 Facebook :)。据我了解，开发人员可以使用 iframe 构建 facebook 应用程序。

**问题：**我想知道从 facebook 用户的角度来看，安全性如何。Facebook 如何防止应用程序开发人员不将恶意软件 JavaScript 代码放入 iframe。我没有注意到任何阻止在 iframe 中包含类似内容的自动机制。

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:32:01.360

不，这根本不是问题，我想你是白担心了。

没有您自己需要担心的安全问题，iframe 中加载的页面是沙盒的，并且由浏览器“保护”。这两个 iframe 甚至无法相互通信，因为它们不共享同一个域，如果两个框架具有不同的域，现代浏览器将阻止在另一个框架中执行 javascript 代码的任何尝试。

facebook 所做的就是解决这个问题，facebook 中的每个 iframe 应用程序都会加载[facebook javascript sdk](http://developers.facebook.com/docs/reference/javascript/)，然后嵌套的 iframe 可以向 facebook 发出请求并在数据返回时（通过回调）得到通知。

至于“iframe 中的恶意 javascript 代码通过浏览器攻击用户计算机”，iframe 具有与任何其他浏览器页面一样由浏览器强制执行的完全相同的安全策略，如果有人设法以某种方式绕过这些策略，那么它的加载位置几乎没有区别，并且 facebook 没有执行任何其他安全措施。

您唯一需要担心的是 iframe 中的脚本将能够访问您的脚本和/或 dom，除非您创建允许它们的机制（以某种方式绕过跨域策略），否则这不应该发生。

# c - 指向 char 数组的指针与普通 char 指针的值

> ID：10094216
> 
> 赞同：-3
> 
> 时间：2012-04-10T18:18:18.693
> 
> 标签：c, arrays, pointers

我很难理解在哪里可以使用指向数组的指针，例如：`char (*a)[10];`. 所以两个基本问题。

1.  请给我一个简单的例子，说明如何在 C 代码中使用指向数组的指针。
2.  为什么要使用它而不是将变量声明为指针，然后在该点之后递增/递减地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:46:54.523

`num_row`示例：如何打印行和 3 列数组的元素：

```
#include <stdio.h>

#define NUM_ROW(x) (sizeof (x) / sizeof *(x))

// print elements of an array of num_row rows and 3 columns
void print(int (*a)[3], size_t num_row)
{
    size_t num_col = sizeof *a / sizeof **a;

    for (int i = 0; i < num_row; i++) {
        for (int j = 0; j < num_col; j++) {
            printf("%d\n", a[i][j]);
        }
    }
}

int main(void)
{
    int a[2][3] = {{1, 2, 3}, {4, 5, 6}};
    int b[3][3] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};

    print(a, NUM_ROW(a));
    print(b, NUM_ROW(b));

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:33:20.760

假设您有一个返回一组字符串的数据库查询。此外，假设您知道这些字符串的长度不超过 9 个字符。只是，您不知道查询返回的集合中有多少元素。

```
char (*a)[10] = malloc( NumRecords * sizeof *a );
if ( a == NULL )
{
  /* Handle error appropriately */
  return EXIT_FAILURE; /* Naive */
}

for ( i = 0 ; i < NumRecords ; ++i )
{
  assert(strlen(DbRecordSet[i]) < 10);
  strcpy(a[i], DbRecordSet[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:39:20.360

每当您将具有多维数组类型的表达式传递给函数时，您都将使用指向数组的指针：

```
int a[10][20];
foo(a);

void foo(int (*p)[20]) // or int p[][20] 
{ ... } 
```

# python - 获取动态创建的 python 实例的状态并将其序列化为关系模型

> ID：10094217
> 
> 赞同：2
> 
> 时间：2012-04-10T18:18:24.733
> 
> 标签：python, metaprogramming, pickle

我正在开发一个框架。我提供了一个基类，其他开发人员将对其进行子类化以向系统添加行为。这些类的实例将具有我的框架不一定期望的属性，除非通过检查这些实例' `__dict__`。为了让事情变得更有趣，其中一些类可以随时动态创建。

我希望框架处理一些事情，即我需要保留这些实例，向用户显示它们的属性值，并让她使用这些值搜索/过滤实例。

我必须使用关系数据库。我知道那里有一些不错的 python OO 数据库，但不幸的是，在这种情况下它们不是一个选项。

我也不是在寻找一个成熟的 ORM ......而且它甚至可能不是一个选项，因为某些类可以动态创建。

所以，我的问题是，**我需要序列化 ​​python 实例的什么状态以确保以后可以反序列化它？看看就够了`__dict__`，还是我应该使用其他私有属性？**

腌制实例是不够的，因为我需要解开它们以搜索/过滤属性值，而且我担心在内存中执行它的数据太多（而不是让数据库执行它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:24:02.110

只需使用 ORM。这就是他们的目的。

你打算做的是在你自己的时间创建你自己的半途而废的 ORM。为您自己的代码节省时间，并利用其他人免费为您解决此问题所付出的努力。

请注意，python 中的所有类创建都是“动态的”——这根本不是问题。事实上，如果您以编程方式组装类，使用 ORM 可能会稍微容易一些，因为它们提供了字段的具体化。

在最坏的情况下，如果您确实需要将对象存储在假的 nosql 类型的模式中，那么您仍然只需要在使用现有 ORM 的情况下编写自己的后端驱动程序，而不是自己编写整个堆栈。（碰巧，您不是第一个面对这个问题的人 - 存在解决方案。Goole“python orm 存储动态创建的模型”和“sqlalchemy 存储动态创建的模型”）

候选人包括：

*   Django ORM
*   SQL炼金术
*   您可以通过谷歌搜索“Python ORM”找到其他一些内容。

# html - 按下返回键时提交表单的文本输入是否是有保证的行为？

> ID：10094218
> 
> 赞同：0
> 
> 时间：2012-04-10T18:18:35.563
> 
> 标签：html, standards, web-standards

在 Chrome 和 Firefox 上，如果在表单内的任何文本输入中按下返回键，则会提交表单。

这种行为是标准的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:20:16.070

是的，这是默认行为。 **[编辑]**我应该有资格，这几乎适用于 IE7 及更高版本。我知道一些较旧的浏览器（Netscape）可能没有这样做。但是对于今天的浏览器环境，是的，这是标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:52:01.323

不，这种行为不是必需的。恐怕 HTML 4.01 规范中甚至都没有*提到*它，尽管这可能只是一个疏忽。

但这是一种非常常见的行为，需要考虑：用户很可能会意外地按 Enter 提交表单数据，而他们仍打算继续填写。

存在一些浏览器差异，例如，当在一个字段中按下 Enter 时，IE 9 不会做任何事情，前提是 a) 那里有多个文本输入字段并且 b) 没有提交按钮。在旧版本上，条件 a) 就足够了，这或多或少是最初的想法（该功能旨在使使用非常简单的搜索表单变得容易而不会引起混淆）。

# c++ - 如何检查 Visual C++ 参数是否是有效的驱动器号？

> ID：10094222
> 
> 赞同：1
> 
> 时间：2012-04-10T18:18:47.080
> 
> 标签：c++, windows, drive

正如标题所说，我有一个 C++ 程序，用户传入一个参数。我想验证传递的参数是否是有效的 DOS/Windows 驱动器号（即 C:.D:.E:) 以及驱动器是否存在于系统上。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:24:42.033

您可以使用[GetDriveType()](http://msdn.microsoft.com/en-us/library/aa364939.aspx)获取驱动器的类型- 它还会告诉您驱动器是否不存在或不可用

或者“正确”的方法是[枚举所有驱动器](http://msdn.microsoft.com/en-us/library/aa364039%28v=vs.85%29.aspx)

# r - 如何为 plyr 创建函数

> ID：10094226
> 
> 赞同：1
> 
> 时间：2012-04-10T18:18:58.643
> 
> 标签：r, plyr

我有一系列足球比赛结果，并希望了解一支球队在特定数量的比赛中得了多少分

这是一个子集的头部，其中包含自最新结果以来在一个赛季中得分的累积分数

我因不使用 dput 而被打了几次手腕，所以请忍耐

```
allData <- structure(list(team = c("Arsenal", "Tottenham H", "Tottenham H", 
"Arsenal", "Arsenal", "Tottenham H"), venue = c("H", "A", "H", 
"A", "H", "A"), result = c("W", "D", "W", "L", "W", "D"), GF = c(1L, 
0L, 3L, 1L, 3L, 0L), GA = c(0L, 0L, 1L, 2L, 0L, 0L), gameDate = structure(c(1333868400, 
1333782000, 1333263600, 1333177200, 1332572400, 1332572400), class = c("POSIXct", 
"POSIXt"), tzone = ""), season = structure(c(2L, 2L, 2L, 2L, 
2L, 2L), .Label = c("2010/2011", "2011/2012"), class = "factor"), 
 points = c(3, 1, 3, 0, 3, 1), GD = c(1L, 0L, 2L, -1L, 3L, 
0L), cumpts = c(3, 1, 4, 3, 6, 5)), .Names = c("team", "venue", 
"result", "GF", "GA", "gameDate", "season", "points", "GD", "cumpts"
), row.names = c(NA, 6L), class = "data.frame") 
```

这是一支球队在一个赛季中的数据

```
spurs <- structure(list(team = c("Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H", 
"Tottenham H", "Tottenham H", "Tottenham H", "Tottenham H"), 
    venue = c("A", "H", "A", "H", "A", "H", "A", "H", "A", "H", 
    "A", "H", "H", "H", "A", "A", "H", "H", "A", "H", "A", "H", 
    "A", "H", "A", "A", "H", "A", "H", "A", "H", "A"), result = c("D", 
    "W", "D", "D", "L", "L", "L", "W", "D", "W", "L", "D", "W", 
    "W", "D", "W", "D", "W", "L", "W", "W", "W", "W", "W", "W", 
    "D", "W", "W", "W", "W", "L", "L"), GF = c(0L, 3L, 0L, 1L, 
    0L, 1L, 2L, 5L, 0L, 3L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 
    3L, 3L, 2L, 3L, 3L, 2L, 2L, 2L, 2L, 4L, 2L, 1L, 0L), GA = c(0L, 
    1L, 0L, 1L, 1L, 3L, 5L, 0L, 0L, 1L, 3L, 1L, 0L, 0L, 1L, 0L, 
    1L, 0L, 2L, 0L, 1L, 0L, 1L, 1L, 1L, 2L, 1L, 1L, 0L, 0L, 5L, 
    3L), gameDate = structure(c(1333782000, 1333263600, 1332572400, 
    1332313200, 1331366400, 1330848000, 1330243200, 1328947200, 
    1328515200, 1327996800, 1327219200, 1326528000, 1326268800, 
    1325577600, 1325318400, 1324972800, 1324540800, 1324281600, 
    1323590400, 1322899200, 1322294400, 1321862400, 1320562800, 
    1319958000, 1319353200, 1318748400, 1317538800, 1316847600, 
    1316329200, 1315638000, 1314514800, 1313996400), class = c("POSIXct", 
    "POSIXt"), tzone = ""), season = structure(c(2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("2010/2011", 
    "2011/2012"), class = "factor"), points = c(1, 3, 1, 1, 0, 
    0, 0, 3, 1, 3, 0, 1, 3, 3, 1, 3, 1, 3, 0, 3, 3, 3, 3, 3, 
    3, 1, 3, 3, 3, 3, 0, 0), GD = c(0L, 2L, 0L, 0L, -1L, -2L, 
    -3L, 5L, 0L, 2L, -1L, 0L, 2L, 1L, 0L, 2L, 0L, 1L, -1L, 3L, 
    2L, 2L, 2L, 2L, 1L, 0L, 1L, 1L, 4L, 2L, -4L, -3L), cumpts = c(1, 
    4, 5, 6, 6, 6, 6, 9, 10, 13, 13, 14, 17, 20, 21, 24, 25, 
    28, 28, 31, 34, 37, 40, 43, 46, 47, 50, 53, 56, 59, 59, 59
    )), .Names = c("team", "venue", "result", "GF", "GA", "gameDate", 
"season", "points", "GD", "cumpts"), row.names = c(NA, -32L), class = "data.frame") 
```

然后我在马刺数据框上有这个代码来计算在特定游戏长度中得分的分数（这里是 5）

```
gameLength <- 5
seasonLength <- nrow(spurs)
cumPoints <- c()
cumPoints[1] <- spurs[gameLength,]$cumpts
for (i in gameLength+1:seasonLength) {
cumPoints[i-(gameLength-1)] <- ((spurs[i,]$cumpts)- 
 (spurs[i-gameLength,]$cumpts))
}
cumPoints <- cumPoints[!is.na(cumPoints)] # not sure why throws up NAs 
```

这会产生正确的输出

```
 [1]  6  5  2  4  4  7  7  8  8 10  8 11 11 11  8 10 10 12 12 15 15
[22] 13 13 13 13 13 12  9 
```

但我需要能够使用包含数据框中每个赛季和球队的数据的列来转换 allData。

我假设我应该以某种方式使用 ddply ，除非有更好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:19:54.293

要复制您的输出：

```
library(zoo)
rollapply(spurs$GD, gamelength, sum) 
```

如果你有 allData 看起来像马刺 data.frame ......

```
rollsum <- function(df, gamelen=gamelength) {
  require(zoo)
  out <- rollapply(df$points, gamelen, sum)

  return(out)
}

ddply(allData, .(team), rollsum) 
```

# jakarta-ee - 如何在 Java EE 环境中实现请求限制？

> ID：10094228
> 
> 赞同：3
> 
> 时间：2012-04-10T18:19:00.937
> 
> 标签：jakarta-ee, request, jms, weblogic-10.x, throttling

我们的一个应用程序通过消息队列接受请求，并为每个请求拨打电话。

拨打电话涉及 2 个电话系统。一个系统对可以在一秒钟内发起的呼叫数量有限制，但对并行呼叫没有限制，而其他系统对可以在任何时间点处于活动状态的并发呼叫有限制。

后面的需求在 Java EE 层中通过具有预定义 MDB 数量不超过限制的消息队列来处理。

谁能建议我如何在 Java EE 层（weblogic 10.3）中实现第一个限制（调用启动）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:57:53.663

我想出的唯一想法是让 MDB 的数量等于启动限制，并让它们在呼叫启动后休眠 1 秒钟，然后再收到下一条消息。

队列提供程序中可能有一种方法可以通过 JMS 获得。您必须检查文档。

# tridion - TCMEventLog.NTEventLog.1 出现错误：ReportEvent 失败

> ID：10094234
> 
> 赞同：7
> 
> 时间：2012-04-10T18:19:22.487
> 
> 标签：tridion

我正在使用 Tridion 2009 SP1。我要做的是在组件完成某个工作流程后启动一个事件。直观地说，我尝试使用 OnProcessInstanceFinishPost 事件，但是，只有当用户（管理员）明确单击“完成过程”时才会触发此事件；当所有活动完成后流程正常完成并且“到达‘停止’符号结束标记（如 Visio 图表中所示）时，不会触发此事件。

所以我改用了 OnActivityInstanceFinishPost 事件。问题是在 OnActivityInstanceFinishPost 事件中，我正在获取记录器并尝试记录一条简单消息，例如“Hello World”，但事件查看器始终显示错误：“TCMEventLog.NTEventLog.1 中发生错误：ReportEvent 失败。” 并且该事件不会被执行。

请注意，在 OnProcessInstanceFinishPost 事件中，完全相同的代码可以正常工作。

我已经检查过这是否是身份用户的权限问题，但该用户是 Tridion 中的管理员，所以这不可能。我检查了 SDLTridionworld 论坛，但没有运气，当然，我已将代码简化为一个日志记录语句，以确保它不在我的代码中。

这是代码：

```
public void OnActivityInstanceFinishPost(ActivityInstance ActivityInstance, string finishMessage, string nextActivity, string dynamicAssignee)
{
    TDSE tdse = new TDSEClass() as TDSE;
    tdse.Impersonate(_identity);
    tdse.Initialize();

    Logging logger = tdse.GetLogging() as Logging;

    logger.LogEvent("Entered event OnActivityInstanceFinishPost. nextActivity="+nextActivity, EnumSeverity.severityInfo, EnumEventCategory.EVENT_CATEGORY_EVENT_SYSTEM);
} 
```

这是完整的错误：

```
Log Name:      Tridion Content Manager
Source:        Kernel
Date:          4/9/2012 10:14:07 PM
Event ID:      100
Task Category: Logging
Level:         Error
Keywords:      Classic
User:          SYSTEM
Computer:      xxxxxxxxxxxxxx
Description:
An error occured in TCMEventLog.NTEventLog.1:
ReportEvent failed.
Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Kernel" />
    <EventID Qualifiers="49152">100</EventID>
    <Level>2</Level>
    <Task>9</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-04-10T03:14:07.000Z" />
    <EventRecordID>546126</EventRecordID>
    <Channel>Tridion Content Manager</Channel>
    <Computer>xxxxxxxxxxxxxxxxxxxxxxxxx</Computer>
    <Security UserID="S-1-5-18" />
  </System>
  <EventData>
    <Data>An error occured in TCMEventLog.NTEventLog.1: ReportEvent failed.</Data>
  </EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:30:20.347

该错误表明 Tridion 未能写入日志消息。我假设您已经有一些证据表明这是由工作流活动完成触发的。

我不知道是什么导致了错误，但是由于日志记录失败，通常与权限有关。

这将取决于您的工作流程，哪个用户实际触发了 OnActivityInstanceFinishPost 事件。如果活动由用户手动完成，则该用户将是执行该事件的 Windows 身份（或者如果配置了 Tridion 模拟，则为模拟用户）。如果它是一个自动活动，那么它将由为工作流代理服务配置的身份执行。我建议检查每个帐户是否能够正确登录。

# ruby-on-rails - 在 Windows 上启动精简集群

> ID：10094239
> 
> 赞同：0
> 
> 时间：2012-04-10T18:19:46.060
> 
> 标签：ruby-on-rails, ruby, apache, bundler, thin

我的机器上有一个 ruby​​ 应用程序，我正在尝试使用批处理脚本进行部署。我已经把所有事情都交给服务器处理了。这就是我正在使用的：

```
cd to/path/of/app
thin start -p 3001 
```

这行得通。

```
cd to/path/of/app
thin start --servers 3 
```

根据[http://code.macournoyer.com/thin/usage/](http://code.macournoyer.com/thin/usage/)，不起作用。我收到一个错误“lib/thin/runner.rb:142:in 'parse!': invalid option: --servers”

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:05:07.697

在`lib/thin/runner.rb`它的第 88 行上说`# Daemonizing not supported on Windows`:(

# php - 使用白名单对用户输入进行消毒

> ID：10094241
> 
> 赞同：2
> 
> 时间：2012-04-10T18:19:51.520
> 
> 标签：php, sanitization, whitelist

我有这段代码可以清理名为“用户名”的变量上的用户输入：

```
$username_clean = preg_replace( "/[^a-zA-Z0-9_]/", "", $_POST['username'] );

if (!strlen($username_clean)){

die("username is blank!"); 
```

我想对这个页面上的每个输入执行相同的过程，但我有大约 12 个不同的输入，因为它是一个注册表单。有没有一种更简单的方法来清理和检查每个输入，而不是在每个输入上应用 preg_replace() 和 if 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:24:54.657

如果要清理 中的所有元素`$_POST`，则可以创建一个清理函数并将其应用于所有元素[`array_map`](http://php.net/manual/en/function.array-map.php)：

```
$post_clean = array_map("sanitization_function", $_POST); 
```

然后你会通过`$post_clean`而不是访问你的变量`$_POST`。

它看起来像：

```
function sanitize($dirty){ 
    return preg_replace( "/[^a-zA-Z0-9_]/", "", $dirty ); 
}

$cPOST = array_map("sanitize", $_POST);

if (!strlen($cPOST['username'])){ 
    die("username is blank!"); 
} 
```

如果您只想清理`$_POST`元素的子集，您可以执行以下操作：

```
$cPOST = array();
$sanitize_keys = array('username','someotherkeytosanitize');
foreach($_POST as $k=>$v)
{
    if(in_array($k, $sanitize_keys))
    {
        $cPOST[$k] = preg_replace( "/[^a-zA-Z0-9_]/", "", $v);
    }
    else
    {
        $cPOST[$k] = $v;
    }
} 
```

* * *

尝试这个：

```
$cPOST = array();
$sanitize_keys = array('username','someotherkeytosanitize');
for($_POST as $k=>$v)
{
    if(in_array($k, $sanitize_keys))
    {
        $cPOST[$k] = preg_replace( "/[^a-zA-Z0-9_]/", "", $v);
        if(strlen($cPOST[$k]) == 0){ 
            die("%s is blank", $k);
        }
    }
    else
    {
        $cPOST[$k] = $v;
    }
}
# At this point, the variables in $cPOST are the same as $_POST, unless you 
# specified they be sanitized (by including them in the $sanitize_keys array.
# Also, if you get here, you know that the entries $cPOST that correspond
# to the keys in $sanitize_keys were not blank after sanitization. 
```

只需确保将 $sanitize_keys 更改为您想要清理的任何变量（或 $_POST 键）的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:24:26.390

如果正则表达式和失败测试相同，则可以编写一个函数：

```
function validate($input, $input_name) {
  $clean_input = preg_replace( "/[^a-zA-Z0-9_]/", "", $input );
  if (!strlen($username_clean)){
    die("$input_name is blank!");
  }
  return $clean_input;
}
validate($_POST['username'], "Username"); 
```

# forms - CakePHP 取消按钮不触发

> ID：10094246
> 
> 赞同：0
> 
> 时间：2012-04-10T18:20:33.613
> 
> 标签：forms, controller, cakephp-2.0

在我看来，我有一个带有提交和取消按钮的表单。这两个操作都将我返回到我的索引页面。唯一的区别是 Submit 执行普通的数据库提交并显示消息“您的发票已更新。”，而 Cancel 应该取消更新并显示“更新已取消。”。这是控制器代码：

```
 public function edit($id = null) {
    $this->Invoice->id = $id;
    $this->set('invoice', $this->Invoice->read(null, $id));
    //Check for $_GET
    if ($this->request->is('get')) {
        $this->request->data = $this->Invoice->read();
    } else {
        // Bail if cancel button pressed
        if (isset($this->params['form']['cancel'])) {
            $this->Session->setFlash('Update canceled.');
            $this->redirect(array('action' => 'index'));
        } else if ($this->Invoice->save($this->request->data)) {
            $this->Session->setFlash('Your Invoice has been updated.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to update your Invoice.');
        }
    }
} 
```

这是视图：

```
<fieldset>
<legend>Enter New Values</legend>
<li><?php echo $this->Form->input('purchaseOrderNumber'); ?></li>
<li><?php echo $this->Form->input('siteAddress'); ?></li>
<li><?php echo $this->Form->input('siteCity'); ?></li>
<li><?php echo $this->Form->input('siteState'); ?></li>
<?php
echo $this->Form->button('Submit Form', array('type' => 'submit'));
echo $this->Form->submit('Cancel', array('div' => false, 'name' => 'cancel'));
?> 
```

但是，无论按下哪个按钮，它总是返回第一条消息。它还执行数据库提交。

我尝试将 XDebug 与 Netbeans 一起使用，但未成功，但这是另一个时代的故事。通常我的错误对其他人来说是显而易见的。所以，我希望有人能让我重回正轨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:21:13.913

我只是在解决同样的问题，我找到了一个解决方案，无需简单地链接回 index.html 即可。在 Wylie 的 debug 建议下`$this->params`，我注意到没有创建“form”数组。但是，有一个名为“data”的数组，其中定义了“cancel”参数。因此，在您正在检查按下哪个按钮的控制器中，而不是

```
if (isset($this->params['form']['cancel'])) { 
```

采用

```
if (isset($this->params['data']['cancel'])) { 
```

你会得到一个有效的取消按钮。

# svn - 在 Cornerstone 中取消删除文件

> ID：10094247
> 
> 赞同：0
> 
> 时间：2012-04-10T18:20:34.217
> 
> 标签：svn, delete-file, revisions, cornerstone

所以，我做了似乎是一个很大的错误。我不小心从我的存储库中删除了 Cornerstone 中一个非常重要的文件，并且无法取回它。

我现在已经点击了 Revert 20-30 次，但是自从我今天所做的第一次更改（即文件被删除时）以来，它似乎不会恢复更改。我怎样才能回到以前的修订版？

我真的很感激帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:52:49.913

“还原”仅还原尚未签入的本地更改。如果要回滚到以前的修订，[`svn update -r1234`](http://www.linxit.de/svnbook/en/1.0/re28.html)请与要返回的修订号一起使用。

# c# - 订阅用户在网页上等待确认的时间太长...解决方案？

> ID：10094248
> 
> 赞同：2
> 
> 时间：2012-04-10T18:20:37.490
> 
> 标签：c#, .net

在我们用 c# 编写的 .NET 3.5 网站上，用户单击我们网页上的提交，他们通过电子邮件地址订阅我们的报告。不幸的是，此操作大约需要 5 分钟，用户必须坐下来等待确认。我想做的是更改它，以便当他们单击提交时，他们会弹出一个弹出窗口，说他们将在订阅完成时收到电子邮件通知，同时我会将订阅操作排队到服务器上的其他位置，以便它不存在于网络代码中。你能给我一些方法来做到这一点吗？基本思想是我想分成两条不同的执行线，一条允许他们仍然浏览我们的网站，另一条将订阅它们。我正在考虑拆分为一个新线程，但我认为 Web 代码仍然必须等待该线程完成才能执行其他任何操作。我正在寻找想法，最好是可以在同一台服务器上运行的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:24:42.363

有很多选择，但基本方法是将站点与提供者分离。相反，您将写出一条记录说“用户 X 正在等待订阅”，然后一个单独的进程将读取该记录并执行实际订阅，同时将该记录标记为“进行中”。一旦该过程完成，记录将再次使用已完成的信息进行更新。

您可以使用数据库、消息队列或其他方法来实现这一点。但从根本上说，您的站点将只负责创建记录并检查其状态——与提供者的实际交互将单独处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:23:53.580

如果您有需要这么长时间的事情，并且您想实现并确保行动通过，那么您最好的选择是将其排队。

基本上，当他们提交请求时，将其存储在数据库表中并让他们继续前进。同时，有另一个进程监视该表以处理请求。当他们进来时，只需让第二个过程将请求发送到需要 5 分钟才能完成的部分。

完成后，向他们发送“欢迎使用某某电子邮件列表”消息。这将作为他们对它有效的确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:25:53.953

杰夫阿特伍德不久前在博客上发表了一个相关主题。由于您使用的是 c#，因此我假设您使用的是 ASP.NET，并且可以利用缓存机制来启动定期工作者作业。根据用户的请求，您可以将订阅的详细信息保存到某些数据存储中。在该作业中，您可以检查队列以确定需要创建哪些订阅，然后执行它们。

[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

# iphone - 如何在 tabBarController 中使用两个相同的 ViewController.xib

> ID：10094249
> 
> 赞同：0
> 
> 时间：2012-04-10T18:20:37.967
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我使用 tabBarController 来显示照片，每种照片都显示在每个选项卡中，所以我使用一个 ViewController.xib ，以及如何在每个选项卡中显示不同的内容（导航项和 ImageView）？

我的问题是：下一步在哪里以及如何编写代码，是 -(void)tabBarController 还是 PhotoController.m 中的代码？——</p>

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
UIViewController *photoController1 = [[[PhotoController alloc] initWithNibName:@"PhotoController" bundle:nil] autorelease];
UIViewController *photoController2 = [[[PhotoController alloc] initWithNibName:@"PhotoController" bundle:nil] autorelease];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects: 
                                         ,photoController1
                                         ,photoController2
                                         ,nil];
self.tabBarController.delegate=self;
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
}
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{       
    switch (tabBarController.selectedIndex) 
{
    case 4:     
        //how to write code;
        break;
    case 5:
        //how to write code;
    default:
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:44:27.557

您可以在 PhotoController 中创建一些 prepare 方法，并将其公开，这样您就可以从 tabBarController didSelectViewController 中调用它，因此代码可能如下所示：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {       
    switch (tabBarController.selectedIndex)  {
    case 4:     
            //configure options for photoController
            [viewController prepareForDisplayWithOptions:options];
        break;
    case 5:
            //configure options for photoController2
            [viewController prepareForDisplayWithOptions:options2];
        break;
    default:
        break;
    } 
```

}

# javascript - Javascript字符串数组转换为实际数组

> ID：10094250
> 
> 赞同：0
> 
> 时间：2012-04-10T18:20:39.603
> 
> 标签：javascript, arrays, jquery-textext

好的。所以标题听起来令人困惑，但这可能是描述它的最佳方式。

我正在使用[TextExt jQuery 插件](http://textextjs.com/)在表单中创建标签列表。但是，插件在提交时会在字符串中创建一个数组。例如。`"["this","that","other"]"`.

如何将其转换为实际数组？`["this","that","other"]`

提示非常简单的答案，我完全忽略了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:22:45.967

由于您使用的是 jQuery，因此您可以像这样通过[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/%20%22parseJSON)传递它：

```
var array = jQuery.parseJSON('["this","that","other"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:24:04.540

看起来像[JSON](http://json.org/)。因此，当您已经包含 jQuery 时，请使用`JSON.parse()`, 或更好。[`jQuery.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)

# c# - 在处理类时更新 asp:Label

> ID：10094257
> 
> 赞同：0
> 
> 时间：2012-04-10T18:20:59.650
> 
> 标签：c#, asp.net, multithreading, client-side

我有以下 aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="index.aspx.cs" Inherits="index" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label ID="lblStatus" runat="server" Text="Label">
        </asp:Label><asp:Button ID="btnRun" runat="server" Text="Button" onclick="btnRun_Click" />
    </div>
    </form>
</body>
</html> 
```

代码隐藏是：

```
public partial class index : System.Web.UI.Page
{
    protected void btnRun_Click(object sender, EventArgs e)
    {
        CP CPObj = new CP();
        lblStatus.Text = "Starting process..";

        CPObj.run();
        lblStatus.Text = "Process done.";
    }
} 
```

班级需要做一些工作（大约一分钟）。当我单击按钮时，标签不会更改，只有在班级完成作业后，标签才会更改为“处理完成。”。

我已经寻找了很长时间的解决方案，但找不到明确而直接的答案。

我试图将类作为线程运行并得到相同的结果。

```
public partial class index : System.Web.UI.Page
{
    protected void btnRun_Click(object sender, EventArgs e)
    {
        CP CPObj = new CP();
        Thread oThread = new Thread(new ThreadStart(CPObj.run));

        lblStatus.Text = "Starting process..";

        oThread.Start();

        while (!oThread.IsAlive) ;
        while (oThread.IsAlive)
        {
            Thread.Sleep(1000);
        }

        lblStatus.Text = "Process done.";
    }
} 
```

使用 JavaScript 似乎有问题，因为我已经有一个 onClick 调用（不确定我在这里是否正确）。

我真的很感激回复。

谢谢！纳达夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:29:29.073

网页不像传统的网页表单。

您不能将标签设置为某个值，然后在同一个回调中将该值更改为其他值并同时出现。

你需要做的是使用一些ajax。简单的方法是添加一个更新面板并走这条路。基本上，您可以通过 javascript 将标签设置为“正在启动进程...”，然后在回调完成后让面板更改标签。

或者，您*可以*不使用 ajax 来实现；但是您再次通过一些 javascript 设置标签。然后让你的回调例程重写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:27:09.787

我认为您需要阅读有关页面生命周期的信息。很高兴您正在更新您的标签，但由于这是网络，您的数据在所有代码运行之前不会返回浏览器。因此，您无法更新尚未发送到浏览器的页面上尚不存在的标签；）

我认为 JS 是您的解决方案（不是该领域的专家），或者可能是一些将查询进程运行时的 ajax，以及在另一个线程上运行的进程？

# java - 子类 FilterInputStream 过滤 ByteArrayInputStream 中的数字序列

> ID：10094264
> 
> 赞同：0
> 
> 时间：2012-04-10T18:21:46.740
> 
> 标签：java, io, bytearrayinputstream

我想创建一个子类`FilterInputStream`，它将重载`FilterInputStream`. 它将过滤输入流，这是一个由用户给出的数字序列（我们不知道这个序列有多长），其中每个连续给出的数字将只写入*一次*。

例如，给定输入

```
1,2,3,3,3,4,5,5,6,7,10,10,15,16,16 
```

输出应该是

```
1,2,3,4,5,6,7,10,15,16 
```

你能告诉我哪些类应该重载，哪些不应该重载吗？我不知道我需要实例变量还是只需要一个构造函数？我还必须使用`ByteArryInputStream`--not`Reader`或`Writer`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:24:41.887

我会使用扫描仪来读取每个数字。但是，如果它是家庭作业，您可能需要自己解析这些数字。

您应该从最简单的程序开始，例如读取一些数字并打印出来

当你测试了这个工作时，通过检查连续的数字使它变得更复杂。

> 你能告诉我哪些类应该重载，哪些不应该重载吗？

我会从一个不覆盖任何东西或创建任何自定义对象或定义任何新构造函数的程序开始。即尽可能简单。

当这可行时，您可以查看子类 FilterInputStream，但这更复杂，因此除非您可以使简单的示例正常工作，否则开始此操作是没有意义的。

# wpf - WPF MVVM 从另一个视图打开一个视图

> ID：10094265
> 
> 赞同：2
> 
> 时间：2012-04-10T18:21:47.263
> 
> 标签：wpf, mvvm

我刚刚开始使用 WPF + MVVM。我想我已经掌握了基础知识。但是，我有一个问题（希望不是一个愚蠢的问题）。

我有一个显示客户列表的视图。我想编辑其中一位客户。如何从 List ViewModel 加载带有单独 ViewModel 的编辑视图。

我确信这是一个相当标准的场景，答案相当简单，但我花了很多时间在谷歌上搜索并没有提出任何具体的问题。有人可以指出一个简单的例子吗？

如果我错了并且不简单，那么做这种事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:06:44.183

执行此操作的一种常见方法（不仅在 MVVM 中，而且很好用）是让您的列表 VM 访问所谓的服务。该服务然后实现创建和显示编辑器（它可能使用另一个服务）。

例子：

```
/// Always use an interface for the service: it will make it a breeze
/// to test your VM as it decouples it from the actual service implmentation(s)
interface ICustomerEditorService
{
  /// Do whatever needed to get the user to edit the Customer passed in,
  /// and return the updated one or null if nothing changed.
  /// Customer here is likeyly your customer model, or whatever is neede
  /// to represent the editable data
  Customer EditCustomer( Customer toEdit );
}

class ListViewModel
{
  /// service gets passed to constructor, you can use dependency injection
  /// like MEF to get this handled easily;
  /// when testing, pass a mock here
  public ListViewModel( ...., ICustomerEditorService editorService )
  {
    ....
  }

  private void OnEditButtonClicked()
  {
    var editedCustomer = editorService.EditCustomer( GetSelectedCustomer() );
    //do stuff with editedCustomer
  }
}

/// A real implementation
class CustomerEditorService
{
  public Customer EditCustomer( Customer toEdit )
  {
    var vm = new CustomerEditorViewModel( toEdit );
    var view = new CustomerEditorView( vm );
    if( myWindowManager.ShowDialog( view ) == Cancel )
      return null;
    return vm.Customer;
  } 
} 
```

# forms - Symfony 1.4 (FORMS) 是否可以通过 sfWidgetFormInputText 设置值属性

> ID：10094266
> 
> 赞同：0
> 
> 时间：2012-04-10T18:21:47.837
> 
> 标签：forms, symfony1, input, symfony-1.4

我想预定义 TEXT-INPUT 字段 - 属性 VALUE。**是否可以通过设置**方法中其他选项的 sfWidgetFormInputText 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:27:52.517

[阅读文档](http://www.symfony-project.org/forms/1_4/en/01-Form-Creation#chapter_01_sub_defining_default_values_for_fields)。

```
class ContactForm extends BaseForm
{
  public function configure()
  {
    // ...

    $this->setDefault('email', 'Your Email Here');

    $this->setDefaults(array('email' => 'Your Email Here', 'name' => 'Your Name Here'));
  }
} 
```

# django - Django 表单日期验证在本地化时失败

> ID：10094278
> 
> 赞同：0
> 
> 时间：2012-04-10T18:22:24.780
> 
> 标签：django, forms, validation

嗨，我有一个表格，例如：

```
class GraphForm(forms.Form):
    ...
    startdate = forms.DateField(
                label=ugettext_lazy('Start Date'),
                widget=forms.TextInput(attrs={"placeholder": 'YYYY-MM-DD'}),
                )
    enddate = forms.DateField(
                label=ugettext_lazy('End Date'),
                widget=forms.TextInput(attrs={"placeholder": 'YYYY-MM-DD'}),
                )
    ... 
```

问题是我正在使用 Django 的国际化和本地化与国际网站合作。该表单在英语中可以正常工作，但如果将语言切换为西班牙语，则由于格式原因，日期字段将无法验证。无论语言选择如何，有什么方法可以绕过本地化并以相同的格式进行验证？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:56:42.133

OK, so the answer is surprisingly simple:

```
date_format = '%Y-%m-%d' 

class GraphForm(forms.Form):
    ...
    startdate = forms.DateField(
            label=ugettext_lazy('Start Date'),
            widget=forms.TextInput(attrs={"placeholder": 'YYYY-MM-DD'}),
            input_formats=[date_format,],
            )
    enddate = forms.DateField(
            label=ugettext_lazy('End Date'),
            widget=forms.TextInput(attrs={"placeholder": 'YYYY-MM-DD'}),
            input_formats=[date_format,],
            )
    ... 
```

Hope this helps someone else.

# javascript - Bing Maps LoadMap() 函数缩放参数

> ID：10094281
> 
> 赞同：0
> 
> 时间：2012-04-10T18:22:36.263
> 
> 标签：javascript, bing-maps

我正在尝试通过在 Find() 函数中传递街道地址来实现 Bing 地图。缩放参数在 LoadMap() 函数中不起作用。这是我的代码：

```
var map;

function GetMap() {
    var street = "Street address";
    var city = "City";
    var state = "State";
    var address = "";
    var zoom = 10;
    if (street != "") {
        address += street;
        zoom = 19;
    }
    if (city != "") {
        if (address != "")
            address += ", ";
        address += city;
    }
    if (state != "") {
        if (address != "")
            address += ", ";
        address += state;
    }

    map = new VEMap('bingMap');
    map.LoadMap(null, zoom, VEMapStyle.Hybrid, false, VEMapMode.Mode2D, true, 1);
    map.Find(null, address, null, null, null, null, null, null, null, null, FindCallback);
}

function FindCallback(layer, resultsArray) {
    var pin = new VEShape(VEShapeType.Pushpin, map.GetCenter());
    pin.SetCustomIcon("<img src='image url' width='30' />");
    map.AddShape(pin);
} 
```

任何想法为什么这不会放大到 19？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:55:37.243

代替 `map.LoadMap(null,`

尝试

`map.LoadMap(map.GetCenter()`或者`map.LoadMap(new VELatLong(45,90)`

或使用

`map.SetCenterAndZoom((new VELatLong(lat, lng), zoom);`

# assembly - 内部搬迁未解决

> ID：10094282
> 
> 赞同：18
> 
> 时间：2012-04-10T18:22:36.387
> 
> 标签：assembly, arm, gnu-assembler

我最近开始为 arm 内核进行汇编程序编程。我的第一个小演示，只有 .text 部分，运行没有任何问题。

作为一个逻辑扩展，我想将汇编代码构造成通常的部分：.text、.data、.bss。

所以我写了以下简单的程序：

```
 .globl _start

 .section .text

 _start:
     b   main
     b   .
     b   .
     b   .
     b   .
     b   .
     b   .
     b   .  

 main:
    ldr r0, x
    nop

 .section .data

 x:  .word  0xf0f0f0f0

 .end 
```

但

```
 /opt/arm/bin/arm-as -ggdb -mcpu=arm7tdmi demo.s -o demo.o 
```

退出并出现错误

```
 prog.s: Assembler messages:
 prog.s:17: Error: internal_relocation (type: OFFSET_IMM) not fixed up
 make: *** [prog.o] Error 1 
```

我不知道为什么汇编器抱怨重定位，因为我认为这是链接器的任务。我可以想象我必须告诉汇编器我的 .data 部分不在汇编阶段的最终内存位置，但我找不到任何相关的东西。

虽然我找到了一种正确组装代码的方法，但通过替换

```
 .section .data 
```

经过

```
 .org . 
```

这不是一个令人满意的解决方案。尤其是考虑到气体文档突出了本节的意义。

也许你们中的某个专家可以帮助我获得一些智慧

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T09:46:10.230

似乎唯一可以做到的方法是获取变量的地址并从该地址加载一个值。

```
ldr r1,=x    ; get address of x
ldr r0,[r1]  ; load from that address 
```

在某种程度上，这也是有道理的。毕竟，如果 x 的地址（链接后）对于 PC 相对访问来说太远了怎么办？由于编译器（不进行链接）不知道数据部分与文本部分的距离有多远，所以它会拒绝编译该代码以防万一它无法访问。

通过使用这种间接访问变量的方式，可以保证该变量是可访问的（或者至少编译器可以确定该变量是否可访问）。

代码改编自[http://www.zap.org.au/elec2041-cdrom/examples/intro/pseudo.s](http://www.zap.org.au/elec2041-cdrom/examples/intro/pseudo.s)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-15T15:09:36.650

我不打算将其作为例外答案，但它确实提供了更多洞察力，并且还为仅使用一条 ldr 指令提供了一种不方便的解决方案。

当使用这两个阶段的 ldr 方法时，汇编器实际上在您的代码之后添加了另外 4 个字节的数据！甚至在 .text 部分，这 4 个字节是 .data 变量的实际地址。然后第一条 ldr 指令实际指向该地址，然后您使用下一条 ldr 来使用实际地址。正如 tangrs 所讨论的那样，这个双指针可能是一种确保您的变量/常量可访问的方法，尤其是在 .data 部分距离更远的情况下（我上次运行时距离为 64k）。

查看一些正确方法的示例代码：

```
.text
.global _start
_start:
    ldr r0, =x
    ldr r0, [r0]
    mov r7, #1
    swi #0
    nop
.data
    x: .word 0xf0f0f0f0 
```

汇编器实际上产生了这个：

```
00010074 <_start>:
   10074:   e59f000c    ldr r0, [pc, #12]   ; 10088 <_start+0x14>
   10078:   e5900000    ldr r0, [r0]
   1007c:   e3a07001    mov r7, #1
   10080:   ef000000    svc 0x00000000
   10084:   e1a00000    nop         ; (mov r0, r0)
   10088:   0002008c    andeq   r0, r2, ip, lsl #1

Disassembly of section .data:

0002008c <x>:
   2008c:   f0f0f0f0            ; <UNDEFINED> instruction: 0xf0f0f0f0 
```

第一个 ldr 指向程序计数器之后的 12 个字节（考虑到当前指令 + 8 个以上）。这指向地址 0x10088（如 objdump 所述），它指向 andeq 指令（在此上下文中不是真正的指令）。它实际上是一个地址，0x0002008c，它指向我们在变量 x 的 .data 部分中的正确地址。现在我们在 r0 中有了变量的地址，我们可以在该地址上使用 ldr 来获取实际值。值得注意的是，尽管这两条 ldr 指令的源文件中的第二个操作数看起来非常不同，但机器编码是针对相同的 ldr 编码的；它们都是 LDR 立即数（虽然第一个 ldr 变体也被认为是 LDR 字面量，但它只是 LDR 立即数，将“Rn”硬编码为“1111”，无论如何这只是 pc 寄存器）。

考虑到所有这些，虽然不方便，但我们可以想办法只使用一次 LDR 立即数（文字）形式。我们所要做的就是确保获得与我们的真实数据相对应的正确立即值（偏移量）。做起来比说的容易：

```
.text
.global _start
_start:
    ldr r0, [pc, #8]
    mov r7, #1
    swi #0
    nop
x:  .word 0xf0f0f0f0 
```

除了只需要使用一条 LDR 指令来获得相同的结果之外，此版本的源代码还有另一个细微差别：没有 .data 部分。这可以通过数据部分来完成，但它会将我们的数据放在更高的地址中，使我们的偏移量大得多，以至于我们可能不得不使用额外的指令来获得正确的偏移量。另一个注意事项是由于它位于 .text (rx) 部分中，默认情况下您不能在其上使用 str 。这是一个非常小的障碍，只需对 ld 使用 -N 选项，您的 .text 部分现在是 rwx。我敢肯定最后一个建议会激怒stackoverflow之神，来找我；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-15T14:56:45.757

这不适用于问题中的代码，但一般来说，此错误通常意味着您忘记定义要使用`ldr`指令加载的常量。

在应该可以正常编译的代码中，当项目在具有不同的汇编文件扩展名的不同工具链上编译时，通常会发生这种情况，因此`.include`指令可能包含错误的文件（如`file.asm.s`代替`file.asm`），从而导致缺少定义。

# php - php中中缀的前缀

> ID：10094283
> 
> 赞同：0
> 
> 时间：2012-04-10T18:22:40.570
> 
> 标签：php, javascript, parsing

我正在尝试在 PHP 中实现前缀以中缀。例如，输入应该是这样的：

```
prefix  * + 3 2 4
infix   ((3+2)*4) 
```

我想`(* + 3 2 4)`使用 PHP 或 JavaScript 将前缀表达式转换为中缀表达式`(((3+2)*4))`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:10:15.447

一个典型的面向对象的 AST 和解析器：

```
$prefix = '* + 3 2 4';
$parser = new InfixPrefixParser($prefix);
$node = $parser->parse();
echo $node, "\n"; # ((3 + 2) * 4)
echo ' = ', $node->evaluate(), "\n"; # 20 
```

解析器：

```
class InfixPrefixParser extends IteratorIterator
{
    public function __construct($prefix)
    {
        $tokens = new ArrayIterator(preg_split('/\s/', $prefix, 0, PREG_SPLIT_NO_EMPTY));
        parent::__construct($tokens);
    }

    /**
     * @return InfixNode
     */
    public function current()
    {
        $string = parent::current();
        parent::next();
        $operators = array('*' => 'Mult', '+' => 'Plus');
        $class = 'InfixNode' . (isset($operators[$string]) ? 'Operator' . $operators[$string] : 'Value');
        $node = new $class($string);
        if ($node instanceof InfixNodeOperator) {
            $node->setLeft($this->current());
            $node->setRight($this->current());
        }
        return $node;
    }

    public function __toString()
    {
        return (string)$this->parse();
    }

    public function parse()
    {
        $this->rewind();
        return $this->current();
    }
} 
```

AST 的对象模型

```
abstract class InfixNode
{
    abstract function evaluate();
}

abstract class InfixNodeOperator extends InfixNode
{
    private $operator;
    protected $left;
    protected $right;

    public function __construct($operator)
    {
        $this->operator = $operator;
    }

    public function setLeft(InfixNode $node)
    {
        $this->left = $node;
    }

    public function getLeft()
    {
        return $this->left;
    }

    public function setRight(InfixNode $node)
    {
        $this->right = $node;
    }

    public function getRight()
    {
        return $this->right;
    }

    public function __toString()
    {
        return sprintf('(%s %s %s)', $this->left, $this->operator, $this->right);
    }
}

class InfixNodeOperatorMult extends InfixNodeOperator
{
    public function evaluate()
    {
        return $this->left->evaluate() * $this->right->evaluate();
    }
}

class InfixNodeOperatorPlus extends InfixNodeOperator
{
    public function evaluate()
    {
        return $this->left->evaluate() + $this->right->evaluate();
    }
}

class InfixNodeValue extends InfixNode
{
    private $value;

    public function __construct($value)
    {
        $this->value = $value;
    }

    public function __toString()
    {
        return (string)$this->value;
    }

    public function evaluate()
    {
        return $this->value;
    }
} 
```

我对措辞不是很自信，因为节点与中缀并不完全相关，它们中的大部分也可以用作前缀或后缀，`__toString()`实际上只有函数与中缀相关。

* * *

（旧版本）一些 PHP 代码，使用一些递归解析函数和节点的对象模型。用法：

```
$prefix = '* + 3 2 4';

$tokens = new ArrayIterator(preg_split('/\s/', $prefix, 0, PREG_SPLIT_NO_EMPTY));

$parse = function() use ($tokens, &$parse) {
    $string = $tokens->current(); $tokens->next();
    $isOperator = in_array($string, array('*', '+'));
    $class = 'InfixNode' . ($isOperator ? 'Operator' : 'Value');
    $node = new $class($string);
    if ($node instanceof InfixNodeOperator) {
        $node->setLeft($parse());
        $node->setRight($parse());
    }
    return $node;
};

echo $parse(); # ((3 + 2) * 4) 
```

节点类：

```
class InfixNode {}

class InfixNodeOperator extends InfixNode
{
    private $operator;
    private $left;
    private $right;
    public function __construct($operator) {
        $this->operator = $operator;
    }
    public function setLeft(InfixNode $node) {
        $this->left = $node;
    }
    public function getLeft() {
        return $this->left;
    }
    public function setRight(InfixNode $node) {
        $this->right = $node;
    }
    public function getRight() {
        return $this->right;
    }
    public function __toString() {
        return sprintf('(%s %s %s)', $this->left, $this->operator, $this->right);
    }
}

class InfixNodeValue extends InfixNode
{
    private $value;
    public function __construct($value) {
        $this->value = $value;
    }
    public function __toString() {
        return (string) $this->value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:32:27.690

**这是前缀**到**后缀**表示法的基本算法（使用 a `stack`）：

```
 IF stack is not empty
     a. Temp -->pop the stack
     b. IF temp is a operator
       i. Write a opening parenthesis to output
       ii. prefixToInfix(stack)
       iii. Write temp to output
       iv. prefixToInfix(stack)
       v. Write a closing parenthesis to output
    c. ELSE IF temp is a space -->prefixToInfix(stack)
    d. ELSE
       i. Write temp to output
       ii. IF stack.top NOT EQUAL to space -->prefixToInfix(stack) 
```

试着研究一下，并测试它（用伟大的铅笔和纸方法）。

# python - Python中的内存是如何管理的

> ID：10094287
> 
> 赞同：-4
> 
> 时间：2012-04-10T18:23:04.447
> 
> 标签：python, memory-management, garbage-collection

垃圾收集是在 Python 中自己完成还是我们需要自己完成。我曾经认为 Python 过去常常自己管理各种内存问题，我们需要担心内存管理。

我问这个的原因是因为我在 Python 文档 [http://docs.python.org/library/gc.html中看到了 gc 模块](http://docs.python.org/library/gc.html)

如果内存管理是自己处理的，那么这个模块的意义何在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:26:09.267

引用问题中提供的链接：

> 由于收集器***补充***了 Python 中已经使用的引用计数，因此如果您确定您的程序不会创建引用循环，则可以禁用收集器。

看起来已经够清楚了。

# image - 缩放个人资料图片以适合

> ID：10094288
> 
> 赞同：1
> 
> 时间：2012-04-10T18:23:05.810
> 
> 标签：image, resize, scale, profile, pixels

我的徽标不适合 Facebook 上的个人资料图片。我已经更改了像素，但它仍然不起作用，试图让它更小，然后 Facebook 说它太小，试图让它更大，尝试了许多不同的尺寸，并且在照片编辑程序上花费了太多时间，但它仍然没有工作。即使我重新定位它并单击比例以适应徽标，它也会在正方形中被切断。有简单的解决方案吗？

# jquery - Jquery 切换滑块和切换文本

> ID：10094290
> 
> 赞同：0
> 
> 时间：2012-04-10T18:23:20.313
> 
> 标签：jquery

单击“显示”链接后，我试图向下滑动一个 div，并将该文本更改为“隐藏”，但它似乎效果不佳。

```
<div id="mobilemenu"><a id="#menutoggle" href="#">Show</a></div>
<div id="slider">Content to slide in under #mobilemenu</div> 
```

我尝试使用其他一些 StackOverflow 答案来解决，但我无法让它工作，所以不确定我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:26:56.753

更新你的锚。`#`从 id 中删除 并附加一个事件处理程序。

```
$("#menutoggle").click(function() {
    $("#slider").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:28:33.997

只是一个小例子，说明它如何使用您迄今为止提供的内容

```
$("#mobilemenu").click(function(e) {
    if ($("#slider").is(":visible")) {
        $("#slider").hide();
        $(this).children("a").text("Show");
    }
    else {
        $("#slider").show();
        $(this).children("a").text("Hide");
    };
}); 
```

或者如果你没有额外的工作，你可以简化它

```
$("#mobilemenu").click(function(e) { $("#slider").toggle(); }); 
```

我不使用你的链接开始，因为我想告诉你链接是不必要的，它的 id 错误但如果你想使用链接，你可以使用`$("#menutoggle")`代替`$("#mobilemenu")`

# html - 谷歌浏览器 HTML 表单选择

> ID：10094292
> 
> 赞同：0
> 
> 时间：2012-04-10T18:23:29.117
> 
> 标签：html, css, forms, google-chrome, html-select

我有一个带有选择框的 html 表单。

在 Firefox 中，选择框相对简单，即。白色背景，简单的边框等。

然而，当在谷歌浏览器中查看它时，它会应用自己的样式，使它们看起来很糟糕，添加圆边、灰色和白色渐变等。

有谁知道在查看 webkit 浏览器时如何从我的选择框中删除这种样式，所以它看起来和在 Firefox 中的一样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:40:50.090

可能最简单的解决方案是使用 CSS 重置。无论浏览器或操作系统如何，这都应该尽可能地规范样式。

这里有两个比较流行的尝试：

*   [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)
*   [http://yuilibrary.com/yui/docs/cssreset/](http://yuilibrary.com/yui/docs/cssreset/)

# java - 解析 JSON 对象时出现 NoClassDefFoundError JsonAutoDetect

> ID：10094300
> 
> 赞同：46
> 
> 时间：2012-04-10T18:24:06.250
> 
> 标签：java, eclipse, json, web-applications, noclassdeffounderror

我正在使用亚马逊的云服务开发一个 web 应用程序，我需要使用 JSON 对象。我的项目是如何设置的，我有一个 HTML 表单，用户将在其中填写他们的信息并提交。提交后，数据将被放入在线数据库，并向他们发送确认电子邮件。在我可以将数据提交到数据库之前，我需要将所有数据放入一个 JSON 对象中。我用 Java 完成的 servlet 如下所示：

```
public class FormHandling extends HttpServlet {
    //doGet function
    public void doGet (HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        // In this part of the code I take in the user data and build an HTML
        // page and return it to the user

        // Create String Mapping for User Data object
        Map<String,Object> userData = new HashMap<String,Object>();

        // Map the names into one struct. In the code below we are creating 
        // values for the nameStruct from the information the user has
        // submitted on the form.
        Map<String,String> nameStruct = new HashMap<String,String>();
        nameStruct.put("fName", request.getParameter("fname"));
        nameStruct.put("lName", request.getParameter("lname"));
        nameStruct.put("mInit", request.getParameter("minit"));

        // Map the three email's together (providing there are 3).
        // This is the same logic as the names.
        Map<String,String> emailStruct = new HashMap<String,String>();
        emailStruct.put("email", request.getParameter("email1"));
        emailStruct.put("email", request.getParameter("email2"));
        emailStruct.put("email", request.getParameter("email3"));

        // Put Name Hash Value Pair inside User Data Object
        userData.put("name", nameStruct);
        userData.put("emails", emailStruct);
        userData.put("age", 22);

        // Create the Json data from the userData
        createJson(userData);

        // Close writer
        out.close();
    }

    public File createJson(Map<String,Object> userData) 
        throws JsonGenerationException, JsonMappingException, IOException {
        File user = new File("user.json");

        // Create mapper object
        ObjectMapper mapper = new ObjectMapper();

        // Add the userData information to the json file
        mapper.writeValue(user, userData);
        return user;
    }
} 
```

当我使用此代码提交表单时，我收到以下错误消息：

> java.lang.NoClassDefFoundError: com/fasterxml/jackson/annotation/JsonAutoDetect com.fasterxml.jackson.databind.introspect.VisibilityChecker$Std.(VisibilityChecker.java:169) com.fasterxml.jackson.databind.ObjectMapper.(ObjectMapper.java :197) edu.tcnj.FormHandling.createJson(FormHandling.java:115) edu.tcnj.FormHandling.doGet(FormHandling.java:104) edu.tcnj.FormHandling.doPost(FormHandling.java:131) javax.servlet.http .HttpServlet.service(HttpServlet.java:641) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

现在我知道这个错误意味着它没有找到 Jackson 数据绑定库。我在 Eclipse 中进行开发，并且我知道构建路径有时会混乱，因此我还将库放在 WebContent\WEB-INF\lib 文件夹中。这解决了我之前遇到的问题。但是，这一次似乎并没有解决我的问题。我什至打开了 jar 文件以实际检查所需的库和类是否存在，它们确实存在。我已经尝试过搜索并寻找包含库的不同方法，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-18T23:33:22.053

对于未来来到这里的人来说，答案是：

如果您只复制了`jackson core`and `jackson databind`，则需要`jackson annotations`使用`ObjectMapper`.

例如，确保你有这样的东西：

```
[16:32:01]:/android-project/libs     master]$ ls -lAF
total 2112
-rw-r--r--@ 1 jeffamaphone  staff   33525 Jun 18 16:06 jackson-annotations-2.0.2.jar
-rw-r--r--@ 1 jeffamaphone  staff  193693 Jun  7 16:42 jackson-core-2.0.2.jar
-rw-r--r--@ 1 jeffamaphone  staff  847121 Jun 18 15:22 jackson-databind-2.0.2.jar 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-10-13T21:53:04.687

为 Maven 用户扩展@jeffamaphone 的出色答案

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.7.3</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.7.3</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-annotations</artifactId>
    <version>2.7.3</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-29T10:32:02.770

或者下面的 gradle 配置：

```
compile 'com.fasterxml.jackson.core:jackson-core:2.2.2'
compile 'com.fasterxml.jackson.core:jackson-databind:2.2.2'
compile 'com.fasterxml.jackson.core:jackson-annotations:2.2.2' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-19T11:59:15.680

如果您使用 maven 并拥有所有库，就像我的情况一样，这是一个简单`mvn clean`而`mvn install`固定的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-07T07:38:37.183

如果您在 Eclipse 中开发时正在/正在使用 tomcat 并收到此错误（可能是因为您按下了重新发布/清理），

右键单击项目->Maven->更新项目...

为我解决了这个问题。

此外，我确实还包括了来自 Johan Sjöberg 的依赖项

# c# - 从另一个类调用委托方法

> ID：10094302
> 
> 赞同：6
> 
> 时间：2012-04-10T18:24:09.447
> 
> 标签：c#, objective-c

我无法弄清楚如何在 C# 中跨类对委托方法调用进行编程。我来自 Objective-C 的世界，这可能让我感到困惑。在 Objective-C 中，我可以在子类中分配一个委托对象，作为父类（即，`childViewcontroller.delegate = self;`）。然后我可以使用以下方法在委托类中触发一个方法：

```
if([delegate respondsToSelector:@selector(methodName:)]) {
   [delegate methodName:parametersgohere];
} 
```

但是，我无法弄清楚如何在 C# 中执行此操作。我已经阅读了一些关于 C# 委托的一般信息（例如，[这里](http://www.dotnetscraps.com/dotnetscraps/post/explaining-delegates-in-c.aspx)），但我仍然卡住了。

有没有例子可以解释这一点？

**这是我的完整场景：** 我有 classA 实例化 classB 的实例。ClassB 触发一个方法（调用 Web 服务），在响应时，我想触发 classA 中的一个方法。

有任何“Hello World”类型的教程可以解释这个的基础知识吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:34:37.877

委托是指向方法的对象，无论是静态方法还是实例方法。因此，对于您的示例，您只需使用事件模型：

```
class Caller {
    public void Call() {
        new Callee().DoSomething(this.Callback); // Pass in a delegate of this instance
    }

    public void Callback() {
        Console.WriteLine("Callback called!");
    }
}

class Callee {
    public void DoSomething(Action callback) {
        // Do stuff
        callback(); // Call the callback
    }
}

...

new Caller().Call(); // Callback called! 
```

实例将`Caller`委托传递给`Callee`实例的`DoSomething`方法，该方法又调用指向的方法，即实例的`Callback`方法`Caller`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T18:32:19.877

在 C# 中，我认为您正在寻找的东西称为事件。它们是一种语言功能，允许类实例以其他类实例可以订阅的方式公开公共委托。只允许暴露类引发事件。

在您的示例中：

```
public class ClassB {
    // Note the syntax at the end here- the "(s, e) => { }" 
    // assigns a no-op listener so that you don't have to 
    // check the event for null before raising it.
    public event EventHandler<MyEventArgs> MyEvent = (s, e) => { }

    public void DoMyWork() { 
        // Do whatever

        // Then notify listeners that the event was fired
        MyEvent(this, new MyEventArgs(myWorkResult));
    }
}

public class ClassA {
    public ClassA(ClassB worker) {
        // Attach to worker's event
        worker.MyEvent += MyEventHandler;

        // If you want to detach later, use
        // worker.MyEvent -= MyEventHandler;
    }

    void MyEventHandler(Object sender, MyEventArgs e) {
        // This will get fired when B's event is raised
    }
}

public class MyEventArgs : EventArgs {
    public String MyWorkResult { get; private set; }
    public MyEventArgs(String myWorkResult) { MyWorkResult = myWorkResult; }
} 
```

请注意，以上将是同步的。我的理解是Objective-C委托都是Actor模式，所以它们是异步的。要使上述异步，您需要深入研究线程（可能想要谷歌“C#线程池”）。

# apache - 配置由 3 个 Squid 代理服务器组成的代理阵列

> ID：10094309
> 
> 赞同：0
> 
> 时间：2012-04-10T18:24:34.983
> 
> 标签：apache, web, webserver, squid

我正在尝试使用 CentOS 配置和安装 3 个 squid 代理服务器。我在以下目录中编译并安装了三个单独的服务器：

“/usr/local/squid” “/usr/local/squid2” “/usr/local/squid3”

从这里我完全迷失了。我需要使用 squid 进行负载平衡，而且我只有一个 ip 地址（本地主机）。我也被分配了 3 个独立的端口。第一个 squid 服务器用作负载平衡器。然后它根据负载平衡规则将客户端请求转发到第二个和第三个 squid 服务器。如果没有缓存副本，则转发回源服务器。

第一个 squid 服务器应该使用 CARP 协议，“1/3”的客户端请求应该发送到第二个 squid 服务器，“2/3”应该发送到第三个 squid 服务器。

关于 squid.conf 文件的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:26:59.913

我会使用LVS：

```
ipvsadm -A -t x.x.x.x:3128 -s wlc
ipvsadm -a -t x.x.x.x:3128 -r localhost:3128
ipvsadm -a -t x.x.x.x:3128 -r localhost:3129
ipvsadm -a -t x.x.x.x:3128 -r localhost:3130 
```

xxxx 是您的本地 IP。

# c# - 如果 C# 满足条件，则将元素插入列表

> ID：10094313
> 
> 赞同：2
> 
> 时间：2012-04-10T18:24:45.657
> 
> 标签：c#, list

**如果没有这样的数字，如何在列表中间插入一些数字？**

在下面的示例中，我尝试插入数字 4

```
 List<int> list1 = new List<int>(){ 0, 1, 2, 3, 5, 6 };
        int must_enter = 4;
        if (!list1.Contains(must_enter))
        {
            list1.Add(must_enter);
        } 
```

因为结果编号将在列表末尾输入，但我希望它**在 3 (before 5) 之后**。

请注意，由于项目的具体情况，我不能使用排序列表，但列表中的所有数字都**保证**按升序排列（0、2、6、9、10，...）

**编辑：**我知道一个错误，这就是我所做的：

```
 List<int> list0 = new List<int>() { 1, 2, 3, 5, 6 };
        int must_enter = 7;
        if (!list0.Contains(must_enter))
        {
            if (must_enter < list0.Max())
            {
                int result = list0.FindIndex(item => item > must_enter || must_enter > list0.Max());
                list0.Insert(result, must_enter);
            }
            else
            {
                list0.Add(must_enter);
            }

        } 
```

edit2：无论如何，由于几个因素，我已经切换到 BinarySearch 方法。大家感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:35:34.697

你可以这样做：

```
int index = list1.BinarySearch(must_enter);
if (index < 0)
 list1.Insert(~index, must_enter); 
```

这样，您将保持列表以最佳性能排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:33:23.823

你可以做：

```
list1.Add(must_enter); 
```

然后排序列表：

```
list1 = list1.OrderBy(n => n).ToList(); 
```

结果将是：

```
0, 1, 2, 3, 4, 5, 6 
```

**编辑：**

或使用扩展方法：

```
static class Utility
{
     public static void InsertElement(this List<int> list, int n)
     {
         if(!list.Contains(n))
         {     
             for(int i = 0; i < list.Count; i++)
             {
                  if(list[i] > n)
                  {
                     list.Insert(i-1, n);
                     break;
                  }

                  if(i == list.Count - 1)
                     list.Add(n);
             }
         }
     }
} 
```

进而：

```
list1.InsertElement(must_enter); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:27:49.053

你正在寻找

```
list1.Insert(index, must_enter); 
```

在特定索引处插入元素，而不是在列表末尾。

您必须首先找到要插入的索引，这可以通过二分搜索轻松完成。从列表中间的值开始，并将其与要插入的数字进行比较。如果更大，则搜索列表的下半部分，如果更大，则搜索列表的上半部分。重复该过程，每次将列表分成两半，直到找到之前的项目小于您插入的项目并且之后的项目大于您插入的项目的位置。（编辑：当然，如果您的列表总是很小，那么从头开始遍历列表以找到正确的位置可能会更轻松！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:27:46.607

```
list1.Insert(4, 4) 
```

[**`List<T>.Insert Method`**](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)- 在指定索引处将元素插入到列表中。

**快速说明**- List 类型的 Insert 实例方法在许多情况下性能不佳。因为对于插入，列表必须调整以下元素。

这是我得到这个答案的原始帖子尝试一下可能会对您有所帮助：[Finding best position for element in list](https://stackoverflow.com/questions/748596/finding-best-position-for-element-in-list)

```
List<int> list = new List<int>{0,2,6,9,10};
for (int i = 0; i < list1.Count; i++)
{
   int index = list.BinarySearch(i);
   if( i < 0)
   {
    int insertIndex = ~index; 
    list.Insert(insertIndex, i);
   }
} 
```

仅针对操作需要的一个缺失元素

```
 int index = list.BinarySearch(4);
   if( index < 0)
   {
    int insertIndex = ~index; 
    list.Insert(insertIndex, 4);
   } 
```

或者

```
List<int> list1 = new List<int>() { 0,2,6,9,10 };
int must_enter = 4;

for (int i = 0; i < list1.Count; i++)
{
     if (!list1.Contains(i))
     {
         list1.Insert(i , i);
     }
} 
```

仅针对操作需要的一个元素

```
 if (!list1.Contains(4))
     {
         list1.Insert(4 , 4);
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T18:30:39.490

```
List<int> list1 = new List<int>() { 0, 1, 2, 3, 5, 6 };
int must_enter = 4;

for (int i = 0; i < list1.Count; i++)
{
     if (must_enter >= list1[i])
     {
         list1.Insert(i + 1, must_enter);
     }
} 
```

编辑：我喜欢 sarwar026，实现更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T18:31:03.727

```
 List<int> list1 = new List<int>(){ 0, 1, 2, 3, 5, 6 };
    int must_enter = 4;
    if (!list1.Contains(must_enter))
    {
        int result = list.FindIndex(item => item > must_enter);
        if(result!=-1)
            list1.Insert(result, must_enter);
        else  // must_enter is not found
        {
            if(must_enter > list.Max()) // must_enter > max value of list
                list1.Add(must_enter);
            else if(must_enter < list.Min())  // must_enter < min value of list
                list1.Insert(0, must_enter);
        }
    } 
```

首先，找到大于**must_enter** (4) 的数字的索引，然后将**must_enter**插入该位置

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-10T18:35:51.320

```
if (!list1.Contains(must_enter))
{
    SortedSet<int> sorted = new SortedSet<int>( list1 );
    sorted.Add( must_enter );
    list1 = sorted.ToList();
} 
```

# java - 如何在 Xpath 中获取节点值 - Java

> ID：10094318
> 
> 赞同：6
> 
> 时间：2012-04-10T18:25:40.560
> 
> 标签：java, xml, parsing, xpath, rss

我有一段 XML 看起来像这样：

```
<entry>
<id>tag:example.com,2005:Release/343597</id>
<published>2012-04-10T11:29:19Z</published>
<updated>2012-04-10T12:04:41Z</updated>
<link type="text/html" href="http://example.com/projects/example1" rel="alternate"/>
<title>example1</title>
</entry> 
```

我需要`http://example.com/projects/example1`从这个块中获取链接。我不知道该怎么做。要获得项目的标题，我使用以下代码：

```
String title1 = children.item(9).getFirstChild().getNodeValue(); 
```

`children`块的`getChildNodes()`对象在哪里`<entry> </entry>`。但是当我尝试以类似方式`NullPointerExceptions`获取节点的节点值时，我不断得到。`<link>`我看到`<link>`节点的 XML 代码不同，我不确定它的值是什么......请指教！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T18:33:23.807

获取该节点的 xpath 表达式是

```
//entry/link/@href 
```

在java中你可以写

```
Document doc = ... // your XML document
XPathExpression xp = XPathFactory.newInstance().newXPath().compile("//entry/link/@href");
String href = xp.evaluate(doc); 
```

然后，如果您需要获取`link`特定条目的值，`id`您可以将 xpath 表达式更改为

```
//entry[id='tag:example.com,2005:Release/343597']/link/@href 
```

最后，如果你想获取文档中的所有链接，如果文档有很多入口元素你可以写

```
Document doc = ... // your XML document
XPathExpression xp = XPathFactory.newInstance().newXPath().compile("//entry/link/@href");
NodeList links = (NodeList) xp.evaluate(doc, XPathConstants.NODESET);
// and iterate on links 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T18:41:13.457

这是完整的代码：

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory
            .newInstance();
    domFactory.setNamespaceAware(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse("test.xml");
    XPath xpath = XPathFactory.newInstance().newXPath();
    XPathExpression expr = xpath.compile("//entry/link/@href");
    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
         System.out.println(nodes.item(i));
    } 
```

# f# - F# - 我可以将类型名称用作充当默认构造函数的函数吗？

> ID：10094324
> 
> 赞同：6
> 
> 时间：2012-04-10T18:26:03.317
> 
> 标签：f#

要创建我的班级序列，

```
type MyInt(i:int) =
    member this.i = i

[1;2;3] |> Seq.map(fun x->MyInt(x)) 
```

where`fun x->MyInt(x)`似乎是多余的。如果能写就更好了`Seq.map(MyInt)`

但是我不能。我能想到的一种解决方法是定义一个单独的函数

```
let myint x = MyInt(x)
[1;2;3] |> Seq.map(myint) 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T19:10:42.560

如果无端黑客不打扰你，你可以这样做：

```
///functionize constructor taking one arg
let inline New< ^T, ^U when ^T : (static member ``.ctor`` : ^U -> ^T)> arg =
  (^T : (static member ``.ctor`` : ^U -> ^T) arg)

type MyInt(i: int) =
  member x.i = i

[0..9] |> List.map New<MyInt, _> 
```

编辑：正如 kvb 所指出的，可以使用更简单（并且更少hacky）的签名：

```
let inline New x = (^t : (new : ^u -> ^t) x) 
```

请注意，这会切换类型 args，因此它变为`New<_, MyInt>`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T18:34:02.973

简而言之，没有。

对象构造函数不是 F# 中的一流函数。这是不使用类的另一个原因，这里最好使用有区别的联合：

```
type myInt = MyInt of int
let xs = [1;2;3] |> Seq.map MyInt 
```

如果您不喜欢显式 lambda，则序列表达式在您的示例中看起来更好：

```
let xs = seq { for x in [1;2;3] -> MyInt x } 
```

或者，您的解决方法是一个不错的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-27T01:43:00.853

为了对此进行更新 - [F# 4.0](http://blogs.msdn.com/b/fsharpteam/archive/2014/11/12/announcing-a-preview-of-f-4-0-and-the-visual-f-tools-in-vs-2015.aspx)已将构造函数升级为一等函数，因此它们现在可以在任何可以使用函数或方法的地方使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:04:17.707

为此，我使用静态方法。原因是有时您的对象构造函数需要来自不同来源的两个参数，而我的方法允许您使用`List.map2`：

```
type NumRange(value, range) =
    static member Make aValue aRange = new NumRange(aValue, aRange)

let result1 = List.map2 NumRange.Make values ranges 
```

也不禁止部分应用：

```
let result2 =
    values
    |> List.map NumRange.Make
    |> List.map2 id <| ranges 
```

如果你不喜欢`id`在这里使用，你可以使用`(fun x y -> x y)`哪个更易读。

# apache - 重定向页面：名称到标准地址

> ID：10094328
> 
> 赞同：0
> 
> 时间：2012-04-10T18:26:38.417
> 
> 标签：apache, wordpress, .htaccess, url-rewriting

我在网站的根目录中安装了 WordPress，最近启用了自定义永久链接结构，只是为了获得好看的页面 URL（此网站仅使用页面，根本没有帖子——它不是博客）。不幸的是，这导致网站的其他部分出现问题，除了 WordPress。

因此，我想采用手动方式：并将 URL 重定向`/my-page`到`/?page_id=32`仅针对选定数量的页面。*是否可以使用.htaccess*文件来做到这一点？规则会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:43:03.910

如果要将页面从 Wordpress 重定向到其他 URL，则可以使用 .htaccess。但是使用插件重定向而不是编辑.htaccess 可能更容易。

请参阅[WordPress › 重定向 « WordPress 插件](http://wordpress.org/extend/plugins/redirection/)以轻松设置重定向并记录重定向、错误等。

# jquery - JQuery onclick nav 隐藏和显示

> ID：10094333
> 
> 赞同：-2
> 
> 时间：2012-04-10T18:27:10.247
> 
> 标签：jquery, hide, show

我想知道如何为 jquery nav 编写 onclick 事件

当你点击去

```
<a href="#go">Go</a> 
```

它应该在 href 中查找 id 以及`.show()`同一`.hide()`类的其他项，例如类 hide。有人给我看代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:41:04.147

您首先需要向锚点添加一个类或（最好）一个 ID，如下所示：

```
<a id="clicker" href="#go">Go</a> 
```

不太清楚你在问什么，但这就是我认为你的意思。试试这个：

```
$(document).ready(function() {
  $('#clicker').click(function() {
  //Grab the "href" attribute of the anchor
    var anchor = $(this).attr('href');

  //If you want to hide
    $(anchor).hide();

  //Uncomment if you want to show
    //$(anchor).show();
  });
}); 
```

此代码未经测试，但*应该可以*工作。

根据你的问题，这就是我认为你的意思。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:17:45.157

这可能接近您的要求，但要确保我们需要更多详细信息和您尝试过的示例：

HTML：

```
<a href="#go">Go</a>

<div id="go" style="display:none;">
   Div for Go
</div> 
```

​ jQuery：

```
// the element with the href of "#go"
$("[href='#go']").click(function() {
   // obtain the href value
   var href = $(this).attr("href");

   // find the element with an ID of #go and hide/show it 
   $(href).toggle();
});​ 
```

[http://jsfiddle.net/ZGz4g/](http://jsfiddle.net/ZGz4g/)

# python - GTK3下如何将文本域绑定到本地文件夹以获取gettext

> ID：10094335
> 
> 赞同：23
> 
> 时间：2012-04-10T18:27:27.963
> 
> 标签：python, translation, gettext, gtk3, pygobject

`gettext`您可以使用默认的系统范围的语言环境目录，也可以使用`bindtextdomain`. 当编译的 .mo 翻译文件在系统的默认位置不可用时，这在直接从源代码运行程序时很有用。

在 Python 中，你会这样做：

```
import gettext
from gettext import gettext as _
gettext.bindtextdomain('nautilus-image-manipulator', '/path/to/mo/folder')
gettext.textdomain('nautilus-image-manipulator') 
```

其中`/path/to/mo/folder`包含熟悉的`fr/LC_MESSAGES/nautilus-image-manipulator.mo`结构。像这样调用：

```
print _("Delete this profile") 
```

*从本地 .mo 文件*中返回正确翻译的字符串，非常感谢。

在 GTK+2/pygtk 中，存在[`gtk.glade.bindtextdomain`](http://www.pygtk.org/pygtk2reference/class-gladexml.html#function-glade--bindtextdomain)，但我想知道在 GTK+3/PyGObject 中是否有任何等价物。

举一个具体的例子，这是[Nautilus Image Manipulator;s UI](http://bazaar.launchpad.net/~emilien-klein/nautilus-image-manipulator/trunk/view/head:/nautilus_image_manipulator/helpers.py)是如何从它的 Glade 文件创建的：

```
from gi.repository import Gtk
builder = Gtk.Builder()
builder.set_translation_domain('nautilus-image-manipulator')
builder.add_from_file(ui_filename)
return builder 
```

不是从 Glade 文件构建的部分 UI（即从代码设置）显示正确翻译，但 Glade 文件中的字符串仍以英文显示。

在我看来，我在调用`builder.bind_text_domain('nautilus-image-manipulator', '/path/to/mo/folder')`之前错过了对某种类型的调用`builder.set_translation_domain`...知道如何执行此操作吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T19:17:18.117

在 PyGtk 中，您也可以使用 Gtk.Builder。根据 PyGtk Gtk.Builder 文档：

[http://developer.gnome.org/pygtk/stable/class-gtkbuilder.html#properties-gtkbuilder](http://developer.gnome.org/pygtk/stable/class-gtkbuilder.html#properties-gtkbuilder)

> 翻译在接口描述中标记为可翻译的属性值时使用的翻译域。如果翻译域为 None，GtkBuilder 使用 gettext()，否则使用 dgettext()。默认值：无

也就是说，Gtk.Builder 使用“C 库”中的 dgettext()。问题是 Python 的 gettext 模块函数**bindtextdomain()**出于某种我不知道的原因，没有设置“C 库”。选项是使用也公开该接口的**语言环境模块。**从 Python 语言环境模块文档：

[http://docs.python.org/library/locale#access-to-message-catalogs](http://docs.python.org/library/locale#access-to-message-catalogs)

> locale 模块在提供此接口的系统上公开 C 库的 gettext 接口。它由函数 gettext()、dgettext()、dcgettext()、textdomain()、bindtextdomain() 和 bind_textdomain_codeset() 组成。这些与 gettext 模块中的相同函数类似，但使用 C 库的二进制格式用于消息目录，并使用 C 库的搜索算法来定位消息目录。
> 
> Python 应用程序通常不需要调用这些函数，而是应该使用 gettext。此规则的一个已知例外是与其他 C 库链接的应用程序，这些库在内部调用 gettext() 或 dcgettext()。对于这些应用程序，可能需要绑定文本域，以便库可以正确定位其消息目录。

这是当前的情况。什么黑客：S

这将做到这一点，文件**test.py**：

```
from gi.repository import Gtk
from os.path import abspath, dirname, join, realpath
import gettext
import locale

APP = 'myapp'
WHERE_AM_I = abspath(dirname(realpath(__file__)))
LOCALE_DIR = join(WHERE_AM_I, 'mo')

locale.setlocale(locale.LC_ALL, '')
locale.bindtextdomain(APP, LOCALE_DIR)
gettext.bindtextdomain(APP, LOCALE_DIR)
gettext.textdomain(APP)
_ = gettext.gettext

print('Using locale directory: {}'.format(LOCALE_DIR))

class MyApp(object):

    def __init__(self):
        # Build GUI
        self.builder = Gtk.Builder()
        self.glade_file = join(WHERE_AM_I, 'test.glade')
        self.builder.set_translation_domain(APP)
        self.builder.add_from_file(self.glade_file)

        print(_('File'))
        print(_('Edit'))
        print(_('Find'))
        print(_('View'))
        print(_('Document'))

        # Get objects
        go = self.builder.get_object
        self.window = go('window')

        # Connect signals
        self.builder.connect_signals(self)

        # Everything is ready
        self.window.show()

    def main_quit(self, widget):
        Gtk.main_quit()

if __name__ == '__main__':
    gui = MyApp()
    Gtk.main() 
```

我的 Glade 文件**test.glade**：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window">
    <property name="can_focus">False</property>
    <property name="window_position">center-always</property>
    <property name="default_width">400</property>
    <signal name="destroy" handler="main_quit" swapped="no"/>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <child>
          <object class="GtkLabel" id="label1">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">File</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="label2">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">Edit</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="label3">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">Find</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">2</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="label4">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">View</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">3</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="label5">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">Document</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">4</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

记得在**mo/LANG/LC_MESSAGES/myapp.mo**中创建基于 .po 提取的 mo：

```
xgettext --keyword=translatable --sort-output -o en.po test.glade 
```

它看起来像什么：

![在此处输入图像描述](../Images/2722d64f97a90367dc52ada3a58a9163.png)

亲切的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T18:59:29.077

Windows下在Gtk/python中激活gettext翻译的解决方案是elib_intl.py，用google很容易找到这个文件。这允许翻译代码中的文本和 glade UI 中的文本。

以下是用于以下环境的代码：

Windows 7 Python 2.7 Gtk 3+ 由 pygi-aio-3.10.2-win32_rev18-setup.exe 加载

它应该适用于任何窗口，也适用于 Python 3。 elib_intl.py 可以与 pyGtk (Gtk 2) 一起使用。

```
from gi.repository import Gtk, Gdk
import cairo

import locale       #for multilanguage support
import gettext
import elib_intl
elib_intl.install("pdfbooklet", "share/locale") 
```

如果你使用 Gtk 3，你可能会收到一个错误：对于第 447 行：

```
libintl = cdll.intl 
```

此错误表示：找不到模块。原因是在 Gtk3 中，dll 的名称已更改。它不再是 intl.dll。在所描述的 Pygi 安装中，名称是：libintl-8。您必须将引发错误的行替换为：

```
libintl = cdll.LoadLibrary("libintl-8.dll") 
```

你可以在这里找到一个完整的工作示例： [pdfBooklet 2.4.0](http://sourceforge.net/projects/pdfbooklet) （警告：我写的时候还没有排队）

感谢编写 elib_intl 的节食者 Verfaillie

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-03T11:01:40.617

好吧，在赏金如此悲惨地未能吸引 mac os x 答案之后，我不得不自己做研究。这是我使用的片段：

```
import locale, ctypes, sys, os
import gettext

# setup textdomain and install _() for strings from python
gettext.install('domain', '/path/to/locale/dir')

try:
    if hasattr(locale, 'bindtextdomain'):
        libintl = locale
    elif os.name == 'nt':
        libintl = ctypes.cdll.LoadLibrary('libintl-8.dll')
    elif sys.platform == 'darwin':
        libintl = ctypes.cdll.LoadLibrary('libintl.dylib')

    # setup the textdomain in gettext so Gtk3 can find it
    libintl.bindtextdomain('domain', '/path/to/locale/dir')

except (OSError, AttributeError):
    # disable translations altogether for consistency
    gettext.install('') 
```

稍后，当您拥有 Gtk.Builder 时，设置域：

```
builder.set_translation_domain('domain') 
```

这仅在 gettext 的库`libintl`位于库路径中时才有效，否则会正常失败。为了使翻译工作，您需要安装 gettext 作为依赖项。

# git - Vim、TextMate、git 和换行符

> ID：10094339
> 
> 赞同：0
> 
> 时间：2012-04-10T18:27:36.447
> 
> 标签：git, vim, coffeescript, textmate

我正在使用 git 和 vim。我的伙伴正在使用 git 和 TextMate。我今天遇到了一个问题，我使用 vim 和 git 添加了一个文件。他在 TextMate 中对其进行了修改。然后我拉了他的零钱。我添加了几行代码，但是因为 coffeescript 编译器（和 vim-coffee-script）无法识别我的换行符，所以会出现问题。所以，我跑了 :set ff 它现在显示 mac，它曾经显示 unix。

为什么coffeescript 不识别换行符？以及如何使用我的 git 或 vim 配置防止这种情况在未来发生？

我的 vim 配置：

```
set ffs=unix,mac,dos 
```

我们的 git 配置都没有对`core.autocrlf`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:35:42.667

如果您的朋友没有将 TextMate 设置为使用 unix 行尾，他应该这样做。然后，一旦你们俩都使用 unix 行尾，请使用 dos2unix 转换整个 repo。

您还应该确保 git 能够正确处理 crlf。请参阅以下两个问题： - [git autocrlf 设置的权威建议](https://stackoverflow.com/questions/2016673/definitive-recommendation-for-git-autocrlf-settings) - [Windows 上的 Git 1.6.4 beta (msysgit) - Unix 或 DOS 行终止](https://stackoverflow.com/questions/1249932/git-1-6-4-beta-on-windows-msysgit-unix-or-dos-line-termination/1250133#1250133)

您可能还想研究模式线。虽然这些对行尾没有那么有用，但它们非常适合缩进。Vim 原生支持它们，[TextMate 有一个插件](http://konstochvanligasaker.se/tabmate/)来添加对 emacs 样式的支持。（而且 vim[也可以支持 emacs 风格](http://www.vim.org/scripts/script.php?script_id=3381)——或者你可以同时使用两者。）

# java - 警告：上一轮创建的“[在此处插入类]”类型的文件将不受注释处理

> ID：10094346
> 
> 赞同：18
> 
> 时间：2012-04-10T18:28:08.703
> 
> 标签：java, java-7

我将现有的代码库切换到 Java 7 并且不断收到以下警告：

```
warning: File for type '[Insert class here]' created in the last round 
  will not be subject to annotation processing. 
```

快速搜索显示没有人遇到此警告。

它也没有记录在 javac 编译器源代码中：

从 OpenJDK\langtools\src\share\classes\com\sun\tools\javac\processing\JavacFiler.java

```
private JavaFileObject createSourceOrClassFile(boolean isSourceFile, String name) throws IOException {
    checkNameAndExistence(name, isSourceFile);
    Location loc = (isSourceFile ? SOURCE_OUTPUT : CLASS_OUTPUT);
    JavaFileObject.Kind kind = (isSourceFile ?
                                JavaFileObject.Kind.SOURCE :
                                JavaFileObject.Kind.CLASS);

    JavaFileObject fileObject =
        fileManager.getJavaFileForOutput(loc, name, kind, null);
    checkFileReopening(fileObject, true);

    if (lastRound) // <-------------------------------TRIGGERS WARNING
        log.warning("proc.file.create.last.round", name);

    if (isSourceFile)
        aggregateGeneratedSourceNames.add(name);
    else
        aggregateGeneratedClassNames.add(name);
    openTypeNames.add(name);

    return new FilerOutputJavaFileObject(name, fileObject);
} 
```

这是什么意思，我可以采取哪些步骤来清除此警告？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:38:09.487

警告

> 警告：上一轮创建的“[在此处插入类]”类型的文件将不受注释处理

意味着您正在运行注释处理器，使用 javax.annotation.processing.Filer 实现（通过 javax.annotation.processing.ProcessingEnvironment 提供）创建新的类或源文件，尽管处理工具已经决定“在最后一轮” .

这可能是问题（因此是警告），因为生成的文件本身可能包含被注释处理器忽略的注释（因为它不会再进行一轮）。

以上应该回答你问题的第一部分

> 这是什么意思，我可以采取哪些步骤来清除此警告？

（你自己已经想出来了，不是吗:-)）

可以采取哪些步骤？检查您的注释处理器：

1）你真的必须在注释处理器的最后一轮使用 filer.createClassFile / filer.createSourceFile 吗？通常在代码块内使用文件管理器对象，例如

```
for (TypeElement annotation : annotations) {
...
} 
```

（在方法过程中）。这确保注释处理器不会处于其最后一轮（最后一轮始终是具有空注释集的那一轮）。

2）如果你真的无法避免在最后一轮编写生成的文件并且这些文件是源文件，请欺骗注释处理器并使用文件管理器对象的方法“createResource”（以“SOURCE_OUTPUT”作为位置）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:08:15.130

在[OpenJDK 测试用例](http://code.google.com/p/jsr308-langtools/source/browse/test/tools/javac/diags/examples/ProcFileCreateLastRound)中，由于处理器使用“processingOver()”在最后一轮准确地写入新文件，因此产生了此警告。

```
public boolean process(Set<? extends TypeElement> elems, RoundEnvironment renv) {
        if (renv.processingOver()) { // Write only at last round
            Filer filer = processingEnv.getFiler();
            Messager messager = processingEnv.getMessager();
            try {
                JavaFileObject fo = filer.createSourceFile("Gen");
                Writer out = fo.openWriter();
                out.write("class Gen { }");
                out.close();
                messager.printMessage(Diagnostic.Kind.NOTE, "File 'Gen' created");
            } catch (IOException e) {
                messager.printMessage(Diagnostic.Kind.ERROR, e.toString());
            }
        }
        return false;
    } 
```

我稍微修改了原始示例代码。添加了诊断说明“创建了文件'Gen'”，将“*”掩码替换为“org.junit.runner.RunWith”并将返回值设置为“true”。产生的编译器日志是：

```
Round 1:
input files: {ProcFileCreateLastRound}
annotations: [org.junit.runner.RunWith]
last round: false
Processor AnnoProc matches [org.junit.runner.RunWith] and returns true.
Round 2:
input files: {}
annotations: []
last round: true
Note: File 'Gen' created
Compilation completed successfully with 1 warning
0 errors
1 warning
Warning: File for type 'Gen' created in the last round will not be subject to annotation processing. 
```

如果我们从日志中删除我的自定义注释，则很难判断文件“Gen”实际上是在“第 2 轮”（上一轮）中创建的。因此，基本建议适用：如果有疑问 - 添加更多日志。

* * *

此页面上还有一些有用的信息：http: [//docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html)

阅读有关“注释处理”的部分并尝试使用编译器选项获取更多信息：
**-XprintProcessorInfo** 打印有关要求处理器处理哪些注释的信息。
**-XprintRounds**打印有关初始和后续注释处理轮次的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T19:59:35.490

我浏览了 java 7 编译器选项，发现了这个：

**-implicit:{class,none}** 控制为隐式加载的源文件生成类文件。要自动生成类文件，请使用 -implicit:class。要禁止生成类文件，请使用 -implicit:none。如果未指定此选项，则默认为自动生成类文件。在这种情况下，如果在进行注释处理时生成了任何此类文件，编译器将发出警告。如果明确设置此选项，则不会发出警告。请参阅搜索类型。

[来源](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html)

您可以尝试隐式声明类文件吗？

# php - 来自同一客户端的与 Apache 的并发连接

> ID：10094348
> 
> 赞同：7
> 
> 时间：2012-04-10T18:28:16.207
> 
> 标签：php, ajax, apache, concurrency

我有一个接收大量 ajax 调用的 PHP 应用程序。
我注意到，当两个或多个调用同时发生时，它们没有同时执行，第一个调用必须停止，以便第二个调用执行。
我已经建立了一个小测试来尝试解决这个问题。我有一个这样的html：

```
<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>
    <a href="test.php">Test</a>
    <button>Click</button>
    <button>Click</button>
    <button>Click</button>
    <button>Click</button>
    <script type="text/javascript">
        $('button').click(function() {
            $.get("test.php");
        });
    </script>
</body>
</html> 
```

test.php 包含：

```
<?php
sleep(2);
echo 'Test';
?> 
```

因此，在开发人员工具（或萤火虫）控制台上执行 $('button').click() 后，请求同时发生，但在最后一个请求后 2 秒返回答案，而不是所有四个同时返回（ 2 秒后）。
好吧，我尝试在其他浏览器中打开，同时，这个文件并且它工作，它同时执行。我的意思是，在 chrome 和 firefox 上运行它，在选项卡中打开页面会在 2 秒内显示“测试”，而来自 chrome ajax 请求的响应在最后一个请求完成后 2 秒出现，因此其他浏览器请求对第一个没有影响一个电话（这将证明这是一个会话问题，但见下文）。
如果我为 test.php 打开多个选项卡，也会发生同样的情况。

我尝试将会话更改为内存缓存 - 人们在其他问题中说，会话可能被锁定。这很有意义，但是即使从文件更改为 memcache 后问题仍然存在（并且脚本没有会话，并且 session_autostart 已关闭）

我真的很关心 apache 的配置问题，因为在一段时间后的第一次，如果我执行脚本，它将同时执行所有 4 个 ajax 调用！我正在考虑一些 DoS 保护或类似的东西。

无论如何，任何帮助将不胜感激！

* * *

好的，解决了问题。

毕竟这是一个会话锁定问题，问题是 memcached 也锁定了会话！
必须安装在 memcached.ini 中具有锁定标志的 php_memcached 2.0.1 并使用该版本。解决了这个问题。

虽然当请求是针对同一个 url 时（在上面的示例中，我使用了 test.php 4 次），但它仍然一次执行一个。我很确定这是正确的行为，因为同时多次请求资源没有多大意义。将我的示例更改为请求 test1.php、test2.php 等，它工作得很好。如果查询字符串发生更改，也可以使用。

谢谢你的帮助！

PS：没有这么早回答我自己的问题的声誉所以这里是答案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:42:26.447

在我的情况下，功能：

`session_write_close();`

解决了我的问题

我有下一个程序，一个经常调用一个名为**ajax.php**的 ajax 文件的主页。每“n”秒调用一次。

而且，我的表单有一个按钮，它返回一个通过 ajax 调用的报告（** reporte.php**）它仅由用户请求（单击）调用，生成结果可能需要一分钟。

大多数时候，ajax.php 需要 20 毫秒才能运行，但如果**report.php**正在运行，则 ajax.php 会冻结，直到 reporte.php 完成任务。最糟糕的是，ajax.php 可能会被堆叠。

reporte.php（之前）

```
<?php
// Some PHP Code goes here.
// The rest of the PHP code (mostly, the slow part of the process).
?> 
```

reporte.php（修复后）

```
<?php
// Some PHP Code goes here.  (ideal if it is the fast part).
session_write_close(); // fix for concurrent ajax
// The rest of the PHP code (mostly, the slow part of the process).
?> 
```

解决方案之前（火狐的firebug插件截图）： ![前](../Images/e19586143e81c52dbd42fd4c3a7f466f.png)

解决后 ![后](../Images/903e544d245f25b3748222d6d3ab15b6.png)

检查在解决方案之前，reporte.php 和 ajax.php 是否仍在加载（并且 ajax 已在多个调用中堆叠）。以及如何在解决方案之后，reporte.php 正在加载，而每个连续的 ajax 调用都已经加载。

请注意，在 session_write_close() 函数之后，不可能（或不推荐）使用任何会话函数和值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-10T19:01:40.313

HTTP 请求是相互独立的——根据定义，HTTP 协议是无状态的。您执行的每个`$.get()`操作都是一个完全独立的新 http 请求，因此您最终会收到 4 个 HTTP 请求、4 个独立`sleep()`的调用和 4 个来自服务器的独立输出。

# c++ - C++ winsock recvfrom() 和 sendto()

> ID：10094351
> 
> 赞同：0
> 
> 时间：2012-04-10T18:28:32.260
> 
> 标签：c++, udp, winsock

我有一个客户端应用程序使用winsock 的`sendto()`方法通过UDP 将数据发送到服务器应用程序。在我的客户端应用程序上，我制作了 5 quick `sendto()`。在我的服务器应用程序上，我等待 10 秒，然后执行`select()`and `recvfrom()`。会给我`recvfrom()`客户端发送的第一个数据包还是任意一个（无论哪个先到达）？我仍然能够获得其他 4 个数据包，还是 winsock 的 UDP 框架只缓冲一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:30:26.077

> recvfrom() 会给我客户端发送的第一个数据包还是任意一个

由于 UDP 不处理重新排序，因此您可以获得任何消息。您收到的消息可能少于 4 条，甚至更多（但今天很少见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:32:17.850

使用 5 个大小合理的数据包，您*可能会*收到所有数据包，并且您*可能*会先发送第一个数据包。但是它们可能出现故障，可能无法到达，并且如果它们确实到达，则可能不包含原始数据。您必须使用 UDP 自己处理所有这些。（但根据您的应用程序和要求以及网络的稳定性，这可能不是一个真正的问题；在某些情况下接收 99% 的数据是完全可以的，这当然是可能的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:33:02.523

UDP 不保证接收到的数据包的顺序，所以基本上，第一个数据包`recvfrom()` *可能*是您发送的第一个数据包，但不能是 - 这就是 TCP 的用途（它保证接收数据的顺序）。如果数据包在传输过程中丢失，您可能根本不会收到部分数据包（或任何数据包）。

对于第二部分：通常，操作系统会为您缓冲一定数量的数据包，这取决于为 UDP 套接字设置的套接字缓冲区 - 缓冲区特定于每个套接字，而不是在它们之间共享。在 Windows 上，我不确定如何获取缓冲区的大小，在 Linux 上，请查看“/proc/sys/net/ipv4/udp_mem”；通常，您可以轻松地在其中放置五个 UDP 数据包。

# oracle - 如何在 Oracle 中改进自引用表的删除时间

> ID：10094359
> 
> 赞同：2
> 
> 时间：2012-04-10T18:29:26.027
> 
> 标签：oracle, performance, cascading-deletes

在我们的 Oracle 11g 数据库中，我们有一个表，它有一个主键 I_Node (int) 和一个名为 I_Parent_Node (int) 的列，它引用回同一表中的另一条记录。根节点的 I_Parent_Node = null。通过这种方式，我们形成了一个由节点、叶子、分支组成的树结构，无论您想如何称呼它们。

我们经常需要一次删除整个节点分支，这意味着一个节点及其所有子节点。有时这是很多很多的记录，比如 50,000 或更多。由于在自引用表上不允许级联删除，我们被迫从叶子开始逐个删除，然后沿着树的备份方式进行。我们经历了长达数小时的删除时间。

我们正在考虑使用“标记删除”技术，其中一个单独的程序将在非高峰时段清除标记为删除的节点，但我感兴趣的是数据库设计更改或其他一些 Oracle 构造是否可以在这里提供帮助。除了我在工作中学到的知识外，我没有接受过 Oracle 培训，而且创建数据库的人并没有考虑到这么大的数量。我对数据库设计更改持开放态度，因为它还不是一个固定的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:05:01.880

您应该能够使用可延迟约束和分层查询来做到这一点。

如果您的外键约束（在 I_Parent_Node 上）尚未可延迟，请将其删除并使用关键字“DEFERRABLE”重新创建它。

这是一个使用 Oracle 示例中的 EMPLOYEES 表的示例（我也修改了 DEPARTMENTS 表以便执行此操作，尽管示例确实不需要）：

如果当前不可延迟，则删除并重新创建您的外键：

```
alter table employees drop constraint emp_manager_fk;
alter table employees add constraint emp_manager_fk foreign key (manager_id) references employees(employee_id) deferrable; 
```

在您的事务中，推迟您的约束，并使用分层查询进行删除：

```
set constraints all deferred; 

delete
from     employees e
where    employee_id in (select   employee_id
                         from     employees
                         start with employee_id = 108
                         connect by prior employee_id = manager_id); 
```

“108”是我的“父”记录的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:56:18.410

您可能需要考虑将层次结构与主表分开。因此，您的主表将只有主 ID（我们称之为“ID”），而您的层次结构表将具有“ID、ParentID、TreeID”。ParentID 是该 ID 的父节点，TreeID 是树中最高的父节点（级别 1）。

因此，1 级节点如下所示：

```
ID, ParentID, TreeID 
1, [null], 1 
```

2 级节点如下所示：

```
ID, ParentID, TreeID
2, 1, 1 
```

3 级节点如下所示：

```
ID, ParentID, TreeID
3, 2, 1 
```

等等。

您将使用[Oracle 层次结构查询](http://docs.oracle.com/cd/E11882_01/server.112/e17118/queries003.htm)（按查询连接）来查询或遍历树。该表将非常薄（列不多，可能是这 3 个 + 一些修改日期），因此更新这些关系应该比弄乱主表要快得多，并且可以更好地扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T02:25:49.297

我假设您已经完成了标准调整 - 即节点和父节点 ID 列是否适合索引？

(1) 解决问题的一种方法是使用 PL/SQL。使用首先返回叶子行的分层查询将要删除的 ID 批量收集到数组中；然后使用数组进行批量删除（FORALL）。

(2) 另一种方法是软删除 - 将行标记为“已删除”，但从不实际删除它们。您需要修改您的应用程序（或使用 Oracle VPD 自动省略查询中的“已删除”行）。如果删除节点相对较少，这可能会工作得相当好；但是，如果您经常删除大量节点，那么这会使表中出现大量旧数据。

# objective-c - @synchronized vs. NSLock Instance vs. pthread_mutex_t

> ID：10094361
> 
> 赞同：10
> 
> 时间：2012-04-10T18:29:36.270
> 
> 标签：objective-c, ios, multithreading, cocoa-touch

我正在观看一个（2 岁的）关于多线程的教程视频，它说

*   **NSLock 实例**比使用**@synchronized快 3 倍**
*   **pthread_mutex_t**比**NSLock 实例**快 2倍（实际上比**@synchronized**快 6 倍）

这是真的？我还没有找到任何权威的声明，但我只是想在 StackOverflow 上对你们中的一些人进行民意调查，以征求你的意见，也许还有确凿的证据。

谢谢！

**虽然我已经接受了正确的答案，但这个问题的未来观众会发现这篇文章很有帮助：[http ://perpendiculo.us/?p=133](http://perpendiculo.us/?p=133)**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T20:18:03.227

重要的是要记住，`@synchronized`其中包括必要的 try/catch 逻辑以在异常中释放锁。一旦添加了该逻辑，性能差异（总体上并不大）可能会显着减小。

# java - Java如何规避windows MAX_PATH WinAPI限制

> ID：10094365
> 
> 赞同：4
> 
> 时间：2012-04-10T18:29:58.313
> 
> 标签：java, windows, file, max-path

有谁知道 Java 是如何绕过 Windows MAX_PATH 限制的。使用下面的代码，我能够在 Java 中创建一个非常长的路径并且能够执行 I/O，这在没有前缀 \\?\ 的情况下使用 windows 是不可能的。

```
public static void main(String[] args) throws IOException {
    BufferedWriter bufWriter = null;
    try {
        StringBuilder s = new StringBuilder();
        for (int i = 0; i < 130; i++) {
            s.append("asdf\\");
        }
        String filePath = "C:\\" + s.toString();;
        System.out.println("File Path = " + filePath);
        File f = new File(filePath);
        f.mkdirs();
        f = new File(f, "dummy.txt");
        System.out.println("Full path = " + f);
        bufWriter = new BufferedWriter(new FileWriter(f));
        bufWriter.write("Hello"); 

    } 
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
        if (bufWriter != null) {
            bufWriter.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:41:55.297

从JVM的`canonicalize_md.c`：

```
/* copy \\?\ or \\?\UNC\ to the front of path*/
WCHAR* getPrefixed(const WCHAR* path, int pathlen) {
    [download JVM source code (below) to see implementation]
} 
```

该函数`getPrefixed`被调用：

*   通过函数`wcanonicalize`if`((pathlen = wcslen(path)) > MAX_PATH - 1)`
*   由函数`wcanonicalizeWithPrefix`。

我没有比这更远地跟踪调用链，但我假设 JVM 在访问文件系统之前总是使用这些规范化例程，因此总是以一种或另一种方式命中这段代码。如果您想更深入地跟踪调用链，您也可以享受浏览 JVM 源代码的乐趣！下载地址：http: [//download.java.net/openjdk/jdk6/](http://download.java.net/openjdk/jdk6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:31:11.467

如果路径以 . 为前缀，Windows 会绕过该限制`\\?\`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:30:55.400

实际上，Java 很可能在内部使用 UNC 路径 (\?)。

# android - 可以使用 XML 精确控制 Android 中的定位

> ID：10094373
> 
> 赞同：0
> 
> 时间：2012-04-10T18:30:15.670
> 
> 标签：android

我想知道是否可以使用 XML 文件在 Android 上精确定位小部件？根据我的实验，通过 XML 精确定位似乎是不可能的。以编程方式，我能够根据设备的宽度和高度完美地定位事物。然而，使用 XML 和 dip 值，事情似乎就分崩离析了。这是我的意思的一个[例子。](https://stackoverflow.com/questions/10088072/android-positioning-problems)

马克·墨菲在一篇文章中写道：

> 一些开发人员，也许是那些来自 UI 开发的“拖放式”学校的开发人员，首先考虑的是小部件的位置。他们认为他们希望某些小部件在某些固定位置具有某些固定大小。他们对 Android 布局管理器（容器）感到沮丧，并且可能会倾向于使用已弃用的 AbsoluteLayout 作为他们过去设计 UI 的一种方式。
> 
> 即使在桌面上也很少能很好地工作，正如不能很好地处理窗口大小调整的应用程序所看到的那样。同样，它不适用于具有各种屏幕尺寸和分辨率的移动设备，尤其是 Android。
> 
> 与其考虑职位，不如考虑规则。您需要向 Android 教授关于小部件的大小和放置位置的“业务规则”，然后 Android 根据设备屏幕在分辨率方面实际支持的内容来解释这些规则。

[资源](http://www.androidguys.com/2010/02/18/handling-multiple-screen-sizes-part-2/)

这使我相信 XML 文件很难精确定位。这对我的应用程序很重要，因为我在背景图像上布置小部件，因此这些小部件需要准确放置在特定区域，以便整体 UI 看起来不错。需要跨分辨率保留纵横比。我可以使用 XML 文件完成所有这些操作吗？

谢谢！任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:36:34.660

[是的，您可以使用绝对布局](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)逐像素定位您的视图。上次我检查时，那是不久前，那些拖放界面实际上为您创建了一个。（实际上只是检查链接似乎已弃用此类。）

但是，我强烈建议不要使用它们。原因是因为您正在为许多不同的屏幕尺寸进行编码，因此逐像素提供尺寸肯定会导致跨设备出现问题。

我推荐的是使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)。我实际上尽我所能使用这种类型的布局。它使您可以将项目放在其他元素的右侧或上方和下方。这与 DIP（密度独立像素）中的填充和边距选项相结合，应该可以让您创建任何您想要的东西。它在大多数设备上应该看起来不错。

# c# - ASP.NET/ C# 中的服务器端麦克风捕获

> ID：10094378
> 
> 赞同：4
> 
> 时间：2012-04-10T18:30:44.897
> 
> 标签：c#, asp.net, streaming, microphone

我正在尝试访问 ASP.NET / C# 中的服务器端麦克风。

我打算做什么：

通过加载页面或单击按钮，C# 函数将变为活动状态。这将获得一个麦克风流，并将其作为输出流播放。因此，如果您转到该页面并单击按钮，您会听到我对着麦克风讲话。

这就是理论。自动取款机它不起作用。在继续之前，我想提一下这与音频聊天无关。只是我的麦克风输入正在主页上实时播放。我完全知道您使用 Flash 或 Silverlight 进行客户端麦克风捕获。

声音输出工作。点击主页，我可以轻松地从 .wav 文件播放。麦克风被识别。我使用 Response.Write 在主页上显示麦克风的设备号、产品名称等。所以服务器知道微。不抛出异常。没有声音，但调试时也没有发现错误。

所以我想我的代码中有一个错误。顺便提一下：设备号，这里只写为0，是正确的。我用其他应用程序对其进行了测试。代码非常简单，我使用来自 YouTube 的 NAudio-Tutorial 的代码进行环回作为示例，因为我只是想弄清楚它是否有效。

这是代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using NAudio.Wave;

public partial class _Default : System.Web.UI.Page
{

    private NAudio.Wave.WaveIn sourceStream = null;
    private NAudio.Wave.DirectSoundOut waveOut = null;

    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "Seite aufgerufen";

    }//protected void Page_Load(object sender, EventArgs e)

    protected void show(object sender, EventArgs e)
    {

    }

    protected void start(object sender, EventArgs e)
    {
        Label1.Text = "Aufnahme gestartet";

        int deviceNumber = 0;

        sourceStream = new NAudio.Wave.WaveIn();
        sourceStream.DeviceNumber = deviceNumber;

        sourceStream.WaveFormat = new NAudio.Wave.WaveFormat(44100, NAudio.Wave.WaveIn.GetCapabilities(deviceNumber).Channels);
        NAudio.Wave.WaveInProvider waveIn = new NAudio.Wave.WaveInProvider(sourceStream);

        waveOut = new NAudio.Wave.DirectSoundOut();
        waveOut.Init(waveIn);

        sourceStream.StartRecording();

        waveOut.Play();  

    }//protected void Page_Load(object sender, EventArgs e)

    protected void stop(object sender, EventArgs e)
    {
        Label1.Text = "Aufnahme beendet";
        if (waveOut != null)
        {
            waveOut.Stop();
            waveOut.Dispose();
            waveOut = null;
        }//if (waveOut != null)
        if (sourceStream != null)
        {
            sourceStream.StopRecording();
            sourceStream.Dispose();
            sourceStream = null;
        }//if (sourceStream != null)
    }//protected void Page_Load(object sender, EventArgs e)

}//public partial class _Default : System.Web.UI.Page 
```

下面是显示页面的代码：

```
<%@ Page Title="Startseite" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Willkommen bei ASP.NET.
    </h2>
    <p>
        Weitere Informationen zu ASP.NET finden Sie auf <a href="http://www.asp.net" title="ASP.NET-Website">www.asp.net</a>.
    </p>
    <p>
        <a href="http://go.microsoft.com/fwlink/?LinkID=152368"
            title="MSDN-ASP.NET-Dokumente">Dokumentation finden Sie auch unter ASP.NET bei MSDN</a>.
     <p>
     <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> <br />
     <asp:Button ID="Button1" runat="server" Text="Start" OnClick = "start" /><br />
     <asp:Button ID="Button2" runat="server" Text="Start" OnClick = "stop" /><br />

     </p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:27:37.603

使用 Silverlight，您可以[捕获音频并播放](http://www.kindohm.com/post/838893081/slaudiocaptureplayback.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:32:45.100

这种方法有几个潜在的缺陷：

1）我从您的描述中推测您想要远程访问网络服务器并将麦克风中的音频作为流返回到远程浏览器。（如果我对此不正确，请澄清您的目标）。NAudio.Wave.DirectSoundOut对象是直接声音 COM 接口的包装器**。**它将使用默认播放设备，这很可能是服务器上的声卡。没有音频会通过浏览器返回。

2）您正在创建您的**waveOut**对象在**start**方法回调到服务器。您的页面对象仅在回调运行时存在。一旦控制权返回给浏览器，它就会消失并与您的**waveOut**对象一起进行垃圾收集。您将需要在调用之间保留您的对象。我认为视图状态不适用于硬件包装器，因此您需要将其放入会话变量中以使其在调用之间存在。

3）由于上面的＃2，您的**停止**回调现在真的无关紧要。当它被调用时，它应该发现**sourceStream**和**waveOut**始终为空，因为它们在 Web 服务器的回调之间没有持久化。它需要处理对象的持久副本。

4) 出于安全原因，Web 服务器可能无法访问服务器的音频硬件。想象一下，如果有人设法侵入 Web 服务器，然后可以完全访问服务器的物理硬件。那里有丑陋的潜力。但是，如果是这种情况，我认为您在尝试打开 Wave 设备时会收到“拒绝访问”异常。

# c# - 捕获程序集解析错误

> ID：10094381
> 
> 赞同：0
> 
> 时间：2012-04-10T18:30:54.217
> 
> 标签：c#

我正在尝试执行以下操作：

```
m_appDomain = AppDomain.CreateDomain("Plugin AppDomain", null, new AppDomainSetup {PrivateBinPath = PluginActivator.SandboxFolder, PrivateBinPathProbe = "x"});    
PluginActivator activator = m_appDomain.CreateInstanceAndUnwrap(typeof(PluginActivator).Assembly.GetName().Name, typeof(PluginActivator).FullName) as PluginActivator; 
```

但是，由于`PrivateBinPathProbe`设置为 true，第二行根本不查看应用程序库，并立即崩溃（`FileNotFoundException`在运行上述代码的可执行文件上）。

`AssemblyResolve`我尝试在第二行之前附加一个处理程序：

```
m_appDomain.AssemblyResolve += OnAssemblyResolve; 
```

目的是让`AssemblyResolve`处理程序手动进入`ApplicationBase`并加载所有需要的程序集。这导致应用程序崩溃并出现相同的错误。

我无法更改探测目录的顺序。我该如何解决这个问题？

**编辑：**

我知道这个问题不是很清楚，但我无法理解问题是什么，所以很难更清楚。首先，我不明白为什么我刚刚创建的新 AppDomain 甚至需要对应用程序可执行文件的引用。如果您希望我澄清任何事情，请告诉我。

# javascript - Video.js + AJAX + Chrome 错误

> ID：10094383
> 
> 赞同：1
> 
> 时间：2012-04-10T18:30:57.320
> 
> 标签：javascript, jquery, ajax, google-chrome, html5-video

所以我有一个只出现在某些人身上的错误，到目前为止只出现在 chrome 中。它似乎在其他所有浏览器中都能正常工作。

这是 JS 小提琴：http: [//jsfiddle.net/DDZGa/3/](http://jsfiddle.net/DDZGa/3/)

在右下角的窗口中，单击添加链接以添加视频。打游戏。然后添加另一个视频并点击播放。到目前为止，我测试过的 50% 的人（包括我自己）在第二个视频上无限期地获得了加载动画，其余的似乎没有问题。我无法将它隔离到任何特定版本的 chrome。似乎是随机的。有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:53:41.880

我的谷歌浏览器也有同样的问题。

我尝试`preload="none"`了视频标签，之后视频效果更好。

# c - 如何将NULL存储到节点中？

> ID：10094384
> 
> 赞同：0
> 
> 时间：2012-04-10T18:31:00.257
> 
> 标签：c, linked-list

我在网上遇到了下面的面试问题。

" 使用以下原型在单个 LL 中编写 Getnextnode 函数的代码

```
Node GetNextNode(Node n); 
```

并验证它“

通用案例解决方案很简单，如下所示：

```
Node GetNextNode(Node n)
{
    Node temp = *(n.link);
        return temp;
} 
```

我想知道是否`n`是列表中的最后一个节点。`n.link`将指向`NULL`，在这种情况下如何返回它。

此外，如果`head`是指向列表中第一个节点的指针，如果列表为空，如何将其传递给`GetNextNode`函数。

请任何方向。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:18:40.800

还有另一种存储列表末尾的方法，`link`指向节点本身。这样，您的链接始终有效，您可以通过比较两者的相等性来简单地测试结束。

# algorithm - 数数乐高积木的组合方式

> ID：10094386
> 
> 赞同：2
> 
> 时间：2012-04-10T18:31:05.633
> 
> 标签：algorithm, combinations, combinatorics, lego

我有任意一组乐高积木。我也有一些由 3 块乐高积木制成的人物。我想找出当前乐高积木阵列可以创建多少种图形组合。

有人给我一些参考，所以我可以解决这个问题吗？

我可以使用哪些算法？我可以使用任何理论吗？

提前感谢您提供的任何帮助。

/汉斯

* * *

编辑：这个问题[在数学堆栈交换中被重新提出。](https://math.stackexchange.com/questions/130166/combinations-of-lego-bricks-figures-in-an-array-of-random-bricks)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:12:30.513

你会相信像这样的问题，或者至少是它们的一般情况，实际上仍然是*开放的研究问题*吗？你在这里做真正的数学研究。;)

Søren Eilers、Mikkel Abrahamsen 和 Bergfinnur Durhuus 在乐高组合计数问题上做了一些工作，即计算[可以排列六块相同的 4x2 乐高积木的独特方式的数量。](http://www.math.ku.dk/~eilers/lego.html)您或许可以查看他们的工作（包括 Java 代码）以获取灵感。

从文本的浏览来看，他们似乎以两种不同的方式解决了这个问题：

1.  使用递归块定位和计数算法。
2.  使用蛮力 - 尝试六块砖在空间中的所有可能位置（即使是那些砖不接触的位置。）

提示：可能的组合数量，即使是少量的积木，也是**很大**的。这就是让乐高变得如此有趣的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T22:24:25.490

根据您期望的计算复杂性，您可以使用动态编程。

设 x1,x2,...xk 是一个解，使得组合 1 的 x1 个副本，组合 2 的 x2 个副本 ....

F([]) = F([x1=0]+F([x1=1]...

F([x1]) = F( [x1,x2=0]) + F( [x1,x2=1])....

该解决方案的复杂度为 O(n^k)，其中 n 是砖块的数量，k 是图形的数量。

# java - 在列表视图中显示多个数据

> ID：10094392
> 
> 赞同：0
> 
> 时间：2012-04-10T18:31:25.700
> 
> 标签：java, android, listview, for-loop

嗨，我是 android 开发的新手，我想问一下是否可以在来自数据库的列表视图中显示多个名称？例如

我想显示两个信息，一个是药物名称，第二个信息是所需的数量。

扑热息痛，要求：10。

阿纳多尔，要求：6。

等等。

此外，来自数据库的信息如下：

药物名称。最大库存数量。当前库存数量。

并且列表应该显示名称和（Max - Current）之间的区别。

这可能吗？谢谢你提前帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:03:43.250

是的，这绝对是可能的。如果你有一个`CursorAdapter`，那么你只需要使用它就`android.R.two_line_list_item.xml`可以让事情变得非常简单。最好的例子在这里：http: [//developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

要将它与 一起使用`ArrayAdapter`，您需要**自定义**. 我本可以给出一个示例代码，但你会从谷歌找到许多示例，例如[这里](https://stackoverflow.com/questions/2109271/can-any-one-provide-me-example-of-two-line-list-item-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:53:25.100

是的

您需要构建一个自定义列表才能执行此操作。看看这个很棒的教程来了解更多。[http://www.vogella.de/articles/AndroidListView/article.html](http://www.vogella.de/articles/AndroidListView/article.html)

# macros - 球拍宏可以接受关键字参数吗？

> ID：10094393
> 
> 赞同：12
> 
> 时间：2012-04-10T18:31:36.660
> 
> 标签：macros, scheme, racket, keyword-argument

我想在 Racket 中创建一个可以接受关键字参数的语法形式，就像某些函数一样。

将其简化为一个简单的示例后，我尝试编写：

```
(define-syntax sum-of-products
  (syntax-rules (#:extra)
    [(sum-of-products ([a b] ...))
     (+ (* a b) ...)]
    [(sum-of-products ([a b] ...) #:extra extra)
     (+ extra (* a b) ...)])) 
```

这样以下将起作用：

```
(sum-of-products ([2 2] [3 3])) → 13
(sum-of-products ([2 2] [3 3]) #:extra 5) → 18 
```

不幸的是，Racket 将此称为“错误语法”，因此显然这种尝试是不正确的。

这可以做到吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T18:38:50.273

句法模式中的关键字被视为与数字等文字相同，因此您无需将它们指定为关键字。（*仅*标识符需要。）因此以下工作（请注意，我修复了您在第二个示例中的错字）：

```
#lang racket
(define-syntax sum-of-products
  (syntax-rules ()
    [(sum-of-products ([a b] ...))
     (+ (* a b) ...)]
    [(sum-of-products ([a b] ...) #:extra extra)
     (+ extra (* a b) ...)]))
(sum-of-products ([2 2] [3 3]))
(sum-of-products ([2 2] [3 3]) #:extra 5) 
```

另请参阅[`syntax-parse`](http://docs.racket-lang.org/syntax/Parsing_Syntax.html)可以使[解析关键字](http://docs.racket-lang.org/syntax/Optional_Keyword_Arguments.html)更容易的实用程序。

# delphi - Delphi XE2 风格绘画

> ID：10094396
> 
> 赞同：3
> 
> 时间：2012-04-10T18:32:00.917
> 
> 标签：delphi, delphi-xe2, vcl-styles

在绘制 VCL 样式的窗口元素时，我遇到了不正确绘制角的问题。在具有圆角的样式上，我在控件的边界矩形和样式的圆角窗口角之间的空间中得到白色背景。

![在此处输入图像描述](../Images/5ba42ff9b1159baa9d19800a27314d39.png)

上图是使用 Aqua Light Slate 运行的，但任何带有圆角的样式都会出现同样的问题。我错过了什么？

```
type
  TSample = class(TCustomControl)
  protected
    procedure Paint; override;
  end;

{ TForm1 }
procedure TForm1.FormCreate(Sender: TObject);
var
  R: TRect;
  S: TSample;
begin
  R := ClientRect;
  InflateRect(R, -20, -20);
  S := TSample.Create(Application);
  S.Parent := Self;
  S.BoundsRect := R;
end;

{ TSample }
procedure TSample.Paint;
var
  Details: TThemedElementDetails;
begin
  Details := StyleServices.GetElementDetails(twCaptionActive);
  StyleServices.DrawParentBackground(Self.Handle, Canvas.Handle, Details, False);
  StyleServices.DrawElement(Canvas.Handle, Details, ClientRect);
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T03:25:11.393

好的，我花了几分钟回答你的问题，我找到了答案。绘制圆角的关键是调用[`StyleServices.GetElementRegion`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Themes.TCustomStyleServices.GetElementRegion)函数获取区域，然后使用[`SetWindowRgn`](http://msdn.microsoft.com/en-us/library/dd145102%28v=vs.85%29.aspx)函数将区域应用到控件。

检查这个样本

```
procedure TSample.Paint;
var
  Details : TThemedElementDetails;
  Region  : HRgn;
  LRect   : TRect;
begin
  Details := StyleServices.GetElementDetails(twCaptionActive);
  LRect := Rect(0, 0, Width, Height);
  StyleServices.GetElementRegion(Details, LRect, Region);
  SetWindowRgn(Handle, Region, True);
  StyleServices.DrawParentBackground(Self.Handle, Canvas.Handle, Details, False);
  StyleServices.DrawElement(Canvas.Handle, Details, ClientRect);
end; 
```

这就是结果

![在此处输入图像描述](../Images/77e1eaf2215158843c3cbf1389693998.png)

# javascript - ~~ 在 JavaScript/node.js 中有什么作用？

> ID：10094405
> 
> 赞同：11
> 
> 时间：2012-04-10T18:32:46.610
> 
> 标签：javascript, node.js

> **可能重复：**
> [JavaScript 中的“双波浪号”(~~) 运算符是什么？](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)

我在 node.js 库的源代码中找到了这段代码。`~~`对变量有什么影响`input`？

```
inArray[3] = ~~input; 
```

它还以其他方式使用：

```
return ~~ ((a - b) / 864e5 / 7 + 1.5); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T18:35:56.140

运算符翻转其`~`操作数的位。使用它两次翻转位，然后再次翻转它们，返回与操作数等效的标准 Javascript 值，但以整数形式。它是 的简写`parseInt(myInt)`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T18:35:25.863

这是截断值的一种骇人听闻的方式，有点像`Math.floor`这样，除了负数的行为不同。例如，截断 -15.9 ( `~~-15.9`) 给出`-15`，但取整它总是朝最小的数字舍入，所以`Math.floor(-15.9)`会给出`16`。

另一种方法[是 OR 与 zero](https://stackoverflow.com/questions/7487977/using-bitwise-or-0-to-floor-a-number)。

```
var a = 15.9 | 0; //a = 15 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T18:34:18.247

它将值转换为整数。

# c# - C# 正则表达式

> ID：10094410
> 
> 赞同：3
> 
> 时间：2012-04-10T18:33:00.530
> 
> 标签：c#, regex

我有纯文本文件 ( `.txt`)，其中包含一些表达式，我想用...替换无效的表达式 ...假设为零。

无效的表达式是包含`1+3^4^5`or`10+3+4*5+2^5^6^7`的表达式，即表达式不能包含`number^number^number^...`，它只能包含`number^number`。

我知道最好的方法是使用正则表达式，但我不知道如何在正则表达式中编写它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:36:40.487

检测多个幂的正则表达式是

```
(\d+\^){2,} 
```

（`{2,}`表示连续两次或多次）

* * *

刚刚运行了以下测试：

```
using System;
using System.Text.RegularExpressions;
namespace SampleNamespace
{
    public class SampleClass
    {
        public static void Main()
        {
            string line = "1+3^4^5  10+3+4*5+2^5^6^7";              
            System.Console.WriteLine(line);
            line = Regex.Replace(line, @"(\d+\^){2,}", "0");
            System.Console.WriteLine(line);
        }
    }
} 
```

输出是：

```
>RegexTest.exe
1+3^4^5  10+3+4*5+2^5^6^7
1+05  10+3+4*5+07 
```

它未能替换尾随 \d 但它确实有效。您可以通过对正则表达式进行以下更正来获取尾随 \d：

```
(\d+\^){2,}\d+ 
```

* * *

如果你想清除包含双重幂的整个表达式，只需使用

```
.*(\d+\^){2,}.* 
```

在您的替换表达式中。当`.*`更换发生时，任一侧将吞噬双电源周围的整个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:36:58.487

这是一个正则表达式：

```
Regex re = new Regex(@"(\d+\^){2}");

...

if(re.IsMatch(myData)) {
    // It's not valid
} 
```

# c# - LINQ 选择新建从超类型子类型关系创建一个表

> ID：10094412
> 
> 赞同：0
> 
> 时间：2012-04-10T18:33:05.787
> 
> 标签：c#, join, linq-to-entities, relational-database

我正在使用一个 SQL 数据库（对它来说还是相当新的），并试图创建“一对一”或子表超表关系。我正在使用 C# 和 LINQ-to-Entities。

作为一个常见的例子，我有 3 个表。

```
Person:
PersonId, Age, p1, p2, ..., pn

Student:
PersonId, Grade, GPA, s1, s2, ...., sn

Teacher:
PersonId, PrimarySubject, YearsAtSchool, IsCoach, .... 
```

我希望能够做的是基于 Person 的查询，然后获取相关的子类型数据。我有 relevatn TypeId 表来确保关系。

假设我查询了一个人并且他们是学生，那么我想得到：

```
QueriedResult
PersonId, Age, p1, ..., pn, Grade, GPA, s1, ..., Sn 
```

不幸的是，选择新的 {p.PersonID, etc} 是不可行的，因为在我的情况下子表和元素太多。

每当我使用我的代码时，我都会得到两个单独的表的 IEnumerable。我提供的示例代码在没有关联学生时返回空值，如果此人是学生，则在第二列中返回一个表。

```
var query = (from p in Persons.AsEnumerable()
join s in Students on p.PersonId equals s.PersonId
select new {p, s}); 
```

尽管所有建议的方法似乎都要求 p & s 是相同的表类型，但我听说过很多关于“扁平化”的讨论。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:09:13.017

您正在为建模继承而苦苦挣扎。`Student`两者`Teacher`都是`Person`s。有几种方法可以将继承的类存储在关系数据库中，实体框架支持这些方法。

可能对您最有帮助的方法称为[按具体类型表 (TPC)](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)，这意味着每种类型在数据库中都有自己的表，而 EF 负责将子类型存储在正确的表中。该链接还提到了另外两种常用方法（TPH 和 TPT）。如果您的子类有相对多的共同点，TPT 也可能是合适的。

所以你会有

```
abstract class Person { PersonId, ... }

class Student : Person { Grade, ... }

class Teacher: Person { PrimarySubject, ... } 
```

如果你想要`Student`你做

```
context.Persons.OfType<Student>().Where(.... 
```

这会为您提供`QueriedResult`预期的结果。

注意`Person`是抽象的。如果你想让它具体化，你最好创建一个抽象`PersonBase`类（或类似的）并`Person`从它派生，就像`Student`and一样`Teacher`。

# spring - RMIServiceExporter 不工作，无法连接到端口 1099 的 RMI localhost

> ID：10094416
> 
> 赞同：3
> 
> 时间：2012-04-10T18:33:28.807
> 
> 标签：spring, spring-mvc, rmi

我已使用以下配置将 Spring 托管服务 bean 导出到 RMI 服务中：

```
<bean class="org.springframework.remoting.rmi.RmiServiceExporter">
        <property name="serviceName" value="spitterService"/>
        <property name="service" ref="spitterService"/>
        <property name="serviceInterface" value="com.spitter.service.SpitterService"/>
        <property name="registryHost" value="127.0.0.1"/>
        <property name="registryPort" value="1099"/>
 </bean> 
```

但是当我加载我的spring配置文件（在Tomcat中部署我的应用程序）时，它会抛出以下异常

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.remoting.rmi.RmiServiceExporter#0' defined in ServletContext resource [/WEB-INF/spitter-servlet.xml]: Invocation of init method failed; nested exception is java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: 
    java.net.ConnectException: Connection refused: connect
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1412)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4681)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5184)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5179)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: 
    java.net.ConnectException: Connection refused: connect
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
    at sun.rmi.registry.RegistryImpl_Stub.list(Unknown Source)
    at org.springframework.remoting.rmi.RmiServiceExporter.testRegistry(RmiServiceExporter.java:415)
    at org.springframework.remoting.rmi.RmiServiceExporter.getRegistry(RmiServiceExporter.java:326)
    at org.springframework.remoting.rmi.RmiServiceExporter.prepare(RmiServiceExporter.java:264)
    at org.springframework.remoting.rmi.RmiServiceExporter.afterPropertiesSet(RmiServiceExporter.java:227)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1469)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1409)
    ... 20 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
    ... 30 more 
```

请帮帮我..提前谢谢

我还创建了一个 rmi 客户端来使用 RMI 服务

```
public class SpitterMain {

    public static void main(String[] args){
        String serviceURL = "rmi://localhost:1099/spitterService";
        try {
            SpitterService spitterService = (SpitterService) Naming.lookup(serviceURL);
            Spitter spitter = spitterService.getSpitter("panneerselvam");
            List<Spittle> spittles = spitterService.getSpittlesForSpitter(spitter.getId(), 25);

            System.out.println("Welcome>"+spitter.getName()+"( "+spitter.getUsername()+" )");

            System.out.println("Your Recent Spittles are:");

            for(Spittle spittle: spittles){
                System.out.println(spittle.getText()+" ON "+spittle.getWhen());
            }

        } catch (NotBoundException ex) {
            Logger.getLogger(SpitterMain.class.getName()).log(Level.SEVERE, null, ex);
        } catch (MalformedURLException ex) {
            Logger.getLogger(SpitterMain.class.getName()).log(Level.SEVERE, null, ex);
        } catch (RemoteException ex) {
            Logger.getLogger(SpitterMain.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

现在我得到以下异常..

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: org.springframework.remoting.rmi.RmiInvocationHandler (no security manager: RMI class loader disabled)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at java.rmi.Naming.lookup(Naming.java:84)
    at com.spitter.client.SpitterMain.main(SpitterMain.java:28)
Caused by: java.lang.ClassNotFoundException: org.springframework.remoting.rmi.RmiInvocationHandler (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:535)
    at java.rmi.server.RMIClassLoader$2.loadProxyClass(RMIClassLoader.java:628)
    at java.rmi.server.RMIClassLoader.loadProxyClass(RMIClassLoader.java:294)
    at sun.rmi.server.MarshalInputStream.resolveProxyClass(MarshalInputStream.java:238)
    at java.io.ObjectInputStream.readProxyDesc(ObjectInputStream.java:1530)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1492)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    ... 3 more 
```

请检查这些家伙...再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:40:07.787

我认为，如果您删除该`registryHost`属性，它将在 1099 上动态创建一个主机，因为还没有主机。

```
<bean class="org.springframework.remoting.rmi.RmiServiceExporter">
    <property name="serviceName" value="spitterService"/>
    <property name="service" ref="spitterService"/>
    <property name="serviceInterface" value="com.spitter.service.SpitterService"/>
    <property name="registryPort" value="1099"/>
</bean> 
```

要么在 1099 上启动[RmiRegistry](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/remoting/rmi/RmiRegistryFactoryBean.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:28:36.997

您必须创建`myRmiExporter`和扩展`RMIServiceExporter` ，然后使用此主体实现此方法

```
protected Registry getRegistry(String registryHost, int registryPort,
                                   RMIClientSocketFactory clientSocketFactory, RMIServerSocketFactory serverSocketFactory)
            throws RemoteException
    {

        if (registryHost != null)
        {
            // Host explictly specified: only lookup possible.
            if (logger.isInfoEnabled())
            {
                logger.info("Looking for RMI registry at port '" + registryPort + "' of host [" + registryHost + "]");
            }
            try
            {
                Registry reg = LocateRegistry.getRegistry(registryHost, registryPort, clientSocketFactory);
                testRegistry(reg);
                return reg;
            }
            catch (RemoteException ex)
            {
                logger.debug("RMI registry access threw exception", ex);
                logger.warn("Could not detect RMI registry - creating new one");
                // Assume no registry found -> create new one.
                LocateRegistry.createRegistry(registryPort);
                Registry reg = LocateRegistry.getRegistry(registryHost, registryPort, clientSocketFactory);
                testRegistry(reg);
                return reg;
            }
        }

        else
        {
            return getRegistry(registryPort, clientSocketFactory, serverSocketFactory);
        }
    } 
```

它起作用了

# c - 将 C 可执行文件转换为 SIS 格式

> ID：10094418
> 
> 赞同：1
> 
> 时间：2012-04-10T18:33:42.700
> 
> 标签：c, symbian, sis

我的任务是将 flite tts 移植到 symbian 操作系统。我们曾尝试编译 flite tts 并将其转换为 sis 格式（symbian os 的安装文件）。有一个名为 Qtcreator 的 IDE，它将为移动设备创建可执行文件，例如 Symbian、Meego 等。我们使用该 IDE 来编译 flite tts，因为 flite 代码是在 c 中的。我们能够正确编译代码并创建 flite 可执行文件。但我们需要将其转换为 sis 文件。我们不能这样做。尽管它正确编译了 flite c 代码，但为了转换目标设备的可执行文件，它希望代码以其他格式（不是纯 c）编写。同时我们不能以该格式重写完整的 flite 代码。它需要时间来学习和重写。我们真的很震惊。我们不知道如何进一步进行。你对此有什么想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:45:55.210

在 Qt Creator（或 Symbian SDK）中创建一个 Hello World 应用程序，并从应用程序的入口点调用您的 C 函数。

# android - eclipse模拟器不断重新启动而不是使用已经启动的模拟器

> ID：10094419
> 
> 赞同：0
> 
> 时间：2012-04-10T18:33:46.993
> 
> 标签：android, eclipse, android-emulator

我的原子处理器索尼在加载大约 20 分钟后启动模拟器需要很长时间

```
[2012-04-10 13:20:06 - killthemall-training] Failed to install killthemall-training.apk on device 'emulator-5554!
[2012-04-10 13:20:06 - killthemall-training] (null)
[2012-04-10 13:20:06 - killthemall-training] Launch canceled! 
```

当我再次点击运行时，它开始启动一段时间的新模拟器，并且失败的安装周期继续。如何让它使用我已经最终启动的模拟器？

我还阅读了程序文件夹中的 adk 会因为空间而导致长时间启动问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:17:20.597

我发现在运行配置中取消选中“擦除用户数据”会导致每次都不会出现新的模拟器。我必须早点检查一下我遇到的另一个问题。

# java - Java Sockets 可以在 LAN 上工作，但不能在 Internet 上工作？

> ID：10094420
> 
> 赞同：4
> 
> 时间：2012-04-10T18:33:50.437
> 
> 标签：java, performance, sockets, multiplayer

您好，我正在制作 Java 多人游戏，一切正常。它拥有人们需要的一切，但我发现了一个问题，它使用 ServerSocket 作为服务器，使用 Socket 作为客户端，工作正常，但最大的问题是它不能在全球范围内工作。只有局域网，我什至尝试过 Hamachi，但也没有用。

你有什么想法会起作用吗？

更多信息：我使用服务器中的特定线程来接受、发送和接收套接字，并使用客户端中的特定线程来发送和接收。它发送一个我制作并包含所有信息的对象。

```
ip = InetAddress.getLocalHost().getHostAddress() + ":" + port;

server = new ServerSocket();

//This asks you if you want to use a specific IP or just the one that we got in first line
String socketaddress;
socketaddress = (String) JOptionPane.showInputDialog(null, "IP: ", "Info",JOptionPane.INFORMATION_MESSAGE,null,null,InetAddress.getLocalHost().getHostAddress());
server.bind(new InetSocketAddress(socketaddress, port));

//Here it starts the accept thread, and then it starts send and receive threads
new Thread(accept).start(); 
```

以下是我认为最重要的客户资料：

```
socket = new Socket(ip,port);

String set_username = System.getProperty("user.name");
set_username = (String) JOptionPane.showInputDialog(null, "Username: ", "Info", JOptionPane.INFORMATION_MESSAGE,null,null,set_username);
username = set_username;

//It sends the username to server
ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
oos.writeObject(username);

//Then server responds with a message
ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
String response = (String) ois.readObject();

//This writes the server' message   
JOptionPane.showMessageDialog(null, response, "Message",JOptionPane.INFORMATION_MESSAGE); 
```

另外我还有另一个问题，套接字从一个客户端到另一个客户端需要 3 或 4 秒，它应该几乎是即时的，因为它在同一个网络上，而且我有一个快速的互联网。

编辑：我尝试使用客户端在同一台电脑上创建服务器，然后在使用我的全球 IP 加入时，它不起作用:(

编辑：它的工作我很高兴现在我所要做的就是在防火墙中添加端口，非常感谢你们：D。现在我可以和我的朋友一起玩了：3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:39:42.707

当您连接到 Internet 上的 Java Web 服务器时，它将使用 ServerSocket 和 Socket。这工作得很好。

可能不起作用的是 Internet 上的用户无法连接到您，因为您位于防火墙或路由器/NAT 后面（与 Java 无关）。在 Internet 上的用户可以通过 IP 地址远程登录到您机器上的端口之前，使用 Java 不会使这项工作有任何不同。

顺便说一句：在创建 ObjectInputStream 之前，您应该始终创建 ObjectOutputStream AND flush() ，否则另一端的 ObjectInputStream 可能会永远阻塞。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T18:41:37.300

您需要阅读[防火墙](http://en.wikipedia.org/wiki/Firewall_%28computing%29)（控制允许从 LAN 外部连接到机器的设备）、[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)（可以将公共 IP 地址转发到内部 IP 地址）和一般[IP 寻址](http://en.wikipedia.org/wiki/IP_addressing)（这会给您一些有关 IP 地址如何工作、什么是公共/私有以及数据如何跨网络传输的信息）。

从那里开始，如果在以后的问题中，您将发布您正在连接**的**IP 地址和**连接**的 IP 地址（公共或其他）、正在发生的错误消息（不仅仅是代码）以及您的内容，这将非常有帮助。我已经尝试过但失败了。stackoverflow 上的 Q/A 并不意味着是故障排除会话——我们确实需要特定的错误消息、端口转发的配置方式、防火墙的配置等，以及您尝试过的事情。目前，鉴于您发布的代码，全球游戏存在许多潜在问题（尽管代码实际上可能不是问题 - 它可能更多是配置问题）。

我基本上是说虽然这是一个非常广泛的答案，但是您的问题也非常广泛，并且不涉及明确的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T23:50:48.837

您需要来自 ISP 的静态 IP 地址，并且需要转发路由器中的端口以指向您正在使用的服务器的 LAN IP。192.168.1.xxx 注意：一些 ISP 只向企业客户提供静态 IP。请咨询您的 ISP。还要确保您用作服务器的计算机上的防火墙已打开您使用的端口。我相信您知道这一点，因为您说您可以在 LAN 上运行它。但我想我会为那些阅读本文而无法通过 LAN 和 WAN 连接的人提及它。

# asp.net - 在跨平台移动应用程序中使用 REST 和 ASP.NET Web Api 进行身份验证和授权

> ID：10094424
> 
> 赞同：7
> 
> 时间：2012-04-10T18:34:10.743
> 
> 标签：asp.net, security, http, rest, asp.net-web-api

我正在编写一个使用 ASP.NET Web Api 模板的服务器并实现休息服务。该服务器将作为移动游戏的后端，用于存储用户的高分、进度和其他信息。我查看了许多方法（[this](https://stackoverflow.com/questions/9508021/how-to-secure-a-rest-api-for-mobile-applications)、[this](http://www.leastprivilege.com/ASPNETWebAPISecurity4ExamplesForVariousAuthenticationScenarios.aspx)和[this](https://stackoverflow.com/questions/3963877/creating-an-api-for-mobile-applications-authentication-and-authorization)），但在决定使用哪种方法时遇到了麻烦。就我而言，我想主要防止分数欺诈，因为每个用户帐户都将包含有限的信息（在他们的电子邮件之外）。这是理想情况下会发生的事情。

1.  用户首次打开应用
2.  为用户提供了自定义用户名的选项，并且由服务器检查，因此没有重复
3.  给用户一个随机生成的六位数密码（这样他们就可以在不同的手机上使用相同的帐户）
4.  用户输入电子邮件地址
5.  在服务器上创建新用户（**服务器验证该帐户是由我的客户端应用程序的有效实例创建的**）
6.  用户玩游戏，上传结果（**通过基本认证？**）
7.  用户可以查看全局结果（非用户特定的 GET 方法没有安全性）

我无法缩小要使用的身份验证类型（没有浏览器登录屏幕等）和授权方法。任何帮助将不胜感激。

-塔马斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:32:57.637

即使您使用基本身份验证，您也将希望使用 HTTPS。如果您使用的是 HTTPS，那么您也可以使用客户端证书来验证客户端。只有拥有有效证书的客户才能获得访问权限。如果您不向其他消费者开放此 API，并且它只会由您开发的客户端使用，您可能需要考虑 WS-Security 和 WCF。[这里](http://blogs.msdn.com/b/vbertocci/archive/2005/04/25/end-to-end-security-or-why-you-shouldn-t-drive-your-motorcycle-naked.aspx)有一个有趣的描述，使用裸体摩托车司机作为隐喻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:15:06.163

如果它来自不同的客户端/设备，则基于令牌的身份验证之类的东西可能对您有用。

这个想法很简单，你的 Web 服务中有 Authentication 方法。此方法负责检查凭证和颁发“令牌”。所有进一步的客户端调用都在使用一些简单的结构，例如 SHA1 或 MD5 字符串。

如果客户端通过身份验证，它将在整个会话期间存储令牌。其余的 Web 服务方法，例如 SaveScore，只接受令牌作为参数。然后他们负责检查它是否有效。如果令牌无效，则不会为呼叫提供服务。

# facebook - 自定义 facebook 角色（开发人员应用程序）

> ID：10094426
> 
> 赞同：0
> 
> 时间：2012-04-10T18:34:14.410
> 
> 标签：facebook, facebook-graph-api

我有一个 facebook 应用程序，它需要 2 个角色：“基本”用于需要基本评论能力的人，“编辑”用于那些被批准成为编辑的人。

因此，我希望我可以在我的 facebook 应用程序中以某种方式定义一个“编辑器”角色（我是否使用自定义操作），并让我的网站的新注册/登录用户能够请求成为“编辑器”。

是否有一个 facebook 工作流程，我不仅可以使用它来定义自定义角色，而且还有一个事件允许我的网站接收用户请求成为编辑的电子邮件，然后通过电子邮件将批准链接发回给他们如果该用户获得批准，请关注？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:38:01.837

您最好将该工作流程构建到您的应用程序本身中，而不是（ab）出于相同目的使用 Facebook 角色。

# javascript - 一个条目的 mongodb-wrapper 和 ObjectId

> ID：10094431
> 
> 赞同：0
> 
> 时间：2012-04-10T18:34:36.993
> 
> 标签：javascript, node.js, mongodb

我正在尝试通过 node.js 和 mongodb-wrapper 从我的 mongodb 中选择/删除条目。我通过 http 请求将条目的 id 作为字符串获取。然后我想删除具有特定 id 的条目。

```
app.delete('/posts/:id', function(req, res) {
res.header("Access-Control-Allow-Origin", "*");
db.posts.remove({"_id": req.params.id}, function(err) {
    if (err) return res.send(err.message, 500); // server error
    res.send(200);
  })
res.send("ok");
}); 
```

但这不起作用。我已经尝试了几种方法，但没有删除条目。我有红色的东西，我必须将字符串转换为 ObjectId，但直到现在我还没有找到任何如何通过 mongodb-wrapper 执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:10:06.687

通过使用：`{"_id": req.params.id}`您正在查询字符串而不是 objectId。您需要`ObjectId`从字符串创建一个才能使用它：

```
var ObjectID = require('mongodb').ObjectID;
var oid = new ObjectID(req.params.id); 
```

请注意，如果 req.params.id 中的数据无法转换为有效的 ObjectID，这将引发错误。

# c# - C# - 意外的身份验证方法 mysql_native_password 异常

> ID：10094434
> 
> 赞同：1
> 
> 时间：2012-04-10T18:35:04.977
> 
> 标签：c#, mysql, exception, connection

我对此一无所知，但我一直在尝试使用 SQL 数据库进行一些练习。我尝试了 MSSQL 并感到沮丧，所以我尝试了 MySQL 并走得更远。数据库似乎已经启动并正在运行，我什至做了一个查询来创建一个表。虽然在尝试连接 Microsoft 的 C# Express 版本时出现异常：“意外的身份验证方法 mysql_native_password”我知道密码是正确的。我什至在引用 MySQL.Data.dll。这是我的代码，我在 connection.Open() 上遇到异常。有人可以帮帮我吗？

```
 public Form1()
     {
      MySqlConnection connection = new MySqlConnection("Data Source = localhost;          Initial Catalog = MySQL55; Integrated Security = SSPI; User ID = root; Password = <REMOVED>;");

        try
        {
            connection.Open();
        }

        finally
        {
            if (connection != null)
            {
                connection.Close();
            }
        }
     } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T21:25:01.833

您使用的是什么提供商？如果您使用的是 MySQL Connecter .net，那么您的连接字符串应该类似于...

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

如果您使用的是 eInfoDesigns 提供程序，那么...

```
Data Source=myServerAddress;Database=myDataBase;User ID=myUsername;Password=myPassword;Command Logging=false; 
```

如果SevenObjects

```
Host=myServerAddress;UserName=myUsername;Password=myPassword;Database=myDataBase; 
```

如果德瓦特

```
User ID=root;Password=myPassword;Host=localhost;Port=3306;Database=myDataBase; Direct=true;Protocol=TCP;Compress=false;Pooling=true;Min Pool Size=0;Max Pool Size=100;Connection Lifetime=0; 
```

如果 MySQLDriverCS

```
Location=myServerAddress;Data Source=myDataBase;User ID=myUsername;Password=myPassword;Port=3306;Extended Properties=""""; 
```

如果 MySql OLEDB

```
Provider=MySQLProv;Data Source=mydb;User Id=myUsername;Password=myPassword; 
```

如果.Net OLEDB

```
Provider=MySQLProv;Data Source=mydb;User Id=myUsername;Password=myPassword; 
```

如果 MySQl 连接器

```
Driver={MySQL ODBC 5.5 Driver};Server=localhost;Database=myDataBase; User=myUsername;Password=myPassword;Option=3; 
```

更多帮助可以在这里找到[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

实际上使用 SQL Server 要容易得多，因为它是内置的，而 VS 旨在使用它。

# c - strcmp() 给出分段错误：11 和来自整数警告的指针

> ID：10094436
> 
> 赞同：0
> 
> 时间：2012-04-10T18:35:07.880
> 
> 标签：c, segmentation-fault, avr, strcmp

我的问题是 strcmp() 函数会产生以下问题：

```
main.c:35: warning: passing argument 1 of ‘strcmp’ makes pointer from integer without a cast 
```

在编译和运行程序时执行以下操作：

```
Segmentation fault: 11 
```

我知道错误是什么意思，我只是不知道有什么其他方法可以做到……考虑过使用 itoa() 或 sprintf()，但我需要十六进制的校验和，所以看不到如何完成那。

代码如下：

```
#include "checksum.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main()
{
    char nmea[] ="$GPRMC,131637.000,A,5820.0658,N,00834.5652,E,0.00,,090911,,,A*7E";
    unsigned char checksum[] = "00";
    char data[82];
    int length = strlen(nmea);
    int k = 0;
    int i;
    unsigned char XOR;

    checksum[0] = nmea[(length-2)];
    checksum[1] = nmea[(length-1)];

    for(i=1;i < (length-3);i++){
        data[(i-1)] = nmea[i];
    }
    int dataLength = strlen(data);

    for (XOR = 0, i = 0; i < dataLength; i++)   //XORer for å finne checksum
        XOR ^= (unsigned char)data[i];

    printf("*******************************************************\n");
    printf("Calculating checksum...\n");

    printf("Read checksum: %s\n",checksum);
    printf("Read data: %s\n",data);
    printf("Calculated checksum: %X \n",XOR);

    if(strcmp(XOR,checksum) == 0){          //sammenligner checksumer.
        printf("Checksum: OK!\n");
        //return 1;
    }
    else{
        printf("Checksum: Mismatch!\n");
        //return 0;
    }

    printf("*******************************************************\n");
    //nmeachecksum(buf);
    return 0;
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:40:02.353

```
char XOR[2] = { 0, 0 }; 
```

然后`XOR[0]`随处使用。

以上只是我对您的代码*实际*尝试执行的操作的无段错误重写。

*它应该做什么*。. . 这`strcmp()`是将二进制文本与相同值的格式化版本进行比较，因此它不起作用。您的`unsigned char XOR;`（或者可能是 8 位`<stdint.h>`类型）是正确的。但是将此与`==`作为标量而不是与进行比较`strcmp()`。

*你把它比作什么*。. . 您需要将您的 NMEA 可打印十六进制转换为适合`==`使用 sscanf() 的标量操作数，或者只打开十六进制转换代码。¹

* * *

^(1.许多stackoverflow答案中都有十六进制输入转换代码示例。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:37:49.810

看来（通过简要查看代码）您期望正确的校验和为 0。如果是这样，那么只需与零进行比较：

```
if ( XOR == 0 )
    printf( "OK\n" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:40:31.883

`strcmp`需要一个空终止的 C 字符串。你的`XOR`变量甚至不是一个数组。这是一个单一的`unsigned char`价值。（我有点惊讶这甚至在没有警告你的情况下编译。）无论如何，`memcmp`比较二进制数据时最好使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:40:52.847

XOR 是单个字节。校验和是一个无符号字符数组。如果编译器通过警告 (*) 让代码通过，我会转储它。

(*)：是的，我知道技术上这是一个“诊断”。

# wcf - webHttpBinding 安全不包含消息节点？

> ID：10094442
> 
> 赞同：4
> 
> 时间：2012-04-10T18:35:43.477
> 
> 标签：wcf, web-config, client-certificates

我正在尝试将客户端证书应用于 WCF REST 服务。我发现了一些有关应用具有以下内容的客户端证书的详细信息：

```
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpEndpointBinding">
      <security>
        <message clientCredentialType="Certificate" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

在这种情况下，似乎没有问题。但是，我正在使用 webHttpBinding 并且收到一条错误消息，指出`message`该节点的子节点无效`security`。

我是否要不正确地设置客户端证书？谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T19:17:57.387

wsHttpBinding 配置中的消息节点是关于配置 SOAP 消息安全头的，这就是为什么它对不是基于 SOAP（它是 REST）的 webHttpBinding 无效的原因

REST 服务的适当安全性很可能是传输级别 - 即 HTTPS。

如果您想使用消息级别的安全性，您需要切换到 SOAP，但消息级别是相当专业的，在大多数情况下没有必要。

如果您需要为 webHttpBinding 使用证书（这意味着使用双向 SSL），您需要将 securityMode 设置为 Transport 并将 clientCredentialType 属性设置为 Certificate。在配置中，它在服务器端看起来像这样

```
 <webHttpBinding>
    <binding name="ClientCertServerSide">
      <security mode="Transport" >
       <transport clientCredentialType="Certificate"/>
      </security> 
    </binding>
  </webHttpBinding> 
```

在客户端，您可以在代码（使用`HttpWebRequest.ClientCertificates`属性）或配置中指定证书。在配置中它看起来像

```
 <endpointBehaviors>
        <behavior name="ClientCertClientSide">
            <clientCredentials>
                <clientCertificate findValue="put the cert name here" storeLocation="put the store here" />
            </clientCredentials>
        </behavior>
    </endpointBehaviors> 
```

# php - 使用 php SOAPclient 并出现错误：“此页面必须通过安全通道查看”

> ID：10094448
> 
> 赞同：0
> 
> 时间：2012-04-10T18:35:56.520
> 
> 标签：php, soap

我正在尝试使用 php SOAPclient 从 Web 服务调用方法，但出现以下错误：

```
PHP Fatal error:  Uncaught SoapFault exception: [HTTP] Forbidden ( The page must be viewed over a secure channel (Secure Sockets Layer (SSL)). Contact the server administrator.  ) 
Stack trace:
#0 [internal function]: SoapClient->__doRequest('<?xml version="...', 'http://www.ebri...', 'eBridge.WebServ...', 1, 0)
#1 /var/application/test-control4-xml.php(284): SoapClient->__call('GetDocumentList', Array)
#2 /var/application/test-control4-xml.php(284): SoapClient->GetDocumentList(Array)
#3 {main} 
```

这是我正在使用的代码：

```
$client = new SoapClient("https://www.ebridgeservices.com/ePortalService.asmx?WSDL");
$params=
array( 'login' => $user,
    'password' => $password,
    'status'=>'All',
    'docType'=>'850',
    'fromDate'=> $from_date,
    'toDate'=> $to_date,        
    'partner'=>'OurPartner') ;          
$results = $client->GetDocumentList($params);       
var_dump($results->GetDocumentListResponse); 
```

如您所见，我使用的是 https 地址，所以我不确定为什么会收到此错误。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:56:16.267

此错误的常见原因是您的 php 版本在没有 openssl 库的情况下编译。简而言之，您的 php 无法通过 https 连接发出请求。

检查你的 phpinfo() 输出，看看你有没有 openssl 或任何类型的 SSL 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:05:18.270

将该 WSDL 提供给[http://soapclient.com/soaptest.html](http://soapclient.com/soaptest.html)表明该 WSDL 文件中的链接指向其服务器上的 http:// URL，而不是 https:// 。可能想问问他们对此的支持。

# kinect - 应用程序在后台时无法正常工作

> ID：10094449
> 
> 赞同：0
> 
> 时间：2012-04-10T18:36:07.580
> 
> 标签：kinect

我为一些标准的 Windows 应用程序创建了 NUI。我的问题是，当我启动我的应用程序和 Windows 应用程序时，我的应用程序无法正常工作。我有手势绑定到几个键（例如右箭头）。

现在，当我的应用程序在前台时，一切正常，但是当 windows 应用程序在前台并且我的应用程序在后台时。键绑定不起作用。

我确定我的应用程序正在识别手势，因为当我将控制台与调试一起放置时，我可以看到手势被正确识别并调用了正确的代码片段。那么为什么当windows应用程序处于全屏模式并且我的应用程序在后台运行时绑定到键不起作用？

我希望问题足够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:21:20.840

问题与我的不同主题有关：[break 命令后循环多次命中](https://stackoverflow.com/questions/10079711/multiple-hits-in-loop-after-the-break-command)

我创建的一般解决方法阻止了箭头击中。日志记录没问题，这就是为什么我没有注意到这一点。在代码分解、拆分函数等之后一切正常

# extjs - 如何子类化 ExtJS 代理 - 使用 MVC？

> ID：10094453
> 
> 赞同：0
> 
> 时间：2012-04-10T18:36:33.587
> 
> 标签：extjs

我已经使用 Ext.define 定义了我的代理子类，然后通过在代理配置中包含我的自定义类型在我的模型中引用它：

```
Ext.define('MyApp.model.MyModel', {
  extend : 'Ext.data.Model',
  fields : ['first','last'],
  proxy : {
    type : 'customProxy'
  }
} 
```

当 ExtJS 尝试加载它寻找的代理类`'proxy/cusomProxy'`而不是`'app/proxy/customProxy'`我期望的方式时。子类代理不应该存储在 app.proxy 文件夹中吗？

（顺便说一句，为什么代理使用'type'而不是'xtype'来声明是类？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:35:09.300

我建议将代理配置（而不是声明！）放入商店类。你可以使用类似的东西：

```
this.proxy = Ext.create('My.new.Prpxy', {
}) 
```

# ruby-on-rails-3 - 无法组织输入集合中的数据

> ID：10094456
> 
> 赞同：0
> 
> 时间：2012-04-10T18:36:41.810
> 
> 标签：ruby-on-rails-3, formtastic

我`payment_type`保存了 3 个元素的模型。我也有一个`order`，我想在哪里存储`payment_type_id`。我在订单视图中写道：
`<%= f.input :pay_type_id, :as => :select, collection: PaymentType.names ...%>`
但`payment_type_id`已经保存为 0。据我所知，我正在尝试记录`payment_type.name`而不是`payment_type.id`. 我必须写什么`collection:`来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:50:40.423

```
<%= f.select :pay_type_id, PaymentType.all.collect {|x| [x.name, x.id]} %> 
```

这将在下拉列表中向用户显示 pay_type 的名称，但将 pay_type 的 id 提交到您的表单。

# android - Android Intent putExtra(String, Serializable)

> ID：10094457
> 
> 赞同：1
> 
> 时间：2012-04-10T18:36:43.663
> 
> 标签：android, android-activity, android-intent

如果这个问题已经得到解答，我很抱歉，我搜索了很多，但我找不到任何与我的问题有关的问题。

我正在编写一个从互联网数据库获取数据的安卓应用程序。我的第一个活动从数据库中检索数据，我尝试将整个数据库的引用传递给另一个活动。

它简要地看起来像这样：

```
//server is wrapper class for my database connection/ data retrieving
Server server = new Server(...connection data...);
server.connect();
server.filldata(); 
```

之后我尝试将其传递给另一个活动

```
Intent intent = new Intent(this, OtherActivity.class);
intent.putExtra("server", server); //server, and all implements Serializable
startActivity(intent); 
```

在此之后我得到一个 java.lang.reflect.InvocationTargetException 没有解释，问题可能是什么。

如果您知道将对象（int、string...除外）传递给另一个活动的方法，请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:50:44.103

您的类`Server`应该实现接口`Parcelable`，以便通过捆绑传输其对象。

请参阅下面的示例，该示例可[在此处](http://developer.android.com/reference/android/os/Parcelable.html)获得：

```
 public class MyParcelable implements Parcelable {
     private int mData;

     public int describeContents() {
         return 0;
     }

     public void writeToParcel(Parcel out, int flags) {
         out.writeInt(mData);
     }

     public static final Parcelable.Creator<MyParcelable> CREATOR
             = new Parcelable.Creator<MyParcelable>() {
         public MyParcelable createFromParcel(Parcel in) {
             return new MyParcelable(in);
         }

         public MyParcelable[] newArray(int size) {
             return new MyParcelable[size];
         }
     };

     private MyParcelable(Parcel in) {
         mData = in.readInt();
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T07:02:52.513

For any object which needs to be passed via Bundle must implement the **Parcelable** or **Seralizable** interface.Intent provides both the interfaces:

```
putExtra(String name, Parcelable value)
putExtra(String name, Serializable value) 
```

[https://developer.android.com/reference/android/content/Intent.html](https://developer.android.com/reference/android/content/Intent.html)

But it is advisable to use Parcelable as it is written specifically for Android and is light-weight in nature.

# python - Python，如何将进度条链接到 distutils.dir_util.copy_tree

> ID：10094458
> 
> 赞同：4
> 
> 时间：2012-04-10T18:36:43.623
> 
> 标签：python, python-2.7

我做了一个小应用程序，基本上在某些时候我调用 distutils.dir_util.copy_tree 将文件复制到目的地。谁能帮我链接一个基本的进度条，例如：

```
[======]50% 
```

到复制过程......不幸的是，我无法猜测复制文件夹树需要很长时间，因为它会不时有所不同。提前感谢任何会回答我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:47:33.607

`distutils.dir_util.copy_tree()`不提供可用于此的回调。您将需要用于`os.walk()`枚举文件系统对象，然后用于`shutil.copy[2]()`复制实际对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:53:42.550

Corey Glodberg 写了一个简单的库，用于在命令行应用程序上执行 ascii 进度条，也许你会觉得它很有趣：

[http://coreygoldberg.blogspot.com.es/2010/01/python-command-line-progress-bar-with.html](http://coreygoldberg.blogspot.com.es/2010/01/python-command-line-progress-bar-with.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T21:36:36.847

正如 Python 的文档中所解释的，您可以为 shutil.copytree 提供回调。

```
from shutil import copytree

def _countFiles(path, names):
    #do someting with "path" and "names"
    return []   # nothing will be ignored

copytree(source, destination, ignore=_countFiles) 
```

我没有编写代码来取得进展，但你明白了：

1.  计算目录（和子目录）中的文件
2.  在“_countFiles”中，增加已处理文件的数量
3.  进度 = nb_processed_files * 100 / nb_total_files

问候

# cakephp - cakephp 2.1 中“组件”和“插件”的区别？

> ID：10094460
> 
> 赞同：0
> 
> 时间：2012-04-10T18:37:03.243
> 
> 标签：cakephp

cakephp 中的“插件”和“组件”有什么区别？我有一些我认为是组件的东西 - 因为它们加载了

```
var $components = array(...); 
```

但是现在我已经升级到 cakephp 2.1（从 1.3），我被告知这些实际上是无用的错误消息的“插件”。组件只是插件的另一个名称......还是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:37:41.013

组件和插件在 Cake 2.0 中仍然是独立的实体。[根据手册，](http://book.cakephp.org/2.0/en/controllers/components.html)组件是“控制器之间共享的逻辑包”，[而插件](http://book.cakephp.org/2.0/en/plugins.html)是“控制器、模型和视图的组合”。Compoments 扩展了基本的 Component 类，而 Plugins 有自己的 AppModel 和 AppController。

将插件视为与您的主应用程序共享相同核心库的单独 Cake 应用程序。

此外，在 Cake 2.0中，[组件的处理方式与 1.3 略有不同](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#components)（它们的文件名中应该有 component，因此例如，`SessionComponent.php`而不是），并且删除了一些功能。`session.php`例如`EmailComponent`，完全不推荐使用。

您收到的错误消息可能涉及第三方组件。哪些给你带来麻烦？

# jquery - jOrgChart（为什么拖放功能只能使用一次）

> ID：10094462
> 
> 赞同：0
> 
> 时间：2012-04-10T18:37:28.783
> 
> 标签：jquery, html, css

所以我开始使用一个名为 jOrgChart 的插件。它有一个非常酷的拖放功能。不幸的是，它只适用于我第一次拖放它。在网站的演示中，它每次都有效。同样在我的代码中，原始列表看起来像是刚刚在呈现的代码中被删除。我想这与它有关，因为它没有在网站上删除。

这是该网站的链接： [jOrgChart 演示（顶部有指向 GitHub 的代码链接）](http://dl.dropbox.com/u/4151695/html/jOrgChart/example/example.html)

此外，我以前从未使用过 jsfiddle，但如果有人能解释一下它是如何工作的，我会插入一个预览

下面看一些简单的代码：

***HTML***

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Pathway Builder 3.0</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.jOrgChart.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
    <script src="js/basic.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/jquery.jOrgChart.css"/>
</head>
<body>
    <ul id="org" style="display: none;">
        <li>
            Food
            <ul>
                <li>
                    Fruit
                    <ul>
                    <li>Apples</li>
                    <li>Oranges</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</body>
</html> 
```

***基本的.js***

```
$(document).ready(function() {
    $('#org').jOrgChart({
        dragAndDrop : true
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:51:55.157

根据您放置图表的位置，它会影响这一点。当它构建图表时，它实际上会清除假定图表父级中的任何内容。尝试制作一个带有标签的 div ，`ID="chart"`然后将图表放入*该*div。如果您需要帮助，请告诉我。

# javascript - Dust.js 转义字符

> ID：10094464
> 
> 赞同：3
> 
> 时间：2012-04-10T18:37:55.133
> 
> 标签：javascript, dust.js

我正在尝试根据 Dust.js 指南打印换行符，在模板中，我在每个记录输出的末尾都有一个 {~n}

```
{#friends} {name}, {age}{~n}{/friends} 
```

我编译了上面的模板并使用几个 JSON 记录进行渲染以生成“输出”对象。我正在使用 document.getElementById('divID').innerHTML 在基本 DIV 标记中动态替换“out”对象。尽管有 {~n}，但问题是无法打印换行符。我也试过 {~r}，但还是不走运。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:42:53.667

默认情况下，HTML 会将相邻的空格（包括换行符）折叠成一个空格。对于*大多数*元素，默认情况下`a word`和`a \n word`（或`a \r word`或）之间没有区别。解决方案是：`a \r\n word`

 **   使用`<br>`元素添加中断
*   将您的 div 上的样式设置为[`whitespace: pre;`](http://reference.sitepoint.com/css/white-space)

或者，您可以使用列表（这对于您的用例可能更具语义，应该是首选）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:42:43.190

如果要呈现为 HTML，则需要使用`<br>`标签而不是换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:25:35.493

你应该使用：

```
dust.optimizers.format = function(ctx, node) { return node }; 
```

看看 [https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#controlling-whitespace-suppression](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#controlling-whitespace-suppression)*

# c# - 将文本写入文本文件 C# 中的特定点

> ID：10094467
> 
> 赞同：0
> 
> 时间：2012-04-10T18:38:03.083
> 
> 标签：c#

有没有办法写入文本文件中的特定位置？我希望能够为电子邮件创建一个模板作为文本文件，然后根据不同的参数值更改正文..

EmailBoby.txt..

```
This is an email body.

FirstName: [FirstName]
LastName: [LastName] 
```

我可以在代码中找到 [Firstname] 并以某种方式将其替换为一个值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:40:29.547

将完整的文本文件读入字符串。然后进行字符串替换并再次保存。像那样

```
string fileContent = File.ReadAllText(path);
fileContent.Replace("[FirstName]", "John");
File.WriteAllText(path, fileContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:40:21.497

不，不能那样更改文件。您需要重写整个文件才能完成此操作。由于 Files 是一个流，因此您需要在此之前的所有数据，然后再更改文件。

# linux - Systemtap 脚本到 C 代码的转换和编译

> ID：10094468
> 
> 赞同：1
> 
> 时间：2012-04-10T18:38:15.843
> 
> 标签：linux, gcc, architecture, systemtap

我的学期项目是网络级反恶意软件。它的主要组件是Manager和Agent。Agent 为 Manager 提供：

```
1\. CPU usage, Memory usage and B/W usage information

2\. Network related Information - 

    Network Profiling
    Function calls from Network Sockets
    TCP packets related information

3\. Disk Related Information - 

    I/O monitoring
    File Read/Writes
    File Attribute changes

4\. General Profiling

    Function calls
    Call Graph
    Frequently used system calls
    call volume per process 
```

这四个功能中的每一个都作为线程实现。我们的平台是Linux。我们找到了一个名为 systemtap 的工具...

[http://sourceware.org/systemtap/SystemTap_Beginners_Guide/useful-systemtap-scripts.html](http://sourceware.org/systemtap/SystemTap_Beginners_Guide/useful-systemtap-scripts.html)

与其利用诸如 top、ifstat、tcpdump 等 linux 命令，我们发现这是一个更好的选择。实际上，所有要做的就是从代理 Java 程序调用脚本或可执行文件。

“systemtap”使用的所有脚本都是用 systemtap 脚本语言编写的。前端工具（stap）将此脚本转换为 C 代码，然后将其编译为内核文件。

**stap --tmpdir=/home/test/nettop.stp**

通过使用上述命令，我设法获得了转换后的 C 代码文件。但是由于依赖性问题，该文件没有被编译。

**gcc nettop.c nettop.c:10:29：致命错误：runtime_defines.h：没有此类文件或目录编译终止。**

**gcc -B /usr/share/systemtap/runtime/ -B /usr/src/kernels/3.3.1-3.fc16.x86_64/include/nettop.c nettop.c:10:29：致命错误：runtime_defines.h : 没有这样的文件或目录编译终止。**

**gcc --sysroot=/usr/nettop.c nettop.c:10:29：致命错误：runtime_defines.h：没有这样的文件或目录编译终止。**

systemtap 运行时头文件都使用***linux/header***格式，表示 systemtap 的类路径设置为 /usr/../../../../include。将所有标题复制到特定文件夹很容易，但编辑它们以反映正确的路径名称是不可能的。有 106 个运行时标头引用超过一千个 linux 标头。

一个。**如何让 gcc 使用特定文件夹作为库？**

湾。**这种代理架构有更好的替代方案吗？**

PS：希望这个问题不会太模糊。感谢您提前回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:15:04.790

不要尝试手动编译 systemtap 的中间 C 代码。相反，通过 stap（或通过 staprun 编译的 .ko）运行脚本，并通过 stdout 使用它们的输出。

# android - Android 应用内计费 - 枚举的使用

> ID：10094469
> 
> 赞同：0
> 
> 时间：2012-04-10T18:38:20.730
> 
> 标签：android, enums, in-app-billing

在应用内计费的示例编码中，它使用

```
public enum ResponseCode {
    RESULT_OK,
    RESULT_USER_CANCELED,
    RESULT_SERVICE_UNAVAILABLE,
    RESULT_BILLING_UNAVAILABLE,
    RESULT_ITEM_UNAVAILABLE,
    RESULT_DEVELOPER_ERROR,
    RESULT_ERROR;

    // Converts from an ordinal value to the ResponseCode
    public static ResponseCode valueOf(int index) {
        ResponseCode[] values = ResponseCode.values();
        if (index < 0 || index >= values.length) {
            return RESULT_ERROR;
        }
        return values[index];
    }
} 
```

和

```
 int responseCode = response.getInt(Consts.BILLING_RESPONSE_RESPONSE_CODE);
 boolean billingSupported = (responseCode == ResponseCode.RESULT_OK.ordinal()); 
```

对我来说，在这里使用枚举似乎很奇怪。如果枚举使用一些不同的顺序，它都会失败，我认为枚举不应该依赖于某个序数值。为什么要这样做而不只是检查返回码是否为零？

在 Android 的文档中指定的位置，例如返回码 3 是 RESULT_SERVICE_UNAVAILABLE。我只能从示例代码中猜到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:45:56.920

实际的 JSON`responseCode`是一个 int，因此您需要将其转换为枚举才能在 Java 中使用它。他们使用枚举来表明存在一组有限的响应代码。当然，它可能是一堆`final static int`'，但可读性较差。您引用的代码可能是这样编写的，这可能会更好地证明使用枚举的合理性：

```
 ResponseCode responseCode = ResponseCode.valueOf(response.getInt(Consts.BILLING_RESPONSE_RESPONSE_CODE));
 boolean billingSupported = (responseCode == ResponseCode.RESULT_OK); 
```

至于文档，它是标准的 Java 行为：如果您不指定显式值，则枚举从 0 开始。参照。 [http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#ordinal%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#ordinal%28%29)

IAB 计费响应代码等在此处列出：http: [//developer.android.com/guide/market/billing/billing_reference.html](http://developer.android.com/guide/market/billing/billing_reference.html)

# java - 玻璃鱼 + 弹簧

> ID：10094473
> 
> 赞同：4
> 
> 时间：2012-04-10T18:38:29.777
> 
> 标签：java, spring, glassfish

我有一个简单的问题，即如何在 Glassfish 服务器上运行使用 Spring 框架的应用程序？也就是说，如何让它在 Spring 容器的控制下运行？我是否需要扩展服务器或其他东西，我找不到太多关于此的信息，我读到的关于 OSGI 模块的东西，只是让我感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:48:14.310

基本上，您使用 web.xml 通过侦听器启动 Spring，然后映射一个或多个 spring Dispatcher servlet。您在 中定义控制器 bean `dispatcher-servlet.xml`，注入您在 applicationContext 中定义的 bean，然后它从那里向下级联。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
        etc etc
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/myApp/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:38:55.197

在部署描述符（web.xml）中，定义 Servlet 监听器和上下文参数。

上下文参数 - spring bean 文件的文件位置。（允许使用野生字符并拾取该野生字符选择下的一堆文件。）

侦听器 - 将侦听请求的弹簧类。不同的类可用于不同的目的。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
            <!-- All file ends with Context.xml under web-inf folder --> 
    <param-value>WEB-INF/*Context.xml</param-value>
</context-param>

<listener>
    <display-name>Spring context loader</display-name>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    <!-- use following if you want to use request scope -->
    <!-- org.springframework.web.context.request.RequestContextListener -->
</listener>

<servlet>
    <servlet-name>servlet name</servlet-name>
    <servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class> 
</servlet>

<servlet-mapping>
    <servlet-name>name</servlet-name>
    <url-pattern>/URLName</url-pattern>
</servlet-mapping> 
```

# c - isalnum 等效使用#define

> ID：10094476
> 
> 赞同：0
> 
> 时间：2012-04-10T18:38:45.523
> 
> 标签：c, casting, macros, alphanumeric

我正在尝试确定字符串中的每个字符是否都是字母数字。我的编译器没有 isalnum 函数。

我的函数在下面，my_struct 有一个大小为 6 (uint8 bom_pn[6]) 的 char 数组 ....是的 uint8 是一个字符。

```
boolean myfunc( my_struct * lh )
{
ret = ( isalphanum( lh->bom_pn ) && isalphanum( lh->bom_pn + 1 ) &&
        isalphanum( lh->bom_pn + 2 ) && isalphanum( lh->bom_pn + 3 ) &&
        isalphanum( lh->bom_pn + 4 ) && isalphanum( lh->bom_pn + 5 ) );
} 
```

我的宏定义如下：

```
#define isalphanum(c) ( ( c >= '0' && c <= '9' ) ||  \
                        ( c >= 'A' && c <= 'Z' ) ||  \
                        ( c >= 'a' && c <= 'z' ) ) 
```

上面抛出错误“操作数类型不兼容（“uint8 *”和“int”）”

如果我将定义更改为以下内容，我的代码将编译并收到警告。

```
#define isalphanum(c) ( ( (uint8)c >= '0' && (uint8)c <= '9' ) ||  \
                    ( (uint8)c >= 'A' && (uint8)c <= 'Z' ) ||  \
                    ( (uint8)c >= 'a' && (uint8)c <= 'z' ) ) 
```

警告：“从指针转换为更小的整数”

我的问题是，如何在没有警告的情况下正确创建此定义（并且显然检查正确）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:41:10.217

正如你所说`lh->bom_pn`的是一个字节数组，这意味着它实际上是一个指针。

因此，当您将其传递给 时`isalphanum`，您将传递一个指针，并将其与文字字节进行比较。

你有两个选择：

**1.)**

```
ret = ( isalphanum( lh->bom_pn[0] ) && isalphanum( lh->bom_pn[1] ) &&
        isalphanum( lh->bom_pn[2] ) && isalphanum( lh->bom_pn[3] ) &&
        isalphanum( lh->bom_pn[4] ) && isalphanum( lh->bom_pn[5] ) ); 
```

**2.)**

```
#define isalphanum(c) ( ( *(c) >= '0' && *(c) <= '9' ) ||  \
                        ( *(c) >= 'A' && *(c) <= 'Z' ) ||  \
                        ( *(c) >= 'a' && *(c) <= 'z' ) ) 
```

任何一个都应该解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:41:44.240

更改所有出现的

```
lh->bom_pn+i //pointer 
```

至

```
lh->bom_pn[i] //character 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:42:52.507

由于是一个数组，因此`bom_pn`您需要将其传递为`isalphanum(*lh->bom_pn )`等`isalphanum(*lh->bom_pn+i )`

# android - 如何在使用 Android API Level 15 的同时保持向后兼容性？

> ID：10094478
> 
> 赞同：10
> 
> 时间：2012-04-10T18:38:52.410
> 
> 标签：android, user-interface, actionbarsherlock

冰淇淋三明治引入了很多新的 UI 设计元素，但市场渗透率仍然只有 4% 左右。如果有人想在未来证明他们的应用程序并利用蜂窝/冰淇淋三明治引入的一些设计元素，例如操作栏、配色方案等，那么确保您保持一点点倒退的最佳方法是什么兼容性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T19:12:32.360

~~虽然我同意@Ollie C，但我认为除了使用Actionbar~~ Sherlock 库之外，还有其他选项可以添加，同时我积极参与 ABS 社区并同意它非常有用，并且包含所有 UI 资产可能会需要。

您可以通过 API 级别查看 UI 组件的优雅降级。例如：

您可以在`values`文件夹中创建并像这样设置样式

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <!-- Any customizations for your app running on pre-3.0 devices here -->
    </style>
</resources> 
```

然后对于 Android 3.0+ 设备，创建`values-v11`文件夹：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.Holo.Light">
        <!-- Any customizations for your app running on 3.0+ devices here -->
    </style>
</resources> 
```

对于 4.0+ 设备，创建`values-v14`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.DeviceDefault.Light.NoActionBar">
        <!-- Any customizations for your app running on 4.0+ devices here -->
    </style>
</resources> 
```

REF：[http](http://android-developers.blogspot.co.uk/2012/01/holo-everywhere.html) ://android-developers.blogspot.co.uk/2012/01/holo-everywhere.html ，[如何使用 Holo.Light 主题，并在预蜂窝设备上回退到“Light”？](https://stackoverflow.com/questions/9681648/how-to-use-holo-light-theme-and-fall-back-to-light-on-pre-honeycomb-devices)

还有这个项目：[https](https://github.com/ChristopheVersieux/HoloEverywhere) ://github.com/ChristopheVersieux/HoloEverywhere ，它试图带来全息主题。

最后; Google 鼓励开发人员在 SDK 中包含 UI 组件以帮助解决向后兼容性问题，而不是直接从 Android 操作系统引用它们。虽然这不是您的问题，但它确实有助于提供一些一致性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:01:18.490

这是一个非常非常广泛的话题。答案因您尝试使用的特定元素而异。

- 对于 ActionBar：如果您想要早期版本的 ActionBar，[ActionBarSherlock](http://www.actionbarsherlock.com)是一个流行的免费库，从 Android 支持库扩展而来。

-对于配色方案/主题：[如此 SO 线程](https://stackoverflow.com/questions/9591726/use-different-icons-with-different-android-sdk-versions/9592604#9592604)中所述，创建一个 res/values/styles.xml 和 res/values-v11/styles.xml，（例如，称为“myStyle”），为每个样式选择一个相关的父母。对于 V11，它可能是“Theme.Holo”，而对于另一个，可能是“Theme.Dark”。将您想要的任何自定义添加到主题。在您的清单中引用该自定义主题，将根据设备的平台版本选择正确的主题（values-v11 文件夹将用于 Honeycomb 及以上，另一个用于 Gingerbread 及以下）

-对于其他平台功能，您可以将特定于平台的功能封装在单独的类中，并根据Build.VERSION.SDK的值访问它们，如[android开发者博客](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:46:17.227

[http://www.actionbarsherlock.com](http://www.actionbarsherlock.com)

这个（免费）库非常棒，它提供了您在以前的 Android 版本上寻找的内容。

# css - 防止菜单在 768px 显示 CSS 媒体查询中折叠

> ID：10094479
> 
> 赞同：26
> 
> 时间：2012-04-10T18:38:55.550
> 
> 标签：css, twitter-bootstrap, media-queries, responsive-design

我正在尝试使用 twitter bootstrap 做一个网站。我的菜单相对较少，所以它也适合 768px 显示。但在默认情况下，在引导程序中，菜单使用媒体查询折叠。我无法阻止这种行为。

![未折叠时的菜单](../Images/f126b34e70c42a85a8561ed9af5226d3.png)

![然后菜单折叠宽度小于 768px](../Images/90bb7899e02ad1de78ab636331dc2656.png)

这是我的html

```
<div class="row">
    <div class="span3 logo"><h1><img src="img/logo.png" /></h1></div>
    <div class="span9">

        <div class="navbar">
          <div class="navbar-inner">
            <div class="container">
         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
              <div class="nav-collapse">
                <ul class="nav nav-pills">
                  <li><a href="#">Home</a> </li>
                  <li><a href="#">Services</a> </li>
                  <li><a href="#">Portfolio</a> </li>
                  <li><a href="#">Contact Us</a> </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

    </div>
    </div> 
```

我知道这与引导程序中的媒体查询有关，但无法理解。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-09T00:11:33.050

You can customize Twitter Bootstrap css **compiling** it from sass-twitter-bootstrap scss files and setting `$navbarCollapseWidth` in `_variables.scss` to your desired value...

**Edit**

As @Accipheran stated in the comments, for Bootstrap 3.x the name of the variable you should set is `$grid-float-breakpoint`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-18T06:37:38.647

您需要阅读以下部分：使用引导站点上 *的媒体查询：http:* [//getbootstrap.com/2.3.2/scaffolding.html#responsive](http://getbootstrap.com/2.3.2/scaffolding.html#responsive) (Bootstrap 2.3.2) [http://getbootstrap.com/入门/#disable-responsive](http://getbootstrap.com/getting-started/#disable-responsive)（引导程序 3）

当您的视口缩小时，您需要使用相关的媒体查询来覆盖引导程序添加的样式。

```
 // Landscape phones and down
  @media (max-width: 480px) { ... }

  // Landscape phone to portrait tablet
  @media (max-width: 768px) { ... }

  // Portrait tablet to landscape and desktop
  @media (min-width: 768px) and (max-width: 980px) { ... }

  // Large desktop
  @media (min-width: 1200px) { .. } 
```

如果您不希望导航栏折叠，请从类名中删除“折叠”。您可能应该摆脱：

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
```

简而言之，看看文档，这里有一个部分涵盖了这个名为“可选响应变体”的确切内容：http: [//getbootstrap.com/2.3.2/components.html#navbar](http://getbootstrap.com/2.3.2/components.html#navbar)（Bootstrap 2.3.2）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-17T00:08:37.323

这对我来说效果很好：

```
.nav-collapse, .nav-collapse.collapse {
    overflow: visible;
}   
.navbar .btn-navbar {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-29T04:37:55.730

阅读答案，我相信您正在谈论 Bootstrap 版本 2。也许有人正在寻找 Bootstrap 3 的答案。这个答案是给你的！

1.  转到[Bootstrap 自定义页面](http://getbootstrap.com/customize/)
2.  为硬编码（例如 520px）或较小的屏幕尺寸（如 @screen-xs-min）重新定义 @grid-float-breakpoint 值
3.  按页面底部的按钮重新编译css文件
4.  用下载的 zip 文件中的文件替换您的 bootstrap.css 和 bootstrap-min.css 文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-11T07:15:52.350

查找变量：

**@grid-float-断点**

设置为@screen-sm，您可以根据需要更改它。

如果您覆盖 vendor less 文件，请将变量设置为 0px，例如：

**@grid-float-breakpoint: 0px;**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-06T08:10:26.690

如果您想完全禁用折叠导航栏，请在您的自定义 LESS 文件中添加此变量：

```
@grid-float-breakpoint: 0px; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-06T15:19:55.377

这个例子来自官网： http: [//getbootstrap.com/examples/non-responsive/](http://getbootstrap.com/examples/non-responsive/)

更改在[non-responsive.css](http://getbootstrap.com/examples/non-responsive/non-responsive.css)中，但与此相关的重要部分`.navbar`是：

```
body {
    padding-top: 70px;
    padding-bottom: 30px;
}
.page-header {
    margin-bottom: 30px;
}
.page-header .lead {
    margin-bottom: 10px;
}
.navbar-collapse {
    display: block !important;
    height: auto !important;
    padding-bottom: 0;
    overflow: visible !important;
}
.navbar-nav {
    float: left;
    margin: 0;
}
.navbar-nav > li {
    float: left;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-09T21:10:51.393

如果您想要做的只是让导航崩溃直到它达到较小的值，最简单的方法是前往[Twitter Bootstrap 自定义页面](http://twitter.github.io/bootstrap/customize.html)，将 更改为`@navbarCollapseWidth`您想要的值，然后下载包。完毕。

如果您想自定义超出此页面允许的范围，则必须按照其他答案中的描述覆盖或自定义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-04T22:14:20.100

这是我用于引导程序 3.3.4 的内容。这是一个 hack，但也不是重做 CSS 的 2 天修复。

```
@media (min-width: 768px) and (max-width: 979px) {
  .navbar-header {
    width: 100% !important;
  }
  .navbar-toggle {
    display: inline-block !important;
    float: right !important;
  }
} 
```

您可能需要调整选择器，但基本上，使标题全宽，然后显示并向右浮动按钮。

# php - 通过ajax发送数组到php

> ID：10094480
> 
> 赞同：0
> 
> 时间：2012-04-10T18:38:58.307
> 
> 标签：php, javascript, ajax, arrays

我有一个项目的复选框列表。我需要将我的数据库更新为选择了哪些项目。项目列表是动态显示的。

问题是如何通过 ajax 传递 ID 列表？

这是我的ajax代码：

```
function update(form,div,PhpFile,type)
{
if (request)
    {
        var obj = document.getElementById(divId);
        request.open("POST",PhpFile);
        //setting the header
        request.setRequestHeader('Content-Type','application/x-www-form-urlencoded');

        request.onreadystatechange = function()
        {   
            if (request.readyState == 4 &&
                    request.status == 200){
                obj.innerHTML =request.responseText;
            }
        }

        if(type=='news')
            request.send(?????);

    }
} 
```

我已经标记了？？？我不知道该放什么的空间。

当然，我可以单独更新每个复选框，但这是一个非常糟糕的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:45:06.737

PHP 5 可以解码 JSON，在 JS 中你需要使用一个库。这似乎是一个流行的答案。

[在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

和 PHP 中的 JSON [http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:40:30.933

我认为您可以在 JavaScript 中序列化数组，使用 AJAX 将其作为字符串传递，然后在 PHP 中对其进行反序列化。要么将数组值转换为分隔字符串（逗号或管道分隔），然后在 PHP 中分解该字符串。这使您传输的数据具有人类可读性，这对于调试非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:41:18.137

使用 将数组转换为 JSON [`JSON.stringify()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)，发送它，然后使用 将 JSON 字符串转换回 PHP 中的对象[`json_decode()`](http://php.net/manual/en/function.json-decode.php)。

# c++ - 涉及 iostream 和 wstring 的奇怪 C++ 行为

> ID：10094488
> 
> 赞同：1
> 
> 时间：2012-04-10T18:39:31.387
> 
> 标签：c++, iostream, wstring

我有两个文件，`my_program.cpp`它的头文件`my_program.h`.

`my_program.cpp`*仅*包含以下内容：

```
#include "my_program.h"
using namespace std; 
```

`my_program.h`包含一个指向返回 a 的函数的指针`wstring`，如下所示：

```
using namespace std;
typedef wstring (*my_function)(wstring, int, int, int, int); 
```

该程序不会在这种状态下编译（停在 typedef ... 说 ISO C++ 禁止声明没有类型的“wstring”）但是如果我在 .cpp 文件中添加`#include <iostream>`之前`#include "my_program.h"`，程序会奇迹般地编译。

为什么会这样？我只是希望我没有犯愚蠢的错误，我现在要被嘲笑了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:45:11.073

你真的应该包括`<string>`.

从事物的声音来看，您的编译器`<iostream>`恰好包含`<string>`，因此它可以工作，但在不同的编译器上它可能不会。C++ 允许标准头文件包含其他标准头文件，但不需要它。在某些情况下，你只得到一个类的声明，所以有些东西有效，而另一些则无效。

至少根据我的经验，这也是一个可能会从一个编译器版本更改为下一个版本的问题，因此即使您不打算移植到其他任何版本，您的代码也可能会因为看似微不足道而停止工作除非您包含正确的标题，否则请升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:42:29.717

在添加之前`#include <iostream>`，编译器不知道是什么`wstring`——因此出现错误

包含 iostream 标头（定义`std::wstring`——可能通过它包含的其他标头）后，编译器知道`wstring`指的是什么，并且可以正确解析`typedef`.

要记住的一件事是编译器只关心所谓的编译单元（.cpp 文件），而不是头文件。当编译单元包含它们时，标题就会发挥作用（想想逐字复制粘贴）。因此，您可以在 ,之前的任何位置包含`iostream`（或如其他人指出的那样）以使其工作 - 从这个角度来看，在标题之前包含它与将它包含在标题的第一行相同。`<string>``typedef`

但是，通常最好使标头尽可能保持一致（因此在您的情况下，在标头中包含相关标头，而不是 .cpp），因此包含器不需要记住要包含的其他标头以及使其按预期工作。

# android - ffmpeg avio_open() 无法打开输出文件以写入编码流

> ID：10094489
> 
> 赞同：3
> 
> 时间：2012-04-10T18:39:42.493
> 
> 标签：android, ffmpeg, java-native-interface, codec

我正在尝试使用为 android 移植的 ffmpeg 将原始 PCM 转换为 mp4。我面临一个问题，其中 avio_open 返回负值说无法打开 sample.mp4 这是保存在 sdcard 中的输出文件。我给出了像 /sdcard 这样的文件路径/样本.mp4。

```
avio_open(&oc->pb, filename, AVIO_FLAG_WRITE)  returns -2 
```

/* 如果需要，打开输出文件 */

```
 if (!(fmt->flags & AVFMT_NOFILE)) {
     if (avio_open(&oc->pb, filename, AVIO_FLAG_WRITE) < 0) {
         fprintf(stderr, "Could not open '%s'\n", filename);
         return 1;
     }
 } 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:57:13.327

您需要构建 ffmpeg 以启用 mp4。您是否这样做了。为此，您必须在 ffmpeg 根目录的 build.sh 文件中为 mp4 格式启用复用器和编解码器（编码器解码器）。我认为编解码器是它是 MPEG4。构建它，然后将其用于 MP4 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:06:26.383

我有同样的问题，但我的情况是我启用了编解码器和复用器。通过启用文件协议 --enable-protocol=file 解决了我的问题。

# jquery - 如何使用 Javascript 提交将 Jquery ajax 添加到现有表单

> ID：10094500
> 
> 赞同：1
> 
> 时间：2012-04-10T18:40:23.897
> 
> 标签：jquery, ajax, javascript

我有一个表单，我需要使用 JQuery Ajax 来增强它。目前，它使用javascript来处理提交。当用户点击提交按钮时，控件将转到一个 javascript 函数，该 javascript 函数进行一些处理，然后执行 form-id.submit()。

现在如何将 JQuery-ajax 引入当前表单？我不想在 JQuery 中重新创建整个 javascript 函数，然后执行 JQuery 提交。有没有办法在现有的javascript函数中将表单对象/值传递给Jquery，然后使用Jquery-ajax进行提交？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:41:38.603

有一个 jQuery 插件。[http://jquery.malsup.com/form](http://jquery.malsup.com/form)

使用该[`beforeSubmit`选项](http://jquery.malsup.com/form/#options-object)执行您的预提交功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:43:40.473

当表单提交到后端时，您会得到序列化的数据。如果您想保留相同的后端（显然让它发送返回响应而不是写入页面或其他），只需`$('#form').serialize();`在发送时用作您的数据。

# ios - Facebook 图形 API can_upload 并不总是有效

> ID：10094503
> 
> 赞同：3
> 
> 时间：2012-04-10T18:40:30.073
> 
> 标签：ios, facebook-graph-api, upload

我的应用程序允许用户将照片上传到 Facebook。在上传照片之前，我会向用户展示他们在 Facebook 上的所有相册列表。根据 Facebook 的 can_upload 判断 UID 是否可以上传到相册，如果用户拥有相册，相册未满，app 可以向相册添加照片，则返回 true。通过尝试，我可以上传到 can_upload 为 0 的一些专辑我的问题是如何判断我是否可以上传到任何给定的专辑？

# c# - MonoTouch：使用 ServiceStack 导致 JIT 错误？

> ID：10094507
> 
> 赞同：1
> 
> 时间：2012-04-10T18:40:34.313
> 
> 标签：c#, xamarin.ios, monodevelop, jit, servicestack

我正在使用来自[https://github.com/ServiceStack/ServiceStack/tree/master/release/latest/MonoTouch的服务堆栈的 MonoTouch 构建](https://github.com/ServiceStack/ServiceStack/tree/master/release/latest/MonoTouch)

在 iPad 上运行时，我收到**JIT**错误。我认为 MonoTouch 在构建中解决了这个问题？

```
Attempting to JIT compile method     
'ServiceStack.Text.Json.JsonReader`1<Common.AppCategoryEnum>:GetParseFn ()' while running 
with --aot-only. 
```

我使用 DLLS：

*   ServiceStack.Common.dll
*   服务栈接口.dll
*   ServiceStack.Text.dll

只有这个单一的电话：

```
new JsonServiceClient ().GetAsync<MyResponse> (url, Success, Failure); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:55:30.430

> 我正在使用来自的服务堆栈的 MonoTouch 构建

这些 .dll 已经超过 3 个月了，并且在一个月前发现并修复了一个[类似的问题。](https://github.com/ServiceStack/ServiceStack.Text/issues/56)

> 我收到 JIT 错误。我认为 MonoTouch 在构建中解决了这个问题？

是的。为 MonoTouch 构建时，使用了 AOT（提前）编译器。它编译它*知道*在运行时需要的所有内容。

然而，有时 AOT 编译器无法了解所有内容（例如通用虚拟方法）*或*编译所有可能的变体（例如值类型）。请参阅文档网站中的[通用限制部分。](http://docs.xamarin.com/ios/about/limitations#Limited_Generics_Support)在这种情况下，AOT 编译器可能需要帮助（确保编译正确代码的签名，例如类似[这样](https://github.com/ServiceStack/ServiceStack.Text/issues/56#issuecomment-3615515)的东西）。

它也可能是一个错误——由于某种原因，所需的方法没有被 AOT 处理。当发现这一点时，在运行时会发生异常，因为缺少代码并且无法使用 JIT 来提供它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:09:31.273

我知道创建这个线程已经很长时间了，但是我在这里和那里找到了一种解决方法，只需在 FinishedLaunching 方法的 AppDelegate 中调用 var dummy = new JsonSerializer() 即可。

# java - LWJGL 先进的照明系统

> ID：10094510
> 
> 赞同：4
> 
> 时间：2012-04-10T18:40:42.680
> 
> 标签：java, opengl, 3d, lwjgl, lighting

是否有任何关于如何使用 LWJGL 在 Java 中完成高效照明系统的教程或文章？

据我所知，LWJGL 支持 8 或 11 个灯（我不看代码就记不得了），我对如何使用它来实际正确使用它们很感兴趣，以便在世界上轻松分发它们并管理灯光。也许有一个图书馆？

我也对使用 LWJGL 做阴影的任何技术感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:31:34.500

LWJGL 本质上为您提供了一个用于 OpenGL 的 java 绑定。支持的光源数量因硬件而异。要找出答案，您的程序需要获得`GL_MAX_LIGHTS`：

```
int lights = GL11.glGetInteger(GL1.GL_MAX_LIGHTS); 
```

如果您想查找有关 LWJGL 照明的文章，只需查找使用 OpenGL 涵盖相同主题的文章。

请记住，您可以使用[OpenGL 站点](http://www.opengl.org/)来获得对所有各种功能的更好解释。只需忽略特定于 C 的部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-18T19:55:56.180

闪电和各种映射技术（法线映射、阴影映射）是计算方面最复杂的图形主题之一，...

网上有几个教程。

例如，一个很好的教程： http: [//learnopengl.com/# !Advanced-Lighting/Advanced-Lighting](http://learnopengl.com/#!Advanced-Lighting/Advanced-Lighting)

它不是 LWJGL，但这也不重要，因为您主要使用顶点、片段和几何着色器进行渲染，并且我已经阅读了所有教程，您将对退出高级图形主题有一个很好的概述。大多数 C 代码可以很容易地传送到 LWJGL。

我**不** **建议**您使用各种**youtube**频道（thebennybox、thinmatrix）来学习 opengl（lwjgl），因为您只需按照他们的教程逐行输入所有内容。当然，你会从他们那里得到一个很好的概述某些事情是如何工作的，但不要根据教程编写你的游戏。

其他一些来源：

1.  非常激烈的闪电教程： http: [//www.falloutsoftware.com/tutorials/gl/gl8.htm](http://www.falloutsoftware.com/tutorials/gl/gl8.htm)

# android - Android 在运行时检测 Atom 处理器以选择正确的 NDK 编译库？

> ID：10094513
> 
> 赞同：0
> 
> 时间：2012-04-10T18:40:54.523
> 
> 标签：android, android-ndk

未来许多 Android 设备将使用 Atom 处理器。这意味着当创建一个可以部署到 Atom 处理器设备上的应用程序时，有必要包括一个用于 atom 和 x86 处理器的本机库。所以我的问题是如何在决定加载哪个本机库之前检测设备上的处理器？选择要加载的库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:47:05.683

您无需手动检测任何内容。只需通过在 Application.mk 文件中指定正确的 APP_ABI 来构建针对 x86 的库（从 ndk 分发中读取 docs\Application-mk.html 文件）：

```
APP_ABI := armeabi armeabi-v7a x86 
```

使用它，您将在 libs 文件夹下获得三个库。Android 会在运行时自动选择正确的一个。

如果需要在运行时检测，可以使用 NDK 分发的 cpufeatures 库。它提供以下功能：

```
typedef enum {
    ANDROID_CPU_FAMILY_UNKNOWN = 0,
    ANDROID_CPU_FAMILY_ARM,
    ANDROID_CPU_FAMILY_X86,
    ANDROID_CPU_FAMILY_MAX  /* do not remove */
} AndroidCpuFamily;

/* Return family of the device's CPU */
extern AndroidCpuFamily   android_getCpuFamily(void); 
```

如果您需要在 Java 端执行相同的功能，您应该阅读 /proc/cpuinfo 文件并分析其内容。

# java - 如何用数据库中的值填充组合框？

> ID：10094518
> 
> 赞同：2
> 
> 时间：2012-04-10T18:41:09.340
> 
> 标签：java, mysql, swing, sqlexception

如何插入带有来自数据库的值的组合框我想从数据库中选择并添加到组合框中我有两个类：

**构造函数 Database() 第一类**

```
//constructeur 
Database()   
                  {  

 void remplir_Jcomb() {
           Connection conn = null;
           Statement  st = null;
           String rq1 = "SELECT region  FROM  rg";
           String rq2 = "SELECT ACTELS  FROM  rg";

        // - Paramètres de connexion à la base de données
           String url = "jdbc:mysql://localhost/réseau";
           String login = "root";
           String password = "";
           String driver = "com.mysql.jdbc.Driver";

           try {

            //comboBox_gouver.removeAllItems();
               try {
                    Class.forName(driver);
                    conn = DriverManager.getConnection(url,login,password);
                    } catch (ClassNotFoundException e) {
                        e.printStackTrace();
                         }

               st = conn.createStatement();
               ResultSet rs1 = st.executeQuery(rq1);
               ResultSet rs2 = st.executeQuery(rq2);

               while ((rs1.next())&&(rs2.next())) {
                comboBox_gouver.addItem(rs1.getString(1));
                comboBox_ACTELS.addItem(rs2.getString(1));
               }
               st.close();
               rs1.close();
               rs2.close();
               conn.close();

           }  catch (SQLException e) { 
                e.printStackTrace();}

            }
        } 
```

**接口摇摆第二个类，其中包含两个 JComboBox** 调用构造函数 Database()

```
private Database BD= new Database();  
    public Region() {

//first JComboBox
    comboBox_gouver = new JComboBox<String>();
            BD.remplir_Jcomb();
                sl_contentPanel.putConstraint(SpringLayout.NORTH, lbl_gouver, 5, SpringLayout.NORTH, comboBox_gouver);
                sl_contentPanel.putConstraint(SpringLayout.NORTH, comboBox_gouver, 5, SpringLayout.NORTH, contentPanel);
                sl_contentPanel.putConstraint(SpringLayout.WEST, comboBox_gouver, 16, SpringLayout.EAST, lbl_gouver);
                sl_contentPanel.putConstraint(SpringLayout.EAST, comboBox_gouver, -26, SpringLayout.EAST, contentPanel);
                contentPanel.add(comboBox_gouver);

comboBox_ACTELS = new JComboBox<String>();
        sl_contentPanel.putConstraint(SpringLayout.NORTH, lbl_ACTELS, 5, SpringLayout.NORTH, comboBox_ACTELS);
        sl_contentPanel.putConstraint(SpringLayout.NORTH, comboBox_ACTELS, 6, SpringLayout.SOUTH, comboBox_gouver);
        sl_contentPanel.putConstraint(SpringLayout.WEST, comboBox_ACTELS, 90, SpringLayout.EAST, lbl_ACTELS);
        sl_contentPanel.putConstraint(SpringLayout.SOUTH, comboBox_ACTELS, -29, SpringLayout.SOUTH, contentPanel);
        sl_contentPanel.putConstraint(SpringLayout.EAST, comboBox_ACTELS, -26, SpringLayout.EAST, contentPanel);
        contentPanel.add(comboBox_ACTELS);
}} 
```

**错误：**

```
java.sql.SQLException: Operation not allowed after ResultSet closed
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.ResultSetImpl.checkClosed(ResultSetImpl.java:794)
    at com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7139)
    at tn.pack.ACTEL.Database.remplir_Jcomb(Database.java:94)
    at tn.pack.ACTEL.Region.<init>(Region.java:75)
    at tn.pack.ACTEL.Region.main(Region.java:41) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:13:55.577

1）从 Db 填充数据（`finally block`用于关闭打开的对象，因为此代码在所有情况下都会执行）

```
void whatever {

   Connection conn = null;
   Statement  st1 = null;

   try {
       st1 = conn.createStatement();

   }  catch (SQLException e) { 
      e.printStackTrace();
   }  finally { 
      try {
          st1.close();
          rs1.close();
          rs2.close();
          conn.close();
      } catch (SQLException ex) {
          //
      } 
   }
} 
```

2）在 Db 语句中填充数据到（注意[Java6](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html) / [Java7](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)之间的 API 差异），

*   到`ComboBoxModel`-`JComboBox(ComboBoxModel aModel)/JComboBox(ComboBoxModel<E> aModel)`

*   到`arrays of Objects/Elements`-`JComboBox(Object[] items)/JComboBox(E[] items)`

*   到`Vector of Objects/Elements`-`JComboBox(Vector items)/JComboBox(Vector<E> items)`

如果 Sql 块结束，则将数组类型添加到[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

编辑：

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import javax.swing.*;

public class ComboBoxListeners {

    private JFrame f;
    private JComboBox comboBox;
    private JLabel label = new JLabel();
    private DefaultComboBoxModel comboBoxModel = new DefaultComboBoxModel();

    public ComboBoxListeners() {
        comboBox = new JComboBox(comboBoxModel);
        comboBox.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                if ((e.getStateChange() == ItemEvent.SELECTED)) {
                    String str = comboBox.getSelectedItem().toString();
                    label.setText("Selected Value From JComboBox is :   " + str);
                }
            }
        });
        label.setPreferredSize(new Dimension(400, 30));
        JButton btnAdd = new JButton(new AbstractAction("Append Items") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                addNewItemsFromDatabase();
            }
        });
        JButton btnRefresh = new JButton(new AbstractAction("Refresh Items") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                refreshItemsFromDatabase();
            }
        });
        f = new JFrame("ComboBox ItemListeners");
        f.setLayout(new GridLayout(0, 1, 15, 15));
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(comboBox);
        f.add(label);
        f.add(btnAdd);
        f.add(btnRefresh);
        f.setLocation(150, 150);
        f.pack();
        f.setVisible(true);
    }

    public void addNewItemsFromDatabase() {
        ArrayList<Integer> ageList = new ArrayList<Integer>();
        for (int i = 1; i <= 5; ++i) {
            ageList.add(i);
        }
        for (final Integer i : ageList) {
            EventQueue.invokeLater(new Runnable() {

                public void run() {// updates to the Swing GUI must be done on EDT
                    comboBoxModel.addElement(i);
                }
            });
        }
    }

    public void refreshItemsFromDatabase() {
        comboBoxModel = new DefaultComboBoxModel();
        ArrayList<Integer> ageList = new ArrayList<Integer>();
        for (int i = 1; i <= 5; ++i) {
            ageList.add(i);
        }
        for (final Integer i : ageList) {
            EventQueue.invokeLater(new Runnable() {

                public void run() {// updates to the Swing GUI must be done on EDT
                    comboBoxModel.addElement(i);
                }
            });
        }
        comboBox.setModel(comboBoxModel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ComboBoxListeners comboBoxListeners = new ComboBoxListeners();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:51:03.737

对两个 ResultSet 对象使用两个单独的 Statement 对象。当 Statement 对象已打开并由 ResultSet 使用时，您不能重用它。像这样的东西： -

```
void remplir_Jcomb() {
       Connection conn = null;
       Statement  st1 = null;
       Statement  st2 = null;
       String rq1 = "SELECT region  FROM  rg";
       String rq2 = "SELECT ACTELS  FROM  rg";

       //Rest of your code here

       try {

          // snipping off some more code
          //...

           st1 = conn.createStatement();
           st2 = conn.createStatement();
           ResultSet rs1 = st1.executeQuery(rq1);
           ResultSet rs2 = st2.executeQuery(rq2);

           while ((rs1.next())&&(rs2.next())) {
            comboBox_gouver.addItem(rs1.getString(1));
            comboBox_ACTELS.addItem(rs2.getString(1));
           }

       }  catch (SQLException e) { 
            e.printStackTrace();
       }
       finally{
           st1.close();
           st1.close();
           rs1.close();
           rs2.close();
           conn.close();
       }

    } 
```

# c# - asp.net 新页面上的按钮单击

> ID：10094521
> 
> 赞同：0
> 
> 时间：2012-04-10T18:41:15.483
> 
> 标签：c#, asp.net

当用户单击按钮时，尝试在新窗口中显示新页面。试图用这个来测试它，但到目前为止还没有运气：

```
Label1.Text = "<form><input type=button name=print value='Print View' onClick='javascript:window.open('http://mylink','mywindow')'></form>"; 
```

我认为这可能是格式问题，但就是看不到。例如，这很好用：

```
<input type=button name=close value='Close' onClick='javascript:parent.jQuery.fancybox.close()'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:43:43.490

请试试 ：

```
Label1.Text = "<form><input type=button name=print value='Print View' onClick='javascript:window.open(\"http://mylink\",\"mywindow\")'></form>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:42:54.973

您可能应该使用：

```
Label1.Text = @"<form><input type=""button"" name=""print"" value=""Print View"" onClick=""javascript:window.open('http://mylink','mywindow')""></form>"; 
```

如果要包含变量，可以使用：

```
 string url = "http://www.google.com";
   Label1.Text = String.Format(@"<form><input type=""button"" name=""print"" value=""Print View"" onClick=""javascript:window.open('{0}','mywindow')""></form>", url); 
```

**但是**`url`，如果它来自任何用户提供的输入，请确保它的内容是安全的！否则，您可能会对脚本注入攻击敞开心扉。

# c# - 继承 System.Windows.PresentationFrameworkCollection 在 Silverlight 库中

> ID：10094523
> 
> 赞同：1
> 
> 时间：2012-04-10T18:41:20.573
> 
> 标签：c#, silverlight, silverlight-4.0

该类型`System.Windows.PresentationFrameworkCollection<T>`不是用于继承吗？我试图创建一个自定义`<Type>AnimationsFromKeyFrames`对象，但我无法为 KeyFrames 属性创建 Collection 类型，因为 Visual Studio 显然正在弥补一些错误。

Visual Studio 报告以下抽象成员未实现，即使*它们不存在*于任何继承的对象上：

> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.SetItemImplSkipMethodPack(int, MyKeyFrame)”
> 
> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.GetItemImplSkipMethodPack(int)”
> 
> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.RemoveInternal(MyKeyFrame)”
> 
> “MyKeyFrameCollection”没有实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.InsertInternal(int, MyKeyFrame)”
> 
> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.IndexOfInternal(MyKeyFrame)”
> 
> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.ContainsInternal(MyKeyFrame)”
> 
> “MyKeyFrameCollection”未实现继承的抽象成员“System.Windows.PresentationFrameworkCollection<MyKeyFrame>.AddInternal(MyKeyFrame)”

我该如何从 bizarro world 实现这些方法，或者告诉 Visual Studio 停止抱怨并编译项目？

我已经尝试使用以下方法明确定义这些方法，但这些方法不起作用（正确地，根据之前的不存在评论）：

```
void System.Windows.PresentationFrameworkCollection<MyKeyFrame>.AddInternal(MyKeyFrame keyFrame)
void System.Collections.Generic.IList<MyKeyFrame>.AddInternal(MyKeyFrame keyFrame)
void System.Collections.Generic.ICollection<MyKeyFrame>.AddInternal(MyKeyFrame keyFrame)
void System.Collections.IList.AddInternal(MyKeyFrame keyFrame)
void System.Collections.ICollection.AddInternal(MyKeyFrame keyFrame) 
```

最后，并认为 MS 不希望社区制作 KeyFrameCollections？

**编辑：**我试过了，我唯一`override`的选择是`Equals`,`GetHashCode`和`ToString`. 这些抽象成员是否有可能`protected internal`使现有的框架类可以继承它们，而自定义类不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:23:32.940

`PresentationFrameworkCollection`是一个公共抽象类，但您所指的成员是`internal abstract`这意味着您不能覆盖它们。

# c# - 无法设置数据绑定 ListBox 的 SelectedListIndex 属性，为什么？

> ID：10094524
> 
> 赞同：1
> 
> 时间：2012-04-10T18:41:27.927
> 
> 标签：c#, windows-phone-7, listbox

我避免问这个问题，但是无法设置 ListBox 的选定索引。我已阅读其他线程并应用了设置，但它不起作用。

```
 <ListBox  ItemsSource="{Binding}" 
                      HorizontalAlignment="Right" 
                      Name="lstReading" Height="Auto" 
                      SelectedIndex="{Binding BookmarkSelectedIndex}"> 
```

在 something.xaml.cs 中，我是设置

```
 lstReading.DataContext = IQText; 
```

其中，IQText 是一个`IEnumerable<dictIQ>`并包含`BookmarkSelectedIndex`as 数据元素。可以使用 IQText 中的其他数据元素，但不能设置 listindex。有人可以让我知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:19:37.343

你有`BookmarkSelectedIndex`课内`dictIQ`吗？所以，你有一个`BookmarkSelectedIndex`每件，而不是每个收藏！

`BookmarkSelectedIndex`您可以在外部创建单独的属性`dictIQ`或创建继承自`ObservalbeCollection<dictIQ>`并具有附加属性的类`BookmarkSelectedIndex`：

```
public class CollectionWithIndex: ObservalbeCollection<dictIQ>
{
    public int BookmarkSelectedIndex { get; set; }
} 
```

我希望您选择最适合您的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:51:56.883

在运行时将此代码用于选择项目...

```
List<Audio> lst = Audio.GetAudioFiles();
            Audio aufile = new Audio { FileDisplayName = "Select Audio File" };
            lst.Insert(0, aufile);
            lstPickAudio.ItemsSource = lst;
           string FileDisplayName="your condition"
            lstPickAudio.SelectedItem = lst.Where(p => p.FileName == FileDisplayName).First(); 
```

# solr - 在 Solr 中查询具有不同提升的多个字段

> ID：10094531
> 
> 赞同：2
> 
> 时间：2012-04-10T18:41:53.133
> 
> 标签：solr, solrnet

在 Solr 中，在每个字段上的每个查询具有不同权重的情况下，跨不同字段进行查询的最佳方式是什么？

我们使用 C# 和 ASP.NET，使用[SolrNet](https://code.google.com/p/solrnet/ "索尔网")来查询 Solr。我们的索引看起来有点像这样：

*   文档 ID
*   标题
*   文本内容
*   标签
*   [更多领域...]

然后使用关键字进行查询，其中每个关键字具有不同的权重。因此，例如，“ipad”的权重可能为 40，而“android”的权重可能为 25。

与此相结合，每个字段都有不同的基础权重。例如，关键字比页面标题更有价值，页面标题比文本内容更有价值。

因此，我们最终得到如下内容：

*   标题^25
*   文本内容^10
*   标签^50

以及以下关键字：

*   ipad^25
*   苹果^22
*   微软^15
*   窗户^15
*   软件^20
*   电脑^18

因此，每个搜索查询都有不同的权重，每个字段都有不同的权重。结果，我们最终得到如下搜索条件：

*   标题：ipad^50
*   标题：苹果^47
*   标题：微软^40
*   [更多标题...]
*   文本内容：ipad^35
*   文本内容：苹果^32
*   文本内容：微软^25
*   [更多...]

这转化为一个非常非常长的搜索查询，超出了允许的限制。这似乎也是一种非常低效的做事方式，我想知道是否有更好的方法来实现这一点。

实际上，我们有一个具有不同权重的关键字列表，以及 Solr 中也具有不同权重的字段列表，其想法是查询索引以检索最相关的文档。

尽管它可能超出了这个问题的范围，但使这个问题进一步复杂化的是，查询还包括过滤器以过滤掉文档。这是使用以下类型的查询完成的：

```
&fq=(-document_id:4f845eb321c90b0aec5ee0eb)&fq=(-document_id:4f845cd421c90b0aec5ee041)&fq=(-document_id:4f845cea21c90b0aec5ee049)&fq=(-document_id:4f845cf821c90b0aec5ee04d)&fq=(-document_id:4f845d0e21c90b0aec5ee056)&fq=(-document_id:4f845d3521c90b0aec5ee064)&fq= (-document_id:4f845d3921c90b0aec5ee065)&fq=(-document_id:4f845d4921c90b0aec5ee06b)&fq=(-document_id:4f845d7521c90b0aec5ee07b)&fq=(-document_id:4f845d9021c90b0aec5ee084)&fq=(-document_id:4f845dac21c90b0aec5ee08e)&fq=(-document_id:4f845dbc21c90b0aec5ee093)
```

这些也可以为搜索查询添加很多字符，如果还有更好的方法来处理这个问题，那就太好了。

非常感谢任何帮助或建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:20:16.663

我建议将这些默认参数添加到您的请求处理程序配置中`solrconfig.xml`。他们总是一样的，对吧？

```
<requestHandler name="standard" class="solr.SearchHandler" default="true">
    <lst name="defaults">
        <str name="defType">edismax</str>
        <str name="qf">title^25 text_content^10 tags^50</str>
    </lst>  
</requestHandler> 
```

您应该能够添加静态过滤器等，这样您就不必指定这些值，除非您想做一些与默认值不同的事情，最终使 url 更短。

# javascript - 在 JSON 文件中调用位置数据类型

> ID：10094532
> 
> 赞同：0
> 
> 时间：2012-04-10T18:41:55.250
> 
> 标签：javascript, jquery, json, google-maps

我正在使用 Google Map API v3，并且我的代码通过 jQuery 从 JSON 文件调用。

```
$.getJSON("/temp/google_maps/json/google_map.json", {}, function(data){
        $.each(data.location, function(i, item){
            $("#markers").append('<li><a href="#" rel="' + i + '">' + item.title + '</a></li>');
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(item.lat, item.lng),
                map: map,
                title: item.title
            });
            arrMarkers[i] = marker;
            var infowindow = new google.maps.InfoWindow({
                content: "<h3>"+ item.title +"</h3><p>"+ item.description +"</p>"
            });
            arrInfoWindows[i] = infowindow;
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });
        });
    }); 
```

JSON 文件如下所示：

```
{
"location": [
    {
        "title": "Castillo San Felipe del Morro - San Juan",
        "description": "Fort San Felipe del Morro —or El Castillo San Felipe del Morro in Spanish— is a sixteenth-century citadel which lies on the northwestern-most point of the islet of San Juan, Puerto Rico. Named in honor of King Philip II of Spain, the fort, also referred to as \"El Morro\" or \"promontory\", was designed to guard the entrance to San Juan bay, and defend the city of San Juan from seaborne enemies. <a href=\"http://en.wikipedia.org/wiki/Fort_San_Felipe_del_Morro\">More Info</a>",
        "lat": 18.470186,
        "lng": -66.122096
    },
    {
        "title": "Playa de Jobos - Isabela",
        "description": "Beautiful beach, great for surfing and soaking up the sun.",
        "lat": 18.51379572782087,
        "lng": -67.07676887512207
    },
    {
        "title": "Radiotelescopio de Arecibo - Arecibo",
        "description": "The Arecibo Observatory is a very sensitive radio telescope located approximately 9 miles (14 km) south-southwest from the city of Arecibo in Puerto Rico. It is operated by Cornell University under cooperative agreement with the National Science Foundation. The observatory works as the National Astronomy and Ionosphere Center (NAIC) although both names are officially used to refer to it. NAIC more properly refers to the organization that runs both the observatory and associated offices at Cornell University. <a href=\"http://en.wikipedia.org/wiki/Arecibo_Observatory\">More Info</a>",
        "lat": 18.344179271158357,
        "lng": -66.75267219543457
    }
]
} 
```

正如我所说的效果很好，但现在我必须调整脚本以从以下文件中提取：

```
{
    "TYPE" : ["location"], "DATA" :[
        { 
```

相反，如果前一个：

```
{
    "location": [
        { 
```

如何更改我的 jQuery 以调用此数据集？任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:47:32.667

除非我弄错了，否则您只是更改`data.location`为`data.data`例如：

```
$.getJSON("/temp/google_maps/json/google_map.json", {}, function(data){
    $.each(data.DATA, function(i, item){
        $("#markers").append('<li><a href="#" rel="' + i + '">' + item.title + '</a></li>');
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(item.lat, item.lng),
            map: map,
            title: item.title
        });
        arrMarkers[i] = marker;
        var infowindow = new google.maps.InfoWindow({
            content: "<h3>"+ item.title +"</h3><p>"+ item.description +"</p>"
        });
        arrInfoWindows[i] = infowindow;
        google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
        });
    });
}); 
```

# asp.net - 使用 Regex OR 运算符解决 2 个条件

> ID：10094534
> 
> 赞同：27
> 
> 时间：2012-04-10T18:41:57.627
> 
> 标签：asp.net, regex, vb.net

我正在尝试使用 OR 运算符将 2 个正则表达式组合成 1 个：`|`

我有一个检查字母后跟 8 位数字的匹配：

```
Regex.IsMatch(s, "^[A-Z]\d{8}$") 
```

我有另一个只检查 9 位数字：

```
Regex.IsMatch(s, "^\d{9}$") 
```

现在，而不是这样做：

```
If Not Regex.IsMatch(s, "^[A-Z]\d{8}$") AndAlso
   Not Regex.IsMatch(s, "^\d{9}$") Then 
    ...
End If 
```

我以为我可以简单地做：

```
If Not Regex.IsMatch(s, "^[A-Z]\d{8}|\d{9}$") Then
    ...
End If 
```

显然我没有正确地将两者结合起来，显然我在正则表达式方面很糟糕。任何帮助将非常感激。

对于那些想知道的人，我确实看了一眼[如何在正则表达式中结合 2 个条件和更多条件，](https://stackoverflow.com/questions/9409171/how-to-combine-2-conditions-and-more-in-regex)但我仍然摸不着头脑。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-10T18:46:04.483

`|`运算符具有高优先级，并且在您的原始正则表达式中将首先应用。您应该将两个正则表达式与分组括号结合起来，以明确优先级。如：

```
"^(([A-Z]\d{8})|(\d{9}))$" 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-10T18:45:51.590

怎么用`^[A-Z0-9]\d{8}$`？

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-10T18:45:20.917

我认为您想对条件进行分组：

```
Regex.IsMatch(s, "^(([A-Z]\d{8})|(\d{9}))$") 
```

^ 和 $ 代表行的开头和结尾，因此您不希望在 or 条件中考虑它们。括号允许您明确说明“此括号中的所有内容”或“此其他括号中的任何内容”

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-10T19:00:22.773

@MikeC 的产品似乎是最好的：

```
^[A-Z0-9]\d{8}$ 
```

...但是至于为什么您的表达式没有按照您期望的方式工作，您必须了解`|`“或”或“交替”运算符具有非常高的优先级 - 我相信唯一更高的优先级是分组构造。如果您使用您的示例：

```
^[A-Z]\d{8}|\d{9}$ 
```

...您基本上是在说“匹配字符串的开头，大写字母，然后是 8 位数字或匹配 9 位数字，然后是字符串的结尾” - 如果您的意思是“匹配字符串的开头，然后是大写字母，然后是 8 位数字然后是字符串的结尾或字符串的开头，后跟 9 位数字，然后是字符串的结尾”，那么您想要以下之一：

```
^([A-Z]\d{8}|\d{9})$
^[A-Z]\d{8}$|^\d{9}$ 
```

希望对您的理解有所帮助

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-10T18:45:41.947

我发现`OR`运算符有时也有点奇怪，我做什么我使用组来表示我想要匹配的部分，所以你的正则表达式会变成这样：`^(([A-Z]\d{8})|(\d{9}))$`

# c++ - 如何在 Linux 中使用 C++ 下载受密码保护的 URL？

> ID：10094547
> 
> 赞同：0
> 
> 时间：2012-04-10T18:42:56.387
> 
> 标签：c++, linux

首先，我不是想侵入任何东西或任何人的电子邮件。

我是新的软件工程师，我需要登录公司 wiki 页面并将显示的信息下载到文本文件或其他内容中，这样我就可以搜索我正在寻找的数据并根据我从 wiki 页面中学到的内容进行讨论。我确实有 wiki 页面的用户名和密码，无需闯入。

问题是，我想不出一个好的方法来做到这一点。我正在使用 C++，操作系统是 Linux。

这是我到目前为止所拥有的。这不会发出用户名和密码。有人可以告诉我如何发布用户名和密码吗？

> ```
> string line;
> system("wget www.cooperateweb.com/wikipage/productpage/FWversions+date");
> 
> ifstream file ("index.html");
> 
> while (!file.eof())
> {
> getline(file,line);
> cout<<line<<"\n";    }    file.close(); 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:44:58.210

与任何 URL 相同的方式。

```
scheme://username:password@host/path 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:46:27.907

来自[TFM](http://linux.die.net/man/1/wget)：

```
 --user=user
 --password=password
    Specify the username user and password password for both FTP and HTTP
    file retrieval. These parameters can be overridden using the --ftp-user
    and --ftp-password options for FTP connections and the --http-user and
    --http-password options for HTTP connections. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:51:40.813

```
#define MAX_CMD_LENGTH 1000;
char cmdBuffer[MAX_CMD_LENGTH];
/* for sake of demonstration */
char *username = "foo";
char *password = "bar";
sprintf(cmdBuffer, "wget --user=%s --password=%s http://www.cooperateweb.com/wikipage/productpage/FWversions+date", username, password);
char *cmd = malloc(strlen(cmdBuffer) + 1);
strncpy(cmd, cmdBuffer, strlen(cmdBuffer) + 1);
system((const char *)cmd);
free(cmd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:48:56.703

恕我直言，最简单的方法是使用 curl。Curl 是一个比 wget 更复杂的 Web 客户端。

根据您的需要，最好的方法可能是基于 Boost 的 cpp-netlib。

# machine-learning - 回归中的局部和全局基函数有什么区别？

> ID：10094550
> 
> 赞同：1
> 
> 时间：2012-04-10T18:43:16.440
> 
> 标签：machine-learning, regression

对于一些基函数的回归，我读到高斯基函数是局部的，而多项式基函数是全局的。这是什么意思 ？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:47:10.277

高斯以某个值为中心，当您远离它时逐渐减小到 0。相反，多项式延伸到整个范围。

这意味着高斯将模拟数据的局部特征（如隆起或山谷），而多项式将模拟数据中的全局模式（例如，整体下降或上升趋势）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T11:31:13.390

局部基函数（您也经常会看到称为*紧支撑基函数*）仅在特定区间上本质上是非零的。用于近似/回归的此类函数的示例是 B 样条曲线、小波等。另一方面，多项式除了根以外的任何地方都是非零的。考虑使用单项式基础的最小二乘回归曲线 - 您得到的范德蒙德矩阵不会表现出任何类型的结构 - 如果 x=0，则元素只能为零。现在假设您尝试使用具有固定节点的 BSpline 曲线来解决相同的问题。现在，由于基函数是局部的，您的矩阵将是带状的 - 每行将包含零项，因为基函数的效果仅存在于某个间隔上。

# objective-c - 当我将图像保存到文件时，保存的方向是错误的

> ID：10094552
> 
> 赞同：2
> 
> 时间：2012-04-10T18:43:26.927
> 
> 标签：objective-c, xcode, image, xcode4

当我将图像保存到文件时，它会以错误的方向保存。

```
- (void)saveImage:(UIImage *)image:(NSString *)imageName
{
   NSData *imageData = UIImagePNGRepresentation(image);         
   NSFileManager *fileManager = [NSFileManager defaultManager];   
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
       NSUserDomainMask, YES);
   NSString *documentsDirectory = [paths objectAtIndex:0];         
   NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:
      [NSString stringWithFormat:@"%@.png", imageName]];
   [fileManager createFileAtPath:fullPath contents:imageData attributes:nil];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T22:29:22.233

尝试另存为 jpeg：

NSData *imageData = UIImageJPEGRepresentation(image,1.0);

如果您需要将其保存为 PNG，请查看此讨论： [UIImagePNGRepresentation ..... writeToFile 始终为横向](https://stackoverflow.com/questions/6358559/uiimagepngrepresentation-writetofile-is-always-landscape)

# java - 多预订系统

> ID：10094558
> 
> 赞同：0
> 
> 时间：2012-04-10T18:43:49.420
> 
> 标签：java, data-structures

我目前正在开发一个预订系统作为我学位的任务。我需要为每个放映时间（单选按钮）“保存/存储”座位计划，例如，如果我在 13:00 预订 2 张门票，我也可以在 15:00 在同一地点预订 2 张门票。这样做的最佳方法是什么？

PS：我没有使用数据库，我不想这样做；由于任务要求。

这是我的代码，如果可以，请运行它。

```
// CM1203 Fundamentals of Computing with Java; Second Assignement.
// Walter Carvalho - C1001984; 2012.
// Cardiff University

// Load Libraries
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;
import java.text.*;

public class cinemaSystem extends JFrame implements ActionListener {
    // Global Variables
    boolean lselected, rselected, mselected;
    double chargeDue;
    int a, b, c;
    static Ticket oapticket, childticket, adultticket;
    JFrame frame = new JFrame(); // Creates JFrame
    JLabel title, lchild, ladult, loap, ltotalprice, time;
    JTextField child, adult, oap, totalprice;
    JButton submit;
    JRadioButton time1, time2, time3, time4, time5; // Radio Butons
    JToggleButton l[][], m[][], r[][]; // Names grid of JButtons
    JPanel panel1, panel2, panel3, panel4, panel5, panel6;
    ArrayList<String> seatsAvailable = new ArrayList<String>();
    ArrayList<String> coupon = new ArrayList<String>();

    // Constructor
    public cinemaSystem(){

            title = new JLabel("Cinema Booking System");
            title.setFont(new Font("Helvetica", Font.BOLD, 30));
            title.setLocation(12,5);
            title.setSize(600, 60);

            frame.setLayout(null); // Setting Grid Layout
            // panel1.setLayout(new GridLayout(seat,row));
            l = new JToggleButton[4][4]; // Allocating Size of Grid
            panel1 = new JPanel(new GridLayout(4,4));
            panel1.setBounds(20, 95, 220, 140);
            for(int y = 0; y <4 ; y++){
                    for(int x = 0; x < 4; x++){
                        l[x][y] = new JToggleButton("L" + y + x); // Creates New JButton
                        l[x][y].addActionListener(this);
                        seatsAvailable.add("L" + y + x);
                        panel1.add(l[x][y]); //adds button to grid
                    }
            }

            m = new JToggleButton[4][2]; // Allocating Size of Grid
            panel2 = new JPanel(new GridLayout(2,4));
            panel2.setBounds(240, 165, 220, 70);
            for(int y = 0; y <2 ; y++){
                    for(int x = 0; x < 4; x++){
                        m[x][y] = new JToggleButton("M" + y + x); // Creates New JButton
                        m[x][y].addActionListener(this);
                        seatsAvailable.add("M" + y + x);
                        panel2.add(m[x][y]); //adds button to grid
                    }
            }

            r = new JToggleButton[4][4]; // Allocating Size of Grid
            panel3 = new JPanel(new GridLayout(4,4));
            panel3.setBounds(460, 95, 220, 140);
            for(int y = 0; y <4 ; y++){
                    for(int x = 0; x < 4; x++){
                        r[x][y] = new JToggleButton("R" + y + x); // Creates New JButton
                        r[x][y].addActionListener(this);
                        seatsAvailable.add("R" + y + x);
                        panel3.add(r[x][y]); //adds button to grid
                    }
            }

            panel4 = new JPanel(new FlowLayout());
            panel4.setBounds(0, 250, 300, 70);

            lchild = new JLabel("Child");
            child = new JTextField("0", 2);
            child.addActionListener(this);

            ladult = new JLabel("Adult");
            adult = new JTextField("0", 2);
            adult.addActionListener(this);

            loap = new JLabel("OAP");
            oap = new JTextField("0", 2);
            oap.addActionListener(this);

            submit = new JButton("Submit");
            submit.addActionListener(this);

            oapticket = new Ticket(4.70);
            childticket = new Ticket(3.50);
            adultticket = new Ticket(6.10);     

            child.addKeyListener(new MyKeyAdapter());
            oap.addKeyListener(new MyKeyAdapter());
            adult.addKeyListener(new MyKeyAdapter());

            panel4.add(lchild);
            panel4.add(child);
            panel4.add(ladult);
            panel4.add(adult);
            panel4.add(loap);
            panel4.add(oap);
            panel4.add(submit);

            panel5 = new JPanel(new FlowLayout());
            panel5.setBounds(240, 250, 300, 70);

            ltotalprice = new JLabel("Charge Due (£): ");
            totalprice = new JTextField("£0.00", 5);
            totalprice.setEnabled(false);
            panel5.add(ltotalprice);
            panel5.add(totalprice);

            panel6 = new JPanel(new FlowLayout());
            panel6.setBounds(0, 55, 560, 30);

            time = new JLabel("Please select a film time: ");
            time1 = new JRadioButton("13:00", true);
            time2 = new JRadioButton("15:00", false);
            time3 = new JRadioButton("17:00", false);
            time4 = new JRadioButton("19:00", false);
            time5 = new JRadioButton("21:00", false);

            ButtonGroup group = new ButtonGroup();
            group.add(time1);
            group.add(time2);
            group.add(time3);
            group.add(time4);
            group.add(time5);
            panel6.add(time);
            panel6.add(time1);
            panel6.add(time2);
            panel6.add(time3);
            panel6.add(time4);
            panel6.add(time5);
            time1.addActionListener(this);
            time2.addActionListener(this);
            time3.addActionListener(this);
            time4.addActionListener(this);
            time5.addActionListener(this);
            frame.add(title);
            frame.add(panel1);
            frame.add(panel2);
            frame.add(panel3);
            frame.add(panel4);
            frame.add(panel5);
            frame.add(panel6);
            frame.setPreferredSize(new Dimension(700, 350));
            frame.setTitle("Cinema Booking");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack(); //sets appropriate size for frame
            frame.setVisible(true); //makes frame visible

    }

    // Calculates Charge Due for current transaction.
    public double calcChargeDue(){
        DecimalFormat df = new DecimalFormat("#.##");
        double chargeDue = 0.0;
        chargeDue = (a*childticket.price) + (b*oapticket.price) + (c*adultticket.price);
        totalprice.setText("£"+df.format(chargeDue));
        return chargeDue;
    }

    // Method to check if the number of people matches the number of seats selected.
    public void check(){
        int check = coupon.size();
        int noTickets = a + b + c;
        if (check != noTickets){
            submit.setEnabled(false);
        }
        else {
            submit.setEnabled(true);
        }

    }

    // Ticket Object
    public class Ticket {

        double price;

        // Constructor
        public Ticket(double cost) {
            price = cost;
        }

        public double getTicketPrice() {
            return price;
        }

    }

    public void actionPerformed(ActionEvent e)
    {

        a = Integer.parseInt(child.getText());
        b = Integer.parseInt(oap.getText());
        c = Integer.parseInt(adult.getText());

        for(int y = 0; y < 4; y++){
            for(int x = 0; x < 4; x++){

                lselected = l[x][y].isSelected();
                rselected = r[x][y].isSelected();

                if (e.getSource() == l[x][y]) {
                    if(lselected == true){
                        coupon.add(e.getActionCommand());
                        calcChargeDue();
                        check();
                    }
                    else {
                        coupon.remove(e.getActionCommand());
                        check();
                    }
                }

                if (e.getSource() == r[x][y]) {
                    if(rselected == true){
                        coupon.add(e.getActionCommand());
                        calcChargeDue();
                        check();
                    }
                    else {
                        coupon.remove(e.getActionCommand());
                        check();
                    }
                }

                if (e.getSource() == oap){
                    calcChargeDue();
                    check();
                }

                if (e.getSource() == adult){
                    calcChargeDue();
                    check();
                }

                if (e.getSource() == child){
                    calcChargeDue();
                    check();
                }

            }
        }

        for(int y = 0; y < 2; y++){
            for(int x = 0; x < 4; x++){

                mselected = m[x][y].isSelected();

                if (e.getSource() == m[x][y]) {
                    if(mselected == true){
                        coupon.add(e.getActionCommand());
                        calcChargeDue();
                        check();
                    }
                    else {
                        coupon.remove(e.getActionCommand());
                        check();
                    }
                }
            }
        }

        if(time1 == e.getSource()){

        }

        if(time2 == e.getSource()){

        }

        if(time3 == e.getSource()){

        }

        if(time4 == e.getSource()){

        }

        if(time5 == e.getSource()){

        }

        if(submit == e.getSource()) {

            for(int y = 0; y < 4; y++){
                for(int x = 0; x < 4; x++){

                    lselected = l[x][y].isSelected();
                    rselected = r[x][y].isSelected();

                    if (lselected == true) {
                            l[x][y].setEnabled(false);
                    }

                    if (rselected == true) {
                            r[x][y].setEnabled(false);
                    }

                }
            }

            for(int y = 0; y < 2; y++){
                for(int x = 0; x < 4; x++){

                    mselected = m[x][y].isSelected();

                    if (mselected == true) {
                            m[x][y].setEnabled(false);
                    }
                }
            }

            Collections.sort(coupon);
            System.out.println("Here's your ticket:");
            System.out.println(coupon);
            System.out.println("Child: " + child.getText());
            System.out.println("Adult: " + adult.getText());
            System.out.println("OAP: " + oap.getText());
            System.out.println("Total Price: " + totalprice.getText());
            System.out.println("Thank you. Enjoy your film.");
            System.out.println(" ");
            coupon.clear();
            child.setText("0");
            adult.setText("0");
            oap.setText("0");
        }

    }

    // Main Class
    public static void main(String[] args) {
            new cinemaSystem(); //makes new ButtonGrid with 2 parameters
    }
} 
```

相关：[Java：提交后禁用所有 JToggleButtons — setEnabled(false);](https://stackoverflow.com/questions/10092353/java-disable-all-jtogglebuttons-after-submission-setenabledfalse)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:50:28.203

如果您已经让它在一个预订时间工作，您需要做的就是获取所有用于存储有关该预订时间的信息的数据结构，并将它们加倍以支持多个独立的预订时间。

例如，`ArrayList<String> seatsAvailable = new ArrayList<String>();`将变为：

```
Dictionary<Time, ArrayList<String> > seatsAvailable = 
    new Dictionary<Time,  ArrayList<String> >();

Time firstBooking = new Time(13,0,0);
Time secondBooking = new Time(15,0,0);

seatsAvailable.put( firstBooking , new ArrayList<String>() );
seatsAvailable.put( secondBooking , new ArrayList<String>() ); 
```

现在您可以跟踪两个完全独立的 seatAvailable ArrayList。

# asp.net - 404 重定向标头显示 302

> ID：10094560
> 
> 赞同：1
> 
> 时间：2012-04-10T18:43:51.587
> 
> 标签：asp.net, .net, vb.net, http-headers, http-status-code-302

在我的应用程序中，我为 404 编写了以下代码。

```
 Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
    Dim exc As Exception
            Dim readdInfo As New NameValueCollection

            exc = Server.GetLastError()
            Dim httpCode As Integer = CType(exc, HttpException).GetHttpCode()
            If httpCode = 404 Then
                If TypeOf Context.CurrentHandler Is System.Web.UI.Page Then
                    Context.Server.Transfer("404.aspx")
                    Context.Response.Flush()
                    Context.Response.End()
                Else
                    Context.RewritePath("404.aspx")
                    Context.Response.Clear()
                    Context.Response.ClearContent()
                    Context.Response.ClearHeaders()
                    **Context.CurrentHandler.ProcessRequest(Context)**
                    Context.Response.Flush()
                    Context.Response.End()
                End If
    End If
 End Sub 
```

但是当我尝试运行上面的程序时，我得到 **Context.CurrentHandler**是空异常。如果我保留 Response.Redirect 代替 Server.Transfer 我得到 301 标头。我使用[http://404checker.com/full-header-checker](http://404checker.com/full-header-checker)进行标题检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:49:35.260

不确定您要做什么，但 Response.Redirect 是 302：

```
HTTP/1.1 302 Object moved 
```

您的 Context.CurrentHandler 检查在 Server.Transfer 之前，因此与您的空异常无关。

# silverlight - Silverlight：以编程方式打开和读取 XAML 文件？

> ID：10094562
> 
> 赞同：0
> 
> 时间：2012-04-10T18:44:05.660
> 
> 标签：silverlight, parsing, xaml, io

我发现了如何使用 XamlReader.Load() 以编程方式解析/加载 XAML 字符串，但是如果我让用户将“.xaml”文件拖放到我的 Silverlight 应用程序中，我将如何将该文件解析为一个 XAML 文件并将内容作为字符串读取以提供给 XamlReader.Load() 方法。

或者有没有通过使用反射更有效/更好的方法？

我想允许用户使用“silverlight for dummy”silverlight 设计师（在合理范围内）来设计一个简单的控件。（即标签和文本框）。然后将其保存或导出为 XAML 文件（或者我可以简单地让他们将其保存为 TXT 文件？）然后他们将此文件放入我的 Silverlight 应用程序中，并将文本解析为 XamlReader.Load() ，然后我可以将我新以编程方式创建的对象添加到列表框中。

我有拖放文件和加载 XAML 字符串的逻辑，但是获取“.xaml”文件内容的中间点是我自己困惑的地方......

*编辑*

@nicholas，这正是我所选择的。我不知道昨天发生了什么，但我想我只是有一个严重的“大脑放屁”。这就是我最终的结果：（仍然有一些清理和重构，但这是为了测试）

```
 IDataObject data = e.Data;
        if (data.GetDataPresent(DataFormats.FileDrop))
        {
            FileInfo[] files = data.GetData(DataFormats.FileDrop) as FileInfo[];

            if (files.Length > 1)
            {
                //TODO
            }
            else
            {
                FileInfo file = files[0];
                extension = file.Extension;
                string xaml = string.Empty;
                using (Stream stream = file.OpenRead())
                {
                    xaml = StreamUtils.StreamToString(stream);
                }
                if (!xaml.IsEmpty())
                {
                    try
                    {
                        myListBox.Items.Add(XamlReader.Load(xaml);
                    }
                    catch (Exception ex)
                    {
                        //TODO
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:17:16.467

因此，您有一个`Drop`事件处理程序，您可以从中接收带有`Data`属性的事件参数，一个`IDataObject`. 从[MSDN](http://msdn.microsoft.com/en-us/library/ms597425%28v=vs.95%29.aspx)中，您可以了解如何`FileStream`为已删除的文件获取 a，然后您可以将其加载到字符串（例如 use `StreamReader`）中以由`XamlReader.Load()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:21:31.267

如果我理解正确，将分为三个不同的步骤：

*   将 .xaml 文件或任何类型文件的内容解析为“字符串”（可以是 .txt 文件或任何其他格式）
*   使用 XamlReader.Load() 从步骤 1 中的此字符串生成 UI 元素
*   将步骤 2 中的 UI 元素插入 ListBox.Items 集合

这有帮助吗？

# java - 如何使用 Apache Wicket 实现 ACL？

> ID：10094564
> 
> 赞同：0
> 
> 时间：2012-04-10T18:44:10.370
> 
> 标签：java, wicket, acl

我目前验证了 3 次。示例删除链接仅允许超级用户使用。所以我验证了 3 次。

1-在构造函数中（重定向） 2-在检票口链接构造中（将链接设置为 False）在 Onclick 中（返回）

我觉得自己像个白痴一样验证了 3 次。它应该是我可以用来在我的检票口应用程序中实现安全性的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:53:53.473

您可以根据特定用户的角色启用组件。为此，您必须

*   实施您自己的授权策略和
*   根据允许哪个角色执行哪个操作来注释您的组件。

可以[在此处找到](http://www.wicket-library.com/wicket-examples/authorization/)此方法的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:41:55.620

使用 Wicket-Auth-Roles。您需要实现自己的 AuthenticatedWebSession 并向组件添加注释。以下教程包含示例链接以及如何集成它：

[https://www.google.de/search?sourceid=chrome&ie=UTF-8&q=wicket-security](https://www.google.de/search?sourceid=chrome&ie=UTF-8&q=wicket-security)

# entity-framework - Oracle ODP.Net 和 EF CodeFirst - edm.decimal 错误

> ID：10094567
> 
> 赞同：4
> 
> 时间：2012-04-10T18:44:21.387
> 
> 标签：entity-framework, ef-code-first, odp.net, dbcontext, entity-framework-4.3

我有以下简单实体：

```
public class Something{
    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
    public int ID { get; set; }
    public string NAME { get; set; }
    public int STATUS { get; set; }
} 
```

如您所见，我不希望从数据库生成 ID，但我将手动输入。这是我的 DbContext 类：

```
public class MyCEContext : DbContext {
    ...
    public DbSet<Something> Somethings { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        string dbsch = "myce";
        modelBuilder.Entity<Something>().ToTable("SOMETHING", dbsch);
    }
} 
```

这里没有什么特别的。但是这段代码失败了：

```
 using (MyCEContext ctx = new MyCEContext()) {
                Something t = new Something();
                t.ID= 1;
                t.NAME = "TEST";
                t.STATUS = 100;

                ctx.Somethings.Add(t);
                ctx.SaveChanges();
            } 
```

这是错误：

**指定的值不是“Edm.Decimal”类型的实例**

通常，EF 总是尝试将值发送到 int 主键字段，我得到 edm.decimal 错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:20:10.697

正如我对先前答案的评论，我找到了更好的解决方案，这很奇怪，但它有效

```
protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Entity<TestEntity>().ToTable("TESTENTITY", "SCHEMENAME");
            modelBuilder.Entity<TestEntity>().Property(p => p.Id).HasColumnName("ID").HasColumnType("INT");
            modelBuilder.Entity<TestEntity>().Property(p => p.TestDateTime).HasColumnName("TESTDATETIME");
            modelBuilder.Entity<TestEntity>().Property(p => p.TestFloat).HasColumnName("TESTFLOAT");
            modelBuilder.Entity<TestEntity>().Property(p => p.TestInt).HasColumnName("TESTINT");
            modelBuilder.Entity<TestEntity>().Property(p => p.TestString).HasColumnName("TESTSTRING");
        } 
```

和 TestEntity 看起来像这样

```
public class TestEntity
    {
        public int Id{ get; set; }

        public string TestString { get; set; }

        public int TestInt { get; set; }

        public float TestFloat { get; set; }

        public DateTime TestDateTime { get; set; }
    } 
```

# jsf-2 - JSF 2.0 - Myfaces 在渲染复合组件时遇到问题

> ID：10094568
> 
> 赞同：0
> 
> 时间：2012-04-10T18:44:26.267
> 
> 标签：jsf-2, myfaces, composite-component

几天前我将 mojarra 更改为 myfaces 来解决[这个问题](https://stackoverflow.com/questions/10002555/components-are-with-the-same-id-inside-uirepeat)，现在我在渲染我的复合组件时遇到了一个奇怪的问题，当我第二次打开一个弹出窗口时它们根本没有渲染（弹出窗口也是一个复合组件） .

第一次，正如您在 fieldset 中看到的，一切正常： ![第一次打开](../Images/9837fe0002e31dc5cfdcbffdb67baac8.png)

然后我点击“CANCELAR”（取消）按钮，第二次，除了对话框，我的复合组件都没有被渲染： ![二开](../Images/f42b439ead7b794c7cc8baf7b59decf4.png)

当我查看日志时，我发现了这些消息：

```
[#|2012-04-10T15:22:00.681-0300|SEVERE|glassfish3.1.1|org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer|_ThreadID=19;_ThreadName=Thread-2;|facet UIComponent.COMPOSITE_FACET_NAME not found when rendering composite component prevenda:popupPreVenda:j_id_2uz|#]
[#|2012-04-10T15:22:00.684-0300|SEVERE|glassfish3.1.1|org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer|_ThreadID=19;_ThreadName=Thread-2;|facet UIComponent.COMPOSITE_FACET_NAME not found when rendering composite component prevenda:popupPreVenda:inputRazaoSocial|#]
[#|2012-04-10T15:22:00.685-0300|SEVERE|glassfish3.1.1|org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer|_ThreadID=19;_ThreadName=Thread-2;|facet UIComponent.COMPOSITE_FACET_NAME not found when rendering composite component prevenda:popupPreVenda:j_id_2vi|#]
[#|2012-04-10T15:22:00.685-0300|SEVERE|glassfish3.1.1|org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer|_ThreadID=19;_ThreadName=Thread-2;|facet UIComponent.COMPOSITE_FACET_NAME not found when rendering composite component prevenda:popupPreVenda:j_id_2vn|#]
[#|2012-04-10T15:22:00.686-0300|SEVERE|glassfish3.1.1|org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer|_ThreadID=19;_ThreadName=Thread-2;|facet UIComponent.COMPOSITE_FACET_NAME not found when rendering composite component prevenda:popupPreVenda:j_id_2vs|#] 
```

如您所见，问题是 myfaces 在复合组件中找不到构面...唯一使用构面的复合组件是 hrgi:popup:

```
<c:interface>
    <c:attribute name="titulo" default="sem titulo" required="false"/>
    <c:attribute name="renderizar" default="false" required="false"/>
    <c:attribute name="modal" default="true" required="false"/>
    <c:attribute name="bordaConteudo" default="true" required="false"/>
    <c:facet name="cabecalho" required="false"/>
    <c:facet name="conteudo" required="true"/>
    <c:facet name="botoes" required="true"/>
</c:interface>

<c:implementation>
<h:outputStylesheet library="css" name="hrgiPopup.css" target="head"/>
<h:outputStylesheet library="css" name="clearfix.css" target="head"/>
<h:outputScript library="js" name="hrgiPopup.js" target="head"/>
<h:panelGroup layout="block" rendered="#{cc.attrs.renderizar}"
              class="hrgi-dialog-panel clearfix">
    <h:panelGroup layout="block" class="hrgi-dialog-overlay clearfix" rendered="#{cc.attrs.modal}"></h:panelGroup>
    <h:panelGroup id="popup" layout="block" class="hrgi-dialog-box clearfix">
        <h:panelGroup layout="block" class="hrgi-dialog-title clearfix">
            <h:outputText style="float:left" value="#{cc.attrs.titulo}"/>
        </h:panelGroup>
        <h:panelGroup layout="block" class="hrgi-dialog-content clearfix">
            <c:renderFacet name="cabecalho" required="false"/>
            <h:panelGroup layout="block" class="hrgi-dialog-background clearfix"
                          rendered="#{cc.attrs.bordaConteudo}">
                <c:renderFacet name="conteudo" required="true"/>
            </h:panelGroup>
            <h:panelGroup layout="block" class="clearfix" rendered="#{not cc.attrs.bordaConteudo}">
                <c:renderFacet name="conteudo" required="true"/>
            </h:panelGroup>
            <c:renderFacet name="botoes" required="true"/>
            <script type="text/javascript">
                cercarEventoTab("#{cc.clientId}:popup");
            </script>
        </h:panelGroup>
    </h:panelGroup>
</h:panelGroup>
</c:implementation> 
```

这是 MyFaces 的错误吗？Mojarra 没有显示出任何这样的问题！

**更新**

问题只是在用户单击“取消”按钮时发生......该操作调用此代码以清除字段并关闭对话框：

```
public void cancelar(ActionEvent evento){
    fechar();
    UIComponent componente=evento.getComponent().getParent().getParent().getParent();
    componente.getFacet("conteudo").getChildren().clear();
} 
```

此代码改编自您可以[在此处](http://cwiki.apache.org/MYFACES/clear-input-components.html)看到的方法。在这种情况下，仅重新创建 facet conteudo 内的组件。工作正常，除了我的复合组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:06:23.830

MyFaces 中的代码没问题。日志建议 org.apache.myfaces.renderkit.html.HtmlCompositeComponentRenderer 在您的复合组件文件中找不到 c:implementation 条目，从 2.1.6 开始，进行了一些更改以防止在 libraryName 中使用“/”字符（请参阅[MYFACES-3454](https://issues.apache.org/jira/browse/MYFACES-3454)详情）。添加了一个 web 配置参数 (org.apache.myfaces.STRICT_JSF_2_ALLOW_SLASH_LIBRARY_NAME) 以启用向后行为，但请注意新行为在规范中以明确的方式提及。

如果这不起作用，请尝试创建一个简单的演示应用程序来重现该错误并在[MyFaces 问题跟踪器](https://issues.apache.org/jira/browse/MYFACES)中创建一个问题。这样一来，它就有更好的机会在未来的版本中得到解决。

**更新**

我试图用提供的信息复制它，但没有成功。问题是调用

```
componente.getFacet("conteudo").getChildren().clear(); 
```

该代码删除了构面内的所有组件，而 MyFaces 足够聪明地记住被删除的组件。当视图恢复时，MyFaces 算法会像第一个请求一样构建视图，然后删除组件以正确恢复状态。这种行为是意料之中的，因此 MyFaces 代码中没有错误。相反，我认为前面描述的行为是 Mojarra 中的一个错误，您应该更改代码以以其他方式重置输入组件，可能会清除 bean 内的值，或者在复合组件中创建一个方法表达式属性，可以当取消操作发生并清除所需的输入字段时调用。有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:24:46.733

我不知道为什么，但是在我创建了一些类来处理异常之后，这个问题就消失了……

```
public class HRGIExceptionHandler extends ExceptionHandlerWrapper {

    private ExceptionHandler wrapped;

    public HRGIExceptionHandler(ExceptionHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return wrapped;
    }

    @Override
    public void handle() throws FacesException {
        Iterator i = getUnhandledExceptionQueuedEvents().iterator();
        while (i.hasNext()) {
            ExceptionQueuedEvent event = (ExceptionQueuedEvent) i.next();
            ExceptionQueuedEventContext context = (ExceptionQueuedEventContext)event.getSource();
            Throwable t = context.getException();
            try{
                t.printStackTrace();
            }finally{
                i.remove();
            }
        }
        getWrapped().handle();
    }
} 
```

和

```
public class HRGIExceptionHandlerFactory extends ExceptionHandlerFactory {

    private ExceptionHandlerFactory parent;

    public HRGIExceptionHandlerFactory(ExceptionHandlerFactory parent) {
        this.parent = parent;
    }

    @Override
    public ExceptionHandler getExceptionHandler() {
        ExceptionHandler result = new HRGIExceptionHandler(parent.getExceptionHandler());
        return result;
    }
} 
```

最后我把这个添加到 faces.config 中：

```
<factory>
    <exception-handler-factory>com.hrgi.web.erp.HRGIExceptionHandlerFactory</exception-handler-factory>
</factory> 
```

# css - css height 100% 不尊重 jquery 中幻灯片/显示的背景颜色

> ID：10094572
> 
> 赞同：6
> 
> 时间：2012-04-10T18:44:45.747
> 
> 标签：css

我有这个代码：

```
<div id="left">
    <div>text</div>
    <p>
        text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br> text<br>
    </p>
</div> 
```

js：

```
$('div').click(function() {
    $('p').show();
}); 
```

和CSS：

```
html, body {
    height: 100%;
}
#left {
    background: red;
 height: 100%;   
    width: 200px;
}
p { display: none; } 
```

-- [http://jsfiddle.net/AfRH2/1/](http://jsfiddle.net/AfRH2/1/)

现在，当您单击“文本”时，“p”应与其文本一起出现。为什么我的背景颜色不起作用？我希望 div 用颜色扩展

![在此处输入图像描述](../Images/d8aae27cc016b4ac8661c1f18506cbd3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T23:45:44.190

您必须添加`height: auto`or`height: auto !important`和`min-height: 100%;`

```
html, body {
    height: 100%;
}
#left {
    background: red;
    height: auto !important;
    min-height: 100%;
    width: 200px;
}
p { display: none; } 
```

见 jsfiddle：http: [//jsfiddle.net/AfRH2/7/](http://jsfiddle.net/AfRH2/7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T19:00:06.410

如果您删除，`height: 100%`那么在显示所有文本之前您不会获得红色背景。将其更改为`min-height: 100%`它可以解决您的问题（至少在小提琴中确实如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:56:42.083

取下div `height:100%;`。`#left`

# mongodb - 使用 MongoDB 数组作为堆栈

> ID：10094573
> 
> 赞同：2
> 
> 时间：2012-04-10T18:44:46.580
> 
> 标签：mongodb, stack

有没有人使用 MongoDB 的 Array 类型来实现堆栈？

我知道我可以`append`像这样的数组：

```
db.blogposts.update( {_id:5}, {$push: {comments: {by: "Abe", text:"First"}}}) 
```

在这里，数组的末尾是堆栈的顶部......我没有看到一种方法可以在第零个索引处的堆栈顶部实现这一点，但我很想错。

而且我知道我可以`peek`像这样在数组的最后一个值处：

```
db.blogposts.find( {_id:5}, {comments: {$slice:-1}}) 
```

通过这样的实现，我可以在 MongoDB 更新语句中“窥视”堆栈的顶部吗？这会给我语义，“如果堆栈的顶部是 X，则将此项目推入堆栈”。我需要这是一个原子操作！

任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:59:29.723

不幸的是，目前没有办法完全按照您所描述的那样执行此操作。

正如 Chris Shain 指出的那样，[https](https://jira.mongodb.org/browse/SERVER-2191) ://jira.mongodb.org/browse/SERVER-2191 -“$push() 到数组的前面”和类似的[https://jira.mongodb.org/browse/SERVER-1824](https://jira.mongodb.org/browse/SERVER-1824) - “支持插入特定的数组索引”会有所帮助，但这些功能目前并未针对特定的发布版本。

作为一种可能的解决方法，您可以在文档中添加一个名为“lastElement”（或等效项）的字段，其中包含推送到数组的最后一个元素的副本。在您的更新语句中，您可以查询“lastElement”值，如果匹配，同时将其设置为新值，并在单个原子操作中将相同的值推送到数组。

例如：

```
> db.blogposts.save({_id:5, comments:[{by: "Abe", text:"First"}], lastElement:{by: "Abe", text:"First"}})
> db.blogposts.find().pretty()
{
    "_id" : 5,
    "comments" : [
        {
            "by" : "Abe",
            "text" : "First"
        }
    ],
    "lastElement" : {
        "by" : "Abe",
        "text" : "First"
    }
}
> db.blogposts.update({"lastElement.text":"First"}, {$set:{lastElement:{by: "Joe", text:"Second"}}, $push:{comments:{by: "Joe", text:"Second"}}})
> db.blogposts.find().pretty()
{
    "_id" : 5,
    "comments" : [
        {
            "by" : "Abe",
            "text" : "First"
        },
        {
            "by" : "Joe",
            "text" : "Second"
        }
    ],
    "lastElement" : {
        "by" : "Joe",
        "text" : "Second"
    }
}
> 
```

作为替代方案，您可以考虑“原子操作”文档的“如果当前更新”部分中概述的策略：[http ://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)

我意识到这些都是变通方法，而不是理想的解决方案。希望以上内容可以帮助您实现目标，或者至少为您提供一些思考的食物，以便您提出不同的解决方案。如果您这样做，请在此处分享，以便任何可能遇到类似问题的社区成员都可以从您的体验中受益。谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-28T15:45:51.780

看起来像 mongoDB v2.6，现在通过`$position`运营商支持：http: [//docs.mongodb.org/manual/reference/operator/update/position/](http://docs.mongodb.org/manual/reference/operator/update/position/)

```
db.blogposts.update(
  {_id:5}
  , {$push:
      {comments:
          {$each: {by: "Abe", text:"First"}
          , $position:0 }
      }
  }
); 
```

# google-calendar-api - 如何创建以指定用户身份登录的嵌入式 Google 日历小部件？

> ID：10094574
> 
> 赞同：0
> 
> 时间：2012-04-10T18:44:50.203
> 
> 标签：google-calendar-api, google-api-client

我想在网站上使用 Google 日历的嵌入功能，但我希望它被视为由特定用户登录（我们使用的是 Google Apps for Business）。我已经知道必须创建某种代理服务，但我不确定所涉及的步骤。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:56:33.200

假设您的用户已经登录到 Google（无论是普通的 Google 帐户还是 Google Apps 帐户），您应该能够使用 Google 提供的小部件。

对于单个日历，您可以[在此处](http://support.google.com/calendar/bin/answer.py?hl=en&answer=41207)使用 Google 的教程。要获得用户有权访问的每个日历的正常视图（例如，该人在 calendar.google.com 上看到的相同内容），您应该在[此处](http://www.gmodules.com/ig/creator?url=http://www.google.com/ig/modules/calendar3.xml&up_calendarFeeds=&up_calendarColors=&up_showDatepicker=1&up_showEmptyDays=0&up_showExpiredEvents=1&synd=open&w=320&h=447&title=__MSG_Google_Calendar__&lang=en&country=ALL&border=#ffffff%7C3px,1px%20solid%20#999999)使用嵌入生成器。这是一个 iGoogle 小部件，但 Google 允许您对其进行样式设置并将其嵌入任何站点。假设用户登录到 Google，小部件将自动知道用户是谁。

# cocoa - 使用 uitextfield 检查答案

> ID：10094575
> 
> 赞同：0
> 
> 时间：2012-04-10T18:44:51.540
> 
> 标签：cocoa, uitextfield, nsdictionary

在我的应用程序中，我有一个视图，人们将使用 uitextfield 标记图表，我将检查答案是否等于字符串（正确答案）。总共有五个标签。我认为我可以使用一个带有包含答案作为键的 nsdictionary 的 plist，它会返回一个我可以总计得分的数字。在您看来，这是明智的，还是有人以更好/更有效的方式做过类似的事情？非常感谢。

# forms - 在不使用代码的情况下填写 Word 2010 表单下拉列表？

> ID：10094579
> 
> 赞同：1
> 
> 时间：2012-04-10T18:45:02.307
> 
> 标签：forms, drop-down-menu, word-2010

我的任务是为我们的一个部门更新 Word 2010 可填写表格。在表单的不同位置，它使用了一个下拉框，其中包含列表中相同的 20 多个项目。我想让它从主列表中填充所有出现的此框，从而使将来更容易更新。我知道在 Excel 中，您可以使用数据验证并从工作簿的其他位置选择源列表来执行此操作。是否可以在 Word 中执行类似的操作（引用表格、隐藏文本等）？我无法在 Word 中找到看起来很有希望的功能，我的 Google 搜索也没有产生任何有用的信息。我意识到这可能适用于 VBA，但我希望尽可能避免将代码添加到工作簿中。我还希望该列表可由不了解 VBA 的人更新。我'
谢谢。

# javascript - jQuery 有条件

> ID：10094585
> 
> 赞同：2
> 
> 时间：2012-04-10T18:45:34.473
> 
> 标签：javascript, jquery

尝试使用 jQuery 编写一个基本状态的条件，如果`div.gathering`不包含`a.cat-link`则执行以下操作。我尝试了以下方法，但似乎不起作用。任何人都可以对此有所了解吗？

```
if($("div.gathering:contains('a.cat-link')")){
    $(".gathering").append("<a href='#"+data[i]["categories"][0]["category_id"]+"div' class='cat-link' id='"+data[i]["categories"][0]["category_id"]+"' rel='external'>"+data[i]["categories"][0]["category_name"]+"<br />");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:48:36.827

这个怎么样 ：

```
if($("div.gathering").find("a.cat-link").length == 0){
  // Conditional statement returned TRUE
} 
```

jQuery 选择器返回匹配给定选择器的对象数组。这就是我们使用该`length`属性的原因。

*您*使用的方法-`$("div.gathering:contains('a.cat-link')")`
将返回一个空数组，并且在针对实际**存在的任何****对象**（即使它是一个空数组）进行测试时，JavaScript 将返回.**`true`**

 **例子 -

```
var nateArr = []; 
if (nateArr){
  // Do the dishes...
}else{
 // Eat some waffles...
} 
```

如果您自己对此进行测试，您将永远不会停止洗这些盘子，因为即使它们`nateArr`包含零个元素，它仍然**存在，**因此条件语句将始终返回`true`。
[你的手指会皱巴巴的]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:01:47.937

尝试这个....

```
$("div.gathering:not(:contains(a.cat-link))")
    .append("<a href='#"+data[i]["categories"][0]["category_id"]+"div' class='cat-link' id='"+data[i]["categories"][0]["category_id"]+"' rel='external'>"+data[i]["categories"][0]["category_name"]+"<br />") 
```

这只会返回没有 a.cat-link 的类聚集的 div ....

希望这可以帮助....**

# iphone - NSFetchedResultsController 的替代品？

> ID：10094591
> 
> 赞同：0
> 
> 时间：2012-04-10T18:45:53.260
> 
> 标签：iphone, objective-c, ios, core-data

目前我有一个`UITableView`其数据源是`NSFetchedResultsController`. 最重要的事情`NSFetchedResultsController`是如果有任何更改，通过委托方法自动更新我的表。但是，我不再需要获取我的实体，`"Pictures"`现在调用它。我有另一个名为 的实体`Folder`，并且与`folders`有关系`Pictures`，所以每个实体`folder`都有一个`NSSet pictures`.

因此，现在我可以做的不是获取所有`pictures`属于某个特定的东西，而是返回我需要的东西，我可以将它分配给一个数组并将其设置为我的源。但是，这并没有像我想的那样给我自动表更新。`folder``folder.pictures``tableView``NSFetchedResultsController`

我的问题是如何在`NSFetchedResultsController`不执行 fetch 的情况下拥有 an（即自动更新我的表的委托方法）的功能？我不再需要获取了，因为我有一个`NSSet`想要的`NSManagedObjects`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:51:30.257

获取的结果控制器有什么问题？只需保留它并在关系集上也使用点表示法 - 您将获得两全其美的效果。

获取结果控制器的真正优势实际上是隐藏的。它会获取你的对象（`folders`）好吧 - 但它可能不会获取所有的关系属性（`pictures`）。这称为故障。这意味着如果需要，核心数据将在后台获取数据。它会自动针对速度和良好的内存使用进行优化。例如，数据源的潜在巨大数组不必一次全部在内存中，这是数组不可避免的。

因此，您真的不想摆脱 FRC。她是你的朋友。忠于她。;-)

# ios - 使用自定义动画呈现/关闭模态视图控制器不会在下方显示呈现视图控制器

> ID：10094592
> 
> 赞同：3
> 
> 时间：2012-04-10T18:45:53.697
> 
> 标签：ios, uiviewcontroller, modalviewcontroller

我已经实现了一个视图控制器，它提供了一个类似于 UINavigationController 的导航结构。它正在使用视图控制器包含。所有视图控制器都作为子级添加。

当我在此导航流程中从视图控制器呈现模态视图控制器时，底层视图在自定义转换期间消失，用户只能查看下面的窗口视图。

```
[UIView animateWithDuration:0.35 animations:^{

    self.view.transform = CGAffineTransformMakeScale(0.4, 0.4);
    self.view.alpha = 0.0;

} completion:^(BOOL finished) {
    [[self presentingViewController] dismissViewControllerAnimated:NO completion:nil];
}]; 
```

这是一个非常不和谐的经历。以前，此动画会缩小模态视图控制器的视图并将其淡入下方呈现视图控制器的视图。正如我之前所说，现在用户可以看到 Window 的视图（目前还没有设置颜色值）。

参考 View Controller 文档，我觉得好像我已经设置了所有正确的字段，但是，有些地方是不正确的。

> 当视图控制器希望该视图控制器执行任务时，它会呈现另一个视图控制器。呈现视图控制器负责此行为。它配置呈现的视图控制器，从它接收信息，并最终将其关闭。然而，当它被呈现时，呈现的视图控制器的视图被临时添加到窗口的视图层次结构中。

我的呈现视图控制器是我的自定义导航控制器，呈现的视图控制器是一个模态视图控制器，它允许用户撰写对话。我的应用程序的窗口根视图控制器已正确配置为我的自定义导航控制器。

我还阅读了有关演示上下文的更多信息，并将我的自定义导航控制器配置为将定义PresentationContext 设置为 YES。

> 当一个视图控制器被呈现时，它所覆盖的屏幕部分由另一个视图控制器提供给它的呈现上下文定义。提供呈现上下文的视图控制器不需要与呈现它的视图控制器相同。图 1-15 显示了与图 1-14 相同的视图控制器层次结构。您可以看到内容视图呈现了视图控制器，但它没有提供呈现上下文。相反，视图控制器由选项卡控制器呈现。因此，即使呈现视图控制器仅覆盖选项卡视图控制器提供给它的屏幕部分，呈现的视图控制器也会使用选项卡视图控制器拥有的整个区域。在我的自定义导航控制器中，我没有覆盖任何与视图控制器的呈现或解除相关的方法。添加的所有子视图控制器都作为 childViewControllers 添加，并且它们的视图已添加到此自定义导航控制器中。

*   为什么自定义转换会显示 Window 的视图，而不是尊重提供演示上下文的自定义包含视图控制器？
*   为什么传统的过渡动画会按预期工作？

# iphone - 在 iPhone 上显示启动画面/加载屏幕的时间更长

> ID：10094595
> 
> 赞同：3
> 
> 时间：2012-04-10T18:46:13.880
> 
> 标签：iphone, objective-c, xcode, xcode4, splash-screen

我有一个加载速度非常快的简单 iPhone 应用程序，因此启动画面只显示几分之一秒。有什么方法可以控制启动画面显示多长时间？我四处寻找，并没有发现任何似乎可行的东西。我必须用我的启动图像创建一个子视图吗？我将如何控制它的显示时间并在子视图和主视图之间切换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:56:18.930

虽然我同意这里表达的观点以及关于为什么不应该“滥用”默认屏幕的另一个问题，但在我看来，要达到这种效果是微不足道的：

启动时，只需放置一个看起来与启动屏幕完全相同的视图并使用 an`NSTimer`将其关闭。真的很容易。

```
// viewDidLoad
[self performSelector:@selector(dismiss) 
           withObject:nil 
           afterDelay:yourTimeIntervalInSectons];
// dismiss
[self performSegueWithIdentifier:@"ID" sender:nil]; 
```

但是，不要在每次应用程序激活时都显示启动画面。我曾经在我的应用程序的上下文中出于非常具体和有用的目的这样做 - 但 Apple 拒绝了它。嘿，他们甚至在星期六晚上打电话给我解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T19:09:52.983

虽然我同意这里所说的所有内容，但我也必须使用计时器实现一次启动画面，所以这里是代码：

```
- (void)showSplashWithDuration:(CGFloat)duration
{
    // add splash screen subview ...

    UIImage *image          = [UIImage imageNamed:@"Default.png"];
    UIImageView *splash     = [[UIImageView alloc] initWithImage:image];
    splash.frame            = self.window.bounds;
    splash.autoresizingMask = UIViewAutoresizingNone;
    [self.window addSubview:splash];

    // block thread, so splash will be displayed for duration ...

    CGFloat fade_duration = (duration >= 0.5f) ? 0.5f : 0.0f;
    [NSThread sleepForTimeInterval:duration - fade_duration];

    // animate fade out and remove splash from superview ...

    [UIView animateWithDuration:fade_duration animations:^ {
        splash.alpha = 0.0f;
    } completion:^ (BOOL finished) {
        [splash removeFromSuperview];
    }];
} 
```

只需在 AppDelegate`-applicationDidFinishLaunching:withOptions:`方法中的某处调用该函数

* * *

*@asgeo1：*代码对我来说很好用（我在几个项目中使用过类似的代码）。为方便起见，我在我的 Dropbox 上添加了一个[示例项目。](https://dl.dropboxusercontent.com/u/6487838/SplashExample.zip)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T18:49:41.303

不要这样做和/或在这里阅读为什么

[iOS 启动画面的持续时间 (Default.png)](https://stackoverflow.com/questions/10007835/ios-duration-of-splash-screen-default-png/10007939#10007939)

延长 Default.png 的持续时间确实没有意义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T02:18:02.290

现在，我完全同意上面的帖子，你不应该这样做，但如果你仍然愿意，可以通过将以下内容添加到你的`AppDelegate.m`.

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    sleep(2);
} 
```

“2”代表睡眠的秒数。它将接受像“.5”这样的值

# css - IE中的输入字段不垂直对齐

> ID：10094596
> 
> 赞同：4
> 
> 时间：2012-04-10T18:46:15.797
> 
> 标签：css, forms, internet-explorer

这个问题让我整个上午都发疯了。我一直在尝试让我的输入字段具有自定义背景，以便在 IE 中正确对齐。我读过其他问题，说 line-height 会解决它，但这并没有奏效。

它在 chorme/safari/etc 中看起来不错，但在 IE8 中，文本粘在输入区域的顶部。（堆栈不会让我发布图像）。我的 CSS 是：

```
#email {
background: url('BACKGROUND IMAGE') left top no-repeat;
background-size: 273px 38px;
width: 273px;
height: 38px;
line-height: 38px;
border: 0;
margin: 0 0 5px;
font: bold 12px arial, helvetica, sans-serif;
color: #777;
padding:0 8px;
outline: none;
float:left;
} 
```

和 HTML：

```
<input id="email" type="text" name="email" size="14" value="your email address" onfocus="if(this.value=='your email address') {this.style.color='#333'; this.value='';}" onblur="if(this.value== '') {this.style.color='#808080'; this.value='your email address';}" /> 
```

关于如何让我的输入文本在 IE 8 及更低版本中垂直居中的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:09:47.503

这应该很容易解决。line-height 属性很重要，但是当您使用速记字体属性时，它似乎在 IE8 中丢失了。尝试将 line-height 添加到速记字体属性，并删除您单独声明的 line-height。

```
#email {
background: url('BACKGROUND IMAGE') left top no-repeat;
background-size: 273px 38px;
width: 273px;
height: 38px;
border: 0;
margin: 0 0 5px;
font: bold 12px/38px arial, helvetica, sans-serif;
color: #777;
padding:0 8px;
outline: none;
float:left;
border:1px solid #999;
} 
```

这是一个**[jsFiddle 示例](http://jsfiddle.net/VykAc/1/)**（添加边框只是为了显示它是如何对齐的）。

# c++ - 我可以在 Visual Studio 11 下编译 Google 的 protobuf 吗？

> ID：10094599
> 
> 赞同：1
> 
> 时间：2012-04-10T18:46:26.673
> 
> 标签：c++, protocol-buffers, visual-studio-2012

Visual Studio 11 (beta) 使用新的 C++11 标准，这似乎破坏了 protobuf。我现在卡住的地方是 C++11 标准定义的方式`make_pair`。该问题[在此 StackOverflow 帖子中](https://stackoverflow.com/questions/9641960/c11-make-pair-with-specified-template-parameters-doesnt-compile)得到了很好的定义，并且由 Microsoft[设计](http://connect.microsoft.com/VisualStudio/feedback/details/691756/std-make-pair-error-in-vc11)定义。

我正在尝试使用包含 protobuf 的 Visual Studio 2011 Beta 编译一个“小而复杂”的项目。有没有办法让它与VS11（补丁，编译器设置，......）一起使用，还是我必须“降级”到VS2010？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:50:26.230

那是[问题 379](http://code.google.com/p/protobuf/issues/detail?id=379)。该报告建议在*command_line_interface.cc*中的两个问题位置`make_pair<string, string>`替换为解决方法。`pair<string, string>`

 *一个诱人的解决方案是完全删除模板参数，因为它们不是必需的。但是，这将导致[问题 166](http://code.google.com/p/protobuf/issues/detail?id=166)的回归，这促使添加模板参数以解决 Sun 编译器的问题。*

# ssl - Erlang Web 框架和 SSL？

> ID：10094601
> 
> 赞同：1
> 
> 时间：2012-04-10T18:46:37.640
> 
> 标签：ssl, frameworks, erlang

任何人都可以 1) 告诉我该怎么做，或者 2) 向我指出如何在 Erlang Web 框架中运行/启用/使用 SSL 的资源吗？我在任何文档或在线网络搜索中都找不到任何内容，而且看起来他们邮件列表的最后一篇帖子已经有几年了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:51:34.913

在 Erlang Web 应用程序中启用 SSL 的第一步是配置底层 Web 服务器。例如，如果您使用的是 Inets，则可以使用该文件：

```
config/inets_https.conf: 
```

一个示例配置文件（使用类似 Apache 的语法）如下所示：

```
ServerName erlangweb_https
ServerRoot docroot
DocumentRoot docroot
BindAddress 0.0.0.0 
Modules e_mod_inets
Port 443
SocketType ssl
SSLCertificateFile my.cert
SSLCertificateKeyFile my.key
SSLVerifyClient 0 
```

您还可以使用“erlang”语法对其进行配置：

```
[{inets, [...]}]. 
```

有关 Erlang Web 服务器配置文件的更多信息，请访问：

[http://wiki.erlang-web.org/Eptic/ServerConfiguration](http://wiki.erlang-web.org/Eptic/ServerConfiguration)

特别是对于 Inets：

[http://www.erlang.org/doc/man/httpd.html](http://www.erlang.org/doc/man/httpd.html)

设置好之后，您可以在应用程序控制器中将用户重定向到 HTTPS，如下所示（假设服务器使用默认端口）：

```
{redirect, "https://" ++ e_conf:host() ++ "/" ++ wpart:fget("__path")}. 
```

如果您的服务器未使用默认端口，则上述重定向变为：

```
{redirect, "https://" ++ e_conf:host() ++ ":" ++ e_conf:https_port()
            ++ "/" ++ wpart:fget("__path")}. 
```

有关 Erlang Web 中配置参数的更多信息：

[http://wiki.erlang-web.org/ProjectConf](http://wiki.erlang-web.org/ProjectConf)

为了减少冗长，你可能想看看[Erlang Web annotations](http://wiki.erlang-web.org/Annotations)。例如，您可以编写如下内容：

```
?BEFORE.
https(true, _Mod, _Fun, Args) ->
    case wpart:fget("__https") of
        false ->
            Host = e_conf:host(),
            Port = e_conf:https_port(),
            Path = wpart:fget("__path"),
            Redirect = "https://" ++ Host ++ ":" ++ Port  ++ "/" ++ Path,
            {skip, {redirect, Redirect}};
        true ->
            {proceed, Args}
    end. 
```

然后在您的控制器功能强制使用 HTTPS 之前使用它：

```
?HTTPS(true).
my_function(Args) ->
    .... 
```

# webserver - 如何在服务器之间复制符号链接？

> ID：10094604
> 
> 赞同：4
> 
> 时间：2012-04-10T18:46:58.833
> 
> 标签：webserver, symlink, file-transfer

我们正在移动网络服务器。（灯）

Webserver 1 有数百个符号链接指向不同目录中的文件（例如../../files/001.png）。当我们移动到新服务器时（已将站点下载到我的计算机，然后使用 SFTP 客户端传输重新上传到 Webserver 2）。它不会复制符号链接...

除了在新服务器上重新创建符号链接之外，还有更好的方法来获取从一台服务器到另一台服务器的符号链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:55:11.357

`rsync -a`从一台服务器到另一台服务器将保留文件属性和符号链接。

```
rsync -av user@server:/path/to/source user@server2:/path/to/target 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T18:54:57.700

像下面这样的东西？在网络服务器 1 上：

```
tar czf - the_directory | (ssh Webserver2 "cd /path/to/wherever && tar xzf -") 
```

这会创建要复制到 STDOUT 的内容的 tar，并通过 ssh 将其通过管道传输到另一台服务器上的 untar。它也可以比递归 ssh 副本更快。

# html - django 表在最后一行被截断一半

> ID：10094606
> 
> 赞同：1
> 
> 时间：2012-04-10T18:47:04.133
> 
> 标签：html, django, templates, html-table

我创建了一个行列表，列表（行）中的每个项目都包含我视图中的单个单元格列表，并将其传递给模板并使用此代码构建我的表

```
 <table style="border: 1px solid black">
        <thead>
        <tr>
        {% for th_ in htl %}
           <th style="border: 1px solid black"> {{th_|safe}} </th>
        {%endfor%}
        </tr>
        </thead>

        <tbody>
        {% for tl_ in mylist %}
            <tr>
            {% for td_ in tl_ %}
                <td style="border: 1px solid black"> {{td_|safe}} </td>
            {%endfor%}
            </tr>
        {% endfor %}
        </tbody>

        </table> 
```

问题是最后一行在任意列被剪切，并且没有为该行的其余部分生成 html，并且表格没有显示所有数据。如果我在同一个表中添加的行比最后一行多几行（不是从末尾算起的第 5 行正确显示，但最后一行被截断。任何想法为什么会发生这种奇怪的行为？

# android - android快速获取所有用户的好友头像

> ID：10094609
> 
> 赞同：2
> 
> 时间：2012-04-10T18:47:11.703
> 
> 标签：android, facebook, facebook-graph-api

我正在寻找一种快速获取我所有朋友的个人资料照片的方法。我正在使用适用于 Android 的 Facebook SDK。

现在我正在获取我朋友的列表 JSON 对象并在该对象内使用 for 循环运行。在循环中，我将每个图像放在来自以下地址的 Drawable 对象中： http: [//graph.facebook.com/uid/picture](http://graph.facebook.com/uid/picture)。

我已经看到每张图片的重量只有 4K，而且对于少数朋友来说速度很快。但是，如果我有 1000 个朋友，并且我正在为每个人连接到 facebook 怎么办？这需要很多时间。

我在其他应用程序中看到，其中一些会快速显示您所有的朋友。

最好的方法是什么？使用跑步者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:44:06.677

如果每张图片是 4K 并且您有 1000 个朋友，那大约是 4MB 的数据。下载它需要时间。如果你需要他们所有的照片，就没有办法了。

也就是说，您应该考虑是否真的需要他们所有的照片。绝大多数应用都会使用好友的头像来展示给用户。按理说，界面不会同时显示1000个好友。在这种情况下，一个好的解决方案可能是延迟加载图像，即在为每个朋友解析 JSON 时存储图像的 URL，但在需要它们之前不要下载实际图像。如果说您的界面一次显示 10 个朋友，那么这只是 40K 的图像，这要合理得多。

您可以在 StackOverflow 中搜索 android 延迟加载列表图像，但这里有一个可能有用的特定线程：[在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)。

# java - 将 Spring 应用程序部署到 JBoss 时出错 - NoSuchMethodError

> ID：10094611
> 
> 赞同：1
> 
> 时间：2012-04-10T18:47:17.717
> 
> 标签：java, spring, maven, dependencies

我创建了一个 Spring webapp，该应用程序在 tomcat 和 CloudFoundry 上运行，但尝试在 JBoss（OpenShift express）上启动应用程序时出现错误。

开始时出现以下错误：

```
2012/04/10 11:11:58,967 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-1) Context initialization failed: org.springframework.beans.BeanInstantiationException: 
Could not instantiate bean class [org.springframework.web.context.support.XmlWebApplicationContext]: Constructor threw exception; nested exception is java.lang.NoSuchMethodError: 
org.springframework.core.convert.converter.ConverterRegistry.addConverter(Ljava/lang/Class;Ljava/lang/Class;Lorg/springframework/core/convert/converter/Converter;)V
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at java.lang.Thread.run(Thread.java:679) [rt.jar:1.6.0_22]
Caused by: java.lang.NoSuchMethodError: org.springframework.core.convert.converter.ConverterRegistry.addConverter(Ljava/lang/Class;Ljava/lang/Class;Lorg/springframework/core/convert/converter/Converter;)V
        at org.springframework.core.convert.support.DefaultConversionService.addScalarConverters(DefaultConversionService.java:62) [org.springframework.core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.core.convert.support.DefaultConversionService.addDefaultConverters(DefaultConversionService.java:53) [org.springframework.core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.core.convert.support.DefaultConversionService.<init>(DefaultConversionService.java:42) [org.springframework.core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
... 12 more 
```

我认为这是一个 JAR 冲突/重复，并去检查 maven 设置是否存在依赖冲突，但是，在检查了 Eclipse Maven 依赖层次结构中的传递依赖之后，我明确排除了除 3.1.1 之外的所有版本（有问题的这个类是我相信是在 v3.0 中引入的）-`Spring-core`和`org.springframework.core`）

有人知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:25:13.550

好的，我发现了这个问题。

在 Eclipse 中使用 M2Eclipse Maven 插件，我排除了`spring-core`依赖项（这已将库从它是传递依赖项的每个依赖项中排除），我认为这没问题，因为我使用的是`org.springframework.core`库。

但是，它看起来只是将它们排除在第一级传递依赖项之外，并且在我构建的 WAR 文件中，它仍在下拉`spring-core.3.0.3`（我之前没有这样做，因为我正在部署到 Redhat 的 OpenShift 平台，这需要一些工作设置好东西，这样我就可以 scp 到服务器来构建战争）

我现在已经通过明确声明对所有其他人的依赖`spring-core.3.1.1`并排除所有其他人来解决这个问题，以确保最新的被拉下来。

我想道德是不要相信 M2Eclipse 插件中的“已解决的依赖项”视图来查看正在使用的库。

# jsf - 仅在第二次单击时调用操作

> ID：10094615
> 
> 赞同：13
> 
> 时间：2012-04-10T18:47:37.320
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我想在单击按钮时提交数据表，但在第一次单击时不会调用该操作。这是我的代码：

```
<h:panelGrid id="addToThisDepartmentPanel">
    <h:outputText value="#{messageDataBean.message}" rendered="#{messageDataBean.isSuccess eq false}" style="color:red" id="addToThisDepartmentMessage"/>
    <h:form>
        <h:dataTable value="#{systemResultViewUtil.systemUserDetailDataBeansList}" var="departmentdetail" id="addToThisDepartmentDataTable" rendered="#{systemResultViewUtil.systemUserDetailDataBeansList.size() gt 0}">
            <h:column>
               <f:facet name="header">
                   Name
               </f:facet>
               <h:outputText value="#{departmentdetail.name}" style="text-align: left;padding-right: 120px" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    Current Department
                </f:facet>
                <h:outputText value="#{departmentdetail.depName}" style="text-align: left;padding-right: 120px" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    Add To This
                </f:facet>
                <h:selectBooleanCheckbox value="#{departmentdetail.cheked}" style="text-align: left;padding-right: 120px"/>
            </h:column>
         </h:dataTable>

         <a4j:commandButton oncomplete="if(#{messageDataBean.isSuccess eq true}){ closeAddToThisDepartmentDialog()}" value="Add TO This Department" action="#{departmentServiceBean.addEmployeeToThisDepartment}" id="addToThisDepartmentButton"
                                                       render=":addToThisDepartmentMessage :message" execute=":addToThisDepartmentDataTable" />
     </h:form>
</h:panelGrid> 
```

问题是第二次点击我的`<a4j:commandButton>`动作被调用。但它不会在第一次点击时被调用。
有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-10T19:30:58.053

此问题称为[JSF 规范问题 790](https://github.com/javaee/javaserverfaces-spec/issues/790)。如果您 ajax-render 一些内容又包含 a `<h:form>`，那么它的视图状态将丢失，这导致该表单内的第一个操作不会调用任何内容。在第一个动作的 ajax 响应中，表单将获得新的视图状态，因此任何后续动作都会成功。

这计划在即将到来的 JSF 2.2 中修复。但是现在使用 JSF 2.0/2.1，您必须引入一种解决方法。您首先需要提供`<h:form>`一个固定 ID，`yourFormId`如下例所示：

```
<h:panelGrid id="addToThisDepartmentPanel">
    ...
    <h:form id="yourFormId">
        ... 
```

然后您还需要在`render`属性中引用它：

```
<f:ajax ... render=":addToThisDepartmentPanel :yourFormId" /> 
```

同样的故事也适用于`<a4j:xxx>`组件。

```
<a4j:commandButton ... render=":addToThisDepartmentPanel :yourFormId" /> 
```

### 也可以看看：

*   [h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click/)
*   [JSF 2.0 中的通信 - 包含另一种表单的内容的 Ajax 呈现](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)

# javascript - 删除对象键和值中的前导和尾随空格

> ID：10094617
> 
> 赞同：3
> 
> 时间：2012-04-10T18:47:48.827
> 
> 标签：javascript, jquery

使用以下功能：

```
// remove multiple, leading or trailing spaces
function trim(s) {
    s = s.replace(/(^\s*)|(\s*$)/gi,"");
    s = s.replace(/[ ]{2,}/gi," ");
    s = s.replace(/\n /,"\n");
    return s;
} 
```

删除值中的前导和尾随空格不是问题。我知道你不能重命名键，但我很难实现我想要的输出。

```
$.each(data, function(index)
    {
        $.each(this, function(k, v)
        {
            data[index][trim(k)] = trim(v);
            data.splice(index, 1);
        });
    }); 
```

这没有达到预期的输出。

有任何想法吗？最好创建一个新对象然后销毁原始对象吗？该语法会是什么样子？

数据示例：

```
var data = [{
    "Country": "Spain",
    "info info1": 0.329235716,
    "info info2": 0.447683684,
    "info info3": 0.447683747},
{
    " Country ": " Chile ",
    "info info1": 1.302673893,
    "info info2 ": 1.357820775,
    "info info3": 1.35626442},
{
    "Country": "USA",
    "info info1  ": 7.78805016,
    "info info2": 26.59681951,
    "info info3": 9.200900779}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:17:12.973

```
$.each(data, function(index) {
    var that = this;
    $.each(that, function(key, value) {
        var newKey = $.trim(key);

        if (typeof value === 'string')
        {
            that[newKey] = $.trim(value);
        }

        if (newKey !== key) {
            delete that[key];
        }
    });
}); 
```

演示：http: [//jsfiddle.net/mattball/ZLcGg/](http://jsfiddle.net/mattball/ZLcGg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T19:40:13.397

也许我迟到了这个讨论，但我想从这个链接分享这个问题和答案。该解决方案不仅处理上面介绍的这个对象，还递归地修剪 JavaScript 对象中的键和值（字符串类型）。

希望这会有所帮助。

[递归修剪对象键和值中的空格](https://stackoverflow.com/questions/33510625/trim-white-spaces-in-both-object-key-and-value-recursively/33511005?noredirect=1#comment54806888_33511005)

# javascript - 如何获取一段 html 内容中图像的加载事件？

> ID：10094619
> 
> 赞同：0
> 
> 时间：2012-04-10T18:47:54.810
> 
> 标签：javascript, jquery, image, loading

我有不同的 html 内容，每个都有一些图像。如果 html 中有任何图像，当我在灯箱 div 中显示 html 内容时会加载它们。

我的问题是，当 div 中的所有图像都已为任何 html 内容加载时，我想执行一些操作。我怎样才能在 Javascript/JQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:47:33.173

您可以计算已加载的图像数量，然后在它们全部加载后运行您的布局代码。像这样的东西：

```
var $div = $(...); // this should select the div containing the images in question
var $images = $div.find('img');
var count = 0;
$images.each(function() {
    $(this).load(function() {
         if (++count == $images.size()) {
             // your layout code goes here
         }
    }
} 
```

# javascript - ECMAScript 5 在任何浏览器中都可用吗？

> ID：10094621
> 
> 赞同：6
> 
> 时间：2012-04-10T18:48:05.977
> 
> 标签：javascript, ecmascript-5

我想尝试一些新的 ECMAScript 5 功能。我想做一些类似于我在谷歌搜索时发现的一些代码的东西：

```
var obj = {};
Object.defineProperty( obj, "value", {
  value: true,
  writable: false,
  enumerable: true,
  configurable: true
});

(function(){
  var name = "John";

  Object.defineProperty( obj, "name", {
    get: function(){ return name; },
    set: function(value){ name = value; }
  });
})();

print( obj.value )
// true

print( obj.name );
// John

obj.name = "Ted";
print( obj.name );
// Ted 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T18:51:24.010

这是一个很好的兼容性表： http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

为了完整起见，还提供了[ECMA6](http://kangax.github.com/es5-compat-table/es6/)和[非标准](http://kangax.github.com/es5-compat-table/non-standard/)功能的表格。

# java - 2 非法注释异常计数

> ID：10094622
> 
> 赞同：10
> 
> 时间：2012-04-10T18:48:08.423
> 
> 标签：java, xml, jaxb

我有一个 Customer 和 CustomerFullAddress 类，我正在使用 JAXB 尝试生成 XML 文件

```
<Customer CustomerID="GREAL">
    <CompanyName>Great Lakes Food Market</CompanyName>
    <ContactName>Howard Snyder</ContactName>
    <ContactTitle>Marketing Manager</ContactTitle>
    <Phone>(503) 555-7555</Phone>
    <FullAddress>
        <Address>2732 Baker Blvd.</Address>
        <City>Eugene</City>
        <Region>OR</Region>
        <PostalCode>97403</PostalCode>
        <Country>USA</Country>
    </FullAddress>
</Customer> 
```

客户类如下所示（它不是一个完整的实现）

```
package org.abc.customers;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "customer")
@XmlType (propOrder = { "companyName", "contactName", "contactTitle", "phone" })

public class Customer {

*@XmlElement(name = "customerfulladdress")
private CustomerFullAddress custAdd;*

private String companyName;
private String contactName;
private String contactTitle;
private int phone;

public CustomerFullAddress getCustAddress() {
return custAdd;
}

public void setCustAddress(CustomerFullAddress custAdd) {
this.custAdd = custAdd;
}
... 
```

而 CustomerFullAddress 是

```
package org.abc.customers;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "customerfulladdress")
//If you want you can define the order in which the fields are written
//Optional
@XmlType(propOrder = { "address", "city", "region", "postalCode", "country" })

public class CustomerFullAddress {

private String address;
...

public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
.....
 } 
```

错误是

> 线程“主”com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException 中的异常：2 计数 IllegalAnnotationExceptions 属性 custAdd 存在但未在 @XmlType.propOrder 中指定此问题与以下位置有关：在私有组织.abc.customers.CustomerFullAddress org.abc.customers.Customer.custAdd at org.abc.customers.Customer 属性 custAddress 存在但未在 @XmlType.propOrder 中指定此问题与以下位置有关：在公共 org.abc。 customers.CustomerFullAddress org.abc.customers.Customer.getCustAddress() 在 org.abc.customers.Customer

感谢您的关注！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T18:59:08.570

来自[@XmlType](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlType.html)的 JavaDoc ：

> **道具订单**
> 
> 必须列出映射到 XML Schema 元素的所有 JavaBean 属性。

您需要将该`CustomerFullAddress`属性添加到`propOrder`for `Customer`。

# silverlight - silverlight 将项目放入列表框并仅查看该对象的某些部分

> ID：10094628
> 
> 赞同：0
> 
> 时间：2012-04-10T18:48:43.733
> 
> 标签：silverlight

我们正在和我的朋友一起做一个项目，我们遇到了一些问题，我希望你能帮助我们。问题是我们正在从我们编写的服务中获取对象，我们想将对象放入列表框，但在界面中我们只想看到该对象的少数项目。为了使情况更清楚，假设我们有对象 a 包括 {name surname id} 我们想将此对象放入列表框，但我们希望在界面中只看到姓名和姓氏。提前致谢 。

可以ELDEM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:56:29.057

您需要查看带有 ListBox 的 Silverlight 数据绑定示例，例如：[http ://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-5-using-the-listbox-and-databinding-显示列表数据.aspx](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-5-using-the-listbox-and-databinding-to-display-list-data.aspx)

基本上，您使用所需的元素和样式定义 ListBox，然后对要显示的每个属性使用数据绑定：名称、姓氏、id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:02:40.143

使用 Silverlight 5，您还可以使用**Implicit DataTemplate**，它允许模板根据其类型自动应用于数据绑定项。

# graphics - 4x4矩阵最后一个元素的意义？

> ID：10094634
> 
> 赞同：2
> 
> 时间：2012-04-10T18:48:59.347
> 
> 标签：graphics, matrix, 3d, direct3d

我希望在 4x4 矩阵上搭载浮点值，我正在传输。所讨论的矩阵用于各种 xyz 矢量变换。据我了解，矩阵的前 3x3 有助于旋转和缩放变换，前 3 行的第 4 个值偏移变换的枢轴，底行的前 3 个元素执行位置偏移，但最后一个是什么元素呢？据我所见，它始终为 1 并且绝对什么都不做，我好好利用它有什么害处吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T22:00:46.907

如果（正如您的问题所暗示的那样）约定是点是列向量，并且前 3 行的最后一个元素确定了平移，那么底行的前 3 个元素*不是*位置偏移：转换的第 4 行矩阵用于透视投影，这是相机将 3D 点映射到 2D 视口的方式。4x4 矩阵如何用于映射点的草图：

```
result   =       4x4 matrix      *  point

[ x' ]       [ Rxx Rxy Rxz Tx ]     [ x ]
[    ]       [                ]     [   ]     ->    R** is the rotation/scaling matrix
[ y' ]       [ Ryx Ryy Ryz Ty ]     [ y ]
[    ]   =   [                ]  *  [   ]           T* is the translation vector
[ z' ]       [ Rzx Rzy Rzz Tz ]     [ z ]
[    ]       [                ]     [   ]           P* fixes the camera projection plane
[ w' ]       [ Px  Py  Pz  Pw ]     [ w ]

-> x' = dot_product3([Rxx,Rxy,Rxz], [x,y,z])  + Tx * w
-> y' = dot_product3([Ryx,Ryy,Ryz], [x,y,z])  + Ty * w
-> z' = dot_product3([Rzx,Rzy,Rzz], [x,y,z])  + Tz * w
-> w' = dot_product4([Px,Py,Pz,Pw], [x,y,z,w]) 
```

3D 点 -> 2D 屏幕映射的最后一步是除以第 4 个 ( `w'`) 坐标 - 因此，对于标准几何变换，最后一行通常应该是`[0,0,0,1]`，这使`w`坐标保持不变。

如果底行的前 3 个元素不是`0`，则矩阵通常会生成 3D 空间的奇怪的、不均匀的失真。而且，虽然可以将最后一个元素用作统一的逆缩放因子，但最好使用左上角的 3x3 子矩阵进行缩放，并将底行专门留给相机。

# bash - 从外部文件bash访问函数

> ID：10094636
> 
> 赞同：1
> 
> 时间：2012-04-10T18:49:11.520
> 
> 标签：bash, bash-function

这真的很简单，但由于我仍然是 shell 脚本的新手，我无法做到这一点。这很简单，我有一个菜单驱动的脚本，当用户输入他的选择时，我会在 case 函数中循环并执行选定的菜单。到目前为止，我正在用同一个脚本编写整个代码。现在我将代码放在外部脚本中的每个菜单选项中，并从那里访问代码。所以它是这样的，

```
#!/bin/bash
. course_func
file=names.dat
[ ! -f $file ] && > $file
while true
do
clear
echo ------------------------------------------
echo 1\. Create a record
echo 2\. View Records
echo 3\. Search for records
echo 4\. Delete records that match a pattern
echo ------------------------------------------
echo "Please enter your choice or enter (q) to quit: \c ";read choice
case $choice in
    1)
    create()
    echo Enter to continue; read junk
    ;;
        *)
    clear
    echo Wat nonsense enter properly
    echo Enter to continue: ;read crap
    ;;
esac
done 
```

然后我创建了另一个外部脚本，我在其中编写了 create() 函数

代码在链接中，

```
create()
{
  while true
  do
        echo Please enter the name: ;read name
        echo Please enter your surname: ;read surname
        echo Please enter the address: ;read add
        echo Please enter the cell no.: ;read cell
        if yesno Do you really wish to save the following data to file
        then
        echo $name:$surname:$add:$cell >> $file
        clear
        echo The record has been inserted :D
        else 
        echo The record was not save
        fi
        if yesno Do you wish to enter another record
        then
        :
        else
        xit
        fi
  done
}

addRecord()
{

}

search()
{

}

delRecord()
{

} 
```

但我得到一个错误，

```
course_func: line 31: syntax error near unexpected token `}'
course_func: line 31: `}'
menu_driven: line 18: syntax error near unexpected token `echo'
menu_driven: line 18: ` echo Enter to continue; read junk' 
```

第 31 行是我在其余情况下结束 addRecord 函数的地方，它是空函数。我们不能在 bash 中有一个空函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:58:05.297

> 函数不能为空！

--[高级 Bash 脚本指南：第 24 章。函数](http://tldp.org/LDP/abs/html/functions.html)

相反，请尝试：

```
addRecord()
{
    return
} 
```

# joomla - 在 default.php 文件中获取模块 ID

> ID：10094646
> 
> 赞同：0
> 
> 时间：2012-04-10T18:50:16.763
> 
> 标签：joomla, module, joomla1.5

嘿伙计们，进展如何！

我正在尝试检查 default.php 文件中正在运行的模块 ID。我需要获取模块 ID 并从那里开始。我已经读过 $module->id 应该将该数字存储在该文件中，但我不知道为什么当我访问它时它不打印任何内容。

我还可以做些什么？我有什么办法可以解决我的问题吗？我正在处理 Joomla 1.5.3 真的真的需要尽快完成这项工作，请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:17:58.470

这是访问模块 ID 和有关模块的其他有用信息的类和方法：

[http://docs.joomla.org/JModuleHelper/getModule](http://docs.joomla.org/JModuleHelper/getModule)

# jquery - jQuery中带有复选框的自定义多选工具

> ID：10094647
> 
> 赞同：1
> 
> 时间：2012-04-10T18:50:18.737
> 
> 标签：jquery, asp.net-mvc, multi-select

我需要使用 jquery 构建一个自定义多选框，该框将在 .NET 的 MVC 应用程序中使用。

唯一的要求是能够使用某种命名约定扩展现有的下拉输入（多选）框，并写出复选框列表。数据源是我们可以使用模型绑定的对象的通用列表。

这是一个例子：

![在此处输入图像描述](../Images/50fda0959375bb2efd2dae03e653a93e.png)

我的问题是关于这个的最佳方法。如果有一个好的解决方案，我不想重新发明轮子。我找不到一个。如果我必须从头开始构建，我最初的想法是在要扩展的现有下拉输入下方直接放置一个充满复选框的 DIV。定位将是该解决方案的“有趣”部分。

其他人能否提供替代的实现想法、适合我需要的现有控件或我可以查看的类似功能的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:45:03.840

这看起来正是您正在搜索的内容：[http ://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

# javascript - 以窗口为中心的图像

> ID：10094649
> 
> 赞同：0
> 
> 时间：2012-04-10T18:50:20.477
> 
> 标签：javascript, jquery, html, css

我的旧问题的一些进展（[中心和隐藏图像，适合 div 大小](https://stackoverflow.com/questions/10093002/center-and-hide-image-fitting-div-size)）

```
#slideshow {
    height: 550px;
    width: 1400px;
    overflow: hidden;
}
.slide {
    // NEED TO BE ABSOLUTE POSITIONED. If I comment the line, all work as expected, but slideshow don´t slide.
    position: absolute;
}
.slide img {
    height: 550px;
    left: 50% !important;
    margin-left: -700px;
    position: absolute;
}

<div id="slideshow">
    <div class="slide"><img src="http://di20studios.com/2012/royalpack/images/banners/af_banner_rp_01.jpg" /></div>
    <div class="slide"><img src="http://di20studios.com/2012/royalpack/images/banners/af_banner_rp_01.jpg" /></div>
    <div class="slide"><img src="http://di20studios.com/2012/royalpack/images/banners/af_banner_rp_01.jpg" /></div>
    <div class="slide"><img src="http://di20studios.com/2012/royalpack/images/banners/af_banner_rp_01.jpg" /></div>
</div> 
```

我期待什么？期望图像以窗口为中心。如果分辨率小于图像，图像的左右两侧将被隐藏。

![在此处输入图像描述](../Images/69027ec0b5b893b8bd5ea54ee68f85ed.png)

对不起我的英语，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:10:07.837

这可以使用简单的 hack 来实现。您可以将 div 与 1px 宽度的页面中心对齐，然后将图像放入该 div。然后将该图像的左边距设置为图像宽度的一半。

请参阅此[示例](http://jsfiddle.net/jackdent/zT3PN/)（我将中央 div 的背景颜色保留为红色，以便您看到）

# php - 如何将白名单应用于具有下拉菜单的输入

> ID：10094650
> 
> 赞同：0
> 
> 时间：2012-04-10T18:50:26.687
> 
> 标签：php, sanitization, whitelist

如何在下拉菜单上使用消毒？

我知道如何使用普通用户输入进行消毒，如下所示：

```
$variable_name = preg_replace( "/[^a-zA-Z0-9_]/", "", $_POST['key'] ); 
```

但是我怎样才能为下拉菜单制作这样的东西——比如水果列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:52:12.030

最好的做法是将可能的选择放在一个数组中，在生成表单元素时对其进行迭代，并使用[`in_array()`](http://php.net/manual/en/function.in-array.php)它来验证它。

# c# - Facebook C# SDK 获取当前用户

> ID：10094652
> 
> 赞同：2
> 
> 时间：2012-04-10T18:50:36.033
> 
> 标签：c#, facebook, asp.net-mvc-3, facebook-c#-sdk

我正在开发 Facebook 应用程序。不是网站。

我正在尝试使用 Facebook C# SDK 并尝试获取当前用户并查询当前用户信息。我怎么做？

另外，当我尝试使用一个应用程序时，它要求添加应用程序，请求访问数据的权限，我该怎么做呢？

有没有这些事情的综合例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T15:55:16.230

如果您坚持使用 .NET 3.5，这将起作用：

```
var facebookClient = new FacebookClient(FacebookAccessToken);
var me = facebookClient.Get("me") as JsonObject;
var uid = me["id"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:24:12.193

您需要访问令牌。获得访问令牌后，请求`me`

```
var fb = new FacebookClient("access_token");
dynamic result = fb.Get("me", new [] { fields = "id" });
var userId = result.id; 
```

# c# - Silverlight 图表，在运行时更改绑定属性？

> ID：10094656
> 
> 赞同：0
> 
> 时间：2012-04-10T18:50:52.383
> 
> 标签：c#, wpf, silverlight

首先关闭示例代码，我有一个像这样的类

```
Public class SomeClass
{
  Public int indexNum {get;set;}
  Public int value1 {get;set;}
  Public int value2 {get;set;}

  Public SomeClass(){}
} 
```

我创建一个列表并填写它。

```
List<SomeClass> AList = new List<SomeClass>();

for(int i =0; i < 5; i++)
{
  AList.Add(new SomeClass()
      {
        indexNum = i,
        Value1 = i * 5,
        Value2 = i * 2
      });
}

MyChart.DataContext = AList; 
```

和图表中的绑定就像这样

```
DependentValueBinding="{Binding Value1}" IndependentValueBinding="{Binding indexNum}" 
```

现在在页面顶部会有一个按钮。当我按下按钮时，我希望 DependentValueBinding 从 Value1 切换到 Value2。这一切都可以在 xaml 代码中完成，还是我必须在后面的代码中创建所有绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:42:25.560

我找不到如何在 xaml 中执行所有这些操作，但在其背后的代码中就像这样简单

```
((ColumnSeries)MyChart.Series[0]).DependentValueBinding = 
   new System.Windows.Data.Binding("Value2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:00:27.877

您可以使用[XamlWriter.Save](http://msdn.microsoft.com/en-us/library/ms590450.aspx)方法来序列化对象。

您可以使用[XamlReader.Load](http://msdn.microsoft.com/en-us/library/ms590388.aspx)方法反序列化 XAML 字符串。

# html - Flex，使用 navigateToURL 发送 AMF 对象并在新窗口中打开响应

> ID：10094660
> 
> 赞同：0
> 
> 时间：2012-04-10T18:51:00.203
> 
> 标签：html, apache-flex, amf

我有一个专门连接到 AMF 网关的应用程序（在某种模式下），我有一个服务可以呈现一些我想在 Flex 应用程序之外的新窗口中显示的 HTML。

是否可以在 Flex 中使用 navigateToURL 发送 AMF 对象并在新窗口中打开响应？

编辑：更具体地说，是否有人深入了解如何在 actionscript 中正确构建 AMF 请求并通过 URLRequest 的 POST 数据发送？

更新：仍在寻找 AMF 的明确规范，以明确如何在 AMF 中构造与服务调用相关的标头以及需要哪些标头。这方面的一些指导会有所帮助。我做了更多的阅读，并且看到一些人谈论他们拥有的一些自定义解决方案，这些解决方案的工作方式与我上面提到的类似，尽管这些解决方案似乎是受保护的资产。但这进一步强化了我的信念，即这是完全可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:10:45.547

我会说不...即使您可以在 AS3 中手动创建 AMF 数据包，您将如何使用 navigateToURL 将其传递给 URL？浏览器如何知道如何处理从服务调用返回的 AMF 值？

我建议你在你的 Flash 应用中调用 AMF 网关服务；做需要做的处理；然后返回结果的 URL。在结果处理程序方法中，您可以使用 navigateToURL 打开 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T01:46:57.410

@Flextras 是正确的——AMF 网关，特别是 AMFPHP 不与 URLRequest 一起使用，而是使用 RPC 远程处理——最典型的是 RemoteObject，你指定接收网关（即：端点或更一般地目标通道——但是这个需要位于服务器上的服务配置中），并且您通常会分配一个响应者来处理结果/失败事件（其中您的响应几乎总是一个标记为 [RemoteAlias] 的类）。

请参阅：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/remoting/mxml/RemoteObject.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/remoting/mxml/RemoteObject.html#includeExamplesSummary)

# php - 使用 PHP 插入 MySQL 数据库时排除空记录

> ID：10094665
> 
> 赞同：0
> 
> 时间：2012-04-10T18:51:15.710
> 
> 标签：php, mysql

我有一个页面，其中包含允许用户在数据库中输入最多 10 条记录。我遇到的问题是，在许多（大多数）情况下，用户只会输入一两条记录，但数据库插入正在处理所有空白记录并插入它们。我已将数据库配置为不接受 NULL 值，但我怀疑空白值并不完全等同于 NULL，这就是仍在插入记录的原因。我该如何编码，以便不会将空白记录插入到数据库中。

当前插入代码：

```
 <?php
if (isset($_POST['submit'])) {  

for($i = 0; $i < 10; $i++)
{

$indtypeid = $_POST['indtype'][$i];
$indicator = $_POST['indicator'][$i];
$actorid = $_POST['actor'][$i];
$reportid = $_POST['report'][$i];

print 'Row ' . $i . ': '  . $indtypeid . '-' . $indicator . '-' . $actorid . '<br/>';

$qry_digestreport = "INSERT INTO indicator (indtypeid,indicator,actorid,reportid) VALUES ('$indtypeid', '$indicator', '$actorid', '$reportid')";

if (!mysql_query($qry_digestreport,$connection))
  {
  die('Error: ' . mysql_error());
  }
echo "<br/>Records added!<br/>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:53:30.983

一个简单的`if()`检查就可以了：

```
if (empty($indtypeid) || empty($indicator) || ....) {
   continue; // jump to next loop iteration
} 
```

在你的`$_POST`任务之后。

请注意，您的代码完全容易受到 SQL 注入攻击，因此您可能需要在[http://bobby-tables.com上阅读一些相关信息](http://bobby-tables.com)

# wix - 从 TempFolder 运行 WiX EXE CustomAction

> ID：10094668
> 
> 赞同：4
> 
> 时间：2012-04-10T18:51:25.563
> 
> 标签：wix, custom-action, wix3.5

我正在使用 WiX 3.5 进行以下操作。

我有一些文件（EXE 和 DLL）需要在安装开始时（在显示 EULA 之前）解压缩到 TEMP 文件夹，然后运行 ​​EXE。我使用[http://msiext.codeplex.com/](http://msiext.codeplex.com/)提取文件的部分工作。代码如下所示：

```
<CustomAction Id="SetBinaryWrite_TargetFileName_1" Property="BINARYWRITE_TARGETFILENAME" Value="[TempFolder]ActivationUtility.exe" /> 
```

请注意，使用了 [TempFolder] 并且（在 Windows 7 上）解析为“C:\Users\USERNAME\AppData\Local\Temp\”，这不是在我的 WXS 文件中的任何地方“设置”的 - 它是 Windows 属性，像 ProgramFilesFolder 等...

我像这样设置我的 EXE CustomAction：

```
<CustomAction Id="ActivationUtility"
                  Directory="TempFolder"
                  ExeCommand="ActivationUtility.exe"
                  Execute="immediate" Return="check" /> 
```

链接器然后抱怨：错误 LGHT0094：未解决对符号“Directory:TempFolder”的引用。如果我使用“[TempFolder]”，编译器会抱怨。为什么此属性对一个 CustomAction 有效，而对另一个无效？我究竟需要做什么才能为上述 CustomAction 引用 TempFolder？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:50:20.643

以下代码为我编译（现在无法测试）

在你的根目录下添加这个

```
<Directory Id="TempTest" FileSource="[TempFolder]"></Directory> 
```

并像这样声明自定义操作

```
<CustomAction Id="ActivationUtility"
              Directory="TempTest"
              ExeCommand="ActivationUtility.exe"
              Execute="immediate" Return="check" /> 
```

您当然可以更改文件夹的 ID

# iphone - 指南针校准设置阻止的 iPhone 运动数据

> ID：10094670
> 
> 赞同：2
> 
> 时间：2012-04-10T18:51:35.150
> 
> 标签：iphone, ios, magnetometer, cmmotionmanager

我的应用程序有一个增强现实相机视图，它使用 CMMotionManager 来查找相对于真北的航向。但是，我发现如果用户关闭位置服务/系统设置/指南针校准，则设备运动数据将停止返回合理值（特别是重力矢量值），并使应用程序无用。很多人这样做是因为他们认为这样做可以节省电池寿命。

有谁知道这个设置对设备或 CMMotionManager 有什么作用？

我的应用程序如何确定它的设置？

将其设置为 OFF 是否一定意味着 CMMotionManager 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:59:30.260

您可以在标题委托中检查您的真实标题值。如果设备校准在设置中为“关闭”，则该值将是静态的并且每次都等于“-1”。所以你可以检查标题委托 if (new.heading == -1) { //Calibration in setting is Off } else { //Calibration is On }

希望这项工作。因为它对我有用。

感谢和问候阿布舍克·戈亚尔

# asp.net-mvc-3 - 带有自定义基本控制器的 MVC 控制器注入不起作用

> ID：10094673
> 
> 赞同：0
> 
> 时间：2012-04-10T18:51:55.010
> 
> 标签：asp.net-mvc-3, structuremap

我正在为 DI 使用 StructureMap，并且我的 MVC3 自定义基本控制器没有正确实例化。我没有被传递一个 IAuctionCmsServices 的实例，而是得到了 null。

我的控制器：

```
public class BaseController : Controller
{
    public IAuctionCmsServices AuctionCmsServices;

    public BaseController()
        : this(null)        <--- is this the problem?
    {

    }

    public BaseController(IAuctionCmsServices auctionCmsServices)
    {
        this.AuctionCmsServices = auctionCmsServices;
    }
}

public class HomeController : BaseController
{
    public ActionResult Index()
    {
        return View);
    }
} 
```

结构图代码：

```
public class StructureMapContainer : IDependencyResolver
{
    static IContainer _container;

    public StructureMapContainer(IContainer container)
    {
        _container = container;
    }

    public object GetService(Type serviceType)
    {
        if (serviceType.IsAbstract || serviceType.IsInterface)
        {
            return _container.TryGetInstance(serviceType);
        }
        else
        {
            System.Diagnostics.Debug.WriteLine(_container.WhatDoIHave());
            return _container.GetInstance(serviceType);
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.GetAllInstances<object>().Where(s => s.GetType() == serviceType);
    }
}

public class ApplicationRegistry : Registry
{
    public ApplicationRegistry()
    {
        For<IAuctionCmsServices>().HybridHttpOrThreadLocalScoped().Use<AuctionCmsServices>();
    }
} 
```

在 global.asax.cs 中：

```
DependencyResolver.SetResolver(new StructureMapContainer(container)); 
```

调用 BaseController 的构造函数时，IAuctionCmsServices 参数为空。如果我从构造函数中删除 this(null)，我仍然会得到 null。

也许我的 BaseController 的无参数构造函数没有正确编写？如果我手动解析 IAuctionCmsServices，它会起作用。这意味着 IAuctionCmsServices 已正确注册但未被注入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:38:43.850

您是从示例中遗漏了构造函数 HomeController 还是没有？

我对 StructureMap 不是很熟悉，所以除非它对 IL 做了一些魔法，否则如果它没有接受它的构造函数，应该如何将属性注入 HomeController？

IE

```
public HomeController(IAuctionCmsServices auctionCmsServices)
 : base(auctionCmsServices)
{} 
```

抱歉，如果我很密集或遗漏了什么。

# jquery - JQuery $.get() 不调用远程 URL

> ID：10094675
> 
> 赞同：0
> 
> 时间：2012-04-10T18:51:57.387
> 
> 标签：jquery, asp.net-mvc

我有一个需要动态填充选择列表的非 mvc 应用程序，所以我有一个单独运行的 MVC 应用程序来提供数据。

我的 MVC 控制器似乎设置正确：

```
 public JsonResult GetStateList()
 {

    var list = new List<ListItem>() {
    new ListItem() { Value = "1", Text = "VA" },
    new ListItem() { Value = "2", Text = "MD" },
    new ListItem() { Value = "3", Text = "DC" }
    };

     return Json(list, JsonRequestBehavior.AllowGet);
 } 
```

当我在浏览器中输入 URL http:/localhost/TestMVC/home/GetStateList 时，我得到 JSON 响应。

问题是当我尝试在其他程序中使用 $.get() 时。我的代码在下面，我知道它没有击中控制器，因为我处于调试模式并且没有任何击中。我的语法不正确吗？我应该用不同的方式称呼它吗？

```
 $('#GetEmployeesByLetter').click(function() {

        var url = "http:/localhost/TestMVC/home/GetStateList";

        $.get(url, {}, function(data) {
            alert(data);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:59:23.017

你有没有尝试过

```
 var url = "http://localhost/TestMVC/home/GetStateList"; 
```

http - (//) 后的两个破折号

无论如何，你永远不应该这样指定 url，最好有根 url，

```
$.get('/home/getstatelist', function (d) {
  // process data..
}); 
```

# javascript - 如何使用 Javascript/jQuery 进行初始大写

> ID：10094677
> 
> 赞同：9
> 
> 时间：2012-04-10T18:52:14.020
> 
> 标签：javascript, jquery

我有一个用 JavaScript 设置的动态面包屑。我只想为每个单词做首字母大写。

示例：主页 > 一些 > 页面

目前，我将它们全部转换为小写，并从具有多个单词的页面中的字符串中删除了所有 - 。我只需要将字符串转换为 Initial Caps。这是我到目前为止工作的代码：

```
var path = "",
    href = document.location.href,
    domain =  href.match(/:\/\/(.[^/]+)/)[1],
    replacedomain = 'http://' + domain + '/',
    s = href.replace(/-/gi, " ").split("/"),
    lastElement = document.location.href.split('/').splice(-1,1);

for (var i = 2; i < (s.length - 1); i++) {
    path += "<a class='bc' href=\"" + href.substring(0, href.indexOf("/" + s[i]) + s[i].length + 1) + "/\">" + s[i] + "</a> >  ";

    if (i > 0) { 
       breadcrumb = path;  
    }
}

i = s.length - 1;
breadcrumb += "<span>" + s[i] + "</span>";

var breadcrumbl = breadcrumb.toLowerCase(),
    domain =  breadcrumbl.match(/:\/\/(.[^/]+)/)[1],
    breadcrumb2 = breadcrumbl.replace(domain, "").replace(domain, ""),
    breadcrumbs = breadcrumb2,
    url = '<a href="/">Home</a>' + breadcrumbs;

document.getElementById('breadcrumb1').innerHTML=url; 
```

我认为解决方案是使用正则表达式，但我不擅长编写它们，而且我很难理解这个概念。此外，如果有人认为此脚本可以进一步优化，欢迎您提供反馈。我将使变量名称在生产中更具语义。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T18:55:06.397

你可以使用css：

```
span.breadcrump {
    text-transform: capitalize;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T18:57:45.043

我最近写了这个辅助方法来为我做这件事：

```
function autocase ( text ) {
    return text.replace(/(&)?([a-z])([a-z]{2,})(;)?/ig,function ( all, prefix, letter, word, suffix ) {
        if (prefix && suffix) {
            return all;
        }

        return letter.toUpperCase() + word.toLowerCase();
    });
} 
```

它考虑了诸如`&trade;`

编辑：要使用此方法，只需传递一个字符串，它会自动返回字符串。它不适用于 html 字符串。

```
//...
document.getElementById('breadcrumb1').innerHTML=url;
function autocase ( text ) {
    return text.replace(/(&)?([a-z])([a-z]{2,})(;)?/ig,function ( all, prefix, letter, word, suffix ) {
        if (prefix && suffix) {
            return all;
        }

        return letter.toUpperCase() + word.toLowerCase();
    });
}
$("#breadcrumb1 a").text(function(i,text){
    return autoCase(text);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T18:55:48.830

尝试使用 css 属性`text-transform:capitalize;`作为面包屑。

最有可能在你的情况下，它应该是，

```
.breadcrumb1 a {
   text-transform: capitalize;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T18:55:17.040

我的第一个想法是：

```
breadcrumb += "<span>" + s[i].substring(0,1).toUpperCase() + s[i].substring(1) + "</span>"; 
```

但是[@Esailija 的回答](https://stackoverflow.com/a/10094706/82548)要容易得多。参考：

*   [`toUpperCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toUpperCase).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-10T18:55:37.593

不要成为朋克，但为什么不只使用css？

```
text-transform: capitalize; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-10T18:55:48.783

抱歉，如果您真的需要 JS，但在 CSS 中您可以轻松使用 text-transform:Capitalize;

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-22T01:56:51.490

由于接受的答案实际上并没有像提出的那样回答问题，我认为这可能会有所帮助；这是一个使用带有 JavaScript 的 Regex 的解决方案，最初在这里找到：[Regex capitalize first letter each word](https://stackoverflow.com/questions/6251463/regex-capitalize-first-letter-every-word-also-after-a-special-character-like-a)

这是我发现有用的片段：

```
var re = /(\b[a-z](?!\s))/g;
var s = "fort collins, croton-on-hudson, harper's ferry, coeur d'alene, o'fallon"; 
s = s.replace(re, function(x){return x.toUpperCase();});
console.log(s); // "Fort Collins, Croton-On-Hudson, Harper's Ferry, Coeur D'Alene, O'Fallon" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-01T16:32:39.247

这是一个：

```
s.replace(/(^[a-zA-Z]{1})/,function (s){
  return s.toUpperCase();
}); 
```

# php - 带有自定义标头的 PHP 重定向

> ID：10094679
> 
> 赞同：4
> 
> 时间：2012-04-10T18:52:29.050
> 
> 标签：php, .htaccess, redirect, http-headers

我正在编写一个基本的授权系统，但我有点挣扎。涉及两个文件 -`index.php`和`login.php`. 登录表单非常简单（在里面`index.php`）：

```
<fieldset class="right">
    <label for="email">Email

        <input id="email" name="email" type="text" value=""/>
    </label>
    <label for="password">Password
        <input id="password" name="password" type="password" />
        <a href="#" onclick="$('#password-box').toggle();" >Forgot your password?<span></span></a>
    </label>
    <div class="btn-login"><button type="submit" value="Login"></button></div>
</fieldset>
</form> 
```

内容`login.php`：

```
<?php
//  Include the launcher file.
require_once('globals.php');
require_once(CORE . 'launcher.php');

//  Collect the information sent to us.
$mail = (isset($_POST['email'])) ? $_POST['email'] : '';
$password = (isset($_POST['password'])) ? $_POST['password'] : '';

$LoginError = false;
    // AUTHORIZATION STUFF HERE
if ($LoginError) {
    header('Status: 200');
    header('X-Test: test');
    header('Location: index.php');
    exit();
} 
```

如您所见，我正在向包含表单的脚本发送自定义标头，以防登录期间出现错误。在 中`index.php`，我正在使用`headers_list()`，但我发送的标头不在列表中。

是什么原因造成的？我已经`php_value "output_buffering" "0"`在`.htaccess`文件中尝试过，但没有成功。

**更新** 在 Chrome 中检查后，浏览器正在接收标头，但在 PHP 中不可用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:55:57.503

您指定的 headers()`header()`将出现在服务器 -> 客户端的输出中。但是，在进行重定向时，浏览器将执行一个**NEW**请求，客户端 -> 服务器，并且浏览器没有义务在这个新请求中包含您的自定义标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:57:28.800

重定向被发送到客户端并由客户端处理，客户端通过导航到给定的`Location: index.php`. 您不应期望浏览器在`index.php`从服务器请求时提供自定义标头。

```
CLIENT                                    SERVER
 |------- POST login.php ------------------>|
 |                                          |
 |<- 200, Location: index.php, X-Test:test -| (this is where you send the header)
 |                                          |
 |------- GET index.php ------------------->| (no header from client to server) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:55:32.910

> 我正在向包含表单的脚本发送自定义标题

不你不是。您向客户端（用户的浏览器）发送自定义标头，客户端将简单地忽略/丢弃它。

如果您需要维护状态，请使用 cookie/会话或在新位置放置一些东西，例如`header('Location: index.php?login=false');`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:56:51.460

正在接收您发送给用户的自定义标头。但是当浏览器执行重定向时它们被丢弃，因为浏览器没有将它们发送到重定向页面。这就是为什么你看不到他们。

# computational-geometry - 稳健的距离比较谓词

> ID：10094680
> 
> 赞同：1
> 
> 时间：2012-04-10T18:52:46.530
> 
> 标签：computational-geometry, cgal

我需要一个由以下代码定义的健壮谓词：

```
CompareResult compareDistance(Point a, Point b, Point c, Point d) {
    if (distance(a, b) > distance(c, d))
        return Larger;
    else if (distance(a, b) == distance(c, d))
        return Equal;
    else
        return Smaller;
} 
```

由于浮点算术的限制，我们不能`distance`精确计算（甚至是平方），所以如果我们直接实现这个代码，谓词就不会很健壮。我试图在 CGAL 库中找到它，但找不到。

有点接近我需要的`compare_distance_to_point(Point p, Point q, Point r)` [谓词 predicate](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Function_compare_distance_to_point.html)。它返回`Smaller`if `distance(p, q) < distance(p, r)`、`Equal`if`distance(p, q) == distance(p, r)`和`Larger`else。第一个想法是通过向量移位`c`和，所以我们可以调用，但这会再次违反鲁棒性。那么，有没有人有适应它的想法？`d``(c - a)``compare_distance_to_point(a, b, d + (c - a))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:16:48.077

如果您采用具有精确谓词（例如 [Exact_predicates_inexact_constructions_kernel](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Class_Exact_predicates_inexact_constructions_kernel.html) ）的内核，则可以使用仿函数 Compare_distance_3 ，它是[CompareDistance_3](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/FunctionObjectConcept_Kernel--CompareDistance_3.html)概念的模型。

`Kernel::Compare_distance_3 cmp;`

`return cmp(a,b,c,d);`

# linux - 以编程方式确定 Linux 上特定驱动器的控制器

> ID：10094691
> 
> 赞同：1
> 
> 时间：2012-04-10T18:53:46.827
> 
> 标签：linux, device-driver, hard-drive, device

我有一个配置了 SATA 和 SCSI 控制器的 VM，并且每个都连接了一个驱动器。我想在 Perl 脚本中确定哪个驱动器连接到哪个控制器。我正在使用 Debian 压缩内核 2.6.32。

# c++ - openCV 错误：未定义对 `cvLoadImage' Ubuntu 的引用

> ID：10094692
> 
> 赞同：8
> 
> 时间：2012-04-10T18:53:50.527
> 
> 标签：c++, c, opencv, ubuntu, image-processing

我已经安装了 openCV 库，但仍然收到错误
**$ g++ -I /usr/include/opencv/ -L -lcxcore -lhighgui hello.cpp -o hello
/tmp/ccjjrbXr.o: In function cvLoadImage `main': hello.cpp:(.text+0x2d): undefined reference to`'
collect2: ld返回 1 个退出状态**

当我检查库的路径时，我得到
**$ pkg-config --libs opencv
-lml -lcvaux -lhighgui -lcv -lcxcore**

我写了一个非常简单的程序来测试它：

```
enter code here

#include< cv.h>  
#include< highgui.h> /* required to use OpenCV's highgui */
#include< stdio.h>

int main() { 
    IplImage* img = 0;
    printf("Hello\n");
    img = cvLoadImage("lena.jpg", 0 );
} 
```

我的安装有问题，但我真的无法弄清楚。任何指导将不胜感激！谢谢

* * *

当我运行时：

```
$ pkg-config --cflags --libs opencv
-I/usr/local/include/opencv -I/usr/local/include
/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so 
/usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so 
/usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so 
/usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so 
/usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so 
/usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so 
/usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so 
/usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so 
/usr/local/lib/libopencv_videostab.so 
```

但是当我运行时：

```
$ g++ 'pkg-config --cflags --libs opencv' display_image.cpp
g++: error: pkg-config --cflags --libs opencv: No such file or directory 
```

OpenCV 似乎已安装，但问题仍然存在。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T04:22:29.333

您使用了单引号`'`而不是[反引号/反引号](https://en.wikipedia.org/wiki/Grave_accent#Use_in_programming) ```。这是更正后的命令：

```
g++ hello.cpp -o hello `pkg-config --cflags --libs opencv` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T19:42:30.627

这个命令：

```
g++ 'pkg-config --cflags --libs opencv' display_image.cpp 
```

与此不同：

```
g++ `pkg-config --cflags --libs opencv` display_image.cpp 
```

因为 ` 和 ' 字符...

如果你不想弄乱这些字符，你可以使用

```
g++ $(pkg-config --cflags --libs opencv) display_image.cpp 
```

哪个更容易可视化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:58:36.557

`-lhighgui`如果您正在使用它，最好链接到 highgui 库

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-27T09:39:50.940

尝试 g++ -g -o mypro progname.cpp`pkg-config opencv --cflags --libs` 或

# ruby-on-rails - 如何在 Rails 3.1 中访问单个 css 文件？

> ID：10094694
> 
> 赞同：2
> 
> 时间：2012-04-10T18:54:14.813
> 
> 标签：ruby-on-rails, asset-pipeline

我目前正在使用 Rails 3.1。我只需要使用一个 css 文件，但问题是当我添加

```
<link href="http://mydomain.net/assets/some.css"></link> 
```

它不存在。我需要从该特定 css 文件中获取 css 文件，并且不应加载其他 css 文件。

我如何在 Rails 3.1 中做到这一点？

更新：

将此添加到production.rb：

```
config.assets.precompile += ['some.css'] 
```

导致以下错误：

```
 ** [out :: domain.net] rake aborted!
 ** [out :: domain.net] stack level too deep
 ** [out :: domain.net] (in /home/deployer/apps/domain/releases/20120410204601/app/assets/stylesheets/some.css.scss)
 ** [out :: domain.net] 
 ** [out :: domain.net] Tasks: TOP => assets:precompile:primary
 ** [out :: domain.net] (See full trace by running task with --trace) 
```

更新#2：

some.css 的文件名实际上是 some.css.scss。

更新#3：

我刚刚发现了这个问题，它是由这个引起的：

[https://github.com/rails/sass-rails/issues/78](https://github.com/rails/sass-rails/issues/78)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T19:35:39.643

当您在生产环境中时，您的所有资产都必须经过预编译，即转换为静态文件并复制到`/public`.

在生产中，您所有的个人文件`app/assets`都不能直接访问，因为它们没有预编译。运行时不会预编译您的单个 css 文件

```
rake assets:precompile 
```

根据[资产管道文档](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)：

> 如果您有其他清单或单独的样式表和 JavaScript 文件要包含，您可以将它们添加到预编译数组中：

所以对你来说，在你的 css 文件的顶部添加一个清单头：

```
/*
 *= require_self
 */ 
```

然后添加您的配置：

```
config.assets.precompile += ['some.css'] 
```

然后像往常一样预编译您的资产并访问您的 css 文件：

```
<%= stylesheet_link_tag 'some' %> 
```

@Thorpe Obazee 编辑

如果只有 sass-rails 3.1.5 没有任何问题，答案基本上是正确的。所以我接受了答案。

[https://github.com/rails/sass-rails/issues/78](https://github.com/rails/sass-rails/issues/78)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:03:03.263

您需要将样式表添加到资产文件夹中。然后使用

```
<%= stylesheet_link_tag    "some", :media => "all" %> 
```

加载您的样式表。

# c# - 语音识别循环

> ID：10094695
> 
> 赞同：2
> 
> 时间：2012-04-10T18:54:29.640
> 
> 标签：c#, windows, service, windows-services, speech-recognition

我的问题只是如何在 Windows 服务中实现语音识别，以使服务不断监听要说的内容。

我做了一些研究，似乎解决方案是使用计时器并以特定间隔“收听”语音，尽管这对我来说似乎是错误的。任何想法或评论都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:14:21.997

您是在构建语音识别引擎还是集成到现有的 ASR 中？计时器将不起作用。你需要一个一直在听的听众。监听语音开始和任何话语的结束点的检测。计时器可能会错过讲话的开始。

# mysql - 扩展和性能 SQL 或 NoSQL

> ID：10094696
> 
> 赞同：2
> 
> 时间：2012-04-10T18:54:34.110
> 
> 标签：mysql, mongodb, scaling

我读过一些关于 NoSQL 使用的迷你书，例如 CouchDB 或 MongoDB（我比较熟悉后者）。

在性能方面更合适 - 特别是缩放：

1.  如果需要，单个数据库托管在不同的服务器上
2.  使用分片分区的单个 MongoDB

我省略了诸如主从等 SQL 扩展技术（我的理解是使用超出其服务器增长的应用程序扩展 SQL 的方式）。

我的应用程序中的每个“帐户”都仅供个人使用，不会增长到疯狂的大小或访问权限。因此，我认为我可以将应用程序托管在一台或几台服务器上，并根据需要将数据分布在一台或多台服务器上。当一个 SQL 被挖掘出来时，我会将数据库的一半（按使用比例）重新定位到另一台服务器（远程与否）。这在理论上应该提供一些性能提升，让我可以毫不费力地进行一些扩展？？？

或者，在 NoSQL 解决方案中共享听起来很容易——唯一的副作用是我需要将所有记录保存在单个数据库中——稍微降低个人安全性——理论上？

您对此事有何经验/看法？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:31:27.893

这个问题有点令人困惑。您正在询问两种不同可扩展性方法的性能特征......这假设这两种可扩展性方法相当等效，但事实并非如此。

您在这里询问了两种不同的方法；我将使用标准术语来描述它们。这些不是 NoSQL 特定的，并且适用于任何技术。

垂直扩展，这是一个非常大的单一服务器。

水平扩展，即许多较小的服务器聚集在一起。

这两种解决方案各不相同。水平扩展能够以一致的小成本逐步增加容量。垂直扩展需要非常大的前期成本，并且每次单台服务器的容量都满了。抛开所有其他因素不谈，通常正是因为这个因素，水平扩展是架构师用来扩展的方法。谷歌在 90 年代后期证明了这种方法的可行性。

MongoDB 和其他 NoSQL 解决方案使用这种方法来实现可扩展性。在 MongoDB 中，它被称为分片。现在来解决性能特征。在垂直方法中，最终发生容量增长的是这台机器本身实际上是一系列集群组件。巨大的硬盘阵列、主板阵列和 cpu 和内存。无法将两者进行对比，因为这在很大程度上取决于所使用的实际硬件和环境。不过有一点很清楚。为了达到类似的性能，水平方法将更便宜且更简单。

横向方法也有一些好处。某些自然限制发生在单台机器上，通过将负载分散到多台机器上可以避免这些限制。

最后，在旁注中，主/从不用于扩展。为了提供更多的读取容量，它将所有写入倍增。这意味着每个额外的节点提供的好处越来越少。虽然它可以稍微增加读取容量，但它旨在实现高可用性，而不是扩展。

# tcl - tcl 字符串替换

> ID：10094697
> 
> 赞同：3
> 
> 时间：2012-04-10T18:54:40.820
> 
> 标签：tcl

```
$arg=TEST #### Requested, NOT AVAILABLE psy #; 
```

我在上面有一个字符串，其中 # 是动态生成的。我必须在 tcl 中使用一个函数来进行字符串替换。基本上我需要从上面的表达式中删除逗号（，）并将其显示为

测试 #### 请求不可用 psy #

这是我所做的，但它不起作用。

```
regsub -all {"Requested,"} $arg {"Requested"} arg 
```

这是我从以下位置引用函数的地方： [http ://www.tcl.tk/man/tcl8.5/TclCmd/regsub.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/regsub.htm)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T19:02:59.253

问题是你的报价。您实际上是在检查字符串`"Requested,"`（包括引号），但这不是您想要的。尝试去掉花括号 ( `}`) 或双引号 ( `"`)：

```
set arg "TEST #### Requested, NOT AVAILABLE psy #;"
regsub -all "Requested," $arg "Requested" arg 
```

如果您只需要删除逗号，则可以搜索/替换它（只需将其替换为空字符串`""`）：

```
regsub -all "," $arg "" arg 
```

或者

```
regsub -all {,} $arg {} arg 
```

正如评论者所提到的，后者在一般情况下可能更好，因为正则表达式通常包含许多反斜杠 ( `/`) 并且`{}`括号不需要像`""`引号一样的大量分散注意力的额外反斜杠转义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T22:26:29.250

另一种选择，不是正则表达式的重量级，是[`[string map]`](http://tcl.tk/man/tcl8.5/TclCmd/string.htm#M39)

```
set arg [string map { , "" } $arg] 
```

如果您不想全局删除：

```
set idx [string first , $arg]
set arg [string replace $arg $idx [incr idx]] 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-20T11:39:57.520

```
set hfkf "555";
set arg "TEST #### Requested, NOT AVAILABLE psy #;"
regsub -all "Requested," $arg "Requested" arg
regsub -all {"Requested,"} $arg {"Requested"} arg 
```

# maven - 加快 maven clean

> ID：10094699
> 
> 赞同：0
> 
> 时间：2012-04-10T18:54:55.413
> 
> 标签：maven, maven-2, settings, maven-3, profile

以下建议似乎适用于 maven 1.x。

[http://bosy.dailydev.org/2009/02/speed-up-your-maven-build-four-times.html](http://bosy.dailydev.org/2009/02/speed-up-your-maven-build-four-times.html)

如何在 maven 3.x settings.xml 中定义如上所述的“qclean”配置文件（或等效配置文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:09:49.940

该`build`元素只能在项目的配置文件中指定，不能在 settings.xml 中全局指定。这在[Maven 设置参考](http://maven.apache.org/settings.html#Profiles)中进行了解释：

> settings.xml 中的元素是 pom.xml元素`profile`的截断版本。`profile`它由`activation`、`repositories`和元素组成`pluginRepositories`。`properties`
> 
> 这些`profile`元素只包括这四个元素，因为它们关注的是整个构建系统（这是 settings.xml 文件的作用），而不是单个项目对象模型设置。

据我所知，链接的文章没有提到 settings.xml 或 maven 1。由于这篇文章是 2009 年的，我猜这个解决方法是为 maven 2 实现的，并包含在项目 pom.xml 中。

# java - W3C 验证器返回 HTTP 500，尽管它在浏览器中工作

> ID：10094707
> 
> 赞同：0
> 
> 时间：2012-04-10T18:55:07.360
> 
> 标签：java, android, http, w3c-validation

我尝试了以下网址：

```
http://validator.w3.org/mobile/check?docAddr=mobisoft.net.pl&output=unicorn 
```

在桌面 firefox 或 chrome 浏览器中，一切正常。它返回有效的 XML 响应。

之后，我创建了 Android 应用程序，该应用程序连接到 W3C 以获得验证结果。下面的代码：

```
Url url = new URL("http://validator.w3.org/mobile/check?docAddr=mobisoft.net.pl&output=unicorn"); 
URLConnection connection = url.openConnection();
HttpURLConnection httpConnection = (HttpURLConnection) connection;

int responseCode = httpConnection.getResponseCode(); 
```

我总是得到 HTTP 状态代码 500 INTERNAL SERVER PROBLEM，尽管事实上它工作正常，同时在桌面浏览器上执行相同的 url。其他网站也有同样的问题。

你有什么想法，为什么它在我的 Android 应用程序中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:15:13.143

尝试添加一个 HTTP “User-Agent” 标头，也许这就是问题所在。否则，我建议使用现有的开源 Java 库，它代表您（通过 W3C）进行此验证：[rexsl-w3c](http://www.rexsl.com/rexsl-w3c/index.html)

编辑：添加带有“application/soap+xml”值的“Accept”HTTP 标头，可以正常工作。

# list - 如何在 SharePoint 2010 中访问列表的 odata 服务

> ID：10094719
> 
> 赞同：8
> 
> 时间：2012-04-10T18:55:51.297
> 
> 标签：list, sharepoint-2010, odata

如果我的列表位于此处：

```
 http://sharepoint2010m/Lists/VideoPlayerData/AllItems.aspx 
```

我如何通过o-data服务获取实际物品？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T21:40:13.183

您的 REST 端点将是：`http://sharepoint2010m/_vti_bin/listdata.svc/VideoPlayerData`

在您的示例中，您的 List 位于根目录中。但是，如果您需要访问更深入的列表，您可以`_vti_bin`在 URL 中的最后一个站点之后添加。

例如，要在以下位置访问列表： `http://sharepoint2010m/MySite/MySubSite/Lists/MyList/AllItems.aspx`，

你会要求：

`http://sharepoint2010m/MySite/MySubSite/_vti_bin/listdata.svc/MyList`

Microsoft 也有一篇很有帮助的文章，名为[Using the REST Interface](http://msdn.microsoft.com/en-us/library/ff798339.aspx "MSDN - SharePoint 2010 - 使用 REST 接口")，您可能想看看。

# multithreading - glib 线程安全吗？

> ID：10094723
> 
> 赞同：2
> 
> 时间：2012-04-10T18:56:02.777
> 
> 标签：multithreading, thread-safety, glib

我在 glib 文档中找不到有关线程安全的任何信息。我想这意味着我可能应该假设它不是线程安全的，但我不确定我应该锁定哪些共享资源。

有人对使用 glib 的线程安全有任何经验吗？我可以使用哪些准则来确保我的 glib 代码是线程安全的？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:35:25.053

实际上 glib 参考手册充满了关于线程安全的信息：

> 调用 g_thread_init() 后，GLib 是完全线程安全的（所有全局数据都被自动锁定），但出于性能原因，个别数据结构实例不会自动锁定。因此，例如，您必须协调从多个线程对同一个 GHashTable 的访问。此规则的两个值得注意的例外是 GMainLoop 和 GAsyncQueue，它们是线程安全的，不需要进一步的应用程序级锁定即可从多个线程访问。

您可能想查看参考手册的[线程部分](http://developer.gnome.org/glib/2.32/glib-Threads.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:28:41.710

全局策略很简单：除了数据操作函数外，所有的都是线程安全的。在那里阅读：http: [//developer.gnome.org/glib/stable/glib-programming.html](http://developer.gnome.org/glib/stable/glib-programming.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T07:03:08.763

从[GLib 参考手册](https://developer.gnome.org/glib/stable/glib-Threads.html)中，您可以获得以下语句：

> GLib 本身在内部是完全线程安全的（所有全局数据都被自动锁定），但出于性能原因，个别数据结构实例不会自动锁定。

因此，为了补充前面的答案，您无需调用`g_thread_init()`.

# html - 使用 HTML5 输入模式属性定义特定长度

> ID：10094724
> 
> 赞同：2
> 
> 时间：2012-04-10T18:56:03.440
> 
> 标签：html, input

现在我可以设置一个特定的长度或范围，但不能设置两个不同的长度，两者都有效。

pattern="{11}" <-一个特定长度 pattern="{11,15}" <-Range

你如何让它只接受 11 或 15 而没有别的？第 12、13、14、5 号等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:22:28.370

模式属性基于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。RegEx {} 检查字符出现（在您的情况下为 11 和 15）。

您无法使用一个表达式和一个 {} 表示法来检查两种不同（不相邻）的长度。

您需要编写两个表达式：第一个检查 11 个字符，第二个检查 15 个字符。您可以使用某些条件链接这两个正则表达式。存在一些[If-else-conditionality](http://www.regular-expressions.info/conditional.html)，但浏览器可能不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-10T07:40:07.217

可以使用 OR 语句：`<input pattern="(.{11}|.{15})">`

# django - 测试时如何访问 request.user？

> ID：10094727
> 
> 赞同：4
> 
> 时间：2012-04-10T18:56:14.143
> 
> 标签：django, django-testing, django-socialauth

我刚从 Django 1.3.1 迁移到 Django 1.4。这样做之后，我的大量测试开始引发这些错误：

```
Traceback (most recent call last):
  File "/Volumes/Data/ADay/Website/Backend/(trunk)/project/tests/templatetags.py", line 406, in setUp
    self.context = template.RequestContext(self.request)
  File "/Library/Python/2.6/site-packages/django/template/context.py", line 176, in __init__
    self.update(processor(request))
  File "/Volumes/Data/ADay/Website/Backend/(trunk)/project/social_auth/context_processors.py", line 21, in social_auth_by_type_backends
    data = backends_data(request.user)
AttributeError: 'WSGIRequest' object has no attribute 'user' 
```

所有这些错误都指向 django-social-auth 上下文处理器，它试图获取 request.user 来构建请求上下文：

```
def social_auth_by_type_backends(request):
    """Load Social Auth current user data to context.
    Will add a output from backends_data to context under social_auth key where
    each entry will be grouped by backend type (openid, oauth, oauth2).
    """
    data = backends_data(request.user)
    data['backends'] = group_backend_by_type(data['backends'])
    data['not_associated'] = group_backend_by_type(data['not_associated'])
    data['associated'] = group_backend_by_type(data['associated'],
    key=lambda assoc: assoc.provider)
    return {'social_auth': data} 
```

Django 在构建请求上下文时不会将请求传递给函数吗？我不认为是这样，social-auth 团队的某个人现在可能已经发现了这样的问题。

**编辑：**

我首先认为不推荐使用的 context_processor 会有一些问题，但我检查了一下，它们都应该是最新的：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.messages.context_processors.messages',
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.static",
    "django.contrib.messages.context_processors.messages",
    'django.core.context_processors.request',
    'pages.context_processors.media',
    'social_auth.context_processors.social_auth_by_type_backends',
    )

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

**编辑2：**

好的，随着站点继续工作，这可能是我的测试代码的问题。这里是：

```
def setUp(self):
    self.factory = RequestFactory()
    # create an initial request including session data        
    self.response = self.client.get('/')
    self.request = self.factory.get("/") #any valid url will do, i just need a request
    self.request.session = self.client.session

    self.context = template.RequestContext(self.request) 
```

最后一行引发了错误。就像在我的 TestCase 的 setUp() 函数中一样，它开始在我的整个测试中引发异常。为什么这不再在 Django 1.4 中工作了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:50:54.933

如果有人发现：使用 RequestFactory 创建的请求在对它们使用 RequestContext(request) 时似乎不会返回 request.user，即使安装了“django.contrib.auth.context_processors.auth”也是如此。但是在使用 RequestContext(request) 之前将用户自己传递给请求可以正常工作：

```
class SampleTestCase(TestCase):
    fixtures = ['user_fixture.json']

    def test_only_a_sample(self):
        request.user = User.objects.get(pk=1)
        self.context = RequestContext(request)
        # some tests here 
```

这是最终对我有用的代码。

编辑：请求可以通过，

```
from django.test.client import RequestFactory 

# code suppressed 
def setUp(self):
    self.factory = RequestFactory() 
```

并用于

```
def test_only_a_sample(self):
    request = self.factory.get('/')        # or any other methods
    request.user = User.objects.get(pk=1)
# code follows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T20:24:20.687

我需要一个经过身份验证的用户来测试特权视图。我需要在响应中获取上下文。RequestFactory 工作，但它得到一个不包含上下文的 HttpReponse。

这就是我所做的，并且奏效了。

```
class MyTestCase(TestCase):
    def setUp(self):
        self.client.login(username='user@myorg.com', password='Secret')

    def test_create_event(self):
        print("Testing create...")
        response = self.client.post('/event/new_event/', form_data_dict)
        self.assertEqual(response.status_code, 200)
        event_id = response.context['event'].event_id 
```

# android - 蓝牙Android SPP，将命令串行发送到设备？

> ID：10094734
> 
> 赞同：2
> 
> 时间：2012-04-10T18:56:22.270
> 
> 标签：android, bluetooth, serial-port, spp

**----------------------编辑--------------**
A进展不大，但不是解决方案。如果我在要发送的命令之间插入以下代码，至少允许命令有时间在远程端处理（但这仍然不是正确的方法，正确的方法是等待在发送另一个命令之前用于响应“>”）...

android.os.SystemClock.sleep(150);

尽管在系统时钟休眠期间侦听器线程被阻塞，但来自调制解调器的输入直到代码序列被发送后才会附加到文本视图，这不太理想。不过，再次睡眠不是正确的方法，我需要找到更好的方法，所以在“>”结果从另一端的设备返回之前，我不会发送新命令。当我完成这段代码后，我将需要一种方法来处理输入，所以如果我考虑一下，睡眠真的没有进展。插入睡眠的示例：

```
 sendData("enable");
    android.os.SystemClock.sleep(150);
    sendData("password");        
    android.os.SystemClock.sleep(150); 
    sendData("conf t");        
    android.os.SystemClock.sleep(150);     
    sendData("interface eth0");        
    android.os.SystemClock.sleep(150);    
    //etc...etc...etc... 
```

**----------------------下面的原帖------------------------- -**

我正在使用来自 Matt Bell 博客的这段优雅编写的代码，位于此处： [http ://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/](http://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/)

来源： [http ://project-greengiant.googlecode.com/svn/trunk/Blog/Android%20Arduino%20Bluetooth](http://project-greengiant.googlecode.com/svn/trunk/Blog/Android%20Arduino%20Bluetooth)

在不把代码切得太糟糕的情况下，我试图以一种优雅的方式将命令串行发送到连接的调制解调器，每次都等到收到完整的响应后再发送下一个命令。（我知道这不是 Android 的做事方式，我可以使用其他语言快速处理这个问题）。

到目前为止，这是我正在使用的内容（您会看到我还没有走得很远，事实上，这段代码运行得非常好，直到我需要等待第一个命令完成才能发送更多命令）。我尽可能多地省略了与这个问题无关的代码。提前致谢。

```
 package Android.Arduino.Bluetooth;        

    import java.io.IOException;        
    import java.io.InputStream;        
    import java.io.OutputStream;        
    import java.util.Set;        
    import java.util.UUID;        
    import android.app.Activity;        
    import android.bluetooth.BluetoothAdapter;        
    import android.bluetooth.BluetoothDevice;        
    import android.bluetooth.BluetoothSocket;        
    import android.content.Intent;        
    import android.os.Bundle;        
    import android.os.Handler;        
    import android.widget.TextView;        

    public class BluetoothTest extends Activity        
    {        
        TextView myLabel;        
        BluetoothAdapter mBluetoothAdapter;        
        BluetoothSocket mmSocket;        
        BluetoothDevice mmDevice;        
        OutputStream mmOutputStream;        
        InputStream mmInputStream;        
        int counter;        
        Thread workerThread;        
        byte[] readBuffer;        
        int readBufferPosition;        
        volatile boolean stopWorker;        

        @Override        
        public void onCreate(Bundle savedInstanceState)        
        {        
            super.onCreate(savedInstanceState);        
            setContentView(R.layout.main);        

            myLabel = (TextView)findViewById(R.id.label);        

                        try         
                        {        
                            findBT();        
                            openBT();        
                            sendData("enable");        
                          //insert some code to wait for response before sending (or handle that in the above line, or otherwise)
                            sendData("password");        
                          //insert some code to wait for response before sending (or handle that in the above line, or otherwise)        
                            sendData("conf t");        
                          //insert some code to wait for response before sending (or handle that in the above line, or otherwise)        
                            sendData("interface eth0");        
                          //insert some code to wait for response before sending (or handle that in the above line, or otherwise)        
                          //etc...etc...etc...        
                        }        
                        catch (IOException ex) { }                            

        }        

        }        

        void openBT() throws IOException        
        {        
            UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb"); //Standard SerialPortService ID        
            mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);                
            mmSocket.connect();        
            mmOutputStream = mmSocket.getOutputStream();        
            mmInputStream = mmSocket.getInputStream();        
            beginListenForData();        
            myLabel.append("Bluetooth Opened" + "\n");        
        }        

        void beginListenForData()        
        {        
            final Handler handler = new Handler();         
            final byte delimiter = 62; //This is the ASCII code for a > character indicating all data received        

            stopWorker = false;        
            readBufferPosition = 0;        
            readBuffer = new byte[1024];              

            workerThread = new Thread(new Runnable()        
            {        
                public void run()        
                {                        

                while(!Thread.currentThread().isInterrupted() && !stopWorker)        
                   {        
                        try         
                        {        
                            int bytesAvailable = mmInputStream.available();                                
                            if(bytesAvailable > 0)        
                            {        
                                byte[] packetBytes = new byte[bytesAvailable];        
                                mmInputStream.read(packetBytes);        
                                for(int i=0;i<bytesAvailable;i++)        
                                {        
                                    byte b = packetBytes[i];        
                                    if(b == delimiter)        
                                    {        
                                        byte[] encodedBytes = new byte[readBufferPosition];        
                                        System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);        
                                        final String data = new String(encodedBytes, "US-ASCII");        
                                        readBufferPosition = 0;        

                                        handler.post(new Runnable()        
                                        {        
                                            public void run()        
                                            {                                                    
                                                myLabel.append(data);                                         
                                            }        
                                        });        
                                    }        
                                    else        
                                    {        
                                        readBuffer[readBufferPosition++] = b;        
                                    }        
                                }        
                            }        
                        }        
                        catch (IOException ex)         
                        {        
                            stopWorker = true;        
                        }        
                   }        

                }        
            });        

            workerThread.start();        
        }        

        void sendData(String msg0) throws IOException        
        {        
            msg0 += "\r";        
            mmOutputStream.write(msg0.getBytes());        
            myLabel.append("Data Sent" + "\n");        
        }        

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T02:10:19.940

我承认这是一个相当古老的问题。但是，由于我正在开发一个类似的应用程序，我以不同的方式解决了它，它可能会有所帮助。

您可以通过标志实现发送/响应逻辑，而不是发送之间的延迟。所以一开始的连接是`initial`. 您发送`enable`并将您的标志设置为`enableRequested`。然后你让你的听众等待响应。一旦你让它继续发送`password`，将标志设置为`passwordSent`并再次释放线程。

所以我建议不要在onCreate中这样做，而是触发一个线程从onCreate连接。那应该很好用。

# javascript - 如何在不使用具有误报的 isNaN 的情况下判断值是否为 NaN？

> ID：10094738
> 
> 赞同：5
> 
> 时间：2012-04-10T18:56:29.787
> 
> 标签：javascript, numbers, nan

如何在`NaN`不使用该`isNaN`功能的情况下检查输入值是否？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T19:00:48.730

如果你可以使用[ECMAScript 6](http://en.wikipedia.org/wiki/ECMAScript#Harmony.2C_6th_Edition)，你有[`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)：

```
return Object.is(obj, NaN); 
```

* * *

否则，这是一个选项，来自[underscore.js](http://documentcloud.github.com/underscore/#isNaN)的源代码：

```
// Is the given value `NaN`?
_.isNaN = function(obj) {
  // `NaN` is the only value for which `===` is not reflexive.
  return obj !== obj;
}; 
```

还有他们对该功能的说明：

> 注意：这与原生 isNaN 函数不同，如果变量未定义，它也会返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:02:39.520

将输入转换为数字，并检查减法是否不为零：

```
var x = 'value';
var is_NaN = +x - x !== 0; // The + is actually not needed, but added to show
                           // that a number conversion is made. 
```

# ios - .certSigningRequest 丢失。我该怎么办？

> ID：10094740
> 
> 赞同：2
> 
> 时间：2012-04-10T18:56:33.460
> 
> 标签：ios, app-store, certificate

在键盘出现神秘问题并忘记保存 .certSigningRequest 文件后，我重新安装了操作系统。我保存的唯一文件是 .p12 文件中的证书，并且已成功将所有这些内容设置回我的新登录钥匙串中。现在我收到消息“找不到有效的签名身份”。我什至不能在我的 iPhone 上运行我的应用程序。我现在该怎么办？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:53:21.130

好吧，在这种情况下，只需要再次运行证书程序。从 KeyChain 请求，然后下载并安装。这种方法对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T19:24:45.077

.certSigningRequest 不是重要的。您可能丢失了私钥。

检查此图像。如果您在打开 iPhone 开发者/iPhone 分发证书时可以在钥匙串中看到 Key-Line，则登录到 developer.apple.com/iOS 重新下载配置文件，一切都应该没问题。 ![在此处输入图像描述](../Images/9b56193b3647f1cf759f319355af20a9.png)

# javascript - 将 DOM 元素数组减少到 JavaScript 中最深层次的元素

> ID：10094743
> 
> 赞同：3
> 
> 时间：2012-04-10T18:56:52.543
> 
> 标签：javascript, jquery

假设我有这样的 HTML 标记：

```
<body>
  <div id="content">
    <div id="sidebar">
    </div>
    <div id="main">
        <p class="foo">text</p>
        <p class="bar">more <span>text</span></p>
    </div>
  </div>
</body> 
```

让我们进一步假设我在 DOM 元素数组中选择了其中一些：

```
var allElements = jQuery('div,p').get();
// result: [div#content, div#sidebar, div#main, p.foo, p.bar] 
```

现在我想有效地从结果集中删除所有在结果中有子元素的元素。换句话说，应该只保留最深的层次。所以，期望的结果是：

```
var deepestElements = doSomethingWith(allElements);
// desired result: [div#sidebar, p.foo, p.bar] 
```

**我怎样才能做到这一点？**

顺便说一句：“最深的元素”似乎是我想做的事情的错误术语。有更好的名字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:00:40.623

尝试使用`.filter`和使用`.children().length`过滤掉。见下文，

```
var deepestElements = jQuery('div,p').filter(function () {  
                         return ($(this).children().length == 0);
                       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:52:15.963

好吧，是的，因为 SKS 建议使用这个

```
jQuery('div,p').filter(function(){
    if($(this).children('div, p').length==0) 
        return true;
    }) 
```

这里唯一的变化是在孩子中我只寻找 div 和 p 子节点......并在这种情况下跳过其他像 span ......

希望这能解决您的问题...

**更新**

正如你所期待的那样希望这会有所帮助

```
var types_to_check = 'div,p';
jQuery(types_to_check).filter(function(){
    if($(this).children(types_to_check).length==0) 
        return true;
    }) 
```

这不行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T12:48:36.787

我找到了一个可行的解决方案（[JQuery distinct descendants (filter out all parents in result set)](https://stackoverflow.com/a/10152739/675065)）。

[cfedermann](https://stackoverflow.com/users/1330959/cfedermann)的代码学分：

```
jQuery.fn.distinctDescendants = function() {
    var nodes = [];
    var parents = [];

    // First, copy over all matched elements to nodes.
    jQuery(this).each(function(index, Element) {
        nodes.push(Element);
    });

    // Then, for each of these nodes, check if it is parent to some element.
    for (var i=0; i<nodes.length; i++) {
        var node_to_check = nodes[i];
        jQuery(this).each(function(index, Element) {

            // Skip self comparisons.
            if (Element == node_to_check) {
                return;
            }

            // Use .tagName to allow .find() to work properly.
            if((jQuery(node_to_check).find(Element.tagName).length > 0)) {
                if (parents.indexOf(node_to_check) < 0) {
                    parents.push(node_to_check);
                }
            }
        });
    }

    // Finally, construct the result.
    var result = [];
    for (var i=0; i<nodes.length; i++) {
        var node_to_check = nodes[i];
        if (parents.indexOf(node_to_check) < 0) {
            result.push(node_to_check);
        }
    }

    return result;
}; 
```

# algorithm - 找到矩形平铺螺旋的第 n 个元素？

> ID：10094745
> 
> 赞同：9
> 
> 时间：2012-04-10T18:57:04.513
> 
> 标签：algorithm, spiral

获取矩形平铺螺旋的第 n 个元素的算法是什么？

这里是`n`：

```
[ 20  ][ 21  ][ 22  ][ 23  ][ 24  ]
[ 19  ][  6  ][  7  ][  8  ][  9  ]
[ 18  ][  5  ][  0  ][  1  ][ 10  ]
[ 17  ][  4  ][  3  ][  2  ][ 11  ]
[ 16  ][ 15  ][ 14  ][ 13  ][ 12  ] 
```

这里是对应的坐标`n`：

```
[-2,2 ][-1,2 ][ 0,2 ][ 1,2 ][ 2,2 ]
[-2,1 ][-1,1 ][ 0,1 ][ 1,1 ][ 2,1 ]
[-2,0 ][-1,0 ][ 0,0 ][ 1,0 ][ 2,0 ]
[-2,-1][-1,-1][ 0,-1][ 1,-1][ 2,-1]
[-2,-2][-1,-2][ 0,-2][ 1,-2][ 2,-2] 
```

如果给定`n`，如何计算坐标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-15T06:21:37.793

这是一个简短而甜蜜的答案，只使用伪代码中的简单数学。没有条件，也没有迭代。给定`tileNum`瓷砖编号：

```
intRoot=int(sqrt(tileNum));

x=(round(intRoot/2)*(-1^(intRoot+1)))+((-1^(intRoot+1))*(((intRoot*(intRoot+1))-tileNum)-abs((intRoot*(intRoot+1))-tileNum))/2);

y=(round(intRoot/2)*(-1^intRoot))+((-1^(intRoot+1))*(((intRoot*(intRoot+1))-tileNum)+abs((intRoot*(intRoot+1))-tileNum))/2); 
```

这是一个在行动中看到它[的小提琴。](http://jsfiddle.net/9RGYH/35/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-27T18:59:47.527

这是 JavaScript 中的代码。它计算二维矩阵的位置，从中间的数字 1 (0, 0)

```
13  12  11  10  25
14   3   2   9  24
15   4   1   8  23
16   5   6   7  22
17  18  19  20  21

/**
 * Finds coordinates (position) of the number
 * 
 * @param {Number} n - number to find position/coordinates for
 * @return {Number[]} - x and y coordinates of the number
 */
function position(n) {
    const k = Math.ceil((Math.sqrt(n) - 1) / 2);
    let t = 2 * k + 1;
    let m = Math.pow(t, 2);

    t -= 1;

    if (n >= m - t) {
        return [k - (m - n), -k];
    }

    m -= t;

    if (n >= m - t) {
        return [-k, -k + (m - n)];
    }

    m -= t;

    if (n >= m - t) {
        return [-k + (m - n), k];
    }

    return [k, k - (m - n - t)];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T19:00:34.547

首先，找出你想要的元素在哪个环（提示：直到你到达外环，你的螺旋是由嵌套的正方形组成的），然后它在（4 个）的哪一侧，然后你就离开了它的位置在那一边。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T19:06:35.900

已经存在类似的问题......请参阅我的[非循环版本](https://stackoverflow.com/questions/9135823/coordinate-algorithm-rotate-around-the-center/9137312#9137312)。您可能需要交换和/或取反 X/Y 坐标，并将`100`'s 更改为 's，`0`具体取决于您想要的方向和原点。

还有更多规范的[循环版本](https://stackoverflow.com/questions/398299/looping-in-a-spiral)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T22:50:47.947

由于没有人回答，有一个解决方案：

```
def square_spiral(total_steps):
    position = (0,0)
    direction = (1,0)
    turn_steps = [floor(((x+2)**2)/4) for x in range(n+2)]
    for step in range(total_steps):
        if (step in turn_steps):
            direction = (-direction[1],direction[0])
        position = tuple(a+b for a,b in zip(position,direction))
    return position 
```

这模拟了通过所需路径的步行。您从位置 (0,0) 开始，向右走 1 步，向下走 1 步，向左走 3 步，向上走 3 步，依此类推，沿着螺旋。要对此进行编码，请注意我们正在改变数字 1、2、4、6、9、12、16、20 等步骤的方向。[https://oeis.org/](https://oeis.org/)显示这是四分之一平方整数序列。所以我们所需要的只是一个循环，其中每次迭代模拟一个步骤，将方向添加到位置并在步数是序列的一部分时将其旋转 90º。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-10T05:08:48.470

这是我在 javascript 中使用 8 的倒数和边编号的解决方案

复杂性：O(1) 无迭代循环

```
function spiral(n) {
    // given n an index in the squared spiral
    // p the sum of point in inner square
    // a the position on the current square
    // n = p + a

    var r = Math.floor((Math.sqrt(n + 1) - 1) / 2) + 1;

    // compute radius : inverse arithmetic sum of 8+16+24+...=
    var p = (8 * r * (r - 1)) / 2;
    // compute total point on radius -1 : arithmetic sum of 8+16+24+...

    en = r * 2;
    // points by edge

    var a = (1 + n - p) % (r * 8);
    // compute de position and shift it so the first is (-r,-r) but (-r+1,-r)
    // so square can connect

    var pos = [0, 0];
    switch (Math.floor(a / (r * 2))) {
        // find the face : 0 top, 1 right, 2, bottom, 3 left
        case 0:
            {
                pos[0] = a - r;
                pos[1] = -r;
            }
            break;
        case 1:
            {
                pos[0] = r;
                pos[1] = (a % en) - r;

            }
            break;
        case 2:
            {
                pos[0] = r - (a %en);
                pos[1] = r;
            }
            break;
        case 3:
            {
                pos[0] = -r;
                pos[1] = r - (a % en);
            }
            break;
    }
    console.log("n : ", n, " r : ", r, " p : ", p, " a : ", a, "  -->  ", pos);
    return pos;
} 
```

演示：[小提琴](http://jsfiddle.net/HJQ4g/3/)

# eclipse-plugin - 如何在不使用软件更新的情况下在 MyEclipse 中安装 PMD 插件？

> ID：10094752
> 
> 赞同：3
> 
> 时间：2012-04-10T18:57:29.913
> 
> 标签：eclipse-plugin, pmd, myeclipse

我认为由于我公司的网络限制，我无法使用安装 PMD

软件更新->查找并安装。

我试过这些网站

[http://pmd.sourceforge.net/eclipse](http://pmd.sourceforge.net/eclipse)

[http://pmd.sf.net/eclipse](http://pmd.sf.net/eclipse)

但出现网络错误“无法访问”

有什么地方可以将插件下载为 zip 文件，然后将其放入插件文件夹中？那会奏效吗？

我从一个站点（我现在不记得了）下载了 pmd-eclipse-1.8.0.zip，并且 PMD 选项显示在右键单击项目/文件时，但是诸如“使用 PMD 检查代码”、“清除 PMD 违规”等选项是未显示在上下文菜单中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:59:05.517

您可以尝试以下操作（假设您被允许连接，例如工作中的 pendrive）。在家里使用以下命令（使用命令行）创建更新站点的镜像：

（更多信息：[http](http://wiki.eclipse.org/Equinox_p2_Repository_Mirroring) ://wiki.eclipse.org/Equinox_p2_Repository_Mirroring ）

```
 ./eclipse -nosplash -verbose
  -application org.eclipse.equinox.p2.artifact.repository.mirrorApplication
  -source Insert Source URL (e.g. http://download.eclipse.org/eclipse/updates/3.4milestones/)
  -destination Insert Destination URL (e.g. file:/tmp/3.4milestonesMirror/) 
```

这将创建一个本地镜像。使用该目录及其内容，使用本地更新站点指向您从 pendrive 复制的目录。如果它具有 PMD 更新站点中未提供但在其他地方提供的依赖项，我想您将不得不对该依赖项执行相同操作（创建镜像...）并在 Eclipse 中正确设置更新站点位置（删除远程更新网站...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:30:20.787

您可以使用本地存储库[下载 eclipse pmd 文件](http://sourceforge.net/projects/pmd/files/pmd-eclipse/)并按照[官方说明进行操作。](http://pmd.sourceforge.net/integrations.html#eclipse)如果您的公司阻止了 sourceforge，首先您应该投诉 - 这是一个用于浏览文档等的开发人员站点。如果允许您通过电子邮件发送文件或使用便携式驱动器，您可以通过这种方式传输它们。

他们似乎更有可能阻止 eclipse 更新而不是 sourceforge 本身。

# javascript - 如何每4秒在jquery中添加和删除一个类

> ID：10094756
> 
> 赞同：4
> 
> 时间：2012-04-10T18:57:44.400
> 
> 标签：javascript, jquery

出于某种原因，这不是每 4 秒在具有 post 类的元素上添加和删除一个新类。jquery 正确加载，就像这样。chrome 显示代码没有错误。

```
$(document).ready(function(){
    $('.post').addClass('display').delay(4000).removeClass('display');
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T19:05:01.640

由于您列出了您希望每 4 秒发生一次，您可以简单地使用`setInterval()`

```
var $post = $(".post");
setInterval(function(){
    $post.toggleClass("display");
}, 4000); 
```

*注意*，选择器被缓存`$post`以最小化 DOM 需要在每个间隔上查询的次数。

**[jsfiddle 上的示例](http://jsfiddle.net/markcoleman/uJAdQ/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T19:04:17.363

假设您想在四秒后切换类名：

```
setTimeout(function(){
   $('.post').toggleClass('display');
},4000); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cajKS/2/)。

*每*四秒切换一次（尽管[@Mark](https://stackoverflow.com/a/10094846/82548)在我将其添加到我的帖子时已经发布了一个`setInterval`选项。...我要离开它，但我承认马克首先得到它）：

```
setInterval(function(){
   $('.post').toggleClass('display');
},4000); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cajKS/3/)。

参考：

*   [`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval).
*   [`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout).
*   [`toggleClass()`](http://api.jquery.com/toggleClass/).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T19:01:42.253

`.delay`仅适用于其他动画方法，不适用于`addClass`or `removeClass`。试试这个：

```
$('.post').addClass('display');
setTimeout(function(){ $('.post').removeClass('display'); },4000); 
```

如果您希望它继续添加和删除，您需要获得更多创意。您可以使用`setInterval`8000 毫秒的延迟，但这也会延迟第一个`addClass`。另一种方法是使用嵌套的 setTimeouts 和递归函数调用（以及`toggleClass`缩短代码）：

```
function addRemoveClass() {
    var delay = 4000; // milliseconds
    setTimeout(function() {
        $('.post').toggleClass('display');
        addRemoveClass();
    }, delay);
};
addRemoveClass(); 
```

[​​​http://jsfiddle.net/mblase75/jU8cj/](http://jsfiddle.net/mblase75/jU8cj/)

（将其设置为 1000 毫秒并设置`.display`为透明，*瞧*——[你刚刚重新发明了`blink`标签](http://jsfiddle.net/mblase75/jU8cj/2/)。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T19:05:10.577

我认为您想要更多类似的东西：

```
$(document).ready(function(){  
  setInterval(addRemoveClass,4000); 
});

function addRemoveClass() {
   $('.post').toggleClass('display');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T19:29:12.233

您只能在 jQuery 中使用[`delay`](http://api.jquery.com/delay)on [`queue`d动作。](http://api.jquery.com/queue)幸运的是，将项目添加到队列相对简单：

```
$(selector).delay(duration).queue(function (next) {
    $(this).doStuff();
    doOtherStuff();
    next();
}); 
```

提供给函数的参数是一个告诉队列继续的函数，以防您想要执行异步操作，例如使用`$.ajax`.

要获得循环，只需将排队的函数重新排队：

```
jQuery(function ($) {
    "use strict";
    function toggleDisplayClass(next) {
        $(this).toggleClass('display')  //toggles the class
            .delay(4000)                //waits 4 seconds
            .queue(toggleDisplayClass); //requeued
        next();                         //continues on the queue
    }
    $('.post').queue(toggleDisplayClass);
}); 
```

[您可以在我更新的 fiddle](http://jsfiddle.net/EwRD3/1/)上看到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T19:04:58.380

类似的东西：

```
jQuery(document).ready(function($) {  // ready
        var refresh=function(){

        $('.post').toggleClass('display'); //switch

                 }//end refresh
    setInterval(refresh,4000);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T19:06:22.653

`.delay()`仅延迟动画，而不是功能。您可以使用 JavaScript 的本机`setTimeout`方法。

```
function toggleDisplay() {
    $('.post').toggleClass("display");
    setTimeout(function(){ toggleDisplay(); },'1000');
}
toggleDisplay(); 
```

# c# - 说明 url 未解码 asp.net

> ID：10094763
> 
> 赞同：0
> 
> 时间：2012-04-10T18:58:26.893
> 
> 标签：c#, asp.net

每当我将我的 descprtion url 绑定到数据源时，它都会评估该项目，但会在其间添加这些奇怪的“%20”。

IE

果冻%20鱼

此代码在我的图像的标题属性中完美运行，即

```
 <li><asp:Repeater ID="Repeater1" runat="server">

<ItemTemplate>
<asp:Image ID="Image1" runat="server"  ImageUrl='<%# "getImage.ashx?ImID="+ Eval("ID")    %>' title='<%# Eval("imagename") %>' DescriptionUrl='<%# Eval("Description") %>' /> 
</ItemTemplate>
</asp:Repeater></li> 
```

我如何解码这个描述网址？

这是我的 C# 代码：

```
 SqlConnection connection = new SqlConnection(strcon);
    string querystring = "SELECT image, description ,imagename, id from table where     startdate <= CONVERT (date, SYSDATETIME())and endate >= CONVERT (date, SYSDATETIME())";

    SqlCommand command = new SqlCommand(querystring, connection);

    SqlDataAdapter daimages = new SqlDataAdapter(command);
    DataTable dt = new DataTable();
    daimages.Fill(dt);
    Repeater1.DataSource = dt;

    Repeater1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:00:08.930

空格被编码为`%20`URL - 它是 URL 中的特殊字符。

代码正在做正确的事情。

# c - 解释 1 位位域的行为

> ID：10094766
> 
> 赞同：7
> 
> 时间：2012-04-10T18:58:42.870
> 
> 标签：c

```
#include<stdio.h>

int main()
{
    struct value{
       int bit1 : 1;
       int bit3 : 4;
       int bit4 : 4;
       }bit={1,2,2};
     printf("%d %d %d\n",bit.bit1,bit.bit3,bit.bit4);
     return 0;
} 
```

输出 ：

-1 2 2

请解释程序的输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T19:01:33.097

`bit1`是一个有符号的 1 位整数，它只能保存`-1`值`0`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T19:01:12.080

大概唯一奇怪的输出是第一个。

好吧，考虑一下 1 位[二进制补码](http://en.wikipedia.org/wiki/Twos-complement)整数可以表示的值的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T10:04:39.947

请注意结构中的以下语句：

诠释位1：1；--> 'int' 表示它是一个有符号整数。对于有符号整数，最左边的位将用作 +/- 符号。如果将 1 存储在 1 位字段中：最左边的位为 1，因此系统会将值视为负数。

系统使用 2 的补码方法来处理负值。

因此，存储的数据为 1。1 的 2 的补码也是 1（负数）。

因此 -1 被打印出来。

如果将 2 存储在 4 位字段中： 二进制 2：0010（最左边的位为 0，因此系统将其视为正值） 0010 为 2 因此打印 2。

# c - 在C中用2个字符包围一个字符串

> ID：10094767
> 
> 赞同：0
> 
> 时间：2012-04-10T18:58:44.020
> 
> 标签：c, string, append, strcat

我有一个从文件中读取的字符串数组。在某些时候，我需要取出一个元素，在 * 之前和 * 之后添加并将其放回同一个数组。

到目前为止，我已经设法在末尾添加了一个星号`strcat`。它正在正确打印出来。现在，我如何在开头添加一个？

```
//malloc for the array has been done when read from file
char **array;
int arraySize;
for (i=0;i<arraySize;i++){
  if (some_condition){
    //Add * chars
    array[i]=strcat(array[i],"*");
    printf("Element %s was marked",array[i]);
  }
 //prints for example *foo*
 } 
```

对不起，如果这个问题完全是愚蠢的，答案可能很明显。提前感谢您提供任何可能的答案！

**UPD**：数组malloc函数

```
void readd(FILE *file){
  size=0; /*local size */
  char line[BUFSIZ]; /* Local array for a single word read */

  while ((fgets(line,sizeof(line),file))!=NULL){
    /* trim newline char */
    if (line[strlen(line)-1]=='\n')
    line[strlen(line)-1] = '\0';

    array=(char**)realloc(array,(size+1)*sizeof(char *));
    array[size++]=strdup(line);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:13:56.610

如果原始`array[i]`元素有足够的空间容纳附加字符：

```
int len = strlen(array[i]);
memmove(array[i] + 1, array[i], len); // memmove() allows overlap btwn src & dest
array[i][0] = '*';
array[i][len+2] = '\0';
array[i][len+1] = '*' 
```

* * *

**编辑：**既然你已经更新了你的问题，我会更新我的答案。:-)

首先，请注意，这样使用很危险`realloc()`：

```
array=(char**)realloc(array,(size+1)*sizeof(char *)); 
```

如果`realloc()`失败，则`array`重新分配给`NULL`然后原始指针丢失，孤立分配给它的内存。这更安全：

```
char **tmp = realloc(array,(size+1)*sizeof(char *));
if (tmp == NULL) {
 // Out of memory error
}
array = tmp; 
```

当然，如果您经常这样做，您不妨跟踪当前大小，并一次为另外十万个元素分配空间。

由于分配了各个字符串，因此`strdup()`您有两个选择：

*   为每个字符分配额外的 2 个字符，以防您需要添加星号。这不是不合理的，除非有数百万个字符串，或者系统内存受限。

*   在添加星号之前重新分配每个字符串，使用上面的代码片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:07:25.460

最简单的方法是使用双 strcat。

但是，你有没有想过这种东西的内存管理？你的字符串是如何保存在内存中的？

在这一行中，您丢失了指向原始字符串的指针：

```
array[i]=strcat(array[i],"*"); 
```

你对原始指针有另一个引用吗？也许你想先保存它，然后用相同的长度+2个字符重新分配，然后放第一个*，复制字符串，放最后一个*并删除原始指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:07:53.717

`array[i]`您可以将每个字符从后面开始复制到右侧（到更高的索引），然后用“*”替换第一个字符。

这假设您有足够的空间来容纳两个额外的星星。

如果没有，你有两个选择

*   声明/分配足够大的原始空间（至少两个更大）或
*   `malloc`一个足够大的区域，然后从索引 1 开始复制字符串并将星星放在适当的位置（索引 0 和索引`strlen(array[i])+1`）。不要忘记`array[i]`之后将指针重新分配到 malloc 的区域。

# asp.net - 微软似乎仍然存在 WebFarm 上的表单身份验证错误

> ID：10094772
> 
> 赞同：3
> 
> 时间：2012-04-10T18:59:17.560
> 
> 标签：asp.net, forms-authentication, web-farm

似乎在某些时候人们发现了一个问题，当服务器具有不同的补丁组合时，导致身份验证票证在 Webfarm 上被标记为无效。

不幸的是，即使网络服务器上有相同的补丁，似乎仍然存在问题。

**我的两台服务器：**

*   **有相同的补丁**
*   **具有相同的 machineKeys**

然而，当用户从场中的一个 Web 服务器转换到另一个 Web 服务器时，底层的 microsoft 代码会使令牌失效。这是事件日志条目：

```
Event code: 4005 
Event message: Forms authentication failed for the request. Reason: The ticket supplied was invalid. 
Event time: 4/10/2012 2:42:20 PM 
Event time (UTC): 4/10/2012 6:42:20 PM 
Event ID: 92eedee52ede49239fd063fe5609d858 
Event sequence: 2 
Event occurrence: 1 
Event detail code: 50201 

Application information: 
    Application domain: /LM/W3SVC/2000/ROOT-1-129785553216092727 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: C:\inetpub\wwwroot\testportal.mydomain.com\ 
    Machine name: WEB02 

Process information: 
    Process ID: 1428 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\testportal.mydomain.com 

Request information: 
    Request URL: http://testportal.mydomain.com/Interface.aspx 
    Request path: /Interface.aspx 
    User host address: ************* 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: IIS APPPOOL\testportal.mydomain.com 

Name to authenticate:  

Custom event details: 
```

我要么必须弄清楚这一点，要么将微软的身份验证写出我的系统（我真的没有时间去做）。

以下是相同地应用于两个服务器的修补程序，它们是：

基于 Windows Server 2008 R2 x64

KB981391,KB981392,KB977236,KB981111,KB977238,KB977239,KB981390,KB2305420,KB2386667,KB2393802,KB2425227,KB2475792,KB2476490,KB2478662,KB2479628,KB2482017,KB2484033,KB2485376,KB2487426,KB2488113,KB2492386,KB2503665,KB2505438,KB2506014,KB2506212, KB2506928,KB2507618,KB2507938,KB2508272,KB2509553,KB2510531,KB2511250,KB2511455,KB2515325,KB2518869,KB2522422,KB2524375,KB2529073,KB2530548,KB2533552,KB2533623,KB2534366,KB2536275,KB2536276,KB2539635,KB2541014,KB2544521,KB2544893,KB2545698,KB2547666, KB2552343,KB2555917,KB2556532,KB2560656,KB2563227,KB2564958,KB2567680,KB2570947,KB2572077,KB2584146,KB2585542,KB2588516,KB2598845,KB2603229,KB2607047,KB2607576,KB2608658,KB2618444,KB2618451,KB2620704,KB2620712,KB2621440,KB2631813,KB2632503,KB2633873, KB2633952,KB2636573,KB2639308,KB2639417,KB2640148,KB2641653,KB2641690,KB2643719,KB2644615,KB2645640,KB2647516,KB2647518,KB2654428,KB2656356,KB2660075,KB2660465,KB2665364,KB2667402,KB958488,KB976902,KB976932,KB982018

根据请求，这是我的 web.config 的身份验证部分：

```
 <authentication mode="Forms">
        <forms loginUrl="Login.aspx" name=".ASPXFORMSAUTH" cookieless="AutoDetect" timeout="120" slidingExpiration="true">
        </forms>
    </authentication> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:47:21.730

我想我终于解决了这个问题。我不确定为什么此更改可以解决问题，但我为解决此问题所做的是将 machineKey 定义直接放在我的应用程序的 web.config 文件中。显然，要么我不明白如何使用 IIS 管理器正确设置机器密钥，要么 IIS 管理器存在一些问题。

所以为了解决这个问题，我直接在我的 web.config 中放置了一个条目，看起来像这样：

```
<machineKey validation="SHA1" validationKey="-a-validation-key-" decryption="Auto"  decryptionKey="-a-decryption-key-"/> 
```

这篇文章让我走上了解决这个问题的正确道路：

[ASP.NET 4 重大更改](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770148 "ASP.NET 4 重大更改")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:25:55.240

好吧，我说得太早了。在整个过程中，我从服务器上删除了 .NET Framework 4，因为我们没有针对它进行开发，而且我看到有人提到 FW4 会导致身份验证问题。

在“解决”这个问题之后，我将 Framework 4 放回服务器并运行 Windows 更新，它为两台服务器添加了以下补丁：

*   XP、Server 2003、Vista、Windows 7、Server 2008、Server 2008 R2 for x64 上的 Microsoft .NET Framework 4 更新 (KB2600217)
*   适用于基于 x64 的系统的 Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008、Windows Server 2008 R2 上的 Microsoft .NET Framework 4 更新 (KB2533523)
*   适用于基于 x64 的系统的 Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008、Windows Server 2008 R2 上的 Microsoft .NET Framework 4 安全更新 (KB2487367)
*   适用于基于 x64 的系统的 Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008、Windows Server 2008 R2 上的 Microsoft .NET Framework 4 安全更新 (KB2518870)
*   XP、Server 2003、Vista、Windows 7、Server 2008、Server 2008 R2 for x64 上的 Microsoft .NET Framework 4 安全更新 (KB2656351)
*   XP、Server 2003、Vista、Windows 7、Server 2008、Server 2008 R2 for x64 上的 Microsoft .NET Framework 4 安全更新 (KB2572078)
*   XP、Server 2003、Vista、Windows 7、Server 2008、Server 2008 R2 for x64 上的 Microsoft .NET Framework 4 安全更新 (KB2633870)
*   适用于基于 x64 的系统的 Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008、Windows Server 2008 R2 上的 Microsoft .NET Framework 4 更新 (KB2468871)
*   XP、Server 2003、Vista、Windows 7、Server 2008、Server 2008 R2 for x64 上的 Microsoft .NET Framework 4 安全更新 (KB2656368)

由于我进行了这些更新，问题现在又回来了。另一个有趣的事情是，在这个过程中的某个地方，这些更新将解密密钥砍回了 48 个字节。我不确定它是砍掉了现有的还是创建了一个新的。我回去放了一个新生成的机器密钥和解密密钥，它*没有解决问题。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:44:40.750

好吧，在这个人在 asp.net 的帮助下，我想出了如何解决这个问题：

[asp.net 上的线程帮助我解决了这个问题。](http://forums.asp.net/p/1762166/4929951.aspx/1?p=True&t=634698454704761123)

我认为最终修复它的是重新生成验证和解密密钥。旧密钥肯定与这些服务器上加载的修补程序不兼容。

有趣的是，旧的和新的验证密钥都是 128 字节，但旧的解密密钥是 48 字节，新的是 64 字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:01:39.973

[当MS10-070](http://technet.microsoft.com/en-us/security/bulletin/MS10-070)（asp.net padding oracle 攻击）应用于某些服务器时，我已经看到了这种行为。此更新 [以某种方式] 更改了加密技术，使票证与同一场内未修补的服务器不兼容。

您能否验证您场中的所有服务器是否都应用了此更新？

# sorting - Spring JDBC template sorting

> ID：10094774
> 
> 赞同：0
> 
> 时间：2012-04-10T18:59:48.367
> 
> 标签：sorting, spring-mvc, jdbctemplate

I'm trying to implement sorting and pagination on server side in my spring mvc application.

The problem is that after call `JdbcTemplate.query()` method I get unsorted array list.

My query code:

```
List<Ingredient> ingredients = query("SELECT * FROM Ingredients ORDER BY ? ? LIMIT ?, ?",
                new Object[]{"title", "ASC", 0, 50},
                new IngredientsMapper()); 
```

My mapper code:

```
public class IngredientsMapper implements ParameterizedRowMapper {

    @Override
    public Ingredient mapRow(ResultSet rs, int rowNum) throws SQLException {
        Ingredient ingredient = new Ingredient();
        ingredient.setId(rs.getInt("IngredientID"));
        ingredient.setTitle(rs.getString("title"));
        ingredient.setCost(rs.getFloat("cost"));
        ingredient.setDescription(rs.getString("description"));
        ingredient.setUnits(rs.getString("units"));
        return ingredient;
    }
} 
```

What I'm doing wrong?

Thanks for any help. Have a good day!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:14:08.773

You can't use a parameter to refer to column values. See [this answer](https://stackoverflow.com/a/2857417/404536) for details.

# safari - -webkit-border-radius 与 -moz-border-radius 的行为不同

> ID：10094778
> 
> 赞同：1
> 
> 时间：2012-04-10T19:00:21.310
> 
> 标签：safari, css

我的网站在 Safari 和 Firefox 上的显示方式不同。我想让 CSS 在 Safari 上看起来一样。我知道我可以使用两个 div 框，一个用于轮廓，一个用于图像，但我喜欢在 Firefox 上我只需要一个，它会弯曲轮廓和图像。无论如何让Safari曲线轮廓和图像？

苹果浏览器：

![Safari 边界半径](../Images/317e9afcf79df452d628780c83ca21ce.png)

火狐：

![火狐边框raidus](../Images/d06defe4f295c5816bd46802e0646995.png)

`<img src="asset.jpg" class="example">`

`img.example { width: 250px; height: 250px; background: rgba(0, 0, 0, .6); padding: 18px; -moz-border-radius: 50px; -webkit-border-radius: 50px; border-radius: 50px; }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:15:40.100

这是 webkit 浏览器中的一个已知错误

看这个[例子](http://jsfiddle.net/jackdent/TdXGS/)

所以简而言之，是的，现在你必须将图像包装在一个 div 中。糟透了。

请参阅这些错误报告：

[http://code.google.com/p/chromium/issues/detail?id=82417](http://code.google.com/p/chromium/issues/detail?id=82417)
[https://bugs.webkit.org/show_bug.cgi?id=30475](https://bugs.webkit.org/show_bug.cgi?id=30475)

现在，将它包装在一个 div 中，[就像我在这里所做的那样](http://jsfiddle.net/jackdent/TdXGS/2/)

# html - Resizing and centering an image using CSS

> ID：10094780
> 
> 赞同：0
> 
> 时间：2012-04-10T19:00:25.370
> 
> 标签：html, css

My scenario:

*   I have an image of size 1900 x 1600 pixels.
*   I have a `div` of size 200 x 150 pixels.

I have resized the image using the following CSS:

```
max-width:300px;
max-height:300px; 
```

The height will be kept in proportion, so in this example it will be 252 px.

How can I center the image in the `div`? I mean something like:

```
background-position: center center; 
```

Is this sort of thing possible with CSS 2?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:02:29.483

You mean

```
background:url("test.png");
background-size: 300px auto;
background-position: center center; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:02:41.360

To center the DIV within an element, you would set a `width` and `margin` with the left and right margins set to auto:

`div { margin: 0 auto; width: 300px; }`

# javascript - 为什么我可以在 javascript 中访问 asp:TextBox，但不能访问 asp:Label？

> ID：10094782
> 
> 赞同：3
> 
> 时间：2012-04-10T19:00:35.277
> 
> 标签：javascript, asp.net

这是我在说什么的简单演示

头标签中的js：

```
 function changeTxt(frm){
    var lblo = frm.txt1;
    lblo.value = "hey guy";

    var lbl = frm.lblStatus;
    lbl.innerHTML = "hello world";
  } 
```

aspx/html 标记：

```
<asp:Label ID="lblStatus" runat="server"></asp:Label>
<asp:TextBox ID="txt1" runat="server"></asp:TextBox>

<button onclick="changeTxt(this.form);">go</button> 
```

js 找到`txt1`（`input`html 元素）并更改值。但是为什么找不到`lblStatus`（`span`html 元素）？它作为`undefined`. 它们都是相同的形式。

**编辑：**问题似乎是`span`在 js 中访问节点。我猜你不能像我一样通过表单对象访问它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:05:07.290

`asp:Label`呈现为跨度或标签，因此`value`不是更改文本的正确方法。你需要使用类似这样的东西`innerHTML`：

```
function changeTxt(frm){
    var lblo = document.getElementById('<%: txt1.ClientID %>');
    lblo.value = "hey guy";

    var lbl = document.getElementById('<%: lblStatus.ClientID %>');
    lbl.innerHTML = "hello world";
} 
```

您还应该使用`getElementById`来获取对象。

使用. [_](http://en.wikipedia.org/wiki/Cross-site_scripting) _`innerHTML`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:05:54.530

`ASP:Label`不呈现表单元素。它呈现一个`span`or `label`。您必须使用 innerHTML 访问该值。确保使用 ClientID，因为如果标签控件不直接在页面中或使用母版页，ASP.NET 运行时可能会呈现不同的 ID。

```
var lbl = document.getElementById("<%= lblStatus.ClientID %>");
lbl.innerHTML = "hello world"; 
```

# iphone - 建模一对多关系核心数据

> ID：10094784
> 
> 赞同：0
> 
> 时间：2012-04-10T19:00:46.683
> 
> 标签：iphone, objective-c, ios, core-data

我有两个实体：`Folder`和`Picture`. 一个`Folder`可以有很多`Pictures`，一个`Picture`可以属于很多`Folders`。但是，有一个`Folder`叫做`All`，它包含所有`pictures`属于 any `folder`。所以`Folder`实体与 有一对多关系`Picture`，因此每个`Folder`都有一个`NSSet`of `Pictures`，并且每个`Picture`都有一个`NSSet`of `Folders`。`All` `Folder`包含所有`Pictures`，但我不希望任何人将`Picture`其`All` `Folder`作为其中之一`Folders`。

目前以我的模型设置方式，如果我将 a 添加`Picture`到`All Folder`，`All Folder`会自动添加到`Picture NSSet`of `Folders`，这是我不想要的。我认为发生这种情况是因为我将这两种关系视为彼此的倒数。但是如果我不选择反向选项，我的图片实体开始只支持一个`Folder`而不是多个。

问题是：我如何对我的实体进行建模，以便 A`Folder`可以有 many `Pictures`，并且`Pictures`可以有 many `Folders`，但是如果我将 a 添加`Picture`到 a `Folder`，它不一定意味着将其`Folder`添加到`Picture`.

这是我目前的模型：

```
Picture: 
Relationship: Folder
Destination: Folder
Inverse: Picture
Plural: To-Many Relationship

Folder:
Relationship: Picture
Destination: Picture
Inverse: Folder
Plural: To-Many Relationship 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:13:31.250

为什么你需要一个 All 文件夹？“All”是它自己的实体，还是具有某种 All 标识符的文件夹实体？

无论哪种方式，如果您只想抓取任何文件夹中的所有图片，您可以通过获取请求轻松完成。无需使用额外的实体或关系来破坏您的对象图。

# grails - 如何让 IntelliJ IDEA 识别 Grails 数据库迁移插件的 DSL？

> ID：10094793
> 
> 赞同：3
> 
> 时间：2012-04-10T19:01:27.293
> 
> 标签：grails, intellij-idea, dsl, grails-plugin, liquibase

使用神话般的[db migration Grails 插件，将](http://grails-plugins.github.com/grails-database-migration/docs/manual/index.html)[Liquibase](http://www.liquibase.org/)数据库迁移捆绑到 Grails 项目中非常容易，这样我的模式可以与我的应用程序代码一起进行版本控制，并提供一个漂亮、干净、*易于编写脚本*的升级/降级机制。

唯一的困难是 IntelliJ IDEA 对数据库迁移插件使用的 DSL 一无所知！我知道 IntelliJ IDEA[可以处理](http://confluence.jetbrains.net/display/GRVY/Scripting+IDE+for+DSL+awareness)这样的专用 DSL，但我似乎无法在任何地方找到用于 db 迁移插件的 gDSL 描述符。

大多数 DSL 直接来自 Liquibase XML 模式，并添加了一些额外的 Grails 优点，以便您可以在迁移期间运行任意 Groovy 代码。

有谁知道是否有用于 Grails 数据库迁移插件的 IntelliJ IDEA 的 gDSL 描述符文件，或者我可以在哪里找到其他人制作的文件，或者我可能如何自己制作一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:07:28.383

IntelliJ 允许[为自定义语言创建插件，](http://confluence.jetbrains.net/display/IDEADEV/Developing+Custom+Language+Plugins+for+IntelliJ+IDEA)这是人们需要专门为 liquibase DSL 做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:05:46.020

这可能不是您想要的，但我所做的是在 changelog XML 文件中写入特定于 liquibase 的位。这样我就得到了 liquibase XML 模式提供的自动完成功能。这在 intellij 想法中被证明是非常顺利的。

然后，如果您愿意，有一个命令：dbm-changelog-to-groovy，它将您的 xml 转换为 groovy。

但是，我不打扰第二步。我在 xml 文件中保留与 liquibase 相关的更改，并在 groovy 文件中保留自定义 groovy 脚本，例如复杂的数据迁移任务，我对此非常满意。

# php - PHP: If/Else Statement: Conditional Terms

> ID：10094808
> 
> 赞同：2
> 
> 时间：2012-04-10T19:02:39.927
> 
> 标签：php, if-statement

I have a script - where a user can view data from a text file, choose a line number, and then that line number (and corresponding text from the text file) will appear on another page.

The script from the 2nd page, copied below, works. But I want to add in an if/else statement (or something else is ok), which states something like: IF the line number exists (and it can be accessed/displayed) - here it is. ELSE, that number doesn't exist try again. //webpage 1 Show:

```
//webpage 2 showtest.php
<?php
$searchfor = $_GET['keyword2'];

$lines = file('users.txt');
$l_count = count($lines);
for($x = 0; $x< $l_count; $x++)
{
}

echo $lines[$searchfor];
?> 
```

WHAT I AM AIMING FOR

```
$lines = file('users.txt');
$l_count = count($lines);
for($x = 0; $x< $l_count; $x++)
{
}
if(....................){

echo "Match found:<br />";
echo $lines[$searchfor];}

else{(...................)
echo "This is not a valid term";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:10:30.953

Using the `file` function stores everything in an array and you could therefore just search through the array using the `in_array` function. By adding the `FILE_IGNORE_NEW_LINES` a newline at the end of each array element. Experiment with adding this.

```
<?php
$file = file('users.txt',FILE_IGNORE_NEW_LINES);
if(in_array('string',$file))
{
   echo 'string exists';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:09:18.430

`if(array_key_exists($searchedfor,$lines)){...}else{...}`

Should work for you

# spring - 如何更改应用程序上下文

> ID：10094811
> 
> 赞同：0
> 
> 时间：2012-04-10T19:02:41.583
> 
> 标签：spring, applicationcontext

首先，我不得不说我是春天的新手，我的第一个任务是更改应用程序上下文。我认为它应该放在 *.xml 文件中，但找不到该字段。我也用谷歌搜索过，但没有找到任何解决方案。可能是可怜的搜索者:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:10:07.813

```
ApplicationContext context = new ClassPathXmlApplicationContext("context.xml"); 
```

它将从`context.xml`文件加载上下文（context.xml 应该存在于类路径中）。
您可以通过将所需的 XML 文件作为参数传递给构造函数来创建新的 Applicationcontext。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:36:10.623

没有太多信息，但是如果您正在使用 Spring 开发 Web 应用程序，您可以在以下内容中设置上下文`web.xml`：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param> 
```

# r - 再次for循环

> ID：10094812
> 
> 赞同：-5
> 
> 时间：2012-04-10T19:02:43.440
> 
> 标签：r

我有以下数据：

```
df1 <- data.frame(chrom=c("chr1","chr2","chr5"),
    start=c(10,20,30), end=c(100,200,300), stringsAsFactors=FALSE)

df2 <- data.frame(chrom=c("chr1","chr4","chr2","chr1"),
    start=c(15,500,150,200), end=c(75,1000,300,300), stringsAsFactors=FALSE) 
```

我想做以下事情：

```
for(i in 1:nrow(df2)) {
    # only if this condition is true (i.e. if there is overlap)
    if((df1$start <= df2$start && df1$end >= df2$start) ||
       (df1$start >= df2$start && df1$start <= df2$end)) {
        x <- df2[which(df2$chrom %in% df1$chrom),]
    }
} 
```

答案应该是：

```
df3 <- data.frame(chrom=c("chr1", "chr2"), start=c(15,150),
    end=c(75,300), stringsAsFactors=FALSE) 
```

对不起所有的混乱。

人们对我的查询非常有耐心，这是一次非常有帮助和学习的经历。但是我试图了解循环是如何工作的，我越想越困惑。例如：

```
for(i in 1:nrow(df2)) {
    x <- df2[which(df2$chrom %in% df1$chrom),]
} 
```

与以下内容完全相同：

```
x <- df2[which(df2$chrom %in% df1$chrom),] 
```

所以你甚至不需要循环。这怎么可能？我猜`which`是在为你做循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:25:08.380

你可以走得更远：

```
df2[df2$chrom %in% df1$chrom,] 
```

由于 R 是“矢量化的”，因此您将从 df2 返回与您给出的条件匹配的行。把它分成两部分：

```
> df2$chrom %in% df1$chrom  
[1] TRUE FALSE  TRUE  TRUE 
```

也就是说，第 1、3 和 4 行满足这个条件。然后我们`df2`使用该布尔向量进行子集化。R 只会返回你告诉它的行`TRUE`。

```
> df2[c(TRUE, FALSE, TRUE, TRUE),]
  chrom start end
1  chr1    15  75
3  chr2   150 300
4  chr1   200 300
> 
```

这有帮助吗？

根据评论编辑：

非常非 R 的方式将嵌套 for 循环......

```
output <- data.frame()
for(i in 1:nrow(df2)) {
  foo <- NULL
  for(j in 1:nrow(df1)) {
    if(df1$chrom[j]==df2$chrom[i]) {
      foo <- df2[i,]
    }
  }
  output <- rbind(output, foo)
} 
```

然而，这正是在 R 中不应该做的事情......

# encryption - Big-O 表示法：加密算法

> ID：10094814
> 
> 赞同：5
> 
> 时间：2012-04-10T19:02:50.517
> 
> 标签：encryption, cryptography, rsa, big-o, des

我目前正在完成一篇关于通过各种密码算法加密数据的论文。

我花了很多时间阅读期刊和论文，但还没有找到任何关于其性能复杂性的记录。

有人知道以下算法的 Big-O 复杂性吗？

*   RSA
*   DES
*   三重 DES（我希望与 DES 具有相同的顺序）
*   AES
*   河豚

先感谢您; 如果您能提供一个有信誉且可引用的来源的链接，我们将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T19:14:34.050

部分答案：RSA 实验室提供了此分析，[从 rsa.com 存档](https://web.archive.org/web/20071112103441/http://www.rsa.com/rsalabs/node.asp?id=2215)，比较 RSA 操作与 DES。

> **RSA算法有多快？**
> 
> “RSA 操作”，无论是加密、解密、签名还是验证，本质上都是模幂运算。该计算由一系列模乘法执行。
> 
> 在实际应用中，通常选择一个小的公共指数作为公钥。事实上，整个用户组都可以使用相同的公共指数，每个指数具有不同的模数。（当公共指数固定时，模数的主要因素有一些限制。）这使得加密比解密更快，验证比签名更快。使用用于实现 RSA 算法的典型模幂算法， **公钥操作需要 O(k^2) 步**，**私钥操作需要 O(k^3)**步，**密钥生成需要 O(k^4) 步，其中k 是模数中的位数**. “快速乘法”技术，例如基于快速傅里叶变换 (FFT) 的方法，需要渐近较少的步骤。然而，在实践中，它们并不常见，因为它们的软件复杂性更高，而且对于典型的密钥大小，它们实际上可能更慢。
> 
> RSA 算法的许多商用软件和硬件实现的速度和效率正在迅速提高；有关最新数据，请参见[http://www.rsasecurity.com/](http://www.rsasecurity.com/)。
> 
> 相比之下，DES（见第 3.2 节）和其他分组密码比 RSA 算法快得多。DES 通常在软件中至少快 100 倍，在硬件中快 1,000 到 10,000 倍，具体取决于实现。由于需求量大，RSA 算法的实现可能会在未来几年稍微缩小差距，但分组密码也会变得更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T23:19:30.670

One thing to note (depending upon if you are coding to your dissertation): most real-world implementations of RSA will actually use RSA to do an AES key exchange. So the O(k^2) and O(k^3) operations for encrypt/decrypt, respectively, are only in terms of encrypting the AES key. AES being 100-10K times faster in software/hardware does the actual block cipher for the data being exchanged--this way, you get to take advantage of PKI (via RSA) w/o having to pay the inordinate computational price.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:03:34.937

一个块的对称密码复杂度为 O(1)。

只留下您列表中的 RSA，并且答案非常依赖于实现，这取决于大整数乘法的实现程度、指数的选择等......

# javascript - jquerymobile 动态更改按钮问题的文本

> ID：10094816
> 
> 赞同：8
> 
> 时间：2012-04-10T19:02:54.607
> 
> 标签：javascript, jquery, button, jquery-mobile

我正在尝试动态更改按钮的文本。但是按钮的用户界面会混乱。知道为什么吗？[http://jsfiddle.net/L6xRZ/](http://jsfiddle.net/L6xRZ/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T19:39:21.980

jQuery Mobile 进入并更改您的 HTML 以使一切按预期工作。因此，当您更改按钮内的时间时，您正在撤消 jQuery Mobile 为您保留的内容。

您可以进行的最简单的更改是在您更新按钮文本时将选择器从“#svbutton”更改为以下行（[此处为 fiddler](http://jsfiddle.net/sbNpt/)）：

```
$('#svbutton .ui-btn-text').text(currentTimeString); 
```

您应该在 Page Scripting 的文档页面上阅读更多关于 jQuery Mobile 的工作原理以及[如何动态使用它的信息](http://jquerymobile.com/demos/1.1.0-rc.2/docs/pages/page-scripting.html)。

# c++ - 将键盘敲击限制为单个进程

> ID：10094817
> 
> 赞同：3
> 
> 时间：2012-04-10T19:02:55.900
> 
> 标签：c++, windows, directx

我正在运行一款游戏，我试图在游戏中显示一个叠加层；用户可以在其中输入他的详细信息。这里的问题是用户输入的击键可用于游戏源，我想将击键限制为仅覆盖。
我正在使用本机 c++ dll 来显示使用 CEF 呈现内容的覆盖。
有没有办法以安全的方式做这件事，这样用户的详细信息就不会暴露给任何其他程序/进程。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:14:57.470

您可以尝试使用[SetWindowHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)。通过这种方式，您可以挂钩发送到进程的所有键盘消息并完全停止传递它们（例如，在您自己的应用程序中处理它们而无需焦点）。这是一种非常强大的方式，但某些复制保护可能不喜欢它。

正常的步骤是：

*   创建一个 DLL（必须是因为您需要将其加载到另一个进程/地址空间），它挂钩 Windows 消息并进行第一次过滤。通常你使用一些 IPC 机制来获得你自己的进程的形成。如果您只挂钩鼠标消息，您可以使用 Windows 消息将信息发送到您自己的一条隐藏消息。如果您不希望消息到达，您可以将链停在那里。

*   当 IPC 呼叫到达您自己的窗口时；处理它，就好像您自己收到键盘消息一样。尽量注意焦点等。

以这种方式唯一无法捕捉到的是，如果您尝试更改的应用程序行为依赖于[GetAsyncKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx) ()。在这种情况下，您唯一的选择是使用将您的 DLL 注入其他地址空间并挂钩调用本身，但这是更高级别的黑客攻击。

一句话忠告：开发windows挂钩软件时：常存，常存！如果你犯了一个错误，你可能会一次崩溃一大堆应用程序......

# visual-studio - 有没有办法防止代码合同使 Visual Studio 2010 SP1 崩溃？

> ID：10094821
> 
> 赞同：1
> 
> 时间：2012-04-10T19:03:04.750
> 
> 标签：visual-studio, visual-studio-2010, code-contracts

我正在使用 Visual Studio 2010 SP1 Ultimate，而我的一些同事正在使用 Visual Studio 2010 SP1 Professional。我们都[安装了代码合约](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)。鉴于以下情况，是否有防止 Visual Studio 崩溃的方法？

我们发现 3 个 Visual Studio Professional 安装中有 2 个在以下情况下崩溃：

> 契约是在一个由 WebActivator “引导”的类中定义的。Visual Studio 在使用 razor 语法 (*.cshtml) 打开 MVC 3 视图时崩溃

我们发现 Visual Studio Ultimate 在以下情况下会崩溃：

> 我们已经定义了与抽象具体合约类相关的接口合约。注释掉具体类但将属性保留在关联接口上然后编译时，Visual Studio 崩溃。

# java - 如何迭代地将组件添加到 Swing GroupLayout ParallelGroup？

> ID：10094825
> 
> 赞同：6
> 
> 时间：2012-04-10T19:03:15.777
> 
> 标签：java, swing, grouplayout

有没有办法遍历组件列表并将它们添加到 Swing GroupLayout 中的 ParallelGroup？

这似乎很困难，因为没有办法获得 ParallelGroup。

这是生成组件列表的代码（在本例中为 JCheckBoxes）。

```
List<JCheckBox> listCustomiseJCB = new ArrayList<>();
    for (int w = 0; w < initialCMTableColumns.size(); w++) {
        String heading = (String)initialCMTableColumns.get(w).getHeaderValue();
        listCustomiseJCB.add(new JCheckBox(heading));
    } 
```

List 正在工作，但我如何遍历 List 以将每个 JCheckbox 插入到 GroupLayout 的 ParallelGroup 中？例如，下面的代码将无法编译。

```
 GroupLayout gl = new GroupLayout(jpnlCustomise);
    jpnlCustomise.setLayout(gl);
    gl.setAutoCreateContainerGaps(true);
    gl.setAutoCreateGaps(true);

    GroupLayout.SequentialGroup hGroup = gl.createSequentialGroup();

    hGroup
            .addComponent(jbtnApply);
    hGroup.addGroup(gl.createParallelGroup(GroupLayout.Alignment.CENTER)
            // ERRORS BEGIN HERE
            { for (JCheckBox c: listCustomiseJCB) {
            .addComponent(c);
            }});
            // ERRORS END HERE
    hGroup
            .addComponent(jbtnCancel);

    gl.setHorizontalGroup(hGroup); 
```

或者，是否有人知道获取 ParallelGroup 的方法，以便我可以在独立的 for 循环中迭代地将组件添加到该组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:15:06.377

我可以看到您正在尝试做什么以及您的困惑。您只能将匿名类语法与 new 运算符一起使用。IE

```
new LinkedList<String>() {
  {
     add("bar");
  }
}; 
```

但是 ParallelGroup 实例只能使用工厂方法 createParallelGroup(...) 创建。

您必须使用对并行组的临时引用：

```
ParallelGroup pGroup = gl
        .createParallelGroup(GroupLayout.Alignment.CENTER);
hGroup.addGroup(pGroup);
for (JCheckBox c : listCustomiseJCB) {
    pGroup.addComponent(c);
} 
```

# android - 无法从远程数据库填充微调器

> ID：10094826
> 
> 赞同：0
> 
> 时间：2012-04-10T19:03:21.380
> 
> 标签：android

另一个Android初学者在这里！

好的，我在使用 Toast 帮助我检查错误时感到沮丧。我收到 403 禁止错误，我不知道是什么原因造成的。url 是正确的，因为我的另一个函数从数据库返回数据。

```
public class FillKeg extends Activity {

    Spinner spinBeerList;
    ArrayList<String> BeerList;
    ArrayAdapter<String> adapter;

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fillkeg);
        spinBeerList = (Spinner)findViewById(R.id.spinBeerList);
        BeerList = new ArrayList<String>();
        new getBeerList().execute("http://*****/kegdroid/getBeerList.php");
        adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, BeerList);    
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinBeerList.setAdapter(adapter);
    }

    private class getBeerList extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... urls) {
            //http post
            for (String url : urls) {
                DefaultHttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                try{
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");

                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                }
                catch(Exception e){
                    Log.e("log_tag", "Error in http connection" + e.toString());
                }
            }
            return result;
        }

        protected void onPostExecute(String result){
            try{
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                for(int i = 0; i < jArray.length(); i++){
                    json_data = jArray.getJSONObject(i);
                    BeerList.add(json_data.getString("ContentsName"));
                }    
            }
            catch(JSONException ex){
                ex.printStackTrace();
            } 
            catch (ParseException ex) {
                ex.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:56:21.573

您无需调用即可更新您的`ArrayList`支持。尝试在.`Adapter``notifyDataSetChanged``adapter.notifyDataSetChanged();``onPostExecute`

或者，您可以调用`adapter.add(json_data.getString("ContentsName"));`来代替类似的调用，`BeerList`并且`Spinner`应该自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:06:04.140

我对此感到非常愚蠢，但我的错误源于 Apache 配置而不是应用程序代码。我的 WAMP 安装的最新 Apache 更新拒绝了对我的网络 IP 的调用访问。

非常感谢 OcuS 和 Brian Cooley 帮助解决我的代码的其他方面！

# fckeditor - 在页面加载之前未定义 FCKEditorAPI

> ID：10094833
> 
> 赞同：0
> 
> 时间：2012-04-10T19:04:15.497
> 
> 标签：fckeditor

我正在尝试使用

```
alert(FCKeditorAPI.GetInstance("FCKeditor1").GetXHTML()); 
```

在萤火虫输出控制台并获得参考“FCKeditorAPI 未定义”。你能告诉我如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:03:52.977

由于您的帖子是最新的，我想您使用的是 FCKeditor 版本 3。

如果是这样，要获取编辑器实例，您应该使用：

```
CKEDITOR.instances["FCKeditor1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:04:39.513

试试这个，通过将它绑定到某个事件

```
if( typeof( FCKeditorAPI ) !== "undefined" ) 
  FCKeditorAPI.GetInstance("FCKeditor1").GetXHTML() 
```

# linux - 如何将 Linux 进程状态分类为正在运行、可运行、不可运行或无效？

> ID：10094837
> 
> 赞同：3
> 
> 时间：2012-04-10T19:04:34.790
> 
> 标签：linux, process

我需要对以下进程状态进行分类（从 /proc/[PID]/status 获得）

*   R（运行）
*   S（睡觉）
*   D（磁盘睡眠）
*   T（停止）
*   T（跟踪停止）
*   Z（僵尸）
*   X（死）

作为

*   运行（1），
*   runnable(2), - 等待资源（CPU、内存、IO）
*   不可运行（3）， - 已加载但等待事件
    或
*   无效（4） - 未加载

我最初的猜测：

```
1:R (running)
2:S (sleeping)
3:D (disk sleep)
3:T (stopped)
3:T (tracing stop)
4:Z (zombie)
4:X (dead) 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:24:52.373

从 fs/proc/array.c：

```
static const char * const task_state_array[] = {
        "R (running)",          /*   0 */
        "S (sleeping)",         /*   1 */
        "D (disk sleep)",       /*   2 */
        "T (stopped)",          /*   4 */
        "t (tracing stop)",     /*   8 */
        "Z (zombie)",           /*  16 */
        "X (dead)",             /*  32 */
        "x (dead)",             /*  64 */
        "K (wakekill)",         /* 128 */       
        "W (waking)",           /* 256 */
}; 
```

# perfmon - Perfmon 不会基于自定义模板创建新的数据收集器集（Win7 & WinServer 2008）

> ID：10094839
> 
> 赞同：1
> 
> 时间：2012-04-10T19:04:44.773
> 
> 标签：perfmon, performancecounter

我正在尝试根据我已经创建的 XML 模板文件（来自 PAL）创建一个新的数据收集器集。我以前能够做到。然后，我想使用带有“logman import PAL -xml”C:\sqlserver.xml“”的 logman 来自动化它，这不起作用，说“参数不正确”。我对它不起作用很好，直到我发现我不能再通过 perfmon 创建它。

问题正是这里描述的方式：[Perfmon can't create data collector set on Windows 7 x64](https://stackoverflow.com/questions/4939404/perfmon-cant-create-data-collector-set-on-windows-7-x64)。我右键单击用户定义文件夹中的“新建-> 数据收集器集”，我看到向导对话框出现。浏览并选择我的 xml 文件后，“下一步”和“完成”按钮被禁用，列表视图变为空（这 3 个默认值消失），我唯一能做的就是再次点击浏览按钮并选择不同的归档或取消。但是，与我链接的那个人不同，该注册表项在发生这种情况的任何机器上都不存在。

我在我的 Windows 7 机器以及两台装有 Windows Server 2008 SP2 的 VM 上执行了此操作

# .net - 将字符串数组绑定到 datagridview 的列

> ID：10094847
> 
> 赞同：0
> 
> 时间：2012-04-10T19:05:03.450
> 
> 标签：.net, winforms, datagridview, datatable

我正在设计一个带有datagridview的winform。
我正在为该 datagridview 分配一个数据表。

```
DataTable dt = new DataTable();
dt.Columns.Add("items", typeof(string[]));
dt.Columns.Add("dateSold", typeof(string));

for (int i = 0; i < 6; i++)
{
    dt.Rows.Add(dt.NewRow());
    dt.Rows[i]["items"] = new string[] { "pencil" + i, "sharpner" + i };
    dt.Rows[i]["dateSold"] = "0" + i + "/0" + i + "/0" + i;
}
dataGridView1.DataSource = dt; 
```

列项是一个字符串数组。我想在网格的一个列中显示这个数组。但是通过简单地将数据表分配为 datagridview 的数据源并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:45:22.247

您使用的语法有点奇怪。有一些重载允许您添加新行并同时设置一个值。

此外，您不能将字符串数组作为单元格的字段。您可以创建一个自定义类，并将它们的列表绑定到 DataGridView，而不是使用 DataTable。这样，您可以拥有一个底层字段，它是一个字符串数组，然后拥有一个公共属性，可以根据需要对其进行格式化，然后将其显示在 DataGridView 中。

以下是如何解决此问题的示例：

```
Imports System.ComponentModel

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim sales As New BindingList(Of SaleTransaction)

        For i As Integer = 1 To 6
            sales.Add(New SaleTransaction(i))
        Next

        ' None of this is necessary since the DGV will automatically read the public properties.. '

        DataGridView1.AutoGenerateColumns = False

        Dim itemsColumn As New DataGridViewTextBoxColumn

        itemsColumn.HeaderText = "Items"
        itemsColumn.ValueType = GetType(String)
        itemsColumn.DataPropertyName = "Items"

        DataGridView1.Columns.Add(itemsColumn)

        Dim dateColumn As New DataGridViewTextBoxColumn

        dateColumn.HeaderText = "Date Sold"
        dateColumn.ValueType = GetType(String)
        dateColumn.DataPropertyName = "DateSold"

        DataGridView1.Columns.Add(dateColumn)

        DataGridView1.DataSource = sales

    End Sub

    Public Class SaleTransaction
        Private _items As List(Of String)

        Public ReadOnly Property Items As String
            Get
                Return String.Join(", ", _items)
            End Get
        End Property

        Public Property DateSold As Date

        Public Sub New(ByVal itemNumber As Integer)
            Me._items = New List(Of String) From {"Pencil" & itemNumber, "Sharpner" & itemNumber}
            Me.DateSold = Date.Parse(String.Format("0{0}/0{0}/0{0}", itemNumber))
        End Sub

    End Class

End Class 
```

# php - 我可以在不自动转义 $url 的情况下使用 simplexml_load_file($url) 吗？

> ID：10094858
> 
> 赞同：3
> 
> 时间：2012-04-10T19:05:53.217
> 
> 标签：php, xml, url

我正在尝试使用 simplexml_load_file($url)

```
$url = "http://www.example.com/dir/file.php?id=test&output=xml"; 
```

现在，不幸的是 simplexml_load_file() 会自动转义所有 & 符号并将它们替换为 "& amp;"s - 这反过来会破坏 file.php，因为由于某些奇怪的原因它无法处理 "&" 但只有普通的＆符号。

是否可以在不转义 URL 的情况下以某种方式加载文件，以便我保留常规的 & 而不是“& amp;”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:25:53.020

正确的方法是：

```
$xml = simple_xml_load_file(file_get_contents("http://www.example.com/dir/file.php?id=test&output=xml")); 
```

**编辑：**

我试过以下代码：

```
$xml = new SimpleXMLElement(file_get_contents('http://www.example.com/dir/file.php?id=test&output=xml')); 
```

该测试针对我们的 XML API。我已经用嗅探器检查了请求。请求中没有 html 特殊字符，也没有其他编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:17:27.403

或[file()-function](http://dk2.php.net/manual/en/function.file.php)，如果您希望将数据存储到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T21:21:05.720

我发现这有效：

```
$xml = simplexml_load_string( file_get_contents( 'http://my.url.com' ) ); 
```

# asp.net-mvc - 如何在 _Layout 页面上设置变量？

> ID：10094861
> 
> 赞同：12
> 
> 时间：2012-04-10T19:05:56.400
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个视图，我想使用布局页面。在布局页面中，我想要一个条件横幅，其中一些视图将打开/关闭。只是想知道我怎么能做到这一点？

我在 _Layout.cshtml 页面中有这个...

```
@if (ShowBanner){

   <h1>banner</h1>

} 
```

我想知道如何从我的 MVC 视图页面打开/关闭它？或者这是否是正确的做法？我的意思是，如果我在视图页面中声明该变量，主人肯定不知道吗？两者如何通过c#进行通信？我使用 Viewbag 吗？而不是。

我知道表单都是关于引用页面或主成员的，只是似乎无法用 MVC 看到它......

非常感谢任何帮助...

谢谢皮特

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T19:44:58.193

我和你在一起，Exitos：我`ViewBag`也避免使用。除了愚蠢的名字，我不喜欢随之而来的弱类型。有一个解决方案，但它有点牵涉，所以请耐心等待。

首先，创建一个类来存储要传递给布局的“显示提示”。我创造性地称这个类为“DisplayHints”：

```
public class DisplayHints {
  // anything that you want passed from a view to the layout goes here
  public bool ShowBanner { get; set; }
} 
```

然后，创建一个派生自它的类，`WebViewPage<T>`这将是您的视图的新基类。请注意我们如何`DisplayHints`存储一个名为的属性`ViewData`（控制器、视图和布局都可以使用该属性）：

```
public abstract class MyViewPage<T> : WebViewPage<T> {
  public DisplayHints DisplayHints {
    get {
      if( !ViewData.ContainsKey("DisplayHints") )
        ViewData["DisplayHints"] = new DisplayHints();
      return (DisplayHints)ViewData["DisplayHints"];
    }
  }
} 
```

正如下面的评论者指出的那样，`ViewData`是弱类型的，就像`ViewBag`. 但是，我没有办法避免在/中存储*一些东西*；这只是将弱类型变量的数量减少到一个。完成此操作后，您可以根据需要存储尽可能多的强类型信息。`ViewData``ViewBag``DisplayHints`

现在您已经有了视图的基类，在 中`Web.config`，我们需要告诉 MVC 使用您的自定义基类：

```
<pages pageBaseType="MyNamespace.Views.MyViewPage"> 
```

这听起来很麻烦，但是您为所有这些工作获得了一些重要的功能。现在在您的视图中，您可以设置任何您想要的显示提示，如下所示：

```
@{ DisplayHints.ShowBanner = true; } 
```

在您的布局中，您可以轻松访问它：

```
@if( DisplayHints.ShowBanner ) {
  <div>My banner....</div>
} 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:09:09.493

为您的布局创建模型并不是一个好主意，因为它会强制所有视图使用该模型。但是，您可以将该类型的信息放入 ViewBag 中，并将值填充到您的控制器基础之一的构造函数中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T19:41:20.993

您可以在布局中定义一个部分，然后如果您的视图负责“填充”该部分......您的视图可以将 HTML 放在该部分中。

在这里，您可以看到有关使用 SECTIONS 的详细分步教程：

[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# android - 带有onTabChangedListener的Android tabhost没有触发

> ID：10094862
> 
> 赞同：0
> 
> 时间：2012-04-10T19:05:59.737
> 
> 标签：android, user-interface, tabs

我有一个 tabhost，我需要在其中使用 onTabChanged 侦听器，但它不会触发。我有 2 个选项卡，每个选项卡都使用一个活动。有人说这是因为它们都使用活动，一旦它们启动，选项卡事件就不会再次被调用。是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:23:54.130

如果它们在焦点上，它们可能不会开火。我们可以看到一些代码来确定吗？

# jquery - 到达另一个具有共同祖父母作为当前节点的节点的更好方法是什么？

> ID：10094872
> 
> 赞同：4
> 
> 时间：2012-04-10T19:06:49.893
> 
> 标签：jquery, jquery-selectors, jquery-traversing, jquery-filter

```
<tr>
    <th scope="row">
        <span id="home_location_indicator">(Home)</span>
    </th>
    <td>
        <span class="postal_code_display">...</span>
    </td>
    <td><input value="1" name="location_select" type="radio" /></td>
</tr> 
```

说，我有一个`<table>`包含一对`<tr>`像上面那样的。在 中`<tr>`，只有一个有`<span id="home_location_indicator">(Home)</span>`。

我正在尝试确定检索属于包含的输入*值*的方法。`name="location_select"``<tr>``<span id="home_location_indicator">`

以下是我能想到的两种方法：

1.  `$("tr").has("#home_location_indicator").find('input[name="location_select"]').val()`
2.  `$("#home_location_indicator").parents("tr").find('input[name="location_select"]').val()`

哪个是更好的方法？为什么？或者它甚至重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:10:22.957

您的第二种方法要好得多，因为它会缩小从 ID 开始的遍历范围并从那里遍历。请参见下文，对您所拥有的内容进行少量修改，

**编辑：**使用`.closest`优于`.parents`->[证明](http://jsperf.com/closest-vs-parents)

```
$("#home_location_indicator")
     .closest("tr")
     .find(':radio[name="location_select"]').val() 
```

在`.has("#home_location_indicator")`您的第一种方法中没有多大意义，因为您正在寻找一个 ID。如果您想获得一个 ID，请使用`$('#IDSelector')`最快的选择器，因为在内部它会使用`document.getElementByID('IDSelector')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:12:52.610

最好的方法是使用`.closest()`而不是`.parents()`，因为一旦找到匹配项，它将停止遍历。

```
$("#home_location_indicator") // ID, very fast
     .closest("tr") // Upwards traversal, fast, stops at tr
     .find(':radio[name="location_select"]').val() // Find, slow-ish 
```

这比自上而下的方法要好得多：

```
$("tr") // getElementsByTagName, very fast
    .has("#home_location_indicator") // traverse EVERY tr ALL the way down, very slow!
    .find('input[name="location_select"]').val() // Find, slow-ish 
```

# javascript - Flex：当 SkinnableContainer 被蒙皮时，子组件消失

> ID：10094874
> 
> 赞同：2
> 
> 时间：2012-04-10T19:06:52.483
> 
> 标签：javascript, flash, apache-flex

我有一些具有子组件的可换肤容器，例如图像组件或按钮栏等。似乎当我添加皮肤时，可换肤容器看起来很棒，但该容器的所有子组件似乎都消失了。

```
Example:
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <!-- host component -->
    <fx:Metadata>
          [HostComponent("path.to.skin.MySkinnableContainer")]
    </fx:Metadata>

    <s:states>
         <s:State name="disabled" />
         <s:State name="normal" />
    </s:states>

    <mx:Image source="@Embed('path.to.skin.AllSkinArt.swf#SkinArt')" includeIn="normal"/>

    <!-- SkinParts
    name=contentGroup, type=spark.components.Group, required=false
    name=contentGroup, type=spark.components.Group, required=false
    -->
 </s:Skin> 
```

将被蒙皮的组件，具有蒙皮时消失的图像组件。

```
<s:SkinnableContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                      xmlns:s="library://ns.adobe.com/flex/spark" 
                      xmlns:mx="library://ns.adobe.com/flex/mx" 
                      width="116" height="74" 
                      addedToStage="onAddedToStage(event)">

<fx:Script>
    <![CDATA[

        [Bindable]
        private var _screenShot:Bitmap;

        public function updateScreenShot(screenShot:Bitmap):void
        {
            _screenShot = screenShot;

        }

        protected function onAddedToStage(event:Event):void
        {
            //do not want the mouse to interact with this object.
            this.mouseEnabled = false;
        }
    ]]>
</fx:Script>

 <s:Image
    width="115"
    height="82"
    x="-8"
    y="-109"
    source="{_screenShot}"/>
 </s:SkinnableContainer> 
```

在 CSS 文档中，我有以下代码行来设置皮肤。

```
wd|MySkinnableContainer
{
    skinClass: ClassReference("path.to.MySkinnableContainerSkin");
} 
```

在上面的示例中，Skin 工作得很好，但是 SkinnableContainer 中包含的图像会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T20:20:29.207

我遇到了同样的问题并找到了另一种方法，我想问题是图像被认为是皮肤的一部分。在皮肤类中设置源使它对我有用。

```
<s:SkinnableContainer>

<fx:Script>
    <![CDATA[

         [Bindable]
         public var imageSource:String;
         ....................

    ]]>
</fx:Script>
    <s:Image id="sampleImg"/>

</s:SkinnableContainer> 
```

这

```
<s:Skin>

    <s:Image id="sampleImg" source="{hostcomponent.imageSource}"/>

</s:Skin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:04:11.937

看起来你的皮肤缺少`contentGroup`皮肤部分。有趣的是，对于像这样的组件`SkinnableContainer`，我会认为内容组是必需的。唉，事实并非如此。

将此添加到您的皮肤中：

```
<s:Group id="contentGroup" /> 
```

现在“contentGroup”皮肤部分已经存在，“SkinnableContainer”应该能够将您的子对象添加到其中。

# iphone - 在 UIActionSheet 上添加 UIDatePicker 后未发生事件

> ID：10094877
> 
> 赞同：0
> 
> 时间：2012-04-10T19:07:02.443
> 
> 标签：iphone

请检查代码

```
 -(IBAction)showDateSheet{
dateSheet=[[UIActionSheet alloc]initWithTitle:@"Select Test Date" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:nil];
datePicker=[[UIDatePicker alloc]init];
[datePicker addTarget:self action:@selector(changeDateInLabel:) forControlEvents:UIControlEventValueChanged];
dateSheet.delegate=self;
//[dateSheet setFrame:CGRectMake(0, 117, 320, 383)];
datePicker.datePickerMode=UIDatePickerModeDate;
CGRect pickerRect=datePicker.bounds;
pickerRect.origin.y=-100;
datePicker.bounds=pickerRect;
[dateSheet addSubview:datePicker];
[dateSheet showInView:self.view];
[dateSheet setBounds:CGRectMake(0.0f, 0.0f, 320, 500)];

//[datePicker release];
//[dateSheet release];

   } 
```

通过使用上面的代码，我无法单击取消按钮，当我点击取消按钮时没有任何反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:06:50.223

您的错误是`datePicker`这样设置界限：

```
CGRect pickerRect=datePicker.bounds;
pickerRect.origin.y=-100;
datePicker.bounds=pickerRect; 
```

本质上，您所做的是移动选择器的绘制位置，而不是选择器的框架所在的位置。要更清楚地看到这一点，请将选择器的`clipsToBounds`属性设置为`YES`并查看您得到的内容。即使您没有设置`clipsToBounds`，您也无法与下面的部分进行交互。

您真正想要做的是将框架原点向下设置，而不是边界原点向上设置一定数量的点。工作代码看起来像这样：

```
CGRect pickerRect=datePicker.frame;
pickerRect.origin.y+=110;
datePicker.frame=pickerRect; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:37:36.333

您需要在操作表上添加按钮，如下所示...

```
UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Close"]];
closeButton.momentary = YES; 
closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
closeButton.tintColor = [UIColor blackColor];
[closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];
[dateSheet addSubview:closeButton];
[closeButton release]; 
```

这是在打电话之前完成的`[dateSheet showInView:self.view];`

然后在选择器中只写这个..

```
[actionSheet dismissWithClickedButtonIndex:0 animated:YES] 
```

# sql-server - 如何找到与其他记录组匹配的记录组（关系划分？）

> ID：10094886
> 
> 赞同：6
> 
> 时间：2012-04-10T19:08:09.033
> 
> 标签：sql-server, sql-server-2008, relational-division

为了设置合并帐户处理，我想找出具有“完全相同”所有者集的帐户。

我认为使用动态 sql 来调整所有者，然后使用排名函数可能会起作用，但我不想采用这种方法；我对给定帐户可以关联的名称数量没有上限，因此我想避免使用动态 SQL。

我的数据（这也在[http://www.sqlfiddle.com/#!3/1d36e](http://www.sqlfiddle.com/#!3/1d36e)）

```
 CREATE TABLE allacctRels
 (account INT NOT NULL,
 module CHAR(3) NOT NULL,
 custCode CHAR(20) NOT NULL)

 INSERT INTO allacctrels
 (account, module, custCode)
 VALUES
 (1, 'DDA', 'Wilkie, Walker'),
 (1, 'DDA', 'Houzemeal, Juvy'),
 (2, 'CDS', 'Chase, Billy'),
 (2, 'CDS', 'Norman, Storm'),
 (3, 'CDS', 'Chase, Billy'),
 (3, 'CDS', 'Norman, Storm'),
 (7, 'CDS', 'Perkins, Tony'),
 (15, 'SVG', 'Wilkie, Walker'), --typo in name before mwigdahl's response
 (16, 'SVG', 'Wilkie, Walker'), -- corrected typo here too
 (606, 'DDA', 'Norman, Storm'),
 (606, 'DDA', 'Chase, Billy'),-- corrected 2nd typo found 
 (4, 'LNS', 'Wilkie, Walker'),
 (4, 'LNS', 'Houzemeal, Juvy'),
 (44, 'DDA', 'Perkins, Tony'),
 (222, 'DDA', 'Wilkie, Walker'),
 (222, 'DDA', 'Houzemeal, Juvy'),
 (17, 'SVG', 'Wilkie, Walker'), -- added these three rows in edit, SVG 17 doesn't match any dda 
 (17, 'SVG', 'Welch, Raquel'),
 (17, 'SVG', 'Houzemeal, Juvy') 
```

我想知道，对于每个 MODULE-ACCOUNT，具有完全相同所有者的最低 DDA 帐户是什么。

在示例数据中，我想要这些结果，第三列是具有相同所有者的最低 DDA 帐户。结果应该具有与模块/帐户组合相同的行数 - “SELECT DISTINCT module, account FROM allAcctRels”中的每行一行）

```
1, DDA, 1
2, CDS, 606
3, CDS, 606
15, SVG, NULL
16, SVG, NULL
606, DDA, 606
4, LNS, 1
7, CDS, 44
44, DDA, 44
222, DDA, 1
17, SVG, NULL -- added to original post. 
```

SVG 15 和 16 不匹配任何 DDA 帐户，因此它们相互匹配并不重要，它们会为要合并到的帐户获得 NULL。 *编辑：SVG 17 不匹配任何东西，即使在 SVG 17 中有一个 DDA 账户，其所有持有人都在，但任何一个 DDA 账户都不会出现 SVG 17 中持有人的组合。* 每个 DDA 帐户都将匹配自己，除非存在具有相同所有者和较低 DDA 的 dda 帐户（如 DDA 222 的情况）。

我可以看到一种通用的方法是对每个帐户进行透视，对透视表进行分组，然后使用 row_number。鉴于与每个帐户关联的持有者数量不限，我认为旋转将采用我宁愿避免的动态 SQL。

在我看来，这是一个“关系划分”问题，关系划分可能是由 CROSS APPLY 提供的。我尝试编写一个函数，该函数将获取与特定帐户关联的帐户持有人表并找到最低 dda 帐户，如下所示，其想法是查看给定帐户中的所有人数是否相同作为该帐户加入给定 dda 帐户时的人数，但我不知道如何将帐号表“输入”到函数中。

```
-- this is what I tried but I'm not sure it the logic would work
-- and I can't figure out how to pass the account holders for each
-- account in.  This is a bit changed from the function I wrote, some
    -- extraneous fields removed and cryptic column names changed.  So it 
    -- probably won't run as is.

    -- to support a parameter type to a tape
-- CREATE type VisionCustomer as Table
-- (customer varchar(30))

CREATE FUNCTION  consolidatable 
(@custList dbo.VisionCustomer READONLY)
RETURNS char(10)
AS  
BEGIN
DECLARE @retval Varchar(10)
DECLARE @howmany int
select @howmany=Count(*) FROM @custlist;

SELECT @retval = min (acct) FROM allAcctRels
    JOIN @custlist
        On VendorCustNo = Customer
            WHERE acctType = 'DDA'
            GROUP BY acct
            HAVING (count(*) = @howmany)
            and
            COUNT(*) = (select Count(*) FROM allAcctRels X
    WHERE X.acctType = 'DDA'
    AND X.account = AllAcctRels.account) ;
RETURN @retval
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:47:13.403

我相信这就是您正在寻找的（[http://www.sqlfiddle.com/#!3/f96c5/1](http://www.sqlfiddle.com/#!3/f96c5/1)）：

```
;WITH AccountsWithOwners AS
(
  SELECT DISTINCT
    DA.module
    , DA.account
    , STUFF((SELECT 
                 ',' + AAR.custCode
               FROM allacctRels AAR 
               WHERE AAR.module = DA.module 
                 AND AAR.account = DA.account
               ORDER BY AAR.custCode
               FOR XML PATH(''))
              , 1, 1, '') AS Result
  FROM allacctRels DA
) 
, WithLowestDda AS
(
    SELECT
        AWO.module
        , AWO.account
        , MatchingAccounts.account AS DdaAccount
        , ROW_NUMBER() OVER(PARTITION BY AWO.module, AWO.account ORDER BY MatchingAccounts.account) AS Row
    FROM AccountsWithOwners AWO
    LEFT JOIN AccountsWithOwners MatchingAccounts
        ON MatchingAccounts.module = 'DDA'
        AND MatchingAccounts.Result = AWO.Result
)
SELECT
    account
    , module
    , DdaAccount
FROM WithLowestDda
WHERE Row = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:18:04.573

如果我理解正确的话，这实际上很简单。尝试这个：

```
SELECT a.account, a.module, MIN(b.account) 
FROM allacctRels a
    LEFT JOIN allacctRels b ON a.custCode = b.custCode AND b.module = 'DDA'
GROUP BY a.account, a.module 
```

编辑：在澄清后，上述内容不起作用，但这应该。这确实是一种关系划分。可能不是世界上最有效的查询计划，但它确实有效。

```
SELECT a.account, a.module, MIN(b.account)
FROM allacctRels a
    LEFT JOIN allacctRels b ON b.module = 'DDA'
    AND
    -- first test is to confirm that the number of matching names for this combination equals the number of names for the DDA set...
    (
        SELECT COUNT(*) 
        FROM allacctRels b2 
            INNER JOIN allacctRels a2 ON b2.custCode = a2.custCode 
        WHERE a.account = a2.account AND b.account = b2.account
    ) = 
    (
        SELECT COUNT(*) 
        FROM allacctRels b2 
        WHERE b.account = b2.account
    )
    AND 
    -- second test is to confirm that the number of names for the DDA set equals the number of names for the base set...
    (
        SELECT COUNT(*) 
        FROM allacctRels b2 
        WHERE b.account = b2.account
    ) = 
    (
        SELECT COUNT(*) 
        FROM allacctRels a2 
        WHERE a.account = a2.account
    )
GROUP BY a.account, a.module 
```

# ios - ExtAudioFileCreateWithURL：可以使用哪些有效的音频格式？

> ID：10094888
> 
> 赞同：1
> 
> 时间：2012-04-10T19:08:10.103
> 
> 标签：ios, core-audio

所以我的问题是：与 ExtAudioFileCreateWithURL 一起使用的有效音频格式是什么？

我正在从 RemoteIO 的 renderCallback 中录制 - 并使用这些规范让它工作：

> **AudioStreamBasicDescription** :: mFormatID :: kAudioFormatLinearPCM
> 
> **ExtAudioFileCreateWithURL** :: AudioFileTypeID :: kAudioFileWAVEType

但是生成的文件很大，所以我想使用压缩格式。我已经搜索了几个小时并插入了各种格式组合，但我得到了错误：

```
uncaught exception 'NSInternalInconsistencyException', 
reason: 'Couldn't create file for writing' 
```

我还看到关于哪些格式可以和不能用于记录的相互矛盾的信息。为了进行现实检查，我修改了 SpeakHere 示例并让它与 kAudioFormatMPEG4AAC 一起使用 - 但对于我的生活，我无法在我自己的项目中使用这些设置。

关于使用 ExtAudioFileCreateWithURL 录制压缩音频的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:18:18.573

您可以使用`AudioFileGetGlobalInfo`(etc.) 来确定当前系统支持的内容。

录制时，只需录制为 PCM，压缩结果，处理 PCM 录制，如果系统不支持您需要的目标格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:26:37.193

我终于解决了这个问题 - 直接录制到 AAC 到 ExtAudioFile。此处的详细信息：[从 RemoteIO 录制到 AAC：正在写入数据但文件无法播放](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable)

# exchange-server - Exchange 2010 EWS 无法访问 2007 邮箱 - 自动发现？

> ID：10094889
> 
> 赞同：1
> 
> 时间：2012-04-10T19:08:19.660
> 
> 标签：exchange-server

我的雇主使用的托管公司在周末升级到 Exchange 2010。这导致我们使用的访问邮箱的服务中断。托管公司说我们的邮箱仍然是 2007。现在尝试使用 Exchange 2007 Web 服务访问它们时，我收到以下错误：

> 客户端访问服务器版本与正在访问的资源的邮箱服务器版本不匹配。要确定用于访问资源的正确 URL，请使用带有资源地址的自动发现。

我对这个错误做了一些谷歌搜索，并找到了一些关于使用 AutoDiscover 来解决这个问题的帖子。我尝试了我在[此处](http://msdn.microsoft.com/en-us/library/bb204061.aspx)找到的 Microsoft 示例，但我不清楚控制台的输出告诉我什么或我如何使用它。

看起来它尝试访问一些 URL，然后报告它发现的内容。我有例外、“找不到电子邮件地址”或“站点不匹配”

编辑：我得到了示例应用程序来返回一些信息。现在我的问题是，我如何将此输出转换为访问我需要的邮箱？

这是返回的属性列表，省略了它们的实际值。

```
=? Trying 'Email@myDomain.com' at 'https://myDomain.net/Autodiscover/Autodiscover.xml'
User/DisplayName=
User/LegacyDN=
User/DeploymentId=
Account/AccountType=
Account/Action=
Account/Protocol/Type=
Account/Protocol/ASUrl=
Account/Protocol/DirectoryPort=
Account/Protocol/MdbDN=
Account/Protocol/OABUrl=
Account/Protocol/OOFUrl=
Account/Protocol/Port=
Account/Protocol/ReferralPort=
Account/Protocol/Server=
Account/Protocol/ServerDN=
Account/Protocol/ServerVersion=
Account/Protocol/UMUrl=
Account/Protocol/PublicFolderServer=
Account/Protocol/AD=
Account/Protocol/EwsUrl=
Account/Protocol/Type=
Account/Protocol/AuthPackage=
Account/Protocol/CertPincipalName=
Account/Protocol/DirectoryPort=
Account/Protocol/OABUrl=
Account/Protocol/Port=
Account/Protocol/ReferralPort=
Account/Protocol/Server=
Account/Protocol/SSL=
Account/Protocol/Type=
Account/Protocol/DirectoryPort=
Account/Protocol/Port=
Account/Protocol/ReferralPort=
Account/Protocol/External/OWAUrl[@AuthenticationMethod="Fba"]=
Account/Protocol/External/OWAUrl[@AuthenticationMethod="Fba"]=
Account/Protocol/Internal/OWAUrl[@AuthenticationMethod="Basic, Fba"]=
Account/Protocol/Internal/OWAUrl[@AuthenticationMethod="Basic, Fba"]=
Account/Protocol/Internal/OWAUrl[@AuthenticationMethod="Basic, Fba"]=
Account/Protocol/Internal/Protocol/Type=
Account/Protocol/Internal/Protocol/ASUrl= 
```

有人可以指出我解决这个问题的正确方向吗？

此外，我无权对 Exchange Server 本身进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:36:34.023

我通过更多的谷歌搜索找到了答案。从 "Account/Protocol/EwsUrl=" 属性返回的 URL 给了我想要指向我的 web 服务的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T04:49:07.447

我有同样的错误：

> 客户端访问服务器版本与正在访问的资源的邮箱服务器版本不匹配

..但 EwsUrl 是正确的

服务器平台已经升级到2013，但是目标邮箱还是2007模式。解决方法是将邮箱迁移到 2013 年，然后它又开始工作了。所以这是一个环境而不是代码修复。

# javascript - 使用 document.evaluate 时未定义 XPath 元素/对象

> ID：10094891
> 
> 赞同：5
> 
> 时间：2012-04-10T19:08:32.873
> 
> 标签：javascript, jquery, xpath, jquery-selectors, document.evaluate

如何修复常规 JavaScript 代码，使其不显示“未定义”并显示输入字段的值？jQuery 代码工作正常，并在同一页面上正确显示输入字段值。

**常规 JavaScript：**

```
var obj = document.evaluate('//html/body/form/div[4]/label/input',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null); 

alert(obj.value); 
```

**jQuery 1.7.1 代码：**

```
var obj = $('html > body > form > div:nth-child(4) > label > input');

alert(obj.value); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:21:39.833

`document.evaluate()`返回一个 XPathResult。您可以像这样检索元素：

```
var obj = document.evaluate('//html/body/form/div[4]/label/input', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;

if(obj != null) {
    alert(obj.value);
}
​ 
```

# asp.net - 将用户上传的 CSV 文件从 ASP.NET 解析到 MySQL DB。安全问题

> ID：10094894
> 
> 赞同：0
> 
> 时间：2012-04-10T19:08:57.333
> 
> 标签：asp.net, mysql, security, csv, sql-injection

我正在编写一个 ASP.NET 网站，用户可以在其中上传一个 .CSV 文件，我想从中将数据提取到 MySQL 数据库上的表中。我想知道通过防止 SQL 注入或对我的数据库造成其他危险，最安全的方法是什么。

我也想知道提取这个的最好方法是什么？例如，是否建议使用 API 直接从按钮按下后提取数据，或者我应该将文件推送到服务可能会定期提取的临时位置？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:30:55.240

使用准备好的语句在后端使用您的 CSV 数据。准备好的语句安全地转义数据以防止 SQL 注入。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare(v=vs.71).aspx)

切勿通过连接或连接字符串来创建使用数据的动态字符串。仅使用准备好的语句。

这是通用的，无论输入源如何都应该使用。

# regex - 正则表达式匹配可选子字符串的一部分，包括换行符

> ID：10094897
> 
> 赞同：2
> 
> 时间：2012-04-10T19:09:10.737
> 
> 标签：regex

这是[这个问题](https://stackoverflow.com/questions/1553917/how-to-match-a-string-with-an-optional-part)和[另一个问题（我自己）](https://stackoverflow.com/questions/10080164/regex-match-part-of-an-optional-subgroup)的变体。

我有一个需要使用正则表达式解析的字符串。该字符串类似于：

```
The XXX is blue.
The XXX is blue,
and the YYY is green.
The XXX is blue,
and the YYY is green.
The XXX is blue.
The XXX is blue.
The XXX is blue.
The XXX is blue.
The XXX is blue,
and the YYY is green. 
```

上面的代码代表一个字符串，包括换行符。请注意一些句子是如何在逗号后跟一个可选的子句的。在这两个部分的句子中，YYY“属于”前面的 XXX。

我需要匹配所有的 XXX 和它们对应的 YYY，所以结果应该是这样的：

```
[1][1] XXX
[1][2]
[2][1] XXX
[2][2] YYY
[3][1] XXX
[3][2] YYY
[4][1] XXX
[4][2]
[5][1] XXX
[5][2]
etc. 
```

XXX 和 YYY 可以是任何字符（“.*”）

如何编写一个匹配 XXX 和 YYY 的正则表达式？（记住，YYY 可以是可选的。我使用 PHP。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:15:38.167

答案与您链接的第一个问题非常相似：

```
The (.*?) is blue(?:\.|,\nand the (.*?) is green\.) 
```

看到它工作：[http ://www.rubular.com/r/MONXq83J80](http://www.rubular.com/r/MONXq83J80)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:17:28.613

由于似乎都是相同的句子结构，因此触发器可能只是
The/the。冗长是愚蠢的。

```
/^The (.*) is.*(?:\n.*the (.*) is)?/m 
```

全局和多行模式（仅，点不包括换行符）

# ruby-on-rails - 嵌套在帖子中的评论表单上的呈现错误

> ID：10094904
> 
> 赞同：0
> 
> 时间：2012-04-10T19:09:58.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个帖子模型，在该帖子的“显示”视图中，我有一个带有错误输出部分的评论表单。但是，我不确定如何适当地重新编辑错误，因为我没有独立的 New 评论操作，只是一个创建。

对于简单的模型，我一直在为我的 create 语句使用这种模式：

```
def create

    @post = current_user.posts.build(params[:post])
    if @post.save       
        flash[:success] = "You've added a post!"
        redirect_to @post
    else
        render 'new'
    end
end 
```

当我需要它在帖子页面上呈现评论错误时，如何使该模式的 else 部分工作？当我使用上面的确切模式“render 'new'”时，它会将我带到我的存根“在 app/views/comments/new.html.erb 中找到我”页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:24:51.483

尝试`render @post`代替`render 'new'`.

# javascript - 构建大型 jQuery Mobile Web 应用程序：使用 iFrame 作为页面？Backbone、Spine、Underscore 和其他框架？

> ID：10094905
> 
> 赞同：4
> 
> 时间：2012-04-10T19:10:00.797
> 
> 标签：javascript, jquery, jquery-mobile, cordova, backbone.js

我们使用 jQuery Mobile 构建了一个 Web 应用程序。它现在有九页，变得非常笨拙。jQuery Mobile 将所有“页面”捆绑到同一个页面中，以模拟原生应用程序的响应能力。

我们考虑将每个页面实现为单独的 iFrame。第一个页面包含每个 iFrame/页面并预加载每个页面。通过在视口中显示适当的页面，页面转换就像 JQM 一样发生。数据通过 iFrame 消息在母版页和子页之间传递。我们认为这可能是有利的，因为：

(1) 不需要额外的框架；

(2) 网络应用程序不会超过 15 个页面/iFrames；和

(3) Web 应用程序将通过本机应用程序容器（即 PhoneGap）而不是移动浏览器访问。

我们也在探索框架。从我们对[SO](https://stackoverflow.com/questions/6530444/backbone-js-vs-spine-js)和其他地方的研究来看，Backbone 和 Spine 似乎是构建大型 JavaScript 项目的两个很好的选择。

特别是他们管理 JQM 项目的能力还不是很清楚。

我们正在寻找三件事：

1) 有哪些选项和框架可用于构建大型 JQM 项目（理想情况下或最坏情况下的 MVC，对单一文件的任何改进）？

2) 如果您使用过 Backbone、Spine 或任何其他带有 JQM 的 JS 框架，请分享您喜欢/不喜欢的内容。

3) 除了意味着构建专有功能之外，您是否发现我们的 iFrame 架构有任何明显的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:11:17.623

使用 iFrame 似乎不是最佳选择，尤其是当存在许多不同的轻量级和简单框架时。

JqueryMobile 有它自己的路由器。我不喜欢它 - 使用哈希标签它需要具有所需哈希的页面在 DOM 中。当然，可以动态加载页面，但无论如何您都需要创建新页面，将它们添加到页面容器等。这种处理页面的方式不适合我，而且还会使 DOM 过载。

还可以使用 JQM 使用 Jquery 模板——它们允许存储页面或不同的 HTML 代码，稍后可以使用传递的数据对其进行解析。这些模板和解析机制在我看来非常简单易用。但是如果需要解析复杂数量的数据，它们就不适合了。也不支持部分（如在 ASP.NET MVC 中）。这意味着，您不能将页眉和页脚仅存储在一个文件中并将它们作为每个页面的部分加载。您必须为每一页复制它。

这个框架的其余功能很棒。许多控件、主题等。它似乎是 UI 创建的领导者 - 毫无疑问。我唯一不喜欢的——JQM 页面转换。

现在关于骨干。这是一个使用 MVC 模式创建应用程序的强大而简单的框架。实际上，没有 JS 框架允许创建真正的 MVC。但基本情况是正确的。模型、视图和控制器（路由器）。在 GitHub 上简单地创建新路线、良好的文档和大量示例。使用视图和模型的强大机制 - 他们的站点将显示所有功能。

我提议使用 Backbone + JQM。但在这种情况下，您必须禁用其中一个路由器以避免这些框架之间的冲突。只有一个人应该留下。

关于分页。无需将所有可用页面存储在 DOM 中。您只能创建一个带有内容元素的 JQM 页面并动态更新它。将 html 存储在模板中，从服务中获取数据，解析模板并更新内容元素。Backbone 有一个依赖项——下划线。乍一看，我不想使用 Backbone。但 underscore 是一个强大的框架，具有许多有用的特性。其中之一是 - 模板。强大的解析机制 - 支持循环，js函数，在模板中创建变量等。也不支持部分 - 但你不需要它，因为不需要一直创建新页面。

当我的应用程序只有几页时 - 我加载了所有 js 文件（框架、帮助程序、服务调用程序、视图、模型等）并将下划线模板存储在我的 html 页面上。但是支持这样的代码是一件可怕的事情。HTML 页面变得巨大。RequireJS 框架可以解决这个问题。它不仅可以加载 JS 文件，还可以加载文本模板（使用文本插件）。在这种情况下，所有代码都是模块化的。它有很多样本，有很好的文档记录，所以看看它是如何工作的没有问题。顺便说一句，Backbone 的最新版本正式不支持 AMD。但是仍然可以使用 RequireJS 加载它。

还要考虑滚动您的内容。我不会写很多关于它的。看看 iScroll 框架。

所以，PhoneGap + Backbone + JQM + RequireJS = 成功 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:22:23.443

使用[Sencha Touch](http://www.sencha.com/products/touch)，并用它替换所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:43:29.933

15页对我来说似乎并不大。我真的不认为引入另一个框架会让这种规模的网站变得更容易。

我和您有同样的挫败感，但不是将所有内容都放在一个巨大的文件中，而是使用 ajax 页面加载来动态加载页面。

为了避免冲突，我只是小心地为标识符加上页面名称的前缀。这不是什么大问题。

您必须将其复制粘贴到每个文件中，这有点烦人（这使测试变得更加容易，并且允许站点的多个入口点），但我已经能够忍受它。

尽管有缺点，但将页面拆分为 HTML 文件有助于提高“实用性”，尤其是当您在页面上内联 javascript 时。

# arrays - 从数组中提取文本 - perl

> ID：10094912
> 
> 赞同：0
> 
> 时间：2012-04-10T19:10:22.617
> 
> 标签：arrays, perl, text, extract

我正在尝试从 SNMP 查询创建的数组中提取接口。

我想创建一个这样的数组：

```
my @array = ( "Gig 11/8",
              "Gig 10/1",
              "Gig 10/4",
              "Gig 10/2"); 
```

目前看起来像这样：

```
my @array = 
( "orem-g13ap-01    Gig 11/8          166            T       AIR-LAP11 Gig 0",
  "orem-g15ap-06    Gig 10/1          127            T       AIR-LAP11 Gig 0",
  "orem-g15ap-05    Gig 10/4          168            T       AIR-LAP11 Gig 0",
  "orem-g13ap-03    Gig 10/2          132            T       AIR-LAP11 Gig 0");> 
```

我正在这样做：

```
foreach $ints (@array) {
         @gig = substr("$ints", 17, 9);
         print("Interface: @gig"); 
```

当然可以，但是主机名 [orem-g15ap-01] 并不总是保持相同的长度，它会因站点而异。我需要提取单词“Gig”加上接下来的 6 个字符。我不知道这样做的最佳方法是什么。

我是 perl 的新手，但正在尝试。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:15:04.407

Perl 就是为此而生的。正则表达式是要走的路。阅读[perldoc perlre](http://perldoc.perl.org/perlre.html)。

```
foreach $ints (@array) {
  $ints =~ s/(Gig.{6})/$1/g;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:23:13.043

```
# "I need to extract the word "Gig" plus the next 6 characters."
# This looks like a fixed-with file format, so consider using unpack.
foreach ( @lines ) {
    my( $orem, $gig, $rest ) = unpack 'a17 a9 a*';
    print "[$gig]\n";
} 
```

如果它不是固定格式，那么您需要找出文件规范是什么，然后可能使用正则表达式，例如：

```
 my( $orem, $gig, $rest ) = m/(\S+)\s+(.{9})(.*)/; 
```

但是，如果没有适当的文件规范，这在一般情况下是行不通的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:32:43.680

所以你想要第二个和第三个字段。

```
my @array = map { /^\S+\s+(\S+\s\S+)/s } @source; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:48:40.263

这个就像 ikegami 的，但我建议如果你知道你想要的东西的外观，那么一定要*指定*. 因为这是在列表上下文中完成的，所以任何与规范不匹配的字符串都会返回一个空列表——或者被忽略。

```
my @results = map { m!(\bGig\s+\d+/d+)! } @array; 
```

# php - Ajax/jquery 登录表单失败

> ID：10094915
> 
> 赞同：4
> 
> 时间：2012-04-10T19:10:42.527
> 
> 标签：php, jquery, ajax, forms, login

我已经看了 1000 遍了。我不明白为什么它不起作用。

这是一个简单的 ajax 登录表单。即使凭据正确，它也会返回 false。（我通过直接发布到它来测试 ajax_login.php）

阿贾克斯功能：

```
$(document).ready(function() {
$("#submit_login").click(function() {

var username = $("#username").val();
var password = $("#password").val();

    $.ajax({

        type: "POST",
        url: "scripts/ajax_login.php",
        data: "username=" + username + "&password=" + password,
        success: function(result) {
            if(result == '0')
            {
                $(document.location = 'index.php?    page=profile&user=' + username);
            }
            else
            {
                $("#login_error").show("fast");
            }
        }
    });         
    return false;
});
}); 
```

ajax_login.php

```
session_start();
require('../conf/config.php');

if($_POST)
{

$u = mysql_real_escape_string($_REQUEST['username']);
$p = md5(mysql_real_escape_string($_REQUEST['password']));

$con = mysql_connect($mysql_server,$mysql_user,$mysql_password);
$db = mysql_select_db($mysql_db);

$query = mysql_query("SELECT * FROM users WHERE username = '$u' AND password = '$p'");

if(mysql_num_rows($query) > 0)
{
    $sid = session_id();
    $query = "UPDATE users SET sid='$sid' WHERE username='$u'";
    $result = mysql_query($query);

    if($result)
    {
        $_SESSION['loggedin'] = $u;
        echo '0';
    }
}
} 
```

形式：

```
<div class="login_form">
<form action="scripts/ajax_login.php" method="POST">
Login<br /><br />
Username: <br />
<input type="text" name="username" id="username" /> <br />
Password: <br />
<input type="password" name="password" id="password" />
</div>
<input type="checkbox" name="remember" id="rem" value="checked"/><label for="rem">Stay logged in?</label><br />
<?php $formKey->outputKey(); ?>
    <input type="submit" value="Login!" name="submit" id="submit_login" />
   </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:14:23.733

它总是会返回 false，因为`$.ajax()`（与其他 jQuery ajax 方法一样）默认情况下异步操作。您将需要在回调中进行所有事件处理（例如，您的`success`回调）。

另外，我建议不要这样做：）`if (result == '0'`。相反，使用`===`.

理想情况下，您应该返回 JSON，或者至少返回非真、假、0、1 等。当涉及到 JavaScript 的布尔处理时，这四个值（和其他值）很容易混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T14:12:29.963

未经测试，但你应该试试这个：

```
$.ajax({
    type: "POST",
    url: "scripts/ajax_login.php",
    data: {"username":username, "password":password},
    success: function(result) {
        if(result==='0')
        {
            $(document.location = 'index.php?page=profile&user='+username);
        }
        else
        {
            $("#login_error").show("fast");
            return false;
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:03:46.877

除了在调用您的任何一个回调函数 (和)`return`之前执行该语句这一事实之外，似乎没有对 click 处理程序函数的返回值做任何事情 for ，可能发生的事情是尽管您在事件上进行 AJAX 调用时，浏览器也在提交表单发布，因为它是一个类型按钮 - 无论是否正在执行 AJAX 调用，页面都会在表单提交时重新加载（因此看起来好像处理程序是返回而不是击中您的处理程序）。将其更改为非提交类型按钮：`success``error``$("#submit_login")``click``#submit_login``submit``click``false``success`

```
<input type="button" value="Login!" name="submit" id="submit_login" /> 
```

还有其他方法可以做到这一点，例如`preventDefault`在您的处理程序中使用 Javascript，如下所示：

```
$("#submit_login").click(function(ev) {
    ev.preventDefault();
    //Rest of code... 
```

正如我之前所说，这里似乎根本没有使用返回值，所以你真的不需要它来返回 false。无论做什么需要都可以放入`success`/`error`处理程序。

# c# - 当作为 Windows 服务运行时，如何让程序本身截图？

> ID：10094921
> 
> 赞同：4
> 
> 时间：2012-04-10T19:10:59.157
> 
> 标签：c#, .net, service, screenshot, infopath

> **可能重复：**
> [Windows服务下进程截图](https://stackoverflow.com/questions/1445788/screenshot-of-process-under-windows-service)

我试图或多或少地模仿 Infopath Form Services。所以我希望能够通过移动设备批准或不批准表格（用户将通过电子邮件收到通知）。我有能力批准/不批准表格，但问题是我需要能够对我的程序进行屏幕截图以进行详细的错误报告（以防在批准过程中出现问题）（屏幕截图过程已经实现） . 我需要能够在没有任何用户登录的情况下在服务器上运行程序。这就是问题所在。如果我将程序作为服务运行，我没有得到交互式窗口，但我有能力让我的程序总是跑。所以我需要能够在计算机启动时启动程序，并让它能够自己截图。

有没有办法让 Windows 服务在启动时有一个交互式窗口，即使它在屏幕上绘制并且用户永远看不到，或者有一种方法可以模拟/伪造我的程序的窗口，这样它就可以在不需要的情况下自行截图交互式窗口？

另外，我的程序是在 C# 的 .NET 框架上编写的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:43:29.503

除了该服务没有要呈现的桌面这一事实之外...

我们没有按照您尝试的方式在服务器上实现 InfoPath 表单的呈现，因为它根本无法正常工作。您可以作弊一段时间，但在服务器上以无头服务模式运行 Office 应用程序是个坏主意。您还会遇到有趣的问题，因为用户的身份与进程身份不匹配（即无法查询 ACL 的数据）。

您的选择：

*   如果您只需要批准，请删除 InfoPath 部分。
*   使用现有的移动表单解决方案。Forms Services 中有一些对移动表单的支持，如果可以的话，您可以拥有专门针对移动设备的非常简单的视图。InfoPath 表单的移动呈现也有现有的解决方案。
*   诚实地实现表单的渲染。XSN 格式记录在案...
*   在单独的计算机上呈现 InfoPath，每次登录一个用户...

# mysql - 按日期分组

> ID：10094926
> 
> 赞同：1
> 
> 时间：2012-04-10T19:11:27.293
> 
> 标签：mysql, group-by

我有一张`login_log`桌子： ![在此处输入图像描述](../Images/7d5ac515f0e264909d198de5b5865dbc.png)

我正在尝试构建一个查询分组的“唯一”登录基于`login_email, login_success, login_email, account_type_id, login_lock, login_ip`

到目前为止我有

```
SELECT count(*) count, MAX(login_date) date, login_ip, login_email, account_type_id, login_lock, login_success
FROM `login_log`
GROUP BY login_email, login_success, login_email, account_type_id, login_lock, login_ip
ORDER BY date DESC 
```

这让我： ![在此处输入图像描述](../Images/b5cf75b7871143d219c0ddaeffb7100c.png)

但以第 5 行和第 6 行为例。在第 6 行，用户登录失败 3 次，然后在第 5 行成功登录。第 5 行的计数应为 1，但它将失败尝试之前的成功登录分组。

我想要的是成功登录的一行，登录失败的一行，然后是成功登录的一行，按日期排序。

如何对日期查询进行分组，以使它们不会相互“跳跃”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:04:42.033

您的查询的问题是您没有在“分组依据”部分中按日期分组。结果，您的 Count(*) 不必要地增加。

添加：

```
Group By Date 
```

会起作用，但可能不会给你正确的间隔。添加 MySQL Date() 函数将允许您按天拆分它，因此您将添加：

```
Group By Date(Date) 
```

您可能还想将别名 Date 更改为非保留的 MySQL 关键字，如 LogDate 或类似的东西。

有关 MySQL 日期/时间函数的更多信息：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# android - 在Android上使用“Zxing的条码扫描器”应用程序

> ID：10094927
> 
> 赞同：0
> 
> 时间：2012-04-10T19:11:28.800
> 
> 标签：android, google-play, zxing

我正在修改现有的应用程序。该应用程序通过 Java 类和包使用“Zxing 的条形码扫描仪”。

我的项目包括这些包：

com.google.zxing com.google.zxing.integration com.google.zxing.integration.android

我有一堂课，上面有这样的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

import com.google.zxing.integration.android.IntentIntegrator;
import com.google.zxing.integration.android.IntentResult;

public class QRdecoderActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // temp = this;

        IntentIntegrator.initiateScan(this);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch(requestCode) {

            case IntentIntegrator.REQUEST_CODE: {

                if (resultCode != RESULT_CANCELED) {

                    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);

                    if (scanResult != null) {
                        String upc = scanResult.getContents();

                        Toast.makeText(this, "Contents : " + upc, Toast.LENGTH_LONG).show();

                    }

                }
                finish();               

                break;
            }
        }
    }   
} 
```

一切正常，但是当我开始测试过程时，我发现我需要安装“条形码扫描仪”应用程序。

是这样吗？

我认为我不需要，如果它在我的项目中使用 Java 类。

如何检查应用程序是否已安装？以及如何从我的代码中转到“Google Play”并向用户展示以供下载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:24:38.027

这一点之前已经讨论过，并且在 Zxing 网站上有很好的记录。虽然您可以将源代码集成到您的应用程序中，但您也可以通过意图进行扫描。

从您发布的内容来看，源代码似乎已集成到应用程序中，因此您不需要安装它（因为所有类都应该在那里）。

如果系统提示您安装条码扫描器应用程序，听起来好像正在使用通过意图进行扫描。最终结果是您拥有两种方法的混合物，其中通过意图扫描是正在使用的方法。

我个人更喜欢通过意图进行扫描。这记录在这里：[http](http://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent 。

我的理由是您的应用程序变得独立于条形码扫描仪。由新条形码标准或一般错误修复/改进引起的任何更新都会立即提供给最终用户（作为通过 Google Play 进行的更新），因为他们不必等待您的应用程序集成任何更新的源代码。此外，如果您打算为其增加价值，我们鼓励您仅使用 Zxing 的源代码。

> 如何检查应用程序是否已安装？以及如何从我的代码中转到“Google Play”并向用户展示以供下载？

Zxing 提供了一个类来优雅地处理用户做出意图并且没有安装 Barcode Scanner 应用程序的情况。它将直接将用户带到 Google Play 上的应用程序。您可以在[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)找到它。

上课后，您只需调用以下命令：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

然后添加到您的活动中

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
  IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) {
    // handle scan result
  }
  // else continue with any other code you need in the method
  ...
} 
```

# java - 文本的持续解析和处理

> ID：10094933
> 
> 赞同：4
> 
> 时间：2012-04-10T19:12:14.110
> 
> 标签：java, multithreading, logging

我有一个类是日志服务器的侦听器。每当日志/文本喷出时，侦听器都会收到通知。我将此文本存储在数组列表中。

我需要处理此文本（删除重复的单词，将其存储在 trie 中，将其与某些模式进行比较等）。

我的问题是我应该在通知听众时这样做吗？或者我应该创建一个单独的线程来处理处理。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:17:41.793

听起来您正在尝试解决[Producer Consumer Problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)，在这种情况下 -**是**的，您应该查看线程。

但是，如果您只需要执行非常基本的操作，每个条目花费的时间不到几毫秒 - 不要让事情过于复杂。如果您将 TreeSet 与 ArrayList 结合使用 - 它会自动负责将重复项排除在外。简单的原子操作（例如验证日志条目）并不是什么大问题，它们需要一个单独的线程，除非新文本以如此快的速度进入，以至于您需要一个线程来忙于处理新的通知.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:27:49.007

与 UI 无关的进程我总是在单独的线程中运行该类型的进程，因此它不会挂起您的应用程序屏幕。因此，按照我的观点，您需要使用单独的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:28:03.050

这种情况可以使用[Queue](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)来解决。最简单的解决方案是拥有一个无界阻塞队列（[LinkedTransferQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html)是为这种情况量身定制的）和一个有限大小的工作线程池。您将[add()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#add%28E%29) / [offer()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#offer%28E%29)来自侦听器线程的日志条目和[take()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)以使用工作线程进行处理。如果没有可用于处理的日志条目，[take()将阻塞线程。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)

PS [LinkedTransferQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html)是为并发使用而设计的，不需要外部同步：它基于*弱*迭代器，就像 Concurrent DS 系列一样。

# php - 通过javascript将html信息传递给php

> ID：10094934
> 
> 赞同：0
> 
> 时间：2012-04-10T19:12:17.417
> 
> 标签：php, mysql, html

我有两个通常被禁用的文本框。当用户按下编辑按钮时，文本框将启用并且允许他们输入。但是，当我提交表单时，用户输入的值不会传递给我的 php 代码。

这是我的javascript代码：

```
if (timesin%2 == 0){
    document.getElementById(score1).disabled = true;
    document.getElementById(score2).disabled = true;
} else {
    document.getElementById(score1).disabled = false;
    document.getElementById(score2).disabled = false;
    document.getElementById(score1).value = "";
    document.getElementById(score2).value = "";
}
timesin++; 
```

在这里，它禁用或启用每个备用点击，可能不是最好的方法，但那不是这里的重要部分。

这是盒子的html代码

```
<input type = 'textbox' id = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."' name = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."'  maxlength = '2' disabled style = 'width:15px; text-align:center' value = '".$col_value."' /> 
```

所以它被禁用了。单击按钮时，将调用该函数并启用文本框。然后，用户键入一个值并再次单击编辑按钮以禁用文本框。所以现在我用一个新的输入值禁用了文本框。但是，当我通过 php 提交并获取值时，我得到一个空白变量。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:30:04.067

```
<input type = 'textbox' id = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."' name = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."'  maxlength = '2' disabled style = 'width:15px; text-align:center' value = '".$col_value."' /> 
```

我看到了几个问题。一个是 .$columncount.$inc.$leaguesarray[$numofleagues]。不是 HTML。您需要它周围的 php 标签，还需要回显这些值，如下所示：

```
'columntext<?php echo $columncount.$inc.$leaguesarray[$numofleagues] ?>' 
```

与此行相同：

```
 value = '".$col_value."' 
```

应该

```
 value = '<?php echo $col_value ?>' 
```

我对呈现的页面感到惊讶，除非您一直在 php echo 中准备它？无论哪种方式，澄清这一点可能有助于缩小问题的*范围*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:30:46.727

我不够清楚，但是......任何禁用的输入都不会被发送，如果你想不可编辑，请尝试使用 readonly='readonly'，顺便说一句，你应该在你的 php 代码中进行某种验证，不要只相信JS

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:35:19.263

这是使用内联 PHP 的错误方法：

```
<input type = 'textbox' id = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."' name = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."'  maxlength = '2' disabled style = 'width:15px; text-align:center' value = '".$col_value."' /> 
```

而是尝试这样的事情：

```
<?php

   $id = "columntext".$columncount.$inc.$leaguesarray[$numofleagues];

?>

<input type="textbox" id="<?php echo($id); ?>" name="<?php echo($id); ?>" maxlength="2" value="<?php echo($col_value); ?>"> 
```

此外，您应该考虑使用单独的 CSS 文件来保存样式，而不是将其放在 HTML 元素中。它使生活变得如此轻松，并有助于保持您的设计干燥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:07:26.530

假设这是在 PHP echo 语句中，请更改

```
<input type = 'textbox' id = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."' name = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."'  maxlength = '2' disabled style = 'width:15px; text-align:center' value = '".$col_value."' /> 
```

至

```
<textarea id = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."' name = 'columntext".$columncount.$inc.$leaguesarray[$numofleagues]."'  maxlength = '2' disabled style = 'width:15px; text-align:center'  />".$col_value."</textarea>

ive never seen <input type = 'textbox'> before 
```

# php - MySQL Query 只抓取一行而不是多行。为什么？

> ID：10094943
> 
> 赞同：0
> 
> 时间：2012-04-10T19:13:07.290
> 
> 标签：php, mysql

我试图通过 MySQL 数据库中的这些行获取多行：

```
$msg_sql = "SELECT * FROM ".TABLE_PREFIX."quotes ORDER BY rand(curdate()) LIMIT 3";
$msg_res = mysqli_fetch_assoc(mysqli_query($link, $msg_sql));
print_r($msg_res); 
```

但是，我只得到 1 行回来。这是：

```
Array ( [id] => 1 [message] => test_message [Link] => link here ) 
```

我希望获得多行（所以有多个 ID）

请告诉我我做错了什么。我还是 MySQL 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:15:47.433

您必须为获取的每一行循环一次。

```
$result = mysqli_query($link, $msg_sql);
while ($item = mysqli_fetch_assoc($result)) {
    print_r($item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:14:39.673

您需要遍历结果：

```
$results = mysqli_query($link, $msg_sql);
while ($msg_res = mysqli_fetch_assoc($results))
{
    print_r($msg_res);
} 
```

# knockout.js - 复选框非布尔值？

> ID：10094946
> 
> 赞同：1
> 
> 时间：2012-04-10T19:13:26.330
> 
> 标签：knockout.js

我有以下示例：http: [//jsfiddle.net/jLkxG/6/](http://jsfiddle.net/jLkxG/6/)

is_checked 属性可以有 2 个值：是或否。如果值为是，则应检查复选框，当单击保存的链接时，应根据是否选中复选框来分配属性是或否。

你会如何在 knockoutjs 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:30:12.020

您的第一个问题是您错过了绑定上的括号：

```
<input type="checkbox" value="Yes" data-bind="checked: is_checked() == 'Yes'"/> 
```

现在复选框将在加载时正确检查。

更大的问题是单击复选框不会写回值。如果将 is_checked() 更改为布尔值，它将正常工作。因此，如果您有：

```
 self.is_checked = ko.observable(true); 
```

和

```
data-bind="checked: is_checked" 
```

它会工作的。取消选中该框将更新 is_checked 的值。如果是/否而不是真/假对您来说真的很重要，那么您将不得不编写一些代码来将真/假检查状态转换为是/否。有几种方法可以解决这个问题。我会尝试一个计算的 observable。见这里：http: [//jsfiddle.net/jLkxG/7/](http://jsfiddle.net/jLkxG/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T01:22:09.043

除了计算之外的另一种方法是使用“订阅”来监听值的变化。例如，绑定到 is_checked 并将该值设为真或假。然后订阅该 observable 并根据需要将另一个属性设置为 Yes/No。在这里查看小提琴：http: [//jsfiddle.net/johnpapa/jLkxG/8/](http://jsfiddle.net/johnpapa/jLkxG/8/)

HTML

```
<input type="checkbox" data-bind="checked: checkedvals.is_checked"/>
<label>Test</label><br/>

<pre data-bind="text:displayJS">
</pre>​ 
```

JavaScript

```
var viewModel = (function() {
    var self = this;
    self.checkedvals = {
        is_checked : ko.observable(true),
        is_checked_val : ko.observable("Yes")
    };
    self.checkedvals.is_checked.subscribe(function(){
        self.checkedvals.is_checked_val(self.checkedvals.is_checked() ? "Yes" : "No");
    });

    self.displayJS = ko.computed(function() {
        return JSON.stringify(ko.toJS(checkedvals), null, 2);
    });
})();
ko.applyBindings(viewModel);​ 
```

# linq - 什么是表达 做？

> ID：10094949
> 
> 赞同：2
> 
> 时间：2012-04-10T19:13:37.277
> 
> 标签：linq, c#-4.0

做什么`Expression<T>`？

我已经看到它以类似于以下的方法使用：

```
private Expression<Func<MyClass,bool>> GetFilter(...)
{
} 
```

不能直接退货`Func<MyClass,bool>`吗？

由于 < 和 > 符号，Google 和 SO 搜索失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:16:26.537

如果`TDelegate`表示一个委托类型，则`Expression<TDelegate>`表示**一个 lambda 表达式，该表达式可以转换为`TDelegate`表达式树**的类型的委托。这允许您以编程方式检查 lambda 表达式以提取有用信息。

例如，如果您有

```
var query = source.Where(x => x.Name == "Alan Turing"); 
```

如果将其表示为表达式树，则`x => x.Name == "Alan Turning"`可以以编程方式对其进行检查，但如果将其视为委托，则不能那么多。这在 LINQ 提供程序将遍历表达式树以将 lambda 表达式转换为不同表示的情况下特别有用。例如，LINQ to SQL 会将上述表达式树转换为

```
 SELECT * FROM COMPUTERSCIENTIST WHERE NAME = 'Alan Turing' 
```

它可以做到这一点，因为 lambda 表达式表示为一棵树，其节点可以被遍历和检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:15:27.863

表达式允许您检查委托内部的代码结构，而不仅仅是存储委托本身。

像往常一样，MSDN 对此事非常清楚：

[MSDN - 表达式（TDelegate）](http://msdn.microsoft.com/en-us/library/bb335710.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:54:33.280

是的，`Func<>`可以用来代替表达式。表达式树的实用性在于它使远程 LINQ 提供程序（例如 LINQ to SQL）能够提前查看需要哪些语句才能使查询运行。换句话说，将代码视为数据。

```
 //run the debugger and float over multBy2\.  It will be able to tell you that it is an method, but it can't tell you what the implementation is.
        Func<int, int> multBy2 = x => 2 * x;
        //float over this and it will tell you what the implmentation is, the parameters, the method body and other data
        System.Linq.Expressions.Expression<Func<int, int>> expression = x => 2 * x; 
```

在上面的代码中，您可以通过调试器比较可用的数据。我邀请你这样做。您会看到 Func 提供的信息非常少。用 Expressions 再试一次，你会看到很多信息，包括运行时可见的方法体和参数。这就是表达式树的真正威力。

# php - PHP 文件上传（文件未以 777 模式写入临时目录）

> ID：10094950
> 
> 赞同：1
> 
> 时间：2012-04-10T19:13:46.280
> 
> 标签：php, apache

我正在将文件上传到 PHP 服务器。上传目录是 chmod'd 到 777。`$_FILES`数组显示它已将一个临时文件写入上传目录，但是当我`ls`临时目录时，没有文件存在。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:18:06.543

当脚本退出时，上传的文件会自动从临时目录中删除。您**必须**自己在上传处理脚本中将文件移动/复制到其他地方以防止这种情况发生。如果您不这样做，PHP 将为您清理并核对文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T19:18:18.290

你需要这样做；

```
$tmp_name = $_FILES['file']['tmp_name'];
$filename = $_FILES['file']['name'];

move_uploaded_file($tmp_name, "uploads/$filename"); 
```

# javascript - HTML5 深度缩放和移动对象

> ID：10094952
> 
> 赞同：2
> 
> 时间：2012-04-10T19:13:55.180
> 
> 标签：javascript, html, zooming

我正在设计一个 Web 应用程序的原型，该应用程序需要能够在背景图上显示移动的对象。对象通过 WebSockets 提供它们的位置，这很好用。

只要背景比较简单，就没有问题。我已经成功地使用了 Canvas 和 SVG 来实现这一点。

问题：当背景的复杂性增加（即文件大小增加）时，它就不再起作用了。加载、缩放和平移需要很长时间。我尝试了一个深度缩放实现（http://www.akademy.co.uk/software/canvaszoom/canvaszoom.php），它工作正常，但有两个问题：

1.  我似乎无法生成（Deep Zoom Composer）足够深的缩放图块。顶层很远，没必要。我用来生成图块的图像具有非常高的分辨率。

2.  我将移动对象放在背景画布顶部的另一个画布上。如何使缩放级别同步？我怎么知道一个“水平”百分比是明智的？

我不一定需要使用深度缩放，但我相信它需要某种基于服务器的技术，以减小发送到客户端的大小。

顺便说一句，背景最初是一个 DWG 文件，解决方案必须是无插件的（没有 silverlight、flash 或类似的）。

谢谢！

# mysql - SQL转置？

> ID：10094956
> 
> 赞同：0
> 
> 时间：2012-04-10T19:14:04.100
> 
> 标签：mysql

> **可能重复：**
> [MySQL 数据透视表](https://stackoverflow.com/questions/7674786/mysql-pivot-table)

![需要 SQL 转置帮助](../Images/74d66afa7d7202aa8997253b625549ab.png)

我需要帮助将具有 3 列和 2 行的表转换为具有 4 列和 1 行的表

# iphone - UIView 两个动画并存

> ID：10094961
> 
> 赞同：3
> 
> 时间：2012-04-10T19:14:10.787
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

调用第二个动画后，如何让一个动画永远继续？例如：

1) 开始一个物体脉动 2) 在它脉动的同时移动它 3) 它继续脉动

一切正常，除了第二个动画无限期地停止第一个动画。下面是一些示例代码：

```
//Pulsate **

        [UIView animateWithDuration:0.25
                              delay:0
                            options: (UIViewAnimationCurveEaseOut | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat)
                         animations:^{
                             CGAffineTransform currentTransform = self.transform;
                             CGAffineTransform newTransform1 = CGAffineTransformScale(currentTransform, .95, .95);
                             [self setTransform:newTransform1];
                             CGAffineTransform newTransform2 = CGAffineTransformScale(currentTransform, 1, 1);
                             [self setTransform:newTransform2];
                         } 
                         completion:nil];    

//Move **
     [UIView animateWithDuration:0.30
                      delay:0
                    options: (UIViewAnimationCurveEaseOut | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState )
                 animations:^{
                     [[(UIPinchGestureRecognizer*)sender view] setCenter:CGPointMake(myAppDelegate.MCViewReference.center.x-300, myAppDelegate.MCViewReference.center.y)];
                 } 
                 completion:^(BOOL finished){
                }]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T22:04:35.347

您将无法使用基于块的动画来执行此操作，因为您在此处拥有它们。您将需要使用带有`CABasicAnimation`. 为脉动效果创建一个动画并将其设置为无限重复。然后您可以通过设置中心（动画或非动画）来移动它。

```
CABasicAnimation *pulsation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
pulsation.fromValue = [NSNumber numberWithFloat:0.95f];
pulsation.toValue = [NSNumber numberWithFloat:1.f];
pulsation.duration = 0.25f;
pulsation.autoreverses = YES;
pulsation.repeatCount = INFINITY;

[self.layer addAnimation:pulsation forKey:@"pulse"]; 
```

将动画添加到图层后，它将开始制作动画。要删除动画，只需调用`[self.layer removeAnimationForKey:@"pulse"`或`removeAllAnimations:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:49:07.800

您可以将动画分成多个阶段并使用完成块开始下一阶段。

# c# - 如何在 AutoComplete AjaxControlToolkit ASP.NET 中存储带有选择的 id？

> ID：10094965
> 
> 赞同：1
> 
> 时间：2012-04-10T19:14:27.790
> 
> 标签：c#, asp.net, autocomplete

我正在 ASP.NET 中实现 AjaxControlToolkit 的自动完成文本框。ServiceMethod 允许我调用一个函数，该函数将填充一个字符串列表，用于填充将显示的自动完成列表。

我的问题是，当我调用数据库时，我想存储一个与每个选择对应的 ID，这样一旦用户选择了它，我就可以轻松地在数据库中查找它。我不想在所选内容旁边的括号中显示它（即“John Smith (ID1234)”等）

有没有办法做到这一点，以便 ID 在“自动完成”框中“隐藏”，并且可以在选择时检索？我应该使用不同的自动完成框来完成这个吗？任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:32:57.767

这可能会回答您的问题 [http://www.aspsnippets.com/Articles/Fetch-multiple-values-as-Key-Value-pair-in-ASP.Net-AJAX-AutoCompleteExtender.aspx](http://www.aspsnippets.com/Articles/Fetch-multiple-values-as-Key-Value-pair-in-ASP.Net-AJAX-AutoCompleteExtender.aspx)

# jquery - 通过多个航点/目的地为对象设置动画？

> ID：10094966
> 
> 赞同：1
> 
> 时间：2012-04-10T19:14:31.603
> 
> 标签：jquery

这是从“A”到“B”目的地的线性动画[http://jsfiddle.net/BL5cS/](http://jsfiddle.net/BL5cS/)

如何添加另一条路径，以便框像“A”到“B”到“C”到“D”等动画：

exp：[http ://thesaurus.maths.org/mmkb/media/png/Zigzag.png](http://thesaurus.maths.org/mmkb/media/png/Zigzag.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:17:14.400

链接动画：

```
$('.my_element').animate(...first destination...)
                .animate(...second destination...)
                .animate(...third destination...)
                .animate(...fourth destination...) 
```

您还可以将目的地存储在一个数组中，然后循环它。

```
var destinations = [
        {top:..., left:...},
        {top:..., left:...},
        {top:..., left:...},
        {top:..., left:...}
    ],
    element = $('.my_element');

$.each(destinations, function(i, v) {
    element.animate(v)
}); 
```

[这是你的代码](http://jsfiddle.net/LPyUD/)修改了一下。

# jquery - 简单的 Jquery Css 风格调用

> ID：10094967
> 
> 赞同：0
> 
> 时间：2012-04-10T19:14:31.873
> 
> 标签：jquery, css

这有什么问题？

```
var hover = $('<img />').attr('src', hovers[i]).css('position', 
                                                        'absolute', 
                                                        'visibility' , 
                                                        'hidden'); 
```

由于某种原因`'visibility' , 'hidden'`没有被调用？但如果我删除它的位置样式。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:17:55.263

答案是将带有键值对的对象传递给 css 方法，而不是传递额外的参数：

```
var hover = $('<img />')
    .attr('src', hovers[i])
    .css({
        position: 'absolute',
        visibility: 'hidden'
    }); 
```

请参阅此处的“.css(map)”文档： http: [//api.jquery.com/css/#css2](http://api.jquery.com/css/#css2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:18:13.327

[http://api.jquery.com/css/](http://api.jquery.com/css/)

从 css 文档中您可以看到您的语法不正确，当定义多个 css 属性时使用：，然后用逗号分隔，还将所有属性括在大括号中，如下所示：

```
var hover = $('<img />').attr('src', hovers[i]).css({'position':'absolute','visibility':'hidden'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:18:16.337

将其更改为：

```
 var hover = $('<img />').attr('src', hovers[i]).css({'position': 'absolute', 'visibility': 'hidden'}); 
```

# extjs - 在网格排序（extjs）上将掩码添加到选项卡面板

> ID：10094968
> 
> 赞同：2
> 
> 时间：2012-04-10T19:14:33.940
> 
> 标签：extjs, extjs4

我正在开发一个内部 extjs 4 项目。我有一个带有标签面板的视口。每个选项卡都有一个包含许多记录的关联网格。当用户排序时，列标题仍然可以访问，并且他们可以在第一个排序仍在处理时启动新排序。我想在排序仍在进行时向选项卡面板或完整视口添加蒙版。有一个简单的解决方案吗？抱歉，我不能在这里发布任何代码，因为它在我们的 Intranet 上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:41:36.383

这很容易。在对记录进行排序时运行此代码：

```
var loadmask = new Ext.LoadMask(Ext.getBody(), {msg:"Sorting..."});
loadmask.show(); 
```

请注意，`Ext.getBody()`可以用另一个**element**替换，无论您想要什么，您都应该记住 Ext.LoadMask 包装了**element**，所以`getBody()`, `getEl()`, 都可以工作...

同样，当您的过程完成后，只需使用`loadmask.hide()`

# jquery - jquery插件快速布局表单？

> ID：10094975
> 
> 赞同：0
> 
> 时间：2012-04-10T19:14:51.697
> 
> 标签：jquery, forms

我有一个复杂的布局形式。假设屏幕垂直分为两部分。左段存储形式和右段存储网格。我很不擅长 CSS。我想要一个可以为我快速布局表单的 jquery 插件。有什么可以帮助的吗？我正在使用 jquery 验证引擎进行验证，并使用 methivin 拆分器插件来分隔 header、body 和 fotter。正文部分包含这个表单，它是一个 iframe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:20:47.900

您不需要 jQuery 来执行此操作。事实上，我会警告不要使用 JavaScript 进行布局。

相反，尝试使用像[Bootstrap](http://twitter.github.com/bootstrap/index.html)这样的 CSS 框架。例如，Bootstrap 具有表单格式化功能：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

# sql - 如何在 SQL Server 中动态比较源表和目标表中的行

> ID：10094981
> 
> 赞同：3
> 
> 时间：2012-04-10T19:15:16.653
> 
> 标签：sql, sql-server, tsql, ssis

我们从客户那里收到数据馈送，每次都获得大致相同的架构，尽管在客户端使用 3rd 方应用程序时它可能会发生变化。当我们收到数据文件时，我们将数据导入一个暂存数据库，其中每个数据文件（学生、出勤等）都有一个表。然后，我们希望将该数据与我们已经存在于该客户数据库中的数据进行比较，并查看上次运行中哪些数据已更改（列已更改或整行可能已删除）。然后，我们希望将更新的值或删除的行写入审计表，以便我们可以返回查看从之前的数据导入中更改了哪些数据。我们不想更新数据本身，我们只想记录两个数据集之间的不同之处。然后，我们将从客户数据库中删除所有数据，并从新数据文件中完全导入数据而不更改（此指令已下达，无法更改）。最大的问题是我需要动态地执行此操作，因为我不确切知道我将从我们的客户那里获得什么模式，因为他们可以对他们的表进行自定义。我需要能够动态地确定目标中有哪些表及其结构，然后查看源并比较值以查看数据中发生了什么变化。我将从我们的客户那里得到，因为他们可以对他们的桌子进行定制。我需要能够动态地确定目标中有哪些表及其结构，然后查看源并比较值以查看数据中发生了什么变化。我将从我们的客户那里得到，因为他们可以对他们的桌子进行定制。我需要能够动态地确定目标中有哪些表及其结构，然后查看源并比较值以查看数据中发生了什么变化。

附加信息：源上没有 ID 列，尽管有几列可用作构成不同行的代理键。

我希望能够为每个表通用地执行此操作，而不必在其中硬编码值，尽管我可能必须为单独的参考表中的每个表的代理键执行此操作。

我可以使用 SSIS、SP、触发器等，无论哪个更有意义。我已经查看了所有内容，包括 tablediff，但似乎没有一个拥有我需要的一切，或者一旦我进入它们，逻辑就开始变得极其复杂。

当然，任何人都已经做过类似的事情的任何具体例子将不胜感激。

让我知道是否有任何其他有用的信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:14:19.783

我曾研究过类似的问题，并使用了一系列元数据表来动态比较数据集。这些元数据表描述了需要暂存哪些数据集以及哪些列组合（及其数据类型）用作每个表的业务键。

通过这种方式，您可以动态地构建一个 SQL 查询（例如，使用一个 SSIS 脚本组件），该查询执行一个完整的外部连接，以找出两者之间的差异。

您可以将您自己的元数据与 SQL Server 的元数据（使用 sys.* 或 INFORMATION_SCHEMA.*）连接起来，以检测源中是否仍然存在这些列以及数据类型是否与您预期的一样。

将不匹配的元数据重定向到错误流进行评估。

这种工作方式风险很大，但如果你维护好你的元数据是可以做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:54:45.487

如果您想比较两个表以查看有什么不同，则关键字是“除外”

* * *

```
select col1,col2,... from table1
except
select col1,col2,... from table2 
```

这为您提供了 table1 中不在 table2 中的所有内容。

* * *

```
select col1,col2,... from table2
except
select col1,col2,... from table1 
```

这为您提供了 table2 中不在 table1 中的所有内容。

* * *

假设您在两个表上都有某种有用的持久主键，那么两组中的所有内容都会发生变化。第一组中的所有内容都是插入；第二组中的所有内容都是删除。

# perl - Mojolicious 渲染器中 TT 的 RETURN 指令的等价物是什么？

> ID：10094986
> 
> 赞同：3
> 
> 时间：2012-04-10T19:15:43.407
> 
> 标签：perl, rendering, mojolicious

在 Template Toolkit 中有一个[`RETURN`](http://template-toolkit.org/docs/modules/Template.html#section_RETURN)指令可用于停止处理当前模板并返回到调用它的模板。我怎样才能在 Mojolicious 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:09:46.990

根据[文档](http://mojolicio.us/perldoc/Mojo/Template)说*模板就像 Perl subs 一样工作（实际上它们在内部被编译为 Perl sub）*，我做了一些实验。看来，一个简单的

```
% return; 
```

从模板返回，丢弃其所有输出。和

```
% return $_M; 
```

从模板返回并保留在 return 语句之前生成的所有输出。

请注意，这些是非官方的黑客攻击。要找到与 Mojolicious 内部交互的更多可能性，您可以尝试

```
% use Data::Dumper; return Dumper $self; 
```

在您的模板中查看输出并发现编译模板中发生的几乎所有内容。

# data-structures - 基本树概念：定义祖先

> ID：10094991
> 
> 赞同：12
> 
> 时间：2012-04-10T19:15:51.010
> 
> 标签：data-structures, tree

![在此处输入图像描述](../Images/db395d0061c5e4fa1653f169eeed1012.png)

什么定义了祖先？更具体地说，E 会是 H 的祖先吗？或者更简单地说，F、C、A 是 H 的祖先？甚至可能是G？我只想澄清这个简单的概念。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T19:29:55.270

E 不是 H 的祖先。它是**叔叔**，因为它是 F 的**兄弟姐妹**，F 是H的**父母。**

F,C,A 是H 的**祖先**。这是真的。

G 根本与 H 无关。

树结构关系符号可以在这里找到（根据维基百科）

> *   节点的“父节点”是层次结构中更高一级的节点（即更靠近根节点）并位于同一分支上。
> *   “兄弟”（“兄弟”或“姐妹”）节点共享相同的父节点。
> *   节点的“叔叔”是该节点父节点的兄弟姐妹。
> *   连接到所有较低级别节点的节点称为“祖先”。连接的低级节点是祖先节点的“后代”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-30T14:24:34.833

`F, C, A`是`H`原因的祖先，存在从根`A`到节点的路径，`H`并且节点`F, C, A`出现在路径中。节点`H`被称为`descendant`节点`F, C and A`。

# objective-c - 在 UIImage 中点击位置

> ID：10094993
> 
> 赞同：0
> 
> 时间：2012-04-10T19:15:56.560
> 
> 标签：objective-c, uiimage, core-animation

我有一个 UIImageView，里面有一个 UIImage 设置为缩放纵横比。图像比宽高，并且在 UIImageView 的两侧都有一个透明区域。如何将 UIImageView 的点击位置转换为 UIImage 内的正确位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:26:00.660

你有图像的原始宽度和高度。将它与视图的宽度和高度分开。将因子乘以您点击的 和`image.size.height/view.frame.size.height`点击的。`y``image.size.width/view.frame.size.width``x`

# ocaml - 生成 *.cma 档案的签名和/或更简单的方法来链接 OCaml 档案文件

> ID：10094994
> 
> 赞同：2
> 
> 时间：2012-04-10T19:16:00.943
> 
> 标签：ocaml

与使用相同：

```
ocamlc -i foo.ml 
```

*要为foo.ml*生成默认签名，有没有办法从编译文件 (*.cmo) 或存档 (*.cma) 生成签名？

我的用例是我有一个要链接的存档**abcd.cma ，其中包含许多模块（例如模块***a*、*b*、*c*和*d*），我不想打扰多个 *.mli 和 *。 cmi 我的 Makefile 需要处理以编译和链接用户端代码（使用该库）。例如说我有文件**uses_a.ml**只使用**abcd.cma档案中****的**模块。我的理解是，要与**abcd.cma**模块链接，我必须通过以下动作：

 ****```
ocamlc -i a.ml > a.mli
ocamlc -c a.mli
ocamlc -c uses_a.ml  
ocamlc abcd.cma uses_a.cmo 
```

如果我无法访问来源或签名，这似乎太复杂或不可能。鉴于我在最后一个命令中向编译器提供了整个存档，我不清楚为什么我必须通过编译（或生成 - 如果我可以访问源）模块的特定签名文件的仪式我我正在使用。最后一个命令可能已被该工具解释为邀请使用存档中存在的任何模块的“默认”签名，该文件中的后续模块使用该行。顺便说一句，我现在不想使用自动 Makefile 生成工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:43:29.327

如果您必须编译 a.ml 和 a.mli，那么拥有库是没有意义的。

库通常由一个`abcd.cma`文件（或两者都包含`abcd.a`在`abcd.cmxa`本机代码中）和从库中导出的模块的一组接口（.cmi 文件）组成。因此，通常，在您的情况下，该文件`a.cmi`应与库一起提供。

在这种情况下，您只需要执行以下操作：

```
 ocamlc -I path/to/directory/containing_a.cmi -c uses_a.ml
 ocamlc -o program.opt abcd.cma uses_a.cmo 
```****

# vba - 1004 错误 - 将公式动态分配给单元格范围

> ID：10094996
> 
> 赞同：2
> 
> 时间：2012-04-10T19:16:20.717
> 
> 标签：vba, excel, excel-2007, range, formula

我正在尝试动态设置在执行宏时输入公式的单元格。这段代码将循环大约 10 次，每次都有一个新的员工部分。由部门订购。因此，当循环回到这一点时，第一个单元格将发生变化。

我收到此错误：

> 对象“_Global”的方法“范围”失败

这是我的代码：

```
'Select the top cell in the "%Working" Column

Range(Cells(StartTemp, 9)).Select

'Insert the Formula - Billable/(Billable + Unbillable) * 100 into Column I for each section
'Formula is 'C4/(C4+C5)*100

Range(Cells(StartTemp, 9)).Formula = "=RC[-6]/(RC[-6]+RC[-5]) *100" 
Range(Cells(StartTemp, 9)).Select
Selection.NumberFormat = "0.00%"

'Insert the Formula into all cells in the section for this group.

Selection.AutoFill Destination:=Range(Cells(StartTemp, 9), Cells(EndTemp, 9)), Type:=xlFillDefault    

Range(Cells(StartTemp, 9), Cells(EndTemp, 9)).Select 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:49:27.843

您收到该错误是因为您正在使用`Range(Cells(StartTemp, 9))`

`Range`与您一起使用时，`Cells`不能只使用一个单元格。语法是

***范围（单元格 1，单元格 2）***

![在此处输入图像描述](../Images/7982ae884c780b7e2801fc93acbc78fc.png)

这会给你一个你得到的错误:)

```
Msgbox Range(Cells(1, 1)).Address 
```

![在此处输入图像描述](../Images/20651204956524f98deb7b63ae83f832.png)

还要避免使用`.Select`. 它们也是导致错误的主要原因。

将您的代码更改为此并重试（**未**测试）

```
With Cells(StartTemp, 9)
    .Formula = "=RC[-6]/(RC[-6]+RC[-5]) * 100"
    .NumberFormat = "0.00%"
    .AutoFill Destination:=Range(Cells(StartTemp, 9), Cells(EndTemp, 9)), Type:=xlFillDefault
End With 
```

现在试试看。

# python - 当初始条件作为参数传递时，使用 python 最小平方拟合 ODE 会产生强制转换错误

> ID：10094998
> 
> 赞同：1
> 
> 时间：2012-04-10T19:16:34.910
> 
> 标签：python, scipy, least-squares

我有一组数据，我正在尝试使用 scipy 的 minimumsq 函数拟合 ODE 模型。我的 ODE 有参数`beta`and `gamma`，所以它看起来像这样：

```
# dS/dt = -betaSI
# dI/dt = betaSI - gammaI
# dR/dt = gammaI
# with y0 = y(t=0) = (S(0),I(0),R(0)) 
```

这个想法是找到`beta`和`gamma`使我的 ODE 系统的数值积分最接近数据。如果我知道初始条件中的所有点，我可以使用 leastsq 很好地做到这一点`y0`。

现在，我正在尝试做同样的事情，但现在将其中一个条目`y0`作为额外参数传递。这是 Python 和我停止通信的地方......我做了一个函数，所以现在我传递给 leastsq 的参数的第一个条目是我的变量 R 的初始条件。我收到以下消息：

```
*Traceback (most recent call last):
  File "/Users/Laura/Dropbox/SHIV/shivmodels/test.py", line 73, in <module>
    p1,success = optimize.leastsq(errfunc, initguess, args=(simpleSIR,[y0[0]],[Tx],[mydata]))
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/scipy/optimize/minpack.py", line 283, in leastsq
    gtol, maxfev, epsfcn, factor, diag)
TypeError: array cannot be safely cast to required type* 
```

这是我的代码。对于这个例子来说，它需要做的更复杂一些，因为实际上我想用 7 个参数拟合另一个 ode，并且想一次拟合多个数据集。但我想在这里发布一些更简单的东西......任何帮助都将非常感激！非常感谢你！

```
import numpy as np
from matplotlib import pyplot as plt
from scipy import optimize
from scipy.integrate import odeint

#define the time span for the ODE integration:
Tx = np.arange(0,50,1)
num_points = len(Tx)

#define a simple ODE to fit:
def simpleSIR(y,t,params):
    dydt0 = -params[0]*y[0]*y[1]
    dydt1 = params[0]*y[0]*y[1] - params[1]*y[1]
    dydt2 = params[1]*y[1]
    dydt = [dydt0,dydt1,dydt2]
    return dydt

#generate noisy data:
y0 = [1000.,1.,0.]
beta = 12*0.06/1000.0
gamma = 0.25
myparam = [beta,gamma]
sir = odeint(simpleSIR, y0, Tx, (myparam,))

mydata0 = sir[:,0] + 0.05*(-1)**(np.random.randint(num_points,size=num_points))*sir[:,0]
mydata1 = sir[:,1] + 0.05*(-1)**(np.random.randint(num_points,size=num_points))*sir[:,1]
mydata2 = sir[:,2] + 0.05*(-1)**(np.random.randint(num_points,size=num_points))*sir[:,2]
mydata = np.array([mydata0,mydata1,mydata2]).transpose()

#define a function that will run the ode and fit it, the reason I am doing this
#is because I will use several ODE's to see which one fits the data the best.
def fitfunc(myfun,y0,Tx,params):
    myfit = odeint(myfun, y0, Tx, args=(params,))
    return myfit

#define a function that will measure the error between the fit and the real data:
def errfunc(params,myfun,y0,Tx,y):
    """
    INPUTS:
    params are the parameters for the ODE
    myfun is the function to be integrated by odeint
    y0 vector of initial conditions, so that y(t0) = y0
    Tx is the vector over which integration occurs, since I have several data sets and each 
    one has its own vector of time points, Tx is a list of arrays.
    y is the data, it is a list of arrays since I want to fit to multiple data sets at once
    """
    res = []
    for i in range(len(y)):
        V0 = params[0][i]
        myparams = params[1:]
        initCond = np.zeros([3,])
        initCond[:2] = y0[i]
        initCond[2] = V0
        myfit = fitfunc(myfun,initCond,Tx[i],myparams)
        res.append(myfit[:,0] - y[i][:,0])
        res.append(myfit[:,1] - y[i][:,1])
        res.append(myfit[1:,2] - y[i][1:,2])
    #end for
    all_residuals = np.hstack(res).ravel()
    return all_residuals
#end errfunc

#example of the problem:

V0 = [0]
params = [V0,beta,gamma]  
y0 = [1000,1]

#this is just to test that my errfunc does work well.
errfunc(params,simpleSIR,[y0],[Tx],[mydata])
initguess = [V0,0.5,0.5]

p1,success = optimize.leastsq(errfunc, initguess, args=(simpleSIR,[y0[0]],[Tx],[mydata])) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:38:53.930

问题在于变量 initguess。函数 optimize.leastsq 具有以下调用签名：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.leastsq.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.leastsq.html)

它的第二个参数 x0 必须是一个数组。你的清单

```
initguess = [v0,0.5,0.5] 
```

不会被转换为数组，因为 v0 是一个列表，而不是一个 int 或 float。因此，当您尝试在 leastsq 函数中将 initguess 从列表转换为数组时会出现错误。

我会调整变量参数

```
def errfunc(params,myfun,y0,Tx,y): 
```

所以它是一个一维数组。将前几个条目设为 v0 的值，然后将 beta 和 gamma 附加到该值。