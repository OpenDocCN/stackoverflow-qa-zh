# StackOverflow 问答 11188000-11188999

# ruby-on-rails - Ruby on Rails ActiveRecordStore 是否可以跨服务器进行负载平衡？

> ID：11188002
> 
> 赞同：2
> 
> 时间：2012-06-25T10:56:44.397
> 
> 标签：ruby-on-rails

我们目前正在使用 pfsense 测试负载平衡，我正在研究如果用户连接的原始服务器出现故障，rails 会话会发生什么。有没有办法在服务器之间同步 ActiveRecordStore 数据，或者像 SQLSessionStore 这样的东西是最好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:06:29.843

是的，Ruby on Rails 支持多个 SessionStore 后端，默认情况下它使用基于 cookie 的后端。但是，如果您愿意，您也可以将会话保留在数据库中。

相关文档在这里： [http ://api.rubyonrails.org/classes/ActiveRecord/SessionStore.html](http://api.rubyonrails.org/classes/ActiveRecord/SessionStore.html)

设置 ActiveRecord 模型用作 SessionStore 后，您可以通过以下方式将 Rails 应用程序配置到不同的 SessionStore：

```
config.action_controller.session_store = :active_record_store 
```

我不得不承认到目前为止我还没有在我的任何项目中尝试过这个，但是你应该能够通过尝试来弄清楚:)

# jquery - 在 jQuery 中，如何检索给定类的 id？

> ID：11188004
> 
> 赞同：0
> 
> 时间：2012-06-25T10:56:46.997
> 
> 标签：jquery

> **可能重复：**
> [获取使用 JQuery 触发事件的元素的 ID](https://stackoverflow.com/questions/48239/getting-the-id-of-the-element-that-fired-an-event-using-jquery)

举个例子假设我有

```
<p id="name" class="editable"... 
```

后来在JavaScript中我有

```
$("#editable").focusout(function(e){... 
```

如何检索刚刚失去焦点的元素的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:58:50.123

您在 jQuery 中有错误的选择器，必须是：

```
$(".editable") 
```

要提醒`id`失去焦点的元素，您需要`this`在回调中使用上下文作为选择器：

```
$(".editable").focusout(function() {
    alert($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:58:40.303

```
$(".editable").focusout(function(e){
    var id = $(this).attr('id');
}); 
```

或者，如果`.editable`元素只是一个包装器并且有趣的元素 ( `input`) 是它的子元素，那么：

```
$(".editable").focusout(function(e){
    var id = $(e.target).attr('id');
});​ 
```

演示：http: [//jsfiddle.net/sveinatle/MWvAV/1/](http://jsfiddle.net/sveinatle/MWvAV/1/)

# php - PHP脚本调用自己

> ID：11188006
> 
> 赞同：0
> 
> 时间：2012-06-25T10:56:54.063
> 
> 标签：php

我红色的是执行 PHP 脚本有一个限制，我想知道如果我找到一种方法让脚本调用自身并在完成执行后附加一个参数，那么 max_execution_time 的计时器是否再次从 0 开始。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:05:20.397

是的，它每次都会创建一个新实例。

您可以增加执行时间`set_time_limit()`

例子 ：

您的脚本持续 20 秒，但您还需要 20 秒，请使用：`set_time_limit(20)`

但是，如果您想增加最大执行时间，请更改您的`php.ini`值：`max_execution_time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:23:23.273

只需在脚本顶部执行此操作：

```
ini_set("max_execution_time","300"); 
```

**记住：它必须在脚本的**顶部`300 or any integer value is the number of seconds the script should be allowed to run for`

# c# - 如何在运行时在 aspx 页面中加载用户控件？

> ID：11188009
> 
> 赞同：1
> 
> 时间：2012-06-25T10:56:59.227
> 
> 标签：c#, asp.net

我在某个 Control 文件夹中放置了 5 个用户控件，在运行时基于一些 ID 我想将用户控件从 Control 文件夹加载到 aspx 页面。任何人都可以告诉我应该如何传递该 ID 来修复在运行时将哪个用户控件加载到某个 div 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:58:39.907

在页面初始化中

```
UserControl uc = new UserControl();
string ID = "1";
string userControl ="UC" + ID + ".ascx";
uc = LoadControl(userControl) as UserControl;
PlaceHolder1.Controls.Add(uc); //some place holder to place controls 
```

# windows-7 - 如何使用 Xuggler 将 Mp4 转换为 mpg

> ID：11188017
> 
> 赞同：0
> 
> 时间：2012-06-25T10:57:39.400
> 
> 标签：windows-7

我正在尝试使用 Xuggler 将视频从 mpg 转换为 mp4 但是在读取旧文件或写入新文件时，我收到以下错误我该怎么办。请帮助。

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError:    org/slf4j/LoggerFactory
at com.xuggle.ferry.JNILibrary.<clinit>(JNILibrary.java:42)
at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:14)
at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25)
at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622)
at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137)
at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77)
at Maind.Main$HandlerClass3.actionPerformed(Main.java:1055)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)

at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)

at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)

at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)

at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)
... 44 more 
```

那有什么问题？提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:53:06.600

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory at com.xuggle.ferry.JNILibrary.<clinit>(JNILibrary.java:42) 
```

这意味着您需要在类路径中放入存档：（`slf4j-api-1.6.1.jar`或最新版本）。

# java - 如何在 javafx 2.1 中等待过渡结束？

> ID：11188018
> 
> 赞同：8
> 
> 时间：2012-06-25T10:57:43.490
> 
> 标签：java, concurrency, javafx

我的场景仅包含一个[ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)，显示图像。我想将图像淡化为黑色（场景的指定颜色），然后在一段时间后再次从黑色淡化为图像。我发现[FadeTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/FadeTransition.html)非常适合此目的。这是我的一段代码：

```
 // fade to black transition
    FadeTransition ft1 = new FadeTransition(Duration.millis(2000), myImageView);
    ft1.setFromValue(1.0);
    ft1.setToValue(0.0);
    ft1.play();

    // fade from black transition
    FadeTransition ft2 = new FadeTransition(Duration.millis(2000), myImageView);
    ft2.setFromValue(0.0);
    ft2.setToValue(1.0);
    ft2.play(); 
```

我的问题是异步的，所以下面的代码将在退出`ft1.play()`之前开始执行。`ft1.play()`结果，我只看到第二个过渡。如何等待第一个过渡结束然后启动第二个过渡？我不能让线程在两者之间休眠，因为它是主要的 javafx 线程（尝试过但没有工作）。

我尝试将 onFinishedProperty() 方法与标志上的忙等待结合使用，但我永远卡在 while 循环中。这是我的代码：

```
 boolean isTransitionPlaying;
    FadeTransition ft = new FadeTransition(Duration.millis(2000), iv);
    ft.setFromValue(1.0);
    ft.setToValue(0.0);
    ft.onFinishedProperty().set(new EventHandler<ActionEvent>() {
        @Override 
        public void handle(ActionEvent actionEvent) {
            transitionPlaying = false;
        }
    });
    transitionPlaying = true;
    ft.play();

    while (transitionPlaying == true)
    {
        // busy wait
        System.out.println("still waiting...");
    }

    FadeTransition ft2 = new FadeTransition(Duration.millis(2000), iv);
    ft2.setFromValue(0.0);
    ft2.setToValue(1.0);
    ft2.play(); 
```

等待是如何正确完成的？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-25T11:15:18.220

好的，如果你`ft2`是`ft1`那么做的反射动画

```
ft1.setAutoReverse(true);
ft1.setCycleCount(1);
// Or
// ft1.setCycleCount(Timeline.INDEFINITE);
// to loop infinitely (blinking effect) until stop() 
```

而你没有`ft2`。如果之后还需要`ft2`玩`ft1`

```
ft1.setOnFinished(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent event) {
        ft2.play();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:25:47.000

在 JavaFX 应用程序线程上忙于等待（甚至是 Thread.sleep）总是一个坏主意——你占用了处理 UI 处理的线程，因此你的转换以及你的 UI 的其余部分永远不会更新——有效地冻结你的繁忙等待期间的应用程序 UI。对于响应式 UI，您需要尽快在 FX 应用程序线程上运行逻辑，然后让线程运行，以便 JavaFX 系统的其余部分可以继续处理它。这就是过渡具有异步回调的原因——一旦你习惯了它们，这就是一种非常自然的开发方式。

除了 Uluk 的解决方案（非常棒），您还可以查看[SequentialTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/SequentialTransition.html)类，以帮助处理按顺序执行转换的帮助。请注意，如果您想在 SequentialTransition 完成后执行操作，您仍需要将 onFinished 处理程序添加到 SequentialTransition 以在此时执行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T17:41:16.420

我在其他代码进行一些计算时遇到问题，我想在 JavaFX 应用程序中运行动画，但需要制作其他代码来等待动画完成。当动画完成时我无法告诉其他代码，所以我创建了播放动画然后等待它完成的方法：

```
 private synchronized void playAnimationAndWaitForFinish(final Animation animation) {
    if (Platform.isFxApplicationThread()) {
        throw new IllegalThreadStateException("Cannot be executed on main JavaFX thread");
    }
    final Thread currentThread = Thread.currentThread();
    final EventHandler<ActionEvent> originalOnFinished = animation.getOnFinished();
    animation.setOnFinished(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
            if (originalOnFinished != null) {
                originalOnFinished.handle(event);
            }
            synchronized (currentThread) {
                currentThread.notify();
            }
        }
    });
    Platform.runLater(new Runnable() {

        @Override
        public void run() {
            animation.play();
        }
    });
    synchronized (currentThread) {
        try {
            currentThread.wait();
        } catch (InterruptedException ex) {
            //somebody interrupted me, OK
        }
    }
} 
```

要求此方法不在 JavaFX 主线程中调用，否则它适用于我。

# jquery - 工具提示代码不起作用

> ID：11188021
> 
> 赞同：2
> 
> 时间：2012-06-25T10:57:49.990
> 
> 标签：jquery, tooltip

我创建了一个 ID 为“tt-content”的 div，当我将鼠标悬停在链接上时，我希望 div 和其中包含的所有 html 显示为工具提示。我使用了 jquery bodyhandler，但我的代码仍然无法正常工作。我最近才开始编码，所以我不知道这是我的语法问题还是代码完全错误。先感谢您。

```
<html>
<head>

<script type="text/javascript"     src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" >

$(document).ready(function(){
   $("a").hover(function () {

        $("a").tooltip({
         bodyHandler: function() { 
        return $("#tt-content").html(); 
    },
    showURL: false 
        });
    });
});
</script>

</head>

<body>
<a href="#">Display Tooltip</a>

<div  id= "tt-content" style="width:250px" >

<p>HTML TO BE DISPLAYED IN THE TOOLTIP.</p>
<p>EVEN MORE HTML</P>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:03:38.173

JQuery 函数工具提示不是核心 jquery 库的一部分，它是维度库[http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip)的一部分，因此您需要添加对此的引用。也就是说，Jquery 页面上的 Drupal 站点似乎已关闭....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:03:57.813

您正在使用 jQuery 的插件并忘记包含它的 javascript 和 css 文件：

```
<script type="text/javascript" src="http://jquery.bassistance.de/tooltip/jquery.tooltip.js"></script>
<link rel="stylesheet" href="http://jquery.bassistance.de/tooltip/jquery.tooltip.css" />
<!-- You would probably need to copy those files to your server. --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:07:58.663

如果您没有丢失任何特定的插件 JS 文件，请在您的脚本标记之前包含这些 JS。

检查 jquery 工具提示的演示 - [http://docs.jquery.com/Plugins/Tooltip/tooltip#options](http://docs.jquery.com/Plugins/Tooltip/tooltip#options)

```
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/tooltip/jquery.dimensions.js"></script>
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/tooltip/jquery.tooltip.js"></script> 
```

# android - Android使用姓名获取联系电话

> ID：11188028
> 
> 赞同：0
> 
> 时间：2012-06-25T10:58:12.177
> 
> 标签：android

我正在尝试在android上制作一个应用程序，将联系人姓名作为字符串输入，如果电话簿中存在该联系人，则返回他的电话号码......

我试着四处搜索，但没有关于如何做到这一点的明确教程

输入：联系人姓名 输出：电话号码

请帮忙

```
 Cursor cursor = context.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 

     while (cursor.moveToNext()) { 
         String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

         if(name.equalsIgnoreCase(token3)) {

        try{     ContentResolver cr = context.getContentResolver();
             Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { ContactsContract.CommonDataKinds.Phone._ID}, null);
             String lname = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

         Toast.makeText(context, "number is "+lname, Toast.LENGTH_LONG).show();
        }catch (Exception e) {
            // TODO: handle exception
        }

         }
           } 
```

这是我到目前为止所拥有的。try catch 块中的一段代码总是崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:48:23.380

我最终写了这个方法来解决我的问题

```
public String get_Number(String name,Context context)

{String number="";

Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER};

Cursor people = context.getContentResolver().query(uri, projection, null, null, null);

int indexName = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

people.moveToFirst();
do {
    String Name   = people.getString(indexName);
    String Number = people.getString(indexNumber);
    if(Name.equalsIgnoreCase(name)){return Number.replace("-", "");}
    // Do work...
} while (people.moveToNext());

if(!number.equalsIgnoreCase("")){return number.replace("-", "");}
else return number;
} 
```

它可能不是很有效，但它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:03:58.837

试试这个方法...

```
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,);
String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
if(name.equals(Your_String)) {
    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);
    String lname = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-22T16:18:48.847

试试这个方法。。

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
            String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                    ContactsContract.CommonDataKinds.Phone.NUMBER};

            Cursor cursor = getContentResolver().query(uri, projection, null, null, null);

            int idxName = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
            int idxNumber = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

            if(cursor.moveToFirst()) {
                do {
                    contactname   = cursor.getString(idxName);
                    contactNumber = cursor.getString(idxNumber);

                    if (contactname.equals("YOUR CONTACT NAME")){
                        Log.d(LOG_TAG,"Contact Name -> "+ contactname +" Contact Number -> "+ contactNumber);
                    }
                } while (cursor.moveToNext());
            }
            cursor.close(); 
```

# ember.js - 如何读取 Ember.View.extend 的属性

> ID：11188029
> 
> 赞同：1
> 
> 时间：2012-06-25T10:58:16.387
> 
> 标签：ember.js

我有定义自定义标记名的视图。我需要能够在程序的其他地方读取这个 tagName。有没有办法做到这一点？

JS 小提琴：http: [//jsfiddle.net/oportocala/VDMym/](http://jsfiddle.net/oportocala/VDMym/)

```
var MyView = Ember.View.extend({
    tagName: 'section'
});

Ember.Application.create({
    ready: function () {
       alert(MyView.tagName);         
    }
});
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:16:55.053

您正试图从一个类中访问一个实例变量。如果您从视图实例访问该值，则它可以正常工作。

[http://jsfiddle.net/VDMym/1/](http://jsfiddle.net/VDMym/1/)

```
var MyView = Ember.View.extend({
    tagName: 'section'
});

Ember.Application.create({
    ready: function () {
       alert(MyView.create().get('tagName'));         
    }
}); 
```

​</p>

此外，在 Ember 中，您需要使用`get`和`set`方法来访问变量。

编辑：如果你真的想要一个类变量`reopenClass`，而不是`extend`在定义视图时使用。

# spring - javaScriptEscape 在javascript文件中不起作用（Spring-MVC）

> ID：11188030
> 
> 赞同：0
> 
> 时间：2012-06-25T10:58:16.590
> 
> 标签：spring, spring-mvc

我正在尝试在 java-script 文件中使用 spring-mvc 标记，这就是我想要做的

```
var firstName="<spring:theme code='register.firstName.invalid' javaScriptEscape='true'> "; 
```

似乎它不像使用`alert(firstName)`它提供相同的文本而不是资源包中的文本时那样工作。

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:26:07.790

Spring不处理标准javascript文件，它只是一个静态文件，由Web容器按原样提供，没有任何转换。

如果您需要使用服务器端逻辑（如 Spring 标签）设置一些 Javascript 变量，您可以在 JSP 中完成，并从 javascript 中使用它。

或者您也可以编写自己的请求过滤器，它会即时处理和转换您的静态文件，但这是主要的性能损失。

# objective-c - NSImageView 子类中未调用 mouseEntered 和 mouseExited

> ID：11188034
> 
> 赞同：37
> 
> 时间：2012-06-25T10:58:25.610
> 
> 标签：objective-c, macos, cocoa, nsimageview

我创建了一个子类`NSImageView`来捕获`mouseEntered` 和`mouseExited`事件。但只有`mouseUp`和`mouseDown`事件被调用。如何捕获子类中的`mouseEntered`和`mouseExited`事件`NSImageView`？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-25T13:57:59.553

如果您想使用`mouseEntered:`并且`mouseExited:`需要使用`NSTrackingArea`. 这是参考[NSTrackingArea 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTrackingArea_class/Reference/Reference.html)。

**例子：**

```
//Add this to Your imageView subclass

-(void)mouseEntered:(NSEvent *)theEvent {
    NSLog(@"Mouse entered");
}

-(void)mouseExited:(NSEvent *)theEvent
{
    NSLog(@"Mouse exited");
}

-(void)updateTrackingAreas
{ 
    [super updateTrackingAreas];
    if(trackingArea != nil) {
        [self removeTrackingArea:trackingArea];
        [trackingArea release];
    }

    int opts = (NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways);
    trackingArea = [ [NSTrackingArea alloc] initWithRect:[self bounds]
                                                 options:opts
                                                   owner:self
                                                userInfo:nil];
    [self addTrackingArea:trackingArea];
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-06-03T01:25:03.277

Swift 4 版本的[Justin Boo 的回答](https://stackoverflow.com/questions/11188034/mouseentered-and-mouseexited-not-called-in-nsimageview-subclass/11190700#11190700)

```
override func updateTrackingAreas() {
    super.updateTrackingAreas()

    for trackingArea in self.trackingAreas {
        self.removeTrackingArea(trackingArea)
    }

    let options: NSTrackingArea.Options = [.mouseEnteredAndExited, .activeAlways]
    let trackingArea = NSTrackingArea(rect: self.bounds, options: options, owner: self, userInfo: nil)
    self.addTrackingArea(trackingArea)
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-14T11:47:18.630

**Swift 3**版本的[@Justin Boo](https://stackoverflow.com/a/11190700/819340)的回答：

```
private var trackingArea: NSTrackingArea?

override func updateTrackingAreas() {
    super.updateTrackingAreas()

    if let trackingArea = self.trackingArea {
        self.removeTrackingArea(trackingArea)
    }

    let options: NSTrackingAreaOptions = [.mouseEnteredAndExited, .activeAlways]
    let trackingArea = NSTrackingArea(rect: self.bounds, options: options, owner: self, userInfo: nil)
    self.addTrackingArea(trackingArea)
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-12T16:01:15.587

C# Xamarin 版本的 Justin Boo 的回答

```
public override void UpdateTrackingAreas ()
{
    base.UpdateTrackingAreas ();

    foreach (var item in TrackingAreas ()) {
        RemoveTrackingArea (item);
    }

    var options = NSTrackingAreaOptions.MouseEnteredAndExited | NSTrackingAreaOptions.ActiveAlways;

    var trackingArea = new NSTrackingArea (this.Bounds, options, this, null);

    AddTrackingArea (trackingArea);
} 
```

# jsf-2 - JSF ui：分页重复

> ID：11188036
> 
> 赞同：1
> 
> 时间：2012-06-25T10:58:29.160
> 
> 标签：jsf-2, primefaces

我想知道如何做一个 ui:repeat 多页，我点击上一个/下一个按钮来查看下一组数据。

目前我有一个 ui:repeat

```
<ui:repeat id="repeat5" value="#{getData.data}" var="lst2" varStatus="loop"> 
```

我可以按行/列查看内容（基本上是图像），但所有数据都显示在同一屏幕上，但我只想显示 5 行和 4 列，然后使用上一个/下一个按钮查看剩余的图像5 行/ 4 列布局。

目前我只能指定如下所示的列配置，如何获取指定的行。

```
<h:panelGrid  id="panelGrid3" columns="4" cellspacing="2" cellpadding="2"> 
```

**更新 1（Rasmus Franke 的代码）**

请根据您的要求找到代码。

```
<h:form id="mainForm">
<p:tabView id="tabView" >
    <p:tab title="Image Viewer" id="Viewer" titleStyle="height:30px">
        <p:layout>
        <p:layoutUnit id="layoutEast" position="east" size="350" style="height:200px">
                        <p:commandButton type="button" onclick=""  
                                         icon="ui-icon-circle-triangle-w"/>  
                        <p:commandButton type="button" onclick="switchPage(1,29);"  
                                         icon="ui-icon-circle-triangle-e"/>
                        <h:panelGrid  id="panelGrid3" columns="5" cellspacing="2" cellpadding="2">
                            <ui:repeat id="repeat5" value="#{getData.data}" var="imagesLst2" varStatus="loop">
                                    <h:panelGroup>
                                        <p:commandLink id="cl3" action="#{getData.imageID(imagesLst2.imageID)}" update=":mainForm:tabView:example">
                                            <p:graphicImage id="gi3" value="#{imagesStreamer.image}" styleClass="bord" 
                                                            onmousedown="mouseDown(this)" alt="image not available3"  width="60" height="60"
                                                            style="#{loop.index > 29 ? 'visibility: hidden;' : ''}">
                                                <f:param name="id5" value="#{imagesLst2.imageID}" />
                                            </p:graphicImage>
                                        </p:commandLink>
                                    </h:panelGroup>
                            </ui:repeat>
                        </h:panelGrid>
                    </p:layoutUnit>
        </p:layout>
    </p:tab>
</p:tabView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:13:07.477

您希望分页在服务器端还是客户端工作？

如果服务器端：您需要在托管 bean 中创建一个属性，并将其设置为您的分页值：例如 int，它的值为 5，用于第 5 页。使用此数据修改 getData.data 使其仅包含该页面的数据。这样，您只需获取为每个页面显示的相关数据，但您必须通过普通帖子或通过 ajax 为每次分页点击发出 http 请求。

如果客户端：所有页面的所有数据都应包含在 ui:repeat 中，以使其可用于客户端的 javascript 修改。换句话说，就像现在一样。添加“可见性：隐藏；” 除第一页服务器端外的所有行，`style="#{loop.index > x ? 'visibility: hidden;' : ''}"`其中 x 是显示的行数。然后制作一个在页面更改时调用的javascript函数，其中包含页码和每页元素数的参数。

```
function switchPage(page, numPerPage){
    var first = (page-1) * numPerPage;
    var last = (page) * numPerPage;
    $('#panelGrid3 tr').show();
    $('#panelGrid3 tr').each(function(i, e){
        if(i >= first || i <= last){
           $(e).show();
        }else{
           $(e).hide();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:11:57.640

我发现 ui:repeat 具有偏移量和大小，这有助于进行分页，我们需要在托管 bean 中实现逻辑（只需跟踪图像的数量、显示的图像并不断增加/减少上一个和下一个的数字按钮[将控制分页]）。

# android - 电话类型和电子邮件类型不起作用？

> ID：11188037
> 
> 赞同：0
> 
> 时间：2012-06-25T10:58:29.133
> 
> 标签：android

我项目中的电话类型和电子邮件类型有问题。我使用的是2.1平台，我的项目在添加电话类型和电子邮件类型之前没有问题，使用这些电话类型和电子邮件类型后，我尝试运行项目它打开一个消息框并显示应用程序已停止并强制关闭。我的 xml 文件有一个 Button 和 ListView。我正在使用此代码。

**代码**

```
 public class GetAllDatas extends Activity {

ListView lvItem;
private Button btnAdd;
String Ptype, Etype;
int contactPhoneType;

String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>(); 
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lvItem = (ListView)this.findViewById(R.id.lvitems); 
    btnAdd = (Button)this.findViewById(R.id.btnAddItem);

    itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
    lvItem.setAdapter(itemAdapter);

    btnAdd.setOnClickListener(new View.OnClickListener() { 
        public void onClick(View v) {
            readContacts();
        }
    });

} 

private void readContacts()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

    while (cursor.moveToNext()) 
    {
        displayName  = "" ;
        ArrayList<String> phoneNumber  = new ArrayList<String>();
        ArrayList<String> emailAddress  = new ArrayList<String>();

        displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

        /*                   Email                   */ 

        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        { 
            emailAddress.add(emails.getString(emails.getColumnIndex(Email.DATA)));

        } 

         contactPhoneType = emails.getInt(emails.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

        switch(contactPhoneType){
        case ContactsContract.CommonDataKinds.Phone.TYPE_HOME: 
        Etype = "Home";
        break;

        }

        emails.close(); 

      /*            Phone Number and Type   */ 

        if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
           while (pCur.moveToNext()) 
            {
                 phoneNumber.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));                               
           }

            contactPhoneType = pCur.getInt(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

           switch(contactPhoneType){
           case ContactsContract.CommonDataKinds.Phone.TYPE_HOME: 
           Ptype = "Home";
           break;

           }

            pCur.close();  
        }   

int phoneNumberCount = phoneNumber.size();
int emailCount = emailAddress.size();

// Add arraylist data to contactlist..

if(phoneNumberCount > emailCount) {

    for (int i=0; i<phoneNumberCount; i++)
      {
        if(emailCount>i)
          {
           contactlist.add(displayName +  " , " +  Ptype + " , " + phoneNumber.get(i) + " , " + Etype + " , " + emailAddress.get(i) + "\n");    
           }
        else
        {
          contactlist.add(displayName + " , " +  Ptype + " , " + phoneNumber.get(i) + " , " + " , " + "\n");
        } 
       }
    }
    else  
       {
        for (int i=0; i<emailCount; i++) 
         {
        if(phoneNumberCount>i)
          {
            contactlist.add(displayName + " , " + Ptype + " , " + phoneNumber.get(i) + " , " +  Etype + " , " + emailAddress.get(i) + "\n"); 
          }
        else
        { 
          contactlist.add(displayName + " , " + " , " + " , " + Etype + " , " + emailAddress.get(i) +  "\n");
        }
      }
    }      
    }
    Collections.sort(contactlist);
    itemAdapter.notifyDataSetChanged();
    cursor.close(); 
} 
```

}

**日志猫**

```
06-26 13:31:16.213: E/AndroidRuntime(449): Uncaught handler: thread main exiting due to   uncaught exception
06-26 13:31:16.224: E/AndroidRuntime(449): android.database.CursorIndexOutOfBoundsException: Index 1 requested, with a size of 1
06-26 13:31:16.224: E/AndroidRuntime(449):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
06-26 13:31:16.224: E/AndroidRuntime(449):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
06-26 13:31:16.224: E/AndroidRuntime(449):  at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:84)
06-26 13:31:16.224: E/AndroidRuntime(449):  at android.database.CursorWrapper.getInt(CursorWrapper.java:123)
06-26 13:31:16.224: E/AndroidRuntime(449):  at com.abhi.GetAllDatas.readContacts(GetAllDatas.java:71)
06-26 13:31:16.224: E/AndroidRuntime(449):  at com.abhi.GetAllDatas.access$0(GetAllDatas.java:47)
06-26 13:31:16.224: E/AndroidRuntime(449):  at com.abhi.GetAllDatas$1.onClick(GetAllDatas.java:41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:14:21.790

正如 Dheeresh 所说，您必须更改该条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:24:43.060

看起来问题出在索引上

```
android.database.CursorIndexOutOfBoundsException: Index 1 requested, with a size of 1 
```

gor 获取 Phone.TYPE 可以按照此[http://www.vtgroup.com/#ContactsContract尝试以下代码](http://www.vtgroup.com/#ContactsContract)

```
 //  Get all phone numbers.
    //
    Cursor phones = cr.query(Phone.CONTENT_URI, null,
        Phone.CONTACT_ID + " = " + contactId, null, null);
    while (phones.moveToNext()) {
        String number = phones.getString(phones.getColumnIndex(Phone.NUMBER));
        int type = phones.getInt(phones.getColumnIndex(Phone.TYPE));
        switch (type) {
            case Phone.TYPE_HOME:
                // do something with the Home number here...
                break;
            case Phone.TYPE_MOBILE:
                // do something with the Mobile number here...
                break;
            case Phone.TYPE_WORK:
                // do something with the Work number here...
                break;
            }
    }
    phones.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:17:50.547

可能是这一行：

```
while (cursor.moveToNext()) 
```

对我来说，这看起来就像你在读取第一个光标位置之前就移动了光标，并且你得到了 CursorIndexOOB 异常。

请尝试使用 do-while 循环，看看是否有帮助。

此外，请检查您的应用程序是否有权读取联系人数据。

```
uses-permission android:name="android.permission.READ_CONTACTS" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:17:58.077

我在你的代码中得到了错误。`while`在将光标移到最后一条记录之后（循环超出最后一条记录后的 pCur.moveToNext()），您正在检查 phoneType 和 emailtype 。您需要在`while`循环内而不是在 if 之后检查它。更改以下内容：

```
while (pCur.moveToNext()) 
        {
             phoneNumber.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))); 

             int contactPhoneType = pCur.getInt(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

             switch(contactPhoneType){
                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME: 
                     Ptype = "Home";
                     break;
           }                  
       } 
```

对 emailType 也进行相同的更正。

# android - 标记周围的精度圈

> ID：11188041
> 
> 赞同：0
> 
> 时间：2012-06-25T10:58:44.303
> 
> 标签：android, mapping, location, osmdroid, mylocationoverlay

我在使用 Osmdroid 映射 API 的 android 映射应用程序中工作，直到现在我能够在地图中显示地图和用户位置，但是我如何显示标记周围的精度圈，并且可以在模拟器中进行测试仅限。{我需要一些示例或教程}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:18:40.740

扩展 Overlay 类并创建一个类并将其命名为 AccuracyIndi​​catorCircleOverlay（例如）。

```
public class AccuracyIndicatorCircleOverlay extends Overlay {
} 
```

现在重写draw方法：

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
   super.draw(canvas, mapView, shadow);
   // Now you can use getAccuracy() method of android.location.Location
   // to draw a circle based on your requirements.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:02:05.537

我不熟悉 osmdroid，但假设您可以访问位置数据（特别是准确度），我会说只是根据准确度更改图像。当您获得新位置时，如果精度与以前不同，则重置用于用户位置的图像。假设您获得位置更新，这似乎是最简单的解决方案。

如果您希望在地图视图中添加叠加层，这里是[关于 SO 的答案](https://stackoverflow.com/questions/5722490/android-maps-circle-overlay-dynamically-change-radius)，他们使用叠加层根据准确性创建半径。

# json - 在Perl中获取json元素的给定名称的所有元素

> ID：11188045
> 
> 赞同：0
> 
> 时间：2012-06-25T10:59:26.683
> 
> 标签：json, perl

我有一个 JSON 元素可以说

```
"profile": 
     {"name":"ankush", 
      "children":
             "web":[ 
                 {"children":
                       {"web":"hello"}
                 },
        {"hk":"fdf"}
                 ]
     } 
```

`web`我必须在 Perl中获取所有节点。有人可以建议一些可以给我所有“网络”实例的 JSON 功能。意味着我不想无限迭代，直到我得到所有实例只需一个电话就可以了。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:16:35.673

安装和使用 JSON 模块，例如[JSON::PP](https://metacpan.org/module/JSON%3a%3aPP)。

该模块将读取 JSON 并为您提供 perl 数据结构（数组或哈希引用）。

# ios - 使用 plist 字典填充 UITableView

> ID：11188049
> 
> 赞同：1
> 
> 时间：2012-06-25T10:59:57.340
> 
> 标签：ios, xcode, uitableview

一直在慢慢学习 IOS 编程的基础知识，但似乎遇到了一个小障碍

我有一个从位于网络服务器上的 plist 填充的表

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Item 0</key>
<dict>
    <key>eventDate</key>
    <string>27-06-2012</string>
    <key>eventTitle</key>
    <string>Clinic</string>
</dict>
<key>Item 1</key>
<dict>
    <key>eventDate</key>
    <string>28-06-2012</string>
    <key>eventTitle</key>
    <string>Clinic</string>
</dict>
<key>Item 2</key>
<dict>
    <key>eventDate</key>
    <string>28-06-2012</string>
    <key>eventTitle</key>
    <string>Office Closed</string>
</dict>
<key>Item 3</key>
<dict>
    <key>eventDate</key>
    <string>29-06-2012</string>
    <key>eventTitle</key>
    <string>Tour</string>
</dict>
</dict>
</plist> 
```

现在，在进行了大量阅读之后，我设法将这段代码组合在一起以填充表格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
UITableViewCell * cell =[tableView dequeueReusableCellWithIdentifier:@"cell"];

if (nil == cell)
{
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleSubtitle
            reuseIdentifier:@"cell"];
}

NSString *currentEventName;
currentEventName = [eventKey_web objectAtIndex:indexPath.row];
[[cell textLabel] setText:currentEventName];

return cell;
}

...

- (void)viewDidLoad
{
[super viewDidLoad];

NSURL * myURL1;

myURL1 = [NSURL URLWithString:@"http://www.mywebsite.com/events.plist"];

event_web = [[NSDictionary alloc] initWithContentsOfURL:myURL1];
eventKey_web = [event_web allKeys];
} 
```

现在我的表正在填充，但只有第 0 项、第 1 项、第 2 项

我的目标是用 eventTitle 作为描述来填充表格。

抱歉这个可能很愚蠢的问题，但仍然试图让我的头脑围绕目标 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:08:03.230

`eventKey_web = [event_web allKeys];`从您的 plist 中获取所有键，您需要为该键添加值..

所以不要使用这个：

`currentEventName = [eventKey_web objectAtIndex:indexPath.row];`

你可以使用类似的东西：

```
NSMutableDictionary *r = [[event_web objectAtIndex:indexPath.row] objectForKey:[eventKey_web objectAtIndex:indexPath.row] ];
event_web = [r objectForKey:@"eventTitle"]` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:08:17.277

您必须通过函数中的键获取 NSDictionary，并从字典中检索相应的数据。

```
NSString *currentEventName = [eventKey_web objectAtIndex:indexPath.row];  // This is only the key from your root dict
NSDictionary *currentEventDict = [event_web objectForKey:currentEventName];
NSString *currentEventDate = [currentEventDict objectForKey:@"eventDate"];
NSString *currentEventTitle = [currentEventDict objectForKey:@"eventTitle"];

//  Here do what you need to show
...
... 
```

# c# - 将可点击列表项动态添加到 Windows Phone ListBox

> ID：11188051
> 
> 赞同：1
> 
> 时间：2012-06-25T11:00:11.547
> 
> 标签：c#, windows-phone-7

我知道，如果一个人有一个列表框，那么可以很容易地向其中添加项目，如下所示：

```
ListBox myList = new ListBox();
myList.Items.Add("Added Item 1");
myList.Items.Add("Added Item 2");
myList.Items.Add("Added Item 3"); 
```

我最初不知道将有多少项目添加到列表中，所以我不会像这里那样添加静态内容，而是遍历 for 循环并以这种方式添加项目。继续...

我怎样才能不仅将项目添加到列表框中，而且使每个项目都可点击。例如说有一个包含 12 个 GUID 的数组，并且对于我添加到 listBox 的每个 guid 项。即

```
myList.Items.Add(guidArray[i]); 
```

然后根据选择的 guid 做出不同的反应？

还有一件事，一个样式的listBox Items 怎么样？除了它们只是显示为彼此堆叠的无聊字符串之外？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:14:36.120

假设您有一组 GUID。

```
var guids = new List<Guid>();
for (var i = 0; i < 12; i++)
{
    guids.Add(Guid.NewGuid());
} 
```

然后，您可以将此集合绑定到您的 ListBox 控件。

```
myList.ItemsSource = guids; 
```

ListBox 控件将根据您的 guids 集合的内容自动更新。

要处理 ListBox 中某个项目的单击事件，您需要处理控件的 SelectionChanged 事件。

连接事件处理程序。

```
<ListBox Name="MyList" 
         SelectionChanged="MyList_SelectionChanged">
...
</ListBox> 
```

现在您可以在事件处理程序中编写必要的代码：

```
private void MyList_SelectionChanged(object sender, 
    System.Windows.Controls.SelectionChangedEventArgs e)
{
    // Find out which item was clicked
    if (e.AddedItems.Count > 0)
    {
        var myGuid = e.AddedItems[0] as Guid;
        if (myGuid == null)
            return;
        // ...
    }
} 
```

为 ListBox 中的每个项目设置样式。那是另一个问题。首先将您的 ListBox 绑定到您的数据源（在本例中为 GUID 集合）。

然后在 XAML 中可以自由设计 ListBox 的内容。使用 ListBox 的 ItemTemplate 和 DateTemplate。在模板中，您可以指定 ListBox 应为每个项目呈现的内容。

让我们为每个项目渲染一个 1x1 网格中的 TextBlock。只需将 TextBlock 的 Text 属性绑定到 ListBox 项的属性之一。

```
<ListBox Name="MyList" 
     SelectionChanged="MyList_SelectionChanged">
    <ListBox.ItemTemplate>
       <DataTemplate>               
           <Grid>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="*" />
                   <ColumnDefinition Width="*" />
               </Grid.ColumnDefinitions>

               <Grid.RowDefinitions>
                   <RowDefinition Height="*" />
               </Grid.RowDefinitions>

               <TextBlock Grid.Column="1" Text="{Binding ...}" />
           </Grid> 
       </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# android - 在android中存储和检索联系人

> ID：11188054
> 
> 赞同：1
> 
> 时间：2012-06-25T11:00:19.430
> 
> 标签：android, android-contacts

我的应用程序中有一个联系人选择器，它返回一个联系人，然后我将一些信息存储到 sharedPreferences 中。在共享首选项中，我使用查找键来保存数据（正如 android 文档所建议的那样）

这部分看起来都很好，我得到并存储了查找键。

然后我的问题是我来取回通过查找键查找联系人的联系人有时似乎返回 null

以下详细信息来自联系人选择器

```
 Contact lookup key from the contact picker: 850i%2bw7vj56otre6eqa9b9t7wa%3d%3d  
 Contact id: 2958 
```

然后我尝试使用以下代码根据查找键查找联系人以获取联系人 ID：

```
Uri lookupUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, Uri.encode("850i%2bw7vj56otre6eqa9b9t7wa%3d%3d"));
Uri res = ContactsContract.Contacts.lookupContact(context.getContentResolver(), lookupUri); 
```

执行此操作后，“res”为空，即使我知道 id 来自联系人选择器是有效的。

在查找中添加一些记录 res uri 是：

```
content://com.android.contacts/contacts/lookup/850i%252bw7vj56otre6eqa9b9t7wa%253d%253d 
```

哪个（一旦编码）是我认为应该的。谁能发现我做错了什么？

问题是，它适用于大多数人（包括我自己），但有些人遇到了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:33:49.477

~~使用[`Uri.decode()`](http://developer.android.com/reference/android/net/Uri.html#decode%28java.lang.String%29)而不是`Uri.encode()`~~.

**编辑：**
根据[文档](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#CONTENT_LOOKUP_URI)：

> 查找键应附加未编码 - 它以编码形式存储，准备在 URI 中使用。

所以你不应该对 URI 进行编码或解码。照原样通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:36:30.303

正如 Dheeraj VS 所说，您不应该对已经编码的查找键进行编码或解码，因此重新编码可能会产生奇怪的结果。现在，我认为您的方法会导致 id 已更改的联系人出现问题。如果是这种情况，那么您应该尝试在查找 uri 中附加联系人的最后一个已知键，看看会发生什么。

就像是：

```
Uri lookupUri = ContentUris.withAppendedId(Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupkey), contactid); 
```

我认为android需要contactid来确定它是否已经改变，尽管文档说明它是可选的。

希望这可以帮助。

# events - SessionDestroyedEvent getSecurityContexts() 始终为空

> ID：11188055
> 
> 赞同：1
> 
> 时间：2012-06-25T11:00:23.807
> 
> 标签：events, session, spring-mvc, spring-security, logout

我有一个使用 Spring 3.1.1 和 Spring Security 3.1.0 的 Web 应用程序。我实现了一个 ApplicationListener，它检查 SessionDestroyedEvent(s) 并记录用户名和其他数据。但是，getSecurityContexts() 总是返回一个空集合。我正在针对 LDAP 服务器进行身份验证。我还检查了 getSource() 方法，它返回包含 Principal 信息的会话数据。但是，这些对象是不同的容器特定实现，并且没有我可以使用的接口/抽象类。我的问题是这是否是 SpringSecurity 中的一个错误，或者我可以做一些额外的配置吗？

以下是一些相关代码：

```
@Service
public class ApplicationSecurityListener implements ApplicationListener<ApplicationEvent>{

@Override
  public void onApplicationEvent(ApplicationEvent event)
  {
           else if ( event instanceof SessionDestroyedEvent )
    {
        SessionDestroyedEvent sessinEvent = ( SessionDestroyedEvent ) event;
        //System.out.println ( "SessionDestroyedEvent:" + sessinEvent.getId() );
        //load session if it is not empty
        if(sessinEvent.getSecurityContexts() != null && !sessinEvent.getSecurityContexts().isEmpty())
        {
            ...
            }}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T02:27:38.410

这是 3.1.0 中的一个错误，将作为 3.1.1 的一部分发布（参见[SEC-1870](https://jira.springsource.org/browse/SEC-1870)）。在 3.1.1 发布之前，您可以通过手动获取 onApplicationEvent 中的 SecurityContext 来解决此问题。使用前面提到的 JIRA 中的[变更集](https://fisheye.springsource.org/changelog/spring-security?cs=6fe6e18939cd8d1978035c1da103ab113b537487)作为指南，您会想出如下内容：

```
public void onApplicationEvent(ApplicationEvent event) {
    if(event instanceof SessionDestroyedEvent) {
        SessionDestroyedEvent sdEvent = (SessionDestroyedEvent) event;    
        HttpSession session = sdEvent.getSession();    
        Enumeration<String> attributes = session.getAttributeNames();    
        ArrayList<SecurityContext> contexts = new ArrayList<SecurityContext>();

        while(attributes.hasMoreElements()) {
            String attributeName = attributes.nextElement();
            Object attributeValue = session.getAttribute(attributeName);
            if (attributeValue instanceof SecurityContext) {
                contexts.add((SecurityContext) attributeValue);
            }
        }
        /* ... do things with the contexts (may be empty) ...*/
    }

    /* ... handle other conditions ... */

} 
```

如果您知道只有一个 SecurityContext 并且您没有更改存储 SecurityContext 的属性名称（典型），您也可以使用以下方法获取它：

```
public void onApplicationEvent(ApplicationEvent event) {
    if(event instanceof SessionDestroyedEvent) {
        SessionDestroyedEvent sdEvent = (SessionDestroyedEvent) event;    
        HttpSession session = sdEvent.getSession();
        String attrName = HttpSessionSecurityContextRepository
            .SPRING_SECURITY_CONTEXT_KEY;
        SecurityContext context = session.getAttribute(attrName);

        /* ... do things with the context (may be null) ...*/
    }

    /* ... handle other conditions ... */

} 
```

# java - Java 和 C++ 之间是否有消息传递服务，例如 JMS for Java to Java？

> ID：11188060
> 
> 赞同：4
> 
> 时间：2012-06-25T11:00:46.943
> 
> 标签：java, c++, messaging

我非常了解用于将消息从 Java 代码发送到 Java 代码的 Java 消息传递服务 (JMS)。我也知道 CORBA 是一种集成编程，它有助于将不同的编程语言绑定在一起，以便它们可以通过对象在它们之间进行通信。

但是我想知道是否有针对不同语言的通用消息传递服务，例如 JMS，以便将消息从 Java 发送到 C++，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:15:36.753

我强烈建议您从[ZeroMQ](http://www.zeromq.org/)开始，除非您需要基于代理的架构（例如基于[AMQP](http://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol)的实现）提供的某些功能（例如 RabbitMQ）。

ZeroMQ 有很多绑定，包括 Java、C#、C++、C，但它是基于消息的，因此在不同语言之间传输对象可能更适合 OpenDDS 之类的东西。请参阅[比较 OpenDDS 和 ZeroMQ 的使用和性能](http://mnb.ociweb.com/mnb/MiddlewareNewsBrief-201004.html)

[ZeroMQ](http://www.coastrd.com/zeromq-messaging)实现的好例子，从基础到复杂；例如

![基本 ZeroMQ 请求回复](../Images/be73ef48ccbd65d3a04a02fbf984cfc9.png) ![ZeroMQ 发布订阅](../Images/fada05df8fc59830189948f988f9eee7.png) ![复杂的 ZeroMQ 转发器代理](../Images/35e1882ea22a9bb8050a691a0fa35156.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:05:33.220

尝试查看 29 West(Informatica) 产品，例如 UMP。没有中间的中间件。类似于 Tibco 房车。使用广播、多播和单播。 [http://en.wikipedia.org/wiki/29West](http://en.wikipedia.org/wiki/29West)。它不需要任何经纪人。每个通信参与者都应该安装 UMP，它将运行传输守护进程。对于 java，有一个实现 JMS 规范的库，并允许通过传输来上游和下游消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:06:59.117

看看[RabbitMQ](http://www.rabbitmq.com/)。它有很多[绑定](http://www.rabbitmq.com/devtools.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:15:13.557

如果您不想为此设置一个特殊的服务器（并且不想弄乱 CORBA 的复杂性怪物），请查看 Google 协议缓冲区[https://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/)

您可以简单地通过套接字发送所有内容（如果需要，甚至可以连接到自己），无需额外的服务器或配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:41:05.743

数据分发服务 (DDS) 是由 OMG 制定的标准，该组织与 CORBA 规范相同。标准化的语言绑定是 C、C++、Java 和 Ada，但也可以使用 C# 和其他语言。您的系统中可以混合使用不同的语言和操作系统。要分发的结构化数据类型以与语言无关的格式（按照标准是 OMG IDL 的子集）指定，然后将其转换为特定于语言的接口和数据类型以供您的应用程序使用。

DDS 规范支持许多高级数据管理功能，例如强类型和内容感知数据总线、分布式状态管理和历史数据访问。其丰富的服务质量设置允许将大量复杂性从应用程序转移到中间件。

DDS 实施通常具有高度可扩展性和分散性。参与 DDS 基础设施的组件在空间和时间上都是解耦的。一些 DDS 产品部署在许多任务和业务关键系统中。

有关非常简短的介绍和参考列表，请参阅[此 Wikipedia 条目](http://en.wikipedia.org/wiki/Data_distribution_service)。我专注于 DDS 超过 10 年，我仍然喜欢它，我认为它是最有用的技术之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T05:59:56.740

TIBCO RV，它有很多接口，如 Java、C、C++、.NET 等等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-25T11:04:14.527

看看[http://qpid.apache.org/](http://qpid.apache.org/)

您同时拥有 Java/C++ 代理实现，并且这些和其他一些语言可以交换消息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-25T11:05:22.790

HornetQ 有一个 STOMP 和 REST 实现，可以被其他语言使用： [TechnicalFaqHornetQ](https://community.jboss.org/wiki/HornetQTechnicalFAQ)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-25T11:22:27.780

您可以查看 Spread API (www.spread.org) 以查看它是否符合您的要求。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-25T11:26:43.160

我知道[ActiveMQ](http://activemq.apache.org/)可以完成工作。我们通常使用协议缓冲区来让我们的对象通过网络进行序列化。XML 可以工作，但主要的是你不想要任何一种语言决定使用的随机内存块来表示在线上的对象，你想要一个已知的序列化格式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-29T04:13:00.463

另一个建议是[OpenMQ](http://mq.java.net/downloads.html)。在其包中，它包括 C 头文件和可以链接 C/C++ 程序的库文件。

# android - 如何在android上的内置imageviewer中查看图像

> ID：11188067
> 
> 赞同：2
> 
> 时间：2012-06-25T11:01:37.057
> 
> 标签：android

我正在我的应用程序中查看图像。我想在 android 设备中查看可绘制文件夹中的图像到内置图像查看器。如何在内置图像查看器上打开项目资源中的图像可以帮助任何代码或教程，非常感谢！

我想查看屏幕截图的图像：

![在此处输入图像描述](../Images/854551078f8d69459057f08be88c819b.png)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:05:50.613

看看代码..

phonebookImageView.setImageResource(R.drawable.backphonebook);

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:25:21.760

```
 Intent intent = new Intent(Intent.ACTION_VIEW);

            String path = "android.resource://" + getPackageName() + "/" +R.drawable.yourimagename;  

 // path = "/mnt/sdcard/test.jpg";

            //Uri uri = Uri.fromFile(new File(path));

             Uri uri = Uri.parse(path);

            intent.setDataAndType(uri,"image/*");
            context.startActivity(intent); 
```

# linq - Linq - 按前 12 个月的日期时间分组 - 包括空月份

> ID：11188069
> 
> 赞同：1
> 
> 时间：2012-06-25T11:01:54.443
> 
> 标签：linq, datetime, group-by

我有一个场景，我需要检索按日期时间字段的月份分组的对象计数。

我发现以下帖子让我了解了其中的一部分......

[Linq：按年和月分组，管理空月](https://stackoverflow.com/questions/4245876/linq-group-by-year-and-month-and-manage-empty-months)

...但是我需要列出从今天开始的前 12 个月以及每个月的对象数量，这就是我苦苦挣扎的地方。

我看过其他一些具有类似问题/解决方案的帖子，但我选择了上面的帖子，因为它也是生成任何月份计数为 0 的记录的要求。

感谢您在这方面提供的任何帮助。

**编辑**

好的，感谢 Enigmativity，我得到了进一步的帮助（感谢您抽出宝贵的时间！）：

```
var news = from s in db.NewsItems
                   where s.SubmittedDate > first
                   select new 
                   {
                       Date = s.SubmittedDate,
                       Title = s.Title,
                   };

var grouping = from g in news.AsEnumerable()
                       select new NewsCountCollection
                       (
                           g.Date,
                           g.Title
                       );

var lookup = grouping.ToLookup(x => x.Month, x => x.Title);

var counts = from n in Enumerable.Range(-11, 12)
                    let Month = last.AddMonths(n)
                    select new
                    {
                        Month,
                        Count = lookup[Month].Count(),
                    };

var countList = from c in counts.AsEnumerable()
                        select new NewsCountMonthList
                        (
                            c.Month.ToString("MMMM"),
                            c.Count
                        ); 
```

...以及以下

```
public class NewsCountCollection
{
    public DateTime Month { get; set; }
    public string Title { get; set; }

    public NewsCountCollection(DateTime date, string title)
    {
        this.Month = new DateTime(date.Year, date.Month, 1);
        this.Title = title;
    }

}

public class NewsCountMonthList
{
    public string Month { get; set; }
    public int Count { get; set; }

    public NewsCountMonthList(string month, int count)
    {
        this.Month = month;
        this.Count = count;
    }
} 
```

......虽然似乎效率很低......我不禁想到必须有比这更好的方法。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:11:23.847

这应该为你做：

```
var now = DateTime.Now;
var last = new DateTime(now.Year, now.Month, 1);
var first = last.AddMonths(-12);

var query =
    from s in somethings
    where s.DateTimeField >= first
    where s.DateTimeField < last
    select new
    {
        Month = new DateTime(s.DateTimeField.Year, s.DateTimeField.Month, 1),
        Something = s,
    };

var lookup = query.ToLookup(x => x.Month, x => x.Something);

var counts =
    from n in Enumerable.Range(-12, 12)
    let Month = last.AddMonths(n)
    select new
    {
        Month,
        Count = lookup[Month].Count(),
    }; 
```

您可能需要稍微摆弄一下，但结构应该是合理的。

# php - 使用 Symfony2 发送邮件

> ID：11188071
> 
> 赞同：3
> 
> 时间：2012-06-25T11:02:05.840
> 
> 标签：php, email, symfony, swiftmailer

我的练习是用 Symfony2 创建邮件系统。

*   10 000 人
*   每封电子邮件都必须有人名
*   秘书创建消息，单击发送，几分钟后想关闭计算机
*   点击发送后 1 秒秘书必须得到反馈“发送电子邮件”
*   发送的电子邮件必须在后台工作

流程组件是否适合这项工作？

有人可以给我任何关于解决这个问题的提示吗？

我认为点击发送后（AJAX）：

*   检查 SMTP 服务器是否正常工作
*   存储在数据库秘书消息中
*   显示消息后，发送另一个请求以发送先前存储的消息
*   将最大时间限制设置为 0
*   使用 SwiftMailer 发送那 10 000 封电子邮件

或者

*   使用 PHP exec 函数启动外部脚本以发送那些用 Python 编写的电子邮件

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:34:03.217

我这样做的方法是使用假脱机电子邮件功能：

[http://symfony.com/doc/master/cookbook/email/spool.html](http://symfony.com/doc/master/cookbook/email/spool.html)

使用这个脚本

```
php app/console swiftmailer:spool:send --env=prod 
```

例如，您可以在调用邮件创建脚本后：

*   使用 ajax 调用另一个运行该命令的 php 脚本
*   为该脚本设置 cron 作业
*   运行解析假脱机文件并发送电子邮件的 python 脚本

我会做第二个，所以你只需快速假脱机所有这些邮件，发送过程留给系统。

# html - 防止 hn 标签默认格式

> ID：11188073
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:11.237
> 
> 标签：html, css

h1, h2, ... h6 标签似乎对页面应用了自动格式化，在使用的地方添加了一个新行。我可以定义一个 CSS 属性来避免它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:04:35.707

> 我可以定义一个 CSS 属性以避免它吗

当然。只`CSS`为你的元素

```
h3 {
 display: inline;
 // next CSS properties
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:04:42.690

是的，现在您可以定义所有标题标签的 CSS 代码

像这样

```
 h1, h2, h3, h4, h5, h6{
    display:inline-block;
    vertical-align:top;
 /////////////////css style
        } 
```

# sql - postgres中错误的工作b树索引

> ID：11188076
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:29.923
> 
> 标签：sql, postgresql, indexing, b-tree

最近，我在表中的一列上遇到了 b 树索引的问题。我创建索引：

```
CREATE INDEX t_client_contact_email on t_client_contakt (email); 
```

一切正常，但几天后，使用此索引进行搜索无法正常工作。重建这个索引（DROP - CREATE）everytning 是好的。

我能用这个做什么？我正在使用 Postgres 8.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:31:36.460

您可能会被一个最近修复的旧错误所困扰。

看到这个：

[http://www.postgresql.org/docs/8.4/static/release-8-4-11.html](http://www.postgresql.org/docs/8.4/static/release-8-4-11.html)

具体来说：

修复与清理同时插入的 btree 索引损坏 (Tom Lane)

由插入引起的索引页面拆分有时会导致同时运行的 VACUUM 错过删除它应该删除的索引条目。删除相应的表行后，悬空的索引条目会导致错误（例如“无法读取文件中的块N ...”）或更糟的是，在将不相关的行重新插入到 now-free表位置。此错误自 8.2 版以来一直存在，但发生频率如此之低，以至于直到现在才被诊断出来。如果您有理由怀疑它已经发生在您的数据库中，重新索引受影响的索引将解决问题。

# objective-c - objc ：识别 previsou 视图（tabBar 或 pushBack）

> ID：11188077
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:37.010
> 
> 标签：objective-c

我有一个问题来确定以前的观点。

预期：当您单击选项卡栏项目时，我的视图会在 webService 上加载数据并显示它。如果单击数据，则推送视图会显示详细信息。但是在推回时，不能重新加载视图。如果您单击其他选项卡栏项目并返回视图。视图需要重新加载数据。

我的问题：识别前一个视图，如果它来自推回或标签栏项目。

有人有想法吗？

谢谢

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:05:55.057

```
 NSInteger index = 0;
  for (UIViewController *view in self.navigationController.viewControllers) {
      if([view.nibName isEqualToString:@"YourViewController"])//put any `XIB name` where u want to navigate 
      break;
   index = index + 1;
  }
  //[[self navigationController] pushViewController:[[self.navigationController viewControllers] objectAtIndex:index] animated:YES];

    [[self navigationController] popToViewController:[[self.navigationController viewControllers] objectAtIndex:index] animated:YES]; 
```

# c - C - GetKeyState() 与 getch() 冲突；

> ID：11188079
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:43.883
> 
> 标签：c, windows, input, getch

我正在用 C 编写一个小程序。我需要处理一些虚拟键（箭头键、返回和 esc）加上“S”键的状态，所以我选择了 GetKeyState。问题是我不能使用 getch() 来提示“按任意键”消息，因为 GetKeyState/GetAsyncKeyState 将杂散字符放在标准输入中。这是一个代码示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
enum key{KEY_UP, KEY_DOWN, KEY_LEFT, KEY_RIGHT, KEY_ESC, KEY_RETURN, KEY_S, KEY_NULL};

enum key getInput()
{
    enum key key_pressed=KEY_NULL;

    while(key_pressed==KEY_NULL)
    {
        if(GetKeyState(VK_UP) & 0x8000) key_pressed=KEY_UP;
        if(GetKeyState(VK_DOWN) & 0x8000 ) key_pressed=KEY_DOWN;
        if(GetKeyState(VK_LEFT) & 0x8000) key_pressed=KEY_LEFT;
        if(GetKeyState(VK_RIGHT) & 0x8000) key_pressed=KEY_RIGHT;
        if(GetKeyState(VK_ESCAPE) & 0x8000) key_pressed=KEY_ESC;
        if(GetKeyState(VK_RETURN) & 0x8000) key_pressed=KEY_RETURN;
        if(GetKeyState('S') & 0x8000) key_pressed=KEY_S;
    }
    Sleep(150);
    return key_pressed;
}

int main()
{
    printf("Press a virtual key\n");
    getInput();
    printf("Virtual key pressed. Press Any key to exit.\n");
    getch();    //at this point, the program should wait for a user input.
    return 0;
} 
```

当程序退出`getInput()`返回 KEY_RETURN 或 KEY_S 的函数时，下一个 getch() 被绕过，程序直接结束。`getInput()`在函数中或在 getch() 之前放置更长的睡眠时间并不能解决任何问题。当我必须输入一个字符串并且程序已经在输入缓冲区中放置了“s”、“esc”或“enter”时，它会变得很烦人。我该如何解决这个问题？提前致谢。

编辑：我尝试了手动标准输入刷新（使用`while(getch()!='\n');`），它与“输入”键一起使用。仍在尝试找出如何解决“s”键的问题。此外，更正了一些小错误。

# c++ - 如何通过 OpenMP 功能在 QThread 中强制使用多核

> ID：11188080
> 
> 赞同：3
> 
> 时间：2012-06-25T11:02:49.143
> 
> 标签：c++, qt, pthreads, openmp, qthread

我有一个在 OpenMP 中非常并行化的函数，当从一个简单的控制台可执行文件启动时，它会使机器的每个内核饱和，并在处理器数量上线性地更快地返回结果。

```
void updateStateWithAParallelAlgorithm()
{
    #pragma omp parallel for
    {
    // do parallel things, update positions of particles in a physics simulation
    }
} 
```

现在这个函数也在我的 Qt 程序的 QThread 中使用。问题是我必须在每次调用`updateStateWithAParallelAlgorithm()`函数后更新粒子的屏幕位置。

在我的 Qt 主程序中启动时，我发现算法的速度没有提高，并且我的处理器的 8 个内核没有饱和。

我宁愿相信我应该在 CPU 使用率图表上看到峰值暂停行为，但这不会发生。

现在，我给你更多的信息。

```
class MyComputationThread :  public QThread
{
    Q_OBJECT
    // some methods
    // some variables
    void doComputation()
    { 

        this->setPriority(QThread::HighestPriority);

        #ifdef Q_WS_X11
          int s;
          cpu_set_t cpuset;
          CPU_ZERO(&cpuset);
          CPU_SET(1, &cpuset);
          s = pthread_setaffinity_np(pthread_self(), sizeof(cpu_set_t), &cpuset);
          if (s != 0) {
            perror("pthread_getaffinity_np");
          }
        #endif

        updateStateWithAParallelAlgorithm();
    }
} 
```

我想了解我的线程`MyComputationThread`类如何利用多核，而不受`pthread_set_affinity_np`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:31:43.563

根据`pthread_setaffinity_np(3)`手册页：

> 创建的新线程`pthread_create(3)`继承其创建者的 CPU 关联掩码的副本。

您将特定`MyComputationThread`实例限制为仅在单个内核上运行，因此也将 OpenMP 运行时产生的所有线程限制为也在同一内核上运行。您应该删除调用`pthread_setaffinity_np()`或将调用移至设置相关性的部分`updateStateWithAParallelAlgorithm()` *之前*。

# java - 测试字符串中的数字字符

> ID：11188083
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:59.173
> 
> 标签：java, regex, string

> **可能重复：**
> [Java：如何检查字符串是否可解析为双精度字符串？](https://stackoverflow.com/questions/3543729/java-how-to-check-that-a-string-is-parsable-to-a-double)

在Java中检查字符串中数字字符的最佳方法是什么？

```
 try {
        NumberFormat defForm = NumberFormat.getInstance();            
        Number n = defForm.parse(s);      
        double d = n.doubleValue();
    } 
    catch (Exception ex) {
        // Do something here...    
    } 
```

或者有没有更好的方法使用 REGEX？

我不想去掉数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:14:58.130

```
String test = "12cats";
//String test = "catscats";
//String test = "c4ts";
//String test = "12345";
if (test.matches(".*[0-9].*") {
    System.out.println("Contains numbers");
} else {
    System.out.println("Does not contain numbers");
} //End if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:11:54.793

使用正则表达式你可以这样做 -

```
String s="aa56aa";
Pattern pattern = Pattern.compile("\\d");
Matcher matcher = pattern.matcher(s);

System.out.println(matcher.find()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:08:59.950

```
/**
 * Return true if your string contains a number,
 * false otherwise.
 */
str.matches("\\d+"); 
```

例如：

```
"csvw10vsdvsv".matches("\\d+"); // true
"aaa".matches("\\d+"); // false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:11:18.197

```
Pattern intsOnly = Pattern.compile("\\d+");
Matcher makeMatch = intsOnly.matcher("125455"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:08:48.603

一个好的解决方案是使用`regex`（[链接](http://www.vogella.com/articles/JavaRegularExpressions/article.html)<-在这里您拥有使用正则表达式所需的一切）。

# wpf - 如何区分 Prism 事件的调用者？

> ID：11188084
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:59.150
> 
> 标签：wpf, events, prism, eventaggregator

我正在使用 Prism 的事件聚合器，并从我的复合控件中发布一个事件。但是，如果开发人员在同一个表单上使用了两个控件实例，那么订阅者如何区分这些事件呢？最佳做法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:49:21.200

通常我只是在 中传递调用者或 callerId，`EventMessage`如果调用者不是它所期望的，订阅者会忽略该消息

```
// Subscribe
eventAggregator.GetEvent<SomeEvent>().Subscribe(SomeMethod);
public void ShowNews(SomeEventMessage e)
{
    if (e.CallerId != this.Id)
        return;

    Do Work();
}

// Broadcast
eventAggregator.GetEvent<SomeEvent>().Publish(
    new SomeEventMessage { CallerId = this.Id }); 
```

# jquery - 如何使用 jQuery 交换 DIV 的顺序

> ID：11188085
> 
> 赞同：0
> 
> 时间：2012-06-25T11:02:59.523
> 
> 标签：jquery

我在这里搜索过 SO 并尝试了这里提供的不同解决方案，但似乎找不到有效的解决方案。

我想要做的是让 Facebook 评论显示在文本“Hvis du kan lide mit blog ...”下方

我认为需要做的是改变这个页面的顺序 `<div id="selmakjaerbo_below_blogposts">` ： `<div class="fb-comments fb-social-plugin" ... ></div>`http: [//selmakjaerbo.dk/hvornar-har-du-sidst-investeret-i-dig-selv/](http://selmakjaerbo.dk/hvornar-har-du-sidst-investeret-i-dig-selv/)

...但不幸的是，我在这方面太新手了，无法确定。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:06:19.383

您可以使用[`insertAfter`](http://api.jquery.com/insertAfter/)：

```
$("#selmakjaerbo_below_blogposts").insertAfter(".fb-comments");​ 
```

或者[`before`](http://api.jquery.com/before/)：

```
$("#selmakjaerbo_below_blogposts").before($(".fb-comments"));​ 
```

* * *

**更新。**根据您的代码，您最好[`insertBefore`](http://api.jquery.com/insertBefore/)在 DOM 就绪处理程序中使用：

```
$(function() {
    $("#selmakjaerbo_below_blogposts").insertBefore(".fb-comments");
}); 
```

# iphone - 如何将图像从相机/UIImagePickerController 动态添加到 iPhone 中的 iCarousel

> ID：11188086
> 
> 赞同：0
> 
> 时间：2012-06-25T11:03:02.287
> 
> 标签：iphone, ios, xcode, icarousel

[我在这里](https://github.com/nicklockwood/iCarousel)使用 iCarousel 。但是我想通过从相机或图像选择器中拍摄照片来动态添加图像。以下是我的代码，

```
- (void)loadView {

    [super loadView];
    imagesArray = [[NSMutableArray alloc]init] ;
    // Initialize and configure the carousel
    carousel = [[iCarousel alloc] initWithFrame:CGRectMake(0,50, 100, 100)];
    carousel.autoresizingMask = UIViewAutoresizingFlexibleWidth |   UIViewAutoresizingFlexibleHeight;
    carousel.type = iCarouselTypeCoverFlow;
    carousel.dataSource = self;
    [self.view addSubview:carousel];
}
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [imagesArray count];

}
- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
{
    //note: placeholder views are only displayed on some carousels if wrapping is disabled
    return  [imagesArray count];
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    UIImage *image = [imagesArray objectAtIndex:index];
    UIButton *button = [[[UIButton alloc] initWithFrame:CGRectMake(0,50,100, 100)] autorelease];
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
    [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
    button.tag=index;
    return button;

}
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [imagesArray addObject:image];
    NSLog(@"array count is %d",[imagesArray count]);
    [picker dismissModalViewControllerAnimated:YES];

} 
```

即使我能够将图像添加到数组中，也只有一张图像出现在封面流中的 imageView 中。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:22:00.053

修改数组后需要在轮播上调用reloadData。

# php - PHP session_start 序列化并阻止所有其他共享同一会话的人

> ID：11188089
> 
> 赞同：4
> 
> 时间：2012-06-25T11:03:09.867
> 
> 标签：php, session, concurrency, locking

会话必须同步。当`A`写入/保存`session` `B`或`another A`等待时。这对于基于文件的会话处理来说是必须的。

但是一旦`A`加载了会话（但现在保存了它的修改）`B`也应该被允许加载相同的会话。因为加载将打开文件并将文件内容放入内存并关闭。

是否有任何理由在整个`A`加载会话并`A`保存会话期间阻止所有其他脚本。不能仅使用保存处理程序进行同步吗？

因此，如果两个 PHP 脚本共享同一个会话，则它们永远不能同时工作。

例如`seslock.php`

```
<?php
header('Content-Type: text/plain');
session_start();
if(isset($_GET['wait'])){
    sleep(30);
    echo "waiting\n";   
}else{
    echo "No Waiting\n";
}
?>
done 
```

访问`seslock.php`将立即响应，但`seslock.php?wait` 需要 30 秒才能响应。但问题是，如果您要求`seslock.php?wait`第一个且仅`seslock.php`第二个。事件`non-sleep`块也会要求您等待 30 秒。

为什么它阻塞不是我的问题。我问为什么会阻塞`start to save`？而不是阻塞`only save`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T11:17:55.600

可能的重复：

[PHP 中 session_start 是如何锁定的？](https://stackoverflow.com/questions/2531584/how-does-session-start-lock-in-php)

[当一个脚本使用 curl 调用另一个脚本时，为什么 session_start 会导致超时](https://stackoverflow.com/questions/252907/why-does-session-start-cause-a-timeout-when-one-script-calls-another-script-usin)

[session_start 挂起](https://stackoverflow.com/questions/4333209/session-start-hangs)

[如何杀死 PHP 会话？](https://stackoverflow.com/questions/5771478/how-to-kill-a-php-session)

......还有很多;）

**编辑**

1.  它阻塞的原因是因为会话文件正在被读取，并且它可能在第一个脚本运行时的任何时间点被修改，因此被锁定。

2.  对此的补救措施可能是这篇文章`session_write_close()`所[指出的](http://www.php.net/manual/en/function.session-start.php#101452)

3.  [如何防止阻塞 php 请求，Konr Ness](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:16:48.267

默认的 PHP 会话处理程序用于序列化每个会话 ID 的会话更改。这具有跨脚本保证一致的会话状态的好处。

`session_write_close()`您可以通过紧随其后而放弃这一优势`session_start()`。不过，这也会使您的会话成为只读的。

或者，您可以编写自己的会话处理程序而无需锁定。

# android - Android 平台向后兼容

> ID：11188091
> 
> 赞同：0
> 
> 时间：2012-06-25T11:03:15.543
> 
> 标签：android

我正在将一个 android 应用程序导入 Eclipse。我收到以下错误

> 无法解析目标 'Google Inc.:Google APIs:8

我已经安装了 Android 4.0.3 (API15)。我还需要安装 Android 2.2(API8) 吗？

Android 4.0.3 (API15) 不向后兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:07:51.417

您正在导入的应用程序是使用不同于 Android SDK 的 Google API 构建的。您可以更改构建目标并将其设置为使用较新的 Google API（如果您已安装它）。如果尚未安装，您可以使用 SDK 管理器进行安装。

![截屏](../Images/beed77bff8ec3bf28d630d18096f5066.png)

# php - Yii UrlManager 路由到自己的控制器而不是模块

> ID：11188092
> 
> 赞同：1
> 
> 时间：2012-06-25T11:03:15.840
> 
> 标签：php, yii

我刚刚开始使用 Yii 框架，尝试创建一个简单的应用程序。我添加了 yii-user-management 模块 (YUM) 并遵循了简短的[安装教程](http://www.yiiframework.com/wiki/195/implementing-a-registration-process-using-the-yii-user-management-module/)。

按照教程，我创建了一个扩展 YumRegistrationController 的 RegistrationController - 然后尝试在浏览器中加载它。但是，无论我如何更改 UrlManager 的配置，我都无法加载我自己的控制器或视图（视图已按照说明复制到 protected/views/registration.registration.php）。

我不是唯一一个遇到同样问题的人——例如，请参见[此处](http://www.yiiframework.com/forum/index.php/topic/7591-module-yii-user-management-module/page__st__320)——但我无法让任何解决方案发挥作用。甚至重命名控制器都不起作用，所以我认为我的 UrlManager 设置存在根本性错误。

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'caseSensitive'=>false,   
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

YumRegistrationController 每次都会被加载，否则我会收到 404 错误。

我尝试了其他规则，例如：

```
'registration' => 'application.controllers.Registration', 
```

或（重命名后）

```
'registration' => '//MyRegistration/registration', 
```

乃至

```
'registration' => '//registration/registration/registration', 
```

就像我读过的一篇文章一样，但没有任何效果。

请帮助-我真的很想继续创建应用程序，而不仅仅是进行设置...

**更新**： /registration/registration/registration 有效，它只显示默认视图并加载控制器以进行 YUM 注册......

**Yii 版本 1.1.10**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:48:38.670

我认为，您在配置 main.php 中注册了用户组件。所以请分享一下。我可以搭把手。

. 'loginUrl' => array('/user/user/login')，可能会导致问题。无需更改 urlManager。

```
 'user'=>array(
        'class'=>'application.components.WebUser',
          'allowAutoLogin'=>true,
          'loginUrl' => array('/user/login'),
          ), 
```

# wpf - ObjectContext.SaveChanges 与 BackgroundWorker

> ID：11188098
> 
> 赞同：0
> 
> 时间：2012-06-25T11:03:41.940
> 
> 标签：wpf, entity-framework, backgroundworker

我对 ObjectContext.SaveChanges 方法有疑问：

```
 public void Save(Action<object, object> action)
    {
        EventAggregator.GetEvent<EntityServiceRequestingEvent>().Publish(true);
        var bw = new BackgroundWorker();
        var saved = false;
        bw.DoWork += (o, ee) =>
                         {
                             ProgramStatusService.Status = Resources.DatabaseSavingMessage;

                             if (!CanSave())
                             {
                                 throw new InvalidOperationException(
                                     "You must not call Save when CanSave returns false.");
                             }
                             try
                             {
                                 lock (Context)
                                 {
                                     Context.SaveChanges();
                                     saved = true;    
                                 }
                             }
                             catch (ValidationException e)
                             {
                                 MessageService.ShowError(null, string.Format(CultureInfo.CurrentCulture,
                                                                              Resources.SaveErrorInvalidEntities,
                                                                              e.Message));
                             }
                             catch (UpdateException e)
                             {
                                 var innerException = e.InnerException as SqlException;
                                 if (innerException != null && innerException.Number == 2601)
                                 {
                                     MessageService.ShowError(null, string.Format(CultureInfo.CurrentCulture,
                                                                                  Resources.DublicateKeyUpdateError,
                                                                                  e.InnerException.Message));
                                 }
                                 else
                                 {
                                     MessageService.ShowError(null, string.Format(CultureInfo.CurrentCulture,
                                                                                  Resources.SaveErrorInvalidFields,
                                                                                  e.InnerException.Message));
                                 }
                             }
                             ee.Result = saved;
                         };
        bw.RunWorkerCompleted += (o, e) =>
                                     {
                                         EventAggregator.GetEvent<EntityServiceRequestingEvent>().Publish(false);
                                         ProgramStatusService.Status = Resources.ProgramReadyMessage;
                                         if (e.Result != null) action.Invoke(this, e.Result);
                                     };
        bw.RunWorkerAsync();
    } 
```

保存时出现错误：**调用线程无法访问此对象，因为不同的线程拥有它。**在 Designer.cs 中：

```
 /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public Nullable<global::System.DateTime> MDate
    {
        get
        {
            return _MDate;
        }
        set
        {
            OnMDateChanging(value);
            ReportPropertyChanging("MDate");
            _MDate = StructuralObject.SetValidValue(value);
     ReportPropertyChanged("MDate");// **ERROR HERE**

            OnMDateChanged();
        }
    } 
```

如何正确使用 ObjectContext 和 BackgroundWorker？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:13:53.697

在后台工作者中使用上下文的唯一正确方法是在处理程序中创建它`DoWork`，使用它并在`DoWork`处理程序结束之前处理它。`ObjectContext`不是线程安全的，锁定它`SaveChanges`不会改变它。

您收到的异常不是由 EF 引起的，而是由 WPF 和 UI 控件引起的。您不能从非 UI 线程修改控件。您必须使用 Dispatcher 来处理控件。

# php - APC 用户缓存具有少量数据的大型变量与具有大量数据的少量变量

> ID：11188101
> 
> 赞同：0
> 
> 时间：2012-06-25T11:03:54.523
> 
> 标签：php, apc

我正在使用 PHP 的 APC 用户缓存来缓存一些数据库结果，将一些较小的表加载到 APC 中。我这样做的目的是减少 Mysql 负载和连接。

在我的例子中，有一个权衡：要么是几个变量，每个变量都有更大的数据数组，要么是数千个变量，数据更小。

示例：3000 个变量，每个变量 500 字节，或 3 个变量，500 KB。其中哪个更快/更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:24:33.710

理论上，为每个缓存对象设置一个键会增加内存使用率，但 1.5mb 的数据确实不是很多。但是，缓存用于加快处理时间，您希望尽可能减少处理时间。

如果要保存/检索未在 500kbyte 集合中使用的数据，最好每 500 字节使用 3000 个变量以节省处理时间。如果您只使用 500kb 的一小部分，则不应处理完整的 500kb。

# tomcat - 在 Amazon EC2 中使用 tomcat 的 Spring 安全登录 https 不起作用

> ID：11188104
> 
> 赞同：0
> 
> 时间：2012-06-25T11:04:06.347
> 
> 标签：tomcat, https, amazon-ec2, spring-security

我正在尝试为我的应用程序设置 https 登录。在我的本地 Ubuntu 环境中，它工作正常，但是当我将所有内容部署到 Amazon EC2 Ubuntu 时，我无法让它工作。

以下是我所做的：

1\. 使用以下方法生成密钥库：

```
keytool -genkey -alias tomcat -keyalg RSA -keystore /etc/tomcat6/keystore 
```

2\. 修改 tomcat server.xml 文件以包含：

```
 <Connector port="8080" protocol="HTTP/1.1" 
                       connectionTimeout="20000" 
                       URIEncoding="UTF-8"
                       redirectPort="8443" />    

     <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
            maxThreads="150" scheme="https" secure="true"
            clientAuth="false" sslProtocol="TLS" 
            keystoreFile="/etc/tomcat6/keystore" 
            keystorePass="tomcat"/> 
```

3\. 修改了我的 spring xml 文件以包括：

```
<http auto-config="false" entry-point-ref="delegatingAEP">
    ...
    <port-mappings>
        <port-mapping http="8080" https="8443"/>
    </port-mappings>

    ...

    <intercept-url pattern="/login"                   access="IS_AUTHENTICATED_ANONYMOUSLY" requires-channel="https"/>
    <intercept-url pattern="/j_spring_security_check" access="IS_AUTHENTICATED_ANONYMOUSLY" requires-channel="https"/>
    ...
 </http> 
```

4\. 对于我的 Amazon EC2 实例，我在 EC2 安全组中打开了 HTTPS 端口 8443。我的本地 Ubuntu 实例不需要。

5\. 重新启动Tomcat。当我尝试在 Amazon EC2 中访问[http://www.mysite.com:8080/](http://www.mysite.com:8080/)时，它被成功重定向到[https://www.mysite.com:8443/login](https://www.mysite.com:8443/login)，但是内容为“此网页不可用” .

相同的配置在我本地的 Ubuntu 中运行良好。我的本地服务器和 Amazon Ec2 服务器都在 Ubuntu 11.10 上运行。

我的配置哪里可能出错？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:10:31.623

通过首先打开 HTTPS 端口 443/8443 创建新的 Amazon EC2 安全组，然后使用该新创建的安全组启动新的 Amazon EC2 实例来解决该问题。

似乎如果您创建没有 HTTPS 端口 443/8443 的 Amazon EC2 安全组，然后将其分配给实例。之后，您将该安全组更改为包括 HTTPS 端口 443/8443，HTTPS 端口不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T22:15:06.783

我有同样的问题，我的应用程序使用 Https，我想将 Tomcat 的端口从 443 重定向到 8443。

最后这对我有用：

# /sbin/iptables -t nat -A PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 8443

# /sbin/service iptables 保存

# jquery - 在 WordPress 中为 FancyBox 添加 PDF 下载选项

> ID：11188107
> 
> 赞同：0
> 
> 时间：2012-06-25T11:04:19.623
> 
> 标签：jquery, fancybox

我在 WordPress 网站上使用 Fancyapps 的 FancyBox，它很棒。唯一的事情是客户想要添加下载或查看 PDF 的功能。

因此，当您单击站点上的图像时，您会看到 FancyBox 模态窗口显示该图像的大版本。在 FancyBox 模态窗口的右下角，我添加了一个按钮，上面写着“PDF”。

单击“PDF”按钮时，我需要能够将 PDF 附加到 WordPress 中的每个帖子并下载/显示相关的 PDF（取决于您的浏览器和插件）。

我找到了在 fancybox 源目录 (jquery.fancybox.pack.js) 中添加 PDF 按钮的位置，但我不知道链接到附加到每个帖子的 PDF 的全局变量是什么。

这是代码（第 34 行）：

```
if(c=a.current.title)c=d('<div class="fancybox-title fancybox-title-'+b.type+'-wrap">'+c+"</div><a class='pdf_dl' href='{href}' target='blank'>PDF</a>").appendTo("body"),"float"===b.type&&(c.width(c.width()),c.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(parseInt(c.css("margin-bottom"),10))),c.appendTo("over"===b.type?a.inner:"outside"===b.type?a.wrap:a.skin)}};d.fn.fancybox=function(b){var c=d(this),e=this.selector||"",f,g=function(g){var h=this,j=f,k;!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey&&!d(h).is(".fancybox-wrap")&& 
```

有任何想法吗？我可能会以错误的方式解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:16:40.653

这里有两个相关主题

### 客户端：Fancybox

正如您所说，您需要更改 Fancybox 窗口并添加下载链接。我认为操纵 Fancybox 的原始源文件是一个坏主意（您甚至似乎已经发布了难以阅读的[缩小](http://www.crockford.com/javascript/jsmin.html)生产版本的一部分）。如果 Fancybox 的新版本发布，你会怎么做？您必须手动将更改移植到新版本。

相反，请使用[Fancybox 提供的回调](http://fancyapps.com/fancybox/#docs)。例如，将您自己的 javascript 挂接到`beforeShow`回调中并在那里操作 Fancybox 窗口元素。您需要选择 URL（见下文）并创建所需的链接。

### 服务器端：Wordpress

为了知道您应该链接到*哪个*PDF 文件，Wordpress 需要将 URL 放入页面中。您可能希望隐藏它，因为您只在打开 Fancybox 时才显示它。一种简单的方法是使用隐藏链接：

```
<a href="/wp-content/uploads/myfile.pdf" id="pdflink" style="display: none;"></a> 
```

实施取决于您的需求。在您的 Wordpress 主题中，您可以使用[`wp_get_attachment_url()`](https://codex.wordpress.org/Function_Reference/wp_get_attachment_url)和[`get_posts()`](https://codex.wordpress.org/Function_Reference/get_attachment_link#Display_attached_images_and_titles_as_a_list)从数据库中获取信息。

以下是如何将 Wordpress 示例代码修改为返回任何帖子的第一个 PDF 附件 URL 的函数的建议（但未经测试）：

```
function getPdfUrlForPost( $postId ){
    $args = array(
        'post_type' => 'attachment',
        'numberposts' => -1,
        'post_status' => null,
        'post_parent' => $postID
    );

    $attachments = get_posts( $args );
    if ( $attachments ) {
        foreach ( $attachments as $attachment ) {
          $url = wp_get_attachment_url( $attachment->ID );   
          if( substr(strrchr($url,'.'), 1) == 'pdf' ){
              return $url
          }
        }
        return false;
     }
} 
```

# desire2learn - Desire2Learn 中的学生角色

> ID：11188108
> 
> 赞同：1
> 
> 时间：2012-06-25T11:04:27.143
> 
> 标签：desire2learn

如何从 D2L 获取学生名单？我想得到学生的成绩，当我得到班级列表时，我得到了教师和学生的分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:00:11.497

您可以使用[/d2l/api/lp/{ver}/enrollments/orgUnits/{orgUnitId}/users/](http://docs.valence.desire2learn.com/res/enroll.html#get--d2l-api-lp-%28D2LVERSION-version%29-enrollments-orgUnits-%28D2LID-orgUnitId%29-users-)。这将获取一个由 orgUnitId 标识的课程中注册的所有用户的分页结果集。请注意，您可以使用`roleId`查询参数过滤结果集；如果您知道学生的角色 ID，则可以提供该 ID 以仅获取课程中具有学生角色的用户：

```
https://your.lms/d2l/api/lp/1.0/enrollments/orgUnits/6784/users/?roleId=78&{all_auth_qparms} 
```

请注意，注册 API 调用需要调用用户上下文的某些角色权限。调用用户帐户需要“查看用户注册”权限，并在输出中显示已注册用户角色的“搜索 <*角色名>”权限：*

*   如果没有“查看用户注册”，您将根本没有任何查询注册的权限，并且您可能会收到 403（无权限或被禁止）。

*   如果您没有“搜索学生”或“搜索教师”权限（或任何您的本地角色），那么尽管您可以*拨打*注册电话，但您返回的注册用户列表将被过滤到只有您可以“搜索”的角色。

* * *

**编辑**. 我已经修复了这个答案；学生的默认角色 ID*不是*3（我认为这是课程设置的默认 OrgUnitID）。在我们的测试服务器上，默认的学生角色 ID 是“78”。

**编辑 2**。我添加了有关从注册调用中获取有用信息所需的权限的更多信息。

# php - 将多个类包含在一个文件中

> ID：11188112
> 
> 赞同：0
> 
> 时间：2012-06-25T11:04:36.717
> 
> 标签：php, class, include

我正在尝试将我的核心文件夹中的所有类包含到一个文件中。但是，在我将类对象分配给变量的初始核心类中，我不断收到错误“致命错误：找不到类”

```
 function inc_files($dir, $ext = false, $publics = array()) {
    $files = scandir($dir);
    global $INC_FILE, $INC_DIR; // I don't like using globals, no in the slightest, but sometimes you do need them.
    $INC_DIR = $dir;
    extract($publics, EXTR_PREFIX_SAME, 'inc_');
    foreach($files as $file) {
        $INC_FILE = $file;
        if($file != '.' && $file != '..' && $file[strlen($file)-1] !== '~' && is_file($dir.'/'.$file))
            if($ext === false || strtolower(substr($file, -(strlen($ext)))) == strtolower($ext))
                include $dir.'/'.$file;
    }
    unset($GLOBALS['INC_DIR']); unset($GLOBALS['INC_FILE']);
}} 
```

这是我用来执行此操作的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:07:00.880

使用[`spl_autoload_register`](http://php.net/manual/en/function.spl-autoload-register.php) 它是为了这样的帮助:)

从手册：

```
function my_autoloader($class) {
    include 'classes/' . $class . '.class.php';
}

spl_autoload_register('my_autoloader'); 
```

# javascript - Highcharts - 柱状图重绘动画

> ID：11188114
> 
> 赞同：5
> 
> 时间：2012-06-25T11:04:40.757
> 
> 标签：javascript, jquery, highcharts

我正在尝试使用新数据数组更新现有数据系列，并`redraw`在完成后调用该函数。虽然这很有效，但我不太满意，因为我想要一种增长/收缩过渡。我看过[Highcharts 的一个例子](http://www.highcharts.com/studies/dynamic.htm)（摆弄现有的数据集，然后单击*“将新数据设置为选定的系列”*按钮），但我无法复制这种行为。

这是我写的代码：

```
 var series, newSeriesThreshold = this.chart.series.length * 2;

  for (var i = 0; i < data.length; i += 2) {
    series = {
      name:  this.data[i].title,
      data:  this.data[i].data,
      color: this.data[i].color
    };

    if (i >= newSeriesThreshold) {
      this.chart.addSeries(series, false);
    } else {
      var currentSeries = this.chart.series[i / 2];
      currentSeries.setData(series.data, false);
    }
  }

  this.chart.redraw(); 
```

这些是创建图表时的选项：

```
 var config = {
    chart: {
      renderTo: $(this.container).attr('id'),
      type: this.settings.type,
      animation: {
        duration: 500,
        easing: 'swing'
      }
    },
    title: {
      text: null
    },
    legend: {
      enabled: this.settings.legend.show
    },
    tooltip: {
      formatter: function() {
        return this.x.toFixed(0) + ": <b>" + this.y.toString().toCurrency(0) + '</b>';
      }
    },
    xAxis: {
      title: {
        text: this.settings.xaxis.title,
        style: {
          color: '#666'
        }
      }
    },
    yAxis: {
      title: {
        text: this.settings.yaxis.title,
        style: {
          color: '#666'
        }
      }
    },
    series: series,
    plotOptions: {
      column: {
        color: '#FF7400'
      }
    },
    credits: {
      enabled: false
    }
  }; 
```

这会产生立即更新，而不会产生过渡效果。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T15:59:18.550

我已经通过销毁并再次创建图表来解决这个问题。

这是对我有帮助的 highcharts 论坛上的链接：http: [//forum.highcharts.com/highcharts-usage/animation-on-redraw-t8636/#p93199](http://forum.highcharts.com/highcharts-usage/animation-on-redraw-t8636/#p93199)

答案来自 highcharts 支持团队。

```
 $(document).ready(function() {
            var chartOptions = {
                    // Your chart options
                    series: [
                             {name: 'Serie 1' , color: '#303AFF', data: [1,1,1,1,1,1,1}
                            ]
                };

            var chart = new Highcharts.Chart(chartOptions);

        $("#my_button").click(function(){ 
            chart.destroy();
            chartOptions.series[0].data = [10,5,2,10,5,2,10];
            chart = new Highcharts.Chart(chartOptions);
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:56:57.360

这仍然是一个谜。我设法进行了轴更新，这表明正在进行某种动画，但它只应用于轴，而不是列。

最后，我已经解决了这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T12:22:32.863

这可能会有所帮助：

```
var mychart = $("#mychart").highcharts();     
var height = mychart.renderTo.clientHeight; 
var width = mychart.renderTo.clientWidth; 
mychart.setSize(width, height); 
```

更新所有图表

```
$(Highcharts.charts).each(function(i,chart){
    var height = chart.renderTo.clientHeight; 
    var width = chart.renderTo.clientWidth; 
    chart.setSize(width, height); 
  }); 
```

# sitecore - 升级 Sitecore (4>6)

> ID：11188116
> 
> 赞同：0
> 
> 时间：2012-06-25T11:04:46.170
> 
> 标签：sitecore

如果我要将 Sitecore 4 站点升级到更新的 Sitecore 6 站点，那么以下内容的正确替换是什么；

```
protected IWebItem page = State.CurrentItem; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:09:07.220

我会说是`Sitecore.Context.Item`。

# ruby-on-rails - Postgres hstore 和 rails 的无效语句

> ID：11188118
> 
> 赞同：3
> 
> 时间：2012-06-25T11:04:49.083
> 
> 标签：ruby-on-rails, postgresql, rails-postgresql, hstore

我正在使用带有 rails 3.2 的 activerecord-postgres-hstore gem。我已经设置了 hstore，当我尝试保存任何数据时，我得到了错误：

```
ActiveRecord::StatementInvalid in ProductsController#create

PG::Error: ERROR:  Syntax error near 'a' at position 4
: INSERT INTO "products" ("created_at", "name", "price", "properties", "updated_at")      
VALUES ($1, $2, $3, $4, $5) RETURNING "id" 
```

在这种情况下，我将“属性”定义为 hstore 数据类型。我在 postgresl 8.4 和 9.1 都看到了这个错误。任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:59:53.893

[从Rails 3.2 Postgres Save Error "ActiveRecord::StatementInvalid: PG::Error: ERROR: Syntax error near 'T' at position 5"](https://stackoverflow.com/questions/11067120/rails-3-2-postgres-save-error-activerecordstatementinvalid-pgerror-error)添加代码“ serialize :data, ActiveRecord::Coders::Hstore ”解决了我的问题。当我最初尝试将此作为修复时，我只是有错误的型号名称。

# android - 睡眠功能不工作

> ID：11188130
> 
> 赞同：2
> 
> 时间：2012-06-25T11:05:23.710
> 
> 标签：android, andengine

我想在可变文本中显示 1 到 100。我喜欢使用 sleep() 函数，这样它看起来就像从 1 增加到 100。我的代码是

```
for(int i= 0;i<100;i++) {
    scorelevel.setText(String.valueOf(i));
    try{
        Thread.sleep(1000);
    }catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

但它没有正确显示。任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:07:42.703

不要阻塞 UI 线程，`AsyncTask`而是使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:12:42.700

使用`Timer`和`TimerTask`执行任何基于时间的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:13:41.167

您可以使用 runOnUiThread 启动计数器以将 [textView](http://developer.android.com/reference/android/app/Activity.html) 更新为：

```
private boolean mClockRunning=false;
private int millisUntilFinished=0;
public void myThread(){
            Thread th=new Thread(){
             @Override
             public void run(){
              try
              {
               while(mClockRunning)
               {
               Thread.sleep(1000L);// set time here for refresh time in textview
               YourCurrentActivity.this.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                 // TODO Auto-generated method stub
                     if(mClockRunning)
                     {
                     if(millisUntilFinished==100)
               {
               mClockRunning=false;
               millisUntilFinished=0;
                }
                else
                {
               millisUntilFinished++;
               scorelevel.setText(String.valueOf(millisUntilFinished));//update textview here

               }
             }

            };
          }
              }catch (InterruptedException e) {
            // TODO: handle exception
             }
             }
            };
            th.start();
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:16:25.823

您也可以使用`TimerTask`（[链接](http://android.okhelp.cz/timer-simple-timertask-java-android-example/)）。

# joomla - Joomla 横幅不旋转

> ID：11188131
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:05:31.340
> 
> 标签：joomla, joomla2.5, banner

我需要旋转一些横幅。但它们没有旋转，只是同时显示： ![横幅](../Images/6f7eba5f68a8a8c1e44fd646df9ad56e.png)

有什么想法，为什么会发生，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:44:23.983

我知道这个问题有点老了，但我刚刚彻底审查了 Joomla 3.0 中的横幅组件

如果您的横幅没有旋转，我建议如下：

1.  检查横幅模块的**Randomise**设置是否设置为**Sticky, Randomise**

2.  检查横幅的**粘性**设置，只有一个粘性横幅会导致它们无法旋转

3.  检查您的横幅模块的**缓存**设置，尝试将其更改为无缓存

4.  确保您的横幅模块的**计数**（在 Joomla 3 中的基本选项下）不会太高。如果您有 3 个横幅并将计数设置为 3，那么它将显示全部三个。将计数设置设置为 1 将确保仅显示 1 并且它们会旋转

5.  检查横幅的最大展示次数设置（在横幅详细信息下）选项卡。如果横幅已达到最大展示次数限制，则不会包含在横幅轮换中。

我已经记录了这些，并[在此处](http://www.inmotionhosting.com/support/edu/joomla-3/banners/rotating)添加了更详尽的信息和屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:06:35.203

您的网站上运行了 2 个版本的 jQuery，它们相互冲突，这就是我认为它们无法正常工作的原因。

JoomShopping 组件和 PPC Simple Spotlight mdoule 正在使用它。尝试在包含 jquery 的简单聚光灯文件夹中打开文件并将其替换为：

```
<?php
    if(!JFactory::getApplication()->get('jquery')){
       JFactory::getApplication()->set('jquery',true);
       $document->addScript(JURI::root() . "modules/mod_ppc_simple_spotlight/js/jquery-1.5.min.js");     
    }
?> 
```

# android - android - 当用户触摸其他地方时关闭微调器

> ID：11188132
> 
> 赞同：0
> 
> 时间：2012-06-25T11:05:32.603
> 
> 标签：android, android-spinner, ontouchlistener, dismiss

我有一个应用程序，用户按下一个按钮并弹出一个自定义微调器，以便用户可以在九种颜色之间进行选择。当用户触摸背景（屏幕上的每个地方，除了微调器）时，我希望微调器被关闭。这可能吗？

我试图在覆盖背景的图像上添加一个 onTouchListener 并调用

```
dialog.dismiss(); 
```

但它不起作用。

我的微调器是自定义微调器，设置在 xml 文件中并弹出：

```
final Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.colorchooser); 
```

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T11:11:56.247

首先你应该能够添加

```
dialog.setCanceledOnTouchOutside(true); 
```

完成你想要的。

但是dismiss() 方法也应该可以工作，我猜你正在调用dialog.dismiss() 的地方目前无法到达。

# iphone - 无法访问 ARC 启用项目中的全局数组

> ID：11188135
> 
> 赞同：1
> 
> 时间：2012-06-25T11:05:51.847
> 
> 标签：iphone, ios, ios5, global-variables, automatic-ref-counting

我已经定义了 NSArray 使用

```
extern NSArray *arName; 
```

在 AppDelegate 方法中

然后在 AppDelegate 的 Array 中赋值。赋值后，我很容易访问 AppDelegate 中的值，但是当我在另一个页面控件中使用这个全局数组时，它会显示错误

我不知道确切的问题

是否有任何其他方法来定义 GLOBAL ARRAY ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:39:11.013

在这种情况下，最好使用单例 Objective-C 类。不要将全局变量与从 NSObject 派生的任何东西一起使用，否则 ARC 系统无法自动跟踪对对象的引用，您将遇到类似的崩溃。

# eclipse-plugin - 如何使用活动从 Eclipse PDE 中的搜索组图标中删除“Java 搜索”条目？

> ID：11188145
> 
> 赞同：1
> 
> 时间：2012-06-25T11:06:11.503
> 
> 标签：eclipse-plugin, eclipse-pde

我知道活动可以成为过滤 UI 贡献的强大扩展点。我需要在组搜索图标中使用最少的搜索条目来自定义我的产品。

我用过

```
<activityPatternBinding activityId="com.myapp.myactivity"
        pattern="org.eclipse.mylyn.*"/> 
```

删除远程、任务和插件搜索，因为我不需要它们。我还需要删除 Java Search Entry ，我已经尝试过但徒劳无功

```
<activityPatternBinding activityId="com.myapp.myactivity"
    pattern="org\.eclipse\.jdt\.ui/org\.eclipse\.jdt\.ui\.JavaSearchPage"/> 
```

我不知道这种模式哪里出了问题，或者是否有可能利用活动来实现我的目的？

对上述任何指导将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:45:35.333

试试表情`org\.eclipse\.jdt\.ui\.JavaSearchPage`

我不确定您所说的“群组搜索图标”是什么意思。但是，如果您从首选项页面关闭 jdt 功能，则主搜索菜单中的所有 java 搜索选项和搜索对话框上的选项卡都将被删除。

# php - Yii 国际化 - URL

> ID：11188154
> 
> 赞同：2
> 
> 时间：2012-06-25T11:06:48.993
> 
> 标签：php, yii, internationalization, yii-url-manager

使用英语时，应适用以下 URL：

```
http://example.org/services/myservice/ 
```

使用其他语言时，应使用以下 URL：

```
http://example.org/sirvici/misirvice/ 
```

我们应该用 Yii 处理这个问题的任何简单/标准的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:37:08.213

是的，你可以在 Yii 中做到这一点，但你会牺牲：

*   自动控制器/动作映射（取决于它是如何工作的）
*   由于每个请求的额外工作量，速度有点慢。

如果您仍然可以，那么您可以继续进行。您需要创建一个自定义 URL 规则并让它处理每个 URL，这是有据可查的。然后，您需要手动将 URL 分离（通过也有据可查的方法）并从用户当前选择的语言翻译每个部分（除非您想经历地狱般的尝试猜测语言 Oo ，否则您将需要知道这一点）。您现在拥有 URL 各部分的翻译。恭喜。

**这是可能工作或可能不工作的部分**
您可以通过 Yii URL 解析器将其传递回，以通过控制器、动作和参数的自动映射。这意味着您只需对 URL 进行预解析，Yii 从那里继续。

如果这行不通，您将不得不构建自己的（使用 CUrlRule 等从 Yii 背负一点）并执行映射逻辑。

**我的两种感觉**
对于大多数 Web 应用程序，我不建议这样做。这意味着您可以通过多种方式从非常不同的 URL 访问相同的内容。这在 SEO 方面和可用性方面都是坏事。它也没有为您提供一种特别容易将它们相互映射的方法，让谷歌知道不要再次索引您的内容。另外，我看不出它会给你带来很多好处。大多数傻瓜用户不会关注 URL 栏，即使它是他们的母语，大多数人也不会从 URL 的措辞中推断出页面及其内容。

如果你继续这样做，请告诉我，我想知道它是如何进行的。

# javascript - 如何使用带有 knockoutjs 的动态控件

> ID：11188159
> 
> 赞同：0
> 
> 时间：2012-06-25T11:07:11.410
> 
> 标签：javascript, knockout.js

我有一个场景，我试图将淘汰赛应用于一些问题。基本上我有这种用户界面

```
Add (create a new Select Box duo with delete button)

Select Box  (options = Json from ajax request)
Select Box  (options = Json from ajax request with param from 1st select)
Delete

Select Box 
Select Box 
Delete 
```

ETC

我将每一行视为数组中的另一个小部件，因此为简单起见，我将其淘汰

```
var ViewModel = function (widgets) {

    var self = this;

    this.widgets= ko.observableArray(widgets);
    this.subWidgets= ko.observableArray();

    this.mySelections = ko.observableArray();

   this.selectedWidget.subscribe(function (name) {

        if (name != null) {
            $.ajax({
                url: '@Url.Action("AddSubWidgetsByName")',
                data: { name: name },
                type: 'GET',
                async: false,
                contentType: 'application/json',
                success: function (result) {

                    self.subWidgets(result);

                }
            });
        }
    } .bind(this));

    self.addWidget = function (widget) {
        self.mySelections.push({

            ??? profit
        });
    };

}
var viewiewModel = new ViewModel();
ko.applyBindings(viewiewModel);

$.ajax({
    url: '@Url.Action("AddFund")',
    type: 'GET',
    async: false,
    contentType: 'application/json',
    success: function (result) {

        viewModel.widgets(result);

    }
});
 <select id="widgets" 
                data-bind='
                    options: widgets, 
                    optionsValue : "Name", 
                    optionsText: "Name", 
                    optionsCaption: "[Please select a widgets]"'
                    value: selectedWidget, 
```

>

我可以为每个小部件动态创建一个选择并将子小部件选择与 mySelections 数组中的项目相关联吗？我不能以这种方式使用 selectedWidget 的值绑定，因为所有下拉列表都以这种方式绑定在一起。我需要让他们独立 - 关于如何去做的任何想法？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:00:16.513

这样做的一种方法是让每个小部件都有自己的视图模型（注意，这是来自 jsFiddle，所以 ajax 与他们的 echo API 一起工作，这需要 POST）：

```
var Widget = function(){
var self = this;
self.selectedWidget = ko.observable('');
self.subWidgets = ko.observableArray([]);
self.selectedSubWidget = ko.observable('');

this.selectedWidget.subscribe(function (name) {
    if (name != null) {
        $.ajax({
            url:"/echo/json/",
            data: {
                json: $.toJSON(
                    [Math.floor(Math.random()*11),
                     Math.floor(Math.random()*11),
                     Math.floor(Math.random()*11)]
                ),
                delay: 1
            },
            type:"POST",
            success:function(response)
            {
                self.subWidgets(response);
            }
        });
    }
}); 
```

};

然后，您可以使用简单的视图模型轻松跟踪子选择和添加。这是[完整的小提琴](http://jsfiddle.net/kLYFT/)。

# facebook-javascript-sdk - Facebook 登录请求 / fangate 不工作。未定义的索引/偏移错误

> ID：11188163
> 
> 赞同：1
> 
> 时间：2012-06-25T11:07:27.610
> 
> 标签：facebook-javascript-sdk, facebook-php-sdk, facebook-apps

我正在创建一个 facebook 标签页，我想使用扇形门控。

我以前使用过扇形门控并且没有任何问题，但这就像 4 个月前一样。而且我使用的是相同的 PHP，但这次我遇到了问题。

请参阅下面我的应用程序的基本代码和扇形门条件语句......

但由于某种原因，我得到了这个错误......

**注意：未定义的索引：第 126 行 /home/sites/example.co.uk/www/competition/index.php 中的 signed_request 注意：未定义的偏移量：/home/sites/example.co.uk/www/competition/ 中的 1第 128 行的 index.php 喜欢**

诡异的..

我以前从来没有使用过这个问题，facebook改变了它的工作方式吗？

任何帮助将不胜感激。

```
<?php

$fb_app_id   = '000000000000000';           
$fb_secret   = '00000000000000000000000000000000';
$fb_app_url  = 'http://example.co.uk/competition';  
$fb_tab_url  = 'http://www.facebook.com/example/app_000000000000000';
$fb_channel  = '//example.co.uk'

require 'src/facebook.php';

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret,
  'cookie' => true,
));

?>

<!DOCTYPE html>
<html>
<head>

    <meta property="fb:app_id" content="<?php echo $fb_app_id ?>" />

</head>

<body>

    <div id="fan-gate">

        <?php

            $signed_request = $_REQUEST["signed_request"];

            list($encoded_sig, $payload) = explode('.', $signed_request, 2);

            $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

            if (empty($data["page"]["liked"])) {

        ?>

            LIKE US...      

        <?php } else { ?>

            <strong>YOU'VE LIKED OUR PAGE, THANKS!!!</strong>

        <?php } ?>

    </div>

    <div id="fb-root"></div>

    <script>

        window.fbAsyncInit = function() {
            FB.init({
                appId: '<?php echo $fb_app_id ?>',
                channelUrl : '<?php echo $fb_channel ?>/channel.html', // Channel File
                cookie: true,
                xfbml: true,
                oauth: true,
                status: true
            });
            FB.Canvas.setAutoGrow(true);
        };

    </script>

</body>
</html> 
```

也试过这个，但它总是说第二个条件，即使我不喜欢这个页面。

```
<?php

$fb_app_id   = '000000000000000';           
$fb_secret   = '00000000000000000000000000000000';
$fb_app_url  = 'http://example.co.uk/competition';  
$fb_tab_url  = 'http://www.facebook.com/example/app_000000000000000';
$fb_channel  = '//example.co.uk'

require 'src/facebook.php';

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret,
  'cookie' => true,
));

?>

<!DOCTYPE html>
<html>
<head>

    <meta property="fb:app_id" content="<?php echo $fb_app_id ?>" />

</head>

<body>

    <div id="fan-gate">

        <?php

        $signed_request = $facebook->getSignedRequest();

        $like_status = $signed_request["page"]["liked"];

        if($like_status){

            echo 'LIKE US...';

        } else {

            echo '<strong>YOU'VE LIKED OUR PAGE, THANKS!!!</strong>';

        }

    ?>

    </div>

    <div id="fb-root"></div>

    <script>

        window.fbAsyncInit = function() {
            FB.init({
                appId: '<?php echo $fb_app_id ?>',
                channelUrl : '<?php echo $fb_channel ?>/channel.html', // Channel File
                cookie: true,
                xfbml: true,
                oauth: true,
                status: true
            });
            FB.Canvas.setAutoGrow(true);
        };

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:20:22.663

我设法让扇门以这种方式工作。

似乎更简单，工作也很好。

我也将页面管理员视为“喜欢”的粉丝......

```
<?php

$fb_app_id   = '000000000000000';           
$fb_secret   = '00000000000000000000000000000000';
$fb_app_url  = 'http://example.co.uk/competition';  
$fb_tab_url  = 'http://www.facebook.com/example/app_000000000000000';
$fb_channel  = '//example.co.uk'

require 'src/facebook.php';

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret,
  'cookie' => true,
));

$signedRequest = $facebook->getSignedRequest();

?>

<!DOCTYPE html>
<html>
<head>

    <meta property="fb:app_id" content="<?php echo $fb_app_id ?>" />

</head>

<body>

    <div id="fan-gate">

        <?php if ( ( $signedRequest['page']['liked'] || $signedRequest['page']['admin'] ) == 1 ) { ?>

            Like us...

        <?php } else { ?>

            <strong>You've Liked our page</strong>

        <?php } ?>

    </div>

    <div id="fb-root"></div>

    <script>

        window.fbAsyncInit = function() {
            FB.init({
                appId: '<?php echo $fb_app_id ?>',
                channelUrl : '<?php echo $fb_channel ?>/channel.html', // Channel File
                cookie: true,
                xfbml: true,
                oauth: true,
                status: true
            });
            FB.Canvas.setAutoGrow(true);
        };

    </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:25:51.257

`signed_request`可能丢失的唯一原因是重定向。确保您的应用没有重新加载 iframe 或将 iframe 重定向到您网站上的另一个页面。`signed_request`仅在初始页面上可用，除非您在页面之间手动传递它。

# php - 如果 $var==blank 设置为“XXX”？

> ID：11188167
> 
> 赞同：0
> 
> 时间：2012-06-25T10:57:51.553
> 
> 标签：php, forms

大家好，大家早上好。这是我关于这个主题的第二篇文章，因为第一次，事情仍然没有奏效，我现在已经连续 4/5 天试图解决这个问题......

我有一个名为“edit.php”的文件，在这个文件中是一个表格；

```
<?php 
$company = $_POST["company"];
$phone = $_POST["phone"];
$colour = $_POST["colour"];
$email = $_POST["email"];
$website = $_POST["website"];
$video = $_POST["video"];
$image = $_POST["image"];
$extension = $_POST["extension"];
?>

<form method="post" action="generate.php"><br>
<input type="text" name="company" placeholder="Company Name" /><br>
<input type="text" name="slogan" placeholder="Slogan" /><br>
<input class="color {required:false}" name="colour" placeholder="Company Colour"><br>
<input type="text" name="phone" placeholder="Phone Number" /><br>
<input type="text" name="email" placeholder="Email Address" /><br>
<input type="text" name="website" placeholder="Full Website - Include http://" /><br>
<input type="text" name="video" placeholder="Video URL" /><br>
<input type="submit" value="Generate QuickLinks" style="background:url(images/submit.png) repeat-x; color:#FFF"/>
</form> 
```

然后，当提交表单时，它会使用已输入的变量创建一个文件。已经填写的字段继续成为链接，我需要能够说'如果一个字段留空，则将'XXX'作为默认值'。有没有人有任何想法？我真的认为我已经尝试了一切。我将在生成链接的 .php 文件中放置一个片段...

```
<?php 
 $File = "includes/details.php"; 
 $Handle = fopen($File, 'w');
 ?>

 <?php 
 $File = "includes/details.php";
 $Handle = fopen($File, 'w');
 $Data = "<div id='logo'>
          <img width='270px' src='images/logo.png'/img>
          <h1 style='color:#$_POST[colour]'>$_POST[company]</h1>
          <h2>$_POST[slogan]</h2>
          </div>

<ul>
       <li><a class='full-width button' href='tel:$_POST[phone]'>Phone Us</a></li>
       <li><a class='full-width button' href='mailto:$_POST[email]'>Email Us</a></li>
       <li><a class='full-width button' href='$_POST[website]'>View Full Website</a></li>
       <li><a class='full-width button' href='$_POST[video]'>Watch Us</a></li>
</ul>

 \n"; 
```

我真的很期待任何回应...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:29:36.213

这很简单。

在您的 php 中，检查它是否为空：

（我会用手机号输入示范）

```
if(empty($_POST['phone']))

//so here, you know it's empty (has a value of "") so now you can set it to whatever...
$phone="xxx";

}//end of empty phone
else{

$phone=$_POST['phone'];//set it

}//end of phone input not empty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:18:57.500

我建议更换

```
$_POST[varname] 
```

和

```
($_POST[varname]) ? htmlspecialchars($_POST[varname]) : 'XXXX'; 
```

这是的简短版本

```
if(isset($_POST[varname]))
    htmlspecialchars($_POST[varname]);
else
    'XXXX'; 
```

希望对您有所帮助。

# java - 我可以使用哪种设计模式？

> ID：11188169
> 
> 赞同：2
> 
> 时间：2012-06-25T11:07:40.533
> 
> 标签：java, design-patterns

我喜欢实现以下场景。（例子）

我有 3 个课程：

1.  控制器
2.  苹果
3.  车

```
public class Apple implements IBonus {
    public String name;
    public String weight;
}

public class Car implements IBonus{
    public String brand;
    public String vmax;
    public String power;
}

public class Controller {
    public List<String> values;

    public void doWork(IBonus bonusObject){
       if(bonusObject instanceOf Car){
          Car c = (Car)bonusObject;
          values.add(c.brand);
          values.add(c.vmax);
          values.add(c.power);
       }
       if(bonusObject instanceOf Apple){
          Apple a = (Apple)bonusObject;
          values.add(a.name);
          values.add(a.weight);
       }
    }
} 
```

现在，我有很多类，比如苹果和汽车。并且也有可能在不久的将来每个类的一些变量将被更改、添加或删除。这意味着我总是必须调整控制器类中的代码。

有谁知道合适的模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T11:12:32.533

你不需要任何模式。只是普通的旧多态性：

```
public interface IBonus {
    void fillStringList(List<String> values);
}
...

public void doWork(IBonus bonusObject){
   bonusObject.fillStringList(values);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T11:11:07.150

编辑：设计模式“访客”。

更改您的 iBonus 界面以添加方法：

```
void add(List<String> values); 
```

让控制器代替

```
bonusObject.add(values); 
```

通过这种方式，您可以将特定任务（将对象添加到“值”）委托给特定的实现。

基本上，每当您发现自己在编写上述代码时（如果是 instanceof 或 switch()），您应该考虑将任务委托给抽象方法。

您可能需要考虑“双重调度”又名。“游客”

[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

Wikipedia 版本非常通用，将“访问者”逻辑（添加到列表中）拆分为单独的类。在下面的版本中，“Bonus”对象扮演了这个角色，并且使用了双重调度结构。

在这种情况下，您有两个接口：一个用于奖励对象，一个用于控制器。奖励对象有一个名为的方法

```
void visit(Controller c); 
```

然后控制器将调用奖励对象：

```
bonusObjecv.visit(this); 
```

“访问者”的目的主要是让您改变彼此独立的实现。它是简单多态解决方案的更通用版本。您可以使用 Controller 接口，而不是使用 List 等泛型类。这样你就可以明确控制器和访问对象之间的交互。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:12:01.103

您可以添加一个方法：

```
public List<String> getValues(); 
```

到您的 IBonus 界面，只需在 doWork 中使用以下内容：

```
values.addAll(bonusObject.getValues()); 
```

然后，每个 IBonus 类型都需要实现如何创建列表。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-25T11:10:05.763

我认为工厂模式适合这种情况。

[工厂模式示例](http://javapapers.com/design-patterns/abstract-factory-pattern/)

# java - maven-jaxb2-plugin 有什么用？

> ID：11188172
> 
> 赞同：1
> 
> 时间：2012-06-25T11:07:46.523
> 
> 标签：java, web-services, jax-ws

maven-jaxb2-plugin 有什么用？它是用来从 xsd 生成 java 类的吗？它从 xsd 生成什么样的类？

```
maven-jaxb2-plugin 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:10:37.397

最常见的用途是基于soap的webservices，SOAP webservices暴露了WSDL并定义了webservices中使用的类的模式

例如：

```
public void sayHello(Person person){} 
```

现在客户端需要使用客户端从 WSDL 中知道的实例来调用它，`Person`并且这个插件有助于生成这些类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:10:45.987

是的，它从 XSD 生成带有 JAXB 注释的 POJO。

# c# - 使用razor/asp.net mvc3生成静态html页面？

> ID：11188173
> 
> 赞同：21
> 
> 时间：2012-06-25T11:07:47.943
> 
> 标签：c#, html, asp.net-mvc, razor

对于一个项目，我必须生成静态 .html 页面，这些页面将在远程服务器上发布。

我必须从 ac# 代码自动创建这些文件，该代码从 SQL Server 数据库获取数据。

数据不会经常更改（每 4-5 个月一次），并且该网站的访问量会很高。

由于我发现 asp.net MVC3 的 razor 合成器非常有效，我想知道是否可以使用 asp.net MVC3/Razor 来生成那些 .html 页面？

所以：

1.  这是一个好主意吗？
2.  如果是，有什么好方法？
3.  如果你想用另一种好的方式来做这件事，哪种方式？

感谢您的帮助

**编辑**

关于答案，我需要精确：我不想/不需要使用网络缓存，原因有很多（负载（每月加载数百万页），集成（我们将我们的页面集成到优化的 apache 中，网站的另一部分），页面数（如果我有很多时间相同的页面，缓存只会对我有帮助，但我会有大约 2500 个页面，所以根据墨菲定律，除非我设置了非常高的缓存超时，我将不得不经常生成它们）。所以我真的搜索了一些东西来生成 HTML 页面。

**编辑 2** 我刚得到一个新的约束：/ 这些模板必须本地化。这意味着我应该有与以下剃刀代码等效的东西：`@MyLocalizationFile.My.MyValue`

**编辑 3** 目前，我正在考虑做一个动态网站，并在其上调用一些 http 查询，以存储生成的 HTML。但是，有没有办法避免http？意思是模拟一个 http 调用，指定输出流和调用的 url（只有 GET 调用）。

我们之前的加载数量确实被低估了，实际上他们每天有超过一百万的访问者，大约每天加载 1400 万页。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T11:19:52.013

1.  是的。即使您可以缓存结果，HTML 页面也总是会更快并使用更少的服务器资源
2.  一个好方法是将[剃刀视图转换为文本](http://www.west-wind.com/weblog/posts/2012/May/30/Rendering-ASPNET-MVC-Views-to-String)，然后将文本保存为 html 文件。
3.  另一种方法是使用[T4 模板](https://msdn.microsoft.com/en-US/library/Bb126445(v=VS.120).aspx)，但我推荐 Razor。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T12:16:46.273

您可以使用 Razor 引擎（[NuGet-link](http://nuget.org/packages/RazorEngine)，他们的[网站](http://razorengine.codeplex.com/)），这样您就可以从控制台应用程序创建模板，而无需使用 asp.net MVC。

我使用它如下：

```
public string ParseFile<T>(string fileName, T model) {
    var file = File.OpenText(fileName);
    var sb = new StringBuilder();
    string line;
    while ((line = file.ReadLine()) != null)
    {
        // RazorEngine does not recognize the @model line, remove it
        if (!line.StartsWith("@model ", StringComparison.OrdinalIgnoreCase))
            sb.AppendLine(line);
        }
        file.Close();

        // Stuff to make sure we get unescaped-Html back:
        var config = new FluentTemplateServiceConfiguration(
                    c => c.WithEncoding(RazorEngine.Encoding.Raw));

        string result;
        using (var service = new TemplateService(config))
        {
            return service.Parse<T>(sb.ToString(), model);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:13:56.800

与其生成静态 HTML 页面，我认为每次动态生成页面会更好，但使用缓存来提高性能。

有关更多信息，请参阅这篇关于使用 ASP.NET MVC3 进行缓存的文章：

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T07:16:19.150

最后，我创建了一个普通的 asp.net MVC 网站，然后使用 WebClient 在页面上生成页面。

像这样，我可以预览网站，享受 Razor+MVC 助手的全部功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:14:07.163

您遇到的任何性能原因是否值得预渲染网站的努力？我们在谈论多少页？您的控制器采用什么样的参数？如果香草缓存不能满足您的要求，对我来说最好的方法是基于磁盘的缓存提供程序......

[http://www.juliencorioland.net/Archives/en-aspnet-mvc-custom-output-cache-provider](http://www.juliencorioland.net/Archives/en-aspnet-mvc-custom-output-cache-provider)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T11:15:00.607

查看 T4 模板或类似的模板解决方案

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-09T23:06:13.067

我正在研究类似的解决方案。我的网站在暂存环境中正常运行（ASP.NET + DB + CMS），然后我使用 wget 抓取它并生成静态 html 页面。然后将这些静态 html 页面（包括资产）上传到 Amazon S3 存储桶。这样网站就变成了完全静态的，没有依赖关系。

我计划每天执行一项任务，即抓取网站上的特定页面以使其更快，例如每天只抓取 /news。

我知道您已经找到了解决方案，但也许这个答案可能对其他人有所帮助。

# ios - ModalViewController 自动关闭

> ID：11188178
> 
> 赞同：1
> 
> 时间：2012-06-25T11:07:53.430
> 
> 标签：ios, uiviewcontroller, modalviewcontroller

我展示了一个 ModalViewController，它在我的应用程序中首次使用 CLLocationManagerDelegate，以便在允许确定位置时获得 AlertView。

在警报中按下任何按钮后，ModalViewController 将被关闭。没有调用任何委托方法，以便我可以看到谁在关闭视图。

任何想法如何找到解雇的来电者？

**编辑：** 发现，当 iOS 请求许可时，应用程序进入后台。当我的应用程序进入后台时，出于安全原因，它会显示一个空白屏幕。这释放了我的模态视图控制器。

# jquery - 将子字符串函数与 jQuery 一起使用？

> ID：11188189
> 
> 赞同：1
> 
> 时间：2012-06-25T11:08:20.477
> 
> 标签：jquery

我有以下 HTML 可以出现，但一次只能出现一个：

```
<a id="menuRange" class="button" href="#">1 - 100</a>
<a id="menuRange" class="button" href="#">101 - 200</a>
<a id="menuRange" class="button" href="#">201 - 300</a> 
```

我用这段代码来获取范围：

```
var $field = $('#menuRange');
var nums = $field.text().split('-').map(function (a) {
    return parseInt(a, 10) + d * 100
}); 
```

现在我想将 HTML 更改为：

```
<a id="menuRange" class="button" href="#">Lines 1 - 100</a>
<a id="menuRange" class="button" href="#">Lines 101 - 200</a>
<a id="menuRange" class="button" href="#">Lines 201 - 300</a> 
```

我怎样才能做到这一点，所以我仍然像以前一样获得 nums 数据。换句话说，我怎样才能让它忽略“线条”这个词，就好像它不存在一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:10:05.097

只需放一个`.substring()`after `.text()`：

```
var nums = $field.text().substring(6).split('-')... 
```

即只删除返回文本的前 6 个字符。

或者，如果前缀并不总是存在：

```
var nums = $field.text().replace(/^Lines /, '').split('-') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:32:18.823

如果您希望完全自由地放置在锚点内容中的内容，请将代码用于计算的值移动到属性中。然后你可以改变你对用户看到的内容的想法，而根本不需要改变你的 JS 代码：

```
<a id="menuRange" class="button" href="#" data-lines="1-100">Lines 1 - 100</a>
<a id="menuRange" class="button" href="#" data-lines="101-200">Anything here</a>
<a id="menuRange" class="button" href="#" data-lines="201-300">still works</a>

var $field = $('#menuRange');
var nums = $field.attr("data-lines").split('-').map(function (a) {
    return parseInt(a, 10) + d * 100
}); 
```

您可以为最小值和最大值选择单独的属性：

```
<a id="menuRange" class="button" href="#" data-min="1" data-max="100">Lines 1 - 100</a> 
```

然后您可以单独检索它们，而不是从单个字符串中拆分出来：

```
var min = $field.attr("data-min"),  // to get it as a string
    max = $field.attr("data-max");  // use .attr()
// OR
var min = $field.data("min"),       // to have jQuery automatically convert
    max = $field.data("max");       // it to a number use .data() 
```

# android - 根据android中的国家/地区位置更改上下文语言

> ID：11188190
> 
> 赞同：0
> 
> 时间：2012-06-25T11:08:33.003
> 
> 标签：android

我正在做一个项目，它即将完成，但我面临发布项目的问题。目前，该项目的上下文是英语。但是要求就像，根据国家/地区的位置，上下文会发生变化，例如日语、西班牙语、中文等。所以我关心的问题是如何做到这一点？我写的敌人英语是这样的：

```
 <string name="bookedittext">EDIT</string>
    <string name="button_delete">Delete</string>
    <string name="button_delete_cancel">Cancel</string>
    <string name="button_back">Back</string>
    <string name="progress_deleting">Deleting...</string>
    <string name="share_message_conf_delete">Do you want to delete?</string>
    <string name="share_message_conf_delete_all">Do you want to delete all?</string>
    <string name="TEXT_SHARE_VIA">Share Via</string>
    <string name="TEXT_CONTENT">Image content</string>
    <string name="TEXT_SELECT_APPLICATION">Select an Application</string>
    <string name="TEXT_MORE_OPTIONS">More Options</string>
    <string name="TEXT_FACEBOOK">Facebook</string>
    <string name="TEXT_KAKAO_TALK">Kakao Talk</string>
    <string name="TEXT_SKYPE">Skype</string>
    <string name="TEXT_KIK">Kik Messanger</string>
    <string name="TEXT_FRING">Fring Messenger</string>
    <string name="TEXT_TWITTER">Twitter</string>
    <string name="TEXT_YAHOO">Yahoo Messenger</string>
    <string name="TEXT_USE_FOR_DEFAULT">Use this by default action</string>
    <string name="TEXT_USE_FOR_BACK">Back</string> 
```

请帮助我如何将这些转换为日文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:11:03.450

您可以有多个资源文件，用于不同的语言环境。读

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

和

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)。

# java - jax-ws 生成：@WebMethod 与 @ResponseWrapper

> ID：11188197
> 
> 赞同：4
> 
> 时间：2012-06-25T11:09:05.327
> 
> 标签：java, web-services, jax-ws

我有两个非常相似的 wsdl 文件，它们生成不同的 Java 代码。在第一种情况下，我得到一个带有@WebMethod-annotation 和返回值的方法，在第二种情况下，我得到一个带有@ResponseWrapper-annotation 的方法并且没有生成返回值。我想要返回值。

## 1.服务1

```
<wsdl:operation name="foo">
        <wsdl:input  name="deleteUser"         message="tns:deleteUserRequest"/>
        <wsdl:output name="deleteUserResponse"  message="tns:deleteUserResponse"/>
        <wsdl:fault name="ServiceFault"        message="tns:ServiceFault"/>
    </wsdl:operation> 
```

生成：

```
 @WebMethod
@WebResult(name = "commonReturnType", targetNamespace = "http://www.foo.com/fooSchemaTypes-v3.0/", partName = "returnValue")
public CommonReturnType foo(
    @WebParam(name = "fooType", targetNamespace = "http://www.foo.com/fooSchemaTypes-v3.0/", partName = "user")
    FooType user)
    throws ServiceFault
; 
```

## 2\. FooBarService

```
 <wsdl:operation name="fooBar">
        <wsdl:input name="fooBar" message="tns:fooBarRequest"></wsdl:input>
        <wsdl:output name="ackFileResponse" message="tns:fooBarResponse"></wsdl:output>
        <wsdl:fault name="ServiceFault" message="tns:fooBarFault"></wsdl:fault>
    </wsdl:operation> 
```

产生：

```
 @WebMethod
@RequestWrapper(localName = "fooBar", targetNamespace = "http://www.foo.com/fooBarSchemaTypes-v1.0/", className = "com.foo.fooBar.v1_0.GetFileType")
@ResponseWrapper(localName = "fooBarResponse", targetNamespace = "http://www.foo.com/fooBarSchemaTypes-v1.0/", className = "com.foo.fooBar.v1_0.CommonReturnType")
public void ackFile(
    @WebParam(name = "id", targetNamespace = "")
    String id,
    @WebParam(name = "timestamp", targetNamespace = "")
    XMLGregorianCalendar timestamp,
    @WebParam(name = "anotherId", targetNamespace = "")
    String anotherId,
    @WebParam(name = "fileId", targetNamespace = "")
    String fileId,
    @WebParam(name = "returnCode", targetNamespace = "", mode = WebParam.Mode.OUT)
    Holder<ReturnCode> returnCode,
    @WebParam(name = "errorMessage", targetNamespace = "", mode = WebParam.Mode.OUT)
    Holder<String> errorMessage); 
```

生成代码的代码完全相同。

如有必要，我可以为消息和类型提供标记。我希望匿名化不会弄乱相关部分。

我希望第二个版本也有返回值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:06:46.723

这有帮助（仍然不明白，为什么在案例 2 中这是必要的，而在案例 1 中则没有必要）：

```
<!--JAX-WD Customization: disable wrapper style rules
  see also: http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/jaxws/customizations.html#2.2_Wrapper_Style
-->
<jaxws:bindings wsdlLocation="v1.0/dxpInsurerServiceV1.0.wsdl" xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
 <jaxws:enableWrapperStyle>false</jaxws:enableWrapperStyle>
</jaxws:bindings> 
```

在 jaxws-custom.xml 中

这是在生成蚂蚁任务中：

另请参阅： [wsimport 不使用复杂的输入类型](https://stackoverflow.com/questions/8013365/wsimport-not-using-complex-input-types)

# smartgit - git-blame 在 smartgit 上可用吗？

> ID：11188203
> 
> 赞同：3
> 
> 时间：2012-06-25T11:09:41.743
> 
> 标签：smartgit

我正在寻找一种通过 smartgit UI 使用 git blame 的方法。
它可用还是我正在寻找缺少的功能？

**更新：** 可用于 SmartGitHg4 [http://www.syntevo.com/smartgithg/whatsnew.html](http://www.syntevo.com/smartgithg/whatsnew.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:53:12.670

Blame/Annotate 尚未出现在 SmartGit 中，但将在下一个主要版本中出现。

# c++ - 带有 unordered_map 的模板代码膨胀

> ID：11188204
> 
> 赞同：17
> 
> 时间：2012-06-25T11:09:44.080
> 
> 标签：c++, boost, unordered-map, type-erasure, libc++

我想知道是否`unordered_map`使用类型擦除来实现，因为`unordered_map<Key, A*>`and`unordered_map<Key, B*>`可以使用完全相同的代码（除了强制转换，这是机器代码中的无操作）。也就是说，两者的实现都可以基于`unordered_map<Key, void*>`节省代码大小。

**更新：**这种技术通常被称为[瘦模板习语](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Thin_Template)（感谢下面的评论者指出这一点）。

**更新 2：**我会对[Howard Hinnant](https://stackoverflow.com/users/576911/howard-hinnant)的意见特别感兴趣。让我们希望他能读到这篇文章。

所以我写了这个小测试：

```
#include <iostream>

#if BOOST
# include <boost/unordered_map.hpp>
  using boost::unordered_map;
#else
# include <unordered_map>
  using std::unordered_map;
#endif

struct A { A(int x) : x(x) {} int x; };
struct B { B(int x) : x(x) {} int x; };

int main()
{
#if SMALL
    unordered_map<std::string, void*> ma, mb;
#else
    unordered_map<std::string, A*> ma;
    unordered_map<std::string, B*> mb;
#endif

    ma["foo"] = new A(1);
    mb["bar"] = new B(2);

    std::cout << ((A*) ma["foo"])->x << std::endl;
    std::cout << ((B*) mb["bar"])->x << std::endl;

    // yes, it leaks.
} 
```

并使用各种设置确定编译输出的大小：

```
#!/bin/sh

for BOOST in 0 1 ; do
    for OPT in 2 3 s ; do
        for SMALL in 0 1 ; do
            clang++ -stdlib=libc++ -O${OPT} -DSMALL=${SMALL} -DBOOST=${BOOST} map_test.cpp -o map_test
            strip map_test
            SIZE=$(echo "scale=1;$(stat -f "%z" map_test)/1024" | bc)
            echo boost=$BOOST opt=$OPT small=$SMALL size=${SIZE}K
        done
    done
done 
```

事实证明，在我尝试的所有设置中，很多内部代码`unordered_map`似乎被实例化了两次：

```
With Clang and libc++:
          |   -O2   |   -O3   |   -Os
-DSMALL=0 |  24.7K  |  23.5K  |  28.2K
-DSMALL=1 |  17.9K  |  17.2K  |  19.8K

With Clang and Boost:
          |   -O2   |   -O3   |   -Os
-DSMALL=0 |  23.9K  |  23.9K  |  32.5K
-DSMALL=1 |  17.4K  |  17.4K  |  22.3K

With GCC and Boost:
          |   -O2   |   -O3   |   -Os
-DSMALL=0 |  21.8K  |  21.8K  |  35.5K
-DSMALL=1 |  16.4K  |  16.4K  |  26.2K 
```

（使用 Apple Xcode 的编译器）

现在的问题是：是否有一些令人信服的技术原因导致实施者选择省略这个简单的优化？

另外：为什么地狱的效果`-Os`与宣传的完全相反？

**更新 3**：

正如 Nicol Bolas 所建议的那样，我使用`shared_ptr<void/A/B>`而不是裸指针（使用创建`make_shared`和投射`static_pointer_cast`）重复了测量。结果的趋势是相同的：

```
With Clang and libc++:
          |   -O2   |   -O3   |   -Os
-DSMALL=0 |  27.9K  |  26.7K  |  30.9K
-DSMALL=1 |  25.0K  |  20.3K  |  26.8K

With Clang and Boost:
          |   -O2   |   -O3   |   -Os
-DSMALL=0 |  35.3K  |  34.3K  |  43.1K
-DSMALL=1 |  27.8K  |  26.8K  |  32.6K 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T22:20:20.883

既然有人特别要求我发表评论，我会的，尽管我不确定我要补充的内容比已经说过的要多。（对不起，我花了 8 天才到这里）

我之前已经为一些容器实现了瘦模板习语，即向量、双端队列和列表。我目前没有为 libc++ 中的任何容器实现它。而且我从来没有为无序的容器实现它。

它确实节省了代码大小。它还增加了复杂性，比引用的 wikibooks 链接所暗示的要复杂得多。人们也可以这样做，而不仅仅是指针。您可以对所有具有相同大小的标量执行此操作。例如，为什么 和 有不同的实例`int`化`unsigned`？甚至`ptrdiff_t`可以存储在与`T*`. 毕竟，这只是底部的一个袋子。但是，在玩这些技巧时，要让使用一系列迭代器的成员模板正确无误是非常棘手的。

虽然有缺点（除了实施困难）。它在调试器中的表现几乎没有那么好。至少它使调试器更难显示容器内部。虽然代码大小的节省可能很重要，但我不会将代码大小的节省称为戏剧性的。尤其是与存储照片、动画、音频剪辑、街道地图、多年电子邮件以及来自您最好的朋友和家人的所有附件等所需的内存相比时。即优化代码大小*很*重要。但是您应该考虑到，在当今的许多应用程序中（甚至在嵌入式设备上），如果您将代码大小减半，您可能会将应用程序大小减少 5%（诚然，统计数据是凭空而来的）。

我目前的立场是，这种特殊的优化是在链接器中而不是在模板容器中支付和实施的最佳方法。虽然我知道这在链接器中实现起来并不容易，但我听说过成功的实现。

话虽如此，我仍然尝试在模板中进行代码大小优化。例如，在 libc++ 帮助器结构中，例如`__hash_map_node_destructor`模板化的参数尽可能少，因此如果它们的任何代码被概述，则帮助器的一个实例化更有可能服务于多个`unordered_map`. 这种技术对调试器很友好，而且并不难做到。[当应用于迭代器（ N2980](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2980.pdf)）时，甚至可以对客户端产生一些积极的副作用。

总之，我不会反对加倍努力并实现此优化的代码。但我也不会像十年前那样把它归为高优先级，因为链接器技术已经取得了进步，而且代码大小与应用程序大小的比率也趋于显着降低。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T11:17:21.073

当你有一个 void* 参数时，编译时没有类型检查。

您提出的此类映射将是程序中的**一个缺陷**，因为它们将接受 A*、B* 类型的值元素，甚至更难以想象的与该映射无关的花哨类型。（例如 int*、float*；std::string*、CString*、CWnd*...想象一下您的地图中的混乱情况...）

您的优化还为时过早。过早的优化是万恶之源。

# twitter-bootstrap - Twitter Bootstrap 跨度

> ID：11188205
> 
> 赞同：0
> 
> 时间：2012-06-25T11:09:59.513
> 
> 标签：twitter-bootstrap

我正在尝试将 NivoSlider 用于我的图像滚动器，并希望将其放置在靠近顶部的页面中心的 div 中，就在导航栏下方（就像很多网站一样）。

我想要实现的是让它变得流畅（我知道最大宽度已经是 100%），但是当它填充父容器时，它在页面上看起来很大并且压倒了一切。

是否有我可以使用的跨度将保持在页面的中心，或者如果我指定 Nivo 包装器的宽度和高度，我将如何保持这种流体。我似乎无法解决，如果有人能指出我正确的方向，将不胜感激

*编辑*好的，所以我创建了一个 span2、span8、span2 并将 nivoslider 放在 span8 中，现在这已使滑块居中，但我猜有更好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:17:02.273

你可以这样做而不是你目前正在做的事情（它完成同样的事情）......

```
<div class="span8 offset2"></div>. 
```

您可以这样做来设置精确的宽度，而不是使用预设的跨度 css 类...

```
<div class="span12">

    <div style="width: MY_EXACT_WIDTH_IN_PIXELS; margin: 0 auto;">
        MY NIVO THINGY WITH 100% WIDTH
    </div>

</div> 
```

我认为您想要的是让 nivo 始终保持居中。网格系统的设置方式，您将让 span12 区域（页面的中间 940 像素）始终居中。

所以无论你把 nivo 放在哪里，你都想结束所有的引导标签......

这是一个例子......

```
<html>
<head>
    <title></title>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
        <div class="container">
            <div class="row">
                <div class="span12" style="background-color: #CCC;">
                    <h4>Bootstrap span12</h4>
                </div>
            </div>
        </div>

        <div style="margin: 0 auto; width: 400px; background-color: #EFEFEF;">
            <h4>My nivo goes here</h4>
        </div>

        <div class="container">
            <div class="row">
                <div class="span12" style="background-color: #CCC;">
                    <h4>Bootstrap span12 again</h4>
                </div>
            </div>
        </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:31:39.897

为什么你决定不使用原生 twitter 引导滑块？

也许这篇文章会对您有所帮助：[使 nivo 滑块变得流畅](http://code-designs.co.uk/blog/2012/04/making-nivo-slider-fluid/)

# jakarta-ee - 灵活的，每个用户 MDC 和标记，用于 JBoss 上的 Java EE 日志记录

> ID：11188208
> 
> 赞同：1
> 
> 时间：2012-06-25T11:10:07.643
> 
> 标签：jakarta-ee, logging, jboss, java-ee-6, jboss7.x

我想为具有多个服务的大型企业应用程序实现日志记录。一个重要的设计约束是实现“记录所有内容”方法的日志记录。为了尽可能快，第一个想法是将集群中的每个节点记录到单个日志文件中。通过附加服务，日志在节点上被提取并清除到中央日志服务，在那里它们可以流式传输以分析内容。

该系统将基于 JBoss 7.1，我希望记录器通过 CDI 工作，例如：

```
@Inject
private MyLogger logger;
...
logger.info("Info message");
... 
```

使用 slf4j 来创建记录器，需要实例化记录器的类（也需要用于记录）。因此，注入可以在生产者类中产生，例如：

```
@Produces
public MyLogger create(InjectionPoint ip) {
    return new MyLogger(ip.getBean().getBeanClass());
} 
```

在 MyLogger 中，实际的记录器是通过以下方式创建的：

```
public MyLogger(Class<?> clazz) {
    super();
    logger = LoggerFactory.getLogger(clazz);
} 
```

MyLogger 不仅仅是 slf4j 记录器的简单委托，实现了跟踪、调试、信息、警告和错误等典型方法。还可以增强代理以支持标记。到目前为止，一切都很好。

最后一个问题和这个问题的重点是如何实现 MDC（映射诊断上下文），而不是每个线程，而是每个会话/用户......我很担心，因为 slf4j 的 MDC 只适用于每个线程，我弄错了信息，我也想在几个地方独立设置信息。

这个想法是实现一个自己的 MDC 有状态 bean。此 bean 可以由其他有状态 bean 独立填充，如用户登录、应用程序状态更改 bean、处理信息等。这个 bean 可能看起来像这样：

```
@Stateful
public class MappedDiagnosticContext {

    private final Map<String, String> contextInformation = new HashMap<String, String>();

    public void addConextInformation(String type, String value) {
        contextInformation.put(type, value);
    }

    public void removeConextInformation(String type) {
        contextInformation.remove(type);
    }

    public Map<String, String> getContextMap() {
        return contextInformation;
    }
} 
```

我现在需要的是让 MyLogger 访问有状态 bean，以便在 MyLogger 中执行类似的操作：

```
...
@EJB
private MappedDiagnosticContext mappedDiagnosticContext;
...
public final void info(String infoMessage) {
    MDC.setContextMap(mappedDiagnosticContext.getContextMap());
    logger.info(infoMessage);
    MDC.clear();
}
... 
```

由于生产者类中使用了 getLogger(clazz)，EJB 注入显然不起作用。现在的问题是：

*   我可以用吗

    @EJB 私有 MappedDiagnosticContext mappedDiagnosticContext;

在生产者类中获得正确状态的有状态bean？生产者阶级如何对待？作为单身人士？我不能这么容易地测试这种情况，所以问题可能会更快。;-)

*   有没有其他方法可以让我的信息到位，我目前看不到？我是否有机会在生产者方法中访问正确的有状态 bean？如果是，如何？

*   是否有一个免费/开源库已经具有我需要的功能？

我很好奇答案。提前致谢！

# ruby - 没有要加载的文件——memcache 但它已安装？

> ID：11188210
> 
> 赞同：4
> 
> 时间：2012-06-25T11:10:16.100
> 
> 标签：ruby, ruby-on-rails-3, gem, memcached, redmine

我将为 Redmine 设置负载平衡和故障转移：

```
HAProxy 1 ------- Apache 1  ------- MySQL 1
     |           (Repcached)             |
     |                |                  |
(virtual IP)    (memcached repl)   (master-master repl)
     |                |                  |
     |           (Repcached)             |
HAProxy 2 ------- Apache 2  ------- MySQL 2 
```

我想使用[repcached](http://repcached.lab.klab.org/)进行会话存储：

`/usr/local/memcached/bin/memcached -d -u memcached -l 192.168.3.118 -c 512 -t 8 -m 512 -p 11211 -P /usr/local/memcached/var/run/redmine.pid -f 1.25 -x 192.168.6.142 -X 112110`

复制功能工作正常（由 测试`telnet`）。

`memcache-client`已安装：

```
# gem list memcache-client

*** LOCAL GEMS ***

memcache-client (1.8.5) 
```

并且可以从命令行加载：

```
# su - apache -s /bin/bash
-bash-3.2$ gem contents --no-prefix memcache-client
FAQ.rdoc
History.rdoc
LICENSE.txt
README.rdoc
Rakefile
bin/memcached_top
lib/continuum_native.rb
lib/memcache.rb
lib/memcache/event_machine.rb
lib/memcache/version.rb
lib/memcache_util.rb
performance.txt
test/test_benchmark.rb
test/test_event_machine.rb
test/test_mem_cache.rb

-bash-3.2$ ruby -rubygems -e 'require "memcache"'
-bash-3.2$ echo $?
0 
```

我的服务器上只有一个 Ruby 版本：

```
-bash-3.2$ which ruby
/usr/bin/ruby
-bash-3.2$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.10
  - RUBY VERSION: 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.8
     - /var/www/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

**配置/环境.rb**：

```
require 'memcache'

config.action_controller.session_store = :mem_cache_store

memcache_options = {
   :compression => true,
   :debug => false,
   :namespace => "mem-#{RAILS_ENV}",
   :readonly => false,
   :urlencode => false
}

memcache_servers = [ '192.168.3.118:11211', '192.168.6.142:11211' ]

CACHE = MemCache.new(memcache_options)
CACHE.servers = memcache_servers
ActionController::Base.session_options[:cache] = CACHE 
```

但是在重新启动 Apache 时会引发以下错误：

> 没有要加载的文件——memcache

我错过了什么？

PS：

```
 Redmine version                          2.0.3.stable
  Ruby version                             1.8.7 (x86_64-linux)
  Rails version                            3.2.6
  Environment                              production
  Database adapter                         MySQL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:46:47.960

您需要添加`gem 'memcache-client'`到 Gemfile。

# java - java通过ssl通信

> ID：11188213
> 
> 赞同：0
> 
> 时间：2012-06-25T11:10:33.363
> 
> 标签：java, ssl

我必须编写一个访问 url 的 java 程序

> `https://localhost:8443/ping.jsp`

通过 ssl 并返回应用程序是否启动的响应。如果我从我的网络浏览器手动点击该 URL，它会要求提供安全证书，当我提供它们时，它会与应用程序通信并在网页上显示响应。我想自动化这个过程，以便 java 程序负责提供安全证书和一切。如果不是 ssl 和安全证书，我可以这样做，但我不确定如何自动化这部分（提供证书）。

我有信任库/密钥库文件，但我不确定如何使用它们来完成任务。我应该遵循的任何想法或任何有用的链接？

# java - JFreeChart 时间序列不刷新

> ID：11188219
> 
> 赞同：0
> 
> 时间：2012-06-25T11:10:54.170
> 
> 标签：java, swing, jfreechart

[我使用这个线程](https://stackoverflow.com/questions/5048852/using-jfreechart-to-display-recent-changes-in-a-time-series)中的代码开发了一个时间序列 JFreeChart 。我想将此添加到我的主面板中，其中包含其他四个面板。所以我创建了一个方法

```
 package com.garnet.panel;

    import java.awt.*;
    import java.awt.event.*;
    import java.text.*;
    import java.text.SimpleDateFormat;
    import java.util.Calendar;
    import java.util.GregorianCalendar;
    import javax.swing.JPanel;
    import javax.swing.Timer;
    import org.jfree.chart.ChartFactory;
    import org.jfree.chart.ChartPanel;
    import org.jfree.chart.JFreeChart;
    import org.jfree.chart.axis.*;
    import org.jfree.chart.plot.XYPlot;
    import org.jfree.chart.renderer.xy.XYItemRenderer;
    import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
    import org.jfree.data.time.DynamicTimeSeriesCollection;
    import org.jfree.data.time.Second;
    import org.jfree.data.xy.XYDataset;
    import org.jfree.ui.RectangleInsets;
    import org.jfree.ui.RefineryUtilities;

    public class PrepareChart {

    private static final String TITLE = "Dynamic Series";
    private static final int COUNT = 2 * 60;
    private Timer timer;
    private static float lastValue = 49.62f;
    ValueAxis axis;
    DateAxis dateAxis;
    public JFreeChart chart;
    public PrepareChart() {
        super();

        final DynamicTimeSeriesCollection dataset = new DynamicTimeSeriesCollection(1, COUNT, new Second());

      // Get the calender date time which will inserted into time series chart
      // Based on time we are getting here we disply the chart
      Calendar calendar = new GregorianCalendar();
      int date = calendar.get(Calendar.DAY_OF_MONTH);
      int month = calendar.get(Calendar.MONTH);
      int year = calendar.get(Calendar.YEAR);
      int hours = calendar.get(Calendar.HOUR_OF_DAY);
      int minutes = calendar.get(Calendar.MINUTE);
      int seconds = calendar.get(Calendar.SECOND);
       System.out.println("In caht constructor methoed");
      dataset.setTimeBase(new Second(seconds, minutes-2, hours, date, month, year));
      dataset.addSeries(gaussianData(), 0, "Currency Rate");

       chart= createChart(dataset);

        timer = new Timer(969, new ActionListener() {

            float[] newData = new float[1];

            @Override
            public void actionPerformed(ActionEvent e) {
                newData[0] = randomValue();
                System.out.println("In caht timer methoed");
                dataset.advanceTime();
                dataset.appendData(newData);
            }
        });

    }

    private float randomValue() {

      double factor = 2 * Math.random();
      if (lastValue >51){
        lastValue=lastValue-(float)factor;
      }else {
        lastValue = lastValue + (float) factor;
      }
        return  lastValue;
    }
    // For getting the a random float value which is supplied to dataset of time series chart
    private float[] gaussianData() {
        float[] a = new float[COUNT];
        for (int i = 0; i < a.length; i++) {
            a[i] = randomValue();
        }
        return a;
    }

    // This methode will create the chart in the required format
    private JFreeChart createChart(final XYDataset dataset) {  

        final JFreeChart result = ChartFactory.createTimeSeriesChart(TITLE, "hh:mm:ss", "Currency", dataset, true, true, false);

        final XYPlot plot = result.getXYPlot(); 

        plot.setBackgroundPaint(Color.BLACK);
        plot.setDomainGridlinePaint(Color.WHITE);
        plot.setRangeGridlinePaint(Color.WHITE);
        plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
        plot.setDomainCrosshairVisible(true);
        plot.setRangeCrosshairVisible(true);

        XYItemRenderer r = plot.getRenderer();

        if (r instanceof XYLineAndShapeRenderer) {

            XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer) r;
                renderer.setBaseShapesVisible(true);

                renderer.setBaseShapesFilled(true);
                renderer.setBasePaint(Color.white);
                renderer.setSeriesPaint(0,Color.magenta);
        }

      dateAxis= (DateAxis)plot.getDomainAxis();

      DateTickUnit unit = null;
      unit = new DateTickUnit(DateTickUnitType.SECOND,30);

      DateFormat chartFormatter = new SimpleDateFormat("HH:mm:ss");
      dateAxis.setDateFormatOverride(chartFormatter);
      dateAxis.setTickUnit(unit);       

      NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
      rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
      rangeAxis.setRange(lastValue-4, lastValue+4);

        return result;
    }

    public void start(){
        timer.start();
    }

    public JPanel getChartPanel(){

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                PrepareChart chart = new PrepareChart(); 
                System.out.println("In caht getter methoed");
                chart.start();
            }
        });
        return new ChartPanel(chart);
    }

} 
```

我在我的面板构造函数之一中调用此代码，如下所示：

```
 public class ChartPanel extends JPanel{

    private Dimension dim;
    private PrepareChart chart;
    public JPanel jChart;

    public ChartPanel(){
        dim = super.getToolkit().getScreenSize();
        this.setBounds(2,2,dim.width/4,dim.height/4);
        chart = new PrepareChart();
        jChart =chart.getChartPanel();       

        this.add(jChart);
    } 
```

但是当我将此面板添加到框架时，图形不会动态变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:11:47.403

好的，我想我已经发现了您的问题，但是如果没有看到您如何使用所有这些代码，我无法完全确定。

你的主要问题在这里：

```
public JPanel getChartPanel(){

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                PrepareChart chart = new PrepareChart(); 
                System.out.println("In caht getter methoed");
                chart.start();
            }
        });
        return new ChartPanel(chart);
    } 
```

在 Runnable 中，您重新创建 PrepareChart 的新实例并启动它。这没有任何意义：

1.  您的封闭`PrepareChart`实例从未启动（因此您看不到它动态更新）
2.  任何人/任何事物都无法访问您在可运行文件中创建的实例，因此该实例如果在 AWT 事件队列中永远丢失。

所以相反，我只会使用以下内容：

```
public JPanel getChartPanel() {

    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            start();
        }
    });
    return new ChartPanel(chart);
} 
```

这是我写的一个小的主要方法，它似乎可以解决问题。

```
public static void main(String[] args) {
    PrepareChart prepareChart = new PrepareChart();
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(prepareChart.getChartPanel());
    frame.pack();
    frame.setVisible(true);
} 
```

考虑重命名您的类`ChartPanel`，因为它与令人困惑的 JFreeChart 的名称冲突。此外，我看不到它的用途，因为您可以直接在 PrepareChart 返回的 ChartPanel 上执行所有这些操作。

`start()`顺便说一句，将调用放在 getter 方法中是很奇怪的。

# c++ - 处理 POSIX 套接字 read() 错误

> ID：11188221
> 
> 赞同：1
> 
> 时间：2012-06-25T11:10:58.897
> 
> 标签：c++, sockets, error-handling, client

目前我正在实现一个简单的客户端-服务器程序，只有读/写的基本功能。

但是我注意到，例如，如果我的服务器调用 write() 来回复我的客户端，并且如果我的客户端没有相应的 read() 函数，我的服务器程序就会挂在那里。

目前我正在考虑使用一个简单的计时器来定义超时计数，然后在一定计数后断开客户端，但我想知道是否有更优雅/或标准的方式来处理此类错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:14:05.350

有两种通用方法可以防止服务器阻塞并通过单个服务器实例处理多个客户端：

*   使用 POSIX 线程来处理每个客户端的连接。如果一个线程因为错误的客户端而阻塞，其他线程仍然会继续运行。如果远程客户端刚刚消失（崩溃、网络中断等），那么 TCP 堆栈迟早会发出超时信号，并且阻塞的`write`操作将失败并出现错误。
*   将非阻塞 I/O 与轮询机制一起使用，例如`select(2)`or `poll(2)`。但是，使用轮询调用进行编程相当困难。网络套接字是非阻塞`fcntl(2)`的，如果正常`write(2)`或`read(2)`在套接字上会阻塞，`EAGAIN`则会返回错误。您可以使用`select(2)`或`poll(2)`等待套接字上发生可调整超时时间的事情。例如，等待套接字变为可写，意味着当有足够的套接字发送缓冲区空间时会通知您，例如先前写入的数据被刷新到客户端计算机的 TCP 堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:14:34.993

如果客户端不再从套接字读取，它应该关闭套接字`close`。如果您不想这样做，因为客户端仍然可能想要写入套接字，那么您至少应该使用`shutdown(fd, SHUT_RD)`.

这将对其进行设置，以便服务器获得`EPIPE`写入调用。

如果您不控制客户端...如果您未编写的随机客户端可以连接，则服务器应主动处理尝试恶意的客户端。客户端恶意的一种方法是尝试强制您的服务器挂起。您应该结合使用非阻塞套接字和您描述的超时机制来防止这种情况发生。

通常，您应该编写服务器和客户端如何通信的协议，以便服务器或客户端都不会在对方不读取时尝试写入套接字。这并不意味着您必须紧密同步它们或其他任何东西。但是，例如，HTTP 的定义方式使得任何一方都非常清楚对方是否真的希望他们在协议中的任何给定点编写任何内容。

# google-drive-api - 将文件写入我们客户的谷歌驱动器的应用程序

> ID：11188225
> 
> 赞同：0
> 
> 时间：2012-06-25T11:11:07.937
> 
> 标签：google-drive-api

我们已经阅读了其他帖子，据说我们要将文件存储在谷歌驱动器中，客户端必须安装来自 Chrome 商店的网络应用程序。但事实是我们不需要 Web 应用程序，也不想让我们的客户安装“非应用程序”只是为了访问他们的驱动器。我们找到了使用文档列表 API 的建议，但我们在 API 控制台中找不到它，因为它已被弃用。我们得到的错误是：“googleapi: Error 403: The authenticated user has not installed the app with client id XXXXX”

请指教。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:02:26.597

检查此问题以了解安装要求背后的原因：[通过 Chrome 网上应用店安装](https://stackoverflow.com/questions/10474588/reason-for-installation-through-chrome-web-store)的原因。

敬请期待很快的公告！

# python - Python的“PEP-302新导入钩子”体验

> ID：11188229
> 
> 赞同：14
> 
> 时间：2012-06-25T11:11:35.473
> 
> 标签：python, specifications

我是 Ruby (CRuby) 的开发人员之一。我们正在开发 Ruby 2.0 版本（计划于 2012/2 月发布）。

Python 有[“PEP302：新的导入挂钩”](http://www.python.org/dev/peps/pep-0302/)（2003 年）。我们正在考虑将类似于 PEP302 的功能引入 Ruby 2.0 (CRuby 2.0) (*1)。由于这个背景，我试图收集关于 Python 的 PEP 302 的意见。

*1：我想提出一个可以说服 Matz 的建议。目前，Ruby 只能以标准方式从文件系统加载脚本。

如果您对 PEP 302 有任何经验或考虑，请分享。

示例：

1.  这是一个很棒的规格。无需更改它。
2.  这几乎是好的，但它有这个问题......
3.  如果我可以回到 2003 年，那么我会将规范更改为...

如果这样的问题不适合 StackOverflow，我很抱歉。我在这里发帖是因为我不确定我是否可以在 python-dev 上提出这个问题（当然，该列表不适用于 ruby​​-development）。

谢谢你。

# php - 致命错误：require_once() (include_path='.;C:\php5\pear')

> ID：11188232
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:11:47.937
> 
> 标签：php

我正在开发一个 PHP 项目，我在 require_once 中遇到错误（甚至在 require 中）

```
Warning: require_once(C:/wamp/www/MyFiles/MyProject/includes/db_config.php) [function.require-once]: failed to open stream: No such file or directory in C:\wamp\www\MyFiles\MyProject\includes\autoloads.php on line 9

Fatal error: require_once() [function.require]: Failed opening required 'C:/wamp/www/MyFiles/MyProject/includes/db_config.php' (include_path='.;C:\php5\pear') in C:\wamp\www\MyFiles\MyProject\includes\autoloads.php on line 9 
```

这就是我包含文件的方式

```
$root = $_SERVER['DOCUMENT_ROOT'];
//config..
require_once($root . '/MyFiles/MyProject/includes/db_config.php'); 
```

我试过使用

```
echo $root . '/MyFiles/MyProject/includes/db_config.php'; 
```

它正在正确打印 URL

IE `C:\wamp\www\MyFiles\MyProject\includes\db_config.php`

我正在使用 WAMP 服务器 5 autload.php 和 db_config.php 在同一个文件夹中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:18:02.700

1.  试试这个需要构造

    `require 'file';`

2.  ..或此根设置

    `$root = realpath($_SERVER['DOCUMENT_ROOT']);`

    * * *

> ***更新*** 使用虚拟主机

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:18:45.130

文件可读吗？

尝试这个：

```
<?php
echo "Does file exist?". file_exists($file) ? 'true' : 'false';
echo "Is it readable?".is_readable($file) ? 'true' : 'false';
require_once $file; 
```

您还可以使用相对于您所在文件的路径，而不是依赖 DOCUMENT_ROOT 字符串：

```
<?php
$root = realpath(dirname(__FILE__)); 
```

此外，默认情况下，Windows 中单独的目录是 \，而不是 /（alltough / 也应该解析，即使对于 require 也是如此）。您可以使用一个预定义的常量，以确保它在任何地方都兼容：

```
require_once($root . DIRECTORY_SEPARATOR . 'MyFiles' . DIRECTORY_SEPARATOR . 'MyProject' . DIRECTORY_SEPARATOR . 'includes' . DIRECTORY_SEPARATOR . 'db_config.php'; 
```

此外，如果您正在使用 APC 缓存，则可以尝试重新启动它，前提是文件的缓存过时。（EG filemtime 不正确）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:19:40.177

仔细检查文件是否存在于服务器上。如果你不能出于任何原因，这将做到这一点：

```
if(file_exists($myFile)){
echo"The file is there";
}//end of file exists
else{
echo"the file does NOT exist....fool";
}//end of else - the file is not there 
```

这是我能想到的唯一问题 - 文件不在它应该在的位置......试试上面的方法并让我更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:20:38.503

目录分隔符在 linux 和 windows 机器上不同也可能是一个问题。也许尝试使用常量`DIRECTORY_SEPARATOR`而不是硬编码分隔符？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:21:42.743

检查文件是否存在，如果存在，检查文件的权限。

# java - Firefox 已打开，但在执行 Selenium WebDriver 测试期间未在地址栏上键入 URL

> ID：11188235
> 
> 赞同：1
> 
> 时间：2012-06-25T11:11:58.197
> 
> 标签：java, eclipse, firefox, selenium-webdriver, testng

我正在使用 Selenium WebDriver 进行自动化测试。
IDE：eclipse
测试框架：TestNG
语言：Java

```
WebDriver driver = = new FirefoxDriver(); 
```

运行测试后发现如下错误：

```
[TestNG] Running:
  /tmp/testng-eclipse-2118619437/testng-customsuite.xml

org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:43:20.220

您是否使用代理连接到互联网？如果是，那么您需要为您的 FF 驱动程序设置代理。

首先，您需要导入代理类-

```
import org.openqa.selenium.Proxy; 
```

然后，您需要创建 Proxy 类的实例并在其上设置代理 -

```
proxy= new Proxy();
proxy.setHttpProxy("10.1.2.47:80"); 
```

现在，创建 FF 驱动程序的实例，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:28:30.527

问题最终解决了。我使用 selenium-server-standalone-2.41.0.jar 工具，所有错误都消失了，我现在可以运行我的测试套件了。

# google-chrome - 谷歌浏览器选择错误

> ID：11188240
> 
> 赞同：0
> 
> 时间：2012-06-25T11:12:22.413
> 
> 标签：google-chrome

还有一个问题，当你点击链接弹出一个div时，vkotorom在Chrome中有一个下拉列表是有问题的。 [http://imageshack.us/photo/my-images/534/95083845.png/](http://imageshack.us/photo/my-images/534/95083845.png/) 告诉我如何解决这个问题

# vb.net - 可以连续挂机和脱机键盘吗？

> ID：11188246
> 
> 赞同：3
> 
> 时间：2012-06-25T11:12:47.850
> 
> 标签：vb.net

我在 vb.net 中遇到了 WindowsHookEx 的问题。如果我的电脑过载，尤其是 3D 渲染，Windows 会自动断开我的键盘挂钩并且我的热键停止工作。我四处搜寻，似乎没有办法检测钩子是活动的还是断开的。所以我尝试了“moodforaday”提出的这种方法 [是否可以检测到Windows何时自动断开低级键盘挂钩？](https://stackoverflow.com/questions/6728335/is-it-possible-to-detect-when-a-low-level-keyboard-) 钩子已经自动-d

他表示定期使用 GetLastInputInfo 并在使用键时将 GetLastInputInfo 存储到另一个变量并比较结果。如果刻度比您的旧变量新得多，那么它很可能断开连接。这是一个很好的方法，但蜱可以从鼠标等其他东西上上升。在我的 Hook 类中没有鼠标钩子，因此当鼠标移动时我无法存储滴答计数的变量。所以现在我最终让它创建了一个新的钩子类实例并再次钩子。如果存储的刻度比​​新的刻度早 10000 刻度，它会每秒检查一次。

可以继续创建 Hooks 的新实例吗？它会不断地保持 Hooking/Unhooking，我想知道这是否会成为 Windows 的问题。

另外，如果有人有另一种方法来检测挂钩是否断开，请告诉我将解决整个麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:05:51.990

Do your 3D rendering in a background thread. Use `Control.Invoke` only for code where you directly access UI controls.

Alternately, you could split the rendering into very small pieces and post them to yourself as messages, to be handled on the main thread. This way you will be able to handle both internal and external messages.

In both cases, your application will be responding in a timely fashion, Windows will have no reason to consider it non-responding, and your keyboard shortcuts will stay in place.

# java - 当struts 1.3中的属性更改时调用业务逻辑

> ID：11188247
> 
> 赞同：0
> 
> 时间：2012-06-25T11:12:49.237
> 
> 标签：java, javabeans, struts-1

我在 Struts 中开发一个 Web 应用程序，问题是我想在名为“cashreceived”的 Action 表单 bean 属性之一被更新（由用户完成）时调用业务逻辑如何使用绑定属性（属性侦听器）来解决如果有任何其他方法建议，它或高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:07:37.713

我想您必须在某些下拉框中提供了 textField 以更改属性值。现在这样的输入组件具有 onClick 事件，您可以在该事件上编写一个 javascript 函数来调用。在该函数中编写代码以提交具有所需操作和方法参数的表单。

使用这个 javascript 代码：

```
function invokeLogic(){
document.yourFormName.action='somePath.do?method=someMethodWithLogic';
document.yourFormName.submit();
}

<input type="text" onblur="invokeLogic()"/> 
```

# javascript - 从 JavaScript 中的 raddatepicker 获取选定的日期

> ID：11188251
> 
> 赞同：2
> 
> 时间：2012-06-25T11:13:08.223
> 
> 标签：javascript, asp.net, raddatepicker

嗨，我的所有设计`Rad Panel bar`如下

```
 <telerik:RadPanelBar runat="server" ID="rdpnlPersonal" ExpandMode="FullExpandedItem"
                Skin="Vista" EnableEmbeddedSkins="false" Width="880px">
                <Items>
                    <telerik:RadPanelItem Expanded="true" Text="Employee Personal Information" runat="server"
                        Selected="true">
                        <Items>
                            <telerik:RadPanelItem Value="AccountInformation" runat="server">
                                <ItemTemplate>
                                    <label>
                                        Demop
                                    </label>
                                    <telerik:RadDatePicker ID="RadDatePicker1" Width="200px" runat="server" MinDate="1900-01-01"
                                        TabIndex="5">
                                        <Calendar ID="Calendar1" RangeMinDate="1900-01-01" runat="server">
                                        </Calendar>
                                    </telerik:RadDatePicker>
                                    <telerik:RadDatePicker ID="radDtHiredate" Width="200px" runat="server" MinDate="1900-01-01"
                                        TabIndex="5">
                                        <Calendar ID="calHire" RangeMinDate="1900-01-01" runat="server">
                                        </Calendar>
                                    </telerik:RadDatePicker>
                                    <asp:CustomValidator ID="CustomValidator1" runat="server" ClientValidationFunction="validatehiredate"
                                        SetFocusOnError="true" ControlToValidate="radDtHiredate" ValidationGroup="accountValidation"
                                        Display="Dynamic">Can not Hire Guy less than 18 yrs</asp:CustomValidator>
                                    <br />
                                    <telerik:RadButton ID="rdbtnwhAnother" Text="Add WithHolding" runat="server" ButtonType="LinkButton"
                                        ValidationGroup="accountValidation" OnClick="rdbtnwhAnother_Click">
                                    </telerik:RadButton>
                                </ItemTemplate>
                            </telerik:RadPanelItem>
                        </Items>
                    </telerik:RadPanelItem>
                </Items>
            </telerik:RadPanelBar> 
```

这里我需要的是，如果所选日期小于`18 years`我希望在`Custom validator`. 为此，我编写了以下脚本，但我无法实现所需的..

我的脚本如下

```
 <script type="text/javascript" language="javascript">
    function monthDiff(d1, d2) {
        alert("Mon");
        var months;
        var date1 = new Date(d1);
        var date2 = new Date(d2);
        return (date1 - date2) / (1000 * 60 * 60 * 24);
        return months;
    }

    //function getLeapYear

    function difference(d1, d2) {
        var hiredate, dob; var diff = 18 * 12;
        hiredate = document.getElementById(d1).get_selectedDate();
        dob = document.getElementById(d2).get_selectedDate();
        var Age = monthDiff(hiredate, dob);

        var compareVal = 365 * 18; //getCompareVal(hiredate,dob);

        if (Age >= compareVal) {
            return true;
            //true
        } else {
            return false; //false
        }
    }
    function validatehiredate(value, arg) {
        var datePicker = $find('<%# rdpnlPersonal.FindItemByText("Employee Personal Information").FindControl("RadDatePicker1").ClientID %>');
        var datePicker1 = $find('<%# rdpnlPersonal.FindItemByText("Employee Personal Information").FindControl("radDtDOB").ClientID %>');
        arg.IsValid = (difference(datePicker, datePicker1));
    }
</script> 
```

有人能帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:57:52.350

毕竟我通过在radcodeblock中编写脚本解决了如下问题

```
<telerik:RadCodeBlock runat="server" ID="radcb">
        <script type="text/javascript" language="javascript">
            function monthDiff(d1, d2) {
                var months;
                var date1 = new Date(d1);
                var date2 = new Date(d2);
                return (date1 - date2) / (1000 * 60 * 60 * 24);
                return months;
            }

            //function getLeapYear

            function difference(d1, d2) {
                var diff = 18 * 12;
                var Age = monthDiff(d1, d2);

                var compareVal = 365 * 18; //getCompareVal(hiredate,dob);

                if (Age >= compareVal) {
                    return true;
                    //true
                } else {
                    return false; //false
                }
            }
            function validatehiredate(value, arg) {
                var datePicker = $find('<%= rdpnlPersonal.FindItemByValue("AccountInformation").FindControl("radDtHiredate").ClientID %>');
                var datePicker1 = $find('<%= rdpnlPersonal.FindItemByValue("AccountInformation").FindControl("radDtDOB").ClientID %>');

                var date = datePicker.get_selectedDate();
                var date1 = datePicker1.get_selectedDate();
                arg.IsValid = (difference(date, date1));
            }
        </script>
    </telerik:RadCodeBlock> 
```

# mysql - 子查询中的 GROUP BY：慢。使用视图会有所帮助，但这可以在一个查询中完成吗？

> ID：11188252
> 
> 赞同：1
> 
> 时间：2012-06-25T11:13:13.740
> 
> 标签：mysql, sql, join, group-by, subquery

运行此查询需要很长时间：

```
SELECT host,ip FROM arecords WHERE ip IN 
   (SELECT ip FROM arecords GROUP BY ip HAVING COUNT(ip)>1 )
; 
```

（在我的arecords表中，有时一个IP上有多个主机。对于这些情况，我想获取主机名+ip）

我感觉子查询运行了很多次。如果我运行子查询，获取结果，并用这些结果替换子查询，速度很快。我发现我可以通过使用视图来避免这种情况。

**有没有办法用一个查询来做到这一点？**

[我想要的结果的示例 SQLfiddle：[http](http://sqlfiddle.com/#!2/6c1bd/1/0) ://sqlfiddle.com/#!2/6c1bd/1/0 ]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T11:33:57.303

试试这个解决方案。这将多次检索表中存在的每个 ip 的所有行。这使用了`FROM`一个子查询，它执行一次——而不是一个子查询，`WHERE`它为每个外行执行一次。

选择 s后`ip`，您将加入同一个表，其中 s`ip`等于在子`ip`选择中选择的`FROM`表。连接应该很快，因为它会发生在索引上，最终结果是只有表中具有多个值的 s才会获得`host`s + `ip`s ：`ip`

```
SELECT 
    b.host,
    b.ip
FROM
    (
        SELECT ip
        FROM arecords
        GROUP BY ip
        HAVING COUNT(*) > 1
    ) a
INNER JOIN
    arecords b ON a.ip = b.ip AND b.active = 'T' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:35:05.930

```
SELECT host,ip 
FROM arecords ar 
WHERE EXISTS
    (SELECT * 
    FROM arecords ex
    WHERE ex.ip = ar.ip
    AND ex.host <> ar.host
    )
    ; 
```

# c# - 使用 ASP.NET MVC 和 Access 的 Intranet 表单

> ID：11188255
> 
> 赞同：3
> 
> 时间：2012-06-25T11:13:23.930
> 
> 标签：c#, asp.net, ms-access, intranet

我对 Web 编程完全陌生，并被要求制作一个将托管在公司 Intranet 站点上的 Web 表单。该表单将用于将数据提交到后端数据库。

我的问题是数据库是使用 MS Access 2007 开发的。虽然我想使用 ASP.NET MVC 3，但我不确定我能否将 MS Access 用作后端数据库。我似乎发现的大多数示例都与 SQL Server（数据上下文）有关，据我所知，这是最好的方法。

我的问题是，由于时间限制，我目前无法将此数据库更改为 SQL。在 Access 数据库中创建表单、报告等内容已经完成了很多工作，我现在没有时间在 .Net 中复制这些内容。

谁能给我一些建议，哪些是短期内构建 Intranet 数据输入表单的最佳方法。

我会在有时间的时候更新整个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:17:54.417

```
// C#
public void ConnectToAccess()
{
    System.Data.OleDb.OleDbConnection conn = new 
        System.Data.OleDb.OleDbConnection();
    // TODO: Modify the connection string and include any
    // additional required properties for your database.
    conn.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;" +
        @"Data source= C:\Documents and Settings\username\" +
        @"My Documents\AccessFile.mdb";
    try
    {
        conn.Open();
        // Insert code to process data.
    }
        catch (Exception ex)
    {
        MessageBox.Show("Failed to connect to data source");
    }
    finally
    {
        conn.Close();
    }
} 
```

[MSDN](http://msdn.microsoft.com/en-us/library/5ybdbtte%28v=vs.71%29.aspx)上的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:19:41.893

您应该能够简单地将 Access 连接字符串添加到 web.config 文件并改用该数据库。

```
<connectionStrings>
    <add name="MyConn" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|name_of_db.accdb;" providerName="System.Data.OleDb" />
</connectionStrings> 
```

Model-View-Controller是一种软件设计模式，指的是界面和逻辑的分离。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:20:30.263

您仍然可以使用`MVC`with `MS Access`。您可以使用`OLEDBConnection`该类，但是我建议您使用支持 Access 连接的 ORM，例如 NHibernate（下面概述的教程）。

以后您可以简单地将所有 NHibernate 映射映射到`SQL Server`并切换连接字符串，该字符串将指向您的新`SQL Server`数据库，而不是`MS Access`.

*将 MS Access 链接到 NHibernate：*

[http://www.thoughtproject.com/Snippets/NHibernateWithAccess/](http://www.thoughtproject.com/Snippets/NHibernateWithAccess/)

*通过 OLEDB 连接到 MS Access：*

[http://msdn.microsoft.com/en-us/library/5ybdbtte(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/5ybdbtte(v=vs.71).aspx)

# javascript - 我的 javascript 代码有什么问题？它在 IE8 中不起作用

> ID：11188256
> 
> 赞同：0
> 
> 时间：2012-06-25T11:13:25.253
> 
> 标签：javascript

```
<html>
<head></head>
<body>
<div class="abcd"></div>
<style>
.new_info {
color:red;
}
</style>
<script>

function getBox(){
    var sende = document.querySelectorAll(".abcd");

    alert(sende[0].hasChildNodes());
    alert(y[0].hasChildNodes());
    if(sende[0].hasChildNodes() == false && sende[0].nodeValue == null){
            var newdiv = document.createElement('div');
            newdiv.innerHTML = "which i want";
            newdiv.className = "new_info";
            sende[0].appendChild(newdiv);
}
}
getBox();

</script>
</body>
</html> 
```

在上面的代码中，我想填充具有类“abcd”的 div 标签，其中一些 div 作为子节点，其中包含一些文本，例如“我想要的”。这在其他浏览器中运行良好，但在 IE8 中却不行。我应该怎么做才能在 IE8 中使用此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:14:07.967

在`querySelectorAll`IE8 中不起作用，例如仅在**IE8 标准模式下**起作用，并且在涉及 IE8 时有[错误报告。](http://www.vistaheads.com/forums/microsoft-public-internetexplorer-general/471117-bug-ie8s-queryselectorall-implementation.html)

有关解决方案，请查看：

*   [跨浏览器`getElementsByClassName`](http://code.google.com/p/getelementsbyclassname/)

遗憾或幸运的是，由于这些跨浏览器问题，存在 JavaScript 库可以从中受益，从而为我们内部清除所有混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:40:11.860

这段代码在你的代码中做了什么`alert(y[0].hasChildNodes());`，因此它没有执行。

见演示：http: [//jsfiddle.net/rathoreahsan/NmFNH](http://jsfiddle.net/rathoreahsan/NmFNH)

我已经发表评论`alert(y[0].hasChildNodes());`并且它正在工作。

# c++ - 带有 std::atomic 的未定义引用 ::store() 在 g++ 4.4 中

> ID：11188257
> 
> 赞同：0
> 
> 时间：2012-06-25T11:13:38.047
> 
> 标签：c++, linker, c++11, g++

我有一个`std::atomic`包含指向成员函数的指针。在 g++ 4.4.5 中，一切都可以正常编译，但在链接过程中出现此错误：

```
./pool.o: In function `pool::worker::worker(pool&, int, int)':
pool.cpp:(.text._ZN4pool6workerC1ERS_ii[pool::worker::worker(pool&, int, int)]+0x95): undefined reference to `std::atomic<void (pool::* const*)(unsigned int, unsigned int, pool::worker*)>::store(void (pool::* const*)(unsigned int, unsigned int, pool::worker*), std::memory_order) volatile'
./pool.o: In function `pool::worker::give_job(void (pool::* const&)(unsigned int, unsigned int, pool::worker*), unsigned int, unsigned int)':
pool.cpp:(.text._ZN4pool6worker8give_jobERKMS_FvjjPS0_Ejj[pool::worker::give_job(void (pool::* const&)(unsigned int, unsigned int, pool::worker*), unsigned int, unsigned int)]+0x142): undefined reference to `std::atomic<void (pool::* const*)(unsigned int, unsigned int, pool::worker*)>::store(void (pool::* const*)(unsigned int, unsigned int, pool::worker*), std::memory_order) volatile'
./pool.o: In function `pool::worker::soul()':
pool.cpp:(.text._ZN4pool6worker4soulEv[pool::worker::soul()]+0xf1): undefined reference to `std::atomic<void (pool::* const*)(unsigned int, unsigned int, pool::worker*)>::store(void (pool::* const*)(unsigned int, unsigned int, pool::worker*), std::memory_order) volatile' 
```

我真的不明白为什么它试图链接到 volatile 重载`store()`，在源代码中指向成员函数的指针是`const`，而不是`volatile`（并且它编译）。

相同的代码用 g++ 4.6.3 编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:20:50.810

很简单：GCC 4.4 不支持这个，或者它在你经历的方式中被破坏了。较新的 GCC 有更好的支持，并且它应该像它应该的那样工作。

# json - 如何在对 WebService 的 json 发布请求中使用对象列表或数组？

> ID：11188260
> 
> 赞同：0
> 
> 时间：2012-06-25T11:13:47.343
> 
> 标签：json, web-services, list, post

如标题中所述，我试图通过 JavaScript 中的 JSON/Ajax 调用 WebService 方法，其中包含几个字符串参数和 2 个列表或数组。

现在，使用这种格式的单个参数一切正常：

`var WSParameters = "{pParam1: 'abc', pParam2: 'def'}"`

 ````
$.ajax({
        type: "POST",
        url: "WebService.asmx/" + webMethod,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        data: WSParameters,
        success: function (result) {
            // stuff to be done on if request was successful
        },
        error: function (message) { alert('Error loading data! ' + message.responseText); }
    }); 
````  `但现在我需要为 Web 服务方法提供一个值列表/数组。Web 服务方法如下所示：

 `````
[WebMethod(true)]
public void editExistingSystem(System.Collections.Generic.List<String> pFirstList,
        System.Collections.Generic.List<String> pSecondList, 
        String pParam1,
        String pParam2)
    {
      // Stuff
    } 
````  `我想它应该是这样的，但显然这不起作用：

`var WSParameters = "{pFirstList: 15,4,13, pSecondList: 'gr00001_96594737', pParam1: 'abc', pParam2: 'def'}"`

您能帮我找到正确的语法来在这个参数列表中定义一个列表吗？

非常感谢

溴 vm370

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:46:42.370

像往常一样，我几乎在提出问题后就找到了解决方案......对不起，打扰你了。我开始帖子中示例的正确参数字符串是：

```
var WSParameters = "{pfirstList: ['15','4','13'], pSecondList: ['gr00001_96594737'], pParam1: 'abc', pParam2: 'def'}" 
```

谢谢和最好的问候 vm370```

# qt - QWidget 的 mouserelease 和 move 事件不起作用

> ID：11188261
> 
> 赞同：0
> 
> 时间：2012-06-25T11:13:56.147
> 
> 标签：qt

在这里，我开发了一个自定义小部件来打印一些形状。但是在这里我的 MouseRelease 和 MouseMove 事件不起作用。这是我的代码的问题。以及一些断言被执行。请帮我解决这个问题。

这是我的头文件

```
//painter.h

#ifndef PAINTER_H
#define PAINTER_H

#include <QWidget>
#include <QGraphicsView>
#include <math.h>
#include <QVector>
#include <QMouseEvent>
#include <QPoint>

class painter : public QWidget
{
    Q_OBJECT
private:
    enum Shape{CIRCLE,RECTENGEL,TRIANGEL} shape;
    QGraphicsView *graphic;
    QGraphicsScene *Scene;
    QPoint *start;
    QPoint *end;
    QPen *pen;
    QBrush *brush;
    QVector<QGraphicsItem*> *items;

public:
    explicit painter(QWidget *parent = 0);

    void setSize(double width,double height);
    void setShape(Shape value);
    void addItem();
    void clear();
    void scale();

signals:

public slots:

protected:

   void mousePressEvent(QMouseEvent *event);
   void mouseMoveEvent(QMouseEvent *event);
   void mouseReleaseEvent(QMouseEvent *event);

};

#endif // PAINTER_H 
```

这是我的 CPP 文件

```
//painter.cpp

#include "painter.h"
#include <QDebug>
#include <QGraphicsView>
#include <iterator>

painter::painter(QWidget *parent) :
    QWidget(parent)
{
    graphic = new QGraphicsView(this);
    Scene = new QGraphicsScene(this);
    pen = new QPen;
    brush = new QBrush;
    start = new QPoint;
    end  = new QPoint;
    items = new QVector<QGraphicsItem*>();

    graphic->setScene(Scene);

  //Scene->addEllipse(10,10,50,50,*pen,*brush);//Scene->addLine(0,0,1,1);
  //  Scene->addRect(70,70,50,50,*pen,*brush);

graphic->setSceneRect(0,0,500,500);
Scene->addEllipse(20,20,20,20,*pen,*brush);

}

void painter::setSize(double width,double height)
{
    graphic->setSceneRect(0,0,width,height);
}

void painter::setShape(Shape value)
{

    if(value==CIRCLE)
        shape = CIRCLE;
    else if(value==RECTENGEL)
        shape = RECTENGEL;
    else if(value=TRIANGEL)
        shape=TRIANGEL;
    else
        throw("Invalid Shape");

}

void painter::addItem()
{
    QGraphicsItem *newItem;
    double length = sqrt(pow((double)(start->x()-end->x()),2)+ pow((double)(start->y()-end->y()),2));

    if(shape==TRIANGEL)
    {
//        QPolygonF triangel;
//        triangel.
//        Scene->addPolygon(,pen,brush);
    }
    else if(shape==RECTENGEL)
       newItem = (QGraphicsItem*)Scene->addRect(end->x()-length,end->y()-length,2*length,2*length,*pen,*brush);

    else
       newItem =  (QGraphicsItem*)Scene->addEllipse(end->x()-length,end->y()-length,2*length,2*length,*pen,*brush);

    items->push_back(newItem);
}

void painter::clear()
{
    for(int i=0;i<items->size();i++)
       Scene->removeItem(items->at(i));

}

void painter::scale()
{
}

void painter::mousePressEvent(QMouseEvent *event)
{
    end->setX(50);
   end->setY(50);

    start->setX(event->x());
    start->setY(event->y());
shape = RECTENGEL;
    addItem();

}

void painter::mouseMoveEvent(QMouseEvent *event)
{
    qDebug("move");

}

void painter::mouseReleaseEvent(QMouseEvent *event)
{
    end->setX(event->x());
    end->setY(event->y());
    addItem();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:04:47.023

使用[QGraphicsSceneMouseEvent](http://qt-project.org/doc/qt-4.8/qgraphicsscenemouseevent.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T01:10:07.080

你根本没有告诉我们你想要做什么。Qt 的图形场景/视图系统足够强大，可以支持拖动项目，而无需编写任何代码来处理低级鼠标事件。如果这就是你所追求的，那就是。

不会调用您的鼠标移动事件，因为您的鼠标按下不会发生在您的小部件中，而是发生在 child 中`QGraphicsScene`。发生在儿童身上的鼠标按下不会触发您的小部件内的鼠标跟踪。

如果您添加了一个布局来管理 Painter 类中的子小部件，您会注意到如果您单击`QGraphicsView`. 下面的代码显示了如何在包含场景视图的小部件上设置布局。

下面的代码是创建随机大小、可移动和可聚焦的圆圈的完整且希望是正确的示例。它也证明了：

*   如何正确地将坐标从父小部件映射到场景本身。
*   清除场景不需要手动跟踪项目。
*   如何从预定义项目派生以添加简单功能。
*   如何对有焦点的项目进行操作。
*   当场景的子项被移除时会通知场景，因此简单地删除子项是非常安全的事情。
*   这`delete`可以安全地忽略空指针，例如可能由`QGraphicsScene::focusItem()`.
*   如何使用对象名称自动附加名为`on_name_signal`.
*   如何通过在末尾包含 .moc 文件在 .cpp 文件中包含 Q_OBJECT 类。
*   如何按值保留成员，将内存管理委托给编译器。

该示例是自包含的，每个仅包含一个 .pro 和 .cpp 文件。它适用于 Qt 4 和 Qt 5，并利用 C++11。

![运行示例代码的截图](../Images/11f91ddfafac136ebfddf42efa38cb78.png)

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/scene-movable-circles-11188261
// main.cpp
#include <QtGui>
#if QT_VERSION >= QT_VERSION_CHECK(5,0,0)
#include <QtWidgets>
#endif
#include <cmath>

class Circle : public QGraphicsEllipseItem {
   QBrush m_inBrush{Qt::red}, m_outBrush{Qt::lightGray};
public:
   Circle(const QPointF & c) {
      const qreal r = 10.0 + (50.0*qrand())/RAND_MAX;
      setRect({c.x()-r, c.y()-r, 2.0*r, 2.0*r});
      setFlag(QGraphicsItem::ItemIsMovable);
      setFlag(QGraphicsItem::ItemIsFocusable);
      setPen({Qt::red});
      setBrush(m_outBrush);
   }
   void focusInEvent(QFocusEvent *) override { setBrush(m_inBrush); }
   void focusOutEvent(QFocusEvent *) override { setBrush(m_outBrush); }
};

class Painter : public QWidget {
   Q_OBJECT
   QGridLayout m_layout{this};
   QGraphicsView m_view;
   QPushButton m_clear{"Clear"};
   QPushButton m_remove{"Remove"};
   QGraphicsScene m_scene;
public:
   explicit Painter(QWidget *parent = nullptr);
protected:
   Q_SLOT void on_remove_clicked();
   void mousePressEvent(QMouseEvent *event) override;
};

Painter::Painter(QWidget *parent) : QWidget(parent) {
   m_layout.addWidget(&m_view, 0, 0, 1, 2);
   m_layout.addWidget(&m_clear, 1, 0);
   m_layout.addWidget(&m_remove, 1, 1);
   m_remove.setObjectName("remove");
   QMetaObject::connectSlotsByName(this);
   connect(&m_clear, SIGNAL(clicked()), &m_scene, SLOT(clear()));

   m_view.setRenderHint(QPainter::Antialiasing);
   m_view.setScene(&m_scene);
   m_view.setSceneRect(0,0,500,500);
}

void Painter::mousePressEvent(QMouseEvent *event) {
   auto center = m_view.mapToScene(m_view.mapFromParent(event->pos()));
   m_scene.addItem(new Circle(center));
}

void Painter::on_remove_clicked() {
   delete m_scene.focusItem();
}

int main(int argc, char ** argv)
{
   QApplication app{argc, argv};
   Painter p;
   p.show();
   return app.exec();
}

#include "main.moc" 
```

```
# scene-movable-circles-11188261.pro
greaterThan(QT_MAJOR_VERSION, 4) {
    QT = widgets 
    CONFIG += c++11
} else {
    QT = gui 
    unix:QMAKE_CXXFLAGS += -std=c++11
    macx {
        QMAKE_CXXFLAGS += -stdlib=libc++
        QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.7
        QMAKE_CXXFLAGS_WARN_ON += -Wno-inconsistent-missing-override
    }
}
DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x050800
TARGET = scene-movable-circles-11188261
TEMPLATE = app
SOURCES += main.cpp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T07:44:43.823

在 QWidget 中鼠标跟踪（当没有按下鼠标按钮时）默认是不启用的。要启用它，请添加以下代码：

```
painter->setMouseTracking(true); 
```

# javascript - 我的 jquery 代码正在运行第一页而不是第二页

> ID：11188264
> 
> 赞同：-2
> 
> 时间：2012-06-25T11:13:57.570
> 
> 标签：javascript, jquery

请关注页脚中的“YAB 网络”链接。它需要运行一个工具提示。我正在使用[这个](http://jquerytools.org/demos/tooltip/index.html)库。
[第一个站点](http://oyunparkigruplari.com)。
[第二个站点](http://isguvenlik.gen.tr)。

两者必须相同。我的代码在第一个站点运行，但没有在第二个站点运行。为什么？我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:17:03.133

第二个站点无法加载 jQuery 核心库文件：

`GET http://isguvenlik.gen.tr/catalog/view/javascript/jquery/jquery-1.7.1.min.js 404 (Not Found)`

确保在此处输入正确的路径或使用此处的 Google jQuery CDN 网址：

[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

# android - 在 Android 上记录移动

> ID：11188269
> 
> 赞同：3
> 
> 时间：2012-06-25T11:14:13.670
> 
> 标签：android, video

我试图找出如何记录一个人的动作，然后用它制作一种电影，可以发送给另一个人。就像在 Draw Something 中一样。

我有一些想法不涉及录制屏幕，而是处理所做出的动作。但是，如果我可以实际录制视频，那将节省大量时间。

知道 Draw Something 是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:50:06.230

我不知道 Draw Something 但如果我理解你的问题，那么它应该不会太难：

*   您对 onTouch() 方法做出反应，以便了解何时发生 TouchDown/TouchMove/TouchUp 事件。在 touchDown 开始绘图，每次移动添加另一条线并在 touchUp 发生时停止。
*   基本上，如果您想稍后（或在另一台设备上）重复该过程，您所要做的就是存储每个触摸事件（即 touchType(up,down,move), position(x,y)）和要知道的时间戳事件发生时。
*   最后，您可以使用计时器和时间戳为绘图设置动画。

# android - 如何在 android ndk 中编译 dsplink 应用程序以开发 jni 包装器

> ID：11188270
> 
> 赞同：0
> 
> 时间：2012-06-25T11:14:15.603
> 
> 标签：android, android-ndk, java-native-interface, apk, ti-dsp

我在 android omapl138 board 上运行了 dsplink 应用程序。我可以在终端中运行该应用程序。我已将 dsplink 应用程序包含在 ndk 中，并尝试使用以下方法进行编译`Android.mk`

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_LDLIBS += $(LOCAL_PATH)/dsplink.a

LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\export\INCLUDE\Linux\OMAPL138\sys
LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\export\INCLUDE\Linux\OMAPL138\usr
LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\inc\sys\linux
LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\src\api
LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\export\INCLUDE\Linux\OMAPL138\internal
LOCAL_C_INCLUDES += C:\dsplink_1_65_01_05_eng\dsplink\gpp\export\INCLUDE\Linux\OMAPL138\sys\arch

LOCAL_MODULE    := libdsp-message
LOCAL_SRC_FILES := message.c message_os.c

include $(BUILD_SHARED_LIBRARY) 
```

在编译时，我收到以下错误

```
"Compile thumb : dsp-message <= message.c

"Compile thumb : dsp-message <= message_os.c

SharedLibrary  : libdsp-message.so

C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_Initialize':
_sync_usr.c:(.text+0xb10): undefined reference to `getpagesize' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_ProtectInit':
**_sync_usr.c:(.text+0x24b4): undefined reference to `semget'**
_sync_usr.c:(.text+0x24d4): undefined reference to `__errno_location'
_sync_usr.c:(.text+0x24f4): undefined reference to `semget'
_sync_usr.c:(.text+0x2538): undefined reference to `semctl' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_ProtectExit':
_sync_usr.c:(.text+0x25dc): undefined reference to `semctl' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_ProtectEnter':
_sync_usr.c:(.text+0x26b4): undefined reference to `semop'
_sync_usr.c:(.text+0x26c4): undefined reference to `__errno_location' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_ProtectLeave':
_sync_usr.c:(.text+0x2800): undefined reference to `semop' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `DRV_installCleanupRoutines':
_sync_usr.c:(.text+0x2898): undefined reference to `sigemptyset'
_sync_usr.c:(.text+0x28a4): undefined reference to `sigfillset' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `NOTIFY_eventWorker':
_sync_usr.c:(.text+0x7ee4): undefined reference to `sigfillset' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `_SYNC_USR_init':
_sync_usr.c:(.text+0x13ca8): undefined reference to `semget'
_sync_usr.c:(.text+0x13d30): undefined reference to `semctl' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `_SYNC_USR_exit':
_sync_usr.c:(.text+0x13e34): undefined reference to `semget'
_sync_usr.c:(.text+0x13e84): undefined reference to `semctl' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `_SYNC_USR_createCS':
_sync_usr.c:(.text+0x14008): undefined reference to `semget'
_sync_usr.c:(.text+0x14020): undefined reference to `__errno_location' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `_SYNC_USR_enterCS':
_sync_usr.c:(.text+0x14358): undefined reference to `semop'
_sync_usr.c:(.text+0x14368): undefined reference to `__errno_location' C:/NDK/android-ndk-r8/samples/two-libs//jni/dsplink.a(dsplink.o): In
function `_SYNC_USR_leaveCS':
_sync_usr.c:(.text+0x144a0): undefined reference to `semop' collect2: ld returned 1 exit status 

make: ***
[C:/NDK/android-ndk-r8/samples/two-libs//obj/local/armeabi/libdsp-message.so]
Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:04:06.710

去年 2 月，当我尝试为控制台构建 dsplink 示例时，我曾抱怨过 semget。我的错误看起来类似于您未定义的引用。我发现我的错误是由于我尝试使用标准 Android 划艇项目提供的 libc 构建 dsplink。当我用 TI DSP 源中的 libc 替换 Gingerbread 2.3.4 源分发中的仿生 libc 时，它解决了我所有的 libc 参考错误。从这个经验来看，与 DSP 代码库一起使用的 C 库中对信号量的支持似乎比基本的 Android 仿生库中的支持更多。

建议：我会确保您的 Android.mk 构建指向的用于链接的 C 库是为 DSP 项目提供的 C 库，而不是默认的 Android 仿生 libc。

这应该可以解决您的部分或大部分未定义引用，但我不确定您的 Android.mk 中是否还有其他问题。

# java - Vaadin 表格单元格被调用了两次

> ID：11188271
> 
> 赞同：0
> 
> 时间：2012-06-25T11:14:17.257
> 
> 标签：java, gwt, vaadin

我在表中使用 vaadin 生成的列。在调试时我注意到该方法

```
 generateCell(Table source, Object itemId, Object columnId) 
```

为每个要创建的单元格调用两次。我不知道这是否正常，但没有意义，它显示正常，但加载表格需要两倍的时间。我检查了我是否在某处进行了错误的刷新或重绘，但没有，我找不到。

我创建的列生成器有点不同；

```
table.addGeneratedColumn("name of column", new myNewColumnGenerator ()); 
```

然后这个类将被调用

```
public class myNewColumnGenerator implements Table.ColumnGenerator {

    public Object generateCell(Table source, Object itemId, Object columnId) {
     //Here this method called twice for each itemId in this column
    }
} 
```

# jquery - 为什么 jQuery 死链接删除代码会删除所有链接？

> ID：11188278
> 
> 赞同：1
> 
> 时间：2012-06-25T11:14:37.960
> 
> 标签：jquery

此代码检查死链接。由于浏览器不允许第三方 Ajax 请求，我创建了一个 php 文件来检查死链接，我的本机 jQuery 代码是：

```
function UrlExists(urlx) {
    $.ajax({
        url: "/chk.php?url=" + encodeURIComponent(urlx),
        cache: false,
        method: 'get',
        success: function (data) {
            if (data.indexOf("T") != -1) {
                return true;
            }
            else {
                return false;
            }
        }
    });
}
$(document).ready(function () {
    $("table[id^='row']").each(function () {
        if (!UrlExists($(this).find("a[href$='mp3']").attr('href'))) {
            $(this).remove();
        }
    })
}); 
```

虽然，我已经确定

1)`chk.php`工作正常并`T`在某些 URL 上返回，而在其他 URL 上则不返回。

2）旧的JS代码没有被使用

问题仍然是上述程序删除了所有链接。我也尝试设置`async`为 false，但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:21:58.523

成功回调由 jQuery 调用，并使用返回值。UrlExists 在您的代码中始终返回未定义的值，这被认为是错误的。试试下面这样的事情：

```
function urlExists(url, callback)
{
    $.ajax({
        url: "/chk.php?url="+encodeURIComponent(url),
        cache: false,
        method: 'get',
        success: function(data){
            if (data.indexOf("T") != -1){
                callback(true);
            } else {
                callback(false);
            }
        }
    });
}

$(document).ready(function() {
    $("table[id^='row']").each(function() {
        var url = $(this).find("a[href$='mp3']").attr('href');
        var self = this;
        urlExists(url, function (exists) {
            if (! exists) {
                $(self).remove();
            }
        });
    });
}); 
```

或者您可以使用其他答案中描述的同步方法编写 urlExists ，但是它会使 javascript 引擎在每次提取期间阻塞，而且由于多个请求不能同时发生而速度较慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:16:18.570

问题是您在成功回调中返回，该返回不会到达外部函数，因此`UrlExist()`不会像今天写的那样返回任何内容。

您要么必须从成功回调中删除，要么调用另一个删除链接的函数，但仍然必须从成功回调中调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:16:19.560

Ajax 调用是异步的。因此，对象内的返回不能正常工作（或根本不工作）。

你需要一个回调函数

```
function Urlexists(urlx,callback){

    [..]
    if(data.indexOf("T") != -1){
        callback(true);
    }
    [..]

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:21:42.553

您之前在纯 javascript 中使用相同的代码，并且它是同步的。在 jQuery 中，它将是：

```
return $.ajax({
    url: "/chk.php?url="+encodeURIComponent(urlx),
    async: false,
    cache: false,
    method: 'get'
}).responseText.indexOf("T") > -1; 
```

如果您只是想将该代码换成 jQuery。如果您还想使其异步，则必须在回调函数中进行删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:24:05.050

AJAX 调用是异步的（AJAX 中的第一个 A），因此该函数在来自服务器的应答到达之前返回。

在成功回调函数中进行删除：

```
function UrlExists(urlx, element) {
  $.ajax({
    url: "/chk.php?url="+encodeURIComponent(urlx),
    cache: false,
    method: 'get',
    success: function(data){
      if(data.indexOf("T") == -1){
        element.remove();
      }
    }
  });
}

$(document).ready(function() {
  $("table[id^='row']").each(function(){
    UrlExists($(this).find("a[href$='mp3']").attr('href')), $(this))
  })
}); 
```

# iphone - 我是否需要注册 iOS 开发者计划才能分发我的应用程序？

> ID：11188280
> 
> 赞同：1
> 
> 时间：2012-06-25T11:14:46.053
> 
> 标签：iphone, ios, xcode, macos

我想在 xcode 4.33 中导出我的简单应用程序，但由于缺少代码签名，我没有这样做。我阅读了以下说明并尝试获取 iOS 证书。xCode 告诉我，我不在开发团队中。

[操作说明](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html#//apple_ref/doc/uid/TP40011201-CH7-SW1)

我是个人开发者。所以我必须注册 iOS 开发计划并支付 99 美元/年才能导出我的应用程序？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:16:28.127

是的，您肯定需要这样做，这样您就可以拥有自己的证书和密钥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:16:42.727

是的，您确实需要注册为注册开发者才能分发您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:17:13.400

是的，您需要这样做才能将您的应用程序购买到 Apple 商店。

# sql - oracle 二进制数据类型

> ID：11188292
> 
> 赞同：4
> 
> 时间：2012-06-25T11:15:27.673
> 
> 标签：sql, oracle, oracle11g

是否有一种类型或方法如何以二进制级别在 oracle 中存储数据。我对 dml at table 和 pl/sql 的操作都感兴趣。

目前所有二进制元素都存储为 varchar2(1000)='11111...0000.1111' 但是操作和数据存储量相当大，因此需要一些优化解决方案。如果此数据可以以二进制格式存储，则需要 1000/8 字节（具有 >7 亿条记录）

也许解决方案是对这些操作使用某种 java+oracle 组合。

欢迎提出想法和建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T13:47:44.517

如果要存储最多 4000 字节的二进制数据，请使用[RAW数据类型。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#i46018)数据将存储为一串字节，无需字符集转换。

使用[`UTL_RAW`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_raw.htm#ARPLS71350)包对`RAWs`.

LONG RAW 数据类型已弃用，当您需要处理超过 4000 字节的数据时，应切换到[BLOB 。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref200)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T15:42:38.970

请参阅 Vincent Malgrat 的回答：如果您想在 Oracle 中存储和处理二进制数据，那么`RAW`数据类型就是要走的路。

（正如 alegen 的回答所暗示的，如果您的意图是存储和检索不需要在数据库中“处理”的图像、视频、音频或压缩数据，但您只是“存储”它并“检索”它，那么`BLOB`数据类型可能更合适；

（注意：RAW 数据类型限制为 4000 字节，BLOB 数据类型不是。出于性能原因，我更喜欢将 RAW 用于更短的值（例如，200 字节或更少），我需要定期访问值。对于更长的值，很多查询没有引用二进制数据，我倾向于支持`BLOB`。（这完全是由于内部存储方式的差异`RAW`：`BLOB`内联存储与单独的块，拆分行，适合块的行数等）

对于您描述的特定问题，根据您提供的信息，`RAW`听起来像是要走的路。您指定您有 1000 位的序列，但完全不清楚这是一个常数，还是一个最大长度，或者您是否已将较长的二进制数据字符串分解为更易于管理的块以适合列。（如果你真的在处理一个单一的、巨大的二进制数据块，你真的希望避免将它“切碎”成一堆小块，并将每一块存储在单独的行中。这样会更有效率将它们全部存储为一个 BLOB，并将其作为一个简单的流使用。

所有这些都会真正影响您决定是使用 BLOB 还是 RAW。

* * *

除此之外，关于从 VARCHAR2 表示的 1 和 0（例如，'00101010'，将真实信息的每个“位”存储为单独的字符）转换为更有效地存储的二进制表示的问题，每个“8 位” “需要一个字节存储的真实信息......

Oracle`RAW`数据类型将使您将 8 位存储到单个字节中。也就是说，RAW(125) 将存储您的 VARCHAR2(1000) 的等价物，这将为您每行节省 875 个字节（对于 SBCS，如果您使用的是 DBCS，则是两倍多）。这将显着降低存储需求，让您在一个块中获得更多行，并允许获得更好的性能。

要将当前存储为`VARCHAR2`一串一和零的数据转换，我不知道有任何内置函数可以做到这一点。但是滚动您自己的函数将二进制字符串表示形式转换为十六进制字符串表示形式相当简单。之后，您可以使用内置`HEXTORAW`函数转换为`RAW`.

这是一个可以用作起点的示例。

（注意：此函数只是一个示例，当输入字符串的长度不是 8 个字符的倍数时，它不能有效处理情况。此外，它的行为是字符串值包含除 '1' 或 '0' 以外的字符可能不合适（正如它所写的那样，它将“0”以外的任何字符视为“1”。但是，作为起点已经足够了）。

```
create or replace function binstr_to_hexstr
( as_binstr in varchar2 ) return varchar2
is
  li_n binary_integer default 0;
  ls_hexstr varchar2(16) default '0123456789ABCDEF';
  ls_return varchar2(2000) default '';
begin
  if ( as_binstr is null ) then
    return null;
  end if;
  ls_return := '';
  li_n := 0;
  for i in 1 .. length(as_binstr) loop
    li_n := li_n*2 + abs(instr('01',substr(as_binstr,i,1))-1);
    if mod(i,4) = 0 then
      ls_return := ls_return || substr(ls_hexstr,li_n+1,1);
      li_n := 0;
    end if;
  end loop;
return ls_return;
end;
/

SELECT binstr_to_hexstr('00101010') AS hexstr FROM DUAL UNION ALL
SELECT binstr_to_hexstr('00x0 010') FROM DUAL;

HEXSTR                                                                             
------
2A
2A 
```

注意：仅当输入字符串的长度是 8 的偶数倍（即 ）时，此函数才会返回预期结果（匹配的十六进制表示`MOD(length(as_binstr),8) = 0`）。否则，函数“丢失”尾随位和/或返回奇数个十六进制数字。（当输入参数的长度不是 8 的倍数时，可以修改该函数以引发异常。）

`HEXTORAW`和函数在使用客户端应用程序（例如 TOAD、SQL Developer 或 SQL*Plus）`RAWTOHEX`处理数据时非常有用。`RAW`（该`HEXTORAW`函数用于将`binstr_to_hexstr`函数的输出转换为 RAW。）例如：

```
create or replace function binstr_to_raw
( as_binstr in varchar2 ) return raw
is
begin
  return hextoraw(binstr_to_hexstr(as_binstr));
end;
/ 
```

正如文森特马尔格拉特在他的回答中指出的那样，Oracle 提供了几个包（例如`UTL_RAW`和`UTL_ENCODE`），它们在处理 RAW 数据时很有用。

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_raw.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_raw.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:19:56.567

为此，您可以使用`BLOB`(Binary Large OBject) 类型。[链接](http://www.orafaq.com/wiki/BLOB)到如何使用它的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-20T17:39:13.503

截至今天，我在 10 和 11g 上使用过这个，我认为答案需要更新。这类数据的内置数据类型是（比PL/SQL`RAW`更容易操作的二进制数据）。`BLOB`

顾名思义，`RAW`数据类型是原始二进制格式并按原样存储（第一个块的长度字节除外），因此是该行的最佳存储空间。`RAW`可以使用`SYS.UTL_RAW`包来操作数据类型。它可以转换为几乎任何数据类型（如果存储方案匹配。例如`b1101`不是`NUMBER`13，而是`PL_INTEGER`13`VARCHAR2`和`CHR(13)`.

`UTL_RAW`此外，与使用 进行转换相比，`HEXTORAW`and函数更容易将数据从十六进制表示的数据`RAWTOHEX`来回转换为. 例如，或两者都导致值; 如您所见，额外的零被填充到左侧以形成一个字节，因为 a 的基本块是一个字节。在转换到和其他流期间，数据本身充当小端（意味着最低有效字节驻留在数据的最右边字节上），但在转换为复杂数据类型时，它只会复制内存，并填充零到如果需要的话，左边。`RAW``VARCHAR2``HEXTORAW('d')``HEXTORAW('D')``RAW``b00001101``RAW``VARCHAR2``NUMBER`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-25T13:59:28.863

我不确定这是否有帮助，但您可以使用 NUMBER 数据类型和[bin_to_num](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions013.htm#i1002025)函数：

```
create table test_bin(num_val number, var_val varchar2(1000));

insert into test_bin values(bin_to_num(1,0,1,0,1,0,1,0), '10101010');

select dump(num_val, 17) n, dump(var_val, 17) v from test_bin;

n                     |   v
---------------------------------------------------
Typ=2 Len=3 c2,^B,G   |   Typ=1 Len=8 1,0,1,0,1,0,1,0 
```

如您所见，它是排序器 - 而不是 8 个字节，您只有 3 个字节，但它仍然不是一个字节

**更新** 找到了一种将它放在一个字节中的方法：您可以使用该`chr`函数

```
select dump(chr(bin_to_num(1,0,1,0,1,0,1,0))) c from dual;

n                   
--------------------
Typ=1 Len=1 170 
```

因此，您可以继续使用 varchar2 但只需将每 8 位转换为 char

# mono - 在 Mono for Android 配置文件中不存在 System.Data.DataSetExtensions

> ID：11188295
> 
> 赞同：3
> 
> 时间：2012-06-25T11:15:33.020
> 
> 标签：mono, xamarin.android, system.data

我已将第三方 .net 库导入到我的 Mono for Android 项目中，该项目使用 DataSetExtension 库。当我尝试编译时，我收到以下错误消息：

加载程序集时出现错误 51 异常：System.IO.FileNotFoundException：无法加载程序集“System.Data.DataSetExtensions，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”。也许它在 Mono for Android 配置文件中不存在？文件名：Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences 中 Monodroid.Tuner.MonoDroidResolver.Resolve（AssemblyNameReference 参考，ReaderParameters 参数）中的“System.Data.DataSetExtensions.dll”（List`1 程序集，AssemblyDefinition 程序集）

要解决此问题，我可以从 GAC 添加 .net System.Data.DataSetExtensions，并将其设置为本地复制。但是，有没有人知道当我部署到设备时它是否会起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:53:33.873

这通常不是一个好方法，因为如果 DLL 尝试访问 Mono for Android 配置文件中不可用的内容，您的应用程序将会崩溃。[这个答案](https://stackoverflow.com/a/10552168/170333)有更多的细节。[Xamarin 网站](http://docs.xamarin.com/android/about/assemblies)上还提供了配置文件中包含的程序集列表。在许多情况下，Android 的 Mono 配置文件与 Silverlight 的配置文件非常相似，并且由于 Silverlight 不提供 System.Data.DataSetExtensions，所以我并不奇怪它在这里不存在。

您可能可以尝试的一件事是根据 Mono for Android 配置文件自己编译 System.Data.DataSetExtensions。我不知道这是否可行并且我自己也没有尝试过，但这将是一种确定是否可行的简单方法，并且比在您的应用程序中链接到 .NET 4.0 DLL 更安全。Mono 的 System.Data.DataSetExtensions 实现在[他们的 Github 存储库](https://github.com/mono/mono/tree/master/mcs/class/System.Data.DataSetExtensions)中可用。

# html - 用我的标题 div 让一切集中起来

> ID：11188301
> 
> 赞同：2
> 
> 时间：2012-06-25T11:15:46.610
> 
> 标签：html, css, position, alignment, center

[http://dl.dropbox.com/u/13722201/Dorset%20Designs/index.html](http://dl.dropbox.com/u/13722201/Dorset%20Designs/index.html) 正如您将看到，当您调整浏览器大小时，一切都会集中，直到浏览器边缘触及主 div，然后只有导航栏保持集中。我知道这是我的编码问题，但我找不到问题。这里也是css [http://dl.dropbox.com/u/13722201/Dorset%20Designs/main.css](http://dl.dropbox.com/u/13722201/Dorset%20Designs/main.css)

在此先感谢 Arran，16

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:30:47.433

在您的样式表中进行以下编辑，请在下面找到它：-

```
#main {
    background: none repeat scroll 0 0 #0099FF;
    box-shadow: 0 5px 10px 3px #000000;
    height: 1600px;
    left: 0; /* right: 20px; this has been changed to 0;*/
    margin-left: auto;
    margin-right: auto;
    position: absolute;
    right: 0; /* right: 20px; this has been changed to 0;*/
    top: 0;
    width: 960px;
    z-index: -1;
} 
```

**编辑 - 解释：**

因为你已经给了 right 和 left 值，`20px`因此它迫使它从左侧`<div id="main">`移动。`20px`这`20px`就是在您调整浏览器大小以适应 div 时空间产生的共振。

# php - 在 .js 文件中使用 PHP 的 json_encode() 函数

> ID：11188304
> 
> 赞同：0
> 
> 时间：2012-06-25T11:15:57.673
> 
> 标签：php, javascript, json

我在php文件中有一个数组说

```
<?php $authcode = array("auth"=>"jshkjashdkj");?> 
```

现在我想在一个 JS 文件中访问这个数组，那我该怎么做呢？

与 .js 文件一样，它`<?php echo json_encode($authcode); ?>`不起作用。

> **已更新**

我的 custom.js 文件包含以下代码，我必须在 url 中使用 authcode：

```
$('#removeimage').click(function(){

              $.ajax({
                        url:'deletefile.php?filename='+$('#filename').val()+'&make='+$('#make').val()+'&model='+$('#model').val(),
                        cache: false,
                        async: false,
            dataType: "json",
              success: function(data) {
              window.location="/upload/?authcode=97A434B1-E250-490D-8CF1-4B664AB42EED&make="+data.make+"&model="+data.model+"&imagename="+data.filename;

                        },
            error: function(data) {
                alert("Service is down");
            }
                 });
}); 
```

请注意 authcode 的用法，这就是我需要使用我的 authcode 数组的地方

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:20:03.480

您需要告诉 php 它也应该处理 .js 文件。有两种方法可以做到这一点：

1.  从 file.js 重命名为 file.php
2.  弄乱 apache 配置，使其将 .js 文件视为 php

第一个更容易。您必须做的另一项更改是在您的 html 中替换对 js 文件的调用：

```
<script type="text/javascript" src="somefolder/file.php"></script> 
```

编辑：使脚本在文件顶部`file.php`输出 a`header("Content-Type: text/javascript");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:20:39.267

```
<?php $authcode = array("auth"=>"jshkjashdkj");?>
<script>
  // declare a global var, then you could access it in file.js
  var authcode = <?php echo json_encode($authcode); ?>;
</script>
<script src="file.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:18:45.790

不使用 AJAX 就无法访问 JS 文件中的 PHP 变量。

也就是说，您可以使您的脚本成为一个返回`application/javascript`响应的 PHP 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:20:31.940

根据您的用例，您有多种可能性。

1.  您可能不想从 PHP 生成 .js 文件

    `file_put_contents('somefile.js', $content);`

2.  在 .js 文件中允许 PHP

    `AddHandler application/x-httpd-php5 .js`

3.  把它放在你的布局中，并将你的数据存储在一个全局变量中，让它可以从其他所有 js 脚本中访问。

哪种方法适合您的需要完全取决于您。但我通常会避免第二种方法。

# android - 同一个xml文件中的ListView和Expandable listview

> ID：11188306
> 
> 赞同：0
> 
> 时间：2012-06-25T11:16:10.220
> 
> 标签：android, xml, listview, expandable

我的布局中有两个按钮，分别是 b1 和 b2。通过按 b1，我想使用 listview 填充列表。通过按 b2，我想使用 expandablelistview 填充列表。我在这些列表视图上传递不同的数据集。我的问题是，是否可以在同一个 xml 文件中使用列表视图和可扩展列表视图？如果可能的话，那该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:32:17.450

是的，很有可能。

在此处尝试此代码。它应该可以正常工作。

```
list = (ListView) findViewById(R.id.list);
list.setAdapter(myListAdpater);

expList = (ExpandableListView)findViewById(R.id.expList);
expList.setAdapter(myExpListAdapter); 
```

**注意：**无需在您的类中扩展 ExpandableListActivity 或 ListActivity。

# linq - linq left join - 选择左实体的属性

> ID：11188307
> 
> 赞同：2
> 
> 时间：2012-06-25T11:16:13.213
> 
> 标签：linq

我不断收到带有以下 linq 的 ArgumentNullException“值不能为空。参数名称：内部”：

```
var dataSource = (from v in vouchers
                  join payAdj in paymentAdjustments on v.VoId equals payAdj.VoId into pTemp
                  from p in pTemp.DefaultIfEmpty()
                  select new
                  {
                    VoId = v.VoId,
                    OpId = v.OpId,
                    PaValue = p.PaValue
                  }); 
```

凭证和 paymentAdjustments 都是实体列表。

我已经阅读了很多关于此的帖子，并且我尝试的所有内容都不断给我相同（或类似）的错误。

*   将 PaValue 转换为可以为空的小数，即 PaValue = (decimal?)p.PaValue

*   在访问 PaValue 之前测试 p 是否为 null 即 PaValue = p != null ？p.PaValue：（十进制）0

*   使用 SingleOrDefault （应该只有一个）而不是 DefaultIfEmpty

*   做一个嵌套选择而不是加入...进入即PaValue =（来自paymentAdjustments中的p，其中p.VoId == v.VoId选择p.PaValue）.DefaultIfEmpty（）

我正在使用 c# 2010 Express 和 .Net 4。

任何其他建议将不胜感激。

谢谢马琳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:24:31.640

我知道这很旧，但对于任何寻找答案的人来说，你加入的两个对象之一是空的。先做这个。

if (vouchers != null && payAdjustments != null) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:20:12.050

```
var query = from case in dbEntity.Cases
            join Comm in dbEntity.Comms on case.log_id equals comm.CaseId into collection
            from subCase in collection.DefaultIfEmpty()
            select new { Case=case,Status= (subCase==null?null:subcase.Status }; 
```

# python - Search.twitter.com 添加位置

> ID：11188311
> 
> 赞同：1
> 
> 时间：2012-06-25T11:16:24.793
> 
> 标签：python, twitter, twitter-oauth

我之前问过一个关于通过 twitter api 获取一个人的最后 100 次提及的问题。现在我成功了，我注意到默认情况下 twitter api 没有“位置”标签。我相信这与“search.twitter.com”结果有关

您可以在下面找到我使用的代码和 twitter 搜索查询字符串。我可以添加一些会强制显示位置的东西吗？

提前致谢！

```
tweets = json.loads(urllib2.urlopen('http://search.twitter.com/search.json?q=BarackObama&rpp=5&include_entities=true&result_type=mixed').read())['results'][0:3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:25:53.113

如果在发送推文时记录了地理坐标，您将在[`coordinates`](https://dev.twitter.com/docs/platform-objects/tweets#obj-coordinates)字段中包含的搜索中检索它们。如果它不存在，或者`nul`它没有被记录。

如果你想强制它只给你返回其中存储有坐标的推文，那么你可以使用可选[`geocode`](https://dev.twitter.com/docs/api/1/get/search)参数。

> 返回位于给定纬度/经度的给定半径内的用户的推文。该位置优先取自 Geotagging API，但将回退到他们的 Twitter 个人资料。参数值由“latitude,longitude,radius”指定，其中半径单位必须指定为“mi”（英里）或“km”（公里）。请注意，您不能通过 API 使用 near 运算符对任意位置进行地理编码；但是，您可以使用此地理编码参数直接搜索附近的地理编码。
> 
> 示例值：37.781157,-122.398720,1mi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:26:13.570

根据[关于搜索的 Twitter 文档](https://dev.twitter.com/docs/using-SEARCH)：

> 仅当查询包含`geocode` 参数并且用户在推文中包含地理信息时，才会包含位置数据。

这意味着您需要执行基于位置的搜索来获取位置数据。当然，推文还需要附加位置数据，但这应该是显而易见的。

# opengl - OpenGL GLSL Cel Shading and Outline 算法

> ID：11188314
> 
> 赞同：7
> 
> 时间：2012-06-25T11:16:31.327
> 
> 标签：opengl, glsl, outline

我已经使用 glsl 成功实现了一个 cel 着色器。但是我的问题是关于概述所有内容，互联网上的每个 opengl 示例都非常陈旧，与当前技术不匹配，因此技术很慢等等......所以我无论如何都找不到在 glsl 中做这件事。我想过一些想法，比如将最不密集的区域着色为黑色，但关于 gl_Vertex、gl_Position 和眼睛位置的解释甚至不够。所以，由于每一项技术都太老了，我终于决定向某人询问这个大纲问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T11:24:15.113

我会在 zbuffer 上使用某种边缘检测过滤器（可能与颜色缓冲区上的边缘检测结合使用），然后用（反转的）结果调制帧缓冲区。最常见的边缘检测过滤器之一是 sobel 算子：

[http://en.wikipedia.org/wiki/Sobel_operator](http://en.wikipedia.org/wiki/Sobel_operator)

**编辑：**另一种便宜的方法是在渲染普通网格之前绘制一个黑色的网格副本，剔除面向倒置，顶点在法线方向略微移动。这可能是他们在 XIII 中所做的，我也很确定这就是在 Jet Set Radio 中所做的。

**EDIT2：**如果您希望轮廓的厚度保持不变，而不管与观察者的距离如何，您应该使用这个距离缩放顶点的移动量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:24:28.730

你看过 glPolygonOffset 吗？

我用它在填充的多边形上绘制轮廓。

[http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPolygonOffset.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPolygonOffset.xml)

# c# - Javascript 数组作为 WCF Web 服务参数

> ID：11188315
> 
> 赞同：1
> 
> 时间：2012-06-25T11:16:33.703
> 
> 标签：c#, javascript, wcf

我需要将一个简单的 Javascript 数组传递给我的 wcf ajax 网络服务：

```
var array = new Array();
array["ParamA"] = "xyz";
array["12344"] = "9";
myNamespace.DoSomething(array); 
```

这是我的 WCF 方法：

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public void DoSomething(object values) 
```

当使用我的值从 javascript 调用“值”时，它是一个空数组。将 KeyValuePairs 的简单列表传递给我的 Web 服务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:17:57.760

我自己找到了解决方案：

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public void DoSomething(Dictionary<string, object> values) 
```

必须像这样在javascript中调用：

var params = [{ "Key": "A", "Value": 5}, { "Key": "B", "Value": "Test}]

```
$.ajax({
    type: "POST",
    contentType: "application/json",
    dataType: "json",
    data: '{"values":' + JSON.stringify(params) + '}',
    ... 
```

这当然可以简化：

```
var parameters = [{ "A": 5}, { "B": "Test"}];

var dictionary = new Array();
for (var i in parameters) {
   var key = Object.keys(args[i])[0];
   var value = args[i][key];
   dictionary.push({ "Key": key, "Value": value });
} 

$.ajax({
    type: "POST",
    contentType: "application/json",
    dataType: "json",
    data: '{"values":' + JSON.stringify(dictionary) + '}',
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:09:47.323

获取 Javascript 对象

```
var obj = {
    Key: "xyz",
    Value: "9"
};

Array objArray = new Array();
objArray.push(obj); 

$.ajax({
//Add necessary detail here               
data:  JSON.stringify(objArray);
}); 
```

在服务层用 NameValuePair 数组替换对象

```
public void DoSomething(NameValuePair[] values)
{}

[DataContract]
public class NameValuePair
{
[DataMember]
public string Key {get;set;}
[DataMember]
public string Value {get;set;}
} 
```

# php - 在cygwin中使用php hip-hop

> ID：11188328
> 
> 赞同：0
> 
> 时间：2012-06-25T11:17:22.840
> 
> 标签：php, cygwin, hiphop

是否可以在 cygwin 中运行 hip-hop php，它在 linux 环境等 Windows 中使用更多脚本语言......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:29:20.620

您误解了[cygwin](http://www.cygwin.com/)是什么，它是 Windows 上标准 *nix 环境的近似值，让您可以访问许多您原本不会拥有的工具和 shell。它不是提供必要的 api 和系统调用的 linux 系统，它不能运行 linux 原始二进制文件。

所以我认为你的实际问题是：“如何在 Windows 下运行 hiphop 生成的编译应用程序？” 我不得不说：现在你不能禁止尝试在 Windows 上自己编译生成的 c++ 源代码。

参考见

*   [在 Windows 上运行编译文件（hiphop-php-dev）](https://groups.google.com/forum/?fromgroups#!msg/hiphop-php-dev/zzNeu-D-f_4/n3wy1s8M-QIJ)
*   [关于窗户](https://groups.google.com/forum/?fromgroups#!msg/hiphop-php-dev/zzNeu-D-f_4/n3wy1s8M-QIJ)

所以现在你唯一真正的选择是在虚拟化的 linux 环境中运行它，在 Windows 之上或之外，这是否值得，我不能说。

# c# - 按钮数组 NullReferenceException 未处理

> ID：11188332
> 
> 赞同：0
> 
> 时间：2012-06-25T11:17:33.017
> 
> 标签：c#, arrays, winforms

首先，我是新来的，并且是 csharp 的新手。只是在做一些学习csharp的练习时筋疲力尽。找不到解决方案为什么我收到错误“NullReferenceException 未处理”和

1）如何克服这个？根据我的研究，它与初始化有关，但无法实现。我调试并观察了所有按钮获取的值都为空值是因为这个吗？我该如何解决？该怎么办？要添加哪个代码？

（***欢迎所有有关类初始化和数组以及空内容的通知知识。我想了解所有要点并想成为专家：P，人们也可以优化代码。欢迎提供所有额外信息。）

2）为什么编译器不显示错误但运行代码时出现错误？

好的，现在我有代码了

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace temp1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Button[] btn = new Button[5];

            for (int i = 0; i < 5; i++)
            {
                btn[i] = new Button();
                btn[i].Width = 50;
                btn[i].Height = 50;
                flowLayoutPanel1.Controls.Add(btn[i]);
                btn[i].Click += new EventHandler(btn_Click);
            }
        }

        void btn_Click(object sender, EventArgs e)
        {
            Button[] btn = sender as Button[];
            btn[3].Text = "button name changed";  // here problems occurs
            //btn[3].BackColor = Color.Red;   // here problems occurs
            // btn[3].PerformClick();    // here problems occurs
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:19:39.360

它应该是：

```
void btn_Click(object sender, EventArgs e)
{
    Button btn = sender as Button;
    btn.Text = "button name changed";  // here problems occurs
} 
```

发件人是按钮本身，而不是数组

根据评论更新：

你应该这样做：

```
public partial class Form1 : Form
{
    private Button[] m_ButtonsArray;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        m_ButtonsArray = new Button[5];

        for (int i = 0; i < 5; i++)
        {
            m_ButtonsArray [i] = new Button();
            m_ButtonsArray [i].Width = 50;
            m_ButtonsArray [i].Height = 50;
            flowLayoutPanel1.Controls.Add(m_ButtonsArray [i]);
            m_ButtonsArray [i].Click += new EventHandler(btn_Click);
        }
    }

    void btn_Click(object sender, EventArgs e)
    {
        m_ButtonsArray[3].Text = "button name changed";  // here problems occurs
    }
} 
```

更新 - 单击第 5 个按钮时更改第 2 个按钮：

```
public partial class Form1 : Form
{
    private Button[] m_ButtonsArray;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        m_ButtonsArray = new Button[5];

        for (int i = 0; i < 5; i++)
        {
            m_ButtonsArray [i] = new Button();
            m_ButtonsArray [i].Width = 50;
            m_ButtonsArray [i].Height = 50
            m_ButtonsArray [i].Tag = i;;
            flowLayoutPanel1.Controls.Add(m_ButtonsArray [i]);
            m_ButtonsArray [i].Click += new EventHandler(btn_Click);
        }
    }

    void btn_Click(object sender, EventArgs e)
    {
        Button btn = (Button)sender;
        if (((int)btn.Tag) == 5)
        {
           m_ButtonsArray[2].Text = "your text here";
        }
    }
} 
```

解释：当我创建按钮时，我将索引添加为标签（按钮知道它是具有`Tag`属性的索引）当单击按钮时，我检查发送者对象 - 将其转换为`Button`，以获取保存在`Tag`. 如果`Tag`值为 5，那么我引用第二个按钮（虽然我可以引用它`m_ButtonsArray`）并更改它的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:08:33.030

你也可以这样解决...... eyossi的解决方案非常相似

公共部分类Form1：Form {私有

```
public Form1()
{
    InitializeComponent();
}
Button[] m_Buttons = Array new Button[5];

private void Form1_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 5; i++)
    {
        m_ButtonsArray [i] = new Button();
        m_ButtonsArray [i].Width = 50;
        m_ButtonsArray [i].Height = 50;
        flowLayoutPanel1.Controls.Add(m_ButtonsArray [i]);
        m_ButtonsArray [i].Click += new EventHandler(btn_Click);
    }
}

void btn_Click(object sender, EventArgs e)
{
    m_ButtonsArray[3].Text = "button name changed";  // here problems occurs
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:21:35.073

这段代码是问题开始的地方：

```
Button[] btn = sender as Button[]; 
```

在编译时，编译器没有任何迹象表明`sender`of 类型`object`不会转换为`Button`s 数组。但是在运行时它不会这样转换，因为它不是一个数组。这只是一个`Button`：

```
Button btn = sender as Button; 
```

处理程序方法 ( `btn_Click`) 不是同时处理*所有*按钮，而是单独处理每个按钮。单击按钮时，该按钮本身会调用处理程序方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:26:14.503

*（其他人已经正确回答了为什么抛出此异常）*

编译器无法显示该错误，因为您正在强制将`as`对象强制转换（使用）到其他对象。编译器不知道对象是什么，因此不知道会发生错误。

如果您在代码中手动调用该方法并将按钮数组作为第一个参数传递给它，则代码不会崩溃。

在这种情况下，一件好事是使用标准强制转换而不是`as`抛出的异常会更加明确，并且会发生在正确的行上，而不是让空值传播并在后面失败。

对您的代码的一个小注释是您的数组是无用的，您不会在任何地方使用它，并且一旦加载函数完成执行，它将从内存中删除（不完全是，但如果您愿意，您可以阅读有关垃圾收集器的信息更多细节）。

# java - 我的 ArrayList 会发生什么

> ID：11188333
> 
> 赞同：4
> 
> 时间：2012-06-25T11:17:52.687
> 
> 标签：java, collections

我正在尝试理解 Java。

假设我有一个`ArrayList`大小为 50 并预先填充了一些名称。

假设我从数组列表中删除了第三个和第四个元素。我的数组列表会怎样？会重新安排吗？如果我尝试访问现在已删除的第 3 和第 4 个元素，它会返回 null 吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T11:19:38.593

不，您要删除的元素之后的元素将向左移动（昂贵的操作），因此您不会有任何漏洞。

作为旁注：如果删除第 3 个元素，则第 5 个元素将向左移动，因此如果之后删除第 4 个元素，则改为删除起始集合的第 5 个元素。要删除两个连续的元素，您应该提供两次相同的索引。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T11:20:28.127

它们将被重新排列和移动。

如果您希望它们返回`null`，只需将要删除的元素显式设置为 null 而不是删除它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T11:23:41.160

你为什么不自己尝试一下？

```
List<String> list = new ArrayList<String>();
list.add("A");
list.add("B");
list.add("C");
list.add("D");
list.add("E");
list.add("F");
list.add("G");

for(int i = 0; i < list.size(); i++) System.out.println("index " + i + ": " + list.get(i));

System.out.println();
list.remove(0); // remove "A"

for(int i = 0; i < list.size(); i++) System.out.println("index " + i + ": " + list.get(i)); 
```

**输出：**

```
index 0: A
index 1: B
index 2: C
index 3: D
index 4: E
index 5: F
index 6: G

index 0: B
index 1: C
index 2: D
index 3: E
index 4: F
index 5: G 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T11:24:59.730

您实际上有两种选择：

```
final List<Character> x = new ArrayList<Character>(asList('a', 'b', 'c', 'd'));
x.set(1, null); // removes an element without shifting
x.remove(0);    // removes an element with shifting
System.out.println(x); 
```

印刷

```
[null, c, d] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-25T11:19:56.947

数组列表元素将重新排列

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T11:20:23.110

ArrayList 是可由索引引用的项目的连续列表。因此，当您删除一个项目时，所有后续项目都将被移动。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-25T11:21:03.233

元素将被移动。

请参阅 ArrayList 删除的 javadoc：

```
java.util.ArrayList
public E remove(int index)
Removes the element at the specified position in this list. Shifts any subsequent elements to the left (subtracts one from their indices).
Specified by:
remove in interface List
Overrides:
remove in class AbstractList
Parameters:
index - the index of the element to be removed
Returns:
the element that was removed from the list
Throws:
IndexOutOfBoundsException - 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-25T11:23:02.320

根据[remove 方法的 javadoc，](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(int))其余条目将向后移动，因此没有间隙。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-25T11:22:35.200

通常您使用[java 集合](http://docs.oracle.com/javase/tutorial/collections/index.html)作为动态存储，而不定义大小。

```
List<String> list = new ArrayList<String>(); //dynamic 
```

对于静态预定义集合，您使用[java 数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

```
String[] array = new String[50]; //static 
```

# android - 如何为视图的翻译设置动画

> ID：11188338
> 
> 赞同：21
> 
> 时间：2012-06-25T11:18:08.897
> 
> 标签：android, android-animation, android-view

在第一次单击按钮时，我想`View`沿 x 轴滑动 a（假设向右滑动 200 像素）。在第二次按下按钮时，我想将`View`背面沿 x 轴滑动到其原始位置。

该`View.setTranslationX(float)`方法分别调用和将视图*跳转*到目标水平位置。任何人都知道我可以如何*滑动*到目标水平位置？`myView.setTranslationX(200);``myView.setTranslationX(0);`*`View`*

 *> **注1：** A`TranslateAnimation`不好，因为它实际上并没有移动，`View`只是呈现出它移动的错觉。
> 
> **注意 2：**在提出问题时，我没有意识到`setTranslationX(float)`和`setTranslationY(float)`方法是从 API 级别 11 开始引入的。如果您的目标是 Honeycomb（API 级别 11）以上，那么 Gautam K 的答案就足够了。否则，请参阅我的答案以获取建议的解决方案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-25T11:21:12.417

尝试查看[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html)及其超类 Value Animator

你可以做这样的事情 `ObjectAnimator anim = ObjectAnimator.ofFloat(this, "translationX", 0,200);` 然后 `anim.start();`

使用一个`boolean`值并`200,0`在对象动画器中切换它以向后滑动

PS：您可以使用`setDuration`方法来设置动画需要多长时间才能完成

# 编辑 ：

尝试查看提供向后兼容性的[支持库。](http://developer.android.com/tools/extras/support-library.html)

# 编辑

正如@AdilHussain 指出的那样，有一个名为[Nineoldandroids](http://nineoldandroids.com/)的库，它可以用于旧机器人上的相同目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:08:14.107

这个让我难倒了好几天（让它在冰淇淋三明治之前工作）但我想我终于到了那里！（感谢 Gautam K 和 Mike Israel 的领导）我最后所做的是扩展我的`View`(a `FrameLayout`) 以根据需要开始翻译右/左动画并听取动画的结束以重新定位我的`FrameLayout`右/left 视情况而定，如下：

```
public class SlidingFrameLayout extends FrameLayout
{
  private final int durationMilliseconds = 1000;
  private final int displacementPixels = 200;

  private boolean isInOriginalPosition = true;
  private boolean isSliding = false;

  public SlidingFrameLayout(Context context)
  {
    super(context);
  }

  public SlidingFrameLayout(Context context, AttributeSet attrs)
  {
    super(context, attrs);
  }

  public SlidingFrameLayout(Context context, AttributeSet attrs, int defStyle)
  {
    super(context, attrs, defStyle);
  }

  @Override
  protected void onAnimationEnd()
  {
    super.onAnimationEnd();

    if (isInOriginalPosition)
      offsetLeftAndRight(displacementPixels);
    else
      offsetLeftAndRight(-displacementPixels);

    isSliding = false;
    isInOriginalPosition = !isInOriginalPosition;
  }

  @Override
  protected void onLayout(boolean changed, int left, int top, int right, int bottom)
  {
    super.onLayout(changed, left, top, right, bottom);

    // need this since otherwise this View jumps back to its original position
    // ignoring its displacement
    // when (re-)doing layout, e.g. when a fragment transaction is committed
    if (changed && !isInOriginalPosition)
      offsetLeftAndRight(displacementPixels);
  }

  public void toggleSlide()
  {
    // check whether frame layout is already sliding
    if (isSliding)
      return; // ignore request to slide

    if (isInOriginalPosition)
      startAnimation(new SlideRightAnimation());
    else
      startAnimation(new SlideLeftAnimation());

    isSliding = true;
  }

  private class SlideRightAnimation extends TranslateAnimation
  {
    public SlideRightAnimation()
    {
      super(
          Animation.ABSOLUTE, 0,
          Animation.ABSOLUTE, displacementPixels,
          Animation.ABSOLUTE, 0,
          Animation.ABSOLUTE, 0);

      setDuration(durationMilliseconds);
      setFillAfter(false);
    }
  }

  private class SlideLeftAnimation extends TranslateAnimation
  {
    public SlideLeftAnimation()
    {
      super(
          Animation.ABSOLUTE, 0,
          Animation.ABSOLUTE, -displacementPixels,
          Animation.ABSOLUTE, 0,
          Animation.ABSOLUTE, 0);

      setDuration(durationMilliseconds);
      setFillAfter(false);
    }
  }
} 
```

最后，要`SlidingFrameLayout`向右/向左滑动，您所要做的就是调用该`SlidingFrameLayout.toggleSlide()`方法。当然，您可以`SlidingFrameLayout`根据自己的目的调整它以滑动更多像素，滑动更长的时间等，但这应该足以让您开始:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:28:01.723

[我有一个类似的问题，如果你现在调用 setFillAfter （ android bug](http://code.google.com/p/android/issues/detail?id=213&can=1&q=TranslateAnimation&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)），TranslateAnimation 实际上会移动视图。我不得不做类似的事情，所以我说，嘿，让我们使用一个动画监听器，然后将所有内容移动到正确的位置。不幸的是，动画侦听器也存在错误（[stackoverflow 解决方案](https://stackoverflow.com/questions/4750939/android-animation-is-not-finished-in-onanimationend)）。[所以我根据stackoverflow解决](https://stackoverflow.com/questions/4750939/android-animation-is-not-finished-in-onanimationend)方案中的解决方案创建了自己的布局类，我很高兴:)*

# javascript - 首选项未在首次运行时发出

> ID：11188342
> 
> 赞同：2
> 
> 时间：2012-06-25T11:18:42.040
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我已经使用 SDK 构建了一个 Firefox 插件。我正在使用 simple-prefs 模块来存储 2 个用户首选项。问题是第一次运行脚本时不会发出首选项。这是 main.js 代码：

```
var pageMod = require("page-mod");
var data = require("self").data;
var prefSet = require("simple-prefs");

pageMod.PageMod({

include: ["http://www.google.*","https://www.google.*"],
contentScriptWhen: 'end',
contentScriptFile: [data.url("jquery-1.7.1.min.js"),data.url("trackingdetector.js")],
onAttach: function(worker)
{
    // set preference variables
    var trackPref = prefSet.prefs.trackPref;
    var submitPref = prefSet.prefs.submitPref;

    worker.port.emit('get-prefs', [ trackPref, submitPref ]); // emit initial prefs

    function onPrefChange(prefName) {
        worker.port.emit('prefchange', [prefName, prefSet.prefs[prefName]]); // emit pref changes
    }
    prefSet.on("trackPref", onPrefChange);
    prefSet.on("submitPref", onPrefChange);
}
}); 
```

然后我在内容脚本中使用此代码来捕获首选项：

```
var trackPref;
var submitPref;

// get preference values here   
self.port.on("get-prefs", function(data) {
trackPref = data[0];
submitPref = data[1];
});

// get preference changes here
self.port.on("prefchange", function(data) {
    prefChange = data[0];
    prefValue = data[1];
    if (prefChange == "trackPref") {
        trackPref = data[1];
    }
    else if (prefChange == "submitPref") {
        submitPref = data[1];
    }
}); 
```

工作正常，期望在第一次运行时，`submitPref`和的值`trackPref`总是`undefined`。如何确保脚本获得初始值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:47:59.570

为什么首选项的值与`undefined`您分配任何内容之前的值不同？只需在您的开头初始化它们`main.js`：

```
// Initialize prefs if necessary
if (typeof prefSet.prefs.trackPref == "undefined")
  prefSet.prefs.trackPref = false;
if (typeof prefSet.prefs.submitPref == "undefined")
  prefSet.prefs.submitPref = false; 
```

# bash - QNX shell 循环序列

> ID：11188347
> 
> 赞同：0
> 
> 时间：2012-06-25T11:19:04.450
> 
> 标签：bash, shell, unix, sh, qnx

以下两个示例都适用于现代 Bash，但不适用于不同的 sh shell（如 QNX shell）。

```
$ for i in {1..3}; do echo $i; done
1
2
3

$ for i in $(seq 1 3); do echo $i; done
1
2
3 
```

有没有其他方法可以在 QNX shell 中产生相同的序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:27:54.603

我找到了一个在 QNX shell 中工作的方法：

```
integer i=0
while ((i<4)); do i=i+1; echo $i; done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:55:12.723

`expr`这是一个模拟黑客攻击的简单解决方法。

```
yes |
head -n 3 |
nl |
while read i yes; do
  ....
done 
```

如果你不关心你的价值，`i`你可以取出`nl`行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:20:57.860

使用`seq`或`jot`。您可能需要使用反引号而不是`$()`.

```
for i in `seq 1 3` 
```

如果您使用的 QNX 版本中的 shell 是 ksh，那么您应该能够使用 C 风格的`for`循环：

```
for ((i = 1; i <=3; i++ )) 
```

**编辑：**

我现在猜你有 QNX 4，它有一个 ksh86 克隆作为它的外壳。在我看来，在这种情况下，不包括`seq`or是脑死的`jot`。但是，除此之外，这里有一个*应该*能够执行序列的 hack：

```
end=3
for n in $(echo "for (i = 1; i <= $end; i++) i" | bc)
do
    echo "$n"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:38:26.430

任何 posix 兼容的 shell 都允许你迭代：

```
i=1
while expr $i \< 4 > /dev/null; do
  echo $i
  : $(( i + 1 ))
done 
```

如果您有较旧的 shell，您可能需要将循环内的最后一行替换为 `i=$( expr $i + 1 )`，并且在极少数情况下，您可能需要使用反引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-06T16:00:20.957

您可以从 NetBSD pkgsrc 存储库获取 QNX 的 bash：ftp: [//ftp.netbsd.org/pub/pkgsrc/packages/QNX/i386/6.5.0_head_20110826/shells/](ftp://ftp.netbsd.org/pub/pkgsrc/packages/QNX/i386/6.5.0_head_20110826/shells/)

# android - Android：Html Anchor Link 在 webview 中只能工作一次

> ID：11188348
> 
> 赞同：8
> 
> 时间：2012-06-25T11:19:05.803
> 
> 标签：android, html, android-webview

在使用锚链接加载 html 内容时，我在 webview 中遇到了一些奇怪的问题。
以下代码非常适合锚标记，但**只有一次**。
第二次按下锚标签时它**不起作用。**

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mywebview);

        String html = "<html><body><p><a href='#C4'>See also Chapter 4</a></p><p><h2>Chapter 1</h2><p>This chapter explains ba bla bla</p><h2>Chapter 2</h2><p>This chapter explains ba bla bla</p><h2>Chapter 3</h2><p>This chapter explains ba bla bla</p><h2><a name='C4'>Chapter 4</a></h2><p>This chapter explains ba bla bla</p><h2>Chapter 5</h2><p>This chapter explains ba bla bla</p><h2>Chapter 6</h2><p>This chapter explains ba bla bla</p><h2>Chapter 7</h2><p>This chapter explains ba bla bla</p><h2>Chapter 8</h2><p>This chapter explains ba bla bla</p><h2>Chapter 9</h2><p>This chapter explains ba bla bla</p></body></html>";
        String mime = "text/html";
        String encoding = "utf-8";

        WebView myWebView = (WebView)this.findViewById(R.id.webView1);
        myWebView.loadDataWithBaseURL(null, html, mime, encoding, null);

    } 
```

我已经尝试过[这个](https://stackoverflow.com/questions/3039555/android-webview-anchor-link-jump-link-not-working)链接，但对我不起作用。

**更新：**

**我的代码在各种设备中的测试结果。**

**工作**
1\. 三星 S Plus --> 2.3.4
2\. 三星 Galaxy Y --> 2.3.6
3\. 三星 Galaxy Tab --> 2.3.3
4\. 摩托罗拉 Xoom --> 3.2

**不工作**
1\. LG Optimus --> 2.2
2\. DELL XCD35(ZTE Blade) --> 2.2
3\. HTC WildFire --> 2.2.1

这是操作系统问题还是其他问题？任何解决方案？

* * *

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T10:27:27.300

问题是在锚链接单击后再次重新加载页面。

我使用了以下代码，

资产文件夹中的 chapters.xml

```
<html>
<body>
<p><a href="#C4">See also Chapter 4</a></p>
<p><h2><a name='C1'>Chapter 1<a></h2><p>This chapter explains ba bla bla</p>
<h2>Chapter 2</h2><p>This chapter explains ba bla bla</p>
<h2>Chapter 3</h2><p>This chapter explains ba bla bla</p>
<h2><a name='C4'>Chapter 4</a></h2><p>This chapter explains ba bla bla</p>
<h2>Chapter 5</h2><p>This chapter explains ba bla bla</p>
<h2>Chapter 6</h2><p>This chapter explains ba bla bla</p>
<h2>Chapter 7</h2><p>This chapter explains ba bla bla</p>
<a href="#C1">See also Chapter 1</a>
</body>
</html> 
```

**JAVA代码：第一种方式**

```
public class MainActivity extends Activity {
    WebView myWebView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        myWebView = new WebView(this);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.loadUrl("file:///android_asset/chapters.html");

        setContentView(myWebView);

        final GestureDetector gestureDetector = new GestureDetector(
                new MyGestureDetector());
        View.OnTouchListener gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        myWebView.setOnTouchListener(gestureListener);
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            myWebView.reload();
            Log.i("", "Reload");
            return super.onSingleTapConfirmed(e);

        }
    }
} 
```

**编辑 JAVA 代码：第二种方式**- 我已经尝试过这个东西，`onTouchListener`并且对我来说工作正常。

```
public class MainActivity extends Activity {
    WebView myWebView;
    public static boolean flag = false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        myWebView = new WebView(this);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.loadUrl("file:///android_asset/chapters.html");
        setContentView(myWebView);
        myWebView.setWebViewClient(new WebViewClient() {
            public void onPageFinished(WebView view, String url) {
                if (url.contains("#") && flag == false) {
                    myWebView.loadUrl(url);
                    flag = true;
                } else {
                    flag = false;
                }
            }

        });
    }
} 
```

**从一个文件打开另一个 HTML 文件的锚标记**

```
 myWebView = new WebView(this);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.loadUrl("file:///android_asset/1.htm");
        myWebView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                try{
                chapter = url.substring(url.indexOf("#"),url.length());
                url = url.substring(0,url.indexOf("#"));
                }catch (Exception e) {
                    chapter = "";
                }
                myWebView.loadUrl(url);
                return true;
            }
            public void onPageFinished(WebView view, String url) {
                if (!chapter.equalsIgnoreCase("") && flag == false) {
                    myWebView.loadUrl(url+chapter);
                    flag = true;
                } else {
                    flag = false;
                }
            }
        });
        setContentView(myWebView); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:20:38.363

请尝试使用此代码。它工作正常。

```
 String html = "<html><body><p><a href='#C4'>See also Chapter 4</a></p><p><h2>Chapter 1</h2><p>This chapter explains ba bla bla</p><h2>Chapter 2</h2><p>This chapter explains ba bla bla</p><h2>Chapter 3</h2><p>This chapter explains ba bla bla</p><h2><a name='C4'>Chapter 4</a></h2><p>This chapter explains ba bla bla</p><h2>Chapter 5</h2><p>This chapter explains ba bla bla</p><h2>Chapter 6</h2><p>This chapter explains ba bla bla</p><h2>Chapter 7</h2><p>This chapter explains ba bla bla</p><h2>Chapter 8</h2><p>This chapter explains ba bla bla</p><h2>Chapter 9</h2><p>This chapter explains ba bla bla</p></body></html>";
    String mime = "text/html";
    String encoding = "utf-8";

    final WebView myWebView = (WebView)this.findViewById(R.id.webView);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.loadDataWithBaseURL("app:html", html, mime, encoding, null);

    myWebView.setWebViewClient(new WebViewClient() 
    {  
       @Override  
       public void onPageFinished(WebView view, String url) 
       {
           super.onPageFinished(view, "app:html");
           view.loadDataWithBaseURL("app:html", html, mime, encoding, null);
       }  
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:03:19.370

此问题发生在 Android 4.0.3 和 4.0.4 设备上：如果您有一个内容填满整个屏幕宽度的移动网页（在资产中或从 Web 加载），则一些链接如下：

```
<a href=... HTML links 
```

...不管用！他们将无法加载下一页！这有点奇怪。

该错误记录在这里：[http ://code.google.com/p/android/issues/detail?id=929](http://code.google.com/p/android/issues/detail?id=929)

即使它是在 2009 年登录的，它仍然会在 Android 4.0.3/4.0.4 设备上发生。

解决方案是不使用：

`android:layout_height="wrap_content`在 Web 视图上。

将其替换为：

```
android:layout_height="match_parent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T03:02:54.123

试试这个简单的 2-liner javascript

```
<html>
<body>
<head>
<script language="javascript">
      function jump_top() {
          location.href = "#top";
          location.hash = "";
      }
</script>
</head>

<body>
<a name="top"></a>
<br /><br /><br /><br />
...
<br />Now you are at the bottom of the page
<br />
<a onclick="jump_top()">To Top</a>
</body>
</html> 
```

# mysql - 如何通过终端在ubuntu中运行mysql

> ID：11188351
> 
> 赞同：29
> 
> 时间：2012-06-25T11:19:15.997
> 
> 标签：mysql, ubuntu

尝试在 ubuntu 中运行 mysql`mysql`在终端中输入并出现错误

```
ERROR 1045(28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

有人能解决这个问题吗...

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-25T11:21:43.267

您必须提供有效的用户名。例如，要使用用户运行查询，`root`您必须键入以下命令，然后在出现提示时输入密码：

```
mysql -u root -p 
```

连接后，提示将类似于：

```
mysql> 
```

在选择数据库后，您可以在此处编写查询，例如：

```
mysql> USE your_database;
mysql> SELECT * FROM your_table; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T11:23:45.980

如果你想运行你的脚本，那么

```
mysql -u root -p < yourscript.sql 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:27:55.080

您需要使用正确的用户名和密码登录。用户root是否有访问数据库的权限？还是您创建了一个特定的用户来执行此操作？

另一个问题可能是您在尝试登录时没有使用密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T14:23:17.020

您似乎刚刚开始使用 mysql。

简单的答案：现在使用

> mysql -u root -p 密码

默认情况下，密码通常是 root。如果您在 mysql 中使用 create user 创建了其他用户，则可以使用其他用户名。有关详细信息，请使用“帮助，帮助管理帐户，帮助创建用户”等。如果您不希望密码显示在打开状态，只需在“-p”后按回车键，接下来会提示您输入密码。希望这可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-23T22:07:19.097

您实际上可以通过直接执行以下操作来访问 mysql 提示命令：

```
sudo mysql 
```

如果您想以“常规”方式访问它`sudo mysql -u <theuser>`，这个答案为我解决了 100% 的问题：

[https://askubuntu.com/a/784347](https://askubuntu.com/a/784347)

# objective-c - 分配对象的正确方法是什么？

> ID：11188352
> 
> 赞同：-5
> 
> 时间：2012-06-25T11:19:17.220
> 
> 标签：objective-c, memory-management

你如何分配一个对象？

答案

```
a. MyClass *obj = malloc(sizeof(MyClass));
b. MyClass *obj = [MyClass alloc];
c. MyClass *obj = alloc(MyClass);
d. MyClass *obj = [MyClass new];
e. None of the above. 
```

我在想b或者可能是d。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:37:54.970

**答案 E**

我几乎从不使用`[MyClass alloc]`or `[MyClass new]`，但经常使用`[[MyClass alloc] init]`。

**[查克](https://stackoverflow.com/users/50742/chuck)引用：**

> 最初在 Objective-C 中，对象是用 new 创建的。随着 OpenStep/Cocoa 框架的发展，设计者形成了这样一种观点，即为对象分配内存和初始化其属性是不同的关注点，因此应该是不同的方法（例如，一个对象可能被分配在特定的内存区域中）。所以创建对象的 alloc-init 风格开始流行起来。基本上，new 是旧的并且几乎不推荐使用——因此您会看到 Cocoa 类有很多 init 方法，但几乎没有任何自定义的新方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:41:41.753

```
a. MyClass *obj = malloc(sizeof(MyClass)); 
```

这是错误的。Objective-C 对象具有 malloc 无法创建的特定结构。这不会创建一个有效的 Objective-C 对象。

```
b. MyClass *obj = [MyClass alloc]; 
```

这是分配对象的正确方法。然而，所有的objective-c 对象都必须通过某种-init 消息才能使用。

```
c. MyClass *obj = alloc(MyClass); 
```

不。

```
d. MyClass *obj = [MyClass new]; 
```

这实际上与 [[MyClass alloc] init] 相同。然而，由于用户在分配新对象时无法选择使用哪个初始化器，因此大多数书籍都推荐使用 alloc/init 方法来创建新对象，而不是这个。

# android - 如何仅在我的部分布局上实现滚动视图

> ID：11188353
> 
> 赞同：2
> 
> 时间：2012-06-25T11:19:17.723
> 
> 标签：android, user-interface, scrollview

我想创建一个布局，顶部有 6 个 TextView，底部有 4 个按钮，然后让整个中心空间成为带有 22 个复选框（每行 1 个）的滚动视图。基本上我想要一个顶部的标题栏，底部的 2 个导航按钮，以及一个可以在中间滚动的列表。

我还希望复选框保持不可选中，我确定这是一个简单的函数调用。

该视图没有带有文本的上部标题，也没有带有按钮的下部栏。有谁知道该怎么做？滚动视图是唯一出现的东西....

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="SN : " />

            <TextView
                android:id="@+id/serialNumberView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Ver : " />

            <TextView
                android:id="@+id/versionView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Type : " />

            <TextView
                android:id="@+id/typeView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:orientation="vertical"
                android:layout_weight="1">

                    <CheckBox
                        android:id="@+id/floatCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Float" />

                    <CheckBox
                        android:id="@+id/tripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Trip" />

                    <CheckBox
                        android:id="@+id/closeCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Close" />

                    <CheckBox
                        android:id="@+id/blockedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Blocked" />

                    <CheckBox
                        android:id="@+id/hardTripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Hard Trip" />

                    <CheckBox 
                        android:id="@+id/phaseAngleCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase angle wrong for closing" />

                    <CheckBox
                        android:id="@+id/diffVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Differential volts too low" />

                    <CheckBox
                        android:id="@+id/networkVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Netwrok volts too low to close" />

                    <CheckBox
                        android:id="@+id/usingDefaultsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Using Defaults( Reprogram )" />

                    <CheckBox
                        android:id="@+id/relaxedCloseActiveCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Relaxed Close Active" />

                    <CheckBox
                        android:id="@+id/commBoardDetectedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Comm Board Detected" />

                    <CheckBox 
                        android:id="@+id/antiPumpBlock"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Anti-Pump Block" />

                    <CheckBox
                        android:id="@+id/motorCutoffCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Motor Cutoff Inhibit" />

                    <CheckBox
                        android:id="@+id/phaseRotationCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase Rotation Wrong" />

                    <CheckBox
                        android:id="@+id/usingDefaultDNPCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text= "Using Default DNP Profile" />
            </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Back" />

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Read" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:28:28.883

这是根据您的要求的伪布局设计：

```
<LinearLayout
   ----
   android:weightSum="1.0" >

--- Your top elements ---

<ScrollView >
<LinearLayout
   ----
   android:layout_weight="1.0" >

--- Your scrollable items ----

</LinearLayout>
</ScrollView>

--- Your bottom elements ---

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:24:12.627

尝试做这样的事情：

```
LinearLayout
    LinearLayout
        Header-Elements
    /LinearLayout

    ScrollView
        LinearLayout
            Main-Elements
        /LinearLayout
    /ScrollView

    LinearLayout
        Bottom-Elements
    /LinearLayout
/LinearLayout 
```

如果您希望元素出现在彼此下方，请记住在 LinearLayout 上使用 android:orientation="vertical"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:32:33.840

您可以为此使用 RelativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/White" >

    <RelativeLayout 
        android:id="@+id/topLayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true" >
        // place your all the textViews here (all the top ones.)
    </RelativeLayout>

    <ScrollView
        android:layout_below="@id/topLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        // place your all scrollable views here.
    </ScrollView>

    <RelativeLayout 
        android:id="@+id/bottomLayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true" >
        // place your all the buttons here (the bottom part.)
    </RelativeLayout>
</RelativeLayout> 
```

编辑：

由于*相对*`RelativeLayout`放置视图，使用视图可以放置在屏幕的底部。*`android:layout_alignParentBottom="true"`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T15:46:04.027

如果布局视图的某些元素未显示，您始终可以使用该元素来包装现有内容。

```
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tabScrollView"
    android:fillViewport="true"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-30T23:17:10.357

在您的情况下，您有一个线性根视图，其中包含其他三个独立的子视图。将 scrollView 的高度设置为 fill_parent 使其占用父视图的大小，从而防止显示具有 wrap_content 高度的其他子视图。*

# ios - 在 UITextView 上获取特定行的文本

> ID：11188363
> 
> 赞同：0
> 
> 时间：2012-06-25T11:19:59.483
> 
> 标签：ios, text, uitextview, line

最终，我想知道 UITextView 中最后一个字符的位置。我能够通过使用以下方法找出 y 位置：

> CGSize 大小 = [textView.text sizeWithFont:textView.font constrainedToSize:CGSizeMake(textView.frame.size.width-16, 10000) lineBreakMode:UILineBreakModeClip];

但是，为了获得 x 位置，我需要从 textview 的最后一行获取文本。我尝试从 textView.text 一次删除一个字符，直到 size.height 更改以实现该效果，但我意识到这并不总是等于考虑换行符时我想要的。

有什么建议吗？我花了一整天的时间试图弄清楚这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:45:14.150

我想我找到了一个解决方案，方法是使用 caretRectForPosition 来获取文本视图中光标的像素位置。

```
// move cursor to the end of the text
textView.selectedRange = NSMakeRange([textView.text length], 0);
CGPoint cursorPosition = [textView caretRectForPosition:textView.selectedTextRange.start].origin; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:53:03.130

您可以像这样评估 uitextview 或 uitextfield 中的文本大小

```
 `UIFont * myFont = [UIFont fontWithName:@"Gill Sans" size:19];
    CGSize textSize = [@"your text" sizeWithFont: myFont constrainedToSize:CGSizeMake(textFiled.frame.size.width, textFiled.frame.size.height) lineBreakMode:UILineBreakModeWordWrap];
    NSlog(@"this is your text size W=%f H=%f",textSize.width, textSize.height);` 
```

# python - 删除零行二维 numpy 数组

> ID：11188364
> 
> 赞同：41
> 
> 时间：2012-06-25T11:20:03.100
> 
> 标签：python, multidimensional-array, numpy

我运行一个返回列表`qr factorization`，即和：`numpy``ndarrays``Q``R`

```
>>> [q,r] = np.linalg.qr(np.array([1,0,0,0,1,1,1,1,1]).reshape(3,3)) 
```

`R`是一个二维数组，底部有零线（甚至证明了我的测试集中的所有示例）：

```
>>> print r
[[ 1.41421356  0.70710678  0.70710678]
 [ 0\.          1.22474487  1.22474487]
 [ 0\.          0\.          0\.        ]] 
```

. 现在，我想分成`R`两个矩阵`R_~`：

```
[[ 1.41421356  0.70710678  0.70710678]
 [ 0\.          1.22474487  1.22474487]] 
```

和`R_0`：

```
[[ 0\.          0\.          0\.        ]] 
```

（提取所有零线）。它似乎接近这个解决方案：[删除 numpy array 中的行](https://stackoverflow.com/questions/3877491/deleting-rows-in-numpy-array)。

编辑：
更有趣的是：`np.linalg.qr()`返回一个`n x n`-matrix。不是，我所期望的：

```
A := n x m
Q := n x m
R := n x m 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-25T11:59:49.787

`np.all`与参数一起使用`axis`：

```
>>> r[np.all(r == 0, axis=1)]
array([[ 0.,  0.,  0.]])
>>> r[~np.all(r == 0, axis=1)]
array([[-1.41421356, -0.70710678, -0.70710678],
       [ 0\.        , -1.22474487, -1.22474487]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T12:02:54.250

因为数据不完全等于零，我们需要为零设置一个阈值，例如 1e-6，使用带有 axis=1 的 numpy.all 来检查行是否为零。使用 numpy.where 和 numpy.diff 获取拆分位置，并调用 numpy.split 将数组拆分为数组列表。

```
import numpy as np
[q,r] = np.linalg.qr(np.array([1,0,0,0,1,1,1,1,1]).reshape(3,3))
mask = np.all(np.abs(r) < 1e-6, axis=1)
pos = np.where(np.diff(mask))[0] + 1
result = np.split(r, pos) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-19T19:44:37.533

由于这是第一个**修剪**2D 零线数组的谷歌结果之一，我想添加我的实现以仅删除二维中的前导零和尾随零：

```
p = np.where(t != 0)
t = t[min(p[0]) : max(p[0]) + 1, min(p[1]) : max(p[1]) + 1] 
```

这假设您的数组被调用`t`并且 numpy 被导入为`np`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-01T13:54:10.323

如果您想消除条目可忽略不计的行，我会使用`np.allclose`.

```
zero_row_indices = [i for i in r.shape[0] if np.allclose(r[i,:],0)]
nonzero_row_indices =[i for i in r.shape[0] if not np.allclose(r[i,:],0)]
r_new = r[nonzero_row_indices,:] 
```

# asp.net - 从 Asp.net 页面调用 SSRS 报告

> ID：11188367
> 
> 赞同：0
> 
> 时间：2012-06-25T11:20:09.080
> 
> 标签：asp.net, sql, c#-3.0

```
 ReportViewer1.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote;
        ReportViewer1.ServerReport.ReportServerUrl = new Uri(Keys.ReportServerUrl);
        ReportViewer1.ServerReport.ReportPath = Keys.ReportPath + "RptTest";

        ReportViewer1.ShowParameterPrompts = false;
        ReportViewer1.ShowCredentialPrompts = false;
        IReportServerCredentials irsc = new CustomReportCredentials();
        ReportViewer1.ServerReport.ReportServerCredentials = irsc;
        ReportViewer1.ServerReport.Refresh(); 
```

...................................... CustomReportCredentials 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Security.Principal;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Utilities;

/// <summary>
/// Summary description for CustomReportCredentials
/// </summary>
/// [Serializable]
public class CustomReportCredentials : Microsoft.Reporting.WebForms.IReportServerCredentials
{

    private string _UserName;
    private string _PassWord;
    private string _DomainName;

    #region IReportServerCredentials Members
    public CustomReportCredentials()
    {
        _UserName = "";
        _PassWord = "";
        _DomainName = "";
    }

    public bool GetFormsCredentials(out System.Net.Cookie authCookie, out string userName, out string password, out string authority)
    {
      authCookie = null;
      userName = null;
      password = null;
      authority = null;

      return false;
    }

    public WindowsIdentity ImpersonationUser
    {
            get
            {

                System.Security.Principal.WindowsImpersonationContext impersonationContext = null;
                System.Security.Principal.WindowsIdentity currentWindowsIdentity = null;
                            currentWindowsIdentity = (System.Security.Principal.WindowsIdentity)System.Web.HttpContext.Current.User.Identity;
                impersonationContext = currentWindowsIdentity.Impersonate();

                //Insert your code that runs under the security context of the authenticating user here.

                impersonationContext.Undo();

                return currentWindowsIdentity; // not use ImpersonationUser
                }
    }

    public System.Net.ICredentials NetworkCredentials
    {
      get
      {
        string userName = "";
        string domainName = "";
        string password = "";

        return new System.Net.NetworkCredential(userName, password, domainName);
      }
    }

    #endregion

} 
```

# ios - 为 iPad 分辨率定制 Tapku 日历

> ID：11188383
> 
> 赞同：0
> 
> 时间：2012-06-25T11:21:06.957
> 
> 标签：ios, ipad, tapku

我想定制 Tapku Calander 使其适合整个 iPad 屏幕。

任何人都可以指导我完成我需要更改坐标以使其适合屏幕的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:46:19.633

```
if (appDelegate.isIpad)
{
    calendar.transform = CGAffineTransformMakeScale(2.0, 2.0);
}
else
{
    calendar.transform = CGAffineTransformMakeScale(1.0, 1.0);
}

// Ensure this is the last "addSubview" because the calendar must be the top most view layer    
[self.view addSubview:calendar]; 
```

之前使用 CGAffineTransformMakeScale `addSubview:`，你会得到 iPad 的分辨率。

# python - 无法使用 GAE 批量加载程序

> ID：11188384
> 
> 赞同：0
> 
> 时间：2012-06-25T11:21:11.133
> 
> 标签：python, google-app-engine

我正在尝试使用bulkloader，但收到此错误。
删除 --application 参数没有帮助。
我正在使用python2.7。

使用的命令是这样的：

```
kc@Jaguareins:~/lafolle$ ../google_appengine/appcfg.py  create_bulkloader_config --filename=bulkloader.yaml . --application=mercipristo 
```

我得到的错误是：

```
[ERROR   ] [WorkerThread-0] WorkerThread:
Traceback (most recent call last):
  File "/home/kc/google_appengine/google/appengine/tools/adaptive_thread_pool.py", line 176, in WorkOnItems
    status, instruction = item.PerformWork(self.__thread_pool)
  File "/home/kc/google_appengine/google/appengine/tools/bulkloader.py", line 764, in PerformWork
    transfer_time = self._TransferItem(thread_pool)
  File "/home/kc/google_appengine/google/appengine/tools/bulkloader.py", line 1170, in _TransferItem
    self, retry_parallel=self.first)
  File "/home/kc/google_appengine/google/appengine/tools/bulkloader.py", line 1471, in GetEntities
    results = self._QueryForPbs(query)
  File "/home/kc/google_appengine/google/appengine/tools/bulkloader.py", line 1442, in _QueryForPbs
    raise datastore._ToDatastoreError(e)
BadRequestError: app s~mercipristo cannot access app mercipristo's data 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:38:09.910

这有效：

```
appcfg.py create_bulkloader_config --filename=bulkloader.yaml --url=http://mercipristo.appspot.com/_ah/remote_api --application=s~mercipristo 
```

如此处建议：

[https://groups.google.com/group/google-appengine/msg/092f97bd2ec83bbd](https://groups.google.com/group/google-appengine/msg/092f97bd2ec83bbd)

# java - Color.black 和 Color.BLACK 有什么区别？

> ID：11188386
> 
> 赞同：5
> 
> 时间：2012-06-25T11:21:20.310
> 
> 标签：java, colors, field

> **可能重复：**
> [Color.red 和 Color.RED 之间的区别](https://stackoverflow.com/questions/7281180/difference-between-color-red-and-color-red)

我已经看到 Java 类`java.awt.Color`包含几个具有相同名称的字段，一次是大写字母，一次不是。例如：`Color.black`和`Color.BLACK`。有区别吗？

**编辑：**

……如果不是，为什么会有两个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T11:23:00.450

只需看一下[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#black)：

```
public static final Color black 
```

> 颜色黑色。在默认的 sRGB 空间中。

* * *

```
public static final Color BLACK 
```

> 颜色黑色。在默认的 sRGB 空间中。**自：1.4**

不，没有区别。

它们都存在是因为`black`已经在[`Color`](http://docs.oracle.com/javase/1.3/docs/api/java/awt/Color.html)类中引入，然后他们意识到它没有遵循命名约定，所以他们添加了大写版本（你可以看到**从 1.4 开始**编写）。他们没有删除旧的以不破坏任何 < 1.4 的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T11:24:19.897

`Color.BLACK`遵循静态最终字段的命名约定没有区别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T11:24:05.347

从我在源代码中看到的没有区别

```
public final static Color black     = new Color(0, 0, 0);
public final static Color BLACK = black; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:26:28.973

但是没有区别，因为 Java 编译器不强制使用大写字母，但违反它们被认为是不好的风格。所以 color.BLACK 应该首选增加可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:23:29.717

从`Color`类的字段的描述来看，完全没有区别。

1)颜色.[黑色](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#black)

2)颜色.[黑色](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#BLACK)

# events - YUI：将 pjax 事件添加到 pjax 调用

> ID：11188387
> 
> 赞同：1
> 
> 时间：2012-06-25T11:21:30.277
> 
> 标签：events, yui

我在我的项目中使用 YUI，并使用它的[pjax](http://yuilibrary.com/yui/docs/pjax/)实用程序，我需要在我的 Pjax 调用中添加一些[Pjax 事件。](http://yuilibrary.com/yui/docs/pjax/#pjax-events)我这样做是这样的：

```
YUI().use('pjax', function (Y) {
        new Y.Pjax({container: '#main_content',
                navigate: function(){
                    alert(1);
                },
                load: function(){
                    alert(2);
                },
                error: function(){
                    alert(3);
                }

        });
    }); 
```

但是这些调用不适用于导航、加载或错误事件，我做错了什么吗？任何帮助将不胜感激......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:00:00.570

尝试：

```
var PjaxLoader = new Y.Pjax({container: '#main_content'});  
PjaxLoader.on('load', function(e) {
    Y.log(e.content.node);
}); 
```

# android - 显示音素而不是文本 [pocketsphinx]

> ID：11188396
> 
> 赞同：1
> 
> 时间：2012-06-25T11:21:55.550
> 
> 标签：android, speech-recognition, speech-to-text, sphinx4

我已经在我的 Android 设备上成功编译了 PocketSphinx 的 HelloWorld 教程。
[链接：http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/]

现在，我需要一些帮助来调整 HelloWorld 教程的代码，以便在屏幕上只显示口语单词的音素而不是文本。

# android - 如何更改 Android 中的微调器背景？

> ID：11188398
> 
> 赞同：82
> 
> 时间：2012-06-25T11:21:59.817
> 
> 标签：android, android-spinner, nine-patch

我正在开发一个应用程序，我需要在其中更改微调器背景布局以匹配背景颜色。我研究并发现我需要创建一个 9 补丁图像。我已经创建了 9 个补丁图像并在应用程序中使用，但它看起来比普通微调器大，而且我也看不到微调器中的下拉按钮。

如果你们为我提供了一个清晰的教程，从开始为 Spinner 创建 9 补丁图像并在应用程序中使用它，我感到非常高兴。

![微调器看起来像](../Images/0e19fcb31347d7c5be08a0d908086658.png)

**微调器的代码**

```
 <Spinner
        android:id="@+id/spnIncredientone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtMixtureTitle" 
        android:layout_marginLeft="5dip"
        android:layout_marginRight="5dip"
        android:background="@drawable/spinner_background"
        android:prompt="@string/selectmixture" /> 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-25T11:15:30.683

您可以像这样在 xml 中设置微调器的背景颜色：

```
android:background="YOUR_HEX_COLOR_CODE" 
```

如果您将下拉菜单与微调器一起使用，则可以像这样设置其背景颜色：

```
android:popupBackground="YOUR_HEX_COLOR_CODE" 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-01-07T05:20:32.423

您可以像这样更改背景颜色和下拉图标

Step1：在drawable文件夹中为spinner的边框制作background.xml。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="@android:color/transparent" />
<corners android:radius="5dp" />
<stroke
    android:width="1dp"
    android:color="@color/darkGray" />
</shape>  //edited 
```

Step2：对于微调器的布局设计，请使用此下拉图标或任何图像 drop.pnj[![像这样使用这张图片](../Images/502e5e730bfbfdb1ee884646658d2cc9.png)](https://i.stack.imgur.com/wwpzT.png)

```
 <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="3dp"
                    android:layout_weight=".28"
                    android:background="@drawable/spinner_border"
                    android:orientation="horizontal">

                    <Spinner
                        android:id="@+id/spinner2"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:layout_gravity="center"
                        android:background="@android:color/transparent"
                        android:gravity="center"
                        android:layout_marginLeft="5dp"
                        android:spinnerMode="dropdown" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_centerVertical="true"
                        android:layout_gravity="center"
                        android:src="@mipmap/drop" />

                </RelativeLayout> 
```

最后看起来像下图，它在圆形区域的每个地方都是可点击的，不需要为 imageView 编写 click Lister。

有关更多详细信息，您可以看到[这里](https://stackoverflow.com/a/37859442/4997704)

[![在此处输入图像描述](../Images/a7cb52f84264eea55dc3aa9273f3ac1e.png)](https://i.stack.imgur.com/bz5Hr.png)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-07T16:19:47.480

尽管这是一篇较旧的帖子，但当我在寻找同样的问题时遇到它，所以我想我也会加两分钱。这是我的 Spinner 背景版本，带有下拉箭头。只是完整的背景，不仅仅是箭头。

看起来是这样的。。 [![使用 spinner_bg.xml 的 Spinner 屏幕截图](../Images/1fcc04388db210da11313925d5327026.png)](https://i.stack.imgur.com/uxteL.jpg)

适用于微调器，如...

```
<Spinner
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:background="@drawable/spinner_bg" /> 
```

spinner_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <color android:color="@color/InputBg" />
    </item>
    <item android:gravity="center_vertical|right" android:right="8dp">
        <layer-list>
            <item android:width="12dp" android:height="12dp" android:gravity="center" android:bottom="10dp">
                <rotate
                    android:fromDegrees="45"
                    android:toDegrees="45">
                    <shape android:shape="rectangle">
                        <solid android:color="#666666" />
                        <stroke android:color="#aaaaaa" android:width="1dp"/>
                    </shape>
                </rotate>
            </item>
            <item android:width="30dp" android:height="10dp" android:bottom="21dp" android:gravity="center">
                <shape android:shape="rectangle">
                    <solid android:color="@color/InputBg"/>
                </shape>
            </item>
        </layer-list>
    </item>
</layer-list> 
```

`@color/InputBg`应替换为您想要作为背景的颜色。

首先，它用所需的颜色填充背景。然后一个子层列表创建一个正方形并将其旋转 45 度，然后第二个带有背景颜色的 Rectangle 覆盖旋转正方形的顶部，使其看起来像一个向下箭头。（在旋转的矩形中有一个额外的笔划，并不是真正需要的）

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-07-27T06:58:10.080

[![示例图像](../Images/aa858a5721d7fb5239a166bca45723ab.png)](https://i.stack.imgur.com/SYdN7.png)

> 当您使用`android:background="@color/your_color"` 微调器设置微调器背景颜色时，默认箭头将消失

并且还需要为微调器添加固定的宽度和高度，以便您可以显示微调器的全部内容。

所以我找到了一种方法，就像上图一样。

> 在框架布局中编写微调器代码，在这里您不需要使用单独的图像视图来显示下拉图标。

```
 <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Floor"
            android:textColor="@color/white"/>

        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/margin_short"
            android:background="@drawable/custom_spn_background">

            <Spinner
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:dropDownSelector="@color/colorAccent"
                android:dropDownWidth="@dimen/dp_70"
                android:spinnerMode="dropdown"
                android:tooltipText="Select floor" />
        </FrameLayout> 
```

> 为 Frame 布局背景创建新的 xml 或设置 `android:background="@color/your_color"`

custom_spn_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<corners android:radius="@dimen/dp_5" />
<solid android:color="@color/white" /> 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-09-23T15:22:33.953

[![在此处输入图像描述](../Images/083b5318adffa6a00c4c6001c1b7e557.png)](https://i.stack.imgur.com/0n1GD.png)

> 微调器代码

```
<Spinner
    android:id="@+id/spinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/text.white"
    android:paddingBottom="13dp"
    android:background="@drawable/bg_spinner"/> 
```

> bg_spinner.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/colorPrimaryDark"/>
            <corners android:radius="10dp" />
        </shape>
    </item>
    <item android:gravity="center_vertical|right" android:right="8dp">
        <layer-list>
            <item android:width="12dp" android:height="12dp"  android:gravity="center" android:bottom="10dp">
                <rotate
                    android:fromDegrees="45"
                    android:toDegrees="45">
                    <shape android:shape="rectangle">
                        <solid android:color="#ffffff" />
                        <stroke android:color="#ffffff" android:width="1dp"/>
                    </shape>
                </rotate>
            </item>
            <item android:width="20dp" android:height="10dp" android:bottom="21dp" android:gravity="center">
                <shape android:shape="rectangle">
                    <solid android:color="@color/colorPrimaryDark"/>
                </shape>
            </item>
        </layer-list>
    </item>
</layer-list> 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-05-26T17:05:02.820

您需要为您的微调器项目创建一个新的个性化布局，如下所示，我将其命名为：

spinner_item.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="20sp"
    android:textColor="#ff0000" /> 
```

然后在您的微调器声明中，您需要让微调器使用适配器中的新布局：

```
ArrayAdapter adapter = ArrayAdapter.createFromResource(this,
R.layout.spinner_item, YOUR_SPINNER_CONTENT);
spinner.setAdapter(adapter); 
```

要个性化下拉列表中的元素，您需要创建另一个布局，我将其命名为 spinner_dropdown_item.xml：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
android:layout_width="match_parent"
android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:textColor="#aa66cc"/> 
```

然后在适配器上：

```
ArrayAdapter adapter = ArrayAdapter.createFromResource(this,
R.layout.spinner_item, YOUR_SPINNER_CONTENT);
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-08-27T09:37:07.603

正如[Jakob 指出的那样](https://stackoverflow.com/a/13550512/56285)，`android:popupBackground`是下拉菜单的关键属性（微调器的打开状态），但不是仅使用颜色，而是使用 9-patch 可绘制对象获得了最佳结果，如下所示：

![在此处输入图像描述](../Images/6b32d13efdd8ddbc0227c8f1c4879e1b.png)
`menu_dropdown_panel.9.png`

请注意，为您选择的背景颜色生成这个 9-patch 图像非常容易，例如使用我[在这个答案中解释的](https://stackoverflow.com/a/20077381/56285)[这个在线工具](http://jgilfelt.github.io/android-actionbarstylegenerator/)！

因此，我的 Spinner XML 定义如下所示：

```
<Spinner
    android:id="@+id/spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/navigationBlue"
    android:spinnerMode="dropdown"
    android:popupBackground="@drawable/menu_dropdown_panel"
    /> 
```

结果：

![](../Images/bb813270cd8342ae0d2e1fccbc702d5b.png)

（对于自定义字体，如上图所示，[还需要自定义 SpinnerAdapter](https://stackoverflow.com/a/25510848/56285)。）

至少适用于 Android 4.0+（API 级别 14+）。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-08-07T18:56:17.783

微调器代码：

```
<TextView
    android:id="@+id/spinner"
    android:gravity="bottom"
    android:layout_marginTop="16dp"
    android:background="@drawable/spinner_selector"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:paddingLeft="16dp"
    android:textSize="16sp"
    android:text="TextView" /> 
```

spinner_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/spinner_enable" android:state_enabled="true" android:state_pressed="false"  /> <!-- enable -->
    <item android:drawable="@drawable/spinner_clicked" android:state_pressed="true"  android:state_enabled="true"  />
    <item android:drawable="@drawable/spinner_disable" android:state_enabled="false" /> <!-- disable -->
</selector> 
```

spinner_disable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#ddf" />
            <padding android:bottom="1dp" />
        </shape>
    </item>
    <item android:bottom="1dp">
        <shape android:shape="rectangle" >
            <solid android:color="#fff" />

            <padding
                android:left="0dp"
                android:right="0dp" />
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#fff" />
        </shape>
    </item>
    <item
        android:gravity="center_vertical|right"
        android:right="8dp">
        <layer-list>
            <item
                android:width="12dp"
                android:height="12dp"
                android:bottom="10dp"
                android:gravity="center">
                <rotate
                    android:fromDegrees="45"
                    android:toDegrees="45">
                    <shape android:shape="rectangle">
                        <solid android:color="#ddf" />
                        <stroke
                            android:width="1dp"
                            android:color="#aaaaaa" />
                    </shape>
                </rotate>
            </item>
            <item
                android:width="30dp"
                android:height="10dp"
                android:bottom="21dp"
                android:gravity="center">
                <shape android:shape="rectangle">
                    <solid android:color="@android:color/white" />
                </shape>
            </item>
        </layer-list>
    </item>
</layer-list> 
```

spinner_clicked.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#00f" />
            <padding android:bottom="1dp" />
        </shape>
    </item>
    <item android:bottom="1dp">
        <shape android:shape="rectangle" >
            <solid android:color="#fff" />

            <padding
                android:left="0dp"
                android:right="0dp" />
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#fff" />
        </shape>
    </item>
    <item
        android:gravity="center_vertical|right"
        android:right="8dp">
        <layer-list>
            <item
                android:width="12dp"
                android:height="12dp"
                android:bottom="10dp"
                android:gravity="center">
                <rotate
                    android:fromDegrees="45"
                    android:toDegrees="45">
                    <shape android:shape="rectangle">
                        <solid android:color="#00f" />
                        <stroke
                            android:width="1dp"
                            android:color="#aaaaaa" />
                    </shape>
                </rotate>
            </item>
            <item
                android:width="30dp"
                android:height="10dp"
                android:bottom="21dp"
                android:gravity="center">
                <shape android:shape="rectangle">
                    <solid android:color="@android:color/white" />
                </shape>
            </item>
        </layer-list>
    </item>
</layer-list> 
```

spinner_enable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#00f" />
        <padding android:bottom="1dp" />
    </shape>
</item>
<item android:bottom="1dp">
    <shape android:shape="rectangle" >
        <solid android:color="#BBDEFB" />

        <padding
            android:left="0dp"
            android:right="0dp" />
    </shape>
</item>
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#BBDEFB" />
    </shape>
</item>
<item
    android:gravity="center_vertical|right"
    android:right="8dp">
    <layer-list>
        <item
            android:width="12dp"
            android:height="12dp"
            android:bottom="10dp"
            android:gravity="center">
            <rotate
                android:fromDegrees="45"
                android:toDegrees="45">
                <shape android:shape="rectangle">
                    <solid android:color="#00f" />
                    <stroke
                        android:width="1dp"
                        android:color="#aaaaaa" />
                </shape>
            </rotate>
        </item>
        <item
            android:width="30dp"
            android:height="10dp"
            android:bottom="21dp"
            android:gravity="center">
            <shape android:shape="rectangle">
                <solid android:color="#BBDEFB" />
            </shape>
        </item>
    </layer-list>
</item>
</layer-list> 
```

如果没有九个补丁图片，它就可以正常工作。api 21+ [![在此处输入图像描述](../Images/6ad86e92d0e69825df1e857753b1afb3.png)](https://i.stack.imgur.com/5nPNG.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-09-03T19:22:32.040

spinner_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/spinner_enabled" android:state_enabled="true" android:state_pressed="false" /> <!-- enable -->
    <item android:drawable="@drawable/spinner_clicked" android:state_enabled="true" android:state_pressed="true" />
    <item android:drawable="@drawable/spinner_disabled" android:state_enabled="false" /> <!-- disable -->
</selector> 
```

spinner_enabled.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#00f" />
        <padding android:bottom="2dp" />
    </shape>
</item>

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#fff" />
    </shape>
</item>

<item>
    <rotate
        android:fromDegrees="90"
        android:pivotX="100%"
        android:pivotY="60%"
        android:toDegrees="135">
        <rotate
            android:fromDegrees="135"
            android:pivotX="100%"
            android:pivotY="60%"
            android:toDegrees="45">
            <shape android:shape="rectangle">
                <stroke
                    android:width="10dp"
                    android:color="#00f" />
                <solid android:color="#00f" />
            </shape>
        </rotate>
    </rotate>
</item>
</layer-list> 
```

spinner_disabled.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#ddf" />
        <padding android:bottom="2dp" />
    </shape>
</item>

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#fff" />
    </shape>
</item>

<item>
    <rotate
        android:fromDegrees="90"
        android:pivotX="100%"
        android:pivotY="60%"
        android:toDegrees="135">
        <rotate
            android:fromDegrees="135"
            android:pivotX="100%"
            android:pivotY="60%"
            android:toDegrees="45">
            <shape android:shape="rectangle">
                <stroke
                    android:width="10dp"
                    android:color="#ddf" />
                <solid android:color="#ddf" />
            </shape>
        </rotate>
    </rotate>
</item>
</layer-list> 
```

spinner_focused.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#00f" />
        <padding android:bottom="2dp" />
    </shape>
</item>

<item>
    <shape android:shape="rectangle" >
        <solid android:color="#BBDEFB" />
    </shape>
</item>

<item>
    <rotate
        android:fromDegrees="90"
        android:pivotX="100%"
        android:pivotY="60%"
        android:toDegrees="135">
        <rotate
            android:fromDegrees="135"
            android:pivotX="100%"
            android:pivotY="60%"
            android:toDegrees="45">
            <shape android:shape="rectangle">
                <stroke
                    android:width="10dp"
                    android:color="#00f" />
                <solid android:color="#00f" />
            </shape>
        </rotate>
    </rotate>
</item>
</layer-list> 
```

如果没有九个补丁图片，它就可以正常工作。api 10+ [![在此处输入图像描述](../Images/fb70dde1834faf03e3ef3af8a4c00451.png)](https://i.stack.imgur.com/ZCJng.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-22T08:48:36.033

我尝试了上述示例，但不适用于我。最简单的解决方案对我来说很棒：

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#fff" >
        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/Area"/>
    </RelativeLayout> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-03-01T12:53:16.793

在其他答案中已经说过。我这样做就像将 Spinner 放在 CardView 中并更改了 cardBackgroundColor 。您也可以使用其他一些视图并将其背景设置为 drawable 或 color 。因此它不会影响 Spinner 下拉箭头。如果我们将背景设置为 Spinner，则微调器下拉箭头会消失。

```
 <androidx.cardview.widget.CardView
        android:id="@+id/cardView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:cardCornerRadius="6dp"
        app:cardBackgroundColor="@color/white">

        <Spinner
            android:id="@+id/spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp"/>

    </androidx.cardview.widget.CardView> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-10T08:15:08.177

它需要在微调器中使用透明背景。

spinner_enable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
        <shape android:shape="rectangle">
            <solid android:color="#00000000" />
            <padding android:bottom="2dp" />
        </shape>
    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="#00000000" />
        </shape>
    </item>

    <item
        android:bottom="-2dp"
        android:left="-3dp"
        android:right="-3dp"
        android:top="-3dp">
        <shape>
            <solid android:color="#00000000" />
            <stroke

                android:width="2dp"
                android:color="#00aedb" />
        </shape>
    </item>

    <item>
        <rotate
            android:fromDegrees="90"
            android:pivotX="100%"
            android:pivotY="60%"
            android:toDegrees="135">
            <rotate
                android:fromDegrees="135"
                android:pivotX="100%"
                android:pivotY="60%"
                android:toDegrees="45">
                <shape android:shape="rectangle">
                    <stroke
                        android:width="10dp"
                        android:color="#00aedb" />
                    <solid android:color="#00aedb" />
                </shape>
            </rotate>
        </rotate>
    </item>
</layer-list> 
```

spinner_disable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item>
    <shape android:shape="rectangle">
        <solid android:color="#00000000" />
        <padding android:bottom="2dp" />
    </shape>
</item>

<item>
    <shape android:shape="rectangle">
        <solid android:color="#00000000" />
    </shape>
</item>

<item
    android:bottom="-2dp"
    android:left="-3dp"
    android:right="-3dp"
    android:top="-3dp">
    <shape>
        <solid android:color="#00000000" />
        <stroke

            android:width="2dp"
            android:color="#d9dadc" />
    </shape>
</item>

<item>
    <rotate
        android:fromDegrees="90"
        android:pivotX="100%"
        android:pivotY="60%"
        android:toDegrees="135">
        <rotate
            android:fromDegrees="135"
            android:pivotX="100%"
            android:pivotY="60%"
            android:toDegrees="45">
            <shape android:shape="rectangle">
                <stroke
                    android:width="10dp"
                    android:color="#d9dadc" />
                <solid android:color="#d9dadc" />
            </shape>
        </rotate>
    </rotate>
</item>
</layer-list> 
```

spinner_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/spinner_enable" android:state_enabled="true" android:state_pressed="false"  /> <!-- enable -->
    <item android:drawable="@drawable/spinner_disable" android:state_enabled="false" /> <!-- disable -->
</selector> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-01-24T05:24:20.470

```
<FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    <Spinner
        android:layout_marginTop="8dp"
        android:background="@drawable/edit_border"
        android:visibility="visible"
        android:id="@+id/teach_repeat"
        android:entries="@array/on_off"
        android:textSize="12sp"
        android:textColor="#ffffff"
        android:layout_width="match_parent"
        android:layout_height="40dp" />
        <ImageView
            android:layout_marginTop="8dp"
            android:layout_gravity="end"
            android:src="@drawable/ic_arrow_drop_down_white_18dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </FrameLayout> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-08-02T06:57:14.667

您只需使用此代码

```
 <LinearLayout

            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:baselineAligned="false">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="0.80">

                <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_gravity="center_vertical|start"
                    android:paddingBottom="5dp"
                    android:paddingTop="5dp">

                    <Spinner
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"

                        android:background="@drawable/spiner_back"
                        android:visibility="visible" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical|end"
                        android:src="@drawable/ic_arrow_drop_down_black_24dp" />
                </FrameLayout>

            </LinearLayout>

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="0.20">

                <Button
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/colorred"
                    android:fontFamily="@font/raleway_extrabold"
                    android:text="GO"
                    android:textColor="@color/colorwhite" />

            </LinearLayout>
        </LinearLayout> 
```

这是我使用的背景...

```
<?xml version="1.0" encoding="utf-8"?><shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<corners android:radius="5dp" />
<solid android:color="@color/colorwhite" /> 
```

我们开始了，这是我存档的视图... [![在此处输入图像描述](../Images/49a56adf7a5af56355de27e3f447e94b.png)](https://i.stack.imgur.com/vmRK7.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-01T11:18:29.353

Android Studio 有一个预定义的代码，你可以直接使用它。 **android:popupBackground** ="十六进制颜色代码"

# windows-phone-7 - wp7 如何从 feedburner 链接导入数据 (rss)？

> ID：11188401
> 
> 赞同：0
> 
> 时间：2012-06-25T11:22:04.047
> 
> 标签：windows-phone-7, rss, feedburner

我只想在我的应用程序启动时在主页上显示 feedburner 链接的结果（如 http://feeds.feedburner.com/thesitename）。我的应用程序适用于 wp7，它使用全景样式。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:04:10.213

查看 MSDN 中的此示例，了解[如何：为 Windows Phone 创建基本 RSS 阅读器](http://msdn.microsoft.com/en-us/library/hh487167%28v=vs.92%29.aspx)

# php - 会话登录 - IE 错误

> ID：11188402
> 
> 赞同：2
> 
> 时间：2012-06-25T11:22:11.913
> 
> 标签：php, session-state

我试图让我的会话登录脚本正常工作，但我遇到了明显的标题问题，所以我将它添加到我的页面顶部，现在它允许在 Chrome 浏览器上登录，但不允许在 IE 上登录，页面只显示我包含的头文件中的内容（没有CSS）就像它只是忽略了其他一切。

```
<?php
session_start();
if(isset($_SESSION['SESS_USERNAME']))
{               
    $username = $_SESSION["SESS_USERNAME"];             
    echo '<div id="session">You are logged in as '.$username.'</div>';
}
else
{    
    header("Location: index.php");  
}
?> 
```

有什么理由吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:25:22.947

可能是您在 IE 中关闭了 cookie。核实！如果是，请将其打开，然后重试。它会工作

# xslt - 如何通过在 XSLT 中编写单个语句来避免在输出中出现所有命名空间

> ID：11188403
> 
> 赞同：11
> 
> 时间：2012-06-25T11:22:13.510
> 
> 标签：xslt

我写了“exclude-result-prefixes”，即便如此，我在输出中也看到了名称空间出现的外观。

```
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt"
    xmlns:simple="Simple name space"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:tcm="http://www.tridion.com/ContentManager/5.0"
    xmlns:xh="http://www.w3.org/1999/xhtml"
    xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:transform-ext="urn:tridion:transform-ext"
    xmlns="http://www.w3.org/1999/xhtml"
    exclude-result-prefixes="#default simple xh"> 
```

实际输出

```
<strong xmlns="Simple name space">abcd
    <link xmlns="http://www.w3.org/1999/xhtml">
        <text>Header</text>
    </link>
</strong> 
```

是否有任何方法可以通过编写单个语句来排除所有命名空间。

这里我明确提到

```
exclude-result-prefixes="#default simple xh" 
```

如何避免在 xslt 中出现所有命名空间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:37:45.120

的`exclude-result-prefixes`属性`xsl:stylesheet`，当指定为时，要求删除（仅）*字面结果元素*`"yes"`的任何命名空间节点，这些节点是继承的，并且不定义字面量结果元素的命名空间 uri 和前缀。

 ***Markus Jarderot 的回答中的以下陈述是错误的**：

> “exclude-result-prefixes 只是删除了结果根标签上的 xmlns:foo="" 属性。”

**这是一个反例**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:z="z:z" exclude-result-prefixes="z">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <z:x xmlns:z="z:z">
   <z:y/>
  </z:x>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，结果为：**

```
<z:x xmlns:z="z:z">
   <z:y/>
</z:x> 
```

**我们看到**：

1.  具有值 (namespace-uri) "z:z" 的命名空间的命名空间节点（和定义）不会从顶部元素（Markus Jarderot 称之为“根标签”）中删除。

2.  带有前缀的命名空间`"z"`根本不会从任何文字元素中删除。

**这表明了一个简单的事实，即`exclude-result-prefixes="yes"`如果命名空间不在 LRE（文字结果元素）上，并且即使命名空间节点在 LRE 上但正在定义元素所属的命名空间，则指定不能删除命名空间**。

为了从它所属的命名空间中删除一个元素，或者从非 LRE 元素中删除命名空间，我们需要指定一些额外的处理。

**一个例子是将传统的身份规则替换为以下内容：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()[not(self::*)]">
     <xsl:copy>
       <xsl:apply-templates/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*">
  <xsl:element name="{local-name()}">
   <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{local-name()}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

上述转换将任何元素或属性替换为属于“无命名空间”的相应元素或属性。它的一个潜在用途是将具有默认命名空间的文档转换为没有默认命名空间的文档。

**例如，当应用于以下源 XML 文档时**：

```
<z:x xmlns:z="z:z">
    <z:y z:attr="someValue"/>
</z:x> 
```

**转换的结果是**：

```
<x>
   <y attr="someValue"/>
</x> 
```

**最后一个警告**：

如果应用于包含具有相同本地名称但属于两个不同名称空间的两个元素（或两个属性）的文档，则此转换可能是有害的 - 该转换将这些元素（或属性）替换为都属于同一名称空间的元素（或属性）（没有命名空间）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T11:40:22.350

`exclude-result-prefixes`只是删除`xmlns:foo=""`结果的根标记上的属性。标签仍然绑定到同一个命名空间。由于标签没有任何匹配的前缀，因此使用默认命名空间。

如果您希望完全删除命名空间，可以使用以下样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="no"/>

    <xsl:template match="/|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="{local-name()}">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>
</xsl:stylesheet> 
```

（来源：[TEI 维基](http://wiki.tei-c.org/index.php/Remove-Namespaces.xsl)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T14:25:17.877

exclude-result-prefixes 属性将（在某些情况下）从输出中删除未使用的命名空间声明。它永远不会删除结果中元素和属性实际使用的命名空间：也就是说，它永远不会更改元素和属性的名称以将它们放入不同的命名空间（或没有命名空间）。如果您希望元素不在命名空间中，则必须避免在生成它们时将它们放入命名空间，无论是使用文字结果元素、xsl:element 还是 xsl:copy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:45:41.787

尝试在您的样式表中使用它：

```
<stylesheet
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"   ...etc > 
```

我在一些标签里面有这个：`xmlns="http://www.w3.org/1999/xhtml`，所以我添加了这两行，现在可以了。

这个来源帮助了我：http: [//xmlplease.com/xhtmlxhtml](http://xmlplease.com/xhtmlxhtml)*

# asp.net - 将 wcf 与 asp.net 绑定

> ID：11188405
> 
> 赞同：1
> 
> 时间：2012-06-25T11:22:22.103
> 
> 标签：asp.net, wcf, wcf-binding

我正在尝试将一个 asp.net 页面绑定到另一个网站托管的 wcf 服务，

客户端的 web.config 文件包含以下代码：

```
<endpoint address="http://localhost:1670/webhost/CustomersService.svc" binding="wsHttpBinding" bindingConfiguration="wsHttpBinding_ICustomersService" contract="CustomersService.ICustomersService" name="BasicHttpBinding_ICustomersService"/>
</client> 
```

该服务的 web.config 文件包含以下代码：

```
<endpoint address="" binding="wsHttpBinding" contract="CustomerServiceLibrary1.ICustomersService">
<identity>
<dns value="localhost" />
</identity>
</endpoint> 
```

错误是：

错误 1 ​​Reference.svcmap：system.serviceModel/bindings/wsHttpBinding 处的绑定没有名为“wsHttpBinding_ICustomersService”的已配置绑定。这是 bindingConfiguration 的无效值。（C:\Users\Lara\Documents\Visual Studio 2010\Projects\CustomerServiceDemo\WebClient\web.config 第 25 行）App_WebReferences/CustomersService/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:33:51.770

您的客户端配置 bindingConfiguration="wsHttpBinding_ICustomersService" 的以下部分

告诉它应该使用名称为“wsHttpBinding_ICustomersService”的绑定配置您的客户端 web.config 中是否有使用该名称的绑定配置？

以下文章解释了 WCF 和绑定 [http://msdn.microsoft.com/en-us/magazine/cc163394.aspx](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx)

但这部分应该是你要找的

```
<configuration>
  <system.serviceModel>
    <services>
      <service name=”ChatService”&gt;
        <endpoint address=”http://localhost:8080/chat” 
          binding=”basicHttpBinding” 
          bindingConfiguration=”basicConfig” 
          contract=”ChatLibrary.IChat” />
        ...
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name=”basicConfig” messageEncoding=”Mtom”&gt;
          <security mode=”Transport”/>
        </binding>
      </basicHttpBinding>
      ...
    </bindings>
  </system.serviceModel>
</configuration> 
```

注意“绑定”部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T07:35:11.197

我遇到了同样的异常
“system.serviceModel/bindings/basicHttpBinding 处的绑定没有配置的名为‘BasicHttpBinding_ITestService’的绑定。这是 bindingConfiguration 的无效值。” 当我在代码中指定并在客户端添加具有 basicHttpBinding 的端点名称时，
**我的问题得到了解决**

```
TestServiceClient obj = new TestServiceClient("BasicHttpBinding_ITestService"); 
```

# java - 安卓时间问题

> ID：11188406
> 
> 赞同：0
> 
> 时间：2012-06-25T11:22:25.927
> 
> 标签：java, android

```
 private void getSelectedTime(final String json){

        Calendar now = Calendar.getInstance();
        int year = now.get(Calendar.YEAR);
        int month = now.get(Calendar.MONTH); // Note: zero based!
        int day = now.get(Calendar.DAY_OF_MONTH);
        int hour = now.get(Calendar.HOUR_OF_DAY);
        int minute = now.get(Calendar.MINUTE);
        int second = now.get(Calendar.SECOND);
        int millis = now.get(Calendar.MILLISECOND);
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm");

        JSONArray list;
        JSONObject jsonObject;

        try {
            jsonObject = new JSONObject(json);

            list = jsonObject.getJSONArray("3");
            StringTokenizer tokenizer = new StringTokenizer(list.get(0).toString(),"-");
            String startTime = tokenizer.nextToken();
            String endTime = tokenizer.nextToken();
            String temp1 = year+"/"+month+"/"+day+" "+startTime;
            String temp2 = year+"/"+month+"/"+day+" "+endTime;
            System.out.println("temp1="+temp1);
            System.out.println("temp2="+temp2);

            Date date1 = dateFormat.parse(temp1); // temp1=2012/5/25 03:00
            Date date2 = dateFormat.parse(temp2); //temp2=2012/5/25 03:06

            System.out.println("Year1="+date1.getYear());
            System.out.println("Month1="+date1.getMonth());
            System.out.println("Day1="+date1.getDay());
            System.out.println("Hour1="+date1.getHours());
            System.out.println("Minutes1="+date1.getMinutes());

        } catch (JSONException e) {
            e.printStackTrace();
        }
        catch (ParseException e) {
            e.printStackTrace();
        }

    }

} 
```

在我的应用程序中，我正在处理时间，我在这里遇到了一些问题。看看下面我有这个结果。

```
list.get(0) = 03:00-03:06
temp1=2012/5/25 03:00
temp2=2012/5/25 03:06 
```

但是当我尝试这样做时

```
System.out.println("Year="+date1.getYear());
System.out.println("Month="+date1.getMonth());
System.out.println("Day="+date1.getDay());
System.out.println("Hour="+date1.getHours());
System.out.println("Minutes="+date1.getMinutes()); 
```

我有这个结果

```
Year=112
Month=4
Day=5
Hour=3
Minutes=0 
```

谁能告诉我为什么结果是错误的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:24:13.033

> 谁能告诉我为什么我的结果是错误的？

当然 - 您正在使用不推荐使用的方法（您应该收到警告 - 不要忽略它们！），并且您还没有阅读它们的文档。例如，来自`Date.getYear()`：

> 返回一个值，该值是从包含或以此 Date 对象表示的时刻开始的年份减去 1900 的结果，如本地时区所解释的那样。

如果你想坚持使用 JDK，你应该在适当的时区使用（用via`java.util.Calendar`填充它）。请注意，月份仍然是从 0 开始的，尽管年份至少更合理。`Date``setTime``Calendar`

但是，如果可能的话，通常使用[Joda Time](http://joda-time.sf.net)会更好。这是一个更好的深思熟虑的 API。不过，它可能对您来说太大而无法在 Android 上使用 - 您可能希望查看是否有可用的精简版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:34:42.147

你也可以做而不是`date1.getYear()`

```
Calendar cal = Calendar.getInstance();
cal.setTime(date1);

int year = cal.get(Calendar.year); 
```

这也适用于其他时间值。或者您可以使用已经建议的 Joda Time。

# html - div 的浮动在 Chrome 中不起作用，而在其他浏览器中起作用

> ID：11188413
> 
> 赞同：1
> 
> 时间：2012-06-25T11:22:57.057
> 
> 标签：html, css

我的 HTML 页面中有四个链接。（页面左侧）。单击链接时，我需要显示和隐藏每个链接的相关 div。

如果我点击第一个链接，那么我需要在页面右侧显示第一个 div。如果我再次点击第二个链接，那么我需要在第一个 div 之后显示第二个 div。

为此，我已将所有这些 div 对齐到左侧。（给定样式为“float:left”）。这在 Firefox 和 IE 中正常工作。但在谷歌浏览器中不起作用。我可以在 chrome 中看到所有这些 div 在相同的位置，而不是一个接一个。

如果有人能给出有用的答案，我真的很感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:29:56.120

确保将所有这四个 div 放在另一个 div（容器）中，并将包含 div 的宽度设置为与您的四个潜水相同或仅大 2-3px。像这样：

```
<div id="container" style="width: 202px">
    <div id="inner1" style="width: 200px; float: left"></div>
    <div id="inner2" style="width: 200px; float: left"></div>
    <div id="inner3" style="width: 200px; float: left"></div>
    <div id="inner4" style="width: 200px; float: left"></div>
</div> 
```

如果你使用浮动定位，你应该总是使用一个容器 div，它会告诉你的浏览器一个准确的空间来定位内部 div。我总是被告知，在任何浏览器中使用没有容器的浮点数会产生不可预测的结果。

# c# - 如何与另一个 asp 页面中的 masterPage.cs 元素进行交互

> ID：11188414
> 
> 赞同：0
> 
> 时间：2012-06-25T11:22:58.250
> 
> 标签：c#, asp.net, master-pages

我很难从“connexion.aspx”加载控制器“asp:droopDownItem”，而我的元素“asp:droopDownItem”在“masterPage.cs”中。我可以很好地填写我的“asp:droopDownItem”，但问题是一旦到达主页，**我的“asp:droopDownItem”是空的**.... :-( 为什么？我使用微软提供的代码与一个远程母版页的元素没有成功..这是我的代码

```
ContentPlaceHolder menuActive;
DropDownList cbbx_dbUser;
menuActive = (ContentPlaceHolder)Master.FindControl("menuActive");
if (menuActive != null)
{
    cbbx_dbUser = (DropDownList)menuActive.FindControl("cmbx_dbListUser");
    if (cbbx_dbUser != null)
    {
         for (int a = 0; a < resultArmsUser.GetLength(0); a++)
         {
             cbbx_dbUser.Items.Add(new ListItem(resultArmsUser[a, 5], resultArmsUser[a, 5]));
         }
         cbbx_dbUser.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:49:54.713

您何时尝试访问母版页上的下拉列表？

OnInit PageLoad PreRender

可能是导致您的问题的页面生命周期事件模型。

根据您的母版页何时填充您的下拉列表，您可能会得到一个空的下拉列表。

# php - JQuery 移动表格在纵向视图中未完美对齐

> ID：11188422
> 
> 赞同：1
> 
> 时间：2012-06-25T11:23:29.543
> 
> 标签：php, jquery-mobile

具有动态值的表格在横向上完全对齐，但在纵向上无法完美地查看，因为相应的最后一列显示在移动设备的显示屏之外。

```
 <table id="dataTable" cellspacing="0"  width="100%" cellpadding="0"
                        align="center">
       <thead>
  <tr>

<th width="25%">Name</th>
<th width="25%">Relationship</th>
<th width="25%">HomePhone</th>
<th width="25%">Email</th>

                            </tr>
                        </thead>
                        <tbody>

                            <tr>
  <?php $loop=1;    foreach($this->userobjArray as $temp){   ?>

                                <td align="center"  class="name"><?php echo $temp->name;?></td>
                                <td align="center" class="relation"><?php echo $temp->relation;?></td>
                                <td align="center" class="homephone"><?php echo $temp->homephone;?></td>
                                <td align="center" class="email"><?php echo $temp->email?></td>
                                <td align="center" class="id" style="display: none;"><?php echo $temp->id; ?></td>
                        </tr>

                                 <?php $loop++;  } ?> </tbody> </table> 
```

# mysql - MySQL 有效地将所有记录从一个表复制到另一个表

> ID：11188427
> 
> 赞同：20
> 
> 时间：2012-06-25T11:23:52.237
> 
> 标签：mysql, sql, insert, mysql5

是否有一种更有效、更省力的方法将所有记录从一个表复制到另一个表：

```
INSERT INTO product_backup SELECT * FROM product 
```

通常，该`product`表将包含大约 50,000 条记录。两个表的结构相同，有 31 列。我想指出这**不是**我的数据库设计，我继承了一个遗留系统。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T13:06:41.570

你只缺少一件事。特别是，如果您使用的是 InnoDB，是否要在 SELECT 语句中显式添加 ORDER BY 子句以确保您以主键（聚集索引）顺序插入行：

```
INSERT INTO product_backup SELECT * FROM product ORDER BY product_id 
```

如果不需要，请考虑删除备份表上的二级索引。这也将节省服务器上的一些负载。

最后，如果您使用 InnoDB，请减少所需的行锁数量，并显式锁定两个表：

```
LOCK TABLES product_backup WRITE;
LOCK TABLES product READ;
INSERT INTO product_backup SELECT * FROM product ORDER BY product_id;
UNLOCK TABLES; 
```

锁定的东西可能不会有很大的不同，因为行锁定非常快（虽然不如表锁快），但是既然你问了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T11:49:07.873

```
mysqldump -R --add-drop-table db_name table_name > filepath/file_name.sql 
```

这将使用删除选项转储指定的表，以便在导入时删除现有表。然后做，

```
mysql db_name < filepath/file_name.sql 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-15T08:08:47.030

`DROP`目标表：

```
DROP TABLE DESTINATION_TABLE;
CREATE TABLE DESTINATION_TABLE AS (SELECT * FROM SOURCE_TABLE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:32:16.167

我不认为这对于 50k 表来说是值得的，但是：如果你有数据库转储，你可以从中重新加载一个表。当您想在另一个中加载一个表时，您可以使用 sed 命令更改转储中的表名：这里有一些提示： [http ://blog.tsheets.com/2008/tips-tricks/mysql-restoreing-一个巨大的 mysqldump-file.html 的单表](http://blog.tsheets.com/2008/tips-tricks/mysql-restoring-a-single-table-from-a-huge-mysqldump-file.html)

另一种选择（取决于您的设计）是在原始表插入上使用触发器，以便重复的表也可以获取数据。

一个更好的选择是创建另一个 MySQL 实例并以主从配置或每日转储主/负载从属方式运行它。

# asp.net - ASP.NET 使用共享 SSL 对用户进行身份验证

> ID：11188440
> 
> 赞同：1
> 
> 时间：2012-06-25T11:24:29.630
> 
> 标签：asp.net, asp.net-mvc-3, authentication, ssl

好的，这是我的情况。我正在发布我的网站（ASP.NET MVC3 网站），并且我有一个管理部分，当然需要身份验证。

现在，我选择使用的托管服务提供商提供了一个共享 SSL 文件夹，从我所阅读的内容来看，我需要一个单独的“身份验证 webapp”，它将发布到共享 SSL 文件夹。

我的问题是，执行这种身份验证的最佳、最安全的方法是什么？本质上这将是一个跨站点身份验证是的？

提前致谢！

**编辑**：

我相信共享 ssl 文件夹的名称为“www.mysite.com/sslfolder”。这将与 mysite 位于同一域中，因此这将大大简化解决方案。

问题是，在我的 mvc3 项目中，我如何知道将 www.mysite.com/sslfolder 路由到我的登录控制器？

这只是将路由添加到路由表中的简单吗？

# ruby-on-rails - 在 rails 中访问 mongoid 配置变量

> ID：11188455
> 
> 赞同：0
> 
> 时间：2012-06-25T11:25:47.447
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, environment-variables

我正在编写一些 rspec 测试以确保正确分配 mongoid 变量，因为它们在我们中的一个人发现它之前在开发的一半左右发生了变化。

不是 100% 确定如何访问它们。如果我在生产中，那么我可以只使用 ENV 变量

```
uri: <%= ENV['MONGOHQ_URL'] %> 
```

和其他 ENV 变量。但是对于测试和开发，我如何访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:56:17.013

ENV 是环境变量（系统变量）的类似哈希的访问器。您可以在测试和开发中访问和定义（覆盖）它们。

```
ENV["LOL"]='lol'
ENV["LOL"] 
```

# javascript - ASP.NET javascript 超时后关闭页面？

> ID：11188458
> 
> 赞同：1
> 
> 时间：2012-06-25T11:25:56.470
> 
> 标签：javascript, asp.net, code-behind

我想在成功 db opartions 后显示一个信息页面。在信息之后我想关闭每个页面（信息页面和主页）

我在按钮 oncommand 事件中写了这个：

```
//but this code does not work
Response.Write("<script language='javascript'>setTimeout('self.close();',3000);</script>"); 
```

同时，我想显示一条信息消息。然后我想在三秒钟后关闭所有。我希望我能解释一下:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:44:01.393

Firefox 只允许 window.close(); 并且仅当您使用脚本打开窗口时。

参考：[window.close](https://developer.mozilla.org/en/window.close)

> 当这个方法被调用时，被引用的窗口被关闭。
> 
> 仅允许为使用 window.open 方法的脚本打开的窗口调用此方法。如果窗口不是由脚本打开的，JavaScript 控制台中会出现以下错误：脚本可能不会关闭不是由脚本打开的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:13:08.177

我解决了这个问题，它适用于所有浏览器。

这是代码：

```
String MyScript = "";
MyScript += "<script language='javascript'>";
MyScript += "   window.open('', '_self', '');";
MyScript += "   top.window.close();";
MyScript += "</script>";
Page.ClientScript.RegisterClientScriptBlock(GetType(), "PopupClose", MyScript); 
```

# android - 使用相机时的屏幕截图 (Android)

> ID：11188460
> 
> 赞同：2
> 
> 时间：2012-06-25T11:26:01.353
> 
> 标签：android, camera, screen, capture

我正在尝试制作我的应用程序的快照。我遇到的问题是该应用程序旨在成为增强现实应用程序，并且我有一个带有一些图层的视图，而背景图层是相机视图。

我通过启用和获取根视图绘图缓存来尝试它，但结果是一个黑色背景的位图和上面的其余图层。此外，为了让相机操作系统再次成为背景，我必须禁用缓存并重新启动相机。（即[如何在 Android 中以编程方式截取屏幕截图？](https://stackoverflow.com/questions/2661536/screenshot-android)）

下一个方法，它几乎对我有用，是在“像往常一样”进行屏幕截图之前制作一张照片并将其设置为背景。结果非常好，但太棘手且有点慢，而且我必须根据设备屏幕修复图像大小。

谁能给我一个关于如何以更好的方式完成这项任务的建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T20:44:15.173

对不起，你不能。与相机关联的 SurfaceView 是硬件加速的，因此它不会显示在您的屏幕截图中。

我遇到的唯一解决方案是从相机获取预览并以编程方式在 SurfaceView 中绘制它。然后屏幕截图将起作用。

# javascript - javascript递归函数错误答案

> ID：11188461
> 
> 赞同：0
> 
> 时间：2012-06-25T11:26:02.490
> 
> 标签：javascript, recursion

这是[我的代码的 jsfiddle](http://jsfiddle.net/UBqKw/5/)。吨

```
function test(i)
{
  if(i==2)
      return {title:"finished at 2", data:"empty"}
  else
  {
          a=[]
          a.push(test(i+1))
          a.push(test(i+1))
          return {title:"number "+i, data:a}
    }
}

alert(JSON.stringify(test(0))) 
```

这里，`test(0)`应该

```
{
    title: "number 0",
    data: [{
        title: "number 1",
        data: [{
            title: "finished at 2",
            data: "Empty"
        }, {
            title: "finished at 2",
            data: "Empty"
        }]
    }, {
        title: "number 1",
        data: [{
            title: "finished at 2",
            data: "Empty"
        }, {
            title: "finished at 2",
            data: "Empty"
        }]
    }] 
```

虽然您可以看到它在代码结果中有所不同。如何和为什么？我该怎么做才能使它正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:33:25.233

您在递归函数中使用了一个全局变量，因此在您使用它时它会被更改。

改变这个：

```
a = [] 
```

到：

```
var a = [] 
```

# jquery-ui - 淘汰嵌套控件绑定

> ID：11188464
> 
> 赞同：0
> 
> 时间：2012-06-25T11:26:08.460
> 
> 标签：jquery-ui, knockout.js

我希望以一种相当时髦的方式使用敲除将对象绑定到 jQuery UI 对话框中的元素。发生了很多事情，但是我很早就被淘汰赛阻止了，抱怨我嵌套在 with-control-binding 中的属性没有定义。

```
<div class="feedback-container" data-bind="with: feedback">
[... Other Bindings Here...]
<div class="feedback-list" data-bind="foreach: list">
    <div class="item">
        [... List binding here ...]
    </div>
</div>

<!-- Dialog Box for editing/creation-->
<div style="display: none" data-bind="with: $root.feedback.editFeedback">
    <div id="dialog_add_feedback" data-bind="attr: { title: mode }">
        <div class="form">
            <div class="field" data-bind="if: $root.feedback.mode() == 'contact'">
                <label>Lot</label>
                <input type="text" data-bind="value: lot"/>
            </div>
            <div class="field" data-bind="if: $root.feedback.mode() == 'lot'">
                <label>Contact</label>
                <input type="text" data-bind="value: contact"/>
            </div>

        </div>
    </div>
</div> 
</div> 
```

我正在应用这样的绑定：

```
ko.applyBindings({ "feedback" : new Feedback("contact") }); 
```

这样定义了 Feedback 构造函数（为简单起见，我删除了一大堆其他绑定）：

```
function Feedback(mode) {
    var self = this;

    self.list = ko.observableArray([]);
    self.mode = ko.observable(mode);
    self.editFeedback = ko.observable();
} 
```

淘汰赛对绑定到标题的属性感到窒息。这是怎么回事？editFeedback 是空的，ko 的 with-control-binding 应该完全防止后代绑定被绑定。

这是否与我在另一个 with-binding 中有一个 with-binding 的事实有关？这是允许的吗？

```
Unable to parse bindings. Message: ReferenceError: mode is not defined; Bindings value: attr: { title: mode } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:17:39.943

此处显示的代码没有问题。

[http://jsfiddle.net/XU9Eb/](http://jsfiddle.net/XU9Eb/)

# google-chrome - Ajax 发布请求在 chrome 中不起作用

> ID：11188465
> 
> 赞同：1
> 
> 时间：2012-06-25T11:26:09.910
> 
> 标签：google-chrome, jquery, localhost

我只想使用 ajax 发布请求将数据发送到远程服务器。以下代码在 IE 中运行良好，但在 chrome 中运行良好。为什么 ？什么是“Access-Control-Allow-Origin 不允许 Origin http//localhost”问题？我怎样才能让它在 chrome 中也能工作。请帮我。

```
 var http = new ajaxRequest();
        var url = "http://abcd.abc.com/login";
        var params = "username=name&password=pass&id=12345";
        http.open("POST", url, true);

        //Send the proper header information along with the request
        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        http.setRequestHeader("Content-length", params.length);
        http.setRequestHeader("Connection", "close");

        http.onreadystatechange = function() {
            //Call a function when the state changes.
            if(http.readyState == 4 && http.status == 200) {
                window.alert(http.responseText);
            }
        }
        http.send(params);

  function ajaxRequest(){
     var activexmodes=["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"] //activeX versions to check for in IE
     if (window.ActiveXObject){ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
      for (var i=0; i<activexmodes.length; i++){
       try{
        return new ActiveXObject(activexmodes[i])
       }
       catch(e){
        //suppress error
       }
      }
     }
     else if (window.XMLHttpRequest) // if Mozilla, Safari etc
      return new XMLHttpRequest()
     else
      return false
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:40:07.817

您不能向其他服务器发出 AJAX 请求。您的脚本必须在与您发出 AJAX 请求的服务器相同的域上运行，除非该服务器允许您使用上述 Access-Control-Allow-Origin 来执行此操作。

# android - Android：在通知上启动应用程序

> ID：11188469
> 
> 赞同：0
> 
> 时间：2012-06-25T11:26:18.933
> 
> 标签：android, android-intent

每次用户从设备上的任何东西收到通知时，我都试图让我的应用程序启动，这真的可能吗？我找了很多地方，但我可以找到任何东西，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:56:24.007

当然，这是可能的。您可以使用 PackageManagerInfo 让您启动活动，并通过 Brodcast Receiver 您可以启动您的应用程序

# java - Dozer - 空对象而不是 null

> ID：11188472
> 
> 赞同：2
> 
> 时间：2012-06-25T11:26:34.877
> 
> 标签：java, dozer, sourceforge

在推土机中，我如何将值全局初始化为空对象而不是 null

例如：

```
Class Person
{
public Address address;
//getters and setters for address

}

Class Address
{
String addressField1;
String addressField2;
} 
```

同样，我有类似于 Person 和 Address 的对象 PersonVO 和 AddressVO

使用推土机映射值后，如果Person对象中的地址值为null，则结果`personvo.getAddressVO.getAddressField1()`将抛出*空指针异常*，有什么办法可以避免这种情况？

如果我使用自定义转换器，那么我最终会以典型的方式在自定义转换器中设置值，并且会破坏使用推土机的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T12:39:48.530

有一种方法可以在 Dozer 中初始化目标对象。

1.  为目标对象定义一个工厂类。
2.  将目标对象的创建方法指定为上述工厂类中的方法。

以您的示例为例，我假设您想将 Person 映射到 PersonVO 并将 Address 映射到 AddressVO。

为 PersonVO 创建一个工厂类

```
public abstract class PersonVOFactory {
    private PersonVOFactory() {
    }
    public static PersonVO createPersonVO() {
        PersonVO personVO = new PersonVO();
        personVO.setAddressVO(new AddressVO());
        return personVO;
    }
} 
```

为 Person 到 PersonVO 的映射指定上述创建方法。

```
<mapping map-id="person-mapping">
    <class-a>Person</class-a>
    <class-b create-method="PersonVOFactory.createPersonVO">PersonVO</class-b>
    <field>
        <a>address.addressField1</a>
        <b>addressVO.addressField1</b>
    </field>
    <field>
        <a>address.addressField2</a>
        <b>addressVO.addressField2</b>
    </field>
</mapping> 
```

现在的语句，`personvo.getAddressVO.getAddressField1()`不会抛出 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:53:40.610

如果你可以修改`PersonVO`类的setter方法，你可以这样做：

```
public void setAddressVO(AddressVO address) {
    this.addressVO = address == null ? new AddressVO() : address;
} 
```

因此，您将确定该字段`addressVO`是 never `null`。

请注意，这很脏，因为：

1.  如果一个人没有地址，他的地址字段应该是`null` 而不是一个空`AddressVO`对象。
2.  像这样的自定义设置器是一种不好的做法，因为您的类的大多数用户都希望 set 方法设置值并且什么都不做。您可以选择创建一个新方法，并使用配置文件中的属性`initAddressVO`从推土机调用此方法。`set-method`

最好（如果可能的话）用一些检查地址是否为空`if`以避免`NullPointerException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T18:08:39.140

没有任何非静态数据成员的对象称为空对象，因为所有非静态数据成员都驻留在堆中的对象内。因此，如果我们没有任何非静态数据成员，我们的对象为空。但不是 NULL。

空对象：没有任何非静态数据成员的对象。

空对象：没有任何引用的对象，即空引用；

# jquery - 由 MVC3 控制器的操作调用的 jquery blockUI

> ID：11188473
> 
> 赞同：0
> 
> 时间：2012-06-25T11:26:38.780
> 
> 标签：jquery, asp.net-mvc-3, controller, action, blockui

您是否认为，有没有办法在 MVC3 控制器的操作被调用后以某种方式显示 blockUI 消息，而不是通过 AJAX，而是通过按下表单中的提交按钮并执行表单的提交操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:35:27.153

听起来您希望 blockUI 在整个表单提交期间处于活动状态。如果您谈论的是基本表单帖子，我认为 blockUI 没有办法一直处于活动状态。

您正在请求两个单独的页面。即使您在加载表单帖子时初始化 blockUI，仍然会有一个点 blockUI 不会处于活动状态（从表单页面转换到表单帖子）。

如果您的意图是让 blockUI 在“按钮按下”和“结果”之间的整个时间内打开，您可能希望考虑通过 AJAX 提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:33:55.997

我只是在模型中添加了一个相应设置的字段，然后在 document.ready 中，当模型的值更改时调用弹出窗口的地方，它显示/不显示弹出窗口。

# ant - 在 Ant 脚本中设置类路径的问题

> ID：11188476
> 
> 赞同：1
> 
> 时间：2012-06-25T11:26:49.947
> 
> 标签：ant, build.xml

我在为我尝试使用 Ant 构建脚本创建 jar 的项目设置类路径时遇到了一些问题。例如：考虑工作区中的项目 A。该项目与工作区中的其他项目具有内部依赖关系。我的工作空间中有项目B，C，D，它们被添加到项目A的构建路径中。我在build.xml中有以下编译脚本。当我尝试执行脚本时，由于类路径问题，编译似乎没有发生。请在下面找到代码。

```
 <target name="compileBusla"  description="description">  
    <antcall target="clean"></antcall>  
    <echo message="Creating directory '${target}' if not present "></echo>  
    <mkdir dir="${target}"/>  
    <mkdir dir="${Classfiles}"/>  
    <javac srcdir="../A/src" destdir="${Classfiles}" />  
    <classpath>  
        <pathelement location="../B" path="src" />  
        <pathelement location="../C" path="src"/>  
        <pathelement location="../D" path="src" />  
    </classpath>  
</target> 
```

当我尝试执行脚本时，我在这一行得到错误 '' 说编译失败。在构建脚本中设置类路径时需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:05:04.697

类路径包含目录和 jar，其中包含已编译的类文件。您添加了 A、B 和 C 的源文件夹。添加它们的 classes 文件夹，或者为这些项目生成的 jar 文件。

而且，pathelement的path属性不仅仅是一个目录名。这是一条路。你应该只使用

```
<pathelement location="../B/src" /> 
```

# iphone - 如何在图像视图+iphone中上传图像

> ID：11188479
> 
> 赞同：1
> 
> 时间：2012-06-25T11:27:07.353
> 
> 标签：iphone

我是一个新的 iphone 开发人员。如何在从相机和照片库拍摄的图像视图中上传图像。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:42:12.647

尝试这个。

```
- (IBAction)m_CtrlBtn_SelectImage_click:(id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypePhotoLibrary]) 
    {
        // Set source to the Photo Library
        imgPicker.sourceType =UIImagePickerControllerSourceTypePhotoLibrary;// imgPicker is a  UIImagePickerController object;
        if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) 
        {
            UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
            self.popoverController = popover;   
            [popover release];
            // popoverController.delegate = self;
            [popoverController presentPopoverFromRect:CGRectMake(0, 0, 500, 480) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
            [imgPicker release]; 
        }
        else
        {
            [self presentModalViewController:self.imgPicker animated:YES];
        }
    }

}  
-(void)viewWillAppear:(BOOL)animated{
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;

}
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo { 
    m_ImgVw_SelectedImage.image=img;
    [popoverController dismissPopoverAnimated:YES];
    [picker dismissModalViewControllerAnimated:YES];
    [picker.view removeFromSuperview];
    [picker release];
    picker.delegate=nil;
} 
```

# javascript - 在所有浏览器中单击事件在 Nexus S ICS (4.0.4) 上不起作用

> ID：11188486
> 
> 赞同：4
> 
> 时间：2012-06-25T11:28:00.777
> 
> 标签：javascript, android, jquery, android-4.0-ice-cream-sandwich

我的 Nexus S 遇到很多问题，我想知道是不是我做错了什么。基本上，通过 jQuery 的点击事件不适用于在所有浏览器中运行 Android ICS (Ice Cream Sandwich) 4.0.4 的 Nexus S。我试过股票浏览器、Opera Mobile 和 FireFox。

相同的代码适用于运行 Android 2.3 Gingerbread 的 Nexus S。在运行 Android 4.0.3 的 iPhone 4 和三星 Galaxy SII 上也能正常工作。

有什么建议吗？或者这可能是一个需要向 Google 报告的错误？

这是基本代码，也使用了现代化程序、响应式和明显的 jQuery。谢谢！

HTML：

```
<div>

    <p><a id="red" href="" target="_self">CHANGE TO RED</a></p>
    <p><a id="green" href="" target="_self">CHANGE TO GREEN</a></p>
    <p><a id="blue" href="" target="_self">CHANGE TO BLUE</a></p>

</div> 
```

JavaScript：

```
$(document).ready( function() {

    $("#red").click( function(e) {

        e.preventDefault();
        $("body").css("background-color", "#CC0000");

    } );

    $("#green").click( function(e) {

        e.preventDefault();
        $("body").css("background-color", "#00CC00");

    } );

    $("#blue").click( function(e) {

        e.preventDefault();
        $("body").css("background-color", "#0000CC");

    } );

} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:29:38.837

放一个 # 或 javascript:void(0); 在那些锚标签的 href 属性中

# c# - 差 T 得到 (int id) 和 T Get(int id)

> ID：11188487
> 
> 赞同：2
> 
> 时间：2012-06-25T11:28:00.690
> 
> 标签：c#, .net, entity-framework, generics

谁能告诉我两者的区别

```
public T Get<T>(int id) 
```

和

```
public T Get(int id) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T11:31:33.110

相比：

```
class First
{
    public T Get<T>(int id) // T is declared in the method scope
    {
    }
} 
```

和

```
class Second<T>
{
    public T Get(int id) // T is declared in the class scope
    {
    }
} 
```

还有第三种情况：

```
class Third<U>
{
    public T Get<T>(int id) // T is declared in the method scope when class scope has another generic argument declared
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T11:42:34.557

不同之处在于，如果之前没有定义 T，则使用第一种类型的声明。IE。

```
public class MyClass
{
    public T Get<T>(int id);
} 
```

第二个，当 T 已经在类级别定义时。IE。

```
public class MyClass<T>
{
    public T Get(int id);
} 
```

在这种情况下，您还可以使用第一种类型的声明 - 这实际上是简写。效果没有区别。

**编辑**实际上，第二个声明只要求 T 在范围内，另一个示例是嵌套类，如...

```
public class MyClass<T>
{
  public class NestedClass
  {
    public T Get(int i);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:42:02.283

在代码中使用泛型之前，请先阅读[泛型。](http://msdn.microsoft.com/en-US/library/0x6a29h6%28v=vs.80%29)

# c++ - 模板的“基类”？

> ID：11188489
> 
> 赞同：3
> 
> 时间：2012-06-25T11:28:04.953
> 
> 标签：c++, templates, base-class, derived

（抱歉标题含糊）

我有一个带有各种派生类 D1、D2 等的基类 B。

此外，我有一个模板

```
template <class T> Storage; 
```

现在每个派生类都有不同版本的 Storage 类

```
class D1 : public class B {
   Storage<int> *myStorage;
   void action1();
   void specific_D1_action();

   // other stuff...
}

class D2 : public class B {
   Storage<float> *myStorage;
   void action1();
   void specific_D2_action();

   // other stuff...
} 
```

`D1::action1()`并`D2::action1()`使用它们各自`myStorage`并具有完全相同的代码。但是，各个`myStorage`对象的实际模板参数不同。

是否可以为所有版本的 Storage 提供一种“基类”，以便我可以在基类 B（而不是 D1、D2、...）中定义 myStorage 和 action1 以避免代码重复？

我认为我不能“模板化”基类 B，因为派生类中的特定操作。

（这个例子非常简单——在实际情况下，模板参数是复杂的类）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T11:32:27.307

创建一个从基类继承`B`并接受模板参数的基类？

```
class B
{
    // ...
};

template<typename T>
class DerivedBase : public B
{
    Storage<T> *myStorage;
    void action1();
};

class D1 : public DerivedBase<int>
{
    void specific_D1_action();
};

class D2 : public DerivedBase<float>
{
    void specific_D2_action();
}; 
```

# java - .txt 文件上的字符串到位图

> ID：11188498
> 
> 赞同：0
> 
> 时间：2012-06-25T11:28:49.333
> 
> 标签：java, android, string, image, bitmapfactory

我有一个关于我的运动的问题。我的问题是我的存储卡中有一个 .txt 文件，里面有一个字符串。我想使用该字符串制作图像。我想创建的图像我不在乎我是否只是一个没有可理解内容的图像，我只想将该字符串作为图像视图上的图像。

我尝试了很多想法，但我什么也做不了

我尝试将 tha 字符串读取为字节 [] 数组，然后使用 Bitmapfactory()，但在图像视图上向我发送了一个空图像。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:40:34.247

这是因为`BitmapFactory`期望**压缩图像数据**。它不知道如何解释你给它的值。作为替代方案，您可以做的是检查`byte[]`自己，将其转换为`int[]`并使用[Bitmap.setPixels](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:37:47.363

试试这样：

```
private Bitmap getViewBitmap ( String textString ) {
    View view = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.your_layout, null);
    TextView txt = (TextView)view.findViewById(R.id.txtId);
    txt.setText(textString);

    int spec = MeasureSpec.makeMeasureSpec(187, 187);
    view.measure(spec,spec);
    view.layout(0, 0, 187, 187);

    Bitmap cache = Bitmap.createBitmap(
            view.getWidth(), view.getHeight(),
            Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(cache);
    view.draw(canvas);

    return cache;
} 
```

# javascript - 打印时媒体选项不起作用

> ID：11188499
> 
> 赞同：0
> 
> 时间：2012-06-25T11:28:53.217
> 
> 标签：javascript, jquery, html, css

打印时我无法获得 tr 背景颜色。

我的代码如下。请说明代码有什么问题。

```
<html>
<head>
<title>Test Employee</title>
<style type="text/css">
@media all {
tr.header {
    background-color: red;
}
}
</style>
</head>
<body >
<table border="1" bordercolor="#B4B4B4" cellpadding="1" cellspacing="0" width="100%" >
  <thead>
    <tr class="header">
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>MartialStatus</th>
      <th>Address</th>
      <th>Emailid</th>
      <th>Position</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Radha Krishnan </td>
      <td>Male</td>
      <td>26</td>
      <td>Un Married</td>
      <td>Coimbatore</td>
      <td>test@asasa.com</td>
      <td>Team Lead</td>
    </tr>
    <tr>
      <td>Ramesh Kumar</td>
      <td>Male</td>
      <td>30</td>
      <td>Un Married</td>
      <td>Trivandrum</td>
      <td>rameshk@asdasd.com</td>
      <td>Senior Programmer/Analyst</td>
    </tr>
    <tr>
      <td>Mohan Ram</td>
      <td>Male</td>
      <td>24</td>
      <td>Married</td>
      <td>sfgsd</td>
      <td>asfasf@asfasf.com</td>
      <td>Programmer/Analyst</td>
    </tr>
  </tbody>
</table>
</body>
</html> 
```

谢谢

# objective-c - CALayer 中多页 TIFF NSImage 的自动缩放

> ID：11188500
> 
> 赞同：7
> 
> 时间：2012-06-25T11:28:53.673
> 
> 标签：objective-c, macos, cocoa, calayer, nsimage

问题：我有一个多页 TIFF 图像（使用 tiffutil 生成），其中包含从 256x128 像素一直到 4096x2048 像素的多个像素尺寸的相同图像。我想以 a 显示此图像，`CALayer`以便系统根据图层的大小自动选择图像的最佳表示。目前，该层始终使用图像的 256x128 表示，无论其大小如何。

这就是我所做的：我加载图像

```
NSImage *image = [NSImage imageNamed:@"map-multipage.tiff"]; 
```

记录`image`对象确认它包含具有不同像素大小的多个表示，但所有表示的大小都相同（以点为单位 (256x128)）。AFAIK 这就是 Apple 推荐构建多分辨率图像的方式。

```
NSLog(@"%@", image);

<NSImage 0x100623060 Name=map-multipage Size={256, 128} Reps=(
    "NSBitmapImageRep 0x10064d330 Size={256, 128} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=256x128 Alpha=NO Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x10014fdb0",
    "NSBitmapImageRep 0x10064e1b0 Size={256, 128} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=512x256 Alpha=NO Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x10014fdb0",
    ...
    "NSBitmapImageRep 0x100530bd0 Size={256, 128} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=4096x2048 Alpha=NO Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x10014fdb0"
)> 
```

然后我将`NSImage`实例直接分配给图层的`contents`属性：

```
self.layerView.layer.contents = image; 
```

如前所述，结果是图层使用第一个表示（256x128 像素）来显示图像，而不管图层的大小（以点或像素为单位）。

当我将相同的图像分配给 时`NSImageView`，它按预期工作。图像视图根据其大小透明地选择最佳图像表示。我希望这`CALayer`会以同样的方式工作，但显然情况并非如此。任何人都可以确认`CALayer`不支持这种自动选择还是我做错了什么？

（注意这个问题与 HiDPI/Retina 图形没有直接关系。事实上，如果我将图层移动到 HiDPI 模式下的显示器，它确实渲染得更清晰一点，表明它现在使用第二位图表示（512x256 px）用于渲染。这表明在 HiDPI 显示器上选择更高分辨率的自动性是有效的，而最佳位图表示的基本选择失败了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:53:18.867

如果`-[CALayer setContents:]`object是. _ 然后选择的位图按原样使用，直到再次调用。`-[contents size]``contents``NSImage``-[CALayer setContents:]`

# apache-flex - MyHierarchicalData 和 ArrayCollections 包含不同的对象

> ID：11188503
> 
> 赞同：0
> 
> 时间：2012-06-25T11:29:04.763
> 
> 标签：apache-flex, hierarchical-data, advanceddatagrid

这就是我所说的 HierarchicalData

```
 <component:MyHierarchicalData source="{dpHierarchy}" childrenField="children"/> 
```

**dpHierarchy**包含**Radio**列表。

我的对象**收音机**包含两个列表：

```
public class RadioRds implements IDisplayable
    {
        private var _id     :int;
        public var name     :String;
        public var **docers**   :ArrayCollection;   // <Encoder>
        public var **charges**  :ArrayCollection;   // <RadioRds>
    } 
```

那些 thow 列表具有相同的级别，它们出现在标签“名称”下

这是我的扩展课

```
package test.view.component
{
    import mx.collections.HierarchicalData : 

    public class MyHierarchicalData extends HierarchicalData
    {
        public var children:* = null;

        public function MyHierarchicalData(value:Object=null) {
            super(value);
        }

        override public function getChildren(node:Object):Object {
            var children:* = null;
            // ???
        return children;
    }

} 
```

}

我不知道在覆盖函数中该做什么。我应该连接这两个列表吗？我该怎么做？

# delphi - 如何为尚不存在的节点显示虚拟树视图网格线？

> ID：11188507
> 
> 赞同：5
> 
> 时间：2012-06-25T11:29:09.037
> 
> 标签：delphi, virtualtreeview, gridlines

我在 Delphi 7 中使用 SoftGem 的 VirtualStringTree。

有没有办法启用*完整*的网格线（就像在 TListView 中一样）？我只能找到`toShowHorzGridLines`，它只显示当前节点的线条，而不是下面空白处的任何东西，并且`toShowVertGridLines`，它只显示垂直线。

在添加项目之前，如何在空白处显示它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:35:39.527

我认为没有一种简单的方法可以在不修改`PaintTree`方法的情况下实现这一点，因为没有一个节点事件不能被触发，因为应该绘制线条的节点根本不存在。

这是一种如何根据最低可见节点额外绘制水平线的*肮脏方式。*实际上，它`DefaultNodeHeight`在此屏幕截图中以橙色填充的区域中的值的距离绘制线条：

![在此处输入图像描述](../Images/c1c617e9cbdcc13e7c8a63df50c171b1.png)

这是代码：

```
type
  TVirtualStringTree = class(VirtualTrees.TVirtualStringTree)
  public
    procedure PaintTree(TargetCanvas: TCanvas; Window: TRect; Target: TPoint;
      PaintOptions: TVTInternalPaintOptions; PixelFormat: TPixelFormat = pfDevice); override;
  end;

implementation

{ TVirtualStringTree }

procedure TVirtualStringTree.PaintTree(TargetCanvas: TCanvas; Window: TRect;
  Target: TPoint; PaintOptions: TVTInternalPaintOptions;
  PixelFormat: TPixelFormat);
var
  I: Integer;
  EmptyRect: TRect;
  PaintInfo: TVTPaintInfo;
begin
  inherited;
  if (poGridLines in PaintOptions) and (toShowHorzGridLines in TreeOptions.PaintOptions) and
    (GetLastVisible <> nil) then
  begin
    EmptyRect := GetDisplayRect(GetLastVisible,
      Header.Columns[Header.Columns.GetLastVisibleColumn].Index, False);
    EmptyRect := Rect(ClientRect.Left, EmptyRect.Bottom + DefaultNodeHeight,
      EmptyRect.Right, ClientRect.Bottom);
    ZeroMemory(@PaintInfo, SizeOf(PaintInfo));
    PaintInfo.Canvas := TargetCanvas;
    for I := 0 to ((EmptyRect.Bottom - EmptyRect.Top) div DefaultNodeHeight) do
    begin
      PaintInfo.Canvas.Font.Color := Colors.GridLineColor;
      DrawDottedHLine(PaintInfo, EmptyRect.Left, EmptyRect.Right,
        EmptyRect.Top + (I * DefaultNodeHeight));
    end;
  end;
end; 
```

这里是具有恒定和可变节点高度的结果：

![在此处输入图像描述](../Images/c641efdfc68b9f032f30cfd4067a2230.png)

上面屏幕截图中可见的故障（从左侧移动的线）只是虚线渲染的结果。如果您将`LineStyle`虚拟树视图上的属性设置为，`lsSolid`您将看到正确的结果。

# objective-c - sqlite3_column_double 的问题

> ID：11188510
> 
> 赞同：0
> 
> 时间：2012-06-25T11:29:27.777
> 
> 标签：objective-c, double

我有一种感觉，我在这里问了一个愚蠢的问题。我在从数据库中检索浮点值时遇到问题。

数据库中的字段（我设置为float还是double我都试过了）有值

-3.218364

使用 sqlite3_column_double 读取值时，它返回值

194586

我尝试了各种组合，使用 float、double、NSNumber、CLLocationDegrees 存储它，但一点运气都没有。

我在这里有多愚蠢，我在以前的应用程序中使用了小数，没有任何问题。但我无法弄清楚我在这里做错了什么。

所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:05:20.990

只要您绑定正确的值并使用正确的索引，SQLite 就会存储和检索正确的值。

例如

```
//prepare insert statement ...
sqlite3_bind_double(statement, 1, -3.218364); //Binding is 1 based

//.. retrieve
double dv = sqlite3_column_double(statement, 0); //Retrieving is 0 based 
```

你不应该得到另一个价值，除非

1.  您插入了错误的值
2.  您正在从错误的索引中检索

# php - Filedrop JSON 响应

> ID：11188519
> 
> 赞同：0
> 
> 时间：2012-06-25T11:30:02.133
> 
> 标签：php, javascript, jquery, json

我正在使用 jquery 的 filedrop 插件将图像上传到我网站上的 imgur。PHP 脚本返回`{"status":"Imgur code: cZ8gH"}`

我想将此作为警报返回，但我不知道该怎么做？

我目前有这个

```
 uploadFinished:function(i,file,response){
        $.data(file).addClass('done');
        var jsonobj = $.parseJSON(response);
        alert(jsonobj.status);
        // response is the JSON object that post_file.php returns
    } 
```

但它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:45:09.783

我不知道 filedrop 插件，但是当没有指定 dataType 时，jQuery 尝试使用响应的 MIME 类型来解析 ajax 响应。

所以响应可能已经被 jQuery 解析过了。

尝试使用

```
response.status 
```

为了帮助调试，最好使用带有控制台（或 Firebug Lite）的浏览器并调用

```
console.log 
```

而不是使用`alert`特别是因为`console`可以打印对象

感谢[@raina77ow](https://stackoverflow.com/users/1229023/raina77ow)

# gwt - 如何从 JsArray 中删除元素 ?

> ID：11188520
> 
> 赞同：0
> 
> 时间：2012-06-25T11:30:09.443
> 
> 标签：gwt, gwt2

我需要从中删除元素`com.google.gwt.core.client.JsArray`。我还需要清空 JsArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:22:25.920

在这里回答：[如何从 GWT 中的 jsarray 中删除值？](https://stackoverflow.com/questions/10395353/how-to-delete-value-from-jsarray-in-gwt)

> JavaScript 中的数组是稀疏的，因此您不能，例如，从中删除一个对象并将以下所有内容移至较低的索引（例如，您在 Java 中使用 List）；至少不是用一些删除方法。
> 
> 仅使用 GWT Java，您可以将特定索引处的值设置为 null，仅此而已。
> 
> 使用 JSNI，你可以删除它（几乎相当于将它设置为 undefined: delete myObjects [1](https://stackoverflow.com/questions/10395353/how-to-delete-value-from-jsarray-in-gwt)）或者你可以删除它： public static native remove(JsArray arr, int index, int count) / *-{
> arr.splice(index, count ); }-* /;

# html - 在 IE 中指定 href 中的 % 导致问题

> ID：11188522
> 
> 赞同：1
> 
> 时间：2012-06-25T11:30:37.103
> 
> 标签：html, anchor

作为一项业务需求，我希望`%`在 href.For 中使用锚标记。例如， `href="abc/a% bc.txt` `target="_blank"` 这在 Chrome 中有效，但在 IE 中无效。谁能帮我解决这个 IE 问题？任何帮助将不胜感激。

干杯，萨杰什·南比亚尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:36:11.040

使用[**转义**](https://developer.mozilla.org/en/DOM/window.escape)d 版本的 " `abc/a% bc.txt`" 字符串：

```
href="abc/a%25%20bc.txt" 
```

# c++ - C++ Builder XE 2 -- 如何在 TEdit 控件中显示变量数据？

> ID：11188524
> 
> 赞同：2
> 
> 时间：2012-06-25T11:30:38.883
> 
> 标签：c++, c++builder

我希望你能在这里帮助我，伙计们。我在过去 3 周内一直在做的是尝试显示 3 个变量的内容（1 个包含相应“-”或“+”号的 char 变量以及其他两个包含温度测量值的整数变量）我试图做 id 以在 TEdit 控件中显示这些变量的内容，例如：+ 26.3。就那么简单。

我尝试了几个功能都没有成功，让我告诉你：

（其中 temp_txtBox_Cond 是 TEdit 控件的名称）

```
temp_txtBox_Cond->Text=(L"%c %i. %i",temp_sign,temp_temp_int,temp_temp_dec,test_buf,n);

temp_txtBox_Cond->Text.printf(L"%c %i. %i",temp_sign,temp_temp_int,temp_temp_dec);

sprintf(test_buf,"%c %i.%i",temp_sign,temp_temp_int,temp_temp_dec);
temp_txtBox_Cond ->Text.sprintf(L"%c %i.%i",temp_sign,temp_temp_int,temp_temp_dec,test_buf);

temp_txtBox_Cond->Text=("%c %i. %i",temp_sign,temp_temp_int,temp_temp_dec);

temp_txtBox_Cond->Text = AnsiString(temp_sign,temp_temp_int,temp_temp_dec);

temp_txtBox_Cond->Text = (AnsiString(temp_sign)+AnsiString(temp_temp_int)+AnsiString    (temp_temp_dec));

String s(temp_sign);
String d(temp_temp_dec);
String i(temp_temp_int);

temp_txtBox_Cond->Text = s+" "+i+"."+d; 
```

没有成功。这非常令人沮丧。

请伙计们需要你的帮助。先谢谢了。

* * *

嗯，这有点奇怪，因为上面的大部分功能我得到的是一个`0`，`+0.0`或者`hq3Pˆ15PPhå`（这听起来像内存问题）。我来给你展示 ：

和 ：

```
temp_txtBox_Cond->Text = (L"%c %i.%i",temp_sign,temp_temp_int,temp_temp_dec,test_buf); 
```

我得到：`hq3Pˆ15PPhå`

和 ：

```
temp_txtBox_Cond->Text.printf(L"%c %i. %i",temp_sign,temp_temp_int,temp_temp_dec); 
```

我得到 Nada 文本框是空白的

和 ：

```
sprintf(test_buf,"%d. %d",temp_temp_int,temp_temp_dec);
temp_txtBox_Cond->Text =(test_buf,"%c %d. %d",temp_sign,temp_temp_int,temp_temp_dec);` 
```

我得到0。

和 ：

```
temp_txtBox_Cond->Text =("%c %d. %d",temp_sign,temp_temp_int,temp_temp_dec);` 
```

我也得到0。

与：

```
temp_txtBox_Cond->Text = AnsiString(temp_sign,temp_temp_int,temp_temp_dec): I got +0.0 
```

这些是错误。

嗨，雷米，

好没问题。这是我用来获取 temp_sig、temp_temp_int 和 temp_temp_dec 的代码：

```
 WINAPI _tWinMain(HINSTANCE, HINSTANCE, LPTSTR, int)
{    
ikor_msg_id = ikor_id_bld (app_priority, zone, dest_UCP, 0x20, 0x03);
wait_for_msg(h, 0x5200, 500, data);
if (data[0] == 1)
{
temp_sign = '+';
}
else if (data[0] == 0)
{
temp_sign = '-';
}
else
{
temp_sign = '?';
}

temp_temp_int = data[1];
temp_temp_int <<= 8;
temp_temp_int += data[2];
temp_temp_dec = temp_temp_int;
temp_temp_int /= 10;
temp_temp_dec -= (temp_temp_int * 10);
} 
```

在这里我试图显示数据：

```
void __fastcall TForm1::temp_txtBox_CondChange(TObject *Sender )
{
unsigned long ikor_msg_id = 0;
long ikor_id_bld( long p_temp, long z_temp, long d_temp, int m_temp, int s_temp);
int wait_for_msg(CANHANDLE handle,int id,int timeout,unsigned char *data);
CANHANDLE h;
unsigned char data [8];

/***Here is where i tried all the attempts that I posted ****/

} 
```

我在标题中声明它们的变量：

```
#ifndef __Variables_Cond__
#define __Variables_Cond__

#ifdef __cplusplus
extern "C" {
#endif

unsigned int temp_temp_int;
unsigned int temp_temp_dec;
unsigned char temp_sign;

#ifdef __cplusplus 
```

} ＃万一

```
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:35:40.070

我建议如下：

```
 TCHAR temp_buf[256];
    wsprintf(temp_buf, _T("%c %d.%d"), temp_sign, temp_temp_int, temp_temp_dec);

    temp_txtBox_Cond->Text = temp_buf; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:34:04.077

您得到了错误的结果，因为您的尝试对于您正在尝试的内容是错误的，并且其中大多数源于相同的根本问题 - 您在滥用`,`运算符。在表达式而不是参数列表中，`,`运算符执行两边的运算，运算符的结果是右手运算的结果。您`,`在表达式中将多个操作链接在一起，并期望它们产生实际上没有的结果。

> temp_txtBox_Cond->Text = (L"%c %i.%i",temp_sign,temp_temp_int,temp_temp_dec,test_buf);

这实际上与以下内容相同：

```
L"%c %i.%i"; // no-op
temp_sign; // no-op
temp_temp_int; // no-op
temp_temp_dec; // no-op
temp_txtBox_Cond->Text = test_buf; 
```

你得到`hq3Pˆ15PPhå`因为`test_buf`没有事先初始化的内容。

> temp_txtBox_Cond->Text.printf(L"%c %i.%i",temp_sign,temp_temp_int,temp_temp_dec);

这实际上与以下内容相同：

```
String temp = temp_txtBox_Cond->Text;
L"%c %i. %i"; // no-op
temp_sign; // no-op
temp_temp_int; // no-op
temp_temp_dec; // no-op
temp.printf(temp_temp_dec); 
```

您得到一个空白结果，因为您根本没有为该`Text`属性分配任何内容。您正在读取该`Text`属性，然后调用它返回`printf()`的 temp `String`，但是之后您不会将其分配`String`回该`Text`属性。

> sprintf(test_buf,"%d.%d",temp_temp_int,temp_temp_dec);
> temp_txtBox_Cond->Text =(test_buf,"%c %d.%d",temp_sign,temp_temp_int,temp_temp_dec);

这实际上与以下内容相同：

```
sprintf(test_buf, "%d. %d", temp_temp_int, temp_temp_dec);     
test_buf; // no-op
"%c %d. %d"; // no-op
temp_sign; // no-op
temp_temp_int; // no-op
temp_txtBox_Cond->Text = temp_temp_dec; 
```

你进入`"0"`了`Text`因为`temp_temp_dec`是 0 开始（尽管你认为你在调试器中看到了什么）。

> temp_txtBox_Cond->Text =("%c %d.%d",temp_sign,temp_temp_int,temp_temp_dec);`

这实际上与以下内容相同：

```
"%c %d. %d"; // no-op
temp_sign; // no-op
temp_temp_int; // no-op
temp_txtBox_Cond->Text = temp_temp_dec; 
```

结果与上述相同。

> temp_txtBox_Cond->Text = AnsiString(temp_sign,temp_temp_int,temp_temp_dec)

这实际上与以下内容相同：

```
temp_sign; // no-op
temp_temp_int; // no-op
temp_txtBox_Cond->Text = AnsiString(temp_temp_dec); 
```

这将再次导致`"0"`。您无法使用`"+0.0"`该`Text`代码。

综上所述，请改用其中之一：

```
Char temp_sign = L'+'; // note: upper 'C'har = "%c"
int temp_temp_int = 26;
int temp_temp_dec = 3;
temp_txtBox_Cond->Text = String().sprintf(L"%c %i.%i", temp_sign, temp_temp_int, temp_temp_dec); 
```

.

```
char temp_sign = '+'; // note: lower 'c'har = "%hc"
int temp_temp_int = 26;
int temp_temp_dec = 3;
temp_txtBox_Cond->Text = String().sprintf(L"%hc %i.%i", temp_sign, temp_temp_int, temp_temp_dec); 
```

.

```
Char temp_sign = L'+'; // or lower-case 'c'har, doesn't matter
int temp_temp_int = 26;
int temp_temp_dec = 3;
temp_txtBox_Cond->Text = Format(L"%s %i.%i", ARRAY_OF_CONST(( temp_sign, temp_temp_int, temp_temp_dec )) ); 
```

.

```
Char temp_sign = L'+'; // note: upper 'C'har = "%C"
int temp_temp_int = 26;
int temp_temp_dec = 3;
char test_buf[24];
sprintf(test_buf, "%C %i.%i", temp_sign, temp_temp_int, temp_temp_dec); 
temp_txtBox_Cond->Text = test_buf; 
```

.

```
char temp_sign = '+'; // note: lower 'c'har = "%c"
int temp_temp_int = 26;
int temp_temp_dec = 3;
char test_buf[24];
sprintf(test_buf, "%c %i.%i", temp_sign, temp_temp_int, temp_temp_dec); 
temp_txtBox_Cond->Text = test_buf; 
```

.

```
Char temp_sign = L'+'; // or lower 'c'char, doesn't matter
int temp_temp_int = 26;
int temp_temp_dec = 3;
temp_txtBox_Cond->Text = String(temp_sign) + L" " + String(temp_temp_int) + L"." + String(temp_temp_dec); 
```

# java - java - 如何从列表中快速有效地在java中制作子集或powerSet？

> ID：11188525
> 
> 赞同：0
> 
> 时间：2012-06-25T11:30:40.400
> 
> 标签：java, memory-leaks, arraylist, subset, powerset

我遇到了一个从 arrayList 制作子集或 powersets 的问题，其中可能是 70 或 80 个或更多 String 元素，然后进一步处理这些子集（或 powersets）。例如，我有一些 arrayLists 具有不重复的字符串作为元素，如下所示（字符串实际上有多个字符）：

```
List<String> list = new ArrayList<>();
list.add("a");
list.add("c");
list.add("g");
list.add("n");
list.add("f");
and so on... 
```

然后我需要让子集（或 powersets）包含第一个元素。例如：`{a,g}, {a,b}, {a,n,f}, {a,g,n,f}....`

我已经完成了这项工作，方法是获取除第一个之外的列表元素的 powerset，然后将第一个元素与这些子集相加。但这适用于像 7 或 8 这样的少数元素，但如果列表增长则无法工作。是否需要像我为这份工作做的那样做一个 powerSet 算法？如果没有，那么我怎样才能得到预期的结果。我认为存在内存泄漏问题。因为我需要存储这些结果以进行进一步处理。

我按照以下链接的一些建议完成了这项工作：

[在Java中获取一个集合](https://stackoverflow.com/questions/1670862/obtaining-powerset-of-a-set-in-java)
[的幂集计算一组数字的所有子集](https://stackoverflow.com/questions/4640034/calculating-all-of-the-subsets-of-a-set-of-numbers)
[如何从arrayList对象生成所有可能的幂集（或子集）？](https://stackoverflow.com/questions/11021594/how-to-make-all-possible-power-setor-subset-from-arraylist-objects)

但是对于大型列表来说，这些需要花费很多时间并且最终无法获得结果，因为我的 netbeans IDE 被绞死了！

我需要一些与此方案相关的建议或示例代码。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:34:12.913

由于幂集的基数是`2^n`开始`n`集中元素的数量，我会说你不会计算一组 2^70 个元素。

我的建议是动态构建电源组的元素并随时处理它们，因此您不需要存储所有这些元素。

# android - 如何提供替代布局资源

> ID：11188531
> 
> 赞同：1
> 
> 时间：2012-06-25T11:30:54.293
> 
> 标签：android, android-layout

我有一个要求，我必须为`layout`我的应用程序提供不同的资源。

这个应用程序应该在许多屏幕尺寸上运行（一如既往），我希望能够尽可能精确地解决其中的许多问题。

截至目前，我的目标是以下屏幕尺寸：

*   1280x800
*   800x480
*   800x600
*   1024x600

为此，我创建了一个这样的布局结构：

![布局结构](../Images/dcba6d540a040d95e7f503dcd19c03cb.png)

在 XML 中，我声明了以下支持：

```
<supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"
              android:anyDensity="true"/> 
```

我正在模拟器中进行测试，问题是：它接受`layout-w480dp-land`xml，但是当我进入纵向模式时，它会退回到默认布局。

知道我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:30:11.290

正如我在`Android`聊天室中所说，`Pixels`并且`Density-independent pixel (dp)`有所不同：

> 与密度无关的像素 (dp)
> 
> 定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

当您有一个名为 layout-w480dp 的文件夹时，您要说的是：

> “只要宽度尺寸等于或大于 480 **dp** ，请使用此布局文件夹。”

现在，如果您的设备具有 240dpi 且屏幕尺寸为 480x800 像素（这很可能），那么您实际上只有**320dp**可玩 - 解释了为什么您的文件夹现在被跳过了。

> dp = 像素 / (dpi / 160)

320dp = 480 像素 / (240dpi / 160)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:30:36.803

我可以向您推荐 Reto Meier 的 Google I/O 2011 会议之一：

> 在支持旧版本的同时支持最新设备的一种方法是使用“shim”活动来确定设备运行的平台。它没有用户界面。Reto 显示了一些用于根据系统版本启动不同活动的代码。这是一个并行活动模式......

[Link to session](http://www.google.com/events/io/2011/sessions/android-protips-advanced-topics-for-expert-android-app-developers.html) - 他的演讲也可以下载，平行模式原理从幻灯片10开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:37:25.390

我听说过以下布局资源：

```
res/layout-sw600dp
res/layout-sw720dp 
```

不确定您的问题，但我还没有听说过**w480dp**，可能是**sw480dp**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:44:12.070

采用

```
ldpi    Resources for low-density (ldpi) screens (~120dpi).
mdpi    Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.)
hdpi    Resources for high-density (hdpi) screens (~240dpi).
xhdpi   Resources for extra high-density (xhdpi) screens (~320dpi). 
```

而不是 w480dp

并遵循下表。 [安卓文档](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:51:48.190

好吧，我从来没有按照你的方式做，但我所做的是在运行时测量屏幕大小和密度，并在开始时在 onCreate() 中应用布局。这是供您参考的代码，可能会对您有所帮助：

```
 /**
     * To acknowledge the density of the application so as to use the layout
     * according to the phone density
     */
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    switch(metrics.densityDpi){
         case DisplayMetrics.DENSITY_LOW:
             setContentView(R.layout.x);
                    break;
         case DisplayMetrics.DENSITY_MEDIUM:
             setContentView(R.layout.y);
                     break;
         case DisplayMetrics.DENSITY_HIGH:
             setContentView(R.layout.z);
                     break; 
```

# regex - 正则表达式中的可变数量的匹配/反向引用？

> ID：11188532
> 
> 赞同：0
> 
> 时间：2012-06-25T11:31:05.970
> 
> 标签：regex, sublimetext, boost-regex

我最近花了一些时间将一些 SCSS 代码转换为 Stylus，我的正则表达式步骤之一是去除`$`变量名称中的字符，同时将这些名称格式化为驼峰式而不是连字符式。

例如，`$long-hyphenated-variable-name: value;`成为但像没有成为的`longHyphenatedVariableName = value;`参数名称。`text-size``textSize`

无论如何，我的正则表达式技能非常有限，所以我只能弄清楚如何通过一系列传递来完成它，首先寻找可能有多达 6 个部分（5 个连字符）的变量名，然后在后续传递中寻找较短的变量名并将字符串的每个部分作为单独的反向引用传递，这样我就可以将第一个字母大写。但我想知道是否有更好的方法来做到这一点：即有没有办法在字符串中获取可变数量的子字符串匹配并根据你得到的数量提供反向引用？我只是找不到这方面的任何信息。

这是我的代码，分六个步骤，如果可能的话，我想将其浓缩为一个（我正在考虑编写一个多步骤的正则表达式例程，可以将 SCSS 转换为 Stylus 以供将来使用）。在每种情况下，搜索表达式后跟替换表达式：

```
\$(\S*?)\-(\S*?)\-(\S*?)\-(\S*?)\-(\S*?)\-(.)
$1\u$2\u$3\u$4\u$5\u$6

\$(\S*?)\-(\S*?)\-(\S*?)\-(\S*?)\-(.)
$1\u$2\u$3\u$4\u$5

\$(\S*?)\-(\S*?)\-(\S*?)\-(.)
$1\u$2\u$3\u$4

\$(\S*?)\-(\S*?)\-(.)
$1\u$2\u$3

\$(\S*?)\-(.)
$1\u$2

\$(.)
$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:34:03.950

如果您使用 C#，那么您很幸运，因为它是少数支持子表达式捕获的语言之一（如果不是唯一的话）

我对其他语言感兴趣，所以如果您的语言支持，请告诉我们

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture(v=vs.110](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture(v=vs.110) )

.NET API 可以看如下

```
 Matches
     Groups (most regex engines stop here)
         Captures (unique for .NET) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:36:09.570

```
while ($subject =~ m/(\$\S*?)-/g) {
    $subject =~ s/(\$\S*?)-/$1/g;
} 
```

**更新**

*你可以使用这个模式*

```
(?im)(\$(?![a-z-]+\s*:\s*\d+)\S*?)- 
```

s/b 替换为无。

在编辑器中，您可以使用多个查找替换来获得所需的输出，或者可以创建一个简单的递归宏来实现逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:42:57.220

有全局替换，它们与匹配的数量无关。他们可能无法为问题提供一般解决方案，但`sed`您可以这样做：

```
$ sample='$test-size: 12; $long-hyphenated-variable-name: value;'
$ echo $sample | sed 's/-\(\w\)/\U\1/g; s/\$\(\w\+\):/\1 =/g'
testSize = 12; longHyphenatedVariableName = value; 
```

# javascript - Linkedin 连接搜索每个连接的第一个职位

> ID：11188534
> 
> 赞同：0
> 
> 时间：2012-06-25T11:31:14.720
> 
> 标签：javascript, api, linkedin

我正在尝试从linkedin 获取我的联系人的所有当前职位。我设法做到了，但只能通过请求所有职位然后抓住第一个职位。那是低效的。我正在做类似的事情：

```
function onLinkedInAuth() {
  IN.API.Profile("me")
    .fields(["firstName", "lastName", "positions:(title)"])
    .result(function(result) { ($"#profile").html(JSON.stringify(result))} );
} 
```

我知道我可以添加一个参数并获得一个计数让我们说 5 (.params({"count": 10...)) 但这似乎只适用于连接而不是连接的标题......我试过“职位：（标题）[0]”，但它不起作用。

有什么想法吗？这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:46:13.230

要获取当前工作，您还需要请求该`is-current` [字段](https://developer.linkedin.com/documents/profile-fields#positions)。然后简单地遍历返回的`positions`集合，检查每个位置的 is-current 值。你的电话是：

```
function onLinkedInAuth() {
  IN.API.Profile("me")
    .fields(["firstName", "lastName", "positions:(title,isCurrent)"])
    .result(function(result) { ($"#profile").html(JSON.stringify(result))} );
} 
```

# android - Android：无法启动活动。ClassCastException：android.Widget.Button

> ID：11188539
> 
> 赞同：1
> 
> 时间：2012-06-25T11:31:42.820
> 
> 标签：android, exception

当我启动我的应用程序时，我得到了异常，尽管没有语法错误并且 ids 和变量名匹配。我尝试重建 R 文件，清理项目，重新启动模拟器 Eclipse，但没有任何效果。只有一个按钮，即使注释包含该按钮的代码也无法解决。我是初学者，所以请耐心等待:)

这是我的主要活动：

```
package com.android.hangman;

import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Random;

import android.app.Activity;
import android.content.res.AssetManager;
import android.os.Bundle;
import android.text.InputFilter.LengthFilter;
import android.view.View;
import android.widget.*;

public class Hangman extends Activity {

    TextView word, tries, cuvant, incercari, letter;
    EditText litera;
    Button newG;
    int valIncercari = 5;
    ArrayList<String> cuvinte = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        word = (TextView)findViewById(R.id.word);
        tries = (TextView)findViewById(R.id.tries);
        cuvant = (TextView)findViewById(R.id.cuvant);
        incercari = (TextView)findViewById(R.id.incercari);
        letter = (TextView)findViewById(R.id.letter);
        newG = (Button)findViewById(R.id.newG);
        litera = (EditText)findViewById(R.id.newG);

        AssetManager am = this.getAssets();
        try {
            InputStream is = am.open("cuvinte.txt");
            InputStreamReader inputStreamReader = new InputStreamReader(is);
            BufferedReader b = new BufferedReader(inputStreamReader);
            String rand;
            while((rand=b.readLine())!=null){
                cuvinte.add(rand);
            }
        } catch (IOException e) {
            Toast.makeText(this, "No words file", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }

    }

    public void newGame(View view){
        Random rand = new Random();
        String stringCuvant = cuvinte.get(rand.nextInt(cuvinte.size()));
        cuvant.setText("");
        for(int i = 0; i< stringCuvant.length(); i++){
            cuvant.append("_ ");
        }
        incercari.setText(valIncercari);
    }
} 
```

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
            <TextView 
                android:id="@+id/word"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Word"/>
            <TextView 
                android:id="@+id/tries"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Tries"/>

    </LinearLayout>

        <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
            <TextView 
                android:id="@+id/cuvant"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""/>
            <TextView 
                android:id="@+id/incercari"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="5"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
            <TextView 
                android:id="@+id/letter"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Letter"/>
            <EditText 
                android:id="@+id/litera"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
    </LinearLayout>
        <Button 
            android:id="@+id/newG"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="NEW GAME"
            android:onClick="newGame"
            android:gravity="bottom"/>
</LinearLayout> 
```

还有一个例外：

```
06-25 11:22:35.402: E/AndroidRuntime(337): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.hangman/com.android.hangman.Hangman}: java.lang.ClassCastException: android.widget.Button 
```

预先感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:34:11.960

```
litera = (EditText)findViewById(R.id.newG); 
```

您正在将按钮投射到 Edittext

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T11:36:36.497

```
litera = (EditText)findViewById(R.id.newG); 
```

此行正在转换**EditText**而 id 用于**Button**，您应该将其更改为：

```
litera = (EditText)findViewById(R.id.litera); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:33:32.287

```
 id  newG is `twice` 

     newG = (Button)findViewById(R.id.newG);
    litera = (EditText)findViewById(R.id.newG); 
```

应该

```
 litera = (EditText)findViewById(R.id.litera); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T11:34:32.880

```
litera = (EditText)findViewById(R.id.newG); 
```

应改为

```
litera = (EditText)findViewById(R.id.litera); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T12:09:19.367

当您尝试将 Button 转换为 EditText 时，您会收到 ClassCastException，这显然是不可能的。

因此，将您的代码更改为

```
litera = (EditText)findViewById(R.id.litera); 
```

# php - 如何在 Symfony 中生成没有数据库的后端模块？

> ID：11188542
> 
> 赞同：0
> 
> 时间：2012-06-25T11:31:48.010
> 
> 标签：php, symfony-1.4

我有一个后端模块，它是使用带有突击队的数据库构建的（例如）

> php symfony propel:generate-admin backend JobeetJob --module=job

现在我想生成一个没有数据库的模块，但只是使用 sql 请求例如显示结果：

```
select v1."Venue", 
( select count(*) 
    from "Events" e1 where e1."VenueNo" = v1."VenueNo"
) as "EventsCount"
from "venues" v1
order by "EventsCount" desc 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:53:04.647

您可以根据需要使用此任务生成一个可以自定义的模块，即添加您的操作：

```
php symfony generate:module  application module 
```

您可以在[symfony 参考书：任务中找到有关此任务的更多详细信息](http://www.symfony-project.org/reference/1_4/en/16-Tasks)

# oop - 返回接口时返回更少/更具体的接口的 OO 最佳实践

> ID：11188543
> 
> 赞同：5
> 
> 时间：2012-06-25T11:31:56.680
> 
> 标签：oop

那个标题有点棘手......当我编写一个界面时，通常最好的做法是尽可能返回最具体的界面，还是最少？

例如，假设

```
interface List2<T> extends List<T>
{
    List<T> getRange(int startIndex, int endIndex);
} 
```

改成这样会不会更好

```
interface List2<T> extends List<T>
{
    List2<T> getRange(int startIndex, int endIndex);
} 
```

以便调用者可以调用`getRange`他们的结果，同时仍然以多态方式匹配 List？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:40:02.023

如果代码变化很大（通常仍在开发中），我会返回最具体的接口，并在进一步需要时使其更广泛。通过这种方式，您鼓励不要过于频繁地使用界面，并且如果您决定稍后删除或彻底更改界面，则更改内容会更容易。

如果代码是稳定的，或者是要发布的 API 的一部分，我会返回最广泛的接口，以使其对最大的受众可用。

# core-data - 将 coredata 与 restkit 同步

> ID：11188553
> 
> 赞同：0
> 
> 时间：2012-06-25T11:32:20.573
> 
> 标签：core-data, restkit

Ti 有一个带有 coredata 的现成应用程序。现在我需要将我的数据与 restfull 网络服务同步。我尝试了 restkit 框架，但在第一个示例中，restkit make 是自己的核心数据堆栈，我被迫使用“Active Record”通过 findAll: 或 findAllWithPredicate: 等方法查找我的对象。

有一种方法可以重用我的代码并将restkit仅用于同步过程吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:30:32.360

RestKit 将与您现有的核心数据模型一起使用。您根本不会被迫使用活动记录添加 - 随意忽略它。

至于你的问题。在您尝试使用 RestKit 修复所有问题之前。我建议您准确了解您要通过此“同步过程”实现的目标。事实上，RestKit 并没有神奇地同步任何东西（尽管某处有那个分支......）。如果你不先了解同步，你将无法很好地开发这个系统。

# c# - 在 c# 中使用结构安全的多线程

> ID：11188555
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:32:30.090
> 
> 标签：c#, multithreading

我在 c# 中有一个类 ReceiveFaxPrintHelper，我将其实现为 Sealed。我也将其实现为单例。我在这个类中定义了一个方法 PrintStoredFaxes，我使用锁来保护它。

我的问题是，如果我将 ReceiveFaxPrintHelper 从类更改为结构，这会影响我的线程吗？Ndepend 建议我将其更改为结构而不是类。

```
public sealed class ReceiveFaxPrintHelper
{
    private static AutoResetEvent mJobCompleted = new AutoResetEvent(false);
    private bool mPrintStoredFaxesInProgress = false;
    private object mLockPrint = new object();
    private const string mClassName = "ReceiveFaxPrintHelper";

   /// <summary>
    /// Function that prints the Stored Faxes
    /// </summary>
    /// <param name="o">completing the delegate message signature</param>
    public void PrintStoredFaxes(object o)
    {
        lock (mLockPrint)
        { 
```

我这样使用：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(ReceiveFaxPrintHelper.Instance.PrintStoredFaxes)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:55:34.753

NDepend 只是在这里误导你。单例不应该是结构。

但是，不存在专门破坏锁定的此类错误的风险。 `mLockPrint`不是结构，因此复制它所包含的结构*不会*导致其重复。`mLockPrint`如果单例行为是针对锁而不是针对整个结构的，您也可以将其设为静态。

此外，只要您使用`lock`语法，就可以相对安全地防止意外锁定结构；那不会编译。`Monitor.Enter`语法比较复杂，因为它会编译，然后导致锁定的静默消失（更准确地说，盒装副本的无用锁定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:55:47.210

它不会破坏您的多线程......但您应该更详细地查看实际差异：

[http://msdn.microsoft.com/en-us/library/ms173109](http://msdn.microsoft.com/en-us/library/ms173109)

# zend-framework - 是否可以使用 Zend 库上传到 youtube，但延迟列出它，直到我指定的时间？

> ID：11188557
> 
> 赞同：0
> 
> 时间：2012-06-25T11:32:38.877
> 
> 标签：zend-framework, youtube, youtube-api

我希望能够使用 Zend 库将视频上传到 youtube，但我希望对所有人隐藏视频（例如不公开），并在我给出的时间显示视频。

例如，我会在 6 月 26 日上传一个视频，但我希望它在 6 月 27 日下午 3:00 之前保持不公开状态。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T11:34:59.493

在将视频发送到 YouTube 服务器之前，可以通过在 VideoEntry 对象上设置选项来将视频上传为私有或不公开。如果你使用 Zend 框架，你会这样做：

```
// Set private
$videoEntry->setVideoPrivate();

// Or, set unlisted
$unlisted = new Zend_Gdata_App_Extension_Element( 'yt:accessControl', 'yt',
                                'http://gdata.youtube.com/schemas/2007', '' );
$unlisted->setExtensionAttributes(array(
    array('namespaceUri' => '', 'name' => 'action', 'value' => 'list'),
    array('namespaceUri' => '', 'name' => 'permission', 'value' => 'denied')
));
$videoEntry->setExtensionElements(array($unlisted)); 
```

虽然不可能让 YouTube 在某个日期/时间提供视频，但您可以自己更新设置（使用 cron 或类似方法在正确的时间触发它），如下所示：

```
// get update-able VideoEntry
$videoEntry = $yt->getFullVideoEntry( 'videoID' );

// Set public
$videoEntry->setVideoPublic();

// Set listed
$listed = new Zend_Gdata_App_Extension_Element( 'yt:accessControl', 'yt',
                                'http://gdata.youtube.com/schemas/2007', '' );
$listed->setExtensionAttributes(array(
    array('namespaceUri' => '', 'name' => 'action', 'value' => 'list'),
    array('namespaceUri' => '', 'name' => 'permission', 'value' => 'allowed')
));
$videoEntry->setExtensionElements(array($unlisted));

// Send update
$putUrl = $videoEntry->getEditLink()->getHref();
$yt->updateEntry($videoEntry, $putUrl); 
```

# c# - 下载在 ASP .NET C# 中写入响应流的文件

> ID：11188558
> 
> 赞同：1
> 
> 时间：2012-06-25T11:32:42.000
> 
> 标签：c#, asp.net, .net, stream, response

目标： - 服务器端：在验证凭据后将文件写入响应流。换句话说，不能公开访问该文件。- 客户端：从[http://xyz.com?credentials=abc下载此文件](http://xyz.com?credentials=abc)

到目前为止，ASPX 页面做了以下事情：

*   验证凭据
*   this.Response.ContentType = "应用程序/八位字节流";
*   this.Response.BinaryWrite(binaryReader.ReadBytes(1024));

从 WinForms 应用程序下载此文件数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:35:12.840

最简单的方法是使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)：

```
WebClient wc = new WebClient();
wc.DownloadFile(url, filename); 
```

（要么在 UI 线程中启动它，要么使用异步版本。你不希望你的 UI 线程在下载时阻塞。）

# decimal - 小数位通过十六进制转换为十进制？（Python）

> ID：11188560
> 
> 赞同：0
> 
> 时间：2012-06-25T11:32:58.200
> 
> 标签：decimal, python, hex

抱歉标题混淆了，但我不知道该怎么称呼它...

因此，在 python 中，我正在通过插件（intelhex）读取二进制文件。

这让我通过它获得每个字节循环的值

```
for x in range(start_addr,end_addr):
    print ih[x] 
```

给出：

```
1
79
60
246 
```

这与以下内容相同：

```
01
4F
3C
F6 
```

我想要十进制值`014F3CF6 = 21970166`

将小数转换为十六进制然后连接十六进制值并再次转换为十进制的最佳方法是什么？最好是最容易理解的（pythonic）和/或最有效的

编辑：澄清我想要什么：

我想将 [1,79,60,246] 转换为 21970166

（因为列表与`[01,4F,3C,F6] which is 014F3CF6 which is 21970166)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:36:41.097

在 python 中，整数不是“十进制”或“十六进制”。它们是数字的字符串表示形式。要将十进制字符串转换为 int，请使用`int('12345', 10)`; 要转换十六进制字符串，请使用`int('1234ABC', 16)`. 要将整数转换为十进制字符串表示，请使用`str(12345)`, 转换为十六进制字符串，请使用`hex(12345)`.

此外，您应该看到该模块`struct`并考虑使用它将二进制数据转换为整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T12:35:13.940

看着`intelhex`，我想你正在做类似的事情

```
import intelhex
ih = intelhex.IntelHex('myfile.hex') 
```

而不是一次读取一个字节，例如

```
>>> ih[0x01c200]
224
>>> ih[0x01c201]
165
>>> ih[0x01c202]
230
>>> ih[0x01c203]
246 
```

你可以做

```
s = ih.gets(0x01c200, 4)      # "\xe0\xa5\xe6\xf6" 
```

然后转换为 int like

```
import struct
i = struct.unpack('>I', s)   # (3768968950L,) 
```

然后可以将其打包为

```
def getInt(ih, addr):
    return struct.unpack('>I', ih.gets(addr, 4))[0]

getInt(ih, 0x01c200)    # -> 3768968950 
```

**编辑：**

请注意，它`ih[undefined_addr]`返回 255，而`ih.gets(undefined_addr, 1)`引发 NotEnoughDataError。事实上，`ih.gets(addr, n)`如果 [addr:addr+n] 中的任何字节未定义，则抛出 NotEnoughDataError。

如果您执行 ih.dump('dumpfile.txt')，任何未在 .hex 文件中定义的字节都显示为 '--'；这可能会使调试变得更加容易。我建议你做一个文件转储，在文本编辑器中提取它，然后查看字节 0x20、0x21、0x22、0x23。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:35:43.713

我会做类似的事情

```
s = 0
for i in bytes:
    s = s * 256 + i
print s 
```

此外，79 是`0x4F`，不是`0xF4`。`0xF4`是 244。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:38:53.890

您可以使用[`int`](http://docs.python.org/library/functions.html#int)：

```
>>> int('014F3CEC', 16)
21970156 
```

这意味着您应该将字符串连接到一个包含十六进制数字的字符串。你可以这样做：

```
>>> ih = [1, 79, 60, 236]
>>> ih_s = [hex(i)[2:].zfill(2) for i in ih]
>>> ih_s
['01', '4f', '3c', 'ec']
>>> hex_string = ''.join(ih_s)
>>> hex_string
'014f3cec' 
```

# php - 数组到对象

> ID：11188563
> 
> 赞同：1
> 
> 时间：2012-06-25T11:33:05.137
> 
> 标签：php, arrays, object

我写了一个自定义框架。它使用 .ini 类型的配置文件。

说，如果我在 .ini 文件中分配了一个常量

```
[production]
db.mongo.hostName = localhost 
```

我目前正在通过`parse_ini_file()`函数解析这个。

结果将是

```
$config[production][db.mongo.hostname] = "localhost"; 
```

现在我想把这个数组变成一个对象，它应该像

```
$config->db->mongo->hostname 
```

我尝试用 爆炸它`'.'`，但后来我坚持将它形成为上面的迭代对象。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:00:07.153

以下是一个基本类，它具有一个函数来导入您指定的 ini 数组：

```
/**
 * Config "Class"
 * @link http://stackoverflow.com/q/11188563/367456
 */
class Config
{
    public function __construct(array $array = array())
    {
        $this->importIniArray($array);
    }

    public function importIniArray(array $array)
    {
        foreach ($array as $key => $value) {
            $rv = &$this;
            foreach (explode('.', $key) as $pk) {
                isset($rv->$pk) || $rv->$pk = new stdClass;
                $rv = &$rv->$pk;
            }
            $rv = $value;
        }
    }
} 
```

我只添加了该`__construct`函数，因为您重复使用了该变量。用法：

```
$config = parse_ini_file($path);

$config = new Config($config['production']);

print_r($config); 
```

示例输出：

```
Config Object
(
    [db] => stdClass Object
        (
            [mongo] => stdClass Object
                (
                    [hostname] => localhost
                    [user] => root
                )

        )

) 
```

* * *

**编辑：**您还可以解决在访问时定位数组成员的问题。我编译了一个行为相似的小例子，它没有爆炸。我之所以称之为它，`DynConfig`是因为您会看到它是动态的（或魔术的）：

```
$config = new DynConfig($config['production']);
var_dump($config);
echo $config->db->mongo->hostname; # localhost 
```

这`var_dump`表明该数组只是在内部保留：

```
object(DynConfig)#1 (1) {
  ["array":"DynConfig":private]=>
  array(2) {
    ["db.mongo.hostname"]=>
    string(9) "localhost"
    ["db.mongo.user"]=>
    string(4) "root"
  }
} 
```

那么这是如何工作的呢？每次访问属性时，要么存在键，要么*扩展*前缀并返回相同的对象。那是在`__get`函数中：

```
/**
 * Config "Class"
 * @link http://stackoverflow.com/q/11188563/367456
 */
class DynConfig
{
    private $array;

    public function __construct($array)
    {
        $this->array = $array;
    }

    public function __get($name)
    {
        static $prefix = '';
        $k = $prefix .= $name;
        if (isset($this->array[$k])) {
            $prefix = '';
            return $this->array[$k];
        }
        $prefix .= '.';
        return $this;
    }
} 
```

然而，这是实验性质的。第一个建议更直接，也更容易处理。请记住，您的配置对象应该非常简单，它只需要存储一些值即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:00:33.083

您可以按以下方式完成

```
function assignTo($obj,$keys,$value)
{
        if(count($keys) > 1)   
        {                      
                $h = array_shift($keys);        
                $obj->$h = $obj->$h ? $obj->$h : new stdClass();
                assignTo($obj->$h,$keys,$value);
        }                      
        else                   
        {                      
                $obj->$keys[0] = $value;        
        }
}
$config['production']['db.mongo.hostname'] = "localhost";
$config['production']['db.mongo.password'] = "1234567";
$config['production']['version'] = "1.0";

$object = new stdClass();      
foreach($config['production'] as $key=>$value)
{
        assignTo($object,explode('.',$key),$value);
}                              
print_r($object); 
```

这将输出：

```
stdClass Object
(
    [db] => stdClass Object
        (
            [mongo] => stdClass Object
                (
                    [hostname] => localhost
                    [password] => 1234567
                )

        )

    [version] => 1.0
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:20:09.607

```
// assuming $var is a multidimensional array
$obj = json_decode (json_encode ($var), FALSE); 
```

# android - 将 Android 中的 Facebook 聊天与 Asmack API 集成

> ID：11188577
> 
> 赞同：2
> 
> 时间：2012-06-25T11:34:01.837
> 
> 标签：android, facebook, xmpp, facebook-chat, asmack

[我尝试按照此博客](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)中的建议实施聊天支持。

目前，我正在使用以下代码来实现聊天界面。

***Java 代码***

**TestChatActivity.java**

```
import java.util.ArrayList;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.ConnectionConfiguration.SecurityMode;
import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.filter.PacketFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Packet;
import org.jivesoftware.smack.packet.Presence;
import org.jivesoftware.smack.util.StringUtils;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class TestChatActivity extends Activity implements OnClickListener {

private ArrayList<String> messages = new ArrayList();
private Handler mHandler = new Handler();
private EditText mRecipient;
private EditText mSendText;
private ListView mList;
private XMPPConnection mConnection;
private String mHost, mPort, mService, mUsername, mPassword;
private ConnectionConfiguration mConnConfig;
private String TAG;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    initLayout();
    // initGtalk();
    initFB();

    // Create a connection
    createConnection();

    // login
    loginToXMPP();

}

void initLayout() {
    Log.i("XMPPClient", "onCreate called");
    setContentView(R.layout.main);

    mRecipient = (EditText) this.findViewById(R.id.recipient);
    Log.i("XMPPClient", "mRecipient = " + mRecipient);
    mSendText = (EditText) this.findViewById(R.id.sendText);
    Log.i("XMPPClient", "mSendText = " + mSendText);
    mList = (ListView) this.findViewById(R.id.listMessages);
    Log.i("XMPPClient", "mList = " + mList);
    // Set a listener to send a chat text message
    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(this);

    setListAdapter();
}

void initGtalk() {
    mHost = "talk.google.com";
    mPort = "5222";
    mService = "gmail";
    mUsername = "abc@gmail.com";
    mPassword = "password";
    // Set Default recipients for Gtalk
    mRecipient.setText("default_buddy@gmail.com");
}

void initFB() {
    mHost = "chat.facebook.com";
    mPort = "5222";
    mService = "xmpp";
    mUsername = "userid@chat.facebook.com";
    mPassword = "password";
    // Set Default recipients for FB
    mRecipient.setText("new_userid@chat.facebook.com");
}

void createConnection() {
    mConnConfig = new ConnectionConfiguration(mHost,
            Integer.parseInt(mPort), mService);
    mConnConfig.setSecurityMode(SecurityMode.required);
    mConnConfig.setSASLAuthenticationEnabled(true);
    mConnection = new XMPPConnection(mConnConfig);

    try {
        mConnection.connect();
        Log.i("XMPPClient",
                "[SettingsDialog] Connected to " + mConnection.getHost());
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to connect to "
                + mConnection.getHost());
        Log.e("XMPPClient", ex.toString());
        setConnection(null);
    }
}

void loginToXMPP() {
    try {
        mConnection.login(mUsername, mPassword);
        Log.i("XMPPClient", "Logged in as " + mConnection.getUser());

        // Set the status to available
        Presence presence = new Presence(Presence.Type.available);
        mConnection.sendPacket(presence);
        setConnection(mConnection);
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to log in as "
                + mUsername);
        Log.e("XMPPClient", ex.toString());
        setConnection(null);
    }
}

/**
 * Called by Settings dialog when a connection is established with the XMPP
 * server
 * 
 * @param connection
 */
public void setConnection(XMPPConnection connection) {
    this.mConnection = connection;
    if (connection != null) {
        // Add a packet listener to get messages sent to us
        PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        connection.addPacketListener(new PacketListener() {
            public void processPacket(Packet packet) {
                Message message = (Message) packet;
                if (message.getBody() != null) {
                    String fromName = StringUtils.parseBareAddress(message
                            .getFrom());
                    Log.i("XMPPClient", "Got text [" + message.getBody()
                            + "] from [" + fromName + "]");
                    messages.add(fromName + ":");
                    messages.add(message.getBody());
                    // Add the incoming message to the list view
                    mHandler.post(new Runnable() {
                        public void run() {
                            setListAdapter();
                        }
                    });
                }
            }
        }, filter);
    }
}

private void setListAdapter() {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.multi_line_list_item, messages);
    mList.setAdapter(adapter);
}

public void onClick(View v) {
    if (v.getId() == R.id.send) {
        String to = mRecipient.getText().toString();
        String text = mSendText.getText().toString();

        Log.i("XMPPClient", "Sending text [" + text + "] to [" + to + "]");
        Message msg = new Message(to, Message.Type.chat);
        msg.setBody(text);
        mConnection.sendPacket(msg);
        messages.add(mConnection.getUser() + ":");
        messages.add(text);
        setListAdapter();
    }

}
} 
```

**布局**

**主要的.xml**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="70dp"
        android:text="Recipient:" />

    <EditText
        android:id="@+id/recipient"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:autoText="false"
        android:capitalize="none"
        android:minWidth="250dp"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:textSize="16sp" />
</LinearLayout>

<ListView
    android:id="@+id/listMessages"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:scrollbars="horizontal" />

<EditText
    android:id="@+id/sendText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoText="false"
    android:capitalize="none"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:textSize="16sp" />

<Button
    android:id="@+id/send"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Send" >
</Button>

</LinearLayout> 
```

**multi_line_list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:singleLine="false"
android:textStyle="bold" /> 
```

上面的代码使用**Asmack**库

Google Talk 对我来说工作正常，但 Facebook 聊天不适用于此代码。:(

是否有任何用于 Facebook 聊天连接的特殊配置？或者这种方法与 Facebook 聊天连接错误？

因为我在这方面做了很多研发，并且 Facebook 支持 XMPP 聊天支持，如[Facebook XMPP 聊天设置](https://www.facebook.com/sitetour/chat.php)中所讨论的，所以我认为这应该可行。

任何人在 android 中实现了 Facebook 聊天都可以帮助我解决这个问题。

提前致谢...！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:18:22.907

我检查了[Beem Project](http://beem-project.com/)的所有代码，找到了连接 Facebook 聊天 API 的解决方案。

**在 Android 中实现 Facebook 聊天 API 的步骤：**

1.  首先，我们必须在现有项目中实现[MemorizingTrustManager](https://github.com/ge0rg/MemorizingTrustManager) Library 项目。

    => 为此，您必须在现有项目中复制以下三个文件

    *   MemorizingTrustManager/src/de/duenndns/ssl/MTMDecision.java
    *   MemorizingTrustManager/src/de/duenndns/ssl/MemorizingActivity.java
    *   MemorizingTrustManager/src/de/duenndns/ssl/MemorizingTrustManager.java

    => 并在**values/string.xml中添加以下值**

    ```
    <resources>
        <string name="mtm_accept_cert">Accept Unknown Certificate?</string>
        <string name="mtm_decision_always">Always</string>
        <string name="mtm_decision_once">Once</string>
        <string name="mtm_decision_abort">Abort</string>
        <string name="mtm_notification">Certificate Verification</string>
    </resources> 
    ```

2.  第二步，您可以使用以下代码连接 Facebook 并使用您的**Facebook Jabber ID (username@chat.facebook.com)登录，而不是使用****X-FACEBOOK-PLATFORM**等**SASLAuthentication**

     ****```
    public void connectToFb() throws XMPPException {

    ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
    config.setSASLAuthenticationEnabled(true);
    config.setSecurityMode(SecurityMode.required);
    config.setRosterLoadedAtLogin(true);
    config.setTruststorePath("/system/etc/security/cacerts.bks");
    config.setTruststorePassword("changeit");
    config.setTruststoreType("bks");
    config.setSendPresence(false);
    try {
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(null, MemorizingTrustManager.getInstanceList(this), new java.security.SecureRandom());
        config.setCustomSSLContext(sc);
    } catch (GeneralSecurityException e) {
        Log.w("TAG", "Unable to use MemorizingTrustManager", e);
    }
    XMPPConnection xmpp = new XMPPConnection(config);
    try {
        xmpp.connect();
        xmpp.login("facebookusername", "****"); // Here you have to used only facebookusername from facebookusername@chat.facebook.com
        Roster roster = xmpp.getRoster();
        Collection<RosterEntry> entries = roster.getEntries();
        System.out.println("Connected!");
        System.out.println("\n\n" + entries.size() + " buddy(ies):");
        // shows first time onliners---->
        String temp[] = new String[50];
        int i = 0;
        for (RosterEntry entry : entries) {
            String user = entry.getUser();
            Log.i("TAG", user);
        }
    } catch (XMPPException e) {
        xmpp.disconnect();
        e.printStackTrace();
    }
    } 
    ```**** 

 ****最后，如果您在 LogCat 视图中获取您 Facebook 帐户的所有好友列表，则可以使用[本教程](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)实现简单的 Facebook 聊天。

**更新**：我还在开发作为 Facebook Messenger 工作的示例应用程序，并很快发布在 GitHub 上。****

# xcode - 无法在 XCode 4.3 管理器中打开档案选项卡

> ID：11188583
> 
> 赞同：0
> 
> 时间：2012-06-25T11:34:19.307
> 
> 标签：xcode, archive, freeze, organizer

我的 Xcode 4.3 管理器中的存档选项卡突然停止工作。

当我昨天尝试归档项目时，在成功构建后，我的 Xcode 并没有在管理器中打开归档选项卡，而是停在那里。然后我杀死并重新打开了xcode，但是只要我单击管理器中的存档选项卡，xcode 就会再次冻结。

[我尝试了像这样](https://stackoverflow.com/questions/10317125/xcodes-4-3-2-organizer-freezes-whenever-i-click-the-archives-tab)在 SO 的其他线程中发布的解决方案，删除 ~/Library/Developer/Xcode/DerivedData 中的所有文件或[删除所有档案](https://stackoverflow.com/questions/6588519/xcode-4-archive-results-in-slow-unresponsive-organizer-pngcrush-process-takes)，它们都不起作用。

只要我归档一个项目，xcode 就会冻结。对我有用的唯一解决方案是继续熟练 bash 进程，直到 xcode 停止挂起。

那么还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:21:10.533

回答我自己的问题。所以我联系了 Apple 支持工程师，他们告诉我我需要重新安装 xcode。

但是要重新安装，他们告诉我删除 xcode 并从 mac 应用商店再次下载。由于我上次下载的痛苦经历，我没有听从那个建议。我首先将 xcode 从 /Application 中移出，然后运行**​​uninstall-devtools --mode=all**，然后我再次运行 xcode，然后 xcode 提示我它需要安装一些组件。然后问题就解决了！！

# jquery - onClick 使用 jQuery .animate 转到页面底部

> ID：11188584
> 
> 赞同：7
> 
> 时间：2012-06-25T11:34:20.633
> 
> 标签：jquery, html, css, jquery-animate

我有一个表格，其中最后一列包含操作按钮，可在表格下方打开另一个部分。当该部分打开时，正文页面保留在按下操作列中的按钮的位置。我需要最好使用带有 .animate 的 jQuery，它将 .html 页面滚动到表格下打开的部分。

小提琴示例：http: [//jsfiddle.net/Ksb2W/110/](http://jsfiddle.net/Ksb2W/110/)

如果有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T11:37:46.307

**演示** [http://jsfiddle.net/h4ZQR/](http://jsfiddle.net/h4ZQR/) **或** [http://jsfiddle.net/byRRY/](http://jsfiddle.net/byRRY/)

好的 API：[http ://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

请注意：您可以使用：`.animate({scrollTop: $("#whateverdiv").offset().top});`转到页面的某些部分。

希望这可以帮助

**html**

```
<a href="#bottom" id="hulk">Click me to go to bottom</a> 
```

**代码**

```
$("#hulk").click(function() {
  $("html, body").animate({ scrollTop: $(document).height() }, "slow");

});​ 
```

**或者**

```
$("a[href='#bottom']").click(function() {
  $("html, body").animate({ scrollTop: $(document).height() }, "slow");
  return false;
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T17:24:12.997

这对我有用

```
$("document").ready(function() {
        $("#button").click(function() {
            $("html, body").animate({
                    scrollTop: innerHeight,
                },
                "slow"
            );
            return false;
        });
    }); 
```

# javascript - 我需要从数组中获取一些元素 - javascript

> ID：11188590
> 
> 赞同：0
> 
> 时间：2012-06-25T11:34:56.010
> 
> 标签：javascript, dom

Javascript - 如标题。我的例子：

```
var nawigacja = document.getElementsByTagName('nav')[0];
nawigacja.getElementsByTagName('button')[0].className = 'navig';
nawigacja.getElementsByTagName('button')[1].className = 'navig';
nawigacja.getElementsByTagName('button')[2].className = 'navig';
nawigacja.getElementsByTagName('button')[3].className = 'navig'; 
```

我可以为所有标签定义类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:38:49.337

你可以使用循环。

```
var buttons = nawigacja.getElementsByTagName('button');
for (var i=0; i < buttons.length; i++) {
  buttons[i].className = 'navig';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:38:47.717

如果你使用 jQuery Javascript Framework [http://jquery.com/](http://jquery.com/)，你可以像这样轻松地做到这一点：

```
$('nav button').addClass('navig'); 
```

没有它，你可以这样做：

```
var list = document.getElementsByTagName('nav');
list = list.getElementsByTagName('button');
for(i=0 ; i < list.length ; i ++) {
    list[i].className = 'navig';
} 
```

# html - 如何使用 Perl 修改 HTML 文件：保留列表并删除所有其他标签

> ID：11188591
> 
> 赞同：-6
> 
> 时间：2012-06-25T11:35:01.547
> 
> 标签：html, perl

我需要在 html 文件中保留几个 html 标签，但删除所有其他标签。

脚本的逻辑是：

```
- if there is <li> or <ul> on the line, do nothing (=write same line to output)
- otherwise if there is html tag, remove it (=just write the content) 
```

有人可以帮助我吗，这超出了我非常有限的 perl 技能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:20:36.003

您可以使用[HTML::Restrict执行此操作](https://metacpan.org/module/HTML%3a%3aRestrict)

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::Restrict;

my $hr = HTML::Restrict->new( rules => { li => [], ul => [] } );

my $html
    = q[<body><b>hello</b> <img src="pic.jpg" alt="me" id="test" /><ul><li>one</li></ul></body>];
my $processed = $hr->process( $html );

print $processed; 
```

结果输出是：

```
hello <ul><li>one</li></ul> 
```

# android - 高效的下载方法

> ID：11188593
> 
> 赞同：0
> 
> 时间：2012-06-25T11:35:06.103
> 
> 标签：android, download, android-asynctask

要求：在应用程序中，首次启动时需要从远程服务器下载所有图像和数据，并将它们分别存储到 sdcard 和本地 sqlite 数据库中。而且，在以后的时间里，该应用程序在没有网络连接的情况下在本地工作。

因此，`HTTP`响应以`JSON`格式出现，需要对其进行解析并存储到数据库中，解析后`JSON`我将获得需要下载并存储到 sdcard 中的图像路径。

目前，我正在考虑使用`AsyncTask`相应的 API 调用来实现这一点。请让我知道是否有任何其他有效的替代方案，或者是否有任何示例源代码执行类似任务。蒂亚...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:40:56.800

Android 提供下载文件的服务。试试[下载管理器](http://developer.android.com/reference/android/app/DownloadManager.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:45:28.583

如果确实需要单独的文件，您可以使用[下载管理器](https://developer.android.com/reference/android/app/DownloadManager.html)。

但我建议将所有内容打包并压缩到一个存档文件中并下载。

也许您可以使用[扩展文件](https://developer.android.com/guide/google/play/expansion-files.html)？

如果您决定使用 AsyncTask 请注意，根据您的 targetSdkVersion (>11) 和 Android 版本 (>4.0)，如果不设置线程池执行器，它可能[无法运行多线程。](https://groups.google.com/d/msg/android-developers/8M0RTFfO7-M/JZSHiOz9bPgJ)

# cakephp - 在 CakePHP 2 中使用 saveAssociated 时手动设置 ID

> ID：11188596
> 
> 赞同：0
> 
> 时间：2012-06-25T11:35:16.390
> 
> 标签：cakephp

我有以下表格：

```
 echo $this->Form->input('Person.name');
        echo $this->Form->input('Person.phone');
        echo $this->Form->input('Person.email');
        echo $this->Form->input('Message.0.plainmsg');
        echo $this->Form->submit('Send Message');
        echo $this->Form->end(); 
```

`Person`有很多`Message`

我想设置控制器，以便第一次填写表格并插入`Person`，`Message`但第二次有人用相同的电子邮件地址填写表格时，`Person`只是更新但新`Message`的就像以前一样插入。

这是我的控制器到目前为止的样子：

```
 if ($this->request->is('post')) {

        // Check to see if submitted email address is already
        // a record in Person model
        $person = $this->Person->findByEmail($this->request->data['Person']['email']);

        if ($person) {
            // Set the ID (save query will be UPDATE)
            $this->Person->id = $person['Person']['id'];
        } else {
            // Create a new record (save query will be INSERT)
            $this->Person->create();
        }

        // Save the data (will run as UPDATE or INSERT
        // depending on above
        $this->Person->save($this->request->data);
    } 
```

这一切都按预期工作：如果`Person.email`已经存在，则`Person`更新而不是插入。这正是我想要的。

问题是我无法弄清楚如何解决`Message`所有这些问题。

我尝试将保存更改为[蛋糕手册本节](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)`$this->Person->saveAssociated($this->request->data)`最后一个示例中所示的内容，但结果是蛋糕尝试插入而不是更新它。`Person`

我在这里尝试做的重点和目的是允许用户发布无限数量的新消息，`Message`并始终`Person`使用他们当前的联系号码更新他们的记录（这将定期更改）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:43:59.153

您应该`saveMessage`在消息模型中使用参数`$personId`和`$messageText`. 此方法的逻辑是将您的新消息与所属用户一起保存。

在您创建或更新人员`$this->Person->id`后，人员 ID 将被保留。`Person::save()`

在这种情况下，我不会使用任何蛋糕魔法。

# ruby - ruby：如果对象响应方法，则委托

> ID：11188598
> 
> 赞同：3
> 
> 时间：2012-06-25T11:35:19.553
> 
> 标签：ruby, delegates, activesupport

我想在 Ruby 中使用委托，但我不能保证目标对象会响应我将调用的所有方法。我可以用默认行为定义委托吗？

例如

```
class DummyPresenter
  delegate :name, :age, :to => :@content, :default => nil
  def initialize(content)
    @content = content
  end
end

class Student
  def name
    "name"
  end
end    

> DummyPresenter.new(Student.new).age # => nil
> DummyPresenter.new(Student.new).name # => "name" 
```

现在，上面的例子会引发：

```
NoMethodError:
   undefined method `age' for #<Student:0xa121212> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:01:01.850

```
def method_missing(method, *args)
  if @content.respond_to? method
    @content.send method, *args
  else
    #your default behaviour (or super)
  end 
end 
```

你也可以使用 DelegateClass 它会做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T21:33:49.483

我发现将方法委托给原始对象的最简单方法是使用 SimpleDelegator（在 stdlib 中提供）

```
class Presenter < SimpleDelegator

  def initialize model
    super model
  end

  def foo
    'bar'
  end
end

class Person
  def bam
    'baz'
  end
end

person = Person.new
presenter = Presenter.new Person

presenter.foo # => 'bar'
presenter.bam # => 'baz' 
```

从文档：

> SimpleDelegator 类提供了将所有支持的方法调用委托给传递给构造函数的对象的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:51:18.160

最后我使用了`define_method`：

```
class DummyPresenter

  @@delegated_methods = [:name, :age]
  @@delegated_methods.each do |method|
    define_method(method) do
      return @content.try(method) if @content.respond_to?(method)
      nil
    end
  end

 def initialize(content)
   @content = content
 end 
```

结尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:49:04.127

不使用委托并像这样手动执行如何？

```
class DummyPresenter
  def initialize content; @content = content end
  def name; @content.respond_to?( :name ) ? @content.name : dflt_name end
  def age; @content.respond_to?( :age ) ? @content.age :dflt_age end
  def to; @content.respond_to?( :to ) ? @content.to :dflt_to end
  def dflt_name
    nil # or whathever code
  end
  def dflt_age; nil end
  def dflt_to; nil end
end 
```

否则你必须重新编程委托方法，我认为......

# cordova - 使用PhoneGap，如何从iPhone中的照片库中获取照片的base64图像数据

> ID：11188599
> 
> 赞同：7
> 
> 时间：2012-06-25T11:35:20.987
> 
> 标签：cordova, camera, base64, photolibrary

使用PhoneGap（Cordova），我试图从照片库中获取照片的base64图像数据。

我可以这样做..当从相机拍摄照片时，使用 Cordova 中的以下代码片段。

```
 navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: Camera.DestinationType.DATA_URL
 }); 

function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
    alert('Failed because: ' + message);
} 
```

但是，当从库中选择照片时，我应该怎么做才能获取 base64 图像数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T14:23:03.437

```
function encodeImageUri(imageUri)
{
     var c=document.createElement('canvas');
     var ctx=c.getContext("2d");
     var img=new Image();
     img.onload = function(){
       c.width=this.width;
       c.height=this.height;
       ctx.drawImage(img, 0,0);
     };
     img.src=imageUri;
     var dataURL = c.toDataURL("image/jpeg");
     return dataURL;
} 
```

我在 PhoneGap 中没有解决方案。所以我需要的是用户从他们的照片库中选择的base64格式的图像。所以我把那个图像放在画布上，**toDataUrl()**给了我非常格式:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T14:16:36.680

你只需要告诉它从照片库中选择：

```
navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: Camera.DestinationType.DATA_URL,
    sourceType : Camera.PictureSourceType.PHOTOLIBRARY
}); 
```

请注意，加载大型 base 64 编码图像可能会导致您的应用出现内存不足错误。尽可能使用 FILE_URI 来获取您的照片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T11:56:18.397

它是在 base64 中获取图像的好方法，但是何时显示此函数返回的 base64 字符串。它向我显示一个白色图像。我的代码如下

```
var smallImage = document.getElementById('smallImage');
                smallImage.src = encodeImageUri(imageURI); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-26T10:44:46.177

您可以使用此[插件](https://github.com/hazemhagrass/phonegap-base64)为您获取图像的 base64 编码，它使用 iOS 的 js 代码，但在 android 的情况下，它使用本机代码来处理低于 v.3 的 android 版本，因为低于 3 的 android 版本无法处理**toDataUrl**功能性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T11:25:20.967

试试这个。

```
function getPhoto(source) {
    // Retrieve image file location from specified source
    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
        destinationType: destinationType.FILE_URI,
        sourceType: source });
} 

function onPhotoURISuccess(imageURI) {

    window.resolveLocalFileSystemURI(imageURI, gotFileEntry, failSystem);

}
function onFail(message) {
    alert('Failed because: ' + message);
}
var gotFileEntry = function(fileEntry) {
   // alert(fileEntry.fullPath);
    console.log("got image file entry: " +  fileEntry.fullPath);
//convert all file to base64 formats
    fileEntry.file( function(file) {
//uncomment the code if you need to check image size
       //if(file.size>(1049576/2))
      // {
           //alert('File size exceeds 500kb');
          // return false;
      // }
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read complete!");
            $('yourimageidtoshow').attr('src',  evt.target.result);
        };
        reader.readAsDataURL(file);
    }, failFile);
};
var failSystem=function(){
    console.log('failed');

}
var failFile=function(){

    console.log('failed');
    throw "toobig";
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-24T13:41:27.527

试试这个：[https](https://github.com/brianvandelden/acato-service-image) ://github.com/brianvandelden/acato-service-image 。它使用 imagePicker.git cordova 插件。具有从选定图片中获取 imageData 的功能。

# jquery - 在代码隐藏中无法识别通过 jquery 更改控制功能

> ID：11188601
> 
> 赞同：0
> 
> 时间：2012-06-25T11:35:24.890
> 
> 标签：jquery, asp.net, viewstate

我想知道为什么当我通过 jQuery 禁用 asp.net 控件时，它在 Code behind 中无法识别。例如，我通过以下方式禁用了 TextBox：

```
$('#txtNumber').attr('disabled', true); 
```

**它在 client-sdide 中禁用得很好**，但在后面的代码中无法识别，并且它具有 Enabled = true 。

我不知道如何解决这个问题。

编辑：我知道如何通过 jquery 禁用控件，**但事实并非如此**，我的问题是为什么当我在客户端禁用它时，它背后的代码仍然具有真正的启用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:59:32.863

服务器端控件的状态（启用/禁用）在回发发生时取自视图状态。禁用客户端输入元素将意味着在提交表单时输入的任何值都不会作为回发的一部分由浏览器发送。

因此，对于输入元素，禁用意味着“不要在回发中发送”。在客户端更改它不会导致视图状态相应更新。如果您在服务器端更改它，视图状态将包含它被禁用的信息，然后将在网络回发中持久保存

# php - PHP，Zend，require_once：“打开流失败”和“打开需要失败 [...]”

> ID：11188603
> 
> 赞同：0
> 
> 时间：2012-06-25T11:35:27.277
> 
> 标签：php, zend-framework, filesystems, include

我要疯了！我已经 SO'ing 和谷歌搜索了 2 个小时了。

简而言之，一切正常，然后我进行了一些班级重组，现在我得到了这个：

```
 Warning: require_once(Zend/Mail/Transport/Sendmail.php) [function.require-once]: failed to open stream: No such file or directory in /nfs/c09/h02/mnt/136160/domains/xyz.com/html/sandbox/Zend/Mail.php on line 1175

    Fatal error: require_once() [function.require]: Failed opening required 'Zend/Mail/Transport/Sendmail.php' (include_path='.:/usr/local/php-5.3.13/share/pear') in /nfs/c09/h02/mnt/136160/domains/xyz.com/html/sandbox/Zend/Mail.php on line 1175 
```

我没有触及我的文件是如何组织的：

```
 sandbox/index.php
    sandbox/settings.php
    sandbox/lib/class1.php
    sandbox/lib/class2.php
    sandbox/lib/class3.php
    sandbox/Zend/... 
```

我只更改了一些类名及其层次结构。

**索引.php**

```
<?php
    require_once 'lib/class1.php';
    $application = new class1();
    $application->run();
?> 
```

**类1.php**

```
<?php

    require_once 'Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Log');
    Zend_Loader::loadClass('Zend_Log_Formatter_Simple');
    Zend_Loader::loadClass('Zend_Log_Writer_Mail');
    Zend_Loader::loadClass('Zend_Log_Writer_Stream');
    Zend_Loader::loadClass('Zend_Mail');

    // class definition ...
?> 
```

在我的班级重组过程中，这些都不`require`需要触及。**Zend 的Mail.php**中出现了特定问题（尽管我确信存在更普遍的问题）：

```
/**
 * Sends this email using the given transport or a previously
 * set DefaultTransport or the internal mail function if no
 * default transport had been set.
 *
 * @param  Zend_Mail_Transport_Abstract $transport
 * @return Zend_Mail                    Provides fluent interface
 */
public function send($transport = null)
{
    if ($transport === null) {
        if (! self::$_defaultTransport instanceof Zend_Mail_Transport_Abstract) {
            require_once 'Zend/Mail/Transport/Sendmail.php';
            $transport = new Zend_Mail_Transport_Sendmail();
        } else {
            $transport = self::$_defaultTransport;
        }
    }

    ...
} 
```

（请注意`require`仅在第一次尝试发送电子邮件时才调用它。）

1.  新的“流程”或包含顺序是否可能导致此问题？（因为路径看起来不错。如果路径不正确，它会死在 Loader.php 中，不是吗？）

2.  在导致更“致命”的问题之前，某种循环依赖会导致此问题吗？

3.  类名可能与已经存在的东西冲突吗？以前我有一些相当神秘的类名，比如 MalaFwk_Application_Receiver。现在，名称更加通用，例如 CApplication、CComponent、CDatabase、CLogger 等。

我已经尝试了其他 SO 线程中建议的各种事情，但无济于事，但我愿意尝试任何人建议的任何事情。如果这不是一个特别有建设性的问题，我提前道歉，但我没有想法，并且有太多（微不足道但广泛）的更改可以恢复并重新应用这些更改。任何帮助将不胜感激。（我将在东部标准时间约 8 点 45 分回来。）

**更新：**

如果我将以下行添加到**index.php**，即在发生其他任何事情之前“手动”要求该文件，那么事情就会再次起作用。

```
 require_once 'Zend/Mail/Transport/Sendmail.php'; 
```

所以看起来，由于某种原因，当代码到达时`send()`，它找不到库。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:11:08.800

请将此添加到您的索引中：

```
set_include_path(implode(PATH_SEPARATOR, array(          
    realpath('../library'), // Make sure this is the correct path to your library folder
    get_include_path(),
))); 
```

# c# - 使用来自 access 数据库的 c# 实时数据馈送

> ID：11188604
> 
> 赞同：4
> 
> 时间：2012-06-25T11:35:36.217
> 
> 标签：c#, asp.net, .net, real-time

我目前正在构建一个网站（ASP.net c#），我们正在考虑为我们网站上的数据事件创建一个实时提要（类似于 facebook 提要）。我想知道您对如何最好地实现这一点的想法，因为我不确定我的理解是否正确。

我们有一些事件，例如：新文章发布，用户上线。

用户将登录到他们的会员区域，然后应该会看到实时提要。

我目前的想法是每隔几秒钟（从用户浏览器）进行一次查询，以查找自上次请求日期以来的任何新事件。如果自 dateX（上次请求日期）以来有新的，则显示。

我会将最后一个请求日期与用户 ID 一起保存，所以当他们回来时，我知道他们最后看到的是什么。

这是最好的方法 - 还是我应该看看某种推送方法？我需要它对跨浏览器友好并支持旧浏览器......所以我看过的 HTML 5 方法并不是一个真正的选择。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:49:00.787

你可以用`AJAX`这个。ASP.NET 具有诸如更新面板之类的控件，可为您提供所需的功能。然后，您可以设置更新面板以根据 UserId 和刷新数据的最后日期重新加载内容。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

 <div id="UserLiveFeed">

    <asp:UpdatePanel ID="upLiveFeed" runat="server">
        <ContentTemplate>
             <asp:Label runat="server" Text="Last updated" id="lblLastUpated">
             <!-- Your content here -->
             <asp:Timer runat="server" id="tmrLiveFeed" Interval="3000" OnTick="tmrLiveFeed_Tick"></asp:Timer>
        </ContentTemplate>
    </asp:UpdatePanel>

</div> 
```

然后更新提要的内容（连接到数据库并获取新数据）：（我每 3 秒用当前时间更新标签）

```
protected void tmrLiveFeed_Tick(object sender, EventArgs e)
{
   lblLastUpdated = DateTime.Now.ToString();
} 
```

另一种选择是使用[SignalR](http://signalr.net/)，它是一个提供实时功能的 ASP.NET 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:54:42.373

您可能想查看[SignlarR](https://github.com/SignalR/SignalR)。这是构建交互式 Web 应用程序的 .NET 库，就像您的场景一样。

另一种选择是您在问题中提到的。每 n 秒进行一次 ajax 调用以检查数据库并更新 UI。但我认为 SignalR 比这要好得多，因为它不依赖于连续命中方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:45:32.077

我建议您查看一些消息总线框架，例如[NServiceBus](http://nservicebus.com/)或开源[MassTransit](http://www.ohloh.net/p/masstransit)。这些位于（Microsoft Messaging Queue）MSMQ 之上，以使使用它更舒适，

您可以仅在数据库中写入更改时向所有订阅的客户端发送一条轻量级消息，而不是每隔几秒钟轮询一次数据库。然后，客户端仅对他们感兴趣的更改做出反应。您还可以使队列事务化，这样即使客户端离线/已注销，您也不会丢失任何消息。

（编辑以使文本再次可读......）

# web-services - 使用 WS 寻址时可以跳过 HTTP 202 响应吗？

> ID：11188611
> 
> 赞同：1
> 
> 时间：2012-06-25T11:35:58.067
> 
> 标签：web-services, soap, cxf

我正在寻找在使用 WS 寻址时跳过 CXF 发回的 HTTP 202 响应的方法。我们需要支持无法处理 HTTP 202 响应的客户端。以请求-响应模式运行，无法处理 CXF 返回的 HTTP 202。

有没有办法跳过 HTTP 202 响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:05:30.883

HTTP 202 表明 WS-Addressing 结构将传入的 SOAP 消息作为异步处理。诀窍是为 WSDL 中的 ReplyTo 属性提供一个好的值。

ReplyTo (wsa:Replyto) 元素用于在同步和异步行为之间进行选择。该元素始终包含一个用于指定回调服务器地址的元素。

对于同步行为，将匿名 URL 指定为回调 URL。

```
<wsa:ReplyTo>
         <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
</wsa:ReplyTo> 
```

对于异步行为，请指定应用程序回调服务器的地址。

```
 <wsa:ReplyTo>
      <wsa:Address>http://<server>/servlet/CallBackHandler</wsa:Address>
 </wsa:ReplyTo> 
```

所以使用匿名 url 消除了 HTTP 202

更多信息可以在这里找到：

[https://developer.connectopensource.org/display/CONNECTWIKI/Asynchronous+Web+Service+Calls+Using+WS-Addressing](https://developer.connectopensource.org/display/CONNECTWIKI/Asynchronous+Web+Service+Calls+Using+WS-Addressing)

和

[http://developer.cisco.com/paws/PAWS_Developer_Guide/index.html?asynchronous_behavior.html](http://developer.cisco.com/paws/PAWS_Developer_Guide/index.html?asynchronous_behavior.html)

# java - 带字符串的文件编写器（java）

> ID：11188614
> 
> 赞同：1
> 
> 时间：2012-06-25T11:36:05.920
> 
> 标签：java, string, file, writer

我不能在我的文本文件中使用这段代码换行，这有什么问题？

```
try{
    oprint=new FileWriter("HighScores.txt",true);
} catch (IOException e1) {
    System.out.println("error");
}  
try{
    String stampa= "Player:  "+name+"  --- time "+ this.getDurata()+" s \n";
    oprint.write(stampa);
    oprint.close();
}catch(Exception e){
    System.out.println("error");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:42:27.790

尝试使用这个：

```
public static String newline = System.getProperty("line.separator"); 
```

接着：

```
oprint.write("Player:  " + "x" + "  --- time " + "durata" + " s " + newline); 
```

这更好，因为不同的操作系统有不同的写新行的方式。Linux 使用“\n”，Mac 使用“\r”，Windows 使用“\r\n”作为换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:40:20.810

您确定您的编辑器或查看器不希望在行尾有回车 (CR) 吗？

如果是这样，请尝试以下操作：

```
String stampa = "Player:  "+name+"  --- time "+ this.getDurata()+" s \r\n"; 
```

或者你可以使用[`String.format`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)：

```
String stampa = String.format("Player: %s  --- time %d s %n", name, this.getDurata()); 
```

从[格式文档](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)：

> `'n'` 行分隔符 结果是特定于平台的行分隔符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:49:08.000

尝试包装`FileWriter`并`PrintWriter`使用它的`println()`方法。

```
PrintWriter oprint;
try{
    oprint=new PrintWriter(new FileWriter("HighScores.txt",true));
    String stampa= "Player:  "+name+"  --- time "+ this.getDurata()+" s";
    oprint.println(stampa);//<- print with new line sign
    oprint.close();
}catch(Exception e){
    System.out.println("error");
} 
```

# c++ - FFmpeg 获取标题大小

> ID：11188617
> 
> 赞同：3
> 
> 时间：2012-06-25T11:36:18.967
> 
> 标签：c++, c, header, ffmpeg, avcodec

问题是从 ffmpeg 中的格式上下文（AVFormatContext）获取标题大小。

现在我正在使用第一个数据包位置来获取它：

```
avformat_open_input(&m_formatContext, m_openedFilePath.toStdString().c_str(), NULL, NULL);
//...
AVPacket packet;
if(av_read_frame(m_formatContext, &packet) >= 0)
    printf("Header size: %d", packet.pos); // First readed packet will be with header offset 
```

没有阅读框架有更好的方法吗？

# c# - WPF Datagrid 未正确显示数据，但在单击列标题时正确显示

> ID：11188618
> 
> 赞同：3
> 
> 时间：2012-06-25T11:36:19.363
> 
> 标签：c#, .net, wpf, wpfdatagrid

`DataGrid`我的wpf 应用程序中有一个

```
<DataGrid Name="datagrid2" ItemSource="{Binding}" CanUserReorderColumns="False" 
          IsReadOnly="True" SelectionMode="Single" CanUserResizeColumns="False" 
          CanUserResizeRows="False" LoadingRow="datagrid2_LoadingRow" /> 
```

我将其提供`ItemSource`为

```
datagrid2.ItemSource = mydatatable.DefaultView; 
```

及其行头为

```
private void datagrid2_LoadingRow(object sender, DataGridRowEventArgs e)
{
    e.Row.Header = Some_string_araay[e.Row.GetIndex()];
} 
```

有时我的问题是行标题成为第一列的数据。因此，最后一列及其数据变为无标题。我认为这是一个布局问题，所以在提供后`ItemSource`我`LoadingRow`做了`datagrid2.UpdateLayout()`. 但问题仍然存在。

![在此处输入图像描述](../Images/8fb9de8b41f5c4260a14748f92496bff.png)

![在此处输入图像描述](../Images/1f2efff4d5098238f506db11b89a4ba5.png)

当我单击 any`ColumnHeader`时，数据会正确对齐。

![在此处输入图像描述](../Images/e0cfb6a39224a6731d998d5b5ca111ff.png)

![在此处输入图像描述](../Images/c468d219033ba08b13011a641b7a7a95.png)

这个问题的原因和解决方案可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:20:58.573

好的，我想我知道为什么会这样。

第一列（具有您的行标题）宽度在运行时根据其内容（行标题数据）在网格加载时确定。现在，当网格加载时，您的行标题没有数据（您在`LoadingRow`事件中设置标题），因此第一列的宽度设置为 0；更新行标题后，它不会被反映为`DataGrid`不会自行刷新。

单击列标题后，它会重新计算`RowHeader`宽度，这一次它是正确的，因为您的行标题有数据。

`RowHeaderWidth`应该有一些简单的解决方案，但一种方法是使用[SelectAllButton](http://www.scottlogic.co.uk/blog/colin/2009/02/styling-hard-to-reach-elements-in-control-templates-with-attached-behaviours/)（在 0,0，单元格中）绑定你，就像这样 -

```
// Loaded event handler for Datagrid
private void DataGridLoaded(object sender, RoutedEventArgs e)
{
    datagrid2.LayoutUpdated += DataGridLayoutUpdated;
}

private void DataGridLayoutUpdated(object sender, EventArgs e)
{
    // Find the selectAll button present in grid
    DependencyObject dep = sender as DependencyObject;

    // Navigate down the visual tree to the button
    while (!(dep is Button))
    {
        dep = VisualTreeHelper.GetChild(dep, 0);
    }

    Button selectAllButton = dep as Button;

    // Create & attach a RowHeaderWidth binding to selectAllButton; 
    // used for resizing the first(header) column
    Binding keyBinding = new Binding("RowHeaderWidth");
    keyBinding.Source = datagrid2;
    keyBinding.Mode = BindingMode.OneWay; // Try TwoWay if OneWay doesn't work)
    selectAllButton.SetBinding(WidthProperty, keyBinding);

    // We don't need to do it again, Remove the handler
    datagrid2.LayoutUpdated -= DataGridLayoutUpdated;
} 
```

我做了类似的事情，根据第 0,0 个单元格数据更改第一列的宽度，它工作正常；希望这对你有用。

# python - 如何在python中将字符串拆分为段

> ID：11188619
> 
> 赞同：3
> 
> 时间：2012-06-25T11:36:22.963
> 
> 标签：python, string

我有一个由几个段组成的字符串，这些段没有分开，但没有重叠。这看起来像这样：

```
<python><regex><split> 
```

我想分成：

```
<python>, <regex>, <split> 
```

我正在寻找最有效的方法来做到这一点，同时尽可能少的代码。我可以将 '>' 更改为 '>' 等，但我不想做任何多余的操作。是否可以使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T11:41:39.917

尝试[re.findall](http://docs.python.org/library/re.html#re.findall)：

```
import re
your_string = '<python><regex><split>'
parts = re.findall(r'<.+?>', your_string)  
print parts # ['<python>', '<regex>', '<split>'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:52:25.727

```
>>> re.sub(r'<(.+?)>',r'<\1>,','<python><regex><split>')[:-1]
'<python>,<regex>,<split>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:38:42.340

如果您的输入数据真的那么简单，您可以使用`.replace()`内置在字符串中的方法。

```
>>> '<python><regex><split>'.replace('><', '>, <')
'<python>, <regex>, <split>' 
```

如果它更复杂，您应该给出一个更好的输入/预期输出示例。

# java - 如何将自纪元以来的秒数转换为 Java 中的小时/分钟/秒？

> ID：11188621
> 
> 赞同：4
> 
> 时间：2012-06-25T11:36:36.060
> 
> 标签：java, performance, datetime

有没有一种快速、低垃圾的方法呢？我不能只做简单的模数运算，因为这不考虑闰秒和其他日期/时间有趣的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T21:20:50.540

我已经弄清楚了如何在整数算术中处理闰年，并实现了一个从 Epoch 到日期/时间的秒数的转换器（不过，它永远不会给你超过 59 秒的时间）。下面的 C 代码应该很容易移植到 Java。

```
#include <string.h>
#include <time.h>

typedef unsigned uint;
typedef unsigned long long uint64;

struct tm* SecondsSinceEpochToDateTime(struct tm* pTm, uint64 SecondsSinceEpoch)
{
  uint64 sec;
  uint quadricentennials, centennials, quadrennials, annuals/*1-ennial?*/;
  uint year, leap;
  uint yday, hour, min;
  uint month, mday, wday;
  static const uint daysSinceJan1st[2][13]=
  {
    {0,31,59,90,120,151,181,212,243,273,304,334,365}, // 365 days, non-leap
    {0,31,60,91,121,152,182,213,244,274,305,335,366}  // 366 days, leap
  };
/*
  400 years:

  1st hundred, starting immediately after a leap year that's a multiple of 400:
  n n n l  \
  n n n l   } 24 times
  ...      /
  n n n l /
  n n n n

  2nd hundred:
  n n n l  \
  n n n l   } 24 times
  ...      /
  n n n l /
  n n n n

  3rd hundred:
  n n n l  \
  n n n l   } 24 times
  ...      /
  n n n l /
  n n n n

  4th hundred:
  n n n l  \
  n n n l   } 24 times
  ...      /
  n n n l /
  n n n L <- 97'th leap year every 400 years
*/

  // Re-bias from 1970 to 1601:
  // 1970 - 1601 = 369 = 3*100 + 17*4 + 1 years (incl. 89 leap days) =
  // (3*100*(365+24/100) + 17*4*(365+1/4) + 1*365)*24*3600 seconds
  sec = SecondsSinceEpoch + 11644473600LL;

  wday = (uint)((sec / 86400 + 1) % 7); // day of week

  // Remove multiples of 400 years (incl. 97 leap days)
  quadricentennials = (uint)(sec / 12622780800ULL); // 400*365.2425*24*3600
  sec %= 12622780800ULL;

  // Remove multiples of 100 years (incl. 24 leap days), can't be more than 3
  // (because multiples of 4*100=400 years (incl. leap days) have been removed)
  centennials = (uint)(sec / 3155673600ULL); // 100*(365+24/100)*24*3600
  if (centennials > 3)
  {
    centennials = 3;
  }
  sec -= centennials * 3155673600ULL;

  // Remove multiples of 4 years (incl. 1 leap day), can't be more than 24
  // (because multiples of 25*4=100 years (incl. leap days) have been removed)
  quadrennials = (uint)(sec / 126230400); // 4*(365+1/4)*24*3600
  if (quadrennials > 24)
  {
    quadrennials = 24;
  }
  sec -= quadrennials * 126230400ULL;

  // Remove multiples of years (incl. 0 leap days), can't be more than 3
  // (because multiples of 4 years (incl. leap days) have been removed)
  annuals = (uint)(sec / 31536000); // 365*24*3600
  if (annuals > 3)
  {
    annuals = 3;
  }
  sec -= annuals * 31536000ULL;

  // Calculate the year and find out if it's leap
  year = 1601 + quadricentennials * 400 + centennials * 100 + quadrennials * 4 + annuals;
  leap = !(year % 4) && (year % 100 || !(year % 400));

  // Calculate the day of the year and the time
  yday = sec / 86400;
  sec %= 86400;
  hour = sec / 3600;
  sec %= 3600;
  min = sec / 60;
  sec %= 60;

  // Calculate the month
  for (mday = month = 1; month < 13; month++)
  {
    if (yday < daysSinceJan1st[leap][month])
    {
      mday += yday - daysSinceJan1st[leap][month - 1];
      break;
    }
  }

  // Fill in C's "struct tm"
  memset(pTm, 0, sizeof(*pTm));
  pTm->tm_sec = sec;          // [0,59]
  pTm->tm_min = min;          // [0,59]
  pTm->tm_hour = hour;        // [0,23]
  pTm->tm_mday = mday;        // [1,31]  (day of month)
  pTm->tm_mon = month - 1;    // [0,11]  (month)
  pTm->tm_year = year - 1900; // 70+     (year since 1900)
  pTm->tm_wday = wday;        // [0,6]   (day since Sunday AKA day of week)
  pTm->tm_yday = yday;        // [0,365] (day since January 1st AKA day of year)
  pTm->tm_isdst = -1;         // daylight saving time flag

  return pTm;
} 
```

[查看 ideone 的测试运行](http://ideone.com/7BADb)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T11:41:28.017

> 我不能只做简单的模数运算，因为这不考虑闰秒和其他日期/时间有趣的事情。

Java一般*不*考虑闰秒 - 或者更确切地说，这取决于平台，但我不相信它在任何常见的生产平台中实现。你确定你*需要*考虑闰秒吗？如果这样做，您应该能够对添加或删除的秒数进行简单的基于表的查找，具体取决于您的数据源是什么以及您希望它反映什么。

至于“其他日期/时间有趣的事情” - 我认为这个特定的计算没有任何有趣的事情*。*例如，时区与自纪元以来经过的时间无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:41:42.313

假设“纪元”是指 01-01-1970, 00:00:00 GMT：

```
long secondsSinceEpoch = ...;

// The constructor of Date expects milliseconds
// since 01-01-1970, 00:00:00 GMT
Date date = new Date(secondsSinceEpoch * 1000L);

DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
System.out.println(df.format(date)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:43:15.877

```
Calendar = Calendar.getInstance();
calendar.setTimeInMillis(secondsSinceTheEpoch*1000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T11:49:14.147

这是一种快速、零垃圾的解决方案。关键是不要`Calendar`在每次调用时创建一个新的实例，因为它是一个重量级的对象，占用 448 字节的堆空间和几乎一微秒的时间来初始化（Java 6、64 位 HotSpot、OS X）。

`HmsCalculator`旨在从单个线程中使用（每个线程必须使用不同的实例）。

```
public class HmsCalculator
{
  private final Calendar c = Calendar.getInstance();

  public Hms toHms(long t) { return toHms(t, new Hms()); }
  public Hms toHms(long t, Hms hms) {
    c.setTimeInMillis(t*1000);
    return hms.init(c);
  }
  public static class Hms {
    public int h, m, s;
    private Hms init(Calendar c) {
      h = c.get(HOUR_OF_DAY); m = c.get(MINUTE); s = c.get(SECOND);
      return this;
    }
    public String toString() { return String.format("%02d:%02d:%02d",h,m,s); }
  }

  public static void main(String[] args) {
    System.out.println(new HmsCalculator().toHms(
       System.currentTimeMillis()/1000));
  }
} 
```

PS我没有粘贴所有那些静态导入（无聊）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-23T23:39:20.217

# java.time

从 Java 8 及更高版本开始，要使用的内置类[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)来自[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架。

```
Instant instant = Instant.ofEpochSecond ( 1_469_168_058L ); 
```

转储到控制台。

```
System.out.println ( "instant: " + instant ); 
```

> 瞬间：2016-07-22T06:14:18Z

# 表现

我不知道*在*`java.time.Instant`执行速度或垃圾生产方面的表现如何。但是您应该针对此类进行测试。在我仔细阅读[Java 9 中的源代码时](http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/167660ada3b1/src/java.base/share/classes/java/time/Instant.java)，它看起来非常简单和快速。

通过一些方法跳转，它基本上只分配一对整数，（a）从纪元开始的秒数（a 64-bit `long`）和（b）纳秒计数作为秒的分数（a 32-bit `int`），在做了几次快速检查后：

首先查找零值，在这种情况下，它会返回纪元本身的静态实例。

```
if ((seconds | nanoOfSecond) == 0) {
    return EPOCH;
} 
```

其次对最小/最大常量对的秒数进行完整性检查。

```
if (seconds < MIN_SECOND || seconds > MAX_SECOND) {
    throw new DateTimeException("Instant exceeds minimum or maximum instant");
} 
```

然后调用构造函数，它将这对整数值分配给一对成员变量（`long`分别是`int`基元）。

```
this.seconds = epochSecond;
this.nanos = nanos; 
```

当然，这只是建筑。询问诸如时间等部分意味着更多的工作。通过`toString`涉及另一个类 a 的方法生成字符串也是如此[`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)。`toString`源代码是一行。

```
return DateTimeFormatter.ISO_INSTANT.format(this); 
```

请记住，如果您想要在 UTC 以外的时区中使用诸如年、月、日、小时等部分，这意味着更多的工作涉及[`ZoneId`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html)和[`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)课程。例如：

```
ZoneId zoneId = ZoneId.of( "America/Montreal" );
ZonedDateTime zdt = instant.atZone( zoneId ); 
```

# ios - iPad上的模态表单视图控制器 - 淡入黑色

> ID：11188625
> 
> 赞同：0
> 
> 时间：2012-06-25T11:36:41.573
> 
> 标签：ios, ipad, uiviewcontroller, background, modal-dialog

在 iPad 上呈现模态表单视图控制器时，未被表单占据的屏幕的其余部分会变暗（但保持透明）。有没有办法让它一直变暗到黑色（即变得不透明）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:42:51.827

不，dim 总是带有 alpha，要做你需要的，你必须实现你自己的模态转换表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:44:14.040

您可以使用图像来做到这一点：

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    UIImage *backgroundImage = [UIImage imageNamed:@"testimage.png"];    
    backgroundImage = [backgroundImage stretchableImageWithLeftCapWidth:20 topCapHeight:40];
    CGSize theSize = actionSheet.frame.size;
    // draw the background image and replace layer content  
    UIGraphicsBeginImageContext(theSize);    
    [theImage drawInRect:CGRectMake(0, 0, theSize.width, theSize.height)];    
    theImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    [[actionSheet layer] setContents:(id)backgroundImage.CGImage];
} 
```

或者这样做：

```
CGSize mySize = myActionSheet.bounds.size;
CGRect myRect = CGRectMake(0, 0, mySize.x, mySize.y);
UIImageView *blackView = [[[UIImageView alloc] initWithFrame:myRect] autorelease];
[redView setBackgroundColor:[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0]];
[self.view insertSubview:blackView atIndex:0]; 
```

您还可以更改 actionSheetStyle

```
MyActionSheet.actionSheetStyle=UIActionSheetStyleBlackOpaque;
MyActionSheet.actionSheetStyle=UIActionSheetStyleBlackTranslucent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T16:08:36.867

考虑到似乎没有一个漂亮的解决方案，可以通过在 prepareForSegue() 中的 presentingViewController 顶部插入一个黑色背景的子视图来完成简单的 hack。然后在您关闭表单之前，获取presentingViewController（self.presentingViewController）并删除添加的视图。

# bash - 从 bash 函数访问脚本参数而不在调用时传递它们

> ID：11188626
> 
> 赞同：2
> 
> 时间：2012-06-25T11:37:02.557
> 
> 标签：bash, bash-function

如果没有使用脚本参数显式调用函数，是否有任何方法可以从脚本函数访问 bash 脚本参数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:19:57.750

只需使用脚本的参数调用该函数。

```
foo () {
    for arg in "$@"
    do
        echo "$arg"
    done
}

foo "$@" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:32:05.787

不，但如果你在 Linux 上，你可以通过从 `/proc' 读取脚本的命令行来破解它：

```
function myfunc {

    while read -d $'\0' 
    do 
        echo "$REPLY"
    done < /proc/$$/cmdline
} 
```

`-d $'\0'`需要读取 cmdline 文件，因为字符串是 NULL（二进制零）分隔的。在示例中，`$REPLY`将依次是每个参数，包括 bash 本身。例如：

```
/home/user1> ./gash.sh one two three
/bin/bash
./gash.sh
one
two
three 
```

这是一个示例，它将函数的参数设置为脚本的参数（并显示它们）：

```
function myfunc {

    while read -d $'\0' 
    do
        args="$args $REPLY"
    done < /proc/$$/cmdline

    set -- $args
    shift 2      # Loose the program and script name
    echo "$@"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:53:54.573

简短的回答是“不，我不知道”。

如果必须这样做，我会给脚本参数起别名。

```
#!/bin/bash
script_args=("$@")
myfunc () {
    for a in "$@" ; do
        for b in "${script_args[@]}" ; do
            echo "$a: $b"
        done
    done
}

myfunc one two 
```

然后像这样调用：

```
./myscript.sh 1 2 
```

输出：

```
one: 1
one: 2
two: 1
two: 2 
```

# html - 具有纯色背景的跨浏览器不透明边框的 CSS DIV

> ID：11188632
> 
> 赞同：0
> 
> 时间：2012-06-25T11:37:28.163
> 
> 标签：html, css, cross-browser, opacity

是否可以在div上实现具有纯色背景的跨浏览器（ie6+）半透明边框？

我只发现了以下情况：

*   边框是半透明的，但背景也是半透明的。
*   身体是半透明的，但边框不是。

谁能指出我正确的方向或替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:41:31.567

这取决于您想要/必须支持的浏览器，但您可以使用 CSS3-rgba 声明来定义颜色（标准 rgb 和附加`a`- 这是 alpha/透明通道）。此外，根据背景和边框的颜色，您可能需要添加`background-clip`属性。

```
rgba(255,255,255,.5);
background-clip:padding-box; 
```

会给你一个 50% 不透明的白色。这适用于您可以指定颜色的每个属性。

IE<=8 的例外（多么令人惊讶）得到了很好的[支持。](http://caniuse.com/#search=rgba)

这是一个给你的例子：[带实心 bg 的透明边框](http://jsfiddle.net/Nwh24/1/)。

为了完整起见：必要的背景剪辑具有相同的浏览器支持，但这里有一个[浏览器支持表](http://www.standardista.com/css3/css3-background-properties/)

编辑：

对于 IE6+ 的支持，你应该看看[CSS3Pie](http://css3pie.com/)。它通过 VML 模拟圆角或其他颜色空间等 CSS3 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:20:02.087

我设法在 MSIE6 中完成了这项工作：具有不透明背景的半透明边框：

```
.qm { 
    background-attachment: fixed;
    background-color: transparent;
    background-image: url("trans_paars70.png");
    padding: 1em;
} 
```

基本上，我使用元素的*填充*来创建一个*假边框*，填充半透明背景图像（只要您提供 256 色调色板 gif 或 png，这在 MSIE6 中就可以正常工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:43:23.513

根据您需要支持的浏览器的年龄，[背景剪辑](http://www.css3.info/preview/background-origin-and-background-clip/)可能是一个很好的解决方案。

您想使用`padding-box`然后将背景颜色和边框颜色设置为您需要的任何颜色，`rgba(0,0,0,0)`用于任何半透明值，第四个值是 alpha。

希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:51:00.377

`rgba properties`嘿，现在您可以像这样习惯于**背景颜色**和**边框实心**

**CSS**

```
.parent{
    background: rgba(0,0,0,0.2);
    padding: 50px;
}

.box {
    background: #f0edcc;
    border: 24px solid rgba(0,0,0,0.3);
    padding: 10px;
    margin: 20px;
} 
```

**HTML**

```
<div class="parent">
    <div class="box">Your message.</div>
</div> 
```

现场演示[http://jsfiddle.net/gf5Fd/1/](http://jsfiddle.net/gf5Fd/1/)

# java - 休眠 4.0 中的 HibernateDaoSupport

> ID：11188633
> 
> 赞同：5
> 
> 时间：2012-06-25T11:37:31.250
> 
> 标签：java, spring, hibernate, jakarta-ee

我是 jsf 2.0 spring 3.1 和 hibernate 4.1 集成的新手。我如何更改以下代码，因为 hibernate 4.0 不包含 HibernateDaoSupport。

```
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

    public class CustomerDaoImpl extends 
           HibernateDaoSupport implements CustomerDao{

        public void addCustomer(Customer customer){

            customer.setCreatedDate(new Date());
            getHibernateTemplate().save(customer);

        }

        public List<Customer> findAllCustomer(){

            return getHibernateTemplate().find("from Customer");

        }
    } 
```

我正在尝试这个示例：[http ://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/](http://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T11:56:27.333

我找到了解决方案。我应该改用会话工厂。

```
import java.util.List;

import org.hibernate.SessionFactory;

public class CustomerDaoImpl implements CustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){

        getSessionFactory().getCurrentSession().save(customer);

    }

    public List<Customer> findAllCustomer(){

        List list = getSessionFactory().getCurrentSession().createQuery("from Customer").list();
        return list;

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T06:47:13.717

Another way to get hibernate session via annotation like following

```
@Autowired
@Qualifier("sessionFactory")
private SessionFactory sessionFactory;

public Session getSession() {
    return sessionFactory.getCurrentSession();
} 
```

SessionFactory bean in spring applicationContext.xml

```
 <!--  sessionFactory -->
    <bean id="sessionFactory"
          class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="packagesToScan">
            <list>
                <value></value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props></props>
        </property>
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
    </bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T21:17:38.907

正如 Samira 上面所说，将“SessionFactory”替换为“HibernateDaoSupport”是任何新 Spring/Hibernate 代码的“正确方法”：

> [https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/orm/hibernate4/support/HibernateDaoSupport.html](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/orm/hibernate4/support/HibernateDaoSupport.html)
> 
> 注意：Hibernate 访问代码也可以用普通的 Hibernate 样式编码。因此，对于新启动的项目，请考虑采用基于 SessionFactory.getCurrentSession() 的标准 Hibernate 编码数据访问对象的风格。这个 HibernateTemplate 主要作为基于 Hibernate 3 的数据访问代码的迁移助手存在，以受益于 Hibernate 4.x 中的错误修复。

但是......我也在 Mkyong.com 教程之一中遇到了同样的问题：

[http://www.mkyong.com/spring/maven-spring-hibernate-mysql-example/](http://www.mkyong.com/spring/maven-spring-hibernate-mysql-example/)

我正在使用 Spring 4.2.4.RELEASE 和 Hibernate 4.3.8.Final。

我的权宜之计（让教程启动/运行）是使用 Spring-orm 对 HibernateDaoSupport 的内置支持。具体来说，我只是将导入的行从“hibernate3”更改为“hibernate4”：

StockDaoImpl.java =>

```
package com.mkyong.stock.dao.impl;
...
// import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
import org.springframework.orm.hibernate4.support.HibernateDaoSupport;
... 
```

万一有人遇到同样的问题:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-04T07:15:39.610

您可以通过扩展 HibernateDAOSupport 类并覆盖其 afterPropertiesSet() 方法来使用 Hibernate DAO 支持。

在 HibernateDAO 支持中调用此方法，当时由于 sessionFactory 为 null，因此引发此错误。在您的自定义类中，您可以显式设置此属性，然后调用父类的相同方法（即 HibernateDAOSupport 的 addProperties() 方法）

```
package com.techcielo.spring4.hibernate.template;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.stereotype.Component;

@Component("hibernateTemplate")
public class Hibernate4CustomTemplate extends HibernateTemplate{

    @Autowired(required=true)
    private SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory sessionFactory) {
        System.out.println("Setting SessionFactory");
        this.sessionFactory = sessionFactory;
        super.setSessionFactory(sessionFactory);
    }

    @Override
    public void afterPropertiesSet() {
    System.out.println("Checking if properties set..."+this.sessionFactory);
    setSessionFactory(sessionFactory);
    super.afterPropertiesSet();
    }
} 
```

以下可用于[示例](http://keyurj.blogspot.in/2014/01/jms-with-spring-4.html)！

# view - 使用 xib 创建自定义视图

> ID：11188634
> 
> 赞同：8
> 
> 时间：2012-06-25T11:37:31.343
> 
> 标签：view, xamarin.ios, xib, nib

使用 MonoTouch，我正在尝试制作自定义视图，因此我可以在屏幕中多次重复使用此视图。（这是一堆标签和按钮）在阅读了这篇文章的答案后： [如何在 monotouch 中将自定义视图添加到 XIB 文件定义的视图中，](https://stackoverflow.com/questions/9857558/how-to-add-a-custom-view-to-a-xib-file-defined-view-in-monotouch) 我必须接近，但这似乎只允许我添加自定义视图，在 myCustomView.CS 中定义，但我正在寻找的是一种使用单独的 .XIB 在界面构建器中设计我的自定义视图并且仅使用相应的 cs 文件来添加逻辑的方法。如果我尝试创建一个同名的 XIB，则内容将不可见。

遵循的步骤：

*   在 MyCustomView.CS 我放了`[Register("MyCustomView")]`.

*   我实现了构造函数`public MyView(IntPtr handle) : base(handle) {}`

*   在 Interface Builder 中打开 ViewController.XIB，添加一个 UIView 并将其 Class 设置为 MyCustomView。

当我运行这段代码时，我看到了新添加的 UIView，但没有看到视图内部的元素，即 MyCustomView.XIB 的内容

如果我在 MyCustomView.CS 的代码中添加一些内容，`this.Backgroundcolor = UIColor.Blue;`则会显示这样的内容，但不会显示任何添加到 .XIB 的元素。如何告诉 Monotouch 显示 MyCustomView.XIB 中定义的所有内容？

在 Objective-C 示例中，我看到诸如“initWithNib”之类的东西不幸的是，Monotouch api 中没有记录“LoadNib”部分，但这听起来像是我应该做的事情，但是如何以及在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T20:48:12.203

根据我在 obj-c 代码方面的经验，我将尝试以下代码：

```
var views = NSBundle.MainBundle.LoadNib(nibName, this, null); // (1)
MyCustomView myView = Runtime.GetNSObject(views.ValueAt(0)) as MyCustomView; // (2) 
```

(1)允许你加载xib文件

(2) 允许您将 IntPtr 转换为适当类型的 NSObject（子）类型。

拥有`myView`后，您可以将其添加为传统视图。检查您是否正确设置了视图的输出。

PS如果您提供一些其他详细信息，我们可以帮助您。此外，请检查代码，因为我是手写的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T19:51:55.040

一个非常好的问题，但更多的是关于 XIB 的工作原理以及我们可以做些什么。

问题是当您将对象添加到 XIB 并将其设置为自定义类时，您只需指示 UIKit 创建此对象的实例。您在 IB 中将其视为视图、按钮或任何控件的事实正是 IB 为您绘制它的方式。这样，创建前景的责任就完全落在了你的班级身上。

在 Objective-C 中，我们可以做一个很好的作弊，让 XIB 具有自定义视图，并且仍然通过设置添加视图的类名将它们添加到 IB。这是可能的，因为您可以从 Objective-C 中类的 -init 方法返回任何实例，而这在 C# 中是不可能的。

但是，您仍然可以通过执行以下操作来缓解生活：

1.  让我们将**XIB**定义为包含自定义视图内容的 XIB；**放置**为您想要添加自定义视图的 XIB。
2.  创建您的自定义视图类和一个 XIB 来放置它的内部
3.  处理 AwakeFromNib 方法以实际加载您的 XIB
4.  加载您的 XIB 后，只需将其内部作为子视图添加到您的实例中。
5.  放置一个常规视图并将它的类设置为您自己的**放置**
6.  享受！

但是，您必须接受您的 XIB 将包含一个根视图或其他东西，它将**作为子视图**添加到放入**放置**的类的实例中。

这样，你应该有类似的东西：

XIB 与您的自定义视图内容：

![XIB 与您的自定义视图内容](../Images/07b485660a658233bee7b803918b069e.png)

添加 XIB 的位置：

![添加 XIB 的位置](../Images/ceea0724ccf634738cd5ef14ae57e270.png)

由于添加到放置的视图实例与 XIB 中的文件所有者**相同**，因此您可以在 XIB 和放置中设置出口和**操作**。只是不要忘记您的 XIB 中的根视图不是 UIKit 将创建以放置到 Placement 中的实例。

为方便起见，请在下面找到我的代码，它是基类以简化此类视图的创建：

```
using System;

using MonoTouch.ObjCRuntime;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace Member.iOS.Base.Views {

    /// <summary>
    /// XibView is a Xib-backed UIView subclass which enables easy customization and custom
    /// behavior addition.
    /// </summary>
    public class XibView : UIView {

        /// <summary>
        /// Exception thrown when a loaded XIB doesn't contain any views inside it.
        /// </summary>
        class EmptyXibException : Exception {
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="Member.iOS.Base.Views.XibView"/> class.
        /// </summary>
        /// <param name='handle'>
        /// Handle.
        /// </param>
        public XibView(IntPtr handle) : base(handle) {
        }

        /// <summary>
        /// Upon loading from a containing XIB, takes care of replacing the current instance (which acts as a stab) with
        /// a real view loaded from its XIB.
        /// </summary>
        public override void AwakeFromNib() {
            base.AwakeFromNib();

            NSArray views = NSBundle.MainBundle.LoadNib(GetType().Name, this, new NSDictionary());

            if (views.Count == 0) {
                throw new EmptyXibException();
            }

            UIView rootView = Runtime.GetNSObject(views.ValueAt(0)) as UIView;
            rootView.Frame = new System.Drawing.RectangleF(0, 0, Frame.Width, Frame.Height);
            AddSubview(rootView);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-02T09:00:25.550

您可以使用容器视图代替 nib 文件来简化操作。你可以尝试这样的事情[。](https://xamarinexperience.blogspot.com/2019/03/how-to-re-use-views-in-xamarin.html)

# java - 无法让我的代码在另一个图像的尺寸内生成图像。使用 LibGDX

> ID：11188647
> 
> 赞同：1
> 
> 时间：2012-06-25T11:38:13.407
> 
> 标签：java, image, libgdx

嗨，我已经设置了 2 个矩形矩形 1 和矩形 2

我想在当前 X + 第一个图像的宽度位置之间生成一个图像。

但我似乎无法得到这个值，因为它会引发错误。错误：

```
Exception in thread "LWJGL Application" java.lang.NullPointerException
at com.inspirednotion.thing.Thing.<init>(Thing.java:65)
at com.inspirednotion.thing.MainThing.create(MainThing.java:18)
at    com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:144)
at    com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)
AL lib: ReleaseALC: 1 device not closed 
```

这是我正在使用的代码：

```
package com.inspirednotion.thing;

import java.util.Iterator;
import java.util.Random;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.utils.Array;
import com.badlogic.gdx.utils.TimeUtils;

public class Thing implements Screen {

MainThing g;
public OrthographicCamera cam;
public SpriteBatch batch;
public Texture t;
public TextureRegion tR;

public Texture tt;
public TextureRegion ttR;

public Texture cloud;
public TextureRegion cloudR;

Array<Rectangle> raindrops;
long lastDropTime;

Rectangle cloudRec;

Texture rainDrop;
TextureRegion rainDropR;

Rectangle water;

Random rand;

float moveY;

public Thing(MainThing g){
    this.g=g;
    cam = new OrthographicCamera(480,800);
    cam.position.set(480/2, 800/2, 0);
    batch = new SpriteBatch();
    t = new Texture(Gdx.files.internal("bg.png"));
    tR = new TextureRegion(t,0,0,480,700);

    tt = new Texture(Gdx.files.internal("bgCloud.png"));
    ttR = new TextureRegion(tt,0,0,480,350);

    cloud = new Texture(Gdx.files.internal("cloud.png"));
    cloudR = new TextureRegion(cloud,0,0,256,140);

    rainDrop = new Texture(Gdx.files.internal("RainDrop.png"));

    rand = new Random();

    moveY = 0;

    raindrops = new Array<Rectangle>();
    spawnRaindrop();

    cloudRec = new Rectangle();
    cloudRec.x = cam.viewportWidth /2 - 256 / 2;
    cloudRec.y = 600;
    cloudRec.height = 140;
    cloudRec.width = 256;

    water = new Rectangle();
    water.x = 0;
    water.y = -700;
    water.width = 480;
    water.height = 700;

}

private void spawnRaindrop() {
      Rectangle raindrop = new Rectangle();
      raindrop.x = MathUtils.random(cloudRec.x, cloudRec.x + cloudRec.width);
      raindrop.y = 510;
      raindrop.width = 64;
      raindrop.height = 64;
      raindrops.add(raindrop);
      lastDropTime = TimeUtils.nanoTime();
   }

@Override
public void render(float delta) {
    Gdx.gl.glClearColor(1, 1, 1, .05f);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    cam.update();
    batch.setProjectionMatrix(cam.combined);
    batch.begin();
    batch.draw(ttR,0,450,480,350);
    batch.end();

    batch.begin();
    if(moveY < cam.viewportHeight -200){
        water.y += 10  * Gdx.graphics.getDeltaTime();
    }else
    {
        moveY = 0;
    }
    batch.draw(tR, water.x, moveY + water.y , water.width, water.height);
    /*batch.draw(tR, 0, moveY -700,cam.viewportWidth, cam.viewportHeight);*/
    batch.end();

    batch.begin();
    batch.draw(cloudR, cloudRec.x, cloudRec.y, cloudRec.width,       cloudRec.height);
    batch.end();

    batch.begin();
    for(Rectangle raindrop: raindrops) {
         batch.draw(rainDrop, raindrop.x , raindrop.y);
      }
    batch.end();

    if(TimeUtils.nanoTime() - lastDropTime > 1000000000) spawnRaindrop();

     Iterator<Rectangle> iter = raindrops.iterator();
      while(iter.hasNext()) {
         Rectangle raindrop = iter.next();
        //this effects the speed of downward movement
         raindrop.y -= 200 * Gdx.graphics.getDeltaTime();
        if(raindrop.y < water.y+680) iter.remove();
       // if(raindrop.overlaps(water)) {
           // dropSound.play();
          //  iter.remove();
        }}

@Override
public void resize(int width, int height) {
    // TODO Auto-generated method stub

}

@Override
public void show() {
    // TODO Auto-generated method stub

}

@Override
public void hide() {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() {
    // TODO Auto-generated method stub

} 
```

}

非常感谢任何帮助。

谢谢

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:10:54.673

您需要在调用之前实例化您的**cloudRec**`spawnRaindrop()`。那将是您的 NullPointerException 的原因，因为您正在尝试在`spawnRaindrop()`方法中使用 cloudRec ..

# facebook - 在我自己的 Facebook 应用程序中使用 Facebook 通知

> ID：11188648
> 
> 赞同：0
> 
> 时间：2012-06-25T11:38:15.187
> 
> 标签：facebook, codeigniter, notifications

我正在尝试使用我自己的 Facebook 应用程序来开发自己的 Facebook 应用程序`Codeigniter`，我正在询问当用户在他的帖子中添加或有人评论时我如何实现 Facebook 通知，是否可以使用 Facebook 通知而不是电子邮件通知来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:38:21.210

您无法通过 API 向用户发送通知。当有人在 Facebook 上采取行动时，会自动生成通知，例如对状态的评论、喜欢状态、应用程序请求。

您可以通知用户的唯一方法是使用请求 - 来自用户或来自应用程序。两者都[在这里详细介绍](https://developers.facebook.com/docs/requests/)。您可以使用“用户到用户”请求或“应用程序到用户”请求。

# asp.net - 没有 ms Visual Studio 的 asp.net 301 重定向

> ID：11188650
> 
> 赞同：0
> 
> 时间：2012-06-25T11:38:23.737
> 
> 标签：asp.net

我有一个网站（asp.net c#），2 个域的 dns 都指向同一个服务器。对于一个域网站显示正确，但对于第二个，它显示 IIS7 启动页面...

www.mydomain.com - 工作正常 www.mydomain.co.uk - IIS7 splas 页面

如何进行 301 重定向，以便我可以将非工作域指向工作域或将第二个域添加到网站设置以显示网站内容。

我没有 MS Visual Studio，我正在使用其他编辑器来编辑文件，那么我需要编辑哪个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:59:52.543

正如@Furqan 提到的，您可以将另一个域绑定添加到您的网站，但就您网站的访问者（以及 Google 等搜索引擎）而言，现在存在两个内容相同的网站。这不好。

为 IIS 安装“URL Rewriter”插件：[http ://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

在 IIS 中，将第二个域名添加到您的绑定中（不要忘记非 www 版本，因此您应该有四个绑定：

```
mydomain.com
www.mydomain.com
mydomain.co.uk
www.mydomain.co.uk 
```

然后，您需要设置一个“规范域”规则，将每个访问者重定向到您网站的单个域名版本。在 IIS 管理器中，转到您的网站并打开“URL 重写”，然后单击“添加新规则”并选择“规范...”，然后为您的网站选择规范域，单击完成，一切就绪。

现在，来自 www.mydomain.co.uk 或 mydomain.com 的任何访问者都将被重定向到 www.mydomain.com

# ios - 应用程序无法在 ipad 上安装

> ID：11188652
> 
> 赞同：0
> 
> 时间：2012-06-25T11:38:36.723
> 
> 标签：ios, ipad

我正在设备上安装应用程序；使用临时分发我的应用程序在两台设备上运行良好，但它不能在另一台设备上运行。我已将所有设备包含在我的分发证书中，但我仍然无法解决这个问题。

是否有任何可能的安装错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:21:06.090

确定您的设备是否包含在配置文件中的一种方法是使用 7-zip 之类的程序打开 .ipa 文件。

查找名为 embedded.mobileprovision 的文件并将其提取到某处。使用文本编辑器打开它，您会在垃圾中找到已配置的设备 UDID 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:41:45.800

您的应用程序可能包含旧的 mobileprovision 文件，但没有新设备的 UDID。

您是否下载并安装了包含在 Xcode Organizer 中的新 UDID 的 .mobileprovision 文件？

有时我不得不进入 Xcode 管理器并删除旧的 .mobileprovision 文件，然后 Xcode 才能正确地将新文件包含在构建中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:53:47.597

正如这里的其他人所提到的，有时如果您尝试重新做一遍，事情就会解决。

*   在配置门户中将手机重新添加到您的配置文件中，然后再次下载。

*   在 Xcode -> Organizer -> Devices -> Library/Provisioning Profiles 中从您的计算机中删除旧的配置文件，然后重新安装。

*   在您的目标中再次选择配置文件，然后清理，然后再次重建/存档。

但是还要确保检查您正在安装的设备没有比您的应用程序**部署目标中指定的旧****版本的 iOS**。这发生在我身上一次，错误信息是一样的。

# android - Android：Monkey 如何检测崩溃和 ANR

> ID：11188656
> 
> 赞同：-2
> 
> 时间：2012-06-25T11:38:48.223
> 
> 标签：android, xamarin.android

1.  如何通过猴子避免 ANR 和崩溃。

2.  如何通过 Monkey 服务器发送事件（例如，从设备上运行的应用程序注入事件（点击、键等））

    有什么建议或帮助吗？...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:29:19.860

好吧，您找到了有关如何使用 Monkey 的文档。要从您的应用程序执行 Monkey 命令，我认为您需要调用 shell 命令，这在此博客文章中进行了描述：http: [//shreyagarwal.blog.com/2011/04/20/executing-shell-commands-in-android -应用程序/](http://shreyagarwal.blog.com/2011/04/20/executing-shell-commands-in-android-applications/)

避免 ANR 取决于您，您需要找出导致它们的原因。只需将密集型任务排除在 UI 线程之外，大部分时间你都会很顺利。

# objective-c - NSURLConnection 是否支持 FTP 被动模式？

> ID：11188661
> 
> 赞同：0
> 
> 时间：2012-06-25T11:38:59.097
> 
> 标签：objective-c, ios, networking

我无法从我的 iOS 应用程序连接到 FTP 服务器（被动模式）。我不知道它是否与 ftp 服务器（linux 12.04 上的 proftpd）、端口范围或客户端（我使用的是 NSURLConnection）有关。

在此先感谢您的帮助。

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:37:45.410

您是否尝试在您的信息流中设置`kCFStreamPropertyFTPUsePassiveMode`为？`YES`

# exception - CORBA 接口中的属性 - 服务器编译后出现错误

> ID：11188666
> 
> 赞同：0
> 
> 时间：2012-06-25T11:39:08.217
> 
> 标签：exception, corba

又是我在使用 CORBA 时遇到了麻烦。我只是想在 CORBA 中编写一些示例接口，其中接口将具有一个属性。

这是我的idl文件：

```
interface Interfface
{
    readonly attribute double number;

    exception myOwnException {
        string reason;
    };

    void ffunction(in double arg) raises (myOwnException);
    double getNumber();
    void setNumber(in double number);
}; 
```

我对 IDL 接口的实现：

```
#include "interface.hh"

class Implementation : public POA_Interfface
{
    private :
        double number;

    public :
        virtual void ffunction(double arg);
        virtual double getNumber();
        virtual void setNumber(double number);
};

#include "implementation.h"

void Implementation::ffunction(double arg)
{
    this->number = 0;
    arg++;
    throw Interfface::myOwnException("Sth went terribly wrong!");
}

void Implementation::setNumber(double number){
    this->number = number;
}

double Implementation::getNumber(){
    return this->number;
} 
```

当我编译interface.idl、implementation.h、implementation.cpp 就可以了。问题是当我想编译我的 server.cpp 时：

```
#include "implementation.h"
#include <iostream>
#include <omniORB4/CORBA.h>
#include <omniORB4/Naming.hh>

using namespace std;

int main(int argc, char ** argv)
{
    try {
        // init ORB
        CORBA::ORB_ptr orb = CORBA::ORB_init(argc, argv);

        // init POA
        CORBA::Object_var poa_obj = orb->resolve_initial_references("RootPOA");
        PortableServer::POA_var poa = PortableServer::POA::_narrow(poa_obj);
        PortableServer::POAManager_var manager = poa->the_POAManager();

        // create service
        Implementation * service = new Implementation;

        // register within the naming service
        try {
            CORBA::Object_var ns_obj = orb->resolve_initial_references("NameService");
            if (!CORBA::is_nil(ns_obj)) {
                CosNaming::NamingContext_ptr nc = CosNaming::NamingContext::_narrow(ns_obj);
                CosNaming::Name name;
                name.length(1);
                name[0].id = CORBA::string_dup("TestServer");
                name[0].kind = CORBA::string_dup("");
                nc->rebind(name, service->_this());
                cout << "Server is running ..." << endl;
            }
        } catch (CosNaming::NamingContext::NotFound &) {
            cerr << "not found" << endl;
        } catch (CosNaming::NamingContext::InvalidName &) {
            cerr << "invalid name" << endl;
        } catch (CosNaming::NamingContext::CannotProceed &) {
            cerr << "cannot proceed" << endl;
        }

        // run
        manager->activate();
        orb->run();

        // clean up
        delete service;

        // quit
        orb->destroy();
    } catch (CORBA::UNKNOWN) {
        cerr << "unknown exception" << endl;
    } catch (CORBA::SystemException &) {
        cerr << "system exception" << endl;
    }
} 
```

它给了我错误：

> server.cpp：在函数'int main（int，char**）'中：server.cpp：20：错误：无法分配抽象类型'Implementation' implementation.h：4的对象：注意：因为以下虚拟函数是纯在“实现”中：interface.hh:197：注意：虚拟 CORBA::Double _impl_Interfface::number()

似乎 CORBA 将我的“数字”属性视为一个函数，而不是一个属性，对吗？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:03:48.173

通过声明一个属性 number，您将自动获得一个 number() 访问器和设置，您都必须在您的仆人中实现它们。您不需要在 IDL 中定义 getNumber() 和 setNumber()，只需从属性中删除 readonly 标记即可拥有 setter。

只需将属性视为自动生成可远程访问的 setter 和 getter 的东西。

# php - 如何使用 preg_replace 从字符串中删除单个字符的单词

> ID：11188674
> 
> 赞同：2
> 
> 时间：2012-06-25T11:39:31.817
> 
> 标签：php, regex, preg-replace

鉴于以下输入 -

```
"I went to 1 ' and didn't see p" 
```

，PHP 的 preg_replace 函数删除所有单个字符（以及剩余的空格）的正则表达式是什么，以便输出为 -

`"went to and didn't see".`

我一直在寻找解决方案，但找不到。类似的例子没有包括对正则表达式的解释，所以我无法让它们适应我的问题。所以，如果你知道怎么做，请提供正则表达式，但也要分解它，以便我理解它是如何工作的。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:46:14.707

试试这个：

```
$output = trim(preg_replace("/(^|\s+)(\S(\s+|$))+/", " ", $input)); 
```

*   `(^|\s+)`表示“字符串或空格的开头”
*   `(\s+|$)`表示“空格字符串的结尾”
*   `\S`是单个非空格字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:44:54.450

试试这个正则表达式

```
'\s+\S\s+' -> ' ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:47:10.490

你需要两张通行证

首先是去掉所有单个字符

```
(?<=^| ).(?=$| ) replace with empty string 
```

第二个是只留下一个空格

```
[ ]{2,} replace with single space 
```

您最终会得到一个开头或结尾可能有空格的字符串。我会用你的语言来修整这个，而不是用正则表达式来做

例如，第一个正则表达式是用 php 编写的，例如

```
$result = preg_replace('/(?<=^| ).(?=$| )/sm', '', $subject); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:52:06.727

在和的帮助下[`implode`](http://in.php.net/manual/en/function.implode.php)尝试 [`explode`](http://in.php.net/manual/en/function.explode.php)[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)

```
$str ="I went to 1 ' and didn't see p";
$arr = explode(' ',$str);
function singleWord($var)
{
  if(1 !== strlen($var))
  return $var;
}
$final = array_filter($arr,'singleWord');

echo implode(' ',$final);
//return "went to and didn't see"(length=19) 
```

# jstree - jsTree 禁止移动一些节点

> ID：11188679
> 
> 赞同：4
> 
> 时间：2012-06-25T11:40:03.590
> 
> 标签：jstree

我有一个 jsTree，我希望它的一些节点是可移动的。不能移动根节点及其直接子节点。

我正在使用 crrm 并且它按预期工作，但它仍然允许我拖动所有节点，即使是那些无法拖放到任何地方的节点（直接在根目录下）。我根本不希望它们可拖动，即用户根本不能拾取它们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-03T00:33:47.733

在当前版本的 jsTree (3.0.8) 中，您可以这样做：

```
$('#my_jstree')
            .jstree({
                "core" : {
                    "check_callback" : true
                },
                "dnd" : {
                    "is_draggable" : function(node) {
                        console.log('is_draggable called: ', node[0]);
                        if (node[0].type != 'MY-DRAGGABLE-TYPE') {
                            alert('this type is not draggable');
                            return false;
                        }
                        return true;
                    }
                },
                "types" : {
                    "default" : {
                        "icon" : "glyphicon glyphicon-flash"
                    },
                    "MY-DRAGGABLE-TYPE" : {
                        "icon" : "glyphicon glyphicon-info-sign"
                    }
                },
                "plugins" : [ "dnd", "types" ]}) 
```

使用 is_draggable 函数和 types 插件来控制可以拖动的内容。如果您想查看我使用的图标，包括 bootstrap 的 glyphicons 样式表。此处的代码假设您的 HTML 中已经有 jstree 的 div 和列表。如果有人看不懂上面的代码，我会发布一个 plunkr。

编辑 - 为防止掉落，请执行以下操作：

```
"core" : {
                    "check_callback" : function(operation, node, node_parent, node_position, more) {
                        if (operation == 'move_node') {
                            console.log(node_parent);
                            if (node_parent.type == 'MY-DROPPABLE-TYPE') {
                                return true
                            } else
                                return false;
                        }
                    }
                }, 
```

使用 check_callback 函数来筛选 droppable 的类型。使用 node_parent 来获取 droppable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:40:12.160

问了类似的问题，请查看我的答案： [dnd，如何限制删除某些节点类型？](https://stackoverflow.com/questions/11000095/dnd-how-to-restrict-dropping-to-certain-node-types/11013346#11013346)

crrm.move.check_move 函数需要进行某种类型的气味测试。你的情况，这将是根和第一个孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:09:21.503

我想你需要的是`drag_check`

```
 "dnd"  :   {

        "drop_target"   :   false,

        "drag_check"    :   function(data)

        {  
          if( data.r.attr("id") ==  ... ) 
                    return false;
           //if you want to enable drag for certain nodes  return following
           return {
                    after : true,
                    before : false,
                    inside : false
                }
          } 
```

# delphi - 检测集中控制变化的灵活方法

> ID：11188692
> 
> 赞同：7
> 
> 时间：2012-06-25T11:40:39.717
> 
> 标签：delphi, focus, components, delphi-2009

我需要编写一个组件，该组件将在自己的其他组件中注册，并检测其中一个注册组件是否获得焦点。

例如对于我的组件`TFocusObserver`，我正在注册三个对象。

```
FocusObserver.Register(MyMemo);
FocusObserver.Register(MyButton);
FocusObserver.Register(MyEdit); 
```

现在，如果其中一个组件获得焦点，那么`FocusObserver`就会触发一些通知事件。

我正在寻找如何检测焦点变化并发现这`TScreen.OnActiveControlChange`正是我所需要的。所以我的组件可以连接到这个事件。问题是可能存在不止一个`TFocusObserver`，或者在将来其他人可能想要使用`OnActiveControlChange`。

这是我将从多播事件中受益的时候——它会立即解决我的问题。

我正在考虑如何解决这个问题，我目前有两个想法：

1.  以某种方式扩展`TScreen`，以便为我提供更多活动。
2.  引入一个中间对象，该对象将连接`OnActiveControlChange`并为其他对象公开一个多播事件。

在简要查看了来源之后，我不清楚如何使用第一个想法来解决它，而第二个想法的缺点是有人可以简单地分配另一种方法，`OnActiveControlChange`而一切都分崩离析。

将不胜感激一些建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T13:14:46.193

如果您的 focusObserver 类可以是 TWinControl 的后代，那么您可以这样做：

```
TFocusObserver = class( TWinControl )

  procedure CMFocusChanged(var Message: TCMFocusChanged); message CM_FOCUSCHANGED;
end; 
```

和

```
procedure TFocusObserver.CMFocusChanged(var Message: TCMFocusChanged);
var
  LControl: TWinControl;

begin
      LControl := TWinControl(Message.Sender);

      if LControl <> nil then
      begin
        form1.Caption := lControl.Name;
      end;
end; 
```

这里的主要思想是观看`CM_FOCUSCHANGED`。

**第二种方法：**

注册控件时，您将其替换为`WindowProc`. 这是一个小代码片段：

```
TRegisteredComp = class
  private
    fControl: TControl;
    fowndproc: TWndMethod;
    procedure HookWndProc(var Message: TMessage);
  public
    constructor Create( c: TControl );
    destructor Destroy; override;
  end;

  TFocusObserver = class
  private
    l: TList;
   public
    constructor Create;
    destructor Destroy; override;
    procedure reg( c: TControl );

  end; 
```

并正在实施中：

```
constructor TFocusObserver.Create;
begin
  l := TList.Create;
end;

destructor TFocusObserver.Destroy;
var i: integer;
begin
  for i := 0 to l.Count - 1 do
    TRegisteredComp(l[i]).Free;
  l.Free;
  inherited;
end;

procedure TFocusObserver.reg( c: TControl );
var
  rc: TRegisteredComp;
begin
  rc := TRegisteredComp.Create( c );
  l.Add( rc );
end;

constructor TRegisteredComp.Create(c: TControl);
begin
  fControl := c;
  fowndproc := c.WindowProc;
  c.WindowProc := HookWndProc;
end;

destructor TRegisteredComp.Destroy;
begin
  fControl.WindowProc := fowndproc;
  inherited;
end;

procedure TRegisteredComp.HookWndProc(var Message: TMessage);
begin
  if ( Message.Msg = CM_FOCUSCHANGED ) and
    ( TControl(Message.LParam) = fControl ) then
    form1.ListBox1.Items.Add( 'focused: ' + fControl.Name );

  fowndproc( Message );
end; 
```

不仅仅是注册您要观看的控件，例如：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
begin
  fo := TFocusObserver.Create;
  for i := 0 to ControlCount - 1 do
    fo.reg( Controls[i] );
end; 
```

听起来怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:03:51.437

您可以在组件替换它之前记住 Screen.OnActiveControlChange 的值。

```
FOnActiveControlChange := Screen.OnActiveControlChange;
Screen.OnActiveControlChange = MyOnActiveControlChange; 
```

然后在 xxx.MyOnActiveControlChange

```
begin
  // what you wanted to do here
  ...

  if Assigned( FOnActiveControlChange) then begin

    // Forward to previous subscriber.
    FOnActiveControlChange( Sender, ...);
end; 
```

但这仅在您控制应用程序时才有效，如果其他人使用您的组件并且他/她有其他组件也使用 OnActiveControlChange 事情可能会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T22:25:00.620

我知道这是一个非常古老的帖子，但它是：

如果使用第三方库是一个选项，你总是可以使用 Spring4d

我在过去实现了类似的东西。它在以下行中：

```
uses

Spring;

type

TActiveControl = class(TObject)
private
   FEvent : Event<TNotifyEvent>;
   class var FInstance : TActiveControl;
   function GetOnActiveControlChanged : IEvent<TNotifyEvent>;
   procedure DoOnActiveControlChanged(Sender : TObject);
public
   class property Instance : TActiveControl read FActiveControl;
   property OnActiveControlChanged : IEvent<TNotifyEvent> get GetOnActiveControlChanged;
   constructor Create;
   destructor Destroy; override;
end;

TSubscriber = class(TObject)
private
   procedure DoOnActiveControlChanged(Sender : TObject);
public
   constructor Create;
   destructor Destroy; override;
end;

...

function TActiveControl.GetOnActiveControlChanged : IEvent<TNotifyEvent>
begin
  Result := FEvent;
end;

constructor TActiveControl.Create
begin
  Screen.OnActiveControlChanged := DoOnActiveControlChanged;
end;

destructor TActiveControl.Destroy;
begin
   OnActiveControlChanged.Clear;
   FOnActiveControlChanged := nil;
   inherited;
end;

procedure TActiveControl.DoOnActiveControlChanged(Sender : TObject);
begin
  if OnActiveControlChanged.CanInvoke
     OnActiveControlChanged.Invoke(Sender);
end;

procedure TSubscriber .DoOnActiveControlChanged(Sender : TObject);
begin
   // OnActiveControl has been triggered
end;

constructor TSubscriber.Create;
begin
   TActiveControl.Instance.OnActiveControlChanged.Add(DoOnActiveControlChanged); 
end;

destructor TSubscriber .Destroy

initialization

   TActiveControl.FInstance := TActiveControl.Create;

finalization

   FreeAndNil(TActiveControl.FInstance); 
```

在这种情况下，我为 TActiveControl 使用了单例模式的简单版本。您还可以为它创建一个接口 (IActiveControl)，并在必要时使用 IOC 注入它。这是进一步的步骤。

This way, all your calls to Screen.OnActiveControlChanged should instead use TActiveControl.Instance.OnActiveControlChanged. Spring4d is awesome. There's lots of stuff in it, including multicast, IOC container, collections, etc. etc.

# c# - 按小时计算加班

> ID：11188698
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:41:12.513
> 
> 标签：c#, sql-server

我有两张桌子。一个名为 *tbl_workers*，另一个名为 *tbl_attendance*。在 *tbl_worker* 中，我记录了工人的工资。在 *tbl_attendance* 中，我记录了他在特定日期的加班情况。现在，我想要的是首先为工人生成每小时工资。将工资除以 31，然后将结果除以 9，因为 9 小时是办公室的正常工作日。通过这样做，我掌握了工人的每小时费率。现在，我想要将 *tbl_attendence* 的每一行（OT 是列的名称）乘以工人的每小时费率，并将其存储在另一个名为 *overtime_rate* 的列中。到目前为止我所做的是：

```
SqlConnection con = new SqlConnection(@"Data Source=TIMBERTRENDZ-PC\NEWSERVER;Initial Catalog=trendz;user id=sa;Password=Letmein3#;Trusted_connection=False");
        con.Open();
        SqlCommand cmd = new SqlCommand("Select worker_salary from tbl_workers where worker_id='"+textBox1.Text +"'",con);
        int salary = (int)cmd.ExecuteScalar();
        salary = salary/31;
        salary = salary / 9;
        label1.Text = Convert.ToString(salary);
        SqlCommand cmd1 = new SqlCommand("Select ot from tbl_attendence where worker_id='"+textBox1.Text + "'",con);
        int ot = (int)cmd1.ExecuteScalar();
        ot = ot / 60;
        salary = salary * ot;
        SqlCommand cmd2 = new SqlCommand("update tbl_attendence set overtime_rate='"+salary +"' where worker_id='"+textBox1+ "'",con);
        /**int i = cmd2.ExecuteNonQuery();
        label2.Text = Convert.ToString(i);
        **/ 
```

但这会在与工作人员 ID 匹配的所有列中存储相同的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:57:41.197

好的，我需要一个解释，首先，当它可以作为数据库中的单个更新完成时，为什么你要使用 ADO.Net当员工工资发生变化时变得不同步，您需要确保加班值也得到更新。

```
Select ((worker_salary / 31) / 9) * (ot / 60) 
from tbl_attendence as a 
inner join tbl_workers as w on w.worker_id = a.worker_id
where worker_id= 
```

此查询将根据您上面的计算为您提供 OT 率。然后更新 tbl_attendance 表中的 overtime_rate 字段，您可以运行

```
update tbl_attendence set overtime_rate= 
Select ((worker_salary / 31) / 9) * (ot / 60) )  
from tbl_attendence as a 
inner join tbl_workers as w on w.worker_id = a.worker_id 
```

这将为您更新所有工人的加班费率。无需使用 C#、ADO，它只是让 SQL Server 完成它的工作。在运行它之前验证 SQL，因为我是徒手输入的，没有检查括号等。

希望这可以帮助。

杰森

编辑：

为了帮助您进一步了解此查询的工作原理，我确保在列名中包含表名。只要两个表中都不存在列，查询就可以正常工作。

```
update tbl_attendence set overtime_rate= 
Select ((w.worker_salary / 31) / 9) * (a.ot / 60) )  
from tbl_attendence as a 
inner join tbl_workers as w on w.worker_id = a.worker_id 
```

# wcf - HTTP 状态的 WCF 客户端行为

> ID：11188699
> 
> 赞同：0
> 
> 时间：2012-06-25T11:41:14.877
> 
> 标签：wcf, rest

我需要访问不是用 WCF 创建的 RESTful 服务器。为此，我使用 a `WebHttpBinding`、 a`ChannelFactory<MyInterface>`和 a `WebHttpBehavior`。

大多数事情都按预期工作。但是，服务器提供了各种列表并发送 HTTP 状态为 404 的响应，这引发了异常。我宁愿不引发异常，因为空列表在这里并不是真正的异常条件。

请注意，我对服务器没有影响，我只是在编写一个客户端。我试图向我的工厂添加自定义行为，但是之前引发了异常`AfterReceiveReply`

**编辑**

我也使用 OAuth，除了使用 WCF 之外我不想做任何事情。

如何影响 WCF 在不同 HTTP 状态下的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:48:57.940

对于restful服务，可以使用HttpWebRequest，在读取响应流时可以处理WebException。

简单而且有效：D

# ndepend - 在 NDepend 中查看外部依赖关系图

> ID：11188703
> 
> 赞同：1
> 
> 时间：2012-06-25T11:41:30.910
> 
> 标签：ndepend, static-code-analysis, dependency-graph

NDepend 有一个很好的功能，可以绘制**内部**依赖图。那就是dll中的哪些方法相互调用。

我们想要一个这样的图表，显示如何在项目中的所有 dll 中调用方法。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:17:36.550

在依赖关系矩阵中，您可以选择代表两个程序集之间依赖关系的单元格（在*punit-agent.dll*和*nunit-util.dll*下面的屏幕截图中），然后左键单击它...

![依赖矩阵](../Images/76ebe9f666485057037fa8ed194ac9d1.png)

...并生成方法依赖图。是你要求的吗？

![依赖图](../Images/21532d232bca322b54c75737d21fafcb.png)

请注意，在第一个屏幕截图中，参数*Weight on Cell*设置为*# members*。如果您设置为*# types*或*# namespaces*，您将获得一个包含类型或命名空间的图表。

# android - 终止android中的方法

> ID：11188707
> 
> 赞同：0
> 
> 时间：2012-06-25T11:41:41.093
> 
> 标签：android, methods, terminate

我正在构建一个 android 应用程序，当应用程序首次安装和运行时，我只想在其中运行一行代码。之后我想终止该代码，直到我重新安装我的应用程序。有没有办法做到这一点？如果是这样，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T11:43:45.103

`hasMethodRun`首次运行该方法时，在共享首选项中保存一个布尔值。然后，您可以在每次运行该方法时检查此布尔值。并且当您卸载与应用程序关联的首选项文件时，也会被删除。因此，在卸载应用程序时无需继续点击。

# jquery - jQuery Tag-it：将标签从一个列表复制到另一个列表

> ID：11188721
> 
> 赞同：1
> 
> 时间：2012-06-25T11:42:38.450
> 
> 标签：jquery, jquery-ui, tag-it

我有两个[jQuery Tag-it](http://aehlke.github.com/tag-it)，我需要一个 jQuery 函数，它将所有标签从一个 ul 列表复制到另一个。

**两个列表的定义：**

```
$('#keywordList1').tagit({
        itemName : 'item',
        fieldName : 'tags',
        caseSensitive : false,
        allowSpaces : true
});

$('#keywordList2').tagit({
        itemName : 'item2',
        fieldName : 'tags',
        caseSensitive : false,
        allowSpaces : true
}); 
```

**编辑：**

*代码悖论*的第一个解决方案

 *```
$('#keywordList2').append( $('#keywordList1 li').clone() ) 
```

可以，但是当您查看常规标签列表时，它会创建一个输入字段，用于输入包装在最后一个`<li>`元素中的新标签（带有 class `tagit-new`）。

附加解决方案的效果是目标列表现在有**两个输入字段**：

**关键字列表1**

```
<ul style="position: relative; left: 12px; width: 374px;"
class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all tagit ui-widget-content"
id="keywordList1">
<li
    class="tagit-choice ui-widget-content ui-state-default ui-corner-all"><span
    class="tagit-label">keyword1</span><a class="tagit-close"><span
        class="text-icon">×</span><span class="ui-icon ui-icon-close"></span></a><input
    type="hidden" name="item[tags][]" value="keyword"
    style="display: none;"></li>
<li
    class="tagit-choice ui-widget-content ui-state-default ui-corner-all"><span
    class="tagit-label">keyword2</span><a class="tagit-close"><span
        class="text-icon">×</span><span class="ui-icon ui-icon-close"></span></a><input
    type="hidden" name="item[tags][]" value="keyword2"
    style="display: none;"></li>
<li class="tagit-new"><input type="text"
    class="ui-widget-content ui-autocomplete-input" autocomplete="off"
    role="textbox" aria-autocomplete="list" aria-haspopup="true">
    <input type="text" class="ui-widget-content ui-autocomplete-input"
    autocomplete="off" role="textbox" aria-autocomplete="list"
    aria-haspopup="true"></li> 
```

**关键字列表2**

```
<ul style="position: relative; left: 12px; width: 374px; top: 20px;"
class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all tagit ui-widget-content"
id="keywordList2">
<li class="tagit-new"><input type="text"
    class="ui-widget-content ui-autocomplete-input" autocomplete="off"
    role="textbox" aria-autocomplete="list" aria-haspopup="true"></li>
<li
    class="tagit-choice ui-widget-content ui-state-default ui-corner-all"><span
    class="tagit-label">keyword1</span><a class="tagit-close"><span
        class="text-icon">×</span><span class="ui-icon ui-icon-close"></span></a><input
    type="hidden" name="item[tags][]" value="keyword1"
    style="display: none;"></li>
<li
    class="tagit-choice ui-widget-content ui-state-default ui-corner-all"><span
    class="tagit-label">keyword2</span><a class="tagit-close"><span
        class="text-icon">×</span><span class="ui-icon ui-icon-close"></span></a><input
    type="hidden" name="item[tags][]" value="keyword2"
    style="display: none;"></li>
<li class="tagit-new"><input type="text"
    class="ui-widget-content ui-autocomplete-input" autocomplete="off"
    role="textbox" aria-autocomplete="list" aria-haspopup="true"></li> 
```

知道如何删除第一个输入元素吗？

**EDIT2：***thecodeparadox* 的更新解决方案效果更好。我已经扩展了脚本，以便将第一个`<li>`（保存输入字段）移动到列表的末尾：

```
$('#keywordList2').append( $('#keywordList1 li:not(:last)').clone() )
$('#keywordList2').append( $('#keywordList2 li:first') ) 
```

我确信 ist 可以用 jQuery 风格写得更短

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:45:21.223

在询问之前我应该​​阅读[jQuery Tag-it的文档！](https://github.com/aehlke/tag-it/)

有[jQuery Tag-it 方法](https://github.com/aehlke/tag-it/blob/master/README.markdown#methods)可以完全满足我的需要：

```
 $($('#keywordList1').tagit('assignedTags')).each(function() {
        $('#keywordList2').tagit('createTag', this);
    }); 
```

主要优点是 createTag 操作确保只添加标签，而这些标签不存在于目标列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:32:41.730

```
 $('#keywordList1').tagit({

                onTagClicked: function(event,ui){
                    $('#keywordList2').tagit("createTag",ui.tagLabel);
                }

            }); 
```*

# python - 将 URL 存储到 cookie 或会话中？

> ID：11188725
> 
> 赞同：0
> 
> 时间：2012-06-25T11:43:03.683
> 
> 标签：python, django, http

我需要一个用于将其用于模板的 url。现在有两种方法可以存储 url 并在 python 中再次使用它......一种是使用 session 来存储该 URL 并在以后需要时获取它......或者第二种是使用 cookie 来存储该 URL 并获取以后吧。。

那么在安全性方面哪种方法更合适呢？python中有没有其他方法可以更好地存储url并在以后使用它，这更安全..？

在使用 cookie 时，有人可以轻松更改我猜想的信息，在会话中也有人可以劫持它并进行更改....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:47:11.633

在安全方面，您应该将其存储在会话中。如果它在 cookie 中，客户端可以将您的 url 修改为他想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:00:23.100

我不认为“会话劫持”意味着你认为它的意思。有人可以对会话劫持做的唯一事情就是冒充用户。实际的会话数据存储在后端（例如在数据库中），因此如果您不授予用户访问该特定数据的权限，那么他们就无法更改它，无论他们是实际的预期用户还是冒充的人那个用户。

因此，这样做的结果是将其存储在会话中。

**评论后编辑**好吧，你最好不要让任何信息发送到你的服务器，并且让你的网站只浏览。

说真的，我不明白为什么“会话数据”比其他任何东西都不安全。你是不合理的偏执狂。如果你想存储数据，你需要从某个地方获取数据，要么来自服务器端的计算，要么来自用户提交。如果你不能在服务器端计算这个特定的 URL，它需要来自用户。然后您需要针对特定​​用户将其存储在服务器上。我看不出你还想做什么。

# java - 在加载时部分替换 WebView 内容

> ID：11188726
> 
> 赞同：8
> 
> 时间：2012-06-25T11:43:04.143
> 
> 标签：java, webview, javafx

我想做的事情是用我自己的 HTML 内容替换网页 HTML 内容的某些部分（当前正在 WebView 引擎中加载）。

作为一个简单的例子 - 我想将每个加载的页面正文的背景颜色替换为 RED。这意味着我需要用我自己的值添加或替换现有的 body bgcolor 属性。我应该怎么做才能做到这一点？

下面是基于 JavaFX WebView 组件的基本浏览器代码：

```
public class BrowserTest extends Application
{
    public static void main ( String[] args )
    {
        launch ( args );
    }

    public void start ( Stage stage )
    {
        stage.setTitle ( "WebView" );

        Browser browser = new Browser ();
        browser.load ( "http://google.com" );

        Scene scene = new Scene ( browser );
        stage.setScene ( scene );

        stage.show ();
    }

    public class Browser extends Region
    {
        final WebView browser;
        final WebEngine webEngine;

        public Browser ()
        {
            super ();
            browser = new WebView ();
            webEngine = browser.getEngine ();
            getChildren ().add ( browser );
        }

        public void load ( String url )
        {
            webEngine.load ( url );
        }

        private Node createSpacer ()
        {
            Region spacer = new Region ();
            HBox.setHgrow ( spacer, Priority.ALWAYS );
            return spacer;
        }

        protected void layoutChildren ()
        {
            double w = getWidth ();
            double h = getHeight ();
            layoutInArea ( browser, 0, 0, w, h, 0, HPos.CENTER, VPos.CENTER );
        }

        protected double computePrefWidth ( double height )
        {
            return 750;
        }

        protected double computePrefHeight ( double width )
        {
            return 500;
        }
    }
} 
```

在一些 Oracle 文档中有这种技术的一个很好的例子，但自从上次 JavaFX 和站点更新以来，我根本找不到它。也许有人有旧文档的链接......

**注意：** jewelsea**还**提供了一种进行后期更改（加载页面时）的好方法，但我需要完全“加载时”解决方案来解决我的情况，这样 WebView 就不会两次渲染页面（之前和之前）更改后）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:37:02.670

[向WebEngine 文档属性](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#documentProperty)添加一个监听器，并在它更改时：

*   [使用org.w3c.dom.Document API](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html)修改文档
*   [或使用WebEngine executeScript API](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#executeScript%28java.lang.String%29)修改文档

**更新**

要拦截飞行中的 html 源并可能在它到达 WebView 之前对其进行修改，您可以[实现](http://java.sun.com/developer/onlineTraining/protocolhandlers/)自己的 UrlConnection 处理程序。这是我过去能够成功实现的目标。有关如何执行此操作的一些背景信息和指示，请参阅[我在 id jsmith 下的冗长论坛帖子的选项 3 。](https://forums.oracle.com/forums/thread.jspa?threadID=2330194)这样做的关键是设置[URL.setURLStreamHandlerFactory(myHandlerFactory)](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#setURLStreamHandlerFactory%28java.net.URLStreamHandlerFactory%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-08T11:19:38.543

有点晚了，但你可以：

1.  加载页面（不在屏幕上显示组件）。
2.  在文档结构中更改您想要的内容。
3.  表演舞台。

更改后的内容将出现并开始对用户可见。

# jquery - Opera中的jQuery keyup事件问题

> ID：11188729
> 
> 赞同：1
> 
> 时间：2012-06-25T11:43:22.007
> 
> 标签：jquery, events, google-chrome, cross-browser, opera

我在我的网站中使用了一些热键，该网站仅在 Chrome 和 Firefox 中进行了测试，一切都很好，但是当我在 Opera 中测试网站时，我发现我的许多热键在代码检查后不起作用发现我的功能

```
$(document).bind('keyup', function(e){
  //....
}); 
```

被 Opera 忽略，当我尝试将其更改为

```
$(document).bind('keypress', function(e){
  //....
}); 
```

它在 Opera 中开始正常工作，但被 Chrome 忽略。有没有跨浏览器的出路？我也在使用 jquery 1.5.1。

**upd.：**更改`function(e)`为`function (event)`仅向下箭头和 esc 后。按钮仍然不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:05:31.717

而不是使用这个：

```
$(document).bind('keyup', function(e){
  //....
}); 
```

见演示：http: [//jsfiddle.net/rathoreahsan/cxV8D/1/](http://jsfiddle.net/rathoreahsan/cxV8D/1/)

尝试使用这个：

```
$(document).bind('keyup', function(event){
  //....
}); 
```

**见演示：http:** [//jsfiddle.net/rathoreahsan/cxV8D/](http://jsfiddle.net/rathoreahsan/cxV8D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T16:04:53.773

`keyup`在旧浏览器中也存在类似的问题。

尝试使用`keydown`代替`keypress`or `keyup`。

Opera（Chromium 版本）中的特殊/控制键似乎存在问题，只能触发`keydown`。

另一个问题是`Esc`in 触发`blur`而不是`keyup`，因此您必须再次绑定到`keydown`.

# iphone - 带有 UIActivityIndi cator 的 KivaJSON？

> ID：11188734
> 
> 赞同：0
> 
> 时间：2012-06-25T11:43:42.543
> 
> 标签：iphone, objective-c, json

我已经下载了 KivaJSON，并尝试在此脚本中添加 UIActivityIndi​​cator，但没有成功。

脚本：[http ://dl.dropbox.com/u/77033905/stackoverflow/KivaJSONDemo.zip](http://dl.dropbox.com/u/77033905/stackoverflow/KivaJSONDemo.zip)

我想在 JSON 开始加载以及何时结束隐藏指示器时放置 UIActivityIndi​​cator。

这是 ViewController.m 的代码

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
#define kLatestKivaLoansURL [NSURL URLWithString: @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] //2

#import "ViewController.h"

@interface NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
-(NSData*)toJSON;
@end

@implementation NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
{
    NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
    __autoreleasing NSError* error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;
}

-(NSData*)toJSON
{
    NSError* error = nil;
    id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;    
}
@end

@implementation ViewController
@synthesize navBar;

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                         options:kNilOptions 
                                                           error:&error];
    NSArray* latestLoans = [json objectForKey:@"loans"]; //2

    NSLog(@"loans: %@", latestLoans); //3

    // 1) Get the latest loan
    NSDictionary* loan = [latestLoans objectAtIndex:0];

    // 2) Get the funded amount and loan amount
    NSNumber* fundedAmount = [loan objectForKey:@"funded_amount"];
    NSNumber* loanAmount = [loan objectForKey:@"loan_amount"];
    float outstandingAmount = [loanAmount floatValue] - [fundedAmount floatValue];

    // 3) Set the label appropriately
    humanReadble.text = [NSString stringWithFormat:@"Latest loan: %@ from %@ needs another $%.2f to pursue their entrepreneural dream",
                         [loan objectForKey:@"name"],
                         [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"],
                         outstandingAmount
                         ];

    //build an info object and convert to json
    NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:
                          [loan objectForKey:@"name"], @"who",
                          [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"], @"where",
                          [NSNumber numberWithFloat: outstandingAmount], @"what",
                          nil];

    //convert object to data
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info 
                                                       options:NSJSONWritingPrettyPrinted
                                                         error:&error];

    //print out the data contents
    jsonSummary.text = [[NSString alloc] initWithData:jsonData
                                             encoding:NSUTF8StringEncoding];

}

- (IBAction)updateJson:(id)sender {

    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });

}
- (void)viewDidUnload {
    [self setNavBar:nil];
    [super viewDidUnload];
}
@end 
```

感谢帮助。

**更新：**

添加了我的放置指标尝试。

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
#define kLatestKivaLoansURL [NSURL URLWithString: @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] //2

#import "ViewController.h"

@interface NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
-(NSData*)toJSON;
@end

@implementation NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
{
    NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
    __autoreleasing NSError* error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;
}

-(NSData*)toJSON
{
    NSError* error = nil;
    id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;    
}
@end

@implementation ViewController{
    UIActivityIndicatorView *activityIndicator;
}

@synthesize navBar;

- (void)viewDidLoad
{
    [super viewDidLoad];

    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];

}

- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                         options:kNilOptions 
                                                           error:&error];
    NSArray* latestLoans = [json objectForKey:@"loans"]; //2

    NSLog(@"loans: %@", latestLoans); //3

    // 1) Get the latest loan
    NSDictionary* loan = [latestLoans objectAtIndex:0];

    // 2) Get the funded amount and loan amount
    NSNumber* fundedAmount = [loan objectForKey:@"funded_amount"];
    NSNumber* loanAmount = [loan objectForKey:@"loan_amount"];
    float outstandingAmount = [loanAmount floatValue] - [fundedAmount floatValue];

    // 3) Set the label appropriately
    humanReadble.text = [NSString stringWithFormat:@"Latest loan: %@ from %@ needs another $%.2f to pursue their entrepreneural dream",
                         [loan objectForKey:@"name"],
                         [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"],
                         outstandingAmount
                         ];

    //build an info object and convert to json
    NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:
                          [loan objectForKey:@"name"], @"who",
                          [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"], @"where",
                          [NSNumber numberWithFloat: outstandingAmount], @"what",
                          nil];

    //convert object to data
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info 
                                                       options:NSJSONWritingPrettyPrinted
                                                         error:&error];

    //print out the data contents
    jsonSummary.text = [[NSString alloc] initWithData:jsonData
                                             encoding:NSUTF8StringEncoding];

}

- (IBAction)updateJson:(id)sender {

    dispatch_async(kBgQueue, ^{

        [activityIndicator startAnimating];

        NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];

        [activityIndicator stopAnimating];

    });

}
- (void)viewDidUnload {
    [self setNavBar:nil];
    [super viewDidUnload];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:08:50.077

在初始化 UIActivityIndi​​catorView 时添加：

```
 activityIndicator  = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(150, 150, 30, 30)];
    [activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
    [self.view addSubview:activityIndicator]; 
```

并且应该在调用之前开始动画：`ispatch_async(kBgQueue, ^{`如下：

```
- (IBAction)updateJson:(id)sender {

[activityIndicator startAnimating];
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];

    });
} 
```

并且一旦显示数据（即在方法结束时）就应该停止动画

```
- (void)fetchedData:(NSData *)responseData 
```

# php - 在 Wordpress Sql Query 中解析结果

> ID：11188736
> 
> 赞同：2
> 
> 时间：2012-06-25T11:43:45.267
> 
> 标签：php, sql, wordpress

我相当新，我正在为我正在开发的插件的标准数据库上进行简单的 Wordpress SQL 查询而苦苦挣扎。

我正在使用以下代码来回显前 10 个帖子的标题：

```
global $wpdb;
$results = $wpdb->get_results($wpdb->prepare("SELECT * FROM $wpdb->posts LIMIT 0, 10;"));

$i = 0;
while($i < count($results)){
    echo $results->post_title;
    $i++;
} 
```

但是没有任何东西会在屏幕上回显。数据库中有超过 10 个帖子，因此没有数据不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:33:17.360

我相信而不是这样：

```
$i = 0;
while($i < count($results)){
    echo $results->post_title;
    $i++;
} 
```

（这将始终回显相同的变量），您需要做的是：

```
foreach ($results as $result) {
    echo $result->post_title;
} 
```

因为`$results`是一个数组。

您也许也可以这样做，但没有任何好处`foreach`：

```
$i = 0;
while($i < count($results)){
    echo $results[$i]->post_title;
    $i++;
} 
```

# android - Android ListView在切换按钮被点击的位置获取TextView值

> ID：11188741
> 
> 赞同：3
> 
> 时间：2012-06-25T11:44:07.337
> 
> 标签：android, listview

我有以下带有自定义列表项的 ListView：

![custom_list_item](../Images/db06c3fa9bc9b37e0a7a7552cc031da9.png)

我想`TextView`从单击的列表项中获取值`ToggleButton`。

这是构建列表的适配器：

```
 public class simpleAdapter extends SimpleAdapter {

    public simpleAdapter(Context context,
            ArrayList<HashMap<String, String>> list, int resource,
            String[] from, int[] to) {
        super(context, list, resource, from, to);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        // return super.getView(position, convertView, parent);

        LayoutInflater inflater = getLayoutInflater();
        convertView = inflater.inflate(R.layout.user_campaigns_list_item, parent, false);

        tb_campaigns_list_toggle = (ToggleButton) convertView
                .findViewById(R.id.tb_campaigns_list_toggle);
        tb_campaigns_list_toggle.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), String.valueOf(position), Toast.LENGTH_SHORT).show();
            }
        });

        return super.getView(position, convertView, parent);

    }

} 
```

使用此代码，我可以为包含点击的`position`内容`list item`敬酒`ToggleButton`。尝试使用此代码获取`Text1`or值时：`id1`

```
TextView Text1 = (TextView)convertView.findViewById(R.id.Text1_id); //this line is outside the onClick(View v) method
String Text1_value = Text1.getText().toString();
Toast.makeText(getApplicationContext(), Text1_value, Toast.LENGTH_SHORT).show(); 
```

我总是`Text1`从最后`ListView`一项中获得价值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T11:54:52.917

在 listview 的 onItemClick 函数中，粘贴以下代码：

```
 View parentView = (View) view.getParent();
    textview1 = ((TextView) parentView
            .findViewById(R.id.textview1)).getText().toString();

    textview2 = ((TextView) parentView
            .findViewById(R.id.textview2)).getText().toString();

    textview3 = ((TextView) parentView
            .findViewById(R.id.textview3)).getText().toString(); 
```

您可以使用上面的代码获得任何值..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:47:10.970

使用按钮的 setTag 和 GetTag

```
tb_campaigns_list_toggle = (ToggleButton) convertView
                    .findViewById(R.id.tb_campaigns_list_toggle);

    tb_campaigns_list_toggle.setTag(position);//<-------------

            tb_campaigns_list_toggle.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                        int index = -1;
                         Object obj =   v.getTag();//<-------------

                             if(obj instanceOf Integer){
                                  index = ((Integer)obj).getIntValue(); 
                              }

                    Toast.makeText(getApplicationContext(), String.valueOf(position), Toast.LENGTH_SHORT).show();
                }
            }); 
```

# vba - Excel vba中的任何MDX查询？

> ID：11188747
> 
> 赞同：1
> 
> 时间：2012-06-25T11:44:26.633
> 
> 标签：vba, mdx

有没有办法在 Excel VBA 中执行 MDX 查询？

我认为它可以通过[ADO](http://support.microsoft.com/kb/257819)来完成，类似于 SQL 案例（是的，我知道 SQL 与 MDX 不同 - 在 Stackoverflow 上多次提到的问题）。
不幸的是，我找不到任何例子。

*   有人说要使用外部工具来完成这项任务，但我不想为此付费。
*   有些人在 XMLA 中给出了一个例子，但我想改为执行简单的 MDX 查询

.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T19:09:51.600

我们有以下在 VBA 中调用的通用函数，它基于输入的 MDX 字符串，将数据写入 excel。电子表格确实需要引用 ADO 和 ADOMD

```
Public Sub DisplayMDX(ipCell, ipMDX, ipExclHeadings)

    Dim sQry As String
    Dim sConnection As String
    Dim rs As ADOMD.Cellset
    Dim sServer, sDB, ts As String
    Dim hyper As Hyperlink
    Dim i, j, k, h, rowStart, colStart, dimCount As Integer
    Dim sURLLink, sCustCaption, sCustLink As String
    Dim db As ADODB.Connection

    'Open a new ADO connection
    Set db = New ADODB.Connection
    sConnection = "Provider=MSOLAP; Data Source=DW3; Initial Catalog=FDMDW1; Integrated Security=SSPI"

    db.CommandTimeout = 0
    db.Open sConnection

    'Open a CellSet to store the results of the query.
    Set rs = New Cellset

    'Tidy the query of an erroneous spaces
    sQry = Trim(ipMDX)

    'Open the query that was constructed above
    Application.StatusBar = "Getting OLAP Data"
    With rs
        .Open sQry, db
    End With

    With ActiveSheet

     'Goto cell specified
     Range(ipCell).Select

     'Find the starting point
     rowStart = ActiveCell.Row
     colStart = ActiveCell.Column
     For j = 0 To rs.Axes(1).Positions.Count - 1

        If Not ipExclHeadings Then
           dimCount = rs.Axes(1).DimensionCount
           For h = 0 To rs.Axes(1).DimensionCount - 1
                Cells(rowStart + j, colStart + h) = rs.Axes(1).Positions(j).Members(h).Caption
           Next
        End If

        For k = 0 To rs.Axes(0).Positions.Count - 1
           If Not (k = 1) Then

              If rs(k, j) <> "" Then
                 Cells(rowStart + j, colStart + dimCount + k).Value = rs(k, j)
              Else
                 Cells(rowStart + j, colStart + dimCount + k).ClearContents
              End If

           End If
           Application.StatusBar = rs(k, j)
        Next

     Next
    End With

rs.Close

Application.StatusBar = "Done"

Exit Sub
errMsg:
   MsgBox Err.Description, vbOKOnly + vbCritical, "Error #" & Err.Number

End Sub 
```

# c - 安装了 OpenSSL，没有 openssl.h 文件

> ID：11188749
> 
> 赞同：2
> 
> 时间：2012-06-25T11:44:51.477
> 
> 标签：c, openssl, sha

我在这个网站上找到了一个问题的答案，我试图从[这里](https://stackoverflow.com/questions/918676/generate-sha-hash-in-openssl)实现。

[我从这里](http://www.openssl.org/source/)下载并安装了 openssl 。我执行了提取文件中安装文本中提到的每个步骤。

$ ./config $ make $ make test $ make install

这些都没有错误地完成。然后，当我尝试使用已回答问题中的示例代码编译有关如何生成 SHA 哈希的代码时，出现以下错误：

致命错误：openssl.h：没有这样的文件或目录

我是否需要做更多的事情来创建 openssl 头文件，因为我认为在安装 openssl 后没有任何问题会自动创建它？这是我第一次向 C 添加库，所以请原谅我的任何天真。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:47:23.910

尝试在编译示例程序时包含 -I 选项以指定 openssl 目录。

这是来自 openssl 目录中的 INSTALL 文件：

```
 *  WRITING applications

     To write an application that is able to handle both the new
     and the old directory layout, so that it can still be compiled
     with library versions up to OpenSSL 0.9.2b without bothering
     the user, you can proceed as follows:

     -  Always use the new filename of OpenSSL header files,
        e.g. #include <openssl/ssl.h>.

     -  Create a directory "incl" that contains only a symbolic
        link named "openssl", which points to the "include" directory
        of OpenSSL.
        For example, your application's Makefile might contain the
        following rule, if OPENSSLDIR is a pathname (absolute or
        relative) of the directory where OpenSSL resides:

        incl/openssl:
                -mkdir incl
                cd $(OPENSSLDIR) # Check whether the directory really exists
                -ln -s `cd $(OPENSSLDIR); pwd`/include incl/openssl

        You will have to add "incl/openssl" to the dependencies
        of those C files that include some OpenSSL header file.

     -  Add "-Iincl" to your CFLAGS.

     With these additions, the OpenSSL header files will be available
     under both name variants if an old library version is used:
     Your application can reach them under names like <openssl/foo.h>,
     while the header files still are able to #include each other
     with names of the form <foo.h>. 
```

我建议您阅读 openssl 源目录中的 INSTALL 文件以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-09T16:42:41.637

如果有人遇到同样的问题，即安装后 openssl 目录没有出现在他们的包含目录中，`sudo apt-get install libssl-dev`请像 user1479836 所说的那样使用。

# ruby-on-rails - rails / rspec / capybara - 单击按钮后无限“等待页面......”

> ID：11188751
> 
> 赞同：1
> 
> 时间：2012-06-25T11:45:00.010
> 
> 标签：ruby-on-rails, rspec, capybara

填写完字段并按下按钮后，浏览器（由脚本打开）说“在 127 处等待页面......”但它永远不会去任何地方（我等了 30 多分钟）。我正在 ubuntu 10.04 机器上进行测试。有任何想法吗？

```
describe "GET 'new'", :js => true do
    it "will log in" do
      @admin = FactoryGirl.create(:admin)
      puts @admin
      puts @admin.attributes
      visit '/'
      fill_in 'user_login', :with => @admin.email
      fill_in 'user_password', :with => @admin.password
      click_on 'Sign in'
      response.should be_success      
    end    

    it "should be successful" do
      visit '/things/new'
      page.should have_xpath('//form')
    end

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:07:01.293

您不想`response`在 Capybara 集成测试中检查。之后`sign_in`，改为检查新页面中的一些成功消息，例如。`page.should have_content 'Welcome!`.

# mysql - 查询卡在tmp表中复制很长时间

> ID：11188753
> 
> 赞同：0
> 
> 时间：2012-06-25T11:45:06.057
> 
> 标签：mysql, phpmyadmin

提前感谢您花时间阅读我的问题。我一起使用 MySQL 和 Python，我首先执行这个 SQL 命令

```
 SELECT T1.col1 AS t, T1.col4 AS d, T2.col3 AS e, T2.col4 AS d, T2.col7 AS p,
  T2.col13 AS de, 
  T2.col5 AS carrier, T2.col12 AS f, T2.col10 AS c
  FROM table AS T1
  JOIN table_c AS T2 ON T1.col1 = T2.col1
  ORDER BY RAND( )
  LIMIT 100000 ; 
```

我正在处理的数据库非常大（T1 有 300 000 000 行，T2 有 300 000 行），感谢**phpMyAdmin**我创建了它们。我也在`col1 of T1`和上创建了索引`col1 of T2`。但是当我运行 SQL 命令时，它卡在复制到`tmp`表阶段消息上（我把它留了整个周末，它仍然在同一点）

我尝试修改参数 tmp_table_size 但它没有改变任何东西

我不知道在合理的时间内执行此命令的解决方案是什么

欢迎所有建议

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:05:55.623

`ORDER BY RAND()`绝不能将这个技巧用于如此大的表大小。`ORDER BY RAND()`通过为您的 JOINed 结果集中的每一行（在您的情况下可能是数亿行）中分配一个随机值来工作，实际创建所有这些行，在磁盘上对它们进行排序，如果它准备好了，只有这样它才能选择并返回为您提供前 100000 行。

解决方案并不明显，但您可以找到一些技术来解决您的问题，例如 [如何优化 MySQL 的 ORDER BY RAND() 函数？](https://stackoverflow.com/questions/1244555/how-can-i-optimize-mysqls-order-by-rand-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:02:47.620

1.  用于`EXPLAIN EXTENDED SELECT ...`查看查询涉及的内容（估计要处理多少行，正在使用哪些索引等）。

2.  `EXPLAIN`查询还将显示“1 个警告”，请参阅`SHOW WARNINGS`- 这将向您显示*查询优化器后查询*的外观。

3.  发布您的表结构 ( `SHOW CREATE TABLE ...`)、两个表的*表状态*和相关配置（所有配置条目匹配`max*`, `*buffer*`, `*size*`）。

4.  发布您的硬件配置（cpu - 速度？，核心？，ram - 总？免费？）

# iphone - 如何在 UITableView 中实现多个部分以了解详细信息？

> ID：11188755
> 
> 赞同：-2
> 
> 时间：2012-06-25T11:45:15.943
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [iPhone UITableView 部分](https://stackoverflow.com/questions/6445666/iphone-uitableview-sections)

我现在正在学习 iOS 开发的 UITableView 类，如何在 UITableView 中实现多个部分以获取详细信息？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:46:55.780

从下面的委托方法返回正确的值`UITableViewDataSource`。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:47:47.687

读[这个](http://clingingtoideas.blogspot.in/2011/02/uitableview-how-to-part-3-multiple.html)

是的，请阅读所有其他部分以获取有关 UITableView 的一组很棒的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:49:22.880

为此，您可以使用 tableview 委托方法

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    NSInteger iSectionCount = 1;

    return iSectionCount;
} 
```

或者只是

```
return 1;//For 1 section 
```

在委托方法内部

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:51:06.363

要返回单个部分，请执行以下操作：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 1;
    } 
```

# sql - 如何在 postgresql 中查找数组的大小

> ID：11188756
> 
> 赞同：126
> 
> 时间：2012-06-25T11:45:23.723
> 
> 标签：sql, arrays, postgresql, size

有没有办法找到数组的大小？

例如，

```
CREATE TABLE example (id integer[]) ;

INSERT INTO exam VALUES ( '{}');

INSERT INTO exam VALUES ( '{5,6,7}'); 
```

由此，是否有可能得到如下结果，

```
size

0

3 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2015-05-09T11:46:26.813

正如vyegorov所提到的，`array_length`会成功的。或者，如果您知道数组是一维的（很可能）并且正在运行 PostgreSQL 9.4 或更高版本，您可以使用`cardinality`：

```
SELECT cardinality(id) FROM example; 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-06-25T12:15:33.403

[阅读文档](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)很简单：

```
SELECT array_length(id, 1) FROM example; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-06-12T16:30:06.907

假设数组的维度总是 1 不是我觉得舒服的东西，所以我选择了以下内容：

```
SELECT coalesce(array_length(id, 1), 0) as size FROM example; 
```

已经……至少十年了，但我们曾经做过很多事情，`coalesce`而且非常方便。也许我是出于舒适而伸手去拿它？

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-24T12:11:10.220

不得不在 postgres 8.2 中使用 array_upper。

# system - 用于大量文件的基于Web的文档/文件管理系统

> ID：11188760
> 
> 赞同：2
> 
> 时间：2012-06-25T11:45:40.720
> 
> 标签：system, document, web-based, pydio

我正在寻找基于 Web 并具有以下功能的文档管理系统：

*   文件修订，能够更新文件
*   有一个指向文件最新版本的公共链接
*   文件夹结构
*   多重上传或某种拖放
*   可以处理大量文件（+2000）

我必须让它基于网络，要求它的公司没有能力安装 OpenKM 或 Quotera 之类的东西。我找到了 AjaXplorer，但它没有必须具备的修订控制。我查看了以下内容：OpenKM（cloudhosted 可能是替代方案）、Quotera（基于 java 的？）、AjaXplorer（没有修订）、OpenDocMan（界面看起来真的很糟糕，不过要检查一下）。最好是开源的，但不是必须的。我已经疯狂地搜索，但我找不到任何 100% 的东西..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:44:15.023

我们使用[Filecamp](http://filecamp.com)，我认为它具有您所要求的功能。但是我不确定修订部分，但他们有某种在线校对，也允许不同的文件修订。

它有无限的用户，而且价格实惠。

祝你好运/彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:18:59.243

Filerun 很好，但是很贵：

[http://www.filerun.com](http://www.filerun.com)

它具有您正在寻找的所有功能。

# javascript - 向富文本编辑器的 Source 值添加一个额外的类

> ID：11188761
> 
> 赞同：3
> 
> 时间：2012-06-25T11:45:58.370
> 
> 标签：javascript, extjs, aem

我有一个 ExtJS RichText（已从 扩展的 CQ5 组件`CQ.form.rte`）。

像任何人一样，使用以下支持 rtePlugins：

```
credit = new CQ.form.RichText({
    height       : 100,
    width        : 400,
    fieldLabel   : 'Photo Credit',
    rtePlugins   : {
        misctools: {
            features: ['specialchars', 'sourceedit'],
            specialCharsConfig: {
                chars: CN.Author.Util.specialCharacters
            }
        }
    }
}); 
```

当我单击 Source Edit 时，我想操作 DOM 并将 a 添加`class`到 HTML。我的意思是，我希望 RTE 编辑器在保存之前**自动**向 Source 添加一个额外的类 - RTE 字段的值。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:36:57.027

好吧，您可能必须覆盖 MiscToolsPlugins.js、EditorKernel.js、HtmlRules.js 和 HtmlProcessor.js。可能不值得这一切。您最好将规则放在样式下拉列表中（请参阅[样式](http://dev.day.com/docs/en/cq/current/administering/configuring_rich_text_editor.html#Styles%20%28Text%29)插件）。

# mysql - 仅删除 Mysql 中的重复记录

> ID：11188762
> 
> 赞同：1
> 
> 时间：2012-06-25T11:46:11.673
> 
> 标签：mysql, duplicates, rows

我有一张下表

```
------------
id name
------------
1  master
2  datagrid 
3  zewa
4  leumas
5  delta
6  master
7  master
8  master
9  delta 
```

我只想删除重复（重复）的行。所以从上表中，“master”和“delta”的所有行都应该被删除。

**注意：**我不想使用临时表或任何 Alter 语句。我只想使用删除查询

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:08:59.583

IIRC MySQL 不允许您在`IN`子句中引用变异表，除非添加额外的间接层。

```
DELETE FROM YourTable
WHERE  name IN (SELECT name
                FROM   (SELECT name
                        FROM   YourTable
                        GROUP  BY name
                        HAVING COUNT(name) > 1) AS T) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T12:09:35.513

从名称所在的表中删除（按名称从表组中选择名称，计数（名称）> 1）；

# c# - 使用 MongoDB C# 驱动程序映射子类/嵌入到单个平面文档

> ID：11188764
> 
> 赞同：1
> 
> 时间：2012-06-25T11:46:20.653
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver

我正在开发一个应用程序，它有一个使用比赛结果/时间等的模型。
我有一个看起来像这样的模型：

```
public class Competitor
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime DateOfBirth { get; set; }
}

public class Event
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
}

public class Result
{
    public int ID { get; set; }
    public decimal ResultTime { get; set; }
    public Competitor Competitor { get; set; }
    public Event Event { get; set; }
} 
```

我计划将其展平以存储到 mongo db 中，如下所示：

```
public class ResultSchemaExample
{
    public int CompetitorID { get; set; }
    public string CompetitorName { get; set; }
    public DateTime CompetitorDateOfBirth{ get; set; }
    public int EventID { get; set; }
    public string EventName { get; set; }
    public string EventDescription { get; set; }
    public int ResultID { get; set; }
    public decimal ResultTime { get; set; }
} 
```

我担心的是，这会使查询更加困难吗？
有没有办法可以对它进行分类以使其更容易？

所以我可以做如下查询：

```
var query =
    collection.AsQueryable<Result>()
    .Where(r => r.Name == "Alex"); 
```

它会查询我的底层、平面（非嵌入式）数据以返回 Result 的实例？

这可能吗？

或者，我应该在我的应用程序中使用我的 ResultSchemaExample 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:17:29.400

您总是可以拥有这样的组合类并将其存储在 mongodb 中。

```
public class RaceResults
{
  public Competitor Competitor { get; set;}
  public Event Event { get; set;}
  public Result Result { get; set;}
} 
```

您的查询将如下所示：

```
var query = collection.AsQueryable<RaceResults>().Where(r => r.Result.Name == "Alex"); 
```

但是，我可能会完全建议一个不同的模式......从您的域开始，我确信有一条规则规定您不能在没有事件的情况下获得结果。这将导致我设计您的域略有不同；更像这样：

```
public class Event
{
  public string Name { get; set; }
  public string Description { get; set; }
  public IList<Result> Results { get; set; }
}

public class Result
{
  public Competitor Competitor { get; set; }
  public TimeSpan ResultTime { get; set; }
}

public class Competitor
{ ... } 
```

使用此模式，您在 mongodb 中将只有 1 个集合：事件。每个事件都将包含它需要的所有数据。跨事件关联竞争对手的结果也相当简单，因为 mongodb 支持在数组和文档中查询。因此，以下查询将获取竞争对手 42 参加的所有赛事：

```
var collection = db.GetCollection<Event>("events");
var query = Query.EQ("Results.Competitor.Id", 42);
var events = collection.Find(query); 
```

# visual-studio-2010 - 将 EMDX（实体框架）文件与 Git 合并

> ID：11188765
> 
> 赞同：5
> 
> 时间：2012-06-25T11:46:21.913
> 
> 标签：visual-studio-2010, git, entity-framework

作为一个团队，我们发现很难/不可能在分支之间合并 EDMX 文件，并且正在考虑一项政策，即所有 EDMX 更改都必须发生在主分支中。有没有人遇到过这个问题，你的团队是如何处理的？

# xpath - XPath : 所有兄弟节点的名称

> ID：11188766
> 
> 赞同：2
> 
> 时间：2012-06-25T11:46:23.497
> 
> 标签：xpath, siblings

我无法让`following-sibling`轴工作。

我有一个如下的 XML 文档。我尝试了类似的东西`name(/T/p/q/following-sibling::*[1]`。我知道`name`只会产生集合中的第一个，但是，该表达式不会返回任何内容。我正在`xmlstarlet`Ubuntu 上使用命令尝试 XPath。

```
<T>
<p><q>
<a1>A</a1>
<a2>A</a2>
<a3>A</a3>
<a4>A</a4>
<a5><b1>A</b1></a5>
</q></p>
</T> 
```

给定输入 as `/T/p/q`，我想要其所有子元素节点的名称，但仅限于该级别。也就是说，输出应该是

```
a1
a2
a3
a4
a5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:13:25.647

**在 XPath 1.0 中，不可能`/T/p/q/*`通过评估*单个*XPath 表达式来获得所需的所有子元素名称。**

因此，需要在第一步中选择所有元素：

```
/T/p/q/* 
```

然后，对于生成的 XmlNodeList 中包含的每个元素，一个新的 XPath 表达式（根据该元素求值）生成它的名称。

该算法的不同实现是可能的，对 XPath 1.0 使用不同的宿主语言。

**下面是一个示例，其中 XPath 1.0 的宿主语言是 XSLT 1.0**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <xsl:variable name="vWanted" select="/T/p/q/*"/>

  <xsl:for-each select="$vWanted">
   <xsl:value-of select="name()"/> <xsl:text> </xsl:text>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<T>
    <p><q>
    <a1>A</a1>
    <a2>A</a2>
    <a3>A</a3>
    <a4>A</a4>
    <a5><b1>A</b1></a5>
    </q></p>
</T> 
```

**执行算法的两个步骤并产生想要的结果：**

```
a1 a2 a3 a4 a5 
```

* * *

**二、单个 XPath 2.0 表达式 - 解决方案：**

```
/T/p/q/*/name() 
```

对上述 XPath 2.0 表达式的求值产生一个由五个项目组成的序列，每个项目都是不同`/T/p/q/*`元素的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:34:08.073

实际上，它比你想象的要简单得多。

```
/T/p/q/* 
```

返回 的节点集`a1, a2, a3, a4, a5`。

它选择所有的孩子，`q`其中的孩子`p`是 的孩子 的孩子 的`T`孩子`context node`。

我说的“孩子”是指“直系孩子”。不是“后裔”。因此，它只会选择`a1-a5`关卡上的节点。

正如您所说，该`name()`函数仅返回节点集中第一个节点的名称。我猜您必须遍历节点集才能将所有名称作为单个字符串获取。

* * *

使用`xmlstarlet`，您可以这样做：

```
xml sel -t -m "/T/p/q/*" -v "name(.)" -n input.xml 
```

它匹配节点集，调用其中`name(.)`的每个节点，然后打印一个换行符。

*   `-m`匹配 XPath 表达式
*   `-v`打印 XPath 表达式返回的值
*   `-n`换行
*   [更多在这里](http://xmlstar.sourceforge.net/doc/UG/ch04s01.html)

* * *

要使用`following-sibling`轴，您必须处于同一级别，例如要选择 的所有以下兄弟姐妹`a2`，您将使用`/T/p/q/a2/following-sibling::*`. 这将返回`a3, a4, a5`。

# html - 将 base64 编码的图像用于 Web 是否安全，优点和缺点？

> ID：11188769
> 
> 赞同：13
> 
> 时间：2012-06-25T11:46:49.813
> 
> 标签：html, base64, image, frontend

使用 base64 编码的图像进行网页设计是否安全，它的性能比较如何？的优点和缺点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T11:51:44.370

base64 流比二进制流重约 33%（如果您认真对待性能，则不考虑通过 http 进行的 gzip 压缩）。

如果将base64图片直接放在一个页面中，是不会单独缓存的。因此，对于使用此图像而不是使用 URL 作为键可缓存的所有页面来说，这将是沉重的。您可能认为它有助于保持较低的请求数，但实际上在用户的缓存中有图像的正常情况下它是无用的（如果您有很多图像，更喜欢 css sprites 以减少请求数）。

我认为没有理由使用 base64 图像，除非是在解决特定技术问题时，例如以 json 格式发送图像，或仅保存一个 html 文件 - 然后检查您是否真的需要使用 base64 图像。

# java - 自定义 JSF 组件。使用 UIComponentELTag 时

> ID：11188770
> 
> 赞同：3
> 
> 时间：2012-06-25T11:46:54.580
> 
> 标签：java, jsf, jsf-2, custom-component

要在 JSF 中创建自定义组件，需要创建一个扩展 UIComponent 的类并在 JSF 中注册其组件类型，例如使用 @FacesComponent。要在 facelets 页面中使用该组件及其属性，必须将组件与 facelets 标记链接到一个称为标记描述文件的特殊文件中：

```
<tag>
    <tag-name>test</tag-name>
    <component>
        <component-type>local.test.component_type</component-type>
    </component>
</tag> 
```

好的，但我对标签类（和标签处理程序）的使用感到困惑。查看 mojarra 源代码，所有 html 基本组件都在标签库描述文件中使用扩展 UIComponentELTag 的组件标签类声明。例如：

```
<tag>
   <name>commandButton</name>
    <tag-class>
        com.sun.faces.taglib.html_basic.CommandButtonTag
    </tag-class>
</tag> 
```

查看 UIComponentELTag 的 JSF api：

> UIComponentELTag 将其超类专门用于允许从 EL API 表达式中获取其值的属性。
> 
> 此标记设计用于 Faces 1.2 版和 JSP 2.1 版容器。

那么问题是，什么时候我应该使用扩展 UIComponentELTag 的类来链接标签属性和自定义组件，而不是通过链接组件？如果我不使用标记类，那么我的组件不能在 JSP 页面或以前的 JSF 版本中使用，并且只能在 JSF facelets 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:57:18.560

> *如果我不使用标记类，那么我的组件不能在 JSP 页面或以前的 JSF 版本中使用，并且只能在 JSF facelets 中使用？*

这是正确的。如果您不为 JSF 2.0 定制组件使用标记类，那么您的 JSF 2.0 定制组件与 JSP 不兼容，也不与 JSF 1.2 或更早版本兼容。JSP 自 JSF 2.0 以来已被弃用，因此除非您绝对需要支持 JSP 和/或 JSF 1.2，否则您根本不需要创建标记类。这使您免于不必要的样板代码。一些 JSF 2.0 组件库（如 PrimeFaces）甚至根本不支持 JSP。

标签处理程序是另一回事。标记处理程序与 UI 组件的标记类不同。要了解什么是标记处理程序，请查看 JSF 核心 ( `<f:xxx>`) 标记库。所有标准的 JSF 标记处理程序都在其中。它们在 JSF 2.0 中仍然有用。使用标记处理程序，您可以控制 JSF 视图的构建方式（使用 UI 组件，您可以控制 JSF 视图的呈现方式）。

# oop - 重构：寻找共同的抽象

> ID：11188773
> 
> 赞同：2
> 
> 时间：2012-06-25T11:46:59.917
> 
> 标签：oop, refactoring

我现在正在尝试重构这段遗留代码：

```
 public class FileManger
    {
        private IFileReader _fileReader;
        private IFileWriter _fileWriter;

        public enum Mode { Read = 1, Write = 2 };

        public void Open( Mode mode)
        {
            if (mode == Mode.Read)
            {
                _fileReader = new FileReader();
            }
            else if (mode == Mode.Write)
            {
                _fileWriter = new FileWriter();
            }
        }
    } 
```

我需要能够用工厂方法替换这段代码并将返回的代码分配给一个公共文件。

**所以..我试图让它看起来像：**

```
public class FileManger
{
    private IFileHandler _fileHandler;

    public enum Mode { Read = 1, Write = 2 };

    public void Open(string fileName, Mode mode)
    {
        _fileHandler = Factory.CreateFileHandler(mode);
    }
 } 
```

我遇到的问题是两个原始接口 IFileReader 和 IFileWriter，虽然它们在形状上非常接近，但它们有两个完全不同的方法 string ReadLine(); 和 void WriteLine(字符串行); 我找不到一个共同的抽象。

基本上我的重构目标是使 IFileReader 和 IFileWriter 接口看起来相同，并使用一个通用接口而不是两个。

目前这些接口如下所示：

```
 public interface IFileReader : IDisposable
    {
        void OpenFileStream(string fileName);
        void Close();

        string ReadLine();
    } 
```

和

```
public interface IFileWriter : IDisposable
    {

        void OpenFileStream(string fileName);
        void Close();

        void WriteLine(string line);
    } 
```

有人可以给我一些关于如何实现这一目标的建议吗？

如果您需要任何进一步的澄清，请告诉我，如果我不清楚理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:05:54.877

我真的不明白你为什么要为这些不同的操作使用一个通用接口，但假设你有充分的理由，我想你可以做这样的事情`line`，根据文件模式读取或写入的位置：

```
public interface IFileAccessor : IDisposable
{
    void OpenFileStream(string fileName);
    void Close();
    void TransferLine(ref string line);
} 
```

# f# - 延续单子中的 StackOverflow

> ID：11188779
> 
> 赞同：10
> 
> 时间：2012-06-25T11:47:12.853
> 
> 标签：f#, monads, computation-expression

使用以下延续单子：

```
type ContinuationMonad() =
    member this.Bind (m, f) = fun c -> m (fun a -> f a c)
    member this.Return x = fun k -> k x

let cont = ContinuationMonad() 
```

我不明白为什么以下给我一个堆栈溢出：

```
let map f xs =
    let rec map xs =
        cont {
            match xs with
            | [] -> return []
            | x :: xs ->
                let! xs = map xs
                return f x :: xs
        }
    map xs id;;

let q = [1..100000] |> map ((+) 1) 
```

虽然以下没有：

```
let map f xs =
    let rec map xs =
        cont {
            match xs with
            | [] -> return []
            | x :: xs ->
                let! v = fun g -> g(f x)
                let! xs = map xs
                return v :: xs
        }
    map xs id;;

let q = [1..100000] |> map ((+) 1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:47:57.063

要修复您的示例，请将此方法添加到您的 monad 定义中：

```
member this.Delay(mk) = fun c -> mk () c 
```

显然溢出的部分是递归调用中大输入列表的破坏`map`。延迟它可以解决问题。

请注意，您的第二个版本将递归调用置于`map`另一个`let!`desugars`Bind`和一个额外的 lambda 之后，实际上延迟了对 的递归调用`map`。

在得出这个结论之前，我不得不追寻一些错误的线索。除非递归调用被延迟，否则有帮助的是观察到它`StackOverflow`也会被抛出`OCaml`（尽管更高）。`N`虽然`F#`TCO 有一些怪癖，`OCaml`但经过更多证明，这让我确信问题确实出在代码而不是编译器上：

```
let cReturn x = fun k -> k x
let cBind m f = fun c -> m (fun a -> f a c)

let map f xs =
  (* inner map loop overflows trying to pattern-match long lists *)
  let rec map xs =
    match xs with
      | [] -> cReturn []
      | x :: xs ->
        cBind (map xs) (fun xs -> cReturn (f x :: xs)) in
  map xs (fun x -> x)

let map_fixed f xs =
  (* works without overflowing by delaying the recursive call *)
  let rec map xs =
    match xs with
      | [] -> cReturn []
      | x :: xs ->
        cBind (fun c -> map xs c) (fun xs -> cReturn (f x :: xs)) in
  map xs (fun x -> x)

let map_fused f xs =
  (* manually fused version avoids the problem by tail-calling `map` *)
  let rec map xs k =
    match xs with
      | [] -> k []
      | x :: xs ->
        map xs (fun xs -> k (f x :: xs)) in
  map xs (fun x -> x) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T12:18:33.520

F# 编译器有时不是很聪明——在第一种情况下，它先计算`map xs`然后`f x`将它们连接起来，所以`map xs`它不在尾部位置。在第二种情况下，它可以`map xs`轻松地将其重新排序为尾部位置。

# android - 如何在android中打开水晶报表

> ID：11188782
> 
> 赞同：3
> 
> 时间：2012-06-25T11:47:27.767
> 
> 标签：android, crystal-reports, helper, viewer

请帮我在android中打开Crystal报表。有android的水晶报表查看器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:21:58.763

我会将它们显示为 PDF 或使用自定义 XML 导出格式导出的 HTML。如果您不熟悉 XSL 模板，这会很棘手，所以 PDF 对我来说是最简单的。

内置的 HTML32/HTML40 导出通常会为复杂的报告生成错误的结果

# objective-c - 在iphone中解析相同的元素名称

> ID：11188783
> 
> 赞同：2
> 
> 时间：2012-06-25T11:47:30.657
> 
> 标签：objective-c, ios, cocoa-touch, xml-parsing, nsxmlparser

我不知道如何在两个不同的树中区分相同的元素名称，例如 City、Area。因此，请帮助我在 iphone 中解析相同的元素名称。

```
<Contacts id="1">
    <Fname>Siddharth</Lname>
    <Lname>Chopra</Lname>
    <Currentaddress>
        <Area>Aundh</Area>
        <City>Pune</City>
        <Phone>8796xxxx</Phone>
    </Currentaddress>
    <Permanentaddress>
        <Area>Bhatar</Area>
        <City>Surat</City>
        <Phone>989825xxxx</Phone>
    </Permanentaddress>
    </Contacts> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:09:39.397

你必须在 中设置一个标志`didstartElement`，标志的值会让你知道，哪个父树正在解析过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:23:16.867

在您的类中创建一个可变数组，您将使用它作为堆栈。
如果新元素开始，则创建一个表示它的对象（自定义（托管）对象或字典）并将其添加到数组中。在`didFoundCharacter:`更改对象中，这是数组中的最后一个。如果`didEndElement:`被调用，则将其保存到核心数据、文件、sql 或内存中的另一个数组。并将其从阵列中移除。

如果元素或被处理`<Area>`，你就会知道，倒数第二个位置的对象是地址，它们属于。要么要么。`<City>``<Phone>``<Currentaddress>``<Permanetaddress>`

# vb.net - 在 MVC 4 Web API 控制器中接受多个参数并映射到自定义方法

> ID：11188784
> 
> 赞同：0
> 
> 时间：2012-06-25T11:47:37.487
> 
> 标签：vb.net, web-services, rest, asp.net-mvc-4

我正在尝试实现一个公开一些模型的 Web API 项目。但是，检索模型的方式不是很 RESTful。

1\. 它不是只有一个 ID，而是组合了 4 个不同的 ID，通过在服务器上运行存储过程来填充模型数据。

```
Dim balance as New BalanceSheet(uid, mid, eid, fid) 
```

上面的代码片段将使用`uid`, `mid`, `eid`,`fid`从数据库中检索正确的记录。

我将如何在控制器中实现它以便`/api/Balance?uid=1&mid=2&eid=3&fid=4`映射到`GetBalance(ByVal uid As Integer, ByVal mid As Integer, ByVal eid As Integer, ByVal fid As Integer)`

2.此外，我希望能够过滤 BalanceSheet 模型的特定成员或获得一些预处理对象返回，如下所示： `/api/Balance/FundCredit?uid=1&mid=2&eid=3&fid=4`映射到`GetFundcredit(ByVal uid As Integer, ByVal mid As Integer, ByVal eid As Integer, ByVal fid As Integer)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:34:15.317

我在这篇文章之后解决了这个问题：[REST vs. RPC in ASP.NET Web API](http://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/)。

我实际上是在尝试将两种不同的范式结合起来——RPC 和 REST。我最初（错误地）认为`api/{controller}/{action}/{id}`只能映射到返回`ActionResult`类型的函数。

这是我的路由规则：

```
 routes.MapHttpRoute( _
            name:="RPCApi", _
            routeTemplate:="api/{controller}/{action}"
        )

        routes.MapHttpRoute( _
            name:="RESTApi", _
            routeTemplate:="api/{controller}/{id}", _
            defaults:=New With {.id = RouteParameter.Optional} _
        ) 
```

其中分别映射`api/balance/?uid=1&mid=2&eid=3&fid=4`和`api/balance/fundcredit?uid=1&mid=2&eid=3&fid=4`到这两个函数：

```
 Public Function GetBalance(ByVal uid As Integer, ByVal mid As Integer, ByVal eid As Integer, ByVal fid As Integer)
        Try
            Dim balance As New BalanceSheet(uid, mid, eid, fid)

            Return balance
        Catch ex As Exception
            Return Nothing
        End Try
    End Function

    Public Function FundCredit(ByVal uid As Integer, ByVal mid As Integer, ByVal eid As Integer, ByVal fid As Integer)
        Dim balance As New BalanceSheet(uid, mid, eid, fid)

        Return balance.FundCredit
    End Function 
```

# unit-testing - 如何在 grails 中测试规模约束

> ID：11188788
> 
> 赞同：3
> 
> 时间：2012-06-25T11:47:46.037
> 
> 标签：unit-testing, grails, constraints

在 Grails 域类中，我有 Field

```
BigDecimal grossWeight 
```

并对其进行约束

```
static constraints = {
      grossWeight(nullable: true, min: BigDecimal.ZERO, scale: 3)
   } 
```

我喜欢测试规模约束，但不知道如何实施

以下不起作用

```
formxItem = new FormXItem(grossWeight: new BigDecimal("0.1234"))
assert !formxItem.validate()
assertNotNull formxItem.errors['grossWeight'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:41:25.837

根据[scale](http://grails.org/doc/latest/ref/Constraints/scale.html)的文档，约束没有注册任何验证错误，因此它不会失败验证。相反，它会在数据库中设置列的精度，并在必要时自动缩小数字的精度。

# delphi - 在 Tor 中使用 Indy

> ID：11188790
> 
> 赞同：3
> 
> 时间：2012-06-25T11:47:51.297
> 
> 标签：delphi, http, indy, tor

我正在构建一个女巫隐私的应用程序是必不可少的。我需要向服务器发送 HTTP Post 请求。

如何通过 Tor ( [https://www.torproject.org/](https://www.torproject.org/) ) 路由请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:16:41.077

从常见问题解答 - [https://www.torproject.org/docs/faq.html.en#CompatibleApplications](https://www.torproject.org/docs/faq.html.en#CompatibleApplications)

> “Torifying”程序有两个部分：连接级匿名和应用程序级匿名。
> 
> 连接级匿名专注于确保应用程序的 Internet 连接通过 Tor 发送。这一步通常通过将程序配置为使用您的 Tor 客户端作为“socks”代理来完成，(...)

有关“如何将 TIdTCPClient 与 SOCKS 代理一起使用？”的信息 可以在

[http://www.indyproject.org/KB/index.html?howdoiseaproxywithindy.htm](http://www.indyproject.org/KB/index.html?howdoiuseaproxywithindy.htm)

（iirc IdHTTP 基于 TIdTCPClient）

# javascript - 使用 MVC3 RAZOR 视图引擎执行 JavaScript？

> ID：11188794
> 
> 赞同：1
> 
> 时间：2012-06-25T11:47:52.503
> 
> 标签：javascript, asp.net-mvc-3

我在 MVC3 Razor 视图引擎中有一个 Index.cshtml 页面，代码如下：

```
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>

<label id="lblClickMe" style="cursor:pointer"> Test Java Script Work in MVC Razor</label> || <label id="lblReset" style="cursor:pointer"> Rest    </label>

<br /><br /><br /><br />
<input type="text" id="txtResult"  style="width:300px"/> 
```

我在 Sane 页面中有一些 JavaScript，例如：

```
<script type="text/javascript">
    $("#lblClickMe").click(function () {

        var txtResukt = document.getElementById("txtResult");
        txtResukt.value = "Java script work successfully";

    })

    $("#lblReset").click(function () {

        var txtResukt = document.getElementById("txtResult");
        txtResukt.value = "";

    })
</script> 
```

当我尝试加载我的视图时，从“lblClickMe”单击事件中给出以下异常：

```
Microsoft JScript runtime error: Object expected 
```

有没有人修复这个bug？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:12:09.137

尝试这个：

```
 <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $("#lblClickMe").click(function () {
         $("#txtResult").val("Java script work successfully");
        });
        $("#lblReset").click(function () {
          $("#txtResult").val("");
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:54:49.017

尝试这个：

```
$(document).ready(function()
{
    $("#lblClickMe").click(function () { 

        var txtResukt = document.getElementById("txtResult"); 
        txtResukt.value = "Java script work successfully"; 

    }) 

    $("#lblReset").click(function () { 

        var txtResukt = document.getElementById("txtResult"); 
        txtResukt.value = ""; 

    }) 

}); 
```

这可确保在代码尝试连接点击事件之前首先加载页面中的 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:59:42.150

为什么不这样做？

```
$("#lblClickMe").click(function () {
    document.getElementById("txtResult").value = "Java script work successfully";
}); 
```

或者在纯 jQuery 中：

```
$("#lblClickMe").click(function () {
    $("#txtResult").val("Java script work successfully");
}); 
```

# java - 整数区间内的哈希表键

> ID：11188795
> 
> 赞同：11
> 
> 时间：2012-06-25T11:47:56.953
> 
> 标签：java, hashtable

我不知道这是否可能，但我正在尝试制作一个哈希表，其中 Interval 是一个具有 2 个整数/长值、一个开始和一个结束的类，我想做这样的事情：

```
Hashtable<Interval, WhateverObject> test = new Hashtable<Interval, WhateverObject>();
test.put(new Interval(100, 200), new WhateverObject());
test.get(new Interval(150, 150)) // returns the new WhateverObject i created above because 150 is betwwen 100 and 200
test.get(new Interval(250, 250)) // doesn't find the value because there is no key that contains 250 in it's interval 
```

所以基本上我想要的是Interval对象中一系列值之间的键给出对应的WhateverObject。我知道我必须在间隔对象中覆盖 equals() 和 hashcode()，我认为的主要问题是以某种方式让所有值在 100 到 200 之间（在这个特定示例中）以给出相同的哈希。

任何想法，如果这是可能的？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T13:15:15.527

无需重新发明轮子，使用[`NavigableMap`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html). 示例代码：

```
final NavigableMap<Integer, String> map = new TreeMap<Integer, String>();
map.put(0, "Cry Baby");
map.put(6, "School Time");
map.put(16, "Got a car yet?");
map.put(21, "Tequila anyone?");
map.put(45, "Time to buy a corvette");

System.out.println(map.floorEntry(3).getValue());
System.out.println(map.floorEntry(10).getValue());
System.out.println(map.floorEntry(18).getValue()); 
```

输出：

> Cry Baby
> School Time
> 有车了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T13:02:33.897

天真的 HashTable 在这里是错误的解决方案。覆盖 equals() 方法对您没有任何好处，因为 HashTable 首先通过哈希码比较键条目，而不是 equals() 方法。equals() 方法仅在哈希码匹配后检查。

在区间对象上创建散列函数很容易，但要为另一个区间内的所有可能区间生成相同的散列码则要困难得多。为 HashTable覆盖 get() 方法（例如这里的[https://stackoverflow.com/a/11189075/1261844](https://stackoverflow.com/a/11189075/1261844)）完全否定了 HashTable 的优势，即查找时间非常快。在您扫描 HashTable 的每个成员时，您就知道您正在错误地使用 HashTable。

我会说[使用 java map 进行范围搜索](https://stackoverflow.com/questions/1314650/using-java-map-for-range-searches)和[https://stackoverflow.com/a/11189080/1261844](https://stackoverflow.com/a/11189080/1261844)是更好的解决方案，但是 HashTable 根本不是解决这个问题的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T12:07:52.497

您可以使用[IntervalTree](http://en.wikipedia.org/wiki/Interval_tree)。这是我之前做的一个。

```
public class IntervalTree<T extends IntervalTree.Interval> {
  // My intervals.

  private final List<T> intervals;
  // My center value. All my intervals contain this center.
  private final long center;
  // My interval range.
  private final long lBound;
  private final long uBound;
  // My left tree. All intervals that end below my center.
  private final IntervalTree<T> left;
  // My right tree. All intervals that start above my center.
  private final IntervalTree<T> right;

  public IntervalTree(List<T> intervals) {
    if (intervals == null) {
      throw new NullPointerException();
    }

    // Initially, my root contains all intervals.
    this.intervals = intervals;

    // Find my center.
    center = findCenter();

    /*
     * Builds lefts out of all intervals that end below my center.
     * Builds rights out of all intervals that start above my center.
     * What remains contains all the intervals that contain my center.
     */

    // Lefts contains all intervals that end below my center point.
    final List<T> lefts = new ArrayList<T>();
    // Rights contains all intervals that start above my center point.
    final List<T> rights = new ArrayList<T>();

    long uB = Long.MIN_VALUE;
    long lB = Long.MAX_VALUE;
    for (T i : intervals) {
      long start = i.getStart();
      long end = i.getEnd();
      if (end < center) {
        lefts.add(i);
      } else if (start > center) {
        rights.add(i);
      } else {
        // One of mine.
        lB = Math.min(lB, start);
        uB = Math.max(uB, end);
      }
    }

    // Remove all those not mine.
    intervals.removeAll(lefts);
    intervals.removeAll(rights);
    uBound = uB;
    lBound = lB;

    // Build the subtrees.
    left = lefts.size() > 0 ? new IntervalTree<T>(lefts) : null;
    right = rights.size() > 0 ? new IntervalTree<T>(rights) : null;

    // Build my ascending and descending arrays.
    /** @todo Build my ascending and descending arrays. */
  }

  /*
   * Returns a list of all intervals containing the point.
   */
  List<T> query(long point) {
    // Check my range.
    if (point >= lBound) {
      if (point <= uBound) {
        // In my range but remember, there may also be contributors from left or right.
        List<T> found = new ArrayList<T>();
        // Gather all intersecting ones.
        // Could be made faster (perhaps) by holding two sorted lists by start and end.
        for (T i : intervals) {
          if (i.getStart() <= point && point <= i.getEnd()) {
            found.add(i);
          }
        }

        // Gather others.
        if (point < center && left != null) {
          found.addAll(left.query(point));
        }
        if (point > center && right != null) {
          found.addAll(right.query(point));
        }

        return found;
      } else {
        // To right.
        return right != null ? right.query(point) : Collections.<T>emptyList();
      }
    } else {
      // To left.
      return left != null ? left.query(point) : Collections.<T>emptyList();
    }

  }

  private long findCenter() {
    //return average();
    return median();
  }

  protected long median() {
    // Choose the median of all centers. Could choose just ends etc or anything.
    long[] points = new long[intervals.size()];
    int x = 0;
    for (T i : intervals) {
      // Take the mid point.
      points[x++] = (i.getStart() + i.getEnd()) / 2;
    }
    Arrays.sort(points);
    return points[points.length / 2];
  }

  /*
   * What an interval looks like.
   */
  public interface Interval {

    public long getStart();

    public long getEnd();
  }

  /*
   * A simple implemementation of an interval.
   */
  public static class SimpleInterval implements Interval {

    private final long start;
    private final long end;

    public SimpleInterval(long start, long end) {
      this.start = start;
      this.end = end;
    }

    public long getStart() {
      return start;
    }

    public long getEnd() {
      return end;
    }

    @Override
    public String toString() {
      return "{" + start + "," + end + "}";
    }
  }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T12:07:31.613

我认为实现一个专门的get方法会容易得多。

新方法可以是 map-wrapper-class 的一部分。

关键类：（间隔为 [lower;upper[ ）

```
public class Interval {
    private int upper;
    private int lower;

    public Interval(int upper, int lower) {
        this.upper = upper;
        this.lower = lower;
    }

    public boolean contains(int i) {
        return i < upper && i >= lower;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Interval other = (Interval) obj;
        if (this.upper != other.upper) {
            return false;
        }
        if (this.lower != other.lower) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 5;
        hash = 61 * hash + this.upper;
        hash = 61 * hash + this.lower;
        return hash;
    }
} 
```

地图类：

```
public class IntervalMap<T> extends HashMap<Interval, T> {

    public T get(int key) {
        for (Interval iv : keySet()) {
            if (iv.contains(key)) {
                return super.get(iv);
            }
        }
        return null;
    }
} 
```

这只是一个例子，当然可以优化，也有一些缺陷：

例如，如果间隔重叠，则无法保证知道哪个间隔将用于查找，并且不保证间隔不重叠！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T14:08:09.660

OldCurmudgeon 的解决方案非常适合我，但初始化速度很慢（70k 条目需要 20 分钟）。如果您知道传入的项目列表已经排序（升序）并且只有非重叠间隔，您可以通过添加和使用以下构造函数使其以毫秒为单位进行初始化：

```
public IntervalTree(List<T> intervals, boolean constructorFlagToIndicateOrderedNonOverlappingIntervals) {
    if (intervals == null) throw new NullPointerException();

    int centerPoint = intervals.size() / 2;
    T centerInterval = intervals.get(centerPoint);
    this.intervals = new ArrayList<T>();
    this.intervals.add(centerInterval);
    this.uBound = centerInterval.getEnd();
    this.lBound = centerInterval.getStart();
    this.center = (this.uBound + this.lBound) / 2;
    List<T> toTheLeft = centerPoint < 1 ? Collections.<T>emptyList() : intervals.subList(0, centerPoint);
    this.left = toTheLeft.isEmpty() ? null : new IntervalTree<T>(toTheLeft, true);
    List<T> toTheRight = centerPoint >= intervals.size() ? Collections.<T>emptyList() : intervals.subList(centerPoint+1, intervals.size());
    this.right = toTheRight.isEmpty() ? null : new IntervalTree<T>(toTheRight, true);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T13:51:22.877

要让 Hastable 或 HashMap 按预期工作，它不仅是相等的哈希码，而且 equals 方法必须返回 true。您要求的是 Interval(x, y).equals(Interval(m, n)) for m, n 在 x,y 内。由于对于 Interval 的任何重叠的活实例都必须如此，因此该类必须记录所有这些实例，并且确实需要实现您想要实现的目标。

所以简而言之，答案是否定的。

Google guava 库计划提供 RangeSet 和 Map：[guava RangeSet](https://code.google.com/p/guava-libraries/issues/detail?id=769&q=RangeSet&colspec=ID%20Stars%20Type%20Status%20Package%20Milestone%20Summary)

对于合理的小范围，一种简单的方法是通过放置和获取间隔的各个值来专门化 HashMap。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-25T12:01:33.840

这取决于您的 hashCode 实现。您可能有两个具有相同 hashCode 值的对象。
请使用eclipse为你的类生成一个hashCode方法（没必要重新发明轮子

# android - 使用 onPrepareDialog 刷新对话框不起作用

> ID：11188797
> 
> 赞同：2
> 
> 时间：2012-06-25T11:47:56.910
> 
> 标签：android, dialog

```
@Override
protected Dialog onCreateDialog(int id) {
    // TODO Auto-generated method stub
    if(id == 0){
    AlertDialog.Builder dialog = new AlertDialog.Builder(this);

    dialog.setTitle("page");
    dialog.setIcon(R.drawable.icon);

        return dialog.create();
    }else{
     return super.onCreateDialog(id);
    }
} 
```

使用 onCreateDialog 创建对话框

```
 @Override
protected void onPrepareDialog(int id, Dialog dialog) {
    // TODO Auto-generated method stub
    super.onPrepareDialog(id, dialog);

      LayoutInflater vi = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
    if(id==0){

        View lo = (LinearLayout)vi.inflate(R.layout.detail_dialog, null);

                   ~~inflate View~~

        ((AlertDialog) dialog).setView(lo);
    }
} 
```

但是Dialog没有设置View。并且不要更改对话框。

如何在对话框中绘制不断变化的内容视图？

# json - Facebook 不会确认我的操作链接

> ID：11188799
> 
> 赞同：0
> 
> 时间：2012-06-25T11:48:03.493
> 
> 标签：json, facebook-graph-api, facebook-opengraph

我正在尝试获得批准的开放图形操作链接。但是，它在没有任何有用提示的情况下被拒绝。我认为我们符合[http://developers.facebook.com/docs/opengraph/opengraph-approval/](http://developers.facebook.com/docs/opengraph/opengraph-approval/)中列出的规则。（这是关于对作者竞赛的投票，对“书籍”的“投票”）。如果没有操作链接，它会很快获得批准。我怀疑它没有获得批准有技术原因，我目前无法弄清楚它可能是什么。只有一次有标准文本以外的解释。它显示（真实 URL 更改为 [our.site]）：

> 您提交的操作链接未链接到有效的 URL，特别是我们在单击您提交的链接时收到此消息：{"redirect":"http://[our.site]/specials/schreibwettbewerb"}

好的。但是这个接口应该返回 JSON 编码的结果，对吧？在日志中，每次提交时，此页面都有一个测试请求，没有签名请求参数。这是一个错误条件，所以我返回一个错误。

有人知道我可能做错了什么吗？该界面不应该被点击，它返回的正是它应该返回的内容。您是如何让您的 Facebook 操作链接获得批准的？

# git - 将本地仓库与远程仓库连接起来

> ID：11188801
> 
> 赞同：129
> 
> 时间：2012-06-25T11:48:19.270
> 
> 标签：git, repository

我有一个本地仓库。我创建了整个应用程序，但现在我想将它推送到远程仓库。我也已经有远程仓库了。如何在不丢失我所做的任何工作的情况下连接这两个存储库？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-06-25T11:50:49.627

```
git remote add origin <remote_repo_url>
git push --all origin 
```

如果您想将所有分支设置为在使用时自动使用此远程仓库，请`git pull`添加`--set-upstream`到推送中：

```
git push --all --set-upstream origin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-02T09:05:44.183

“vergenzt”提供了一行确切的答案，但是如果您想详细了解如何提交代码并连接本地和远程 github repo 并使用 git cli 将代码推送到远程 repo，您​​可以阅读这篇文章： [https ://medium.com/geekstrends/a-beginners-guide-to-starting-with-git-cli-1d5c44af0a4](https://medium.com/geekstrends/a-beginners-guide-to-starting-with-git-cli-1d5c44af0a4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T02:18:07.953

我知道您问这个问题已经有一段时间了，但是，如果其他人需要，我做了这里所说的“[如何将项目上传到 Github](https://stackoverflow.com/questions/12799719/how-to-upload-a-project-to-github) ”，并在此问题的最佳答案之后。之后最重要的答案是在这里说“ [git error: failed to push some refs to](https://stackoverflow.com/questions/24114676/git-error-failed-to-push-some-refs-to) ” 我不知道究竟是什么让一切正常。但现在正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-02T17:09:43.397

首先执行此命令`git remote add origin {url for the remote repo}` ，然后标记此命令`git push origin master`注意 master 的名称是 github 上的远程存储库的名称，如果它有另一个名称，例如 main 或其他名称，请使用它而不是 master。预计现在可以连接并推送您的本地存储库。如果发生某些事情或出现任何错误，请尝试此命令`git pull --rebase origin master`

# asp.net - 从 ie9 加载命令提示符

> ID：11188803
> 
> 赞同：0
> 
> 时间：2012-06-25T11:48:24.627
> 
> 标签：asp.net, internet-explorer, cmd

如何从 ie9 执行命令提示符命令？

我知道这个：

```
file:///c:\windows\system32\cmd.exe 
```

加载它，但如何向其中添加命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:09:08.027

IE 并没有实际执行命令，只是将其传输到 windows shell - 这意味着 Microsoft 已将 IE 与 Windows Shell 合并以使用户界面更友好 - 所以从 url 调用它，你实际上并没有对浏览器。

此命令可能仅在浏览器 url 上执行交互，并且由于显而易见的原因不能以编程方式调用它们......就像这样：

```
file:///c:\windows\system32\cmd.exe del c:\*.* 
```

# php - 用php下载twitter图片

> ID：11188804
> 
> 赞同：0
> 
> 时间：2012-06-25T11:48:28.390
> 
> 标签：php, twitter

亲爱的，我正在尝试下载与推文相关的图像，但我遇到了很多问题。

首先，我发现它`entities->media[0]->media_url`包含图像 URL，但在每条推文中都不相同。

现在我在 YFROG.com 上看到一条带有相关照片网址的推文`entities->urls`

我找不到正确的文档或示例代码：您能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:58:50.920

[您可以按照本文档https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)中的说明获取媒体实体

要获取图像，您可以使用 file_get_contents($image)

所以你的代码看起来像

```
<?php
   $value = file_get_contents($image);
   $fp = fopen('path_to_filename.png', 'w');
   fwrite($fp, $value); 
   fclose($fp); 

?> 
```

希望这可以帮助

# sql - 喜欢信息

> ID：11188805
> 
> 赞同：0
> 
> 时间：2012-06-25T11:48:43.543
> 
> 标签：sql, sql-server-2008

此查询返回两个表的`DBKEY`和`DBPArentProductKEy`结果。

```
select 
    pog.DBKey
    ,pos.DBParentProductKey
    , pro.Name
from ix_spc_planogram as pog with (nolock)
     , ix_spc_position as pos with (nolock)
     , ix_spc_product as pro with (nolock)
where 
     pog.dbkey = pos.dbparentplanogramkey
     and pos.dbparentproductkey=pro.dbkey 
     and pog.Value4= 358 
```

**例子：**

```
DBKEY    DBPArentProduct KEy
1        0123
1        0124
1        0125
2        0126
3        0123
3        0124
3        0125 
```

我现在需要一个查询，它可以让我确定是否有`DBKEYS`完全相同的产品重复。例如示例`DBKEY`1 与`DBPArentProductKeys`DBKEY3 完全相同。我需要找出这一点，以便识别重复项。考虑这个问题的另一种方法是我想知道有多少订单具有完全相同的产品，其中 order be`DBKEY`和 Products be `DBPAREntPRoductKey`。

如果可以提供任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:53:30.463

什么风格的 SQL？Oracle、SQL Server 和 MySQL 可以这样做……

```
SELECT count(*), DBParentProductKEy
FROM (
    select pog.DBKey
    ,pos.DBParentProductKey
    , pro.Name
    from ix_spc_planogram as pog with (nolock)
    , ix_spc_position as pos with (nolock)
    , ix_spc_product as pro with (nolock)
    where pog.dbkey = pos.dbparentplanogramkey
    and  pos.dbparentproductkey=pro.dbkey 
      and pog.Value4= 358)
GROUP BY DBParentProductKEy
HAVING COUNT(*) > 1 
```

# jsf-2 - 如何为整个 JSF 表单显示单个验证消息？

> ID：11188810
> 
> 赞同：1
> 
> 时间：2012-06-25T11:49:04.193
> 
> 标签：jsf-2, primefaces, validation

我有一个包含多个字段的 JSF 表单。PrimeFaces 通常以这种方式进行验证：http: [//www.primefaces.org/showcase-labs/ui/pprAjaxValidations.jsf](http://www.primefaces.org/showcase-labs/ui/pprAjaxValidations.jsf)

但是我的 JSF 表单中有 30 多个字段，所以如果我进行此验证，它看起来并不好。如果缺少任何字段，如何仅提供一条消息，例如“请填写缺失值”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:34:39.933

您可以基于 有条件地呈现消息[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)。

```
<h:outputText value="Please fill out missing values" rendered="#{facesContext.validationFailed}" /> 
```

**请注意，这只有在您只**启用了`required="true"`验证并且因此不使用最终用户当然希望看到更具体的消息的任何转换器或其他更具体的验证器时才有意义。

# c# - Windows Phone 7.1 HTTP GET 与 DownloadStringAsync

> ID：11188818
> 
> 赞同：0
> 
> 时间：2012-06-25T11:49:37.167
> 
> 标签：c#, windows-phone-7, asynchronous, download

在网上搜索了大约 4 个小时后，我仍然不了解 Windows Phone 7 上的异步函数。我尝试运行该代码，但看起来我的 webClient 的“DownloadStringCompleted”事件从未引发过。我试图在这里等待答案，但它只是冻结了我的应用程序。任何人都可以帮助并解释为什么它不起作用？

```
 internal string HTTPGet()
    {
        string data = null;
        bool exit = false;
        WebClient webClient = new WebClient();
        webClient.UseDefaultCredentials = true;

        webClient.DownloadStringCompleted += (sender, e) =>
        {
            if (e.Error == null)
            {
                data = e.Result;
                exit = true;
            }
        };

        webClient.DownloadStringAsync(new Uri(site, UriKind.Absolute));

        //while (!exit)
        //    Thread.Sleep(1000);

        return data;
    } 
```

行。发现了一些东西！ [http://blogs.msdn.com/b/kevinash/archive/2012/02/21/async-ctp-task-based-asynchronous-programming-for-windows-phone.aspx](http://blogs.msdn.com/b/kevinash/archive/2012/02/21/async-ctp-task-based-asynchronous-programming-for-windows-phone.aspx) 耶！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:58:40.513

它不是模拟器的问题。您想从 HttpGet() 方法返回数据，但在 webClient 的实际响应发生之前，数据已经返回（为 null）。因此，我建议您对代码进行一些更改并尝试。

```
WebClient client = new WebClient();
client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
client.DownloadStringAsync(new Uri(site, UriKind.Absolute)); 
```

然后在 DownloadCompleted 事件处理程序（或回调）中，您操纵实际结果

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    var response= e.Result; // Response obtained from the site
} 
```

# webdav - 支持 Kerberos 的 WebDAV 库？

> ID：11188823
> 
> 赞同：0
> 
> 时间：2012-06-25T11:50:21.707
> 
> 标签：webdav, kerberos

我想以编程方式读取受[Kerberos](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)保护的[WebDAV](http://en.wikipedia.org/wiki/WebDAV)服务器的文件。

我[尝试](http://code.google.com/p/sardine/issues/detail?id=126)将 Kerberos 支持添加到[Sardine](http://code.google.com/p/sardine/) (Java)，但似乎效果不佳。

是否有支持 Kerberos 的 WebDAV 库？（任何语言，最好是开源的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-30T19:19:44.330

我发现可行的解决方案是使用通过 Apache HttpClient 扩展 HttpRequestBase 的 Sardine 方法类。您将需要同时使用 httpclient 和 httpclient-win

```
try {
    CloseableHttpClient client = WinHttpClients.createDefault();

    HttpMove move = new HttpMove(fullSource, fullDestination, false);

    CloseableHttpResponse response = client.execute(move);          
    if (response.getStatusLine().getStatusCode() == 201){
        System.out.println("Yay");
    }

} catch (Exception e) {
    e.printStackTrace();
}

throw new Exception("Unable to move node"); 
```

以下是使用的依赖项（gradle 形式）

*   编译组：'com.github.lookfirst'，名称：'sardine'，版本：'5.+'
*   编译组：'org.apache.httpcomponents'，名称：'httpclient'，版本：'4.5.+'
*   编译组：'org.apache.httpcomponents'，名称：'httpclient-win'，版本：'4.5.+'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:30:41.227

传输库需要 Kerberos 支持而不是您的 WebDAV 库。尝试修复该传输库。Oracle 的 URLConnection 就是这样做的。

# javascript-events - Backbone - 视图事件对象中的自定义事件

> ID：11188824
> 
> 赞同：1
> 
> 时间：2012-06-25T11:50:27.870
> 
> 标签：javascript-events, backbone.js

我试图弄清楚为什么会这样：

```
var TestView = Backbone.View.extend({
    views: {},

    initialize: function(){
        this.bind('transistion:complete', this.onPageLoaded);

    },

    onPageLoaded: function(){
        alert("works!");
    }
});

var v = new TestView();
v.trigger('transition:complete'); 
```

但这不起作用：

```
var TestView = Backbone.View.extend({
    views: {},

    events:{
        'transition:complete': 'onPageLoaded'
    },

    onPageLoaded: function(){
        alert("works!");
    }
});

var v = new TestView();
v.trigger('transition:complete'); 
```

能够从视图的事件对象中触发我的自定义事件会更整洁。无论如何我可以让它工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:15:13.557

`events`哈希是为 DOM 事件（如 click ）指定的，而通过触发和`trigger`绑定`on`的事件是 Backbone 的内部事件。所以当你去`v.trigger('eventname')`的时候，事件不是 DOM 事件，而是 Backbone 特有的。

[在这里](http://backbonejs.org/#View-delegateEvents)阅读更多

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T14:47:00.750

骨干事件哈希与 DOM 相关联，而不是与视图相关联。

检查如何将触发器运行到 View 元素中：

```
var TestView = Backbone.View.extend({

    events:{
        'transition:complete': 'onPageLoaded'
    },

    onPageLoaded: function(){
        alert("works!");
    }
});

var v = new TestView();
v.$el.trigger('transition:complete'); 
```

但是，如果不需要将自定义事件绑定到元素，您的第一个代码就可以了，只需将 bind 替换为 on，如下所示：

```
this.on('transistion:complete', this.onPageLoaded); 
```

# linux - SVN：强制 svn 守护进程在不同的用户下运行

> ID：11188825
> 
> 赞同：0
> 
> 时间：2012-06-25T11:50:29.423
> 
> 标签：linux, svn, command-line

我有一个小型 NAS 服务器（QNAP TS-210），板载有限的 Linux。我在本地 SVN 守护程序中运行挂钩时遇到问题。如果我直接从命令行运行它们，一切正常。如果 SVN 尝试将它们作为钩子运行，或者将它们添加到 crontab 中，然后 CRON 尝试运行它们，两者都会失败。

有人告诉我，这是由于运行这些脚本/挂钩的用户之间存在差异。我以“admin”身份通过 SSH 登录到我的 nas，并假设 CRON 和 SVN 都在“root”下运行。似乎 root 对目标文件夹没有足够的权限（我使用 SVN post-commit-hook 将存储库导出到某个本地文件夹）或运行 SVN / CRON（SVN 在 pre-revprop-change 挂钩上也失败，即使它包含 only `exit 0`，所以我假设 SVN 根本不能运行钩子）。或者也许这是不同的东西？

**编辑**：如何强制 SVN 在“admin”下运行，或者如何为“root”设置足够的权限，以便它可以像我一样（“admin”）运行 SVN 挂钩？

**编辑**：我的钩子脚本就是`/share/Sys/svn/tools_and_examples/hooks`这样，调用

```
ls -lh /share/Sys/svn/tools_and_examples/hooks 
```

结果是：

```
-rwxrwx--x    1 trejder  everyone      147 Jun 24 14:33 post-commit.cron*
-rw-rw----    1 admin    administ     1.9k Jun 25 12:20 post-commit.tmpl
-rw-rw----    1 admin    administ     1.6k Jun 25 12:20 post-lock.tmpl
-rw-rw----    1 admin    administ     2.2k Jun 25 12:20 post-revprop-change.tmpl
-rw-rw----    1 admin    administ     1.5k Jun 25 12:20 post-unlock.tmpl
-rw-rw----    1 admin    administ     3.3k Jun 25 12:20 pre-commit.tmpl
-rw-rw----    1 admin    administ     2.4k Jun 25 12:20 pre-lock.tmpl
-rw-rw----    1 admin    administ        6 Jun 25 12:29 pre-revprop-change
-rw-rw----    1 admin    administ     2.1k Jun 25 12:20 pre-unlock.tmpl
-rw-rw----    1 admin    administ     2.7k Jun 25 12:20 start-commit.tmpl 
```

并`ls -lh /share/Sys/svn/tools_and_examples/hooks/post-commit.cron`给了我这个：

```
-rwxrwx--x    1 trejder  everyone      147 Jun 24 14:33 /share/Sys/svn/tools_and_examples/hooks/post-commit.cron* 
```

希望，这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:16:55.100

对于以管理员身份启动的 cron，而不是编辑

```
/etc/crontab 
```

你应该使用

```
crontab -e 
```

以管理员身份登录并放置您希望管理员使用其自己的 crontab 启动的任何命令/脚本。如果我没记错的话，它应该以“管理员”用户身份启动

# c++ - 在 C++ 中构造对象时有两个隐式强制转换是否有效？

> ID：11188826
> 
> 赞同：5
> 
> 时间：2012-06-25T11:50:33.883
> 
> 标签：c++, constructor, implicit-conversion

给定以下两个构造函数签名，是否可以构造 a `Couple`with `Couple("George", "Nora")`？我的编译器抱怨如下所示的错误。如果我用它来调用它，`Couple(std::string("George"), std::string("Nora"))`它就可以编译。我猜隐式转换存在问题，这让我感到惊讶，因为我认为 char* 到字符串会很好。

```
class Person
{
    public:
        Person(const std::string& name);
};

class Couple
{
    public:
        Coordinate(const Person& p1, const Person& p2, const Optional<Person>& = Optional<Person>());
};

TestCouple.cpp:69: error: no matching function for call to `Couple::Couple(const char[7], const char[5])'
TestCouple.h:24: note: candidates are: Couple::Couple(const Person&, const Person&, const Optional<fox::Person>&) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T11:57:05.717

实际上，一个转换序列不能包含多个隐式用户定义转换；该标准在 C++11 12.3/4 中指定了这一点：

> 最多一个用户定义的转换（构造函数或转换函数）被隐式应用于单个值。

在您的情况下，需要两个（`char const[]`to `std::string`to `Person`），因此不可能进行隐式转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T11:55:47.567

您是正确的，隐式转换存在问题。它只会对一个值进行一次隐式转换，因此您可以执行`Couple(std::string("a"), std::string("b"))`或`Couple(Person("a"), Person("b"))`，例如，但`Couple("a", "b")`需要编译器对每个值进行两次隐式转换。标准不允许这样做，因为它会导致代码可能难以正确理解并且编译起来计算成本很高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:56:27.630

不允许链式隐式转换。如果`A`can 隐式转换成`B`和`B`can 隐式转换成`C`，那么并不意味着`A`可以隐式转换成`C.`

```
//given three objects as
A a;
B b'
C c;

//premises 
b = a; //a can convert into b (implicitly)
c = b; //b can convert into c (implicitly)

//then it does not follow this
c = a; //a CANNOT convert into c (implicitly)

//you need to write this at least
c = static_cast<B>(a); //ok 
```

# php - PHP：在一行中添加两个图像

> ID：11188827
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:50:49.323
> 
> 标签：php, image, upload

我有一个将图像添加到目录的 php 脚本。

看起来像：

```
//SET DESINATION FOLDER
        $path = ABSPATH."image/display/".$new_image_name;
        $pathlarge = ABSPATH."image/display/full_size/".$new_image_name;

        if($product_img !=none)
        {
            if(move_uploaded_file($_FILES['product_img']['tmp_name'], $path))
            { 
```

我正在尝试添加第二张图片。我会这样做吗：

```
if(move_uploaded_file($_FILES['product_img']['tmp_name'], $path) && move_uploaded_file($_FILES['product_img']['tmp_name'], $pathlarge)) 
```

它似乎对我不起作用。谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:52:35.983

你有两个`&& &&`？不是吗？

# c# - 用 C++ 编写的 C# DllImport 库

> ID：11188830
> 
> 赞同：0
> 
> 时间：2012-06-25T11:51:00.640
> 
> 标签：c#, dll, dllimport

我是 C# 的新手。我自己用 C++ 编写了 Dll，我将在 C# 应用程序中使用该 dll 中的函数。

因此，我在 C++ 项目中声明函数时执行以下操作：

```
public static __declspec(dllexport) int captureCamera(int& captureId); 
```

然后我试图在 C# 应用程序中导入这个方法：

```
[DllImport("MyLib.dll")]
public static extern int captureCamera(ref int captureId); 
```

但我有一个例外：

```
Unable to find an entry point named 'captureCamera' in DLL 'MyLib.dll'. 
```

任务是在不指定 EntryPoint 参数的情况下执行 dllimport。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:54:51.873

`public static __declspec(dllexport) int captureCamera(int& captureId);`

是那个方法吗？如果它是函数，它不能是静态的，因为`static`和`dllexport`是互斥的。

而且这个名字被破坏了。请参阅[http://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B_Name_Mangling](http://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B_Name_Mangling)。如果您可以获取损坏的名称，然后提供`DllImport`它（`EntryPoint=MANGLED_NAME`），它应该可以工作。

您可以为链接器提供`.def`包含导出函数定义的文件，并且它们的名称不会被破坏：

项目定义：

```
EXPORTS
    captureCamera @1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:54:36.140

你在声明

```
extern "C" {
    __declspec(dllexport) int captureCamera(int& captureId);
} 
```

在您的 c++ 代码中 - C# 只能访问 C，而不是 C++ 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T12:27:57.003

您正在定义一个没有 extern "C" 块的 C++ 函数。由于 C++ 允许您重载函数（即创建许多具有不同参数集的 captureCamera() 函数），因此 DLL 中的实际函数名称会有所不同。您可以通过打开 Visual Studio 命令提示符、转到二进制目录并运行以下命令来检查它：

```
dumpbin /exports YourDll.dll 
```

你会得到这样的东西：

```
Dump of file debug\dll1.dll

File Type: DLL

  Section contains the following exports for dll1.dll

    00000000 characteristics
    4FE8581B time date stamp Mon Jun 25 14:22:51 2012
        0.00 version
           1 ordinal base
           1 number of functions
           1 number of names

    ordinal hint RVA      name

          1    0 00011087 ?captureCamera@@YAHAAH@Z = @ILT+130(?captureCamera@@YAHAAH@Z)

  Summary

        1000 .data
        1000 .idata
        2000 .rdata
        1000 .reloc
        1000 .rsrc
        4000 .text
       10000 .textbss 
```

**?captureCamera@@YAHAAH@Z**是实际编码您指定的参数的错误名称。

如其他答案中所述，只需将 extern "C" 添加到您的声明中：

```
extern "C" __declspec(dllexport) int captureCamera(int& captureId)
{
    ...
} 
```

您可以通过重新运行 dumpbin 来重新检查名称是否正确：

```
Dump of file debug\dll1.dll

File Type: DLL

  Section contains the following exports for dll1.dll

    00000000 characteristics
    4FE858FC time date stamp Mon Jun 25 14:26:36 2012
        0.00 version
           1 ordinal base
           1 number of functions
           1 number of names

    ordinal hint RVA      name

          1    0 000110B4 captureCamera = @ILT+175(_captureCamera)

  Summary

        1000 .data
        1000 .idata
        2000 .rdata
        1000 .reloc
        1000 .rsrc
        4000 .text
       10000 .textbss 
```

# jquery - jquery小写自动完成搜索

> ID：11188832
> 
> 赞同：0
> 
> 时间：2012-06-25T11:51:06.560
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我想使用小写的 jquery 自动完成插件。该数组包括大写、小写单词。Bu当我在文本框中写文本时，jquery应该将该文本转换为小写并将数组单词转换为小写然后匹配单词。

```
var names = [{
    value: "1",
    label: "Jon Kerer"},
{
    value: "2",
    label: "Scott MART"},
{
    value: "3",
    label: "Sel HURGE"}
];​

$("#myInput").autocomplete({
    focus: ..... ? 
    select : .... ? 
    source : ... ?
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:32:46.930

您将需要创建一个字符映射并对名称进行一些解析。这只是一些字符的起始列表。您可以尝试一些全球化库来找到完整的集合

演示：http: [//jsfiddle.net/uQK5s/](http://jsfiddle.net/uQK5s/)

```
var accentMap = {
    "á": "a",
    "ö": "o",
    "Ş": "S",
    "á": "a"
};
var normalize = function(term) {
    var ret = "";
    for (var i = 0; i < term.length; i++) {
        ret += accentMap[term.charAt(i)] || term.charAt(i);
    }
    return ret;
};

$("#test").autocomplete({
    source: function(request, response) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
        response($.grep(names, function(value) {
            value = value.label || value.value || value;
            return matcher.test(value) || matcher.test(normalize(value));
        }));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:04:53.270

使用 toLowerCase() 将字符串转换为小写：

```
var string = 'Test String';
string = string.toLowerCase(); //string is now 'test string' 
```

我不确定您是如何“匹配”单词的，但您应该能够对数组中的值使用相同的函数，然后根据需要进行比较/匹配。

# php - 为什么 PHP 为 (89.99*12) - 1079.88 计算 -2.27373675443E-13？

> ID：11188836
> 
> 赞同：-2
> 
> 时间：2012-06-25T11:51:13.870
> 
> 标签：php, floating-point

> **可能重复：**
> [php calculate float](https://stackoverflow.com/questions/2661817/php-calculate-float)
> [PHP float calculate 的准确性](https://stackoverflow.com/questions/3957705/the-accuracy-of-php-float-calculate)

为什么 PHP 会为此计算 -2.27373675443E-13...

```
echo  (89.99*12) - 1079.88; 
```

它不应该返回0吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:53:37.950

[浮点](http://en.wikipedia.org/wiki/Floating_point)计算很复杂并且可能不准确。这个问题出现在每种编程语言中，因为十进制数不能完美地以二进制表示形式存储。

引用[有关此的 PHP 文档](http://php.net/manual/en/language.types.float.php)：

> 警告
> **浮点精度**
> 
> 浮点数的精度有限。尽管取决于系统，但 PHP 通常使用 IEEE 754 双精度格式，由于在 1.11e-16 的数量级四舍五入，这将给出最大的相对误差。非初等算术运算可能会产生较大的误差，当然，当多个运算复合时，必须考虑误差传播。
> 
> 此外，可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数，无论尾数大小如何，它都在内部使用。因此，它们不能被转换成它们内部的二进制对应物，而不会有小的精度损失。这可能会导致令人困惑的结果：例如， floor((0.1+0.7)*10) 通常会返回 7 而不是预期的 8，因为内部表示将类似于 7.9999999999999991118...。
> 
> 所以永远不要相信浮点数结果到最后一位，也不要直接比较浮点数是否相等。如果需要更高的精度，可以使用任意精度的数学函数和 gmp 函数。

# ios - iOS 应用程序中最多可以包含多少个文件？

> ID：11188839
> 
> 赞同：1
> 
> 时间：2012-06-25T11:51:32.870
> 
> 标签：ios, xcode, validation, zip

我正在构建一个使用大量小数据文件的 iPhone 应用程序。当应用程序中的文件总数小于 64K 时，一切都符合并上传到 Apple 就好了。当它较大时，它会在模拟器上编译和运行，但在使用 Xcode Organizer 准备应用程序以进行上传时无法验证。错误如下：

验证阶段失败并出现错误“（null）不是有效的 zip 文件：ZipContainer 文件：无法转到第一个文件（-1）”

那么，有没有办法修复 Zip 实用程序，或者 Apple 是否在这里施加了限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:34:34.500

为什么不将这些海量文件中的数据合并到一个对象数组中呢？

# apache-poi - 使用提供的“十六进制颜色代码”应用 POI 自定义颜色

> ID：11188840
> 
> 赞同：3
> 
> 时间：2012-06-25T11:51:41.347
> 
> 标签：apache-poi

我目前正在使用 HSSFColor/HSSFPalette 和 XSSFColor 来设置现有/自定义颜色。实现如下： *例如 font.setColor(HSSFColor.WHITE.index); 对于 HSSF 或 cs.setFillForegroundColor(xssfColor); 对于 XSSF*

我想在上述两种情况下为“十六进制颜色代码”传递参数。

喜欢：*对于 HSSF：font.setColor()/font.setColor(getShortIndexFromHexColorCodes()) 对于 XSSF：cs.setFillForegroundColor();*

有没有办法做上述事情，我可以通过十六进制颜色代码，颜色应用于 HSSF 和 XSSF。

请指导我并提前感谢:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T02:26:41.317

当涉及到代码示例时，请[尝试此处](http://poi.apache.org/spreadsheet/quick-guide.html#FillsAndFrills)。

现在稍微解释一下。在参数的情况下，`font.setColor(short)`是标准调色板中某个点的索引。通过使用`HSSFPalette`，您可以调用带有`setColorAtIndex`四个参数的函数。第一个是默认线程中的现有索引点（意味着您将替换的现有颜色）。其他三个分别是您想要的颜色的红色、绿色和蓝色值。因此，用您的自定义创建替换默认调色板中的一个点将允许您使用自己的十六进制值。这是 HSSF 案例。

XSSF 案例确实是微不足道的，这里是一个示例`setFillForegroundColor(new XSSFColor(new java.awt.Color(128, 0, 128)))` 您不必做出与在 HSSF 中相同的牺牲。只需使用 R、G 和 B 所需的十六进制值创建该颜色对象

# javascript - 单击图像并更改文本

> ID：11188841
> 
> 赞同：1
> 
> 时间：2012-06-25T11:51:41.643
> 
> 标签：javascript, html

你在页面上有 2 张图片和一个文本框 (php)

当您单击图像时，我想更改文本。

我是初学者，请发送一个不难理解的代码。

```
<body>
    <img src="bier1.jpg" alt="u mad" onclick= "">
    <img src="bier2.jpg" alt="u mad" onclick= ""><br>

    <form>
    <input type="text" name="Example"/>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:02:57.107

您需要先添加`id`到文本字段：

```
<input type="text" name="Example" id="myTextBox" /> 
```

然后你可以做这样的事情：

```
<img src="bier1.jpg" alt="u mad" onclick="document.getElementById('myTextBox').value = this.alt;" />
<img src="bier2.jpg" alt="u mad" onclick="document.getElementById('myTextBox').value = this.alt;" /> 
```

虽然这不是很优雅，但您无需更改标记即可将其应用于所有图像，拥有这样的 JavaScript：

```
window.onload = function() {
    var oTextbox = document.getElementById('myTextBox');
    for (var i = 0; i < document.images.length; i++) {
        document.images[i].onclick = function() {
            oTextbox.value = this.alt;
        };
    }
}; 
```

[以上代码的现场测试用例](http://jsfiddle.net/aweMK/)。

您还可以通过将类应用于您希望“可点击”的图像，使上述代码仅适用于某些图像，例如：

```
<img src="bier1.jpg" alt="u mad" />
<img class="clickable" src="bier2.jpg" alt="u mad 2" /> 
```

如果只有第二个原因导致文本框发生更改，请使用以下代码：

```
window.onload = function() {
    var oTextbox = document.getElementById('myTextBox');
    for (var i = 0; i < document.images.length; i++) {
        var image = document.images[i];
        if (image.className === "clickable" || image.className.indexOf("clickable ") >= 0 || image.className.indexOf(" clickable") >= 0) {
            image.onclick = function() {
                oTextbox.value = this.alt;
            };
        }
    }
};​ 
```

[更新了 fiddle 来演示](http://jsfiddle.net/aweMK/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:03:05.030

您想更改文本框的文本是否正确？如果是，这是代码：

```
 <body>
        <img src="bier1.jpg" alt="u mad" onclick= "document.forms[0].elements['Example'].value = 'Image 1'">
        <img src="bier2.jpg" alt="u mad" onclick= "document.forms[0].elements['Example'].value = 'Image 2'"><br>

        <form>
        <input type="text" name="Example"/>
        </form>
    </body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:03:07.497

您需要使用 Javascript，我更喜欢使用 提供 javascript 代码[`jQuery`](http://jquery.com/)，所以请在 Google 上进行快速搜索[`jQuery`](http://jquery.com/)。

```
<script type="text/javascript">
    $(function(){
        //You need to bind click events to your images and probably
        $("img.has-message").click(function(){
            var msg = $(this).attr("data-msg");
            //get the message from that particular image
            $("#text_box_id").attr("value",msg);
            //changes the value of the text box to display the message
            return false;
        });
    });
</script> 
```

因此，您将此代码放在`<head></head>`页面的标签中

假设您可以将 HTML 更改为如下所示，此代码将完美运行：

```
<body>
    <img src="bier1.jpg" alt="u mad" class="has-message" data-msg="message to be displayed when the image is clicked">
    <img src="bier2.jpg" alt="u mad" class="has-message" data-msg="message to be displayed when the image is clicked"><br>
    <form>
        <input type="text" id="text_box_id" name="Example"/>
    </form>
</body> 
```

请记住，您的页面中必须包含 jQuery 才能使上述内容生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:58:45.070

我猜他们的意思是该页面被用作一个 php 页面。我会纯粹用javascript来做这件事。在伪代码中，我将执行以下操作。

1.  在javascript中创建函数
2.  函数使用名称查找输入
3.  函数将输入的文本设置为您喜欢的任何内容（这可能基于单击了哪个图像

我绝对建议您查看 w3schools 网站，该网站将为您提供许多简单的示例来帮助您入门。

也从基础开始并逐步提高，如果你不能一次全部工作，一点一点地做，让你的onclick在你点击它时发出警报，然后在你知道你的onclicks正常工作后尝试设置文本。

# css - 对于使用 f.text_field 创建但适用于 f.input 的字段，不使用 field_with_errors 包装 css div

> ID：11188845
> 
> 赞同：0
> 
> 时间：2012-06-25T11:51:57.497
> 
> 标签：css, ruby-on-rails-3, views, simple-form, zurb-foundation

我的观点有问题。我在样式表中使用了 zurb 基础，当我在表单中输入错误的输入时，我在表单上方收到错误，但包含错误的字段没有用红色包裹。进一步研究，输入字段没有 field_with_errors div 包装器。在进一步研究之后，我发现如果我使用 f.input 而不是 f.text_field 我得到了正确的错误包装。

由于 zurb 具有 text_field、text_area 等样式。我正在使用这些样式，但我没有从 rails 得到错误 div。有什么好的解决办法吗？

在这里，我得到了正确的 Zurb 基础样式，但没有 field_with_errors div：

```
.field
  = f.label :name
  = f.text_field :name, :class => "input-text" 
```

在这里，我没有得到 Zurb 样式，但元素用 field_with_errors div 包裹：

```
.field
  = f.label :name
  = f.input :name, :class => "input-text" 
```

所以基本上 f.text_field 帮助器似乎绕过了提供 div 类以显示错误的 Rails 视图机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T19:37:41.310

`f.text_field`是 Rails 表单助手，而不是 simple_form 的助手（因为你用 simple-form 标记了它，我假设你正在使用它）。由于简单表单只用错误包装自己的属性，因此它忽略了 rails 表单辅助属性。

你可能想要的是

```
= f.input :name, :as => :string 
```

您也不需要自己的 simple_form 标签，因此我们可以浓缩`f.label`并`f.text_field`成为：

```
= f.input :name, :as => :string, :label => "Custom label" 
```

如果您不使用 :label 属性，它将默认为符号的名称，在这种情况下，您的标签将是“名称”。使用 :label 属性可以为您提供一个名为“自定义标签”的标签。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:40:38.410

如果你想传递`class`给 SimpleForm 的输入，你应该使用

```
= f.input :name, :input_html => { :class => 'input-text' } 
```

# html - 如何通过解析为用html编写的新帖子生成预览

> ID：11188847
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:51:59.597
> 
> 标签：html, html-parsing, preview

在我的 Web 应用程序中，用户可以使用不同样式的图像、嵌入视频和文本来发布帖子。我想为帖子生成预览，以在 Web 应用程序的首页上显示它。它要求它不占用太多空间并且尽可能清晰。

我知道我需要先解析 post html 并可能先提取图像元素。我对文本的考虑只是提取所有纯文本并显示其中的一部分。

有人可以就这个问题提供其他建议、方法或资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:03:50.180

据我了解，您想将 HTML 页面呈现为图像吗？您应该在服务器端使用一些布局引擎，例如 WebKit 或 Gecko。

另一种选择是使用一些第三方在线工具进行这些预览。但是渲染页面是一个相当困难的过程，因为它的时间复杂度和存储图像的内存空间要求。我找到了这些服务：

*   [http://www.thumboo.com/](http://www.thumboo.com/)
*   [http://www.thumbalizr.com/](http://www.thumbalizr.com/)
*   [http://www.zubrag.com/scripts/website-thumbnail-generator.php](http://www.zubrag.com/scripts/website-thumbnail-generator.php)

# c - 使用opencv分割图像中的对象

> ID：11188850
> 
> 赞同：0
> 
> 时间：2012-06-25T11:52:14.510
> 
> 标签：c, opencv, image-processing

我有一个包含几个对象的图像。为了对其应用`cvFloodFill`操作，我需要每个对象的种子点作为参数。如何找到种子点？还有如何找到其他参数，如新值、lo_diff 和 up_diff？或者如果有任何其他填充图像的方式..请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:51:33.523

```
void cvFloodFill(CvArr* image, 
                 CvPoint seed_point, 
                 CvScalar new_val, 
                 CvScalar lo_diff = cvScalarAll(0), 
                 CvScalar up_diff=cvScalarAll(0), 
                 CvConnectedComp* comp=NULL, 
                 int flags=4, 
                 CvArr* mask=NULL) 
```

[根据文档](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=floodfill#floodfill)，`seed_point`是标记操作起点的 x,y 坐标。如果您查看[此示例，则](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut4.html)[该组](http://dasl.mem.drexel.edu/~noahKuntz/opencvtut4-1.png)的最后一张图像显示了*第 1 步：过滤示例*中演示的`cvFloodFill()`操作结果。

 *`newVal`，`loDiff`并且`upDiff`是您需要试验的参数，直到您找到一个可以为您提供良好结果的值。*

# javascript - 未从 onclick 调用 JavaScript 函数

> ID：11188852
> 
> 赞同：-3
> 
> 时间：2012-06-25T11:52:33.247
> 
> 标签：javascript, jsf, icefaces

我正在尝试从 icefaces 复选框组件调用 JavaScript 函数，如下所示：

```
 <ice:selectBooleanCheckbox value="#{reportBean.selected}"      onclick="toggleSelectAllRows()" /> 
```

然后JavaScript代码是：

```
<script>
  function toggleSelectAllRows() {
    alert("Entered selectAll");
  } 

  } 
</script> 
```

但是在选中复选框后，警报框不会显示。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:56:32.317

如果这真的是您的 JavaScript 代码，那么`}`最后会有太多内容，从而阻止您的 JavaScript 被解析（和执行）。

```
<script>
function toggleSelectAllRows() {
  alert("Entered selectAll");
} 
</script> 
```

# c# - 泛型类型作为泛型类型

> ID：11188854
> 
> 赞同：3
> 
> 时间：2012-06-25T11:52:49.137
> 
> 标签：c#, generics

我想在另一个泛型类型中使用泛型类型。

但得到以下异常：

> 该类型`'MockManagers.ToPos'`不能用作`'Res'`泛型类型或方法中的类型参数`'MockManagers.IMockManager<Req,Res>'`。没有从`'MockManagers.ToPos'`到的隐式引用转换`'MockManagers.MockResponseObject<System.IComparable>'`。

我尝试了几个选项来解决这个问题，但没有任何运气。此[参考](https://stackoverflow.com/questions/2560902/generic-type-in-generic-collection)建议将内部泛型类型作为参数传递给更高级别的泛型类型。这是唯一的解决方案吗？

代码：
我的界面：

```
/// <summary>
/// Represents IMockManager for mock object creation object.
/// </summary>
/// <typeparam name="Req">The request object Type.</typeparam>
/// <typeparam name="Res">The response object type.</typeparam>
public interface IMockManager<Req, Res>
    where Req : MockRequestObject
    where Res : MockResponseObject<IComparable>
{...//interface definitions} 
```

对象实现：

```
/// <summary>
/// Represents Mock response for a request object
/// </summary>
public class ToPos : MockResponseObject<byte[]>
{... //implementation}

public class MockBaseObject
{
    public int Id { get; set; }
}

 public class MockResponseObject<T> : MockBaseObject
{
    /// <summary>
    /// The response content.
    /// </summary>
    public T Content { get; set; }

    /// <summary>
    /// Res creation date.
    /// </summary>
    public DateTime CreationDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:16:04.717

这里的问题是你想要一个类的通用方差。C# 仅支持接口上的泛型变化。

这是您似乎想要工作的简化版本：

```
// Works fine: "string" is compatible with "IComparable"
IComparable a = new string('a', 5);

// Error: "List<string>" is not compatible with List<IComparable>"
List<IComparable> b = new List<string>(); 
```

但是，这仅适用于接口，并且仅在它们满足某些方差约束时才可能。一个这样的接口是`IEnumerable<out T>`接口：

```
// Works fine: IEnumerable is covariant
IEnumerable<IComparable> c = new List<string>();

// Similarly, IEnumerable<string> is compatible with IEnumerable<IComparable>:
IEnumerable<string> d = null;
IEnumerable<IComparable> e = d; 
```

**那么你如何解决这个问题？**这是一个想法。

首先，你不能使用，`byte[]`因为它不是`IComparable`. 让我们`string`作为一个例子，但你必须找到其他合适的东西来实现这个接口。

其次，做`MockResponseObject`一个接口。此外，使其在中是*协变的`T`*：

```
public interface IMockResponseObject<out T>
{
    T Content { get; }
    DateTime CreationDate { get; set; }
} 
```

为了使它起作用，`Content` *不能通过界面进行设置*。

最后，更新其余代码以使用此接口：

```
interface IMockManager<Req, Res>
    where Req : MockRequestObject
    where Res : IMockResponseObject<IComparable>
{
}

public class ToPos : MockBaseObject, IMockResponseObject<string>
{
    public string Content
    {
        get { throw new NotImplementedException(); }
        set { throw new NotImplementedException(); }
    }

    public DateTime CreationDate
    {
        get { throw new NotImplementedException(); }
        set { throw new NotImplementedException(); }
    }
} 
```

请注意，`ToPos`仍然有一个`Content`带有 setter 的内容：只要不是通过界面，您就可以设置内容。

通过所有这些更改，以下内容现在有效并且可以正常编译：

```
static IMockManager<MockRequestObject, ToPos> manager = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:38:31.890

您可以声明`ToPos`为派生自`MockResponseObject<IComparable>`而不是`MockResponseObject<byte[]>`，然后`Content`使用新的类型隐藏该属性`byte[]`。但是，要使其正常工作，您需要包装 a`byte[]`和 implements的东西`IComparable`。例如：

```
public class ByteArrayComparable : IComparable
{
    public byte[] Data { get; private set; }
    public ByteArrayComparable(byte[] data) { Data = data; }

    // Implement IComparable.CompareTo() method here!
    public int CompareTo(object obj) { ... }
}

public class ToPos : MockResponseObject<IComparable>
{
    public new byte[] Content
    {
        get
        {
            if (base.Content == null)
                return null;
            return ((ByteArrayComparable) base.Content).Data;
        }
        set
        {
            base.Content = value == null ? null : new ByteArrayComparable(value);
        }
    }
} 
```

# android - 比较日期jquery mobile

> ID：11188855
> 
> 赞同：0
> 
> 时间：2012-06-25T11:52:52.543
> 
> 标签：android, date, jquery-mobile, compare

我会使用 jquery mobile 比较拖曳日期。但它不起作用：

```
var date_debut_problem = $("#date_debut_problem").val();
var date_fin_problem = $("#date_fin_problem").val();
if( Date.parse(date_debut_problem) > Date.parse(date_fin_problem) )
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:01:21.430

谢谢。它通过添加工作`<script src="js/date.js"></script>`

# iphone - 无法读取存档 xib

> ID：11188857
> 
> 赞同：-2
> 
> 时间：2012-06-25T11:53:05.907
> 
> 标签：iphone

我在 xib 中遇到错误，例如无法读取 xib 中的存档。我在谷歌中搜索了解决方案，但没有得到任何解决方案，而且我将 entitlements.plist 字符串设为空。为什么它显示了这一点。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:00:15.640

如果您使用的是 SVN，那么当您的 nib 文件发生冲突时会出现此错误（我的意思是您和其他一些开发人员都提交了同一个文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:56:09.780

这是因为您在加载 xib 时没有正确给出 xib 的名称。

# android - 让 ActionBar 始终以窄屏模式显示？

> ID：11188861
> 
> 赞同：1
> 
> 时间：2012-06-25T11:53:18.307
> 
> 标签：android, android-actionbar, actionbarsherlock

所以它在横向模式和平板电脑上看起来像这样：

![狭窄](../Images/346064edaebb2263bee9c147f079af56.png)

而不是这个：

![展开](../Images/5d952dd108c83d5b8bb4cc1e5cdbb172.png)

# java - 外观模式和抽象工厂模式有什么区别？

> ID：11188869
> 
> 赞同：38
> 
> 时间：2012-06-25T11:54:21.263
> 
> 标签：java, design-patterns, facade, abstract-factory

我不是问面试的角度。我想知道在struts框架等项目中实现的实时场景。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-25T11:59:42.340

**当您想要隐藏一个实现** 或者它是关于更改某个类或一组类的接口时，可以使用外观模式。Builder 通过以较小的步骤分解构造过程来隐藏构造过程。

**当您想要隐藏构造实例的细节时，使用抽象工厂模式。**
提供用于创建相关或依赖对象系列的接口，而无需指定它们的具体类。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-25T11:59:07.213

我不知道，为什么这被否决了。这是一个合理的问题。

我的看法 - 外观是一个类或一组类，对用户隐藏内部实现/服务。

抽象工厂封装了一组用于创建对象的工厂，而 Facade 可用于为各种操作提供抽象，而不仅仅是创建。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-25T12:01:31.647

它们是用于完全不相关的事物的两种模式。

使用*抽象工厂模式*，您只需为同一事物的许多不同构建器提供一个通用工厂构建器。每当您需要为一组构建器提供接口时，都可以使用此接口，这些构建器旨在与共同的东西（产品）一起使用，而无需担心您要构建什么或要使用哪个工厂。

相反，*Facade*模式用于为客户端类不应该看到的许多不同操作提供简单的接口。

# ruby-on-rails - Ruby on Rails - 将值传递给 link_to

> ID：11188870
> 
> 赞同：4
> 
> 时间：2012-06-25T11:54:30.553
> 
> 标签：ruby-on-rails, url, parameters, link-to, url-parameters

我是一名 RoR 初学者，正在使用 Rails 3.2.3。

我的页面上有一个搜索表单，它执行获取请求并正确过滤结果。

我想添加按日期搜索产品的可能性。我插入了一个 date_select 并能够选择日期，当搜索后页面刷新时，所选日期仍然存在于 date_select 上，因为我能够通过它们`params`。

但是，我的问题是，当页面呈现产品时，它们有一个指向其显示操作的 link_to。我的目标是将选择的日期与 url 一起传递，以便在该 link_to 上执行搜索。

例如，如果用户选择 20-06-2012 到 25-06-2012 的日期，则仅显示在该时间范围内插入的产品（并且所有这些参数都在 url 上）

但是显示每个显示产品的操作的链接只有：

```
link_to <%= link_to product.name, product%> 
```

呈现

`http://localhost:3000/products/24`（例如）

我想要渲染/显示的是：

```
http://localhost:3000/products/24?from=20-06-2012&to=25-06-2012 
```

执行搜索的选定日期目前未存储在数据库中，但我需要从后一页的 URL 中获取它们，因此，在用户填写之前，两个日期都需要通过 2 个不同的页面保存表格，然后将这些日期插入数据库。

对此有什么建议吗？我已经搜索过，但我发现的只是如何传递模型中存在的变量，我不想使用 cookie 或会话变量。

提前致谢， 问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:20:53.713

如果您想将任意参数传递给以下调用

```
<%= link_to product.name, product %> 
```

您需要显式调用 path 方法，而不是使用隐式版本。上面的行相当于

```
<%= link_to product.name, product_path(product) %> 
```

然后就可以传参数了

```
<%= link_to product.name, product_path(product, :from => 'whatever', :to => 'whatever') %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T11:59:41.180

你能这样试试吗

```
link_to <%= link_to product.name, product, :param_you_want => "value you want" %> 
```

现在您可以根据需要在“param_you_want”中设置值。

但在我的情况下，在其中设置值“你想要的值”

希望你能得到想法

# scala - Scala Lift：如何获取 ajaxRadio 参数

> ID：11188877
> 
> 赞同：0
> 
> 时间：2012-06-25T11:54:50.687
> 
> 标签：scala, lift, radio

我在表格的每一行都有 ajaxRadio。选择此 Radio 时，我希望 scala 函数获取两个参数：第一个是选定的收音机，第二个是该行的数据键。我的来源如下：

```
val radioList = List("wideArea", "oldArea","newArea")
def liftForm(xhtml: NodeSeq): NodeSeq = {  
    var areaList = newOrderList.map(values =>{
        <li id={values(1)} >
            <table>
                <thead></thead>
                <tbody>
                    <tr class = "real">
                        <td class="listImage">
                            <img class="areaImage" src={values(6)}/>
                        </td>
                        <td style="vertical-align:top;">
                            <tr><p class="areaName">{values(4)}</p></tr>
                            <tr><p class="areaComment">{values(5)}</p></tr>
                        </td>
                        <td class="listCheck" >
                            {ajaxButton(S.?("delete"), () => doDelete(values(1)), "class" -> "button delete")}
                        </td>
                    </tr>       
                    <tr>
                        <td></td>
                        <td>
                            {
                            val it = ajaxRadio[String](radioList,Box.legacyNullTest(values(2)),doRadioChange _).toForm.grouped(4)
                            for(i <- it)yield(<tr>{i.flatMap(y => <td> {y} </td>)}</tr>)
                            }
                        </td>
                    </tr>                   
                </tbody>
            </table>
        </li>})

    bind("list",xhtml,"areaList" -> <ul>{areaList}</ul>) 
```

通过`doRadioChange _`，我只能获得选定的电台。如何获取第二个参数：行的数据键。即`values(1)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:26:47.307

您的函数可以关闭函数中该点的所有本地状态。您应该能够替换`doRadioChange _`为：

```
doRadioChange(_, values(1)) 
```

当然，假设它`doRadioChange`接受正确的参数。

# windows - 在cmd中隐藏文本

> ID：11188882
> 
> 赞同：2
> 
> 时间：2012-06-25T11:55:27.667
> 
> 标签：windows, batch-file

当我使用超时（超时/ t2）并关闭回声时，我得到如下输出：

```
@echo off
timeout /t 2
@echo on 
```

输出

```
-->Waiting for 0 seconds, press a key to continue .. 
```

我想在cmd中隐藏上面的文字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T11:58:05.630

用 ,重定向输出`>NUL`，因为`@echo off`只抑制命令行本身的输出，而不是命令的输出。

```
@echo off 
timeout /t 2 > nul 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-26T21:48:04.283

尝试这个：

```
@echo off
timeout 5 >nul
@echo on 
```

# android - 自定义警报对话框即将通过软键盘

> ID：11188887
> 
> 赞同：2
> 
> 时间：2012-06-25T11:55:50.680
> 
> 标签：android, android-alertdialog, android-softkeyboard

我扩展了 AlertDialog 类以在屏幕底部创建一个弹出视图，就像在应用程序内为用户提供一个小通知。为此，我修改了对话框的一些 Window 属性。这是一个示例代码：

```
WindowManager.LayoutParams win = getWindow().getAttributes();
        win.dimAmount = 0.0F;
        win.flags = WindowManager.LayoutParams.FLAG_DIM_BEHIND |
                    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
        win.height = LayoutParams.WRAP_CONTENT;
        win.width = LayoutParams.MATCH_PARENT;
        win.gravity = Gravity.BOTTOM;
        win.windowAnimations = R.style.PopUpAnimation;
getWindow().setAttributes((android.view.WindowManager.LayoutParams) win); 
```

但是，当软键盘弹出时，弹出窗口仍保留在键盘顶部。如何使对话框位于软键盘后面，或者如何检测键盘何时在屏幕上可见？

# python - 如何在 python 中的 json.load 期间编辑/重命名键？

> ID：11188889
> 
> 赞同：13
> 
> 时间：2012-06-25T11:55:57.037
> 
> 标签：python, json, mongodb

我有一个需要加载到 mongodb 的 json 文件 ( ~3Gb )。相当多的 json 键包含一个 . （点），这会导致加载到 mongodb 失败。我想加载 json 文件，并在过程中编辑键名，比如用空格替换点。使用以下 python 代码

```
import json

def RemoveDotKey(dataPart):
    for key in dataPart.iterkeys():
        new_key = key.replace(".","")
        if new_key != key:
            newDataPart = deepcopy(dataPart)
            newDataPart[new_key] = newDataPart[key]
            del newDataPart[key]
            return newDataPart
    return dataPart

new_json = json.loads(data, object_hook=RemoveDotKey) 
```

名为 RemoveDotKey 的 object_hook 应该遍历所有键，它包含一个点，创建一个副本，用空格替换点，然后返回副本。创建了 dataPart 的副本，因为不确定我是否可以迭代 dataPart 的键并同时插入/删除键值对。

这里似乎有一个错误，所有带有点的 json 键都没有被编辑。我不太确定 json.load 是如何工作的。我也是 python 新手（使用它不到一周）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T12:09:41.607

你几乎拥有它：

```
import json

def remove_dot_key(obj):
    for key in obj.keys():
        new_key = key.replace(".","")
        if new_key != key:
            obj[new_key] = obj[key]
            del obj[key]
    return obj

new_json = json.loads(data, object_hook=remove_dot_key) 
```

您在循环中返回了一本字典，因此您只需修改一个键。而且您不需要复制值，只需重命名键即可。

# java - 获取 URL 的源代码

> ID：11188892
> 
> 赞同：0
> 
> 时间：2012-06-25T11:56:11.760
> 
> 标签：java, utf-8, iso-8859-1

我需要使用 java 代码获取特定 URL 的源代码。我能够获得 UTF-8 编码网页的源代码，但无法获得 ISO-8859-1 编码字符集的代码。我的问题，是否可以使用 java 程序获取带有 iso-8859-1 的网站源代码？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:58:31.633

如果您使用以下方法阅读，则需要通过以下方式明确指定字符集

```
 URL url = new URL(URL_TO_READ);
    BufferedReader in = new BufferedReader(
    new InputStreamReader(url.openStream(),"ISO-8859-1" )); 
```

但是，如果您的要求中包含很少的解析，我建议您使用[JSOUP](http://jsoup.org)，它会从服务器的响应中读取字符集，您也可以[显式设置字符集](https://stackoverflow.com/questions/7703434/jsoup-character-encoding-issue)

# plugins - 如何为我的 Dart 应用程序包含插件系统？

> ID：11188894
> 
> 赞同：1
> 
> 时间：2012-06-25T11:56:12.450
> 
> 标签：plugins, dart

我有一个包含 Webkit 模块并使用 Dart（编译为 JS）的 Qt 应用程序。它就像一个用 Qt 编写的简单的浏览器。该应用程序基本上用不同的文本替换网页上的某些文本。我希望用户能够制作自己的 Dart 文件，用自己不同的文本替换自己的文本。

对于创建插件系统的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:32:53.147

我认为这个问题需要稍微澄清一下：您是在询问使用 Dart 编写*Qt*应用程序的脚本（其中 Dart 扮演脚本语言的角色），还是询问编译为 JS 并使用的*Dart*应用程序的插件系统在 Qt 应用程序中，可能通过 QtScript（在这种情况下，脚本语言的角色由 JavaScript 扮演）？

我认为它是后一种变体（而且我对 Qt 的了解还不够，无法回答前一种变体）。

假设 Dart 应用程序的所有插件在构建 Qt 应用程序时都可用，这样您就不需要动态地将 Dart 编译为 JS。然后，如果你编译一个 Dart 脚本，生成的 JS 将包含所有必要`#import`的代码。您只需要创建一个适当的脚本来导入所有插件并调用它们（导入是不够的，因为死代码将被消除）。

也许一个例子会更有启发性。假设您想允许插件在网页上做一些工作。您可以构建它的一种方式是，每个插件都将是一个独立`#library`的，具有众所周知的顶级功能（比如`doWork`）。插件示例：

```
// my_awesome_plugin.dart

#library('My Awesome Plugin')

doWork(page) {
  page.replaceAll('JavaScript is great', 'Dart is great');
} 
```

您可以拥有任意数量的这种性质的插件。然后，您将（在构建时）在 Dart 中生成以下简单的主脚本：

```
// main.dart

// these lines are automatically generated -- for each plugin file,
// one #import with unique prefix
#import('my_awesome_plugin.dart', prefix: 'plugin1');
#import('another_plugin.dart', prefix: 'plugin2');

main() {
  var page = ...; // provided externally, from your Qt app

  // and these lines are automatically generated too -- for each plugin,
  // call the doWork function (via the prefix)
  plugin1.doWork(page);
  plugin2.doWork(page);
} 
```

然后，如果您编译`main.dart`为 JavaScript，它将包含所有这些插件。

构建插件系统还有其他可能性：每个插件都可以是实现特定接口的类（或从特定基类继承），但一般方法是相同的。至少我会推荐的方法——使每个插件成为一个单独的库。

您可能不喜欢自动生成主脚本的步骤，我也不喜欢它。但目前，Dart 只允许一种动态加载新代码的方法：产生新的隔离。我不确定它在 QtScript 中如何（或什至是否）工作，因为隔离在编译为 JavaScript 时被实现为 web worker，所以我不会在这里讨论这个。

如果您想支持在 Qt 应用程序的运行时编译 Dart 脚本，事情会变得更加复杂，但我认为我已经对您的项目猜得太多，而且我可能正在写一些您并不真正需要的东西。所以我现在就这样完成它。

# iphone - 将 OCUnit 添加到 XCode 中的现有项目中

> ID：11188902
> 
> 赞同：1
> 
> 时间：2012-06-25T11:56:33.727
> 
> 标签：iphone, ios, xcode

我正在尝试将 OCUnit 添加到一个现有的 XCode 项目中，但是我无法运行它。遵循本[指南](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)后，“产品”菜单中的“测试”行显示为灰色。有人有其他教程或知道如何做吗？或其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:46:03.703

您必须编辑应用程序目标的方案才能启用产品菜单中的测试项。要打开方案编辑器，请单击项目窗口工具栏中的方案菜单并选择编辑方案。选择方案编辑器左侧的测试步骤。测试列表应该是空的。单击 + 按钮打开目标工作表。从列表中选择单元测试目标，然后单击添加按钮。

# css - 覆盖css类

> ID：11188904
> 
> 赞同：0
> 
> 时间：2012-06-25T11:56:42.617
> 
> 标签：css

使用 css 的小麻烦，在下面的代码中，我使用了奇数类和偶数类的 css 来更改背景颜色。但只要有备份（如突出显示），它应该将值显示为斜体以及奇数和偶数属性。如何做到这一点？

```
<c:forEach items="${as.value.connections}" var="circuit" varStatus="elements">
                    <c:set var="stylesheetclass" value="primaryLine"/>
                    <c:set var="icon" value="/images/primary.png"/>
                    <c:if test="${circuit.backup}">

> <c:set var="stylesheetclass" value="backupLine"/>
> 
> 
> <c:set var="icon" value="/images/backup.png"/>

                    </c:if>

> <tr class="${elements.index % 2 == 0 ? 'odd' : 'even'}">

                        <td > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:58:52.977

用过这个`!important`

```
tr.odd{
background:red !important;
} 
```

* * *

```
tr.even{
background:yellow !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:02:39.143

尝试只使用 css 选择器，您不需要在 DOM 中指定类。

```
tr:nth-child(even) {background: #CCC}
tr:nth-child(odd) {background: #FFF} 
```

然后在需要时添加备份类。

只要确保`.backup`在奇偶规则之后定义类，就不会被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:05:23.343

首先，如果您使功能就像在存在**备份**值`<tr>`时添加了一个新类一样。例如，如果您添加一个名为then 的 类，则看起来像这样。完成此功能后，添加如下样式：-**`backup``<tr>``<tr class="odd backup"> or <tr class="even backup">`**

 **```
tr.odd {
    /* your styles already used*/
}
tr.even {
    /* your styles already used*/
}
tr.backup {
    font-style: italic; /* This would take effect for the <tr> which has backup class added */
} 
```

编辑：

如果您将要保留用于备份的样式`<tr>`放在`.backup`类中，您的要求将得到满足。**并请保持`.backup`班级低于`.even and .odd`班级。由于上面写的样式被下面的样式覆盖。****

# android - 字符串传递给格式化函数？

> ID：11188905
> 
> 赞同：1
> 
> 时间：2012-06-25T11:56:52.867
> 
> 标签：android, c, string, logcat, android-ndk

打印到 stderr 的原始代码：

```
extern "C" {
/* error: output error message */
void Error(const int error, char *message, ...)
{
    va_list arg;
   fflush(stdout);
   fflush(stderr);

   if (error > 0)
     fprintf(stderr, "\nError: ");
   else
     fprintf(stderr, "\nWarning: ");

   va_start(arg, message);
   vfprintf(stderr, message, arg);
   va_end(arg);

   fflush(stderr);
   if (error > 0)
      exit(error);
}

void main(){
Error(0,"Problem %s in file", "sometext");
}

}//extern "C" 
```

我修改了我的代码看起来像这样。它应该打印到 logcat

```
extern "C" {
#include <android/log.h>
#include <jni.h>
#include <sys/types.h>

#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <math.h>

/* error: output error message */
void Error(const int error, char *message, ...)
{
    va_list arg;

   va_start(arg, message);
   if (error > 0)
   __android_log_print(ANDROID_LOG_ERROR, "HTS_API", message, arg);
      else
   __android_log_print(ANDROID_LOG_WARN, "HTS_API", message, arg);
   va_end(arg);

   if (error > 0)
      exit(error);
}
void main(){
Error(0,"Problem %s in file", "sometext");
}

}//extern "C" 
```

问题是我的代码输出：`'Problem |�;A.|�;A. in file'`

和`__android_log_print(ANDROID_LOG_WARN, "HTS_API","Problem %s in file", "sometext");`

正确的输出是：`'Problem sometext in file'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T12:54:26.830

`__android_log_print`不接受 a`va_list`作为参数。它接受可变参数列表。

看起来像是在他们添加的最新 NDK 中

```
int __android_log_vprint(int prio, const char *tag, const char *fmt, va_list ap); 
```

这就是你想要的。以前，您必须通过 `Error`使用可变参数列表重新实现为宏或使用`vsprintf`在缓冲区中格式化错误消息然后说来解决此问题

```
__android_log_print(ANDROID_LOG_WARN, "HTS_API", "%s", buf); 
```

# git - 如何获取git中多个项目的任何分支中特定用户的提交列表？

> ID：11188908
> 
> 赞同：1
> 
> 时间：2012-06-25T11:57:10.357
> 
> 标签：git

我在几个 git 项目的多个分支中工作。我想在所有这些项目和分支中获取我在特定日期的提交列表（用于时间表目的）。

虽然我可以为此目的编写一个实用程序脚本，但我不想重新发明轮子。有没有一种简单的方法可以做到这一点，使用现有的基于 unix 的工具或一些 git 高级用户配方？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T12:20:33.103

对于单个回购：

```
git log --all --after="<date> 00:00" --before="<date> 23:59" --author="<author>" 
```

`<date>`可以是任何通用格式。 `<author>`区分大小写，并且还会检查电子邮件地址。

### 笔记：

这会查看*提交*者日期（此提交何时应用于此存储库/分支），而不是作者日期（此内容首次提交的时间）。如果您已经重新调整和/或挑选了樱桃，这一点很重要。作者日期似乎没有等效功能。

### 编辑：

要获取一组存储库的此日志，您可以运行：

```
for dir in repo1 repo2 ... repo_n; do
    git --no-pager --git-dir="$dir/.git" log --all \
        --after="<date> 00:00" \
        --before="<date> 23:59" \
        --author="<author>"
      && echo  # to add a blank line between logs
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:49:41.953

要使用多个存储库，您可以使用[mr](http://joeyh.name/code/mr/)。

*在.mrconfig*中定义自定义操作，例如。

```
[DEFAULT]
git_daylog = git log --branches --after="$* 00:00" --before="$* 24:00" --author="$(git config user.email)"

[gitrepos/my_blog_app]

[path_to_another_project_from_home]

... 
```

并且您将能够说出`mr daylog 26 june`并获取当前目录下在 mr 注册的所有存储库的日志。

# java - 有没有办法从分析的应用程序开始或停止数据收集？

> ID：11188909
> 
> 赞同：4
> 
> 时间：2012-06-25T11:57:12.447
> 
> 标签：java, profiler, visualvm

我想分析一个小应用程序执行的某个部分。有没有办法从要分析的应用程序中触发 VisualVM 中的数据收集？换句话说，是否可以将代码添加到已分析的应用程序中，以便在 VisualVM 中的分析将在此代码被命中时自动启动？

```
meaninglessCode();

// How to start data collection?
com.sun.tools.visualvm.....startSampling();
//

codeToBeProfiled();

// How to stop data collection?
com.sun.tools.visualvm.....stopSampling();
//

furtherMeaninglessCode(); 
```

我当前的解决方法是`Thread.sleep`调用让我有时间按下 VisualVM GUI 中的按钮，但这远不能令人满意。几个谷歌搜索没有显示任何成功。我很感激任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:40:00.280

您可以使用两个 VisualVM 设置来自定义分析会话，如[本博客条目](https://blogs.oracle.com/nbprofiler/entry/profiling_with_visualvm_part_2)中所述：

*   分析根：放置类包含`codeToBeProfiled()`
*   仪表过滤器：定义您自己的或保留默认值

这样，VisualVM 将在`codeToBeProfiled()`执行包含的类的任何方法时开始分析。

# android - android phonegap 设计

> ID：11188910
> 
> 赞同：-1
> 
> 时间：2012-06-25T11:57:17.207
> 
> 标签：android, cordova

我使用 html 和 css设计了我的**phonegap android 应用程序。**所以我想知道如何在所有手机中获得相同的设计尺寸。是否有可用的设置。请告诉我解决方案。提前致谢。

**更新**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>
            /* App custom styles */
        </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
        </script>
        <script src="my.js">
        </script>
    </head>

<style>
     #searchwrapper {
width:90%; 
height:48px;
background-image:url(../images/input-box.png);
background-repeat:no-repeat; 
background-size: 100% 100%;
margin-left:15px;
position:relative; 
}

.searchbox {
border:0px; 
background-color:transparent; 
position:absolute; 
top:4px;
left:9px;
width:86%;
height:34px;
}

.searchbox_submit {
border-top-right-radius: 5px;
border-bottom-right-radius: 5px;
border-top-left-radius: 5px;
border-bottom-left-radius: 5px;
border:0px; 
background-color:transparent; 
position:absolute; 
top:4px;
left:90%;
width:9%;
height:40px;
}

 #searchwrapperIC {
width:90%; 
height:48px;
background-image:url(../images/input-box.png);
background-repeat:no-repeat; 
background-size: 100% 100%;
margin-left:15px;
position:relative; 
}

.searchboxIC {
border:0px; 
background-color:transparent; 
position:absolute; 
top:4px;
left:9px;
width:86%;
height:34px;
}

.searchbox_submitIC {
border-top-right-radius: 5px;
border-bottom-right-radius: 5px;
border-top-left-radius: 5px;
border-bottom-left-radius: 5px;
border:0px; 
background-color:transparent; 
position:absolute; 
top:4px;
left:90%;
width:9%;
height:40px;
}
body {
font-family:Arial,Geneva,Verdana,sans-serif;
font-size: 0.8em;
overflow-x: hidden;
}
#loadingScreen {
background: url(../images/ajax-loader.gif) no-repeat 5px 8px;
padding-left: 25px;
}
/* hide the close x on the loading screen */
.loadingScreenWindow .ui-dialog-titlebar-close {
display: none;
}
.checkBox
{
        background-position: 0px 0px;
}
    .checkBoxClear
{
        background-position: -32px 0px;
}
    .checkBox, .checkBoxClear
{
        background-image: url('../images/CheckBox2.png');
        background-repeat: no-repeat;
        display: inline-block;
        float: left;
        width: 32px;
        height: 32px;
        padding: 0px;
        margin: 0px;
        cursor: hand;
}
</style>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1" style="background-color:white">
            <div data-theme="a" data-role="header">

              <img src="images/header-search-causes.png" alt="image" style="width:100%" />

            </div>
            <div data-role="content" style="padding: 16px">
            <br>    
    <label style="font-size:12pt" align="center">Choose one of the following options to search our directory of causes</label></td>
  <br/>

        <div id="searchwrapper" style="width:90%;"align="center">
            <input type="text" class="searchbox" name="s" value="" placeholder="Search" />
            <img src="images/search-button.png" alt="image" class="searchbox_submitIC" />

        </div>
      <br/>
                <li style="list-style:none" data-theme="b">
                        <a href="#page1" data-transition="slidefade">Button</a><br/>
                        <a href="#page1" data-transition="slidefade">Button</a><br/>
                        <a href="#page1" data-transition="slidefade">Button</a><br/>
                        <a href="#page1" data-transition="slidefade">Button</a><br/>

                    </li>
            </div>
            <div style="margin-top:4%;border-width:3px;padding-top:2%;background-color:#00458D;" align="center" data-theme="#00458D" data-role="footer" data-position="fixed">

                <table width=100%>
                <tr><td></td></tr>
                <tr>
                <img src="images/Home.PNG" alt="image" style="width:20%;height:6%;" />
                 <img src="images/messages-menu.jpg" alt="image" style="width:20%;height:6%;" />
                 <img src="images/settings-menu.jpg" alt="image" style="width:20%;height:6%;" />
                 <img src="images/close-menu.png" alt="image" style="width:20%;height:6%;" />

                 </tr>
                 </table>

            </div>
        </div>
        <script>
            //App custom javascript
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:29:21.660

如果您在没有 JQuery mobile 的情况下进行操作，则必须对内容进行动态布局大小，例如

*   您必须使用百分比作为高度和宽度
*   使样式与 html 正文位置相对
*   并将样式位置绝对赋予内部主体元素

注意：使用jquery移动框架设计布局很容易做出好的丰富的布局。而且您无需担心各种移动尺寸。它可以自动管理。

# php - MySQL 触发器从命令行挂起

> ID：11188913
> 
> 赞同：1
> 
> 时间：2012-06-25T11:57:25.840
> 
> 标签：php, mysql, triggers

我在数据库表上有一个 mySQL 触发器。当从通过 PHP 连接到数据库的应用程序更新表时，触发器会完美触发并更新。但是，如果我尝试使用 phpMyAdmin 中的 mySQL 命令行更新该表中的一行，那么数据库似乎只是挂起？我一生都无法弄清楚是什么原因造成的，或者如何调试它。如果有人能看到任何明显的东西，那就是触发器（或者甚至如何使它更有效，因为触发器对我来说是新的！）！

提前致谢！

```
DROP TRIGGER IF EXISTS `t_crewstatusupdate`;

DELIMITER //

CREATE TRIGGER `t_crewstatusupdate` AFTER UPDATE ON `crewcallouts`
  FOR EACH ROW
  BEGIN
    DECLARE taxmultiplier INT;
    SET taxmultiplier = ( SELECT t1.taxmultiplier 
                          FROM entities t1, callouts t2 
                          WHERE t1.entityid=t2.entityid 
                            AND t2.calloutid=NEW.calloutid
                        );
    IF NEW.status != OLD.status THEN
      UPDATE callouts 
        SET status = CASE ( SELECT MIN(status) 
                            FROM crewcallouts 
                            WHERE calloutid=NEW.calloutid
                          ) WHEN 1 THEN 1 
                            WHEN 2 THEN 2 
                            WHEN 3 THEN 4 
                            WHEN 4 THEN 4 
                            WHEN 5 THEN 4 
                            WHEN 6 THEN 4 
                            WHEN 7 THEN 7 
                     END 
        WHERE calloutid=new.calloutid;
    END IF;
    UPDATE calloutstats 
      SET netcrewcost = ( SELECT SUM(get_gross_amount(
                                        ( SELECT calloutdate 
                                          from callouts 
                                          WHERE calloutid=NEW.calloutid
                                        ),
                                        ( SELECT starttime 
                                          from callouts 
                                          WHERE calloutid=NEW.calloutid
                                        ),
                                        (workhours + extrahrs),
                                        crewrate,
                                        1, 
                                        IFNULL(travelhours,0)  )
                                    ) 
                          FROM crewcallouts 
                          WHERE calloutid=NEW.calloutid
                        ),
           grosscrewcost = ( SELECT SUM(get_gross_amount((SELECT calloutdate from callouts WHERE calloutid=NEW.calloutid),(SELECT starttime from callouts WHERE calloutid=NEW.calloutid),(workhours + extrahrs),crewrate,1, IFNULL(travelhours,0))
                         * taxmultiplier) 
                             FROM crewcallouts 
                             WHERE calloutid=NEW.calloutid
                           )        
      WHERE calloutid=NEW.calloutid;
  END
//
DELIMITER ; 
```

# objective-c - 在 PDF 中查找文本：Tm 还是 Td/TD？

> ID：11188914
> 
> 赞同：3
> 
> 时间：2012-06-25T11:57:26.943
> 
> 标签：objective-c, ios, xcode, ipad, pdf

我知道这个问题之前已经被问过几次了，但我只是想澄清一下。我有一个 pdf 阅读器，我想给它添加一个高亮功能。我已经可以通过解析`Tj`and`TJ`运算符来提取文本。现在我想在pdf中找到文本的位置。

起初我试图找到这些`Tm`值。我能够提取 的 (x,y) `Tm`，但它似乎不正确。所以我决定去`Td`and `TD`。问题是 pdf 似乎不包含任何`Td`或`TD`值，因为从未调用过操作符回调。（我在回调中添加了一个日志，只是为了查看它是否被调用，但它从未出现过。）

所以我的问题是，如果我想在 pdf 中找到文本的位置，我应该查看哪个？`Tm`价值观还是`Td/TD`价值观？还是两者兼而有之？

附加问题：

Tm 有六个参数：`a, b, c, d, e`和`f`。我知道`e`and`f`代表`tx`and `ty`，但是其他四个参数代表什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:26:27.617

您需要处理*所有*文本运算符，还需要知道其中一些是如何工作的。例如，垂直书写字体将应用 W2 条目以在绘制字形之前将水平字形原点移动到垂直字形原点。

除了 Tm、TD 和 Td 之外，您还需要处理 T*，除了 TJ 和 Tj 之外，您还需要处理 ' 和 " 如果您想知道文本在单个“显示”操作中是如何定位的，那么您还需要考虑Tc、Tw、Tz、TL 和 Ts 的值。

您可能还需要处理当前转换矩阵。

# c# - 审讯组织、超时

> ID：11188916
> 
> 赞同：3
> 
> 时间：2012-06-25T11:57:29.593
> 
> 标签：c#, multithreading, events, serial-port

我正在开发一个使用 8 个 COM 端口的应用程序，当从一个 COM 端口接收数据时，调用事件处理程序，应用程序为通过 COM 端口接收的消息创建包装器，并通过 TCP 将其发送到远程主机。事实上，在包装之后，它成为基于以太网的网络中某处设备的命令（开始测量命令）。

我正在使用 SerialPort 和 SerialDataReceivedEventHandler 来处理 COM 端口。问题是我通过表单为每个 COM 端口指定了不同的超时（0-1000 毫秒）。在此超时之后，我必须发送另一个命令以从设备获取一些数据（获取数据命令）。

*   此命令对于 8 个 COM 端口中的每一个都不同
*   只有在通过 COM 端口接收数据并发送第一个命令后才能发送此命令
*   两个命令之间的超时对于每个 com 端口都不同

您对超时组织有什么建议吗？谢谢。

我有一个想法，但我不确定是否可能：每个 COM 端口都有 8 个事件处理函数。

```
...something
sendFirstCommand();
Thread.Sleep(comPortNTimeout);
sendSecondCommand(); 
```

我可以在每个人中使用相同的结构吗？例如，如果数据 Thread.Sleep() 将在第二个端口的处理程序中被调用，第一个端口的处理程序是否会被冻结？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:18:31.910

1）引入某种`CommandSourceContext`类来封装与每个COM端口相关的所有参数（见下文）

2) 要查看处理程序是否会在引发其他端口事件时冻结 - 只需在调试器中测试它并查看是否在同一线程中调用了所有端口事件。您可以使用 Visual Studio 2010 线程窗口，只需在 COM 端口事件处理程序中放置一个断点，然后查看当前线程 ID 是什么。如果您使用的是旧版 Visual Studio - 只需记录通过`Thread.CurrentThread.ManagedThreadId`. 因此，如果在同一个线程中调用来自不同端口的事件 - 显然处理程序会阻塞每个端口，否则会因为在不同线程中调用而并行运行。至少 MSDN 说（请参阅此答案的底部）接收到的数据事件不是在主线程中引发的，因此在访问 UI 控件时必须小心。

```
interface ICommandSourceContext
{
   // Since each port has own specific command
   // we can encapsulate it in the context as well
   ICommand Command { get; }

   int PortNumber { get; }
   long TimeIntervalMilliseconds { get; }
   Action<SerialDataReceivedEventArgs> Callback { get; }     
}

// setup and add all contexts
IList<ICommandSourceContext> contexts = new List<ICommandSourceContext>();

// ideally your main code block should looks like below (this is only pseudo code)
foreach (var context in contexts)
{
   // to execute it asyncronously you can use TPL Task.Start()
   // so it would not block other handlers in case of single thread
   context.Command.Execute();
   Thread.Sleep(context.TimeIntervalMilliseconds);
} 
```

[SerialPort.DataReceived 事件备注](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)：

> 从 SerialPort 对象接收数据时，在辅助线程上引发*DataReceived事件。*由于此事件是在辅助线程而不是主线程上引发的，因此尝试修改主线程中的某些元素（例如 UI 元素）可能会引发线程异常。如果需要修改主窗体或控件中的元素，请使用 Invoke 将更改请求发回，这将在适当的线程上完成工作

# r - 将 neo4j 与 R 一起使用

> ID：11188918
> 
> 赞同：17
> 
> 时间：2012-06-25T11:57:35.277
> 
> 标签：r, graph, neo4j, bulbs

是否有支持 neo4j 的 R 库？我想从 neo4j 构建一个 R 图（例如 igraph），或者 - 反之亦然 - 在 neo4j 中存储一个 R 图。

更准确地说，我正在寻找类似于 Python 的[bulbflow](http://bulbflow.com/overview/)的东西。

* * *

**更新**

R 有一个新的 neo4j 驱动程序，看起来很有希望：http: [//nicolewhite.github.io/RNeo4j/](http://nicolewhite.github.io/RNeo4j/)。我改了正确答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T18:42:56.497

此[链接](https://gist.github.com/1178110)可能会有所帮助。我将在接下来的几天内将 ne04j 与 R 连接起来，并首先使用提供的链接进行尝试。希望能帮助到你。

我试过了，效果很好。这是有效的功能：首先，安装和加载包，然后执行功能：

```
install.packages('RCurl')
install.packages('RJSONIO')

library('bitops')
library('RCurl')
library('RJSONIO')

query <- function(querystring) {
  h = basicTextGatherer()
  curlPerform(url="localhost:7474/db/data/ext/CypherPlugin/graphdb/execute_query",
    postfields=paste('query',curlEscape(querystring), sep='='),
    writefunction = h$update,
    verbose = FALSE
  )           
  result <- fromJSON(h$value())
  #print(result)
  data <- data.frame(t(sapply(result$data, unlist)))
  print(data)
  names(data) <- result$columns

} 
```

这是一个调用函数的例子：

```
q <-"start a = node(50) match a-->b RETURN b"
 data <- query(q) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-23T19:56:47.083

考虑 RNeo4j 驱动程序。上面显示的函数是不完整的：它不能返回单列数据，也没有 NULL 处理。

[https://github.com/nicolewhite/RNeo4j](https://github.com/nicolewhite/RNeo4j)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T16:26:01.657

我尝试使用 R 脚本（非常感谢提供它），在我看来，您可以直接使用： **/db/data/cypher** 而不是 **db/data/ext/CypherPlugin/graphdb/execute_query** （使用 neo4j 2.0） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:29:30.333

不确定它是否符合您的要求，但看看 Gephi。 [http://gephi.org/](http://gephi.org/)。

# iphone - 将 UISearchBar 与 NSAttributedStrings 一起用于 Highlith 搜索文本

> ID：11188920
> 
> 赞同：0
> 
> 时间：2012-06-25T11:57:42.510
> 
> 标签：iphone, objective-c, ios, xcode

嗨，任何人都可以帮助我如何将 NSAttributedStrings 与 UISearchBar 一起使用。实际上我想从数组或数据库中搜索文本，然后想突出显示匹配的关键字，我如何突出显示匹配的关键字？请帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:11:21.280

根据结果​​使用带有[**OHAttributedLabel**](https://github.com/AliSoftware/OHAttributedLabel)的自定义单元格显示突出显示的搜索文本

# macos - vim/macvim 插件 osx 10.7.4

> ID：11188921
> 
> 赞同：5
> 
> 时间：2012-06-25T11:57:46.573
> 
> 标签：macos, vim, plugins, macvim

你能帮我获得适用于 macvim 或终端 vim 的插件吗？

到目前为止我所尝试的：

到桌面我`git clone https://github.com/scrooloose/nerdtree.git`。我曾尝试将文件放入`~/.vim`其中，我在其中创建了一个名为 bundle 的文件夹并将文件 nerdtree 放入其中。

或者，我已经`/usr/share/vim/vim73`将所有文件放在各自的文件夹中。使用此方法确实适用于终端 vim 中的 NERDTree，但不适用于其他插件。

让这个工作仍然没有运气。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:04:57.790

### `NERD_tree`安装细节：

*   将存档解压缩到您的 ~/.vim 目录中。
*   那应该将 NERD_tree.vim 放在 ~/.vim/plugin 中，将 NERD_tree.txt 放在 ~/.vim/doc 中。

安装后的`~/.vim`样子是这样的：

```
.vim/
├── doc
│   ├── NERD_tree.txt
│   └── tags
├── nerdtree_plugin
│   ├── exec_menuitem.vim
│   └── fs_menu.vim
├── plugin
│   └── NERD_tree.vim
└── syntax
    └── nerdtree.vim 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T12:17:15.787

我使用[病原体](http://www.vim.org/scripts/script.php?script_id=2332)。这允许您将所有插件放在一个单独的目录中，使其非常易于管理。例如，当使用 nerdtree 时，您可以将其克隆到文件夹中并`git pull`在有更新时执行。

将此添加到您的`.vimrc`

```
call pathogen#infect() 
```

然后，将 nerdtree 等添加到文件夹中

```
~/.vim/bundle 
```

这就是你需要做的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T16:49:09.470

我认为最好的解决方案是这样做

```
 git clone https://github.com/scrooloose/nerdtree.git ~/.vim/ 
```

所以你可以确保插件放在正确的文件夹中，否则 git 为你制作 nerdtree 文件夹，你必须将 nertrees 的内容移动到你的 ~/.vim/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:01:30.547

我相信这需要在：~/.vim/plugin/...

来自：http: [//vim.runpaint.org/extending/extending-vim-with-scripts-plugins/](http://vim.runpaint.org/extending/extending-vim-with-scripts-plugins/)

# php - Sphinx 搜索：具有多个索引的空属性

> ID：11188928
> 
> 赞同：0
> 
> 时间：2012-06-25T11:58:21.553
> 
> 标签：php, sphinx

当使用 PHP Sphinx 客户端时，它可以工作：

```
SphinxClient::query ('*', 'index1'); 
```

但是当我尝试这个时：

```
SphinxClient::query ('*', 'index1, index2'); 
```

结果不包含任何属性。我正在使用 Sphinx 2.0.4-release (r3135) 并搜索了 Sphinx 论坛和谷歌，但没有任何结果，除了这篇文章[http://sphinxsearch.com/forum/view.html?id=5141](http://sphinxsearch.com/forum/view.html?id=5141)没有帮助很多。有人来帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:09:24.963

您是否检查了这两个索引以确保它们具有相同的架构——即相同的属性？

# r - 将时间向量转换为小数天

> ID：11188933
> 
> 赞同：0
> 
> 时间：2012-06-25T10:48:32.563
> 
> 标签：r, time-series

我有一个日期向量：

```
Date = seq(from=as.POSIXct("2011-01-01 00:00"), 
           to=as.POSIXct("2011-12-31 23:00"), length=8760) 
```

可以将其转换为十进制时间，类似于：

```
DecDay = seq(1,366,length = 8760) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:56:13.333

你可以使用`as.numeric(julian(Date, Date[1]))`.

# c++ - 这是否可以挂钩子进程发送到 Windows 控制台的消息？

> ID：11188937
> 
> 赞同：1
> 
> 时间：2012-06-25T11:58:48.490
> 
> 标签：c++, windows, winapi, console, hook

截至目前，我尝试过`SetWindowsHookEx`，但似乎无法从控制台窗口捕获消息。

说明这一点的代码：

```
#include <iostream>
#define _WIN32_WINNT 0x501
#include <windows.h>

using namespace std;

HHOOK hHook = 0;

LRESULT CALLBACK Callback(int code,WPARAM wParam,LPARAM lParam) { 
  cout << "tick: " << GetTickCount() << ", code: " << code << ", wParam: "
    << wParam << ", lParam: " << lParam << endl;
  return CallNextHookEx(hHook,code,wParam,lParam);
}

int main() {

  int idHook[14] = { WH_CALLWNDPROC, WH_CALLWNDPROCRET, WH_CBT, WH_DEBUG,
    WH_FOREGROUNDIDLE, WH_GETMESSAGE, WH_JOURNALPLAYBACK, WH_JOURNALRECORD,
    WH_KEYBOARD, WH_KEYBOARD_LL, WH_MOUSE, WH_MOUSE_LL, WH_SHELL,
    WH_SYSMSGFILTER };

  for (int i=0 ; i<=14 ; i++) {
    hHook = SetWindowsHookEx( idHook[i] , (HOOKPROC)Callback,
      NULL, GetCurrentThreadId());
  }

  system("dir");
  //here appeared nothing insead `dir` output, but why ?
  system("pause");
  MessageBox(NULL, "Now creating window ...", "... and messages appear.", 0);
} 
```

我查看的另一种方式是控制台本身的 api，特别是`ReadConsoleInput()`函数。但它不能通过回调工作，因此它仅可用于捕获键或鼠标事件。此处的示例代码：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms685035%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685035%28v=vs.85%29.aspx)

但我需要的是掌握由通过`system`or创建的进程发出的控制台调用`CreateProcess`。通过调用，我的意思是例如在`printf()`子进程到达我的进程拥有的控制台之前捕获每个发出的子进程。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:01:42.273

尝试输出重定向。`CreatePipe`使用API创建两个管道对象（一个用于 stdout，另一个用于 stderr） ，`hStdOutput`并`hStdError`在`STARTUPINFO`调用`CreateProcess`. 子进程输出的任何内容都不会显示，但会通过这些管道；然后，您可以根据需要过滤数据并自行输出。

# string - 在 plink 中发送非命令字符串

> ID：11188941
> 
> 赞同：0
> 
> 时间：2012-06-25T11:59:00.707
> 
> 标签：string, ssh, command, putty, plink

我正在尝试使用 plink 将数据字符串发送到嵌入式 SSH 服务器。如果我像这样在命令行上使用 plink 登录

> plink test2 -l 管理员

并等待“使用用户名“admin”行，然后开始输入数据字符串被正确地逐个字符地传输到服务器

但是，如果我尝试类似

> plink test2 -l admin myString

然后 plink 尝试使用字符串作为命令打开服务器上的 shell，但它不会这样做，因此会返回错误。（尝试将字符串放入 txt 文件中，然后通过文件而不是运气）

我怎样才能传递字符串，一个字符串，而不是一个命令？

（原因是 SSH 连接的端口实际上是将数据直接转发到我的嵌入式应用程序应该使用的串行总线上）

编辑：或者也许与隧道的 sexec？或您可以推荐的任何其他合适的基于 Windows 的 ssh cmd 提示客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:28:03.740

尝试使用以下命令，

```
echo myString | plink test2 -l admin 
```

# xml - XPath 可以用于返回节点上的命名空间吗？

> ID：11188942
> 
> 赞同：0
> 
> 时间：2012-06-25T11:59:01.493
> 
> 标签：xml, xpath

XPath (1.0) 能否用于返回 XML 文档中的命名空间节点？

注意：我不是要求具有给定名称空间的节点，而是名称空间节点本身。所以不是：

```
//node()[namespace-uri()='http://a.b'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:06:48.160

如果实现了命名空间轴（Firefox/Mozilla 拒绝这样做），则为`//namespace::node()`您提供所有命名空间节点。但请注意，XSLT/XPath 数据模型中的名称空间节点与 XML 文档中的名称空间声明属性不同，带有标记

```
<root xmlns="http://example.com/ns">
  <foo>
    <bar>baz</bar>
  </foo>
</root> 
```

所有三个元素都有两个在范围内的命名空间节点，一个在根元素上声明的默认节点和一个用于命名空间的内置节点`xml`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:04:18.807

`namespace::`XPath 1.0 中有一个轴，所以你可以。在 2.0 中，它已被弃用，仅适用于兼容模式。但是，您可以查询范围内的所有命名空间绑定/前缀。

依赖实际的命名空间节点通常不是一个好主意，尽管有时这是不可避免的。请注意，`namespace::`轴包含该元素范围内的所有命名空间节点。要查找绑定在该特定元素上的那些，您必须将节点列表与父元素范围内的命名空间进行比较。

# security - js单页应用的安全实现

> ID：11188945
> 
> 赞同：1
> 
> 时间：2012-06-25T11:59:06.137
> 
> 标签：security, single-page-application

你如何为 js 单页应用程序做安全性？
“安全性”是指传统的 webapp 安全性，比如 spring 安全性，即基于 url 模式保护资源，通过 web 过滤器实现的身份验证等，然后是授权部分，将 url 模式绑定到角色等。 ajax 对数据的调用仍然可以被拦截，但是你对视图元素做了什么，比如加载基于角色的模块等。

# ruby-on-rails - routes.rb 中需要的 RoR 信息

> ID：11188947
> 
> 赞同：1
> 
> 时间：2012-06-25T11:59:17.903
> 
> 标签：ruby-on-rails, rails-activerecord, rails-routing

我的问题是更多地了解资源和路由。我跟着 ruby​​ on rails 教程书开始定制我的应用程序。在我的应用程序中，我想让用户发送帖子，其他人通过发送照片来讨论该主题。我创建用户没有任何问题。在主页中，我想按日期显示所有用户的帖子。主题模型是

```
class Topic < ActiveRecord::Base

  attr_accessible :content, :title
  belongs_to    :user
  has_many      :posts
  validates :title, presence: true, length: { maximum: 140 }
  validates :content, presence: true
  validates :user_id, presence: true
  default_scope order: 'topics.created_at DESC'
end 
```

帖子模型是：

```
class Post < ActiveRecord::Base
  attr_accessible :content 
  belongs_to :topic
  belongs_to :user
  validates :user_id, presence: true
  validates :content, presence: true
  default_scope order: 'posts.created_at DESC'
end 
```

和迁移是：

```
 create_table "topics", :force => true do |t|
        t.string   "title"
        t.text     "content"
        t.datetime "created_at", :null => false
        t.datetime "updated_at", :null => false
        t.integer  "user_id"
      end

  add_index "topics", ["user_id", "created_at"], :name => "index_topics_on_user_id_and_created_at" 
```

我的主题控制器：

```
class TopicsController < ApplicationController
  before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

    def show
        @topic = Topic.find(params[:id])
        @posts = @topic.posts.paginate :page => params[:page], :per_page => 20
    end 
```

这是我的路线.rb：

```
MyPedia::Application.routes.draw do
    resources :users
    resources :sessions, only: [:new, :create, :destroy]
    resources :topics, only: [:show, :create, :destroy]
    resources :posts
    root to: 'static_pages#home'

    match '/topicin/:id',   to: 'topics#show' 
```

我的 show.html.erb 是

```
<div class ="center">
<h3><%= @topic.title %></h3>  
<% if  @posts %>
  <% for post in @posts do %>  
    <p><strong><%= post.content %>  

<% end %>  
</div> 
<%end %> 
```

我的 rake 路由表是这样的：

```
 topics POST   /topics(.:format)         topics#create
      topic GET    /topics/:id(.:format)     topics#show
            DELETE /topics/:id(.:format)     topics#destroy
      posts GET    /posts(.:format)          posts#index
            POST   /posts(.:format)          posts#create
   new_post GET    /posts/new(.:format)      posts#new
  edit_post GET    /posts/:id/edit(.:format) posts#edit
       post GET    /posts/:id(.:format)      posts#show
            PUT    /posts/:id(.:format)      posts#update
            DELETE /posts/:id(.:format)      posts#destroy 
```

.我可以在主页中看到我的主题作为链接列表，没有任何问题。当我点击它们时，我希望它们向我展示主题和其中的帖子。当我使用 localhost:3000 这就是我现在得到的。

```
No route matches {:action=>"show", :controller=>"topics", :id=>#<Topic id: nil, title: nil, content: nil, created_at: nil, updated_at: nil, user_id: 1>} 
```

当我使用 localhost:3000/topics/1

```
SQLite3::SQLException: no such column: posts.topic_id: SELECT  "posts".* FROM "posts"  WHERE "posts"."topic_id" = 1 ORDER BY posts.created_at DESC LIMIT 20 OFFSET 0 
```

所以我阅读了说明，但我找不到直接使用主题的方法。抱歉，问题太长了。这将帮助我理解许多关于导轨的问题。

编辑 1：我在帖子表中添加了 topic_id ... static_pages 控制器是：

```
class StaticPagesController < ApplicationController
  def home
    @topic = current_user.topics.build if signed_in?
        @topics = Topic.paginate :page => params[:page], :per_page => 20
  end 
```

错误在 _topics.html.erb 中：

```
 <% for topic in @topics do %>  
!!!!!  <li><%=link_to topic.title, topicin_path(@topic) %></li>  

 <%= will_paginate @topics %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:46:18.890

看起来您正在使用嵌套属性，但您没有使用嵌套路由资源，因此路径生成的是每个主题的值，而不是每个帖子的主题。

您可以使用以下`resource do`方法轻松做到这一点

```
resource :posts do 
  resource :topics
end 
```

或者像 Wawa Loo 说的你需要传入关系值

也为你的错误 `SQLite3::SQLException: no such column: posts.topic_id: SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 ORDER BY posts.created_at DESC LIMIT 20 OFFSET 0`

当您创建 has_many 或任何关系时，您需要在数据库中分配关系值，因此当您在帖子 ID 1 上并且希望它加载回复时，查询将搜索 post_id 等于 1 的回复。所以请确保您运行迁移以添加此关系属性

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:23:20.310

首先，您需要`link_to`在主页中检查您的。这似乎`link_to`找不到用户的主题。

您还需要`topic_id`in，`posts`因为您`belongs_to :topic`的`Post`模型中有。查看您的迁移`posts`，创建正确的迁移和`rake db:migrate`.

最后，我认为`user`不需要有主题，帖子有主题，而不是用户。然后，您可以调用`@user.posts.topic`and `topics.first.posts.first.user`。

祝你好运。

# c++ - C++ 继承函数覆盖

> ID：11188948
> 
> 赞同：3
> 
> 时间：2012-06-25T11:59:23.833
> 
> 标签：c++

我对 C++ 很陌生，我来自 Java/C#。

我知道在 Java 和 C# 中你可以创建一个类，让另一个类继承它，并覆盖它的功能。然后，您可以列出父类并将子类的对象插入到此列表中。之后，您可以使用它被覆盖的功能。

例子：

```
public class Parent
{
  public virtual void test()
  {
    Console.WriteLine("test");
  }
}

public class Child : Parent
{
  public override void test()
  {
    Console.WriteLine("test2");
  }
} 
```

用法：

```
List<Parent> tests = new List<Parent>();
tests.Add(new Child());
tests[0].test(); 
```

输出：

> ```
> test2 
> ```

在 C++ 中，***当我使用 执行此操作时`std::vector`***，它调用父级的成员函数，而不是子级的成员函数。

如何在 C++ 中完成上述操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:51:52.607

我觉得你这里有两个问题。一个是句法问题，其他人已经解决了这个问题。但是，您似乎还有一个潜在的问题，即***尝试用 C++ 编写 Java/C# 代码***。无论语法问题是什么，这都会导致痛苦，所以我在这里尝试解决这个问题。

> 在 C++ 中，当我使用向量执行此操作时，它会调用该父函数。如何在 C++ 中执行上述示例？

***Java 和 C# 对一切都使用面向对象的范例***。C++ 的不同之处在于***C++ 是一种多范式语言***。它支持（或多或少）结构化、OO、通用、功能和诸如此类的编程范式。你可以自由地***混合和混合范式***，而 C++ 在你这样做的地方最闪耀。

标准库中从 STL 派生的部分，即：容器、算法、迭代器，根本不是 OO。他们正在应用***通用编程***。其属性之一是容器通常（有例外，但不在标准库本身内）存储*值*，而不是*引用*。然而，多态性，至少是*运行时*多态性，只对*引用*进行操作（或者，在语法上，指针，在语义上也是引用）。

如果你有 a `std::vector<base_class> vc`，这将存储实际*值*，而不是对堆上某处对象的引用。如果将对象放入这样的容器中，则该对象实际上会被*复制*到容器中。如果您放入一个`derived_class`对象，则该对象将受到***切片***。也就是说，只有它的`base_class`一部分会被复制到容器中，所有的`derived_class`部分都将被忽略。然后，您最终`base_class`会在容器中得到一个实际对象，而不是像 Java 和 C# 中那样，是对堆上某处的派生类对象的基类引用。
这就是为什么在该对象上调用成员函数将在基类中结束：***没有派生类对象可以在其上调用函数***.

在 C++ 中，***如果要使用 OOP***，通常必须***动态分配派生类对象***（即`new derived_class()`）并将它们分配给基类指针。这样做的问题是 C++ 没有垃圾收集，因此您必须跟踪这些指针，以及由它制作的所有副本，并在最后一个指针被销毁之前显式删除该对象。***手动执行此操作非常容易出错***，这就是为什么现在每个人都让***智能指针***自动执行此操作。

所以你想要的是`std::vector<smart_ptr<base_class>>`放入`new derived_class()`对象。符号`smart_ptr`所指的内容取决于您的需要。如果您打算将指向这些对象的指针存储*在该容器*中`std::unique_ptr`（`std::tr1::unique_ptr`如果您的编译器仅支持 C++03，或者`boost::unique_ptr`它甚至不支持）将是理想的。如果您自由地传递这些指针，并让它们跟踪最后一个超出自己范围的时间，`std::shared_ptr`那就更好了。

* * *

现在，说了这么多，我觉得有必要补充一下：***您可能根本不需要以 OO 方式执行此操作***。如果您可以摆脱僵化的 OO 思维，Java 和 C# 将您囚禁在其中，那么可能会有更好的设计。

如果您使用多态性只是为了将具有不同内容的容器传递给相同的算法，那么使用***通用编程可能会更好***：

```
template<typename FwdIt>
void do_something(FwdIt begin, FwdIt end)
{
  while(begin != end)
    if(begin->foo() == bar()) // whatever
      begin->baz();           // whatever
}

std::vector<some_class> vs;
std::vector<other_class> vo;
std::deque<other_class> do;

// ...

do_something(vs.begin(), vs.end());
do_something(vo.begin(), vo.end());
do_something(do.begin(), do.end()); 
```

这适用于所有类型（这里是`some_class`），这些类型的`foo()`成员不接受任何参数并返回与任何`bar()`返回值相当的东西，并且有一个`baz()`成员，也不接受任何参数。（如果你尝试使用一些没有这些的类型，编译器会向你咆哮。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T13:11:13.787

与 Java 或 C# 不同，C++ 默认使用值语义。An `std::vector<Parent>`包含`Parent`类型的实际对象，而不是指针或引用。当您插入向量时，您正在插入的对象被复制，并且它被复制到`Parent` 类型的对象中。（对象不能更改类型。）这称为切片。

如果要在 C++ 中使用多态性，则必须明确指定要使用引用语义。指针和引用都提供引用语义，并且可以定义“智能指针”——行为类似于指向其他类的指针的类。由于引用不支持标准容器所需的复制/赋值语义，因此它们不能用于实例化容器，因此如果容器要保存多态对象，则必须将其定义为包含指针。所以：

```
std::vector<ValueType> v;
v.push_back( ValueType() );         //  no new 
```

但

```
std::vector<BaseType*> v;
v.push_back( new DerivedType() );   //  dynamic allocation. 
```

由于切片，多态性和复制/分配不能很好地协同工作，并且通常在设计为层次结构基础的类中阻止复制/分配。

此外，如果您要通过指向基类的指针来管理对象，则析构函数应该是虚拟的：

```
class Parent
{
public:
    virtual ~Parent() {}
    //  ...
}; 
```

否则，当您删除对象时（通过指向其基的指针），您将遇到未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:13:22.807

`test()`应该`virtual`在您的`Parent`类中进行，以确保正在调用`Child`该类。`test()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T13:14:58.340

看起来`boost::ptr_container`图书馆对你很有帮助。它的工作方式与（智能）指针向量的工作方式相同，但它还有一个额外的好处，那就是具有专为此使用而设计的语法。

因此，例如，您可以执行以下操作：

```
typedef boost::ptr_vector<AbstractClass> PolyVector;

PolyVector polyVect;
polyVect.push_back( std::unique_ptr( new ChildClassA() ) );
polyVect.push_back( std::unique_ptr( new ChildClassB() ) );
polyVect.push_back( std::unique_ptr( new ChildClassC() ) );

BOOST_FOREACH( PolyVector::value_type item, polyVect)
    item.memberFunction( x ); 
```

这将调用 virtual 的派生类实现`memberFunction`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T12:02:00.577

C++ 没有`override`关键字。只需将您覆盖的方法重新声明为`virtual`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T12:02:12.450

在 C++ 中，这将类似于以下内容：

```
MyList<Parent*>* tests = new MyList<Parent*>();
tests->Add(new Child());
tests->test(); 
```

为了在 C++ 中调用多态功能，您将调用子函数而不是父函数，您必须使用指向或引用父类的指针或引用，并且类方法本身需要在父类中声明，`virtual`并且子类声明。

请记住，如果您不补偿`MyList`对象“拥有”（或应该拥有）传递给它的指针这一事实，那么使用这样的原始指针可能会导致一些严重的内存泄漏。如果所有权不明确，您需要格外小心，或使用类似`std::shared_ptr<T>`. 例如，如果您决定使用`std::vector`带有原始指针的 STL 容器，那么容器将不会“拥有”分配给每个指针的内存，并且当容器被销毁时，它不会释放每个指针指向的内存它的成员，导致严重的内存泄漏。

顺便说一句，这是关于 C++ 的一个非常重要的点……与 C#/Java 不同，C++ 使用显式指针，而不是隐式指针。因此，如果您声明一个对象，使其不是指针（即，它是堆栈上的静态或“自动”变量），那么如果您将派生类实例对象复制到父实例中，您将最终“切片" 关闭派生对象的父部分，只复制派生对象的父部分。那不是你想要的。您需要多态行为，因此您必须使用指向父类类型的指针或引用。

例如，这是一个多态行为的[工作示例](http://ideone.com/vb0Pj)：

```
#include <iostream>

//polymorphic base
struct test
{
    virtual void print() { std::cout << "I'm the parent" << std::endl; }
};

//derived type
struct derived : public test
{
    virtual void print() { std::cout << "I'm the derived" << std::endl; }
};

int main()
{
    test* a = new test;
    test* b = new derived;

    a->print();
    b->print();  //calls derived::print through polymorphic behavior

    return 0;
} 
```

# html - CSS边距仅在每行的第一个div之后？

> ID：11188950
> 
> 赞同：3
> 
> 时间：2012-06-25T11:59:36.810
> 
> 标签：html, css

我想在包装中显示一些 div。div 具有相同的类名并具有固定的宽度。我想为行中的第一个 div 设置一些边距，但不是为行中的最后一个 div，但问题是我**无法更改 html**。如果用 CSS 不可能，可以用 jQuery 来完成吗？ **编辑**：对不起，忘了提，总是有 2 个 div 连续。

```
<div class="list">

<div class="box">Box 1</div> 
<div class="box">Box 2</div> <!-- should be margin-right:0 --> 
<div class="box">Box 3</div> 
<div class="box">Box 4</div> <!-- should be margin-right:0 --> 

</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T12:01:23.817

现在习惯了

第一个选项

```
.box:nth-of-type(2n){
margin-right:0;
} 
```

* * *

第二种选择

```
.box:nth-child(even){
margin-right:0;
} 
```

更多信息[http://www.w3.org/Style/Examples/007/evenodd.en.html](http://www.w3.org/Style/Examples/007/evenodd.en.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:02:13.537

您可以为此使用 css3`last-child`属性。像这样写：

```
.box:last-child{
 margin-right:0;
} 
```

但这不是 IE8 及以下

根据您的要求，您可以为此使用 + 选择器。像这样写：

```
.box + .box{
 margin-left:10px;
} 
```

&它的工作到 IE7

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T12:02:26.110

```
div:not(:last-child) { margin-right: 10px; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:52:24.957

听起来你需要这个[http://csswizardry.com/2011/08/building-better-grid-systems/](http://csswizardry.com/2011/08/building-better-grid-systems/)

# c++ - 为什么 Code::Blocks 显示多个错误定义？

> ID：11188952
> 
> 赞同：1
> 
> 时间：2012-06-25T11:59:38.667
> 
> 标签：c++, codeblocks, definition

我在[这里](http://lazyfoo.net/SDL_tutorials/lesson36/index.php)使用代码，我希望所有调用 SDL 函数的函数都位于不同的头文件中，而不是主 .cpp 文件中。所以我创建了一个名为 Methods.h 的新文件。以下是文件的样子：

```
main.cpp:

#include "Methods.h"
...

Methods.h:

#include "SDL/SDL.h"
#include "SDL/SDL_opengl.h"
.... 
```

我从 main 中删除了所有函数并将它们放入 Methods.h

当我尝试构建项目时，它显示“多重定义错误”。

```
/media/Data1/Projects/OpenGL/Game2/Methods.h|29|multiple definition of `event'|
obj/Debug/main.o:/media/Data1/Projects/OpenGL/Game2/Methods.h|29|first defined here|
obj/Debug/src/Machine.o||In function `drawFrame()':|
/media/Data1/Projects/OpenGL/Game2/Methods.h|29|multiple definition of `drawFrame()'|
obj/Debug/main.o:/media/Data1/Projects/OpenGL/Game2/Methods.h|29|first defined here|
obj/Debug/src/Machine.o||In function `init_GL()':|
/media/Data1/Projects/OpenGL/Game2/Methods.h|73|multiple definition of `init_GL()'|
obj/Debug/main.o:/media/Data1/Projects/OpenGL/Game2/Methods.h|73|first defined here|
obj/Debug/src/Machine.o||In function `init()':|
/media/Data1/Projects/OpenGL/Game2/Methods.h|97|multiple definition of `init()'|
obj/Debug/main.o:/media/Data1/Projects/OpenGL/Game2/Methods.h|97|first defined here|
obj/Debug/src/Machine.o||In function `clean_up()':|
/media/Data1/Projects/OpenGL/Game2/Methods.h|123|multiple definition of `clean_up()'|
obj/Debug/main.o:/media/Data1/Projects/OpenGL/Game2/Methods.h|123|first defined here| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:06:34.523

看起来您的头文件中有一些函数定义，这意味着您将从包含头文件的每个源文件中获得每个函数的单独定义。需要声明`inline`它们以允许在包含标题的每个翻译单元中定义它们：

```
// Methods.h
#ifndef METHODS_H
#define METHODS_H

inline void initGL() {
    // do stuff
}

#endif 
```

或者，您可以在标头中声明它们，并将定义移动到源文件：

```
// Methods.h
#ifndef METHODS_H
#define METHODS_H

void initGL();

#endif

// Methods.cpp
#include "Methods.h"

void initGL() {
    // do stuff
} 
```

还有一个全局变量。如果要保留它，则必须将定义移动到源文件中，并`extern`在头文件中声明。或者，您可以将其替换为访问静态变量的函数：

```
inline SDL_Event & event() {
    static SDL_Event instance;
    return instance;
} 
```

这具有优点和缺点，它在第一次调用函数时被初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-21T20:36:55.903

当您使用 file-new-file-source 文件等在代码块中添加文件时，会出现一个屏幕询问您是否要将文件包含在调试和发布版本中。如果您认为我当然想包含它们，那么我为什么要添加文件？然后代码块会自动包含您的文件。然后，当您在代码中明确包含该文件时，您正在复制它自动执行的操作。因此，添加文件时不要勾选这些框，因为结果非常混乱。今天有这个。

干杯

波奇

# c# - 当使用 Umbraco 轮廓归档表单时，有什么方法可以挂钩事件？使用 Umbraco 4.7.2 和 Umbraco Contour 1.12？

> ID：11188957
> 
> 赞同：1
> 
> 时间：2012-06-25T11:59:53.597
> 
> 标签：c#, umbraco, umbraco-contour

我正在尝试创建一个功能，我可以在使用 Umbraco Contour 时跟踪何时归档表单。通常，Umbraco 代码库有一系列我可以挂钩的事件。但是我在这里没有看到。

另一个想法是在数据库上有一个触发器或其他东西，但想看看是否有这种方法的纯代码解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:00:47.973

据我所知，存档表单时没有引发任何特定事件，但您可以尝试订阅该`FormStorage.FormUpdated`事件并从那里检查表单是否已存档，然后执行您的代码：

```
using System;
using umbraco.BusinessLogic;
using Umbraco.Forms.Core;
using Umbraco.Forms.Data.Storage;

public class FormArchiveListener : ApplicationBase
{
    public FormArchiveListener()
    {
        FormStorage.FormUpdated += new EventHandler<FormEventArgs>(FormStorage_FormUpdated);
    }

    void FormStorage_FormUpdated(object sender, FormEventArgs e)
    {
        FormStorage storage = (FormStorage) sender;

        if (e.Form.Archived)
        {
            ...
        }
    }
} 
```

# asp.net - ASP.NET MVC ul/li 菜单

> ID：11188959
> 
> 赞同：3
> 
> 时间：2012-06-25T12:00:10.687
> 
> 标签：asp.net, asp.net-mvc, razor, menu, html-lists

我正在尝试在我的 ASP.NET MVC 应用程序中创建一个 ul/li 菜单。菜单应该有 4 到 5 个顶部菜单项，每个顶部菜单项应该有一个带有一些子菜单项的悬停/下拉菜单。完成的菜单结构应该看起来像带有下拉菜单的普通 ul/li 菜单：

```
<ul>

 <li class="active">
   <a>Topmenu 1</a>
   <ul>
   <li>Submenu1</li>
   <li>Submenu2</li>
   <li>Submenu3</li>
   </ul>
 </li>

  <li class="inactive">
   <a>Topmenu 2</a>
   <ul>
   <li>Submenu4</li>
   <li>Submenu5</li>
   <li>Submenu6</li>
   </ul>
 </li>
  And so on...
</ul> 
```

顶部菜单项应具有“活动”和“非活动”的类。我通过制作一个生成顶部菜单项的自定义 HtmlHelper 解决了这个问题。看起来像这样：

```
 public static MvcHtmlString MenuItem(
    this HtmlHelper htmlHelper,
    string text,
    string action,
    string controller
)
    {

        var li = new TagBuilder("li");
        var routeData = htmlHelper.ViewContext.RouteData;
        var currentAction = routeData.GetRequiredString("action");
        var currentController = routeData.GetRequiredString("controller");
        if (string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase) &&
            string.Equals(currentController, controller, StringComparison.OrdinalIgnoreCase))
        {
            li.AddCssClass("tab active");
        }
        else {
            li.AddCssClass("tab inactive");
        }
        li.InnerHtml = htmlHelper.ActionLink(text, action, controller).ToHtmlString();
        return MvcHtmlString.Create(li.ToString());
    } 
```

我这样调用函数：

```
@Html.MenuItem("Katalog", "Index", "Katalog") 
```

这个功能很好用。不幸的是，整个顶部`<li>`菜单项正在生成。所以我无法`<ul>`将 submenuitems 放在 topmenu`<li>`标记中的某个位置。

有人知道如何制作这样的菜单吗？或者一个想法如何让我`<ul>`进入 topmenu`<li>`标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T12:04:39.127

你可以使用[Superfish menu 之](http://users.tpg.com.au/j_birch/plugins/superfish/)类的东西。我使用它，它非常好。您唯一需要的就是视图中某处的菜单结构（`_Layout.cshtml`例如）。如果您选择采用这种方式，只需创建菜单结构（`<ul><li>)`手动并调用 Superfish jQuery 插件。无论您的菜单可能有多少嵌套级别（`<ul>`内部），您都会得到一个非常棒的菜单可供使用。插件将`<li>`处理好。

示例代码：

```
<script type="text/javascript" src="superfish.js"></script>

// Create the root <ul> with id = menu... <ul id="menu">
// Call superfish() on the containing ul element.

<script> 

    $(document).ready(function() { 
        $('ul#menu').superfish(); 
    }); 

</script> 
```

您可以使用许多[选项](http://users.tpg.com.au/j_birch/plugins/superfish/#options)自定义菜单，如下所示：

```
<script> 

    $(document).ready(function() { 
        $('ul#menu').superfish({ 
            delay:       1000,                            // one second delay on mouseout 
            animation:   {opacity:'show',height:'show'},  // fade-in and slide-down animation 
            speed:       'normal',                        // faster animation speed 
            autoArrows:  true,                            // enable generation of arrow mark-up 
            dropShadows: true                             // enable drop shadows 
        }); 
    }); 

</script> 
```

# c++ - HLSL 几何着色器四边形正在移动

> ID：11188960
> 
> 赞同：1
> 
> 时间：2012-06-25T12:00:14.890
> 
> 标签：c++, directx, hlsl, geometry-shader

我正在尝试使用 HLSL 中的几何着色器将单个点转换为四边形。当我不使用几何着色器并尝试显示单个像素时，它工作得很好。但是当我使用它时，四边形正在被绘制，但它们似乎每 100 帧更新或某事移动到另一个位置。

这是我的精灵类（我不完全确定那里的代码..尤其是顶点缓冲区和绘图调用）：

```
#include "SpriteRenderer.h"

#include "debug.h"
SpriteRenderer::SpriteRenderer(const std::vector<std::string>& textureFilenames) 
                                                :m_textureFilenames (textureFilenames),
                                                 m_pEffect (NULL),
                                                 m_spriteTex (NULL),
                                                 m_spriteSRV (NULL),
                                                 m_spriteCountMax (0),
                                                 m_pVertexBuffer (NULL),
                                                 m_pInputLayout (NULL),
                                                 pd3dImmediateContext(NULL)
{

}

SpriteRenderer::~SpriteRenderer(){

}

HRESULT SpriteRenderer::ReloadShader(ID3D11Device* pDevice){

    HRESULT hr;

    ReleaseShader();

    WCHAR path[MAX_PATH];
    stringstream ss;
    wstringstream wss;

    V_RETURN(DXUTFindDXSDKMediaFileCch(path, MAX_PATH, L"SpriteRenderer.fxo"));
    ifstream is(path, ios_base::binary);
    is.seekg(0, ios_base::end);
    streampos pos = is.tellg();
    is.seekg(0, ios_base::beg);
    vector<char> effectBuffer((unsigned int)pos);
    is.read(&effectBuffer[0], pos);
    is.close();
    V_RETURN(D3DX11CreateEffectFromMemory((const void*)&effectBuffer[0],effectBuffer.size(), 0, pDevice, &m_pEffect));

    return S_OK;
}

void SpriteRenderer::ReleaseShader(){
    SAFE_RELEASE( m_pEffect );
}

HRESULT SpriteRenderer::CreateResources(ID3D11Device* pDevice){
    HRESULT hr;
    // Fill in the subresource data.
    D3D11_SUBRESOURCE_DATA InitData;
    InitData.pSysMem = NULL;
    InitData.SysMemPitch = sizeof(SpriteVertex);
    InitData.SysMemSlicePitch = 0;

    D3D11_BUFFER_DESC bufferDesc;
    bufferDesc.Usage            = D3D11_USAGE_DEFAULT;
    bufferDesc.ByteWidth        = 1024 * InitData.SysMemPitch;
    bufferDesc.BindFlags        = D3D11_BIND_VERTEX_BUFFER;
    bufferDesc.CPUAccessFlags   = 0;
    bufferDesc.MiscFlags        = 0;

    V_RETURN(pDevice->CreateBuffer( &bufferDesc, NULL, &m_pVertexBuffer ));

    const D3D11_INPUT_ELEMENT_DESC layout[] = // http://msdn.microsoft.com/en-us/library/bb205117%28v=vs.85%29.aspx
    {
        { "POSITION",          0, DXGI_FORMAT_R32G32B32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
        { "RADIUS",            0, DXGI_FORMAT_R32_FLOAT,       0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
        { "TEXTUREINDEX",      0, DXGI_FORMAT_R32_SINT,        0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    };
    UINT numElements = sizeof( layout ) / sizeof( layout[0] );
    D3DX11_PASS_DESC passDesc;
    m_pEffect->GetTechniqueByName("Render")->GetPassByName("P0_Sprite")->GetDesc(&passDesc);

    V_RETURN( pDevice->CreateInputLayout( layout, numElements, passDesc.pIAInputSignature,
              passDesc.IAInputSignatureSize, &m_pInputLayout ) );

    return S_OK;
}

void SpriteRenderer::ReleaseResources(){
    SAFE_RELEASE( m_pInputLayout );
    SAFE_RELEASE( m_pVertexBuffer );
}

void SpriteRenderer::RenderSprites(ID3D11Device* pDevice, const std::vector<SpriteVertex>& sprites, const CFirstPersonCamera& camera){
    pDevice->GetImmediateContext(&pd3dImmediateContext);
    m_spriteCountMax = sprites.size();
    D3D11_BOX box;
    box.left  = 0; box.right = m_spriteCountMax * sizeof(SpriteVertex);
    box.top  = 0; box.bottom = 1;
    box.front = 0; box.back  = 1;

    pd3dImmediateContext->UpdateSubresource(m_pVertexBuffer, 0, &box, &sprites, 0, 0);

    ID3D11Buffer* vbs[] = { m_pVertexBuffer, };
    unsigned int strides[] = { sizeof(SpriteVertex), }, offsets[] = { 0, };

    pd3dImmediateContext->IASetVertexBuffers(0,1, vbs, strides, offsets);
    pd3dImmediateContext->IASetInputLayout(m_pInputLayout);
    pd3dImmediateContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_POINTLIST);

    //TODO: Move to header file.
    ID3DX11EffectMatrixVariable* g_ViewProjectionEV;
    ID3DX11EffectVectorVariable* g_WorldUpEV;
    ID3DX11EffectVectorVariable* g_WorldRightEV;

    g_WorldUpEV = m_pEffect->GetVariableByName("g_WorldUp")->AsVector();
    g_WorldRightEV = m_pEffect->GetVariableByName("g_WorldRight")->AsVector();
    g_ViewProjectionEV = m_pEffect->GetVariableByName("g_ViewProjection")->AsMatrix();

    g_WorldUpEV->SetFloatVector(( float * )camera.GetWorldUp());
    g_WorldRightEV->SetFloatVector(( float * )camera.GetWorldRight());

    for(auto it = sprites.begin(); it != sprites.end(); it++){
        D3DXMATRIX worldView, mRotx, mRoty, mRotz, mTrans, mScale;
        D3DXMatrixTranslation(&mTrans, it->Position.x, it->Position.y, it->Position.z);
        D3DXMatrixRotationX(&mRotx, 0);
        D3DXMatrixRotationY(&mRoty, 0);
        D3DXMatrixRotationZ(&mRotz, 0);
        D3DXMatrixScaling(&mScale, 1.0f, 1.0f, 1.0f);
        worldView = mScale * mRotx * mRotz * mRotz * mTrans * (*camera.GetViewMatrix());
        D3DXMATRIX worldViewProj = worldView * (*camera.GetProjMatrix());
        g_ViewProjectionEV->SetMatrix(( float* )worldViewProj);
        m_pEffect->GetTechniqueByName("Render")->GetPassByName("P0_Sprite")->Apply(0, pd3dImmediateContext);
        pd3dImmediateContext->Draw(1, 0);   
    }

    SAFE_RELEASE( pd3dImmediateContext );
} 
```

这是我的着色器：

```
matrix g_ViewProjection;
//--------------------------------------------------------------------------------------
// Constant buffers
//--------------------------------------------------------------------------------------

cbuffer cbPerFrame
{
    float3 g_WorldUp;
    float3 g_WorldRight;
}

//--------------------------------------------------------------------------------------
// Structs
//--------------------------------------------------------------------------------------

struct PSVertex {
    float4 Position : SV_POSITION;
};

struct SpriteVertex
{
    float3 Position : POSITION;
    float Rad : RADIUS;
    int TexIndex: TEXTUREINDEX;
};

//--------------------------------------------------------------------------------------
// Rasterizer states
//--------------------------------------------------------------------------------------

RasterizerState rsCullNone {
    CullMode = None; 
};

//--------------------------------------------------------------------------------------
// DepthStates
//--------------------------------------------------------------------------------------
DepthStencilState EnableDepth
{
    DepthEnable = TRUE;
    DepthWriteMask = ALL;
    DepthFunc = LESS_EQUAL;
};

BlendState NoBlending
{
    AlphaToCoverageEnable = FALSE;
    BlendEnable[0] = FALSE;
};

//--------------------------------------------------------------------------------------
// Shaders
//--------------------------------------------------------------------------------------
SpriteVertex DummyVS(SpriteVertex Input) {
    SpriteVertex vs;
    vs.Position = Input.Position;
    vs.Rad = Input.Rad;
    vs.TexIndex = Input.TexIndex;

    return vs;
}
float4 DummyPS(PSVertex input) : SV_Target0 {
    return float4(1, 1, 0, 1);
}

/*
SpriteVertex DummyVS(VSInput Input) {
    SpriteVertex output;

    output.Position = Input.Pos;
    output.Rad = Input.Rad;
    output.TexIndex = Input.TexIndex;
    //stream = mul(float4(Input.Pos.xyz, 1), g_ViewProjection);
    return output;
}

float4 DummyPS(PSVertex input) : SV_Target0 {
    return float4(1, 1, 0, 1);
}
*/
[maxvertexcount(4)]
void SpriteGS(point SpriteVertex vertex[1], inout TriangleStream<PSVertex> stream){
    PSVertex v;

    v.Position = float4(vertex[0].Position + mul(vertex[0].Rad,g_WorldRight) + mul(vertex[0].Rad,g_WorldUp), 1.f);
    v.Position = mul(v.Position, g_ViewProjection);
    stream.Append(v);
    v.Position = float4(vertex[0].Position - mul(vertex[0].Rad,g_WorldRight) + mul(vertex[0].Rad,g_WorldUp), 1.f);
    v.Position = mul(v.Position, g_ViewProjection);
    stream.Append(v);
    v.Position = float4(vertex[0].Position + mul(vertex[0].Rad,g_WorldRight) - mul(vertex[0].Rad,g_WorldUp), 1.f);
    v.Position = mul(v.Position, g_ViewProjection);
    stream.Append(v);
    v.Position = float4(vertex[0].Position - mul(vertex[0].Rad,g_WorldRight) - mul(vertex[0].Rad,g_WorldUp), 1.f);
    v.Position = mul(v.Position, g_ViewProjection);
    stream.Append(v);
    stream.RestartStrip();
}
//--------------------------------------------------------------------------------------
// Techniques
//--------------------------------------------------------------------------------------
technique11 Render
{
    pass P0_Sprite
    {
        SetVertexShader(CompileShader(vs_4_0, DummyVS()));
        SetGeometryShader(CompileShader(gs_4_0, SpriteGS()));
        SetPixelShader(CompileShader(ps_4_0, DummyPS()));

        SetRasterizerState(rsCullNone);
        SetDepthStencilState(EnableDepth, 0);
        SetBlendState(NoBlending, float4(0.0f, 0.0f, 0.0f, 0.0f), 0xFFFFFFFF);
    }
} 
```

正如您可能看到的，我正在使用相机向上和向右矢量来使四边形屏幕对齐。在这里我很不确定我的代码（这是正确的方法吗？） vertex[0].Rad 是定义四边形大小的半径或比例。

我感谢任何帮助-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:16:01.127

不幸的是，我无法发表评论，但看起来你传递的是你的地址`std::vector<SpriteVertex>`而`UpdateSubresource`不是向量的内容。

```
pd3dImmediateContext->UpdateSubresource(m_pVertexBuffer, 0, &box, &sprites, 0, 0); 
```

应该读

```
pd3dImmediateContext->UpdateSubresource(m_pVertexBuffer, 0, &box, &sprites.front(), 0, 0); 
```

# twitter-bootstrap - Bootstrap响应式中的流体输入附加

> ID：11188964
> 
> 赞同：14
> 
> 时间：2012-06-25T12:00:29.220
> 
> 标签：twitter-bootstrap

我一直在努力获取带有 input-append 元素的输入，以便在流畅的布局中具有正确的宽度。我正在使用 v2.0.4 的 Bootstrap。当我调整大小以使页面更小时，它会换行。理想情况下，我将输入井的全宽（如警报）。我在下面包含了标记和一些屏幕截图。非常感谢任何帮助！

```
<div class="row-fluid">
    <div class="span3 well">
       <form class="form-horiztonal">
           <h2>Filters</h2>
           <fieldset>
               <div class="control-group">
                   <label class="control-label" for="msisdn">MSISDNs</label>
                   <div class="controls">
                       <div class="input-append">
                           <input class="span10" id="msisdn" size="" type="text" name="msisdn"><button
                           class="btn btn-primary" type="submit"><i class="icon-plus icon-white"></i></button>
                       </div>
                   </div>
                </div>
           </fieldset>
       </form>
    </div>

    <div class="span9"></div>
</div> 
```

![在此处输入图像描述](../Images/74c8c3cd2e80150ffe752e853804d3f5.png)

![在此处输入图像描述](../Images/fec94271e3a98bbf9faab99c969f8686.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T13:57:54.133

由于您`input`是 a `.span10`，因此按钮应该是 a `.span2`。

```
<div class="input-append">
    <input class="span10" id="msisdn" size="" type="text" name="msisdn"><button class="btn btn-primary span2" type="submit"><i class="icon-plus icon-white"></i></button>
</div> 
```

但是按钮的行为发生了根本性的变化。你可以用这个 css 修复它：

```
.input-append .btn {
    float: none!important;
    margin-left: 0!important;
} 
```

更准确地说，按钮应该与`.span2`加号一样大`fluidGridGutterWidth`。这是`width: 17.02127659%`根据默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:04:08.627

替换`<form class="form-horiztonal">`为`<form id="formfilters" class="form-horiztonal">`

添加以下 jQuery 代码。

```
function sizing() {
  var formfilterswidth=$("#formfilters").width();
  $("#msisdn").width((formfilterswidth-46)+"px");
}
$(document).ready(sizing);
$(window).resize(sizing);​ 
```

它总是看起来不错

**小的：**

![在此处输入图像描述](../Images/5f14e307a717205f349ad641616026ef.png)

**大的：**

![在此处输入图像描述](../Images/ed71f57a6dda5fb4e6b4e2554b283151.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T12:38:59.023

响应式 css 是造成这种情况的原因。

通过使用覆盖一些响应式 css

```
 #msisdn {
    width: 75%;
    display: inline-block;
  } 
```

希望你能看到发生了什么。希望这会让你足够接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-17T10:43:21.493

这是一个非常棒的纯 CSS 解决方案，没有用于布局目的的讨厌的 jQuery/JavaScript。

[http://jsfiddle.net/9Ma8V/](http://jsfiddle.net/9Ma8V/)

的HTML

```
<div class="inline-button-input">
   <input type="submit" value="Submit"/>
   <div>
      <input type="text"/>
   </div>
</div> 
```

CSS

```
input[type=text] {
   width: 100%;
}
.inline-button-input {
   width: 100%;
   float: right;
}
.inline-button-input div {
   overflow: hidden;
   padding-right: .5em;
}
.inline-button-input input[type=submit] {
   float: right;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-22T15:16:17.517

我有一个答案和一个新问题要解决。

我创建了一个函数，它将搜索所有 input-append 并根据它们的 parent().width() 调整它们的大小。

这里：

```
 function sizeInputs() {
  $(document).find(".input_app").each(function(){  
    var container_width = $(this).parent().innerWidth();
    var btn_width = $(this).parent().find(".btn_app").width();
    // I don't know why but I need to add 25 here...???
    $(this).css('width', container_width-(btn_width + 25));  
  }); 
```

您只需要将输入分类为“.input_app”，相关按钮分类为“.btn_app”，并将它们放在一个 div 中。

这适用于除表格之外的任何地方。由于表格宽度由其元素的宽度决定，因此它是鸡蛋和鸡肉的困境。如果你放大表格，它可以工作，但如果你缩小它的宽度，它就不行。

所有这些都可以在 Fiddle [input-append中查看](http://jsfiddle.net/fled/RC5BW/20/)

如果有人对如何解决表格调整大小问题有任何想法，将不胜感激。

# android - 重新加载时对话框黑屏中的Android VideoView

> ID：11188966
> 
> 赞同：0
> 
> 时间：2012-06-25T12:00:39.433
> 
> 标签：android, dialog, android-videoview

我在自定义对话框中有一个 VideoView。第一次显示 Dialog 时，视频可以正确播放，但如果 Dialog 被关闭然后再次加载，则视频不会播放，并且对话框只是黑屏。

这是我用来创建 Dialog 的代码：

```
Dialog d;

protected Dialog onCreateDialog(int id) {
    switch(id) {
    case DIALOG_VIDEO:
        AlertDialog.Builder builder;

        LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.video,null);

        final VideoView vv = (VideoView)layout.findViewById(R.id.vv);
        vv.setMediaController(new MediaController(this));

        vv.setVideoURI(path);

        vv.setZOrderOnTop(true);
        vv.requestFocus();
        vv.start();

        builder = new AlertDialog.Builder(this);
        builder.setView(layout);
        d = builder.create();
        d.setOnDismissListener(new DialogInterface.OnDismissListener() {
            public void onDismiss(DialogInterface dialog) {
                VideoView vv = (VideoView)d.findViewById(R.id.vv);

                vv.stopPlayback();
                vv.clearFocus();
            }
        });
        break;
    default:
        d = null;
    }

    return d;
} 
```

我究竟做错了什么 ？

感谢您的宝贵时间，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:17:13.197

创建对话框时只调用一次 onCreateDialog(int id) 方法。因此，一旦您创建了对话框并且当您关闭对话框时，现在调用 onCreateDialog(int id) 方法不再调用，这就是您无法第二次查看视频的原因。根据您的代码，播放视频的逻辑仅用于创建对话框。

您可以使用 onPrepareDialog(int id) ，每次启动对话框时都会调用它。

**注意：：**您需要同时使用 onCreateDialog(int id) 和 onPrepareDialog(int id)。

# android - Android 标签栏活动

> ID：11188968
> 
> 赞同：0
> 
> 时间：2012-06-25T12:00:55.847
> 
> 标签：android, tabbar, android-tabhost, tabwidget

我正在使用标签栏活动。并在三个选项卡中设置三个活动。当我打开第四个活动时，它会在单独的活动中打开，并且看不到我设置的选项卡。如何打开不隐藏三个标签栏的第四个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:12:27.823

为此，您可以使用关注而不是活动

```
1\. View Flipper
2\. Fragment Activity 
```

# c# - 在 C# 中读取 Excel 数据和单元格格式

> ID：11188970
> 
> 赞同：1
> 
> 时间：2012-06-25T12:01:04.330
> 
> 标签：c#, .net, excel, ms-office, closedxml

我正在寻找一个允许我在 C# 中读取 Excel 文档的库，但我需要能够读取**单元格格式**以及电子表格中的数据。我发现[这个有用的问题](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)列出了许多读取 Excel 文档的不同选择，但是这里提供的许多解决方案只允许读取电子表格的内容，而不是单元格属性（例如字体、背景颜色等）。但是，对于我的特定问题，我需要阅读包含大量单元格格式的文档，并且我需要能够阅读此格式信息。

我需要阅读的 Excel 文档是*xls*文档，所以现阶段不需要阅读*xlsx 。*我正在寻找一个可以在没有安装 Excel 的服务器上使用的库，所以它必须是一个独立的解决方案，最好是开源的。

*有没有人有从xls*文档中读取单元格格式信息的经验，并且可以建议一个有助于完成这项任务的库？

更新：

我正在考虑使用 ClosedXml，因为从我所阅读的内容来看，它似乎提供了我需要的功能。我正在使用此示例代码：

[http://closedxml.codeplex.com/wikipage?title=Finding%20and%20extracting%20the%20data&referringTitle=Documentation](http://closedxml.codeplex.com/wikipage?title=Finding%20and%20extracting%20the%20data&referringTitle=Documentation)

并且能够毫无问题地读取 Excel 文档的内容。我只使用了此代码中的类别示例，但已将两个类别名称单元格格式化为具有背景颜色。现在我想用 ClosedXml 做的是确定：

*   如果在特定单元格上定义了*填充背景颜色*

*   如果已定义，则检索*填充*的颜色（十六进制值即可）

这是我尝试使用的一些代码：

```
// Get all categories
while (!categoryRow.Cell(coCategoryId).IsEmpty())
{
    IXLCell categoryName = categoryRow.Cell(coCategoryName);
    try
    {
        categories.Add(categoryName.GetString() + " " + categoryName.Style.Fill.BackgroundColor.Color.ToHex());
    }
    catch
    {
        categories.Add(categoryName.GetString() + " None");
    }
    categoryRow = categoryRow.RowBelow();
} 
```

但是代码

```
categoryName.Style.Fill.BackgroundColor.Color.ToHex() 
```

总是抛出期望*“字典中不存在给定的键。”* ，即使对于确实定义了背景颜色的单元格也是如此。任何人都知道如何使用 ClosedXml 来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:05:28.800

[`OpenXml`](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/05/04/4590.aspx)及其包装器 -[`ClosedXml`](http://closedxml.codeplex.com/)为您提供许多有用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:07:24.250

如果它不需要免费，我强烈推荐[Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:10:35.157

我部分回避了您的要求，但您可以在服务器上转换 xls->xlsx，然后搜索（XPath）XML。也许 xls->openoffice calc 可以做大致相同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:10:54.683

您可以使用 Microsoft.Office.Interop.Excel

```
var workbookPath = "";
var worksheetName = "";

var applicationClass = new Application();
var workbook = applicationClass.Workbooks.Open(workbookPath, Type.Missing, Type.Missing,     Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing , Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

var worksheet = workbook.GetWorksheet(worksheetName);
var usedRange = worksheet.UsedRange;
var columnRangeIndexColumn= 1;

            for (int i = beginIndexRow; i <= usedRange.Rows.Count; i++)
            {
                var columnRange = usedRange.Cells[i, columnRangeIndexColumn];
                var value= columnRange.Value2;
             }

use this extension

public static Worksheet GetWorksheet(this Workbook value, string name)
        {
            foreach (Worksheet worksheet in value.Worksheets)
            {
                if (worksheet.Name == name)
                {
                    return worksheet;
                }
            }
            return value.ActiveSheet;
        } 
```

# java - Map-Reduce 中的二次排序

> ID：11188971
> 
> 赞同：2
> 
> 时间：2012-06-25T12:01:05.017
> 
> 标签：java, hadoop, parallel-processing, mapreduce

我了解了在键进入减速器之前对特定键的值进行排序的方式。我了解到可以通过编写三种方法来完成，即 keycomarator、partitioner 和 valuegrouping。

现在，当 valuegrouping 运行时，它基本上对与自然键关联的所有值进行分组，对吗？因此，当它将自然键的所有值分组时，与一组排序值一起发送到减速器的实际键是什么？自然键将与不止一种类型的实体（组合键的第二部分）相关联。发送到 reducer 的复合键是什么？

ap

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:35:58.997

知道这可能会令人惊讶，但值 Iterable 的每次迭代实际上也会更新键引用：

```
protected void reduce(K key, Iterable<V> values, Context context) {
    for (V value : values) {
        // key object contents will update for each iteration of this loop
    }
} 
```

我知道这适用于新的 mapreduce API，我没有为旧的 mapred API 跟踪它。

因此，在回答您的问题时，所有键都可用，第一个键将与该组的第一个排序键相关。

**编辑**：有关其工作方式和原因的一些附加信息：

reducer 使用两个比较器来处理 map 阶段输出的键/值对：

*   键排序比较器 - 首先应用此比较器并对所有 KV 对进行排序。从概念上讲，您仍在此阶段处理序列化字节。
*   密钥组比较器 - 此比较器负责确定前一个密钥和当前密钥何时“不同”，表示一组 KV 对与另一组 KV 对之间的边界

在底层，对键和值的引用永远不会改变，每次调用 Iterable.Iterator.next() 都会将底层字节流中的指针指向下一个 KV 对。如果 key grouper 确定当前的 key 字节集合和之前的 set 是比较相同的 key，那么值 Iterable.iterator() 的 hasNext 方法将返回 true，否则返回 false。如果返回 true，则字节将反序列化为 Key 和 Value 实例，以便在您的 reduce 方法中使用。

# java - 请求相当长的响应时获取“流已关闭”IOException

> ID：11188980
> 
> 赞同：0
> 
> 时间：2012-06-25T12:01:55.727
> 
> 标签：java, android, gzip, ioexception

更新：无论我尝试接收多少数据，我都知道会出现相同的错误。任何可以帮助我解决此问题的想法和建议将不胜感激。

我正在尝试从 Web 服务中的成员列表中检索用户 ID 列表。不幸的是，在只收到了几个成员之后，我得到了一个“Stream is Closed”的 IOException。这是我第一次尝试检索这种规模的流（我们正在谈论 +100 个成员），也是我第一次收到此错误。

有问题的错误：

[IO异常](http://i.imgur.com/pHeJ9.png)

发生异常的代码：

```
private void setupRequest(OAuthRequest request) 
{
    request.setConnectionKeepAlive(true);
    request.setConnectTimeout(60, TimeUnit.SECONDS);
    request.addHeader("accept", "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*");
//  request.addHeader("accept-encoding", "gzip, deflate");
    request.addHeader("user-agent", m_sIDENTIFIER);
}

private String readStream(InputStream stream) throws IOException 
{
    String sReturn = "";
    if(stream != null)
    {
        final BufferedReader bufReader = new BufferedReader(new InputStreamReader(stream, "UTF-8"));
        final StringBuffer s2 = new StringBuffer();
        String line = bufReader.readLine();
        if(line != null)
        {
            s2.append(line);
            while((line = bufReader.readLine()) != null)
            {
                s2.append('\n');
                s2.append(line);
            }
        }
        bufReader.close();
        sReturn = s2.toString();
    }
    return sReturn;
}

private InputStream getResultStream(Response response) throws IOException
{
    InputStream resultStream = null;
    if(response != null)
    {
        String encoding = response.getHeader("Content-Encoding");
        if((encoding != null) && (encoding.equalsIgnoreCase("gzip")))
        {
            Log.d("Stream :", "Read GZIP");

        } else if ((encoding != null) && encoding.equalsIgnoreCase("deflate")) {
            resultStream = new InflaterInputStream(response.getStream(), new Inflater(true));
            Log.d("Stream :", "Read Deflated.");
        } else {
            resultStream = response.getStream();
            Log.d("Stream :","Read Normal.");
        }       
    }

    return resultStream;
} 
```

对导致问题的原因有任何想法吗？我收到的数据量有限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:06:13.517

我认为您的连接超时。

```
request.setConnectTimeout(60, TimeUnit.SECONDS); 
```

增加秒数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:47:03.303

我会说远程服务器关闭了连接（由于错误？）。从您的日志中，我可以看到响应已压缩。您的成功回复是否也被压缩了？

# iphone - 是否可以在我的应用程序中获取 Apple ID？

> ID：11188981
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:02:00.330
> 
> 标签：iphone, ios5, app-store

我只是想知道如何在 iPad/iPhone 上的 AppStore 中获取登录的苹果 ID？

我想向用户显示。

那可能吗？

如果可能的话，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:03:12.520

不可能，这会侵犯隐私

# plugins - 在 Clojure 中引导 Leiningen 插件开发

> ID：11188986
> 
> 赞同：2
> 
> 时间：2012-06-25T12:02:13.887
> 
> 标签：plugins, clojure, leiningen

我正在尝试编写一个与最新版本和下一个 2.0 版本兼容的 Leiningen 插件，但在运行插件本身时遇到了麻烦。我的意思是我想编写代码然后运行`lein foo`以在插件代码本身上运行最新版本的插件代码。我的 project.clj 文件如下：

```
(defproject foo "0.0.0"
  :description "simple version for experiment"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [fs "1.1.2"]]
  :source-path "src/clj") 
```

在 src/clj/leiningen 文件夹中，我有一个简单的 foo.clj 文件，它只调用 src/clj/bar/foo-test.clj 中打印项目目录内容的函数。但是，每当我运行`lein foo`它时，它都会说无法在 CLASSPATH 上找到 foo.clj。如果我将所有文件从 src/clj 移动到 src 并删除`:source-path`指令，那么它会在 foo.clj 中运行正确的东西，但随后会抱怨在 CLASSPATH 上找不到 fs.clj。我希望这会更容易，而不需要将 foo 依赖项添加到 project.clj 和`lein install,deps,foo`更改之间，但这是目前我让它工作的唯一方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:13:02.310

根据：[https://github.com/technomancy/leiningen/blob/master/doc/PLUGINS.md](https://github.com/technomancy/leiningen/blob/master/doc/PLUGINS.md)，`:source-path`现在`:source-paths`在 Leiningen 2.0 中，应该包含一个向量而不是直接字符串。

另一个潜在的错误是您`:eval-in-leiningen true`在项目文件中没有。我认为继承 leiningen 本身的 CLASSPATH 是必要的。我不确定这是否会引发任何查找问题`fs.clj`。

# vim - VIM突出显示缓冲区中的唯一单词？

> ID：11188988
> 
> 赞同：4
> 
> 时间：2012-06-25T12:02:17.543
> 
> 标签：vim, highlighting

当使用 vim 对文件/缓冲区中的任何唯一单词进行编程时，很可能是拼写错误（以太变量名称、方法名称或语言结构）。因此，通过突出显示文件中任何独特单词的能力来捕获此类拼写错误将是一种非常好的方法，而无需任何花哨的语言分析或解析，甚至不需要知道正在使用的编程语言。当然，最好在您键入时发生这种情况，以便您可以立即看到您的拼写错误。不知何故，我不认为我是第一个提出这样一个想法的人，所以也许有人有这样的设置或有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:18:43.400

创意。

我用这个 Vimscript 片段做了一些快速原型设计：

```
let stat = {}
for ii in range(1, line('$'))
    for word in split(getline(ii), '\(\k\@!.\)\+')
        let stat[word] = get(stat, word, 0) + 1
    endfor
endfor
echo sort(keys(filter(copy(stat), 'v:val == 1'))) 
```

在 $VIM/vim73/autoload/vimball.vim （一个 737 行的 23.2 k 文件）上运行它，我得到以下单个关键字的出现：

```
12, 1502, 2004, 2009, 2010, 299, 31, 4, 702, Allow, Apr, At, Author,
AutoInstall, Constants, Copyright, Date, DechoTabOn, ENTER, Error,
Functions, GetLatestVimScripts, Input, LICENSE, Listing, Load, Modelines,
No, Normal, Once, Output, Own, Ph, Risk, Statement, Usage, Use, VIM,
Version, Vim, Windoze, Your, about, accomplished, actions, allow, already,
appear, appears, applies, apportion, assume, attempts, automatically, base,
based, bash, both, bypass, c, ch, change, construct, continue, copyright,
cp, cr, create, creates, cygwin, decompress, decompression, defined, did,
dir, distribute, does, doesn, embedded, enc, endfor, even, events,
evidence, except, existing, express, extraction, fmr, fo, force, function,
getpos, give, given, grab, ie, implied, included, index, initialize, input,
inputrestore, inputsave, insure, invoked, its, just, keep, keepcpo, list,
listing, loop, made, messages, missing, mkvimball, named, neither, next,
noacd, nofile, noma, nor, normal, noruler, noshowcmd, ok, older, on,
option, options, over, patch, pick, picked, placed, present, previous,
prologue, prompt, read, readable, redraw, removed, same, see, setpos,
setting, settings, shell, showing, skip, specified, specify, spite, split,
standard, string, strlen, sure, suspect, switch, ta, tab#, take, that,
title, true, un, undefined, under, used, v31, various, warning, warranty,
was, when, where, will, wrote, your, zsh 
```

嗯，对我来说看起来不是很有用（排除评论时它也不会变得更好），但也许你可以接受并改进它。

# javascript - HTML 5 文件列表 - jsRender

> ID：11188989
> 
> 赞同：0
> 
> 时间：2012-06-25T12:02:18.807
> 
> 标签：javascript, jquery, jsrender

使用新的 HTML 5 File API，我试图将用户选择的文件传递给模板（使用 jsRender 渲染）。这是HTML：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="http://borismoore.github.com/jsrender/jsrender.js"></script>
  <script>
    $(function() {
      $(':file').change(function() {
        //$('#files-placeholder').html($('#files-template').render({ files: [ { name: 'Test 1' }, { name: 'Test 2' } ] }));
        $('#files-placeholder').html($('#files-template').render({ files: this.files }));
      });
    });
  </script>
</head>
<body>
  <form>
    <input name="files" type="file" multiple="multiple" />
    <script id="files-template" type="text/x-jsrender">
      <ul>
        {{for files}}
          <li>{{>name}}</li>
        {{/for}}
      </ul>
    </script>
    <div id="files-placeholder"></div>
  </form>
</body>
</html> 
```

但是它没有按预期工作。作为演示，如果您尝试使用注释掉的行渲染模板，那么它可以正常工作。

如果有人能告诉我我做错了什么，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:43:54.933

似乎模板引擎仅适用于真实数组，而不适用`FileList`于

我在这里修好了[http://jsfiddle.net/4m3YQ/5/](http://jsfiddle.net/4m3YQ/5/)

像这样转换为数组：

```
[].slice.call(this.files) 
```

# php - Kohana 3.2 ORM 验证和表单验证

> ID：11188993
> 
> 赞同：0
> 
> 时间：2012-06-25T12:02:51.653
> 
> 标签：php, kohana, kohana-3.2

从去年开始，我在 Kohan 3.0.7 中从事一个维护项目。当我在寻找最新版本（3.2）时，我遇到了我在使用 Kohana 3.0.7 时没有注意到的 ORM 验证。在我的项目中，我使用了表单验证并验证了模型中的所有表单。在阅读[http://kohanaframework.org/3.2/guide/orm/examples/validation](http://kohanaframework.org/3.2/guide/orm/examples/validation)时，我发现控制器本身中添加了额外字段“确认密码”的验证规则。所以，我想知道——

我们可以将 ORM 验证规则完全移动到模型文件中吗？如果我们可以那么怎么做呢？

**values**方法是否处理 sql 注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:23:04.330

您不能也不应该将模型验证移至控制器。
在您提供的示例中，他们使用了所谓的“额外验证”。
看一下 save[方法 API](http://kohanaframework.org/3.2/guide/api/ORM#save)`Validation` - 它采用稍后在方法中使用的可选参数`check`来验证其他逻辑（例如密码匹配）。
原因是您的模型中没有名为“password_matching”的字段（那么您可以在`rules`函数中编写此规则；）），因此您需要对这种情况使用外部验证。
使用外部验证的另一个示例是上传文件，并根据上传结果对您的 ORM 模型执行操作。

是的，ORM 是 SQL 注入安全的，因为它使用`Query Builder`它也是安全的（除了`DB::expr`应该特别小心使用）。