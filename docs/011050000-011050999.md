# StackOverflow 问答 11050000-11050999

# ajax - Telerik 网格：AJAX 的内部服务器错误

> ID：11050001
> 
> 赞同：0
> 
> 时间：2012-06-15T11:39:29.827
> 
> 标签：ajax, asp.net-mvc, razor, telerik, telerik-grid

弹出窗口中的整个错误：“错误！请求的 URL 返回 500 - 内部服务器错误”

*编辑* 这部分是固定的，我将 TempData 移动到索引函数并在那里添加了参数。但是，这也破坏了我的排序功能（ .Sortable(sorting =>sorting.SortMode(GridSortMode.SingleColumn)) *End Edit*

我不知道为什么会发生此错误并且已经花费了太多时间，所以首先我将发布代码并希望有人能提供帮助。

**控制器：**

```
[GridAction(EnableCustomBinding = true)]
public ActionResult GetTimetables(int moduleId, ModuleType moduleType)
{
    TempData["ModuleId"] = moduleId;
    IList<TimetableViewModel> timetableViewModels =
    //TODO: Don't hardcode this
    _timetableService.GetTimetableEntriesAssociatedWithModule(moduleId, moduleType);

    return View(new GridModel
    {
        Data = timetableViewModels,
    });
} 
```

**型号（可能没关系）：**

```
public class TimetableViewModel : BaseViewModel
{
    public int Id { get; set; }
    public string Date { get; set; }
    public string SessionTimePeriod { get; set; }
    public string RoomName { get; set; }
    public int NumberOfResources { get; set; }
    public string Notes { get; set; }
} 
```

}

**查看（太长，无法全部粘贴，不需要）**

```
@(Html.Telerik().Grid(Model)
           .Name("TimetableGrid")
           .PrefixUrlParameters(false)
           .Columns(columns =>
...
           .DataBinding(dataBinding => dataBinding.Ajax().Select("GetTimetables", "Manage", new { moduleId = TempData["ModuleId"], moduleType = ModuleType.UnitOfLearning }))
         //.Pageable(paging => paging.Total(Model.entryCount).PageSize(25))
           .Sortable(sorting => sorting.SortMode(GridSortMode.SingleColumn)))

@Html.Telerik().ScriptRegistrar().jQuery(false).jQueryValidation(false) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:03:50.077

有几件事看起来可能是导致错误的原因。首先，Data 语句的末尾有一个逗号。

```
return View(new GridModel
{
    Data = timetableViewModels,
}); 
```

应该

```
return View(new GridModel
{
    Data = timetableViewModels
}); 
```

或者如果你愿意，你可以这样做

```
return View(new GridModel(timetableViewModels); 
```

其次，我认为，在视图中，您需要告诉网格您的 Ajax 数据绑定的数据类型。

```
@(Html.Telerik().Grid(Model)
       .Name("TimetableGrid") 
```

应该

```
@(Html.Telerik().Grid<TimetableViewModel>()
       .Name("TimetableGrid") 
```

此外，如果可以，您可能想尝试在控制器中放置一个断点，以查看数据是否正确加载到 timetableViewModels 变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T08:57:04.663

我遇到了类似的问题，Fiddler 让我得出结论，问题出在您的数据绑定语句上：dataBinding.Ajax().Select(...)

问题在于延迟的 LINQ 执行。这个解决方案，在 LINQ 查询末尾添加 ToList，帮助了我： [asp.net MVC 4 Telerik Grid Ajax issue](https://stackoverflow.com/questions/13966078/asp-net-mvc-4-telerik-grid-ajax-issue)

# asp.net - 将 WCF 库项目转换为 WCF Web 服务（WCF 应用程序）项目类型

> ID：11050004
> 
> 赞同：3
> 
> 时间：2012-06-15T11:39:43.737
> 
> 标签：asp.net, .net, wcf, visual-studio-2010, iis

如何在 Visual Studio 中将 WCF 库项目转换为 WCF Web 服务（WCF 应用程序）项目类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:08:47.803

通过更改项目文件中的 projecttypeguid（csproj 文件 -> 卸载项目并打开文件）。

从 ：

```
<ProjectTypeGuids>{3D9AD99F-2412-4246-B90B-4EAA41C64699};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

到 ：

```
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:19:17.733

我不同意 Geert 的回答。更改该指南最终会导致项目在中途转换。

在宿主项目中包含您的服务代码也不被视为最佳实践。由于宿主项目应该只关心托管，这意味着您想要公开什么端点，您想要什么类型的安全......诸如此类的事情。与服务的内部实现无关。

我建议将库/类项目保持原样，并在同一解决方案中使用单独的项目来托管它。宿主项目可以是任何你想要的控制台、Web 服务或 Web/WCF 应用程序项目。

# wordpress - 如何以编程方式添加图像以发布？

> ID：11050005
> 
> 赞同：2
> 
> 时间：2012-06-15T11:39:47.847
> 
> 标签：wordpress

我在媒体 (WP) 中定义了图像尺寸，并在 functions.php 中添加了一些用于图像上传的自定义尺寸。当我通过 WP 管理员上传图片时，一切正常。

但是现在我有一个客户端，它通过 FTP 将 100 张图片上传到他网站上的某个文件夹，我想知道是否有办法添加这张图片以编程方式发布？

每个图像都有类似 post_ID.jpg 的名称（对于考试。450.jpg），这就是我将如何知道将哪个图像添加到哪个帖子但我的问题是如何使用 wp 函数以编程方式添加（调整大小/裁剪（就像它在我通过 WP 管理员添加））。

此图像位于自定义文件夹中：/product_images/

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:37:54.277

解决了..

这是一个解决方案：

```
$post_id = 809; // example post_ID
$filename= '/my_images/809.jpg';
$description = 'some description';

# remove all attachments
$wpdb->query("UPDATE post_parent ='0' WHERE post_type='attachment' AND post_parent='".$post_id."'");

# upload / resize / crop image (to WP images folder)
media_sideload_image($filename,$post_id,$description);

$last_attachment = $wpdb->get_row($query = "SELECT * FROM {$wpdb->prefix}posts ORDER BY ID DESC LIMIT 1", ARRAY_A);
$attachment_id = $last_attachment['ID'];

# set featured image
add_post_meta($post_id, '_thumbnail_id', $attachment_id); 
```

# php - PHP preg_split last char 在每个结果中丢失

> ID：11050009
> 
> 赞同：1
> 
> 时间：2012-06-15T11:40:15.780
> 
> 标签：php, regex, preg-split

在协议文档之后，我可以接收编码为字符串的参数数组，其中每个参数通过空格与其他参数分隔。参数中的空格用反斜杠转义。

因此，假设我们在参数数组中有以下字符串：

```
array('Eli is beautiful', 'Fran is ugly', 'Oso is nice') 
```

这些将被编码为一个字符串，如下所示：

```
Eli\ is\ beautiful Fran\ is\ ugly Oso\ is\ nice 
```

编码不是主要问题，但我面临解码问题。

我尝试使用正则表达式拆分参数，它应该由不在反斜杠之后的空格拆分，所以这是我的代码：

```
$params = preg_split('/[^\\\\]\s/', $str); 
```

它按预期拆分参数，但它也删除了每个参数的最后一个字符，所以这是 var_dump 的输出：

```
array(3) {
  [0]=>
  string(15) "Eli is beautifu"
  [1]=>
  string(11) "Fran is ugl"
  [2]=>
  string(11) "Oso is nice"
} 
```

有人知道如何解决这个问题吗？

TIA,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:43:12.590

只需使用[负面的lookbehind](http://www.regular-expressions.info/lookaround.html)：

```
$params = preg_split('/(?<!\\\\) /', $str); 
```

上面的正则表达式匹配前面没有反斜杠的每个空格，这正是您想要的。

[**看到它在行动**](http://ideone.com/XK2Jj)。

**更新：**您以前的正则表达式会吃掉字母，因为它与空格前面的字符*匹配*（只要它不是反斜杠）；因此，该字符被视为分隔符的一部分，并与空格一起从输出中删除。

后视版本*断言*空格前面没有反斜杠，但与字符不*匹配*——这是一个重要的区别。

# wpf - 拉伸水平列表框

> ID：11050010
> 
> 赞同：0
> 
> 时间：2012-06-15T11:40:16.640
> 
> 标签：wpf, xaml, listbox, stretch

我想拉伸一个类似的列表框：

```
<Grid Background="#FFC0BBBB">
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border HorizontalAlignment="Stretch" Grid.Row="0">
            <ListBox  Name="listBox"   >
                <ListBoxItem >
                    <StackPanel>
                        <TextBlock Text="Toto"></TextBlock>
                        <!--<Image Source ="" Visibility="Collapsed" />-->
                    </StackPanel>
                </ListBoxItem>
                <ListBoxItem >listbox item 2</ListBoxItem>
                <ListBoxItem >
                    <Grid>
                    <TextBlock Text="Tata"></TextBlock>
                    <Image Source ="" />
                    </Grid>
                </ListBoxItem>
                <ListBoxItem >
                    <Grid>
                        <TextBlock Background="Aqua" Text=""></TextBlock>
                        <Image Source ="https://support.twitter.com/images/twitter-bird.png?1339467554" />
                    </Grid>
                </ListBoxItem>
                <ListBoxItem >
                    <Grid>
                        <TextBlock Text="Vava"></TextBlock>
                        <Image Source ="" />
                    </Grid>
                </ListBoxItem>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="5" Background="Pink" HorizontalAlignment="Stretch" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>               
             </ListBox>
        </Border>
</Grid> 
```

如果你只为第二个项目添加内容，它可以完美运行，但我的“真实”列表框将被绑定，对于某些项目，我需要为其他项目放置一个图像文本块（我需要图像+文本块）。我认为我将不得不使用转换器，但我不知道将它放在“哪里”以及他应该返回什么。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:02:09.580

如果您要绑定到数据，然后使用数据的属性来确定您需要什么样的控件`ListBoxItem`，那么您需要使用`DataTemplateSelector`

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

# sql-server - T-sql 数据从 xml 迁移到列

> ID：11050014
> 
> 赞同：1
> 
> 时间：2012-06-15T11:40:40.397
> 
> 标签：sql-server, xml, tsql, xpath, xquery-sql

我有临时表#xml，它有 2 列：

```
CREATE TABLE #xml
(
    id int,
    xmlroutes xml
)
INSERT INTO #xml (id, xmlroutes)
(SELECT TOP 50 Id, CAST(RouteParameters as xml) as xmlroutes FROM LoggingRecords WHERE RouteParameters IS NOT NULL) 
```

我选择了 id 并将 xml 与下一个脚本配对：

```
(SELECT id, T2.Loc.query('.') as pair
FROM   #xml
CROSS APPLY xmlroutes.nodes('/route/pair') as T2(Loc)) 
```

LoggingRecords 包含可转换为 xml 的字符串 (nvarchar)。

我有所有记录的下一个 xml 结构：

```
<route>
   <pair key="x" value="y"/>
   <pair key="z" value="1"/>
   <pair key="a" value="b"/>
</route> 
```

我想从 #xml 表的每条记录中选择下一个数据（每个 id 可以与许多对相关）：

1.  ID
2.  钥匙
3.  价值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:51:24.783

```
select X.id,
       T.N.value('@key', 'nvarchar(50)') as [Key],
       T.N.value('@value', 'nvarchar(50)') as [Value]
from #xml as X
  cross apply X.xmlroutes.nodes('/route/pair') as T(N) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/73094)

# c# - gzipstream 仅通过套接字转发流

> ID：11050015
> 
> 赞同：2
> 
> 时间：2012-06-15T11:40:41.583
> 
> 标签：c#, windows-phone-7, sockets, xmpp, gzip

我正在 windows phone 7 上开发一个应用程序。我需要压缩/解压缩我的数据以通过 tcp 套接字发送它。

但是我还没有找到任何 gzip 压缩器，用于仅通过 tcp 套接字进行转发流。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:56:09.253

为此，我创建了一个精简版的 DotNetZip，称为 DotNetZipLiteWP7。它可以通过这里的 git 获得：

[https://bitbucket.org/jnewc/dotnetziplitewp7](https://bitbucket.org/jnewc/dotnetziplitewp7)

（此外，我更喜欢 DotNetZip 而不是 SharpZipLib，因为许可证更直接地用于商业应用程序）。

# android - android Galaxy的真机数据库文件到空点异常

> ID：11050020
> 
> 赞同：1
> 
> 时间：2012-06-15T11:40:54.170
> 
> 标签：android, eclipse, sqlite, android-emulator, indexoutofboundsexception

我正在加载一个名为 mydb 的资产中的数据库文件。然后我使用下面的代码将数据库文件加载到模拟器上。这有时有效，但并非总是如此。我重置了 eclipse 并且数据库文件正确加载。我根本无法让它在真实设备上工作。我已经在其他实验文件项目中尝试过这个。我认为有一个设置我没有正确配置，但我不确定。任何帮助将不胜感激。

**尝试过的方法**

1.  我尝试使用 android_meta 表，因为它建议修复未加载数据库的问题。

2.  我也可以使用这种语法记录。这甚至适用于生活设备 long id = db.insertContact("Wei-Meng Lee", "weimenglee@learn2develop.net"); 这段代码摘自本书 android development

3.  我正在对示例中指定的代码进行更改

整个故障日志

06-21 15:17:56.792：E/AndroidRuntime(556)：致命异常：主要 06-21 15:17:56.792：E/AndroidRuntime(556)：java.lang.RuntimeException：无法启动活动 ComponentInfo{alex. android.test.db/alex.android.test.db.AndroidtestdbActivity}：android.database.sqlite.SQLiteException：没有这样的表：联系人：，编译时：SELECT DISTINCT _id，name，email FROM contacts WHERE _id=2 06- 21 15:17:56.792: E/AndroidRuntime(556): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.app。 ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 06-21 15:17:56.792 : E/AndroidRuntime(556): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.os.Handler.dispatchMessage(Handler.java:99) 06-21 15:17:56.792: E/AndroidRuntime(556): 在android.os.Looper.loop(Looper.java:137) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.app.ActivityThread.main(ActivityThread.java:4424) 06-21 15: 17:56.792: E/AndroidRuntime(556): 在 java.lang.reflect.Method.invokeNative(Native Method) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 java.lang.reflect.Method。调用（Method.java:511）06-21 15:17:56.792：E/AndroidRuntime（556）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:784）06-21 15： 17:56.792: E/AndroidRuntime(556): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 dalvik.system .NativeStart.main(Native Method) 06-21 15:17:56.792:E/AndroidRuntime(556)：引起：android.database.sqlite.SQLiteException：没有这样的表：联系人：，编译时：SELECT DISTINCT _id, name, email FROM contacts WHERE _id=2 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java :68) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143) 06-21 15:17:56.792: E/AndroidRuntime(556 ): 在 android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:127 ) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite。SQLiteProgram.(SQLiteProgram.java:94) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:53) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteDatabase.rawQueryWithFactory (SQLiteDatabase.java:1564) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449) 06-21 15:17:56.792: E /AndroidRuntime(556): 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 alex.android.test.db.DBAdapter。 getContact(DBAdapter.java:163) 06-21 15:17:56.792: E/AndroidRuntime(556): at alex.android.test.db.AndroidtestdbActivity。onCreate(AndroidtestdbActivity.java:32) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.app.Activity.performCreate(Activity.java:4465) 06-21 15:17:56.792: E/ AndroidRuntime(556): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 06-21 15:17:56.792: E/AndroidRuntime(556): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920 )

公共类 DBAdapter {

```
 private static final String DB_NAME = "MyDB";
private static final int DB_VERSION = 1;
 public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_EMAIL = "email";
    private static final String TAG = "DBAdapter";
    private static final String DATABASE_TABLE = "contacts";

private static Context c;
private SQLiteDatabase db;
private SQLiteOpenHelper sqlDBHelp;

/**
 * Constructor for the SQL DB Adapter, copy DB from assets if not exists in /data/data/<package-name>/databases
 * 
 * @param c
 */
public DBAdapter(Context c) {
    super();
    DBAdapter.c = c;
    sqlDBHelp = new SqlDBHelper();
}

/**
 * Open the SQL DB as Writable
 */
public void openDB() {
    try {
        db = sqlDBHelp.getWritableDatabase();
    } catch (SQLiteException ex) {
        Toast.makeText(c, "DB with filename " + DB_NAME + "coudn't be opend!", Toast.LENGTH_SHORT);
    }
}

/**
 * Close the SQL DB
 */
public void closeDB() {
    db.close();
}

/**
 * Helper class for the SQL DB Adapter
 */
static class SqlDBHelper extends SQLiteOpenHelper {

    private static final String DB_PATH = "/data/data/" + c.getPackageName() + "/databases/" + DB_NAME;

    public SqlDBHelper() {
        super(c, DB_NAME, null, DB_VERSION);
        createDB();     
    }

    private void createDB() {

        SharedPreferences prefs = c.getSharedPreferences("sharedPrefs", 0);
        boolean dbExists = prefs.getBoolean("dbExists", false);
        Log.d("PM.ADA.SDA", "DB Exists : " + dbExists);
        if (!dbExists) {
            this.getReadableDatabase();
            copyDB();
            prefs.edit().putBoolean("dbExists", true).commit();
        }
    }

    public void onCreate(SQLiteDatabase db) {
        /*
        try {
            db.execSQL(DATABASE_TABLE); 
        } catch (SQLException e) {
            e.printStackTrace();
        }   
        */

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

         Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(db);

    }

    public void copyDB() {
        try {               
            InputStream is = c.getAssets().open(DB_NAME);
            BufferedInputStream bis = new BufferedInputStream(is);
            OutputStream os = new FileOutputStream(DB_PATH);
            BufferedOutputStream bos = new BufferedOutputStream(os);

            byte[] buffer = new byte[64];
            int length;

            while ((length = bis.read(buffer)) > 0) {
                bos.write(buffer, 0, length);
            }

            bos.flush();
            bos.close();
            bis.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

}

public long insertContact(String name, String email) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, name);
    initialValues.put(KEY_EMAIL, email);
    return db.insert(DATABASE_TABLE, null, initialValues);
}

//---deletes a particular contact---
public boolean deleteContact(long rowId) 
{
    return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}

//---retrieves all the contacts---
public Cursor getAllContacts() 
{
    return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
            KEY_EMAIL}, null, null, null, null, null);
}

//---retrieves a particular contact---
public Cursor getContact(long rowId) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
            KEY_NAME, KEY_EMAIL}, KEY_ROWID + "=" + rowId, null,
            null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

//---updates a contact---
public boolean updateContact(long rowId, String name, String email) 
{
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, name);
    args.put(KEY_EMAIL, email);
    return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} 
```

}

其他活动 TextView 名称；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DBAdapter db = new DBAdapter(this); 
    name = (TextView)findViewById(R.id.name);

    //---get a contact---
    db.openDB();
    Cursor c = db.getContact(2);
    if (c.moveToFirst())  
    {
        DisplayContact(c);
    name.setText(String.valueOf(c.getString(1)));
    }
    else
        name.setText("not found");
        Toast.makeText(this, "No contact found", Toast.LENGTH_LONG).show();
    db.closeDB();

}

public void DisplayContact(Cursor c)
{
    Toast.makeText(this, 
            "id: " + c.getString(0) + "\n" +
            "Name: " + c.getString(1) + "\n" +
            "Email:  " + c.getString(2),
            Toast.LENGTH_LONG).show();  

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:38:55.730

我发现与我的操作方式有一些不同...您缺少一个`outputStream.flush()`，我`this.getReadableDatabase();`在开始复制过程之前和`this.close();`之后打电话。

供您参考，这是我的做法，效果很好：

```
private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context, String dbname, int dbversion) {
        super(context, dbname, null, dbversion);
        if (checkDataBase(dbname)) {
            openDataBase(dbname);
        } else {
            try {
                this.getReadableDatabase();
                copyDataBase(dbname);
                this.close();
                openDataBase(dbname);
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
            Toast.makeText(context,
                    "Initial " + dbname + " database has been created",
                    Toast.LENGTH_LONG).show();
        }
    }

public DBAdapter(Context ctx) {
    DBAdapter.mCtx = ctx;
}

private static boolean checkDataBase(String dbname) {
    SQLiteDatabase checkDB = null;
    boolean exist = false;
    try {
        String db = MAIN_DB_PATH + dbname;
        checkDB = SQLiteDatabase.openDatabase(db, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        Log.v("db log", "database does't exist");
    }
    if (checkDB != null) {
        exist = true;
        checkDB.close();
    }
    return exist;
}

private static void copyDataBase(String dbname) throws IOException {
    InputStream myInput = mCtx.getAssets().open(dbname);
    String outFileName = MAIN_DB_PATH + dbname;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

# android - 在android中发生Base Byte Buffer错误

> ID：11050021
> 
> 赞同：1
> 
> 时间：2012-06-15T11:40:55.940
> 
> 标签：android, stack-overflow, android-tabhost

在我的项目中，我必须将活动添加到 Tabhost。其中一个活动是 InventoryView。当它被加载到 tabHost 时，会发生堆栈溢出错误和基本字节缓冲区错误。我不知道如何解决它。如果有人知道，请帮助我。

编码：

```
public class **TabActivityView** extends TabActivity
{
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listmonth);

        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost(); // The activity TabHost

        Intent intent = new Intent(this,InventoryView.class);
        tabHost.addTab(tabHost                         // Error Occur While it is Set.
                    .newTabSpec("Week")
                    .setIndicator("Weekly", res.getDrawable(R.drawable.ic_tab_main))
                    .setContent(intent));
    }
} 
```

在 Inventory 类中包含：

```
package com.experts.IVScreen;

import com.experts.clssfile.*;
import java.util.Calendar;
import android.content.Intent;
import com.experts.IVScreen.R;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;
import android.widget.AdapterView.OnItemSelectedListener;

public class InventoryView extends Activity{

    public String       spintext;
    GetDetails          gt        =   new GetDetails(); 
    Databasecreation    db  =   new Databasecreation();
    String              query;
    GridView            list_disp=null;
    DatePicker          sel_date;
    TextView            disp_amt,  date_text;
    Button              btnDwnchart,  btnDwnOk,  btnDwnCancel;
    public int          focus;
    ImageView           btnNext,   btnPre=null;

    SQLiteDatabase       dbase;
    public StringBuffer  buff = null;
    String           mylog="Invent";
    public String    str;
    public String    doentry;
    int tot_amt;
    public int       iSelectedMonth;
    public String    month[]={"January","February","March","April","May","June","July",
                        "August","September","October","November","December"};    

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listviewinvent);

        dbase       =  db.getdb();        
        Calendar    csCalendar  = Calendar.getInstance();
        iSelectedMonth =  csCalendar.get(Calendar.MONTH);
        Spinner   mon_spin=(Spinner)findViewById(R.id.Spin_year);
        list_disp   =    (GridView)findViewById(R.id.gridView1);
        btnDwnchart =    (Button) findViewById(R.id.btnChart);
        disp_amt    =    (TextView)findViewById(R.id.dispTotAmt);

        btnNext     =    (ImageView)findViewById(R.id.imageView1);
        btnPre      =    (ImageView)findViewById(R.id.imageView2);
        date_text   =    (TextView)findViewById(R.id.textView1);        

        ArrayAdapter NoCoreAdapter =  new ArrayAdapter(this,android.R.layout.simple_spinner_item,  month);
        NoCoreAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        mon_spin.setAdapter(NoCoreAdapter);
        mon_spin.setOnItemSelectedListener(new MyOnItemSelectedListener());

        date_text.setText(month[iSelectedMonth]);
        tot_amt     =    gt.getMonthlist(0,null, iSelectedMonth);
        dis_grid(tot_amt);

        btnDwnchart.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                Intent intent   =  null;
                intent        =    new Intent(InventoryView.this,NewChart.class);
                startActivity(intent);
            }
        });
    }

    public void btnDwnNext(View v)
    {
        if (iSelectedMonth < 11)
        {
            iSelectedMonth++;
        }
        else
        {
            iSelectedMonth  = 0;
        }
        date_text.setText(""+month[iSelectedMonth]);

        tot_amt     =     gt.getMonthlist(0,null, iSelectedMonth);
        dis_grid(tot_amt);
    }

    public void btnDwnPre(View v)
    {
        if (iSelectedMonth > 0)
        {
            iSelectedMonth--;
        }
        else
        {
            iSelectedMonth  = 11;
        }

        date_text.setText(""+month[iSelectedMonth]);
        tot_amt=gt.getMonthlist(0,null, iSelectedMonth);
        dis_grid(tot_amt);
    }

    public void dis_grid(int total)
    {
        String    query1    =      "Select DOENTRY1,NETAMOUNT1 as _id from Invent_Month";

        Cursor     mon      =      dbase.rawQuery(query1, null);

        mon.moveToFirst();
        startManagingCursor(mon);
        SimpleCursorAdapter ada =   new SimpleCursorAdapter(this, R.layout.showlist,
                    mon, new String[] { "DOENTRY1", "_id" }, new int[] { R.id.Entry,R.id.sales });
        list_disp.setAdapter(ada);

        String       convert    =  String.valueOf(total);
        disp_amt.setText(convert);
    }

    public class MyOnItemSelectedListener implements OnItemSelectedListener 
    {
        public void onItemSelected(AdapterView<?> parent,View view, int pos, long id) 
        {
            spintext=parent.getItemAtPosition(pos).toString();

            /*Toast.makeText(parent.getContext(), "The planet is " +
            parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG).show();*/
        }

        public void onNothingSelected(AdapterView parent) 
        {
            // Do nothing.
        }
    }
} 
```

## 原木猫：

```
06-15 16:26:27.328: E/AndroidRuntime(320): FATAL EXCEPTION: main
06-15 16:26:27.328: E/AndroidRuntime(320): java.lang.StackOverflowError
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.ByteBuffer.<init>(ByteBuffer.java:128)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.BaseByteBuffer.<init>(BaseByteBuffer.java:26)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:49)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:41)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.ReadWriteHeapByteBuffer.<init>(ReadWriteHeapByteBuffer.java:43)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.BufferFactory.newByteBuffer(BufferFactory.java:38)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.ByteBuffer.wrap(ByteBuffer.java:82)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.charset.CharsetEncoder.isLegalReplacement(CharsetEncoder.java:646)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.charset.CharsetEncoder.replaceWith(CharsetEncoder.java:752)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.charset.CharsetEncoder.<init>(CharsetEncoder.java:184)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.ibm.icu4jni.charset.CharsetEncoderICU.<init>(CharsetEncoderICU.java:75)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.ibm.icu4jni.charset.CharsetICU.newEncoder(CharsetICU.java:74)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.charset.Charset.encode(Charset.java:692)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.nio.charset.Charset.encode(Charset.java:713)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.io.File.newCString(File.java:214)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.io.File.init(File.java:205)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.io.File.<init>(File.java:175)
06-15 16:26:27.328: E/AndroidRuntime(320):  at java.io.File.<init>(File.java:142)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.IVScreen.Databasecreation.createDirIfNotExists(Databasecreation.java:67)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.IVScreen.Databasecreation.getExternalStorageSdCard(Databasecreation.java:34)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.IVScreen.Databasecreation.<init>(Databasecreation.java:21)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.clssfile.GetDetails.<init>(GetDetails.java:19)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.IVScreen.WeekActivity.<init>(WeekActivity.java:22)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.clssfile.GetDetails.<init>(GetDetails.java:20)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.IVScreen.WeekActivity.<init>(WeekActivity.java:22)
06-15 16:26:27.328: E/AndroidRuntime(320):  at com.experts.clssfile.GetDetails.<init>(GetDetails.java:20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:48:53.410

我从 Get Details 类文件中意识到了我的错误。在那个文件上，我导入了太多的类。所以活动进入堆栈溢出。

# validation - no result input found 错误，即使使用 SkipValidation

> ID：11050025
> 
> 赞同：0
> 
> 时间：2012-06-15T11:41:19.827
> 
> 标签：validation, struts2

我的操作类中有一个**validate()**方法和两个执行方法，一个用于准备表单，另一个用于提交和重定向到另一个页面。我的动作类如下：

```
 @SkipValidation
    public String execute()
    {
        return "success";
    }

    public String execute2()
    {
       return "success";
    } 
```

而我的struts.xml如下：

```
 <action name="EmpForm" class="actions.EmployeeAction">
             <result>/EmployeeForm.jsp</result> 
        </action>

        <action name="EmployeeDetails" class="actions.EmployeeAction" method="execute2">
            <result>/EmpDetails.jsp</result>
            <result name="input">/EmployeeForm.jsp</result>
        </action> 
```

当调用 EmpForm 操作时，我收到一条错误`No result defined for action actions.EmployeeAction and result input` 消息，提示为什么即使我有一个 @SkipValidation，它仍然需要一个`<result name="input">`？此外，即使我给出这样的结果，我也会得到同样的错误。关于问题所在的任何指示？

* * *

完整的错误堆栈跟踪如下：

```
com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:345)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:44)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.intercept(ParametersInterceptor.java:161)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.intercept(PrepareInterceptor.java:115)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:507)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
java.lang.Thread.run(Unknown Source) 
```

基本上它正在进入 validate() 方法，即使它不应该因为注释存在。

# c# - 创建一个显示更新通知的 NuGet 包

> ID：11050030
> 
> 赞同：6
> 
> 时间：2012-06-15T11:41:37.637
> 
> 标签：c#, .net, powershell, nuget

我正在创建一个 NuGet 包，并且我希望包在存储库（这是一个私有存储库，而不是官方 NuGet 存储库）中存在该包的更新时显示通知。

请注意，我不希望软件包自动更新（以防新版本可能引入一些问题），而只是通知用户。

为此，我`init.ps1`在包中的文件中添加了这个：

```
param($installPath, $toolsPath, $package, $project)
$PackageName = "MyPackage"
$update = Get-Package -Updates | Where-Object { $_.Id -eq $PackageName }
if ($update -ne $null -and $update.Version -gt $package.Version) {
    [System.Windows.Forms.MessageBox]::Show("New version $($update.Version) available for $($PackageName)") | Out-Null
} 
```

需要检查`$update.Version -gt $package.Version`以避免在安装较新的软件包时显示通知。

我想知道是否

1.  这个解决方案是可以接受的，或者如果有更好的“标准”方法来做到这一点（而不是酿造我自己的解决方案）。
2.  有一种更好的方法来显示通知，因为`MessageBox`它相当烦人：当我打开项目时它隐藏在“准备解决方案”对话框的后面，并且在我单击确定之前操作不会完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:22:26.953

最后，我发现没有比通过`init.ps1`文件更好的方式来显示通知了。
我还发现只有在包管理器控制台可见时才会运行初始化脚本，这对于此目的并不完全理想，但我仍然找不到更好的东西。

关于通知用户的方式，我找到了一些方法，我将它们发布在这里，以防它们对其他人有用。

```
param($installPath, $toolsPath, $package, $project)
if ($project -eq $null) {
    $projet = Get-Project
}

$PackageName = "MyPackage"
$update = Get-Package -Updates -Source 'MySource' | Where-Object { $_.Id -eq $PackageName }
# the check on $u.Version -gt $package.Version is needed to avoid showing the notification
# when the newer package is being installed
if ($update -ne $null -and $update.Version -gt $package.Version) {

    $msg = "An update is available for package $($PackageName): version $($update.Version)"

    # method 1: a MessageBox
    [System.Windows.Forms.MessageBox]::Show($msg) | Out-Null
    # method 2: Write-Host
    Write-Host $msg
    # method 3: navigate to a web page with EnvDTE
    $project.DTE.ItemOperations.Navigate("some-url.html", [EnvDTE.vsNavigateOptions]::vsNavigateOptionsNewWindow) | Out-Null
    # method 4: show a message in the Debug/Build window
    $win = $project.DTE.Windows.Item([EnvDTE.Constants]::vsWindowKindOutput)
    $win.Object.OutputWindowPanes.Item("Build").OutputString("Update available"); 
    $win.Object.OutputWindowPanes.Item("Build").OutputString([Environment]::NewLine)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:14:27.160

[我有一个名为“ Wolfpack](http://wolfpack.codeplex.com/) ”的开源 .net 监控解决方案，其中一个插件允许您监控一个或多个 NuGet 包的更新。您也可以跨多个提要进行跟踪。

可能有点矫枉过正，但它会完成这项工作。您还可以通过电子邮件、咆哮或滚动您自己的通知机制获得通知。

这个插件的说明在这里：[http ://wolfpackcontrib.codeplex.com/wikipage?title=WolfPack.Contrib.Checks.NuGet&referringTitle=Home](http://wolfpackcontrib.codeplex.com/wikipage?title=WolfPack.Contrib.Checks.NuGet&referringTitle=Home)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:54:23.857

1.  真的一点毛病都没有……
2.  您可以使用 Write-Host 将其推送到包管理器控制台。

# javascript - 带有条件的jQuery toggleClass

> ID：11050034
> 
> 赞同：2
> 
> 时间：2012-06-15T11:41:53.443
> 
> 标签：javascript, jquery, toggleclass

有谁知道如何以更简洁的单行格式编写以下内容？我确信这是可能的，但不能走得太远。

```
if($('#myDiv').hasClass('hidden')){
   $('#myDiv').toggleClass('shown hidden');
} 
```

基本上只在一个方向上执行切换。

非常感谢，

汤姆。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T11:45:12.043

```
$('#myDiv.hidden').toggleClass('shown hidden'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:45:35.770

也许你可以打电话`$('#myDiv').removeClass('hidden').addClass('shown')`（和相应的逆）。如果它在那里，它将删除`.hidden`，如果它还没有，则添加`.shown`。

# iphone - 如何在iphone视图中的两个点击点之间绘制自动线

> ID：11050037
> 
> 赞同：2
> 
> 时间：2012-06-15T11:42:28.983
> 
> 标签：iphone, ios, ios4, xcode4

在用户点击两个不同的点后，我们如何自动绘制一条线。这条线应该连接这两个不同的点。

应该使用什么框架和方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:03:37.940

`CGPoint`您可以借助该`touchedEnded`方法（[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesEnded%3awithEvent%3a)）将触摸的位置存储在两个不同的位置。

然后，当你有你的两个点时，你可以添加一个新的 UIView 作为子视图，它知道这两个点`CGPoint`并将在其`drawRect`方法中画一条线。或者在当前视图中执行它，通过调用`[view setNeedsDisplay]`来触发它自己的`drawRect`方法。

* * *

如果你不知道如何用 CoreGraphics 画一条简单的线，这里是开始：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextSetStrokeColorWithColor(context, [[UIColor blackColor]CGColor]);
    CGContextSetLineWidth(context, 1.0);
    CGContextMoveToPoint(context, startPoint.x, startPoint.y);
    CGContextAddLineToPoint(context, endPoint.x, endPoint.y);
    CGContextStrokePath(context);
    CGContextRestoreGState(context); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:54:12.240

您应该为此使用 UIBezierPath。如果你给点官方文档在 [这里，它可以绘制直线曲线](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)

也检查[这里](https://stackoverflow.com/questions/7393058/how-do-i-use-uibezierpath-to-draw-a-line-that-follows-a-touch-event)

# c# - 关于“冲突”二进制格式的快速二进制读写问题

> ID：11050038
> 
> 赞同：1
> 
> 时间：2012-06-15T11:42:34.553
> 
> 标签：c#, matlab, file-io, binary, memory-mapping

我正在努力处理二进制（文件）数据（在 c# 中）。这是这种情况：

*   我有一个可以小至 1 MB 和大至 60 GB 的二进制文件，因此无法装入内存（假设具有 2 GB 内存的慢速笔记本电脑，运行 32 位和 64 位窗口）。例如，该文件包含来自一个时基的 20 个源的数据。该文件的标题没有告诉我信号的长度，这意味着每个信号的长度可以（并且大多数情况会）不同。因此，我不知道一个信号正手包含的字节数。另请注意，数据沿文件的间距不均匀。因此，我必须在文件中搜索与相应信号样本匹配的标识符（2 个字节）。

*   其次，我需要处理这些数据并将其存储在一个新的二进制文件中。文件大小将大致相同。但是二进制格式完全不同。实际上它是一种 Matlab 二进制文件格式。

这些是挑战：

*   由于 Matlab 二进制文件需要信号头中的信号长度（以字节数给出），我需要知道正手的长度。或者，或者在最后返回写入的二进制文件并存储长度。
*   性能需要非常好。Target 正在接近硬盘的 r/w 速度，因此 CPU 时间需要较低。
*   由于数据不适合内部存储器，我需要一些分块处理。但是如何正确限制块大小，以便在不牺牲性能的同时不会出现内存溢出异常？

我已经尝试过要读取的文件的内存映射，但我坚持这一点，因为我需要沿着完整的文件搜索以了解信号的长度。

什么是完成上述工作的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:46:59.883

我会按顺序重复扫描整个输入文件。每次通过文件，我都会在内存中收集尽可能多的“信号”。一旦工作内存缓冲区已满，我会将收集到的“信号”写入输出 Matlab 文件并重新开始以在下一次通过时收集更多信号。一旦没有发现更多新信号，算法就会结束。

该算法需要对大文件的数据进行多次传递，但至少它是相当快的顺序 IO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:21:36.940

信号分离器怎么样？我会扫描一次文件并为每个新信号创建一个新文件。在读取大文件期间，我会将数据写入正确的信号文件。内存不是问题，因为您总是只从磁盘读取一个块（大约 4KB），这不会让您接近任何内存边界。

如果您需要信号之间的某种相关性，则需要将一些时间点标记插入到拆分文件中以基于时间进行分析。这也应该很容易做到。

作为额外的奖励，您确实可以通过读取其文件长度来了解信号长度，或者如果您执行基于时间的工作，我会编写一个标题，其中包含在拆分过程中找到的最终信号长度。

# objective-c - 如何使用 NSArray 和 NSDictionary？

> ID：11050040
> 
> 赞同：1
> 
> 时间：2012-06-15T11:42:51.493
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

我正在从**iTunes U学习****iOS**并尝试构建一个可编程计算器。我添加了三个变量，用户可以使用它们来分配值。我知道变量将作为对象传递，然后用户将触摸将作为传递并分配给变量的数字。我不明白如何使用这些变量并将数字分配给这些变量。对不起，我是一个完整的新手，但我现在对文档感到不舒服，所以它有点模糊！这是我在 a 上附加数字然后使用它进行计算的代码：**`NSString``NSNumbers``NSArrays``NSDictionary``UILabel`**

 **```
- (IBAction)digitPressed:(UIButton *)sender {
  NSString *digit = [sender currentTitle];
  if (self.userIsInTheMiddleOfEnteringANumber) {
    self.display.text = [self.display.text stringByAppendingFormat:digit];
    everythingBrainLabel.text = [self.everythingBrainLabel.text stringByAppendingFormat:digit];
  } else {
    self.display.text = digit;
    self.everythingBrainLabel.text = [self.everythingBrainLabel.text stringByAppendingFormat:@" %@", digit];
    self.userIsInTheMiddleOfEnteringANumber = YES;
  }  
} 
```

我可以在 an 中获取变量的值，`NSMutableArray`但是如何通过在按下变量后简单地按下数字来分配数字？我添加`NSLog`只是为了检查变量是否被传递，并且在我按下相应的变量后它们会显示在控制台中。

```
- (IBAction)variablePressed:(UIButton *)sender {
  NSString *variablePressed = [sender currentTitle];
  NSMutableArray *variableValues = [NSMutableArray arrayWithObjects:variablePressed, nil];
  for(int i = 0; i < [variableValues count]; i++) {
    NSLog(@"%@",[variableValues objectAtIndex:i]);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:08:24.243

要为特定键设置特定值，您可以将 NSMutableDictionary 添加到当前类中将其作为属性添加到您的类中并合成它现在，当您要为“x”分配值时，您可以执行以下操作

```
//Add this var in your .h file create a property around it
NSMutableDictionary *variables;
//in the .m @synthesize variables; 
```

分配变量“x”时

```
//for example you want to set varialbe "x" = 20
int xValue = 20;
NSString *xVariable = @"x";
[variables setObject:[NSNumber numberWithInt:xValue] forKey:xVariable]; 
```

获取“x”的值

```
//Later on if you want to get x
NSString *xVariable = @"x";
int xValue = [[variables valueForKey:xVariable] intValue]; 
```**

# ios - 什么是 jQuery Mobile 1.1.0 - 位置固定方法

> ID：11050041
> 
> 赞同：0
> 
> 时间：2012-06-15T11:42:55.057
> 
> 标签：ios, mobile, jquery-mobile, twitter-bootstrap, css-position

jQuery Mobile 1.1.0 Final 刚刚发布并承诺：

> “真正的固定工具栏：轻量级、基于 CSS 且广泛兼容”

[解决移动浏览器中所有](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)令人头疼的问题的*具体*解决方法是什么？`position:fixed`

我有一个桌面应用程序（基于 Twitter 引导程序），它的位置：固定工具栏在移动浏览器上效果不佳？我想在没有所有其他功能和 CSS jQuery Mobile 的情况下合并特定修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:01:12.183

容易（或多或少）：

1）浏览器嗅探生成黑名单。
2) Position:fixed 支持浏览器
3) Position:static 其余

在 JQM 中查找此部分：

$.widget("mobile.fixedtoolbar", $.mobile.widget, {...}

由于目前许多移动浏览器不支持 pos:fix，因此在许多浏览器中，您最终会在内容底部看到静态工具栏！！！

还有一个[polyfill](https://github.com/filamentgroup/jQuery-Mobile-FixedToolbar-Legacy-Polyfill)可以恢复以前的行为（隐藏重新定位显示）。

我只是使用这个 polyfill 的一部分来重新定位元素，然后像这样显示它们：

```
 el.jqmData("fixed") == "top" ? el.css( "top", $( window ).scrollTop() + "px" ) :
    el.css( "bottom", wrap.outerHeight() - $( window ).scrollTop() - $.mobile.getScreenHeight() + "px" ); 
```

如果您的工具栏/元素不必可见，这很好用，因为它从设定位置（scroll-stop-recalcualte）与原始固定工具栏（JQM 1.1 之前）**在滚动期间**重新计算（scroll-calculate-scroll-计算），这对设备硬件造成了太大的压力，并导致工具栏卡住或跳跃。

# c - 基于文本创建窗口

> ID：11050047
> 
> 赞同：0
> 
> 时间：2012-06-15T11:43:21.117
> 
> 标签：c, winapi

我想知道，我如何创建一个简单的窗口，基于一个写在 txt 文件上的“窗口”，或者更好的是，我如何获得这个“窗口”的大小，以像素、高度和宽度为单位，并得到标题。

![在此处输入图像描述](../Images/36cd2ff395ddd0b46c1d72c859ea38ac.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:56:33.260

您可以计算每个“ **|** ”和“ **-** ”以像素为单位有多少，并将其与您在每个“部分”中找到的数量相乘，然后您只需使用此信息创建窗口，并获得窗口标题，您可以简单地搜索字母字符，因为只有标题和“|” 除此之外还有“-”。

# c# - 如何为 EntityFramework 或其依赖项之一正确设置程序集？

> ID：11050048
> 
> 赞同：0
> 
> 时间：2012-06-15T11:43:21.263
> 
> 标签：c#, entity-framework, ninject

尝试使用 Ninject 运行 MVC 3 + EntityFramework 项目并出现错误：

```
 Could not load file or assembly 
'EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 
or one of its dependencies. 
The located assembly's manifest definition does not match 
the assembly reference. (Exception from HRESULT: 0x80131040) 
```

代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.Web.Routing;
    using Moq;
    using Ninject;
    using SportsStore.Domain.Abstract;
    using SportsStore.Domain.Entities;
    using SportsStore.Domain.Concrete;

    namespace SportsStore.WebUI.Infrastructure
    {
        public class NinjectControllerFactory : DefaultControllerFactory
        {
            private IKernel ninjectKernel;
            public NinjectControllerFactory()
            {
                ninjectKernel = new StandardKernel();
                AddBindings();
            }
            protected override IController GetControllerInstance(RequestContext requestContext,
            Type controllerType)
            {
                return controllerType == null
                ? null
                : (IController)ninjectKernel.Get(controllerType);
            }
.....
} 
```

网页配置

```
..
<configuration>
<configSections>
 <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
....
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

努吉特 ![在此处输入图像描述](../Images/0f0a14446b59f2d4900ef0aab3123cef.png)

# mysql - MySQL 自动重命名结果集

> ID：11050051
> 
> 赞同：1
> 
> 时间：2012-06-15T11:43:31.743
> 
> 标签：mysql

![在此处输入图像描述](../Images/55d68068cd314c81f6d9858355ab4d91.png)在测试项目以进行后端验证和输入时，我在 mysql Query 浏览器中打开了大约 30-40 个结果集。即使我从后端输入数据并在 UI 中进行验证。现在我手动将结果集重命名为表名。由于有很多表（大约 700 个），我需要经常在表之间切换。重命名任务很耗时。有没有办法自动将结果集重命名为选定的表名。

# apache - 重写规则（页面没有获取值）

> ID：11050054
> 
> 赞同：0
> 
> 时间：2012-06-15T11:43:40.303
> 
> 标签：apache, url, include, rewrite

亲爱的 Stackoverflowers，

我正在尝试重写功能，所以我在互联网上阅读了一些关于它是如何工作的。显然，我想不通，所以我决定使用这个[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/) Web 应用程序为我编写一个。但是如果我现在使用它，我会显示我的页面，但不会显示工作样式表、$_GET 值和包含。

我的原始链接：[http ://web.awitgoed.nl/artikelen.php?c=stofzuigers](http://web.awitgoed.nl/artikelen.php?c=stofzuigers)

我想要的那个：[http ://web.awitgoed.nl/artikelen/stofzuigers.html](http://web.awitgoed.nl/artikelen/stofzuigers.html)

这是我从生成器得到的代码：

```
RewriteEngine On
RewriteRule ^artikelen/([^/]*)\.html$ /artikelen.php?c=$1 [L] 
```

我想问题是'artikelen'末尾的斜线，因为它认为它是一个子目录或什么？文件“artikelen.php”位于根目录中。

提前致谢， 德拉诺

* * *

更新：所以我决定在我的本地主机上试一试，感谢 Matthew，现在视觉效果很好，但参数 ($_GET) 仍然没有通过。是否需要更改任何服务器端设置才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:56:16.823

您需要在页面中添加前导斜杠，以便它从根开始，所以

```
<script src="javascript/jquery.js"></script> 
```

会成为

```
<script src="/javascript/jquery.js"></script> 
```

# android - 从android中的表格布局中动态删除行

> ID：11050059
> 
> 赞同：2
> 
> 时间：2012-06-15T11:43:58.197
> 
> 标签：android, android-tablelayout

我有一个`TableLayout`我动态添加行的。在每一行中都有 2 个元素，其中一个是`TextView`other is `Button`。当我单击一行中存在的按钮时，应该删除该行。这如何在 Android 中完成？如何查找 rowid 以及如何动态删除一行。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:52:40.027

onClick 按钮将为您提供单击的视图，即您的情况下的按钮。该按钮的父级是您要删除的行。从它的父行中删除该行将摆脱它。

如何实现此功能的示例：

```
 button.setOnClickListener(new OnClickListener()
    {
        @Override public void onClick(View v)
        {
            // row is your row, the parent of the clicked button
            View row = (View) v.getParent();
            // container contains all the rows, you could keep a variable somewhere else to the container which you can refer to here
            ViewGroup container = ((ViewGroup)row.getParent());
            // delete the row and invalidate your view so it gets redrawn
            container.removeView(row);
            container.invalidate();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:46:29.763

您需要为动态添加行分配 ID，并使用它可以获取该特定行的值，或者您也可以删除单击行按钮的行。

在 onCreate() 中：-

```
addButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mTable.addView(addRow(mInput.getText().toString()));
                }
            });

 private TableRow addRow(String s) {
            TableRow tr = new TableRow(this);
            tr.setId(1000 + sCount);
            tr.setLayoutParams(new TableLayout.LayoutParams(
                    TableLayout.LayoutParams.FILL_PARENT,
                    TableLayout.LayoutParams.WRAP_CONTENT));
            TableRow.LayoutParams tlparams = new TableRow.LayoutParams(
                    TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT);
            TextView textView = new TextView(this);
            textView.setLayoutParams(tlparams);
            textView.setText("New text: " + s);
            tr.addView(textView);
            TableRow.LayoutParams blparams = new TableRow.LayoutParams(
                    TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT);
            final Button button = new Button(this);
            button.setLayoutParams(blparams);
            button.setText(" - ");
            button.setId(2000 + sCount);
            button.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {               
                    mTable.removeView(findViewById(v.getId() - 1000));
                }           
            });
            tr.addView(button);
            sCount++;
            return tr;
    } 
```

表格布局：-

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/parent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <Button
            android:id="@+id/add"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <TableLayout
            android:id="@+id/table1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TableLayout>
    </LinearLayout>

</ScrollView> 
```

# .net - 一个参数未提供异常

> ID：11050060
> 
> 赞同：0
> 
> 时间：2012-06-15T11:43:59.203
> 
> 标签：.net, sql

当我通过提供用户名和密码登录时，出现异常：

> “参数化查询 '(@username nvarchar(4000),@password12 nvarchar(4000))SELECT me' 需要参数 '@username'，但未提供该参数。”

通过代码：

```
public DataSet showoption1(seter set)
{         
   string sql = "SELECT   menue.menuename,roleid, [right].rightname,        
     role.rolename, employee.employeename, employee.password FROM  [right] INNER JOIN 
     permission ON [right].rightid = permission.rightid INNER JOIN  role ON  
     permission.roleid   = role.roleid INNER JOIN emp_men INNER JOIN employee ON 
     emp_men.employeeid = employee.employeeid ON role.roleid = employee.roleid 
     INNER JOIN menue ON emp_men.menueid = menue.menueid 
     where employee.employeenamee=@username 
     AND employee.password=@password12";

   SqlCommand cmd = new SqlCommand(sql, con);
   cmd.Parameters.AddWithValue("@username",set.Username);
   cmd.Parameters.AddWithValue("@password12",set.Password);
   SqlDataAdapter adptr = new SqlDataAdapter(cmd);

   DataSet ds = new DataSet();
   adptr.Fill(ds);
   int id=  Convert.ToInt32( ds.Tables[2].Rows[0]["rooleid"]);

   st.Username=  Convert.ToString(ds.Tables[2].Rows[id]["roolename"]);

   adptr.Dispose();

   return ds;

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:51:32.133

由于 DB 参数的工作方式很奇怪，如果`set.Username`是`null`. 所以：检查是否`set.Username`is `null`，并且在这种情况下可能会引发异常（因为`null`用户名听起来像是错误）。

```
if(string.IsNullOrWhiteSpace(set.Username))
    throw new InvalidOperationException("No username was provided"); 
```

在更一般的情况下，如果您**确实**想通过`null`，则必须`DBNull.Value`改用，即：

```
object username = set.Username;
if(username == null) username = DBNull.Value;
cmd.Parameters.AddWithValue("@username", username); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:54:42.637

您有两个 INNER JOIN 背靠背而没有相应的 ON...这会导致解析错误吗？？？

```
SELECT   
      menue.menuename,
      roleid, 
      [right].rightname,
      role.rolename, 
      employee.employeename, 
      employee.password 
   FROM  
      [right] 
         INNER JOIN permission 
            ON [right].rightid = permission.rightid 
            INNER JOIN role 
               ON  permission.roleid   = role.roleid 
               INNER JOIN employee 
                  ON role.roleid = employee.roleid 
                  INNER JOIN emp_men 
                     ON emp_men.employeeid = employee.employeeid 
                     INNER JOIN menue 
                        ON emp_men.menueid = menue.menueid 
   where 
          employee.employeenamee = @username 
      AND employee.password=@password12"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:57:00.453

我认为最可能的解释`set.Username`是空值。

使用调试器单步执行并检查值。

# web-applications - 使用 XULRunner 部署完成的 HTML Web 应用程序？

> ID：11050061
> 
> 赞同：1
> 
> 时间：2012-06-15T11:44:02.107
> 
> 标签：web-applications, xul, xulrunner

我们已经完成了一个用 HTML+JS 编写的 Web 应用程序。它适用于 Chrome 的 Web App 模式（只要禁用 SOP，以允许来自 file:// URI 的 JSON 请求），但我真的不想将自己限制为 Chrome 作为唯一选项（特别是因为 Windows 部署可以痛苦）。

如何使用 XULRunner 部署此应用程序？整个 UI 已经实现，所以 XUL 代码应该尽可能少（基本上是“这里是站点，渲染它，并允许 AJAX 请求到 $domain”）。是否有一些教程如何做到这一点？我发现的那些都专注于纯 XUL 应用程序……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:49:37.580

XULRunner 旨在运行基于 XUL 的应用程序，因此关注它们的文档没有错。但是，如果您只需要该应用程序来显示 Web 应用程序，那么您的 XUL 应用程序可能非常简单。基本上，您唯一的 XUL 文件如下所示：

```
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>

<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    title="My Web App"
    id="webapp-window"
    width="800"
    height="600"
    persist="screenX screenY width height sizemode">
  <browser type="content-primary"
      src="index.html"
      flex="1"
      disablehistory="true"/>
</window> 
```

这是一个会记住它的大小和位置的窗口以及一个完全填充它的浏览器元素。供参考：[`<xul:window>`](https://developer.mozilla.org/en/XUL/window), [`<xul:browser>`](https://developer.mozilla.org/en/XUL/browser).

该`chrome.manifest`文件将如下所示：

```
content webapp content/ 
```

这将`content/`子目录声明为对应于`chrome://webapp/content/`- 您将放置主 XUL 文件和实际 Web 应用程序的位置。由于`chrome://`使用了协议，Web 应用程序将以完全权限运行，这意味着它可以`XMLHttpRequest`在任何域上使用（以完全权限运行 Web 应用程序在安全方面并不好，但这是禁用相同权限的最简单方法-原产地政策）。

最后是`defaults/preferences/prefs.js`告诉 XULRunner 在启动时打开哪个窗口的文件：

```
pref("toolkit.defaultChromeURI", "chrome://webapp/content/main.xul"); 
```

这已经差不多了。查看有关`application.ini`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T15:16:26.223

我建议您查看[Webapp XUL Wrapper](https://github.com/neam/webapp-xul-wrapper)。从自述文件：

Webapp XUL Wrapper 是一个构建脚本的集合，用于将 webapp 打包到 Mac、Windows 和 Linux 的可分发包中。

最终结果是您的 Web 应用程序的独立和离线版本。

包含在分发包中：

*   带有主浏览器窗口和关于对话框的最小 XUL 应用程序
*   捆绑的[HTTP 服务器](https://developer.mozilla.org/en-US/docs/Httpd.js/HTTP_server_for_unit_tests)
*   XULRunner 17 (壁虎 17)

# android - 将路径上绘制的文本与 Direction.CCW 对齐

> ID：11050064
> 
> 赞同：2
> 
> 时间：2012-06-15T11:44:12.913
> 
> 标签：android, android-view

我有在路径上绘制的文本

```
path.addRect(left, pathTop, left + widthPart, pathBottom, Direction.CCW);
c.drawTextOnPath(text, path, 0, 0, textPaint); 
```

现在这个文本像左下角一样对齐。我想将此文本居中垂直对齐。我该怎么做？我试过使用缩进

```
( pathTop - pathBottom - textInRect.width )/2 
```

，但有时它不在中心位置。

# android - 单击按钮时以编程方式关闭蓝牙可发现状态

> ID：11050067
> 
> 赞同：3
> 
> 时间：2012-06-15T11:44:38.410
> 
> 标签：android, button, bluetooth, discoverability

我们如何以编程方式关闭蓝牙可发现状态。

在第一次点击（按钮）时，我可以让它被发现，第二次点击同一个按钮它不起作用

我的意思是，如果它处于可发现状态，我应该让它离开

这是我的代码

```
 bt_strength.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        //  if (mBtAdapter.getScanMode()!= BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE)
            if(!mBtAdapter.isDiscovering())
            {
                // if(bluetoothimg.getTag().toString().equalsIgnoreCase("off"))
                Log.i(TAG, "BLUETOOTH STATUS ON");
                bt_strength.setImageResource(R.drawable.bt);
                 Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                    discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 3600);
                    startActivity(discoverableIntent);  
            } 
            else if(mBtAdapter.isDiscovering()){

                bt_strength.setImageResource(R.drawable.bt_grey);
                // Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
               //     discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 1);
                //    startActivity(discoverableIntent);    
                mBtAdapter.cancelDiscovery();

            } 
```

任何帮助总是很感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:55:25.950

您在 if 子句中所做的是启用可发现模式 - 这意味着您的设备可以被其他蓝牙设备看到。

但是您在 else-if-clause 中所做的事情是取消发现 - 这意味着您停止搜索其他设备。

你现在写的评论（在 else-if 子句中）应该是最好的工作，虽然不是完美的解决方案，关于： [在 Android 上禁用蓝牙可发现模式](https://stackoverflow.com/questions/2938421/disable-bluetooth-discoverable-mode-on-android)

# javascript - jQuery - Jon Leighton 的 .date_input() - 如何获取 UNIX 时间？

> ID：11050068
> 
> 赞同：0
> 
> 时间：2012-06-15T11:44:40.510
> 
> 标签：javascript, jquery, datepicker

我使用[Jon Leighton 的 .date_input() 日期选择器](http://jonathanleighton.com/projects/date-input/)来处理日期。除了我在 UNIX 时间戳中存储日期之外，我还应该以标准的“2012 年 6 月 15 日”格式在页面中显示日期。我使用以下代码初始化日期输入：

```
$("#my_specific_input").date_input(); 
```

当我选择日期时，它存储 2012 年 6 月 15 日。我需要 POST 到后端 UNIX 时间戳，但是

```
$("#my_specific_input").val() 
```

仅包含“2012 年 6 月 15 日”。您如何看待，除了为 '15 Jun 2012'-format 编写我自己的解析器之外，还有其他变体可以将时间戳发送到后端吗？

谢谢

ps是的，我知道这个插件不再维护，标准的jQueryUI datepicker更加灵活，但是我被迫完全使用这个，不要问我为什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:05:31.580

[你如何在 JavaScript 中获得时间戳？](https://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript)

```
Math.round(new Date($("#my_specific_input").val()).getTime() / 1000) 
```

# facebook - 使用 Facebook IOS SDK 发布到朋友墙

> ID：11050070
> 
> 赞同：1
> 
> 时间：2012-06-15T11:44:58.453
> 
> 标签：facebook, facebook-graph-api, ios5, sdk

我正在使用 Facebook IOS SDK，我想为我当前更新的应用程序获得最大的曝光率。

如果用户尚未连接，则应用程序会在应用程序加载时提示用户连接 facebook。如果用户随后连接，我使用以下代码将帖子发送到用户墙。

```
NSMutableDictionary *params = [NSMutableDictionary  dictionaryWithObjectsAndKeys:
                               @"http://itunes.apple.com/us/app/video-fx+/id530087007",@"link",
                               @"Video FX+ Live Video Editing",@"name",
                               @"Video FX+ is a fun, creative way to create stunning videos.",@"caption",
                               nil];
[self.facebook requestWithGraphPath:@"/me/feed"
                      andParams:params
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

这是最好的方法吗？理想情况下，我希望帖子出现在已登录用户的朋友墙上。

上述工作是否可行，或者我是否需要提取用户朋友列表，然后遍历该列表并将消息发布给每个单独的用户？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:47:05.117

看一下这个

```
 NSMutableDictionary *params = [NSMutableDictionary  dictionaryWithObjectsAndKeys:
                                   @"http://itunes.apple.com/us/app/video-fx+/id530087007",@"link",
                                   @"Video FX+ Live Video Editing",@"name",
                                   @"Video FX+ is a fun, creative way to create stunning videos.",@"caption",
                                   nil];
    [self.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed",friendFacebookID]
                          andParams:params
                      andHttpMethod:@"POST"
                        andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:19:18.127

发布到您自己的提要，可能会将该提要显示给您的所有在线朋友（有时取决于您的朋友选择的 Facebook 最新/热门故事），因此他们很可能会错过它。

另一方面，首先通过拉动所有朋友（我/朋友）并遍历所有朋友并逐个发布消息来向所有朋友发帖，不推荐，因为一个人可能有 5000 个朋友并发布 5000 个墙贴可能会被禁止/ 报告垃圾邮件您的应用程序。

所以，最好贴在自己的墙上。

# java - 如何检查“单选按钮”是否被选中？

> ID：11050074
> 
> 赞同：11
> 
> 时间：2012-06-15T11:45:17.150
> 
> 标签：java, android, radio-button, selected, checked

我想用条件（if-else）制作一个结构`RadioButton`

我希望在选择 Radiobutton *RB1*时，此功能处于活动状态：

```
regAuxiliar = ultimoRegistro; 
```

And when the radiobutton *RB2* is selected, this function is active:

```
regAuxiliar = objRegistro; 
```

对不起我的英语，我是巴西人。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T11:48:23.433

就像使用 CheckBox 一样

```
RadioButton rb;

rb = (RadioButton) findViewById(R.id.rb);

rb.isChecked(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-31T20:28:25.403

```
 if(jRadioButton1.isSelected()){
            jTextField1.setText("Welcome");
        }
        else if(jRadioButton2.isSelected()){
            jTextField1.setText("Hello");
        } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-15T11:49:04.997

您还可以根据侦听器维护一个标志值，

```
 radioButton.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {

                //handle the boolean flag here. 
                  if(arg1==true)
                         //Do something

                else 
                    //do something else

            }
        }); 
```

或者`isChecked()`也可以简单地用于检查 RadioButton 的状态。

这是一个示例的链接，

[http://www.mkyong.com/android/android-radio-buttons-example/](http://www.mkyong.com/android/android-radio-buttons-example/)

然后根据标志你可以执行你的功能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-15T11:47:28.543

`radiobuttonObj.isChecked()`会给你布尔值

```
if(radiobuttonObj1.isChecked()){
//do what you want 
}else if(radiobuttonObj2.isChecked()){
//do what you want 
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-21T17:58:14.647

如果您需要浓缩咖啡测试，解决方案如下：

```
onView(withId(id)).check(matches(isChecked())); 
```

再见，

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-15T11:47:59.950

`radioButton.isChecked()`如果选择了 Radion 按钮，函数返回 true，否则返回 false。

[资源](http://developer.android.com/reference/android/widget/RadioButton.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-05T13:48:07.987

简单的解决方案

```
radioSection.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
          @Override
          public void onCheckedChanged(RadioGroup group1, int checkedId1) {
              switch (checkedId1) {
                  case R.id.rbSr://radiobuttonID
                      //do what you want
                      break;
                  case R.id.rbJr://radiobuttonID
                      //do what you want
                      break;
              }
          }
      }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-19T05:43:18.157

您可以像这样使用开关：

XML 布局

```
<RadioGroup
            android:id="@+id/RG"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <RadioButton
                android:id="@+id/R1"
                android:layout_width="wrap_contnet"
                android:layout_height="wrap_content"
                android:text="R1" />

            <RadioButton
                android:id="@+id/R2"
                android:layout_width="wrap_contnet"
                android:layout_height="wrap_content"
                android:text="R2" />
</RadioGroup> 
```

和 JAVA 活动

```
switch (RG.getCheckedRadioButtonId()) {
        case R.id.R1:
            regAuxiliar = ultimoRegistro;
        case R.id.R2:
            regAuxiliar = objRegistro;
        default:
            regAuxiliar = null; // none selected
    } 
```

您还需要使用按钮或 setOnCheckedChangeListener 函数实现 onClick 函数以获取所需的功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-05T14:23:28.267

检查是否使用`el.checked`属性检查了它们。

[文档](https://developer.mozilla.org/en-US/docs/Web/API/RadioNodeList/value)或这个[问题](https://stackoverflow.com/questions/901712/how-do-i-check-whether-a-checkbox-is-checked-in-jquery)

```
let radio1 = document.querySelector('.radio1');
let radio2 = document.querySelector('.radio2');
let output = document.querySelector('.output');

function update() {
  if (radio1.checked) {
    output.innerHTML = "radio1";
  }
  else {
    output.innerHTML = "radio2";
  }
}

update();
```

```
<div class="radios">
  <input class="radio1" type="radio" name="radios" onchange="update()" checked>
  <input class="radio2" type="radio" name="radios" onchange="update()">
</div>
<div class="output"></div>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-03T17:43:00.230

这对我有用：

```
 Espresso.onView(ViewMatchers.withId(R.id.radiobutton)).check(ViewAssertions.matches(isChecked())) 
```

# objective-c - CIFaceFeature 点不正确

> ID：11050079
> 
> 赞同：5
> 
> 时间：2012-06-15T11:45:38.557
> 
> 标签：objective-c, ios, xcode, face-detection

这只是我尝试过的一些非常标准的代码。我要做的是将两个眼球和一张嘴放在一个非常稳定的肖像图像上。这是我尝试过的：

```
 CIImage *image = [CIImage imageWithCGImage: [tim.image CGImage]];

CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options: [NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey: CIDetectorAccuracy]];

NSArray *feats = [detector featuresInImage: image];

for (CIFaceFeature *faceFeature in feats) {

    if (faceFeature.hasLeftEyePosition) {

        eyeLeft.center = faceFeature.leftEyePosition;
    }

    if (faceFeature.hasRightEyePosition) {

        eyeRight.center = faceFeature.rightEyePosition;
    }

    if (faceFeature.hasMouthPosition) {

        moth.center = faceFeature.mouthPosition;
    }
} 
```

问题是我的图像确实翻译了它们的中心，但是到了一个非常尴尬的位置（AKA 不是正确的位置）！尽管它们确实以正确的距离关系出现，但嘴在顶部。这意味着有：

上面有一张嘴，下面几厘米有两个相隔几厘米的眼球。所以它们根据图像视图正确缩放，它们只是在错误的地方

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T11:58:46.900

`CIImage`坐标系`UIImage`是逆的，所以你必须翻译坐标。例如：

```
CGPoint ciMmouthCenter = faceFeature.mouthPosition;
CGPoint uiMmouthCenter;
uiMouthCenter.x = tim.image.size.width - ciMouthCenter.x;
uiMouthCenter.y = tim.image.size.height - ciMouthCenter.y; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T22:06:11.623

您应该使用苹果的“SquareCam”应用程序。它将一个正方形放置在任何方向的前后摄像头的正确位置。对于我的应用程序，我只是从确定“faceRect”的“SquareCam”中删除了代码。对于mouthPosition，我沿 faceRect 插入 x 值和 y 值的百分比。

# sap - 是否可以在另一个窗口中打开有关 SAP 对象的更多信息（双击）？

> ID：11050080
> 
> 赞同：-1
> 
> 时间：2012-06-15T11:45:50.957
> 
> 标签：sap

SAP 中的大多数对象都可以双击以在同一窗口中获取更多信息。

是否可以在不替换当前窗口的情况下在新窗口（模式）中打开该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:24:18.363

双击与许多其他事件一样，无论何时双击某个地方发生的任何事情都是由编写应用程序的人编写的。因此，除非那个人或一群人通过某种特定于应用程序的设置指定一种打开新窗口的方法，否则不可能总是打开一个新模式。没有系统范围的开关或每个用户设置或类似的东西。

# php - 自定义帖子页面模板

> ID：11050082
> 
> 赞同：0
> 
> 时间：2012-06-15T11:46:21.990
> 
> 标签：php, wordpress

我遇到了这个脚本的问题，它应该在查看自定义帖子页面时加载自定义模板。

我已经放置了一个 echo 命令来确保 url 是正确的，但我什至没有回显 url。

```
function da_custom_post_type_template($single_template) {
     global $post;

     if ($post->post_type == 'include') {

          $single_template = PLUGIN_PATH. 'template/custom_template.php';
     }
     echo $single_template;
     return $single_template;
}
add_filter( "single_template", "da_custom_post_type_template" ) ; 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:05:39.683

实际上，您仍然可以过滤单个模板。它仍然存在于`wp-includes/template.php`.

~~我看不出你的功能有什么问题。您确定模板文件存在吗？~~

编辑：

尝试这个：

```
function da_custom_post_type_template( $template ) {
    global $post;

    if ($post->post_type == 'include') {
        $template = dirnamr( __FILE__ ) . '/template/custom_template.php';
    }
    return locate_template( $template );
}
add_filter( "single_template", "da_custom_post_type_template" ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:41:50.140

把它放到 single.php 中：

```
<?php
      global $wp_query;

      $post = $wp_query->post;
      $post_type = get_query_var('post_type');

      if($post_type == 'include'){
        include(TEMPLATEPATH.'/my_post_template.php');
      }else{
        include(TEMPLATEPATH.'/default_post_template.php');
      }#end else

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:05:15.637

终于搞定了......

我重新下载了wordpress并将我的代码更改为以下...

gobal $post 似乎没有设置任何东西，所以我改用 $wp_query 。感谢 CroiOS 指出这一点。

还要感谢 CMF 为我在 word press 问题上的安装指明了正确的方向。我通过 SSH 安装了 WP，所以我想知道我是否下载了夜间构建或类似的东西..

```
function da_custom_post_type_template( $template ) {
    global $wp_query;
    if ($wp_query->post->post_type == 'include') {
      $template = PLUGIN_PATH . '/template/custom_template.php';
    }
    return $template ;
}
add_filter( "archive_template", "da_custom_post_type_template" ) ; 
```

也出于某种原因，它的类作为archive_template :)

# android - WallpaperManager.getDesiredMinimum...() 函数返回较大的值

> ID：11050086
> 
> 赞同：1
> 
> 时间：2012-06-15T11:46:41.900
> 
> 标签：android

所以，一小段代码：

```
final WallpaperManager mgr = (WallpaperManager)m_context.getSystemService(Service.WALLPAPER_SERVICE);
final int cx = mgr.getDesiredMinimumWidth();
final int cy = mgr.getDesiredMinimumHeight(); 
```

我在屏幕尺寸为 800x600 的设备上运行它。cx 的值为 1200，cy 的值为 800...与正确的比例相差不远，但比屏幕尺寸大得多。更糟糕的是，系统似乎意味着这些值——如果我将壁纸设置为较小的图像，它会放大到 1200x800，然后拍到 800x600 的屏幕上——一次扭曲、模糊和裁剪。

尝试创建一个更大的位图，带有纯色边框和中心的原始图像，工作......有点。如果我将原始图像居中在较大的边框图像上，它最终会在右下角向下。的实际屏幕。更好，但仍然不够理想。

我*可以*把我的较小的原始位图放在屏幕大小的较大区域的中心，制作墙纸管理器快乐图像。这将导致我的图像在屏幕上居中，呜呜，万岁。

所以，在这里我进入问题部分：如果我这样做会出什么可怕的事情？最终用户会做什么来显示我试图显示的图像下方和右侧的巨大边框？

# android - 如何在java中创建wsdl文件

> ID：11050088
> 
> 赞同：0
> 
> 时间：2012-06-15T11:46:50.963
> 
> 标签：android, web-services, wsdl

我是 Android 新手，我想使用 Struts 框架和 Apache Tomcat 创建一个类似于 Web 服务概念的移动应用程序，实际上是 Java EE Web 动态应用程序，所以给出如何创建 Web 服务的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:53:44.087

在您的网络中打开您的动态网络，右键单击您创建所有服务的 java 文件，倒数第二个选项是网络服务 - > 创建网络服务。创建 Web 服务后对其进行测试。

测试 WSDL：-

WebContent -> wsdl -> service.wsdl-> 右键单击​​ -> Web 服务 -> 使用服务资源管理器测试 Web 服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:48:42.533

当您使用 Apache Axis 创建 Web 服务时，它将自动为 Web 服务生成 WSDL 文件。如果您愿意，可以使用自定义 WSDL 文件而不是生成的文件。
[什么是阿帕奇轴？](http://www.javaworld.com/javaworld/jw-01-2002/jw-0125-axis.html)
[创建 Apache 轴 Web 服务的简单教程？](http://www.softwareagility.gr/index.php?q=node/21)
[从 Android 调用网络服务？](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-with-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:38:55.087

您可以使用 Axis 2 Web 服务。

你只需要知道核心java。

步骤： 1.[这里有一个简单的创建 Web 服务的教程](http://www.roseindia.net/webservices/axis2/apache-axis2-hello-world.shtml)

[**2.完成服务器后，您可以在SOAP UI**](http://www.soapui.org/)中使用 WSDL 测试服务（上面的链接中提到了如何创建它（wsdl））[](http://www.soapui.org/)

 **3.现在在android中创建一个简单的hello Webservice应用来消费这些服务（我更喜欢ksoap jar来消费服务）

使用 Web 服务的方式

```
 1.Ksoap jar

    2\. Direct Http call using HttpConnection class. 
```

我希望这有助于或至少让你开始......**

# java - 如何确定 JTabbedPane 中先前选择的选项卡是哪个？

> ID：11050092
> 
> 赞同：1
> 
> 时间：2012-06-15T11:46:59.013
> 
> 标签：java, swing, jtabbedpane

我正在使用 JTabbedPane 并希望在用户选择另一个选项卡时进行一些字段验证。可能，根据他们对消息框的回复，让他们在同一个选项卡上更正错误数据。我正在实现 ChangeListener 接口并处理 stateChanged 事件，但是 getSelectedIndex() 返回新选择的选项卡。是否有简单的方法来 1）确定哪个是先前选择的选项卡和 2）在数据验证失败的情况下阻止用户转到新选择的选项卡？无法使用 stateChanged 事件。提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:01:25.980

您需要自己跟踪用户所在的选项卡。当用户导航到新选项卡时，您会更新一个 int 字段以指示用户已打开的选项卡。

如果您的验证例程表明用户需要更正前一个选项卡中的某些数据，您可以`JTabbedPane.setSelectedIndex(int index)`在侦听器的`stateChanged(ChangeEvent e)`-method 中使用 -method 将用户返回到他之前选择的选项卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:19:35.050

嗯，你可以尝试这样的事情，它基本上是添加一个 ChangeListener 来监视当前选项卡并保留以前的选项卡选择：

```
public class JTabbedPaneExample extends JFrame {

    private JTabbedPane tabbedPane;
    private JPanel panel1, panel2, panel3;
    private int currentTabIndex = 0, previousTabIndex = 0;

    public JTabbedPaneExample() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTabbedPaneExample jTabbedPaneExample = new JTabbedPaneExample();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("JTabbedPaneExample");
        setSize(300, 300);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToContentPane(getContentPane());
        addListeners();
        //pack();
        setVisible(true);
    }

    private void addComponentsToContentPane(Container contentPane) {
        tabbedPane = new JTabbedPane();
        panel1 = new JPanel();
        panel2 = new JPanel();
        panel3 = new JPanel();
        tabbedPane.insertTab("tab1", null, panel1, null, 0);
        tabbedPane.insertTab("tab2", null, panel2, null, 1);
        tabbedPane.insertTab("tab3", null, panel3, null, 2);
        contentPane.add(tabbedPane);
    }

    private void addListeners() {
        tabbedPane.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent ce) {
                previousTabIndex = currentTabIndex;
                currentTabIndex = tabbedPane.getSelectedIndex();
                System.out.println("Current tab is:" + currentTabIndex);
                System.out.println("Previous tab is:" + previousTabIndex);
            }
        });
    }
} 
```

编辑：这是一个较新的版本，如果验证变量设置为“true”，则仅允许选项卡更改，这是通过单击按钮完成的，只是为了显示逻辑：

```
public class JTabbedPaneExample extends JFrame {

    private JTabbedPane tabbedPane;
    private JPanel panel1, panel2, panel3;
    private int currentTabIndex = 0, previousTabIndex = 0;
    private boolean valid = false;
    private JButton changeVariableBtn;

    public JTabbedPaneExample() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTabbedPaneExample jTabbedPaneExample = new JTabbedPaneExample();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("JTabbedPaneExample");
        setSize(300, 300);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToContentPane(getContentPane());
        addListeners();
        //pack();
        setVisible(true);
    }

    private void addComponentsToContentPane(Container contentPane) {
        tabbedPane = new JTabbedPane();
        panel1 = new JPanel();
        panel2 = new JPanel();
        panel3 = new JPanel();
        changeVariableBtn = new JButton("Set validation to true");
        tabbedPane.insertTab("tab1", null, panel1, null, 0);
        tabbedPane.insertTab("tab2", null, panel2, null, 1);
        tabbedPane.insertTab("tab3", null, panel3, null, 2);
        contentPane.add(tabbedPane, BorderLayout.NORTH);
        contentPane.add(changeVariableBtn, BorderLayout.CENTER);
    }

    private void addListeners() {
        tabbedPane.addChangeListener(new ChangeListener() {

            private boolean automatedStateChange = false;

            @Override
            public void stateChanged(ChangeEvent ce) {
                //this is used so when we allow the user not to go to the new tab by setting the tabb index to the previous one we dont want our changelistener to fire again as if the user were changing the tabs
                if (automatedStateChange) {
                    automatedStateChange = false;
                } else {
                    previousTabIndex = currentTabIndex;
                    currentTabIndex = tabbedPane.getSelectedIndex();
                }

                if (valid) {
                    System.out.println("Current tab is:" + currentTabIndex);
                    System.out.println("Previous tab is:" + previousTabIndex);
                    System.out.println("Validation succeeded: " + valid);
                    changeVariableBtn.doClick();
                } else {
                    System.out.println("You need to enter all valid data first!");
                    automatedStateChange = true;
                    tabbedPane.setSelectedIndex(previousTabIndex);
                }
            }
        });
        changeVariableBtn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                if (valid) {
                    valid = false;
                    changeVariableBtn.setText("Set validation to true");
                } else {
                    valid = true;
                    changeVariableBtn.setText("Set validation to false");
                }
            }
        });
    }
} 
```

# javascript - Javascript 我应该使用哪些其他技巧而不是导出符号

> ID：11050094
> 
> 赞同：0
> 
> 时间：2012-06-15T11:47:03.570
> 
> 标签：javascript, architecture, backbone.js, underscore.js

Google Closure 库提供导出符号选项以通过窗口对象提供对构造函数的访问。

例如：导出任务将允许做`window.task`

**但这**与谷歌闭包库相去甚远。我正在使用 Backbone.js 构建一个任务应用程序。我的视图、模型、路由器并拆分为许多文件，我按照上述过程将实例、源分配给窗口对象，以便可以访问另一个。

*   我如何不通过窗口访问单个应用程序的模型、视图、路由器？您使用了哪些技巧和技巧来使它们成为沙盒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:56:09.317

您几乎总是必须将至少一件东西暴露在窗口中。

但是，您可以使用命名空间来提供帮助。

```
// app.js
var App = App || {};
App.Views = App.Views || {};
App.Models = App.Models || {};

App.Views.HomeView = Backbone.View.extend({});
App.Model.User = Backbone.Model.extend({}); 
```

唯一不需要的情况是使用 requireJS。

```
// app.js
define(['views/home'], function (home) {
    var home = new home({
        el: '#home'
    });
});
// views/home.js
define(['backbone'], function (Backbone) {
    var home = Backbone.View.extend({});
    return home;        
}); 
```

虽然，我想如果你真的想要，你可以在自执行函数中做所有事情。

```
(function ($, Backbone) {
    // Do your stuff here instead?.
    // Just keep in mind, nothing you do in here will be available outside.
    var home = Backbone.View.extend({});
    new home(); // Works...
}(jQuery, Backbone);
new home(); // FAIL! 
```

唯一的问题是你在函数内部所做的任何事情都不能在函数外部使用。

如果您对任何实现有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:49:54.013

无论您使用什么 - 全局范围（在浏览器中也称为“窗口”）或其他一些对象来保存您的命名空间，总会有发生冲突的机会。使用其他东西只会让您不必担心默认属性窗口已经有什么。

任何模块的最佳实践是仅将单个对象（通过窗口或其他）暴露给外部视图，并将其他所有内容作为其属性，因为这样可以将碰撞的可能性降至最低。

# javascript - 从 js 访问插件控制器

> ID：11050095
> 
> 赞同：4
> 
> 时间：2012-06-15T11:47:07.137
> 
> 标签：javascript, jquery, grails, plugins

我想创建一个插件。在我的插件中，我必须从我的函数中调用控制器操作。下面是 ajax 调用的片段，它位于单独的 js 文件中。

```
 $.ajax({
            type:'POST',
            url:"/wf-taglibs/refTagLib/getDescriptionByCode",
            data:{
                'code':code,
                'beanClass':beanClassAttribute
            },

            success:function (data) {
                $('#' + updateFieldAttribute).text(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(xhr.status);
                alert(thrownError);
            }
        }); 
```

我的网址有问题。url:"/wf-taglibs/refTagLib/getDescriptionByCode"，作为响应，我们得到“未找到请求的页面”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:02:30.697

我不会像这样对 URL 进行硬编码，而是在我的 gsp 中声明一个指向正确控制器/动作的 js 变量，然后让我的 js 代码使用该变量。

```
var getDescriptionEndpoint = "${createLink(controller:'x', action:'x')}"; 
```

然后在进行 ajax 调用的 js 代码中使用该变量。这样它也会考虑反向 url 映射。

虽然这不是一个好主意，但如果你想将变量直接声明到 js 文件中 - 换句话说 - 如果你想将 js 文件视为 gsp - 请参阅 gsp-arse 插件

# c# - WMI Query 的 select 子句中的数学运算

> ID：11050098
> 
> 赞同：4
> 
> 时间：2012-06-15T11:47:16.960
> 
> 标签：c#, .net, wmi, console-application

在我的控制台应用程序（.NET）中，我正在执行 WMI 查询，如下所示：

```
ManagementObjectSearcher query;
        ObjectQuery oq;
        ManagementObjectCollection objectCollection;
        try
        {
            oq = new ObjectQuery("SELECT TotalVisibleMemorySize, FreePhysicalMemory FROM Win32_OperatingSystem");
            query = new ManagementObjectSearcher(oq);
            objectCollection = query.Get();
        }
        catch
        {
            return null;
        }
        return objectCollection; 
```

我正在对收集到的数据进行划分，以便在我的应用程序中使用。目前它对我来说非常有效。
我正在为我的应用程序使用多个 wmi 查询。为了使一个方法从配置中执行我的所有 wmi 查询，我需要在查询它自己的 select 子句中进行除法。
我需要执行 WMI 查询，如下所示：

```
SELECT ((TotalVisibleMemorySize)/1024) as TotalVisibleMemorySize1, ((FreePhysicalMemory)/1024) as FreePhysicalMemory1 FROM Win32_OperatingSystem 
```

对于此查询，我收到错误消息`Invalid query`。
此查询中是否存在语法错误，或者无法在 WMi 查询的 select 子句中进行除法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:32:56.497

似乎 WMI 不支持复杂的查询。您最好的选择是捕获 wmi 结果并根据需要进行转换：

```
foreach (ManagementObject mo in objectCollection)
{
Console.WriteLine("Total Memory = {0} MB", 
Convert.ToInt32(mo.GetPropertyValue("TotalVisibleMemorySize"))/1024);
} 
```

# lwjgl - playN hello 示例中的 java.library.path 中没有 lwjgl

> ID：11050099
> 
> 赞同：1
> 
> 时间：2012-06-15T11:47:19.083
> 
> 标签：lwjgl, playn

我在尝试运行 java playN 项目时出错。其他的好像还好。错误是：线程“main”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 lwjgl。

项目中有依赖库lwjgl 2.83。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T18:01:26.910

虽然您有 java 依赖项，但您没有本机库。

您需要从[http://www.lwjgl.org/](http://www.lwjgl.org/)下载 lwjgl ，解压并根据[http://www.lwjgl.org/wiki/index.php?title=Main_Page#Getting_started进行设置](http://www.lwjgl.org/wiki/index.php?title=Main_Page#Getting_started)

TL;DR：一旦您提取了平台的库，您需要使用以下作为 VM 参数将 Java 指向那里：

```
-Djava.library.path=[Path/To/Libs] 
```

我认为如果你用 maven 运行它，它应该开箱即用（也许）

/编辑：或按照以下说明操作： [如何修复 java.lang...](https://groups.google.com/forum/?fromgroups#!topic/playn/E2t7gNh4ab0) 它不依赖于您自己下载的库，而是使用 maven 获取它们。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-04-04T11:59:05.513

要解决第一次使用 Java 媒体框架 JMF 2.11e 时出现的问题，请配置以下环境变量： JAVA_HOME= JMF_HONE= 您还需要策略工具中的策略文件，然后添加 -Djava.security.policy=mypolicy.policy 以获取其他库添加-Djava.library.path= 还安装一个 32 位版本的 jdk 和 jre 我个人使用 8。在 Netbeans 中，如果您正在使用它，请选择 JDK 8，它应该可以工作。然后尝试编译JMStudio，如果它即使出现错误也能启动，它应该启用首选项，检测捕获设备并且相机灯会闪烁，然后它会出现，你可以去文件|捕获，它会记录您并让您通过屏幕上的视觉组件看到自己。

学习 JMF 的最佳方式是对 JMStudio 进行逆向工程并构建/设计您自己的解决方案！享受。

# c++ - libc中的错误？如何读取转储文件？

> ID：11050110
> 
> 赞同：1
> 
> 时间：2012-06-15T11:48:13.703
> 
> 标签：c++, c, boost, opencv, libc

我会尽量以最好的方式问我的问题：

我想使用来自相机制造商的示例代码（只有一个名为“main.cpp”的文件）在 Ubuntu 11.10 下从我的相机中读取图像。如果我使用示例项目，一切正常，我会收到图像数据。但是如果我将这个“main.cpp”添加到我的真实项目中并编译，应用程序就会崩溃。

很难确定导致此错误的部分。但是，如果我从我身上删除一些代码（这些代码已编译但绝对没有使用！），程序会按预期工作。我猜在编译我的代码时我链接的另一个库会导致错误（例如 Opencv 或 boost？）。我试图找出导致这种行为的部分，但如果你们能同时告诉我，如果可以从[这个 Gist 上找到的](https://gist.github.com/2936131)这个崩溃消息中提取有用的信息，我会很高兴。

我的 libc 损坏了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:02:14.157

> libc中的错误？

不。

> `*** glibc detected *** ./myProject: double free or corruption (!prev): 0x09c12660 ***`

此错误意味着您的应用程序以某种方式损坏了堆。它可能已经`free`两次编辑同一个指针，或者它可能已经写入超过分配缓冲区的末尾。

*查找此类堆损坏错误的*工具是[Valgrind](http://valgrind.org)。

仅当您链接额外代码时才会发生崩溃这一事实可能只是一个意外——即使没有额外代码，该错误也可能存在于应用程序中，但尚未在崩溃中表现出来。

额外的代码也有可能引入错误，尽管可能性较小。

无论哪种情况，一旦在 Valgrind 下运行应用程序，错误就会变得明显。

# c# - 放置在 TableLayout 中的停靠控件的大小不会自动小于其创建大小

> ID：11050113
> 
> 赞同：11
> 
> 时间：2012-06-15T11:48:23.710
> 
> 标签：c#, .net, winforms, visual-studio-2010, tablelayoutpanel

这个问题比解释得更好，所以我用 Visual Studio 2010 项目设置了一个[git 存储库](https://github.com/DanStevens/TableLayoutSizingIssueTest)，用于查看问题的实际情况。

我有一个项目，我已将 ComboBox 控件 ( `comboField`) 添加到 TableLayout 控件 ( `tableLayoutPanel1`)。我已将`Dock`ComboBox 的属性设置为，`Fill`以便它填充它所在的 TableLayout 控件的单元格。我还将`Dock`TableLayout 控件的属性设置为，`Fill`以便它填充它已放置的表单在。ComboBox 的宽度当前为 193 像素。

当我运行表单并增加其宽度时，ComboBox 的大小会按预期增加。当我减小表单的大小时，ComboBox 的大小会减小，*直到*达到原始大小（193 像素）。此时，ComboBox 的宽度不会进一步减小，从而导致控件的右侧被剪裁。这与我的预期相反：ComboBox 的宽度将减小到零，因为没有`MinimumSize`指定。`MinimumSize`窗体上的任何其他控件（例如 TableLayout 控件）都没有指定。

如果相关，TableLayout 的第一列的宽度设置为`Absolute`100 像素，而 TableLayout 的第二列的宽度设置为`AutoSize`.

任何人都可以解释为什么这个表格的行为与我的期望相反，并建议我如何以我想要的方式让它工作？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T13:09:02.307

我下载了您的代码并进行了更改。它现在有效 -

将第二列的 SizeType 设置为百分比并将其设为 100%

**设计师代码：-**

```
this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 100F)); 
```

![在此处输入图像描述](../Images/234f4f29b6696a424f30c1a91fa18d95.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T12:14:16.460

tablelayoutpanel 似乎存储了控件的初始大小，并且无论停靠、锚定或任何其他值（例如 AutoSizeMode.GrowAndShrink）如何，都不会使它们变小。在设计器中，停靠控件的大小将始终被存储，因此我发现的最简单的方法是在 initializecomponent 之后将宽度设置为 0（由于控件停靠，它实际上不会调整组合框的大小，但它会允许tablelayoutpanel使其与设置的宽度一样小）

```
 InitializeComponent();
        comboField.Width = 0; 
```

# html - 如何使用 HTML TestSuite 以及使用 IE 在 Selenium RC 上的测试用例

> ID：11050114
> 
> 赞同：4
> 
> 时间：2012-06-15T11:48:24.997
> 
> 标签：html, windows, internet-explorer, selenium-rc, test-suite

我在 Internet Explorer 中使用 Selenium RC。我用 HTML 编写了一些测试用例。如何用 HTML 编写测试套件，包括用 HTML 编写的测试用例？我想在 IE 和 Windows XP / Windows 7 中使用 Selenium RC 运行 HTML 测试套件。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T07:06:04.367

在 Selenium IDE 1.8 版中，右键单击“测试用例”部分并通过选择“添加测试用例”选项添加所有 HTML 测试用例。然后通过选择“文件 > 保存测试套件”选项以 HTML 格式保存这个测试套件。在此之后只需创建一个具有以下内容的 .bat 文件即可执行此 HTML 测试套件。

java -jar selenium-server.jar -port 4444 -htmlSuite "*chrome" " [http://www.google.com/](http://www.google.com/) " "C:\Selenium\TestSuite.html" "C:\Selenium\TestSuiteResult.html" 暂停

![Selenium IDE > 添加测试用例](../Images/4566195167b453ef14b17081e22d867c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:08:15.203

创建 HTML 测试套件：

1.  打开 Selenium IDE

2.  记录并创建 2 个 TC（在我的情况下，i）google1.html 和 ii）google2.html）

3.  文件 --> 将测试套件另存为 --> 将文件另存为“GoogleTestSuite.html”）

要执行测试套件：

1.  打开命令行/终端 --> 转到 selenium-server (.jar) 所在的位置 --> 运行以下命令：

    java -jar selenium-server-standalone-2.0rc2.jar -port 4444 -htmlSuite "*iexplore" " [http://www.google.com/](http://www.google.com/) " "C:\Selenium\GoogleTestSuite.html" "C:\Selenium\测试套件结果.html"

注意：TestSuiteResult.html 将在运行后创建，其中包含测试结果

# vbulletin - 您如何将 vbulletin 的主页更改为论坛而不是默认（CMS 或活动流）？

> ID：11050124
> 
> 赞同：2
> 
> 时间：2012-06-15T11:49:20.183
> 
> 标签：vbulletin

我使用 vbulletin 创建了一个网站，我在管理员中安装了 CMS 和 BLOG 模块，我的默认设置是论坛，但是当我们输入主页 url 时，它会将我重定向到 [http://www.demo.com/content/](http://www.demo.com/content/) 内容是我的cms页面请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:01:56.873

**对于 vBulletin 版本 < 4.2。**
您需要修改位于 vBulletin 目录顶层的论坛索引页面。根据您问题中的 URL，它是这个文件： http:
[//www.demo.com/index.php](http://www.demo.com/index.php)

这是该文件的内容，您可以选择 CMS 或论坛是默认主页。

```
/**
 * You can choose the default script here.  Uncomment the appropriate line
 * to set the default script.  Note: Only uncomment one of these, you must
 * add // to comment out the script(s) that you DO NOT want to use as your
 * default script.
 *
 * You can choose the default script even if you do not plan to move this
 * file to the root of your website.
 */

/**
 * Use the CMS as the default script:
 */

require('content.php');

/**
 * Use the forum as the default script:
 */

// require('forum.php'); 
```

**对于 vBulletin 版本 >= 4.2。**
有一个新的“导航管理器”。您将在此处找到控制设置：
`Admin Control Panel -> Settings -> Navigation Manager`.

找到论坛选项卡所在的行。
在该行的右侧是一个下拉选择器，单击“设置默认值”（之后您可能需要单击“开始”按钮）。

将出现“更改站点默认值”面板。
验证论坛选项卡是“建议的默认值”，并且“确认更改”选择了“是”，然后单击“保存”。

论坛主页现在是论坛列表。

# spring - JSP EL div 运算符 - 奇怪的行为

> ID：11050125
> 
> 赞同：3
> 
> 时间：2012-06-15T11:49:22.133
> 
> 标签：spring, jsp, spring-mvc, el, integer-division

我的 JSP 页面中有这种奇怪的行为：

我有两个整数变量`count`和`size`.

当我将这些变量的值打印到我得到的页面时

```
266 100 
```

但是当我使用`${count div size}`或者`${count / size}`我得到`2.66`.

我检查了这两个都是`Integer`s，我也把它们放到模型中，然后在JSP中检索（根据这个[答案](https://stackoverflow.com/questions/4827775/i-cant-find-a-way-to-access-spring-model-not-using-el#4827821)）并将类名打印到JSP，它们是整数。

我知道，我可以编写自定义函数，但为什么什么时候应该起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:25:15.957

对于您的特定情况，EL Spec 要求在应用运算符之前强制两个操作数`Double`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:07:13.820

尝试`<fmt:formatNumber value="${..} maxFractionDigits="0" />`

# wpf - 基于多个条件绑定单选按钮和文本框

> ID：11050126
> 
> 赞同：2
> 
> 时间：2012-06-15T11:49:23.157
> 
> 标签：wpf, binding

我是 WPF 和 MVVM 的新手，我正在寻找正确方向的指针。

我想实现类似于 Microsoft Word 中的“打印 n 页、当前页或选择”的东西。

![Microsoft Word 打印 n 页](../Images/ae65edb773f3400c6fb2f1c73b0700f8.png)

在我的示例中，我有单选按钮可以在*radio1*或*radio2*之间切换，但也

1.  默认为视图模型中的任何 TimeType
    1.  `TimeType == Type1`=> radio1 被选中，text1 = ""
    2.  `TimeType == Type2`=> radio2 被选中，text1 = ViewModel.Time
2.  如果用户**选择** *radio1*我想清除*text1*。
3.  如果在*text1中***输入值**，我希望单选按钮切换到*radio2*并相应更新视图模型

 **我已经看到并尝试了各种转换器示例，但我无法弄清楚如何使对行为的各种影响能够很好地一起发挥作用。

我有一种感觉，我应该在视图模型中实现一些东西来执行逻辑，但我看不到要绑定什么。

XAML

```
<Grid.Resources>
    <local:EnumToBooleanConverter x:Key="e2b" />
</Grid.Resources>
<RadioButton Name="radio1" GroupName="g1" Content="Radio 1"
    IsChecked="{Binding Path=TimeType, Converter={StaticResource e2b}, ConverterParameter={x:Static vm:TimeType.Type1}}"
    />
<RadioButton Name="radio2" GroupName="g1">
    <TextBox Name="text1"
        Text="{Binding Path=ExplicitTime, Mode=TwoWay}">
    </TextBox>
</RadioButton> 
```

查看模型

```
// UPDATE: added INotifyPropertyChanged as per my actual code
class MagicTimeViewModel :INotifyPropertyChanged {
    public enum TimeType{Type1, Type2}
    TimeType _type; int _time;
    public TimeType TimeType{
        get{_return _type;}
        set {_type = value; Notify("TimeType");}
    }
    public int Time {
        get{_return _time;}
        set {_time = value; Notify("Time");}
    }
    void Notify(string name)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:07:15.067

通常做这样的事情我使用一个`ListBox`（因为你想跟踪一个选定的项目，并且一次只能选择一个项目），并覆盖样式以显示为`RadioButtons`

```
<Style x:Key="RadioButtonListBoxStyle" TargetType="{x:Type ListBox}">
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="KeyboardNavigation.DirectionalNavigation" Value="Cycle" />
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}" >
                <Setter Property="Margin" Value="2, 2, 2, 0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Border Background="Transparent">
                                <RadioButton IsHitTestVisible="False" Focusable="false" 
                                    Content="{TemplateBinding ContentPresenter.Content}"  
                                    IsChecked="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent},Mode=TwoWay}"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

`ViewModel`存储`SelectedIndex`和`TimeText`属性，当一个属性更改时，它还会更新任何相关属性。

例如，当`SelectedIndex`更改为 0 时，清除`TimeText`。更改时`TimeText`，设置`SelectedIndex`为 1

下面是 XAML 的一个示例：

```
<ListBox x:Name="MyListBox"
         Style="{StaticResource RadioButtonListBoxStyle}"
         SelectedIndex="{Binding SelectedIndex}">

    <ListBoxItem>All</ListBoxItem>
    <ListBoxItem>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Pages" />
            <TextBox Text="{Binding DataContext.TimeText, ElementName=MyListBox, UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>
    </ListBoxItem>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:59:31.560

你需要`INotifyPropertyChanged`在你身上实施`ViewModel`**

# jquery - 生成 HTML每个里面都有标题 to apply the msDropDown plugin I am using the carrierwave gem to upload images to my application. Now I need to display the images in a dropdown list that is part of a form. I am trying to use the msDropDown. However, I nee

> ID：11050128
> 
> 赞同：3
> 
> 时间：2012-06-15T11:49:28.013
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, drop-down-menu

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:05:02.180

尝试将标题作为 html 选项传递给`<option>`元素

```
<%= f.select(:style_id, Style.all.map{|p| [p.name, p.id, :title => p.image_url(:thumb)]}, .... 
```

# c - if (i++) 条件如何工作？

> ID：11050129
> 
> 赞同：-1
> 
> 时间：2012-06-15T11:49:30.073
> 
> 标签：c, if-statement, boolean-expression

> **可能重复：**
> [后增量和前增量概念？](https://stackoverflow.com/questions/4445706/post-increment-and-pre-increment-concept)

在这种情况下，我无法理解“if 条件”如何与增量/减量运算符一起使用：

```
#include<stdio.h> 
void main() 
{ 
  int n=0; 
  if(n++) 
  { 
    printf("C-DAC"); 
  } 
  else if(n--) 
  { 
    printf("ACTS"); 
  } 
} 
```

它的输出是ACTS。

IF 条件下发生了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-15T11:50:14.457

`if (n++)`它检查是否`n`不等于零，然后递增`n`

`else if (n--)`它检查是否`n`不等于零，然后递减`n`

您的第一个`if`语句不正确（因为`n`为零），然后`n`递增，并`else if`检查语句（`n`此时等于 1），`if (1)`为真并被`printf("ACTS")`调用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T11:54:13.240

`n++`和都是**后**递增/*递减*`n--`操作。

 ***这意味着变量的值首先用于当前表达式中的评估，*然后才更改*，（即，*随后*递增/递减）。

`0`在布尔表达式中表示 FALSE。由于`n`is initial `0`，您的第一个测试`if`失败并且该`else`子句被评估。

由于在第一个测试中，此时`n`已成为，因此这导致该测试变为真，并且`1``n++`

```
printf("ACTS"); 
```

被执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T12:23:16.897

if(0++) ==> if(0) else if(1--) ==> else if(1)

所以打印ACTS

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T11:52:58.527

```
int n=0; 
if(n++) 
```

含义：检查然后加 1。

```
int n=0; 
if(++n) 
```

含义：加1，然后检查。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T11:54:12.927

一个 int 总是给出真值，除非它为零。后增量运算符 ,在检查后`i++`递增`i`变量。如果您使用了预增量运算符 ，`++i`则增量将在检查之前进行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-15T11:55:52.080

在检查您的`IF`部分时，**n**的值为“ **0** ”。由于`i++`, ' **n** ' 增加**1**。所以，现在**n**的值为**1**。因此，在输入`ELSE`部分时，由于**n**的值为**1**，它执行`ELSE`部分。你得到了`ELSE`零件的输出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T11:51:55.753

它首先检查条件，*然后*`n != 0`它会增加 n 的值

 ** * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-15T11:53:37.790

`++`and`--`运算符不仅修改值，它们还有返回值。行为因位置而异：`++var`增加并返回增加的值，而`var++`增加但返回旧值。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-15T13:04:57.013

因为 i 为 0。`++i`会在评估前递增，在评估`i++`后递增

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-15T11:52:32.303

**编译器以从左到右的**方式读取命令。意味着首先它检查条件是否为真或假

```
if (n) 
```

然后递增/递减

```
 n = n +/- 1 
```****

# c# - 即时通讯。序列化为 json 的最佳方式

> ID：11050137
> 
> 赞同：7
> 
> 时间：2012-06-15T11:50:15.230
> 
> 标签：c#, json, serialization, thejit

我需要为[jit](http://thejit.org/)库创建一个自定义 json。我应该使用额外的 C# 逻辑还是以某种方式扩展 JsonSerializer。Json应该是这样的-->

```
var json = {
    "children": [
 {
     "children": [
     {
         "children": [],
         "data": {
             "playcount": "276",
             "$color": "#8E7032",
             "image": "http://userserve-ak.last.fm/serve/300x300/11403219.jpg",
             "$area": 276
         },
         "id": "album-Thirteenth Step",
         "name": "Thirteenth Step"
     }
}] 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:22:17.603

使用[Json.Net](http://json.codeplex.com/)

```
public void Test()
{
    Node root = new Node();
    Node child = new Node();
    Data data = new Data() { Area = 276, Color = "#8E7032", PlayCount = "276", Image = "http://userserve-ak.last.fm/serve/300x300/11403219.jpg" };
    Node grandChild = new Node() { Id = "album-Thirteenth Step", Name = "Thirteenth Step", Data = data };

    root.Children.Add(child);
    child.Children.Add(grandChild);

    var json = JsonConvert.SerializeObject(
                              root, 
                              new JsonSerializerSettings() {  
                                  NullValueHandling= NullValueHandling.Ignore,
                                  Formatting= Newtonsoft.Json.Formatting.Indented
                              });
}

public class Node
{
    [JsonProperty("children")]
    public List<Node> Children = new List<Node>();

    [JsonProperty("data")]
    public Data Data;

    [JsonProperty("id")]
    public string Id;

    [JsonProperty("name")]
    public string Name;
}

public class Data
{
    [JsonProperty("playcount")]
    public string PlayCount;

    [JsonProperty("$color")]
    public string Color;

    [JsonProperty("image")]
    public string Image;

    [JsonProperty("$area")]
    public int Area;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:33:23.000

你有关于 Json.net 的想法吗？

[http://json.codeplex.com/](http://json.codeplex.com/)

至少你会有一个很好的定制空间+一个更好的序列化器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:13:55.843

[json](http://json.codeplex.com/) - 使用 json 的最佳工具

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T12:37:07.433

ServiceStack.Text 是最快的。

基准测试：[http ://www.servicestack.net/benchmarks/](http://www.servicestack.net/benchmarks/)

# android - Android WebView “tel:” & “mailto:”链接显示网页未找到

> ID：11050141
> 
> 赞同：4
> 
> 时间：2012-06-15T11:50:43.547
> 
> 标签：android, http, webview, mailto, tel

我正在尝试打开**tel:** & **mailto:**链接`webview`，并收到以下消息：

```
Web Page Not Found tel:0000000000 
```

唯一有效的链接是“http:”和“https”

谁能帮我？

```
 private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webview, String url)
    {
        webview.loadUrl(url);
        return true;
    }
}

@Override
public boolean onKeyDown(int KeyCode, KeyEvent event)
{
    if ((KeyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
    {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(KeyCode, event);
}

public boolean shouldOverrideUrlLoading(WebView webview, String url) {
    if (url.startsWith("tel:")) { 
            Intent intent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse(url)); 
            startActivity(intent); 
    }else if(url.startsWith("http:") || url.startsWith("https:") || url.startsWith("mailto:")) {
        webview.loadUrl(url);
    }
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-14T17:33:23.530

不要调用 loadUrl(url);

```
 public boolean shouldOverrideUrlLoading(WebView webView, String url) {

     if (url.startsWith("tel:")) {
        Intent intent = new Intent(Intent.ACTION_VIEW,
                Uri.parse(url));
        activity.startActivity(intent);
    }
    else{
        webView.loadUrl(url);
    }
        return true; 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:57:23.843

尝试将**false**返回到 tel: 和 mailto: if 和 else if 分支。

这应该有效。

# asp.net - 在向 GridView 添加新行时自动计算列值并在 DDL 中保留所选项目

> ID：11050142
> 
> 赞同：1
> 
> 时间：2012-06-15T11:50:47.603
> 
> 标签：asp.net, c#-4.0, ajaxcontroltoolkit

我有一个 AJAX 选项卡容器，在 PersonDays 选项卡中我有两个问题：

**1：** 从下图中可以看出，在 DDL 中为 ResourceType 选择的项目值正在更改为 DDL 的默认值/第一个值，而在单击“添加”按钮后正在创建新行。（未从数据库表中获取 DDL 的项目）。如何在单击“添加”按钮之前修复用户选择的项目的值？

**2：** 如何在焦点从“CostPerDay”改变时自动计算“TotalCost”列中的值，即“No.ofDaysXCostPerDay”，***无需单击“添加”***按钮，同时填写在下面的文本框中在添加新行之前，GridView 和“EstimatedCost”选项卡上的文本框中？（在我当前的表格状态下，只有在我点击“添加”按钮后才会计算/填写）

[“您可以在此处找到屏幕截图以及解决方案文件和数据库脚本”](https://skydrive.live.com/redir?resid=AD2546A1BBF7A705!106)

# c# - 获取 n*m 棋盘上棋子的最短路径

> ID：11050143
> 
> 赞同：1
> 
> 时间：2012-06-15T11:50:53.357
> 
> 标签：c#, a-star, breadth-first-search

我一直在解决一项任务，该任务要求我计算从 A 点到 B 点所需的最小步数，在一个 *m 棋盘上使用不同的棋子，棋盘上也有障碍物，并输出所走的路径。

我在看 A* 算法，但它需要我得到一个很好的启发式估计，我不知道如何得到一个像骑士这样的棋子

我一直在尝试做的是首先使用广度优先搜索来找到从 A 点无障碍到达 B 点所需的最少步数，然后使用 A* 算法

```
public void AllPaths(int[,] chessBoard, int startX, int startY, int dimension) {
  // All the moves a knight can make
  int[] movementX = new int[8]{-2, -2, -1, -1,  1,  1,  2,  2};
  int[] movementY = new int[8]{-1,  1, -2,  2, -2,  2, -1,  1};
  chessBoard[startX, startY] = 0;

  for (int step = 0; step < dimension-1; step++) {
    for (int x = 0; x < dimension; x++) {
      for (int j = 0; j < dimension; j++) {
        if (chessBoard[x, j] == step) {
          for (int k = 0; k < 8; k++) {
            if (movementY[k] + x>= 0 && movementY[k] + x < dimension && movementX[k] + j >= 0 && movementX[k]+j < dimension) {
              if (chessBoard[movementY[k]+x,movementX[k]+j] == -1) {
                chessBoard[movementY[k]+x,movementX[k]+j] = step + 1;
              }
            }
          }
        }
      }
    }
  }
} 
```

骑士移动的输入和输出如下：

```
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1

- starting from the top left
0 3 2 3 2 3 4 5
3 4 1 2 3 4 3 4
2 1 4 3 2 3 4 5
3 2 3 2 3 4 3 4
2 3 2 3 4 3 4 5
3 4 3 4 3 4 5 4
4 3 4 3 4 5 4 5
5 4 5 4 5 4 5 6 
```

这适用于 n*n 板，但我也需要它适用于 n*m 板。我是朝着正确的方向前进还是应该完全使用其他东西？我必须改变什么才能让它适用于 n*m 板？感谢您对解决我遇到的问题提出的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:01:52.493

您需要两个参数来描述 n*m 板。

不要循环到理论上的最大步数，而是循环直到你填满了棋盘：

```
public void AllPaths(int[,] chessBoard, int startX, int startY, int dimensionX, int dimensionY) {
  // All the moves a knight can make
  int[] movementY = { -2, -2, -1, -1,  1,  1,  2,  2 };
  int[] movementX = { -1,  1, -2,  2, -2,  2, -1,  1 };
  chessBoard[startX, startY] = 0;
  int cnt = dimensionX * dimensionY - 1:
  int step = 0;

  while (cnt > 0) {
    for (int x = 0; x < dimension; x++) {
      for (int y = 0; y < dimension; y++) {
        if (chessBoard[x, y] == step) {
          for (int k = 0; k < 8; k++) {
            int dx = movementX[k] + x, dy = movementY[k] + y;
            if (dx >= 0 && dx < dimensionX && dy >= 0 && dy < dimensionY) {
              if (chessBoard[dx, dy] == -1) {
                chessBoard[dx, dy] = step + 1;
                cnt--;
              }
            }
          }
        }
      }
    }
    step++;
  }
} 
```

# jquery - 使用 JQuery 不显眼的验证来突出显示与正在验证的字段不同的字段

> ID：11050145
> 
> 赞同：2
> 
> 时间：2012-06-15T11:51:01.860
> 
> 标签：jquery, asp.net-mvc, validation, jquery-validate

我们有一个 MVC 4 项目，它设置了 JQuery 不显眼的验证和一些自定义验证器。其中之一是日期范围验证器，其中 2 个文本字段被传递给视图模型上的一个对象（如“PropertyName”.Min 和“PropertyName”.Max）。

我在验证字段并让验证器方法根据这些文本字段进行验证时没有问题（我使用了一个名为“PropertyName”的虚拟隐藏字段）。但是，由于验证与“'PropertyName'”字段相关联，'PropertyName'.Min 和 'PropertyName'.Max 不会突出显示。

我已经尝试在验证器方法中绑定类

```
$(dateRangeMin).removeClass("input-validation-error");
$(dateRangeMin).removeClass("valid");
$(dateRangeMax).removeClass("input-validation-error");
$(dateRangeMax).removeClass("valid"); 
```

然后根据验证分配这些类，但它似乎并不能始终如一地工作。

在我再次拒绝之前，有没有人知道将验证结果传递给不同表单字段的任何内置方法？

更新： bodge 不起作用，因为最小和最大日期字段得到独立验证并通过验证。因此，我也在寻找一种将验证与这些字段相关联的方法。

谢谢

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:27:34.870

在我看来，这个问题的核心是您有多个输入代表模型上的一个项目。

如果是这种情况，有两种方法可以从那里开始：

1.  切换到视图模型方法，其中每个用户输入都由模型上的唯一属性表示。

2.  看看 jQuery 验证组。例如

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

[JQuery 验证多个字段，但出现一个错误](https://stackoverflow.com/questions/1289086/jquery-validate-multiple-fields-with-one-error)

# java - 在 foreach 循环中直接转换

> ID：11050148
> 
> 赞同：12
> 
> 时间：2012-06-15T11:51:38.777
> 
> 标签：java, arrays, foreach

我想知道是否可以在 foreach 循环中直接转换对象。

我们有以下两个类，一个扩展另一个：

```
class Book {};
class ExtendedBook extends Book {}; 
```

现在我们有一个我想要循环的书籍数组，因为它是一个扩展书籍搜索，我确信所有书籍实际上都是扩展书籍。有没有办法直接投射它们？

```
Book [] books = bookSearch.getBooks("extendedBooks");

for (Book book: books){
   ExtendedBook eBook = (ExtendedBook) book;
   ....
} 
```

这涉及两个步骤。首先循环浏览书籍，然后在第二步进行投射。可以一步到位吗？

什么不起作用：

```
// Directly assign it to a different type
for (ExtendedBook book : books){}

// Directly casting the array
ExtendedBooks [] eBooks = (ExtendedBooks []) books;

// Same goes for trying both in one step
for (ExtendedBook book : (ExtendedBook []) books){} 
```

我知道这不是一个真正的痛苦，但是保持循环更短会很好，并且当您保存一个虚拟变量时可能更具可读性，该变量仅用于强制转换而不是实际操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:33:00.687

使用泛型怎么样？

将您的 getBooks 签名写为：

```
<B extends Book> B [] getBooks(Class<B> bookType) 
```

现在，如果您想搜索类型的书籍`ExtendedBook`，只需调用：

```
ExtendedBooks [] eBooks = bookSearch.getBooks(ExtendedBook.class) 
```

不需要类型转换或其他不安全的东西。干净整洁。

当然，您仍然必须确保`ExtendedBook`只返回那种书，但看起来您已经解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:54:24.987

我有理由确定您不能随心所欲地投入循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:25:41.530

考虑铸造

```
ExtendedBook ex=(ExtendedBook)new Book(); 
```

它被编译器接受但 JVM throws `java.lang.ClassCastException`，因为这种类型的转换是错误的 -> `Book`is not `ExtendedBook`，所以它有可能无法处理`ExtendedBook`类中添加的潜在新方法。

出于同样的原因，你不能做类似的事情

```
ExtendedBook[] exbooksB=(ExtendedBook[]) new Book[10]; 
```

但可以

```
Book[] booksA=new ExtendedBook[10];
ExtendedBook[] exbooks=(ExtendedBook[]) booksA; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T12:16:40.730

你不能，因为 java 不支持隐式转换重载，就像在 C# 中使用[隐式 operator](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-04T02:20:44.357

你可以这样做。

```
Iterables.filter('Your array', the type class).forEach(x -> { } }

Iterables.filter(data, JSONObject.class).forEach(x -> { 
    x.getString("something") }); 
```

# drupal-6 - 尝试录制时 kaltura CE 中的网络摄像头错误

> ID：11050149
> 
> 赞同：2
> 
> 时间：2012-06-15T11:51:40.227
> 
> 标签：drupal-6, red5

我在 Drupal 中有一个应用程序，我们需要通过网络摄像头录制视频或上传视频文件，我们在 Drupal 中安装了 kaltura 模块。

1.) 我们安装了 kaltura CE 1.5 和 Red5。当我们尝试通过 Kaltura 控制台中的网络摄像头进行录制时，我们会收到类似的错误

`Error: ArgumentError: Error #1063 text: Error #2095`
`Error: ReferenceError: Error #1069 text: Error #2095`

它仍然通过网络摄像头录制视频，但保存后，如果我们尝试播放它就无法播放。

它在 drupal 中创建一个节点，但在 Drupal 中它也没有播放。

在文件夹中，我找到了 flv 文件，我可以在 VLC 中运行它们。

2.) 当我们在 Drupal 中录制时，它会抛出错误：

> 无法启动与服务器的连接。

少了什么东西？

# asp.net - 在 Azure 部署期间，Web.config 发生了巨大的变化

> ID：11050151
> 
> 赞同：5
> 
> 时间：2012-06-15T11:51:44.940
> 
> 标签：asp.net, azure, web-config, azure-deployment

部署到 Azure 后，我不断收到服务器错误——应用程序无法运行。所以我在实例中做了一个远程桌面，发现 web.config 已经彻底检修了......这是怎么回事？我以为 web.config 是按原样打包的？相反，整个配置已被替换。当我用原始的、未更改的、正确的配置替换“新”版本时，我的应用程序按预期工作。

首先，这里发生了什么？我究竟做错了什么？这样我就可以理解并且将来不会复制它。

其次，我该如何制止这种行为？我想要部署原始的 web.config——而不是任意的冒名顶替者。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:44:42.127

根据 dunnry 解压缩 cskpkg 文件的建议，我注意到 web.config 甚至从未打包过——因此 Azure 一定是出于必要而创建了一个基本配置（没有警告我！？！？）。经过一番调查，我遇到了这个金块（来自[另一个解决部署问题的 StackOverflow 问题](https://stackoverflow.com/questions/9570016/azure-asp-net-mvc-web-config-deployment-issue)）：

> 原来 web.config 文件甚至没有包含在部署包中。不知何故，web.config 文件的 BuildAction 从 Content 更改为 None。

将 BuildAction 改回“内容”后，我的部署现在按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:18:07.797

除非您指定了转换（使用普通的内置 web.config.debug 和 .release），否则它不会转换任何用户设置。在某个时间点，它确实转换了 machineKey 设置，以便您的 Web 角色可以在 Web 场场景中运行（如果没有，负载均衡器将无法运行）。我确信它仍然会这样做，但它现在可能会在 machine.config 级别执行此操作（不理会您的 web.config）。我已经有一段时间没有检查过了，所以不确定它现在做了什么。

检查将要部署的内容的简单方法是打包您的 cskpkg 并将其打开为 .zip 文件。里面将是另一个文件，其中包含您的网络角色名称。再次以 .zip 格式打开它，您应该会看到您的网站已全部打包。检查 web.config 并确保它是您需要的。如果没有，请在此处发回您认为不应更改的内容。

# c# - 打印布局无法在报表查看器中正确显示

> ID：11050155
> 
> 赞同：1
> 
> 时间：2012-06-15T11:51:57.373
> 
> 标签：c#, winforms, reportviewer, localreport

报告已成功生成，但我看不到它的打印布局。在报告查看器中单击“打印布局”按钮后，发生错误：

> “本地报表处理过程中出错，参数无效。”

然后我再次单击“打印布局”按钮，回到正常布局就可以了...

任何人都可以帮忙吗？

我正在使用 vs2010 reportviewer winform，并且在我的 .rdlc 文件中，除了将业务 obj 绑定为 DataSource 之外，我没有将任何参数传递给报告。

**PS：**
在我删除旧的 rdlc 文件并创建一个新文件后，它工作正常。虽然问题消失了，但我还是不知道为什么！如果知道原因的人告诉我原因，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T14:49:40.500

就我而言，我的图表太宽而无法打印。或者更确切地说，我忘记将报告打印设置为横向模式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T04:30:39.597

解决问题的方法是：删除旧的rdlc文件，重新设计一个新的rdlc。

# php - 将单个记录从 mysql 查询保存到变量

> ID：11050159
> 
> 赞同：1
> 
> 时间：2012-06-15T11:52:15.680
> 
> 标签：php, mysql, variables

我有一个表，其中有一个名为 ID 的行，我想将该 ID 保存到以后可以在同一个 PHP 文件中使用的变量中。我该怎么做？

```
<?php
include 'config.php';

// Connect to server and select databse.
mysql_connect("$dbhost", "$dbuser", "$dbpass")or die("cannot connect");
mysql_select_db("$dbname")or die("cannot select DB");

$result = mysql_query("SELECT * auto_matkat");

$row = mysql_fetch_array($result)
  $IND = $row['IND'];
  echo $IND;
  }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:06:18.930

如果 CoDe ADDict 的代码对您来说有点复杂，这可能会更简单一些：

```
mysql_connect("$dbhost","$dbuser","$dbpass")or die(mysql_error());
mysql_select_db("$dbname")or die(mysql_error());
     $query="SELECT * FROM auto_matkat";
$result=mysql_query($query)or die(mysql_error());
$num=mysql_numrows($result);
mysql_close();
$i=0;
while($i<$num){
$id[$id]=mysql_result($result,$i,"id");
}
echo $id; 
```

这是一个适合初学者学习 PHP 和 MySQL 连接的好网站：[http ://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:58:15.797

```
$con = mysql_connect("localhost","peter","abc123");
if (!$con){
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT ID FROM IDTable");
$ID="0";

//iterate the result set
while($row = mysql_fetch_array($result)){
  $ID=$row[0] 
  //echo here
  echo "MyID".$ID;
}
  //OR echo here
  //echo "MyID".$ID; 
```

# iphone - 如何避免多次调用同一个函数？

> ID：11050161
> 
> 赞同：1
> 
> 时间：2012-06-15T11:52:29.213
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我在我的应用程序中使用核心位置框架。当应用程序第一次启动时，didUpdateToLocation 方法被调用了两次。我分配了位置管理器实例并启动它并调用了 startUpdatingLocation。在 didUpdateToLocation 中，我正在调用另一个函数，在该函数中我将当前的纬度和经度发送到服务器，那么如何避免多次调用该函数？

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.locationManager = [[CLLocationManager alloc] init];
[self.mapView setShowsUserLocation:YES];
if( [CLLocationManager locationServicesEnabled])
{
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];
    locationManager.distanceFilter = 1000.0f;

else
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"GPS Disabled"          message:@"Enable GPS settings to allow the application to search for your current location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    [alertView release];
}
}

  //Here is didUpdateToLocation method

 -(void)locationManager:(CLLocationManager *)manager
 didUpdateToLocation:(CLLocation *)newLocation
      fromLocation:(CLLocation *)oldLocation
   {
  self.lat = newLocation.coordinate.latitude;
  self.longi = newLocation.coordinate.longitude;

    NSLog(@"Updated Location : lat--%f long--%f",self.lat,self.longi);
   [self updateUserLocation];

  }

  //in this function i am sending the latitude and longitude to server.
 -(void)updateUserLocation
 {

   NSString *urlString = [[NSString stringWithFormat:@"http://appifylabs.com/tracemybuddies/index.php/iphone/updateUserLocation/?userId=1&latitude=%@&longitude=%@",self.lat,self.longi] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

[conn url_Connection:urlString withActivityView:self.activityView     withParentView:self.view];
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:30:20.843

在 didUpdateToLocation 内部，当 oldLocation 被接收为 NULL 时，从函数返回。第一次调用您的委托时，它将为 NULL。

其次，您可以获取 currentTime 和 newLocation.timeStamp 之间的时间戳差异。如果它不在可接受的范围内，则从函数返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:08:44.193

也许您应该仅在某个时间间隔已过时才调用您的服务器？

```
int now = (int)[[NSDate date] timeIntervalSince1970];

if(now - self.lastUpdate > INTERVAL_BETWEEN_TWO_UPDATES) {  
    [self callServeur];
    self.lastUpdate = now;
} 
```

# php - Amchart 和 Ajax 以不正确的格式获取数据

> ID：11050163
> 
> 赞同：4
> 
> 时间：2012-06-15T11:52:33.003
> 
> 标签：php, javascript, ajax, format, amcharts

我想使用 AmChart 并从 php 获取图表数据。

这是我的 php 文件：

```
$colors = Array("#FF0F00","#FF6600","#FF9E01","#FCD202","#F8FF01","#B0DE09","#04D215","#0D8ECF","#0D52D1","#2A0CD0","#8A0CCF","#CD0D74","#754DEB","#DDDDDD","#999999","#333333","#000000");

$datas = $bdd->query("SELECT count(*) as count, rest.name as name
                   FROM command com, zone z, dinningroom dr, restaurant rest
                   WHERE com.zone = z.number
                       AND z.dinningroom = dr.number
                       AND dr.restaurant = rest.number
                   GROUP BY rest.number;");

$i=0;
while($data = $datas->fetch())
{   
    $dataList[$i]=array("name"=>$data['name'],"count"=>$data['count'],"color"=>$colors[$i]);
    $i++;
}
echo json_encode($dataList);
?> 
```

$datas 有很好的数据。SQL 请求很好，返回我想要的。

这是我的 javascript 与我的 Ajax 请求：

```
$.ajax({
              url: 'statComPerMenu.php',
              failure: function (data) {
                  alert('fail: ' + data);
              },
              success: function(data) {
                    var statComPerMenuChart;

                    // SERIAL CHART
                    statComPerMenuChart = new AmCharts.AmSerialChart();
                    statComPerMenuChart.dataProvider = data;

                    statComPerMenuChart.categoryField = "name";
                    // the following two lines makes chart 3D
                    statComPerMenuChart.depth3D = 20;
                    statComPerMenuChart.angle = 30;

                    // AXES
                    // category
                    var categoryAxis = statComPerMenuChart.categoryAxis;
                    categoryAxis.labelRotation = 90;
                    categoryAxis.dashLength = 5;
                    categoryAxis.gridPosition = "start";

                    // value
                    var valueAxis = new AmCharts.ValueAxis;
                    valueAxis.dashLength = 5;
                    statComPerMenuChart.addValueAxis(valueAxis);

                    // GRAPH            
                    var graph = new AmCharts.AmGraph();
                    graph.valueField = "count";
                    graph.colorField = "color";
                    graph.balloonText = "[[name]]: [[count]]";
                    graph.type = "column";
                    graph.lineAlpha = 0;
                    graph.fillAlphas = 1;
                    statComPerMenuChart.addGraph(graph);

                    // WRITE
                    statComPerMenuChart.write("chartdiv");

           } //Success
           });
       }; 
```

不显示图表。

但是，如果我通过以下方式更改 var 'data'： data = [{name: "toto", count: 10, color: "#FF0F00"},{name: "toto", count: 10, color: "#FF0F00 "}]; 从 Ajax 查询成功，这工作正常！我得到图表...

所以问题是我从我的php文件中得到的格式......我找不到正确的格式来返回。

编辑：如果我这样做：

```
success: function(data) {
    $("#omg").html(data);
    [...]
    chart.dataProvider = data;
    [...]
} 
```

这打印在页面上：[{"name":"Brussels","count":"4","color":"#FF0F00"},{"name":"Chimay","count":"2" ,"color":"#FF6600"}] 并显示一个空图表。

如果将打印的表格复制粘贴为数据：

```
success: function(data) {
    $("#omg").html(data);
    [...]
    chart.dataProvider =  [{"name":"Brussels","count":"4","color":"#FF0F00"},{"name":"Chimay","count":"2","color":"#FF6600"}];
    [...]
} 
```

图表显示得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:16:47.037

通过这样做解决：

```
$.getJSON("statComPerMenu.php",  // le fichier qui recevra la requête
          null,  // les paramètres
          function(data){  // la fonction qui traitera l'objet reçu
          [...]
          chart.dataProvider = data;
          [...]
}); 
```

查看更多关于 $.getJSON（法语）的信息：http: [//www.hooba.ca/blog/2008/echange-dobjets-json-entre-php-et-javascript-facile-grace-a-jquery/](http://www.hooba.ca/blog/2008/echange-dobjets-json-entre-php-et-javascript-facile-grace-a-jquery/)

# r - 解决二元二次优化的最佳软件包是什么？

> ID：11050173
> 
> 赞同：2
> 
> 时间：2012-06-15T11:53:37.693
> 
> 标签：r

我必须解决二元二次优化问题，即目标函数是二次的，约束是线性的，变量是二元的。我检查了“quadprog”包，但它似乎不是解决问题的正确选择。

任何人都可以建议解决二元二次选择的最佳方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:57:21.207

您可以尝试[Microsoft Z3](http://z3.codeplex.com/)（参见[Stack Overflow 问题 8506142](https://stackoverflow.com/questions/8506142/is-it-possible-to-find-optimal-solution-for-a-boolean-formula-by-smt-solvers)）。

# php - 使用 php 将新图像（资源类型）写入另一台服务器？

> ID：11050178
> 
> 赞同：1
> 
> 时间：2012-06-15T11:54:01.437
> 
> 标签：php

祝你今天过得愉快。尝试从服务器 A 创建图像并写入服务器 B 时遇到问题，例如跟随（在 PHP 中）

1.  从服务器 A 上的现有图像创建新图像（jpeg - 资源类型）。
2.  向新图像添加一些文本（仍为资源类型）。
3.  但我无法将图像资源保存到服务器 A 上的文件（权限受限，服务器 A 不归我所有，不允许写入图像文件）。
4.  所以我要把这个资源写到服务器B（我拥有）。

但我不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:57:12.547

是否可以将创建和修改图像的操作转移到可以直接保存的服务器B？

# java - 用于异步处理的tomcat 6线程池

> ID：11050186
> 
> 赞同：8
> 
> 时间：2012-06-15T11:54:37.863
> 
> 标签：java, multithreading, tomcat, threadpool

简短的问题：**在 Tomcat 6 应用程序中 - 我如何运行（单独的）线程池？**

**运行线程池的最佳解决方案是什么？**

长问题：
我在这里有一个简单的需求；
轮询数据库以获取某些数据，同时允许 Web 客户端等待答案（长轮询连接）。
当这些数据在数据库中可用时，我将向相关客户发送回复。

这么说，我现在*不想*深入研究任何框架（`quartz scheduler`也许？）。

因此，正如我总结的那样，我需要一个线程池来在后台完成这项工作。

**所以如果`Thread`是我要使用的（实际上`Runnable`），哪个类可以组织这一切？**有什么`ThreadPool`解决办法吗？有什么推荐吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T14:56:36.553

回答你的简短问题：

在 JVM 中，线程池被抽象在`java.util.concurrent.ExecutorService`接口后面。这个接口有不同的实现，但在大多数情况下，这个接口的方法就足够了。

要创建特定的线程池，请查看`java.util.concurrent.Executors`类： [http](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html) ://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html ，其中包含用于创建不同`ExecutorService`接口实现的静态工厂方法. 您可能对`newFixedThreadPool(int threadsNumber)`方法感兴趣`newCachedThreadPool`。

有关`Executors`JVM 的更多一般信息，您可能需要阅读以下 Oracle 教程：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)

因此，要在 Tomcat 下使用线程池 ( `ExecutorService`)，您应该执行以下操作：

.1。`web.xml`如果尚未完成，则在接口实例中创建和注册`javax.servlet.ServletContextListener`（它就像您的 Web 应用程序的入口点）。

.2\. 在`contextInitialized(ServletContextEvent)`方法中，您创建`ExecutorService`（线程池）的实例并将其存储在`ServletContext`属性映射中，以便可以从 webapp 中的任何点访问它，例如：

```
// following method is invoked one time, when you web application starts (is deployed)
@Override
public void contextInitialized(ServletContextEvent servletContextEvent) {
    // ...
    final int numberOfThreads = ...;
    final ExecutorService threadPool = Executors.newFixedThreadPool(numberOfThreads); // starts thread pool
    final ServletContext servletContext = servletContextEvent.getServletContext();
    servletContext.setAttribute("threadPoolAlias", threadPool);
    // ...
}

// following method is invoked one time when your web application stops (is undeployed)
public void contextDestroyed(ServletContextEvent servletContextEvent) {
    // following code is just to free resources occupied by thread pool when web application is undeployed
    final ExecutorService threadPool = (ExecutorService) servletContextEvent.getServletContext().getAttribute("threadPoolAlias");
    threadPool.shutdown();
} 
```

.3\. 在方法中的某处`Servlet.service`或您的 webapp 中的任何位置（您应该能够`ServletContext`从 webapp 获得对几乎任何地方的引用）：

```
Callable<ResultOfMyTask> callable = new Callable<ResultOfMyTask>() {
    public ResultOfMyTask call() {
        // here goes your task code which is to be invoked by thread pool 
    }
};

final ServletContext servletContext = ...;
final ExecutorService threadPool = (ExecutorService) servletContext.getAttribute("threadPoolAlias");
final Future<ResultOfMyTask> myTask = threadPool.submit(callable);; 
```

您应该存储对 myTask 的引用，并可以从其他线程查询它以了解它是否已完成以及结果是什么。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:11:57.430

对于您的用例，您可以利用 Java 平台中可用的 Timer 和 TimerTask 定期执行后台任务。

```
import java.util.Timer;
import java.util.TimerTask;

TimerTask dbTask = new TimerTask() {
    @Override
    public void run() {
        // Perform Db call and do some action
    }
};

final long INTERVAL = 1000 * 60 * 5; // five minute interval

// Run the task at fixed interval
new Timer(true).scheduleAtFixedRate(dbTask, 0, INTERVAL); 
```

请注意，如果一个任务需要超过五分钟才能完成，后续任务将不会并行执行。相反，它们将在队列中等待，并在前一个完成时一个接一个地快速执行。

您可以将此代码包装在单例类中并从启动 servlet 调用。

一般来说，在 Servlet 容器之外执行这类周期性后台作业是一种很好的做法，因为它们应该被有效地用于服务 HTTP 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:10:27.350

对于一个简单的后台任务，您根本不需要任何类型的线程池。您需要做的就是：

1.  启动线程
2.  检查后台进程是否应该停止
3.  让它轮询数据库
4.  将新轮询的数据存储在可访问的地方
5.  检查后台进程是否应该停止
6.  去睡觉
7.  重复步骤#2-#7

编写一个`ServletContextListener`启动线程以执行您在实现的类中定义的上述步骤`Runnable`。在该`contextDestroyed`方法中，设置一个标志来触发上面在#2 和#5 中指示的检查，然后调用`Thread.interrupt`以便您的线程终止。

您的后台任务绝对不应该尝试同步向客户端发送消息。相反，使用监视器上的其他机制通知等待轮询`Object.notify`器（这实际上没有任何意义，因为您不想阻止客户端检查当前状态），更新某种时间戳，或者只是进行轮询-客户端检查#4 中可用的当前数据。

# r - 在 R 中合并二元和一元数据集

> ID：11050191
> 
> 赞同：0
> 
> 时间：2012-06-15T09:07:01.820
> 
> 标签：r, dataset

我目前正在尝试在 R 中合并两个数据集（使用 Rstudio）。

第一个数据集是由来自战争相关数据集的国家之间的双边贸易流（二元组）组成的二元组。第二个是来自 Penn World Tables 的每个国家的 GDP 的一元数据。我想知道如何合并数据集，以便每个对子都有国家 1 的 GDP 和国家 2 的 GDP。

两个数据集都根据 3 个字符 isocode 进行编码。第一个二元数据集具有以下列：Country1、country2、flow1、flow2、distance

第二个单子数据集有国家和 GDP。

我想添加 GDP 数据，这样新的数据集现在将是：Country1、country2、flow1、flow2、distance、gdp1、gdp2。

有谁知道我如何在 R 中合并这些集合？

提前感谢=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:17:50.120

如果您想要一个特定的答案，您应该发布一个可复制的数据样本。这应该适用于有向和无向二元组。假设您的二元 df 的国家代码是`ccode1`and`ccode2`并且您的 dfs 分别命名为`dy.df`and `mon.df`。

```
new.df <- merge(dy.df, mon.df, by = c('ccode1', 'year'), all.x = TRUE)
new.df <- merge(dy.df, mon.df, by = c('ccode2', 'year'), all.x = TRUE) 
```

然后你可以从那里清理你的数据集。你也确定你有ISO代码吗？大多数 COW 的东西使用 COW 代码，而不是 ISO 代码。我还建议您阅读有关`merge`命令的文档。`help(merge)`.

# java - 查询同一个项目时没有命中 Ehcache

> ID：11050196
> 
> 赞同：4
> 
> 时间：2012-06-15T11:55:09.847
> 
> 标签：java, hibernate, caching, jpa, ehcache

目前，我使用 Ehcache 作为二级缓存将我的休眠配置为 H2 数据库以运行 2 个测试（查询一个项目 10000 次以查看缓存如何工作），但是缓存不起作用。与没有 ehcache 的测试相比，基准时间没有改变。统计数据表明，即使缓存的大小 = 1（已查询该项目），它也根本没有被命中：

```
[  name = Location cacheHits = 0 onDiskHits = 0 offHeapHits = 0 inMemoryHits = 0 misses = 0 onDiskMisses = 0 offHeapMisses = 0 inMemoryMisses = 0 size = 1 averageGetTime = 0.0 evictionCount = 0 ] 
```

休眠统计信息（sessionFactory.getStatistics().getSecondLevelCacheStatistics("Location")）：

```
SecondLevelCacheStatistics[hitCount=0,missCount=0,putCount=0,elementCountInMemor‌​y=1,elementCountOnDisk=1,sizeInMemory=760] 
```

这是我的配置：

Maven依赖：

```
<dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-ehcache</artifactId>
      <version>4.1.3.Final</version>
    </dependency>
    <dependency>
      <groupId>net.sf.ehcache</groupId>
      <artifactId>ehcache-core</artifactId>
      <version>2.5.2</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>4.1.3.Final</version>
    </dependency> 
```

启用 ehcache 的休眠配置：

```
 Configuration cfg = new Configuration()
        .addAnnotatedClass(Location.class)
        .setProperty("hibernate.connection.driver_class", dbConfig.getH2JdbcDriverName())
        .setProperty("hibernate.connection.url", dbConfig.getDbUrl())
        .setProperty("hibernate.connection.username", dbConfig.getUserName())
        .setProperty("hibernate.connection.password", dbConfig.getPassword())
        .setProperty("javax.persistence.validation.mode", "NONE")
        .setProperty("hibernate.cache.use_second_level_cache", "true")
        .setProperty("hibernate.cache.use_query_cache", "true")
        .setProperty("hibernate.cache.region.factory_class", "org.hibernate.cache.ehcache.EhCacheRegionFactory");

    sessionFactory = cfg.buildSessionFactory(); 
```

ehcache xml配置：

```
<ehcache>
<diskStore path="c:/_cached"/>
<cache
    name="org.hibernate.cache.StandardQueryCache"
    maxEntriesLocalHeap="5"
    eternal="false"
    timeToLiveSeconds="120"
    overflowToDisk="true"/>

<cache
    name="org.hibernate.cache.UpdateTimestampsCache"
    maxEntriesLocalHeap="5000"
    eternal="true"
    overflowToDisk="true"/>

<cache
    name="Location"
    maxElementsInMemory="10000"
    eternal="false"
    timeToIdleSeconds="120"
    timeToLiveSeconds="120"
    overflowToDisk="true"
    diskPersistent="false"
    diskExpiryThreadIntervalSeconds="120"
    memoryStoreEvictionPolicy="LRU"/>
<defaultCache 
    maxElementsInMemory="10000"
    eternal="false"
    timeToIdleSeconds="120"
    timeToLiveSeconds="120"
    overflowToDisk="true"
    diskPersistent="false"
    diskExpiryThreadIntervalSeconds="120"
    memoryStoreEvictionPolicy="LRU"/>
</ehcache> 
```

数据库类：

```
import org.hibernate.annotations.*;

import javax.persistence.*;
import javax.persistence.Entity;
import javax.persistence.Table;
import java.io.Serializable;

@Entity
@Table(name = "Location")
@org.hibernate.annotations.Cache(region = "Location", usage = CacheConcurrencyStrategy.READ_WRITE)
public class Location implements Serializable {
    @Id
    @GeneratedValue
    @Column(name = "Id")
    private int id;

    @Column(name = "Name", nullable = false)
    private String name;

    @Column(name = "Description")
    private String description;

    @Column(name = "Position", nullable = false)
    private Geometry position;

    //getters and setters are ommited 
} 
```

测试代码：

```
@Test
public void testQueryCache(){
    int size = 10000;
    Location lo = null;
    long startTime = System.currentTimeMillis();
    Session currentSession = sessionFactory.openSession();
    for (int i = 0; i< size ; i++){
        Transaction transaction = currentSession.beginTransaction();
        lo = (Location) currentSession.createCriteria(Location.class)
            .add(Restrictions.eq("id", 86))
            .setCacheable(true)
            .uniqueResult();
        transaction.commit();
    }
    long stopTime = System.currentTimeMillis();
    Assert.assertNotNull(lo);
    System.out.println(String.format("\t %d ms", stopTime - startTime));

    Cache cache = CacheManager.getInstance().getCache("Location");
    System.out.println(cache.getStatistics().toString());

    SecondLevelCacheStatistics statistics = sessionFactory.getStatistics().getSecondLevelCacheStatistics("Location");
    System.out.println(statistics.toString());
}

@Test
public void testEhcacheWithGet(){
    int size = 10000;
    Location lo = null;
    long startTime = System.currentTimeMillis();
    for (int i = 0; i< size ; i++){
        Session currentSession = sessionFactory.openSession();
        Transaction transaction = currentSession.beginTransaction();
            lo = (Location) currentSession.get(Location.class, 86);
        transaction.commit();
        currentSession.close();
    }

    long stopTime = System.currentTimeMillis();
    Assert.assertNotNull(lo);
    System.out.println(String.format("\t %d ms", stopTime - startTime));

    Cache cache = CacheManager.getInstance().getCache("Location");
    System.out.println(cache.getStatistics().toString());

    SecondLevelCacheStatistics statistics = sessionFactory.getStatistics().getSecondLevelCacheStatistics("Location");
    System.out.println(statistics.toString());
} 
```

@testQueryCache 的控制台消息：

```
2012-06-15 15:07:03,953 DEBUG [org.jboss.logging] - Logging Provider: org.jboss.logging.Log4jLoggerProvider 
2012-06-15 15:07:04,917 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from ehcache.xml found in the classpath: file:/***PATH***/ehcache.xml 
2012-06-15 15:07:04,920 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from URL: file:/***PATH***/ehcache.xml 
2012-06-15 15:07:04,921 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from InputStream 
2012-06-15 15:07:05,085 DEBUG [net.sf.ehcache.config.DiskStoreConfiguration] - Disk Store Path: c:/_cached 
2012-06-15 15:07:05,125 DEBUG [net.sf.ehcache.util.PropertyUtil] - propertiesString is null. 
2012-06-15 15:07:05,139 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheManagerEventListenerFactory class specified. Skipping... 
2012-06-15 15:07:05,186 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:07:05,186 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:07:05,188 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:07:05,190 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:07:05,191 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:07:05,191 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:07:05,191 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:07:05,192 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:07:05,192 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:07:05,192 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:07:05,193 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:07:05,193 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:07:05,222 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.UpdateTimestampsCache 
2012-06-15 15:07:05,230 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:07:05,242 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:07:05,243 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:07:05,252 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.UpdateTimestampsCache 
2012-06-15 15:07:05,252 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'org.hibernate.cache.UpdateTimestampsCache'. 
2012-06-15 15:07:05,253 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.UpdateTimestampsCache'. 
2012-06-15 15:07:05,253 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for Location 
2012-06-15 15:07:05,258 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file Location.index 
2012-06-15 15:07:05,259 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\Location.index 
2012-06-15 15:07:05,259 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file Location.index 
2012-06-15 15:07:05,260 DEBUG [net.sf.ehcache.Cache] - Initialised cache: Location 
2012-06-15 15:07:05,260 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'Location'. 
2012-06-15 15:07:05,263 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'Location'. 
2012-06-15 15:07:05,264 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.StandardQueryCache 
2012-06-15 15:07:05,265 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:07:05,266 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:07:05,267 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:07:05,268 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.StandardQueryCache 
2012-06-15 15:07:05,268 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'org.hibernate.cache.StandardQueryCache'. 
2012-06-15 15:07:05,272 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.StandardQueryCache'. 
2012-06-15 15:07:05,482 WARN [org.hibernate.cache.ehcache.AbstractEhcacheRegionFactory] - HHH020003: Could not find a specific ehcache configuration for cache named [org.hibernate.cache.spi.UpdateTimestampsCache]; using defaults. 
2012-06-15 15:07:05,483 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.spi.UpdateTimestampsCache 
2012-06-15 15:07:05,484 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:07:05,486 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:07:05,487 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:07:05,488 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.spi.UpdateTimestampsCache 
2012-06-15 15:07:05,488 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.spi.UpdateTimestampsCache'. 
2012-06-15 15:07:05,491 WARN [org.hibernate.cache.ehcache.AbstractEhcacheRegionFactory] - HHH020003: Could not find a specific ehcache configuration for cache named [org.hibernate.cache.internal.StandardQueryCache]; using defaults. 
2012-06-15 15:07:05,492 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.internal.StandardQueryCache 
2012-06-15 15:07:05,493 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:07:05,495 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:07:05,495 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:07:05,496 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.internal.StandardQueryCache 
2012-06-15 15:07:05,497 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.internal.StandardQueryCache'. 
2012-06-15 15:07:05,772 DEBUG [net.sf.ehcache.store.disk.Segment] - put added 0 on heap 
2012-06-15 15:07:05,783 DEBUG [net.sf.ehcache.store.disk.Segment] - put added 0 on heap 
2012-06-15 15:07:05,794 DEBUG [net.sf.ehcache.store.disk.Segment] - fault removed 0 from heap 
2012-06-15 15:07:05,794 DEBUG [net.sf.ehcache.store.disk.Segment] - fault added 0 on disk 
2012-06-15 15:07:05,795 DEBUG [net.sf.ehcache.store.disk.Segment] - fault removed 0 from heap 
2012-06-15 15:07:05,795 DEBUG [net.sf.ehcache.store.disk.Segment] - fault added 0 on disk 
2012-06-15 15:07:06,190 DEBUG [net.sf.ehcache.util.UpdateChecker] - Checking for update... 
     2586 ms
2012-06-15 15:07:08,152 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from ehcache.xml found in the classpath: file:/***PATH***/ehcache.xml 
2012-06-15 15:07:08,153 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from URL: file:/***PATH***/ehcache.xml 
2012-06-15 15:07:08,155 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from InputStream 
2012-06-15 15:07:08,159 DEBUG [net.sf.ehcache.config.DiskStoreConfiguration] - Disk Store Path: c:/_cached 
[  name = Location cacheHits = 0 onDiskHits = 0 offHeapHits = 0 inMemoryHits = 0 misses = 0 onDiskMisses = 0 offHeapMisses = 0 inMemoryMisses = 0 size = 1 averageGetTime = 0.0 evictionCount = 0 ]
2012-06-15 15:07:08,174 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Located valid 'tools.jar' at 'C:\Program Files (x86)\Java\jdk1.6.0_31\jre\..\lib\tools.jar' 
2012-06-15 15:07:08,184 INFO [net.sf.ehcache.pool.sizeof.JvmInformation] - Detected JVM data model settings of: 32-Bit HotSpot JVM 
2012-06-15 15:07:08,240 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Extracted agent jar to temporary file C:\Users\****\AppData\Local\Temp\ehcache-sizeof-agent6609755822520222855.jar 
2012-06-15 15:07:08,241 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Trying to load agent @ C:\Users\****\AppData\Local\Temp\ehcache-sizeof-agent6609755822520222855.jar 
2012-06-15 15:07:08,247 INFO [net.sf.ehcache.pool.impl.DefaultSizeOfEngine] - using Agent sizeof engine 
SecondLevelCacheStatistics[hitCount=0,missCount=0,putCount=0,elementCountInMemory=1,elementCountOnDisk=1,sizeInMemory=760] 
```

@testEhcacheWithGet 的控制台消息：

```
2012-06-15 15:09:26,046 DEBUG [org.jboss.logging] - Logging Provider: org.jboss.logging.Log4jLoggerProvider 
2012-06-15 15:09:26,993 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from ehcache.xml found in the classpath: file:/***PATH***/ehcache.xml 
2012-06-15 15:09:26,995 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from URL: file:/***PATH***/ehcache.xml 
2012-06-15 15:09:26,997 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from InputStream 
2012-06-15 15:09:27,156 DEBUG [net.sf.ehcache.config.DiskStoreConfiguration] - Disk Store Path: c:/_cached 
2012-06-15 15:09:27,188 DEBUG [net.sf.ehcache.util.PropertyUtil] - propertiesString is null. 
2012-06-15 15:09:27,200 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheManagerEventListenerFactory class specified. Skipping... 
2012-06-15 15:09:27,247 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:09:27,248 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:09:27,249 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:09:27,251 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:09:27,252 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:09:27,252 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:09:27,252 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:09:27,252 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:09:27,256 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:09:27,257 DEBUG [net.sf.ehcache.Cache] - No BootstrapCacheLoaderFactory class specified. Skipping... 
2012-06-15 15:09:27,257 DEBUG [net.sf.ehcache.Cache] - CacheWriter factory not configured. Skipping... 
2012-06-15 15:09:27,257 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - No CacheExceptionHandlerFactory class specified. Skipping... 
2012-06-15 15:09:27,285 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.StandardQueryCache 
2012-06-15 15:09:27,292 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:09:27,304 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:09:27,305 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.StandardQueryCache.index 
2012-06-15 15:09:27,314 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.StandardQueryCache 
2012-06-15 15:09:27,314 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'org.hibernate.cache.StandardQueryCache'. 
2012-06-15 15:09:27,314 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.StandardQueryCache'. 
2012-06-15 15:09:27,316 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for Location 
2012-06-15 15:09:27,318 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file Location.index 
2012-06-15 15:09:27,319 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\Location.index 
2012-06-15 15:09:27,319 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file Location.index 
2012-06-15 15:09:27,320 DEBUG [net.sf.ehcache.Cache] - Initialised cache: Location 
2012-06-15 15:09:27,320 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'Location'. 
2012-06-15 15:09:27,323 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'Location'. 
2012-06-15 15:09:27,324 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.UpdateTimestampsCache 
2012-06-15 15:09:27,325 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:09:27,326 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:09:27,327 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.UpdateTimestampsCache.index 
2012-06-15 15:09:27,328 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.UpdateTimestampsCache 
2012-06-15 15:09:27,328 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured. Skipping for 'org.hibernate.cache.UpdateTimestampsCache'. 
2012-06-15 15:09:27,328 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.UpdateTimestampsCache'. 
2012-06-15 15:09:27,530 WARN [org.hibernate.cache.ehcache.AbstractEhcacheRegionFactory] - HHH020003: Could not find a specific ehcache configuration for cache named [org.hibernate.cache.spi.UpdateTimestampsCache]; using defaults. 
2012-06-15 15:09:27,531 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.spi.UpdateTimestampsCache 
2012-06-15 15:09:27,533 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:09:27,534 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:09:27,534 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.spi.UpdateTimestampsCache.index 
2012-06-15 15:09:27,538 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.spi.UpdateTimestampsCache 
2012-06-15 15:09:27,539 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.spi.UpdateTimestampsCache'. 
2012-06-15 15:09:27,544 WARN [org.hibernate.cache.ehcache.AbstractEhcacheRegionFactory] - HHH020003: Could not find a specific ehcache configuration for cache named [org.hibernate.cache.internal.StandardQueryCache]; using defaults. 
2012-06-15 15:09:27,545 DEBUG [net.sf.ehcache.store.MemoryStore] - Initialized net.sf.ehcache.store.MemoryStore for org.hibernate.cache.internal.StandardQueryCache 
2012-06-15 15:09:27,546 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:09:27,548 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Matching data file missing (or empty) for index file. Deleting index file c:\_cached\org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:09:27,548 DEBUG [net.sf.ehcache.store.disk.DiskStorageFactory] - Failed to delete file org.hibernate.cache.internal.StandardQueryCache.index 
2012-06-15 15:09:27,549 DEBUG [net.sf.ehcache.Cache] - Initialised cache: org.hibernate.cache.internal.StandardQueryCache 
2012-06-15 15:09:27,549 DEBUG [net.sf.ehcache.config.ConfigurationHelper] - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.internal.StandardQueryCache'. 
2012-06-15 15:09:27,835 DEBUG [net.sf.ehcache.store.disk.Segment] - put added 0 on heap 
2012-06-15 15:09:27,869 DEBUG [net.sf.ehcache.store.disk.Segment] - fault removed 0 from heap 
2012-06-15 15:09:27,870 DEBUG [net.sf.ehcache.store.disk.Segment] - fault added 0 on disk 
2012-06-15 15:09:28,251 DEBUG [net.sf.ehcache.util.UpdateChecker] - Checking for update... 
     4283 ms
2012-06-15 15:09:31,910 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from ehcache.xml found in the classpath: file:/***PATH***/ehcache.xml 
2012-06-15 15:09:31,911 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from URL: file:/***PATH***/ehcache.xml 
2012-06-15 15:09:31,912 DEBUG [net.sf.ehcache.config.ConfigurationFactory] - Configuring ehcache from InputStream 
2012-06-15 15:09:31,915 DEBUG [net.sf.ehcache.config.DiskStoreConfiguration] - Disk Store Path: c:/_cached 
[  name = Location cacheHits = 0 onDiskHits = 0 offHeapHits = 0 inMemoryHits = 0 misses = 0 onDiskMisses = 0 offHeapMisses = 0 inMemoryMisses = 0 size = 1 averageGetTime = 0.0 evictionCount = 0 ]
2012-06-15 15:09:31,932 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Located valid 'tools.jar' at 'C:\Program Files (x86)\Java\jdk1.6.0_31\jre\..\lib\tools.jar' 
2012-06-15 15:09:31,942 INFO [net.sf.ehcache.pool.sizeof.JvmInformation] - Detected JVM data model settings of: 32-Bit HotSpot JVM 
2012-06-15 15:09:32,001 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Extracted agent jar to temporary file C:\Users\****\AppData\Local\Temp\ehcache-sizeof-agent6451434728035591561.jar 
2012-06-15 15:09:32,002 INFO [net.sf.ehcache.pool.sizeof.AgentLoader] - Trying to load agent @ C:\Users\****\AppData\Local\Temp\ehcache-sizeof-agent6451434728035591561.jar 
2012-06-15 15:09:32,009 INFO [net.sf.ehcache.pool.impl.DefaultSizeOfEngine] - using Agent sizeof engine 
SecondLevelCacheStatistics[hitCount=0,missCount=0,putCount=0,elementCountInMemory=1,elementCountOnDisk=1,sizeInMemory=760] 
```

请帮我弄清楚我做错了什么！！！:(

太感谢了！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T17:57:10.037

迟到的反应，但

尝试添加要跟踪`statistics="true"`的元素。`<cache>`还要添加 `<property name="hibernate.generate_statistics">true</property>`hibernate.cfg.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:33:41.010

你有没有尝试过：

```
sessionFactory.getCurrentSession().get(Location.class, 86); 
```

而不是使用标准查询？据我了解，Hibernate 只会通过@Id 加载对象来命中二级缓存，因此在会话上使用 get/load。

如果您使 Criteria 可缓存：

```
sessionFactory.getCurrentSession.createCriteria().setCacheable(true).uniqueResult(); 
```

并启用实体和查询缓存，您将在执行该查询时访问二级缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:03:31.777

只是快速扫描这个，但你确实配置使用休眠来使用`net.sf.ehcache.hibernate.EhCacheRegionFactory`，而不是`singleton`，然后使用`CacheManager.getInstance()`......你是否尝试通过休眠状态监控缓存活动？想知道您是否真的使用与`CacheManage`Hibernate 相同的...

# sql - 在日期之间选择的存储过程？

> ID：11050198
> 
> 赞同：3
> 
> 时间：2012-06-15T11:55:22.483
> 
> 标签：sql, tsql, date, stored-procedures

我正在编写一个存储过程来选择信息，我希望它只在日期之间进行选择？

**这就是它现在的样子：**

```
ALTER PROCEDURE [dbo].[AutoCompleate] 
 @DateFrom datetime,
 @DateTo datetime,
 @SearchField varchar(50)
 AS

 -- V1.0 : ShaunM : 15 jun 2012
    --  AutoComplete textbox

 exec ('
 SELECT DISTINCT ' +
 @SearchField + ' FROM SchemaAudit 
             ORDER BY ' + @SearchField +' ASC') 
```

我希望选择在@DateTo 和DateFrom 之间运行以进入数据库，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:18:23.867

您应该使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)而不是 exec ，它允许使用参数，避免 Sql 注入的风险，并避免将日期作为字符串传递的潜在问题。第一个参数是查询，第二个是参数列表及其类型，其余的是参数值。

```
alter PROCEDURE [dbo].[AutoCompleate] 
     @DateFrom datetime,
     @DateTo datetime,
     @SearchField varchar(50)
     AS

     -- V1.0 : ShaunM : 15 jun 2012
        --  AutoComplete textbox

    declare @sql nvarchar(max)
    set @sql = 'SELECT DISTINCT ' 
             + quotename(@SearchField)
             + ' FROM SchemaAudit'
             + ' WHERE [Date] between @from AND @to ORDER BY '
             + quotename(@SearchField)
             + ' ASC'

     exec sp_executesql @sql, 
                        N'@from datetime, @to datetime', 
                        @from = @DateFrom, @to = @DateTo 
```

现在，关于开始日期和结束日期，您到底想做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:57:41.177

使用[之间](http://technet.microsoft.com/en-us/library/ms174081.aspx)

```
Where StartDate BETWEEN @DateFrom and @DateTo 
```

编辑：正如 Nalaka526 指出的那样，我错过了 EndDate，您不能将 BETWEEN 与两个字段一起使用，您需要将其转换为 varchar 并使用 >= 和 <= 在范围之间进行比较。生硬的解决方案就是这样做的。

```
 WHERE StartDate >= ' + Convert(varchar(20),@DateFrom) + 'AND EndDate >= ' + Convert(varchar(20),@DateTo) + ' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:57:45.040

您需要`CAST`将日期参数设置为`varchar`：

```
exec ('
     SELECT DISTINCT ' +
     @SearchField + ' FROM SchemaAudit WHERE StartDate >= "' + CAST(@DateFrom as varchar(20)) + '" AND EndDate >= "' + CAST(@DateTo as varchar(20)) + '"
                 ORDER BY ' + @SearchField +' ASC') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T12:00:16.567

忽略这种技术可能使您容易受到 SQL 注入攻击的事实，您需要使用`Convert`将日期转换为 varchar

```
Convert(varchar(20), DateTime, 111) 
```

# css - CSS3 背景过渡

> ID：11050199
> 
> 赞同：3
> 
> 时间：2012-06-15T11:55:22.640
> 
> 标签：css, transitions

所以我想准确地重新创建丝带过渡[http://subtlepatterns.com/](http://subtlepatterns.com/)但我做错了。我的功能区图像是 140x160 [width,height] 但悬停没有任何反应。

我放：

```
#toplogo {
    position: absolute;
    left: 400px;
    background-position: 0px -10px;
    z-index: 5000;
}

#toplogo a {
    background: url('ribbon.png') no-repeat;
    width: 140px;
    height: 160px;
    display: block;
    background-position: 0px -10px;
    text-indent: -9999px;
    -webkit-transition: 0.10s ease-in;
    -moz-transition: 0.10s ease-in;
}

<div id="toplogo"> <a href="/">hello</a> </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:58:59.827

在 CSS 中添加这个 -

```
#toplogo a:hover{
  background-position: 0px 0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:16:27.783

尝试

```
#toplogo a {
    background: url('ribbon.png') no-repeat;
    width: 140px;
    height: 160px;
    display: block;
    background-position: 0px -10px;
    text-indent: -9999px;
    -webkit-transition: background-position .1s ease-in;
    -moz-transition: background-position .1s ease-in;
}

#toplogo a:hover {
  background-position: 0 0;
} 
```

# java - 为什么 Java 7 为已签名的应用程序请求网络权限？

> ID：11050202
> 
> 赞同：9
> 
> 时间：2012-06-15T11:56:14.267
> 
> 标签：java, security, java-web-start

从 Java 7 Update 5 开始，我的 Java Web Start 应用程序正在请求建立连接的权限。应用程序使用有效证书进行签名。

将显示一个弹出窗口，其中包含以下文本：

> 该应用程序已请求建立与 www.example.com 的连接的权限。您要允许此操作吗？[确定] [取消]

在拒绝请求时，我在控制台上得到了这个跟踪：

```
Uncaught error fetching image:
java.lang.SecurityException
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkConnect(Unknown Source)
    at com.sun.javaws.security.JavaWebStartSecurity.checkConnect(Unknown Source)
    at sun.awt.image.URLImageSource.checkSecurity(Unknown Source)
    at sun.awt.image.ImageRepresentation.imageComplete(Unknown Source)
    at sun.awt.image.InputStreamImageSource.errorConsumer(Unknown Source)
    at sun.awt.image.InputStreamImageSource.setDecoder(Unknown Source)
    at sun.awt.image.InputStreamImageSource.doFetch(Unknown Source)
    at sun.awt.image.ImageFetcher.fetchloop(Unknown Source)
    at sun.awt.image.ImageFetcher.run(Unknown Source) 
```

这是请求权限时的线程转储：

```
"Image Fetcher 2" daemon prio=8 tid=0x04198000 nid=0xc24 in Object.wait() [0x0470e000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x1d67b050> (a java.lang.Object)
        at java.lang.Object.wait(Object.java:503)
        at com.sun.javaws.ui.JavawsSysRun.delegate(Unknown Source)
        - locked <0x1d67b050> (a java.lang.Object)
        at com.sun.deploy.util.DeploySysRun.execute(Unknown Source)
        at com.sun.deploy.util.DeploySysRun$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.sun.deploy.util.DeploySysRun.executePrivileged(Unknown Source)
        at com.sun.deploy.ui.UIFactory.showApiDialog(Unknown Source)
        at com.sun.deploy.uitoolkit.impl.awt.ui.UIFactoryImpl.showMessageDialog(Unknown Source)
        at com.sun.deploy.uitoolkit.impl.awt.ui.UIFactoryImpl.showMessageDialog(Unknown Source)
        at com.sun.jnlp.ApiDialog.askUser(Unknown Source)
        at com.sun.jnlp.ApiDialog.askUser(Unknown Source)
        at com.sun.jnlp.ApiDialog.askConnect(Unknown Source)
        at com.sun.javaws.security.JavaWebStartSecurity.checkConnect(Unknown Source)
        at java.net.InetAddress.getAllByName0(Unknown Source)
        at java.net.InetAddress.getAllByName(Unknown Source)
        at java.net.InetAddress.getByName(Unknown Source)
        at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sun.deploy.cache.Cache.getCurrentIP(Unknown Source)
        at com.sun.deploy.cache.Cache.isCacheEntryIPValid(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntryFromIdxFiles(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntry(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntry(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntry(Unknown Source)
        at com.sun.deploy.net.DownloadEngine.isUpdateAvailable(Unknown Source)
        at com.sun.deploy.cache.DeployCacheHandler.get(Unknown Source)
        - locked <0x12fd06d0> (a java.lang.Object)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.followRedirect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
        - locked <0x12fd0728> (a sun.net.www.protocol.http.HttpURLConnection)
        at com.sun.deploy.net.CrossDomainXML.check(Unknown Source)
        at com.sun.deploy.net.CrossDomainXML.check(Unknown Source)
        - locked <0x1d6fcf40> (a java.lang.Class for com.sun.deploy.net.CrossDomainXML)
        at com.sun.javaws.security.JavaWebStartSecurity.checkConnect(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        - locked <0x12fd09b8> (a sun.net.www.http.HttpClient)
        at sun.net.www.http.HttpClient.<init>(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
        - locked <0x12fd0a40> (a sun.net.www.protocol.http.HttpURLConnection)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
        at javax.xml.parsers.SAXParser.parse(Unknown Source)
        at com.sun.deploy.net.CrossDomainXML$2.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.sun.deploy.net.CrossDomainXML.check(Unknown Source)
        at com.sun.deploy.net.CrossDomainXML.check(Unknown Source)
        - locked <0x1d6fcf40> (a java.lang.Class for com.sun.deploy.net.CrossDomainXML)
        at com.sun.javaws.security.JavaWebStartSecurity.checkConnect(Unknown Source)
        at sun.awt.image.URLImageSource.checkSecurity(Unknown Source)
        at sun.awt.image.InputStreamImageSource.setDecoder(Unknown Source)
        at sun.awt.image.InputStreamImageSource.doFetch(Unknown Source)
        at sun.awt.image.ImageFetcher.fetchloop(Unknown Source)
        at sun.awt.image.ImageFetcher.run(Unknown Source)

"AWT-EventQueue-0" prio=6 tid=0x0315f800 nid=0xc80 waiting on condition [0x037cf000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x1d6b46a8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
        at java.awt.EventQueue.getNextEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

"javawsApplicationMain" prio=6 tid=0x040b4c00 nid=0x1198 in Object.wait() [0x0461f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x1db95260> (a java.awt.MediaTracker)
        at java.awt.MediaTracker.waitForID(Unknown Source)
        - locked <0x1db95260> (a java.awt.MediaTracker)
        at javax.swing.ImageIcon.loadImage(Unknown Source)
        - locked <0x1db95260> (a java.awt.MediaTracker)
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at com.mycompany.myapp.j.c(Unknown Source)
        at com.mycompany.myapp.j.<init>(Unknown Source)
        at com.mycompany.myapp.MainClass.main(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sun.javaws.Launcher.executeApplication(Unknown Source)
        at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
        at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
        at com.sun.javaws.Launcher.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)

"CacheCleanUpThread" daemon prio=6 tid=0x03232800 nid=0x1048 waiting for monitor entry [0x0390f000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at com.sun.deploy.net.CrossDomainXML.quickCheck(Unknown Source)
        - waiting to lock <0x1d6fcf40> (a java.lang.Class for com.sun.deploy.net.CrossDomainXML)
        at com.sun.javaws.security.JavaWebStartSecurity.checkConnect(Unknown Source)
        at java.net.InetAddress.getAllByName0(Unknown Source)
        at java.net.InetAddress.getAllByName(Unknown Source)
        at java.net.InetAddress.getByName(Unknown Source)
        at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sun.deploy.cache.Cache.getCurrentIP(Unknown Source)
        at com.sun.deploy.cache.Cache.isCacheEntryIPValid(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntryFromFile(Unknown Source)
        at com.sun.deploy.cache.Cache.getCacheEntryFromFile(Unknown Source)
        at com.sun.deploy.cache.CleanupThread.getCurrentCacheSize(Unknown Source)
        at com.sun.deploy.cache.CleanupThread.run(Unknown Source)
        - locked <0x1d6b5518> (a java.lang.Object)

"Javaws Secure Thread" daemon prio=6 tid=0x03158c00 nid=0xb9c in Object.wait() [0x0377f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x12fd1e58> (a java.awt.EventQueue$1AWTInvocationLock)
        at java.lang.Object.wait(Object.java:503)
        at java.awt.EventQueue.invokeAndWait(Unknown Source)
        - locked <0x12fd1e58> (a java.awt.EventQueue$1AWTInvocationLock)
        at javax.swing.SwingUtilities.invokeAndWait(Unknown Source)
        at com.sun.deploy.ui.DialogTemplate.setVisible(Unknown Source)
        at com.sun.deploy.ui.UIFactory$10.execute(Unknown Source)
        at com.sun.javaws.ui.JavawsSysRun$SecureThread.doWork(Unknown Source)
        at com.sun.javaws.ui.JavawsSysRun$SecureThread.run(Unknown Source)
        - locked <0x1d67b050> (a java.lang.Object) 
```

该应用程序包含一个从网站获取图像的欢迎屏幕，然后关闭此屏幕并显示主应用程序窗口。警告仅在出现欢迎屏幕之前显示。启动应用程序后，尽管应用程序启动了多个连接，但不会显示其他警告。

是什么导致了这个问题？这是 Java 7u5 中的回归还是新功能？[我在发行说明](http://www.oracle.com/technetwork/java/javase/7u5-relnotes-1653274.html)中没有看到对此的任何引用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T16:41:22.783

我们也遇到了这个问题，有时还会出现安全弹出窗口导致死锁。（由于其他 webstart 错误）。这很可能是由于发行说明中对 7u5 中 7177094 的“修复”。我试图对您的错误 # 7177349 发表评论，但对此的评论不可用。

# php - facebook登录不起作用php sdk 3.0 oauth2.0

> ID：11050204
> 
> 赞同：1
> 
> 时间：2012-06-15T11:56:26.023
> 
> 标签：php, facebook, oauth-2.0

我正在使用 facebook api 3.00（来自 github 的那个）。当我点击登录链接时，我被重定向到 facebook 的身份验证页面。

当它回来时，它显示`$user`为空，但这工作正常：

```
print $facebook->getAccessToken() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:37:30.413

最后我能够解决它。如果 $user 为空，则尝试在未登录的情况下访问 facebook。可能这行不通（至少如果这是问题所在）。**只是现在它会显示**证书有问题。 `Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false; Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 2;`

并且证书问题已解决。之后，用户身份验证也起作用了。

# matlab - Matlab中的文本进度条

> ID：11050205
> 
> 赞同：9
> 
> 时间：2012-06-15T11:56:28.253
> 
> 标签：matlab, progress-bar

我有一个需要一些时间才能运行的 Matlab 函数，我想向用户展示正在取得的进展。`disp`每隔 5% 左右查看一次进度会使屏幕过于混乱，因为之前的文本不会被删除。

如何解决这个问题？命令窗口中还有其他重要信息，因此清除它是不可能的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-31T15:04:54.773

在命令行窗口中显示进度也是可能的（而且可能更容易）。[我在http://undocumentedmatlab.com/blog/command-window-text-manipulation/](http://undocumentedmatlab.com/blog/command-window-text-manipulation/)上找到了一个非常简单、快速实施的解决方案。

```
reverseStr = '';
for idx = 1 : someLargeNumber

   % Do some computation here...

   % Display the progress
   percentDone = 100 * idx / someLargeNumber;
   msg = sprintf('Percent done: %3.1f', percentDone); %Don't forget this semicolon
   fprintf([reverseStr, msg]);
   reverseStr = repmat(sprintf('\b'), 1, length(msg));
end 
```

如果您嵌入此代码，命令行将显示（例如）：“Percent done: 27.8”，而无需每次迭代都输入换行符！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-15T12:34:33.600

您可以`waitbar`为此使用功能。请参阅[waitbar 上的 MATLAB 文档](http://www.mathworks.se/help/techdoc/ref/waitbar.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:59:33.780

看看这个： http: [//www.mathworks.com/matlabcentral/fileexchange/3607-progressbar](http://www.mathworks.com/matlabcentral/fileexchange/3607-progressbar)和 [http://www.mathworks.com/matlabcentral/fileexchange/26773-progress-bar](http://www.mathworks.com/matlabcentral/fileexchange/26773-progress-bar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T11:00:24.380

基本上@Ergodicity 所写的内容是正确的，如果您将标准输出设置为缓冲（顺便说一句），则仅适用于 Octave，您必须通过 page_output_immediately(1) 启用它；[有关更多octave 文档](https://www.gnu.org/software/octave/doc/interpreter/Paging-Screen-Output.html#XREFpage_005foutput_005fimmediately)，请参阅此页面：终端输出

对提议的代码进行非常简短的修改：

```
reverseStr = '';
fprintf('Percent done: ');
for idx = 1 : someLargeNumber
   % Do some computation here...
   % Display the progress
   percentDone = 100 * idx / someLargeNumber;
   msg = sprintf('%3.1f', percentDone); %Don't forget this semicolon
   fprintf([reverseStr, msg]);
   reverseStr = repmat(sprintf('\b'), 1, length(msg));
end 
```

# java - RenderX 中的 CGM 文件支持

> ID：11050206
> 
> 赞同：1
> 
> 时间：2012-06-15T11:56:28.167
> 
> 标签：java, xml, pdf, xml-formatting, renderx

RenderX 是否支持 CGM 文件格式？早些时候，对相同的支持不存在。是否有任何解决方法可以实现相同的目标？

经过几次尝试，我们发现了一个名为 JCGM 的工具，它生成了 FO，可以用作 RenderX 的输入。但是在尝试时会出现以下问题。

[错误] 无法创建图像文件：/D:/test.cgm 类型为 null [错误] com.renderx.graphics.ImageFormatException: com.renderx.util.Magic$UnknownMIMETypeException: 无法确定文件'file:/ 的 mime 类型D:/test.cgm'

**FO 文件有以下几行：**

```
<fo:block id="page.1460112090007da8004b69a" line-height="0"/>
<fo:block keep-together="always" start-indent="0pt">
<fo:external-graphic src="test.cgm"/>
<fo:block padding-top="0pt" padding-bottom="10pt" font-size="10pt" text-align="center" font-style="italic">Figure 1  </fo:block> 
```

FO->XEP 因上述错误而失败，生成 XEP->PDF 后，PDF 中将看不到绘图。

我们将 xep-debug.jar 用于 RenderX。由于 RenderX 不支持 CGM 图形格式，我们使用 jcgm-core-0.2.0.jar 和 jcgm-image-0.1.1.jar 来支持 CGM 读取/渲染。有没有其他方法可以包含插件 jar，以便 RenderX 可以使用它们来渲染 CGM 绘图？

任何指针都会有很大帮助。

# asp.net - 如何使用剃刀视图引擎在asp.net mvc项目的视图页面中打印@ OR {？

> ID：11050209
> 
> 赞同：1
> 
> 时间：2012-06-15T11:56:43.037
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

如果我们在视图页面之间有 ac# 代码，并且想要在字符串之间`@`或`{`之间打印字符串。如何在视图页面中实现。

例子-

```
@if(rules)
{

/////////////print something here with @ and {//////

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:58:55.477

@@ 是 Razor 视图中 @ 的转义字符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T11:58:13.107

将其包装在`<text>`标签中。

```
<text>test@test.com</text> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:00:21.007

`@@`是在 MVC Razor 中这样做的方式

# asp.net - 我的 DLLImport 在 Winform 应用程序中运行良好，但在 Asp.net WebFormApplication 中出现异常

> ID：11050210
> 
> 赞同：1
> 
> 时间：2012-06-15T11:56:47.463
> 
> 标签：asp.net, winforms, dllimport

我的`DLLImport`（A Delphi DLL）与 Winform 应用程序配合良好，但我的 ASP.net WebForm 应用程序（在 IIS 7 上）出现异常。

有人可以告诉我为什么以及如何处理它吗？

```
[DllImport("DLL_YINLIAN_INTERFACE.dll", EntryPoint = "YL_SetParam", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        static extern int YL_SetParam(int iParamIndex, byte[] ucParamBuffer); 
```

这是调试时的异常：

```
System.Runtime.InteropServices.SEHException (0x80004005): 
   External component has thrown an exception.
   at JFTHardAPI.SandTran.YL_SetParam(Int32 iParamIndex, Byte[] ucParamBuffer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:10:25.480

`SEHException`从非托管代码中抛出。使用调试器：`Debug > Exceptions`，**打开**.`Thrown flag for Win32 Exceptions`

另外，尝试将非托管函数更改为使用`StdCall`. `Check the calling convention`在托管和非托管方面。使用错误的调用约定会影响调用堆栈的状态。![在此处输入图像描述](../Images/0008d82d085f4934d7bd5495de823f47.png)

# python - 在 VariantDir() 环境中使用 Glob() 在 Python 中递归查找文件？

> ID：11050211
> 
> 赞同：4
> 
> 时间：2012-06-15T11:56:51.107
> 
> 标签：python, scons

如何在 Python 环境中进行`Glob()`递归`VariantDir()`？

问题的答案<[使用 Glob() 在 Python 中递归查找文件？](https://stackoverflow.com/questions/2186525/use-a-glob-to-find-files-recursively-in-python)> 将不起作用，因为您需要使用`Glob()`来获取了解`VariantDir()`环境的文件列表。

所以你需要类似的东西：

```
import fnmatch
import os

matches = []
for root, dirnames, filenames in os.walk('src'):
  for filename in fnmatch.filter(filenames, '*.c'):
    matches.append(os.path.join(root, filename))

matches = Glob(matches) 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-23T18:57:49.733

我相信接受的答案只有在您的源目录是`'.'`.

这是一个工作示例，其中源目录为`src`，变体目录为`build`.

# 文件布局

```
.
├── include
│   └── sum.h
├── SConstruct
└── src
    ├── dir
    │   └── sum.cpp
    └── main.cpp 
```

# 文件

总和.h

```
#ifndef _SUM_H_
#define _SUM_H_

double sum(const double x, const double y);

#endif 
```

主文件

```
#include <iostream>
#include <sum.h>

using namespace std;

int main() {

    cout << "Sum of 1 and 2 = " << sum(1., 2.) << endl;
    return 0;
} 
```

总和.cpp

```
#include <sum.h>

double sum(const double x, const double y) {
    return x + y;
} 
```

SConstruct

```
import os

def variantglob(env, pattern, ondisk=True, source=True, strings=False,
                recursive=False):
    matches = []
    for root, dirs, filenames in os.walk(env['SOURCE_DIR']):
        cwd = Dir(os.path.join(env['VARIANT_DIR'],
                               os.path.relpath(root, env['SOURCE_DIR'])))
        matches.extend(cwd.glob(pattern, ondisk, source, strings))
    return matches

# Create Build Environment
env = Environment()

# Customize Environment
env.Replace(VARIANT_DIR='build',
            SOURCE_DIR='src')
env.Append(CPPPATH=['include'])

# Setup Variant Directory
VariantDir(variant_dir=env['VARIANT_DIR'],
           src_dir=env['SOURCE_DIR'], duplicate=0)

# Build the executable
exe = env.Program(os.path.join(env['VARIANT_DIR'], 'example'),
                  variantglob(env, '*.cpp', recursive=True))

# Install the executable
Install('bin', exe) 
```

# 建造

只需`scons`在顶级目录执行。这将创建一个`build`目录并将所有临时文件放在那里（变体目录），然后它将构建的结果安装到 bin 文件夹中。

# 跑

执行`bin/example`以查看它的工作。

# 笔记

这个例子是在 linux 上测试的。

# 为什么有效

使用变体目录构建时，您必须指定源的路径，就好像它已经位于变体目录中一样，但这些目录可能还不*存在*。这个 glob 函数遍历源树以构造*将*在变体目录中的路径，然后针对这些路径进行 glob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:48:37.453

您的方法可以进行如下微调：

```
import fnmatch
import os

def RecursiveGlob(pathname)
    matches = []
    for root, dirnames, filenames in os.walk(pathname):
        for filename in fnmatch.filter(filenames, '*.c'):
            matches.append(File(os.path.join(root, filename)))

    return matches 
```

请注意，我将其转换为 File()，因为如果“strings”参数为 false，SCons Glob() 函数将返回 Nodes。

为了能够处理 VariantDir 等并更好地将功能与现有 SCons Glob() 功能集成，您实际上可以合并对现有 Glob() 函数的调用，如下所示：

```
# Notice the signature is similar to the SCons Glob() signature,
# look at scons-2.1.0/engine/SCons/Node/FS.py line 1403
def RecursiveGlob(pattern, ondisk=True, source=True, strings=False):
    matches = []
    # Instead of using os.getcwd() consider passing-in a path
    for root, dirnames, filenames in os.walk(os.getcwd()):
        cwd = Dir(root)
        # Glob() returns a list, so using extend() instead of append()
        # The cwd param isnt documented, (look at the code) but its 
        # how you tell SCons what directory to look in.
        matches.extend(Glob(pattern, ondisk, source, strings, cwd))

    return matches 
```

您可以更进一步并执行以下操作：

```
def MyGlob(pattern, ondisk=True, source=True, strings=False, recursive=False):
    if not recursive:
        return Glob(pattern, ondisk, source, strings)

    matches = []
    # Instead of using os.getcwd() consider passing-in a path
    for root, dirnames, filenames in os.walk(os.getcwd()):
        cwd = Dir(root)
        # Glob() returns a list, so using extend() instead of append()
        # The cwd param isnt documented, (look at the code) but its 
        # how you tell SCons what directory to look in.
        matches.extend(Glob(pattern, ondisk, source, strings, cwd))

    return matches 
```

# iphone - NSMutableRequest 和 NSURLConnection 的最大超时时间

> ID：11050215
> 
> 赞同：3
> 
> 时间：2012-06-15T11:57:16.090
> 
> 标签：iphone, ipad, nsurlconnection, nsurlrequest

我可以在我的应用程序中使用的最大超时间隔是多少。我正在使用以下方法。

```
(id)initWithURL:(NSURL *)URL cachePolicy:(NSURLRequestCachePolicy)cachePolicy timeoutInterval:(NSTimeInterval)timeoutInterval; 
```

我正在使用 GET 方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:18:13.607

`NSTimeInterval`数据类型是**double**数据类型的 typedef，因此支持的最大超时值是**double**数据类型的最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T13:45:16.717

我认为您应该考虑到 HTTP 使用 TCP。TCP 连接不仅由您的应用程序控制，在您的应用程序和服务器之间还有许多路由器和防火墙。

我查看了一个典型的防火墙文档，只是为了了解 TCP 连接的默认超时时间。

对于 CISCO 来说是一小时。

[http://www.cisco.com/c/en/us/td/docs/security/asa/asa91/configuration/firewall/asa_91_firewall_config/conns_connlimits.html#42354](http://www.cisco.com/c/en/us/td/docs/security/asa/asa91/configuration/firewall/asa_91_firewall_config/conns_connlimits.html#42354)

因此，在决定最大连接超时时，也许您应该考虑这些信息。

另请参阅此处的第 5.5 节：[https](https://www.rfc-editor.org/rfc/rfc6202) ://www.rfc-editor.org/rfc/rfc6202 他们声称最佳做法是 30 秒。

# java - 使用提供静态内容的辅助 tomcat 文件夹调试 java Web 应用程序

> ID：11050217
> 
> 赞同：4
> 
> 时间：2012-06-15T11:57:17.763
> 
> 标签：java, tomcat, tomcat7

我有一个 java web 应用程序，我可以通过本地机器 tomcat 7 配置使用 IntelliJ 或 Eclipse 进行调试 `(localhost:8080/javaapp)`

我希望能够引用不属于 java 应用程序的静态内容 - 本地安装在`/staticapp`. 但是，IntelliJ 仅在 java 应用程序可用的情况下启动 tomcat，而不会启动其他应用程序或提供文件。

有没有办法配置 tomcat 以便： -`/staticapp`当 /javaapp 启动时也会启动，因此可以从 / 访问它`javapp pages` - tomcat 将始终在运行时提供 /staticapp 文件夹中的静态内容... staticapp 文件夹树不是真正的“网络应用程序”，它只包含文件夹`javascript/css/images`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:06:15.757

在 Eclipse 中，打开 Tomcat 服务器设置并转到“服务器位置”选项。选择“使用 Tomcat 安装”。

接下来，将部署路径更改为 Tomcat 的（原始）/webapps 文件夹，而不是 eclipse 设置 wtpwebapps。

手动添加静态应用程序（文件夹或 .war 文件）或通过 eclipse 添加到 webapps 文件夹，然后当您发布“javaapp”时，Tomcat 应该在其部署路径中启动每个 Web 应用程序。

# c# - 跟踪在 localhost 上创建的输出文件，但不是在服务器上部署服务时创建的

> ID：11050218
> 
> 赞同：1
> 
> 时间：2012-06-15T11:57:18.143
> 
> 标签：c#, wcf

我正在使用以下 web.config 为我的 WCF 服务启用跟踪。虽然文件是在本地主机上正常创建的，但在部署我的服务的服务器上没有创建文件。

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\log\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

我已授予 ASP.NET 帐户指定文件夹的写入权限。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:04:38.787

这听起来很像权限问题。

您说您授予*了 ASP.NET 帐户的*写入权限，但您的服务可能不在此帐户下运行。

例如，在 IIS 7 Windows 2008 中，默认帐户称为`ApplicationPoolIdentity`. 在 IIS 6 Windows 2003 下，此默认帐户称为`NetworkService`. 但在这两种情况下，当然可以在 IIS 控制面板中进行修改。

*因此，当您说ASP.NET 帐户*以及您授予哪个帐户权限时，您的意思并不十分清楚。此外，除了授予写入权限之外，您可能还需要授予修改权限，以便进程可以在文件不存在时创建文件。否则，您需要先手动创建它。如果您不确定在哪个帐户下运行您的 Web 服务，您可以使用[SysInternals Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)工具来找出答案。

此外，IIRC 日志可能不会立即刷新到日志文件中。它会在内存中保存一段时间并每隔一段时间刷新一次。重新启动应用程序池可确保内容立即刷新到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:07:51.830

上面的答案非常好，值得研究。我还要补充一点，您应该确保在配置文件中启用了消息日志记录。像这样的东西（只是一个例子）：

```
<system.serviceModel>
    <diagnostics>
        <messageLogging
            logEntireMessage="true"
            logMalformedMessages="false"
            logMessagesAtServiceLevel="true"
            logMessagesAtTransportLevel="false"
            maxMessagesToLog="3000"
            maxSizeOfMessageToLog="2000"/>
    </diagnostics>
</system.serviceModel> 
```

我不确定这是否能解决您的问题，但它在过去帮助我解决了类似的问题。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:03:42.540

您是否在 Web 服务器上安装了跟踪功能？

# c# - 如何读取并保留回车和换行符？

> ID：11050235
> 
> 赞同：4
> 
> 时间：2012-06-15T11:59:18.750
> 
> 标签：c#, readline

在读取流上的一行时（对我来说，它实际上是 COM 端口上的流），返回的字符串不包含 \n 或 \r 字符（或 \r\n 组合）。出于记录目的，我想保留它们。目前我的循环如下所示：

```
 while (newPort.BytesToRead > 0)
 {
     received = ReadLine(newPort);

     response.Add(received);
 } 
```

所以基本上我正在读取一个字符串，然后将它添加到一个名为`response`. 我想要的是返回的字符串`received`包含原始流中的 \r 或 \n 或 \r\n ，以及终止一行文本。

这是微不足道的可能吗？甚至不平凡！

我猜这很难做到。我的意思是考虑一下，如果我收到一个\r，我必须获取下一个字符来查看它是否是\n。如果没有下一个字符，我将超时并出现异常。如果有下一个字符但不是 \n，我必须在下一次迭代中将其设为当前字符，依此类推......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:01:24.977

您可以在添加`Environment.NewLine`后追加`received`.

**更新**如果您需要逐字保留原始空格，那么使用`ReadLine`. 在这种情况下，您可以使用`ReadBlock`读取较小的文件块，或者`ReadToEnd`只是获取整个文件。如果您需要标记新行来处理消息，您可以搜索原始字符串以规范化或标记化或您想做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-18T09:11:38.497

这是问题帖子中OP的解决方案：

> 好的，我对此有所了解。这是我认为正确的...：

```
 {
                int s = 0, e = 0;

                for (; e < line.Length; e++)
                {
                    if (line[e] == '\n')
                    {
                        // \n always terminates a line.

                        lines.Add(line.Substring(s, (e - s) + 1));

                        s = e + 1;
                    }
                    if (line[e] == '\r' && (e < line.Length - 1))
                    {
                        // \r only terminates a line if it isn't followed by \n.

                        if (line[e + 1] != '\n')
                        {
                            lines.Add(line.Substring(s, (e - s) + 1));

                            s = e + 1;
                        }
                    }
                }

                // Check for trailing characters not terminated by anything.

                if (s < e)
                {
                    lines.Add(line.Substring(s, (e - s)));
                }
            } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T12:05:31.537

```
while (newPort.BytesToRead > 0)
 {
     received = ReadLine(newPort);

     response.Add(string.Format("{0}{1}", received, System.Environment.Newline);
 } 
```

# android - 在两个 TableRow 之间插入一个或多个新的 TableRow

> ID：11050237
> 
> 赞同：2
> 
> 时间：2012-06-15T11:59:32.370
> 
> 标签：android, layout, tablelayout

我正在开发一个 Android 应用程序。一个 Activity 有一个像这样的 TableLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ereportfillscroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true">

        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/EReportTableLayout"
            android:layout_margin="10dp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:shrinkColumns="*"  
            android:stretchColumns="*">

            <TableRow>
                <TextView
                    android:id="@+id/txtGenInfo"
                    android:layout_span="8"
                    android:layout_gravity="center_horizontal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/layout_title_general_information"
                    android:textAppearance="?android:attr/textAppearanceLarge" />
            </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/txtPONo"
                android:layout_weight=".125"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:text="@string/layout_po_no"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <!-- MORE ROWS -->

    </TableLayout>
        <Button
            android:id="@+id/btnPhoto"
            android:onClick="onTakeAPhotoClick"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Take a photo" />

    </LinearLayout>
</ScrollView> 
```

例如，我需要以编程方式在第一行和第二行之间插入另一个 TableRow。我该怎么做=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:05:39.630

你可以这样做：

```
TableLayout tl = (TableLayout) findViewById(R.id.EReportTableLayout);
tl.addView(tableRowToInsert, index); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:05:55.743

可以试试 addView (View child, int index)

```
 TableLayout tl = (TableLayout)findViewById(R.id.EReportTableLayout);
               /* Create a new row to be added. */
               TableRow tr = new TableRow(this);
               tr.setLayoutParams(new LayoutParams(
                              LayoutParams.FILL_PARENT,
                              LayoutParams.WRAP_CONTENT));
                    /* Create a Button to be the row-content. */
                    TextView textView = new TextView(this);
                   textView .setText("txt");
                   textView .setID(R.id.txtPONo_2);

                    textView .setLayoutParams(new LayoutParams(
                              LayoutParams.FILL_PARENT,
                              LayoutParams.WRAP_CONTENT));

                    tr.addView(textView );
              /* Add row to TableLayout. */
                  tl.addView (tr, index); 
```

# cakephp - 如何在与 CakePHP 的 HABTM 关系中使用“order by”最新帖子获取所有用户

> ID：11050240
> 
> 赞同：1
> 
> 时间：2012-06-15T11:59:39.847
> 
> 标签：cakephp, cakephp-1.3

我在 Post 和 User 模型之间有一个 HABTM 关系。

现在我想接收 Post.published 订购的所有用户。

像这样的东西：

```
...
var $paginate = array(
    'limit' => 8,
    'recursive' => 1,
    'fields' => array('id', 'username', 'image')
);
function index() {
    $this->paginate['conditions'] = array('User.state'=>true);
    $this->paginate['order'] = 'Post.published DESC';
    $this->set('authors', $this->paginate());
}
... 
```

我怎样才能做到这一点？是否可以？

在 MySQL 中： `SELECT users.id, users.username, users.image, posts.published FROM users INNER JOIN posts_users ON users.id = posts_users.user_id INNER JOIN posts ON posts.id = posts_users.post_id ORDER BY posts.published DESC;`

解决方案：

```
function index() {
    $this->paginate['joins'] = array(
        array('table' => 'posts_users', 'alias' => 'PostsUser', 'type' => 'inner', 'conditions'=>array('User.id = PostsUser.user_id')),
        array('table' => 'posts', 'alias' => 'Post', 'type' => 'inner', 'conditions'=>array('Post.id = PostsUser.post_id'))
    );
    $this->paginate['fields'] = array('id', 'username', 'image');
    $this->paginate['conditions'] = array('User.state'=>true);
    $this->paginate['order'] = 'Post.published DESC';
    $this->paginate['group'] = 'User.id';
    $this->set('authors', $this->paginate());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:14:26.633

您可以在分页选项数组中指定连接，就像在查找选项中一样：

```
class PostsController extends AppController {

    public function by_tag ( $tag ) {
        /**
          * This will fetch Posts tagged $tag (say, 'PHP')
          */

        $this->paginate['Post'] = array(
            'limit' => 10,
            'contain' => '',
            'conditions' => array(
                'Post.published' => 1
            ),
            'fields' => array('Post.*', 'Tag.*'),
            'joins' => array(
                array(
                    'table' => 'posts_tags',
                    'type' => 'INNER',
                    'alias' => 'PostTag',
                    'conditions' => array(
                        'Post.id = PostTag.post_id'
                    )
                ),
                array(
                    'table' => 'tags',
                    'alias' => 'Tag',
                    'type' => 'INNER',
                    'conditions' => array(
                        "PostTag.tag_id = Tag.id AND Tag.name = '$tag'"
                    )
                )
            )
        );

        $data = $this->paginate('Post');
        $this->set(compact('data'));
    }
} 
```

[http://planetcakephp.org/aggregator/items/3544-using-mysql-inner-join-in-cakephp-pagination](http://planetcakephp.org/aggregator/items/3544-using-mysql-inner-join-in-cakephp-pagination)

# c++ - 检查另一个 Windows 上共享文件夹的权限失败并拒绝访问？

> ID：11050243
> 
> 赞同：0
> 
> 时间：2012-06-15T12:00:06.893
> 
> 标签：c++, permissions, active-directory, access-denied, shared-directory

我正在编写一些 c++ 代码来检索另一台计算机中共享折叠的权限，“权限”是指允许或拒绝该文件夹的用户或组。

这是在某个远程机器（名为 strServerName，其 ip 为 strServerIP）中获取共享文件夹（名为 strFileName）的 NTFS 安全描述符的函数。问题是当我删除“共享”选项卡中的“所有人”帐户时文件夹中，GetNamedSecurityInfo 函数将失败并出现错误代码 5，这意味着访问被拒绝。但是，如果我保留“所有人”，该功能就可以正常工作。我不能保证某个远程共享文件夹上是否保留了“所有人”。那么如何在没有“Everyone”的情况下让这个功能工作（或其他可以检查权限的方法都可以）？

```
PSECURITY_DESCRIPTOR ADDirectorySearch::getNTFSSecDescriptor2(CString strFileName, CString strServerName, CString strServerIP)
{
    //CString strServerNameWithSlash = _T("\\\\") + strServerName;//"\\\\veotax3";
    CString strFilePathName = _T("\\\\") + strServerName + _T("\\") + strFileName;//"\\\\veotax3\\nrdc1001";
    CString strFilePathName2 = _T("\\\\") + strServerIP + _T("\\") + strFileName;//"\\\\192.168.1.7\\nrdc1001";
    _bstr_t bstrFilePathName = strFilePathName;

    BOOL bSuccess = FALSE;
    PSECURITY_DESCRIPTOR pSecDescriptorBuf = NULL;
    DWORD dwSizeNeeded = 0;

label2:;
       bSuccess = GetNamedSecurityInfoW(bstrFilePathName, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, NULL, NULL, NULL, NULL, &pSecDescriptorBuf);
       //bSuccess = GetFileSecurityW(bstrFilePathName, DACL_SECURITY_INFORMATION, NULL, 0, &dwSizeNeeded);
       if (ERROR_SUCCESS != bSuccess)
       {
           if (strFilePathName != strFilePathName2)
           {
               strFilePathName = strFilePathName2;
               bstrFilePathName = strFilePathName2;
               goto label2;
           }
           else
           {
               MyMessageBox_Error(_T("getNTFSSecDescriptor2 Error."), _T("Error"));
               return NULL;
           }
       }
       else
       {
            return pSecDescriptorBuf;
       }
} 
```

# reporting-services - 保持横向预览

> ID：11050254
> 
> 赞同：0
> 
> 时间：2012-06-15T12:01:11.637
> 
> 标签：reporting-services, reportingservices-2005

我正在 ssrs 中创建我的第一份报告，它应该以横向打印。

右键单击预览并选择`Page Setup`允许我设置页面方向。每当我更改布局页面上的**任何内容**时，页面属性都会恢复为纵向。

知道如何让我的*布局 -> 检查预览 -> 布局*开发周期更愉快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:14:34.407

自己找到了答案：S

2005 年：

*   选择布局选项卡
*   选择报告 => 报告属性 => 布局
*   设置尺寸以供[选择](https://en.wikipedia.org/wiki/Paper_size)

2008 年（未经个人测试）

*   报告菜单 => 报告属性 => 横向或纵向

# magento - Magento：import.csv 后重新索引（产品不显示，所有索引都升级了）

> ID：11050257
> 
> 赞同：0
> 
> 时间：2012-06-15T12:01:20.410
> 
> 标签：magento, csv, import, custom-backend, reindex

我有这个问题，我要疯了。

我导入了新的可配置产品，在启用管理员、分配给类别、分配给站点但在前端看不到它们！

我使用 SSH 重新更新了索引，但没有结果。

此外，有一种方法可以防止任何编辑我必须重新索引所有产品？我可以只重新索引升级产品还是只重新索引新产品.. 一次更改是不可能的我必须从第一个产品重新索引！

我的目录有 25k 产品，但解决这个问题我需要导入其他产品（总共 100K）

如果你们中间有专家能解决问题，我愿意出钱（可能价格实惠）

问候，卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:44:17.387

检查您是否有库存数量（转到管理，然后是目录，然后查看其中一种产品）。如果产品有 0 件库存，则不会显示在搜索结果中。

# git - 删除由 git 创建的大型 .pack 文件

> ID：11050265
> 
> 赞同：149
> 
> 时间：2012-06-15T12:02:09.567
> 
> 标签：git, branching-and-merging, pack

我将大量文件检查到一个分支并合并，然后不得不删除它们，现在我留下了一个我不知道如何摆脱的大 .pack 文件。

我删除了所有使用的文件，`git rm -rf xxxxxx`并且还运行了该`--cached`选项。

有人可以告诉我如何删除当前位于以下目录中的大型 .pack 文件：

`.git/objects/pack/pack-xxxxxxxxxxxxxxxxx.pack`

我只需要删除我仍然拥有但不再使用的分支吗？或者还有什么我需要运行的吗？

我不确定它有多大的不同，但它显示了一个针对文件的挂锁。

谢谢

* * *

编辑

以下是我的 bash_history 的一些摘录，应该可以让我了解我是如何设法进入这种状态的（假设此时我正在处理一个名为“my-branch”的 git 分支，并且我有一个包含更多文件夹的文件夹/文件）：

```
git add .
git commit -m "Adding my branch changes to master"
git checkout master
git merge my-branch
git rm -rf unwanted_folder/
rm -rf unwanted_folder/     (not sure why I ran this as well but I did) 
```

我以为我也运行了以下内容，但它没有与其他人一起出现在 bash_history 中：

```
git rm -rf --cached unwanted_folder/ 
```

我还以为我运行了一些 git 命令（如`git gc`）来尝试整理包文件，但它们也没有出现在 .bash_history 文件中。

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-06-30T21:45:51.103

The issue is that, even though you removed the files, they are still present in previous revisions. That's the whole point of git, is that even if you delete something, you can still get it back by accessing the history.

What you are looking to do is called rewriting history, and it involved the `git filter-branch` command.

GitHub has a good explanation of the issue on their site. [https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

To answer your question more directly, what you basically need to run is this command with `unwanted_filename_or_folder` replaced accordingly:

```
git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch unwanted_filename_or_folder' --prune-empty 
```

This will remove all references to the files from the active history of the repo.

Next step, to perform a GC cycle to force all references to the file to be expired and purged from the packfile. Nothing needs to be replaced in these commands.

```
git for-each-ref --format='delete %(refname)' refs/original | git update-ref --stdin
# or, for older git versions (e.g. 1.8.3.1) which don't support --stdin
# git update-ref $(git for-each-ref --format='delete %(refname)' refs/original)
git reflog expire --expire=now --all
git gc --aggressive --prune=now 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-25T14:26:40.483

**场景 A**：如果你的大文件只是添加到一个分支，你不需要运行`git filter-branch`. 您只需要删除分支并运行垃圾收集：

```
git branch -D mybranch
git reflog expire --expire-unreachable=all --all
git gc --prune=all 
```

**场景 B**：但是，根据您的 bash 历史记录，您确实将更改合并到了 master 中。如果您尚未与任何人共享更改（`git push`还没有）。最简单的方法是将 master 重置回与具有大文件的分支合并之前。这将消除分支中的所有提交以及合并后对 master 所做的所有提交。因此，除了大文件之外，您可能会丢失您可能真正想要的更改：

```
git checkout master
git log # Find the commit hash just before the merge
git reset --hard <commit hash> 
```

然后运行场景 A 中的步骤。

**场景 C**：如果您想要保留来自分支的其他更改**或**合并后 master 上的更改，最好重新设置 master 并选择性地包含您想要的提交：

```
git checkout master
git log # Find the commit hash just before the merge
git rebase -i <commit hash> 
```

在您的编辑器中，删除与添加大文件的提交相对应的行，但保留其他所有内容。保存并退出。你的主分支应该只包含你想要的，而不是大文件。请注意，`git rebase`没有`-p`将消除合并提交，因此您将获得 master after 的线性历史记录`<commit hash>`。这对您来说可能没问题，但如果不是，您可以尝试使用`-p`，但会`git help rebase`说`combining -p with the -i option explicitly is generally not a good idea unless you know what you are doing`。

然后运行场景 A 中的命令。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-04-04T08:18:17.977

正如 loganfsmyth 在他的[回答](https://stackoverflow.com/a/11277929/286149)中已经说过的那样，您需要清除 git 历史记录，因为即使从 repo 中删除文件后，这些文件仍然存在。官方 GitHub 文档[推荐 BFG](https://help.github.com/articles/removing-sensitive-data-from-a-repository/)，我发现它比`filter-branch`：

### 从历史记录中删除文件

[从他们的网站下载](https://rtyley.github.io/bfg-repo-cleaner/)BFG。确保您已安装 java，然后创建镜像克隆并清除历史记录。确保替换`YOUR_FILE_NAME`为您要删除的文件的名称：

```
git clone --mirror git://example.com/some-big-repo.git
java -jar bfg.jar --delete-files YOUR_FILE_NAME some-big-repo.git
cd some-big-repo.git
git reflog expire --expire=now --all && git gc --prune=now --aggressive
git push 
```

* * *

### 删除文件夹

与上述相同，但使用`--delete-folders`

```
java -jar bfg.jar --delete-folders YOUR_FOLDER_NAME some-big-repo.git 
```

* * *

### 其他选项

BFG 还允许更高级的选项（请参阅[文档](https://rtyley.github.io/bfg-repo-cleaner/)），例如：

从历史记录中删除所有大于 100M 的文件：

```
java -jar bfg.jar --strip-blobs-bigger-than 100M some-big-repo.git 
```

* * *

### 重要的！

运行 BFG 时，请注意两者`YOUR_FILE_NAME`都`YOUR_FOLDER_NAME`只是文件/文件夹名称。***它们不是路径***，所以类似的东西`foo/bar.jpg`不起作用！相反，所有具有指定名称的文件/文件夹都将从回购历史记录中删除，无论它们存在于哪个路径或分支。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-07-11T17:09:05.933

运行以下命令，替换`PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA`为要删除的文件的路径，而不仅仅是文件名。这些论点将：

1.  强制 Git 处理但不签出每个分支和标签的整个历史记录
2.  删除指定的文件，以及作为结果生成的任何空提交
3.  覆盖现有标签

```
git filter-branch --force --index-filter "git rm --cached --ignore-unmatch PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA" --prune-empty --tag-name-filter cat -- --all 
```

这将从 repo 的活动历史记录中强制删除对文件的所有引用。

下一步，执行 GC 循环以强制对文件的所有引用过期并从包文件中清除。在这些命令中不需要替换任何内容。

```
git update-ref -d refs/original/refs/remotes/origin/master
git for-each-ref --format='delete %(refname)' refs/original | git update-ref --stdin
git reflog expire --expire=now --all
git gc --aggressive --prune=now 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-15T12:36:45.013

一种选择：

手动运行`git gc`将多个包文件压缩成一个或几个包文件。此操作是持久的（即大包文件将保留其压缩行为），因此定期压缩存储库可能是有益的`git gc --aggressive`

另一种选择是将代码和 .git 保存在某处，然后删除 .git 并使用此现有代码重新开始，创建一个新的 git 存储库 ( `git init`)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-08T18:34:29.987

我的节目有点晚了，但如果上面的答案没有解决问题，那么我找到了另一种方法。只需从 .pack 中删除特定的大文件。我遇到了这个问题，我不小心签入了一个 2GB 的大文件。我按照此链接中说明的步骤操作：[http ://www.ducea.com/2012/02/07/howto-completely-remove-a-file-from-git-history/](http://www.ducea.com/2012/02/07/howto-completely-remove-a-file-from-git-history/)

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2019-02-01T15:16:55.837

这比编码解决方案更方便。压缩文件。以文件视图格式打开 zip（不同于解压缩）。删除 .pack 文件。解压并替换文件夹。奇迹般有效！

# android - ListView 涵盖了它下面的所有内容

> ID：11050266
> 
> 赞同：2
> 
> 时间：2012-06-15T12:02:11.730
> 
> 标签：android, android-layout, android-listview, expandablelistview

我正在实现一个类，我在 ListView 中列出一个国家/地区的语言。在其下方，我有一个 ExpandableListView，它在组标题中包含主要语言，并且该语言的所有版本都作为其子项。

目前数据已正确填充，但列表视图显示在分隔线和 ExpandableListView 上。我希望用户能够滚动浏览两个列表中的所有项目，而无需静态定义两个列表的高度。目前，当 ListView 中有更多项目然后显示在一个屏幕上时，它只显示列表视图及其上方的内容并覆盖 ExpandableListView。

**语言列表.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

 <EditText android:id="@+id/search_box" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="type to filter list" 
    android:inputType="text"
    android:layout_alignParentTop = "true"
    android:maxLines="1"/>

<TextView 
    android:id="@+id/languages" 
    android:text="Locatoin Languages" 
    android:background="#fff"
    android:textColor="#000"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" 
    android:layout_below="@id/search_box"
    android:textAppearance="?android:attr/textAppearanceSmall">
</TextView>

<ListView 
    android:id="@+id/expandableLanguage" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/languages"
    android:drawSelectorOnTop="false">
</ListView>

<TextView 
    android:id="@+id/majorLanguages" 
    android:text="Major Languages" 
    android:background="#fff"
    android:textColor="#000"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" 
    android:layout_below="@id/expandableLanguage"
    android:textAppearance="?android:attr/textAppearanceSmall">
</TextView>

<ExpandableListView 
    android:id="@+id/expandableMajorLanguage" 
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/majorLanguages">
</ExpandableListView>

<requestFocus></requestFocus>
</LinearLayout> 
```

* * *

**语言列表.Java**

```
public class LanguageList extends Activity {
private static LocalSQLiteHelper dbHelper;
private static SQLiteDatabase db;
private static String BASE_LANGUAGE_SELECTOR = "";
private static String GET_MAJOR_LANGUAGES_BY_MACRO = "";
private static String GET_MAJOR_LANGUAGES_BY_ISO = "";
private static String GET_MAJOR_LANGUAGES_TITLES = "";

ExpandableListAdapter adapterExpandable;
ListAdapter adapterList;

String locationName, locationID, languageName;
private ArrayList<LanguageDataType> LocationLanguages = new ArrayList<LanguageDataType>();
private ArrayList<LanguageDataType> majorLanguagesTitles = new ArrayList<LanguageDataType>();
private ArrayList<ArrayList<LanguageDataType>> majorLanguages = new ArrayList<ArrayList<LanguageDataType>>();
private ExpandableListView languageLV ; 
private ListView locationLV;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.language_list);
    setTitle("Select Languages");
    dbHelper = new LocalSQLiteHelper(this.getBaseContext());
    db = dbHelper.getReadableDatabase();

    Bundle locationData = getIntent().getExtras();

    locationName = locationData.getString("locationName");
    locationID = locationData.getString("locationID");

    getLocationData();
    getMajorLanguageData();

    languageLV=(ExpandableListView) findViewById(R.id.expandableMajorLanguage);
    languageLV.getAdapter();
    adapterExpandable=new LanguageExpandableAdapter(this, majorLanguagesTitles, majorLanguages);
    languageLV.setAdapter(adapterExpandable);

    locationLV= (ListView) findViewById(R.id.expandableLanguage);
    locationLV.getAdapter();
    adapterList=new LanguageListAdapter(this, LocationLanguages);
    locationLV.setAdapter( adapterList);

}

private void getLocationData(){
    //locationTitle.clear();
    TextView text = (TextView) findViewById(R.id.languages);
    text.setText("Languages spoken in " +locationName);

    LocationLanguages.clear();
    //locationTitle.add(new LanguageDataType("Languages spoken in " +locationName, null, null));
    Cursor row = null;
    row = db.rawQuery(BASE_LANGUAGE_SELECTOR + locationID + "';", null);

    if((row.getCount() > 0) && (!row.isClosed())){
        row.moveToFirst();
        do{ 
            LocationLanguages.add(new LanguageDataType(row.getString(0), row.getString(1),row.getString(2)));
        }while(row.moveToNext());
        row.close();            
    } 
}

private void getMajorLanguageData(){
    majorLanguagesTitles.clear();
    majorLanguages.clear();

    Cursor row = null;
    row = db.rawQuery(GET_MAJOR_LANGUAGES_TITLES, null);

    if((row.getCount() > 0) && (!row.isClosed())){
        row.moveToFirst();
        do{ 
            majorLanguagesTitles.add(new LanguageDataType(row.getString(0), row.getString(1),row.getString(2)));

            if(row.getString(2)==null){
                queryLanguages(GET_MAJOR_LANGUAGES_BY_ISO + row.getString(1) + "';", majorLanguages);
            } else {
                queryLanguages(GET_MAJOR_LANGUAGES_BY_MACRO + row.getString(2) + "';", majorLanguages);
            }           
        }while(row.moveToNext());
        row.close();            
    } 
}

private void queryLanguages(String sql,ArrayList<ArrayList<LanguageDataType>> inputList ) {     

    Cursor row = null;
    row = db.rawQuery(sql, null);
    ArrayList<LanguageDataType> languageList = new ArrayList<LanguageDataType>();

    if((row.getCount() > 0) && (!row.isClosed())){
        row.moveToFirst();
        do{ 
            languageList.add(new LanguageDataType(row.getString(0), row.getString(1),row.getString(2)));
        }while(row.moveToNext());
        row.close();            
    } 
    inputList.add(languageList);
} 
```

* * *

我有两个适配器，一个`ListView`用于`ExpandableListView`.

**LanguageExpandableAdapter.java**

```
public class LanguageExpandableAdapter extends BaseExpandableListAdapter{
Context mContext;
private ArrayList<LanguageDataType> titles = new ArrayList<LanguageDataType>();
private ArrayList<ArrayList<LanguageDataType>> languages = new ArrayList<ArrayList<LanguageDataType>>();

public LanguageExpandableAdapter(Context context, ArrayList<LanguageDataType> inputTitles, ArrayList<ArrayList<LanguageDataType>> inputLanguages) {
    mContext = context;

    for (LanguageDataType value: inputTitles) {
        titles.add(value);
    }

    for (ArrayList<LanguageDataType> value: inputLanguages) {
        languages.add(value);
    }

}

public Object getChild(int groupPosition, int childPosition) {
    return languages.get(groupPosition).get(childPosition).getLocationName();
}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

public int getChildrenCount(int groupPosition) {
    return languages.get(groupPosition).size();
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
        View convertView, ViewGroup parent) {
    TextView childeTitle = null;
    LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = null;
    v = layoutInflater.inflate(R.layout.custom_language_child_row, null);
    childeTitle = (TextView) v.findViewById(R.id.text_element);
    String myText = this.getChild(groupPosition, childPosition).toString();
    childeTitle.setText(myText);

    return v;

}

public Object getGroup(int groupPosition) {
    return titles.get(groupPosition).getLocationName();
}

public int getGroupCount() {
    return titles.size();
}

public long getGroupId(int groupPosition) {
    return groupPosition;
}

public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
        ViewGroup parent) {

    TextView groupTitle = null;
    LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = null;
    v = layoutInflater.inflate(R.layout.custom_language_group_row, null);
    groupTitle = (TextView) v.findViewById(R.id.text_element);
    String myText = this.getGroup(groupPosition).toString();
    groupTitle.setText(myText);

    return v;
}

public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
}

public boolean hasStableIds() {
    return true;
} 
```

* * *

LanguageListAdapter.java

```
public class LanguageListAdapter extends BaseAdapter {

private Activity activity;
List<LanguageDataType> language = new ArrayList<LanguageDataType>();
List<LanguageDataType> origLocation = new ArrayList<LanguageDataType>();

private static LayoutInflater inflater=null;

public LanguageListAdapter(Activity listActivity, List<LanguageDataType> LanguageList) {
    activity = listActivity;

    for (LanguageDataType value: LanguageList) {
        language.add(value);
    }

    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return language.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null){
        vi = inflater.inflate(R.layout.custom_language_child_row, null);
    }

    TextView text=(TextView)vi.findViewById(R.id.text_element);
    text.setText(language.get(position).getLocationName());

    return vi;
}

public Filter getFilter() {
    return null;
} 
```

* * *

如果有人有任何建议`ListView`，我`extendableListView`将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:07:33.883

尝试首先定义 ExpandableListView，在屏幕底部对齐，然后将 Listview 定义为位于 ExpandableListView 上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:54:27.970

我看到的唯一方法是在两者之间分割屏幕......我不知道有什么方法可以滚动两个可滚动项目。

如果您有两个常规列表视图，我可以为您指出一个解决方案，但是列表视图和可扩展列表视图不适用于该解决方案。

我能想到的最好的方法是将 xml 中的两个列表视图定义更改为包含：

```
android:layout_height="0dp"
android:layout_weight="1" 
```

这将导致他们在它们之间分割屏幕并将它们都保留在屏幕上。

# android - 发送文件后自动关闭蓝牙

> ID：11050267
> 
> 赞同：2
> 
> 时间：2012-06-15T12:02:12.420
> 
> 标签：android, bluetooth, android-activity

我正在创建一个允许用户在其中使用蓝牙的应用程序。此外，我正在以编程方式更改蓝牙设备的名称，以便用户可以轻松找出所有人都在使用同一应用程序。我只是想问一下，一旦蓝牙完成向/从其他人发送/接收文件，有什么方法可以自动关闭蓝牙设备？由于我必须将设备名称更改回原始名称，因此我正在考虑在发送文件时这样做。并且还要关闭蓝牙。

如果两者都不可能，是否可能至少有一个？
顺便说一句，现在我正在使用 startActivityForResult() 关闭蓝牙，但蓝牙在后台进程中发送文件，我的活动在它开始发送文件和蓝牙关闭后立即完成。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:24:25.813

```
 BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
    if (!mBluetoothAdapter.isEnabled()) {

        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);

         ********** Here File send code***********

       mBluetoothAdapter.disable();
    } 
```

# wcf - 我的服务的 VS 生成的客户端抛出反序列化异常

> ID：11050268
> 
> 赞同：0
> 
> 时间：2012-06-15T12:02:21.730
> 
> 标签：wcf, .net-4.0, deserialization

我们的 WCF 服务只有一种方法：

```
[ServiceContract(Name = "Service", Namespace = "http://myservice/")]
[ServiceKnownType("GetServiceKnownTypes", typeof(Service))]
public interface IService {
     Response Execute(Request request);
}

public class Service : IService {
     public static IEnumerable<Type> GetServiceKnownTypes(ICustomAttributeProvider provider) {
        return KnownTypesResolver.GetKnownTypes();
     }

     public Response Execute(Request request) { 
         return new MyResponse { Result = MyEnumHere.FirstValue }; 
     }
} 
```

`Request`和类都`Response`包含一个`ParameterCollection`成员。

```
[Serializable]
[CollectionDataContract(Name = "ParameterCollection", Namespace = "http://myservice/")]
[KnownType("GetKnownTypes")]
public class ParameterCollection : Dictionary<string, object> {
        private static IEnumerable<Type> GetKnownTypes()
        {
            return KnownTypesResolver.GetKnownTypes();
        }
} 
```

的子类`Request`并将`Response`它们的值存储到 ParameterCollection 值包中。

我正在使用 KnownTypesResolver 类来提供所有服务对象的类型信息。

```
public static class KnownTypesResolver {
     public static IEnumerable<Type> GetKnownTypes()
     {
         var asm = typeof(IService).Assembly;
         return asm
             .GetAllDerivedTypesOf<Response>() // an extension method
             .Concat(new Type[] {
                 typeof(MyEnumHere),
                 typeof(MyEnumHere?),
                 typeof(MyClassHere),
                 typeof(MyClassListHere),
             });
     }
} 
```

如果我没记错的话，一切都应该有适当的类型信息，以便代理类生成工具在客户端生成定义明确的类。但是，只要其中一个`Response`子类（即`MyResponse`）包含诸如 的枚举值`MyEnumHere`，WCF 就会开始抱怨反序列化程序不知道 MyEnumHere 值。它应该有。`KnownTypeAttribute`正是出于这个原因，我提供了一个。

客户端代理类`MyEnumHere`在 Reference.cs 文件中确实有一个枚举；问题是`ParameterCollection`该类没有`KnownTypeAttribute`为它生成 s 。

我求助于手动编辑，并在生成的 Reference.cs 文件中包含以下几行：

```
//>
[KnownTypeAttribute(typeof(MyEnumHere))]
[KnownTypeAttribute(typeof(MyEnumHere?))]
[KnownTypeAttribute(typeof(MyClassHere))]
[KnownTypeAttribute(typeof(MyClassListHere))]
//<
public class ParameterCollection : Dictionary<string, object> { /* ... */ } 
```

手工编辑生成的文件是可怕的。但这使客户工作。我究竟做错了什么？如何定义我的服务对象，以便生成的 VS 代理类从一开始就正确？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:10:53.917

WCF 不能很好地工作，`Dictionary`因为它不可互操作。您可以使用`Array`,`List`或自定义集合来确保您的数据被正确序列化。

下面的代码使用`List<ParamCollectionElement>`而不是`Dictionary`. 我还删除了一些多余的属性。

```
[DataContract]
public class Request
{
    [DataMember]
    public ParameterCollection ParameterCollection { get; set; }
}

[DataContract]
public class Response
{
    [DataMember]
    public ParameterCollection ParameterCollection { get; set; }
}

[DataContract]
public class MyResponse : Response
{
    [DataMember]
    public MyEnumHere Result { get; set; }
}

public class ParamCollectionElement
{
    public string Key { get; set; }
    public object Value { get; set; } 
}

[CollectionDataContract(Name = "ParameterCollection")]
public class ParameterCollection : List<ParamCollectionElement> 
{

}

public static class KnownTypesResolver
{
    public static IEnumerable<Type> GetKnownTypes()
    {
        return
            new Type[] {
                typeof(MyEnumHere),
                typeof(MyEnumHere?),
                typeof(Request),
                typeof(Response),
                typeof(MyResponse)
            };
    }
}

[DataContract]
public enum MyEnumHere
{
    [EnumMember]
    FirstValue,
    [EnumMember]
    SecondValue
}

[ServiceKnownType("GetServiceKnownTypes", typeof(Service))]
[ServiceContract(Name = "Service")]
public interface IService
{
    [OperationContract]
    Response Execute(Request request);
}

public class Service : IService
{
    public static IEnumerable<Type> GetServiceKnownTypes(ICustomAttributeProvider provider)
    {
        return KnownTypesResolver.GetKnownTypes();
    }

    public Response Execute(Request request)
    {
        var result = new MyResponse
        {
            Result = MyEnumHere.FirstValue,
            ParameterCollection = new ParameterCollection()
        };

        result.ParameterCollection.Add(new ParamCollectionElement {Key = "one", Value = MyEnumHere.FirstValue});
        result.ParameterCollection.Add(new ParamCollectionElement { Key = "two", Value = new Response() });
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:20:00.573

确保你`[DataContract]`的枚举和`[EnumMember]`每个枚举成员都有：

```
[DataContract]
public enum MyEnumHere
{
    [EnumMember]
    SomeValue,
    [EnumMember]
    OtherValue,
    [EnumMember]
    OneMoreValue
} 
```

这应该会导致在您的客户端中构建代理枚举（及其成员值），而无需手动更改 Reference.cs 文件。

# css - 带 Bootstrap 的固定宽度按钮

> ID：11050269
> 
> 赞同：206
> 
> 时间：2012-06-15T12:02:22.483
> 
> 标签：css, twitter-bootstrap

Bootstrap 是否支持固定宽度的按钮？目前，如果我有 2 个按钮，“保存”和“下载”，按钮大小会根据内容而变化。

还有什么是扩展 Bootstrap 的正确方法？

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2012-09-21T09:28:22.643

您还可以使用`.btn-block`按钮上的类，使其扩展到父级的宽度。

如果父元素是固定宽度的元素，则按钮将展开以占据所有宽度。您可以将现有标记应用于容器，以确保固定/流体按钮仅占用所需空间。

```
<div class="span2">
    <p><button class="btn btn-primary btn-block">Save</button></p>
    <p><button class="btn btn-success btn-block">Download</button></p>
</div> 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

<div class="span2">
  <p><button class="btn btn-primary btn-block">Save</button></p>
  <p><button class="btn btn-success btn-block">Download</button></p>
</div>
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-06-15T12:17:05.023

为此，您可以提出一个您认为两个按钮都可以的宽度，然后创建一个具有该宽度的自定义类并将其添加到您的按钮中，如下所示：

**CSS**

```
.custom {
    width: 78px !important;
} 
```

然后我可以使用这个类并将其添加到按钮中，如下所示：

```
<p><button href="#" class="btn btn-primary custom">Save</button></p>
<p><button href="#" class="btn btn-success custom">Download</button></p> 
```

演示：http: [//jsfiddle.net/yNsxU/](http://jsfiddle.net/yNsxU/)

您可以使用您创建的自定义类并将其放在您自己的样式表中，您可以在引导样式表之后加载该样式表。我们这样做是因为您在引导样式表中进行的任何更改都可能在您更新框架时意外丢失，我们还希望您的更改优先于默认值。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-03-13T06:34:11.873

如果您将按钮放置在具有“btn-group”类的 div 中，则里面的按钮将拉伸到与最大按钮相同的大小。

例如：

```
<div class="btn-group">
  <button type="button" class="btn btn-default">Left</button>
  <button type="button" class="btn btn-default">Middle</button>
  <button type="button" class="btn btn-default">Right</button>
</div> 
```

[引导按钮组](http://getbootstrap.com/components/#btn-groups)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-15T12:15:29.867

对于您的按钮，您可以为那些具有指定最小宽度和最大宽度的特殊按钮类创建另一个 CSS 选择器。所以如果你的按钮是

```
<button class="save_button">Save</button> 
```

在您的 Bootstrap CSS 文件中，您可以创建类似

```
.save_button {
    min-width: 80px;
    max-width: 80px;
} 
```

这样，即使您有响应式设计，它也应该始终保持 80 像素。

至于扩展 Bootstrap 的正确方法，看看这个线程：

[扩展引导程序](https://github.com/twitter/bootstrap/issues/1451)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-15T16:16:28.687

使用 BS 4 和 BS 5，您还可以使用[sizing](https://getbootstrap.com/docs/4.0/utilities/sizing/)，并应用 w-100 以便按钮可以占据父容器的整个宽度。

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<p>
  Using btn-block
</p>
<div class="container-fluid">
  <div class="btn-group col" role="group" aria-label="Basic example">
    <button type="button" class="btn btn-outline-secondary">Left</button>
    <button type="button" class="btn btn-outline-secondary btn-block">Middle</button>
    <button type="button" class="btn btn-outline-secondary">Right</button>
  </div>
</div>

<p>
  Using w-100
</p>
<div class="container-fluid">
  <div class="btn-group col" role="group" aria-label="Basic example">
    <button type="button" class="btn btn-outline-secondary">Left</button>
    <button type="button" class="btn btn-outline-secondary w-100">Middle</button>
    <button type="button" class="btn btn-outline-secondary">Right</button>
  </div>
</div>
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-27T22:11:23.240

btn-group-justified 和 btn-group 仅适用于静态内容，但不适用于动态创建的按钮，并且使用 css 中的按钮固定是不实用的，因为即使所有内容都很短，它也保持相同的宽度。

我的解决方案：将相同的类放入按钮组，然后循环到所有按钮，获取最长按钮的宽度并将其应用于所有按钮

```
var bwidth=0
$("button.btnGroup").each(function(i,v){
    if($(v).width()>bwidth) bwidth=$(v).width();
});
$("button.btnGroup").width(bwidth); 
```

[![此处的示例输出](../Images/831c8dedd5641b47e51bb1550399707d.png)](https://i.stack.imgur.com/HKkA5.jpg)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-26T05:46:00.807

扩展@kravits88 答案：

这将拉伸按钮以适应整个宽度：

```
<div className="btn-group-justified">
<div className="btn-group">
  <button type="button" className="btn btn-primary">SAVE MY DEAR!</button>
</div>
<div className="btn-group">
  <button type="button" className="btn btn-default">CANCEL</button>
</div>
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-10T13:43:50.690

如果父容器是响应式的，那么块宽度按钮很容易变成响应式按钮。我认为使用固定宽度和更详细的选择器路径的组合而不是 !important 因为：

1）它不是黑客（设置最小宽度和最大宽度相同但是黑客）

2）不使用 !important 标签，这是不好的做法

3) 使用宽度，所以可读性很强，任何了解 CSS 中级联如何工作的人都会看到发生了什么（也许为此留下 CSS 评论？）

4) 组合适用于目标节点的选择器以提高准确性

```
.parent_element .btn.btn-primary.save-button {
    width: 80px;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-20T22:22:38.563

**引导程序 5+**

使用网格列设置宽度，使用边距结束实用程序设置它们之间的边距：

```
<div>
  Here are two buttons: 
  <button class="btn btn-primary col-3 me-2">PressMe</button>
  <button class="btn btn-primary col-3">PressMeToo</button>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-18T10:55:59.240

解决问题的最佳方法是使用具有所需列宽 的按钮块**btn-block 。**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>

    <div class="col-md-12">
      <button class="btn btn-primary btn-block">Save</button>
    </div>
    <div class="col-md-12">
        <button class="btn btn-success btn-block">Download</button>
    </div>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-13T11:14:47.153

在这里，我通过比较按钮组元素中的按钮找到了解决方案。简单的解决方案是获取宽度最大的按钮并将宽度设置为其他按钮。因此它们可以具有相等的宽度。

```
 function EqualizeButtons(parentElementId) {

    var longest = 0; 
    var element = $(parentElementId);

    element.find(".btn:not(.button-controlled)").each(function () {
        $(this).addClass('button-controlled');
        var width = $(this).width();
        if (longest < width) longest = width;

    }).promise().done(function () {
        $('.button-controlled').width(longest);
    });
} 
```

它就像一个魅力。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-16T11:54:05.853

刚遇到同样的需求，对定义固定宽度不满意。

使用 jquery 也是如此：

```
 var max = Math.max ($("#share_cancel").width (), $("#share_commit").width ());
    $("#share_cancel").width (max);
    $("#share_commit").width (max); 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <button type="button" class="btn btn-secondary" id="share_cancel">SHORT</button>
    <button type="button" class="btn btn-success" id="share_commit">LOOOOOOOOONG</button>
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2015-09-20T20:48:33.487

这可能是一个愚蠢的解决方案，但我一直在寻找解决这个问题的方法并且变得懒惰。

无论如何，使用 input class="btn..." ... 而不是 button 并用空格填充 value= 属性，以便它们的宽度相同，效果很好。

例如：

```
<input type="submit" class="btn btn-primary" value="   Calculate   "/>    
<input type="reset" class="btn btn-primary"value="     Reset       "/> 
```

我很久没有使用引导程序了，也许有一个很好的理由不使用这种方法，但我想我不妨分享一下

# wpf - 带有 XPath 的 Wpf 数据绑定 MenuItem

> ID：11050270
> 
> 赞同：1
> 
> 时间：2012-06-15T12:02:23.150
> 
> 标签：wpf, data-binding, xpath

我的应用程序使用带有一些 MenuItems 的菜单。由于本地化，我想将 MenuItem 的 Header 属性绑定到 xml 文件中的节点值。

这是我的 MainWindow.xaml 的相关部分

```
<Window.Resources>
    <XmlDataProvider Source="Labels.xml" x:Key="langProvider" XPath="Labels"/>
</Window.Resources>

...

<MenuItem Header="{Binding Source={StaticResource langProvider}, XPath=Label[@Name\=\'File\']}"/> 
```

这是我的 Labels.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<Labels>
    <Label Name="File">_Datei</Label>
</Labels> 
```

它可以工作，除非我启动应用程序时，MenuItem 显示“_Datei”而不是“Datei” - 因此我无法通过按 Alt+D 访问此 menuItem。是否无法使用 XPath 将 Header 属性绑定到 xml 值并仍然保留 WPF 提供的热键功能？

# c# - 如何在 WP7 中从 RSS 文件中获取图像和文本？

> ID：11050273
> 
> 赞同：0
> 
> 时间：2012-06-15T12:02:52.173
> 
> 标签：c#, windows-phone-7, rss

我正在尝试使用其图像获取 RSS 文本，但图像无法显示我将查看模型以获取图像并使用简单的 RSS 技术来获取图像你能告诉我如何获取图像和文本......在这里是我的 XAML 代码：

```
<ListBox Name="lstRSS" ItemsSource="{Binding FeedItems}" DataContext="{StaticResource MainViewModel}" FontSize="30" Grid.Row="1">
    <ListBox.ItemTemplate>
        <DataTemplate>
             <Grid Height="700">
                    <TextBlock Text="{Binding Path=Title}"></TextBlock>
                    <UserControls:Loader Width="100" Height="100" />
                    <Image Source="{Binding Link}" Width="450" Height="350" />
             </Grid>
        </DataTemplate>
   </ListBox.ItemTemplate>
   <ListBox.ItemsPanel>
       <ItemsPanelTemplate>
           <VirtualizingStackPanel />
        </ItemsPanelTemplate>

    </ListBox.ItemsPanel>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:20:09.150

您不能以这种方式绑定到 URL，因为 String/Uri 不是 Image.Source 属性的有效值。如果在 xaml 中设置了常量 URL，则当编译器生成的代码获取 URL 并将其转换为 BitmapSource 时，图像将正确显示。

要以这种方式绑定图像 URL，您将需要一个[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.95%29.aspx)。转换器可以获取 URL 并将其转换为 BitmapImage：

```
public class UriToImageConverter : IValueConverter
{

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // This could be extended to accept a Uri as well
        string url = value as string;
        if (!string.IsNullOrEmpty(url))
        {
            return new BitmapImage(new Uri(url, UriKind.RelativeOrAbsolute));
        }
        else
        {
            return null;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

然后，您需要将此类的实例添加到应用程序资源（在 app.xaml 或页面 xaml 中）：

```
<local:UriToImageConverter x:Key="ImageConverter"/> 
```

然后，您可以像这样设置绑定：

```
<Image Source="{Binding Link, Converter={StaticResource ImageConverter}}" /> 
```

# java - Netty 与 RestEasy 的简单使用

> ID：11050274
> 
> 赞同：1
> 
> 时间：2012-06-15T12:02:53.063
> 
> 标签：java, rest, netty, resteasy

我对 RestEasy 和 Netty 完全陌生。我只想运行一个非常简单的测试来看看 netty 是如何工作的。所以我正在使用这段代码：

```
ResteasyDeployment deployment = new ResteasyDeployment();
deployment.setResourceClasses(Collections.singletonList(OAIProviderImpl.class.getName()));

        NettyJaxrsServer netty = new NettyJaxrsServer();
        netty.setDeployment(deployment);
        netty.setPort(TestPortProvider.getPort());
        netty.setRootResourcePath("");
        netty.setSecurityDomain(null);
        netty.start();

        Thread.sleep(1000);

        netty.stop(); 
```

在一个`Main()`方法中。`OAIProviderImpl.class`只是一个实现 REST 接口的类。当我运行这段代码时。我`NullpointerException`打开`netty.stop()`并进一步进入该`stop()`方法，我可以看到异常来自`releaseExternalResources`. 上面的代码是从[Netty Reasteasy复制的](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#d0e2690)

有没有人使用这个代码没有任何问题？有人可以指导我吗？谢谢。更新：这是堆栈跟踪：

```
java.lang.NullPointerException
    at org.jboss.resteasy.plugins.server.netty.NettyJaxrsServer.stop(NettyJaxrsServer.java:145)
    at nl.gridline.oai.NettyServerTest.test(NettyServerTest.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:37:29.293

问题是 start 方法中的 NettyJaxrsServer 创建了一个从未全局保存的私有引导对象。因此，当您点击 stop 方法时，全局引导引用为空。奇怪的小姐。

# asp.net - ASP.NET MVC 3 Razor- 从自定义编辑器获取数据

> ID：11050275
> 
> 赞同：0
> 
> 时间：2012-06-15T12:03:13.193
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我有使用 ASP.NET 表单的经验，但对 MVC 很陌生。

如何从回发的共享视图中获取数据？

在 ASP.NET Forms 中，我可以编写如下内容：

**ASP.NET 表单：**

**型号代码：**

```
public class MyModelItem
{
    // Just TextBox is enough for editing this
    public string SimpleProperty { get; set; }

    // For this property separate NestedItemEditor.ascx is required
    public MyModelNestedItem ComplexProperty { get; set; }
}

public class MyModelNestedItem
{
    public string FirstProperty { get; set; }        
    public string SecondProperty { get; set; }
} 
```

**行为：**

用于编辑 MyModelNestedItem 的控件是单独的 ASCX 控件 NestedItemEditor.ascx

这只是举例，MyModelNestedItem 可能要复杂得多，我只是想说明一下我的意思。

现在，当我显示此项目进行编辑时，我显示了一个 asp:TextBox 和一个 NestedItemEditor.ascx。在页面回发上，我正在从两者收集数据，仅此而已。

**MVC 的问题：**

当我尝试使用 MVC 实现此场景时，我正在使用自定义的 EditorFor（通过使用 UIHint 并创建共享视图）。所以这个共享视图*Views\Shared\EditorTemplates\MyModelNestedItem.cshtml*现在可以显示已经在 MyModelNestedItem 属性中的数据，但我不知道如何让它返回新输入的数据。

当父控制器收到一个 post 请求时，数据似乎在 Request.Form 中，但是文明的到达方式是什么？当然，最好的解决方案是数据是否会自动提取到**MyModelItem.ComplexProperty**中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:24:51.960

在 post 上调用的操作需要类似于：

```
 [HttpPost]
    public ActionResult Index(MyViewModel mdl) 
```

然后，在表单上具有输入控件（或隐藏输入）的模型的所有属性都将具有在表单上输入的数据（或传递给它或由 javascript 修改，在隐藏输入的情况下）。

这假定 MyViewModel 是您的视图中引用的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:26:57.857

在控制器中使用复杂类型编写 ActionResult 方法对我来说很简单：

```
 public class Topic
{
    public Topic()
    {

    }
    public DetailsClass Details
    {
        get;
        set;
    }

}

public class DetailsClass
{
    public string TopicDetails
    {
        get;
        set;
    }
} 
```

风景：

```
@modelTopic
@using (Html.BeginForm("Submit","Default"))
{
  @Html.EditorFor(m=>m.Details)
  @:<input type="submit" />
 } 
```

控制器：

```
 public ActionResult Index()
    {

        Topic topic = new Topic();
        return View( topic); 
    }

    public ActionResult Submit(Topic t)
    {
        return View(t);
    } 
```

提交时，`Topic t`包含我在编辑器中输入的值（假设您有一个复杂类型的自定义编辑器，在我的示例中为 DetailsClass）

# php - 通过扩展 ArrayObject 让对象循环为带有 foreach() 的数组

> ID：11050277
> 
> 赞同：3
> 
> 时间：2012-06-15T12:03:20.403
> 
> 标签：php, foreach, arrayobject

所以我有一个对象，它包含一组私有数据成员中的对象。我现在可以`for`通过覆盖and的`count()`函数来循环它，但我也想在循环中循环它。`ArrayObject``offsetGet($index)``foreach`

我需要最小限度地扩展哪些功能才能添加此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:14:02.400

使用 SPL 迭代器接口参见[http://uk.php.net/manual/en/class.iterator.php](http://uk.php.net/manual/en/class.iterator.php)了解详情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:17:24.567

AFAIK您可以直接`foreach`使用`ArrayObject`：

```
$ao = new ArrayObject(array(1, 2, 3, 4));
$res = 0;
foreach($ao as $el) {
    $res += $el;
}
echo 'ArrayObject elements sum: '.$res; 
```

**示例：** [http ://codepad.org/uQDGQ03A](http://codepad.org/uQDGQ03A)

# php - 检索所有出现的部分字符串

> ID：11050279
> 
> 赞同：1
> 
> 时间：2012-06-15T12:03:24.350
> 
> 标签：php, regex

在我的字符串（实际上是单个页面的 HTML）中，我有许多要访问并替换为相关内容的标签。

例如：

```
<p>[@intro_text]</p> 
```

会变成：

```
<p>introduction text!</p> 
```

[使用str_replace](http://php.net/manual/en/function.str-replace.php)这一切都很简单，但我也有一系列标签，如下所示：

```
[@snippet_searchbox]
[@snippet_contactbox] 
```

我需要在 html中找到所有这些标签**[@snippet_?????]的出现。**

我基本上只想得到一个包含所有标签名称的数组。从这里我可以很容易地找到它应该被替换的内容。

例如：

```
Array
(
    [0] => snippet_searchbox
    [1] => snippet_contactbox
    [2] => snippet_somethingelse
) 
```

做这个的最好方式是什么？我一直在玩**[preg_match](http://php.net/manual/en/function.preg-match.php)**，但每当我尝试正则表达式时，我都会眼花缭乱，尽管我确信这很简单。

任何建议将不胜感激，如果有人可以帮助我使用我应该使用的正则表达式代码，是否应该使用正则表达式来完成。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:09:31.533

不要为这些标识符发明自己的语法，而是使用常规 (X)HTML 属性：

```
<html>
    …
    <p id="intro_text"></p>
    …    
    <div id="searchbox"></div>
    …
    <div id="contactbox"></div>
    …
</html> 
```

或命名空间元素：

```
<html>
    …
    <p tpl:id="intro_text"></p>
    …    
    <tpl:snippet id="searchbox"/>
    …
    <tpl:snippet id="contactbox"/>
    …
</html> 
```

然后使用[DOM](http://php.net/dom)和[XPath](http://schlitt.info/opensource/blog/0704_xpath.html)来查找和替换/修改它们。StackOverflow 上有很多关于如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:13:21.230

为什么不简单地使用 str_replace ？

```
str_replace("[@intro_text]", $new_content_of_intro_text, $html_file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:11:13.387

您可以使用`str_replace()`：

```
$tags = array(
 '[@intro_text]'        => 'introduction text!',
 '[@snippet_searchbox]' => '<div>some text</div>',
 /* more items here */
);

$html = str_replace(array_keys($tags), array_values($tags), $html); 
```

# powershell - PowerShell foreach 过滤器

> ID：11050281
> 
> 赞同：0
> 
> 时间：2012-06-15T12:03:27.677
> 
> 标签：powershell, passwords, office365

我尝试开发像这样的增量密码更改PowerShell脚本

输入 csv 文件：D:\pws\newpws.csv

```
userID,userIdentity,passwd
201206151300057,John.Doe@contoso.com,pa$$worD1
201206151301452,Tommy.Toe@contoso.com,pa$$worD2
201206151302871,Vince.Voe@contoso.com,pa$$worD3
201206151305021,William.Woe@contoso.com,pa$$worD4
201206151306433,Xerxes.Xoe@contoso.com,pa$$worD5
201206151346790,Yvonne.Yoe@contoso.com,pa$$worD6 
```

输出 csv 文件：D:\pws\lastprocessedId.csv

```
lastID
201206141186509 
```

到目前为止，我只有这个：

```
import-csv D:\pws\newpws.csv | foreach {

Set-MSOnlineUserPassword -Identity $_.userIdentity -Password $_.passwd -ChangePasswordOnNextLogon:$true -Credential $cred

} 
```

我想修改这个脚本，使它只处理 csv 行：

1.  用户 ID 高于当前日期时间减去 2 小时（四舍五入到小时）加上“00000”，格式如下：yyyymmddhh00000 - 例如，如果当前时间是 2012 年 6 月 15 日下午 3:35，则过滤器应包括：201206151300000，**以及**
2.  用户 ID 高于存储在 lastprocessedId.csv 中的 lastID

脚本执行完成后，lastprocessedId.csv 中的 lastID 应更新为 newpws.csv 中最后一行的 userID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:32:09.533

您需要在管道阶段`Where`之前插入过滤器，例如：`Foreach`

```
import-csv D:\pws\newpws.csv | 
    where {$_.userID -gt $lastID -and ...} |
    foreach { Set-MSOnlineUserPassword -Identity $_.userIdentity `
              -Password $_.passwd -ChangePasswordOnNextLogon:$true -Credential $cred
} 
```

# iphone - AFNetworking：enqueueBatchOfHTTPRequestOperations 问题与完成块

> ID：11050287
> 
> 赞同：12
> 
> 时间：2012-06-15T12:03:47.730
> 
> 标签：iphone, ios, nsoperation, nsoperationqueue, afnetworking

我使用这种 AFNetworking 方法一次启动多个请求：

```
- (void)enqueueBatchOfHTTPRequestOperations:(NSArray *)operations 
                              progressBlock:(void (^)(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations))progressBlock 
                            completionBlock:(void (^)(NSArray *operations))completionBlock 
```

其中一个是`AFJSONRequestOperation`. 问题是这个 JSON 操作的成功块是在批处理的完成块之后执行的。原因是：`AFJSONRequestOperation`有一个用于 JSON 处理的内部调度队列。因此，在调用完成块时，JSON 数据仍在处理中。

问题： JSON操作的成功块被调用**后**，如何执行完成块中的代码？

我试图在主队列上调度一个代码块，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:31:19.733

如果可能，最简单的解决方案可能是将处理代码从每个操作的成功块移动到整个批处理的完成块。

您`NSArray *operations`在完成块中有可用的，您可以遍历操作并查找：

```
for(AFHTTPRequestOperation *operation in operations){
   if(operation.response.statusCode == 200){
      //Do something with the response
   }else{
     //Handle the failure
   }
} 
```

`operation.request.URL`如果您需要执行不同的操作，您还可以通过该属性获得每个操作的 url 地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T23:14:28.877

似乎没有简单的方法可以完全按照 OP 的要求进行操作，因此这里有一些简单的解决方法。

一个相当直截了当的策略是使用`AFHTTPRequestOperation`而不是，`AFJSONRequestOperation`然后使用`NSJSONSerialization`.

所以操作的成功块看起来像

```
 success:^(AFHTTPRequestOperation *operation, id responseObject){
              NSError *error ;
              id json = [NSJSONSerialization JSONObjectWithData:responseObject 
                                            options:kNilOptions error:&error] ;
              ... 
            } 
```

警告将适用 - 对于大型 JSON 响应，这可能会阻塞代码，并且某些 AFNetworking 解决`NSJSONSerialization`问题的方法将不适用。但这会让你继续前进。

**更新：**下面的第一个评论者建议在批处理完成块中使用`AFJSONRequestOperation`和调用它。`responseJSON`如果你的情况允许，我很好。在我当前的用例中，它使我的代码有些复杂（我正在使用一组混合的 JSON 调用，因此如果我可以将其保存在`success`与操作直接关联的块中，代码会更清晰）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T08:08:16.373

您可以将您的 Json 操作移动到队列的开头，然后添加一个依赖项，以便在 json 操作完成后才能开始另一个操作：

```
 [lastOperation addDependency:jsonOperation] 
```

# c# - 检测 WP7 应用程序空闲并执行一些任务

> ID：11050288
> 
> 赞同：2
> 
> 时间：2012-06-15T12:03:50.783
> 
> 标签：c#, windows-phone-7

我有一个要求，我必须检测用户是否没有在应用程序上进行操作并且应用程序处于空闲状态（在一段时间内），同时，即在设备屏幕被锁定之前应用程序处于空闲状态时，我必须显示一些图片一张一张。

我浏览了 PhoneApplicationService.UserIdleDetectionMode 和 PhoneApplicationService.ApplicationIdleDetectionMode 的 MSDN 文档，但没有发现任何有用的信息。

我如何检测到该应用程序处于空闲状态？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:43:42.993

检测应用程序不是空闲的：创建一个包含计时器的类。当计时器触发时，显示图像。每当用户在任何页面上执行任何操作（例如通过覆盖操作启动事件来检测这一点），将计时器重置为 0。

# django - 值 [...] 不是一个有效的选择，django-updown

> ID：11050290
> 
> 赞同：0
> 
> 时间：2012-06-15T12:04:00.363
> 
> 标签：django, django-models, updown

我正在尝试实现 django-updown [https://github.com/weluse/django-updown](https://github.com/weluse/django-updown)。当我尝试通过管理面板添加投票时，它说值 1 不是一个有效的选择。

这是应用程序中的 models.py：

```
_SCORE_TYPE_CHOICES = (
('-1', 'DISLIKE'),
('1', 'LIKE'),
)

SCORE_TYPES = dict((value, key) for key, value in _SCORE_TYPE_CHOICES)

class Vote(models.Model):
    content_type = models.ForeignKey(ContentType, related_name="updown_votes")
    object_id = models.PositiveIntegerField()
    key = models.CharField(max_length=32)
    score = models.SmallIntegerField(choices=_SCORE_TYPE_CHOICES)
    user = models.ForeignKey(User, blank=True, null=True, related_name="updown_votes")
    ip_address = models.IPAddressField()
    date_added = models.DateTimeField(default=datetime.datetime.now, editable=False)
    date_changed = models.DateTimeField(default=datetime.datetime.now, editable=False) 
```

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:14:31.870

您的 score 字段是一个`SmallIntegerField`所以尝试在您的选择元组中使用整数而不是字符串，它应该可以工作：

```
_SCORE_TYPE_CHOICES = (
    (-1, 'DISLIKE'),
    (1, 'LIKE'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:13:57.030

最后，没有解决方案，所以我安装了 django-ratings [https://github.com/dcramer/django-ratings](https://github.com/dcramer/django-ratings)并且工作正常。所以如果你有这种问题，我推荐这个应用程序。

# android - 运行时替换地图视图中的覆盖标记图像

> ID：11050291
> 
> 赞同：3
> 
> 时间：2012-06-15T12:04:09.957
> 
> 标签：android, overlay, android-mapview

我在 mapview 中使用一个叠加图像来显示多个位置，现在我的要求是，当用户单击该标记图像时，我们需要更改该图像并且应该仅将其替换为该叠加的新图像，这意味着如果有5叠加然后我们只想更改用户点击的图像，其余4图像​​应该是原样。

我已经把两个叠加层都放在这里了，

标记图像，

![在此处输入图像描述](../Images/2a060c94903beb1ec69a400919af4f14.png)

标记应该在点击后，

![在此处输入图像描述](../Images/54d06c46f53a37cf16d4275fb3bb0c74.png)

我不知道如何处理这件事运行时，所以请建议我如何完成这件事。提前致谢...！！

# python - 防止 Python 中的编码错误

> ID：11050292
> 
> 赞同：7
> 
> 时间：2012-06-15T12:04:10.533
> 
> 标签：python, windows, encoding, console

我有脚本可以通过日志系统打印出消息，或者有时打印命令。在 Windows 控制台上，我收到错误消息，例如

```
Traceback (most recent call last):
  File "C:\Python32\lib\logging\__init__.py", line 939, in emit
    stream.write(msg)
  File "C:\Python32\lib\encodings\cp850.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u2019' in position 4537:character maps to <undefined> 
```

是否有一种通用方法可以使日志系统、打印命令等中的所有编码都具有*故障安全*（忽略错误）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T12:22:00.563

问题是您的终端/shell（Windows 上的 cmd）无法打印每个 Unicode 字符。

您可以使用方法的`errors`参数对字符串进行故障安全编码`str.encode`。例如，您可以`?`通过设置替换不支持的字符`errors='replace'`。

```
>>> s = u'\u2019'
>>> print s
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\encodings\cp850.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can\'t encode character u'\u2019' in position
 0: character maps to <undefined>
>>> print s.encode('cp850', errors='replace')
? 
```

有关其他选项，请参阅[文档](http://docs.python.org/library/stdtypes.html#str.encode)。

**编辑**如果您想要一个通用的日志记录解决方案，您可以子类化`StreamHandler`：

```
class CustomStreamHandler(logging.StreamHandler):

    def emit(self, record):
        record = record.encode('cp850', errors='replace')
        logging.StreamHandler.emit(self, record) 
```

# java - Netty 中 ChannelHandler.messageReceived 和 FrameDecoder.decode 的区别

> ID：11050295
> 
> 赞同：0
> 
> 时间：2012-06-15T12:04:19.140
> 
> 标签：java, netty

这两个事件都由 Netty 框架触发，带有 ChannelBuffer 的句柄，并且期望客户端将以某种方式处理缓冲区中的字节。

是否有任何特定的使用/场景，其中一个优于另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:38:12.430

您应该查看 FrameDecoder javadocs。简而言之，如果您需要“缓冲”数据直到接收到帧，您想使用 FrameDecoder。FrameDecoder 将处理它，因此管道中的其他处理程序（在它之后）将只接收一个完整的帧。

# c# - 在设计模式下隐藏 c# 对象（表达式混合）

> ID：11050297
> 
> 赞同：0
> 
> 时间：2012-06-15T12:04:22.453
> 
> 标签：c#, wpf, object, hide, expression-blend

我有一个 DLL，其中包含构建应用程序所需的所有对象。

当我在 Blend 中时，我想隐藏其中的一些。例如，我不希望图形设计师使用我的基类，所以我需要在设计模式（Blend）中隐藏它们。

我尝试添加 [Browsable(false)] 但它仅适用于属性或事件。我尝试了 DesignTimeVisible(false)] 但也不起作用...

有没有办法隐藏一个对象而不仅仅是一个属性？我需要它用于 Blend，因为有时你可以在 VS 中做某事，但在 Blend 中却不行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:08:31.077

在您的 XAML 代码隐藏（或类似代码）中尝试此操作

```
if (!DesignerProperties.GetIsInDesignMode(this))
{
    // Do non-design mode stuff here}
} 
```

# html - 输出数组 8 的倍数

> ID：11050300
> 
> 赞同：1
> 
> 时间：2012-06-15T12:04:27.830
> 
> 标签：html, arrays, string, asp-classic

我有一个字符串，我用逗号分隔符分割并添加到一个数组中，现在我需要将数组排序为 8 的倍数的地址，前 8 个将是第一个地址，接下来的 8 个将是下一个地址，依此类推。 . 在 html 表中输出。建议

像这样..

```
id        addr1         addr2         addr3         add4
1         12 road       birmingham    westmid       u.k 
```

objSoapClient.serviceForPostcodeStringBuilder("AB10 1AF") 返回字符串。

```
<%
dim address
dim addArray

SET objSoapClient = Server.CreateObject("MSSOAP.SoapClient")
 objSoapClient.ClientProperty("ServerHTTPRequest") = True

Call objSoapClient.mssoapinit("http://ip address:56478/postcode/Service1.asmx?WSDL","Service1")
response.write(session("collp"))
address = objSoapClient.serviceForPostcodeStringBuilder("AB10 1AF")
addArray = Split(address,",")

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:45:15.663

假设`addArray`元素计数是 8 的倍数。

```
Dim i
For i = 0 To UBound(addArray) Step 8
    %><tr><td><%=addArray(i)%></td><td><%=addArray(i+1>%></td><td><%=addArray(i+2)%></td></tr><%
Next 
```

这里的关键特性是`Step 8`在 for 循环中。

# java - 从字符串中删除未使用的空格和逗号 - Java

> ID：11050301
> 
> 赞同：3
> 
> 时间：2012-06-15T12:04:28.600
> 
> 标签：java, string, jsp, comma

我有一个问题，我敢肯定有一个相对简单的答案，但目前我有一个巨大的大脑放屁，似乎无法想到一个不涉及荒谬的优雅解决方案无数的 if 语句。

基本上，我有一个网页动态更新用户呈现为一个字符串，这样风格化

> 用户 1、用户 2、用户 3、用户 4

但是，当我从其他位置删除其中一个用户时，他们会从列表中删除，但我只剩下以下内容

*开始*

> , 用户 2, 用户 3, 用户 4

*中间*

> 用户 1, , 用户 3, 用户 4

*结尾*

> 用户 1、用户 2、用户 3、

如果有人知道删除这些不需要的逗号的相对简单的方法，那将非常有帮助，它已经困扰了我几个小时。

谢谢一堆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T12:07:21.220

您可以匹配`,$`,`^,`并`, ,`使用正则表达式并将其替换为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:08:29.487

您可以简单地尝试：

```
String s = "User1, , User2, User3, ,...;
s = s.replaceAll(", ,", ","); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:14:30.860

```
",User1, , User3, User4,".replaceAll("[\\s],|,$|^,", ""); 
```

->

```
User1, User3, User4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T12:11:20.923

我会先拆分然后加入。

与[番石榴](http://code.google.com/p/guava-libraries/)：

```
final Iterable<String> fields = Splitter.on(",")
  .trimResults()
  .omitEmptyStrings()
  .split(data);

final String trimmedData = Joiner.on(",").join(fields); 
```

有了这个，您甚至可以根据[`Iterables.filter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20com.google.common.base.Predicate%29)需要验证输入字段。

# javascript - 如何更改表单中列表项的顺序？

> ID：11050303
> 
> 赞同：1
> 
> 时间：2012-06-15T12:04:33.920
> 
> 标签：javascript, jsp, spring-mvc

我制作了一个 Spring MVC 应用程序，该应用程序向用户显示项目列表 - 我如何更改 JSP 中这些项目的顺序，以便将新订单提交到服务器？

例如，用户获得以下列表：

1.  宠物猫
2.  宠物狗
3.  宠物鸟

该列表由以下表格组成：

```
<form:form action="/modifypetlist.do" method="POST" modelAttribute="petList">
  <fieldset>
    <div>
      <ul id="sortable">
        <c:forEach items="${petList.list}" varStatus="vs">
          <li class="ui-state-default">
           <form:label path="list[${vs.index}].pet">Pet</form:label>
           <form:input path="list[${vs.index}].pet" />
          </li>
       </c:forEach>
      </ul>
     </div>
     <input type="submit" value="send">
   </fieldset>
</form:form> 
```

我已经包含了一些 Javascript，使用户能够拖放列表中的行，例如将 Dog 线移到 Cat 线上方。

我如何将此信息传达给服务器？（如何从表单字段重建 petList 模型？）我目前可以在提交表单后读取服务器中的列表，但列表项按原始顺序排列，即使我更改了表单中的名称（例如 Cat --> 鼠标）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:20:22.380

您需要在持久层中持久化订单信息。通过这样做，您将需要在每次修改订单时触发一个调用（例如一个 javascript ajax 调用）。此调用应向应用程序服务器发送请求，应用程序服务器将调用适当的服务来更新该列表的持久层。

然后，您还需要调整您的持久层以使用您之前在显示页面时保留的“排名”信息对列表进行排序。

我想这是最有效的方法。

祝你好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:13:02.650

那是因为它们自然地按主键（即索引）排序，因此通常是行的 id。

尝试在表中添加一个“排名”字段，一旦对数据进行排序，您将更新该字段并按排名对结果进行排序。

# delphi - 在 Tools API 中提供方法体

> ID：11050307
> 
> 赞同：4
> 
> 时间：2012-06-15T12:04:49.800
> 
> 标签：delphi, plugins, opentools

多年前，我编写了一个代码模板，它采用一些简单的参数（点）并生成了一个类骨架。由于某些方法体中包含代码，因此我无法调用 InvokeClassCompletion 而只是将实现与声明放在一起（用户必须移动它们）。

我突然想到我可以编写一个代码模板脚本引擎来将这些方法插入到正确的位置，但是我看不到我应该如何导航文件。在 ToolsAPI.pas 中有 IOTAEditReader 和 IOTAEditWriter 的声明，但我猜缺少一个步骤 - 当然我不需要手动解析 Delphi 代码只是为了找到实现部分？

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:39:34.247

IDE 中有很多解析器，但没有一个可用于 IDE 插件 (ToolsAPI)。因此，您必须编写自己的解析器或使用现有的解析器，例如[http://delphiblog.twodesk.com/using-the-castalia-delphi-parser](http://delphiblog.twodesk.com/using-the-castalia-delphi-parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:59:55.400

您可能会发现[GExperts](http://www.gexperts.org/)或 CNPack 在其编辑器向导之一中包含了您需要的几乎所有代码。

如果不是，那么这两个是我所知道的编写 IDE 插件的最佳参考。至于编写解析器，请参阅 Andreas 的回答。

如果您只是想要更好的代码模板，您可以考虑购买 Castalia，因为它比内置的 delphi IDE 插件功能具有[改进的代码模板](http://www.twodesk.com/castalia/codingassistance.html)功能。Castalia 内部使用了 andreas 提到的 Castalia delphi 解析器。这是相当不错。

# logging - realvnc 中的日志文件变得流氓（成为〜20G）

> ID：11050308
> 
> 赞同：2
> 
> 时间：2012-06-15T12:04:52.370
> 
> 标签：logging, vnc

我的 vnc 会话的日志文件失控了。有没有办法在不完全关闭日志记录的情况下限制日志文件的大小或减少数量？

我们其他用户的 vnc 会话没有这个问题，一切似乎都是一样的。

有没有人遇到过这个或者有没有人有建议？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T14:37:56.910

尝试将 Log 参数设置为 *:file:10 （只会记录错误）或 *:file:30 （错误加上其他一些东西）。如果您将设置设置为 *:file:100 ，它将记录所有内容，并且通常设置为仅用于调试目的。

# javascript - 我如何判断滚动条是否已到达帖子内容的末尾？

> ID：11050309
> 
> 赞同：0
> 
> 时间：2012-06-15T12:04:53.550
> 
> 标签：javascript, jquery

标题几乎不言自明。那么我将如何使用 jQuery 或 javascript 来做到这一点？我知道判断滚动条是否已经到达窗口的末尾，它会是这样的。

```
$(window).scroll(function(){
   if  ($(window).scrollTop() == $(document).height() - $(window).height()){
alert('you have reached the bottom');
}
}); 
```

那么我如何判断它是否已到达特定部分然后发出警报？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:07:54.670

当然不是一个难以解决的问题，但请查看[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/) ... 一个非常好的插件，可以满足您的要求。

他们网站上的一个简单示例：

```
$('.entry').waypoint(function() {
   alert('You have scrolled to an entry.');
}); 
```

优雅易读，插件非常小，< 4kb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:14:30.017

一种**没有插件**的方法就是这样。

**例子**

```
// calculate where the bottom of the post is positioned
var postBottom = $(".post").offset().top + $(".post").height();

$(window).scroll(function(){
    // check if the bottom of the post is smaller than the window height
    if (postBottom < $(window).height()){
        alert('you have reached the bottom of the post');
    }
}); 
```

# jpa - JPA 自动增量属性但不是 ID

> ID：11050311
> 
> 赞同：4
> 
> 时间：2012-06-15T12:05:10.807
> 
> 标签：jpa

是否可以在 JPA 中具有自动增量属性但没有 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:23:02.713

如果您阅读 JPA 规范，您会发现 @GeneratedValue 用于主键字段，所以实际上不是。但是 DataNucleus JPA（用户已选择）确实允许在*任何*字段上使用 @GeneratedValue（JPA 规范的扩展）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:10:28.847

`@GeneratedValue`不依赖于`@Id`。

换句话说，是的，您可以拥有一个不是 ID 的自动增量。

不过，您可以自己尝试一下。

# jquery - 无法选择新的动态 jQuery UI .sortable 元素

> ID：11050321
> 
> 赞同：3
> 
> 时间：2012-06-15T12:05:38.147
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-sortable

我在使用带有动态创建的 DOM 元素的 jQuery UI .sortable 时遇到了一些麻烦。

基本上，我创建了一个大型的拖放表单创建器/编辑器，当一个新的表单元素添加到可放置区域时，它会创建一个 div 容器（称为 .connectedsortable），以及其中的表单元素（称为 .问题）。

两个 div 的外部， .connectedsortable 是一个可排序的列表，当页面上有许多这样的 div 时，我可以成功地将一个 .question 从一个拖到另一个，因为它们被链接为可排序 - 所以 .question 移动而 .connectedsortable 没有，如果 .connectedsortable 的所有内容都被删除，则 .connectedsortable 将从 DOM 中删除。

这就是问题所在。

由于我制作的 UI，我需要能够从 .connectedsortables 中转义问题并将它们在页面上移动，如果 - 当开始拖动 .question - 创建一个新的 .connectedsortable 就足够了在每个现有的 .createdsortable 之后，然后可以将 .question 放入其中。

在我的代码中，我有一个在 .sortable 开始时调用的函数，如下所示（以及我提取的许多其他代码，因为它不是这个问题所必需的）

```
$('.connectedsortable').sortable({
     connectWith : '.connectedsortable',
     start : function(event, ui) {
         createPlaceholders(ui.item);
     }
}).disableSelection(); 
```

函数 createPlaceholders() 然后包含以下内容

```
function createPlaceholders(widget) {

    var placeholder_html = '<div class="connectedsortable"></div>';

    $('.connectedsortable').each(function() {
        var $this = $(this);
        $this.after(placeholder_html);
    });

    $('#innercontent').children('.connectedsortable:first').before(placeholder_html);
    $('.connectedsortable').sortable('refresh');
}; 
```

这成功地在每个现有的 .connectedsortable 之后创建了一个新的，但是我无法将 .question 放入该容器中。

我认为在函数末尾刷新 sortable 意味着可以选择它们，但似乎并非如此。这让我真的很难过。

过去有没有人遇到过类似的事情？当 .sortable 已经在做某事或类似的事情时，更新 .sortable 是否存在问题？

# objective-c - 如何在 iPhone 上镜像视频？

> ID：11050327
> 
> 赞同：0
> 
> 时间：2012-06-15T12:06:04.653
> 
> 标签：objective-c, ios, video

在我的应用程序中，我需要在 iPhone 上获取视频文件的镜像和旋转副本。最好和最快的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:30:22.643

试穿[这个](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CAReplicatorLayer_class/Reference/Reference.html)尺寸。

> CAReplicatorLayer 类创建其子层（源层）的指定数量的副本，每个副本都可能应用几何、时间和颜色转换。

# matlab - 如何编写受保护的 MATLAB 脚本/程序？

> ID：11050328
> 
> 赞同：3
> 
> 时间：2012-06-15T12:06:17.087
> 
> 标签：matlab, obfuscation, matlab-deployment

我需要向客户端编写一个 MATLAB 脚本/程序；我需要隐藏代码。客户端只能运行程序，但不能读取代码。我可以知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T12:17:02.430

`pcode`函数创建受保护`.p`的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:16:34.880

编译它： http: [//www.mathworks.nl/products/compiler/](http://www.mathworks.nl/products/compiler/)

> 加密 MATLAB 代码，使其无法查看或修改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:16:49.440

尝试[pcode](http://www.mathworks.co.uk/help/techdoc/ref/pcode.html)。

没有什么可添加的，只是超过了最小答案大小

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T12:18:28.773

看看[`pcode`](http://www.mathworks.co.uk/help/techdoc/ref/pcode.html)。另一种方法是将代码编译为二进制，正如其他人所建议的那样。请参阅[保护您的源代码](http://www.mathworks.co.uk/help/techdoc/matlab_prog/f7-38053.html#bsc58yj-1)。

# reporting-services - 报告草稿中的虚假数据

> ID：11050330
> 
> 赞同：2
> 
> 时间：2012-06-15T12:06:25.380
> 
> 标签：reporting-services, reportingservices-2005

我正在设计 ssrs 中的报告草稿以向业务部门展示，以便他们可以就布局/数据排序和分组以及要省略或添加到报告中的字段做出决定。

为此，我不想专注于布局，也不想浪费任何时间和精力来编写查询来填充各种表格和列表。

ssrs 设计师是否允许我专注于布局而不是数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:56:21.043

据我所知，SSRS 中没有内置任何东西可以做到这一点。尽管您可以自己做一些技巧，以最大程度地减少创建模拟数据集所花费的时间，但您会想到一些技巧。这是我能想到的一些：

1.  将数据库中的**现有视图**用于数据集，这些视图在结构上接近您在草稿获得批准时创建的数据集。

2.  使用**不同的（示例）数据库**，例如 Adventureworks，并选择类似于您将用于最终报告的数据的视图或示例查询。

3.  （黑客警告！:D）**使用 MS Excel 模拟**数据集，将其导入临时表（例如使用 SSMS 导入任务），然后`SELECT * FROM _importtable_`在数据集中执行操作。

4.  **自己编写一个假查询**，但只注意第一点：执行`SELECT`，并跳过`FROM`. 将它与几个`UNION`s 结合以获得更多数据。例如创建这个数据集：

* * *

```
SELECT 1 AS UserId, 'John' AS Usr, 883 AS OrdersPlaced, '2012-05-16' AS OrderDate
UNION 
SELECT 1, 'John', 503, '2012-05-17'
UNION 
SELECT 2, 'Marcus', 503, '2012-05-16'
-- etc 
```

# javascript - Coda Slider 在 IE 7 javascript 错误中不起作用

> ID：11050332
> 
> 赞同：0
> 
> 时间：2012-06-15T12:06:27.803
> 
> 标签：javascript, internet-explorer, coda-slider

嗨，我有 coda 滑块在`Chrome`, `FF`,中工作正常`IE 9`，但在`IE 6-8`它不起作用的情况下，javascript 调试器说那行代码：

```
$container.css('width', $panels[0].offsetWidth * $panels.length); 
```

它说：

```
Unable to get value of the property 'offsetWidth': object is null or undefined 
```

对此有任何帮助将非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:12:54.523

尝试[使用 outerWidth()](http://api.jquery.com/outerWidth/)（jQuery 方法）而不是 offsetWidth。

# plugins - 即时翻译 ASP 页面

> ID：11050337
> 
> 赞同：0
> 
> 时间：2012-06-15T12:07:01.667
> 
> 标签：plugins, asp-classic, translation

最近我遇到了一个用 ASP 开发的软件解决方案，它只能在 Internet Explorer 中运行。该软件是英语，因此我需要将其翻译成另一种语言，以便更有效地向观众展示。

问题是软件是在不使用资源的情况下开发的，所以所有需要翻译的单词、句子等都在代码中，我们必须逐行翻译。

你知道是否有一个 IE 插件可以根据我们输入的任何语言翻译 A​​SP 文件？

先感谢您！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:55:44.210

您可能想看看谷歌翻译器[https://translate.google.com/manager/](https://translate.google.com/manager/) 它在客户端运行，并且似乎可以很好地翻译页面。

# android - 确定用户是否在 google play 上为应用付费的最佳方法

> ID：11050344
> 
> 赞同：2
> 
> 时间：2012-06-15T12:07:16.290
> 
> 标签：android, google-play

对于如何创建一个在我想到的场景下运行良好的合适模型，我似乎已经走到了尽头。

场景如下；用户从 Google play 购买应用程序。在运行时，我请求用户凭据（与当前设备关联的 Google 帐户），然后我将其传输到网络服务。此时，后端服务会尝试对用户进行身份验证并确定他们是否实际购买了相关应用程序，然后才返回与请求相关的任何数据。（请记住，一般来说，任何请求，正如我们谈论的基于内容的应用程序，在运行时生命周期的任何时间点对 Web 服务的任何请求都必须始终通过上述管道）。

现在，上述情况如此具体的原因是以下原因；-我希望一切都由最终服务管理，而不是让任何 Auth 进程本地运行，因为它很容易被绕过。我的意思是，只要任何人都可以在他们的设备上反编译应用程序，检查代码，根据他们的需要重新编译它，如果设备被 root 可以完全访问任何文件，甚至可以清除与应用程序相关的任何数据只需从 android 的应用程序设置中按下“清除数据”选项......除了我上面描述的那个之外，我没有看到任何其他可行的场景。

现在说了以上所有我的问题是，谷歌似乎不喜欢谷歌播放开发者 api 和谷歌+ api 的这种特定场景。

因此，我非常感谢您就我提到的场景和解决此问题的方法提供的意见、想法和任何相关材料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:32:21.123

使用[LVL](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)和[ProGuard](http://developer.android.com/tools/help/proguard.html)有什么问题？这些工具专门设计用于分别解决您对许可证验证和逆向工程的担忧。

而且，真的不要太担心千分之一的人可能会尝试免费获得您的付费应用程序。如果您的应用程序很好，那么无论如何您都会获得大量销售。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:00:53.970

我不知道您可以使用任何此类 API。为什么不试试 LVL，它可以确保它实际上是从 Android 市场下载的？如果它是一个付费应用程序，那么用户肯定已经为此付费了。

就反编译而言，试试 Proguard。这不是 100% 完美的解决方案，但很难打破它。

现在，进入内容。如果您不希望其他人窃取您的内容，请加密并保存。您可以拥有一个非常好的加密机制来与您的 Web 服务一起使用，这将确保它非常难以破解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T08:20:41.337

如果我正确阅读了您的建议，那听起来像是严重侵犯了您的用户隐私，并且肯定违反了 Google 的 ToS。为什么你的用户会给你他们的私人凭证？它们不应该提供给任何人，那么他们为什么要信任您或您的系统呢？如果您被黑客入侵并且凭据被盗，您也将承担责任。

# amazon-ec2 - 从实例存储创建 AMI - 如何找到实例存储的挂载位置？

> ID：11050346
> 
> 赞同：0
> 
> 时间：2012-06-15T12:07:20.130
> 
> 标签：amazon-ec2

我正在尝试从亚马逊 EC2 上的“实例存储”实例创建 AMI。这就是我所做的

1.  从社区 ami-72bf441b 获取现有的 Fedora ami
2.  启动系统并进行了一些修改
3.  现在我正在尝试使用[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html为新推出的系统创建一个 ami](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html)
4.  达到我需要复制证书密钥的地步“将您的 Amazon EC2 私钥和 X.509 证书复制到使用安全复制功能（如 SCP）安装实例存储的目录。”

在这里，我对如何找到挂载实例存储的目录感到困惑？文档说 /media/ephemeral0 或 /dev/sdf，但不存在这样的目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:38:17.630

基本上，在实例存储 AMI 上，几乎所有目录都是临时的。也许他们的意思是，您不应该复制到手动附加的 EBS 或网络文件系统。没有把握。无论如何，我发现[这个](http://robpickering.com/2010/07/create-a-full-backup-image-of-your-amazon-ec2-instance-2-129)方法更容易理解。

无论您如何使用，出于明显的安全原因，请确保生成的 AMI 不包含您的证书和密钥。您可能需要使用 -e 标志。

# asp.net-mvc - 存储库模式和 Azure 表存储

> ID：11050350
> 
> 赞同：-3
> 
> 时间：2012-06-15T12:07:48.817
> 
> 标签：asp.net-mvc, azure-table-storage

在我当前的项目中，我需要在查询 Azure 表存储时遵循存储库模式，以便完全隐藏数据源。

实现此模式的最佳方法是什么？例子会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:21:22.107

查看 Martin Fowler 的[企业应用程序架构模式 (PoEAA)](http://martinfowler.com/eaaCatalog/index.html)，这里是[**存储库**](http://martinfowler.com/eaaCatalog/repository.html)模式的链接。阅读此内容，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:22:05.673

[这](http://azure.snagy.name/blog/?p=294)是一个很好的例子，向下滚动到“场景 3”，它应该给你一个实现表存储的存储库模式的基本概念。

# batch-file - 如何在批处理编程中使用通配符？

> ID：11050351
> 
> 赞同：1
> 
> 时间：2012-06-15T12:07:51.063
> 
> 标签：batch-file

我正在尝试使用通配符将某些文件组移动到由该组的文件名创建的文件夹中。文件名存储在“events.txt”中。我的批处理文件一直运行到最后一行。显示我的语法不正确。

```
echo off
for /F "tokens=*" %%A in (events.txt) do call :makemove %%A
pause 
exit

:makemove
set f=%1
set file=%f:~0,-4%  
md X%file%
set dest=C:\Users\sony\Desktop\X%file%
move /y "C:\Users\sony\Desktop\*%file%*.*" "%dest%" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:32:08.103

好像后面有空格字符

```
set file=%f:~0,-4% 
```

线。

这会导致脚本的最后一行评估为

```
move /y "C:\Users\sony\Desktop\*foobar  *.*" "C:\Users\sony\Desktop\Xfoobar  " 
```

并弄乱了路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T04:33:45.650

Like Helbreder pointed out, there is a space after `set file=%f:~0,-4%`.
To avoid this type of problems you can use the extended syntax of `SET`.

`set "file=%f:~0,-4%"`

The surrounding quotes will ensure that only all characters until the last quote are part of the string.
The quotes itself are not part of the string.

So even this would work

```
set "file=%f:~0,-4%"    the spaces and this text will be removed 
```

Another positive effect from the quotes is that they will avoid problems with special characters in the filename, like in `Cat&Dog`.

So your code should look like

```
@echo off
for /F "tokens=*" %%A in (events.txt) do call :makemove %%A
pause 
exit

:makemove
set "f=%~1"
set "file=%f:~0,-4%"
md "X%file%"
set "dest=C:\Users\sony\Desktop\X%file%"
move /y "C:\Users\sony\Desktop\*%file%*.*" "%dest%" 
```

# facebook - 从某个相册中选择照片 id、small_src

> ID：11050353
> 
> 赞同：0
> 
> 时间：2012-06-15T12:07:54.840
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想获取属于某个相册的图片的 ID 和缩略图图像来源。
我有 user_photos 权限，album_id 是 app_user 的权限。

到目前为止，我已经尝试过：
`https://graph.facebook.com/<album_id>?fields=photo&access_token=...` ^返回太多的数据，比如评论和标签等等。我想避免这种情况。

和 FQL：
`SELECT pid,src_small FROM photo WHERE aid="album_id"`

url：
`https://graph.facebook.com/fql?q=SELECT+pid,src_small+FROM+photo+WHERE+aid=" <album_id>"&access_token=...`
获取空结果。

我打算编写一个 ajax 照片选择器来使用我的应用程序:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:38:14.973

根据[https://developers.facebook.com/docs/reference/fql/photo/](https://developers.facebook.com/docs/reference/fql/photo/)

"src_small" -> 正在查询的照片缩略图版本的 URL。图像的最大宽度为 75 像素，最大高度为 225 像素。**此 URL 可能为空。**

也许您可以尝试“图像”。

例如，

```
SELECT pid,images FROM photo WHERE aid="album_id" 
```

然后根据您需要的照片的大小范围选择一个网址。

# android - Android-包括xml中的自定义线性布局

> ID：11050362
> 
> 赞同：2
> 
> 时间：2012-06-15T12:08:32.513
> 
> 标签：android, android-linearlayout, android-custom-view

我创建了一个扩展 LinearLayout 的 Java 类，如下所示

```
 public class News extends LinearLayout{

    Context context;

     public News(Context context) {
    super(context);
     this.context=context;

     ViewFlipper viewFlipper=new ViewFlipper(context);
     viewFlipper.setLayoutParams(this.getLayoutParams());
    this.addView(viewFlipper);

    } 
```

现在是否可以像这样将其包含到 xml 布局中：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res/com.example.android.apis"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <com.example.android.apis.view.LabelView
                android:background="@drawable/green"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" 
                app:text="Green" app:textColor="#ffffffff" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:10:10.563

```
 <com.yourcompanyname.projectname.News<<<change here and check path is proper
                android:background="@drawable/green"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" 
                app:text="Green" app:textColor="#ffffffff" /> 
```

*   [看到这个](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:12:43.793

是的，但您也应该覆盖其他构造函数。

```
<com.yourproject.package.News
    android:background="@drawable/green"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    app:text="Green" app:textColor="#ffffffff" /> 
```

此外， xmlns:app="http://schemas.android.com/apk/res/com.example.android.apis" 也需要更新到您的应用程序包。

# php - Symfony2 __toString() 生成

> ID：11050363
> 
> 赞同：2
> 
> 时间：2012-06-15T12:08:39.597
> 
> 标签：php, symfony

Symfony2 是否具有基于实体字段的自动 __toString() 生成，或者说应该生成 __toString() 的注释，类似于 Java Roo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:54:22.947

[我在annotations 参考](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/annotations-reference.html)下找不到这样的功能，而 Google Group 之间的共识似乎与`__toString()`对对象的定义一致。

如果您使用诸如 Net Beans 之类的 IDE，一个简单的`CTRL+SPACE`热键和单击将自动为您生成 __toString()，您只需填写对要用于表示对象的任何属性的引用。

此外，您可以更进一步，定义一个实体模板（这是我在 Net Beans 中所做的）。这样的事情可以节省你一些时间，记住 Doctrine2 是我在这个例子中的 ORM，我使用 annotations 方法来定义我的实体：

```
<?php

namespace Foo\BarBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
//use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 */
class ${name}
{
    /**
     * @ORM\Id @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */
    protected $id;

    public function __toString()
    {
        //return $this->get();
    }
} 
```

这会自动填写类名并注释掉 ArrayCollection（因此如果实体需要，我可以轻松地将其添加进去）。这将使您只需要填写您想使用的任何方法的其余部分`__toString();`

`${name}`是[NetBeans 中的模板变量](http://wiki.netbeans.org/FaqTemplateVariables)。

# asp.net - 从 js 函数调用 C# 方法是 MasterPage

> ID：11050364
> 
> 赞同：-2
> 
> 时间：2012-06-15T12:08:43.327
> 
> 标签：asp.net

是否可以从 javascript 函数调用 C# 方法后面的 MasterPage 代码（js 函数在 MasterPage 的前端）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:14:17.537

是的，通过使用页面方法：

```
 function uploadPanelClear() {

    PageMethods.setSession(OnSucceededSession, OnFailedSession);

}
function OnFailedSession()
{
}
function OnSucceededSession()
{

} 
```

CS ：

```
 [WebMethod(enableSession: true)]
    public static string setSession()
    {

        return "";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:11:20.893

这可以使用 signalR 库来实现。

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

# django - 将 django 压缩器配置为不重命名后处理文件

> ID：11050368
> 
> 赞同：2
> 
> 时间：2012-06-15T12:08:51.983
> 
> 标签：django, sass, django-compressor

Django 压缩器在开发模式下用丑陋的哈希重命名我漂亮的文件名，我不想压缩它，只处理 scss 到 css。如何配置 django 压缩器在处理 sass 文件后不重命名它们，而项目以 DEBUG = True 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T12:21:38.753

在开发模式下禁用它。在生产中，您不需要关心。

（但是，在部署之前，在打开压缩的情况下测试 dev 可能是谨慎的做法。）

# jquery - jQuery Mobile 中类似画廊的轮播

> ID：11050377
> 
> 赞同：7
> 
> 时间：2012-06-15T12:09:32.313
> 
> 标签：jquery, jquery-plugins, jquery-mobile, image-gallery

我很想在 jQueryMobile 中做这样的事情：

[旋转木马](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/carousel)

我只需要一个滑块和选择哪个页面的指示器。它会显示一些图片。

所以我测试了很多图片库。但他们中的大多数人

a) 将缩略图作为初始界面或 b) 不适用于 jQuery Mobile。

有谁知道一个简单的方法来开始这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:57:25.733

Cubiq 的[Swipeview](http://cubiq.org/swipeview "滑动视图")非常好，轻巧且响应迅速。

它有你所要求的，仅此而已。在我用 jQM 测试过的滑块中，这是迄今为止响应速度最快的。

为了让它与 jQM 一起工作，你有三个选项：

1.  在 jQM 之前初始化
2.  将其包装在页面显示中
3.  将其放在 iFrame 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T11:38:03.420

Bootstrap 内置的默认轮播相当不错。结合一些自定义 css 可以创造奇迹。它有缩略图选项，我相信它可以与 jQuery Mobile 一起使用。
您可以使用以下链接查看它：

[Boostrap 旋转木马](http://getbootstrap.com/examples/theme/#carousel-example-generic "引导网站")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T10:11:30.697

ItemSlide.js 是一个很棒的手机轮播，它简单、易于使用且体积小！可以在此处找到现场演示和文档：http: [//itemslide.github.io/](http://itemslide.github.io/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T13:38:03.740

[Slick slider](http://kenwheeler.github.io/slick/)是一个很好的小插件，并且可以自定义。

# asp.net-mvc-3 - Backbone.js 如何使用 Asp.NET MVC 4 提供基于休息的服务

> ID：11050379
> 
> 赞同：0
> 
> 时间：2012-06-15T12:09:47.927
> 
> 标签：asp.net-mvc-3, rest, backbone.js, asp.net-mvc-4

我在 Asp.NEt MVC3 中使用backbone.js 实现了一些代码，发现backbone.js 非常有用。实际上，我正在开发数据仓库应用程序，视图端的用户可以在其中运行/保存他的数据分析。并且重新登录后可以重新运行保存的分析。单击工具栏系统上的保存按钮时，将分析保留在数据库中。

我的问题是，有人可以使用 Asp.NET MVC 4 指向主干.js 与基于休息的服务交互的链接，以便在 DB 中保存/检索数据。

请给我建议更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:59:21.473

我最近使用 Backbone 在 ASP.NET MVC4 和 WebAPI 之上构建了几个非常大的系统。我强烈推荐 WebAPI。它非常易于使用，并且与 Backbone 配合得非常好。

[http://www.asp.net/web-api](http://www.asp.net/web-api)

作为我用它构建的应用程序的一个示例：

[https://ravenhq.com/](https://ravenhq.com/)

注册、登录、管理、账户设置都是WebAPI之上的Backbone。

# jquery - jquery 使用父级或兄弟级

> ID：11050380
> 
> 赞同：0
> 
> 时间：2012-06-15T12:10:01.950
> 
> 标签：jquery

您好，我在一页上有多个画廊，并且还使用了灯箱脚本。我认为我可以使用父母或兄弟姐妹功能，而不是必须以不同的方式对每个画廊进行标识，但我无法让它工作任何人都可以帮忙吗？

```
<div id'gallery'>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
</div>

<div id'gallery'>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
</div>

<div id'gallery'>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
<a id='galImage'>.....</a>
</div> 
```

我正在使用的脚本是

```
$(function() {
   $('#gallery #imageGal').lightBox({
    overlayBgColor: '#FFF',
   });
}); 
```

我试过了

```
$(function() {
   $("#gallery + #imageGal", this).lightBox({
    overlayBgColor: '#FFF',
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:16:13.307

我建议您为此目的使用另一个属性而不是 ID。例如：

```
<div gallery='true'>
  <a galImage='true'>.....</a>
  <a galImage='true'>.....</a>
  <a galImage='true'>.....</a>
</div> 
```

以及更新脚本：

```
$(function() {
   $('div[gallery] a[imageGal]').lightBox({
    overlayBgColor: '#FFF',
   });
}); 
```

# android - Android：Sqlite数据库非法状态异常（数据库已经关闭）

> ID：11050381
> 
> 赞同：5
> 
> 时间：2012-06-15T12:10:07.880
> 
> 标签：android

我有一个数据库助手对象。离开活动时关闭它很重要，所以我这样做了。但是，在返回活动时，我收到有关查询已关闭数据库的警告。该查询确实有效，但仍有一些明显错误。

我对 Android Activity 生命周期的理解不强，但我认为我需要在 onResume() 中重新打开数据库。这不正确吗？

这是 onResume()：

```
@Override
protected void onResume() {

super.onResume();

    dbHelper.setInteger(playerID);        
    dbHelper.openDataBase();
    ourCursor = dbHelper.getPlayerSavedQuestions();        
    startManagingCursor(ourCursor);
    adapter = new MyCustomAdapter(ourCursor);
    myListView.setAdapter(adapter);
} 
```

这是 dbHelper.openDataBase();

```
 public void openDataBase() throws SQLException {
    String myPath = DATABASE_PATH + DATABASE_NAME;
    dbSqlite = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);       
} 
```

这是我的日志：

```
06-15 13:51:32.388: W/SQLiteCursor(26750): requery() failed database /data/data/com.boboshi.exquizit.eng/databases/exquizit_custom.mp3 (conn# 0) already closed
06-15 13:51:32.388: W/SQLiteCursor(26750): java.lang.IllegalStateException: database /data/data/com.boboshi.exquizit.eng/databases/exquizit_custom.mp3 (conn# 0) already closed
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.database.sqlite.SQLiteDatabase.getDbConnection(SQLiteDatabase.java:2407)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.database.sqlite.SQLiteDatabase.getDatabaseHandle(SQLiteDatabase.java:2388)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.database.sqlite.SQLiteCursor.requery(SQLiteCursor.java:246)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.Activity.performRestart(Activity.java:4505)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.Activity.performResume(Activity.java:4531)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.os.Looper.loop(Looper.java:137)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at java.lang.reflect.Method.invoke(Method.java:511)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-15 13:51:32.388: W/SQLiteCursor(26750):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:19:33.407

您需要在`onResume`...中实例化您的 dbhelper 类，当您离开活动时，它也（可能）被破坏。

```
dbHelper = new YourDatabaseHelper(); 
```

实际上，由于`onResume`即使在新开始时也被调用，您可以将所有代码移到那里（从而避免两次实例化您的助手（和做其他事情）。

# ios - 没有 xib 文件的 alloc/init 初始化视图控制器不调用 viewDidUnload

> ID：11050384
> 
> 赞同：0
> 
> 时间：2012-06-15T12:10:21.507
> 
> 标签：ios, memory-management, viewdidunload, memory-warning

当我通过模拟器模拟任何iOS版本的内存警告时，为什么不`viewDidUnload`调用方法，当我不使用xib并使用alloc/init来初始化我的？`ViewController`似乎从未调用过此方法。

如果我使用 xib 文件通过 alloc/initWithNibName 创建控制器，则成功调用 viewDidUnload 方法。为什么会这样？所有视图控制器是否都需要 xib 文件才能正常处理内存警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:16:34.900

`viewDidUnload`每当收到内存警告并为每个具有不可见视图的视图控制器调用它时都会调用它，例如，`UINavigationController`如果您推送一个新视图控制器并且此视图控制器导致内存不足， `viewDidUnload`则将调用呈现视图控制器（因为它的视图不可见）

另请注意，如果您实施`didReceiveMemoryWarning`并且不调用`[super didReceiveMemoryWarning];`，`viewDidUnload`则不会调用

例如，如果您的视图控制器中有这个

```
- (void)didReceiveMemoryWarning
{
    //with 
    [super didReceiveMemoryWarning]; // viewDidUnload gets called

    //without [super didReceiveMemoryWarning]; viewDidUnload does not get called
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:29:46.477

我解决了我的问题。我没有 xib 的实现只需要添加以下代码：

```
- (void) loadView {
   UIView * myView = [[[UIView alloc] init] autorelease];
   self.view = myView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:03:00.203

受限于 Beta 计划的条款，我相信我们无法详细讨论 iOS 6 Beta，但我也可能建议您在 8 页 iOS 6 Beta 1 版本中查看第 6 页底部有关 viewWillUnload 和 viewDidUnLoad 的注释。

# java - 在 Windows Server 2003 上部署 Java Web 应用程序

> ID：11050385
> 
> 赞同：1
> 
> 时间：2012-06-15T12:10:22.093
> 
> 标签：java, windows, web-applications, deployment

这是我在stackoverflow上的第一篇文章，所以如果我的问题很愚蠢，标签错误，不够具体，请原谅我，告诉我如何改进我的帖子！我通常会通过之前提出的问题找到我需要的所有答案 - 并且非常感谢堆栈溢出社区！- 但这次不是！

所以，我是学生，我目前正在开发一个 java2EE Web 应用程序来帮助一家公司管理其模具库存。我使用 struts2 框架来开发应用程序（*称为 MMS*），它在我的个人环境中运行良好：

*   操作系统：windows7，64 位，服务包 1
*   应用服务器：Apache Tomcat 7.0.27 让 MMS 在 localhost 上运行
*   数据库服务器：Wampserver2.2d 存储彩信的数据库
*   Java：Java JRE7 (jre_7u4-windows-x64)
*   IDE：Eclipse Java EE 靛蓝 sr2

现在我需要在我雇主的服务器上部署我的应用程序。他们让我通过 microsoft 远程桌面工具访问 Windows 2003 服务器，其配置如下：

*   Microsoft windows server 2003 企业版
*   服务包 2

我的问题很简单：我如何从在我自己的环境中运行良好的应用程序转变为在他们的服务器上运行并可供其内部网员工访问的应用程序？令人惊讶的是，我没有找到任何解释如何做到这一点的教程。到目前为止，我找到的文档如下：

*   Tomcat 文档：http: [//tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html)
*   微软文档：http: [//msdn.microsoft.com/en-us/library/aa478983.aspx](http://msdn.microsoft.com/en-us/library/aa478983.aspx)
*   其他一些解释一些逻辑的文档（无法发布链接，因为我是新用户！）

我的猜测是：

1.  首先我需要准备环境，即：在windows 2003服务器上安装java，一个servlet应用服务器，一个MySQL服务器。为此，我很想在 Windows 2003 服务器上安装 java JRE7、tomcat7 和 wampserver2.2，它们使用我在 PC 上使用的相同 .EXE。
2.  在servelet应用程序服务器中部署MMS：为此，我想我可以将MMS的.WAR（使用Eclipse创建）放到tomcat的webapp文件夹中。
3.  在 MySQL 服务器上部署我的数据库：为此，我正在考虑从我的计算机中导出我的数据库并使用 PHPmyAdmin（和一个 .SQL 文件）将其导入服务器
4.  最后更改 MMS 的 context.xml 以使其能够与其新数据库通信。

这是否足以让我工作的公司的员工通过他们的网络浏览器访问网络应用程序（仅限公司的内部网）？

任何告诉我是否要继续编写方向，如果我忘了做任何事情，提供建议等的答案将不胜感激:)

非常感谢您提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:27:41.123

这是我建议的通用解决方案。您可以简单地安装 wamp 服务器包和适用于 windows 的 tomcat。上传你的war文件并启动mysql db、apache和tomcat服务。Wamp 服务器应该为你的 mysql 提供 php、mysql 和 phpmyadmin。如果你擅长批处理文件，如果你想自动启动、停止和重新启动所有服务，你可以制作一个批处理文件。

# css - 使用 Stylus 从 mixin 返回变量

> ID：11050389
> 
> 赞同：1
> 
> 时间：2012-06-15T12:10:47.000
> 
> 标签：css, sass, stylus

是否可以从 mixin 或函数将变量应用于本地范围？例如：

```
.hello-world
    get-variables(bar);
    content: $foo; 
```

将输出到：

```
.hello-world
    content: 'bar'; 
```

因为 get-variables mixin 将一个名为 $foo 的变量应用于本地范围。

这在 Stylus 中可行吗？如果没有，Sass 可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:13:45.577

在撰写本文时，我认为不可能从 Stylus 中的 mixin 或函数返回变量。

例如：

```
val = green

foo()
    val = red
    return val

.foo
    foo()
    color val 
```

回报：

```
.foo {
    color: green;
} 
```

然而，在 SASS 中：

```
$val: green

@mixin foo 
    $val: red

.foo
    @include foo
    color: $val 
```

将返回：

```
.foo {
    color: red;
} 
```

但是，在 Stylus 中，您可以将函数的结果分配给一个变量，该变量可能会或可能不会给您正在寻找的结果。

```
val = foo()
content val 
```

# sql-server-2008 - 在 sql server 2005 上执行 SSIS 包

> ID：11050391
> 
> 赞同：0
> 
> 时间：2012-06-15T12:10:49.993
> 
> 标签：sql-server-2008, sql-server-2005, ssis

我在 Sql server 商务智能工作室中为 sql server 2008 设计了 ​​SSIS 包。现在我需要在 SQL 2005 服务器上执行。什么是最好的解决方案，无需完全重写包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:24:44.767

您不能为 2008 年开发，然后在 2005 年运行。话虽如此，请尝试回答以下问题：

[SSIS 2008 2005 兼容性问题](https://stackoverflow.com/questions/1924435/sql-server-integration-services-2008-2005-compatibility)

# java - 在java中乘以双打？

> ID：11050393
> 
> 赞同：4
> 
> 时间：2012-06-15T12:11:00.860
> 
> 标签：java, android, math, double, multiplication

我正在尝试将相同的双倍（平方）相乘，但结果是错误的。当我自己显示双倍时，数字是正确的，但是当我将其自身相乘时，它会得出错误的数字。我已经尝试使用 math.pow 函数并得到相同的结果。

```
 Double height=Double.parseDouble(myPrefs.getString("Heightent",""))*.0254;
    Double bmi = (height*height);
    dbmi.setText(bmi.toString()); 
```

在不同的活动中以英寸为单位输入高度。当我在文本框中显示高度时，它是正确的数字。例如，输入的高度为 74，当我将高度放入文本视图时显示 1.8796。但是当我使用上面的代码时，TextView dbmi 中会显示数字 16。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:23:08.777

看看斯蒂芬 C 的这篇很棒的帖子。

[https://stackoverflow.com/a/5385202/1214163](https://stackoverflow.com/a/5385202/1214163)

它应该提供你需要的一切。他建议，如果您需要处理大数字，请使用`BigDecimal`该类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:39:34.590

我都试过了

```
 Double height=Double.parseDouble("74")*.0254;
    Double bmi = (height*height);
    System.out.println("first " + bmi);

      height=Double.parseDouble("74");
      double temp = height.doubleValue()*.0254;
      bmi = (temp*temp);
      System.out.println("Second " + bmi); 
```

在*Calc上*

到处都一样..... ![在此处输入图像描述](../Images/5bce8b195dc54f37c953953c7872bae2.png)

# ruby - 在 ruby 中生成一个进程，捕获标准输出，标准错误，获取存在状态

> ID：11050401
> 
> 赞同：5
> 
> 时间：2012-06-15T12:11:23.950
> 
> 标签：ruby

我想从 ruby​​ rake 脚本运行一个可执行文件，比如说`foo.exe`

我希望`STDOUT`和`STDERR`输出`foo.exe`直接写入我正在运行 rake 任务的控制台。

当该过程完成时，我想将退出代码捕获到一个变量中。我如何实现这一目标？

我一直在玩`backticks`, `process.spawn`，`system`但我无法获得我想要的所有行为，只有部分

**更新：**我在 Windows 上，在标准命令提示符下，而不是 cygwin

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T12:24:34.643

[`system`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)得到`STDOUT`你想要的行为。它还返回`true`一个可能有用的零退出代码。

`$?`填充了有关上次`system`调用的信息，因此您可以检查退出状态：

```
system 'foo.exe'
$?.exitstatus 
```

我以这些东西的组合[`Runner.execute_command`](https://github.com/zopaUK/bozo/blob/86beb53e7b78d5f01086da4d5e2839642b5672dc/lib/bozo/runner.rb#L29)为例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:20:24.120

反引号将被`stdout`捕获到结果字符串中

`foo.exe`建议您正在运行 Windows - 您是否安装了 cygwin 之类的东西？如果你在 unixy shell 中运行你的脚本，你可以这样做：

```
result = `foo.exe 2>&1`
status = $?.exitstatus 
```

快速谷歌搜索说这也应该在本机 Windows shell 中工作，但我无法测试这个假设

# php - 匹配以 PHP 中另一个数组中指定的字母开头的数组元素

> ID：11050402
> 
> 赞同：1
> 
> 时间：2012-06-15T12:11:23.963
> 
> 标签：php, arrays, pattern-matching, match, built-in

我有以下数组：

```
Array
(
    [0] => BCD
    [1] => ACE
    [2] => AHP
    [3] => BGH
    [4] => ART
    [5] => COT
    [6] => ARG
    [7] => BGT
) 
```

我需要匹配第一个字母在以下数组中的所有元素：

```
Array
(
    [0] => B
    [1] => A
) 
```

要得到：

```
Array
(
    [0] => ACE
    [1] => AHP
    [2] => BGH
    [3] => ART
    [4] => ARG
    [5] => BGT
) 
```

没有循环遍历整个数组，我该如何在 PHP 中执行此操作？是否有内置的 PHP 数组函数或两者的组合？结果数组的键和值的顺序无关紧要。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:16:18.640

您可以将[array_filter](http://php.net/array_filter)用于这些操作：

```
$array = array('CBD', 'NHN', 'NHP', 'WHC', 'NND', 'CQN', 'WST', 'WVT');

$whitelist = array('W', 'N');

$filtered = array_filter($array, function($val) use ($whitelist) {
  // check if first letter is in the whitelist array
  if (in_array($val{0}, $whitelist)) {
    return $val;
  }
  return false;
}); 
```

输出：

```
Array
(
    [1] => NHN
    [2] => NHP
    [3] => WHC
    [4] => NND
    [6] => WST
    [7] => WVT
) 
```

# java - 让用户在android中选择授予权限

> ID：11050403
> 
> 赞同：3
> 
> 时间：2012-06-15T12:11:29.247
> 
> 标签：java, android, permissions, code-access-security

我们有一个 AutoCompleteTextView 可以方便地从用户联系数据中读取。然而，一些用户抱怨应用程序在安装时强制执行的“READ_CONTACT”权限。有没有办法让用户选择授予此权限并使用此功能，或者拒绝它并放弃该功能？如果在运行时不可能，也许还有其他方法？构建两个应用程序，一个具有该权限而一个没有该权限不是一种选择！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:17:21.660

> 有没有办法让用户选择授予此权限并使用此功能，或者拒绝它并放弃该功能？

抱歉不行。

> 如果在运行时不可能，也许还有其他方法？构建两个应用程序，一个具有该权限而一个没有该权限不是一种选择！

您可以在没有该权限的情况下构建主应用程序，然后创建一个拥有该权限并与主应用程序安全交互的插件。这是一个有点先进的技术。我[在我的一本书中](http://commonsware.com/AdvAndroid/)介绍了它，[这里是包含](https://github.com/commonsguy/cw-advandroid/tree/master/Introspection/CPProxy)演示主机和插件的示例项目的目录。就我而言，我使用的是`CallLog`代替`ContactsContract`，尽管权限 ( `READ_CONTACTS`) 是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:16:28.983

我对此不太确定，但您可以构建一个需要此权限的单独应用程序。这个额外的应用程序提供了一个内容提供者。您的主应用程序现在检查您的扩展应用程序是否已安装并从内容提供者那里获取该数据。

# objective-c - 将 txt 文件中的字符串读取到 iOS 中的 NSArrays

> ID：11050406
> 
> 赞同：4
> 
> 时间：2012-06-15T12:11:37.240
> 
> 标签：objective-c, ios, cocoa

经过大量阅读，实际上，将文本文件中的多行读入 an 的唯一方法似乎`NSArray`是：

```
NSString *myfilePath = [[NSBundle mainBundle] pathForResource:@"poem" ofType:@"txt"];

NSString *linesFromFile = [[NSString alloc] initWithContentsOfFile:myfilePath encoding:NSUTF8StringEncoding error:nil];

myArrayOfLines = [NSArray alloc];
myArrayOfLines = [linesFromFile componentsSeparatedByString:@"\n"]; 
```

`NSArrays`有一个方法，`initWithContentsOfFile`但我还没有看到任何如何使用它的例子。我读过一些帖子，指出该文件必须是 plist 而不是通用 txt 文件。

真的是这样吗？有没有办法将行（以 结尾`\n`）直接读入`NSArray`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:16:51.653

你说得对，除了`myArrayOfLines = [NSArray alloc];`那条没用的线。如果您已经有一个好的 txt 文件，请不要打扰 plist。但出于好奇，这里有一个链接，它解释了它如何与 plist 文件一起使用：[link](http://mobiledevelopertips.com/data-file-management/reading-a-plist-into-an-nsarray.html)

另外，如果你不使用 ARC，你会有一些泄漏，但这是另一个问题，我们没有完整的代码，所以我可能错了。

# java - Java中链表的链表

> ID：11050407
> 
> 赞同：8
> 
> 时间：2012-06-15T12:11:36.853
> 
> 标签：java, list, linked-list

我想知道如何创建链表的链表。`LinkedList`此外，如果预定义（来自 Java 的类）及其方法用于定义和其他添加、获取、列表迭代操作，这将很有帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-15T12:13:06.047

您可以将任何对象放入列表中，包括另一个列表。

```
LinkedList<LinkedList<YourClass>> list = new LinkedList<LinkedList<YourClass>>(); 
```

是s 个对象`LinkedList`中的一个。它也可以[从 Java 7 开始](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)以简化的方式编写：`LinkedList``YourClass`

```
LinkedList<LinkedList<YourClass>> list = new LinkedList<>(); 
```

**操作此类列表的非常简单的示例：**

然后您需要创建每个子列表，这里添加一个子列表：

```
list.add(new LinkedList<YourClass>()); 
```

然后创建内容对象：

```
list.get(sublistIndex).add(new YourClass()); 
```

然后您可以像这样迭代它（子列表的项目按子列表分组）：

```
for(LinkedList<YourClass> sublist : list) {
    for(YourClass o : sublist) {
        // your code here
    }
} 
```

如果您想向此列表列表添加特定方法，您可以创建`LinkedList`（或`List`，或任何其他`List`子类）的子类，或者您可以创建一个将列表列表作为字段的类，并在其中添加方法来操作列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T17:56:21.597

好吧，我已经完成了这段代码，而且我做对了

```
 java.util.LinkedList mainlist = new java.util.LinkedList();

          java.util.LinkedList sublist1 = new java.util.LinkedList();
          sublist1.add(object1);
          sublist1.add(object2);
          sublist1.add(object3);

          java.util.LinkedList sublist2=new java.util.LinkedList();
          sublist2.add(1);
          sublist2.add(2);

          mainlist.add(sublist1);
          mainlist.add(sublist2);

          // To retrieve the sublist1 from mainlist...........
          java.util.LinkedList temp = (java.util.LinkedList)mainlist.get(0); 
```

这里变量***mainlist***是**LinkedLists 的 LinkedList**，变量***temp***包含存储的第一个列表的值，即**sublist1** ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-29T12:24:07.150

您甚至可以简化对二级列表的访问，例如使用

```
 final List<List<String>> lists = new LinkedList<List<String>>() {
        @Override
        public List<String> get(final int index) {
            while (index >= size()) {
                add(new LinkedList<>());
            }
            return super.get(index);
        }
    }; 
```

此代码自动将新`LinkedList`的 s 添加到外部列表中。使用此代码，您以后可以轻松添加单个值：

```
lists.get(2).add("Foo"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T12:56:38.357

```
LinkedList<LinkedList<YourClass>> yourList = new LinkedList<LinkedList<YourClass>>(); 
```

作为宣言。要添加另一个链接列表（默认情况下到最后），您会这样做

```
yourList.add(new LinkedList<YourClass>()); 
```

要添加一个元素到系列中的第二个链表：

```
yourList.get(1).add(new YourClass()); 
```

# ruby-on-rails - 宝石未检出。请在 Heroku 中运行 `bundle install`

> ID：11050408
> 
> 赞同：4
> 
> 时间：2012-06-15T12:11:38.690
> 
> 标签：ruby-on-rails, git, heroku, gem, gemfile

我的 Gemfile 中有这个配置：

```
group :test do
  # ...
  gem "shoulda-matchers", :git => "git://github.com/watu/shoulda-matchers.git", :branch => "do_not_load_minitest"
end 
```

这在本地运行良好，但是当我推送到 Heroku 时，当我尝试运行 rake db:migrate 时，出现此错误：

> git://github.com/watu/should-matchers.git（在 do_not_load_minitest 处）未检出。请运行`bundle install`

事实上，我没有在 Heroku 上运行的 bundle install 的输出中看到它，可能是因为它在测试组上，而 Heroku 没有安装测试组。但是，为什么当我运行 rake db:migrate 时它会抱怨？它应该在登台环境中运行吗？

我尝试切换到 http url，但我得到的只是另一个 URL 的相同错误：

> [https://github.com/watu/shoulda-matchers.git](https://github.com/watu/shoulda-matchers.git)（在 do_not_load_minitest 处）未检出。请运行`bundle install`

将线移到 :test 组之外解决了这个问题。什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:26:08.133

If you don't really need that gem (since it is in :test group), you can add this configuration to your app:

```
heroku config:add BUNDLE_WITHOUT="development:test" --app <your_app> 
```

# iphone - 如何在不增加高度的情况下动态创建文本视图单行

> ID：11050409
> 
> 赞同：0
> 
> 时间：2012-06-15T12:11:48.700
> 
> 标签：iphone

我正在使用文本视图，我想将高度固定为 30。我还希望文本在换行到新行时向上滚动。这也需要动态完成。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:05:03.773

您将需要实现几件事：

您将需要实现几个 UITextView 委托方法。对您来说，最简单的（此时）可能是实现

```
-(void)textViewDidChange:(UITextView *)textView{
    NSRange range;
    range.location = [textView.text length] - 1;
    range.length   = 1;
    [textView scrollRangeToVisible:range];
} 
```

方法。使用我放在那里的代码。让我知道这是否适合您的需求:-)

# javascript - 压缩 HTML - 元素？

> ID：11050410
> 
> 赞同：1
> 
> 时间：2012-06-15T12:11:57.753
> 
> 标签：javascript, jquery, asp.net, sharepoint-2010, compression

我有包含很多元素（> 1000）的下拉列表。当我选择其中一个元素时，必须重建下拉列表，因为选择一个元素会导致其他元素消失。我在后面的代码（asp.net）中解决了这个问题。显示和隐藏该下拉菜单通常在几毫秒内完成。

但是当我选择一个元素时，必须重建 div，这需要长达 20 秒，这并不奇怪，因为该 div 包含大约 300KB 的数据，这些数据必须发送到客户端。DIV 看起来像这样：

```
 <div id="ctl00_PlaceHolderMain_ctlProductSelector_SubstancesList" class="substancesListWrapper">
<ul>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','3268');">(2-Propyloxy)ethyl acetate</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2415');">[(2-Propenyloxy)methyl] oxirane</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2837');">1-(2-Pyridyl) piperazine</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2239');">1,1,1,2-Tetrachloro-2,2-difluoroethane</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2880');">1,1,1,2-Tetrafluoroethane</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2110');">1,1,1-Trichloroethane</a></li>
(etc.) 
```

现在我想知道是否有一种方法可以压缩该 div-String 并通过 jQuery 或类似的方法在客户端解压缩它以减少流量。这是否有效，如果有效：我通常安全的字节百分比是多少？

这一切都发生在 SharePoint 站点中（希望这不会产生任何影响）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:17:12.610

你可能会改进几件事。一种方法是将所有 JavaScript 链接合二为一。这将为您每行节省 85 个字符。

```
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','3268');">(2-Propyloxy)ethyl acetate</a></li>
<li class='elementSingle'><a href="JavaScript:__doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances','2415');">[(2-Propenyloxy)methyl] oxirane</a></li> 
```

可以变成这个

```
<li class='elementSingle'><a href='#3268'>(2-Propyloxy)ethyl acetate</a></li>
<li class='elementSingle'><a href='#2415'>[(2-Propenyloxy)methyl] oxirane</a></li>
... 
```

还有一个 jquery 点击处理程序：

```
jQuery("li.elementSingle a").click(function(){
  __doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances', this.href.replace('#',''));
}); 
```

* * *

另一点是删除 class='elementSingle' 并为 css/js 的 ul 添加一个 id。这将每行节省 22 个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:16:22.523

如果您已经在使用 jQuery，只需完全删除锚点并为列表项元素提供 id 属性。

使用读取 id 的 jQuery 选择器。

HTML看起来有点像这样......

```
<div id="ctl00_PlaceHolderMain_ctlProductSelector_SubstancesList" class="substancesListWrapper">
<ul>
  <li class='elementSingle' id="ct100-3268">(2-Propyloxy)ethyl acetate</li>
  <li class='elementSingle' id="ct100-2415">[(2-Propenyloxy)methyl] oxirane</li>
  etc... 
```

jQuery可能是这样的......

```
$(function() {
  $('#ctl00_PlaceHolderMain_ctlProductSelector_SubstancesList .elementSingle')
  .click(function() {
    var number = $(this).attr('id').match(/-(\d+)$/)[1];
    __doPostBack('ctl00_PlaceHolderMain_ctlProductSelector_pnlSubstances', number);
  });
}); 
```

（免责声明；上述内容未经测试，但应该给您一个不错的指示。如果您想要一个经过测试的示例，请先发布一个 jsfiddle 示例）。

或者，考虑在加载页面的其余部分后使用 AJAX 加载列表。

# curl - 如何获取网站的热门访问页面？

> ID：11050411
> 
> 赞同：1
> 
> 时间：2012-06-15T12:12:00.377
> 
> 标签：curl, web-crawler

我需要获取站点访问次数最多的页面。例如 example.com 的前 20 个页面。
是否有任何api或其他东西来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:17:51.463

这取决于站点。它必须具有某种访问者统计跟踪功能，例如 Google Analytics。此跟踪软件必须提供 API，并且您必须具有访问它的权限，这通常仅在您自己运行站点或已被站点所有者授予必要权限的情况下。

另一种方法是，如果您可以直接访问 Web 服务器，则需要分析 Web 服务器日志。

如果我误解了你的问题，请澄清。

# php - 解析 html - CURL 和正则表达式

> ID：11050412
> 
> 赞同：0
> 
> 时间：2012-06-15T12:12:02.343
> 
> 标签：php, regex, curl

如何获取文本：“最大文本示例”来自：

```
<td valign="top" align="left">

    <a href="/server?tree=xabaf"
    class="normal"> Text example max </a>

</td> 
```

使用正则表达式？

```
include('simple_html_dom.php');
$ch = curl_init('http://www.site.com?id=325235');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$sss = curl_exec($ch);
curl_close($ch);

preg_match_all("#class="normal"?</a>$#", $sss, $arr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:26:25.777

使用正则表达式的解决方案

```
$text = "<a href='/server?tree=xabaf' class='normal'> 最大文本示例</a>
";
$regex_pattern = "/<a href=\"?\'?(.*)\"?\'?>(.*)<\/a>/";
preg_match_all($regex_pattern,$text,$matches);

```

PHP的DOM

```
$text = "<a href='/server?tree=xabaf' class='normal'> 文本示例最大值</a>";
$dom = 新的 DOMDocument;
$dom->loadHTML($text);
$links = $dom->getElementsByTagName('a');
foreach ($links 作为 $link){
    回声$链接->文本内容；
}

```

使用 DOM 而不是正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:30:03.317

由于没有其他文字，申请[`strip_tags()`](http://php.net/strip_tags)就足够了。

```
$str ='<td valign="top" align="left">

    <a href="/server?tree=xabaf"
    class="normal"> Text example max </a>

</td>';

$str = trim(strip_tags($str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:30:28.143

你可以试试这个...

```
include('simple_html_dom.php');

$url = 'http://www.site.com?id=325235';

$curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, $url);  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);  
$str = curl_exec($curl);  
curl_close($curl);

$html = str_get_html($str);

$content = $html->find('div[class=normal]');
echo $content->innertext; 
```

# validation - 没有验证的spring roo模型绑定

> ID：11050413
> 
> 赞同：2
> 
> 时间：2012-06-15T12:12:02.557
> 
> 标签：validation, spring-roo

这是我的模型`Admin`：

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord
public class Admin {

    @NotNull
    @Column(unique = true)
    private String name;

    @NotNull
    private String password;

    @NotNull
    @DateTimeFormat(style = "M-")
    private Timestamp createTime;

    @Transactional
    public void persist(){
        if (this.entityManager == null) this.entityManager = entityManager();
        this.password = DigestUtils.sha256Hex(this.password);
        this.createTime = new Timestamp(new java.util.Date().getTime());
        this.entityManager.persist(this);
    }

} 
```

该`createTime`字段有点不同，从数据库的角度来看，该字段不能为空，因为未来的业务逻辑可能会引用它，但从用户的角度来看，它永远不会出现，`create admin form`因为它稍后会被`persist`代码填充。问题是`AdminController.create`验证新创建的`Admin`对象失败，因为此时`createTime`仍然是`null`.

那么我该怎么做才能使创作`Admin`成功呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T21:23:17.333

您可以避免实体（管理员）中的@NotNull

它仅用于创建对象。如果每个对象都是从数据库中获取的，除了要创建的对象（在 Web 表单中或通过 DataOnDemand 进行的测试中），这对应用程序来说不是问题。

# c# - 如何在C#中获取图像的高度和宽度

> ID：11050416
> 
> 赞同：1
> 
> 时间：2012-06-15T12:12:27.223
> 
> 标签：c#, windows-runtime, microsoft-metro

我正在尝试从网站获取图像的高度和宽度，但它始终返回 0，因为图像尚未下载，所以我使用了以下代码但仍然无法正常工作，因为图像只会在方法结束后开始下载，所以它挂了

```
 someMethod
   {      
    foreach(string imagepath in paths){
    IsDownloaded = false;
    image = new BitmapImage(new Uri(imagepath));
    image.ImageOpened += image_ImageOpened;
    while (!IsDownloaded) ;
    /// code that will use image.PixelHeight only if it satisfy a condition then break
   }

    private void image_ImageOpened(object sender, RoutedEventArgs e)
    {
        IsDownloaded = true;
    } 
```

在 Metro 风格的应用程序中，有没有人对此有任何替代或任何修复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:19:19.867

你不能像那样使用异步编程 - 删除这一行：

```
while (!IsDownloaded) ; 
```

并将其后的所有内容放入`image_ImageOpened`方法中。我们通常把这称为“链接”，当你有一堆异步方法时，你必须在每个完成后继续处理。

我自己的获取宽度/高度代码的示例：

```
 BitmapImage imageSource = new BitmapImage();
        private void getImage()
        {
            Uri uir= new Uri("PATH", UriKind.Absolute);
            imageSource.ImageOpened += new EventHandler<RoutedEventArgs>(imageopenened);
        }

        void imageopened(object sender, RoutedEventArgs e)
        {
            HEIGHT = ImageSource.PixelHeight;
            WIDTH = ImageSource.PixelWidth;
        ...
        } 
```

# haskell - 为什么 Haskell/unpack 会弄乱我的字节？

> ID：11050420
> 
> 赞同：6
> 
> 时间：2012-06-15T12:12:46.287
> 
> 标签：haskell, protocol-buffers, unpack

我已经构建了一个微型 UDP/protobuf 发送器和接收器。我花了一上午的时间试图找出 protobuf 解码产生错误的原因，却发现是发送器 (Spoke.hs) 发送了不正确的数据。

用于`unpack`将 Lazy.ByteStrings 转换为 Network 包将发送的字符串的代码。我`unpack`在 Hoogle 中找到的。它可能不是我正在寻找的函数，但它的描述看起来很合适：“O(n) 将 ByteString 转换为字符串。”

Spoke.hs 产生以下输出：

```
chris@gigabyte:~/Dropbox/haskell-workspace/hub/dist/build/spoke$ ./spoke
45
45
["a","8","4a","6f","68","6e","20","44","6f","65","10","d2","9","1a","10","6a","64","6f","65","40","65","78","61","6d","70","6c","65","2e","63","6f","6d","22","c","a","8","35","35","35","2d","34","33","32","31","10","1"] 
```

虽然wireshark向我显示数据包中的数据是：

```
0a:08:4a:6f:68:6e:20:44:6f:65:10:c3:92:09:1a:10:6a:64:6f:65:40:65:78:61:6d:70:6c:65:2e:63:6f:6d:22:0c:0a:08:35:35:35:2d:34:33:32:31:10 
```

Spoke.hs 和 Wireshark 的长度 (45) 相同。

Wireshark 缺少最后一个字节（值 Ox01），并且中心值流不同（并且在 Wireshark 中大一个字节）。

`"65","10","d2","9"`在 Spoke.hs 与`65:10:c3:92:09`Wireshark 中。

由于 0x10 是 DLE，我感到很可能发生了一些转义，但我不知道为什么。

我对 Wireshark 有多年的信任，只有几十小时的 Haskell 经验，所以我认为是代码有问题。

任何建议表示赞赏。

```
-- Spoke.hs:

module Main where

import Data.Bits
import Network.Socket -- hiding (send, sendTo, recv, recvFrom)
-- import Network.Socket.ByteString
import Network.BSD
import Data.List
import qualified Data.ByteString.Lazy.Char8 as B
import Text.ProtocolBuffers.Header (defaultValue, uFromString)
import Text.ProtocolBuffers.WireMessage (messageGet, messagePut)
import Data.Char (ord, intToDigit)
import Numeric

import Data.Sequence ((><), fromList)

import AddressBookProtos.AddressBook
import AddressBookProtos.Person
import AddressBookProtos.Person.PhoneNumber
import AddressBookProtos.Person.PhoneType

data UDPHandle = 
     UDPHandle {udpSocket  :: Socket,
                udpAddress :: SockAddr}
opensocket :: HostName             -- ^ Remote hostname, or localhost
           -> String               -- ^ Port number or name
           -> IO UDPHandle         -- ^ Handle to use for logging
opensocket hostname port =
    do -- Look up the hostname and port.  Either raises an exception
       -- or returns a nonempty list.  First element in that list
       -- is supposed to be the best option.
       addrinfos <- getAddrInfo Nothing (Just hostname) (Just port)
       let serveraddr = head addrinfos

       -- Establish a socket for communication
       sock <- socket (addrFamily serveraddr) Datagram defaultProtocol

       -- Save off the socket, and server address in a handle
       return $ UDPHandle sock (addrAddress serveraddr)

john = Person {
  AddressBookProtos.Person.id = 1234,
  name = uFromString "John Doe",
  email = Just $ uFromString "jdoe@example.com",
  phone = fromList [
    PhoneNumber {
      number = uFromString "555-4321",
      type' = Just HOME
    }
  ]
}

johnStr = B.unpack (messagePut john)

charToHex x = showIntAtBase 16 intToDigit (ord x) ""

main::IO()
main = 
    do udpHandle <- opensocket "localhost" "4567"
       sent <- sendTo (udpSocket udpHandle) johnStr (udpAddress udpHandle)
       putStrLn $ show $ length johnStr
       putStrLn $ show sent
       putStrLn $ show $ map charToHex johnStr
       return () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:11:18.900

我看到的 bytestring 包的文档将 unpack 列为将 a 转换`ByteString`为`[Word8]`，这与 a 不同`String`。我希望 和 之间存在一些字节差异`ByteString`，`String`因为`String`Unicode 数据虽然`ByteString`只是一个有效的字节数组，但一开始`unpack`就不应该产生 a `String`。

因此，您可能在这里遇到了 Unicode 转换，或者至少当底层数据确实不是并且很少有好的结果时，某些东西将其解释为 Unicode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T11:04:03.193

我想你会想要`toString`and `fromString`from [utf8-string](https://hackage.haskell.org/package/utf8-string)而不是`unpack`and `pack`。[这篇博](http://www.alexeyshmalko.com/2015/haskell-string-types/)文对我很有帮助。

# html - 当浏览器窗口太小时，将 div 向左切断

> ID：11050423
> 
> 赞同：0
> 
> 时间：2012-06-15T12:12:55.437
> 
> 标签：html, css

在这个 html 中，我基本上有一个 sidebar-div 和一个 page-div，其中包含页眉、内容和页脚。我希望 page-div 位于中心，而不是 wrapper-div，因此我添加了“left:-75px;” sidebar-div 宽度的一半作为补偿。唯一的问题是当浏览器窗口变小时，侧边栏的一些部分会超出屏幕。

我能做些什么来解决这个问题？这是我的html。提前致谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>FRAME</title>
<style type="text/css">
<!--
html {
padding:0px;
margin:0px;
}
body {
background-color:#e1ddd9;
margin:0px;
padding:0px;
}
p {
margin:10px;
}
li {
list-style-type:none;
margin-left:-10px;
}

#wrapper {
position:relative;
width:1000px;
margin:0px auto;
padding:0px;
left:-75px;
}
#sidebar {
width:140px;
padding:0px;
float:left;
background-color:#ff99cc;
margin-top:130px;
margin-right: 10px;
}
#page {
width:850px;
padding:0px;
float:left;
overflow:auto;
}
#header {
height:100px;
background-color:#ff0;
margin-bottom:10px;
padding:10px;
}
#content {
background-color:#ffffff;
padding:10px;
}
#footer {
height:100px;
margin-top:10px;
background-color:#ff99cc;
padding:10px;
}
-->
</style>
</head>

<body>

<div id="wrapper">

    <div id="sidebar">
        <ul><li>Lorem</li><li>Ipsum</li><li>Dolor</li><li>Sit</li><li>Amet</li></ul>
    </div>

    <div id="page">

        <div id="header"><p>This is the header</p></div>

        <div id="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ornare mauris vel nulla fermentum sed iaculis mi sollicitudin. Nullam tortor ante, suscipit eu rutrum nec, pharetra et turpis. Vestibulum a metus et massa porta tincidunt. Nam ac enim quam, vitae dictum tortor. Cras porttitor rutrum turpis, id scelerisque sem pharetra eget. Proin rhoncus tincidunt erat, a ornare nibh faucibus dictum. Nam leo dui, lacinia sed hendrerit in, tempus vitae libero. Nam non erat ac ante tempus adipiscing.</p>
            <p>Nulla a sodales ipsum. Phasellus nec erat vitae enim laoreet sollicitudin. Morbi a egestas augue. Curabitur ac justo sit amet ipsum suscipit pulvinar eget vitae turpis. Sed iaculis arcu velit, sed vestibulum quam. Maecenas semper dolor ac leo laoreet sed vehicula libero scelerisque. In dui augue, faucibus id feugiat eu, vulputate id ante. Ut rutrum placerat orci, vitae lacinia lorem gravida et. Nullam semper eros lacus, sit amet tristique erat. Curabitur imperdiet lacus sit amet odio auctor congue. Sed ultricies erat et felis tincidunt pulvinar.</p>
            <p>Cras enim ipsum, faucibus sed vulputate sit amet, dignissim non odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc rutrum accumsan nibh, pharetra pharetra sem luctus eget. Donec vel tincidunt enim. Nunc vel ligula massa, in varius ante. Cras laoreet dui volutpat libero ultricies hendrerit. Maecenas lectus orci, rhoncus at elementum id, lobortis in velit. Praesent elementum tincidunt dui, id porttitor urna sollicitudin eget. Nunc sed quam justo, et consectetur lectus. Suspendisse eleifend erat eget felis sollicitudin dapibus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce tincidunt, metus eu elementum venenatis, nibh purus pulvinar purus, eget convallis turpis risus a turpis. Praesent vel felis erat. Aenean elit nunc, dictum sit amet faucibus a, vehicula eget velit.</p>
        </div>

        <div id="footer"><p>This is the footer</p></div>

    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:24:32.927

我不得不承认我不确定你想做什么。使用 850px 长的主 div，如果您希望它以小分辨率（例如 800x600）居中，我很清楚您根本无法显示侧窗格。

因此，您似乎可以将其居中或将侧窗格完全居中。您是否正在寻找如果屏幕太小会出现水平滚动的解决方案？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>FRAME</title>
<style type="text/css">
<!--
html {
padding:0px;
margin:0px;
}
body {
background-color:#e1ddd9;
margin:0px;
padding:0px;
overflow: hidden;
}
p {
margin:10px;
}
li {
list-style-type:none;
margin-left:-10px;
}

#wrapper {
width: 1150px;
margin: auto;
padding: 0px;
}
#sidebar {
width:140px;
padding:0px;
float:left;
background-color:#ff99cc;
margin-top:130px;
margin-right: 10px;
}
#page {
width:850px;
padding:0px;
float:left;
overflow:auto;
}
#fakebar {
width: 140px;
float: left;
}

#header {
height:100px;
background-color:#ff0;
margin-bottom:10px;
padding:10px;
}
#content {
background-color:#ffffff;
padding:10px;
}
#footer {
height:100px;
margin-top:10px;
background-color:#ff99cc;
padding:10px;
}
-->
</style>
</head>

<body>

<div id="wrapper">

    <div id="sidebar">
        <ul><li>Lorem</li><li>Ipsum</li><li>Dolor</li><li>Sit</li><li>Amet</li></ul>
    </div>

    <div id="page">

        <div id="header"><p>This is the header</p></div>

        <div id="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ornare mauris vel nulla fermentum sed iaculis mi sollicitudin. Nullam tortor ante, suscipit eu rutrum nec, pharetra et turpis. Vestibulum a metus et massa porta tincidunt. Nam ac enim quam, vitae dictum tortor. Cras porttitor rutrum turpis, id scelerisque sem pharetra eget. Proin rhoncus tincidunt erat, a ornare nibh faucibus dictum. Nam leo dui, lacinia sed hendrerit in, tempus vitae libero. Nam non erat ac ante tempus adipiscing.</p>
            <p>Nulla a sodales ipsum. Phasellus nec erat vitae enim laoreet sollicitudin. Morbi a egestas augue. Curabitur ac justo sit amet ipsum suscipit pulvinar eget vitae turpis. Sed iaculis arcu velit, sed vestibulum quam. Maecenas semper dolor ac leo laoreet sed vehicula libero scelerisque. In dui augue, faucibus id feugiat eu, vulputate id ante. Ut rutrum placerat orci, vitae lacinia lorem gravida et. Nullam semper eros lacus, sit amet tristique erat. Curabitur imperdiet lacus sit amet odio auctor congue. Sed ultricies erat et felis tincidunt pulvinar.</p>
            <p>Cras enim ipsum, faucibus sed vulputate sit amet, dignissim non odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc rutrum accumsan nibh, pharetra pharetra sem luctus eget. Donec vel tincidunt enim. Nunc vel ligula massa, in varius ante. Cras laoreet dui volutpat libero ultricies hendrerit. Maecenas lectus orci, rhoncus at elementum id, lobortis in velit. Praesent elementum tincidunt dui, id porttitor urna sollicitudin eget. Nunc sed quam justo, et consectetur lectus. Suspendisse eleifend erat eget felis sollicitudin dapibus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce tincidunt, metus eu elementum venenatis, nibh purus pulvinar purus, eget convallis turpis risus a turpis. Praesent vel felis erat. Aenean elit nunc, dictum sit amet faucibus a, vehicula eget velit.</p>
        </div>

        <div id="footer"><p>This is the footer</p></div>

    </div>

    <div id="fakebar"></div>

</div>

</body>
</html> 
```

# java - 奇怪的休眠缓存行为

> ID：11050428
> 
> 赞同：1
> 
> 时间：2012-06-15T12:13:06.633
> 
> 标签：java, hibernate

我使用 ehcache 和休眠 3.6.7 Final。这是一个伪代码示例，揭示了缓存问题。

```
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class A{    

    long id;    

    @OneToMany(mappedBy = "aId", targetEntity = B.class, fetch = FetchType.LAZY)
    @Fetch(value = FetchMode.JOIN)
    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
    protected Set<B> fieldB;
}    

@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class B { 

    long id;

    long bId; 
} 
```

1）当我第一次从休眠加载实体A时，它不会读取字段B。这没关系 - 因为 FetchType.LAZY 已设置。

2）第二次加载实体 AI 时，看到 sql 查询检索实体 A JOIN 实体 B。

3)如果删除@Fetch(value = FetchMode.JOIN)点2将不会执行。

那么问题是这个错误还是功能？我怎样才能避免这种潜在的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:56:50.417

您有两个冲突的提取，您绝对不想在列和 @Fetch 注释上指定提取，因为它会提供不可预测的行为。

# jquery - onmouseout-event 过早触发

> ID：11050429
> 
> 赞同：2
> 
> 时间：2012-06-15T12:13:07.053
> 
> 标签：jquery, drop-down-menu, onmouseout

根据以下教程尝试实现下拉菜单时，我遇到了一个奇怪的问题：[http](http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/index.php) ://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/index.php onmouseout 事件是一旦我的光标尝试选择下拉选择中的第二个元素（添加 Uni），就已经触发了。但是，只要光标停留在第一个菜单项（通讯簿）上，一切都会完美运行。

```
<ul id="menulist">    
    <li class="menuOut"><a id="nav_User_User" title="@LocalizationMapper.NavigationProfile" href="javascript:void(0);" onclick="utils.Ajax.ajaxCall('User/User','','GET', '#main', 'false', this, null, true);">@LocalizationMapper.NavigationProfile</a>
           <ul>
              <li><a href="#">Address Book</a></li>
              <li><a href="#">Add Uni</a></li>
          </ul>
         <div class="clear"></div>
     </li>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#menuList > li').live('mouseover', openSubMenu);
        $('#menuList > li').live('mouseout', closeSubMenu);
        function openSubMenu() {
            $(this).find('ul').css('visibility', 'visible');
        };

        function closeSubMenu() {
            $(this).find('ul').css('visibility', 'hidden');
        };
</script> 
```

```
 /*style the sub menu*/
#menuList li ul {
    position:absolute;
    visibility:hidden;
    border-top:1px solid #fff;
    margin:0;
    padding:0;
}

#menuList li ul li {
    display:inline;
    float:none !important;
}

#menuList li ul li a:link, .menuList li ul li a:visited {
    background-color:#000;
    width:auto;
}

#menuList li ul li a:hover {
    color:#0CF; 
}

</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:49:06.697

所以最后我自己解决了这个问题。将 z-index 添加到子菜单中就可以了。

```
<style>
[...]
z-index: 3;
</style> 
```

# iphone - UITableView - 没有调用方法

> ID：11050432
> 
> 赞同：0
> 
> 时间：2012-06-15T12:13:27.143
> 
> 标签：iphone, ios, uitableview

我有一个子视图，我在其中构建了一个 UITableview，我已将委托和数据源设置为子视图，但由于某种原因没有调用表方法......有人可以查看我的代码并查看我做错了什么吗？谢谢

.h 文件

```
@interface TwitterController : UIView <UITableViewDelegate, UITableViewDataSource> { 

UIButton* btnCloseView; 
UITableView* tblTweets;
UIImageView* imgTwitterIcon;

ColorController* colorManager;

NSMutableArray* tweetsArray;
NSMutableArray* tableData;

NSString* twitterID;

}

@property (nonatomic, retain) NSString* twitterID;

- (NSMutableArray* ) getTweets; 

- (void) sendNotification : (id) sender;

@end 
```

.m 文件

```
#import "TwitterController.h"

@implementation TwitterController

@synthesize twitterID;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    colorManager = [ColorController new];

}
return self;
}

/*- (void)drawRect:(CGRect)rect {

}*/

- (void)layoutSubviews { 

imgTwitterIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"imgTwitterBird"]];
CGRect twitterIconFrame = [imgTwitterIcon frame];
twitterIconFrame.origin.x = 50.0;
twitterIconFrame.origin.y = 20.0;

tblTweets = [[UITableView alloc] initWithFrame:CGRectMake(50.0, 25.0, 220.0, 500.0)];
tblTweets.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tblTweets.separatorColor = [colorManager setColor:176.0:196.0:222.0];
tblTweets.layer.borderWidth = 1.0;
tblTweets.rowHeight = 20.0;
tblTweets.scrollEnabled = YES;
tblTweets.delegate = self;
tblTweets.dataSource = self;

tableData = [self getTweets];

UIImage* imgCloseButton = [UIImage imageNamed:@"btnCloseWindow.png"];
CGSize imageSize = imgCloseButton.size;
btnCloseView = [[UIButton alloc] initWithFrame: CGRectMake(220.0, 550.0, imageSize.width, imageSize.height)];
[btnCloseView setImage:[UIImage imageNamed:@"btnCloseWindow.png"] forState:UIControlStateNormal];
[btnCloseView addTarget:self action:@selector(sendNotification:) forControlEvents:UIControlEventTouchUpInside];

[self addSubview:tblTweets];
[self addSubview:imgTwitterIcon];
[self addSubview:btnCloseView];
}

- (NSMutableArray*) getTweets { 

//array to hold tweets
tweetsArray = [[NSMutableArray alloc] init];

twitterID = @"Pruit_Igoe";

///set up a NSURL to the twitter API
NSURL* twitterAPI = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=%@&count=10", twitterID]];

//get last 10 tweets (max is 20)
TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:twitterAPI 
            parameters:nil requestMethod:TWRequestMethodGET];

// Notice this is a block, it is the handler to process the response
[twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if ([urlResponse statusCode] == 200)  {

        // The response from Twitter is in JSON format
        // Move the response into a dictionary and print
        NSError *error;        
        NSDictionary *tweetsDict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];

        for(NSDictionary* thisTweetDict in tweetsDict) { 

            [tweetsArray addObject:[thisTweetDict objectForKey:@"text"]];
        }

    }
    else
        NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
}];

return tweetsArray;

}

#pragma mark Table Management

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return [tableData count];
NSLog(@"%i", [tableData count]); //does not log!
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section    {
return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"tableCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.textColor = [UIColor colorWithRed:66.0/255.0 green:66.0/255.0 blue:66.0/255.0 alpha:1];
cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size: 13.0];
cell.textLabel.text = [tweetsArray objectAtIndex:indexPath.row];
CGRect cellFrame = [cell frame];
cellFrame.size.height = 25.0;

return cell; 
```

}

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString* thisTweet = [tableData objectAtIndex:indexPath.row];
}

#pragma mark Close Window

- (void) sendNotification : (id) sender { 

NSMutableDictionary* userData = [[NSMutableDictionary alloc] init];

[userData setObject:@"closeTwitter" forKey:@"theEvent"];

[[NSNotificationCenter defaultCenter] postNotificationName:@"theMessenger" object:self userInfo: userData];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:37:11.510

我认为您没有分配和初始化`tableData`。把它写 `tableData = [[NSMutableArray alloc] init];`在`- (id)initWithFrame:(CGRect)frame`方法或`- (void)layoutSubviews`方法中。去尝试一下。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
NSLog(@"%i", [tableData count]);
return [tableData count];
//NSLog(@"%i", [tableData count]); //does not log!
} 
```

如果输出为零，`tableData`则数组为空。检查它`tableData`数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:17:34.433

您应该`tblTweets`在`initWithFrame:`.

`layoutSubviews`用于布置子视图。

事实上，如果您将所有代码`fromLayoutSubviews`移至`initWithFrame:`. 然后，您可以将部分代码（布局部分）移回。

`[tblTweets reloadData];`编辑：当您移动初始化代码时，您可能还必须立即添加`tableData = [self getTweets];`

# windows-phone-7 - 必应地图最佳缩放

> ID：11050434
> 
> 赞同：2
> 
> 时间：2012-06-15T12:13:37.880
> 
> 标签：windows-phone-7, bing-maps

我正在为**Bing Maps**开发一个使用 Silverlight 控件的应用程序。

用户可以输入描述并按下按钮搜索位置：地理编码服务返回我用来设置地图中心的位置数组。

我无法做的是在搜索后以最佳缩放显示地图。

我的意思是，如果我搜索意大利，map 应该设置 mapview 以包围整个意大利；如果我搜索威尼斯缩放应该更高并显示整个城市；最后，如果我搜索一条街道，我想看到整条街道（如果缩放自然不是太高）。

由于用户可以在搜索之前放大/缩小，我需要每次都重置缩放...但我没有找到一种方法来了解哪个是最佳缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:26:46.743

如果您使用 Bing 地理编码服务，我建议您将[`GeocodeResult.BestView`属性](http://msdn.microsoft.com/en-us/library/cc966945.aspx) 与[`MapCore.SetView`方法](http://msdn.microsoft.com/en-us/library/ee682509)一起使用。

我现在无法测试它，但它应该可以完成这项工作。

# django - 如何在 django 中翻译单页？

> ID：11050436
> 
> 赞同：0
> 
> 时间：2012-06-15T12:13:50.223
> 
> 标签：django, translation

我只有一页我想翻译并且我使用下载的[应用程序](http://django-envelope.readthedocs.org/en/latest/index.html)（其中包含语言环境文件夹）。

我想从这个应用程序中获得输出，并在一页上显示翻译值。

我如何告诉模板或视图显示翻译的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:59:55.420

我假设您希望页面使用与您为网站设置的语言不同的语言。

这是管理[我们双语网站](http://cafebazaar.ir/?l=en)中语言的中间件的两行代码，但我想在您的情况下，它可以放在您的视图函数的开头：

```
django.utils.translation.activate(desired_lang)
request.LANGUAGE_CODE = django.utils.translation.get_language() 
```

# c - 对齐或不对齐堆栈上的字符数组？

> ID：11050438
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:14:05.210
> 
> 标签：c, arrays, char, memory-alignment

我有以下代码：

```
char stats[109]; /* !LINE UNDER QUESTION! */
sprintf(stats,
    "OBJECTS:\n%u/256\n" \
    "BLOCKS:\n%u/" GP_ConstantExpand(Map_MaxLightmaps) "\n" \
    "QUADS:\n%u/" GP_ConstantExpand(Map_MaxLightmaps) "\n" \
    "LIGHTMAPS:\n%u/" GP_ConstantExpand(Map_MaxLightmaps) "\n" \
    "CHECKPOINTS:\n%u/256\n" \
    "HINTS:\n%u/256",
    Map_This_Header.objects, Map_This_Header.blocks, Map_This_QuadCount,
    lmapcount, Map_This_Header.checkpoints, Map_This_Header.hints); 
```

静态分配 109 个字符的数组（我的文本 109 就足够了）是否可以，或者将数组对齐到 128 个字节会提高性能？

我不关心文件大小和内存使用，性能对我来说很重要，我的代码必须在旧计算机上以 60 FPS 运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:29:59.563

我想这与运行代码的硬件有太多关系。例如，我们可以考虑两个相反的参数来回答这个问题，假设在您的数组周围的堆栈上分配了其他变量：

*   如果您保持数组较小，它将减少用于保存所有经常使用的变量的缓存条目的数量。
*   如果将大小对齐为 2 的幂，并且数组的地址在 CPU 的一个寄存器中，则根据 CPU 的寻址模式，计算紧随其后的变量的地址会更容易。例如，ARM 编码 0x12000 之类的偏移量比 0x12001 更容易，因为它需要一个位域并对其进行移位。

然而，第二个参数似乎不太相关，因为它只会影响您可以实例化的众多变量中的一个。无论如何，如果您想确定，您需要对您的代码进行基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:48:45.480

如果对齐它会提高性能，编译器应该在适当的优化级别为您对齐它。这是因为编译器可以自由地对自动变量进行排序和对齐，因为它认为合适。

通常，除非您的代码实际上*需要*对齐才能操作（例如，如果您将整数存储在指针字段的低位中，因此需要将实际的基指针对齐到更大的边界），您不应该将这样的假设编码到您的代码中。

# javascript - 是否可以为 Jquery .CSS 背景更改设置动画？

> ID：11050444
> 
> 赞同：2
> 
> 时间：2012-06-15T12:14:17.847
> 
> 标签：javascript, jquery

我正在使用以下方法将背景图像附加到 body 元素：

```
<script>
$(document).ready(function(){

    $("body").css( "background" , "url(someimage.jpg)");

});
</script> 
```

这很好，但是背景图像非常大，我想在它们完全加载后使用淡入淡出（）或其他东西淡化它们。但是，我似乎找不到使用 jQuery 或 javascript 执行此操作的方法。有吗？有什么聪明的建议吗？如果有帮助，我可以导入 jquery-ui 库。

所以要清楚，我需要发生的事情是这样的：

> 页面加载 -> 图像完成加载 -> 图像淡入为 body 元素的背景图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:27:48.497

好的，我想通了，但这是重复的，因为我不建议@am（[重复问题](https://stackoverflow.com/questions/2983957/animate-background-image-change-with-jquery/11052542)）。

摆弄我的解决方案：http: [//jsfiddle.net/kRjrn/8/](http://jsfiddle.net/kRjrn/8/)

HTML

```
<body>
    <div id="background">.
    </div>
    <p>hello world</p>
    <p>hello world</p>
    <p>hello world</p>
    <p>hello world</p>    
</body>​ 
```

javascript

```
$(document).ready(function(){
    $('#background').animate({ opacity: 1 }, 3000);
});​ 
```

CSS

```
#background {
    background-image: url("http://media.noupe.com//uploads/2009/10/wallpaper-pattern.jpg");
    opacity: 0;
    margin: 0;
    padding: 0;
    z-index: -1;
    position: absolute;
    width: 100%;
    height: 100%;
}​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T12:44:22.477

信不信由你，jQuery 不支持渐变背景色！但别担心......有一个插件！

“原始”背景褪色插件是这个：

> [https://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

我也刚找到这个：

> [http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

# jquery - 使用 jquery 获取下一个最接近的选择元素

> ID：11050445
> 
> 赞同：0
> 
> 时间：2012-06-15T12:14:22.797
> 
> 标签：jquery

我想获取下一个选择元素（因为会有多个具有相同 id 的元素），这是代码

```
function fillProds(catid) {
    $.get("http://localhost/crops/?module=from-receipt&action=getproducts&format=json&catid="+catid , null,function(d){
        CC = eval(d);
        t = $(this).find('select');
        alert(t);
        t.options.length=0;
        t.options[0]=new Option("","");
        for(i=0;i<CC.length;i++) {
            t.options[i+1]=new Option(CC[i].name,CC[i].id);
        }
    });
} 
```

对于 html 部分

```
<tr>
                <td class="first" width="172">
                    <select onchange="fillProds(this.value)" id="catid">
                        <option></option>
                        <?php foreach ( $cats as $v => $r ) { ?>
                            <option value="<?=$r['id']?>"><?=$r['name']?></option>';
                        <?php } ?>
                    </select>
                <td>
                    <input type="hidden" name="transindetid[]" value="" />
                    <select name="transindet[prodid][]" id="prods" class="validate-not-first">
                        <option></option>
                    </select>
                </td>
                <td class="last">
                    <input type="text" name="transindet[qty][]" class="required" value=""> &nbsp;
                    <a href="#" class="delRow" style="color:red">x</a>
                </td>
</tr> 
```

所以问题是我收到设置长度未定义之类的错误，可能是因为我没有正确获取选择元素。对上述内容进行任何更正，以便我可以使其正常工作并选择下一个选择元素？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:20:44.663

你是这个意思吗？

[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

在 jQuery 中，您可以使用选择器`$("select").next()`和`$("select:eq(1)")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:33:11.170

尝试删除内联**绑定**并通过 jquery 来完成。

```
<td class="first" width="172">
                <select class="s-parent" id="catid">
                    <option></option>
                    <?php foreach ( $cats as $v => $r ) { ?>
                        <option value="<?=$r['id']?>"><?=$r['name']?></option>';
                    <?php } ?>
                </select>
            <td>
                <input type="hidden" name="transindetid[]" value="" />
                <select name="transindet[prodid][]" id="prods" class="validate-not-first">
                    <option></option>
                </select>
            </td>
            <td class="last">
                <input type="text" name="transindet[qty][]" class="required" value=""> &nbsp;
                <a href="#" class="delRow" style="color:red">x</a>
            </td> 
```

这是你的新js：

```
 $('.s-parent').on('change',function() {
    var $el =$(this),
    catid = $el.val();

    $.get("http://localhost/crops/?module=from-receipt&action=getproducts&format=json&catid="+catid , null,function(d){
        CC = eval(d);
        t = $('select',$el.closest('tr')).eq(1); //the second select in the same tr
        alert(t);
        t.options.length=0;
        t.options[0]=new Option("","");
        for(i=0;i<CC.length;i++) {
            t.options[i+1]=new Option(CC[i].name,CC[i].id);
        }
    });
}); 
```

最后，这些是**主要变化**：

```
 var $el =$(this),
        catid = $el.val();

t = $('select',$el.closest('tr')).eq(1); //the second select in the same tr 
```

此外，我强烈建议您**避免使用 eval(d)**。安装使用[jquery.getJson](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:29:00.760

好的，我有一个解决方案

```
function fillProds(catid,obj) {
    $.get("http://localhost/crops/?module=from-receipt&action=getproducts&format=json&catid="+catid , null,function(d){
        CC = eval(d);
        trs = $(obj).closest('tr');
        t = trs.find('#prods').get(0);
        t.options.length = 0;
        t.options[0]=new Option("","");
        for(i=0;i<CC.length;i++) {
            t.options[i+1]=new Option(CC[i].name,CC[i].id);
        }
    });
}

<tr>
                <td class="first" width="172">
                    <select onchange="fillProds(this.value,this)" id="catid">
                        <option></option>
                        <?php foreach ( $cats as $v => $r ) { ?>
                            <option value="<?=$r['id']?>"><?=$r['name']?></option>';
                        <?php } ?>
                    </select>
                <td id="select">
                    <input type="hidden" name="transindetid[]" value="" />
                    <select name="transindet[prodid][]" id="prods" class="validate-not-first">
                        <option></option>
                    </select>
                </td>
                <td class="last">
                    <input type="text" name="transindet[qty][]" class="required" value=""> &nbsp;
                    <a href="#" class="delRow" style="color:red">x</a>
                </td>
</tr> 
```

所以目前它正在寻找最近的 tr 并获得具有 id prods 的第一个元素（我认为）

# sql - 此查询是否有任何替代方法可以减少处理时间

> ID：11050447
> 
> 赞同：2
> 
> 时间：2012-06-15T12:14:30.493
> 
> 标签：sql, sql-server

![源表](../Images/e904da5ebd35f0df19d0bf515252db2b.png)

```
CREATE TABLE #TEMPTABLE
(
     requestTime datetime2,
     NoOfSessions integer

)

INSERT INTO #TEMPTABLE
select  convert(nvarchar(16), TimeLog, 120) requestTime , COUNT(DISTINCT SessionId)As NoOfSessions
from  LogData
group by convert(nvarchar(16), TimeLog, 120) order by requestTime;

select  s1.requestTime
,       (
        select  sum(NoOfSessions)
        from    #TEMPTABLE s2
        where   dateadd(minute, -15, s1.requestTime) < s2.requestTime
                and s2.requestTime <= s1.requestTime
        ) as TotalNumberOfSessions
from    #TEMPTABLE s1

DROP TABLE #TEMPTABLE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:37:52.890

试试这个，让我知道。这可能对你有一些改进。我在临时表中添加了一个主键`requestTime`，可以在相关子查询中使用。

```
create table #TEMPTABLE
(
  requestTime smalldatetime primary key,
  NoOfSessions integer
)

insert into #TEMPTABLE
select dateadd(minute, datediff(minute, 0, TimeLog), 0), 
       count(distinct SessionId)
from  LogData
group by dateadd(minute, datediff(minute, 0, TimeLog), 0)

select  s1.requestTime
,       (
        select  sum(NoOfSessions)
        from    #TEMPTABLE s2
        where   dateadd(minute, -15, s1.requestTime) < s2.requestTime
                and s2.requestTime <= s1.requestTime
        ) as TotalNumberOfSessions
from    #TEMPTABLE s1

drop table #TEMPTABLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:19:59.490

*   删除 TempTable 并在 ONE select 中完成所有操作。这完全意味着您可以更快地获得第一个结果 - 在您的情况下，SQL Server 可以在第二次选择发生之前不提供一行。
*   尽量避免转换。你为什么首先转换？
*   检查查询计划。您没有告诉我们有关索引以及为什么您认为它很慢的任何信息 - 此处的更多信息可能有助于答案。

一般来说，问题可能是这样的：

> 其中 dateadd(minute, -15, s1.requestTime) < s2.requestTime

我不确定这是否会导致有效的查询计划 - 但是您没有向我们展示该计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:00:30.117

临时表不是问题。问题是相关的子查询导致了疯狂的循环连接迭代次数。

尝试将子查询重新构造为连接。将日期时间值四舍五入到分钟并加入分钟值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:07:03.613

我不认为临时表是问题，但这是没有它的代码：

```
select  s1.requestTime
,   (
    select  sum(NoOfSessions)
    from
    (
        select dateadd(minute, datediff(minute, 0, TimeLog), 0), 
            count(distinct SessionId)
        from  LogData
        group by dateadd(minute, datediff(minute, 0, TimeLog), 0)
    ) s2
    where   dateadd(minute, -15, s1.requestTime) < s2.requestTime
            and s2.requestTime <= s1.requestTime
    ) as TotalNumberOfSessions
from 
(
    select dateadd(minute, datediff(minute, 0, TimeLog), 0), 
        count(distinct SessionId)
    from  LogData
    group by dateadd(minute, datediff(minute, 0, TimeLog), 0)
) s1 
```

# c# - 如何在 c# Windows Forms 中检查 SQL Server 版本是否为 2008 或更高版本

> ID：11050454
> 
> 赞同：0
> 
> 时间：2012-06-15T12:14:46.117
> 
> 标签：c#, sql-server, winforms

> **可能重复：**
> [如何确定已安装的 SQL Server 实例及其版本？](https://stackoverflow.com/questions/141154/how-can-i-determine-installed-sql-server-instances-and-their-versions)

我一直在搜索，如果安装了 sql server 并且至少是 2008 年的，我找不到通过注册表验证的方法。因为似乎对于每个版本，他们都会更改路径中的某些内容，或者我只是没有看到它。

提前谢谢你，米格尔·索萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:23:38.660

您可以在以下键中扫描实例名称：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL\ 
```

从那里您可以获取每个名称和数据列（例如，命名实例“SQL2008”可能会说“MSSQL10.SQL2008”），并通过将实例标识符（“MSSQL.SQL2008”）附加到此 reg 路径来查找版本：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\
  MSSQL10.SQL2008\MSSQLServer\CurrentVersion\ 
```

在该键中，将有一个名为“CurrentVersion”的条目，数据值将具有版本号。

这将返回一个字符串，如`11.0.2316.0`. 在这种情况下，您只关心小数点后第二位之前的字符。如果这反映了 10.0 或更高版本，那就是 SQL Server 2008 或更高版本（10.0 = 2008、10.5 = 2008 R2、11.0 = 2012）。如果这反映了 9.0 或更低，那就是 2008 年之前的情况（9.0 = 2005、8.0 = 2000 等）。

# javascript - 网页的通用循环倒数计时器

> ID：11050455
> 
> 赞同：0
> 
> 时间：2012-06-15T12:14:54.377
> 
> 标签：javascript, jquery, html, timer, countdown

我正在寻找一个计时器放在我的网站上，计时器将设置为一小时，在倒计时到零后，它会再次重置回一小时。它还需要是通用的，因此它对所有用户显示相同，并且在刷新页面时不会重置回 1 小时。我猜这相对简单，但是我能找到的只是计时器，它计数到某个时间并停止，或者在页面刷新后从零开始的计时器，这是不够的。

如果有人可以提供帮助，或者知道可以提供类似内容的链接，我将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:36:16.880

这是我知道它会有所帮助的条件。

```
ctsecs--;
if(ctsecs < 0) {
    if(ctmnts > 0) {
        ctsecs = 59;
        ctmnts--;
        if(cthrs > 0) {
            ctmnts = 59;
            cthrs--;
        } else {
            ctsecs = 0;
            ctmnts = 0;
            cthrs = 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:22:55.297

您可以让计时器仅显示 UTC 当前分钟和秒的补码：

```
​setInterval(function() {
    var d = new Date;
    var s = (60 - d.getUTCMinutes()) + ":" + (60 - d.getUTCSeconds());
    $("#time").text(s);
}, 250);​ 
```

这是一个[演示页面](http://jsfiddle.net/ygjsS/)，您可以在其中看到它的运行情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:18:24.503

为什么不只获取当前时间，只显示分钟？否则，它必须在服务器端完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:30:54.503

如果您想要一个每秒滴答的计时器，那么 setInterval 是一个糟糕的选择。它仅以大约要求的间隔运行，并且会缓慢漂移。除非你经常调用它，否则使用它的时钟不会很流畅，这是一种浪费。

更好的策略是使用 setTimeout 顺序调用自身，根据到下一个刻度的时间加上少量设置延迟。例如一个非常简单的时钟：

```
<script>

function addZ(n) {
  return (n<10? '0' : '') + n;
}

function update() {
  var d = new Date();
  // Set lag to 20ms after next full second
  var lag = 1020 - d.getMilliseconds();

  document.getElementById('d0').innerHTML = addZ(d.getHours()) + ':' +
    addZ(d.getMinutes()) + ':' + addZ(d.getSeconds());

  setTimeout(update, lag);
}

window.onload = update;
</script>
<div id="d0"></div> 
```

如果您对使用计数器的系统时钟感到满意，并且希望每个人都看到相同的数字（或多或少），则可以使用 Date 的UTC[方法](http://es5.github.com/#x15.9.5.19):`getUTCHours`和.`getUTCMinutes``getUTCSeconds`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T12:28:36.090

您可以为此目的使用 ajax。在服务器上创建一个数据库条目大约 60 分钟，并使用 ajax 请求更新客户端的时间，这将比客户端脚本更安全。

# wordpress - 我可以对一些 wordpress 页面而不是其他页面发表评论吗？

> ID：11050461
> 
> 赞同：1
> 
> 时间：2012-06-15T12:15:31.060
> 
> 标签：wordpress

我有一个 wordpress 网站，我只想允许人们在某些页面上发表评论。例如，我想允许在第一页发表评论，但随后只允许在图库页面上发表评论。我正在使用工具箱主题，但不知道如何实现。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:20:11.760

我刚刚google了一下，发现了这个，有用吗？

[http://wordpress.org/support/topic/how-to-remove-comments-function-on-certain-pages](http://wordpress.org/support/topic/how-to-remove-comments-function-on-certain-pages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:04:01.653

要从已发布的页面中删除评论：在 WP Admin 中，页面 > 选择所有帖子或仅选择您不再需要评论的帖子，然后单击批量操作下的“编辑”并点击应用。在“评论”> 选择“不允许”。单击更新。对于帖子，从帖子 > 开始的相同过程。

从现在开始从所有新页面和帖子中删除评论：`Settings >> Discussion >> uncheck "Allow people to post comments on new articles"`

# .htaccess - 子 htaccess 覆盖父的

> ID：11050464
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:15:49.487
> 
> 标签：.htaccess

在我的根目录中，我有一个缓存各种文件类型的 htaccess 文件。但是在一个子目录中，我想禁用 php 缓存。在那里，我设置了与根目录中相同的 htaccess 文件，并将 php 缓存设置为 0，但它没有生效。

现在，我查看了许多讨论，有人说父 htaccess 优先，而其他人声称子 htaccess 优先。

在我看来，前者是真的。问题是我可以在孩子的 htaccess 中使用哪个命令来覆盖父母的 htaccess？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:17:12.900

很长一段时间后没有答案，所以我要结束这个问题。对于我的情况，我应用了一种解决方法。

像这样缓存文件后：

```
<FilesMatch "\.(html|htm|xml|txt|xsl|css|js|php)$">
  Header set Cache-Control "max-age=2592000, must-revalidate"
</FilesMatch> 
```

我已禁用某些文件的缓存，如下所示：

```
<Files myfile.php>
  Header set Cache-Control "max-age=0, must-revalidate"
</Files> 
```

也许它对某人有一些用处。

# php - 在引导文件的 Kohana::modules() 中找不到分页模块

> ID：11050466
> 
> 赞同：3
> 
> 时间：2012-06-15T12:16:07.293
> 
> 标签：php, kohana, kohana-3, kohana-3.2

嗨，当我尝试使用 kohana 分页模块时，我是 kohana 的新手，我遇到了这样的错误

```
ErrorException [ Fatal Error ]: Class 'Pagination' not found 
```

后来我查看`bootstrap`文件然后没有 `Pagination`模块`Kohana::modules()`

我的引导文件是这样的

```
Kohana::modules(array(
 'auth'       => MODPATH.'auth',       // Basic authentication
 'cache'      => MODPATH.'cache',      // Caching with multiple backends
'codebench'  => MODPATH.'codebench',  // Benchmarking tool
 'database'   => MODPATH.'database',   // Database access
 'image'      => MODPATH.'image',      // Image manipulation
 'orm'        => MODPATH.'orm',        // Object Relationship Mapping
 'unittest'   => MODPATH.'unittest',   // Unit testing
 'userguide'  => MODPATH.'userguide',  // User guide and API documentation
)); 
```

我在哪里可以获得模块以及如何添加和启用？

请澄清一下

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:30:52.693

我想说，对于 3.2 版，不存在这样的（稳定的）分页模块。我没有那么密切地关注 kohana，但我记得这门课需要时间来保持稳定的发展步伐。

您可以在这里找到（可能工作的）3.2 开发版本：[https ://github.com/kohana/pagination/tree/3.2/develop](https://github.com/kohana/pagination/tree/3.2/develop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:16:23.867

[由于 Kohana 的级联文件系统](http://kohanaframework.org/3.2/guide/kohana/files)，将模块安装到 Kohana 相当容易。

首先，您需要使用下载页面上的下载为 ZIP 选项从 GitHub下载[分页模块。](https://github.com/kohana/pagination)将文件解压到`pagination`Kohana 安装的模块目录中命名的文件夹中。

接下来，您需要在模块数组中添加一行，将模块名称指向其路径。你最终应该得到；

```
Kohana::modules(array(
    'auth'       => MODPATH.'auth',       // Basic authentication
    'cache'      => MODPATH.'cache',      // Caching with multiple backends
    'codebench'  => MODPATH.'codebench',  // Benchmarking tool
    'database'   => MODPATH.'database',   // Database access
    'image'      => MODPATH.'image',      // Image manipulation
    'orm'        => MODPATH.'orm',        // Object Relationship Mapping
    'unittest'   => MODPATH.'unittest',   // Unit testing
    'userguide'  => MODPATH.'userguide',  // User guide and API documentation
    'pagination' => MODPATH.'pagination', // Added pagination module 
)); 
```

请记住，这个模块是为 Kohana 3.1 构建的，最后一次接触是在 2 年前。

# opengl - OpenGL - 缓冲区、着色器

> ID：11050481
> 
> 赞同：2
> 
> 时间：2012-06-15T12:16:45.723
> 
> 标签：opengl, graphics, rendering

每次我在 Google 上搜索有关 OpenGL 编程的文章时，我都会找到文章，但似乎都提到了着色器和缓冲区。那些是什么？你能解释一下其中的一些吗：

*   深度缓冲区
*   模板缓冲区
*   像素着色器
*   帧缓冲区
*   ...？

我听说了其中的几个，但找不到完整的列表。什么是 OpenGL 中的着色器，什么是缓冲区？有人可以在我们使用它们时提供示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:41:47.620

颜色缓冲区是具有指定内存布局的一些内部存储器，但在其他方面或多或少对您来说是不透明的，它表示图像。它保存有关图像中每个像素颜色的信息。您绘制/渲染到颜色缓冲区。在最近的硬件上，最新版本的 OpenGL 可以有不止一个颜色缓冲区，您可以使用它来提高一些特殊的渲染技术的效率。

深度和模板缓冲区与颜色缓冲区相同，只是它们保存（顾名思义）深度和模板信息而不是颜色。深度和模板通常组合成一个缓冲区（但不是必须的），一次不能有多个深度/模板缓冲区。
深度缓冲区通常用于在以非特定顺序渲染多个对象时解决过度绘制的歧义。只有最接近“你的眼睛”的一个片段幸存下来。模板缓冲区可用于特殊效果，例如屏蔽缓冲区的区域。

帧缓冲区是您将颜色缓冲区附加到并在其中绘制/渲染的东西，并且可以选择在屏幕上可见。总是至少有一个帧缓冲区，这是您在屏幕上看到的，但可能有任意数量。这是由自 3.0 版以来的核心功能的帧缓冲区扩展管理的。帧缓冲区通常也有单独的“前”和“后”缓冲区。当您渲染给另一个时，将向您显示一个。在适当的时候，缓冲区被翻转，所以你看不到闪烁。

一般来说，着色器是一个“程序”，OpenGL 代表您在其管道内在明确定义的时间对明确定义的数据执行以生成一些所需的效果。它通常在显卡上运行，但也可能部分或全部在 CPU 上执行。
像素着色器，历史上第一个可用的着色器（和命名器）为每个片段运行一次。它们采用一些定义的输入（例如光位置、法线）并产生一个输出，该输出随后经过深度测试，最后被写入颜色缓冲区或与颜色缓冲区混合。
顶点、几何或曲面细分着色器并不真正“着色”任何东西（它们转换和/或生成顶点和图元，后来变成片段），但它们继承了名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:30:51.940

输入`opengl shaders`谷歌，你就得到了着色器的答案。

第一个搜索结果： [http ://en.wikipedia.org/wiki/GLSL](http://en.wikipedia.org/wiki/GLSL)

要更直接地列出每个着色器，请点击此处的链接： [http ://en.wikipedia.org/wiki/Shader#Types_of_shaders](http://en.wikipedia.org/wiki/Shader#Types_of_shaders)

对于 OpenGL，您使用 GLSL 对着色器进行编程，使用 HLSL 进行 Direct3D。

这应该作为一般介绍。

关于另一个的一些快速说明（可能是简化）：

深度缓冲区，也称为z-buffer，用于解决渲染时什么背后的问题。

帧缓冲区只是存储当前帧（屏幕/像素）的内存。

模板缓冲区有点复杂，可以以几种不同的方式使用。

出于介绍目的，谷歌在每个（维基百科）上的第一次点击为您提供了很好的服务：

[http://en.wikipedia.org/wiki/Framebuffer](http://en.wikipedia.org/wiki/Framebuffer)

[http://en.wikipedia.org/wiki/Stencil_buffer](http://en.wikipedia.org/wiki/Stencil_buffer)

[http://en.wikipedia.org/wiki/Z-buffering](http://en.wikipedia.org/wiki/Z-buffering)

ETC

# git - Git - 创建一个 .gitignore 文件

> ID：11050487
> 
> 赞同：29
> 
> 时间：2012-06-15T12:17:05.387
> 
> 标签：git, gitignore

我正在寻找创建一个`.gitignore`文件，这样某些文件就不会被签入到存储库中。有没有人有关于如何以及在哪里放置这个文件的指南？我尝试将它放在我的工作目录中，运行 git status 并且它仍在拾取我希望它忽略的文件。

我使用了`.gitignore`我找到的这个文件：

```
###################
# compiled source #
###################
*.com
*.class
*.dll
*.exe
*.pdb
*.dll.config
*.cache
*.suo
# Include dlls if they’re in the NuGet packages directory
!/packages/*/lib/*.dll
# Include dlls if they're in the CommonReferences directory
!*CommonReferences/*.dll
####################
# VS Upgrade stuff #
####################
UpgradeLog.XML
_UpgradeReport_Files/
###############
# Directories #
###############
bin/
obj/
TestResults/
###################
# Web publish log #
###################
*.Publish.xml
#############
# Resharper #
#############
/_ReSharper.*
*.ReSharper.*
############
# Packages #
############
# it’s better to unpack these files and commit the raw source
# git has its own built in compression methods
*.7z
*.dmg
*.gz
*.iso
*.jar
*.rar
*.tar
*.zip
######################
# Logs and databases #
######################
*.log
*.sqlite
# OS generated files #
######################
.DS_Store?
ehthumbs.db
Icon?
Thumbs.db 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-15T12:50:59.327

.gitignore 的放置取决于是否只需要忽略一个 repo 或所有 repo 的文件。对于一个 repo，将其放在 repo 的根目录中。

当您在现有存储库中创建 .gitignore 文件或添加已在存储库中的文件时，您必须确保从存储库中删除要忽略的文件。

如果根目录中有 test.dll，则必须这样做

```
git rm --cached test.dll 
```

现在，如果您有很多文件，就像您说的那样，您可以选择以下选项，从缓存中删除所有内容，将其全部添加回来（不会添加 .gitignore 中的文件）并再次提交所有内容。

```
git rm -r --cached .
git add .
git commit -m "Start using .gitignore" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-15T12:21:09.760

你必须`.gitignore`在 Git 看到它之前添加到索引中。即，`git add .gitignore`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T12:22:38.210

我从事的项目，我在项目的根目录中有 .gitignore 文件，其中 .git 目录。确保文件已提交。

请注意，如果您已经提交了您试图忽略的文件（即 Git 正在跟踪它们），那么它们就不能被忽略。您必须先取消跟踪它们。

[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:54:22.037

从@thescientist 发布的链接中：

Git 允许您通过假设它们未更改来忽略这些文件。这是通过运行

`git update-index --assume-unchanged path/to/file.txt`

命令。一旦将文件标记为这样，git 将完全忽略该文件上的任何更改；它们不会在运行 git status 或 git diff 时出现，也不会被提交。

# php - 计算列是否重复

> ID：11050488
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:17:10.637
> 
> 标签：php, mysql

考虑下表

**进入日期 UserID**
2012-15-03 4

2012-15-03 4

2012-15-03 3

2012-15-03 1

我想计算 useID 字段，如果 userID 在数据库中出现不止一次......我期望的结果 count = 2（这意味着 4 重复两次）请让我用一个查询来获取上述要求的 mysql 查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:20:37.847

您需要使用`GROUP BY`with`HAVING`子句来获取重复的子句，例如

```
SELECT ... FROM ... GROUP BY ... HAVING ... 
```

你需要放什么而不是 ... 非常简单。做一些研究，阅读基本的 mysql 文档，您将能够非常轻松地完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:20:39.200

如果要计算所有记录，则：

```
SELECT userID, COUNT(*) FROM table GROUP BY userID 
```

如果您想要重复列表，请使用：

```
SELECT userID, COUNT(*) FROM table GROUP BY userID HAVING COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:37:56.160

尝试这个

```
SELECT entry_date, userid, count(1) as Total
FROM myTable
GROUP BY userid
HAVING Total >=2 
```

## [演示](http://sqlfiddle.com/#!2/70e6a/7)

# jquery - Elastislide ajax

> ID：11050490
> 
> 赞同：0
> 
> 时间：2012-06-15T12:17:14.537
> 
> 标签：jquery, ajax, slider

在`Elastislide`响应式幻灯片中，通过动态添加值时

```
var $items  = $('<li><a href="#"><img src="images/large/1.jpg" alt="image01" /></a></li><li><a href="#"><img src="images/large/2.jpg" alt="image01" /></a></li>');
$('#carousel').append($items).elastislide( 'add', $items ); 
```

它被添加到错误的地方（在课后`es-nav-next`）。有什么解决方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:34:36.560

如果我们分开并给予它正在工作

```
$('#carousel ul').append($items1);
$('#carousel').elastislide( 'add', $items1 ); 
```

# ios - 更改应用程序默认描述语言

> ID：11050491
> 
> 赞同：5
> 
> 时间：2012-06-15T12:17:20.677
> 
> 标签：ios, app-store-connect

我正在将我的应用程序的新版本提交到应用程序商店。

有没有办法更改 iTunesConnect 中的默认应用程序语言？

假设我有法语作为默认描述语言，我需要将***默认设置***更改为英语。我怎么做 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T14:14:41.167

您的应用程序必须处于“准备销售”状态。然后，

1.  转到您的应用程序列表
2.  打开所需的应用程序
3.  点击“应用信息”上的“编辑”
4.  设置默认语言并保存

# android - eclipse android的图形布局编辑器的错误？

> ID：11050497
> 
> 赞同：4
> 
> 时间：2012-06-15T12:17:38.127
> 
> 标签：android, eclipse, android-layout, android-gui

我肯定不是第一个注意到以下问题的人：

当使用图形布局将一些视图添加到布局预览中时，然后尝试直接在 xml 文件上进行一些更改 - 线条以奇怪的恼人方式乱七八糟。只有关闭并重新打开 Eclipse 有助于阻止奇怪的行为。

有人知道如何解决这个问题吗？

有没有插件可以阻止它？

TIX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:26:52.613

我遇到了类似的问题。我找不到比这更好的解决方案：

1.  使用图形布局添加视图。
2.  保存文件。
3.  关闭它。
4.  重新打开它，然后对其进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:55:38.083

我也遇到过同样的问题。对我来说，解决方案是将布局编辑器中的主题更改为默认主题，例如 Holo.light。它解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T10:39:46.850

在 Windows 机器上工作时会发生这种情况（它使用 CRLF 作为行尾），因为 Android 布局编辑器会添加带有 unix 风格的 LF 行尾的行，而不管文件其余部分的行尾风格如何。当文件混合了 CRLF 和 LF 结尾时，Eclipse 文本编辑器会混淆并且无法正确显示它。

**解决方法：您可以在 Eclipse 中编辑文件***之前* 将文件的行尾转换为 LF ，因为这样可以保持所有行尾相同并让编辑器满意。如果坚持使用 CRLF 行尾（例如，用于源代码控制），那么您可以在命令行上使用 dos2unix 转换文件（或使用像 Notepad++ 这样不错的编辑器），然后在进行布局更改后将其转换回 CRLF。

希望 ADT 团队能尽快修复这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:51:55.633

它在 Eclipse 中很常见。

我自己也面临这个问题。

无需重启 Eclipse，只需关闭 xml 并重新打开即可。它就像魅力一样

# bash - Cygwin终端不显示某些字符？

> ID：11050502
> 
> 赞同：3
> 
> 时间：2012-06-15T12:17:52.757
> 
> 标签：bash, encoding, cygwin, windows-1252, cp1252

我正在运行一个股票 Cygwin 安装，并`wget`添加了包。

如果我运行命令

```
wget -qO- tetristv.com/zapni.tv.php 
```

我明白了；注意字符显示不正确

```
session=OTA5Mjc0ODU5OA==&stream=play</a></b><br>#EXTINF:0,▒T 1<br><b><a     
href="http://212.80.69.19/stream/vlc.php?id=39&session=OTA5Mjc0ODU5OA==&
stream=play" target="_blank" rel="nofollow">http://212.80.69.19/stream 
/vlc.php?id=39&session=OTA5Mjc0ODU5OA==&stream=play</a></b><br>#EXTINF:0,▒T 
2<br><b><a href="http://212.80.69.19/stream/vlc.php?id=40& 
session=OTA5Mjc0ODU5OA==&stream=play" target="_blank" 
rel="nofollow">http://212.80.69.19/stream/vlc.php?id=40&
session=OTA5Mjc0ODU5OA==&stream=play</a></b><br>#EXTINF:0,▒T 24<br><b><a 
```

如果我只是下载文件，记事本中的一切看起来都很好。

```
wget tetristv.com/zapni.tv.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:45:23.920

```
$ LANG=en_US.CP1252
$ wget -qO- tetristv.com/zapni.tv.php 
```

结果

```
261&session=NTk1NTg0ODU5OA==&stream=play</a></b><br>#EXTINF:0,Oèko<br><b><a 
```

这也有效

```
wget -qO- tetristv.com/zapni.tv.php | iconv -f cp1252 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:32:42.853

我在 Mintty 中使用股票 cygwin，并将我的 lang 设置为`LANG=en_US.UTF-8`，它对我来说工作正常（不幸的是，我们的代理服务器阻止了你引用的站点，所以我无法测试它）。查看cygwin 文档中的[Internationalization](http://cygwin.com/cygwin-ug-net/setup-locale.html)以获得更多帮助。

**编辑：**验证此 UTF-8 在 mintty 中正确查看：

```
$ cat /d/temp/test.txt                                                                                                              
Creds Go here® 
```

# php - .php 和 .html 文件和外部文件不起作用

> ID：11050509
> 
> 赞同：0
> 
> 时间：2012-06-15T12:18:28.557
> 
> 标签：php, javascript, html

你好我有下面的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

        <link rel="stylesheet" href="lib/css/css6f31.css?page=login" type="text/css" />
        <script src="lib/js/jquery.js" type="text/javascript"></script>
        <script src="lib/js/js6f31.php" type="text/javascript"></script>

    </head>
    <body id="page-login">

        <div id="content">

<div id="forgot" class="form-wrap">
    <form id="form-forgot" action="#" method="post">
        <fieldset class="inputs glow-container">
             <label for="forgot-email">Email</label>
             <!--  value="Enter your email address" -->
            <input type="text" class="last text" id="forgot-email" tabindex="1" name="forgotEmail" />
        </fieldset>
        <fieldset class="buttons">
            <a href="#" id="forgot-cancel" class="button hoverfade">Cancel</a>
            <a href="#" id="forgot-send" class="button button-submit hoverfade">Send Password</a>
            <div class="spinny"></div>
        </fieldset>
    </form>
</div>

<div id="login" class="form-wrap">
    <form id="form-login" action="#" method="post">
        <fieldset class="inputs glow-container" style="height: 167px;">
            <label for="login-email">Email</label>
            <input type="text" class="text" id="login-email" tabindex="2" name="loginEmail" value="" />

            <label for="login-password">Κωδικός <a id="forgot-link" href="#">υπενθύμιση κωδικού!</a></label>
            <input class="last text" type="password" id="login-password" tabindex="3" name="loginPassword" />
            <label><a id="signup-link" href="#">δημιουργία λογαριασμού!</a></label>
        </fieldset>
        <fieldset class="buttons">
            <div class="spinny"></div>
            <a id="login-login" class="button button-submit hoverfade">Log in</a>
            <button type="submit" style="height: 0; width: 0; border: 0;"></button>
        </fieldset>
    </form>
</div>

        </div>
    </body>

</html> 
```

当文件命名为 index.html 时，一切正常，当我将其重命名为 index.php 时，它不会加载 css 文件或 javascript 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:20:46.923

检查这个 LOC——

```
<script src="lib/js/js6f31.php" type="text/javascript"></script> 
```

**编辑**

请确保您正在`.php`通过 Web 服务器运行此文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T14:23:49.027

这条线是错误的。您不能在 src 中调用 php 文件。src 只能调用在客户端站点中执行的文件，如 javascript 文件、vbscript 文件……

```
<script src="lib/js/js6f31.php" type="text/javascript"></script> 
```

请使用此代码：

```
<script type="text/javascript">
    <?php include 'lib/js/js6f31.php'; ?>
</script> 
```

# c++ - C++11 static_assert：参数化错误消息

> ID：11050511
> 
> 赞同：9
> 
> 时间：2012-06-15T12:18:32.447
> 
> 标签：c++, templates, c++11, assertions, static-assert

在[我之前的问题](https://stackoverflow.com/questions/11048827/c11-static-assert-and-functions-to-be-used-therein/11048875#11048875)中，我想使用 static_assert 将模板参数限制为特定的子类型。问题得到解答，存档代码如下：

```
template <typename T> 
struct X { 
    static_assert(std::is_base_of<Y,T>::value,"T must be derived from Y!");
}; 
```

现在，我想让错误信息更简洁。即，我想说明哪种类型违反了此约束。例如，如果类`A`不是派生自`Y`并且有人实例化`X<A>`，则错误消息应打印“类型参数必须从 Y 派生，但**A**不是”。

这是否可以通过标准库以某种方式实现？

我看到了两个挑战：

*   在编译时组装字符串而不使用 boost::mpl
*   检索 T 实例化的类型的名称。名称应该有意义，理想情况下与违规定义中使用的名称相同。我试过 typeid(T).name() 但它只返回不可接受的损坏名称。我记得有某种宏可以返回某物的名称，但我想不起来了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T12:23:16.277

你不能做这个。`static_assert`想要一个字符串文字。您无法将语义标识组合`T`到`Y`字符串文字中。

您可以希望编译器提供易于阅读的模板实例化堆栈的回溯，并为您提供封闭类模板实例化的值`T`和`Y`模板参数。

其他人也考虑过这一点，例如参见[http://comments.gmane.org/gmane.comp.compilers.clang.devel/5073 。](http://comments.gmane.org/gmane.comp.compilers.clang.devel/5073)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:50:50.547

您仍然可以使用 [BOOST_MPL_ASSERT_MSG](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/assert-msg.html)。它接受泛型类型作为参数，并尝试在错误消息中包含具体类型名称。

更多信息和示例在这里： http: [//www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/assert-msg.html](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/assert-msg.html)

# objective-c - 调用选择器不会在单独的线程中调用委托方法

> ID：11050518
> 
> 赞同：2
> 
> 时间：2012-06-15T12:19:32.303
> 
> 标签：objective-c, ios

```
[NSThread detachNewThreadSelector:@selector(colourChange) toTarget:del withObject:nil]; 
```

这应该调用类的 delegate(del) 中的 colourChange 方法，但不是吗？

我检查了 del != nil，使用调试器检查了它指向委托的情况。

解决了

```
dispatch_async(dispatch_get_global_queue(0, 0), 
                           ^{
                               [del colourChange]; 
                          }); 
```

检查下面标记答案中的链接以获取更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:42:11.447

你的方法有错误的签名。它必须采用单个参数（请参阅[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)）。

> 要发送到目标的消息的选择器。此选择器只能接受一个参数，并且不能有返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:28:56.133

据我所知（从核心数据）可以从创建它的线程中调用一个方法。[这个](https://stackoverflow.com/questions/8295017/what-are-the-different-ways-for-calling-my-method-on-separate-thread)问题（有答案）可能对你有用

# java - 为什么在覆盖模板参数所在的模板方法时返回泛型类有效 ?

> ID：11050520
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:19:33.900
> 
> 标签：java, generics

考虑以下场景：

```
/**
 * A sample interface.
 */
public interface MyInterface
{
}

/**
 * First sample implementation of the above interface.
 */
public class MyClass1 implements MyInterface
{
    public String toString()
    {
        return "[ My Class 1 ]";
    }
}

/**
 * Second sample implementation of the above interface.
 */
public class MyClass2 implements MyInterface
{
    public String toString()
    {
        return "[ My Class 2 ]";
    }
}

import java.util.Collection;

/**
 * A service interface that declares a generic method
 * returning a collection of subtype the interface defined above.
 */
public interface MyService
{
    public <T> extends MyInterface<Collection<T>> myMethod();

}

import java.util.Arrays;
import java.util.Collection;

/**
 * The implementation of the service interface 
 * that returns the generic type. 
 */
public class MyServiceImpl implements MyService
{

    @Override
    public Collection<MyInterface> myMethod()
    {
        return Arrays.asList(new MyClass1(), new MyClass2());
    }

}

import java.util.Collection;

/**
 * Simple main class to drive the point 
 * I would like raise in the query below.
 */
public class MyMain
{
    public static void main(String[] args)
    {
        MyService service = new MyServiceImpl();
        Collection<MyClass1> list = service.myMethod();
        // This works at runtime.
        System.out.println(list);
        for (MyClass1 obj : list)
        {
            // This throws ClassCastException at runtime.
            System.out.println(obj);
        }
    }
} 
```

在上面的代码中，当 MyService 声明谈论给定类型的特定子类型时，Java 泛型实现如何允许 MyServiceImpl 的实现返回泛型类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:25:02.647

如果我添加正确的泛型类型

```
public class MyMain {
    public static void main(String[] args) {
        MyService service = new MyServiceImpl();
        Collection<MyInterface> list = service.myMethod();
        // This works at runtime.
        System.out.println(list);
        for (MyInterface obj : list) {
            // This doesn't throw a ClassCastException
            System.out.println(obj);
        }
    }
} 
```

我明白了

```
[[ My Class 1 ], [ My Class 2 ]]
[ My Class 1 ]
[ My Class 2 ] 
```

我看不出如何让您的示例在没有警告的情况下编译并触发 ClassCastException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:52:46.323

```
System.out.println(list); 
```

这条线没问题，因为它只是调用了在没有泛型类型的情况下`toString()`转换为的两个元素的方法。`Object`

```
for (MyClass1 obj : list)
{
   // This throws ClassCastException at runtime.
   System.out.println(obj);
} 
```

但是在这里你会得到一个运行时 ClassCastException 因为你`MyClass2`将列表中的元素转换`MyClass1`为不是`MyClass2`. for 循环需要遍历一个通用的超类或接口。

# asp.net-mvc - 为什么我从 Knockout 提交的文件不能绑定到我的 MVC 模型

> ID：11050523
> 
> 赞同：3
> 
> 时间：2012-06-15T12:19:44.083
> 
> 标签：asp.net-mvc, json, knockout.js, knockout-mapping-plugin

我有一个淘汰模型正在为我的页面提供数据，并在保存时在客户端执行以下代码。

```
self.save = function() {
    var tirerun = ko.mapping.toJSON(self.data());
    $.ajax({
        type: 'post',
        url: "@Url.Action("SaveTireRunModel", "Events")",
        data: tirerun,
        success: function(result) {
            if (!result.success) {
                alert(result.error);
            } else {}
        }
    });
}; 
```

然后它将以下 JSON 发布到我的服务器（来自 fiddler 并为简洁起见） ![在此处输入图像描述](../Images/b6fca39c02b74efeb0d612235842890a.png)

使用以下 http 请求标头

```
POST http://localhost:63648/Events/SaveTireRunModel HTTP/1.1
Host: localhost:63648
Connection: keep-alive
Content-Length: 1975
Origin: http://localhost:63648
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko)         Chrome/19.0.1084.56 Safari/536.5
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
Referer: http://localhost:63648/Events/OutingDetails?outingID=010fd8a1-e3a5-e111-a660-f0def1589f4b
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: jstree_open=%232012%2C%23c914324c-4d9f-e111-a79b-0024e8a037d3%2C%23eb-e957-e111-9e70-d067e53b2ed6%2C%234d-c00e-e111-ad1c-0e6e17349d3e%2C%2357-c00e-e111-ad1c-0e6e17349d3e%2C%234d-c00e-e111-ad1c-0e6e17349d3e; jstree_load=; .ASPXAUTH=054DD21DC0A17DDDAAFC254500ED8D6B3299EAABF1FB647732618E956EF082880BBA0B52A59849D3362AA03EB1F27D28867B07CD8451E4E983D84365608AA145F8DF8D71C2481639E110EC31325EE27EA3281FA2EDB7AD31A744D2A9918BE6599DB97E489ED4598D2DF63C31E36E809A282CF96FFCE5ACAEF8308FEA3DF1C6DE50B2AA7299F9D9AF0C30CE867DCCA352; jstree_open=%232012%2C%233dcc4b9b-37a3-e111-a6d3-0026b99ca1da%2C%23eb-e957-e111-9e70-d067e53b2ed6%2C%2357-c00e-e111-ad1c-0e6e17349d3e%2C%23a2962e1b-45a5-e111-b9ac-f0def1589f4b; jstree_load=%2311a4611a-8851-e111-95c7-60d819fcced5%2C%23b89422a0-0d03-e011-99cb-d601d71f0fcf; jstree_select=%23010fd8a1-e3a5-e111-a660-f0def1589f4b

{"Comments":"RSTA Dwn 2 Holes (6)\r\nRF Spring to 35468\r\nCross Dwn to 47.9 (-0.2)","TireSetsList":[{"ID":"1","Value":"1"},{"ID":"2","Value":"2"},{"ID":"3","Value":"3"},{"ID":"4","Value":"4"},{"ID":"5","Value":"5"}],"LFShoulderTemp":245,"RFShoulderTemp":245,"LFOuterTemp":177,"LFMiddleTemp":null,"LFInnerTemp":200,"RFOuterTemp":177,"RFMiddleTemp":null,"RFInnerTemp":200,"LROuterTemp":177,"LRMiddleTemp":null,"LRInnerTemp":200,"RROuterTemp":177,"RRMiddleTemp":null,"RRInnerTemp":200,"LFInitialOuterWear":null,"LFInitialOuterMiddleWear":null,"LFInitialMiddleWear":null,"LFInitialInnerMiddleWear":null,"LFInitialInnerWear":null,"LFAfterOuterWear":null,"LFAfterOuterMiddleWear":null,"LFAfterMiddleWear":200,"LFAfterInnerMiddleWear":null,"LFAfterInnerWear":null,"RFInitialOuterWear":null,"RFInitialOuterMiddleWear":null,"RFInitialMiddleWear":null,"RFInitialInnerMiddleWear":null,"RFInitialInnerWear":null,"RFAfterOuterWear":null,"RFAfterOuterMiddleWear":null,"RFAfterMiddleWear":200,"RFAfterInnerMiddleWear":null,"RFAfterInnerWear":null,"LRInitialOuterWear":null,"LRInitialOuterMiddleWear":null,"LRInitialMiddleWear":null,"LRInitialInnerMiddleWear":null,"LRInitialInnerWear":null,"LRAfterOuterWear":null,"LRAfterOuterMiddleWear":null,"LRAfterMiddleWear":200,"LRAfterInnerMiddleWear":null,"LRAfterInnerWear":null,"RRInitialOuterWear":null,"RRInitialOuterMiddleWear":null,"RRInitialMiddleWear":null,"RRInitialInnerMiddleWear":null,"RRInitialInnerWear":null,"RRAfterOuterWear":null,"RRAfterOuterMiddleWear":null,"RRAfterMiddleWear":200,"RRAfterInnerMiddleWear":null,"RRAfterInnerWear":null,"LFInnerColdPressure":71,"LFInnerHotPressure":null,"RFInnerColdPressure":71,"RFInnerHotPressure":null,"LRInnerColdPressure":71,"LRInnerHotPressure":null,"RRInnerColdPressure":71,"RRInnerHotPressure":null,"LFColdPressure":61.5,"LFHotPressure":69.8,"RFColdPressure":61.5,"RFHotPressure":69.8,"LRColdPressure":61.5,"LRHotPressure":69.8,"RRColdPressure":61.5,"RRHotPressure":69.8,"TrackTemp":133} 
```

但是当它进入我的行动时，模型完全是空的。

```
public JsonResult SaveTireRunModel(TireRunViewModel tirerun)
{
    tirerun.Save();
    return Json(new { success = true });
} 
```

我的模型类如下

```
public class TireRunViewModel
{

    public TireRunViewModel()
    {

    }

    public TireRunViewModel(Guid outingID)
    {
        //data access crud here
    }

    public string Comments { get; set; }

    public List<SelectBoxModel> TireSetsList { get; set; }

    public double? LFShoulderTemp { get; set; }

    public double? RFShoulderTemp { get; set; }

    public double? LFOuterTemp { get; set; }

    public double? LFMiddleTemp { get; set; }

    public double? LFInnerTemp { get; set; }

    public double? RFOuterTemp { get; set; }

    public double? RFMiddleTemp { get; set; }

    public double? RFInnerTemp { get; set; }

    public double? LROuterTemp { get; set; }

    public double? LRMiddleTemp { get; set; }

    public double? LRInnerTemp { get; set; }

    public double? RROuterTemp { get; set; }

    public double? RRMiddleTemp { get; set; }

    public double? RRInnerTemp { get; set; }

    public double? LFInitialOuterWear { get; set; }

    public double? LFInitialOuterMiddleWear { get; set; }

    public double? LFInitialMiddleWear { get; set; }

    public double? LFInitialInnerMiddleWear { get; set; }

    public double? LFInitialInnerWear { get; set; }

    public double? LFAfterOuterWear { get; set; }

    public double? LFAfterOuterMiddleWear { get; set; }

    public double? LFAfterMiddleWear { get; set; }

    public double? LFAfterInnerMiddleWear { get; set; }

    public double? LFAfterInnerWear { get; set; }

    public double? RFInitialOuterWear { get; set; }

    public double? RFInitialOuterMiddleWear { get; set; }

    public double? RFInitialMiddleWear { get; set; }

    public double? RFInitialInnerMiddleWear { get; set; }

    public double? RFInitialInnerWear { get; set; }

    public double? RFAfterOuterWear { get; set; }

    public double? RFAfterOuterMiddleWear { get; set; }

    public double? RFAfterMiddleWear { get; set; }

    public double? RFAfterInnerMiddleWear { get; set; }

    public double? RFAfterInnerWear { get; set; }

    public double? LRInitialOuterWear { get; set; }

    public double? LRInitialOuterMiddleWear { get; set; }

    public double? LRInitialMiddleWear { get; set; }

    public double? LRInitialInnerMiddleWear { get; set; }

    public double? LRInitialInnerWear { get; set; }

    public double? LRAfterOuterWear { get; set; }

    public double? LRAfterOuterMiddleWear { get; set; }

    public double? LRAfterMiddleWear { get; set; }

    public double? LRAfterInnerMiddleWear { get; set; }

    public double? LRAfterInnerWear { get; set; }

    public double? RRInitialOuterWear { get; set; }

    public double? RRInitialOuterMiddleWear { get; set; }

    public double? RRInitialMiddleWear { get; set; }

    public double? RRInitialInnerMiddleWear { get; set; }

    public double? RRInitialInnerWear { get; set; }

    public double? RRAfterOuterWear { get; set; }

    public double? RRAfterOuterMiddleWear { get; set; }

    public double? RRAfterMiddleWear { get; set; }

    public double? RRAfterInnerMiddleWear { get; set; }

    public double? RRAfterInnerWear { get; set; }

    public double? LFInnerColdPressure { get; set; }

    public double? LFInnerHotPressure { get; set; }

    public double? RFInnerColdPressure { get; set; }

    public double? RFInnerHotPressure { get; set; }

    public double? LRInnerColdPressure { get; set; }

    public double? LRInnerHotPressure { get; set; }

    public double? RRInnerColdPressure { get; set; }

    public double? RRInnerHotPressure { get; set; }

    public double? LFColdPressure { get; set; }

    public double? LFHotPressure { get; set; }

    public double? RFColdPressure { get; set; }

    public double? RFHotPressure { get; set; }

    public double? LRColdPressure { get; set; }

    public double? LRHotPressure { get; set; }

    public double? RRColdPressure { get; set; }

    public double? RRHotPressure { get; set; }

    public int? SetNumberLF { get; set; }

    public int? SetNumberRF  { get; set; }

    public int? SetNumberLR { get; set; }

    public int? SetNumberRR { get; set; }

    public double? TrackTemp { get; set; }

    public void Save()
    {
       //data access crud here
    }
} 
```

我可以做些什么来进一步解决这个问题并弄清楚为什么我的模型没有绑定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T12:31:34.510

[$.ajax](http://api.jquery.com/jQuery.ajax/)方法的默认 contentType是`'application/x-www-form-urlencoded'`

如果要发送 JSON，则必须指定要发送 JSON，否则 Model Binder 将无法正常工作：

```
$.ajax({
        type: 'post',
        url: "@Url.Action("SaveTireRunModel", "Events")",
        data: tirerun,
        contentType: 'application/json',
        success: function(result) {
            if (!result.success) {
                alert(result.error);
            } else {}
        }
    }); 
```

您可能还需要使用以下命令“字符串化”数据：`data: JSON.stringify(tirerun)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T21:43:32.300

我遇到了几乎相同的问题 - 通过使用`ko.mapping.toJS(myVm)`而不是`ko.mapping.toJSON(myVm)`. 使用 toJSON 时，所有 vm 的属性都以连接的单个字符串发送，但使用 toJS 代替，每个属性在我的控制器中单独接收，因此正确映射到我的 C# Viewmodel，在你的情况下是`TireRunViewModel`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:37:04.467

是的，您需要指定 the`dataType`以及 as`contentType`例如：

```
$.ajax({
   type: "POST",
   url: "/person/create",
   dataType: "json",
   contentType: "application/json; charset=utf-8",
   data: jsonData,
   success: function (result){
       ...
   },
   error: function (error){
       ...
   }
}); 
```

这应该可以正常工作。（如果您有进一步的兴趣，我会[在此处突出显示）。](http://juristr.com/blog/2011/08/posting-json-data-to-aspnet-mvc-3-web/)

# android - 如何在android的sqlite中手动插入数据

> ID：11050524
> 
> 赞同：-2
> 
> 时间：2012-06-15T12:19:46.530
> 
> 标签：android, sqlite

我正在尝试从 sqlite 检索数据并将其放入微调器中[比如有省和市，所以我想要一个选定的省来填充它的城市]所以我设法做 DBAdapter..

1）我想将省和市放入数据库，我试过但我的最后一个选择是手动放入..所以任何人都可以帮助我..如何将数据手册插入数据库，我还没有数据库。

所以这是我从早上开始尝试的......

```
 db.execSQL("CREATE TABLE " + ProvinceTable + " ("+ COLUMN_PID + " INTEGER PRIMARY KEY  AUTOINCREMENT , " + COLUMN_PName + "TEXT)" );

     db.execSQL("CREATE TABLE " + Cities_TABLE + " ("+COLUMN_CID + " INTEGER PRIMARY KEY AUTOINCREMENT , " +COLUMN_CityNames+" TEXT," +
            ""+ COLUMN_Lat +" INTEGER, "+COLUMN_Long + " INTEGER , " + COLUMN_PID + " INTEGER NOT NULL , FOREIGN KEY ("+ COLUMN_PID +") REFERENCES " + ProvinceTable + "("+COLUMN_PID + "));"); 
```

我试过使用[这个](https://stackoverflow.com/questions/5307769/how-to-insert-data-manual-in-sqlite-database)解决方案，但我迷路了我不明白这些步骤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:49:48.717

在您的开发计算机上创建数据库实际上非常简单。使用`sqlite3`工具：

```
$ sqlite3 my_database;
SQLite version 3.7.7 2011-06-25 16:35:41
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> CREATE TABLE province_table (pid INTEGER PRIMARY KEY AUTOINCREMENT, pname TEXT);
sqlite> INSERT INTO province_table (pname) values ('Quebec');
sqlite> ...
sqlite> .q 
```

完成后输入`.q`退出。现在您的文件名为`my_database`，其中包含您创建的所有表和数据的数据库。如果您愿意，请随意重命名。现在您需要做的就是将它添加到您的应用程序项目中。

如果你没有这个工具，你可以在[sqlite 网站上](http://www.sqlite.org/download.html)下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:58:18.423

试试这样它会帮助你..

```
public class AutoHelper extends SQLiteOpenHelper
{

public AutoHelper(Context context) 
{
    super(context,"County.db",null,1);  
}

@Override
public void onCreate(SQLiteDatabase db) 
{
    db.execSQL("CREATE TABLE County(auto INTEGER PRIMARY KEY AUTOINCREMENT,path TEXT);");   
    Log.v("AUTOHELP:","TABLE CREATED");
}

public void insert(String path)
{
    ContentValues cv=new ContentValues();
    cv.put("path",path);

    getWritableDatabase().insert("County",null,cv);
    Log.e("ORG HELPER :","VALUES INSERTED");
}

public Cursor getPath()
{
    return(getReadableDatabase().rawQuery("SELECT path FROM County",null)); 
}

public String getAutoname(Cursor c)
{
    return(c.getString(0)); 
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
}
} 
```

# css - CSS重叠水平菜单

> ID：11050526
> 
> 赞同：0
> 
> 时间：2012-06-15T12:20:03.713
> 
> 标签：css

我正在使用两个菜单，一个向右浮动，另一个向左浮动。他们都使用百分比来解决大小问题，但是当我尝试最小化浏览器左右菜单重叠时。我只想根据这些百分比值最小化。或者只是不希望我的导航菜单与右侧的 gridview 菜单重叠

都分享两张图片以使问题更容易理解

左侧菜单

```
<div id="sol" class="sola"> 
```

左侧菜单相关css代码

```
.sola {float:left;display:inline;}
#sol {width:15%;} 
```

右侧菜单

```
 <div id="orta" class="saga"> 
```

右键菜单相关css代码

```
.orta {text-align:center;}
.saga {float:right;display:inline;} 
```

左右最小化浏览器 [http://g1206.hizliresim.com/y/h/7yxdg.jpg](http://g1206.hizliresim.com/y/h/7yxdg.jpg)

最小化浏览器后左右 [http://g1206.hizliresim.com/y/h/7yxks.jpg](http://g1206.hizliresim.com/y/h/7yxks.jpg)

# android - 2 asyncTask 在一个activity中调用，结果生成动态内容

> ID：11050527
> 
> 赞同：1
> 
> 时间：2012-06-15T12:20:07.760
> 
> 标签：android, dynamic, android-linearlayout, textview

我`TextView`在用户登录后加载的活动中生成动态。我使用 Web 服务来检索一些数据（所有用户名），并`textView`为每个数据创建一个。由于我有 http 请求，它在另一个线程 ( `Asynctask`) 中执行。在创建项目之前，我等待查询的结果并将其返回`"OnPostExecute"`。我有我的用户列表，每个项目都是可点击的，我现在想在点击它时显示一些信息，但我不知道该怎么做。

这是我的代码：

操作.java

```
public class operation extends AsyncTask<String, Void, ArrayList<String>>
{
public ArrayList<String> doLogin(AndroidHttpClient client, String userName,
        String userAccessKey) { ..}
public ArrayList<String> doQuery(AndroidHttpClient client,
        String sessionName, String query) { ...}
@Override
protected ArrayList<String> doInBackground(String... params) {
    final AndroidHttpClient client = AndroidHttpClient
            .newInstance("Android");

    if (params[2] == "login") {
        ArrayList<String> sessionName = doLogin(client, params[0],
                params[1]);
        return sessionName;
    } else if (params[2] == "query") {
        return doQuery(client, params[3],
                "select accountname from Accounts;");
    }

    return null;

} 
```

查询活动类：

```
public class QueryActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.query);

    Button back = (Button) findViewById(R.id.back);

    // Display users' name when the activity is launched
    // creating dynamic TextView items for each user
    // and allows the user to click on it to display more information.
    // It calls the function "doInBackGround" to make http requests
    // (queries) in another thread and retrieve the result to generate a
    // dynamic page
    new operation() {
        @Override
        public void onPostExecute(ArrayList<String> result) {

            LinearLayout dynamicWindow = (LinearLayout) findViewById(R.id.windowLayout);
            dynamicWindow.removeAllViewsInLayout();

            // create a dynamic LinearLayout which will contain our
            // TextViews
            LinearLayout dynamicContent = new LinearLayout(
                    QueryActivity.this);
            dynamicContent.setOrientation(LinearLayout.VERTICAL);
            dynamicContent.setBackgroundColor(0xFF007AAD);

            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.FILL_PARENT,
                    LinearLayout.LayoutParams.FILL_PARENT);
            params.gravity = Gravity.CENTER_HORIZONTAL;
            dynamicWindow.addView(dynamicContent);

            // retrieve every name returned from the query and create a
            // TextView for each one
            int nbTextView = result.size();
            TextView[] textViewArray = new TextView[nbTextView];

            for (int i = 0; i < nbTextView; i++) {
                Log.i("Contenu ArrayList",
                        "item n°" + i + " = " + result.get(i));
                textViewArray[i] = new TextView(QueryActivity.this);
                textViewArray[i].setText(result.get(i));
                textViewArray[i].setTextColor(0xFFFFFFFF);
                textViewArray[i].setVisibility(View.VISIBLE);
                textViewArray[i].setGravity(2);
                textViewArray[i].setId(+i);
                textViewArray[i].setLeft(10 + (i * 2));
                final int test = i;

                // makes the TextView clickable
                textViewArray[i].setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {

/* HERE IS THE PART I DON'T KNOW HOW TO DOW */

                    }
                });

                // add the TextView to the linearLayout
                dynamicContent.addView(textViewArray[i],
                        new LinearLayout.LayoutParams(
                                LinearLayout.LayoutParams.WRAP_CONTENT,
                                LinearLayout.LayoutParams.FILL_PARENT));

            }
        }
    }.execute(null, null, "query", sessionName);

    // When the "back" button is clicked, the activity is destroyed and the
    // previous activity on the stack is loaded 
    back.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            finish();
        }

    });

} 
```

}

因此，当我单击用户名时，我想在屏幕中间显示信息，但我必须执行另一个 http 请求才能检索他的信息。它涉及我通过在类操作的 doInbackground 函数中创建和添加另一个案例来`doInBackground`再次调用。`new Operation().execute(...)`我有点迷路了，请有人有想法吗？PS：如果您在我的代码中发现可以改进的内容... :) Thx

# ipad - 在 iPad 上使用 CakePHP 的 MediaView 和 MP4 视频

> ID：11050528
> 
> 赞同：2
> 
> 时间：2012-06-15T12:20:11.213
> 
> 标签：ipad, cakephp, cakephp-2.1

我正在尝试通过 Cake 的 MediaView 类显示 MP4 视频。我在 Chrome 和 Firefox 中运行良好，问题是在 iPad 上观看视频时。我得到的只是中间有一条线的播放图标。如果您直接访问视频的 URL，则可以查看该视频，但是我需要介于两者之间的这一层，因为视频受限于谁可以查看它们。

我用谷歌搜索了这个问题，发现 iPad 在显示视频内容时使用了 RangeRequests（不完全确定所有这些是如何工作的），并找到了[这篇](http://mobiforge.com/developing/story/content-delivery-mobile-devices)文章的方法。然后我实现了我自己的 View 类，该类合并了附录 A 中的代码（显然做了一些更改以适应 Cake）。我还查看了 MediaView 类的 Cakes 源代码，在我看来，它似乎已经有了支持范围请求的代码。但是，我没有让视频正常工作。

我只是想知道是否还有其他可能导致问题的原因，因为我意识到链接到的文章现在已经超过 4 年了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:03:04.380

您实际向用户提供的内容类型是什么？iPad、iPhone 和 iPod[不支持闪存](http://www.apple.com/hotnews/thoughts-on-flash/)。如果这是您的问题，您可以进行智能请求处理并向 iOS 设备提供 HTML5 内容。RequestHandlerComponent 类可以检测用户代理。对于移动浏览器，您可以使用该[`RequestHandler->isMobile()`](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html#RequestHandlerComponent%3a%3aisMobile)方法。例如，要检查您将使用的 iPad：

```
$this->RequestHandler->isMobile('iPad') 
```

`true`如果是这种情况，它应该返回。

# pagination - CakePHP 搜索分页问题， 丢失值到下一页

> ID：11050531
> 
> 赞同：2
> 
> 时间：2012-06-15T12:20:22.010
> 
> 标签：pagination, cakephp-1.3

我有这个观点

```
 ?php echo $this->Form->create('Search', array('id' => 'Search', 'url' => array('controller' => 'mycontroller', 'action' => 'index'))); ?>
<?php echo $this->Form->input('usuario_id', array('label' => __('Vendedores', true), 'options' => $vendedores, 'empty' => true)); ?>
<?php echo $this->Form->input('cliente_id', array('label' => __('Cliente', true), 'options' => $clientes, 'empty' => true)); ?>
<?php echo $this->Location->estados(); ?>
<?php echo $this->Location->municipios(); ?>
<?php echo $this->Location->bairros(); ?>
<?php echo $this->Form->input('equipe_id', array('label' => __('Equipe', true), 'options' => $equipe, 'empty' => true)); ?>
<?php echo $this->Form->input('veiculo_id', array('label' => __('Modelo', true), 'options' => $veiculos, 'empty' => true)); ?>
<?php echo $this->Form->input('status', array('label' => __('Status', true), 'options' => $status, 'empty' => true,'multiple' => true )); ?>
<?php echo $this->Utils->data('date_from', array('input' => array('label' => 'De'))); ?>
<?php echo $this->Utils->data('date_to', array('input' => array('label' => 'a'))); ?>
<?php echo $this->Form->hidden('Search.search'); ?>
<?php echo $this->Form->end('Buscar'); ?> 
```

和我的控制器分页条件是这样的

```
if(!empty($this->data['Search']['myvar_id'];)) $this->paginate['conditions']['myModel.myvar_id'] = $this->data['Search']['myvar_id']; 
```

所有搜索字段都工作正常，在#1 页面中，没关系，但是当我分页到#2 页面时，值被清除。如您所见，我在表单上使用了 post 方法，所以使用这种情况，我如何确定当我分页时值不会丢失？

先谢谢了！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T10:02:30.713

这是您可以做的一件简单的事情

```
if(isset($this->data[<some variable>])){
            if(!empty($this->data[<some variable>])){
                $keyword = trim($this->data[<some variable>]);
                $this->redirect('/controller/action/keyword:'.$keyword.));

    }
        }elseif(isset($this->params['named']['keyword'])){
            if(!empty($this->params['named']['keyword'])){
                $keyword =$this->params['named']['keyword'];
                 $this->paginate['conditions'] = array("ModelName.Fieldname LIKE" => "%$keyword%");
            }
        } 
```

这是一种最好最简单的方法 4 维护分页值，您可以在参数中拥有多个关键字，并且可以在条件后缀中使用。

# java - 在多线程环境中使用 HashMap

> ID：11050539
> 
> 赞同：7
> 
> 时间：2012-06-15T12:20:53.660
> 
> 标签：java, multithreading

我正在通过一个[关于 JavaRevisited](http://javarevisited.blogspot.in/2011/04/top-20-core-java-interview-questions.html)的面试问题，我很难理解这个问题：

> 在多线程环境中使用 HashMap 有什么问题？get() 方法何时进入无限循环？

在我看来，在多线程环境中使用不是问题`HashMap`，只要我们的应用程序不访问/读取正在修改 created 的线程`HashMap`，而不是简单地访问 HashMap。

因此，正如我所见，只要在应用程序中我们只是`HashMap`在多线程环境中访问它，就没有问题。

请让我知道我的理解是否正确。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-15T12:26:41.130

> 在多线程环境中使用 HashMap 有什么问题？get() 方法何时进入无限循环？

让多个线程以不受保护的方式使用非同步集合（实际上是任何可变类）是一个错误。确定如果*每个*线程都有自己的`HashMap` *实例*，那么这不是问题。如果多个线程添加到*同一个* `HashMap`实例而没有它是一个问题`synchronized`。即使只有 1 个线程正在修改 a`HashMap`而其他线程在没有同步的情况下从同一个映射中读取，您也会遇到问题。

如果您需要在多个线程中使用相同的哈希表对象，那么您应该考虑使用`ConcurrentHashMap`，将每个对 的访问包装`HashMap`在一个`synchronized {}`块中，或者使用该`Collections.synchronizedMap(new HashMap<...>())`构造。

可能`get()`会进入无限循环，因为其中一个线程只有*部分更新*的内存视图，`HashMap`并且必须存在某种对象引用循环。这就是使用具有多个线程的非同步集合的危险。

> 所以在我的理解中，只要在应用程序中我们只是在多线程环境中访问HashMap就不是问题了？

如果“访问”是指“阅读”，那么这对于**quals**来说是正确的。您必须确保：

*   在实例化线程*之前*`HashMap`完成对 的所有更新，并且创建映射的线程也分叉线程
**   线程仅使用`HashMap`只读模式 - 要么`get()`迭代，要么不删除*   没有线程更新地图*

 *如果这些条件中的任何一个不成立，那么您将需要使用同步地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:23:20.153

这是一个经典的问题。ArrayList 和 HashMap 不同步，而 Vector 和 HashTable 是。因此，除非您自己非常小心地定义互斥锁，否则您应该使用 HashTable。

换句话说，例如 HashTable 中的方法将确保在任何给定时间没有其他线程正在使用 HashTable。如果您使用 HashMap，则必须手动执行此操作，方法是确保在调用该方法之前在 HashMap 上进行同步。

更新：查看@Gray 的评论。看起来用 Collections.synchronizedMap(new HashMap()) 包装 HashMap 是现在要走的路。

编辑：其他海报的回答比我好。然而，我的回答引发了关于使用即将被弃用的 Vector、Stack、Hashtable 和 Dictionary 类的有趣讨论，所以我将问题留在这里，作为下面评论的开头。多谢你们！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-09T04:25:11.300

我们知道这`HashMap`是一个非同步的集合，而它的同步对应部分是`HashTable`. 因此，当您在多线程环境中访问集合并且所有线程都在访问集合的单个实例时，`HashTable`出于各种明显原因（例如避免脏读和保持数据一致性）使用它会更安全。在最坏的情况下，这种多线程环境也可能导致无限循环。

是的，它是真实的。`HashMap.get()`可能导致无限循环。让我们看看如何？

如果查看源代码`HashMap.get(Object key)`方法，它看起来像这样：

```
 public Object get(Object key) {
    Object k = maskNull(key);
    int hash = hash(k);
    int i = indexFor(hash, table.length);
    Entry e = table[i];
    while (true) {
        if (e == null)
            return e;
        if (e.hash == hash &amp;&amp; eq(k, e.key))
            return e.value;
        e = e.next;
    }
} 
```

> `while(true){...}`在多线程环境中，如果 e.next 可以以某种方式指向自身，则在运行时总是可能成为无限循环的受害者。这将导致无限循环。但是，e.next 将如何指向自身？

这可能发生在`void transfer(Entry[] newTable)`方法中，该方法在 HashMap 调整大小完成时调用。

```
 do {
        Entry next = e.next;
        int i = indexFor(e.hash, newCapacity);
        e.next = newTable[i];
    newTable[i] = e;
        e
= next;
} while (e != null); 
```

如果在调整大小的同时，其他线程试图修改地图实例，则这段代码很容易产生上述情况。

避免这种情况的唯一方法是在代码中使用同步，或者更好的是使用同步集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T12:27:56.023

我猜他们的意思是访问`HashMap`. `Shared mutable state`.

因为不是`synchronized`每个线程都会从主内存中获取它的副本，修改并覆盖它。

```
HashMap with one entry <n, 1>

thread 1 grab the copy

thread 2 grab the copy

thread 1 modify <n, 2>

thread 2 modify <n, 3>

thread 1 is done, and stores the copy in the main memory

now memory is <n, 2>

thread 2 is done and stores the copy

now memory is <n, 3>

The state thread 1 is lost 
```*

# c# - WPF 设计器错误

> ID：11050540
> 
> 赞同：0
> 
> 时间：2012-06-15T12:21:08.653
> 
> 标签：c#, wpf, windows-forms-designer, unhandled-exception

每次我使用设计器或代码编辑控件或项时。设计器会给出异常，但是如果我重新加载设计器，它会在设计视图中再次显示视图。然后在编辑它时，再次显示相同的错误。..而且我根本不知道为什么会这样！至少可以说变得有点令人沮丧。下面的链接显示了我收到的错误 [https://www.dropbox.com/s/d49ahlcf33efegr/wpfDesigner.PNG](https://www.dropbox.com/s/d49ahlcf33efegr/wpfDesigner.PNG)

# javascript - 组合 jQuery 对象

> ID：11050542
> 
> 赞同：4
> 
> 时间：2012-06-15T12:21:15.263
> 
> 标签：javascript, jquery

> **可能重复：**
> [合并 jQuery 对象](https://stackoverflow.com/questions/1881716/merging-jquery-objects)

## [看演示](http://jsfiddle.net/nZRLD/)

```
a = $('div:eq(0)');
b = $('div:eq(1)');
c = $('div:eq(2)');
d = $('div:eq(3)');
e = $('div:eq(4)');
f = $('div:eq(5)');

console.log($([a,b,c,d,e,f]).find('a')) 
```

​</p>

我想要做的是将多个 jQuery 对象添加到一个集合中。

我知道我可以通过 using 一次添加一个，`.add()`但我正在寻找一种将 jQuery 对象数组转换为单个 jQuery 集的方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:51:26.550

在纯 jQuery 中是不可能的，因为语法已经用于 DOM 元素。

但是一个简单的插件就可以完成这项工作：

[http://jsfiddle.net/gMDjZ/](http://jsfiddle.net/gMDjZ/)

```
a = $('div:eq(0)');
b = $('div:eq(1)');
c = $('div:eq(2)');
d = $('div:eq(3)');
e = $('div:eq(4)');
f = $('div:eq(5)');

jQuery.fromArray = function(a) {
    var c = jQuery();
    for(x in a) {
        c = c.add(a[x]);            
    }       
    return c;
}

console.log($.fromArray([a,b,c,d,e,f]).find('a')) 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:27:25.697

您的代码中缺少`:`您的代码。写成——

```
a = $('div:eq(0)'); 
```

使用`jQuery.merge()` [http://api.jquery.com/jQuery.merge/](http://api.jquery.com/jQuery.merge/)

或`jQuery.map()` [http://api.jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/)

# watir - WIN32OLERuntimeError：使用 Watir Script 访问隐藏的文本框时发生。如何克服它？

> ID：11050545
> 
> 赞同：1
> 
> 时间：2012-06-15T12:21:22.057
> 
> 标签：watir

这是我尝试访问网页中的隐藏文本字段时遇到的错误。我正在使用页面导航

irb(main):184:0> browser.text_fields[1].set "嘿，伙计"

`WIN32OLERuntimeError: (in OLE method 'focus': )
OLE error code:800A083E in htmlfile
Can't move focus to the control because it is invisible, not enabled, or of a type that does not accept the focus. HRESULT error code:0x80020009 Exception occurred. from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/input_elements.rb:294:in 'method_missing' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/input_elements.rb:294:in 'set' from (irb):184 from C:/Ruby193/bin/irb:12:in 'main>'`

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:03:39.360

当您手动使用浏览器时，您如何使用该文本字段？

您需要首先触发导致文本字段可见的事件。然后，您可以使用您尝试过的代码输入文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T17:37:34.897

如果您查看跟踪，则会发生这种情况，因为您正在尝试更新不可编辑或不可见的字段。如果您使用的是 Watir “Classic”（仅限 IE），您可以编写：

```
require 'watir'
 .
 .
 .
browser.text_fields[1].value = "Hey man" 
```

但是，如果您使用的其他浏览器/驱动程序也无法正常工作。在浏览器的隐藏/不可编辑字段中，您必须使用 javascript 来执行此操作：

```
 browser.execute_script("var elem = document.getElementById('your_textfield_id'); elem.value = 'Hey man';") 
```

烦人，但很有意义，因为它不能由用户编辑，因此不能使用键盘“设置”。

# android - Android 上的 Google Analytics（分析）提供平均网站持续时间：00:00:00

> ID：11050546
> 
> 赞同：2
> 
> 时间：2012-06-15T12:21:32.930
> 
> 标签：android, google-analytics, duration

这就是我设计 Google Analytics 以在我的应用上运行的方式：

每个活动都扩展`TrackedFragmentActivity`或任何其他扩展的片段活动`TrackedFragmentActivity`。

TrackedFragmentActivity 是：

```
public class TrackedFragmentActivity extends SherlockFragmentActivity {
    GoogleAnalyticsTracker tracker;

    public void startAnalytics(String pageName) {
        tracker = GoogleAnalyticsTracker.getInstance();

        tracker.startNewSession("UA-CODE-HERE", this);
        tracker.trackPageView(pageName);
        tracker.dispatch();
    }   
} 
```

并且每个活动都`super.startAnalytics("pagenameHere")`在`onCreate`.

现在，每个活动都得到了正确的跟踪，一切都得到了正确的跟踪，但是与持续时间相关的数据完全混乱了：

```
Pages / Visit: 1.07
Avg. Visit Duration: 00:00:00
Bounce Rate: 94.63% 
```

我正在打电话`stopTracker()` `onDestroy`，虽然这是这种行为的错，因此我试图将其删除，但我遇到了完全相同的问题。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:43:55.500

我相信这是一种正常的行为。我的理解是，Android 平台上的 Google Analytics 仅限于记录简单事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:30:06.757

主要问题是调用这个方法：tracker.startNewSession("UA-CODE-HERE", this);

每次加载新活动时。所以我只是添加了一个非常愚蠢的静态布尔值来仅在第一次调用该方法。有没有人有更好的解决方案？

新代码是：

```
public class TrackedFragmentActivity extends SherlockFragmentActivity {
    private static GoogleAnalyticsTracker tracker = GoogleAnalyticsTracker.getInstance();
    private static boolean hasStarted = false;

    public void startAnalytics(String pageName) {

        if(!hasStarted) {
            tracker.startNewSession("UA-CODE-HERE", this);
            hasStarted = true;
        }

        tracker.trackPageView(pageName);
        tracker.dispatch();

    }   
} 
```

# netbeans - 如何在 NetBeans IDE 7.1.2 中使用 LWUIT？

> ID：11050548
> 
> 赞同：2
> 
> 时间：2012-06-15T12:21:52.187
> 
> 标签：netbeans, java-me, lwuit, java-wireless-toolkit

我对如何将 LWUIT 1.5 版与 NetBeans IDE 7.1.2 集成有些困惑。

我正在使用教程（http://lwuit.java.net/tutorial/hello.html）；我在 Stack Overflow 中找到的 url。在教程的某处，它说为模拟器平台选择“用于 CLDC 的 Sun Java(TM) Wireless Toolkit 2.5.2 或由 Sun Java Technology 提供支持的 Sprint Wireless Toolkit 3.2”。

但是，在我的 NetBeans IDE 中，Emulator Platform 的组合框中只有一项，它是“CLDC Oracle Java(Tm) Platform Micro Edition SDK 3.0.5”。

请告知出了什么问题。发生这种情况是因为 NetBeans 安装不正确还是因为其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:13:54.650

没什么问题，Micro Edition SDK 3应该没问题，只是LWUIT教程中提到的工具包的更新版本。

*   版本更改在 java.net 博客条目中解释了[再见 WTK，你好 Java ME SDK！](http://weblogs.java.net/blog/terrencebarr/archive/2008/10/goodbye_wtk_hel.html)

    > 多年来，用于 CLDC 的 Sun Java Wireless Toolkit (WTK) 一直是开发移动应用程序和在桌面上模拟移动平台的参考工具...
    > 
    > 然而，它也有一些弱点......
    > 
    > 所以是时候进行彻底的更新了。告别 WTK，迎接 Java ME SDK！
    > 
    > ...这对开发人员意味着什么？
    > 
    > Java ME SDK 是一个全面改进的工具。它基于功能强大的 Netbeans 框架，因此比以前更易于扩展和移植。它将所有主要的 Java ME 平台（大众市场手机、智能手机和蓝光）整合到一个工具中。Java ME 仿真现在非常准确，因为今天数百万台设备都在使用phoneME（以及它的商业对应物）......

如果由于某种原因您仍然需要旧版本的 WTK，在[Stack Overflow 'wtk' tag wiki](https://stackoverflow.com/tags/wtk/info)上提供了一个链接，可以从哪里下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:32:08.360

下载 Sun java 无线工具包（由于 Oracle 已经接管了 Sun，现在将被称为其他东西）。安装它。在此之后，它应该出现在您的 netbeans 中。

# ios - 如何在启动时以编程方式强制 iPad 进入 1x 或 2x 模式？

> ID：11050552
> 
> 赞同：0
> 
> 时间：2012-06-15T12:22:11.247
> 
> 标签：ios, ipad

我可以检测到我的 iPad 设备以 1 倍或 2 倍的比例运行 iPhone 应用程序，这要归功于此处较早的帖子：[检测 iPhone 应用程序的 iPad 2x 按钮](https://stackoverflow.com/questions/6131913/detect-ipad-2x-button-for-iphone-app)

我想做的是将此设置序列化为`NSUserDefaults`用户更改它的时间，以便在启动时强制应用程序进入 1x 或 2x。目前，该应用程序始终以 1x 模式启动。请再次注意，我可以检测到用户何时在 1x 和 2x 之间切换比例，我的问题是在启动时以编程方式设置比例。

它似乎`[[UIScreen mainScreen] screen]`是只读的。但是我知道某些应用程序（例如 Google+）能够做到这一点。但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:35:02.437

对我来说，iOS 似乎记得我的应用程序的“2x”设置。通过 Xcode 进行调试时，它可能会被重置。我将使用发布版本进行测试并在调试器之外正常运行它。

# javascript - Jquery 和 Contenteditable - 强制换行显示为单个空格

> ID：11050555
> 
> 赞同：1
> 
> 时间：2012-06-15T12:22:32.510
> 
> 标签：javascript, jquery, contenteditable

我找到了让所有浏览器在按下“enter”时阻止默认事件的方法，以便显示换行符“\n”。原始代码在这里：http: [//jsfiddle.net/FhEf6/3/](http://jsfiddle.net/FhEf6/3/)

它工作得很好，但是当我将它包含在我自己的网站上时（使用 Jquery 1.7.2），它确实显示了新的“\n”，就像一个空格一样。我很好奇，因为在源代码中它正确显示了换行符。

另一件事是，如果我尝试`<br>`用换行符代替而不是换行符...`<br>`完全显示为这样（查看源代码，<，>被它们各自的htmlentities替换...）。

这是一件很奇怪的事情，因为原始代码在 jsfiddle 中完美运行，而我没有进行任何更改。我在这里阅读了一个问题（[查看帖子](https://stackoverflow.com/questions/1688086/n-newline-character-wont-work-with-javascript)），但我认为这不是一个好的解决方案。

**编辑**：

Ups！...我需要在容器上使用“white-space:pre”。好吧，但是……我还是不明白，为什么它会这样工作？，一个新行是一个新行，还是不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:23:45.730

它仍然是 HTML，因此使用换行符将不起作用。坚持使用**<br>**标签。

这不适用于您当前的代码，因为它是一个**元素**节点与一个**textnode**。

我建议将[Rangy](http://code.google.com/p/rangy/)用于所有可内容编辑的项目。

我在这里有一个几乎可行的解决方案：http: [//jsfiddle.net/7A8Xw/](http://jsfiddle.net/7A8Xw/)（在 chrome 中它会插入中断，但如果您在内容末尾按 Enter 键，它不会将光标移动到 br 之后（如果您按两次则有效） )

# asp.net-mvc-3 - 如何使 InjectAttribute 与 IValidatableObject 一起使用

> ID：11050557
> 
> 赞同：1
> 
> 时间：2012-06-15T12:22:36.823
> 
> 标签：asp.net-mvc-3, ninject

我有这个 ViewModel

```
public class CustomerSuscribeViewModel : IValidatableObject
{
    [DataMember(IsRequired = true)]
    [DataType(DataType.Text)]
    public string Name { get; set; }

    public string SurName { get; set; }

    [DataMember(IsRequired = true)]
    [DataType(DataType.Password)]
    public string Password { get; set; }

    [DataMember(IsRequired = true)]
    [DataType(DataType.Password)]
    public string ConfirmPassword { get; set; }

    [DataMember(IsRequired = true)]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [Inject]
    public IDataUsers DataUsers { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {

        if(DataUsers.Get(new UserFilter() {Email = Email}).Any())
        {
            yield return new ValidationResult(This Email is already used.",new string[]{"Email"});
        }
        if(ConfirmPassword != Password)
            yield return new ValidationResult("Please confirm your apssword", new string[] { "Password", "ConfirmPassword" });
    }
} 
```

而这个动作

```
[HttpPost]
        public ActionResult Suscribe(CustomerSuscribeViewModel customer)
        {
            if (!ModelState.IsValid)
                return View(customer); 
```

问题是永远不会创建成员 DataUsers，所以我得到了 NullReferenceException。

绑定通过以下方式完成：

```
Bind<IDataUsers>().To<DataUsers>(); 
```

任何的想法 ？

编辑： InjectAttribute 适用于我的控制器内的属性。

环境：asp.net mvc 3，ninject 2.2（也许我需要更新？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:38:01.300

视图模型不是由 Ninject 创建的，因此注入属性被忽略。通常视图模型应该保持简单并且没有依赖关系。您可以使用`ValidationAttribute`s 而不是`IValidatableObject`

阅读[https://github.com/ninject/ninject.web.mvc/wiki/Injection-of-validators](https://github.com/ninject/ninject.web.mvc/wiki/Injection-of-validators)了解注入验证属性。

*   示例：[https ://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Movie/PriceRangeAttribute.cs](https://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Movie/PriceRangeAttribute.cs)

这是一个如何使用 a 实现密码验证与确认密码匹配的示例`ValidationAttribute`：

*   实现：[https ://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Account/CompareAttribute.cs](https://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Account/CompareAttribute.cs)
*   用法：[https ://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Account/RegisterModel.cs](https://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/SampleApplication/Models/Account/RegisterModel.cs)

# c# - 如何使用c#将按钮矩阵添加到asp .net页面

> ID：11050559
> 
> 赞同：0
> 
> 时间：2012-06-15T12:22:38.857
> 
> 标签：c#, asp.net, visual-studio-2008

您对如何在 ASPX 中的页面中添加相同大小的按钮（50 列*10 行）的整个矩阵有什么建议吗？该页面甚至可以在加载时自动填充按钮。我的第一个想法是使用双 FOR：

```
FOR(i=1; i<=10;i++)
{
FOR(j=1; j<=50;++)
{
Create button;
Add button to panel; (to the right of the previous button)
Set button caption to ij; 
}
Go to the next row of buttons.
} 
```

我怎样才能到下一行？这个编码是什么，尤其是放置按钮？我的第一个想法是创建一个段落，但不知道如何在 C# 中进行。在 ASPX 中，我知道这是插入的问题。`<p>.` 有比这种情况更好的选择吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:44:24.933

您可以添加一行，然后添加 System.Web.UI.HtmlControls.GenericControl("br") 以开始新行

# python - 如何在 python 中使用多个分隔符拆分字符串？

> ID：11050562
> 
> 赞同：1
> 
> 时间：2012-06-15T12:22:51.867
> 
> 标签：python, arrays, string

有这条线：

```
Breathing 1:-31.145 9:-32.8942 13:-35.8225 2:-35.9872 17:-36.2135 16:-36.6343 12:-36.7487 4:-37.8538 8:-38.6924 7:-39.0389 14:-39.0697 18:-40.0523 3:-40.5393 15:-40.5825 5:-41.6323 11:-45.2976 10:-53.3063 6:-231.617 
```

`' ',':-'`我想将除分隔符（ ）之外的所有内容都存储在数组中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:29:03.817

**更新**：我没有意识到这`Breathing`是您数据的一部分。在这种情况下，您将获得所有字符串。

假设：

```
b = 'Breathing 1:-31.145 9:-32.8942 13:-35.8225 2:-35.9872' 
```

那么这个简单的构造：

```
 b.replace(':-',' ').split() 
```

会给：

```
['Breathing', '1', '31.145', '9', '32.8942', '13', '35.8225', '2', '35.9872'] 
```

*解释*`:-`：它用空格 ( )替换 any `' '`。然后它在有空格的地方拆分字符串以获取字符串列表。

要获取`float`数字的值：

```
['Breathing'] + [float(i) for i in b.replace(':-',' ').split()[1:]] 
```

结果是：

```
['Breathing', 1.0, 31.145, 9.0, 32.8942, 13.0, 35.8225, 2.0, 35.9872] 
```

*解释*：与上面类似，除了`float()`用于所有数字字符串以将它们转换为浮点数并且“呼吸”字符串放在列表的开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T12:36:36.533

这[`re.split`](http://docs.python.org/library/re.html#re.split)是执行此操作的一种简单方法 - 在这种情况下，您希望在分隔符集上进行拆分：

```
>>> import re
>>> thestring = "Breathing 1:-31.145 9:-32.8942 13:-35.8225 2:-35.9872 17:-36.2135 16:-36.6343 12:-36.7487 4:-37.8538 8:-38.6924 7:-39.0389 14:-39.0697 18:-40.0523 3:-40.5393 15:-40.5825 5:-41.6323 11:-45.2976 10:-53.3063 6:-231.617"
>>> re.split(r"[ :\-]+", thestring)
['Breathing', '1', '31.145', '9', '32.8942', '13', '35.8225', '2', '35.9872', '17', '36.2135', '16', '36.6343', '12', '36.7487', '4', '37.8538', '8', '38.6924', '7', '39.0389', '14', '39.0697', '18', '40.0523', '3', '40.5393', '15', '40.5825', '5', '41.6323', '11', '45.2976', '10', '53.3063', '6', '231.617'] 
```

`[]`定义一个字符集，包含一个空格，`:`和`-`（需要转义，因为它用于范围如`[a-z]`） -`+`字符集之后的意思是一个或多个

要在空格或 上显式拆分`:-`，您可以使用`|`or 正则表达式：

```
>>> re.split(":-| ", thestring)
['Breathing', '1', '31.145', ...] 
```

正如我在对该问题的评论中提到的那样，我原以为分隔符只是`:`并且`-`表示负数..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T12:24:21.053

您可以使用`str.split([sep[, maxsplit]])`

> 返回字符串中单词的列表，使用 sep 作为分隔符字符串。如果给定 maxsplit，则最多完成 maxsplit 拆分（因此，列表将最多具有 maxsplit+1 个元素）。如果未指定 maxsplit 或 -1，则对拆分的数量没有限制（进行所有可能的拆分）。

应用

```
>> ' 1  2   3  '.split()
['1', '2', '3'] 
```

在“串联”与`str.replace(old, new[, count])`

> 返回字符串的副本，其中所有出现的子字符串 old 都替换为 new。如果给定了可选参数 count，则仅替换第一个 count 出现。

应用

```
>>> a = 'h!e!l!l!o! w!o!r!l!d!'
>>> a.replace('!','')
'hello world' 
```

应用于您的场景：

```
>> 'Breathing 1:-31.145 9:-32.8942 13:-35.8225 2:-35.9872 17:-36.2135 16:-36.6343
              12:-36.7487 4:-37.8538 8:-38.6924 7:-39.0389 14:-39.0697 18:-40.0523
              3:-40.5393 15:-40.5825 5:-41.6323 11:-45.2976 10:-53.3063 
              6:-231.617'.replace(':-',' ').split(' ')

 ['Breathing', '1', '31.145', '9', '32.8942', '13', '35.8225', '2', 
   '35.9872', '17', '36.2135', '16', '36.6343', '12', '36.7487', '4', '37.8538', 
   '8', '38.6924', '7', '39.0389', '14', '39.0697', '18', '40.0523', '3', 
   '40.5393', '15', '40.5825', '5', '41.6323', '11', '45.2976', 
   '10', '53.3063', '6', '231.617'] 
```

**所有定义均来自手册**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:07:07.550

使用正则表达式可能是最好的方法：

```
import re
re.split('\s+|:-','Breathing 1:-135') 
```

这给了你`['Breathing', '1', '135']`，这正是你想要的。在这里，`\s+`代表一个或多个空格，`|`代表“或”，并且`:-`是按字面意思匹配的。

编辑：@mgilson 给出了相同的答案。无论如何，您可能想查看[python regex 的文档](http://docs.python.org/library/re.html#re.split "Python 正则表达式拆分函数。")。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T12:34:00.460

```
import re
array=re.split(r'\s+|:-',mystring) 
```

在正则表达式中，`\s+`匹配空格，而`:-`匹配字符串中的文字序列。如果这些条件中的任何一个匹配，则管道 ( `|`) 是 re 表示匹配的方式。

当然，您可以更改`"\s+"`为，`"\s"`或者即使`" "`您想确保按照问题中的要求拆分单个空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T13:16:15.983

这不是您所要求的，但无论如何它可能是您需要的;-)

```
lines = ['Breathing 1:-31.145 9:-32.8942 13:-35.8225 2:-35.9872 17:-36.2135 16:-36.6343 12:-36.7487 4:-37.8538 8:-38.6924 7:-39.0389 14:-39.0697 18:-40.0523 3:-40.5393 15:-40.5825 5:-41.6323 11:-45.2976 10:-53.3063 6:-231.617']

data = {}
for line in lines:
    line = line.split()   # split on spaces
    values = (s.split(':-') for s in line[1:])
    data[line[0]] = {int(t):float(val) for t,val in values} 
```

结果是

```
data = {
    'Breathing': {
        1: 31.145,
        2: 35.9872,
        3: 40.5393,
        4: 37.8538,
        5: 41.6323,
        6: 231.617,
        7: 39.0389,
        8: 38.6924,
        9: 32.8942,
        10: 53.3063,
        11: 45.2976,
        12: 36.7487,
        13: 35.8225,
        14: 39.0697,
        15: 40.5825,
        16: 36.6343,
        17: 36.2135,
        18: 40.0523
    }
} 
```

然后你可以访问它

```
data['Breathing'][2]   # -> 35.9872 
```

# database - 模特经纪公司数据库架构

> ID：11050573
> 
> 赞同：0
> 
> 时间：2012-06-15T12:23:22.980
> 
> 标签：database, codeigniter, database-design

我想做一个基于codeigniter的模型代理，但我坚持使用数据库，正是注册部分。

我想允许用户注册为模特、摄影师、工作室。

我在网上搜索，但真的找不到任何有用的东西。

有人可以给我一个提示，我可以在哪里找到模型代理数据库的架构？或类似的东西？

我想注册 3 个账号，模特，摄影师，工作室

我坚持这部分，所以实际上模特会有更多的选择，比如摄影师或工作室，我真的不想把所有的选择都放在一张桌子上。

谢谢

或者，如果有人可以给我意见，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:51:23.033

您必须使用基于角色的系统：

帐户 ID - 描述 - 角色 0 - 模特 - 2 1 - 摄影师 - 0 2 - 工作室 - 1

角色 ID - add_photos - edit_data - view_model_details 0 - 1 - 0 - 0 1 - 0 - 1 - 1 2 - 1 - 1 - 1

用户 ID - 姓名 - 帐户 0 - Norma Jean - 0 1 - Max - 2 2 - James Hickey - 1

角色表允许您为组定义不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:28:59.120

```
Model
  id  Integer
  name String

Studio
  id Integer
  name String

Registration
  id  Integer
  model_id Integer
  studio_id Integer
  reg_date Date 
```

# java - 尝试从 Eclipse 加载 Android 1.6 虚拟设备时出错

> ID：11050576
> 
> 赞同：2
> 
> 时间：2012-06-15T12:23:44.720
> 
> 标签：java, android, eclipse, virtual-machine

我是自学 Java 菜鸟

我在尝试启动 Android 1.6 VM 时（如莎士比亚的“Doth”）收到以下错误消息（我使用 Android 1.6 而不是更高版本的原因是在我的慢速 PC 上加载所需的时间更少！ ) 来自 Eclipse：

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/ref/FinalReference 
```

我已经从 AVD 管理器成功启动了 Android 1.6 VM，所以 VM 软件似乎没问题

并且源代码似乎没问题 - 并且是应该初始化 VM 的默认代码：

```
package com.leigh.namespace;

import android.app.Activity;
import android.os.Bundle;

public class HelloWorldActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:55:16.183

> 但是为了你的信息，我安装了 JDK1.7.0_03 编译器

android 工具（例如模拟器）[依赖于 JDK 6 (1.6.x) 安装](http://developer.android.com/sdk/requirements.html)。它们无法在 JDK 7 安装 (1.7.x) 中正常运行。[请改为安装 JDK 6](http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html)，然后重试。

# java - java + JOGL，如何在绘制纹理时设置透明度以显示场景中的对象而不是纯黑色？

> ID：11050578
> 
> 赞同：5
> 
> 时间：2012-06-15T12:23:53.997
> 
> 标签：java, opengl, transparency, jogl, sprite

我们正在编写一个简单的 3D 游戏作为我们在大学学习的课程中的一个项目。（任务是给情侣的）我们必须使用**JOGL**，所以我必须使用这个 API（解决方案，例如：*切换到更高级别的 API，如 java3D*对我没有好处......）无论如何，我们决定的游戏实现是某种3D射击游戏。（到目前为止的代码，它是从我们之前为同一课程所做的分配中提取的，可以在这里找到：[http](http://code.google.com/p/mirzhcode/source/browse/?repo=cgex4) ://code.google.com/p/mirzhcode/source/browse/?repo=cgex4 ）现在我'正在尝试处理“特殊效果”。更准确地说，粒子和精灵（用于射击、爆炸等）我遇到了关于精灵发射器的解释，我想实现：[http ://bit.ly/KrrPM4](http://bit.ly/KrrPM4)

我从看似简单的部分开始。冲击波环，由单个快速增长的精灵组成。当我尝试绘制我制作的图像时，我得到黑色背景而不是我想要的透明度。纹理图像是一个透明的 png 文件（所以有一个 alpha 通道） ![具有 alpha 透明度的冲击波 png 文件](../Images/955f85055f22fda3e36df6679111e65f.png) ，我从中得到的是： ![在此处输入图像描述](../Images/2ed76d46380a215ce2df56597010ddc0.png) 我用来生成这个的代码：

在`init()`方法中：

```
//loading textures
try {
    shockwave = TextureIO.newTexture(new File( "textures/shockwave_128X128.png" ),false);
} catch (GLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

gl.glShadeModel(GL.GL_SMOOTH);
gl.glClearColor(0f, 0f, 0f, 1f);
gl.glClearDepth(1.0);
gl.glEnable(GL.GL_BLEND);
gl.glBlendFunc(GL.GL_SRC_ALPHA, GL.GL_ONE);
gl.glHint(GL.GL_PERSPECTIVE_CORRECTION_HINT, GL.GL_NICEST);
gl.glHint(GL.GL_POINT_SMOOTH_HINT, GL.GL_NICEST);
gl.glEnable(GL.GL_TEXTURE_2D);
gl.glEnable(GL.GL_DEPTH_TEST);

//UNCOMMENT THE FOLLOWING LINE OF CODE
//FOR REALISTIC COLORS. NOTE THAT ICC
//BUTTON WON'T CHANGE THE COLORS ANYMORE.

//gl.glEnable(GL.GL_LIGHTING);

//two (soft) lights (red and blue) setup.
//each in an opposite corner of the room.
float color0[] = {1f, 0f, 0f, 0.5f};
float ambient0[] = {1.0f, 1.0f, 1.0f, 0.5f};
float position0[] = {(float) (0.95*expansionFactor), (float) (0.95*expansionFactor), (float) (0.95*expansionFactor)};

float color1[] = {0f, 0f, 1f, 0.5f};
float ambient1[] = {1.0f, 1.0f, 1.0f, 0.5f};
float position1[] = {(float) (0.95*expansionFactor), (float) (0.95*expansionFactor), (float) (0.95*expansionFactor)};

gl.glLightfv(GL.GL_LIGHT0, GL.GL_AMBIENT, ambient0,1); 
gl.glLightfv(GL.GL_LIGHT0, GL.GL_DIFFUSE,color0 , 1); 
gl.glLightfv(GL.GL_LIGHT0, GL.GL_SPECULAR, color0 , 1); 
gl.glLightfv(GL.GL_LIGHT0, GL.GL_POSITION, position0, 1);

gl.glLightfv(GL.GL_LIGHT1, GL.GL_AMBIENT, ambient1,1); 
gl.glLightfv(GL.GL_LIGHT1, GL.GL_DIFFUSE,color1 , 1); 
gl.glLightfv(GL.GL_LIGHT1, GL.GL_SPECULAR, color1 , 1); 
gl.glLightfv(GL.GL_LIGHT1, GL.GL_POSITION, position1, 1);

gl.glEnable(GL.GL_LIGHT0);
gl.glEnable(GL.GL_LIGHT1);

start(); 
```

还有`display()`方法：

```
gl.glEnable(GL.GL_BLEND);
gl.glClear(GL.GL_COLOR_BUFFER_BIT);
gl.glBlendFunc(GL.GL_SRC_ALPHA, GL.GL_ONE_MINUS_SRC_ALPHA);
shockwave.bind();

gl.glColor4f(1f,1f,1f,1f);

gl.glBegin(GL.GL_QUADS);
gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3d(0.0-10, 0.2, 0.0-10);
gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3d(0.0+10, 0.2, 0.0-10);
gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3d(0.0+10, 0.2, 0.0+10);
gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3d(0.0-10, 0.2, 0.0+10);
gl.glEnd(); 
```

总而言之，我的问题是我如何让纹理使用它的 alpha 通道，如果不是那么简单，有没有你可能知道我可以使用的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:17:29.343

在挖掘了更多之后，我意识到我需要做什么。显然，当您将图像与 openGL 混合时，它会混合到到目前为止渲染的帧中。所以绘画的顺序很重要。我在显示方法的开头渲染了这个图像，我应该把它放在最后。所以无论如何，如果有人想知道如何绘制透明对象，请确保最后绘制它们。如果有许多透明对象，您必须按顺序绘制它。应先绘制离相机较远的位置。 ![修复后](../Images/57d2abc5ddd05a6727609ab81970a9d9.png)

# google-apps-script - Google Apps 脚本的所有权

> ID：11050582
> 
> 赞同：2
> 
> 时间：2012-06-15T12:24:15.993
> 
> 标签：google-apps-script, ownership

我正在开发一个协作 Intranet 站点，但我在 Google 站点中遇到了 Google Apps 脚本的问题。当我开发时，我与我的用户帐户相关联。但是，我编写的所有脚本都将在我的帐户上下文下执行，但我希望我的脚本可以访问另一个帐户的上下文。例如，我编写了一个脚本，可以为您提供 Gmail 中未读邮件的数量。但是此脚本将始终给出作为脚本所有者的帐户的未读邮件数。你可以理解这对我来说是一个严重的问题。

我希望你能帮助我，因为我不知道这是否可能以及我该怎么做。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:56:12.680

嵌入在 Google 站点中的 Google Apps 脚本不可能在脚本所有者之外的任何其他帐户下运行。这是出于 Google 安全考虑而设计的限制。

如果您使用的是自定义域（即 Google Apps for Business）。可以获取查看用户 id，如果您是域管理员，则某些 API 允许域管理员模拟域的任何用户。我不确定GMail是否允许这样做。

但是这个“模拟功能”并没有内置在 Apps Script (IRRC) 中，因此您必须使用 UrlFetch 直接访问这些 API，这更加困难和麻烦。但取决于您的编程技能，这可能很容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:35:06.603

似乎他们在“部署网络应用程序”中添加了此功能，但尚未更新 Google Apps 脚本的 Google 协作平台部分以支持此新功能。请团队中的任何人确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:48:01.307

我相信 user1442074 是正确的。在 Deploy Web App 下有一个选项：

```
 Execute this app as:
 User Accessing the web app
 Users will be asked to Authorize the Script 
```

这样做的好处是他们可以修改自己的文档。缺点是他们无法访问站点管理员创建的任何文档（除非它们是公开的）。

我知道这适用于文档。不确定它是否适用于邮件。

# java - 如何使用 JNI 将结构数组从 C++ dll 返回到 Java Applet？

> ID：11050590
> 
> 赞同：3
> 
> 时间：2012-06-15T12:24:38.583
> 
> 标签：java, c++, dll, applet, java-native-interface

我有一个 C++ dll 类。我想使用 JNI 方法将结构数组返回给 Java Applet。如何从 Java 访问它？

（结构数组包含不同类型的结构）

已经返回一个字符串数组---

```
public native String[] fun();

JNIEXPORT jobjectArray JNICALL Java_fun(JNIEnv* pEnv, jobject Pobj)
{
} 
```

但我不知道如何使用结构数组。

谁能告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:27:13.440

您需要构建与 Java 对象相同的结构。将 C++ 结构中的值复制到 JNI 中的 Java 结构中。返回 Java 结构并将其用作普通 Java 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:40:41.160

Sun at Sun 提供的几个很好的代码示例[：字符串和数组](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jnistring.html#object)

试试看，告诉我们你的进步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:43:26.873

您可以使用[JavaCPP](http://code.google.com/p/javacpp/)，它会为我们生成所有讨厌的 C++ JNI 代码。然后我们只需`Pointer.position()`要从 Java 调用来导航本机结构数组。

# python - 等效于字符串弹出

> ID：11050591
> 
> 赞同：13
> 
> 时间：2012-06-15T12:24:40.883
> 
> 标签：python, string, string-parsing

给定一个非常大的字符串。我想在这样的循环中处理部分字符串：

```
large_string = "foobar..."
while large_string:
    process(large_string.pop(200)) 
```

什么是这样做的好而有效的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T12:29:31.387

您可以将字符串包装在 a `StringIO`or中`BytesIO`并假装它是一个文件。那应该很快。

```
from cStringIO import StringIO
# or, in Py3/Py2.6+:
#from io import BytesIO, StringIO

s = StringIO(large_string)
while True:
    chunk = s.read(200)
    if len(chunk) > 0:
        process(chunk)
    if len(chunk) < 200:
        break 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-15T12:26:40.593

您可以将字符串转换为列表。`list(string)`并弹出它，或者您可以在切片列表的块中迭代，`[]`或者您可以按原样切片字符串并在块中迭代

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T12:29:26.727

你可以用[切片](http://docs.python.org/tutorial/introduction.html#strings)来做到这一点：

```
large_string = "foobar..."
while large_string:
    process(large_string[-200:])
    large_string = large_string[:-200] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-26T22:25:40.360

要跟进 dm03514 的回答，您可以执行以下操作：

```
output = ""
ex = "hello"
exList = list(ex)
exList.pop(2)
for letter in exList:
    output += letter

print output # Prints 'helo' 
```

# r - 从绘图中省略非交易数据（动物园对象）

> ID：11050595
> 
> 赞同：0
> 
> 时间：2012-06-15T09:29:21.190
> 
> 标签：r, time-series, data-visualization

我有一个包含常规交易时间数据的动物园对象。但是，当我尝试绘制它时，我会在情节中遇到中断。

有什么办法可以消除它们吗？

```
 2012-06-01 10:00:00 2012-06-01 10:01:00 2012-06-01 10:02:00 2012-06-01 10:03:00 
          -106.0788           -250.1170           -218.9439           -236.8216 
2012-06-01 10:04:00 2012-06-01 10:05:00 
          -258.8041           -253.7609 
```

# ruby-on-rails-3 - Backbone.js 自定义休息路线

> ID：11050602
> 
> 赞同：0
> 
> 时间：2012-06-15T12:25:24.793
> 
> 标签：ruby-on-rails-3, backbone.js

我是骨干新手，在通过一些教程应用程序后尝试了我的第一个应用程序。

我想知道完成以下任务的最佳方法是什么

在后端（导轨）

我有一个模型名称 Business，它是一个具有很多属性的复杂模型，它有一个关联的地址 ( `has_one :address`)，还有一个头像和另一个个人资料图等等。

从我的前端，我希望能够获取和更新业务资料的特定部分，假设我只想获取包含名称、类别和地址的 basic_info，而不是希望能够更新资料图片和头像。

我在骨干网看到的是模型具有保存、更新、获取、销毁等方法

如果我想要其他方法，例如`fetch_basic_info`, `fetch_profile_picture`,`update_profile_picture`怎么办？针对这些，我希望相应地通知相关视图。

这是我想出的

假设我想获取基本信息

*   `fetch_basci_info`向主干模型添加功能

    *   `$.ajax`在此函数内部使用向服务器发送自定义 ajax 请求
    *   手动触发事件`"basicinfo:fetched"`
*   在我的路由器功能里面

    *   创建模型对象
    *   创建一个新视图让我们说`BasicInfoView`并将模型对象传递给它
    *   在视图内部绑定模型的偶数可以说`model.bind('basicinfo:fetched', this.render)`
    *   路由器初始化时调用`model.fetch_basic_info`（在路由器初始化中）

所以路由器被称为它创建视图绑定一个自定义事件并调用`model.fetch_basic_info()`请求发送到服务器返回响应（我是否手动调用set来设置主干模型的属性）。之后触发自定义事件事件，通知视图并呈现自己

这是我的第一个真正的主干应用程序，所以如果我正在做一些真正不碍事的事情，请阻止我。

您对此有何看法。

感谢您阅读和反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:59:09.353

我的第一个想法是您将复制骨干已经提供的许多功能。我看不出您必须在客户端完全复制您的业务模型的任何理由。为什么不将您的基本信息、个人资料等分解为单独的 Backbone 模型，并根据需要将它们应用到您的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:16:31.953

您尝试做的不是非常 RESTful。如果您尝试这样做以节省资源或网络带宽，那么它几乎可以肯定是过早的优化 - 除非我们谈论成百上千的字段 - 在这种情况下会有更好的解决方案。

事实是，仅获取个人资料图片使用与获取 50-100 个字段几乎相同的资源。是的，数据稍微多一点，但考虑到网络连接中 90% 的工作、延迟、资源和等待时间来自建立连接，您实际上并没有节省那么多。

加上在数据库端，一个

`select * from businesses where id=123`

只使用一点点

`select profilepic from businesses where id=123`

因为工作中最困难的部分是建立与数据库的连接并找到正确的行。在那之后，它只是更多的数据——添加 50 个额外的列将对性能产生不明显的影响。

唯一一次失败是您的模型/表包含数百或数千个属性。在这种情况下，解决方案是将模型拆分为子模型。并通过 REST 单独处理它们。但它们应该是业务逻辑类型。例如，Business 包含 Address、Employee、ShareStructure。

我自己曾经是一个过早的优化器......“当我只需要 1 列时，不能返回 10 列”。但是，如果尝试为您可能需要的各种组合中的每个数据子集编写 Web 服务 API，那么您的 API 实际上将无法使用和维护。你也永远不会完成任何工作。

假设你想从 facebook 的 API 中获取 CocaCola 的头像，你只需调用：

[https://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola)

并获取**图片**属性。谁在乎您是否不需要其余数据？它使事情变得简单、宁静且易于维护。

# c++ - 从 cpp 调用 dll 库

> ID：11050603
> 
> 赞同：0
> 
> 时间：2012-06-15T12:25:28.950
> 
> 标签：c++, dll

с:/catalog 中有三个文件。它们是 lib.dll、conf.ini、libImp.cpp。我在 libImp.cpp 文件中调用 lib.dll “init”函数。为了成功调用“init”函数，conf.ini 必须位于同一目录中。问题是如果我尝试从另一个目录调用 dll 函数，则会出现错误。它说它没有看到conf.ini。例如，如果 libImp.cpp 位于 c:/catalog2，则会出现该错误。响应调用 dll 函数的代码部分：

```
HINSTANCE hGetProcIDDLL = LoadLibrary("c:\\catalog\\lib.dll");
FARPROC lpfnGetProcessID = GetProcAddress(HMODULE (hGetProcIDDLL),"init");
typedef int (__stdcall * pICFUNC)(char *);

pICFUNC init;
init = pICFUNC(lpfnGetProcessID);

bool result = 0;
char user_id[]="user";
result = init(user_id); 
```

如何独立于cpp文件位置进行函数调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:38:57.497

你在混合概念。

.cpp 文件用作编译器的输入，不能自行执行。输入文件`libImp.cpp`是否位于`c:\catalog\`. 编译器输出（我假设是 .EXE？）在哪里结束可能很重要。

.INI 文件的位置由 DLL 中的代码确定。它正在加载 INI 文件，因此它决定在哪里查找 INI 文件。我们无法猜测它在寻找什么。可以使用像 SysInternals ProcMon 这样的工具来监视 DLL 并检查它的位置。

# iphone - iOS首次inapp-purchase必须提交二进制文件进行沙盒测试

> ID：11050605
> 
> 赞同：9
> 
> 时间：2012-06-15T12:25:36.720
> 
> 标签：iphone, ios, app-store-connect, sandbox

我正在工作 inapp-purchase 项目，第一次在新应用程序中创建 inapp-purchase iTunes 在 inapp-purchase 管理链接中显示消息，以显示消息如下

**必须在提交应用版本的同时提交应用的首次应用内购买以供审核。您必须在版本详细信息页面上执行此操作。上传二进制文件并提交您的第一个应用内购买以供审核后，可以使用下表提交其他应用内购买。**

像下面的屏幕截图：

![在此处输入图像描述](../Images/2ed12a9216f7d391e44ce7583a808015.png)

**我想用设备上的测试用户测试沙盒环境，商店套件返回没有可用的产品！**

单击以查看应用程序详细信息在屏幕截图下方显示警告消息：

![在此处输入图像描述](../Images/59bdea7ffe2e38083a2b1e9044222cec.png)

我想测试沙盒（inapppurchase）到设备怎么做？

我的应用程序没有上传二进制详细信息，我想测试它！

请.......，帮帮我重要的......！

谢谢...！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:22:42.287

绝对不上传二进制文件！！！

这是一个都市传说，但对于 Apple 官方文档来说相当危险：http: [//developer.apple.com/library/ios/#technotes/tn2259/_index.html](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)

重要提示：在应用程序准备好接受 App Review 批准之前，请勿将开发二进制文件上传到 iTunes Connect。如果二进制文件存在于 iTunes Connect 中且功能不完整，App Review 将审查二进制文件并可能拒绝开发二进制文件。如果您或 App Review 在 iTunes Connect 中拒绝您最近的二进制文件，则测试应用内购买将失败。在这种情况下，解决方法是上传一个没有应用内购买功能的二进制文件，该功能可以得到应用审查的批准。二进制文件获得批准后，继续使用应用内购买功能测试二进制文件。

您的问题的解决方案：您的问题是您将流程比 Apple 建议的步骤更进一步，并上传了应用内购买的图片，所以它在

“准备提交”

状态（请参阅您的插图）不正确（不要问为什么或寻找任何理性，我用它杀死了几个小时）您的应用内必须在

“等待截图”

因此，您必须创建一个具有不同名称的新名称 - 即使您删除了较早的名称 - 并将其保持在“等待屏幕截图”状态，它会立即生效。还有一个经验数据：即使没有任何错误消息或指示您不应该使用大写字母，也不要使用大写字母作为产品 ID。这个文档告诉了你需要知道的一切，但根据我几年的实践，这个过程是一种“技术巫术”，没有人能说出它是如何以及为什么起作用的。继续尝试，不知怎的，它终于奏效了……

> **UPDATE 2015** Apple 修复了这个过程，现在它甚至在“准备提交”阶段也能正常工作，所以如果不小心上传了图片（名为：Screenshot for Review），但所有其他语句都有效，您无需重新启动该过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T12:37:36.557

您只需上传一个二进制文件，然后自己拒绝它，就足够了。

**2017 年更新**我刚刚看到对这个 5 岁的答案的反对意见。从那时起，情况发生了很大变化，尤其是在（测试）IAP 和 beta 版本方面。我最近无法验证此上传和拒绝步骤是否仍然有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:56:43.273

遵循[本](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)教程，它将起作用。正如@mvds 所说，您必须上传一个二进制文件（任何二进制文件）然后拒绝它。之后，您将能够根据需要使用沙盒环境。

# c - 在 yacc/lex 中调用 YYACCEPT 之前清除缓冲区

> ID：11050607
> 
> 赞同：0
> 
> 时间：2012-06-15T12:25:43.513
> 
> 标签：c, parsing, yacc, lex, lexer

有没有办法在调用之前清除解析器`YYACCEPT`缓冲区`yacc`。

如果我不清除缓冲区，当我`yyparse`第二次调用时会导致一些问题。

另请注意，我正在使用一些全局变量，因此不能使用可重入解析器。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:41:36.850

肯定有。请参阅flex 手册的[这一部分](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html#Multiple-Input-Buffers)。具体来说，在调用`YY_FLUSH_BUFFER`之前调用`yyparse`。

# hibernate - 使用 SINGLE_TABLE 的 JPA 继承 - 鉴别器值与类不匹配

> ID：11050608
> 
> 赞同：1
> 
> 时间：2012-06-15T12:25:50.347
> 
> 标签：hibernate, jakarta-ee, jpa

使用单个表的 JPA 类层次结构有一个奇怪的行为。基本上我有两个实体 EntityMapA 和 EntityMapB，它们都扩展了 EntityMap。鉴别器值为“ENTITY_TYPE”，EntityMapA 为 A，EntityMapB 为 B。不知何故，我得到了 EntityMapA 类型的对象，其中鉴别器值设置为“B”！

我使用 Hibernate 3.3 作为 JPA 提供程序。

这是代码：

```
@Entity
@Table(name="ENTITY_MAP")
@DiscriminatorColumn(name = "ENTITY_TYPE")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
public class EntityMap implements Serializable {

    /**
     *
     */
    private static final long serialVersionUID = 1L;
    private Long entityMapId;

    //This is a ID of another entity we map to. It is a different entity type depending on 
    //The subclass. For EntityMapA it would map to EntityA and for EntityMapB it would map   
    // to EntityB
    private Long entityId;

    private String discriminator;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "ENTITY_MAP_ID", unique = true, nullable = false)
    public Long getEntityMapId() {
        return entityMapId;
    }
    public void setEntityMapId(Long EntityMapId) {
        this.entityMapId = entityMapId;
    }

    @Column(name="ENTITY_TYPE",insertable=false,updatable=false)
    public String getDiscriminator() {
        return discriminator;
    }
    public void setDiscriminator(String discriminator) {
        this.discriminator = discriminator;
    }

    @Column(name="ENTITY_ID",insertable=false,updatable=false)
    public Long getEntityId() {
        return entityId;
    }
    public void setEntityId(Long entityId) {
        this.entityId = entityId;
    }

    //there are other common fields in here which are left out    
}

@Entity
@DiscriminatorValue("A")
public class EntityMapA extends EntityMap {

    /**
     *
     */
    private static final long serialVersionUID = -8709307036005000705L;

    private EntityA entityA;

    public static final String DISCRIMINATOR = "A";

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ENTITY_ID", nullable = false)
    @NotNull
    public EntityA getEntityA() {
        return entityA;
    }

    public void setEntityA(EntityA entityA) {
        this.entityA = entityA;
    }

}

@Entity
@DiscriminatorValue("B")
public class EntityMapB extends EntityMap {

    /**
     *
     */
    private static final long serialVersionUID = -8709307036005000705L;

    public static final String DISCRIMINATOR = "B";

    private EntityB entityB;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ENTITY_ID", nullable = false)
    @NotNull
    public EntityB getEntityB() {
        return entityB;
    }

    public void setEntityB(EntityB entityB) {
        this.entityB = entityB;
    }
} 
```

最后我在EntityA中有一个映射：

```
 @OneToMany(cascade=CascadeType.ALL,fetch = FetchType.LAZY, mappedBy = "entityA")
    public List<EntityMapA> getEntityMaps() {
        return entityMaps;
    }

    public void setEntityMaps(List<EntityMapA> entityMaps) {
        this.entityMaps = entityMaps;
    } 
```

现在我有一个 ENTITY_MAP 行，其中 ENTITY_TYPE = "B" 和 ENTITY_ID = "12345" 有一个 ID 为 "12345" 的 EntityA 和一个 ID 为 "12345" 的 EntityB。

现在，当我加载 ID 为“12345”的 EntityA 时，在 EntityMapA 类型的 getEntityMaps() 中有一个条目，但该 EntityMapA 上的鉴别器值为“B”。

这里出了什么问题？为什么带有鉴别器“B”的行映射到 EntityMapA 实体？

是因为我在父类上将 EntityId 映射两次（一次使用 @Column(name="ENTITY_TYPE",insertable=false,updatable=false），然后再将每个 JoinColumn 映射到实际实体？

**更新** 顺便说一句，EntityA 集合中列出的 EntityMapA 从未真正创建。当您尝试加载实体时，您会收到一个异常，告诉您该实体不存在。所以对我来说看起来像是 Hibernate 中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:55:29.917

问题是您使用同一列来映射两个不同的关联。AFAIK，这是不支持的。

这实际上是一件好事，因为使用两个单独的列来引用不同的东西要干净得多。例如，它允许在这些列上定义 FK 约束，这在您当前的解决方案中是不可能的，因为该列根据行包含 EntityA 或 EntityB 的 ID。

# javascript - Javascript onfocus 不支持“事件”作为参数？

> ID：11050609
> 
> 赞同：0
> 
> 时间：2012-06-15T12:25:55.720
> 
> 标签：javascript, html

当我单击或关注某些 html 元素时，我想在浏览器中获取光标的当前**X**和**Y位置。**当我这样做时，`onclick`它起作用了。但是`onfocus`没有。请看下面的例子..

工作代码

```
<html>
<head>
    <title>Untitled</title>
    <script type="text/javascript">
<!--
function findXCoord(evt) {
    if (evt.x)  return evt.x; 
    if (evt.pageX) return evt.pageX; 
}

function findYCoord(evt) {
    if (evt.y) return evt.y; 
    if (evt.pageY) return evt.pageY; 
}
//-->
</script>
</head>

<body>
<a onclick="alert('The x coordinate is: ' + findXCoord(event) + ' and the y coordinate is: ' + findYCoord(event));">Hi</a>
</body> 
```

但是当我将**onclick 更改为 onfocus**时，它没有显示 x,y 位置

（onclick="alert.... 到 onfocus="alert........）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:40:38.203

“onfocus”不是鼠标事件，您只能从鼠标事件中获取鼠标位置。

如果你真的需要，你可以使用“onmouseover”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:33:52.213

我认为您忘记放置 href 标记，尽管它不会返回您的坐标，但 ie 但它会触发事件[http://jsbin.com/irexog/edit#preview](http://jsbin.com/irexog/edit#preview)工作解决方案。

并且 ya onfocus 得到了主播的支持。

您需要像[这样修改特定于浏览器的事件处理](http://www.quirksmode.org/js/events_properties.html)

# sql - LINQ to SQL 中的错误：指定的转换无效

> ID：11050614
> 
> 赞同：5
> 
> 时间：2012-06-15T12:26:41.180
> 
> 标签：sql, linq

嗨，我正在尝试学习 LINQ，在 LINQ to SQL 中，我遇到了以下异常：这是来自 Manning 出版物的 Linq In Action 的示例代码。怎么了？

```
 DataContext db = new DataContext("E:\\Mahesh\\TempFolder\\DB\\NORTHWND.MDF");

        var contacts =
            from contact in db.GetTable<Contact>()
            where contact.City == "Paris"
            select contact;

        foreach (Contact aContact in contacts)
            Console.WriteLine("Bonjour " + aContact.Name);
        Console.Read();
    }
}

[Table(Name = "Customers")]
class Contact
{
    [Column(IsPrimaryKey = true)]
    public int CustomerID { get; set; }
    [Column(Name = "ContactName")]
    public string Name { get; set; }
    [Column]
    public string City { get; set; }
} 
```

![错误](../Images/37a41a495cedc3f15b0188fb38f37e87.png)

异常详情：

```
System.InvalidCastException was unhandled
HResult=-2147467262
Message=Specified cast is not valid.
Source=System.Data
StackTrace:
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at Read_Contact(ObjectMaterializer`1 )
   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()
   at LinqDemo.Program.Main(String[] args) in c:\Users\MAHESH\Desktop\TechNode\C#\MyTechDos\LinqDemo\LinqDemo\Program.cs:line 51
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()
InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:24:17.090

如果我没记错的话，Northwind 中的 Customers 表没有 CustomerID 作为 int（我认为它是 NVARCHAR）。如果您手动编写 Contact 类，而不是让 LINQ to SQL 生成它，请确保您的类中的类型与数据库表中的类型相匹配

编辑：从这个链接[http://msdn.microsoft.com/en-us/library/bb399575(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb399575(v=vs.90).aspx)我倾向于认为 CustomerID 字段不是 INT 而是 NVARCHAR （或 NCHAR 就此而言)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-25T13:38:13.873

当我尝试使用**Linq to Sql**时，我遇到了同样的问题。由于我的存储过程使用了临时表（Linq to Sql 工具不会为临时表创建类）。所以我必须创建自己的自定义类。发生了同样的异常。

> StackTrace：在 System.Data.SqlClient.SqlBuffer.get_Int32() 在 Read_Contact(ObjectMaterializer `1 ) at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()

发生此错误是因为我试图将我的**小型 int** DB 类型变量转换为**int** C# 变量。如果其他人经历相同的情况，请参阅[此处](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql-server-data-type-mappings)的官方 Microsoft 文档以了解 DB 类型到 C# 类型的映射。

注意：如果您遇到 Specified Cast not valid 问题，请确保您的数据类型正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T10:27:32.707

**圣牛……这对我来说是个杀手。**

实际上，这对我来说是一个 SQL 排序问题，因为我在 LINQ-to-SQL 中有一个名为 的字段`Dataarea`，但在我的 SQL 视图中，这个字段被称为`DataArea`。区域中的大写 A 是问题所在。

通常 SQL 对字段名称不区分大小写，但如果您的 SQL 排序规则是丹麦挪威语，那么这确实有效，并且我得到“指定的强制转换无效”。

**奇怪的错误。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-04T07:49:16.807

实际上，在将表导入模型后，我在 DB 中更改了变量的数据类型之一，但没有在模型中进行更改。最好从模型中删除您的表并重新生成它。

# regex - 使用 Regex 正则表达式，我如何排除链接中的某些内容

> ID：11050616
> 
> 赞同：0
> 
> 时间：2012-06-15T12:26:52.593
> 
> 标签：regex, vb.net

继我之前发表的一篇文章之后，我在我需要的方面取得了进展，但对 RegEx 表达式的工作原理知之甚少，我被困住了！

这一行：

```
FilesM = Regex.Matches(StrFile, "<link.*?href=""(.*?)"".*? />") 
```

正在从我的页面的 HTML 中提取所有`<link..`元素以编译一个组合`style`文件。

但是，我需要排除任何`media="print"`链接。

我也在尝试结合 JS 脚本

```
FilesM1 = Regex.Matches(StrFile, "<script.*?src=""(.*?)"".*?></script>") 
```

这样做，但在这种情况下，我想排除任何不在本地托管的脚本。我想通过排除`href`以“http”开头的任何脚本来做到这一点

那么如何从匹配集合中排除这两种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:00:10.233

我知道这不是您正在寻找的，但是，如果您有兴趣，这里有一个示例，说明如何使用 XPath 找到您关心的元素：

```
Dim doc As New XmlDocument()
doc.LoadXml(html)
Dim linkNodes As XmlNodeList = doc.SelectNodes("descendant-or-self::link[(@href) and (not(@media) or (@media != 'print'))]")
Dim scriptNodes As XmlNodeList = doc.SelectNodes("descendant-or-self::script[(@src) and (not(starts-with(@src,'http')))]") 
```

该`XmlDocument.SelectNodes`方法返回与给定 XPath 匹配的所有元素。

在 XPath 字符串中，`descendant-or-self::`意味着您希望它搜索从当前位置（根）到所有后代的所有元素以查找以下元素名称。如果忽略它，它只会在当前（根）级别查找匹配的元素。

`[]`条款提供条件。因此，例如，`link[@media != 'print']`将匹配所有不具有等于“打印”的媒体属性的链接元素。@ 符号指定属性名称。

简单地在条件中单独列出属性名称意味着您正在检查该属性是否存在。例如，`link[@href]`匹配所有具有`href`属性的链接元素。

# php - 使用 facebook api 在 android 应用程序中存储/检索数据的正确方法

> ID：11050618
> 
> 赞同：1
> 
> 时间：2012-06-15T12:26:54.987
> 
> 标签：php, android, mysql, facebook

我正在我的 android 应用程序上实现 facebook 身份验证/检索用户信息。我已经有一个带有用户表的数据库。他们可以使用用户名/密码登录。

好的，现在我希望他们能够使用 facebook 连接到我的应用程序，而无需从我的应用程序注册（这应该是可能的）。

从 facebook 检索用户信息后，如何将这些信息存储在我的数据库中，更准确地说，如何检索这些信息？我读到您应该使用 facebook 提供的唯一 ID 获得这些。我在这里有一个问题，如果我的 php 文件只用一个 id 询问用户信息，我怎样才能防止一些坏人检索他们想要的关于我的用户的一切？

任何人都可以这样做：

```
www.some_url.com/get_user_info_from_fb_id.php?user_id=whatever_id 
```

并掌握私人数据？我错了吗？

另一个问题，当我使用 facebook api 存储用户数据时，我应该将它们存储在不同的 mysql 用户表中，比如“fb_users”，还是应该将它们存储在我已经存在的用户表中并添加一个字段“fb_id”？

# iphone - 在 iPhone iOS 上堆叠多个透明图像

> ID：11050626
> 
> 赞同：3
> 
> 时间：2012-06-15T12:27:19.763
> 
> 标签：iphone, ios, xcode, uiimageview

我正在写一个指南针，它应该根据`CLLocation`课程旋转指南针图像。

在该指南针的顶部，我想显示一个箭头，该箭头应指向与指南针不同的方向。为了实现这一点，我认为我可以将多个图像一个接一个地堆叠并让它们独立旋转。**箭头图像应该是透明的。**

**如何堆叠这些图像并独立旋转它们？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:31:22.637

将每个图像放在它自己的`UIImageView`位置，然后在其上添加一个 alpha`UIImageView`

例如，

```
UIImageView *arrow1 = [[UIImageView alloc] init];
arrow1.frame = self.ArrowContainerView.bounds;
[self.ArrowContainerView addSubView:arrow1];
//Add alpha
arrow1.alpha = .7;

//adding another arrow
UIImageView *arro21 = [[UIImageView alloc] init];
arrow2.frame = self.ArrowContainerView.bounds;
[self.ArrowContainerView addSubView:arrow2];
//Add alpha
arrow2.alpha = .7;

//Rotating arrow 1
arrow1.transform = CGAffineTransformMakeRotation(-1.142);
//Rotating arrow 2
arrow2.transform = CGAffineTransformMakeRotation(-3.142); 
```

# android - 带有 Android 的 KSoap 2 引发“未知属性：”异常。我只能接收或发送复杂对象

> ID：11050629
> 
> 赞同：1
> 
> 时间：2012-06-15T12:27:31.083
> 
> 标签：android, exception, object, ksoap2

我正在尝试修改和发送复杂的对象到我的网络服务/从我的网络服务，但我的问题是，我只能接收或发送，没有任何例外。

代码基于本[教程的示例](http://seesharpgears.blogspot.de/2010/10/ksoap-android-web-service-tutorial-with.html)

这是我在 Tomcat7 上运行的 Java Webservice：

```
public class HelloWorldWS
{   
    public Category GetSumOfTwoInts(Category C )
    {
        Category back= new Category();
        back.setCategoryId(112);
        back.setDescription("server");
        back.setName("myNameFromServer");

        System.out.println("For testing only: " + C.getCategoryId() + C.getDescription());

        return back;
    }
} 
```

这是生成的 WSDL 文件：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns1="http://org.apache.axis2/xsd" xmlns:ns="http://WS.androidroleplay.fk4.de.hs_bremen.de" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ax21="http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://WS.androidroleplay.fk4.de.hs_bremen.de">
<wsdl:documentation>Please Type your service description here</wsdl:documentation>
<wsdl:types>
<xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd">
<xs:complexType name="Category">
<xs:sequence>
<xs:element minOccurs="0" name="categoryId" type="xs:int"/>
<xs:element minOccurs="0" name="description" nillable="true" type="xs:string"/>
<xs:element minOccurs="0" name="name" nillable="true" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:schema>
<xs:schema xmlns:ax22="http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://WS.androidroleplay.fk4.de.hs_bremen.de">
<xs:import namespace="http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd"/>
<xs:element name="GetSumOfTwoInts">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="C" nillable="true" type="ax21:Category"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="GetSumOfTwoIntsResponse">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="return" nillable="true" type="ax21:Category"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema>
</wsdl:types>
<wsdl:message name="GetSumOfTwoIntsRequest">
<wsdl:part name="parameters" element="ns:GetSumOfTwoInts"/>
</wsdl:message>
<wsdl:message name="GetSumOfTwoIntsResponse">
<wsdl:part name="parameters" element="ns:GetSumOfTwoIntsResponse"/>
</wsdl:message>
<wsdl:portType name="HelloWorldWSPortType">
<wsdl:operation name="GetSumOfTwoInts">
<wsdl:input message="ns:GetSumOfTwoIntsRequest" wsaw:Action="urn:GetSumOfTwoInts"/>
<wsdl:output message="ns:GetSumOfTwoIntsResponse" wsaw:Action="urn:GetSumOfTwoIntsResponse"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="HelloWorldWSSoap11Binding" type="ns:HelloWorldWSPortType">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="GetSumOfTwoInts">
<soap:operation soapAction="urn:GetSumOfTwoInts" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="HelloWorldWSSoap12Binding" type="ns:HelloWorldWSPortType">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="GetSumOfTwoInts">
<soap12:operation soapAction="urn:GetSumOfTwoInts" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="HelloWorldWSHttpBinding" type="ns:HelloWorldWSPortType">
<http:binding verb="POST"/>
<wsdl:operation name="GetSumOfTwoInts">
<http:operation location="GetSumOfTwoInts"/>
<wsdl:input>
<mime:content type="text/xml" part="parameters"/>
</wsdl:input>
<wsdl:output>
<mime:content type="text/xml" part="parameters"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="HelloWorldWS">
<wsdl:port name="HelloWorldWSHttpSoap11Endpoint" binding="ns:HelloWorldWSSoap11Binding">
<soap:address location="http://localhost:8080/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpSoap11Endpoint/"/>
</wsdl:port>
<wsdl:port name="HelloWorldWSHttpsSoap11Endpoint" binding="ns:HelloWorldWSSoap11Binding">
<soap:address location="https://localhost:8443/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpsSoap11Endpoint/"/>
</wsdl:port>
<wsdl:port name="HelloWorldWSHttpsSoap12Endpoint" binding="ns:HelloWorldWSSoap12Binding">
<soap12:address location="https://localhost:8443/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpsSoap12Endpoint/"/>
</wsdl:port>
<wsdl:port name="HelloWorldWSHttpSoap12Endpoint" binding="ns:HelloWorldWSSoap12Binding">
<soap12:address location="http://localhost:8080/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpSoap12Endpoint/"/>
</wsdl:port>
<wsdl:port name="HelloWorldWSHttpEndpoint" binding="ns:HelloWorldWSHttpBinding">
<http:address location="http://localhost:8080/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpEndpoint/"/>
</wsdl:port>
<wsdl:port name="HelloWorldWSHttpsEndpoint" binding="ns:HelloWorldWSHttpBinding">
<http:address location="https://localhost:8443/WebProject_DB16/services/HelloWorldWS.HelloWorldWSHttpsEndpoint/"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

这是我的 Android 应用程序：

```
public class WSClientActivity extends Activity {

    private TextView tv;
    private Button bt;
    private EditText et;

    private static final String SOAP_ACTION = "http://WS.androidroleplay.fk4.de.hs_bremen.de/GetSumOfTwoInts";
    private static final String METHOD_NAME = "GetSumOfTwoInts";
    private static final String NAMESPACE = "http://WS.androidroleplay.fk4.de.hs_bremen.de";
    private static final String NAMESPACE2 = "http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd";
    private static final String URL = "http://192.168.178.28:8080/WebProject_DB16/services/HelloWorldWS?wsdl";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
        /*
         * Create Category with Id to be passed as an argument
         * 
         * */
        Category C = new Category();
        C.setCategoryId(1);
        C.setDescription("Client Desc");
        C.setName("Client Name"); 

        /*
         * Set the category to be the argument of the web service method
         * 
         * */

        PropertyInfo objekt = new PropertyInfo();
        objekt.setName("C");
        objekt.setValue(C);
        objekt.setType(C.getClass());
        objekt.setNamespace(NAMESPACE2);

        Request.addProperty(objekt);

        /*
         * Set the web service envelope
         * 
         * */
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(Request);

        envelope.addMapping(NAMESPACE2, "Category",new Category().getClass());

//        envelope.avoidExceptionForUnknownProperty=true;

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        /*
         * Call the web service and retrieve result ... how luvly <3
         * 
         * */
        try
        {
            List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
            headerList.add(new HeaderProperty("Authorization", "Basic " + org.kobjects.base64.Base64.encode("tomcat:tomcat".getBytes()))); // "username:password"

            androidHttpTransport.call(SOAP_ACTION, envelope, headerList);
            SoapObject response = (SoapObject)envelope.getResponse();
            C.setCategoryId(Integer.parseInt(response.getProperty(0).toString()));
            C.setName(response.getProperty(1).toString());
            C.setDescription(response.getProperty(2).toString());

            TextView tv = (TextView)findViewById(R.id.texthallo);
            tv.setText("CategoryId: " +C.getCategoryId() + " Name: " + C.getName() + " Description: " + C.getDescription()); //"CategoryId: " +C.getCategoryId() + " Name: " + C.getName() + " Description: " + C.getDescription()
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

如果我启动应用程序，我会得到这个异常：

```
W/System.err(783): java.lang.RuntimeException: Unknown Property: categoryId 
```

如果我将其注释掉，我可以收到复杂的对象：

```
PropertyInfo objekt = new PropertyInfo();
        objekt.setName("C");
        objekt.setValue(C);
        objekt.setType(C.getClass());
        objekt.setNamespace(NAMESPACE2);

        Request.addProperty(objekt); 
```

还有这个：

```
envelope.addMapping(NAMESPACE2, "Category",new Category().getClass()); 
```

**

> 或者

**

如果我将其注释掉，我可以发送复杂对象：

```
SoapObject response = (SoapObject)envelope.getResponse();
            C.setCategoryId(Integer.parseInt(response.getProperty(0).toString()));
            C.setName(response.getProperty(1).toString());
            C.setDescription(response.getProperty(2).toString()); 
```

但如果我想要两者，我会得到已经命名的异常。

我想问题可能是，我使用了两个不同的命名空间（`NAMESPACE`和`NAMESPACE2`），但如果我只使用`NAMESPACE`我的网络服务，就会出现这个异常：

```
[ERROR] Exception occurred while trying to invoke service method GetSumOfTwoInts
org.apache.axis2.AxisFault: Unknow type {http://WS.androidroleplay.fk4.de.hs_bremen.de}Category
    at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:349) 
```

或者如果我只使用 NAMESPACE2 我得到这个异常：

```
[ERROR] Exception occurred while trying to invoke service method GetSumOfTwoInts
org.apache.axis2.AxisFault: namespace mismatch require http://WS.androidroleplay.fk4.de.hs_bremen.de found http://WS.androidroleplay.fk4.de.hs_bremen.de/xsd 
```

编辑：

如果我想发送一个复杂的对象并接收一个像 or 这样的“正常”对象，`String`或者`int`如果我发送一个正常的对象并接收一个复杂的对象，它就可以工作。

但是如果我想发送和修改一个复杂的对象，我会遇到麻烦...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:35:04.027

正如我之前评论过你的，

```
W/System.err(783): java.lang.RuntimeException: Unknown Property: categoryId 
```

异常是因为您在 Category 类中的成员变量必须是小写的。

并尝试这个发送和接收复杂的对象：

```
 SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
    Category C = new Category();
    C.setCategoryId(1);
    C.setDescription("Client Desc");
    C.setName("Client Name"); 

    Request.addProperty(C.getClass().getSimpleName(), C);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Request);
    envelope.addMapping(NAMESPACE2, C.getClass().getSimpleName(), C.getClass());

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    Category ans = null;
    try {
        androidHttpTransport.call(NAMESPACE + METHOD_NAME, envelope);
        ans = (Category)envelope.getResponse();
        tv.setText("CategoryId: " + ans.getCategoryId() + " Name: " + ans.getName() + " Description: " + ans.getDescription()); 
    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:16:14.020

在我的情况下 *SoapSerializationEnvelope*类包含方法**readSerializable** (XmlPullParser parser, KvmSerializable obj)，有以下条件

> .. name.equals(info.name) && parser.getNamespace().equals(info.namespace) ..

所以我检查了我的*DataType*的类，发现方法**getPropertyInfo**将不正确的*命名空间*放入了 Property。

所以***属性*****的命名空间必须*与解析器*****的命名空间相同。**

# javascript - 将 eval() 与自定义全局一起使用

> ID：11050630
> 
> 赞同：6
> 
> 时间：2012-06-15T12:27:34.870
> 
> 标签：javascript, eval, global

有没有办法在调用时指定用于**全局**`eval()`的对象？

（我不是在问如何进行全局 eval()。）

这不起作用，但这说明了我想要的：

```
var pseudoGlobal = {};
eval("x = 12", pseudoGlobal);
pseudoGlobal.x; // 12 
```

关键是真正的全局绑定不受代码 eval() 中的隐式变量声明（即没有**var关键字）的影响。**

至于`eval.call(pseudoGlobal, "x=12")`or `eval.apply(pseudoGlobal, ["x=12"])`，有些口译员是不允许的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:01:10.320

当然，您可以用默认对象代替*分配*属性值，例如

```
with (pseudoGlobal) eval("x=12") 
```

但不是为了*创建*一个属性。如果在当前的执行上下文堆栈中找不到某个属性，则会在全局对象中创建它。这里的所有都是它的。你也可以尝试一些奇怪的事情：

```
//global code
var globalvars = {};
for (i in this)
    globalvars[i] = null;
with (pseudoGlobal) 
    eval("x=12")
for (i in this)
    if (!(i in globalvars))
{
    pseudoGlobal[i] = this[i];
    delete this[i];
} 
```

如果您关心全局绑定，请尝试：

```
var globalvars = {};
for (i in this)
    globalvars[i] = this[i];
with (globalvars) 
    eval("x=12") 
```

这样绑定将在 globalvars 中更改。请注意，浅拷贝只会阻止一个级别的 bingings 改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:43:20.847

**没有内置的方法可以做到这一点。**

想到了两种解决方案：

*   `eval`在ed 代码中为所有分配添加前缀。即，`x = 12`您将不得不做类似的事情，而不是`o.x = 12`.
*   编写您自己的 Javascript 解释器，将脚本沙箱化并返回一个包含所有已分配变量的对象。

# java - JRE/fontconfig 默认排除范围。无法显示某些 Unicode 字符

> ID：11050632
> 
> 赞同：2
> 
> 时间：2012-06-15T12:27:51.227
> 
> 标签：java, fontconfig

我试图在 a 中显示 Unicode 字符`\u1e41`（带点的 m）`JLabel`，结果是一个小方块，表示该字符无法显示。在其他默认的 Windows 应用程序（记事本等）中，这是可能的。我发现该字符在我所有的 JRE 安装（文件`fontconfig.properties.src`）中都在第一个排除范围内：

```
exclusion.alphabetic=0700-1e9f,1f00-20ab,20ad-f8ff 
```

我将此行更改为：exclusion.alphabetic=0700-1e40,1e42-1e9f,1f00-20ab,20ad-f8ff

并将文件重命名`fontconfig.properties.src`为`fontconfig.properties`. 这使我的应用程序能够显示此字符。现在，我想知道：

1.  为什么默认情况下排除此范围？
2.  有什么方法可以在不更改 JRE 的情况下显示此字符，或者我可以通过编程方式更改此设置吗？
3.  如果 2 不可能，像我一样设置 fontconfig 文件是否危险？我问这个，因为我认为 fontconfig 文件可能包含对我的应用程序有副作用的设置。或者该文件是否始终包含 JRE 的默认设置（因此，如果我在不修改的情况下重命名文件，它不会有任何影响）？

以供参考...

*   机器：Windows 7 64 位
*   JRE 版本：1.7.0、1.6.0_25、1.6.0._25 / 所有 32 位

# html - CSS中的媒体查询

> ID：11050633
> 
> 赞同：1
> 
> 时间：2012-06-15T12:27:56.093
> 
> 标签：html, css, media-queries

如何仅为 1024px 宽度编写媒体查询？

这是我现有的 css，我为 320px 宽度和更多

```
@media (min-width: 320px) {

} 
```

只有 1024px 宽度的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:28:18.790

我相信你想要这个：

```
@media (min-width: 320px) and (max-width: 1023px) {
    /* styles for width > 320px but < 1023px */
}

@media (min-width: 1024px) {
 /* styles for width > 1024px only */
} 
```

这样您就不必覆盖任何样式。

否则你可以这样做：

```
@media (min-width: 320px) {
    /* styles for width > 320px - applied to width > 1024px too */
}

@media (min-width: 1024px) {
 /* styles for width > 1024px only */
} 
```

这与您在需要时必须覆盖您的第一个媒体查询样式的方式不同，在第二个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:42:58.847

我想如果你*只*想要 1024，而不是 1023 或更少，或者 1025 或更多，你可以这样做

```
@media (width: 1024px) {
    ....
 } 
```

最小/最大前缀是可选的。[请参阅上面的 w3 条目](http://www.w3.org/TR/css3-mediaqueries/#width)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:35:16.587

像这样写：

```
@media (max-width:1024px) {
 body{..}

} 
```

检查这个[http://jsfiddle.net/YhsSK/](http://jsfiddle.net/YhsSK/)

# database - 截断和级联有什么区别？

> ID：11050636
> 
> 赞同：1
> 
> 时间：2012-06-15T12:28:01.977
> 
> 标签：database

我想知道 SQL 中截断和级联之间的确切区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:42:30.863

`TRUNCATE`基本上意味着“空”。例如，您可以在上厕所时截断结肠。如果您想维护您的表但要删除其中的所有数据，请使用此选项。

`TRUNCATE TABLE students`-> 删除 STUDENTS 表中的所有数据。

例如，这对于测试数据库很方便。

`CASCADE`在删除记录或表格时使用，基本上表示“以及附加到它的所有内容”。这可能很难使用。例如，如果您要删除您的 PC，您仍将拥有 3 台显示器、鼠标、键盘和出色的音响系统。但是，如果您将级联删除您的 PC，您也将丢失连接到 PC 的所有内容。只剩下你的桌子和椅子。

`CASCADE DELETE FROM STUDENTS WHERE name = 'John'`-> 从 STUDENTS 表中删除所有“John”，以及属于“John”的任何其他表中的数据。

一定要知道在 CASCADE DELETE 删除某些东西时会删除什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:34:44.367

**级联参照完整性**约束允许您定义当用户尝试删除或更新现有外键指向的键时应发生的操作。

常见的观察动作

1.  无操作：这是默认行为。No Action 指定如果尝试删除或更新具有其他表中现有行中的外键引用的键的行，则会引发错误并回滚 DELETE 或 UPDATE。

2.  Cascade：指定如果尝试删除或更新具有由其他表中现有行中的外键引用的键的行，则包含这些外键的所有行也将被删除或更新。

3.  Set NULL: Specifies that if an attempt is made to delete or update a row with a key referenced by foreign keys in existing rows in other tables, all rows containing those foreign keys are set to NULL.

4.  Set Default: Specifies that if an attempt is made to delete or update a row with a key referenced by foreign keys in existing rows in other tables, all rows containing those foreign keys are set to default values.

**Truncate::** TRUNCATE normally deletes off all rows from a table and unlike a DELETE it cannot be rolled back.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:36:21.077

你能详细说明一下吗？

截断在逻辑上等同`DELETE FROM Table;`于它删除给定表中的每个现有元组。它是不同的，因为它绕过了几个完整性检查（取决于我相信的数据库风格）。它也无法回滚。

如果您确定要消除表中的每个项目，`TRUNCATE`还具有重置`auto increment`列上的任何值的优势，`delete from Table`这将在您的自动递增值中留下间隙。

Cascade 允许您定义以影响参照完整性（通常是外键）的方式更新或删除元组的操作的行为。

# android - 无法解析 xml 中的 ID

> ID：11050640
> 
> 赞同：0
> 
> 时间：2012-06-15T12:28:25.670
> 
> 标签：android, android-relativelayout, android-xml

我正在尝试`RelativeLayout`启动并运行，所以我可以将它用于自定义列表，但是当我尝试将项目与彼此进行比较时，它会搞砸并说：

> 无法解析资源@id/itemName
> 无法解析资源@id/textPriceFrom

这很奇怪，因为`textPriceFrom`位置正确，但价格却没有。

这是代码：

```
 <RelativeLayout
        android:id="@+id/mainlayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

    <TextView
        android:id="@+id/itemName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="3dip"
        android:text="A good day"
        android:textSize="23dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textPriceFrom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/itemName"
        android:layout_margin="3dip"
        android:text="@string/frapris"
        android:textSize="15dip"
        android:textStyle="normal" />

    <TextView
        android:id="@+id/textPrice"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="3dip"
        android:layout_toLeftOf="@id/textPriceFrom"
        android:text="145,95"
        android:textSize="10dip"
        android:textStyle="normal" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_margin="3dip"
        android:src="@drawable/ic_launcher" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:46:28.267

我`android:layout_width="fill_parent"`没有为左/右关闭腾出空间，这显然犯了那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:29:27.710

尝试使用 `@+id/textPriceFrom`而不是 `@id/textPriceFrom`.

我真的很抱歉我没有解释原因。但这就是它对我有用的方式。

# java - JNDI 无效名称异常

> ID：11050641
> 
> 赞同：0
> 
> 时间：2012-06-15T12:28:26.447
> 
> 标签：java, active-directory, ldap, jndi

从我的活动目录服务器获取名称时，我总是收到错误消息。错误如下：

```
javax.naming.InvalidNameException: Invalid name: "CN=»OGMA Serviço LAN/WAN",cn=Recipients,cn=Users,,dc=intra 
```

谷歌搜索了一下，我发现了以下信息

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4307193](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4307193) http://docs.oracle.com/javase/jndi/tutorial/beyond/names/syntax.html

如您所见，我尝试了解析器方法和复合名称方法，但错误仍然存​​在！我错过了什么？

这是我执行这些操作的代码：

```
DirContext ctx = new InitialDirContext( (Hashtable<String,String>) env);

Name n2 = new CompositeName().add(usersContainer);
NamingEnumeration contentsEnum = ctx.list(n2);

String[] attName = {"cn"};

while ( contentsEnum.hasNext() ) {
    NameClassPair ncp = (NameClassPair) contentsEnum.next();
    NameParser ldapParser = ctx.getNameParser("");

    String name = ncp.getName() + "," + usersContainer;
    Name n = ldapParser.parse(name);

    ctx.lookup(n); 
```

变量`name`是`"CN=»OGMA Serviço LAN/WAN" + cn=Recipients,cn=Users,,dc=intra`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:50:07.983

我不明白你为什么首先要做这么复杂的事情。如果您使用`Context.listBindings()`而不是，则`Context.list(),`可以完全避免构建名称和查找，因为您已经拥有名称和绑定。您的代码将减少为：

```
NamingEnumeration<Binding> contentsEnum = ctx.listBindings(n2);

String[] attName = {"cn"};

while ( contentsEnum.hasNext() ) {
    Binding binding = contentsEnum.next();
    Object o = binding.getObject();
    // etc, whatever you were intending to do with the result of lookup(), which is now in 'o'.
} 
```

# google-chrome - Chrome：输入文本元素在复制/粘贴后失去垂直对齐

> ID：11050643
> 
> 赞同：1
> 
> 时间：2012-06-15T12:28:29.157
> 
> 标签：google-chrome, text, input, copy-paste, vertical-alignment

我在 Chrome 19 中的以下 html 代码中有问题。如果我从输入字段中复制文本“Hello”并将其粘贴到同一字段中，则文本的垂直对齐在顶部，但它应该在中间.

如果我从样式中删除 font-size 属性，效果不会出现。这是浏览器错误，还是我对样式属性做错了什么？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>Title</title>
 </head>
 <body>
  <div style="width:200px;height:50px;">
   <input type="text" style="width:100%;height:100%;font-size:1.75em;" value="Hello world!"/>
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:18:16.503

此问题绝对是浏览器错误，但仍有办法修复它。对我有用的是在输入中添加一个行高，其值等于高度的值。

我以像素而不是百分比设置我的高度，当我尝试以百分比设置它们时，它似乎不起作用。不过，Ems 做到了。使用这种策略，您的代码可能类似于：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>Title</title>
 </head>
 <body>
  <div style="width:200px;height:50px;">
   <input type="text" style="width:100%;height:2em;line-height:2em;font-size:1.75em;" value="Hello world!"/>
  </div>
 </body>
</html> 
```

# php - 使用 FreeTDS 的 Drupal7 + SQL Server 的配置是什么？

> ID：11050653
> 
> 赞同：0
> 
> 时间：2012-06-15T12:29:08.457
> 
> 标签：php, sql-server, drupal-7, freetds

我们已经有一个在这种情况下工作的 Moodle 安装：linux + php5 + freetds + sql server。

但我们只是不知道如何以同样的方式将 drupal 7 链接到 sql server。

我们应该使用什么配置？有人试过这个吗？

drupal 根本**不会出现**在可用数据库列表中。

注意：*我们已经能够使用 freetds 将 php 连接到 sql server，但只是不知道如何在 Drupal 7 上做到这一点。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T12:32:04.620

不，你不能，但你可以使用 drupal odbc 驱动程序，它的工作方式相同，但通过 odbc 连接（[https://www.drupal.org/sandbox/pstewart/2010758](https://www.drupal.org/sandbox/pstewart/2010758)），你所要做的就是安装它（包括其服务器要求）并将您的配置更改为这样的内容（在 Ubuntu Server 上的 Drupal 7 上测试）：

```
'external' =>
    array (
    'default' =>
    array (
        'odbc_driver' => 'FreeTDS',
        'database' => '',
        'username' => '',
        'password' => '',
        'host' => '',
        'port' => '1433',
        'driver' => 'odbc',
        'prefix' => ''
    ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:46:24.147

您不能在 Linux 上使用[sqlsrv](http://drupal.org/project/sqlsrv)模块，因为它需要仅适用于 Windows 的 PDO_SQLSRV 驱动程序（[请参阅此评论](http://drupal.org/node/1037558#comment-3991334)）

要使用 FreeTDS，您需要自己编写一个 Drupal 数据库驱动程序（类似于 sqlsrv）。或者根本不使用数据库抽象层并在您的模块中自己进行调用（如果您的部分项目只需要 MS SQL。

好消息（我希望）是您可以安装 dblib 驱动程序（在 Ubuntu 中：sudo apt-get install php5-mssql）并使用[沙箱项目](http://drupal.org/sandbox/rgeorgy/1775970)。您可以在[此处](http://drupal.org/node/1070330#comment-6440816)的作者评论中找到有关此沙盒项目的一些信息。如何在你的 settings.php 文件中使用它可以在[这里](http://drupal.org/node/1892310)看到。

Drupal 中的 dblib 数据库支持仍处于试验阶段，因此在使用之前对其进行测试。

# grid - 在 Ext JS 中更新（设置）列牧民

> ID：11050654
> 
> 赞同：0
> 
> 时间：2012-06-15T12:29:16.430
> 
> 标签：grid, extjs4.1

我试图用这些代码设置列标题，但它们没有用。我不知道该怎么办。

```
this.headerCt.setColumnHeader(2,"Surname");
grid.getColumnModel().setColumnHeader(2,"Surname"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:12:04.447

这有点复杂，但这是你如何做到的：

```
grid.headerCt.items.items[2].setText("Surname"); 
```

其中 2 是索引。

# jquery - jquery Carousel - 带有列表项或 div

> ID：11050660
> 
> 赞同：1
> 
> 时间：2012-06-15T12:29:49.913
> 
> 标签：jquery, jcarousel

我正在为我的网站制作 jquery 轮播。
在 99% 的教程中，人们使用`<ul>`和`<li>`.
对于 SEO，我更喜欢使用`<div>`s，`<ul>`并`<li>`用于菜单...

除了简单之外，还有其他原因为什么人们使用`<ul>`and `<li>`over `<div>`s for jquery Carousel？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:59:15.010

是的，语义。

在 html5 出现之前，语义网是一个混合匹配的方法，使网站底层代码有意义。

作为人类，我们可以查看一个典型的布局，如果我们看到一个

```
<div id="menu" /> 
```

我们可以很容易地推断出它是一个菜单。

但是对于电脑，或者视障人士的屏幕阅读器来说，他们并没有掌握这个概念。将这一点与并非每个人都使用“菜单”作为 id 的事实相结合，那么屏幕阅读器就无法将您的 div 解释为除 div 之外的任何内容。

结果，许多 Web 开发人员对标准发出噪音并试图鼓励大多数人遵循它们，例如 ul 和 li 用于单列对象以及 div 和 span ID 的标准名称，并且通常试图促进最佳使用坏的情况。

然而，这一切都将随着 html5 的改变而改变

导航、页眉、页脚、列表、侧边栏对象等的新标签将永远改变语义网，只要人们正确使用新标签，屏幕阅读器软件就不再需要猜测意图，屏幕抓取应用程序或者社交媒体工具将能够与网站更好地合作，因为它们可以纯粹从代码的布局中推断出意图。

这不仅仅是带有音频和视频的花里胡哨，html5 也有非常严肃的一面，那就是根除所有这些丑陋的黑客和尝试自我监管的最佳实践，最终为未来提供更好的网络。

# php - PHP jpgraph 不会显示多个图形

> ID：11050661
> 
> 赞同：0
> 
> 时间：2012-06-15T12:29:55.023
> 
> 标签：php, jpgraph

我一直在尝试使用 jpgraph php 代码在一个屏幕上显示两个图形。根据 jpgraph，这可以通过以下两种方法之一完成，请参见[此处](http://jpgraph.net/doc/howto1.php "JpGraph")。虽然我可以使用 $graph->Stroke(); 单独显示四个图表中的任何一个；我一生都无法弄清楚如何使用 jpgraph 示例中规定的任何一种方法将它们一起显示。附件文档中的 mgraph 代码对我来说看起来是正确的，但什么都不会出现。任何帮助，将不胜感激。干杯

```
 <?php require("sess_start.php");?><?php if ($_GET[sessid] > 0) { //show page if user has a valid session ?><?php
//    AppServerType:PHP4

require("./../adodb/adodb.inc.php");
require("./../Connections/m_water.php");

include ("./../jpgraph/src/jpgraph.php");
include ("./../jpgraph/src/jpgraph_line.php");

$ydata = array(2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32);
$datax = array("1","2","3","4","5","6","7","8","9","10","11","12");
$max_inshore_effort = array("8", "8", "8", "8", "8", "8", "8", "8", "8", "8", "8",     "8", "8", "8", "8", "8");
$max_offshore_effort = array("12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12", "12");

//--------------------------------------------------------------------------------------------------------------------------------
//GRAPH 1

// Create the graph. These two calls are always required
//$graph = new Graph(550,400,"auto");
//$graph->SetScale("textlin");

//$graph->xaxis-> SetTickLabels($datax);
//$graph->xaxis->SetFont(FF_FONT2);
//$graph->yaxis->SetFont(FF_FONT2);

// Create the linear plot
//$lineplot=new LinePlot($ydata);

  // Add the plot to the graph
  //$graph->Add($lineplot);
  //$lineplot->SetColor('#DC143C');  //set the colour of the line this case dark red
 //$lineplot->SetWeight(1.5); // set the thickness of the line
 //$lineplot->SetLegend('Total group effort'); // add a description to the legend
//$lineplot->mark->SetType(MARK_FILLEDCIRCLE,'',1.0); // determine what type of marker is used
 //$lineplot->mark->SetType(MARK_SQUARE,'',2.0); // determine what type of marker is used
 //$lineplot->mark->SetSize(6);
//$lineplot->mark->SetColor('#000000');   // determine the colour of the outer line surrounding the marker
//$lineplot->mark->SetFillColor('#DC143C'); // set the fill for the marker

//$graph->img->SetMargin(60,60,50,80);
//$graph->xaxis->SetTitle('Round', 'center');
//$graph->yaxis->SetTitle('Total group effort', 'center');
 //$graph->xaxis->SetTitleMargin(12);
 //$graph->yaxis->SetTitleMargin(32);

// Setup a nice title with a striped bevel background
//$graph->title->Set("State of Area 1 (Inshore)"); // alter the title heading
//$graph->title->SetFont(FF_ARIAL,FS_BOLD,16); // alter the font of the title and size
   //$graph->title->SetColor('#FFFFFF');   // alter the colour of the title
    //$graph->SetTitleBackground('#4682B4',TITLEBKG_STYLE1,TITLEBKG_FRAME_BEVEL); // insert 3d bevel for title
             //$graph->SetTitleBackgroundFillStyle(TITLEBKG_FILLSTYLE_HSTRIPED,'blue','darkgreen');  // insert alternating horizontal lines across title fill box;

 //$graph->tabtitle->SetColor('navy','lightyellow','navy');

 //$graph->yaxis->SetColor('#000000'); //set the colour of the y axis
 //$graph->xaxis->SetColor('#000000'); // set the colour of the x axis

  // Change the fonts of the axis and title
  //$graph->title->SetFont(FF_FONT1,FS_BOLD);
  //$graph->yaxis->title->SetFont(FF_FONT1,FS_BOLD);
 //$graph->xaxis->title->SetFont(FF_FONT1,FS_BOLD);
//$graph->xaxis->SetTickSide(SIDE_DOWN);
 //$graph->xaxis->SetLabelMargin(6);
//$graph->yaxis->SetTickSide(SIDE_LEFT);
 //$graph->yaxis->SetLabelMargin(8);

  //$lineplot->SetColor("#DC143C");

 // Add a second axis displaying the maximum effort allowed for inshore area
 //$p1 = new LinePlot($max_inshore_effort);
 //$graph->Add($p1);
 //$p1->SetColor("#2E8B57");
//$p1->SetLegend('Max effort inshore to stay abundant');
//$p1->SetWeight(3); // set the thickness of the line
 //$p1->SetCenter();
//$p1->SetStyle('longdashed');

 //$graph->SetShadow();

   // Adjust the legend position
  //$graph->legend->SetLayout(LEGEND_HOR);
 //$graph->legend->Pos(0.15,0.94,"bottom","center");  //adjust the position of the    legend on the graph
   //$graph->legend->SetFillColor('#D3D3D3');

    //--------------------------------------------------------------------------------------------------------------------------------
//GRAPH 2

   // Create the graph. These two calls are always required
$graph2 = new Graph(550,400,"auto");
$graph2->SetScale("textlin");

$graph2->xaxis-> SetTickLabels($datax);
 $graph2->xaxis->SetFont(FF_FONT2);
$graph2->yaxis->SetFont(FF_FONT2);

// Create the linear plot
 $lineplot2=new LinePlot($ydata);

    // Add the plot to the graph
   $graph2->Add($lineplot2);
   $lineplot2->SetColor('#DC143C');  //set the colour of the line this case dark red
    $lineplot2->SetWeight(1.5); // set the thickness of the line
  $lineplot2->SetLegend('Total group effort'); // add a description to the legend
   //$lineplot->mark->SetType(MARK_FILLEDCIRCLE,'',1.0); // determine what type of marker is used
    $lineplot2->mark->SetType(MARK_SQUARE,'',2.0); // determine what type of marker is used
    $lineplot2->mark->SetSize(6);
   $lineplot2->mark->SetColor('#000000');   // determine the colour of the outer line surrounding the marker
    $lineplot2->mark->SetFillColor('#DC143C'); // set the fill for the marker

 $graph2->img->SetMargin(60,60,50,80);
 $graph2->xaxis->SetTitle('Round', 'center');
$graph2->yaxis->SetTitle('Total group effort', 'center');
$graph2->xaxis->SetTitleMargin(12);
$graph2->yaxis->SetTitleMargin(32);

 // Setup a nice title with a striped bevel background
    $graph2->title->Set("State of Area 1 (Offshore)"); // alter the title heading
    $graph2->title->SetFont(FF_ARIAL,FS_BOLD,16); // alter the font of the title and size
    $graph2->title->SetColor('#FFFFFF');   // alter the colour of the title
    $graph2->SetTitleBackground('#4682B4',TITLEBKG_STYLE1,TITLEBKG_FRAME_BEVEL); // insert 3d bevel for title
 //$graph->SetTitleBackgroundFillStyle(TITLEBKG_FILLSTYLE_HSTRIPED,'blue','darkgreen');     //      insert alternating horizontal lines across title fill box;

$graph2->tabtitle->SetColor('navy','lightyellow','navy');

  $graph2->yaxis->SetColor('#000000'); //set the colour of the y axis
 $graph2->xaxis->SetColor('#000000'); // set the colour of the x axis

 // Change the fonts of the axis and title
 $graph2->title->SetFont(FF_FONT1,FS_BOLD);
 $graph2->yaxis->title->SetFont(FF_FONT1,FS_BOLD);
$graph2->xaxis->title->SetFont(FF_FONT1,FS_BOLD);
$graph2->xaxis->SetTickSide(SIDE_DOWN);
$graph2->xaxis->SetLabelMargin(6);
 $graph2->yaxis->SetTickSide(SIDE_LEFT);
 $graph2->yaxis->SetLabelMargin(8);

 $lineplot2->SetColor("#DC143C");

// Add a second axis displaying the maximum effort allowed for inshore area
$p12 = new LinePlot($max_offshore_effort);
$graph2->Add($p12);
$p12->SetColor("#0000CD");
$p12->SetLegend('Max effort offshore to stay abundant');
$p12->SetWeight(3); // set the thickness of the line
$p12->SetCenter();
$p12->SetStyle('longdashed');

 $graph2->SetShadow();

 // Adjust the legend position
 $graph2->legend->SetLayout(LEGEND_HOR);
$graph2->legend->Pos(0.15,0.94,"bottom","center");  //adjust the position of the legend on the graph
$graph2->legend->SetFillColor('#D3D3D3');
 //$handle2 =  $graph2->Stroke( _IMG_HANDLER);

// Display the individual graph
$graph->Stroke();
?>
?>

// Create a combined graph
       //$mgraph = new MGraph();
     //$xpos1=3;$ypos1=3;
      //$xpos2=3;$ypos2=200;
      //$mgraph->Add($graph);
     //$mgraph->Add($graph2,$xpos2,$ypos2);
    //$mgraph->Stroke();

?>
   <?php } //show page if user has a valid session ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:47:54.687

在您的代码片段中，您正在使用`$graph->Stroke();`但您的变量名称是`$graph2`.
我不知道这是否是您的问题的原因，但在这种情况下`$graph->Stroke();`不会输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:20:56.610

据我了解`graph->Stroke()`，将以图像文件的形式提供输出，并且`graph->Stroke;` `graph2->Stroke;`etc 的多个实例将覆盖以前的仅显示最终图像的实例。我建议做的是，制作一个类似于 **plotgraph.php 的文件：**

```
<?php

$xdata=explode(",",$_GET['xdata']);
$ydata=explode(",",$_GET['ydata']);
$title=$_GET['graphtitle'];
// and any other variales that you need
// Your graph routines
// .. including $p->add($xdata,$ydata); etc statements
$graph->Stroke();
?> 
```

在您的主文件中添加语句，例如

```
<img src="plotgraph.php?xdata=comma_separated_xdata&ydata=comma_separated_ydata&graphtitle=your_graph_title"> 
```

这样，您可以使用各种参数插入任意数量的图表。我希望这能澄清一些事情。（请注意，我没有添加所有图形格式等，只是给你一个例子。如果你想为每个图形单独的字体等格式，你必须用 url 导出它并用 $_GET 获取。其他常见设置可以bbe 在您的 plotgraph.php 文件中）

# javascript - 还记得刷新后使用 jQuery 切换状态吗？

> ID：11050667
> 
> 赞同：3
> 
> 时间：2012-06-15T12:30:13.657
> 
> 标签：javascript, jquery, toggle, state

我有一个小脚本来切换我的导航。但我在更多页面中使用导航。我希望 jQuery 记住切换（显示/隐藏）状态，以便在导航时使用它。

```
$(document).ready(function(){
$('ul.second').show();
$('ul.third').hide();
$('ul.first').show();
$('ul.first li.first a').click(function(){
    //$('ul.second').slideToggle("");
    $('ul.third').slideToggle("");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:34:10.467

您可以使用 cookie 管理或 localStorage 在整个会话中存储此信息。LocalStorage 仅适用于 html5。

这是一篇关于兼具两者的插件的好文章，因此您无需检测浏览器是否支持 localStorage：

[http://upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/](http://upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:36:11.933

您还可以将哈希添加到 url 并在页面刷新后检测哈希。

有关哈希的更多详细信息，请点击此处

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

[https://developer.mozilla.org/en/DOM/window.onhashchange](https://developer.mozilla.org/en/DOM/window.onhashchange)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T08:14:07.273

您可以使用 jquery 的滑动功能来做到这一点，只需像这样使用 css 设计面板并根据自己的喜好翻转元素

```
<style>
.flip {
position:relative;
background-image:url("mybutton");
}

#panel {
background-image:("rabbitimage");
}
</style>

<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js">
</script>
<script> 
$(document).ready(function(){
  $(".flip").click(function(){
    $("#panel").slideToggle("slow");

  });
});
</script>

</head>
<body>

<div class="flip">Click to slide the panel down or up</div>
<div id="panel">Hello world!</div>

</body>
</html> 
```

# c# - 向 WISE 注册 COM 互操作 Dll

> ID：11050674
> 
> 赞同：0
> 
> 时间：2012-06-15T12:30:27.840
> 
> 标签：c#, com, vb6, installation, wise

我正在谈论的应用程序由 vb6 (80%) 和 c#、.Net Framework 4.0 (20%) 组成。所有新组件都是用 c# 创建的。使用 Microsoft Interop Forms Toolkit 2.1，我们创建了稍后嵌入 vb6 的 COM 用户控件。对于表单，我们使用普通类在 vb6（COM Visible 项目）中创建和打开。为了创建我们使用的设置。

本地一切正常 - 只有当我们使用明智创建的设置在非开发人员机器上安装应用程序时才会出现问题。

我们添加了一个类来打开 ac# Form 到现有的互操作工具包项目。它在开发人员机器上以及当我们在 pc（非开发机器）上进行新安装时工作正常。新类仅用于打开表单。

但是当我们将应用程序更新到更新版本时，该类不再工作。我们必须卸载旧版本并安装新版本才能使其再次工作。

以前有人遇到过类似的问题吗？

我很感激任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:05:39.010

这似乎是 Windows Installer 和升级过程中的排序问题。您的应用程序是否允许并行安装（例如可以同时安装版本 1 和版本 2）或者您的安装程序是否将早期版本升级到最新版本？您可以尝试记录安装并查看日志文件以准确了解安装/升级过程中发生的情况。

[您可以通过从命令行](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx#BKMK_SetLogging)调用 Msiexec 来记录 msi 安装。

这可以提供更深入的洞察力并帮助您集中精力调试问题。

**编辑**

根据您的描述，似乎在全新安装时安装按预期工作。当您升级早期版本时，COM Interop 组件似乎没有正确注册。这可能表明，在将组件复制到机器并注册的时间与移除现有产品的时间方面，事件的顺序有些偏差。虽然不完全相同，但请参阅此[SO Question and answer](https://stackoverflow.com/questions/10832482/msi-upgrade-and-retain-registry-keys/10834151#10834151)了解更多详细信息。此外，请查看Windows Installer 中的[RemoveExistingProducts操作以获取更多信息。](http://msdn.microsoft.com/en-us/library/aa371197%28VS.85%29.aspx)

我会记录您知道可以正常工作的安装（例如在“干净”机器上），然后记录您知道会失败的安装（例如升级），然后使用工具比较两个日志文件以查看输出是否是相同的。如果没有，这会给你一个关于在哪里看的线索。如果它们相同，则可能是时候与供应商接触，看看他们是否可以帮助确定导致问题的原因。

# jquery-mobile - 如何将单选按钮列表与文本输入列表对齐

> ID：11050675
> 
> 赞同：0
> 
> 时间：2012-06-15T12:30:29.540
> 
> 标签：jquery-mobile

使用我的测验创建者界面，用户输入三个答案，然后通过设置单选按钮标记正确的答案：

[http://jsfiddle.net/VLeph/2/](http://jsfiddle.net/VLeph/2/)

但是，我无法让文本输入和复选框很好地排列。最好，我希望在文本输入和复选框之间没有圆角。就像下面链接中显示的水平无线电组一样。但是在左侧输入文本。

[http://jsfiddle.net/CeN9z/](http://jsfiddle.net/CeN9z/)。

你知道怎么做吗？

谢谢 :) 基督徒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:59:25.363

您可以尝试将所有文​​本输入放在网格中的一个单元格中，并将所有单选按钮放在另一个单元格中，然后使用一些样式来正确对齐它们。

像[jsfiddle这样的东西](http://jsfiddle.net/dA5Yf/)

# matlab - matlab中霍夫变换的精确工作

> ID：11050676
> 
> 赞同：1
> 
> 时间：2012-06-15T12:30:30.423
> 
> 标签：matlab, image-processing, computer-vision, hough-transform

谁能指导我函数“霍夫变换”在matlab中的工作原理？问题是我有一个包含两个直矩形的图像，一个矩形以某个角度倾斜。根据我应用霍夫变换后的说法；我应该得到一个 1X6 的线结构，但我得到一个 1x14 的结构。谁能帮我？我还上传了图片：

[![两个直的矩形，一个倾斜的矩形](../Images/4aec2aac468bcea926eb7a62df256b86.png)](https://i.stack.imgur.com/ljG47.png) [![应用霍夫变换](../Images/27c6d191031c2500ff57fa3ea7ee27da.png)](https://i.stack.imgur.com/DJc6A.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:58:43.400

您不能将霍夫变换限制为 1x6 的结构。它不会产生稳定的结果。当在弯曲的道路上向前看时，它也不能很好地工作。我不应该从每一帧中获取 1x6 结构。相反，我应该获取所有返回的线段并使用一些逻辑来确定车道标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:09:35.823

首先，您的图像实际上看起来有些模糊。我不知道它是否真的是，但如果是这样，您需要运行边缘检测算法，因此您的霍夫变换不会检测到线条的模糊部分。

其次，您需要减少检测到的线的数量，只需取出任何没有足够点通过它的线。这可以通过对 [H,t,r]=hough(image) 中的 H 变量进行阈值处理来完成。

其他来源：

[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform) [http://www.mathworks.com/help/toolbox/images/ref/hough.html](http://www.mathworks.com/help/toolbox/images/ref/hough.html)

# asp.net - asp.net request.form

> ID：11050677
> 
> 赞同：3
> 
> 时间：2012-06-15T12:30:36.023
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

```
public ActionResult DisplayCustomer()
{
    Customer objCustomer = new Customer();

    objCustomer.Id = Convert.ToInt16(Request.Form["Customerid"]);
    objCustomer.CustomerCode = Request.Form["code"];
    objCustomer.Amount = Convert.ToDouble(Request.Form["amount"]);
    return View(objCustomer);
} 
```

这是我在控制器（MVC 2 aspx）中的操作：

```
<form action="DisplayCustomer" method="post">
    Customer id:-
    <input type="text" id="Customerid" /><br />
    Customer Code:-
    <input type="text" id="code" /><br />
    Customer amount:-
    <input type="text" id="amount" /><br />
    <input type="submit" value="click here" />
</form> 
```

这是视图。当有人点击提交按钮时，它会被定向到一个新页面：

```
<div>
   <b> ID</b> <%= Model.Id %><br />
   <b> Code </b><%=Model.CustomerCode %><br />
   <b> Amount</b> <%=Model.Amount %><br />
</div> 
```

我总是在 Id 和 Amount 中得到 0，而在 CustomerCode 中为空白。

有什么线索吗？为什么会这样？怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:35:54.240

您的问题是您设置了`id`，而不是`name`. 设置名称以获取回发值。例如：

```
<input type="text" name="Customerid" /> 
```

另请阅读： HTML 输入 - “用于表单元素以提交信息”行中的[名称与 id](https://stackoverflow.com/questions/7470268/html-input-name-vs-id)

# c# - 通过单击控件显示工具提示文本

> ID：11050678
> 
> 赞同：3
> 
> 时间：2012-06-15T12:30:36.170
> 
> 标签：c#, .net, winforms

> **可能重复：**
> [以编程方式在 winforms 应用程序中显示工具提示](https://stackoverflow.com/questions/63439/programatically-show-tooltip-in-winforms-application)

在控件上设置 TooltipText 时，当用户在控件上移动鼠标时将显示工具提示文本。

现在我在 Windows 窗体上有一个图片框，我想要的是通过单击控件而不是悬停它来显示工具提示文本。

怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T12:36:08.957

这段代码可以解决问题：

```
private void PictureBox1_Click(object sender, EventArgs e)
{
    int durationMilliseconds = 10000;
    ToolTip1.Show(ToolTip1.GetToolTip(PictureBox1), PictureBox1, durationMilliseconds);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:33:53.547

Tooltip 有一个[Show](http://msdn.microsoft.com/en-us/library/884812ce)功能。只需根据需要使用它

# xcode - Xcode Mac youtube 搜索框

> ID：11050684
> 
> 赞同：0
> 
> 时间：2012-06-15T12:30:53.907
> 
> 标签：xcode, macos, xcode4, youtube

我目前正在开发一个使用 youtube 视频搜索框的应用程序。

有人可以建议如何自己进行搜索吗？（我的意思是如何将搜索结果放入文本行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:30:25.993

您可能想要使用[Youtube Data API](https://developers.google.com/youtube/2.0/reference#Response_Codes)。该文档有一个关于“搜索视频”的精彩部分：

> 要搜索视频，请向以下 URL 发送 GET 请求，将适当的查询参数附加到您的请求中：
> 
> [https://gdata.youtube.com/feeds/api/videos](https://gdata.youtube.com/feeds/api/videos)
> 
> 例如，对以下 URL 的请求会搜索第二组 10 个最近上传的与查询词“football”匹配但与查询词“soccer”不匹配的视频：
> 
> [https://gdata.youtube.com/feeds/api/videos?q=football+-soccer&orderby=published&start-index=11&max-results=10&v=2](https://gdata.youtube.com/feeds/api/videos?q=football+-soccer&orderby=published&start-index=11&max-results=10&v=2)

# android - 计算汽车两个坐标之间的距离

> ID：11050685
> 
> 赞同：3
> 
> 时间：2012-06-15T12:30:58.503
> 
> 标签：android

> **可能重复：**
> [获取两个地理点之间的距离](https://stackoverflow.com/questions/2741403/get-the-distance-between-two-geo-points)

`distanceTo(Location dest)`或者`distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results)`

是计算人们步行或驾驶汽车的距离吗？

如何计算汽车两个坐标之间的距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:36:16.020

一个快速的谷歌让我找到了很多关于坐标的公式，其中包括你正在处理的内容：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:24:04.237

您可以通过以下方式获取 2 个地址的距离： [http](http://maps.googleapis.com/maps/api/distancematrix/xml?origins=) ://maps.googleapis.com/maps/api/distancematrix/xml?origins = "+a+"&destinations="+b+"&mode=driving&language=en-EN&sensor=false

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:13:16.083

根据文档，两点之间的距离是它们之间的直线。如果您想要两辆车之间的距离并考虑街道等，您需要更多的航路点：

> 计算两个位置之间的近似距离（以米为单位），以及它们之间最短路径的初始和最终方位（可选）。距离和方位角是使用 WGS84 椭球定义的。

# shell - 如何用一个功能键在vi中执行shell命令？

> ID：11050689
> 
> 赞同：0
> 
> 时间：2012-06-15T12:31:20.517
> 
> 标签：shell, editor, vi

我们可以在 vi 中执行 shell 命令。例如，输入 :!ls 我们可以列出当前目录中的文件。我们可以通过输入 :!! 来发送相同的命令 在六。

我想知道我是否可以更换:!! 用 F7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:36:30.673

这对我有用

`:nnoremap <F7> :!!<CR>`

# linq - 在表达式中使用匿名类型

> ID：11050692
> 
> 赞同：0
> 
> 时间：2012-06-15T12:31:41.597
> 
> 标签：linq, entity-framework, lambda

实体框架有一个带有这个签名的函数：

```
public EntityTypeConfiguration<TEntityType> HasKey<TKey>(Expression<Func<TEntityType, TKey>> keyExpression); 
```

如果你的表有一个聚集的主键，你可以这样表示：

```
this.HasKey(t => new { t.Field1, t.Field2 }); 
```

我的问题是，他们是如何使用这种匿名类型的？我想在我自己的方法中构建一些类似的功能，允许返回多个属性的 lambda 表达式。

有什么特殊的方法可以窥探匿名​​类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:33:16.207

他们只是使用反射。

为了提高性能，您可以使用表达式树将预编译的委托存储在泛型类型中。

# c++ - dlclose() 不适用于工厂函数和函数中的复杂静态？

> ID：11050693
> 
> 赞同：3
> 
> 时间：2012-06-15T12:31:48.097
> 
> 标签：c++, linux, gcc, c++11, dlopen

我正在制作一个简单的插件框架，我希望能够在其中 dlopen() 共享库（即插件），检查和使用提供的任何工厂函数，并最终 dlclose() 它，不留痕迹。

我的工厂系统很简单，只有一个导出函数，它返回一个指向公共基类的指针。为了检查插件是否已正确卸载，我有一个静态对象，其析构函数从主程序设置了一个布尔值。

这是主程序：

```
// dltest.cpp follows. Compile with g++ -std=c++0x dltest.cpp -o dltest -ldl
#include <dlfcn.h>
#include <iostream>
using namespace std;
int main(int argc, char** argv)
{
    if (argc > 1)
    {
        void* h = dlopen(argv[1], RTLD_NOW|RTLD_LOCAL);
        if (!h)
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 1;
        }
        bool isFinilized = false;
        *(bool**)dlsym(h, "g_finilized") = &isFinilized;
        cout << boolalpha << isFinilized << endl;
        if (dlclose(h))
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 2;
        }
        cout << boolalpha << isFinilized << endl;
    }
    return 0;
} 
```

插件的代码是：

```
// libempty.cpp follows. Compile with g++ -std=c++0x libempty.cpp -o libempty.so -fPIC -shared
#include <iostream>
#include <vector>
using namespace std;
bool* g_finilized = nullptr;
struct Finilizer
{
    ~Finilizer()
    {
        cout << "~Finilizer()" << endl;
        if (g_finilized) *g_finilized = true;
    }
} g_finilizer;
class Base
{
public:
    virtual void init() = 0;
};
class Foo: public Base
{
    virtual void init()
    {
        static const vector<float> ns = { 0.f, 0.75f, 0.67f, 0.87f };
    }
};
extern "C" __attribute__ ((visibility ("default"))) Base* newBase() { return new Foo; } 
```

如果执行，输出为：

```
false
false
~Finilizer() 
```

这表明对 dlclose() 的调用没有按预期工作，并且在程序退出之前没有卸载库。

但是，如果我们将向量移到函数外部，那么最后 8 行内容为：

```
class Foo: public Base
{
    virtual void init()
    {
    }
};
static const vector<float> ns = { 0.f, 0.75f, 0.67f, 0.87f };
extern "C" __attribute__ ((visibility ("default"))) Base* newBase() { return new Foo; } 
```

然后 dlclose() 正常工作，输出为：

```
false
~Finilizer()
true 
```

如果向量留在函数中但没有导出工厂，则会生成相同的结果：

```
class Foo: public Base
{
    virtual void init()
    {
        static const vector<float> ns = { 0.f, 0.75f, 0.67f, 0.87f };
    }
};
//extern "C" __attribute__ ((visibility ("default"))) Base* newBase() { return new Foo; } 
```

如果将向量替换为 C 数组，则会发现肯定的结果：

```
class Foo: public Base
{
    virtual void init()
    {
        static const float ns[] = { 0.f, 0.75f, 0.67f, 0.87f };
    }
};
extern "C" __attribute__ ((visibility ("default"))) Base* newBase() { return new Foo; } 
```

这是 GCC/Linux 中的错误吗？是否有任何解决方法可以在分解类的成员函数中静态声明复杂对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T02:55:01.420

发生的事情是有一个`STB_GNU_UNIQUE`符号`libempty.so`：

```
readelf -Ws libempty.so | grep _ZGVZN3Foo4initEvE2ns
 91: 0000000000203e80     8 OBJECT  UNIQUE DEFAULT   25 _ZGVZN3Foo4initEvE2ns
 77: 0000000000203e80     8 OBJECT  UNIQUE DEFAULT   25 _ZGVZN3Foo4initEvE2ns 
```

问题是`STB_GNU_UNIQUE`符号的工作方式非常不直观，并且在`dlopen`/`dlclose`调用中持续存在。

使用该符号会强制 glibc 在[此处](http://sourceware.org/git/?p=glibc.git;a=blob;f=elf/dl-lookup.c;h=a2a699b48f5f188da2528ed163b7befffed586ee;hb=HEAD#l445)将您的库标记为不可卸载。

符号还有[其他惊喜](http://cygwin.com/ml/libc-alpha/2011-10/msg00071.html)。`GNU_UNIQUE`如果您使用足够新的黄金链接器，您可以禁用`GNU_UNIQUE`with`--no-gnu-unique`标志。

# asp.net - 从 IIS 托管时，超链接不起作用

> ID：11050694
> 
> 赞同：0
> 
> 时间：2012-06-15T12:31:53.807
> 
> 标签：asp.net, .net, iis, hyperlink

我有一个用 asp.net 设计的网站，在 Visual Studio 中运行良好。但是，当我从 IIS 托管它时，所有链接都不起作用。链接没有什么花哨的

```
 <li><a href = "#">Links</a>
                        <ul>
                            <li><a href="page1.aspx">Page1</a></li>
                            <li><a href="page2.aspx">Page2</a></li>
                        </ul>
                    </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:39:35.810

这不是超链接的原因。在您的 web.config 中设置`<customErrors mode="Off"/>`以查看完整的错误消息。否则，很难理解为什么会出现错误。

如果您需要了解更多信息，请访问此链接：[http ://weblogs.asp.net/scottgu/archive/2006/08/12/Tip_2F00_Trick_3A00_-Show-Detailed-Error-Messages-to-Developers.aspx](http://weblogs.asp.net/scottgu/archive/2006/08/12/Tip_2F00_Trick_3A00_-Show-Detailed-Error-Messages-to-Developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:01:46.700

我首先在 web.config 中设置自定义错误标签以显示所有错误

如果这不起作用，我会查看 IIS 网站，看看它是否设置为托管正确版本的 ASP.NET，

如果这仍然不起作用，我会检查

```
control panel -> administrative tools -> event viewer -> application 
```

查看应该显示异常消息的 asp.net 警告条目。

它不太可能是您发布的内容，因为它看起来像好的 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T08:41:49.583

只需添加`runat="server"`到您的锚标记。

像这样，

```
<a runat="server" href="Home.aspx">Home</a> 
```

# maven - 使用 Maven 和可能的 Aether 解决复杂的依赖关系 - 如何？

> ID：11050695
> 
> 赞同：0
> 
> 时间：2012-06-15T12:31:56.303
> 
> 标签：maven, maven-plugin, dependency-management, aether

我正在尝试编写一个 Maven 插件，它执行以下操作：获取模块的所有依赖项并找出它的任何传递依赖项是否对当前模块的任何兄弟模块具有传递依赖项。

我的想法如下：

*   获取模块的父级（仅 POM 父级），然后获取其所有模块，以查找当前模块的兄弟姐妹。
*   获取模块的传递依赖项（但仅限于我们的组 ID）。
*   对于每个传递依赖，获取它的传递依赖并找出它们中的任何一个是否是兄弟模块之一。

我试过用 Maven 2 风格做，现在以 Aether 结束。但是，我不确定是否可以用 Aether 做我想做的事情。

目前，我可以获得仅 POM 的父级（不是使用 Aether，而是使用 MavenProject），我可以获得传递依赖项，然后过滤它们以仅保留具有我们组 ID 的工件。我没有在 Aether 中找到相当于 Maven FilterArtifacts 的东西。

所以，问题是：我关于如何实现目标的想法是否正确？我可以只用Aether吗？如果是，我该怎么做？还是我必须使用 Maven 2 和 Aether 的组合？（我试了一下，但是SNAPSHOT版和时间戳SNAPSHOT版的区别有点繁琐）

无论如何，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:38:16.140

您可以使用[jcabi-aether](http://www.jcabi.com/jcabi-aether/)库（我是开发人员之一），它可以帮助您做您想做的事情：

1.  获取模块列表`MavenProject`
2.  获取他们的依赖
3.  一个接一个地遍历它们并使用解决它们[`com.jcabi.aether.Aether`](http://www.jcabi.com/jcabi-aether/apidocs/com/jcabi/aether/Aether.html)

应该适用于 Maven 3

# django - 嵌套外键查询

> ID：11050696
> 
> 赞同：1
> 
> 时间：2012-06-15T12:32:02.857
> 
> 标签：django, foreign-keys, nested

使用这样的模型：

```
class Folder(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField()

class CanAccess(models.Model):
    folder = models.ForeignKey(Folder)
    user = models.ForeignKey(User)

class Image(models.Model):
    folders = models.ManyToManyField('Folder')
    title = models.CharField() 
```

我需要找到用户可以访问的所有图像。

我已经尝试过了，但它不起作用：

```
images=Image.objects.filter(folders__canaccess_set__user=current_user) 
```

`FieldError`当 Django 查找该`canaccess_set`部分时，我得到一个。

进行此类查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:54:16.550

`_set`进行查找时不需要：

```
Image.objects.filter(folders__canaccess__user=current_user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:35:15.973

好的，在这里找到的信息：

[http://bitkickers.blogspot.dk/2010/04/django-manytomany-error-cannot-resolve.html](http://bitkickers.blogspot.dk/2010/04/django-manytomany-error-cannot-resolve.html)

表明模型的加载顺序可能会产生这种 og 错误，所以我从这个顺序更改了 models.py 文件：

```
class Image(models.Model):
    folders = models.ManyToManyField('Folder')
    title = models.CharField()

class Folder(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField()

class CanAccess(models.Model):
    folder = models.ForeignKey(Folder)
    user = models.ForeignKey(User) 
```

按照这个顺序：

```
class CanAccess(models.Model):
    folder = models.ForeignKey("Folder")
    user = models.ForeignKey(User)

class Image(models.Model):
    folders = models.ManyToManyField('Folder')
    title = models.CharField()

class Folder(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField() 
```

这实际上似乎解决了这个问题。

# spring - 测试休眠映射

> ID：11050700
> 
> 赞同：0
> 
> 时间：2012-06-15T12:32:13.637
> 
> 标签：spring, hibernate

我正在使用 Hibernate 将对象映射到旧模式，该模式通过注释包含一些巨大的表（因为 XML 文件是 2003 年的）。由于这些类是如此之大，是的，我偶尔会打错字，直到我尝试运行它，Hibernate 才懒得告诉我。

这是我尝试过的：

**一：设置 hbm2ddl.auto 为“验证”：**

这会导致类的 String 值针对 进行验证`varchar(255)`。由于数据库中的许多列类型都是`CHAR(n)`，所以这很糟糕。我将不得不添加`columnDefinition="CHAR(n)"`数百个映射。

**二：使用Unitils。**

通过 Maven 导入这些会导致依赖库的导入，这会破坏其他代码部分。示例：我使用的是 Hibernate 4.1，但 Unitils 导入了 Hibernate 3.2.5 并炸毁了一个 UserType。

那么，还有其他方法可以做到这一点吗？我查看了 Unitils 代码，看看我是否可以简单地拉出我需要的部分（当我只需要一个方法时，我经常使用 apache-commons 这样做），但这不是一项简单的任务。

Hibernate 是通过 Spring 应用程序上下文配置的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:49:56.397

我会使用 Spring 测试框架针对内存数据库（HSQLDB、H2）编写测试。当您尝试对表运行查询时，您会很快看到任何映射错误。

测试类看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes=MyTestConfig.class)
@TransactionConfiguration(transactionManager="txMgr", defaultRollback=true)
public class MyTest {

    @Autowired
    private SessionFactory sessionFactory;

    // class body...
} 
```

我会将 Hibernate 配置为自动部署表作为测试的一部分。

# javascript - $(document).on('click', selector, function() ) 结合 :not

> ID：11050704
> 
> 赞同：3
> 
> 时间：2012-06-15T12:32:35.257
> 
> 标签：javascript, jquery

我有几个列表项，当我单击希望浏览器重定向到“.title > a”链接（href）的项目时。但我不希望“notThis”选择器上有任何事件。

参见示例 [http://jsfiddle.net/VTGwV/29/](http://jsfiddle.net/VTGwV/29/)

```
<div class="item">
<div class="title">
    <a href="www.jsfiddle.net">jsfiddle.net</a>     
</div>
<div> djføljdsaføljdsf a</div>
<div> djføljdsaføljdsf a</div>
<div> djføljdsaføljdsf a</div>
<div class="notThis">
    <a href="/test.html">link1 </a>
    <a href="/test2.html">link2</a>                
</div> 
```

​</p>

脚本

```
​$(document).on('click', '.item', function(event) {
    window.location.href = $(event.currentTarget).find('.title > a').attr('href');        
});​ 
```

我试过 :not('.notThis') 没有任何运气。

**更改** 感谢所有答案，但我发现了另一个问题。如果我对整个项目有一个事件处理程序，我无法点击“notThis”选择器中的链接，因为它只返回“false”。没有办法使用 .not / :not 与 $(document).on('click', --------)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T12:36:23.823

可以测试点击事件是否来源于`.notThis`元素内部（或者元素本身）：​</p>

```
$(document).on('click', '.item', function(event) {
    if($(event.target).closest('.notThis').length > 0) {
        return false; // if you want to ignore the click completely
        // return; // else
    }
    window.location.href = $(event.currentTarget).find('.title > a').attr('href');
});​ 
```

我也认为你可以使用`this`而不是`event.currentTarget`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:40:32.633

您的语法错误，只需像这样使用选择器：

**例子**

```
$("div.item > div:not(.notThis)").click(function(){
    window.location.href = $(this).find('.title > a').attr('href');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:41:42.747

[http://jsfiddle.net/Lcg49/4/](http://jsfiddle.net/Lcg49/4/)

```
var clickable = $('.item').find('div').not('.notThis');

$(clickable).on('click', function(event) {
    alert($(this).parent().find('.title a').attr('href'));
}); 
```

# php - curl_getinfo 返回不存在站点的 HTTP 200 状态代码

> ID：11050705
> 
> 赞同：3
> 
> 时间：2012-06-15T12:32:37.443
> 
> 标签：php, http, curl, web

我通过检查[HTTP 200 状态代码](http://www.w3.org/Protocols/HTTP/HTRESP.html)来检查站点是否正在运行：

```
<?php
$url = 'www.proxyserver-demo.com';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
$retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);
if (200==$retcode)
    {
    echo "All's well";
    }
else
    {
    echo "not so much";
    }
?> 
```

但是，我尝试的每个站点，即使是不存在的站点也不会失败地返回 200 OK 状态，这在不存在的站点的情况下是不可能的。（我的代码总是输出“一切顺利”）

我的操作系统是 Centos linux，这可能是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T16:29:25.197

很抱歉滥用可能应该是评论的答案字段，但我真的想不出一种方法来正确呈现此信息。老实说，我还不知道如何将他们的评论变成任何正确显示和格式化的形状。:-|

无论如何，由于您的代码应该可以正常工作，但对您来说，在您检查 HTTP 响应时它总是会返回“一切正常”，这可能是您的 ISP 正在执行[DNS-highjacking](http://en.wikipedia.org/wiki/DNS_hijacking)，这基本上是返回虚假的 IP 地址数据，重定向您访问他们自己的服务器，通常以用户友好为幌子获取金钱利益。（显示“此页面不存在”的 ISP 页面与广告或域名注册等服务的提供相结合。）

[一种简单的测试方法是使用dig 之](http://linux.die.net/man/1/dig)类的应用程序请求 DNS 数据。对不存在域的正常运行 DNS 服务器的查询应返回 NXDOMAIN 作为其状态：

`notexisting.fake`因此，当我们使用以下命令 检查完全虚假的域时：`dig A notexisting.fake.`通常应该给出以下内容：

```
harald@Midians_Gate:~$ dig A notexisting.fake.

; <<>> DiG 9.7.3 <<>> A notexisting.fake.
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 28725
;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;notexisting.fake.              IN      A

;; AUTHORITY SECTION:
.                       1780    IN      SOA     a.root-servers.net. nstld.verisign-grs.com. 2012061700 1800 900 604800 86400

;; Query time: 24 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Sun Jun 17 18:05:10 2012
;; MSG SIZE  rcvd: 109 
```

如您所见，要求这个不存在的域`notexisting.fake.`返回我们

```
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 28725 
```

而当我们查询 google.com 时，使用`dig A google.com.`

```
harald@Midians_Gate:~$ dig A google.com.

; <<>> DiG 9.7.3 <<>> A google.com.
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 13223
;; flags: qr rd ra; QUERY: 1, ANSWER: 6, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;google.com.                    IN      A

;; ANSWER SECTION:
google.com.             300     IN      A       74.125.132.138
google.com.             300     IN      A       74.125.132.139
google.com.             300     IN      A       74.125.132.101
google.com.             300     IN      A       74.125.132.113
google.com.             300     IN      A       74.125.132.100
google.com.             300     IN      A       74.125.132.102

;; Query time: 29 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Sun Jun 17 18:05:20 2012
;; MSG SIZE  rcvd: 124 
```

我们的查询返回正确的 NOERROR

```
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 13223
;; flags: qr rd ra; QUERY: 1, ANSWER: 6, AUTHORITY: 0, ADDITIONAL: 0 
```

并返回为 A 记录找到的 IP 地址

```
;; ANSWER SECTION:
google.com.             300     IN      A       74.125.132.138
google.com.             300     IN      A       74.125.132.139
google.com.             300     IN      A       74.125.132.101
google.com.             300     IN      A       74.125.132.113
google.com.             300     IN      A       74.125.132.100
google.com.             300     IN      A       74.125.132.102 
```

因此，如果您对假域名的查询返回一个 IP 地址，那么您就知道问题出在您的 DNS 上，并且您的 isp 无疑会将每个不存在的请求重定向到他们自己的服务器，从而扰乱了您的“是我的站点启动策略”，因为您将获得 200 OK 状态，但实际上是来自冒名顶替者。

如果是这种情况，那么您只能：

*   更改您的 DNS 服务器：使用[Google 公共 DNS](https://developers.google.com/speed/public-dns/)（8.8.8.8 和 8.8.4.4）或[opendns](http://www.opendns.com/)（208.67.222.222 和 208.67.220.220）
*   恳求/投诉您的 isp，让他们更改此政策或为您提供您自己的非重定向 DNS 服务器
*   如果您的网络允许，则运行您自己的私有 DNS 服务器进行个人查找。

# gmail - Gmail 聊天：心脏

> ID：11050710
> 
> 赞同：1
> 
> 时间：2012-06-15T12:33:00.187
> 
> 标签：gmail

这不是一个非常重要的问题，但对我来说很重要。我正在与朋友和同事使用 Gmail 聊天，当我写下一颗心时，它会这样做：![在此处输入图像描述](../Images/14f593b1c32e3c2e0fa4ea676a9f8efa.png)

当我的同事也用相同的绑定（`<3`）制作心脏时，它正在这样做：![在此处输入图像描述](../Images/edacaca8657d5798458e91964d98f836.png)

为什么不一样？

我怎么能用gmail聊天做大心脏？

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:35:29.737

您可以使用不同的表情符号。点击输入框右下角的微笑，更改表情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:34:26.090

您可以通过单击文本框中的蓝色笑脸在 gmail 聊天中选择“主题”。

# javascript - 如何在其中添加 raphaeljs 对象 标签

> ID：11050713
> 
> 赞同：8
> 
> 时间：2012-06-15T12:33:08.393
> 
> 标签：javascript, jquery, raphael

```
$(document).ready(function(){                           
    $("#btnAO").live("click", function(){
        $("#canvasdiv").append("<div id='id1' width='50px' height='50px'></div>");
            $("#id1").append(new Raphael(document.getElementById('canvasdiv'), 900, 600).rect(30, 50, 80, 100).attr({
                fill : "blue",
                stroke : "black",
                strokeWidth : 0,
                r : 5
        }));
    });
}); 
```

我已经尝试过在其中添加 Raphael 对象，但它不会显示在屏幕上

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T13:03:43.043

Raphael 渲染到您作为第一个参数提供的容器中。返回值是您用于渲染的 Raphael 纸对象。简而言之，只要切掉`$("#id1").append`它就会出现。

```
$(document).ready(function(){                           
    $("#btnAO").live("click", function(){
        $("#canvasdiv").append("<div id='id1' width='50px' height='50px'></div>");
        var paper = new Raphael(document.getElementById('canvasdiv'), 900, 600);
        paper.rect(30, 50, 80, 100).attr({
            fill : "blue",
            stroke : "black",
            strokeWidth : 0,
            r : 5
        });
    });
}); 
```

* * *

此外，由于您无论如何都在使用 jQuery，因此您可能希望替换为`document.getElementById('canvasdiv')`以`$('#canvasdiv').get(0)`保持一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T02:59:50.937

1.  不需要新关键字

`var paper = Raphael(document.querySelector(target_css_selection_str), svg_width_int, svg_height_int);`

2.  既然你问它返回什么。它通过一个名为“canvas”的属性返回一个 Paper 对象，该对象包含对它刚刚构建的新 SVG 元素的引用。

...顺便说一句，您应该批准@Supr 作为正确答案，我只是加了 2 美分。

# python - 使用日期时间的python默认参数值

> ID：11050714
> 
> 赞同：16
> 
> 时间：2012-06-15T12:33:09.500
> 
> 标签：python, datetime

我有一个简单的 Python 脚本，它使用 Ctl-C 的信号处理程序。如果程序正常完成，则将结束时间传递给“print_results”函数。我希望 print_results 函数有一个可选参数，如果未传递，则只需获取当前的“现在”时间。但是当我从信号处理程序中调用它时，它没有得到正确的时间。

这是我的简化但可重现的程序：

```
import sys
import signal
import urllib2
import urllib
import datetime
import time
import getopt,sys

def signal_handler(signal, frame):
    print_results()
    sys.exit(0)

def print_results(ended=datetime.datetime.now()):
    print "\nEnded at ",ended
    print "Total time: ",(ended - startTime)
    print "Finished ",numIterations," iterations, received ",totalRecords," records"

    numIterations = 0
    maxIterations = 8
    delaySecs = 3
    totalRecords = 0

    # set up signal handler
    signal.signal(signal.SIGINT, signal_handler)

    startTime = datetime.datetime.now()

    print "Starting at ",time.asctime(time.localtime())

    while (numIterations < maxIterations):

        iterStartTime = datetime.datetime.now()

        numIterations += 1

        print "Iteration: ",numIterations

        # sleep if necessary

        if delaySecs > 0:
            time.sleep(delaySecs)

        iterEndTime = datetime.datetime.now()

        print "Iteration time: ",(iterEndTime - iterStartTime)

    endTime = datetime.datetime.now()

    print "Ended at ",time.asctime(time.localtime())
    print "Total test time: ",(endTime - startTime)

    print_results(endTime) 
```

这是我键入 Ctl-C 时发生的情况

```
$ python test.py                                                           
Starting at  Fri Jun 15 08:28:15 2012
Iteration:  1
Iteration time:  0:00:03.003101
Iteration:  2
Iteration time:  0:00:03.003105
Iteration:  3
^C
Ended at  2012-06-15 08:28:15.766496
Total time:  -1 day, 23:59:59.999964
Finished  3  iterations, received  0  records 
```

似乎当 print_results 在没有参数的情况下被调用时，“结束”值没有被正确解释为日期时间对象。但是由于 Python 没有办法进行转换（据我所知），我无法判断出什么问题。

提前致谢，

米奇

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-15T12:36:21.793

您遇到的问题是您正在评估参数中的函数。这意味着`ended=datetime.datetime.now()`在解析 this 时取值，而不是在调用它时取值。你应该做的是这样的：

```
def print_results(ended=None):
    if ended is None:
        ended = datetime.datetime.now()
    ... 
```

这里有一个很好的解释为什么会发生这种情况：[Python中的“Least Astonishment”: The Mutable Default Argument](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

# eclipse - 使用 Eclipse 插件部署 AppEngine 期间出现错误 401 Unauthorized (Invalid OAuth Token)

> ID：11050717
> 
> 赞同：5
> 
> 时间：2012-06-15T12:33:17.723
> 
> 标签：eclipse, google-app-engine, deployment, oauth, http-status-code-401

我正在尝试通过 Eclipse 中一个不幸的相当慢的互联网连接部署一个相当大的应用程序。在文件上传期间大约 15-30 分钟后，部署过程中止并出现 401 Unauthorized (Invalid OAuth Token) 错误。这是某个登录cookie的超时，还是我做错了什么？

解决方法：幸运的是 AppEngine 足够聪明，不会重新上传相同的文件，所以我需要做的就是“appcfg 回滚”并尝试再次部署。最终所有文件都上传了，一切都很好。只是真的很烦...

谢谢，

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:03:22.090

这也发生在我身上。在我本地化和代码拆分我的 GWT 应用程序后，上传 3000 多个文件时多次失败。

我的解决方案是定义一个外部工具来启动 appcfg.cmd 并以这种方式上传。

```
Run menu | External Tools | External Tools Configurations...
Location: ...\appengine-java-sdk-1.7.0\bin\appcfg.cmd
Working Directory: ${project_loc}
Arguments: update ./war 
```

# android - 在第一个框中输入字符后，将焦点转到下一个框

> ID：11050719
> 
> 赞同：2
> 
> 时间：2012-06-15T12:33:27.697
> 
> 标签：android, focus, android-edittext

我必须实现一个应用程序，其中我`edittext`为输入 PIN 码和手机号码设置了小。每个编辑文本一次包含 1 个字符。
现在，当我运行这个应用程序时，我发现对于每个框，我需要将焦点放在每个`edittext`.
因此，在这种情况下，是否可以在第一个输入字符后在下一个编辑文本中设置焦点，然后在第二个输入字符后转到第三个。
所以请帮我解决这个问题

这是布局图像。

![在此处输入图像描述](../Images/b79f55a2880227968392c9148963e300.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:45:32.483

```
1\. implements TextWatcher on EditTexts 
```

然后当你得到 Edittext 的文本**长度是 1**。

```
2\. Change focus on other EditText using 
```

调用`requestFocus()`另一个 EditText..

**代码：（**此代码仅供您理解，根据您的情况和需要可能会有所不同）

```
public class LoginActivity extends Activity implements TextWatcher
{
 .
 .
 .

  editTextUName = (EditText) findViewById(R.id.edttextusername);
  editTextUName.addTextChangedListener(this);
  editTextPwd = (EditText) findViewById(R.id.edttextpassword);
  editTextPwd.addTextChangedListener(this);

@Override
public void afterTextChanged(Editable s)
{
    if (s.toString().length() == 1)
    {
              editTextPwd.requestFocus();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:08:23.553

使用此代码

```
final EditText EditText01 = (EditText) findViewById(R.id.editText01);
final EditText EditText02= (EditText) findViewById(R.id.editText02);
final EditText EditText03 = (EditText) findViewById(R.id.editText03);
final EditText EditText04 = (EditText) findViewById(R.id.editText04);

EditText01.requestFocus();
EditText01.setOnFocusChangeListener(new View.OnFocusChangeListener() {

                    @Override
                    public void onFocusChange(final View v,
                            final boolean hasFocus) {

                        if (hasFocus) {
                            final InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                            // only will trigger it if no physical keyboard is
                            // open
                            mgr.showSoftInput(EditText01,
                                    InputMethodManager.SHOW_IMPLICIT);
                        }

                    }
                });

        EditText01.setOnKeyListener(new View.OnKeyListener() {

            @Override
            public boolean onKey(final View v, final int keyCode,
                    final KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    if (keyCode == KeyEvent.KEYCODE_DEL) {
                        EditText01.requestFocus();
                    } else {
                        EditText02.requestFocus();
                    }
                }
                return false;
            }
        });

        EditText02.setOnKeyListener(new View.OnKeyListener() {

            @Override
            public boolean onKey(final View v, final int keyCode,
                    final KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    if (keyCode == KeyEvent.KEYCODE_DEL) {
                        EditText01.requestFocus();
                    } else {
                        EditText03.requestFocus();
                    }
                }
                return false;
            }
        });
        EditText03.setOnKeyListener(new View.OnKeyListener() {

            @Override
            public boolean onKey(final View v, final int keyCode,
                    final KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    if (keyCode == KeyEvent.KEYCODE_DEL) {
                        EditText02.requestFocus();
                    } else {
                        EditText04.requestFocus();
                    }

                }
                return false;
            }
        });

        EditText04.setOnKeyListener(new View.OnKeyListener() {

            @Override
            public boolean onKey(final View v, final int keyCode,
                    final KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    if (keyCode == KeyEvent.KEYCODE_DEL) {
                        EditText03.requestFocus();
                    } 

                }

                return false;

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T11:32:20.860

添加文本更改侦听器

```
 textView1.addTextChangedListener(new TextWatcher() {
            public void afterTextChanged(Editable s) {

               textView2.requestFocus();

            }

            public void beforeTextChanged(CharSequence s, int start, int count,             int after) {
             }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-29T17:49:47.007

这应该可以正常工作。mPinFirst 等是代表每个 Pin 条目的 EditText。还应该注意退格。

```
 mPinFirst.setOnKeyListener(onKeyListener);
    mPinSecond.setOnKeyListener(onKeyListener);
    mPinThird.setOnKeyListener(onKeyListener);
    mPinFourth.setOnKeyListener(onKeyListener);

View.OnKeyListener onKeyListener = new View.OnKeyListener() {
        @Override
        public boolean onKey(View view, int i, KeyEvent keyEvent) {

        if(KeyEvent.KEYCODE_DEL != keyEvent.getKeyCode()) {
            if (((ESEditText) view).getText().length() == 1)
                if (view.focusSearch(View.FOCUS_RIGHT) != null) {
                    view.focusSearch(View.FOCUS_RIGHT).requestFocus();
                    return true;
                }
        }else{
            ((ESEditText) view).setText("");
            if (view.focusSearch(View.FOCUS_LEFT) != null) {
                view.focusSearch(View.FOCUS_LEFT).requestFocus();
                return true;
            }
        }
        return false;
    }
}; 
```

# java - 从 XSD 文件自动生成 XML 文件

> ID：11050730
> 
> 赞同：-3
> 
> 时间：2012-06-15T12:34:02.230
> 
> 标签：java, python, xml, xsd, automation

> **可能重复：**
> [如何从其 DTD 或 XSD 生成示例 XML 文档？](https://stackoverflow.com/questions/17106/how-to-generate-sample-xml-documents-from-their-dtd-or-xsd)

是否有一种工具可以获取**多个**XSD 文件并生成相应的 XML 文件（所有这些文件都会生成相同的“根元素”）。

如果没有，但您知道任何 API（特别是 Java 或 Python），请在此处分享。例子也很好。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:40:48.923

您可以使用[JAXB](http://jaxb.java.net/)从 XSD 生成所需的 java 对象，并将 java 对象编组/解组为 xml 文件，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:38:48.717

我相信 Apache Xerces 项目会满足您的需求。

我以前没有使用过 Java 的东西，但是我在 shell 脚本中使用了 C++ 绑定和命令行二进制文件。

[http://xerces.apache.org/](http://xerces.apache.org/)

# php - 我可以在 adobe AIR 桌面应用程序中集成支付网关吗？

> ID：11050731
> 
> 赞同：3
> 
> 时间：2012-06-15T12:34:04.387
> 
> 标签：php, apache-flex, adobe, payment-gateway, payment

我们正在开发一个桌面应用程序，我们需要在其中集成支付网关。该应用程序正在使用 adobe air 开发。我们需要检查可行性。有人可以确认在 adobe AIR 中集成支付网关不会成为问题吗？我们可以在 adobe air 桌面应用程序中集成支付网关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:25:04.143

你当然可以，但是它们是陷阱......而且很多。 [在 Adob​​e Flex 中集成 Paypal API](https://stackoverflow.com/questions/10539778/integrating-paypal-api-in-adobe-flex/10541251#10541251)

# ios - 更改个人 Apple 开发者帐户的所有权

> ID：11050732
> 
> 赞同：10
> 
> 时间：2012-06-15T12:34:07.037
> 
> 标签：ios

我希望有人可以在这里提供帮助，这是一个持续存在的问题，没有明显的解决方案。

的背景

早在 2010 年，我就创建了自己的个人苹果开发者帐户，以修补 iOS 开发。当时我工作的公司要求我编写一个应用程序作为测试，看看我们是否可以 a) 编写一个应用程序并 b) 出售它。碰巧这两个案例都是真实的，并且该应用程序已经蓬勃发展成为一个成功的企业。

问题：

我要离开这家公司，我们正试图弄清楚如何给他们这个应用程序，毕竟他们在我制作应用程序时仍然支付薪水，所以我认为他们的应用程序实际上只与我和我的个人开发者有关执照。我目前每个月都会将它赚到的任何资金转给他们。

我们联系了 Apple，他们建议我工作的公司建立一个公司开发者帐户，然后要求转移应用程序。这听起来很棒，我们开始了这个过程，但后来我突然想到，在不同的开发者许可下重新签署应用程序会有效地杀死商店中现有的应用程序。我们所有的评级都会被抹去（而且有很多），这是不可接受的。应用程序的评分对其在商店中的成功极为重要。苹果确认评级和评论不会被转移。我们停止了。

所以，我又来到了这个街区。

我工作的公司甚至建议从我那里购买我的个人帐户，以便他们可以自己运行，但我担心这一点，这似乎是欺诈性的，因为我是该帐户合同的负责人，任何问题都会回到我这里。他们也无法根据我所阅读的内容更改帐户的所有者“姓名”。

有什么建议我们可以解决这个问题吗？

谢谢杰夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:37:14.310

> 我突然想到，在不同的开发者许可下重新签署应用程序会有效地杀死商店中现有的应用程序。

这是错误的。只要您按照 Apple 的建议转移应用程序（您需要为此联系他们），公司只需要从他们的帐户提交新版本即可。你不会失去你的收视率，什么都没有。这一切都会转移到新帐户，包括 iTunes Connect 方面。他们可以用不同的证书签署并提交。只要应用程序 ID 与以前相同（它将是），就没有问题。

听起来你有旧的或不准确的信息，因为我知道有人做了这样的转移，他们保留了所有的评级等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:38:44.227

我也遇到过同样的问题，多次联系苹果后，我们得出的结论是没有其他选择，所以我们删除了应用程序并重新上传到另一个帐户上获得了收益

不仅评级被抹去，而且旧应用的用户在你推送新版本到应用商店时将无法更新它

这是一个非常艰难的决定，但我们别无选择

# php - 如何引发 PDOException？

> ID：11050736
> 
> 赞同：5
> 
> 时间：2012-06-15T12:34:30.223
> 
> 标签：php, exception, pdo

这段代码运行良好，但如果出现任何问题，我会想处理`exception`，所以我故意在其中犯了语法错误，`query`但没有任何反应。下面是代码

```
try {
    $sql = "INSERT INTO journals (topic, author, ) VALUES ('$topic', '$authors', ')";
    echo "1st";
    $lecturers_db->query($sql);
    echo "second";
} catch(PDOException $e) {
    echo $e->getMessage();
    echo $msg = "Error!";
} 
```

如果没有明显的语法错误，代码可以正常工作，但如果出现语法错误，则什么也不会发生，所有代码都在`try block`执行中，而代码中的代码`catch block`从不执行。

我想提出一个`exception`，请问我该怎么做，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T12:39:12.493

确保在初始化 pdo 对象后立即将属性**PDO::ATTR_ERRMODE**设置为**PDO::ERRMODE_EXCEPTION**：

```
$lecturers_db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

之后，任何失败的查询都会引发异常

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T12:37:31.777

抛出异常。代码中的语法错误！= 异常。

```
<?php 
    try {
        $code = 12;
        throw new PDOException('Message', $code );
    } catch (PDOException $e) {

    }
?> 
```

但是，从[maual](http://php.net/manual/en/class.pdoexception.php)：

> 您不应该从您自己的代码中抛出 PDOException。有关 PHP 中的异常的更多信息，请参阅异常。

我的建议是抛出一个一般异常，或者编写您自己的自定义异常来处理您的错误。

# c# - 使用 Process.Start() 方法启动应用程序后的通知

> ID：11050742
> 
> 赞同：3
> 
> 时间：2012-06-15T12:35:07.257
> 
> 标签：c#, .net, process.start

我有一段代码，它基本上使用`Process.Start()`方法调用应用程序。

```
ProcessStartInfo psi = new ProcessStartInfo(strAppPath);
psi.WindowStyle = ProcessWindowStyle.Maximized | ProcessWindowStyle.Normal;
//Starts the xyz application process.
Process xyzProcess = Process.Start(psi);
xyzProcess.WaitForInputIdle(); 
```

尽管该过程在几秒钟内启动，但应用程序可能需要一些时间才能完全初始化。即我的应用程序`xyz`可能需要 5 - 10 秒，具体取决于它所运行的机器（即在更快的 pc 上少于 5 秒，在较慢的 pc 上超过 10 秒）

**我的问题：**有没有办法跟踪这个？通过轮询一些属性，而不是等待某个时间使用`Thread.Sleep(ms)`.

我徒劳地尝试使用以下方法

1.  用一个小的轮询`xyzProcess.Responding`属性`thread.sleep`

2.  肮脏的轮询方法，`xyzProcess.MainWindowTitle`直到它返回一些非空值。

3.  `xyzProcess.WaitForInputIdle(sleeptime)`;

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:14:45.190

您是在等待应用程序初始化，还是只是在等待应用程序执行某些操作？

如果只是应用程序需要“做某事”，那么您可以不等待退出吗？

```
xyzProcess.WaitForExit(); 
```

# java - 最好的选择。在 Java 应用程序中使用 .Net Dll

> ID：11050746
> 
> 赞同：0
> 
> 时间：2012-06-15T12:35:17.430
> 
> 标签：java, .net, java-native-interface, jna, jni4net

我知道三个是关于这个的一些问题，但我还没有找到确切的答案。我们有一个没有依赖项或 p/Invoke 的 .Net dll (C#)。所以它是一个完整的.net 平台库。我们的一位客户想要在 Java 应用程序中使用它。

最好的选择是什么？我一直在研究 jni4net 这可能是一个完美的解决方案，但它似乎不支持 .Net 中的泛型（我们的 dll 使用很多泛型字典和集合）

是JNA最好的选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:57:25.743

几年前我也遇到过类似的问题。我有一个用 Delphi 编写的 dll。（Delphi 是 Borland 销售的基于 Pascal 的 Windows 应用程序开发工具。）我需要从 Java 中调用 dll，但某些 dll 函数的参数和返回类型与 Java 不兼容。（作为一个有趣的，如果无关紧要，除此之外，为 Microsoft 发明 C# 的 Anders Hejlsberg 也为 Borland 发明了 Delphi。）这就是我解决问题的方法。

1) 我确实使用 jni 来允许我的 Java 代码调用 dll。

2) 我在 Delphi 中编写了一个瘦包装 dll，它是我的 Java jni 代码调用的实际 dll。对于那些与 Java 完全兼容的函数，包装器 dll 只是作为一个传递，直接调用实际的 dll 函数并返回返回值。对于那些不兼容的函数，包装器 dll 定义了与 Java 兼容的相应方法，并在调用实际的 dll 之前从 Java 到 Delphi 进行了适当的翻译。

3）我还在我的 jni 调用之上写了一个瘦包装对象。同样，在大多数情况下，java 包装器直接对那些在 Java 和 Delphi 之间完全兼容的函数进行 jni 调用。然而，在我的例子中，一些函数需要我传入 Delphi 对象。所以，我所做的是定义相应的 Java 对象。我的 Java 包装器对象的主要目的是获取这些 Java 对象，将它们转换为与我的 Delphi 包装器 dll 兼容的参数，然后进行适当的 jni 调用。此外，对于那些传回对象的 dll 函数，我的 java 包装器从 jni 调用中获取与 java 兼容的返回值，并创建和组装适当的对象。

这听起来像是很多工作，但实际上并非如此（我的 dll 有超过 100 种方法，以及十几种 Delphi 对象类型）。完成后，编写实际使用 dll 的 Java 应用程序代码非常简单。

关于泛型，这可能是一个问题。但是，如果在现实生活中，您支持的对象类型的数量相对较少（而且经常如此），您可以在包装器中为每个对象类型编写单独的调用。（这就是我们这些记得 Java 2 在他们发明泛型之前曾经做过的事情，它工作得很好，即使它有点不那么优雅。）你的应用程序 Java 代码仍然可以使用泛型。包装器将根据传入的实际类型进行适当的调用。

希望这会给你一些关于如何进行的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T21:59:00.543

要在 JAVA 中使用 .NET DLL，我想说最好的选择是使用 Javonet 之类的本机桥接器。有了这样的桥，您只需将 .NET dll 复制到您的 JAVA 项目文件夹并通过一个方法调用加载它，然后像使用 JAVA 对象一样使用 .NET 对象。您跳过整个原生部分，并获得许多用于数据类型转换、订阅事件、垃圾收集器、异常和许多其他的内置工具。

**使用“Your.dll”的示例代码可能如下所示：**

```
Javonet.addReference("Your.dll");
NObject yourDotNetObject = Javonet.New("MyDotNetClass");
yourDotNetObject.invoke("FooMethod", arg1, arg2);

//out of the box you get also support for all types, arrays, generics etc
yourDotNetObject.generic(Javonet.getType("String")).invoke("Foo", "sample");
//such code could call following .NET method passing String as T
//void Foo<T>(T arg); 
```

因此，正如您看到的半反射语法，您可以访问整个 .NET 世界，包括任何自定义 DLL 或 .NET 框架类。手动解决方案很好，但更适合学习然后在实际项目中使用，因为解决所有问题可能需要更多时间，然后是您的整个项目需要;）

有关更多示例，请查看： [http ://www.javanet.com/quick-start-guide/](http://www.javonet.com/quick-start-guide/)

# performance - 读取 cassandra 日志文件中丢弃的消息

> ID：11050750
> 
> 赞同：3
> 
> 时间：2012-06-15T12:35:37.767
> 
> 标签：performance, cassandra

我在 cassandra 日志文件中有以下消息。

INFO [ScheduledTasks:1] 2012-06-14 12:10:25,515 MessagingService.java（第 663 行）637 READ 消息在过去 5000 毫秒内丢弃 INFO [ScheduledTasks:1] 2012-06-14 12:10:35,528 MessagingService.java（第 663 行）在过去 5000 毫秒内丢弃了 486 条 READ 消息 INFO [ScheduledTasks:1] 2012-06-14 12:10:45,542 MessagingService.java（第 663 行）在过去 5000 毫秒内丢弃了 431 条 READ 消息

同时，当我从 thrift 库访问数据时，请求会超时。这意味着消息在 cassandra 服务器内的数据传输超时。我们可以通过增加 rcp_time_out rpc_timeout_in_ms: 10000 来解决这个问题吗

谢谢马尼什

# android - 如何从 onLayout 重新加载界面？

> ID：11050751
> 
> 赞同：4
> 
> 时间：2012-06-15T12:35:37.790
> 
> 标签：android, layout, reload

我有这个图形用户界面：

线性布局

```
-TableLayout heading
-ViewFlipper flipper
    - TableLayout1
    - TableLayout2
    - TableLayout3
       ... (dynamicly added) 
```

我在 vf.onLayout(..) 中更改了 t1 的宽度，但我无法重绘它......请帮助：/这是代码：

```
 @Override
 protected void onLayout(boolean changed, int left, int top, int right,
 int bottom) {
 super.onLayout(changed, left, top, right, bottom);

 Log.i(TAG, "flipper onLayout");

 int idx = this.getDisplayedChild();
 Log.i(TAG, "flipper displayed child is: " + idx);
 this.heading.cols_widths = some_cols_widths;
 this.heading.resize_cols();
 LinearLayout lay = (LinearLayout) this.heading.getParent();
 lay.requestLayout();    
 } 
```

这让我发疯：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:27:30.757

根据评论，您想在更改视图时更改 viewFlipper 的“标题”。由于您正在调用父级并调用requestLayout，因此只需将超级调用移至最后，因此您不需要调用requestlayout。

```
@Override
protected void onLayout(boolean changed, int left, int top, int right,
int bottom) {
  Log.i(TAG, "flipper onLayout");

  int idx = this.getDisplayedChild();
  Log.i(TAG, "flipper displayed child is: " + idx);
  this.heading.cols_widths = some_cols_widths;
  this.heading.resize_cols();

  super.onLayout(changed, left, top, right, bottom);
} 
```

或者你可以让 resize_cols() 调用 requestLayout 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:40:56.070

所以答案就像 nininho 上面写的：

“使用 postDelayed 调用 requestLayout。”

# xml - 使用 node.js 验证 XML 语法/结构

> ID：11050759
> 
> 赞同：8
> 
> 时间：2012-06-15T12:36:20.177
> 
> 标签：xml, node.js, schema

我想使用 node.js 为以下内容验证 XML。任何人都可以推荐适用于 Windows/Linux 的好的 node.js 模块吗？

*   验证 XML 语法
*   验证 XML 结构（架构）

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-02T18:21:30.573

我知道这是一篇较旧的帖子，但我遇到了它，不幸的是，Ankit 的回答对我没有太大帮助。它充其量只关注输入是否是有效的 XML 语法，而不是是否遵守作为 OP 一部分的模式。

我发现[libxmljs](https://github.com/polotek/libxmljs)是您正在寻找的最佳解决方案。您可以解析、验证基本字符串以及详细结构。

检查 XML 语法的示例如下：

```
program.isValidSyntaxStructure = function (text) {
    try {
        libxmljs.parseXml(text);
    } catch (e) {
        return false;
    }

    return true;
}; 
```

检查特定结构/模式的示例如下：

```
var xsd = '<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"><xs:element name="comment" type="xs:string"/></xs:schema>';
var xml_valid = '<?xml version="1.0"?><comment>A comment</comment>';
var xml_invalid = '<?xml version="1.0"?><commentt>A comment</commentt>';

var xsdDoc = libxml.parseXml(xsd);
var xmlDocValid = libxml.parseXml(xml_valid);
var xmlDocInvalid = libxml.parseXml(xml_invalid);

assert.equal(xmlDocValid.validate(xsdDoc), true);
assert.equal(xmlDocInvalid.validate(xsdDoc), false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:30:39.957

**更新**

请参阅 conrad10781 的答案。这个答案已经过时，因为我链接到的原始 Wiki 页面已被存档，尽管它确实突出了哪些模块可以验证语法和模式。

*过时的信息*

通过[npm](https://npmjs.com)可以使用大量的 XML 解析器。

本机实现（例如 node-expat）确实需要构建 C++ 扩展，因此可能会破坏模块在 Windows 和 Linux 中工作的要求，但由于它们提供的速度，您无论如何都应该尝试它们，特别是如果您正在处理大型 XML 文件。

[xmldom](https://github.com/jindw/xmldom)应该能够从字符串中提供一些非常简单的 XML 解析。然后，您可以创建一个函数来根据解析的输出简单地返回 true/false（查看[DOMParser](https://developer.mozilla.org/en/DOMParser)如何返回错误）。

# ruby-on-rails - Accept_nested_attributes_for 与多态关联

> ID：11050768
> 
> 赞同：0
> 
> 时间：2012-06-15T12:37:02.470
> 
> 标签：ruby-on-rails, ruby, nested-attributes, polymorphic-associations

有什么办法可以在父母之前停止保存孩子。

我正在使用`accepts_nested_attributes_for`多态关联。

我使用了多个选项`validates_presence_of :parent_id`，`validates_assoicated :parent`但没有一个有效。

例如，我确实有一堂课

```
Class Person
  include HasPhoneNumbers
  ..
end

module HasPhoneNumbers
 def self.included(kclass)
   kclass.has_many :phone_numbers, :as => :callable, :dependent => kclass == Person ? :destroy : :nullify
 end
 klass.accepts_nested_attributes_for :phone_numbers, :reject_if => lambda {|pn| pn.keys.any?{|k| k.to_sym != :id && pn[k].blank?} }
end

class PhoneNumber
  belongs_to :callable, :polymorphic => true
end 
```

因此，由于人员对象中的验证而保存人员时，它并没有保存。但是， child(phone_number) 正在保存。所以我需要限制它在父母（人）保存之前不保存孩子（电话号码）。

我确实使用`validates_presence_of`and尝试了多个选项`validates_associated`，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:49:44.083

```
@person = Person.new(params[:person])
ActiveRecord::Base.transaction do
  person.save!
end 
```

如果此人未通过验证，将您的保存包装在事务中应该回滚电话号码保存。

参考：[ActiveRecord 事务](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html "活动记录交易")

# python - django从字符串python中删除标签

> ID：11050770
> 
> 赞同：2
> 
> 时间：2012-06-15T12:37:03.803
> 
> 标签：python, django, html-parser

我想用python从我的字符串中删除所有html标签，我使用这个：

```
from HTMLParser import HTMLParser   

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def get_data(self):
        return ''.join(self.fed)

def strip_tags(html):
    s = MLStripper()
    s.feed(html)
    return s.get_data() 
```

但这删除了我所有的 html 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:13:37.767

如果我理解正确，您想去除 html 标签，但保留一些特定的标签？如果是这种情况 - 那么只需继续监控开始/结束标签，并在需要时处理它们。例子：

```
MY_TAGS = ["tag1", "tag2"]

MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def get_data(self):
        return ''.join(self.fed)

    def handle_starttag(self, tag, attrs):
        if tag in MY_TAGS:
            self.fed.append("<%s>" % tag) # tag is only string, no < or >.
    def handle_endtag(self, tag):
        if tag in MY_TAGS:
            self.fed.append("</%s>" % tag) 
```

# jquery - 带有 jquery 的 rel attr 总是取第一个值

> ID：11050772
> 
> 赞同：-2
> 
> 时间：2012-06-15T12:37:05.160
> 
> 标签：jquery, attr, rel

我有这个：

HTML：

```
<div id="selectedsongs">
<a href="#" rel="1">song1></a>
<a href="#" rel="2">song2></a>
<a href="#" rel="3">song3></a>
</div> 
```

然后：

```
selectedBtn = $('#selectedsong');

selectedBtn.click(function()
{
  self.selectedsong($('a', this).attr('rel'));
  return false;
}); 
```

但总是取第一个链接的 rel 值，在这种情况下，值为“1”。

为什么？:(

非常感谢你！;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:40:48.200

改为这样做：

```
<div id="selectedsongs">
<a href="#" rel="1">song1></a>
<a href="#" rel="2">song2></a>
<a href="#" rel="3">song3></a>
</div>

$('#selectedsongs a').click(function() {
   alert($(this).attr('rel'));
}); 
```

[工作示例](http://jsfiddle.net/manseuk/XrWk6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:42:04.213

```
$('#selectedsongs a').click(function() {
   selectedsong($(this).attr('rel'));
   return false;
}); 
```

# jquery - 悬停时的jQuery字体颜色动画不起作用

> ID：11050775
> 
> 赞同：0
> 
> 时间：2012-06-15T12:37:22.133
> 
> 标签：jquery, fonts, colors, jquery-animate, onhover

我正在使用以下代码尝试获取导航链接的字体颜色以在悬停/关闭悬停时进行动画处理。边框底部颜色正确更改，但字体颜色没有。它还抛弃了我的当前菜单项 CSS 规则以获得不同的颜色。所需的行为是字体颜色在悬停时变为蓝色，并在悬停时恢复为灰白色，除非它是当前菜单项，其字体颜色应为黄色。我是这方面的新手，所以请原谅我缺乏风格。我已经包含了颜色支持的 jQuery UI 文件。任何帮助是极大的赞赏。完整的例子可以在这里看到[http://www.buenolisto.com/alma](http://www.buenolisto.com/alma)

**JS**

```
 jQuery("li.social").hover(function(){
        jQuery(this).find("img").stop(true, true).animate({'marginTop': "-=20px"}, 'fast');
    }, function(){
        jQuery(this).find("img").stop(true, true).animate({'marginTop': "+=20px"}, 'fast');
    })
    jQuery("li.reservas").hover(function(){
        jQuery(this).find("img").stop(true, true).fadeOut({'marginTop': "-=30px"}, 'slow');
    }, function(){
        jQuery(this).find("img").stop(true, true).fadeIn({'marginTop': "+=30px"}, 'slow');
    })
    jQuery('ul.menu li a').hover(function() {
        jQuery(this).stop(true, true).animate({'borderBottomColor': "#2E9ECE",'color': "#FEFEFE"}, 'slow');
    }, function() {
        jQuery(this).stop(true, true).animate({'borderBottomColor': "#FFDF85",'color': "#2E9ECE"}, 'fast');
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:59:28.550

回答有关字体颜色的部分。颜色是错误的方式！

`'color':'#2E9ECE'`应该在里面的第一个函数中`.hover()`并且`#FEFEFE`应该在第二个函数中。

完整更新的代码应该是：

```
jQuery('ul.menu li a').hover(function() {
    jQuery(this).stop(true, true).animate({borderBottomColor:'#2E9ECE', color:'#2E9ECE'}, 'slow');
    Cufon.refresh(this);
}, function() {
    jQuery(this).stop(true, true).animate({borderBottomColor:'#FFDF85', color:'#FEFEFE'}, 'fast');
    Cufon.refresh(this);
}) 
```

**注意：**使用`animate({})`语法，您不需要引用属性。

**编辑：**问题的第二部分：

要从悬停代码中排除*当前选定的菜单项*，您可以更新 jQuery 选择器以[`.not()`](http://api.jquery.com/not-selector/)包含具有 current-menu-item 类的列表项

```
jQuery('ul li a:not(.current-menu-item)').hover(...) 
```

这应该可以解决您问题的第二部分。

**编辑 2：**由于您使用[Cufon](http://cufon.shoqolate.com/generate/)来渲染字体，因此您需要在设置使用 jQuery 后刷新它，否则它将以文本最初的颜色（白色）呈现。添加`Cufon.refresh(this);`到这两种方法可能会有一些效果，但我无法测试它，因为您没有提供可编辑的源代码。

在阅读完这篇文章后，我认为 Cufon 字体不能动画 - 请参阅[https://groups.google.com/forum/?fromgroups#!topic/cufon/RFfz6DDY0wU](https://groups.google.com/forum/?fromgroups#!topic/cufon/RFfz6DDY0wU)所以你应该使用[CSS3 字体](http://www.w3.org/TR/css3-fonts/)，它可以是动画或保留 Cufon 字体，只需在悬停时将字体颜色从白色变为蓝色，而不是动画。

# sharepoint - 使用 XSLT 在 DVWP 中获取多值查找列的计数值

> ID：11050777
> 
> 赞同：-2
> 
> 时间：2012-06-15T12:37:32.433
> 
> 标签：sharepoint, xslt, sharepoint-2010

我正在构建一个“仪表板”，在其中我使用 DVWP 和 XSLT 向客户端显示任务总数、打开的数量、关闭的数量等内容，类似于[本文](http://msdn.microsoft.com/en-us/library/cc300164%28v=office.12%29.aspx)

我的问题是我有一个多值查找列，我需要获取值的计数，但我无法用我尝试过的方法生成任何结果。

任何关于如何完成的建议或建议都会很棒。

因此，要添加到上述内容作为更新：

我不确定如何达到预期结果的最佳方法。本质上，我有一个多值查找列，目前有 20 个值。客户端可以在需要时添加新值。所以我试图做的是获取他们为每条记录选择的值的总计类型计数。

例如，假设查找列有五 (5) 个值：

价值 1 价值 2 价值 3 价值 4 价值 5

在 newform.aspx 中，它们能够选择多个值（因此可以选择值 3 和值 5；或者值 2、值 4 和值 5 等）。在列表视图中，它当然会显示应有的选择。我试图做的是获得这些值的总数。

例如，输出看起来像：

```
Value 1 : 5
Value 2 : 1
Value 3 : 2
Value 4 : 3
Value 5 : 6
Value 3 & 5 : 4

Value 2,4, & 5: 3 
```

我不确定 XSLT 是否可以开发这样的东西，因为我以前不必使用如此复杂的查找列来执行此操作。通常我会做类似下面的事情，但这只能让我了解基础知识，并且由于可以组合这些值，我不确定如何处理：

```
<xsl:template name="dvt_1.body">
    <xsl:param name="Rows"/>
    <xsl:variable name="total1" select="count(/dsQueryResponse/Rows/Row/@MyLookupCol.[contains(.,'1;#Value1')])"></xsl:variable>
                    <xsl:call-template name="cs3_totalRow">
                        <xsl:with-param name="cs3_RowName1">
                            Value 1
                        </xsl:with-param>
                        <xsl:with-param name="cs3_RowValue1">
                            <xsl:value-of select="$total1"/>
                        </xsl:with-param>
                    </xsl:call-template>
            </xsl:template>

            <xsl:template name="totalsRow">
                <xsl:param name="RowName1"></xsl:param>
                <xsl:param name="RowValue1"></xsl:param>
                    <table>
                        <tr>
                            <td>
                                <xsl:value-of select="$cs3_RowName1"/>:
                            </td>
                            <td>
                                <xsl:value-of select="$cs3_RowValue1"/>
                            </td>
                        </tr>
                    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:05:52.620

好的; 弄清楚了。您将需要使用使用键的 MUENCHIAN METHOD 来生成“不同的分组依据”列表，然后在表达式中使用 count 并计算键。

使用的参考文献在[这里](http://blackpoint.dk/umbraco-workbench/xslt/grouping--distinct-values.aspx?p=3)和[这里](http://www.jenitennison.com/xslt/grouping/muenchian.html)

有关详细信息，请参见下面的代码：

```
<!--GROUPING USING THE MUENCHIAN METHOD-->
<!--Add a key as shown below. This is important! Will not "group by" without it-->
<xsl:key name="YourKeyNameHere" match="Row" use="@YourColumnName"/>

   <xsl:template match="/">
      <!--Get your column values look you normally would-->
      <xsl:variable name="cbs_Rows" select="/dsQueryResponse/Rows/Row/@YourColumnName"/>
      <table border="0" width="100%" cellpadding="2" cellspacing="0">
         <tr valign="top">
            <th class="ms-vh" nowrap="nowrap">TheValueName</th>
            <th class="ms-vh" nowrap="nowrap">ValueTotals</th>
         </tr>
         <!--This gets the distinct strings for you.-->
         <xsl:for-each select="//Row[generate-id() = generate-id(key('YourKeyName', @YourColumnName)[1])]">
            <xsl:sort select="@YourColumnName"/>
            <xsl:for-each select="key('YourKeyName', @YourColumnName)">
                <xsl:call-template name="Rows.RowView" />
            </xsl:for-each>
         </xsl:for-each>
      </table>         
   </xsl:template>
   <!--then build your row view-->
   <xsl:template name="Rows.RowView">
      <xsl:variable name="SortValue" select="ddwrt:NameChanged(string(@YourColumnName), 0)"/>
      <xsl:if test="string-length($SortValue) &gt; 0">
         <tr id="group0{generate-id()}">
            <td>
               <xsl:value-of select="@YourColumnName"/>
            </td>
            <td>
                <xsl:value-of select="count(key('YourKeyName', @YourColumnName))"></xsl:value-of>
            </td>
         </tr>
      </xsl:if>
   </xsl:template> 
```

# python - cx_Oracle callproc() 方法

> ID：11050785
> 
> 赞同：0
> 
> 时间：2012-06-15T12:38:14.230
> 
> 标签：python, cx-oracle

使用 callproc() 调用带参数的存储过程时出现错误。

```
cur.callproc("TEST.manage_partitions_pkg.test", ["to_date('20120525', 'YYYYMMDD')", 1,     "tablename_type('MESSAGE', 'VALID_MESSAGE')", True, True]) 
```

但它似乎无法识别 SQL 参数。我是否需要以某种方式将 SQL 参数转换为 python？如果是这样，那将如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:56:41.303

您的第一个参数应该是一个[cx_Oracle.Date](http://cx-oracle.sourceforge.net/html/module.html#cx_Oracle.Date)对象，您可以使用`cx_Oracle.Date(2012, 5, 25)`. 我采用的第三个参数只是一个字符串，您不希望它是一个函数调用，如果是，您可以使用`cur.callfunc('tablename_type', ReturnType, ['MESSAGE', 'VALID_MESSAGE'])`它并将其内联到您的过程调用中。

# php - 让 codeigniter 在切诺基上工作

> ID：11050788
> 
> 赞同：0
> 
> 时间：2012-06-15T12:38:32.497
> 
> 标签：php, codeigniter, ubuntu, cherokee

我刚刚设置了一个切诺基服务器来进行测试，到目前为止，我喜欢它的性能和易于设置。但是有一个问题，codeigniter 似乎不太好用。

我总是得到“拒绝访问”

您如何使用 cherokee 服务器设置 codeigniter？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:05:54.587

给其他会读到这篇文章的人。

切诺基以特定方式遵循行为（从上到下）

这是您必须按此顺序执行的操作

创建规则目录 /media 并将处理程序更改为 List & Send （这是您要放置 css、图像、js 等的地方，并使其非最终

将默认值更改为重定向，将处理程序更改为类型：内部，正则表达式：^(.*)$，替换：/index.php/$1

使用wizard->languages->php创建新规则，确保它的处理程序是FastCGI，平衡器是Round Robin，php解释器是127.0.0.1:47990，在final上做这个

* * *

将扩展 php 拖到列表中的第一个，目录 /media 第二个，默认最后一个。

# java - 在视图上绘制简单的文本

> ID：11050793
> 
> 赞同：2
> 
> 时间：2012-06-15T12:38:53.333
> 
> 标签：java, android, android-view

我一直在开发绘图应用程序，但遇到了一些问题：手指绘图的平均值已经完成，但现在我需要制作任何允许用户在`View`. 所以，请看我的代码：

```
public class PainterView extends View implements DrawingListener {

    private Painter painter;

    private Bitmap bitmap;
    private Paint bitmapPaint;
    private Path path;
    private Paint paint;

    public PainterView(Context context, Painter painter) {

        super(context);
        this.painter=painter;
        this.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                float x = event.getX();
                float y = event.getY();

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        PainterView.this.painter.touchStart(x, y);
                        break;
                    case MotionEvent.ACTION_MOVE:
                        PainterView.this.painter.touchMove(x, y);
                        break;
                    case MotionEvent.ACTION_UP:
                        PainterView.this.painter.touchUp();
                        break;
                }

                return true;
            }

        });
        this.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
                Log.e("event", "click");
            }

        });
        this.setOnLongClickListener(new OnLongClickListener() {
            public boolean onLongClick(View v) {
                Log.e("event", "long");
                return true;
            }

        });  
    }

    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    protected void onDraw(Canvas canvas) {
        if (bitmap!=null) {
            canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
            canvas.drawPath(path, paint);
        } 
    }

    public void onPictureUpdate(Bitmap bitmap, Paint bitmapPaint, Path path, Paint paint) {

        this.bitmap=bitmap;
        this.bitmapPaint=bitmapPaint;
        this.path=path;
        this.paint=paint;
        invalidate();
    }

    public void setPainter(Painter painter) {
        this.painter=painter;
    }
} 
```

这是绘图的代码；绘画的过程在`Painter`课堂上。所以，现在我需要允许用户写一个简单的文本。我认为我可以通过长按来做到这一点——用户长按，键盘打开，用户可以输入文本。但它不起作用！我的日志中没有看到任何字符串。

请告诉我有关我的问题的建议或一些想法，我如何才能意识到我需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:58:45.657

我很确定`OnTouchListener`当你使用触摸事件时`return true`。试试`return super.onTouch(v, event)`。

# performance - RMS 最小化加速

> ID：11050799
> 
> 赞同：0
> 
> 时间：2012-06-15T12:39:00.767
> 
> 标签：performance, matlab, optimization

【环境：MATLAB 64位、Windows 7、Intel I5-2320】

我想对实验数据进行 RMS 拟合`y`，所以我正在最小化以下函数（通过使用`fminsearch`）：

```
minfunc = rms(y - fitfunc) 
```

从一般的角度来看，最小化是否有意义：

```
minfunc = sum((y - fitfunc) .^ 2) 
```

相反，然后（在最小化之后）只是`minfunc = sqrt(minfunc / N)`为了得到合适的 RMS 误差？

重新提出这个问题，每次`fminsearch`不做会节省多少时间（大致以百分比计） ？如果我的 CPU / MATLAB 速度如此之快以至于它不会将性能提高至少百分之一，我不想降低我的代码的可读性。`sqrt``1/(N - 1)`

更新：我尝试过简单的测试，但结果并不清楚：取决于 的实际值`minfunc`，`fminsearch`需要或多或少的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:39:23.993

性能问题的一般答案：

如果您只是想弄清楚什么更快，请设计一个基准并运行几次。

通过仅提供一般信息，您不太可能确定哪种方法快 1%。

# sage - 使用 SAGE 验证签名 ECDSA

> ID：11050801
> 
> 赞同：0
> 
> 时间：2012-06-15T12:39:09.480
> 
> 标签：sage, elliptic-curve

在 ECDSA 算法（验证签名）中，您必须使用下一个公式计算一个新点： (x0,y0) = u1*P+U2*P_a

我如何计算这个新点的坐标？，我在 SAGE 中尝试了这句话，但它不起作用。

X = (整数(u1)*P)+(整数(u2)*P_a)

你能帮助我吗？。非常感谢。

您可以在此处下载代码并尝试在 SAGE 中执行：[https ://dl.dropbox.com/u/39374382/question.sws](https://dl.dropbox.com/u/39374382/question.sws)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:22:36.717

如果 P1 和 P2 是（相同的）椭圆曲线 E 上的点，并且 a,b 是整数，则

```
Q = a*P1 + b*P2 
```

当然有效。您可以使用 Q.xy() 从点 Q 中获取坐标。

例子：

```
sage: E = EllipticCurve('389a1')
sage: P1,P2 = E.gens(); P1,P2
((-1 : 1 : 1), (0 : -1 : 1))
sage: Q = 3*P1-2*P2; Q
(-5/49 : 62/343 : 1)
sage: Q.xy()
(-5/49, 62/343) 
```

# jquery - 将 Html 表格转换为 Excel

> ID：11050815
> 
> 赞同：0
> 
> 时间：2012-06-15T12:40:25.353
> 
> 标签：jquery, asp.net-mvc-3

我想将 HTML 表导出到 MVC 中的 excel 中。我的控制器中有以下代码：

```
 public JsonResult ExportToExcel(Control ctl)
        {

            Response.Clear();
            Response.ContentType = "application/ms-excel";
            Response.AddHeader("content-disposition", "attachment;filename=ExcelCopy.xls");
            System.IO.StringWriter sw = new System.IO.StringWriter();
            HtmlTextWriter hw = new HtmlTextWriter(sw);
            ctl.RenderControl(hw);
            Response.Write(sw.ToString());
            Response.End();
            return Json(1);
        } 
```

以及 jQuery 中的以下函数：

```
 function btnConvertToExcelClick() {

        var inputParamtrs={ ????????? }
         $.ajax({
                type: "POST",
                url: "/Expenses/ExportToExcel",
                data: inputParamtrs,
                success: function (json) {

                         }

        });
        return false;
    } 
```

我想我想问的是如何将整个 HTML 表**作为 Control**传递给 JsonResult 函数。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:44:36.143

Json 不是 Excel 支持的格式，因此您使用了错误的 ActionResult。

而是尝试将您的 excel 文件创建为 HTML 表格或 CSV 文件。我建议导出 CSV 文件，因为它可能是最容易构建的。

此外，您可以使用 excel 库来构建 Excel 文件。这里有一对。 [http://e-infotainment.com/applications/csharp-excel-library/](http://e-infotainment.com/applications/csharp-excel-library/) http://code.google.com/p/excellibrary/

构建 CSV 后，您可以将 CSV 与 ContentResult（而不是 json）一起返回。

```
 public ActionResult MakeExcelCSV()
    {
        string excelCSV = null;
        // consruct your CSV
        return Content(excelCSV, "application/ms-excel");
    } 
```

或者，如果您使用库制作了一个 excel 文件，您可以使用 FileResult（而不是 json）返回它

```
 public ActionResult MakeExcelFile()
    {
        Stream excelStream = null;
        // consruct your excel file
        return File(excelStream, "application/ms-excel", "myexcel.xlsx");
    } 
```

无论哪种情况，您都不需要 ajax 调用来加载内容，只需链接到它并在新窗口中打开它。

```
<a href="/Controller/MakeExcelFile" target="ExcelFile"> Your Text </a> 
```

# android - 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

> ID：11050817
> 
> 赞同：158
> 
> 时间：2012-06-15T12:40:33.583
> 
> 标签：android, android-listview

我创建了一个这样的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/list" >
</ListView> 
```

和一个活动：

```
public class ExampleActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainlist);
    }
} 
```

如你所见，我没有做任何其他事情。但我得到了错误：

> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

即使`android:id="@+id/list"`我的 xml 中有该行。

问题是什么？

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-06-15T12:41:31.763

像这样重命名 ListView 的 id，

```
<ListView android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

由于您使用的是 xml 文件，因此必须在提及 ID 时`ListActivity`指定关键字*android 。*

如果您需要自定义`ListView`而不是扩展 a `ListActivity`，您必须简单地扩展 an`Activity`并且应该具有相同的 id 而没有关键字*android*。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-15T12:41:45.710

您的`mainlist.xml`文件中应该有一个列表视图，其 id 为`@android:id/list`

```
<ListView
    android:id="@android:id/list"
    android:layout_height="wrap_content"
    android:layout_height="fill_parent"/> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-15T12:54:05.470

```
<ListView android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

这应该可以解决您的问题

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-09T05:15:14.887

我根据上面的反馈修复了这个问题的确切方法，因为我一开始无法让它工作：

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@android:id/list"
>
</ListView> 
```

MainActivity.java：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
addPreferencesFromResource(R.xml.preferences); 
```

首选项.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<PreferenceCategory
    android:key="upgradecategory"
    android:title="Upgrade" >
    <Preference
        android:key="download"
        android:title="Get OnCall Pager Pro"
        android:summary="Touch to download the Pro Version!" />
</PreferenceCategory>
</PreferenceScreen> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-22T10:13:11.337

继承**Activity**类而不是**ListActivity**可以解决此问题。

```
public class ExampleActivity extends Activity  {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.mainlist);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-06T04:17:22.747

```
<ListView android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false"
        android:scrollbars="vertical"/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-13T01:34:30.783

影响我的另一件事：如果您有多个测试设备，请确保您正在更改设备使用的布局。就我而言，我花了一段时间对“layout”目录中的 xmls 进行更改，直到我发现我的较大手机（我在测试中途切换到）正在使用“layout-sw360dp”目录中的 xmls。呸！

# mysql - 案例 何时使用 AND？

> ID：11050822
> 
> 赞同：2
> 
> 时间：2012-06-15T12:40:51.697
> 
> 标签：mysql, sql, database

我想使用`Case` `When`条件`AND`，它没有正确计算总和。

例如：

```
SELECT DATE(`SubmitDate`), 
     SUM(CASE status WHEN 'New' AND `Type` = 'consumer' THEN 1 ELSE 0 END) as new_consumer,
     SUM(CASE status WHEN 'New' AND `Type` = 'business' THEN 1 ELSE 0 END) as new_business
FROM report
WHERE `source` = 'net'
group by DATE(`SubmitDate`) Order by `SubmitDate` DESC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T12:46:09.813

您需要使用`CASE WHEN [Condition] THEN...`而不是简单的 case 表达式：

```
SELECT DATE(`SubmitDate`), 
     SUM(CASE WHEN status = 'New' AND `Type` = 'consumer' THEN 1 ELSE 0 END) as new_consumer,
     SUM(CASE WHEN status = 'New' AND `Type` = 'business' THEN 1 ELSE 0 END) as new_business
FROM report
WHERE `source` = 'net'
group by DATE(`SubmitDate`) Order by `SubmitDate` DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:46:17.270

你应该写

```
CASE  WHEN status='New' AND `Type` = 'consumer' THEN 1 ELSE 0 END 
```

检查[CASE WHEN的语法](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)

# javascript - 如果数据表中只有一页，则禁用分页

> ID：11050826
> 
> 赞同：63
> 
> 时间：2012-06-15T12:41:19.023
> 
> 标签：javascript, datatables, pagination

我正在实施数据包，根据我的要求，除了分页问题外，大部分问题都已解决。就我而言，每次显示分页导航。如果根本只有一页，我想禁用分页导航。怎么做？我的代码是这样的：

**JS**

```
<script>
  function fnFilterColumn(i) {

    $('#example').dataTable().fnFilter(
      $("#col" + (i + 1) + "_filter").val(),
      i
    );
  }
  $(document).ready(function() {

    $('#example').dataTable({
      "bProcessing": true,
      "sAjaxSource": "datatable-interestdb.php",
      "bJQueryUI": true,
      "sPaginationType": "full_numbers",
      "sDom": 'T<"clear">lfrtip',
      "oTableTools": {
        "aButtons": [

          {
            "sExtends": "csv",
            "sButtonText": "Save to CSV"
          }
        ]
      },
      "oLanguage": {
        "sSearch": "Search all columns:"
      }

    });

    $("#example").dataTable().columnFilter({
      aoColumns: [
        null,
        null,
        null,
        null
      ]
    });

    $("#col1_filter").keyup(function() {
      fnFilterColumn(0);
    });

  });
</script> 
```

**HTML**

```
<table cellpadding="3" cellspacing="0" border="0" class="display userTable" aria-describedby="example_info">

  <tbody>
    <tr id="filter_col1">
      <td>Interest:</td>
      <td>
        <input type="text" name="col1_filter" id="col1_filter">
      </td>
    </tr>
  </tbody>
</table>

<table width="100%" border="0" align="center" cellpadding="2" cellspacing="1" class="form_table display" id="example">

  <thead>
    <tr>
      <th class="sorting_asc" width="25%">Interest</th>
      <th width="25%">Name</th>
      <th width="25%">Email</th>
      <th width="25%">Contact No</th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </tfoot>

</table> 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-09-12T17:12:27.957

根据 Nicola 的回答，您可以在绘制表格后使用 fnDrawCallback() 回调和 oSettings 对象隐藏表格分页。使用 oSettings，您无需了解有关表格设置的任何信息（每页的记录、特定于表格的选择器等）

以下检查每页显示长度是否大于总记录，如果是则隐藏分页：

```
$('#your_table_selector').dataTable({
    "fnDrawCallback": function(oSettings) {
        if (oSettings._iDisplayLength > oSettings.fnRecordsDisplay()) {
            $(oSettings.nTableWrapper).find('.dataTables_paginate').hide();
        } else {
             $(oSettings.nTableWrapper).find('.dataTables_paginate').show();
        }
    }
}); 
```

文档

*   [fnDrawCallback()](http://www.datatables.net/usage/callbacks)
*   [o设置](http://datatables.net/docs/DataTables/1.9.3/DataTable.models.oSettings.html)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-15T12:51:02.353

我认为你必须动态隐藏它们，你可以使用`fnDrawCallback()`

```
$('#example').dataTable({
    "fnDrawCallback": function(oSettings) {
        if ($('#example tr').length < 11) {
            $('.dataTables_paginate').hide();
        }
    }
});​ 
```

编辑 - 在[这里](http://datatables.net/forums/discussion/131/disabling-pagination-navigation-when-returning-only-one-page-of-results/p1)找到的另一种方式可能是

```
"fnDrawCallback":function(){
      if ( $('#example_paginate span span.paginate_button').size()) {
      $('#example_paginate')[0].style.display = "block";
     } else {
     $('#example_paginate')[0].style.display = "none";
   }
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-04-15T00:31:30.363

请参阅我的功能插件[conditionalPaging](https://github.com/DataTables/Plugins/blob/master/features/conditionalPaging/dataTables.conditionalPaging.js)。

用法：

```
$('#myTable').DataTable({
    conditionalPaging: true
});

or

$('#myTable').DataTable({
    conditionalPaging: {
        style: 'fade',
        speed: 500 // optional
    }
}); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-10-27T20:14:35.677

这是在 JQuery Datatables V1.10+ 中工作时的正确方法。流程与之前的版本大致相同，但事件名称和 API 方法略有不同：

```
$(table_selector).dataTable({
    preDrawCallback: function (settings) {
        var api = new $.fn.dataTable.Api(settings);
        var pagination = $(this)
            .closest('.dataTables_wrapper')
            .find('.dataTables_paginate');
        pagination.toggle(api.page.info().pages > 1);
    }
}); 
```

## 文档

*   [https://datatables.net/reference/option/preDrawCallback](https://datatables.net/reference/option/preDrawCallback)
*   [https://datatables.net/reference/api/page.info()](https://datatables.net/reference/api/page.info())

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-06T08:37:42.813

将此代码添加到您的数据表初始化请求中。

**查询**

应用于**单个**数据表：

```
"fnDrawCallback": function (oSettings) {
  var pgr = $(oSettings.nTableWrapper).find('.dataTables_paginate')
  if (oSettings._iDisplayLength > oSettings.fnRecordsDisplay()) {
    pgr.hide();
  } else {
    pgr.show()
  }
} 
```

* * *

适用于**所有**数据表：

```
"fnDrawCallback": null 
```

编辑`datatables.js`以在整个站点范围内应用代码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-12-20T12:59:51.300

我正在做以下事情来实现这个目标，因为它是上面没有表达的更动态的解决方案。首先它获取总页数，然后决定显示/隐藏分页。这段代码的美妙之处在于只有当用户更改页面长度时它才会生效。

```
jQuery('#example').DataTable({
    fnDrawCallback: function(oSettings) {
        var totalPages = this.api().page.info().pages;
        if(totalPages == 1){ 
            jQuery('.dataTables_paginate').hide(); 
        }
        else { 
            jQuery('.dataTables_paginate').show(); 
        }
    }
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-20T16:02:13.407

**jQuery** - 我尝试了以下选项，它对我有用

```
 $("#your_tbl_selector").dataTable({
    "pageLength": 3,
    "autoWidth": false,
    "fixedHeader": {"header": false, "footer": false},
    "columnDefs": [{ "width": "100%", "targets": 0 }],
    "bPaginate": true,
    "bLengthChange": false,
    "bFilter": true,
    "bInfo": false,
    "bAutoWidth": false,
    "oLanguage": {
     "oPaginate": {
       "sNext": "",
       "sPrevious": ""
     }
   },
   "fnDrawCallback": function(oSettings) {                 
        if (oSettings._iDisplayLength >= oSettings.fnRecordsDisplay()) {
          $(oSettings.nTableWrapper).find('.dataTables_paginate').hide();
        }
    }
}); 
```

[数据表输出视图](https://i.stack.imgur.com/oruJz.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-12T13:07:13.273

我更喜欢@sina 的解决方案。做得好。

但我的有一些必要的改进。@sina 忘记了在`else`必要时再次显示分页的部分。并且我添加了定义`all`选项的可能性，`lengthMenu`如下所示：

```
jQuery('#your_table_selector').dataTable({
    "lengthMenu": [[10, 25, 50, 100, 250, 500, -1], [10, 25, 50, 100, 250, 500, "All"]],

    "fnDrawCallback": function(oSettings) {
        if (oSettings._iDisplayLength == -1
            || oSettings._iDisplayLength > oSettings.fnRecordsDisplay())
        {
            jQuery(oSettings.nTableWrapper).find('.dataTables_paginate').hide();
        } else {
            jQuery(oSettings.nTableWrapper).find('.dataTables_paginate').show();
        }
    }
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-13T02:23:10.607

此回调函数通常适用于任何数据表，而无需对表 ID 进行硬编码：

```
$('.data-table').dataTable({
    fnDrawCallback: function(oSettings) {
       if(oSettings.aoData.length <= oSettings._iDisplayLength){
         $(oSettings.nTableWrapper).find('.dataTables_paginate').hide();
       }
    }
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-12-26T03:43:32.963

我知道这是一篇旧帖子，但对于我们这些将使用它并且像我一样患有强迫症的人来说，需要进行更改。

更改 if 语句，

```
if (oSettings._iDisplayLength > oSettings.fnRecordsDisplay()) 
```

到

```
if (oSettings._iDisplayLength >= oSettings.fnRecordsDisplay()) 
```

通过这个小改动，您将看到记录长度大于 10、25、50、100 的分页按钮，而不是仅显示 10 条记录的分页按钮，技术上 10、25 等记录仍然是一页视图。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-19T13:32:41.620

只需将以下内容添加到您的样式表中：

```
.dataTables_paginate .paginate_button.disabled {
    display: none;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-25T06:26:51.600

你也可以按照这种方式。

```
"fnDrawCallback":function(){
      if(jQuery('table#table_id td').hasClass('dataTables_empty')){
            jQuery('div.dataTables_paginate.paging_full_numbers').hide();
      } else {
            jQuery('div.dataTables_paginate.paging_full_numbers').show();
      }
 } 
```

这对我有用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-05-31T07:19:04.387

我试图在每个条目的数据表中将 sPaginationType 设为 Dynamic 但我找不到合适的解决方案但我所做的是

```
"fnDrawCallback": function(oSettings) {
    $('select[name="usertable_length"]').on('change', function(e) {
        var valueSelected  = this.value;
        if ( valueSelected < 10 ) {
            $('.dataTables_paginate').hide();
        } else {
            $('.dataTables_paginate').show();
        }
    });
}, 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-07-25T14:01:37.473

```
$('#dataTable_ListeUser').DataTable( {

    //usual pager parameters//

    "drawCallback": function ( settings ) {

    /*show pager if only necessary
    console.log(this.fnSettings());*/
    if (Math.ceil((this.fnSettings().fnRecordsDisplay()) / this.fnSettings()._iDisplayLength) > 1) {
        $('#dataTable_ListeUser_paginate').css("display", "block");     
    } else {                
        $('#dataTable_ListeUser_paginate').css("display", "none");
    }

    }
   }); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-06-15T12:46:25.927

这不是直接可能的，因为 DataTables 不支持启用和禁用功能是运行时的。但是，您可以使用 fnDrawCallback() 函数检查是否只有一页，如果是则隐藏分页控件。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-30T16:52:11.403

如果您的数据不是动态的，即服务器生成 HTML 表，然后由 DataTables 增强，您可以在服务器上呈现分页选项（我使用的是 razor）。

```
$("#results").dataTable({
  paging: @(Model.ResultCount > Model.PageSize ? "true" : "false"),
  // more ...
}); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-15T08:20:54.783

这是我的解决方案，如果您在同一页面上有多个表格，它也可以工作。例如，它可以防止冲突（表 A 必须有分页，而 B 不能）。

我的代码中的 tableId 永远不会未定义。如果您尚未为您的表定义 ID，dataTable 将通过添加类似“DataTables_Table_0”的内容为您完成此操作

```
 fnDrawCallback: function (oSettings) {
        if ($(this).DataTable().column(0).data().length <= oSettings._iDisplayLength) {
            var tableId = $(this).attr('id');
            $('#' + tableId + '_paginate').hide();
        }
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-07T15:16:38.043

这解决了我的问题：

```
.dataTables_paginate .disabled {
   display:none;
}   
dataTables_paginate .disabled + span {
   display:none;
} 
```

希望对大家有帮助

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-12-16T14:16:35.253

```
 $("#datatable").DataTable({
        "fnDrawCallback": function (oSettings) {
            if ($(oSettings.nTBody).find("tr").length < $(oSettings.nTableWrapper).find("select[name=fileList_length]").val()) {
                $(oSettings.nTableWrapper).children(".dataTables_paginate").hide();
            }
        }
    }); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-12T16:49:47.783

这对我有用：

```
if ($('#dataTableId_paginate').find('li').length < 4) {
    $('#segment-list_paginate').html('');
} 
```

# xml - 使用 XSL 转换 XML，将所有元素转换为属性

> ID：11050827
> 
> 赞同：2
> 
> 时间：2012-06-15T12:41:19.690
> 
> 标签：xml, xslt

我有以下 XML 文件：-

```
<?xml version="1.0" encoding="UTF-8"?>
<viewentries>
    <viewentry position="1">
        <entrydata columnnumber="0">
            <text>Text1</text>
        </entrydata>
        <entrydata columnnumber="1">
            <text>Text2</text>
        </entrydata>
        <entrydata columnnumber="2">
            <text>Text3</text>
        </entrydata>
    </viewentry>
    <viewentry position="2">
        <entrydata columnnumber="0">
            <text>Text1</text>
        </entrydata>
        <entrydata columnnumber="1">
            <text>Text2</text>
        </entrydata>
        <entrydata columnnumber="2">
            <text>Text3</text>
        </entrydata>
    </viewentry>
</viewentries> 
```

我需要使用 XSL 样式表将此 XML 文件转换为以下内容：-

```
<?xml version="1.0" encoding="UTF-8"?>
<records>
    <record position="1" col0="Text1" col1="Text2" col2="Text3"/>
    <record position="2" col0="Text1" col1="Text2" col2="Text3"/>
</records> 
```

我不知道从哪里开始。

每个元素都需要转换为一个元素，通过位置属性拉取，但是每个元素都需要做成属性名，每个子属性都需要做成属性值。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:50:04.617

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <records>
    <xsl:apply-templates/>
  </records>
 </xsl:template>

 <xsl:template match="viewentry">
  <record>
    <xsl:apply-templates/>
  </record>
 </xsl:template>

 <xsl:template match="entrydata">
  <xsl:attribute name="col{@columnnumber}">
    <xsl:value-of select="text"/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<viewentries>
    <viewentry position="1">
        <entrydata columnnumber="0">
            <text>Text1</text>
        </entrydata>
        <entrydata columnnumber="1">
            <text>Text2</text>
        </entrydata>
        <entrydata columnnumber="2">
            <text>Text3</text>
        </entrydata>
    </viewentry>
    <viewentry position="2">
        <entrydata columnnumber="0">
            <text>Text1</text>
        </entrydata>
        <entrydata columnnumber="1">
            <text>Text2</text>
        </entrydata>
        <entrydata columnnumber="2">
            <text>Text3</text>
        </entrydata>
    </viewentry>
</viewentries> 
```

**产生想要的正确结果：**

```
<records>
   <record col0="Text1" col1="Text2" col2="Text3"/>
   <record col0="Text1" col1="Text2" col2="Text3"/>
</records> 
```

**说明**：

正确使用模板、`xsl:attribute`指令和 AVT。

# css - 通过 CSS 设置 SVG 高度？

> ID：11050833
> 
> 赞同：1
> 
> 时间：2012-06-15T12:41:43.830
> 
> 标签：css, html, svg, background-image

这是我的CSS：

```
#social #twitter {
    background-image: url("../img/twitter.svg");
    max-height: 32px;
    max-width: 32px;
} 
```

我的 HTML 看起来像这样：

```
<div id="social">
    <div id="twitter"></div>
</div> 
```

SVG 不会缩小到 32x32。SVG 为 512x512。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:49:05.783

尝试添加

```
background-size: contain; 
```

到 CSS。有关支持的浏览器和浏览器版本的详细信息和表格，请参阅[MDN 文档。](https://developer.mozilla.org/en/CSS/background-size)`background-size`

# c# - C# GDI 蛇游戏

> ID：11050838
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:41:51.683
> 
> 标签：c#

如何让蛇在各个方向连续移动而不必总是按下按钮

```
public partial class Form1 : Form
{
    Rectangle rectangle;
    Size recSize;
    Point firstPoint;
    Point[,] grid;
    Graphics graphics;
    Point[] snake;
    Random rng;
    Pen pen;
    int width = 0;
    int height = 0;

    public Form1()
    {
        InitializeComponent();

        firstPoint = new Point(0, 0);
        recSize = new Size(this.ClientSize.Width, this.ClientSize.Height);
        rectangle = new Rectangle(firstPoint, recSize);
        graphics = this.CreateGraphics();
        width = rectangle.Width;
        height = rectangle.Height;
        grid = new Point[width/4, height/4];
        snake = new Point[400];
        rng = new Random();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        pen = new Pen(new SolidBrush(Color.Green));
        //e.Graphics.DrawRectangle(pen, rectangle);
        e.Graphics.FillRectangle(new SolidBrush(Color.Green), rectangle);

    }

    private void GameButton_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < width / 4; i++)
        {
            for (int j = 0; j < height / 4; j++)
            {
                grid[i, j] = new Point();
                grid[i, j].X = firstPoint.X + (i * 4);
                grid[i, j].Y = firstPoint.Y + (j * 4);
                graphics.DrawEllipse(new Pen(new SolidBrush(Color.FromArgb(255, 0,0,0))), new Rectangle(grid[i, j], new Size(2, 2)));   
            }
        }

        snake[0] = new Point();
        snake[0] = grid[width /4/ 2 , height /4/ 2 ];
        graphics.DrawEllipse(new Pen(new SolidBrush(Color.Black)), new Rectangle(snake[0], new Size(4, 4)));
        graphics.FillEllipse(new SolidBrush(Color.Black), new Rectangle(snake[0], new Size(4, 4)));

    }

    private void moveSnake(KeyEventArgs e)
    {

           switch (e.KeyData)
           {
               case Keys.Up:

                       this.graphics.Clear(Color.Green);
                       snake[0].Y -= 4;
                       graphics.DrawEllipse(new Pen(new SolidBrush(Color.Black)), new Rectangle(snake[0], new Size(4, 4)));
                       graphics.FillEllipse(new SolidBrush(Color.Black), new Rectangle(snake[0], new Size(4, 4)));
                       graphics.Flush();
                       this.Invalidate();
                       System.Threading.Thread.Sleep(500);
                       // this.Refresh();
                       //moveSnake(e);

                        break;
                    case Keys.Down:
                        this.graphics.Clear(Color.Green);
                        snake[0].Y += 4;

                        graphics.DrawEllipse(new Pen(new SolidBrush(Color.Black)), new Rectangle(snake[0], new Size(4, 4)));
                        graphics.FillEllipse(new SolidBrush(Color.Black), new Rectangle(snake[0], new Size(4, 4)));
                        this.Invalidate();
                        System.Threading.Thread.Sleep(500);
                        //this.Refresh();
                        break;
                    case Keys.Left:
                        this.graphics.Clear(Color.Green);
                        snake[0].X -= 4;

                        graphics.DrawEllipse(new Pen(new SolidBrush(Color.Black)), new Rectangle(snake[0], new Size(4, 4)));
                        graphics.FillEllipse(new SolidBrush(Color.Black), new Rectangle(snake[0], new Size(4, 4)));
                        this.Invalidate();
                        System.Threading.Thread.Sleep(500);
                        //this.Refresh();
                        break;
                    case Keys.Right:
                        this.graphics.Clear(Color.Green);
                        snake[0].X += 4;

                        graphics.DrawEllipse(new Pen(new SolidBrush(Color.Black)), new Rectangle(snake[0], new Size(4, 4)));
                        graphics.FillEllipse(new SolidBrush(Color.Black), new Rectangle(snake[0], new Size(4, 4)));
                        this.Invalidate();
                        System.Threading.Thread.Sleep(500);
                        //this.Refresh();
                        break;
                }

    }

    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {

        moveSnake(e);
        this.Refresh();
    }

    private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
        MessageBox.Show(e.KeyChar.ToString());
    }
    protected override void OnKeyPress(KeyPressEventArgs e)
    {
        base.OnKeyPress(e);
        MessageBox.Show(e.KeyChar.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:45:21.787

您需要`timer`在表格上使用一个，并且每个刻度线在最后一个方向上移动一个正方形。

有了这个，你可以加快蛇更高的难度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:55:53.510

与其`Form1_KeyDown`立即使用 处理击键`moveSnake`，不如将击键值存储在表单级别变量中，然后`moveSnake`使用计时器对其进行处理。

也摆脱`System.Threading.Thread.Sleep(500)`; 在里面`moveSnake`

# spring - 调用 j_spring_security_logout 不起作用

> ID：11050840
> 
> 赞同：22
> 
> 时间：2012-06-15T12:42:01.123
> 
> 标签：spring, security, logout

我正在尝试使用 j_spring_security_logout 设置我的应用程序的注销，但由于某种原因它不起作用，我不断收到 404 错误。

我这样调用函数：

`<a href="<c:url value="/j_spring_security_logout"/>"><img border="0" id="logout" src="./img/logout.png" /></a>`

我在 WebContent/jsp/ 我的应用程序主页中，登录和注销页面在 WebContent/login/ 中。

我还检查[了 Spring security 的 logout 问题的](https://stackoverflow.com/questions/3068637/problem-with-spring-securitys-logout)另一个帖子，但是那里给出的解决方案对我不起作用。

在这里你可以看到我的 web.xml

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
     org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter> 

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这里是我的 spring-security.xml

```
<http auto-config="true">
    <intercept-url pattern="/*" access="ROLE_USER" />
    <form-login login-page="/login/login.jsp" 
                authentication-failure-url="/login/errorLogin.jsp"/>
    <logout logout-success-url="/" logout-url="/login/logout.jsp" />
</http>

<beans:bean id="myAuthenticationProvider" 
    class="myapp.web.authentication.WSAuthenticationProvider">
</beans:bean>

<authentication-manager>
    <authentication-provider ref="myAuthenticationProvider"/>
</authentication-manager> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-16T08:23:59.933

logout-url 指的是一个虚拟 URL，您不需要任何具有该名称的资源。你可以这样做：

```
<logout logout-success-url="/" logout-url="/j_spring_security_logout" /> 
```

和你页面上的链接是这样的

```
<c:url value="/j_spring_security_logout" var="logoutUrl" />
<a href="${logoutUrl}">Log Out</a> 
```

或这个：

```
<logout logout-success-url="/" logout-url="/logout" /> 
```

和链接如下：

```
<c:url value="/logout" var="logoutUrl" />
<a href="${logoutUrl}">Log Out</a> 
```

您正在混合这两种方式，这就是您收到 404 错误的原因。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-06-05T08:10:32.697

检查是否启用了 csrf。如果启用 csrf，需要使用 post 方法注销，添加 csrf token 作为隐藏字段。然后使用 JavaScript 发布表单以注销

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-03-26T20:00:16.790

使用**spring security 4**注销必须通过表单按钮完成。CSRF 令牌必须一起提交。**j_spring_security_logout**不再起作用。花了一天后，我得到以下工作。
**第 1 步：**在您的 JSP 页面中

```
<c:url var="logoutUrl" value="/logout"/>
<form action="${logoutUrl}" method="post">
    <input type="submit" value="Logout"/>
    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
</form> 
```

**第2步**

```
<security:http use-expressions="true">
<security:form-login login-page="/login" authentication-failure-url="/login?error=true" />
<security:logout logout-success-url="/login" invalidate-session="true" logout-url="/logout" />
</security:http> 
```

**第 3 步**在您的登录控制器中

```
//Logout mapping
@RequestMapping("/logout")
public String showLoggedout(){
    return "logout";
} 
```

**步骤 4**你必须有一个 logout.jsp

重要的是要看到它会在注销后登陆登录页面。

```
<security:form-login login-page="/login" authentication-failure-url="/login?error=true" /> 
```

所以这个登录页面必须有对应的映射到 login.jsp 或任何映射到你的控制器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T00:32:25.600

这也是你的控制器应该是什么样子的

```
@RequestMapping("/logout")
    public String logoutUrl(){
        return "logout";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-16T19:26:42.690

首先设置security-context.xml下面的代码...

```
<security:logout logout-success-url="/"
            invalidate-session="true"  /> 
```

然后将此代码添加到您的jsp文件中..

```
 <script>
        function formSubmit() {
            document.getElementById("logoutForm").submit();
        }
    </script>

<c:url var="logoutUrl" value="/logout" />        
  <a href="javascript:formSubmit()"> Logout</a>
</li>

<form action="${logoutUrl}" method="post" id="logoutForm">
    <input type="hidden" name="${_csrf.parameterName}"     value="${_csrf.token}" />
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-14T18:21:14.327

在基于 JAVA 的 Spring MVC 配置中，您必须在安全配置类中对其进行配置：

```
@Override
protected void configure(HttpSecurity http) throws Exception {
    super.configure(http);
    http.servletApi().rolePrefix("");
    http
      .logout()
          .logoutRequestMatcher(new AntPathRequestMatcher("/logout"));
} 
```

这个答案是双倍的，并且正在处理我的案例： [Spring Security Java Config not generate logout url](https://stackoverflow.com/questions/24108585/spring-security-java-config-not-generating-logout-url)

# java - 网络小程序在 chrome 中不起作用

> ID：11050842
> 
> 赞同：0
> 
> 时间：2012-06-15T12:42:05.673
> 
> 标签：java, sockets, google-chrome, applet, socket.io

我最近创建了一个 Java 小程序，它创建一个套接字并执行一些网络功能。**小程序在小程序查看器**中运行时运行良好。但是当我尝试在 **google chrome**中运行它时，它会启动但它没有执行所需的功能。

我使用（当然）`java.net`库，并且我的小程序在没有主要方法的情况下运行。（旧小程序与*摆动组件*不同）。

没有主要方法有问题吗？？？请帮助:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:09:30.273

实际上，经过一番研究后，我才知道 Java 小程序由于安全原因有很多限制......其中包括专门创建**SOCKETS！**. 如果您真的想使用 Applet 进行通信，那么您必须独立运行它，为此您应该对 Applet 进行**数字签名**，这很难获得。

相反，您可以创建小程序的 JAR 版本，然后使用**jar2exe**转换器转换为 exe 应用程序并使用它。

# jsf - 自定义组件上的 ValueChangeListener 导致 PropertyNotFoundException

> ID：11050846
> 
> 赞同：3
> 
> 时间：2012-06-15T12:42:19.563
> 
> 标签：jsf, jsf-2, el

我们有一个自定义 JSF 组件，它以特定方式呈现一些按钮和一个选择框。这是由扩展的类完成的`UIInput`。`xhtml`模板中使用的这个自定义组件如下所示：

```
<xx:fooComponent
    value="#{fooBean.someProperty}" 
    valueChangeListener="#{fooBean.someMethodInBean}"
    someOtherProperties="true" /> 
```

现在，由于我们从运行 JSF 2.0 的 JBoss 4.2.2 更改为运行内置 JSF 库的 JBoss 7.1.1，它抱怨`someMethodInBean`不是属性。当然，它不是属性，而是方法。世界上谁会将一个属性绑定到一个`valueChangeListener`？

起初我以为，这与方法在被引用 bean 的超类中有关，但事实并非如此。添加此特定方法`FooBean`没有任何区别。

所以我的问题是，他们做了什么改变，所以现在就坏了，我怎样才能以适合迁移的方式修复它？

**编辑**

该组件在我们的`*.taglib.xml`:

```
<!DOCTYPE facelet-taglib PUBLIC
  "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
  "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">

<!-- ... -->
<tag>
    <tag-name>fooComponent</tag-name>       
    <component>
        <component-type>myProject.FooComponent</component-type>                     
    </component>        
</tag> 
```

...这导致了以下声明`faces-config.xml`：

```
<component>
    <component-type>myProject.FooComponent</component-type>
    <component-class>com.myproject.somemore.UIFooComponent</component-class>
</component> 
```

...这导致类`UIFooComponent extends UIInput`。

**编辑 2**

现在`taglib`xml看起来像这样：

```
<facelet-taglib version="2.0"
            xmlns="http://java.sun.com/xml/ns/javaee"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd">

<tag>
    <tag-name>fooComponent</tag-name>       
    <component>
        <component-type>myProject.FooComponent</component-type>                     
    </component>
    <attribute>
        <name>valueChangeListener</name>
        <method-signature>void valueChanged(javax.faces.event.ValueChangeEvent)</method-signature>  
    </attribute>        
</tag>
</facelet-taglib> 
```

尽管如此，他还是抱怨`fooBean`没有财产`someMethodInBean`。

*编辑 3*

堆栈跟踪是：

```
Caused by: javax.el.ELException: /abc/abc.xhtml: The class 'com.myproject.managedbeans.foo.FooBean' does not have the property 'someMethodInBean'.
    at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:94)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:302)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:93)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:49:22.410

这表明 tag 属性没有在文件`<method-signature>`的组件`<tag>`声明中声明为 a ，`.taglib.xml`如下所示：

```
<attribute>
    <name>valueChangeListener</name>
    <method-signature>void valueChange(javax.faces.event.ValueChangeEvent)</method-signature>
</attribute> 
```

确保如上正确声明了这一点。

* * *

**Update**: you need to make sure that you've declared the `.taglib.xml` file conform JSF 2.x Facelets XSD (and thus **not** a DTD as it was in legacy Facelets 1.x).

```
<facelet-taglib
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>

    <!-- Tags here -->

</facelet-taglib> 
```

# c# - 如何从 Xelement 获取根元素

> ID：11050851
> 
> 赞同：2
> 
> 时间：2012-06-15T12:42:40.167
> 
> 标签：c#, xml, linq, xelement

我有以下 XElement：

```
 <Assembly name="3">
  <Component name="2" /> 
 </Assembly> 
```

我只想得到根元素。 `<Assembly name="3">`我看不到任何适合我的方法。

```
 XElement.????? I cant find XElement.Root; 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:35:35.143

您可以在 VB.NET 中尝试此操作

```
Dim elm as XElment = XElement.Parse(<Assembly name="3">
                                     <Component name="2" /> 
                                    </Assembly>)

Dim strName as string 
strName = elm.AncestorsAndSelf.First.Name 
```

C# 中的代码

```
XElement elm = XElement.Parse("<Assembly name='3'><Component name='2' /></Assembly>");
string name =elm.AncestorsAndSelf().First().Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:44:59.303

您可以通过以下方式获取根元素：

```
XDocument.Root 
```

这是一个实现示例：

```
XDocument doc = new XDocument(
new XComment("This is a comment."),
new XElement("Pubs", 
    new XElement("Book",
        new XElement("Title", "Artifacts of Roman Civilization"),
        new XElement("Author", "Moreno, Jordao")
    ),
    new XElement("Book",
        new XElement("Title", "Midieval Tools and Implements"),
        new XElement("Author", "Gazit, Inbar")
    )
),
new XComment("This is another comment.")
);
Console.WriteLine(doc.Root.Name.ToString()); 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.root.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.root.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:45:09.220

您可以调用[`RemoveNodes`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.removenodes.aspx)它...如果您出于其他原因需要保留原始内容，请先创建一个副本。

目前还不清楚你想用这个做什么。`XElement.Root`元素在逻辑上包含它的所有子元素 -因为元素“就是它自己” ，所以没有概念。`RemoveNodes`将删除所有子节点，但如果您只想获取元素的名称或其属性，则可以在不更改结构的情况下执行此操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-15T11:19:13.817

将名称和属性复制到新元素；

```
var root = new XElement(el.Name, el.Attributes()); 
```

# objective-c - 如何在编译时填充 NSArray？

> ID：11050855
> 
> 赞同：5
> 
> 时间：2012-06-15T12:43:06.663
> 
> 标签：objective-c, nsarray

在 Objective-C 中，如何做类似的事情是

```
int array[] = {1, 2, 3, 4}; 
```

在纯C？

我需要尽可能用最小开销（代码和/或运行时）的 NSStrings 填充 NSArray。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:04:50.863

不可能像在编译时那样创建数组。那是因为它不是“编译时间常数”。相反，您可以执行以下操作：

```
static NSArray *tArray = nil;

-(void)viewDidLoad {
    [super viewDidLoad];

    tArray = [NSArray arrayWithObjects:@"A", @"B", @"C", nil];
} 
```

如果你有这个预编译真的很重要，那么我想你可以创建一个测试项目，创建你需要的数组（或任何对象），填充它，然后使用 NSKeyedArchiver 序列化它（这会将它保存到文件中），并且然后将该文件包含在您的应用程序中。然后，您将需要使用 NSKeyedUnarchiver 取消归档对象以供使用。我不确定这两种方法之间的性能差异是什么。这种方法的一个优点是，如果您需要初始化一个包含大量对象的数组，您不需要大量代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T12:47:04.500

用这个

```
NSArray *array = [NSArray arrayWithObjects:str1,str2,  nil]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T12:49:33.947

据我了解，您需要一个一维数组您可以使用[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)的类方法.. 例如

```
NSString *yourString;
NSArray  *yourArray = [[NSArray alloc] initWithObjects:yourString, nil]; 
```

如果您需要更多，请提供有关您的问题的更多详细信息

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-22T18:02:56.253

就这么简单：`NSArray<NSString*> *stringsArray = @[@"Str1", @"Str2", @"Str3", ...];`现代 ObjectiveC 允许泛型和文字数组。

如果您想要更短的代码，那么`NSArray *stringsArray = @[@"Str1", @"Str2", @"Str3", ...];`，因为泛型是可选的，并且仅在访问数组元素时才有帮助，因此您可以稍后在代码中转换回模板化数组。

# c# - C#按位置替换字符串

> ID：11050858
> 
> 赞同：0
> 
> 时间：2012-06-15T12:43:15.930
> 
> 标签：c#, string, replace

我正在尝试替换字符串中的逗号。

例如，数据是零件的货币价值。

例如。453,27 这是我从 SAP 数据库中获得的值

我需要将逗号替换为句点以将值固定为正确的数量。现在有时，它会成千上万。

例如。2,356,34 这个值需要是 2,356.34

所以，我需要帮助来处理字符串以替换最后 2 个字符的逗号。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:49:35.410

```
string a = "2,356,34";
int pos = a.LastIndexOf(',');
string b = a.Substring(0, pos) + "." + a.Substring(pos+1); 
```

您需要添加一些检查字符串中没有逗号的情况等，但这是核心代码。

您也可以使用正则表达式来完成，但这很简单且相当有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:51:20.303

一个快速的谷歌搜索给了我这个：

```
void replaceCharWithChar(ref string text, int index, char charToUse)
{
    char[] tmpBuffer = text.ToCharArray();
    buffer[index] = charToUse;
    text = new string(tmpBuffer);
} 
```

所以你的“charToUse”应该是'。'。如果它总是距离结尾 2 个字符，那么您的索引应该是 text.length - 3。

[http://www.dreamincode.net/code/snippet1843.htm](http://www.dreamincode.net/code/snippet1843.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:57:39.823

用这个 ：

```
string str = "2,356,34";
string[] newStr = str.Split(',');
str = string.Empty;
for (int i = 0; i <= newStr.Length-1; i++)
{
    if (i == newStr.Length-1)
    {
        str += "."+newStr[i].ToString();
    }
    else if (i == 0)
    {
        str += newStr[i].ToString();
    }
    else
    {
        str += "," + newStr[i].ToString();
    }
}
string s = str; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:00:30.807

如果我理解正确，您总是需要用句点替换最后一个逗号。

```
public string FixSAPNumber(string number)
{
    var str = new StringBuilder(number);
    str[number.LastIndexOf(',')] = '.';
    return str.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T18:02:53.700

```
string item_to_replace = "234,45";

var item = decimal.Parse(item_to_replace);

var new_item = item/100;

//if you need new_item as string 
//then new_item.ToString(Format) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T12:55:53.817

```
string x = "2,356,34";
if (x[x.Length - 3] == ',')
{
    x = x.Remove(x.Length - 3, 1);
    x = x.Insert(x.Length - 2, ".");
} 
```

# facebook - 多个 facebook 喜欢按钮

> ID：11050863
> 
> 赞同：1
> 
> 时间：2012-06-15T12:43:33.913
> 
> 标签：facebook, facebook-like

我对网页上的多个 Facebook 点赞有疑问。每个项目都有它自己的 facebook 按钮。一切正常，但是当我看萤火虫时，我看到了这样的东西：![在此处输入图像描述](../Images/26f3b2d99a70b2a3a8236a13b8adec7b.png)

这有可能消除这种重复的请求吗？
一些代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pl_PL/all.js#xfbml=1&appId=APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后是 fb_like 按钮：

```
<fb:like href="http://unique_url_here.com" send="true" width="450" show_faces="true"></fb:like> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:58:01.747

您是否不小心多次包含了初始化代码？

您需要一个`fb-root`div，一个包含 all.js 和多个 `<fb:likes`

# eclipse - 在 Eclipse 中突出显示 Flex 3.5 CDATA 组件

> ID：11050864
> 
> 赞同：0
> 
> 时间：2012-06-15T12:43:34.250
> 
> 标签：eclipse, apache-flex, syntax-highlighting, cdata

有什么方法可以突出显示 .mxml 文件中的 CDATA 组件？我有 Eclipse 和 Flash Builder 3.5，flex 组件被突出显示，但 CDATA 不是。它包含动作脚本。

对不起，我的意思是语法高亮。例如：

```
<mx:Canvas ... >
<mx:Script>
<![CDATA[
  private function foo():void {}
]]>
</mx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:46:52.170

我不这么认为，但您的大纲视图应该允许您单击任何脚本标签以突出显示它们。不幸的是，你不能给他们不同的 ID，所以在不同的块之间分割你的代码并没有多大帮助。

# java - 按对象/类中的特定成员对对象数组进行排序

> ID：11050874
> 
> 赞同：4
> 
> 时间：2012-06-15T12:44:15.733
> 
> 标签：java, arrays

假设我有一个看起来像这样的类（get/set 省略）：

```
class InfoClass{

   String name;
   String place;
   double distance;

} 
```

我从我的主要活动中创建了一个类数组，如下所示：

```
InfoClass[3] myInfoClass;

myInfoClass[0].name = "venue one";
myInfoClass[0].place = "place one";
myInfoClass[0].distance = 11.23234;

myInfoClass[1].name = "venue two";
myInfoClass[1].place = "place two";
myInfoClass[1].distance = 9.2345643;

myInfoClass[2].name = "venue three";
myInfoClass[2].place = "place three";
myInfoClass[2].distance = 5.23432; 
```

如何对数组 (myInfoClass[]) 进行排序，使其按距离成员排序？即在上面的示例中，数组将被反转，因为元素 [2] 的距离最小，而元素 [0] 的距离最大？

是否有一些功能可以添加到我的类中来执行此操作或其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:49:50.750

这应该工作..

```
 public static void main(String[] args){
    InfoClass[] dd = new InfoClass[3];

    Arrays.sort(dd, new Comparator<InfoClass>(){

        @Override
        public int compare(InfoClass arg0, InfoClass arg1) {
            // TODO Auto-generated method stub
            if(arg0.distance == arg1.distance){
                return 0;
            }else if(arg0.distance < arg1.distance){
                return -1;
            }else{
                return 1;
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T12:48:25.413

使用`java.util.Arrays.sort()`并指定您自己的`Comparator`：

```
InfoClass[] myInfoClass = new InfoClass[3];

myInfoClass[0] = new InfoClass();
myInfoClass[1] = new InfoClass();
myInfoClass[2] = new InfoClass();

myInfoClass[0].name = "venue one";
myInfoClass[0].place = "place one";
myInfoClass[0].distance = 11.23234;

myInfoClass[1].name = "venue two";
myInfoClass[1].place = "place two";
myInfoClass[1].distance = 9.2345643;

myInfoClass[2].name = "venue three";
myInfoClass[2].place = "place three";
myInfoClass[2].distance = 5.23432;

Arrays.sort(myInfoClass,
            new Comparator<InfoClass>()
            {
                public int compare(InfoClass o1, InfoClass o2)
                {
                    if (o1.distance == o2.distance)
                    {
                        return 0;
                    }
                    else if (o1.distance < o2.distance)
                    {
                        return -1;
                    }
                    return 1;
                }
            }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T12:49:46.740

您可以将 Arrays.Sort 与自定义比较器一起使用，如下所示：

```
Arrays.Sort(myInfoClass, new Comparator<InfoClass>() {
    @Override
    public int compare(InfoClass o1, InfoClass o2){
        if (o1==null && o2==null) return 0;
        if (o1 == null) return -1;
        if (o2 == null) return 1;
        return o1.distance.compareTo(o2.distance);
    }
}); 
```

**编辑：**空检查是否获胜。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T12:57:28.000

`Comparable` 如果您不想使用它，请修改您的类并实现接口`Comparator`，默认情况下您想为`array/collection`对象提供排序然后去`Comparable`

```
class InfoClass implements Comparable<InfoClass> {

String name;
String place;
double distance;

@Override
public int compareTo(InfoClass o) {
    return new Double(this.distance).compareTo(new Double(o.distance));
} 
```

然后你可以对它们进行排序

```
Arrays.sort(myInfoClass) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T12:52:52.433

```
Arrays.sort(myInfoClass, new Comparator<InfoClass>() {
  @Override
  public int compare(InfoClass o1, InfoClass o2) {
    return Double.valueOf(o1.distance).compareTo(o2.distance);
  }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T12:49:46.050

将数组转换为 ArrayList，然后使用`Collection.sort`方法对 ArrayList 进行排序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T13:27:47.720

# 也按降序排序

Arrays.sort(aStudents, Collections.reverseOrder());

## 内部集合定义方法调用

```
`public static <T> Comparator<T> reverseOrder() {
    return (Comparator<T>) REVERSE_ORDER;
} 
```

public int compare(Comparable c1, Comparable c2) { return c2.compareTo(c1); }`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-24T13:21:18.613

希望，此示例将帮助您根据**各种字段**对类对象进行**排序**

 **```
import java.util.*;
import java.lang.*;
import java.io.*;

public class Main
{
    public static void main ( String [] args) throws IOException
    {

        Employee empList[] = new Employee [4];

        empList[0] = new Employee (8,"Kiran","Developer",15000);
        empList[1] = new Employee (18,"Krishna","DBA",35000);
        empList[2] = new Employee (3,"Pradeep","Tester",25000);
        empList[3] = new Employee (7,"Mithun","Admin",20000);

        Arrays.sort(empList);
        System.out.println("\nAfter Sorting Base On ID");
        for (Employee emp : empList)
            System.out.println(emp);

        Arrays.sort( empList , new EmployeeByDept() );  
        System.out.println("\nAfter Sorting Base On Department");
        for (Employee emp : empList)
            System.out.println(emp);

        Arrays.sort( empList , new EmployeeByName() );  
        System.out.println("\nAfter Sorting Base On Name");
        for (Employee emp : empList)
            System.out.println(emp);

        Arrays.sort( empList , new EmployeeBySalary() );    
        System.out.println("\nAfter Sorting Base On Salary");
        for (Employee emp : empList)
            System.out.println(emp);

    }
}

class EmployeeByDept implements Comparator<Employee>
{
    //compare() is mathod of Comparable Interface
    // Use When we want to sort on other field like Department  
    @Override
    public int compare(Employee emp1, Employee emp2)
    {
        return emp1.getDept().compareTo(emp2.getDept());
    }

}

class EmployeeByName implements Comparator<Employee>
{
    //compare() is mathod of Comparable Interface
    // Use When we want to sort on other field like Department  
    @Override
    public int compare(Employee emp1, Employee emp2)
    {
        return emp1.getName().compareTo(emp2.getName() );
    }

}

class EmployeeBySalary implements Comparator<Employee>
{
    //compare() is mathod of Comparable Interface
    // Use When we want to sort on other field like Department  
    @Override
    public int compare(Employee emp1, Employee emp2)
    {
        return ( emp1.getSalary() - emp2.getSalary());
    }

}

class Employee implements Comparable<Employee> 
{
    int $id  ;
    String $name ;
    String $dept ;
    int $salary ;

    public Employee(int id , String name , String dept , int salary)
    {
        this.$id = id;
        this.$name = name ;
        this.$dept = dept ;
        this.$salary = salary ;
    }

    public int getID () { return this.$id ; }
    public String getName () { return this.$name ; }
    public String getDept () { return this.$dept ; }
    public int getSalary () { return this.$salary ; }

    public String toString()
    {
        return  "[ "
                + "ID :: " + $id 
                + " Name :: " + $name 
                + " Department :: " + $dept 
                + " Salary :: " + $salary  
                + " ]";

    }

    //compareTo() is mathod of Comparable Interface
    //Use when you want natural sorting base on ID , Salary

    @Override
    public int compareTo(Employee emp)
    {
        return (this.$id - emp.$id);
    }

} 
```**

# javascript - 在生态引擎模板上使用部分

> ID：11050878
> 
> 赞同：1
> 
> 时间：2012-06-15T12:44:25.523
> 
> 标签：javascript, node.js, towerjs, eco

我正在尝试这样的事情：

```
< %- @partial "includes/header" % > 
```

但是什么都没有打印。

我正在使用 Tower.js。我在没有 Tower 的情况下对其进行了测试，并且工作正常。EJS 和其他一些模板引擎也有同样的问题。Just Coffekup 与 Tower 配合得很好。

任何想法？

# wordpress - wordpress 联系表格不发送电子邮件

> ID：11050881
> 
> 赞同：1
> 
> 时间：2012-06-15T12:44:47.123
> 
> 标签：wordpress, contact-form

我正在 Windows 服务器上的我的 wordpress 博客上开发一个联系表格（不是我的选择......）。

我无法让 wordpress 发送电子邮件。为此，我一直在使用最流行的插件（例如 Grunion Contact form 和 Contact 7），所有插件都在我的预览机器（基于 Linux）上工作。

有人知道这个问题吗？它是一个php服务器配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-08T06:41:23.997

SMTP 问题肯定变得更加普遍。作为带有 Postman 的 CF7 的另一个选项，您可以改用 Formstack。Formstack 完美地解决了 SMTP 问题，无需额外的插件。

所有表格都可能有定期发送问题，这可能非常烦人。Formstack 非常棒，但我们确实遇到了最近的一个问题，它与客户的邮箱有关，因此值得一读以帮助您。表单不会发送（尽管它确实存储了所有提交），这是由定期填满的邮箱触发的。结果是客户的电子邮件被列入黑名单。

查看我们关于[Formstack Emails Not Sending](http://www.mediaheroesbrisbane.com.au/insights/formstack-issues-notification-emails-not-sending/)的故障排除文章。尽管它是特定于 Formstack 的，但我觉得这也会影响其他表单，所以它可以派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T17:45:42.640

Postman SMTP 是一个很棒的插件，可以帮助您诊断这些问题，甚至为您的 CF7 插件提供另一个邮件引擎来使用：[https](https://wordpress.org/plugins/postman-smtp/) ://wordpress.org/plugins/postman-smtp/ 。我将它与 Contact Form 7 结合使用，效果很好。如果您需要一个/尚未构建一个，它将为您创建一个 php 邮件引擎。

# asp.net - 将数据从后面的代码传递到 jquery 对话框

> ID：11050882
> 
> 赞同：1
> 
> 时间：2012-06-15T12:44:52.543
> 
> 标签：asp.net

我正在使用下面的代码来显示 jquery 对话框，它工作得很好，

```
Sub OpenDialog(ByVal dialogId As String)
    ScriptManager.RegisterStartupScript(Me, [GetType](), "openDialog", "$('#newPerson').dialog('open');", True)
End Sub 
```

问题是我想从代码隐藏传递一些数据，我在打开对话框之前使用转发器控制和绑定转发器。它在第一次单击时不显示任何数据，当我单击两次时，它会在中继器控件中显示数据。任何建议将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:47:56.827

使用 asp 隐藏字段，使用此在后端设置值

```
HiddenField1.Value = "Your data"; 
```

并使用它在 JavaScript 中获取它们

```
document.getElementById('<%= HiddenField1.ClientID %>'); 
```

# perl - 如何在没有冲突的情况下为文件提供并行写入访问权限？

> ID：11050892
> 
> 赞同：2
> 
> 时间：2012-06-15T12:45:39.890
> 
> 标签：perl, parallel-processing, file-locking

我有一些子进程应该将一些日志写入一个公共文件。我想知道这段代码是否有效，以便进程写入公共文件而不会发生冲突：

```
sub appendLogs {
    open FILE, "+>>", $DMP or die "$!";
    flock FILE, LOCK_EX or die "$!";
    print FILE "xyz\n";
    close FILE;
} 
```

如果没有，你能给我任何提示，我该如何修复或改进它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:00:11.887

出于日志记录的目的，我会使用[Log4perl](http://p3rl.org/Log::Log4perl)而不是重新发明轮子。它支持您正在寻找的内容。

*   [如何同步对附加程序的访问？](http://p3rl.org/Log::Log4perl::FAQ#How-can-I-synchronize-access-to-an-appender-)
*   [Log4Perl 将多个程序的日志记录捆绑到一个日志中](https://stackoverflow.com/questions/3180752/log4perl-bundling-logging-from-several-programs-into-one-log)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:51:32.590

是的，只要每个尝试写入文件的进程都使用`flock`，它们就不会发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:06:08.697

如果您希望您的代码具有可移植性，您应该在锁定文件句柄之后但在写入文件之前查找文件末尾。请参阅 中的“邮箱附加程序”示例[`perldoc -f flock`](http://search.cpan.org/perldoc?perlfunc#flock)，这与您正在执行的操作类似。

```
sub appendLogs {
    open FILE, "+>>", $DMP or die "$!";
    flock FILE, LOCK_EX or die "$!";
    seek FILE, 0, 2;       # <--- after lock, move cursor to end of file
    print FILE "xyz\n";
    close FILE;
} 
```

这`seek`可能是必要的，因为在您打开文件句柄之后但在获取锁之前，另一个进程可能会附加文件（并移动文件末尾的位置）。

# php - 如何使用php对从mysql数据库中检索到的数据进行分页

> ID：11050894
> 
> 赞同：0
> 
> 时间：2012-06-15T12:45:48.310
> 
> 标签：php, mysql, wordpress

我的站点中有一个搜索页面，用户可以在其中搜索数据库中的所有数据。我在数据库中有一个名为属性的表，从中获取所有搜索到的数据。现在我想将分页添加到我的结果页面，并且只想在第一页显示 8 条记录。我的网站在wordpress中，根据搜索检索数据的代码如下：

```
<?php  

if(isset($_REQUEST['submit']))
        {
          $search = $_POST['cs'];
 $field_array = array('ID', 'ManagementCompanyID', 'MarketingName', 'PropertyURL', 'Address', 'City', 'State', 'PostalCode', 'StructureType', 'UnitCount', 'YearBuilt', 'LeaseLength', 'Parking', 'ShortDescription');

           foreach($field_array as $value)
           {
                        $query = "SELECT * FROM `wp_property` WHERE `$value` LIKE '%$search%' ";
             $result = mysql_query($query);
             while($row = mysql_fetch_assoc($result))
                             {
                                    echo "<pre>";
                                      print_r($row);
                                     echo "<pre>";
                             }
}

}

?> 
```

$field_array 的元素是 wp_property 表的列。任何帮助将不胜感激..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:04:14.730

试试这个：

```
<?php  

if(isset($_POST['submit'])) { // DO NOT USE $_REQUEST unless You are sure You need this... Use $_GET or $_POST accordingly...
    $search = mysql_real_escape_string($_POST['cs']); // ALWAYS sanitize user input
    $field_array = array('ID', 'ManagementCompanyID', 'MarketingName', 'PropertyURL', 'Address', 'City', 'State', 'PostalCode', 'StructureType', 'UnitCount', 'YearBuilt', 'LeaseLength', 'Parking', 'ShortDescription');

    // Pagination
    $limit = 15; // change that constant if You want or let it be a value from form...
    $offset = isset($_POST['page']) ? mysql_real_escape_string($_POST['page']) : 0;
    $offset = $offset * $limit;

    $where = ' WHERE (';
    $cnt = count($field_array);
    $i = 0;
    foreach($field_array as $value) {
        $where .= " {$value} LIKE '%{$search}%'";
        if($i < $cnt) $where .= ' OR ';
        $i++;
    }
    $where .= ')';

    $query = "SELECT * FROM `wp_property` {$where} LIMIT {$offset}, {$limit}";
    $result = mysql_query($query);
    while($row = mysql_fetch_assoc($result)) {
        echo "<pre>";
        print_r($row);
        echo "<pre>";
    }
} 
```

现在通过将`$_POST['page']`值更改为`1`, `2`, `3`... 您对数据进行分页... 让您的 HTML 成为您想要的分页的一部分（链接、按钮等...）。

我建议不要使用`mysql_*`函数，至少使用`mysqli`or `PDO`。

# iphone - 聊天和 UITable

> ID：11050899
> 
> 赞同：1
> 
> 时间：2012-06-15T12:46:10.233
> 
> 标签：iphone, ios, uitableview

我有两个班级，A 班和 B 班。A 班的任务与聊天无关，但它需要对收到的聊天消息做出反应。当消息到达时，它被存储在 NSMutableDictionary 中，即存储在 NSMutableArray 中的字典。如果收到的消息是第一个消息（[array count]==1），则显示 B 类视图，呈现 UITableView，其中数据填充有数组。一切都非常适合第一条消息。

第二条消息到达。新消息被添加到数组中（这是在 A 类中完成的），但是表没有被填充。我怎样才能实现这个目标？

编码：

A级

```
- (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message
{
NSString *msg = [[message elementForName:@"body"] stringValue];
NSString *from = [[message attributeForName:@"from"] stringValue];

NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
[m setObject:msg forKey:@"msg"];
[m setObject:from forKey:@"sender"];
[messarray addObject:m];

[self newMessageReceived:messarray];
}

- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender
{
NSLog(@"Method xmppStreamDidAuthenticate");
[self goOnline];
}

//- (void) newMessageReceived:(NSMutableDictionary *)message
-(void) newMessageReceived:(NSMutableArray *)messarraylocal
{
General *general = [General sharedManager];//An static class to store settings like username, and other things that must be available in the hole app.
general.numcels++;
general.messarray=messarraylocal;
  // NSString *firstmessage=[message objectForKey:@"msg"];
//NSString *from=[message objectForKey:@"sender"];    
//NSArray *listItems = [from componentsSeparatedByString:@"@"];
//NSString *fromsplit=[listItems objectAtIndex:0];
//general.firstmess=firstmessage;
//general.firstfrom=fromsplit;

if ([messarraylocal count]==1){
ChatViewController *cvc=[[ChatViewController alloc]initWithNibName:@"Chat" bundle:nil];

[[self navigationController]pushViewController:cvc animated:YES];

}
} 
```

B类：

```
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
General *general = [General sharedManager];
NSLog(@"We are in numberOfRowsInSection, de ChatViewController");
return general.messarray.count;
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
General *general = [General sharedManager];

NSLog(@"We are in cellForRowAtIndexPath de ChatViewController");
//UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
//if(!cell){
messarray=general.messarray;
for (int i=0;i<messarray.count; i++)
{
    diccio=[messarray objectAtIndex:i];
    general.firstmess=[diccio objectForKey:@"msg"];
    general.firstfrom=[diccio objectForKey:@"sender"];

UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UITableViewCell"];
//}
text=general.firstmess;
remite=general.firstfrom;
[[cell textLabel]setText:remite];
[[cell detailTextLabel] setText:text];

return cell;

}
}

- (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message
{
NSString *msg = [[message elementForName:@"body"] stringValue];
NSString *from = [[message attributeForName:@"from"] stringValue];
NSLog(@"We are in didReceiveMessage of ChatViewController");
NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
[m setObject:msg forKey:@"msg"];
[m setObject:from forKey:@"sender"];

[self newMessageReceived:m];
}

- (void) newMessageReceived: (NSMutableDictionary *) message// this method is NEVER called
{
General *general = [General sharedManager];
general.numcels++;
NSLog(@"numcels vale %i", general.numcels);
NSString *firstmessage=[message objectForKey:@"msg"];
NSString *from=[message objectForKey:@"sender"];    
NSArray *listItems = [from componentsSeparatedByString:@"@"];
NSString *fromsplit=[listItems objectAtIndex:0];
general.firstmess=firstmessage;
general.firstfrom=fromsplit;
NSLog(@"Message receive in ChatViewController: %@ from %@", [message objectForKey:@"msg"], fromsplit);

} 
```

在 B 类的方法 didViewLoad 中，我这样做：

```
table.delegate=self;
table.dataSource=self; 
```

但是没有结果。我知道 [table reload] 可以工作，但是......我在哪里可以做到？

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:53:08.703

`newMessageReceived`将新消息添加到全局后，在 A 类中`messarray`

你需要开火`NSNotification`

```
-(void) newMessageReceived:(NSMutableArray *)messarraylocal
{
    //in addition to your normal code, add the following
    [[NSNotificationCenter defaultCenter] postNotificationName:@"NewMessage" object:nil];
} 
```

现在乙级登记观察

```
- (void) viewDidLoad
{
    //In addition to your normal code here add the following
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(newMessage) name:@"NewMessage" object:nil];
}

//Add this method that will call reload data
- (void) newMessage
{
    [table reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:29:02.557

您是否将上一条消息存储在数组中...如果不是，则在您的**didReceiveMessage 中：**在将对象添加到数组之前放置一行...

```
[messarray removeAllObjects]; 
```

# java - 无法在套接字 io 上收到日志对象？

> ID：11050905
> 
> 赞同：0
> 
> 时间：2012-06-15T12:46:30.060
> 
> 标签：java, socket.io, netty, slf4j, logback

我已经在套接字上配置了日志。我想在 socket.io（Java）上读取日志对象（在套接字上配置）。当我执行日志程序时，socket-io 收到请求但抛出以下异常。

`java.lang.IllegalArgumentException: empty text at org.jboss.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:103) at org.jboss.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:68) at org.jboss.netty.handler.codec.http.HttpRequestDecoder.createMessage(HttpRequestDecoder.java:81) at org.jboss.netty.handler.codec.http.HttpMessageDecoder.decode(HttpMessageDecoder.java:198) at org.jboss.netty.handler.codec.http.HttpMessageDecoder.decode(HttpMessageDecoder.java:107) at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:470) at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:443) at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274) at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261) at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:351) at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282) at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) java.lang.IllegalArgumentException: invalid version format: TIMESTAMP[`

我从网上获取代码。这是一个代码链接：[https](https://github.com/ibdknox/socket.io-netty/tree/master/src/main/java/com/ibdknox/socket_io_netty) ://github.com/ibdknox/socket.io-netty/tree/master/src/main/java/com/ibdknox/socket_io_netty 服务器类链接。 [https://gist.github.com/965499](https://gist.github.com/965499)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:52:01.357

在[WebSocketServerHandler](https://github.com/ibdknox/socket.io-netty/blob/master/src/main/java/com/ibdknox/socket_io_netty/WebSocketServerHandler.java)中，您似乎想要处理 HTTP 请求或 WebSocketFrame

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    Object msg = e.getMessage();
    if (msg instanceof HttpRequest) {
        handleHttpRequest(ctx, (HttpRequest) msg);
    } else if (msg instanceof WebSocketFrame) {
        handleWebSocketFrame(ctx, (WebSocketFrame) msg);
    }
} 
```

但是在[WebSocketServerPipelineFactory](https://github.com/ibdknox/socket.io-netty/blob/master/src/main/java/com/ibdknox/socket_io_netty/WebSocketServerPipelineFactory.java)中，您使用的是 HttpRequestDecoder。

```
public ChannelPipeline getPipeline() throws Exception {
    // Create a default pipeline implementation.
    ChannelPipeline pipeline = pipeline();
    pipeline.addLast("decoder", new HttpRequestDecoder()); 
```

如果您使用的是 HttpRequestDecoder，您至少需要有一个有效的 HTTP 请求行加上一个 Content-Length 标头。

# android - ICS 中 WebView 中的 HTML5 视频

> ID：11050906
> 
> 赞同：4
> 
> 时间：2012-06-15T12:46:32.250
> 
> 标签：android, video, webview, html5-video

旧技巧[WebView 和 HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)在 Android 3+ 之前效果很好。ICS 的问题是视频可以同时播放内联和全屏，但是当我锁定屏幕时，视频将继续在后台播放（我可以听到声音）。

有人知道如何解决这个问题吗？

在你的代码中试试这个，我想这就是我解决问题的方法：

```
public void onPause() {
    if(Build.VERSION.SDK_INT >= 11) {
        super.onPause();
    }
}

public void onResume() {
    if(Build.VERSION.SDK_INT >= 11) {
        super.onResume();
    }
} 
```

# c# - C# 跨类保留变量

> ID：11050908
> 
> 赞同：0
> 
> 时间：2012-06-15T12:46:32.607
> 
> 标签：c#, events, scope, method-call

我正在开发一个插件应用程序。我有一个 frmDatasheet.cs（后端），它是 DatasheetPlugin.cs（前端）。我正在处理此数据表和模型插件之间的广播事件，因此如果有人返回数据表，进行一些更改，然后返回建模，建模将知道新状态并自行更新。

我遇到的问题是对 Broadcast 的调用在 frmDatasheet 中，它转到 datasheetPlugin 以引发广播请求，我得到空值，因为我离开插件然后又回到它，一切都丢失了那来回。这是我的代码：

```
//in the frmDatasheet.cs, click GoToModeling, this is last few lines

IDictionary<string, object> packedState = new Dictionary<string, object>();
packedState = PackState(); <----packs up state to send
frmState.Broadcast(packedState); <----- had to instantiate new Plugin to get at .Broadcast 
```

在 frmDataSheet.cs 的顶部

```
private DatasheetPlugIn frmState = new DatasheetPlugIn(); 
```

这可能是问题吗？获取新的 DatasheetPlugin.. 是否可以清除它，但我还能在 .Broadcast 上获得什么？

这是我在 DatasheetPlugin.cs 中的代码

```
 public void Broadcast(IDictionary<string,object> packedState)
 {
     signaller.RaiseBroadcastRequest(packedState);            
 } 
```

我没有收到错误，但信号器显示了事件（BroadcastState、ProjectOpened、ProjectSaved），但它们都有空值。然后它转到信号器，检查 BroadcastState 是否有任何订阅者，因为信号器为空而失败。

我如何确保当我从 frmDatasheet 返回插件时，一切都完好无损？如果我在某个点击事件的插件中本地调用 .Broadcast，则信号器不为空。所以，我很确定这是由于来回而不是保留信息。

更新：我可能应该包含与信号器相关的代码。每个插件都有：

```
private VBTools.Signaller signaller;  //declared at top of plugin

//This function imports the signaller from the VBProjectManager
//Happens when app loads for each plugin.
[System.ComponentModel.Composition.Import("Signalling.GetSignaller", AllowDefault = true)]
public Func<VBTools.Signaller> GetSignaller
{
    get;
    set;
}

public void OnImportsSatisfied()
{
//If we've successfully imported a Signaller, then connect its events to our handlers.
signaller = GetSignaller();
signaller.BroadcastState += new VBTools.Signaller.BroadCastEventHandler<VBTools.BroadCastEventArgs>(BroadcastStateListener);
signaller.ProjectSaved += new VBTools.Signaller.SerializationEventHandler<VBTools.SerializationEventArgs>(ProjectSavedListener);
signaller.ProjectOpened += new VBTools.Signaller.SerializationEventHandler<VBTools.SerializationEventArgs>(ProjectOpenedListener);
this.MessageSent += new MessageHandler<VBTools.MessageArgs>(signaller.HandleMessage);
} 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:27:08.110

当您实例化具有此行的新 DatasheetPlugin 类时：

```
private VBTools.Signaller signaller;  //declared at top of plugin 
```

在您实例化它之前，“signaller”对象将为空，这在调用 OnImportsSatisfied() 时似乎是这样做的。所以当你说你在打电话时...

```
private DatasheetPlugIn frmState = new DatasheetPlugIn(); 
```

...在文件的顶部，如果您从不调用“OnImportsSatisfied()”，则信号器将为空。

您可能对类成员变量和静态变量感到困惑。[http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:27:24.777

为了解决这个问题，我将 GoToModeling 点击事件放在了 DSPlugin 中（在 frmDSheet 中）。

```
void btnGoToModeling_Click(object sender, EventArgs e)
{
    IDictionary<string, object> packedState = new Dictionary<string, object>();
    packedState = _frmDatasheet.PackState();
    Broadcast(packedState);
} 
```

然后用要发送到同一个 DSPlugin 中的 Broadcast() 的数据表的当前状态填充 packedState，所以我不会在两个类之间来回丢失任何东西。我从 frmDSheet 中的 GoToModeling click 方法中获取了我需要的内容，并将其移至 PackState，以便在广播之前也可以获取它。

# php - Hello World php 页面有 404 状态

> ID：11050912
> 
> 赞同：1
> 
> 时间：2012-06-15T12:46:49.467
> 
> 标签：php, http-status-code-404, fastcgi, lighttpd

我在 index.php 中有以下 PHP 代码：

```
<?php
echo 'Hello World';
?> 
```

屏幕上打印了 Hello World，但状态码是 404。如您所见，没有 header() 函数。我查看了 php.ini 和 LightTPD 配置文件，但似乎一切正常。我在 FastCGI 中为 Windows 和 PHP 运行 LightTPD。这个问题的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:49:47.673

你认为文件在哪里，它不在那里。您是否能够导航到同一目录中的 html 文件？404 不是“该页面未在 php 中正确呈现”消息，而是“我根本找不到该文件”消息

# jquery - JQuery UI 捕捉到元素内的网格

> ID：11050916
> 
> 赞同：5
> 
> 时间：2012-06-15T12:47:04.680
> 
> 标签：jquery, jquery-ui, drag-and-drop

我有两个 div，我正在使用 JQueryUI 库将一个 div 放到另一个中。

我想将可拖动的 div 捕捉到放置 div 内的网格，而不是整个页面的网格。我发现 snap 属性可以捕捉到 drop 元素，我还找到了 grid 属性可以捕捉到网格，但是有没有办法将两者结合起来？

```
$( "#draggable" ).draggable({ grid: [ 50, 50 ] }); 
```

我能想到的唯一其他解决方法是用许多较小的 snap div 填充 drop div，这是我不喜欢的一种方法！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T14:57:28.237

您可以使用 droppable 的 over 和 out 方法来检测可拖动对象何时超过它，然后仅在该点实现 grid 参数。

```
$("#draggable").draggable();
$("#snaptarget").droppable({
    over: function(event, ui) {
        $("#draggable").draggable({
            grid: [50, 50]
        });
    },
    out: function(event, ui) {
        $("#draggable").draggable("option", "grid", false);
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/mAzLA/1/)**。

# python - Pyparsing：可选元素列表：Optional、Each 和解析器元素排序的奇怪问题

> ID：11050918
> 
> 赞同：0
> 
> 时间：2012-06-15T12:47:05.760
> 
> 标签：python, parsing, pyparsing

我正在尝试使用 pyparsing 解析类似 XML 的文件（没有关联的 DTD）。每个记录看起来的一部分有以下内容：

*   里面的东西`<L>`和`<L/>`标签，
*   `<pc>`和`<pc/>`标签内的一件或多件事情，
*   可选地，在`<MW>`和`<MW/>`标签内的东西，
*   可选地，一个字面量`<mul/>`，并且可选地一个字面量`<mat/>`

这些元素的顺序各不相同。

所以我写了以下内容（我是pyparsing的新手；请指出我是否在做一些愚蠢的事情）：

```
#!/usr/bin/env python

from pyparsing import *

def DumbTagParser(tag):
    tag_close = '</%s>' % tag
    return Group(
             Literal('<') + Literal(tag).setResultsName('tag') + Literal('>')
           + SkipTo(tag_close).setResultsName('contents') 
           + Literal(tag_close)
           ).setResultsName(tag)

record1 = Group(ZeroOrMore(DumbTagParser('pc'))).setResultsName('pcs') &\
          DumbTagParser('L') & \
          Optional(Literal('<mul/>')) & \
          Optional(DumbTagParser('MW')) & \
          Optional(Literal('<mat/>')) 

record2 = Group(ZeroOrMore(DumbTagParser('pc'))).setResultsName('pcs') &\
          Optional(DumbTagParser('MW')) & \
          Optional(Literal('<mul/>')) & \
          DumbTagParser('L') 

def attempt(s):
    print 'Attempting:', s
    match = record1.parseString(s, parseAll = True)
    print 'Match: ', match
    print

attempt('<L>1.1</L>')
attempt('<pc>Page1,1</pc>  <pc>Page1,2</pc> <MW>000001</MW> <L>1.1</L>')
attempt('<mul/><MW>000003</MW><pc>1,1</pc><L>3.1</L>')
attempt('<mul/> <MW>000003</MW> <pc>1,1</pc> <L>3.1</L> ')  # Note end space 
```

解析器`record1`都`record2`失败了，但有不同的例外。使用`record1`，它在最后一个字符串上失败（与倒数第二个字符串仅在空格中不同）：

```
pyparsing.ParseException:  (at char 47), (line:1, col:48) 
```

并且`record2`，它在倒数第二个字符串本身上失败：

```
pyparsing.ParseException: Missing one or more required elements (Group:({"<" "L" ">" SkipTo:("</L>") "</L>"})) (at char 0), (line:1, col:1) 
```

现在奇怪的是，如果我在 的定义中交换第 2 行和第 3 行`record2`，那么它解析得很好！

```
record2 = Group(ZeroOrMore(DumbTagParser('pc'))).setResultsName('pcs') &\
          Optional(Literal('<mul/>')) & \
          Optional(DumbTagParser('MW')) & \
          DumbTagParser('L')    # parses my example strings fine 
```

（是的，我意识到它`record2`不包含任何规则`<mat/>`。我试图获得一个反映这种对重新排序的敏感性的最小示例。）

我不确定这是否是 pyparsing 或我的代码中的错误，但我真正的问题是我应该如何解析我想要的字符串类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:11:18.240

我不知道你是否还想要一个答案，但这是我的 bash ......

我可以在您的代码中看到以下问题：

*   您已将 resultsName 多次分配给多个项目，因为最终可能会返回一个 Dict，您必须将“*”添加到每个出现的 resultsName 或从多个元素中删除它。我假设您关注的是内容而不是标签并删除它们的名称。仅供参考，设置 parser.resultsName(name) 的快捷方式是 parser(name)。
*   将所有内容的结果名称设置为“内容”也是一个坏主意，因为我们会丢失已经可用的信息。而是通过相应的 TAG 命名 CONTENTS。
*   您还在 0 ZeroOrMore 中使多个项目成为可选，它们已经通过 ZeroOrMore 成为“可选”，因此让我们使用“^”运算符允许它们成为变体，因为没有预定义的序列，即。pc 标签可以在 mul 标签之前，反之亦然。允许任何组合并在我们经过时收集这些似乎是合理的。
*   由于我们还必须处理给定标签的倍数，我们将“*”附加到 CONTENTS 的 resultsName 中，以便我们可以将结果收集到列表中。

首先我们创建一个函数来创建一组开始和结束标签，你的 DumbTagCreator 现在被称为 tagset ：

```
from pyparsing import *  

def tagset(str, keywords = False):
 if keywords :
  return [Group(Literal('<') + Keyword(str) + Literal('>')).suppress(), 
          Group(Literal('</') + Keyword(str) + Literal('/>')).suppress()]
 else :
  return [Group(Literal('<') + Literal(str) + Literal('>')).suppress(), 
          Group(Literal('</') + Literal(str) + Literal('>')).suppress()] 
```

接下来，我们创建将解析的解析器`<tag\>CONTENT</tag>`，其中 CONTENT 是我们感兴趣的内容，以返回一个字典，以便我们拥有`{'pc' : CONTENT, 'MW' : CONTENT, ...}`：

```
tagDict = {name : (tagset(name)) for name in ['pc','MW','L','mul','mat']}

parser = None
for name, tags in tagDict.iteritems() : 
 if parser : 
  parser = parser ^ (tags[0] + SkipTo(tags[1])(name) + tags[1])
 else :
  parser = (tags[0] + SkipTo(tags[1])(name) + tags[1])

# If you have added the </mul> tag deliberately...
parser = Optional(Literal('<mul/>')) + ZeroOrMore(parser)

# If you have added the </mul> tag by acccident...
parser = ZeroOrMore(parser) 
```

最后我们测试：

```
test = ['<L>1.1</L>',
 '<pc>Page1,1</pc>  <pc>Page1,2</pc> <MW>000001</MW> <L>1.1</L>',
 '<mul/><MW>000003</MW><pc>1,1</pc><L>3.1</L>',
 '<mul/> <MW>000003</MW> <pc>1,1</pc> <L>3.1</L> ']  

for item in test :  
 print {key:val.asList() for key,val in parser.parseString(item).asDict().iteritems()} 
```

这应该产生，假设你想要一个列表的字典：

```
{'L': ['1.1']}
{'pc': ['Page1,1', 'Page1,2'], 'MW': ['000001'], 'L': ['1.1']}
{'pc': ['1,1'], 'MW': ['000003'], 'L': ['3.1']}
{'pc': ['1,1'], 'MW': ['000003'], 'L': ['3.1']} 
```

# shell - 在 ProCurve 上使用 SSH 将命令链接在一起

> ID：11050919
> 
> 赞同：0
> 
> 时间：2012-06-15T12:47:06.450
> 
> 标签：shell, ssh, interactive

我需要备份 HP ProCurve 的配置，并且需要通过 SSH 来完成。

ProCurve shell 是交互式的，我不能这样写：

```
$ ssh user@ip 'command1; command2' 
```

...因为 shell 给了我一个错误——可能是因为机器实际上没有类似 Unix 的 shell。我需要连接，输入密码，然后执行两个命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:11:41.137

使用 Procurve/Cisco 设备，您不能简单地运行`ssh hostname command`. 您需要使用一些可以与交互式 ssh 会话一起使用的工具，即 expect、pexpect 或类似的东西。另一种解决方案是使用`socat`：

```
(sleep 5; echo ${PASSWORD}; sleep 2; echo ; echo command1; sleep 2) \
| socat - EXEC:"ssh ${SWITCH}",setsid,pty,ctty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:50:36.083

我不确定我是否完全理解你的问题。您是否尝试运行多个命令？你试过`sh -c`吗？

```
ssh user@ip sh -c "command1; command2" 
```

来自`man sh`：

```
 -c               Read commands from the command_string operand instead of from the standard input.  Special parameter 0 will be set from the command_name operand
                        and the positional parameters ($1, $2, etc.)  set from the remaining argument operands. 
```

# wordpress - 在添加用户表单中添加字段

> ID：11050920
> 
> 赞同：2
> 
> 时间：2012-06-15T12:47:09.627
> 
> 标签：wordpress, custom-post-type

我想知道如何在 Wordpress 的用户注册表单中添加一个字段。我已经能够在 edit_user_profile 和 add_user_profile 中添加字段。但是我想在注册新用户时在第一步中使用自定义字段。

有人能帮我吗？

亲切的问候，

杜威

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:02:21.837

最适合您的插件：[**Cimy User Extra Fields**](http://wordpress.org/extend/plugins/cimy-user-extra-fields/)。该插件将在注册和用户信息中添加一些有用的字段。

如果您需要在不使用插件的情况下添加自定义字段：[**查看本教程**](http://tipsforwordpress.com/wordpress/add-custom-field-to-register-form/)。这将逐步教您如何将自定义字段添加到注册表单。

干杯！！！

# windows - 文件格式详情告密者

> ID：11050921
> 
> 赞同：0
> 
> 时间：2012-06-15T12:47:16.160
> 
> 标签：windows, shell, file-format, shell-extensions

在大多数最新版本的 Windows（XP、Vista、“7”）中，可以获得一些文件格式的详细信息，如 JPEG EXIF、MP3 ID3 标签（如流派、艺术家）和一些其他格式。要获取该信息，应右键单击文件，选择“属性”并检查对话框中的“详细信息”选项卡。

我的问题是如何扩展外壳以显示有关当前不支持或不支持但未显示所有详细信息的其他文件格式的信息。

我的猜测是一定有某种基于 .dll 的机制，也许是某种 COM 服务器，但我找不到该主题的入口点。事实上，我什至不知道如何用谷歌搜索它。每当我尝试搜索时，我都会得到很多关于文件格式而不是 shell 扩展名的信息。

感谢任何指向相关文章/MSDN 章节的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:04:02.097

查看 IShellPropSheeExt 接口。我想，这就是你想要的：

[实现属性页 COM 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677109%28v=vs.85%29.aspx)

[编写 Shell 扩展的完整白痴指南 - 第五部分](http://www.codeproject.com/Articles/463/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

# javascript - 填充选择

> ID：11050923
> 
> 赞同：0
> 
> 时间：2012-06-15T12:47:23.557
> 
> 标签：javascript, html

我创建了一个网页，其中一个选择元素（对象）将基于 2 个其他选择元素（Type1，Type2）进行填充。为此，我创建了一个这样的数组：

```
"Animal:Fish:Tuna", "Animal:Fish:Salmon", "Animal:Mammal:Dog", "Animal:Mammal:Cat", "Object:Metal:Aluminum", "Object:Metal:Mercury" 
```

然后这些元素中的每一个都将由'：'分隔。前两个字符串将与 Type1 和 Type2 进行比较。然后第三个元素将填充到 Object 中。

我在js中还有其他简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:06:58.407

您可以使用包含您的关系的对象而不是数组

```
var data = {
    Animal: {
        Fish: ['Tuna', 'Salmon'],
        Mammal: ['Dog', 'Cat']
    },
    Object: {
        Metal: ['Aluminum', 'Mercury']
    }
}; 
```

现场演示：http: [//jsfiddle.net/u53Mt/](http://jsfiddle.net/u53Mt/)

# c# - 存储库模式数据上下文配置到哪里去了？

> ID：11050926
> 
> 赞同：4
> 
> 时间：2012-06-15T12:47:39.843
> 
> 标签：c#, asp.net-mvc, linq-to-sql, repository-pattern

看了几个使用存储库模式（如 StoreFront）的示例，我不知道在哪里`context.Dispose()`调用？不处理数据上下文不会导致内存泄漏吗？或者它只是应用程序生命周期中每个存储库的一个数据上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:50:31.903

如果您正在使用`using`应该执行的语句，则调用会在实现`IDisposable`接口时自动释放。

如：

```
public int GetThingCount()
{
    using (MyDataContext context = new MyDataContext())  // context is created here
    {
        return context.Things.Count();
    } // it is automatically disposed of here even in the event of an exception
} 
```

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> 通常，当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。
> 
> using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。前面的代码示例在编译时扩展为以下代码（注意额外的花括号以创建对象的有限范围）：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:13:53.350

我认为上下文对象是指`DataContext`由**Entity Framework**或**Linq2Sql**创建的对象。事实通常是您应该包装`IDisposable`通过`using`语句实现的类或`Dispose()`直接调用，但在这些数据上下文对象的情况下，这并不是真正需要的。

这是 Stephen Walther 写的一篇出色[的文章](http://stephenwalther.com/archive/2008/08/20/asp-net-mvc-tip-34-dispose-of-your-datacontext-or-don-t.aspx)，清楚地说明了这一点。

> 因此，在 DataContext 对象上调用 Dispose() 并没有真正获得任何巨大的好处。唯一的一点好处是 Dispose() 方法将几个对象设置为 null，以便垃圾收集器可以更早地收集它们。除非您担心应用程序使用的每个字节，或者您正在使用 DataContext 跟踪大量对象，否则我不会过多担心 DataContext 对象的内存开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:15:48.627

如果您使用 DI，它可以为您管理项目的生命周期。[这是Ninject](http://ninject.org)中的一个示例

```
kernel.Bind<ProjectAdapter.INIT1_DEVEntities>()
              .ToSelf()
              .InRequestScope()
              .WithConstructorArgument("connectionString",
            ctx => ctx.Kernel.Get<string>("efString")) 
```

# ios - “已经调用了 startSession。...”

> ID：11050930
> 
> 赞同：0
> 
> 时间：2012-06-15T12:47:52.683
> 
> 标签：ios, xcode, popup

“已经调用了 startSession。它应该只调用一次”

iOS 应用程序启动时会出现此弹出窗口，有什么想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:52:13.370

这可能是因为您在

```
applicationWillEnterForeground 
```

方法，并且无论何时您暂停应用程序然后返回，您都会尝试重新启动从未停止过的会话。

[有人在这里](http://www.giderosmobile.com/forum/discussion/521/flurry-again)谈论同样的问题。

我有同样的问题，只是在应用程序的 AppStore 版本中。很烦人。

# c# - 将变量从VB函数传递到客户端javascript

> ID：11050933
> 
> 赞同：1
> 
> 时间：2012-06-15T12:48:01.780
> 
> 标签：c#, javascript, asp.net, .net, vb.net

您好，我正在使用此 Page.ClientScript.RegisterStartupScript() 从后面的 vb 代码调用 javascript 函数，这对我来说很好 我的问题是如何将变量从后面的代码发送到 javascript 函数这是我尝试过的至今 ：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
   Handles Me.LoadComplete
    Dim Myname As String = "myName"
    Dim cstype As Type = Me.GetType()
    Page.ClientScript.RegisterStartupScript(cstype, "MyKey", "hello(Myname);",
  True)

End Sub 
```

javascript：

```
 <script type="text/javascript">
    function hello(name) {
        alert("hello world from javascript " + name)
    }
</script> 
```

谢谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:24:24.893

您必须使用正确的引号来传递字符串：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
   Handles Me.LoadComplete
    Dim Myname As String = "myName"
    Dim cstype As Type = Me.GetType()
    Page.ClientScript.RegisterStartupScript(cstype, "MyKey", "hello('" & Myname & "');",
  True)

End Sub 
```

注意变量名周围的单引号。

在客户端和服务器端代码之间双向传递数据的另一种方法是隐藏字段，例如

```
<asp:HiddenField ID="xhidMyname" runat="server" /> 
```

或者

```
<input type="hidden" id="xhidMyname" runat="server" /> 
```

该字段将可以通过它的“值”属性在客户端和服务器端访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:52:36.707

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
   Handles Me.LoadComplete
    Dim Myname As String = "myName"
    Dim cstype As Type = Me.GetType()
    Page.ClientScript.RegisterStartupScript(cstype, "MyKey", "hello('"&Myname&"');",
  True)

End Sub 
```

# xslt - 使用 xslt 将具有日、月、年的 xml 中的内容转换为另一个 xml 到 YYYYMMDD 格式的日期

> ID：11050935
> 
> 赞同：3
> 
> 时间：2012-06-15T12:48:11.047
> 
> 标签：xslt

我有输入 xml 作为

```
 <content>
             <date>
            <day>14</day>
               <month>06</month>
                <year>2012</year>
               </date>
            </content> 
```

希望将其转换为

```
 <content>
               <date>2012-06-14T00:00:00</date>
           </content> 
```

使用 xslt

```
 <?xml version="1.0" encoding="utf-8"?>
            <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
             <xsl:output method="xml" indent="yes"/>

              <xsl:template match="content">
                 <content>
                   <xsl:apply-templates select="date"/>
                 </content>
              </xsl:template>

                 <xsl:template match="date">
                  <date>
                   <xsl:variable name="year" select="year"/>
                   <xsl:variable name="month" select="month"/>
                   <xsl:variable name="day" select="day"/>
               <xsl:value-of select="$year" />-<xsl:value-of select="$month"/>-
                 <xsl:value-of  select="$day"/>

                 </date>   
                </xsl:template>        

    </xsl:stylesheet> 
```

我想要 YYYYMMDDTHH:MM:SS 格式的日期，例如 2012-06-15T02:52:37 我怎样才能得到它。xslt "1.0" 中的哪个函数对字符串进行拍照并采用格式模式。aynone 请帮我获得上述格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:57:46.687

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <content>
       <xsl:apply-templates/>
     </content>
 </xsl:template>

 <xsl:template match="date">
  <date>
   <xsl:value-of select="concat(year, '-', month, '-', day, 'T00:00:00')"/>
  </date>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<content>
    <date>
        <day>14</day>
        <month>06</month>
        <year>2012</year>
    </date>
</content> 
```

**产生想要的正确结果**：

```
<content>
   <date>2012-06-14T00:00:00</date>
</content> 
```

# ssh - 使用 ssh 隧道从远程服务器复制到本地计算机的 shell 脚本 - scp

> ID：11050936
> 
> 赞同：2
> 
> 时间：2012-06-15T12:48:14.960
> 
> 标签：ssh

我已经设法通过 ssh 隧道连接到远程服务器。不，如何将文件从远程服务器复制到本地计算机。考虑到我只想从远程服务器到本地计算机。我不知道如何编写这个命令“scp file/I/want/to/copy localhost/home/folder”

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T21:55:31.620

scp -r（源）主机名：/（要复制的文件的位置）/（文件名）（目标）主机名：/（文件应复制到的文件夹的位置）

例如：

scp -r ram.desktop.overflow.com:/home/Desktop/Ram/abcd.txt rajesh.desktop.overflow.com:/home/documents/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:50:53.167

示例：scp username@server:/home/username/file_name /home/local-username/file-name

检查这个： [http ://www.garron.me/linux/scp-linux-mac-command-windows-copy-files-over-ssh.html](http://www.garron.me/linux/scp-linux-mac-command-windows-copy-files-over-ssh.html)

# image - 来自内存流的图像

> ID：11050938
> 
> 赞同：0
> 
> 时间：2012-06-15T12:48:18.393
> 
> 标签：image, memorystream

我使用 daylipilot 月份，我希望他有一个 jpeg，但我有一个记忆流

我有错误

GDI+ 中出现一般错误。当我保存它时

```
Dim test As Bitmap
            Dim e1 As Image
            Dim image As MemoryStream
            image = DayPilotMonth.Export(ImageFormat.Jpeg)
            e1 = System.Drawing.Bitmap.FromStream(image)
            e1.Save("/APP/temp/test.jpg", ImageFormat.Jpeg) 
```

如何从内存流中保存图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:44:57.347

```
Dim e1 As Image
    Dim image As MemoryStream
    image = dpmStructures.Export(ImageFormat.Jpeg)
    e1 = System.Drawing.Bitmap.FromStream(image)
    e1.Save(My.Computer.FileSystem.SpecialDirectories.Temp & "\calgeneral.jpg", ImageFormat.Jpeg) 
```

# c++ - 调整 perlfaq 脚本以删除 C 和 C++ 注释，改为在 C 和 C++ 注释中执行搜索和替换

> ID：11050941
> 
> 赞同：2
> 
> 时间：2012-06-15T12:48:34.740
> 
> 标签：c++, c, regex, perl, comments

我的任务是（尝试）在大型代码库中搜索和替换单词后缀，仅当它出现在评论中时。所有注释都是 /* 或 // 类型，但它们保证包括大多数可以想象的边缘情况。

所以我想改变这个：

```
/* blah blah something__suffix blah */ 
```

对此：

```
/* blah blah something blah */ 
```

但我也想改变这一点：

```
// blah blah something__suffix blah 
```

对此：

```
// blah blah something blah 
```

和这个：

```
/*
 * blah blah something__suffix blah 
 */ 
```

对此：

```
/*
 * blah blah something blah 
 */ 
```

和这个：

```
/** 

// blah blah something__suffix blah 

*/ 
```

对此：

```
/** 

// blah blah something blah 

*/ 
```

令人作呕（字面意思）。

最初我觉得这是一个解析器任务，我安装了 cochinelle，它确实可以解析我的评论，但它被我的预处理器宏卡住了，对于那些只是把它作为一次性任务的人来说，解决方法似乎很复杂。所以现在我正在考虑正则表达式。

我还没有找到很多关于在 C 和 C++ 注释中使用正则表达式进行真正强大的搜索和替换的建议（除了“你需要一个解析器”），但我确实注意到似乎有一个经过良好道路测试的 perl perl FAQ 上的脚本，用于在[此处](http://perldoc.perl.org/perlfaq6.html#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file?)删除这两种样式的注释。

如下：

```
$/ = undef;
$_ = <>;

s#/\*[^*]*\*+([^/*][^*]*\*+)*/|//([^\\]|[^\n][\n]?)*?\n|("(\\.|[^"\\])*"|'(\\.|[^'\\])*'|.[^/"'\\]*)#defined $3 ? $3 : ""#gse;

print; 
```

我的问题：如何调整这个脚本，而不是剥离评论，然后可以搜索已被识别为评论的文本以查找后缀并删除后缀，从而使评论的其余部分保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:40:10.350

您需要分两步完成，因为您可能有

```
/* foo__suffix bar__suffix */ 
```

首先，提取评论，然后替换`__suffix`评论中的任何内容。

```
s{
   \G
   (?:(?!/[*/]).)*
   \K
   (   /[*] (?:(?![*]/).)* [*]/
   |   //   [^\n]*
   )
}{
   my $comment = $1;
   $comment =~ s/(?<=\w)__suffix//g;
   $comment
}xes; 
```

* * *

笔记：

*   `(?:(?!STRING).)`就是`(?:STRING)`这样。`[^CHAR]`_`CHAR`

*   `//`如果你有或`/*`在字符串文字中，我的解决方案会搞砸。

*   如果您`__suffix`可以删除前面没有标识符的实例，则可以删除`(?<=\w)`.

*   如果您使用的是 5.14 或更高版本，则可以简化

    ```
    s{...}{
       my $comment = $1;
       $comment =~ s/(?<=\w)__suffix//g;
       $comment
    }xes; 
    ```

    至

    ```
    s{...}{
       $1 =~ s/(?<=\w)__suffix//rg
    }xes; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:26:33.030

我不确定这是否是一个好的解决方案，但它确实有效。

```
use strict; use warnings; use feature qw(say);
my @lines = (
qq~Example 1:
/* blah blah something__suffix blah */~,
qq~Example 2:
// blah blah something__suffix blah needs a newline at the end
~,
qq~Example 3:
/*
 * blah blah something__suffix blah 
 */~,
qq~Example 4:
/** 

// blah blah something__suffix blah 

*/~,
qq~Example 5 (string):
foobar '// blah blah something__suffix blah '~,
qq~Example 6:
public void main { return; } // this does__suffix nothing but needs newline
~,
);

foreach (@lines) {
  print "Before:\n$_\n";
  s!/\*[^*]*\*+([^/*][^*]*\*+)*/|//([^\\]|[^\n][\n]?)*?\n|("(\\.|[^"\\])*"|'(\\.|[^'\\])*'|.[^/"'\\]*)!
  { if (defined $3) { $3 } else { (my $temp = ${^MATCH}) =~ s/__suffix//; $temp;} } 
  !gsepx;

  print "After:\n$_\n\n";
} 
```

它可能效率不高，但我认为这对你的工作并不重要。

# erlang - Erlang 中的错误报告

> ID：11050944
> 
> 赞同：0
> 
> 时间：2012-06-15T12:48:47.250
> 
> 标签：erlang, try-catch, cowboy

我采用了牛仔示例代码并将其破坏。

默认请求处理程序的代码如下所示：

```
-module(default_handler).
-behaviour(cowboy_http_handler).
-export([init/3, handle/2, terminate/2]).

init({_Any, http}, Req, []) ->
    {ok, Req, undefined}.

handle(Req, State) ->
    {ok, Req2} = cowboy_http_req:reply(200, [], <<"Hello world!">>, Req),
    {ok, Req2, State}.

terminate(_Req, _State) ->
    ok. 
```

它直截了当，但我想制作返回文件，所以我将其更改为：

```
-module(default_handler).
-behaviour(cowboy_http_handler).
-export([init/3, handle/2, terminate/2]).

init({_Any, http}, Req, []) ->
    {ok, Req, undefined}.

handle(Req, State) ->
    try 
    {Path, Req1} = cowboy_http_req:path(Req),
    {ok, File} = file:read_file(Path),
    cowboy_http_req:reply(200, [], File, Req1)
    of 
    {ok, Req2} ->
        {ok, Req2, State}
    catch
    _ -> 
        {ok, Req3} = cowboy_http_req:reply(200, [], <<"Hello world!">>, Req),
        {ok, Req3, State}
    end.

terminate(_Req, _State) ->
    ok. 
```

try-catch 应该处理可能没有文件的事实，但事实并非如此。这是为什么？

当我尝试获取一个不存在的文件时，我在控制台中收到一个很大的错误报告，谁能告诉我为什么？

```
=ERROR REPORT==== 15-Jun-2012::14:24:54 ===
** Handler default_handler terminating in handle/2
   for the reason error:{badmatch,{error,badarg}}
** Options were []
** Handler state was undefined
** Request was [{socket,#Port<0.1515>},
                {transport,cowboy_tcp_transport},
                {connection,keepalive},
                {pid,<0.1175.0>},
                {method,'GET'},
                {version,{1,1}},
                {peer,undefined},
                {host,[<<"localhost">>]},
                {host_info,undefined},
                {raw_host,<<"localhost">>},
                {port,8080},
                {path,[<<"favicon.ico">>]},
                {path_info,undefined},
                {raw_path,<<"/favicon.ico">>},
                {qs_vals,undefined},
                {raw_qs,<<>>},
                {bindings,[]},
                {headers,
                    [{'Accept-Charset',<<"ISO-8859-1,utf-8;q=0.7,*;q=0.3">>},
                     {'Accept-Language',<<"en-US,en;q=0.8">>},
                     {'Accept-Encoding',<<"gzip,deflate,sdch">>},
                     {'User-Agent',
                         <<"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/10.10 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19">>},
                     {'Accept',<<"*/*">>},
                     {'Connection',<<"keep-alive">>},
                     {'Host',<<"localhost">>}]},
                {p_headers,[{'Connection',[<<"keep-alive">>]}]},
                {cookies,undefined},
                {meta,[]},
                {body_state,waiting},
                {buffer,<<>>},
                {resp_state,waiting},
                {resp_headers,[]},
                {resp_body,<<>>},
                {onresponse,undefined},
                {urldecode,{#Fun<cowboy_http.urldecode.2>,crash}}]
** Stacktrace: [{default_handler,handle,2,
                                 [{file,"src/default_handler.erl"},{line,13}]},
                {cowboy_http_protocol,handler_handle,3,
                                      [{file,"src/cowboy_http_protocol.erl"},
                                       {line,298}]}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:19:04.440

可能是因为它如何评估 catch 子句，请参阅[http://www.erlang.org/doc/reference_manual/expressions.html#try](http://www.erlang.org/doc/reference_manual/expressions.html#try)

> 如果在对 Expr 求值期间发生异常，但没有匹配的正确类的 ExceptionPattern 与真正的保护序列，则将传递异常，就好像 Expr 没有包含在 try 表达式中一样。

如果不查找默认值，即 throw，则需要指定一个错误[类（error、throw 或 exit）。](http://www.erlang.org/doc/reference_manual/expressions.html#try)

```
try Exprs of
   Pattern1 [when GuardSeq1] ->
       Body1;
    ...;
   PatternN [when GuardSeqN] ->
        BodyN
catch
    [Class1:]ExceptionPattern1 [when ExceptionGuardSeq1] ->
        ExceptionBody1;
    ...;
   [ClassN:]ExceptionPatternN [when ExceptionGuardSeqN] ->
        ExceptionBodyN 
```

一个*包罗万象的错误*将被写成

```
catch
    _:_ -> 
```

请注意您如何将类和 ExpressionPattern 都指定为“不关心”。

希望这会有所帮助，因为直到现在我才“涉足”erlang。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:21:07.840

这一行：

```
{Path, Req1} = cowboy_http_req:path(Req), 
```

实际上返回二进制文件列表，例如 [<<"path">>,<<"path2">>] 而不是像 "/path/path2" 之类的东西，这应该是你真正想要的。

因此，要形成文件系统路径：

```
{Path, Req1} = cowboy_http_req:path(Req),
FsPath = lists:foldl(
    fun(PathComponent, Acc) ->
        string:join([Acc, erlang:binary_to_list(PathComponent)], "/")
    end,
    "",
    Path
),
{ok, File} = file:read_file(FsPath), 
```

（您得到的 badarg 错误是因为 file:read_file/1 的参数不是字符串（列表）而是二进制文件列表，这不是预期的参数。

并且捕获需要一个**_ *:* _**子句，就像 Harald 回答状态一样。

干杯。

# c# - C# XML 序列化单个标记中相同类型的多个对象

> ID：11050946
> 
> 赞同：1
> 
> 时间：2012-06-15T12:48:53.480
> 
> 标签：c#, xml, xml-serialization

我有以下想要使用 xml 序列化重现的 XML：

```
<Room>
<!-- One light-->  
<light Type="Incadenscent" fin="QS f" ItemType="something "/>
<!-- Unlimited Tables -->
<table Type="BR" Id="10"/>
<table Type="BL" Id="21"/>
<table Type="BR" Id="22"/>
<table Type="GR" Id="35"/>
<table Type="BR" Id="18"/>
<table Type="RE" Id="55"/>
</Room> 
```

以下是我的对象类型：

```
public class Table
{
    [XmlAttribute("type")]
    public string Type
    {
        get; set;
    }

    [XmlAttribute("Id")]
    public String Id
    {
        get; set;
    }

}

public class Light
{

    [XmlAttribute("type")]
    public string Type
    {
        get; set;
    }

    [XmlAttribute("fin")]
    public string FIN
    {
        get; set;
    }

    [XmlAttribute("ItemType")]
    public string ItemType
    {
        get; set;
    }
 }

public class Room{

      public Table Table
    {
        get; set;
    }

    public Light Light
    {
        get; set;
    }

  }

 public  class Program
{
    static void Main(string[] args)
    {

        List<Room> list = new List<Room>
        {
            new Room
            {

                Light = new Light{ Type="Incadenscent",  fin="QS", ItemType="something"},
                Table = new Table{Type="Metal", Id="10"}
                //error here when I try to add a new table object
                Table = new Table{Type="Wood", Id="13"}
            }
           } ;     
         SerializeToXML(list);

    }
    static public void SerializeToXML(List<Room> sample) 
    {
        XmlSerializer serializer = new XmlSerializer(typeof(List<Room>)););
        TextWriter textWriter = new StreamWriter(@"C:\assets.xml");
        serializer.Serialize(textWriter, sample);
        textWriter.Close();

    }
} 
```

当我尝试在 Room 对象中实例化另一个表对象时，出现错误（特别是对象重复）。我究竟做错了什么？

例如：

```
 **Table = new Table{Type="Wood", Id="13"}** 
```

如何在房间列表中实例化另一个表对象而不会出现重复错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:08:01.720

有一个简单的解决方案：

```
public class Room
{
     [XmlElement("light")]
     public Light Light { get; set; }
     [XmlElement("table")]
     public List<Table> Tables { get; set; }
} 
```

初始化如@HackedByChinese 的回答所述。

将 List 声明为 [XmlElement]，则它不会序列化 <tables> 元素，并且 xml 看起来与您想要的完全一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:16:01.523

您的 XML 与该类不匹配。`Room`声明它包含一`Light`和一`Table`，其中 XML 有多个`Tables`.

`Room`应该看起来更像：

```
public class Room
{
     public Light Light { get; set; }
     public List<Table> Tables { get; set; }
} 
```

并像这样创建对象：

```
 new Room
    {

        Light = new Light{ Type="Incadenscent",  fin="QS", ItemType="something"},
        Tables = new List<Table>{ new Table{Type="Metal", Id="10"},
                                  new Table{Type="Wood", Id="13"} }
    } 
```

但是，您仍然会遇到反序列化问题。XmlSerializer 期望 XML 看起来更像：

```
<Room>
    <light Type="Incadenscent" fin="QS f" ItemType="something "/>
    <tables>
       <table Type="BR" Id="10"/>
       <table Type="BL" Id="21"/>
       <table Type="BR" Id="22"/>
       <table Type="GR" Id="35"/>
       <table Type="BR" Id="18"/>
       <table Type="RE" Id="55"/>
     </tables>
</Room> 
```

但是，如果生成的 XML*必须*看起来像您在示例中指定的方式，您将需要[实现`IXmlSerializable`](https://stackoverflow.com/questions/279534/proper-way-to-implement-ixmlserializable)on `Table`，并使用`XmlReader`and`XmlWriter`手动反序列化和序列化（分别）。

# joomla - Joomla 2.5 K2 网站的网站管理员工具中显示多个重复的标题标签

> ID：11050947
> 
> 赞同：0
> 
> 时间：2012-06-15T12:49:00.853
> 
> 标签：joomla, duplicates, google-search-console, joomla-k2

我的 Joomla K2 网站在 Google 网站管理员工具中有大量重复的标题标签时遇到问题。以下是一篇 K2 文章的一些示例，该文章已在网站管理员工具中进行了标记，可通过许多不同的链接获得。

```
www.yakangler.com/articles/how-to/fishing/item/1461-bob-bramblet
www.yakangler.com/articles/news/events/special-events/item/1461-bob-bramblet
www.yakangler.com/articles/news/events/tournaments/item/1461-bob-bramblet
www.yakangler.com/articles/news/just-in/item/1461-bob-bramblet
www.yakangler.com/articles/news/new-products/boats/item/1461-bob-bramblet
www.yakangler.com/articles/news/new-products/fishing/item/1461-bob-bramblet
www.yakangler.com/articles/regional-fishing-reports/mid-atlantic-reports/item/1461-bob-bramblet
www.yakangler.com/guides-map/kayak-guides/item/1461-bob-bramblet
www.yakangler.com/index.php?option=com_k2&view=item&id=1461:bob-bramblet&Itemid=509 
```

我不确定如何通过所有这些不同的途径获得这篇文章，它只发布在一个类别中。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:53:12.557

您似乎在多个类别中重复了相同的内容。或者您没有带有旧链接的 SEF 生成器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T07:05:40.607

升级到 2.6.6，将菜单链接到“K2 类别”，不要选择特定类别。这将使所有标签都将该菜单 url 作为其默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:14:32.340

更新到 2.6.4 并为标签视图创建默认菜单点

# php - 在“where”子句中获取“country_id”列不明确 - cakephp 1.3 中的搜索查询错误

> ID：11050949
> 
> 赞同：4
> 
> 时间：2012-06-15T12:49:02.567
> 
> 标签：php, mysql, cakephp, cakephp-1.3

我正在使用 CakePHP 1.3 版本使用搜索插件来实现搜索功能。

我有三个模型：

*   演示，
*   国家
*   状态

`Demo`有两个外键，`country_id`并且`state_id`. `State`有外键`country_id`。

我正在做的是，我有搜索表单，其中包含国家和州下拉列表，可以从国家和州表中获取所有数据。当我从下拉列表中搜索任何国家并提交表单时，它会显示以下错误。如果我只使用状态下拉列表进行搜索，我会得到正确的结果。

当我执行搜索查询时，我得到了错误

> '列' `country_id`'在where子句中不明确'

我的查询是：

```
SELECT `Demo`.`id`, `Demo`.`demo2`, `Demo`.`desc`, `Demo`.`subject`, `Demo`.`gender`, `Demo`.`country_id`, `Demo`.`state_id`, `Demo`.`image_url`, `Country`.`id`, `Country`.`name`, `State`.`id`, `State`.`country_id`, `State`.`description` FROM `demos` AS `Demo` LEFT JOIN `countries` AS `Country` ON (`Demo`.`country_id` = `Country`.`id`) LEFT JOIN `states` AS `State` ON (`Demo`.`state_id` = `State`.`id`) WHERE `country_id` = 2 
```

Demo表中的模型关系：

```
var $belongsTo = array(
    'Country' => array(
        'className' => 'Country',
        'foreignKey' => 'country_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),

    'State' => array(
        'className' => 'State',
        'foreignKey' => 'state_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
); 
```

获取下拉列表中所有国家/地区的控制器查询是：

> $country=$this->Country->find('list'); //只在下拉列表中显示国家列表

该查询从除`Country`( `country_id`) 之外的所有字段中搜索数据，因为它不知道`country_id`要从 table`Demo`或 table中查找哪个`State`。我需要`country_id`从演示表中获得正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:39:15.577

据我了解，您想通过 Demo 查找特定的`country_id`. 好吧，您应该定义您正在使用的“country_id”，因为这些表中不止一个具有这样的列。

只需使用`Demo`. `country_id`在条件数组中：

```
array('conditions' => array('Demo.country_id' => 2)); 
```

您应该会看到 Cake 生成的一些 SQL，如下所示：

```
SELECT `Demo`.`id`, `Demo`.`demo2`, `Demo`.`desc`, `Demo`.`subject`, `Demo`.`gender`, `Demo`.`country_id`, `Demo`.`state_id`, `Demo`.`image_url`, `Country`.`id`, `Country`.`name`, `State`.`id`, `State`.`country_id`, `State`.`description` FROM `demos` AS `Demo` LEFT JOIN `countries` AS `Country` ON (`Demo`.`country_id` = `Country`.`id`) LEFT JOIN `states` AS `State` ON (`Demo`.`state_id` = `State`.`id`) WHERE `Demo`.`country_id` = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:53:23.197

尝试这个：

```
SELECT
Demo.id,
Demo.demo2,
Demo.desc,
Demo.subject,
Demo.gender,
Demo.country_id,
Demo.state_id,
Demo.image_url,
Country.id,
Country.name,
State.id,
State.country_id,
State.description

FROM demos AS Demo
LEFT JOIN countries AS Country ON (Demo.country_id = Country.id)
LEFT JOIN states AS State ON (Demo.state_id = State.id) WHERE Demo.country_id = 2 
```

# c# - 枚举程序集的所有已安装版本（在 GAC 中）

> ID：11050951
> 
> 赞同：7
> 
> 时间：2012-06-15T12:49:06.037
> 
> 标签：c#, dll, x86, 64-bit, gac

是否可以使用 C# 在 GAC 中枚举所有已安装的程序集版本？例如，我有一个名为“My.Assembly”的程序集。该程序集可能有各种版本（“1.0.0.0”、“2.3.4.5”、“0.1.2.4”、...），并且可以针对各种平台（x86、x64、任何 CPU）进行编译。

现在我需要一种方法来确定安装了哪些版本/平台。

我知道我可以枚举 GAC 中的目录，但这似乎是错误的。应该有更好的方法来做到这一点。

**背景** 我有一个启动器应用程序，用户在其中选择一个 DLL。启动器从 DLL 中检索一些信息（不加载它），然后必须启动处理 DLL 的正确托管 C# 应用程序。DLL 可以为 Win32 或 x64 编译，并始终暴露相同的（平台无关）接口。我使用 LoadLibrary 函数在 C# 应用程序中加载 DLL。唯一的问题是进程必须是匹配的格式（x86 或 x64）。C# 应用程序可以而且应该针对 x86、x64 和任何 CPU 进行编译。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T07:16:05.167

使用[非托管 Fusion API的](http://msdn.microsoft.com/en-us/library/ms404523.aspx)[托管包装器](http://blogs.msdn.com/b/junfeng/archive/2004/09/14/229649.aspx)a能够完全完成我想做的事情：

```
class Program
{

    static IEnumerable<AssemblyName> GetInstalledVersions(string name)
    {
        int result;

        IAssemblyName assemblyName;
        result = Utils.CreateAssemblyNameObject(out assemblyName, name, CreateAssemblyNameObjectFlags.CANOF_DEFAULT, IntPtr.Zero);
        if ((result != 0) || (assemblyName == null))
            throw new Exception("CreateAssemblyNameObject failed.");

        IAssemblyEnum enumerator;
        result = Utils.CreateAssemblyEnum(out enumerator, IntPtr.Zero, assemblyName, AssemblyCacheFlags.GAC, IntPtr.Zero);
        if ((result != 0) || (enumerator == null))
            throw new Exception("CreateAssemblyEnum failed.");

        while ((enumerator.GetNextAssembly(IntPtr.Zero, out assemblyName, 0) == 0) && (assemblyName != null))
        {
            StringBuilder displayName = new StringBuilder(1024);
            int displayNameLength = displayName.Capacity;
            assemblyName.GetDisplayName(displayName, ref displayNameLength, (int)AssemblyNameDisplayFlags.ALL);
            yield return new AssemblyName(displayName.ToString());
        }

    }

    static void Main(string[] args)
    {
        foreach (AssemblyName assemblyName in GetInstalledVersions("System.Data"))
            Console.WriteLine("{0} V{1}, {2}", 
                assemblyName.Name, assemblyName.Version.ToString(), assemblyName.ProcessorArchitecture);
    }
} 
```

运行上面的程序会给我以下输出：

```
System.Data V2.0.0.0, Amd64
System.Data V2.0.0.0, X86
System.Data V4.0.0.0, Amd64
System.Data V4.0.0.0, X86 
```

感谢 Hans Passant，他为我指明了正确的方向！

# ember.js - Ember.js 路由器动作到控制器

> ID：11050956
> 
> 赞同：6
> 
> 时间：2012-06-15T12:49:24.413
> 
> 标签：ember.js, ember-old-router

当我使用 Ember 路由器时，如何在模板中定义连接到控制器的操作？

一个例子在这里：http: [//jsfiddle.net/KvJ38/3/](http://jsfiddle.net/KvJ38/3/)

在 My Profile 下有两个动作：一个是在 State 上定义的，并且正在工作 两个是在 Controller 上定义的。我怎样才能使这个工作或我应该使用另一种方法？

```
App.Router = Em.Router.extend({
  enableLogging: true,
  location: 'hash',

  root: Em.State.extend({
    // EVENTS
    goHome: Ember.State.transitionTo('home'),
    viewProfile: Ember.State.transitionTo('profile'),

    // STATES
    home: Em.State.extend({
      route: '/',
      connectOutlets: function(router, context) {
        var appController = router.get('applicationController');
        appController.connectOutlet(App.HomeView);
      }
     }),

    // STATES
    profile: Em.State.extend({
      route: '/profile',
        connectOutlets: function(router, context) {
          var appController = router.get('applicationController');
          appController.connectOutlet(App.ProfileView);
        }
    }),

    one: function() {
      alert("eins");
    },
  }) 
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T13:10:57.253

动作的默认目标是路由器，但您可以在模板中定义另一个目标：

```
{{action two target="controller"}} 
```

并在“App.ProfileController”中添加“二”功能。

**更新**

希望这个答案在 2012 年中期是正确的。现在（2014 年 9 月），文档说：

*默认情况下，`{{action}}`帮助程序触发模板控制器上的方法。[...]如果控制器没有在其动作对象中实现与动作同名的方法，动作将被发送到路由器，当前活动的叶子路由将有机会处理动作。[...] 如果模板的控制器和当前活动的路由都没有实现处理程序，则该操作将继续冒泡到任何父路由。最终，如果`ApplicationRoute`定义了 an，它将有机会处理该操作。当一个动作被触发，但没有在控制器、当前路由或任何当前路由的祖先上实现匹配的动作处理程序时，将抛出错误。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T22:28:46.830

如@Stéphane 所述，您可以显式指定目标属性，以便将操作发送到其他地方。

如果未指定，动作助手的目标是 controller.target。如您所述，这通常设置为路由器。

如果您有一个希望默认目标不同的模板，您可以通过设置控制器的目标属性来实现。例如，要将目标设置为控制器本身：

```
App.MyController = Ember.Controller.extend({
  init: function(){
    this._super();
    this.set('target', this);
  };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:54:17.317

控制器不应“直接”负责动作事件。状态/路线是。

我相信[https://github.com/emberjs/ember.js/issues/1015](https://github.com/emberjs/ember.js/issues/1015)会帮助你。

# javascript - jQuery 验证 onblur textarea 与其他输入问题

> ID：11050957
> 
> 赞同：0
> 
> 时间：2012-06-15T12:49:28.440
> 
> 标签：javascript, jquery, jquery-validate

我无法让 jQuery 验证插件验证模糊或失去焦点的单个输入元素。显然这应该是默认行为，但被最新版本的 jQuery 破坏了。

现在我尝试使用

> onfocusout：函数（元素）{$（元素）.valid（）；}

这适用于 textarea 字段。但不适用于我的文本输入字段。为什么会这样，我该如何让它工作？

[http://jsfiddle.net/zGR5Q/2/](http://jsfiddle.net/zGR5Q/2/)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

    <script>
        $(document).ready(function(){
            $('#formId').validate({
                    onfocusout: function(element)
                    {
                        $(element).valid();
                    }
            });
        });
    </script>

</head>
<body>

<form id="formId" method="get" action="">

<input id="cname" name="name" size="25" class="required" minlength="2" /><br />
<input id="cemail" name="email" size="25"  class="required email" /><br />
<textarea id="ccomment" name="comment" cols="22"  class="required"></textarea> <br />
<input class="submit" type="submit" value="Submit"/>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:57:22.880

你必须写

```
 <input type='text'.... 
```

它有效

# c# - 对象实体到 CSV 序列化/转换

> ID：11050964
> 
> 赞同：16
> 
> 时间：2012-06-15T12:49:48.170
> 
> 标签：c#, .net

如何在 C# 中将所有值（属性）写入 csv 格式的字符串？例如：

```
class Person(string firstName, string lastName, int_age);
Person person = new Person("Kevin","Kline",33); 
```

现在我想要一个字符串**“Kevin;Kline;33”**

换句话说，我想将一个对象序列化为 CSV

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T13:19:19.593

看看[Josh Close 的](https://stackoverflow.com/users/68499/josh-close)优秀[CSVHelper](https://github.com/JoshClose/CsvHelper)库

```
var person = new Person("Kevin","Kline",33);
using (var csv = new CsvWriter(new StreamWriter("file.csv")))
{
    csv.Configuration.HasHeaderRecord = false;
    csv.Configuration.Delimiter = ';';
    csv.WriteRecord(person);
} 
```

输出：

```
Kevin;Kline;33 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T13:15:39.370

通过使用反射，您可以从对象中检索属性信息

```
foreach (PropertyInfo prp in obj.GetType().GetProperties()) {
   if (prp.CanRead) {
      object value = prp.GetValue(obj, null);
      string s = value == null ? "" : value.ToString();
      string name = prp.Name;
      ...
   }
} 
```

该`GetProperties`方法有一个重载接受`BindingFlags`，通过它您可以确定您需要哪种属性，例如私有/公共实例/静态。

你可以像这样组合它们

```
var properties = type.GetProperties(BindingFlags.Public | 
                                    BindingFlags.NonPublic | 
                                    BindingFlags.Instance); 
```

* * *

应用于你的问题，你可以写

```
List<Person> people = ...;
Type type = typeof(Person);
PropertyInfo[] properties = type.GetProperties();
var sb = new StringBuilder();

// First line contains field names
foreach (PropertyInfo prp in properties) {
   if (prp.CanRead) {
      sb.Append(prp.Name).Append(';');
   }
}
sb.Length--; // Remove last ";"
sb.AppendLine();

foreach (Person person in people) {
    foreach (PropertyInfo prp in properties) {
       if (prp.CanRead) {
          sb.Append(prp.GetValue(person, null)).Append(';');
       }
    }
    sb.Length--; // Remove last ";"
    sb.AppendLine();
}

File.AppendAllText("C:\Data\Persons.csv", sb.ToString()); 
```

将字符串括在双引号中并通过加倍它们来转义它们包含的双引号也是一个好主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:07:33.787

你可以使用这样的东西：

```
...
        PropertyInfo[] properties = obj.GetType().GetProperties();
        string CSVRow = "";
        foreach (PropertyInfo pi in properties)
        {
            CSVRow = CSVRow + pi.GetValue(obj, null) + ";";
        }
        CSVRow.Remove(CSVRow.Length - 1, 1);
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:21:33.587

我相信[FileHelpers](http://filehelpers.sourceforge.net/)对此有好处，但我自己并没有在愤怒中使用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:10:15.737

像这样的东西：

```
public string ToCsv()
{
    return string.Join(";", new string[]{
        _firstName,
        _lastName,
        _age.ToString()
    }.Select(str=>Escape(str)));
} 
```

或者，使用反射，

```
public static string ToCsv(this object obj)
{
    return string.Join(";",
        this.GetType().GetProperties().Select(pi=>
            Escape(pi.GetValue(this, null).ToString())
        ));
} 
```

其中 Escape 是一个适当的转义函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-30T19:11:17.347

一种可能的实现，它读取复杂对象（深度对象序列化），例如具有对象数组属性的对象数组，并保存格式为 CSV 文件的 oa 字符串：

```
private string ToCsv(string separator, IEnumerable<object> objectList)
{
    StringBuilder csvData = new StringBuilder();
    foreach (var obj in objectList)
    {
        csvData.AppendLine(ToCsvFields(separator, obj));
    }
    return csvData.ToString();
}

private string ToCsvFields(string separator, object obj)
{
    var fields = obj.GetType().GetProperties();
    StringBuilder line = new StringBuilder();

    if (obj is string)
    {
        line.Append(obj as string);
        return line.ToString();
    }

    foreach (var field in fields)
    {
        var value = field.GetValue(obj);
        var fieldType = field.GetValue(obj).GetType();

        if (line.Length > 0)
        {
            line.Append(separator);
        }
        if (value == null)
        {
            line.Append("NULL");
        }
        if (value is string)
        {
            line.Append(value as string);
        }
        if (typeof(IEnumerable).IsAssignableFrom(fieldType))
        {
            var objectList = value as IEnumerable;
            StringBuilder row = new StringBuilder();

            foreach (var item in objectList)
            {
                if (row.Length > 0)
                {
                    row.Append(separator);
                }
                row.Append(ToCsvFields(separator, item));
            }
            line.Append(row.ToString());
        }
        else
        {
            line.Append(value.ToString());
        }
    }
    return line.ToString();
} 
```

# android - 如何从 Android 应用程序将图像发布到 Facebook

> ID：11050967
> 
> 赞同：1
> 
> 时间：2012-06-15T12:49:51.603
> 
> 标签：android, facebook, image

> **可能重复：**
> [Android 将图片发布到 Facebook 墙上](https://stackoverflow.com/questions/5168145/android-post-picture-to-facebook-wall)

我是 facebook android sdk 的新手。我已将 sdk 作为 android 项目添加到 eclipse 中。在我的应用程序中有一个图像和一个按钮。我希望按下按钮时将图像上传到 Facebook。我已经阅读了关于 SO 的各种帖子。但我无法弄清楚如何去做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:12:15.407

将图像存储在位图中。并使用以下代码。

```
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpPost httpPost = new HttpPost(
        "https://graph.facebook.com/me/photos?access_token="
                + AccessTokens.fbaccesstoken);
MultipartEntity entity = new MultipartEntity(
        HttpMultipartMode.BROWSER_COMPATIBLE);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.JPEG, 100, bos);
byte[] data = bos.toByteArray();
entity.addPart("source", new ByteArrayBody(data, "myImage.jpg"));
entity.addPart("message", new StringBody(caption.getText()
        .toString()));
httpPost.setEntity(entity);
HttpResponse response = httpClient.execute(httpPost,localContext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:54:19.140

试试这个，

```
Button mButton=(Button)findViewById(R.id.button);

mButton.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             Facebook mFacebook=new Facebook(yourAppID)

    byte[] data = null;
    Bitmap bi = BitmapFactory.decodeFile(imageLink);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.PNG, 100, baos);
    data = baos.toByteArray();

    Bundle params = new Bundle();
    params.putString("method", "photos.upload");
    params.putByteArray("picture", data);

    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mAsyncRunner.request(null, params, "POST",
            new SampleUploadListener(), null);
         }
     });

public class SampleUploadListener extends BaseRequestListener {

    @SuppressWarnings("unused")
    public void onComplete(final String response, final Object state) {
        try {
            Log.d("Facebook-Example", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            String src = json.getString("src");

            PublishImage.this.runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(getApplicationContext(),
                            "Successfully Uploaded", Toast.LENGTH_SHORT)
                            .show();
                }
            });
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }
}

public abstract class BaseRequestListener implements RequestListener {

    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onFileNotFoundException(FileNotFoundException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onMalformedURLException(MalformedURLException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

} 
```

# alfresco - 我需要 Rackspace 提供什么来部署 alfresco 实例？

> ID：11050970
> 
> 赞同：0
> 
> 时间：2012-06-15T12:49:57.677
> 
> 标签：alfresco, rackspace

我想在 Rackspace 云上为 Alfresco 设置我的测试/开发环境，因为我已经在使用他们的服务了。

现在，Alfresco 需要两件东西：tomcat + 一些文件系统（1 gig max 就可以开始了），以及一个 mysql 数据库。

现在，我从来没有设置过这样的东西，所以我正在寻找建议。它是否可行，我需要什么，所以我只能在测试时运行它（并从我的桌子下面扔掉一个盒子）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:24:26.253

您正确列出了启动和运行 Alfresco 所需的大部分内容。我给你的唯一建议是关于物理内存：经验表明，Alfresco 至少需要 512m 才能运行，再加上约 256M 的 PermGen 空间。我会说你需要 1G 内存盒。

# android - 在构建发布时如何构建架构子集

> ID：11050972
> 
> 赞同：1
> 
> 时间：2012-06-15T12:50:00.303
> 
> 标签：android, makefile, android-ndk

我目前为多个目标构建我的 Android 本机库，但作为构建速度的改进，我想基于优化设置构建一个子集。我在 Application.mk 中尝试了类似的方法，但它不起作用：

```
APP_MODULES := a b c
ifeq ($(APP_OPTIM),debug)
        APP_ABI := armeabi x86
else
ifeq ($(APP_OPTIM),release)
   APP_ABI  := armeabi-v7a
endif
endif
APP_STL := gnustl_static 
```

它甚至在这个文件中设置了 APP_OPTIM？还是我需要使用其他变量，例如“APP_DEBUG”，或者这根本不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:02:32.280

看来您可以像这样在“Application.mk”中使用“APP_DEBUG”布尔值：

```
ifeq ($(APP_DEBUG),true)
APP_ABI := armeabi
else
ifeq ($(APP_DEBUG),false)
APP_ABI := x86 armeabi-v7a
else
# for cleaning all
APP_ABI := x86 armeabi-v7a armeabi
endif
endif 
```

希望我可以帮助有关此信息的人。

# java - 如何使用 restfb 在 Facebook 上点赞、点赞和评论？

> ID：11050974
> 
> 赞同：1
> 
> 时间：2012-06-15T12:50:10.277
> 
> 标签：java, restfb

我是 Java 和 restfb 的新手。我正在尝试对用户和页面帖子进行喜欢、不同和评论，但在 restfb 的文档中找不到太多信息。我已经完成了所有的 oauth 过程，甚至可以拉出帖子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:18:13.043

像一个帖子：

```
DefaultFacebookClient client = new DefaultFacebookClient(access_token);
client.publish(post.getId()+"/likes", Boolean.class); 
```

与帖子不同：

```
DefaultFacebookClient client = new DefaultFacebookClient(access_token);
post.getLikes();
// retrieve a specific like, then
client.delete(like); 
```

评论一个帖子：

```
DefaultFacebookClient client = new DefaultFacebookClient(access_token);
client.publish(post.getId()+"/comments", String.class, Parameter.with("message", "Your comment here")); 
```

# qt - 删除 Qt 中的非空文件夹

> ID：11050977
> 
> 赞同：31
> 
> 时间：2012-06-15T12:50:20.473
> 
> 标签：qt, qt4

如何在 Qt 中删除非空文件夹。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-06-13T08:24:45.010

如果您使用的是 Qt 5，则有[QDir::removeRecursively()](http://qt-project.org/doc/qt-5/qdir.html#removeRecursively)。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-06-15T12:53:14.427

先递归删除目录的内容。[这是一篇博客文章，其中包含执行此操作的示例代码。](http://john.nachtimwald.com/2010/06/08/qt-remove-directory-and-its-contents/)我已经包含了相关的代码片段。

```
bool removeDir(const QString & dirName)
{
    bool result = true;
    QDir dir(dirName);

    if (dir.exists()) {
        Q_FOREACH(QFileInfo info, dir.entryInfoList(QDir::NoDotAndDotDot | QDir::System | QDir::Hidden  | QDir::AllDirs | QDir::Files, QDir::DirsFirst)) {
            if (info.isDir()) {
                result = removeDir(info.absoluteFilePath());
            }
            else {
                result = QFile::remove(info.absoluteFilePath());
            }

            if (!result) {
                return result;
            }
        }
        result = QDir().rmdir(dirName);
    }
    return result;
} 
```

**编辑**：以上答案适用于 Qt 4。如果您使用的是 Qt 5，则此功能通过[QDir::removeRecursively()](http://doc.qt.io/qt-5/qdir.html#removeRecursively)方法内置到 QDir 中。

# javascript - 在 Jquery/Javascript 中访问动态属性名称

> ID：11050978
> 
> 赞同：1
> 
> 时间：2012-06-15T12:50:21.193
> 
> 标签：javascript, jquery, dynamic, jquery-selectors

在我正在编写的插件中，开发人员可以指定我正在存储和引用的选项，如下所示：

```
(function( $, window) {
    $.widget("mobile.plug", $.mobile.widget, {
        options: {
            menuWidth: '25%',
            middleWidth: '25%',
            mainWidth: '25%'
            },
         some: function(){
            var self = this,
                o = self.options;

            console.log( o.menuWidth );
            }
     })
}) (jQuery,this); 
```

**我的问题**：
假设我想遍历所有三个元素（主、菜单、中间）并获取相应的选项值，如果可能的话，我将如何动态构造**o.[elem]Width**？

这不起作用（错误：. 运算符后缺少名称）：

```
// this selects panels with jqmData(panel="mid|menu|main")
var elems = $('selector');

for (var i = 0; i<elems.length; i++){
   var el = elems.eq(i);
   console.log( o.[el.jqmData("panel")]Width );
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:53:36.487

您应该能够将“宽度”连接到“面板”结果：

```
o[el.jqmData("panel") + "Width"] 
```

例如，如果`el.jqmData("panel")`是“菜单”，你会得到`o["menuWidth"]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:55:52.677

您收到错误是因为您尝试使用两种形式的对象成员运算符。

这两种形式是...

*   `obj.propertyName` *点符号*

*   `obj["propertyName"]` *括号符号*

你有`.[...]` *（同时使用。点希望后面有一个名字）*

你需要`[...]` *（没有前面的点）*

然后，您还想做字符串连接以添加`"Width"`

```
o[el.jqmData("panel") + "Width"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T12:55:59.917

您正在寻找的是带括号的字符串表示法：

```
for (var i = 0; i<elems.length; i++){
   var el = elems.eq(i);
   console.log( o[el.jqmData("panel") + "Width"] );
   } 
```

...假设`el.jqmData("panel")`返回`"mid"`,`"menu"`等。

在 JavaScript 中，您可以使用点分表示法和文字 ( `obj.foo`) 或括号表示法和字符串 ( `obj["foo"]`) 来引用属性。在后一种情况下，它不必是文字字符串，它可以是表达式的结果。

# iphone - 如何使用 JSON Parsing 从服务器加载图像并将其显示在 tableView 中？

> ID：11050979
> 
> 赞同：0
> 
> 时间：2012-06-15T12:50:25.633
> 
> 标签：iphone

我想将服务器端图像加载到 tableview 并且我想使用 JSON Parsing。我已经完成了该代码。但我想使用 ASIHTTPRequest 代码。你能给我发一份演示教程，使用 ASIHTTPRequest 将服务器图像加载到我的 tableview 中吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:21:25.363

从[这里](http://ios-blog.co.uk/articles/tutorials/parsing-json-on-ios-with-asihttprequest-and-sbjson/)阅读使用 ASIHTTPRequest 和 SBJson 在 iOS 上解析 JSON...

# asp.net-mvc-3 - 在 ViewModel 上应用验证属性时未收到验证错误

> ID：11050983
> 
> 赞同：0
> 
> 时间：2012-06-15T12:50:45.897
> 
> 标签：asp.net-mvc-3, custom-attributes, customvalidator

我有一个视图模型

```
 [CustomValidation(typeof(MyValidation), "MyMethod")]
    [Serializable()]
    public class TransactionViewModel
   {
      public string InvoiceNumber;
   }

 public class MyValidation
{

  public static ValidationResult validatelength(TransactionViewModel length)
{

bool isValid;
 if (length.InvoiceNumber.Length >15)
isValid = false;
 else
isValid = true;
   if (isValid)
 {
    return ValidationResult.Success;
}
 else
 {
    return new ValidationResult(
      "The Field value is greater than 15");
 }
  }
} 
```

现在我正在检查我的类对象的某些字段，如果验证失败我正在检查控制器中的模型状态并返回视图，为发票编号添加了验证消息但仍然没有收到错误

**我们可以将验证属性应用于模型视图吗，如果我做错了什么，PLS 提供解决方案**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:00:19.563

利用

```
<%= this.Html.ValidationSummary() %> 
```

或者

```
@this.Html.ValidationSummary() 
```

你会得到你正在寻找的东西。

如果你的模型状态无效，你会得到你正在寻找的错误。

你的问题是你的错误是你的错误没有与班级的任何成员相关联。在模型状态中，它具有键“”，因为它没有与任何字段相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:38:29.390

也许您忘记将validationsummary 放在您的视图上？

```
<%= Html.ValidationSummary("Create was unsuccessful. Please correct the errors and try again.") %> 
```

请提交您的观点以供审核。同时在这里你是它工作的好例子： [Validation with the Data Annotation Validators (C#)](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

[Scott 博客中的模型验证](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

在此处查看本教程[处理模型错误](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)，但使用空字符串作为键：

```
ModelState.AddModelError(string.Empty, "There is something wrong with Foo."); 
```

如您所料，错误消息将出现在 <%: Html.ValidationSummary() %> 中。

# expect - 期望命令在 bash 脚本中不起作用

> ID：11050991
> 
> 赞同：4
> 
> 时间：2012-06-15T12:51:15.737
> 
> 标签：expect, spawn

我有一个与期望相关的问题。

当我运行 abc.sh 时，其中包括以下几行

```
#!/usr/bin/expect
spawn scp /etc/httpd/conf/httpd.conf 192.168.0.12:/tmp
######################
expect {
-re "password:" {
exp_send "PASSWORD\r"
}
}
interact 
```

它工作正常

但是当我在我的运行脚本中使用类似的代码时它不起作用

* * *

```
#!/bin/bash
clear
while read -u3 LINE
do
code .........
code .......
code  ........

REMOTE_COMMANDS1="scp -r -v $BASE_DIRECTORY/$USERNAME $D_IPADDRESS:/home/"

spawn $REMOTE_COMMANDS1
######################
expect {
-re "password:" {
exp_send "redhat\r"
}
}
interact

done 3< /opt/sitelist.txt 
```

**它给出了错误**

./script.sh：第 62 行：意外标记附近的语法错误`}' ./script.sh: line 62:`}'

我认为这是因为我没有在脚本顶部包含 #!/usr/bin/expect 但如果我使用它并执行我的脚本，它不会做任何事情并在执行后在终端中显示所有代码。那么我们可以同时包含 #!/usr/bin/expect 和 #!/bin/bash 吗？

问候，阿迪亚

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T15:12:08.433

当然 bash 不能解释 expect 命令，就像 bash 不能解释 Java/Perl/Python 语法一样。有几种方法。

将期望脚本编写为单独的程序并从 bash 脚本中调用它：

```
#!/bin/bash
clear
while read -u3 LINE
do
    #...
    ./expect_scp.exp "$BASE_DIR" "$D_IPADDRESS" "$USERNAME" "$PASSWORD"
done 3< /opt/sitelist.txt 
```

并且`expect_scp.exp`是

```
#!/usr/bin/expect

set base_dir  [lindex $argv 0]
set remote_ip [lindex $argv 1]
set username  [lindex $argv 2]
set password  [lindex $argv 3]
# or
foreach {base_dir remote_ip username password} $argv {break}

spawn scp -rv $base_dir/$username $remote_ip:/home/
expect -re "password:"
exp_send -- "$password\r"
interact 
```

您*可以*将期望脚本放在 bash 脚本中，并注意引用。幸运的是，单引号并不特别值得期待。

```
#!/bin/bash
clear
export BASE_DIR D_IPADDRESS USERNAME PASSWORD
while read -u3 LINE
do
    #...
    expect -c '
        spawn scp -rv $env(BASE_DIR)/$env(USERNAME) $env(D_IPADDRESS):/home/
        expect -re "password:"
        exp_send -- "$env(PASSWORD)\r"
        interact
    '
done 3< /opt/sitelist.txt 
```

# media-player - JavaFX EqualizerBand 不播放音频

> ID：11050996
> 
> 赞同：0
> 
> 时间：2012-06-15T12:51:24.383
> 
> 标签：media-player, javafx-2

我想知道是否可以使用和显示均衡器频段，而无需实际播放音频。我有关于与所选频段范围相对应的噪声级别的信息。我想以音频均衡器带的形式显示该信息。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:20:47.557

你的意思是[http://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioEqualizer.html](http://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioEqualizer.html)吗？这个类不绘制任何东西，只是提供数据。FX 作为库没有均衡器控制，只是一种构建能力。

但是有很多基于 JavaFX 功能的均衡器。例如

*   [http://fxexperience.com/2012/01/fun-javafx-2-0-audio-player/](http://fxexperience.com/2012/01/fun-javafx-2-0-audio-player/)
*   Ensemble 示例中的 AudioChart：[http ://www.oracle.com/technetwork/java/javafx/samples/index.html](http://www.oracle.com/technetwork/java/javafx/samples/index.html)

您可以获取任何样本并将 MediaPlayer 波段输出替换为您自己的数据。

例如从 fxexperience.com 下载项目。打开它并找到 FxExperiencePlayer 文件。那里有下一行：

```
 spectrumListener = new AudioSpectrumListener() {
    ... 
```

这是创建的侦听器，它根据频段更新 UI。而不是向 MediaPlayer 提供该侦听器，而是自己调用它。例如

```
 new Thread() {
        public void run() {
            Random random = new Random();
            for (int i = 0; i < 10000; i++) {
                final float[] magnitudes = new float[10];
                for (int j = 0; j < magnitudes.length; j++) {
                    magnitudes[j] = random.nextFloat() * -100f;
                }

                Platform.runLater(new Runnable() {

                    @Override
                    public void run() {
                        spectrumListener.spectrumDataUpdate(0, 0, magnitudes, null);
                    }
                });
                try {
                    Thread.sleep(100);
                } catch (InterruptedException ex) {
                }
            }
        }
    }.start(); 
```

并评论下一行以禁用媒体播放器：

```
 //mediaPlayer.setAudioSpectrumListener(spectrumListener); 
```

# c++ - 使用分配器实现向量类：EXC_BAD_ACCESS

> ID：11050998
> 
> 赞同：1
> 
> 时间：2012-06-15T12:51:32.493
> 
> 标签：c++, allocator, variadic-functions

我正在实施一个练习向量。

我想做以下事情：

> 最初分配`100`元素而不调用它的构造函数。每当一个对象被添加到向量中时，它都会调用它的构造函数，直到向量太大以至于不能包含所有对象。当向量已满时，我分配其他`100`对象，依此类推。

这是代码：

```
#include <iostream>
#include <memory>
#include <exception>
#include <cstdarg>

using namespace std;

class indexOutOfBounds:exception
{
    const virtual char* what()
    {
        return "Index out of bounds";
    }
};

template <class T>
class Vector
{
private:
    T* data;
    allocator<T> data_all;
    int length;
    int _size;
public:
    static const int block=100; // the size of a single allocation block
    Vector()
    {
        data=data_all.allocate(block,NULL);
        length=0;
        _size=block;
    }
    Vector(int n,...)
    {
        va_list vl;
        T temp;
        va_start(vl, n);
        for(int i=0; i<n;i++)
        {
            temp=va_arg(vl,T);
            push_back(temp);
        }
        va_end(vl);
    }
    int size() const
    {
        return length;
    }
    void push_back(T item)
    {
        length++;
        if(length==_size)
        {
            _size+=block;
            data=data_all.allocate(_size,data);
        }
        data_all.construct(&data[length-1],item);
    }
    T& operator[] (int i) throw()
    {
        if(i<0 || i>=length)
            throw indexOutOfBounds();
        return data[i];
    }
    ~Vector()
    {
        for(int i=0; i<length;i++)
        {
            data_all.destroy(&data[i]);
        }
        data_all.deallocate(data,_size);
    }
};

int main(int argc, char** argv)
{
    Vector<int> v(1,0);
    cout << v[0] << endl;
    return 0;
} 
```

当我尝试打印时出现异常`v[0]`：

> EXC_BAD_ACCESS（代码=1，地址=0x0）

也许`&v[0]`是`NULL`，但我想不出原因。如果我不使用构造函数，`va_list`我只写一个这样的 main：

```
int main(int argc, char** argv)
{
    Vector<int> v;
    v.push_back(1);
    cout << v[0] << endl;
    return 0;
} 
```

我没有任何例外。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:00:26.917

最可能的原因是在带有可变参数的构造函数中，您没有初始化`length`or `_size`。这意味着当您调用`push_back`.

如果您在调试器中运行您的应用程序并检查这些变量，那将是显而易见的。我建议您下次遇到某种崩溃时，在调试器中运行它并尝试先解决它，然后再在这里询问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:59:50.840

您的`Vector(int n,...)`构造函数不分配内存。不初始化`length`, `_size`。然后你立即`push_back()`从`Vector(int n,...)`构造函数调用。当它调用`push_back`时，检查 `if(length==_size)`将不会按预期工作，因为两者都有垃圾值。