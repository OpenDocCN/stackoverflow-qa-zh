# StackOverflow 问答 10155000-10155999

# pascal - Turbo Pascal 叠加层是如何工作的？

> ID：10155003
> 
> 赞同：6
> 
> 时间：2012-04-14T15:56:45.220
> 
> 标签：pascal, dcpu-16

我正在为游戏 0x10c[中的 16 位 DCPU 实现一个汇编链接器。](http://0x10c.com/doc/dcpu-16.txt)

有人向我建议的一种技术是使用“覆盖，就像过去在 Turbo Pascal 中一样”，以便在运行时交换代码。

我得到了基本的想法（将覆盖的符号链接到相同的内存，在 ref 之前交换），但是它们的实现是什么？

它是编译器在引用之前插入的函数吗？这是一个陷阱吗？叠加层的数据是存储在叠加层的位置，还是存储在某个大表中？它运行良好，还是经常中断？是否有装配接口与覆盖的 Pascal 链接（反之亦然），还是不兼容？

谷歌基本上没有给我任何信息（除了它在现代 Pascal 编译器上是禁止的）。而且，我只是，就像，五岁太年轻了，当他们现在还需要他们的时候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T21:38:01.897

每个单元的跳转表，其元素在未加载时指向陷阱 (int 3F)。但这是针对较旧的 Turbo Pascal/Borland Pascal 版本 (5/6)，较新的还支持 (286) 保护模式，它们可能会采用另一种方案。

这种方案意味着当加载覆盖时，不会再发生陷阱开销。

我在参考资料中找到了这个链接：*[The Slithy Tove](http://www.boyet.com/articles/publishedarticles/theslithytove.html)*。那里还有其他很好的细节，例如如何处理跨越多个覆盖的调用链。

# django - 在 Google App Engine 上运行基于 Django 1.4 的应用程序

> ID：10155004
> 
> 赞同：4
> 
> 时间：2012-04-14T15:56:45.567
> 
> 标签：django, google-app-engine, django-nonrel

我正在开发一个基于 Django 1.4 的社交网站作为个人项目。我正在考虑将它托管在 Google App Engine 上；但是，我读过它的非关系数据库引擎不支持连接。

这对我有什么影响，即我应该采取什么措施让我的网站在 GAE 上运行，或者 Django 是否完全开箱即用？

我的网站依赖于许多第三方 Django 应用程序，包括[django-generic-m2m](https://github.com/coleifer/django-generic-m2m)。我什至需要在 Google 的 DBMS 上使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T10:19:55.893

您可以尝试申请访问[Google Cloud SQL](https://developers.google.com/cloud-sql/)，它显然支持在 GAE 上运行的[django 。](https://developers.google.com/cloud-sql/docs/django)

# java - 在 Java 中重新调整 JButton 的大小时遇到 问题

> ID：10155011
> 
> 赞同：2
> 
> 时间：2012-04-14T15:57:28.547
> 
> 标签：java, swing, resize, jbutton, layout-manager

每当我将我的 jbutton 添加到我的容器中时，它真的很大。我认为使用 label.setBounds() 函数会起作用，但它没有

```
public Liability_Calculator(String s)
{
    super(s);
    setSize(325,200);
    Color customColor = Color.WHITE;

    c = getContentPane();
    c.setLayout(new BorderLayout());

    //the button
    ok = new JButton("OK");

    //ok.setSize(50, 50);

    //HERE IS WHERE I TRY AND RESIZE!
    ok.setBounds(30,30,50,50);

    c.add(ok, BorderLayout.SOUTH);

    setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:03:34.333

建议：

*   您将需要阅读[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/)以
*   理解为什么你的 GUI 会这样
*   并了解如何利用布局管理器以一种简单的方式创建更好看的 GUI。
*   您还需要避免在任何 gui 组件上设置界限。

例如，`FlowLayout(FlowLayout.CENTER))`默认情况下使用 JPanel，您可以通过将 ok JButton 放入 JPanel，然后将 JPanel 放入 contentPane 来利用它：

```
 ok = new JButton("OK");
  // ok.setBounds(30, 30, 50, 50);

  JPanel southPanel = new JPanel();
  southPanel.add(ok);

  c.add(southPanel, BorderLayout.SOUTH); 
```

这会将第一个图像更改为第二个：

![在此处输入图像描述](../Images/04f1a68886e33428471700c279b5277e.png) ![在此处输入图像描述](../Images/4790b2f493cf7af483af9105ef67ceea.png)

# android - MD5 Hash-Keystore 不再位于 ~/.android/debug.keystore

> ID：10155014
> 
> 赞同：1
> 
> 时间：2012-04-14T15:57:35.237
> 
> 标签：android, maps, md5

我正在尝试查找 MD5 哈希，以便开始使用谷歌地图教程。

所以我首先需要得到 MD5，但是最近有一个针对 mac android SDK 的更新。

我一直在使用本教程 [http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)

我只需要找到 debug.keystore 就可以继续了。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:57:47.000

您可以使用 keytool 创建一个新的密钥库。

根据[android 文档](http://developer.android.com/guide/publishing/app-signing.html#cert)，这是一个生成私钥的 keytool 命令：

```
keytool -genkey -v -keystore my-release-key.keystore \
-alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

# jquery - Spotify 播放按钮和谷歌分析

> ID：10155015
> 
> 赞同：1
> 
> 时间：2012-04-14T15:57:53.477
> 
> 标签：jquery, google-analytics, spotify

我正在尝试使用 Google Analytics 跟踪 Spotify Play Button iframe 中的点击次数，但到目前为止没有取得多大成功。我正在尝试使用 jQuery 来捕获点击。

编码

```
$('iframe .clickable.play-pause-btn').click(function(){
    alert('foo');
}); 
```

显然不起作用，因为它是跨域的。是否有任何替代方法可以捕获这些点击？或者我只是知道我永远不会知道有多少用户点击播放，所以我只是安全地生活？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:03:47.830

我认为跨域策略不会让您跟踪在不同域上运行的 iframe 内的元素上的事件。

我认为我们没有将跟踪信息发送到父窗口的解决方案。

# javascript - 使用 Prettify 在网页中动态生成片段的语法高亮显示

> ID：10155017
> 
> 赞同：3
> 
> 时间：2012-04-14T15:58:10.137
> 
> 标签：javascript, ajax, syntax-highlighting, prettify, google-code-prettify

我有一个 div，我在其中从 AJAX 请求的结果中动态加载一段代码。然后我想使用 prettify 对其进行格式化。它可以工作，但速度很慢。我使用的代码如下：

```
var jqxhr = $.get(fileName)
 .success(function(data) {
  $('#myDiv').html(data);
  prettyPrint();
  $('#myDiv').fadeIn();
}) 
```

简而言之，我执行 GET 请求，将请求的结果放入#myDiv 中，然后对其进行格式化，然后在 div 中淡入淡出。这需要一段时间，但加载。但是当我淡出 div 时，页面会在几秒钟内保持无响应。我删除了 prettyPrint() 并且页面表现得非常完美。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:04:40.257

我只是推测，但有几点值得一提。

根据消息来源，prettify.js 的默认模式是使用延续运行，并避免一次占用 CPU 超过 250 毫秒（我在[http://code.google.com/p引用源/google-code-prettify/source/browse/trunk/src/prettify.js](http://code.google.com/p/google-code-prettify/source/browse/trunk/src/prettify.js)）：

```
/**
 * Split {@code prettyPrint} into multiple timeouts so as not to interfere with
 * UI events.
 * If set to {@code false}, {@code prettyPrint()} is synchronous.
 */
window['PR_SHOULD_USE_CONTINUATION'] = true; 
```

您在上面编写代码的方式表明它可能被配置为以同步模式运行，这就是它速度慢并且占用您的页面的原因。您应该确保此标志未设置为 false，并将您的 fadeIn 调用添加到您传递给 prettyPrint 调用的回调函数中。

假设我理解正确，如果你设法在异步模式下运行 prettyPrint，它最多应该占用 250 毫秒，并且通过将你对 fadeIn 的调用放在传递给 prettyPrint 调用的回调函数中，它不会褪色直到所有语法突出显示完成。如果当时对 prettyPrint（250 毫秒）的一系列调用仍然感觉很慢，其他建议可能是将最大时间值减少到小于 250 的值，或者找出如何确保 prettyPrint 仅从 prettyPrints 更新的元素你的ajax调用。

# android - Eclipse 和 Ant 在 Android 上构建的区别

> ID：10155027
> 
> 赞同：0
> 
> 时间：2012-04-14T15:59:15.703
> 
> 标签：android, eclipse, ant

我有一个利用 iText 库生成 PDF 的 android 应用程序。应用程序在使用 Eclipse 构建和打包 apk 时按预期编译和工作。我现在正在尝试使用 ant 来执行我的发布版本，但由于某种原因，它无法在其搜索路径中找到 java.awt.Image

仅供参考，失败的特定 API 如下所示

```
[javac] class file for java.awt.Image not found
[javac] com.itextpdf.text.Image image = com.itextpdf.text.Image.getInstance(photo.getPhotoPath()); 
```

如果我已经用 eclipse 编译了类，我可以使用命令来打包下面的调试 apk。不是很有用，但确实有效

```
ant debug 
```

所以我的问题是，我如何确定 eclipse 构建如何找到 java.awt.Image 类以便将其添加到 ant 构建中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T11:50:30.363

我之前遇到过这个问题，只需更新您的java jdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:06:22.340

在 Eclipse 中单击 Project > Properties > Java Build Path，它包含 Eclipse 使用的所有类路径设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:14:05.323

另一种方法是运行命令让 Android 为您的项目创建构建脚本（详情请[点击此处](http://developer.android.com/guide/developing/projects/projects-cmdline.html)）：

```
android update <project-name> -p . 
```

这将生成 build.xml，现在比较一下，看看你错过了什么。

# oop - 简单游戏中的基本设计模式

> ID：10155031
> 
> 赞同：1
> 
> 时间：2012-04-14T15:59:31.303
> 
> 标签：oop, design-patterns, singleton

我正在为一个简单的 iOS 井字游戏考虑这种设计模式：

*   `GameState`跟踪板上 X 和 O 位置的单例类
*   `GameDisplay`处理板的显示和触摸事件的单例类

这种状态和显示的分离似乎是合理的。`GameDisplay`可以将板上的点击转发到`GameState`板更新并检查获胜条件的位置。`GameState`可以反过来告诉`GameDisplay`绘制另一个 X/O 或游戏已完成以及获胜者是谁。我目前的计划是使用像`GameState.playAtSquare(Square s)`在两个单例之间进行通信的方法。

**这种设计是否会成为使用单例的任何主要缺点的牺牲品？**iirc 关于使用单例类存在一些争议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:27:55.950

仍然存在依赖关系和潜在的线程问题（如果您不采取预防措施）。

大多数情况下可以避免单例，在这种情况下也可以。相反，您不传递对`GameState`and的引用`GameDisplay`吗？您可以将这两个类包含在诸如`GameApplication`类之类的东西中，而不是使其成为单例并过着应用程序的生命周期。

`GameState`如果你这样做，那么你避免`GameDisplay`成为单身人士，因为他们不一定需要是一个人。

有关处理没有单例的游戏状态的示例，请查看[Gamestate management without evil Singletons](https://gamedev.stackexchange.com/questions/27272/gamestate-management-without-evil-singletons)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:30:59.497

我认为在这种情况下你不应该**使用**Singleton。

使用一个对象来表示`GameState`（或`Game`），因为它使您能够（例如）一次允许多个游戏。

`GameDisplay`应该是[**单个实例对象**，它与](https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what)**Singleton[**不同**](https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what)[。](https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what)`GameDisplay`对象应该通过[**依赖注入**](http://en.wikipedia.org/wiki/Dependency_injection)传递给需要它的方法。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:41:08.453

任何地方的单例的缺点与全局变量的缺点相同；也就是说，程序中具有状态的某些对象可以从程序中的其他任何地方直接访问和修改。

这对你的设计意味着你通过大胆假设你永远不能使用不同类型的 GameState 或不同类型的 GameDisplay 来在你的程序中建立刚性，因为你的程序的其余部分可能依赖于那些单例的存在。

在将单例“焊接”到程序中后，这种情况通常会出现问题 - 以后对 GameState 和 GameDisplay 的任何更改都可能对程序的其余部分产生意外的连锁反应，并寻找“变通办法”来限制或停止这种影响这些更改中的一些可能会导致代码中其他地方出现丑陋/hacky 的解决方案。

There's almost always a preferable alternative to singletons. While some people are tempted by singletons because it involves "doing a bit less typing up-front", once your program starts to grow a little, it nearly always ends up being a source of unnecessary complexity, special cases and quirks.**

# python - socket.error: [Errno 10061] 无法建立连接，因为目标机器主动拒绝它

> ID：10155039
> 
> 赞同：0
> 
> 时间：2012-04-14T16:00:14.580
> 
> 标签：python, exception

我有一个服务器-客户端应用程序，其中服务器随机在线，但客户端需要定期发送广播消息，以便在服务器在线时注册到服务器。所以我希望我的应用程序忽略上述错误并继续它正在做的事情，直到它从服务器获得特定的控制触发器。

示例代码：

```
import socket,sys
cs = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
cs.connect((HOST, CPORT))
cs.send("REGS " + hostname)
cs.close() 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:23:04.053

套接字引发 socket.error 异常：[http ://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html)

现在阅读如何使用 try-except 进行异常处理：[http ://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

# mysql - MySQL 列默认值 - 优点/缺点，我应该用于所有列吗？

> ID：10155041
> 
> 赞同：7
> 
> 时间：2012-04-14T16:00:28.920
> 
> 标签：mysql, null, default, default-value

1) 为表中的列提供默认值的优点和缺点是什么？

2）此外，**所有**列都应该有默认值吗？我的意思是，这似乎是个好主意……为什么不呢？:)

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T16:18:16.453

> 1) 为表中的列提供默认值的优点和缺点是什么？

优点是您可以设置默认值，而不是使用标准默认值。这也简化了插入语句，因为您不需要指定这么多值。

只要您有合理的默认值，就没有真正的缺点。

> 2）此外，所有列都应该有默认值吗？我的意思是，这似乎是个好主意……为什么不呢？:)

这实际上取决于您的业务逻辑。例如，如果有一个像 CUSTOMER_NAME 这样的列，你不可能想出一个好的默认值，那么你不应该指定一个默认值。但是对于其他列，如 ACTIVE 或 DELETED，可能是 true 或 false，您可能应该指定一个默认值。

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T16:13:35.933

无论您是否指定，所有列都将具有默认值。如果您不指定，它将仅使用该类型的*默认*默认值。

对于允许空值的列，默认值为 NULL。例如，对于不允许 NULL 的默认值，INTEGER 列的默认值将是 0。

*当您需要默认*默认值以外的其他值时，您应该指定默认值。

`INSERT`仅当您创建新记录时才会应用默认值。

默认值的一个很好的用例是在安全性中强制执行最小特权范式。

如果您的 ACL 表中有布尔 (TINYINT) 字段，例如“allowUpdates”和“allowDeletes”，那么您应该将它们默认为 FALSE (0)，以便在创建新用户时，他们将获得最少的权限，直到您专门设置它们。

如果您遵循最小特权范式，那么攻击者无法通过诱使系统创建新用户帐户来诱使系统授予他高特权。

因此，如果您不选择适当的默认值，则缺点可能会很严重。优点是您可以将默认值覆盖为应用程序的合理值。

其他优点包括在插入记录时，如果您想要特定字段的默认值，您可以不设置它。这可以使您的查询更短更简单。此外，它允许在数据库中处理配置。换句话说，您可以在不更改应用程序的情况下更改默认值（在数据库中）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-01T08:51:01.270

好处：

*   使用参照完整性/外键（表中的一列指向另一表中的列）时，您可以通过将外键列设置为 NULL 来为列设置无链接。例如，如果您有一张家庭表，其中一列指向一张孩子表，如果一个家庭没有孩子，那么孩子列可以为 NULL。
*   如果你需要它，它会给你一个额外的状态，例如。空字符串且未使用。

缺点

*   在数据集中的每一行上使用额外的内存，它不会节省内存，如果列允许 NULL 值，它会使用更多。
*   除了 0 或程序员必须处理的空字符串之外，还有一个额外的状态。

**黄金法则是不允许 NULL 列，除非您需要它们。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T16:18:42.280

默认值实际上与数据质量和信息的未来使用有关。

数据质量包括有合理的、深思熟虑的默认值。

当需要使用、操作和分析数据时，拥有空值、空值和空白往往会导致很多问题。

可以具有一组特定值的数据通常会受益于具有默认值。

真正自由文本的数据，例如 issue_details 可能没有默认值，但如果使用默认值，例如 " `not given`"未来。
相反，为了解决您的第二点，如果需要一个值并且默认值不合适，例如 user_last_name，则不应使用默认值。

其他领域的默认值可能是向所有数据用户强调意图的好方法。例如，对于名为“已知问题”的列，默认值可能是“无”，这将比 null 更准确和有用。

# c++ - 为什么静态 main 在 C++ 中不起作用？

> ID：10155045
> 
> 赞同：1
> 
> 时间：2012-04-14T16:01:05.703
> 
> 标签：c++

下面的代码不起作用。

```
#include<iostream>
class Application
{
public:
    static int main(int argc, char** argv)
    {
        std::cin.get();
    }
}; 
```

我认为静态成员函数与普通函数一样，静态 WinMain 工作正常。为什么静态主要不起作用？

好吧，我想我有点开始明白了，谢谢你的所有答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T16:14:55.713

Simply because the standard says so (3.6.1):

> A program shall contain a global function called `main`. [...] The function shall not be overloaded.

What you have is a valid function, but it's not the program entry point.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:04:26.913

这是由于编译程序上的链接方式。`main`基本上，由于范围，它无法找到。

[C++ 标准](http://www.kuzbass.ru:8086/docs/isocpp/basic.html)详细说明了为什么在“3.6 - 启动和终止 [basic.start]”部分，特别是“3.6.1 - 主函数 [basic.start.main]”中不能有静态 main。它说的地方

> 所有实现都应允许以下两种 main 定义：

```
 int main() { /* ... */ } 
```

> 和

```
 int main(int argc, char* argv[]) { /* ... */ } 
```

该标准的 pdf 文件在[这里](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)。它在pdf的第69页。

如果您希望您的代码能够正常工作，您需要执行以下操作

```
class Application
{
public:
    static int main(int argc, char** argv)
    {
        std::cin.get();
    }
};

int main(int argc, char** argv)
{
    return Application::main(argc, argv);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:07:41.137

以下代码可以正常工作（尽管我可以不由自主地想到它没有任何好处）

```
#include<iostream>
class Application
{
public:
    static int main(int argc, char** argv)
    {
        std::cin.get();
        return 0;
    }
};

int main(int argc, char** argv)
{
    return Application::main(argc, argv);
} 
```

另请注意，`main`原始帖子中的函数**不是** *main* - 它的名称`Application::main`与全局完全不同`main`- 您的编译器期望一个名为*main*的函数存在于全局范围内，而不是存在于类或命名空间内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:07:21.847

在您的代码中，静态成员`main()`存在于类的范围内，只要您不希望它成为程序的入口点（或开始）就可以了。

该标准要求在全局命名空间中定义入口点（即*标准）。* `main()`所以你可以这样做：

```
int main(int argc, char** argv) //defined in the global namespace
{
    return Application::main(argc, argv);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T16:10:56.370

假设您有两个类，`Application1`并且`Application2`都具有称为 的公共静态函数`main`，并具有适当的签名。应该选哪一个？所以这没有任何意义。

The C++ standard defines the **free function** `main` (with 2 possible signatures, if I remember correctly - argc/argv and no arguments) as the entry point to the program. Implementations are free to add their own (e.g. WinMain). So basically, static class functions are simply not defined to be entry points in the standard.

You are of course free to forward your global `main` function's arguments to whatever internal main function you choose.

# mootools - Mootols：如何将点击功能绑定到以编程方式生成的元素

> ID：10155046
> 
> 赞同：0
> 
> 时间：2012-04-14T16:01:09.807
> 
> 标签：mootools

我有一个普通的 javascript 函数，当单击按钮时，它会在页面中生成一些链接。现在我想为这些生成的链接添加一个点击功能。我已经为每个类添加了一个类，但它仍然无法正常工作。一切都是实时发生的，下面的 mooTools 脚本不起作用，尽管它可以很好地加载到页面中。

```
window.addEvent('domready', function() {
    $$('.jTrigger').addEvent('click', function(){alert('clicked!');})
    }) 
```

我正在寻找 jQuery 等价物

```
$(document).ready(function()
{
$(".myClass").live("click", function()
{
  do stuff here...
};
}); 
```

我会使用 Closure 或 jQuery（我知道如何使用的东西），但我正在开发一个 Joomla 后端插件，我被告知要坚持使用 MooTools。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:04:50.603

MooTools 也支持[事件委托](http://mootools.net/docs/core/Element/Element.Delegation)。这是文档中的示例：

```
// Adding the event, notice the :relay syntax with the selector that matches the target element inside of myElement.
// Every click on an anchor-tag inside of myElement executes this function.
myElement.addEvent('click:relay(a)', function(event, target){
    event.preventDefault();
    request.send({
        url: target.get('href')
    });
}); 
```

因此，猜测一下（我从未使用过 MooTools），我会说，如果您已将类添加`myClass`到有问题的元素中：

```
window.addEvent('domready', function() {
    $(document).addEvent('click:relay(.myClass)', function() {
        // One of the elements was clicked
    });
}); 
```

* * *

如果您使用的是不支持事件委托的旧版本的 MooTools，这不是问题，您可以自己做。基本上，您将事件挂在容器上（可以是`document.body`，但如果可能的话，再次靠近添加元素的位置），然后在引发事件时，查看`event.target`，这将告诉您事件的实际元素发生在。从 开始`event.target`，检查每个父母是否有`myClass`. 如果是，则处理该事件。大致如此：

```
$(container).addEvent('click', function(event) {
    var match, elm;
    for (elm = event.target; !match && elm; elm = elm.parentNode) {
        if ($(elm).hasClass("myClass")) {
           match = elm;
        }
    }
    if (match) {
        // Yup, its a "myClass" element -- process the click
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:16:00.000

当您的代码被执行时，链接没有到位，然后 addEvent 不会为它们增添趣味。您可以使用简单的 console.log 验证此断言（至少在 ff 上使用 firebug）

```
window.addEvent('domready', function() {
     console.log($$('.jTrigger');
     $$('.jTrigger').addEvent('click', function(){alert('clicked!');})
}) 
```

你有两个选择：

*   每次创建时将行为添加到每个链接（对我来说有点笨拙）
*   选择一个 Dom 元素（包含它们的最小元素）并对其应用事件管理器：

    window.addEvent('domready', function() { document.id(document.body).addEvent('click:relay(a.jTrigger)', function(){alert('clicked!');}); } )

在上面的示例中，我已将行为应用于 html 正文，因为我对您的页面一无所知，并且正文元素肯定会包含您的链接。您需要将此行为应用于较小的子集（最小化性能问题，如文档中明确报告的那样）。

> 一般来说，最好将元素委托给最近的父元素；例如，委托给页面中的元素而不是文档正文。

参考： http: [//mootools.net/docs/core/Element/Element.Delegation](http://mootools.net/docs/core/Element/Element.Delegation)

# android - ICS Holo 主题的绑定

> ID：10155052
> 
> 赞同：0
> 
> 时间：2012-04-14T16:02:00.953
> 
> 标签：android, android-4.0-ice-cream-sandwich

我在我的三星 Galaxy Nexus（Android 版本 4.0.2）上使用 Holo 主题看到我的活动出现条带。

下面是我使用 DDMS 从 Nexus 截取的 PreferenceActivity 的屏幕截图，它说明了这个问题。

我尝试添加（无济于事）：

```
getWindow().setFormat(PixelFormat.RGBA_8888);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER); 
```

是什么原因造成的，是否有解决方法？

![偏好活动](../Images/dd971d9653e65ee4b133f104a0ca8fec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:19:24.387

这对我有用：

```
@Override
    public void onAttachedToWindow() {

            getWindow().setFormat(PixelFormat.RGBA_8888);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:54:18.443

抖动本身是一个不完美的问题解决方案，检查一下：

1.  确保使用以下设置加载位图，`BitmapFactory.Options.inPreferredConfig=Bitmap.Config.RGBA_8888`并且`BitmapFactory.Options.inDither=false`

2.  背景图像未拉伸

[参考](http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/)

# facebook - 在 Google+ 和 LinkedIn 上显示 Flash 视频

> ID：10155053
> 
> 赞同：0
> 
> 时间：2012-04-14T16:02:04.207
> 
> 标签：facebook, facebook-opengraph, linkedin, google-plus, schema.org

您可以直接在 Google+ 或 LinkedIn 新闻源上显示 Flash 视频吗？例如。当您在 Facebook 上发布包含正确 OpenGraph 数据的链接时，Facebook 会在您的 Wall 上显示嵌入帖子中的视频。Google+ 和 LinkedIn 在使用 YouTube 视频时也是如此。我的问题是如何在 Google+ 或 LinkedIn 上使用任何 Flash 视频做到这一点？

我试过 Schema.org 但它不起作用： [http ://dl.dropbox.com/u/36666425/social_test/test.html](http://dl.dropbox.com/u/36666425/social_test/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:54:52.890

Google+ 目前只有少数允许嵌入的媒体网站的白名单。如果他们添加到列表中，请在他们的博客上查找公告：http: [//googleplusplatform.blogspot.com/](http://googleplusplatform.blogspot.com/)

我不知道领英。

# e-commerce - 订单、客户和产品之间的关系？

> ID：10155054
> 
> 赞同：6
> 
> 时间：2012-04-14T16:02:24.370
> 
> 标签：e-commerce, relational-database

我正在尝试构建一个电子商务数据库，但我不了解订单、产品和客户之间的关系。有很多数据库示例，但它们太复杂了。是否有关于可能的表和关系的更简单的解释或示例。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T17:59:08.567

如果客户可以有多个订单并且订单可以针对多个产品，这是最简单的形式：

![在此处输入图像描述](../Images/2b402ee46d24a89df9a0c19a78e97e9a.png)

该`ORDER`表包含有关订单日期和状态的信息。

该`ORDER ITEM`表包含有关订购产品数量的信息。

比这更简单的唯一方法是，如果您有一个业务规则限制，即“我不跟踪我的客户从一个订单到下一个订单”或“每个订单只针对一个项目”。如果您确实有这些（不切实际的简单化？）规则，那么您可以减少模型中的表数量。

请注意，这个非常简单的模型开始变得越来越复杂，您希望它变得更加灵活和现实。例如，添加定价、付款方式、付款或库存都会增加很多复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T00:05:54.667

我有一个“手卷”电子商务系统。该公司有一个内部 web+mysql 服务器（典型的 ubuntu LAMP）。虽然数据库结构的设计没有得到很好的优化，但效果很好。

我们使用的表是： order_main order_details order_payment

在这里，简单地复制了来自上述理想模型的许多“链接”数据。网站前端简单而愚蠢。客户必须在每个订单中重新输入他们的数据。

在上述情况下，MySql 是通过 cron 运行的 php 脚本或用户交互来更新的。该网站的文件是从一个主电子表格更新的，该电子表格将被处理以生成静态 HTML 文件。因此，平面文件可以被认为是项目数据的主文件或发起者。该网站生成了短暂的客户数据，这些数据最终被输入到运行整个业务流程的 Quickbooks 中。

订单将在网络服务器上驻留一分钟，直到内部 LAMP 服务器将其拉出。这种方法工作了大约 7 年（当我们去 Magento 时最终放弃了）。

后来，添加了项目级别，并围绕从 MySql 数据库而不是电子表格平面文件创建网站而构建了整个 UI。这花了我大约一年的时间来编写代码，我们使用了大约 2 年，而 Magento 改进到足以投入生产。现在，Magento 运行业务流程并导出到 Quickbooks 是事后的想法（关于客户体验），而 QB 仅用于会计。不必依赖 QB 来获得日常收入，我感觉好多了。

# python - 使用 Python 获取和发送 HTTP 请求

> ID：10155055
> 
> 赞同：0
> 
> 时间：2012-04-14T16:02:30.960
> 
> 标签：python, http, google-app-engine

我正在从 PHP 和 MySQL 跳到 Python 和 Google App Engine，这与我习惯的有点不同。现在，我只是想了解服务器请求的基础知识。

从我的客户端（iPhone），我发送一个带有 HTTP 请求的 JSON 格式的字典（它被设置为 POST 值）。

1.  如何在 Python 中获取这本字典？在 PHP 中，我会这样做： `$dictionary=json_decode(stripslashes($_POST["dictionary"]));`

    什么是 Python 等价物？

然后说我运行了一些查询，我想将一个 JSON 字符串作为响应发送回我的客户端。我将如何在 Python 中做到这一点？只是`self.response.out.write()`吗？我会在括号中添加什么来发送 Python 字典的 JSON 表示形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:07:26.513

[`json`](http://docs.python.org/library/json.html).

*   `json.loads()`相当于 PHP 的`json_decode()`
*   `json.dumps()`相当于 PHP 的`json_encode()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:14:21.730

如果您在 PHP 之后开始使用 Python 编写代码，[php2python 站点](http://www.php2python.com/)将帮助您将一些 php 函数转换为 python 函数。

# r - 绘制 2 个 Y 轴之间的相关性

> ID：10155058
> 
> 赞同：1
> 
> 时间：2012-04-14T16:02:44.440
> 
> 标签：r, graph, ggplot2, visualization

我正在寻找带有旋转 X 轴的散点图。基本上，我想绘制 2 个 Y 轴之间的相关性。理想情况下，我希望 x 轴代表时间，Y 轴代表相关性

```
data <- data.frame( words = c( "Aliens", "Aliens", "Constitution", "Constitution",    "Entitled", "Entitled" ),
              dates =  as.Date( c ("2010-01-05", "2010-02-13", "2010-04-20", "2010-06-11","2010-03-18", "2010-09-13" )), 
                    Rep =    c( .18, .14, .16, .45, .33, .71 ), Dem = c( .16, .38, .24, .11, .59, .34 )) 
```

到目前为止，这就是我能够做到的。我认为它并没有真正说明问题。我可以按相关性和颜色按月调整大小吗？

```
plot(x=data$dates, y=data$Rep, ylim=c(0,1.1*max(data$Rep)),
 col='blue', pch = 15,
 main='Rep Correlations stock close', xlab='date', ylab='Republican')
axis(2, pretty(c(0, 1.1*max(data$Rep))), col='blue')
par(new=T)
plot(x=data$date, y=data$Dem, ylim=c(0,1.1*max(data$Dem)),
 col='green', pch = 20,
 xaxt='n', axes = F, xlab = '', ylab='')
axis(4, pretty(c(0, 1.1*max(data$Dem))), col='green')
mtext("Democrat",side=4) 
```

有什么想法/提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:38:27.797

跟进@JohnColby 上面的评论（请参阅[我如何使用 2 个不同的 y 轴进行绘图？](https://stackoverflow.com/questions/6142944/how-can-i-plot-with-2-different-y-axes-in-r)，[http:](http://rwiki.sciviews.org/doku.php?id=tips:graphics-base:2yaxes) //rwiki.sciviews.org/doku.php?id=tips:graphics-base:2yaxes 的论点为什么你应该如果可以的话，*不要*创建双 y 轴图），怎么样：

```
dat <- data ## best not to use reserved words -- it can cause confusion
library(ggplot2)
theme_update(theme_bw())  ## I prefer this theme
## code months as a factor
dat$month <- factor(months(dat$dates),levels=month.name)
dat <- dat[order(dat$dates),]
qplot(Rep,Dem,colour=month,data=dat)+
    geom_path(aes(group=1),colour="gray")+geom_point(alpha=0.4)+
    geom_text(aes(label=words),size=4) 
```

（在点之间添加线，然后重新绘制点，这样它们就不会被线遮住；添加单词很可爱，但对于整个数据集来说可能太混乱了）

![在此处输入图像描述](../Images/622257e72eadac41a953814fbb336b6f.png)

或将日期编码为连续变量

```
ggplot(dat,aes(Rep,Dem,colour=dates))+
    geom_path(aes(group=1),colour="gray")+geom_point(alpha=0.4)+
    geom_text(aes(label=words),size=4)+
    expand_limits(x=c(0,0.9))
ggsave("plotcorr2.png",width=6,height=3) 
```

![在此处输入图像描述](../Images/c7bfcaee991b1ece88a87b7095f00134.png)

在这个特定的上下文中（两个变量都在相同的尺度上测量），将它们都绘制在日期轴上也没有错：

```
library(reshape2)
library(plyr)
m1 <- rename(melt(dat,id.vars=c("words","dates","month")),
             c(variable="party"))

ggplot(m1,aes(dates,value,colour=party))+geom_line()+
    geom_text(aes(label=words),size=3)+
    expand_limits(x=as.Date(c("2009-12-15","2010-10-01")))
ggsave("plotcorr3.png",width=6,height=3) 
```

![在此处输入图像描述](../Images/26d2ebcb8a3d28f6858bcb49af748df3.png)

# google-app-engine - 对象化将实体添加到事务中的根

> ID：10155060
> 
> 赞同：0
> 
> 时间：2012-04-14T16:03:04.447
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我的问题很简单。

我有不属于任何父级的用户实例，因此他们的实体组是根。我想将它们添加到使用 Objectify 的事务中。问题是我不知道如何告诉 objectify User parent 是 root，当我执行多个 put(User) 时，我得到：

```
 operating on too many entity groups in a single transaction 
```

我应该向用户添加某种特殊的@Parent 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:23:41.963

您需要进行跨组交易 [https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)

# php - 将数据从 Javascript 传递到 PHP

> ID：10155061
> 
> 赞同：-1
> 
> 时间：2012-04-14T16:03:05.323
> 
> 标签：php, javascript, data-transfer

> **可能重复：**
> [从 Javascript 向 PHP 传递多个参数](https://stackoverflow.com/questions/1600360/passing-multiple-parameter-to-php-from-javascript)

我目前正在尝试将数据从 Javascript 传递到 PHP。我从 Javascript 访问 PHP 脚本，但`$_Post`变量中没有存储任何信息。我什至尝试了`$_Get`and the`$_Request`以确保它没有存储在那里。不是。有人可以帮帮我吗？我正在使用的功能如下。变量 str 是我在 javascript 的其他地方创建的一串东西，我觉得看起来好像没用。它们不是从 HTML 表单中获取的。PHP脚本也在下面。
谢谢

应该进行信息传递的Javascript函数。

```
function postForm(str) {
  var xmlHttp;
  try
    {    // Firefox, Opera 8.0+, Safari
     xmlHttp=new XMLHttpRequest();
    }
    catch (e)
    {    // Internet Explorer    
      try
      {
       xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");      
      } catch (e)
        {      
         try
         {
          xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
         } catch (e)
           {       
             alert("ERROR: CAN NOT POST DATA");
           }
        }
    }

    try 
    {
      xmlHttp.onreadystatechange=function()
      {
      if(xmlHttp.readyState==4)
        {
         alert(xmlHttp.responseText);
        }
      }
       xmlHttp.open("POST","BigInt2.php",true);
       postStr = "msg="+escape(str);
       alert("SENDING: "+postStr);
       xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
       xmlHttp.send(postStr);
    } catch(e)
      {
       alert("ERROR POSTING DATA");
      } 

} 
```

PHP 函数应该打印 infomration 作为信息存储在 $_Post 全局变量中的概念证明。BigInt2.php

```
<?php
echo$_Post['msg'];
echo$_Get['msg'];
echo$_Request['msg'];
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:10:09.757

您输入错误（发布并获取）在您的 php 文件中尝试此操作，看看它是否有效

```
echo $_POST['msg']; 
```

# java - 同一对象上的多个数据结构

> ID：10155068
> 
> 赞同：2
> 
> 时间：2012-04-14T16:04:48.483
> 
> 标签：java, data-structures, map

让 Person 是一个具有 name、age 和 idNumber 属性的类。我想要一个“人”的集合，并且我希望能够以最有效的方式执行以下操作：

1.  通过它们的 idNumber 检索它们。
2.  获取年龄 > X 的人员列表。
3.  获取按姓名字母顺序排列的所有人员的列表。

我的想法是同时维护一个使用 id 作为键的 Hashmap 和使用年龄和名称作为每个 TreeMap 的键的两个 Treemap。

1.  这是最好的方法吗？
2.  是否有必要在编辑年龄之前从年龄 TreeMap 中删除一个人，然后再将其放回？
3.  如果对问题 2 的回答是肯定的，那么当这些人被使用并可能在多个地方被编辑时，我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:28:49.537

> 这是最好的方法吗？

我会说使用关系数据库和适当的索引是最好的方法，但如果你想在内存中执行此操作，那么是的 - 你正在牺牲内存来换取性能。

> 是否有必要在编辑年龄之前从年龄 TreeMap 中删除一个人，然后再将其放回？

是的。项目在树中的位置在添加时确定一次。如果可比较的属性（`age`或`name`）发生变化，`TreeMap`则不会神奇地发现并移动对象。这很可能会导致无法在地图中找到元素，即使它在那里。

> 如果对问题 2 的回答是肯定的，那么当这些人被使用并可能在多个地方被编辑时，我该如何处理？

首选不可变对象，因此无法更改已放置在树中的对象。如果出于任何原因您负担不起，请考虑[观察者](/questions/tagged/observer "显示标记为“观察者”的问题")模式 -`Person`在地图中存储 a 时，在其中注册一个侦听器`Person`。例如，当`age`发生变化时，侦听器通知按年龄存储人的树（或另一个观察者）并处理删除和添加。

*顺便说一句，如果您在修改后*尝试删除对象，您将失败 -`TreeMap`将无法再找到要删除的对象...

# php - CodeIgniter 中的 Wordpress

> ID：10155072
> 
> 赞同：5
> 
> 时间：2012-04-14T16:05:04.080
> 
> 标签：php, wordpress, codeigniter, content-management-system

我已遵循本指南： http: [//philpalmieri.com/2009/06/codeigniter-and-wordpress-play-well-together/](http://philpalmieri.com/2009/06/codeigniter-and-wordpress-play-well-together/)

这基本上是说，要安装 wordpress，让它工作，然后用 Code Igniters 替换 index.php 文件，然后在我们启动 CodeIgniter 之前的文件底部，需要 wordpress 的 wp-load 文件。

工作正常。

但是现在，我的 $_SESSION 不起作用。我已将代码点火器设置为使用数据库会话，并记录会话值，但它仍然不起作用。我无法登录我的 CodeIgniter 系统管理面板，我不能做很多需要会话的事情，因为会话不起作用。哈哈。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:46:37.537

我做了以下工作来让它工作（我在 Wordpress 目录中的单独目录中有一个 Code Igniter 应用程序）——我显然*不*喜欢它，因为我必须在 Wordpress 中修改一个核心文件。

首先，我将我的 Code Igniter cookie 名称添加到 wp-includes/load.php 中的 $no_unset 数组中，在我的例子中是 ci_session：

```
 $no_unset = array( 'GLOBALS', '_GET', '_POST', '_COOKIE', '_REQUEST', '_SERVER', '_ENV', '_FILES', 'table_prefix','ci_session' ); 
```

其次，我发现 Wordpress 的 add_magic_quotes 函数正在破坏 $_COOKIE 全局变量。这导致 CodeIgniter 在每次页面加载或重定向时重新创建 cookie，从而破坏了任何连续性。所以，我在 wp-includes.load.php 中注释了这一行（大约第 545 行）

```
//$_COOKIE = add_magic_quotes( $_COOKIE ); 
```

接下来，为了让这个函数与所有其他与 Wordpress 相关的 cookie 保持一致，我创建了一个 array_walk 函数来循环 $_COOKIE 全局并将 add_magic_quotes 应用于除 wp-includes/load.php 函数中的我之外的所有 cookie

```
/**
* Applies Magic Quotes to the $_COOKIE global but ignores Codeigniter's Cookie
* @param  string $value Value passed by array_walk function
* @param  string $key   Key passed by array_walk function
*/
function ci_ignore_magic_quotes($value,$key)
{
    if($key != "ci_session")
    {
        stripslashes_deep($value);
    }
}

//Put this line in place of the commented out line above...
array_walk($_COOKIE, 'ci_ignore_magic_quotes'); 
```

完成此操作后，我的 ci_sessions 表中不再存储多个 cookie，并且成功保留了会话。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:52:27.230

[这里](http://www.thinkingoutloud.co.za/content/20091012/php_wordpress_and_session)有一个关于 WordPress 如何取消设置会话变量的解释，以及一个可能的解决方案。不幸的是，它似乎需要修改核心文件 - 似乎没有任何挂钩`wp_unregister_GLOBALS`会有所帮助。

# php - PHP __destruct 导致 net::ERR_CONNECTION_RESET register_shutdown_function 不是。有什么不同？

> ID：10155073
> 
> 赞同：0
> 
> 时间：2012-04-14T16:05:14.143
> 
> 标签：php, destructor

所以我有以下问题。我有一个会话类，它应该在请求执行结束时将其数据保存到数据库中。基本上，当它被破坏时。在这种情况下，我使用单例模式。我有一个这样的析构函数：

```
public function __destruct()
{
    $this->_save(); // _save is public
    // exit('I can reach this point with no error');
} 
```

但是使用该代码，我可以从 chrome 和其他浏览器获得 net::ERR_CONNECTION_RESET 。如果我注释掉析构函数并将其放在构造函数中：

```
register_shutdown_function(array($this, '_save')); 
```

当我直接调用 _save 方法时，它不会返回任何异常。

一切正常。什么可能是错的，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:31:33.970

好的，我找到了解决方案。_save() 方法正在调用一些将数据保存到数据库的方法。但！数据库实例是 SINGLETON，因此在任何地方都没有引用，并且此时数据库对象已经被销毁。解决方案是将对数据库实例的引用保存在模型中的某处。看起来 register_shutdown_function 正在工作，因为尚未销毁任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T16:21:37.370

您的错误与 crome 或其他浏览器无关。

如果您查看 PHP 文档[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

`The destructor method will be called as soon as there are no other references to a particular object, or in any order during the shutdown sequence.`

A. 如果某处调用了“exit”

B. 代码中某处的致命错误

C. 如果在另一个析构函数中抛出异常

D. 如果您尝试在析构函数中处理异常

`$this->_save()`是一种方法，它可能以`Exception`一种或另一种方式调用

虽然`register_shutdown_function` [http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

`Registers a callback to be executed after script execution finishes or exit is called`

我会假设这会在脚本正确终止或不正确终止的情况下起作用

# visual-studio - 我的视觉工作室 10,11 不工作？

> ID：10155079
> 
> 赞同：0
> 
> 时间：2012-04-14T16:07:15.613
> 
> 标签：visual-studio, visual-studio-express

我在我的电脑上都使用 VS10 ， Vwd11 beta 。他们都没有正常工作。当我运行该软件时，我遇到了不同类型的问题。

1.  当我运行 VS express 11 时，当我调试它们时它崩溃了，我得到了错误

    无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Microsoft.VisualStudio.OLE.Interop.IServiceProvider”。此操作失败，因为 IID 为“{6D5140C1-7436-11CE-8034-00AA006009FA}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

2.  当我运行 v10 并安装任何插件时，它给了我同样的错误。我在系统中运行 SQL Server 2008 r2 时遇到了同样的错误。

我无法使用它们。如果可以解决，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:21:31.523

这些问题与注册表损坏的严重案例一致。特别是 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Interface{6D5140C1-7436-11CE-8034-00AA006009FA}\ProxyStubClsid32 值，它声明了编组接口所需的代理/存根。那里的 CLSID 也可能搞砸了。或密钥的安全属性。这种问题确实会泛滥，IServiceProvider是微软代码中很常见的一个接口。运行 SysInternals 的 ProcMon 应该有助于确认此诊断。

您可以尝试从您在一台好机器上创建的 .reg 文件修复它，但这种损坏很少仅限于一个键。至少应该首先考虑修复或重新安装组件。顺便说一句，这不太可能起作用，我想您最近安装了 VS11。从您的机器上卸载任何“注册表清理器”类型的程序。在 superuser.com 上询问有关注册表运行状况的更多问题

# python - 如何在python中重新加载命名空间？

> ID：10155088
> 
> 赞同：0
> 
> 时间：2012-04-14T16:08:04.320
> 
> 标签：python, reload

```
from math import sqrt
def sim_distance(prefs,person1,person2):
     si={}
     for item in prefs[person1]:
          if item in prefs[person2]:
               si[item]=1
     if len(si)==0: return 0
     sum_of_squares=sum([ pow ( prefs[person1] [item] - prefs[person2][item],2)
                  for item in prefs[person1] if item in prefs[person2]])
     return 1/(1+sqrt(sum_of_squares))

reload(recommendations)
recommendations.sim_distance(critics,'Lisa Rose','Gene Seymour') 
```

这是错误

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    recommendations.sim_distance(critics,'Lisa Rose','Gene Seymour')
NameError: name 'critics' is not defined 
```

评论家是一个自定义数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:19:17.933

这与重新加载命名空间没有任何关系。你根本没有定义`critics`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:24:19.250

这看起来可能是范围问题。如果您在不同的功能中定义评论家，那么评论家将只存在于该功能中。您在此处在函数的主要范围内引用评论家，因此您需要从创建它的函数中返回评论家，或者（不理想）最初在全局范围内定义它。

```
def initCritics():
    critics = []
    # make some critics

    return critics

critics = initCritics()

recommendations.sim_distance(critics,'Lisa Rose','Gene Seymour') 
```

# matlab - s-function直接馈通

> ID：10155091
> 
> 赞同：0
> 
> 时间：2012-04-14T16:08:57.210
> 
> 标签：matlab, simulation, nan, simulink

注意：这是我第一次使用 MATLAB S-Function，我只使用过几次 Simulink。

当我尝试在 S-Function 中使用我的输入变量时`inp`，它们会返回`NaN`flag `3`。系统的输入是三个简单的单位阶跃函数，通过总线创建器连接到系统。在尝试模拟系统时，我收到一条错误消息——我只是通过在`inp`. 有任何想法吗？

详细信息：
我将 Segway 模拟为一个类项目。我在 Simulink 中将执行器（直流电机）和工厂（Segway 本身）模拟为单独的 S 功能块。电机需要三个输入：电压、Segway 的速度和 Segway 相对于其俯仰轴的角速度（由于反电动势）。输出是电枢电流。

这是一个简单的线性非微分系统。因此，没有状态。唯一完成的计算是从输入到输出的馈通。代码如下：

```
function [sys,X0]=nl_pend(time,state,inp,FLAG,ICs);
% actuator parameters:
% R_m: motor armature resistance
% K_b: motor back emf constant
% K_t: motor torque constant
% r: radius of the wheel
global R_m K_b K_t r;

if FLAG == 0,   % initialize system parameters and states
% Call file that initializes parameters
    segway_dcmotor_pars;
% This system has:
%  0 states (theta,thetatheta_dot),
%  3 input  (v,x_dot,theta_dot),
%  1 outputs (i)
nx = 0; % # of states
nu = 3; % # of inputs
ny = 1; % # of outputs
sys = [nx; 0; ny; nu; 0; 0];
% Initial Conditions  (will be passed as and argument)
X0 = ICs;
elseif FLAG == 1, % states derivatives
    %blank
elseif FLAG == 3,  % system outputs
    %inp(1) = motor voltage
    %inp(2) = segway velocity
    %inp(3) = segway pitch angular velocity
    display( inp );
    y(1) = (1/R_m)*inp(1) - (K_b/(r*R_m))*inp(2) + (K_b/R_m)*inp(3);
    sys = y;
else,
    sys = [];
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:36:07.953

正如你提到的，它是直接馈通，所以你必须设置

```
sys(6)=1 in flag==0... 
```

# bitmap - 如何将图像转换为每像素 2 位？

> ID：10155092
> 
> 赞同：2
> 
> 时间：2012-04-14T16:08:58.220
> 
> 标签：bitmap

是否有一种快速工具可以将某些图像转换为每像素 2 位的原始位图数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:21:25.507

你可以使用[Imagemagick](http://www.imagemagick.org)：

如果你只想要一个灰度通道：

```
convert image.png -depth 2 data.gray 
```

如果您希望每个红色绿色和蓝色通道有 2 位：

```
convert image.png -depth 2 data.rgb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T13:09:00.147

除了[David 的 command](https://stackoverflow.com/a/10155193/895245)之外，我建议您设置`-size`以及以下之一：

```
convert -depth 2 -size 1x<number-pixels> f.png f.gray
convert -depth 2 -size <number-pixels>x1 f.png f.gray 
```

因为这些是之后使用的最简单的输出。

问题是位不可寻址，因此必须以某种方式将它们组织成字节。

我还没有找到这方面的文档，但是一个简单的例子显示了这种模式：

```
printf "%10s" | sed 's/ /\xFF\x00/g' > f.gray
convert -depth 8 -size 1x20 f.gray -depth 2 g.gray
hd g.gray
convert -depth 8 -size 2x10 f.gray -depth 2 g.gray
hd g.gray
convert -depth 8 -size 10x2 f.gray -depth 2 g.gray
hd g.gray
convert -depth 8 -size 20x1 f.gray -depth 2 g.gray
hd g.gray 
```

我们创建了一个位`1 0`重复 10 次的输入文件。转换为 2 位深度给出：

```
00000000  c0 00 c0 00 c0 00 c0 00  c0 00 c0 00 c0 00 c0 00  |................|
*
00000014

00000000  c0 c0 c0 c0 c0 c0 c0 c0  c0 c0                    |..........|
0000000a

00000000  cc cc c0 cc cc c0                                 |......|
00000006

00000000  cc cc cc cc cc                                    |.....|
00000005 
```

因此，似乎如果深度 < 8，则 ImageMagick 逐行运行，0 填充缺失位。

I have tested with 1-bit per pixel, and this theory was consistent.

Tested with ImageMagick 6.7.7-10, Ubuntu 14.04.

# wpf - DataGrid 上的两种方式绑定

> ID：10155093
> 
> 赞同：2
> 
> 时间：2012-04-14T16:09:08.367
> 
> 标签：wpf, .net-4.0

我正在尝试创建一个简单的程序，允许用户选择文件并向其中添加元数据。

我创建了一个`ListBox`允许用户将文件拖放到上面的程序。我抓住路径并将其保存到一个对象中。然后我将文件名显示在`ListBox`.

我想要它，这样当用户在列表框中选择一个项目时，我可以显示我在文件中拥有的元数据，并允许他们添加更多内容并编辑那里的内容。

现在我有一个存储路径的类项和一个字典，`<string, string>`其中`Key`是元数据的名称，`Value`也是值。

我曾尝试使用 DataGrid，但也许这是使用错误的控件来绑定到字典。这似乎不是正确的方法，因为它没有实现`INotifyPropertyChanged`接口。

我可以创建自己的类并手动更新 DataGrid，但对于不知道如何正确 DataBind 的我来说，这似乎是一种解决方法。

**XAML**

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="MetadataAdder.MainWindow"
    Title="Metadata Adder" Height="480" Width="640">
<Grid>
    <Button x:Name="Add_BTN" Content="Add" HorizontalAlignment="Left" Margin="10,410,0,0" VerticalAlignment="Top" Width="50" Click="Add_Click"/>
    <Button x:Name="Remove_BTN" Content="Remove" HorizontalAlignment="Left" Margin="241,410,0,0" VerticalAlignment="Top" Width="50" Click="Remove_Click"/>
    <ListBox x:Name="File_List" HorizontalAlignment="Left" Height="364" Margin="10,31,0,0" VerticalAlignment="Top" Width="281" AllowDrop="True" Drop="FilesDropped" ItemsSource="{Binding Item_List}" SelectionChanged="Item_Selected"/>
    <DataGrid 
        x:Name="MetadataGrid" 
        HorizontalAlignment="Left" 
        Margin="311,31,0,0" 
        VerticalAlignment="Top" 
        Height="364" 
        Width="303" 
        d:LayoutOverrides="GridBox"
        CanUserAddRows="False"
        CanUserDeleteRows="False"
        CanUserReorderColumns="True"
        CanUserResizeColumns="True"
        CanUserResizeRows="True"
        CanUserSortColumns="True"
        />
    <Label Content="Files to add Metadata to" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Top"/>
    <Label Content="Metadata" HorizontalAlignment="Left" Margin="313,5,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.474,0.115"/>

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:21:23.027

另一种适合您的方法是创建您自己的 FileMetadata 对象，该对象实现 INotifiyPropertyChanged 并包含元数据的键和值的属性。

然后将您的 FileMetadata 对象集合存储在 ObservableCollection 中并绑定到您的 DataGrid。

这将允许各个元数据项将其值保存到更改通知系统，并允许 DataGrid 在添加或删除任何元数据项时自动更新。

# ios - 故事板中的 UIGestureRecognizer 可以使用多个视图吗？

> ID：10155096
> 
> 赞同：4
> 
> 时间：2012-04-14T16:09:35.163
> 
> 标签：ios, ios5, storyboard, uigesturerecognizer, gesture

我创建了很多视图和按钮，然后我以图形方式创建了 ISwipeGestureRecognizer。并为识别器“引用插座集合”添加了很多视图。滑动手势适用于我的所有视图。这怎么可能？Storyboard 会自动为每个连接的 UIView 创建不同的 SwipeRecognizers？

![](../Images/6113dd737a594458c74f7000e9ec6283.png)

我不能以编程方式添加更多视图，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:11:38.220

我从未尝试过您用 Storyboard 描述的内容，因此无法直接回答，但我可以建议一种方法来验证是否创建了多个手势识别器：在您的手势操作方法中，添加一条`NSLog`语句以记录识别器的地址（此是传递给 action 方法的第一个参数）。这样，您将验证是否重复使用了相同的识别器。

此外，记录该`recognizer.view`属性以查看引擎盖下发生了什么。如果您在所有情况下都得到相同的结果，那么可以乐观地推断，`UISwipeRecognizer`它没有在内部使用它的`view`属性来做任何事情，并且该信息仅存储供您的操作回调能够访问它。

一个谜是你只有一个手势识别器和不同的`view`属性值。这意味着属性值会即时更改，但我无法解释如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T00:11:12.280

您可以将手势识别器连接到 Interface Builder 中的多个视图。触摸时，它们都会发送正确的消息。但是，您无法使用识别器的 view 属性检测到哪个视图被触摸。无论触摸的视图如何，它都将始终指向同一个视图。

我不相信你可以对代码做同样的事情。是的，这很奇怪。

因此，只要您不在乎哪个视图触发了触摸，您就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:30:13.380

您可以在代码中或使用界面构建器将单个手势识别器添加到任意数量的视图中。为此，您使用 的`addGestureRecognizer:`方法`UIView`。请注意，您将识别器添加到视图中，而不是相反。

# android - 当我们导出应用程序（用于发布）时，是否会包含通过 SharedPreference 存储的设置

> ID：10155098
> 
> 赞同：0
> 
> 时间：2012-04-14T16:09:56.190
> 
> 标签：android, release, sharedpreferences

我开发了我的第一个 Android 应用程序，我正在考虑将其发送给拥有 Android 手机的朋友（我正在使用诺基亚 5230：p）

`Export`我已经使用Eclipse 向导制作了应用程序的发布版本。

`SharedPreferences`在我的应用程序中，在启动过程中，它会通过- (MODE_Private)获得一些设置。当用户按下按钮时，这些设置会被覆盖（稍后，用户输入的设置）。

所以，我的问题是，当我发送我的应用程序的这个发行版本时，它会包含我目前存储的设置吗？目前，我不需要将设置（我在 AVD 中测试时保存的设置）包含在发布 apk 文件中。

*   如果默认包含（在创建发布版本时），我如何分离它。我的意思是怎么做才能不包括在内。

*   如果默认情况下不包含它，我还想知道如何将它包含在发布版本中，以供我将来参考（我的意思是，我的下一个应用程序中可能需要这种方法）

设置是这样获得的：

```
SharedPreferences settings =  
        getSharedPreferences("myABCapp", MODE_PRIVATE);
String strUser = settings.getString("username", "");
//... 
```

用户以这种方式覆盖设置（在运行时保存）：

```
//...
SharedPreferences settings =  
        getSharedPreferences("myABCapp", MODE_PRIVATE);  

SharedPreferences.Editor prefEditor = settings.edit();
prefEditor.putString("username", strNewUsername);
//...

prefEditor.commit(); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:22:07.340

不。

您必须在应用程序中检测首次启动并在 SharedPrefs 中创建初始设置。

您可以通过设置/应用程序/管理应用程序//清除数据复制新用户将看到的内容...然后启动您的应用程序

PVS

# c++ - c++, FFMPEG, H264, 创建零延迟流

> ID：10155099
> 
> 赞同：4
> 
> 时间：2012-04-14T16:10:01.183
> 
> 标签：c++, ffmpeg, video-streaming

我正在尝试对视频进行编码（目前使用 h264 编解码器，但如果更适合我的需要，其他编解码器也可以），以便解码所需的数据在帧（包括第一帧）被编码后直接可用（所以，我只想要 I 和 P 帧，没有 B 帧）。

我需要如何设置 AVCodecContext 才能获得这样的流？到目前为止，我对这些值的测试仍然总是导致 avcodec_encode_video() 在第一帧返回 0。

//编辑：这是目前我的 AVCodecContext 设置代码：

```
static AVStream* add_video_stream(AVFormatContext *oc, enum CodecID codec_id, int w, int h, int fps)
{
    AVCodecContext *c;
    AVStream *st;
    AVCodec *codec;

    /* find the video encoder */
    codec = avcodec_find_encoder(codec_id);
    if (!codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }

    st = avformat_new_stream(oc, codec);
    if (!st) {
        fprintf(stderr, "Could not alloc stream\n");
        exit(1);
    }

    c = st->codec;

    /* Put sample parameters. */
    c->bit_rate = 400000;
    /* Resolution must be a multiple of two. */
    c->width    = w;
    c->height   = h;
    /* timebase: This is the fundamental unit of time (in seconds) in terms
     * of which frame timestamps are represented. For fixed-fps content,
     * timebase should be 1/framerate and timestamp increments should be
     * identical to 1\. */
    c->time_base.den = fps;
    c->time_base.num = 1;
    c->gop_size      = 12; /* emit one intra frame every twelve frames at most */

    c->codec = codec;
    c->codec_type = AVMEDIA_TYPE_VIDEO;
    c->coder_type = FF_CODER_TYPE_VLC;
    c->me_method = 7; //motion estimation algorithm
    c->me_subpel_quality = 4;
    c->delay = 0; 
    c->max_b_frames = 0; 
    c->thread_count = 1; // more than one threads seem to increase delay
    c->refs = 3;

    c->pix_fmt       = PIX_FMT_YUV420P;

    /* Some formats want stream headers to be separate. */
    if (oc->oformat->flags & AVFMT_GLOBALHEADER)
        c->flags |= CODEC_FLAG_GLOBAL_HEADER;

    return st;
} 
```

但是有了这个 avcodec_encode_video() 将在返回任何字节之前缓冲 13 帧（之后，它将在每一帧上返回字节）。如果我将 gop_size 设置为 0，则 avcodec_encode_video() 将仅在第二帧传递给它之后返回字节。我需要一个零延迟。

这家伙显然是成功的（即使有更大的 gop）：http://mailman.videolan.org/pipermail/x264-devel/2009-May/005880.html[但](http://mailman.videolan.org/pipermail/x264-devel/2009-May/005880.html)我看不出他在做什么不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-04T23:03:14.667

对我来说，这段代码成功了：

```
av_opt_set(context->priv_data, "tune", "zerolatency", 0); 
```

（在打开上下文之前调用此函数。）

# javascript - 输入按钮脚本与其他按钮冲突 - 如何使唯一？

> ID：10155103
> 
> 赞同：0
> 
> 时间：2012-04-14T16:10:31.473
> 
> 标签：javascript, jquery, button, input, click

我在一种形式中有很多按钮。我为几个特定按钮制作了一个脚本，现在我的其他按钮无法正常工作。

是否可以使我的按钮脚本仅针对指定的按钮是唯一的，以避免与其他按钮发生冲突？*当我只希望它应用于脚本中的几个*按钮时，它似乎适用于表单中的所有按钮。

这是我希望修改为仅适用于几个特定按钮的脚本：

```
$(document).ready(function(){
   $(function() {
      var $buttons = $("input[type='button']");
      $buttons.click(function() {

      $(this).parent().siblings('.bx, #bxGender .gender').css({'background':'#2F2F2F','color':'#fff'});
    $buttons.not(this).removeClass('button-toggle-on');
    $(this).toggleClass('button-toggle-on').attr('style','');

    var varval = '';
    if ($(this).hasClass('button-toggle-on')) {
        varval = $(this).hasClass('gnF') ? 'Female' : 'Male';
        $(this).siblings('input[type="button"]').css('background-position','0 -180px');
    }
    else {
          $(this).siblings('input[type="button"]').attr('style','');
       $(this).parent().siblings('.bx').attr('style','');
    }
    $("#gender").val(varval);
 });});
 });

 <input type="button" class="gnM" >
 <input type="button" class="gnF">
 <input class="req-string gender" id="gender" name="gender"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:33:19.547

检查此链接[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/) 您可以使用 dom 元素的 id、类、名称和许多其他元素来使用 jquery 选择元素。

因此，要将您的选择范围缩小到您希望更好地使用相同的类属性的按钮

前任：

HTML：

```
<input type='button' class='mine' value='hai' />
<input type='button' class='not-mine' value='hai' />
<input type='button' class='not-mine' value='hai' />
<input type='button' class='mine' value='hai' /> 
```

然后使用 jquery

`$('.mine').click() or $('.mine').addClass`或您希望使用的任何有效的 jquery 函数

`this`即使有许多 dom 元素与您的选择器属性匹配，jQuery 也会返回正确的属性[这里有 2 个具有相同类的按钮]。

一个完整的例子：http: [//jsfiddle.net/AEkbh/2/](http://jsfiddle.net/AEkbh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:26:08.930

像这样？这是使用类仅影响某些元素的示例。

```
$(document).ready(function(){
    $(function() {
        $(".special-button").click(function() {

            $(this).parent().siblings('.bx, #bxGender.gender').css({'background':'#2F2F2F','color':'#fff'});
            $(this).siblings('.special-button').removeClass('button-toggle-on');
            $(this).toggleClass('button-toggle-on').attr('style','');

            var varval = '';
            if ($(this).hasClass('button-toggle-on')) {
                varval = $(this).hasClass('gnF') ? 'Female' : 'Male';
                $(this).siblings('.special-button').css('background-position','0 -180px');
            }
            else {
                $(this).siblings('.special-button').attr('style','');
                $(this).parent().siblings('.bx').attr('style','');
            }
            $("#gender").val(varval);
        });
    });
});

 <input type="button" class="gnM special-button" >
 <input type="button" class="gnF special-button">
 <input class="req-string gender" id="gender" name="gender"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:38:22.677

或者，如果您仍想在一种方法中包含所有按钮处理程序但针对特定的处理程序：

```
$( document ).ready( function(){
  $( "input[type='button']" ).click( function( e ){
    var $this = $( this );
    switch( true ){
      case $this.hasClassName( "special-button" ):
        //do some stuff
      break;
      case $this.attr("name") === "gender":
        //do something else
      break;
      default:
        //catch all other cases
     }
   });
 }); 
```

给javascript猫换皮的方法有很多

# ios - 检测 CAShapeLayer 触摸

> ID：10155108
> 
> 赞同：9
> 
> 时间：2012-04-14T16:11:08.470
> 
> 标签：ios

我通过覆盖绘制矩形创建了一个蜘蛛图，我正在使用核心图形 CAShapeLayer 来绘制我的区域，在屏幕上创建了多个 CAShapeLayer 区域，我想检测用户触摸时触摸了哪个图层......但是我想不通怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-14T16:58:08.527

首先，您不应该在 drawRect 中绘制图层，但这不是您的问题。要识别“触摸”的图层，您可以执行以下操作...

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:self.view];
        for (id sublayer in self.view.layer.sublayers) {
            BOOL touchInLayer = NO;
            if ([sublayer isKindOfClass:[CAShapeLayer class]]) {
                CAShapeLayer *shapeLayer = sublayer;
                if (CGPathContainsPoint(shapeLayer.path, 0, touchLocation, YES)) {
                    // This touch is in this shape layer
                    touchInLayer = YES;
                }
            } else {
                CALayer *layer = sublayer;
                if (CGRectContainsPoint(layer.frame, touchLocation)) {
                    // Touch is in this rectangular layer
                    touchInLayer = YES;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-08T14:25:48.370

为了快速回答，这是在触摸开始时的 beginTracking，您还可以实现 continueTracking 以防您要继续跟踪什么。

它是如何工作的，您在 beginTracking 中获取触摸位置并检查，您的图层框架包含您触摸的点，如果是，它将打印语句。同样的方式你可以检查你的所有图层

```
override open func beginTracking(_ touch: UITouch, with event: UIEvent?) -> Bool {
     let loaction = touch.location(in: self)
     //update yourLayer with your layer name
     if yourLayer.frame.contains(previousLoaction) { 
        Print("Touch is inside yourLayer layer")
     }
} 
```

# c - 简单哈希表中的段错误

> ID：10155109
> 
> 赞同：0
> 
> 时间：2012-04-14T16:11:10.890
> 
> 标签：c, segmentation-fault, hashtable

我正在尝试用 C 编写一个简单的哈希表，并且在使用我的`main()`.

**设计：**我有一个哈希表，其基础数组大小为 10,000。`struct node_t`我持有一个指向（或`node`）指针数组开头的双指针。当我想将`put()`某些东西放入哈希表时，我会检查`node`适当位置的元素是否为`NULL`. 如果是，我创建一个新节点来填充该点，否则，如果有冲突，我从冲突节点构建一个链表。

**场景：**在`main()`中，我试图`put()`将数字 3328 放入哈希表中。相反，程序段错误。这对我来说毫无意义，因为前面的`put()`工作正常，您可以清楚地看到我将所有初始指针都设置为 NULL。据我所知，引用哈希表位置 3328 的指针没有设置为 NULL，因为当我在`put()`函数中取消引用它时，它就会出现段错误。我的主函数看起来应该将所有指针设置为 NULL 就好了......

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int TABLE_SIZE = 10000;

typedef struct node_t {
    int key;
    int value;
    struct node_t* next;
} node;

node** table;

inline node** get_node_address(int key) {
    key = (key > -key ? key : -key) % TABLE_SIZE;
    return (node**) (table + key * sizeof(node*)); 
}

inline node* new_node(int key, int value) {
    node* n = malloc(sizeof(node));
    n->key = key;
    n->value = value;
    n->next = NULL;
    return n;
}

void put(int key, int value) {
    node** n = (node**) get_node_address(key);
    node* iterator = (node*) *n;

    if (*n == NULL) {
        *n = new_node(key, value);
    } else {
        while (iterator->next != NULL)
            iterator = iterator->next;

        iterator->next = new_node(key, value);
    }
}

int* get(int key) {
    node* iterator = (node*) *get_node_address(key);

    while (iterator != NULL && iterator->key != key) {
        iterator = iterator->next;
    }

    if (iterator == NULL)
        return NULL;
    else
        return &(iterator->value); 
}

int main() {
    printf("Starting..\n");

    int i;
    table = malloc(sizeof(node*) * TABLE_SIZE);
    memset(table, 0, sizeof(node*) * TABLE_SIZE);

    for (i = 0; i < TABLE_SIZE; i++) {
        table[i] = NULL;
        printf("setting %x\n", &table[i]);
    }

    printf("before bad: %x\n", *get_node_address(3327));
    printf("bad address: %x\n", *get_node_address(3328));
    printf("last address: %x\n", table + sizeof(node*) * TABLE_SIZE);

    printf("Hashing...\n");

    put(3328, 3338);
    printf("%d", *get(3328));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:14:52.947

至少有一个问题：

```
inline node** get_node_address(int key) {
      key = (key > -key ? key : -key) % TABLE_SIZE;
      return (node**) (table + key * sizeof(node*)); /* <---- */
} 
```

你不能乘`key`。由于指针算术在 C 中的工作方式，`table + key`产生第`key`-th 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:16:52.060

上面的代码可以简化很多：

```
void put(int key, int value) {
  node **n = get_node_address(key);

  for (n = get_node_address(key); *n; n = &(*n)->next) {;}

  if(*n == NULL)
    *n = new_node(key, value);

}

int* get(int key) {
  node  **n;

  for (n = get_node_address(key); *n; n = &(*n)->next) {
    if (n->key == key) break;
    }

  if(*n == NULL)
    return NULL;
  else
    return &(*n)->value; 
} 
```

# android - 'onPause()' 中必须包含的内容（释放资源）

> ID：10155110
> 
> 赞同：1
> 
> 时间：2012-04-14T16:11:12.207
> 
> 标签：android

简而言之，我试图避免内存泄漏。我已阅读[http://kohlerm.blogspot.co.uk/2009/02/memory-leaks-are-easy-to-find.html](http://kohlerm.blogspot.co.uk/2009/02/memory-leaks-are-easy-to-find.html)并通过查看阻止 GC 释放内存的原因确定了一些。

也就是说，我仍然不确定应该通过执行以下操作手动释放什么： - 取消注册侦听器 - 使引用为空 - 从布局中删除视图

...与系统销毁应用程序时自动释放的内容相比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:33:06.260

我可以指出一些事情你需要在`Activity`暂停时做：

1.  确保您没有使用对上下文或活动或视图的静态引用。如果你是，让它们为空。

2.  停止正在播放的媒体（如果有）并释放媒体播放器的资源。他们非常有限。

3.  如果活动暂停，表面持有者将被销毁，将不得不释放资源。

4.  保存所有必要的变量/状态，因为它是保证调用的最后一个生命周期方法。

5.  根据您的需要停止动画、计时器、asyctasks。

# queue - 是否可以确保唯一的消息在 rabbitmq 队列中？

> ID：10155114
> 
> 赞同：10
> 
> 时间：2012-04-14T16:11:31.317
> 
> 标签：queue, rabbitmq

基本上我的消费者也是生产者。我们得到一个初始数据集并将其发送到队列。消费者拿走一件物品并处理它，从那时起有 3 种可能性：

1.  数据很好，并为存储设置了一个“好”队列
2.  数据不好并被丢弃
3.  数据不好（还）或坏（还），因此数据被分解成更小的部分并发送回队列以进行进一步处理。

我的问题在于第 3 步，因为队列起初增长得非常快，因此有可能将一段数据分解为在队列中重复的部分，并且消费者继续处理它并最终陷入无限循环。

我认为防止这种情况的方法是防止重复进入队列。我不能在客户端执行此操作，因为在一个小时的过程中，我可能有许多核心处理数十亿个数据点（让每个客户端在提交之前对其进行扫描会使我的速度太慢）。我认为这需要在服务器端完成，但是就像我提到的，数据非常大，我不知道如何有效地确保没有重复。

我可能会问不可能的问题，但我想我会试一试。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T21:49:14.120

我认为即使您可以解决不将重复项发送到队列的问题，您迟早会遇到这个问题：

> 来自 RabbitMQ 文档：“从故障中恢复：如果由于客户端连接到的节点发生故障而导致客户端与代理断开连接，如果客户端是发布客户端，则代理可能已接受并在客户端没有收到确认的情况下传递来自客户端的消息；同样在消费端，客户端可能已对消息发出确认，但不知道这些确认是否已发送到代理并在之前处理过失败发生了。简而言之，您仍然需要确保您的消费客户端能够识别和处理重复消息。

基本上，它看起来像这样，您向 rabbitmq 发送请求，rabbitmq 回复 ACK 但出于某种原因，您的消费者或生产者没有收到此 ACK。Rabbitmq 无法知道没有收到 ack，并且您的生产者最终将重新发送消息，从未收到 ack。

处理重复消息很痛苦，尤其是在将消息用作一种 RPC 的应用程序中，但在使用这种消息架构时，这似乎是不可避免的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T17:32:26.397

核心问题似乎是这样的：

```
"...its possible that a piece of data is broken down into a part that's 
duplicated in the queue and the consumers continue to process it and 
end up in a infinite loop." 
```

您可以随心所欲地关注排队物品的独特性，但上述问题是您应该集中精力的地方，IMO。防止无限循环的一种方法可能是在消息有效负载中设置一个“已访问”位，该位由消费者在重新排队分解的项目之前设置。

另一种选择是让消费者重新排队回到一个特殊的队列，该队列的处理方式略有不同，以防止无限循环。无论哪种方式，您都应该通过将其作为应用程序策略的核心部分来解决问题，而不是使用消息传递系统的功能来绕过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-20T04:14:02.477

rabbitmq 有一个插件，可以让你用一些额外的标题来做这种类型的控制。

您应该启用插件并`x-deduplication-header`在消息上定义，使用哈希或唯一标识发送的消息的东西，因此当具有相同标头值的其他消息进入rabbitmq的交换时，它不会被路由到任何队列。

请参阅：[https ://github.com/noxdafox/rabbitmq-message-deduplication](https://github.com/noxdafox/rabbitmq-message-deduplication)

# android - ActionBar Sherlock 的样式选项卡

> ID：10155117
> 
> 赞同：0
> 
> 时间：2012-04-14T16:11:50.997
> 
> 标签：android, styling, android-actionbar, actionbarsherlock, theming

所以我正在尝试设置我的 ActionBar 选项卡的样式，这是我使用 ActionbarSherlock 库实现的。我已经设法用图标本身来设置栏的样式，而不是它下面的选项卡。有谁知道是什么阻止我这样做？这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
  <resources>
    <style name="CustomStyleTostrams" parent="Theme.Sherlock.Light">
            <item name="actionBarTabStyle">@style/customActionBarStyle</item>
            <item name="android:actionBarTabStyle">@style/customActionBarStyle</item>
        </style>

        <style name="customActionBarStyle" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
            <item name="background">@drawable/bg_tabs_image</item>
            <item name="android:background">@drawable/bg_tabs_image</item>
        </style>
  </resources> 
```

更新：所以我想出了一些办法。我正在使用带有 TabWidget 的标准 TabManager（实现 TabHost.OnTabChangedListener），由于某种原因，它不适用于正常样式。我通过复制“ABS：Styled”示例测试了上面的代码。但是，例如，我不知道如何实现 onTabSelected 和 onTabUnSelected。做这个的最好方式是什么？使用 ABS: Styled sample，还是尝试以不同的方式设置 TabWidget 的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:37:28.393

我通过创建以下样式来做到这一点：注意 tab_indicator_ab_holo 是我的自定义九补丁

```
<style name="SearchTabView"  parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/tab_indicator_ab_holo</item>
</style>

<style name="SearchTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarTabStyle">@style/SearchTabView</item>
    <item name="android:actionBarTabStyle">@style/SearchTabView</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:34:57.073

在fragments_tabs_pager.xml 中（如果那是您正在使用的那个）。只需设置tabwidget的背景： TabWidget android:id="@android:id/tabs" android:orientation=" **horizo​​ntal" android:background="#F0F0F0"** android:layout_width="match_parent" android:layout_height="wrap_content"安卓：layout_weight="0"

至于样式选择器、潜水员等的问题。我还不知道，我认为我将标签栏与您可以在操作栏本身内部拥有的标签混淆了。操作栏中的选项卡是我唯一找到好的答案的选项卡。所以，如果可以的话，也请回答这个问题，Jake :)

# sql - Dos 命令（如果存在）无法正常工作

> ID：10155119
> 
> 赞同：-1
> 
> 时间：2012-04-14T16:12:08.717
> 
> 标签：sql, sql-server, if-statement, command, exists

我知道现在问ms dos相关问题不是上帝。但我有一个小问题，我正在为应用程序表单创建一个安装程序项目，该应用程序我需要执行具有指定路径的创建数据库脚本。当路径不存在时，sql引擎返回错误消息，因此我需要检查路径是否存在，如果不存在，我需要创建路径来执行此操作，我使用以下脚本进行测试，但它不能按我预期的那样工作。当我第二次执行相同的 bat 文件时，它给了我以下错误

“子目录或文件 \installations\database 已存在”

听到是我的代码

```
c:
IF NOT EXIST c:\installations\database GOTO NODIR
cd C:\installations\database
:NODIR 
mkdir \installations\database\ 
```

请帮我解决这个问题。如果我可以从 sql it self 获得解决方案，这将是我个人的答案 cz 我不喜欢 dos 批次:)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:53:04.033

我找到了解决方案，感谢您帮助我

我们可以通过执行以下脚本来检查文件夹是否存在

```
master.dbo.xp_fileexist @file 
```

[参考](http://www.sqlservercentral.com/scripts/Miscellaneous/30587/)

我们可以使用以下命令创建一个文件夹

```
SET @Path = 'E:\temp\'
SET @MD =   ' mkdir ' + @Path +'WK' + @wk_no
EXEC    xp_cmdshell @MD, no_output 
```

[提取形式](http://www.sqlservercentral.com/Forums/Topic604168-8-1.aspx)

非常感谢您对这个问题的支持。我认为这是满足我要求的理想解决方案。请随时添加您的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:18:33.497

我不是 DOS 批处理专家，但这里有一些建议：

1.  `cd C:\installations\database`这似乎真的错了。关于什么 ：

    ```
    C:
    cd installations\database 
    ```

2.  同样，您为什么不首先验证您是否在正确的目录中：

    ```
    :NODIR
    C:
    mkdir installations
    cd installations
    mkdir database 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:59:07.943

您的原始代码有错误的逻辑。

如果目录已经存在，它只会更改目录，然后它会落入创建目录的代码中。

检查目录是否存在时，最好追加`\`到末尾以确保 IF EXIST 仅匹配目录而不匹配文件名。

这是更正的逻辑。

```
c:
if not exist "c:\installations\database\" mkdir "c:\installations\database"
cd "c:\installations\database" 
```

# java - 嵌套静态类无法返回其静态字段

> ID：10155121
> 
> 赞同：0
> 
> 时间：2012-04-14T16:12:29.663
> 
> 标签：java, oop

我需要创建新的战士，指定名称，并使用 GameCahracter 类中指定的函数获取他的描述。当我试图运行时 - 它停止`weapon.type ; // <<Exception` 显示`weapon=null`。为什么？据我所知，战士构造函数分配给变量`weapon`一个指向新 Weapon.Sword 的链接。然后使用可变武器我应该能够访问它的字段`type`。这里有什么问题？

* * *

```
abstract class GameCahracter{
    public String name;
    public String type;
    public Weapon weapon; 
    public int hitPoints;

    public String getDescription(){
        return  name + "; " + 
        type + "; "  + 
        hitPoints + " hp; " + 

        weapon.type ; // << Exception
    }

    public static class Warrior extends Player{
        public Warrior() {
            type = "Warrior";
            hitPoints = 100;
            Weapon.Sword weapon = new Weapon.Sword(); 
    }
} 
```

* * *

```
abstract class Player extends GameCahracter {

} 
```

* * *

```
 abstract class Weapon {
    public int damage;
    public String type = "default";

    public int getDamage(){
        return this.damage;
    }

    public static class Sword extends Weapon{

        public Sword() {

            String type = "Sword";
            int damage = 10; 
        }

    }
} 
```

* * *

```
GameCahracter.Warrior wr = new GameCahracter.Warrior();     
wr.setName("Joe");
System.out.println( wr.getDescription()); 
```

* * *

编辑1

出于某种原因，我`default`在打印时有字符串`weapon.type`。为什么？我怎样才能`type`成为`Sword`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:23:16.163

您的问题出在这一行：

```
Weapon.Sword weapon = new Weapon.Sword(); 
```

你用一个本地变量来隐藏你的成员变量。

将其替换为：

```
this.weapon = new Weapon.Sword(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:22:06.153

在这一刻，您的构造函数将`weapon`字段留给`null`. 只需创建一个`Sword`一旦超出范围就被垃圾的实例。

所以换行

```
Weapon.Sword weapon = new Weapon.Sword(); 
```

在你的`Warrior`构造函数中

```
weapon = new Weapon.Sword(); 
```

或者更好

```
this.weapon = new Weapon.Sword(); 
```

`Sword`并且在编写时在构造函数中犯了类似的错误

```
String type = "Sword";
int damage = 10; 
```

改变他们

```
this.type = "Sword";
this.damage = 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:24:08.680

您会在该行遇到异常，因为`weapon`您的实例中的变量`GameCahracter`为空。任何地方都没有设置它的代码。构造函数中的代码`Warrior`设置一个新的局部变量的值，而不是类中的成员变量。

# image - 图像调整大小或新文件性能

> ID：10155122
> 
> 赞同：0
> 
> 时间：2012-04-14T16:12:37.813
> 
> 标签：image, image-processing

这似乎是一个愚蠢的问题。我有在我的网站上重复使用的图像，但它们通常大小不同。例如，我使用 16x16 和 32x32 的小图标以及我的标志，它有一个大版本和一个小版本。我的问题是，在拥有一个文件和简单地在浏览器中调整它的大小或创建两个单独的文件之间是否有更好的性能方法。我认为调整大小可能更好（只有一个服务器请求），但我不觉得我这样做时获得相同的图像质量/控制。这方面的最佳做法是什么？如果使用精灵，这会改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:05:27.737

较小的图像不应该针对性能进行优化，而是针对外观进行优化。将小图像调整为大图像只会使其模糊或像素化，而将大图像调整为小图像会丢失重要的细节。

# java - 如何更改工具提示颜色？

> ID：10155124
> 
> 赞同：2
> 
> 时间：2012-04-14T16:12:55.460
> 
> 标签：java, button

![黄色窗口](../Images/04d874717741eda72bc7f700ff0fc7fc.png)

我如何创建按钮，当您使用鼠标显示黄色窗口时。

```
Open.setToolTipText (Open); // how change it from blue to yellow? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:39:34.167

当用户将鼠标悬停在 JButton 上时显示的消息称为工具提示。

您可以使用此处的 Java 教程中的代码创建一个：http: [//docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html](http://docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html)

要自定义工具提示的背景，您可以执行以下两项操作之一：

*   改变[外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)
*   使用以下代码单独更改工具提示：

    ```
    UIManager.put("ToolTip.background", new ColorUIResource(255, 247, 200)); //#fff7c8
    Border border = BorderFactory.createLineBorder(new Color(76,79,83));    //#4c4f53
    UIManager.put("ToolTip.border", border);
    ToolTipManager.sharedInstance().setDismissDelay(15000); // 15 second delay  
    setToolTipText(message); // Message to display 
    ```

资料来源：[月球海洋甲骨文博客](https://blogs.oracle.com/moonocean/entry/change_properties_of_java_tooltip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T07:28:36.990

可以通过两种方式更改工具提示的样式：

1.  它可以在css中更改如下：

    .tooltip{ -fx-background-color: 线性渐变(#e2ecfe, #99bcfd); }

2.  可以在代码本身中更改如下：

    最终工具提示 t = new Tooltip(advancePlayBaclFlagVo.getDescriptions() + "["+advancePlayBaclFlagVo.getPlantedDateTime()+"]");
    t.setStyle("-fx-background-color: 黄色;");

# javascript - 无法检索动态创建的 div 的 id

> ID：10155125
> 
> 赞同：3
> 
> 时间：2012-04-14T16:12:59.857
> 
> 标签：javascript, jquery, html

我已经创建了一个动态 div 以及表格...我希望当我单击 div 内的图像时，它会给出我单击的 div 的 id...下面是代码。请任何人指出错误在哪里......！？在警报框中，我无法获取 div 的 id

以下代码创建了 div

```
function create_newGrid() {
    //create div for corresponding table
    var tableDiv = $('<div/>').attr({ "id": "settingsDiv-tab" + nooftables });
    var divImage = $('<img/>').attr({ "src": "settingsImage/settings.png", "onclick": "openTableSettings(this);" })
    $(tableDiv).append(divImage);
    // append grid to designer
    $(document.getElementById("center")).append(tableDiv);
    $(document.getElementById("center")).append(table);
} 
```

以下是单击 div 中的图像时执行的函数

```
function openTableSettings(div) {
    alert($(div).attr("id"));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:25:43.980

问题是您在图像上有 onclick，它没有 ID。如果您在浏览器控制台中运行它，它将在此页面底部添加一个带有文本的 div，您可以看到 id 被正确检索。（您的代码但已修改）

```
//create div for corresponding table
var tableDiv = $('<div/>').attr({ "id": "settingsDiv-tab", "onclick": "alert($(this).attr('id'));"});
var divImage = $('<p>this is a big bunch of text</p>');
tableDiv.append(divImage);
$(document.body).append(tableDiv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:32:15.853

您将对 img 的引用传递给`openTableSettings()`. 用于`.closest()`获取 div：

```
function openTableSettings(img) { 
    alert($(img).closest("div").attr("id")); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:19:25.250

如果你这样做可能会更好

```
var divImage = $('<img/>').attr({ "src": "settingsImage/settings.png", class: "clickable"}); 
```

进而

```
$(window).on('click', 'img.clickable', function(){
   alert(this.id);
}); 
```

（假设 jQuery >= 1.7）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:22:19.360

试试这个：

```
$("div > img").click(function() { 
    id = $(this).parent("div").attr("id");
    alert(id);    
}) 
```

# java - 在不使用 IDE 或 CommandPrompt 的情况下运行 Java 项目

> ID：10155127
> 
> 赞同：1
> 
> 时间：2012-04-14T16:13:05.737
> 
> 标签：java

我做了一个由多个 jFrames 和与 MySQL 表的连接组成的测验。我需要知道如何以一种可以放在 CD 上的形式获得它，作为学校演示的软拷贝，因为这是一个项目。我的老师无法帮助我，我检查了我所有的书......请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:15:25.457

从您的项目中构建一个[可执行的 jar](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jarGuide.html)，在目标机器上有一个 JRE，并执行 jar 文件以在没有 IDE 的情况下演示您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:22:17.183

您可能想查看[PortableApps.com](http://PortableApps.com)。您可以使用 JRE 构建记忆棒，并且有一个运行 Jars 的实用程序。这样您就不必在主机上安装任何东西。您甚至可以在棒上安装 Portable Eclipse 以进行最后一分钟的更改或调试您可能发现的任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:27:32.913

将可执行 JAR 文件、MYSQL 和 JRE 可安装软件的副本复制到 CD 中。在执行 JAR 之前，在演示机器上安装 MySQL 和 JRE。

# android - 在设备长时间不活动后建立 Android 网络连接

> ID：10155134
> 
> 赞同：1
> 
> 时间：2012-04-14T16:14:29.420
> 
> 标签：android, android-networking, user-inactivity

我的应用程序将 SMS 转发到一个电子邮件地址。一个大问题是当天的第一条消息。设备（Attrix 设置为最大省电模式）处于深度睡眠状态。短信正常接收，但是没有网络/数据连接，直到我手动唤醒手机，非常不雅。

我想请求/强制/欺骗 Android 唤醒它的网络，并允许连接。我有一个 CONNECTIVITY_CHANGE 侦听器，因此应用程序可以检测到这种情况何时异步发生。

目前， HttpClient.execute() 表示“与[http://xxx.yyy.com](http://xxx.yyy.com)的连接被拒绝”。在收到 SMS 后立即调用。这是在没有任何 isConnected() 检查的情况下尝试的，这些检查确实说“假”。我希望这个请求会引发网络唤醒。

我也试过（注意 - 没有这种方法的经验）

连接管理器.startUsingNetworkFeature(连接管理器.TYPE_MOBILE, "enableHIPRI");

但代码只是......停止......在那里。没有错误、异常、日志，它只是停止。我什至无法检查返回值。

我没有尝试过唤醒锁，因为它们似乎是关于唤醒 CPU（CPU 看起来不错）和屏幕（不在乎）。

在我的应用程序的早期版本中，我走了一条不同的路线。我有一个 TimerTask 每 5 分钟尝试一次，直到成功发送消息（即 Javax Mail transport.send() 不会抛出 MessagingException）。它完全无视有关当前网络状态的任何信息。这似乎非常可靠。但这是在黑暗中投掷飞镖，我相信它可以改进。

谢谢！

PVS

# regex - 在 Perl 中，如何使用正则表达式跳过包含数字的输入行？

> ID：10155137
> 
> 赞同：-4
> 
> 时间：2012-04-14T16:14:52.033
> 
> 标签：regex, perl, input, skip

我有一个这样的列表：

```
自行车：儿童  
289  
自行车：山地自行车  
928  
自行车：公路自行车  
870  
露营和户外装备  
761  
独木舟、皮划艇、划艇  
231  
登山装备  
120  
自由重量级和家庭健身房  
583  
GPS和定位器  
104  
高尔夫装备  
1,223  
其他健身器材  
668  
```

我只需要跳过数字或空白的行

```
if (($line =~ /0..9/) || ($line eq "")){}  
else{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:17:32.217

```
print $line if $line !~ /[0-9]/ and $line =~ /\S/; 
```

[perldoc perlre](http://perldoc.perl.org/perlre.html) . 如果你付出一些努力，你会学到更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:03:59.910

如果你写

```
while (<>) {
  next unless /[^\d,\s]/;
    :
} 
```

您的程序将跳过所有仅包含数字、逗号和空格的行。

这个程序显示了这个想法

```
use strict;
use warnings

while (<DATA>) {
  next unless /[^\d,\s]/;
  print;
}

__DATA__
Bicycles: Childrens  
289  
Bicycles: Mountain Bikes  
928  
Bicycles: Road Bikes  
870  
Camping & Outdoors Equipment  
761  
Canoes, Kayaks, Row-Boats  
231  
Climbing Equipment  
120  
Freeweights and Home Gyms  
583  
GPS and Locators  
104  
Golf Equipment  
1,223  
Other Fitness Equipment  
668 
```

**输出**

```
Bicycles: Childrens  
Bicycles: Mountain Bikes  
Bicycles: Road Bikes  
Camping & Outdoors Equipment  
Canoes, Kayaks, Row-Boats  
Climbing Equipment  
Freeweights and Home Gyms  
GPS and Locators  
Golf Equipment  
Other Fitness Equipment 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:32:18.980

```
if ($line !~ /^[\d,]*[\n\r]*$/) {
  # do something
}   
else {
  # blank or "digits & comas" only line
} 
```

“空白”是指带有可选行尾的空字符串（以防您不使用`chomp`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T08:48:29.423

下一个 if (!$line || $line != int($line));

第一个是空白值检查，第二个是检查该值是否为整数。

# solr - Solr 和 SolrNet 问题和指导

> ID：10155140
> 
> 赞同：2
> 
> 时间：2012-04-14T16:14:57.257
> 
> 标签：solr, solrnet

我刚刚开始使用 Solr 和 SolrNet。在我目前的项目走得太远之前，我想验证我是否走在正确的轨道上。这是我想要实现的目标：

基本要求：

1.  提供针对多个实体（汽车、船舶、飞机、自行车等）进行搜索的搜索解决方案。我只是在这里做了这些。每个实体可以具有可变数量的非对称数据字段。
2.  为每个实体提供方面。
3.  为每个实体提供过滤器。

工作流程：

1.  用户使用术语进行搜索。
2.  四个链接，每个实体一个，旁边显示一个数值，表示每个实体的命中数。
3.  用户单击链接，页面将显示该实体的构面和搜索结果。

因此，鉴于这一要求，这是我迄今为止所做的：

1.  创建了一个索引，但每个实体都有特定的字段，例如 car_name、car_model、car_company、ship_name、ship_model、ship_company、ship_age、ship_size 等。
2.  我在索引中有一个字段 entity_type，它设置为实体之一。
3.  ID 在所有实体中都是唯一的。
4.  我有一个 DisMax 搜索处理程序 solrconfig.xml，我在其中放置了应该搜索的所有字段（来自所有实体）。

这是我的 DisMax 搜索处理程序的样子：

```
<requestHandler name="DisMax" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="echoParams">explicit</str>
        <str name="defType">edismax</str>
        <str name="qf">
            car_name car_company car_model ship_name ship_company ship_model ship_sailing_route plane_name plane_company plane_model bicycle_name bicycle_company bicycle_model
        </str>
        <str name="q.alt">*:*</str>
        <str name="rows">10</str>
        <str name="fl">*,score</str>
        <str name="facet">on</str>
        <str name="facet.field">car_comapny</str>
        <str name="facet.field">car_model</str>
        <str name="facet.field">ship_name</str>
        <str name="facet.field">ship_company</str>
        <str name="facet.field">ship_sailing_route</str>
        ...
    </lst>
</requestHandler> 
```

最后，这是我的问题：

1.  这个单一索引路线是正确的方法还是应该为每个实体创建单独的索引？请解释。
2.  如果它们应该是单独的索引，我如何在它们中搜索给定的术语？重要的是我如何使用 SolrNet 做到这一点？
3.  有没有办法使用 SolrNet 搜索所有实体并检索结果？或者我是否需要使用相同的搜索词分别（可能并行）对每个实体执行查询？
4.  如您所见，我有一个应在 DisMax 处理程序中作为构面可用的所有字段的列表，这是正确的方法吗？如果不是，那是什么？

我确信在我完成我的项目时我会有更多的问题，但现在就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:56:00.477

如果您要每种类型有很多项目，那么拆分可能是一个明智的想法（仅出于性能考虑，仅此而已）。它还取决于您要放入架构中的内容之间的异同。
例如，bicicles、cars、ships 都有共同的公司、名称、型号等，因此您可以只有名称、型号、公司字段，然后是另一个显示“vehicle_type”的字段。如果变量字段（称它们为可选项）只是少数几个，您可以为这些字段设置动态字段，因此您不需要严格的模式。

如果您使用不同的索引（和模式），您的查询需要了解所有不同的字段和模式。更不用说你需要一个多核实例，并且（AFAIK）你不能一次向多个核心发送查询。

这取决于您要执行的查询。假设您想搜索名称为“vairo”的车辆，但用户没有指定他是否想要 bicicles 或汽车或其他任何东西。您需要将搜索分发到所有不同的核心，例如

```
/solr/bicicles/select?q=bicicle_name:vairo
/solr/cars/select?q=car_name:vairo
/solr/ships/select?q=ship_name:vairo 
```

然后合并结果。如果你把所有东西都放在一个索引上，你可以简单地搜索`q=name:vairo`. 然后通常你会通过“vehicle_type”来分面，告诉用户有 1000 辆具有该名称的 bicicle，以及很少的其他车辆。如果用户现在指定“ok，gimme only the bicicles”，您可以像以前一样保留查询，但添加**&fq=vehicle_type:bicicle**。

这比根据过滤器处理应该查询的索引的逻辑要方便得多。合并来自多个响应的结果也不是微不足道的。

在我们公司，我们对所有类别都使用一个 solr。显然，它们都有其他选项不存在的选项（想想房地产与车辆）。有些用动态字段处理，有些用普通字段处理。如果您不在文档中发送任何内容，SOLR 就可以了。

例如：

```
squared_meters
rooms
vehicle_type
vehicle_doors 
```

全部在一个索引中。正如您可能猜到的那样，当我们为文档编制索引时，有一半以上的字段将是空的（要么是汽车，要么是房子）。SOLR 在查询和索引时都可以。

所以，总结一下：

*   考虑你想要做什么样的查询。如果您搜索自行车或汽车，则可以使用不同的索引
*   考虑您将拥有多少文件。如果它们将是数百万，那么这种逻辑拆分将是您可以做的最好的事情，以获得更好的性能，但您将不得不做更多的查询！

# asp.net - 在 Visual Studio 2010 中运行 AfterPublish 命令

> ID：10155150
> 
> 赞同：2
> 
> 时间：2012-04-14T16:16:31.867
> 
> 标签：asp.net, visual-studio-2010, asp.net-mvc-3, publish

我尝试将此代码添加到我的项目文件中：

```
<Target Name="AfterPublish">
<Exec Command="start C:\test.txt" />
</Target> 
```

这根本不成立。但是，当我执行“AfterBuild”时，它工作正常。所以，我认为我的发布没有设置为“Web Deploy”。有谁知道是否有一种方法可以使“AfterPublish”在不使用 Web Deploy 设置发布的情况下工作。

# python - 如何滚动到python中的ScrolledListBox中的选定项目？

> ID：10155153
> 
> 赞同：3
> 
> 时间：2012-04-14T16:17:06.370
> 
> 标签：python, listbox, scroll, tkinter, listboxitem

我正在开发一个显示大型项目数据库的应用程序。

还有一个搜索栏允许用户搜索该数据库，而不是滚动浏览每个项目以找到他们需要的项目。当搜索返回`True`（进行匹配）时，所需的信息显示在文本框中，更多选项显示在另一个列表框中（现在不滚动），但`ScrolledListBox`即使我使用`selection_set()`or也不会自动滚动到所选项目`list_box.active()`。

我得到了它！我必须使用`list_box.yview_scroll()`命令！这需要 2 个参数：1）去哪里的整数/索引 2）逐行或逐页（UNITS 或 PAGES）

但我确实发现 .see 方法更有效！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:26:14.777

Tkinter 没有 ScrolledListBox 类。您能否更具体地了解您正在使用哪个 ScrolledListBox 实现？

话虽如此，Tkinter 中的可滚动小部件通常有一个`see`方法可以滚动到足以确保传入的索引可见。

在对此答案的评论中，您说您正在使用 pmw.ScrolledListBox。根据[ScrolledListBox 小部件的文档](http://pmw.sourceforge.net/doc/ScrolledListBox.html)：

> 此外，来自 Tkinter.Listbox 类的方法由这个 megawidget 转发到列表框组件。

因此，您可以在该小部件上调用任何可以在 Listbox 小部件上调用的方法。正如我之前提到的，Listbox 类有一个`see`方法，所以您应该能够执行以下操作：

```
the_widget.see(index) 
```

在上面的示例`index`中是您想要查看的列表框中的行。

# ruby-on-rails - 工厂/固定装置与简单的 Model.create(...)？

> ID：10155156
> 
> 赞同：10
> 
> 时间：2012-04-14T16:17:52.380
> 
> 标签：ruby-on-rails, factory-bot

当您可以在测试中简单地使用 ActiveRecord 来创建数据库条目时，工厂/装置的目的是什么（我知道工厂的作用类似于装置，但更清楚一点）？即 News.create(…)

我只是看不到使用 Factory Girl 的任何优势，而不是简单地使用 ActiveRecord 方法创建一个新用户，比如说一个新用户..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:34:51.730

# 工厂

创建/构建一个对象，然后仅在测试中调用它时才使用它。

您在一个文件中定义对象的“快乐路径”，包括关联（如 ryan 所提到的），然后只在架构/模型关联发生变化时维护一个文件。

# 夹具

模拟单个记录的数据库应该是什么样子，将其加载到测试数据库中然后使用。

Fixtures 是模型的最终状态并存在于数据库中，因此只加载一次，并且可以在您认为合适的情况下用于测试。

多个文件，您布置您的夹具文件，以便处理每个文件和关联。

# 新模型.create(...)

`before(:each)`在一个测试或一个块中创建一次并使用一次

如果你有 100 个这样的块，那就是编写和维护 100 个不同的对象，更不用说像`@user.profile.create(....)`100 次这样的关联了。

# 工厂相对于 NewModel.create 的优势

要维护一个文件，而不是在您的代码行中查找和替换多个`build`或替换`create`。

*注意* 必须说，在我的测试套件中，我希望它尽可能快，所以我放弃了 FactoryGirl 并使用 Fixtures 和 NewModel.create 继续前进。就是看看能不能加速。我正在研究FG正在减慢我的套件速度的理论，`let()`并且`before(:each)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T17:05:08.537

拥有**工厂**并遵循**测试数据构建模式**将使您提前做一些工作，但会真正节省您的时间和未来的工作。

假设您有一个 Car 模型，并且该 Car 有一个 Owner，并且该 Owner 需要一个地址。每个人都有其他领域。如果您想遵循直接使用模型的方法，则必须在需要它们的每个步骤定义中创建这些对象（以及对应关系）。与工厂？您**只需定义一次**。

一旦你用对应的结构在一个地方定义了工厂，你所要做的就是请求一个汽车，工厂将把汽车与其他模型的所有依赖关系拿走。这不是很酷吗？最后，您希望在这一点**上专注于测试。**

它也很酷的是你可以**覆盖特定的属性**，所以你可能有这样的东西，如果你想覆盖属性速度：

```
Given /^I have a car running^/
 Factory :car, speed => 100
end 
```

从我谦虚的角度来看，我喜欢 Factory Girl，因为它使我的测试代码易于维护并且非常易于阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T16:43:23.150

工厂允许您将测试设置放在一个文件中。例如，我的项目工厂位于`spec/support/factories/project_factory.rb`.

如果我想更改默认标题或添加另一个属性，我会在一个文件中进行。由于 AR 在我的测试中到处都是，我需要在每次使用时都改变它。

# ruby-on-rails - Rails 3.1.3 在使用 compass+sussy+haml+scss 编译资产时在登台服务器中出错

> ID：10155158
> 
> 赞同：3
> 
> 时间：2012-04-14T16:18:10.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml, compass-sass

我的应用程序在 compass 和 sussy 用于 haml 和 scss 的开发环境中运行良好，并且该应用程序的 Gemfile 配置是 -：[Gist for Gemfile](https://gist.github.com/2003755)

我的 application.rb 设置看起来像这样-：

```
if defined?(Sass)
 config.sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/compass/stylesheets"
 config.sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/blueprint/stylesheets" 
 config.sass.load_paths << "#{Gem.loaded_specs['compass-susy-plugin'].full_gem_path}/sass"
end
 config.assets.precompile << /(^[^_]|\/[^_])[^\/]*/ 
```

但是当我将我的应用程序部署到服务器时。这是在**暂存**环境中。总是向我抛出错误-：

```
Error compiling asset application.css:
    Sass::SyntaxError: Undefined variable: "$base-font-size".
    (in /var/www/App-staging/releases/20120405100127/app/assets/stylesheets/_mobile-first.scss)
    Served asset /application.css - 500 Internal Server Error 
```

如果我尝试提供的一些技巧和补丁会给我错误-：

```
Compiled application.css  
Completed 500 Internal Server Error in 419ms

ActionView::Template::Error (File to import not found or unreadable: compass/css3/.
Load path: Sass::Rails::Importer 
```

那么这是 Compass 和 rails 版本的问题吗？回答是否有任何永久解决方案可以摆脱这个或任何用于登台和生产环境的工作配置。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:28:03.017

确保使用导入 SASS 文件

```
"import _mobile-first"; 
```

此外，在 rails 3.1 中，正确的文件名是

```
mobile_first.css.erb.scss 
```

*注意：您不需要前导下划线。*

这将允许您使用 scss 导入导入文件，同时仍使用 erb 使用资产路径帮助程序插入资产。

```
<%= asset_path 'twitter.png' %> 
```

您正在使用旧版本的指南针 gem。升级到 0.12.1。

如果这仍然不起作用，请尝试从 application.rb 中删除这些行

```
if defined?(Sass)
 config.sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/compass/stylesheets"
 config.sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/blueprint/stylesheets" 
 config.sass.load_paths << "#{Gem.loaded_specs['compass-susy-plugin'].full_gem_path}/sass"
end 
```

你不需要它们。没有它们，该应用程序将运行良好。我从来不需要将这些行添加到 application.rb

如果这仍然不起作用，请删除以下行并尝试。

```
 config.assets.precompile << /(^[^_]|\/[^_])[^\/]*/ 
```

如果这仍然不起作用，您可以发布 mobile_first.scss 和 application.scss 的内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:37:01.057

您确定您的部署脚本正在调用 assets:precompile 并将 RAILS_ENV 设置为 staging ，如下所示：

```
bundle exec rake assets:precompile RAILS_ENV=staging 
```

你能在你的开发机器上运行上面的命令吗？

# makefile - 无法在 gnustep projectcenter 中编译 C++

> ID：10155159
> 
> 赞同：1
> 
> 时间：2012-04-14T16:18:12.670
> 
> 标签：makefile, gnustep

我已经在 Windows 中设置了 gnustep，运行了
Gorm 和 Projectcenter
，并成功构建了一个带有 Gorm 构建的 UI 的 Objective-C hello world 应用程序
。

但是，添加诸如 Class 等 C++ 的东西
会使项目无法编译。

ProjectCenter 的“新建文件”命令
没有“cpp”，只有“c”文件。

> 是不是 ProjectCenter 不支持 C++/Obj-C++？
> 
> 有没有办法编辑 make 文件以使其编译 C++ 文件？

```
#
# GNUmakefile - Generated by ProjectCenter
#
ifeq ($(GNUSTEP_MAKEFILES),)
 GNUSTEP_MAKEFILES := $(shell gnustep-config --variable=GNUSTEP_MAKEFILES 2>/dev/null)
endif
ifeq ($(GNUSTEP_MAKEFILES),)
 $(error You need to set GNUSTEP_MAKEFILES before compiling!)
endif

include $(GNUSTEP_MAKEFILES)/common.make

#
# Application
#
VERSION = 0.1
PACKAGE_NAME = myapp
APP_NAME = myapp
myapp_APPLICATION_ICON = 

#
# Resource files
#
myapp_RESOURCE_FILES = \
Resources/myapp.gorm \
Resources/Main.gsmarkup \
Resources/MainMenu-GNUstep.gsmarkup \
Resources/MainMenu-OSX.gsmarkup 

#
# Header files
#
myapp_HEADER_FILES = \
AppController.h \
mycls.h

#
# Class files
#
myapp_OBJC_FILES = \
AppController.m

#
# Other sources
#
myapp_C_FILES = \
mycls.c 

myapp_OBJC_FILES += \
myapp_main.m 

#
# Makefiles
#
-include GNUmakefile.preamble
include $(GNUSTEP_MAKEFILES)/aggregate.make
include $(GNUSTEP_MAKEFILES)/application.make
-include GNUmakefile.postamble 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-14T15:04:22.170

目前（0.6.2），ProjectCenter 不支持 C++ 也不支持 Obj-C++

不过，未来计划支持 Obj-C++。

# firefox - Firefox：断开节点的 DOM 突变事件？

> ID：10155161
> 
> 赞同：1
> 
> 时间：2012-04-14T16:18:19.330
> 
> 标签：firefox, mutation-events

我有几个问题（我对与 Firefox 相关的答案感兴趣，但其他浏览器上下文中的答案也可能是可以接受的）。

1.  DOM Mutation 事件是否会因与主文档断开连接的节点而触发，即断开连接？根据 Mozilla 错误之一中的信息，答案似乎是肯定的。有人可以给我一些例子吗？

2.  查找节点是否断开连接的最快方法是什么？天真的方法是一直走（使用 node.parentNode）直到我们到达 null 或文档。有更快的吗？

3.  Firefox 是否支持 Webkit 的“魔法 iframe”功能？如果不是，如果该代码在 Firefox 中运行会发生什么？

4.  与#3 相关，iframe 是否可以在与文档断开连接时继续加载？即它连接到一个主文档，开始加载，然后移动到另一个文档（使用采用节点（）），但从未添加到新文档中的父节点。iframe 会继续加载吗？

在此先感谢， 苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:38:57.783

1.  `DOMNodeRemoved`当一个节点（元素、文本节点、注释、..）从事件绑定到的文档/元素中删除时，会触发该事件。

    ```
    document.addEventListener('DOMNodeRemoved', function(event) {
        console.log('Removed node: ' + event.target.nodeName);
    }); 
    ```

2.  对两种可能性进行基准测试：

    *   一个普通的循环：

        ```
        function isDisconnected(node) {
            var rootElement = document.documentElement;
            while (node) {
                if (node === rootElement)
                    return false;
                node = node.parentNode;
            }
            return true;
        } 
        ```

    *   [`document.contains( node )`](https://developer.mozilla.org/en/DOM/Node.contains)：

        ```
        function isDisconnected(node) {
            return !document.contains(node);
        } 
        ```

    结果： http: [//jsperf.com/dom-contains-vs-parentnode](http://jsperf.com/dom-contains-vs-parentnode)
    该[`document.contains()`](https://developer.mozilla.org/en/DOM/Node.contains)方法比循环方法快得多（47x）（无论节点是否断开连接，该`document.contains`方法始终优于循环）。

3.  Magic iframe 功能在 Firefox 中**不起作用**，使用此小提琴进行测试：http: [//jsfiddle.net/GRFsd/](http://jsfiddle.net/GRFsd/)
    对于不了解此功能的人：在 Chrome 中，iframe 可以**从**一个文档移动到其他，无需卸载框架。这称为[神奇的 iframe](http://cananian.livejournal.com/60624.html)功能。

提供的[jsfiddle](http://jsfiddle.net/GRFsd/)移动一个 iframe，其`src`属性设置为`"data:text/html,<script>alert(/Test/);<\/script>"`. 加载此 URL 时，会显示一个警报。**出现两个**警报意味着**不支持**Magic iframe 功能。**出现一个**警报意味着该功能**受支持**。零警报显示意味着您的 JavaScript 已禁用，或者您的浏览器不支持数据 URI。

# python - 有没有办法从 Python 的日期时间获取 Django 的默认日期和时间字符串？

> ID：10155168
> 
> 赞同：3
> 
> 时间：2012-04-14T16:18:49.543
> 
> 标签：python, django, datetime

我注意到默认 Django 的日期时间作为字符串看起来像这样（来自模板）：

```
April 4, 2012, 6 a.m.
April 14, 2012, 12:06 p.m.
April 14, 2012, midnight
April 14, 2012, noon
April 14, 2012, 6:02 a.m. 
```

请注意日期或时间中没有尾随零。此外，Django 消除了 :00 分钟，并且还使用字符串“noon”和“midnight”而不是等效的数字时间。

如果不编写一堆`if`-`elif`语句，我能得到的最接近的是这个

```
# I'm using Django 1.4 with timezone support.
# timezone.now() is the same as `datetime.now()` but it's timezone "aware".
timezone.now().strftime('%B %d, %Y, %I:%M %p').replace( 'AM', 'a.m.' ).replace( 'PM', 'p.m.' ) 
```

但这会产生以下结果（使用上面的相同示例）

```
April 04, 2012, 06:00 a.m.
April 14, 2012, 12:06 p.m.
April 14, 2012, 12:00 a.m.
April 14, 2012, 12:00 p.m.
April 14, 2012, 06:02 a.m. 
```

我需要获取字符串的原因是因为我使用的是 ajax（特别是 Dajax），所以我*必须*返回一个字符串，`datetime`因为我无法在 JSON 中存储 Python 对象（即使我可以，JavaScript 也不知道如何来解释它）。

那么是否有某种 Django 函数可以转换`datetime`为 Django 模板使用的相同字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T17:34:33.883

使用`django.utils.dateformat`which Steven 链接到：

```
>>> import datetime
>>> from django.utils import dateformat
>>> dateformat.format(datetime.datetime.now(), 'F j, Y, P')
u'April 14, 2012, 1:31 p.m.' 
```

`P`[是第93 行](https://code.djangoproject.com/browser/django/trunk/django/utils/dateformat.py#L93)的有趣扩展`strftime`：

```
时间，以 12 小时制的小时、分钟和“上午”/“下午”为单位，保留分钟
如果它们为零，并且字符串 'midnight' 和 'noon' 合适的话。
示例：“上午 1 点”、“下午 1:30”、“午夜”、“中午”、“下午 12:30”
专有扩展。

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:29:31.220

这是一种懒惰的方法：

```
def f(dt):
    s = dt.strftime('%B %d, %Y, %I:%M %p')
    for unwanted, wanted in [
        ('12:00 AM', 'midnight'),
        ('12:00 PM', 'noon'),
        ('AM','a.m.'),
        ('PM', 'p.m.'),
        (':00', ''),
        (' 0', ' ')]:
        s = s.replace(unwanted, wanted)
    return s 
```

这

```
print f(datetime(2012, 4, 4, 6))
print f(datetime(2012, 4, 14, 12, 6))
print f(datetime(2012, 4, 14, 12))
print f(datetime(2012, 4, 14, 0))
print f(datetime(2012, 4, 14, 6, 2)) 
```

给

```
April 4, 2012, 6 a.m.
April 14, 2012, 12:06 p.m.
April 14, 2012, noon
April 14, 2012, midnight
April 14, 2012, 6:02 a.m. 
```

# javascript - UIWebView 和 javascript 弹出窗口未捕获触摸事件

> ID：10155171
> 
> 赞同：0
> 
> 时间：2012-04-14T16:18:56.063
> 
> 标签：javascript, ios5, xcode4, uiwebview

我需要将什么框架或库导入到我的项目中来复制 Safari 检测 UIWebView 中的 javascript 弹出链接的功能？

我只能捕获链接，而不是 javascript 弹出窗口来执行 Safari 对本机应用程序中的多个页面所做的事情。

我可以打开这些打开新窗口的链接。

a href="/somepage" about="_blank">测试

但我对这些有问题

a href="#" onclick="doSomeCustomJavascriptAndOpenANewWindow()">测试

我正在使用 UIWebView 访问 url 而不是我自己的 javascript。

感谢你的协助

# jquery - AJAX 呼叫不适用于某些 3G 提供商

> ID：10155174
> 
> 赞同：1
> 
> 时间：2012-04-14T16:19:11.577
> 
> 标签：jquery, android, ajax, cordova

我有一个 Android Phonegap 应用程序，它有一些 AJAX 调用，它们通过 WiFi 工作，但不适用于某些提供商的 3G。我住在荷兰，它在 T-Mobile 上工作，但它还没有结束 Hi（荷兰供应商）。我有一个本地 jQuery 文件，但也尝试了一个外部的，都没有工作。我在 Phonegap 1.5、1.6 和 1.4.1 上进行了测试，但没有一个在工作。

AJAX 调用非常基础：

```
$.ajax({
    url: "URL TO BE LOADED",
    type: 'post',
    data: "username="+gebruikersnaam,
    success: function(data) {
        alert(data);
    },
    error: function(data){
        alert(data);
    }
}); 
```

我不知道为什么它不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:36:06.000

SDK 不允许 Ajax/跨域请求。尝试配置 [`$.mobile.allowCrossDomainPages = true; $.support.cors = true`

[http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

# c - 从文件中读取数据并将值存储在 C 中

> ID：10155178
> 
> 赞同：-1
> 
> 时间：2012-04-14T16:19:32.823
> 
> 标签：c, file

我有一个包含很多这样的行的文件：

```
1:458:187:131
1:1124:384:63
1:2300:514:31
2:95:111:12
... 
```

在每次阅读时，我都会使用一个函数来使用这些值，以便在下一次迭代中它可以存储在同一个变量中。

然后我有其他的字符串

```
6:City1:46:795:825:17134:8398:616:323:8791:5873
7:City near London:507:1032
8:NY:2595:64:193:684:1258:341:1125:1956:5079 
```

这和之前的过程是一样的。有什么帮助吗？

```
void readst()
 {

      int nn1, nn2,nn3,nn4;
        char str1[200], str2[200];
   char str[200];
   FILE *fp;

   fp = fopen("file.txt", "r");
    if(!fp) return 1; // bail out if file not found
   while(fgets(str,sizeof(str),fp) != NULL)
   {
      // strip trailing '\n' if it exists
      int len = strlen(str)-1;
      if(str[len] == '\n') 
         str[len] = 0;
         int n1, n2,n3,n4;
        char str1[200], str2[200];

        sscanf(str,"%d:%d:%d:%d",&nn1,&nn2,&nn3,&nn4);
        printf("%d\n%d\n%d\n%d\n",nn1,nn2,nn3,nn4);

     printf("\n%s", str);
   }
   fclose(fp);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:26:54.080

这样的事情应该可以解决问题：

```
#include <stdio.h>

int main (void) {
    static const char filename[] = "file.txt";
    FILE *file = fopen ( filename, "r" );
    if (file != NULL) {
        char line [128];
        while (fgets(line, sizeof line, file) != NULL) {
            fputs(line, stdout);
        }
        fclose(file);
    }
    else {
        perror(filename);
    }
    return 0;
} 
```

您可以在 while 循环内操作变量。

要拆分字符串：

```
p = strtok("a:b:c", ":");
while (p != NULL) {
    printf("%s\n", p);
    p = strtok(NULL, ":");
} 
```

# bash - 如何将 vim 的设置放入 bash 变量中？

> ID：10155179
> 
> 赞同：1
> 
> 时间：2012-04-14T16:19:36.177
> 
> 标签：bash, vim

我需要获取一些 vim 设置的当前值，例如`runtimepath`。

我知道我可以在 vim 中使用它`:set runtimepath`，但我找不到将它放入 bash 变量的方法。

如果您知道任何获取它的方法，请帮助:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:56:53.100

这是我在脚本中使用的内容：

```
TEMP=$( mktemp )
$VIM -c "redir! > $TEMP" -c 'set runtimepath' -c 'q' 
```

输出将被重定向到`$TEMP`

# emacs - 显示 yasnippet 的所有片段

> ID：10155181
> 
> 赞同：29
> 
> 时间：2012-04-14T16:19:47.863
> 
> 标签：emacs, yasnippet

将 yasnippet 可用的所有片段显示到当前主要模式的好方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-14T18:05:07.723

此命令显示片段和键

```
 m-x yas/describe-tables 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-24T10:55:34.100

`yas/describe-tables`是`yas-describe-tables`in的别名`yasnippet.el.`

(yas/describe-tables & optional CHOOSE)

自 yasnippet 0.8 以来，此功能已过时；

改为使用`yas-describe-tables`。

显示每个表的片段。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-14T17:43:05.920

你在找`M-x yas/insert-snippet`吗？它将列出所有可用的片段，您可以选择其中一个来插入。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-24T18:10:46.857

```
(defvar lawlist-context-menu-map
  (let ((map (make-sparse-keymap "Context Menu")))
    (define-key map [help-for-help] (cons "Help" 'help-for-help))
    (define-key map [seperator-two] '(menu-item "--"))
    (define-key map [my-menu] (cons "LAWLIST" (make-sparse-keymap "My Menu")))
    (define-key map [my-menu 01] (cons "Next Line" 'next-line))
    (define-key map [my-menu 02] (cons "Previous Line" 'previous-line))
    (define-key map [seperator-one] '(menu-item "--"))
  map) "Keymap for the LAWLIST context menu.")

(defun lawlist-popup-context-menu  (event &optional prefix)
  "Popup a context menu."
  (interactive "@e \nP")
    (define-key lawlist-context-menu-map [lawlist-major-mode-menu]
      `(menu-item ,(symbol-name major-mode)
        ,(mouse-menu-major-mode-map) :visible t))
    (define-key lawlist-context-menu-map (vector major-mode)
      `(menu-item ,(concat "YAS " (symbol-name major-mode))
        ,(gethash major-mode yas--menu-table)
          :visible (yas--show-menu-p ',major-mode)))
    (popup-menu lawlist-context-menu-map event prefix))

(global-set-key [mouse-3] 'lawlist-popup-context-menu) 
```

* * *

> [![例子：](../Images/9347a1e230b94ab62dae09b176351e3e.png)](https://i.stack.imgur.com/Tq1RI.png)

# c# - 如何获取网站重定向目标网址（最终用户链接）

> ID：10155184
> 
> 赞同：2
> 
> 时间：2012-04-14T16:20:06.787
> 
> 标签：c#, .net, html, redirect, http-redirect

我有一个将我重定向到另一个网站的 URL。我想从 C# 中的原始 URL 获取目标 URL。有没有办法遵循这些重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:25:10.050

您可以使用 HttpWebRequest 类

```
var request = (HttpWebRequest)WebRequest.Create(someUrl);
request.AllowAutoRedirect = false;
var response = (HttpWebResponse) request.GetResponse();
if (response.StatusCode == HttpStatusCode.Found) // Found == 302
{
    // Do something...
    string newUrl = response.Headers["Location"];
} 
```

此外，您可以通过设置自动遵循重定向：

```
request.AllowAutoRedirect = true;
request.MaximumAutomaticRedirections = 4; //number of redirections allowed 
```

相关：[如何检查 302 响应？网络请求](https://stackoverflow.com/questions/1391373/how-do-i-check-for-a-302-response-webrequest)

# java - Android 模拟器没有启动

> ID：10155186
> 
> 赞同：-2
> 
> 时间：2012-04-14T16:20:20.233
> 
> 标签：java, android, emulation

我正在加载android开发者模拟器。我创建了一个虚拟设备。当我单击开始按钮时，它显示启动屏幕。但它没有开始。以下是截图：

![在此处输入图像描述](../Images/e36d1abab532dae664c111b771277ab6.png)

![在此处输入图像描述](../Images/d40e5b202ed653cd8c32ebd392fc1b91.png)

![在此处输入图像描述](../Images/700f2ea970f04998381653b790b1008f.png)

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:29:58.283

重新启动 adb 然后删除模拟器并创建一个新的。启动新的，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:27:06.347

等一下，它需要很长时间才能完成加载。

# objective-c - 切换视图控制器

> ID：10155190
> 
> 赞同：0
> 
> 时间：2012-04-14T16:21:04.720
> 
> 标签：objective-c, ios, uiviewcontroller

我试图搜索这个站点和整个互联网，但我还没有找到一种方法可以让我在多个视图控制器之间切换同时在它们之间共享数据。我尝试使用以下代码（第一个方法调用另一个方法然后切换视图）：

```
-(IBAction) choosePhoto:(id)sender {
[self startMediaBrowserFromViewController: self
                            usingDelegate: self];
if(firstViewController.view.superview == nil)
{
    [secondViewController viewWillAppear:YES];
    [firstViewController viewWillDisappear:YES];

    [firstViewController.view removeFromSuperview];
    [self.view insertSubview:self.secondViewController.view atIndex:0];

    [firstViewController viewDidDisappear:YES];
    [secondViewController viewDidAppear:YES];
}

//3\. now add animation
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.25];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
//blue view will appear by flipping from right
if (secondViewController.view.superview == nil)
{
    [UIView setAnimationTransition: UIViewAnimationTransitionFlipFromRight 
                           forView:self.view cache:YES];

    [secondViewController viewWillAppear:YES];
    [firstViewController viewWillDisappear:YES];

    [firstViewController.view removeFromSuperview];
    [self.view insertSubview:self.secondViewController.view atIndex:0];

    [firstViewController viewDidDisappear:YES];
    [secondViewController viewDidAppear:YES];
}
[UIView commitAnimations];
    }

- (IBAction)switchViews:(id)sender {
if(self.secondViewController.view.superview == nil)
{
    [firstViewController.view removeFromSuperview];
    [self.view insertSubview:secondViewController.view atIndex:0];
}
    } 
```

这做了一个很好的动画，但不会切换视图控制器。

请帮忙？

编辑：还将另一个视图放在第一个视图控制器中以及如何切换视图会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:41:54.523

在您的代码中，您实际上是在切换视图而不是视图控制器。这意味着从视图控制器内部消息传递的角度来看（例如：视图加载/卸载、视图出现/消失、自动旋转），没有任何变化，原来的“当前”视图控制器仍将位于顶部。现在在 iOS 中，这通常使用容器视图控制器进行管理，即“管理”一组子视图控制器并负责内部消息传递和转换的视图控制器。最常见的情况是 UINavigationController 和 UITabBarController，在 iPad 上您还可以看到 UISplitViewController 和 PageViewControllers。

在 iOS5 中，Apple 提供了一种方法来通知容器视图控制器（这是一个普通的视图控制器）其包含的 VC 的更改，使用所谓的“视图控制器包含”。您可以看到一段取自 WWDC 2011 并在 iTunes 上发布的视频（仅限注册开发者）。基本上，这种方法添加了一些方法，允许通知容器视图控制器其包含的 VC 结构中的更改。我不会在这里详细介绍并邀请观看 WWDC 视频并阅读[此堆栈溢出答案](https://stackoverflow.com/questions/8146253/animate-change-of-view-controllers-without-using-navigation-controller-stack-su/8198515#8198515)或[此帖子](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)。我认为后者正是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:40:34.707

正如另一张海报所说，您不应该像正在做的那样交换或混合视图控制器的内容视图。如果你想这样做，你需要使用 iOS 5 中新的父子视图控制器支持。

如果您确实使用 iOS 5 中新的父视图控制器支持，那么有一个非常酷、非常强大的方法，称为 transitionFromViewController:toViewController:duration:options:animations:completion: 可以为您完成大部分繁重的工作。它很容易使用。

（我还没有看过关于父/子视图控制器的 WWDC 视频，但这将是一个很好的起点。我刚开始使用新方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:44:07.437

您应该使用 UINavigationController 在 UIViewController 之间切换。

```
[[self navigationController] pushViewController:firstViewController animated:YES]; 
```

将 UIView 放入 UIViewController

```
[[self view] addSubview:view1]; 
```

我会使用 UIView.hidden 来切换视图

```
view1.hidden = YES;
view2.hidden = NO; 
```

# html - 设置图像与第一个内联

> ID：10155191
> 
> 赞同：1
> 
> 时间：2012-04-14T16:21:20.853
> 
> 标签：html, css

我如何设置图像“LeftSpacer”和“RightSpacer”内联而没有
但仍然留在页面“Wrapper”中我需要“LeftSpacer”并且“RightSpace”与“LeftSpacer”内联但一直到对。

```
<html> 
<head> 

<style type="text/css">
<!--
body {
  text-align:center; /* for IE */
  margin:0 auto; /* for the rest */
  background-color: #ffffff;
}

#Wrapper{
  width: 1000px;
}

div#wrapper {
  text-align:left;
  width:1000px; /* or a percentage, or whatever */
}

    /*End Page Wrapper*/

#Header {
  width: 100%;
  height: 100%;
  background: url("http://www.web-designer-ga.com/Pics/top.gif") no-repeat 0 0;
}

#LeftSpacer { 
  width: 14px;
  height: 24px; 
  background: url("http://www.web-designer-ga.com/Pics/btn_lft.gif") no-repeat 0 0; 
}

#RightSpacer {
  width: 100%;
  height: 100%; 
  background: url("http://www.web-designer-ga.com/Pics/btn_rgt.gif") no-repeat 0 0;
}

-->
</style>

</head> 

<body>

  <div id="Wrapper">

    <div id="Header"></div> 

        <div id="LeftSpacer"></div>

        <div id="RightSpacer"></div>

  </div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:26:21.300

您可以给 Leftspacer 和 Rightspacer 一个通用类，例如：`class="spacers"`然后将 css 值设置为`float:right`or`display:inline`

# c# - Webbrowser：当托管网页上的链接未触发 DocumentCompleted 时，对活动进行排序

> ID：10155196
> 
> 赞同：2
> 
> 时间：2012-04-14T16:21:42.497
> 
> 标签：c#, javascript, event-handling, browser, webbrowser-control

鉴于此方法可在 Web 浏览器中处理 HTML 页面：

```
 bool semaphoreForDocCompletedEvent;

                private void button12_Click(object sender, EventArgs e)
                        {
                            checkBox1.Checked = false; //unchecked if the NAvigating event is fired and Checked after DocumentCompleted is fired, only to have a visual reference on the Form
                            HtmlDocument doc = Program.wb.Document;
                            HtmlElement ele = doc.GetElementById("menuTable");
                            foreach (HtmlElement sub in ele.All)
                            {
                                if (sub.GetAttribute("href").Contains("something"))
                                {
                                    ele = sub;
                                    break;
                                }
                            }
//PHASE 1: clicking on a Web link to navigate to a page that contains other buttons and links                       object obj = ele.DomElement;
                            System.Reflection.MethodInfo mi = obj.GetType().GetMethod("click");
                            mi.Invoke(obj, new object[0]);
//PHASE 2: Waiting for document completed in order to be sure the document is fully loaded

                            semaphoreForDocCompletedEvent = WaitForDocumentCompleted();
                            if (!semaphoreForDocCompletedEvent)
                                throw new Exception("casino in giro!");

                            ele = doc.GetElementByI("button1").FirstChild.FirstChild.FirstChild.NextSibling;
//PHASE 3: clicking on a Web button to open a form

                            obj = ele.DomElement;
                            mi = obj.GetType().GetMethod("click");
                            mi.Invoke(obj, new object[0]);
//PHASE 4: displaying a modal MEssageBox that annoy the user a lot

                            if (checkBox1.Checked == false)
                                MessageBox.Show("non c'è stato document completed");
                            checkBox1.Checked = false;

//PHASE 5: submitting the form (that does not need any imput to be filled in)

                            ele = doc.GetElementById("planet");
                            ele = ele.FirstChild.NextSibling.NextSibling;

                            obj = ele.DomElement;
                            mi = obj.GetType().GetMethod("submit");
                            mi.Invoke(obj, new object[0]);
                        }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
            {
                Program.toBox = Program.wb.Document.Body.InnerHtml.ToString();
                if (Program.wb.ReadyState == WebBrowserReadyState.Complete)
                {
                    checkBox1.Checked = true;
                    IsBusy = false;
                }
            }

        private bool WaitForDocumentCompleted()
                { 
                    while (IsBusy)
                    {
                        Application.DoEvents();
                        Thread.SpinWait(1000);
                    }
                    return true;
                } 
```

我需要了解为什么在显示消息框时这段代码运行起来就像一个魅力，而在它被注释掉时却没有。我的疑问可以在这些问题中恢复：

1）当消息框是程序的一部分时，代码的流程如何？我的意思是代码被阻止到用户按下好吗？

2) 我在上面用数字 3 指出的阶段会在页面中触发一些 javascript，这些 javascript 不会发出导航事件（因此没有 DocumentCompleted），但可以访问一些隐藏的 HTML，而无需单击 A 标记就无法访问。实际上，它只是更改标签的 InnerHtml，在其中创建一个 FORM。

3) 我尝试为第 4 阶段实现几个解决方案，如此处所示的消息框、ThreadSleep()、SpinWait() 甚至是 for 循环将所有内容都搞砸了，但所有这些解决方案似乎都没有让 Webbrowser 继续在屏幕上可视化表格。只有消息框将其显示在屏幕上，即使用户非常快地按下 OK 并关闭它也是如此。

4）我需要找到一个不涉及外部（用户）输入（例如要关闭的消息框）的解决方案，以等待表单完全加载到屏幕上，但没有任何事件可以提供帮助。

评估案例的更多数据： - 我编写的代码有利于目标，我尝试将其拆分为 3 个按钮来手动管理时间，它工作正常。- 完成的文档不能用于在代码拆分之间切换，因为大约有 300 个页面是自动化的，每个页面可以有 10-15 种方法来自动化它们，如果不建立一个永无止境的情况，就不可能为所有这些页面管理一个事件处理程序切换结构。如果可能的话，我会尽量避免它。- 我发现了其他用户的一些有趣问题，如下所示，但我的情况没有解决方案：

[带有 WebBrowser.IsBusy 或 ReadyState (VB .NET) 的 InvalidCastException](https://stackoverflow.com/questions/1912678/invalidcastexception-with-webbrowser-isbusy-or-readystate-vb-net)

[检测 AJAX 何时更改 WebBrowser 中 DIV 中的 HTML](https://stackoverflow.com/questions/1454451/detect-when-ajax-changes-html-in-a-div-in-webbrowser)

[http://www.techtalkz.com/vb-net/374234-vb-net-webbrowser-control-how-capture-javascript-events-statusbar-changed-mouseclick-etc.html](http://www.techtalkz.com/vb-net/374234-vb-net-webbrowser-control-how-capture-javascript-events-statusbar-changed-mouseclick-etc.html)

有人可以帮我一把吗？

对不起，这是我的第一个线程，希望我已经清楚了。Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:17:50.420

我在这里发布了我能够找到的解决方案：我为 HtmlElement 类型编写了一个扩展方法，如下所示：

```
public static bool WaitForAvailability(this HtmlElement tag, string id, HtmlDocument   documentToExtractFrom, long maxCycles)
{ 
    bool cond = true; long counter = 0; 
        while (cond) 
        { 
        Application.DoEvents(); 
        tag = documentToExtractFrom.GetElementById(id);
         if (tag != null) 
            cond = false;
         Thread.SpinWait(50000);
         counter++; 
        if (counter > maxCycles) 
            return false; 
        } 
    return true;
 } 
```

这允许等待所需的标签直到它在页面中真正可用的那一刻

# c# - 除了 ADO 模型生成器

> ID：10155203
> 
> 赞同：1
> 
> 时间：2012-04-14T16:22:53.730
> 
> 标签：c#, asp.net, entity-framework, c#-4.0

我正在阅读 webform 的教程，其中作者使用 ADO EDM 从数据库资源生成模型文件。我已经创建了一个类似的数据库文件，但是我的VS10没有安装ADOEDM，没有ADO-EDM如何生成类似的模型？对不起，我对ASP.NET的了解仍然有限，谢谢你的帮助？

我正在阅读本教程。 [http://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2](http://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:35:01.127

我担心如果没有安装 ORM，您将无法从数据库中生成模型类...

当您[提到](http://www.asp.net/entity-framework)`ADO EDM`. 如果是这种情况，您可以使用此 NuGet 包将其安装在 VS 2010 中：

[http://nuget.org/packages/entityframework](http://nuget.org/packages/entityframework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:57:22.490

您是否单击左窗格中的数据子类别？

VS 2010 已安装实体框架。如果它不存在，那么您的视觉工作室已损坏。

# php - 数组 PHP 中的未定义偏移量（在 for 迭代中）

> ID：10155206
> 
> 赞同：1
> 
> 时间：2012-04-14T16:23:07.597
> 
> 标签：php, mysql

我试图在不重复任何 BBDD 的情况下获得一组随机行，最后，代码向我提出了问题……但有一些错误……有人可以帮助我吗？PD错误在粗体线中。（未定义的偏移量（在每次迭代中））提前致谢

```
mysql_query('SET CHARACTER SET utf8');
$sql=mysql_query("SELECT * FROM Questions");
$num_rows = mysql_num_rows($sql);
$max_value = (int )$num_rows;
$ids[] = array(5);
for ($i = 0; $i < 5; $i++) {
    $repetido = true;

    while($repetido == true){
    $repetido = false;
    $quest_id = rand ( 1, $max_value);//Obtiene el aleatorio

    for ($j = 0; $j < count($ids); $j++) {
        **if ($quest_id == $ids[$i])  $repetido = true;**

    }

    }
    $ids[$i] = $quest_id;
    $sql=mysql_query("SELECT * FROM Questions WHERE id_quest = $quest_id");
    $row = mysql_fetch_array($sql);

    $output[$i]=$row;
}

    echo(json_encode($output));
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:33:23.843

```
$sql = mysql_query("SELECT DISTINCT * FROM Questions ORDER BY RAND() LIMIT 5");
$output = array();
for ($i = 0; $i < 5; $i++) {
    $output[] = mysql_fetch_array($sql);
}

echo(json_encode($output));
mysql_close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:34:28.333

首先 ：

```
$ids[] = array(5); 
```

不做你认为它做的事，它只是用一个索引为**0**和值为**5**的元素创建数组。

如果您只需要五个随机行，您可以使用 MySql 轻松完成：

```
SELECT * FROM Questions ORDER BY RAND() LIMIT 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:40:33.687

后：

```
$ids[] = array(5); 
```

添加：

```
var_dump( $ids ); exit; 
```

使用@joeframbach 解决方案

# mysql - 获取Wordpress DB中具有一定usermeta值的用户数

> ID：10155207
> 
> 赞同：0
> 
> 时间：2012-04-14T16:23:10.343
> 
> 标签：mysql, sql, wordpress

Wordpress 数据库结构如下所示：

*   **wp_users**（ID、user_registered 等）
*   **wp_usermeta**（user_id、meta_key、meta_value 等）

`wp_users.ID`对应`wp_usermeta.user_id`。

我想选择按 DATE(wp_users.user_registered) 分组的所有用户的计数，以及它们与元键对应的元值，元键`'sex'`是 1 或 2。结果应该包含两列和唯一的行数日期。第一列应该是元值 1 的用户数，第二列是元值 2 的用户数。

我对 WP 特定的结构不感兴趣，我想用一个 SQL 查询来做到这一点。

如果它足够好，我会发布我的尝试，不幸的是我没有那么好。真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:31:16.260

试试这个：

```
select sum(um.meta_value = '1') Sex1, sum(um.meta_value = '2') Sex2
from wp_usermeta um
join wp_users u on u.id = um.user_id
where um.meta_key = 'sex'
group by date(u.user_registered) 
```

你说：

> 结果应该由两列和与唯一日期一样多的行组成。

这样做的问题是您不知道每一行所指的日期。您可以添加`date(u.user_registered)`到`select`语句中以查看。

# php - php上的文件下载队列

> ID：10155209
> 
> 赞同：0
> 
> 时间：2012-04-14T16:23:38.423
> 
> 标签：php, file, download, queue, wget

我需要实现某种文件下载队列。我打算使用 wget 进行文件下载。

我的问题是 - 下载文件后如何从 wget 获取信息？

为了做到这一点，是否可以在 wget 上设置回调或触发？

此外，欢迎您推荐一些其他的东西，而不是 wget，以便使用它来下载文件。

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:38:33.760

如果您可以访问 wget，那么我认为您可以执行 bash 脚本，我建议您在后台运行 bash 脚本（从 php 执行的脚本）

在后台运行 bash 脚本是一个聪明的主意，因为一些大文件可能需要很长时间才能下载，所以您不会让您的用户等待文件完成，而是离开页面稍后再回来，他将查看文件是否已完成下载。

如果我要这样做，我会做的是，我将创建将运行 wget 的 bash 脚本，当它完成下载时会触发一些操作，比如更新数据库，或者运行一个 php 脚本来更新数据库并设置要下载的文件状态，或者如果您不想使用数据库，您可以让 bash 脚本在文件完成后向用户发送电子邮件，发送带有文件链接的电子邮件或类似的东西。

我不确定我是否完全明白你的想法，但我根据我认为你的意思回答了。

无论如何，这是一个示例 bash 脚本，您可以使用它来下载文件

```
#!/bin/bash

wget $1

SUBJECT="$1 is ready"
EMAIL="$2"

# Email text/message
EMAILMESSAGE="/tmp/emailmessage.txt"
echo "you can download your file using this link \n http://somesite/$1" > $EMAILMESSAGE
/bin/mail -s "$SUBJECT" "$EMAIL" < $EMAILMESSAGE 
```

您可以像这样从 php 执行该 bash 脚本： shell_exec("scriptfile link email &");

# iphone - 如何在 iPhone 中搜索整个单词？

> ID：10155210
> 
> 赞同：0
> 
> 时间：2012-04-14T16:23:43.713
> 
> 标签：iphone, objective-c, ios, search, uisearchbar

我添加了一个带有 UITableView 的搜索栏。当我输入第一个字符时，它会搜索以该字符开头的所有记录，但是当我输入下一个字符时，它什么也不搜索。

请帮助我。如果这是一个愚蠢的问题，请耐心指导我谢谢

代码

```
-(void)searchData:(NSString*)search{

//    search = [search uppercaseString];

    NSLog(@"Array count233 : %d", [menuArray count]);

    NSLog(@"Array count237 : %d", [menuArray count]);

    NSLog(@"Search String : %@", search);
    if ([search isEqualToString:@""]) {

    }
    else {

        [tableMenuArray removeAllObjects];

            for (int i = 0; i < [menuArray count]; i++) {
                if ([[[menuArray objectAtIndex:i] itemName] hasPrefix:search]) {
                    [tableMenuArray addObject:[menuArray objectAtIndex:i]];
                    NSLog(@"Found");
                }
            }
        }
    [menuTableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:22:44.427

如果您取消注释第二行，则更改此行 -

```
if ([[[menuArray objectAtIndex:i] itemName] hasPrefix:search]) 
```

...到 -

```
if ([[[[menuArray objectAtIndex:i] itemName] uppercaseString] hasPrefix:search]) 
```

否则，您将全大写与正常大小写的单词进行比较。希望这对您有所帮助！

# c++ - C ++中的虚拟与非虚拟多重继承

> ID：10155216
> 
> 赞同：0
> 
> 时间：2012-04-14T16:24:11.107
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

我正在尝试掌握 C++ 中多重虚拟/非虚拟继承的概念。如果我理解正确，如果类 B 和 C 虚拟继承自类 A，它们共享一种单例对象，即它们都访问一个公共对象 A 的相同字段。多重继承将为任何 B 和 C 对象创建单独的 A 对象。

考虑到上述情况，会有人如此友善并在一个简单实用的背景下呈现它吗？为什么首先要进行多重继承，然后为什么要使用虚拟/非虚拟？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:49:24.840

[C++](https://stackoverflow.com/a/4606034/831725)中不经常使用多重继承。在大多数情况下，它是接口/实现的混合。这也不是被禁止的。对（虚拟）多重继承的需求来自于从一个通用基类派生的设计决策：

```
class Window 
{ /* draw, show, hide, background ... */ };

class WindowWithBorder : public virtual Window 
{ /* methods to manipulate / draw border ... */ };

class WindowWithMenu : public virtual Window
{ /* methods to manipulate / draw Menu ... */ };

class MyWindow : public WindowWithBorder, public WindowWithMenu
{ /* now it's your turn ... */ }; 
```

库实现者必须预见到那些菱形继承图。没有`virtual`就会有两个基础`Window`对象，`virtual`只有一个，但不是单例，因为可以有很多窗口。

库通常可以（但不是在所有情况下）[避免](http://yosefk.com/c++fqa/inheritance-multiple.html#fqa-25.8)这种情况，例如通过实现[复合设计模式](https://en.wikipedia.org/wiki/Composite_pattern)、拥有“胖”基类、实现抽象接口类或使用带有特征/策略的模板。

我建议阅读 Bjarne Stroustrup 的[C++ 编程语言](https://rads.stackoverflow.com/amzn/click/0201700735)中关于类层次结构的章节（我的第 3 版中的第 15 章，我借用了这个例子）。

# iphone - UIViewController 视图-> loadView vs viewWillAppear

> ID：10155218
> 
> 赞同：1
> 
> 时间：2012-04-14T16:24:23.010
> 
> 标签：iphone, ios

我需要释放我在 navigationViewController 上的 mainViewController 视图，以避免收到我收到的内存警告。

加载视图的好习惯是在“loadview”方法中，但是当我尝试解除视图（当我转到堆栈的下一个控制器时）执行“self.view = nil”时，它再次调用“loadview”方法所以什么也没有发生。

我解决了在“viewWillAppear”方法中加载视图的问题，但是，我的问题是：

那个程序正确吗？如果不是（这就是我的想法），我该如何释放该视图以释放其内存？

哪种方法最好（或更正确）？

这是代码：

'loadView' 不加载视图

```
- (void)loadView
{
    [super loadView];
    (some more code)
} 
```

它在这里加载的视图

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (!pral)
    {
        pral = [[TouchDrawView alloc] initWithFrame:[UIScreen mainScreen].bounds];
           [self setView:pral];
           [pral release];
    }
        (some more code)
} 
```

这是对堆栈的下一个 viewController 的调用

```
- (void)menus:(id)sender
{
    opcions *ops = [[opcions alloc] init];
    [[self navigationController] pushViewController:ops animated:YES];
    [ops release];

//Here I'm trying to free memory releasing the view
    [pral removeFromSuperview];
    pral = nil;
    self.view = nil;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:40:32.923

您不必卸载视图，因为它会自动卸载。你只需要在 ViewdidUnload 方法中释放那些包含内存的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:41:11.690

构建自定义子视图的一个更好的钩子是 viewDidLoad。

最低限度，您应该在 didReceiveMemoryWarning 和 dealloc 中释放保留的子视图（ARC 之前）。

推送到新的 viewController 时无需释放。你的旧的还在那里，在下面。

# c++ - Win32代码异常

> ID：10155220
> 
> 赞同：1
> 
> 时间：2012-04-14T16:24:27.070
> 
> 标签：c++, c, winapi, user-interface

我面临一个非常奇怪的问题。谁能告诉我以下代码有什么问题-：

```
#include <Windows.h>

LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);

char szWinName[]="MyWin";

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst,
                   LPSTR lpszArgs, int nWinMode)
{
    HWND hwnd;
    MSG msg;
    WNDCLASSEX wndclass;

    wndclass.cbSize=sizeof(WNDCLASSEX);

    wndclass.hInstance=hThisInst;
    wndclass.lpszClassName=szWinName;
    wndclass.lpfnWndProc=WindowFunc;
    wndclass.style=0;

    wndclass.hIcon=LoadIcon(NULL,IDI_APPLICATION)
    wndclass.hIconSm=NULL;
    wndclass.hCursor=LoadCursor(NULL,IDC_ARROW);

    wndclass.lpszMenuName=NULL;
    wndclass.cbClsExtra=0;
    wndclass.cbWndExtra=0;

    wndclass.hbrBackground=(HBRUSH) GetStockObject(LTGRAY_BRUSH);

    if(!RegisterClassEx(&wndclass)) return 0;

    hwnd=CreateWindow(
        szWinName,
        "Hello World",
        WS_OVERLAPPED,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        500,
        500,
        NULL,
        NULL,
        hThisInst,
        NULL
        );

    ShowWindow(hwnd, nWinMode);
    UpdateWindow(hwnd);

    while(GetMessage(&msg, NULL, 0, 0)>0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return msg.wParam;

}

LRESULT CALLBACK WindowFunc(HWND hwnd, UINT message, WPARAM wparam, 
                            LPARAM lparam)
{
    switch(message){
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd,message,wparam,lparam);
    }
    return 0;
} 
```

我得到以下窗口-： ![上述代码的输出](../Images/16434b1e9637bb4329a586acd13adbb6.png)

如您所见，没有系统菜单。我不知道为什么会这样。但是，如果我用以下代码替换上面的代码，它似乎工作得很好——：

```
#include<windows.h>

LRESULT CALLBACK WinProc(HWND,UINT,WPARAM,LPARAM); 

char szWinName[]="Main Window";

int WINAPI WinMain(HINSTANCE thisInst,HINSTANCE prevInst,
                             LPSTR lpCmdArgs, int nMode){

  HWND hwnd;
  MSG msg;
  WNDCLASSEX wndclass;

  wndclass.cbSize=sizeof(WNDCLASSEX);

  wndclass.hInstance=thisInst;
  wndclass.lpszClassName=szWinName;
  wndclass.lpfnWndProc=WinProc;
  wndclass.style=0;

  wndclass.hIcon=LoadIcon(NULL,IDI_APPLICATION)
  wndclass.hIconSm=NULL;
  wndclass.hCursor=LoadCursor(NULL,IDC_ARROW);

  wndclass.lpszMenuName=NULL;
  wndclass.cbClsExtra=0;
  wndclass.cbWndExtra=0;

  wndclass.hbrBackground=(HBRUSH)GetStockObject(LTGRAY_BRUSH);

  if(!RegisterClassEx(&wndclass)) return 0;

  hwnd=CreateWindow( szWinName,
                     "Hello World",
                     WS_OVERLAPPEDWINDOW,
                     CW_USEDEFAULT,
                     CW_USEDEFAULT,
                     500,
                     500,
                     NULL,
                     NULL,
                     thisInst,
                     NULL
  );

  ShowWindow(hwnd,nMode);
  UpdateWindow(hwnd);

  while(GetMessage(&msg,NULL,0,0))
  {
    TranslateMessage(&msg);                                  
    DispatchMessage(&msg);  
}
    return msg.wParam;

}

    LRESULT CALLBACK WinProc(HWND hWnd, UINT message,
                              WPARAM wparam, LPARAM lparam){

    switch(message){
                case WM_DESTROY:
                     PostQuitMessage(0);
                     break;
                default:
                return DefWindowProc(hWnd, message, wparam, lparam);
                }
    return 0;
} 
```

请有人告诉我我在第一个代码段中做错了什么我已经尝试了所有方法但无法找到它的问题所在。我在 Visual Studio 2008 专业版中使用普通的 Win32 项目。如果有人愿意，我可以将项目邮寄给他们自己测试。快速回复将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T16:27:56.707

在底部代码段中，您使用 WS_OVERLAPPEDWINDOW 作为窗口样式，这就是为您提供系统菜单的原因。第一个代码段只有 WS_OVERLAPPED，它只给你标题栏和边框。

# java - 数据的最小表示？

> ID：10155222
> 
> 赞同：2
> 
> 时间：2012-04-14T16:24:42.807
> 
> 标签：java

如果这个问题真的很奇怪，我很抱歉。我正在将数据发送到我不希望发送重复数据的队列。该程序无法防止重复的数据项，只是接受它们，但我相信队列 ID 必须是唯一的，我可以自己指定这些。所以我想尝试根据我发送的数据生成我的 ID。

假设我有两个字符串：

```
hello, SO how are you? //base case
hello, SO how are you? //same
hello, SO how are You? //different, notice the capital Y
What up, SO! //completely different 
```

我可以在Java中将它转换成什么来匹配上面的前两个字符串但使另外两个唯一？到目前为止我还没有尝试太多（因为我不确定将其转换为最好的东西是什么），但我确实玩了一下，`GZIPOutputStream`但大小似乎有点相似，我不确定它是否是最有效的（即最小的尺寸，比如一些疯狂的十六进制字符或其他东西）。

我希望有人理解我的要求，但如果没有，请告诉我，我会尽力澄清。

*编辑：对不起，我不只是想要字符串的东西，我也在处理列表（也许还有字典）。对于那个很抱歉*

谢谢

代码：

```
public class hashtest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        convert("hello world"); //same
        convert("hello world"); //same

        convert("hello world!"); //exclamation mark
        convert("hello World"); //capital W

        convert_list(new int[] {5, 2, -3}); //same
        convert_list(new int[] {5, 2, -3}); //same
        convert_list(new int[] {5, 3, -3}); //different
        convert_list(new int[] {5, 2, -4}); //different

    }

    private static void convert_list(int[] is) {
        // TODO Auto-generated method stub
        System.out.println("word is " + is);
        System.out.println("hashcode is " + is.toString());
        System.out.println("****");
    }

    private static void convert(String string) {
        // TODO Auto-generated method stub
        System.out.println("word is " + string);
        System.out.println("hashcode is " + string.hashCode());
        System.out.println("****");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:31:09.987

将其`String`本身用作队列 ID，或者如果您需要`Integer`使用[`String.hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#hashCode%28%29) （`hashCode()`为相同的字符返回相同的值）

### 编辑：

如果您的对象实际上不是字符串，最好的方法是实现您自己的`hashCode()`方法。或者对于“快速而肮脏的”，您可以简单地将其呈现为字符串（从唯一位组成一个唯一字符串）并在其上调用字符串的 hashCode() 。

### 编辑（更多）：

问题是您使用的`.toString()`是数组，它在 java 中没有为数组类实现，所以它回退到 Object 的实现，即使内容相同，它对于每个数组都是唯一的。

幸运的是，JDK 提供了答案：使用实用程序方法[`Arrays.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString(int%5B%5D))

```
private static void convert_list(int[] is) {
    // TODO Auto-generated method stub
    System.out.println("word is " + is);
    System.out.println("hashcode is " + Arrays.toString(is));
    System.out.println("****");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:05:18.427

如果您需要一些不仅适用于`String`您的东西，您可以选择[SHA-1](http://en.wikipedia.org/wiki/SHA-1)算法。

在java中你可以用这种方式

```
MessageDigest crypt = MessageDigest.getInstance("SHA-1");
crypt.reset();
byte[] buf = crypt.digest("hello, SO how are you?".getBytes()); 
```

它适用于字节数组，因此您可以将类型转换为 byte[] 然后使用它。

结果是`byte[]`长度为 20 的 a。因此，如果您的原始数据长度大于 20 个字节，这是一个不错的选择。

关于两个不同输入产生相同结果的概率，请阅读这篇[文章](http://theblogthatnoonereads.davegrijalva.com/2009/09/25/sha-1-collision-probability/)。或者在网上搜索更多的技术资料。无论如何，概率非常非常低。

# c++ - Emotiv Epoc 数据采集

> ID：10155227
> 
> 赞同：2
> 
> 时间：2012-04-14T16:25:26.300
> 
> 标签：c++, visual-studio, emokit

我试图从 Emotiv 支持团队和社区获得一些问题的答案，但没有人回答，所以我想也许你们中的一些人正在使用 Emotiv API。

我很难弄清楚原始数据采集过程是如何工作的。我阅读了所有我能找到的关于使用 Emotiv 耳机获取 EEG 原始数据的主题，但它们没有帮助。

这是我的问题：

*   每个通道是否有可能获得 1 个样本？

在我的应用程序中有一个定时器函数，它每 1 毫秒调用一次。如果缓冲区每个通道包含 1 个样本，我想调用另一个函数。

*   函数 EE_DataUpdateHandle() 在调用时是否会转储所有检索到的样本？

如果缓冲区包含每个通道的 1 个样本但 EE_DataGetNumberOfSample() 函数从不返回 1 个样本，我轮询了 EE_DataGetNumberOfSample() 函数以调用另一个函数。这是因为 EE_DataUpdateHandle() 如果调用它会转储所有其他样本吗？我想如果调用 EE_DataUpdatedHandle() 函数，它会指向新数据吗？--> 这是否意味着之前收集的所有数据都无法再访问了？当准备好检索每个通道的 1 个样本时，是否有一个仅返回 EDK_OK 的函数。所以我可以在我的计时器函数中每毫秒轮询一次，如果它返回 EDK_OK，我调用 EE_DataGet 并返回每个通道 1 个样本。

*   我读到您建议使用 Sl eep() 以便在调用 EE_DataUpdateHandle() 之前填充缓冲区您认为可以只在我的计时器函数中计数 1/128 秒以检索每个通道的 1 个样本吗？我真的不知道该怎么做......大约 7.8 毫秒后，缓冲区中每个通道应该有 1 个样本，对吧？如果我每 8 毫秒调用一次 EE_DataGet 函数，因为我的定时器函数每 1 毫秒调用一次，会发生什么情况？

好的，我希望你能提出一些建议来解决我的问题！

干杯，多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:00:52.487

[OpenVibe](http://openvibe.inria.fr/)是开源的，并带有您可以查看的 Emotiv 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:04:23.493

我认为除非 emotiv 改变他们的编程模型，否则不可能一次从一个频道中获取 1 个样本。

当前的 emotiv API 库似乎从耳机获取数据并将其保存到数据缓冲区，而客户端应用程序只能使用 EE_DataGet 从缓冲区轮询数据。

emotiv 库可能不会只用一个数据条目填充缓冲区。如果不是这样，您可以尝试尽可能快地进行轮询（比数据采集更快），看看您是否只能使用 EE_DataGet 获得 1 个样本（然后调用 EE_DataUpdateHandle 为新样本清理缓冲区）。

# php - 何时在 php 中加载数据库

> ID：10155233
> 
> 赞同：1
> 
> 时间：2012-04-14T16:26:44.027
> 
> 标签：php, mysql, database

这是一个普遍的问题。

我有一个网站，其页面显示了我的数据库的许多元素。在这个页面中，我有一个脚本来加载这些元素。

我想知道的是在页面显示时加载数据库可以吗，知道每次用户单击并重新加载页面时，我的脚本都会从我的数据库中重新加载所有内容？

这是一个正确的方法吗？就像在第一次加载网站时创建一个 init.php，并将我的元素存储到 $_SESSION 中？

我不知道我是否设法解释了我的问题，所以如果需要，请向我询问更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:36:50.710

不要将结果存储在会话中。

如果您不想在每次页面加载时都执行查询，您可以使用几种缓存方法（客户端和服务器端），例如。

[内存缓存](http://memcached.org/.)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:42:48.650

这个概念很简单。

如果您要发送新请求，明智的做法是始终在需要时启动新连接，并在完成后关闭它。

但不要将连接或任何结果存储在 SESSION 中，因为这可能会导致安全问题。创建一个通用脚本来启动和关闭连接是要走的路。

话虽如此，查看[持久连接](http://php.net/manual/en/features.persistent-connections.php)可能就是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:30:41.527

如果你的意思是连接做数据库，我通常会做一些文件，比如“db_connect.php”，在那里我连接到我的数据库并做任何其他事情。

然后，在任何我需要它的地方，我都包括它：

```
include_once "db_connect.php"; 
```

最好使用**include_once**而不是**include**，因为你不能不小心将它包含两次。

不要将其存储在 SESSION 中！最好包含一个文件；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:35:05.243

我会避免会议。

include_once 是包含数据库连接文件的好选择。

```
include_once "db_connect.php"; 
```

此外，在文件的末尾，您可能还希望包含另一个文件，该文件可以执行任何数据库断开或清理。

```
include_once "db_disconnect.php"; 
```

如果您知道站点上的每个 php 页面，您还可以使用 php 的前置功能来连接数据库，这将为每个 PHP 页面提供数据库连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T17:05:21.077

不建议在会话中存储数据库内容。但是，如果该数据没有安全风险，并且您真的很想避免数据库调用。您可以继续将它们放入`$_SESSION`数组中，甚至可以创建 cookie 并将数据存储在其中。只要知道数据非常不安全。

此外，存储在 SESSION 内容中的大量信息是您的站点内存。建议清除您的 $_SESSION 和/或 cookie。

数据库调用没什么大不了的，它们需要几秒钟，更安全；

另一种存储数据以避免数据库调用的方法是使用输出缓冲来缓存文件。

# jquery - ONENDED 事件不适用于 HTML5 Flash 视频播放

> ID：10155239
> 
> 赞同：0
> 
> 时间：2012-04-14T16:27:08.987
> 
> 标签：jquery, flash, html, video

我想使用 EMBED 元素来运行 Flash 视频。我使用 JQuery 来集成它（参见下面的代码片段）。

闪光灯正在运行，但我只想运行一次并在它结束时得到通知（使用 ONENDED 事件）。相反，它始终以循环模式运行，我没有收到该事件。

使用 HTML5 的 VIDEO 元素，它可以很好地与 mp4 和 ogv 配合使用。

我怎样才能让它与 Flash 一起运行呢？

```
flashobj = document.createElement('embed');
flashobj.src = 'flash/bmw_i8_concept.swf';
flashobj.type = "application/x-shockwave-flash";
flashobj.width=500;

flashobj.onended = function(e) {
    alert("flash ended: " + e);
}

$(media_container).append(flashobj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:44:50.527

它不起作用，因为 Flash 影片不会调度 JavaScript 事件，除非您配置[ExternalInterface](http://www.adobe.com/devnet/flash/articles/external_interface.html)方法来执行此操作。

也无法通过 JavaScript 停止 Flash 电影，除非该电影明确允许脚本访问。`stop();`如果您有权访问源 FLA，则防止影片循环的最简单方法是在 Flash 影片的最后一帧插入一条语句。

# scala - 在 Scala 中从 CSV 生成案例类

> ID：10155240
> 
> 赞同：1
> 
> 时间：2012-04-14T16:27:27.657
> 
> 标签：scala, pointfree

我收到了来自服务的 CSV 响应，我想生成一个案例类列表。例如：

```
case class MyCaseClass(e1: String, e2: String, e3: String)

val body = getLargeCsvFromServiceOrSomething()
val elements = body.split(",") 
```

现在我有一个`Array[String]`. 我想把那个大数组分解成 3 个元素卡盘，这样我就可以生成我`List[MyCaseClass]`的 ，每个实例从数组中获取 3 个元素。有没有类似的方法`splitAt`，但每 n 个元素吐一次？我确信我可以做到这一点，但它只是不来找我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:33:35.633

你想要的是`grouped`：

```
scala> List(1,2,3,4,5,6,7).grouped(3).toList
res0: List[List[Int]] = List(List(1, 2, 3), List(4, 5, 6), List(7)) 
```

所以你的事情可能是这样的：

```
val elements = Array("a","b","c","d","e","f")
val classes = elements.grouped(3).map{ case Array(a,b,c) => MyCaseClass(a,b,c) }    
println(classes.toList) // List(MyCaseClass(a,b,c), MyCaseClass(d,e,f)) 
```

# matlab - 显示嵌套元胞数组中的所有元素（带有整数条目）

> ID：10155242
> 
> 赞同：1
> 
> 时间：2012-04-14T16:27:33.203
> 
> 标签：matlab, cell-array

这与帖子有关

[显示嵌套元胞数组中的所有元素（带有字符条目）](https://stackoverflow.com/questions/10148955/display-all-elements-in-a-nested-cell-array-with-character-entries/10149478#10149478)

更改条目是字符。为了清楚起见，提出了一个新问题。

现在 ：

一个=

```
{1x10 cell}    {1x10 cell}    {1x10 cell}    {1x10 cell} 
```

一个{:}=

```
ans = [0]    [0.4000]    [0]    [0]    [0]    [0]    [0]    [0]    [0]    [0]

ans = [0]    [0]    [0.2000]    [0]    [0.2000]    [0]    [0.2000]    [0]    [0]    [0]

ans = [0]    [0]    [0]    [0]    [0]    [0.2000]    [0]    [0]    [0.2000]    [0.2000]

ans = [0]    [0.2000]    [0]    [0]    [0]    [0]    [0]    [0.4000]    [0]    [0.2000] 
```

上一个的答案是：

```
fileID = fopen('a.txt', 'at');
fprintf(fileID, '%2.8s \n', cellfun(@(x) char(x), a));
fclose(fileID); 
```

现在怎么解决？想要打印：

```
 0  0.4  0    0  0   0  0   0  0  0
           0  0    0.2  0  0.2 0  0.2 0  0  0
           .
           . 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:16:54.740

我似乎记得如果您将值放入数组中，它将适当地进行转换。我没有 Matlab 来测试它，但这应该可以。

```
[a{:}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:03:24.613

这是一种方法：

```
a = { { 0, 0.4000, 0, 0, 0, 0, 0, 0, 0, 0 }, { 0, 0, 0.2000, 0, 0.2000, 0, 0.2000, 0, 0, 0 }, { 0, 0, 0, 0, 0, 0.2000, 0, 0, 0.2000, 0.2000 }, { 0, 0.2000, 0, 0, 0, 0, 0, 0.4000, 0, 0.2000 }};

fileID = fopen('a.txt', 'at');

fprintf(fileID, [ (regexprep((regexprep((regexprep((regexprep(mat2str(cell2mat(cellfun(@cell2mat, a, 'UniformOutput', false)')), '(0 )' , '$1  ')), '[', '')), ']', '')), ';', '\n')), '\n' ]);

fclose(fileID); 
```

**编辑：替代解决方案。在这一行中，较短的行用空格填充。**

```
CharMatrix = char(regexprep(cellfun(@mat2str, (cellfun(@cell2mat, a, 'UniformOutput', false)'), 'UniformOutput', false), '0 ', '0   '));
CharMatrix(CharMatrix == ']') = ' ';
CharMatrix(:,1) = [];
CharMatrix(:,end) = '\';
CharMatrix(:,end+1) = 'n';
fileID = fopen('a.txt', 'at');
fprintf(fileID, reshape(CharMatrix', 1, []));
fclose(fileID); 
```

# c++ - 对象向量的模板字符串表示

> ID：10155246
> 
> 赞同：1
> 
> 时间：2012-04-14T16:28:03.080
> 
> 标签：c++, templates, typetraits

我想创建一个模板函数，该函数生成具有`name()`方法的事物数组的字符串表示形式。这些东西可以按价值保存，也可以按引用保存（原始或智能）

```
 template< typename T>
        struct GetStringRepresentation;

        template< typename T>
        struct GetStringRepresentation< std::vector< std::unique_ptr< T > > >
        {
            inline void ()( const std::vector< std::unique_ptr< T > >& seq, std::string& out )
            {
                size_t size = seq.size();
                for (int i=0; i< size; i++)
                {
                    if (i > 0)
                        out += ", ";
                    out += seq[i]->name();
                }
            }
        };

       template< typename T>
        struct GetStringRepresentation< std::vector< std::shared_ptr< T > > >
        {
            inline void ()( const std::vector< std::shared_ptr< T > >& seq, std::string& out )
            {
                size_t size = seq.size();
                for (int i=0; i< size; i++)
                {
                    if (i > 0)
                        out += ", ";
                    out += seq[i]->name();
                }
            }
        };

        template< typename T>
        struct GetStringRepresentation< std::vector< T* > >
        {
            inline void ()( const std::vector< T* >& seq, std::string& out )
            {
                size_t size = seq.size();
                for (int i=0; i< size; i++)
                {
                    if (i > 0)
                        out += ", ";
                    out += seq[i]->name();
                }
            }
        };

        template< typename T>
        struct GetStringRepresentation< std::vector< T > >
        {
            inline void ()( const std::vector< T >& seq, std::string& out )
            {
                size_t size = seq.size();
                for (int i=0; i< size; i++)
                {
                    if (i > 0)
                        out += ", ";
                    out += seq[i].name();
                }
            }
        }; 
```

正如您可以清楚地看到的那样，有**很多**重复，特别是在参考专业之间。我不太了解执行此操作的最佳方法，我希望看到一种更好的方法来删除部分或全部代码重复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T16:32:09.153

这是一个帮助您入门的提示：仅专门化打印方法：

```
template <typename T> void print(T const & x)
{
    std::cout << printer<T>::print(x) << std::endl;
}

template <typename T> struct printer
{
    static std::string print(T const & x) { return x.name(); }
};
template <typename U> struct printer<U*>
{
    static std::string print(U * p) { return p->name(); }
}; 
```

这样你只需要编写一次循环，打印机会处理细节。您甚至可以进一步抽象它并制作一种`is_pointer_like`特征（所有支持的东西`->`），然后您专门针对所有智能指针：

```
printer<T, is_pointer_like<T>::value>::print(x); // etc.

template <typename T, bool> struct printer { /* as before */ }

template <typename T> struct printer<T, true>
{
    static std::string print(T const & p) { return p->name(); }
};

// Traits:
template <typename T> struct is_pointer_like : std::false_type { };
template <typename U> struct is_pointer_like<U*> : std::true_type { };
template <typename U> struct is_pointer_like<std::shared_ptr<U>> : std::true_type { }; 
```

对于类似的想法，请参阅[漂亮的打印机](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:38:40.467

我会这样写：

```
struct GetStringRepresentation
{
     template<typename T>
     std::string operator()(std::vector<T> const & seq)
     {
        std::string out;
        size_t size = seq.size();
        for (size_t i=0; i< size; i++)
        {
           if (i > 0)
              out += ", ";
           out += get(seq[i]); //call get() to get the string
        }
        return out;
     }

private:

     template<typename T>
     std::string const & get(T const & t) { return t.name; }

     template<typename T>
     std::string const & get(T const * t) { return t->name; }

     template<typename T>
     std::string const & get(std::unique_ptr<T> const & t) { return t->name; }

     template<typename T>
     std::string const & get(std::shared_ptr<T> const & t) { return t->name; }
}; 
```

# ios - 在 iOS 应用程序中检索文本文件

> ID：10155249
> 
> 赞同：2
> 
> 时间：2012-04-14T16:28:11.547
> 
> 标签：ios, file, text, icloud, information-retrieval

我一直在忙于一些 iOS 开发，并且遇到了一个 Google 还没有帮助我解决的问题。

我想要做的只是在 UITextView 中显示文本文件。显示容易，难的是文本文件的来源。我计划做的是每周编写一个文本文件，然后在我的应用程序中提供该文本，我只是不确定存储和检索该文本的正确方法是什么。这是我的想法：

1）在应用程序中存储文本文件。我不喜欢这样，因为我必须经常提供应用程序更新，或者每次更新都有大量的文本文档可用。

2) iCloud。我什至不知道从哪里开始这个...

我不是在寻找代码示例，除非有人以前做过与此非常相似的事情。我更多的是寻找有关如何存储文本文件（我从笔记本电脑编写）并将该文本文件提供给安装了我的应用程序的每个人的建议。

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:34:21.597

您所需要做的就是将您的文本文件存储在可以公开访问的地方。（尝试任何文件托管服务或购买基本托管计划）要检索数据，您需要做的就是使用 NSString 调用它

```
+ (id)stringWithContentsOfURL:(NSURL *)url encoding:(NSStringEncoding)enc error:(NSError **)error 
```

请务必提供正确的 URL，我猜编码是 NSUTF8StringEncoding。

# node.js - nodejs文件系统与.net System.IO的性能？

> ID：10155252
> 
> 赞同：3
> 
> 时间：2012-04-14T16:28:25.747
> 
> 标签：node.js, filesystems, benchmarking, .net

我在一个项目中需要对 Windows Server 2008 R2 文件系统进行读写操作。为了实现这一点，我会考虑使用 nodejs 的 FS 模块或 .NET System.IO。有人在他们之间做基准吗？如果有人喜欢分享经验，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:06:06.453

我也很好奇。我创建了一个简单的只读测试。我在我的 src 代码目录上运行了 19K 文件的测试，4K 子目录，总共 850MB 的磁盘空间。

在温暖的 FS 的情况下，.Net 与 Node 的运行时性能几乎是平局。

5 次运行的平均值给出了以下时间（以秒为单位）：节点：3.037，CLR：2.976

重新启动后，我将使用冷号码进行更新。

代码可以在这里找到：[https ://github.com/ScottWeinstein/NodeVsNetFSPerf](https://github.com/ScottWeinstein/NodeVsNetFSPerf)

# c# - HashSet 我的课程不包含问题

> ID：10155259
> 
> 赞同：0
> 
> 时间：2012-04-14T16:29:38.850
> 
> 标签：c#, class, hashmap, equality, hashset

我有一个与此类似的课程：

```
public class Int16_2D
{
    public Int16 a, b;

    public override bool Equals(Object other)
    {
        return other is Int16_2D &&
        a == ((Int16_2D)other).a &&
        b == ((Int16_2D)other).b;
    }
} 
```

这适用于`HashSet<Int16_2D>`. 然而在`Dictionary<Int16_2D, myType>`,`.ContainsKey`不应该的时候返回 false 。我在执行过程中遗漏了什么`==`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:33:00.613

要让一个类在哈希表或字典中工作，您需要实现`GetHashCode()`! 我不知道为什么它在 HashSet 中工作；我猜这只是运气。

请注意，*使用可变字段来计算 Equals 或 GetHashCode() 是危险的*。为什么？考虑一下：

```
var x = new Int16_2D { a = 1, b = 2 };
var set = new HashSet<Int16_2D> { x };

var y = new Int16_2D { a = 1, b = 2 };
Console.WriteLine(set.Contains(y));   // True

x.a = 3;
Console.WriteLine(set.Contains(y));   // False
Console.WriteLine(set.Contains(x));   // Also false! 
```

换句话说，当您设置时，`x.a = 3;`您正在更改 x 的哈希码。但是 x 在哈希表中的位置是基于其*旧的*哈希码，所以 x 现在基本丢失了。[在http://ideone.com/QQw08](http://ideone.com/QQw08)上查看此操作

此外，正如 svick 所说，实施`Equals`不实施`==`. 如果不实现`==`，`==`运营商会提供参考比较，所以：

```
var x = new Int16_2d { a = 1, b = 2 };
var y = new Int16_2d { a = 1, b = 2 };
Console.WriteLine(x.Equals(y));             //True
Console.WriteLine(x == y);                  //False 
```

总之，您最好将其设为不可变类型；由于它只有 4 个字节长，我可能会将其设为不可变结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:32:02.900

您需要覆盖`GetHashCode()`. 它适用的事实`HashSet<T>`可能只是一个幸运的巧合。

两个集合都使用从中获得的哈希码`GetHashCode`来查找应该放置对象的存储桶（即对象列表）。然后它搜索该存储桶以找到对象，并使用它`Equals`来确保相等。这就是 Dictionary 和 HashSet 的快速查找属性。但是，这也意味着，如果`GetHashCode`没有被覆盖以使其对应于 types`Equals`方法，您将无法在其中一个集合中找到这样的对象。

您应该几乎总是同时实现`GetHashCode`and `Equals`，或者一个都不实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:31:56.343

您还需要覆盖`GetHashCode`才能使字典正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:32:06.837

您还必须覆盖`GetHashCode()`- 这与覆盖齐头并进`Equals`。字典`GetHashCode()`用于确定一个值将落入哪个 bin - 只有在该 bin 中找到合适的项目时，它才会检查项目的实际相等性。

# javascript - 寻找算法来找到颜色区域的边界

> ID：10155260
> 
> 赞同：6
> 
> 时间：2012-04-14T16:29:52.617
> 
> 标签：javascript, image-processing, canvas

我有一个画有图像的画布。

当用户点击图片时，我需要找到用户点击的颜色区域。区域定义为一组 4 路连接的像素，其颜色与单击的像素相同。

我需要一个可以用来在画布上设置剪切路径的表单中的区域，这样我就可以用渐变等填充该区域。

有没有找到边界的有效算法？比洪水填充算法更优化的东西（我不需要填充，我只需要在我的区域周围找到一条路径）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:58:15.870

我相信摩尔邻里追踪算法会做你想要的。根据定义，摩尔邻域关注 8 连通性，但您应该能够轻松地将其调整为 4 连通性。如果您测试 8 连通性，您得到的区域很可能会更好，但您的应用程序可能有特定要求。

[维基百科在这里](http://en.wikipedia.org/wiki/Moore_neighborhood)有一个很好的算法大纲。我过去曾与此合作并取得了巨大的成功——速度非常快。

# .net - 使用正则表达式 REGEX 从文件中解析未知长度的文本

> ID：10155265
> 
> 赞同：0
> 
> 时间：2012-04-14T16:30:17.710
> 
> 标签：.net, regex

我正在尝试从文本文件中提取文本，但要收集的文本长度不同。这是我第一次尝试使用 RegEx 并且可以使用一些建议

这是源文本。我正在尝试仅提取.解析姓名、电子邮件、出生日期和电话号码。任何帮助，将不胜感激。

```
Basic data
</td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="padding:0;"> </td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #555555; font-family: Arial, Helvetica, sans-serif; font-size:14px;">
Name:
</td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="color: #262626; padding-bottom:8px ; font-family: Arial, Helvetica, sans-serif; font-size:14px;">Test User3</td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #555555; font-family: Arial, Helvetica, sans-serif; font-size:14px;">
Email:
</td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="color: #262626; padding-bottom:8px ; font-family: Arial, Helvetica, sans-serif; font-size:14px;"><span style="color: #262626; text-decoration:none;">testuser3@busystreet.com</span></td></tr><tr><td align="center" colspan="3" height="20" width="100%" style="color: #262626; padding:0; margin:0; line-height:20px;"> </td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #002a5c; font-family: Arial, Helvetica, sans-serif; font-size:14px;">
Custom data
</td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="padding:0;"> </td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #555555; font-family: Arial, Helvetica, sans-serif; font-size:14px;">ref:
</td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="color: #262626; padding-bottom:8px ; font-family: Arial, Helvetica, sans-serif; font-size:14px;">06/16/1963</td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #555555; font-family: Arial, Helvetica, sans-serif; font-size:14px;">cellphone:
                                                            </td><td align="left" width="10" style="padding:0; margin:0;"> </td><td align="left" width="290" style="color: #262626; padding-bottom:8px ; font-family: Arial, Helvetica, sans-serif; font-size:14px;">6152498588</td></tr><tr><td align="center" colspan="3" height="20" width="100%" style="color: #262626; padding:0; margin:0; line-height:20px;"> </td></tr><tr><td align="right" width="250" style="padding-bottom:8px; margin:0; color: #002a5c; font-family: Arial, Helvetica, sans-serif; font-size:14px;"> 
```

提前感谢，

道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:04:14.160

请改用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)。用正则表达式解析 HTML 是一件坏事，除了非常特殊的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:41:04.560

更好地使用 SimpleXML 而不是正则表达式来解析 HTML！

# c# - GetElementsByTagName 不返回 webbrowser 控件中的元素

> ID：10155266
> 
> 赞同：0
> 
> 时间：2012-04-14T16:30:18.403
> 
> 标签：c#, webbrowser-control, getelementsbytagname

我正在尝试使用 C# 中的 webbrowser 控件读取 HTML 源代码。

HTML 源代码包含以下行：

> 输入类="myclass" name="commit" type="submit" value="Submit"

我正在尝试使用以下代码阅读上述内容：

```
HtmlElementCollection buttonElement = webBrowser1.Document.GetElementsByTagName("commit"); 
```

但它不返回任何元素。我打印了 buttonElement.Count 值，它打印了 0。

当我在 webbrowser 控件中单击鼠标右键并查看源代码时，我可以看到这个元素“提交”在那里，并且没有其他同名的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:48:23.163

它的标签名称是`input`. 因此你的代码应该是这样的

```
var element = webBrowser.Document.GetElementsByTagName("input")
            .Cast<HtmlElement>()
            .Where(e => !String.IsNullOrEmpty(e.GetAttribute("name")) &&  e.GetAttribute("name") == "commit")
            .FirstOrDefault(); 
```

# unit-testing - 如何设置 Xcode 4.3 在“UnitTesting”时不启动模拟器？

> ID：10155277
> 
> 赞同：0
> 
> 时间：2012-04-14T16:31:29.700
> 
> 标签：unit-testing, xcode4, ios-simulator, settings

有没有办法告诉 Xcode (4.3) 在运行或测试我的应用程序时不要启动模拟器？当一个人只想知道测试是否通过时，它有点烦人，似乎喜欢吃时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:20:14.773

显然不可能停用模拟器，因为它是单元测试所必需的。

# java - Java - 模数 - 从一个表添加到另一个表

> ID：10155278
> 
> 赞同：0
> 
> 时间：2012-04-14T16:31:38.220
> 
> 标签：java, jtable, row, modulus

我有一个 JTable，其中一列预先填充了 30 分钟的时隙（6.30-24.00）。

现在我有另一个表，其中有一个电影标题列表，其中包含一个包含电影持续时间的列（以分钟为单位 - 例如 140 分钟）。

现在我有一个按钮可以做到这一点。我编写了一段代码，有趣的是，有时有效，有时无效（在我添加 3-4 个标题之后）。它根据数学方程式添加到时隙。它给了我：

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: "DRAMA" 
```

这是代码：

```
btnAddProg.addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {

                        try {
                        int dur = Integer.parseInt(progTableModel.getValueAt(listTable.getSelectedRow(), listTable.getSelectedColumn()+1).toString()) / 30;
                        int durT = Integer.parseInt(progTableModel.getValueAt(listTable.getSelectedRow(), listTable.getSelectedColumn()+1).toString());
            if(durT % 30 != 0)
            {
                dur += 1;   
            }   

                for(int i = 0; i < dur; i++)
                {
                    String value = progTableModel.getValueAt(listTable.getSelectedRow(), listTable.getSelectedColumn()).toString();
                                        String value2 = progTableModel.getValueAt(listTable.getSelectedRow(), listTable.getSelectedColumn()+2).toString();
                                        channel1DataTitle.set(chOneTable.getSelectedRow()+i, value);
                                        channel1DataGenre.set(chOneTable.getSelectedRow()+i, value2);
                }
                                        chOneTable.repaint();
                        } catch (IndexOutOfBoundsException f) {

                            JOptionPane.showMessageDialog(frame,
                             "Please select a row in the Channel table!",
                                "Channel row not selected",
                                 JOptionPane.PLAIN_MESSAGE);

                        }

                    }
                }); 
```

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:35:44.557

您正在尝试解析一个不会转换为数字的字符串。看起来问题是您正在处理用户选择的任何内容。您需要将正在处理的数据限制为来自表中的某些列，或者在尝试处理数据之前验证数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:37:40.020

当您单击正确的列时它可以工作，而当您单击另一个列时它会失败，不是吗？您已将固定逻辑（解析持续时间数）应用于变量列（取决于用户单击的确切列）。访问具有固定编号的列，不检查选定的列索引。

# objective-c - 使用 newManagedObject 对 detailViewController 的 insertNewObject 序列

> ID：10155280
> 
> 赞同：0
> 
> 时间：2012-04-14T16:31:42.837
> 
> 标签：objective-c, ios, uistoryboard, uistoryboardsegue

在 viewDidLoad 我有：

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)]; 
```

对于 insertNewObjectMethod 我有：

```
- (void)insertNewObject:(id)sender
{
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    CommodityTypes *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    self.detailViewController.detailItem = newManagedObject;
    self.detailViewController.context = context;

    [self performSegueWithIdentifier:@"showCommodityTypesDetail" sender:sender];

} 
```

还有：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showCommodityTypesDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        CommodityTypes *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        NSManagedObjectContext *context = self.fetchedResultsController.managedObjectContext;
        [[segue destinationViewController] setDetailItem:object];
        [[segue destinationViewController] setContext:context];
    }
} 
```

当我构建并运行应用程序并选择 + 按钮时，它会转到详细信息页面，但不会加载 newManagedObject 信息。

我的猜测是 performSegueWithIdentifier 触发了对 prepareForSeque 的调用，并且因为没有选定的行，所以没有加载任何内容，但是这个方法覆盖了之前的 self.detailViewController.detailItem = newManagedObject; self.detailViewController.context = 上下文；

我该如何解决这个问题？首先猜测，insertNewObject 创建 newManagedObject。如何选择它出现在表格中的行？

在这里开始 iOS 程序员。

**Eureka** `self.detailViewController`是iPad 拆分视图控制器使用的详细视图控制器*实例，而***不是***iPhone*界面使用的详细视图控制器*实例。*

 *`performSegueWithIdentifier` *确实*向`prepareForSegue`. 为了解决我的问题，我必须做两件事。

创建从主视图控制器到详细视图控制器的第二个 segue。原始序列从表视图行链接到详细视图控制器。我从主视图控制器链接到详细视图控制器的第二个 segue。（使用 Interface Builder 中视图控制器页脚中的视图控制器图标。）

在选择第二个序列的唯一名称的 if 语句中将对象创建行从`insertNewObject`移至。`prepareForSeque`

```
- (void)insertNewObject:(id)sender
{

    [self performSegueWithIdentifier:@"ctAddButtonToDetail" sender:sender];

} 
```

和

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ctMasterRowToDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        CommodityTypes *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        NSManagedObjectContext *context = self.fetchedResultsController.managedObjectContext;
        [[segue destinationViewController] setDetailItem:object];
        [[segue destinationViewController] setContext:context];
    }

    if ([[segue identifier] isEqualToString:@"ctAddButtonToDetail"]) {

        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
        CommodityTypes *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

        [[segue destinationViewController] setDetailItem:newManagedObject];
        [[segue destinationViewController] setContext:context];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:17:57.230

在您的 insertNewObject: 方法中，您有这两行 -

```
self.detailViewController.detailItem = newManagedObject;
self.detailViewController.context = context; 
```

...这表明您已经尝试初始化要继续使用的 detailViewController。您不需要这样做，它会自动初始化，因为您已经在情节提要中进行了链接，并且您可以在 prepareForSegue:sender: 方法中将任何您想要的信息传递给它 - 就像您实际上正在做的那样。

至于获取正确的数据，也许您可​​以在 tableView 的委托方法 tableView:didSelectRowAtIndexPath: 中执行此操作，并将 ivar 设置为所选行的行号，以便您可以在 prepareForSegue: 方法中获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:45:36.673

您正在将对象提供给目标视图控制器。您也不需要提供上下文......可以从对象本身获得（所有 NSManagedObjects 都有一个 managedObjectContext 属性）。

看起来您正在传递信息。我不知道你对所选部分的意思。

在被排序的视图控制器上，您需要确保抓取正在传入的数据...... viewDidLoad 是最常见的地方。*

# ios - Monotouch / iOS：哪个地方是取消订阅代表的最佳位置

> ID：10155281
> 
> 赞同：1
> 
> 时间：2012-04-14T16:31:54.083
> 
> 标签：ios, delegates, xamarin.ios, unsubscribe

iOS 中订阅事件的最佳方法是 ViewDidLoad，但是当关闭视图时，不会调用 ViewDidUnload()（仅在内存警告时。）

哪个地方最适合取消订阅活动？

（在 subviewController 中，我订阅了一个引用 MainViewController 的事件，当打开子视图两次时，我收到两个事件触发器，因为从未调用 viewdidunload() 中的取消订阅。）

在 ViewWillAppear/ViewWillDisapper 中订阅/取消订阅怎么样？

```
 public override void ViewWillAppear (bool animated)
    {
        base.ViewWillAppear (animated);

        this.mBL.OrderChanged += HandleOrderChanged;            
    }

    public override void ViewWillDisappear (bool animated)
    {
        base.VieWillDisappear (animated);
        if (this.mBL!=null)
          this.mBL.OrderChanged -= HandleOrderChanged;          
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:05:31.703

使用`ViewDidLoad`和`ViewDidUnload`，这些是从 UI 订阅/取消订阅事件的适当位置。

这是一篇关于 iOS 内存管理的一般文章，我认为适用于此处：[http ://www.buildingiphoneapps.com/buildingiphoneapps/2010/6/25/memory-management-and-viewdidunload.html](http://www.buildingiphoneapps.com/buildingiphoneapps/2010/6/25/memory-management-and-viewdidunload.html)

现在，如果您不想在视图不可见时运行事件，请在事件处理程序中执行以下操作：

```
if (IsViewLoaded && View.Window != null) {
  //code here
} 
```

我发现这是判断视图是否在屏幕上的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T02:22:58.567

我同意，最好的时间是在 ViewWillAppear/ViewWillDisappear，而不是 ViewDidUnload。

ViewDidUnload 在 iOS 6 之后被称为： [https ://developer.xamarin.com/api/member/UIKit.UIViewController.ViewDidUnload()/](https://developer.xamarin.com/api/member/UIKit.UIViewController.ViewDidUnload()/)

# c# - 在winforms treeview中设置第一个节点的位置/边距

> ID：10155283
> 
> 赞同：2
> 
> 时间：2012-04-14T16:31:56.447
> 
> 标签：c#, .net, winforms, treeview

我想`treeview`在 c# 中设置 winforms，以便我可以自定义树视图顶部和其中第一个节点之间的间距。我找不到任何财产。

有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:33:46.417

我不是 100% 确定，但我相信该`Padding`属性会将正确的间距放置在内部的第一个节点`TreeView`和`TreeView`自身之间。

因此，将其设置`Padding Top`为 10px 应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:15:05.960

我发现的唯一解决方法是将没有文本的节点添加为第一个节点。如果 ShowLines 为假，那么它看起来与我所要求的完全一样。

# java - 使用 MVP 模式

> ID：10155289
> 
> 赞同：4
> 
> 时间：2012-04-14T16:32:34.403
> 
> 标签：java, gwt, mvp, gwt-platform

我有这个使用 MVC 模式制作的 Web 应用程序，但是我正在尝试适应 MVP 模式。

我正在使用 GWTPlatform 库，我已经迁移了一些代码，主要是迁移`Presenter`到`View`. 但是，我还没有看到任何全面的材料来解释如何实际处理该`Model`部分。在我的 MVC 模式中，我在控制器中有模型（在 MVC 中），视图监听模型中的更改以更新视图。模型由控制器更新，例如`fireUpdateUser()`由于打开“用户页面”而触发函数，然后更新模型。

如果我已经有远程服务 RPC（例如 UserService、UserServiceImpl），我如何实际处理 MVP 中的模型；使用 Gwtplatform，我可以在演示者的 onReset() 函数中放置一个 RPC 调用，然后基本上执行`getView().getSomething().setValue(something)`更新关联的视图。在这种情况下，我根本不需要使用任何模型？另外，EventHandler 和活动的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:23:00.727

在您的服务中，您可以注入`DAO`处理您的数据（模型）的对象。您通常有一个接口及其实现。

```
public interface IMyDao {
    List<String> getAllObject();
}

public class MyDao implements IMyDao {
    public List<String> getAllObject() {
        List<String> os = new ArrayList<String>();
        // DB access or Datastore (Sample code)
        os = datastore.query(...);
        return os;
    }
} 
```

并为您服务

```
public class ServiceImpl implements Service {

  private final MyDao dao;

  @Inject
  public ServiceImpl(final MyDao dao) {
    this.dao = dao;
  }

  public List<String> getAllObject() {
    // Some processing
    return dao.getAllObject();
  }
} 
```

演示者将调用您的服务。所以工作流程是 Presenter -> Dao (Model) -> View（由 Presenter 更新）。

看看那[本电子书](http://code.google.com/p/gwt-gae-book/)，它会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:07:13.257

我建议你阅读这篇文章，它们描述了 GWTPlatform 的基本概念，以及使用它的示例：

*   [GWTP 平台入门](http://code.google.com/p/gwt-platform/wiki/GettingStarted)
*   [其他入门](http://uptick.com.au/content/getting-started-gwt-platform)
*   [关于 GWTP 的博客](http://arcbees.wordpress.com/category/development/gwt-platform/)

# c# - 在 Windows Phone 和 Skydrive 之间同步文件

> ID：10155294
> 
> 赞同：2
> 
> 时间：2012-04-14T16:33:01.503
> 
> 标签：c#, windows-phone-7, onedrive

是否有 API 或任何其他方式在 Windows Phone 和 SkyDrive 之间同步特定格式的文件？我试过只下载和上传文件，但它不能按我的意愿工作。我希望它们始终保持同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:39:16.180

是的。这里有几个关于这个主题的链接：http: [//windowsteamblog.com/windows_live/b/windowslive/archive/2011/12/07/skydrive-apis-for-docs-and-photos-now-ready-to-cloud -enable-apps-on-windows-8-windows-phone-and-more.aspx](http://windowsteamblog.com/windows_live/b/windowslive/archive/2011/12/07/skydrive-apis-for-docs-and-photos-now-ready-to-cloud-enable-apps-on-windows-8-windows-phone-and-more.aspx)

[http://www.itproportal.com/2011/12/13/microsoft-skydrive-api-now-available-third-party-windows-phone-apps/](http://www.itproportal.com/2011/12/13/microsoft-skydrive-api-now-available-third-party-windows-phone-apps/)

[http://www.windowsphonegeek.com/news/Using-SkyDrive-in-your-Windows-Phone-applications-part-1](http://www.windowsphonegeek.com/news/Using-SkyDrive-in-your-Windows-Phone-applications-part-1)

# css - 320 及以上框架 - 600 尺寸有什么用？

> ID：10155297
> 
> 赞同：0
> 
> 时间：2012-04-14T16:33:10.173
> 
> 标签：css, responsive-design

[320 及以上](http://stuffandnonsense.co.uk/projects/320andup/)的样式表：默认、480、600、768、992 和 1382px

*   默认设置为纵向模式下的 iPhone 风格设备
*   480 适用于横向模式下的 iPhone 式设备
*   768 适用于横向纵向模式下的 iPad 式平板电脑
*   992 适用于台式机/横向平板电脑
*   1382 用于桌面

哪个设备是 600 像素宽，设备的高度是多少。

对不起，如果这是一个愚蠢的问题。我查看了流行设备的尺寸，但找不到任何 600 像素宽的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:15:44.710

kindle Fire 是 600x1024 纵向和 1024x600 横向。[我只有在玩一个对测试http://www.responsinator.com/](http://www.responsinator.com/)有帮助的网站时才发现它

希望这可以帮助。

# python - Python ValueError：不允许提高最大限制

> ID：10155301
> 
> 赞同：12
> 
> 时间：2012-04-14T16:33:25.440
> 
> 标签：python, memory, stack-overflow

我在 mac os 10.7.3 上使用 python 2.7.2

我正在 python 中使用超过 50 000 个递归级别进行递归算法。

我试图将最大递归级别增加到 1 000 000，但我的 python shell 在 18 000 个递归级别后仍然退出。

我试图增加可用资源：

```
import resource 
resource.setrlimit(resource.RLIMIT_STACK, (2**29,-1))
sys.setrecursionlimit(10**6) 
```

我得到这个错误：

```
Traceback (most recent call last):
  File "<pyshell#58>", line 1, in <module>
    resource.setrlimit(resource.RLIMIT_STACK,(2**29,-1))
ValueError: not allowed to raise maximum limit 
```

我不知道为什么我不能提高最高限额？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T16:44:06.487

从python文档：

> 如果指定了无效资源，如果新的软限制超过硬限制，或者如果进程试图提高其硬限制（除非进程具有超级用户的有效 UID），则引发 ValueError。如果底层系统调用失败，也会引发错误。

由此我猜你尝试新的软限制太大了。您可能需要重写您的算法以进行迭代。Python 的设计并不是为了处理这样的大规模递归。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:25:37.003

虽然编写更有效的算法可能是一个更好的主意，但您可以通过以 root 身份运行 python 来提高硬限制（如文档中所述）。

如果您执行 as `root`，您实际上可以使用以下行将堆栈大小设置为无限制：

```
import resource
resource.setrlimit(resource.RLIMIT_STACK, (resource.RLIM_INFINITY, resource.RLIM_INFINITY)) 
```

# drupal-7 - 在 Drupal 7 中，如何使块在用户视图页面上可见，但在用户编辑页面上不可见？

> ID：10155305
> 
> 赞同：2
> 
> 时间：2012-04-14T16:33:52.927
> 
> 标签：drupal-7, hide, visibility, block

在 Drupal 7 中，我向用户页面的内容区域添加了一个块。我通过指定来做到这一点

`user/*`

在可见性设置 -> 页面 -> 在特定页面上显示块 -> 仅列出的页面设置。

但是，由于通配符接受任何内容，现在该块出现在用户的编辑页面上。

是否有单个数字通配符，例如

`user/%integer`

我可以在这里使用，以便该块仅出现在用户视图页面上？

如何在 Drupal 7 的用户编辑页面上隐藏此块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:43:29.223

您可以尝试启用 PHP 过滤器模块，以便您可以在阻止可见性设置页面输入 php。在那里你可以检查参数，如

```
<?php 
if(arg(0) == 'user' && arg(2) != 'edit' )
return true;
else 
return false 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T15:56:25.980

这些天，有另一种可用的替代方案......***它不需要启用 PHP 过滤器***（您应该尽可能避免）......只需使用[规则块可见性](https://www.drupal.org/project/rules_block_visibility)模块。这是其项目页面的引用：

> 规则块可见性模块允许使用[规则](https://www.drupal.org/project/rules)组件来控制块可见性。除了 Drupal 提供的默认可见性选项外，这为 Drupal 管理员和开发人员在控制何时应在其网站上显示块方面提供了极大的灵活性。
> 
> 一般的想法是，如果你可以使用规则来做到这一点，你就可以用它来控制块的可见性，所以可能性是无限的。
> 
> 只需要为一个多月前注册的用户显示一个块吗？
> 
> 也许您有一个只能在工作日上午 8 点到下午 5 点之间显示的块？
> 
> 根据当前天气状况显示或隐藏一个块怎么样？
> 
> 所有这些都可以通过使用规则块可见性来完成。

有了这个，并且根据上面的“*如果你可以使用规则来做到这一点，你可以使用它来控制块可见性*”，你已经将你的问题减少到让[规则](https://www.drupal.org/project/rules)拦截有人使用类似 URL 的情况`/user/*/edit`（在此处替换`*`为任何)的允许值`uid`。如果您不熟悉如何使用[Rules执行此操作，请查看我对“](https://www.drupal.org/project/rules)[如何使模块的权限更细化？](https://drupal.stackexchange.com/questions/182326) ”问题的回答（并注意示例中包含的 regex-expression我在那里包含的规则）。

# jquery - jQuery UI buttonset - 将按钮状态设置为活动

> ID：10155309
> 
> 赞同：1
> 
> 时间：2012-04-14T16:34:21.690
> 
> 标签：jquery, jquery-ui, uibutton

我有一个按钮集，其功能几乎类似于选项卡 - 单击按钮将显示一些相关内容。这很好，直到我需要直接链接到特定部分，所以我现在使用 jQuery 来获取页面的哈希标记并显示适当的内容，但我还想更改按钮的状态，以便清楚哪个一个被选中。

我试过使用`addClass('ui-state-active');`，虽然这完美地设置了按钮的状态，但这也意味着状态是持久的——如果你点击另一个按钮，那么两者都会被突出显示/激活。

**这是受影响问题的页面**- [https://secure.photofileltd.co.uk/new_site/index.php?page=services#scarringReports](https://secure.photofileltd.co.uk/new_site/index.php?page=services#scarringReports)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:49:21.620

您可以触发`click`按钮上的操作，而不是设置类。

```
if ($('.ui-state-active').length==0) {
    $('.your_buttons_class').first().click();
} 
```

# python - Python Lambda 计数/循环函数

> ID：10155315
> 
> 赞同：5
> 
> 时间：2012-04-14T16:34:52.973
> 
> 标签：python, lambda

如果这是其他地方回答的问题，我很抱歉。通过谷歌和 Stackforum 搜索，我没有找到任何可以推断答案的东西；但我觉得那是我的一部分。

我正在尝试将 lambdas 作为一个概念来解决，作为其中的一部分，我正在寻找使用它的方法。

所以，如果从函数的角度来看，这对 lambda 来说是一件非常愚蠢的事情，请随时告诉我并解释。但无论哪种方式，我仍然想知道答案/仍然想知道如何使用 python 语言来做到这一点。

因此，出于测试目的，我有：

```
my_test = 'test_name'
testlist = ['test_name', 'test_name_dup', 'test_name_dup_1', 'test_name_dup_3'] 
```

我希望使用 lambda 创建一个循环并返回不在测试列表中的第一个 test_name_# 的函数。该功能最终将应用于文件名，但出于测试目的，我不得不远离实际读取文件名——这给了我太多搞砸的方法。

但是 my_test 必须能够更改，并且测试列表将是文件路径列表。

所以，我正在寻找一个类似的功能：

```
new_name = lambda x: my_test + '_' + str(x) 
```

但是初始值应该是 x = 1，并且应该一直持续到 new_name 不在 testlist 中。似乎：

```
bool(new_name not in testlist) 
```

可能有用。

但我想不出一种将初始 x 设置为 1 的方法，并让它与 (x+1) 循环，直到 bool 为真。

我知道这是可能的，因为我发现了一些 CRAZY lambda 示例，它们在文件中的行中循环。我只是无法完全理解它们（并且没有任何方法可以与它们一起玩，因为它们正在处理我的编程水平之外的事情。

在相关说明中，我可以在此循环的开头添加值吗？（即我可以让它检查test_name，然后是test_name_dup，然后是test_name_dup_#）？

在此先感谢您的帮助！Lambdas（虽然很酷）完全弄乱了我的脑袋。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T17:14:36.007

Lambda 只是定义函数的另一种方式

```
def foo(x):
    return x + x 
```

是相同的

```
foo = lambda x: x + x 
```

所以让我们从一个函数开始做你想做的事：

```
def first_missing(items, base):
    for number in itertools.count():
        text = base + '_' + str(number)
        if text not in items:
             return text 
```

首先要注意的是，您不能在 lambda 中使用循环。所以我们需要在没有循环的情况下重写它。相反，我们将使用递归：

```
def first_missing(items, base, number = 0):
        text = base + '_' + str(number)
        if text not in items:
             return text
        else:
             return first_missing(items, base, number + 1) 
```

现在，我们也不能在 lambda 中使用 if/else 块。但是我们可以使用三元表达式：

```
def first_missing(items, base, number = 0):
        text = base + '_' + str(number)
        return text if text not in items else first_missing(items, base, number + 1) 
```

我们不能在 lambda 中包含局部变量，所以我们将使用一个技巧，默认参数：

```
def first_missing(items, base, number = 0):
        def inner(text = base + '_' + str(number)):
            return text if text not in items else first_missing(items, base, number + 1)
        return inner() 
```

此时我们可以将 inner 重写为 lambda：

```
def first_missing(items, base, number = 0):
        inner = lambda text = base + '_' + str(number): text if text not in items else first_missing(items, base, number + 1)
        return inner() 
```

我们可以结合两行来摆脱内部局部变量：

```
def first_missing(items, base, number = 0):
    return (lambda text = base + '_' + str(number): text if text not in items else first_missing(items, base, number + 1))() 
```

最后，我们可以将整个事情变成一个 lambda：

```
first_missing = lambda: items, base, number = 0: (lambda text = base + '_' + str(number): text if text not in items else first_missing(items, base, number + 1))() 
```

希望这能让您对自己能做什么有所了解。但是永远不要这样做，因为正如您所知，lambda 会使您的代码非常难以阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:42:59.870

在这种情况下不需要使用 a `lambda`，一个简单的`for`循环就可以了：

```
my_test  = 'test_name_dup'  
testlist = ['test_name', 'test_name_dup','test_name_dup_1', 'test_name_dup_3']

for i in xrange(1, len(testlist)):
    if my_test + '_' + str(i) not in testlist:
        break

print my_test + '_' + str(i)
> test_name_dup_2 
```

如果您真的非常想使用 a`lambda`来解决这个问题，您还必须了解 itertools、迭代器、过滤器等。我将以 thg435 的答案为基础，以更惯用的方式编写并解释它：

```
import itertools as it

iterator = it.dropwhile(
    lambda n: '{0}_{1}'.format(my_test, n) in testlist,
    it.count(1))

print my_test + '_' + str(iterator.next())
> test_name_dup_2 
```

理解上述解决方案的关键在于[`dropwhile()`](http://docs.python.org/library/itertools.html#itertools.dropwhile)过程。它有两个参数：一个谓词和一个迭代，并返回一个迭代器，只要谓词为真，它就会从迭代中删除元素；之后，返回每个元素。

对于可迭代对象，我传递`count(1)`了一个迭代器，它产生从 开始的无限数量的整数`1`。

然后`dropwhile()`开始消耗整数，直到谓词为假；这是传递内联定义函数的好机会 - 这是我们的`lambda`. 它依次接收每个生成的整数，检查字符串 test_name_dup_# 是否存在于列表中。

当谓词返回时`false`，`dropwhile()`返回，我们可以通过调用它来检索使其停止的值`next()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:51:50.383

您可以将 lambda 与 itertools.dropwhile 结合使用：

```
import itertools
n = itertools.dropwhile(lambda n: 'test_name_dup_%d' % n in testlist, range(1, len(testlist))).next() 
```

至于你的最后一个问题，你可以为名字写一个生成器，比如：

```
def possible_names(prefix):
    yield prefix
    yield prefix + '_dup'
    n = 0
    while True:
        n += 1
        yield '%s_dup_%d' % (prefix, n) 
```

然后将此生成器与 dropwhile 一起使用：

```
unique_name = itertools.dropwhile(lambda x: x in testlist, possible_names('test_name')).next()
print unique_name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T16:59:11.200

你有点偏离轨道。Lambda 只不过是“简单”函数，通常用于函数式编程中的快速语法。它们是完美的配套内置函数“map”、“reduce”、“filter”，也适用于定义在[itertools](http://docs.python.org/library/itertools.html)中的更复杂的函数。因此，对它们最有用的事情是生成/操作可迭代对象（尤其是列表）。请注意，与列表推导/正常循环相比，在大多数情况下，lambda 会减慢您的代码速度，并且会使其更难阅读。这是您想要使用 lambda 执行的操作的示例。

```
>>> filter(lambda i: i!=(0 if len(testlist[i].split("_"))==3 else int(testlist[i].split("_")[-1])), range(len(testlist)))[0]
2 
```

或者您可以使用 itertools 使用更复杂的功能。无论如何，我强烈建议您不要将 lambdas 用于此类作业，因为可读性很差。我宁愿使用结构良好的 for 循环，它也更快。

**[编辑]**

为了证明 lambdas+builtins 并不比列表推导更快：考虑一个简单的问题，对于 x in range(1000) 创建一个 x 移动 5 的列表。

$ python -m timeit 'map(lambda x: x>>5, range(1000))' 1000 个循环，最好的 3 个：每个循环**225 微秒**

$ python -m timeit '[x>>5 for x in range(1000)]'10000 次循环，最好的 3 次：每个循环**99.1 微秒**

在没有 lambda 的情况下，您的性​​能提升 >100%。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T17:16:42.870

我更喜欢列表推导或迭代器方法。使我觉得很容易阅读和维护的一个衬里变得容易。坦率地说，lambdas 属于某些地方，在这里我相信它是一个不太优雅的解决方案。

```
my_test = 'test_name'
prefix = 'test_name_dup_'
testlist = ['test_name','test_name_dup','test_name_dup_1','test_name_dup_3']

from itertools import count
print next('%s%d' % (prefix, i) for i in count(1) if '%s%d' % (prefix, i) not in testlist) 
```

这将返回序列中第一个未找到的实例，我认为这是最干净的。

当然，如果您更喜欢某个范围内的列表，您可以将其修改为列表推导式：

```
print ['%s%d' % (prefix, i) for i in xrange(0,5) if '%s%d' % (prefix, i) not in testlist] 
```

返回：

```
['test_name_dup_0', 'test_name_dup_2', 'test_name_dup_4'] 
```

# php - 如何验证应用程序是否正在进行服务器调用？

> ID：10155316
> 
> 赞同：3
> 
> 时间：2012-04-14T16:34:58.507
> 
> 标签：php, android, security

我有一个需要经常连接到服务器以检索或添加数据库敏感数据的 android 应用程序。我需要验证从应用程序对服务器的调用，所以我使用了这种方法：[如何从服务器验证客户端的身份？](https://stackoverflow.com/questions/6082240/how-to-verify-the-identity-of-the-client-from-the-server)它包含在服务器中验证的应用程序中的硬编码字符串键。但后来我意识到有像 dex2jar 这样的工具，可以显示我所有的代码（即使有一些来自 proguard 的混淆），特别是这个硬编码的密钥。

有没有更优雅和安全的方法来验证服务器调用是从我的应用程序发出的？

PS：对不起英语，显然我不是母语人士。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:22:51.467

如果它只是您的客户端和服务器，您可以（并且应该）使用相互验证的 SSL 而无需购买任何东西。您控制服务器和客户端，因此每个人都应该只信任一个证书，一个属于另一个证书，并且您不需要为此目的的 CA。

这是高级方法。创建一个自签名服务器 SSL 证书并部署在您的 Web 服务器上。为此，您可以使用 Android SDK 中包含的 keytool。然后创建一个自签名客户端并将其部署在您的应用程序中作为资源包含在您的应用程序中的自定义密钥库中（keytool 也会生成它）。将服务器配置为要求客户端 SSL 身份验证并仅接受您生成的客户端证书。将客户端配置为使用该客户端证书来标识自己，并且只接受您在服务器上安装的一个服务器端证书用于该部分。

一步一步的回答比这里保证的要长得多。我建议分阶段执行此操作，因为网络上有关于如何在服务器端和客户端处理 Android 中的自签名 SSL 证书的资源。O'Reilly 出版的我的书《Android 平台的应用程序安全性》中也有完整的演练。

您通常会将该证书/私钥存储在某种类型的密钥库中（如果您使用的是 Android，则为密钥库），并且该密钥库将被加密。该加密基于密码，因此您需要 (1) 将该密码存储在客户端中的某个位置，或者 (2) 在用户启动客户端应用程序时询问用户密码。您需要做什么取决于您的用例。如果 (2) 是可以接受的，那么您已经保护了您的凭证免受逆向工程的影响，因为它将被加密并且密码不会存储在任何地方（但用户每次都需要输入它）。如果您这样做 (1)，那么有人将能够对您的客户端进行逆向工程、获取密码、获取密钥库、解密私钥和证书，并创建另一个能够连接到服务器的客户端。

您无法采取任何措施来防止这种情况发生；你可以使你的代码更难逆向工程（通过混淆等），但你不能让它变得不可能。您需要确定使用这些方法试图减轻的风险是什么，以及需要做多少工作来减轻风险。

# visual-studio-2010 - 计算搜索字符串 MVC 3 的结果？

> ID：10155319
> 
> 赞同：0
> 
> 时间：2012-04-14T16:35:06.460
> 
> 标签：visual-studio-2010, asp.net-mvc-3, linq, search, controller

我正在使用 MVC3 并在我的控制器中完成了搜索工具。我使用了模型优先方法，我希望能够允许用户搜索数据中包含给定关键字的结果。如果没有与搜索词匹配的内容，则显示相应的消息。如果有匹配的故事：显示一条消息，如“7 个项目符合您的搜索条件：'XXXXX'”

任何帮助将不胜感激，谢谢

会是这样，但使用 ViewBag 显示消息吗？

```
if (!String.IsNullOrEmpty(SearchString))
                   News = News.Where(s => s.Headline.Count(SearchString));

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:38:03.823

您需要`string.Contains`用于部分字符串匹配：

```
var matchingResults = News.Where(s => s.Headline.Contains(searchString));
int count = matchingResults.Count();
if(count == 0)
{
   //no matches
}
else
{ 
   //display message
} 
```

# javascript - 向脚本添加更多孩子

> ID：10155320
> 
> 赞同：-3
> 
> 时间：2012-04-14T16:35:16.747
> 
> 标签：javascript, jquery, button, click, toggle

我有一个很酷的脚本，可以使用两个按钮。我需要添加三个按钮作为选项，总共五个按钮。

是否必须重新编写整个脚本或者我可以添加更多的 DIV 类？不知道如何接近。为此工作了几天...

这是我的链接：http: [//jsfiddle.net/9cr4F/9/](http://jsfiddle.net/9cr4F/9/)

HTML：

```
<div id="r6">    

<div class="bx bx1">6</div>
<div id="sp"></div>
<div class="bx bx2">Gender</div>
<div id="sp"></div>
<div id="bxGender">
<input type="button" class="gnM" >
<div id="sp"></div>
<input type="button" class="gnF">
<div id="sp"></div>
<input class="req-string gender"  id="gender" name="gender"></div>

</div> 
```

CSS：

```
#r6 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
}

.bx {
    height:60px;
    line-height:60px;
    float:left;
    font-size:105%;
    margin-top:15px;
    color: #000;
    background-color: #E8E8E8
}
.bx1 {
    width:60px;
    text-align:center
}
.bx2 {
    width:175px;
    padding-left:20px
}
#sp {
    width:  15px;
    height:60px;
    float:left;
}
.gnM {
    width:137px;
    height: 60px;
    background:#E8E8E8 url('http://www.41q.org/admin/img/male.png') 0px 0px no-repeat;
    margin-top:0px;
    padding: 0;
    border: 0;
    margin-left: 0px;
    float: left;
    outline: none;
    text-align:center;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 105%;
    font-style:normal;
    color:#03F;
}
.gnF {
    width:137px;
    height: 60px;
    background:#E8E8E8 url('http://www.41q.org/admin/img/female.png') 0px 0px no-repeat;
    margin-top:0px;
    padding: 0;
    border: 0;
    margin-left: 0px;
    float: left;
    outline: none;
    text-align:center;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 105%;
    font-style:normal;
    color:#03F;
}
#r6 #bxGender .button-toggle-on {
    background-position: 0 -120px
}
#bxGender {
    width:486px;
    height:60px;
    float:left;
    margin-top:15px
}

#r6:hover div.bx, #r6:hover input {background-color: #A9A9A9; cursor:pointer}
#r6:hover .gnM, #r6:hover .gnF {background-position: 0 -60px; cursor:pointer} 
```

jQuery：

```
$(function() {
    var $buttons = $("input[type='button']");
    $buttons.click(function() {

        $(this).parent().siblings('.bx, #bxGender .gender').css({'background':'#2F2F2F','color':'#fff'});
        $buttons.not(this).removeClass('button-toggle-on');
        $(this).toggleClass('button-toggle-on').attr('style','');

        var varval = '';
        if ($(this).hasClass('button-toggle-on')) {
            varval = $(this).hasClass('gnF') ? 'Female' : 'Male';
            $(this).siblings('input[type="button"]').css('background-position','0 -180px');
        }
        else {
              $(this).siblings('input[type="button"]').attr('style','');
           $(this).parent().siblings('.bx').attr('style','');
        }
        $("#gender").val(varval);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:21:20.027

您需要的第一件事是要验证的标记，目前不是，文档中的 ID 必须是唯一的，所以当您这样做时

```
<div id="sp"></div> 
```

你应该做

```
<div class="sp"></div> 
```

并尝试让克隆很好地嵌套，即使它在这里复制得很糟糕，有时它也有助于在这里和那里只有几个空格:)

如果您的 CSS 适用于多个元素，请不要在您的 CSS 中重复相同的属性，例如我重组了您的 gnF 和 gnM 类，因此所有属性都在一起，只有背景图像属性是分开的。

```
.gnM, 
.gnF, 
.gnA {
    background:#E8E8E8 0px 0px no-repeat; 
    text-indent:-10000px;
    width:137px;
    height: 60px;
    margin-top:0px;
    padding: 0;
    border: 0;
    margin-left: 0px;
    float: left;
    outline: none;
    text-align:center;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 105%;
    font-style:normal;
    color:#03F;
}
.gnA {
    background-image:url('http://www.41q.org/admin/img/alien.png');   
}
.gnM {
    background-image:url('http://www.41q.org/admin/img/male.png');   
}
.gnF {
    background-image:url('http://www.41q.org/admin/img/female.png');
} 
```

您可以通过使用按钮上的 value 属性来简化 jquery 端，如果您设置文本缩进则文本不会显示，然后您可以使用 $(this).val(); 简单地检索值；

```
$(function() {

    var $buttons = $("input[type='button']"),
        varval;

    $buttons.click(function() {

        // this should be done using a class to keep the js cleaner
        $(this).parent().siblings('.bx, #bxGender .gender').css({
            'background': '#2F2F2F',
            'color': '#fff'
        });

        $buttons.removeClass('button-toggle-on');
        $(this).addClass('button-toggle-on');

        $("#gender").val($(this).val());
    });
});​ 
```

这为您提供了更大的灵活性，因为您可以拥有任意数量的按钮，但是如果您正在构建一个具有多行的表单，看起来，我建议您也使用一个包含结果的输入类并修改值分配，以便它获取最接近的结果输入并更新它，这样它就适用于所有行。

这是修改后的小提琴[http://jsfiddle.net/9cr4F/14/](http://jsfiddle.net/9cr4F/14/) - 第三个按钮样式当然是搞砸了，但我相信它会给你你需要的东西:)

编辑：优化 CSS 多一点 编辑 2：优化 jquery 代码并将背景定位移动到类 button-toggle-on ，因为它在需要应用背景位置时处于打开状态。

# android - Android - 从活动切换到列表活动

> ID：10155321
> 
> 赞同：0
> 
> 时间：2012-04-14T16:35:25.470
> 
> 标签：android, android-activity, android-intent, listactivity

我是 android 编程新手，想知道如何使用意图从活动中启动 listactivity。

我已将我的类定义为 android 清单文件中的一个活动，并在我的 xml 文件的 listactivity 中包含一个 listview。

每当我单击按钮开始我的列表活动时，我都会收到错误消息“不幸的是，主要活动已停止”。

当我的课程扩展活动（而不是 listactivity）时，应用程序可以工作，但是我无法使用我需要的 listAdapter。

这是我的代码示例：

```
 Button timedevents = (Button) findViewById(R.id.button2);
   timedevents.setOnClickListener(new View.OnClickListener() {        
   public void onClick(View v) {            
        Intent myIntent = new Intent(MainActivity.this, TimedEvents.class);
        startActivity(myIntent);
   } 
```

谢谢你抽出时间来帮助，亲切的问候，杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:48:11.513

通过这里的例子：http: [//developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

可能错误即将到来，因为您没有使用列表 Activity 所需的列表视图的 ID`@android:id/list"`例如，上述链接中的 xml 文件具有：

```
<ListView android:id="@android:id/list"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#00FF00"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/>

     <TextView android:id="@android:id/empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#FF0000"
               android:text="No data"/> 
```

简而言之，您必须使用`"@android:id/list"`和`"@android:id/empty"`

# java - 在整个应用程序上全局捕获键盘组合以在 Java 中显示隐藏的 JDialog

> ID：10155324
> 
> 赞同：0
> 
> 时间：2012-04-14T16:35:59.597
> 
> 标签：java, swing, global, keyboard-events

我将在我的应用程序中创建一个隐藏的对话框，该对话框可以通过键盘组合（例如五个连续**`Ctrl`++ `Shift`）`i`**可见。
如何在整个应用程序上全局捕获键盘组合笔画？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:51:04.603

[`FullScreenTest`](https://stackoverflow.com/a/7457102/230513)是一个示例，展示了如何在此上下文中使用`Action`和[*键绑定。*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)您可以替换`KeyEvent.VK_I`和相关的`KeyStroke`修饰符。你的动作监听器可以记录它被触发的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:58:19.907

我通过定义一个来解决它`DispatcherListener`：

```
class DispatcherListener implements KeyEventDispatcher{
    private int level=0;

    public boolean dispatchKeyEvent(KeyEvent e) {
        if(e.getID() == KeyEvent.KEY_RELEASED){
            if(e.isControlDown() && e.isShiftDown()){
                if(this.level==0 && e.getKeyCode()==KeyEvent.VK_S){
                    level++;
                }else if(this.level==1 && e.getKeyCode()==KeyEvent.VK_H){
                    level++;
                }else if(this.level==2 && e.getKeyCode()==KeyEvent.VK_O){
                    level++;
                }else if(this.level==3 && e.getKeyCode()==KeyEvent.VK_W){
                    level=0;
                    this.showHiddenWindow((JFrame)SwingUtilities.getRoot(e.getComponent()));
                }else{
                    level=0;
                }

                //System.out.println( "level: " +  level );
            }
        }
        return false;
    } 
```

并将其用作：

```
 KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
    manager.addKeyEventDispatcher( new DispatcherListener()); 
```

谢谢你们

# asp.net - Url.Action 未使用所需的输出路径

> ID：10155325
> 
> 赞同：3
> 
> 时间：2012-04-14T16:36:07.807
> 
> 标签：asp.net, asp.net-mvc-3, url-routing

我的 MVC3 网站中有以下路由定义：

```
routes.MapRoute(
                "FB", // Route name
                "fb/{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ).RouteHandler = new RH();

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

我的自定义“RH”处理程序的代码是

```
public class RH : MvcRouteHandler
    {
        protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
        {
            //here I store somewhere that 'fb' prefix is used, so logic is different in some places
            return base.GetHttpHandler(requestContext);
        }
    } 
```

我想要实现的是，当使用“fb”子路径前缀访问我的网站时，我的网站逻辑执行方式会有所不同。

问题是，当我正常访问我的网站时（例如[http://localhost](http://localhost)），然后当我执行

```
Url.Action('action' 'controller') 
```

，则输出为“http://localhost/fb/controller/action”。

我想实现的是，当我的网站使用 'fb' 前缀子路径访问时，我的 Url.Action 调用输出 /fb/controller/action 路径，如果我正常访问网站（没有 'fb' 前缀子路径），那么Url.Action 调用输出 /controller/action

最主要的是，/fb/controller/actions 必须路由到与通过 /controller/action 格式访问站点时相同的控制器/动作。

当我使用“fb”前缀时，只需要“fb”路由来存储一些临时信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:53:47.987

似乎我找到了一个基于此链接的解决方案（[MVC 3 Routing and Action Links not following expected contextual Route](https://stackoverflow.com/questions/9997412/mvc-3-routing-and-action-links-not-following-expected-contextual-route)），引入了新的路径占位符并添加了约束。

也许它还不够好，或者你知道的比这更好，但似乎对我有用：

```
routes.MapRoute(
        "FB", // Route name
        "{path}/{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
        new { path = "fb" }
).RouteHandler = new RH();

routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

# actionscript-3 - ActionScript3：从父级继承构造函数参数

> ID：10155326
> 
> 赞同：0
> 
> 时间：2012-04-14T16:36:12.270
> 
> 标签：actionscript-3, flash-cs5

我正在使用动作脚本 3 制作游戏。在其中，我有一个角色类，玩家和敌人类将从该类派生。我这样做是为了除非我需要提供特定的 AI 或花哨的行为（例如针对老板），否则我可以在库中为每个敌人制作一个新剪辑，而无需制作动作脚本文件。

但是，我遇到了一个问题。

每当我尝试将参数传递给敌人的构造（使其产生更多健康）时，我都会收到错误 1136（参数数量不正确。）

这是因为在运行时自动创建的构造函数没有与其父类相同的参数。有没有办法解决这个问题，而无需创建一个类文件，在其中为数百个敌人中的每一个复制和粘贴父构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:09:46.037

**编辑** 实际上重读您的问题，我认为您可能正在寻找 super();

例子

```
public class Actor{
 private var myHelth:uint;
     public function Actor(helth:uint = 100){
         myHelth = helth; //this will be set to 100 if nothing it passed in or the value passed
    }
} 
```

扩展 Actor 的类：

```
public class Boss extends Actor{
     public function Boss(){
          super(200); //passes 200 to Actor;
     }
} 
```

如果您尝试将数据传递给类构造函数，则需要确保它接受参数。

```
public class Actor{
     private var myHelth:uint;
     public function Actor(helth:uint = 100){
         myHelth = helth; //this will be set to 100 if nothing it passed in or the value passed
     }
} 
```

然后使用

```
 var a:Actor = new Actor(200); //setting health to 200

 var b:Actor = new Actor(); //using the default of 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:17:39.493

确保 Flash Pro 中的符号具有适当的 AS 链接，然后在 super 语句中使用传递构造函数参数：

演员 - 基类

```
package
{

    public class Actor
    {
        public function Actor(name:String, role:String)
        {
        }
    }
} 
```

Player - 继承自定义自己的构造函数参数的 Actor：

```
package
{

    public final class Player extends Actor
    {
        public function Player(... params:Array)
        {
            // pass desired inherited constructor parameters
            super("name", "role");
        }
    }
} 
```

Enemy - 从定义自己的构造函数参数的 Actor 继承：

```
package
{

    public final class Enemy extends Actor
    {
        public function Enemy(... params:Array)
        {
            // pass desired inherited constructor parameters
            super("name", "role");
        }
    }
} 
```

# php - sagepay curl 请求

> ID：10155327
> 
> 赞同：0
> 
> 时间：2012-04-14T16:36:14.777
> 
> 标签：php, curl, payment-gateway, opayo

我想通过我的网站处理付款，并希望为此目的使用 sagepay。我已经完成了此处提到的 sagepay go 直接集成指南：http: [//www.sagepay.com/sites/default/files/pdf/user_guides/sagepaydirectprotocolandintegrationguidelines_0.pdf](http://www.sagepay.com/sites/default/files/pdf/user_guides/sagepaydirectprotocolandintegrationguidelines_0.pdf) 现在，我创建了一个脚本，对处理http请求的字段。这是代码：

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'https://live.sagepay.com/gateway/service/vspdirect-register.vsp';
$txcode = 'prefix_' . time() . rand(0, 9999);
$fields = array(
                        'VPSProtocol'=>urlencode("2.23"),
                        'TxType'=>urlencode("PAYMENT"),
                        'Vendor'=>urlencode("myvendorname"),
                        'VendorTxCode'=>urlencode($txcode),
                        'Amount'=>urlencode("2.00"),
                        'Currency'=>urlencode("GBP"),
                        'Description'=>urlencode("payment for my site"),
                        'CardHolder'=>urlencode('DELTA'),
                        'CardNumber'=>urlencode(4929000000006),
                        'ExpiryDate'=>urlencode(1213),
                        'CV2'=>urlencode(123),
                        'CardType'=>urlencode('VISA'),
                        'BillingSurname'=>urlencode('surname'),
                        'BillingFirstnames'=>urlencode('name'),
                        'BillingAddress1'=>urlencode(' clifton'),
                        'BillingCity'=>urlencode('Bristol'),
                        'BillingPostCode'=>urlencode('BS82UE'),
                        'BillingCountry'=>urlencode('United Kingdom'),
                        'DeliverySurname'=>urlencode('surname'),
                        'DeliveryFirstnames'=>urlencode('name'),
                        'DeliveryAddress1'=>urlencode(' clifton'),
                        'DeliveryCity'=>urlencode('Bristol'),
                        'DeliveryPostCode'=>urlencode('bs82ue'),
                        'DeliveryCountry'=>urlencode('united kingdom'),

                );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);
print_r($result);
echo "end";
//close connection
curl_close($ch);
?> 
```

但我没有得到任何回复..可能是什么问题？它在 wamp 服务器和非 https url 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:52:11.070

这段代码对我有用。我添加了一些 CURL 函数并删除了一个，这就成功了。

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'https://live.sagepay.com/gateway/service/vspdirect-register.vsp';
$txcode = 'prefix_' . time() . rand(0, 9999);
$fields = array(
                        'VPSProtocol'=>urlencode("2.23"),
                        'TxType'=>urlencode("PAYMENT"),
                        'Vendor'=>urlencode("myvendorname"),
                        'VendorTxCode'=>urlencode($txcode),
                        'Amount'=>urlencode("2.00"),
                        'Currency'=>urlencode("GBP"),
                        'Description'=>urlencode("payment for my site"),
                        'CardHolder'=>urlencode('DELTA'),
                        'CardNumber'=>urlencode(4111111111111111),
                        'ExpiryDate'=>urlencode(1213),
                        'CV2'=>urlencode(123),
                        'CardType'=>urlencode('VISA'),
                        'BillingSurname'=>urlencode('surname'),
                        'BillingFirstnames'=>urlencode('name'),
                        'BillingAddress1'=>urlencode(' clifton'),
                        'BillingCity'=>urlencode('Bristol'),
                        'BillingPostCode'=>urlencode('BS82UE'),
                        'BillingCountry'=>urlencode('United Kingdom'),
                        'DeliverySurname'=>urlencode('surname'),
                        'DeliveryFirstnames'=>urlencode('name'),
                        'DeliveryAddress1'=>urlencode(' clifton'),
                        'DeliveryCity'=>urlencode('Bristol'),
                        'DeliveryPostCode'=>urlencode('bs82ue'),
                        'DeliveryCountry'=>urlencode('united kingdom'),

                );

//url-ify the data for the POST
$fields_string = http_build_query($fields);

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_HEADER, 0);

//execute post
$result = curl_exec($ch);
print_r($result);
echo "end";
//close connection
curl_close($ch);
?> 
```

仅供参考，使用[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)非常适合构建 query_strings。

```
$fields_string = http_build_query($fields); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T01:43:39.773

如果您添加字段，此代码将起作用

```
Crypt='Your encryption password in your account setting in sagepay test'; 
```

但是如果您使用 curl 发布它会返回空字符串，并且它将被重定向到

```
https://test.sagepay.com/gateway/service/cardselection?vpstxid={BDBF098F-9BB5-3822-8CAE-AC0645A2CC57} 
```

如果您使用 Http POST。

祝你好运

# android - 如何显示 GPS 信号强度和精度？安卓

> ID：10155328
> 
> 赞同：0
> 
> 时间：2012-04-14T16:36:32.270
> 
> 标签：android, gps, signals, status

我想做一个简单的活动，打开并显示 GPS 信号强度和准确性。我了解您使用：

```
locationManager.getGpsStatus(); 
```

和

```
location.getAccuracy(); 
```

此活动将显示在“首选项菜单”中（我将有一个显示“GPS 信号状态”的首选项 - 它可以向用户显示基本的信号强度和准确性。

但是，我发现很难实施。我已经创建了一个显示用户位置的谷歌地图活动。我只是希望它在此首选项中显示状态，为用户提供“高级”功能。

干杯，

祖基。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:26:51.680

每次触发 onLocationChanged() 时，都会从位置填充准确度字段，它不能“按需”使用。连续修复之间的准确性可能会有很大差异。向用户传达此信息的常用方法是在显示的地图顶部叠加一个半径等于精度的半透明圆形叠加层。

“信号强度”不是可以从某个位置获得的场。**如果您在活动中实现NmeaListener**并编写自己的 NMEA 解析器来提取数据，您可以获得与每个卫星的 SNR 对应的字段和“质量”度量。[NMEA 记录在此处](http://www.gpsinformation.org/dale/nmea.htm)列出。

# c - 如何读到 /proc 文件的末尾

> ID：10155329
> 
> 赞同：1
> 
> 时间：2012-04-14T16:36:39.627
> 
> 标签：c, linux-kernel, proc

我有 /proc 文件。我不明白读取功能的一些论点。读取函数如下所示：

```
int procfile_read(char *buffer,  char **buffer_location,  off_t offset, int buffer_length, int *eof, void *data) 
```

我不知道如何使用偏移参数。

一些示例使用这样的偏移参数：

```
if (offset > 0)
return 0; 
```

他们解释说：这很重要，因为库中的标准读取函数将继续发出读取系统调用，直到内核回复它没有更多信息，或者直到它的缓冲区被填满。

我有一个大于缓冲区的文件。我怎样才能读到文件的末尾？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:05:32.040

请参阅[proc_file_read](http://lxr.linux.no/linux+v3.3.2/fs/proc/generic.c#L41)函数实现，尤其是注释：

```
 74                        /*
  75                         * How to be a proc read function
  76                         * ------------------------------
  77                         * Prototype:
  78                         *    int f(char *buffer, char **start, off_t offset,
  79                         *          int count, int *peof, void *dat)
  80                         *
  81                         * Assume that the buffer is "count" bytes in size.
  82                         *
  83                         * If you know you have supplied all the data you
  84                         * have, set *peof.
  85                         *
  86                         * You have three ways to return data:
  87                         * 0) Leave *start = NULL.  (This is the default.)
  88                         *    Put the data of the requested offset at that
  89                         *    offset within the buffer.  Return the number (n)
  90                         *    of bytes there are from the beginning of the
  91                         *    buffer up to the last byte of data.  If the
  92                         *    number of supplied bytes (= n - offset) is 
  93                         *    greater than zero and you didn't signal eof
  94                         *    and the reader is prepared to take more data
  95                         *    you will be called again with the requested
  96                         *    offset advanced by the number of bytes 
  97                         *    absorbed.  This interface is useful for files
  98                         *    no larger than the buffer.
  99                         * 1) Set *start = an unsigned long value less than
 100                         *    the buffer address but greater than zero.
 101                         *    Put the data of the requested offset at the
 102                         *    beginning of the buffer.  Return the number of
 103                         *    bytes of data placed there.  If this number is
 104                         *    greater than zero and you didn't signal eof
 105                         *    and the reader is prepared to take more data
 106                         *    you will be called again with the requested
 107                         *    offset advanced by *start.  This interface is
 108                         *    useful when you have a large file consisting
 109                         *    of a series of blocks which you want to count
 110                         *    and return as wholes.
 111                         *    (Hack by Paul.Russell@rustcorp.com.au)
 112                         * 2) Set *start = an address within the buffer.
 113                         *    Put the data of the requested offset at *start.
 114                         *    Return the number of bytes of data placed there.
 115                         *    If this number is greater than zero and you
 116                         *    didn't signal eof and the reader is prepared to
 117                         *    take more data you will be called again with the
 118                         *    requested offset advanced by the number of bytes
 119                         *    absorbed.
 120                         */ 
```

# android - 如何防止服务因未捕获的异常而被 Android 杀死？

> ID：10155330
> 
> 赞同：1
> 
> 时间：2012-04-14T16:36:40.507
> 
> 标签：android, android-service, android-anr-dialog, uncaughtexceptionhandler

我正在调查是否有任何方法可以防止 android 服务因未捕获的异常而被杀死。
我们有 10 个 UI 应用程序与 5-6 个服务通信。该平台是Android 2.2。
由于不可预见的情况，服务中的一些逻辑不时抛出异常。这导致这些服务被那些烦人的 ANR 弹出窗口杀死。在我们致力于解决这些异常的根本原因的解决方案时，我希望防止 Android 终止有问题的服务。

看起来我可以为服务中的所有线程注册未捕获的默认异常处理程序。这只是让我有机会记录有关异常的信息。那很好。我遇到了许多使用这种技术将崩溃信息记录到文件以供以后使用的帖子。人们建议不要抛出原始异常以防止 ANR 弹出。我还发现一些文章表明它可以让你的服务处于半死状态。正确的做法是终止服务并重新启动。杀死和重新启动不是我感兴趣的选项。

如果您不抛出异常，我不太了解半死状态部分。我要进一步调查。同时我想知道人们是否有建议。
我的目标是防止 ANR 弹出窗口。**我希望我的代码决定是否重新启动服务，而不是由 Android 框架为我决定。**

我很好奇的是：
1）清单中是否有任何标志可以更改以防止服务被框架代码杀死？

2) 是否有任何方法可以在服务中覆盖，让您处理未捕获的异常，但仍然让服务线程返回等待状态以等待来自客户端的下一个请求？

感谢您的建议。

视频人

**更新**：
未捕获的默认异常处理程序在这里没有帮助。它让你有机会记录一些东西，但服务线程仍然退出。

您需要更改 android 框架，以便它不会杀死进程。android 框架中的 ActivityManagerService.java 有不同的阈值，服务可以在没有任何客户端的情况下运行多长时间，您可以拥有多少后台活动/服务，服务超时和 ui 初始化。我们提高了这些价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:53:32.017

开发人员帮助防止其服务被终止的一种常见方法是使用持久通知（在通知栏中），这通常通过设置进行切换。因此，如果用户在系统终止服务时遇到问题，他们可以打开通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:48:31.190

> 清单中是否有任何标志可以更改以防止服务被框架代码杀死？

不。

> 是否有任何方法可以在服务中覆盖，让您处理未捕获的异常，但仍然让服务线程返回等待状态以等待来自客户端的下一个请求？

不。

# winforms - ZedGraph 中的 ToolTip 不断刷新并使用大量 CPU

> ID：10155334
> 
> 赞同：2
> 
> 时间：2012-04-14T16:37:03.470
> 
> 标签：winforms, zedgraph

我正在使用 ZedGraph 来显示日本蜡烛。我设置了GraphPane.isShowPointValue=true，但是当我将鼠标移到蜡烛上时，工具提示是令人耳目一新的。

我发现当显示工具提示时，它总是占用超过 50% 的 CPU 时间。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-25T13:40:57.313

此时有一个更新版本的 ZedGraph 可以解决这个问题。目前 v5.1.7 [https://www.nuget.org/packages/ZedGraph/](https://www.nuget.org/packages/ZedGraph/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T09:20:08.900

当用户开始迁移到 Win 7 时，我在几年前为 Win XP 开发的应用程序中遇到了同样的问题。

上面提到的路径对我没有帮助，所以我写了快速而肮脏的解决方法：

```
 double prevMouseX = 0; // for storing  previos cursor position
    double prevMouseY = 0; //  

    private bool ZedGraphControl1MouseMoveEvent(ZedGraphControl sender, MouseEventArgs e)
    {

               PointF mousePt = new PointF( e.X, e.Y );
               GraphPane pane = sender.MasterPane.FindChartRect( mousePt );

               if ( pane != null ) 
               {
                  double x, y;
                  pane.ReverseTransform( mousePt, out x, out y );

                  if ((x == prevMouseX) && (y == prevMouseY))                      
                  {                                                                 
                      // Do nothing if the mouse position didn't change      
                      return false;                                      
                  }                                                      
                  else {                                                 
                      prevMouseX = x;                                   
                      prevMouseY = y;                                    
                  }                                                     

                  // Our code for toolTip goes here              

                  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:48:26.530

看看这个，这个链接中描述的补丁可能会解决这个问题：

[http://sourceforge.net/tracker/?func=detail&aid=3061209&group_id=114675&atid=669144](http://sourceforge.net/tracker/?func=detail&aid=3061209&group_id=114675&atid=669144)

# opengl - 获取 GLSL Frag Shader 的值不正确

> ID：10155338
> 
> 赞同：0
> 
> 时间：2012-04-14T16:37:22.860
> 
> 标签：opengl, glsl, shader, opengl-3, fragment-shader

我正在做一个简单的 OpenGL 4 项目。我要做的就是改变鼠标指针周围的 alpha 值并混合。经过一些工作，我设法得到一个圆圈来更改值，但它是静态的（不随鼠标移动）并且以（0,512）为中心，非常不是我的鼠标位置。我通过passiveMotionFunc发送鼠标值：

```
void
motion ( int x, int y)
{
    MousePos.x = x;
    MousePos.y = y;
    printf("x=%i\ny=%i\n\n", x, y);
    glUniform2fv(glGetUniformLocation(program, "MousePos"), 2, MousePos);
    glutPostRedisplay();
} 
```

MousePos 只是一个简单的浮动容器。我有打印语句，所以我可以看到我的鼠标位置的值。

我的碎片着色器很简单：

```
in  vec4 color;
in  vec4 vPosition;
in vec2 MousePos;
out vec4 fColor;

void
main()
{
        //float x = gl_FragCoord.X;
        //float y = gl_FragCoord.Y;
        float distance = sqrt(pow(MousePos.x-gl_FragCoord.x, 2) + pow(MousePos.y-gl_FragCoord.y, 2));
        if(distance > 30)
            fColor = color;
        else{
            float a = .1;
            fColor = color;
            fColor.a = a;
        }
} 
```

我完全坚持这一点。我假设碎片着色器没有得到更新的鼠标坐标，因为如果 FragCoord 被搞砸了，它就不会产生一个圆圈。

编辑：我在 main() 中的 glutDisplay 和 glutPassiveFunc 之前的 init() 函数中设置了我的混合。

```
void
init()
{
    wall();
    redwall();
    // Create a vertex array object
    GLuint vao;
    glGenVertexArrays( 1, &vao );
    glBindVertexArray( vao );

    // Create and initialize a buffer object
    GLuint buffer;
    glGenBuffers( 1, &buffer );
    glBindBuffer( GL_ARRAY_BUFFER, buffer );
    glBufferData( GL_ARRAY_BUFFER, sizeof(points) + sizeof(quad_colors), NULL, GL_STATIC_DRAW );

    glBufferSubData( GL_ARRAY_BUFFER, 0, sizeof(points), points );

    glBufferSubData( GL_ARRAY_BUFFER, sizeof(points), sizeof(quad_colors), quad_colors );

    // Load shaders and use the resulting shader program
    program = InitShader( "p6v.glsl", "p6f.glsl" );
    glUseProgram( program );

    // set up vertex arrays
    GLuint vPosition = glGetAttribLocation( program, "vPosition" );
    glEnableVertexAttribArray( vPosition );
    glVertexAttribPointer( vPosition, 4, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(0) );

    GLuint vColor = glGetAttribLocation( program, "vColor" ); 
    glEnableVertexAttribArray( vColor );
    glVertexAttribPointer( vColor, 4, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(sizeof(points)) );

    //glEnable(GL_DEPTH_TEST);
    glEnable( GL_BLEND );
    glEnable( GL_ALPHA_TEST);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glDepthMask(false);

    glClearColor( 0.0, 0.5, 1.0, 1.0 );
} 
```

EDIT2：这是我的 vec2 定义：

```
struct vec2 {

    GLfloat  x;
    GLfloat  y;

    //
    //  --- Constructors and Destructors ---
    //

    vec2( GLfloat s = GLfloat(0.0) ) :
    x(s), y(s) {}

    vec2( GLfloat x, GLfloat y ) :
    x(x), y(y) {}

    vec2( const vec2& v )
    { x = v.x;  y = v.y;  }

    //
    //  --- Indexing Operator ---
    //

    GLfloat& operator [] ( int i ) { return *(&x + i); }
    const GLfloat operator [] ( int i ) const { return *(&x + i); }

    //
    //  --- (non-modifying) Arithematic Operators ---
    //

    vec2 operator - () const // unary minus operator
    { return vec2( -x, -y ); }

    vec2 operator + ( const vec2& v ) const
    { return vec2( x + v.x, y + v.y ); }

    vec2 operator - ( const vec2& v ) const
    { return vec2( x - v.x, y - v.y ); }

    vec2 operator * ( const GLfloat s ) const
    { return vec2( s*x, s*y ); }

    vec2 operator * ( const vec2& v ) const
    { return vec2( x*v.x, y*v.y ); }

    friend vec2 operator * ( const GLfloat s, const vec2& v )
    { return v * s; }

    vec2 operator / ( const GLfloat s ) const {
#ifdef DEBUG
    if ( std::fabs(s) < DivideByZeroTolerance ) {
        std::cerr << "[" << __FILE__ << ":" << __LINE__ << "] "
              << "Division by zero" << std::endl;
        return vec2();
    }
#endif // DEBUG

    GLfloat r = GLfloat(1.0) / s;
    return *this * r;
    }

    //
    //  --- (modifying) Arithematic Operators ---
    //

    vec2& operator += ( const vec2& v )
    { x += v.x;  y += v.y;   return *this; }

    vec2& operator -= ( const vec2& v )
    { x -= v.x;  y -= v.y;  return *this; }

    vec2& operator *= ( const GLfloat s )
    { x *= s;  y *= s;   return *this; }

    vec2& operator *= ( const vec2& v )
    { x *= v.x;  y *= v.y; return *this; }

    vec2& operator /= ( const GLfloat s ) {
#ifdef DEBUG
    if ( std::fabs(s) < DivideByZeroTolerance ) {
        std::cerr << "[" << __FILE__ << ":" << __LINE__ << "] "
              << "Division by zero" << std::endl;
    }
#endif // DEBUG

    GLfloat r = GLfloat(1.0) / s;
    *this *= r;

    return *this;
    }

    //
    //  --- Insertion and Extraction Operators ---
    //

    friend std::ostream& operator << ( std::ostream& os, const vec2& v ) {
    return os << "( " << v.x << ", " << v.y <<  " )";
    }

    friend std::istream& operator >> ( std::istream& is, vec2& v )
    { return is >> v.x >> v.y ; }

    //
    //  --- Conversion Operators ---
    //

    operator const GLfloat* () const
    { return static_cast<const GLfloat*>( &x ); }

    operator GLfloat* ()
    { return static_cast<GLfloat*>( &x ); }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:09:29.820

您需要将 MousePos 声明为 a`uniform`才能将其作为一个传递。您的片段着色器已将其声明为“in”。

此外，您正在使用矢量统一上传`glUniform2fv`从您的 vec2 类实例 MousePos 加载。您应该以 2-arg 形式加载它`glUniform2f`。该`glUniform2fv`表单正在寻找一个参数，该参数是一个指向 2 个浮点值块的指针作为其最后一个参数。您将它传递到`MousePos`那里，这是一个实际的类实例，并且您指望您的铸造操作员来完成这项工作。

# php - 防止PHP脚本被淹没

> ID：10155339
> 
> 赞同：2
> 
> 时间：2012-04-14T16:37:27.113
> 
> 标签：php, limit, execution

我想防止我的脚本被淹没 - 如果用户按 F5，它每次都在执行脚本。

我想防止这种情况并允许每 2 秒执行一个脚本，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T16:50:10.763

您可以使用 memcache 来执行此操作..

简单的演示脚本

```
$memcache = new Memcache ();
$memcache->connect ( 'localhost', 11211 );
$runtime = $memcache->get ( 'floodControl' );

if ((time () - $runtime) < 2) {
    die ( "Die! Die! Die!" );
} 

else {
    echo "Welcome";
    $memcache->set ( "floodControl", time () );
} 
```

这只是一个示例代码.. 还有其他事情需要考虑，例如

A. 更好的`IP`地址检测（Proxy、Tor）

B. 当前行动

C. 每分钟最大执行次数等...

D. 最大洪水等后禁止用户

**编辑 1 - 改进版**

用法

```
$flood = new FloodDetection();
$flood->check();

echo "Welcome" ; 
```

班级

```
class FloodDetection {
    const HOST = "localhost";
    const PORT = 11211;
    private $memcache;
    private $ipAddress;

    private $timeLimitUser = array (
            "DEFAULT" => 2,
            "CHAT" => 3,
            "LOGIN" => 4 
    );
    private $timeLimitProcess = array (
            "DEFAULT" => 0.1,
            "CHAT" => 1.5,
            "LOGIN" => 0.1 
    );

    function __construct() {
        $this->memcache = new Memcache ();
        $this->memcache->connect ( self::HOST, self::PORT );
    }

    function addUserlimit($key, $time) {
        $this->timeLimitUser [$key] = $time;
    }

    function addProcesslimit($key, $time) {
        $this->timeLimitProcess [$key] = $time;
    }

    public function quickIP() {
        return (empty ( $_SERVER ['HTTP_CLIENT_IP'] ) ? (empty ( $_SERVER ['HTTP_X_FORWARDED_FOR'] ) ? $_SERVER ['REMOTE_ADDR'] : $_SERVER ['HTTP_X_FORWARDED_FOR']) : $_SERVER ['HTTP_CLIENT_IP']);
    }

    public function check($action = "DEFAULT") {
        $ip = $this->quickIP ();
        $ipKey = "flood" . $action . sha1 ( $ip );

        $runtime = $this->memcache->get ( 'floodControl' );
        $iptime = $this->memcache->get ( $ipKey );

        $limitUser = isset ( $this->timeLimitUser [$action] ) ? $this->timeLimitUser [$action] : $this->timeLimitUser ['DEFAULT'];
        $limitProcess = isset ( $this->timeLimitProcess [$action] ) ? $this->timeLimitProcess [$action] : $this->timeLimitProcess ['DEFAULT'];

        if ((microtime ( true ) - $iptime) < $limitUser) {
            print ("Die! Die! Die! $ip") ;
            exit ();
        }

        // Limit All request
        if ((microtime ( true ) - $runtime) < $limitProcess) {
            print ("All of you Die! Die! Die! $ip") ;
            exit ();
        }

        $this->memcache->set ( "floodControl", microtime ( true ) );
        $this->memcache->set ( $ipKey, microtime ( true ) );
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T16:39:40.807

1.  将脚本的最后执行时间存储在数据库或文件中。
2.  从该文件/数据库中读取并与当前时间进行比较。
3.  如果差值小于 2 秒，则终止脚本。
4.  否则，继续正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T16:43:09.717

您可以使用 cookie（可以禁用）所以这不是一个好主意，或者您可以使用将他的 IP 地址存储在数据库中，所以如果 X 尝试从同一个 IP 地址尝试更多，则不要执行代码，只是一个if else 语句，您将需要一个包含请求时间、尝试次数的 ip 地址表

如果您不想使用数据库，那么您可以使用以下代码

```
$file = "file.txt";
$file_content = file_get_contents($file);
$fh = fopen($file, 'w') or die("could not open file");
$now = time();
if($now - $file_content > 60){
// your code here
fwrite($fh, $now);
}else{
echo "Try again later";
}
fclose($fh); 
```

但在这种情况下，它不是针对每个访问者，而是针对所有访问者（假设用户 A 来执行脚本，用户 B 将无法执行它，直到 60 秒过去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:43:56.630

最好的方法是将时间存储在服务器端。如果您将信息留在客户端，则很容易绕过。

例如，我会将时间戳保存在表中。该输入并检查是否向您的脚本发送垃圾邮件。并且很容易设置公差。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T18:07:27.940

使用 apc 缓存或 mencache 将信息存储到数据库或从文件中读取我认为是时间/资源消耗

# javascript - 如何在默认情况下禁用提交按钮，直到它的文本区域输入 1 个或更多字符？

> ID：10155340
> 
> 赞同：3
> 
> 时间：2012-04-14T16:37:29.333
> 
> 标签：javascript, jquery, jquery-selectors, submit-button

目前，当文本区域集中在它上面时，它会扩展它的高度，并且会出现发布和取消按钮。现在我想默认禁用提交按钮，并且只有在输入文本区域后才将其激活。

稍后，我将为非活动提交按钮添加不透明度，然后在按钮处于活动状态时将其移除，以达到良好的效果。但无论如何，我已经尝试过多种方式应用禁用，但它不起作用。我尝试了其他各种方法，例如定义单击功能以及提交然后使用 attr() 将禁用应用到我的表单的禁用属性，它似乎没有效果。

**HTML**

```
 <div class="comment_container">
                    <%= link_to image_tag(default_photo_for_commenter(comment), :class => "commenter_photo"), commenter(comment.user_id).username %>

                    <div class="commenter_content"> <div class="userNameFontStyle"><%= link_to commenter(comment.user_id).username.capitalize, commenter(comment.user_id).username %> - <%=  simple_format h(comment.content) %> </div>
                </div><div class="comment_post_time"> <%= time_ago_in_words(comment.created_at) %> ago. </div>

           </div>

                    <% end %>
                <% end %>

            <% if logged_in? %>
            <%= form_for @comment, :remote => true do |f| %>
            <%= f.hidden_field :user_id, :value => current_user.id %>
            <%= f.hidden_field :micropost_id, :value => m.id %>
            <%= f.text_area :content, :placeholder => 'Post a comment...', :class => "comment_box", :rows => 0, :columns => 0 %>

    <div class="commentButtons">         
      <%= f.submit 'Post it', :class => "commentButton" %>
   <div class="cancelButton"> Cancel </div>
    </div>   
            <% end %>

            <% end %> 
```

**查询：**

```
$(".microposts").on("focus", ".comment_box", function() {
    this.rows = 7;

    var $commentBox = $(this),
        $form = $(this).parent(),
        $cancelButton = $form.children(".commentButtons").children(".cancelButton");
       // $commentButton = $form.children(".commentButtons").children(".commentButton");
            $(this).removeClass("comment_box").addClass("comment_box_focused").autoResize();  
            $form.children(".commentButtons").addClass("displayButtons");

                $cancelButton.click(function() {
                    $commentBox.removeClass("comment_box_focused").addClass("comment_box");
                    $form.children(".commentButtons").removeClass("displayButtons");
                    $commentBox.val("");

                });

}); 
```

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T16:56:32.237

设置 disabled 属性不起作用，因为如果 disabled 属性存在，则无论该属性的值如何，该字段都会被禁用。您可以使用，但操作更直观的*属性*`.removeAttr("disabled")`确实最有意义- 它只是一个布尔值。`disabled`

 *```
$commentButton.prop({ disabled: !$commentBox.val()); 
```

为了安全起见，绑定到`onkeyup`、`oninput`和`onchange`：

```
$commentBox.on("keyup input change", function () {
    $commentButton.prop({ disabled: !$commentBox.val() });
}); 
```

如果您需要手动启用或禁用按钮，例如清除表单后，您可以通过`true`或`false`直接调用`.prop()`.

```
$commentButton.prop({ disabled: true }); 
```

* * *

**编辑：**详细分类

## `.prop()`方法_

该[`.prop()`方法](http://api.jquery.com/prop)获取和设置元素的属性值，类似于`.attr()`获取和设置元素的属性值。

考虑到这个 jQuery：

```
var myBtn = $("#myBtn");
myBtn.prop("disabled", true); 
```

我们可以像这样用普通的 JavaScript 重写它：

```
var myBtn = document.getElementById("myBtn");
myBtn.disabled = true; 
```

## 为什么我们不需要`if`声明

我们不需要`if`声明的原因是该`disabled`属性采用布尔值。我们*可以*在语句中放置一个布尔表达式`if`，然后根据结果分配一个不同的布尔表达式作为属性的值：

```
if (someValue == true) {
    myObj.someProperty = false;
}
else {
    myObj.someProperty = true;
} 
```

第一个问题是`if`语句中的冗余： `if (someValue == true)`可以缩短为`if (someValue)`. [其次，可以使用逻辑非运算符 ( `!`)](http://msdn.microsoft.com/en-us/library/zz722703%28VS.94%29.aspx)将整个块缩短为单个语句：

```
myObj.someProperty = !someValue; 
```

逻辑非运算符 ( `!`) 返回表达式的否定结果 - 即`true`“假”值和`false`“真”值。如果您不熟悉“真实”和“虚假”的价值观，这里有一个快速入门。任何时候您在需要布尔值的地方使用非布尔值时，该值都会被强制转换为布尔值。评估为的值`true`被称为“真实”，评估为的值`false`被称为“虚假”。

```
类型 假值 真值
 ——————————————————————————————————————————————————————
 数字 0, NaN 任何其他数字
 String "" 任何非空字符串
 Object null, undefined 任何非空对象

```

由于空字符串的计算结果为 false，我们可以通过应用`!`该值来获得一个布尔值，指示文本区域中是否有任何文本：

```
var isEmpty = !$commentBox.val(); 
```

或者，用于`!!`进行双重否定并有效地将字符串值强制为布尔值：

```
var hasValue = !!$commentBox.val(); 
```

我们可以用纯 JavaScript 将上面的 jQuery 重写为更详细的形式：

```
var myBtn = document.getElementById("myBtn");
var myTextBox = document.getElementById("myTextBox");
var text = myTextBox.value;
var isEmpty = !text;
if (isEmpty) {
    myBtn.disabled = true;
}
else {
    myBtn.disabled = false;
} 
```

或者，更短一点，更类似于原版：

```
var myBtn = document.getElementById("myBtn");
var myTextBox = document.getElementById("myTextBox");
myBtn.disabled = !myTextBox.value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:44:20.700

你可以试试这个：

```
var submit = $("input[type=submit]");
submit.attr("disabled","disabled");

$('textarea.comment_box').keyup(function() {
    if ( !$(this).val() ) {
       submit.attr("disabled","disabled");
    } else {
       submit.removeAttr("disabled");
    }
}); 
```

这是一个 JS Fiddle，您可以尝试一下：http: [//jsfiddle.net/leniel/a2BND/](http://jsfiddle.net/leniel/a2BND/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:52:38.440

您可以先禁用提交按钮，如果 textarea 有值则启用它：

```
<form id="yourForm">
<textarea id="ta"></textarea>
<input id="submit" type="submit" disabled="disabled">    
<form> 

$("#yourForm").change(function() {

  if ( $("#ta").val().length >= 1) {

    $("#submit").removeAttr("disabled"); 
  }

  else {

    $("input").attr("disabled", "disabled");

  }              

}); 
```

[http://jsfiddle.net/dY8Bg/2/](http://jsfiddle.net/dY8Bg/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:51:44.747

您可以使用文本区域上的 keyup 事件来完成此任务。下面的示例概念代码。

```
$("#textareaid").on('keyup', function (e) {
     Count_Chars(this);
});

function Count_Chars(obj) {
    var len = obj.value.length;
    if (len >= 1) {
        // do task
        // enable post button
    }
} 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T19:37:18.213

将此添加到现有代码中以完成我想要的。将最能帮助我的答案标记为获胜答案，并标记其他有帮助的答案。

```
commentButton = form.children(".commentButtons").children(".commentButton");

       commentButton.attr("disabled","disabled");

        commentBox.keyup(function() {
            if ( !$(this).val() ) {
               commentButton.attr("disabled","disabled");
            } else {
               commentButton.removeAttr("disabled");
            }
        }); 
```*

# arrays - D编程语言中的空字符串

> ID：10155342
> 
> 赞同：4
> 
> 时间：2012-04-14T16:37:54.467
> 
> 标签：arrays, string, d

D编程语言中的空字符串是什么？

字符串是字符数组（[http://dlang.org/arrays.html#strings](http://dlang.org/arrays.html#strings)）
可能：`alias immutable(char)[] string`

基于那个*空字符串*应该是一个*空数组*。但是，*空数组*是什么东西呢？

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T17:11:05.197

任何（非静态）数组本质上是一个结构体，它带有指向包含数组的内存块的开头和长度

一个空数组只有长度==0

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T00:20:50.273

空`string` *是*一个空数组。它是一个空数组类型`immutable(char)[]`。空数组是长度为 0 的数组。我不明白这有什么难理解的。

无论如何，如果您想更好地理解 D 中的数组，那么您应该阅读[这篇文章](http://dlang.org/d-array-article.html)。这是每个 D 程序员都应该阅读的内容之一，并且应该让您更好地理解 D 中的数组。

# html - 自动高度 div 溢出并在需要时滚动

> ID：10155344
> 
> 赞同：59
> 
> 时间：2012-04-14T16:38:14.737
> 
> 标签：html, css, scroll, overflow

我正在尝试制作一个没有垂直滚动页面的网站，但我需要其中一个 DIV 我必须垂直扩展到页面底部（最多），并且当它的内容不适合时, div 应该创建一个垂直滚动条。

我已经在[这个小提琴](http://jsfiddle.net/CdN7L/92/)中找到了 div*内部*的 css，在需要时创建滚动条。我还想出了[如何使](http://jsfiddle.net/CcKnJ/)容器 div 增长到完全占据它在页面中的垂直空间。我就是不能让他们一起锻炼！

请记住，在 jsfiddle 中，您将无法查看整个网站的内容，从这个意义上说，您从第二个小提琴中获得的内容并不能真正显示正在做的事情，但它可以按我的意图工作。

只是另一个注意事项：由于它们是不同的小提琴，第一个小提琴中的 id#container div 是第二个示例的 id#dcontent div。

还有一件事：对于一种内容，此 div 将垂直滚动，但对于其他类型的内容，我希望它水平滚动，因为它将有一个产品“滑块”在此 DIV 内水平显示元素。

还请看这张照片，因为它可能更容易理解我想说的：[图片](http://i39.tinypic.com/cu5u9.jpg)

我试图寻找有关这些主题的其他问题，但似乎没有一个涵盖我试图解决的所有方面......：S

如果还有什么我可以提供来帮助你/我:)弄清楚，请告诉我！

谢谢！

EDIT1：修正错别字

EDIT2：添加图片进行说明

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2017-08-18T22:08:29.430

我很惊讶还没有人提到`calc()`。

我无法从你的小提琴中找出你的具体情况，但我理解你的问题：你想要一个`height: 100%`仍然可以使用`overflow-y: auto`.

这不是开箱即用的，因为`overflow`需要一些硬编码的大小约束才能知道它应该何时开始处理溢出。因此，如果您使用`height: 100px`，它会按预期工作。

好消息是[可以`calc()`提供帮助](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)，但并不像`height: 100%`.

`calc()`允许您组合任意度量单位。

因此，对于您在图片中描述的情况，您包括：[![理想状态的图片](../Images/cd6cbbaf2f1a8dfee9791b9453c47056.png)](https://i.stack.imgur.com/bh1CS.jpg)

由于粉红色 div 上方和下方的所有元素都具有已知高度（比如说，`200px`总高度），您可以使用`calc`来确定 ole pinky 的高度：

`height: calc(100vh - 200px);`

或者，“高度是视图高度的 100% 减去 200 像素。”

然后，`overflow-y: auto`应该像魅力一样工作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-15T16:55:54.000

好吧，经过长时间的研究，我找到了一种解决方法，可以满足我的需要：http: [//jsfiddle.net/CqB3d/25/](http://jsfiddle.net/CqB3d/25/)

CSS：

```
body{
    margin: 0;
    padding: 0;
    border: 0;
    overflow: hidden;
    height: 100%; 
    max-height: 100%; 
}

#caixa{
    width: 800px;
    margin-left: auto;
    margin-right: auto;
}
#framecontentTop, #framecontentBottom{
    position: absolute; 
    top: 0;   
    width: 800px; 
    height: 100px; /*Height of top frame div*/
    overflow: hidden; /*Disable scrollbars. Set to "scroll" to enable*/
    background-color: navy;
    color: white; 
}

#framecontentBottom{
    top: auto;
    bottom: 0; 
    height: 110px; /*Height of bottom frame div*/
    overflow: hidden; /*Disable scrollbars. Set to "scroll" to enable*/
    background-color: navy;
    color: white;
}

#maincontent{
    position: fixed; 
    top: 100px; /*Set top value to HeightOfTopFrameDiv*/
    margin-left:auto;
    margin-right: auto;
    bottom: 110px; /*Set bottom value to HeightOfBottomFrameDiv*/
    overflow: auto; 
    background: #fff;
    width: 800px;
}

.innertube{
    margin: 15px; /*Margins for inner DIV inside each DIV (to provide padding)*/
}

* html body{ /*IE6 hack*/
    padding: 130px 0 110px 0; /*Set value to (HeightOfTopFrameDiv 0 HeightOfBottomFrameDiv 0)*/
}

* html #maincontent{ /*IE6 hack*/
    height: 100%; 
    width: 800px; 
} 
```

HTML：

```
<div id="framecontentBottom">
    <div class="innertube">
        <h3>Sample text here</h3>
    </div>
</div>
<div id="maincontent">
    <div class="innertube">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed scelerisque, ligula hendrerit euismod auctor, diam nunc sollicitudin nibh, id luctus eros nibh porta tellus. Phasellus sed suscipit dolor. Quisque at mi dolor, eu fermentum turpis. Nunc posuere venenatis est, in sagittis nulla consectetur eget... //much longer text...
    </div>
</div> 
```

可能还不能与水平的东西一起使用，但是，它正在进行中！

我基本上放弃了“inception” box-inside-boxes-inside-boxes 模型，并使用具有动态高度和溢出属性的固定定位。

希望这可能对以后发现问题的人有所帮助！

编辑：这是最终答案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-05-09T18:54:30.417

**快速回答要点**

与@Joum 的最佳选择答案几乎相同，以加快您尝试获得已发布问题的答案的任务，并节省解读语法中发生的事情的时间——

**回答**

将位置属性设置为固定，将顶部和底部属性设置为您希望与其父元素相比具有“自动”大小的元素或 div，然后将溢出设置为隐藏。

```
.YourClass && || #YourId{
   position:fixed;
   top:10px;
   bottom:10px;
   width:100%; //Do not forget width
   overflow-y:auto;
} 
```

哇啦！这就是您希望根据屏幕大小和/或动态传入内容具有动态高度同时保持滚动机会的特殊元素所需的全部内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-17T13:59:51.407

您可以**仅**使用**flexboxes**和**`overflow`property**来做到这一点。

即使**也计算了父身高**。

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/61844861/5598194)或**[JSFiddle](http://jsfiddle.net/z51t6pa3/)**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T02:52:31.970

试试这个：
CSS：

```
#content {
  margin: 0 auto;
  border: 1px solid red;
  width:800px;
  position:absolute;
  bottom:0px;
  top:0px;
  overflow:auto
} 
```

HTML：

```
<body>
<div id="content">
...content goes here...
</div>
<body> 
```

如果您在这种情况下不喜欢绝对定位，则可以尝试为此创建一个父子 div，两者都使用`position:relative`.

编辑：下面应该可以工作（我暂时将css内联）：

```
<div style="margin:0 auto; width:800px; height:100%; overflow:hidden">
<div style="border: 1px solid red; width:800px; position:absolute; bottom:0px; top:0px; overflow:auto">
...content goes here...
</div>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-05T03:54:06.907

这就是我到目前为止所做的。我想这就是你想要拔出的东西。唯一的问题是我仍然无法为容器 DIV 分配适当的高度。

[JSFIDDLE](https://jsfiddle.net/zqjM8/78/)

的HTML：

```
<div id="container">
    <div id="header">HEADER</div>
    <div id="fixeddiv-top">FIXED DIV (TOP)</div>
    <div id="content-container">
        <div id="content">CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT<br>CONTENT</div>
    </div>
    <div id="fixeddiv-bottom">FIXED DIV (BOTTOM)</div>
</div> 
```

和CSS：

```
html {
    height:100%;
}
body {
    height:100%;
    margin:0;
    padding:0;
}
#container {
    width:600px;
    height:50%;
    text-align:center;
    display:block;
    position:relative;
}
#header {
    background:#069;
    text-align:center;
    width:100%;
    height:80px;
}
#fixeddiv-top {
    background:#AAA;
    text-align:center;
    width:100%;
    height:20px;
}
#content-container {
    height:100%;
}
#content {
    text-align:center;
    height:100%;
    background:#F00;
    margin:0 auto;
    overflow:auto;
}
#fixeddiv-bottom {
    background:#AAA;
    text-align:center;
    width:100%;
    height:20px;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-31T08:27:53.167

这是一个使用 FlexBox 的水平解决方案，没有讨厌的`absolute`定位。

```
body {
  height: 100vh;
  margin: 0;
  display: flex;
  flex-direction: row;
}

#left,
#right {
  flex-grow: 1;
}

#left {
  background-color: lightgrey;
  flex-basis: 33%;
  flex-shrink: 0;
}

#right {
  background-color: aliceblue;
  display: flex;
  flex-direction: row;
  flex-basis: 66%;
  overflow: scroll;   /* other browsers */
  overflow: overlay;  /* Chrome */
}

.item {
  width: 150px;
  background-color: darkseagreen;
  flex-shrink: 0;
  margin-left: 10px;
}
```

```
<html>

<body>
  <section id="left"></section>
  <section id="right">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
  </section>
</body>

</html>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-01T09:21:49.673

```
.content {
   height: auto;
   max-height: 785px;
   overflow-y: auto;
} 
```

我认为这也应该有效。仅当`.content`div 内容呈现超过 的值时，div 才会显示滚动条`max-height`。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-19T18:00:25.077

```
$(document).ready(function() {
//Fix dropdown-menu box size upto 2 items but above 2 items scroll the menu box
    $("#dropdown").click(function() {
        var maxHeight = 301;
        if ($(".dropdown-menu").height() > maxHeight) { 
            maxHeight = 302;
            $(".dropdown-menu").height(maxHeight);
            $(".dropdown-menu").css({'overflow-y':'scroll'});
        } else {
            $(".dropdown-menu").height();
            $(".dropdown-menu").css({'overflow-y':'hidden'});
        }
    });
});
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2012-05-02T11:22:07.267

我认为这很容易。只需使用这个 css

```
.content {
   width: 100%;
   height:(what u wanna give);
   float: left;
   position: fixed;
   overflow: auto;
   overflow-y: auto;
   overflow-x: none;
} 
```

在此之后，只需将这个课程交给你的 div，就像 -

```
<div class="content">your stuff goes in...</div> 
```

# algorithm - 名称分组算法

> ID：10155345
> 
> 赞同：1
> 
> 时间：2012-04-14T16:38:16.463
> 
> 标签：algorithm, grouping

对这个名称列表进行分组的好方法是什么：

```
Doctor Watson.
Dr. John Watson.
Dr. J Watson.
Watson.
J Watson.
Sherlock.
Mr. Holmes.
S Holmes.
Holmes.
Sherlock Holmes. 
```

进入唯一和完整名称的分组列表：

```
Dr. John Watson.
Mr. Sherlock Holmes. 
```

也很有趣：

```
Mr Watson
Watson
Mrs Watson
Watson
John Watson 
```

由于该算法不需要推断第一个 Watson 是 Mr（可能）还是 Mrs，而只需要对它们进行唯一分组，因此这里唯一的问题是 John Watson 显然属于 Mrs 而不是 Mrs Watson。如果没有每个性别的名字字典，就无法推断出这一点。

到目前为止，我已经考虑过遍历列表并检查每个项目与剩余项目。在每场比赛中，您分组并从头开始，并在没有分组发生的第一次通过时停止。

这是一些粗略的（仍然未经测试的）Python。你会用一个名字列表来调用它。

```
def groupedNames(ns):
    if len(ns) > 1:
        # First item is query, rest are target names to try matching
        q = ns[0]
        # For storing unmatched names, passed on later
        unmatched = []
        for i in range(1,len(ns)):
            t = ts[i]
            if areMatchingNames(q,t):
                # groupNames() groups two names into one, retaining all info
                return groupedNames( [groupNames(q,t)] + unmatched + ns[i+1:] )
            else:
                unmatched.append(t)
    # When matching is finished
    return ns 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:47:11.787

如果您的姓名始终采用 形式`[honorific][first name or initial]LastName`，那么您可以从按姓氏提取和排序开始。如果某些名称具有 形式`LastName[,[honorific][first name or initial]]`，您可以解析它们并转换为第一种形式。或者，您可能希望将所有内容转换为其他形式。

在任何情况下，您都可以将名称放入某种规范形式，然后按姓氏排序。你的问题大大减少了。然后，您可以在姓氏组中按名字和敬语排序，然后依次浏览它们以从片段中提取完整的名字。

正如您所指出的，您必须解决一些歧义。例如，您可能有：

```
John Watson
Jane Watson
Dr. J. Watson 
```

没有足够的信息来说明两者中的哪一个（如果有的话！）是医生。而且，正如您所指出的，如果没有有关姓名性别的信息，您将无法解析`Mr. J. Watson`or `Mrs. J. Watson`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:04:49.233

我建议在这里使用散列。将哈希函数定义为将名称解释为以 26 为基数的数字，其中 a = 0 和 z = 25 现在只需对单个单词进行哈希处理。所以

h（福尔摩斯）= h（夏洛克）+ h（福尔摩斯）= h（福尔摩斯）+ h（夏洛克）。

使用它，您可以轻松识别名称，例如：

约翰·沃森和沃森·约翰

对于像 Dr. John Watson 和 Mr John Watson 这样的歧义，您可以将 Mr 和 Dr 的哈希值定义为相同。

要解决像 J. Watson 和 John Watson 这样的冲突，您可以只对第一个字母和姓氏进行哈希处理。您可以扩展类似冲突的想法。

# haskell - 我应该使用哪个容器？

> ID：10155356
> 
> 赞同：1
> 
> 时间：2012-04-14T16:39:15.717
> 
> 标签：haskell

我是haskell的新手，所以我试图在haskell中重新创建以下C++代码。

```
int main() {
    class MyClass {
        public:
        int a;
        std::string s;
        float f;
    };
    std::vector <MyClass> v;
    LoadSerialized(&v); // don't need haskell equivalent; just reads a bunch of MyClass's and pushes them back onto v
} 
```

现在，我查看了 haskell 中可能用作 std::vector 的各种容器：有列表、未装箱的向量、装箱的向量，以及一些奇怪的外来指针用法，如下所示：

```
data Table = Table { floats :: ForeignPtr CFloat
                   , ints   :: ForeignPtr Int    }

newTable :: IO Table
newTable = do
    fp <- S.mallocByteString (floatSize * sizeOf (undefined :: CFloat))
    ip <- S.mallocByteString (intSize   * sizeOf (undefined :: Int   ))
    withForeignPtr fp $ \p ->
        forM_ [0..floatSize-1] $ \n ->
            pokeElemOff p n pi
    withForeignPtr ip $ \p ->
        forM_ [0..intSize-1]   $ \n ->
            pokeElemOff p n n
    return (Table fp ip) 
```

现在，我可以以我认为最好的方式来实现 C++ 代码——成为一个 Haskell 新手。或者我可以问那些对语言更有经验的人最好的方法是什么，因为对我来说，这里似乎有一些我错过了的细微差别。简单地说，我想将一个包含许多数据类型的结构推送到一个 haskell 容器中，我不关心顺序。如果有帮助，我会将序列化数据读入容器，如您所见`LoadSerialized`。

我没有混入 C++ 代码。

（编辑：stackoverflow 政策是否允许通过编辑（不是次要的）审查问题？它确实说“始终尊重原作者。”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:50:46.180

~~如果你在 Haskell 中编写整个程序，~~除非你有充分的理由不这样做，否则只使用一个列表。（如果您确实有充分的理由不这样做，请说出它是什么，我们可以帮助您选择更合适的数据结构。例如，对特定列表元素的随机访问是 O(n) 而不是 O(1) C++ 向量和更新数据结构中的值在 Haskell 中是不同的。）

~~如果您在同一个程序中混合使用 Haskell 和 C++，并且需要帮助从 Haskell 调用 C++，请说。~~

*   默认使用列表。编译器可以将诸如 和 之类的列表操作`map`融合在一起，从而产生比使用 ​​C++ 向量通常获得的更高效的代码。`foldr``filter`
*   如果您发现自己需要按索引查找元素，或者想要在特定索引处改变元素，请使用某种数组。请参阅[Data.Array](http://www.haskell.org/ghc/docs/latest/html/libraries/array-0.4.0.0/Data-Array.html)、[Data.Array.IO](http://www.haskell.org/ghc/docs/latest/html/libraries/array-0.4.0.0/Data-Array-IO.html)和[Data.Array.ST](http://www.haskell.org/ghc/docs/latest/html/libraries/array-0.4.0.0/Data-Array-ST.html)。
*   如果您发现自己需要在数据结构的中间或结构的两端插入新元素，请使用序列。请参阅数据.[序列](http://www.haskell.org/ghc/docs/latest/html/libraries/containers-0.4.2.1/Data-Sequence.html)。

# c++ - 为什么这个指针没有被分配给一个新对象？

> ID：10155358
> 
> 赞同：1
> 
> 时间：2012-04-14T16:39:18.500
> 
> 标签：c++, pointers

我正在定义一个像这样的二叉搜索树类：

```
template <class T>
class BSTNode
{
  public:
    BSTNode(){
      right = left = 0;
    }

    BSTNode(const T& el, BSTNode * l = 0, BSTNode * r = 0)
    {
    val = el; left = l; right = r;
    }   

    T val;
    BSTNode * right;
    BSTNode * left;
};

template <class T>
class BST
{
  public:
    BST(){ root = 0;}           
    void Insert(const T& el);
  private:
    BSTNode<T> * root;
}; 
```

我实现了`Insert()`这样的功能：

```
template <class T>
void BST<T>::Insert(const T& el)
{
  bool bEqual = false;
  BSTNode<T> * p = root;

  while(p)
  {
    if(el == p->val)
    {
      bEqual = true;
      return;
    }
    if(el < p->val)
    {
      // go left
      p = p->left;
    }
    if(el > p->val)
    {
      // go right
      p = p->right;
    }
  }

  if(!p)
  {
    std::cout << "creating new node " << el << "\n";
    p = new BSTNode<T>(el);
  }  
} 
```

为什么`root`指针变量保持在0，而不是新对象的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:44:15.537

你永远不会`root = ?;`在你的代码中这样做；此外，`p = new BSTNode<T>(el);`泄漏内存。

我的猜测是您想`p`成为对指针的引用，因此您可以更改原始指针。

```
 BSTNode<T> *& p = root; // watch out, it won't solve anything 
```

但是，在这种情况下，`p`是不可重新分配的。您可能想检查您分配给的指针是否`p`为空，只需将新值插入正确的位置（例如。`p->left = new BSTNode<T>(el);`）并`p`仅在给定指针不为空时重新分配。

我是说：

```
template <class T>
void BST<T>::Insert(const T& el)
{
  bool bEqual = false;
  BSTNode<T> * p = root;

  if (p == 0)
  {
     root = new BSTNode<T>(el);
     return;
  }

  while(true)
  {
    if(el == p->val)
    {
      bEqual = true;
      return;
    }
    if(el < p->val)
    {
      if (p->left == 0)
      {
        p->left = new BSTNode<T>(el);
        return;
      }
      p = p->left;
    }
    if(el > p->val)
    {
      if (p->right == 0)
      {
        p->right = new BSTNode<T>(el);
        return;
      }
      p = p->right;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:46:17.150

因为在构建对象时

该声明

```
 p= root 
```

将 p 初始化为空指针..

您创建一个新对象并将其地址传递给 p 而不是 root ...

问题是 p 只是 root 的副本，而不是对该指针的引用。

# ios - ios 应用内购买 - 验证收据数据

> ID：10155361
> 
> 赞同：3
> 
> 时间：2012-04-14T16:39:25.163
> 
> 标签：ios, app-store

我正在将应用程序购买实现到 iOS 应用程序中。我正在使用服务器模型（因此所有应用内项目都存储在我的服务器上）。购买模式是这样的：

1.  用户在应用程序中购买商品
2.  应用程序将收据数据发送到我的服务器（收据数据是经过数字签名的数据块）
3.  然后服务器向苹果服务器发送验证
4.  如果验证成功，服务器返回有关交易的数据

我一直在搜索文档，但我无法回答这个问题：

*   我可以验证收据数据是否来自苹果商店（检查签名还是我必须想出一个机制）？
*   如果用户购买了从商店中移除的商品（由于旧缓存），我可以拒绝购买吗？

如果有人对此有任何经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-02T15:40:53.917

1.  [您可以通过遵循本地验证](https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateLocally.html)来验证收据数据是否来自苹果商店。
2.  如果用户购买已移除的商品。这意味着 itune 中不存在 product_id。交易将失败。当用户使用 IAP 时，您应该更新产品请求。

# java - “超级”和“这个”之间的区别

> ID：10155365
> 
> 赞同：0
> 
> 时间：2012-04-14T16:40:07.260
> 
> 标签：java, oop

> **可能重复：**
> [java中的this和super](https://stackoverflow.com/questions/2883594/this-and-super-in-java)

我是开发新手。我仍然无法理解的是 this 和 super 关键字之间的区别。如果有任何答案，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T16:41:56.027

[`this`](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

> 在实例方法或构造函数中，this 是对当前对象的引用——调用其方法或构造函数的对象。您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。

[`super`](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

> 如果您的方法覆盖了它的超类的方法之一，您可以通过使用关键字 super 来调用被覆盖的方法。您也可以使用 super 来引用隐藏字段（尽管不鼓励隐藏字段）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:35:01.960

这些概念可能会让新开发人员感到困惑，当您了解扩展类（继承）时，它们会更加清晰。有时当你引用一个变量或方法时，你可能会模棱两可，例如，如果你在一个方法中重复了一个类变量名，编译器不会知道你指的是哪个变量，所以你可以用它来指定你是引用当前类的变量（不是局部变量）。以下将是模棱两可的（和错误的）：

```
class Bike
{
    int speed = 10;
    public setSpeed(int speed)
    {
        speed = speed;
    }
} 
```

编译器不知道您的意图，并且可能会用一个神秘的（对于新开发人员）错误消息来侮辱您。使用`this`以下方式告诉编译器“我指的是类级别变量，而不是方法级别变量”

```
class Bike
{
    int speed = 10;
    //Constructors and shiz
    public void setSpeed(int speed)
    {
        this.speed = speed;
    }
} 
```

（尽管在实践中您不应该以这种方式重复变量名！）总而言之，`this`告诉编译器您指的是 CURRENT 类。当您扩展类（继承父类或`super`类的功能）时，可能会出现进一步的歧义，因为出现了覆盖父方法的选项。

```
class Bike
{
    public Bike()
    {}

    public void printSpeed()
    {
        System.out.println("This generic bike can go 10 m/s!!");
    }
} 
```

现在，如果我们要通过引入更具体的自行车类型来扩展自行车类，我们可能想要覆盖 printSpeed 方法以提供我们闪亮的新自行车的速度，如下所示：

```
class MountainBike extends Bike
{
public MountainBike() {}

public void printSpeed()
{
    System.out.println("WHOAAAH!! MOUNTAIN BIKE GOES 100 m/s!!");
}

public void printGenericSpeed()
{
    super.printSpeed();
}
} 
```

`super.printSpeed()`告诉编译器从父类运行这个方法，所以调用实际上`super.printSpeed()`会调用`printSpeed()`Bike 类中的方法。以下代码：

```
public static void main(String args[])
{
    MountainBike mb = new MountainBike();
    mb.printSpeed();
    mb.printGenericSpeed();
} 
```

将打印

```
WHOAAAH!! MOUNTAIN BIKE GOES 100 m/s!!
This bike can go 10 m/s!! 
```

请注意，如果我们没有重写该`printSpeed()`方法，则调用以下将是`printSpeed()`对 Bike 类的方法的调用。

```
public static void main(String args[])
{
    MountainBike mb = new MountainBike();
    mb.printSpeed();
} 
```

会打印

```
This bike can go 10 m/s!! 
```

因此，总而言之，我们使用`this`来指代我们所在的当前类，并`super`指代我们所在类的父类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:42:18.627

`super`指当前类扩展的基类。`this`指当前的类实例。

因此，如果`Parent`extends`Child`并且您创建了一个`new Child()`， super 指的是`Parent`类（并且`super()`在构造函数中执行类似的操作会调用父的构造函数），而 this 指的是`Child`您使用 . 创建的实际实例`new`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T16:42:31.210

`Super`指一个类扩展的超类。 `this`指类的当前实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T17:02:13.407

this 关键字指的是那个时间点的当前实例。super 关键字是指当前类的父/超类。

前任：

```
class Test
{
     Test()
     {

     }
     Test(int i)
     {
           System.out.println("i=" + i);                
     }
}

 class Sample extends Test
 {

  int i;

  void Sample(int i)  //constructor 
  {
      this.i=i; // referring class version of the i using 'this'

      super(i); // passing parameter to Super/Parent class constructor. 
  } 

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T16:54:59.647

在 Java 中，关键字`this`是指类的当前对象，例如：

```
class Point {
    public int x = 0;
    public int y = 0;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public String toString() {
       return x + "," + y;
    }
}

class Point3D extends Point {
    public int z = 0;

    public Point(int x, int y, int z) {
        super(x,y);
        this.z = z;
    }

    public String toString() {
       return super.toString() + "," + z;
    }
} 
```

在类的构造函数中是`Point` `this.x`指`x`在类中定义的，这里`x`是传入构造函数的参数。这里`this`用来解决名称的歧义`x`。对于`y`.

在类`Point3D`中，方法`toString()`使用超类`Point`的返回值来产生自己的返回值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-14T16:56:42.797

this: 是其类的方法中对当前对象的引用。通过 this 关键字引用当前对象的任何成员。

super：当你的类通过extend关键字扩展它时，它是派生类的父类，你可以通过使用关键字super调用被覆盖的方法。您还可以使用 super 来引用受保护的字段。

# django - 在 django 中发送电子邮件。

> ID：10155378
> 
> 赞同：2
> 
> 时间：2012-04-14T16:42:13.253
> 
> 标签：django, email, smtp

我有一个页面，人们可以在其中提交电子邮件。它有效，但我收到所有来自它的电子邮件，说它们来自我自己。

这是视图：

```
def signup(request):
  if request.method == 'POST': # If the form has been submitted...
    form = SignUpForm(request.POST) # A form bound to the POST data
    if form.is_valid(): # All validation rules pass
        subject = form.cleaned_data['subject']
        message = form.cleaned_data['message']
        sender = form.cleaned_data['sender']
        recipients = ['illuminatirebellion@gmail.com']

        from django.core.mail import send_mail
        send_mail(subject, message, sender, recipients)
        return HttpResponseRedirect('/thanks/') # Redirect after POST
else:
     form = SignUpForm() # An unbound form
return render_to_response('signup.html', {'form': form,},context_instance=RequestContext(request)) 
```

和设置：

```
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'illuminatirebellion@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword'
EMAIL_PORT = 587
MANAGERS = ADMINS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:56:52.697

您的用法[`send_mail()`](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs#send-mail)似乎是正确的。

假设 Gmail 是您的 SMTP 供应商，那么 Gmail 似乎不支持使用自定义`From:`电子邮件地址。

相关的：

*   [Rails 和 Gmail SMTP，如何使用自定义发件人地址](https://stackoverflow.com/questions/109520/rails-and-gmail-smtp-how-to-use-a-custom-from-address)
*   [使用gmail smtp服务器时如何更改发件人地址](https://stackoverflow.com/questions/1332510/how-to-change-from-address-when-using-gmail-smtp-server)

# facebook - Facebook Connect 离线工作，但不能在线“此网页有重定向循环”

> ID：10155384
> 
> 赞同：1
> 
> 时间：2012-04-14T16:42:50.763
> 
> 标签：facebook, codeigniter, facebook-php-sdk

使用 facebook connect 访问我开发的网站。

离线一切正常，但在线不正常。我收到导航错误（使用 Chrome）“此网页有重定向循环”：

网页位于**[https://www.facebook.com/dialog/oauth?client_id=209633612480053&redirect_uri=http%3A%2F%2Fwww.bluward.com%2Faccess%2Flogin_facebook&state=299262ddf89afbf382452df89c9a2ce8&scope=email%2C+user_birthday%2C+user_about_me%2 +user_location%2C+publish_stream&fbconnect=1# *=*](https://www.facebook.com/dialog/oauth?client_id=209633612480053&redirect_uri=http%3A%2F%2Fwww.bluward.com%2Faccess%2Flogin_facebook&state=299262ddf89afbf382452df89c9a2ce8&scope=email%2C+user_birthday%2C+user_about_me%2C+user_location%2C+publish_stream&fbconnect=1#_=_)**导致重定向过多。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

这是 PHP 代码（使用 CodeIgniter 框架）：

```
public function login()
{
  // Get the FB UID of the currently logged in user
  $uid = $fb->getUser();

  // If the user has already allowed the application, you'll be able to get his/her FB UID
  if($uid) {

     try {
        $profile = $fb->api(array(  
            'method'      => 'users.getinfo',  
            'uids'        => $uid,  
            'fields'      => 'uid, first_name, last_name, pic_square, pic_big, sex, birthday_date, current_location, email'
        ));

        // Only the first user.
        $profile = $profile[0];
     } catch (FacebookApiException $e) {
        return false;
     }

     // Do stuff when already logged in.

     return $profile;

  } else {

     // If not, let's redirect to the ALLOW page so we can get access
     redirect($this->getLoginUrl(array(
         'scope'           => 'email, user_birthday, user_about_me, user_location, publish_stream',
         'fbconnect'       =>  1
     )));
  }
} 
```

并且根据个人资料信息，我检查用户是否已经存在于数据库中，然后记录他/她，如果数据库中不存在，则注册他/她。

## 更新：

当我清除 Facebook cookie 时，重定向到登录页面成功，我可以填写电子邮件/密码。

不幸的是，当我单击“登录”按钮时，我收到与上面显示的相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:33:14.863

它看起来像你的使用和旧版本？这是我将如何处理 php-sdk 3.1.1“最新版本”的问题。

* * *

```
require 'src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => '135669679827333',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx'
  ));
$user = $facebook->getUser();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
$params = array(
  scope => 'read_stream,publish_stream,publish_actions,read_friendlists',
  //redirect_uri => $url
  );
  $loginUrl = $facebook->getLoginUrl($params);
  echo '<script> top.location.href=\''.$loginUrl.'\'</script>';
}; 
```

# ruby-on-rails-3 - 从 Redis 获取多个键值

> ID：10155398
> 
> 赞同：22
> 
> 时间：2012-04-14T16:44:38.927
> 
> 标签：ruby-on-rails-3, redis

我目前正在玩 Redis，我有几个问题。是否可以从键数组中获取值？

例子：

```
users:1:name "daniel"
users:1:age  "24"

users:2:name "user2"
users:2:age  "24"

events:1:attendees "users:1", "users:2" 
```

当我`redis.get events:1:attendees`返回时`"users:1", "users:2"`。我可以遍历这个列表并获取用户：1，获取用户：2。但这感觉不对，有没有办法在 1 上获取所有与会者信息？！

在rails中我会做这样的事情：

```
@event.attendees.each do |att|
  att.name
end 
```

但是在redis中我不能，因为它返回键而不是存储在该键上的实际对象。

谢谢 ：）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-14T17:35:38.610

对项目进行循环并同步访问每个元素并不是很有效。使用 Redis 2.4，有多种方法可以做你想做的事：

*   通过使用排序命令
*   通过使用流水线
*   通过使用可变参数命令

使用 Redis 2.6，您还可以使用 Lua 脚本，但这并不是真正需要的。

顺便说一句，您描述的数据结构可以通过使用哈希来改进。您可以将用户数据分组到一个散列对象中，而不是将用户数据存储在单独的键中。

**使用排序命令**

您可以使用 Redis 排序命令在一次往返中检索数据。

```
redis> set users:1:name "daniel"
OK
redis> set users:1:age 24
OK
redis> set users:2:name "user2"
OK
redis> set users:2:age 24
OK
redis> sadd events:1:attendees users:1 users:2
(integer) 2
redis> sort events:1:attendees by nosort get *:name get *:age
1) "user2"
2) "24"
3) "daniel"
4) "24" 
```

**使用流水线**

Ruby 客户端支持流水线（即能够向 Redis 发送多个查询并等待多个回复）。

```
keys = $redis.smembers("events:1:attendees")
res = $redis.pipelined do
   keys.each do |x|
      $redis.mget(x+":name",x+":age")
   end
end 
```

上面的代码将仅在两次往返中检索数据。

**使用可变参数命令**

MGET 命令可用于一次检索多个数据：

```
redis> smembers events:1:attendees
1) "users:2"
2) "users:1"
redis> mget users:1:name users:1:age users:2:name users:2:age
1) "daniel"
2) "24"
3) "user2"
4) "24" 
```

这里的费用也是两次往返。如果您可以保证要检索的密钥数量有限，则此方法有效。如果不是，流水线是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T17:18:52.753

您可以使用 Redis 的[EVAL](http://redis.io/commands/eval)命令向它发送一个运行循环“服务器端”的[Lua 脚本并在一个块中返回结果。](http://www.lua.org/)

# jquery - Firefox 在切换元素时行为怪异，而在 chrome 中它工作正常

> ID：10155400
> 
> 赞同：2
> 
> 时间：2012-04-14T16:44:45.740
> 
> 标签：jquery

这是示例：http: [//jsbin.com/ovupuq/3](http://jsbin.com/ovupuq/3)

```
$(document).ready(function(){
      var cursor = $("<span>_</span>").appendTo("p"),
          blik = function(){
                  $(cursor).toggle(200);
                };
      setInterval(blik,500);
}); 
```

问题是“Hello World！” 每次切换光标时都会出现文本颠簸。这仅在 Firefox 11 中发生，chrome 和 IE8 按预期工作。

我注意到的另一件事是，如果我让它运行几分钟，我设置的 500 毫秒间隔似乎会变成一些随机值，这会使光标闪烁得更快。这仅在 chrome 中发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:52:20.433

## *[演示](http://jsbin.com/iqimiz/2/edit#javascript,html,live)*

*   只需`200`从`toggle`
*   您已经使用定义了光标`element`，`$()`因此只需使用：`cursor`

* * *

```
var cursor = $("<span>_</span>").appendTo("p"),
    blik = function(){ cursor.toggle(); };
setInterval(blik,500); 
```

（在您的代码中：当切换在 200 处运行时，您的间隔“500”有时会与切换功能混淆，从而创建事件冒泡）

# flash - Flash8 按钮使屏幕完全空白

> ID：10155404
> 
> 赞同：0
> 
> 时间：2012-04-14T16:45:10.663
> 
> 标签：flash

有什么方法可以使用 Flash 按钮来调用一些 javascript？swf 将嵌入到我的 html 网页中。

```
on(release){

//fire javascript code to blank whole screen.

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:54:41.287

是的你可以。我认为您正在寻找的是[flash external interface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T08:17:37.127

对此还有另一个小修复。您可以附加 ?html5=1 以在浏览器上播放全屏视频。我已将嵌入式视频添加到

```
?html5=1 
```

然后视频将呈现 HTML5 播放器而不是 Flash 播放器。

谢谢。

# c - “[] 内的索引数量错误”：为什么？

> ID：10155405
> 
> 赞同：0
> 
> 时间：2012-04-14T16:45:18.220
> 
> 标签：c, multidimensional-array, compiler-errors

我收到编译错误“错误的索引数量 []：预期为 1”。但为什么？我想我没有做任何奇怪的事情。

这是代码（在一个函数内）：

```
// **valoresMonedas is a Int32[] array passed as parameter**
Int32[] valores = valoresMonedas; 
Int32[][] matrixnN;

Int32 valMon = valoresMonedas.Count();
matrixnN = new Int32[valMon][]; 

for (Int32 i=0;i< cantidadTotal;i++){
  // **cantidadTotal is a Int32 passed as parameter**
  matrixnN[i] = new Int32[cantidadTotal]; 
}

for (Int32 i=0;i< valMon; i++){
  matrixnN[i][0] = 0;
}

// some code... (just if / for / assignations ..)
matrixnN[0][1] = 1 + matrixnN[1, 1 + valores[1]]; // <-- THE ERROR IS HERE 
```

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:47:32.640

你所要做的

```
matrixnN[1][1 + valores[1]] 
```

或两个索引的其他组合，而不是

```
matrixnN[1, 1 + valores[1]] 
```

你有一个错误的逗号，应该有另一对括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:47:45.627

你的意思是？

```
matrixnN[0][1] = 1 + matrixnN[1][1 + valores[1]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:47:50.573

我想`matrixnN[1, 1 + valores[1]]`应该是`matrixnN[1][1 + valores[1]]`

# c# - 横向显示对话框

> ID：10155412
> 
> 赞同：2
> 
> 时间：2012-04-14T16:45:55.023
> 
> 标签：c#, xna, windows-phone

在 windows phone 上使用 Xna 玩游戏，一开始我会提示用户是否想继续通过`Microsoft.Xna.GamerServices.Guide.BeginShowMessageBox()`.

但是，当我的游戏以横向运行时，此提示以纵向显示，是否有我无法找到的设置可以让我横向显示我的对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:57:51.263

使用[DisplayOrientation](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.presentationparameters.displayorientation.aspx?queryresult=true)属性。

```
GraphicsDevice.PresentationParameters.DisplayOrientation = DisplayOrientation.LandscapeRight; 
```

在加载内容并仅在 Windows Phones 平台上工作（不适用于 XBox 和 Windows）之前，无法设置属性。

# c++ - C ++通过值而不是通过引用将数组发送到函数

> ID：10155415
> 
> 赞同：1
> 
> 时间：2012-04-14T16:46:19.647
> 
> 标签：c++

我有 C++ 的问题。

我有一个对数组进行排序的函数，但我不想处理原始数组。我想通过值而不是引用将数组发送到函数。请帮我。

```
int bogoSort(int tab[], int n){
int iloscOperacjiDominujacych = 0;
    cout<<"rozpoczalem algorytm BogoSort"<<endl;

    srand (time(NULL));
    named (outer)
    while(true){
 //       cout<<"Zaczal sie while"<<endl;
        named (inner)
        for(int i = 0; i < n; i++){
            if(i == n-1){
                break (outer);
            }
            if (tab[i] > tab[i+1]){
                break (inner);
            }
        }
        for(int i = n-1; i > 0; i--){
            iloscOperacjiDominujacych++;
            //operacja dominujaca to zamiana dwoch elementow w tablicy, wykonuje sie ZAWSZE najwiecej razy i jest najbardziej zlozona
            int swapPostition =  rand() % (i+1); //wylosowanie liczby miedzy <0;i> nalezacej do calkowitych
            int temp = tab[i];
            tab[i] = tab[swapPostition];
            tab[swapPostition] = temp;
        }
    }
//    cout<<"Wykonal sie while"<<endl;
    show(tab,n);
    return iloscOperacjiDominujacych;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T16:49:14.973

在 C++ 中无法按值传递数组。如果您不想修改原始数组，那么您要么必须自己制作一个单独的副本并操作该副本，要么使用`std::vector`or `std::array`（如果您有 C++11）并按值传递和返回它（因为您*可以*复制`std::vector`或`array`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T17:12:41.673

C++ 谈到函数声明

> 在确定每个参数的类型后，将任何“T数组”或“函数返回T”类型的参数调整为“指向T的指针”或“指向返回T的函数的指针”，***[dcl.fct] 8.3.5/ 5***

因此，当您想要传递一个数组时，C++ 最终会传递一个指向原始数组第一个元素的指针，而不是像其他类型一样进行复制并按值传递它。这是 C 兼容性的一个不幸结果，我不知道为什么 C 认为这种不一致是个好主意。

在任何情况下，C++ 都提供`std::array`静态大小的数组和`std::vector`动态大小的数组。由于 C 数组的奇怪之处，您应该尽可能避免使用它们。（很少有无法避免的情况）

`int tab[]`是一个边界未知的数组，因此您不能使用静态大小`std::array`，必须使用`std::vector`：

```
int bogoSort(std::vector<int> tab){ 
```

并不是说您不再需要该`n`参数，因为向量知道自己的大小。这是 std::vector 和 std::array 比数组更安全的方式之一。即使向量确实有与记住该大小相关的额外开销，但它实际上是零开销，因为它使您不必在其他地方做这项工作。

* * *

如果你真的想要一个 C 数组（你不应该这样做），你可以简单地手动复制它。

```
int bogoSort(int const *tab,int n) {
    std::vector<int> tab_copy(tab,tab+n);
    bogoSort(tab_copy);
}

int bogoSort(std::vector<int> tab) {
    ...
} 
```

正如你所看到的，在内部我使用了一个向量，并且我有一个 bogoSort 的重载，它需要一个向量。将此与使副本成为原始数组进行比较：

```
int bogoSort(int const *tab,int n) {
  int *tab_copy = new int[n];
  std::copy(tab,tab+n,tab_copy);             // manual copying
  bogoSort_impl(tab_copy,n);                 // not overloading, hidden internal function
  delete [] tab_copy;                        // resource cleanup. We're not exception safe!
}

// or

int bogoSort(int const *tab,int n) {
  // unqiue_ptr for exception safety
  std::unqiue_ptr<int[]> tab_copy = std::unqiue_ptr<int[]>(new int[n]);
  std::copy(tab,tab+n,tab_copy.get());
  bogoSort_impl(tab_copy.get(),n);
} 
```

再说一次，你真的不应该使用 C 数组。他们太麻烦了，没有任何好处。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T16:55:35.153

您*不能*按值传递 C 样式的数组。故事结局。

但是，您*可以按**包含*数组的值传递类类型的变量。利用它的最简单方法是使用`std::array`：

```
void f(std::array<int, 10> a);

std::array<int, 10> a;
f(a); 
```

这个类基本上就是这样的`struct { int data[10]; };`，所以如果你真的想的话，你甚至可以自己滚动它。

# octave - 如何用 Octave 做多个箱线图？

> ID：10155416
> 
> 赞同：3
> 
> 时间：2012-04-14T16:46:46.007
> 
> 标签：octave, boxplot

我有 3 个矩阵，我想在 Octave 中绘制一个箱线图（其中两个是 22 行 x 83 列，另一个是 7 行 x 83 列）。

我试过了：

箱线图([红色(:,1),蓝色(:,1),紫色(:,1)])

错误：水平尺寸不匹配错误：评估参数列表元素编号 1

但是，我不断收到上述错误。我认为这是因为我有一个 7 行而不是 22 行的矩阵？如果是这样，是否有任何可能的方法将它们都绘制在同一个箱线图上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:06:14.663

当你通过时，`[a,b,c]`你试图通过水平连接其他三个来构建一个矩阵。因为它们的行数不同，所以永远不会工作。

如果您想做箱线图，请使用单元格（如 中所示`help boxplot`），即

```
boxplot ({red(:,1),blue(:,1),purple(:,1)}) 
```

# assemblies - 我希望我的 DotNetNuke 模块在尽可能多的版本下工作，同时避免程序集绑定重定向

> ID：10155417
> 
> 赞同：4
> 
> 时间：2012-04-14T16:46:58.733
> 
> 标签：assemblies, dotnetnuke, versioning, dotnetnuke-module

我正在开发 DotNetNuke 模块，自然希望在安装或分发它们之前对其进行编译。过去，我只是通过浏览到本地 DotNetNuke 安装的 /BIN 文件夹来引用特定版本的 DotNetNuke.dll。

这个参考允许我使用 DNN 基类并在这些基础上创建我自己的一组类。我还在我需要的整个 DNN 命名空间/类中使用了各种辅助方法。（即从它们的 PortalModuleBase、ModuleSettingsBase 创建派生类，并使用它们的本地化类来替换 Microsoft 的 ASP.NET 实现提供的那些。）

我已经能够摆脱这种直接引用 DLL 的方法（复制本地 = True，特定版本 = False），因为直到现在我一直将这些模块安装到我维护的客户端网站上。因此，我至少将它们保留在我一直在开发的 DotNetNuke 版本或更新版本上。最近，我在开发中引用了 6.1.3.108。

注意：这会自动将以下关联的 DLL 复制到我的模块的 /BIN 目录中：

*   DotNetNuke.dll
*   DotNetNuke.Instrumentation.dll
*   dotnetnuke.log4net.dll
*   DotNetNuke.Services.Syndication.dll
*   DotNetNuke.Web.Client.dll
*   DotNetNuke.WebControls.dll
*   DotNetNuke.WebUtility.dll

将它安装到较新版本的 DotNetNuke 站点上运行良好，这不是一个糟糕的开始。

我一直想知道的是，是否有一种非骇客的方式可以使我的模块对 DLL 的次要、构建或修订级别不敏感？

我意识到我有责任确保产品（如果在“中档”版本上开发）仍然可以在稍早版本和较新版本的产品上运行。也就是说，我觉得我可以对这些构建进行彻底的测试。对我来说，这优先于必须在开发中运行 OLDEST 主要构建。

换句话说，我宁愿不使用对 6.0.0.0 的引用进行开发，这样它就可以在 6.xxx 上运行而无需额外的努力。如果有人没有让我参考的绝妙方法，我只会这样做，比如 6.1.3.108 工作在稍早或更高的版本上。（当然，我可以为主要版本更改制作不同的模块，例如 5.xxx 或 7.xxx）

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:22:47.433

不要引用 bin 文件夹中的程序集，而是将 DotNetNuke.dll（和任何其他引用）的副本与您的源代码一起保存，并在那里引用它。将支持的最旧版本放在那里，但在较新的站点上开发。在引用上设置*Copy Local=False*，这样您就不会覆盖较新的版本，您应该没问题。

通过这种方式，我们能够在开发在 DNN 6.1.x 上运行的模块时引用 DNN 4.5.3。我多年来一直在使用这种方法，没有出现任何重大问题（除非我偶尔忘记关闭*Copy Local*并且我的 DNN 站点神秘地炸毁了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:05:39.097

关于确定您从 DNN 子类化的类中的 DNN 版本。

这是我要做的，假设 YourClass 继承自 DNNClass，但是因为您引用了早期版本的属性，所以不存在“NewProp”。这是如何做到的：

```
public class YourClass : DNNClass
{    
    public string NewPropSubstitute
    {
       get {

           string newPropVal = "your default if earlier DNN";
           System.Reflection.PropertyInfo pi = this.GetType().GetProperty("NewProp");
           if (pi != null)
               newPropVal = (string)pi.GetValue(this, null);
           return newPropVal;
       }
    }
} 
```

这是一个凭记忆做出的猜测，所以它可能无法编译，但你明白了。如果您愿意，您不一定必须获得 DNN 版本 - 只需尝试通过反射获取属性 - 如果它在那里，则暗示您拥有正确的版本。

当然，此方法假定如果 DNN 版本不支持，您可以用一个值替换后来的 DNN 属性（或方法）。但这一切都取决于你想要做什么。

如果您确实想找到 DNN 版本（版本安全且始终正确），您可以使用嵌入在我的版本安全的 jQuery 包含代码中的代码，链接自此博客文章： [在 DotNetNuke 5 和 6 中使用 jQuery](http://www.ifinity.com.au/Blog/EntryId/121/Using-jQuery-UI-with-DotNetNuke-5-and-6-in-the-same-module)

# javascript - 在 HTML 表单中自定义文件输入的外观

> ID：10155419
> 
> 赞同：1
> 
> 时间：2012-04-14T16:47:34.753
> 
> 标签：javascript, html, forms, post, file-upload

我一直在尝试弄清楚如何自定义 HTML 表单中文件输入的外观，以便该按钮与我网站上的其余按钮匹配。环顾四周，我找到了一个我希望可以工作的解决方案，但它有一些奇怪的行为。

我接受了我的文件输入并设置了 display:none，并在表单中创建了一个新的文本输入和按钮。

```
 <form method="post" action="../Entry/Create" enctype="multipart/form-data" onsubmit="return aentryValidate()">
                <input type="text" id="EntryTitle" name="EntryTitle" maxlength="50" />
                <div id="invalidTitle" class="invalidData"></div>
                <p id="char-remaining">(50 characters remaining)</p>

                <input type="file" id="ImageFile" name="ImageFile" style="display:none;" />
                <input type="text" id="ImageFileMask" name="ImageFileMask" disabled="true" />
                <button type="button" onclick="HandleFileButtonClick()" id="ImageFileButton" style="margin-left:10px;padding-bottom:0px;height:20px;width:100px;font-size:14px;">browse...</button>
                <div id="invalidImage" class="invalidData"></div>
                <p id="file-desc">(image to represent your entry, jpg, png, or gif)</p>

                <textarea id="EntryDesc" name="EntryDesc"></textarea>
                <div id="invalidDesc" class="invalidData"></div>
                <br />

                <input type="checkbox" id="isPrivate" name="isPrivate" value="true" />
                <input type="hidden" name="isPrivate" value="false" />
                Make my entry private.

                <button id="new-entry-save">save</button>
            </form> 
```

然后我的 javascript 来处理被点击的 ImageFileButton 按钮：

```
function HandleFileButtonClick() {
    document.getElementById("ImageFile").click();
    document.getElementById("ImageFileMask").value = document.getElementById("ImageFile").value;
} 
```

它似乎工作正常。我点击按钮，弹出窗口让我选择一个文件。当我选择一个文件时，它会出现在文本框中。

当我点击表单上的保存按钮时，出现了奇怪的行为。我注意到现在由于某种原因必须单击两次才能实际提交。而且，当它提交时，它不再发布文件。

所以我让文件输入再次可见，看看发生了什么。如果我使用 ImageFileButton 按钮选择一个文件，该文件会显示在文件输入中。但是当点击保存时，文件输入被清除并且表单没有提交。然后你必须再次点击提交，当然现在没有文件了。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:50:45.520

不，这是不可能的。文件输入通常取决于浏览器。您可能必须使用 JavaScript 替换或 Flash 替换，例如[uploadify](http://www.uploadify.com/)。

文章：[输入文件](http://www.quirksmode.org/dom/inputfile.html)

> 在所有表单字段中，文件上传字段在样式方面是迄今为止最差的。Explorer Windows 提供了一些（但不是很多）风格的可能性，Mozilla 稍微少一些，而其他浏览器则根本没有。尤其是“浏览”按钮，CSS 操作完全无法访问。

# windows - Windows上的递归移动命令

> ID：10155420
> 
> 赞同：11
> 
> 时间：2012-04-14T16:47:36.753
> 
> 标签：windows, command-line

我需要做一个 .sh 的 .bat 副本，我不太了解 Windows cmd。在 Linux 上我可以做到

```
mv ... 
```

或者

```
rsync -a SOURCE/ DEST/ --remove-sent-files --ignore-existing --whole-file 
```

但Windows“移动”不能做同样的事情

也许有一个简单的 windows 替代方案，比

```
for /R c:\sourceFolder\ %%G in (*) do ( move /Y "%%G" c:\destinationFolder\ ) 
```

Linux mv 似乎更新了目录指针，但是上面的 Windows 命令会做硬的事情吗？我想这对于我需要经常移动的大文件夹不是一个好主意

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-01T05:11:48.297

Robocopy 为我创造了奇迹：

```
 robocopy c:\cache c:\cache-2012 ?????-2012*.hash /S /MOV 
```

我用它来移动所有带有特定掩码的文件`c:\cache`及其众多子目录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-16T20:05:02.410

该`move`命令可以移动目录和文件。

```
cd /d C:\sourceFolder
rem move the files
for %%i in (*) do move "%%i" C:\destinationFolder
rem move the directories
for /d %%i in (*) do move "%%i" C:\destinationFolder 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-06T23:50:24.600

我知道这是一个旧线程，但由于它没有正确的答案，我想我会把它绑起来。

完成此操作的旧 DOS 命令是：

```
 move <source directory> <destination directory> 
```

所以在OP问题中：

```
 move C:\sourceFolder c:\destinationFolder 
```

文件夹和文件夹中的所有内容（包括子目录）将被移动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T19:46:31.030

XCOPY 应该可以解决问题，我一直在批处理文件中使用它

类似的东西，如果你只是想定位 .sh 文件

```
XCOPY /E /H /Y /C "%SOURCEDIR%\*.sh" "%TARGETDIR%" 
```

如果您有更多问题，请告诉我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-14T00:14:09.203

```
@echo off
setlocal
set DIR=
set OUTPUTDIR=C:\Documents and Settings\<username>\Desktop\sandbox1\output
for /R %DIR% %%a in (*.jpg) do xcopy "%%a" "%OUTPUTDIR%" 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-08T05:27:45.987

对于 Windows 中的递归移动，一个简单的`move`命令就可以了。这是示例，我认为它会有所帮助。

```
move D:\Dbbackup\*.dmp* D:\Dbbackup\year\month\ 
```

`.dmp`将移动到位置递归文件夹 Dbbackup 的文件的扩展名在哪里，然后是年，然后是月。

# android - 为什么我的 ViewGroup 的孩子的触摸事件不起作用？

> ID：10155428
> 
> 赞同：2
> 
> 时间：2012-04-14T16:48:44.223
> 
> 标签：android, view, touch-event, viewgroup

这是我的代码 - PadsGrid 是一个 ViewGroup - ：

```
public class Emc_PadControllerActivity extends Activity implements OnTouchListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final PadsGrid pg = new PadsGrid(this, 8, 5, PadType.SMALL);
        for (int i=0;i<pg.getChildCount();i++){
            final PadController pc;
            pc=(View) pg.getChildAt(i);
            pc.setOnTouchListener(new View.OnTouchListener() {
                @Override
                public boolean onTouch(View arg0, MotionEvent arg1) {
                    pc.onTouch(arg0,arg1);
                    return true;
                }});;
        }

        setContentView(pg);

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.onTouchEvent(event);
        return false;
    }
} 
```

在此，我的观点的 onTouch 事件不是我为什么要触摸它们，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:59:30.540

您希望将 onTouchlistener 设置为，`Emc_PadControllerActivity.this`而不是像这样使用匿名内部类：

```
 pc.setOnTouchListener(Emc_PadControllerActivity.this) 
```

这将在主类中调用您的 onTouch()。在这里，您可以确定单击了哪个视图并采取相应措施。

在这里查看我之前的[问题。](https://stackoverflow.com/questions/10108918/how-do-i-reference-the-main-activitys-onclick-from-within-the-onclick-menthod-o)

# c# - “至少需要一个”情况的 MVC3 自定义验证属性

> ID：10155429
> 
> 赞同：1
> 
> 时间：2012-04-14T16:48:57.483
> 
> 标签：c#, asp.net-mvc-3, validation

嗨，我已经找到了这个答案： [MVC3 Validation - Require One From Group](https://stackoverflow.com/questions/7247748/mvc3-validation-require-one-from-group)

这对于检查组名并使用反射是相当具体的。

我的例子可能有点简单，我只是想知道是否有更简单的方法来做到这一点。

我有以下内容：

```
public class TimeInMinutesViewModel {

    private const short MINUTES_OR_SECONDS_MULTIPLIER = 60;

    //public string Label { get; set; }

    [Range(0,24, ErrorMessage = "Hours should be from 0 to 24")]
    public short Hours { get; set; }

    [Range(0,59, ErrorMessage = "Minutes should be from 0 to 59")]
    public short Minutes { get; set; }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    public short TimeInMinutes() {
        // total minutes should not be negative
        if (Hours <= 0 && Minutes <= 0) {
            return 0;
        }
        // multiplier operater treats the right hand side as an int not a short int 
        // so I am casting the result to a short even though both properties are already short int
        return (short)((Hours * MINUTES_OR_SECONDS_MULTIPLIER) + (Minutes * MINUTES_OR_SECONDS_MULTIPLIER));
    }
} 
```

我想向 Hours & Minutes 属性或类本身添加一个验证属性。想法是确保这些属性中的至少 1 个（小时或分钟）具有值，服务器和客户端验证使用自定义验证属性。

请问有人有这方面的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:41:05.737

查看 FluentValidation [http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)或者您可以为每个要检查是否至少一个属性具有价值的 ViewModel 使用这个小助手，或者根据您的需要进一步修改它。

```
public class OnePropertySpecifiedAttribute : ValidationAttribute
{       
    public override bool IsValid(object value)
    {            
         Type typeInfo = value.GetType();
         PropertyInfo[] propertyInfo = typeInfo.GetProperties();
         foreach (var property in propertyInfo)
         {
            if (null != property.GetValue(value, null))
            {                    
               return true;
            }
         }           
         return false;
    }
} 
```

并将其应用于您的 ViewModel：

```
[OnePropertySpecified(ErrorMessage="Either Hours or Minutes must be specified.")]
public class TimeInMinutesViewModel 
{
  //your code
} 
```

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:25:17.223

您链接到的示例通过将属性应用于属性来定义组，这提供了很大的灵活性。这种灵活性的代价是反射代码。不太灵活的方法更容易实现，但适用范围更窄。

这是这种方法的 IsValid 方法；我将留给您调整其他示例的其余部分：

```
protected override ValidationResult IsValid(object value, ValidationContext validationContext) 
{
    var viewModel = value as TimeInMinutesViewModel;
    if (viewModel == null)
    {
        //I don't know whether you need to handle this case, maybe just...
        return null;
    }

    if (viewModel.Hours != 0 || viewModel.Minutes != 0)
        return null;

    return new ValidationResult(FormatErrorMessage(validationContext.DisplayName)); 
} 
```

# android - 在 Android 上加入 Google 和 Facebook 联系人

> ID：10155430
> 
> 赞同：-1
> 
> 时间：2012-04-14T16:48:59.963
> 
> 标签：android, facebook, sdk, contacts

我正在尝试为 Android 编写一个加入 Google 和 Android 联系人的应用程序，但我似乎无法在整个 raw_contacts 表中找到 facebook 联系人。

如何找到 Facebook 联系人（在手机的数据库中，而不是 Facebook API），其次，如何加入两个联系人？

我还应该注意，我正在尝试构建一个应用程序，将 Android 联系人与未组合的 Facebook 联系人同步，然后将 Google 联系人的照片设置为来自 Facebook 网站的全分辨率图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:33:32.083

您需要安装一个扩展，类似于核心 Android SDK，但不，这是您需要做的：

1.  去`github.com/facebook/facebook-android-sdk`

2.  只下载 Facebook 目录！其他目录只是示例。

3.  将文件`src`（如果需要，您也可以复制可绘制对象）中的文件放入您当前正在使用的包中

4.  你已准备好出发; 您现在可以使用 Facebook“SDK”

另请参见示例`https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook`。下载它。它正在使用 Facebook 提供的示例，其中包含朋友列表的源代码。

***[带有完整源代码的 Android OAuth 与 Google 联系人教程](http://androidwarzone.blogspot.in/2011/07/android-oauth-full-example-with-source.html)***将** 帮助您获取 Google 联系人。**

# php - 根据用户的查询使用 memcached

> ID：10155436
> 
> 赞同：0
> 
> 时间：2012-04-14T16:49:29.793
> 
> 标签：php, memcached

我正在开发一个 Web 应用程序并试图了解 memcached 的工作原理。

我的问题是关于如何使用 memcached 来获得最佳结果。

在应用程序中，当每个用户登录时，一个 sql 查询会检查 7-8 个表并以数组的形式获取结果。我正在考虑将这些数组缓存在 memcached 中。但它应该如何工作？

我应该在 memcached 中使用唯一键为每个用户缓存数组吗？

我应该如何刷新这些数组？有一个 cron 工作还是什么？

提前感谢您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:04:32.697

数据是否应由具有唯一键的用户缓存取决于该数据对于该用户是否唯一。而应该如何刷新数组取决于数据是如何变化的。所以一般来说，你的问题是不可能回答的，在回答具体问题之前，你需要阅读一些教程。

假设您的函数的输出仅取决于传递的参数，您可以从这些参数创建一个键（例如，这是一个获取用户数据的函数并且您正在传递 $userId - 您的键可能是 userdata/$userId），你可以缓存函数的返回值

```
function get_user_data($userId) {
    $cacheKey = 'userdata/' . $userId;
    $result = cache::instance()->get($cacheKey);
    if ($result == false) {
       // body of the function
       cache::instance()->set($cacheKey, $result);
    }
    return $result;
} 
```

至于失效，当部分数据发生变化时，从memcache中删除key即可

# package - 为 dolphin 服务菜单创建 Debian 软件包

> ID：10155438
> 
> 赞同：2
> 
> 时间：2012-04-14T16:50:16.907
> 
> 标签：package, debian, rules, debhelper

嗨，我在生成 debian 包时遇到问题

我有 2 个要安装的文件 1 是 BASH 脚本，另一个是 .DESKTOP 文件

```
/kate-folder-service-menu-0.1.0$ tree
.
└── usr
    ├── bin
    │   └── ktexeditor-open-folder
    └── share
        └── kde4
            └── services
                └── ServiceMenus
                      └── kate-folder.desktop 
```

现在我已经创造了所有的东西，

dh_make -s -c gpl

我已编辑：

-控制文件 -版权文件 -规则文件

在我制作的规则文件中：

```
#!/usr/bin/make -f

# %:
#   dh $@ --with-lzma

# -*- makefile -*-

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1

configure: configure-stamp
configure-stamp:
    dh_testdir
    touch configure-stamp

build: build-stamp

build-stamp: configure-stamp 
    dh_testdir
    touch $@

clean:
    dh_testdir
    dh_testroot
    rm -f build-stamp configure-stamp
    dh_clean 

install: build
    dh_testdir
    dh_testroot
    dh_clean -k 
    dh_installdirs

binary-indep: build install

binary-arch: build install
    dh_testdir
    dh_testroot
    dh_installchangelogs 
    dh_installdocs
    dh_installexamples
    dh_installman
    dh_link
    dh_strip
    dh_compress
    dh_fixperms
    dh_installdeb
    dh_shlibdeps
    dh_gencontrol

    install --mode=777 -t debian/usr/bin usr/bin/ktexeditor-open-folder
    install --mode=644 -t debian/usr/share/kde4/services/ServiceMenus usr/share/kde4/services/ServiceMenus/kate-folder.desktop

    dh_md5sums
    dh_builddeb

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure 
```

现在我做到了

```
debuild -uc -us --source-option=--include-binaries --source-option=-isession 
```

最后这个

```
sudo pbuilder build MYSTUFF.dsc 
```

但是这个混蛋在没有脚本和服务菜单的情况下生成了 debian 包：D

```
dpkg --contents kate-folder-service-menu_0.1.0-1_i386.deb 

drwxr-xr-x root/root         0 2012-04-14 14:53 ./
drwxr-xr-x root/root         0 2012-04-14 14:53 ./usr/
drwxr-xr-x root/root         0 2012-04-14 14:53 ./usr/share/
drwxr-xr-x root/root         0 2012-04-14 14:53 ./usr/share/doc/
drwxr-xr-x root/root         0 2012-04-14 14:53 ./usr/share/doc/kate-folder-service-menu/
-rw-r--r-- root/root       201 2012-04-12 11:16 ./usr/share/doc/kate-folder-service-menu/README.Debian
-rw-r--r-- root/root      1239 2012-04-12 15:31 ./usr/share/doc/kate-folder-service-menu/copyright
-rw-r--r-- root/root       152 2012-04-12 15:55 ./usr/share/doc/kate-folder-service-menu/changelog.Debian.gz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:17:10.647

`dh_make`如果它给你旧式的 debhelper 规则，那一定是一个古老的。

我建议现代简约`debian/rules`：

```
#!/usr/bin/make -f
%:
        dh $@ 
```

然后把它放进去`debian/install`：

```
usr/bin/ktexeditor-open-folder
usr/share/kde4/services/ServiceMenus/kate-folder.desktop 
```

这将用于`dh_install`将它们放在正确的位置，并执行所有其他常用操作来生成包。

# .htaccess - godaddy - htaccess 条件不起作用

> ID：10155443
> 
> 赞同：0
> 
> 时间：2012-04-14T16:50:52.553
> 
> 标签：.htaccess, mod-rewrite

我有一个在 localhost 上工作的 mod 重写，但不是在 godaddy 共享主机上。

```
Options -Multiviews
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{DOCUMENT_ROOT}/WebShop/View/public%{REQUEST_URI} -f
RewriteRule ^(.*)$ WebShop/View/public/$1 [L]

RewriteRule ^(.*)$ entryPoint.php [QSA,L] 
```

问题出在 RewriteCond 部分。它在子文件夹中找不到现有文件。我尝试使用绝对路径、相对路径、rewritebase 一切，但它们都不起作用。Godaddy 不授予对重写日志的访问权限……知道如何解决这个问题吗？

**编辑：**

htaccess 在一个子文件夹中，在文档根目录中是一个 htaccess，它按域将请求拆分为子文件夹：

```
Options -Multiviews
Options +FollowSymLinks

RewriteEngine On

RewriteBase /

RewriteCond %{HTTP_HOST} ([^\.]+\.[^\.]+)$
RewriteRule ^(.*)$ %1/$1 [L,QSA] 
```

真正的问题是，子文件夹的 htaccess 中的 %{REQUEST_URI} 也包含子文件夹的名称：S

**编辑2：**

好的，我有一个部分解决方案：

```
Options -Multiviews
Options +FollowSymLinks

RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_URI} ^/([^/]+)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1/WebShop/View/public/%2 -f
RewriteRule ^(.*)$ entryPoint.php?file=%2 [L]

RewriteRule ^(.*)$ entryPoint.php [QSA,L] 
```

这会打印文件名（如果存在），但这是个玩笑，因为如果我将第二条规则更改为

```
RewriteRule ^(.*)$ x.php [QSA,L] 
```

然后一切都转到x.php。我想知道为什么 mod rewrite 永远无法识别 L 标志？

*（去喝啤酒）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:46:26.723

**这可能是因为某种奇怪的目录设置，但如果你重定向到 Godaddy 服务器上的子目录，你必须在 RewriteEngine On 的情况下创建一个空的 .htaccess 文件，否则它将无法工作。**

前面edit2部分的代码运行良好，但在godaddy服务器上不行......这是它的文件访问版本：

```
Options -Multiviews
Options +FollowSymLinks

RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_URI} ^/([^/]+)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1/WebShop/View/public/%2 -f
RewriteRule ^(.*)$ WebShop/View/public/%2 [L]

RewriteRule ^(.*)$ entryPoint.php [QSA,L] 
```

我在“WebShop/View/public”目录中放置了一个带有 RewriteEngine On 的空 .htaccess 文件，修复了 L 标志问题。

# c++ - C++11 中的 Lambda 函数变量

> ID：10155444
> 
> 赞同：15
> 
> 时间：2012-04-14T16:51:43.183
> 
> 标签：c++, lambda, c++11, closures

有两种使用 lambda 函数变量的方法：

```
std::function<int(int, int)> x1 = [=](int a, int b) -> int{return a + b;};

//usage
void set(std::function<int(int, int)> x);
std::function<int(int, int)> get(); 
```

和：

```
std::function<int(int, int)>* x2 = new std::function<int(int, int)>([=](int a, int b) -> int{return a + b;});

//usage
void set(std::function<int(int, int)>* x);
std::function<int(int, int)>* get(); 
```

我想知道有什么区别，因为我不知道 lambda 函数数据是如何存储的。

我想知道在性能、内存使用方面的最佳方式以及将 lambda 函数作为参数传递或返回 lambda 函数的最佳方式。
如果 lambda 函数对象的大小大于 4 或避免错误，我更喜欢使用指针（如果在我执行归因时执行了某种复制构造函数，或者在我不想要时执行了某种析构函数） .

我应该如何声明 lambda 函数变量？

**编辑**

我想避免复制和移动，我想再次继续使用相同的功能。

我应该如何改变这个例子？

```
int call1(std::function<int(int, int)> f){
    return f(1, 2);
}
int call2(std::function<int(int, int)> f){
    return f(4, 3);
}
std::function<int(int, int)>& recv(int s){
    return [=](int a, int b) -> int{return a*b + s;};
}

int main(){
    std::function<int(int, int)> f1, f2;

    f1 = [=](int a, int b) -> int{return a + b;};
    f2 = recv(10);

    call1(f1);
    call2(f1);
    call1(f2);
    call2(f2);
} 
```

我无法在函数 recv 中返回引用：

```
 warning: returning reference to temporary 
```

这是一个好的解决方案吗？

```
int call1(std::function<int(int, int)>* f){
    return (*f)(1, 2);
}
int call2(std::function<int(int, int)>* f){
    return (*f)(4, 3);
}

std::function<int(int, int)>* recv(int s){
    return new std::function<int(int, int)>([=](int a, int b) -> int{return a*b + s;});
}

int main(){
    std::function<int(int, int)> f1 = [=](int a, int b) -> int{return a + b;};
    std::function<int(int, int)> *f2 = recv(10);

    call1(&f1);
    call2(&f1);
    call1(f2);
    call2(f2);

    delete f2;
} 
```

**编辑（结论）**

lambda 函数对象就像是类实例的任何对象。分配、论据和归属的规则是相同的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T16:55:36.993

创建 的指针是没有意义的`std::function`。它对你没有任何好处。它没有好处，反而给你带来了更多的负担，因为你必须删除记忆。

所以第一个版本（即非指针版本）就是你应该去的。

一般来说，根据经验，尽可能**避免。** `new`

此外，您不需要`std::function`每次使用 lambda。很多时候，您可以只`auto`用作：

```
auto add = [](int a, int b) { return a + b;};

std::cout << add(100,100) << std::endl;
std::cout << add(120,140) << std::endl; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-14T17:04:42.543

您已经明确表示要使用指针。所以……这样做。

但至少使用*智能*指针。正确使用`std::shared_ptr`可以避免很多问题。当然，您必须确保避免循环引用，但对于 lambdas，这似乎不太可能。

当然，这仍然是一个糟糕的主意。但这只是在作​​为一个完全没有意义的过早优化来让自己对传递事物感觉更好的意义上说是可怕的，而不是在代码的实际运行时间中获得任何实际可衡量的好处。至少使用`shared_ptr`，您不太可能意外删除内存或遇到异常安全问题。

* * *

我将忽略糟糕的 C++ 堆分配实践，您可以轻松地进行堆栈分配，以及在不使用智能指针的情况下跟踪此内存的痛苦。这将假设您知道自己在做什么，而是专注于您询问的“性能”和“内存使用”问题。

不要将此视为对您想做的事情的认可。

`std::function`通常会通过对某个对象进行内部堆分配来实现；由于类型擦除，这是必要的。所以它的大小至少是一个指针；可能更多。堆分配的大小可能是 vtable 指针 + lambda 类的大小。其大小取决于您捕获了多少东西以及它是按价值还是参考。

像大多数 C++ 标准库对象一样，`std::function`是可复制的。执行复制实际上*将复制*它，而不是在您现在有两个具有相同指针的对象的情况下进行假装复制。所以每个人都会有一个内部堆对象的独立副本。也就是说，复制它意味着进行另一个堆分配。这也将复制 lambda 本身，这意味着复制其中捕获的所有内容。

然而，像大多数 C++ 标准库对象一样，`std::function`是*可移动*的。这不会*进行*任何内存分配。

因此，如果你想这样做，它非常便宜：

```
std::function<int(int, int)> x1 = [=](int a, int b) -> int{return a + b;};

//usage
void set(std::function<int(int, int)> x);
const std::function<int(int, int)> &get();

set(std::move(x1)); //x1 is now *empty*; you can't use it anymore. 
```

您的`set`函数可以根据需要将其移动到自己的内部存储中。请注意，`get`现在返回一个`const&`; 这取决于这些功能的存储不会随处可见。

会有多便宜`move`？它可能相当于只复制 的字段`std::function`，以及空白或以其他方式中和原始字段。除非您使用的是性能关键代码，否则这将不是您应该关心的任何事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-06T07:32:04.083

以下是我倾向于使用这些新的 lambda 表达式（加上 std::function 和 std::bind）为您提供的“函数式 C++”的指导方针。随意忽略它们或按您认为合适的方式采用它们：

1) 将您想要命名的任何 lambda 分配为 std::function。如果您将它传递给某个函数“X(..)”并且不再查看它，请在函数调用中声明它，以便“X”可以利用它是临时的这一事实。

```
// I want a real name for this (plan to use multiple times, etc.)
// Rarely are you going to do this without moving the lambda around, so
// declaring it as 'auto' is pointless because C++ APIs expect a real type.

std::function<double(double)> computeAbs = [](double d) -> double { return fabs(d); };

// Here, we only ever use the lambda for the call to "X".
// So, just declare it inline. That will enforce our intended usage and probably
// produce more efficient code too.

X([](double r) -> double { return fabs(r); }); 
```

2) 如果您打算在各处移动函数，请在 std::function 周围使用某种引用计数包装器。这个想法是传递一个指向实际 std::function 的安全指针，从而避免昂贵的副本以及担心 new 和 delete。

为此构建您自己的类可能会很痛苦，但它会确保您只需将 lambda、函数 ptr 等实际转换为 std::function 一次。然后，您可以提供像“GetFunction”这样的 API 来为期望它们的 API 返回您按值携带的 std::function。

3) 对于采用 std::function 或 lambdas 的公共 API，只需按值传递。

是的，您可以通过引用甚至 r 值（那些'&&'）引用来工作，在某些情况下它们甚至是正确的解决方案。但是 lambdas 令人讨厌，因为它们的实际类型对您来说实际上是不可知的。但是，它们都可以转换为 std::function，就像所有原始类型都可以转换为“int”一样，因此将它们传递给函数涉及使用相同的技巧，即让您将字符和浮点数传递给像“f(诠释a）”。

即，您创建函数“f”，这些函数要么在仿函数参数的 TYPE 上进行模板化，例如：

```
template<typename Functor>
double f(Functor absFunc); 
```

或者，你让每个人都标准化为 std::function：

```
double f(std::function<double(double)> absFunc); 
```

现在，当您调用“f([](double r) -> double { return fabs(r); })”时，编译器知道如何处理它。用户无需围绕您的 API 编写代码即可获得“正常工作”的东西，这正是您想要的。

# c - Eclipse 中 ANSI-C 的类图代码生成器

> ID：10155445
> 
> 赞同：3
> 
> 时间：2012-04-14T16:51:44.130
> 
> 标签：c, eclipse, eclipse-plugin, code-generation

我想以类似 UML 的方式绘制出我的类（结构），并在 C 中为我生成支持的 shell 代码。这样的东西存在吗？首选免费软件 && Eclipse 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:13:01.250

[Doxygen](http://www.doxygen.nl/)使用点工具构建图

[yEd](http://www.yworks.com/en/products_yed_about.html)是一个很好的图形渲染工具

[Zest](http://www.eclipse.org/gef/zest/)是一个很好的绘图工具箱

如果您的头文件 (*.h) 编写得很好，您可以使用 xText 和 C 语法的子集来解析它们以驱动 yEd、zest 或 dot。

# php - '语法错误，意外的 T_CONSTANT_ENCAPSED_STRING' 将谷歌事件跟踪添加到 Wordpress 插件中的按钮

> ID：10155449
> 
> 赞同：0
> 
> 时间：2012-04-14T16:52:09.077
> 
> 标签：php, google-analytics, wordpress

我正在尝试将 google 事件跟踪添加到 wordpress 插件。这个插件中提交按钮的代码是：

```
{
        return "<input  type=\"submit\" ".
                "name=\"".fm_form_submit_btn_name()."\" ".
                "id=\"".fm_form_submit_btn_id()."\" ".
                "class=\"submit\" ".
                "value=\"".fm_form_submit_btn_text()."\" ".
                "onclick=\"".fm_form_submit_btn_script()."\" ".
                "  />\n";
    } 
```

我正在尝试将谷歌分析跟踪代码添加`onclick=_gaq.push(['_trackEvent', 'Form', 'Submit', 'Apply'])`到上面的块中，并最终替换`'Apply'`为`fm_form_the_title()`返回表单标题的代码。

问题：无论我在插入跟踪代码块时使用哪种引号排列，我都会遇到错误“语法错误，意外的 T_CONSTANT_ENCAPSED_STRING”或“T_STRING”，这会关闭整个站点。

编辑：上面的代码块有效，不需要简化，是一个更大的项目的一部分。我的问题是如何添加`onclick=_gaq.push(['_trackEvent', 'Form', 'Submit', 'Apply'])`并最终替换`'Apply'`为`fm_form_the_title()`而不是破坏我的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:30:03.397

以下是有效的，尽管在返回后使用它的代码可能会在括号、括号或单引号上引发错误。如果这不起作用，请查看它返回后的使用位置并相应地转义特殊字符。

```
function yourfunc() {

  return "<input  type=\"submit\" ".
    "name=\"".fm_form_submit_btn_name()."\" ".
    "id=\"".fm_form_submit_btn_id()."\" ".
    "class=\"submit\" ".
    "value=\"".fm_form_submit_btn_text()."\" ".
    "onclick=\"_gaq.push(['_trackEvent', 'Form',".
    "'Submit', '".fm_form_the_title()."']);".
    fm_form_submit_btn_script()."\"/>\n";

} 
```

尝试在传递给 _gaq.push 方法的数组中不使用单引号。

```
function yourfunc() {

  return "<input  type=\"submit\" ".
    "name=\"".fm_form_submit_btn_name()."\" ".
    "id=\"".fm_form_submit_btn_id()."\" ".
    "class=\"submit\" ".
    "value=\"".fm_form_submit_btn_text()."\" ".
    "onclick=\"_gaq.push([\"_trackEvent\", \"Form\",".
    "\"Submit\", \"".fm_form_the_title()."\"]);".
    fm_form_submit_btn_script()."\"/>\n";

} 
```

我必须同意下面的人的观点，尽管以下内容对于可读性和未来支持都是最好的。

```
function yourfunc() {

  return '<input  type="submit" '.
    'name="'.fm_form_submit_btn_name().'" '.
    'id="'.fm_form_submit_btn_id().'" '.
    'class="submit" '.
    'value="'.fm_form_submit_btn_text().'" '.
    'onclick="_gaq.push(["_trackEvent", "Form",'.
    '"Submit", "'.fm_form_the_title().'"]); '.
    fm_form_submit_btn_script().'"/>\n';

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:08:15.890

既然您要转义引号以放入函数调用中，为什么不使用单引号呢？

```
 return '<input  type="submit" '.
            'name="'.fm_form_submit_btn_name().'" '.
            'id="'.fm_form_submit_btn_id().'" '.
            'class="submit" '.
            'value="'.fm_form_submit_btn_text().'" '.
            'onclick="'.fm_form_submit_btn_script().'" '.
            '  />
         '; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T17:07:14.970

如何简单化这个

```
return '<input  type="submit" '.
'name=\"".fm_form_submit_btn_name()."\" ".
'id="'.fm_form_submit_btn_id().'"'.
'class="submit"'.
'value=\"".fm_form_submit_btn_text().'"'.
'onclick="'.fm_form_submit_btn_script().'"'.
'  />\n'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:11:44.667

尝试

```
return '<input  type="submit" '.
'name=\"".fm_form_submit_btn_name(). '" '.
'id="'.fm_form_submit_btn_id().'" '.
'class="submit" ".
'value="'.fm_form_submit_btn_text().'" '.
'onclick="'.fm_form_submit_btn_script(). '" '.
' />'; 
```

# php - 清理文本？“披头士”到“披头士”

> ID：10155456
> 
> 赞同：1
> 
> 时间：2012-04-14T16:52:52.827
> 
> 标签：php, mysql, .htaccess

我正在网站上制作各种乐队的歌词，我猜很像 Lyrics.com。我现在拥有的是一个页面，该页面与数据库中的乐队名称、歌曲名称和文本本身相呼应。我想对此进行适当的分类。

以“The Beatles”的“Strawberry Fields Forever”为例。

我想把它归类为“B”，就像“Beatles”一样。并且在`Example.com/b/`名单上每个以字母 B 开头的乐队。我的问题：

*   乐队的名字是披头士，但应该去掉“The”。我该怎么做？在数据库中创建两列，这`author`将`authour-clean`是很多工作。

另外，我目前的网址是： `example.com/lyrics.php?id=1` 。我希望这看起来像`example.com/b/beatles/strawberry-fields-forever`。从谷歌搜索我了解到这可以用 .htacces 来完成？我的数据库现在是否为此正确设计？这就是 ATM 的样子：

*（该死，不能发布图片——这里是纯文本）*

```
id (int10)
title (varchar255)
author (varchar255)
lyrics (text) 
```

我在想我需要另一列，例如`category`，对于这个例子，值`b`（如披头士乐队）更容易列出所有以 B 开头的乐队，并确保 htaccess 的事情是可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:04:36.707

> *   乐队的名字是披头士，但应该去掉“The”。我该怎么做？在数据库中创建两列，这`author`将`authour-clean`是很多工作。

虽然这似乎是更多的初始工作，但您会发现它是一种从长远来看需要较少工作的解决方案。

如果您要通过应该如何搜索作者来预先编制索引，那么在返回结果时，您可以让 SQL 为您完成所有工作。

在提取数据时，将数据正确存储在数据库中总是优于进行复杂处理（一遍又一遍）。空间比处理能力便宜很多，更不用说从长远来看这最终会快多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:04:04.890

有几种方法可以实现第一个目标。最好的方法是像 Trendee 建议的 preg_replace 或者甚至将字符串分解为数组，然后搜索您想要替换的单词的实例。数组版本很酷，因为您可以轻松地将内容随机播放。

至于第二个目标，您正在查看 mod_rewrite。发生的事情是，当您访问您的网址 example.com/b/beatles/strawberry-fields-forever 时，您将有一条重写规则，上面写着“将每个 / 视为查询字符串的一部分”，而您定义每一个是什么。所以实际上，您的网址是：

?category=b&band=beatles&song=strawberry-fields-forever。

有很多关于如何做到这一点[的例子](https://www.google.com/search?q=mod_rewrite%20clean%20urls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T16:56:42.657

我认为这可能有用。 [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

# c++ - for 循环/for_each 的每个迭代可以并行完成吗？(C++11)

> ID：10155457
> 
> 赞同：10
> 
> 时间：2012-04-14T16:53:00.807
> 
> 标签：c++, asynchronous, c++11, parallel-processing, future

我正在迭代结构向量并单独处理每个结构。
它看起来像这样：

```
for_each(begin(data),end(data),DoTask);
//assume "data" is std::vector<DataT>  
//assume DoTask is a function that takes a DataT by reference 
```

代码非常慢，因为 DoTask 连接到特定网站并分析 HTML。
加快速度的最佳方法是什么？
我的目标是同时分析多个 DataT。
我对线程很陌生，但[std::async](http://en.cppreference.com/w/cpp/thread/async)和[std::future](http://en.cppreference.com/w/cpp/thread/future)看起来很有希望。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T16:56:47.557

你可以做这样的事情

```
for(T& d : data) std::thread(DoTask, d).detach(); 
```

或者您可以使用更复杂的东西，例如英特尔的线程构建块及其`parallel_for`（不是这个名字吗？）功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T21:52:19.790

你在使用 GCC 吗？最近的版本有一个并行版本`for_each`（请参阅[此处](http://gcc.gnu.org/onlinedocs/libstdc++/manual/parallel_mode.html)了解如何使用它）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T18:44:42.780

如果您以 Windows/VS2010（或更高版本）为目标，您始终可以使用Microsoft[的 The Parallel Patterns Library (PPL](http://msdn.microsoft.com/en-us/library/dd492418.aspx) )。它有`parallel_for_each`：

```
parallel_for_each(values.begin(), values.end(), [] (int& value)
{
  value *= 2;
}); 
```

# javascript - onclick 打开带有预设 html 的颜色框

> ID：10155462
> 
> 赞同：1
> 
> 时间：2012-04-14T16:53:52.117
> 
> 标签：javascript, jquery, events, colorbox

我将从看到/阅读类似的问题开始，据我所知，它们都没有解决我的问题。

我的页面中有以下 HTML：

```
<div id="approve-users-yesno">
   <h1>Approve the following users?</h1>
    <hr />
   <ul id='approve-users-list'>
</ul>
<label>Additional comments: <textarea rows="5" cols="20" id="approve-users-comment"></textarea></label>
<div style="margin-top: 50px;text-align:right;">
<button class="ulink" onclick='approveUsersSubmit();'>YES</button>
<button class="ulink" onclick='cleanCHKBXSelection("approveUsersIDS");'>NO</button>
</div>
</div> 
```

我需要打开一个带有这个 html（上图）的颜色框。现在我正在做一个 hack，它有以下问题：

```
$.colorbox({html:$('#approve-users-yesno').html())}); 
```

如果不复制 DOM 会怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:02:49.257

根据[文档](http://www.jacklmoore.com/colorbox)，使用“内联”选项。[js小提琴](http://jsfiddle.net/C7WaX/)。

```
var $stuff = $('#approve-users-yesno');
$.colorbox({inline:true, href:$stuff}); 
```

# android - 是否有关于为 android 控件使用任意整数 id 的规则？

> ID：10155464
> 
> 赞同：0
> 
> 时间：2012-04-14T16:54:21.540
> 
> 标签：android, viewgroup

我正在编写一个应用程序，它将一系列控件存储在数据库中，以便在运行时在屏幕上绘制。我想将数据库 ID 分配为控件 ID，以便更轻松地将任何给定控件链接到其数据库记录。控件 ID 是否需要在其直接父级之外是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:04:37.140

看起来我能够回答我自己的问题。android.View 状态的参考文档：`View IDs need not be unique throughout the tree, but it is good practice to ensure that they are at least unique within the part of the tree you are searching.` 从中我确定它们不需要是唯一的。您可能会认为 google 会在心跳中给出这个答案，但几乎所有关于 View 或 Control ID 的在线参考都谈到了 XML 属性。

# java - java - 找出实现其他类的类的类型

> ID：10155469
> 
> 赞同：0
> 
> 时间：2012-04-14T16:55:39.670
> 
> 标签：java, class, instance

我有一个具体的问题，比如说，我有

```
public interface A {
}

//------------------------------

public class B implements A {

    static int countx = 0;
}

//----------------------------------
public class C implements A {

    static int county = 0;
}

//----------------------------------

public class Arc {

    public A from;
    public A to;

//======================================== 
```

现在我有一个对象 a （它是 Arc 的一个实例），我想知道它是 B 还是 C 的一个实例，并得到属性 countX 或 countY （stg like a.from.countX）有什么想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:58:08.833

我认为您可以使用 instanceof 来解决此问题

如在

```
if(a instanceof B) return a.countx
if(a instanceof C) return a.county 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:59:03.700

使用`instanceof`和类型转换：

```
if (a.from instanceof B) {
    B b = (B)a.from;
    b.countx;
} 
```

编辑：但你真的不需要这样的东西！如果你这样做了，你可能可以重新设计它以不产生像这样丑陋的代码。

例如，您可以让您的接口`A`有一个方法`getCount()`，并让您的类 B 和 C 实现这些，方法是返回`countx`or `county`。

Edit2：我刚刚注意到您`countx`和`county`成员是`static`！为什么要这么做？`static`意味着，它们不会“作用”于您的类的实例，而是作用于您的类对象（它们是“类成员”）。这意味着您可以*在任何地方*访问和修改这些变量，方法是通过`A.countx`或访问它们`B.county`；你很可能不想要这个，因为类的多个实例`A`将*共享*相同的`countx`！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T16:59:27.690

从 OOP 的角度来看，您当前的设计并不好。你需要一些封装和多态性。在 OOP 语言中，您无需显式**检查**对象的类型，而是通过动态分派自动安排检查对象的类型。因此，无论您需要来自 B 和 C 的任何数据，都向接口 A 添加一个方法，该方法将获取该数据，然后相应地在 B 和 C 中实现该方法。另外，不要使用公共实例字段，这会破坏封装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T16:58:29.633

如果你有一个对象是 Arc 的实例，那么它怎么也是 B 或 C 的实例？我觉得你的代码有缺陷，需要重组。例如，正如 Tudor 所指出的，“你的层次结构中的类 Arc 和 A 之间没有关系。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T17:16:13.673

如果您只是想了解有关课程的信息：

```
getClass().getSuperclass() 
```

问候， 厄瓦尔德

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T17:25:15.237

这样想：

*是什么让我想区分 B 和 C ？* 是手术吗？如果是这样，只需在 B 和 C 中适当地实现这些操作，然后让动态调度处理其余的事情。

```
interface Operation { 
    public Result operate(String[] args);
}

class A implements Operation { 

    @Override
    public Result operate(String[] args) { 
        //I need to do some special calculations for an A...           
        for(String arg : args) { 

        }
        .
        .
        .
    }
}

class B implements Operation { 

    @Override
    public Result operate(String[] args) { 
        //i know this does nothing so return the empty result
        return Result.EMPTY;
    }
} 
```

抵制使用的诱惑`instanceof`。在大多数情况下，您不需要它——而且它不是面向对象的。

# c++ - c++ 多重继承

> ID：10155473
> 
> 赞同：1
> 
> 时间：2012-04-14T16:56:18.290
> 
> 标签：c++, multiple-inheritance

我无法弄清楚在以下情况下会发生什么：

```
class MBase {
    public:
       MBase(int) {}
       virtual char* vf() const = 0;
       virtual ~MBase() {}
};

class D1 : public MBase { //NOT VIRTUAL!!!
   public:
   D1() : MBase(1) {}
   char* vf() const { return "D1"; }
};

class D2 : virtual public MBase {
    public:
        D2() : MBase(2) {}
        char* vf() const { return "D2"; }
};

class Bottom : public D1, public D2 {
  public:
    char* vf() const { return "Bottom"; }
}

Base* b = new Bottom(); 
```

在菱形的原始定义中，D1 和 D2 实际上都继承自 MBase，但这里只有一个。我们在底部对象中是否仍然有两个单独的子对象，因此最后一行将不会编译，因为编译器不知道要使用哪个子对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:04:22.153

这在 C++03 标准的第 10.1.4 节中指定。虚拟和非虚拟基础是独立的，所以每个都有一个。

通过扩展您的示例很容易看到这一点：

```
class MBase {
    public:
       MBase(int arg) { cerr << "MBase::MBase(" << arg << ")\n"; }
       virtual const char* vf() const = 0;
       virtual ~MBase() {}
};

class D1 : public MBase { //NOT VIRTUAL!!!
   public:
   D1() : MBase(1) {}
   const char* vf() const { return "D1"; }
};

class D2 : virtual public MBase {
    public:
        D2() 
        : MBase(2) // This doesn't get used in this example because
                   // it is the responsibility of the most-derived
                   // class to initialize a virtual base, and D2 isn't
                   // the most-derived class in this example.
        {
        }
        const char* vf() const { return "D2"; }
};

class Bottom : public D1, public D2 {
  public:
    Bottom() 
    : MBase(5) // D1 and D2 default constructors are called implicitly.
    { 
    }
    const char* vf() const { return "Bottom"; }
};

int main(int argc,char **argv)
{
  Bottom b;
  return 0;
} 
```

输出：

```
MBase::MBase(5)
MBase::MBase(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:05:21.980

我认为您的问题与此类似...基本上，每个对象都有自己的 mBase 类的基本对象...

[钻石传承](https://stackoverflow.com/questions/5864466/c-multiple-inheritance-why-you-no-work)

问候， 厄瓦尔德

# eclipse - 是否可以更改 Eclipse 的窗口颜色（灰色为其他颜色）？

> ID：10155476
> 
> 赞同：2
> 
> 时间：2012-04-14T16:56:36.420
> 
> 标签：eclipse, osx-lion, background-color

我使用的是 OS X Lion，昨晚买了一台戴尔显示器。

几分钟前，我发现在 Eclipse 的默认窗口背景颜色下，颜色像荧光灯一样颤抖。那个颜色是 (233,233,233)，我发现这种颜色让屏幕的那部分在任何情况下都会颤抖。我的意思是，如果我将桌面颜色设置为该颜色，则桌面会颤抖。

我在同一台 Mac 上安装了 Windows，所以我用 Windows 7 启动，但是 (233,233,233) 并没有使屏幕颤抖。也许是因为 Lion 操作系统。

现在，随着Eclipse的背景在颤抖，写代码真的很烦人。我调查了首选项，但找不到任何更改窗口背景颜色的选项。我怎样才能做到这一点？

如果颜色与系统偏好相关，我该如何更改系统颜色？我也无法更改“系统偏好设置”对话框中的任何选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:04:23.703

You can change the background color of text editors via Preferences -> "Text Editors". Though, I'm not sure whether it will be any prettier than what you see today...

![enter image description here](../Images/b2883a88b0f86f3f47e87ecba417cd8c.png)

# php - 如何以php形式使用可变数量的字段更新sql表

> ID：10155477
> 
> 赞同：1
> 
> 时间：2012-04-14T16:56:38.640
> 
> 标签：php, mysql, forms

我在表单中有可变数量的字段。文本字段的数量由用户在 jquery 中使用函数定义，但表单（示例）的最终代码是这样的：

```
<form id='form_educ' name='form_educ' method='post' action='form/educ.php'>   
  <div id='educ'>
    <input type='text' name='date1' id='date1'/>
    <input type='text' name='date2' id='date2'/>
    <input type='text' name='date3' id='date3'/>
    <input type='text' name='date4' id='date4'/>
    ....   
  </div> 
  <input type='submit' name='form_educ' value='Refresh'/>
</form> 
```

用户添加这些文本字段时会创建一个 sql `INSERT TO`（在另一个文件中）：

```
$date = clean($_GET['date']);

"INSERT INTO educ (index_of_form, date, email) VALUES('$index', '', '" .mysql_real_escape_string($_SESSION['SESS_EMAIL']). "')"; 
```

`$date`是 date1，或 date2，或 date3 或 date4（示例）。

现在在文件中，`educ.php`我想更新 mysql 数据库中的所有文本字段。

通常它是一个

```
$example = clean($ _POST ['example']); 
```

我可以在表格中进行更新并得到解决。

但是在我的情况下，`$_POST`如果字段数是可变的（可以是date1，date2，date3，date4），如何获取表单上文本字段的所有值并设置var？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:48:31.543

我想不出为什么表单字段名称应该是未知变量。除非您正在处理可重复的字段，否则在这种情况下，您将使用类似 的数组`dates[]`，并且您会知道流程脚本中会发生什么。

有关其他信息，请参见例如：[http ://www.web-design-talk.co.uk/58/adding-unlimited-form-fields-with-jquery-mysql/](http://www.web-design-talk.co.uk/58/adding-unlimited-form-fields-with-jquery-mysql/)

对未来的警告。当您使字段可重复时，还允许用户删除他们可能意外插入的字段。注意流程脚本中缺少数组键（如果用户在提交之前删除了某些表单字段，则从 0 到 10 的数字索引可能会丢失一些值）。[您可以使用array_merge](http://php.ca/manual/en/function.array-merge.php)函数重置数组键。如果您尝试将两个数组作为同步添加到数据库中，则缺少键是一个问题。

* * *

更新以回答评论。

对不起，我不明白你的问题。您不一定必须使用隐藏字段。您需要的是与表单功能相匹配的数据库结构：支持一对多关系。毕竟，您要插入与一个人或某些特定事件类型或其他任何事物相关的多个日期。让我们假设一位用户想要添加他在世界上最喜欢的三个日期。您的表单源代码如下所示：

```
<input type="text" name='dateLover' id='dateLover'/>

<input type="text" name="dates[]" id="date1" /> //you need a increasing variable for these id numbers (or dont't put the id at all)
<input type="text" name="dates[]" id="date2" />
<input type="text" name="dates[]" id="date3" /> 
```

此外，您可以拥有更多字段，例如`<input type="text" name="extra" />`. 在提交`$_POST`的数组中会有变量和数组，例如：`$_POST['dateLover']`, `$_POST['date'][0]`, `$_POST['date'][1]`, `$_POST['date'][2]`, `$_POST['extra']`. 您可以直接从`$_POST`数组中取出不可重复的值，但您需要一个`foreach`（或其他循环）来处理日期数组。

您的数据库必须包含两个表（结构简化）：

1.  `person`: `id`,`dateLover`
2.  `date`: `id`, `dateLover`FK to person.dateLover,`date`

在您的流程脚本中，您必须：

1.  插入一个新`dateLover`的`person`并`last_insert_id`用来获取他的`id`
2.  使用 a`foreach`将新的s插入`date`到表中`date`（使用 a作为 FK）`dateLover``id`

这一切都在我之前提供的链接中得到了很好的证明。目前，如果不了解实际问题，很难给出一个完整的例子。

* * *

更新 2。

您正在序列化表单，而不是`div`'s. 所以你的（动态生成的）可能看起来像这样：

```
<form id="form_educ" name="form_educ" method="post" action="form/educ.php">
<div id="educ">   
    <div><!--This is for layout only-->
        <input type="text" name="dates[]" id="date0" />
        <input type="text" name="names[]" id="name0" />
    </div>
    <div>
        <input type="text" name="dates[]" id="date1" />
        <input type="text" name="names[]" id="name1" />
    </div>
    <div>
        <input type="text" name="dates[]" id="date2" />
        <input type="text" name="names[]" id="name2" />
    </div>
  </div> 
  <input type="submit" name="form_educ" value="Refresh" />
</form>​ 
```

在您的流程文件中，您从数组中获取这些数组`$_POST`并将它们插入到数据库中，可能像这样（当然有正确的转义和检查值......）：

```
//dynamic part of the query
$qEnd = '';
$i = -1;

//this is static part of the query
$qBeginning = "INSERT INTO `date` (`id`, `date`, `name`) VALUES ";

foreach ($_POST['dates'] as $key => $date){
  $i++;
  $qValues[$i] = "(null, '{$date}', '{$_POST[names][$i]}')"; //never do this, always check values...

  //value sets are concatenated one after another to the $qEnd
  $qEnd .= $qValues . ',';
}

//combine the query parts and remove extra "," from the end
$q = $qBeginning . rtrim($qEnd, ',');

//now the (single) query ($q) is ready to be executed, echo it just for the fun of it 
```

`id`应该是自动增量字段，否则这种东西不能即时工作。

同样，这一切都应该在 jQuery 链接示例中很清楚，所以请仔细阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:01:33.690

您应该事先了解所有可能更新的列。只需检查是否在 $_POST 变量中设置了这些值，然后它们是否在插入或更新语句中附加了这些值。

危险：只是循环查看所有参数的 $_POST 变量可能最终会在插入语句中插入与数据库无关的 POST 字段并中断。

此外，在使用这些方法时，请注意 SQL 注入，并使用参数化查询，切勿将 POST 变量名称或值直接插入 SQL 语句中。

# jquery - 如何在点击时“删除”禁用的属性？

> ID：10155481
> 
> 赞同：0
> 
> 时间：2012-04-14T16:57:21.157
> 
> 标签：jquery

我无法让它正常工作。我正在尝试删除单击时禁用的属性，以便我可以对其进行编辑。

我的 jQuery：

```
$('#edit-credentials').click(function() { 
    $('#credentials :input').prop("disabled", !$('#credentials:input').prop("disabled")) 
}); 
```

HTML：

```
<a id="edit-credentials" onclick="return false;" href="#">edit</a>

<div id="credentials">
<input disabled="disabled">
<input disabled="disabled">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:01:11.437

有什么问题

```
$('#credentials :input').prop("disabled", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:07:03.793

您可以通过以下方式从输入中删除禁用属性

```
$('#credentials :input').removeAttr("disabled"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:21:27.737

尝试这个：

```
$("#edit-credentials").click(function() {
  $('#credentials :input').removeAttr("disabled");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T20:44:12.047

我才知道为什么。我错过了一个空间。我什至将这里的错误复制到原帖中！

```
$('#edit-credentials').click(function() { 
    $('#credentials :input').prop("disabled", !$('#credentials:input').prop("disabled")) 
}); 
```

中添加的空间`#creditials :input`。

```
$('#edit-credentials').click(function() { 
    $('#credentials :input').prop("disabled", !$('#credentials :input').prop("disabled")) 
}); 
```

# php - 运行这段代码时会发生什么？

> ID：10155487
> 
> 赞同：0
> 
> 时间：2012-04-14T16:58:02.140
> 
> 标签：php, mysql

我正在运行这段代码：

```
$sql = "SELECT IF(TIMEDIFF(NOW(),last_update) > '02:00:00',1,0) AS morethan FROM products LIMIT 1";

    if($stmt = $this->connect->prepare($sql)) {
        $stmt->execute();
        $stmt->bind_result($result);
        $stmt->fetch();
        $stmt->close();
    } else {
        return false;
    }

    return $result; 
```

我明白`0`了，这意味着我正在检查的差异没有找到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:05:07.213

Mysql IF 的工作原理是这样的：

```
IF(condition, true, false) 
```

您在结果“超过”中收到 0 这意味着

```
TIMEDIFF(NOW(),last_update) > '02:00:00' 
```

为假，换句话说 timediff 小于 02:00:00

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:10:08.397

您可以重写您的查询，只需删除`IF`：

```
SELECT (TIMEDIFF(NOW(),last_update) > '02:00:00') morethan FROM products LIMIT 1 
```

您的查询实际上会不确定地从表 products 中获取一行（这意味着您无法预测哪一行）并检查它是否符合您的条件。如果是，则查询将返回`1`，否则返回`0`。我想这不是你的本意，对吧？

如果您想检查是否有任何行满足该条件，您可以这样做：

```
select 1 existsInTable from products
where TIMEDIFF(NOW(),last_update) > '02:00:00'
limit 1 
```

这将在找到匹配项时返回`1`，当未找到匹配项时返回空结果集。您甚至不需要检查返回的值，因为您只需计算查询返回的整数个数[`mysql_num_rows`](http://php.net/manual/en/function.mysql-num-rows.php)。

# c++ - GLMmodel 顶点中的 -431602080.000000 值是什么意思？

> ID：10155491
> 
> 赞同：0
> 
> 时间：2012-04-14T16:58:11.567
> 
> 标签：c++, c, 3d, glm-math, vertices

我使用[GLMmodel](https://web.archive.org/web/20090524183306/http://www.anirudh.net/phd/code/html/html/structGLMmodel.html)对象来表示 C++ 程序中的 Google Sketch Up 模型。这些对象有一个成员（顶点），其中包含对象所有顶点的列表，其方式如下：[GLfloat x 顶点 1 分量，GLfloat 顶点 1 分量，GLfloat z 顶点 1 分量，GLfloat x 分量顶点 2...]。当我读取所有这些值时，除了前三个（第一个顶点的坐标）都是三个 -431602080.000000 之外，我得到了所有这些值的小数字。这在我的程序中没有意义。我用谷歌搜索了它，我发现这个值经常出现在 C++ 程序中，但我不知道它是什么意思。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T18:14:02.960

是的，这是一个“神奇的价值”。当您使用调试器查看变量时，使用十六进制视图，您将看到 0xcdcdcdcd。这不是一个偶然的值，而是 Microsoft CRT 的调试分配器使用的值。一方面，可能还有其他人。它将您使用 malloc 或 new 分配的任何内存初始化为此值。当然，对于 float 或 double 类型的变量并不是很清楚，对于 int 和 strings 更容易，对于指针尤其有用。假设您使用的是 MS CRT，[此处记录了](http://www.nobugs.org/developer/win32/debug_crt_heap.html)调试分配器魔法值。

您忘记初始化该值。这是您的代码中的一个错误。

# android - onCreateOptionsMenu 多次点击片段

> ID：10155495
> 
> 赞同：4
> 
> 时间：2012-04-14T16:58:30.637
> 
> 标签：android, android-fragments, actionbarsherlock, android-menu

我有两个 ListFragment （A 和 B，实际上是`SherlockListFragments`），当我在两个片段中放置断点时`onCreateOptionsMenu`，片段 A 被命中 3 次，片段 B 被命中 2 次。此外，我正在为其中一个菜单图标设置动画`AsyncTask`，如果我在 Fragment A 中选择一个项目，`onCreateOptionsMenu`则会再次调用该图标并且图标加倍：

![在此处输入图像描述](../Images/a09d703124cbaf243c78b58b1dd73016.png)

我不确定为什么`onCreateOptionsMenu`会再次调用，因为我只是在“详细信息”片段中调用一个方法：

```
@Override
public void onListItemClick(final ListView l, final View v, final int position, final long id)
{
    DetailsFragment fragment = (DetailsFragment)getFragmentManager().findFragmentById(R.id.fragmentDetails);

    if (fragment != null && fragment.isInLayout())
    {
        fragment.DisplayItems();
    } 
    else 
    {
        final Intent listing = new Intent(activity.getApplicationContext(), DetailsFragmentActivity.class);
        startActivity(listing);
    }
} 
```

更新：

我正在使用此代码为菜单项设置动画：

```
private MenuItem refreshItem;   

private void DoRefresh() 
{
    final LayoutInflater inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

    final Animation rotation = AnimationUtils.loadAnimation(activity, R.anim.refresh);
    ImageView ivRefresh.startAnimation(rotation);

    refreshItem.setActionView(ivRefresh);

    //AsyncTask is kicked off here
}

@Override
public boolean onOptionsItemSelected(final MenuItem item) 
{
    if (item.getItemId() == R.id.refresh) {
        refreshItem = item;
        this.DoRefresh();
        return true;
    } else {
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:41:58.367

从文档中：

“系统调用 onCreateOptionsMenu() 后，它会保留您填充的菜单的一个实例，并且不会再次调用 onCreateOptionsMenu()，除非菜单由于某种原因而无效。但是，您应该仅使用 onCreateOptionsMenu() 来创建初始菜单状态并且不要在活动生命周期中进行更改。”

我的猜测是菜单因您正在做的事情而失效。fragment.displayItems() 有什么作用？

# vb.net - 合并两个 VB.Net 项目

> ID：10155496
> 
> 赞同：1
> 
> 时间：2012-04-14T16:58:37.267
> 
> 标签：vb.net, visual-studio-2010

我们是 Visual Basic 编程的新手，我们正在开发一个包含模块的项目。我的团队处理这些模块并准备了 3 个单独的 Visual Studio 项目。现在，我想将其合并到一个 Visual Studio 项目中以进行集成。我们正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:20:43.297

在解决方案资源管理器窗口（默认为右上角）中，您需要：

1.  ***右键单击您的解决方案***
2.  向下***添加***
3.  选择**现有项目**
4.  这将弹出一个 Windows 浏览器窗口，您需要导航到保存文件的位置，然后单击**打开**
5.  对所有后续项目重复步骤 1-4。

根据您所说的，听起来您需要在主项目中添加对模块的引用：

1.  通过在解决方案资源管理器中选择***显示所有文件***，确保您正在查看解决方案中的所有文件
2.  去***参考***
3.  单击***添加参考***- 将弹出一个窗口
4.  在左上角，选择***项目***
5.  在弹出窗口中***右键单击***项目名称并选择***添加引用***

你应该从这里很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:24:26.027

您的问题不清楚是否要将单个项目中的代码添加到一个项目或将您的项目添加到一个解决方案。

1.  在第一个实例中，使用您想要作为主项目的项目并右键单击该项目并选择添加现有项目以选择您想要添加的 .vb 模块文件。
2.  在第二个实例中创建一个空白解决方案文件 -> 新项目 -> 其他项目类型 -> Visual Studio 解决方案 -> 空白解决方案，然后右键单击新解决方案并选择添加 -> 现有项目以添加您的项目

# java - 读取文本文件时出现 FileReader 错误

> ID：10155497
> 
> 赞同：1
> 
> 时间：2012-04-14T16:58:38.423
> 
> 标签：java, file-io, io

我正在尝试将数组字符串存储在文本文件中并读取它。但我无法让它工作。我收到 NullPointerError。

```
Exception in thread "main" java.lang.NullPointerException
   at java.io.FileInputStream.<init>(Unknown Source)
   at java.io.FileReader.<init>(Unknown Source)
   at in.isuru.justconverter.FileDbTool.readFile(FileDbTool.java:41)
   at in.isuru.justconverter.Test.main(Test.java:10) 
```

这里有两节课。

```
package in.isuru.justconverter;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;

import javax.swing.JOptionPane;

public class FileDbTool {

File dataFile;
ArrayList<String> filePath;

public void checkFile(){
    dataFile = new File("db.txt");
    if(dataFile.exists()){
        readFile();
    }else{
        try {
            dataFile.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            JOptionPane.showMessageDialog(null, "Coudn't Create New File!");
            System.exit(1);
        }
    }
}

public void readFile(){

    int len;
    try{
        char[] chr = new char[4096];
        StringBuffer buffer = new StringBuffer();
        FileReader reader = new FileReader(dataFile);
        try {
            while ((len = reader.read(chr)) > 0) {
                buffer.append(chr, 0, len);
            }
          }finally {
             reader.close();
          }
        System.out.println(buffer.toString());
        StringTokenizer st = new StringTokenizer(buffer.toString(), ",");
        while (st.hasMoreTokens()) {
            String value = st.nextToken();
            filePath = null;
            filePath = new ArrayList<String>();
            filePath.add(value);
        }

    }catch(IOException e){
        JOptionPane.showMessageDialog(null, "Read Error");
    }
}

public String[] getFilePathArray(){
    readFile();
    return filePath.toArray(new String[filePath.size()]);
}

public File[] getFiles(){
    String[] paths = getFilePathArray();
    ArrayList<File> files = new ArrayList<File>();
    for(int i = 0; i < paths.length; i++){

        File file = new File(paths[i]);
        files.add(file);
    }

    return files.toArray(new File[files.size()]);
}

public void eraseFile(){
    dataFile.delete();
}

public void writeFile(String[] stuff){
    try{
        BufferedWriter out = new BufferedWriter(new FileWriter(dataFile, true));
        out.append(stuff + ",");
    }catch(IOException e){

    }
}

public void writeToDb(String[] array){
    writeFile(array);
}

} 
```

和主班

```
package in.isuru.justconverter; 
```

公共类测试{

```
/**
 * @param args
 */
public static void main(String[] args) {
    FileDbTool app = new FileDbTool();
    app.checkFile();

}

} 
```

嗯，这是一个摇摆程序的一部分。我正在尝试将文本文件用作小型数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:01:25.267

第 41 行是这样的：

```
FileReader reader = new FileReader(dataFile); 
```

所以我敢打赌`dataFile`这里是空的。

但是，您似乎确实在调用此方法之前对其进行了初始化，否则将在内部抛出异常`checkFile`。

你确定你没有先打电话就`readFile`直接打电话给某个地方`checkFile`吗？在任何情况下，这种模式都不是推荐的方法，因为您要求您的类的用户以特定的顺序调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:14:37.793

从堆栈跟踪来看，您似乎直接从 main 调用 readfile() 而不是通过 checkfile() 。所以 dataFile 是 null 因为它没有被 checkfile 初始化。堆栈跟踪和给定的代码也不匹配。当使用 null 参数调用 FileReader 构造函数时，它会在到达 FileInputstream 构造函数时抛出 NullPointerException。这是来自 jdk 源的代码：

```
 public FileInputStream(File file) throws FileNotFoundException {
String name = (file != null ? file.getPath() : null);
SecurityManager security = System.getSecurityManager();
if (security != null) {
    security.checkRead(name);
}
    if (name == null) {
        throw new NullPointerException();
    }
fd = new FileDescriptor();
    fd.incrementAndGetUseCount();
open(name);
} 
```

# opencl - opencl 同步

> ID：10155499
> 
> 赞同：0
> 
> 时间：2012-04-14T16:58:54.400
> 
> 标签：opencl

我是 opencl 的新手，似乎有一些关于屏障功能的东西我不明白。这是我的内核的代码。这是一个标准矩阵向量计算，输出为 *w。有1个工作组，64个工作单元，与向量的维数相同

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
__kernel void fmin_stuff(__global double *h, __global double *g, __global double  
  *w,int n,__global int * gid) {

// Get the index of the current element
int i = get_global_id(0);
int j;
gid[i]=get_local_id(0);

w[i]=-g[i];
barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);
for (j=0;j<n;j++)
{
  if (j<i)
    w[i]-=h[i+j*n]*w[j];
  barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);
}
} 
```

问题是代码随机失败。输出是正确的一段时间。这是每次运行的 w 的初始值。

```
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.34999 2.51524 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.10141 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.72261 2.80155 
-0.148351 -0.309007 0.133204 -1.39589 2.88335 -2.68636 2.77369 
```

该程序报告内核在每种情况下都成功执行。对于所有运行，向量 w 中的值最终都是不正确的。任何建议将不胜感激。

对于这是否是简单的矩阵乘法存在一些混淆。它不是。这就是代码试图完成的任务，我只包含 w 的前 5 个术语。

```
w(1)=-g(1);
w(2)=-g(2);
w(3)=-g(3);
w(4)=-g(4);
w(5)=-g(5);

w(2)-=h(2)*w(1);
w(3)-=h(3)*w(1);
w(4)-=h(4)*w(1);
w(5)-=h(5)*w(1);

w(3)-=h(3+N)*w(2);
w(4)-=h(4+N)*w(2);
w(5)-=h(5+N)*w(2);

w(4)-=h(4+2*N)*w(3);
w(5)-=h(5+2*N)*w(3);

w(5)-=h(5+3*N)*w(4); 
```

此外，每个程序运行只调用一次内核。随机行为源于多次运行程序。

该评论使我看到我做错了什么。我将工作组和项目配置为

```
size_t global_item_size[3] = {N, 1, 1}; // Process the entire lists
size_t local_item_size[3] = {1,1,1}; // Process in groups of 64
ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL,
        global_item_size, local_item_size, 0, NULL, NULL); 
```

应该是什么时候。

```
size_t global_item_size[3] = {N, 1, 1}; // Process the entire lists
size_t local_item_size[3] = {N,1,1}; // Process in groups of 64
ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL,
        global_item_size, local_item_size, 0, NULL, NULL); 
```

谢谢您的帮助。这对我来说很好，但其他人可能不太感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:41:34.127

首先，您不需要在您的情况下使用 CLK_LOCAL_MEM_FENCE 。

但是我建议复制

1.  全局 -> 本地
2.  使用本地数据
3.  复制本地 -> 全局

在这种情况下，您将需要 CLK_LOCAL_MEM_FENCE

现在回到你的问题。据我所知，如果工作组中的不同项目执行此行，则可能会出现问题：

```
w[i]-=h[i+j*n]*w[j]; 
```

不是同时。想象一个工作项已经为 w[i] 计算了值，然后其他工作项访问 w[j]。然后，如果我们的第二个工作项的“j”与第一个工作项的“i”相同，其他工作项将使用其第一个迭代值，该值已经被第一个工作项更新。

接下来你应该做的是（如果你仍然想使用全局内存）：

我还假设 n < N（您的工作组大小），否则无法同步，因为您跨越多个工作组

```
for (j=0;j<n;j++)
{
    double wj;
    if (j<i)
        wj = w[j];
    barrier(CLK_GLOBAL_MEM_FENCE); // read_mem_fence(CLK_GLOBAL_MEM_FENCE) is enough
    if(j<i)
        w[i]-=h[i+j*n]*wj;
    barrier(CLK_GLOBAL_MEM_FENCE);  // write_mem_fence(CLK_GLOBAL_MEM_FENCE) is enough
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:20:56.627

您能否详细说明一下，为什么您的内核中需要 global_id 和 local_id？

如果您只有一个工作组，那么 local_id 就足够了。

另外，为什么要将数据从g复制到w？

您是否试图实现的不仅仅是：w=h*g，其中 h 是矩阵，g 是向量？

最后，如果您不是简单地多次重新启动您的应用程序，而是您只是在一个应用程序中多次启动内核，那么似乎最可能的解释是您在某处损坏了内存，即。您正在覆盖输入数据。

您能否检查传递给内核的输入数据在同一运行时是否一致？

# javascript - jquery在函数ajax函数中存在全局变量问题

> ID：10155503
> 
> 赞同：-1
> 
> 时间：2012-04-14T16:59:19.533
> 
> 标签：javascript, jquery

以下是代码：

```
var ret;
function fetch_data(param1){
  $.post(param1,
        function(data){
          if (data){
            ret = data*2;
            console.log("data", ret);
          }
          else{
            ret = 15;
            console.log("no data")
          }
        });
  return ret;
}

function hello(){
  ret = fetch_data("/post_data");
  console.log("from the main function", ret);
} 
```

以上是我如何处理事物的简化模式。我向 url 发出 post 请求并尝试获取该值，基于返回的值我操纵该值并尝试将其返回给函数。显示函数`console.log`内部的值`fetch_data`，而不是`hello`函数内部的值。表示不返回任何值。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:05:40.160

在您的 javascript 进行初始 ajax 调用之后，脚本的执行将继续执行 return 语句。此时尚未返回对您请求的响应，因此您的回调函数尚未执行，这意味着尚未为 ret 赋值。您需要在回调函数中包含对 hello 的调用，以确保已为 ret 分配了一个值。

```
 var ret;
    function fetch_data(param1){
      $.post(param1,
            function(data){
              if (data){
                ret = data*2;
                console.log("data", ret);
              }
              else{
                ret = 15;
                console.log("no data")
              }
              hello();
            });
    }

function hello(){
  ret = fetch_data("/post_data");
  console.log("from the main function", ret);
} 
```

Ajax 可以通过两种方式访问​​服务器。它们是同步的（脚本停止并等待服务器在继续之前发送回回复）和异步的（脚本允许页面继续被处理并在回复到达时处理）。您的函数正在异步执行，这意味着 fetch_data 函数在 ajax 调用完成之前执行 return 语句。

事件顺序：

1.  fetch_data 被调用
2.  fetch_data 触发 ajax 请求。
3.  获取数据返回 ret(undefined)
4.  hello 函数将 ret 打印到控制台
5.  从服务器收到ajax响应
6.  ret 被分配一个基于 ajax 响应的值

我想进一步建议您将代码修改为我认为更好的方法。我相信这种方法比在回调中指定 hello 函数更能捕捉到您的意图。

```
 function fetch_data(param1,callback){
      $.post(param1,
            function(data){
              callback(data);
            });
    }

function hello(data){
    if (data){
       ret = data*2;
       console.log("data", ret);
     }
     else{
       ret = 15;
       console.log("no data")
     }
  console.log("from the main function", ret);
}

function hello2(data){
  //...different logic that modifies data
  console.log("from the main function", ret);
}

//Function call passing the hello function as a parameter
fetch_data('/post_data', hello);

//Function call that passes hello2 function as a parameter
fetch_data('/post_data', hello2); 
```

# javascript - 在所有 jQuery Mobile 页面中使用相同的页眉/页脚

> ID：10155507
> 
> 赞同：2
> 
> 时间：2012-04-14T17:00:01.547
> 
> 标签：javascript, jquery, html, mobile, jquery-mobile

我正在开发一个使用 jQuery Mobile 和 JSONP 请求来更新内容的 Web 应用程序。项目要求之一是不能使用服务器端 Web 语言，因为目标是使用 PhoneGap 来构建 Web 应用程序。

由于我不能使用服务器端方法，例如`include`，我正在考虑通过 AJAX 加载 HTML 页面的内容，`data-role="content"`以便在所有页面中使用相同的页眉/页脚，而无需复制代码或通过 JavaScript 生成他。这种方法的问题是我无法使用一些很酷的 jQuery Mobile 功能，例如元素自动初始化、页面转换、后退/前进浏览器按钮等。

通过 JavaScript 在所有 jQuery Mobile 页面中使用相同页眉/页脚的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:01:04.083

好吧，您可以从 Web 服务发送每个页面的页脚、页眉和内容，并更新页面。通过这种方式，您还可以动态更改（页眉/页脚）导航栏中的链接（例如，取决于用户是否登录。）

您可以使用**pagebeforeshow**事件来更新 HTML $(document).on("pagebeforeshow", function (event, data) { // });

# android - 开源/免费 iOS 企业商店

> ID：10155508
> 
> 赞同：0
> 
> 时间：2012-04-14T17:00:28.503
> 
> 标签：android, iphone, ios, xcode, enterprise

是否有任何开源/免费（您可以在服务器上安装和修改）企业应用程序分发服务器解决方案。我知道很多（试飞、nukona 等），但我们不能使用它们，因为它们是其他人的解决方案。

如果它支持其他平台，如 Android 或 WP7，那就太好了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:08:15.510

从 Apple 的 iOS 开发人员库中查看以[无线方式安装应用程序。](https://help.apple.com/iosdeployment-apps/?lang=en-us#app43ad871e)

我不知道 Android 或 WP7。

# sql-server-2008 - NHibernate : 将 VARBINARY 存储到 MAX

> ID：10155509
> 
> 赞同：5
> 
> 时间：2012-04-14T17:00:34.190
> 
> 标签：sql-server-2008, nhibernate, blob, serializable, varbinary

我正在使用以下映射将 Serializable 对象存储到 SQL Server 2008：

```
<class name="EMSApplication.Data.Domain.Configuration, EMSApplication.Data" table="ems_Configurations" proxy="EMSApplication.Data.Domain.IConfiguration, EMSApplication.Data" lazy="true">
  <id name="Id" type="System.Int32">
    <column name="Id" not-null="true"/>
    <generator class="native"/>
  </id>
  <property name="Settings" type="Serializable">
    <column name="Settings" not-null="true"/>
  </property>   
</class> 
```

它正在为数据库的列类型生成一个 varbinary(8000)。我怎样才能使它使用 varbinary(max)？

如果我使用：

```
<property name="Settings" type="Serializable" length="2147483647">
    <column name="Settings" not-null="true"/>
</property> 
```

它也被截断为 8000。我正在使用 NHibernate3.2（不流利）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:33:08.210

根据 nHibernate 文档，“长度”不是 <property> 的属性/属性，而是应该在 <column> 中使用。

本节显示“长度”不是 <property> 的一部分：http: [//nhibernate.info/doc/nh/en/index.html#mapping-declaration-property](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-property)

本节显示“长度”是 <column> 的一部分：http: [//nhibernate.info/doc/nh/en/index.html#toolsetguide-s1-2](http://nhibernate.info/doc/nh/en/index.html#toolsetguide-s1-2)

最后一节（20.1 和表 20.1 总结）表明“sql-type”也是 <column> 的一部分，因此请尝试以下变体之一：

```
<property name="Settings" type="Serializable">
    <column name="Settings" not-null="true" length="2147483647"/>
</property> 
```

或者

```
<property name="Settings" type="Serializable">
    <column name="Settings" not-null="true" sql-type="varbinary(max)"/>
</property> 
```

编辑：
这个问题似乎是重复的：
[如何让流利的 nhibernate 在 sql server 中创建一个 varbinary(max) 字段](https://stackoverflow.com/questions/1098266/how-do-i-get-fluent-nhibernate-to-create-a-varbinarymax-field-in-sql-server)

但是该信息已经有将近 3 年的历史了，新版本的 nHibernate 可能已经对此进行了纠正（我无法对此进行测试）。

以下页面似乎也是同样的问题，并且是更新的：
[Binary Blob truncated to 8000 bytes - SQL Server 2008 / varbinary(max)](https://stackoverflow.com/questions/4584170/binary-blob-truncated-to-8000-bytes-sql-server-2008-varbinarymax)

# python - 如何增加列表以适应 Python 中的给定容量

> ID：10155510
> 
> 赞同：3
> 
> 时间：2012-04-14T17:00:39.827
> 
> 标签：python, list

我是 Python 新手。我有一系列对象需要插入到列表的特定索引处，但它们是乱序的，所以我不能只是附加它们。如何在必要时增加列表以避免 IndexErrors？

```
def set(index, item):
    if len(nodes) <= index:
        # Grow list to index+1
    nodes[index] = item 
```

我知道您可以通过创建一个具有初始容量的列表，`nodes = (index+1) * [None]`但是通常的方式是什么？以下似乎效率不高：

```
for _ in xrange(len(nodes), index+1):
    nodes.append(None) 
```

另外，我想我应该使用标准库中的一个类而不是内置列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T17:06:52.210

这是最好的方法。

```
>>> lst.extend([None]*additional_size) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:15:20.033

**哎呀**，好像我一开始误解了你的问题。如果您要问如何扩展列表的长度，以便可以在*大于列表当前长度的*索引处插入一些东西，那么`lst.extend([None]*(new_size - len(lst))`正如其他人所建议的那样，这可能是要走的路。当然，如果您事先知道您需要的最大索引是多少，那么提前创建列表并用`None`s 填充它是有意义的。

* * *

作为参考，我留下原文：在现有列表的中间插入一些东西，通常的方法是不用担心自己增加列表。列表对象带有一种[`insert`方法](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)，可以让您在列表中的任何位置插入对象。所以代替你的`set`功能，只需使用

```
lst.insert(item, index) 
```

或者你可以做

```
lst[index:index] = item 
```

它做同样的事情。Python 会为你调整列表的大小。

标准库中不一定有任何类可以用来代替`list`，尤其是当您需要这种随机访问插入时。但是，您应该注意[`collections`模块](http://docs.python.org/library/collections.html)中的一些类，因为它们在其他情况下可能很有用（例如，如果您总是附加到列表的一端，并且您事先不知道有多少项目您需要，`deque`将是合适的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T17:03:45.177

也许是这样的：

```
lst += [None] * additional_size 
```

（您不应该调用您的列表变量列表，因为它也是列表构造函数的名称）。

# android - Android NoSuchMethodError 与 APK 文件（Apache HTTPUtils 核心）

> ID：10155513
> 
> 赞同：1
> 
> 时间：2012-04-14T17:01:09.617
> 
> 标签：android, eclipse

我在我的项目中使用 Apache HTTPUtils 核心库 4.1.4 来使用

```
EntityUtils.consume(HTTPEntity); 
```

方法。

但是，当在模拟器 (SDK v.2.1) 的应用程序中使用此方法时，它会因 NoSuchMethodError 而崩溃。

我猜这是因为该应用程序尝试使用旧的并且没有此方法的 Android 库，而不是我在构建路径中放入的较新的库。

如何使用强制应用程序使用较新的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:04:31.823

值得[一试在 Android 上使用较新版本的 HttpClient（如 4.1.x）](http://ogrelab.ikratko.com/using-newer-version-of-httpclient-like-4-1-x/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:08:05.263

如果您的猜测是正确的并且您使用的是 Eclipse，您可以在 Java Build Path 选项的“Order and Export”选项卡中更改顺序。如果您有重复的类，则可以在那里定义类路径顺序

# javascript - 如何使用 Jquery/Javascript 前置嵌套元素？

> ID：10155515
> 
> 赞同：1
> 
> 时间：2012-04-14T17:01:22.990
> 
> 标签：javascript, jquery, nested

只是想知道是否有比这更好的方法：

```
 var $lftWrp = $( document.createElement( "div" ) ),
     $ctrlGrp = $( document.createElement( "div" ) ),
        .attr({'data-role':'controlgroup', 'data-type':'horizontal'})
        .controlgroup(),
     $buttons = $('.someButtons');

 $(this).prepend( $lftWrp.prepend( $ctrlGrp.prepend( $buttons ) ) ) 
```

得到这样的东西：

```
 <div>
   <div data-role="controlgroup" data-type="horizontal">
       <a href="#" class="someButtons">Click</a>
       <a href="#" class="someButtons">Click</a>
   </div>
 </div> 
```

具体来说，有没有比“嵌套” *prepends()*更好的方法？

感谢帮助！

**编辑：** 前置看起来像这样。具体来说，我的问题似乎是按钮只在最后一次迭代中添加。所有其他元素都获得 div 和 controlgroup。最后一个元素获取 div、控件组和按钮。没有线索为什么...

```
 $('.fiveElemnts').each(function() {

     var $lftWrp = $( document.createElement( "div" ) ),
        $ctrlGrp = $( document.createElement( "div" ) ),
          .attr({'data-role':'controlgroup', 'data-type':'horizontal'})
          .controlgroup(),
        $buttons = $('.someButtons');
     //if I log buttons here, they are there
     console.log( $buttons );
     $(this).prepend( $lftWrp.prepend( $ctrlGrp.prepend( $buttons ) ) )
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:06:03.753

试试这个：

**纯js/jQuery**

HTML：

```
<div class="button-container" style="display:none;">
   <a href="#" class="someButtons">Click</a>
   <a href="#" class="someButtons">Click</a>
</div>

<div class="result">
</div>​ 
```

JS：

```
$.fn.controlgroup = function() {
    return this;
};

(function() {

    var 
        $template = $('<div><div></div></div>'),
        $buttons = $('.someButtons');

    $template
        .find('>div')
        .attr({'data-role':'controlgroup', 'data-type':'horizontal'})
        .controlgroup()
        .append($buttons);

    $(this).prepend($template);

}).call($('.result'));    
​ 
```

[例子](http://jsfiddle.net/adescalzo/DSaKA/)

**模板**

HTML

```
<div class="button-container" style="display:none;">
       <a href="#" class="someButtons">Click</a>
       <a href="#" class="someButtons">Click</a>
</div>

<div class="template-container" style="display:none;">
    <div>
       <div data-role="controlgroup" data-type="horizontal"></div>
    </div>
</div>

<div class="result">
</div> 
```

​JS

```
$.fn.controlgroup = function() {
    return this;
};

(function() {

    var 
        $template = $('.template-container').find('>div').clone(),
        $buttons = $('.someButtons');

    $template.find('>div').controlgroup().append($buttons);

    $(this).prepend($template);

}).call($('.result'));
​ 
```

[例子](http://jsfiddle.net/adescalzo/hyRBt/)

**用于编辑（模板）**

HTML：

```
<div class="button-container" style="display:none;">
    <a href="#" class="someButtons">Click</a>
    <a href="#" class="someButtons">Click</a>
</div>

<div class="template-container" style="display:none;">
    <div>
       <div data-role="controlgroup" data-type="horizontal"></div>
    </div>
</div>

<div class="fiveElemnts"></div>
<br />
<div class="fiveElemnts"></div>
<br />
<div class="fiveElemnts"></div>
<br />
<div class="fiveElemnts"></div>
<br />
<div class="fiveElemnts"></div> 
```

JS：

```
$.fn.controlgroup = function() {
    return this;
};

var
    $template = $('.template-container').find('>div'),
    $buttons = $('.someButtons');

$('.fiveElemnts').each(function(i, el) {

    //template
    var 
        $templateForThisUse = $template.clone();

    //example append
    /*    
    var $buttonsForThisUse = $buttons.clone();
    $templateForThisUse.find('>div').controlgroup().append($buttonsForThisUse);
    */

    //best append - form link control
    var $ref = $templateForThisUse.find('>div').controlgroup();
    $buttons.clone().each(function(ib, eb) {
        $(this)
            .bind('click', function(event) {
                console.log('fiveElemnts('+i+') -> link ('+ib+')');
            })
            .appendTo($ref.append('&nbsp;<spam>link ('+i+'-'+ib+'): </spam>'));
    });

    $(this).prepend($templateForThisUse);
});

​ 
```

[运行示例](http://jsfiddle.net/adescalzo/hyRBt/2/)

# php - 存储库模式与 ORM

> ID：10155517
> 
> 赞同：12
> 
> 时间：2012-04-14T17:01:27.093
> 
> 标签：php, orm, repository-pattern

当您拥有 ORM 时，存储库模式有什么好处？

例子。假设我有以下（虚构的）表格：

**表：用户**

```
pk_user_id
fk_userrole_id
username 
```

**表：用户角色**

```
fk_userrole_id
role 
```

现在有了一个 orm 我可以简单地把它放在一个模型文件中：

```
$user = ORM::load('users', $id); 
```

现在 $user 已经是我的对象，可以很容易地被延迟加载：

（如果事物自动单数/复数会更好）

```
foreach ( $user->userroles()->role as $role )
{
    echo $role;
} 
```

* * *

现在使用存储库模式，我必须为用户和角色创建一个存储库。存储库还需要各种功能来为我检索数据并存储它。此外，它需要与实体模型一起使用。所以我也必须创建所有这些。

对我来说，这看起来像很多东西......当我可以像上面描述的那样使用 ORM 简单地获取数据时。我可以很容易地存储它：

ORM::store($user);

在这种情况下，它不仅会将用户对象存储到数据库中，还会存储我对“角色”对象所做的任何更改。所以不需要像存储库模式那样做任何额外的工作......

* * *

所以我的问题基本上是，我为什么要使用带有 ORM 的存储库模式？我已经看过使用该模式的教程（例如 Doctrine）。但这对我来说真的没有任何意义......任何人对它与ORM结合使用的任何解释......？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-15T08:48:34.863

ORM 是存储库的实现细节。ORM 只是使以 OOP 友好的方式访问数据库表变得容易。而已。

存储库抽象持久性访问，无论它是什么存储。这就是它的目的。您使用 db 或 xml 文件或 ORM 的事实并不重要。Repository 允许应用程序的其余部分忽略持久性细节。这样，您可以通过模拟或存根轻松测试应用程序，并且可以在需要时更改存储。今天你可能会使用 MySql，明天你会想要使用 NoSql 或 Cloud Storage。用 ORM 做到这一点！

存储库处理域/业务对象（从应用程序的角度来看），ORM 处理数据库对象。业务对象不是数据库对象，首先具有行为，其次是美化的 DTO，它只保存数据。

**编辑** 您可能会说存储库和 ORM 都抽象了对数据的访问，但魔鬼在细节中。存储库抽象了对**所有存储问题**的访问，而 ORM 抽象了对**特定 RDBMS的访问。**

简而言之，Repository 和 ORM 有不同的用途，正如我上面所说，ORM 始终是 repo 的实现细节。

您还可以查看[这篇文章](http://blog.sapiensworks.com/post/2012/02/22/The-Repository-Pattern-Explained.aspx)，了解有关存储库模式的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-26T15:24:03.103

ORM 和存储库模式...**取决于设置。**

1.  如果你使用你的 ORM 实体作为域层，那么请不要使用存储库。
2.  如果您有一个单独的域模型并且您需要从该模型映射到 ORM 实体并执行保存，那么您需要的是存储库。

[您可以在此处](https://www.linkedin.com/pulse/orm-repository-pattern-never-good-friends-see-balazs-hideghety)找到更多详细信息（但必须登录到已链接）。另外要了解差异，请查看存储库模式的[定义](https://martinfowler.com/eaaCatalog/repository.html)。

**大多数人使用他们称为存储库的类，但根本不是存储库，只是查询类**- 如果您决定使用**#1 选项**，这就是您应该放置查询的方式/位置（参见上面的答案）。在这种情况下，请确保不要从该查询类公开 DbContext 或 ISession，也不要从那里公开 CUD 方法 - 记住，查询类！

**＃2选项是一个艰难的选项。**如果你做一个真正的存储库，存储库界面上的所有输入和输出都将包含明确的域类（并且没有与数据库相关的对象）。禁止从那里公开 ORM 映射类或 ORM 架构相关对象。还会有一个 Save 方法。这些存储库也可能包含查询，但与查询类不同，这些存储库将做更多事情 - 它们将获取您的域聚合（实体集合和树）并通过将这些类映射到 ORM 类并将它们保存到数据库并在 ORM 上执行保存。这种风格（#2）不需要使用 ORM，存储库模式主要是为 ADO.NET（任何类型的数据访问）制作的。

无论如何，这两个选项是我们可以做的两个极端。**很多人使用带有 ORM 的存储库，但他们只是添加了一层额外的代码，没有真正的功能**，唯一真正的功能是查询类行为。

当有人谈论 UnitOfWork 时，我也会小心，尤其是使用 ORM。互联网上的几乎每个样本在架构方面都是失败的。如果你需要 UoW，为什么不使用 TransactionScope（只要确保你有一个默认使用非 Serializable 事务的包装器）。在 99,9% 的情况下，您不需要管理 2 组独立的数据更改（所以 2 组 OuW），因此 TransactionScope 将是 .NET 中的一个不错的选择 - 对于 PHP，我会寻找一些开放会话 -查看实现...

# android - 如何在没有数据库的情况下填充内容提供程序

> ID：10155522
> 
> 赞同：1
> 
> 时间：2012-04-14T17:02:40.067
> 
> 标签：android, android-intent, android-contentprovider

在我的 Android 应用程序中，我使用的是基于 Intent 的第三方库应用程序。第 3 方库需要一个包含从我的应用程序生成的数据的内容提供程序。

不幸的是，我的应用程序不使用 db 或任何类型的持久性：数据是完全易变的。因此，Content Provider 没有可从中获取数据的数据库。

理想情况下，我想在 Android 运行时实例化数据时将数据传递给内容提供者。有没有办法做到这一点？

谢谢问候文森佐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:34:17.040

您将需要使用`MatrixCursor`. 它是一个**可变**游标，您可以在运行时添加行。将此游标传递给您的 ContentProvider，它需要一个普通的 db 游标。你可以搜索谷歌的例子。

# java - Android：比较日历日期

> ID：10155523
> 
> 赞同：7
> 
> 时间：2012-04-14T17:02:44.070
> 
> 标签：java, android, date

在我的应用程序中，我正在保存上次更新服务器中的一些数据时。因此我使用了：

```
long time = Calendar.getInstance().getTimeInMillis(); 
```

现在我希望数据每年在 03.03 和 08.08 更新两次。我如何检查自上次更新以来这两个日期寄宿生中的一个是否被越过？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-14T17:27:43.100

将它们更改为以毫秒为单位的时间并进行比较：

```
 Calendar c = Calendar.getInstance();
    c.set(Calendar.MONTH, Calendar.MARCH);
    c.set(Calendar.DAY_OF_MONTH, 3);
 long time2=   c.getTimeInMillis();
 c.set(Calendar.MONTH, Calendar.AUGUST);
 c.set(Calendar.DAY_OF_MONTH, 8);   
 long time3=   c.getTimeInMillis();
 if(time>time2){
     //Logic
     if(time>time3){
         //Logic
     }
 } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T00:27:44.163

有一些非常重要的事情我花了一段时间才弄清楚，并且对那里的人们非常有帮助，如果您正在寻找以下任何问题的答案，这是给您的：

为什么我的日期显示不正确？为什么即使我手动设置时间它也显示不正确？为什么显示的月份和年份比我设置的少一天？

出于某种原因，Java 像数组一样对月份值进行排序，我的意思是对于 Java，1 月是 0，12 月是 11。如果将 12 月设置为 12 月，将年份设置为 2012 年，那么这一年也会发生同样的情况，然后尝试这样做月份和年份的“system.out.println”，它将显示我的月份为一月，年份为 2013！

那你该怎么办？

```
Calendar cal = new GregorianCalendar();
cal.set(2012, 11, 26); // the date I want to input is 26/12/2012 (for Java, 11 is December!) 
```

现在，让那个日期在屏幕上看到它的正确方法是什么？

如果您尝试“system.out.println of yourCalendar.DATE、yourCalendar.MONTH 和 yourCalendar.YEAR”，则不会显示正确的日期！！！！

如果要显示日期，则需要执行以下操作：

```
System.out.println (calact.get (calact.DATE)); 
// displays day
System.out.println (calact.get (calact.MONTH)+1); 
//add 1 remember it saves values from 0-11
System.out.println (calact.get (calact.YEAR));  
// displays year 
```

现在，如果您正在处理代表日期的字符串，或者....如果您需要比较范围之间的日期，假设您需要知道日期“A”是否会在接下来的 10 天内发生....这.. ..是给你的！！

就我而言，我正在使用格式为“15/07/2012”的字符串，我需要知道该日期是否会在接下来的 10 天内发生，因此我必须执行以下操作：

# 1 获取该字符串日期并将其转换为日历（此处使用了 StringTokenizer）

这很简单

```
StringTokenizer tokens=new StringTokenizer(myDateAsString, "/"); 
```

执行 nextToken 并在返回日期之前将其解析为整数并返回。在返回减法 1 之前记住一个月。

我将发布您创建其他两个的第一个代码：

```
public int getMeD(String fecha){

    int miDia = 0;
    String tmd = "0";

    StringTokenizer tokens=new StringTokenizer(fecha, "/");
    tmd = tokens.nextToken();

    miDia = Integer.parseInt(tmd);

    return miDia;
} 
```

# 2 然后创建日历

```
 Calendar cal = new GregorianCalendar(); // calendar
    String myDateAsString= "15/07/2012";    // my Date As String
    int MYcald = getMeD(myDateAsString); // returns integer
    int MYcalm = getMeM(myDateAsString); // returns integer
    int MYcaly = getMeY(myDateAsString); // returns integer

            cal.set(MYcaly, MYcalm, MYcald); 
```

# 3 获取我当前的日期（今天）

```
 Calendar curr = new GregorianCalendar(); // current cal
    calact.setTimeInMillis(System.currentTimeMillis()); 
```

# 4 创建时间日历以进入未来 10 天

```
Calendar caltemp = new GregorianCalendar(); // temp cal
caltemp.setTimeInMillis(System.currentTimeMillis());
caltemp.add(calact.DAY_OF_MONTH, 10); // we move into the future 
```

# 5 比较所有 3 个日历

在这里基本上你问我得到的日期是否肯定会在未来发生并且（&&）如果给定的日期也比未来的日期少 10 天，那么请告诉我“事件将发生在确定在接下来的 10 天内！！” 否则告诉我：“事件不会*在*接下来的 10 天内发生”。

```
 if((cal.getTimeInMillis() > curr.getTimeInMillis()) &&        (cal.getTimeInMillis()< curr.getTimeInMillis()))
    { System.out.println ("EVENT WILL TAKE PLACE FOR SURE WITHIN THE NEXT 10 DAYS!!");}
    else
    { System.out.println ("EVENT WILL *NOT* TAKE PLACE WITHIN THE NEXT 10 DAYS");} 
```

好的伙计们和女孩们，我希望能有所帮助。给你们一个大大的拥抱，祝你们的项目好运！

和平。约瓦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-06T08:09:00.197

如果比较应该**只**涉及年、月和日，那么您可以使用此方法检查**c1**是否在**c2**之前。丑陋，但有效。

```
public static boolean before(Calendar c1, Calendar c2){
        int c1Year = c1.get(Calendar.YEAR);
        int c1Month = c1.get(Calendar.MONTH);
        int c1Day = c1.get(Calendar.DAY_OF_MONTH);

        int c2Year = c2.get(Calendar.YEAR);
        int c2Month = c2.get(Calendar.MONTH);
        int c2Day = c2.get(Calendar.DAY_OF_MONTH);

        if(c1Year<c2Year){
            return true;
        }else if (c1Year>c2Year){
            return false;
        }else{
            if(c1Month>c2Month){
                return false;
            }else if(c1Month<c2Month){
                return true;
            }else{
                return c1Day<c2Day;                        
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-02T06:37:18.157

used compareTo method ..and this returns integer value .if returns -ve the days before in current date else return +ve the days after come current date

# sql - 为什么有些查询可以再次查询而有些则不能？

> ID：10155526
> 
> 赞同：0
> 
> 时间：2012-04-14T17:03:24.523
> 
> 标签：sql, ruby-on-rails, ruby

对我来说，这是关于`.reverse`vs`.order('id DESC')`

如果我有

```
history = where(user_id: user).order('id DESC') 
```

我仍然可以执行另一个查询，例如`history.where(person_id: person)`

如果我有

```
history = where(user_id: user).reverse 
```

我得到：`NoMethodError: undefined method 'where' for #<Array:0x000001031a3408>`

这是因为这些函数在它们应该使用的数组类型上有所不同（关联数组与常规数组）？我有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:09:09.480

[ActiveRecord 查询方法](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html)（例如`where`、`order`、`joins`等）返回一个[`ActiveRecord::Relation`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html). 这允许您链接方法来构建查询，并且在您使用实际数据之前不会执行查询。

由于`reverse`不是查询方法，它对 Ruby 中的实际数据进行操作，因此执行查询以便 Ruby 可以对数据进行操作，并返回一个`Array`. 由于现在您只有数据（以 an 的形式`Array`）而没有 an `ActiveRecord::Relation`，因此您不能调用另一个查询方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:07:35.527

`reverse`是 activerecord 查询接口之外的方法，而`order`是接口中的方法。一旦你执行`reverse`，你就没有资源了，而是一个数组。`where`在反转输出之前，您需要执行任何 sql 方法（如）。

# javascript - JavaScript/Bookmarklet 单击 Facebook 上的所有“添加到朋友”按钮（批量/批量加好友）

> ID：10155530
> 
> 赞同：0
> 
> 时间：2012-04-14T17:03:58.507
> 
> 标签：javascript, ajax, facebook, button, click

我想将 Facebook 页面上显示的所有个人资料添加给我的朋友。我看过[Bookmarklet: Click All Like Buttons On Tumblr](https://stackoverflow.com/questions/8175822/bookmarklet-click-all-like-buttons-on-tumblr)我正在尝试类似

```
 javascript:e=document.getElementsByTagName('a');for(i=0;i<e.length;i++) {if(e[i].id.indexOf('addButton')>=0)e[i].click();}void(0); 
```

因为那是按钮中 a 元素的类，就像

```
<a class="uiIconText addButton" style="padding-left: 18px;"><i class="img sp_7b7xx5 sx_a97ca4" style="top: 2px;"></i>Aggiungi agli amici</a> 
```

（用意大利语）。但什么也没发生（我正在使用 Firefox）。a 元素似乎为空，实际链接在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:49:13.923

您正在尝试接近该`id`属性，而您真正要寻找的是元素的`class`.

尝试替换`if(e[i].id.indexOf('addButton')>=0)`为`if(e[i].className.indexOf('addButton')>=0)`.

# objective-c - 为什么我不能使这个函数内联？

> ID：10155533
> 
> 赞同：2
> 
> 时间：2012-04-14T17:04:07.287
> 
> 标签：objective-c, c, function, inline

如果我使这个函数内联并从objective-c方法调用它，它会给我一个`clang: error: linker command failed with exit code 1 (use -v to see invocation)`

```
Vector addv(Vector v1, Vector v2) {// works
    return (Vector){v1.x + v2.x, v1.y + v2.y, v1.z + v2.z};
}

inline Vector addv(Vector v1, Vector v2) {// if I call this, does not build
    return (Vector){v1.x + v2.x, v1.y + v2.y, v1.z + v2.z};
} 
```

为什么会这样，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:26:59.573

C99`inline`不保证发出链接器符号。您必须在一个编译单元（即 .c）中放置一个“实例化”。

所以`inline`.h文件中的定义：

```
inline Vector addv(Vector v1, Vector v2) {// if I call this, does not build
    return (Vector){v1.x + v2.x, v1.y + v2.y, v1.z + v2.z};
} 
```

和

```
Vector addv(Vector v1, Vector v2); 
```

在一个 .c 文件中生成符号。

# android - 如何获取屏幕尺寸？

> ID：10155534
> 
> 赞同：0
> 
> 时间：2012-04-14T17:04:09.377
> 
> 标签：android, android-layout

如何使用代码获取屏幕尺寸，如：

> 小或正常或大或超大

谢谢

编辑：这不是我想要的尺寸，我想要定义它是小、正常、大还是 xlarge 的东西，就像你在布局文件夹中拥有的那样，/res/layout-normal 或 /res/layout-xlarge

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:07:29.187

使用[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)类。这是给你的一个[很好的样本](http://android-coding.blogspot.com/2011/02/get-screen-resolution-of-android-device.html)。

# xml - 用于将 iCal 提要转换为 XML 的 Web 服务或脚本

> ID：10155536
> 
> 赞同：2
> 
> 时间：2012-04-14T17:04:25.833
> 
> 标签：xml, parsing, icalendar

我正在搜索将 iCal Feed 转换为 XML 的 Web 服务或脚本，以便我可以进一步处理它。

我已经尝试过 Yahoo Pipes，但它不支持正确的 XML 输出格式。

有什么建议还是我必须自己写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:55:50.597

您可以使用谷歌日历：它的 api 将返回所选日历的 xml。

# mysql - 将数据从一个表插入到另一个表会导致重复

> ID：10155541
> 
> 赞同：0
> 
> 时间：2012-04-14T17:04:42.980
> 
> 标签：mysql, sql

我有带有列（id、id_user）的 table1 和带有列（id、用户名）的 table2。用户在表 2 中注册。所以我想要的是将`table2.id`新注册用户的`table1.id_user`.

我有这个查询：

```
INSERT INTO table1 (id_user) SELECT id FROM table2; 
```

但结果是：

例如我有`table1.id`：

```
 id
 1
 2
 3 
```

当新用户在 table2 中注册时，`table1.id`看起来像这样：

```
id
1
2
3
1
2
3
4 
```

每次有新注册用户时，它都会重复所有数据。如何解决此问题以仅添加新注册的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:07:50.550

```
INSERT INTO table1  (id_user) 
    SELECT id FROM table2 where id not in (select id_user from table1) 
```

如果您使用数据库触发器，那么您可以自动将 table2 中的新用户 ID 插入到 table1 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:11:11.407

使用`max`关键字。它在你的情况下工作。

```
 " INSERT INTO table1  (id_user) SELECT max id FROM table2" 
```

# python - 确定 DBSCAN 算法的输入值

> ID：10155542
> 
> 赞同：0
> 
> 时间：2012-04-14T17:04:45.400
> 
> 标签：python, cluster-analysis, dbscan

我已经用 python 编写了代码来实现 DBSCAN 聚类算法。我的数据集由 14k 个用户组成，每个用户由 10 个特征表示。我无法决定究竟要保留什么作为 Min_samples 和 epsilon 的值作为输入我应该如何决定？相似性度量是欧几里得距离。（因此它变得更加难以决定。）任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:15:10.860

DBSCAN 通常很难估计其参数。

您是否考虑过 OPTICS 算法？在这种情况下，您只需要与最小集群大小相对应的 Min_samples。

否则，对于 DBSCAN，我过去通过反复试验完成了它：尝试一些值，看看会发生什么。要遵循的一般规则是，如果您的数据集嘈杂，您应该有一个更大的值，并且它还与维数相关（在这种情况下为 10）。

# couchdb - 删除 CouchDB 数据库中的所有文档*除了*设计文档

> ID：10155543
> 
> 赞同：19
> 
> 时间：2012-04-14T17:04:46.270
> 
> 标签：couchdb

是否可以删除 couchdb 数据库中的所有文档（设计文档*除外*），而无需为此创建特定视图？

我的第一种方法是访问`_all_docs`标准视图，并丢弃那些以`_design`. 这可行，但是对于大型数据库来说太慢了，因为需要一次从数据库中请求文档（以获取文档修订版）。

如果这是唯一有效的方法，我认为删除整个数据库并从头开始创建它并再次插入设计文档更为实用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T16:24:00.880

我能想到几个想法。

## 使用 _all_docs

您不需要获取所有*文档*，只需获取 ID 和修订。默认情况下，这就是 _all_docs 返回的全部内容。您可以批量提出一个相当大的请求（一次 10k 或 100k 文档应该没问题）。

## 复制然后删除

您可以使用`_all_docs`查询来获取所有设计文档的 ID。

```
GET /db/_all_docs?startkey="_design/"&endkey="_design0" 
```

然后将它们临时复制到某个地方。

```
POST /_replicator

{ "source":"db", "target":"db_ddocs", "create_target":true
, "user_ctx": {"roles":["_admin"]}
, "doc_ids": ["_design/ddoc_1", "_design/ddoc_2", "etc..."]
} 
```

现在您可以删除原始数据库并通过交换`"source"`和`"target"`值复制临时数据库。

## 删除与“删除”

请注意，这些实际上是苹果与橙子的技术。通过删除*数据库*，您将清除其所有文档的编辑历史记录。换句话说，您不能将这些删除事件复制到任何其他数据库。当您在 CouchDB 中“删除”一个文档时，它会存储该删除的记录。如果您复制该数据库，这些删除将反映在目标中。（CouchDB 存储指示文档 ID、修订历史和已删除状态的“墓碑”。）

这对你来说可能重要也可能不重要。第一个想法可能被认为更“正确”，但我可以看到第二个的价值。您可以在脑海中可视化整个程序以完成此操作。只需几个查询，您就完成了。没有循环`_all_docs`批次，没有头痛。您的具体情况可能会很明显哪个更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T18:49:16.197

安装couchapp，将设计文档下拉到您的硬盘，删除蒲团中的数据库，将设计文档推回您重新创建的数据库。=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:22:10.390

您可以编写一个 shell 脚本来遍历所有文档的列表，然后将它们一一删除，除了设计文档。显然[沙发批处理](https://github.com/dsp/couch-batch)可以做到这一点。请注意，您不需要获取整个文档来执行此操作，只需获取 id 和修订版即可。

除此之外，我认为[过滤复制](http://wiki.apache.org/couchdb/Replication#Filtered_Replication)（或 JasonSmith 提出的复制）是您最好的选择。

# ios - 嵌套 NSArray 的 UITableView 中的不同部分标题

> ID：10155544
> 
> 赞同：1
> 
> 时间：2012-04-14T17:04:48.330
> 
> 标签：ios, uitableview

我正在尝试学习如何编写 UITableView 并且在该部分的编程方面遇到了一些问题。

我已经声明了 3 个带有字符串的数组和 1 个带有 3 个数组的数组。

```
firstSection = [NSArray arrayWithObjects:@"Red", @"Blue", nil];
secondSection = [NSArray arrayWithObjects:@"Orange", @"Green", @"Purple", nil];
thirdSection = [NSArray arrayWithObject:@"Yellow"];

array = [[NSMutableArray alloc] initWithObjects:firstSection, secondSection, thirdSection, nil]; 
```

显示标题

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

NSString * title;
title = [NSString stringWithFormat:@"%@" , [array objectAtIndex:section]];

return title;
} 
```

它将数组本身显示为标题

![在此处输入图像描述](../Images/8319a2d7b81571cda1fe107e89847154.png)

因此，是否可以使用数组的名称（例如 firstSection 和 secondSection）实际显示部分的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T18:16:54.447

在您的情况下，最好将数组存储在`NSDictionary`. 例如，如果您声明并合成一个`NSDictionary`变量 called`tableContents`和 an `NSArray` called `titleOfSections`，您可以执行以下操作：

```
 - (void)viewDidLoad {
    [super viewDidLoad];

    //These will automatically be released. You won't be needing them anymore (You'll be accessing your data through the NSDictionary variable)
    NSArray *firstSection = [NSArray arrayWithObjects:@"Red", @"Blue", nil];
    NSArray *secondSection = [NSArray arrayWithObjects:@"Orange", @"Green", @"Purple", nil];
    NSArray *thirdSection = [NSArray arrayWithObject:@"Yellow"];

    //These are the names that will appear in the section header
    self.titleOfSections = [NSArray arrayWithObjects:@"Name of your first section",@"Name of your second section",@"Name of your third section", nil];

    NSDictionary *temporaryDictionary = [[NSDictionary alloc]initWithObjectsAndKeys:firstSection,@"0",secondSection,@"1",thirdSection,@"2",nil];
    self.tableContents = temporaryDictionary;
    [temporaryDictionary release];
} 
```

然后在表视图控制器方法中：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [self.titleOfSections count];
}
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
    return [[self.tableContents objectForKey:[NSString stringWithFormat:@"%d",section]] count];
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    //Setting the name of your section
    return [self.titleOfSections objectAtIndex:section]; 
} 
```

`cellForRowAtIndexPath`然后在您的方法中访问每个数组的内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    NSArray *arrayForCurrentSection = [self.tableContents objectForKey:[NSString stringWithFormat:@"%d",indexPath.section]];

    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleSubtitle 
                 reuseIdentifier:SimpleTableIdentifier] autorelease];
    }
    cell.textLabel.text = [arrayForCurrentSection objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:13:54.527

你可以这样做吗

```
 NSArray   *SectionArray = [[NSArray alloc]initwithArray:[array objectAtIndex:section]];

  NSString * title;

  title = [NSString stringWithFormat:@"%@" , [SectionArray objectAtIndex:section]];

   return title; 
```

# mediastore - 如何检查 MediaStore.Audio.Media.ARTIST 字段是否为空？

> ID：10155545
> 
> 赞同：0
> 
> 时间：2012-04-14T17:05:05.047
> 
> 标签：mediastore

我一直在开发一个 MediaPlayer 应用程序，我使用 MediaStore.Audio.Media 来获取 SD 卡上的所有歌曲及其标题、专辑、艺术家等标签。我有一个自定义适配器，我想检查艺术家字段是否为空，因此我可以为该字段设置“艺术家未知”。我认为我使用的适配器和光标与这个问题无关，所以我不打算在这里粘贴任何代码，因为这个问题也发生在适配器之外。

问题是：当 mp3 歌曲没有艺术家标签时，艺术家字段（MediaStore.Audio.Media.ARTIST 字段）的光标会返回“”。我不知道那是哪种数据类型（它应该是字符串），因为每当我将它与值为“”的字符串进行比较时，比较结果都是错误的。即使我将该字段的返回值分配给临时字符串，并将其与前面提到的“”进行比较，我仍然得到错误。我什至尝试了null，“unknown”，“”，没有任何效果。我真的在这里遇到了死胡同，任何帮助都将不胜感激。

提前谢谢你，伊万。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:08:19.777

我使用的是相同的字段（**MediaStore.Audio.Media.ARTIST**），但我注意到的是不同的。当您尝试检索歌曲的艺术家信息并且当前没有可用信息时，您得到的是`<unknown>`字符串。

我也想更改该信息，我只是去了：

```
String artist = (((cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST)) == null) 
                            || cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST)).equals("")
                            || cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST)).equals("<unknown>")) ? 
                "Artist Unknown" : cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST))); 
```

无论如何，“ *null 和 equals.("")* ”检查应该是没用的。

# c# - 使用 Castle Windsor 进行 AOP 缓存

> ID：10155555
> 
> 赞同：0
> 
> 时间：2012-04-14T17:06:28.733
> 
> 标签：c#, .net, caching, castle-windsor, aop

任何人都可以提供一个工作示例，说明使用 Castle Windsor 进行缓存是如何工作的。

我假设作为起点，我定义了`CacheAspect`从 IInterceptor 继承的 my ，如下所示：

```
public class CacheAspect : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
         // Code here to check if data is in cache and if so
         // put that into invocation.ReturnValue... job done!

         // If not then invoke the method
         invocation.Proceed();

         // Now cache the result of the invocation
    }
} 
```

然后我可以用我的`CacheAspect`...装饰任何方法

```
 [Interceptor(typeof(CacheAspect))]
    public List<string> GetStaticData()
    {
    } 
```

.. 当然，在 Windsor 容器中注册整个内容。

然而...

1.  如何在每次方法调用时改变我想要缓存中的某些内容的时间量？在此示例中，我可能希望将其缓存 60 分钟。对于一天等其他示例，我是否必须`CacheAspect`为每个缓存持续时间创建一个？

2.  从每种方法中识别每个缓存值的最佳方法是什么？例如使用`invocation.TargetType.Name`和的组合`invocation.Method.Name`？

3.  扩展问题 2 - 如果传入参数怎么办？然后我需要确定我是否缓存了与一组特定参数匹配的数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:06:15.003

我前段时间构建了 mbcache，[http://code.google.com/p/mbcache](http://code.google.com/p/mbcache)以启用使用动态代理的缓存。它在内部处理您的问题。在源代码中有使用 Castle Windsor（和 LinFu）的实现。看看它（如果它适合你的需要，或者直接使用框架）。

简短回答您的问题

1.  AFAIK - Windsor（或其他代理固件）对此没有任何内置支持。您需要使用一些缓存框架（或自己构建一些缓存逻辑，即使用弱引用）。

2.  3\. 大多数缓存键都是建立在字符串上的。如果是这样 - 您需要以某种方式将类型、方法和参数转换为字符串。

# objective-c - 控制台输出不正确

> ID：10155556
> 
> 赞同：0
> 
> 时间：2012-04-14T17:06:30.587
> 
> 标签：objective-c, xcode

我正在运行此代码，但控制台输出错误。应该得到：

```
Converting 100.00 US dollars into foreign currency leaves $900.00
Charging 100.00 in foreign currency leaves $775.00 Converting 100.00 US dollars into foreign currency leaves
$1900.00
Charging 100.00 in foreign currency leaves $1750.00 
```

但我只得到：

```
Converting 100.00 US dollars into foreign currency leaves $900.00 
```

这是代码：

```
#import <Foundation/Foundation.h>

@interface Budget:NSObject {
    float exchangeRate;
    double budget;
    double exchangeTransaction;
}

- (void) createBudget:(double)aBudget withExchangeRate:(float) anExchangeRate;

- (void) spendDollars:(double)dollars;

- (void) chargeForeignCurrency:(double)foreignCurrency;

@end

@implementation Budget

- (void) createBudget:(double)aBudget withExchangeRate:(float) anExchangeRate {
    exchangeRate = anExchangeRate;
    budget = aBudget;
}

- (void) spendDollars:(double)dollars {
    budget -= dollars;
    NSLog(@"Converting %.2f US dollars into foreign currency leaves $%.2f", dollars, budget);
}

-(void)chargeForeignCurrency:(double)foreignCurrency {
    exchangeTransaction = foreignCurrency * exchangeRate;
    budget -= exchangeTransaction;
    NSLog(@"Charging %.2f in foreign currency leaves $%.2f", foreignCurrency, budget);
}

@end

int main(int argc, const char * argv[])
{
    double numberDollarsInEuroland = 100;
    double numberEuros = 100;
    double numberDollarsInPoundland = 100;
    double numberPounds = 100;

    Budget *europeBudget = [Budget new];
    [europeBudget createBudget:1000.00 withExchangeRate:1.2500];
    [europeBudget spendDollars:numberDollarsInEuroland];
    [europeBudget chargeForeignCurrency:numberEuros];

    Budget *englandBudget = [Budget new];
    [englandBudget createBudget:2000.00 withExchangeRate:1.5000];
    [englandBudget spendDollars:numberDollarsInPoundland];
    [englandBudget chargeForeignCurrency:numberPounds];

    return 0;
} 
```

怎么了？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:02:47.657

只是猜测，但此代码是否在命令行工具中？如果是这样，请检查[这可能是您的问题](https://stackoverflow.com/a/10111174/1313031)。

# jquery - 以便携式设备可以查看的方式在网络上播放 Flash (.flv) 视频

> ID：10155557
> 
> 赞同：1
> 
> 时间：2012-04-14T17:06:35.113
> 
> 标签：jquery, flash, html5-video

我的一个朋友为我的网站制作了一部电影，它是 .flv 格式的。我听说过流行的flash 播放器，叫做flowplayer，但是我有一种不好的感觉，这样的播放器在ipad 和其他不支持flash 的设备上无法运行。有没有办法通过非 Flash 播放器播放 Flash 格式的视频，以便可以在所有设备上查看内容？

我对任何想法持开放态度。也许我什至可能需要以某种方式将视频转换为另一种格式。

谢谢你的帮助，

埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:38:47.057

正如您已经写过的，您不能在（大多数）移动设备上使用 Flash Video，因为它需要 Flash Player 来播放视频。然而，实际的 Flash 电影 ( `.swf`) 只会打开一个视频文件（`.flv`在您的情况下），然后它将在 Flash 容器中播放。

要为所有设备准备好视频，您通常会使用一种方法，即首先尝试提供 HTML5 `<video>`，然后在浏览器尚未准备好 HTML5 时回退到 Flash。这在**[html5-video-tag wiki](https://stackoverflow.com/tags/html5-video/info)**、**[面向所有人的视频](http://camendesign.com/code/video_for_everybody)**或**[Dive into HTML5](http://diveintohtml5.info/video.html)**中进行了描述。

关于您使用单个 FLV 文件的情况，这取决于对该文件进行编码的编解码器。HTML5 视频和 Flash 视频可以共享相同的源文件，以防它使用 H264 编码。像这样的文件通常称为`.m4v`，`.mp4`或者`.f4v`虽然，所以我猜您的文件可能仍在使用旧版本 Flash 使用的 On2VP8 编解码器。

因此，您可能会考虑询问您的朋友该文件实际使用的编解码器，并根据结果将该视频重新编码为 H264 格式，以便您可以在基于 Flash 和 HTML5 的播放中使用它。

不幸的是，这仍然不能满足 Firefox 或 Opera 用户的需求（还要注意 Chrome 可能会在未来某个时候放弃 H264 支持，因为 Google 正试图推动 WebM-Codec），所以你可能不得不在制作这些浏览器之间做出选择也回退到闪存或`ogg`为他们提供另一种媒体源（可能）。

# javascript - Javascript或jQuery在页面刷新时显示随机元素

> ID：10155558
> 
> 赞同：3
> 
> 时间：2012-04-14T17:06:36.027
> 
> 标签：javascript, jquery

我正在为博客网站上的自定义主题开发网站。我想要一个评论部分，但我只想在每次页面刷新时有一个评论。我想知道是否有任何方法可以使用 jQuery 或 javascript 编写脚本（我不确定是哪一个）从数组中选择一个随机元素（所有评论都有一个单独的元素，每个人都有不同的 div具有不同评论的 ID）并在名为#reviews 的 div 中显示该元素，并隐藏其他元素？这听起来很混乱，但基本上我需要 jQuery 或 javascript 来选择评论并将其放在评论部分。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:17:09.237

[这是jsFiddle](http://jsfiddle.net/ffPNs/2/)的一种方式

```
<aside id="reviews">
    <article class="review"></article>
    <article class="review"></article>
    <article class="review"></article>
</aside>​ 
```

和

```
var $reviews = $('#reviews .review').hide();
$reviews.eq(Math.random()*$reviews.length).show();​ 
```

但是，除非您计划在某个时间点（滑块或分页）显示其他评论，否则您真的应该做这个服务器端。发送内容只是为了隐藏它有点浪费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:13:06.627

jQuery*是*JavaScript。要从数组中获取随机元素，请使用 Math.random()：

```
function getRandomElement(a) {
    return a[Math.floor(Math.random() * a.length)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:11:48.970

我会使用 knockout.js，它非常适合将 JavaScript 对象绑定到 DOM。您可以填充对象数组并将其数据绑定到 div。每次您将数组的随机元素绑定到 div。数据绑定非常简单：

```
<p>First name: <input data-bind="value: firstName" /></p>

// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {
 this.firstName = "Bert";  
}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

有关更多示例，请参阅以下精彩教程： [Knockout.js 教程](http://learn.knockoutjs.com/#/?tutorial=intro)

# python - 如何防止 QGridLayout 中的小部件重叠？

> ID：10155560
> 
> 赞同：1
> 
> 时间：2012-04-14T17:06:54.120
> 
> 标签：python, pyqt

我有一个`QGridLayout`六行中有许多小部件。第 1、3 和 5 行包含 a `QLabel`、 a`QLineEdit`和 a`QPushButton`打开文件选择对话框。第 2、4 和 6 行包含`QLabel`用于向用户显示验证错误的 a。错误隐藏在下图中。

当窗口能够占用尽可能多的空间时，不会出现此问题。但是当我完全限制窗口的大小时，这个列表中的元素看起来像这样：

![具有垂直限制元素的 QGridLayout](../Images/f80ac470a687f58f1a7b02b95d2471bd.png)

所以我的问题是，如何确保 QGridLayout 中的所有 qwidget 可以占用所需的空间？

**编辑：** 根据@Avaris 的建议，我尝试调用（所有 6 行）`setMinimumSize()`中的每个小部件，`QGridLayout`可见元素看起来好多了（谢谢，@Avaris！）。然而现在，当我导致验证错误时，错误本身（红色`QLabel`）覆盖在其他小部件上。我可以强制 QGridLayout 不重叠吗？

这是它现在的样子： ![在此处输入图像描述](../Images/d28db71fa602c2733b40505173cc0e14.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:50:13.730

在寻找解决方案时，我[在 TrollTech 档案中发现了一些](https://web.archive.org/web/20051112104527/http://lists.trolltech.com:80/qt-interest/1998-11/thread00370-0.html)支持 @Avaris 关于设置小部件最小尺寸的想法的东西。该帖子建议为 QGridLayout 中的每个小部件设置最小尺寸。

当我遍历要添加到 QGridLayout 的所有元素时，我的实现看起来像这样：

```
widget = QtGui.QWidget()
hint = widget.sizeHint()
if hint.isValid():
    widget.setMinimumSize(hint) 
```

提示的有效性因使用的布局而异，但当我使用 QGridLayout 时，小部件尺寸提示似乎总是有效的。

# blackberry - BlackBerry TreeField：为每行设置不同的高度

> ID：10155568
> 
> 赞同：2
> 
> 时间：2012-04-14T17:07:29.830
> 
> 标签：blackberry, java-me, treefield

该方法只是为[TreeField](http://docs.blackberry.com/en/developers/deliverables/6022/net/rim/device/api/ui/component/TreeField.html)[`TreeField.setRowHeight(int height)`](http://www.blackberry.com/developers/docs/4.5.0api/net/rim/device/api/ui/component/TreeField.html#setRowHeight%28int%29)的每一行设置相等的高度，但我想为每一行设置不同的高度。是否可以？我找不到任何办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:12:27.090

我认为不可能为 中的每一行设置不同的高度[`TreeField`](http://docs.blackberry.com/en/developers/deliverables/6022/net/rim/device/api/ui/component/TreeField.html)，至少目前没有记录的方法。

*检查在BlackBerry 开发人员支持论坛*上提出的以下问题的答案-

[如何创建这样的布局：带有变量 RowHeight 的 TreeField](http://supportforums.blackberry.com/t5/Java-Development/How-to-create-a-layout-like-this-TreeField-with-variable/m-p/346612#M64069)。

# php - 将数据库插入到两个表中

> ID：10155570
> 
> 赞同：0
> 
> 时间：2012-04-14T17:07:36.977
> 
> 标签：php, mysql

这段代码真的让我很困惑。
我第一次和第二次运行它，它工作得很好，但之后它停止工作

让我解释一下：

我使用 2 张桌子。
我向其中插入当前日期、当前时间和用户 ID 的第一个表是我从会话中获取的 ID。我相信效果很好。

我的问题在第二个表中，我得到的错误是我在第二次插入后在“打印”中输入的错误。

这是我的代码：

```
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['con_id'])) {
    header("location: login.html");
    exit();
}

$DB_USER ='root';
$DB_PASSWORD='';
$DB_DATABASE='';

$con= mysql_connect($DB_HOST ,$DB_USER , $DB_PASSWORD);
if (!$con) {
    die('Failed to connect to server :'.mysql_error());
}

$db=mysql_select_db($DB_DATABASE);
if (!$db) {
    die("unable to select database");
}

//first table   
$qry="insert into shipment values('',NOW(),CURTIME(),'".$_SESSION['con_id']."');";
$resultop=mysql_query($qry);
//to take the id frome last insert because i need it in the second insert 
$SNo=mysql_insert_id();

if ($resultop) {
$options=$_POST['op'];//this is the name of the check boxe's 
if (empty($options)) {
    header("location: manage_itemsE.php");} 

    // this is the second table .. my reaaal problem 
    $qun=$_POST['Quantit'];
    $size =count($options);

    for ($i =0; $i<$size; $i++) {
        $qqry="insert into shipmentquantity values('".$options[$i]."','".$SNo."','".$qun[$i]."');"; // $options is array of the id's which i took from the checkbox's in the html ... $qun is array of the values i took form html ... i sure this is right ;)
        $resultqun=mysql_query($qqry);
    }

    if ($resultqun) {
        header("location: shipment_order.php");
    }
        else print "error in the Quantity";
}

else print "error in the shipmet"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:22:35.820

只需添加一些调试语句即可找出问题所在。就像是 -

```
$resultqun = mysql_query($qqry) or print mysql_error(); 
```

你需要阅读一些关于[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的知识，因为这个脚本很容易受到攻击。查看有关使用准备好的语句的这些页面 - [PDO::prepare](http://uk.php.net/manual/en/pdo.prepare.php)和[mysqli::prepare](http://uk.php.net/manual/en/mysqli.prepare.php)

**更新**- 这是一个使用 PDO 与您的数据库交互的示例 -

```
<?php
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['con_id'])) {
    header("location: login.html");
    exit();
}

$DB_USER ='root';
$DB_PASSWORD='';
$DB_DATABASE='';

$db = new PDO("mysql:dbname=$DB_DATABASE;host=127.0.0.1", $DB_USER, $DB_PASSWORD);

//first table
$qry = "INSERT INTO shipment VALUES(NULL, CURRENT_DATE, CURRENT_TIME, ?)";
$stmt = $db->prepare($qry);
$resultop = $stmt->execute(array($_SESSION['con_id']));

if(!$resultop){
    print $stmt->errorInfo();
} else {

    $SNo = $db->lastInsertId();

    $options = $_POST['op'];//this is the name of the check boxe's
    if (empty($options)) {
        header("location: manage_itemsE.php");
        exit;
    }

    // this is the second table .. my reaaal problem
    $qun = $_POST['Quantit'];
    $size = count($options);

    $stmt = $db->prepare("INSERT INTO shipmentquantity VALUES(?, ?, ?)");
    for($i = 0; $i < $size; $i++) {
        $resultqun = $stmt->execute(array($options[$i], $SNo, $qun[$i]));
    }

    if($resultqun) {
        header("location: shipment_order.php");
    } else {
        print $stmt->errorInfo();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:33:26.953

'shipmentquantity' 表的主键是什么？看起来您正在尝试为主键输入两个值“3”，这就是它出错的地方。

```
DESCRIBE `shipmentquanitity` 
```

# c++ - GCC-4.7 编译错误

> ID：10155571
> 
> 赞同：5
> 
> 时间：2012-04-14T17:07:36.987
> 
> 标签：c++, gcc, compilation, gcc4.7

当我将此片段的最后一行添加到我的程序代码中时：

```
typedef std::set<Job> JobSet;
typedef boost::shared_ptr<JobSet> JobSetPtr;
JobSetPtr jobs_;

jobs_->insert ( job );  // line 60 
```

我收到此错误：

```
 g++-4.7  -o /home/kron/Software/Synchronizer/1.0/Main.o -c src/Main.cpp
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h: In instantiation of ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = Job]’:
/usr/include/c++/4.7/bits/stl_tree.h:1285:4:   required from ‘std::pair<std::_Rb_tree_iterator<_Val>, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(const _Val&) [with _Key = Job; _Val = Job; _KeyOfValue = std::_Identity<Job>; _Compare = std::less<Job>; _Alloc = std::allocator<Job>]’
/usr/include/c++/4.7/bits/stl_set.h:415:29:   required from ‘std::pair<typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator, bool> std::set<_Key, _Compare, _Alloc>::insert(const value_type&) [with _Key = Job; _Compare = std::less<Job>; _Alloc = std::allocator<Job>; typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator = std::_Rb_tree_const_iterator<Job>; std::set<_Key, _Compare, _Alloc>::value_type = Job]’
src/Configuration.hpp:60:27:   required from here
/usr/include/c++/4.7/bits/stl_function.h:236:22: error: no match for ‘operator<’ in ‘__x < __y’
/usr/include/c++/4.7/bits/stl_function.h:236:22: note: candidates are:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/ios:41,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_pair.h:218:5: note: template<class _T1, class _T2> bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.7/bits/stl_pair.h:218:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::pair<_T1, _T2>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/ios:41,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::reverse_iterator<_Iterator>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/ios:41,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::reverse_iterator<_IteratorL>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2566:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.h:2566:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::basic_string<_CharT, _Traits, _Alloc>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2578:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.7/bits/basic_string.h:2578:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::basic_string<_CharT, _Traits, _Alloc>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2590:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.h:2590:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   mismatched types ‘const _CharT*’ and ‘Job’
In file included from /usr/include/c++/4.7/vector:65:0,
                 from src/Main.cpp:2:
/usr/include/c++/4.7/bits/stl_vector.h:1372:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.7/bits/stl_vector.h:1372:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::vector<_Tp, _Alloc>’
In file included from /usr/include/c++/4.7/set:60:0,
                 from src/Configuration.hpp:4,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_tree.h:873:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator<(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_tree.h:873:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>’
In file included from /usr/include/c++/4.7/set:61:0,
                 from src/Configuration.hpp:4,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_set.h:721:5: note: template<class _Key, class _Compare, class _Alloc> bool std::operator<(const std::set<_Key, _Compare, _Alloc>&, const std::set<_Key, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_set.h:721:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::set<_Key, _Compare, _Alloc>’
In file included from /usr/include/c++/4.7/set:62:0,
                 from src/Configuration.hpp:4,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_multiset.h:702:5: note: template<class _Key, class _Compare, class _Alloc> bool std::operator<(const std::multiset<_Key, _Compare, _Alloc>&, const std::multiset<_Key, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_multiset.h:702:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::multiset<_Key, _Compare, _Alloc>’
In file included from /usr/include/c++/4.7/list:64:0,
                 from /usr/include/boost/algorithm/string/std/list_traits.hpp:15,
                 from /usr/include/boost/algorithm/string/std_containers_traits.hpp:20,
                 from /usr/include/boost/algorithm/string.hpp:18,
                 from src/Configuration.hpp:9,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_list.h:1659:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::list<_Tp, _Alloc>&, const std::list<_Tp, _Alloc>&)
/usr/include/c++/4.7/bits/stl_list.h:1659:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::list<_Tp, _Alloc>’
In file included from /usr/include/c++/4.7/deque:65:0,
                 from /usr/include/boost/algorithm/string/find_format.hpp:14,
                 from /usr/include/boost/algorithm/string/replace.hpp:22,
                 from /usr/include/boost/algorithm/string.hpp:25,
                 from src/Configuration.hpp:9,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_deque.h:274:5: note: template<class _Tp, class _Ref, class _Ptr> bool std::operator<(const std::_Deque_iterator<_Tp, _Ref, _Ptr>&, const std::_Deque_iterator<_Tp, _Ref, _Ptr>&)
/usr/include/c++/4.7/bits/stl_deque.h:274:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::_Deque_iterator<_Tp, _Ref, _Ptr>’
In file included from /usr/include/c++/4.7/deque:65:0,
                 from /usr/include/boost/algorithm/string/find_format.hpp:14,
                 from /usr/include/boost/algorithm/string/replace.hpp:22,
                 from /usr/include/boost/algorithm/string.hpp:25,
                 from src/Configuration.hpp:9,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_deque.h:282:5: note: template<class _Tp, class _RefL, class _PtrL, class _RefR, class _PtrR> bool std::operator<(const std::_Deque_iterator<_Tp, _RefL, _PtrL>&, const std::_Deque_iterator<_Tp, _RefR, _PtrR>&)
/usr/include/c++/4.7/bits/stl_deque.h:282:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::_Deque_iterator<_Tp, _RefL, _PtrL>’
In file included from /usr/include/c++/4.7/deque:65:0,
                 from /usr/include/boost/algorithm/string/find_format.hpp:14,
                 from /usr/include/boost/algorithm/string/replace.hpp:22,
                 from /usr/include/boost/algorithm/string.hpp:25,
                 from src/Configuration.hpp:9,
                 from src/Main.cpp:5:
/usr/include/c++/4.7/bits/stl_deque.h:1947:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::deque<_Tp, _Alloc>&, const std::deque<_Tp, _Alloc>&)
/usr/include/c++/4.7/bits/stl_deque.h:1947:5: note:   template argument deduction/substitution failed:
In file included from /usr/include/c++/4.7/string:50:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from src/Main.cpp:1:
/usr/include/c++/4.7/bits/stl_function.h:236:22: note:   ‘const Job’ is not derived from ‘const std::deque<_Tp, _Alloc>’
make: *** [/home/kron/Software/Synchronizer/1.0/Main.o] Error 1 
```

是我的错吗？如果是，我做错了什么？如果没有，有人有同样的错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T17:14:12.433

似乎您没有提供`<`operator 的定义来比较两个 type 对象`Job`。

将对象插入`std::set`时，容器需要知道它应该插入项目的位置，为此它需要将要插入的对象与集合中已经存在的项目进行比较。为此，它使用`<`我猜你没有提供的运算符。`std::set<Job>`根本不知道如何比较两个类型的对象`Job`。

这样你就可以`operator<`上课了`Job`。

或者，或者，定义这个函子来比较`Job`对象：

```
struct JobComparer
{
    bool operator()(Job const &j1, Job const &j2)
    {
        //compare j1 and j2 and return true or false
    }
}; 
```

然后将其用作：

```
typedef std::set<Job, JobComparer> JobSet; 
```

`std::less`或者，您可以按照[此处的说明](https://stackoverflow.com/questions/4425212/custom-comparator-via-explicit-constructor-for-sorting-stdset)进行专业化。

你可以看到这个话题：

*   [std::set 与用户定义的类型，如何确保没有重复](https://stackoverflow.com/questions/1114856/stdset-with-user-defined-type-how-to-ensure-no-duplicates)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T17:43:40.167

Nawaz 提供了一个简单的答案，但我认为它值得一个更完整的答案。

A `set`of objects，在 C++ 中，是一个没有重复的有序容器。为了能够对对象进行排序，它使用对象本身以外的第二个模板参数：一个函子，其工作是比较两个对象。*它还使用第三个参数进行内存分配，在这里没用。*

当您使用 a 时，`set`您提供两个参数：

```
struct NameComparator {
    template <typename T>
    bool operator()(T const& left, T const& right) {
        return left.name() < right.name();
    }
};

std::set<Job, NameComparator> JobSet; 
```

提供的比较器应该定义一些顺序概念。基本上，想想`<`两个整数是如何工作的：

*   它是不自反的：`x < x`从不成立
*   它是反对称的：如果`x < y`then`y < x`为假
*   它是传递的：如果`x < y`然后`y < z``x < z`

由于这是一种常见的关系，因此标准库中存在这样的仿函数：`template <typename T> struct std::less;`，它适用于给定两个实例的任何类型`T`，您可以使用 operator `<`。

事实上，`set`您没有明确指出的第二个参数默认为`std::less<TypeOfObjectInSet>`. 这意味着当提供已定义的对象时，它只是开箱即用`<`。

因此，您有 3 个解决方案。

如果您的对象承认“自然”顺序关系，那么您可以定义`operator<`或专门化`std::less`。否则，如果您只需要此集合的一些顺序关系，那么您可以提供自己的比较器。

请注意，如果不需要订单*，*则可以使用`unordered_set`. 它需要散列和相等关系。

# objective-c - 条件 nsarray 计数

> ID：10155576
> 
> 赞同：2
> 
> 时间：2012-04-14T17:08:12.777
> 
> 标签：objective-c, xcode, cocoa-touch, nsmutablearray, nsarray

我想对子数组满足条件的数组进行计数。我以为我可以做到这一点，但我做不到。

```
NSLog(@"%d",[[_sections enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            [[obj objectAtIndex:4] isEqualToString:@"1"];
        }] count]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T17:32:32.720

`enumerateObjectsUsingBlock:`不返回任何东西。我敢打赌，代码甚至不会编译（而且，正如您的评论所述，自动完成不起作用——它不应该）。

使用 NSArray`indexesOfObjectsPassingTest:` 并获取`count`结果的`NSIndexSet`.

[记录在这里。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:46:25.203

bbum 是对的；您应该使用 indexOfObjectsPassingTest。它更简单。

但是你*可以*用来`enumerateObjectsUsingBlock`计算测试通过者，像这样：

```
NSArray *sections = [NSArray arrayWithObjects:@"arb", @"1", @"misc", @"1", @"extra", nil];
NSMutableArray *occurrencesOf1 = [NSMutableArray array];
[sections enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([(NSString*)obj isEqualToString:@"1"])
        [occurrencesOf1 addObject:obj];
}];
NSLog(@"%d", [occurrencesOf1 count]); // prints 2 
```

它效率低下，因为它需要额外的可变数组。

（所以你应该检查 bbum 的答案作为接受的答案——但我也是块函数的新手，并且很欣赏这个谜题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T22:45:05.653

[使用 for 循环更快](https://stackoverflow.com/questions/21157109/which-has-faster-performance-indexesofobjectspassingtest-or-filteredarrayusingpr)（而且，IMO，更具可读性）：

```
 NSLog(@"%lu", (unsigned long)[self countSectionsWithValue:@"1" atIndex:4]);
    // ...
}

// ...

- (NSUInteger) countSectionsWithValue:(NSString *)value atIndex:(NSInteger)idx
{
    NSUInteger count = 0
    for (id section in _sections)
    {
        if ([[section objectAtIndex:idx] isEqualToString:value])
        {
            count++;
        }
    }
    return count;
} 
```

另请注意，我使用了正确的`%lu`格式并`(unsigned long)`在`NSLog`. `%d`不是描述性的，并且[在所有情况下都不相同](https://en.wikipedia.org/wiki/Printf_format_string#Type_field)。

# c - C vs OpenCL，如何比较时间测量的结果？

> ID：10155579
> 
> 赞同：3
> 
> 时间：2012-04-14T17:08:58.473
> 
> 标签：c, performance, algorithm, opencl, measurement

所以，在另一篇文章中，我对 C 时间测量提出了质疑。现在，我想知道如何比较 C“函数”与 OpenCL“函数”的结果

这是主机 OpenCL 和 C 的代码

```
#define PROGRAM_FILE "sum.cl"
#define KERNEL_FUNC "float_sum"
#define ARRAY_SIZE 1000000

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#include <CL/cl.h>

int main()
{
    /* OpenCL Data structures */

    cl_platform_id platform;
    cl_device_id device;
    cl_context context;
    cl_program program;
    cl_kernel kernel;    
    cl_command_queue queue;
    cl_mem vec_buffer, result_buffer;

    cl_event prof_event;;

    /* ********************* */

    /* C Data Structures / Data types */
    FILE *program_handle; //Kernel file handle
    char *program_buffer; //Kernel buffer

    float *vec, *non_parallel;
    float result[ARRAY_SIZE];

    size_t program_size; //Kernel file size

    cl_ulong time_start, time_end, total_time;

    int i;
    /* ****************************** */

    /* Errors */
    cl_int err;
    /* ****** */

    non_parallel = (float*)malloc(ARRAY_SIZE * sizeof(float));
    vec          = (float*)malloc(ARRAY_SIZE * sizeof(float));

    //Initialize the vector of floats
    for(i = 0; i < ARRAY_SIZE; i++)
    vec[i] = i + 1;

    /************************* C Function **************************************/
    clock_t start, end;

    start = clock();

    for( i = 0; i < ARRAY_SIZE; i++) 
    {
    non_parallel[i] = vec[i] * vec[i];
    }
    end = clock();
    printf( "Number of seconds: %f\n", (clock()-start)/(double)CLOCKS_PER_SEC );

    free(non_parallel);
    /***************************************************************************/

    clGetPlatformIDs(1, &platform, NULL);//Just want NVIDIA platform
    clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &device, NULL);
    context = clCreateContext(NULL, 1, &device, NULL, NULL, &err);

    // Context error?
    if(err)
    {
    perror("Cannot create context");
    return 1;
    }

    //Read the kernel file
    program_handle = fopen(PROGRAM_FILE,"r");
    fseek(program_handle, 0, SEEK_END);
    program_size = ftell(program_handle);
    rewind(program_handle);

    program_buffer = (char*)malloc(program_size + 1);
    program_buffer[program_size] = '\0';
    fread(program_buffer, sizeof(char), program_size, program_handle);
    fclose(program_handle);

    //Create the program
    program = clCreateProgramWithSource(context, 1, (const char**)&program_buffer, 
                    &program_size, &err);

    if(err)
    {
    perror("Cannot create program");
    return 1;
    }

    free(program_buffer);

    clBuildProgram(program, 0, NULL, NULL, NULL, NULL);

    kernel = clCreateKernel(program, KERNEL_FUNC, &err);

    if(err)
    {
    perror("Cannot create kernel");
    return 1;
    }

    queue = clCreateCommandQueue(context, device, CL_QUEU_PROFILING_ENABLE, &err);

    if(err)
    {
    perror("Cannot create command queue");
    return 1;
    }

    vec_buffer = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
                sizeof(float) * ARRAY_SIZE, vec, &err);
    result_buffer = clCreateBuffer(context, CL_MEM_WRITE_ONLY, sizeof(float)*ARRAY_SIZE, NULL, &err);

    if(err)
    {
    perror("Cannot create the vector buffer");
    return 1;
    }

    clSetKernelArg(kernel, 0, sizeof(cl_mem), &vec_buffer);
    clSetKernelArg(kernel, 1, sizeof(cl_mem), &result_buffer);

    size_t global_size = ARRAY_SIZE;
    size_t local_size = 0;

    clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &global_size, NULL, 0, NULL, &prof_event);

    clEnqueueReadBuffer(queue, result_buffer, CL_TRUE, 0, sizeof(float)*ARRAY_SIZE, &result, 0, NULL, NULL);
    clFinish(queue);

     clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_START,
           sizeof(time_start), &time_start, NULL);
     clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_END,
           sizeof(time_end), &time_end, NULL);
     total_time += time_end - time_start;

    printf("\nAverage time in nanoseconds = %lu\n", total_time/ARRAY_SIZE);

    clReleaseMemObject(vec_buffer);
    clReleaseMemObject(result_buffer);
    clReleaseKernel(kernel);
    clReleaseCommandQueue(queue);
    clReleaseProgram(program);
    clReleaseContext(context);

    free(vec);

    return 0;
} 
```

内核是：

```
__kernel void float_sum(__global float* vec,__global float* result){
    int gid = get_global_id(0);
    result[gid] = vec[gid] * vec[gid];
} 
```

现在，结果是：

> 秒数：0.010000 <- 这是 C 代码
> 
> 以纳秒为单位的平均时间 = 140737284 <- OpenCL 函数

0,1407秒是OpenCL时间内核执行的时间，比C函数还多，对吗？因为我认为 OpenCL 应该比 C 非并行算法最快......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:14:56.247

在 GPU 上执行并行代码不一定比在 CPU 上执行更快。考虑到除了计算之外，您还必须将数据传入和传出 GPU 内存。

在您的示例中，您正在传输 2 * N 个项目并并行执行 O(N) 操作，这是对 GPU 的非常低效的使用。因此，对于这种特定的计算，CPU 很可能确实更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T15:33:47.973

只是为了向她寻求帮助的其他人：使用 OpenCL 分析内核运行时的简短介绍

启用分析模式：

```
cmdQueue = clCreateCommandQueue(context, *devices, CL_QUEUE_PROFILING_ENABLE, &err); 
```

分析内核：

```
cl_event prof_event; 
clEnqueueNDRangeKernel(cmdQueue, kernel, 1 , 0, globalWorkSize, NULL, 0, NULL, &prof_event); 
```

读取分析数据：

```
cl_ulong ev_start_time=(cl_ulong)0;     
cl_ulong ev_end_time=(cl_ulong)0;   

clFinish(cmdQueue);
err = clWaitForEvents(1, &prof_event);
err |= clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_START, sizeof(cl_ulong), &ev_start_time, NULL);
err |= clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_END, sizeof(cl_ulong), &ev_end_time, NULL); 
```

计算内核执行时间：

```
float run_time_gpu = (float)(ev_end_time - ev_start_time)/1000; // in usec 
```

你的方法

```
total_time/ARRAY_SIZE 
```

不是你想要的。它将为您提供每个工作项的运行时间。

以纳秒为单位的操作/时间将为您提供 GFLOPS（每秒千兆浮点操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T03:01:12.883

这是您的应用程序的一个大问题：

```
size_t global_size = ARRAY_SIZE;
size_t local_size = 0; 
```

您正在创建单项工作组，这将使大部分 gpu 闲置。在许多情况下，使用单项工作组只会使用 1/15 的 gpu。

而是试试这个：

```
size_t global_size = ARRAY_SIZE / 250; //important: local_size*global_size must equal ARRAY_SIZE
size_t local_size = 250; //a power of 2 works well. 250 is close enough, yes divisible by your 1M array size 
```

现在您正在创建能够更好地使图形硬件的 ALU 饱和的大型组。内核将按照您现在拥有的方式运行良好，但也有一些方法可以从内核部分中获得更多收益。

内核优化：将 ARRAY_SIZE 作为附加参数传递到内核中，并使用更少的组和更优化的组大小。您还将消除 local_size*global_size 完全等于 ARRAY_SIZE 的需要。工作项的全局 id 从未在此内核中使用，也不需要它，因为传入了总大小。

```
__kernel void float_sum(__global float* vec,__global float* result,__global int count){
  int lId = get_local_id(0);
  int lSize = get_local_size(0);
  int grId = get_group_id(0);
  int totalOps = count/get_num_groups(0);
  int startIndex = grId * totalOps;
  int maxIndex = startIndex+totalOps;
  if(grId == get_num_groups(0)-1){
    endIndex = count;
  }
  for(int i=startIndex+lId;i<endIndex;i+=lSize){
    result[i] = vec[i] * vec[i];
  }
} 
```

现在您可能会想，对于这样一个简单的内核，有很多变量。请记住，内核的每次执行都会对数据执行多项操作，而不仅仅是一个。使用下面的值，在我的 radeon 5870（20 个计算单元）上，每个工作项最终在其 for 循环中计算 781 或 782 个值。每个组将计算 50000 条数据。我使用的变量的开销远小于创建 4000 个工作组的开销——或 100 万个。

```
size_t global_size = ARRAY_SIZE / numComputeUnits;
size_t local_size = 64; //also try other multiples of 16 or 64 for gpu; or multiples of your core-count for a cpu kernel 
```

[请参阅此处了解如何获取 numComputeUnits 的值](https://stackoverflow.com/questions/10096443/what-is-the-algorithm-to-determine-optimal-work-group-size-and-number-of-workgro/10098063)

# php - 我如何设置 nginx 让它在 /home/user 文件夹上创建文件和目录？

> ID：10155582
> 
> 赞同：1
> 
> 时间：2012-04-14T17:09:20.577
> 
> 标签：php, nginx

我统治了一个服务器，其中几个用户有自己的 webdir，设置在 /home/user/public_html 上。Nginx 以 http 方式运行。一切正常，但如果 php 需要创建文件，它会输出权限错误。

我该如何解决这个问题？是否可以告诉 nginx 将 /home/username 下的所有文件创建为“用户名”？

问候 && TIA ^^。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:25:42.513

是的，这是可能的。实际上它不是 Nginx，它是作为特定用户的 FastCGI PHP 模块。[关于如何设置 Debian/Ubuntu 系统](http://www.howtoforge.com/php-fpm-nginx-security-in-shared-hosting-environments-debian-ubuntu)来做到这一点有一个很好的解释。

此外，我会为每个帐户创建两个用户和一个组（例如 user1、user1-www 和 user1-group）。对于 FTP，您可以使用 user1/user1-group。但是可以将 FastCGI PHP 模块配置为 user1-www/user1-group。

1.  现在您可以限制对一个帐户的文件夹的读写访问。
2.  您的客户可以根据他们的要求自由地允许或禁止对任何文件或目录的写访问。

如果 PHP 进程可以修改 PHP 代码，那么您将面临被黑客攻击和网站被操纵的风险。限制对数据文件的写访问只会降低这种危险。如果您独自一人，我不介意，但向其他人提供托管服务会增加您的责任。

# css-float - CSS浮动图像并排

> ID：10155583
> 
> 赞同：0
> 
> 时间：2012-04-14T17:09:23.740
> 
> 标签：css-float

我无法在此页面上让我的图片站在我这边（分享和关注下方）：

[http://toddheymandirector.com/REEL/index_newlook_gallery2222.html](http://toddheymandirector.com/REEL/index_newlook_gallery2222.html)

可疑代码：

```
#gallery ul div {
  min-width:26.6%;
  margin:0;
  float:left
  background-color:#595959;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:57:21.300

在你的 css 文件中找到这个块：

```
img.a {
    left: 0;
    position: absolute;
    top: 0;
    z-index: 10;
} 
```

并将位置替换为相对：

```
img.a {
    left: 0;
    position: relative;
    top: 0;
    z-index: 10;
} 
```

# actionscript-3 - 将 Facebook 中的完整联系人对象添加到 SqlLite

> ID：10155584
> 
> 赞同：2
> 
> 时间：2012-04-14T17:09:27.880
> 
> 标签：actionscript-3, apache-flex

我无法将 Facebook 联系人中的姓名和图像添加到 SqLite，因为添加是在循环内部，并且加载程序在事件完成时启动。下面的代码将数据添加到数据库中，但在对象的名称中是最后一个退出循环的人。有什么想法吗？谢谢！

```
 private var person:PersonVO;

    protected function handleFriendsLoad(response:Object, fail:Object):void 
    {
        if (fail) { return }

        var friends:Array = response as Array;
        var l:uint=friends.length;

        for (var i:uint=0;i<l;i++) {
            var friend:Object = friends[i];

            FacebookDesktop.api('/'+friend.id, loadData);
        } 
    }

    private function loadData(object:Object, fail:Object):void
    {
        if (fail) { return; }

        var loader:Loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageToByteArray);
        loader.load(new URLRequest(FacebookDesktop.getImageUrl(object.id, 'large')));

        person = new PersonVO()

        person.name = object.first_name;
    }

    private function imageToByteArray(event:Event):void
    {
        var wczytaj:Loader = (event.target as LoaderInfo).loader;
        var image:Bitmap = Bitmap(wczytaj.content);
        var encoderJpeg:JPEGEncoder = new JPEGEncoder();
        var byteArray:ByteArray = encoderJpeg.encode(image.bitmapData);

        person.image= byteArray;

        insert(person);
    } 

    private function insert(person:PersonVO):void
    {
        dbStatement.text = "INSERT INTO person (name,image) values(:name,:jpeg)";
        dbStatement.parameters[":name"] = person.name; 
        dbStatement.parameters[":jpeg"] = person.image; 
        dbStatement.execute();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:08:37.493

扩展`Loader`类功能：

```
 dynamic class DynamicLoader extends Loader{} 
```

然后在以下实例中存储您想要的任何内容`DynamicLoader`：

```
private function loadData(object:Object, fail:Object):void
{
    if (fail) { return; }

    var person:PersonVO = new PersonVO();
    person.name = object.first_name;

    var loader:DynamicLoader = new DynamicLoader();
    loader.person = person;
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageToByteArray);
    loader.load(new URLRequest(FacebookDesktop.getImageUrl(object.id, 'large')));
}

private function imageToByteArray(event:Event):void
{
    var wczytaj:DynamicLoader = (event.target as LoaderInfo).loader as DynamicLoader;
    var image:Bitmap = Bitmap(wczytaj.content);
    var encoderJpeg:JPEGEncoder = new JPEGEncoder();
    var byteArray:ByteArray = encoderJpeg.encode(image.bitmapData);

    var person:PersonVO = wczytaj.person;
    person.image= byteArray;

    insert(person);
} 
```

我没用过`private var person:PersonVO;`。因此，如果您没有在类的其他方法中使用它，则可以将其完全删除。

# html - WebApp：如何使用原生用户界面的图标、颜色...

> ID：10155587
> 
> 赞同：1
> 
> 时间：2012-04-14T17:10:14.357
> 
> 标签：html, web-applications, user-interface, css

我刚刚开始开发一个应该像本机一样的 WebApp。这就是为什么我不想创建自己的主题，但我想使用用户使用的用户界面主题（Unity [Ubuntu]、Explorer [Windows]、Gnome [Mint] 等）。

这些是我想从 UI 的主题中得到的一些东西：

*   **图标**：“保存”、“打开”、“复制”、“粘贴”等图标
*   **位置**：Windows 应用程序在左侧绘制“确定”按钮，在右侧绘制“取消”按钮，对于 Ubuntu 用户，情况正好相反。另一个例子：Ubuntu 用户可以在“编辑”找到应用程序设置的菜单项，Windows 用户可以在“附加”找到。
*   **命名约定**：“文件夹”与“目录”之类的名称不同。
*   **颜色和背景**：菜单栏的背景对 Unity/Ubuntu 用户显示为灰色，对资源管理器/Windows7 用户显示为淡紫色。

**我知道并非我所说的每件事都是可能的。**但我想至少解决其中的一些问题。以下是我听说的一些解决方案：

*   **(-moz-) 外观**（过时[的 CSS3 darft](http://www.w3.org/TR/2004/CR-css3-ui-20040511/)）
*   **CSS 系统颜色**，如 ButtonText 或 Window（已弃用，但在许多浏览器中可用）
*   **CSS 系统字体**（过时[的 CSS3 darft](http://www.w3.org/TR/2004/CR-css3-ui-20040511/)）

我的问题：您知道从用户界面获取颜色、图标...的其他范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:27:01.927

您唯一可以使用的是 CSS 系统颜色 - 其他所有内容都可以通过用户代理嗅探来猜测，但这只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:44:57.907

对于图标，您可以使用 moz-icon。例子：

```
#content a[href $=".pdf"]:before {
    content: url("moz-icon://.pdf");
} 
```

这仅适用于基于 Firefox 和 Gecko 的浏览器。

# iphone - 没有为 UITableView 调用 numberOfRowsInSection

> ID：10155590
> 
> 赞同：10
> 
> 时间：2012-04-14T17:10:55.783
> 
> 标签：iphone, objective-c, ios5, xcode4.2

我遇到了一些我的 UITableView 没有重新加载的问题，我重做了插座的链接以确保这不是问题。我也尝试过使用 [self table] reloadData] 但这似乎也不起作用。我已经调试了这些问题，但它只是跳过了 reloadData 并且应用程序继续运行，就像代码甚至不存在一样。

我的 .m 文件的顶部，在 ViewDidLoad 中什么也没做

```
#import "SettingsCourses.h"

@implementation SettingsCourses
@synthesize settingsCourses;
@synthesize Delegate;
@synthesize BackButton;
@synthesize DeleteButton;
@synthesize table;
@synthesize courses;
@synthesize dataHandler;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
    dataHandler = [[DataHandler alloc] init];
    dataHandler.coursesDelegate = self;
    courses = [dataHandler fetchCourses];
    NSLog(@"Debug Count: %i", [courses count]);
}
[table reloadData];
return self;
}

- (void) viewWillAppear:(BOOL)animated {
[table reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (courses) {
    NSLog(@"Count: %i", [courses count]);
    return [courses count];
}
else {
    NSLog(@"Count: 0");
    return 0;
}
} 
```

我的 .h 文件

```
#import <UIKit/UIKit.h>
#import "dataHandler.h"

@interface SettingsCourses : UIViewController 

@property (strong, nonatomic) DataHandler *dataHandler;
@property (strong, nonatomic) NSMutableArray *courses;
@property (strong, nonatomic) IBOutlet UIView *settingsCourses;
@property (nonatomic, strong) id Delegate;
@property (weak, nonatomic) IBOutlet UIButton *BackButton;
@property (weak, nonatomic) IBOutlet UIButton *DeleteButton;
@property (weak, nonatomic) IBOutlet UITableView *table;

- (IBAction)Delete:(id)sender;
- (IBAction)Back:(id)sender; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-14T17:26:34.980

添加此行：

```
- (void)viewDidLoad {
  [super viewDidLoad];

  self.table.dataSource = self;
  self.table.delegate = self;
} 
```

但更容易的是在 interface-build aka XIB 文件中设置数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:34:44.220

试试这个

```
@interface SettingsCourses : UIViewController <UITableViewDelegate,UITableViewDataSource> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:24:43.513

您似乎没有设置表委托或数据源。为此，只需在您的单位方法中添加以下代码

```
table.dataSource = self or wherever your data source is;
table.delegate = self: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T13:20:55.940

您可能想尝试在界面构建器中断开并重新连接数据源和委托。IB 有时会“忘记”连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-21T21:14:53.880

我在 IB 中设置了一个 UITableViewController，但它的类名与我拥有的 UITableViewController 文件不匹配。菜鸟！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-14T08:33:42.560

对我来说，错误是我回来`0`了 `func numberOfSections(in tableView: UITableView) -> Int`

# jquery - jQuery 脚本的权限被拒绝

> ID：10155595
> 
> 赞同：1
> 
> 时间：2012-04-14T17:11:11.343
> 
> 标签：jquery, fancybox

所有，我正在使用以下代码：

```
<head>
<title>Wedding Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="layout.css" rel="stylesheet" type="text/css" />
<!--<script src="js/jquery-1.6.4.js" type="text/javascript"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="js/cufon-yui.js" type="text/javascript"></script>
<script src="js/cufon-replace.js" type="text/javascript"></script>
<script src="js/Century_Gothic_400.font.js" type="text/javascript"></script>
<!--<script type="text/javascript" src="./fancybox/jquery.mousewheel-3.0.4.pack.js"></script>-->
<script type="text/javascript" src="./fancybox/jquery.fancybox.js"></script>
<link rel="stylesheet" type="text/css" href="./fancybox/jquery.fancybox.css" media="screen" />
<script type="text/javascript">
$(function() {
    $(".select_song").click(function(){
        event.preventDefault();
        song_id = jQuery(this).attr("id");
        song_id = song_id.split("_");
        song_id = song_id[1];
        $.post("save_song.php", { song_id: song_id, time: "2pm" },
            function(response) {
                $("#update_"+song_id).html(response.responseText1);
        }, "json");
    });

    $(".display_songs").fancybox({
        'maxWidth'    : 675,
        'maxHeight'   : 800,
        'fitToView'   : true,
        'closeClick'  : false,
        'openEffect'  : 'none',
        'closeEffect' : 'none',
        'scolling'    : 'no',
        'href'        : 'display_songs.php'
    });
});
</script>
</head> 
```

每当我在 IE 中单击显示歌曲链接（有一个 display_songs 类）时，我都会收到以下错误消息：

```
网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；InfoPath。 3；.NET4.0C；.NET4.0E；MS-RTC LM 8；AskTbAD2/5.14.1.20007)
时间戳：2012 年 4 月 14 日星期六 17:11:00 UTC

消息：权限被拒绝
线路：4
字符：2462
代码：0
网址：https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js

```

知道为什么会这样或如何解决吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:16:59.577

您在 jQuery .js 文件的 URL中使用`https`而不是。`http`如果你去掉“s”，它会起作用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:57:53.657

我实际上在我的 AJAX 页面上加载了 jquery。我从那里删除了它，现在效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:17:43.593

您可以下载此脚本[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)并将此脚本包含到您的页面中，就像其他脚本一样

```
<script src="js/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T10:26:22.993

很晚了，但这会帮助有问题的人

我找到了解决这个问题的方法。我使用了 onUpdate 回调并调用了 iframe。

$('a.js-fancybox-iframe').fancybox({ type: 'iframe', scrolling : 'visible', width: 800, height: "auto", autoHeight: true, onUpdate: function(){ $( "iframe.fancybox-iframe"); } });

# python - GAE 数据存储 - 计算一分钟前和两分钟前之间的记录？

> ID：10155600
> 
> 赞同：1
> 
> 时间：2012-04-14T17:11:46.103
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在将 GAE 数据存储与 python 一起使用，我想计算并显示两个最近日期之间的记录数。例如，数据存储中有多少条记录在两分钟前和三分钟前之间具有时间签名。谢谢你。

```
#!/usr/bin/env python

import wsgiref.handlers
from google.appengine.ext import db
from google.appengine.ext import webapp
from google.appengine.ext.webapp import template
from datetime import datetime

class Voice(db.Model):
    when = db.DateTimeProperty(auto_now_add=True)

class MyHandler(webapp.RequestHandler):
    def get(self):
        voices = db.GqlQuery(
            'SELECT * FROM Voice '
            'ORDER BY when DESC')
        values = {
            'voices': voices
        }
        self.response.out.write(template.render('main.html', values))
    def post(self):
        voice = Voice()
        voice.put()
        self.redirect('/')
        self.response.out.write('posted!')  

def main():
    app = webapp.WSGIApplication([
        (r'.*', MyHandler)], debug=True)
    wsgiref.handlers.CGIHandler().run(app)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:22:31.427

```
count = db.Query().filter('when >', two_minutes_ago).filter('when <', one_minute_ago).count() 
```

[您可以在文档](https://developers.google.com/appengine/docs/python/datastore/queryclass)中了解有关查询的更多信息。

要获取的值，`two_minutes_ago`您`one_minute_ago`可以使用该[`datetime`](http://docs.python.org/library/datetime.html)模块：

```
>>> datetime.datetime.now()
datetime.datetime(2012, 4, 14, 14, 26, 18, 343269)
>>> datetime.datetime.now() - datetime.timedelta(minutes=1)
datetime.datetime(2012, 4, 14, 14, 25, 49, 860390) 
```

在您的 Python REPL 中尝试一下，以更加熟悉它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:24:30.970

您的查询将需要一个复合索引来支持按日期排序。这意味着任何最近的更新都将最终保持一致。因此，最近的更新可能不会显示。喜欢听到任何解决方法。

# android - Android 从自定义状态机管理活动

> ID：10155601
> 
> 赞同：0
> 
> 时间：2012-04-14T17:11:47.337
> 
> 标签：android, android-activity, state, android-service

我有轮询 http 服务器的应用程序。根据返回的 JSON，应用程序应该更改前面的活动。

我的问题是，如何实现这一目标？我应该使用 Android 的服务设施吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:21:29.343

在 an 中解析 JSON 对象，`AsyncTask`然后在`onPostExecute()`AsyncTask 的方法中更新视图。虽然不需要服务。

# java - 如何在 Hadoop 中使用 CompressionCodec

> ID：10155602
> 
> 赞同：2
> 
> 时间：2012-04-14T17:11:53.077
> 
> 标签：java, hadoop, compression, mapreduce

我正在执行以下操作以从 reducer 压缩 o/p 文件：

```
OutputStream out = ipFs.create( new Path( opDir + "/" + fileName ) );
CompressionCodec codec = new GzipCodec(); 
OutputStream cs = codec.createOutputStream( out );
BufferedWriter cout = new BufferedWriter( new OutputStreamWriter( cs ) );
cout.write( ... ) 
```

但在第 3 行出现空指针异常：

```
java.lang.NullPointerException
    at org.apache.hadoop.io.compress.zlib.ZlibFactory.isNativeZlibLoaded(ZlibFactory.java:63)
    at org.apache.hadoop.io.compress.GzipCodec.createOutputStream(GzipCodec.java:92)
    at myFile$myReduce.reduce(myFile.java:354) 
```

我也因此而关注[JIRA](http://mail-archives.apache.org/mod_mbox/hbase-issues/201202.mbox/%3C1886894051.6677.1329950151727.JavaMail.tomcat@hel.zones.apache.org%3E)。

你能建议我做错什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T22:39:32.740

如果要在标准 OutputFormat 处理之外使用压缩，则应使用 CompressionCodecFactory（如@linker 答案中所述）：

```
CompressionCodecFactory ccf = new CompressionCodecFactory(conf)
CompressionCodec codec = ccf.getCodecByClassName(GzipCodec.class.getName());
OutputStream compressedOutputSream = codec.createOutputStream(outputStream) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T18:17:16.883

你这样做是错的。执行此操作的标准方法是：

```
TextOutputFormat.setOutputCompressorClass(job, GzipCodec.class); 
```

GzipCodec 是可配置的，如果直接实例化它，则必须正确初始化它（setConf，...）

试试这个，让我知道它是否有效。

# cocoa - 如何在 Apple 的 Messages for Mac 中实现嵌入式文本样式？

> ID：10155603
> 
> 赞同：0
> 
> 时间：2012-04-14T17:12:01.667
> 
> 标签：cocoa, nstextfield, nstextfieldcell

我想复制 Messages/iMessage 的嵌入式文本样式，或者浅灰色背景上的文本“白色阴影”样式。

![例子](../Images/f16958894dae85fb28b2cde9d0c03225.png)

如您所见，即使在浅灰色背景上，文本也带有“白色阴影”。粗体文本确实有亚像素渲染，而灰色文本没有（设计？）。

我试过了`-setBackgroundStyle:NSBackgroundStyleRaised`。然而，它产生的阴影比背景更暗。`-setBackgroundStyle:NSBackgroundStyleLowered`更糟糕的是它甚至覆盖了我的字体颜色设置。

那么，这样做的正确方法是什么？有什么技巧还是只需要子类化`NSTextFields`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:53:01.443

**解决方案1：**

我能想到的最简单的解决方案是在彼此上写两个文本（例如，顶部为灰色，底部为白色，底部相差 1px）。

* * *

**解决方案2：**

当然，它可以通过子类化`NSTextFieldCell`和添加阴影来完成。

**像这样：**

```
- (void)drawInteriorWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    NSShadow *shadow = [[NSShadow alloc] init];
    [shadow setShadowOffset:NSMakeSize(0,-1)];
    [shadow setShadowColor:[NSColor whiteColor]];
    [shadow setShadowBlurRadius:0];

    NSMutableParagraphStyle *paragStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
    [paragStyle setAlignment:[self alignment]];

    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                      [self font],NSFontAttributeName,
                      shadow,NSShadowAttributeName,
                      [self textColor],NSForegroundColorAttributeName,
                      paragStyle,NSParagraphStyleAttributeName,nil];
    [shadow release];
    [paragStyle release];

    NSAttributedString *string = [[NSAttributedString alloc] initWithString:[self stringValue] attributes:attributes];
    [self setAttributedStringValue:string];
    [string release];
    [[self attributedStringValue] drawInRect:cellFrame];
} 
```

**结果：**

![文本示例](../Images/4a5a3792f3c546eda07941d25ff01ff8.png)

# xcode - 加载tableview，结果显示从下到上Xcode？

> ID：10155605
> 
> 赞同：1
> 
> 时间：2012-04-14T17:12:04.980
> 
> 标签：xcode, uitableview

我有一种预测文本 uitableview，在开始输入时会在我的 url 栏上方加载。输入 url 并开始加载 web 视图后，它将被添加到数组中，因此下次用户开始输入相同的 url 或至少第一个字母时，它会显示在 tableview 中。即 a = apple.com 下一行 = amazon.com 然后将空间向下到键盘正上方的 url 栏。我想让结果从下到上显示，所以第一个结果显示在 url 栏的正上方，而不是整个视图的顶部。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:29:32.693

我假设当只有一个单元格要显示时，您希望它显示在“网址栏”的正上方。

如果是这样，请尝试垂直翻转表格本身以及所有单元格（或其内容）。

# php - 确保 Facebook 用户在登录前“注册”

> ID：10155607
> 
> 赞同：0
> 
> 时间：2012-04-14T17:12:26.200
> 
> 标签：php, facebook

如果我将登录按钮放在我的网站上，用户将能够登录 - 实际上不需要注册，我如何确保“用户”实际注册（这样我就可以将数据保存在我的数据库中）在他真正登录之前？

我的索引代码...

```
<?php

require '../src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '*id trimmed*',
  'secret' => '*secret trimmed*',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { ?>
      Your user profile is
      <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre>
    <?php } else { ?>
      <fb:login-button>Logga in med Facebook</fb:login-button>

    <?php } ?>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:52:42.733

只需将来自 facebook 的用户 ID 与您的数据库进行比较，如果存在 -> 登录，否则 -> 注册：

```
// ...
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

if ($user)
{
  $id = $user_profile['id']; // facebook user id;
  // now use this $id to compare with your database saved user facebook user id
  // if not exists, then create user, else update login counter or only get profile
}
//... 
```

# jquery-ui - jQuery UI 效果和/或 setInterval 带有“live”删除类

> ID：10155614
> 
> 赞同：0
> 
> 时间：2012-04-14T17:13:10.120
> 
> 标签：jquery-ui, jquery

我有一个通知设置，它通过 AJAX 调用定期从数据库中检索通知。

如果通知是新的，那么我想向包含通知的元素添加一个 jQuery UI“突出显示”效果。

对于不同的通知类型，有很多这样的。

随着通知的加载，包含通知数据的元素在需要时提供了一个新类“flashAlert”。然后触发下面的函数。

```
function startAlert() { // this function makes alerts flash
    setInterval(function () {
       $('.flashAlert').effect("highlight", {}, 2500);
    }, 2500);    
}; 
```

但是，如果从元素中删除了“flashAlert”类（通过“清除通知”功能完成），则该效果仍然有效。

我知道我可以调用`clearInterval`我的“清除通知”函数，但是我必须为每个通知设置一个单独的间隔函数，而不是像这样的单个函数。

我在这里看到了其他问题，用户发现很难对由 jQuery 添加的元素产生影响，但没有关于删除效果的问题！

重新加载页面会清除它，但这不是我想要的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:22:28.133

```
function startAlert(){
    $('.flashAlert').effect("highlight", {}, 2500, startAlert);
} 
```

当您希望它在清晰的通知中停止时，只需执行以下操作：

```
$('.flashAlert').removeClass("flashalert").stop(); 
```

# distinct - xslt1.0 中不同值的总和

> ID：10155616
> 
> 赞同：1
> 
> 时间：2012-04-14T17:13:51.140
> 
> 标签：distinct, xslt-1.0

```
<customer>
  <item>
    <BILLNO>1</BILLNO>
    <product>ABC</product>
    <AMT>20</AMT>
  </item>
  <item>
    <BILLNO>2</BILLNO>
    <product>GHK</product>
    <AMT>30</AMT>
  </item>
  <item>
    <BILLNO>1</BILLNO>
    <product>XYZ</product>
    <AMT>20</AMT>
  </item>
</customer> 
```

我正在尝试使用 xslt1.0 获取不同值的总和。我希望使用 muenchian 方法得到这样的输出。每个账单将有多个产品。在一天结束时，我需要账单总数和总金额

```
<sales>
  <totalbills>2</totalbills>
  <totalamount>50</totalamount>
</sales> 
```

感谢帮助拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:49:42.943

这个 Xslt 样式表：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>

  <xsl:key name="item-key" match="item" use="BILLNO/text()"/>

  <xsl:template match="/customer">
    <root>
      <xsl:for-each select="item[generate-id() = generate-id(key('item-key', BILLNO/text()))]">
        <sales>
          <totalbills>
            <xsl:value-of select="count(../item[BILLNO = current()/BILLNO])"/>
          </totalbills>
          <totalamount>
            <xsl:value-of select="sum(../item[BILLNO = current()/BILLNO]/AMT)"/>
          </totalamount>
        </sales>
      </xsl:for-each>
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

呈现以下输出：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <sales>
    <totalbills>2</totalbills>
    <totalamount>40</totalamount>
  </sales>
  <sales>
    <totalbills>1</totalbills>
    <totalamount>30</totalamount>
  </sales>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:00:26.903

**这个简短而简单的转换（不`xsl:for-each`，不`..`，不`text()`使用）：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kBills" match="item" use="BILLNO"/>

 <xsl:variable name="vdistItems" select=
  "/*/*[generate-id() = generate-id(key('kBills', BILLNO)[1])]"/>

 <xsl:template match="/*">
     <sales>
      <totalbills><xsl:value-of select="count($vdistItems)"/></totalbills>
      <totalamount><xsl:value-of select="sum($vdistItems/AMT)"/></totalamount>
     </sales>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<customer>
  <item>
    <BILLNO>1</BILLNO>
    <product>ABC</product>
    <AMT>20</AMT>
  </item>
  <item>
    <BILLNO>2</BILLNO>
    <product>GHK</product>
    <AMT>30</AMT>
  </item>
  <item>
    <BILLNO>1</BILLNO>
    <product>XYZ</product>
    <AMT>20</AMT>
  </item>
</customer> 
```

**产生确切想要的正确结果：**

```
<sales>
   <totalbills>2</totalbills>
   <totalamount>50</totalamount>
</sales> 
```

**解释**：适当使用

1.  **Muenchian[分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

2.  **[`sum()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-sum)功能**。**_**

# javascript - 使用“输入”键（Greasemonkey）发送推文

> ID：10155620
> 
> 赞同：1
> 
> 时间：2012-04-14T17:14:10.113
> 
> 标签：javascript, twitter, textarea, greasemonkey

我正在尝试创建一个 Greasemonkey 脚本，该脚本可以在用户按下“输入”键时提交推文。我已经让它在一个简单的 HTML 页面上正常工作（在这个网站上的一些优秀技巧的帮助下）。但是，当我尝试在我的 Twitter 页面上使用代码时，只有在当前未编写推文时才会触发警报。

```
document.onkeyup = function(event){                 
    var keyCode;    
    if (window.event) // IE/Safari/Chrome/Firefox(?)
    {
        keyCode = event.keyCode;
    }
    else if (event.which) // Netscape/Firefox/Opera
    {
        keyCode = event.which;
    }   

    if (keyCode == 13){
    alert("Enter pressed");
    }
} 
```

我的下一个想法是测试更具体的按键事件。所以我尝试在新的推文文本区域中测试一个关键事件：

```
document.getElementsByClassName("twitter-anywhere-tweet-box-editor")[0].onkeyup = function(event) 
```

...但是这个事件似乎永远不会触发。我还尝试按标签抓取元素：

```
document.getElementsByTagName("textarea")[0].onkeyup = function(event) 
```

...但也不在那里骰子。我想知道这是否与新的推文窗口没有从 window.onload() 的一开始就加载的事实有关。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:14:23.650

多亏了[这篇文章](https://stackoverflow.com/questions/7283923/greasemonkey-with-jquery-how-to-write-the-greasemonkey-script-to-modify-page-do)，我得到了它。我还在[这里](http://userscripts.org/scripts/show/131145)发布了完整的 Greasemonkey 脚本。

```
setInterval (function() { checkForTweetbox (); }, 500);

function checkForTweetbox () {
    var tweetbox = document.querySelector ('div.tweet-box textarea');   //check for new tweet window
    if (tweetbox) {
        if (! tweetbox.weHaveProcessed) {
            tweetbox.weHaveProcessed    = true;
//          alert ('New tweet-box found!');
        }
    }   
    tweetbox.onkeydown = function(event){
        if(event.keyCode == 13){                                        //13 = Enter keycode
            document.querySelector ('a.primary-btn').click();           //there must be at least one character in the textarea  
        }
    }           
} 
```

# php - 如何让 PDO 使用 PHP 5.4 在 WAMP 上工作？

> ID：10155624
> 
> 赞同：2
> 
> 时间：2012-04-14T17:14:18.350
> 
> 标签：php, pdo

如何让 PDO 使用 PHP 5.4 在 WAMP 上工作？我在 WAMP（2.2d 32 位）中安装了 PHP 5.4。我的 PHP.ini 文件启用了它（在 5.4 phpForApache.ini 文件中）。我为 windows 下载了最新的 PHP 5.4 Thread Safe。

但我无法让 PDO 扩展工作。这是我的 php 信息文件：

```
Configure Command   cscript /nologo configure.js "--enable-snapshot-build" 
"--disable-isapi" "--enable-debug-pack" "--disable-nsapi" "--without-mssql" 
"--without-pdo-mssql" "--without-pi3web" 
"--with-pdo-oci=C:\php-    sdk\oracle\instantclient10\sdk,shared" 
"--with-oci8=C:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8-11g=C:\php-        sdk\oracle\instantclient11\sdk,shared" 
"--enable-object-out-dir=../obj/" "--enable-com-dotnet" 
"--with-mcrypt=static" "--disable-static-analyze" "--with-pgo"

PDO drivers no value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:31:26.320

文章： http: [//www.bluefrog.ca/2012/03/adding-php-5-4-0-final-support-to-wampserver/](http://www.bluefrog.ca/2012/03/adding-php-5-4-0-final-support-to-wampserver/)

> 尽管您现在将支持 5.4，但您将丢失一些您可能已经习惯于其他版本的 PHP 的花哨的扩展和功能。这些可能包括：
> 
> ```
> Xdebug
> APC
> PDO drivers
> Curl
> etc… 
> ```

我建议单独安装 Apache 2、Mysql、PHP。它工作得很好。

# android - ACRA - 如何将其实施到现有项目中

> ID：10155626
> 
> 赞同：0
> 
> 时间：2012-04-14T17:14:26.290
> 
> 标签：android, acra

大家好，这里的第一个计时器，我有一个我一直在做的项目，现在我希望将 ACRA 集成到其中。我从谷歌下载了文件，创建了一个文件夹 lib 并将 jar 文件导入其中。我在清单中添加了 INTERNET 权限，并按照说明在我的包中创建了一个带有[http://code.google.com/p/acra/wiki/BasicSetup建议代码的 MyApplication 类。](http://code.google.com/p/acra/wiki/BasicSetup)既然我已经完成了所有这些，我该如何让它在我的应用程序中生效，我是否遗漏了什么？我是否应该没有创建一个新类而只是将代码添加到现有的主类中？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:46:42.313

> 既然我已经完成了所有这些，我该如何让它在我的应用程序中生效，我是否遗漏了什么？

如果您按照链接的 BasicSetup 说明进行操作，那么这项工作已经完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:54:06.643

好的，所以问题是首先，我忘记在清单的应用程序标签中添加 android:name="MyApplication" 。其次，由于某些系统的原因，lib文件夹需要重命名为“libs”，然后重新构建路径，详细过程在这里：[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror -with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

干杯

# python - 实时更新 Tkinter Text 小部件？

> ID：10155628
> 
> 赞同：0
> 
> 时间：2012-04-14T17:14:37.287
> 
> 标签：python, tkinter

```
from Tkinter import *

class Output:
    def __init__(self,master):
    self.u=Text(master,width=40)
    self.u.grid(row=0,column=0)
    self.v=Button(master,text="Add text",command="Write")
    self.v.grid(row=1,column=0)

def Write(self):
    self.u.insert(1.0,"Meh")

root=Tk()
output=Output(root)
root.mainloop() 
```

如何使按钮实时工作？如果可能的话，我想解释一下为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:22:15.857

我不明白您所说的“实时工作”是什么意思，但我肯定在您的代码中看到了一个错误。该`command`选项引用一个命令，但你给它一个字符串。将按钮定义更改为：

```
self.v = Button(master, text="Add text", command=Write) 
```

# ejb - EJB Spec 3.1 有状态的转换状态

> ID：10155632
> 
> 赞同：1
> 
> 时间：2012-04-14T17:14:58.410
> 
> 标签：ejb, stateful-session-bean

我是新的。

我不明白 EJB 3.1 规范的后续步骤（第 4.2 节）

有状态会话对象的会话状态被定义为会话 bean 实例的字段值、其关联的拦截器和它们的实例字段值，**以及通过跟随 Java 对象引用到达的这些实例字段的对象的传递闭包。**

任何人，可以告诉我广告的例子，好吗？

提前致谢

毛罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:08:36.723

这很简单。如果会话 bean 具有 Foo 类型的实例字段，其中 Foo 具有实例字段 bar 和 kaz，那么 bar 和 kaz 中的值也是状态的一部分。

# java - 在导出的 jar 中获取图像时未捕获的错误

> ID：10155637
> 
> 赞同：0
> 
> 时间：2012-04-14T17:16:01.627
> 
> 标签：java, jar, executable-jar

我的应用程序使用了一些图像。该应用程序在 Eclipse IDE 中运行良好。这是正在使用的代码片段：

```
URL url=screen_one.class.getClassLoader().getResource("./small.png");

JLabel image=new JLabel(new ImageIcon(Toolkit.getDefaultToolkit().getImage(url))); 
```

但是当我将它导出到 jar 时，它显示获取图像时出现未捕获错误。我认为它与图像“small.png”的路径有关。

但是当我用我的文件名运行“jar tvf”时，这是输出 -

1635 年 4 月 3 日星期二 19:53:44 IST 2012 small.png

这表明路径是正确的；那么，我哪里错了？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:17:11.373

我会将所有图像放在`/src/res`文件夹中，以确保它们与您的 .jar 一起正确导出。另外，请参阅[这个](https://stackoverflow.com/questions/2273040/how-to-bundle-images-in-jar-file)类似的问题。

# android - 动态 ListView 标头

> ID：10155640
> 
> 赞同：1
> 
> 时间：2012-04-14T17:16:27.397
> 
> 标签：android, android-listview

我必须制作一个显示有关 F1 比赛信息的应用程序。为了显示这些信息，我使用了`ListView`几个`SimpleAdapters`显示不同数据集（一个位置、名称、时间；每个扇区时间另一个......）的信息。

```
adaptadorPortrait1 = new SimpleAdapter(
    getApplicationContext(),
    lista_adaptador,
    R.layout.portrait1,
    new String[] {"pos", "short_name", "time_total", "time_pred"},
    new int[] {R.id.pos, R.id.name, R.id.time,R.id.prev});
adaptadorPortrait2 = new SimpleAdapter(
    getApplicationContext(),
    lista_adaptador,
    R.layout.portrait2,
    new String[] {"pos", "short_name", "sect1","sect1","sect3"},
    new int[] {R.id.pos, R.id.name, R.id.psect, R.id.ssect, R.id.tsect});
 [...] 
```

当某些事件发生时，例如在屏幕上切手指或旋转手机，我会更改列表适配器。

现在我想在列表中添加一个标题以指示每列是什么，并且我需要这个标题在适配器发生变化的同时发生变化。我曾尝试使用“addHeaderView”方法，但应用程序失败并抛出`IllegalStateException`消息 *“无法将标题视图添加到列表 - 已调用 setAdapter”。*

有任何想法吗？

PS：请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:48:40.800

ListViews 在单个适配器中支持多种类型的视图。

如果您覆盖`adapter.getItemTypeCount`and`adapter.getItemType(int position)`方法，您可以添加与其余视图一致的标题。因此，每个适配器中的第一项将是您的“标题”类型的视图（可能是简单的`TextView`），其余的可能是您的列表条目。

您只需要确保`getItemType`根据位置（对于标题为 0）是否为标题返回不同的数字。

```
public static final int TYPE_HEADER = 0;
public static final int TYPE_CONTENT = 1;

public int getItemTypeCount(){
     return 2;
}

public int getItemType(int position){
    if(position == 0){
        return TYPE_HEADER;
    } else {
        return TYPE_CONTENT;
    }
}

public View getView(int position, View convertView, ViewGroup parent){
    // make sure that from here, you return the right kind of view based on getItemType(position)
    // you are guaranteed that if a convertView is passed to you (convertView != null)
    // that the convertView is of the appropriate type.

    int type = getItemType(position);
    if(type == TYPE_HEADER){
        // create (or reuse) and return a header view
    } else {
        // create (or reuse) and return a content view
    }

    return myView;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:36:33.687

您得到的错误是由于页眉和页脚的工作方式；该列表创建了一个具有页眉和页脚的中间适配器，因此您需要在调用`addHeaderView()` *之前*调用`setAdapter()`。这意味着你不能做你想做的事。您可以尝试其他方法，例如使用两个单独的 s 并根据您要显示`ListView`的来调用。`setVisibility()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T03:14:37.583

如果您在想添加标头之前已经设置了适配器

```
if (listView.getHeaderViewsCount() == 0) {
     ListAdapter adapter = listView.getAdapter();
     listView.setAdapter(null);
     listView.addHeaderView(aHeaderView);
     listView.setAdapter(adapter);
 } 
```

# iphone - 更改图层/视图属性时禁用动画？

> ID：10155641
> 
> 赞同：9
> 
> 时间：2012-04-14T17:16:29.383
> 
> 标签：iphone, objective-c, ios, uiview, calayer

我通过向 UIView 添加多个图层来组成一种动画。这些图层应通过脚本设置为可见或不可见。

该脚本基于实现协议的对象：

```
// the general protocol for a step
@protocol ActionStep 
-(void) applyForTime:(int)playtime;
-(void) reset;
@end 
```

在计时器中，我遍历步骤对象：

```
NSEnumerator* enumerator = [ScriptObjects objectEnumerator];
id obj;

while ( obj = [enumerator nextObject] )
{
  id <ActionStep> step = obj;
  [step applyForTime:currentmilliseconds];
} 
```

一个脚本对象是这个对象：

```
@interface LayerStep : NSObject <ActionStep> 
{
  int mTimeOffset;
  CGPoint mOffset;
  float mAlpha;
  LayerObject* mTheLayer;
  bool mPrepared;
}
-(id)initWithLayerObject: (LayerObject*) theLayer Milliseconds:(int) milliseconds     Offset:(CGPoint) offset Alpha:(float)alpha;

@end 
```

最后我在层中实现协议：

```
-(void) applyForTime:(int)playtime
{
  if ( mPrepared )  // has the step already been executed?
  {
    if ( playtime >= mTimeOffset )
    {
      [mTheLayer setAlpha:mAlpha];     //   AssignedLayer.opacity = alpha;
      [mTheLayer setPosition:mOffset]; //   AssignedLayer.position = offset;
      mPrepared = false;
    }
  }
} 
```

应用步骤中的更改会导致转换。

有没有办法禁用这种过渡？我现在根本没有使用任何 CoreAnimation 调用，只是属性本身（参见代码）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-14T22:55:41.827

更改图层的“动画”属性之一会创建 Apple 文档所称的隐式动画。

引用有关该主题的 Xcode 文档：

> Core Animation 的隐式动画模型假定对动画层属性的所有更改都应该是渐进的和异步的。无需显式动画层即可实现动态动画场景。更改可动画层属性的值会导致该层隐式地对从旧值到新值的变化进行动画处理。在动画进行中时，设置新的目标值会导致动画从其当前状态过渡到新的目标值。

在幕后，系统会生成一个进行更改的 CAAnimation。

正如另一位海报所说，您可以使用 setAnimationDuration 使动画在瞬间发生，具有关闭动画的效果。我怀疑系统仍然会生成动画。

关闭隐式图层动画的官方方法是使用

```
[CATransaction begin];
[CATransaction setDisableActions: YES];
//layer changes
[CATransaction commit]; 
```

## 编辑：

在 Swift 3 中，这段代码看起来像这样：

```
CATransaction.begin()
CATransaction.setDisableActions(true)
//layer changes
CATransaction.commit() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T17:34:18.760

只需将代码包装在您进行更改的位置即可。

```
[CATransaction begin];
[CATransaction setAnimationDuration:0];

[thelayer setAlpha:0];

[CATransaction commit]; 
```

# jquery - Grails 中的多个文件上传

> ID：10155645
> 
> 赞同：8
> 
> 时间：2012-04-14T17:16:53.273
> 
> 标签：jquery, grails, file-upload

我正在尝试[将来自 blueimp 的优秀 jquery-file-upload 集成](https://github.com/blueimp/jQuery-File-Upload)到 Grails 2.0 中，并为此编写一个新插件。我知道[已经有一个 plugin](http://grails.org/plugin/jquery-file-upload)，但是它不使用资源并且已经 9 个月没有更新了，并且 jquery-file-upload 在那段时间发生了很大的变化。

因此，我将分发的所有文件都放在了我的插件中，现在我正在尝试编写一个可以处理上传的控制器操作。问题是`request.getFileNames()`只给了我一个`files[]`条目，我不知道如何检索我上传的 3 个单独的文件。

你如何处理这样的输入发送的文件：`<input type="file" name="files[]" multiple>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:40:44.230

其实我想通了。表单中只有一个`input[type=file]`，如果我选择多个文件，它们不会在同一个请求中发送。该`query-file-upload`脚本发送与文件一样多的 POST 请求。这就是为什么`request.getFileNames()`每次只给我一个条目的原因。我设法创建了我的插件，它将很快发布。注意[http://grails.org/plugin/bootstrap-file-upload](http://grails.org/plugin/bootstrap-file-upload)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T06:59:02.747

`request.getFileNames`返回一个数组 - 您可以遍历此数组以获取所有文件。该示例已经在插件描述中。

```
def all = request.getFileNames()
all.each {name ->
   def file = request.getFile(name)
} 
```

这应该为您提供所有已上传的文件。

# php - PHP - 如何从函数中修改多维数组项？

> ID：10155653
> 
> 赞同：0
> 
> 时间：2012-04-14T17:17:27.480
> 
> 标签：php, arrays

我的问题如下。我有一个多维数组。我声明我的数组。然后，我运行一些代码来部分填充我的数组。然后我运行一个函数，其中应该从函数中修改我的数组中的某些项目。不幸的是，这不起作用。所以我的问题很简单。正常吗？如果是，我该如何克服这一点。非常感谢您的回复。干杯。马克。

```
$list = array([0]=>
                   array(
                         [name]=>'James' 
                         [group]=>''
                         )
             ); 

my_function();
print_r($list); 

function my_function(){
     //some code here
     $list[0]['group'] = 'groupA';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:21:59.170

**您可以通过引用**将数组传递给函数

 **```
my_function(&$list) {

    $list[0]['group'] = 'groupA';
}

$list = /*...*/
my_function($list); 
```

或者简单地从函数**返回数组**

```
my_function($list) {

    $list[0]['group'] = 'groupA';
    return $list;
}

$list = /*...*/
$list = my_function($list); 
```

或使用**全局**

```
my_function() {

    global $list;
    $list[0]['group'] = 'groupA';
}

$list = /*...*/
my_function(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:20:19.643

像这样的东西：

```
$list = array( 0 =>
                   array(
                         'name'=>'James' 
                         'group'=>''
                         )
             ); 

my_function($list);
print_r($list); 

function my_function(&$list){
     //some code here
     $list[0]['group'] = 'groupA';
} 
```

或者：

```
$list = array(0 =>
                   array(
                         'name'=>'James' 
                         'group'=>''
                         )
             ); 

$list = my_function($list);
print_r($list); 

function my_function($list){
     //some code here
     $list[0]['group'] = 'groupA';
     return $list;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T17:21:49.287

在您的情况下，数组没有更改，因为它在全局范围内，并且与其他语言不同，PHP 不提供从函数内对全局范围的自动访问。所以你必须这样做：

```
function my_function(){
     global $list;
     //some code here
     $list[0]['group'] = 'groupA';
} 
```

但更好的是，通过引用函数将数组作为参数传递

```
function my_function(&$list){
     //some code here
     $list[0]['group'] = 'groupA';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:20:17.550

在内部数组索引中添加 '

```
 array(
                         'name'=>'James' 
                         'group'=>''
      ) 
```**

# java - 如何在java中的边框布局中嵌入网格布局

> ID：10155654
> 
> 赞同：6
> 
> 时间：2012-04-14T17:17:39.593
> 
> 标签：java, swing, grid-layout

我有一个边框布局，我想在中心部分添加一个网格布局。但是，我不能声明一个网格，然后添加我的中心边框。我怎样才能做到这一点？

```
public Liability_Calculator(String s)
{
    super(s);
    setSize(325,200);

    c = getContentPane();
    c.setLayout(new BorderLayout());

    //the top label
    total = new JLabel("Total monthly liabilities ", JLabel.CENTER);
    c.add(total, BorderLayout.NORTH);

    //the grid
    GridLayout grid = new GridLayout(2,2);

    text_field1 = new JTextField(7);

    //I GET AN ERROR HERE!!!!!!!
    grid.add(text_field1);

    //AND ERROR HERE!!!!!!!!!!!!!
    c.add(grid, BorderLayout.CENTER);

    setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T17:21:56.443

您正在尝试将组件添加到*layout*，而这根本无法完成。而是使用 JPanel，给它一个 GridLayout，然后将组件添加到 JPanel（在此处充当“容器”）。

通常，您会希望嵌套 JPanel，每个 JPanel 使用 GUI 的最佳布局，这里使用 GridLayout 的内部 JPanel 和使用 BorderLayout 的外部 JPanel。然后，您只需将内部 JPanel 添加到 BorderLayout.CENTER 位置的外部 JPanel（这里是您的 contentPane）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-14T15:11:38.717

提供源自 Hovercraft 答案的代码可视化：

**展示类：**

```
public class Display extends JFrame     {

JPanel gridHolder = new JPanel(); // panel to store the grid
private GridLayout buttonsGrid; // space containing a buttons
private JButton myButtons[]; // grid is to be filled with these buttons
private BorderLayout mainGUILayout; // main gui layout
private Container mainGuiContainer;

public Display()     {
    mainGUILayout = new BorderLayout(5,5); // Border layout option
    mainGuiContainer = getContentPane(); // getting content pane
    mainGuiContainer.setLayout(mainFrameLayout); // setting main layout
    buttonsGrid = new GridLayout(4, 1, 5, 5); // 4 buttons one over the other
    myButtons = new JButton[4]; // player's hand represented with buttons
    gridHolder.setLayout(buttonsGrid);

                for (int x = 0; x < 4; x++)     {

                myButtons[x] = new JButton (" ");
                gridHolder.add(myButtons[x]);     }

            add(gridHolder, BorderLayout.WEST);
            setVisible(true);     }     } 
```

**MainGUILaunch 类：**

```
public class MainGUILaunch     {
    public static void main (String args[])     {
        Display myApplication = new Display();
        myApplication.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myApplication.setSize(1024, 1024);
        myApplication.setVisible(true); // displaying application     }
} // End of MainGUILaunch 
```

# backbone.js - Backbone.js 和前导哈希

> ID：10155660
> 
> 赞同：10
> 
> 时间：2012-04-14T17:19:26.973
> 
> 标签：backbone.js

我有以下问题。我的 Backbone 应用程序的某些部分具有如下网址：

```
site.ru/#profile 
```

当页面加载时，URL 变为：

```
site.ru/profile 
```

因此，哈希丢失了。所以，我在 Backbone 的导航功能中看到了问题：

```
var routeStripper = /^[#\/]/;
...
var frag = (fragment || '').replace(routeStripper, ''); 
```

据我了解，这段代码在 URL 的开头清除了一个哈希。

简单地删除这行代码来解决问题是真的吗？你能告诉我一些其他的方法来解决这个问题吗？

蒂亚！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T23:58:29.550

如果您启用 pushState，Backbone 只会删除散列。

更改`Backbone.history.start({pushState: true});`为`Backbone.history.start();`

[http://backbonejs.org/#Router](http://backbonejs.org/#Router)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:34:53.867

似乎 Backbone.js 使用**/** & **#**作为分隔符，以提取根地址和子目录。/过滤需要 tp **stau** tp 获取“片段”。尝试仅删除该 RegEx 中的 #，但保留该行的其余部分。（并在您所做的代码中留下评论！:)

我还会提交一份错误报告，因为它正在重新发送没有哈希的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T13:51:22.733

有同样的问题，还有其他一些问题；-)（请参阅[GitHub 问题](https://github.com/jashkenas/backbone/issues/3992)）

我现在通过不听哈希更改来解决这个问题，如下所示：

```
Backbone.history.start({
  pushState: true,
  hashChange: false,
  root: '/'
}); 
```

这似乎对我有用。

# c++ - fread引起的泄漏

> ID：10155662
> 
> 赞同：10
> 
> 时间：2012-04-14T17:19:35.787
> 
> 标签：c++, ios, xcode, memory-leaks

我正在分析我编写的游戏的代码，我想知道以下代码段每次执行时如何导致堆增加 4kb（我正在使用 Xcode 的 Heapshot Analysis 进行分析）：

```
u8 WorldManager::versionOfMap(FILE *file)
{
  char magic[4];
  u8 version;

  fread(magic, 4, 1, file); <-- this is the line
  fread(&version,1,1,file);
  fseek(file, 0, SEEK_SET);

  return version;
} 
```

根据分析器，突出显示的行在`malloc`每次调用函数时分配 4.00Kb 的内存，内存永远不会被释放。这件事似乎发生`fread`在对代码的其他调用中，但这是最令人欣喜的一个。

有什么微不足道的我想念的吗？这是我不应该关心的内部问题吗？

就像一个注释：我在 iPhone 上对其进行分析，它被编译为发布 ( `-O2`)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:56:41.753

如果您所描述的事情确实发生了并且您的代码在其他地方没有错误，我认为这是实现中的错误。

我认为更有可能是您没有关闭文件。如果设备是非交互式的，则 Stdio 流默认使用缓冲，并且在打开文件时或执行 I/O 时分配缓冲区。虽然只应分配一个缓冲区，但您肯定会因为忘记关闭文件而泄漏缓冲区。但当然，关闭文件应该释放缓冲区。不要忘记检查返回的值`fclose`。

假设为了论证您正确地关闭了文件，您的代码中有几个其他的 nit 不会导致这个问题，但我还是会提到。

首先，您的`fread`调用读取一个具有一个大小为 4 的成员的对象。您实际上有一个具有 4 个大小为 1 的成员的对象。换句话说，`fread`交换了数字参数。这仅在返回值的含义上有所不同（在部分读取的情况下很重要）。

其次，虽然您第一次调用`fread`正确地将大小硬编码`char`为 1（在 C 中，即“大小”的定义），但`sizeof(u8)`在第二次调用`fread`.

如果这确实是内存泄漏的想法是正确的解释（并且其他地方没有任何错误），那么您可以通过关闭此特定文件的 stdio 缓冲来解决该问题：

```
bool WorldManager::versionOfMap(FILE *file, bool *is_first_file_io, u8 *version)
{
  char magic[4];
  bool ok = false;
  if (*is_first_file_io) 
  {
    // we ignore failure of this call
    setvbuf(file, NULL, _IONBF, 0);
    *is_first_file_io = false;
  }

  if (sizeof(magic) == fread(magic, 1, sizeof(magic), file) 
      && 1 == fread(version, sizeof(*version), 1, file))
  {
      ok = true;
  }
  if (-1 == fseek(file, 0L, SEEK_SET))
  {
      return false;
  }
  else
  {
      return ok && 0 == memcmp(magic, EXPECTED_MAGIC, sizeof(magic));
  }
} 
```

即使我们假设这确实是一个错误，并且泄漏是真实的，也值得将您的代码压缩为仍然可以证明问题的最小示例。如果这样做揭示了真正的错误，你就赢了。否则，您将需要最小的示例来报告实现中的错误。

# .net - 当我们拥有 WCF RESTful 服务和 ASP.Net MVC 时，为什么还要使用 WebApi？

> ID：10155663
> 
> 赞同：-2
> 
> 时间：2012-04-14T17:19:49.273
> 
> 标签：.net, c#-4.0

> **可能重复：**
> [WCF 服务或 Web API](https://stackoverflow.com/questions/9502548/wcf-service-or-web-api)

WebApi 针对什么样的应用程序，因为我们已经有不同的 .net 框架，例如 MVC，wcf 服务已经在做 Webapi 承诺的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:38:13.440

如果您在过去几年没有关注，您可能会从阅读[Glenn Block 的一篇](http://blogs.msdn.com/b/gblock/archive/2010/11/01/wcf-web-apis-http-your-way.aspx)关于该主题的原始帖子中获得一些价值。

尽管这篇文章在这一点上已经很老了，并且自那以后框架中发生了许多许多变化（最明显的是与 ASP.NET MVC 的合并），但这篇文章给出了一些关于为什么首先启动该项目的见解.

# android - SQLite 数据库错误？

> ID：10155668
> 
> 赞同：0
> 
> 时间：2012-04-14T17:21:01.847
> 
> 标签：android, database, sqlite

我正在编写一个简单的数据库应用程序，但是当我加载应用程序时它说：“应用程序已意外停止”

这是我的数据库代码：

```
public class EventsData extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "events.db";
    private static final int DATABASE_VERSION = 1;

    public EventsData(Context ctx) {
        super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db){
        db.execSQL("CREATE TABLE " + TABLE_NAME + "(" + _ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                 + TIME + " INTEGER, " + TITLE + " TEXT NOT NULL);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    } 
```

我的常数：

```
import android.provider.BaseColumns;;

public interface Constants extends BaseColumns {
    public static final String TABLE_NAME = "events";
    //columns in the events db
    public static final String TIME = "time";
    public static final String TITLE = "title"; 
} 
```

错误是：

> 04-14 17:08:12.486: E/Database(277): 在准备'CREATE TABLE events(_idINTEGER PRIMARY KEY AUTOINCREMENT, timeINTEGER, title TEXT NOT NULL)时，0x217058上的失败1（AUTOINCREMENT只允许在整数主键上） ;'。

为什么会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:28:42.007

您没有在字段和类型之间放置空格。_idINTEGER PRIMARY KEY.... _id 和 INTEGER 之间必须有一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:29:28.760

您应该检查字段名称及其类型之间的空格。错误说：

> [...] 事件（_idINTEGER PRIMARY KEY AUTOINCREMENT，timeINTEGER，title TEXT NOT NULL）

但是，您的代码看起来不错。你确定那是实际的代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:29:35.143

我认为这个问题与 SQLLITE synatx 有关。请检查此链接。

[Android表创建失败（“自动增量”附近：语法错误）？](https://stackoverflow.com/questions/7594541/android-table-creation-failure-near-autoincrement-syntax-error).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:30:36.310

您需要在您的 sqlite 代码中添加空格。如果你看到错误`CREATE TABLE events(_idINTEGER PRIMARY KEY AUTOINCREMENT, timeINTEGER, title TEXT NOT NULL);'`

_idINTEGER 应该是分开的。添加额外的空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T17:31:16.957

试试用这个...

```
String sql =   db.execSQL("create table " + TABLE_NAME + "( " + BaseColumns._ID + " integer primary key autoincrement, "
             + TIME + " integer, " + TITLE + " text not null);");

db.execSQL(sql); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T19:03:09.007

只需将您的 _ID 重命名为 _id 它肯定会起作用。您的其余代码看起来不错。还有一件事您将 TIME 声明为 String 并将其 Type 设置为 Integer，请也注意这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T14:51:25.517

使用 Firefox 浏览器检查您的查询。Firefox 有一个组件（或插件）来创建/编辑表、行 ....

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T22:59:19.667

根据 SQlite 网站 (http://sqlite.org/faq.html#q1)，您不必使用自动增量将其添加到列中。我不记得我用来创建数据库的代码，如果我现在没有使用平板电脑，我会检查它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T03:49:19.113

老兄将 INTEGER PRIMARY KEY AUTOINCREMENT 更改为 INTEGER PRIMARY KEY 这一切都可以正常工作并且还会自动增加

# bash - 使用 bash 创建 10000 个大小为 4k 的文件？

> ID：10155678
> 
> 赞同：-2
> 
> 时间：2012-04-14T17:22:13.513
> 
> 标签：bash

我想做这个。创建10000个文件，（文件名可以是时间和随机数的组合）。文件大小应为 4k。我想计时。说需要多少秒。

我怎样才能在 bash 上做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:26:00.517

```
time for x in {1..10000}; do
  dd if=/dev/zero ibs=4k count=1 of=$x.txt 2>/dev/null
done 
```

# jquery - FancyBox，IFrame 和 SWF 之外的导航箭头

> ID：10155680
> 
> 赞同：1
> 
> 时间：2012-04-14T17:22:16.910
> 
> 标签：jquery, fancybox

对于任何想要将导航箭头移到图片外并使其永久可见的人，我已经更改了默认的 CSS 样式表 (jquery.fancybox.css)，我所做的所有更改都在文件的末尾。您可以从以下链接下载文件

[http://www.mediafire.com/download.php?gcs51e1z2np14nj](http://www.mediafire.com/download.php?gcs51e1z2np14nj)

它适用于图片完美无缺，但我似乎无法使其适用于 iframe 和 swfs。在 iframe 的情况下，它只是将箭头推到内容区域之外，但它仍然在 fancybox 框架内。

如果有人知道解决方案，请分享。

# jquery - JQuery Resizable 功能仅适用于部分选择器

> ID：10155681
> 
> 赞同：0
> 
> 时间：2012-04-14T17:22:21.920
> 
> 标签：jquery, html-table, jquery-ui-resizable, containment

我正在尝试在位于表格上方的叠加层上使用可调整大小的 JQuery。下面的代码将 div 创建为绝对定位的叠加层，可在列之间调整大小和拖动。

代码工作正常。但是，当我在“resizeable”jquery ui 函数上添加“containment”作为选项时，代码仅适用于指定为选择器的表的一部分（即#grid）。

我添加了一个 JsFiddle [http://jsfiddle.net/WUsRx/5/](http://jsfiddle.net/WUsRx/5/)，虽然 resizeable 的代码似乎在 FsFiddle 中不起作用，但对于 Explorer 8 中的 #grid 表的一部分确实有效。

javascript是：

```
$('#Grid td').click(function(){ 
        var $divName = $(this);
        $('#mainContent').prepend('<div id="test" class="ui-widget-content"></div>');
        var $divOverlay = $('#test');
        var tdPosition = $divName.position();
        offsetTop = tdPosition.top;
        offsetLeft = tdPosition.left;

        var tdWidth = $divName.width();
        var tdHeight = $divName.height();

        $divOverlay.css({
            position: 'absolute',
            top: offsetTop,
            left: offsetLeft,
            width: tdWidth,
            height: tdHeight,
            opacity: '0.8',
            })          

    $('#test').resizable({containment: "#Grid",grid:tdHeight,minWidth:tdWidth, maxWidth:tdWidth}).draggable({ containment: "#Grid", grid: [ tdWidth+2,tdHeight+2] });
    }); 
```

HTML 中的一列包含在下面。在 #15:30 和 #16:00 之间的每一列中，每次都会出现此问题。一开始我以为可能是 HTML 的改动或者错误，所以用 PHP 循环建表，保证每一行一致。在 #16:00 之后，可调整大小的代码不起作用。

```
<table id='Grid'>
  <tr id="14:30"><td>14:30</td><td class="wEnd sun" id="sun14:30"></td></tr>
  <tr id="15:00"><td>15:00</td><td class="wEnd sun" id="sun15:00"></td></tr>
  <tr id="15:30"><td>15:30</td><td class="wEnd sun" id="sun15:30"></td></tr>
  <tr id="16:00"><td>16:00</td><td class="wEnd sun" id="sun16:00"></td></tr>
  <tr id="16:30"><td>16:30</td><td class="wEnd sun" id="sun16:30"></td></tr>
</table> 
```

任何想法表示赞赏。

# python - 将条目添加到列表的开头并删除最后一个

> ID：10155684
> 
> 赞同：14
> 
> 时间：2012-04-14T17:22:38.050
> 
> 标签：python, list, append

我有`list`大约 40 个条目。而且我经常想将一个项目附加到列表的开头（id 为 0），并想删除`last`列表的条目（id 为 40）。

我怎样才能做到最好？

包含 5 个条目的示例：

```
[0] = "herp"
[1] = "derp"
[2] = "blah"
[3] = "what"
[4] = "da..." 
```

最后添加`"wuggah"`和删除后应该是这样的：

```
[0] = "wuggah"
[1] = "herp"
[2] = "derp"
[3] = "blah"
[4] = "what" 
```

而且我不想最终手动将它们一个接一个地移动到下一个ID。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T17:28:09.853

用于`insert()`将项目放在列表的开头：

```
myList.insert(0, "wuggah") 
```

用于`pop()`删除和返回列表中的项目。不带参数的 Pop 弹出列表中的最后一项

```
myList.pop() #removes and returns "da..." 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-14T17:25:47.693

使用[collections.deque](http://docs.python.org/library/collections.html#collections.deque)：

```
>>> import collections
>>> q = collections.deque(["herp", "derp", "blah", "what", "da.."])
>>> q.appendleft('wuggah')
>>> q.pop()
'da..'
>>> q
deque(['wuggah', 'herp', 'derp', 'blah', 'what']) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-14T17:30:05.790

采用[`collections.deque`](http://docs.python.org/library/collections.html#collections.deque)

```
In [21]: from collections import deque

In [22]: d = deque([], 3)   

In [24]: for c in '12345678':
   ....:     d.appendleft(c)
   ....:     print d
   ....:
deque(['1'], maxlen=3)
deque(['2', '1'], maxlen=3)
deque(['3', '2', '1'], maxlen=3)
deque(['4', '3', '2'], maxlen=3)
deque(['5', '4', '3'], maxlen=3)
deque(['6', '5', '4'], maxlen=3)
deque(['7', '6', '5'], maxlen=3)
deque(['8', '7', '6'], maxlen=3) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T17:31:59.607

这是一个单线，但它可能不如其他一些有效......

```
myList=["wuggah"] + myList[:-1] 
```

另请注意，它会创建一个新列表，这可能不是您想要的...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-12T23:57:07.913

另一种方法

```
L = ["herp", "derp", "blah", "what", "da..."]

L[:0]= ["wuggah"]
L.pop() 
```

# windows-phone-7 - Microsoft.Phone.Controls.Toolkit ListPicker 引发 XamlParseException

> ID：10155688
> 
> 赞同：1
> 
> 时间：2012-04-14T17:23:06.257
> 
> 标签：windows-phone-7, xaml, silverlight-toolkit, xamlparseexception, listpicker

在被告知本机`ComboBox`不是要走的路后，我被告知要查看 Silverlight Toolkit `ListPicker`。所以我做了并且遇到了问题。

我打开了一个新项目并将一个新项目拉到`ListPicker`MainPage 上。`ListPicker`看起来像：

```
<toolkit:ListPicker x:Name="Result">
    <toolkit:ListPickerItem Content="Win" />
    <toolkit:ListPickerItem Content="Place" />
    <toolkit:ListPickerItem Content="Lose" />
</toolkit:ListPicker> 
```

当试图运行它时，我得到一个`XamlParseException`带有 InnerException 的`InvalidProgramException`. 我所做的只是拖动控件，然后添加一些`ListPickerItem`. 删除项目仍然会导致错误，`ListPicker`完全删除控件允许页面显示没有错误。

我确定我错过了一些东西，但我读过的任何文档似乎都指向这个标记很好，包括[http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth](http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth)

我可以提供所需的任何其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:20:36.513

`ListPickerItem`是内部使用的类`ListPicker`，不应直接使用。

如果您只想添加项目列表，则可以使用字符串来执行此操作，如下所示：

在 Page 顶部添加一个新的命名空间以访问`String`该类：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

然后，只需将`ListPicker`代码更改为：

```
<toolkit:ListPicker>
    <sys:String>Win</sys:String>
    <sys:String>Place</sys:String>
    <sys:String>Lose</sys:String>
</toolkit:ListPicker> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:29:26.360

问题是注册了错误的 dll，即 7 而不是 7.1。我必须卸载并重新安装才能使其正确更新并且可以正常工作。

# assembly - CPU 上推送和弹出操作数的必要性

> ID：10155692
> 
> 赞同：5
> 
> 时间：2012-04-14T17:23:52.637
> 
> 标签：assembly, stack, cpu, cpu-architecture, att

为什么我们有 push 和 pop 之类的命令？

据我了解`pop`，`push`基本上与分别执行 ( `mov`then `add`) 和 ( `sub`then `mov`)`esp`相同。

* * *

例如不会：

```
pushl %eax 
```

相当于：

```
subl $4, %esp
movl %eax, (%esp-4) 
```

*如果堆栈访问不是`(%esp-4)`，请纠正我，我还在学习组装*

* * *

我能看到的唯一真正的好处是，如果同时进行这两项操作会提供一些优势；但是我不明白它怎么可能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T20:09:53.197

但是，也没有理由发出`CALL`指令。毕竟，您可以通过以下方式模拟通话：

```
sub esp,4
mov [esp-4], offset return_address
jmp myproc 
```

而且也不需要`RET`指令，因为您可以通过以下方式模拟它：

```
mov eax,[esp]
add esp,4
jmp [eax] 
```

如果你仔细看，你会发现很多指令可以通过组合其他指令来模拟。重点是什么？

这类问题的答案植根于 x86 处理器系列的悠久历史以及之前的处理器。设计人员研究了程序员如何使用处理器，并创建了一个在执行速度和内存使用方面高效的指令集。

在 70 年代后期，64 KB 是很多 RAM，而 RAM 则要慢得多。每个指令字节都是宝贵的，仅仅从内存中获取一条指令就有大量的开销。取指令花费的时间比执行时间长的情况并不少见。因此，通过尽可能少的指令字节对事物进行编码，可以获得巨大的性能提升。

与 CPU 时钟速度相比，RAM 仍然非常慢，因此通过尽可能少的指令字节编码仍然可以获得收益。确实，我们拥有的大型 CPU 缓存非常有用，分支预测和预取逻辑也有很大帮助，但是从 RAM 传输到 CPU 缓存的每个字节仍然很昂贵。节省指令编码是值得的。

关于调用程序：

汇编语言调用过程的标准方法是先传入参数，然后再`call`传入过程。例如，这会传递两个 dword 值：

```
push eax
push ebx
call proc    ; pushes the return address and jumps to proc
...

proc:
  ; at this point, [esp] contains the return address 
```

该`ret`指令将返回地址弹出到指令指针中。

当然，必须有人清理堆栈。调用者可以通过递增堆栈指针来清理堆栈。或者被调用的过程可以使用 清理堆栈`ret 8`，这将弹出返回地址并增加堆栈指针。

有关调用约定的更多信息，请参阅[http://www.delorie.com/djgpp/doc/ug/asm/calling.html](http://www.delorie.com/djgpp/doc/ug/asm/calling.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:50:28.940

好。如果您有两条指令，那么它们可能会占用更多空间。这需要cpu传输更多数据。这需要更多时间。两条单独的指令通常也需要更多的 CPU 资源。即使 cpu 将它们并行化，提取器、解码器还有更多工作......如果您尝试删除所有但绝对必要的指令，您最终会得到图灵机。终极风险，但在实践中不是很有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T17:26:57.350

1 个操作码 > 2 个操作码，至少在您尝试降低 CPU 使用率时。

# macos - Applescript - 获取窗口的状态（可见或在 Dock 中）

> ID：10155694
> 
> 赞同：1
> 
> 时间：2012-04-14T17:24:11.110
> 
> 标签：macos, applescript

我的 appleScript 需要一些帮助。

对于所有打开的窗口，我想知道哪个是隐藏的（在 Dock 中），哪个是可见的，哪个是聚焦的？

要列出我使用的窗口：

```
tell application "System Events"
    set procs to processes
    set windowName to {}
    repeat with proc in procs
        try
            if exists (window 1 of proc) then
                repeat with w in windows of proc
                        copy w's name to the end of windowName
                end repeat
            end if
        end try -- ignore errors
    end repeat
end tell
return windowName 
```

我尝试了重点属性：

```
copy w's focused to the end of windowName 
```

和选定的属性：

```
copy w's selected to the end of windowName 
```

但这不起作用！

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:42:07.547

在 Mac OS X 10.6 (AppleScript 2.1.2) 上， a 的属性`description`（在' 术语中）是窗口是否被小型化（在 Dock 中），以及其他一些值（例如, 但可能会有所不同，具体取决于应用程序），如果它没有小型化。`window``application process``System Events``"dialog"``"standard window"`

当一个应用程序完全**隐藏**时（使用`cmd+H`或应用程序菜单中的“隐藏”命令），*它的所有窗口*都将被隐藏，无论它们是否被小型化，所以要找出它是否隐藏，使用

```
visible of application process "<ProcessName>" 
```

这是`false`应用程序被隐藏的时候。要取消隐藏它，将该属性设置为`true`.

要找出应用程序的哪个窗口当前处于焦点（最前面/活动），请使用

```
window 1 of application process "<ProcessName>" 
```

应用程序的窗口列表（由 返回`windows of application process...`）按垂直堆栈排序：最前面的窗口是第一个，它后面的窗口是第二个，依此类推。

由于在 OS X 中一次只有一个应用程序位于最前面，并且只有一个窗口位于前台，因此您将看到当前聚焦的窗口，如下所示：

```
window 1 of (first application process whose frontmost is true) 
```

# c# - 自定义扩展未显示在实验实例中

> ID：10155697
> 
> 赞同：3
> 
> 时间：2012-04-14T17:24:41.183
> 
> 标签：c#, vsix

我创建了一个 VSIX 扩展，它显示在 Visual Studio 2010 中并按设计工作。

但是，我正在尝试构建一些依赖于此扩展的 Visual Studio 自动化，尽管它存在于我正在构建自动化包的项目中，但是当我运行包项目时，Visual Studio 实验解决方案加载没有问题，但是当我查看在扩展管理器中，我看不到我注册的扩展（即使它显示在我正在构建扩展的 Visual Studio 项目中。

该扩展是 LightSwitch 的自定义外壳，这可能是为什么它没有显示在我的 Visual Studio 实验实例中的线索，我不确定我是否看到了我为 LightSwitch 构建和注册的其他扩展。

当然，我的问题是，当我尝试加载依赖于我的 LightSwitch 扩展的解决方案时，该解决方案会在实验实例之外正常加载，但由于在我尝试加载时无法找到我的自定义扩展而失败我的实验解决方案中的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:07:19.650

尝试重置 Exp 配置单元。单击开始>所有程序>Visual Studio SDK>重置实验配置单元。

此外，您应该检查您是否通过 IDE 'devenv /RootSuffix exp' 中的自定义调试命令运行/调试您的扩展。

当出现类似问题时我总是做的 - 我检查了我在 Windows 注册表中的实验配置单元（我的扩展的所有部分是否都在那里注册好）

# java - Java：为什么 BorderLayout 调用 setSize() 后跟 setBounds()？

> ID：10155698
> 
> 赞同：1
> 
> 时间：2012-04-14T17:24:42.180
> 
> 标签：java, layout-manager

我正在尝试正确使用不同的 LayoutManager，通过详细了解幕后发生的事情，使我的 GUI 设计技能更加高效和有效。我正在查看 BorderLayout 的源代码，在下面从 layoutContainer() 方法获取的代码片段中，我注意到对子组件的 setSize() 方法的调用，然后是 setBounds()。查看 Component 的这些方法的源代码，setSize() 实际上使用 Component.x 和 Component.y 的当前值调用 setBounds()。为什么这样做（而不是完全重复）？setBounds() 调用不会完全覆盖 setSize() 调用的结果吗？

```
if ((c=getChild(NORTH,ltr)) != null) {
    c.setSize(right - left, c.height);
    Dimension d = c.getPreferredSize();
    c.setBounds(left, top, right - left, d.height);
    top += d.height + vgap;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:32:15.257

某些组件在计算其首选尺寸时会考虑其当前尺寸。因此，例如，一个文本区域在知道它有多宽之前并不真正知道它想要多高；然后它可以计算出它的文本换行并计算出它需要多少行。

所以在这里，调用`setSize()`实际上只是指定宽度。然后布局管理器获取并设置该*宽度*的首选高度。

# django - Django：如何检查 FilePathField 的管理小部件是否为文件浏览器？

> ID：10155702
> 
> 赞同：9
> 
> 时间：2012-04-14T17:25:23.650
> 
> 标签：django, django-admin

的默认管理小部件`FilePathField`似乎只是一个显示可用文件的组合框。

我怎样才能让它显示一个文件浏览器呢？

# python - 在 R 中使用 system() 调用 python 以运行模拟 python 控制台的 python 脚本

> ID：10155703
> 
> 赞同：11
> 
> 时间：2012-04-14T17:25:28.410
> 
> 标签：python, r

我想用类似的东西将一大块Python代码传递给R中的Python `system('python ...')`，我想知道在这种情况下是否有一种简单的方法来模拟python控制台。例如，假设代码是`"print 'hello world'"`，我怎样才能在 R 中得到这样的输出？

```
>>> print 'hello world'
hello world 
```

这仅显示输出：

```
> system("python -c 'print \"hello world\"'")
hello world 
```

谢谢！

顺便说一句，我在[r-help](https://stat.ethz.ch/pipermail/r-help/2012-April/309816.html)中询问但尚未得到回复（如果有，我会在此处发布答案）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T17:30:58.557

你的意思是这样的吗？

```
export NUM=10
R -q -e "rnorm($NUM)" 
```

您可能还想查看`littler`- [http://dirk.eddelbuettel.com/code/littler.html](http://dirk.eddelbuettel.com/code/littler.html)

**更新**

根据您在下面的评论，我想我开始更好地理解您的问题。您正在询问有关在 R shell 中运行 python 的问题。

所以这里有一个例子： -

```
# code in a file named myfirstpythonfile.py

a = 1 
b = 19
c = 3 
mylist = [a, b, c]
for item in mylist:
    print item 
```

因此，在您的 R shell 中，执行以下操作：

```
> system('python myfirstpythonfile.py')
1
19
3 
```

本质上，您可以简单地调用`python /path/to/your/python/file.py`来执行一段 python 代码。

就我而言，我可以简单地调用`python myfirstpythonfile.py`假设我在我的 python 文件所在的同一目录（路径）中启动了我的 R shell。

**进一步更新**

如果你*真的*想打印出源代码，这里有一种可能的蛮力方法。在您的 R 外壳中：-

```
> system('python -c "import sys; sys.stdout.write(file(\'myfirstpythonfile.py\', \'r\').read());"; python myfirstpythonfile.py')
a = 1
b = 19
c = 3
mylist = [a, b, c]
for item in mylist:
    print item
1
19
3 
```

**并进一步更新:-)**

因此，如果目的是在执行代码之前打印 python 代码，我们可以使用 python 跟踪模块（参考：[http](http://docs.python.org/library/trace.html) ://docs.python.org/library/trace.html ）。在命令行中，我们使用该`-m`选项来调用一个 python 模块，并为它后面的那个 python 模块指定选项。

因此，对于我上面的示例，它将是：-

```
$ python -m trace --trace myfirstpythonfile.py
 --- modulename: myfirstpythonfile, funcname: <module>
myfirstpythonfile.py(1): a = 1
myfirstpythonfile.py(2): b = 19
myfirstpythonfile.py(3): c = 3
myfirstpythonfile.py(4): mylist = [a, b, c]
myfirstpythonfile.py(5): for item in mylist:
myfirstpythonfile.py(6):     print item
1
myfirstpythonfile.py(5): for item in mylist:
myfirstpythonfile.py(6):     print item
19
myfirstpythonfile.py(5): for item in mylist:
myfirstpythonfile.py(6):     print item
3
myfirstpythonfile.py(5): for item in mylist:
 --- modulename: trace, funcname: _unsettrace
trace.py(80):         sys.settrace(None) 
```

正如我们所看到的，它跟踪 python 代码的确切行，立即执行结果并将其输出到 stdout。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T14:14:55.280

系统命令有一个名为`intern = FALSE`. 使这个`TRUE`和之前可见的任何输出都将存储在一个变量中。

现在使用此选项运行您的系统命令，您应该直接在变量中获取输出。像这样

```
tmp <- system("python -c 'print \"hello world\"'",intern=T) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T13:23:02.120

我解决这个问题的方法是定义我自己的函数，这些函数粘贴参数，写出一个临时的 .py 文件，然后它们通过系统调用执行 python 文件。下面是一个调用 ArcGIS 的欧几里得距离函数的示例：

```
py.EucDistance = function(poly_path,poly_name,snap_raster,out_raster_path_name,maximum_distance,mask){

    py_path = 'G:/Faculty/Mann/EucDistance_temp.py'
    poly_path_name = paste(poly_path,poly_name, sep='')

    fileConn<-file(paste(py_path))
    writeLines(c(
        paste('import arcpy'),
        paste('from arcpy import env'),
        paste('from arcpy.sa import *'),
        paste('arcpy.CheckOutExtension("spatial")'),

        paste('out_raster_path_name = "',out_raster_path_name,'"',sep=""),
        paste('snap_raster = "',snap_raster,'"',sep=""),
        paste('cellsize =arcpy.GetRasterProperties_management(snap_raster,"CELLSIZEX")'),
        paste('mask = "',mask,'"',sep=""),
        paste('maximum_distance = "',maximum_distance,'"',sep=""),
        paste('sr = arcpy.Describe(snap_raster).spatialReference'),

        paste('arcpy.env.overwriteOutput = True'),
        paste('arcpy.env.snapRaster = "',snap_raster,'"',sep=""),
        paste('arcpy.env.mask = mask'),
        paste('arcpy.env.scratchWorkspace ="G:/Faculty/Mann/Historic_BCM/Aggregated1080/Scratch.gdb"'),
        paste('arcpy.env.outputCoordinateSystem = sr'),

        # get spatial reference for raster and force output to that
        paste('sr = arcpy.Describe(snap_raster).spatialReference'),
        paste('py_projection = sr.exportToString()'),     
        paste('arcpy.env.extent = snap_raster'),
        paste('poly_name = "',poly_name,'"',sep=""),
        paste('poly_path_name = "',poly_path_name,'"',sep=""),

        paste('holder = EucDistance(poly_path_name, maximum_distance, cellsize, "")'),
        paste('holder = SetNull(holder < -9999, holder)'),
        paste('holder.save(out_raster_path_name) ')

    ), fileConn, sep = "\n")
    close(fileConn)

    system(paste('C:\\Python27\\ArcGIS10.1\\python.exe', py_path))
} 
```

# java - 使用 Bean 的随机数

> ID：10155704
> 
> 赞同：0
> 
> 时间：2012-04-14T17:25:46.970
> 
> 标签：java, jsf, random, javabeans, dice

我正在尝试创建一个 jsf 应用程序，该应用程序在页面刷新时会增加命中计数器并生成两个随机数。应该在窗口上显示的内容可能如下所示：

> On your roll x 你扔了 x 和 x

对于这个程序，我决定创建两个 Bean，一个用于保存页面刷新计数器，一个用于生成随机数。目前看起来像这样：

CounterBean.java

```
package diceroll;

public class CounterBean 
{
    int count=0;
    public CounterBean()
    {

    }
    public void setCount(int count)
    {
        this.count=count;
    }
    public int getCount()
    {
        count++;

        return count;
    }
} 
```

RandomNumberBean.java

```
package diceroll;

import java.util.Random;

public class RandomNumberBean {
    int rand=0;
    Random r = new Random();
    public RandomNumberBean()
    {
        rand = r.nextInt(6);
    }
    public void setNextInt(int rand)
    {
        this.rand=rand;
    }
    public int getNextInt() {
        return rand;
    }
} 
```

然后我创建了一个 index.jsp 来显示上述消息。

```
<html>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<f:view>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Roll the Dice</title>
    </head>
    <body>
        <h:form>
            <p>
                On your roll #
                <h:outputText value="#{CounterBean.count} " />
                you have thrown <h:outputText value="#{RandomNumberBean.rand}" />and <h:outputText value="#{RandomNumberBean.rand} " />
            </p>
        </h:form>
    </body>
</f:view>
</html> 
```

但是，当我运行应用程序时，我收到以下消息：

> org.apache.jasper.el.JspPropertyNotFoundException: /index.jsp(14,20) '#{RandomNumberBean.rand}' 在类型 diceroll.RandomNumberBean 上找不到属性 'rand'
> 
> 引起：org.apache.jasper.el.JspPropertyNotFoundException - /index.jsp(14,20) '#{RandomNumberBean.rand}' 在类型 diceroll.RandomNumberBean 上找不到属性 'rand'

我想我的 faces-config.xml 文件有错误，所以我也会在这里发布，看看是否有人可以提供一些帮助：

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <managed-bean>
    <managed-bean-name>CounterBean</managed-bean-name>
    <managed-bean-class>diceroll.CounterBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
    <managed-bean-name>RandomNumberBean</managed-bean-name>
    <managed-bean-class>diceroll.RandomNumberBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:32:19.897

如果你想`xxx`从视图中访问一个 bean 成员，你需要一个方法`getXxx`来让它工作。`X`getter 方法名称中的大写字母很重要。

所以为了访问`int rand`你需要一个`public int getRand()`方法。

它甚至可以在没有成员`xxx`的情况下工作。吸气剂`getXxx`就足够了。

所以你也可以让它工作：

```
<h:outputText value="#{RandomNumberBean.nextInt}" /> 
```

# java - JTable 多实例

> ID：10155706
> 
> 赞同：1
> 
> 时间：2012-04-14T17:25:51.030
> 
> 标签：java, swing, jtable, jcombobox, multiple-instances

我有一个`JTable`从另一个`JTable`.

`JTable`现在我想根据在 a 中选择的日期在 s之间切换`JComboBox`。

例如，如果我选择星期一我添加添加到它的程序，然后我从中选择星期二`JComboBox`并出现一个新的`JTable`。如果我再次去星期一，程序应该仍然存在（直到程序关闭）。

我如何为这些天创建多个`JTable`s（`JTable`保持不变）并让信息保留在那里直到程序关闭？

这是一个向您展示我的意思的示例：

![在此处输入图像描述](../Images/d3264ab102d41b10b64d430500202ec0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:27:28.003

过滤现有表中的行似乎更容易。有关如何创建 a 的信息，请参阅[*排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)`RowFilter`，它的实例可以添加到 a`JComboBox`并应用于组合的动作侦听器中。

# javascript - 更改显示隐藏事件

> ID：10155707
> 
> 赞同：-2
> 
> 时间：2012-04-14T17:25:53.687
> 
> 标签：javascript, jquery

单击输入类型=“文件”时，会出现一个“上传背景”按钮。我已经使用 jquery .click() 和 .show() 和 .hide() 完成了它，它可以工作。但是我想在页面中的其他位置单击它时将输入 type="file" 更改回按钮。我怎样才能做到这一点？

HTML：

```
Upload<input type="button" id="upload" />
<input type="file" id="file" /> 
```

CSS：

```
#file{display:none;} 
```

jQuery：

```
$('#upload').click(function(){
$('#upload').hide();
$('#file').show();
}); 
```

在页面某处单击鼠标指针时，如何将#file 更改回#upload。

编辑：（这是对的吗？）

```
$("#upload").click(function(){
    e.stopPropagation();
    return false;
    $("#file").show('slow');
    $("#upload").hide();
});

$(document).click(function(){
$('#uploadbg').show('slow');
$('#uploadform').hide();
}); 
```

还是行不通。有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:35:39.187

```
$(document).click(function(){
   $('#upload').show();
   $('#file').hide();
}); 
```

由于事件冒泡，每次没有自己的处理程序的单击都会触发 document.click。

# virtual-machine - Vagrant 将其 .box 文件下载到哪里？

> ID：10155708
> 
> 赞同：285
> 
> 时间：2012-04-14T17:25:58.047
> 
> 标签：virtual-machine, virtualbox, vagrant

执行以下命令后 .box 文件会发生什么？

```
vagrant box add lucid32 http://files.vagrantup.com/lucid32.box 
```

`lucid32.box`下载完成后在文件系统上找不到文件。

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2012-04-19T10:25:00.070

如[文档中所述](http://docs-v1.vagrantup.com/v1/docs/boxes.html)，盒子存储在：

*   Mac OS X 和 Linux：`~/.vagrant.d/boxes`
*   视窗：`C:/Users/USERNAME/.vagrant.d/boxes`

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2015-01-24T13:33:31.570

在 Mac/Linux 系统上，成功下载的盒子位于：

```
~/.vagrant.d/boxes 
```

和不成功的盒子位于：

```
~/.vagrant.d/tmp 
```

在 Windows 系统上，它位于用户文件夹下：

```
C:\Users\%userprofile%\.vagrant.d\boxes 
```

希望这会有所帮助。谢谢

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2015-02-06T10:42:27.043

要更改路径，您可以为环境变量设置一个新路径，名为：VAGRANT_HOME

```
export VAGRANT_HOME=my/new/path/goes/here/ 
```

如果您想在另一个 HDD 上拥有这些 vagrant-Images，那可能会很好。

文档中的更多信息：http: [//docs.vagrantup.com/v2/other/environmental-variables.html](http://docs.vagrantup.com/v2/other/environmental-variables.html)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-05-14T23:09:50.957

下载和盒子安装完成后，实际`.box`文件会被 Vagrant 删除。如其他答案中所述，在下载时， .box 文件存储为：

```
~/.vagrant.d/tmp/boxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

其中文件名是“box”，后跟一个 40 字节的十六进制哈希。例如，我系统上的一个临时文件是：

```
~/.vagrant.d/tmp/boxc74a85fe4af3197a744851517c6af4d4959db77f 
```

据我所知，此文件从未使用`*.box`扩展名保存，这解释了为什么上面的搜索未能找到它。有两种方法可以检索实际的 box 文件：

1.  **从 vagrantcloud.com 下载 .box 文件**

    1.  [在图集](https://atlas.hashicorp.com/boxes/search)上找到您感兴趣的盒子。例如， [https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20150530.0.1](https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20150530.0.1)
    2.  将域名替换为`vagrantcloud.com`. 所以[https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20150530.0.1](https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20150530.0.1) 变成[https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1/providers/virtualbox.box](https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1/providers/virtualbox.box)。
    3.  添加`/providers/virtualbox.box`到该 URL 的末尾。所以 [https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1](https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1)变成[了 https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1/providers/virtualbox.box](https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1/providers/virtualbox.box)
    4.  保存 .box 文件
    5.  随意使用 .box，例如，自己托管它并指向`config.vm.box_url`URL。**或者**
2.  **直接从 Vagrant 获取 .box**

    这需要你修改 ruby​​ 源，以防止 Vagrant 在成功下载后删除该框。

    1.  在 Vagrant 安装目录中找到 box_add.rb 文件。在我的系统上，它位于`/Applications/Vagrant/embedded/gems/gems/vagrant-1.5.2/lib/vagrant/action/builtin/box_add.rb`
    2.  找到 box_add 函数。在`box_add`函数中，有一个块读取：

        > 确保 # 确保我们在添加临时文件后删除它， # 除非我们被打断，在这种情况下，我们将其保留在 # 以便我们稍后可以恢复下载。if !@download_interrupted @logger.debug("Deleting temporary box: #{box_url}") begin box_url.delete if box_url rescue Errno::ENOENT # 没什么大不了的，临时文件可能实际上不存在 end end

    3.  将此块注释掉。
    4.  使用 . 添加另一个框`vagrant add box <boxname>`。
    5.  等待它下载。`~/.vagrant.d/tmp/`您可以观看它作为文件保存在目录中`boxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`。
    6.  将文件重命名为更有用的名称。例如，`mv boxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX trusty64.box`。

# 你为什么要这个？

对我来说，这对于检索 .box 文件很有用，因此它可以托管在本地、快速的基础设施上，而不是从[HashiCorp 的 Atlas box 目录](https://atlas.hashicorp.com/boxes/search)或[其他 box 提供商](http://www.vagrantbox.es/)下载。

这确实应该是默认 Vagrant 功能的一部分，因为它有一个非常明确的用例。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-06-03T09:11:01.653

@Luke Peterson：有一种更简单的方法来获取 .box 文件。

只需转到[https://atlas.hashicorp.com/boxes/search](https://atlas.hashicorp.com/boxes/search)，搜索您要下载的框。注意盒子的 URL，例如：

[https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20150530.0.1](https://atlas.hashicorp.com/) **_**

然后您可以使用如下 URL 下载此框：

[https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/20150530.0.1/providers/virtualbox.box](https://vagrantcloud.com/) **_** _

我尝试并成功下载了我需要的所有盒子。希望有所帮助。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-11-11T18:59:27.080

在 Windows 上，可以在此处找到该位置。我没有在互联网上找到任何文档，这对我来说并不是很明显：

`C:\Users\\{username}\\.vagrant.d\boxes`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-15T13:09:12.187

此外

```
Mac:
~/.vagrant.d/

Windows:
C:\Users\%userprofile%\.vagrant.d\boxes 
```

您必须删除 VirtualBox/OtherVMprovider 中的文件才能重新开始。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-10T02:29:58.177

在带有*Vagrant 2.2.2的**Windows 10*上，设置环境变量将确保将盒子下载到为.*`VAGRANT_HOME``VAGRANT_HOME`*

 *在我的情况下，我设置`VAGRANT_HOME`为`e:\vagrant_home`，并且这些盒子存储在`e:\vagrant_home\boxes`.

这对我有用。

那是存放**箱子**的地方。正在 Virtual Box 中配置的文件夹中创建虚拟**机。**要设置 VirtualBox VM 存储文件夹，请转到：`VirtualBox GUI --> File --> Preferences --> General --> Default Machine Folder`.*

# google-apps-script - 有关优化 Google Apps 脚本的任何规范/文档，以避免超时和“挂起”

> ID：10155710
> 
> 赞同：0
> 
> 时间：2012-04-14T17:26:12.110
> 
> 标签：google-apps-script

根据我目前的经验，如果您编写的脚本使大量昂贵的调用紧密结合在一起，则功能只是“挂起”，或者您得到不一致的响应，并且必须刷新浏览器，因为工作表停止更新等。

是否有任何文档或规范可以澄清这一点，因为如果用户可以期望它在大多数情况下都能正常工作，并且时不时地产生随机结果，那么就不可能在实际使用中发布应用程序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:03:50.580

[这里](https://developers.google.com/apps-script/guide_common_tasks)和[这里](http://googleappsscript.blogspot.com.br/2010/06/optimizing-spreadsheet-operations.html)有规范/文档。

# jquery - 如果原始来源不存在，有没有办法让 html 页面上的图像默认为另一个图像？

> ID：10155713
> 
> 赞同：0
> 
> 时间：2012-04-14T17:26:32.333
> 
> 标签：jquery, html, asp.net-mvc, image

我有一个包含人物图像的网站。有时，包含所有图像的服务器出现故障，我的网站显示损坏的图像链接。我想看看网页上是否有以下逻辑，您可以在其中 src 一张图片，但如果它没有正确加载，那么默认为另一张图片作为备份？

如果它需要js或jquery等，我很好。.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:17:13.480

我认为你可以用css做到这一点。只需在图像类上做这样的事情。并将其设置为 html 标签

```
.myimage{
    background: url("images/default.png"); 
```

}

或者看看[这个](https://stackoverflow.com/questions/3381663/check-if-image-exists-with-given-url-using-jquery)。

# php - 为什么我的列表没有在 PHP 中呈现？

> ID：10155727
> 
> 赞同：0
> 
> 时间：2012-04-14T17:27:39.870
> 
> 标签：php, html, html-lists

我正在制作一个小型 RSS 阅读器，我希望它能够解析网站并列出提要。但是`<ul>`and`<li>`标签没有被渲染。有什么建议么？

```
<?php
header("Content-Type: text/plain; charset=utf-8");

function jobs() {
    $output = array();
    $feed_url = 'http://www.jobs.ge/rss/jobs/';
    $feed = simplexml_load_file($feed_url);

    for($j=0; $j<10; $j++){

        $title = $feed ->channel->item[$j]->title;
        $link = $feed ->channel->item[$j]->link;
        $desc= $feed ->channel->item[$j]->description;
        $date = $feed ->channel->item[$j]->pubDate;

        $output[] = array (
            'title' =>$title,
            'link' =>$link,
            'description'=> $desc,
            'date'=> $date,
        );
    }
    return $output;
}

$feed = jobs();
?>

<ul>
<?php
    foreach ($feed as $item) {
        echo '<li>', $item['title'],'</li>';
    }
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:33:14.327

您将 content-type 设置为，`text/plain`以便浏览器执行应有的操作并将其呈现为纯文本。将内容类型设置为`text/html`，即使它不是完全有效的 HTML，它也应该呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:33:09.063

在这里工作正常。输出是：

```
<ul>
<li>შიდა აუდიტორი</li><li>დისტრიბუტორი/სტაჟიორი</li><li>პროექტების მენეჯერის ასისტენტი&lt;/li><li>შეფ-მზარეულის ასისტენტი&lt;/li><li>აღმრიცხველ-ოპერატორი&lt;/li><li>პრისელერი, სტაჟიორი</li><li>გაყიდვების აგენტი</li><li>სხვადასხვა</li><li>პროექტის მენეჯერი</li><li>მრეწველობის ინჟინერი</li></ul> 
```

# python - 从字典映射中替换字符串中的字符

> ID：10155729
> 
> 赞同：1
> 
> 时间：2012-04-14T17:27:45.173
> 
> 标签：python, string, dictionary, replace

我对 python 很陌生，所以如果我错过了一个明显的内置函数，请原谅我。

我有一个我生成的字典映射，如下所示：

```
dictionary = dict(zip(restAlphaSet,list(item))) 
```

其中 restAlphaSet 它是一个字符串，而 list(item) 是列表转换的迭代

我正在尝试使用它来替换字符串中的所有字符。我在网上找到了一个 replaceAll 函数，如下所示：

```
def replace_all(text, dic):
for i, j in dic.iteritems():
    if i != j:
        text = text.replace(i, j)
return text 
```

不幸的是，这是有缺陷的，好像映射有 a->b，b->a，然后什么都不会改变，因为 b 会变回 a。

我找到了翻译功能，但它不接受字典输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T17:36:57.663

翻译速度更快。

```
>>> import string
>>> text.translate(string.maketrans("".join(restAlphaSet),"".join(item))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T17:36:34.937

您正在忽略[翻译](http://docs.python.org/library/stdtypes.html#str.translate)功能。有关使用示例，请参见[此处。](http://www.tutorialspoint.com/python/string_translate.htm)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-11-01T00:24:36.713

我意识到这是一个老问题，但是似乎没有使用字典和映射的`a->b`答案`b->a`。

我需要一个类似的函数，而完成这项工作的技巧是首先遍历我们需要替换的字符串，然后为每个字符查找映射。

```
def replace_all(text, dic):
    new_text = ""
    for char in text:
        for i, j in dic.iteritems():
            if char == i:
                new_text += j
return new_text 
```

# bash - 这里的“2>&1”是什么意思？

> ID：10155730
> 
> 赞同：1
> 
> 时间：2012-04-14T17:27:49.940
> 
> 标签：bash

> **可能重复：**
> [在 bash shell 中，“ 2>&1 ”是什么？](https://stackoverflow.com/questions/818255/in-the-bash-shell-what-is-21)

```
#echo "[+] Creating $count files" 
_remount 
create=$((time ./dirtest $testdir $count $size) 2>&1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:30:35.477

这意味着标准错误描述符`stderr`（2）将被重定向到标准输出描述符`stdout`（1）。请注意，`&`确保将`1`解释为文件描述符而不是文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:30:47.617

它将标准错误重定向到标准输出。这样，写入 stderr 的结果将存储在变量中。

# css - 在 CSS 中我可以在哪里使用 + 和 >？

> ID：10155731
> 
> 赞同：19
> 
> 时间：2012-04-14T17:27:50.930
> 
> 标签：css, css-selectors

`+`这可能是一个基本问题，但对我来说，我可以在哪里使用或`>`在 CSS中使用它仍然令人困惑。

我看到很多选择器，例如`li > a`or`div + span`等​​，但我不确定它们有什么区别以及何时使用它们？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-14T17:30:27.913

**>**符号表示选择一个直系后代

例子：

**CSS**

```
div > ul {
   list-style: none;
} 
```

**HTML** 这里的样式将适用于`<ul>`

```
<div>
  <ul>
  </ul>
</div> 
```

**+**号表示选择相邻的兄弟

例子：

**CSS**

```
p + p
{
   font-weight: bold;
} 
```

**HTML** 这里的样式将适用于后者`<p>`

```
<div>
   <p></p>
   <p></p>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T17:31:18.893

[选择器在W3 CSS 规范](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)中得到了广泛的解释，但这里有一个摘要：

**直接子选择器**

选择`>`器是[直接子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。在您的示例`li > a`中，该规则将选择`<a>`作为元素的直接子元素的任何`<li>`元素。

该规则将在此示例中选择锚点：

```
<ul>
   <li><a href="#">An anchor</a></li>
</ul> 
```

**相邻兄弟选择器**

选择`+`器是[相邻的兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。在您的示例`div + span`中，该规则将选择`<span>`紧接在一个元素之前的任何`<div>`元素，并且它们都共享同一个父元素。

在这种情况下将选择 span 元素：

```
<article>
   <div>A preceding div element</div>
   <span>This span would be selected</span>
</article> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T17:30:52.490

是`>`直接**子**选择器。在您的示例中，这*将*`li > a`仅选择`<a>`作为.*`<li>`*

 *表示所选元素的`+`兄弟姐妹。在您的示例中，`div + span`将选择`<span>`a 旁边的任何 s `<div>`（具有相同的父级）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:30:42.460

`li > a`只会选择`a`元素的直接后代`li`元素。`div + span`只会选择`span`元素后面的`div`元素。

在@bažmegakapa 的链接中阅读更多内容：http: [//www.w3.org/TR/CSS2/selector.html#pattern-matching](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-14T17:31:41.373

我不确定 + 号，但 css 中的 > 号表示直接子级，考虑一下

```
div > h1 { color: red; } 
```

这将为所有作为 div 直接子级的 h1 标签设置样式。

```
<h1>BLAH</h1>
<div>
    <h1>BLAH</h1>
</div> 
```

在这种情况下，第一个 h1 将被单独保留，第二个因为它是 div 标签的直接子级，所以将是红色的。*

# ruby-on-rails - 多个工作线程在同一个数据库上工作 - 如何使其正常工作？

> ID：10155740
> 
> 赞同：4
> 
> 时间：2012-04-14T17:29:07.827
> 
> 标签：ruby-on-rails, ruby, sinatra, datamapper

我有一个数据库，其中包含需要操作的行列表。它看起来像这样：

```
id       remaining        delivered   locked
============================================
1        10               24          f 
2        6                0           f
3        0                14          f 
```

我正在将 DataMapper 与 Ruby 一起使用，但实际上我认为这是一个一般性的编程问题，并不特定于我正在使用的确切实现......

我正在创建一堆执行类似操作的工作线程（伪 ruby​​ 代码）：

```
while true do
  t = any_row_in_database_where_remaining_greater_than_zero_and_unlocked
  t.lock   # update database to set locked = true
  t.do_some_stuff
  t.delivered += 1
  t.remaining -= 1
  t.unlock
end 
```

当然，问题是，这些线程相互竞争，整个事情并不是真正的线程安全。while 循环中的第一行可以轻松地在多个线程中拉出同一行，然后才有机会被锁定。

我需要确保一个线程同时只在一行上工作。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T18:10:43.070

关键步骤是从数据库中选择一个未锁定的行并将其标记为锁定。如果你能安全地做到这一点，那么其他一切都会好起来的。

我所知道的 2 种可以保证安全的方法是悲观锁定和乐观锁定。在并发方面，它们都依赖您的数据库作为最终保证。

# 悲观锁定

悲观锁定意味着在您选择要使用的行时预先获取锁定，以便其他人无法读取它们。就像是

```
SELECT * from some_table WHERE ... FOR UPDATE 
```

与 mysql 和 postgres（可能还有其他）一起使用，并将阻止与数据库的任何其他连接读取返回给您的行（该锁的粒度取决于所使用的引擎、索引等 - 检查您的数据库的文档）。它被称为悲观，因为您假设将发生并发问题并预防性地获取锁。这确实意味着即使在不必要的情况下您也要承担锁定的成本，并且可能会根据您拥有的锁定粒度降低并发性。

# 乐观锁定

乐观锁定是指您不希望悲观锁定负担的技术，因为大多数时候不会有并发更新（如果您在读取行后立即更新行，将锁定标志设置为 true ，窗口比较小）。AFAIK这仅在一次更新一行时有效

首先向表中添加一个整数列`lock_version`。每当您更新表时，`lock_version`与您正在进行的其他更新一起增加 1。假设当前`lock_version`为3。更新时，将更新查询更改为

```
update some_table set ... where id=12345 and lock_version = 3 
```

并检查更新的行数（数据库驱动程序返回这个）。如果这更新了 1 行，那么您就知道一切正常。如果这更新了 0 行，则您想要的行已被删除或其锁定版本已更改，因此您返回流程中的第 1 步并搜索要处理的新行。

我不是数据映射器用户，所以我不知道它/它的插件是否为这些方法提供支持。Active Record 支持两者，因此如果数据映射器不支持，您可以在那里寻找灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:10:26.873

我会使用一个[`Mutex`](http://www.ruby-doc.org/core-1.9.3/Mutex.html)：

```
# outside your threads
worker_updater = Mutex.new

# inside each thread's updater
while true
  worker_updater.synchronize do
    # your code here
  end
  sleep 0.1 # Slow down there, mister!
end 
```

这保证了一次只有一个线程可以输入`synchronize`. 为了获得最佳性能，请考虑代码的哪一部分需要是线程安全的（前两行？），并且只将那部分包装在 Mutex 中。

# internet-explorer - @font-face 不能在 IE 中工作？

> ID：10155741
> 
> 赞同：1
> 
> 时间：2012-04-14T17:29:10.907
> 
> 标签：internet-explorer, font-face, webfonts

我有这个 CSS：

```
@font-face
{
    font-family: 'Bebas';
    src: url('Fonts/BebasNeue.eot');
    src: url('Fonts/BebasNeue.eot?#iefix') format('embedded-opentype'),
         /*url('bebasneue-webfont.woff') format('woff'),*/
         url('Fonts/BebasNeue.ttf') format('truetype'),
         url('Fonts/BebasNeue.svg#') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我将它应用到整个页面的几个 div 中。它在除 IE 之外的所有浏览器中都能正常工作。我有一个 .eot 文件并且目录是正确的。出于某种原因，它只是行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:00:49.670

您是否尝试过通过[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)运行字体并在 IE 中尝试示例？

# lisp - 使用带有 Common Lisp 的排序的意外列表重复

> ID：10155744
> 
> 赞同：2
> 
> 时间：2012-04-14T17:29:29.993
> 
> 标签：lisp, common-lisp

编辑：解决方案是在第一个 (let...) 表单中将 '(1) 替换为 (list 1)。这是因为我试图修改文字数据。谢谢您的帮助！（我会放弃投票，但显然你需要 15 声望......）

这是我在这个网站上的第一篇文章。

今天我正在解决一些[Project Euler](https://projecteuler.net)问题，我在 Common Lisp 中遇到了一些意想不到的列表排序行为（嗯，至少对我而言）：

我有一个函数可以找到数字 x 的所有正确除数：

```
(defun divisors (x)
    "Finds all of the proper divisors of x."
    (let ((sq (sqrt x)) (divs '(1)))
        (when (integerp sq) (push sq divs))
        (loop for i from 2 to (1- (floor sq)) do
        (let ((div (/ x i)))
            (when (integerp div)
                (push i divs)
                (push div divs))))
    divs)) 
```

这个功能很好用。例如：

```
(divisors 100)
==> (20 5 25 4 50 2 10 1) 
```

每当我尝试对结果列表进行排序时，就会出现问题：

```
(sort (divisors 100) #'<)
==> (1 2 4 5 10 20 25 50) 
```

嗯，效果很好。但是当我再次调用除数时会发生什么？

```
(divisors 100)
==> (20 5 25 4 50 2 10 1 2 4 5 10 20 25 50) 
```

什么？也许如果我尝试不同的号码...

```
(divisors 33)
==> (11 3 1 2 4 5 10 20 25 50) 
```

在我对结果列表进行排序后，来自先前查询的除数是持久的。如果我重新编译该函数，则在再次对结果列表进行排序之前不会出现错误。我假设我在函数定义的某个地方搞砸了，但我对 Lisp 很陌生，我找不到错误。嵌套（let...）表单可能有问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T17:33:40.063

经常问。

您已修改文字数据。您需要使用新数据。使用函数 LIST 或函数进行复制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T17:42:13.753

雷纳是对的；如果不明显，可以通过以下更改修复代码：

```
(let ((sq (sqrt x)) (divs (list 1))) 
```

# c# - CSS 文件绝对 URL 在本地计算机上不起作用

> ID：10155761
> 
> 赞同：0
> 
> 时间：2012-04-14T17:30:37.737
> 
> 标签：c#, css

***回答***

在此发布此内容为 8 小时还没有过去让我回答我自己的问题：

## **我想通了。我从 PreRender 中删除了 Server.MapPath 并且它呈现正确。我的脑袋放屁。多谢你们**

在我的代码中，我有：

```
CssIncludes.Add("~/Sites/0/PageLayouts/Predefined/News/CSS/HeaderMenu.css"); 
```

一旦在页面上呈现，它就会在页面源中显示为：

```
 <link href='C:\inetpub\wwwroot\mysite\Sites\0\PageLayouts\Predefined\News\CSS\HeaderMenu.css' type='text/css' rel='stylesheet' /> 
```

现在，如果我手动复制该 css url 并将其粘贴到我的浏览器中，它会很好地加载 css，但它根本不会显示在我的 c:\localhost\mysite\ 上！

有什么解决办法吗？

CSS 包括列表：

```
public List<string> CssIncludes
    {
        get
        {
            if (_cssincluded == null)
                _cssincluded = new List<string>();
            return _cssincluded;
        }
    }

void Page_PreRender(object sender, EventArgs e)
    {
        foreach (string css in CssIncludes)
        {
            Page.Header.Controls.Add(new LiteralControl(string.Format("<link href='{0}' type='text/css' rel='stylesheet' />", Server.MapPath(css))));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:32:16.883

删除〜签名并重试，我希望它会工作

在 appSettings 部分的 web.config 中添加网站路径键

```
<add key="Websitepath" value="http://www.yoursite.com" /> 
```

并使网址像

```
includeCss(ConfigurationManager.AppSettings["Websitepath"].ToString()+"Sites/0/PageLayouts/Predefined/News/CSS/HeaderMenu.css"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:46:45.307

ASP.Net 正在尝试将 css 路径解析为 Windows 文件路径。

我建议您自己编写 CSS`<link/>`并使其与当前页面相关。

在这种情况下，正确的标签可能是：

```
<link type='text/css' rel='stylesheet' href='CSS/HeaderMenu.css'/> 
```

请记住，任何链接都是 UNIX 样式的路径（即`/`不是反斜杠）。

**编辑：**

根据 Asker (SandMan) 的说法`Server.MapPath`，也需要移除。

这可能是解析 css 路径的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:49:48.623

想通了。我从 PreRender 中删除了 Server.MapPath 并且它呈现正确。多谢你们。

改变：

```
CssIncludes.Add("~/Sites/0/PageLayouts/Predefined/News/CSS/HeaderMenu.css"); 
```

到：

```
CssIncludes.Add("../Sites/0/PageLayouts/Predefined/News/CSS/HeaderMenu.css"); 
```

并改变了

```
void Page_PreRender(object sender, EventArgs e)
{
    foreach (string css in CssIncludes)
    {
        Page.Header.Controls.Add(new LiteralControl(string.Format("<link href='{0}' type='text/css' rel='stylesheet' />", Server.MapPath(css))));
    }
} 
```

到：

```
void Page_PreRender(object sender, EventArgs e)
{
    foreach (string css in CssIncludes)
    {
        Page.Header.Controls.Add(new LiteralControl(string.Format("<link href='{0}' type='text/css' rel='stylesheet' />", (css))));
    }
} 
```

# ios - CoreData - 多关系

> ID：10155775
> 
> 赞同：0
> 
> 时间：2012-04-14T17:32:02.143
> 
> 标签：ios, core-data

我开始使用 Core Data，并试图深入了解它在我的案例中是如何工作的。我正在构建一个 iPad 相册应用程序，它允许用户根据关键字和与每张照片相关的其他几个属性来过滤他们的结果。属性将是基本的东西，如方向以及它的颜色与否。关键字将基于一组定义的值，用户必须从中进行选择。

到目前为止，这是我在核心数据模型中的粗略概述：
实体（属性）：
**照片**（id、标题、desc、文件路径）
**关键字**（id、名称）

由于一张照片可以有多个与之关联的关键字，我是否可以从“照片”与“关键字”的目的地创建关系并使其成为一对多关系？那是正确的/疯狂的/完全错误的吗？我将如何为该关系添加/获取记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:51:50.743

如果定义了关键字并且用户可以从定义的列表中选择它们，我就不会使用实体关键字。提示始终使用单数名称（照片、关键字）。我将关键字放在 plist 中，用户选择一些关键字，然后您可以创建一个逗号分隔的字符串以保存为 Photo 上的属性。正如约瑟夫所提到的，您想要继承 NSManagedObject 子类，然后我将添加一个接收字符串（关键字）并返回 BOOL 的方法，指示该关键字是否是 Photo 属性上逗号分隔的关键字值的一部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:43:01.317

这是对的。有几种方法可以访问它，但最直接的方法是生成 NSManagedObject 子类（Editor->Create NSManagedObject Subclass...）。当填充这些照片实体时，关键字关系将填充在称为关键字的属性中。

# java - Java - 如何从 BeanShell 的 JConsole 读取用户输入？

> ID：10155782
> 
> 赞同：3
> 
> 时间：2012-04-14T17:32:47.543
> 
> 标签：java, input, jconsole, beanshell

我正在尝试创建一个简单的控制台，但我发现了这个： [创建一个“命令”控制台](https://stackoverflow.com/questions/1255373/create-a-command-console)

我决定尝试一下，它似乎非常适合我的需要。唯一的问题是，由于 BufferedReader 被阻止，我似乎无法从用户那里获得用户输入。我对 BufferedReader 和 JConsole 都不熟悉，所以我不知道需要修复什么。

这是我的代码版本：

```
import java.io.*;
import bsh.util.*;
import java.awt.*;

public class CLI extends JConsole
{       
    public CLI()
    {
        Font font = new Font("Consolas", Font.BOLD, 12);
        setFont(font);

        new InputThread().start();
    }

    private class InputThread extends Thread
    {
        BufferedReader input = new BufferedReader(getIn());
        String newline = System.getProperty("line.separator");
        String line = "";
        String prompt = "$ ";

        public void run()
        {
            try
            {
                do
                {
                    print(prompt, Color.RED);
                    line = input.readLine();
                    print("You typed: " + line + newline, Color.BLUE);

                } while (!line.equalsIgnoreCase("quit"));

                input.close();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }
} 
```

# css - H5BP & 1140 网格脚本

> ID：10155785
> 
> 赞同：0
> 
> 时间：2012-04-14T17:33:10.470
> 
> 标签：css, grid, html5boilerplate

我正在将 1140px 网格系统 (http://cssgrid.net/) 与 HTML5Boilerplate (http://html5boilerplate.com/) 结合起来，试图将两者的优点结合起来作为我自己的项目框架的起点.

由于我不知道任何 JavaScript，谁能告诉我 HTML5Boilerplate 中内置的 Modernizr 脚本版本是否涵盖与 1140px 网格系统用于在某些不受支持的浏览器中启用媒体查询的脚本相同的功能，或者我需要包括两者？

这是有关两者的信息的链接：

[http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/) http://modernizr.com/download/

有任何想法吗？我查看了modernizr 文档，但它有点超出我的范围。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:12:47.250

如果您不了解任何 JavaScript，请不要使用 Modernizr（并尽快开始学习 JavaScript）。[CSS3-mediaquery-js](http://code.google.com/p/css3-mediaqueries-js/)更易于使用，因为您只需将媒体查询添加到您的 css 文件中，而无需考虑任何 JS。如果您无论如何都想使用[HTML5 BP](http://html5boilerplate.com)，我建议您忘记[1140](http://cssgrid.net/)并使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)

**更新：** [Respond.js](https://github.com/scottjehl/Respond)将是[CSS3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)的替代品。同样，后者可能是最容易使用的。

# arrays - 计算数组中字符串的出现次数

> ID：10155789
> 
> 赞同：0
> 
> 时间：2012-04-14T17:33:17.787
> 
> 标签：arrays, string, asp-classic, web

我基本上是从另一个论坛粘贴这个我看到它被问到（没有人回答）。这基本上与我试图做的事情完全相同：

在 ASP 经典中，有没有办法计算字符串在字符串数组中出现的次数并根据字符串和出现次数输出？

例如，如果我有一个包含以下内容的数组：
你好
快乐
你好
你好
测试
你好
测试
快乐

输出将是：

你好 4
快乐 2
测试 1
测试 1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:25:29.473

我假设语言是 VBScript（因为这是大多数人使用经典 ASP 的语言）。

您可以使用[`Dictionary`](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28VS.84%29.aspx)对象来跟踪各个计数：

```
Function CountValues(pArray)
    Dim i, item
    Dim dictCounts
    Set dictCounts = Server.CreateObject("Scripting.Dictionary")

    For i = LBound(pArray) To UBound(pArray)
        item = pArray(i)
        If Not dictCounts.Exists(item) Then
            dictCounts.Add item, 0
        End If
        dictCounts.Item(item) = dictCounts.Item(item) + 1
    Next

    Set CountValues = dictCounts
End Function 
```

# javascript - HTML5 缓存清单异常

> ID：10155793
> 
> 赞同：1
> 
> 时间：2012-04-14T17:33:28.327
> 
> 标签：javascript, html, caching, browser-cache, application-cache

我尝试在我的网站上使用 applicationcach，但我遇到了一个大问题。我只想缓存 3 个文件：`style.css` `favicon.ico`和`script.js`.

问题是，浏览器还存储其他文件（例如 index.php）

代码是：

```
CACHE MANIFEST

FALLBACK:
/ /offline.php

NETWORK:
*

CACHE:
style.css
favicon.ico
script.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:25:06.870

浏览器将始终缓存引用清单的文件。如果您从`index.php`文件中引用清单，则该文件将被缓存。您可以`iframe`在清单中包含一个静态文件，这样您就不必在所有页面中都包含它。

# java - Android - xml & 符号转换

> ID：10155795
> 
> 赞同：0
> 
> 时间：2012-04-14T17:33:52.167
> 
> 标签：java, android

我有一个带有 xml 标记的 sax 解析器，其中包含以下文本：“A & amp; B”（那里没有空格 - 添加所以它不会在此处转换为 &）

就好像它被转换了两次并由于与“A”的结果而转义。这是过程：

已下载 XML 文件

```
InputStream _inputStream = _urlConnection.getInputStream();
                        BufferedInputStream _bufferedInputStream = new BufferedInputStream(_inputStream);
                        ByteArrayBuffer _byteArrayBuffer = new ByteArrayBuffer(64);

                        int current = 0;
                        while((current = _bufferedInputStream.read()) != -1)
                        {
                            _byteArrayBuffer.append((byte)current);
                        }

                        FileOutputStream _fileOutputStream = openFileOutput(_file, MODE_PRIVATE);

                        _fileOutputStream.write(_byteArrayBuffer.toByteArray());
                        _fileOutputStream.close(); 
```

在 endElement 中使用 Sax 转换数据

```
else if (inLocalName.equalsIgnoreCase(_nodeTitle))
        {
            _titleValue = currentValue;
            currentValue = "";
        } 
```

在调试中，当我在处理程序的字符方法中读取它时，与号已经转换并且数据被截断。

我已经看到了很多关于这个的问题，但从来没有一个解决方案。有任何想法吗？

谢谢

解析器：

```
List<PropertiesList> _theList = null;

        try 
        {
            // Create Factory, Parser, Reader, Handler
            SAXParserFactory _saxParserFactory = SAXParserFactory.newInstance();
            SAXParser _saxParser = _saxParserFactory.newSAXParser();
            XMLReader _xmlReader = _saxParser.getXMLReader();
            HandlerReps _handler = new HandlerReps(inRegion, inAbbreviation);

            _xmlReader.setContentHandler(_handler);
            _xmlReader.parse(new InputSource(inStream));

            _theList = _handler.getTheList();
        } 
```

处理程序：

```
// Called when Tag Begins
    @Override
    public void startElement(String uri, String inLocalName, String inQName, Attributes inAttributes) throws SAXException 
    {
        currentElement = false;
    }

    // Called when Tag Ends
    @Override
    public void endElement(String inUri, String inLocalName, String inQName) throws SAXException 
    {
        currentElement = false;

        // Title
        if (inLocalName.equalsIgnoreCase(_nodeValue))
        {
            if (_stateValue.equalsIgnoreCase(_abbreviation) && 
                _countryValue.equalsIgnoreCase(_region))
            {
                // Construct the object
                PropertiesRegion _regionObject = new PropertiesRegion(_titleValue, _address1Value);

                cList.add(_regionObject);

                Log.d(TAG, _regionObject.toString());
            }

            _titleValue = "";
            _address1Value = "";
        }

        // Title
        else if (inLocalName.equalsIgnoreCase(_nodeTitle))
        {
            _titleValue = currentValue;
            currentValue = "";
        }

        // Address1
        else if (inLocalName.equalsIgnoreCase(_nodeAddress1))
        {
            _address1Value = currentValue;
            currentValue = "";
        }
    }

    // Called to get Tag Characters
    @Override
    public void characters(char[] inChar, int inStart, int inLength) throws SAXException 
    {
        if (currentElement) 
        {
            currentValue = new String(inChar, inStart, inLength);
            currentElement = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:36:42.677

这很可能是您的问题的原因：

```
 if (currentElement) 
    {
        currentValue = new String(inChar, inStart, inLength);
        currentElement = false;
    } 
```

对于每个文本内容节点，SAX 解析器可能会向您的处理程序发送多个 characters() 事件。如果你连接所有这些事件，你只会得到整个文本。但是在您的代码中，仅使用了这些事件中的第一个，因为您设置了`currentElement = false`.

问题不在于＆符号转换。作为一般规则，当您描述问题时，通常最好只描述症状，而不是任何假设的原因。

# jsf - Pentaho 报告 + JSF

> ID：10155804
> 
> 赞同：-2
> 
> 时间：2012-04-14T17:34:45.027
> 
> 标签：jsf, primefaces, reporting, business-intelligence, pentaho

我想开发一个包含预先设计好的 pentaho 报告的小型 JSF 门户。我的问题是：如何嵌入 pentaho 报告以及如何将参数从 jsf 传递到报告引擎。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:38:10.120

```
final FacesContext context = FacesContext.getCurrentInstance();
ClassicEngineBoot.getInstance().start();
try {
  // load report definition
  ResourceManager manager = new ResourceManager();
  manager.registerDefaults();
  manager.registerDefaultLoaders();

  ExternalContext extContext = context.getExternalContext();

  String reportPath = "file:" + extContext.getRealPath("aaaaaaaaaaaaa.prpt");

  Resource res = manager.createDirectly(new URL(reportPath), MasterReport.class);
  MasterReport report = (MasterReport) res.getResource();
  report.getParameterValues().put("x1","%" + current.getx1() +"%");
  report.getParameterValues().put("x2","%" + current.getx2() +"%");

  HttpServletResponse httpServletResponse =
    (HttpServletResponse) extContext.getResponse();
  httpServletResponse.setContentType("application/rtf");
  httpServletResponse.setHeader("Content-Disposition",
    "attachment; filename=\"bbbbbbbbb.rtf\"");

  RTFReportUtil.createRTF(report, httpServletResponse.getOutputStream());
  FacesContext.getCurrentInstance().responseComplete();
} catch (ReportProcessingException ex) {
} 
```

# c# - 移动表单时对 Form.Size 的更改不生效

> ID：10155808
> 
> 赞同：2
> 
> 时间：2012-04-14T17:35:07.673
> 
> 标签：c#, .net, winforms

我有一个简单的`System.Windows.Forms.Form`. 根据业务需求，一旦某些功能由于某些后台处理而变得可用，我将增加表单的大小并使用其他控件（按钮等）打开以前隐藏的区域。表单大小的更改由后台线程使用`BeginInvoke`.

这一切都很好。但是，如果用户在屏幕上拖动表单，并且在此期间巧合地调用了更改表单大小的方法，则大小更改不会*生效*（从技术上讲，表单会更改大小，但会立即恢复到以前的大小）。

我通过设置`Form.Size`属性来更改表单大小，但尝试了其他方法，例如设置`Form.ClientSize`和调用`Form.SetBounds()`。也试过`Form.SuspendLayout()`/`Form.ResumeLayout()`和强迫`Form.PerformLayout()`。

到目前为止我没有尝试过任何工作，当它被移动时，表单拒绝改变大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:49:54.753

将代码放入 Form_LocationChanged 事件中以检测先前隐藏的区域是否可见（或者应该通过布尔变量）并相应地调整表单的大小。否则 ResizeEnd 事件会在移动结束后触发，试试这个。

# android - Android 和 Eclipse：我无法从运行/调试配置/Android 设备中找到我的设备 LG-E720

> ID：10155809
> 
> 赞同：1
> 
> 时间：2012-04-14T17:35:17.867
> 
> 标签：android, eclipse, debugging, usb, device

作为标题，我无法在 Eclipse 中找到我的手机设备。我在手机上激活了应用程序/未知来源和应用程序/开发/调试 USB。

但是进入Eclipse并没有出现任何设备电话，为什么呢？

谢谢'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:44:24.783

转到 cmd 提示符，然后将其带到平台工具。然后输入命令

```
 adb kill-server 
```

接着

```
 adb start-server 
```

然后列出连接的设备，

```
 adb devices 
```

您将看到包括模拟器在内的活动设备列表。如果设备不存在，请继续这些步骤一段时间。

在活动设备中列出设备后，您可以在调试模式下运行它。

想一想，这会帮助你..！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T15:29:09.830

我的 LG P520 也有类似的问题。就我而言，问题是由于我将最低 Android 级别设置为 Android 2.3(9) 而手机是 Froyo/Android 2.2(8) 手机。因此，它不是兼容设备，因此不会显示在兼容设备列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:23:08.360

我刚刚在我的两部手机（Nexus 1 和 Amaze 4G）上遇到了同样的问题。经过一些研究，我发现人们试图通过重新启动 Eclipse 和 ADB 来克服这个问题（只有 Eclipse 不会这样做），但我需要重新启动系统和手机才能使其再次工作。如果您可以转到 Eclipse->Window->Open Perspective->DDMS 并查看您的手机是否在您的应用旁边显示红色错误图标。如果是这样，请尝试我上面描述的内容。如果您在 DDMS 透视图中看不到您的设备，则说明您的 USB 驱动程序无法正常工作，需要重新安装

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T18:55:52.520

将您的 PC 与互联网连接可能会安装一些软件以将其与手机调试器连接，并确保您在手机上启用 USB 调试。

# c# - 如何识别哪些单元格/列设置了过滤器？

> ID：10155810
> 
> 赞同：4
> 
> 时间：2012-04-14T17:35:24.220
> 
> 标签：c#, excel, interop, cell

我正在使用 Microsoft Interop 读取数据。

在 excel-sheet 中，多个随机列设置了“过滤器”。如何找出哪些单元格/列设置了过滤器？我想只加载设置了过滤器的列。

这是工作表的样子

第 1-5 行，第 1-10 列 [长文本描述工作表中的数据，我不想加载]

第 1-10 行，第 1 列 [一些数据，未过滤，我不想加载]

第 1-10 行，第 2-15 列 [仅为某些列设置过滤器，我想检测过​​滤器并加载整个列数据]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:58:03.177

*   `Worksheet`接口有一个返回接口的`AutoFilter`属性`AutoFilter`。
*   `AutoFilter`接口有一个返回接口的`Filters`属性`Filters`。
*   该`AutoFilter`接口有一个`Range`属性，它返回被过滤的范围。
*   `Filters`接口是s的集合`Filter`；这些与中的列的顺序相同`AutoFilter.Range`
*   该`Filter`接口有一个`On`属性，指示是否正在过滤列。

# javascript - 防止悬停在活动状态

> ID：10155816
> 
> 赞同：0
> 
> 时间：2012-04-14T17:35:39.383
> 
> 标签：javascript, jquery, html, css, hover

如果通过css已经具有活动状态，如何防止悬停按钮，div，li？

```
#list-of-tests .item-test:hover {
    background-color: #4d5f75;
    border: solid 1px #4d5f75;
}

#list-of-tests .item-test:active {
    background-color: #93c3cd;
    border: solid 1px #93c3cd;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:40:51.680

两种方式：

1)`!important`用于`:active`状态：

```
#list-of-tests .item-test:active {
    background-color: #93c3cd !important;
    border: solid 1px #93c3cd !important;
} 
```

2）指定多个状态：

```
#list-of-tests .item-test:active,
#list-of-tests .item-test:active:hover {
    background-color: #93c3cd;
    border: solid 1px #93c3cd;
} 
```

# android - 如何每小时给接收者一个电话？

> ID：10155818
> 
> 赞同：0
> 
> 时间：2012-04-14T17:35:49.243
> 
> 标签：android, time, broadcastreceiver, call, hour

是否可以仅在每个新小时开始时呼叫接收方？我有正在运行的服务，只有在时间从五点到六点等变化时才需要打电话给接收者？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:41:28.593

您将需要使用`AlarmManager`. 然后安排您希望它通知您的时间。谷歌获取更多示例。

更新：

如果时间是 7.30 ，你可以做的是在下一个小时，在 8.00 唤醒它。然后在下次启动时将其安排为每小时唤醒一次。

```
 Calendar c = Calendar.getInstance(); 
            c.set(Calendar.HOUR,c.get(Calendar.HOUR)+1);
            c.getTimeInMillis(); // use this in alarmmanager for the first time, 60*60*1000 from next time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:48:39.087

您可以为此使用 GregorianCalendar 和 AlarmManager 的组合。您基本上将 1 小时添加到当前时间，然后向下舍入到最接近的小时。在此处查看示例：

```
long UPDATE_INTERVAL = 60 * 60 * 1000; // 1 hour in milliseconds.

Calendar c = new GregorianCalendar(); // Get current time
c.add(Calendar.HOUR_OF_DAY, 1); // Add one hour to the current time.

// Set minutes, second, millisecond to 0, such that we ensure that an update is done
// at the end of the hour.
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
c.set(Calendar.MILLISECOND, 0);

final AlarmManager alarm = (AlarmManager) context.getSystemService(ALARM_SERVICE);

// Set an alarm, starting from the end of the current hour, every hour, to execute
// the update service.
// pIntent is the pending intent you would like activate.
alarm.setRepeating(AlarmManager.RTC, c.getTimeInMillis(), UPDATE_INTERVAL, pIntent); 
```

我假设您知道如何呼叫接收方。

# jquery - 使用删除或隐藏功能

> ID：10155819
> 
> 赞同：-1
> 
> 时间：2012-04-14T17:35:51.663
> 
> 标签：jquery

我了解如何在 jQuery 中使用删除/隐藏功能，但这对我来说有点棘手。

我有一个下拉菜单，其中包含基于其选择的 if 语句。如果选择是 0（这是默认值），它应该删除日期时间文本框的父 div，它具有 和 的`section`类`_100`。

这样，表格中该行的整个部分都将被删除。显然，如果用户选择“否”（值为`0`），则它会保持删除状态，如果用户选择“是”，则它会显示整行，以便用户可以填写评论过期的日期时间。

[http://jsfiddle.net/ZMHkG](http://jsfiddle.net/ZMHkG)

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:49:52.117

我对您提供的 jsFiddle 进行了一些更改，这可以满足您的要求。[您可以在此处](http://jsfiddle.net/ZMHkG/1/)找到更新版本（代码如下）。

我使用[`.closest()`](http://api.jquery.com/closest/)jQuery 函数来获取对`<div>`要隐藏的与`#datetime`输入相关的元素的引用，因为它不是直接父元素。

然后我将`if`语句更改为使用`===`运算符，该运算符在不修改类型的情况下比较值，并将要比较的值更改为字符串`'0'`而不是 int `0`。

我删除了，`else if`因为它似乎没有任何实际用途，您只想在值等于时做某事`'0'`；如果这不正确，您可以随时修改代码来做到这一点。

* * *

HTML：

```
<div class="section _100">
    <label for="comments">Allow Comments</label>
    <div>
        <select name="comments" id="comments">
            <option value="" selected="selected">Please Select An Option</option>
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </div>
</div>
<div class="section _100">
    <label for="datetime">Date Comments Expire</label>
    <div>
        <input id="datetime" type="datetime" name="datetime" />
    </div>
</div> 
```

jQuery：

```
var dt= $("#datetime");
var dtparent = dt.closest('div.section._100');

$('#comments').change(function(){

    if($(this).val()==='0'){
        dt.val(''); //empty value
        dt.prop('disabled', true);
        dtparent.hide();
    }
    else{        
        dtparent.show();
        dt.removeAttr('disabled');                    
        dt.attr('validation','true');
    }    
}); 
```

# java - 确定时间长度是否应以分钟、小时、天为单位

> ID：10155823
> 
> 赞同：-1
> 
> 时间：2012-04-14T17:36:16.697
> 
> 标签：java, datetime, calendar

我必须显示发布消息后经过的时间。我正在编写一个方法，将`publisheddate`其作为输入并返回经过的时间。

```
d1.gettime-pubdate.gettime=time in milliseconds. 
```

我正在写一个 if 条件

```
if time==something concat days ago,
elseif hours ago
elseif min ago
elseif seconds ago
elseif justnow. 
```

if 条件应该包含什么？例如天数应该是`if(time>=1440)`（如果我以分钟为单位计算日期，这可以通过 来完成`time/1000*60*60`）；我应该在几分钟、几小时等时间里做什么？

根据这里给出的建议是我写的。任何改进建议？

```
public static String TimeElapsed(final Date date)

{  

       Date Interval=new Date();
       DateTime Interval1 = new DateTime();//Converting java time to joda time
       Interval1 = new DateTime(date);
       DateTime Interval2 = new DateTime();
       Interval2=new DateTime(Interval);

       //Now we have two joda time instances

       Duration dd=new Duration(Interval1,Interval2);
      //get duration between     given            and current time
       Duration rd1=new Duration(1000);//seconds
       Duration rd2=new Duration(60000);//minutes
       Duration rd7=new Duration(60000*2);//2minutes
       Duration rd3=new Duration(3600000);//hours
       Duration rd6=new Duration(3600000*2);//2hours
       Duration rd4=new Duration(86400000);//days
       Duration rd5=new Duration(86400000*2);//2days
       if(dd.isShorterThan(rd1)){
           String k="just now";
           return k;
       }
       else if(dd.isEqual(rd1)){
           String k="just now";
           return k;

       }
       else if(dd.isLongerThan(rd1)&& dd.isShorterThan(rd2))
       {
           String k=dd.getStandardSeconds()+""+" seconds ago";
           return k;
       }
       else if(dd.isEqual(rd2) || dd.isShorterThan(rd7)){
           String k=dd.getStandardMinutes()+""+" minute ago";
           return k;
       }
       else if(dd.isLongerThan(rd2) && dd.isShorterThan(rd3)){
           String k=dd.getStandardMinutes()+""+" minutes ago";
           return k;
       }
       else if(dd.isEqual(rd3) || dd.isShorterThan(rd6))
       {
           String k=dd.getStandardHours()+""+" hour ago";
           return k;
       }
       else if(dd.isLongerThan(rd3) && dd.isShorterThan(rd4)){
            String k=dd.getStandardHours()+""+"hours ago";
            return k;
       }
       else if(dd.isEqual(rd4) || dd.isShorterThan(rd5) ) {
           String k=dd.getStandardDays()+""+" day ago";
           return k;
       }

       else if(dd.isLongerThan(rd4)){
           String k=dd.getStandardDays()+""+" days ago";
           return k;
       }
       else{
           String k="";
           return k;
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:53:00.900

我同意 wrschneider99 关于使用 Joda-Time 的建议*，*[但](http://www.joda.org/joda-time/)IMO你应该使用 a`Duration`而不是个月。`Interval`

 *我会建议类似：

```
// Assuming this really is a constant...
private static final Duration POST_DURATION = Duration.standardDays(2);

// Then elsewhere...
Instant expiry = post.getTime().plus(POST_DURATION);
// See below
Instant now = clock.now();

if (now.isAfter(expiry)) {
    ...
} 
```

请注意，我将使用某种`Clock`具有“仅用于测试”实现和“基于系统时间”实现的接口，并像任何其他依赖项一样注入它，以实现可测试性。有关这方面的更多信息，请参阅[Kevin Bourrillion 关于纯函数的博客文章](http://smallwig.blogspot.co.uk/2008/04/pure-functions.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:38:56.853

我认为您正在寻找类似 Joda Time 的`Period.normalizedStandard`方法。

请参阅： [句点到字符串](https://stackoverflow.com/questions/1440557/joda-time-period-to-string)*

# java - SQL Server 的 JTDS 问题

> ID：10155829
> 
> 赞同：2
> 
> 时间：2012-04-14T17:37:39.877
> 
> 标签：java, sql-server, tomcat, web, jtds

我在 Tomcat 上部署了两个 Java Web 应用程序，它们使用带有 JTDS 的 Windows 身份验证连接到 SQL Server 数据库。

连接到数据库的第一个应用程序工作正常，但第二个应用程序抛出错误：java.sql.SQLException：I/O 错误：SSO 失败：未加载本机 SSPI 库。检查 java.library.path 系统属性。

似乎第一个应用程序正在挂起 ntlmauth.dll，然后第二个应用程序无法使用它。

欢迎任何帮助。谢谢

# perl - 当我尝试使用 SOAP::Transport::HTTP::Apache 时，为什么 perl 找不到 mod_perl？

> ID：10155830
> 
> 赞同：0
> 
> 时间：2012-04-14T17:37:55.207
> 
> 标签：perl, soap, mod-perl

执行以下代码时`Could not find or load mod_perl at C:\Perl\site\lib\SOAP\Transport\HTTP.pm line 741`，即使我成功安装了模块，我也会收到错误消息`mod_perl2`。

代码：

```
!#/usr/bin/perl 
use SOAP::Transport::HTTP; 
SOAP::Transport::HTTP::Apache -> dispatch_to('WorldFunctions') -> handle; 
package WorldFunctions; sub new { bless {}, shift; } 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:18:24.340

我不太了解这个 SOAP 业务，但在我看来，您安装了`mod_perl2`但代码需要`mod_perl`. 当然，要让它发挥作用，您可能必须重新使用 Apache 1.x，我认为这不是一个理想的选择。

在我看来，您需要[SOAP::Transport::HTTP2](http://search.cpan.org/perldoc/SOAP%3a%3aTransport%3a%3aHTTP2)，但这些模块似乎有点乱。

无论如何，[Apache2::SOAP 的自述文件](http://search.cpan.org/dist/Apache2-SOAP/README)似乎掌握了线索：

> 这是设计用于与 CPAN 版本2 一起使用的`Apache::SOAP`(和)的替代品。它旨在作为一种临时措施，直到发行版实现此功能。请注意，提供的模块 (和) 不会与.`SOAP::Transport::HTTP``mod_perl``SOAP-Lite``Apache2::SOAP``SOAP::Transport::HTTP2``SOAP-Lite`

鉴于上述描述是在 2008 年编写的，您确定`SOAP::Lite`没有实现该功能吗？

# android - 需要一种改变（SQLite）列数据类型的好方法

> ID：10155834
> 
> 赞同：5
> 
> 时间：2012-04-14T17:38:38.733
> 
> 标签：android, sqlite

我有一个带有“int”列的表。在软件升级期间，我想将其更改为“长”数据类型。似乎 SQLite 没有提供更改/修改列属性的选项（在 alter 语句中）。由于我想进行升级，该表可能包含用户不应丢失的数据。所以请给我建议一个在不丢失数据的情况下更改列数据类型属性的好方法。

搜索链接中建议的一种方法是创建一个临时表，从现有表中复制记录，删除现有表，然后重命名临时表。我怀疑这是否有效。

感谢您的帮助！

问候

维维克·拉古纳坦

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T16:17:52.320

我使用以下语句来更改列的类型。

```
CREATE TABLE IF NOT EXISTS **TEMP_TABLE** (id integer primary key autoincrement, **col2change integer not null**, ...)

INSERT INTO TEMP_TABLE SELECT * FROM EXISTING_TABLE

DROP TABLE EXISTING_TABLE

ALTER TABLE TEMP_TABLE RENAME TO EXISTING_TABLE 
```

我将现有表中的 int 类型列更改为整数类型。对于几百行，它相当快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T17:45:19.930

SQLite3 列没有数据类型，只有[关联](http://www.sqlite.org/datatype3.html)——将列类型从 int 更改为 long 没有任何好处。

如果包装程序在将值提供给 SQLite3 之前将其截断，则可以通过编辑模式来解决此问题。这是一项危险的操作，因此请仅在备份数据库后进行。模式存储在表中`sqlite_master`；通常它是只读的，但如果您使用[writable_schema](http://www.sqlite.org/pragma.html#pragma_writable_schema) pragma 启用它，您可以修改它。请注意只进行不会使您的数据无效的更改；您可能会更改`int`为，`long int`因为它们都具有 INTEGER 亲和力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T17:47:06.343

来自 SQLite 文档

> 无法重命名列、删除列或在表中添加或删除约束。

[检查此链接](http://sqlite.org/lang_altertable.html)

请记住，列数据类型在 SQLite 中并不严格。[检查此链接](http://sqlite.org/datatype3.html)

**编辑：** 根据您对另一个答案的评论，我猜您提到的选项 - 通过临时表工作 - 是唯一的选项，这在课程之外效率不高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:44:07.070

您可以添加一个新列，将旧列的值复制到新列，删除旧列，然后将新列重命名为旧名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T17:44:18.360

AFAIK一旦创建和使用表，Android 就无法更改列数据类型**。**实践的方法是创建一个新表并复制您阅读的数据

# c++ - 将整个类定义放在“.h”中会使可执行文件变大吗？

> ID：10155839
> 
> 赞同：2
> 
> 时间：2012-04-14T17:39:00.797
> 
> 标签：c++, compilation, header-files

我们在 a 中定义了一个 C++ 类，并在 a 中`.h`定义了它的方法`.cpp`，但这会使代码看起来不那么有条理。

我想将所有方法的定义放在`.h`文件中的类定义中，但我担心当一个类头文件包含在不同的文件中时，编译器会为相同的方法/函数生成重复的代码。

链接器是否找出并合并重复的代码片段以减小文件大小？

如果不是，是否更好地使用`.hpp`？我听说a`.hpp`是为此而生的。

当我只是将`.h`文件更改为`.hpp`用 G++ 编译的（我不知道为什么）时，它确实会产生细微的差别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:43:39.613

是的。它*可能会*创建更大的可执行文件，这是因为在类本身中定义的成员函数`inline` *默认情况下*，无论您是否在定义中提到关键字`inline`。通常，`inline`函数会导致更大的可执行文件，因为无论从哪里调用它，编译器都会多次定义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:50:21.687

.h 与 .hpp 是 90% 的等价物

```
#include <cmath> vs  #include <math.h> 
```

有些人更喜欢`.hpp`在进行独家 C++ 编程时使用。你会`.hpp`在像`Boost`.

但是，另外 10% 非常重要。例如，取自`Boost`图书馆文档，他们解释了使用`.hpp`over的原因`.h`：

> 大多数 Boost 库都是仅头文件：它们完全由包含模板和内联函数的头文件组成，并且在链接时不需要单独编译的库二进制文件或特殊处理。

如果您遇到这种情况，您应该使用`.hpp`，但这可能会花费更长的编译时间。否则，您可能想要保持`.h`风格。这只是我个人的口味。完全不是`C-oriented`，在我的诚实意见中。

进一步阅读：

[将模板化的 C++ 类拆分为 .hpp/.cpp 文件——这可能吗？](https://stackoverflow.com/questions/1724036/splitting-templated-c-classes-into-hpp-cpp-files-is-it-possible)

[将声明和实现压缩到 HPP 文件中](https://stackoverflow.com/questions/3841238/condensing-declaration-and-implementation-into-an-hpp-file)

[C++ 模板在 .h 中声明，在 .hpp 中定义](https://stackoverflow.com/questions/3526299/c-templates-declare-in-h-define-in-hpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:42:38.793

这里有你需要的一切[：头文件，将所有代码放入其中的利弊](https://stackoverflow.com/questions/193864/pros-cons-of-putting-all-code-in-header-files-in-c)。希望能帮助到你！

> 使用头文件可以缩短编译时间并减少可执行文件。它看起来也相当干净，因为您可以通过查看它的 .h 声明来快速了解您的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T17:42:48.243

你没有什么可担心的。它的分解方式绝对没有区别，是您的文件*描述*的内容使它变大，而不是该描述的展开方式。

.h 或 .hpp 也没有区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T18:11:29.990

要回答有关更大可执行文件的问题，是的，它会使您的可执行文件更大。当您在源文件或头文件中#include 头文件时，预处理器会将#include 替换为头文件的内容。这就是为什么有必要使用以下标头保护来保护您的头文件：

```
#ifndef HDR_H
#define HDR_H

...

#endif 
```

但是，如果将头文件（具有函数定义）包含在属于同一可执行文件的多个文件中，则会出现链接器错误。您最好将类和函数定义和声明分别拆分为 .cpp 和 .hpp 文件。这将大大减少链接器头痛的数量。

此外，.h = .hpp。不管你选择哪一个。个人喜好...

# unit-testing - 在 CakePHP 2.0 的夹具上添加当前时间戳

> ID：10155841
> 
> 赞同：0
> 
> 时间：2012-04-14T17:39:12.207
> 
> 标签：unit-testing, cakephp, timestamp, cakephp-2.0, fixtures

我正在尝试测试模型，我需要在“创建”字段中插入当前时间戳。

我正在使用 Fixture，但使用 'NOW()' 似乎不起作用。它写入 0000-00-00 00:00:00。

这是我的固定记录：

```
public $records = array(
        array(
            'id' => 1,
            'body' => 'esto es una prueba',
            'idUser' => 2,
            'created' => 'NOW()',
            'ip' =>'1.1.1.1',
         )
) 
```

对此有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:03:49.793

作为`$records`类属性，您不能在定义中使用函数。如果你想使用函数（比如你的情况`date()`或类似的），你必须在`init`函数内部这样做：

```
public function init() {
  $this->records = array(
    // ...
    'created' => date('Y-m-d H:i:s'),
    // ...
  );

  // dont forget to call parent::init() if you're overwriting init().
  parent::init();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T10:23:23.890

```
public $records = array(
        array(
            'id' => 1,
            'body' => 'esto es una prueba',
            'idUser' => 2,
            'created' => date('Y-m-d h:i:s'), // in this case `created` must have to be a DATETIME type
            'ip' =>'1.1.1.1',
         )
); 
```

**或者**

```
public $records = array(
            array(
                'id' => 1,
                'body' => 'esto es una prueba',
                'idUser' => 2,
                'created' => time(), // in this case `created` must have to be a TIMESTAMP type
                'ip' =>'1.1.1.1',
             )
    ); 
```

# c# - WPF 应用程序在移动时冻结

> ID：10155848
> 
> 赞同：0
> 
> 时间：2012-04-14T17:40:21.347
> 
> 标签：c#, .net, wpf, screenshot, dispatcher

我只是做了一个简单的应用程序**来定期获取屏幕截图。**

我遇到的主要问题是**当我移动它时应用程序会冻结。**

所以主要目标是消除屏幕截图、线程等的影响。

我把所有代码都放在这里，它可以工作，所以你可以重现它。

这是此代码的一些 .NET 分析信息。

![在此处输入图像描述](../Images/827c0496bb913bbde260285375209087.png)

![在此处输入图像描述](../Images/1a1f562e5737dc93f9bdb9c0f604f098.png)

任何线索我该如何解决？

XAML

```
<Window x:Class="Screenshot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" >
    <Grid Height="Auto">
        <Image Name="Image1"/>
    </Grid>
</Window> 
```

C＃

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();            
        }

        ScreenGrabber grabber;

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            grabber = new ScreenGrabber(5);
            grabber.Changed += new ChangedEventHandler(grabber_Changed);
        }

        void grabber_Changed(object sender, EventArgs e)
        {
            Image1.Dispatcher.Invoke(new Action(() => {
                BitmapSource bs = ((ScreenGrabber)sender).GetImage();
                Image1.Width = bs.Width;
                Image1.Height = bs.Height;
                Image1.Source = bs;
            } ));
        } 
    } 
```

C# DLL

```
namespace MyScreenGrabber
{
    public delegate void ChangedEventHandler(object sender, EventArgs e);

    public class ScreenGrabber : Window
    {
        public event ChangedEventHandler Changed;

        protected virtual void OnChanged(EventArgs e)
        {
            if (Changed != null)
                Changed(this, e);
        }

        byte[] BitmapData { set; get; }

        int Interval { set; get; }

        DispatcherTimer Timer { set; get; }

        public ScreenGrabber(int interval)
        {
            Interval = interval;
            Timer = new DispatcherTimer();
            Timer.Interval = new TimeSpan(0, 0, Interval);
            Timer.Tick += new EventHandler(Timer_Tick);
            Timer.Start();
        }

        void Timer_Tick(object sender, EventArgs e)
        {
            WindowInteropHelper windowInteropHelper = windowInteropHelper = new WindowInteropHelper(this);
            Screen screen = Screen.FromHandle(windowInteropHelper.Handle);

            using (MemoryStream ms = new MemoryStream())
            {
                if (screen != null)
                {
                    using (Bitmap bitmap = new Bitmap(screen.Bounds.Size.Width, screen.Bounds.Size.Height))
                    {
                        using (Graphics g = Graphics.FromImage(bitmap))
                        {
                            g.CopyFromScreen(screen.Bounds.X, screen.Bounds.Y, 0, 0, screen.Bounds.Size, CopyPixelOperation.SourceCopy);
                        }
                        ImageCodecInfo myImageCodecInfo;
                        myImageCodecInfo = GetEncoderInfo("image/jpeg");
                        System.Drawing.Imaging.Encoder myEncoder;
                        myEncoder = System.Drawing.Imaging.Encoder.Quality;
                        EncoderParameters encoderParameters = new EncoderParameters();
                        EncoderParameter encoderParameter = new EncoderParameter(myEncoder, 25L);
                        encoderParameters.Param[0] = encoderParameter;
                        bitmap.Save(ms, myImageCodecInfo, encoderParameters);
                        BitmapData = ms.ToArray();
                        OnChanged(EventArgs.Empty);
                    }
                }
            }
        }

        static ImageCodecInfo GetEncoderInfo(String mimeType)
        {
            int j;
            ImageCodecInfo[] encoders;
            encoders = ImageCodecInfo.GetImageEncoders();
            for (j = 0; j < encoders.Length; ++j)
            {
                if (encoders[j].MimeType == mimeType)
                    return encoders[j];
            }
            return null;
        }

        public BitmapSource GetImage()
        {
            using (MemoryStream ms = new MemoryStream(this.BitmapData))
            {
                var decoder = BitmapDecoder.Create(ms, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
                return decoder.Frames[0];
            }
        }
    }
} 
```

* * *

优化代码：

```
namespace MyScreenGrabber
{
    public delegate void ChangedEventHandler(object sender, EventArgs e);

    public class ScreenGrabber : Window
    {
        public event ChangedEventHandler Changed;

        protected virtual void OnChanged(EventArgs e)
        {
            if (Changed != null)
                Changed(this, e);
        }

        byte[] BitmapData { set; get; }

        int Interval { set; get; }

        WindowInteropHelper windowInteropHelper;
        Screen screen;

        DispatcherTimer Timer { set; get; }

        BackgroundWorker worker = new BackgroundWorker();

        public ScreenGrabber(int interval)
        {
            Interval = interval;

            windowInteropHelper = windowInteropHelper = new WindowInteropHelper(this);
            screen = Screen.FromHandle(windowInteropHelper.Handle);

            isDone = true;

            Timer = new DispatcherTimer();
            Timer.Interval = new TimeSpan(0, 0, Interval);
            Timer.Tick += new EventHandler(Timer_Tick);
            Timer.Start();

            worker.DoWork += new DoWorkEventHandler(worker_DoWork);
            worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
        }

        void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            OnChanged(EventArgs.Empty);
            isDone = true;
        }

        bool isDone;

        void worker_DoWork(object sender, DoWorkEventArgs e)
        {
            GetScreenshot();
        }

        void Timer_Tick(object sender, EventArgs e)
        {
            if (isDone)
            {
                isDone = false;
                worker.RunWorkerAsync();
            }
        }

        void GetScreenshot()
        {
            using (MemoryStream ms = new MemoryStream())
            {
                if (screen != null)
                {
                    using (Bitmap bitmap = new Bitmap(screen.Bounds.Size.Width, screen.Bounds.Size.Height))
                    {
                        using (Graphics g = Graphics.FromImage(bitmap))
                        {
                            g.CopyFromScreen(screen.Bounds.X, screen.Bounds.Y, 0, 0, screen.Bounds.Size, CopyPixelOperation.SourceCopy);
                        }
                        ImageCodecInfo myImageCodecInfo;
                        myImageCodecInfo = GetEncoderInfo("image/jpeg");
                        System.Drawing.Imaging.Encoder myEncoder;
                        myEncoder = System.Drawing.Imaging.Encoder.Quality;
                        EncoderParameters encoderParameters = new EncoderParameters();
                        EncoderParameter encoderParameter = new EncoderParameter(myEncoder, 25L);
                        encoderParameters.Param[0] = encoderParameter;
                        bitmap.Save(ms, myImageCodecInfo, encoderParameters);
                        BitmapData = ms.ToArray();
                    }
                }
            }
        }

        static ImageCodecInfo GetEncoderInfo(String mimeType)
        {
            int j;
            ImageCodecInfo[] encoders;
            encoders = ImageCodecInfo.GetImageEncoders();
            for (j = 0; j < encoders.Length; ++j)
            {
                if (encoders[j].MimeType == mimeType)
                    return encoders[j];
            }
            return null;
        }

        public BitmapSource GetImage()
        {
            using (MemoryStream ms = new MemoryStream(this.BitmapData))
            {
                var decoder = BitmapDecoder.Create(ms, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
                return decoder.Frames[0];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:13:26.337

我相信您可以通过使用后台工作进程执行截取屏幕截图的功能来避免这种情况。

由于后台工作人员使用另一个线程并且主线程继续渲染 UI，它不应该卡住。

编辑：//我在 SO 上发现了这个问题，这可能会澄清[背景工作者 VS 代表的问题](https://stackoverflow.com/questions/4509380/differences-of-delegates-vs-backgroundworker)

祝你好运！

# java - 将项目集合从 jsp 发送到 Java EE 应用程序中的 servlet 的最佳方法是什么？

> ID：10155849
> 
> 赞同：0
> 
> 时间：2012-04-14T17:40:26.987
> 
> 标签：java, jakarta-ee, request

我的目标是确保用户可以输入项目列表（比如说书籍），将插入的值提交给 servlet，而不是在数据库中插入数据。

假设演示文稿包含一个可编辑的表格，其中包含 10 个空行和一些可以添加一些新行的事件。该表具有例如 3 列“代码”、“标题”和“作者”。

我的第一个疑问是：我怎样才能从请求中获得藏书？如果任何表的行如下

```
<tr>
    <td><input type="text" name="code" /></td>
    <td><input type="text" name="title" /></td>
    <td><input type="text" name="author" /></td>
</tr> 
```

我可以使用`request.getParameterValues("code")`，因为任何行都有一个名为“code”的输入，并且同样适用于其他列。最后，我将拥有三个数组，一个包含所有代码，一个包含所有标题，最后一个包含所有作者。但是......当我在网上阅读时，不能保证数组中值的顺序，即 title[] 的第一个值与第一个表行的标题值不匹配，所以我会有一本书标题错误。这是真的吗？如果是这样，我该如何处理这种情况？

第二：如何管理海量数据？

假设列是 100，并且有一个脚本填充了数千行。我应该如何处理这种情况？有人告诉我将数据保存在服务器上的临时文件中，而不是读取文件并将数据保存在数据集中。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:27:56.983

我认为简短的回答是：XML

如果我正在创建并提交一个批次，那么 XML POST 将是可行的方法。

在将它们提交到数据库之前，您的用户实际上希望输入多少行和列？也许您可以使用 Ajax 调用一次提交一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:47:30.173

如果顺序很重要，我建议您在 jsp 中生成表单时将行 id 附加到输入名称，而不是依赖于无保证的数组顺序。

```
<tr>
    <td><input type="text" name="code-1" /></td>
    <td><input type="text" name="title-1" /></td>
    <td><input type="text" name="author-1" /></td>
</tr>
<tr>
    <td><input type="text" name="code-2" /></td>
    <td><input type="text" name="title-2" /></td>
    <td><input type="text" name="author-2" /></td>
</tr> 
```

在您的 servlet 中读取数据时，您可以这样做：

```
int row = 1;
while(true) {
    String code = request.getParameter("code-" + row);
    String title = request.getParameter("title-" + row);
    String author = request.getParameter("author-" + row);
    row++;
    if (code == null && title == null && author == null) { //or modify this to whatever you need
        break;        
    }
    //your process here
} 
```

对于第二个问题，我认为首先将 html 输入表单存储到单独的文件而不是立即处理它并没有真正的好处。实际上，在进入数据库之前需要额外的 IO 将其存储为单独的文件，这当然会减慢速度。

# php - xdebug 和 CentOS 的问题

> ID：10155853
> 
> 赞同：2
> 
> 时间：2012-04-14T17:41:05.113
> 
> 标签：php, linux, eclipse, centos, xdebug

我正在尝试安装 xdebug 并且在 Eclipse 上收到以下错误消息：

> 启动：等待 xdebug 会话

它在 57% 时停止加载。

使用 NetBeans，我得到：

> 等待 xdebug 会话

所以我认为问题在于 CentOS 上的 xdebug 配置

我的`php.ini`配置：

```
zend_extension = /usr/lib64/php/modules/xdebug.so 
[debug]
; Remote settings
xdebug.remote_enable=true
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

`phpinfo()`显示已安装的 xdebug。
我的centOS 版本是6.2。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:37:17.677

我刚刚在我的 Centos 6.3 机器上设置了 NetBeans 7.2.1 和 xdebug 2.1.4，并在 NetBeans 中收到“等待 xdebug 会话”消息。在弄乱了 php 设置并在 phpinfo() 中确认 xdebug 正确数小时后无济于事后，我的解决方案是在 NetBeans 中设置默认浏览器...工具->选项->网络浏览器。将此设置为 Firefox 解决了它！希望这对其他人有帮助...

# jquery - HTML5 视频播放器活动标题

> ID：10155856
> 
> 赞同：2
> 
> 时间：2012-04-14T17:41:43.983
> 
> 标签：jquery, html, html5-video

[http://codecanyon.net/item/html5-video-player-with-playlist-multiple-skins/1382684](http://codecanyon.net/item/html5-video-player-with-playlist-multiple-skins/1382684) 最近我购买了这个播放器，我想添加标题意味着我想让它始终处于活动状态。我该怎么做？

# c# - C# 中的 C++ DLL 和分配内存

> ID：10155862
> 
> 赞同：0
> 
> 时间：2012-04-14T17:43:22.530
> 
> 标签：c#, c++, memory-management, dllimport

我已使用 DLLImport 将 C++ DLL 添加到我的 C# 项目中。工作正常，DLL 内的 buf 分配了超过 2GB 的内存。使用此库运行的 C# 程序失败并崩溃。

如果我在 C++ 中将 dll 库构建为 exe 并运行它，则不会出现内存问题。Libray 在链接器设置中使用“/LARGEADDRESSAWARE”构建。

有没有办法在 C# 中使用这个库而不会崩溃？

谢谢

# jquery - ASP.NET MVC JQuery 数据-val-regex-pattern 安全性

> ID：10155863
> 
> 赞同：0
> 
> 时间：2012-04-14T17:43:31.270
> 
> 标签：jquery, asp.net-mvc, security, validation

已经写了很多关于不只依赖客户端验证的文章。这只是为用户提供方便，并减少了服务器处理。这不是这个问题的内容。

我不知道这是否特定于 ASP.NET MVC 或所有 JQuery 验证，但这就是我的问题的来源。当您使用启用了客户端验证的 ReqularExpressionAttribute 时，HTML 输出类似于： data-val-regex-pattern="^[0-9a-zA-Z]{3,12}$" 只是为了抛出一个基本示例。

这不是相当不安全，明确地放弃你的表达式正在检查和不检查的内容吗？当用户可以轻松准确地阅读验证方案时，似乎更容易利用验证方案中的漏洞。而且它与服务器使用的表达式相同，因此他们也可以看到服务器检查的内容。

**更新**

我的示例表达式不太适合描述问题。这是关于具有非常严格格式的更复杂的数据值，并且您无意中忽略了一些漏洞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:18:12.347

您所描述的是通过默默无闻的安全性。也就是说，如果攻击者不知道如何利用它，它就是安全的。

这不是安全，如果存在漏洞，它就不安全。有句谚语：“默默无闻的安全根本就不是安全”。

它是否使它更容易被剥削？也许，但老实说..解决方案是修复您的代码。

让我们换一种说法，攻击者也可能意外发现您的漏洞。你仍然很脆弱，它仍然一样不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:49:45.663

这可能是一个安全漏洞，具体取决于您要验证的内容。但大多数时候，在 N 层应用程序中，您的前端模型与后端模型不同。你的后端仍然会验证它并抛出适当的异常。

关于不显眼的验证的一些信息：

jQuery 不显眼的验证利用了 data- 属性。

如果您不想要不显眼的验证，您可以在 web.config 中禁用它

尝试去 web.config 并找到这个：

```
<appSettings>
   <add key="ClientValidationEnabled" value="true" />
   <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

并将 UnobtrusiveJavaScriptEnabled 设置为 false。不过，它可能还有更多的钥匙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T03:31:50.343

在问了这个问题一年后，我会对以前的自己说，我认为答案是验证的目的是验证输入的数据类型，而不是验证请求。因此，这不是一个值得担心的问题。

# ios - 访问 MFMessageComposeViewController 的第一响应者

> ID：10155866
> 
> 赞同：1
> 
> 时间：2012-04-14T17:43:57.867
> 
> 标签：ios, cocoa-touch

我有兴趣做类似[的事情](https://stackoverflow.com/questions/1690279/set-first-responder-in-mfmailcomposeviewcontroller)，但是组件子视图`MFMessageComposeViewController`与`MFMailComposeViewController`.

`setRecipients:`我想出了如何将焦点设置到输入，让您通过简单地调用包含空白 NSString 的数组来键入消息文本。但是，我想将非文本从 pasteBoard 粘贴到输入中，所以我不能简单地使用`setBody:`.

**问题：** 我需要做的是获取对实际文本字段的引用，该字段是我的 MFMessageComposeViewController 的当前第一响应者。这样，我就有了一个可以传递给 UIPasteboard`paste:`方法的“发件人”。问题是，我似乎无法像 MFMailComposeViewController 那样走子视图层次结构，所以我无法找出哪个视图是第一响应者。

我什至[试过这个](https://stackoverflow.com/questions/1823317/how-do-i-legally-get-the-current-first-responder-on-the-screen-on-an-iphone)，但如果我做一个视图总是返回为零`[myMessageVC.view findFirstResponder]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:54:43.397

请注意，您不应该将手放在该视图中。Apple 将拒绝您的应用程序这样做。您只能设置正文和收件人。

> 重要 消息组合接口本身不可定制，并且不能由您的应用程序修改。此外**，在呈现界面后，您的应用程序无法对 SMS 内容进行进一步的更改**。用户可以使用界面编辑内容，但**忽略编程更改**。因此，如果需要，您必须在呈现界面之前设置内容字段的值

[http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)

# javascript - 制作所见即所得的文本编辑器

> ID：10155868
> 
> 赞同：1
> 
> 时间：2012-04-14T17:44:08.437
> 
> 标签：javascript, jquery, iframe, wysiwyg, text-editor

我想制作自己的文本编辑器。我正在尝试效仿其他几个成熟的编辑器，并使用隐藏`<textarea>`和可见的`<iframe>`组合。

我在键入`<iframe>`. 我可以让 execCommand 在*contenteditable* `<div>`上工作，例如，使文本**BOLD**但在`<iframe>`.

这是我的 HTML：

```
<html>
<button type="button" class="btn btn-bold">bold</button>
<textarea id="input" name="input" style="display: none;">Start typing..</textarea>
<iframe frameborder="0" src="javascript:true;" style="">  </iframe>
</html> 
```

这是我的 JavaScript：

```
 $(function() {
        var currentBtn;
        $("#input").focus(function() {
            currentBtn = this;
        });
        $(".btn").on( 'click', '.btn-bold', function(){
            var $this=$(this);
            if($this.hasClass("btn-bold")){ document.execCommand('bold', false, null);}
            $(currentBtn).contents().focus();
        });
    }); 
```

我知道我需要对 iframe 文档而不是父文档执行 execCommand，但只是不确定如何执行此操作。目前，此代码不允许我键入 iframe，因此无法测试粗体按钮的效果。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:59:59.733

使用[Rangy](http://code.google.com/p/rangy/)并将`<b>`所选内容环绕为粗体。您也可以使用此方法执行其他任务。

演示：[http ://rangy.googlecode.com/svn-history/r511/trunk/demos/core.html](http://rangy.googlecode.com/svn-history/r511/trunk/demos/core.html)

## 编辑

如何使`iframe`可编辑：

```
window.frames[0].document.getElementsByTagName("body")[0].contentEditable = true;​ 
```

*   [http://jsfiddle.net/DerekL/vpCXN/](http://jsfiddle.net/DerekL/vpCXN/)
*   [http://jsfiddle.net/DerekL/vpCXN/10/](http://jsfiddle.net/DerekL/vpCXN/10/) - 带有粗体按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T08:36:25.193

这可能会有所帮助。但它在 javascript 中，我在 google chrome 中运行它。这是代码：

```
<div>
  <input type="button" onClick="bo()" value="B"> 
  <input type="button" onClick="under()" value="U">
  <input type='button' onClick="f_size()" value="f_size">

<br>
<iframe name="richTextField" id="richTextField" style="border:#000000 1px solid; width:700px; height:300px;"></iframe><br> 
<input type="button" onClick="asd()" value="get_innerhtml"><br> 
<textarea name="myTextArea" id="myTextArea" cols="100" rows="14"></textarea>
</div>
<script>
richTextField.document.designMode = 'On';

function bo(){
    richTextField.document.execCommand('bold',false,null); 
}
function under(){
    richTextField.document.execCommand('underline',false,null);
}
function f_size(){
    var size = prompt('Enter a size 1 - 7', '');
    richTextField.document.execCommand('FontSize',false,size);
}
function asd(){

var text=document.getElementById('richTextField').contentWindow.document.body.innerHTML;
document.getElementById('myTextArea').value=text;
}
</script> 
```

# sbt - 使用“sbt run”设置系统属性

> ID：10155870
> 
> 赞同：19
> 
> 时间：2012-04-14T17:44:38.123
> 
> 标签：sbt

我正在使用一个相当新的 SBT 版本（似乎很难弄清楚这个版本是什么）。我想将系统属性传递给我的应用程序，`sbt run`如下所示：

```
sbt -Dmyprop=x run 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T18:53:48.837

SBT 的运行程序通常不会创建新进程，因此如果您想设置传递的参数，您还必须告诉它这样做。您可以将这样的内容添加到构建设置中：

```
fork := true

javaOptions := Seq("-Dmx=1024M") 
```

[SBT 文档](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking.html)中有更多关于分叉过程的详细信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-18T11:06:35.697

我找到了将其添加到的最佳方法`build.sbt`：

```
// important to use ~= so that any other initializations aren't dropped
// the _ discards the meaningless () value previously assigned to 'initialize'
initialize ~= { _ =>
  System.setProperty( "config.file", "debug.conf" )
} 
```

相关：在更改加载的类型安全配置（我的用例）时，还需要手动包含默认配置。为此，Typesafe 配置的建议`include "application"`还不够，但`include classpath("application.conf")`有效。想提一下，因为其他一些人可能出于完全相同的原因想要覆盖系统属性。

来源：[关于](https://groups.google.com/forum/#!topic/simple-build-tool/o1iGaMi4UeU)sbt 邮件列表的讨论

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-08T09:08:44.563

感谢您的指点，这实际上帮助我解决了一个与 Scala 测试相关的问题。

事实证明，当有子项目（请参阅我的 [代码](http://github.com/massenz/sentinel)）并且某些测试无法获取系统属性时，`sbt` *确实会分叉测试。*

因此`sbt -Dsomething="some value" test`，当无法在系统属性中找到时，某些测试会失败`something`（这恰好是我的 DB URI，所以这很重要！）

这让我发疯了，所以我想我会把它贴在这里以供其他人将来参考（正如@akauppi 正确指出的那样，“其他人”很可能会在几周内成为我！）。

解决方法是将以下内容添加到`build.st`：

`fork in Test := false`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T09:59:47.700

我认为最好是使用 JAVA_OPTS 环境变量：

```
#update the java options (maybe to keep previous options)
export JAVA_OPTS="${JAVA_OPTS} -Dmyprop=x"
#now run without any extra option
sbt run 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T22:06:32.883

您可以在 sbt 命令的末尾传递系统属性：

```
sbt run -Dmyprop=x 
```

如果您必须将程序参数传递到阶段，只需在引号后再次传递系统属性：

```
sbt "runMain com.example.MyClass -p param-value" -Dmyprop=x 
```

# java - java编译中未检查或不安全的操作错误？

> ID：10155871
> 
> 赞同：10
> 
> 时间：2012-04-14T17:44:40.793
> 
> 标签：java

我正在为学校完成一项实验室作业，编译时出现此错误。程序运行良好，有点想修复导致错误的原因。程序代码和完整的错误如下。一如既往的感谢！

错误：注意：F:\Java\Lab 8\Lab8.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

代码：

```
 import java.awt.*;
   import java.awt.event.*;
   import javax.swing.*;
   import javax.swing.event.*;
   import javax.swing.border.*;

   public class Lab8 extends JFrame {
       public Lab8()
           {

           // Create an array of Strings for age ranges
           String[] ageRanges = {"Under 20", "20-29", "30-39", "40-49", "50-59", "60 and Above"};
           JComboBox jcbo = new JComboBox(ageRanges);

           // Create an array of String destinations
           String[] destination = {"Mercury", "Venus", "Moon", "Mars", "Jupiter / Europa", "Saturn / Triton", "Pluto + Sharon"};
           JList jlst = new JList();

           // Declare radio buttons
           JRadioButton jrbMonday, jrbTuesday, jrbWednesday, jrbThursday, jrbFriday;

           // Create a textfield
           JTextField jMsg = new JTextField(10);

           // Create panel to hold label and textbox.
           JPanel p1 = new JPanel();
           p1.setLayout(new BorderLayout(5,0));
           p1.add(new JLabel("Name: "), BorderLayout.WEST);
           p1.add(new JTextField(20), BorderLayout.CENTER);
           jMsg.setHorizontalAlignment(JTextField.LEFT);

           // Create combobox panel.
           JPanel p2 = new JPanel();
           p2.setLayout(new GridLayout(2,0,5,5));
           p2.add(p1, BorderLayout.NORTH);
           p2.add(new JComboBox(ageRanges), BorderLayout.CENTER);
               p2.setBorder(new TitledBorder("Passenger Name & Age Range"));

           //Create listbox panel.
           JPanel p3 = new JPanel();
           p3.setLayout(new GridLayout(1, 0));
           p3.add(new JList(destination));
               p3.setBorder(new TitledBorder("Destinations"));

           // Create a new panel to hold radio buttons.
               JPanel r1 = new JPanel();
           r1.setLayout(new GridLayout(3,2));
           r1.add(jrbMonday = new JRadioButton("Monday"));
           r1.add(jrbTuesday = new JRadioButton("Tuesday"));
           r1.add(jrbWednesday = new JRadioButton("Wednesday"));
           r1.add(jrbThursday = new JRadioButton("Thursday"));
           r1.add(jrbFriday = new JRadioButton("Friday"));
           r1.setBorder(new TitledBorder("Departure Days"));

           // Create a radio button group to group five buttons
           ButtonGroup group = new ButtonGroup();
           group.add(jrbMonday);
           group.add(jrbTuesday);
           group.add(jrbWednesday);
           group.add(jrbThursday);
           group.add(jrbFriday);

           // Create grid to hold contents
           JPanel pMain = new JPanel();
           pMain.setLayout(new BorderLayout(5,0));
           add(r1, BorderLayout.CENTER);
           add(p2, BorderLayout.NORTH);
           add(p3, BorderLayout. EAST);

}

public static void main(String[] args)
       {
           Lab8 frame = new Lab8();
           frame.pack();
           frame.setTitle("Lab 8 Application");
           frame.setLocationRelativeTo(null); // Center the frame
           frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
           frame.setSize(425, 275);
           frame.setVisible(true);
        }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T18:09:30.140

这意味着 Java 编译器已经注意到您的代码存在一些潜在的不安全问题并警告您。这些问题通常非常琐碎，您可以继续处理它们；特别是因为这是学校作业。但是要找到问题，您应该再次编译：`javac -Xlint:unchecked Lab8.java`就像编译器说的那样。

此文件中的问题是您没有指定 JComboBox 和 JList 正在处理的对象的类型。由于您只处理 JComboBox 和 JList 中的字符串，因此您应该指定它。阅读[Java 泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)和[此](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)以获取更多信息。

改变

```
String[] ageRanges = {"Under 20", "20-29", "30-39", "40-49", "50-59", "60 and Above"};
JComboBox jcbo = new JComboBox(ageRanges); 
```

到

```
String[] ageRanges = {"Under 20", "20-29", "30-39", "40-49", "50-59", "60 and Above"};
JComboBox<String> jcbo = new JComboBox<String>(ageRanges); 
```

也改变：

```
p2.add(new JComboBox(ageRanges), BorderLayout.CENTER);
p2.setBorder(new TitledBorder("Passenger Name & Age Range")); 
```

到

```
p2.add(new JComboBox<String>(ageRanges), BorderLayout.CENTER);
p2.setBorder(new TitledBorder("Passenger Name & Age Range")); 
```

终于换了

```
//Create listbox panel.
JPanel p3 = new JPanel();
p3.setLayout(new GridLayout(1, 0));
p3.add(new JList(destination)); 
```

到

```
//Create listbox panel.
JPanel p3 = new JPanel();
p3.setLayout(new GridLayout(1, 0));
p3.add(new JList<String>(destination)); 
```

编辑：

不推荐用于生产代码，但要绕过这些警告，请使用：

```
@SuppressWarnings("unchecked") 
```

只需将其添加到任何导致不安全操作的方法之上。例如，我认为您可以将它放在这段代码中的 main 方法之上，如下所示：

```
@SuppressWarnings("unchecked") 
public static void main(String[] args) {
... 
```

这将抑制警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:52:51.610

为 JComboBox 和 JList 添加通用参数 <String>。

PS：使用带有语法高亮的IDE。例如 - [JetBrains IDEA](http://www.jetbrains.com/idea/download/index.html)有免费的社区版。

# mysql - 具有多个值的 MYSQL CASE THEN 语句

> ID：10155876
> 
> 赞同：18
> 
> 时间：2012-04-14T17:46:01.327
> 
> 标签：mysql

我正在尝试使用`CASE`语句选择多个值。我注意到我们做不到

```
CASE 
    WHEN wall.type="bk" 
    THEN books.id1,books.id2, // and so on
END as column_1, 
```

有没有办法`THEN`处理多个列，还是我们需要简单地编写一堆`CASE THEN`语句？看起来很乱

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T17:54:24.413

不，它只是一个值。此外，使用“多列”并将这些多列命名为 是矛盾的`column_1`，对吧？:)

您可以使用另一列来存储另一个 id（类似情况）并使用空值来表示`else`值，就像您现在正在做的那样。

例子：

```
CASE 
    WHEN wall.type="bk" 
    THEN books.id1
END as column_1,
CASE 
    WHEN wall.type="bk" 
    THEN books.id2
END as column_2 
```

查看[官方文档](http://dev.mysql.com/doc/refman/5.6/en/case-statement.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T18:03:17.380

不， [CASE](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)语句只能返回一个值，所以实现你想要的唯一方法是复制 case ...

数据库服务器应该被优化并且在相同的条件下只执行一次检查......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T12:23:55.520

一切都可以完成，但这始终取决于您想做什么。下面我将在您必须将数据作为数组并执行您想要的操作之后立即向您展示一个工作示例。

```
CREATE TABLE wall (`ident` int,`type` varchar(2), `order` int);
INSERT INTO wall (`ident`, `type`, `order`) VALUES
    (40,'bk', 1),
    (41,'bk', 5),
    (42,'rt', 2),
    (43,'bk', 3),
    (44,'rt', 1);

CREATE TABLE books (`ident` int,`id1` int, `time` varchar(8), `id2` int);
INSERT INTO books (`ident`, `id1`, `time`, `id2`) VALUES
    (40, 10, '18:07:00', 20),
    (43, 11, '05:00:00', 21),
    (44, 12, '21:01:00', 22),
    (41, 13, '10:00:00', 23),
    (42, 14, '23:10:00', 24);
#--------------------------
SELECT 
  CASE 
    WHEN wall.type='bk' 
    THEN  CONCAT(books.id1,'-',books.id2) 
 END AS column_1

FROM wall JOIN books ON books.ident = wall.ident GROUP BY wall.ident ORDER BY wall.ident ASC; 
```

打印：

```
 column_1
1   10-20
2   13-23
3   NULL
4   11-21
5   NULL 
```

通过此链接实施的解决方案： [http ://rextester.com/LHPI38373](http://rextester.com/LHPI38373)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T11:09:17.833

根据文档[mysql_doc](https://dev.mysql.com/doc/refman/8.0/en/case.html)；你可以使用你可以使用 case 的其他语法来满足你的需要。

```
case
 WHEN FIND_IN_SET(edu, "1,1st,2,2nd,3,3rd,4,4th,5,5th,pri,primary,primery") THEN
  SET memEdu = "Primary";
 WHEN FIND_IN_SET(edu, "intermediate,inter,f.a,fa,fac,f.a.c,f.sc,fsc,1rd year,2rd year,3rd year") THEN
  SET memEdu = "Intermediate";
End case; 
```

# python - 动态类型设计：处理列表的递归是一个好的设计吗？

> ID：10155877
> 
> 赞同：1
> 
> 时间：2012-04-14T17:46:15.237
> 
> 标签：python, list, coding-style, dynamic-typing

由于缺乏维护动态类型代码的经验，我正在寻找处理这种情况的最佳方法：

（python 中的示例，但可以使用任何动态类型语言）

```
def some_function(object_that_could_be_a_list):
     if isinstance(object_that_could_be_a_list, list):
          for element in object_that_could_be_a_list:
              some_function(element)
     else:
          # Do stuff that expects the object to have certain properties 
          # a list would not have 
```

我对此感到很不安，因为我认为一个方法应该只做一件事，而且我认为它没有应有的可读性。因此，我很想创建三个函数：第一个函数将获取任何对象并在其他两个函数之间“排序”，一个用于列表，另一个用于“简单”对象。再说一次，这会增加一些复杂性。

什么是这里最“可持续”的解决方案，以及保证易于维护的解决方案？对于那些我不知道的情况，python 中有没有成语？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T17:49:15.000

不要键入 check - 做你想做的事，如果它不起作用，它会抛出一个你可以捕获和管理的异常。

蟒蛇的口头禅是'[请求宽恕，而不是许可](https://en.wikipedia.org/wiki/Python_syntax_and_semantics#Exceptions)'。类型检查需要额外的时间，大多数时候，它是没有意义的。在鸭式环境中它也没有多大意义 - 如果它有效，谁在乎它为什么是类型？当其他可迭代对象也可以工作时，为什么要将自己限制在列表中？

例如：

```
def some_function(object_that_could_be_a_list):
    try:
        for element in object_that_could_be_a_list:
            some_function(element)
    except TypeError:
        ... 
```

这更具可读性，将在更多情况下工作（如果我传入任何其他不是列表的可迭代对象，则有很多）并且通常会更快。

请注意，您混淆了术语。Python 是[动态类型](https://en.wikipedia.org/wiki/Dynamic_typing#Dynamic_typing)的，但不是[弱类型](https://en.wikipedia.org/wiki/Weak_typing)的。弱类型化意味着对象根据需要更改类型。例如，如果您添加一个字符串和一个 int，它会将字符串转换为一个 int 来进行加法。Python 不*这样*做。动态类型意味着您不为变量声明类型，它可能在某些时候包含一个字符串，然后是一个 int。

[鸭子类型](https://en.wikipedia.org/wiki/Duck_typing)是一个术语，用于描述对象的使用而不关心它的类型。如果它像鸭子一样走路，像鸭子一样嘎嘎叫——它可能是一只鸭子。

现在，这是一般情况，如果您认为您的代码会比“正确”更频繁地获得“错误”类型的对象，那么您可能需要输入检查速度。请注意，这种情况很少见，最好避免过早优化。通过捕获异常来做到这一点，然后进行测试——如果你发现它是一个瓶颈，那么就进行优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:22:46.717

我倾向于这样做，而不是递归地这样做：

```
def foo(x):
    if not isinstance(x, list):
        x = [x]
    for y in x:
        do_something(y) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T18:00:57.563

一种常见的做法是通过对不同类型的输入使用不同的参数来实现多接口。

```
def foo(thing=None, thing_seq=None):
    if thing_seq is not None:
        for _thing in thing_seq:
            foo(thing=_thing)
    if thing is not None:
        print "did foo with", thing 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T17:52:16.570

在这种情况下，您可以使用装饰器使其更易于维护：

```
from mm import multimethod

@multimethod(int, int)
def foo(a, b):
    ...code for two ints...

@multimethod(float, float):
def foo(a, b):
    ...code for two floats...

@multimethod(str, str):
def foo(a, b):
    ...code for two strings... 
```

# lucene - Lucene：如何在查询时为不同的搜索词分配权重？

> ID：10155879
> 
> 赞同：0
> 
> 时间：2012-04-14T17:46:36.000
> 
> 标签：lucene

我有一个包含超过 100 万个文档的 Lucene 索引语料库。我正在使用 Lucene java API 进行查询来搜索命名实体，例如“Susan Witting”。例如，我还想通过搜索“Sue Witting”来扩展我的查询，但希望该词的权重低于主要查询词。

我该怎么做呢？我在 Lucene 手册中找到了有关增强选项的信息。但它似乎是在索引中设置的，它需要字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:55:29.843

您可以独立提升每个查询子句。请参阅[查询 Javadoc](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/Query.html#setBoost%28float%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T01:38:22.673

如果你想给一个词的词赋予不同的权重**。**然后

`Query#setBoost(float)`

没用。更好的方法是：

```
Term term = new Term("some_key", "stand^3 firm^2 always"); 
```

这允许对同一术语查询中的单词赋予不同的权重。在这里，单词`stand`boosted by 3 but `always`is 具有默认的 boost 值。

# rest - 引用转储的 LinkedIn API 数据

> ID：10155880
> 
> 赞同：1
> 
> 时间：2012-04-14T17:46:39.370
> 
> 标签：rest, python-2.7, linkedin, pickle

这里有一个我不知道如何解决的快速问题，并认为你们可以给我一个提示，告诉我要走哪条路。我已经使用 XML 和 JSON 格式的 LinkedIn REST API 成功提取了我的所有连接数据并将它们转储（前者使用 cPickle 插件）。问题是我需要引用数据中的单个字段，因此决定使用 XML，因为它似乎是迄今为止最容易使用的字段。当我引用 .pickle 文件中的特定字段时，它给了我以下错误：

```
AttributeError: 'str' object has no attribute 'location' 
```

但是，使用记事本打开 pickle 文件，我可以看到我的所有连接都将其位置字段存储为 XML 格式。这很奇怪！

这是我的推荐代码：

```
import cPickle

connections_data = 'linkedin_connections.pickle'
response = cPickle.load(open(connections_data))

print response

locations = [ec.location for ec in response] 
```

我设置了一个打印功能来显示我的文件中的内容，并且所有数据都显示为使用 REST API 的人员调用的普通 XML 输出。XML 数据如下所示：

```
<person>
<id>ID_number</id>
<first-name>blah</first-name>
<last-name>blah</last-name>
<headline>Business Development and Sales Executive at Computaris</headline>
<picture-url>picture_url</picture-url>
<api-standard-profile-request>
  <url>profile_request</url>
  <headers total="1">
    <http-header>
      <name>x-li-auth-token</name>
      <value>name</value>
    </http-header>
  </headers>
</api-standard-profile-request>
<site-standard-profile-request>
  <url>request_url</url>
</site-standard-profile-request>
<location>
  <name>location</name>
  <country>
    <code>country_code</code>
  </country>
</location>
<industry>industry</industry> 
```

任何帮助都感激不尽。

# c++ - OpenCV 平方差之和速度

> ID：10155882
> 
> 赞同：6
> 
> 时间：2012-04-14T17:46:49.027
> 
> 标签：c++, algorithm, computer-vision

我一直在使用openCV进行一些块匹配，我注意到它的平方差之和与这样的直接for循环相比非常快：

```
int SSD = 0;
for(int i =0; i < arraySize; i++)
    SSD += (array1[i] - array2[i] )*(array1[i] - array2[i]); 
```

如果我查看源代码以了解繁重的工作发生在哪里，OpenCV 的人们让他们的 for 循环在循环的每次迭代中一次执行 4 次平方差计算。进行块匹配的函数如下所示。

```
int64
icvCmpBlocksL2_8u_C1( const uchar * vec1, const uchar * vec2, int len )
{
int i, s = 0;
int64 sum = 0;

for( i = 0; i <= len - 4; i += 4 ) 
{   
    int v = vec1[i] - vec2[i];
    int e = v * v;

    v = vec1[i + 1] - vec2[i + 1]; 
    e += v * v;
    v = vec1[i + 2] - vec2[i + 2];
    e += v * v;
    v = vec1[i + 3] - vec2[i + 3];
    e += v * v;
    sum += e;
}

for( ; i < len; i++ )
{
    int v = vec1[i] - vec2[i];

    s += v * v;
}

return sum + s;
} 
```

此计算适用于无符号 8 位整数。他们在此函数中对 32 位浮点数执行类似的计算：

```
double
icvCmpBlocksL2_32f_C1( const float *vec1, const float *vec2, int len )
{
double sum = 0;
int i;

for( i = 0; i <= len - 4; i += 4 )
{
    double v0 = vec1[i] - vec2[i];
    double v1 = vec1[i + 1] - vec2[i + 1];
    double v2 = vec1[i + 2] - vec2[i + 2];
    double v3 = vec1[i + 3] - vec2[i + 3];

    sum += v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3;
}
for( ; i < len; i++ )
{
    double v = vec1[i] - vec2[i];

    sum += v * v;
}
return sum;
} 
```

我想知道是否有人知道像这样将循环分成 4 个块是否可以加快代码速度？我应该补充一点，这段代码中没有发生多线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:51:28.260

我的猜测是，这只是[展开循环](http://en.wikipedia.org/wiki/Loop_unwinding)`len`的一个简单实现——它在循环的每次传递中节省了 3 次加法和 3 次比较，例如，如果检查涉及缓存未命中，这可以节省很多。缺点是这种优化增加了代码复杂性（例如，如果长度不能被 4 整除，则在末尾额外的 for 循环以完成剩余 len % 4 个项目的循环），当然，这是一个依赖于架构的优化其改进幅度将因硬件/编译器/等而异...

尽管如此，与大多数优化相比，它很容易遵循，并且无论架构如何，都可能会导致某种性能提升，因此将其投入其中并希望获得最好的结果是低风险的。由于 OpenCV 是一个得到很好支持的代码块，我确信有人对这些代码块进行了检测，并发现它们非常值得——正如您自己所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:07:01.443

您的代码有一个明显的优化，即：

```
int SSD = 0;
for(int i = 0; i < arraySize; i++)
{
    int v = array1[i] - array2[i];
    SSD += v * v;
} 
```

# java - 在 Android 搜索上搜索 SQLite 数据库

> ID：10155884
> 
> 赞同：0
> 
> 时间：2012-04-14T17:46:58.303
> 
> 标签：java, android, sqlite, search

在我的 ContentProvider 中导致错误的方法

```
public static Cursor getSuggestions(String query) {
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    db.beginTransaction();
    try {
        String selection = Formula.FORMULA_NAME + " LIKE %?%";
        String[] selectionArgs = { query + "*" };
        Cursor cursor = dbHelper.getReadableDatabase().query(
                FORMULA_TABLE_NAME,
                new String[] { BaseColumns._ID,
                        SearchManager.SUGGEST_COLUMN_TEXT_1, 
                        BaseColumns._ID + " AS " + SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID 
                        }, 
                        selection,
                selectionArgs, null, null, null);
        db.setTransactionSuccessful();
        return cursor;
    } catch (SQLiteException e) {
    } finally {
        db.endTransaction();
    }
    throw new SQLException("Failed to begin transaction");
} 
```

数据库创建：

```
db.execSQL("CREATE TABLE " + FORMULA_TABLE_NAME + " (" +
                BaseColumns._ID + " INTEGER PRIMARY KEY AUTOINCREMENT," +
                SearchManager.SUGGEST_COLUMN_TEXT_1 + " TEXT," +
                Formula.CATEGORY + " TEXT" +
                ");"); 
```

使用的常量：

```
 public static final String FORMULA_NAME = SearchManager.SUGGEST_COLUMN_TEXT_1;
    public static final String CATEGORY = "category"; 
```

问题是，在我的方法中，事务不成功，因为它引发了错误：`throw new SQLException("Failed to begin transaction");`我正在尝试做的是搜索数据库作为搜索的一部分。当用户激活搜索框时，我对其进行了设置，以便此方法应根据其名称返回带有可疑项目的光标。通过调试，我推断问题出在我的 Content Provider 内部的搜索方法上。有什么解决方案或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:32:30.807

我猜这条线`throw new SQLException("Failed to begin transaction");`应该在你的 catch 块内。

如果我们将所有内容简化为：

```
public static Cursor getSuggestions(String query) {
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    String selection = Formula.FORMULA_NAME + " LIKE %?%";
    String[] selectionArgs = { query + "*" };
    Cursor cursor = db.query(
            FORMULA_TABLE_NAME,
            new String[] { BaseColumns._ID,
                    SearchManager.SUGGEST_COLUMN_TEXT_1, 
                    BaseColumns._ID + " AS " + SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID 
                    }, 
            selection,
            selectionArgs, null, null, null);
    return cursor;
} 
```

# javascript - 在整个页面中使用 JS 变量（来自 HTML 表单）

> ID：10155887
> 
> 赞同：2
> 
> 时间：2012-04-14T17:47:25.447
> 
> 标签：javascript, html, forms, variables, dom-manipulation

我正在尝试获取用户输入，将其转换为 JS 变量，并在 html 中的多个位置使用它。

我在用户输入输入后立即包含了一个警报功能并且该功能有效，但我无法在底部显示变量。

这是代码：

```
<body>
 <div class="hero-unit">
   <h1> Title </h1>
     <p> This form description </p>  
      <form class="well" name="formInput" action= "#">
       <label>Input</label>
        <input Id="txtvarInput" class="span3" style="margin: 0pt auto;" type="text" placeholder="AAA, BBB, CCC..." data-provide="typeahead" data-items="10" data-source="[&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;,&quot;III&quot;,&quot;JJJ&quot;,&quot;KKK&quot;,&quot;LLL&quot;]"/>               
       </label>
      <div class="form-actions" "span3">
        <input name="submit" type="submit" class="btn" value="Select" onclick="alert('you chose ' + theInput.value)"/>
         <script language="javascript" type="text/javascript">
          var theInput = document.getElementById('txtvarInput');
         </script>
       </div>
     </form>
   </div>

<div class="page-header">
  <h1>Input:
    <script language="javascript" type="text/javascript">
      document.write(theInput.value);
    </script>
 </h1>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:55:43.647

在一个`document.onload`函数中，我会输入以下内容：

```
theInput.onchange = function(event){
  document.getElementById('h1Id').innerHTML = theInput.value
} 
```

大概您希望每次用户更改输入时更新 HTML？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:05:54.940

JavaScript 的工作方式与您想象的有些不同。

当你说...

```
document.write(theInput.value); 
```

...就在某处某个 html 元素的中间，它只在页面首次呈现时调用一次。

如果要在文本输入更改或单击按钮时调用它，则需要将其放入函数中，并在某些元素上发生某些事件时调用该函数。

请参阅此链接以了解事件：[http ://www.w3schools.com/js/js_events.asp](http://www.w3schools.com/js/js_events.asp)

**但是**，`document.write()`有点不同，当从函数调用时，它将**覆盖整个页面**！

所以......在这种情况下，您需要将文本元素“附加”到`<h1>`您尝试更新的元素。

请参阅此链接以了解有关文档对象模型 (DOM) 及其元素的更多信息：http: [//www.w3schools.com/jsref/dom_obj_element.asp](http://www.w3schools.com/jsref/dom_obj_element.asp)

一旦你熟悉了这些原则，你就会想通过查看一个框架来做这些事情，比如 jQuery，让你的生活更轻松，你的代码对跨浏览器更友好：http: [//jquery.com/](http://jquery.com/)

**更新（附加值）：** 对于那些感兴趣的人，今天在“无页”、基于 JavaScript 的 Web 应用程序中使用 AngularJS (http://angularjs.org/) 可以很容易地完成类似这里所问的事情。请阅读文档以及可以使用该技术的适当环境。从常见问题解答 (http://docs.angularjs.org/misc/faq) 开始，然后进入视频 (http://www.youtube.com/user/angularjs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:03:38.097

单击按钮后应进行更新。

```
<html>
<body>
 <div class="hero-unit">
   <h1> Title </h1>
     <p> This form description </p>  
      <form class="well" name="formInput" action= "#">
       <label>Input</label>
        <input Id="txtvarInput" class="span3" style="margin: 0pt auto;" type="text" placeholder="AAA, BBB, CCC..." data-provide="typeahead" data-items="10" data-source="[&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;,&quot;III&quot;,&quot;JJJ&quot;,&quot;KKK&quot;,&quot;LLL&quot;]"/>               
       </label>
      <div class="form-actions" "span3">

        // UPDATED HERE
        <input name="submit" type="submit" class="btn" value="Select" 
          onclick="alert('you chose ' + theInput.value);     
          document.getElementById('inputresult').innerHTML = theInput.value;"/>

         <script language="JavaScript" type="Text/JavaScript">
          var theInput = document.getElementById('txtvarInput');
         </script>
       </div>
     </form>
   </div>

<div class="page-header">
  <h1 id="myh1">Input:</h1>

   <!-- UPDATED HERE -->
    <div id="inputresult">

    </div>
 </h1>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T18:09:32.423

1.  提供语义标记，包括值的占位符，例如

    ```
    Input: <span class="inp-reflector"></span>

    <!-- Or, for HTML5+ -->
    Input: <output class="inp-reflector"></output> 
    ```

2.  以程序方式将一个或多个事件处理程序附加到您的输入：

    ```
    var inp = document.querySelector('#input-id');
    inp.addEventListener('input',update,false);
    inp.addEventListener('change',update,false); 
    ```

3.  让您的事件处理程序检索输入的值并更改您的页面：

    ```
    function update(evt){
      var changedElement = evt.target;
      var newValue = changedElement.value;
      var outputs  = document.querySelectorAll('.inp-reflector');
      outputs.forEach(function(out){
        out.innerHTML = newValue;
      });
    } 
    ```

*答案有意仅使用现代浏览器的 JavaScript 功能。*

* * *

对于通用反射系统：

```
<input class="reflectable" data-reflect-to=".bar">
…
document.querySelectorAll('.reflectable').forEach(function(el){
  el.addEventListener('change',reflect,false);
  el.addEventListener('input',reflect,false);
});

function reflect(evt){
  var outSelector = evt.getAttribute('data-reflect-to');
  document.querySelectorAll(outSelector).forEach(function(o){
    o.innerHTML = evt.target.value;
  });
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-14T17:58:52.913

像下面这样的内联脚本将在浏览器呈现它们后立即执行。因此，只要浏览器在用户输入任何输入之前呈现该特定脚本标记和方式，下面的脚本就会立即执行，因此您创建的全局变量不会填充用户输入的任何数据。您需要在页面上的提交按钮上附加一个事件，该事件设置全局变量并将其显示在页面上。

```
<div class="page-header">
  <h1>Input:
    <script language="JavaScript" type="Text/JavaScript">
      document.write(theInput.value);
    </script>
 </h1>
</div> 
```

# c++ - 1D 矢量 - 3D 索引

> ID：10155893
> 
> 赞同：2
> 
> 时间：2012-04-14T17:48:46.827
> 
> 标签：c++, arrays

我使用 1D 向量来表示 3D 数据结构，索引为 0 到 x*y*z，其中 x、y 和 z 是每个方向上的单元格数。

为了索引特定的单元格 [xi][yi][zi]，我使用：

```
index = xi + x*yi + x*y*zi ; 
```

我的问题是，我无法弄清楚如何走另一条路！

例如，我想获得索引 43 中表示的各个坐标。

我想我已经弄清楚了如何获得 xi：

```
xi = index % x ; 
```

但我不能为我的生活得到其他人......：/

编辑：嗯。这是正确的吗？

```
xi = index % x;
yi = ((index - xi)/x) % y;
zi = ((index - xi - x*yi) / x) / y ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T17:57:37.940

试试这个：

```
xi =   index % x;
yi =  (index / x) % y;
zi = ((index / x) / y) % z; 
```

正如人们所期望的那样，这很容易概括。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:54:38.383

一些模运算应该可以解决问题。

```
 index % x = (xi + x*yi + x*y*zi) % x = xi % x,
    but 0 <= xi < x therefore xi % x = xi. 
```

然后对于易：

```
 (index / x) % y = yi. 
```

然后最后：

```
 index / (x * y) = zi. 
```

**编辑：**

在代码中（与上面的数学相反）它将是：

```
 xi = index % x;
    yi = (index / x) % y;
    zi = index / (x * y); 
```

# c# - “404”用于 WCF Web 服务的 PUT 方法？

> ID：10155894
> 
> 赞同：2
> 
> 时间：2012-04-14T17:48:48.230
> 
> 标签：c#, wcf, web-services, rest, http-status-code-404

我有一个 PUT 请求，它从我的客户端返回 404 错误，代码如下所示：

```
 {
        string uriupdatestudent = string.Format("http://localhost:8000/Service/Student/{0}/{1}/{2}", textBox16.Text, textBox17.Text, textBox18.Text);
        byte[] arr = Encoding.UTF8.GetBytes(uriupdatestudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriupdatestudent);
        req.Method = "PUT";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        using (Stream reqStrm = req.GetRequestStream())
        {
            reqStrm.Write(arr, 0, arr.Length);
            reqStrm.Close();
        }
        using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
        {
            MessageBox.Show(resp.StatusDescription);
            resp.Close();
        }
    } 
```

OperationContract 和 Service 如下所示：

```
 [OperationContract]
    [WebInvoke(Method = "PUT", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student")]
    void UpdateStudent(Student student);

    public void UpdateStudent(Student student) 
    {
        var findStudent = students.Where(s => s.StudentID == student.StudentID).FirstOrDefault();

        if (findStudent != null)
        {
            findStudent.FirstName = student.FirstName;
            findStudent.LastName = student.LastName;
        }

    }
[DataContract(Name="Student")]
public class Student
{
    [DataMember(Name = "StudentID")]
    public string StudentID { get; set; }
    [DataMember(Name = "FirstName")]
    public string FirstName { get; set; }
    [DataMember(Name = "LastName")]
    public string LastName { get; set; }
    [DataMember(Name = "TimeAdded")]
    public DateTime TimeAdded;
    public string TimeAddedString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:01:51.673

所以为了回答我的问题，我必须做两件事：

我必须更改我的操作合同，以便它可以接受输入字符串 studentID，然后我可以删除学生集合。

```
 [OperationContract]
    [WebInvoke(Method = "PUT", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student/{studentID}")]
    void UpdateStudent(string studentID, Student student);

    public void UpdateStudent(string studentID, Student student) 
    {
        var findStudent = students.Where(s => s.StudentID == studentID).FirstOrDefault();

        if (findStudent != null)
        {
            findStudent.FirstName = student.FirstName;
            findStudent.LastName = student.LastName;
        }

    } 
```

然后从客户端我不得不返回使用字符串生成器方法以将集合作为 xml 发送。

```
 {
        string uriupdatestudent = string.Format("http://localhost:8000/Service/Student/{0}", textBox16.Text);
        StringBuilder sb = new StringBuilder();
        sb.Append("<Student>");
        sb.AppendLine("<FirstName>" + this.textBox17.Text + "</FirstName>");
        sb.AppendLine("<LastName>" + this.textBox18.Text + "</LastName>");
        sb.AppendLine("</Student>");
        string NewStudent = sb.ToString();
        byte[] arr = Encoding.UTF8.GetBytes(NewStudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriupdatestudent);
        req.Method = "PUT";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show(resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

有人在此之前提出了答案，他是正确的，所以我要感谢您，您的答案将被接受！（如果它没有被删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:40:18.123

根据您调用的 uri，您的服务是否能够在传递给它的额外路由信息的情况下解决它？

您可以尝试更新服务方法签名以接受和映射即将到来的 uri 参数：

```
[WebInvoke(Method = "PUT", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student/{fname}/{lname}/{id}")]
    void UpdateStudent(string fname, string lname, string id); 
```

否则，您可以将客户端上的 Student 对象序列化为 XML，并将其与请求正文中的请求一起发送。在这种情况下，您只需向[http://localhost:8000/Service/Student](http://localhost:8000/Service/Student)发出请求，WCF 会将传入请求的主体反序列化为相应的 Student 对象。

# facebook-like - 在我的网站上添加一个赞按钮

> ID：10155895
> 
> 赞同：0
> 
> 时间：2012-04-14T17:49:01.397
> 
> 标签：facebook-like

我在我的一些网站页面中添加了一个 facebook Like 按钮。除了主页之外，所有这些都可以工作，我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:02:16.343

如果没有看到您的“主页”的一些示例代码，几乎不可能回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:20:33.967

Check your page with [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

If the response code isn't 200 or your meta tags don't appear properly or whatever else, at least you'll know where to look. Keep in mind that when you click like, Facebook makes a request to your page. Make sure you let Facebook do that (don't block/Redirect the Facebook crawler).

Edit: Sometimes, simply adding your URL and testing on the link above solves the problem. This is if you had a problem with the site when you first added it and meanwhile Facebook cached it as problematic. Debugging it will clear the Facebook cache for that URL.

# java - android java运行活动而不重新启动它

> ID：10155900
> 
> 赞同：0
> 
> 时间：2012-04-14T17:50:06.217
> 
> 标签：java, android

我创建了一个简单的应用程序，它将登录到数据库并从中获取数据。但是现在我发现了一个问题：如果你第一次写错了登录数据，第二次尝试登录就不行了。你必须重新启动它。

我认为这段代码有问题：**EDITED**

```
public class MyMoodleApplicationActivity extends Activity {
/** Called when the activity is first created. */
EditText username;
EditText password;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    username = (EditText)findViewById(R.id.username);
    password = (EditText)findViewById(R.id.password);
    final Button loginButton = (Button)findViewById(R.id.login);      
    loginButton.setOnClickListener(loginListener);
    final Button clearButton = (Button)findViewById(R.id.clear);
    clearButton.setOnClickListener(clearListener);
}
private OnClickListener loginListener = new OnClickListener(){

    public void onClick(View v){
        String usr = username.getText().toString();
        String psw = password.getText().toString();
        System.out.println("Username: "+usr);
        System.out.println("Password: "+psw);
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("usern",""+usr));
        nameValuePairs.add(new BasicNameValuePair("passw",""+psw));
        InputStream is = null; 
        String result = "";
        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://ik.su.lt/*****");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }
        //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();

                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        String usernameFromDB = "";
        String firstnameFromDB = "";
        String lastnameFromDB = "";
        String emailFromDB = "";
        String phoneFromDB = "";
        String skypeFromDB = "";
        String cityFromDB = "";
        String descriptionFromDB = "";
        try{
                JSONArray jArray = new JSONArray(result);
                for(int i=0;i<jArray.length();i++){
                        JSONObject json_data = jArray.getJSONObject(i);
                        usernameFromDB = json_data.getString("username");
                        firstnameFromDB = json_data.getString("firstname");
                        lastnameFromDB = json_data.getString("lastname");
                        emailFromDB = json_data.getString("email");
                        phoneFromDB = json_data.getString("phone1");
                        skypeFromDB = json_data.getString("skype");
                        cityFromDB = json_data.getString("city");
                        descriptionFromDB = json_data.getString("description");

                        System.out.println(usernameFromDB+ "  " + firstnameFromDB+"  "+lastnameFromDB+"  "
                                + emailFromDB + "  " + phoneFromDB +"  " + skypeFromDB+ "  " + cityFromDB + "  "+
                                descriptionFromDB);
                }
        }
        catch(JSONException e){
            AlertDialog alertDialog = new AlertDialog.Builder(MyMoodleApplicationActivity.this).create();
            alertDialog.setTitle("Klaida!");
            alertDialog.setMessage("Toks vartotojas neegzistuoja");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    return;
                }
            });
            alertDialog.show();
                Log.e("log_tag", "Error parsing data "+e.toString());
        }
        if(usr.length()== 0){
            AlertDialog alertDialog = new AlertDialog.Builder(MyMoodleApplicationActivity.this).create();
            alertDialog.setTitle("Klaida!");
            alertDialog.setMessage("Jūs neįvedėte slapyvardžio");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    return;
                }
            });
            alertDialog.show();
        }
        else if(psw.length()==0){
            AlertDialog alertDialog = new AlertDialog.Builder(MyMoodleApplicationActivity.this).create();
            alertDialog.setTitle("Klaida!");
            alertDialog.setMessage("Jūs neįvedėte slaptažodžio");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    return;
                }
            });
            alertDialog.show();
        }
        else if (usr.equals(usernameFromDB)){
            Intent in = new Intent(getApplicationContext(), LoggedUser.class);
            in.putExtra("firstname", firstnameFromDB);
            in.putExtra("lastname", lastnameFromDB);
            in.putExtra("email", emailFromDB);
            in.putExtra("phone1", phoneFromDB);
            in.putExtra("skype", skypeFromDB);
            in.putExtra("city", cityFromDB);
            in.putExtra("description", descriptionFromDB);

            startActivity(in);
            finish();
    }
}};

private OnClickListener clearListener = new OnClickListener(){
    @Override
    public void onClick(View v){
        username.setText("");
        password.setText("");
    }
}; 
```

在这些 if 语句中，我检查您输入的用户名和密码是否为空用户名不等于数据库中的用户名。如何重写它可以工作的代码？

**已编辑：** 我在 DB 中有用户 john，但如果我在登录字段中写入 John 并按下登录按钮，则不会说没有 John 用户。在 LogCat 中，我看到读取了 json 流。有没有办法设置大写和小写字母不同的规则？

# java - 如何修复 AdMob 使我的 Android 应用程序崩溃的问题？

> ID：10155901
> 
> 赞同：0
> 
> 时间：2012-04-14T17:50:11.070
> 
> 标签：java, android, admob

AdMob 已经在我的 Android 应用中运行了一段时间，直到最近我尝试更新。我试图更新应用程序本身，但我看到它一直在崩溃。

我尝试调试发生了什么。删除广告后，该应用程序似乎可以正常工作。我现在已经发布了没有任何广告的应用程序，它运行良好。它可能突然停止工作的任何原因？我之前没有更改任何代码。我更改的唯一代码是我的关系提示应用程序中的附加提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T02:07:50.690

确保在 Properties --> Java Build Path --> Order and Export 中检查了您的 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:46:16.277

您没有发布错误，所以我只是猜测，admob 在 android os 2.1+ 上有一个错误，并且我有一个 admob 崩溃问题，我发现了一个建议不要在 OnDestroy 上调用 adview.destroy，因为它会导致崩溃。

如果您的 onDestroy 覆盖上有 adview.destroy()，只需对其进行注释并尝试。

```
 @Override
  protected void onDestroy() {
    super.onDestroy();

    // bug at sdk, no need to call
    //adView.destroy();
  } 
```

# php - 在同一页面上用 PHP 处理表单

> ID：10155903
> 
> 赞同：0
> 
> 时间：2012-04-14T17:50:35.570
> 
> 标签：php, forms, post

所以这次我决定使用网络编程语言。我一直很喜欢 PHP 的工作方式，所以我开始学习它。我已经开始制作登录页面，但我只是不知道它有什么问题。如果我使用符号没有错误。我什至不认为表格已处理。这是在同一页面上处理表单的正确方法吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<?php
session_start();
include("includes/connect.php");

if(isset($_SESSION['uid'])){
    header('Location:member.php');
}

if(isset($_POST['submit'])){
    $error = array();

    //username
    if(empty($_POST['username'])){
        $error[] = 'You cant have no username can you';
    }else if(ctype_alnum($_POST['username'])){
        $username = $_POST['username'];
    }else{
        $error[] = 'Username cannot contain symbols';
    }

    //password
    if(empty($_POST['password'])){
        $error[] = 'YOU NEED A PASSWORD';
    }else{
        $password =  sha1(mysql_real_escape_string($_POST['password']));
    }

    //error
    if(empty($error)){
        $result = mysql_query("SELECT * FROM user_info WHERE username='$username' AND password='$password'") or die(mysql_error());
        if(mysql_num_rows($result)==0){
            $error_message='Username or Password wrong';
        }else{
            $_SESSION['username'] = $username;
            $_SESSION['user_id'] = mysql_result($result, 0, 'user_id');
        }
    }else{
        foreach($error as $key => $values) {
            $error_message.= "$values";
        }
    }
}

?>

<html>
<head>
    <title>Login :)</title>
</head>
<body>
<div style="background-color:#A0A0A0" align="center">
<form method="post" action="<?php echo $_SERVER['PHP_SELF'] ?>">
    <h3>Login</h3>
    <div>
        <label for="username">Username:</label>
        <input type="text" name="username" maxlength="10"/>
    </div>
    <div>
        <label for="password">Password:</label>
        <input type="password" name="password" maxlength="20"/>
    </div>
    <div>
        <input type="submit" name="submit "value="Login"/>
    </div>
</form>
<?php echo $error_message; ?>
</div>
</body
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T17:56:08.460

你的身体标签没有关闭你忘了>

```
</body> 
```

并删除提交按钮名称中的空格:)

# android - 横向键盘遮挡视图

> ID：10155904
> 
> 赞同：1
> 
> 时间：2012-04-14T17:50:48.307
> 
> 标签：android, android-softkeyboard, landscape-portrait

我的活动中有一个 OpenGL SurfaceView，我正在使用键盘输入一些文本（通过网络发送）。没有 EditText 存在，所以我强制使用以下命令显示键盘：

```
 InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

该活动已定义属性`android:windowSoftInputMode="adjustResize"`，这在纵向模式下效果很好，当显示键盘时，布局正在调整大小（因此也调整了表面视图）。但是，它不会在横向模式下发生，这使得表面视图的一部分（实际上是大部分）变得模糊。surfaceview 实现了平移和缩放，所以如果我至少可以知道正在显示的键盘的大小并相应地重新定位surfaceview，那就太好了。

有没有办法让软键盘在横向模式下的行为与在纵向模式下的行为相同（这意味着它将调整我的布局大小）？如果没有，有没有办法获得键盘的高度（显然是全屏）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:49:32.920

在 newsgorup 的帮助下，我能够通过对视图 ( )`android-developers`使用覆盖来解决这个问题。`onCreateInputConnection`请参阅[原始线程](https://groups.google.com/d/topic/android-developers/50XcWooqk7I/discussion)。

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
  InputConnection connection = super.onCreateInputConnection(outAttrs);
  outAttrs.imeOptions |= EditorInfo.IME_FLAG_NO_FULLSCREEN;
  return connection;
} 
```

# android - 运动事件android的速度或加速度

> ID：10155907
> 
> 赞同：4
> 
> 时间：2012-04-14T17:51:22.800
> 
> 标签：android, performance, touch, velocity, acceleration

是否可以使用现有的 api 在 android 中获取触摸事件的速度或速度或加速度？我已经完成了 MotionEvent 类，并且该类中的所有字段似乎都没有检索到我需要的信息。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T16:25:59.900

在这种情况下，MotionEvent 对您没有帮助。您可以使用 VelocityTracker 类。它获取 MotionEvent 实例并计算最近触摸事件的速度。您可以在此处查看其文档：http: [//developer.android.com/reference/android/view/VelocityTracker.html](http://developer.android.com/reference/android/view/VelocityTracker.html)

首先，您必须通过 gain() 方法获取一个实例：

```
VelocityTracker velocity = VelocityTracker.obtain(); 
```

然后您可以将 ACTION_MOVE 事件添加到其队列中：

```
 if(event.getAction() == MotionEvent.ACTION_MOVE)
    {
        velocity.addMovement(event);
    } 
```

然后您可以计算速度并提取 x_velocity 和 y_velocity

```
velocity.computeCurrentVelocity(1000);
float x_velocity = velocity.getXVelocity();
float y_velocity = velocity.getYVelocity(); 
```

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:59:09.603

您需要使用 手动计算每两个事件之间的速度`System.nanoTime`。加速度的方式相同（但这次使用速度而不是坐标）。

# meteor - Meteor.methods() 应该在哪里定义？

> ID：10155909
> 
> 赞同：16
> 
> 时间：2012-04-14T17:51:40.507
> 
> 标签：meteor

[http://docs.meteor.com/#meteor_methods](http://docs.meteor.com/#meteor_methods)

我已经在我的服务器文件夹中的 publish.js 中尝试过它。

我成功调用 Meteor.apply 并尝试从客户端调用服务器。我总是得到一个未定义的响应。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-14T20:02:44.180

在服务器上调用`Meteor.methods`是正确的。这将定义在特权环境中运行并将结果返回给客户端的远程方法。要返回正常结果，只需`return`使用一些 JSON 值从您的方法函数调用。要发出错误信号，请抛出`Meteor.Error`.

在客户端，`Meteor.apply`总是返回`undefined`，因为方法调用是异步的。如果你想要方法的返回值，最后一个参数`apply`应该是一个回调，它将被传递两个参数：`error`和`result`，在典型的异步回调样式中。

你的服务器代码真的被调用了吗？您可以通过更新方法中的数据库并查看客户端的缓存是否获取新数据，或`console.log`从方法主体内部调用并查看终端中“流星”进程的输出来检查这一点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-14T16:16:43.340

有几个地方我可以定义我的`Meteor.methods()`（有赞成和反对的）：

1.  **仅在服务器上**- 当客户端调用该方法时，它必须等待服务器响应，然后客户端发生任何更改
2.  **在服务器上，并在客户端使用一个存根**——当客户端调用该方法时，它会在客户端执行存根方法，它可以快速返回一个（预测的）响应。当服务器返回“实际”响应时，它将替换存根生成的响应并相应地更新其他元素。
3.  **客户端和服务器上的相同方法**- 通常用于处理集合的方法，其中该方法实际上是客户端的存根，但此存根与服务器端函数相同，而是使用客户端缓存的集合服务器的。所以它仍然会像存根一样立即更新，但我想它的猜测更准确一些。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-14T21:06:32.217

我在这里上传了一个简短的例子，如果你需要一个这样的工作例子：[https ://gist.github.com/2387816](https://gist.github.com/2387816)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T00:28:53.220

我希望有些人会发现这个添加的用途，这并没有掩盖方法主要用于在服务器上运行的问题，正如*debergalis*所解释的那样。

在客户端上使用[`Meteor.methods()`](http://docs.meteor.com/#meteor_methods "文档 Meteor.methods()")也很有用。（也在该部分中寻找“*存根*[`Meteor.call()`](http://docs.meteor.com/#meteor_call)” ......）这允许客户端（同步）模拟服务器调用的预期效果。如文档中所述：

> 您一直在使用方法，因为数据库修改器（插入、更新、删除）是作为方法实现的。(...)

一个单独的部分解释在客户端上使用存根可能有助于理解服务器上的方法调用。

# ruby-on-rails - 如何在 Rails 中格式化嵌套的 JSON？

> ID：10155913
> 
> 赞同：1
> 
> 时间：2012-04-14T17:52:16.770
> 
> 标签：ruby-on-rails, json

我正在尝试将嵌套的 JSON 从 Rails 传输到 JavaScript。到目前为止，我成功传输了以下 JSON：

```
[
  "name" : "task-1",
  "relationships" : [
    {"follower": {"name" : "task-2"}},
    {"follower": {"name" : "task-3"}}
] 
```

我想将此 JSON 格式化为如下所示：

```
[
  "name" : "task-1",
  "relationships" : [
    {"name" : "task-2"},
    {"name" : "task-3"}
] 
```

这是我生成 JSON 的方式：

```
@tasks.to_json(
  :include => { :relationships => {
                  :include => :follower,
                  :only => :follower
               } }) 
```

我可以在我的 to_json 函数中指定某种选项来摆脱“跟随者”键名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:47:43.583

我最终使用不同的查询来解决问题：

```
@tasks = Task.to_json(:include => :followed_tasks) 
```

模型中`followed_tasks`定义的位置`Task`：

```
has_many :relationships, foreign_key: "follower_id", dependent: :destroy
has_many :followed_tasks, through: :relationships, source: :followed 
```

这给了我格式很好的 JSON：

```
[
  "name" : "task-1",
  "followed_tasks" : [
    { "name" : "task-2" },
    { "name" : "task-3" }
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:06:40.423

原来有。选项是：

```
ActiveRecord::Base.include_root_in_json = false 
```

您应该可以将其放入 config/environment.rb 中，然后一切顺利。

# jquery-mobile - jQuery Mobile 固定页脚

> ID：10155915
> 
> 赞同：0
> 
> 时间：2012-04-14T17:52:32.253
> 
> 标签：jquery-mobile, footer, css-position

在移动网站中是我的页脚在固定位置，

但是每次当我在表单（输入字段）上单击 Iphone 4 时，我的 Iphone 键盘都会打开，并且我的页脚在这段时间内没有固定。关闭键盘时一切正常。

只有当我的键盘打开时，页脚才能随内容滚动，我不知道为什么？

这是我的CSS代码

```
.bgfooter{
left: 0;
position: fixed!important;
right: 0;
top: 0!important;
width: 100%;
z-index: -1!important;
bottom: 0;

background:url('../images/background.png') no-repeat 0 0 !important; 
```

}

我的html代码

```
...  
<div data-role="content">....</div>             
<div class="bgfooter" data-position="fixed"  data-role="footer" >.... </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:11:35.490

对此有一个错误：

[https://github.com/jquery/jquery-mobile/issues/3072](https://github.com/jquery/jquery-mobile/issues/3072)

我已经重新编码了我的应用程序以避免 jQueryMobile 中的固定页脚。当 1.1 final 版本发布时，情况可能会发生变化。

# class - Scala getClass 匹配超类/特征

> ID：10155919
> 
> 赞同：1
> 
> 时间：2012-04-14T17:52:59.280
> 
> 标签：class, scala, runtime, parent, match

被一个看似简单的问题所困扰，其中有大量信息（太多信息无法筛选以了解当前状态到底是什么）。

无论如何，这里是。

```
trait _Foo
class Foo Extends _Foo with WhoAmI
trait WhoAmI {
  def who = {
    getClass match {
      case x: _Foo => "should be Foo instance, which extends _Foo"
      case _ => "why?"
    }
  }
}
val foo = new Foo
foo.who 
```

已经尝试了使用*classOf*和*isAssignableFrom*的守卫，以及循环通过*x.getInterfaces*（我至少在那里看到 _Foo ），但在直接“精益”匹配方面没有运气。

这个擦除是“在工作”还是我错过了一个明显的 1-liner？

如果这是许多其他线程的重复，我们可以关闭，但请指出我正确的方向！;-)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:55:19.370

您应该使用`this`而不是`getClass`：

```
this match { 
```

目前你正在调用`getClass`（它返回`Class[T]`类型的对象）——确保`java.lang.Class`类不会扩展你的`_Foo`特征——这就是“*为什么？* ”

# ios - UITableView 与缓存异步加载缩略图

> ID：10155922
> 
> 赞同：5
> 
> 时间：2012-04-14T17:53:13.963
> 
> 标签：ios, uitableview, grand-central-dispatch

我正在尝试将缩略图从远程站点加载到 UITableView。我想异步执行此操作，并且我想为缩略图实现一个穷人的缓存。这是我的代码片段（我将在下面描述有问题的行为）：

```
@property (nonatomic, strong) NSMutableDictionary *thumbnailsCache;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

// ...after obtaining the cell:

NSString *thumbnailCacheKey = [NSString stringWithFormat:@"cache%d", indexPath.row];

if (![[self.thumbnailsCache allKeys] containsObject:thumbnailCacheKey]) {

    // thumbnail for this row is not found in cache, so get it from remote website
    __block NSData *image = nil;        
    dispatch_queue_t imageQueue = dispatch_queue_create("queueForCellImage", NULL);
    dispatch_async(imageQueue, ^{
        NSString *thumbnailURL = myCustomFunctionGetThumbnailURL:indexPath.row;
        image = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:thumbnailURL]];
        dispatch_async(dispatch_get_main_queue(), ^{
            cell.imageView.image = [UIImage imageWithData:image];
        });
    });
    dispatch_release(imageQueue);
    [self.thumbnailsCache setObject:image forKey:thumbnailCacheKey];

} else {

    // thumbnail is in cache
    NSData *image = [self.thumbnailsCache objectForKey:thumbnailCacheKey];
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.imageView.image = [UIImage imageWithData:image];
    });

} 
```

所以这里有问题的行为：

1.  当 UITableView 加载时，缩略图不会显示在初始单元格集上。只有当一个单元格移出屏幕然后又重新打开时，缩略图才会出现。

2.  缓存根本不起作用。据我所知，它无法将缩略图完全保存到缓存中。也就是说，这条线失败了：

    [self.thumbnailsCache setObject:image forKey:thumbnailCacheKey];

3.  正在为每个单元创建/释放 GCD 队列。此外，队列名称每次都相同。这是不好的做法吗？

我很感激你们指出任何你看到的错误，甚至是任何一般的方法评论。谢谢。

## 更新：

1.  已解决：我添加了对 reloadRowsAtIndexPaths 的调用，现在缩略图图像加载到显示的初始行上

2.  已解决：它失败的原因是因为它在其他线程完成设置该对象之前将图像对象添加到字典中。我创建了一个实例方法来将对象添加到属性字典中，这样我就可以从块内部调用它，确保在设置图像对象后添加它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:10:32.150

您应该明确地看看[SDWebImage](https://github.com/rs/SDWebImage)。这正是您要寻找的。SDWebImage 也非常快，可以使用多核 CPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:58:31.320

1）没有显示初始图像的原因是因为单元格是用image = nil渲染的，所以它智能地隐藏了图像视图。

2）你有没有尝试在你的街区内移动这条线？

```
[self.thumbnailsCache setObject:image forKey:thumbnailCacheKey]; 
```

3）这只是区分要调试的队列并从控制台获取信息的一种方法，如果您的应用程序崩溃，那么您可以看到队列的名称。这不应该是您使用相同名称的问题，因为它执行相同的操作。如果您有相同的逻辑，您不会希望在另一个表视图中使用此名称。

# java - Java 中的 Set、Get 和构造函数

> ID：10155925
> 
> 赞同：2
> 
> 时间：2012-04-14T17:53:25.413
> 
> 标签：java, constructor

尽管有 Java 教程、Wikipedia 搜索、stackoverflow 巨魔以及数小时的代码示例阅读，但构造函数仍然让我感到困惑。我一直在尝试回答三个相关的问题，以帮助我更好地理解构造函数。

首先，我一直认为构造函数的名称需要与其类相同。考虑：

```
public class Money {
    public Money(long l) {
        this.value = l;
    }

    public Money(String s) {
        this.value = toLong(s);
    }

    public long getLong() {
        return this.value;
    }

    public String getString() {
        return toString(this.value);
    }
} 
```

我认为这是四个构造函数……对吗？因此，*似乎*构造函数*的*名称与包含它们的类的名称不同。有人可以确认吗？

其次，我似乎对理解 set 和 get 方法有障碍。考虑：

```
 public class GetSetSample {
     public int getFoo()  {
 return int Foo;
 }
 public void setFoo(int fooValue) {
 int Foo = fooValue;
 } 
} 
```

为什么我不能这样做：

```
public class getFoo(int fooValue){
     foo=fooValue;
} 
```

并`foo = getFoo(12)`从其他类/方法中使用？

第三个问题有点深奥，但会帮助我构想更大的图景……这是我的学习方式，有利于我在调试时跟踪程序流程的能力。`get`and方法暗示了我的`set`“to”和“from”关系。例如，将值“传递给”构造函数，“从”get 方法接收结果。在我看来，“to”和“from”会根据你的观点而改变。我认为 any`setMethod`正在为一个对象设置参数，即使该变量来自另一个类或方法，并且`GetMethod`正在使用适当的参数`get`对结果对象（例如）进行设置。无论在哪里或`this.foo``set``get``set`在具有单个构造函数的主方法或独立类中使用时，“set”始终与发送参数相关联，并且`get`始终与接收具有该参数的对象相关联。这是一个很好的理解吗？还是我错过了一个重要的部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T17:57:29.557

问题一：

> 我认为这是四个构造函数……对吗？

不，那个类有两个构造函数和两个方法。（`getLong`并且`getString`是方法。）

问题2：

> 为什么我不能这样做：
> 
> ```
> public class getFoo(int fooValue){
>     foo=fooValue;
> } 
> ```

好吧，那是在尝试声明一个带参数的*类*，并且您正在*get方法中**设置*一个值，这将是非常奇怪的。目前尚不清楚您要在这里实现什么，但该代码完全无效。

 *问题 3：

> get 和 set 方法暗示了我的“to”和“from”关系。

好吧，这不是真正的*关系*IMO。关系暗示了比这两种方法中任何一种都更长期的东西。setter 通常以某种方式更改对象的状态，而 getter 通常只返回对象状态的某些方面。你的解释的其余部分是什么意思并不是很清楚，因为你在使用术语时有点快速和松散。例如：“`get`总是与接收带有该参数的对象相关联”对我来说真的没有意义。对象没有参数，方法/构造函数有——getter 可以获取原始值或引用......

我怀疑您会从阅读[Java 教程的“类”部分中](http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html)受益，其中讨论了构造函数和方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T17:57:20.573

您已经展示了 2 个构造函数，它们确实需要与类同名。

您还展示了两个“getter”方法，它们以用户请求的形式返回类变量的值。您还可以创建“setter”方法，用于将值传输到类变量中。

您使用构造函数来创建特定类的对象，并可选择设置其部分或全部内部状态（即其成员变量）。

您使用 setter 和 getter 将类变量与外界隔离，因此您不需要允许其他代码直接访问它们。为什么？因为，在 setter 更新变量之前，它可以验证新值是否有效，并且操作不违反类正常工作所需的任何规则（“业务逻辑”）。

因此，您可以添加一个 setter 并更新构造函数以使用它：

```
public Money(long l) {
    setValue(l);
}

public Money(String s) {
    setValue(toLong(s));
}

// Example setter that validates `l` by prohibiting negative values
public Money setValue(long l) {
  if (l < 0) {
    // Warn about negative values
  }
  this.value = l;
  return this;  // Return the current object to allow chaining; see below.
} 
```

请注意，setter 通常不需要返回值（也就是说，它可以是 type `void`），但返回对象本身通常会很有帮助。这使您可以编写如下代码：

```
Money earnings = new Money().setValue(4).setOtherField("foo"); 
```

这将创建一个类型的对象`Money`，设置各种属性，并将其存储在变量中`earnings`。显然，这对于像这样的简单类并不是非常有用，但对于更复杂的类可能非常有用：

```
Paycheck check = new Paycheck("MyCompany")
  .setEmployee("YourName")
  .setSalary(50,000)
  .setPaySchedule(Schedule.BIWEEKLY)
  .setAccountNumber("1234567")
  .setDefaultTaxRate(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T17:58:47.773

关于第一个答案，只有 2 个构造函数。不同之处在于它们将如何被调用（使用字符串调用将使用具有字符串具有参数的构造，而使用 long 调用将使用另一个构造）。所以要回答，是的，构造函数与类同名。

两个构造函数：

```
public Money(long l) {
        this.value = l;
    }

    public Money(String s) {
        this.value = toLong(s);
    } 
```

关于第二个答案，getter 和 setter 并不意味着是类。他们应该在班级本身内。

考虑这个例子，它使用 getter 和 setter 来获取打印机类的 ans set 值：

```
public class Printer {

    @Inject @Informal Greeting greeting;

    private String name;
    private String salutation;

    public void createSalutation() {
        this.salutation = greeting.greet(name);
    }

    public String getSalutation() {
        return salutation;
    }

    public void setName(String name) {
       this.name = name;
    }

    public String getName() {
       return name;
    }
} 
```

好好阅读这个链接绝对可以帮助你！ [Java 面向对象原则](http://docs.oracle.com/javase/tutorial/java/concepts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T18:33:54.597

我想试着回答你隐含的概念性问题——你已经有很多这样和那样的例子，所以我只是试着解释一下。毫无疑问，您之前已经听说过其中的大部分——也许是所有这些——但我不确定，也不确定是哪些部分。

面向对象的编程主要围绕对象；对象是代码和数据的融合。您通过编写一个类来定义对象，并使用类构造函数创建由该类定义的对象的一个​​或多个副本（称为*实例化*类）。

其他语言的并行：您可以拥有相关项目的数据结构和一组对该数据结构进行操作的子例程。将类视为一种将数据结构中的项目和对其进行操作的子例程收集到一个单元中的方法。

调用构造函数后，您将拥有该类中定义的数据的副本以及引用该副本的方法。通过在调用类方法时引用该实例，您可以使用该类中定义的方法对该数据副本进行操作。

如果您要使用非 OO 语言执行此操作，则可以有一个例程在内存中创建数据结构的副本，然后仅在该数据结构上使用为它规定的方法。您可以在内存中拥有一个指向副本的指针，并将该指针作为参数传递给对其进行操作的每个子例程，事实上，这就是一些 OO 之前的系统的编程方式。

构造函数类似于返回值的方法调用；它涉及（或可能涉及）语句的执行，并且它总是返回该类的对象。构造函数和方法之间也有区别；例如，在构造函数完成之前，对象还没有完全创建，并且不应该在其上调用某些方法。

所以我希望这会有所帮助；如果您仍然对概念性的事情有疑问，也许这里的某些内容会帮助您形成一个具体的问题，以便我们进一步解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T18:34:58.483

许多人发现，如果他们花了数年时间学习诸如 COBOL 和 FORTRAN 之类的语言，那么转向 OO 编程就意味着忘掉旧语言。当我 20 年前第一次接触 C++ 时，我当然发现了这一点。根据您的描述，您显然在与这些概念作斗争，我对此表示同情。

我不认为有一个简单的食谱。练习简单的例子，不要灰心。不要害怕提出这样的问题——如果问题被明确提出，你会得到一个有用的答案。

获得一个好的 IDE（Eclipse、Netbeans 等），它允许您使用调试器“查看内部”对象。希望在某些阶段事情会点击！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T18:53:50.437

问题 1 - 基本 Java 类：

在 Java 类中你几乎只能找到 3 样东西

*   字段/属性（取决于您的原籍语言）
*   方法
*   构造函数（看起来像是一种特殊的方法）

每个类都将有一个类名，该类名与它所在的文件名共享。因此，将 Money 扩展一下：

```
Money.java
----------
public class Money {
   // This is a field/attribute
   Long value;

   // This is a constructor
   public Money() {
      this.value = Long(0L);
   }

   // This is a method
   public Long getValue() {
      return value;
   }

   // Another method
   public void makeMoney(Long moreMoney) {
      this.value = this.value + moreMoney;
   }
} // Everything in here is part of the Money class 
```

构造函数和方法之间的唯一区别是构造函数没有指定的返回值，它在潜在方法的名称之前被声明为类型。构造函数的名称必须与它们所在的类的名称相同，但它们的编写方式中隐含了为什么。

另一种看待它的方法是，如果您从您正在查看的方法的前面删除所有与类型无关的 Java 关键字（public、private 等，但不包括 float 和 int）（其中的列表你可以在[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)找到），方法前面还有什么东西吗？

使用我们目前拥有的资金，它看起来像这样：

*   钱（）
*   长 getValue()
*   无效的赚钱（）

构造函数是没有返回值类型的构造函数，因为它隐含在声明中。

问题 2/3 - 获取/设置方法：

我要说一些可能引起争议的事情，但不要担心这些。Get/Set 本质上是面向对象开发的模式，通常是良好的 Java 风格，但它们不是必需的（最后我检查，Android 开发实际上出于优化原因不鼓励使用它们）。此外，并非对象中的所有字段都是可访问或可变的，因此编写它们不是强制性的。

如果您将所有字段声明为公共字段（就像现在隐含的“值”字段一样），您可以简单地执行以下操作：

```
Money myMoney = new Money(new Long(40L));
System.out.println(myMoney.value) // 40
myMoney.value = new Long(20L);
System.out.println(myMoney.value) // 20 
```

除此之外，get() 和 set() 的概念只是方法。它们根本没有什么特别之处。它们存在的主要原因是因为对于一般的面向对象编程，您不必直接修改对象的内部工作方式（这是[封装的原理](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)）。影响状态或从中获取某些东西所需的一切都应该由方法处理。

简而言之：如果您需要知道对象的字段才能使用它，那么您的设计是错误的。

*大图* 所以 get() 和 set() 真正是一对常用的方法，它们碰巧以极其简单的方式影响对象中的字段（get() 是对字段的简单访问，set() 是分配给该领域）。只是你编写的其他方法会碰巧做比这更复杂的事情。*

# php - htaccess 将索引文件夹重写为 php 文件

> ID：10155926
> 
> 赞同：0
> 
> 时间：2012-04-14T17:53:54.390
> 
> 标签：php, .htaccess

这是我的文件夹结构

```
test
-.htaccess
-app
--index.php 
```

我想当我去[http://localhost/test/](http://localhost/test/)时，它重写为 test/app/index.php （无重定向）

我的 htaccess 下面。现在它可以正常使用 url [http://localhost/test/some/thing](http://localhost/test/some/thing)。使用 url [http://localhost/test/](http://localhost/test/)，它仍然显示文件夹**test的文件索引**

```
<IfModule mod_rewrite.c>
RewriteBase /test/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /test/app/index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:01:15.207

重写规则用正则表达式表示，所以这不会使您的点成为任何字符匹配吗？你试过这个：

```
RewriteRule ^/$ app/index.php [L] 
```

# php - 如何跨域从谷歌搜索中获取数据

> ID：10155927
> 
> 赞同：0
> 
> 时间：2012-04-14T17:54:12.640
> 
> 标签：php, javascript, cross-domain

我正在尝试“跨域”从 Google 搜索中获取数据。我想出了 PHP，但我不想使用它。我想直接使用 JavaScript 获取数据。但是怎么做？JSONP？或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:12:29.743

您可以仅通过 ajax 使用 google 搜索 API，例如 jQuery.get()。因为 Google 的 javascript API 绕过了 AJAX 中的跨域安全性

# iphone - 在 OSX 上的 iPhone 上查看本地主机站点

> ID：10155933
> 
> 赞同：1
> 
> 时间：2012-04-14T17:54:49.400
> 
> 标签：iphone, macos

我正在针对移动设备的 OSX Lion 上使用 MonoDevelop 构建一个 .NET 网站。

在我的桌面浏览器上，我可以通过**http://127.0.0.1:8080**访问该站点，但我想在我的物理 iPhone 上查看它（我不想使用 XCode 模拟器）。

我的 iPhone 和 Mac 在同一个网络上，并且我启用了 Web 共享。我实际上可以访问默认的 Apache index.html ( **http://192.168.1.104:80** ) 页面，但我无法访问我的站点 ( **http://192.168.1.104:8080** )。

我对 Mac 比较陌生，对网络管理更不熟悉，所以我希望我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:11:07.340

您也可以关闭网络共享，因为网络共享只运行内置的 Apache 网络服务器。

正在发生的事情是 MonoDevelop 托管您的页面的 Web 服务器已设置为仅允许来自`localhost`. 如果这是问题所在，在 OS X 机器**上**输入 OS X 机器的局域网 IP 也可能不起作用（如果 IP 过滤像在 Apache 上那样工作）。

您需要找到 MonoDevelop 服务器的配置文件并允许从 127.0.0.1 以外的地址访问

# php - 如何在php中将字符串转换为数组？

> ID：10155935
> 
> 赞同：1
> 
> 时间：2012-04-14T17:55:16.637
> 
> 标签：php

这不是`explode`可以解决的

我有几个数组

```
$order
data: {5,3,2}

$title,
data: {USA, England, China}

$attribute
Same idea 

$type
Same idea 
```

$order 已经存在某个值
{5,3,2} 并且每个都有相应的 $title,$attribute,$type 值

```
eg. 5 USA  att5 type5 
```

我想将顺序排序为 {2,3,5} 并且其他数组中的相应数据也将被排序。

```
eg. {2,3,5} 
```

之后为数组 $title

是

```
{China, England,USA} 
```

如何为所有数组实现这一点？谢谢

我的想法是使用关联数组，我可以对键进行排序，一切都完成了。但是，我无法生成数组

我的想法数组：

```
$records = array(5 => array("title" => "USA",   "att" => "add5"),
                 3 => array("title" => "England",  "att" => "add3"),
                 2 => array("title" => "China", "att" => "add2")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:47:49.857

事情现在更清楚了，我建议使用`array_multisort` [http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:02:20.070

在脚本的这些行之后

```
$string = substr($string, 0, -1);
$records="array (".$string.");"; 
```

你可以加

```
eval("\$records = $records;"); 
```

[您可以在http://php.net/manual/es/function.eval.php](http://php.net/manual/es/function.eval.php)阅读有关 eval 函数的信息，以及为什么在使用它时应该非常小心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T18:02:57.937

如果一个`explode`还不够，两个`explode`s 可以提供帮助；）

```
$records = Array();
foreach(explode("\n", trim($string)) as $line)
{
   list($order,$title,$attribute,$type) = explode(",", $line);
   $records[$order] = Array("title" => $title, "attribute" => $attribute, "type" => $type);
}
ksort($records); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T18:04:09.907

而不是从字符串转换为数组，您可以构建它

```
$result = array();
$countItem=0;
foreach ($order as $itemID)
{
     $result [$countItem] = array('id' => $itemID, 'title' => $title[$countItem],   'attribute' => $att[$countItem],'type'=>$type[$countItem]);
     $countItem++;
} 
```

然后按id排序

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T18:40:28.183

```
<?php

$order = array(5, 3, 2);    // or $order = array("5", "3", "2");
$title = array("USA", "England", "China");
$att = array("Att 1", "Att 2", "Att 3");
$type = array("Type 1", "Type 2", "Type 3");

$records = array();
foreach ($order as $i => $o) 
    $records[$o] = array("title" => $title[$i], "att" => $att[$i], "type" => $type[$i]);

ksort($records, SORT_NUMERIC);

print_r($records);

?> 
```

# java - Java JSON 返回 NULL 值

> ID：10155937
> 
> 赞同：0
> 
> 时间：2012-04-14T17:55:36.993
> 
> 标签：java, json, gson

我正在尝试从我的网站获取 JSON 文件并对其进行解析。不幸的是，到目前为止还没有运气。我能够使用另一个名为 BaslikContainer 的类来获取数据，但是，我需要这段代码在另一个类中工作，这需要在 arraylist 中的 Baslik 实例，所以我需要删除它，现在我不能让它工作。

有人可以指出这个问题吗？没有抛出异常 - 我不知道为什么会这样。

```
package info.funstein.TestHttpGet;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URI;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class TestHttpGet {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception{
        BufferedReader in = null;
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI("http://dev.funstein.info/baslik.json"));
        HttpResponse response = client.execute(request);
        in = new BufferedReader
                (new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String page = sb.toString();

        GsonBuilder gsonBuilder = new GsonBuilder();
        Gson gson = gsonBuilder.create();
        Basliklar basliklar = gson.fromJson(page, Basliklar.class);
        System.out.println(basliklar); 

        }
    }
class Basliklar {
    private List<Baslik> basliklar;

    @Override
    public String toString() {
        return String.format("[Basliklar: %1$s]", basliklar);
    }
}

class Baslik {
    private String baslikAdi;
    private String baslikAcan;
    private int baslikID;

    public String getBaslikAdi() {
        return baslikAdi;
    }

    public void setBaslikAdi(String baslikAdi) {
        this.baslikAdi = baslikAdi;
    }

    public String getBaslikAcan() {
        return baslikAcan;
    }

    public void setBaslikAcan(String baslikAcan) {
        this.baslikAcan = baslikAcan;
    }

    public int getBaslikID() {
        return baslikID;
    }

    public void setBaslikID(int baslikID) {
        this.baslikID = baslikID;
    }

    @Override
    public String toString() {
        return String.format("[Baslik: baslikAdi=%1$s, baslikAcan=%2$s, baslikID=%3$d]",
                baslikAdi, baslikAcan, baslikID);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:50:09.730

您的输入 JSON 字符串是错误的。

使用`Gson.toJson(Object)`以下方式

```
GsonBuilder gsonBuilder = new GsonBuilder();
Gson gson = gsonBuilder.create();
Basliklar b = new Basliklar();
b.basliklar = new ArrayList<Baslik>();
Baslik b1 = new Baslik();
b1.setBaslikAdi("Deneme1");
b1.setBaslikAcan("funstein");
b1.setBaslikID(0);
b.basliklar.add(b1);
Baslik b2 = new Baslik();
b2.setBaslikAdi("Deneme2");
b2.setBaslikAcan("qeremqazan");
b2.setBaslikID(1);
b.basliklar.add(b2);

LoggerFactory.getLogger(TestHttpGet.class).debug(gson.toJson(b)); 
```

生成以下 Json 字符串：

```
{"basliklar":[{"baslikAdi":"Deneme1","baslikAcan":"funstein","baslikID":0},{"baslikAdi":"Deneme2","baslikAcan":"qeremqazan","baslikID":1}]} 
```

您的 JSON 输入字符串是：

```
{"basliklar":[{"baslik":{"baslikAdi":"Deneme1","baslikAcan":"funstein","baslikID":"0"}},{"baslik":{"baslikAdi":"Deneme2","baslikAcan":"qeremqazan","baslikID":"1"}}]} 
```

您的输入字符串中有其他/意外的“baslik：”元素。

# android - 从 Android 应用程序读取 HTML 源代码

> ID：10155938
> 
> 赞同：2
> 
> 时间：2012-04-14T17:55:43.223
> 
> 标签：android, html, http, httpclient, http-get

我试图从用户输入的网站中获取字符串中的 HTML 源代码，到目前为止我的代码如下所示：

```
public String getURLContent(String url)
{
    try 
    {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        ResponseHandler<String> resHandler = new BasicResponseHandler();
        String page = httpClient.execute(httpGet, resHandler);
        return page;
    }
    catch (ClientProtocolException e)
    {
        e.printStackTrace();
        return "";
    }
    catch (IOException e)
    {
        e.printStackTrace();
        return "";
    }
} 
```

每次我尝试运行它时，我都会遇到第二个问题（IOException），根据文档，这意味着服务器无法给出有效的响应......我正在使用“http:\www.google.com\”之类的网站进行测试“，所以他们肯定应该回应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:15:11.463

除非您想对整个字符串进行一些自定义解析，否则我建议您使用 HTML 解析器库。我使用 HTML 清洁器，显示[在这里](https://stackoverflow.com/questions/5867746/android-html-parser-example)。

这使得所有的马都为你工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:35:14.357

你的代码没问题。确保粘贴完整的网站路径：`http://www. [page] . [domain]`例如：`http://www.google.com` 并将此权限添加到`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

就在之前（如果是新项目）：

```
<application android:label="@string/app_name"> 
```

完整示例：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <application android:label="@string/app_name">
        <activity android:name="MyActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# java - 解决“注释中不允许使用字符串“--”。例外？

> ID：10155940
> 
> 赞同：25
> 
> 时间：2012-04-14T17:56:03.617
> 
> 标签：java, parsing, xhtml, sax, xerces

我正在使用 Java 6。我的 pom 中有这个依赖项......

```
 <dependency>
                    <groupId>xerces</groupId>
                    <artifactId>xercesImpl</artifactId>
                    <version>2.10.0</version>
            </dependency> 
```

我正在尝试用这一行解析 XHTML 文档

```
 <!--[if gte mso 9]><xml>  <w:WordDocument>   <w:View>Normal</w:View>   <w:Zoom>0</w:Zoom>   <w:TrackMoves/>   <w:TrackFormatting/>   <w:PunctuationKerning/>   <w:ValidateAgainstSchemas/>   <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>   <w:IgnoreMixedContent>false</w:IgnoreMixedContent>   <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>   <w:DoNotPromoteQF/>   <w:LidThemeOther>EN-US</w:LidThemeOther>   <w:LidThemeAsian>JA</w:LidThemeAsian>   <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>   <w:Compatibility>    <w:BreakWrappedTables/>    <w:SnapToGridInCell/>    <w:WrapTextWithPunct/>    <w:UseAsianBreakRules/>    <w:DontGrowAutofit/>    <w:SplitPgBreakAndParaMark/>    <w:EnableOpenTypeKerning/>    <w:DontFlipMirrorIndents/>    <w:OverrideTableStyleHps/>    <w:UseFELayout/>   </w:Compatibility>   <m:mathPr>    <m:mathFont m:val="Cambria Math"/>    <m:brkBin m:val="before"/>    <m:brkBinSub m:val="--"/>    <m:smallFrac m:val="off"/>    <m:dispDef/>    <m:lMargin m:val="0"/>    <m:rMargin m:val="0"/>    <m:defJc m:val="centerGroup"/>    <m:wrapIndent m:val="1440"/>    <m:intLim m:val="subSup"/>    <m:naryLim m:val="undOvr"/>   </m:mathPr></w:WordDocument> </xml><![endif]--> 
```

使用此代码...

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(false);
    factory.setExpandEntityReferences(false);
    factory.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
    final DocumentBuilder builder = factory.newDocumentBuilder();
    final InputSource s = new InputSource(new StringReader(str));
    org.w3c.dom.Document result = builder.parse(s); 
```

但我的解析正在死亡，但出现以下异常......

```
[Fatal Error] :91:947: The string "--" is not permitted within comments.
org.xml.sax.SAXParseException: The string "--" is not permitted within comments.
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at com.myco.myproject.util.XmlUtilities.getStringAsDocument(XmlUtilities.java:201)
    at com.myco.myproject.util.NetUtilities.getUrlAsDocument(NetUtilities.java:67)
    at com.myco.myproject.parsers.impl.ForesightEventsParser.getEventsFromElement(ForesightEventsParser.java:133)
    at com.myco.myproject.parsers.impl.ForesightEventsParser.parsePage(ForesightEventsParser.java:99)
    at com.myco.myproject.parsers.impl.ForesightEventsParser.getEvents(ForesightEventsParser.java:58)
    at com.myco.myproject.domain.EventFeed.refresh(EventFeed.java:87)
    at com.myco.myproject.domain.EventFeed.getEvents(EventFeed.java:72)
    at com.myco.myproject.parsers.impl.ForesightParserTest.testParser(ForesightParserTest.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

在不更改我的 XHTML 的情况下，任何人都知道如何成功解析此文档吗？

**编辑**根据给出的评论，我从原始问题中删除了“格式良好”一词。我仍然对如何在不更改我正在解析的文本（我无法控制）的情况下消除此异常非常感兴趣。出于这个问题的目的，您可以假设评论中的“--”是唯一违反“格式良好”一词的行为。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T18:02:14.603

根据[定义](http://www.htmlhelp.com/reference/wilbur/misc/comment.html)：

> 注释以“--”开头和结尾，并且不包含任何“--”。

所以不，您的 XHTML 格式不正确，因为您不能`--`在注释中的任何地方使用。可以用别的东西代替吗？或者可能在两者之间放置一个空格，如下所示：`- -`. 对于这个问题确实没有一个干净的解决方案，任何替代方案都涉及搞乱占位符、编码等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-19T14:06:35.140

您的文档必须至少有一个额外的“-”。可能你写过：

```
<!--- --> or
<!--- ---> or
<!-- ---> etc. 
```

# php - 具有指数运行时间的 PCRE 正则表达式

> ID：10155945
> 
> 赞同：4
> 
> 时间：2012-04-14T17:57:11.080
> 
> 标签：php, regex, pcre

在某些情况下，使用递归回溯的正则表达式实现可能会表现出指数运行时间。

我正在尝试为 PCRE 引擎找到这样一个病态的正则表达式。

我已经尝试了几个正则表达式，已知它们对于 Perl 正则表达式（例如[这个](http://perlgeek.de/blog-en/perl-tips/in-search-of-an-exponetial-regexp.html)）是指数的，但在我的测试中，它们都没有表现出 PCRE 的指数运行时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:14:31.623

在您的测试中，是否所有的正则表达式都会失败？当他们确实失败时，你有没有找到确切的原因？也许匹配失败*是因为*正则表达式引擎检测到过多的回溯。我不知道这是否会发生，但尝试一个应该成功的正则表达式，比如这个：

```
(?i)lorem(?:.|\s)*pri\. 
```

使用 RegexBuddy，我将该正则表达式应用于下面文本的第一段，并按预期突出显示了整个段落。当我删除段落末尾的句点时，突出显示消失了，调试器说它已经放弃了一百万次操作。这并不奇怪，但是当我把句号放回去并添加第二段时，它仍然失败了——再次回溯太多。

* * *

> Lorem ipsum tritani impedit civibus ei pri，legimus antiopam no sed，quo id everti forensibus maiestatis。Vim 广告智能后果。Te dicam 阻碍事件测量。Usu prompta alterum contentiones no, ut esse fabellas splendide pri。
> 
> Ne utroque nominavi moderatius qui, ius at suas velit nihil, vidit blandit facilisi pri ut。Ad vel offendit reprehendunt, mea ex quem ipsum complectitur。Veri cetero feugait cu usu，在 dolor corpora adolescens vim 中，在坐 voluptua placerat sadipscing。Minim admodum constituam eos ut, vix ut movet causae tractatos, in pro dicat dicta dolores。Impetus praesent eum no.

# php - PHP PDO 事务？

> ID：10155946
> 
> 赞同：39
> 
> 时间：2012-04-14T17:57:18.920
> 
> 标签：php, pdo, transactions

我有一个注册页面，基本上我需要将数据插入 4 个表中。我是 PDO 的新手，对某些事情感到困惑。

基本上，如果任何插入失败，我不希望将任何内容添加到数据库中，这似乎很简单。

我的困惑是，我需要首先在我的`users`表中插入用户的用户名、电子邮件、密码等，这样我才能使用 PDO 获得（不知道如何）MySQL 给我的用户的 uid（由 mysql 自动递增）。我需要用户 uid MySQL 为其他表提供了我的用户，因为其他表需要 uid，因此所有内容都正确链接在一起。我的表是 InnoDB，我有从 users_profiles(user_uid)、users_status(user_uid)、users_roles(user_uid) 到 users.user_uid 的外键，所以它们都链接在一起。

但同时我想确保如果例如在`users`表中插入数据之后（所以我可以获得 MySQL 给用户的 uid），如果任何其他插入失败，它会删除插入到`users`表中的数据.

我认为最好显示我的代码；我已经注释掉了代码并在代码中进行了解释，这可能会更容易理解。

```
// Begin our transaction, we need to insert data into 4 tables:
// users, users_status, users_roles, users_profiles
// connect to database
$dbh = sql_con();

// begin transaction
$dbh->beginTransaction();

try {

    // this query inserts data into the `users` table
    $stmt = $dbh->prepare('
                        INSERT INTO `users`
                        (users_status, user_login, user_pass, user_email, user_registered)
                        VALUES
                        (?, ?, ?, ?, NOW())');

    $stmt->bindParam(1, $userstatus,     PDO::PARAM_STR);
    $stmt->bindParam(2, $username,       PDO::PARAM_STR);
    $stmt->bindParam(3, $HashedPassword, PDO::PARAM_STR);
    $stmt->bindParam(4, $email,          PDO::PARAM_STR);
    $stmt->execute();

    // get user_uid from insert for use in other tables below
    $lastInsertID = $dbh->lastInsertId();

    // this query inserts data into the `users_status` table
    $stmt = $dbh->prepare('
                        INSERT INTO `users_status`
                        (user_uid, user_activation_key)
                        VALUES
                        (?, ?)');

    $stmt->bindParam(1, $lastInsertID,     PDO::PARAM_STR);
    $stmt->bindParam(2, $activationkey,    PDO::PARAM_STR);
    $stmt->execute();

    // this query inserts data into the `users_roles` table
    $stmt = $dbh->prepare('
                        INSERT INTO `users_roles`
                        (user_uid, user_role)
                        VALUES
                        (?, ?)');

    $stmt->bindParam(1, $lastInsertID,      PDO::PARAM_STR);
    $stmt->bindParam(2, SUBSCRIBER_ROLE,    PDO::PARAM_STR);
    $stmt->execute();

    // this query inserts data into the `users_profiles` table
    $stmt = $dbh->prepare('
                        INSERT INTO `users_profiles`
                        (user_uid)
                        VALUES
                        (?)');

    $stmt->bindParam(1, $lastInsertID,      PDO::PARAM_STR);
    $stmt->execute();

    // commit transaction
    $dbh->commit();

} // any errors from the above database queries will be catched
catch (PDOException $e) {
    // roll back transaction
    $dbh->rollback();
    // log any errors to file
    ExceptionErrorHandler($e);
    require_once($footer_inc);
    exit;
} 
```

我是 PDO 的新手，上面可能有我还没有注意到的错误或问题，因为在我弄清楚我的问题之前我还不能测试。

1.  我需要知道如何首先在用户表中插入用户数据，这样我才能获得 MySQL 给我的用户的 uid

2.  然后获取其他表需要的 uid

3.  但同时，如果在插入用户表后由于某种原因查询失败，则数据也会从用户表中删除。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T18:02:58.047

此函数返回刚刚插入记录的主键：[PDO::lastInsertId](http://php.net/manual/en/pdo.lastinsertid.php) 您将需要它作为`NEED_USERS_UID_FOR_HERE`参数。在 INSERT 语句之后使用它。

由于您启动了事务，如果您对 MySQL 表使用 InnoDB 引擎（MyISAM 不支持事务），则如果发生任何错误，数据将不会插入任何表。

# mysql - 将表复制到另一个表但保留相同的自动增量键

> ID：10155948
> 
> 赞同：3
> 
> 时间：2012-04-14T17:57:25.177
> 
> 标签：mysql, sql, auto-increment

我有一个表 A 充满了记录。我创建了一个具有相同列的表 B，我想将 A 的所有内容复制到 B。但是，表 A 有一个自动递增的键，所以如果我有前三个记录 (1,'itemA') (2,'itemB ') (5,'itemE') （假设 3,4,5 稍后删除）。这些记录将作为 (1,'itemA') (2,'itemB') (3,'itemE') 插入到表 B 中。有没有办法将它们插入完全相同？

另一件事是，表 A 在 mySql 上，而表 B 在 MS SQL Server 上

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T18:08:56.483

AFAIK mysql 允许插入 auto_increment 字段，因此您可以使用如下语句

```
insert into table2 (id, name) select id, name from table1 
```

但稍后，如果您需要使用生成的 auto_inc 插入表值，则需要在 table2 中设置 auto_increment，其值为 table1 的 auto_inc

```
alter table table2 AUTO_INCREMENT = (SELECT AUTO_INCREMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA = $dbName AND TABLE_NAME = 'table1') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T18:09:50.520

是的。

```
create table b like a;
insert into b select * from a; 
```

[http://sqlfiddle.com/#!2/a344a/1](http://sqlfiddle.com/#!2/a344a/1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T10:42:18.623

上面的答案很好，但是在 MS SQL 上你不能插入自动增量值，除非你执行 turn identiy_insert off：

> `SET IDENTITY_INSERT stock OFF;`
> 
> `INSERT INTO stock ( stock_id,stock_item) VALUES (5,'itemE');`
> 
> `SET IDENTITY_INSERT stock ON;`

这正是我一直在寻找的。谢谢你们 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-17T10:11:46.000

在名称为 test 和列 (id autoinc, col1, col2, col3) 的表中 在名称为 test2 和列 (id autoinc, col4, col5, col6) 的表中

```
INSERT INTO test(col4, col5, col6) SELECT col4, col5, col6 FROM test2; 
```

# python - 切片整个列表的切片赋值和直接赋值有什么区别？

> ID：10155951
> 
> 赞同：25
> 
> 时间：2012-04-14T17:57:44.190
> 
> 标签：python, list, variable-assignment, slice

我在很多地方看到对`list`s 使用切片分配。当与（非默认）索引一起使用时，我能够理解它的用途，但我无法理解它的用途，例如：

```
a_list[:] = ['foo', 'bar'] 
```

这和有什么区别

```
a_list = ['foo', 'bar'] 
```

?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-14T18:02:33.183

```
a_list = ['foo', 'bar'] 
```

`list`在内存中创建一个新的并将名称指向`a_list`它。前面所指的无关紧要`a_list`。

```
a_list[:] = ['foo', 'bar'] 
```

以 a为索引调用对象的[`__setitem__`](http://docs.python.org/reference/datamodel.html#object.__setitem__)方法，以在内存中创建的 a 为值。`a_list`[`slice`](http://docs.python.org/library/functions.html#slice)`list`

`__setitem__`计算`slice`以找出它代表的索引，并调用`iter`它传递的值。然后它遍历对象，将 指定范围内的每个索引设置为对象`slice`的下一个值。对于`list`s，如果 指定的范围`slice`与可迭代的长度不同，`list`则调整 的大小。这允许你做一些有趣的事情，比如删除列表的部分：

```
a_list[:] = [] # deletes all the items in the list, equivalent to 'del a_list[:]' 
```

或在列表中间插入新值：

```
a_list[1:1] = [1, 2, 3] # inserts the new values at index 1 in the list 
```

但是，对于“扩展切片”，其中`step`不是一个，可迭代的必须是正确的长度：

```
>>> lst = [1, 2, 3]
>>> lst[::2] = []
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
ValueError: attempt to assign sequence of size 0 to extended slice of size 2 
```

切片分配的主要不同之处在于`a_list`：

1.  `a_list`必须已经指向一个对象
2.  该对象被修改，而不是指向`a_list`一个新对象
3.  该对象必须`__setitem__`支持`slice`索引
4.  右边的对象必须支持迭代
5.  没有名称指向右侧的对象。如果没有其他对它的引用（例如当它是您的示例中的文字时），它将在迭代完成后被计数为不存在。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-14T18:04:32.833

差别相当大！在

```
a_list[:] = ['foo', 'bar'] 
```

您修改了绑定到 name 的现有列表`a_list`。另一方面，

```
a_list = ['foo', 'bar'] 
```

为 name 分配一个新列表`a_list`。

也许这会有所帮助：

```
a = a_list = ['foo', 'bar'] # another name for the same list
a_list = ['x', 'y'] # reassigns the name a_list
print a # still the original list

a = a_list = ['foo', 'bar']
a_list[:] = ['x', 'y'] # changes the existing list bound to a
print a # a changed too since you changed the object 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-09T07:33:03.067

通过分配给`a_list[:]`，`a_list`仍然引用相同的列表对象，并修改了内容。通过分配给`a_list`，`a_list`现在引用一个新的列表对象。

查看它的`id`：

```
>>> a_list = []
>>> id(a_list)
32092040
>>> a_list[:] = ['foo', 'bar']
>>> id(a_list)
32092040
>>> a_list = ['foo', 'bar']
>>> id(a_list)
35465096 
```

如您所见，它`id`不会随切片分配版本而改变。

* * *

两者之间的差异可能会导致完全不同的结果，例如，当列表是函数的参数时：

```
def foo(a_list):
    a_list[:] = ['foo', 'bar']

a = ['original']
foo(a)
print(a) 
```

有了这个，`a`也被修改了，但如果 `a_list = ['foo', 'bar']`被使用，则`a`保持其原始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T07:19:36.823

```
a_list = ['foo', 'bar']
a=a_list[:]  # by this you get an exact copy of a_list 
print(a)
a=[1,2,3] # even if you modify a it will not affect a_list
print(a)
print(a_list) 
```

# actionscript-3 - Flex 4：Scroller 中的部分内容未显示

> ID：10155952
> 
> 赞同：-1
> 
> 时间：2012-04-14T17:57:47.903
> 
> 标签：actionscript-3, apache-flex, flex4, scroller

在我的项目中，我有一个面板，它使用我基于 Spark 面板皮肤创建的自定义皮肤。在这个皮肤中，我向显示组（“contentGroup”）添加了一个 Spark Scroller，我向该组添加了具有一些标签和图像的“ListItems”。

直到今天，当我注意到当垂直滚动条到达底部时，一切都运行良好，仍然有内容要显示，如图所示：

（由于我不能发布图片，这里是链接：[http](http://s10.postimage.org/uwfqfqp15/Panel.jpg) ://s10.postimage.org/uwfqfqp15/Panel.jpg ）

正如您在图像中看到的那样，Scroller 垂直滚动条已经到了尽头，但仍有一些东西低于下限（您可以看到我的简单自定义滚动条还没有到达底部）。

这是面板皮肤代码的一部分（滚动条部分）：

**面板皮肤.mxml：**

```
<s:Group id="algoGroup" x="0" y="0" width="100%" height="100%" minWidth="0" minHeight="0">
    <s:Scroller id="contentScroller" x="0" y="0" width="85%" height="100%" minWidth="0" minHeight="0">
        <s:Group id="contentGroup" x="0" y="0" width="85%" height="100%" minWidth="0" minHeight="0">
        </s:Group>
    </s:Scroller>
    <componentes:customScroller id="contentScrollbar" x="10" y="10" width="10%" height="100%"/>
</s:Group> 
```

**ListaItem.mxml**：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx"
     contentBackgroundAlpha="0.0"
     currentState="Horizontal"
     width.Horizontal="200" height.Horizontal="100"
     height.Vertical="260" width.Vertical="128">
<s:states>
    <s:State name="Horizontal"/>
    <s:State name="Vertical"/>
</s:states>
<fx:Declarations>
<fx:Script>
    <![CDATA[

        import objectos.GlobalVars;

        /*Vars - State -> Vertical
        Bindable Vars -- Omitted
        */

        public var ID:Number = -1;

        public function resize(nW:Number, nH:Number):void
        {
            if(this.currentState == "Vertical")
            {
                _realIW = _iW2 = (_iW2 * nW) / _w2;
                _realIH = _iH2 = (_iH2 * nH) / _h2;

                if(_iW2 > _iH2)
                    _iW2 = _iH2;
                else
                    _iH2 = _iW2;

                _xImg = (_xImg * nW) / _w2;
                _yImg = (_yImg * nH) / _h2;

                _xTit = (_xTit * nW) / _w2;
                _yTit = (_yTit * nH) / _h2;
                Titulo.width = (Titulo.width * nW) / _w2;

                Titulo.setStyle("fontSize", (GlobalVars.instance.getGlobal("fontSize") * 0.9));

                _xDes = (_xDes * nW) / _w2;

                if(Titulo.measureText(Titulo.text).width > Titulo.width)
                    _yDes = (_yDes * nH) / _h2;
                else
                    _yDes = Titulo.y + Titulo.measureText(Titulo.text).height;

                Descricao.width = (Descricao.width * nW) / _w2;

                Descricao.setStyle("fontSize", (GlobalVars.instance.getGlobal("fontSize") * 0.7));

                _xPre = (_xPre * nW) / _w2;
                _yPre = (_yPre * nH) / _h2;
                Preco.width = (Preco.width * nW) / _w2;

                _xIco = (_xIco * nW) / _w2;
                _yIco = (_yIco * nH) / _h2;
                IconEspecial.width = (IconEspecial.width * nW) / _w2;
                IconEspecial.height = (IconEspecial.height * nH) / _h2;

                _xDeL = (_xDeL * nW) / _w2;
                _yDeL = (_yDeL * nH) / _h2;
                DescricaoL.width = (DescricaoL.width * nW) / _w2;

                DescricaoL.setStyle("fontSize", (GlobalVars.instance.getGlobal("fontSize") * 0.7));
            }
            else
            {
                _realIW = _iW = (_iW * nW) / _w;
                _realIH = _iH = (_iH * nH) / _h;

                if(_iW > _iH)
                    _iW = _iH;
                else
                    _iH = _iW;

                Imagem.x = (Imagem.x * nW) / _w;
                Imagem.y = (Imagem.y * nH) / _h;

                Titulo.x = (Titulo.x * nW) / _w;
                Titulo.y = (Titulo.y * nH) / _h;
                Titulo.width = (Titulo.width * nW) / _w;

                Titulo.setStyle("fontSize", (GlobalVars.instance.getGlobal("fontSize") * 0.9));

                Descricao.x = (Descricao.x * nW) / _w;
                Descricao.y = (Descricao.y * nH) / _h;
                Descricao.width = (Descricao.width * nW) / _w;

                Descricao.setStyle("fontSize", (GlobalVars.instance.getGlobal("fontSize") * 0.7));

                Preco.x = (Preco.x * nW) / _w;
                Preco.y = (Preco.y * nH) / _h;
                Preco.width = (Preco.width * nW) / _w;

                IconEspecial.x = (IconEspecial.x * nW) / _w;
                IconEspecial.y = (IconEspecial.y * nH) / _h;
                IconEspecial.width = (IconEspecial.width * nW) / _w;
                IconEspecial.height = (IconEspecial.height * nH) / _h;

                _sW = (_sW * nW) / _w;
                _sY = (_sY * nH) / _h;
            }
        }

        private function resizeImg():void
        {
            var ratio:Number = Imagem.contentWidth / Imagem.contentHeight;

            if(Imagem.contentWidth > Imagem.contentHeight)
            {
                if(this.currentState == "Vertical")
                {
                    Imagem.width = _iW2;
                    Imagem.height = _iW2 / ratio;   
                }
                else
                {
                    Imagem.width = _iW;
                    Imagem.height = _iW / ratio;
                }
            }
            else
            {
                if(Imagem.contentHeight > Imagem.contentWidth)
                {
                    if(this.currentState == "Vertical")
                    {
                        Imagem.height = _iH2;
                        Imagem.width = _iH2 * ratio;
                    }
                    else
                    {
                        Imagem.height = _iH;
                        Imagem.width = _iH * ratio;
                    }
                }
                else
                {
                    if(this.currentState == "Vertical")
                    {
                        Imagem.height = (_iH2 > _iW2)?_iW2:_iH2;
                        Imagem.width = ((_iH2 > _iW2)?_iW2:_iH2) * ratio;
                    }
                    else
                    {
                        Imagem.height = (_iH > _iW)?_iW:_iH;
                        Imagem.width = ((_iH > _iW)?_iW:_iH) * ratio;
                    }
                }
            }

            Imagem.x += (_realIW - Imagem.width) / 2;
            Imagem.y += (_realIH - Imagem.height) / 2;
        }

        public function get useBar():Boolean
        {
            if(Separador != null)
                return Separador.visible;
            else
                return false;
        }
        public function set useBar(value:Boolean):void
        {
            if(Separador != null)
                Separador.visible = value;
        }
    ]]>
</fx:Script>
<mx:Image id="Imagem" x.Horizontal="10" y.Horizontal="10" x.Vertical="{_xImg}" y.Vertical="{_yImg}" maintainAspectRatio="false" complete.Horizontal="resizeImg()" complete.Vertical="resizeImg()"/>
<s:Label id="Titulo" x="98" y="10" text="Label" width="102" maxDisplayedLines="2" x.Vertical="{_xTit}" y.Vertical="{_yTit}" verticalAlign.Vertical="middle" textAlign.Vertical="left"/>
<s:Label id="Descricao" x="98" y="43" text="Label" width="102" maxDisplayedLines="3" color="#999999" x.Vertical="{_xDes}" y.Vertical="{_yDes}"/>
<s:Label id="Preco" x="113" y="78" text="Label" width="87" maxDisplayedLines="1" x.Vertical="{_xPre}" y.Vertical="{_yPre}"/>
<mx:Image x="93" y="73" width="20" height="20" id="IconEspecial" x.Vertical="{_xIco}" y.Vertical="{_yIco}"/>
<mx:HRule id="Separador" x="0" y="{_sY}" width="{_sW}" strokeColor="#000000" shadowColor="#000000" includeIn="Horizontal"/>
<s:Label id="DescricaoL" x.Horizontal="1" y.Horizontal="177" x.Vertical="{_xDeL}" y.Vertical="{_yDeL}" text="Label" width="127" color="#999999" visible.Horizontal="false" maxDisplayedLines="3"/>
</s:Group> 
```

这是用于动态添加组件的代码（编辑为仅包含相关部分）：

```
 var item:ListaItem = new ListaItem();

        var iW:Number = 0;
        var iH:Number = 0;

        if(yPos == -1 || xPos == -1)
        {
            yPos = 0 - ((_group.height - (10 * (_maxProdutosVisiveis - 1))) / _maxProdutosVisiveis) - 10;
            xPos = 0;
        }

        yPos += ((_group.height - (10 * (_maxProdutosVisiveis - 1))) / _maxProdutosVisiveis) + 10;
        xPos = 0;
        iW = _group.width;
        iH = ((_group.height - (10 * (_maxProdutosVisiveis - 1))) / _maxProdutosVisiveis);

        item.x = xPos;
        item.y = yPos;

        item.ID = obj.idProduto;
        item.Titulo.text = (obj.Titulo_Produto != null)?obj.Titulo_Produto:obj.Titulo;
        item.Descricao.text = obj.Descricao;
        item.Preco.text = obj.Valor + " €";

        item.IconEspecial.source = this.specialIcon;

        _margem = iH + 10; 

        item.addEventListener(MouseEvent.CLICK, goToApresentacao);

        _group.addElement(item);
        _components.addItem(item);

        item.width = iW;
        item.height = iH;

        item.Imagem.source = obj.url; 
```

`_maxProdutosVisiveis`是同时最大可见产品 `obj`是保存 ListItem 数据的对象

我认为我已经包含了所有相关的内容，但请随时要求其他任何内容。

有没有办法解决这个问题？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:49:45.270

经过数小时的搜索并尝试解决问题的不同方法后，我注意到我忘记为 ListaItem 添加默认高度和宽度。

改变：

**ListaItem.mxml**：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    contentBackgroundAlpha="0.0"
    currentState="Horizontal"
    width.Horizontal="200" height.Horizontal="100"
    height.Vertical="260" width.Vertical="128"> 
```

至：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    contentBackgroundAlpha="0.0"
    currentState="Horizontal"
    width="200" height="100"
    height.Vertical="260" width.Vertical="128"> 
```

让一切重新工作。无论如何谢谢大家:)

# perl - 部署依赖于 C 的 Perl 库

> ID：10155955
> 
> 赞同：1
> 
> 时间：2012-04-14T17:58:02.163
> 
> 标签：perl, ncurses, curses

我有一个部署在 Linux (Red Hat) 和 Unix (Solaris) 上的应用程序。我的应用程序使用内置 Perl 自行安装，然后创建自己的本地 Perl（新用户）。

我想知道最好的部署方式是[`Curses::UI`](http://search.cpan.org/~mdxi/Curses-UI-0.9609/lib/Curses/UI.pm)什么？目前我通过将其他模块复制到我的本地 perl`lib`文件夹来安装它们，但这些是不依赖于 C 库（.so 共享对象、XS 等）的纯 Perl 模块。

我还必须`libncurses`事先为每个平台编译吗？

**注意：**计算机没有网络连接，因此我无法使用 CPAN 模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:46:58.900

您应该使用 CPAN 客户端（CPAN.pm、CPANPLUS）从 CPAN 部署模块，例如 Curses::UI。通常你需要开发库来编译 XS 模块。对于 Curses::UI，Ubuntu 软件包称为`libncurses-dev`. 其他 Linux 发行版可能具有相同或相似名称的 ncurses 开发包。

你说你有一个本地 Perl 库。拥有本地库的一个非常好的方法是使用同名模块 - [local::lib](http://p3rl.org/local%3a%3alib)。它的文档将告诉您如何使用 CPAN 客户端轻松地将模块安装到您的 local::lib 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:50:49.953

对于需要构建的 CPAN 模块，请尝试查看[carton](https://metacpan.org/module/carton)。它有一个 bundle 命令，可以将所有的 cpan 模块捆绑在一起，这样它们就可以在目标机器上安装/构建，而无需涉及任何网络。

至于 libcurses，如果尚未安装，我可能倾向于使用自定义安装程序在目标机器上构建它。除非找到该库，否则将拒绝安装您的软件。不幸的是，除了执行自定义构建脚本之外，我不知道在本地构建依赖 C 库的好方法。

# php - 尝试在我的课堂上向 mysql 发送第二个查询时出错

> ID：10155957
> 
> 赞同：1
> 
> 时间：2012-04-14T17:58:11.157
> 
> 标签：php, mysqli

我有这段代码，但是当我尝试对 db 进行第二次查询时它崩溃了，为什么？这是代码的一部分，它崩溃了

```
if ($this->doRegister === true) {
        $db = DB::connect();

        $stmt = $db->prepare('SELECT `user_id` FROM `users` WHERE `user_name` = ? OR `user_email` = ? LIMIT 1');

        $stmt->bind_param('ss', $this->store['userData']['name'], $this->store['userData']['email']);
        $stmt->execute();
        $stmt->bind_result($userId);
        $stmt->fetch();

        if (is_numeric($userId)) {
            $stmt = $db->prepare('INSERT INTO `users`(`user_name`, `user_password`, `user_email`, `user_ip`, `user_dateRegistered`, `user_type`) VALUES (?, ?, ?, ?, ?, ?)');

            $hashedPassword = $this->encrytion('md5', md5($this->store['userData']['name']) . md5($this->store['userData']['password']));
            $dateRegistered = time();
            $type = 1;

            $stmt->bind_param('ssssii', $this->store['userData']['name'], $hashedPassword, $this->store['userData']['email'], $_SERVER['REMOTE_ADDR'], $dateRegistered, $type);
            $stmt->execute();

            $this->registerUser();
        } else {
            return array('register' => 'User name or email already exists');
        }
    } else {
        return $this->store['userDataState'];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:15:01.830

在执行/准备新查询之前，您需要关闭它。

```
$stmt->close(); 
```

# firefox - Firefox 文本渐变

> ID：10155961
> 
> 赞同：5
> 
> 时间：2012-04-14T17:58:36.657
> 
> 标签：firefox, css

我想知道是否有办法在 Firefox 中应用文本渐变？我可以让它在 Chrome 和 Safari 中工作，代码如下：

```
h1 {
    background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#000000));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
    text-transform: uppercase;
    font: bold 4em "Lucida Grande", Lucida, Verdana, sans-serif;
} 
```

但是 Mozilla 似乎没有任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T18:06:07.393

不幸的是，我认为只有基于 WebKit 的浏览器实现了该`text-fill-color`属性。据我所知，Mozilla 还没有解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-06T11:07:26.830

FireFox 现在似乎支持 webkit 参数，别名`-webkit-background-clip`为`background-clip`（webkit 不给它别名，因此目前最兼容的方式似乎是使用 -webkit-backgroup-clip，因为 FF 和 WK 都理解它）

[![在此处输入图像描述](../Images/beb0a27e0ac361deb4ffdd2d348a7090.png)](https://i.stack.imgur.com/53KLI.png)

# svg - svg中的可拖动矩形仅在屏幕上进行诊断

> ID：10155962
> 
> 赞同：0
> 
> 时间：2012-04-14T17:58:45.020
> 
> 标签：svg, draggable

我尝试制作一个小程序，在其中编写代码以在 svg 中拖动一个矩形。该程序非常简单。我的问题是矩形只在屏幕上拖动而不是在整个网页上拖动。

这是我的代码..

```
<?xml version="1.0"?>
 <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
 <svg xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 width="100%" height="100%"
 onload="Init( evt )" >

<script type="text/ecmascript">
   //<![CDATA[
var svgDocument;
var svgRoot;
var newP;
var bmousedown=0;
var myCirc;

function Init(evt){

svgRoot= document.getElementsByTagName("svg")[0];

   newP = svgRoot.createSVGPoint();
   myCirc = document.getElementById("mycirc");
   }

function getMouse(evt){
   var position = svgRoot.createSVGPoint();
   position.x = evt.clientX;
   position.y = evt.clientY;
   return position;
   }

function onMouseDown(evt){
   bmousedown=1;
   newP=getMouse(evt);
   doUpdate();
   }

function onMouseMove(evt){
   if(bmousedown){
       newP=getMouse(evt);
       doUpdate();
       }
   }

function onMouseUp(evt){
   bmousedown=0;
   }

function doUpdate(){
   myCirc.setAttributeNS(null, "x", newP.x );
   myCirc.setAttributeNS(null, "y", newP.y );
   }

// ]]></script>

<rect id="mycirc" fill: #bbeeff" x="0" y="0" width="80" height="80"

   pointer-events="visible"
   onmousedown="onMouseDown(evt)"
   onmousemove="onMouseMove(evt)"
   onmouseup="onMouseUp(evt)"/>

</svg> 
```

请帮助我，因为我无法理解为什么它不在整个屏幕上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:47:52.337

我看到在 Firefox 上重新创建了这个问题，但这不是一个问题，你的代码到处都是。我建议在发布具体问题之前回到绘图板。

我还推荐一个[关于 SVG](https://developer.mozilla.org/en/SVG/Tutorial)或使用[JS 矢量图形库](http://raphaeljs.com/)的好参考，因为如果您对深入了解细节不感兴趣，它会简化一些事情并大大简化开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:55:49.360

这是正确的解决方案：http: [//jsfiddle.net/mihaifm/5GHJs/](http://jsfiddle.net/mihaifm/5GHJs/)

我认为你犯的错误：

*   `onload="Init( evt )"` 使变量成为`evt`全局变量，这是一件糟糕且无用的事情。所有的函数也是全局的，但是对于这个例子来说应该没问题。
*   等的函数调用`onmousedown`正在使用这个 global `evt`。（错误的）。为了获得每个调用的正确事件，您需要注册一些处理程序。

# android - 为什么我不能终止使用 killBackgroundProcesses 开始的 Activity？

> ID：10155964
> 
> 赞同：1
> 
> 时间：2012-04-14T17:58:51.153
> 
> 标签：android, android-intent

好吧，我很难过:-(

作为一个实验，我一直在尝试启动一个 Activity，然后稍后使用 ActivityManager 包中的 killBackgroundProcesses 将其关闭。我没有收到任何错误。它似乎什么也没做。

下面的代码尽可能地缩小了范围。就像测试一样，我启动了 Activity（成功），然后当我的 onPause 方法被调用时，我尝试并停止我刚刚启动的操作（在我的真实代码中，这发生在很久以后）。

输入这个，我想到也许在当前屏幕上的 Activity 上使用 killBackgroundProcesses 可能没有意义。如果是这样，还有其他方法可以停止此活动吗？我没有这个其他应用程序的来源，我启动了它，现在我只想让它消失。而且我也意识到这不是一个正常的 Activity 生命周期行为，但至少现在，这对我来说是一个特例。

我将不胜感激任何见解或解决方案。

谢谢！

显现：

```
...
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/>
... 
```

代码：

```
public class MainActivity extends Activity
{
    static String PACKAGE = "com.abc.def";

    ...

    Intent i = getPackageManager().getLaunchIntentForPackage( PACKAGE );
    startActivity( i );
    ...

    @Override
    protected void onPause()
    {
        // just to see if we can, kill the activity we just started
        ActivityManager manager =  (ActivityManager)getApplicationContext().getSystemService( Context.ACTIVITY_SERVICE );

        manager.killBackgroundProcesses( PACKAGE );     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:05:42.057

只有 Android 框架（内部系统或合作伙伴 rom 开发人员，如 HTC、Samsung 等）才允许调用**killBackgroundProcesses**，而第三方应用程序则不允许。相反，您应该调用`finish();`Activity 的**onPause**或**onStop**方法，以便在它离开屏幕时自动销毁它。

# wifi - WiFly shield + Arduino + 自动连接问题

> ID：10155967
> 
> 赞同：2
> 
> 时间：2012-04-14T17:59:13.243
> 
> 标签：wifi, arduino, processing

我在 Arduino 上使用 WiFly shield，一切正常：我通过 USB 将我的 skecth 上传到 Arduino，连接 9V 电池，断开 USB，wifi 模块传输一切正常（它将数据传输到我的网络服务器）。

当电池用完时，我用另一个电池更换，但是 wifi/arduino 不再与我的服务器通信..

我是 Arduino 的新手，我不明白是否每次断电时 Arduino 都会丢失程序，或者只是 wifi 无法自动连接......

这是软件问题还是硬件问题？如果软件我做错了什么？

这是我的草图示例 - 我只是向我的服务器发送一个字符串：

```
#include "WiFly.h"
#include "Credentials.h" // includes ny user:pass wifi network

Client client("[***myserverip***]", 80);

void setup() {      
  Serial.begin(9600);

  WiFly.begin();

  if (!WiFly.join(ssid, passphrase)) {
    Serial.println("Association failed.");
    while (1) {
      // Hang on failure.
    }
  }  

  connectServer();
}

void loop() {
  if (client.available()) {
    char c = client.read();
    Serial.print(c);
  } 

  if (!client.connected()) {
    Serial.println();
    Serial.println("disconnecting.");
    client.stop();
    delay(60000); // check every minute
    connectServer();
  }
}

void connectServer() {  
  Serial.println("connecting...");

  if (client.connect()) {
    Serial.println("connected");
    String query = "GET /arduino/test?q=testString  HTTP/1.0";

    client.println(query);
    client.println();
  } else {
    Serial.println("connection failed");
  }
} 
```

所以一切正常，但是当我拔下电源并将其重新插入时，arduino 不会重新启动该过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:45:15.193

我自己找到了解决方案——问题出在硬件上。

问题出在我的 Arduino UNO R2 中，有一个已知错误。

我买了一个UNO R3，我没有这个问题了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T06:10:16.690

这是因为 Arduino 板在使用外部电源时没有板载上电复位功能，因此您始终需要在供电后对其进行复位。您可以在复位引脚处放置一个电容器来消除此问题。但是，如果您使用 USB 作为电源，那么 USB 控制器将重置 Arduino，因此在这种情况下您将永远不会遇到这个问题。

# c++ - 在 Visual Studio 2010 中使用 OpenGL - 错误 LNK2019：未解析的外部符号 _WinMain@16 在函数 ___tmainCRTStartup 中引用

> ID：10155969
> 
> 赞同：1
> 
> 时间：2012-04-14T17:59:58.530
> 
> 标签：c++, visual-studio-2010, opengl

我正在 Visual Studio 中编译这个 OpenGL 程序。在阅读了许多文章之后，我已经正确设置了它。我已将正确的库添加到链接器的附加依赖项中。但是我收到此错误：

错误 LNK2019：函数 _ _tmainCRTStartup中引用了未解析的外部符号*WinMain@16*

我正在编译的代码是：

```
#include <windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>

void init(void) 
{
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glShadeModel (GL_FLAT);
}

void display(void)
{
   glClear (GL_COLOR_BUFFER_BIT);
   glColor3f (1.0, 1.0, 1.0);
   glLoadIdentity ();             /* clear the matrix */
           /* viewing transformation  */
   gluLookAt (0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   glScalef (1.0, 2.0, 1.0);      /* modeling transformation */ 
   glutWireCube (1.0);
   glFlush ();
}

void reshape (int w, int h)
{
   glViewport (0, 0, (GLsizei) w, (GLsizei) h); 
   glMatrixMode (GL_PROJECTION);
   glLoadIdentity ();
   glFrustum (-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);
   glMatrixMode (GL_MODELVIEW);
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
   glutInitWindowSize (500, 500); 
   glutInitWindowPosition (100, 100);
   glutCreateWindow (argv[0]);
   init ();
   glutDisplayFunc(display); 
   glutReshapeFunc(reshape);
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T19:22:07.420

Windows 中有两种可执行文件：

1.  安慰
2.  图形用户界面 (Windows)

唯一的区别是控制台可执行文件自动打开控制台窗口，并且 C/C++ CRT 运行时关联标准 stdout/stdin/stderr 句柄以转到此窗口。否则，这两种可执行类型之间没有区别——两者都可以创建新的 Windows、绘制东西、使用 OpenGL 等等……

在 Visual Studio 中，如果您创建控制台应用程序 - 那么它希望您的入口点被称为“main”。但是对于 GUI 应用程序，它期望入口点函数被称为“WinMain”。因此，如果您不想在应用程序启动时看到控制台窗口，您有两种选择：

1.  更改项目链接器设置以指示您正在构建 GUI 应用程序（项目属性 -> 链接器 -> 系统 -> 子系统 = Windows）。这将需要调用 WinMain 的入口点函数：http: [//msdn.microsoft.com/en-us/library/ff381406.aspx](http://msdn.microsoft.com/en-us/library/ff381406.aspx)
2.  向链接器指示即使您想使用 GUI 应用程序，但您希望您的入口点被称为“main”。您可以在项目属性 -> 链接器 -> 高级 -> 入口点 = mainCRTStartup 中执行此操作。不要放在那里主要。放在那里 mainCRTStartup - 这是一个特殊的 C/C++ CRT 函数，它初始化标准 C 库并自动调用你的 main 函数。继承人有关此设置的文档：http: [//msdn.microsoft.com/en-us/library/f9t8842e.aspx](http://msdn.microsoft.com/en-us/library/f9t8842e.aspx)

使用第二个选项意味着您可以使用 GLUT，将您的入口点称为“main”，并且在启动时没有打开控制台窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:01:30.420

您可能正在使用一些不希望您定义的非标准 Microsoft 扩展`main`，但是`WinMain`.

尝试将 main 定义为：

```
int _tmain(int argc, _TCHAR* argv[]) 
```

或者

```
int WinMain(int argc, _TCHAR* argv[]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:05:15.420

您应该将项目创建为控制台应用程序，而不是 Windows 应用程序。

如果您*不*希望您的程序成为控制台应用程序，则需要跳过使用 GLUT。然后你要做的是创建一个普通的 Windows 应用程序并创建你自己的 OpenGL 渲染窗口。这是一个相当复杂的过程，但[NeHe](http://nehe.gamedev.net/)提供了满足您所有 OpenGL 编程需求的教程。在这种情况下，我会推荐[这个](http://nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/)。

# perl - HTTP 请求不通过代理

> ID：10155971
> 
> 赞同：1
> 
> 时间：2012-04-14T18:00:22.337
> 
> 标签：perl, proxy, lwp-useragent

我已经编写了这段代码来通过代理触发 http 请求。但是请求似乎没有使用代理。即使我提供了错误的代理，它也会返回正常。

有什么方法可以检查 HTTP 请求是否通过代理？这段代码有什么问题使它不使用代理？

```
sub fire_http_request_through_proxy()
{
    my $proxy = $_;
    my $ua = LWP::UserAgent->new;
    $ENV{HTTP_PROXY} = $proxy;
    $ua->env_proxy; # initialize from environment variables
    $ua->timeout(20);
    my $response = $ua->get('http://www.google.com');
    delete $ENV{HTTP_PROXY};
    if ($response->is_success)
    {
       print $response->decoded_content . "\n";
    }
    else
    {
       die $response->status_line;
    }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:26:37.383

Sebastian 和 oalders 已经解决了你的问题，但我只想指出，你不需要乱来`$ENV{HTTP_PROXY}`——你可以使用[`$ua->proxy()`](http://search.cpan.org/perldoc?LWP%3A%3AUserAgent#Proxy_attributes)，像这样：

```
$ua->proxy( http => 'http://1.1.1.1' ); 
```

甚至：

```
$ua->proxy( ['http', 'https', 'ftp'] => 'http://1.1.1.1' ); 
```

* * *

附言。如果您*真的*想检查 LWP 为特定请求使用了哪个代理，您可以查看`$response->request->{proxy}`，它应该是一个[URI 对象](http://search.cpan.org/dist/URI/URI.pm)。然而，据我所知，这个属性是无证的（我通过阅读源代码发现了它），因此在 LWP 的更高版本中可能会发生变化。使用风险自负！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:55:40.497

您确定 $_ 具有真实价值吗？这对我来说很合适：

```
#!/usr/bin/env perl

use strict;
use warnings;
use LWP::UserAgent;

fire_http_request_through_proxy();

sub fire_http_request_through_proxy {
    my $ua = LWP::UserAgent->new;
    local $ENV{HTTP_PROXY} = 'http://1.1.1.1';
    $ua->env_proxy;    # initialize from environment variables
    $ua->timeout( 20 );
    my $response = $ua->get( 'http://www.google.com' );
    delete $ENV{HTTP_PROXY};
    if ( $response->is_success ) { 
        print $response->decoded_content . "\n";
    }   
    else {
        die $response->status_line;
    }   
} 
```

所以，也许 $_ 不是你想的那样。如果未定义，则不会使用代理。话虽如此， $_ 可能不是您要在此处使用的变量。您可以声明一个在这种情况下使用的变量，将一个变量权传递给子例程，或者在脚本之外实际设置一个 ENV 变量。

还有一点。无需在脚本中设置和删除 ENV var，只需使用 local 声明更改，它只会在此代码块内生效。这样您就不必自己清理，也不会冒险覆盖可能已在其他地方设置的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T19:19:09.950

看看你的代码`sub fire_http_request_through_proxy()`，尤其是最后两个字符......这是一个原型。基本上你是在说*“我在编译时不接受任何参数”*。

我猜您只是在声明之前调用该方法-> **Always** `use warnings`：

> main::fire_http_request_through_proxy() 调用太早，无法在 test.pl 行检查原型...

因此，要么将其更改为，要么将其`fire_http_request_through_proxy`更改为`fire_http_request_through_proxy($)`并在声明后调用它。

更多关于[perlsub](http://perldoc.perl.org/perlsub.html#Prototypes)中的原型设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T20:08:06.227

确定

*   将参数读取为`$_[0]`or `pop`, not`$_`
*   不包括`()`在`sub`定义中

***脚本：***

```
sub fire_http_request_through_proxy {
  my $proxy = $_[0];
  my $timeout = 20;
  my $url = 'http://www.google.com';
  my $ua = LWP::UserAgent->new;
  $ua->proxy(['http', 'https', 'ftp'] => $proxy);
  $ua->timeout($timeout);
  my $response = $ua->get($url);
  if ($response->is_success) {
    print $response->decoded_content . "\n";
  }
  else {
    die $response->status_line;
  }  
} 
```

***测试*：**

为了使它工作，代理的参数必须是正确的格式（http://host:port）

```
fire_http_request_through_proxy('http://176.34.248.142:9050'); 
```

# php - “必须使用活动访问令牌来查询有关当前用户的信息”facebook 错误

> ID：10155974
> 
> 赞同：0
> 
> 时间：2012-04-14T18:00:56.513
> 
> 标签：php, facebook, oauth, facebook-access-token

我正在 Facebook 上开发应用程序，但遇到了一些问题。基本上，在用户赢得游戏后，我会要求他在墙上贴出他的成功（比如“看！我赢了游戏！也以*游戏的名字*玩这个游戏！” -> 这是罗马尼亚语位的翻译以下代码）。我正在使用这段代码：

> if ($raspuns == "Yer Blues") {
> 
> echo("Bravo！Ai castigat jocul！Intoarce-te saptamana viitoare cand se va posta un alt set de melodii！");
> 
> $access_token = $facebook->getAccessToken();
> 
> $wall_post = array('message' => 'Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!',
> 
> ```
>  'name' => 'Campion Ghiceste Melodia',
> 
>             'caption' => "Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!",
> 
>             'link' => 'https://apps.facebook.com/revistafloyd/',
> 
>             'description' => 'Revista Floyd este o revista despre muzica rock.',
> 
>             ); 
> ```
> 
> $result = $facebook->api('/me/feed/', 'post', $wall_post);
> 
> }

但是每当用户输入正确答案时，我都会收到此消息：

> 致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1106 行抛出 /home/pasarel/public_html/face/src/base_facebook.php

这是为什么？我提到我同时拥有用户和应用程序访问令牌，那怎么了？我在某处读到它可能缺少“会话”部分（此处：[http](http://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens/) ://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens/ ）。这可能是答案吗？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:26:46.400

## 简单地

**改变这个**

```
$wall_post = array('message' => 'Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!',

            'name' => 'Campion Ghiceste Melodia',

            'caption' => "Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!",

            'link' => 'https://apps.facebook.com/revistafloyd/',

            'description' => 'Revista Floyd este o revista despre muzica rock.',

            ); 
```

**对此**

```
$wall_post = array('access_token' => $access_token ,
'message' => 'Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!',

            'name' => 'Campion Ghiceste Melodia',

            'caption' => "Am castigat jocul Ghiceste Melodia! Joaca si tu cu Revista Floyd!",

            'link' => 'https://apps.facebook.com/revistafloyd/',

            'description' => 'Revista Floyd este o revista despre muzica rock.',

            ); 
```

## 更新

尝试改变这一点

```
$WallPost = array(
                        'access_token' => $access_token,
                        'message' => $message,
                        'link' => $link,
                        'name' => $name,
                        'caption' => $caption,
                        'description' => $description);

                        $response = $facebook->api('/me' . '/feed','POST',$WallPost); 
```

# jsf - form enctype="multipart/form-data" 导致验证失败的 ajax 部分响应

> ID：10155979
> 
> 赞同：0
> 
> 时间：2012-04-14T18:01:26.343
> 
> 标签：jsf, jsf-2, primefaces

当 STATE_SAVING_METHOD= client [.](http://code.google.com/p/primefaces/issues/detail?id=507) [当我们使用 Servlet 3.0 时，](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html)我想使用 BalusC 代码。我面临的问题是当我单击提交按钮时，我收到了这样的 ajax 部分响应

```
 <?xml version="1.0" encoding="UTF-8" ?>
  <partial-response>
    <changes>
     <update id="javax.faces.ViewState">
      <![CDATA[somejunk]]> 
     </update>
    </changes>
   <extension primefacesCallbackParam="validationFailed">{"validationFailed":false}</extension> 
```

它从不调用 FileRenderer.java 中的解码方法。如果我删除 enctype，它正在调用 decode 方法并且显然无法在线转换为 MultipartRequest：

```
 File file = ((MultipartRequest) context.getExternalContext().getRequest()).getFile(clientId); 
```

库：PF 2.2.1 JSF 2.0.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:28:30.003

虽然我从 STATE_SAVING_METHOD=server 切换到客户端。我忘了删除`org.primefaces.webapp.filter.FileUploadFilter`我的 web.xml 中的。所以 Primefaces`FileUploadFilter`每次都用部分 ajax 响应来响应。我删除了它，它现在工作正常。

@BalusC，感谢您的精彩代码！

# javascript - 在javascript中将参数传递给结果处理函数

> ID：10155981
> 
> 赞同：1
> 
> 时间：2012-04-14T18:01:50.267
> 
> 标签：javascript

我正在`XMLHttpRequest`调用 Google 搜索 API URL。在得到响应时，我想调用另一个结果处理函数。但我也想将参数传递给它。

```
request = new XMLHttpRequest();

if(request) {
    var url = "http://localhost:8080/final_project/SearchService";
    url += "?user_query=" + getQueryString();

    request.onreadystatechange = handleSearchResult;
    request.open("GET", url, true);
    request.send(null);
} 
```

这`handleSearchResult`是`resultHandler`，我想将参数传递给这个函数。但如果我这样做，函数会被直接调用。

可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:03:47.033

使用闭包将其包围：

```
request.onreadystatechange = function() {
  handleSearchResult(yourParameter);
} 
```

# java - ANT - 如何使用 Java 从 ant 库中获取可用任务列表

> ID：10155993
> 
> 赞同：0
> 
> 时间：2012-04-14T18:02:58.870
> 
> 标签：java, ant

我需要在运行时获取可用的 ant 任务列表。基本上使用用户类路径中包含的ant库并列出所有的ant任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:37:13.197

由于 vanilla ant 的任务定义是通过 ant.jar 中的普通属性文件定义的，因此您可以使用：

```
<project>
 <property url="jar:file:/path/to/your/ANT_HOME/ant.jar!/org/apache/tools/ant/taskdefs/defaults.properties" prefix="antcoretasks"/>
 <echoproperties prefix="antcoretasks"/>
</project> 
```

列出 ant 核心任务，输出：

```
[echoproperties] #Ant properties
[echoproperties] #Sat Apr 14 21:23:41 CEST 2012
[echoproperties] antcoretasks.ant=org.apache.tools.ant.taskdefs.Ant
[echoproperties] antcoretasks.antcall=org.apache.tools.ant.taskdefs.CallTarget
[echoproperties] antcoretasks.antlr=org.apache.tools.ant.taskdefs.optional.ANTLR
[echoproperties] antcoretasks.antstructure=org.apache.tools.ant.taskdefs.AntStructure
[echoproperties] antcoretasks.antversion=org.apache.tools.ant.taskdefs.condition.AntVersion
... etc. 
```

或将它们写入文件：

```
<echoproperties prefix="antcoretasks" destfile="some.file"/> 
```

如果有任何进一步的要求，您必须在您的问题中提供更多详细信息。

# objective-c - 来自不同类的方法两次

> ID：10155994
> 
> 赞同：0
> 
> 时间：2012-04-14T18:03:11.513
> 
> 标签：objective-c, xcode, cocoa

我在我的 AppDelegate 中有一个我创建的窗口，然后当我使用 newContentView 执行任何操作（例如从 CutoutView 获取方法）时，我将内容视图设置为 NSView 子类“CutoutView”，它们工作得很好。

```
// Configure contentView in AppDelegate
    newContentView = [[CutoutView alloc]initWithFrame:window.frame];
    [window setContentView:newContentView]; 
```

现在我有另一个名为 MoveFilter 的 NSView 子类，我也希望能够从我的 CutoutView 调用方法。问题是为了做到这一点，我必须再次分配和初始化 CutoutView 方法，当我这样做时，可以调用这些方法，但没有显示任何内容，因为 CutoutView 之前已经分配和初始化。

```
 // in MoveFilter
 cutOutView = [[CutoutView alloc]init];
 [cutOutView someMethod]; 
```

我需要添加什么到 MoveFilter 或者我可以查看什么来帮助我能够调用它们将显示的方法，就像 newContentView 一样？对不起，我是新手，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:09:48.900

`CutoutView`从应用委托中获取现有的：

```
CutoutView * cv = [[NSApp delegate] newContentView]; 
```

（假设你有一个属性——看起来你正在把它放到一个 ivar 中。）

或从窗口：

```
// in MoveFilter
CutoutView * cv = [[self window] contentView]; 
```

（假设`MoveFilter`和`CutoutView`位于同一个窗口中。）

或者，如果这些假设都不成立，您可以结合这两个过程并获取应用程序委托窗口的内容视图。我会把它留给你作为练习。

# java - 如何处理 Java 中的字符集差异

> ID：10155996
> 
> 赞同：0
> 
> 时间：2012-04-14T18:03:23.240
> 
> 标签：java, html, utf-8, character-encoding

我正在使用这个 servlet 从另一个域中提取 HTML 内容以包含在我自己的带有 Ajax 的页面中，它将响应指定为“UTF-8”：

```
public class ProxyServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException  {
        String urlString = request.getParameter("url");
        try {
            URL url = new URL(urlString);
            url.openConnection();            
            BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
            response.setContentType("text/html; charset=UTF-8");
            PrintWriter out = new PrintWriter(new OutputStreamWriter(response.getOutputStream(), "UTF8"), true);
            char[] buf = new char[4 * 1024];
            int len;
            while ((len = reader.read(buf, 0, buf.length)) != -1) {
              out.write(buf, 0, len);
            }
            out.flush();
        }
        catch (MalformedURLException e) {     
            throw new ServletException(e);
        }
        catch (IOException e) {     
            throw new ServletException(e);
        }
    }
} 
```

我正在提取的文档有一个这样的元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta> 
```

我将它复制并粘贴到我自己的页面上，因此它完全匹配。根据浏览器页面信息，它*肯定*使用“UTF-8”编码。然而，在提取的 html 内容中，我仍然得到“Â”而不是“ ”。

它们实际上包含在 this 的 responseText 中`ProxyServlet`。我认为明确定义响应内容类型和输出流字符集可以处理这个问题，但我一定遗漏了什么？以前有没有人解决过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:09:41.880

您可以通过 byte[] 缓冲区从一个字节流复制到另一个字节流，而不是将字节流转换为字符，反之亦然。或者使用 Spring 工具：

```
FileCopyUtils.copy(uri.getInputStream(), response.getOutputStream()); 
```

或明确：

```
byte[] buffer = new byte[BUFFER_SIZE];
int bytesRead = -1;
while ((bytesRead = in.read(buffer)) != -1) {
    out.write(buffer, 0, bytesRead);
}
out.flush(); 
```

它将保证数据按原样复制（不会通过错误的字符搞砸）