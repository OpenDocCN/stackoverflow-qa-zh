# StackOverflow 问答 11797000-11797999

# c# - 在 List 中添加操作

> ID：11797000
> 
> 赞同：0
> 
> 时间：2012-08-03T13:44:41.030
> 
> 标签：c#, string, linq

> **可能重复：**
> [使用 linq 合并两个对象列表](https://stackoverflow.com/questions/720609/merge-two-object-lists-with-linq)

我有 2`Lists`种类型`string`：

```
List1 has items - item1, item2, item3

List2 has items - item1, item4, item5 
```

现在我需要比较两者`lists`并将缺少的添加`List2`到`List1`. 修改后的`List1`将是

```
list 1 : item1, item2, item3, item4, item5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:52:08.060

您可以`LiNQ`为此使用：

```
List<string> newList = List1.Union(List2).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:49:10.553

您可以尝试使用此代码 - 除了运算符

```
var result = List2.Except(List1);

foreach(string item in result )
{
   List1.Add(item);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:52:06.250

我会用 linq 来做

```
var result = List1.Union(List2); 
```

[http://msdn.microsoft.com/en-us/library/bb358407.aspx](http://msdn.microsoft.com/en-us/library/bb358407.aspx)

> 返回值 类型：System.Collections.Generic.IEnumerable 一个 IEnumerable，包含来自两个输入序列的元素，不包括重复项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:49:42.570

你可以用`LINQ`这个。

查看该`Except`方法，然后将生成的集合加入到您的原始集合中。

见：[http ://csharp.net-tutorials.org/category/linq-to-objects/linq-except/](http://csharp.net-tutorials.org/category/linq-to-objects/linq-except/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:48:10.823

一个简单的方法：

```
foreach(string item in List2)
{
if(!List1.Contains(item))
   List1.Add(item);
} 
```

当然有更短（代码长度）的选项

# ruby-on-rails - Rails 2 和 ajax - 几个选择列表

> ID：11797006
> 
> 赞同：0
> 
> 时间：2012-08-03T13:45:12.757
> 
> 标签：ruby-on-rails, ruby, ajax, haml

我不知道我做错了什么。我有几个选择列表：

*   地区
*   城市
*   组织

它应该如何工作：

1.  用户选择**区域**。
2.  **城镇**负载列表。
3.  用户选择**城镇**。
4.  **组织**负载列表。
5.  用户选择**组织**。

我为此使用了ajax，并且我意识到只能自动加载城镇列表，而我不能为组织做同样的事情。第二个选择列表根本**不发布！**

这是我的代码：

**看法**

```
%div
  %br/
  = select 'ajax', :region_id, [['Choose your region...', -1]] + Region.all.map{|region| [region.name, region.id]}.sort
  = image_tag('ajax-loader.gif', :id => 'ajax-progress', :style => 'display: none;')
  = observe_field :ajax_region_id, :url => { :controller => :organizations, :action => :list_towns, :preselect => (defined?(preselect) && !preselect.nil?) }, :with => 'region_id', :update => 'select_organization_idd', :loading => '$("ajax-progress").show();', :complete => 'if (Ajax.activeRequestCount == 1) $("ajax-progress").hide();'
  %br/
  = select 'ajax2', :o_id, [], {}, {:id => 'select_organization_idd', :style => 'width: 60em;'}
  = image_tag('ajax-loader.gif', :id => 'ajax-progress', :style => 'display: none;')
  = observe_field :ajax_region2_id, :url => { :controller => :organizations, :action => :list_region, :preselect => (defined?(preselect) && !preselect.nil?) }, :with => 'o_id', :update => 'select_organization_idd2', :loading => '$("ajax-progress").show();', :complete => 'if (Ajax.activeRequestCount == 1) $("ajax-progress").hide();'

  = f.select :organization_id, [], {}, {:id => 'select_organization_idd2', :style => 'width: 60em;'} 
```

控制器

```
 def list_region
    render :text => ActionController::Base.helpers.options_for_select((params[:preselect] ? [['Choose organization', -1]] : []) + Organization.map{|org| [ActionController::Base.helpers.truncate(org.name, :length => 155), org.id]})
  end

  def list_towns
    region = Region.find(params[:region_id])
    towns = Kladr.find(:all, :conditions => ['code LIKE ?', "#{region.code}%"])
    render :text => ActionController::Base.helpers.options_for_select([['Choose town', -1]] + towns.map{ |t| ["#{t.socr}. #{t.name}", t.id] })
  end 
```

我做错了什么？我也使用 Rails 2，那为什么`observe_field`不被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:29:22.923

你用rails 3吗？该方法`observe_field`已弃用。

使用 rails 3，您必须执行以下操作：

**看法**

```
%div
  %br/
  = select 'ajax', :region_id, [['Choose your region...', -1]] + Region.all.map{|region| [region.name, region.id]}.sort, {}, {:id => 'ajax1'}
  = image_tag('ajax-loader.gif', :id => 'ajax-progress', :style => 'display: none;')
  %br/
  = select 'ajax2', :o_id, [], {}, {:id => 'select_organization_idd', :style => 'width: 60em;'}, {}, {:id => 'ajax2'}
  = image_tag('ajax-loader.gif', :id => 'ajax-progress', :style => 'display: none;')

  = f.select :organization_id, [], {}, {:id => 'select_organization_idd2', :style => 'width: 60em;'} 
```

**javascript.js.coffee**

```
$('#ajax1').change = () ->
  $.post(
    url: '/organizations/list_towns'
    data: {value: $('#ajax1').val()}
    success: () ->
      if (Ajax.activeRequestCount == 1) 
        $("ajax-progress").hide()
  )

$('#ajax2').change = () ->
  $.post(
    url: '/organizations/list_regions'
    data: {value: $('#ajax2').val()}
    success: () ->
      if (Ajax.activeRequestCount == 1) 
        $("ajax-progress").hide()
  ) 
```

实现可能是错误的，可以重构。我没有测试它。但你有这个想法。

# java - 创建一个动态更新的程序

> ID：11797007
> 
> 赞同：0
> 
> 时间：2012-08-03T13:45:13.540
> 
> 标签：java, file-io, webserver, dynamic-data

我有一个静态 java 程序，它在文件夹中搜索最近创建的文件，解析文件中的几个关键字，然后根据找到的关键字创建组织结构图。如果将新文件添加到文件夹中，如何让该程序自行更新（运行）？任何可能有帮助的教程？一般来说，我对编程很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:51:00.897

您可能需要 Java WatchService：http: [//docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

教程在这里：[http ://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:51:23.000

我熟悉的两种方法是[JNotify 库和](http://jnotify.sourceforge.net/)[WatchService/WatchEvent](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)的常规事件侦听器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:51:31.707

您可以使用[Java 文件观察](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)器来检测新文件何时添加到该目录。当您收到已添加文件的事件时，您会更新图表

# svn - SVN：自动检查分支的所有更改是否与主干合并

> ID：11797010
> 
> 赞同：3
> 
> 时间：2012-08-03T13:45:30.887
> 
> 标签：svn, merge, branch, trunk

> **可能重复：**
> [SVN 签入时自动合并到分支](https://stackoverflow.com/questions/1808518/svn-automatic-merge-to-branch-on-check-in)

在我的团队中，人们通常在主干中开发新代码，然后我们创建一个分支并将代码投入生产。如果生产中存在错误，则将它们固定在分支上，然后将分支与主干合并。这就是问题所在。有时人们会忘记将所有更改从分支移动到主干。是的，我知道这很奇怪，不应该发生，但我想知道是否有自动解决方案来验证分支中是否存在未在主干中提交的待处理更改。我正在考虑检查主干中的修订并将它们与分支进行比较，但我不确定是否可能。你有什么主意吗 ？

谢谢你的帮助，foxrafi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:05:52.143

> svn mergeinfo branch trunk --show-revs 合格

它将显示哪些更改未从分支合并到主干。

# java - 使 SWT Tree 列剪辑文本的开头

> ID：11797014
> 
> 赞同：3
> 
> 时间：2012-08-03T13:45:56.247
> 
> 标签：java, swt, eclipse-rcp, jface

我有一个 SWT 树（通过 JFace TreeViewer），它在列中显示项目，其中一些具有长字符串。字符串的结尾对用户来说是有意义的位，而不是开头，所以当文本被剪辑时，我希望剪辑发生在字符串的开头而不是结尾。例子：

包含以下内容的单元格的默认行为是：“这是一个非常长的字符串，完全超出了树列的边界”：

```
|This is a very l...| 
```

我想要的地方：

```
|... the tree column| 
```

**编辑：**

我使用自定义 PaintItem 侦听器解决了这个问题，如下所述：http: [//www.eclipse.org/articles/article.php? file=Article-CustomDrawingTableAndTreeItems/index.html](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)

想出了以下代码（不是很完美，有一些重复和幻数）：

```
 tree.addListener(SWT.EraseItem, new Listener()
    {
        public void handleEvent(Event event)
        {
            String text = ((TreeItem)event.item).getText(event.index);
            Point size = event.gc.textExtent(text);
            TreeColumn column = ((Tree)event.widget).getColumn(event.index);                
            int columnWidth = column.getWidth() - 10; /* magic number alert - the cells have some padding - must be a way of determining this... */ 
            if(size.x > columnWidth)
            {
                event.detail &= ~SWT.FOREGROUND;
            }
        }
    });

    tree.addListener(SWT.PaintItem, new Listener()
    {               
        @Override
        public void handleEvent(Event event)
        {   
            String text = ((TreeItem)event.item).getText(event.index);
            Point size = event.gc.textExtent(text);
            TreeColumn column = ((Tree)event.widget).getColumn(event.index);                
            int columnWidth = column.getWidth() - 10; /* magic number alert - the cells have some padding - must be a way of determining this... */ 
            if(size.x > columnWidth)
            {
                drawTextTail(event, text, columnWidth);
            }                               
        }

        private void drawTextTail(Event event, String text, int columnWidth)
        {
            String clippedText = "";
            int offset = text.length() - 1; 
            String nextClippedText = text.charAt(offset) + clippedText;
            while(fits(nextClippedText, columnWidth, event.gc))
            {
                clippedText = nextClippedText;
                offset--;
                nextClippedText = text.charAt(offset) + clippedText;
            }
            event.gc.drawText("..." + clippedText, 
                    event.x + 5, /* magic number alert - the cells have some padding - must be a way of determining this... */ 
                    event.y, false);
        }

        private boolean fits(String clippedText, int columnWidth, GC gc)
        {
            Point size = gc.textExtent("..." + clippedText);                        
            return size.x < columnWidth;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:16:09.173

试试这个。第二列自动裁剪`String`以适合该列。

```
public static void main(String[] args) {
    Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Tree tree = new Tree(shell, SWT.NONE);
    tree.setLayout(new FillLayout());
    tree.setHeaderVisible(true);

    TreeColumn column = new TreeColumn(tree, SWT.NONE);
    column.pack();
    column.setWidth(100);

    TreeColumn column2 = new TreeColumn(tree, SWT.NONE);
    column2.pack();
    column2.setWidth(100);

    TreeItem item = new TreeItem(tree, SWT.NONE);
    item.setText(0, "Baaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaz");
    item.setText(1, "VERY VERY VERY VERY VERY VERY VERY VERY VERY VERY VERY long text");

    final TextLayout textLayout = new TextLayout(display);

    tree.addListener(SWT.PaintItem, new Listener() {
        public void handleEvent(Event event) {
            TreeItem item = (TreeItem) event.item;

            Point pt = new Point(event.x + 2, event.y + 2);

            for (int i = 0; i < tree.getColumnCount(); i++) {
                Rectangle rect = item.getBounds(i);

                String text = item.getText(i);

                if (rect.contains(pt)) {
                    String clippedText = "";
                    int offset = text.length() - 1; 
                    int columnWidth = tree.getColumn(i).getWidth();
                    String nextClippedText = text.charAt(offset) + clippedText;
                    while(fits(nextClippedText, columnWidth, event.gc) && offset >= 0)
                    {
                        clippedText = nextClippedText;
                        offset--;
                        if(offset >= 0)
                            nextClippedText = text.charAt(offset) + clippedText;
                    }

                    textLayout.setText(clippedText);

                    textLayout.draw(event.gc, event.x + 3, event.y + 3);
                }
            }
        }
    });
    tree.addListener(SWT.EraseItem, new Listener() {
        public void handleEvent(Event event) {
            /*
             * indicate that we'll be drawing the foreground in the
             * PaintItem listener
             */
            event.detail &= ~SWT.FOREGROUND;
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
}

private static boolean fits(String clippedText, int columnWidth, GC gc)
{
    Point size = gc.textExtent("..." + clippedText);                        
    return size.x < columnWidth;
} 
```

它可能需要一些修复才能真正显示`...`cropped 的前面`String`，但这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:03:53.970

您正在为 TableViewer 创建一个 ContentProvider，对吗？

在您的 ContentProvider 用于构造表的模型中，您自己截断字符串。

# php - 如果第一次重定向失败，则进行第二次重定向

> ID：11797022
> 
> 赞同：2
> 
> 时间：2012-08-03T13:46:18.827
> 
> 标签：php, jsp, redirect

我已经编写了这段代码来将访问者重定向到我的笔记本电脑中托管的服务器（动态 ip）

我使用第二个 php 脚本来更新数据库中的 ip

```
 <?php
    //redirect.php
    $con = mysql_connect($db_hostname,$db_admin,$db_password);
    if (!$con){
        echo "Couldn connect to server !!";
    }
    $sql ="select ip from $db_name.redirect WHERE id=0";
    $result = mysql_query($sql,$con);
    $ip = "error.php";
    while($row = mysql_fetch_array($result)){
    $ip=$row[0];
    }
    //Header( "HTTP/1.1 301 Moved Permanently" ); 
    $forward = "Location: http://$ip";
    header( $forward ) ;
    //Header(  "Location: errorMsg.php"); 
    ?> 
```

但是我的笔记本电脑服务器很少打开，我想知道如果第一次重定向失败是否可以重定向到*errorMsg.php ？*

用jsp也可以实现吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:28:16.527

我想您可以ping IP，如果它没有响应，则使用errorMsg.php。尝试这个：

```
$dsn = 'mysql:dbname='.$db_name.';host='.$db_hostname;

try
{
        $dbh = new PDO($dsn,$db_admin,$db_password);
} catch(PDOEXception $e) {
        echo 'Couldn connect to server !!';
}

$sql = 'SELECT ip FROM redirect';
$sth = $dbh->prepare($sql);
$sth->execute();
$ip = $sth->fetchColumn();
$location = 'errorMsg.php';
if($ip && $fp=fsockopen($ip,80,$en,$es,1)) {
        fclose($fp);
        $location = 'http://'.$ip;
}

header('Location: '.$location); 
```

这假设您有某种方法可以使用所需的 IP 更新数据库。

PS - 如果不明显，我推荐 PDO。

# php - 如何测试对象的多个属性

> ID：11797030
> 
> 赞同：7
> 
> 时间：2012-08-03T13:46:45.007
> 
> 标签：php, phpunit

我从 API 获取 JSON 结构，需要检查成功响应是否具有两个具有特定值的特定属性。

关键问题：

1.  我无法比较整个对象，因为有一些属性可能因每个请求而异
2.  我不能编写两个测试（针对每个属性），因为只有当两个属性都匹配正确的值时，它才能被视为成功响应。

成功响应示例：

```
{
    'success': true,
    'user_ip': '212.20.30.40',
    'id': '7629428643'
} 
```

肮脏的解决方案是

```
<?php
public function testAddAccount() {
    $response = $this->api->addAccount( '7629428643' );

    $this->assertTrue(
        $response->success === TRUE &&
        $response->id === '7629428643'
    );
} 
```

但我认为必须有更好更清洁的解决方案，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:40:35.050

您要`assertEquals()`用于要验证的每个属性。虽然您通常只想在每个测试用例中测试一件事，但有时需要多个断言才能测试“一件事”。因此，多个断言是可以的。

您可能还想断言属性存在于`$response`对象上以避免通知。有关示例，请参见以下内容：

```
public function testAddAccount() {
    // Attempt to create an account.
    $response = $this->api->addAccount('7629428643');

    // Verify that the expected properties are present in the response.
    $this->assertObjectHasAttribute('success', $response);
    $this->assertObjectHasAttribute('id', $response);

    // Verify the values of the properties.
    $this->assertEquals(true, $response->success);
    $this->assertEquals('7629428643', $response->id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:44:51.777

计算响应和正确答案之间的差异，忽略任何过高的值。如果没有区别，一切都很好；如果有，您将获得完整的信息。

```
//some examples
$responseValues = array('success' => true, 'user_ip' => '212.20.30.40', 'id' => '7629428643'); //success
$errorResponseValues = array('success' => false, 'user_ip' => '212.20.30.40', 'id' => '7629428643'); //failure
$errorResponseValues2 = array('success' => false, 'user_ip' => '212.20.30.40', 'id' => '123'); //failure

$expectedValues = array('success' => true, 'id' => '7629428643'); //what is success

function whatIsWrong($reality, $expectation)
{
    return array_uintersect_assoc($reality, $expectation, function($a, $b){return (int)($a == $b);}); //This is slightly dirty, I think the final implementation is up to you
}

var_dump(whatIsWrong($responseValues, $expectedValues)); //array()
var_dump(whatIsWrong($errorResponseValues, $expectedValues)); //array('success' => false)
var_dump(whatIsWrong($errorResponseValues2, $expectedValues)); //array('success' => false, id => 123) 
```

然后你可以使用 assertEqual(whatIsWrong(...), array())，它应该在失败时输出差异，或者以几乎任何首选的方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:13:04.550

如某些答案所述，您应该使用`assertEquals()`方法。第二部分是您可能会使用一些断言。因此，如果 phpunit 在第一个断言上检测到失败，则整个测试都会失败。

为什么不使用`assertTrue()`？因为不清楚您是否，例如，`if ($object) ...`在代码的一个地方和另一个地方使用`assertTrue($object);`。

此外，请确保您的例程正确执行。因此，如果您在尝试获取响应时遇到异常 - 测试将失败。虽然异常也应作为测试用例进行检查。也就是说，您应该尝试发布不正确的请求并抛出断言异常。这就是好的测试的样子——它应该检查所有可能的情况，呵呵=）

所以，这是你应该得到的代码：

```
public function testAddAccount() {
    $response = $this->api->addAccount('7629428643');

    $this->assertEquals($response->success, true);
    $this->assertEquals($response->id, '7629428643');

    $this->setExpectedException('MyException');

    $response = $this->api->addAccount('wrong_account');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:04:10.160

如果`assertTrue()`存储成功响应的布尔值，这就是我处理它的方式。请记住，这是一个**口味**问题。

```
private $lastResponse;
// $id given elsewhere
public function testAddAccount($id) {
   $this->lastResponse = $this->addAccount($id);
}

private function addAccount($id) {
   return $this->api->addAccount($id);
}

private function isLastResponseValid($response){
   return $this->lastResponse->success === TRUE 
   && $this->lastResponse->id === '7629428643';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T22:07:06.097

我能想到的最简洁的方法（尽管这*是*一个口味问题）是添加两个布尔表达式并断言结果是两个：

```
$r1=$response->success === TRUE;
$r2=$response->id === '7629428643';
$this->assertEquals(2, $r1+$r2, "Expecting both values to match; got ($r1) and ($r2)"); 
```

当然，您可以将此设置扩展到任意数量的带有数组和的测试`array_sum()==count()`，以及更可爱的消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T09:33:59.590

对于这种情况，您可以在单个测试方法中使用多个断言。此外，尽可能使用更具体的断言，`assertEquals`因为这些断言会提供更好的失败消息。

```
public function testAddAccount() {
    $response = $this->api->addAccount( '7629428643' );

    self::assertTrue($response->success);
    self::assertEquals('7629428643', $response->id);
} 
```

# python - python的Elasticsearch客户端，没有解决方案

> ID：11797035
> 
> 赞同：8
> 
> 时间：2012-08-03T13:47:00.030
> 
> 标签：python, elasticsearch, pyes

选择了带有graylog2的elasticsearch，我度过了非常糟糕的一周。我正在尝试使用 Python 对 ES 中的数据运行查询。

我尝试过关注客户。

1.  ESClient - 非常奇怪的结果，我认为它没有维护，query_body 没有效果它返回所有结果。
2.  Pyes - 不可读，无证。我已经浏览了资源并且无法弄清楚如何运行一个简单的查询，也许我不是那么聪明。我什至可以以 json 格式运行基本查询，然后简单地使用 Python 对象/迭代器对结果进行分析。但 Pyes 并不容易。
3.  Elasticutils - 另一个文档，但没有完整的示例。我收到以下错误并附有代码。我什至不知道它是如何使用这个 S() 连接到正确的主机的？

    es = get_es(hosts=HOST, default_indexes=[INDEX])

    basic_s = S().indexes(INDEX).doctypes(DOCTYPE).values_dict()

结果：

```
 print basic_s.query(message__text="login/delete")
  File "/usr/lib/python2.7/site-packages/elasticutils/__init__.py", line 223, in __repr__
    data = list(self)[:REPR_OUTPUT_SIZE + 1]
  File "/usr/lib/python2.7/site-packages/elasticutils/__init__.py", line 623, in __iter__
    return iter(self._do_search())
  File "/usr/lib/python2.7/site-packages/elasticutils/__init__.py", line 573, in _do_search
    hits = self.raw()
  File "/usr/lib/python2.7/site-packages/elasticutils/__init__.py", line 615, in raw
    hits = es.search(qs, self.get_indexes(), self.get_doctypes())
  File "/usr/lib/python2.7/site-packages/pyes/es.py", line 841, in search
    return self._query_call("_search", body, indexes, doc_types, **query_params)
  File "/usr/lib/python2.7/site-packages/pyes/es.py", line 251, in _query_call
    response = self._send_request('GET', path, body, querystring_args)
  File "/usr/lib/python2.7/site-packages/pyes/es.py", line 208, in _send_request
    response = self.connection.execute(request)
  File "/usr/lib/python2.7/site-packages/pyes/connection_http.py", line 167, in _client_call
    return getattr(conn.client, attr)(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/pyes/connection_http.py", line 59, in execute
    response = self.client.urlopen(Method._VALUES_TO_NAMES[request.method], uri, body=request.body, headers=request.headers)
  File "/usr/lib/python2.7/site-packages/pyes/urllib3/connectionpool.py", line 294, in urlopen
    return self.urlopen(method, url, body, headers, retries-1, redirect) # Try again
  File "/usr/lib/python2.7/site-packages/pyes/urllib3/connectionpool.py", line 294, in urlopen
    return self.urlopen(method, url, body, headers, retries-1, redirect) # Try again
  File "/usr/lib/python2.7/site-packages/pyes/urllib3/connectionpool.py", line 294, in urlopen
    return self.urlopen(method, url, body, headers, retries-1, redirect) # Try again
  File "/usr/lib/python2.7/site-packages/pyes/urllib3/connectionpool.py", line 294, in urlopen
    return self.urlopen(method, url, body, headers, retries-1, redirect) # Try again
  File "/usr/lib/python2.7/site-packages/pyes/urllib3/connectionpool.py", line 255, in urlopen
    raise MaxRetryError("Max retries exceeded for url: %s" % url)
pyes.urllib3.connectionpool.MaxRetryError: Max retries exceeded for url: /graylog2/message/_search 
```

我希望这个好项目的开发者能提供一些完整的例子。即使看来源，我也完全失去了。

有什么解决方案吗，用 elasticsearch 和 python 为我提供帮助，或者我应该放弃所有这些并支付一个不错的 splunk 帐户并结束这种痛苦。

我正在继续使用 curl，下载整个 json 结果并 json 加载它。希望可行，尽管 curl 从 elasticsearch 下载 100 万条消息可能不会发生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T00:32:12.300

我发现 rawes 非常有用： [https ://github.com/humangeo/rawes](https://github.com/humangeo/rawes)

这是一个相当低级的界面，但我发现使用它比使用高级界面要尴尬得多。如果您对此感兴趣，它还支持 Thrift RPC。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T15:01:53.783

老实说，我最幸运的只是 CURLing 一切。ES 有很多不同的方法、过滤器和查询，以至于各种“包装器”很难重新创建所有功能。在我看来，这类似于将 ORM 用于数据库……您在易用性方面获得的收益会在灵活性/原始能力方面有所损失。

除了 ES 的大多数包装器并不是那么容易使用。

我会试一试 CURL，看看它对你有什么影响。您可以使用外部 JSON 格式化程序来检查您的 JSON，使用邮件列表查找示例，如果您使用 JSON，则可以使用文档。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T23:54:53.150

显式设置主机为我解决了该错误：

`basic_s = S()`**`.es(hosts=HOST, default_indexes=[INDEX])`**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-06T22:12:46.503

FWIW，PYES 文档在这里：[http ://packages.python.org/pyes/index.html](http://packages.python.org/pyes/index.html)

用法：[http ://packages.python.org/pyes/manual/usage.html](http://packages.python.org/pyes/manual/usage.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-10T19:20:44.670

ElasticSearch[最近](http://www.elasticsearch.org/blog/unleash-the-clients-ruby-python-php-perl/)（2013 年 9 月）发布了一个官方 Python 客户端[elasticsearch-py](http://www.elasticsearch.org/guide/en/elasticsearch/client/python-api/current/index.html)（PyPI 上的 elasticsearch，也在[github 上](https://github.com/elasticsearch/elasticsearch-py)），它应该是对官方 ElasticSearch API 的相当直接的映射。我还没有使用它，但它看起来很有希望，至少它会匹配官方文档！

编辑：我们开始使用它，我对它非常满意。ElasticSearch 的 API 非常干净，而 elasticsearch-py 维护了这一点。一般来说，更容易使用和调试，加上不错的日志记录。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-06T19:14:28.837

ElasticUtils 有示例代码：[http ://elasticutils.readthedocs.org/en/latest/sampleprogram1.html](http://elasticutils.readthedocs.org/en/latest/sampleprogram1.html)

如果您在文档中需要其他内容，请询问。

# serialization - 反序列化返回 false

> ID：11797043
> 
> 赞同：0
> 
> 时间：2012-08-03T13:47:37.353
> 
> 标签：serialization

反序列化函数如何返回 false ：

a:1:{i:0;a:2:{s:4:\"type\";s:6:\"isisbn\";s:2:\"id\";s:2:\" 85\";}}

代码：

```
 if (unserialize($stringTempList)) {
            return unserialize($stringTempList);
        }else{
            $this->messageBad[] = 'unserialize failed';
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:19:38.270

通过运行 stripslashes() 解决

代码：

```
 if (unserialize(stripslashes($stringTempList))) {
        return unserialize(stripslashes($stringTempList));
    }else{
        $this->messageBad[] = 'unserialize failed';
    } 
```

# jquery - Addthis，将适当的html属性添加到DOM之后的标签中，以使其生效

> ID：11797050
> 
> 赞同：0
> 
> 时间：2012-08-03T13:48:10.227
> 
> 标签：jquery, addthis

我正在尝试验证我的页面并使用 addthis。

我异步加载代码，并在 dom 准备好后使用 jQuery 对其进行初始化。

```
function initAddThis(){
    var addthis_config = {ui_use_css : false}   
    addthis.init();
}

jQuery(document).ready(function($){      
    initAddThis();
}); 
```

现在验证器说：

> 此时元素 a 上不允许使用属性 g:plusone:size

这是有问题的html部分：

```
<a class="addthis_button_google_plusone google_plusone" g:plusone:size="medium"></a> 
```

现在，有没有办法在下载 HTML 后向标签添加适当的属性（g:plusone:size="medium"）？我怎样才能做到这一点？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:58:06.083

> 使用命名空间时需要做的第一件事是设置默认命名空间。您可以通过在文档的根元素上使用 xmlns 属性来执行此操作。在 XHTML 中，这将是标签：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

[http://webdesign.about.com/od/xmlnamespaces/a/xml_namespaces.htm](http://webdesign.about.com/od/xmlnamespaces/a/xml_namespaces.htm)

> 文档的根元素必须包含 XHTML 命名空间 [XMLNS] 的 xmlns 声明。XHTML 的命名空间定义为 [http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)。一个示例根元素可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Virtual Library</title>
  </head>
  <body>
    <a class="addthis_button_google_plusone google_plusone" g:plusone:size="medium"></a>
  </body>
</html> 
```

[http://www.w3.org/TR/xhtml1/#normative](http://www.w3.org/TR/xhtml1/#normative)

# c++ - 将编译的库添加到 CMake Qt 项目？

> ID：11797054
> 
> 赞同：0
> 
> 时间：2012-08-03T13:48:23.617
> 
> 标签：c++, visual-studio-2010, qt, cmake

我一直在尝试将最新版本的 qextserialport 包含到我正在处理的项目中。项目结构如下：

*   相机计划
    *   CameraProject.pro
    *   相机计划
        *   标头
        *   来源
    *   qextserialport
        *   标头
        *   来源

我的 CMake 文件目前看起来像这样：

```
PROJECT(CameraProject)
FIND_PACKAGE(Qt4 REQUIRED)

FIND_LIBRARY(SIMPLONLIB lv.simplon lib)
FIND_LIBRARY(SIMPLONIMGPROC lv.simplon.imgproc lib)

SET(CameraProject_SOURCES include/lv.simplon.class.cpp camera.cpp main.cpp mainwindow.cpp osdep.cpp paint.cpp)
SET(CameraProject_HEADERS include/lv.simplon.class.h camera.h mainwindow.h osdep.h paint.h)
SET(CameraProject_RESOURCES icons.qrc)

INCLUDE(${QT_USE_FILE})
ADD_DEFINITIONS(${QT_DEFINITIONS})

ADD_EXECUTABLE(CameraProject ${CameraProject_SOURCES}
                ${CameraProject_HEADERS_MOC}
                ${CameraProject_RESOURCES_RCC})

TARGET_LINK_LIBRARIES(CameraProject ${QT_LIBRARIES} ${SIMPLONLIB} ${SIMPLONIMGPROC})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} include QExtSerialPort/src) 
```

尽管在包含目录中包含 QextSerialPort 文件，但我得到了正在绘制的链接器问题。

编辑：更多信息！

在这里可以找到包含在 CameraProject.pro 中的 qextserialport.pri 文件，如下所示：`include(./QExtSerialPort/src/qextserialport.pri)`

我应该为放置在源文件夹中的 qextserialport 库制作第二个 CMakeLists 文件吗？

任何输入将不胜感激，请不要犹豫，要求澄清或任何进一步的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:41:51.793

qxt 所做的是使用 cmake finder 模块，而不是直接将代码包含到我的项目中。然后我用 qmake 构建了 qxt 并让 CMake 找到它创建的库。

```
#############
## basic FindQxt.cmake
## This is an *EXTREMELY BASIC* cmake find/config file for
## those times you have a cmake project and wish to use
## libQxt.
##
## It should be noted that at the time of writing, that
## I (mschnee) have an extremely limited understanding of the
## way Find*.cmake files work, but I have attempted to
## emulate what FindQt4.cmake and a few others do.
##
##  To enable a specific component, set your QXT_USE_${modname}:
##  SET(QXT_USE_QXTCORE TRUE)
##  SET(QXT_USE_QXTGUI FALSE)
##  Currently available components:
##  QxtCore, QxtGui, QxtNetwork, QxtWeb, QxtSql
##  Auto-including directories are enabled with INCLUDE_DIRECTORIES(), but
##  can be accessed if necessary via ${QXT_INCLUDE_DIRS}
##
## To add the libraries to your build, TARGET_LINK_LIBRARIES(), such as...
##  TARGET_LINK_LIBRARIES(YourTargetNameHere ${QXT_LIBRARIES})
## ...or..
##  TARGET_LINK_LIBRARIES(YourTargetNameHere ${QT_LIBRARIES} ${QXT_LIBRARIES})
################### TODO:
##      The purpose of this cmake file is to find what components
##  exist, regardless of how libQxt was build or configured, thus
##  it should search/find all possible options.  As I am not aware
##  that any module requires anything special to be used, adding all
##  modules to ${QXT_MODULES} below should be sufficient.
##      Eventually, there should be version numbers, but
##  I am still too unfamiliar with cmake to determine how to do
##  version checks and comparisons.
##      At the moment, this cmake returns a failure if you
##  try to use a component that doesn't exist.  I don't know how to
##  set up warnings.
##      It would be nice having a FindQxt.cmake and a UseQxt.cmake
##  file like done for Qt - one to check for everything in advance

##############

###### setup
SET(QXT_MODULES QxtGui QxtWeb QxtZeroConf QxtNetwork QxtSql QxtBerkeley QxtCore)
SET(QXT_FOUND_MODULES)
FOREACH(mod ${QXT_MODULES})
    STRING(TOUPPER ${mod} U_MOD)
    SET(QXT_${U_MOD}_INCLUDE_DIR NOTFOUND)
    SET(QXT_${U_MOD}_LIB_DEBUG NOTFOUND)
    SET(QXT_${U_MOD}_LIB_RELEASE NOTFOUND)
    SET(QXT_FOUND_${U_MOD} FALSE)
ENDFOREACH(mod)
SET(QXT_QXTGUI_DEPENDSON QxtCore)
SET(QXT_QXTWEB_DEPENDSON QxtCore QxtNetwork)
SET(QXT_QXTZEROCONF_DEPENDSON QxtCore QxtNetwork)
SET(QXT_QXTNETWORK_DEPENDSON QxtCore)
SET(QXT_QXTQSQL_DEPENDSON QxtCore)
SET(QXT_QXTBERKELEY_DEPENDSON QxtCore)

FIND_PATH(QXT_DIR libqxt.pro Qxt/include/QxtCore/Qxt)
FIND_PATH(QXT_BINARY_DIR 
    NAMES QxtCore.dll QxtCored.dll 
    PATHS 
    ${QXT_DIR}/bin  
    ${QXT_DIR}/Bin 
    NO_DEFAULT_PATH
)

#SET(QXT_BINARY_DIR "${QXT_DIR}/bin" CACHE PATH "${QXT_DIR}/bin")

FOREACH(mod ${QXT_MODULES})
    STRING(TOUPPER ${mod} U_MOD)
    FIND_PATH(QXT_${U_MOD}_INCLUDE_DIR ${mod}
        PATH_SUFFIXES ${mod} include/${mod} Qxt/include/${mod} include/Qxt/${mod}
        PATHS
        ~/Library/Frameworks/
        /Library/Frameworks/
        /sw/
        /usr/local/
        /usr
        /opt/local/
        /opt/csw
        /opt
        "C:\\"
        "C:\\Program Files\\"
        "C:\\Program Files(x86)\\"
        ${QXT_DIR}
        NO_DEFAULT_PATH
    )
    FIND_LIBRARY(QXT_${U_MOD}_LIB_RELEASE NAME ${mod}
        PATH_SUFFIXES Qxt/lib64 Qxt/lib lib64 lib
        PATHS
        /sw
        /usr/local
        /usr
        /opt/local
        /opt/csw
        /opt
        "C:\\"
        "C:\\Program Files"
        "C:\\Program Files(x86)"
        ${QXT_DIR}
        NO_DEFAULT_PATH
    )
    FIND_LIBRARY(QXT_${U_MOD}_LIB_DEBUG NAME ${mod}d
        PATH_SUFFIXES Qxt/lib64 Qxt/lib lib64 lib
        PATHS
        /sw
        /usr/local
        /usr
        /opt/local
        /opt/csw
        /opt
        "C:\\"
        "C:\\Program Files"
        "C:\\Program Files(x86)"
        ${QXT_DIR}
        NO_DEFAULT_PATH
    )
    IF (QXT_${U_MOD}_LIB_RELEASE)
        SET(QXT_FOUND_MODULES "${QXT_FOUND_MODULES} ${mod}")
    ENDIF (QXT_${U_MOD}_LIB_RELEASE)

    IF (QXT_${U_MOD}_LIB_DEBUG)
        SET(QXT_FOUND_MODULES "${QXT_FOUND_MODULES} ${mod}")
    ENDIF (QXT_${U_MOD}_LIB_DEBUG)
ENDFOREACH(mod)

FOREACH(mod ${QXT_MODULES})
    STRING(TOUPPER ${mod} U_MOD)
    IF(QXT_${U_MOD}_INCLUDE_DIR AND QXT_${U_MOD}_LIB_RELEASE)
        SET(QXT_FOUND_${U_MOD} TRUE)
    ENDIF(QXT_${U_MOD}_INCLUDE_DIR AND QXT_${U_MOD}_LIB_RELEASE)
ENDFOREACH(mod)

##### find and include
# To use a Qxt Library....
#   SET(QXT_FIND_COMPONENTS QxtCore, QxtGui)
# ...and this will do the rest
IF( QXT_FIND_COMPONENTS )
    FOREACH( component ${QXT_FIND_COMPONENTS} )
        STRING( TOUPPER ${component} _COMPONENT )
        SET(QXT_USE_${_COMPONENT}_COMPONENT TRUE)
    ENDFOREACH( component )
ENDIF( QXT_FIND_COMPONENTS )

SET(QXT_LIBRARIES "")
SET(QXT_INCLUDE_DIRS "")

# like FindQt4.cmake, in order of dependence
FOREACH( module ${QXT_MODULES} )
    STRING(TOUPPER ${module} U_MOD)
    IF(QXT_USE_${U_MOD} OR QXT_DEPENDS_${U_MOD})
        IF(QXT_FOUND_${U_MOD})
            STRING(REPLACE "QXT" "" qxt_module_def "${U_MOD}")
            ADD_DEFINITIONS(-DQXT_${qxt_module_def}_LIB)
            SET(QXT_INCLUDE_DIRS ${QXT_INCLUDE_DIRS} ${QXT_${U_MOD}_INCLUDE_DIR})
            INCLUDE_DIRECTORIES(${QXT_${U_MOD}_INCLUDE_DIR})
            SET(QXT_LIBRARIES ${QXT_LIBRARIES};optimized;${QXT_${U_MOD}_LIB_RELEASE};debug;${QXT_${U_MOD}_LIB_DEBUG})
        ELSE(QXT_FOUND_${U_MOD})
            MESSAGE("Could not find Qxt Module ${module}")
            RETURN()
        ENDIF(QXT_FOUND_${U_MOD})
        FOREACH(dep QXT_${U_MOD}_DEPENDSON)
            SET(QXT_DEPENDS_${dep} TRUE)
        ENDFOREACH(dep)
    ENDIF(QXT_USE_${U_MOD} OR QXT_DEPENDS_${U_MOD})
ENDFOREACH(module)
MESSAGE(STATUS "Found Qxt Libraries:${QXT_FOUND_MODULES}")

MESSAGE(STATUS "Include directories:${QXT_INCLUDE_DIRS}") 
```

我将此模块放在我的根项目的一个名为 CMake/Modules 的子目录中，并使用以下命令将其包含到根 CMakeLists.txt 顶部附近的 cmake 中：

```
    # 下面这行会在 CMake 中添加额外的查找器，而不需要放在 CMake 安装路径中
    列表（附加 CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMake/Modules）

```

最后让 CMake 找到 Qxt

```
SET(QXT_FIND_COMPONENTS QxtCore, QxtGui)
SET(QXT_USE_QXTCORE TRUE)
FIND_PACKAGE(Qxt REQUIRED) 
```

# mongodb - mongodb 无法创建集合

> ID：11797055
> 
> 赞同：1
> 
> 时间：2012-08-03T13:48:29.807
> 
> 标签：mongodb

我正在尝试在运行 ubuntu 的服务器上在 mongo 中创建集合

从外壳创建集合

```
db.createCollection('collName')

{
   "errmsg" : "exception: assertion util/mmap.cpp:169",
   "code" : 0,
   "ok" : 0
} 
```

我试图用谷歌搜索，但没有成功。任何想法如何处理这个？

PS。我没有空间不足，我的卷是可写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:16:07.800

好的，我发现了问题刚安装mongo时，应该必须为其数据创建目录

```
$ sudo mkdir -p /data/db/
$ sudo chown `id -u` /data/db 
```

在此重新启动 mongo 之后

# visual-studio-2010 - 不是更清晰的视觉工作室的命令-t 或模糊查找器？

> ID：11797058
> 
> 赞同：3
> 
> 时间：2012-08-03T13:48:33.470
> 
> 标签：visual-studio-2010, visual-studio, resharper, fuzzyfinder

ReSharper 的导航功能是否有替代方案？这很好用，但 Resharper 本身会使我的计算机速度太慢，即使大多数东西都关闭了。所以，我正在寻找一些只做导航的插件，比如 vim 的 command-t 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:09:09.577

Visual Studio 2012 的快速启动功能支持类似的功能。有关其他信息，请参阅[此问题](https://stackoverflow.com/questions/11776697/how-to-quickly-open-a-file-in-visual-studio-2012)。

# visual-c++ - 如何将 VB 字符串参数传递给用 C 编写的函数？

> ID：11797060
> 
> 赞同：2
> 
> 时间：2012-08-03T13:48:44.473
> 
> 标签：visual-c++, vb6

我这里有一个问题：我正在尝试将 VB6 字符串传递给用 C 编写的函数，但我认为它与 LPSTR 不同。调用该函数时，我的 VB6 IDE 崩溃。如何将 VB 字符串作为参数传递给 C 中的函数？下面是我的代码。谢谢大家：

VB6

```
Private Declare Function WritestStr Lib “teststr.dll” (ByRef mystr As String) As Long

Private Sub command1_Click()

    Dim mystr as string

    Call WritestStr(mystr)
    Msgbox mystr

End Sub 
```

VC6

```
include “windows.h”

Int __stdcall WritestStr(LPSTR *mystr)
{
    *mystr = “Venancio Guedes”;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:55:40.923

自从我编写 VB/Win32 函数声明以来已经很久了，但我很确定我记得默认情况下，VB6 中外部库函数的所有参数都是通过引用传递的；但是，VB6 String 类型已经是基于指针的类型，因此已经通过 byref 传递的 byref 参数会将错误的值压入堆栈。这会导致引用在 DLL 内崩溃。尝试将它传递给 ByVal，因为参数的“值”实际上是字符串指针本身，这是 DLL 函数所期望的。

正如我所说，自从我编写这些声明以来已经很长时间了，所以所有标准的警告都适用，但我很确定这很接近。

祝你好运！

**编辑**DLL 函数的 ByVal 声明是正确的。现在的修复应该是让您在使用空格调用 DLL 函数之前初始化/分配字符串，例如：

```
Dim vbString as String
Dim result as Long
vbString = Space$(255) ' just make sure this number is large enough
result = WritestStr(vbString) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:16:27.390

VB 字符串在 OLE 文档中称为 BSTR，并且几乎与 LPWSTR 兼容。它们是每个字符 2 个字节的 Unicode (UTF-16) 字符串，但在字符串指针指向的内存之前的长度为 32 位。

您的代码使用 LPSTR*，它是一个指向每个字符 1 个字节的 ANSI 字符串的指针。显然，您这样做是为了将您的字符串返回到 VB6 代码。

不幸的是，这两者是不相容的。

代码崩溃的原因是您将 VB6 变量 <mystr> 传递给您的函数，但默认情况下它设置为 vbNullString，类似于：

```
BSTR mystr = NULL; 
```

但是你的主要问题是VB不可能使用你写的C函数。无法为 LPSTR* 编写 Declare 语句。如果您将 C 代码更改为

```
include “windows.h”

Int __stdcall WritestStr(LPSTR mystr)
{
    const LPSTR myconststr = “Venancio Guedes”;

    if (mystr)
        int destlen = strlen(mystr);
        int srclen = strlen(myconststr);
        if (destlen >= srclen)
        {
            strcpy(mystr, myconststr);
            return 0;
        }
    return srclen;
} 
```

...您可以将声明更改为：

```
Private Declare Function WritestStr Lib “teststr.dll” (ByVal mystr As String) As Long 
```

...并确保您声明一个缓冲区以接受该字符串。您*可以*为 LPSTR 编写 Declare 语句，但您需要

```
Private Sub command1_Click()

    Dim mystr As string
    Dim nLen As Long

    mystr = Space$(1024)
    nLen = WritestStr(mystr)

    Msgbox Left$(mystr, nLen)

End Sub 
```

这让人想起大多数 Win32 API 函数的工作方式。

将 mystr 作为 ByVal 传递通知 VB6 它必须将 <mystr> 从 BSTR 复制到临时 LPSTR，并将指针传递给该缓冲区。当它执行完 WriteStr() 后，它会将 LPSTR 缓冲区复制回原来的 BSTR。

分配一个 VB 字符串缓冲区 <mystr> 以传递给您的函数可以让您回写一些东西。

或者，您可以重写您的 C 程序以本机接受 BSTR（如果您想拥有多语言，这是最干净和更便携的解决方案）。在这种情况下，您的原始 VB6 声明将保留，即 ByRef mystr As String。不幸的是，您仍然必须像在这里所做的那样写入缓冲区。

如果你想拥有 LPWSTR*、LPSTR* 或 BSTR*，你必须在类型库中声明你的函数——我没有时间在这里讨论。

# php - 如何将动态数据加载到谷歌饼图中？

> ID：11797062
> 
> 赞同：3
> 
> 时间：2012-08-03T13:49:00.887
> 
> 标签：php, javascript, ajax, google-api, google-visualization

我正在使用 ajax 函数来获取用于呈现 Google 饼图并在 javascript 中加载这些数据的数据，但有些饼图没有呈现，但是当我将 AJAX 输出硬编码到 javascript 饼图函数中时，它确实呈现完美。下面是我的代码，任何人都可以告诉我有什么问题吗？感谢您的帮助。

![这就是它工作时的样子](../Images/6b37b9575fde07c6560142945f186cf1.png)

```
<?php
$sales_data = koolajax.callback(get_asin_repo($asin,$sku));
?> 
```

JS在这里：

```
// AJAX Output is ['POS', 'Sold This Month'],['AZN CG UK',893],['AZN JT UK',449],['AZN PT UK',1349]

        alert($sales_data);

        //var data = google.visualization.arrayToDataTable([$sales_data]);//This doesn't work

        //This Works
        var data = google.visualization.arrayToDataTable([['POS', 'Sold This Month'],['AZN CG UK',893],['AZN JT UK',449],['AZN PT UK',1349]]);

        var options = {
            title: 'Statistics For '+$asin
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div1'));
        chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:24:43.730

这真的很简单。我需要做的就是从数据库中以 JSON 格式获取数据并将其传递

```
var data = new google.visualization.DataTable($sales_data); 
```

函数代替

```
var data = google.visualization.arrayToDataTable([$sales_data]) 
```

它有效。感谢大家的支持和时间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:25:47.953

您必须检查从服务器返回的变量类型，并以 GoogleChart 可以理解的方式对其进行打包。

在您的情况下，您请求 google.visualization.arrayToDataTable 为您创建一个 DataSource 实例。但是该静态方法还要求**您**遵循以下规则：

> 此方法接受一个二维数组并将其转换为 DataTable。请参阅 [Google 图表文档](https://developers.google.com/chart/interactive/docs/reference#assortedmethods%20Charts%20Documentation)

因此，在调用该例程之前进行检查。

```
if ( $sales_data instanceof Array )
{
  var willWork = [];
  var entry;
  while ( $sales_data.length )
  {
    entry = $sales_data.shift();
    if ( !(entry instanceof Array) || entry.length < 2 )
      window.alert( 'Incorrect server return. Call support.' );
    willWork.push( entry );
  }
}
else
  window.alert( 'Incorrect server return. Call support.' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T07:56:56.863

### 谷歌饼图从 PHP 获取数据

自 4 小时以来，我一直在搜索如何将数据从 PHP 填充到谷歌饼图，但没有找到任何解决方案，实际上，我的数据格式在 PHP 中是错误的。您可以使用这种方式在 PHP 中准备数据：

```
function yourFunction(){
    $data = array();
    $data[0] = array("Status", "Revenue");
    $data[1] = array('Pending', 500);
    $data[2] = array('Confirmed', 1000);
    $data[3] = array('Payable', 3000);
    return json_encode($data );
} 
```

在前端解析数据：

```
var obj = JSON.parse(data);
var data = new google.visualization.arrayToDataTable(data); 
```

# url - htacces 重定向

> ID：11797063
> 
> 赞同：0
> 
> 时间：2012-08-03T13:49:01.893
> 
> 标签：url, redirect

我想从“子目录”URL 中删除文件名，只在浏览器 URL 中显示子目录。

所以：www.domain.com.au/login/public_index.php

变成：

```
www.domain.com.au/login/ 
```

我已经尝试了这个网站和互联网上的各种解决方案，但都没有奏效。

如果可能的话，我想把新的重定向放在根 htaccess 文件中？？而不是在子目录 htaccess 文件中？

***万一 htaccess 文件中的其他重定向与任何新的子目录重定向冲突，以下是 htaccess 文件中执行重要工作的其他（和必要的）重定向：

```
#(1) A redirection to remove root level index.php from the url
# Redirect index.php to domain.com.au
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^index\.php$ http://www.domain.com.au/ [R=301,L]

#(2) 
# Redirect   domain.com.au    to    www.domain.com,au
RewriteCond %{HTTP_HOST} ^domain.com.au [NC]
RewriteRule ^(.*)$ http://domain.com.au/$1 [L,R=301]

#(3)
# Force SSL on login directory
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} login 
RewriteRule ^(.*)$ https://www.domain.com.au/$1 [R,L] 
```

任何帮助将不胜感激，因为到目前为止添加新子目录 URL 重定向的所有解决方案都失败了。

问候，

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:25:54.520

你可以做一些类似于你所做的事情`#(1)`：

```
#(4)
# remove public_index.php 
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)/public_index\.php\ HTTP/
RewriteRule public_index\.php$ http://www.domain.com.au/%1/ [R=301,L]

# internally add it back
RewriteCond %{REQUEST_URI} ^/([^/]+)/?$
RewriteCond %{DOCUMENT_ROOT}/%1/public_index.php -f
RewriteRule ^ /%1/public_index.php [L] 
```

这适用于任何子目录，但如果您只对 感兴趣`login`，那就更容易了：

```
#(4)
# remove public_index.php 
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /login/public_index\.php\ HTTP/
RewriteRule public_index\.php$ https://www.domain.com.au/login/ [R=301,L]

RewriteRule ^/?login/?$ /login/public_index.php [L] 
```

# internet-explorer-7 - FlexSlider 和 IE7

> ID：11797064
> 
> 赞同：1
> 
> 时间：2012-08-03T13:49:03.720
> 
> 标签：internet-explorer-7, flexslider

我正在构建一个主页，其中包含来自 RSS 提要的日历轮播。我在 rss 阅读器 jquery 插件中放置了一个 FlexSlider。它似乎无处不在，但IE7。这是 FlexSlider 问题吗？还是我的编码？

见例子：[http ://enews.andover.edu/q/v2/](http://enews.andover.edu/q/v2/)

非常感谢，乔纳森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T16:47:12.850

在您的滑块加载代码、HTML 或 PHP 中，最后一个参数不应包含逗号，否则它将不起作用。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T02:42:45.837

我从 Flexslider options JS 代码中取出最后一个逗号，它在 IE7 中工作！

# c# - 如何将日期时间字符串转换为日期时间对象

> ID：11797065
> 
> 赞同：2
> 
> 时间：2012-08-03T13:49:04.990
> 
> 标签：c#, datetime, datetime-format, datetime-parsing

`string DateCreated = "2012-05-24 12:34:40.060";`美国文化

如何将字符串创建为日期时间对象，其格式包括月、日、年、小时、分钟、秒、毫秒。我认为格式是“MM/dd/yyyy hh:mm:ss.fff tt”，但不确定。** ** = 红色下划线，错误

我需要 datetime 对象，因为我想通过另一个只接受“DateTime”值而不是字符串的函数传递它

任何帮助，将不胜感激。

谢谢你

这是我到目前为止所拥有的，但我知道它错了

```
 string DateCreated = "2012-05-24 12:34:40.060";
  DateTime dt = **new DateTime(DateCreated);** 
  DateTime dateCreated = **dateCreated.ToString("MM/dd/yyyy hh:mm:ss.fff tt")**; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:50:30.607

```
var dateTime = DateTime.ParseExact(DateCreated, "yyyy-MM-dd HH:mm:ss.fff"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:52:53.537

```
string dateCreated = "2012-05-24 12:34:40.060";
DateTime myDate = DateTime.ParseExact(dateCreated, "yyyy-MM-dd HH:mm:ss.fff",
                                       System.Globalization.CultureInfo.InvariantCulture) 
```

你也可以使用

```
Convert.ToDateTime Method (String) 
```

# php - 如何将此标签移动到下一行？

> ID：11797066
> 
> 赞同：-4
> 
> 时间：2012-08-03T13:49:06.200
> 
> 标签：php, css

我有个问题：

这是代码块：

```
function draw()
{
    $out_string="";
    $out_string.=$this->script;
    reset($this->fields);
    $num_list_box=0;
    while( $field = each($this->fields) )
    {
    if (isset($this->fields[$field[1]->field]->options))
           {
           if (preg_match("/<script type=\"text\/javascript\">/i",$this->fields[$field[1]->field]->options[0][1])&& $this->fields[$field[1]->field]->value!="")
               {
               if ($num_list_box==0) $out_string.= "<script type=\"text/javascript\">levels.forValue(\"".$field_prev[0]."\").setDefaultOptions(\"".$this->fields[$field[1]->field]->value."\");</script>\n";
                   else $out_string.= "<script type=\"text/javascript\">levels.forValue(\"".$field_prev[0]."\").forValue(\"".$field_prev[1]."\").setDefaultOptions(\"".$this->fields[$field[1]->field]->value."\");</script>\n";
               $field_prev[]=$this->fields[$field[1]->field]->value;
               $num_list_box++;
               } else
               {
               $field_prev[0]=$this->fields[$field[1]->field]->value;
               $num_list_box=0;
               }

           }

    }

    $out_string.=$this->draw_title();
    $out_string.=$this->draw_header();
    $out_string.= "<table class=\"forms\">\n";
    $field=array_keys($this->fields);
    reset($field);
    $ind_first=true;
    while( list($pos,$field_name) = each($field) )
    {
       if ($this->num_cols>0) {
       if ($this->fields[$field_name]->col==1){
          if ($ind_first) $ind_first=false;else $out_string.="</tr>";
          $out_string.="<tr><td class=\"field_title\">";}
          else $out_string.="<td class=\"field_title\">";
       $out_string.= $this->fields[$field_name]->title."</td>";
       $colspan="";
       if ($this->num_cols>1) {
           if ($this->fields[$field_name]->col==1 && array_key_exists($pos+1,$field) && $this->fields[$field[$pos+1]]->col==1)
             $colspan="colspan=\"3\"";
          }
       $out_string.="<td class=\"field_value\" $colspan>";
       $out_string.=$this->fields[$field_name]->draw()."</td>";
       } else
       {
       if ($ind_first) $ind_first=false;else $out_string.="</tr>";
       $out_string.="<tr><td class=\"field_value\">".$this->fields[$field_name]->title."<br />";
       $out_string.=$this->fields[$field_name]->draw()."</td>";
       }
    }
    $out_string.= "</tr></table>\n";
    return $out_string;
} 
```

上面的代码块产生如下内容：

![在此处输入图像描述](../Images/dc05137a2cb7c07bec632a722326421f.png)

我希望它在示例中假设“交易”一词位于文本框上方。

请帮忙，编写这部分程序的人身体不适，我们有最后期限。

谢谢您的帮助。

PS文本的CSS类名是：`field_title`文本框的类名是`field_value`

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:54:42.383

您将不得不调试该代码以找出标签“事务”何时插入到表代码的那团。一旦找到插入“事务”的位置，您就可以创建新逻辑以添加另一个跨表的 TR 并将标签放置在该新行上。

祝你好运，看起来很头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:03:17.573

Your code is apparently building a rather complex form based on some data (`$fields` property of the class). I guess some "field settings" (like `col`) describe how the form should look like.

So, your code is doing things that are neither described in your question nor in the code itself. Furthermore, we have no clue what the complete form currently looks like, so we can't even guess the intention of the code.

Your request, to let the description appear above the selection box(?) could be done probably throwing away half of the code, but that won't help you.

PS: Please check the FAQ - this site is for questions, not for finding people to do your (or elses) work. You should really have a programmer solve your problem directly having access to the whole page.

# delphi - 如何比较 D7 中的两个 TRect 变量？

> ID：11797069
> 
> 赞同：3
> 
> 时间：2012-08-03T13:49:12.040
> 
> 标签：delphi, delphi-7

如何比较两个 TRect 类型的变量？

```
var
  r1, r1: TRect;
begin
  if (r1 = r2) then
    ...
end; 
```

有了上面我得到：不兼容的类型。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T13:51:03.803

如果您有一个现代的 Delphi，那么该代码将编译并工作。现代`TRect`Delphi 版本利用运算符重载来重载相等运算符。您根本无法使该语法在 Delphi 7 中工作，因为 Delphi 记录没有内置的相等运算符。

如果没有编译器的帮助，您需要一个辅助函数。你可以自己写：

```
function EqualRect(const r1, r2: TRect): Boolean;
begin  
  Result := (r1.Left=r2.Left) and (r1.Right=r2.Right) and
            (r1.Top=r2.Top) and (r1.Bottom=r2.Bottom);
end; 
```

`EqualRect`虽然，正如@Sertac 指出的那样，当您可以使用[同名的 Windows API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162699.aspx)时，几乎不需要自己编写。

# android - SQLiteOpenHelper.getWritableDatabase() 抛出 NullPointerException ORMLite

> ID：11797070
> 
> 赞同：2
> 
> 时间：2012-08-03T13:49:13.220
> 
> 标签：android, nullpointerexception, ormlite, getwritabledatabase

这是我在从 OrmLiteSqliteOpenHelper 扩展的 DatabaseHandler 类中使用的方法集：

```
@Override
        public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) 
        {
         try
         {  

            TableUtils.createTable(connectionSource, Category.class);
            TableUtils.createTable(connectionSource, Level.class);
            DataParsing a = new DataParsing();
            a.wrapCategories();
            Log.i(DatabaseHandler.class.getName(), "created new entries in onCreate: " );
         }
         catch (SQLException e){
             Log.e(TAG, "error creating DB " + DATABASE_NAME);
             throw new RuntimeException(e);
         } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
    // Upgrading database
      @Override
       public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource, int oldVer, int newVer)
      {
           try
            {          

               TableUtils.dropTable(connectionSource, Category.class, true);
               TableUtils.dropTable(connectionSource, Level.class, true);
               onCreate(db, connectionSource);
            }
           catch (SQLException e){
               Log.e(TAG,"error upgrading db "+DATABASE_NAME+"from ver "+oldVer);
               throw new RuntimeException(e);
           }

       }

      public Dao<Category, Integer> getCategoryDao() throws SQLException 
        {
            if (simpleCategoryDao == null) {
                simpleCategoryDao = getDao(Category.class);
            }
            return simpleCategoryDao;
        }

      public Dao<Level, Integer> getLevelDao() throws SQLException 
        {
            if (simpleLevelDao == null) {
                simpleLevelDao = getDao(Level.class);
            }
            return simpleLevelDao;
        } 
```

当我运行我的应用程序时，我会收到这样的消息

```
08-03 16:44:08.619: V/droidDatabaseConnection(12196): AndroidDatabaseConnection@405182b0: compiled statement got AndroidCompiledStatement@40578b10: CREATE TABLE `categories` (`title` VARCHAR , `id` INTEGER , PRIMARY KEY (`id`) ) 
08-03 16:44:08.619: V/ndroidCompiledStatement(12196): compiled statement runExecute changed 1 rows: CREATE TABLE `categories` (`title` VARCHAR , `id` INTEGER , PRIMARY KEY (`id`) ) 

08-03 16:44:08.629: V/droidDatabaseConnection(12196): AndroidDatabaseConnection@405182b0: compiled statement got AndroidCompiledStatement@405f0f50: CREATE TABLE `levels` (`title` VARCHAR , `id` INTEGER , PRIMARY KEY (`id`) ) 
08-03 16:44:08.629: V/ndroidCompiledStatement(12196): compiled statement runExecute changed 1 rows: CREATE TABLE `levels` (`title` VARCHAR , `id` INTEGER , PRIMARY KEY (`id`) ) 
```

据我了解，数据库已成功创建。然后我想用方法把一个对象列表放在那里：

```
public void saveContacts(List<Category> contacts) throws SQLException
    {

        OrmLiteSqliteOpenHelper dbHelper= DatabaseHandler.getInstance(_context);
        String res = Boolean.toString(dbHelper.isOpen());
        Log.i(" 123 ",res);
        dbHelper.getWritableDatabase();
        Dao<Category, Integer> daoContact=dbHelper.getDao(Category.class);

        QueryBuilder<Category, Integer> queryBuilder = daoContact.queryBuilder();
        daoContact.queryRaw("insert into categories values (hello, 1)");
        Log.i("dao",queryBuilder.selectColumns("title").prepare().toString());

        for (Category contact : contacts) {
            Log.i("dao",contact.toString());
            HelperFactory.GetHelper().getCategoryDao().createIfNotExists(contact);
        }
      } 
```

在行 dbHelper.getWritableDatabase(); 我明白了

```
08-03 16:44:29.199: E/AndroidRuntime(12196): FATAL EXCEPTION: main
08-03 16:44:29.199: E/AndroidRuntime(12196): java.lang.NullPointerException
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at com.assignmentexpert.LoginActivity.saveContacts(LoginActivity.java:268)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at com.assignmentexpert.LoginActivity$4.onClick(LoginActivity.java:132)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.view.View.performClick(View.java:2485)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.view.View$PerformClick.run(View.java:9080)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.os.Handler.handleCallback(Handler.java:587)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.os.Looper.loop(Looper.java:123)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at android.app.ActivityThread.main(ActivityThread.java:3687)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at java.lang.reflect.Method.invokeNative(Native Method)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at java.lang.reflect.Method.invoke(Method.java:507)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-03 16:44:29.199: E/AndroidRuntime(12196):    at dalvik.system.NativeStart.main(Native Method) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:54:37.123

```
public void saveContacts(List<Category> contacts) throws SQLException
{

    OrmLiteSqliteOpenHelper dbHelper= DatabaseHandler.getInstance(_context);
    String res = Boolean.toString(dbHelper.isOpen());
    Log.i(" 123 ",res);
    dbHelper= this.getWritableDatabase(); <----- here change will may help you
    Dao<Category, Integer> daoContact=dbHelper.getDao(Category.class);

    QueryBuilder<Category, Integer> queryBuilder = daoContact.queryBuilder();
    daoContact.queryRaw("insert into categories values (hello, 1)");
    Log.i("dao",queryBuilder.selectColumns("title").prepare().toString());

    for (Category contact : contacts) {
        Log.i("dao",contact.toString());
        HelperFactory.GetHelper().getCategoryDao().createIfNotExists(contact);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:23:32.953

通过将我的活动上下文传递给 OrmLiteSqliteOpenHelper 解决了问题。我使用这些类在应用程序生命周期中维护对数据库的访问：

```
public class ApplicationMemory extends Application{

   @Override
   public void onCreate() {
       super.onCreate();
       HelperFactory.SetHelper(getApplicationContext());
   }
   @Override
   public void onTerminate() {
       HelperFactory.ReleaseHelper();
       super.onTerminate();
   }
} 
```

和

```
 public class HelperFactory {
 private static DatabaseHandler databaseHelper;

   public static DatabaseHandler GetHelper(){
       return databaseHelper;
   }

public static void SetHelper(Context context){
       databaseHelper = OpenHelperManager.getHelper(context,DatabaseHandler.class);
   }

public static void ReleaseHelper(){
       OpenHelperManager.releaseHelper();
       databaseHelper = null;
   }
   } 
```

其中 DatabaseHandler - 类，从 OrmLiteSqliteOpenHelper 扩展并在我的问题中描述。

非常感谢[Hardik Nadiyapara](https://stackoverflow.com/users/1148051/hardik-nadiyapara)。他帮了很多忙。

# c# - 如何将多个线程同步到一个公共点

> ID：11797071
> 
> 赞同：3
> 
> 时间：2012-08-03T13:49:17.487
> 
> 标签：c#, multithreading, .net-4.0

我想启动任意数量的线程，每个线程都执行相同的方法，但参数不同。每个线程都需要在某个点阻塞，并等待所有线程都到达同一点。（就像赛车手进入起跑区一样）

我不知道如何让所有线程向启动器发出信号，表明它们都准备好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T13:56:40.087

解决方案是使用[Barrier Class](http://msdn.microsoft.com/en-us/library/system.threading.barrier.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T13:56:15.833

我认为使用锁定可以同步线程的访问。

试试这个：

```
lock (lockThis)
{
    // Access thread-sensitive resources.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T14:36:30.590

不久前，我还在为多线程而苦苦挣扎。你想要达到的目标可以用你所知道的以一种非常简单的方式完成。这是一个想法：

```
 class MyThread
    {
    private Thread thread;
    private bool isWaitingAtPointA = false;
    private bool continueWorking = false;

    public MyThread ()
    {
         thread = new Thread(DoMyStuff);
    }

    private void DoMyStuff() 
    { 
        //do stuff

        //when at point A :
        isWaitingAtPointA = true;
        while (!continueWorking)
        {
            Thread.Sleep(10);
        }
        isWaitingAtPointA = false;
        continueWorking = false;

        //do more stuff

    }

    public bool isAtWaitingPointA()
    {
        return isWaitingAtPointA;
    }
} 
```

然后在主线程中有一个 MyThread 列表，它将实例化所有 MyThread 对象，启动它们的线程并通过将主线程 continueWorking 设置为 true 来解锁它们。显然，您可以通过调用 isAtWaitingPointA() 来检查所有线程是否都在 A 点。我相信这种方法被称为“控制变量”（如果我错了，请有人纠正我），这里的控制变量是布尔值 isWaitingAtPointA 和 continueWorking。您希望它们都使用的方法在这里由 DoMyStuff() 表示，可以在其他地方定义它以避免代码冗余。

我希望这能激励你 =)

# django - 在 Django 视图之间保持状态

> ID：11797074
> 
> 赞同：1
> 
> 时间：2012-08-03T13:49:22.173
> 
> 标签：django, state, kml

作为一个小背景故事，我正在开发一个应用程序，该应用程序根据来自网状网络的数据包数据将 KML 管道传输到 googleearth。例子：

UDP Packet ---> Django ORM 将有组织的数据放入 DB ---> Django view 以读取 DB 并将数据包数据（gps、连接等）的 KML 表示返回到 Google Earth。

这里的问题是数据库行讲述一个故事并进行查询或一系列查询，这不足以“描绘”这个网状网络。我需要保留一些内部 python 结构和类来维护请求/响应之间的网络“状态”。

这是我需要帮助的地方。目前，为了保留这个“状态”，我使用 Django 的低级缓存 API 来存储一个无限超时的类。每个请求，我只是从缓存中检索该类，添加到它的结构中，然后将其保存回缓存中。这似乎有效，实际上效果很好；但感觉不对。

也许我应该放弃 Django 并扩展 Python 的 BaseHTTP 类来处理我的请求/响应？

也许我应该创建一个单独的应用程序来保留“状态”并且 Django 通过套接字管道它请求数据？

我只是觉得我在滥用 Django 并且对关键数据不安全。和帮助？

我知道这是非常规的，有点疯狂。

（注意：我目前在 Django 实例之外为 UDP 套接字侦听器使用 Django 的 ORM，所以我知道我可以在实例之外使用 Django 的环境。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:46:12.940

> 也许我应该放弃 Django 并扩展 Python 的 BaseHTTP 类来处理我的请求/响应？

为 Python 的 BaseHTTP 抛弃 Django 并不会改变 HTTP 是无状态协议的事实，并且您希望向其添加状态。您是正确的，缓存中的存储状态有些不稳定，具体取决于缓存后端。您可以将其切换到会话而不是缓存。

> 也许我应该创建一个单独的应用程序来保留“状态”并且 Django 通过套接字管道它请求数据？

是的，这似乎是一个可行的选择。HTTP 再次是无状态的，所以如果你想要状态，你需要将它保存在某个地方，而数据库是另一个你可以存储它的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:49:27.020

这听起来确实像是 Redis 和 MongoDB 可以有效处理的存储问题。您应该能够找到合适的数据结构来跟踪您的数据包数据和匹配支持，以创建廉价的原子更新以启动。

# mysql - 使用 GROUP BY - MySQL 获取单个值

> ID：11797078
> 
> 赞同：2
> 
> 时间：2012-08-03T13:49:32.660
> 
> 标签：mysql, select, group-by, sql-order-by

我有一个`lottery_winners`用以下有用的列调用的表：

```
+----+------+------+--------+---------+
| 编号 | 夹层 | 出价 | 金额 | 数字 |
+----+------+------+--------+---------+

```

`id`是表的唯一主 ID。`plid`指`past_lotteries`表（即我可以通过这种方式获取过去某个特定彩票中的所有彩票中奖者。`zbid`是会员/用户（中奖者）的id。`amount`是他们在彩票中中奖的金额总和，最后`numbers`是带有`VARCHAR`彩票号码的 CSV 字段。

这是表中可能包含哪些行的示例：

```
+----+------+------+--------+---------+
| 编号 | 夹层 | 出价 | 金额 | 数字 |
+----+------+------+--------+---------+
| 1 | 1 | 2 | 1 | 1,2,3 |
+----+------+------+--------+---------+
| 2 | 1 | 4 | 5 | 4,5,6 |
+----+------+------+--------+---------+
| 3 | 1 | 3 | 7 | 3,4,5 |
+----+------+------+--------+---------+
| 4 | 1 | 2 | 3 | 7,8,9 |
+----+------+------+--------+---------+
| 5 | 2 | 2 | 8 | 8,9,10 |
+----+------+------+--------+---------+

```

现在，我想运行一个`SELECT`语句，它将带回所有行，但以非常特定的顺序。这些行应该这样分组`zbid`（在这种情况下，我添加了一个`WHERE plid=1`子句）：

```
+----+------+------+--------+---------+
| 编号 | 夹层 | 出价 | 金额 | 数字 |
+----+------+------+--------+---------+
| 1 | 1 | 2 | 1 | 1,2,3 |
+----+------+------+--------+---------+
| 4 | 1 | 2 | 3 | 7,8,9 |
+----+------+------+--------+---------+
| 2 | 1 | 4 | 5 | 4,5,6 |
+----+------+------+--------+---------+
| 3 | 1 | 3 | 7 | 3,4,5 |
+----+------+------+--------+---------+

```

下一个标准是它们不仅应该按 分组`zbid`，而且在这个分组中它们应该按 排序`amount DESC`。这就是它现在的样子：

```
+----+------+------+--------+---------+
| 编号 | 夹层 | 出价 | 金额 | 数字 |
+----+------+------+--------+---------+
| 4 | 1 | 2 | 3 | 7,8,9 |
+----+------+------+--------+---------+
| 1 | 1 | 2 | 1 | 1,2,3 |
+----+------+------+--------+---------+
| 2 | 1 | 4 | 5 | 4,5,6 |
+----+------+------+--------+---------+
| 3 | 1 | 3 | 7 | 3,4,5 |
+----+------+------+--------+---------+

```

前两排互换了位置。

还有一个标准。如您所见，虽然它们按 分组，但它们`zbid`没有特定的顺序。我希望它按 分组`zbid`，但顺序应基于`sum(amount)`每个组。

下表`zbid`以无特定顺序显示了每个的总数（考虑到`plid=1`：

```
+--------+-------------+
| 出价 | 总和（金额） |
+--------+-------------+
| 2 | 4 |
+--------+-------------+
| 3 | 7 |
+--------+-------------+
| 4 | 5 |
+--------+-------------+

```

因此，使用此信息，使用该`SELECT`语句的最终结果应如下（带有添加的`sum(amount)`列）：

```
+----+------+------+--------+---------+----------- --+
| 编号 | 夹层 | 出价 | 金额 | 数字 | 总和（金额） |
+----+------+------+--------+---------+----------- --+
| 3 | 1 | 3 | 7 | 3,4,5 | 7 |
+----+------+------+--------+---------+----------- --+
| 2 | 1 | 4 | 5 | 4,5,6 | 5 |
+----+------+------+--------+---------+----------- --+
| 4 | 1 | 2 | 3 | 7,8,9 | 4 |
+----+------+------+--------+---------+----------- --+
| 1 | 1 | 2 | 1 | 1,2,3 | 4 |
+----+------+------+--------+---------+----------- --+

```

就是这样！现在我自己尝试了几件事，但我不确定如何获得完整的最终结果。我试过了：

```
SELECT id,plid,zbid,amount,numbers,sum(amount) FROM lottery_winners GROUP BY zbid ORDER BY sum(amount) DESC 
```

现在这似乎符合最终标准，但它并没有给我表格的个人结果。

另请注意，由于这些结果将被分页，因此我需要将其添加`LIMIT $start,$perpage`到查询的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:05:32.080

试试这个：

```
SELECT  a.id, 
        a.plid, 
        a.zbid,
        a.amount, 
        a.numbers,
        c.totalAmount
FROM    lottery_winners a
            INNER JOIN  (
                            SELECT  b.zbid,
                                    SUM(b.amount) totalAmount
                            FROM    lottery_winner b
                            WHERE   b.plid = 1
                            GROUP BY b.zbid
                        ) c 
                ON a.zbid = c.zbid
WHERE   a.plid = 1
ORDER BY    c.totalAmount desc 
```

# coldfusion - ColdFusion - 如何限制通过 CFHTTP 检索的数据？

> ID：11797079
> 
> 赞同：4
> 
> 时间：2012-08-03T13:49:37.407
> 
> 标签：coldfusion, coldfusion-9, railo, cfhttp

我`cfhttp`用来获取文档并解析内容，如下所示：

```
<cfhttp
        method="GET"
        url="#url.strURL#"
        resolveurl="true"
        useragent="#CGI.http_user_agent#"
        result="objGet"
        timeout="60"
        charset="utf-8"
    /> 
```

但是，有些文件相当大。我不需要得到整个东西——这可能需要很长时间。

有什么方法可以在加载字节数`cfhttp`后停止运行？`X`或者例如限制获得多少。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:04:25.747

如果目标服务器支持它，您可以使用[Range http 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)：

```
<cfhttp
        method="GET"
        url="#url.strURL#"
        resolveurl="true"
        useragent="#CGI.http_user_agent#"
        result="objGet"
        timeout="60"
        charset="utf-8"/>
   <cfhttpparam type="header" name="Range" value="bytes=0-499" />
 </cfhttp> 
```

Apache 和 IIS 支持这一点，因此对于静态内容，您可能会很幸运。动态内容会更棘手......

...我刚刚尝试过通过 Apache 提供 CFM 服务，看起来这不起作用。我怀疑如果 Apache/IIS 正在提供静态文件，那么它可以安全地从您请求的文档中发回一系列字节，因为它可以读取该文件。如果请求是针对由 CF/ASP/JSP/whatever 生成的内容，则由应用程序来遵守请求中的 Range: 标头。就我而言，我仍然得到了整个文档，因为我的应用程序没有查看 Range 标题。

我还应该提到，可以在 Java 中做你想做的事情，因为你可以更好地控制正在发生的事情，但你必须自己编写一些东西或使用替代的 HTTP 客户端库之一那里。我想这取决于该功能对您的重要性。如果文档非常大，那么您可能需要使用 cfhttp 的 file 属性来避免将整个响应放入内存，这可能会导致崩溃。

# objective-c - CIGaussian梯度失败

> ID：11797082
> 
> 赞同：2
> 
> 时间：2012-08-03T13:49:49.653
> 
> 标签：objective-c, gradient, core-image, gaussian, cifilter

我尝试生成 CIGaussianGradient 但我在控制台中得到了休闲输出

```
012-08-03 16:45:10.423 OGL[2882:303] *** Assertion failure in -[NSBitmapImageRep initWithCIImage:], /SourceCache/AppKit/AppKit-1187/AppKit.subproj/NSBitmapImageRep.m:1531
2012-08-03 16:45:10.425 OGL[2882:303] An uncaught exception was raised
2012-08-03 16:45:10.427 OGL[2882:303] <CIImage: 0x400353620> {
    FEPromise: 0x4007106e0 extent: infinite; filter CIGaussianGradient: 0x4001ecde0; kernel gaussianDot; center [150 150] color0 <CGColor 0x40021b6e0> [<CGColorSpace 0x400417ca0> (kCGColorSpaceICCBased; kCGColorSpaceModelRGB; Generic RGB Profile)] ( 1 1 1 0 ) color1 <CGColor 0x400236180> [<CGColorSpace 0x400417ca0> (kCGColorSpaceICCBased; kCGColorSpaceModelRGB; Generic RGB Profile)] ( 0 0 0 1 ) radius_recip 0.00333333
} parameter to -initWithCIImage: is not of finite extent 
```

虽然我的应用代码如下所示：

```
CIFilter *F = [CIFilter filterWithName:@"CIGaussianGradient"];
[F setDefaults];
[F setValue:[CIColor colorWithRed:1 green:1 blue:1 alpha:0] forKey:@"inputColor0"];
[F setValue:[CIColor colorWithRed:0 green:0 blue:0 alpha:1] forKey:@"inputColor1"];
CIImage *Fimg = [F valueForKey:@"outputImage"];
NSBitmapImageRep *FBitmap = [[NSBitmapImageRep alloc] initWithCIImage:Fimg]; 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:05:07.883

必须将无限平面的一部分裁剪为图像。请参阅：[Core Image 使用 CIGaussianGradient 滤镜的示例](https://stackoverflow.com/questions/8031785/an-example-use-of-cigaussiangradient-filter-for-core-image)

在下面的示例中，创建了一个 600 x 600 的图像。

例子：

```
// create a CIImage and apply the filter
CIImage *theCIImage = [[CIImage alloc] init];
theCIImage = [CIFilter filterWithName:@"CIGaussianGradient" keysAndValues:@"inputCenter", centerVector, @"inputColor0", color0, @"inputColor1", color1, @"inputRadius", radius, nil].outputImage;

// crop the image using CICrop
CGRect rect = CGRectMake(0.0, 0.0, 600.0, 600.0);
theCIImage = [CIFilter filterWithName:@"CICrop" keysAndValues:kCIInputImageKey, theCIImage, @"inputRectangle", rect, nil].outputImage;

NSBitmapImageRep *FBitmap = [[NSBitmapImageRep alloc] initWithCIImage:theCIImage]; 
```

# css - 如何将分页添加到我网站的图库中？

> ID：11797085
> 
> 赞同：0
> 
> 时间：2012-08-03T13:50:04.657
> 
> 标签：css, pagination, thumbnails, image-gallery

我正在尝试将 CSS 分页集成到我在我的网站上设置的缩略图库中。到目前为止，我还没有找到任何指向如何将分页自定义到现有脚本的教程。

据我所知，有很多很棒的 CSS 分页解决方案。这是[一个](http://www.webm.ag/2010/01/07/a-collection-of-css-pagination-styles/)有很多分页样式的页面（没有插件，集成似乎很通用，所以任何人都可以）。我下载了一些，希望教程能指导我找到我想要的东西，但到目前为止还没有运气。

我的代码取自[Pure CSS image gallery](http://cssglobe.com/articles/link_tech/02.html)。我看了一下集成[Gallerific](http://www.twospy.com/galleriffic/)，但发现说明很困难，所以我正在寻找一个纯 CSS 解决方案。

起初我想为同一个画廊使用多个 div，就像 Gallerific 一样，只是发现需要 JavaScript（或某种 jQuery 解决方案）来连接画廊所需的链接才能像这样工作。

目前，画廊包含在一个 div 中（它必须是为了工作的方式）。我正在考虑在拇指上添加分页，例如`"...<a href="#prev01"><img src="images/img/thmbs/01.jpg" alt="" class="thumb" /> ..."`

到目前为止，这里是我的代码：

```
<div id="gallerycenter">

        <ul id="gallery">

            <li>
                <a href="#prev01"><img src="images/img/thmbs/01.jpg" alt="" class="thumb" />
                <span><img src="images/img/01.jpg" id="prev01" class="showcase" alt="" /></span></a>
            </li>
            <li>
                <a href="#prev02"><img src="images/img/thmbs/02.jpg" alt="" class="thumb" />
                <span><img src="images/img/02.jpg" id="prev02" class="showcase" alt="" /></span></a>
            </li>
            <li>
                <a href="#prev03"><img src="images/img/thmbs/03.jpg" alt="" class="thumb" />
                <span><img src="images/img/03.jpg" id="prev03" class="showcase" alt="" /></span></a>
            </li>
            <li>
                <a href="#prev04"><img src="images/img/thmbs/04.jpg" alt="" class="thumb" />
                <span><img src="images/img/04.jpg" id="prev04" class="showcase" alt="" /></span></a>
            </li>
            <li>
                <a href="#prev05"><img src="images/img/thmbs/05.jpg" alt="" class="thumb" />
                <span><img src="images/img/05.jpg" id="prev05" class="showcase" alt="" /></span></a>
            </li>

        </ul>

</div> 
```

我唯一想到但没有尝试过的是将“.thumb”更改为“.pagination”，以便以班级形式开始“分页”，但这仍然不足以让我继续

任何人都可以帮我拼凑可能性或确认我疯了而且我对 CSS 的要求太多了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:02:39.063

您误解了您发布的链接。它只提供*样式*，不提供功能，因为 CSS 不*提供*此功能。分页不是向页面添加样式的问题，它是通过编程方式实现的，无论是服务器端还是客户端 JavaScript。您应该选择一个现有的 jQuery 分页插件并使用它，您将找不到仅使用 CSS 提供分页的解决方案，因为这根本不是 CSS 的用途。

# ruby-on-rails - 在 db rake:populate 中设置不可访问的属性

> ID：11797091
> 
> 赞同：0
> 
> 时间：2012-08-03T13:50:28.743
> 
> 标签：ruby-on-rails

我有一个名为 Treating 的模型，它需要同时存在“请求者”和“被请求者”。这些属性都不能在处理模型中访问。这是模型：

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :intro, presence: true, length: { maximum: 190 }
  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

    belongs_to :requestor, class_name: "User"
    belongs_to :requestee, class_name: "User"

    default_scope order: 'treatings.created_at DESC'

end 
```

我正在尝试使用这个 rake 文件 sample_data.rake 填充测试数据库：

```
namespace :db do
    desc "Fill database with sample data"
    task populate: :environment do
        ...

        requestors = User.all(limit: 6)
        50.times do
            intro = Faker::Lorem.sentence(5)
            requestors.each do |requestor|
                requestee = User.find(rand(1..6))
                requestor.sent_treatings.create!(intro: intro)
            end
        end
    end
end 
```

除非我将 :requestor 设置为处理模型中的可访问属性，并在我的 rake 文件的 'requestor.sent_treatings.create!(intro: intro)' 行中遵循 'intro: intro' 和 'requestee: requestee'，否则我会得到一个当我运行 rake db:populate 时出现验证错误，说“被请求者为空白”：

```
rake aborted!
Validation failed: Requestee can't be blank

Tasks: TOP => db:populate 
```

1) [更重要] 如何在我的 rake 文件中设置 'requestee' 而不必使其在模型中可访问？2）我有一个hacky方法来在我的'50.times.do'循环中声明'requestee'变量：'requestee = User.find（rand（1..6））'。有什么更好的方式来声明这个类似于我在“requestors.each do |requestor|”中声明我的“requestor”变量的方式？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:42:50.867

```
namespace :db do
    desc "Fill database with sample data"
    task populate: :environment do
        ...

        requestors = User.all(limit: 6)
        requestees = User.find((1..6).to_a)
        50.times do
            intro = Faker::Lorem.sentence(5)
            requestors.each do |requestor|
                requestee = requestees.sample #random array member, Ruby 1.9+
                treating = requestor.sent_treatings.build(intro: intro)
                treating.requestee = requestee
                treating.save!
            end
        end
    end
end 
```

# html - 图标不显示

> ID：11797094
> 
> 赞同：9
> 
> 时间：2012-08-03T13:50:54.083
> 
> 标签：html

我正在尝试向我的网址栏添加一个图标。但它没有出现，我确定路径是正确的，因为当我将它用作普通图像时，它确实出现了。这是html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title> title </title>
    <link href = "styles.css" rel="stylesheet" type="text/css" />

    <link rel="icon" type="image/png" href="../images/favicon.png"> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T14:12:30.063

首先，尝试提供完整的 URL。例如`"http://localhost/mysite/images/favicon.png"`（实际上使其适应您的配置）

否则，在我的网站上，这有效：

```
<link rel="shortcut icon" href="images/favicon.ico" /> 
```

尝试：

1.  将您的 png 转换为 ico。有免费的在线工具，例如[http://www.convertico.com/](http://www.convertico.com/)
2.  确保您的文件夹路径。不会`./images`代替`../images`吗？否则请尝试提供完整的 URL。例如`"http://localhost/mysite/images/favicon.ico"`.
3.  完成上述步骤后，尝试清除浏览器缓存并重新加载网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:56:54.510

利用`<link rel="icon" type="image/png" href="../images/favicon.png">`

请参阅[W3C 方法](http://www.w3.org/2005/10/howto-favicon)。

> 但是，您选择的图像格式必须是 16x16 像素或 32x32 像素，使用 8 位或 24 位颜色。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-03T13:54:34.137

您的`rel`属性必须是`icon`而不是`shortcut icon`。

有几种方法可以设置 Favicon，但这是我使用的：

```
<link rel="icon" type="image/png" href="<?= base_url('assets/images/logos/favicon.png'); ?>" /> 
```

# google-search-console - google.com 将错误抓取到不存在的网址

> ID：11797095
> 
> 赞同：3
> 
> 时间：2012-08-03T13:50:54.177
> 
> 标签：google-search-console

谷歌网站管理员工具对我网站上不存在的页面的网址有一堆抓取错误 (404)。我从不链接到这些网址。我该如何解决这个问题......它正在影响我的 AdWords 广告系列？我尝试进行 302 重定向，但没有成功。

# visual-studio-2010 - 在 VS2010 上构建解决方案时如何找到“慢”的地方？

> ID：11797098
> 
> 赞同：5
> 
> 时间：2012-08-03T13:51:06.387
> 
> 标签：visual-studio-2010, performance, build-process, profiler

有没有一种仪器可以在我的项目中找到一个需要很长时间才能构建的位置？类似于性能分析器，但用于 Visual Studio 的构建过程。

PS 我尝试在构建过程中使用另一个 VS 实例分析我的 Visual Studio，但我没有得到明显的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:55:48.943

```
Tools -> Options -> Projects and Solutions -> Build and Run 
```

在那里您可以更改 `MSBUild project build output verbosity` 设置

当处于**正常**水平时，它将为每个项目提供时间安排，因此可以用来查看导致速度变慢的原因。（在输出窗口中）

在更高的层次上，您将看到编译过程中发生的更多细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T12:37:58.727

我使用[http://msbuildprofiler.codeplex.com/](http://msbuildprofiler.codeplex.com/)获得了更好的结果，然后在 msbuild 提示符下编译我的解决方案

```
MSBuild.exe MySolution.sln /t:rebuild /l:MSBuildProfileLogger,MSBuildProfiler,Version=1.0.1.0,Culture=neutral,PublicKeyToken=09544254e89d148c 
```

请小心运行重建目标 (/t:rebuild)，否则第二次运行时会得到完全不同的结果。

我认为 1 美元的捐款是个好价钱 :)

# c++ - C++ Directx 11 环境照明

> ID：11797106
> 
> 赞同：1
> 
> 时间：2012-08-03T13:51:26.330
> 
> 标签：c++, shader, hlsl, lighting, directx-11

我目前在 Directx 11 中遇到照明问题，实际上是环境照明。这是代码：

```
 cbuffer ConstantBuffer
{
    float4x4 final;
    float4x4 rotation;    // the rotation matrix
    float4 lightvec;      // the light's vector
    float4 lightcol;      // the light's color
    float4 ambientcol;    // the ambient light's color
}

struct VOut
{
    float4 color : COLOR;
    float4 position : SV_POSITION;
};

VOut VShader(float4 position : POSITION, float4 normal : NORMAL)
{
    VOut output;

    output.position = mul(final, position);

    // set the ambient light
    output.color = ambientcol;

    // calculate the diffuse light and add it to the ambient light
    float4 norm = normalize(mul(rotation, normal));
    float diffusebrightness = saturate(dot(norm, lightvec));
    output.color += lightcol * diffusebrightness;

    return output;
}

float4 PShader(float4 color : COLOR) : SV_TARGET
{
    return color;
} 
```

然后我将值发送到着色器：

```
ambLight.LightVector = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 0.0f);
ambLight.LightColor = D3DXCOLOR(0.5f, 0.5f, 0.5f, 1.0f);
ambLight.AmbientColor = D3DXCOLOR(0.2f, 0.2f, 0.2f, 1.0f);

ShaderManager.UpdateSubresourceDiffuseShader(devcon); 
```

然后我得到以下信息： [![一只忙碌的猫](../Images/8bbcfdb980eee896190ab79ec510bbad.png)](https://i.stack.imgur.com/A2QsE.png)

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:27.873

我尝试了您的着色器并且似乎可以正常工作，因此可能某些变量未正确传递。

您可以尝试直接将一个变量名称设置为颜色输出：

```
output.color = lightvec; 
```

和

```
output.color = lightcol; 
```

首先，您可以仔细检查值是否正确传递。

# eclipse - 有线junit测试断言

> ID：11797107
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:51:27.187
> 
> 标签：eclipse, maven, junit, assert

嗨我有以下junit测试

```
@Test
public void testTest() {
    AddressEntity entity = null;
    assert (entity.getStatus() == StatusType.REMOVED);
} 
```

在eclipse中它变绿了，maven发现了错误。

为什么它在eclipse中不会抛出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:57:48.000

Maven 默认启用断言。[见surefire官方文档](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#enableAssertions)

默认情况下，Eclipse 不启用资产。您可以通过在 JVM 选项中添加 -ea 来启用它们。[参见 Oracle 官方文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)

在您考虑 UnitTest 时，您应该使用 Assert.assertSame()。[见 JUnit 官方文档](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.Object,%20java.lang.Object%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:29:36.370

找不到 eclipse 忽略 java 的 assert 关键字的实际原因。

但我建议你不要在你的 JUnit 中使用 java 的断言。这不是一个信息丰富的断言和一个不好的做法。使用 org.junit.Assert 断言之一。它可以在 eclipse / maven 中工作。

祝你好运。

# android - Mono for Android - 布局设计器问题

> ID：11797111
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:51:33.177
> 
> 标签：android, layout, mono, designer

我正在使用带有 VS 2010 的 Mono for Android 4.2.4。如果您从设计器工具栏中更改主题、API 版本、方向或设备名称，则布局设计器不会正确刷新。MonoDevelop 工作正常。

有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:11:11.497

我一个也没见过。还有其他问题，如果您修改 xaml 文件并更改寡妇而不保存它，您的更改将消失！虽然 Monodroid 是一个很棒的工具，但仍然存在一些错误

# java - Mybatis 查询返回错误结果。可能的缓存问题？

> ID：11797112
> 
> 赞同：1
> 
> 时间：2012-08-03T13:51:41.847
> 
> 标签：java, mybatis

我有一个 JUnit 测试，其中包括使用 Mybatis。在测试开始时，我正在检索表中的记录数。

在测试结束时，我希望表中会出现一条额外的记录，并且有一个断言来验证这个条件。但是我发现第二个查询返回的记录数与第一个查询完全相同。

我知道表中肯定插入了一条新记录。

我认为这可能与缓存有关，因此我尝试刷新与会话关联的所有缓存。我也尝试过使用`setCacheEnabled(false)`，但结果仍然相同。

这是我的代码片段 -

```
@Test
public void config_0_9() {
    session.getConfiguration().setCacheEnabled(false);
    cfgMapper = session.getMapper(CfgMapper.class);
    int oldRecords = cfgMapper.countByExample(null);

    messageReprocessor.processSuspendedMessages();
    session.commit();

    int newRecords = cfgMapper.countByExample(null);
    assertTrue(newRecords == oldRecords + 1);
} 
```

# c# - 使用高级安全设置添加要存储的证书

> ID：11797116
> 
> 赞同：0
> 
> 时间：2012-08-03T13:51:56.230
> 
> 标签：c#, certificate, x509certificate

这里有一篇文章[如何使用 c# 以编程方式将证书安装到本地机器存储中？](https://stackoverflow.com/questions/566570/how-can-i-install-a-certificate-into-the-local-machine-store-programmatically-us)关于如何添加到商店。

但是没有设置高级安全性的选项（每次使用证书时都请求密码）。怎么做 ？

# mysql - MySQL - 选择语句中的循环？

> ID：11797121
> 
> 赞同：0
> 
> 时间：2012-08-03T13:52:16.253
> 
> 标签：mysql, select, loops, split

我有一张表，其中记录了有关由 ID 完成的任务的各种信息。该表如下所示：

```
身份证号-----日期
1 50 -----03/08/2012
1 60 -----2012 年 1 月 7 日
2 40 -----05/08/2012
2 50 -----02/07/2012
.... ETC

```

我想要做的是有这样的结果：

```
ID Marks_In_Jul ---Marks_In_Aug
1 -----60 -----50       
2 -----50 -----40

```

....等（如果需要，列可以分为几个月、几周、几天）

我可以通过以下方式手动执行此操作：

```
SELECT 
id,
sum(if(date BETWEEN '2011-07-01' AND '2011-07-31', mark,0)) as Marks_In_Jul,
sum(if(date BETWEEN '2011-08-01' AND '2011-08-31', mark,0)) as Marks_In_Aug,
...
GROUP BY id;
.... etc 
```

但这都是手动的，如果我想将其缩小到几周，手动更改日期需要时间（而且几乎不可能按天进行）

有没有办法在 MySQL 中创建某种循环或类似的东西，我可以在其中更改开始/结束值和所需的间隔（1、7 或 30 等......）

谢谢你，唐

# c# - C#中的正则表达式

> ID：11797125
> 
> 赞同：0
> 
> 时间：2012-08-03T13:52:30.940
> 
> 标签：c#

我想从以下 HTML 解析第二个 div：

```
<div kubedfiuabefiudsabiubfg><div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'><div kubedfiuabefiudsabiubfg> 
```

即，这个值：`<div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'>`

id 可以包含任何数字。

这是我正在尝试的：

```
Regex rgx = new Regex(@"'post-body-\d*'");
var res = rgx.Replace("<div kubedfiuabefiudsabiubfg><div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'><div kubedfiuabefiudsabiubfg>", ""); 
```

我期待结果`<div kubedfiuabefiudsabiubfg><div kubedfiuabefiudsabiubfg>`，但这不是我得到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:11:44.230

如果您 100% 确定数字之前和之后的文本将始终相同，则可以使用 String 类的 .IndexOf 和 .Substring 方法将字符串分成几部分。

```
string original = @"<div kubedfiuabefiudsabiubfg><div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'><div kubedfiuabefiudsabiubfg>"

// IndexOf returns the position in the string where the piece we are looking for starts
int startIndex = original.IndexOf(@"<div class='post-body entry-content' id='post-body-");
// For the endIndex, add the number of characters in the string that you are looking for
int endIndex = original.IndexOf(@"' itemprop='articleBody'>") + 25;

// this substring will retrieve just the inner part that you are looking for
string newString = original.Substring(startIndex, endIndex - startIndex);

// newString should now equal "<div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'>"

// or, if you want to just remove the inner part, build a different string like this:
// First, get everything leading up to the startIndex
string divString = original.Substring(0, startIndex);
// then, add everything after the endIndex
divString += original.Substring(endIndex);

// divString should now equal "<div kubedfiuabefiudsabiubfg><div kubedfiuabefiudsabiubfg>" 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:15:10.957

您没有得到预期结果的原因是您的正则表达式字符串只搜索`'post-body-\d*'`，而不是`div`标签的其余部分。此外，执行[Regex.Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)实际上会替换您正在搜索的文本，而不是返回它，因此您最终会得到*除*正在搜索的文本之外的所有内容。

`"<div class='post-body entry-content' id='post-body-\d*' itemprop='articleBody'>"`尝试使用[Regex.Matches](http://msdn.microsoft.com/en-us/library/e7sf90t3)（或[Regex.Match](http://msdn.microsoft.com/en-us/library/twcw2f1c)如果您只关心第一次出现）用 @ 替换您的正则表达式字符串，并处理[Matches](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match)。

例如：

```
string htmlText = @"<div kubedfiuabefiudsabiubfg><div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'><div kubedfiuabefiudsabiubfg>";

Regex rgx = new Regex(@`"<div class='post-body entry-content' id='post-body-\d*' itemprop='articleBody'>");
foreach (Match match in rgx.Matches(htmlText))
{
    // Process matches
    Console.WriteLine(match.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:03:20.080

您可以将您的 HTML 片段解析为 XML 片段并`id`直接提取属性，例如

```
var html = "<div kubedfiuabefiudsabiubfg><div class='post-body entry-content' id='post-body-7494158715135407463' itemprop='articleBody'><div kubedfiuabefiudsabiubfg>"
var data = XElement.Parse(html).Element("div").Attribute("id"); 
```

# reporting-services - 如何通过 URL 将日期参数传递给 2005 SSRS 报告

> ID：11797129
> 
> 赞同：3
> 
> 时间：2012-08-03T13:52:39.410
> 
> 标签：reporting-services, reportingservices-2005

我正在尝试为报告创建 URL 链接并传入日期参数​​。

该报告有一个`InDate`参数，该参数映射到由 SQL 查询填充的下拉列表。该查询返回一个日期时间（值）和一个以`{month}`-`{year}`格式输出日期值的表达式（标签）。出现在下拉列表中的实际标签值是“Jun-2012”、“Mar-2012”等。该`InDate`参数还用作驱动其他两个日期下拉列表的输入。

报告 URL 的当前迭代如下：

`dadsql04/ReportServer/Pages/ReportViewer.aspx?%2fRED+Data+Warehouse/RRMemo&rs%3aCommand=Render&rc%3aParameters=false&InDate=06/30/2012`

当我加载 URL 时，我收到以下错误消息：

参数`InDate`缺少值

我尝试使用不同的`InDate`参数值，转义斜杠等，但似乎没有任何效果。任何帮助或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:54:14.997

事实证明，问题在于 InDate 参数被定义为字符串而不是日期时间值。一旦参数从字符串更改为日期时间，URL 就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:01:07.237

日期参数格式看起来不错，但您尝试使用的 URL 引用了[报表管理器](http://msdn.microsoft.com/en-us/library/ms157147%28v=sql.105%29.aspx)组件。

使用此[URL](http://msdn.microsoft.com/en-us/library/ms155391%28v=sql.105%29.aspx)直接查询报表 Web 服务：

`http://dadsql04/ReportServer?/RED+Data+Warehouse/RRMemo&rc:Parameters=false&InDate=06/30/2012`

# html - 为什么做 HTML 在所有现代浏览器中坚持旧的 IE5 框模型？

> ID：11797130
> 
> 赞同：7
> 
> 时间：2012-08-03T13:52:41.610
> 
> 标签：html, css

我在按钮和一些 CSS 方面遇到了一个奇怪的问题，我注意到它的行为就好像它遵循旧的 IE5 盒子模型，其中高度 = 高度 + 填充。

经过一番浏览后，我发现了[这篇文章](http://www.cssnewbie.com/button-height-and-a-broken-box-model/)，它证实了我的假设，但没有解释为什么会这样。

有谁知道为什么所有现代浏览器（Firefox、Chrome、IE9）都这样对待按钮元素？是否有人知道使按钮元素使用（据我所知）那些浏览器中的其他元素使用的框模型的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:54:14.223

我什至从未意识到按钮会以这种方式起作用，但我通常不使用输入元素并选择时尚 div 等效项，因为它们更容易设置样式并且在所有浏览器中看起来都相同。

使按钮像 div 元素一样缩放的解决方法是将`box-sizing`属性设置为`content-box`，这是 div 的默认值：

```
button, input[type=button], input[type=submit]
{
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
    box-sizing: content-box;
} 
```

[这是 JSFiddle 上的一个示例](http://jsfiddle.net/Srg4m/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:31:39.417

这个时候问这个问题的有趣之处在于，JS/CSS 社区的一些高端人士已经开始在他们的生产项目中使用这个盒子模型的非常兼容的版本。

`box-sizing : border-box`将使大多数现代浏览器的行为类似于输入。
请参阅：[Paul Irish - Border-Box FTW](http://paulirish.com/2012/box-sizing-border-box-ftw/)

直接的好处是能够更快地排列所有内容，而不必使用负边距，除非您实际上打算对非`fixed`/非`absolute`定位元素进行 z-index 覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:00:20.920

`<button>`被认为是内联标签，那么它自然不会使用W3C盒子模型。

这纯粹是合乎逻辑的，但我同意，完全令人不安。现在的重点是：为什么不将其视为块标签？

```
button {
    width: 100px;
    padding: 0 30px;
}

#a { display: inline; }
#b { display: block; }
#c { display: inline; box-sizing: content-box; }
#d { display: block; box-sizing: content-box; }
```

```
<button id="a">aaa</button> 
<button id="b">bbb</button>
<button id="c">ccc</button>
<button id="d">ddd</button>
```

# windows-8 - WinRT 中的网络检查（C# 实现）

> ID：11797133
> 
> 赞同：3
> 
> 时间：2012-08-03T13:53:02.650
> 
> 标签：windows-8, windows-runtime

我们如何在 Windows 8 Metro 应用程序中检查网络状态。即不同网络的可用性（3g、4g、wifi 等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:16:55.453

试试[这个方法](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d8e76732-19d3-47b3-840f-70d87c75ce9f)，我认为这是在 windows 8 中检查网络可用性的最简单形式。

```
 http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d8e76732-19d3-47b3-840f-70d87c75ce9f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:01:16.553

我认为此[示例下载](http://code.msdn.microsoft.com/windowsapps/Network-Information-Sample-63aaa201)对您有所帮助....

# cakephp - HABTM cakephp 和保存

> ID：11797139
> 
> 赞同：0
> 
> 时间：2012-08-03T13:53:25.387
> 
> 标签：cakephp, associations

大家好我正在尝试创建一个注册页面，一个人创建一个帐户，然后创建一个用户。该帐户可以有多个用户，一个用户可以有 0 个或 1 个帐户。我当前的代码遇到的问题是 account_id 不是从选择框中加载的

用户可以有 0 个或 1 个帐户 该帐户有 1 个或多个用户

我的表架构是

用户 -`id, username, firstname, lastname` 帐户 -`id, companyname` 帐户用户 -`id, account_id, user_id`

账户模型

```
<?php

class Account extends AppModel{

    var $name='Account';
    public $useTable = 'accounts';
    public $primaryKey = 'id';
    var $hasAndBelongsToMany = array(
        'User' =>
            array(
                'className'=>'User',
                )
            ); 
```

用户模型

```
 class User extends AppModel{ 

        public $name = 'User';
        public $useTable = 'users';
        public $primaryKey = 'id';
        var $hasAndBelongsToMany = array(
            'Account' =>
                array(
                    'className'=>'Account',
                    'joinTable'=>'accounts_users'
                    )); 
```

add 函数是帐户控制器

```
function add(){
        $this->set('title_for_layout', 'Account registration');
        $this->set('stylesheet_used', 'style');
        $this->set('image_used', 'eBOXLogo.jpg');   

        if($this->request->is('post')){
            $this->Account->create(); 
            if ($this->Account->save($this->request->data)){
                $this->Session->setFlash('The user has been saved');
                $this->redirect( array('controller' => 'Users','action' => 'addAdmin'));
            }
            else{ 
                $this->Session->setFlash('The business could not be saved. Please, try again.');
                } 
        }
        } 
```

用户 addAdmin 功能

```
function addAdmin(){
    $this->set('title_for_layout', 'Please Login');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');   
if($this->request->is('post')){
$this->User->create(); 
$this->set('accounts', $this->User->Account->find('list'));
if ($this->User->save($this->request->data)) 
{ 
    $this->Session->setFlash('The user has been saved');  
    $this->redirect( array('controller'=>'Users','action' => 'login')); 
}
else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
} 
```

}

addAdmin 表单

```
<h2>Welcome please add your Administrator Details</h2>
<?php
echo $this->Form->create('User', array('action'=>'add'));
echo $this->Form->input('Account');
echo $this->Form->input('username',array('label'=>'Username: '));
echo $this->Form->input('password',array('label'=>'Password: '));
echo $this->Form->input('password_confirmation',array('type'=>'password'));
echo $this->Form->input('email',array('label'=>'Email: '));
echo $this->Form->input('title',array('label'=>'Title: '));
echo $this->Form->input('firstname',array('label'=>'First Name: '));
echo $this->Form->input('surname',array('label'=>'Surname: '));
echo $this->Form->input('street',array('label'=>'Street Address: '));
echo $this->Form->input('city',array('label'=>'City: '));
echo $this->Form->input('state',array('label'=>'State: '));
echo $this->Form->input('country',array('label'=>'Country: '));
echo $this->Form->input('access_level', array('default' => 2));
echo $this->Form->end('Add Administrator');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:02:23.437

正如我在评论中所说，错误没有清楚地描述。这是第一个答案，如果答案不断更新，我将更新/更正它。

错误可能在控制器中：

```
function addAdmin(){
$this->set('title_for_layout', 'Please Login');
$this->set('stylesheet_used', 'style');
$this->set('image_used', 'eBOXLogo.jpg');  

if($this->request->is('post')){
$this->User->create(); 
$this->set('accounts', $this->User->Account->find('list'));//this line is wrong
if ($this->User->save($this->request->data)) 
{ 
    $this->Session->setFlash('The user has been saved');  
    $this->redirect( array('controller'=>'Users','action' => 'login')); 
}
else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
} 
```

set 函数并不总是被称为隐藏在 if 后面。尝试：

```
 function addAdmin(){
$this->set('title_for_layout', 'Please Login');
$this->set('stylesheet_used', 'style');
$this->set('image_used', 'eBOXLogo.jpg');   
$this->set('accounts', $this->User->Account->find('list'));//moved

if($this->request->is('post')){
$this->User->create(); 
if ($this->User->save($this->request->data)) 
{ 
    $this->Session->setFlash('The user has been saved');  
    $this->redirect( array('controller'=>'Users','action' => 'login')); 
}
else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
} 
```

# bash - rc.d 脚本在 /run/daemons 中查找我的二进制文件

> ID：11797140
> 
> 赞同：1
> 
> 时间：2012-08-03T13:53:32.110
> 
> 标签：bash, archlinux

编辑：我正在关注[这个例子](https://wiki.archlinux.org/index.php/Writing_rc.d_scripts)。

试图为 mongod 编写一个 archlinux rc.d 脚本。我把我的二进制文件放在`/usr/bin`. 这是我到目前为止得到的：

```
#!/bin/bash

# import predefined functions
. /etc/rc.conf
. /etc/rc.d/functions

# Point to the binary
DAEMON=/usr/bin/mongod

# Get the ARGS from the conf
. /etc/conf.d/crond

# Function to get the process id
PID=$(get_pid $DAEMON)

case "$1" in
   start)
    stat_busy "Starting $DAEMON"
    # Check the PID exists - and if it does (returns 0) - do no run
    [ -z "$PID" ] && $DAEMON $ARGS $> /dev/null
    if [ $? = 0 ]; then
        add_daemon $DAEMON
        stat_done
    else
        stat_fail
        exit 1
    fi
    ;;
   stop)
        stat_busy "Stopping $DAEMON"
    kill -HUP $PID &>/dev/null

    rm_daemon $DAEMON
    stat_done
    ;;
   restart)
        $0 stop
    sleep 1
    $0 start
    ;;
    *)
        echo "usage: $0 {start|stop|restart}"
esac 
```

问题是当我这样做时`sudo rc.d start mongod`，我收到以下错误：

```
:: Starting /usr/bin/mongod                                                                                   
[BUSY] /etc/rc.d/functions: line 203: /run/daemons//usr/bin/mongod: No such file or directory
                                                                                                              [DONE] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:03:05.347

Syntax error.

I used `$>` instead of `&>` on the line:

```
[ -z "$PID" ] && $DAEMON $ARGS $> /dev/null 
```

# android - 创建一个类似于使用 coredata 的 iOS 的 Android 应用程序

> ID：11797151
> 
> 赞同：0
> 
> 时间：2012-08-03T13:54:03.017
> 
> 标签：android, ios, core-data, tableview

我是 android 和 android 开发的新手。我正在尝试制作一个类似于我为 iOS 制作的应用程序，它使用 coredata 来管理 tableview 中的对象列表。您能否给我一些参考点供我查找，因为我什至不知道从哪里开始。tableview、coredata和实体的android“翻译”是什么？任何指向任何类型的文档或教程的链接都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:05:00.893

TableView在 Android中称为[ListView 。](http://developer.android.com/reference/android/widget/ListView.html)

[列表视图教程。](http://www.vogella.com/articles/AndroidListView/article.html)

CoreData在 Android中称为[SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html) [数据库。](http://developer.android.com/reference/android/database/package-summary.html)

实体在 Android 中称为 Table（它是使用 SQL 代码以编程方式完成的，与 Xcode 方式作为 UI 创建实体和 Coredata 的方式不同）。

[SQLite 数据库教程。](http://www.vogella.com/articles/AndroidSQLite/article.html)

注意：如果您是 Android 开发新手，那么来自 Google 的[Android 培训是一个好的开始。](https://developer.android.com/training/index.html)

# javascript - Javascript自动将String解析为int

> ID：11797154
> 
> 赞同：-2
> 
> 时间：2012-08-03T13:54:29.660
> 
> 标签：javascript

我正在从 JSP 页面中的 onclick 事件调用 JavaScript 函数。

```
 <%
       String value = "06654"
    %>

  <body>
   <a href="javascript://" onclick="myFunction(<%= value %>)">Click Me!</a>
  </body> 
```

我的 JavaScript 函数是这样的

```
 function myFunction(myString)
   {
      alert(myString);
      //Do Stuff;
   } 
```

myString 等于 06654 但是当我提醒它的值时我得到 6654。如何阻止 js 自动将 String 解析为 int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:08:51.203

如果将字符串输出到页面中，结果将是

```
… onclick="myFunction(06654)" … 
```

这显然被解释为一个数字。要使其成为 JavaScript 字符串，请在其周围加上引号：

```
… onclick="myFunction('<%= value %>')" … 
```

# php - 使用正则表达式在 HTML 标记之间提取数据

> ID：11797159
> 
> 赞同：0
> 
> 时间：2012-08-03T13:54:41.497
> 
> 标签：php, html, regex

使用正则表达式在 HTML 标记之间提取数据

我有这个示例，它成功地从名称中获取值并放入三个不同的数组中

```
$str = '&lt;ul&gt;
&lt;li&gt;&lt;a name="valuehere1" title="titlehere" href="/channel/london/"&gt;Link1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a name="valuehere2" title="titlehere" href="/channel/games/"&gt;Link1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a name="valuehere3" title="titlehere" href="/channel/sport/"&gt;Link1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;';

preg_match_all('/&lt;li&gt;&lt;a name="(.*)" title/', $str, $m);
print_r($m); 
```

* * *

我对下面的代码不感兴趣。我正在尝试提取`&lt;ul class="statelist"&gt;(.*) &lt;/ul&gt;`标签之间的所有数据，但它只是返回两个空数组

```
$data = '&lt;ul class="statelist"&gt;
                &lt;li&gt;&lt;a href="http://www.mymovingreviews.com/usa/alabama-movers-al-1"&gt;Alabama (45)&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="http://www.mymovingreviews.com/usa/alaska-movers-ak-2"&gt;Alaska (4)&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="http://www.mymovingreviews.com/usa/arizona-movers-az-3"&gt;Arizona (113)&lt;/a&gt;&lt;/li&gt;                     
                &lt;/ul&gt;';

preg_match_all('/&lt;ul class="statelist"&gt;(.*) &lt;\/ul&gt;/', $data, $m);

print_r($m); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:39:05.043

将 s 选项添加到您的正则表达式

```
preg_match_all('/&lt;ul class="statelist"&gt;(.*) &lt;\/ul&gt;/s', $data, $m);
                                                              ^^^^ here 
```

它将使您的正则表达式接受自动换行（\n 字符）。（[见文档](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)）

# java - 一次从两个不同的用户更新数据库

> ID：11797160
> 
> 赞同：1
> 
> 时间：2012-08-03T13:54:41.557
> 
> 标签：java, database

我只是想制作一个可能有很多员工和医生可以访问的项目。它将包含一个数据库和接口，我想用java来做。但现在我面临一个问题——我不知道如何使数据库能够一次更新，我的意思是当员工更新数据库时其他人可以访问更新的数据库。我以前在本地主机中使用过数据库，其中用户是一个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T14:03:47.620

您可以在 Java 中使用带信号量的同步块或监视函数。将它放在调用数据库的方法周围，您可以控制同时访问数据库的数量。

# java - 将鼠标侦听器添加到多个 JLabel

> ID：11797161
> 
> 赞同：0
> 
> 时间：2012-08-03T13:54:57.000
> 
> 标签：java, swing, jtable, jlabel

```
for(int k=0;k< dtm.getRowCount();k++) //dtm is object of default table model
{
    if(String.valueOf(dtm.getValueAt(k,1)).equalsIgnoreCase("Today") && check==0 )
    {
        cnt++;

        JLabel jp=new JLabel();
        panel.add(jp);
        panel.setLayout(null);

        if(cnt<=12)
        {
        jp.setBounds(j,500,100,100);
        j=j+115;

                jp.addMouseListener(this);
        }
        else
        {
            j=j-115;
            jp.setBounds(j,400,100,100);
        }
        String b="<html><body text=#FDFA0B>"+String.valueOf(dtm.getValueAt(k,0))+"'s Birthday";
        jp.setText(b);
        jp.setFont(new java.awt.Font("comicbd",Font.ITALIC+Font.BOLD, 14));

    }
} 
```

它不起作用 mouselister 仅适用于最后放置的标签...我想为所有标签应用鼠标侦听器我该怎么做..请帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:44:33.040

您当然可以将相同的内容添加`MouseListener`到多个组件中 - 这是一个最简单形式的示例：

```
 MouseListener ml = new MouseListener() {
        @Override
        public void mouseReleased(MouseEvent e) {System.out.println("Released!");}

        @Override
        public void mousePressed(MouseEvent e) {System.out.println("Pressed!");}

        @Override
        public void mouseExited(MouseEvent e) {System.out.println("Exited!");}

        @Override
        public void mouseEntered(MouseEvent e) {System.out.println("Entered!");}

        @Override
        public void mouseClicked(MouseEvent e) {System.out.println("Clicked!");}
    };

    JLabel j1 = new JLabel("Label1");
    j1.addMouseListener(ml);
    JLabel j2 = new JLabel("Label2");
    j2.addMouseListener(ml); 
```

**但是**根据您的代码，您正在弄乱 JTable - JTable 的行为与您的想法不同。您尝试编辑的标签实际上是 TableCellEditor 的一部分。JTable 使用单个 TableCellEditor（读取：单个 JLabel）来显示 JTable 中的每个单元格。这就是为什么您只看到监听器应用于最后一个单元格（因为那是唯一一个最后一个单元格不再具有完整组件的原因 - 其余的只是之前应用该组件的位置的幽灵）。

好消息是您可以在 中添加一个`MouseListener`，`JTable`并从那里获取信息：

```
 final JTable table = new JTable();
    MouseListener ml = new MouseListener() {
        @Override
        public void mouseReleased(MouseEvent e) {
            System.out.println(table.getModel().getValueAt(table.getSelectedRow(), table.getSelectedColumn()));
        }

        @Override
        public void mousePressed(MouseEvent e) {
            System.out.println(table.getModel().getValueAt(table.getSelectedRow(), table.getSelectedColumn()));
        }

        @Override
        public void mouseExited(MouseEvent e) {
            System.out.println(table.getModel().getValueAt(table.getSelectedRow(), table.getSelectedColumn()));
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            System.out.println(table.getModel().getValueAt(table.getSelectedRow(), table.getSelectedColumn()));
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            System.out.println(table.getModel().getValueAt(table.getSelectedRow(), table.getSelectedColumn()));
        }
    };

    table.addMouseListener(ml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:33:25.063

如果没有 SSCCE，我可以告诉您，您要在 3 个条件下添加侦听器：

*   `String.valueOf(dtm.getValueAt(k,1)).equalsIgnoreCase("Today")`
*   `check == 0`
*   和`if(cnt<=12)`

其他`JLabel`的（不通过这些条件的）没有分配你的听众。

确保您点击了正确的标签。

或`jp.addMouseListener(this);`在`JLabel`创建后立即移动（如果您想将侦听器添加到所有`JLabel`s）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:31:44.400

一种选择是添加另一个内部类：

```
 class MListener extends MouseAdapter{
         public void mouseReleased(MouseEvent e) {}
         //other mouse evetns
     } 
```

然后而不是：

```
jp.addmousListener(this); 
```

做：

```
jp.addMouseListener(new MListener()); 
```

# javascript - 我如何从 jquery 中的多个 div 中选择特定的 div

> ID：11797162
> 
> 赞同：1
> 
> 时间：2012-08-03T13:54:56.337
> 
> 标签：javascript, jquery, html

我有这样的东西，我需要在每个父级的主 div 中显示每个名为“plink”的 div，所以我尝试淡入“.plink”，但它对“plink”的所有 div 执行相同的功能

```
<script>

    $(document).ready(function(){
        $('.plink').hide();
        $('.project').mouseover(function(){
            $(this).next('.plink').fadeIn(400);
        });
        $('.project').mouseleave(function(){
            $(this).next('.plink').fadeOut(200);
        });

    });

</script>

<div class="project">
    <div class="plink">
        <div class="go"></div>
        <div class="goplus"><img src="images/more.png" border="0"/></div>
    </div>
    <div class="pic"><img src="images/portfolio_pic2.png" border="0" alt="projectname"/></div>
    <div class="title">Test1</div>
</div>
<div class="spacer_project"></div>
<div class="project">
    <div class="plink">
        <div class="go"></div>
        <div class="goplus"><img src="images/more.png" border="0"/></div>
    </div>
    <div class="pic"><img src="images/portfolio_pic.png" border="0" alt="projectname"/></div>
    <div class="title">test2</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:58:47.963

您可以使用`find()`而不是`next()`...

```
$(this).find('.plink').fadeIn(400); 
```

因为`this`是你的`.project`div 那么你需要“找到”你正在寻找的子元素。使用意味着*如果*`next()`它与选择器匹配，您将获得下一个元素（即检查下一个div是否与选择器匹配）*`.project``.plink`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:00:30.053

我会像 musefan 建议的那样走 FIND 路线。这是解决方案代码：

[http://jsfiddle.net/bx7YC/](http://jsfiddle.net/bx7YC/)

```
<div class="project">
    <div class="plink">
        <div class="go">go</div>
        <div class="goplus">goplus</div>
     </div>
     <div class="pic">pic</div>
     <div class="title">Test1</div>
</div>

<div class="spacer_project"></div>

<div class="project">
    <div class="plink">
        <div class="go">go</div>
        <div class="goplus">goplus</div>
    </div>
    <div class="pic">pic</div>
    <div class="title">Test2</div>
</div>​

$('.plink').hide();

$('.project').mouseover(function(){
  $(this).find('.plink').fadeIn(400);
});
$('.project').mouseleave(function(){
  $(this).find('.plink').fadeOut(200);
});​ 
```

我用 jsfiddle 的简单文本替换了损坏的 img 链接。*

# java - 使用 Java 客户端将不同格式的文件上传到 URL

> ID：11797165
> 
> 赞同：0
> 
> 时间：2012-08-03T13:55:04.237
> 
> 标签：java

我需要用 Java 编写一些代码，通过使用 HTTP PUT/POST 和 SMTP 将文件（.tz 格式）上传到 URL（prqs@vks.com）。我不知道该怎么做，我的应用程序不是基于 Web 的应用程序我必须编写一个纯 Java 客户端来执行此操作。我在网上搜索，但找不到合适的教程来说明如何做到这一点，我也发现了很多东西，他们使用 HTML 表单将文件上传到服务器。但这不是我想要的。

你能告诉我这是怎么做的吗？如果您可以指导我阅读教程或提供任何示例代码，那将非常有帮助。我已经为此挠头了很长时间。

谢谢viken21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:14:05.773

您可以尝试使用[Apache Commons Fileupload](http://commons.apache.org/fileupload/)来上传文件。看看[这个例子](http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload)。这可能对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:19:21.220

我一直从服务器端 Java 应用程序执行此操作。

如果您的要求是创建带有 .tz 格式附件的电子邮件，那么这里有一些很好的资源。

我个人使用 JavaMail API。它附带附加的 JavaDoc 和示例。看看里面的 demo 目录中的示例。希望它可以帮助你。

[Java 邮件 API](http://www.oracle.com/technetwork/java/javamail/index.html)

# javascript - 如何处理页面重新加载

> ID：11797168
> 
> 赞同：0
> 
> 时间：2012-08-03T13:55:15.423
> 
> 标签：javascript, backbone.js, pushstate, sammy.js

据我了解，处理页面重新加载的“常规”方法是使用其控制器、视图和模型在 Web 堆栈上复制功能和表示。我希望能深入了解处理这些情况的其他（可能更好）方法。以及对以下两种方法的反馈：

1.  在每个 Web（堆栈）应用程序页面上重新加载基于 js 框架的应用程序/套件，从而强制 js 框架处理所有路由和渲染

2.  使用 Web 堆栈来路由交互，然后根据交互使用主干显示视图。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:19:27.783

恕我直言，第**2**种方法是 Backbone 诞生的一种方法：)

按照这种方法，我们将完成所谓的[单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)。

但是在中大型应用程序中实现这一点可能会非常累人。您必须处理`Router`必须负责*初始化或替换*元素的复杂问题，还必须注意内存泄漏和*幽灵视图*。您必须定义一个系统来*刷新*您的集合和模型，因为您在每个页面中重复使用它们，...

因此，将这两种方法结合起来也是一个好主意。您可以将应用程序拆分为以下模块：`ManagingUsers`, `ManagingPosts`, `ManagingMedia`, 为这些模块创建单页应用程序, 包含不重新加载页面的 , , , ... 操作, 如果您移动到另一个模块, 页面将被重新加载`index`并`edit`进入`show`整个框架的公司并具有健康的内存重置。

# iphone - MPMoviePlayerController 缓冲数据的百分比

> ID：11797169
> 
> 赞同：8
> 
> 时间：2012-08-03T13:55:19.163
> 
> 标签：iphone

使用`MPMoviePlayerController`时有没有办法找到缓冲视频时完成的数据百分比？

我的目标是显示进度条，显示加载了多少百分比并显示其百分比的数字计数。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:00:56.820

Have you checked out the Apple documentation for the `MPMoviePlayerController` ?

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

Here you can find two properties that might help you. `duration` and `playableDuration`, it's not an exact fit, but pretty close. One thing you will need to implement yourself is a way to intelligently query these properties, for example maybe you might want to use an `NSTimer` and fetch the info from your `MPMovePlayerController` instance every 0.5 seconds.

For example assume you have a property called `myPlayer` of type `MPMoviePlayerController`, you will initiate it in your init method of the view controller etc...

Then followed by this:

```
self.checkStatusTimer = [NSTimer timerWithTimeInterval:0.5 
                                                target:self 
                                              selector:@selector(updateProgressUI) 
                                              userInfo:nil 
                                               repeats:YES]; 
```

And a method like this to update the UI:

```
- (void)updateProgressUI{
    if(self.myPlayer.duration == self.myPlayer.playableDuration){
        // all done
        [self.checkStatusTimer invalidate];
    }
    int percentage = roundf( (myPlayer.playableDuration / myPlayer.duration)*100 );
    self.progressLabel.text = [NSString stringWithFormat:@"%d%%", percentage];
} 
```

Note the double percentage sign in our `-stringWithFormat`, this is another format specifier to resolve to a `%` sign. For more on Format specifiers [see here](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html).

# ruby - 如何强制黄瓜场景失败？

> ID：11797171
> 
> 赞同：7
> 
> 时间：2012-08-03T13:55:29.453
> 
> 标签：ruby, cucumber, capybara

有没有办法强制黄瓜场景失败？

我需要在每次测试结束时检查一些失败的场景。所以我想我可以检查一个“错误”对话框，如果它发生了，测试就失败了。

使用下面的代码可以做到这一点，但是有一个问题。一旦我在失败中提出异常！函数，然后 cucumber 停止运行 After 钩子的其余部分，因此不会调用注销函数。

曾是：

```
After() do |scenario|  
  #Checking for Error popups
  if page.has_selector?(:dialog_message, 1, :text => 'Error')
    fail!(raise(ArgumentError.new('Unexpected Error dialog!')))
  end
  logout
end 
```

现在：

```
After() do |scenario|  
  #Checking for Error popups
  if page.has_selector?(:dialog_message, 1, :text => 'Error')
    scenario.fail!(logout)
  end
end 
```

有没有更好的方法在不引发异常的情况下使黄瓜测试失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:30:48.277

您可以使用正常的断言使 after 挂钩失败。对 Capybara/rspec 异常做的不多，但我认为你可以做到：

```
page.should have_selector?(:dialog_message, 1, :text => 'Error') 
```

但是，如果您这样做或执行scenario.fail!()，您仍然不会注销。您需要将其包装在 begin-ensure 块中。

尝试这个：

```
After do |scenario|
    begin
        page.should have_selector?(:dialog_message, 1, :text => 'Error')
    ensure
        logout
    end
end 
```

**更新**

如果您不想调用标准断言并直接使场景失败，您可以执行以下操作 - 您需要使用`fail`而不是`fail!`：

```
After() do |scenario|  
  begin 
    #Checking for Error popups
    if page.has_selector?(:dialog_message, 1, :text => 'Error')
      fail(ArgumentError.new('Unexpected Error dialog!'))
      #Or you can just do fail('Unexpected Error dialog') if you do not care about the type.
    end
  ensure
    logout
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:59:02.833

只是一个初步的答案，因为我还不能检查出来，但我假设调用`Raise`总是保证会停止执行（除非它是在 proc 或 lambda 中完成的，所以它的评估被推迟了）。

尝试简单

```
if page.has_selector?(:dialog_message, 1, :text => 'Error')
    scenario.fail!(StandardError.new('Unexpected Error Dialog!'))
end
logout 
```

# linux - .htaccess 被拒绝与 wwwroot 之外

> ID：11797175
> 
> 赞同：1
> 
> 时间：2012-08-03T13:55:51.193
> 
> 标签：linux, security, .htaccess, permissions

我需要将 PHP 脚本使用的高敏感数据文件上传到我的服务器。请告诉我什么是最安全的方式以及原因：

*   将其放在不在 www 根目录下的文件夹中
*   将其置于 www root 下，但使用 .htaccess 规则拒绝访问

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:15:20.263

如果您有对此服务器的 ftp/sftp/ssh 访问权限，则没有理由不将其放在 www 文档根目录之外。如果您的托管服务仅授予您访问 www 文档根目录的权限，那么您将不得不使用第二种解决方案，但第一种更安全。

如果您的站点上存在易受攻击的脚本，则可以绕过 Htaccess。有些工具，如果放置正确，文件根目录中的文件并被远程攻击者上传甚至替换。例如，有[php“远程文件管理器”](http://packetstormsecurity.org/files/86230/WSH-PHP-Backdoor.html)允许远程攻击者更改权限、编辑或替换现有文件，包括您的 htaccess 文件。如果您正在运行像 Wordpress 或其他一些 CMS 之类的网站，这些网站本身并不十分安全，并且有很多第三方插件，那么这些插件可能容易受到攻击，并且如果您碰巧使用了一个，您的 htaccess 文件的访问限制可能会被绕过。

当敏感信息位于文档根目录之外时，有权访问文档根目录的攻击者将无法访问这些文件，并且脚本中的漏洞影响对这些文件的访问的可能性要小得多。很可能需要系统级漏洞利用才能访问文档根目录之外的文件。

# powershell - Powershell 字符串变量不开心

> ID：11797178
> 
> 赞同：1
> 
> 时间：2012-08-03T13:55:55.743
> 
> 标签：powershell

我有以下 powershell 脚本：

```
$BizTalkHosts = "BTSSvc*"
    Foreach($svc in Invoke-Command -Computer d-vasbiz01 -ScriptBlock{ get-service -Name $BizTalkHosts})
    {
        Write-Host $svc.name
    } 
```

我希望它返回远程计算机上以“BTSSVC*”开头的服务列表。问题是，直到运行时我才真正知道服务名称，它将作为参数传递到脚本中。

当我运行上面的脚本时，我得到了所有服务的列表——这不是我想要的！但是，如果我向 get-service cmdlet 提供一个字符串文字（即 get-service -Name "BTSSvc*），它可以正常工作，提供一个过滤列表。

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:06:25.390

在这种情况下无需使用`Invoke-Command`，您可以通过以下方式获取服务`Get-Service`：

```
Get-Service -Name $BizTalkHosts -ComputerName d-vasbiz01 
```

为了能够做到这一点`Invoke-Command`（这是一个矫枉过正），您需要在脚本块内创建一个参数并通过 -ArgumentList 参数将 $BizTalkHosts 传递给脚本块

```
$BizTalkHosts = "BTSSvc*"
    Foreach($svc in Invoke-Command -Computer d-vasbiz01 -ScriptBlock{ param($name) get-service -Name $name}) -Argument $ArgumentList 
    {
        Write-Host $svc.name
    } 
```

# php - 带有重定向的php消息传递

> ID：11797181
> 
> 赞同：0
> 
> 时间：2012-08-03T13:56:10.467
> 
> 标签：php, messaging

我正在构建自己的内容管理系统。我遇到的一个问题是我以非最佳方式处理我的错误消息/成功消息。例如，我有一个包含表单的页面，然后我将该表单提交给处理器，并带有一个参数以重定向到带有类似 url 的主“列表”页面`www.example.com/projects.php?msg=success`，然后在 5 秒左右后使用 jquery 消息消失。我意识到这远非最佳的消息传递方式，因为如果用户重新加载页面，则 msg 会再次显示，因为`?msg=success`它仍在 URL 中。我想知道是否有更好的方法（通过重定向发送消息）？请记住，我不想更改我的 CMS 的结构。

# search - Solr 是否具有与 Sphinx 相同的“严格顺序运算符”？

> ID：11797183
> 
> 赞同：0
> 
> 时间：2012-08-03T13:56:25.150
> 
> 标签：search, solr, sphinx

我在 Solr 和 Sphinx 之间进行选择。

[Sphinx 文档页面](http://sphinxsearch.com/docs/current.html) 有一个名为“5.3。扩展查询语法”的部分，其中描述了以下搜索参数（以及其他参数）：

*   严格顺序运算符（例如：aaa << bbb << ccc） -
*   NEAR，广义邻近算子（例如：hello NEAR/3 world NEAR/4 "my test"）——根据单词之间的距离进行搜索
*   SENTENCE/PARAGRAPH（例如：“Bill Gates” PARAGRAPH “Steve Jobs”）- 在句子/段落中搜索

Solr 有没有类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:11:05.197

*   严格的顺序运算符：您需要为此使用 SpanQueries，查看[enter link description here](http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/https://stackoverflow.com/questions/6957284/span-queries-in-solr)以了解 SpanQuery 的说明，为了从 Solr 使用它们，您可以尝试[SurroundQParser](http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/search/SurroundQParserPlugin.html)或查看[其他问题](https://stackoverflow.com/questions/6957284/span-queries-in-solr)
*   NEAR，广义邻近运算符：是的，这是支持的，请参阅[邻近搜索](http://lucene.apache.org/core/3_6_1/queryparsersyntax.html#Proximity%20Searches)
*   句子/段落：不是直接的。您可以尝试几种方法：
    *   以某种方式将它们映射到文档（并且可能使用 4.0 中的加入功能将段落文档链接到父文档等）
    *   尝试插入有关具有特殊标记/间隙的段落的信息，请参阅[此](http://lucene.472066.n3.nabble.com/Sentence-level-searching-td474384.html)

# php - 判断输入字段是否有值的方法

> ID：11797184
> 
> 赞同：1
> 
> 时间：2012-08-03T13:56:25.580
> 
> 标签：php, javascript

我重新发布这个是为了让我的问题更具体。我正在尝试结合此处找到的计算器：[http](http://www.nhpta.com/over-tax-calculator.html) ://www.nhpta.com/over-tax-calculator.html 。

我希望计算按钮足够聪明，可以知道两个输入字段之一是否输入了值，然后执行两个 JS 函数之一，Calculate 或 Calculate2。如果两个字段都输入了值，我希望它代替按钮抛出错误。这是我下面的概念代码，我不知道如何定义 php 变量，也不知道如何告诉它查看每个输入字段并确定是否输入了值。也不确定打印是否正确？

```
<?php
    $input_B   = "form field named input_B";
    $input_C  = "form field named input_C";

    if($input_B == 'has a value' && $input_C == 'has no value')
    { 
        print ' <P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="Calculate(this.form.input_A.value, this.form.input_B.value, this.form.input_C.value, this.form)"></P>'; 
    } 
    elseif($input_C == 'has a value' && input_B == 'has no value' )
    { 
        print ' <P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="Calculate2(this.form.input_D.value, this.form.input_E.value, this.form.input_F.value, this.form)"></P>';
    } 
    elseif ($input_C == 'has a value' && input_B == 'has a value')
    { 
        print ' Please choose only one field to fill in';
    } 
    else 
    {
        print ' <P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="Calculate(this.form.input_A.value, this.form.input_B.value, this.form.input_C.value, this.form)"></P>';
    } // End if/else if
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:01:38.507

As long as the two input fields have (unique!) ids, you can do something like this:

```
var field0 = document.getElementById("field0id").value;
var field1 = document.getElementById("field1id").value;
if(field0 === ""){
    if(field1 !== ""){
        calculate();
    }else{
        //error
    }
}elseif(field1 === ""){
    calculate2();
}else{
    //error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:02:32.827

First of all, you shouldn't need to do anything server-side for this (that's where PHP runs). Instead use javascript. It should look something like this: (Bear in mind that this is using jQuery, which is a javascript library. You can learn about jQuery [here](http://www.w3schools.com/jquery/default.asp).)

```
<label for="input1">Input 1</label>
<input type="text" name="input1" id="input1" /><br />
<label for="input2">Input 2</label>
<input type="text" name="input2" id="input2" /><br />
<input type="submit" value="Submit" id="submit" onclick="calculate();" <!-- you only need the onclick attribute if you're not using jQuery --> /> 
```

**Edit: functions modified to perform the logic as defined in the question**

```
<!-- pseudo-code with jQuery -->
<script language="javascript" type="text/javascript">
    $("#submit").on('click', function() {
        var input1Val = $("#input1").val();
        var input2Val = $("#input2").val();

        if (input1Val != "" && input2Val != "") {
            alert("You may only enter a value in one input field.");
        } else if (input1Val != "") {
            calcFunc1(input1Val);
        } else if (input2Val != "") {
            calcFunc2(input2Val);
        } else {
            alert("You must enter a value in one of the input fields.");
        }
    });
</script>

<!-- pseudo-code with straight javascript -->
<script language="javascript" type="text/javascript">
    function calculate() {
        var input1Val = document.getElementById("input1").value;
        var input2Val = document.getElementById("input1").value;

        if (input1Val != "" && input2Val != "") {
            alert("You may only enter a value in one input field.");
        } else if (input1Val != "") {
            calcFunc1(input1Val);
        } else if (input2Val != "") {
            calcFunc2(input2Val);
        } else {
            alert("You must enter a value in one of the input fields.");
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:00:11.527

第一个 if 语句应该这样重写：

```
if(($input_B != "") && ($input_C == "")) 
```

那么其他的逻辑都是一样的

# delphi-7 - 将缓冲区添加到 ByteArray

> ID：11797186
> 
> 赞同：2
> 
> 时间：2012-08-03T13:56:35.617
> 
> 标签：delphi-7, delphi

我使用 winsock 接收一个 1024 字节的缓冲区，如下所示：

```
var
 buffer    : array[0..1023] of byte; 
 endarray  : array of byte;
 hFile     : THandle;
 dwWritten : DWORD;
 dwRead    : DWORD;
begin
 SetLength (endarray, 3000); //fixxed size (doesn't really matter here, cause I know the size)
 hFile := CreateFileW('test.bin', GENERIC_WRITE, FILE_SHARE_WRITE, nil, CREATE_NEW, 0, 0);
 SetFilePointer(hFile, 0, nil, FILE_BEGIN);
 repeat
 dwRead := recv(MySock, Buffer, 1024, 0);
 WriteFile(hFile, buffer[0], dwRead, dwWritten, nil); // works fine!
 // Add the buffer to the endarray but how?
 until (dwRead = 0) or (dwRead = -1)
 [...]
 CloseHandle (hFile);
end; 
```

如何自动将缓冲区添加到 endarray 以便它实际上附加到末尾？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:06:11.030

像这样：

```
var
  PrevLen: Integer;
....
dwRead := recv(MySock, Buffer, 1024, 0);
if dwRead>0 then
begin
  PrevLen := Length(endarray);
  SetLength(endarray, PrevLen+dwRead);
  Move(Buffer[0], endarray[PrevLen], dwRead);
end; 
```

并且还从您的函数中删除预分配的第一行代码`endarray`。

如果您宁愿分配一次缓冲区（根据问题中的代码），那么您可以这样编码：

```
var
  endarrayLen: Integer;
.....
endarrayLen := 0;
repeat
  dwRead := recv(MySock, Buffer, 1024, 0);
  if dwRead>0 then
  begin
    Move(Buffer[0], endarray[endarrayLen], dwRead);
    inc(endarrayLen, dwRead);
  end;
  .....
until ... 
```

但这是等待发生的缓冲区溢出！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T23:45:33.627

您可以使用`TMemoryStream`or`TBytesStream`类。两者都代表一个可动态增长的内存块。TMemoryStream 对原始内存块进行操作，而 TBytesStream 对动态字节数组进行操作。例如：

```
var 
  buffer    : array[0..1023] of byte;  
  endarray  : TMemoryStream; 
  hFile     : THandle; 
  iRead     : Integer; 
  dwWritten : DWORD; 
begin 
  endarray := TMemoryStream.Create;
  try
    hFile := CreateFileW('test.bin', GENERIC_WRITE, FILE_SHARE_WRITE, nil, CREATE_NEW, 0, 0); 
    try
      repeat 
        iRead := recv(MySock, buffer, sizeof(buffer), 0); 
        if iRead < 1 then Break;
        WriteFile(hFile, buffer[0], iRead, dwWritten, nil);
        endarray.WriteBuffer(buffer[0], iRead);
      until False; 
      [...] 
    finally
      CloseHandle (hFile); 
    end; 
    // use endarray.Memory as needed, up to endarray.Size number of bytes ...
  finally
    endarray.Free;
  end;
end; 
```

.

```
var 
  buffer    : array[0..1023] of byte;  
  endarray  : TBytesStream; 
  hFile     : THandle; 
  iRead     : Integer; 
  dwWritten : DWORD; 
begin 
  endarray := TBytesStream.Create(nil);
  try
    hFile := CreateFileW('test.bin', GENERIC_WRITE, FILE_SHARE_WRITE, nil, CREATE_NEW, 0, 0); 
    try
      repeat 
        iRead := recv(MySock, buffer, sizeof(buffer), 0); 
        if iRead < 1 then Break;
        WriteFile(hFile, buffer[0], iRead, dwWritten, nil);
        endarray.WriteBuffer(buffer[0], iRead);
      until False; 
      [...] 
    finally
      CloseHandle (hFile); 
    end; 
    // use endarray.Bytes as needed, up to endarray.Size number of bytes ...
  finally
    endarray.Free;
  end;
end; 
```

# c# - 创建连接 Linq 查询以优化将两个列表循环在一起

> ID：11797189
> 
> 赞同：0
> 
> 时间：2012-08-03T13:56:41.953
> 
> 标签：c#, linq, join

我不擅长数据库和 T-sql 查询，所以我对如何使用 Linq 在 C# 中做类似的事情有点困惑。

问题是我的结构与关系数据库表几乎相同，我必须使用它进行某种连接选择。

实际上，我得到了一个复合键地址列表。这些实际上是包含一些 int 值的类（可能是字节或短但不相关）。现在我必须在我的结构中搜索这些列表的匹配项并在那里调用一个方法。

这可能是一个简单的连接（不记得连接是做什么的），但我需要一些帮助，因为我不希望这很便宜，因为我可以轻松逃脱，所以我不需要搜索每一行每个地址。

```
public class TheLocationThing
{
    int ColumnID;
    int ColumnGroupId;
    int RowID;
}

public class TheCellThing
{
    TheLocationThing thing;

    public void MethodINeedToCallIfInList()
    {
        //here something happens
    }
}

public class TheRowThing
{
    int RowId;

    List<TheCellThing> CellsInThisRow;
}

public class TableThing
{
    List<TheRowThing> RowsInThisTable;
} 
```

所以我有这个表格类型的类，它有行并且它们有单元格。请注意 ColumnGroup 的东西，它是与 ColumnId 的复合键，因此相同的 columnid 可以再次出现，但每个 ColumnGroup 只能出现一次。

不过要记住的是，TheTable 旅馆只会有一个 GroupColumnId，但给定的列表可能有多个，因此我们可以将它们过滤掉。

```
public void DoThisThing()
{
    List<TheLocationThing> TheAddressesINeedToFind = GetTheseAddresses(); //actualy is a TheLocationThing[] if that matters

    var filterList = TheAddressesINeedToFind.Where(a => a.ColumnGroupId == this.CurrentActiveGroup);

    //Here I have to do the join with this.TableInstance
} 
```

现在，我当然应该只遍历该行中具有相同行 ID 的地址以及所有这些。

将事物管理为 IQueryable 也可以帮助我解决问题，尤其是在最初的过滤器中，我应该将其作为 Queryable 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:33:43.910

我将给出不同的例子，因为我不太关注你的例子，并用它来解释加入的基础知识，希望能达到你需要学习的内容。

让我们想象两个比 LocationThing 等名称稍多一些的类（这让我迷失了）。

```
public class Language
{
  string Code{get;set;}
  string EnglishName{get;set;}
  string NativeName{get;set;}
}
public class Document
{
  public int ID{get; private set;}//no public set as it corresponds to an automatically-set column
  public string LanguageCode{get;set;}
  public string Title{get;set;}
  public string Text{get;set;}
} 
```

现在，让我们也假设我们有方法`GetLanguages()`并`GetDocuments()`分别返回所有语言和文档。有几种不同的方法可以工作，我稍后会谈到。

一个有用的连接示例是，如果我们想要所有标题和它们所在语言的所有英文名称。在 SQL 中，我们将使用：

```
SELECT documents.title, languages.englishName
FROM languages JOIN documents
ON languages.code = documents.languageCode 
```

或者省略表名，这样做不会使列名模棱两可：

```
SELECT title, englishName
FROM languages JOIN documents
ON code = languageCode 
```

对于文档中的每一行，它们中的每一个都会将它们与语言中的相应行进行匹配，并返回组合行的标题和英文名称（如果存在没有匹配语言的文档，则不会返回，如果有两种语言具有相同的代码 - 但在这种情况下，db 应该阻止 - 每种语言都会提到一次相应的文档）。

LINQ 等价物是：

```
from l in GetLanguages()
  join d in GetDocuments()
  on l.Code equals d.LanguageCode //note l must come before d
  select new{d.Title, l.EnglishName} 
```

这将类似地将每个文档与其相应的语言匹配并返回一个`IQueryable<T>`或`IEnumerable<T>`（取决于源枚举/可查询），其中`T`是具有`Title`和`EnglishName`属性的匿名对象。

现在，至于这方面的费用。这主要取决于`GetLanguages()`和的性质`GetDocuments()`。

不管来源是什么，这本质上是搜索这两种方法的每一个结果的问题——这就是操作的本质。但是，最有效的方法仍然是根据我们对源数据的了解而有所不同。让我们首先考虑一个 Linq2Objects 表单。有很多方法可以做到这一点，但让我们想象他们正在返回`List`预先计算好的 s：

```
public List<Document> GetDocuments()
{
  return _precomputedDocs;
}
public List<Language> GetLanguages()
{
  return _precomputedLangs;
} 
```

让我们暂时假设 Linq`join`不存在，并想象我们将如何编写功能上与上面的代码等效的东西。我们可能会得出这样的结论：

```
var langLookup = GetLanguages().ToLookup(l => l.Code);
foreach(var doc in GetDocuments())
  foreach(var lang in langLookup[doc.LanguageCode])
    yield return new{doc.Title, lang.EnglishName}; 
```

这是一个合理的一般情况。我们可以更进一步，减少存储空间，因为我们知道每种语言最终关心的只是英文名称：

```
var langLookup = GetLanguages().ToLookup(l => l.Code, l => l.EnglishName);
foreach(var doc in GetDocuments())
  foreach(var englishName in langLookup[doc.LanguageCode])
    yield return new{doc.Title, EnglishName = englishName}; 
```

这大约是我们在没有数据集的特殊知识的情况下所能做的。

如果我们**确实**有特殊的知识，我们可以走得更远。例如，如果我们知道每个代码只有一种语言，那么下面的代码会更快：

```
var langLookup = GetLanguages().ToDictionary(l => l.Code, l => l.EnglishName);
string englishName;
foreach(var doc in GetDocuments())
  if(langLookup.TryGetValue(doc.LanguageCode, out englishName))
    yield return new{doc.Title, EnglishName = englishName}; 
```

如果我们知道这两个来源都是按语言代码排序的，我们可以更进一步，同时遍历它们，产生匹配，并在处理完它们后丢弃语言，因为我们永远不会这样做枚举的其余部分再次需要它。

但是，仅查看两个列表时，Linq 并没有这种特殊知识。它知道每一种语言和每一个文件都有相同的代码。它真的必须检查很多才能找出答案。为此，它的工作方式非常有效（由于一些优化，比我上面的示例建议的要好一点）。

让我们考虑一个 Linq2SQL 案例，并注意实体框架和其他直接在数据库上使用 Linq 的方法是可比较的。假设所有这些都发生在一个类的上下文中，该类的`_ctx`成员是`DataContext`. 那么我们的源方法可以是：

```
public Table<Document> GetDocuments()
{
  return _ctx.GetTable<Document>();
}
public Table<Language> GetLanguages()
{
  return _ctx.GetTable<Languages>();
} 
```

`Table<T>``IQueryable<T>`与其他一些方法一起实现。在这里，它不会加入内存中的内容，而是执行以下（除去一些别名）SQL：

```
SELECT documents.title, languages.englishName
FROM languages JOIN documents
ON languages.code = documents.languageCode 
```

看起来熟悉？就是我们一开始提到的那个SQL。

关于这一点的第一件好事是，它不会从数据库中带回我们不会使用的任何东西。

第二件好事是数据库的查询引擎（将其转换为可执行代码然后运行）**确实**了解数据的性质。例如，如果我们将表设置为在`Languages`列上具有唯一键或约束`code`，引擎知道不可能有两种语言具有相同的代码，因此它可以执行我们上面提到的优化的等效项使用 a`Dictionary`而不是 a `ILookup`。

第三件好事是，如果我们有索引`languages.code`，`documents.languageCode`然后查询引擎将使用这些索引进行更快的检索和匹配，也许可以从索引中获取所需的所有内容而无需访问表，调用先访问哪个表避免在第二个中测试不相关的行，依此类推。

第四件好事是，RDBMS 已经从几十年来关于如何尽可能快地进行这种检索的研究中受益，所以我们有一些我不知道也不需要知道的事情从。。得到好处。

总之，我们希望直接针对数据源运行查询，而不是针对内存中的源。也有例外，特别是某些形式的分组（通过**一些**分组操作直接命中数据库可能意味着重复命中它），如果我们快速连续地一遍又一遍地重复使用相同的结果（在这种情况下，我们最好点击它一次用于这些结果，然后存储它们）。

# android - Android - 扭曲的相机预览

> ID：11797190
> 
> 赞同：3
> 
> 时间：2012-08-03T13:56:53.887
> 
> 标签：android, camera, surfaceview, preview, distortion

我目前正在编写一个 android 应用程序，它运行在预览框架上显示一个可绘制的圆圈，运行边缘检测，然后在用户将硬币完美地排列在圆圈中时拍照。

出于某种原因（尽管是全屏没有标题等），我开始意识到相机预览有点失真。我尝试将 previewsize 设置为 480x640，同时将 surfaceholder 大小设置为 480x640，但是如果我将预览保存为位图并拍照，您会注意到失真。

有没有其他人遇到过这种问题/或对解决方案有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:04:08.717

我遇到了同样的问题。希望我发现其中`ApiDemos`包含一个使用相机的工作示例。
你可以在这里找到它：`com.example.android.apis.graphics.CameraPreview.`

我没有挖掘这个例子，但我看到它和我的真实相机一样工作正常，完全没有失真。

# html - 在 CSS 中为 div 分配颜色

> ID：11797193
> 
> 赞同：0
> 
> 时间：2012-08-03T13:56:58.783
> 
> 标签：html, css, jquery-plugins

我正在使用 jquery.reveals.js 插件。
css中指定的以下颜色

```
#fff 
#000 
```

在不同的浏览器上有不同的解释。
在 firefox、chrome 和 IE 9（及更高版本）上获得以下输出 ![显示框的一角显示出淡淡的黑暗和更黑暗](../Images/87f6ed592dfd8cbb59db915ccecddab3.png)

但是我用 IE8 得到了一些意想不到的结果 ![显示框的角落没有正确的颜色](../Images/c7f4025fdec56baa343d06788934fc39.png)

我猜上面的问题是因为 css 中指定的颜色只有 3 位数字`#fff`，即`#000`.
如何为 IE8 解决此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:01:08.780

好吧，看起来 IE8 是正确的，现代浏览器正在将其解释为看起来像`#000;`但有一定透明度的地方，是否存在`opacity: 0.5;`IE 忽略的某个地方的设置，而好的浏览器正在做的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:58:58.043

以六个字符指定颜色，或者最好将颜色指定为一个`rgba`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:02:55.647

这可能是因为在 IE9 之前，IE 的 png 处理存在严重缺陷。如果您查看插件的资产文件夹，您会发现一个`modal-gloss.png`. 现在，当您在 IE9 之前在 IE 中为半透明设置不透明度动画时，它会失去透明度。

尝试禁用动画

```
 $(...).reveal({ animation: 'none'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:07:37.693

颜色显示正确。我认为问题出在`opacity`.

**[在这里](http://css-tricks.com/css-transparency-settings-for-all-broswers/)**您可以阅读有关所有浏览器的 CSS 透明度设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:26:51.613

试试`rgba(0,0,0,0.5)`。

[**更多关于 RGBA**](http://css-tricks.com/rgba-browser-support/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:40:02.897

坚持按预期使用标准，不要为浏览器留下猜测。含义以十六进制定义为`#RRGGBB`not `#RGB`。您可以切换颜色值方案（如 RGB），但这不应该是您的问题。

此链接向您展示每种颜色值方案的示例并讨论浏览器兼容性： [http ://www.w3schools.com/cssref/css_colors_legal.asp](http://www.w3schools.com/cssref/css_colors_legal.asp)

# c# - C# 从 datagridview 中提取值 - 奇怪的结果

> ID：11797199
> 
> 赞同：0
> 
> 时间：2012-08-03T13:57:54.007
> 
> 标签：c#, datagridview

当我运行这段代码时，我有一个奇怪的结果——当 onHand 低于 Min 我想要某种警报时，我有一个带有基本股票列表（名称、onHand、Min）的 datagridview。我遇到的问题是我将值提供给消息框，这样我就可以看到发生了什么，如果我将“onHand”值放在顶部的“if”块中，它总是输出为零，但“min”输出正确的价值观。如果我将“Min”值放在顶部的“if”块中，则结果为零，并且“onHand”显示正确的值。我一直在尝试修复它一段时间，但无法弄清楚我做错了什么。目前，我在顶部的“if”块中有“min”，并且消息框始终将 min 显示为零，但为“onHand”提供了正确的值。

编码：

```
 private void btnLows_Click(object sender, EventArgs e)
    {

        int onHand = 0;
        int min = 0;
        int counter;

        for (counter = 0; counter < (dataGridView1.Rows.Count);
               counter++)
        {
            if (dataGridView1.Rows[counter].Cells["min"].Value
            != null)
            {
                if (dataGridView1.Rows[counter].Cells["min"].Value.ToString().Length != 0)
                {
                   onHand = int.Parse(dataGridView1.Rows[counter].Cells["min"].Value.ToString());

                   if (dataGridView1.Rows[counter].Cells["onHand"].Value != null)
                   {
                       if (dataGridView1.Rows[counter].Cells["onHand"].Value.ToString().Length != 0)
                       {
                           onHand = int.Parse(dataGridView1.Rows[counter].Cells["onHand"].Value.ToString());

                           if (onHand < min)
                           {
                               MessageBox.Show(onHand.ToString(), min.ToString());
                           }
                           else
                           {
                               MessageBox.Show(onHand.ToString(), min.ToString());
                           }
                       }
                   }
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:02:53.483

这一行（在你的 for 循环中的第一个嵌套 if 语句内）：

```
onHand = int.Parse(dataGridView1.Rows[counter].Cells["min"].Value.ToString()); 
```

应该是：

```
min = int.Parse(dataGridView1.Rows[counter].Cells["min"].Value.ToString()); 
```

目前，当您定义它时，您从未设置`min`为 0 以外的任何其他值。

# jquery - 如何在rails中使用ujs替换div的id

> ID：11797201
> 
> 赞同：0
> 
> 时间：2012-08-03T13:57:54.790
> 
> 标签：jquery, ruby-on-rails, ajax, ujs

我知道该怎么做：

[如何使用 AJAX 替换 Rails 3 中的 div？](https://stackoverflow.com/questions/5391451/how-to-replace-the-div-in-rails-3-using-ajax)

但是，虽然这会替换 div 的内容，但它不会更改 div 的 id 值。

如何更改 div 的 id（及其内容）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:29:31.283

只需`id`为 div 设置属性：

```
$("#your_div").html(...); # here you set div content
$("#your_div").attr("id", "new_id"); #the div now has new_id id 
```

# java - Android Java 创建十六进制字符串并将其转换为字节数组并返回

> ID：11797203
> 
> 赞同：2
> 
> 时间：2012-08-03T13:58:06.183
> 
> 标签：java, android, hex, bytearray

我想在我的 android 应用程序中实现一些目标。我需要在我的类中创建一个字符串变量的十六进制表示并将其转换为字节数组。像这样的东西：

```
String hardcodedStr = "SimpleText";
String hexStr = someFuncForConvert2HEX(hardcodedStr); // this should be the HEX string
byte[] hexStr2BArray = hexStr.getBytes(); 
```

之后我希望能够将其转换`hexStr2BArray`为 String 并获得它的价值。像这样的东西：

```
String hexStr = new String(hexStr2BArray, "UTF-8");
String firstStr = someFuncConvertHEX2Str(hexStr); // the result must be : "SimpleText" 
```

任何建议/建议我该如何实现这一目标。还有一件事，我应该能够转换那个 hexString 并在任何其他平台上获得它的真正价值……比如 Windows、Mac、IOS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:45:50.973

感谢蒂姆的评论，这是我正在使用的两个功能。希望对需要的人有所帮助。

```
public String convertStringToHex(String str){

  char[] chars = str.toCharArray();

  StringBuffer hex = new StringBuffer();
  for(int i = 0; i < chars.length; i++){
    hex.append(Integer.toHexString((int)chars[i]));
  }

  return hex.toString();
}

public String convertHexToString(String hex){

  StringBuilder sb = new StringBuilder();
  StringBuilder temp = new StringBuilder();

  //49204c6f7665204a617661 split into two characters 49, 20, 4c...
  for( int i=0; i<hex.length()-1; i+=2 ){

      //grab the hex in pairs
      String output = hex.substring(i, (i + 2));
      //convert hex to decimal
      int decimal = Integer.parseInt(output, 16);
      //convert the decimal to character
      sb.append((char)decimal);

      temp.append(decimal);
  }
  System.out.println("Decimal : " + temp.toString());

  return sb.toString();
} 
```

# android - xhdpi 的通知图标缩小到 36x36

> ID：11797208
> 
> 赞同：1
> 
> 时间：2012-08-03T13:58:32.457
> 
> 标签：android, notifications

我有一个 drawable-xhdpi-v11 文件夹，其中包含在我的通知中使用的 48x48 图标：

```
Notification notification = new Notification(R.drawable.ic_not_logo, null, now); 
```

我注意到在运行 JB 的 Galaxy Nexus 上，图标缩小为 36x36，使其变得模糊。如果文档需要 36x36，为什么文档要求 48x48？我错过了什么吗？有没有办法让我的通知图标像素完美？

编辑：这是一个相关的帖子 [Android 状态栏需要 25x25dp 大小的图标，而指南推荐 32x32dp。谁错了？](https://stackoverflow.com/questions/4265595/android-status-bar-expects-icons-of-size-25x25dp-while-guidelines-recommend-32x3) 这篇文章中的答案并没有解释为什么它仍然要求一个 48x48 大小的图标并将其缩小到 36x36。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:05:37.270

您应该提供相同资源的不同版本。

跟随指南：[android设计状态栏](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:56:13.507

我的最终结论是，不可能有像素完美的通知图标。我尝试为 drawable-xhdpi-v11 文件夹提供不同大小的图标，它会缩小所有提供的图标，而不管它们的大小，导致分辨率损失和像素完美图标的模糊。相当令人失望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T13:06:09.157

你绝对应该坚持指南中的 24dp 值，但你必须提供一个 xxhdpi res (72px)，然后 Android 可以使用它来缩放到 36px 而不会模糊。与应用程序图标相同，一些平板电脑使用 xxhdpi res 作为主屏幕，即使设备是 xhdpi。

# r - 计算每行的零个数，并删除多于 n 个零的行

> ID：11797216
> 
> 赞同：19
> 
> 时间：2012-08-03T13:59:08.377
> 
> 标签：r, dataframe

我有一个关于每行计数零的问题。我有一个这样的数据框：

```
a = c(1,2,3,4,5,6,0,2,5)
b = c(0,0,0,2,6,7,0,0,0)
c = c(0,5,2,7,3,1,0,3,0)
d = c(1,2,6,3,8,4,0,4,0)
e = c(0,4,6,3,8,4,0,6,0)
f = c(0,2,5,5,8,4,2,7,4)
g = c(0,8,5,4,7,4,0,0,0)
h = c(1,3,6,7,4,2,0,4,2)
i = c(1,5,3,6,3,7,0,5,3)
j = c(1,5,2,6,4,6,8,4,2)

DF<- data.frame(a=a,b=b,c=c,d=d,e=e,f=f,g=g,h=h,i=i,j=j)

  a b c d e f g h i j
1 1 0 0 1 0 0 0 1 1 1
2 2 0 5 2 4 2 8 3 5 5
3 3 0 2 6 6 5 5 6 3 2
4 4 2 7 3 3 5 4 7 6 6
5 5 6 3 8 8 8 7 4 3 4
6 6 7 1 4 4 4 4 2 7 6
7 0 0 0 0 0 2 0 0 0 8
8 2 0 3 4 6 7 0 4 5 4
9 5 0 0 0 0 4 0 2 3 2 
```

我想计算每行零的数量。如果每行的零数超过某个数字，比如 4，我想删除整个行。生成的数据框如下所示：

```
 a b c d e f g h i j
2 2 0 5 2 4 2 8 3 5 5
3 3 0 2 6 6 5 5 6 3 2
4 4 2 7 3 3 5 4 7 6 6
5 5 6 3 8 8 8 7 4 3 4
6 6 7 1 4 4 4 4 2 7 6
8 2 0 3 4 6 7 0 4 5 4 
```

那可能吗？？谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-03T14:00:33.290

这不仅可能，而且非常容易：

```
DF[rowSums(DF == 0) <= 4, ] 
```

你也可以使用`apply`：

```
DF[apply(DF == 0, 1, sum) <= 4, ] 
```

# heroku - 如何更新 psql？

> ID：11797217
> 
> 赞同：1
> 
> 时间：2012-08-03T13:59:10.310
> 
> 标签：heroku, psql

我在 heroku 上迁移我们的数据库，但在此处描述的步骤之一遇到问题：[https ://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres)

当我在终端中运行“heroku pg:psql HEROKU_POSTGRESQL_ORANGE”时，我得到以下信息：

```
psql (9.0.4, server 9.1.4)
WARNING: psql version 9.0, server version 9.1.
     Some psql features might not work.
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type "help" for help.

df638608u79sh=> 
```

我已经尝试使用“brew update postresql”、“gem update psql”等更新 psql，但它们都没有运行。

任何帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:02:29.880

使用时您不在 shell 中`heroku pg:psql HEROKU_POSTGRESQL_ORANGE`，您实际上已登录到 psql 控制台实例。Postgres 已为您安装和配置

# javascript - 您将如何为表实现排序机制？

> ID：11797220
> 
> 赞同：-3
> 
> 时间：2012-08-03T13:59:23.530
> 
> 标签：javascript, jquery, html-table

我知道 Stack Overflow 不是为了解决我的问题，而是为了提出具体问题。但我需要为 html 表实现排序功能，但不知道该怎么做。用户应该能够单击列标题，然后该表应按该列排序。该表如下所示：

![在此处输入图像描述](../Images/13ff34b11bc98df89b53c1d2660f5579.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:02:57.103

如果您使用的是 jquery，请使用 datatables jquery 插件。它是一个高度灵活的工具

[http://www.datatables.net/](http://www.datatables.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:01:31.187

由于您使用的是 jquery，因此您可以使用[TableSorter](http://tablesorter.com/docs/#Demo)插件为您执行此操作。

还有[很多其他](http://www.tripwiremagazine.com/2012/05/jquery-filter-sort-plugins.html)的，所以请浏览一下，看看哪个最适合您的用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:02:32.487

有几个可用的插件可用于 jQuery。试试这个[http://tablesorter.com](http://tablesorter.com)

将此库添加到您的页面，例如

`<script type="text/javascript" src="<your-path>/jquery.tablesorter.js"></script>`

将调用的类`tablesorter`应用于您的表并说`$(".tablesorter").tablesorter();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T14:29:44.923

你可以使用[List.js](http://listjs.com/)原因

1.  它是轻量级的[只有 3K 脚本]
2.  使用类在现有的 HTML 表中易于实现
3.  可搜索、可排序和可过滤

**HTML**

```
<div id="my-list">
    <ul class="list">
       <li>
           <h3 class="name">Luke</h3>
       </li>
       <li>
           <h3 class="name">John</h3>
       </li>
    </ul>
</div> 
```

**Javascript**

```
var options = {
    valueNames: ['name']
};
var myList = new List('my-list', options); 
```

# javascript - 在 chrome 中创建和引用 JavaScript 多维数组

> ID：11797222
> 
> 赞同：0
> 
> 时间：2012-08-03T13:59:31.327
> 
> 标签：javascript, google-chrome, multidimensional-array

我为自己找到自己的答案而自豪，但我放弃了。在尝试了我可以在 Stack 和其他任何地方找到的每个数组表示法之后，我仍然被卡住了。总结一下，我怎样才能通过这种方法或另一种方法来完成这项工作？所有方法都尝试在 IE 和 FF 中工作。没有铬。这似乎是当天最需要的符号。

```
var status=[
["#0f6122","0","GREEN"],
["#cbb924","1","YELLOW"],
["#f46906","2","ORANGE"],
["#990400","3","RED"],
["#585e72","4","DRKGREY"]
];

alert(status[3][2]); // I would assume should = RED instead it =’s “undefined” 
```

在发布我的求助请求之前，stacks pre-submission Tips 给出了下面的代码作为另一种替代方法，在 chrome 中仍然无济于事，但在 ie 和 ff 中很好。

```
var status=[];
status[0]= {};
status[0]["color"]="GREEN";
status[0]["code"]="#0f6122";
status[0]["level"]=0;

alert(status[0]['color']); // never get this far. get same message as trying to use associative arrays with chrome “can not Set Property” 
```

优格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:20:33.973

粘贴时：

```
status=[
    ["#0f6122","0","GREEN"],
    ["#cbb924","1","YELLOW"],
    ["#f46906","2","ORANGE"],
    ["#990400","3","RED"],
    ["#585e72","4","DRKGREY"]
]; 
```

在 chrome 的控制台中，它确实会默默地失败，但这与变量的名称有关：`status`正如您可能想象的那样，它并不完全是一个安全的变量名称。当我将其更改为 时`foo`，一切都很好。

这就是为什么你应该小心使用全局变量......当有疑问时打开浏览器窗口，打开控制台并输入你的变量名，如果你的变量名是自动完成的，不要使用它！

PS：`foo[0]['color']`可以写成`foo[0].color`。

# iphone - 在 Facebook 上发布图片？

> ID：11797224
> 
> 赞同：0
> 
> 时间：2012-08-03T13:59:35.890
> 
> 标签：iphone, ios, facebook

在我的应用程序中。我成功地在我的 Facebook 墙上发布了一张图片（图片类型为 JPEG 类型）。它在模拟器和设备中也可以正常工作。

但问题是当我从我的 iPhone 捕获图像或从库中选择由相机捕获的图像时。它没有发布在 Facebook 墙上。

另一方面，当我从我的 iPhone 库中选择任何 jpeg 图像（通过互联网下载）时。它张贴在墙上。

我认为存在图像格式问题。请指导我

谢谢

我的代码在这里。

```
-(IBAction)clickButtonClicked
{
//    For link post

NSString *Message = [NSString stringWithFormat:@"Testing Iphone App : \"http://www.google.com\" "];    

DataClass *obj=[DataClass getInstance]; 

UIImage *image=[[UIImage alloc]init ];

image= obj.imgFinalImage;

NSMutableDictionary *params1 = [[NSMutableDictionary alloc]init];

[params1 setObject:image forKey:@"source"];
[params1 setObject:Message forKey:@"message"];

NSString *post=@"/me/photos";

[[appDelegate facebook] requestWithGraphPath:post andParams:params1 andHttpMethod:@"POST" andDelegate:self];

UIAlertView  *alert = [[UIAlertView alloc] initWithTitle:@"Message!" message:@"Invitation Send Sucessfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
[alert release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:14:25.710

我的猜测是您在错误的属性中传递了图像：

```
NSMutableDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                    sobj.imgFinalImage, @"picture",
                    Message, @"caption",
                     nil];

[[appDelegate facebook] requestWithMethodName:@"photos.upload"
                   andParams:params
                   andHttpMethod:@"POST"
                  andDelegate:self]; 
```

然后确保您实现了 Facbook 请求的委托以检查图像是否已上传。

使用图形 API，您无法`UIImage`直接发送 a，您需要发送 的`NSData`表示形式`UIImage`：

```
NSMutableDictionary *params1 = [[NSMutableDictionary alloc]init];
NSData *imageDate = UIImagePNGRepresentation(obj.imgFinalImage);

[params1 imageDate forKey:@"source"];
[params1 setObject:Message forKey:@"message"];

NSString *post=@"/me/photos";

[[appDelegate facebook] requestWithGraphPath:post andParams:params1 andHttpMethod:@"POST" andDelegate:self]; 
```

# javascript - 如何查看拖到画布外的图像部分

> ID：11797225
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:59:38.080
> 
> 标签：javascript, html, html5-canvas

是否有任何程序可以使拖动到画布外部的图像部分可见？即，我有一个画布，其中可以绘制图像并且可以拖动。拖动跨越画布边界的图像部分时不可见。但它可以被看见吗？

有什么东西可以实现这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:00:31.407

不，画布的边缘就是画布的边缘。IE，null，void，一个黑色的空白空间。一个漩涡。

您将不得不调整画布的大小，但给用户一个更小的视口。

# iphone - FMOD_OUTPUTTYPE_WAVWRITER FMOD 错误！(23) 找不到文件

> ID：11797234
> 
> 赞同：1
> 
> 时间：2012-08-03T14:00:08.313
> 
> 标签：iphone, objective-c, audio, effects, fmod

我正在使用`FMOD`对音频文件添加效果。

这是我的代码

```
 char cDest[200] = {0}; 
    NSString *fileName=[NSString stringWithFormat:@"%@/recordName.wav", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];
    NSLog(@"%@",fileName);

    [fileName getCString:cDest maxLength:200 encoding:NSASCIIStringEncoding]; 
    result = system->setOutput(FMOD_OUTPUTTYPE_WAVWRITER); ERRCHECK(result);

    result = system->init(32, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, NULL);
    ERRCHECK(result); 
```

`FMOD error! (23) File not found.` 添加时出现此错误`FMOD_OUTPUTTYPE_WAVWRITER`

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:20:00.330

我想将高通过滤器（或任何其他过滤器）添加到音频文件，然后将其保存到文档目录。下面是我的代码。它没有给我结果。你能建议我错在哪里吗...

```
FMOD_RESULT   result        = FMOD_OK;
char          buffer[200]   = {0};
unsigned int  version       = 0;

result = FMOD::System_Create(&system); 
ERRCHECK(result);

result = system->getVersion(&version);
ERRCHECK(result);

if (version < FMOD_VERSION)
{
    fprintf(stderr, "You are using an old version of FMOD %08x.  This program requires %08x\n", version, FMOD_VERSION);
    exit(-1);
}

[[NSString stringWithFormat:@"%@/song1.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];

char cDest[200] = {0}; 
NSString *fileName=[NSString stringWithFormat:@"%@/recordName.wav", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];

[fileName getCString:cDest maxLength:200 encoding:NSASCIIStringEncoding]; 
result = system->setOutput(FMOD_OUTPUTTYPE_WAVWRITER); 
ERRCHECK(result);

result = system->init(32, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, cDest);
ERRCHECK(result);

result = system->createSound(buffer, FMOD_SOFTWARE, NULL, &sound);
ERRCHECK(result);

result = system->playSound(FMOD_CHANNEL_FREE, sound, false, &channel);
ERRCHECK(result);

result = system->createDSPByType(FMOD_DSP_TYPE_HIGHPASS, &dsphighpass);
ERRCHECK(result);

result = system->addDSP(dsphighpass, NULL);
ERRCHECK(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:59:17.560

朋友 我自己解决了这个问题

这是代码。希望它会帮助一些人

```
[strSavedFile getCString:cDest maxLength:200 encoding:NSASCIIStringEncoding]; 
result = system->setOutput(FMOD_OUTPUTTYPE_WAVWRITER_NRT); ERRCHECK(result);

result = system->init(32, FMOD_INIT_NORMAL, cDest); 
```

只是改变

```
result = system->init(32, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, NULL); 
```

和

```
result = system->init(32, FMOD_INIT_NORMAL, cDest); 
```

享受

# jquery - 带有 JqWidgets 的单页中的多个 jqx 网格表

> ID：11797237
> 
> 赞同：0
> 
> 时间：2012-08-03T14:00:19.780
> 
> 标签：jquery, jqxgrid

我想在单页中创建多个 jqx 网格框。有人可以告诉我该怎么做吗？这是预览页面[http://jsfiddle.net/NuUjc/](http://jsfiddle.net/NuUjc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:11:03.693

您将按照创建第一个网格的方式进行操作。只需在网格所在的位置创建一个新 div，创建必要的数据源，然后初始化网格。

因此，在您的示例中，您将拥有：

```
<body class='default'>
    <div id='jqxWidget1' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid">
        </div>
     </div>
    <br/>Second grid<br/>
    <div id='jqxWidget2' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid2">
        </div>
     </div>
    <br/>Third grid<br/>
    <div id='jqxWidget3' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid3">
        </div>
     </div> </body> 
```

然后为您的网格创建适当的数据源和数据适配器：source2、dataAdapter2 等。

然后以相同的方式初始化您的网格：

```
 $("#jqxgrid2").jqxGrid(
    {
        width: 670,
        source: dataAdapter2,
    ..... 
```

确保将“jqxgrid2”替换为您的网格的正确 ID（您在 html 片段中定义的那个）

# php - php中的AES加密，然后用Javascript（cryptojs）解密

> ID：11797238
> 
> 赞同：5
> 
> 时间：2012-08-03T14:00:21.433
> 
> 标签：php, javascript, encryption, mcrypt, cryptojs

我正在寻找一种方法来对简单文本（5 到 6 个数字和/或字符）进行 2 路加密。问题是我想在 php 中进行加密，然后通过 Javascript 对其进行解密。对于 php，我已经使用 mcrypt_encode 进行了测试并且已经让它工作了，因此当我尝试用 javascript 解密它时（我使用的是 Crypto-js 库 - [http://code.google.com/p/crypto-js /](http://code.google.com/p/crypto-js/) ) 我没有得到任何结果。这是我正在使用的 php 代码：

```
$key = "oijhd981727783hy18274";
$text = "1233";
$td = mcrypt_module_open(MCRYPT_RIJNDAEL_256, '', MCRYPT_MODE_CBC, '');
$iv = mcrypt_create_iv(mcrypt_enc_get_iv_size($td), MCRYPT_RAND);
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_CBC,$iv);
echo base64_encode($crypttext); 
```

然后这是我正在使用的Javascript代码：

```
var encrypted = CryptoJS.enc.Base64.parse("LiJU5oYHXRSNsrjMtCr5o2ev7yDFGZId85gh9MEXPeg=");
var key = 'oijhd981727783hy18274';
var decrypted = CryptoJS.AES.decrypt(encrypted, key);
document.write( decrypted.toString(CryptoJS.enc.Utf8) ); 
```

由于我只是在测试，我将 php 的输出直接复制/粘贴到 JS 中，看看它是否会返回任何结果，但这不会发生。由于我是加密/解密部分的新手，我可能会遗漏一些东西。任何建议将不胜感激。

附带说明一下，当我在这里阅读了很多关于使用其他类型的通信来传输数据的建议时，在这种情况下这是不可能的，因为我需要将此字符串传递给第三方软件，这将带来它在一个安全区域，我只能编辑 javascript，这就是为什么我试图加密 php 中的文本并将其放在网站的源代码中，第三方软件将从那里读取它，因为它是加密的并将其转移到安全部分，在那里我需要通过 Javascript 将其解密（我无法访问那里的 php）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:49:33.960

因此，经过更多挖掘后，我来到了以下在线[加密器/解密器](http://www.nakov.com/blog/2011/12/26/online-aes-encryptor-decryptor-javascript/)，它把我带到了[GitHub 存储库中的 gibberish-aes](https://github.com/mdp/gibberish-aes)。

在第一个链接的评论中，我发现这个 JS 库有一个 php 等价物，它似乎工作得相当好并且相当容易部署： [https ://github.com/ivantcholakov/gibberish-aes-php](https://github.com/ivantcholakov/gibberish-aes-php)

所以感谢 Lars 提供的答案，我会鼓励他打开存储库，我相信他会让某人的生活更轻松:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:00:39.363

从 CryptoJS 文档：

> 对于密钥，当您传递一个字符串时，它会被视为密码并用于派生实际密钥和 IV。或者您可以传递一个代表实际键的 WordArray。如果您传递实际密钥，则还必须传递实际 IV。

所以在你的行中

```
var decrypted = CryptoJS.AES.decrypt(encrypted, key); 
```

“oijhd981727783hy18274”被视为创建密钥的密码，而不是实际密钥。

通过 IV 的工作方式如下：

```
var key = CryptoJS.enc.Hex.parse('000102030405060708090a0b0c0d0e0f');
var iv  = CryptoJS.enc.Hex.parse('101112131415161718191a1b1c1d1e1f');

var encrypted = CryptoJS.AES.encrypt("Message", key, { iv: iv }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:12:21.013

前段时间我遇到了同样的问题。我终于从[http://code.google.com/p/slowaes/](http://code.google.com/p/slowaes/)使用了 SlowAES并进行了一些修复并将其移植到 PHP。

注意：官方来源已损坏，就像官方 PHP 端口一样。

如果您有兴趣，请告诉我。然后我会在 GitHub 上打开一个新的存储库，在那里你可以获取你需要的一切......

# wpf - 用户控件、自定义控件、继承和覆盖

> ID：11797244
> 
> 赞同：1
> 
> 时间：2012-08-03T14:00:36.457
> 
> 标签：wpf, wpf-controls

我知道这个问题可能会得到很多“重复问题”的评论，但我还没有看到一个有效的答案，或者不仅仅是“不惜一切代价避免它”。但是在这里，我创建了一个控件，让我们在一个名为“ControlA_Project”的项目中将其称为“ControlA”，我打算在一个名为“ControlB”的控件中覆盖它的一些虚拟方法，该控件在另一个名为“控制B_项目”。想法是“ControlA”具有保存和加载方法，我希望从保存和加载到文件，也保存和加载到数据库（如果稍后需要另一种保存和加载类型，我可以再次覆盖这些方法） . 我遇到的问题是我最初有“ControlA”

组件“ControlB_Project.ControlB”没有由 URI“/ControlA_Project;component/usercontrols/ControlA.xaml”标识的资源。

谷歌搜索错误我得出的结论是你不能从用户控件继承（或者为了争论，这不是一个好主意）。所以我然后将控件从用户控件更改为自定义控件。然而，这又导致我遇到另一个问题，控件模板不像用户控件中那样链接到后面的代码（即 On_Click），并且没有简单的方法来简单地覆盖行为（据我所知） . 我知道我可以通过复制和粘贴 ControlAs 模板并更改几行来重新模板 ControlB，但 controlA 有一个大模板，并且制作多个副本似乎浪费空间。简而言之，是否有正确的方法来改变 wpf 中控件的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:24:22.550

首先，请记住 ControlTemplate 可以由用户更改很多，因此您需要确保清楚地标记重要字段。所以如果你想要一个 OnClick 事件。首先将您的按钮标记为“重要”

```
<Button x:Name="PART_MyButton"/> 
```

在您的控件类上标记它也是一个好主意

```
[TemplatePart(Name = "PART_MyButton", Type = typeof(Button))]
public class MyCustomControl : Control 
```

现在您想附加到该按钮的单击事件来执行此操作，覆盖该`OnApplyTemplate`方法。

```
public override void OnApplyTemplate()
{
    mButton = Template.FindName("PART_MyButton", this) as Button;
    mButton.Click += MyEventHandler;
} 
```

根据您的控件在没有控件的情况下可以正常工作的程度，您应该优雅地处理未找到的控件或引发异常。

最后一件事是。如果您覆盖具有默认样式的控件，则提供新的默认样式可能是个好主意。

```
static MyCustomControl()
{
    DefaultStyleKeyProperty.OverrideMetadata(typeof(MyCustomControl), new FrameworkPropertyMetadata(typeof(MyCustomControl)));
} 
```

并在你的`generic.xaml`

# c# - C# convert DOMAIN\USER to USER@DOMAIN

> ID：11797245
> 
> 赞同：8
> 
> 时间：2012-08-03T14:00:38.070
> 
> 标签：c#

I currently have the following code:

```
string user = @"DOMAIN\USER";
string[] parts = user.Split(new string[] { "\\" }, StringSplitOptions.None);
string user = parts[1] + "@" + parts[0]; 
```

Input string `user` can be in one of two formats:

```
DOMAIN\USER
DOMAIN\\USER (with a double slash) 
```

Whats the most elegant way in C# to convert either one of these strings to:

```
USER@DOMAIN 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:03:09.757

Not sure you would call this most elegant:

```
string[] parts = user.Split(new string[] {"/"},
                            StringSplitOptions.RemoveEmptyEntries);
string user = string.Format("{0}@{1}", parts[1], parts[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:08:42.860

这个怎么样：

```
 string user = @"DOMAIN//USER";
        Regex pattern = new Regex("[/]+");
        var sp = pattern.Split(user);
        user = sp[1] + "@" + sp[0];
        Console.WriteLine(user); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:14:54.993

Oded 答案的变体可能会使用[Array.Reverse](http://msdn.microsoft.com/en-us/library/d3877932.aspx)：

```
string[] parts = user.Split(new string[] {"/"},StringSplitOptions.RemoveEmptyEntries);
Array.Reverse(parts);
return String.Join("@",parts); 
```

或者，可以使用 linq（基于[此处](https://stackoverflow.com/questions/217805/using-linq-to-concatenate-strings)）：

```
return user.Split(new string[] {"/"}, StringSplitOptions.RemoveEmptyEntries)
       .Aggregate((current, next) => next + "@" + current); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:16:50.327

你可以试试这个：

```
String[] parts = user.Split(new String[] {@"\", @"\\"}, StringSplitOptions.RemoveEmptyEntries);
user = String.Format("{0}@{1}", parts[1], parts[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:18:36.597

为了添加另一个选项，这里是：

```
string user = @"DOMAIN//USER";
string result = user.Substring(0, user.IndexOf("/")) + "@" + user.Substring(user.LastIndexOf("/") + 1, user.Length - (user.LastIndexOf("/") + 1)); 
```

# javascript - How to determine which code is faster?

> ID：11797246
> 
> 赞同：1
> 
> 时间：2012-08-03T14:00:42.753
> 
> 标签：javascript, performance

> **Possible Duplicate:**
> [How do you performance test JavaScript code?](https://stackoverflow.com/questions/111368/how-do-you-performance-test-javascript-code)

I am currently trying to learn some JavaScript using js-assessment, which can be found here: [https://github.com/rmurphey/js-assessment](https://github.com/rmurphey/js-assessment).

I have written the following code, which let's you find duplicates in an array:

```
function duplicatesInArray(arr) {
    var test;
    var res = [];

    for (var i = 0; arr[i]; i++) {
        test = arr[i];

        for (var j = i + 1 ; arr[j]; j++) {
            if(arr[j] === test) {
            res.push(arr[j]);
            break;
            }
        }
    }

    return res;
} 
```

Which works fine, but here's an anwser I've found on github (it works too):

```
function anotherDuplicatesInArray(arr) {
    var seen = {};
    var dupes = [];

    for (var i = 0, len = arr.length; i < len; i++) {
        seen[arr[i]] = seen[arr[i]] ? seen[arr[i]] + 1 : 1;
    }

    for (var item in seen) {
        if (seen.hasOwnProperty(item) && seen[item] > 1) {
            dupes.push(item);
        }
    }

    return dupes;
} 
```

My question is: how can I test which code is better?

# javascript - Adapt code inside dokuwiki spoilers style?

> ID：11797249
> 
> 赞同：0
> 
> 时间：2012-08-03T14:00:57.797
> 
> 标签：javascript, css

To change selector so it only show/hides when i click the image i put spoiler/ popdown menu directly after .OS image. Right now the popdown is a child of the .OS container, so clicks on it are passed to the .OS click handler.

But the code isn't perfect because when i click the 1st `MAC` both spoilers are opened.

But I want that spoilers are opened *one at a time*

But the main problem is that I can't fix the javascript code properly inside these types of spoilers (dokuwiki class) inside `<td>` tags:

This is the javascript code I use :

```
<div class="dokuwiki">
    <div class="right_page">
        <div class="entry-content">
            <script type="text/javascript" src="./zzzz_files/jquery.js"></script>
            <script type="text/javascript">                                         
                $(document).ready(function(){
                    $(".nonjs").removeAttr( "href"); //href is needed for users without JS
                    $('.OS').click(function(){
                        if($(".details").is(":visible"))
                        {
                            $(".details").not(":hidden").hide("slow");
                            return true;
                        }
                        else
                        {
                            $(".OS").not(this).each(function(i) {
                                $(".details").hide("slow");
                            });
                            $(".details").show("slow");
                            return false;
                        }
                    });
                });  
            </script>     
            <style type="text/css">
                <!--
                .details {
                    display: none;
                    clear: both;
                    padding: 2px;
                }
                .nonjs{
                    cursor:pointer;
                }
                img {
                    border: 0px;
                }
                -->
            </style> 
```

I thought about doing a video to better explain the problem and provide the local version of files for testing code:

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:25:18.133

*此代码有效：*

```
 $(document).ready(function(){
 $(".nonjs").removeAttr( "href"); 
//href is needed for users without JS

 $('.OS').click(function(e){
           if(!$(e.target).parents('.details').length){
                        if($(this).find('.details').is(":visible"))
                        {
                            $(this).find('.details').not(":hidden").hide("slow");
                            return true;
                        }
                        else
                        {

                            $(this).find('.details').show("slow");
                            return false;
                        }
          }
});
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:39:12.490

我不知道你在问什么，但这是我认为你想要的：

单击图像时，显示其下方的详细信息并隐藏所有其他图像。如果详细信息已经可见，请将其隐藏。单击详细信息中的某些内容不应影响任何内容。

[**演示**](http://jsfiddle.net/4A3FM/)

```
$(document).ready(function(){
  $(".nonjs").removeAttr( "href"); //href is needed for users without JS
  $('.OS').click(function(){
    var details = $(this).next(".details");
    $(".details").hide("slow");
    if(details.is(":hidden")) {
      details.show("slow");
    }
  });
}); 
```

# java - jsp - 通过 onsubmit 执行 java 函数

> ID：11797255
> 
> 赞同：1
> 
> 时间：2012-08-03T14:01:14.327
> 
> 标签：java, jsp, forms, onsubmit

我有这个jsp页面-

```
<%@page import="java.text.Normalizer.Form"%>    
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    </head>
    <body>

        <legend>Create new customer</legend>
          <%!
        boolean checkForm(Form theForm)
        {
          // some checks on "theForm" .. 
          return false ; 
        }
        %>
        <form action="CreateCustomerServlet" method="GET" onsubmit=<%=checkForm() %>>
            // form's fields .. 
            <input type="submit" value="Create customer" />
        </form>
        </fieldset>
    </body>
    </html> 
```

我想要做的是，当按下它时，`submit`它会转到`checkForm`函数并检查表单，只有当它`checkForm`返回`true`时，它才会进入`CreateCustomerServlet`servlet。

但是当我在服务器上运行这个页面并按下`submit`按钮时，我看到它被忽略`checkForm`并直接转到`CreateCustomerServlet`servlet 。

我知道用 javascript 来做这件事很容易.. 但我想用 java 函数来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:08:12.747

在评估 JSP 时，它会生成一个返回给用户的静态 HTML 页面。服务器在收到表单提交之前不会再次参与该过程。如果您确实希望从处理程序执行某些服务器端行为，则`onsubmit`需要通过 AJAX 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:08:25.870

问题是您不能从客户端直接调用 java 函数（放置在服务器上）。您可以在客户端移动检查逻辑并为此使用 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:48:07.407

你可以使用 javascript 来满足你的要求

# python - Selenium 2/Webdriver + python + jenkins. How can I generate xml output for hudson for test reports?

> ID：11797262
> 
> 赞同：0
> 
> 时间：2012-08-03T14:01:33.017
> 
> 标签：python, jenkins, selenium-webdriver

I have python unittest tests using Selenium 2 and I can run it fine on my computer but now I want to use it with Jenkins. In the "execute shell", I call my script that runs all my Selenium tests but even though I get an Error or Fail for the tests, Jenkins says "Finished: SUCCESS" in the console output and thinks it passed in the console output.

1) Why does it think it passed? How can I let Jenkins detect it actually failed?

2) How can I generate an XML report of the test results so that it is compatible with JUnit and Jenkins? (testrunner?)

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:13:53.963

对于 2，您可以使用[nosetests --with-xunit](http://nose.readthedocs.org/en/latest/)。

# emacs - 如何检查当前emacs窗口相对于其他窗口的位置

> ID：11797263
> 
> 赞同：3
> 
> 时间：2012-08-03T14:01:35.560
> 
> 标签：emacs

我分别使用`S-<up>`和`S-<down>`运行 (enlarge-window) 和 (shrink-window)。

我希望这些键对当前窗口相对于其他窗口的位置敏感。如果我的框架被水平分割成两个窗口，并且当前窗口是最上面的一个，那么我想`S-<up>`运行 (shrink-window) 而不是 (enlarge-window)。

如何检查当前窗口相对于其他窗口的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:04:14.037

见功能`(window-edges)`。它返回窗口坐标的列表。只需将 y 轴值与其他可见窗口进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:07:37.110

您可以使用`(window-tree)`. 它不仅会返回窗口的大小，还会返回它们的位置，作为树（在 emacs 的内部结构中，框架的窗口被保存在树结构中）。

# c - why don't add template support for pure C?

> ID：11797266
> 
> 赞同：2
> 
> 时间：2012-08-03T14:01:44.863
> 
> 标签：c, templates

Somebody beleives we can acheive good structure of code with template meta programming, without object-orient method. So can we just add template support to C, to make C more powerful without losing the runtime effieciency?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:08:37.130

它已经发生了。C11 新增的类型泛型主表达式的特性`_Generic`基本上就是这样。

# c++ - 调用 sizeof (*s.begin()) 安全吗？

> ID：11797268
> 
> 赞同：0
> 
> 时间：2012-08-03T14:01:49.040
> 
> 标签：c++, sizeof

在做一些 TMP 时 :) :( 我最终需要 STL 容器包含的元素的大小。我知道通常 deref 一个 container.begin() 迭代器是不好的，而不检查容器是否为空，但据我所知 sizeof 是编译时宏，所以我*想*它是安全的。对吗？

代码片段是：

```
 for(auto it = t.begin(); it!= t.end(); ++it)
    {
        char* cp = (char*)(&(*it));
        for (size_t i =0 ; i < sizeof *t.begin();++i)
        //...
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T14:03:34.940

是的，这很安全，但要意识到您可以通过`key_type`,`mapped_type`和/或`value_type` `typedef`成员获取存储在容器中的类型。

例如：

```
struct Foo {
    int bla;
    double quuxly;
};

int main()
{
    typedef std::vector<Foo> foovector;
    std::cout << "sizeof(Foo) == " << sizeof(foovector::value_type) << "\n";
} 
```

[`sizeof`不是*宏*，顺便说一句。它是语言本身内置的运算符，例如`++`or `|=`。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T14:09:28.600

这*是*安全的，因为里面的表达式`sizeof(...)`没有被计算。对于`sizeof`（以及类似地`decltype`，`typeid`以及其他类似的构造），只有*类型*很重要。*该值是不感兴趣的（在编译时*一个值怎么可能是感兴趣的？），这就是为什么不需要评估表达式的原因。即使在未评估的上下文中取消引用空指针也是安全的。

# css - position:absolute div vanishes within position:relative

> ID：11797269
> 
> 赞同：2
> 
> 时间：2012-08-03T14:01:51.390
> 
> 标签：css

I am relatively new to CSS .And I am facing the following problem in my page lay out .

I have looked at other posts but could not find an answer . The problem is when I specify

position:absolute within #logo #logoimg it does not load . However If I remove

position:absolute #logoimg is loaded correctly . I am trying to learn how to position divs by

creating absolute divs within relative divs .

My html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>New Web Project</title>
        <link rel="stylesheet" href="style.css" type="text/css" media="screen"  charset="utf-8"/>
    </head>
    <body>
        <div id = "wrapper">
            <div id = "header"> <img  src="images/banner.png" /> </div>
            <div id = "content">
                <div id="logo">
                    <div id="logoimg" > czcz </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

My CSS

```
body {
  margin: 0;
  padding: 0;
}

#header {
    background: url('images/banner_tile.jpg') ;
    height: 96px;
    width: 100% ;
}

#header img {
    display:block;
    margin: auto ;
}

#content img {
    display:block;
    margin: auto ;
}

#content {
    /*overflow:auto ;*/
    background: url('images/body_tile.png') ;
    height: 100% ;  
    width: 100%  ;
}

 #logo { position:relative; height: 100px ; }

 #logo #logoimg {
    position:absolute ; 
    top:300px ;
    left:700px ;
    width:398px ;
    height:200px ;
    background: url('images/body_sprite.png');
    z-index: 1;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:07:08.870

与猴子一起玩的整洁小提琴：http: [//jsfiddle.net/TjQLf/](http://jsfiddle.net/TjQLf/)

# javascript - Ruby on rails - PUT method on update ajax

> ID：11797270
> 
> 赞同：10
> 
> 时间：2012-08-03T14:01:57.860
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, controller

Could someone tell me why this PUT method doesn't work please.

```
$.ajax({
        type: "PUT",
        dataType: "script",
        url: '/resources/35',
        data:
        {
            resource : { pos_y: 45, pos_x: 50 }
        }
    }).done(function( msg )
            {
                alert( "Data Saved: " + msg );
            }); 
```

Server says that I have used the **GET method** but in my ajax request I have **type: "PUT"**

```
Started GET "/resources/35?resource%5Bpos_y%5D=45&resource%5Bpos_x%5D=50&_=1344001820350" for 192.168.1.89 at 2012-08-03 15:50:20 +0200
Processing by ResourcesController#show as */*
  Parameters: {"resource"=>{"pos_y"=>"45", "pos_x"=>"50"}, "_"=>"1344001820350", "id"=>"35"}
  User Load (0.3ms)  SELECT "users".* FROM "users" 
  Resource Load (0.1ms)  SELECT "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT 1  [["id", "35"]]
  Rendered resources/show.html.erb within layouts/login (2.3ms)
Completed 200 OK in 238ms (Views: 235.9ms | ActiveRecord: 0.4ms) 
```

resources_controller.rb

```
 # PUT /resources/1                                                                                                                                                             
  # PUT /resources/1.json                                                                                                                                                        
  def update
    @resource = Resource.find(params[:id])

    respond_to do |format|
      if @resource.update_attributes(params[:resource])
        format.html { redirect_to @resource, notice: 'successfully updated.' }
        format.js
      else
        format.html { render action: "edit" }
        format.js
      end
    end
  end 
```

I have tried adding **_method: 'put'** But it's still the same

```
$.ajax({
        type: "PUT",
        dataType: "script",
        url: '/resources/35',
        data:
        {
            resource : { pos_y: 45, pos_x: 50 },
            _method: 'put'
        }
    }).done(function( msg )
            {
                alert( "Data Saved: " + msg );
            }); 
```

Server:

"resource%5Bpos_y%5D=45&resource%5Bpos_x%5D=50&***method=put****&*=1344004390840"

```
Started GET "/resources/35?resource%5Bpos_y%5D=45&resource%5Bpos_x%5D=50&_method=put&_=1344004390840" for 192.168.1.89 at 2012-08-03 16:33:10 +0200
Processing by ResourcesController#show as */*
  Parameters: {"resource"=>{"pos_y"=>"45", "pos_x"=>"50"}, "_"=>"1344004390840", "id"=>"35"}
  User Load (0.3ms)  SELECT "users".* FROM "users" 
  Resource Load (0.1ms)  SELECT "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT 1  [["id", "35"]]
  Rendered resources/show.html.erb within layouts/login (0.8ms)
Completed 200 OK in 93ms (Views: 90.5ms | ActiveRecord: 0.4ms) 
```

I'd appreciate any help.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T14:10:57.663

Rails 通过值为 'put' 的参数 _method 确定 put 请求。

由于并非所有浏览器都支持 put 方法，因此 rails 在 form_tag 中作弊。它将这个输出放在一个 PUT 形式中：

```
<input type='hidden' name='_method' value='put'> 
```

所以你要做的是：

```
$.ajax({
    type: "POST",
    dataType: "script",
    url: '/resources/35',
    contentType: 'application/json',
    data: JSON.stringify({ resource:{pos_y:45,pos_x:50}, _method:'put' })
}).done(function( msg )
        {
            alert( "Data Saved: " + msg );
        }); 
```

# mysql - Mysql return key based on count and interval

> ID：11797274
> 
> 赞同：2
> 
> 时间：2012-08-03T14:02:08.510
> 
> 标签：mysql, count, intervals

I'm trying to write a query to find an eligble key. The criteria for an key being eligble is that it must not have been used 10 times within 24 hrs.

Every time a key has been used, a record is saved in my table api_history.

Can anyone please teach me how to do it correctly? Currently I'm getting an empty key returned, as no records exists in the api_history. (Then it should just have returned the first giving key).

Thanks in advance!

Query:

```
SELECT ak.key 
FROM api_history ah 
  INNER JOIN api_keys ak ON ah.key_id = ah.id 
WHERE ah.used_at > DATE_SUB(now(), INTERVAL 1 DAY) 
HAVING COUNT(ah.id) < 10 LIMIT 0,1 
```

Tables:

**api_keys**

*   id (int)
*   key (string)

**api_history**

*   id (int)
*   key_id (int)
*   used_at (datetime)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:11:01.017

它对你有用吗？

```
SELECT ak.key, COUNT(ah.id) as num_usage_24hrs 
FROM api_keys  ak
LEFT JOIN api_history ah ON (ah.key_id = ak.id 
    AND ah.used_at > DATE_SUB(now(), INTERVAL 1 DAY) )    
GROUP BY ak.key
HAVING COUNT(ah.id) < 10 
```

** 你可能不需要`COUNT(ah.id) as num_usage_24hrs`in `select`，我输出它只是为了调试。

**更新** （应该是`ah.key_id = ak.id`，不是`ah.key_id = ah.id`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:14:50.703

试试看：

```
SELECT ak.key 
FROM api_keys ak
  LEFT JOIN api_history ah 
    ON  ah.key_id = ak.id 
    AND ah.used_at > DATE_SUB(now(), INTERVAL 1 DAY)
WHERE 1 
GROUP BY ak.key
HAVING COUNT(ah.id) < 10 
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:32:21.973

如果我理解正确，我认为您想要 api_keys 表中的最大键。所以也许你可以做这样的事情？

```
SELECT max(ak.key) 
FROM api_keys ak
WHERE NOT EXISTS
(SELECT * FROM api_history ah 
WHERE ah.key_id = ak.id AND ah.used_at > DATE_SUB(now(), ITERVAL 1 DAY))
GROUP BY ah.key_id
HAVING COUNT(ah.id)<10) 
```

# php - PHP/mySQL：导入数据并存储在分层嵌套集中以与 jsTree 一起使用

> ID：11797288
> 
> 赞同：3
> 
> 时间：2012-08-03T14:03:12.860
> 
> 标签：php, mysql, hierarchy, jstree, nested-sets

我正在使用 jsTree 来查看存储在 mySQL 数据库中作为嵌套集（左、右、级别等）的分层数据。这工作正常，但我需要允许用户通过上传 CSV 文件来导入数据。当他们这样做时，表中的任何现有数据都将被删除，因此我不必担心更新左/右字段。

他们将上传的数据将采用以下格式：

```
"Code","Title"
"100","Unit 100"
"200","Unit 200"
"101","Task 101: This is a task"
"102","Task 102: Another task"
"201","Task 201: Yet another"   
"300","Unit 300"
"301","Task 301: Another one" 
```

一切都将是一级节点的主要“组”的子节点。所有可被 100 整除的“代码”（即 100、200、300）将是 2 级（父节点..“组”的子节点）。所有其他节点将是其各自父节点的第 3 级（子）节点（即 101 和 102 是 100 的子节点，201 是 200 的子节点，等等）

mySQL 中的结果表应如下所示：

```
id  parent_id   position    left    right   level   title
1   0           0           1       18      0       ROOT     
2   1           0           2       17      1       Group
3   2           0           3       8       2       Unit 100
4   2           1           9       12      2       Unit 200
5   3           0           4       5       3       Task 101: This is a task
6   3           1           6       7       3       Task 102: Another task
7   4           0           10      11      3       Task 201: Yet another   
8   2           2           13      16      2       Unit 300
9   8           0           14      15      3       Task 301: Another one 
```

然后树看起来像这样：

![树](../Images/45d16628fe6b4e752eeb3ae335a2f6c9.png)

我的问题是：使用 PHP，完成此任务的最佳方法是什么？我已经有代码可以提取上传的 CSV 文件中包含的数据并将其存储在一个数组中，但我不确定将其转换为嵌套集的逻辑应该是什么样的。

现在，数据存储在一个名为 $data 的二维数组中（格式为 $data[$col][$row]）：

```
$data[0][0] = "Code";
$data[0][1] = "100";
$data[0][2] = "200";
$data[0][3] = "101";
$data[0][4] = "102";
$data[0][5] = "201";
$data[0][6] = "300";
$data[0][7] = "301";
$data[1][0] = "Title";
$data[1][1] = "Unit 100";
$data[1][2] = "Unit 200";
$data[1][3] = "Task 101: This is a task";
$data[1][4] = "Task 102: Another task";
$data[1][5] = "Task 201: Yet another";
$data[1][6] = "Unit 300";
$data[1][7] = "Task 301: Another one";

Array ( [0] => Array ( [0] => Code [1] => 100 [2] => 200 [3] => 101 [4] => 102 [5] => 201 [6] => 300 [7] => 301 ) [1] => Array ( [0] => Title [1] => Unit 100 [2] => Unit 200 [3] => Task 101: This is a task [4] => Task 102: Another task [5] => Task 201: Yet another [6] => Unit 300 [7] => Task 301: Another one ) ) 
```

任何帮助将不胜感激。我现在正确计算了 parent_id、位置和级别......我只需要弄清楚左/右部分。这是我目前正在使用的代码（感谢您让我开始使用 Matteo）：

```
$rows = array();

// insert ROOT row
$rows[] = array(
    'id' => 1,
    'parent_id' => 0,
    'position' => 0,
    'left' => 1,
    'right' => 10000,       // just a guess, will need updated later
    'level' => 0,
    'title' => 'ROOT',
);

echo "<br>";
print_r($rows[0]);

// insert group row
$rows[] = array(
    'id' => 2,
    'parent_id' => 1,
    'position' => 0,
    'left' => 2,
    'right' => 9999,        // just a guess, will need updated later
    'level' => 1,
    'title' => 'Group',
);

echo "<br>";
print_r($rows[1]);

// next ID to be used
$id = 3;

// keep track of code => ID correspondence
$map = array();

// parse data
for ($i = 1, $c = count($data[0]); $i < $c; ++$i) {
    // save ID in the map
    $map[$data[0][$i]] = $id;

    // initialize the current row
    $row = array(
        'id' => $id,
        'parent_id' => 1,           
        'position' => 0,            
        'left' => 0,
        'right' => 0,           
        'level' => 1,               
        'title' => $data[1][$i],
    );

    // if the code is multiple of 100
    if ($data[0][$i] % 100 == 0) {
        $row['parent_id'] = 2;
        $row['level'] = 2;
        $row['position'] = (floor($data[0][$i] / 100)) - 1;
    } else {
        // get parent id from map
        $row['parent_id'] = $map[floor($data[0][$i] / 100) * 100];
        $row['level'] = 3;
        $row['position'] = $data[0][$i] % 100;
    }

    // add the row
    $rows[] = $row;

    ++$id;

    echo "<br>";
    print_r($row);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:33:01.370

给定您的`$data`数组，您可以像这样解析它：

```
// this will contain all the rows to be inserted in your DB
$rows = array();

// insert ROOT row
$rows[0] = array(
    'id' => 1,
    'parent_id' => 0,
    'position' => 0,
    'level' => 0,
    'left' => 1,
    'right' => 10000,
    'title' => 'ROOT',
);

// insert group row
$rows[1] = array(
    'id' => 2,
    'parent_id' => 1,
    'position' => 0,
    'level' => 1,
    'left' => 2,
    'right' => 9999,
    'title' => 'Group',
);

// keep trace of code => ID correspondence
$map = array();

// next ID to be used
$id = 3;

// keep father => sons relationship
$tree = array();

// keep trace of code => row index correspondence
$indexes = array();

// next row index
$index = 2;

// parse your data
for ($i = 1, $c = count($data[0]); $i < $c; ++$i) {
    // current code
    $code = $data[0][$i];

    // save ID in the map
    $map[$code] = $id;

    // update the indexes map
    $indexes[$code] = $index;

    // prepare the current row
    $row = array(
        'id' => $id,
        'title' => $data[1][$i],
    )

    // get the value of code mod 100
    $mod = $code % 100;

    // if the code is multiple of 100
    if ($mod == 0) {
        // the parent_id is 2
        $row['parent_id'] = 2;

        // it is level two
        $row['level'] = 2;

        // compute position
        $row['position'] = floor($code / 100) - 1;
    }
    else {
        // get the parent code
        $parent = floor($code / 100) * 100;

        // get parent id from map using parent code
        $row['parent_id'] = $map[$parent];

        // it is level three
        $row['level'] = 3;

        // save position
        $row['position'] = $mod;

        // save in relationship tree
        $tree[$parent][] = $code;
    }

    // add the row
    $rows[$index] = $row;

    // prepare next id
    ++$id;

    // update row index
    ++$index;
}

// sort the relationship tree base on the parent code (key)
ksort($tree, SORT_NUMERIC);

// next left value
$left = 3;

// now, using the relationship tree, assign left and right
foreach ($tree as $parent => $sons) {
    // calculate parent left value
    $parentLeft = $left;

    // prepare next left value
    ++$left;

    // to be sure that the sons are in order
    sort($sons, SORT_NUMERIC);

    // assign values to sons
    foreach ($sons as $son) {
        // index in the rows array
        $index = $indexes[$son];

        // set left value
        $rows[$index]['left'] = $left;

        // set right value
        $rows[$index]['right'] = $left + 1;

        // increment left value
        $left += 2;
    }

    // calculate parent right value
    $parentRight = $left;

    // prepare next left value
    ++$left;

    // index of parent in the rows array
    $index = $indexes[$parent];

    // set the values
    $rows[$index]['left'] = $parentLeft;
    $rows[$index]['right'] = $parentRight;
}

// update group row right value
$rows[1]['right'] = $left;

// prepare next left value
++$left;

// update root row right value
$rows[0]['right'] = $left; 
```

此时，您可以一次插入所有行。

编辑：现在脚本应该正确处理所有必需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:17:10.977

我会使用带有嵌套集扩展的 Doctrine2。您可以使用一个不错且方便的 API，而不必担心嵌套集的实现：

见 [http://www.gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2](http://wildlyinaccurate.com/simple-nested-sets-in-doctrine-2) 或[http://wildlyinaccurate.com/simple-nested-sets-in-doctrine-2](http://wildlyinaccurate.com/simple-nested-sets-in-doctrine-2)

github上有几个扩展。实际上，我不知道哪个最好。

*   [https://github.com/l3pp4rd/DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)
*   [https://github.com/guilhermeblanco/Doctrine2-Hierarchical-Structural-Behavior](https://github.com/guilhermeblanco/Doctrine2-Hierarchical-Structural-Behavior)
*   [https://github.com/blt04/doctrine2-nestedset](https://github.com/blt04/doctrine2-nestedset)

项目清单

如果您的数据是扁平的，您可以解析“单元”或“任务”等关键字，以将元素排列为所需的层次顺序。

# javascript - jQuery Slideshow Next/Previous

> ID：11797291
> 
> 赞同：0
> 
> 时间：2012-08-03T14:03:25.247
> 
> 标签：javascript, jquery

I'm new to jQuery and I'm just wondering the easiest and most efficient way to create next/previous buttons to go through the slideshow. My code is as follows:

```
    run = setInterval("switchSlide()", 2000);

    $(document).ready(function() {
        $('#slideshow img:gt(0)').hide();

        $('#slideshow').hover(function() {
            clearInterval(run);
        }, function() {
            run = setInterval("switchSlide()", 2000);
        });

        $('#play').click(function() {
            run = setInterval("switchSlide()", 2000);
        });

        $('#stop').click(function() {
            clearInterval(run);
        });
        $('#previous').click(function() {
                    $('#slideshow img:first').fadeOut(1000).prev().fadeIn(1000).end().appendTo('#slideshow');
                });

                $('#next').click(function() {
                    $('#slideshow img:first').fadeOut(1000).next().fadeIn(1000).end().appendTo('#slideshow');
                });

    });

    function switchSlide() {
        $('#slideshow img:first').fadeOut(1000).next().fadeIn(1000).end().appendTo('#slideshow');
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:12:34.230

我假设 next() 会给你下一张图片，因为这是你在 switchSlide() 中所做的。您可以在 HTML 中添加 div 元素

```
 <div id="next"></div> 
```

然后为其附加一个单击事件，该事件将调用 next()，本质上执行与 switchSlide() 相同的操作

```
 $('.next').click(function(){ 
     $('#slideshow img:first').fadeOut(1000).next().fadeIn(1000).end().appendTo('#slideshow');
   }) 
```

以前也可以这样做

# android - jQuery ajax json 请求无法在移动网络上运行

> ID：11797298
> 
> 赞同：1
> 
> 时间：2012-08-03T14:03:59.013
> 
> 标签：android, json, jquery, mobile, servicestack

几天来，我一直在为此挠头。

我使用普通的旧 html 和 jquery 编写了一个特定于移动设备的网站。

它使用带有 json 响应的 ajax 从使用服务堆栈编写的服务中获取数据。

从桌面和我尝试过的许多不同的移动设备（android、iphone、bb 等）上都可以正常工作

但是，我的手机似乎存在特定问题（沃达丰上的三星 Galaxy S2）

当手机在 wifi 上时，ajax 可以正常工作，并且从服务接收到 json 对象并正确处理。

但是，在移动数据上，响应不会以 json 形式返回，而是以服务堆栈网页的形式返回（看起来它没有被告知正确返回 json）

我想知道标题是否会被沃达丰或其他公司剥离？

这是正在使用的 ajax 调用

```
$.ajax({
            url: sgee.ApiUrl + "/api/GetRegionId/" + sgee.App.postcode,
            type: 'GET',
            dataTye: 'json',
            contentType: "application/json;charset=utf-8",
            cache: false,
            success: function (data) {
                if (data.success) {
                    sgee.App.EnquiryId = data.enquiryId;
                    sgee.App.RegionId = data.regionId;
                    sgee.App.RegionName = data.regionName;
                    $("#regionTxt").html("We have identified that you live in the " + sgee.App.RegionName + " supply region.");
                    sgee.EndLoading(250);
                    sgee.HideStep(2);
                } else {
                    sgee.SetValidationError("#pcodeControl", "Please enter a valid UK postcode");
                }

            },
            error: function () {
                sgee.SetValidationError("#pcodeControl", "Please enter a valid UK postcode");
                sgee.SendError("Error on /api/GetRegionId/", "sgee.Step1");
            },
            complete: function () {

            }
        }); 
```

这是预期的数据

```
{"postCode":"s63","regionId":14,"regionName":"YORKSHIRE","enquiryId":578106,"success":true,"returnedId":0} 
```

当在移动设备上运行时，这是我收到的（不包括整个，因为它很长，但它只是 html 响应，好像我没有设置响应类型或浏览到页面）

```
<!doctype html>
<html lang="en-us">
<head>
<title>GetRegionId Snapshot of 03/08/2012 13:59:50</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

这真的让我发疯，因为无法调试（至少我找不到方法）我正在使用 android chrome 远程开发人员工具来逐步执行代码，但我无法捕获移动网络上的 http 请求和响应.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:19:09.490

只是猜测...但是您期望 json 内容对吗？如果是这样，为什么您的响应是“text/html”而不是“application/json”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:58:28.230

你有一个错字......“dataTye：'json'，”。会是这样吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T12:14:28.330

我认为是由于表单提交的类型。使用 post 而不是 get...

# hive - 蜂巢 RegexSerDe null

> ID：11797305
> 
> 赞同：1
> 
> 时间：2012-08-03T14:04:29.987
> 
> 标签：hive

我应该如何在 RegexSerDe 中使用 NULL 值？我有数据文件：

```
cat MOS/ex1.txt

123,dwdjwhdjwh,456

543,\N,956 
```

我有桌子：

```
CREATE TABLE mos.stations (usaf string, wban STRING, name string)
ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
WITH SERDEPROPERTIES (
    "input.regex" = "(.*),(.*),(.*)"
); 
```

我成功地将数据从文件加载到表：

```
LOAD DATA LOCAL INPATH '/home/hduser/MOS/ex1.txt' OVERWRITE INTO TABLE mos.stations; 
```

简单的选择工作正常：

```
hive> select * from mos.stations;

123dwdjwhdjwh456

543\N956 
```

接下来以错误结束：

```
select * from mos.stations where wban is null;
[Hive Error]: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:03:01.310

我看到几个可能的问题：

1）它可能与 null 处理根本没有任何关系。第一个查询实际上并没有产生 M/R 作业，而第二个查询确实产生了，因此这可能是一个简单的类路径问题，其中 M/R 任务看不到 RegexSerde，因为它的 jar 不在 tasktracker 的类路径中。您需要找到系统上的 hive-contrib jar 所在的位置，然后通过以下方式让 hive 意识到它：

```
add jar /usr/lib/hive/lib/hive-contrib-0.7.1-cdh3u2.jar 
```

请注意，您的路径和 jar 名称可能不同。您可以在查询之前通过 hive 运行上述内容。

2) 另一个问题可能是 RegexSerde 并没有像默认的 LazySimpleSerde 那样真正处理“\N”。从您在第一个查询中获得的输出来看（它返回一个文字“\ N”），可能就是这种情况。如果查询会发生什么`where wban='\\N'`？或`where wban='\N'`（我忘记了您是否需要双重转义）。

最后，请注意 RegexSerde。虽然它真的很方便，但与默认的 serde 相比，它在一月份的糖蜜上坡速度很慢。如果数据集很大并且您计划对其运行大量查询，最好进行预处理，这样您就不需要 RegexSerde。否则，您将为每次查询支付罚款。上面相同的数据集看起来使用默认的 serde 就可以了。

# ios - 异常类型：EXC_CRASH (SIGTRAP)

> ID：11797308
> 
> 赞同：2
> 
> 时间：2012-08-03T14:04:41.443
> 
> 标签：ios, crash

在非常罕见的情况下，我们的一些用户会在我们的应用程序中遇到崩溃。当他们从菜单中选择某些东西时，它开始正常但很快就崩溃了。那些看到它的人总是能得到它，其他人都很好。有人可以看到可以帮助我追踪它的东西吗？

```
Exception Type:  EXC_CRASH (SIGTRAP)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x31495848 __kill + 8
1   MYApp                           0x0007a8b6 TFHandleExceptions + 986
2   CoreFoundation                  0x372df950 __handleUncaughtException + 68
3   libobjc.A.dylib                 0x34fe433e _objc_terminate + 122
4   libc++abi.dylib                 0x36a173be safe_handler_caller(void (*)()) + 70
5   libc++abi.dylib                 0x36a1744a std::terminate() + 14
6   libc++abi.dylib                 0x36a1881e __cxa_rethrow + 82
7   libobjc.A.dylib                 0x34fe42a2 objc_exception_rethrow + 6
8   CoreFoundation                  0x37235506 CFRunLoopRunSpecific + 398
9   CoreFoundation                  0x37235366 CFRunLoopRunInMode + 98
10  GraphicsServices                0x339f4432 GSEventRunModal + 130
11  UIKit                           0x30fe1cce UIApplicationMain + 1074
12  MYApp                           0x0005bc9c main (main.m:17)
13  MYApp                           0x0005bc30 start + 32 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:30:39.037

您的应用程序因异常而崩溃。TF 似乎没有涵盖这些，也没有显示崩溃的起源。异常在下一个运行循环中被重新抛出到主线程中，因此主线程的堆栈跟踪不会显示它的来源。您需要使用另一个能够显示该信息的崩溃报告库或尝试获取 iOS 编写的原始崩溃报告。（大多数基于 PLCrashReporter 的崩溃报告库或服务都可以做到这一点）

原因可能是任何类型的异常，例如 NSArray indexOutOfBounds 或其他任何东西。

# c - int x = 时间（NULL）；=> 错误？

> ID：11797309
> 
> 赞同：1
> 
> 时间：2012-08-03T14:04:43.047
> 
> 标签：c, time, segmentation-fault

我所看到的一切都说明了我如何获得一个随机数的合理参数种子。

```
int seed = time(NULL); 
```

段错误。也一样

```
time_t seed = time(NULL);
int seed = (int)time(NULL); 
```

等等等等

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:10:23.093

唯一立即想到的是有人重新定义`NULL`为非零。如果您传递一个非空指针，它将尝试写入该内存，这可能会导致段错误。

快速检查是尝试`time(0)`。

如果失败，它可能是由其他地方的损坏引起的，在这种情况下最好的办法是使用调试器单步执行它。

还要确保您已包含正确的标题。在整数（遵循早期标准的编译器中参数的默认值）与指针大小不同的系统中，您可能会导致堆栈未对齐。我在一些 64 位系统上看到过这种效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:09:16.697

为我工作：

```
#include <time.h>

int main()
{
    time_t seed = time(NULL);
    return 0;
}

// gcc x.c && ./a.out
// echo $?
// > 0 
```

# bash - rc.d start 不终止？

> ID：11797310
> 
> 赞同：1
> 
> 时间：2012-08-03T14:04:43.957
> 
> 标签：bash, daemon, archlinux

所以我为守护进程编写了 Arch Linux rc.d 脚本`mongod`（如下[示例](https://wiki.archlinux.org/index.php/Writing_rc.d_scripts)），但是当我这样做时：

```
sudo rc.d start mongod 
```

它只是卡在：

```
:: Starting /usr/bin/mongod          [BUSY] 
```

并且永远不会过渡到“完成”阶段。有小费吗？

这是我的脚本：

```
#!/bin/bash

# import predefined functions
. /etc/rc.conf
. /etc/rc.d/functions

# Point to the binary
DAEMON=/usr/bin/mongod

# Get the ARGS from the conf
. /etc/conf.d/crond

# Function to get the process id
PID=$(get_pid $DAEMON)

case "$1" in
   start)
    stat_busy "Starting $DAEMON"
    # Check the PID exists - and if it does (returns 0) - do no run
    [ -z "$PID" ] && $DAEMON $ARGS &> /dev/null
    if [ $? = 0 ]; then
        add_daemon $DAEMON
        stat_done
    else
        stat_fail
        exit 1
    fi
    ;;
   stop)
        stat_busy "Stopping $DAEMON"
    kill -HUP $PID &>/dev/null

    rm_daemon $DAEMON
    stat_done
    ;;
   restart)
        $0 stop
    sleep 1
    $0 start
    ;;
    *)
        echo "usage: $0 {start|stop|restart}"
esac 
```

我已经看过 apache 是如何做到的，但我不知道他们在做什么不同。这是他们的一段`httpd`脚本：

```
case "$1" in
  start)
    stat_busy "Starting Apache Web Server"
    [ ! -d /var/run/httpd ] && install -d /var/run/httpd
    if $APACHECTL start >/dev/null ; then
      add_daemon $daemon_name
      stat_done
    else
      stat_fail
      exit 1
    fi
    ;; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:23:05.640

一方面，您传递了一个从未实际定义过的 $ARGS 变量。您可能想要传递一些[配置选项](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)，或者使用 -f 或 --config 选项[传递 mongodb.conf 文件](http://www.mongodb.org/display/DOCS/File+Based+Configuration)的位置，以告知守护进程您的数据库、日志文件、IP 绑定等的位置。

mongod 默认假设您的数据库位置是 /data/db/。如果这不存在，或者守护程序没有对该位置的权限，则 init 脚本将失败。

您可能还应该使用您自己或 root 以外的用户帐户运行守护程序（默认 pacman 包创建一个名为 mongodb 的用户），并授予该用户对数据路径和日志文件的读/写访问权限。

```
[ -z "$PID" ] && /bin/su mongodb -c "/usr/bin/mongod --config /etc/mongodb.conf --fork" > /dev/null 
```

我建议参考[Arch 社区包](http://www.archlinux.org/packages/community/x86_64/mongodb/)中提供的[mongodb 初始化脚本](https://gist.github.com/3260682)，并将其与您在此处的内容进行比较。或者，使用 pacman 安装 MongoDB，它会为您设置所有这些。

如果一切都失败了，请在*if*和*else*块中添加一些“echo”命令，以准确跟踪 init 脚本挂起的位置，检查 mongodb 的日志，并向我们报告。

# c# - PayPal PayerInfo 地址详细信息为空

> ID：11797314
> 
> 赞同：2
> 
> 时间：2012-08-03T14:05:21.530
> 
> 标签：c#, paypal

我正在尝试检索交易的详细信息。我正在检索交易的详细信息（PayerName 和 PaymentInfo），但返回的 PayerInfo.Address 信息为`GetTransactionDetailsResponseType`空。我已经尝试过实时和沙盒。`PayerStatus`for all is`unverified`和`AddressStatus`is 。`Unconfirmed`这可能是问题吗？我可以理解沙盒是这样的，但不是实时系统。

我使用的代码很简单，但很长 - 我会发布您要求查看的任何部分，但不会发布全部内容：我执行 a `TransactionSearch`，然后`PaymentTransactionSearchResultType`通过foreach`TransactionID`获取`GetTransactionDetailsResponseType`. 所有简单的东西，可能不是最佳的（速度也是一个问题，但次要于地址的主要问题）。[该代码与此处](https://www.x.com/paypal-apis-transaction-search-java-1.6/soap)和[此处](https://www.x.com/paypal-apis-gettransactiondetails-java-1.6/soap)的 Java 版本非常相似。

关于为什么我可以获得付款详细信息但没有付款人的地址信息的任何想法？

# jquery - 控制器发送的jQuery拖动元素

> ID：11797315
> 
> 赞同：1
> 
> 时间：2012-08-03T14:05:23.783
> 
> 标签：jquery, draggable

我正在开发一个包含搜索输入的 MVC 应用程序。控制器向视图发送以输入中存在的字母开头的项目列表。

我的问题是我希望这个收到的项目（带有 class `.suggest`）是可拖动的，带有一个克隆助手。`$(document).ready`如果我在函数中使用以下代码

```
$(".suggest").draggable({
    helper: 'clone'
}); 
```

项目不可拖动。我想这是因为页面加载后项目已加载？

如果我`.ui-draggable`在项目的 HTML 代码中添加类，它也不起作用。是否有拖动控制器加载的元素的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:22:40.370

试试这个话题：

[使用实时事件的 jQuery 拖放](https://stackoverflow.com/questions/1805210/jquery-drag-and-drop-using-live-events)

# mongodb - MongoDB - 手动创建具有引用的对象 - DBRef 不起作用

> ID：11797316
> 
> 赞同：4
> 
> 时间：2012-08-03T14:05:25.667
> 
> 标签：mongodb, reference, foreign-keys, database

出于测试目的，我需要在 MongoDB 中手动创建一些对象。我的班级有另一个班级的参考字段。引用的对象已经存在。

我试图将现有对象的 Mongo-ID 作为值放入新对象中，但出现以下错误：

> ReferenceField 只接受 DBRef: ['attribute'])

**现在我的问题是：我在哪里得到或找到这个`DBRef`？**

* * *

一个例子：我的数据库中有一个用户。我想创建一个现有用户为`"creator"`. 当我将用户 ID 放入创建者字段时，出现错误...

编辑：

我刚刚找到这个链接[MongoDB - DBRef](https://stackoverflow.com/questions/8713304/mongodb-dbref)但该解决方案对我不起作用......

```
item : {"$ref" : "fruit", "$id" : "1"} 
```

我的代码是这样的：

```
{ "name" : "MyGroup", "created_at" : "2011-05-22T00:46:38", "creator": { "$ref": "user", "$id": "501bd5ac32f28a1278e54435" } } 
```

另一个编辑：

甚至 Mongo 文档都说我使用了正确的格式... [http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)。但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:28:58.110

在[您引用的问题中](https://stackoverflow.com/q/8713304/162228)，用户使用数字字符串作为其文档 ID。在您的情况下，您似乎正在使用更常见的 ObjectId ，但将其作为字符串插入。假设您使用的是 PyMongo，您可能希望将[ObjectId](http://api.mongodb.org/python/current/api/bson/objectid.html)类用于[DBRef](http://api.mongodb.org/python/current/api/bson/dbref.html)`$id`的属性。

如果您知道所有此类引用都将指向同一个数据库和集合，那么使用手动引用（仅存储目标文档的`_id`）而不是 DBRef 对象可能是有意义的。[这在Database References 文档](http://docs.mongodb.org/manual/applications/database-references/)中有更详细的解释。

# javascript - HighCharts：创建股票图表的奇怪错误

> ID：11797319
> 
> 赞同：0
> 
> 时间：2012-08-03T14:05:33.767
> 
> 标签：javascript, highcharts, highstock

我正在尝试创建一个简单的股票图表，像[这样](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/) ，但它在控制台中引发了这个错误：

```
Uncaught TypeError: Cannot read property 'width' of undefined
Tick.getLabelSideshighstock.src.js:5338
Tick.handleOverflowhighstock.src.js:5360
Tick.renderhighstock.src.js:5573
(anonymous function)highstock.src.js:7491
eachhighstock.src.js:1021
Axis.renderhighstock.src.js:7473
Chart.render.chart.seriesGroup.renderer.g.attr.zIndexhighstock.src.js:10529
eachhighstock.src.js:1021
Chart.renderhighstock.src.js:10528
Chart.firstRenderhighstock.src.js:10729
Chart.inithighstock.src.js:10813
Charthighstock.src.js:9399
Highcharts.StockChart 
```

为什么？我在想问题出在不正确的数据（或时间戳中的日期转换错误），但数据似乎是正确的。这是我正在使用的数据：

```
[[1343833881,1],[1343833879,-1],[1343833876,0],[1343833007,0],[1343833003,0],
 [1343833000,-1],[1343832993,-1],[1343832993,1],[1343497396,0],[1343497340,0.5],
 [1343497330,-1],[1343497316,-0.5]] 
```

如果您在上面链接的高库存的 JSFiddle 示例中尝试此数据，您会发现它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T20:13:45.530

我有同样的问题，但在我的情况下，我有一个名为 jquery.resize.js 的文件，这是错误，因为它为你的目的搜索属性，我删除了文件的链接，它工作得很好。

我希望它有帮助！

亲切的问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:17:23.513

您的时间值按降序排列，而它们需要严格按升序排列，在这里找到具有相同数据的图表，只是正确排序，[http://jsfiddle.net/jugal/Swj3E/](http://jsfiddle.net/jugal/Swj3E/)

# asp.net-mvc - 将两个文件都放在与控制器匹配的目录中？

> ID：11797324
> 
> 赞同：3
> 
> 时间：2012-08-03T14:05:56.500
> 
> 标签：asp.net-mvc

我遇到了一个很大的问题。

我有一个具有 Shapeshifter 操作的 SoftwareController，因此我的 URL 是[http://flamefusion.net/software/shapeshifter](http://flamefusion.net/software/shapeshifter)。

现在，如果我在根网络服务器文件夹的 FTP 上创建一个名为 Software\Shapeshifter 的文件夹，即使我没有访问特定文件，MVC 在尝试访问控制器时也会崩溃。

所以我的问题是：如何在不破坏 MVC 功能的情况下在[http://flamefusion.net/software/shapeshifter/downloads/shapeshifter.exe上放置文件？](http://flamefusion.net/software/shapeshifter/downloads/shapeshifter.exe)我尝试使用该`Global.asax`文件进行一些 URL 重写，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:19:32.657

您是否尝试过设置 routes.RouteExistingFiles = true 然后忽略具有您直接访问的特定文件扩展名的路由？所以你 global.asax 看起来像：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("*.exe");
    routes.RouteExistingFiles = true;
    //rest of route maping code goes here
} 
```

# c# - Windows 窗体：自定义事件与复合控件的公开属性

> ID：11797327
> 
> 赞同：0
> 
> 时间：2012-08-03T14:06:05.773
> 
> 标签：c#, winforms

假设我有一个复合控件，其中有一个 ListBox 控件，其中列出了员工，例如，另一个控件包含多个 TextBox 控件，其中包含员工的详细信息。

当从 ListBox 控件中选择一个员工时，我需要将一个 Employee 对象传递给“详细”控件，然后将每个 TextBox 控件的 Text 属性分配给它们与 Employee 对象的相关属性。

我有两个解决方案可以将 Employee 对象传递给“详细信息”控件，但我不确定哪个是最好的。

**Solution 1** : *Expose a Employee property* in the "detail" control so when an employee is selected, I could do detailControl.Employee = selectedEmployee.

**解决方案2**：在主控件中*公开一个事件*，并在选择员工时触发它。“详细信息”控件将订阅该事件并通过事件的 eventargs 接收 Employee 对象。

我知道这两种方法都可以正常工作。我只是不确定最好使用什么。

有人说您应该使用自定义事件在控件之间传递数据，这是一种最好的松散耦合方法。

有人说实现自定义事件需要更多时间，因为您必须创建它们，向其中添加属性等，因此使用公开属性更快更简单。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:14:15.710

好吧，在我的理想世界中，您将拥有某种控制器。

主控件将引发控制器将侦听的事件。然后控制器将解码应该通知谁，即细节控制。

这完全解耦了 UI 组件，提供了通常的好处，包括方便的单元测试。

# java - javamail java.io.IOException：无效的密钥库格式

> ID：11797329
> 
> 赞同：0
> 
> 时间：2012-08-03T14:06:10.190
> 
> 标签：java, jakarta-mail, keystore

我正在尝试在我的本地计算机上使用 javamail 发送一封电子邮件，当我运行我的课程时，邮件可以很好地发送。

在生产计算机上出现错误：

```
Caused by: javax.mail.MessagingException: Could not convert socket to TLS (java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl))
        at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1230)
        at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:378)
        at javax.mail.Service.connect(Service.java:271)
        at javax.mail.Service.connect(Service.java:91)
        at javax.mail.Service.connect(Service.java:76)
        at javax.mail.Transport.send(Transport.java:94)
        ... 8 more
Caused by: java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
        at javax.net.ssl.DefaultSSLSocketFactory.throwException(SSLSocketFactory.java:179)
        at javax.net.ssl.DefaultSSLSocketFactory.createSocket(SSLSocketFactory.java:199)
        at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:249)
        at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1226)
        ... 13 more
Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
        at java.security.Provider$Service.newInstance(Provider.java:1245)
        at sun.security.jca.GetInstance.getInstance(GetInstance.java:220)
        at sun.security.jca.GetInstance.getInstance(GetInstance.java:147)
        at javax.net.ssl.SSLContext.getInstance(SSLContext.java:125)
        at javax.net.ssl.SSLContext.getDefault(SSLContext.java:68)
        at javax.net.ssl.SSLSocketFactory.getDefault(SSLSocketFactory.java:102)
        at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:247)
        ... 14 more
Caused by: java.io.IOException: Invalid keystore format
        at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:633)
        at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)
        at java.security.KeyStore.load(KeyStore.java:1185)
        at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.getDefaultKeyManager(DefaultSSLContextImpl.java:150)
        at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.<init>(DefaultSSLContextImpl.java:40)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:355)
        at java.lang.Class.newInstance(Class.java:308)
        at java.security.Provider$Service.newInstance(Provider.java:1221)
        ... 20 more 
```

在安全路径中有这些文件：

```
68595 Mar  9  2009 cacerts
 2221 Mar  9  2009 java.policy
 9937 Mar  9  2009 java.security
  132 Mar  9  2009 javaws.policy
 2940 Mar  9  2009 _local_policy.jar
 2481 Feb 28 12:54 local_policy.jar
 2469 Mar  9  2009 _US_export_policy.jar
 2465 Feb 28 12:54 US_export_policy.jar 
```

没有trusted.certs 文件。

生产使用jdk 1.6.0_13，是不是有些文件太旧了？另一个细节，直到上周一（7/30），每件事都在生产中运行良好，代码没有任何变化，现在我收到了这个错误。

很难找出问题所在，因为我什至不知道哪个文件有问题。如果你有任何想法我接受！

感谢帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:06:14.860

最后的问题是管理员定义了一个自定义 keyStore ：

-Djavax.net.ssl.keyStore=xxxxxxx.p12

它缺少这个：

-Djavax.net.ssl.keyStoreType=pkcs12

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:56:18.537

尝试打开您的密钥库文件时似乎失败了。通常，密钥库文件在运行应用程序的用户的主目录中命名为“.keystore”。如果这个文件是在上周一更新的，那就可以解释为什么你的程序开始失败了。请注意，您可以通过设置 javax.net.ssl.keyStore 系统属性来覆盖密钥库文件的默认位置，因此也要检查它。

问题可能是由您的信任存储引起的，该信任存储可以由 javax.net.ssl.trustStore 属性设置。

更多信息在[JSSE 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)中。

# sql - 从带有父数据的单个子记录（按日期排序）返回数据

> ID：11797335
> 
> 赞同：0
> 
> 时间：2012-08-03T14:06:27.117
> 
> 标签：sql, sql-server

作为一个 SQL 菜鸟，我假设有一个关于 1 到多个子记录的基本问题。

我有一个订单表和一个 Order_Status 子表。

```
Order table
ID    Order_Number    Status    Order_Date    ect

Order_Status table
StatusTo    StatusFrom    Order_ID    StatusChange_Date 
```

子表可以有许多实体用于单个父订单的状态更改。

如何将以下信息作为单个记录与该父表（p）的子表（os）的最新记录一起提取？( `p.Order_Number, p.Status, p.Order_Date, os.StatusTo, os.StatusChange_Date`)。

我需要知道，因为我担心最终的 os.statusto 与 p.status 不匹配。

提前致谢！

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:05:01.353

我相信这应该有效。假设您只关心那些有变化的订单，以及变化与记录的不同的地方（修改应该是微不足道的）。

```
WITH Most_Recent_Change (order_id, statusTo, changedAt, rownum) as 
     (SELECT order_id, statusTo, statusChange_date, 
             ROWNUMBER() OVER(PARTITION BY order_id
                              ORDER BY statusChange_date DESC)
      FROM Order_Status)
SELECT Order.order_number, Order.status, Order.order_date, 
       Most_Recent_Change.statusTo, Most_Recent_Change.changedAt
FROM Order
JOIN Most_Recent_Change 
ON Most_Recent_Change.order_id = Order.id
AND Most_Recent_Change.rownum = 1
AND Most_Recent_Change.statusTo <> Order.status 
```

（会有一个 SQLFiddle 示例，但目前表现得很奇怪）

请注意，您应该注意运行此操作的提交级别，否则您可能会从同时更新的行中得到误报。

其他注意事项：

*   不要使用保留字（如`ORDER`）作为标识符。一般只是麻烦
*   不要用它们的数据类型作为列的后缀，特别是如果这些类型将来可能会改变。我知道它`order_date`并没有以这种方式*严格*命名，但它非常接近。它可能应该类似于`orderedOn`（如果是严格的“太阳日”类型）或更好的`orderedAt`（时间戳，UTC 或时区）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:26:03.053

您可以加入获取最新订单状态的子查询

例如

```
SELECT p.Order_Number, p.Status, p.Order_Date, os.StatusTo, os.StatusChange_Date
FROM ORDER p
LEFT  JOIN (
          SELECT StatusTo,  Order_ID, MAX(StatusChange_Date) as StatusChange_Date
          FROM Order_Status
          GROUP BY StatusTo,    Order_ID
        )  os ON os.Order_ID= p.Order_ID 
```

# wpf - 任何想法如何实现 ComboBox 来表示分层数据？

> ID：11797336
> 
> 赞同：1
> 
> 时间：2012-08-03T14:06:30.413
> 
> 标签：wpf, combobox

有人在某处看到过这样的控制吗？我需要进行这样的控制来表示分层数据（它很可能应该是通用的，即数据绑定、模板支持）。
类似于 ComboBox 和 MenuItem 的组合。

![在此处输入图像描述](../Images/d3ed6aca2a926a6bbfb5533679dad699.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:15:33.057

我想我会用一些[分层](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate.aspx)数据模板和[弹出](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)类重新定义组合框项目模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:20:41.370

只需将 ComboBoxes 放在表单上并将 ItemsSource 绑定到顶级集合。

然后将下一个 ComboBox 的 DataContext 绑定到左侧框的 SelectedItem 上，并将其 ItemSource 绑定到项的集合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:10:44.243

你知道如何绑定到 SelectedItem 吗？

例如

Column1 公共字符串名称 公共列表 Column2s

因此，您使用 displaymemberpath = name 将第一个组合框绑定到 List

然后在第二个组合框上，您使用 Column2s 的项目源路径绑定到 Column1 selecteditem

诀窍是在列表中的列表中建立列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T08:03:32.517

好吧，我是通过继承自 ComboBox 的自定义控件、继承自 HeaderedItemsControl 的自定义 ComboBoxItem 并使用 HierarchicalDataTemplate 实现的。

# multithreading - 使用 Perl 下载和处理多个文件

> ID：11797337
> 
> 赞同：0
> 
> 时间：2012-08-03T14:06:33.720
> 
> 标签：multithreading, perl, ftp

我在 serverA 上有一个 perl 程序，该程序需要处理大约 500 个 DOM ip 的数据。DOM 文件位于 serverB 上。对于每个 DOM，我需要将 6 个文件下载到一些公式并将它们插入 MySQL DB。对于每个 DOM，下载文件大约需要 2 分钟。我需要在尽可能短的时间内完成这项工作，因为我必须大约每两个小时完成一次。

现在我正在使用多线程：

```
 my @threads;
for my $key (keys %dom)   ### Have all DOM ip
{
    print "El key es $key\n";
    my %data = %{$dom{$key}};
    my $t = threads->new(\&sub1, $postD, $preD, $key, $counter, %data);
    push(@threads,$t);

    if($counter == 40)
    {
        foreach (@threads) {
            my $num = $_->join;
            print "done with $num\n";
        }
        $counter = 1;
        @threads=();

    }
    $counter++;

}
foreach (@threads) {
    my $num = $_->join;
    print "done with $num\n";

 sub sub1
 {
my ($postD, $preD, $key, $num, %data) = @_;
my $status = GetRelevantFiles(substr($postD,0,8),substr($preD,0,8),%data) if (!defined($opt_f));

if(ref($status) eq 'ERROR')
{
    warnNotify($status->{'message'});
}
return $num;
 } 
```

有时不带所有文件。

我做得很好还是有另一种方法可以做得最好？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:26:01.047

[你可以考虑用Parallel::ForkManager](https://metacpan.org/module/Parallel%3a%3aForkManager)替换你的线程

至于不下载所有文件：

*   未下载的数量是否一致？
*   是否有任何错误信息？

# visual-studio-2010 - 必须使用至少一个测试用例创建测试运行

> ID：11797341
> 
> 赞同：1
> 
> 时间：2012-08-03T14:06:46.443
> 
> 标签：visual-studio-2010, tfs, microsoft-test-manager, tcm

尝试通过命令行 Microsoft 测试管理器实用程序 tcm.exe 自动运行测试。

我正在使用以下命令：

> tcm run /create /title:"自动化 UI 测试" /planid:27 /suiteid:721 /configid:10 /settingsname:"UI 测试设置 3" /testenvironment:"SanityEnvironmentSlemish" /collection:[CollectionUrl] /teamproject:Main

（我没有包括上面的集合 URL）。

但是，我收到以下错误：“必须使用至少一个测试用例创建测试运行”。

这对我来说有点神秘，因为我的测试套件已经有一个与之关联的测试用例，它与一个有序的测试列表相关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:03:40.917

它不起作用的原因不是因为测试运行没有与之关联的测试用例，而是因为有问题的测试用例具有“错误”状态（由于先前的测试运行失败），而不是“活动”状态。

要解决此问题，您可以选择通过 Microsoft 测试管理器 GUI 编辑状态，方法是转到“测试”选项卡，右键单击特定测试套件的测试用例，然后单击“将测试重置为活动”。

或者，如果您尝试使用 Microsoft 测试管理器命令行界面 (tcm.exe) 运行测试，您可以简单地使用“/include”命令行开关 - 它包括测试运行中的所有测试用例，无论状态。

# c# - 从类调用表单时的StackOverflow

> ID：11797343
> 
> 赞同：2
> 
> 时间：2012-08-03T14:06:51.030
> 
> 标签：c#, winforms, stack-overflow

`StackOverflowException`当我从班上打电话给我的表格时，我得到了一个。

在我`MainForm`的`Youtube.cs`课堂上，我使用这个，`Youtube yt = new Youtube();`. 然后在我的`Youtube`课堂上，我称之为`MainForm`using, `MainForm main = new MainForm();`。我相信这就是导致 StackOverflow 的原因，因为它似乎正在创建一个循环。

我需要从我的班级和班级访问`Youtube`班级，所以有什么办法可以解决这个问题而不会导致 StackOverflow？`MainForm``MainForm``Youtube`

这是从顶部开始的`MainForm`：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    Youtube yt = new Youtube(); 
```

这是从顶部开始的`Youtube.cs`：

```
class Youtube
{
    MainForm main = new MainForm(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:08:50.487

将表单对象传递给 YouTube 类，并在 YouTube 类中使用该对象。

```
public class Youtube
{
     MainForm m_MainForm = null;
     public Youtube(MainForm frm)
     {
            m_MainForm = frm;
     }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T14:09:27.477

是的，这是导致`StackOverFlowException`.

一种方法是`Youtube`通过构造函数将 Form 传递给您的类。

* * *

**例子：**

在`MainForm`课堂上：

```
Youtube yt = new Youtube(this)

public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
        yt = new Youtube(this);
    }

    Youtube yt = null; 
```

在`Youtube`课堂上：

```
public Youtube(MainForm mainform)
{
    // do something with mainform
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T14:10:06.710

您需要将您的类作为参数传递`MainForm`给您的类。`YouTube`

```
public class MainForm
{
   private Youtube youtube;
   public MainForm()
   {
       youtube = new Youtube(this);
   }
} 
```

然后在你的`Youtube`类中存储这个引用：

```
public class Youtube
{
   private MainForm form;

   public Youtube(MainForm form)
   {
       this.form = form;
   }
} 
```

# c - 如何在 C 语言中覆盖函数（系统调用）？

> ID：11797344
> 
> 赞同：1
> 
> 时间：2012-08-03T14:06:52.033
> 
> 标签：c

在许多脚本语言中，我们都有这样的编程方法：

首先，有一个名为 func 的函数：

```
void func()
{
} 
```

其次，我想在客户端调用此函数时记录一些信息，但我不想修改函数，所以我可以执行以下操作：

```
void (*pfunc)(void) = func;
void func()
{
    log("Someone call fund");
    pfunc();
} 
```

之后，任何调用基金的人都会调用我的“覆盖”函数。这在许多脚本语言中都可以。我可以用 C 语言做同样的事情吗？以及如何编码？

我想用这种方法在一些3party库中做一些工作，所以我必须做一些影响链接过程的事情，而不仅仅是编译过程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:16:06.040

在您的简单情况下，您将使用宏对其进行编码

```
#define func()                \
do {                          \
    log("Someone called func"); \
    func();                   \
} while(0) 
```

在宏的扩展中，宏不会递归地扩展。

对于更复杂的情况，您将实现一个函数和一个宏。在“.h”文件中，您可以输入：

```
void func_annotated(void);
#ifdef DEBUG
# define func() func_annotated()
// or if the function takes parameters
// # define func(...) func_annotated(__VA_ARGS__)
#endif 
```

在“.c”文件中，然后将实现

```
void func_annotated(void)
{
    log("Someone called func");
    (func)();
} 
```

在这里，额外的`()`arround`func`确保它始终使用真正的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:35:31.373

也许您正在寻找[库插入器](http://developers.sun.com/solaris/articles/lib_interposers.html)。您可以在文件中定义自己的函数，并使用该函数而不是系统调用调用要记录调用的程序。

例如，插入一些系统调用`ls`：

```
$ LD_PRELOAD=/your/own/functions/file.so ls -l 
```

它更适合您无法更改调用要记录的函数的程序代码（可能是因为它不可用）的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:21:04.807

在这种情况下，您不需要使用函数指针。您可以让函数`func`为您想要记录的任何内容获取参数。与覆盖相同，它不需要是函数指针（除非您计划稍后更改覆盖函数）。此外，在这种情况下，它将创建一个无限循环，因为函数指针指向该`func`函数。此外，我什至不确定是否允许`func`在声明函数之前将其用作函数指针。

我会尝试这样的事情，这会记录一个整数，但你可以用它来记录你想要的任何东西。

```
void func(int value)
{
    printf("%d\n", value);
    anotherFunc(value);
} 
```

where`anotherFunc()`是完全不同的功能。就像我之前说的，如果你想改变被调用的函数，`anotherFunc()`那么使用函数指针是有意义的，否则就不需要了。

# c++ - QLabel 不显示像素图

> ID：11797349
> 
> 赞同：0
> 
> 时间：2012-08-03T14:07:09.753
> 
> 标签：c++, qt

我无法在 Windows 7 64 上将a`png`或`jpeg`图像设置为 a 。`QLabel`

图像加载正常。Indeed`QPixmap::load`返回 true，这意味着加载成功，并`QPixmap::width()`返回正确大小的图像。

但是，当设置为 a 时，不会显示像素图`QLabel`。标签可见，文本显示，但没有图像。

即使我不认为它与缺少插件有关（图像加载正常）我也尝试在工作目录中添加图像格式目录，就像这里写的 [http://www.qtcentre.org/faq.php ?faq=qt_images](http://www.qtcentre.org/faq.php?faq=qt_images)

# git - 使用 Subtree 或 Submodule 一次推送到两个存储库

> ID：11797350
> 
> 赞同：1
> 
> 时间：2012-08-03T14:07:09.897
> 
> 标签：git

我们有两个 C# 项目……一个 Common 项目和一个 WEB UI 项目。它们都位于不同的存储库中。

公共项目引用了 UI 项目，当我们工作时，我们总是在公共项目中工作，甚至在其中对 UI 项目进行更改。

问题是，当我们拉取时，我们总是不得不从两个独立的项目中拉取，这可能会在本地构建开始失败时引起一些混乱，因为有人忘记从另一个存储库中拉取。

我们已经尝试过 Submodules 和 Subtree 合并策略。我们使用 Common 项目作为我们的主项目（我现在将其称为父项目）和 UI 项目作为子项目（我现在将其称为子项目）。然后我们只是将引用从 Parent 更改为 Child 以指向包含子树/子模块的子目录。不幸的是，当我们对子项目进行更改时，在执行 Commit 和 Push 时，使用上述两种策略中的任何一种都不会将它们推送回父项目。似乎 Subtree 和 Submodules 所做的唯一事情就是在您从父远程存储库中拉取时自动拉入本地子 UI 存储库。

有没有办法做到这一点，所以当我们从父母那里推送时，它也会从孩子那里推送变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:59:17.953

It looks like the best way to accomplish this is just to create a custom command in GIT to automate the process of pulling from two repositories with one command.

# php - 如何在 Wordpress 中使用 session_start？

> ID：11797351
> 
> 赞同：25
> 
> 时间：2012-08-03T14:07:09.850
> 
> 标签：php, wordpress, session

我正在创建一个双语网站，并决定使用`session_start`以下方法来确定页面的语言：

```
session_start();    
if(!isset($_SESSION['language'])){
    $_SESSION['language'] = 'English'; //default language
} 
```

问题在于它与 Wordpress 冲突，我得到以下信息：

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 已发送的标头（输出开始于 /home/neurosur/public_html/v2/wp-content/themes/default/header.php:8） /home/neurosur/public_html/v2/wp-content/themes/default/region.php 在第 13 行

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-02-22T09:42:17.500

**编辑**

Wordpress 在运行 header.php 文件之前发送标题信息。因此，在 header.php 中启动会话可能仍会与 wordpress 发送的标头信息冲突。在 init 上运行它可以避免这个问题。（*来自 jammypeach 的评论*）

在您的 functions.php 文件中编写以下代码：

```
function register_my_session()
{
  if( !session_id() )
  {
    session_start();
  }
}

add_action('init', 'register_my_session'); 
```

现在，如果您想在会话中设置数据，请这样做

```
$_SESSION['username'] = 'rafi'; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-03T14:10:44.670

我已将原始答案更改为来自@rafi 的正确答案（见下文）。

在您的 functions.php 文件中编写以下代码：

```
function register_my_session()
{
  if( !session_id() )
  {
    session_start();
  }
}

add_action('init', 'register_my_session'); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-09-07T09:56:00.937

[我在这里](http://silvermapleweb.com/using-the-php-session-in-wordpress/)找到了 Peter 的一篇有趣的文章。我在我的使用以下代码`functions.php`：

```
add_action('init', 'myStartSession', 1);
add_action('wp_logout', 'myEndSession');
add_action('wp_login', 'myEndSession');

function myStartSession() {
    if(!session_id()) {
        session_start();
    }
}

function myEndSession() {
    session_destroy ();
} 
```

当用户注销然后使用不同的帐户再次登录时，这会破坏旧会话。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-06T10:12:22.387

根据[此答案](https://stackoverflow.com/a/18542272/2363481)和此处给出的答案，最好使用以下代码片段：

对于**PHP >= 5.4.0、PHP 7**的版本：

```
function register_my_session() {
    if (session_status() == PHP_SESSION_NONE) {
        session_start();
    }
}
add_action('init', 'register_my_session'); 
```

参考：[http ://www.php.net/manual/en/function.session-status.php](http://www.php.net/manual/en/function.session-status.php)

* * *

对于**PHP < 5.4.0**的版本：

```
function register_my_session() {
    if(session_id() == '') {
        session_start();
    }
}
add_action('init', 'register_my_session'); 
```

参考：[https ://www.php.net/manual/en/function.session-id.php](https://www.php.net/manual/en/function.session-id.php)

* * *

我不想拿任何学分，我只是觉得分享这些信息会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-16T08:56:11.573

适用于 PHP 7.4 版

```
function register_my_session() {

    if (session_status() === PHP_SESSION_NONE && session_status() !== PHP_SESSION_ACTIVE) {
        @session_start();
    } 
} 
add_action('init', 'register_my_session'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-30T12:05:16.597

```
add_action('init', 'customSessionStart', 1);
add_action('wp_logout', 'customSessionDestroy');
add_action('wp_login', 'customSessionDestroy');
function customSessionStart()
{
    if (!session_id()) {
        session_start();
    }
}
function customSessionDestroy()
{
    session_destroy();
} 
```

当您使用此代码时，您可能会在 WP 站点健康状态中遇到关键问题。错误说；

> PHP 会话是由`session_start()`函数调用创建的。这会干扰 REST API 和环回请求。`session_write_close()`在发出任何 HTTP 请求之前，应关闭会话。

为了抑制这个错误，你可以在你想在 WP 中开始一个会话时进行这个修改；

```
session_start([
    'read_and_close' => true,
]); 
```

# c# - 将数据从 DataTable 导出到 Excel 文件

> ID：11797352
> 
> 赞同：1
> 
> 时间：2012-08-03T14:07:10.393
> 
> 标签：c#, asp.net, excel, datatable

我有 DataTable 对象。如何将其导出到 XLS 文件中？我试图通过 DataGrid 渲染它

```
DataGrid dgGrid = new DataGrid();
dgGrid.DataSource = dt;
dgGrid.DataBind();
dgGrid.RenderControl(hw); 
```

但文件非常大并且`OutOfMemoryException`出现。

我可以使用[http://epplus.codeplex.com/](http://epplus.codeplex.com/)。我需要 C# 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:14:14.637

有许多选项，其中之一是[Access OLE DB Provider](http://msdn.microsoft.com/en-us/library/windows/desktop/ms712975%28v=vs.85%29.aspx)，它也根据 DataTables 运行。

如果您想对文档提供更细粒度的支持，我建议您使用[Open XML SDK 2.0](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124)，其中只有 .xmlx。

对于原始数据，我认为 Access OLE DB（也称为 ACE 提供程序）是最佳选择，因为它可以实现类似数据库的体验。Open XML 假定您具备相当好的 XML 知识并且愿意进行更多尝试。另一方面，您可以应用格式、添加公式和其他高级功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:37:10.643

好的，在这里找到解决方案：http: [//bytesofcode.hubpages.com/hub/Export-DataSet-and-DataTable-to-Excel-2007-in-C](http://bytesofcode.hubpages.com/hub/Export-DataSet-and-DataTable-to-Excel-2007-in-C)

只需下载 epplus 库并调用方法：

```
private void GenerateExcel(DataTable dataToExcel, string excelSheetName)
        {
            string fileName = "ByteOfCode";
            string currentDirectorypath = Environment.CurrentDirectory;
            string finalFileNameWithPath = string.Empty;

            fileName = string.Format("{0}_{1}", fileName, DateTime.Now.ToString("dd-MM-yyyy"));
            finalFileNameWithPath = string.Format("{0}\\{1}.xlsx", currentDirectorypath, fileName);

            //Delete existing file with same file name.
            if (File.Exists(finalFileNameWithPath))
                File.Delete(finalFileNameWithPath);

            var newFile = new FileInfo(finalFileNameWithPath);

            //Step 1 : Create object of ExcelPackage class and pass file path to constructor.
            using (var package = new ExcelPackage(newFile))
            {
                //Step 2 : Add a new worksheet to ExcelPackage object and give a suitable name
                ExcelWorksheet worksheet = package.Workbook.Worksheets.Add(excelSheetName);

                //Step 3 : Start loading datatable form A1 cell of worksheet.
                worksheet.Cells["A1"].LoadFromDataTable(dataToExcel, true, TableStyles.None);

                //Step 4 : (Optional) Set the file properties like title, author and subject
                package.Workbook.Properties.Title = @"This code is part of tutorials available at http://bytesofcode.hubpages.com";
                package.Workbook.Properties.Author = "Bytes Of Code";
                package.Workbook.Properties.Subject = @"Register here for more http://hubpages.com/_bytes/user/new/";

                //Step 5 : Save all changes to ExcelPackage object which will create Excel 2007 file.
                package.Save();

                MessageBox.Show(string.Format("File name '{0}' generated successfully.", fileName)
                    , "File generated successfully!", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:11:44.480

首先，谷歌是你最好的朋友。你也可以在这个网站上搜索。

一些解决方案：

*   您可以使用 SQL 编写一个 excel 文件。
*   您可以使用对 Microsoft Office 库的引用来创建一个 excel 文件
*   您可以编写一个 XML 文件。

# c# - 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。我的服务器未找到或无法访问

> ID：11797353
> 
> 赞同：1
> 
> 时间：2012-08-03T14:07:14.653
> 
> 标签：c#, asp.net, iis, sql-server-2008-r2

我知道这个问题已经在论坛上，但我的情况有点特殊，我有一个网站，在 web-config 中有两个连接字符串，如下所示：

```
<add name = "myConnString" 
     connectionString = "user id = user1, password = user1; Persist Security Info = False; Database = clarins_abs; Server = teck2012; Connect Timeout = 60; Trusted_Connection = False;" 
     providerName = "System.Data. SqlClient "/>

<add name="ApplicationServices" 
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" 
     providerName="System.Data.SqlClient" /> 
```

当我将站点放在本地 iis 服务器上时，一切正常，但是当我将站点放在另一台服务器上时，我收到以下错误消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到服务器 gold 不可用。验证实例名称是否正常，并且 SQL Server 已配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）。

我有 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:11:38.893

在您的第二个字符串中，.\ 表示 SQL 服务器实例位于本地计算机上。您的本地 iis 服务器可能有此实例，而其他服务器没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:10:14.200

在开始菜单中键入“SQL Server 配置管理器”（win vista / win 7）并检查 TCP/IP 协议是否已启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:19:08.047

我们必须为此检查以下内容

1.检查sqlserver配置管理器设置中的Tcp/IP设置。[如果是禁用，请确保我们必须启用 TCP/IP 的状态](http://forums.asp.net/t/1827197.aspx/1?a%20network%20related%20or%20instance%20specific%20error%20occurred%20while%20establishing%20a%20connection%20to%20sql%20server)

2.在火灾设置中添加端口到防火墙异常。sql端口的详细信息：

名称：SQL

端口号：1433

协议：选择 TCP

# sql - 与嵌套选择混淆性能增益 * 不存在

> ID：11797357
> 
> 赞同：4
> 
> 时间：2012-08-03T14:07:50.940
> 
> 标签：sql, performance, oracle

我要查询的两个表各有约 1.5 亿行。

以下语句我在 45 分钟没有返回后终止，所以我不知道它会运行多长时间：

```
select * from Cats cat  
where not exists( select dog.foo,dog.bar from Dogs dog
                  where cat.foo = dog.foo   
                  and cat.bar = dog.bar); 
```

但是此查询在大约 3 分钟内执行：

```
select * from Cats outside  
   where not exists(select * from Cats cat  
                     where exists( select dog.foo,dog.bar from Dogs dog
                      where cat.foo = dog.foo   
                      and cat.bar = dog.bar))); 
```

我的问题是我看到这种性能提升的幕后发生了什么？

返回相同结果集的原因：

第一个查询（慢）状态给出基于 Cats 表不存在的所有元素。

第二个查询（快速）状态给出了确实存在的 Cats 子集中不存在的所有元素。

我期望以下查询：

```
select dog.foo,dog.bar from Dogs dog
                          where cat.foo = dog.foo   
                          and cat.bar = dog.bar 
```

返回 [A,B,C]

这对这两个功能来说是共同的。

我的猫桌有以下内容：[A,B,C,D,E]

我期望以下查询：

```
 select * from Cats cat  
                     where exists 
```

返回 [A,B,C] 和最后一块：

```
select * from Cats outside  
       where not exists 
```

返回 [D,E]

**更新**

设置符号以数学方式证明我的主张（如果我使用了错误的符号，请纠正我）：

```
∀ Cat (Ǝ cat ≠ Ǝdog) 
```

对于 Cat 中的所有元素，返回包含 cat 中不等于 dog 中的元素的每个元素的集合

```
∀ Cat (Ǝ cat = Ǝdog) 
```

对于 Cat 中的所有元素，返回包含 cat 中与 dog 中的元素相等的每个元素的集合

```
∀ Cat (Ǝ innerCat ≠ Ǝcat) 
```

对于 Cat 中的所有元素，返回包含不等于 cat 中元素的内部 cat 的每个元素的集合

**第二次更新**

我看到我的数学与我的 SQL 不一致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:24:02.747

显然，NOT IN 和 NOT EXISTS 是数据引擎优化的问题。从技术上讲，这些被称为反连接（区别于等连接、半连接、非等连接等）。

当连接难以优化时，引擎会使用嵌套循环连接。这些通常是性能最差的类型（尽管在 SQL Server 执行计划中，这些通常看起来相同，因为 SQL Server 在执行计划中调用索引查找“嵌套循环”）。

这两个查询有什么区别？第一个只有一个 NOT EXISTS，所以它可能在做一些低效的事情。第二个是在最里面的子查询上执行 EXISTS。这首先得到优化，基本上作为一个连接。如果键有索引一切都很好。SQL Server 还可以为这些选择基于散列或基于合并的算法。

第二个版本中的“不存在”是基于同一张表的。这可能会给 SQL Server 更多的优化空间。

最后，第二个版本可能会大大减少数据集。如果是这样，即使是外部的嵌套循环连接也可能会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:28:48.580

第二个查询在执行时更加优化，这就是为什么：

`Cats`您将外部查询的表别名为`outside`，但您没有`outside`在`where not exists`. 因此，SQL 可以执行以下操作：

*   找到任何一只猫在哪里`cat.foo = dog.foo and cat.bar = dog.bar`（从你最里面的查询）
*   这意味着*确实*存在一只猫可以满足`where not exists` *所有猫的外在`outside`*
*   因此该`where not exists`子句`false`适用于所有行`outside`
*   因此查询的结果为空

您的第一个查询必须为表中的每只猫重新执行嵌套查询，因此速度较慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:22:45.107

您的问题的答案是检查执行计划。

作为旁注，您应该尝试此等效查询（另请参阅[https://stackoverflow.com/a/1069467/44522](https://stackoverflow.com/a/1069467/44522)）：

```
SELECT * FROM Cats cat LEFT OUTER JOIN Dogs dog 
    ON cat.foo = dog.foo and cat.bar = dog.bar
WHERE dog.foo IS NULL and dog.bar IS NULL 
```

我敢打赌它会执行得更快（假设你有正确的索引）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:58:17.010

我通过测试发现这是在初始问题中执行查询的最有效方法：

```
Select cat.foo,cat.bar from cats cat

MINUS

Select dog.foo,dog.bar from dogs dog 
```

这是有效的，因为我的所有列都不能为空。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T14:17:24.993

**它们是具有不同结果的不同查询**。要使第二次返回与第一次相同，它需要类似于...

```
 select * from cats outside   
   where not exists(select * from Cats cat   
                     where exists( select dog.foo,dog.bar from Dogs dog 
                      where cat.foo = dog.foo    
                      and cat.bar = dog.bar)
                      and outside.foo = cat.foo
                      and outside.bar=cat.bar
                      ) 
```

# java - 已删除的项目仍显示在结果页面上。

> ID：11797360
> 
> 赞同：0
> 
> 时间：2012-08-03T14:07:55.437
> 
> 标签：java, android

我可以毫无问题地编辑或删除单个项目，但是当我在编辑项目后单击删除按钮时，即使它已从数据库中删除，该项目仍显示在 ListView 上。

ListViewActivity.java

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_requests);

    requestsList = new ArrayList<HashMap<String, String>>();

    new LoadAllRequests().execute();

    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String request_id = ((TextView) view.findViewById(R.id.request_id)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    ViewRequestActivity.class);
            // sending rid to next activity
            in.putExtra(TAG_ID, request_id);

            // starting new activity and expecting some response back
            startActivityForResult(in, 55);
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:43:00.943

您必须再次将适配器签名到列表视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:24:03.970

您应该使用[invalidateViews而不是关闭并重新打开活动](http://developer.android.com/reference/android/widget/AbsListView.html#invalidateViews%28%29)

```
yourListView.invalidateViews(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:03:30.077

您也可以尝试刷新活动。我相信它是 ListViewActivity.restart();

# caching - 如何从浏览器缓存中读取文件？

> ID：11797363
> 
> 赞同：1
> 
> 时间：2012-08-03T14:08:09.743
> 
> 标签：caching, cookies, gif

我自己制作了一个包含更多（隐藏）信息的 GIF 文件，然后只有图片数据。像这样：

```
<?php
// set variabelen
    $naam = "gebruikersinformatie"; 
    $info['age'] = 27;
    $info['number'] = '1234.56.789';
    $info['name'] = 'Arie Noniem';
    $info['unique_hash'] = base64_encode(implode("|", array($_SERVER['HTTP_USER_AGENT'],$_SERVER['HTTP_ACCEPT'],$_SERVER['REMOTE_ADDR'],$_SERVER['REMOTE_PORT'],$_SERVER['HTTP_ACCEPT_LANGUAGE'])));

    // build the information
    $info = base64_encode(http_build_query($info));

    // build the image
    header('Content-type: image/gif');  
    echo base64_decode("R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\n".$info);
?>- 
```

现在，我想检查文件是否已经在用户的缓存中。如果没有：制作一个新的（使用上面的代码）。如果在缓存中：使用 PHP 读取该 gif.gif 文件，因为其中存储了更多信息。

问题：如何检查文件是否在缓存中？[如何让浏览器缓存图像，用php？](https://stackoverflow.com/questions/1385964/how-to-get-the-browser-to-cache-images-with-php)不能正常工作

以及如何读取缓存文件？那么 PHP 从缓存文件中获取真实的内容呢？原因：避免 EU-cookie-law

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:32:17.420

恐怕你不会回避欧盟 Cookie 法。

尽管它通常被称为 cookie 法，但它是一项隐私指令，其原则适用于从用户设备放置、保存或读取信息的任何技术。因此，合规性的必要性包括例如 Flash 文件（本地存储的对象）、跟踪像素（通常用于跟踪电子邮件打开的不可见的一个像素图像）和其他东西。

[仅供参考，此答案基于我们将ukcookieslaw.co.uk](http://ukcookieslaw.co.uk)放在一起专门处理英国执行欧盟指令的经验（请注意您的编码中的德语 :-)。

假设您的解决方案至少侵犯了隐私，并且提供了必要的功能（例如维护登录），那么您可能会认为您的解决方案实际上不太合规，因为会话 cookie 将（通常）在用户退出浏览器时的最新时间。

您的更加模糊、难以检查、故意隐藏（我很欣赏没有恶意）的有效负载可以，并且鉴于大多数人每次退出时都不会清空缓存，因此会停留更长时间。事实上，在某种程度上，你依赖它。

如果没有详细信息，就无法查看，但可能是第三方更容易获得信息，即是否有可能由网络中的中介缓存图像，您必须加以保护？

您仍然必须描述您对个人数据的使用，并依赖默示同意（或明确同意）将数据放置在用户的设备上以符合您的网站要求。问题是任何同意都必须是知情同意，而且从表面上看，通知用户离你的想法最远。

我认为你需要一个更好的理由来为你的工程努力:-)

亲切的问候，

菲利普

# c++ - C++ 连接函数错误 - 参数无效

> ID：11797365
> 
> 赞同：1
> 
> 时间：2012-08-03T14:08:12.577
> 
> 标签：c++, sockets, arguments, connect

我正在尝试制作一个简单的套接字客户端（使用 debian 6 和 g++ 编译器），当我调用“connect”函数时，它返回错误代码 22 - Invalid argument。请告诉我，我做错了什么。

我已经阅读了这个函数的手册页，它说 3 个参数必须如下：int、struct sockaddr* 和 socklen_t。

我的代码是：

```
 int                   serverPort;
  u_long                serverHost;
  struct sockaddr_in    serverAddress;
  socklen_t             serverAddressLength;
  int                   clientSocket;

  serverPort = 44444;
  serverHost = inet_addr ( "88.198.237.65" );
  serverAddress.sin_family = AF_INET;
  serverAddress.sin_port =  htons ( serverPort );
  serverAddress.sin_addr.s_addr = htons ( serverHost );
  serverAddressLength = sizeof ( serverAddress );

  clientSocket = socket ( AF_INET , SOCK_STREAM , 0 );

  connect ( clientSocket , (sockaddr*)&serverAddress , serverAddressLength ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:11:23.483

```
 serverAddress.sin_addr.s_addr = htons ( serverHost ); 
```

IPv4 地址很长，而不是很短，所以`htons`就出来了。无论如何，数据已经按网络字节顺序排列，因此不需要转换。

> **inet_addr** () 函数将Internet 主机地址 cp 从 IPv4 数字和点表示法转换为网络字节顺序的二进制数据。

还：

```
 char                  serverHost; 
```

它应该如何适应`char`？

# string - 将字符串转换为句子大小写，但保留首字母缩写词不变

> ID：11797376
> 
> 赞同：1
> 
> 时间：2012-08-03T14:08:44.403
> 
> 标签：string

这不是一个特定于语言的问题。

我有一个全部大写的字符串。这个字符串来自一个单独的来源，并且由于某种原因总是全部大写。

我的任务是让字符串对读者更友好，所以我决定使用简单的正则表达式在它上面添加一个句子大小写转换器方法。

问题是，这个字符串中使用了很多首字母缩略词，我想让它们不受影响。国家代码（US、CA、JP、FR 等）或机场代码（LAX、LGA），有时还有许多其他代码。

现在我猜我首先需要一个数据库或其他东西中的首字母缩写词列表，所有可能的机场代码、国家代码和常用首字母缩写词列表，如 ETA、COD 等......

一旦我创建了这个数据库，我怎样才能将它应用到有问题的字符串？我怎样才能防止“我们”这个词被改为美国，反之亦然？我基本上想知道的是，我如何获取数据库中的内容并将所有必要的更改应用于字符串？

请记住，我得到的原始字符串全部大写，所以没有办法区分。

任何想法将不胜感激！

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T15:46:25.860

可以使用[ActiveSupport::Inflector](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)完成类似的操作，它提供了[titleize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-titleize)方法（它为[String.titleize](http://api.rubyonrails.org/classes/String.html#method-i-titleize)工作）。

首先，在初始化程序中定义您自己的[变形。](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)

```
# config/initializers/inflections.rb
ActiveSupport::Inflector.inflections do |inflect|
  inflect.acronym 'US'
end 
```

重新启动您的应用程序以获取更改。现在`titleize`知道如何处理“美国”了。启动 Rails 控制台来检查它：

```
> "us".titleize
=> "US" 
```

接下来，查看`titleize`. 一旦你理解了它，在初始化器中重新打开 Inflector 类并定义你自己的方法，它不会将每个单词的第一个字母大写。称之为漂亮的东西，比如`decapitalize`.

```
module ActiveSupport::Inflector
  def decapitalize(word)
    humanize(underscore(word)) # you may enhance this a bit
  end
end

class String
  def decapitalize
    ActiveSupport::Inflector.decapitalize(self)
  end
end 
```

### 警告和限制

您可能需要调整代码，但我认为它很接近。

以下是该解决方案无法很好处理的一些句子：

```
> "US STATES VISITED BY US".titleize
=> "US States Visited By US"
> "COLUMBIA (CO) EXPORTS ARE PROCESSED BY ACME BUILDING CO.".decapitalize
=> "Columbia (CO) exports are processed by acme building CO." 
```

# java - 如何在参数中传递一个类并使用它的方法

> ID：11797382
> 
> 赞同：0
> 
> 时间：2012-08-03T14:08:54.340
> 
> 标签：java, class, methods, parameter-passing

正如标题所假设的那样，我如何在 Java 中做到这一点？我想做的是这样的

首先有一堂课

```
public class MyFirstModel() {

    //standard constructor
    public MyFirstModel(){
            //some lines of codes
    }

    //A method
    public String getvalue() {

            //do something then
            return result;
    }
} 
```

第二个模型（类）

```
public class MySecondModel() {

    //standard constructor
    public MySecondModel(){
            //some lines of codes
    }

    //A method
    public String getvalue() {

            //do something then
            return result;
    }
} 
```

拥有这两个样本模型，我想根据动作传递一个类。假设有两个按钮，第一个按钮用于模型，第二个按钮用于第二个模型。要传递给的第三类：

```
 FinalClass fclass = new FinalClass(<class here>);  <-- how do i pass the class here 
```

在这里，我如何通过课程？在 FinalClass 上，它的构造函数是什么？以及如何访问已传递类的方法？

我希望你们明白我的意思。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:17:49.047

您不想让两个模型都实现一个接口吗？

MyModel.java：

```
public interface MyModel {
    public String getValue();
} 
```

MyFirstModel.java：

```
public class MyFirstModel implements MyModel {
    public String getValue() {
        // stuff
    }
} 
```

MySecondModel.java：

```
public class MySecondModel implements MyModel {
    public String getValue() {
        // stuff
    }
} 
```

调用类.java：

```
public class CallingClass {
    private MyModel model = null;
    public CallingClass(MyModel model) {
        this.model = model;
    }
} 
```

然后，您可以根据需要构建 MyModel 并将其传递给 CallingClass。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:18:22.230

您可以使用接口创建匿名对象：

```
public interface FinalClass {
   // Method definitions
}

public class MyFirstModel() implements FinalClass {
    //...
}

public class MySecondModel() implements FinalClass {
    //...
} 
```

采用：

```
FinalClass fclass = new MyFirstModel();
// or
FinalClass fclass = new MySecondModel(); 
```

# python - 访问嵌套字典列表中的值

> ID：11797383
> 
> 赞同：2
> 
> 时间：2012-08-03T14:08:55.870
> 
> 标签：python, list, dictionary

我的字典是这样的：

```
docScores = {0:[{u'word':2.3},{u'the':8.7},{u'if':4.1},{u'Car':1.7}],
             1:[{u'friend':1.2},{u'a':5.2},{u'you':3.8},{u'person':0.8}],
             ...
             29:[{u'yard':1.5},{u'gardening':2.8},{u'paint':3.7},{u'brush':1.6}]
            } 
```

我想对每个列表的每个内部字典的值求和并将其存储在一个新字典中，新字典的键值为`{0:2.3+8.7+4.1+1.7, 1:1.2+5.2+3.8+0.8, ... etc}`ie

```
for x in docScores[0]: #{0:
    for x in docScores[0][0].values(): #{,2.3}.
        sum = sum+x #where sum = 0 before loop
        docSum[0] = sum
    repeat this loop for every document 
```

我尝试过的任何变化都会给我带来意想不到的输出。谁能给我正确的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:22:05.087

这个 dict 理解有效：

```
docScores = {0:[{u'word':2.3},{u'the':8.7},{u'if':4.1},{u'Car':1.7}],
             1:[{u'friend':1.2},{u'a':5.2},{u'you':3.8},{u'person':0.8}],
             29:[{u'yard':1.5},{u'gardening':2.8},{u'paint':3.7},{u'brush':1.6}]
            }

sum_d={k:sum(d.values()[0] for d in v) for k,v in docScores.items()}

print sum_d 
```

印刷：

```
{0: 16.8, 1: 11.0, 29: 9.6} 
```

但是，更改数据结构可能更容易。你可以有一个字典：

```
>>> NdocScores = {0:{u'word':2.3,u'the':8.7,u'if':4.1,u'Car':1.7},
...              1:{u'friend':1.2,u'a':5.2,u'you':3.8,u'person':0.8},
...              29:{u'yard':1.5,u'gardening':2.8,u'paint':3.7,u'brush':1.6}
...             } 
```

这允许直接访问每个文档数据：

```
>>> NdocScores[0]
{u'Car': 1.7, u'the': 8.7, u'word': 2.3, u'if': 4.1}
>>> NdocScores[0][u'Car']
1.7
>>> sum(NdocScores[1].values())
11.0

>>> NdocScores[29]
{u'gardening': 2.8, u'yard': 1.5, u'brush': 1.6, u'paint': 3.7} 
```

或者，只有一个字典列表，列表中的位置对应于文档索引：

```
>>> lofdicts=[v for k,v in NdocScores.items()]
>>> lofdicts
[{u'Car': 1.7, u'the': 8.7, u'word': 2.3, u'if': 4.1}, {u'a': 5.2, u'person': 0.8, u'you': 3.8, u'friend': 1.2}, {u'gardening': 2.8, u'yard': 1.5, u'brush': 1.6, u'paint': 3.7}]
>>> lofdicts[0]
{u'Car': 1.7, u'the': 8.7, u'word': 2.3, u'if': 4.1}
>>> sum(lofdicts[1].values())
11.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:14:50.173

```
new_dict={}

docScores = {0:[{u'word':2.3},{u'the':8.7},{u'if':4.1},{u'Car':1.7}],
             1:[{u'friend':1.2},{u'a':5.2},{u'you':3.8},{u'person':0.8}],
             29:[{u'yard':1.5},{u'gardening':2.8},{u'paint':3.7},{u'brush':1.6}]
            }

for k,v in docScores.items():
    new_dict[k]=sum( sum(d.values()) for d in v )

print (new_dict) #{0: 16.8, 1: 11.0, 29: 9.6} 
```

正如其他人所提到的，您*可以*将其变成字典理解（python 2.7+）：

```
new_dict = {k : sum( sum(d.values()) for d in v ) for k,v in docScores.items() } 
```

但在这一点上，我认为理解变得非常难以理解（因此我不会这样做）。

另外，有人可能应该指出，如果你所有的字典键都是从 0 到 29 的连续整数，你可能不应该使用字典来存储这些数据——也许一个列表会更合适......

**编辑**

使用列表：

```
new_list = [sum( sum(d.values()) for d in v ) for _,v in sorted(docScores.items()) ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:17:02.073

```
>>> doc_scores = {
        0: [{u'word': 2.3}, {u'the': 8.7}, {u'if': 4.1}, {u'Car': 1.7}],
        1: [{u'friend': 1.2}, {u'a': 5.2}, {u'you': 3.8}, {u'person': 0.8}],
        29: [{u'yard': 1.5}, {u'gardening': 2.8}, {u'paint': 3.7}, {u'brush': 1.6}]
}
>>> dict((k, sum(n for d in v for n in d.itervalues())) 
         for k, v in doc_scores.iteritems())
{0: 16.8, 1: 11.0, 29: 9.6} 
```

如果您在列表中的每个字典中只有一个值，则可以缩短此值：

```
>>> dict((k, sum(d.values()[0] for d in v)) for k, v in doc_scores.iteritems())
{0: 16.8, 1: 11.0, 29: 9.6} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T14:20:36.957

以及更多的在线解决）

```
sum(reduce(lambda x, y: x+y, [d.values() for d in v for _,v in docScores.iteritems()])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:26:58.960

```
docScores = {0:[{u'word':2.3},{u'the':8.7},{u'if':4.1},{u'Car':1.7}],
             1:[{u'friend':1.2},{u'a':5.2},{u'you':3.8},{u'person':0.8}],
             2:[{u'yard':1.5},{u'gardening':2.8},{u'paint':3.7},{u'brush':1.6}]
            }

result = dict(enumerate(sum (sum(word.values()) for word in  word_list[1]) for word_list in sorted(docScores.items())  ) ) 
```

# java - 在一个 JPG 文件中导出多个图像

> ID：11797386
> 
> 赞同：1
> 
> 时间：2012-08-03T14:09:11.533
> 
> 标签：java, jsp, bytearray, jfreechart

我有一个允许用户导出一些数据的 JSP。您可以选择不同的格式（excel、csv）。此外，用excel导出与数据对应的图表（饼图、折线图和条形图）用户希望将图表导出为唯一的jpg文件。

我所做的是（全部在 Java 中）：

*   使用 JFreeChart 生成图表
*   使用以下命令将图表转换为 JPG 图像：ChartUtilities.saveChartAsJPEG
*   然后我检索图像字节：

编码：

```
InputStream is = null;
try {
   is = new FileInputStream(image);
}catch (FileNotFoundException e) {
   e.printStackTrace();
}
byte[] bytes = null;
try {
   bytes = IOUtils.toByteArray(is);
}catch (IOException e) {
   e.printStackTrace();
} 
```

这很好用，我有每个图表的字节。然后我将每个图表的字节放入一个字节数组中：

```
byte[] imageBytes = getImageAsBytes(chart1,chart2,chart3);
res.setContentType("image/jpg");
res.setHeader("Content-Disposition", "attachment; filename=" + "MyCharts" + ".jpg");
res.setContentLength(imageBytes.length);
try{
    OutputStream output = res.getOutputStream();
    output.write(imageBytes);
    output.flush();   
    output.close();  
} catch (IOException e) {
    e.printStackTrace();
} 
```

**问题是**：当我打开 JPG 时，**只显示一张图像**。我测试了每个图表的导出并且效果很好，但是当我放置所有图表字节时，只显示一个图像（始终是 imageBytes 数组中的第一个）

我不知道我是否必须创建某种画布，或者无法通过这种方式将 3 张或更多图像放在同一个 JPG 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:12:41.297

JPG 文件格式不会让您逃脱惩罚。我的建议是创建一个`BufferedImage`具有足够大的画布以包含所有三幅图像的新画布，以交错的 Y 轴偏移量将三幅图像渲染到其上，然后将其转储为 JPG 格式`ImageIO`。

# javascript - 如何通过 $.getJSON 访问二级 JSON 对象

> ID：11797390
> 
> 赞同：0
> 
> 时间：2012-08-03T14:09:22.873
> 
> 标签：javascript, jquery, json

大家好，请看一下在一个看起来像这样的对象内无法达到第二级的问题：

```
{
    "results": [{
        "title": "TEAM",
        "subtitle": "athletes",
        "offset": 0,
        "icon": "info",
        "relevance": 1,
        "link": {
            "title": "HOME",
            "url": "http://www.test.com",
            "id": "23458"
        }]
} 
```

这是我的代码：

```
var theJson = {
    init: function() {
        this.url = 'http://test.com/js?jsonfeed=123123';
        this.fetch();
    },

    fetch: function() {
        $.getJSON(this.url, function( data ){
            var obj = $.map(data.results, function( newObj ){
                return {
                    title: newObj .title,
                    icon: newObj.icon,
                    topic: newObj.link.id, //??
                    topic: newObj["link"].id //??
                    topic: newObj[1].id //??
                };
            });
        });

    }
};

theJson.init(); 
```

我的问题是如何到达结果对象内链接数组中的 id var？谢谢大家摇滚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:14:55.070

你第一次和第二次做对了：

```
newObj.link.id
newObj["link"].id 
```

有两种正确的方法可以在链接下获取 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T12:04:27.467

您可以通过索引轻松访问它，如下所示：

`newObj["link"][0]`

# c# - C# 中日期时间选择器上的 ValueChanged 事件

> ID：11797391
> 
> 赞同：1
> 
> 时间：2012-08-03T14:09:24.167
> 
> 标签：c#, winforms, datetimepicker

我在 C# 中使用 DateTimePicker，但 ValueChanged 事件有一点问题。我在 DateTimePicker 上将 CheckBox 可见性设置为 true。

当我使用鼠标设置 CheckBox 时，ValueChanged 事件会触发。伟大的。

但是，当我在代码中设置 CheckBox（见下文）时，ValueChanged 事件不会触发！？

```
dateTimePicker1.Checked = true; 
```

有任何想法吗？

我正在使用 C# 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:07:45.073

我认为 MS Developer 遗漏了一般事件`ValueChanged`，但看起来你正在寻找`CheckValueChanged`事件。

之前有类似的帖子讨论，一种可能的*解决方案*是创建继承控件来处理 CheckValueChanged 事件，您可以参考[DateTimePicker 复选框事件](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/27dd3141-5dfb-439e-8e30-e051a019303a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:26:08.060

仅当您设置了该属性`ValueChanged`时才会触发该事件。`Value`您用鼠标设置`Value`属性，因此`ValueChanged`事件将被触发。如果设置`Checked`属性，`ValueChanged`则不会触发事件，因为`Value`未设置属性。

# c# - 检查可能为空的变量的长度时出错

> ID：11797392
> 
> 赞同：0
> 
> 时间：2012-08-03T14:09:25.760
> 
> 标签：c#

我正在使用以下内容：

```
if (Model.Notes.Length == null || Model.Notes.Length < 170) { 
```

但是当 Notes 值为 null 时会出现错误。我认为这将允许它工作，但我仍然得到错误。有人可以告诉我即使 Model.Notes 为空，我该如何完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:10:40.157

在访问任何属性之前添加一个空检查。

```
if (Model.Notes!=null)
{

  if(Model.Notes.Length == null || Model.Notes.Length < 170)
  {
      //do the same awesome thing..
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:10:45.477

你必须这样做：

```
if ((Model.Notes != null && (Model.Notes.Length == null || Model.Notes.Length < 170)) 
```

所以它会首先检查笔记是否为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:12:09.283

关于什么：

```
if (Model.Notes != null && (Model.Notes.Length == null || Model.Notes.Length < 170)) { 
```

# c++ - 取消在 Visual C++ 中不起作用的函数

> ID：11797398
> 
> 赞同：1
> 
> 时间：2012-08-03T14:09:33.517
> 
> 标签：c++, c, visual-c++, cuda, thrust

> **可能重复：**
> [C++ 类及其成员函数的名称修改？](https://stackoverflow.com/questions/576767/name-mangling-of-c-classes-and-its-member-functions)

我创建了一个 Visual C++ dll。它正在工作，我可以通过 c# 中的这个 dll 从 cuda 调用我的 Thrust 方法。

唯一的问题是，我无法解开函数名称。我想要正常的名称，所以我不需要使用符合约定的入口点。

这是我的代码。这是我的标题

```
//ThrustCH.h
    #pragma once
    enter code here__declspec(dllexport) class ThrustFuncs 
    {
        __declspec(dllexport) static int maxValueThrust(int *data, int N);
        __declspec(dllexport) static double maxValueThrust(double *data, int N);
        __declspec(dllexport) static int* sort(int* data, int N);
        __declspec(dllexport) static double* sort(double* data, int N);
        __declspec(dllexport) static int simple(int N);
    }; 
```

这是我的cp

```
// thrustDLL.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include "thrustH.h"
#include "thrustCH.h"

extern "C" {
    __declspec(dllexport) int ThrustFuncs::maxValueThrust(int *data, int N){
        return thrustH::maxValue(data,N);
    }

    __declspec(dllexport) double ThrustFuncs::maxValueThrust(double *data, int N){
        return thrustH::maxValue(data,N);
    }

    __declspec(dllexport) int* ThrustFuncs::sort(int* data, int N){
        return thrustH::sort(data,N);
    }
    __declspec(dllexport) double* ThrustFuncs::sort(double* data, int N){
        return thrustH::sort(data,N);
    }
    __declspec(dllexport) int ThrustFuncs::simple(int N){
        return N;
    }
} 
```

我几乎在任何地方都尝试使用 extern "C" 和 __declspec(dllexport) 我想我做错了什么。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:49:25.117

您似乎正在尝试导出 C++ 函数，但希望它们具有 C 名称。

没有直接的方法可以做到这一点，主要是因为它没有意义。

`C`没有类（或命名空间），这些通常涉及 C++ 名称修改。也就是说，不要在声明中使用`C`名称修饰来编写您打算导出的函数。`class`

但是，您仍然可以编写 C 函数（在一个`extern "C"`块中），在其中调用您的 C++ 函数、方法或类。

就像是：

```
class foo
{
  static int bar(const std::string& str) { return static_cast<int>(str.size()); }
}

extern "C"
{
  int bar(const char* str)
  {
    // Call C++ version of the function.
    try
    {
      return foo::bar(str);
    }
    catch (std::exception&)
    {
      // Handle it somehow
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:49:12.417

您可能希望`__cdecl`用于要导出的不会破坏名称的函数。

参考：[/Gd、/Gr、/Gz（调用约定）](http://msdn.microsoft.com/en-us/library/46t77ak2.aspx)

# javascript - 猫鼬,节点和异步编码方法

> ID：11797400
> 
> 赞同：0
> 
> 时间：2012-08-03T14:09:38.463
> 
> 标签：javascript, node.js, mongodb, asynchronous, mongoose

好的，我需要打开灯泡。我已经为此苦苦挣扎了将近一个星期，而且越来越困惑。

我有这些收藏：

```
Customers
Orders (linked to Customer by Customer_id)
OrderLines (linked to Order by Order_id)
Salesreps (linked to Customer by Customer_id) 
```

我没有任何嵌入式文档。

我想要做的是获取包含以下内容的数据字符串：

```
Customer_1

Order#1:First_OrderLine_of_Order_Number
Order#n:First_OrderLine_of_Order_Number

SalesRep_of_Customer_Name

...

Customer_n

Order#1:First_OrderLine_of_Order_Number
Order#n:First_OrderLine_of_Order_Number

SalesRep_of_Customer_Name 
```

有人可以给我伪代码来解释如何在节点和猫鼬中做到这一点吗？我需要学习如何钓鱼；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:43:05.723

很容易感到沮丧和困惑，尤其是当您尝试一次学习不止一件事时。不要只是试图让东西正常工作；从底部开始，一路向上。在您完全理解它所依赖的层之前，请抵制继续前进到下一层的诱惑。

1.  JavaScript
2.  节点.js
3.  MongoDB
4.  猫鼬

您将`forEach`在第 1 步中学习您的技能，在第 2 步中学习您的异步回调技巧，在第 3 步中了解如何处理`find`您的文档，并在第 4 步中将它们组合在一起。如果您真的想要，没有捷径可走'学会钓鱼'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:32:21.623

在处理 NoSQL（该技术的一个非常糟糕的名称）时，您必须以不同的方式设置数据集。

在 mongo 中你没有连接，所以你必须重构你的数据。尽可能考虑嵌入文档（例如带有嵌入订单行的订单）。

我会使用这样的东西：

```
Order: {
  _id: ObjectId
, user: DBRef // (or ObjectId)
, lines: [
    {foo: "bar"}
  , ...
  ]
}

User: {
  _id: ObjectId
, salesref: { _id: ObjectId, name: "James Brown"}
, more_data ...
}

SalesRef: {
  _id: ObjectId
, more_data...
} 
```

保持对引用集合的最小引用，您甚至可以`user: {name: "Max Power", sales: "James Brown"}`在订单中添加一个，但请记住，在文档修改/插入期间您需要手动保持一致。

# objective-c - 如何观察 [NSCursor currentCursor] 的变化？

> ID：11797401
> 
> 赞同：5
> 
> 时间：2012-08-03T14:09:37.817
> 
> 标签：objective-c, xcode, macos, mouse-cursor, nscursor

我有一个带有自定义光标的应用程序，我使用 NSCursor 的自定义包装器实现了该应用程序（大部分主要代码被设计为操作系统可移植，因此在上面我假设 NSCursor 是 Windows 样式的光标）。当用户 cmd+tabs 回到窗口时，光标没有变回我的自定义光标时遇到了一些问题，我想看看是什么改变了 currentCursor 的值。到目前为止，我尝试设置断点的所有地方都没有给我任何帮助。

所以，我想知道一旦 [NSCursor currentCursor] 的值发生变化，是否有办法（在 Xcode 中）中断。这可能吗？我的应用程序可以访问此类数据吗？

谢谢 - 我希望我已经说清楚了。当我什至不确定我想做什么时，很难解释！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T03:05:06.840

`NSCursor`有一个类方法`currentSystemCursor`，可以为您提供 10.6 及更高版本所需的内容。

# android-emulator - 使用代理在 android 模拟器上触发应用程序访问 REST 服务

> ID：11797403
> 
> 赞同：1
> 
> 时间：2012-08-03T14:09:45.187
> 
> 标签：android-emulator, trigger.io

我已经成功构建并加载了[trigger.io 天气应用程序教程](http://docs.trigger.io/en/v1.4/tutorials/weather/index.html)的第 3 部分，当模拟器未配置为使用代理时，它运行良好并下载天气信息。

但是当我将模拟器配置为使用代理时，ajax 调用失败，将以下内容跟踪到命令提示符：

```
[   INFO] D/Forge   (  362): Native call "internal.hideLaunchImage" with task.params: {}
[   INFO] I/Forge   (  362): No reload update available.
[   INFO] D/Forge   (  362): Returning: {"content":{"type":"UNEXPECTED_FAILURE","message":"Forge Java error: NullPointerException: null"},"status":"error","callid":"D4506031-17C9-4074-8689-5F3E7933649D"}
[   INFO] D/Forge   (  362): Native call "logging.log" with task.params: {"message":"   [FORGE] 'ERROR! [getWeatherInfo] undefined'","level":20} 
```

从问题的答案[android WebView 上网问题，因为代理？](https://stackoverflow.com/questions/6673159/android-webview-internet-access-problem-because-of-proxy)看来我需要授予应用程序使用代理的权限。谁能告诉我是否以及如何在 trigger.io 中执行此操作？

谢谢

# powershell - 通过循环将多个变量读入数组

> ID：11797404
> 
> 赞同：3
> 
> 时间：2012-08-03T14:09:53.280
> 
> 标签：powershell, powershell-2.0

我敢肯定这很简单，但我只是想绕开它。我有一个如下所示的 XML 文件：

```
<software>
    <program>Bob</program>
    <program>Reader</program>
    <program>Hello</program>
    <program>Java</program>
</software> 
```

然后我把它拉到这样的脚本中

```
[xml]$xml = Get-Content configuration.xml
 foreach( $entry in $xml.software)
{
$arrayofsoftware = $entry.program
} 
```

首先要注意的是我不知道 XML 中有多少程序条目。我要做的是将所有这些软件放入某种数组中。然后我需要稍后将它分成单独的变量（因为我需要将每个变量作为开关传递到命令行）。

谁能把我扔到正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:38:29.857

这将创建一组程序名称并将它们分配给 $arrayofsoftware 变量。

```
[array]$arrayofsoftware = $xml.software.program 
```

要为每个值创建单独的变量，请使用`New-Variable`cmdlet：

```
for($i=0; $i -lt $arrayofsoftware.count; $i++)
{
    New-Variable -Name "arrayofsoftware$i" -Value $arrayofsoftware[$i]
}

# get a list of arrayofsoftwar variables
Get-Variable arrayofsoftwar*

Name                           Value                                                                                                                                     
----                           -----                                                                                                                                     
arrayofsoftware                {Bob, Reader, Hello, Java}                                                                                                                
arrayofsoftware0               Bob                                                                                                                                       
arrayofsoftware1               Reader                                                                                                                                    
arrayofsoftware2               Hello                                                                                                                                     
arrayofsoftware3               Java 
```

# java - 为什么不使用 new 关键字实例化 MediaPlayer 类

> ID：11797405
> 
> 赞同：0
> 
> 时间：2012-08-03T14:10:00.847
> 
> 标签：java, android

我正在看一些Android开发教程，我看到了下面的案例

```
MediaPlayer mp = MediaPlayer.create(this, R.id.song) 
```

我的问题如下：为什么在创建新的 MediaPlayer 对象时不涉及“新”关键字？我认为每当您创建类的实例时都必须使用 new

那么如果我这样做呢

```
MediaPlayer mp = new MediaPlayer(); 
mp.create(this, R.id.song); 
```

这是错的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:12:04.870

> 我的问题如下：为什么在创建新的 MediaPlayer 对象时不涉及“新”关键字？

好吧，您正在调用一个静态方法，该方法将（可能）创建一个新实例。

也许该方法直接调用构造函数 - 或者它创建了某个子类的实例。或者，它可能会返回对现有实例的引用。

这就是工厂方法的好处——它们可以隐藏它们的实现细节：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:21:16.173

您实际上可以在 MediaPlayer 上调用*new 。*

以下摘自[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

> 当 MediaPlayer 对象刚刚使用 new 创建或在调用 reset() 之后，它处于空闲状态 [...] 此外，使用 new 创建的 MediaPlayer 对象处于空闲状态，而那些使用重载之一创建的对象方便的创建方法不处于空闲状态。实际上，如果使用 create 方法创建成功，则对象处于 Prepared 状态。

基本上使用新方法与静态方法只会改变您的 MediaPlayer 所处的状态。如果您使用新方法，则必须使用 setDataSource() 对其进行初始化并使用 onPrepare() 进行准备。准备好使用静态助手了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:11:59.970

这是一个“工厂”功能。它在内部调用`new MediaPlayer()`，您只是在课堂外看不到它。

# jquery - 如何获取 flickr 图像的地理定位？

> ID：11797408
> 
> 赞同：0
> 
> 时间：2012-08-03T14:10:18.647
> 
> 标签：jquery, flickr

如何获取地理位置（纬度和经度）信息

[http://api.flickr.com/services/rest/?method=flickr.photos.search&per_page=10&nojsoncallback=1&format=json&tags=flower&api_key=00af42177056c5b71bda9bd49938c1](http://api.flickr.com/services/rest/?method=flickr.photos.search&per_page=10&nojsoncallback=1&format=json&tags=flower&api_key=00af42177056c5b71bda9bd49938c1)

我希望它以 json 格式输出图像的地理定位

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:15:30.280

```
flickr.photos.geo.getLocation(apikey, photo_id, flags) 
```

将返回类似：

```
<photo id="123">
    <location latitude="-17.685895" longitude="-63.36914" accuracy="6" />
</photo> 
```

您可以轻松地将其解析为 JSON 字符串

# c++ - 如何检查指针是否有效而无需使用 bool 进行包装

> ID：11797409
> 
> 赞同：-2
> 
> 时间：2012-08-03T14:10:20.987
> 
> 标签：c++, pointers

> **可能重复：**
> [C++ - 检查指针是否指向有效内存（此处不能使用 NULL 检查）](https://stackoverflow.com/questions/11787650/c-check-if-pointer-is-pointing-to-valid-memory-cant-use-null-checks-here)

如何在没有包装器或附加内存的情况下检查指针是否有效？有效是指我没有删除它，或者我可以到达它或它已分配。

我正在使用 VS\Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:19:16.440

如果“您没有删除该内存或分配了该内存，或者您可以访问该内存”，则该指针是有效的。所以我建议：

1.  跟踪您分配的内存。如果此指针不在任何这些块中，则说明您没有分配它。

2.  当您删除指针或释放内存时，将其从列表中删除。这样，您还可以检查您是否没有删除它。

3.  尝试访问它。如果您无法访问它，则它无效。

4.  如果它通过了这些测试，它就是有效的。

我不是在开玩笑。正确的方法是精确定义“有效”的含义并精确测试指针是否满足这些条件。

但实际上，这不是 C++ 的完成方式。无论您的根本问题是什么，都可能有更好的方法来解决。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-03T14:10:20.987

此有效检查仅在 Windows (VS) 中检查，功能如下：

```
#pragma once
//ptrvalid.h
__inline bool isValid(void* ptr) {
    if (((uint)ptr)&7==7)
        return false;
    char _prefix;
    __try {
        _prefix=*(((char*)ptr)-1);
    } __except (true) {
        return false;
    }
    switch (_prefix) {
    case 0:    //Running release mode with debugger
    case -128: //Running release mode without debugger
    case -2:   //Running debug mode with debugger
    case -35:  //Running debug mode without debugger
        return false;
        break;
    }
    return true;
} 
```

用法：

```
#include <stdio.h>
#include "ptrvalid.h"

void PrintValid(void* ptr) {
    if (isValid(ptr))
        printf("%d is valid.\n",ptr);
    else
        printf("%d is not valid.\n",ptr);
}

int main() {
    int* my_array=(int*)malloc(4);
    PrintValid(my_array);
    PrintValid((void*)99);
    free(my_array);
    PrintValid(my_array);
    my_array=new int[4];
    PrintValid(my_array);
    delete my_array;
    PrintValid(my_array);
    getchar();
} 
```

输出：

```
764776 is valid.
99 is not valid.
764776 is not valid.
774648 is valid.
774648 is not valid. 
```

函数说明：（它的作用）

函数在真正检查之前检查，如果地址有效\起点指向内存。之后，他检查这个进程是否可以到达这个内存的前缀（如果不能捕获异常），最后一个检查是检查这个内存的前缀是否在任何模式下被删除。(Debugging\Without Debug Mode\Release Mode) 如果函数通过了所有这些检查，则返回 true。

# c++ - 基于 C++ REST 的 Web 服务客户端实现

> ID：11797413
> 
> 赞同：1
> 
> 时间：2012-08-03T14:10:32.453
> 
> 标签：c++, json, web-services, rest, compression

我有一个要求，我必须实现一个基于计时器的应用程序，该应用程序将定期调用在 asp.net MVC 3 中实现的 rest web 服务并将响应 JSON 数据存储在 SQL Lite 数据库中。它还必须实现一个 http web 客户端来下载需要解压缩的巨大媒体文件。该组件必须使用 C++ 编写。

需要一些帮助来隔离此组件的逻辑任务分解。通常是一个项目列表，例如：

*   POC 隔离开源 C++ Web 服务通信库
*   POC 隔离开源 C++ JSON 框架
*   POC 隔离一个开源 C++ Zlib 包

另外，如果有人可以为 C++ 中一些稳定灵活的开源库提供一些好的建议

*   网络服务通信
*   JSON解析
*   SQL Lite 适配器
*   SQL Lite 的其他一些轻量级数据库替代品
*   基于 HTTP 的下载器。可能实现多线程和多部分下载
*   解压库

性能是应用程序的主要关注点。有人可以建议围绕通过 HTTP 实现更快下载大型媒体文件的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:17:10.843

*   [Facebook Folly](https://github.com/facebook/folly/blob/master/folly/docs/Overview.md)提供 JSON 服务以及其他实用程序。
*   尽管不是开源的，但微软的[Casablanca](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx)库提供了 Web Client 功能。

# php - 幻灯片放映未在 PHP 下运行

> ID：11797414
> 
> 赞同：0
> 
> 时间：2012-08-03T14:10:33.560
> 
> 标签：php

嗨，我有这个免费的滑块，由于某些原因，它没有加载到我的 index.PHP 上，但是当我将扩展名更改为 index.HTML 时，它就像一个魅力。造成这种情况的问题可能是什么。

这是我网站的链接

[http://www.RickTallis.com/index2.php](http://www.RickTallis.com/index2.php)

在这里你可以找到加载了 HTML 后缀的幻灯片。

[http://www.RickTallis.com/cls/](http://www.RickTallis.com/cls/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:33:17.833

使用 JavaScript 控制台，您可以看到如下内容：

```
TypeError: $(".over").preloader is not a function 
```

`$`是许多 Web 框架使用的函数，例如 jQuery。

就是这样：目前在您的页面上链接了五个不同版本的 jQuery。消除四个并移动它们有助于：

1.  删除第 28、57、88 和 903 行
2.  将第 20 行中的 url 更改为`http://www.ricktallis.com/cls/jquery.js`

希望能帮助到你。祝你有美好的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:18:30.157

可能您的 .php 提供的内容可能与您的 .html 不同。

只需比较输出（从浏览器查看源代码），您就会发现差异。

您的代码很难调试，因为其中存在错误（HTML 和 Javascript）

您的 HTML 严重需要一些清理。我看到诸如 2 个结束标签之类的东西：

在您的页面加载后，我的 javascript 错误控制台已满，我不知道从哪里开始。

并且在[http://validator.w3.org对](http://validator.w3.org)[http://www.RickTallis.com/index2.php](http://www.RickTallis.com/index2.php)的验证给出：

46 个错误，14 个警告

您可能只想稍微清理一下混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:22:52.540

我已经在本地检查过，问题是单页中五个不同版本的 jQuery 库之间不兼容。删除后，效果很好。（只保留`jquery.js`页面中的。它在第 88 行，并将其放在结果页面中的第 19 行附近。）

# mfc - 在 MFC 应用程序中渲染 SVG 图像的最佳库

> ID：11797419
> 
> 赞同：1
> 
> 时间：2012-08-03T14:10:39.737
> 
> 标签：mfc, svg

我的要求是在 MFC 应用程序中呈现 SVG 图像。我遇到了以下库。我想选择一个易于使用、性能最佳且与 MFC 兼容的库，因此任何经验和信息都会有所帮助。

1.  WxSvg
2.  QtSVG
3.  库文件
4.  简单的 SVG
5.  图书馆板
6.  SharpVectorGraphics (SVG#)
7.  SVG 渲染引擎
8.  SharpVectors - SVG#重新加载
9.  集成 Adob​​e SvgViewer
10.  将 SVG 图像转换为其他类型并显示（不建议）

    也可以随意建议任何其他库。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:15:10.910

我前段时间对此进行了调查。我想我看了上面列出的大多数选项。我的结论是这个库要么很烂，要么它的许可证不适合我的需要（即 GPL 恐怖）。

如果我今天要实现一个 SVG 查看器，我会依赖 Internet Explorer 9。只需在您的 UI 中实例化浏览器并按[此处](http://msdn.microsoft.com/en-us/library/gg589526%28v=vs.85%29.aspx)`.svg`所述加载浏览器。问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:13:20.643

这可能不完全符合要求，因为它与其说是库不如说是 CLI 工具，而是：ImageMagik。GUI/CLI，海量图像处理能力。这是使用它创建 SVG 的示例： [http ://www.imagemagick.org/script/magick-vector-graphics.php](http://www.imagemagick.org/script/magick-vector-graphics.php)

希望那些对你有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-28T18:35:33.310

可能这很有帮助：[http](http://svgpp.org) ://svgpp.org 我只是玩过，但没有在实际项目中使用它。

> SVG++ 库可以被认为是一个框架，包含各种 SVG 语法的解析器、简化解析数据处理的适配器以及用于最常见任务的许多其他实用程序和帮助程序。查看教程以了解它是什么。库资源可在[https://github.com/svgpp/svgpp](https://github.com/svgpp/svgpp)获得。
> 
> SVG++ 不是从 SVG 生成光栅图像的 SVG 查看器或库（尽管包含 C++ 演示应用程序，它使用 AGG、GDI+ 或 Skia 图形库渲染 SVG）

# ajax - ExtJS 4 中的类似桌面的应用程序

> ID：11797428
> 
> 赞同：0
> 
> 时间：2012-08-03T14:11:18.490
> 
> 标签：ajax, extjs, extjs4, firebug, extjs4.1

我开发了一些带有“桌面”、快捷方式和小部件的应用程序。所以，当我打开我的应用程序时，我有很多 AJAX 请求。

它们相互冻结，Firebug 显示响应时间约为 170-250 毫秒，但在 nginx 日志中，所有响应的时间约为 50-60 毫秒。

我该如何解决？我需要构建一些队列，或者使用 Web Workers 等的一些解决方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:29:24.427

我个人玩过的是，对于初始页面加载，有 1 个 ajax 调用可以完成全部工作，然后在加载时，要么有一个商店工厂，要么找出你加载的数据，然后手动将其发布到店铺。

```
Ext.onReady(function(){   
    Ext.Ajax.request({
        url: 'page.php',
        params: {
            id: 1
        },
        success: function(response){
            var text = response.responseText;
            var json = Ext.JSON.decode(text);

            var store = Ext.data.StoreManager.lookup('myStore')
            store.add(json.myStore.records);
            // and do for whatever other stores you need to do

        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:38:00.897

一个简单的解决方法是从低级 Ajax 切换到 Ext.Direct 远程处理。它的优点之一是请求批处理，它是内置的并且是自动的。为什么不使用它？
请参阅文档：[http ://docs.sencha.com/ext-js/4-1/#!/guide/direct_grid_pt1](http://docs.sencha.com/ext-js/4-1/#!/guide/direct_grid_pt1)

# java - 如何替换 XML 字符串中的无效字符？

> ID：11797432
> 
> 赞同：1
> 
> 时间：2012-08-03T14:11:22.717
> 
> 标签：java, xml-parsing

我有一个由 UTF-16 编码的字符串。使用 解析时`javax.xml.parsers.DocumentBuilder`，出现如下错误：

```
Character reference "&#x0" is an invalid XML character 
```

这是我用来解析 XML 的代码：

```
InputSource inputSource = new InputSource();
inputSource.setCharacterStream(new StringReader(xmlString));
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder parser = factory.newDocumentBuilder();
org.w3c.dom.Document document = parser.parse(inputSource); 
```

我的问题是，如何用`（空格）替换无效字符？`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:41:02.070

您只需要使用 String.replaceAll 并传递无效字符的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:30:40.337

您正在尝试解析无效`xml entity`，这就是引发异常的原因。看来您不必担心`UTF-16`自己的情况。

[在这里](http://www.ibm.com/developerworks/xml/library/x-entities/)找到一些解释和示例。

例如，a 不能使用`&`字符`valid xml`，我们需要使用`&amp;`。这`&amp;`是xml实体。

假设上面的例子应该是不言自明的，以了解什么是 xml 实体。

据我了解，有一些无效的 xml 实体。不过不用再担心了。可以声明和添加新的`xml entity`。请查看上面的文章以获取更多详细信息。

* * *

**编辑：**假设有`&`字符使 xml 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:19:57.457

StringEscapeUtils()

逃逸Xml

```
public static void escapeXml(java.io.Writer writer,
                             java.lang.String str)
                      throws java.io.IOException

Escapes the characters in a String using XML entities.

For example: "bread" & "butter" => &quot;bread&quot; &amp; &quot;butter&quot;.

Supports only the five basic XML entities (gt, lt, quot, amp, apos). 
Does not support DTDs or external entities.

Note that unicode characters greater than 0x7f are currently escaped to their 
numerical \\u equivalent. This may change in future releases.

Parameters:
    writer - the writer receiving the unescaped string, not null
    str - the String to escape, may be null 
Throws:
    java.lang.IllegalArgumentException - if the writer is null 
    java.io.IOException - if there is a problem writing
See Also:
    unescapeXml(java.lang.String) 
````

# .net - 来自 SQL Server 的数字流列表作为单字节数组

> ID：11797433
> 
> 赞同：3
> 
> 时间：2012-08-03T14:11:27.100
> 
> 标签：.net, sql-server

我正在寻找从 SQL Server 获取 long 列表的最快方法。

据我所知，下面的代码是您通常可以运行的最快的代码，而减慢它的是 dr.Read() 中发生的所有事情，以及在某种程度上为每一行调用 dr.GetInt64。

```
var ids = new long[count];
using (var dr = new SqlCommand(string.Format(@"SELECT TOP 10000 ID FROM Data", count),
    conn).ExecuteReader(CommandBehavior.SequentialAccess))    
{
    while (dr.Read())
    {
        ids[i++] = dr.GetInt64(0);                        
    }
} 
```

查询花费的时间可以忽略不计，因此时间花在数据阅读器中的解析和类型验证上。对于 100,000 条记录，大约需要 25 毫秒，这与迭代数组中的 100,000 个项目所需的 0.20 毫秒相比非常慢。

因为我只要求一个 long 列表，所以我想知道是否可以将它们作为单字节数组获取。我所追求的是这样的：

```
var bytes = (byte[]) new SqlCommand("(I don't know)", conn).ExecuteScalar();                
Buffer.BlockCopy(bytes, 0, ids, 0, 10000); 
```

这将大大减少解析时间。

有人可以告诉我这种方法是否可行吗？

***更新：***

至少这些方法并不快：

**CLR 聚合**

可以定义用 .NET 编写的自定义聚合函数。我试图制作一个非常简单的，什么都不做的（使用 SqlUserDefinedAggregate(Format.Native) 使其尽可能快）。这将查询时间增加到 60 毫秒，因此它永远不会更快。

查询如下：

```
SELECT dbo.ByteIt(ID) FROM (SELECT TOP 100000 ID FROM Data) T 
```

**连接 varbinary(max)**

可以使用纯 SQL 构建字节数组。那很慢。

```
DECLARE @n varbinary(max)
SET @n = 0;
SELECT TOP 10000 @n = @n + cast(id as varbinary(8)) FROM Data;
SELECT @n; 
```

**为什么它可能永远不值得付出努力**

我能想到的最快的原生聚合是 COUNT。

```
SELECT COUNT(ID) FROM (SELECT TOP 100000 ID FROM Data) T 
```

这需要 10 毫秒，并且必须是考虑每个值的任何方法的绝对下限。我认为这种性能提升并不值得付出努力。

可悲的是，我认为我的问题的答案是“可以完成但不能更快。与 25 毫秒一起生活”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:22:36.427

您现在选择值的方式确实是最佳的；[表格数据流协议](http://en.wikipedia.org/wiki/Tabular_Data_Stream)针对将结果从 SQL Server 传输回客户端进行了优化。您最好的方法是使用您现在拥有的客户端工具（`SqlConnection' 等）。

这里有两种替代方法，但我不推荐它们，我会解释原因。

与往常一样，YMMV 和您应该测试、测试、测试。

您将调用[类](http://msdn.microsoft.com/en-us/library/w9y9ttex)上的[`GetBytes`方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getbytes.aspx)以顺序读取字节并将它们转换为[实例](http://msdn.microsoft.com/en-us/library/system.int64.aspx)（可能通过[方法](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint64.aspx)）。[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/w9y9ttex)[`Int64`](http://msdn.microsoft.com/en-us/library/system.int64.aspx)[`BitConverter.ToInt64`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint64.aspx)

请注意，为了做到这一点，您必须将[调用](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)传递[`CommandBehavior.SequentialAccess`](http://msdn.microsoft.com/en-us/library/system.data.commandbehavior.aspx)给[类](http://msdn.microsoft.com/en-us/library/z4956bkc)，以便从服务器流式传输大二进制值。[`Execute`](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)[`SqlCommand`](http://msdn.microsoft.com/en-us/library/z4956bkc)

也就是说，您现在必须构建大型二进制数组才能在字段中传回。这就是这种方法被挂断的地方，IMO。基本上，你必须做一个枢轴（不是字面的枢轴，而是类似的东西）获取一组`bigint`值并从中创建一个大的二进制值。这本质上不是一个集合操作，您可能必须在存储过程中包含一些循环代码来创建这个值。

考虑到这一点，您从将大二进制值流式传输到客户端所获得的任何收益似乎都将被您要旋转的 CPU 周期所抵消（并且可能会变得更糟），您将尝试构建那么大的列表中的二进制值`bigint`。

您*可能*可以通过一个[CLR 存储过程](http://msdn.microsoft.com/en-us/library/ms131094.aspx)来缓解其中的一些问题，该过程将获取列表`bigint`然后为您创建字节数组，但在这一点上，这可能是矫枉过正。

CLR 存储过程在执行过程操作时会更快（也就是说，它不是基于集合的，而 T-SQL 更适合）。读取的数量最初是相同的（毕竟，您必须获取数据来创建二进制字符串）但您可能会耗尽内存（取决于您的集合的大小，因为您必须将它连接到一个值）以及 CPU（由于连接）甚至在您将第一个字节发送回客户端之前，所有这些都需要时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T01:37:59.970

由于您使用的是 SQL Server，因此您可以这样做：

```
SELECT STUFF((SELECT ',' + ID
                     FROM Data
                     FOR XML PATH('') 
                     ), 1, 1, '') 
```

您将获得一个以逗号分隔的 ID 列表。这是基于我从这篇文章中学到的东西 - [http://sqlandme.com/2011/04/27/tsql-concatenate-rows-using-for-xml-path/](http://sqlandme.com/2011/04/27/tsql-concatenate-rows-using-for-xml-path/)。

请注意，我没有对这种方法进行任何时序测试。我喜欢它，因为它相当简单。

# javascript - 如何在 JavascriptMVC 控制器中加载脚本

> ID：11797438
> 
> 赞同：0
> 
> 时间：2012-08-03T14:11:38.083
> 
> 标签：javascript, jquery, javascriptmvc, stealjs

我知道如何使用**窃取**来加载脚本，但是我想在`init`执行控制器方法中的代码之前加载它。我需要在控制器初始化之前定义脚本文件中的方法。

我怎样才能做到这一点？

**编辑：**一些背景信息：我尝试使用控制器中的窃取功能加载脚本文件，如下所示：

```
steal( 'jquery/controller','jquery/view/ejs', '../js/other.js' ) 
```

结果是文件是通过文件`<script>`头部的标签加载的。在加载集合文件之前也没有定义 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:26:55.990

你是`then()`用来定义你的控制器吗？

```
steal('jquery/controller','../js/other.js').then(function() {
    // other.js is loaded now
    $.Controller(...);
}); 
```

# objective-c - 带有 iOS 的 Airstash

> ID：11797442
> 
> 赞同：1
> 
> 时间：2012-08-03T14:11:45.760
> 
> 标签：objective-c, ios

**有人知道 Airstash SDK iOS 集成的教程或现有项目吗？**我的项目中有框架，但是头文件中的现有注释对于初始设置并没有太大帮助。我一直在谷歌上搜索，但我得到了大量的技术公告新闻，而不是开发人员资源。

**-背景- Airstash** 将与已开发的 iPad 应用程序一起使用，该应用程序可设置设备偏好。目标设备已经开发出来，没有无线连接，但有 USB 功能。建议的解决方案是将文件从 iPad 无线上传到连接到设备的 Airstash。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:02:11.527

在 SDK 版本中有两个目录：AirStashSDK 和 sdk-demo。sdk-demo 目录包含一个演示 SDK 用法的 XCode 项目。

AirStashSDK 文件夹包含要包含在您的项目中的 AirStash.framework，以及一个 Resources 文件夹，其中包含您应该包含在项目中并可以自定义的几个 xib 文件。如果您计划自定义这些文件，您可能希望将它们复制到不同的目录，以便在更新到较新版本的 SDK 时您的更改不会丢失。xib 文件用于在从 AirStash 获取文件时显示进度，或在将文件保存到 AirStash 时显示活动。

要将文件保存到 AirStash，请查看`saveFileAction:`.`sdk-demo/AirStashSDK Demo/RootViewController.m`

```
- (void)saveFileAction:(NSString*)filename
{
    NSLog(@"Save a file to AirStash. filename: %@", filename);
    NSURL *docDir = [self getDocumentsDirectory];
    NSString *filepath = [[docDir URLByAppendingPathComponent:filename] path];
    airstash = [[AirStash alloc] init];

    // Save is very simple.
    [airstash saveFileToAirStash:filepath
                  presentingFrom:self 
                    successBlock:^(void){
                        NSString *msg = [NSString stringWithFormat:@"Success saving file to AirStash: original filename: %@", filename];
                        NSLog(@"%@", msg);
                        [self presentAlertWithMessage:msg];
                        self.airstash = nil;
                    }
                      errorBlock:^(AirStashStatus errorCode, NSString *reason) {
                          NSString *msg = [NSString stringWithFormat:@"Problem saving file to AirStash: (%d) %@", errorCode, reason];
                          NSLog(@"%@", msg);
                          [self presentAlertWithMessage:msg];
                          self.airstash = nil;
                      }];
} 
```

演示应用程序显示了应用程序文档目录中的文件列表。如果用户点击文件，它会调用 saveFileAction: 方法将所选文件保存到 AirStash。应用程序可以分配一个 AirStash 对象并对其方法进行多次调用，或者在本例中，它只进行一次调用然后释放它。（演示应用程序的 presentAlertWithMessage: 方法只是弹出一个带有给定消息的 UIAlertView 和一个 OK 按钮，因此您可以看到操作已完成。）

演示应用程序还有几个其他按钮，一个用于从 AirStash 获取文件（并将其保存到应用程序的文档目录），另一个用于获取 AirStash 上文件的 URL。第二个按钮使用的方法对于想要流式传输文件而不是一次下载整个文件的应用程序很有用。

# c++ - 预处理器定义 - 构建时提示？

> ID：11797443
> 
> 赞同：1
> 
> 时间：2012-08-03T14:11:51.547
> 
> 标签：c++, visual-studio-2010, c-preprocessor

在我的公司，我们有一个大型 C++ 项目，它具有多种功能，可以通过各种预处理器定义启用或禁用。

如果我们要在项目配置列表中列举每个可能的预处理器/功能组合，我们将拥有一个相当广泛的列表（更不用说长配置名称了）！

是否有插件（或其他一些未知功能）可以在用户启动构建时显示提示，以便用户可以选中/取消选中可配置功能列表，以启用或禁用预处理器定义？

像这样的东西会很棒：

![在此处输入图像描述](../Images/cfebaf1c09e11a81c6881a9b1389b669.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:15:10.953

您可以创建一个简单的应用程序，该应用程序将生成一个带有定义的头文件

```
#ifndef __GEN_CONFIG__
#define __GEN_CONFIG__

#undef  LOGGING
#define LOGGING 1 // for example

#undef  FEATURE_A
#define FEATURE_A 0

#endif 
```

然后可以将此标头包含在项目中。

应用程序/对话框可以作为[Visual Studio Pre-Build 事件](http://msdn.microsoft.com/en-us/library/e85wte0k%28v=vs.100%29.aspx)执行，以确保在编译之前更新头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:02:18.123

我喜欢使用 CMake 来完成这项任务。在 a`CMakeLists.txt`中，您可以使用 command `set(<variable> <value> CACHE <type> <docstring>)`，它创建一个变量并将其与给定的文档字符串一起放入 CMake 缓存中。然后，您可以使用诸如`ccmake`编辑这些值之类的工具。例如，如果您将该值设为布尔值，则可以打开或关闭功能。

[在 Windows 上，您可以使用gui](http://www.cmake.org/cmake/help/runningcmake.html)查看和编辑缓存条目，这类似于您在问题中发布的对话框。

**编辑：**创建构建时，CMake 不会弹出一个弹出窗口。相反，它会记住缓存中的变量。通常的方法是使用不同功能的不同构建，即您可以在调试模式下构建一个包含所有功能的构建，另一个在发布模式下构建，仅包含最少的功能集，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:41:24.297

您可以查看我的分析工具，该工具构建项目中使用的所有预处理器键的列表。[http://cdsan.com/Samp_CondParams.php](http://cdsan.com/Samp_CondParams.php)

除了构建列表本身之外，它还对这些参数进行分类。

# android - 更改安卓quicksshd监听公网ip

> ID：11797446
> 
> 赞同：0
> 
> 时间：2012-08-03T14:12:03.683
> 
> 标签：android, networking, ssh

我想通过互联网连接到我的安卓手机。可能吗？

我有一个运行 Quicksshd 服务器的非 root 索尼 xperia mini。Quicksshd 监听无法更改的私有 ip 10.xxx。但是，当我访问 www.whatismyip.com 时，手机的公共 ip 是 193.xxx 那么，我可以让 quicksshd 听那个 ip 还是有其他方法可以连接到手机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:14:39.050

蜂窝数据连接总是位于至少一层 NAT 网关之后——除非电话自己建立连接，否则无法从“外部”世界访问电话。

# java - java.lang.NoClassDefFoundError：将 JBoss 4.0.5 升级到 4.2.2 时出现 org/jboss/mq/SpyObjectMessage

> ID：11797449
> 
> 赞同：0
> 
> 时间：2012-08-03T14:12:18.537
> 
> 标签：java, jboss, jms

但是在 jboss-4.2.2.GA/client/jbossall-client.jar 中找到的类。应用程序仍然抛出异常。

我们应该将文件移动到 server/default/lib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:13:00.997

首先让我们澄清一下这个类的依赖是在你的 webapp 中还是来自 jboss 本身。如果它在你的 webapp 中，最好将这个 jar（假设你已经确认这个 jar 包含被投诉的类）复制到 webapp 对应的`WEB-INF/lib`文件夹中。如果是来自 jboss 启动本身，最好将 jar 复制到`server/default/lib folder`（假设您使用的是 jboss 服务器的默认配置文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:25:44.480

通过替换 SpyObjectMessage 使用 ObjectMessage 修复了该问题。SpyObjectMessage 看起来像 JBoss mq 实现（JBoss 4.0.5）

# bash - 将 jps 输出解析为数组

> ID：11797450
> 
> 赞同：2
> 
> 时间：2012-08-03T14:12:21.890
> 
> 标签：bash, process

我在 bash shell 中使用 jps 来查找所有正在运行的 java 进程。我希望能够使用 jps 输出的 PID 列表。我可以使用成功地将它们打印到屏幕上

```
jps | awk '{print $1}' 
```

但我希望有多个进程正在运行，我想将它们放在一个数组中。我发现了另一个他们使用的例子

```
awk '{arr[$1]}' 
```

因为他们想要在数组中的输出是单列。这类似于我想放入数组中的 PID 列。

是否可以将它们通过管道传输到数组中？我无法在需要时更改数组的索引。有一个更好的方法吗？

任何指导都会受到热烈欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:29:00.960

根据您的第一个示例，您应该能够使用 bash 数组捕获所有进程 ID

```
pids=( $(jps | awk '{print $1}') ) 
```

一旦进入数组，它们就可以被迭代：

```
for pid in "${pids[@]}"; do
     echo $pid
done 
```

或单独访问

```
echo "${pids[0]}"
echo "${pids[1]}" 
```

用 找到存储在数组中的总数`${#pids[@]}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T22:06:31.953

使用 xargs：

ps辅助| grep -ie java | awk '{打印 $2}' | xargs 回声

# sharepoint - outlook2010和sharepoint2010如何同步邮件

> ID：11797453
> 
> 赞同：3
> 
> 时间：2012-08-03T14:12:33.170
> 
> 标签：sharepoint, sharepoint-2010, outlook, outlook-2010

我需要在 Outlook2010 和 sharepoint 2010 之间同步电子邮件。我一直在搜索，但发现正在同步联系人、日历和任务。链接和示例将不胜感激。

问题：实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:08:51.353

查看 Sharepoint webpart [`OWAInboxPart`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.portal.webcontrols.owainboxpart.aspx)，它将显示来自 Exchange 的电子邮件，而无需将电子邮件存储在 Sharepoint 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:46:17.183

问题是为什么？Outlook 是一种通信工具，而不是存储工具。如果这是您的目标，SharePoint 中有一个 Outlook Web 部件，可让您在 sharepoint 中显示电子邮件。

# objective-c - 将十进制转换为二进制（字符的位图）

> ID：11797460
> 
> 赞同：1
> 
> 时间：2012-08-03T14:12:50.533
> 
> 标签：objective-c, ios, bitmap

我有一个关于从字符获取位图的问题，例如 A。

我已经在互联网上搜索，但没有直接的帮助。我找到[了这个](http://www.codeproject.com/Articles/29461/Led-Font-Creator-with-Scrolling-Display)页面，其中描述了我的计划。

本站引述：

例如，字符 char="A" bits="227873781661662" 转换为二进制的“0000 0000 0000 0000 1100 1111 0011 1111 1111 1111 1100 1111 0011 1111 1101 1110”。

他们如何从 227873781661662 到 0000 0000 0000 0000 1100 1111 0011 1111 1111 1111 1100 1111 0011 1111 1101 1110？

```
int num = 227873781661662;
int n = log(num)/log(2)+1;          //Figure out the maximum power of 2 needed
NSString *result = @"";             //Empty string
for (int j=n; j>=0; j--)            //Iterate down through the powers of 2
{
    if (pow(2,j) >= num)            //If the number is greater than current power of 2
    {
        num -= pow(2,j);                             //Subtract the power of 2
        result = [result stringByAppendingString:@"1"]; //Add a 1 to result string
    }
    else result = [result stringByAppendingString:@"0"]; //Otherwise add a 0

    if (num == 0) break;                              //If we're at 0, stop
}
NSLog(@"num = %i",num); 
```

这有什么问题？感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:46:14.047

它们向您展示了 64 位二进制数的十进制表示。他们的代码将数字解释为倒置`8x6`的位矩阵，最初的 16 位部分被丢弃。

这些位在下面重新分组以说明发生了什么。我摸索了六位，并在下面添加了一个星号`1`和一个空格`0`来生成图像：

```
0000 0000 0000 0000 -- Thrown away
bits    image
------  ------
110011  **  **      
110011  **  **
111111  ******
111111  ******
110011  **  **
110011  **  **
111111  ******
011110   **** 
```

在 Windows 上，您可以使用计算器应用程序将二进制转换为十进制并返回。选择[View/Programmer]，然后选择“Bin”单选按钮。

以下是如何在 Objective C 中将数字转换为二进制：

```
long long num = 227873781661662L;
NSMutableString *res = [NSMutableString string];
while (res.length != 64) {
    [res insertString: [NSString stringWithFormat:@"%d", num%2] atIndex:0];
    num >>= 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:39:05.727

要将数字从十进制转换为二进制：

```
long long num = 938409238409283409;
int n = log(num)/log(2)+1;          //Figure out the maximum power of 2 needed
NSString *result = @"";             //Start with empty string
for (int j=n; j>=0; j--)            //Iterate down through the powers of 2
{
    long long curPOW = powl(2,j);
    if (curPOW <= num)          //If the number is greater than current power of 2
    {
        num -= curPOW;                                  //Subtract the power of 2
        result = [result stringByAppendingString:@"1"]; //Add a 1 to result string
    }
    else result = [result stringByAppendingString:@"0"]; //Otherwise add a 0
}
NSLog(@"%@", result); //Result is now binary representation of num 
```

对于`num`上面的示例，输出为： ![在此处输入图像描述](../Images/c9cd7b75eef541c24b21207e6111172d.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:41:37.297

227873781661662 是十进制的，显然 1 和 0 是二进制的。要将十进制转换为二进制，要么将[数字分解为 2 的幂](http://www.wikihow.com/Convert-from-Decimal-to-Binary)（即 2^0=1、2^1=2、2^2=4），这对于这样的大数字来说会很长，或者只使用[计算器工具](http://acc6.its.brooklyn.cuny.edu/~gurwitz/core5/nav2tool.html)

# iphone - 数组初始化时的 iOS 错误

> ID：11797461
> 
> 赞同：1
> 
> 时间：2012-08-03T14:12:51.813
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我正在尝试初始化一个`Photo`s数组，并且这样做是这样的：

```
NSMutableArray *photoList = [[NSMutableArray alloc] init];
self.photos = photoList; 
```

但是当这行代码运行时，我得到了这个错误：

```
'NSInvalidArgumentException', reason: '-[Project setPhotos:]: unrecognized selector sent to instance 0xee8e310' 
```

我花了大约三个小时试图找到解决方法，但找不到，谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:16:31.890

`@synthesize`在我看来，您还没有创建属性 photos，如果您有，那么在您的实现中似乎也没有这个属性，也许您正在使用`@dynamic`，在这种情况下，您可以创建一个`- (void)setPhotos:(NSMutableArray*)photos;`方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:15:24.820

`self`没有一个属性叫做`photos`

您需要`@property (nonatomic, strong) NSArray *photos;`在`.h`文件中添加`@end`

在`.m`文件中，`@synthesize photo;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:17:48.267

好像您还没有为照片编写 setter 方法。

在你的 .h

```
@property (strong, nonatomic) NSArray * photos; 
```

在你的 .m 中（如果不使用 xcode 4.4）

```
@synthesize photos; 
```

或者你可以试着这样写

```
photos =  [NSArray arrayWithArray:photoList]; 
```

如果您使用 [self setMyArray:array] 或 self.array = myArray 作为参考，那么您正在使用 setter 方法，这可能是您想要做的事情。如果你只是指向array = myArray，你将指向myArray，如果它被释放，你的指针将指向深渊。最好不要这样做，不使用设置器意味着您正在直接访问变量照片，这可能不是您想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T14:23:18.983

这行代码：

```
self.photos = photoList; 
```

变成这条线

```
[self setPhotos:photoList]; 
```

由编译器 - 点符号就是所谓的“语法糖”，因为它只是让输入更容易，它并没有真正缩短代码。

如果您创建了自己的 getter 和 setter（即）

```
- (NSMutableArray *)photos;
- (void)setPhotos:(NSMutableArray *)myPhotos 
```

然后，即使您没有名为“照片”的属性，您也可以使用该糖 - 尽管这被认为是对该功能的滥用（我将其显示为比较目的）。

当您创建一个名为 photos 的属性时：

```
@property (nonatomic, strong) NSMutableArray *photos; 
```

编译器将使用相同的名称为您生成一个 ivar，但不会创建 getter 和 setter。该行：

```
@synthesize photos; 
```

要求编译器执行一个 getter（在所有情况下）和一个 setter（如果属性是读写）。如果您不提供 @synthesize 语句，编译器通常会抱怨，因此人们应该注意这些警告。

您可以在错误中看到您没有 setPhotos，因此您的问题可以很容易地解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T14:15:47.650

哎呀，我用过`@dynamic photos`而不是`@synthesize photos`

# php - PHP“取消包含”或从内存中删除？

> ID：11797471
> 
> 赞同：3
> 
> 时间：2012-08-03T14:13:37.333
> 
> 标签：php, exception, memory, memory-leaks, phpunit

我正在构建一个测试工具，以在*极难*进行单元测试的遗留 PHP 代码目录上执行，尽管我正在使用 PHPUnit 作为该工具。

关于 PHPUnit 的一个很酷的事情是它会将 PHP 通知、警告和错误冒泡到异常中。使用这些知识，我构建了一个工具，`include()`可以从 try/catch 块中的目录递归文件并记录任何异常。

问题是，如果我包含数百个文件，这很快就会成为内存占用和崩溃。我考虑过使用它，但我不确定这是否会从内存中“清除”它：

```
// Include file into buffer
ob_start();

include($file);

// Clear file from buffer
ob_clean(); 
```

处理这种性质的事情并适当管理内存/资源的最佳方法是什么？

**[编辑]**

此外，这是我正在开发的一个**内部工具，用于帮助管理数千个包含***不可测试*（在时间限制意义上）遗留程序代码的文件。

这个想法怎么样？

```
// Enable garbage collector (in case this helps?)
gc_enable();

// Get procedural php and execute it
$fileData = file_get_contents($file);
eval($fileData);

// Clear variable
$fileData = null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:28:52.000

如果您创建一个单独的 CLI 脚本（“测试器”），该脚本一次包含一个文件并记录异常，并让您的主脚本（“迭代器”）遍历/递归到您需要的脚本目录中怎么办？通过shell为每个文件测试和调用测试脚本？

# jquery - Jquery拖放在chrome和ie9中不起作用

> ID：11797474
> 
> 赞同：2
> 
> 时间：2012-08-03T14:13:53.963
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jquery 的拖放功能。它在 Firefox 中运行良好，但在 chrome 和 ie9 中失败。

以下是我正在使用的 jquery lib 版本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="<?php echo Yii::app()->request->baseUrl; ?>/js/jquery-ui-1.8.2.custom.min.js"></script> 
```

这是我的拖放代码：

```
$(function() {
    $(".item").draggable({
            revert: true
    });
    $("#mail-circle-wraper").droppable({
            tolerance: 'touch',
            over: function() {   

                   $(this).removeClass('out').addClass('over');
            },
            out: function() {           
                $(".item").draggable({
                    revert: false
            });
                    $(this).removeClass('over').addClass('out');
            },
            drop: function() {
                    bootbox.confirm("Add this person to circle ?", function(confirmed) {

                        // do somthing
                    });

                    $(this).removeClass('over').addClass('out');
            }
    });
}); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:10:49.833

请添加以下 2 个库，因为它在所有浏览器中都可以正常工作。我已经测试过了。

[jQuery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)

[jQuery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:15:59.323

尝试将您的 jquery 库更改为：

```
https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js

https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js 
```

让我知道这是否可行。

# .net - 删除 S3 中的存储桶

> ID：11797476
> 
> 赞同：1
> 
> 时间：2012-08-03T14:14:04.477
> 
> 标签：.net, sdk, amazon-s3, amazon-web-services

我正在寻找一种更好的方法来删除 S3 存储桶。
适用于 .Net 的 AWS 开发工具包不允许删除非空存储桶，
并且没有任何重载`DeleteBucket()`来删除存储桶中的任何子对象。

这是我目前删除存储桶的方式 -

*   检索存储桶中的所有对象
*   删除对象
*   删除存储桶

//先删除桶中的所有对象——非空桶是不能删除的

```
using (ListObjectsResponse response = amazonS3Client.ListObjects(new ListObjectsRequest().WithBucketName(bucket.Name)))
{
    if (response.S3Objects.Count > 0)
    {
        List<KeyVersion> keys = response.S3Objects.Select(obj => new KeyVersion(obj.Key)).ToList();
        DeleteObjectsRequest deleteObjectsRequest = new DeleteObjectsRequest
        {
            BucketName = bucket.Name,
            Keys = keys
        };
        amazonS3Client.DeleteObjects(deleteObjectsRequest);
    }
}

//Delete Bucket
DeleteBucketRequest request = new DeleteBucketRequest
{
    BucketName = bucket.Name
};
amazonS3Client.DeleteBucket(request); 
```

在 S3 中删除存储桶是否有更好的方法 - 我不需要先获取对象。
AWS SDK for .Net 中是否缺少任何方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-08T19:21:44.703

万一有人仍然对这个老问题感兴趣。有人像我一样偶然发现它。尤其是使用 .Net 核心进行 S3 交互的人。

与此同时，官方的**AWS S3 Utils**类出现了，它具有名为**DeleteS3BucketWithObjectsAsync**的函数，并支持删除存储桶及其所有对象。官方文档可以在[这里找到](https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/S3/MS3UtilDeleteS3BucketWithObjectsAsyncIS3StringCancellationToken.html)

它是 AWSSDK.S3 nuget 包中 AmazonS3Util 命名空间的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-16T13:11:30.653

没有 API 直接做会更容易。有一种非常简单的方法可以使用**S3 管理控制台**的“生命周期”设置删除 S3 中的存储桶：

*   选择要删除的存储桶，然后转到“属性”下的“生命周期”。

*   添加新规则 设置新规则以应用于“整个存储桶”

*   点击右下角的“配置规则”按钮

*   在“对象操作”下拉菜单中，选择“永久删除”

*   将天数设置为“1”你就完成了。桶将在 24 小时内消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T22:46:20.890

我不认为这是可能的。甚至他们的 REST API 也不支持删除非空存储桶：

> DELETE Bucket
> 描述
> DELETE 操作的此实现删除 URI 中指定的存储桶。必须先删除存储桶中的所有对象（包括所有对象版本和删除标记），然后才能删除存储桶本身。

（取自[S3 REST API](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketDELETE.html)）。

通过调用删除多个对象请求，您正在以正确的方式进行操作。请注意，如果您使用版本化存储桶，则必须在删除存储桶之前删除其所有版本中的所有对象。

# python - OSX 10.8 中 usetex 的问题

> ID：11797480
> 
> 赞同：3
> 
> 时间：2012-08-03T14:14:18.533
> 
> 标签：python, latex, matplotlib, osx-mountain-lion

我最近升级到 OSX 10.8 (Mountain Lion)，如果我尝试在我的绘图标签中使用乳胶标记，我的 python 安装现在行为不端。

以下代码完美运行：

```
plt.figure()
plt.plot( rand(51), rand(51) )
plt.show() 
```

但是，这不会：

```
plt.rc( 'text', usetex=True )
plt.figure()
plt.plot( rand(51), rand(51) )
plt.show() 
```

我回来的错误是：

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/wx/_misc.py", line 1342, in Notify
    self.notify()
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/wx/_core.py", line 14716, in Notify
    self.result = self.callable(*self.args, **self.kwargs)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/backends/backend_wx.py", line 990, in _onDrawIdle
    self.draw(*args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/backends/backend_wxagg.py", line 59, in draw
    FigureCanvasAgg.draw(self)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/backends/backend_agg.py", line 401, in draw
    self.figure.draw(self.renderer)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/figure.py", line 884, in draw
    func(*args)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/axes.py", line 1983, in draw
    a.draw(renderer)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/axis.py", line 1037, in draw
    ticklabelBoxes, ticklabelBoxes2 = self._get_tick_bboxes(ticks_to_draw, renderer)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/axis.py", line 988, in _get_tick_bboxes
    extent = tick.label1.get_window_extent(renderer)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/text.py", line 747, in get_window_extent
    bbox, info = self._get_layout(self._renderer)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/text.py", line 300, in _get_layout
    ismath=False)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/backends/backend_agg.py", line 174, in get_text_width_height_descent
    renderer=self)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/texmanager.py", line 608, in get_text_width_height_descent
    page = iter(dvi).next()
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 65, in __iter__
    have_page = self._read()
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 121, in _read
    self._dispatch(byte)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 209, in _dispatch
    self._fnt_def(k, c, s, d, a, l, n)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 362, in _fnt_def
    tfm = _tfmfile(n[-l:])
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 878, in _tfmfile
    return _fontfile(texname, Tfm, '.tfm', _tfmcache)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 868, in _fontfile
    filename = find_tex_file(texname + suffix)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/matplotlib/dviread.py", line 838, in find_tex_file
    pipe = subprocess.Popen(cmd, stdout=subprocess.PIPE)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

有没有其他人遇到过这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T03:17:41.030

Maybe TeX and utilities are not on your `$PATH`? You should set things up so that if you type "tex" or "kpsewhich" on the command line, you invoke those programs (i.e. get some output instead of "command not found"). If you installed TeX Live previously, make sure that `/usr/texbin` is in the search path.

# php - 如何将参数发送到远程文件

> ID：11797482
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:14:25.150
> 
> 标签：php, jquery, ajax

我有这样的脚本

```
$(function(){
    //attach autocomplete  
    $("#user_key").autocomplete({
            //define callback to format results  
                source: function(req, add){
                    //pass request to server  
                    $.getJSON("/ajax/user_autocomplete.php?user_key=?",req, function(data){
                        //create array for response objects
                        var suggestions = [];
                        //process response
                        $.each(data, function(i, val){
                        suggestions.push(val.name);  
                    });
                    //pass array to callback
                add(suggestions);
            });
        }
    });
}); 
```

并且想将一个参数发送到 php 文件以接收答案，我该如何在这个脚本中做到这一点？是否有必要在 html 中包含**method="get"**或没关系？

我必须写**{param: $(this).val} 而不是 req**或如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:53:04.847

Just do:

```
 $('#user_key').autocomplete(
        {
            source: '/ajax/user_autocomplete.php'
        }); 
```

As long as you send back correct JSON from user_autocomplete.php then all is good.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:22:00.407

参数将`req`是一个包含属性的对象`term`。这和任何其他 GET 参数都需要为第二个参数定义`$.getJSON`

```
function(req, add){
                var params = {
                    user_key: myUserKeyVar,
                    term : req.term,
                    otherKey: myOtherKey
                };
                //pass request to server  
                $.getJSON("/ajax/user_autocomplete.php",params, function(data){
                    //create array for response objects
                    var suggestions = [];
                    //process response
                    $.each(data, function(i, val){
                    suggestions.push(val.name);  
                });
                //pass array to callback
            add(suggestions); 
```

# c# - 在 C# 应用程序中获取 Facebook 访问令牌

> ID：11797484
> 
> 赞同：1
> 
> 时间：2012-08-03T14:14:38.143
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk, scheduled-tasks

一位客户正在寻找一种方法来从 Facebook 下载有关其网站的指标，并将它们汇总到他们的数据库中以获取有关网站使用情况的报告。经过一些研究，很明显，Facebook 允许用户从其网页以 CSV 文件或通过 Graph API 下载此信息。

理想情况下，我应该实现一个 Windows 应用程序，它可以变成每日计划的工作，它将：

1.  转到 Facebook 并下载该页面的访问/喜欢/不喜欢/...信息。
2.  将信息转换为有用的格式
3.  将其保存到数据库。

我面临的主要问题是所有 C# 示例都涉及使用 Facebook 对 Web 应用程序进行身份验证。在通过直接调用或[C# Facebook SDK](http://csharpsdk.org/)使用 API 的所有示例中，都使用了身份验证令牌。从我读到的没有办法再获得 Facebook 永久[令牌](https://stackoverflow.com/questions/7696372/facebook-page-access-tokens-do-these-expire)。

我的问题是： 1\. 有没有办法确保我可以在不显示登录窗口的情况下进行身份验证以获取用户统计信息？2\. 有没有其他方法可以从 Facebook 中提取所需的信息？

任何澄清、建议或示例将不胜感激。

谢谢，周末愉快，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:21:26.913

你试过[https://facebookpsmodule.codeplex.com](https://facebookpsmodule.codeplex.com)吗？对于这项任务，PowerShell 可能比 C# 更容易。您关于相似/不相似统计的特定场景对我来说是新的，但应该是可行的，如果不是更高级别的接口，则可以通过 Get-FBObjectData。

在某些时候，您需要通过登录窗口来获取访问令牌。您应该能够使用 offline_access 生成一个可以缓存的令牌（FacebookPSModule 会自动执行此操作）并且可以持续数月。然而，Facebook 正在改变它的政策 wrt offline_access，我仍在收集有关这方面的信息。

# java - 如何使用活动将值保存到特定文件以及它应该如何使用 android 中的服务访问？

> ID：11797487
> 
> 赞同：0
> 
> 时间：2012-08-03T14:14:47.680
> 
> 标签：java, android, file, file-io

我正在开发一个安卓应用程序。在该应用程序中，我想保存一个可以从应用程序的任何活动中获得的特定值。现在我想使用该值来提供在后台运行的服务（服务在设备启动时启动）。我应该如何进行呢？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:48:42.573

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)并将您的价值保存在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:51:37.083

共享偏好。如果它是常规数据类型。如果它是一个对象或 ADT，您可以通过 Intent 对象执行此操作。您可以让您的“值/对象”实现可序列化接口，然后将其封装在 Intent 对象中。您可以轻松地将该 Intent 传递给您的服务，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:52:03.620

如果要在服务运行时临时存储该值，则必须在其中创建一个静态变量

否则使用 SharedPreferences

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:23:20.590

有几种方法可以做到...

**1.**将值存储在`Shared Preference`.

**2.**将其存储到`Property file`.

**3.**将其存储到`SQLite DB`Android 随附的设备中。（**SQLite 确实是一个非常轻量级的数据库，但在这种情况下它仍然是一个矫枉过正）**

# emacs - 为 Windows 安装 Emacs Evil Mode

> ID：11797490
> 
> 赞同：4
> 
> 时间：2012-08-03T14:14:51.470
> 
> 标签：emacs, evil-mode

我想在 Windows 中安装 Emacs Evil 模式，但我找不到有关该主题的任何文档。Windows 是否存在邪恶模式？如果是这样我该如何安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-12T22:09:24.387

如果你有兴趣尝试邪恶模式，我建议你使用这里提供的优秀引导程序：[https](https://github.com/bling/emacs-evil-bootstrap) ://github.com/bling/emacs-evil-bootstrap 。

两种情况：

1.  如果您还没有`.emacs`or`init.el`文件，只需将提供的`init.el`文件复制到您的`emacs.d`目录中即可。Emacs 会在你下次打开程序时自动加载邪恶模式。
    （如果您运行的是 Windows，您的`emacs.d`目录可能位于`C:\Users\your-user-name\AppData\Roaming\.emacs.d`.）

2.  如果您已经有一个`.emacs`或`init.el`配置文件，请打开 github`init`文件并将其中包含的代码复制到您自己的配置文件中（如果您已经有一些此代码，或者一些执行相同工作的代码，您没有重复一遍）：

    ```
    (require 'package)
    (add-to-list 'package-archives
                 '("melpa" . "http://melpa.milkbox.net/packages/") t)

    ;;; from purcell/emacs.d
    (defun require-package (package &optional min-version no-refresh)
      "Install given PACKAGE, optionally requiring MIN-VERSION.
    If NO-REFRESH is non-nil, the available package lists will not be
    re-downloaded in order to locate PACKAGE."
      (if (package-installed-p package min-version)
          t
        (if (or (assoc package package-archive-contents) no-refresh)
            (package-install package)
          (progn
            (package-refresh-contents)
            (require-package package min-version t)))))

    (package-initialize)

    (require-package 'evil)

    (setq evil-search-module 'evil-search
          evil-want-C-u-scroll t
          evil-want-C-w-in-emacs-state t)

    (require 'evil)
    (evil-mode t) 
    ```

    同样，只需按照这些步骤操作，当您下次打开程序时，emacs 会自动加载邪恶模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:21:52.227

您可以通过 ELPA 安装它，或者将存储库克隆到本地目录。在 Windows 上与任何其他操作系统没有什么不同。

你有什么问题？[主页](http://gitorious.org/evil/pages/Home)有简单的安装说明。

# vbscript - vbscript excel 创建工作表

> ID：11797491
> 
> 赞同：2
> 
> 时间：2012-08-03T14:14:52.983
> 
> 标签：vbscript, excel-2007

2007年优秀

我有以下内容，可以愉快地创建工作簿和工作表。如何在同一个工作簿中创建另一个工作表？

```
Set objExcel = CreateObject("Excel.Application")

objExcel.Visible = False

Set XLDoc = objExcel.Workbooks.Add

Set XLSheet = XLDoc.Worksheets(1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:19:51.013

```
 objExcel.ActiveWorkbook.Worksheets.Add 
```

# java - 编译 Java GUI 使系统挂起

> ID：11797500
> 
> 赞同：2
> 
> 时间：2012-08-03T14:15:29.767
> 
> 标签：java, user-interface, system, freeze

所以我有这个非常非常奇怪的问题，我已经有一段时间了，但永远找不到答案，所以我在这里发布：

每当我有一个涉及 GUI 的 Java 项目时，我的意思是具有任何类型元素的任何类型的 GUI，在编译时，我的计算机基本上会冻结整整一分钟，然后才会弹出编译的 GUI。这些甚至都不是编程密集型 GUI——即使是最基本的 GUI 也会让我的系统挂起。这很痛苦，因为即使是使用 Java GUI 元素（如处理）的框架，现在也需要永远编译，这对于快速和简单的测试没有帮助。

请注意，这不仅仅是我的 PC - 我的笔记本电脑和我尝试安装 Java 并进行测试的所有其他机器都遭受了同样的命运。然而，这不是一个普遍的问题，因为我大学的 PC 编译 GUI 的东西大约需要我一秒钟的时间。

我已尝试卸载并重新安装 Java 两次（JRE 和 JDK），但无济于事，而且我在 Internet 上找不到适合此特定问题的任何内容。我不知道这是否是我的机器或 Java 安装或坏 juju 或其他什么的问题，但它使事情变得几乎不可能，并且不可能令人沮丧地进行测试。

所以请，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:48:18.050

您是否可能在您的 JDK 版本中使用了一些已弃用的元素？我会仔细检查一下，但这是一个奇怪的案例。

# captcha - 比验证码更好

> ID：11797504
> 
> 赞同：1
> 
> 时间：2012-08-03T14:15:37.523
> 
> 标签：captcha, recaptcha

我是接受在线捐款的中型非营利组织的网络项目经理。

我最近被要求研究比 reCAPTCHA 更好的选择，我们的捐赠者关系/营销人员认为这是在线捐赠的潜在障碍（假设：过程越容易，人们就越有可能这样做）。我想我可以通过展示“自定义主题”功能来快速取胜（大多数用户似乎没有意识到“刷新”按钮来请求另一个挑​​战），但我想知道是否有更好的选择。

尽管验证码的大多数用途都是为了防止垃圾邮件，但这不是我们的目的。我们的问题是机器人进行欺诈性信用卡*测试*，为被盗信用卡数据库的黑市批发做准备。

所以，这是我的问题： **有哪些选项比 CAPTCHA 更好，对用户更透明？**

选项：

*   蜜罐？
*   验证技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:22:58.763

在任何情况下，您的捐赠表格上都不应有验证码。A/B 测试它，你会对 CAPTCHA 引起的抑制感到震惊。NPO 确实存在信用卡欺诈问题，因为信用卡欺诈机器人将使用 NPO 捐赠表格来测试 CC 号码，因为它们通常具有不严格的地址验证。

如果您不想禁止捐赠，最好的选择是一个被 CSS 隐藏的输入字段（不是 type="hidden"），如果填写它将停止表单处理，然后确保它被正确标记为告诉人们不要填写它（以防 CSS 隐藏失败，例如使用屏幕阅读器） - 蜜罐，如您所说。

另一种防御措施是限制来自同一 IP 的多次捐赠。

# perl - Push 和 Unshift 问题 - Perl

> ID：11797505
> 
> 赞同：2
> 
> 时间：2012-08-03T14:15:46.553
> 
> 标签：perl

我目前正在尝试将语音标记添加到我从 CSV 文件编辑并当前存储在数组中的行的开头和结尾；我目前正在尝试使用 push 和 unshift。

```
use warnings;
use Text::CSV;
use Data::Dumper;
use constant debug => 0;
use Text::CSV;

print "Running CSV editor......\n";

#my $csv = Text::CSV->new({ sep_char => ',' });

my $file = $ARGV[0] or die "Need to get CSV file on the command line\n";

my $fileextension = substr($file, -4);

#If the file is a CSV file then read in the file.
if ($fileextension =~ m/csv/i)
{   
print "Reading and formating: $ARGV[0] \n";

    open(my $data, '<', $file) or die "Could not open '$file' $!\n";

    my @fields;

    while (my $line = <$data>) 
    {       
    #Clears the white space at the end of the line.
    chomp $line;

    #Splits the line up and removes the <br />.
    my @lines = split qr{<br\s?/>}, $line;

    #Removes the control character.     
    shift (@lines); 
    print "\n";
    print $_,$/ for @lines;

    push (@lines, "\"");
    unshift (@lines, "\""); 
```

当我尝试使用最后两行时，它不会在开头和结尾添加任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:28:26.553

你怎么知道引号没有被添加到数组中？您的语法是正确的，因此它们肯定可以正常工作。尝试这样的事情。

```
my $newStr = join $/, @lines;
print $newStr; 
```

看看打印的内容，我敢打赌报价会在那里:)

# lua - physics.addbody() 在电晕的循环中不起作用

> ID：11797508
> 
> 赞同：0
> 
> 时间：2012-08-03T14:15:47.753
> 
> 标签：lua, coronasdk, game-physics

我正在尝试通过循环一次添加多个矩形，这是我的代码：

```
for i=1,7,1 do
   rec = rectangles.createRoundedRect(left, top, 100, 18, 6)
  physics.addBody(rec , "static", { density = 1.0, friction = 0.0, bounce = 0.2 } )
  left = left + 50
  top = top - 35
end 
```

矩形已成功添加，但它们不被视为实体（即其他实体不与它们碰撞）

代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:29:26.823

（我认为）这是因为你一遍又一遍地向物理引擎添加相同的记录。尝试这个：

```
rec = {}
for i=1,7,1 do
 rec[i] = rectangles.createRoundedRect(left, top, 100, 18, 6)
 physics.addBody(rec[i] , "static", { density = 1.0, friction = 0.0, bounce = 0.2 } )
 left = left + 50
 top = top - 35
end 
```

看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:12:35.483

您的问题可能有多种原因。验证 a) 框确实没有添加到物理引擎中（通过使用physics.setDrawMode("hybrid") 启用混合物理模式）。可能是这些框在那里，但是您的对象过滤器有问题（请参阅[http://developer.coronalabs.com/forum/2010/10/25/collision-filters-helper-chart）b](http://developer.coronalabs.com/forum/2010/10/25/collision-filters-helper-chart)）矩形。 createRoundedRect （我认为是您自己的函数）不会将创建的对象添加到与您的其他对象（如果有）不同的组中。电晕物理在跨组创建的对象中不能很好地发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T04:52:23.513

我解决了我`object:translate()`用来移动对象的问题，而我应该使用`object:setLinearVelocity()`

# sql - sql 计算机处于活动状态的次数

> ID：11797512
> 
> 赞同：-2
> 
> 时间：2012-08-03T14:16:08.677
> 
> 标签：sql, postgresql

我正在尝试对 postgresql 9.1 表进行查询，其中两个相关列是：

```
occurred - timestamp with timezone
computer - varchar 
```

假设该表涵盖了从午夜到午夜的 24 小时时段，并且我需要获得一个 24 长度的列表，其中每个元素是*一*台计算机在一天中的那个小时所拥有的行数。我将获得该`WHERE`子句的计算机名称。

到目前为止，这是我的 sql：

```
select extract(hour from occurred) as hr, count(where computer = "computername") 
    from tablename group by extract(hour from occurred) order by 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:57:00.437

您的查询是一个很好的起点。您需要旋转这些值。这是一种方法：

```
select computer,
       sum(case when hr = 1 then cnt else 0 end) as hr01,
       sum(case when hr = 2 then cnt else 0 end) as hr02,
       sum(case when hr = 3 then cnt else 0 end) as hr03,
       ...
       sum(case when hr = 24 then cnt else 0 end) as hr24
from (select computer, extract(hour from occurred) as hr, count(*) as cnt 
      from tablename
      group by computer extract(hour from occurred
     ) t
group by computer 
```

（实际上，我忘记了小时是从 0 到 23 还是从 1 到 24。）

这会为每台计算机创建一个表，并在单独的列中按小时计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:29:33.117

您将需要收紧此查询，以便一次只计算一天的数据，而不是生成计算机在全天 05:00 和 06:00 之间处于活动状态的次数的计数当它被记录为活动时。当计算机根本没有被记录为活动时，您还需要担心在几个小时内生成零计数。但是，我们可以将您的 SQL 修改为可能或多或少有用的东西：

```
SELECT EXTRACT(HOUR FROM occurred) AS hr, COUNT(*) AS count
  FROM tablename
 WHERE computer = 'computername'  -- corrected (" ⟶ ')
 GROUP BY EXTRACT(HOUR FROM occurred)
 ORDER BY 1 
```

从语法上讲，这是正确的（我认为）。

这是定义特定日期的许多可能方法之一。您可能需要指定时区以获得更可靠的数据。

```
SELECT EXTRACT(HOUR FROM occurred) AS hr, COUNT(*) AS count
  FROM tablename
 WHERE computer = 'computername'  -- corrected (" ⟶ ')
   AND occurred >= TIMESTAMP '2012-08-02 00:00:00'
   AND occurred <  TIMESTAMP '2012-08-03 00:00:00'
 GROUP BY EXTRACT(HOUR FROM occurred)
 ORDER BY 1 
```

即使在其中一些小时内没有计算机活动，生成所有 24 小时的数据也更加困难。您会以某种方式创建一个 24 小时列表（有多种可能的方法；我不确定哪种方法在 PostgreSQL 中最合适），然后将其与计算机活动记录的投影相结合：

```
SELECT hh, COUNT(*)
  FROM hours_00_to_23 AS h
  LEFT JOIN
       (SELECT EXTRACT(HOUR FROM occurred) AS hh
          FROM tablename
         WHERE computer = 'computername'  -- corrected (" ⟶ ')
       ) AS a
    ON a.hh = h.hh
 GROUP BY hh
 ORDER BY hh 
```

您可以结合条件来获取特定日期的数据等。

*警告：没有 DBMS 被试图在这个答案中运行任何假定的 SQL 所困扰！*

> 我不知道如何解决第三个问题，第二行不存在关系“hours_00_to_23”。

您需要创建一个（临时？）表，其中包含一个`hh`适当类型的列（这本身就是一个有趣的问题 - 正确的类型是什么）填充值 0 到 23。一个可能令人讨厌的蛮力解决方案（有争议的类型）是：

```
CREATE TABLE hours_00_to_23(hh INTEGER NOT NULL PRIMARY KEY);
INSERT INTO hours_00_to_23 VALUES(0);
INSERT INTO hours_00_to_23 VALUES(1);
...
INSERT INTO hours_00_to_23 VALUES(23); 
```

可能还有其他方法可以达到相同的效果。

# sql - 在 SYBASE SQL 中查找字符串之间的相似性

> ID：11797514
> 
> 赞同：0
> 
> 时间：2012-08-03T14:16:11.403
> 
> 标签：sql, database, select, sybase

我有两个字符串。我想知道两个字符串中有多少个字符相似。

例如：让我们说“xyzabc”、“xyzadh”。我想知道是否有一个函数可以给出相似性破坏的索引。在这种情况下，它将是 4，因为直到 'xyza' 字符串是相同的。如果字符串是“xyzabc”、“xymabc”，那么结果应该是 2。

我想用它`select func('xyzabc', 'xyzwer');`来获得所需的答案。如果 SQL 中存在函数，Kinldy 让我知道。

非常感谢提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:26:27.687

一种方法是使用正则表达式。这是想法。您将使用 regexp_substr()。在您的示例中，正则表达式将是 'xyzwer|xyzwe|xyzw|xyz|xy|x'。然后，您将测量匹配子字符串的长度。换句话说，您需要将其中一个字符串转换为正则表达式。

另一种方法是使用巨大的案例陈述：

```
 (case when left(str1, 10) = left(str2, 10) then 10
       when left(str1, 9) = left(str2, 9) then 9
       ...
       when left(str1, 1) = left(str2, 1) then 1
       else 0
   end) 
```

这假设 10 是最长的字符串。

# api - IE BHO 截图

> ID：11797521
> 
> 赞同：1
> 
> 时间：2012-08-03T14:16:59.257
> 
> 标签：api, internet-explorer, documentation, bho

我在哪里可以找到可以从 BHO 调用的 API？

基本上我需要弄清楚在 IE 中构建一个截图功能需要多长时间。

我对 FF 做了同样的研究，很容易找到关于如何做的信息以及我可以使用什么样的 API，但现在我需要对 IE 做同样的事情，似乎找不到任何关于它。只是关于如何构建 BHO 等的简单旧教程。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:14:20.847

好的，我得到了答案：

[这](http://msdn.microsoft.com/en-us/library/2te2y1x6.aspx)是 API 的一个很好的起点，[这里](http://www.codeproject.com/Articles/21913/TeboScreen-Basic-C-Screen-Capture-Application)是关于如何在 C# 中进行屏幕截图的一个很好的示例

# java - 为什么在 Java 中将字符串解析为日期很慢？我们可以加速吗？

> ID：11797524
> 
> 赞同：11
> 
> 时间：2012-08-03T14:17:03.373
> 
> 标签：java, date, simpledateformat, date-parsing

我正在读取一个包含日期的文本文件，并且我想将表示日期的字符串解析为 java 中的 Date 对象。我注意到的是操作很慢。为什么？有什么方法可以加速吗？我的文件看起来像：

```
2012-05-02 12:08:06:950, secondColumn, thirdColumn
2012-05-02 12:08:07:530, secondColumn, thirdColumn
2012-05-02 12:08:08:610, secondColumn, thirdColumn 
```

我正在逐行读取文件，然后`String`从每一行获取日期，然后我将其解析为一个`Date`对象`SimpleDateFormat`，如下所示：

```
DataInputStream in = new DataInputStream(myFileInputStream);
BufferedReader  br = new BufferedReader(new InputStreamReader(in));
String strLine;

SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
while ((strLine = br.readLine()) != null)
{
    ....Do things....
    Date myDateTime = (Date)formatter.parse(myDateString);
    ...Do things....
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T15:02:03.503

日期和时区的转换是昂贵的。如果您可以假设您的日期/时间彼此相似，那么您可以在分钟更改时转换日期和小时/分钟（或者只有日期，如果您使用 GMT）并自己生成秒。

这将`parse`每分钟调用一次。根据您的假设，您可以每小时或每天一次。

```
String pattern = "yyyy-MM-dd HH:mm";
SimpleDateFormat formatter = new SimpleDateFormat(pattern);
String lastTime = "";
long lastDate = 0;
while ((strLine = br.readLine()) != null) {
    String myDateString = strLine.split(", ")[0];
    if (!myDateString.startsWith(lastTime)) {
        lastTime = myDateString.substring(0, pattern.length());
        lastDate = formatter.parse(lastTime).getTime();
    }
    Date date = new Date(lastDate + Integer.parseInt(myDateString.substring(pattern.length() + 1).replace(":", "")));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-05T00:29:28.763

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-09T11:32:42.917

我建议编写一个自定义解析器，它会更快。就像是：

```
Date parseYYYYMMDDHHMM(String strDate) {
   String yearString = strDate.substring(0, 4);
   int year = Integer.parseInt(yearString);
   ... 
```

另一种方法是使用预先计算的日期时间哈希图（无毫秒）到 unix-timestamp。如果没有太多不同的日期（或者您可以在日期翻转后重新计算它），则将起作用。

# php - oAuth API 中的 json 编码和解码错误 - PHP

> ID：11797532
> 
> 赞同：1
> 
> 时间：2012-08-03T14:17:38.647
> 
> 标签：php, json, oauth

我使用这个例子在 php 中创建了一个 oauth api

```
http://code.google.com/p/oauth-php/wiki/ConsumerHowTo#OAuth_Consumer 
```

在消费者页面中，我将参数作为 json 编码字符串传递。

```
$key = '35345345345vertrtertert'; // fill with your public key 
$secret = 'h rtyrtyr767567567567'; // fill with your secret key
$url = "www.server.com/serverurl.php"; 

$options = array('consumer_key' => $key, 'consumer_secret' => $secret);
OAuthStore::instance("2Leg", $options);

$method = "POST";
$params = array(
           'radius' => '50',
           'latitude'=>'13.35',
           'longitude'=>'17.35'
     );
$params = json_encode($params); 
```

并在服务器页面（即 serverurl.php）中使用打印请求

```
print_r($_REQUEST); 
```

我使用 json decode 解码了字符串，但我得到这个值

```
 Array
(
    [radius] => 50
    [latitude] => 13_35
    [longitude] => 17_35
) 
```

被纬度和经度`.`替换`_`我如何管理这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:22:33.520

似乎在您的编码/解码过程中的某处，该值正试图被解析为一些东西。如果您真的想将这些值作为数字使用，则不应在数组中将它们设置为字符串。尝试这个

```
$params = array(
    'radius' => 50,
    'latitude'=> 13.35,
    'longitude'=> 17.35
); 
```

请注意，我已经删除了数字周围的引号，因此它们将在编码过程中被视为数字。

# android - 从服务内的线程显示 ProgressDialog

> ID：11797533
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:17:41.530
> 
> 标签：android, service, progressdialog

我有一个`Service`已注册的`ContentObserver`. 当我`ContentObserver`检测到更改时，它会将 Service 的`boolean`变量设置为 true。我还在`Thread`服务中运行了一段时间，然后醒来检查该变量。

当它检测到更改时，它需要一些时间来处理其他一些代码，我需要`ProgressDialog`在延迟期间显示。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:33:37.340

您问题的本质是您希望您的服务向您的 UI 发送某种消息（以显示加载对话框）。

有四种（或更多）方法可以解决这个问题：

*   意图：让您的服务向您的活动发送意图
*   AIDL
*   使用服务对象本身（作为单例）
*   让您的活动成为广播接收器

这些选项可能看起来很熟悉：[如何让 Android Service 与 Activity 通信](https://stackoverflow.com/questions/2463175/how-to-have-android-service-communicate-with-activity)

您必须阅读这些选项并进行选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:26:11.193

你应该`AsyncTask`改用。

[这](http://developer.android.com/reference/android/os/AsyncTask.html)是图书馆的链接。这很简单：

1) `onPreExecute()`= 显示`ProgressDialog`

2) `doInBackground()`= 执行你的代码

3) `onPostExecute()`= 解雇`ProgressDialog`

完毕 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:31:51.873

AsyncTask 是一个不错的选择，但如果您决定使用线程，那么为了在 UI 上显示 ProgressDialog，您将需要调用`runOnUiThread()`活动的方法。

假设您想在`MainActivity.`Service 的内部线程中显示 ProgressDialog，您应该具有以下内容：

```
MainActivity.this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        // Display ProgressDialog here
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:11:21.180

谢谢大家的回答。我使用这些步骤解决了问题 - 当我的变量发生更改时广播 Intent - 为意图创建 BroadcastReceiver（在 Activity 中） - 在 BroadcastReceiver 的方法 onReceive 中为我的活动调用 runOnUiThread

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T02:58:29.190

我知道这是一个旧线程，但我正是你需要的，因为我刚刚从这里的一个线程实现了这个。请阅读 Rachit Mishra 在页面下方讨论 ProgressBar 的答案：

[Activity 和 Service 之间的通信](https://stackoverflow.com/questions/20594936/communication-between-activity-and-service)

我的服务中有这个：

```
public void sendMessage(int state) {
    Message message = Message.obtain();
    switch (state) {
        case 1://SHOW:
            message.arg1 = 1;
            break;
        case 0:
            message.arg1 = 0;
            break;
    }
    try {
        messageHandler.send(message);
    } catch (RemoteException e) {
        e.printStackTrace();
    }
} 
```

使用 1 或 0 调用 sendMessage() 以显示或关闭服务中的 ProgressDialog。

这是在我的主要活动中：

```
private ProgressDialog progress;

public class MessageHandler extends Handler {
    @Override
    public void handleMessage(Message message) {
        int state = message.arg1;
        switch (state) {
            case 0://HIDE
                progress.dismiss();
                break;
            case 1://SHOW
                progress = ProgressDialog.show(MainActivity.this, (getResources().getString(R.string.CONNECTING) + "..."), (getResources().getString(R.string.PLEASE_WAIT) + "!"));  //show a progress dialog
                break;
        }
    }
} 
```

ProgressDialog 不能从服务中显示，它必须从活动或片段中调用。我希望我添加了您需要的所有代码，并且它可以很好地满足您的需求。老实说，我不确定消息处理程序是如何工作的，但它对我有用！命名可能也不是最好的，哈哈。对不起。

# c# - C# 脚本：我需要添加时间延迟

> ID：11797537
> 
> 赞同：0
> 
> 时间：2012-08-03T14:17:49.520
> 
> 标签：c#

基本上这个脚本将被告知每 10 分钟运行一次，但我只希望脚本在伦敦时间晚上 9 点到凌晨 4 点运行，有人可以帮忙吗？

另外我想限制脚本每小时发送不超过 500 封电子邮件。

```
 /*Email Client configuration. Here you will need to specify Server, user name and password for your SMTP server, and also testing tag*/
             string SMTPServer = "mail.justshipit.net";
             int SMTPPort = 26;
             string UserName = "no-reply+justshipit.net";
             string Password = "00000";
             string FromEmail = "no-reply@justshipit.net";
             string FromName = "Zoozio @ Amazon";

//email subject and email body
             string Subject = "Please Leave feedback for your [{Source}] order from SUPER COOL STORE";
             string eBayEmailBody = "Hello, [{Name}].\r\n\r\nYou recently purchased:\r\n\r\n[{ItemList}]\r\n\r\nWe hope everything was satisfactory and would really appriciate it if you could go to www.amazon.co.uk/feedback and leave us some positive feedback\r\nif you had any issues please get in contact with us ASAP as we want to sort things out.\r\n\r\nCall Us:0843 289 2766\r\n\r\nMany Thanks\r\nAdam\r\nCustomer Care Manager ";

             /*query syntax. Here we will select all orders processed 14 days ago but not older than 1 month, that don't have FEEDBACK email sent
              and order item table. Two queries in one request
             */
             string query =@"SELECT pkOrderId,cEmailAddress, cFullName, [Source]
FROM [Order] o
LEFT OUTER JOIN Order_LifeHistory ls on ls.fkOrderId = o.pkOrderID and ls.fkOrderHistoryTypeId='EMAIL_SENT'    and ls.Tag='FEEDBACK'
WHERE 
    o.bProcessed = 1 AND o.HoldOrCancel=0 AND o.dProcessedOn > DATEADD(D,-10,GETDATE()) AND ls.sid_history is null 
    AND o.Source IN ('AMAZON');
    SELECT pkOrderId,ItemNumber = oi.ItemNumber,ItemTitle = sis.cItemName
    FROM [Order] o
    INNER JOIN [OrderItem] oi on oi.fkOrderID = o.pkOrderID
    INNER JOIN [StockItems] sis on sis.pkStockID = oi.fkStockID
    LEFT OUTER JOIN Order_LifeHistory ls on ls.fkOrderId = o.pkOrderID and     ls.fkOrderHistoryTypeId='EMAIL_SENT'    and ls.Tag='FEEDBACK'
WHERE 
    o.bProcessed = 1 AND o.HoldOrCancel=0 AND o.dProcessedOn > DATEADD(D,-10,GETDATE()) AND ls.sid_history is null 
    AND o.Source IN ('AMAZON');"; 
//SELECT pkOrderId,ItemNumber = oi.ItemNumber,ItemTitle = sis.cItemName
//FROM [Order] o
//INNER JOIN [OrderItem] oi on oi.fkOrderID = o.pkOrderID
//INNER JOIN [StockItems] sis on sis.pkStockID = oi.fkStockID
//LEFT OUTER JOIN Order_LifeHistory ls on ls.fkOrderId = o.pkOrderID and     //ls.fkOrderHistoryTypeId='EMAIL_SENT'    and ls.Tag='FEEDBACK'
//WHERE 
//o.bProcessed = 1 AND o.HoldOrCancel=0 AND o.dProcessedOn > DATEADD(D,-10,GETDATE())     //AND ls.sid_history is null 
//AND o.Source IN ('AMAZON');"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:20:48.843

我建议一个调度框架。`Quartz.net`是一个很好的，并且非常容易学习/实施

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:22:38.810

您始终可以使用计划任务/cron 作业来实现您的计时器。

# javascript - 如何在javascript中对对象元素进行排序？

> ID：11797538
> 
> 赞同：1
> 
> 时间：2012-08-03T14:17:56.083
> 
> 标签：javascript

> **可能重复：**
> [对 JavaScript 对象](https://stackoverflow.com/questions/1359761/sorting-a-javascript-object)
> [进行排序 按键对 JavaScript 对象进行排序](https://stackoverflow.com/questions/5467129/sort-javascript-object-by-key)

我有数组：

```
var arr = {}
arr[2323] = 1
arr[123] = 1
...
arr[n+232323] = 1 
```

如何获取按键排序的对象的所有元素（数字顺序？）

```
for ( key in arr ) {
     alert(typeof(key))
} 
```

返回字符串类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:21:39.997

这不是一个关联数组，这是一个对象。javascript 中没有关联数组。

此外，对象没有排序。对象中键的顺序是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:22:54.660

假设出于某种原因您首先不使用数组，您可以获得可枚举对象属性的数组，然后对该数组进行排序......

```
var sorted = Object.keys(my_obj)
                   .sort(function(a,b) {
                            return a - b;
                         }); 
```

这假设键是数字的。

然后您可以迭代数组，并使用每个键从`my_obj`...中获取值

```
sorted.forEach(function(key) {
                   console.log(my_obj[key]);
               }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:23:30.023

**简短的回答**：你不能。

**长答案**：JavaScript 中的关联数组实际上是 JavaScript 对象。当您添加一个新元素时，您实际上是在向该对象添加一个新成员。虽然大多数浏览器会按照添加的顺序枚举这些成员，但标准规定顺序是未定义的。您无法对未定义的内容进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T14:23:56.610

JavaScript 对象（地图/字典/关联数组）没有顺序，您无法对它们进行排序。您需要先将其转换为数组。由于您在循环中只需要对象的键，因此该[`Object.keys()`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)（对于旧浏览器可能需要一个 shim）用于该任务：

```
var obj = {...};
var keys = Object.keys(obj).sort(function(a,b){return a-b;}); // numerically sorted
for (var i=0; i<keys.length; i++) {
    alert(keys[i]);
    // access the values by obj[keys[i]]
} 
```

# .net - 我如何知道用户是否更改了 ComboBox 中的选定项？

> ID：11797544
> 
> 赞同：3
> 
> 时间：2012-08-03T14:18:34.927
> 
> 标签：.net, winforms, combobox

问题在于 SelectedIndexChanged 事件在用户进行更改时以及应用程序代码设置 SelectedItem 进行更改时都会被调用。

有没有办法判断项目是否被用户通过鼠标或键盘的直接操作更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:41:35.827

试试这样的[SelectedChangeCommitted MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)

```
private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
{

    ComboBox comboBox = (ComboBox) sender;

    // Change the length of the text box depending on what the user has 
    // selected and committed using the SelectionLength property.
    if (comboBox.SelectionLength > 0)
    {
        textbox1.Width = 
            comboBox.SelectedItem.ToString().Length *
            ((int) this.textbox1.Font.SizeInPoints);
        textbox1.Text = comboBox.SelectedItem.ToString();
    }
} 
```

# php - 正则表达式 PHP

> ID：11797546
> 
> 赞同：1
> 
> 时间：2012-08-03T14:18:36.340
> 
> 标签：php, regex

我有一个增值税号码列表。问题是，其中一些在开头包含两个字符的国家 ISO 代码，而另一些则没有。如果它们存在，我需要去除这两个字母，例如，es7782173x 变为 7782773x 并且 969652255801 保持不变。请帮助我使用正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:24:26.833

从头开始替换所有字母的 PHP 正则表达式：

```
$vat = 'es7782173x';
$vat = preg_replace('/^\D+/', '', $vat); 
```

`\D`匹配任何不是数字的东西，并用空字符串替换它`''`有效地从开头（`^`锚点）剥离它。`+`匹配 1 次或多次出现。

# c# - GC.KeepAlive。不同版本的不同 MSDN 文章。他们有什么改变吗？

> ID：11797548
> 
> 赞同：0
> 
> 时间：2012-08-03T14:18:49.787
> 
> 标签：c#, garbage-collection

.NET Framework v.2 的文章包含两个示例。 [http://msdn.microsoft.com/en-us/library/system.gc.keepalive(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.gc.keepalive(v=vs.80).aspx)

第一个特别有趣，因为它有助于理解垃圾收集器的行为。

但其他 versinos 不包含类似的示例。.NET Framework GC 中缺少的示例发生了什么变化变得不实际？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:37:42.627

我没有看到该示例中的任何内容在更高版本中都无效。

我猜他们的动机是出于以下两个原因之一：

1.  示例代码不是很有用（尽管它**确实**演示了它要演示的内容），并且除了浪费内存之外没有实际效果，它可能会成为另一种鼓励人们做奇怪事情的事情，`GC`这会降低性能。
2.  示例代码是另一段必须测试、维护和修复错误的代码。删除一个示例，并减少您的测试和错误修复开销。

# android - 在 Android 中创建片段？

> ID：11797552
> 
> 赞同：2
> 
> 时间：2012-08-03T14:19:16.330
> 
> 标签：android

```
@Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(tab.getPosition()==0)
        {
            FragmentA frag = new FragmentA();
            ft.replace(android.R.id.content, frag);

        }
        else
        {
            FragmentB frag = new FragmentB();
            ft.replace(android.R.id.content, frag);
        }
    } 
```

上面的代码在片段中加载，问题是它为每个片段创建了一个新实例，因此在标签之间来回切换时，片段会重新加载。制作它的最佳方法是什么，以便它不会每次创建每个片段的新实例而只使用原始实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:23:02.160

在你的类中使用一个属性

```
private frag = new Fragment();
...

    if(tab.getPosition()==0)
    {
        ft.replace(android.R.id.content, frag);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:30:53.333

您将需要添加一个方法来将片段推送到后台堆栈或弹出项目，以便我们可以重用已经在后台堆栈中的片段。以下函数中的“名称”参数提供了定位和弹回的最佳方式（如果需要）

```
private void popToOrPushFragmentWithName(Fragment fragment, String name, FragmentTransaction ft) {
    FragmentManager manager = getSupportFragmentManager();

    // Scan the back stack for an entry with the given fragment name
    int count = manager.getBackStackEntryCount();
    FragmentManager.BackStackEntry entry = null;
    while (--count >= 0) {
        FragmentManager.BackStackEntry check = manager.getBackStackEntryAt(count);

        if (check.getName() != null && check.getName().equals(name)) {
            entry = check;
            break;
        }
    }

    if (entry == null) {
        // There is no entry, so push the fragment
        ft.replace(R.id.fragment_container, fragment);
        ft.addToBackStack(name);
        // might not need this next line (since you are using tabselected override)
        ft.commit();
    } else {
        // Pop back to the existing fragment (0 = not inclusive, so our fragment by index is on top)
        manager.popBackStackImmediate(entry.getId(), 0);
    }
} 
```

您的 onTabselected 应如下所示：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(tab.getPosition()==0)
    {
        FragmentA frag = new FragmentA();
        popToOrPushFragmentWithName(frag, "FragmentA", ft);

    }
    else
    {
        FragmentB frag = new FragmentB();
        popToOrPushFragmentWithName(frag, "FragmentB", ft);
    }

} 
```

我希望这有帮助。:)

# c# - 选中多个复选框时选择从数据库

> ID：11797553
> 
> 赞同：1
> 
> 时间：2012-08-03T14:19:16.387
> 
> 标签：c#, database, checkbox

选中多个复选框后，如何从数据库中选择多行。这是代码。如果您查看我使用查询字符串的行，则会出现双重请求，我不知道我还需要插入什么。

```
@{
    var db = Database.Open("Checkbox");
    var sql = "SELECT * FROM Brands";
    var select = db.Query(sql);
    dynamic execute = "";
    List<String> selected = new List<string>();
    int count = 0;
    List<dynamic> exec = new List<dynamic>();

    if(IsPost){
        if(Request["List"] == null){
            Response.Redirect("~/Checkbox");
        }
        selected = Request["List"].Split(',').ToList();

        count = Request["List"].Count();

        var sqls = "SELECT * FROM Brands WHERE Name = @0 OR Name = @1";
        exec = db.Query(sqls, Request["List"], Request["List"]);

}

<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>Checkbox Multiple</title> 
</head>
<body>
    @foreach(var values in exec){
        <span>@values.BrandID</span>
    }

    <form method="post" action="">
    @foreach(var item in select){
    <label>@item.Name</label>     
    <input type="checkbox" multiple="multiple" name="List" value="@item.Name"><br>
    }
    <input type="submit" value="Send">    
        </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:23:14.927

您可以尝试在查询中使用并构造一个逗号分隔的字符串并将其弹出到查询中。

```
string inClause = "1, 2, 3";

var sqls = "SELECT * FROM Brands WHERE Name in (" + inClause +")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:08:38.683

您可以创建一个拆分逗号分隔列表的 SQL 函数

```
 SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER FUNCTION [dbo].[Split]      
(      
 @RowData varchar(8000),      
 @SplitOn nvarchar(5)      
)       
RETURNS @RtnValue table      
(      
 Id int identity(1,1),      
 Data nvarchar(100)      
)      
AS       
BEGIN      
 Declare @Cnt int      
 Set @Cnt = 1      

 While (Charindex(@SplitOn,@RowData)>0)      
 Begin      
  Insert Into @RtnValue (data)      
  Select      
   Data = ltrim(rtrim(Substring(@RowData,1,Charindex(@SplitOn,@RowData)-1)))      

  Set @RowData = Substring(@RowData,Charindex(@SplitOn,@RowData)+1,len(@RowData))      
  Set @Cnt = @Cnt + 1      
 End      

 Insert Into @RtnValue (data)      
 Select Data = ltrim(rtrim(@RowData))      

 Return      
END 
```

现在您可以将逗号分隔的列表传递给此函数。

假设@configIds ='1,2,3,4,6,17' 它将为每个ID分别插入数据

```
 INSERT INTO ABC      
(ID,patient_id,created_user,created_date)      
SELECT data, @patient_Id, @created_user, Getdate()FROM Split(@configIds,',') 
```

或者它可以在更新新的复选框列表选择记录时使用首先删除不在逗号分隔列表中的记录（@configIds）

```
DELETE FROM ABC WHERE ID IN                     
( SELECT DISTINCT ID FROM ABC WHERE Patient_ID=@patient_Id                                       
AND ID NOT in (SELECT Ltrim(Rtrim(Data)) FROM Split(@configIds,','))                    
) 
```

更新代码.....

删除块后将Update标志设置为true或根据checkboxlist新选择的记录更新记录

# java - 出现对话框，只允许使用字符，但在对话框上单击确定后，数字也输入到文本字段中

> ID：11797555
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:19:25.520
> 
> 标签：java, swing

数字也输入名称文本字段，此代码无法正常工作。请举例帮助我。

```
 Name_text.addKeyListener(new KeyAdapter() { 

        @Override
        public void keyTyped(KeyEvent e) {
           if(e.getKeyChar()>='0'&& e.getKeyChar()<='9'|| e.getKeyChar()>=33&& e.getKeyChar()<=47|| e.getKeyChar()>=58&& e.getKeyChar()<=64 || e.getKeyChar()>=91&& e.getKeyChar()<=96 || e.getKeyChar()>=123&& e.getKeyChar()<=127 ){
          JOptionPane.showMessageDialog(null, "enter characters only");
        }
        }
           }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:39:49.273

您发布的代码仅显示一个对话框，抱怨不允许使用数字（通过丑陋的检查，正则表达式有什么问题`[0-9]`），但它不会删除输入。

此外，如其他答案所述，有内置的验证机制或更好的方法，然后使用`KeyListener`：

*   `JFormattedTextField`是用于验证用户输入的文本字段。它需要一些调整来提高可用性（例如，参见[这篇博文](http://tips4java.wordpress.com/2010/02/21/formatted-text-field-tips/)）
*   使用`InputVerifier`. 这里没有链接，因为我不喜欢这种机制。只是为了完整性而提及它
*   使用 a[`DocumentListener`而不是 a`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)，这可以抑制某些输入，并且在使用拖放或复制粘贴时也可以使用，这对您的情况不适用`KeyListener`

示例可以在链接中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:26:36.147

有更好的方法来完成你想要的。

查看[JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

# php - PHP - 让你的类完成所有工作而不用类的脚本做太多工作可以吗？

> ID：11797556
> 
> 赞同：2
> 
> 时间：2012-08-03T14:19:25.863
> 
> 标签：php, oop, class

这只是一个意见问题，但我不想引起辩论。我只是想要专业的反馈，让你的类完成所有工作到你只需要实例化对象的地方是好的做法还是坏的做法。如果一切顺利，那么无论你的应用程序中的什么，你都可以在课堂上进行下一步。如果出现问题，您还可以创建一个函数来在类中发出错误。

我使用神奇的 __construct 方法完成所有这些，并且我的所有属性都是私有的（或者如果我需要扩展某些东西，则为受保护）......我的大多数方法也是私有/受保护的，除了我不使用的 getter 和 setter无论如何都要使用很多，因为一切都发生在课堂上。

例如，我有一个登录类，您只需在实例化它时向它提供用户名和密码参数，一切都发生在 __construct 我不需要使用该类对我的脚本做任何事情。另外...与我的注册课程相同...您只需再次为其提供参数，该课程即可完成所有工作。我根本不需要用脚本来操作我的课程。

好的做法还是坏的做法？我想成为一名专业人士，我想像一个人一样开始编码，但也许我做得很好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:29:32.203

我投票决定关闭它，因为它可能会引发一场相对无用的辩论。

无论如何，关于构造函数有两大理论：单阶段和多阶段。你正在做单阶段。许多人主张单阶段。但是，我认为这是不好的做法。为什么？

因为它使测试变得更加困难。当您编写测试时，您想测试对象的各个功能......但是如果您的构造函数完成了*所有*不可能的事情。

这也使得以后将对象重用于不同的目的变得更加困难。除了在构造函数中调用一个额外的方法之外，您的对象可能会做您需要它做的所有事情——所以现在您必须稍微重写它并至少在几个地方更改它的调用方式。

*真正的*答案是在你的项目范围内做你最舒服的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:31:58.527

该方法`__construct`应该只实例化（验证/准备实例化的值）对象而不是别的。就这样。您的类在构造函数中完成所有工作是不合逻辑的。

**编辑：** 良好做法：

```
Application app = new Application(context); // create application
app.run(); // run it 
```

不良做法：

```
new Application(context) // create & run application 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:31:04.697

[只是我的 2 美分]

老实说，您还不如只使用一个函数来描述您所描述的内容。

在我看来，您正在使用您的类作为功能/功能的集合。

这没关系，它使您的代码更有条理，但您并没有真正使用 OOP 的力量。

OOP 的真正强大之处不仅在于您可以在概念上捆绑函数（也可以使用包含概念相关函数的适当包含文件来完成），而且 OOP 的真正强大之处在于您可以将有用的子类化现有的类。

在我看来，如果您对 OOP 感到不舒服，请不要被迫完全采用 OOP。使用 OOP 完成的所有任务也可以使用过程方法完成。通常，对于更平凡的任务，程序方法的编程速度更快，并且与面向对象一样清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:24:47.193

这个问题的思路是“使用整数还是浮点更好”。好吧，这取决于情况。

什么 WORKS 和什么是“标准”是不一样的。如果您的方法有效，并且易于调试和维护，那么它是一个很好的解决方案。

# asp.net - asp.net mvc 内存泄漏

> ID：11797560
> 
> 赞同：3
> 
> 时间：2012-08-03T14:19:40.717
> 
> 标签：asp.net, asp.net-mvc-3, memory, ninject, cpu-usage

**背景：** 使用 Ninject 2.2.0.0 IoC、存储库模式和服务层的 Asp.net 项目 (VB.Net)

Ninject 绑定使用 InRequestScope()

**问题：** 项目即将上线，但压力测试显示该站点正在以高速率使用内存，并且在使用后没有将其丢弃。给出一个想法：每个业务流程在大约 2 分钟内每个用户实例的内存使用量约为 70 - 100 MB，因此 16 个模拟用户设法在 10 分钟内导致内存（和 CPU）过载和站点崩溃。（服务器有 8GB RAM，没有其他重要的进程在上面运行）。

尝试了以下解决方案：尝试在 BaseController（由所有 Controller 继承）、基本存储库和主数据库上下文中实现使用带有 Dispose 的块。

由于 dbcontext 立即被释放，因此无法加载站点，因此必须将其从 dispose 中删除。

使用 ANTS 内存分析器并没有真正使用，但 ANTS 性能分析器显示 Ninject 无法访问 Dispose 函数。它试图在 C:\Projects\Ninject\Maintenance2.2\ninject\src\Ninject\Infrastructure\Disposal 文件夹中查找 DisposableObject.cs。在那里找不到它，所以崩溃了。ANTS Reflector 确实从 Ninject.dll 反编译了相同的 DisposableObject 代码，所以不知道它为什么要在它不存在的默认目录中寻找它。

所以尝试从 2.2.0.0 升级 Ninject。使用 Nuget 到 v3`PM> Install-Package Ninject.MVC3` 经过一些更改后，它可以工作，但现在我坚持使用 2.2.0.0 版中的 ActionFilterAttribute，使用 NinjectFactoryController 获取其内核绑定，如下所示：

```
Private _mailService As IEmailService

_mailService = New StandardKernel(New NinjectControllerFactory.QuickQuoteServices()).Get(Of IEmailService)() 
```

现在对于 Ninject.MVC3，NinjectFactoryController 已被注释掉，所有绑定现在都在 App_Start 文件夹中 NinjectWebCommon.vb 的注册服务部分（从页面[https://gist.github.com/923618](https://gist.github.com/923618)上的第二个代码块获得的 VB 代码）。

因此不得不将 ActionFilterAttribute 代码更改为：

```
<Inject()>
Private _mailService As IEmailService 
```

（NinjectFactoryController 行已被注释掉）。

这将 _mailService 作为 Nothing 返回，因此实际上绑定不起作用。

虽然，在使用这个新的 Ninject.MVC3 版本的 ANTS 内存分析器中没有观察到内存改进。

ANTS 性能分析器工作时没有崩溃，但似乎仍在寻找错误位置的其他文件（如 KernelBase.cs、ExtensionsForIEnumerableOfT.cs、Binding.cs 等，所有错误均表明在查找时未找到此文件的源代码在 c:\Projects\Ninject\ninject\src\Ninject... 文件夹中）。

我们仍然无法到达内存泄漏/过载的原点，但很明显，应用程序池在每次运行部分业务逻辑时都会累积 70 到 100 MB 的数据，然后这些内存没有被释放直到站点完全不活动 20 分钟（基于 ISS 7 Idle-Timeout），这根本没有帮助，因为站点在达到该阶段之前就崩溃了。

任何意见，将不胜感激。

亲切的问候，

*   阿布拉尔

* * *

编辑：

在一些指导下最终设法让 Ninject 3.0 工作。

此外，有关在 ActionFilterAttribute 中使用 Ninject 3 的问题已使用如下属性声明解决：

```
<Inject()>
    Public Property _mailService() As IEmailService
        Private Get
            Return m_mailService
        End Get
        Set(value As IEmailService)
            m_mailService = value
        End Set
    End Property
    Private m_mailService As IEmailService 
```

既然 Ninject 3 在那里工作，内存问题略有改善（即，内存释放比以前多一点），但现在出现了一个新问题。CPU使用率非常高。这个问题甚至在 Ninject 从 2.2 升级到 3.0 之前就已经存在，但升级似乎对其没有任何影响。CPU 仍然在只有 2-3 个用户的情况下达到最大值，这使得网站没有响应，最终在使用大约 10 分钟内崩溃。

任何想法将不胜感激。

亲切的问候，

*   阿布拉高频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:11:47.987

您正在创建一个新的 StandardKernel 只是为了获取服务实例，这一事实让我相信您以错误的方式使用 Ninject。

NinjectMVC3 类中应该只有一个 New StandardKernel

# php - 使用简单 cURL 登录必发

> ID：11797561
> 
> 赞同：0
> 
> 时间：2012-08-03T14:19:41.293
> 
> 标签：php, curl, login, betfair

我需要每天几次在 betfair.com 上查看某些价格。网站抓取最适合此目的。我唯一需要做的就是立即登录网站。因为我有一个不再使用的帐户，所以安全不是问题，它只需要工作即可。我对 cURL 请求使用以下选项，但它不起作用。

```
CURLOPT_URL=>'http://www.betfair.com/en/',
CURLOPT_COOKIEJAR=>'cookie.txt',
CURLOPT_COOKIEFILE=>'cookie.txt',
CURLOPT_POST=>1,
CURLOPT_RETURNTRANSFER=>1,
CURLOPT_SSL_VERIFYPEER=>0,
CURLOPT_SSL_VERIFYHOST=>0,
CURLOPT_FOLLOWLOCATION=>1,
CURLOPT_POSTFIELDS=>'username=user&password=pass 
```

# javascript - 动态更改表单操作以生成 iframe

> ID：11797564
> 
> 赞同：0
> 
> 时间：2012-08-03T14:19:57.363
> 
> 标签：javascript, forms, iframe

我正在尝试动态更改表单的操作，以便它生成 iframe 而不是发布到下一页。这是我的代码：

```
var formItem = document.getElementsByTagName("form")[2].action = createIframe();
function createIframe(){
   ifrm = document.createElement("IFRAME"); 
   ifrm.setAttribute("src", "http://127.0.0.1/myIframe.html"); 
   ifrm.style.width = "50%"; 
   ifrm.style.height = "50%"; 
   document.body.appendChild(ifrm); 
} 
```

使用上面的代码，iframe 会立即生成，然后单击按钮提交表单会返回一个未定义的页面。我哪里错了？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:43:39.440

我建议`action`将该表单设置为`""`然后调用该函数`onsubmit`：

```
window.onload = function() {
  var formItem = document.getElementsByTagName("form")[2];
  formItem.setAttribute('action', '');
  formItem.addEventListener('submit', createIframe, false);
}

function createIframe(){
  var ifrm = document.createElement("IFRAME"); 
  ifrm.setAttribute("src", "http://127.0.0.1/myIframe.html"); 
  ifrm.style.width = "50%"; 
  ifrm.style.height = "50%"; 
  document.body.appendChild(ifrm); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:52:20.263

你想做这样的事情吗？

```
<form onSubmit="javascript: return createIframe();" action="">
    <input type="submit" value='submit'/>
</form>

<script type="text/javascript">
    function createIframe(){
       ifrm = document.createElement("IFRAME");
       ifrm.setAttribute("src", "http://127.0.0.1/myIframe.html");
       ifrm.style.width = "50%";
       ifrm.style.height = "50%";
       document.body.appendChild(ifrm);
       return false;           
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:52:29.720

您可以收听该元素的`submit`事件。`form`为了防止浏览器继续，直接返回false即可：

```
formItem.addEventListener('submit', function (e)) {
    createIframe();
    return false;
}); 
```

备注：您的第一行做了两件事：它将指定元素`formItem` **的**`action`属性**设置**为.`createIframe`

# asp.net - Asp.net SQL 支持的会话

> ID：11797567
> 
> 赞同：1
> 
> 时间：2012-08-03T14:20:11.463
> 
> 标签：asp.net

如果我有 SQL Server 支持的会话并运行类似的命令序列

```
HttpContext.Current.Session['user']
HttpContext.Current.Session['user'] 
```

这会向会话 DB 表发出 2 个请求以获取值，还是 asp.net 对 Session 对象做任何特殊处理以防止多次 DB 命中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:27:22.873

绝对是的。

我有 SQL 服务器会话状态设置，并在其上运行 Profiler。并且可以清楚地看到优化的数据库调用。如果事实上有一次获得多个会话项目的优化。

像下面的代码也将导致 SINGLE 优化的调用集（注意：它不是一个普通的单个 DB 调用来获取会话项）

```
HttpContext.Current.Session['user']
HttpContext.Current.Session['userTwo'] 
```

注意：在 .NET 4 中测试

如果需要，您可以实现自己的会话状态提供程序。 [http://msdn.microsoft.com/en-us/library/ms178587.aspx](http://msdn.microsoft.com/en-us/library/ms178587.aspx)

# perl - Perl：无法打开文件名作为参数传递的文件

> ID：11797568
> 
> 赞同：1
> 
> 时间：2012-08-03T14:20:19.133
> 
> 标签：perl, parameter-passing, filenames

我将 DOS 批处理文件中的两个文件名传递给 Perl 脚本。

我的 $InputFileName = $ARGV[0]; 我的 $OutputFileName = $ARGV[1];

只有输入文件物理存在，而输出文件必须由脚本创建。

```
open HANDLE, $OutputFileName or die $!;
open (HANDLE, ">$OutputFileName);
open HANDLE, ">$OutputFileName" or die $!; 
```

这三个都失败了。

但是，以下工作正常。

```
open HANDLE, ">FileName.Txt" or die $!; 
```

什么是正确的语法？

编辑：错误消息是：在第 nn 行的 Batchfile.pl 中没有这样的文件或目录

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:30:58.833

正确的方法是使用带有词法文件句柄的三参数形式`open`（将模式作为单独的参数）。也`die`没有资本`D`。

像这样

```
open my $out, '>', $OutputFileName or die $!; 
```

但是假设您`die`在实际代码中拼写正确，您的最后一个示例应该可以工作。

如果您提供的文件名路径不存在，那么您还需要创建中间目录。

骰子串会告诉你确切的问题。失败时您会收到什么消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:25:21.010

代码：

```
$file_name = $ARGV[1];

open (OUTPUT "> $file_name") or error("unable to create or open $file_name");

print OUTPUT "hello world";

close(OUTPUT); 
```

要执行的命令：

```
perl perl_file.pl data.txt 
```

它会工作尝试

# facebook-graph-api - 照片不在任何相册 facebook

> ID：11797569
> 
> 赞同：2
> 
> 时间：2012-08-03T14:20:20.730
> 
> 标签：facebook-graph-api, photo

我注意到有些照片没有出现在任何相册中。这张照片是由粉丝在 Facebook 页面上发布的。有什么方法可以通过 API 获取这些照片吗？API 调用 /feed 返回了墙上的所有帖子，但是我在浏览器上的墙上看到的许多这张照片并没有出现在 API 的响应中。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:47:15.847

尝试使用下面

```
https://graph.facebook.com/<YOUR_PAGE_NAME>/picture 
```

希望这有帮助

考希克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:59:53.707

我用

```
graph.facebook.com/PAGEID/photos 
```

所需权限：`user_photo_video_tags`或`friends_photo_video_tags`。

参考： http: [//developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)用户照片

[http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fphotos](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fphotos)

我有这个用法的一个活生生的例子是你想测试的。它是一个 iframe 插件，可为页面提供照片。“未为用户设置”。只需将“anotherfeed”页面用户名替换为任何页面即可。

[https://anotherfeed.com/api.beta.php?type=photos&pageid=anotherfeed&width=350&height=500&limit=20&offset=0](https://anotherfeed.com/api.beta.php?type=photos&pageid=anotherfeed&width=350&height=500&limit=20&offset=0)

# html - 如何使列表与图像和按钮内联？

> ID：11797570
> 
> 赞同：4
> 
> 时间：2012-08-03T14:20:31.557
> 
> 标签：html, css

我想让这两个项目相互内联，每个列表项都有一个图像和按钮，按钮应该在每个图像下方：即

```
<div id="cocktails">
    <ul>
        <li>
            <img src ="http://bokertov.typepad.com/.a/6a00d83451bc4a69e2014e8a8f894b970d-800wi" width="100px" height="100px">
            <button>Select</button>
        </li>
        <li>
            <img src ="http://bokertov.typepad.com/.a/6a00d83451bc4a69e2014e8a8f894b970d-800wi" width="100px" height="100px">
            <button>Select</button>
        </li>
    </ul>
</div> 
```

CSS：

```
 #cocktails ul{margin:0;padding:0}
    #cocktails ul li{list-style-type:none;display:inline;padding:0}
    #cocktails ul li img{width:150px;height:150px;display:block;float:left;padding:0 10px}
    #cocktails ul li button{display:block;float:left} 
```

但按钮没有按预期定位jsfiddle在这里：http: [//jsfiddle.net/8KWGJ/](http://jsfiddle.net/8KWGJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:31:57.327

将按钮包含在 li 标签中：

```
<div id="cocktails">
<ul>
    <li>
        <img src ="http://bokertov.typepad.com/.a/6a00d83451bc4a69e2014e8a8f894b970d-800wi" width="100px" height="100px">
        </li>
    <li>   <button>Select</button>
    </li>
    <li>
        <img src ="http://bokertov.typepad.com/.a/6a00d83451bc4a69e2014e8a8f894b970d-800wi" width="100px" height="100px">
     </li>
    <li>   <button>Select</button>
    </li>
</ul> 
```

并注释 css，如图所示：

```
#cocktails{float:left;width:419px}
#cocktails ul{margin:0;padding:0}
#cocktails ul li{list-style-type:none;display:inline;padding:0}
/*#cocktails ul li img{width:150px;height:150px;display:block;float:left;padding:0 10px}*/
 /*#cocktails ul li button{display:inline;}*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:24:26.297

[http://jsfiddle.net/8KWGJ/3/](http://jsfiddle.net/8KWGJ/3/)

我向左浮动`<li>`，而不是里面的按钮和图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:33:53.237

这对我有用。

```
#cocktails ul{margin:0;padding:0}
#cocktails ul li{list-style-type:none; width:150px; float:left; margin:10px;}
#cocktails ul li img{width:150px;height:150px; }
#cocktails ul li button{ margin-left:50px; width:50px} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:24:46.367

将浮动从图像更改为`li`.

[演示](http://jsbin.com/osuwib/1)

```
#cocktails ul {
  margin:0;
  padding:0;
}
#cocktails ul li{
  list-style-type:none;
  display:inline;
  float: left;
  padding:0;
}
#cocktails ul li img{
  width:150px;
  height:150px;
  display:block;
  padding:0 10px;
}
#cocktails ul li button {
  display:block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:25:50.353

将您的图像设置为`display:block;`和 li to `float:left;`应该可以解决您的问题。

[例子](http://jsfiddle.net/8KWGJ/5/)

我已经删除了你所有的 CSS，并且只暗示了解决你的问题所需的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:25:50.380

你可以这样做：[**JSFIDDLE**](http://jsfiddle.net/8KWGJ/10/)

改变

```
#cocktails ul li{list-style-type:none;display:inline;padding:0}
#cocktails ul li img{width:150px;height:150px;display:block;float:left;padding:0 10px}
#cocktails ul li button{display:block;float:left} 
```

至

```
#cocktails ul li{list-style-type:none;display:inline;padding:0;float:left;}
#cocktails ul li img{width:150px;height:150px;display:block;padding:0 10px}
#cocktails ul li button{display:block;margin:auto} 
```

​ ​</p>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T14:27:48.757

添加

`clear:both;`对于按钮和图像。还要给按钮留一些余量。

```
#cocktails{float:left;width:419px}
#cocktails ul{margin:0;padding:0}
#cocktails ul li{list-style-type:none;display:inline;padding:0;}
#cocktails ul li img{width:150px;height:150px;display:block;float:left;padding:0 10px; clear: both;}
#cocktails ul li button{display:block;float:left;clear:both; margin-left: 60px;} 
```

[http://jsfiddle.net/8KWGJ/8/](http://jsfiddle.net/8KWGJ/8/)

有时显示块不起作用。因此，在使用 clear 时使用 display:block; 您可以清除左、右或两者。所以根据要求使用 clear 。

希望这可以帮助。

# sql - 带有 JOIN 和多个条件的 SQL 查询

> ID：11797582
> 
> 赞同：5
> 
> 时间：2012-08-03T14:21:05.217
> 
> 标签：sql, select, join

我在制定 SQL 查询时遇到问题。我运行以下命令：

```
SELECT *
FROM tasks
LEFT JOIN plans
ON plans.task_id = tasks.id 
```

并得到这个结果集：

```
task.id task.description  plan.id plan.task_id plan.date
-------|-----------------|-------|------------|------------
   1    Foo                  1         1        1998-01-01
   2    Foobar               2         2        2012-02-25
   2    Foobar               3         2        2012-12-12
   3    Foobass              4         3        2012-12-24
   4    Bassbar
                       ... and lots of more records 
```

今天是 2012-08-03。我想要具有以下条件的所有任务：该任务从未被计划过*或*该任务在过去已经计划过但没有未来计划。

在上面的示例中，以下任务满足此条件：

*   1 富
*   4 低音炮

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:24:09.533

试试这个：

```
SELECT *
FROM tasks
LEFT JOIN plans
ON plans.task_id = tasks.id
WHERE tasks.description = 'Past' OR tasks.description = 'Not planned' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:24:18.040

```
SELECT *
FROM tasks
LEFT JOIN plans
ON plans.task_id = tasks.id
WHERE plan.week IS NULL OR (plan.week < DATEPART(week, GetDate()) AND plan.Year = YEAR(GETDATE()) 
```

您不应该使用`SELECT *`, 明确写出您需要的每一列。您没有提到是否也有年份列，您必须处理周数和年份。如果您只处理一周#，您将获得多年的结果。

听起来你可以只使用任务描述？？？如果可以使用任务描述，为什么要基于周列？

```
SELECT *
FROM tasks
LEFT JOIN plans
ON plans.task_id = tasks.id
WHERE tasks.description = 'Past' OR tasks.description = 'Not planned' 
```

啊哈，我现在了解您的数据，您可以有多个任务，但周数不同。这很简单，只需使用查询找到 MAX(Week#) GROUP BY 任务然后执行查询，我会写下来给我一分钟...

```
 CREATE TABLE #MyTest
(
 TaskID int,
 TaskYear int,
 TaskWeek int
)

INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (1, 2012, 4)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (2, 2012, 5)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (2, 2012, 36)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (3, 2012, 36)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (4, 2012, NULL)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (6, 2011, 5)
INSERT INTO #MyTest(TaskID,TaskYear,TaskWeek)
VALUES (6, 2010, 36)

SELECT
    TaskID,
    MAX(TaskWeek) AS WeekNumber,
    TaskYear
FROM
  #MyTest
GROUP BY 
    TaskID,
    TaskWeek,
    TaskYear
HAVING MAX(TaskWeek) < DatePart(week, GetDate()) OR MIN(TaskWeek) IS NULL

DROP TABLE #MyTest 
```

现在，这将为您提供每个`task.id`具有最大周数的唯一行。

# 最后结果

根据您的最终评论：

将此复制并粘贴到 sql management studio 中，我已为您评论：

```
CREATE TABLE #MyTest
(
 TaskID int,
 TaskDate datetime
)

--test for only in the past NOTHING in the future
INSERT INTO #MyTest(TaskID, TaskDate)
VALUES (1, '1998-01-01')

--test for planned in the future NOTHING in the past
INSERT INTO #MyTest(TaskID,TaskDate)
VALUES (3, '2012-12-24')

--test for no plan as all (IS NULL)
INSERT INTO #MyTest(TaskID,TaskDate)
VALUES (4, null)

--test for planned in the past but has an upcoming event in the future
INSERT INTO #MyTest(TaskID,TaskDate)
VALUES (6, '2011-12-23')
INSERT INTO #MyTest(TaskID,TaskDate)
VALUES (6, '2012-12-23')
INSERT INTO #MyTest(TaskID,TaskDate)

--test for planned in the past, NO upcoming event in the future
VALUES (8, '2012-1-23')
INSERT INTO #MyTest(TaskID,TaskDate)
VALUES (8, '2012-6-23')

--result should show:
-- task id = 1 (because of: performed in past but nothing in the future)
-- task id = 4 (because of: no plan at all) 
-- task id = 8 (because of: only past)

SELECT
    TaskID,
    YEAR(TaskDate) AS TheYear,
    DatePart(week, TaskDate) AS WeekNumber
FROM
  #MyTest
WHERE 
--handle no planning of a task...
((TaskDate IS NULL)
--eliminate any task id that is out in the future
OR TaskID NOT IN (SELECT TaskID FROM #MyTest WHERE TaskDate > GetDate()))
GROUP BY
    TaskID,
    Year(TaskDate),
    DatePart(week, TaskDate)

DROP TABLE #MyTest 
```

# json - JSONValue 到缩进字符串

> ID：11797583
> 
> 赞同：2
> 
> 时间：2012-08-03T14:21:06.980
> 
> 标签：json, delphi, indentation, stringification, jsonlint

在 Delphi XE2 中，我需要创建一个接收 a`JSONValue`并返回indented 的函数，`String`就像[JSONLint](http://jsonlint.com/)一样。这个 JSONValue 可以是任何类型的 JSON，可以是数组、对象，甚至只是一个字符串，所以我必须确保使用这个函数涵盖所有类型。我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:59:35.547

您必须递归地执行此操作。像这样的东西：

```
const INDENT_SIZE = 2;

procedure PrettyPrintJSON(value: TJSONValue; output: TStrings; indent: integer = 0); forward;

procedure PrettyPrintPair(value: TJSONPair; output: TStrings; last: boolean; indent: integer);
const TEMPLATE = '%s : %s';
var
  line: string;
  newList: TStringList;
begin
  newList := TStringList.Create;
  try
    PrettyPrintJSON(value.JsonValue, newList, indent);
    line := format(TEMPLATE, [value.JsonString.ToString, Trim(newList.Text)]);
  finally
    newList.Free;
  end;

  line := StringOfChar(' ', indent * INDENT_SIZE) + line;
  if not last then
    line := line + ','
  output.add(line);
end;

procedure PrettyPrintJSON(value: TJSONValue; output: TStrings; indent: integer);
var
  i: integer;
begin
  if value is TJSONObject then
  begin
    output.add(StringOfChar(' ', indent * INDENT_SIZE) + '{');
    for i := 0 to TJSONObject(value).size - 1 do
      PrettyPrintPair(TJSONObject(value).Get(i), output, i = TJSONObject(value).size - 1, indent + 1);
    output.add(StringOfChar(' ', indent * INDENT_SIZE) + '}');
  end
  else if value is TJSONArray then
    //left as an exercise to the reader
  else output.add(StringOfChar(' ', indent * INDENT_SIZE) + value.ToString);
end; 
```

这涵盖了基本原理。警告：我把这个写在我的头上。它可能不正确甚至编译，但这是一般的想法。此外，您必须提出自己的打印 JSON 数组的实现。但这应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:37:03.120

我采用了 Mason 的代码，做了读者练习，并将其放在一个单独的单元中：

```
unit uJSONTools;

interface

Uses
  Classes, SysUtils, DBXJSON;

procedure PrettyPrintJSON(JSONValue: TJSONValue; OutputStrings: TStrings; indent: integer = 0);
// Formats JSONValue to an indented structure and adds it to OutputStrings

implementation

const INDENT_SIZE = 2;

procedure PrettyPrintPair(JSONValue: TJSONPair; OutputStrings: TStrings; last: boolean; indent: integer);
const TEMPLATE = '%s : %s';
var
  line: string;
  newList: TStringList;
begin
  newList := TStringList.Create;
  try
    PrettyPrintJSON(JSONValue.JsonValue, newList, indent);
    line := format(TEMPLATE, [JSONValue.JsonString.ToString, Trim(newList.Text)]);
  finally
    newList.Free;
  end;

  line := StringOfChar(' ', indent * INDENT_SIZE) + line;
  if not last then
    line := line + ',';
  OutputStrings.add(line);
end;

procedure PrettyPrintArray(JSONValue: TJSONArray; OutputStrings: TStrings; last: boolean; indent: integer);
var i: integer;
begin
   OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + '[');
   for i := 0 to JSONValue.size - 1 do
      PrettyPrintJSON(JSONValue.Get(i), OutputStrings, indent + 1);
   OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + ']');
end;

procedure PrettyPrintJSON(JSONValue: TJSONValue; OutputStrings: TStrings; indent: integer = 0);
var
  i: integer;
begin
  if JSONValue is TJSONObject then
  begin
    OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + '{');
    for i := 0 to TJSONObject(JSONValue).size - 1 do
      PrettyPrintPair(TJSONObject(JSONValue).Get(i), OutputStrings, i = TJSONObject(JSONValue).size - 1, indent + 1);
    OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + '}');
  end
  else if JSONValue is TJSONArray then
    PrettyPrintArray(TJSONArray(JSONValue), OutputStrings, i = TJSONObject(JSONValue).size - 1, indent + 1)
  else OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + JSONValue.ToString);
end;

end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-07T22:15:03.530

为了增加 Doggen 和 Wheeler 的答案，我用以下替换替换了 PrettyPrintArray 例程，以确保数组对象用逗号分隔，否则 prettyprint 输出是无效的 json。

```
procedure PrettyPrintArray(JSONValue: TJSONArray; OutputStrings: TStrings; last:     boolean; indent: integer);
var i: integer;
begin
   OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + '[');
  for i := 0 to JSONValue.size - 1 do
      begin
      PrettyPrintJSON(JSONValue.Get(i), OutputStrings, indent + 1);
      if i < JSONValue.size - 1 then
         OutputStrings[OutputStrings.Count-1] := OutputStrings[OutputStrings.Count-1] + ',';
      end;
   OutputStrings.add(StringOfChar(' ', indent * INDENT_SIZE) + ']');
end; 
```

# ruby - 有没有更优雅的方法来用 Ruby 编写我的对象层次分析器？

> ID：11797589
> 
> 赞同：2
> 
> 时间：2012-08-03T14:21:40.740
> 
> 标签：ruby

我正在学习 Ruby，我编写了一个简单的函数，它返回变量的元模型层次结构。

```
def hiearchicalanalyzer(victim)
    if(victim.respond_to?('superclass'))
        if(victim.superclass == BasicObject)
            puts victim.superclass
        else
            puts victim.superclass
            hiearchicalanalyzer(victim.superclass)
        end
    else
        puts victim.class
        hiearchicalanalyzer(victim.class)
    end
end

hiearchicalanalyzer(5) 
```

有没有更优雅的方式在 Ruby 中编写这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:55:22.123

```
def hiearchicalanalyzer(object)
  puts klass = (Class === object) ? object : object.class
  hiearchicalanalyzer(klass.superclass) if klass.superclass
end 
```

*   不必`object.respond_to?('superclass')`仅仅使用来确保该对象是类。因为类的类总是`Class`，你可以使用方法[Object#is_a?](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F) `object.is_a?(Class)`并出于同样的目的而写作。或等效`Class === object`使用[Module#===](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D)。

*   `BasicObject.superclass`返回`nil`的行为类似于`false`条件语句。所以当你建立一个递归函数时，你可以用它来终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:27:53.370

```
def hiearchicalanalyzer victim
  if victim.respond_to?('superclass')
    puts victim.superclass
    if victim.superclass != BasicObject
       hiearchicalanalyzer(victim.superclass)
    end
  else
    puts victim.class
    hiearchicalanalyzer(victim.class)
  end
end 
```

..一个简单的简化。您可以为该声明添加一个衬里`if`，但 IMO 并不是更“优雅”。也尝试使用 2-space 制表符，并摆脱其中的一些括号。

你也可以做

```
def hiearchicalanalyzer(victim)
  unless victim.respond_to?('superclass')
    puts victim.class
    hiearchicalanalyzer(victim.class)
    return
  end
  puts victim.class
  hiearchicalanalyzer(victim.superclass) unless victim.superclass == BasicObject
end 
```

IMO 我更喜欢第一个，它更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:30:35.673

这是我的版本:)

```
def hiearchicalanalyzer(victim)
  return unless victim && victim != BasicObject
  target = if victim.respond_to?(:superclass)
    victim.superclass
  else
    victim.class
  end

  puts target
  hiearchicalanalyzer target
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T16:21:34.750

这是我的：

```
def hierarchical_analyzer(obj)
  puts c = obj.class
  while c.respond_to? :superclass
    puts c = c.superclass
  end
end 
```

# c# - 在 LoginView LoggedIn 模板中找不到控件

> ID：11797591
> 
> 赞同：4
> 
> 时间：2012-08-03T14:21:43.180
> 
> 标签：c#, asp.net, loginview

我试图在 LoginView LoggedIn 模板中获取 LoginName 控件，尽管有几种方法，但代码仍然无法工作。

我希望将默认用户名更改为客户名称。

这是代码：

```
 <asp:LoginView ID="LoginView1" runat="server">
   <LoggedInTemplate> 

                 Hello, <asp:LoginName ID="LoginName1" runat="server"></asp:LoginName>

                 <br /> 

                 <div style="text-align: right; margin-right: 5px "> 
                <asp:LoginStatus ID="LoginStatus1" runat="server" LogoutPageUrl="~/Home.aspx" Font-Underline="True" />
                </div></div>
        </LoggedInTemplate>

    </asp:LoginView> 
```

在后面的代码：

```
 protected void Login1_LoggedIn(object sender, EventArgs e)
    {

        LoginName loginName = LoginView1.FindControl("LoginName1") as LoginName;
        Response.Write(loginName.ToString());  //for now I used Response.Write for testing purposes
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T22:03:00.860

尝试这个：

```
 <asp:LoginView ID="LoginView1" runat="server">
  <LoggedInTemplate> 
    <asp:Label runat="server" ID="lblUserName" Text="" />
    <br /> 
    <div style="text-align: right; margin-right: 5px "> 
    <asp:LoginStatus ID="LoginStatus1" runat="server" LogoutPageUrl="~/Home.aspx" Font-Underline="True" />
  </LoggedInTemplate>
</asp:LoginView> 
```

在后面的代码中：

```
 if (!Page.IsPostBack)
    if (this.Page.User.Identity.IsAuthenticated)      
       (this.LoginView1.FindControl("lblUserName") as Label).Text = "Hello, " + this.Page.User.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:34:22.900

您好，您可以尝试使用此代码

```
LoginView1.LoggedInTemplate.FindControl("LoginName1") as LoginName; 
```

# android - osmdroid 地图贴图未显示在 ldpi 屏幕上

> ID：11797592
> 
> 赞同：2
> 
> 时间：2012-08-03T14:21:51.107
> 
> 标签：android, osmdroid

我有一个使用 osmdroid 的应用程序。在我的 Galaxy Nexus 上一切正常，但是当我在 Galaxy Mini 上尝试时，地图图块无法加载。URL 调用被正确触发，但我只看到充满正方形的背景......知道吗？

# iphone - 更改特定行颜色 uipicker

> ID：11797595
> 
> 赞同：2
> 
> 时间：2012-08-03T14:21:56.440
> 
> 标签：iphone, objective-c, ios, xcode

我有以下问题：我可以更改 uipicker 内行的文本颜色，但不能更改我想要的特定行的文本颜色，选择器变得混乱，很多文本标签变成蓝色。

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UILabel *retval = (UILabel*)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)];
    }
    retval.text = [arraySubSistemasDeSaude objectAtIndex:row];
    if(pickerView == subSistemaSaudePicker) {

        if ([retval.text isEqualToString:@"Seguros de saúde"]) {

            NSLog(@"ROW=%d",row);
            [retval setTextColor:[UIColor blueColor]];
        }
        if ([retval.text isEqualToString:@"Sistemas de Saúde e Equiparados"]) {
           NSLog(@"ROW=%d",row);
       [retval setTextColor:[UIColor blueColor]];

         if ([retval.text isEqualToString:@"Seguradoras-Acidentes de Trabalho, viação/pessoais e vida"]) {
            NSLog(@"ROW=%d",row);
            [retval setTextColor:[UIColor blueColor]];
         }
       if ([retval.text isEqualToString:@"Empresas, associações e outras entidades"]) {
            NSLog(@"ROW=%d",row);

            [retval setTextColor:[UIColor blueColor]];

       }

        [retval setBackgroundColor:[UIColor clearColor]];
        retval.font = [UIFont systemFontOfSize:14];

       }

    } else if(pickerView == horarioPicker) {
        retval.text =[arrayHorarios objectAtIndex:row];
        [retval setBackgroundColor:[UIColor clearColor]];
        retval.font = [UIFont systemFontOfSize:14];

    } else if(pickerView == examesPicker) {
        retval.text =[arrayExames objectAtIndex:row];
        [retval setBackgroundColor:[UIColor clearColor]];
        retval.font = [UIFont systemFontOfSize:14];

    } else if(pickerView == consultasPicker) {
        retval.text =[arrayConsultas objectAtIndex:row];
        [retval setBackgroundColor:[UIColor clearColor]];
        retval.font = [UIFont systemFontOfSize:14];

    }else {
        assert(NO);
    }
  return retval;
} 
```

对不起我的英语不好，我希望我能清楚地回答这个问题，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:37:32.550

问题是，您正在重用每一行的视图，并且当它不应该是蓝色时，您没有将 UILabel 颜色设置回黑色。

添加此代码...

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UILabel *retval = (UILabel*)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)];
    }
    [retval setTextColor:[UIColor blackColor]];
    retval.text = [arraySubSistemasDeSaude objectAtIndex:row];
    ...... 
```

有了这个，每次它拉出一个重用的视图时，它都会首先将颜色设置为黑色。然后代码将检查您想要的蓝色并将它们设置为蓝色。你这样做的方式是在其中一些上设置蓝色，然后当你重新使用它们时，你永远不会将它重置为黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:34:18.543

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row       forComponent:(NSInteger)component  reusingView:(UIView *)view {

  UILabel *pickerLabel = (UILabel *)view;

  if (pickerLabel == nil) {

        CGRect frame = CGRectMake(0.0, 0.0, 80, 32);
        pickerLabel = [[[UILabel alloc] initWithFrame:frame] autorelease];
        [pickerLabel setTextAlignment:UITextAlignmentLeft];
        [pickerLabel setBackgroundColor:[UIColor clearColor]];
        [pickerLabel setFont:[UIFont boldSystemFontOfSize:15]];
        [pickerLabel setTextColor:[UIColor blackColor]];
        [pickerLabel setText:@"MyTest"];

   }

   return pickerLabel;

} 
```

# python - django - int 参数必须是字符串或数字，而不是“元组”

> ID：11797597
> 
> 赞同：6
> 
> 时间：2012-08-03T14:22:02.377
> 
> 标签：python, django, forms, django-views, tuples

我已经看了几个小时了，我似乎无法理解为什么我会收到这条消息......

```
int() argument must be a string or a number, not 'tuple' 
```

在我的views.py的这一行上（注意：异常实际上发生在django核心更深的一层，但这是我最终触发异常的代码行）......

```
service_interest = ServiceInterest.objects.get_or_create(service = service, client = client) 
```

**为什么我会收到此错误？** 为了您的利益，请参阅下面的 models.py、forms.py 和 views.py 的片段。

模型.py：

```
class Client(models.Model):
  name = models.CharField(max_length=100)
  email = models.EmailField()
  site = models.URLField()
  contact_date = models.DateField(default = datetime.date.today())

class Service(models.Model):
  name = models.CharField(max_length=200)

class ServiceInterest(models.Model):
  service = models.ForeignKey('Service')
  client = models.ForeignKey('Client')

  class Meta:
    unique_together = ("service", "client") 
```

表格.py...

```
class ContactForm(forms.Form):

SERVICE_CHOICES = (
    ('first_choice', 'Description of first choice'),
    ('second_choice', 'Description of second choice'),
    ('third_choice', 'Description of third choice'),
    ('other', 'Other')
  )

  SERVICE_CHOICES_DICT = dict(SERVICE_CHOICES)

  name = forms.CharField(label='What would you like us to call you?', max_length=200, required=False)
  email = forms.EmailField(label='What is your email address?', help_text='Ex: yourname@gmail.com')
  url = forms.URLField(label='If you have a website, please provide a link', required=False, help_text="Ex: www.yoursite.com")
  service_interest = forms.MultipleChoiceField(label="Please check all of the services you're interested in:", widget=forms.widgets.CheckboxSelectMultiple, choices=SERVICE_CHOICES, required=True)
  other = forms.CharField(label='If you selected \"Other\", please specify:', max_length=200, required=False)
  message = forms.CharField(max_length=10000, required=False, label='Any other information you think we should know?', widget=forms.widgets.Textarea)

  def clean_other(self):
    cleaned_data = super(ContactForm, self).clean()
    if 'service_interest' in cleaned_data.keys():
      options = cleaned_data['service_interest']
      if 'other' in options:
        other_input = cleaned_data['other']
        if other_input == None or len(other_input) == 0:
          raise forms.ValidationError('Required when \"Other\" is checked')

    return cleaned_data 
```

来自views.py的相关代码：

```
 name = form.cleaned_data['name']
  email = form.cleaned_data['email']
  url = form.cleaned_data['url']
  interests = form.cleaned_data['service_interest']
  other = form.cleaned_data['other']
  message = form.cleaned_data['message']

  client = Client.objects.get_or_create(name = name, email = email, site = url)
  for interest in interests:
    service = None
    if(interest != 'other'):
      service = Service.objects.get_or_create(name = ContactForm.SERVICE_CHOICES_DICT[interest])
    else:
      service = Service.objects.get_or_create(name = other)

    # Appears to be responsible for the stack trace, even though exception
    # is one level deeper in...
    # /Library/Python/2.7/site-packages/django/core/handlers/base.py in get_response
    service_interest = ServiceInterest.objects.get_or_create(service = service, client = client) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T14:26:25.373

`get_or_create`返回一个元组，格式为`(instance, created)`. 第二个参数告诉你它是否必须创建它，很明显。请改为执行以下操作：

```
client, created = Client.objects.get_or_create(name = name, email = email, site = url) 
```

# java - 如何调用 Oracle Java 教程中的 findLargest 方法（将接口用作类型）

> ID：11797599
> 
> 赞同：2
> 
> 时间：2012-08-03T14:22:04.193
> 
> 标签：java

[我正在学习 oracle 教程，并且从这里开始](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html)对使用“接口作为类型”一章有一些疑问，因此我尝试了解**如何调用方法 findLargest**。

我试图修改一些源代码以获得更好的理解，但没有任何帮助:(

这是我的代码：

```
public class RectanglePlus implements Relatable {

    public int width = 0;
    public int height = 0;

    public RectanglePlus() {
    }

    public RectanglePlus(int w, int h) {
        width = w;
        height = h;
    }

    // a method for computing the area of the rectangle
    public int getArea() {
        return width * height;
    }

    // a method required to implement the Relatable interface

    public int isLargerThan(Relatable other) {
        RectanglePlus otherRect = (RectanglePlus) other;
        if (this.getArea() < otherRect.getArea()) {
            return -1;
        } else if (this.getArea() > otherRect.getArea()) {
            return 1;
        } else {
            return 0;
        }
    }

    // and here is the method that i cant invoke
    public RectanglePlus findLargest(RectanglePlus object1,
            RectanglePlus object2) {
        Relatable obj1 = (Relatable) object1;
        Relatable obj2 = (Relatable) object2;
        if ((obj1).isLargerThan(obj2) > 0) {
            return object1;
        } else {
            return object2;
        }
    }

    public static void main(String[] args) {
        RectanglePlus test1 = new RectanglePlus(10, 20);
        RectanglePlus test2 = new RectanglePlus(20, 20);
    }
} 
```

那么，如何调用 findLarge 方法来比较 test1 和 test 2？（我知道找到最大的对象是没有意义的，因为我是从方法isLargerThan知道的，但我只是试着理解一个原理）

它不是静态方法，所以我不能只说“RectanglePlus.findLarger(test1, test2)”。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:28:21.057

因为`findLargest`is not `static`，所以可以使用 any`RectanglePlus`来调用函数：

```
test1.findLargest(test1,test2); 
```

或者

```
test2.findLargest(test1,test2); 
```

# jquery - Internet Explorer 中输入类型 = 'reset' 中的错误

> ID：11797600
> 
> 赞同：1
> 
> 时间：2012-08-03T14:22:11.393
> 
> 标签：jquery, forms, internet-explorer

在 Internet Explorer 中使用 input type='reset' 时出现一个奇怪的错误。

我有这个表格用于搜索。我通过 jQuery 传递它以获得我的输出并且它可以工作。除非我使用重置。然后它什么也不返回。查询

```
function findExercise(idSearch) {

    $("#"+idSearch).submit(function() {

        var find = $(this).serialize();
        var php_file = "search.php?"+find
        alert(php_file);
        $("#ajax_output").load(php_file);

        return false;
    });

} 
```

形式

```
<form id='search'>
    <input value='' name='input1'>

    <select style='width:140px;' name='input2'>
        <option>option1</option>
        <option>option2</option>
        <option>option3</option>

    </select>
    <br />
<input type="submit" class="button" value="Search"><input id="resetform" type="reset" class="button" value="Clear"> 
```

在我点击重置之前它会返回

> search.php?input1=b&input2=option1

单击重置后它会返回

> search.php?input1=

这只发生在 IE 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:29:32.133

我想到了。似乎是我的选择导致了错误。它没有默认值，所以当 IE 重置它时，它会将它从循环中取出。我刚刚添加了以下选择并且它有效：D

```
<select style='width:140px;' name='input2'>
    <option selected="selected">option1</option>
    <option>option2</option>
    <option>option3</option>

</select> 
```

# mysql - 在 MySQL 中存储 0.5

> ID：11797603
> 
> 赞同：3
> 
> 时间：2012-08-03T14:22:22.337
> 
> 标签：mysql, sql, database

使用小数（我尝试过它的变体）0.5 总是转换为 5。

我可以存储 1.5 等，没问题...只是好奇我需要如何设置我的数据类型以正确存储“0.5”数字。

谢谢

编辑：

当前数据类型为十进制 (3,1)。我也试过浮动。

我只是通过 $_POST 从表单文本框中检索数字，该文本框仅通过 Java 限制为数字。我从没想过浏览器可能只是将它作为 5 发送，我不知道。

编辑 2：我已经通过 echo 确认 0.5 发送正常，一旦它进入数据库，它就会变成 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:31:41.397

你知道，我可能会因此而被否决，但我总是成功（作为一种 hack）将这样的值存储为 VARCHAR，然后 在我需要进行计算时在 PHP 中使用[format()函数。](http://uk3.php.net/number_format)对于 SQL 函数，MySQL 似乎仍然可以很好地解析它。只是我的 2 美分 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:33:19.883

我在具有各种输入的数据库中使用了十进制值：

我试图重新创建您的问题，但我得到以下信息：

```
mysql> create table test(myDec decimal(2,2));
Query OK, 0 rows affected (0.02 sec)

mysql> insert into test values(0.5);
Query OK, 1 row affected (0.01 sec)
mysql> insert into test values(.5);
Query OK, 1 row affected (0.00 sec)

mysql> select * from test;
+-------+
| myDec |
+-------+
|  0.50 |
|  0.50 |
+-------+
2 rows in set (0.00 sec) 
```

鉴于您的编辑，我认为您可能会从国际访问者那里获得值，其中小数点可能使用逗号而不是点来格式化？

```
mysql> insert into test values('0,5');
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> select * from test;
+-------+
| myDec |
+-------+
|  0.50 |
|  0.50 |
|  0.00 |
+-------+
3 rows in set (0.00 sec) 
```

# asp.net-mvc - 我将如何制作一个 ViewModel 来显示从另一个实体上生成的产品列表中收集的类别列表？

> ID：11797608
> 
> 赞同：1
> 
> 时间：2012-08-03T14:22:45.107
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, viewmodel, lazy-loading

*   我有各种各样`locations`的，每个都有自己的`Products`.
*   每个都`Product`属于一个`SubCategory`。
*   每个都`SubCategory`属于一个`Category`。

我需要`Categories`在给定 a 时显示一个列表`Location`，因此我需要一个 ViewModel 可以提取与所述位置的产品相关联的潜在类别列表。

我想做这样的事情（我的 ViewModel）：

```
public class LocationSummaryViewModel
{
    public Location Location { get; set; }

    private ICollection<Category> categories;

    public ICollection<Category> Categories
    {
        get
        {
            if ( Establishment != null )
            {
                foreach (var item in Location.Products)
                {
                    categories.Add(item.SubCategory.Category);
                }
                return categories;
            }
            else
            {
                Categories.Add(new Category { Name = "Default Category" });
                return categories;
            }
        }
    }
} 
```

但这在语法上不起作用，因为`categories`从未实例化。另外，我不确定是否应该将这么多逻辑放在 ViewModel 中。

**通过将逻辑从包含在我的 ViewModel 内的位置中的产品列表中提取类别信息，我是否朝着正确的方向前进？还是我会以一种非常不寻常的方式来解决这个问题？**

*如果我以完全奇怪的方式执行此操作，那么从 Location 实体中包含的产品列表中获取类别信息的更好方法是什么？*

* * *

作为参考，我的位置模型：

```
public class Location
{
    public int LocationId { get; set; }

    public string Name { get; set; }

    public virtual ICollection<Product> Products { get; set; }  
} 
```

我的产品型号：

```
public class Product
{
    public int ProductId { get; set; }

    public string Name { get; set; }

    public int CategoryId { get; set; }

    public virtual SubCategory SubCategory { get; set; }

    public int LocationId { get; set; }

    public virtual Location Location { get; set; }
} 
```

和我的子类别模型：

```
public class SubCategory
{
    public int SubCategoryId { get; set; }

    public string Name { get; set; }

    public int CategoryId { get; set; }

    public virtual Category Category { get; set; }
} 
```

**更新：我在下面发布了我自己问题的潜在答案 - 欢迎更好的答案/建议**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:56:53.537

业务逻辑不应该在视图模型中，而是应该在域模型中，为什么不尝试将业务逻辑移动到像 Location 这样的域模型中。如果不是，您就违反了[贫血模型反模式](http://martinfowler.com/bliki/AnemicDomainModel.html)

View Model 应该包含支持 View 的逻辑，仅此而已。

实际上不知道建立来自，但位置类可能看起来像：

```
public class Location
{
    public int EstablishmentId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Product> Products { get; set; }

    public Category GetCategories()
    {
        foreach (var item in Location.Products)
        {
            categories.Add(item.SubCategory.Category);
        }
        return categories;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:52:17.330

如果我将 ViewModel 更改为：

```
public class LocationSummaryViewModel
{
    public Location Location { get; set; }

    public  ICollection<Category> Categories { get; set; }
} 
```

并将我的逻辑移至控制器：

```
public PartialViewResult _LocationSummary(int id)
{
    Location location = _locationRepository.Locations.FirstOrDefault(p => p.LocationId == id);
    if (location != null)
    {
        var Categories = location.Products.Select(item => item.SubCategory.Category).Distinct().ToList();

        var model = new LocationSummaryViewModel
            {
                Location = location,
                Categories = Categories
            };
        return PartialView(model);
. . . 
```

我似乎得到了一个合适的结果~~（需要很少的调整来摆脱多个相同的`Categories`）~~，但我希望找到一种方法来摆脱我的控制器中的逻辑。

由于工作需要大量延迟加载，这可能会导致问题。. . 目前不确定。

# javascript - 有没有办法为每个条目打印多个条形码？

> ID：11797615
> 
> 赞同：2
> 
> 时间：2012-08-03T14:23:04.400
> 
> 标签：javascript, jquery, barcode, barcode-printing, jquery-barcode

我正在尝试打印 isbn 条码、标题、作者、发布日期以及如果存在备用 isbn。下面的代码只适用于一个 isbn，但是当我尝试添加另一个时，它不会打印第二个条形码。这是我所拥有的：

```
 sku = data.sku;
    isbn = data.isbn;
    author = data.author;
    alt = data.alt;
    pub_date = data.pubDate;
    for (x=0;x<data.isbn.length;x++)
    {
        title = data.title[x];
        title = title.substring(0,20);

        first += '$("#'+indexGlobal+'").barcode("'+isbn[x]+'", "codabar",{barHeight:40, fontSize:30, output:"bmp"});';
        second += '<div class="wrapper"><div id="'+indexGlobal+'"></div><div class="fullSKU">&nbsp &nbsp &nbsp '+isbn[x]+
        '</div><br /><div class="title">'+author[x]+
                '</div><br/><div class="title">'+title+'</div><br /><div class="title">'+pub_date[x]+
        '</div><br /><br /><br />';

        indexGlobal++; 

                } 
```

我试过只输入第三行（并在顶部声明 var indexGlobal2）：

```
third += '$("#'+indexGlobal2+'").barcode("'+alt[x]+'", "codabar",{barHeight:40, fontSize:30, output:"bmp"});'; 
```

这根本不起作用。我还尝试调整包装器的高度以腾出更多空间，但这也无济于事。任何人都知道如何做到这一点？

编辑：第一行 += 打印出条形码，第二行 += 打印出 isbn 编号、作者、标题和出版日期。我需要第三行来打印出备用 isbn 号码。

# c# - 使用 ASP.NET MVC 3 + 数据注释和属性 DateTime 进行单元测试

> ID：11797616
> 
> 赞同：0
> 
> 时间：2012-08-03T14:23:10.333
> 
> 标签：c#, asp.net-mvc, unit-testing, tdd, model-binding

我正在使用 DataAnnotations 和 ASP.NET MVC3 进行项目。我们使用此解决方案来测试“日期注释”的验证：[http ://gcbyjm.blogspot.com.br/2011/02/how-to-unit-test-dataannotations.html](http://gcbyjm.blogspot.com.br/2011/02/how-to-unit-test-dataannotations.html)

我在测试“ViewModel”的属性“DateTime”时遇到问题。

```
public class AchievementVM
{
    ...

    [Required(ErrorMessage = "The date field is required.")]
    [DataType(DataType.DateTime, ErrorMessage = "Invalid date.")]
    public DateTime Date { get; set; }

    ...
}

    [TestMethod]
    public void AchievementVMValidator_ShouldHaveErrorWhenDateIsInvalid()
    {
        // Arrange
        var achievementVM = new AchievementVM() { Date = ???? };

        // Act
        var errors = ValidationBuddy.GetErrors(achievementVM) as List<ErrorInfo>;

        // Assert
        ErrorInfo error = errors.Find(delegate(ErrorInfo e) { return e.ErrorMessage == "The date field is required."; });
        Assert.IsTrue(error != null);
    } 
```

我的问题是如何传递这个属性的值来模拟ModelBind ERROR。在这两种情况下，文本框都是空的和无效的数据。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:36:13.090

请记住，您的视图模型应该是您的视图的表示。因此，如果您的视图允许**不输入**DateTime （空文本框），那么我认为您的视图模型应该有一个可为空的 DateTime。

```
public DateTime? MyProperty { get; set; } 
```

这样，在您的单元测试中，您可以测试空 DateTime。

在您的域模型上，这应该有所不同，因为您不希望您的数据库接收空 DateTime，因此域模型属性不应为空。您的视图模型验证应该停止将空日期传递给域模型，或者将其转换为域模型可以处理的 DateTime。例如，如果您的业务需求与此匹配，则可能会将 null DateTime 转换为 DateTime.Now。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:29:04.870

如果我正确理解您的问题，我认为您应该测试由该字段所在的视图调用的操作方法。像这样，您可以将无效或空值传递给复制空值或无效值的操作方法。

# javascript - XSLT Javascript 扩展不能调用 Date().toISOString()

> ID：11797619
> 
> 赞同：2
> 
> 时间：2012-08-03T14:23:19.027
> 
> 标签：javascript, xslt, xslt-extension

我一直在尝试在**Microsoft XSLT** (1.0) 中使用扩展。在 JavaScript 函数中，我只是想返回当前的 ISO 日期和时间。听起来很容易。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                           xmlns:ms="urn:schemas-microsoft-com:xslt"
                           xmlns:util="urn:Utility" extension-element-prefixes="ms"
                            >
    <xsl:output method="html" version="1.0"/>
    <ms:script language="javascript" implements-prefix="util">
    function today()
    {
        var d = new Date();
        return d.toISOString();
    }
    </ms:script>
    <!-- =============================================================== -->
    <xsl:template match="Person">
       <xsl:value-of select="util:today()"/>
    </xsl:template>
    </xsl:stylesheet> 
```

当您执行上述操作时，它会返回“预期功能”。根据 Microsoft 文档`toISOString`，应该是 JavaScript`Date()`对象。如果我使用`toGMTString()`它会返回 GMT 值。我真的需要以 ISO 格式返回的当前日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:41:55.947

`toISOString()`不是[原始 jScript Date 对象](http://msdn.microsoft.com/en-us/library/cd9w2te4%28v=vs.84%29)的属性。

它在 IE9+ 中受支持，甚至[仅在标准渲染模式下](http://msdn.microsoft.com/en-us/library/ff925953%28v=vs.94%29.aspx)也受支持。

试试这个。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ms="urn:schemas-microsoft-com:xslt"
  xmlns:util="urn:Utility" 
  extension-element-prefixes="ms"
>
  <xsl:output method="html" version="4.0" />

  <ms:script language="jscript" implements-prefix="util">
  <![CDATA[
  function isoDate() {
    var d = new Date();
    return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate())
           + 'T' 
           + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds())
           + '.000Z';
  }

  function pad(num) {
    return (num < 10) ? '0' + num : '' + num;
  }
  ]]>
  </ms:script>

  <xsl:template match="/">
    <xsl:value-of select="util:isoDate()"/>
  </xsl:template>
</xsl:stylesheet> 
```

# r - 从列表中的所有数据框中删除具有 NA 的列

> ID：11797621
> 
> 赞同：6
> 
> 时间：2012-08-03T14:23:23.230
> 
> 标签：r, dataframe, na

我有一个由几个数据框组成的列表。我想删除每个数据框中所有带有 NA 的列。请注意，要删除的列在每个数据框中都不相同。下面提供的示例数据。任何建议都非常感谢。

```
WW1_Data <- structure(list(Alnön = structure(list(Site_Name = structure(1L, .Label =
c("Alnön","Ammarnäs", "Anjan", "Bäcksand", "Fittjebodarna", "Flatruet",
"Glen", "Idre", "Klångstavallen", "Kramfors", "Ljungdalen", "Ljungris",
"Mårdsund", "Mörtsjön", "Nordmaling", "Öster_Galåbodarna", "Ramundberget",
"Rätan", "Särvfjället", "Smedstorp", "Söderhamn", "Stensoffa",
"Storulvån", "Sveg", "Tanna", "Tänndalen", "Vålådalen", "Vemdalsskalet"
), class = "factor"), X1996 = 0.307692307692308, X1997 = NA_real_,
X2000 = 0.260869565217391, X2001 = NA_real_, X2002 = NA_real_,
X2003 = NA_real_, X2008 = NA_real_, X2009 = NA_real_, X2010 = 0.0833333333333333,
X2011 = NA_real_), .Names = c("Site_Name", "X1996", "X1997",
"X2000", "X2001", "X2002", "X2003", "X2008", "X2009", "X2010",
"X2011"), row.names = 1L, class = "data.frame"), Ammarnäs = structure(list(
Site_Name = structure(2L, .Label = c("Alnön", "Ammarnäs",
"Anjan", "Bäcksand", "Fittjebodarna", "Flatruet", "Glen",
"Idre", "Klångstavallen", "Kramfors", "Ljungdalen", "Ljungris",
"Mårdsund", "Mörtsjön", "Nordmaling", "Öster_Galåbodarna",
"Ramundberget", "Rätan", "Särvfjället", "Smedstorp", "Söderhamn",
"Stensoffa", "Storulvån", "Sveg", "Tanna", "Tänndalen", "Vålådalen",
"Vemdalsskalet"), class = "factor"), X1996 = 0.75, X1997 = NA_real_,
X2000 = NA_real_, X2001 = NA_real_, X2002 = NA_real_, X2003 = NA_real_,
X2008 = NA_real_, X2009 = NA_real_, X2010 = NA_real_, X2011 = 0.8), .Names =
c("Site_Name", "X1996", "X1997", "X2000", "X2001", "X2002", "X2003", "X2008",
"X2009", "X2010", "X2011"), row.names = 2L, class = "data.frame"),
Anjan = structure(list(Site_Name = structure(3L, .Label = c("Alnön",
"Ammarnäs", "Anjan", "Bäcksand", "Fittjebodarna", "Flatruet",
"Glen", "Idre", "Klångstavallen", "Kramfors", "Ljungdalen",
"Ljungris", "Mårdsund", "Mörtsjön", "Nordmaling", "Öster_Galåbodarna",
"Ramundberget", "Rätan", "Särvfjället", "Smedstorp", "Söderhamn",
"Stensoffa", "Storulvån", "Sveg", "Tanna", "Tänndalen", "Vålådalen",
"Vemdalsskalet"), class = "factor"), X1996 = NA_real_, X1997 = NA_real_,
X2000 = NA_real_, X2001 = NA_real_, X2002 = NA_real_,
X2003 = NA_real_, X2008 = NA_real_, X2009 = 0.52, X2010 = 0.5,
X2011 = NA_real_), .Names = c("Site_Name", "X1996", "X1997",
"X2000", "X2001", "X2002", "X2003", "X2008", "X2009", "X2010",
"X2011"), row.names = 3L, class = "data.frame"), Bäcksand = structure(list(
Site_Name = structure(4L, .Label = c("Alnön", "Ammarnäs",
"Anjan", "Bäcksand", "Fittjebodarna", "Flatruet", "Glen",
"Idre", "Klångstavallen", "Kramfors", "Ljungdalen", "Ljungris",
"Mårdsund", "Mörtsjön", "Nordmaling", "Öster_Galåbodarna",
"Ramundberget", "Rätan", "Särvfjället", "Smedstorp",
"Söderhamn", "Stensoffa", "Storulvån", "Sveg", "Tanna",
"Tänndalen", "Vålådalen", "Vemdalsskalet"), class = "factor"),
X1996 = NA_real_, X1997 = NA_real_, X2000 = 0.0833333333333333,
X2001 = NA_real_, X2002 = NA_real_, X2003 = NA_real_,
X2008 = NA_real_, X2009 = NA_real_, X2010 = 0.375, X2011 = NA_real_), .Names =   
c("Site_Name", "X1996", "X1997", "X2000", "X2001", "X2002", "X2003", "X2008",
"X2009", "X2010", "X2011"), row.names = 4L, class = "data.frame"),
Fittjebodarna = structure(list(Site_Name = structure(5L, .Label = c("Alnön",
"Ammarnäs", "Anjan", "Bäcksand", "Fittjebodarna", "Flatruet",
"Glen", "Idre", "Klångstavallen", "Kramfors", "Ljungdalen",
"Ljungris", "Mårdsund", "Mörtsjön", "Nordmaling", "Öster_Galåbodarna",
"Ramundberget", "Rätan", "Särvfjället", "Smedstorp", "Söderhamn",
"Stensoffa", "Storulvån", "Sveg", "Tanna", "Tänndalen", "Vålådalen",
"Vemdalsskalet"), class = "factor"), X1996 = NA_real_, X1997 = NA_real_,
X2000 = NA_real_, X2001 = NA_real_, X2002 = NA_real_,
X2003 = NA_real_, X2008 = 0.4, X2009 = 0.423076923076923,
X2010 = NA_real_, X2011 = NA_real_), .Names = c("Site_Name",
"X1996", "X1997", "X2000", "X2001", "X2002", "X2003", "X2008",
"X2009", "X2010", "X2011"), row.names = 5L, class = "data.frame")), .Names = c("Alnön",
"Ammarnäs", "Anjan", "Bäcksand", "Fittjebodarna")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:31:25.510

尝试这个

```
lapply(WW1_Data, function(x) x[, !is.na(x)])
$Alnön
  Site_Name     X1996     X2000      X2010
1     Alnön 0.3076923 0.2608696 0.08333333

$Ammarnäs
  Site_Name X1996 X2011
2  Ammarnäs  0.75   0.8
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:32:39.243

朱利叶斯的回答很好，但因为我已经开始写了......

您的问题有点模棱两可，但是如果您想`NA`从列表中的每个 data.frame 中删除任何带有 a 的行：

```
lapply(WW1_Data, na.omit) 
```

或者您可以使用自己的函数，假设列表中的每个 data.frame 只有一行，如下所示：

```
myfun <- function(x) {
  x[, !is.na(x)]
}

lapply(WW1_Data, myfun) 
```

或切换到单个 data.frame，将其融化并删除行：

```
out <- do.call(rbind, WW1_Data)
out.m <- melt(out, id.vars='Site_Name')
na.omit(out.m) 
```

# c# - c# Mathnet Numerics -- 获取非零稀疏矩阵元素的索引

> ID：11797625
> 
> 赞同：3
> 
> 时间：2012-08-03T14:23:45.157
> 
> 标签：c#, numeric, math.net, mathnet-numerics

我想使用 MathNet.numerics 为 csharp 创建一个自定义优化矩阵运算（基于我对我正在使用的稀疏矩阵的了解的智能 kronecker 产品）。

是否有获取稀疏矩阵的非零元素的访问器？（或索引？或其迭代器？或 CSR 表示？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:03:42.063

您可以使用`IndexedEnumerator`仅访问矩阵中的非零元素。方法签名是：

```
public override IEnumerable<Tuple<int, int, double>> IndexedEnumerator() 
```

例如，下面的代码：

```
var mtx = new SparseMatrix(new DiagonalMatrix(3, 3, new[] {1.0, 1, 1}));
Console.WriteLine(mtx.NonZerosCount);

foreach (var tuple in mtx.IndexedEnumerator())
{
    Console.WriteLine("({0},{1}) = {2}", tuple.Item1, tuple.Item2, tuple.Item3);
} 
```

将产生以下输出：

```
3
(0,0) = 1
(1,1) = 1
(2,2) = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:16:24.777

从 v2.2.1 开始，您还可以直接访问原始 CSR 表示：

```
var m = new SparseMatrix(1000,1000);
var csr = (SparseCompressedRowMatrixStorage<double>) m.Storage; 
```

请注意，目前我们的 CSR 不会将非零 ValueCount 存储在行指针数组的最后一个字段中，尽管我们可能会在不久的将来更改它（以完全兼容并简化代码）

# java - 使用 Java 执行命令行程序时只收到空值

> ID：11797632
> 
> 赞同：0
> 
> 时间：2012-08-03T14:24:16.000
> 
> 标签：java, command-line, process, runtime

好的，所以我一直在尝试`Process`and`Runtime`类，但遇到了问题。当我尝试执行此命令时 : `cmd /c dir`，输出为空。这是我的代码片段：

```
try {
    Runtime runtime = Runtime.getRuntime();
    Process process = runtime.exec("cmd /c dir");

    BufferedReader output = new BufferedReader(new InputStreamReader(process.getInputStream()));

    //BufferedReader serverOutputError = new BufferedReader(new InputStreamReader(serverStart.getErrorStream()));

    String line = null;

    while ((output.readLine()) != null) {
        System.out.println(line);
    }

    int exitValue = process.waitFor();
    System.out.println("Command exited with exit value: " + exitValue);

    process.destroy();
    System.out.println("destroyed");
} catch (IOException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

我得到这个作为输出：

```
(18 lines of just "null")
Command exited with exit value: 0
destroyed 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:26:21.363

您永远不会设置`line`用于写入控制台的变量。

代替

```
while ((output.readLine()) != null) { 
```

和

```
while ((line = output.readLine()) != null) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:27:05.733

试试这样：

```
String line = output.readLine();

while (line != null) {
    System.out.println(line);
    line = output.readLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:30:47.977

```
while ((output.readLine()) != null) {
    System.out.println(line);
} 
```

应该

```
while ((line = output.readLine()) != null) {
    System.out.println(line);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:28:30.800

```
String line = null;
while ((output.readLine()) != null) {
        System.out.println(line);
    } 
```

这是你的问题。您永远不会在循环中将 line 设置为任何内容。它仍然为空。您需要将 line 设置为 output.readLine() 的值。

```
while((line = output.readLine()) != null) 
```

# java - Java查找默认网关的网络接口

> ID：11797641
> 
> 赞同：7
> 
> 时间：2012-08-03T14:24:46.407
> 
> 标签：java, routing, network-programming

在 Java 中，我想找到与使用的接口对应的 java.net.NetworkInterface 到达默认网关。接口的名称等是不知道的。

换句话说，如果下面是我的路由表，我会想要与“bond0”对应的接口：

```
$ netstat -r
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
10.10.10.0     *               255.255.255.0   U         0 0          0 bond0
10.10.11.0     *               255.255.255.0   U         0 0          0 eth2
10.10.11.0     *               255.255.255.0   U         0 0          0 eth3
10.10.12.0     *               255.255.255.0   U         0 0          0 eth4
10.10.13.0     *               255.255.255.0   U         0 0          0 eth5
default         mygateway      0.0.0.0         UG        0 0          0 bond0 
```

做了一些谷歌搜索后，我仍然没有找到任何答案。

**编辑：**
java 运行时必须“知道”如何获取这些信息（并不是说它已经暴露）。当使用 join(InetAddress grpAddr) 调用（未指定接口）将 java.net.MulticastSocket 加入多播组时，明显的行为似乎是加入“默认”接口（如上定义）。即使默认 intf 不是路由表中列出的第一个接口，这也有效。但是，加入 mcast 组的基础 POSIX 调用需要此信息！：

```
struct ip_mreqn group;
group.imr_multiaddr = ...
group.imr_address = **address of the interface!**
setsockopty(sd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &group, sizeof(group)); 
```

**要点**：通过提供一种加入不需要 intf 的多播组的方法，java 平台隐含地必须知道如何在每个平台上确定适当的 intf。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-19T14:38:15.490

我的方法是：

```
try(DatagramSocket s=new DatagramSocket())
{
    s.connect(InetAddress.getByAddress(new byte[]{1,1,1,1}), 0);
    return NetworkInterface.getByInetAddress(s.getLocalAddress()).getHardwareAddress();
} 
```

因为使用数据报（UDP），它没有连接到任何地方，所以端口号可能没有意义，远程地址（`1.1.1.1`）不需要可达，只是可路由的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:57:40.873

据我所知，不会有什么好的方法可以做到这一点，因为这样的底层细节对于 Java 来说很难以跨平台的方式实现。java.net.NetworkInterface 可能会有所帮助，但如果可用的方法还不够，您可能不得不求助于一些更丑陋的东西。

这是永远在指定平台上运行的东西，还是需要更便携？在最坏的情况下，您可以尝试执行系统命令并解析输出，但这不是很便携或稳定。

一些相关主题：

[是否可以在java中获取默认网关IP和MAC地址？](https://stackoverflow.com/questions/5382033/is-it-possible-to-get-the-default-gateway-ip-and-mac-addresses-in-java)

[使用 Java 查找无线网络的 SSID](https://stackoverflow.com/questions/5378103/finding-ssid-of-a-wireless-network-with-java/5380862)

# xcode - 如何切换 Xcode 4 在工作区中使用的 git 存储库？

> ID：11797643
> 
> 赞同：2
> 
> 时间：2012-08-03T14:24:50.043
> 
> 标签：xcode, git

我开始能够在使用工作区时提交到项目基本文件夹中的 git 存储库。

然后我在我的项目中添加了另一个库，并没有注意到它的根文件夹中有自己的 git 存储库。我继续对该库进行更改并通过 Xcode 提交了这些更改，但在我这样做之后，Xcode 似乎将它用于我项目中所有文件差异的 git 存储库切换到该库的 git 存储库。

如何切换回原始项目的存储库？我尝试删除库的 git 存储库，但 Xcode 仍然尝试提交到该项目的存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:37:44.397

您可以使用 Xcode 的 Organizer 窗口更正 git 存储库目录路径。

# ruby-on-rails - 查询活动记录

> ID：11797647
> 
> 赞同：0
> 
> 时间：2012-08-03T14:25:15.097
> 
> 标签：ruby-on-rails, postgresql, activerecord

我正在尝试使用以下查询从 rails 查询我的 postgres db

```
 def is_manager(team)
    User.where("manager <> 0 AND team_id == :team_id", {:team_id => team.id})
  end 
```

这基本上是检查经理是否被标记，并且 team.id 是传递给函数的当前 id。

我认为我有以下代码

```
 %td= is_manager(team) 
```

错误或我们得到的回报是

```
#<ActiveRecord::Relation:0xa3ae51c> 
```

任何关于我哪里出错的帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:52:39.797

对 ActiveRecord 的查询总是返回 ActiveRecord::Relations。这样做本质上允许延迟加载查询。要了解为什么这很酷，请考虑以下几点：

```
User.where(manager: 0).where(team_id: team_id).first 
```

在这种情况下，我们获取所有不是经理的用户，然后我们获取所有在团队中 ID 为 team_id 的非经理用户，然后我们选择第一个。执行此代码将为您提供如下查询：

```
SELECT * FROM users WHERE manager = 0 AND team_id = X LIMIT 1 
```

如您所见，即使在我们的代码中进行了多个查询，ActiveRecord 也能够将所有这些压缩到一个查询中。这是通过关系完成的。一旦我们需要实际对象（即我们第一次调用时），ActiveRecord 就会去数据库获取记录。这可以防止不必要的查询。ActiveRecord 之所以能够做到这一点，是因为它们返回的是关系，而不是查询的对象。考虑 Relation 类的最佳方式是，它是 ActiveRecord 的一个实例，具有数组的所有方法。您可以对关系调用查询，但也可以对其进行迭代。

抱歉，如果不清楚。

哦，解决你的问题。`%td = is_manager(team).to_a`这会将 Relation 对象转换为用户数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:33:16.747

只需使用 .first 检索第一条记录，这可能会有所帮助。 **User.where("manager <> 0 AND team_id == :team_id", {:team_id => team.id}).first**

# java - ffnet java 导出示例

> ID：11797663
> 
> 赞同：1
> 
> 时间：2012-08-03T14:26:26.467
> 
> 标签：java, python, artificial-intelligence, neural-network

有没有人有一个关于如何将使用 python 创建的[ffnet](http://sourceforge.net/projects/ffnet/)导出到 Java 代码的简单示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:52:25.110

你需要旧版本的ffnet（我猜是0.6.5），然后你使用：

```
exportnet(net, "filename.java", lang="java") 
```

# asp.net - 将旧版 ASP.NET 应用程序转换为 MVC3 和 HTML5

> ID：11797664
> 
> 赞同：5
> 
> 时间：2012-08-03T14:26:28.993
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010

我有一个运行良好的 ASP.NET 应用程序，但它变得笨拙。我想在任何新页面中加入 MVC3 功能，并逐步转换所有旧页面。我打算使用 Razor 语法。

我已经让它工作了。我可以很好地提供页面。这是一场战斗，但情况看起来不错。我相信我拥有所有的目录结构和引用的 DLL。

我唯一真正的问题是 IDE：

当我右键单击控制器文件夹时，我无法选择“添加控制器..”。视图同上，项目右键菜单中的“添加区域...”。

我无法添加与 MVC3（或 MVC2，我也已安装）相关的模板项。

我也无法验证 HTML5（所有标签都无效），但我认为这是一个单独的问题，因为此功能也不适用于我的 MVC3 项目。

如果它不能完美地用于作为 MVC3 项目（使用 Razor 语法）创建的项目，我什至不知道这些东西丢失了，所以它必须是解决方案或项目中的特定内容，但我无法在任何地方找到它.

**我的问题：我** 在哪里更改它以便 IDE 将其确认为 MVC 项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:29:15.673

菜单没有出现的原因是 Visual Studio IDE 不认为这是一个真正的 ASP.NET MVC 项目，因为项目文件没有这样说。所以我们应该更新项目文件以包含 ASP.NET MVC 的项目类型 guid，然后 IDE 将开始支持特定于`ASP.NET MVC`类型项目的菜单。

**第1步**

转到您的解决方案资源管理器并通过右键单击并选择“卸载项目”来卸载现有的 ASP.NET 项目</p>

![在此处输入图像描述](../Images/8e8efe7821edc6a5b3a6e5bd6489114f.png)

**第2步**

右键单击解决方案资源管理器中的项目，然后选择“编辑项目文件名”</p>

![在此处输入图像描述](../Images/a68a6cd2e23b3b57a0320185b7f931c5.png)

**第 3 步**

在该`ProjectTypeGuids`部分内添加以下条目

```
{E53F8FEA-EAE0-44A6-8774-FFD645390401}; 
```

![在此处输入图像描述](../Images/f93a68cb53b28825168cb51771736c16.png)

节省。重新加载项目，你现在会很好。

我在博客文章中清楚地解释了它[。](http://www.techiesweb.net/how-to-get-add-view-add-controller-menus-in-solution-explorer-when-converting-existing-asp-net-web-for-project-to-mvc/)

# python - Mountain Lion 上的 Google AppEngine 'rdbms API 不可用'

> ID：11797665
> 
> 赞同：1
> 
> 时间：2012-08-03T14:26:34.500
> 
> 标签：python, mysql, google-app-engine

```
python 
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import MySQLdb 
```

命令行上的一切都很顺利，但我仍然在 appengine 日志中得到以下信息

```
*** Running dev_appserver with the following flags:
    --admin_console_server= --port=8080
Python command: /usr/bin/python2.7
INFO     2012-08-03 14:15:31,002 py_zipimport.py:148] zipimporter('/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg', 'MySQLdb/')
WARNING  2012-08-03 14:15:31,096 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
WARNING  2012-08-03 14:15:31,183 datastore_file_stub.py:518] Could not read datastore data from /var/folders/mc/45jr0vk5217fmpl18jn3vgx40000gn/T/dev_appserver.datastore
WARNING  2012-08-03 14:15:31,188 dev_appserver.py:3498] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-08-03 14:15:31,194 dev_appserver_multiprocess.py:647] Running application dev~appexp87 on port 8080: http://localhost:8080
INFO     2012-08-03 14:15:31,194 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:38:27.537

您是否尝试使用 CloudSQL？如果没有，请不要担心 rdbms API 警告，该行是无害的。PIL警告也是如此。

不过，您不应该收到关于无法读取数据存储文件的警告。这可能是文件权限的问题，或者文件可能以某种方式损坏。如果他们的数据不是必需的，请尝试清除数据存储文件并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:34:58.273

如果您还没有这样做，请将此行添加`import MySQLdb`到文件中。`dev_appserver.py`

# javascript - 将 jQuery draggable() 元素移动到新的父元素

> ID：11797667
> 
> 赞同：2
> 
> 时间：2012-08-03T14:26:42.023
> 
> 标签：javascript, jquery, jquery-ui, parent-child, jquery-ui-draggable

我正在用 JavaScript 编写一个简单的纸牌游戏，我想`img`在玩时让“纸牌”捕捉到它的目标。我通过`img`从其当前父级中删除并将其放置在新的父级（目标）中来完成此操作。但是，当我将`img`jQuery's 放在它的新容器中时`.appendTo()`，卡片会捕捉到屏幕的一角。

有关工作示例，请参阅此[演示](http://jsfiddle.net/NathanFriend/hsjvP/)。

当它移动到新的父级时，是否有原因`div`捕捉到屏幕的角落？`div`我想知道当我更改父级时是否有 css 属性在幕后被继承/丢失。

任何帮助，将不胜感激。

**- 编辑 -**

附加信息：虽然有人建议我简单地将其添加到我的放置处理程序（有效） -

`$(ui.draggable).css({'top' : '0', 'left' : '0'});`

我`.animate()`想到这个位置，所以快照不是瞬时的。虽然卡片最终会出现在正确的位置，但它首先会卡到角落，然后慢慢进入正确的位置。我想避免第一次卡在角落里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:40:48.870

```
$(ui.draggable).css({'top' : '0', 'left' : '0'}); 
```

抱歉，我不得不去上班，但试试这个：

```
$("#target").droppable({
    drop: function (event, ui) {
      var offset = $('#target').offset()
      var top = parseInt($(ui.draggable).css('top')) - offset.top;
      var left = parseInt($(ui.draggable).css('left')) - offset.left;            
      $(ui.draggable).appendTo("#target");
      $(ui.draggable).css({'top' : top, 'left' : left})
      $(ui.draggable).animate({
        top: 0,
        left: 0           
      }, 500, function() {
        // Animation complete.
      });
    }
}); 
```

[http://jsfiddle.net/hsjvP/22/](http://jsfiddle.net/hsjvP/22/)

# jquery - jQuery - 延迟向数组内的元素添加类

> ID：11797668
> 
> 赞同：2
> 
> 时间：2012-08-03T14:26:45.920
> 
> 标签：jquery, arrays, each

我有一个数组，其中包含我页面中的一些元素。

现在我需要一个函数来遍历数组`bold`并向每个元素添加一个类。问题是一旦添加了类，就必须经过一段时间。然后`bold`必须删除并需要应用于下一个元素，从而产生“波浪”运动。

我试过这样做：

```
$.each(tdArr, function(i, v) {
  v.addClass("bold");
  setTimeout(function(){
    v.removeClass("bold");
  }, 900)
}) 
```

该代码的问题在于它一次`bold`添加到*所有*元素并在 900 毫秒后被删除，再次同时从*所有*元素中删除。

我该怎么做才能在单独的操作之间添加延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:35:03.347

我认为您需要稍微不同地处理这个问题，因为`setTimout`立即返回它不会停止将下一个元素设置为粗体。

你可以用这样的方法来做到这一点：

```
function bold(i){
    if(i>0){
        $tdArr.eq(i-1).removeClass('bold');
    }
    if(i == $tdArr.length){
        return;
    }
    $tdArr.eq(i).addClass('bold')   

    setTimeout(function() { bold(i+1) },900);
} 
```

然后调用它你只需要调用`bold(0)`：

现场示例：http: [//jsfiddle.net/rJGjZ/](http://jsfiddle.net/rJGjZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:31:32.737

试试这个：

```
$.each(tdArr, function(index, element) {
  var $elem = $(element);
  $elem.addClass("bold");
  setTimeout(function(){
    $elem.removeClass("bold");
  }, 900)
}) 
```

第二个参数不是 jQuery 元素，你需要转换他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:36:53.980

在迭代数组时增加延迟，如果元素尚未包装，请确保将元素包装在 jQuery 中。如果它是 jQuery 元素的集合，则使用`each`迭代。

```
var delay = 900

$els.each(function(){
  var $this = $(this)
  setTimeout(function(){
    $els.removeClass('bold')
    $this.addClass('bold')
  }, delay+=900)
}) 
```

否则，我会`for`在 jQuery 中使用和包装元素。

```
for (var i=0, l=arr.length, d, prev; i<l; i++; d+=900) {
  prev = arr[i-1]
  setTimeout(function(){
    if (prev) $(prev).removeClass('bold')
    $(arr[i]).addClass('bold')
  }, d)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:37:58.783

像这样的东西对你有用吗？

```
function Bold(element) {
  $(element).addClass("bold"); // we bold the current tdArr
  setTimeout(function(){
    var nextSibling = $(element).next("td") // (if the tdArr are "td" tags) we find the next td brother of this one
    if (!!nextSibling) Bold(nextSibling); // if there is a brother, repeat the function on him after 900ms
  }, 900)
}

Bold(myfirsttd); 
```

# java - 如何在榛树中显示所有当前锁

> ID：11797671
> 
> 赞同：2
> 
> 时间：2012-08-03T14:26:51.587
> 
> 标签：java, hazelcast

我是 Hazelcast 的新手。我想知道如何在 Hazelcast 控制台中列出当前锁定？

例如。假设我打开了三个控制台并且我已经锁定了 3 个，如下所示：

```
m.lock object1
m.lock object2
m.lock object3 
```

我怎样才能得到如下输出：

```
number of lock site: 3
locks: object1, object2, object3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:48:46.647

Console 只是一个测试应用程序，用于模拟 hazelcast 的基本功能。

要查看您的锁实例，以下代码将对您有所帮助。

```
HazelcastInstance hzInstance = Hazelcast.newHazelcastInstance(null);
Collection<Instance> instances = hzInstance.getInstances();
Set<Instance> locks = new HashSet<Instance>();
for (Instance inst : instances) {
    if(inst.getInstanceType().equals(Instance.InstanceType.LOCK))
    locks.add(inst);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T09:05:32.507

对于 Hazelcast 3.X，我们必须使用`hz.getDistributedObjects()`.

有关详细信息，请参阅[将“实例”重命名为“分布式对象” 。](http://docs.hazelcast.org/docs/3.0/manual/html/ch01s02.html)

# iphone - 使用 FPC 在 iPhone 上开发

> ID：11797673
> 
> 赞同：-4
> 
> 时间：2012-08-03T14:26:53.643
> 
> 标签：iphone, fpc

请告诉我在哪里可以获得 iPhoneAll.pas 文件？另外你能告诉我在哪里可以找到关于如何使用 FPC 在 iPhone 上开发、使用 iPhone API 的信息吗？我找到了几个网站，但还不够。例如：

```
UIApplication.sharedApplication.setStatusBarHidden(true);

[[UIApplication sharedApplication] setStatusBarHidden:YES 
```

第一个例子是第二个例子的Pascal实现。我找不到任何信息如何将第二个示例更改为 Pascal 实现，我只是尝试猜测我可以在代码中更改的位置和内容以在 iPhone 上运行它）））但是这需要很多时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:28:23.500

您可以随时尝试在 Google 中输入 iPhoneAll.pas。

查看此链接： http: [//www.bilsen.com/agkpas/documentation/5__Getting_Started_for_iOS.html](http://www.bilsen.com/agkpas/documentation/5__Getting_Started_for_iOS.html)

# java - 如何使用 imap xoauth 获取电子邮件

> ID：11797676
> 
> 赞同：2
> 
> 时间：2012-08-03T14:27:06.620
> 
> 标签：java, oauth, imap

如何通过使用 xoauth 验证 imap 从 gmail 检索邮件。我已经尝试了在 Gmail 数据 api 上为 xoauthAuthenticator.java、xoauthprotocol.java、xoauthsaslclient.java 和 xoauthsaslclienfactory.java 提供的代码

但我有这样的错误

```
Exception in thread "main" javax.mail.MessagingException: Remote host closed connection during handshake;
  nested exception is:
    javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:479)
    at javax.mail.Service.connect(Service.java:275)
    at XoauthAuthenticator.connectToImap(XoauthAuthenticator.java:80)
    at XoauthAuthenticator.main(XoauthAuthenticator.java:114)
Caused by: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(Unknown Source)
    at com.sun.mail.util.TraceInputStream.read(TraceInputStream.java:97)
    at java.io.BufferedInputStream.fill(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    at com.sun.mail.iap.ResponseInputStream.read0(ResponseInputStream.java:81)
    at com.sun.mail.iap.ResponseInputStream.readResponse(ResponseInputStream.java:67)
    at com.sun.mail.iap.Response.<init>(Response.java:83)
    at com.sun.mail.imap.protocol.IMAPResponse.<init>(IMAPResponse.java:48)
    at com.sun.mail.imap.protocol.IMAPResponse.readResponse(IMAPResponse.java:122)
    at com.sun.mail.imap.protocol.IMAPProtocol.readResponse(IMAPProtocol.java:230)
    at com.sun.mail.iap.Protocol.<init>(Protocol.java:91)
    at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:87)
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:446)
    ... 3 more
Caused by: java.io.EOFException: SSL peer shut down incorrectly
    at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
    ... 19 more 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:02:06.490

当您的 SSLhandler 不信任来自主机服务器的证书时，会引发 SSLHandshakeException。您需要将服务器的 SSL 证书添加到您的密钥库。[这是问题的一个很好的演练](http://www.webapper.com/blog/index.php/2007/02/09/troubleshooting-javaxnetsslsslhandshakeexception/)以及如何解决它。

# vsto - 如何使用 VSTO（powerpoint）创建指向另一张幻灯片的链接？

> ID：11797679
> 
> 赞同：2
> 
> 时间：2012-08-03T14:27:21.630
> 
> 标签：vsto, slideshow, powerpoint

我正在努力寻找一种方法来使用 VSTO for powerpoint 创建指向另一张幻灯片的链接，有人知道该怎么做吗？没有办法在互联网上找到任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:44:55.633

将其从 VBA 转换为 VSTO，您应该一切顺利。将其传递给要应用链接的形状以及要链接到的幻灯片。

```
Sub MakeLink(osh As Shape, oLinkTargetSlide As Slide)

    With osh.ActionSettings(1)
        .Action = ppActionHyperlink
        .Hyperlink.Address = ""
        .Hyperlink.SubAddress = oLinkTargetSlide.SlideID & "," & oLinkTargetSlide.SlideIndex & ","
    End With
End Sub 
```

您可能想要声明`oSh`为`Object`; 然后你可以传递`Sub`一个形状或一个`TextRange`来应用链接。

# php - 使用 curl 在 PHP 中获取 HTTP 代码

> ID：11797680
> 
> 赞同：214
> 
> 时间：2012-08-03T14:27:34.000
> 
> 标签：php, performance, curl, http-headers

我正在使用 CURL 来获取站点的状态，如果它是向上/向下或重定向到另一个站点。我想让它尽可能精简，但效果不佳。

```
<?php
$ch = curl_init($url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_TIMEOUT,10);
$output = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

return $httpcode;
?> 
```

我把它包装在一个函数中。它工作正常，但性能不是最好的，因为它会下载整个页面，如果我删除`$output = curl_exec($ch);`它，它就会一直返回`0`。

有谁知道如何使性能更好？

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2012-09-27T20:07:42.323

首先确保 URL 是否有效（字符串，不为空，语法良好），这可以快速检查服务器端。例如，首先这样做可以节省大量时间：

```
if(!$url || !is_string($url) || ! preg_match('/^http(s)?:\/\/[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(\/.*)?$/i', $url)){
    return false;
} 
```

确保只获取标题，而不是正文内容：

```
@curl_setopt($ch, CURLOPT_HEADER  , true);  // we want headers
@curl_setopt($ch, CURLOPT_NOBODY  , true);  // we don't need body 
```

有关获取 URL 状态 http 代码的更多详细信息，请参阅我发表的另一篇文章（它也有助于以下重定向）：

*   [如何通过 PHP 检查 URL 是否存在？](https://stackoverflow.com/questions/2280394/check-if-an-url-exists-in-php/12628971#12628971)

* * *

整体而言：

```
$url = 'http://www.example.com';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, true);    // we want headers
curl_setopt($ch, CURLOPT_NOBODY, true);    // we don't need body
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_TIMEOUT,10);
$output = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

echo 'HTTP code: ' . $httpcode; 
```

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2015-02-10T09:14:44.897

```
// must set $url first....
$http = curl_init($url);
// do your curl thing here
$result = curl_exec($http);
$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
curl_close($http);
echo $http_status; 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-05-02T11:59:53.660

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
$rt = curl_exec($ch);
$info = curl_getinfo($ch);
echo $info["http_code"]; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-03T14:30:38.180

试试 PHP 的“ [get_headers](http://php.net/manual/en/function.get-headers.php) ”函数。

类似于以下内容：

```
<?php
    $url = 'http://www.example.com';
    print_r(get_headers($url));
    print_r(get_headers($url, 1));
?> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-02T05:49:14.767

`curl_getinfo`— 获取有关特定转移的信息

检查[curl_getinfo](http://php.net/manual/en/function.curl-getinfo.php)

```
<?php
// Create a curl handle
$ch = curl_init('http://www.yahoo.com/');

// Execute
curl_exec($ch);

// Check if any error occurred
if(!curl_errno($ch))
{
 $info = curl_getinfo($ch);

 echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url'];
}

// Close handle
curl_close($ch); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-03T14:30:41.283

`curl_exec`是必要的。尽量`CURLOPT_NOBODY`不要下载正文。那可能会更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-06T13:24:52.880

使用此**hitCurl**方法获取所有类型的 api 响应，即**Get / Post**

```
 function hitCurl($url,$param = [],$type = 'POST'){
        $ch = curl_init();
        if(strtoupper($type) == 'GET'){
            $param = http_build_query((array)$param);
            $url = "{$url}?{$param}";
        }else{
            curl_setopt_array($ch,[
                CURLOPT_POST => (strtoupper($type) == 'POST'),
                CURLOPT_POSTFIELDS => (array)$param,
            ]);
        }
        curl_setopt_array($ch,[
            CURLOPT_URL => $url,
            CURLOPT_RETURNTRANSFER => true,
        ]);
        $resp = curl_exec($ch);
        $statusCode = curl_getinfo($ch,CURLINFO_HTTP_CODE);
        curl_close($ch);
        return [
            'statusCode' => $statusCode,
            'resp' => $resp
        ];
    } 
```

*测试api的演示函数*

```
 function fetchApiData(){
        $url = 'https://postman-echo.com/get';
        $resp = $this->hitCurl($url,[
            'foo1'=>'bar1',
            'foo2'=>'bar2'
        ],'get');
        $apiData = "Getting header code {$resp['statusCode']}";
        if($resp['statusCode'] == 200){
            $apiData = json_decode($resp['resp']);
        }
        echo "<pre>";
        print_r ($apiData);
        echo "</pre>";
    } 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2016-08-13T08:14:50.930

这是我的解决方案，需要获取 Status Http 以定期检查服务器的状态

```
$url = 'http://www.example.com'; // Your server link

while(true) {

    $strHeader = get_headers($url)[0];

    $statusCode = substr($strHeader, 9, 3 );

    if($statusCode != 200 ) {
        echo 'Server down.';
        // Send email 
    }
    else {
        echo 'oK';
    }

    sleep(30);
} 
```

# java - 我的中文字符在电子邮件中变为问号

> ID：11797681
> 
> 赞同：3
> 
> 时间：2012-08-03T14:27:41.830
> 
> 标签：java, email, utf-8, character-encoding

我从数据库字段中检索一个值，该字段看起来像 sql/developer 中的两个框 [][]。当我将该值复制并粘贴到 Outlook（新消息窗口）并将其发送给自己时，我可以在电子邮件测试中看到正确的中文字符。

但是，如果我通过 java 代码执行此操作，这意味着从 db 检索值并从 java 发送电子邮件我得到两个？Outlook 中生成的电子邮件中的问号。

java代码中的原始设置是：

```
Content-Type: text/plain; 
```

我还尝试使用以下设置发送电子邮件：

```
Content-Type: text/plain; charset=UTF-8
Content-Type: text/html; charset=UTF-8 
```

没有任何帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:42:34.647

您还需要将连接编码设置为 utf-8

```
jdbc:mysql://localhost/some_db?characterEncoding=UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:36:48.247

尝试在控制面板中更改它

控制面板 -> 区域和语言选项

# delphi-7 - 发送 BS（退格键）到 TMemo

> ID：11797687
> 
> 赞同：3
> 
> 时间：2012-08-03T14:28:12.593
> 
> 标签：delphi-7, vcl, delphi

我想向 TMemo 发送一个 BackSpace 控制字符，就像用户实际按下 BackSpace 按钮一样。

我的备忘录是只读的，如果我单击一个按钮，它应该删除备忘录中的最后一个字符。我想在不使用 Memo.Text 的情况下做到这一点：= ...（所以没有重绘或 beginupdate 等）这可能吗，如果可以，怎么做？

感谢您的帮助。

编辑：我试图添加＃8但没有运气......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:36:17.560

将按键发送到只读备忘录将不起作用。按键将被忽略，因为备忘录是只读的。要以有效的方式删除备忘录的最后一个字符，即不替换整个内容，您可以使用[`EM_SETSEL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761661.aspx)和[`EM_REPLACESEL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761633.aspx)。

```
var
  Len: Integer;
begin
  Len := Memo1.GetTextLen;
  SendMessage(Memo1.Handle, EM_SETSEL, Len-1, Len);
  SendMessage(Memo1.Handle, EM_REPLACESEL, 0, LPARAM(PChar('')));
end; 
```

或者，如果您更喜欢包含这些 Windows 消息的纯 VCL 版本：

```
begin
  Memo1.SelStart := Memo1.GetTextLen-1;
  Memo1.SelLength := 1;
  Memo1.SelText := '';
end; 
```

后者可能会发送更多的 Windows 消息，但更容易阅读。我更喜欢后一种选择。

我可以看到的一个可能的问题是，它可能无法通过换行符执行您想要的操作。由于 Windows 换行符是两个字符 (CR+LF)，如果备忘录中的最后一个字符是 LF，则需要删除两个字符。要处理它，您可能可以这样做：

```
begin
  Memo1.SelStart := Memo1.GetTextLen-1;
  Memo1.SelLength := 1;
  if Memo1.SelText=#10 then
  begin
    Memo1.SelStart := Memo1.SelStart-1;
    Memo1.SelLength := 2;
  end;
  Memo1.SelText := '';
end; 
```

# python - 在 virtualenv 中安装 pip 的 Matplotlib 要求

> ID：11797688
> 
> 赞同：23
> 
> 时间：2012-08-03T14:28:14.207
> 
> 标签：python, numpy, matplotlib, virtualenv, pip

我有一个这样的 requirements.txt 文件：

```
numpy
matplotlib 
```

当我`pip install -r requirements.txt`在一个新的 virtualvenv 中尝试时，我得到了这个：

```
REQUIRED DEPENDENCIES

             numpy: no

                    * You must install numpy 1.1 or later to build

                    * matplotlib. 
```

如果我先安装 numpy，然后再安装 matplotlib，它就可以工作。但是我想继续使用`pip install -r requirements.txt`. 是否可以？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-08T12:06:44.203

Matplotlib 和 pip 似乎不能很好地结合在一起。所以我认为在这种情况下是不可能的。

`pip`首先下载您的需求文件中列出的包然后运行`setup.py`，但它并没有真正安装它（我不太确定 的内部结构`pip`）。以这种方式准备好所有包之后，它们就被安装了。

问题是，`matplotlib`检查是否`numpy`安装在其中`setup.py`（检查本身在 中定义[`setupext.py`](https://github.com/matplotlib/matplotlib/blob/master/setupext.py#L536)）。因此，在执行检查的那一刻，`numpy`未安装 matplotlib 并`setup.py`退出并显示您收到的错误消息（这可能不是错误，因为它可能需要 numpy 来构建）。

这曾经在 pip[问题 #24](https://github.com/pypa/pip/issues/24)和[问题 #25](https://github.com/pypa/pip/issues/25)中得到解决。这些问题已关闭，但请提供更多详细信息。

到目前为止，我正在做的是首先安装 numpy，然后从我的需求文件中安装所有软件包。

## 更新 12/2012

有一个新的 open [pip issue](https://github.com/pypa/pip/issues/720)可以解决这个问题。

## 更新 04/2013

该问题已关闭为 WONTFIX

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-20T00:01:38.457

这是该库的一个已知问题，目前正在作为 Matplotlib 增强提案进行讨论：[https](https://github.com/matplotlib/matplotlib/wiki/MEP11) ://github.com/matplotlib/matplotlib/wiki/MEP11 。在修复之前，我能想象的唯一解决方案是重新打包库以删除 numpy 检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:50:37.507

是的。“requirements.txt”只是一个平面文件，pip 可以使用它来安装包。在该文件中，您可以更改依赖项的版本。例如，看起来您至少需要 1.1，因此请尝试将带有 'numpy' 的行更改为：

numpy==1.1

或者，您可以像这样使用 >=：

numpy>=1.1

这可能是阻碍你的原因。但是，AFAIK，matplotlib 应该已经依赖于 numpy。似乎这可能需要修复。

另请参阅[如何 pip 安装具有最小和最大版本范围的软件包？](https://stackoverflow.com/questions/8795617/how-to-pip-install-a-package-with-min-and-max-version-range)

和

[在 setup.py 或 pip 需求文件中，如何控制安装包依赖项的顺序？](https://stackoverflow.com/questions/4996589/in-setup-py-or-pip-requirements-file-how-to-control-order-of-installing-package)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T05:17:29.283

最近玩过 pip 之后，我意识到应该手动重新排列需求文件，最好是在生成它的时候。

在简单的情况下（即只是`numpy`并且`matplotlib`需要排序），您可以反向请求文件：`pip freeze | sort -r`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T10:54:17.057

我刚刚习惯于调用一个脚本来重复设置我的 virtualenv；它涉及两个需求文件：一个只有 numpy，第二个包含其他所有文件。

习惯这并不是一件可怕的事情，因为当您通过需求文件安装时，pip 会尝试做“全部或全部”。这样，您可以分阶段安装，以便首先安装依赖项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-14T23:44:45.607

我让它在 iPython 笔记本中的 virtualenv 中工作！

我有

```
ipython==2.2.0
numpy==1.8.2
matplotlib==1.4.2 
```

它可以在 iPython 笔记本中使用

```
%matplotlib inline
from pylab import *
plot([1,2,3]) 
```

不过，它在 iPython 控制台中不起作用，但我非常高兴能在笔记本中绘制图表！

有一次，我可以通过在 virtualenv 中安装一些东西来欺骗它从控制台工作，但其他东西只能在全局命名空间中，但我忘记了我是如何做到的。我只是不停地安装和卸载东西。

# jquery - Jquery 数学和货币价值

> ID：11797689
> 
> 赞同：1
> 
> 时间：2012-08-03T14:28:17.857
> 
> 标签：jquery, math

我有一个非常具体的 jquery 函数需要编写，但我遇到了困难。这是代码。

```
<input style="width:30px;" type="text" maxlength="200" 
       class="contact" value="" id="cost" name="cost"> 
equivlent of <span id="displayValue"></span> 
```

我需要的是，当有人在输入字段中输入一个值时，它将该值乘以 50p（英国货币）并输出跨度中的数值。

即如果有人在输入框中输入“20”，我会得到结果 £10:00

有人可以指出我正确的方向吗？

提前致谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:31:03.627

看看以下内容：

*   jQuery 的[val()](http://api.jquery.com/val/)方法获取的值`<input>`
*   本机 JavaScript 方法[parseFloat](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)帮助计算
*   jQuery 的[text()](http://api.jquery.com/text)方法来设置`<span>`.

如果您发布您的 JavaScript，我们可以帮助指出它是否有任何问题，但是由于您只是要求指出正确的方向，因此我将把上述内容的确切用法留给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:32:13.700

您可以为按下的键添加一个侦听器，它将字段值转换为浮点数，并将其乘以 0.5 ：

```
$("#cost").keypress(
   function(){
     var result = 0.5 * parseFloat(this.value);
     // do something with the result
   }
); 
```

# batch-file - 批处理编程：在循环时多次调用函数并检索结果

> ID：11797690
> 
> 赞同：1
> 
> 时间：2012-08-03T14:28:17.947
> 
> 标签：batch-file

我有一个**批处理**脚本，在其中*循环遍历文件**夹*中的所有*文件名*，然后调用命令以从*filename中删除***扩展**名。我想在每次迭代时将文件名（不带扩展名）存储在一个名为供以后重用的变量中。****`result`****

 ****该`RemoveExtension`功能工作正常。但是我无法检索**结果**并将其存储在`_result`变量中。当我打印它时，它总是空的。谢谢你的帮助！

```
@echo OFF
SETLOCAL EnableDelayedExpansion

set "_result="
for /f "delims=" %%i in ('dir "%~1\*.txt" /b') DO (
   echo.filepath: "%~1\%%i"
   call :RemoveExtension "%%i"
   echo._result: "%_result%"  // The "_result" variable is always EMPTY ""
)
goto :eof

:RemoveExtension
SETLOCAL
   REM echo "%~1"
   set "filename=%~1"

   :loop
      if "%filename:~-1%" NEQ "." (
         set "filename=%filename:~0,-1%
         goto :loop
      ) 
   set "filename=%filename:~0,-1%"
   echo "%filename%"
ENDLOCAL & set "_result=%filename%"
goto :eof 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:46:14.820

试试这个...更简单的方法来删除扩展。因为您在循环`_result`内进行更改`FOR`，所以您需要使用`!`而不是`%`.

```
@ECHO OFF

SETLOCAL EnableDelayedExpansion

SET "_result="
FOR /f "delims=" %%i IN ('dir "%~1\*.txt" /b') DO (
   ECHO.filepath: "%~1\%%i"
   SET _result=%%~ni
   ECHO._result: "!_result!"
) 
```****

# css - 从 CSS 内联元素中删除多余的空格

> ID：11797696
> 
> 赞同：1
> 
> 时间：2012-08-03T14:28:43.623
> 
> 标签：css, list, stylesheet

我有一个水平列表，我希望能够在没有以下空格的情况下单击每个列表项。

**HTML：**

```
<ul id="server-header-list">
    <li>item1: </li>
    <li>item1 value</li>
    <li>testing list item2: </li>
    <li>value of item2</li>
</ul> 
```

**CSS：**

```
#server-header-list li {
    display: inline;
    list-style-type: none;
    padding-right: 7px;
    white-space: nowrap;
} 
```

当前输出如下所示：

```
item1: item1 value  testing list item2: value of item2 
```

这很好。但是，当我尝试单击 item2 的值时，它会选择整行而不是只选择“item2 的值”，当我单击 item1 时，它会占用一个额外的后续空间。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:41:20.347

这是因为您`<li>`的 's （或`<ui>`'s 但我怀疑这是一个错字）显示为内联。你可以这样做：

```
li {
 display: block;
 float: left;
} 
```

这应该可以防止出现空白

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T14:30:03.577

我建议将您的`<ui>`标签更改`<li>`为我认为您想要的，`<ui>`这不是有效的标签。这可能会解决它

# expect - 发送命令，而期望可以得到特定的文本

> ID：11797697
> 
> 赞同：1
> 
> 时间：2012-08-03T14:28:43.770
> 
> 标签：expect

我在使用 expect 时遇到了一个问题。我需要列出一些信息。但是程序列出了 10 个项目，然后显示 (More...) 并等待一个键所以：

```
expect "More..."
send "\n" 
```

但是程序显示了更多的 10 行并再次执行，我可以跟踪我需要执行多少次，但是列表发生了很大变化。

有没有办法做类似的事情：

```
while expect "More..." do
   send "\n"
done 
```

我知道期望等待一个字符串，是否有某种“命中”命令？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:13:33.073

你想要`exp_continue`的和块形式`expect`：

```
expect {
  "More..." {
    send "\n"
    exp_continue
  }
  "something else to expect for"
} 
```

# windows - 用于循环的 Windows 脚本

> ID：11797703
> 
> 赞同：1
> 
> 时间：2012-08-03T14:29:03.280
> 
> 标签：windows, scripting, batch-file

我是 Windows 脚本的新手。我写了一个小批处理文件来移动一个大目录中的子目录和文件。

```
@ECHO OFF
for /f %x in ('dir /ad /b') do move %xipad %x\
for /f %x in ('dir /ad /b') do md %x\thumbs
for /f %x in ('dir /ad /b') do move %x\*thumb.png %x\thumbs\
for /f %x in ('dir /ad /b') do move %x\*thumb.jpg %x\thumbs\
for /f %x in ('dir /ad /b') do del %x\%xipad\*thumb.png
for /f %x in ('dir /ad /b') do del %x\%xipad\*thumb.jpg
for /f %x in ('dir /ad /b') do del %x\xml.php
for /f %x in ('dir /ad /b') do del %x\%xipad\xml.php 
```

看起来我可以将所有命令放入一个“for /f %x in...”循环中，然后在里面执行逻辑。我可能应该检查扩展名是 .png 还是 .jpg （而不是两个单独的命令）。做这两个动作的最佳方法是什么？此外，我还应该实施其他一些措施来使其变得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:36:03.547

`for`只需按以下方式执行一个循环：

```
for /D %%x in (*) do (
  move %%xipad %%x\
  md %%x\thumbs
  move %%x\*thumb.png %x\thumbs\
  move %%x\*thumb.jpg %x\thumbs\
  del %%x\%%xipad\*thumb.png
  del %%x\%%xipad\*thumb.jpg
  del %%x\xml.php
  del %%x\%%xipad\xml.php
) 
```

请注意，您必须`%`对这些变量使用双重批处理文件。正如您注意到的那样，您不需要循环`dir`输出，因为`for`可以自己迭代文件和目录就可以了。

至于检查扩展名，我有点不知所措，具体来说，您要检查*什么扩展名。*您正在遍历文件夹，但文件夹上的扩展很少有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:38:14.487

在这种情况下，PowerShell 看起来有点冗长，但无论如何这里是一个示例。同样，正如我在评论中提到的 - 如果您现在正在尝试学习 Windows 的脚本语言，请帮自己一个忙并学习 PowerShell！

```
#Get the directories we're going to work with:
Get-ChildItem -Path d:\rootdirectory\ | ? {$_.PSIsContainer} | % {
    #Remove all xml.php files from current directory and current directory ipad.
    Remove-Item ($_.FullName + "\xml.php")
    #For all the files in the directory move the each "ipad" directory into the directory with the same name.
    If ($_.Name -like *ipad) {  
        #Delete all  png and jpg images with "thumb" in the name from each current directories ipad directory
        Get-ChildItem $_ -filter "*thumb* | ? {($_.Extension -eq "jpg") -or ($_.Extension -eq "png")} | % {
            Remove-Item $_
        }
        #...Then actually move the item
        Move-Item $_ -Destination $_.FullName.Replace("ipad","")}
    }
    #Use else to work on the remainder of the directories:
    else {
        #Create a directory called "thumbs" inside all of the current directories
        $thumbDir = New-Item -ItemType Directory -Path ($_.FullName + "\thumbs\")
        #Move all png and jpg files in the current directory with "thumb" in the name into the "thumbs" directory.
        Get-ChildItem $_ -filter "*thumb* | ? {($_.Extension -eq "jpg") -or ($_.Extension -eq "png")} | % {
            Move-Item $_ -Destination $thumbDir.FullName
    }
} 
```

# javascript - 为什么 jQuery 的 $.type() 定义为本机 ECMAScript 错误对象返回“对象”而不是“错误”？

> ID：11797707
> 
> 赞同：13
> 
> 时间：2012-08-03T14:29:14.877
> 
> 标签：javascript, jquery

**更新：**我创建了一张票：[http ://bugs.jquery.com/ticket/12191](http://bugs.jquery.com/ticket/12191)

* * *

jQuery 的[`$.type()`](http://api.jquery.com/jQuery.type/)函数返回`[[Class]]`对象的内部属性（小写）。例如：

```
$.type( {} ) // "object"
$.type( [] ) // "array"
$.type( function () {} ) // "function" 
```

但是，它仅适用于以下类型的对象：

```
Boolean Number String Function Array Date RegExp Object 
```

由 jQuery 源代码的这一部分指定：

```
// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(i, name) {
    class2type[ "[object " + name + "]" ] = name.toLowerCase();
}); 
```

除了这些类型的对象之外，ECMAScript 标准还为这些对象定义了相应的`[[Class]]`内部属性：

```
Arguments Error JSON Math 
```

这在 ECMAScript 标准的这句话中指定（在[第 8.6.2 节](http://ecma-international.org/ecma-262/5.1/#sec-8.6.2)中）：

> 宿主对象的 [[Class]] 内部属性的值可以是除“Arguments”、“Array”、“Boolean”、“Date”、“Error”、“Function”、“JSON”之一之外的任何 String 值、“数学”、“数字”、“对象”、“正则表达式”和“字符串”。

`$.type`返回`"object"`这些类型的对象：

```
$.type( new Error ) // "object"
$.type( JSON ) // "object"
$.type( Math ) // "object"
(function () { $.type( arguments ); /* "object" */ }()) 
```

而不是`"error"`, `"json"`, `"math"`, and `"arguments"`, 它们是`[[Class]]`这里的实际值（大写）。

我想澄清一下，`$.type`如果它愿意，它可以返回那些正确的值，因为它使用`Object.prototype.toString.call()`检索方法，例如，它返回`"[object Error]"`对象`Error`。

那么，为什么 jQuery 报告`"object"`而不是这四个值呢？我可以理解`JSON`and `Math`，因为这些不是实例，而是单例对象。我什至可以理解`arguments`，因为这是一个自动提供的对象，而不是由 JavaScript 程序显式创建的实例（如 中`var args = new Arguments;`）。购买为什么会出错？我看不出是什么让`Error`对象变得特别（与其他原生类型相比，如`Date`,`Array`等）。

## **tl;博士**

```
$.type( new Error ) // why does this return "object" instead of "error"? 
```

* * *

**更新：**只是为了澄清一件事：我知道为什么`$.type`返回实例，`"object"`因为`Error`我已经查看了它的源代码，并找到了导致这种行为的代码。我想知道为什么`$.type`被定义为以这种方式行事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:35:56.907

这是因为 jQuery 的作者要么忘记了这种类型，要么不关心它。

自从

```
Object.prototype.toString.call( new Error ); 
```

将正确返回`[object Error]`。

所以，如果你很高兴有一个稍长的比较字符串，我们开始吧：

```
(function( type ) {
    console.log( type(new Error) );
}( Function.prototype.call.bind( Object.prototype.toString ))); 
```

* * *

除此之外，还有 jQuery 不关心的其他“类型” like`JSON`或**any** `DOMElement`。例如，在上述方法正确返回时`$.type( JSON )`也返回。`object``type``[object JSON]`

另一个示例`$.type( document.body )`再次返回`object`我的简单`type()`方法再次正确返回的位置`[object HTMLBodyElement]`。

长话短说，jQuery 并没有`[[Class]]`从所有可用类型中抽象出所有值。浏览器兼容可能是有原因的，但对于`Error`类型，没有。

* * *

实际上有无数种类型，仅适用于所有`DOM`对象。我可以想象 jQuery 作者只想支持`native object types`，而没有`host object types`本质上`JSON`和任何`DOMxxxElement`等。我不确定`Error object`它是本机还是主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T23:22:38.890

好的，所以我在这里提交了一张票：http: [//bugs.jquery.com/ticket/12191](http://bugs.jquery.com/ticket/12191)。它已被归类为错误，预计将在 1.8.1 版本中修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:07:23.513

我认为`Error`类型被认为是不可靠的，很多代码`throws` *东西*，不需要由`Error`构造函数返回：

```
function foo()
{
    throw 'I\'m what a lot of people call an error';
}
try
{
    foo();
}
catch(e)
{
    console.log(Object.prototype.toString.call(e));//[object String]
} 
```

的省略`Arguments`甚至更容易解释：`'use strict';`而是限制了您可以对 arguments 对象执行的操作。我认为最好不要过多地推广它的使用，我认为约翰也是如此。（对不起，永远不要正确拼写他的姓氏——不过，我不是这个人的第一个名字）。

数学被许多人认为是一个对象的坏主意，它应该只是一组函数（根据大多数 JS 人）。无论如何，何时有人将 1 Math 实例传递给该`$.type`方法？您刚刚*输入了构造函数！*让你重复这件事可能有什么目的？

JSON 是一个对象，旧版本的 IE 不支持它，因此您必须包含一个文件（就像您必须使用 jQuery 一样）才能拥有该`JSON`对象。它绝不是原生类型，而是从 DC 的脑海中萌芽的编写良好的格式。除了它是一个对象这一事实之外，JS 还能说什么？

# java - jetty WebSocket 自定义事件

> ID：11797708
> 
> 赞同：2
> 
> 时间：2012-08-03T14:29:19.980
> 
> 标签：java, servlets, websocket, jetty, maven-jetty-plugin

在使用 node.js 和 socket.io 创建 WebSocket 服务器之前，我是使用码头的 WebSockets 新手。但由于不同的要求，我将不得不使用 java WebSocketServlet/WebSocket 并且到目前为止使用 maven、jetty 和 jetty-websocket 插件做得很好。我的问题是，我没有找到任何与 java 解决方案的 socket.io 的 socket.on(event, fn) 实现相媲美的东西。我希望有同样的可能性对从客户端触发的不同事件做出反应，例如“new”、“addthis”、“jointhat”，......将一些数据作为 json 或作为正文中的 POST 参数发送。是否有任何可能或 WebSocket 实现可以与 socket.io 做同样的事情？做这个“通道”的东西，我可以在服务器端实现事件处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:08:06.417

WebSocket 规范中没有自定义事件，socket.io 只是遵循自己的协议支持自定义事件 - [https://github.com/LearnBoost/socket.io-spec](https://github.com/LearnBoost/socket.io-spec)

据我所知，没有支持自定义事件监听的 Java 实现。

但是，使用 Atmosphere，您可以将 socket.io 客户端与 Java Web 服务器一起使用，但我还没有测试过。[https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-Socket.IO](https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-Socket.IO)

如果您想直接控制 Jetty 的 WebSocketServlet，您可能想在客户端使用其他库，例如 jQuery Socket。- [https://github.com/flowersinthesand/jquery-socket/tree/master/samples/jetty-ws](https://github.com/flowersinthesand/jquery-socket/tree/master/samples/jetty-ws)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T22:06:54.903

Jetty 的 websocket 实现只关心处理 websocket 的基础。

*   二进制消息（带分片）
*   短信（带分片）
*   乒乓
*   关

关于支持各种新的 websocket 子协议（奇怪的名称），例如[WAMP](http://wamp.ws/spec)（websocket 应用程序消息传递协议），有一些简短的讨论。但这些只是建立在基本的 websocket 层之上。

另一种选择是使用像[CometD](http://cometd.org/)这样的全通道 API ，并将其配置为使用 websocket，而不是回退到旧的通信格式。

# objective-c - 动画标签和文本字段的问题（objective-c）

> ID：11797712
> 
> 赞同：0
> 
> 时间：2012-08-03T14:29:35.730
> 
> 标签：objective-c, xcode, animation, uitextfield, uilabel

我在标签和文本字段的动画方面遇到问题。标签只是消失，文本字段不做任何事情。我不知道为什么，但是按钮我没有问题。想想错过了什么真的很愚蠢。好吧，这是 ai 为标签所做的尝试：

```
UILabel *label = (UILabel*)[self.view viewWithTag:1];
[UIView animateWithDuration:1 animations:^{label.frame = CGRectMake(0,0,1,1);}]; 
```

对于文本字段：

```
UITextField *box = (UITextField*)[self.view viewWithTag:1];
[UIView animateWithDuration:1 animations:^{box.frame = CGRectMake(0,0,1,1);}]; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:37:14.663

`CGRectMake(0,0,1,1)`将是一个非常小的盒子。它们并没有消失，而是将它们全部塞入一个像素中。尝试一些更合理的东西`CGRectMake(0,0,100,50)`，看看是否有效。

`CGRectMake`定义为：

```
CGRect CGRectMake (
   CGFloat x,
   CGFloat y,
   CGFloat width,
   CGFloat height
); 
```

所以你将宽度和高度设置为1。

如果你只想移动中心而不调整大小，试试这个。

```
[UIView animateWithDuration:1 animations:^{label.center = CGPointMake(x,y);}]; 
```

其中 x 和 y 是新中心的坐标。

# java - 选择正确的文件格式

> ID：11797715
> 
> 赞同：2
> 
> 时间：2012-08-03T14:29:46.500
> 
> 标签：java, file, serialization, format, file-format

我正在开发一个应用程序，它应该可以保存/加载数据。大多数数据存储在类的实例中。实例中的数据包括：

*   一个`double[][]`数组
*   一些`String, int, bool`和一些枚举器

我有多个这些实例+一些我想存储在单个文件中的全局数据。

到目前为止，我将所有内容保存为二进制数据，使用

```
DataOutputStream out = new DataOutputStream(FileOutputStream(file));
out.writeInt()/writeBoolean()/writeUTF()/etc 
```

这很好用，问题是它不是很灵活。如果我向容器类添加/删除一些变量，则没有简单的方法来保持旧格式兼容。我开始使用在文件开头添加的版本号。但这会导致每个格式版本都有一个大的 loadData/closeData 方法。

基于文本的文件是不可能的，因为它们为我的双数组使用了太多空间。

你知道解决这个问题的好方法吗？即定义一种不会产生大量代码的向后兼容格式？任何建议表示赞赏。

我正在考虑的一个想法是用一个标识该变量的整数来标记每个变量。所以格式是`[identifier1][variable1(String)][identifier2][variable2(double[][])]...`.

我也想过序列化，但我没有任何经验，也不能真正判断这是否是正确的方法。

如果您需要有关数据或一些示例的更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:34:24.017

[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)是谷歌很好的跨平台（和跨语言）存储数据的方式，已经具备向后兼容性，可以尝试一下。

特别是文档的这一部分与您的案例有关：

> 可以轻松引入新字段，不需要检查数据的中间服务器可以简单地解析并传递数据，而无需了解所有字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:38:12.980

某种本地数据库怎么样，比如[SQLite](http://www.sqlite.org)或[JavaDB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)？非常轻量，省去了标记变量的麻烦，允许灵活地选择检索数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:48:33.447

不要走序列化路径......它充满了石头和不兼容。一旦更改了数据对象，一切都将被破坏。Google protobuf 是一个非常好的解决方案。在 c++ 中使用过一次

了解如何配置文件格式需要付出一些努力，但这肯定是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:38:43.303

我在使用时从来没有遇到过任何问题`Serialization`，在使用序列化时应该注意的事情很少。

**/////-----------什么时候序列化失败----/////**

**-**当一个实例变量被**删除**时。

**-**当实例变量的**数据类型**改变时。

**-**当**非静态**实例变量变为**静态**实例变量时。

**-**当**非瞬态**实例变量变为**瞬态**变量时。

**-**当一个类在**层次结构中****向上或向下移动时**。

 ****-**当**序列化**类变为**非序列化时。**

**/////-----------当序列化不生效时----------------/////**

**-** When Instance variable is **added**.

**-** When the **access-specifier** of the Instance variable is changed.

**-** When the **transient** Instance variable gets converted to **non-transient** Instance variable.

**-** When you **add or remove classes.****

# forms - 在 Ajax 成功时刷新数据表

> ID：11797719
> 
> 赞同：8
> 
> 时间：2012-08-03T14:30:19.197
> 
> 标签：forms, jquery, datatables

我正在使用数据表和 jquery 对话框。总的来说，我有 3 个表格和 3 个数据表。我的脚本运行良好，但我正在努力解决的问题是在 ajax 保存成功时更新正确的数据表（它甚至不必是正确的对应表，它可以更新 3 个表单保存中的任何一个上的所有 3 个表。 )

任何指导将不胜感激。

**带有用于在对话框中显示数据表/表单的按钮的页面**

```
<div style="float:left;">
<button class="menubutton" id="view_academic">Academic</button>
<button class="menubutton" id="view_business">Business/Suppport</button>
<button class="menubutton" id="line_managers">Managers/Divisions</button>
<br/>
<br/>
</div>
<div style="float:right;">
<a href="line_managers_form.php" class="menubutton" id="add_line_managers">Add Managers/Divisions</a>
<a href="academic_form.php" class="menubutton" id="add_academic">Add Academic</a>
<a href="business_form.php" class="menubutton" id="add_business">Add Business/Suppport</a>
<br/>
<br/>
</div>
<div style="clear:both"></div>

<div id="academic_list">
<h2>Academic Entitlements</h2>
<table class="dataTable" id="academic_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<tr>
<th>Year</th> 
<th>Employee</th>  
<th>Division</th>
<th>Contract</th>
<th>Entitlement</th>
<th>Line Manager</th>
</tr> 
</thead>
<tbody>
    <tr>
        <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
</tbody>
</table>
</div>

<div id="business_list" class="the_options" style="display:none;">
<h2>Business & Manual Entitlements</h2>
<table class="dataTable" id="business_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<tr>
<th>Year</th> 
<th>Employee</th>  
<th>FT/PT</th>
<th>Weekly Hours</th>
<th>Division</th>
<th>Commencement</th>
<th>Entitlement</th>
<th>Line Manager</th>
</tr> 
</thead>
<tbody>
    <tr>
        <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
</tbody>
</table>
</div>

</div>

<div id="line_managers_list" class="the_options" style="display:none;">
<h2>Line Managers & Divisions</h2>
<table class="dataTable" id="line_managers_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<tr>
<th>Division</th>
<th>Name</th>
<th>Line Manager</th>
</tr> 
</thead>
<tbody>
    <tr>
        <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
</tbody>
</table>
</div> 
```

**初始化数据表**

```
$(function() {
    // Implements the dataTables plugin on the HTML table
    var $acTable= $("#academic_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/academic_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"top"iflp<"clear">>rt>',
        "sScrollX": "100%",
        "sScrollXInner": "100%",
        "bScrollCollapse": true
        });     

});
$(function() {
    // Implements the dataTables plugin on the HTML table
    var $buTable= $("#business_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/business_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"top"iflp<"clear">>rt>',
        "sScrollX": "100%",
        "sScrollXInner": "100%",
        "bScrollCollapse": true
        });     

});
$(function() {
    // Implements the dataTables plugin on the HTML table
    var $lmTable= $("#line_managers_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/line_managers_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"top"iflp<"clear">>rt>'
        });     

});

$(document).ready(function() {
$(".the_options").hide();
}); 
```

**对话框/数据表显示/隐藏/打开/关闭和 AJAX 保存形式：**

```
$(document).ready(dialogForms);
function dialogForms() {
  $('a.menubutton').click(function() {
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {
                submitFormWithAjax($(this).find('form'));
                $(this).dialog('close');
                $lmTable.fnDraw('');
                },
          'Cancel': function() {$(this).dialog('close');}
        },
        close: function() {$(this).remove();},
        width: 600,
        height: 500
      });
    }, 'html');
    return false;
  });
}

function submitFormWithAjax(form) {
  form = $(form);
  $.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    type: (form.attr('method')),
    dataType: 'script',
    success: function(data){
    $(this).dialog('close');
    $lmTable.fnDraw('');
   }
  });
  return false;
}

$(function() {

        $("#add_academic")
            .button()
            .click(function() {
                $("#academic-form").dialog( "open" );
            });
        $("#add_line_managers")
            .button()
            .click(function() {
                $("#line-managers-form").dialog( "open" );
            });
        $("#add_business")
            .button()
            .click(function() {
                $("#business-form").dialog( "open" );
            });
        $("#view_academic")
            .button()
            .click(function() {
                $('#academic_list').show();
                $('#business_list').hide();
                $('#line_managers_list').hide();
            });
        $("#view_business")
            .button()
            .click(function() {
                $('#academic_list').hide();
                $('#business_list').show();
                $('#line_managers_list').hide();
            });
        $("#line_managers")
            .button()
            .click(function() {
                $('#academic_list').hide();
                $('#business_list').hide();
                $('#line_managers_list').show();
            });

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T16:34:13.193

要更新一个表，只需调用`fnDraw()`它。由于您没有使用全局变量，因此您必须先检索表

```
var $lmTable = $("#line_managers_table").dataTable( { bRetrieve : true } );
$lmTable.fnDraw(); 
```

编辑 - 仅显示正确的表格，您可以执行以下操作：

```
function dialogForms() {
  $('a.menubutton').click(function() {
    var id = this.id;// Save the id of the clicked button
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {
                submitFormWithAjax($(this).find('form'), id);// Pass the id to the function 

function submitFormWithAjax(form, id) {
  form = $(form);
  var table_id;
  // Choose the table to display depending on the id, i made some guesses but adjust this
  switch(id){
    case 'view_academic': table_id = '#academic_table';
    break;
    case 'view_business': table_id = '#business_table';
    break;
    case 'line_managers': table_id = '#line_managers_list';
    break;
  }
  $.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    type: (form.attr('method')),
    dataType: 'script',
    success: function(data){
        $(this).dialog('close');
        // Refresh table
        var oTableToUpdate =  $(table_id).dataTable( { bRetrieve : true } );
        $oTableToUpdate .fnDraw();
        // Hide all tables
        $('table').hide();
        // Show the refreshed
        $(table_id).show();

   }
  });
  return false;
} 
```

# sql-server - SQL 返回与创建表的案例

> ID：11797720
> 
> 赞同：0
> 
> 时间：2012-08-03T14:30:20.533
> 
> 标签：sql-server, stored-procedures, case, temp-tables

我有一个存储过程，它现在返回一个（可能）大数据集。此数据来自递归调用，因此看起来像这样：

```
With Hierarchy as(

SELECT distID as D, [Name] as N, enrolling as E, parent_code as P, 
        FROM sales_reps
        WHERE enrolling = @dist_ID
        UNION ALL
            SELECT
            t.distID as D, t.[Name] as N, t.enrolling as E, t.parent_code as P
        FROM sales_reps t
            INNER JOIN Hierarchy h ON t.enrolling = h.D
)
SELECT *, CASE WHEN P > 5 Then 1 Else 0 END As Q 
From Hierarchy 
```

好的，所以这没什么大不了的，问题是现在我需要更多地使用这些数据，并且将在几分钟内对此进行多次查询。所以计划有时（为了不破坏当前功能）创建一个包含这些数据的表，稍后将被删除。

我正在尝试类似的东西：

```
CASE @temp_Table
    WHEN IS NULL
        Select * FROM retTable
    ELSE
        SELECT INTO @temp_Table
        * FROM retTable
End 
```

但我无法让我将结果命名为 retTable 或喜欢 case 语句。我不认为这是对 case 语句的正确使用，但我不知道还能使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:43:33.980

这是我找到的关于如何在存储过程之间共享数据的最佳文本。里面有很多信息，但值得一读：

[http://www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

不知道您希望将此数据保存到表中的频率和场景的完整详细信息，您可以使用一些选项。

如果您只需要将此信息保存在一个地方，那么一个简单的`INSERT-EXEC`方法可能适合您。您在调用过程中创建一个与被调用过程（我正在调用`hierarchy_stored_proc`）的输出相匹配的临时表

```
CREATE TABLE #results (...)
INSERT INTO #results 
 EXEC hierarchy_stored_proc 
```

如果您认为在更多地方需要此输出，您可以将调用的过程更改为始终将数据写入临时表，然后向 proc 添加一个参数，指示它是否应该通过 select 语句返回结果集. 如果您将该过程的默认值设为 1，则不应影响现有功能。就像是：

```
WITH Hierarchy AS (...)
INSERT INTO #results
SELECT ...

IF @returnResults=1
  SELECT * FROM #results 
```

# join - MDX 查询中的分组

> ID：11797721
> 
> 赞同：0
> 
> 时间：2012-08-03T14:30:24.633
> 
> 标签：join, ssas, mdx, cross-join

我是 MDX 世界的新手..

我想仅根据 3 行对列进行分组。但是，也需要加入第 4 行。我的查询是：

```
SELECT 
 (    { 
   [Measures].[Live Item Count] 
          } 
 ) DIMENSION PROPERTIES parent_unique_name ON COLUMNS, 

 Crossjoin(
 crossjoin(

  [Item].[Class].&[Light],
  [Item].[Style].&[Fav]
  [Item].[Season Year].members),
  [Item].[Count].children )    on rows
FROM Cube 
```

输出为：

```
Light(Row) | FAV(Row) | ALL(Row)  | 16(Row) | 2(col)
Light(Row) | FAV(Row) | ALL(Row)  | 7(Row)  | 1(col)
Light(Row) | FAV(Row) | 2012(Row) | 16(Row)| 2(col)
Light(Row) | FAV(Row) | 2011(Row) | 7(Row) | 1(col) 
```

但是，我希望我的输出显示为：

```
Light(Row) | FAV(Row) | ALL(Row)  |        | 3(col)
Light(Row) | FAV(Row) | 2012(Row) | 16(Row)| 2(col)
Light(Row) | FAV(Row) | 2011(Row) | 7(Row) | 1(col) 
```

即，我想对前两行进行分组，以使第三列中没有重复的“全部”。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:57:29.663

试试这个 - 使用关卡名称 Season Year 和属性名称 Season Year 将选择没有 ALL 成员的每个成员：

```
SELECT 
 (    { 
   [Measures].[Live Item Count] 
          } 
 ) DIMENSION PROPERTIES parent_unique_name ON COLUMNS, 

 Crossjoin(
 crossjoin(

  [Item].[Class].&[Light],
  [Item].[Style].&[Fav]
  [Item].[Season Year].[Season Year].members),
  [Item].[Count].children )    on rows
FROM Cube 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:31:15.217

`[Item].[Count]`如果层次结构中有 All 成员，则可以使用此查询：

```
SELECT {[Measures].[Live Item Count]} DIMENSION PROPERTIES parent_unique_name ON COLUMNS, 
Crossjoin(
  Crossjoin([Item].[Class].&[Light], [Item].[Style].&[Fav]),
  Union(
    Crossjoin({"All member of [Item].[Season Year]"}, {"All member of [Item].[Count]"}),
    Crossjoin(Except([Item].[Season Year].members, {"All member of [Item].[Season Year]"}), [Item].[Count].children),
  ) ON ROWS
FROM Cube 
```

# sql-server - 如何执行从 Excel 宏到 SQL Server 的更新语句

> ID：11797724
> 
> 赞同：1
> 
> 时间：2012-08-03T14:30:38.557
> 
> 标签：sql-server, excel, vba

我有一个 Excel 2007 文件，我在其中使用与 SQL Server 数据库的远程连接进行了大量数据处理（仅报告）。处理完报告后，我想更新位于同一 SQL Server 数据库上的表的特定字段。就像是：

```
UPDATE [MetricsCollection].[dbo].[tblBatchFeeder] 
SET datReportProcessed = CURRENT_TIMESTAMP 
WHERE intID = 48 
```

解决这个问题的最简单方法是什么？

亲切的问候，

保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:13:01.040

最好在服务器上有一个程序。

```
Dim cn As New ADODB.Connection
Dim cmd As New ADODB.Command

cn.Open ServerConnect ''http://connectionstrings.com

cmd.ActiveConnection = cn

cmd.CommandText = "UpdateMetrics" ''stored procedure
cmd.CommandType = adCmdStoredProc
cmd.Parameters("@intID").Value = 48 ''Parameter
cmd.Execute recs 
```

# mysql - 来自实时服务器上本地主机的 SQL 注入攻击

> ID：11797727
> 
> 赞同：0
> 
> 时间：2012-08-03T14:30:43.093
> 
> 标签：mysql, sql, database, wordpress, phpmyadmin

这解释起来很复杂，但我不断地通过单击链接从另一个网站获得注入攻击。奇怪的是，谷歌浏览器似乎是生成它的人。

详细地说，我有这个站点：[http ://byassociationonly.com，我有这个站点：](http://byassociationonly.com) [http](http://dev.byassociationonly.com/example) : //dev.byassociationonly.com/example （不能将站点命名为它的客户端站点）。

每当我点击[http://byassociationonly.com](http://byassociationonly.com)上的任何链接时，在 Google Chrome 中，在我的机器上，它们都不起作用并且我受到注入攻击（我正在使用插件向我发送电子邮件通知）发生，Wordpress 防火墙）。

我收到的通知是这样的：[http ://cl.ly/image/2U111T0m2X35](http://cl.ly/image/2U111T0m2X35)

我根本不明白这个错误，我以前从来没有遇到过问题。

我什至删除了该页面中引用的代码，它来自single.php，但问题仍然存在。我认为与本地运行的 MAMP 服务器存在冲突，但即使它们被关闭，问题仍然存在，但 wp_config 中根本没有引用 localhost:8888。

但是，如果我在 Firefox 中执行此操作，我根本不会收到任何通知，并且链接工作正常。

有没有人知道如何确定问题所在和解决方案？

根据要求，这里是 single.php 页面上的代码，错误是指：[http ://pastebin.com/QKqtLXQi](http://pastebin.com/QKqtLXQi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:16:51.193

您最近是否安装了任何 Chrome 扩展程序？在经过数小时的故障排除之前和之后，我遇到了类似的问题，结果证明是一个扩展阻止了一些东西。它在 FF 中运行良好的事实，感觉就像一个孤立的问题。

# linux - 如何在linux中查找包含字符串的行

> ID：11797730
> 
> 赞同：64
> 
> 时间：2012-08-03T14:30:48.027
> 
> 标签：linux, string, file, search

我在 Linux 中有一个文件，我想在该文件中显示包含特定字符串的行，该怎么做？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-03T14:32:28.410

执行此操作的常用方法是 with `grep`，它使用[正则表达式](/questions/tagged/regex "显示标记为“正则表达式”的问题")模式来匹配行：

```
grep 'pattern' file 
```

将输出与模式匹配的每一行。如果您只想搜索固定字符串，请使用`grep -F 'pattern' file`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-10-25T07:05:48.833

此外`grep`，您还可以使用其他实用程序，例如`awk`或`sed`

这里有几个例子。假设您要`is`在名为`GPL`.

**您的示例文件**

```
user@linux:~$ cat -n GPL 
     1    The GNU General Public License is a free, copyleft license for
     2    The licenses for most software and other practical works are designed
     3  the GNU General Public License is intended to guarantee your freedom to
     4  GNU General Public License for most of our software;
user@linux:~$ 
```

**1\. grep**

```
user@linux:~$ grep is GPL 
  The GNU General Public License is a free, copyleft license for
the GNU General Public License is intended to guarantee your freedom to
user@linux:~$ 
```

**2.awk**

```
user@linux:~$ awk /is/ GPL 
  The GNU General Public License is a free, copyleft license for
the GNU General Public License is intended to guarantee your freedom to
user@linux:~$ 
```

**3.sed**

```
user@linux:~$ sed -n '/is/p' GPL
  The GNU General Public License is a free, copyleft license for
the GNU General Public License is intended to guarantee your freedom to
user@linux:~$ 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-23T05:09:13.683

/tmp/我的文件

```
first line text
wanted text
other text 
```

命令

```
$ grep -n "wanted text" /tmp/myfile | awk -F  ":" '{print $1}'
2 
```

切换到 grep 会在`-n`任何匹配的行前面加上行号（后跟`:`），而第二个命令使用冒号作为列分隔符 ( `-F ":"`) 并打印出任何行的第一列。最终结果是匹配的**行号列表。**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-03T14:36:04.180

[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?egrep)系列命令（包括 egrep、fgrep）是解决此问题的常用解决方案。

```
$ grep pattern filename 
```

如果您正在搜索源代码，那么[ack](http://betterthangrep.com/)可能是一个更好的选择。它会自动搜索子目录并避免您通常不会搜索的文件（对象、SCM 目录等）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-29T09:45:10.703

将长格式的队列作业信息写入文本文件

`qstat -f > queue.txt`

Grep 作业名称

`grep 'Job_Name' queue.txt`

# jquery - jquery隐藏div功能无法正常工作

> ID：11797732
> 
> 赞同：0
> 
> 时间：2012-08-03T14:30:51.517
> 
> 标签：jquery, jquery-selectors, triggers

我有这个代码：

```
jQuery('.hoverbgpfthnailiface').click(function(e){
    var target = e.target;

    while (target.nodeType != 1) target = target.parentNode;
    if(target.tagName != 'TEXTAREA'){
        jQuery('.header-search-form').css({ 'display' : 'none' });
    }
}); 
```

奇怪的是，如果我将它放在 Chrome 控制台上，它可以工作，但是当我将它添加到我的文件时，它不起作用，并且在控制台中没有显示任何错误。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:34:48.497

您是否尝试过将代码放入准备好的函数中？

```
jQuery(document).ready(function() { 

    jQuery('.hoverbgpfthnailiface').click(function(e){
         var target = e.target;

         while (target.nodeType != 1) target = target.parentNode;
         if(target.tagName != 'TEXTAREA'){
              jQuery('.header-search-form').css({ 'display' : 'none' });
         } 
    });

}); 
```

告诉我这是否对你有用:)

**编辑** 只有一件事，如果您有兴趣，在调用绑定函数时的 jQuery 事件中，`this`与`e.target`

**EDIT2** 您在具有 hoverbgpfthnailiface 类的元素存在之前执行您的代码。您在第 2716 行创建它们，并且因为 $(document).ready 低于您在稍后执行的问题代码中使用的那个。

所以我建议你尝试将代码从第 103 行移动到 2717

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:38:16.807

您不一定必须使用 jQuery 函数，您可以使用基本的 JS：

尝试：

```
document.getElementById('your element name').style.display = 'none'; 
```

让我知道这是否有帮助。

# ruby-on-rails - rails定义方法的不同方式

> ID：11797734
> 
> 赞同：2
> 
> 时间：2012-08-03T14:30:53.807
> 
> 标签：ruby-on-rails, ruby

到目前为止，我已经学习 Rails 的时间不长了....所以如果有请随时纠正我

我看到在rails中有两种定义方法的方法

1.  `def method_name(param)`
2.  `def self.method_name(param)`

不同之处（据我所知）是 1 主要用于控制器，而 2 用于模型......但偶尔我会遇到定义为 1 的模型中的方法。

您能向我解释一下这两种方法的主要区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:34:41.590

数字 1。这定义了一个`instance method`, 可以在模型的实例中使用。
数字 2。这定义了`class method`, 并且只能由类本身使用。
例子：

```
class Lol
  def instance_method
  end
  def self.class_method
  end
end

l = Lol.new
l.instance_method #=> This will work
l.class_method #=> This will give you an error
Lol.class_method #=> This will work 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:39:01.457

方法 self.method_name 定义了类的方法。基本上在类定义中，将 self 视为指的是正在定义的类。因此，当您说 def self.method_name 时，您是在定义类本身的方法。

```
class Foo 
  def method_name(param)
     puts "Instance: #{param}"
  end

  def self.method_name(param)
     puts "Class: #{param}"
  end
end

> Foo.new.method_name("bar")
Instance: bar
> Foo.method_name("bar")
Class: bar 
```

# asp.net - Ajaxpro 方法获取要重新初始化的全局页面变量？

> ID：11797738
> 
> 赞同：0
> 
> 时间：2012-08-03T14:31:00.337
> 
> 标签：asp.net, global-variables, pagemethods, ajaxpro

我对 ajaxpro 方法有疑问。在 .cs 文件中，我为页面定义了一些全局变量，例如：

```
public partial class Admin : System.Web.UI.Page
{
    public int localidMember = 9;
    protected void Page_Load(object sender, EventArgs e)
    {

        AjaxPro.Utility.RegisterTypeForAjax(typeof(Admin));

        if (HttpContext.Current.Session["HomeOwn_ID"] != null)
        {
            localidMember = Convert.ToInt32(HttpContext.Current.Session["HomeOwn_ID"].ToString());

        }

    }

    [AjaxPro.AjaxMethod(AjaxPro.HttpSessionStateRequirement.ReadWrite)]
    public string LoadInbox()
    {
        // I need to use the variable localidMember and expected that it will have the value that I have set to pageload.., but it didnt. The variable is reinitialized to 9... Anyone have any ideas what's going on... Thanks so much ! 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:17:09.680

我认为你做不到；因为，在 AjaxPro 中，您无法处理控件属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T18:36:48.210

`AjaxMethod`会有自己的上下文。因此，`localidMember`将无法在其中访问。您可以考虑将其作为参数传递。

# vba - 比较 B 列和 C 列，然后移动数据

> ID：11797743
> 
> 赞同：1
> 
> 时间：2012-08-03T14:31:13.760
> 
> 标签：vba, excel

我需要比较 B 列和 C 列。它们仅由实数组成，按升序排序。

我已经有了我想要它做的代码，但我需要帮助更改代码中的范围。

所以目前的代码比较 B 列和 C 列。

![查看此图像以获得更清晰的解释。](../Images/68164460f8ac84867a81df103af159c5.png)

我需要帮助更改代码，以便我可以在 A 的左侧和 D 的右侧添加一列，并将它们添加到移位范围。

基本上，比较 ​​E 和 F 和 shift`B:E`和`F:I`。

```
Option Explicit
Sub AlignList()
' hiker95, 08/02/2012
' http://www.mrexcel.com/forum/showthread.php?651139-Compare-Column-B-amp-C-and-Shift
Dim r As Long, lr As Long, d As Range
Application.ScreenUpdating = False
lr = Cells.Find("*", , xlValues, xlWhole, xlByRows, xlPrevious, False).Row
Set d = Range("A1:B" & lr)
r = 1
Do While d.Cells(r, 2) <> ""
  If d.Cells(r, 2).Offset(, 1) <> "" Then
    If d.Cells(r, 2) < d.Cells(r, 2).Offset(, 1) Then
      d.Cells(r, 2).Offset(, 1).Resize(, 2).Insert -4121
    ElseIf d.Cells(r, 2) > d.Cells(r, 2).Offset(, 1) Then
      d.Cells(r, 1).Resize(, 2).Insert -4121
      lr = lr + 1
      Set d = Range("A1:B" & lr)
    End If
  End If
  r = r + 1
Loop
Application.ScreenUpdating = 1
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:37:18.180

您不需要宏来执行您想要执行的操作（除非您出于某些奇怪的原因尝试自动执行此操作。

您可以复制并粘贴 D 和 C 列，使其位于其他数据下方（见图），然后添加第 5 列，即 B 和 C 列的最大值（这将获取数字）：

![之前回答](../Images/b960b005f32044bb7296d46a6da53cd4.png)

然后你只需要对 max 列进行排序：

![之后回答](../Images/5ffb99cd727fe03ec96d8e551c8cf325.png)

编辑：

好的，这是非常基本的 excel，所以我将发布带有一些小方向的屏幕截图。基本上你想要做的（我不知道你是否意识到这一点）是组合两个表（当然它是以一种非常奇怪的方式）。因此，如果您按照我的原始说明进行操作，除了创造性地使用 vlookup 之外，您绝对可以完成您正在尝试做的事情。以下是截图：

所以创造性地使用 vlookup： ![原来的](../Images/7044834067784bce7bbc15f8ff042611.png)

您可以对需要匹配的数据进行匹配： ![Vlookup1](../Images/5514a4ab45cd19e1dcd67b196a651262.png)

这是另一个 vlookup 列： ![Vlookup2](../Images/756f1b630e4dde26fd4af453270a16df.png)

然后，一旦您的数据匹配 - 您可以通过复制和粘贴将其全部转换为值： ![复制粘贴值](../Images/91b50bdb9dffba8082b78fd2e45b9047.png)

然后你添加你的最大列： ![最大列](../Images/b30060e16b180ae4870734fa703d4eb7.png)

然后你只需排序，你应该得到你想要的： ![你想要什么](../Images/989dabf0a0ad84aa30e7495ee8c409d2.png)

然后，您可以删除不再需要的任何额外数据： ![删除任何你不想要的东西](../Images/b49e1c368a0cc6697a61b8f07e4111ea.png)

所以希望这可以帮助你。您想要使用 VBA 的唯一原因是如果您想要自动化此过程 - 但如果这是一次性的事情，那么这将过于耗时。Excel 旨在处理数据 - 匹配表格 - 诸如此类的东西 - 将其用于此目的。

# php - PHP - 用连接替换子查询？

> ID：11797751
> 
> 赞同：1
> 
> 时间：2012-08-03T14:31:44.377
> 
> 标签：php, join, subquery

好的，所以现在我在另一个查询的 while 循环内有一个查询……但是必须有一种更有效的方法来做我想做的事情。我可以通过一个查询完成以下脚本吗？那会更有效率吗？（我假设它会是）这是我现在拥有的（不是真正的代码，而是一个很好的例子）：

```
$sth = $dbh->prepare("SELECT * FROM Bugs LIMIT 5");
$sth->setFetchMode(PDO::FETCH_OBJ);
$sth->execute();
while($row = $sth->fetch()){
    $bugId = $row->id;
    echo 'Bug Name: ' . $row->name;
    echo '<br />';
    echo 'Affected Web Browsers: ';
    $sth2 = $dbh->prepare("SELECT * FROM AffectedBrowsers WHERE BugId = '$bugId'");
    $sth2->setFetchMode(PDO::FETCH_OBJ);
    $sth2->execute();
    $i = 1;
    while($row2 = $sth2->fetch()){
        if($i = 1){
            echo $row2->browser;
        }else{
            echo ', ' . $row2->browser;
        }
        $i++;
    }
} 
```

我的表格如下： 1) “Bugs” - 该表格列出的每个错误都有一行。2) “AFfectedBrowsers” - 此表包含特定错误的所有受影响浏览器。此表通过“AffectedBrowsers”表中的 bugId 列与“Bugs”表建立关系。

注意：我确实意识到增加 $i 可以在 for 循环而不是 if/else 中完成。

**更新：每个错误我只需要一行，我猜想在结果集中添加一列，其中列出了该错误的所有受影响浏览器。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:34:45.373

```
SELECT * FROM Bugs
INNER JOIN AffectedBrowsers ON Bugs.Id = AffectedBrowsers.BugId
LIMIT 5 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:37:29.040

```
SELECT * FROM Bugs 
LEFT JOIN AffectedBrowsers 
ON Bugs.BugId = AffectedBrowsers.BugId 
LIMIT 5 
```

如果您想列出错误，即使没有受影响的浏览器。顺便说一句，您应该养成列出不想从中检索数据的列的习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:10:28.483

```
SELECT *
FROM Bugs
INNER JOIN 
(SELECT BugId, GROUP_CONCAT(Browser) Browsers FROM AffectedBrowsers GROUP BY BugId) Aff
ON Bugs.Id = Aff.BugId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:41:24.653

其他答案都很好。但是，如果您需要限制错误数量并且不关心受影响浏览器的数量，请使用以下命令：

```
 SELECT *
  FROM AffectedBrowsers
  WHERE BugID IN ( SELECT id FROM Bugs LIMIT 5 ) 
```

请注意，这是一个真正的子查询。但是，与您的代码不同，它包含在一个语句中，并且应该仍然更快。

# firefox-addon - 无法通过 HKEY_CURRENT_USER 安装 firefox 扩展

> ID：11797758
> 
> 赞同：0
> 
> 时间：2012-08-03T14:32:21.023
> 
> 标签：firefox-addon, registry

根据[此处](https://developer.mozilla.org/en/Adding_Extensions_using_the_Windows_Registry)提供的文档，它说我应该能够通过 HKEY_CURRENT_USER\Software\Wow6432Node\Mozilla\Firefox\Extensions 安装扩展，但是每当我在那里添加它时，Firefox 都找不到它。但是，问题是如果我在 HKEY_LOCAL_MACHINE 位置下添加相同的键，Firefox 会发现扩展名很好！

我有点困惑为什么以及如何会发生这种情况。

编辑：在 Windows 7 64 位版本上安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:22:19.670

不，正确的注册表项是`HKEY_CURRENT_USER\Software\Mozilla\Firefox\Extensions`- 在 x86 和 x64 Windows 上。原因是`Software`密钥[仅针对 HKLM 重定向](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384253%28v=vs.85%29.aspx)。`HKEY_CURRENT_USER\Software`但是在 32 位和 64 位应用程序之间共享。

如果将扩展添加到此键没有效果，您可能需要检查[`extensions.enabledScopes`首选项](https://developer.mozilla.org/en-US/docs/Installing_extensions#Disabling_install_locations)的值（您可以在 下查看和更改它`about:config`）。例如，如果它的值为 5，那么它只允许用户配置文件中的扩展（值 1）和 Firefox 提供的扩展（值 4）。您必须确保该组合还包括值 2。

# python - 山狮更新和善变库python

> ID：11797761
> 
> 赞同：38
> 
> 时间：2012-08-03T14:32:22.037
> 
> 标签：python, macos, osx-mountain-lion

我将 mac 更新为 Mountain Lion (10.8)，现在我用 Python 和 Google App Engine 开发的项目不起作用。

找到了 GAE 库，而遗漏了标准 Python 库（这些 Python 库吗？）（例如`cgi`、`logging`、`json`）。

当我打开 eclipse（它有 PyDeV）我收到这个警报：

```
abort: couldn't find mercurial libraries in 
[/Library/Python/2.7/site-packages/  /usr/local/bin
/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg 
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC
/Library/Python/2.7/site-packages] (check your install and
PYTHONPATH). Command line: hg -y debuginstall 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-08T11:30:40.193

在 OS X - 10.8.2 通过 Python easy_install 工具安装 mercurial 解决了这个问题

```
easy_install -U mercurial 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-06T07:37:15.747

我刚刚遇到了同样的问题，从[Mercurial 网站上选择了一个新版本（](https://www.mercurial-scm.org/) *mercurial-2.2.3+20120707-py2.7-macosx10.7*），现在它又可以工作了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-23T14:44:54.687

**升级到OX 10.9 Mavericks**后，我昨晚遇到了类似的问题。我曾尝试过 `brew install hg`，`brew update`但它们没有用，因为如果您运行自制软件，每个人的系统都不同，我建议您运行 `brew doctor` 以查看您的特定问题，就我而言，我有以下情况；

> 警告：您的酒窖中有未连接的小桶
> 
> 不连接小桶可能会导致构建问题，并导致依赖这些小桶的啤酒在构建后无法正常运行。在这些上运行`brew link`：mercurial

所以为了解决我的反复无常的问题，我跑了；

`brew link --overwrite mercurial`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T15:42:04.920

我有同样的问题。

重新安装 Mercurial 修复了它。从这里获取：http: [//mercurial.berkwood.com/](http://mercurial.berkwood.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-11T17:26:11.290

另一个简单的选择是使用 Homebrew ( [http://mxcl.github.io/homebrew/](http://mxcl.github.io/homebrew/) )：

```
brew install hg 
```

...为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T21:53:44.503

仅供参考 - 我看到了类似的错误，不得不重新安装 setuptools。（[http://pypi.python.org/pypi/setuptools/0.6c11](http://pypi.python.org/pypi/setuptools/0.6c11)如果您还不熟悉它。）

事情现在似乎奏效了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-30T06:44:08.357

作为 macports 用户，我通过运行“解决”了这个问题

```
sudo port install mercurial 
```

# jquery - 用 slideDown 显示一个 div

> ID：11797763
> 
> 赞同：4
> 
> 时间：2012-08-03T14:32:29.993
> 
> 标签：jquery, delay, hidden, slidedown, slideup

我有一个 div 我想用复选框显示和隐藏：

```
 <li>             
        <label for="">Fixed-term package:</label>               
        <ul>                  
          <li><input id="" type="checkbox" name="package-fixed-term" /></li>               
        </ul>                       
      </li>
      <div id="package-fixed-term-options" class="hidden"> 
```

我的班级“隐藏”：

```
.hidden {display: none !important;} 
```

当我检查我的输入控件时，它不会向下滑动。我可以通过在行中添加 .removeClass('hidden') 来使其工作，但这不应该是必需的（例如，slideUp 不需要添加回我的隐藏类）添加删除类也可以消除延迟和 slideDown动画片。slideUp 效果很好。这是功能：

```
$('input[name="package-fixed-term"]').change(function(){
if ($('input[name="package-fixed-term"]:checked').val() !== undefined) {     
  $('div#package-fixed-term-options').delay(300).slideDown(500);
  return false;
  } else {
  $('div#package-fixed-term-options').delay(300).slideUp(500);
  return false;
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:36:56.367

这`!important`是导致此问题的原因。

看到这个小提琴：http: [//jsfiddle.net/4JYeq/2/](http://jsfiddle.net/4JYeq/2/)

从 css 中删除它，它将起作用：

```
.hidden {display: none;}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:37:39.943

完成此操作的最简单方法是使用“切换”

```
<input type="checkbox" onchange="$('#myDiv').toggle();" />
<div id="myDiv" style="display: block">
Here goes the DIV
</div> 
```

问候，卢波

# android - 基本 MyFirstApp 中的 IllegalStateException

> ID：11797766
> 
> 赞同：1
> 
> 时间：2012-08-03T14:32:37.200
> 
> 标签：android, illegalstateexception

我已经创建并运行了基本的 android MyFirstApp

[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

在 Eclipse 中使用 AVD，我收到以下错误：

`"java.lang.IllegalStateException:``activity`在类中找不到`com.example.myfirstapp.MainActivity`onClick 处理程序的方法`view`sendMesaage (View)`android.widget.Button"`

方法存在且onClick元素存在：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/edit_message"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:hint="@string/edit_message" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMesaage"/> 
```

方法调用：

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMesaageActivity.class);
    EditText edit_message= (EditText) findViewById(R.id.edit_message);
    String message = edit_message.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:37:22.790

```
<Button 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/button_send"
android:onClick="sendMessage"/> 
```

方法调用：

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
Intent intent = new Intent(this, DisplayMesaageActivity.class);
EditText edit_message= (EditText) findViewById(R.id.edit_message);
String message = edit_message.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:36:53.930

检查额外的空格。我遇到了类似的问题。我没有在布局 xml 文件中将函数名称称为“myOnClick”，而是将其输入错误为“myOnClick”。

# dojo - dojox.mobile.ListItem 使用 dojo 的拖放实现

> ID：11797768
> 
> 赞同：1
> 
> 时间：2012-08-03T14:32:41.110
> 
> 标签：dojo, drag-and-drop, dojox.mobile

我在从 Web 服务获得的 dojox.mobile.RoundRectList 中有 dojox.mobile.ListItem。我需要为列表实现拖放功能并处理该事件。

dojo 中的普通拖放与 dojo.dnd.Source 一起工作正常。但在 mobile.ListItem 我没有找到任何链接。我不确定它是否可能。

如果有人提供示例代码或有用的链接，那就太好了。

谢谢，西瓦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T14:30:08.277

在您的 dojox/mobile/RoundRectList 上启用可编辑属性，并在删除项目时订阅“/dojox/mobile/deleteListItem”。

![在此处输入图像描述](../Images/3115e6e72ef392dac7da80ceedb164b6.png)

解释[在这里，](http://dojotoolkit.org/reference-guide/1.9/dojox/mobile/RoundRectList.html#dojox-mobile-roundrectlist)[在](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/mobile/tests/)EdgeToEdgeList 下有示例

# jquery - 这段使用 jQuery 向元素添加类的代码有什么问题？

> ID：11797769
> 
> 赞同：0
> 
> 时间：2012-08-03T14:32:52.097
> 
> 标签：jquery, html, css, addclass

页面加载后，我想向 ID 为的元素添加一个类`contact_page`：

```
<a id="contact_page">Contact</a> 
```

这是我正在使用的 JavaScript 代码：

```
$(document).ready(function () {
    $("contact_page").addClass('selected');
}); 
```

它应该添加类，但是[当我运行它时，什么也没有发生](http://jsfiddle.net/S4aAx/3/)。

**我做错了什么，我该如何解决？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:34:48.370

您需要使用 # 在 jquery 中选择一个 id

```
$("#contact_page").addClass('selected'); 
```

请参阅此处的示例[http://jsfiddle.net/S4aAx/7/](http://jsfiddle.net/S4aAx/7/)您也不需要在 jsfiddle 中添加准备好的文档或脚本，它会为您完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:36:49.133

我已经修复了你的[jsFiddle](http://jsfiddle.net/S4aAx/6/)。本质上，您需要以下内容：

```
$('#contact_page').addClass('selected'); 
```

jsFiddle 已经为 DOM 准备好了功能，因此您可以出于小提琴的目的消除它。接下来，您需要包含`#`以表示选择器是一个 id。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:38:45.713

jsFiddle 更新[http://jsfiddle.net/S4aAx/9/](http://jsfiddle.net/S4aAx/9/)

`#`失踪和

```
<script> 
</script> 
```

jsfiddle 中不需要

# html - 单击一个按钮隐藏一个 div 并显示另一个 div

> ID：11797771
> 
> 赞同：1
> 
> 时间：2012-08-03T14:33:09.150
> 
> 标签：html, click, hide, show

这对你们来说应该很容易，但我是这方面的真正初学者，需要简单地向我解释一下。我认为它也会帮助很多像我这样刚开始使用 jquery 的人......

我正在构建一个网站，该网站需要在其一个页面上有一个按钮，单击该按钮不仅会隐藏内容的 div（那里有很多解决方案），而且同时显示以前隐藏的内容 div .

我需要知道将执行此操作的 jquery 以及我需要环绕按钮以触发 jquery 的内容。

你能帮我吗？

谢谢，斯图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:45:07.947

在 ajax 调用成功时，您必须确定必须隐藏哪个 div 以及必须显示哪个 div。

```
$.ajax({          

       url: "Sevlet",
       type: 'POST',    
       dataType: "json",
       data:{"id":id},
       contentType:"application/x-www-form-urlencoded",       
       success: function (data) {

                  $("#div1").hide();
                  $("#div2").show();
             }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:53:29.217

如果只关心两个 div 元素，`jQuery.toggle()`支持两个事件处理函数：

```
$('button').toggle(function(){
       $('div1').hide();
       $('div2').show();
},function(){
       $('div1').show();
       $('div2').hide();
}); 
```

这应该可以确保一个 div 具有 css 属性`display:none`，而另一个 div 没有（可见）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T10:53:53.077

首先，jQuery 只是一个用来做事的函数库。

所以像 hide() 和 show() 这样的 inbulit 函数可以用来做你想做的事情。我相信下面链接中关于 jQuery 的 hide/show/hide_show 文档很容易理解，你应该几乎没有问题。
[http://api.jquery.com/hide/](http://api.jquery.com/hide/)
[http://api.jquery.com/show/](http://api.jquery.com/show/)
[http://www.w3schools.com/jquery/jquery_hide_show.asp](http://www.w3schools.com/jquery/jquery_hide_show.asp)

但是，解决问题的另一种方法是使用jQuery 方法来切换 CSS 属性，这将导致 div 元素根据 css 属性显示或隐藏。我将为 height 属性演示它，但也可以使用其他几个属性，包括 max-height、left、right、top、bottom 等。

更改 CSS 中的属性，我可以看到 Div 是如何可见或隐藏的

例子：

```
<html>
   <head>
      <style>
          .Div_I_Want_To_Show{
               background: #ffe400;
               width:100%;
               height:0px;
               overflow:auto;
          }
      </style>
   </head>
   <body>
      <div class="Div_I_Want_To_Show">
          <p>Some Random Text Here</p>
      </div>
      <button class="btn">Click to See Content</button>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
      <script>
           $(".btn").click(function(){
               $('.Div_I_Want_To_Show').css('height','20em')
           });
      </script>
   </body>
</html> 
```

小提琴链接：[https ://jsfiddle.net/L7pmarzh/](https://jsfiddle.net/L7pmarzh/)

如果你想知道，你也可以为它制作动画，我想你会想要任何网站，因为简单的隐藏和显示效果对任何用户都没有吸引力。

希望这能解决你的问题:)

# ruby-on-rails - bcrypt-ruby 无法构建 gem 原生扩展

> ID：11797772
> 
> 赞同：2
> 
> 时间：2012-08-03T14:33:13.520
> 
> 标签：ruby-on-rails, ruby, bcrypt

我是 RoR 的新手，在关注 RailsTutorial.org 时安装 bcrypt-ruby (v 3.0.1) gem（来自 gemfile）时遇到了麻烦。在查看网站上的其他回复时，我不清楚这是版本不兼容问题、缺少 ruby​​-dev 环境、与 Xcode 有关、“ruby extconf.rb”中的额外空间或其他问题. 任何建议将不胜感激。谢谢。

我的环境 = OS X v 10.8、Ruby 1.9.3p194 和 Rails 3.2.6。

```
tj$ bundle install  
Fetching gem metadata from https://rubygems.org/........  
Using rake (0.9.2.2)   
Using i18n (0.6.0)  
Using multi_json (1.3.6)  
Using activesupport (3.2.6)  
Using builder (3.0.0)   
Using activemodel (3.2.6)   
Using erubis (2.7.0)  
Using journey (1.0.4)   
Using rack (1.4.1)   
Using rack-cache (1.2)   
Using rack-test (0.6.1)   
Using hike (1.2.1)   
Using tilt (1.3.3)   
Using sprockets (2.1.3)   
Using actionpack (3.2.6)   
Using mime-types (1.19)   
Using polyglot (0.3.3)   
Using treetop (1.4.10)   
Using mail (2.4.4)  
Using actionmailer (3.2.6)   
Using arel (3.0.2)   
Using tzinfo (0.3.33)   
Using activerecord (3.2.6)   
Using activeresource (3.2.6)   
Using addressable (2.3.1)  
Using annotate (2.5.0) 

Installing bcrypt-ruby (3.0.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/tj/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
creating Makefile

make
sh: make: command not found

Gem files will remain installed in /Users/tj/.rvm/gems/ruby-1.9.3-    p194@rails3tutorial2ndEd/gems/bcrypt-ruby-3.0.1 for inspection.  
Results logged to /Users/tj/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/bcrypt-    ruby-3.0.1/ext/mri/gem_make.out  
An error occured while installing bcrypt-ruby (3.0.1), and Bundler cannot continue.
Make sure that `gem install bcrypt-ruby -v '3.0.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:43:00.320

在我看来，`make`您的系统上没有。如果您使用的是 Mac，则需要安装 Xcode 命令行工具。

# google-apps-script - ScriptProperties 的 Google Apps 脚本替代品

> ID：11797773
> 
> 赞同：0
> 
> 时间：2012-08-03T14:33:15.710
> 
> 标签：google-apps-script

有人可以建议替代 ScriptProperties 作为存储和检索短期（文本）数据的方法。

我有一个在 GAS 中内置的长期应用程序。因为它启动了许多“线程”，所以我存储了有关每个线程的一些信息，最终确定所有线程何时完成，从而确定应用程序何时可以释放各种“锁”。

我正在使用 ScriptProperties 来存储这些信息。它曾经完美地工作，但在过去 6 个月左右的时间里一直受到麻烦的困扰。问题主要是： 1\. 随着越来越多的数据在脚本属性中收集，应用程序加载时间大幅增加（无法清理脚本属性数据） 2\. ScriptProperties（现在）在并发访问下不可靠 3\. ScriptProperties 无法读取或快速写入

有人建议使用 ScriptDb。任何人都可以确认这个（或任何其他）可行的解决方案吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:10:45.977

你能看看 CacheService 吗？我已经使用了很多成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:12:32.923

CacheService 只是尽力而为，并非用于保证存储（但它很快！）。如果您需要确定它会在那里，请使用 ScriptDb。

# javascript - 如何更改 JSF 表中的链接颜色

> ID：11797777
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:33:20.623
> 
> 标签：javascript, css, jsf, jsf-2

我有一个 JSF 表：

![在此处输入图像描述](../Images/8d004018353052f8c63d5d9ad22eb0ef.png)

如您所见，列的名称是基本的 html 链接。有没有办法去掉名字的下划线？还要改变名字的颜色？感谢您的帮助。

```
<div id="settingsHashMap" style="width:1050px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                <h:form id="form" >
                    <p:growl id="growl" showDetail="true" sticky="true" />
                    <!-- The sortable data table -->
                    <h:dataTable onmouseover="addOnclickToDatatableRows();" id="dataTable" value="#{AccountsController.dataList}" binding="#{table}" var="item">
                        <!-- Check box -->
                        <h:column>
                            <f:facet name="header">
                                <h:selectBooleanCheckbox value="#{AccountsController.mainSelectAll}" class="checkall" >
                                    <f:ajax listener="#{AccountsController.selectAll}" render="@form" />
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  onclick="highlight(this)" value="#{AccountsController.selectedIds[item.userid]}" >
                                <!-- if the user deselects one row deselect the main checkbox -->
                                <f:ajax listener="#{AccountsController.deselectMain}" render="@form" />
                            </h:selectBooleanCheckbox>
                            <!-- Click on table code -->  
                            <h:outputLink id="lnkHidden" value="AccountProfile.jsf" style="text-decoration:none; color:white;">
                                <f:param name="id" value="#{item.userid}" />
                            </h:outputLink>
                        </h:column>
                        <!-- Row number -->
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="№" style="text-decoration:none;color:white;" />                                    
                            </f:facet>
                            <h:outputText value="#{table.rowIndex + AccountsController.firstRow + 1}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="User ID" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="USERID" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.userid}" />
                        </h:column>
                        <!--
                        email
                        description -->
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Group ID" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="GROUPID" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.groupid}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Special Number" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="SPECIALNUMBER" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.specialnumber}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Username" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="USERNAME" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.username}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Address" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="ADDRESS" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.address}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="State/Region" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="STATEREGION" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.stateregion}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Country" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="COUNTRY" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.country}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="User Status" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="USERSTATUS" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.userstatus}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Telephone" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="TELEPHONE" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.telephone}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:commandLink value="Date User Added" actionListener="#{AccountsController.sort}" style="text-decoration:none;color:white;">
                                    <f:attribute name="sortField" value="DATEUSERADDED" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                            </f:facet>
                            <h:outputText value="#{item.dateuseradded}" />
                        </h:column>

                    </h:dataTable>

                    <!-- The paging buttons -->
                    <h:commandButton value="first" action="#{AccountsController.pageFirst}"
                                     disabled="#{AccountsController.firstRow == 0}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:commandButton value="prev" action="#{AccountsController.pagePrevious}"
                                     disabled="#{AccountsController.firstRow == 0}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:commandButton value="next" action="#{AccountsController.pageNext}"
                                     disabled="#{AccountsController.firstRow + AccountsController.rowsPerPage >= AccountsController.totalRows}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;    

                    <h:commandButton value="last" action="#{AccountsController.pageLast}"
                                     disabled="#{AccountsController.firstRow + AccountsController.rowsPerPage >= AccountsController.totalRows}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:outputText value="Page #{AccountsController.currentPage} / #{AccountsController.totalPages}" />
                    <br />

                    <!-- The paging links -->
                    <ui:repeat value="#{AccountsController.pages}" var="page">
                        <h:commandLink value="#{page}" actionListener="#{AccountsController.page}"
                                       rendered="#{page != AccountsController.currentPage}" style="text-decoration:none;color:white;">
                            <f:ajax render="@form" execute="@form"></f:ajax>   
                        </h:commandLink>
                        <h:outputText value="#{page}" escape="false"
                                      rendered="#{page == AccountsController.currentPage}" style="text-decoration:none;color:white;"/>
                    </ui:repeat>
                    <br />

                    <!-- Set rows per page -->
                    <h:outputLabel for="rowsPerPage" value="Rows per page" />
                    <h:inputText id="rowsPerPage" value="#{AccountsController.rowsPerPage}" size="3" maxlength="3" />
                    <h:commandButton value="Set" action="#{AccountsController.pageFirst}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;
                    <h:message for="rowsPerPage" errorStyle="color: red;" />

                    <!-- hidden button -->
                    <h:commandButton id="deleterow" value="HiddenDelete" action="#{AccountsController.deleteSelectedIDs}" style="display:none">
                        <f:ajax render="@form"></f:ajax>
                    </h:commandButton>

                    <!-- the delete button -->
                    <h:button value="Delete" onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" />

                    <script type="text/javascript" src="resources/js/tabs.js"></script> 
                </h:form>                    
            </div>   

            <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

            </div>  
        </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:02:01.960

像这样添加 CSS 样式：

```
<h:commandLink value="This is a link" style="text-decoration:none;color:red;" /> 
```

# c# - 如何按两种不同类型的字段对 linq 查询结果进行排序

> ID：11797779
> 
> 赞同：2
> 
> 时间：2012-08-03T14:33:28.773
> 
> 标签：c#, winforms, linq-to-sql, sql-order-by, bindingsource

> **可能重复：**
> [LINQ 中的多个“排序依据”](https://stackoverflow.com/questions/298725/multiple-order-by-in-linq)

我想知道如何按两种不同的类型订购如下查询：

```
 var qry = (from m in dc.Orders
                   select new { m.OrderDate, m.OrderID }).OrderBy(o=>o.OrderDate+o.OrderID).ToList();
        bindingSource1.DataSource = qry; 
```

OrdrerDate 是一个日期类型，而 OrderID 是一个 int 类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:35:04.010

您正在寻找`.ThenBy()`：

```
.OrderBy(o => o.OrderDate).ThenBy(o => o.OrderID). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:36:21.737

我会说：

```
 var qry = (from m in dc.Orders
                   select new { m.OrderDate, m.OrderID }).OrderBy(o=>o.OrderDate).ThenBy(o.OrderID).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:37:39.880

尝试这个

```
var qry = (from m in dc.Orders 
               select new { m.OrderDate, m.OrderID }).OrderBy(o=>o.OrderDate).ThenBy(o.OrderID).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T14:39:07.880

你可以使用 ThenBy 或者你可以编写这个 Linq 查询：

```
var qry = (from m in dc.Orders
            orderby m.OrderDate, m.OrderID
    select new {m.OrderDate, m.OrderID}).ToList

        bindingSource1.DataSource = qry; 
```

# php - SQL，按文章语言排序，英语优先于法语

> ID：11797780
> 
> 赞同：3
> 
> 时间：2012-08-03T14:33:29.977
> 
> 标签：php, mysql, sql

我在一个多语言网站上工作，我有文章可能会或可能不会是网站所在的所有语言。用户也可以注册并选择首选语言。

我的问题如下，当显示一篇文章时，我希望它以这种方式显示：如果用户已登录，则显示他选择的语言，如果一篇文章不是他的语言，请尝试以英语显示否则，如果它不存在法语，那么德语等。

这是我的文章表：

```
news_id |  lang  |   title  |  text  |
      1 |    en  |  News en |  bla.. |
      1 |    fr  |  News fr |  bla.. |
      2 |    en  |   New en |  bla.. |
      3 |    fr  |   Nws fr |  bla.. | 
```

我不知道如何在 mysql 中执行此操作。

我希望你能理解我的问题，我真的不知道如何更清楚地解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:38:14.447

您需要加入用户偏好表，以获得所需的语言。然后按顺序使用该信息：

```
select a.*
from articles a cross join
     (select up.*
      from UserPreferences up
      where up.userid = <whatever you want>
     ) up
order by (case when a.lang = up.prefland then 0
               when a.lang = 'en' then 1
               when a.lang = 'fr' then 2
               else 3 end) asc 
```

这个特定的顺序首先是首选语言，然后是英语，然后是法语。要获得首选的第一个，请删除后两个“when”子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:07:59.367

尽管 Gordon 的回答在技术上是正确的，但我会向您推荐一种稍微不同的方法：您可以添加另一个表（我们称之为它`language`），它定义了所用语言集的[偏序](http://en.wikipedia.org/wiki/Partially_ordered_set)。

```
 language
--------------------------
|  id  |  name  |  rank  |
--------------------------
    1      en       1
    2      fr       2
    3      de       3
    4      nl       4 
```

该表的数据集现在确定您网站语言的部分顺序。要在您的查询中使用它，您可以执行以下操作：

```
 SELECT a.*
    FROM article a
       , language b
   WHERE a.id = [xxx]
     AND a.lang = b.name
ORDER BY (a.lang = [session.lang]) DESC,
         b.rank ASC
   LIMIT 1 
```

**你问有什么意义？**
好吧，以这种方式设置，一旦您需要将一组语言的部分顺序更改为不同的东西，您就不必更新查询以反映该更改。诚然，只需几个查询，这不会太麻烦，但是一旦你建立了几十个语言感知查询，它就会咬你的脚。

# c# - ListViewItems 并防止使用键盘上下选择

> ID：11797786
> 
> 赞同：1
> 
> 时间：2012-08-03T14:34:03.737
> 
> 标签：c#, xaml, windows-runtime

我有一个包含一些行的列表视图。

这些行包含一个文本框。

我希望列表视图在用户按下`  ↑  `或`  ↓  `在键盘上聚焦在文本框中时不更改项目。

推理：其中一个文本框有一个显示一些自动完成结果的弹出窗口，用户通常只需按下`  ↓  `键盘即可浏览建议。这目前不起作用，因为按下`  ↓  `是将用户选择移动到列表视图中的下面一行。

由于 winrt 列表视图没有 PreviewKeyDown 事件，这变得更加困难。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:39:32.913

我认为解决方案是在 keydown 事件中检查弹出窗口是否打开，如果是，则改为更改弹出窗口选择。

# typo3 - 如何在 Powermail 确认/提交页面上呈现链接？

> ID：11797787
> 
> 赞同：0
> 
> 时间：2012-08-03T14:34:06.350
> 
> 标签：typo3

我正在尝试在我的 powermail 设置的提交页面上放置一个链接。

![在此处输入图像描述](../Images/cba1f2fb97c6f50860836b4ed8f2ac3d.png)

你会认为这是一项简单的任务，但请耐心等待。

我的 Powermail 表单有 2 个隐藏字段，其中预先填写了页面 ID 和页面标题。

![在此处输入图像描述](../Images/6be6857b3142fef0871aa89ca9eec91b.png)

这些属于我发送邮件后想要返回的页面。通过将这些值放入表单中，我希望在过程中需要它们时可以访问它们。

我从 TypoScript 中预填充这些隐藏字段，如下所示：

```
plugin.tx_powermail {
  settings {
    setup {
      prefill {
        // Hidden "back to" page ID. This is the page you may want to return to after sending a mail.
        backto = TEXT
        backto.data             = GP:backTo
        backto.if.isTrue.data   = GP:backTo

        backtotext = TEXT
        backtotext.noTrimWrap       = |Back to ||
        backtotext.data             = GP:title
        backtotext.if.isTrue.data   = GP:title
        backtotext.htmlSpecialChars = 1
      }
    }
  }
} 
```

## 1.方法

鉴于 Powermail 声称您现在可以在您的内容部分中使用 Fluid ViewHelper，不过，很好，让我们使用 PageViewHelper，如下所示：

```
{f:link.page(pageUid:'{backto}')} 
```

但是我的链接文本去哪里了？更多内联符号来救援！

```
{backtotext -> f:link.page(pageUid:'{backto}')} 
```

### 渲染结果

![在此处输入图像描述](../Images/baf10385d88fe104d2a82efdbac1f98c.png)

似乎不完全支持内联表示法。我认为我很聪明，只需使用：

```
{f:link.page(pageUid:'{backto}')}{backtotext} 
```

但这会使`<a>`标签保持打开状态，这会产生非常不良的影响...

所以 - 我没有链接！

## 2.方法

所以我想我会简单地在 TypoScript 中构建链接并将其呈现在页面上

```
{f:cObject(typoscriptObjectPath:'lib.myBackLink')} 
```

但是我看不到任何从 TS 中的（已发送）Powermail 表单访问变量的方法。所以我无权访问页面 ID 或标题。

## 3.方法

所以我想，如果默认的 PageViewHelper 只想将其子项呈现为其内容，也许我可以滚动自己的 ViewHelper 接受内容作为参数！

但是如何让系统知道 ViewHelper 以便我可以在自定义的 Powermail 模板中使用它？

我以前只在我的扩展中使用过 Fluid。很明显，Fluid 如何按名称查找正确的 ViewHelper，如果我想在我的文件管理文件夹层次结构中使用 ViewHelper，该怎么办？

## 4\. 方法

那么，为什么不通过在 RTE 中使用来使用*普通*链接呢？`<a href="http://www.page.com/?id={backto}">{backtotext}</a>`

TYPO3 意识到这是一个非法引用，并迅速将链接转换为：
![在此处输入图像描述](../Images/61e9c09042a678b3ed18512ccef62b7c.png)
结果输出将根本不是链接。

所以，这也行不通。

好的，所以我将目标更改为`<a href="http://www.page.com?id={backto}">{backtotext}</a>`（删除斜线）。现在该 URL 不再被识别为内部 URL，并标有`data-htmlarea-external="1"`。这导致我的链接实际上被完全评估和呈现（耶）。

但它现在被视为外部链接，RealURL 不再影响它，它受外部链接`_target`行为的影响。

为什么这么难？我不明白什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:06:57.737

As it turned out, none of the previously attempted solution actually worked.

To get things over with, I just replaced the `web` section in the `PowermailAll` template, like so:

```
Section for Web view

<f:section name="web">
</a>
</f:section> 
```

And then I used the following in my Submit Page content:

```
{f:link.page(pageUid:'{backto}')}{backtotext}{powermail_all} 
```

Problem solved. I guess...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:42:46.993

在 RTE 中，您必须使用`<link ###pageid###>`而不是`<a href="...">`.

查看 RTE DB 字段内容（或点击 no RTE 复选框）了解如何使用链接元素。

# java - java摆动以在同一帧中显示不同的面板（java）

> ID：11797793
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:34:31.497
> 
> 标签：java

下面给出的是一个 java 类，它在第一帧中单击“下一步”按钮时被调用。我发送一个参数是我将 getContentPane() 发送到下面给出的程序，这里将访问参数并将其可见性设置为 false，这里我使用“后退”按钮转到第一帧的上一页数据，但是单击后退它没有为我显示上一帧，请帮助我解决问题

它只是一个简单的程序，如果我需要从第二帧中获取一些文本输入，并且我需要再次返回主屏幕，那么我该如何在这个程序中实现这一点

```
 public class firstframe extends JFrame{

 public firstframe()
 {
    getContentPane().setLayout(null);

    JButton next=new JButton("Next");
    next.setBounds(100,100,100,100);
    getContentPane().add(next);

    next.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ev){

            Container c=getContentPane();

        }
         new signup(c);
    }); 
  }
   public static void main(String ar[]){
   firstframe f=new firstframe();
     f.setVisible(true);
    f.setSize(1365,740);
f.show(); 
```

} }

```
public class signup extends JFrame{

    public signup(Container d)
    {
        final Container c=d;
        c.setVisible(false);
        final Container e;
        e=c.getParent();
        e.setLayout(null);
        JButton back=new JButton("Back");
        back.setBounds(100,100,100,100);
        e.add(back);
        e.setVisible(true);

        back.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ev){
                e.setVisible(false);
                d.setVisible(true);
            }

        }); 
    }
}// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:29:00.887

抱歉，您的代码风格不好。太多不必要的赋值使我无法理解代码含义和太短的变量名称。

看看你在做什么。在`signup()`您分配的方法中，`e=c.getParent();`它意味着`e`是`c`and的父组件`d`。然后在`back`行动侦听器中，您使不可见`e`并尝试使其`d`可见。但是 , 的父级也是如此`e`，当它的父级不可见时`d`，`d`它永远不会变得可见。

此代码的快速修复是将`back`按钮操作侦听器更改为

```
back.setVisible(false);
d.setVisible(true); 
```

当然做`back`final

```
final JButton back=new JButton("Back"); 
```

# javascript - 使用 Javascript 重定向并设置请求属性

> ID：11797800
> 
> 赞同：1
> 
> 时间：2012-08-03T14:34:48.440
> 
> 标签：javascript, redirect, request

我正在尝试在 Javascript 中执行重定向到不同页面，并为该重定向设置请求属性。

我不想要这样的请求参数：

```
window.location.href="www.somesite.com/id=123" 
```

因为我不希望用户看到地址栏中传递的值。

我看到的一种方法是在页面中有一个带有隐藏字段的表单，并设置该字段并从 Javascript 提交表单。

有没有更简单的方法？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:40:54.667

使用表单并通过 window.onload 发布。

```
<form method="post" id="myForm" action="/someurl">
<input type="hidden" name="param" value="X" />
</form>

<script>
window.onload=function(){ document.getElementById('myForm').submit(); } 
```

你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:42:10.930

**您不能使用 javascript 发布数据。**..你可以用它`ajax`来做到这一点。或者你可以在你的中使用这样的东西`javascript`来实现你想要的：

```
var post_url = 'http://www.somesite.com/id=123';
var form = $('<form action="' + url + '" method="get">' +
'<input type="hidden" name="id" value="123" />' +
'</form>');
$(form).submit(); 
```

希望这可以帮助。

# java - 如何在 Java 中访问对象的 LinkedList 的数据成员的值

> ID：11797802
> 
> 赞同：0
> 
> 时间：2012-08-03T14:34:58.750
> 
> 标签：java, data-structures, linked-list

如果我有如下课程

```
class Log {

    int rev;
    String auth;
    String date;
    List<PathInfo> pathinfolist;

    public LogProcess(int rev, String auth, String date,
            List<PathInfo> pathinfolist) {
        super();
        this.rev = rev;
        this.auth = auth;
        this.date = date;
        this.pathinfolist = pathinfolist;
    }

    public int getRev() {
        return rev;
    }

    public void setRev(int rev) {
        this.rev = rev;
    }

    public String getAuth() {
        return auth;
    }

    public void setAuth(String auth) {
        this.auth = auth;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public List<PathInfo> getPathinfolist() {
        return pathinfolist;
    }

    public void setPathinfolist(List<PathInfo> pathinfolist) {
        this.pathinfolist = pathinfolist;
    }
} 
```

我有一个`LinkedList<Log>`叫`logobject`. 我已经添加了近 1000 个 Log 对象到使用`logobject.add()`.

现在我如何访问/迭代链表中数据成员的这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:37:24.440

```
for (Log log : logobject)
 {
    // do something with log
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:38:13.193

您可以使用增强的 for 循环来迭代这些。

```
for(Log l : logObject) {
     // Process each object inside of logObject here.
} 
```

我还鼓励您输入您的`LinkedList`as `List<Log> = new LinkedList<Log>()`，这样您就不会遇到从`LinkedList`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:38:32.960

使用[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)接口的可用API，例如

```
for( Log log : logobject ){

} 
```

另请参阅[集合教程](http://docs.oracle.com/javase/tutorial/collections/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:38:01.660

最简单的方法可能是这样的：

```
for(Log log : logobject){
    //Do what you want with log...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T15:13:01.510

使用从**java 1.5**`for each`引入的循环

 **```
for (Log l : logobject)
 {
    // Here you can do the desired process.
 } 
```**

# linux - 如何在 Bash 的循环中增加日期

> ID：11797805
> 
> 赞同：1
> 
> 时间：2012-08-03T14:35:03.370
> 
> 标签：linux, bash

我正在研究这个基本上适用于 2 个日期的功能。一个是当前日期，另一个是 1 个月前的日期。继承人的代码：

```
 dateTale=$(date -d "$(date) - 1 month" +%Y%m%d)
 now=$(date +%Y%m%d)
 while ["$dateTale" -lt "$now"]
  do 
   $dateTale=$(date -d "$dateTale + 1 day" +%Y%m%d) 
  echo "adding" 
 done 
```

如您所见，我正在尝试增加 dateTale 直到它到达当前日期，但我不断收到错误消息：[20120703：找不到命令我尝试从 while 语句中删除引号，但仍然是相同的错误消息。但即使解决了， -lt 会计算实际日期值还是数字值？

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:37:13.303

使用`[`命令时空格很重要：

```
while [ "$dateTale" -lt "$now" ] 
```

此外，分配给变量时不要使用“$”（与 perl 或 php 不同）：

```
dateTale=$(date -d "$dateTale + 1 day" +%Y%m%d) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:36:58.683

应该`$dateTale`不是`$(dateTale)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T15:08:25.700

```
#!/bin/sh

dateTale=$(date -d "$(date) - 1 month" +%Y%m%d)
now=$(date +%Y%m%d)

 while [ $dateTale -lt $now ]
  do
   dateTale=$(date -d "$dateTale + 1 day" +%Y%m%d)
  echo $dateTale
 done 
```

# jquery - 获取 XML 节点在原始文本中的位置

> ID：11797806
> 
> 赞同：2
> 
> 时间：2012-08-03T14:35:12.837
> 
> 标签：jquery, xml

有没有办法在它来自的原始文本中获取 XML 节点的位置？例如：

```
< a>text< /a>

< b>tesxt< /b> 
```

那么您可以看到`< b>` 标签来自位置 11 的文本？我知道这可能很难，因为 DOM 可以更改独立的表单文本，但我只想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:38:51.603

利用`xmlString.indexOf("<b>")`

# javascript - Node.js如何实现多态？

> ID：11797807
> 
> 赞同：6
> 
> 时间：2012-08-03T14:35:24.767
> 
> 标签：javascript, node.js, abstraction

我正在尝试使用 node.js 和其他相关技术来实现应用程序。来自 java 领域的多态性很自然，但对于经典程序员节点的工作方式不同。

应用程序将在用户提供的运行时加载新代码。为了让主核心使用这个代码，“我们”需要就某种约定达成一致。知道 Node 有多新，我对没有找到答案并不感到惊讶。问题是这个问题在 JS 中也相当模糊。

要求：

1.  强解耦。
2.  在运行时加载新代码。
3.  该解决方案应该适用，因此我可以与浏览器共享尽可能多的代码。

更新：

1.  我确实摆弄了鸭子打字，我也遇到了 Clojure 关于基于协议的实现的想法。
2.  我会很感激答案中的一些代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:39:03.743

JavaScript，就像大多数其他脚本语言（即没有编译时类型检查）一样通过[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)进行多态性。

如果您来自 Java 领域，您可能正在寻找通常提供超级解耦的[依赖注入。](http://en.wikipedia.org/wiki/Dependency_injection)您可能可以使用 google 为 Node 找到一个好的依赖注入框架，比如[这个](https://github.com/Ezku/coffee-injector)。

虽然说实话，您可能只需要制作一个 Javascript/Coffeescript 文件来完成所有接线和配置加载。

由于 Javascript 的灵活性，几乎所有形式的多态性都已实现（特征、接口、继承、原型）。每个都有其优点/缺点，但几乎所有都是运行时检查（如果有的话）而不是编译时间。

就我个人而言，我可能只使用[Coffeescripts 继承](http://coffeescript.org/#classes)、[traits.js](http://soft.vub.ac.be/~tvcutsem/traitsjs/)或[Javascript 的内置原型链](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)。

**编辑：**但是，由于您正在谈论允许用户扩展系统，因此回调和/或自定义事件是首选方法（即高阶函数[式编程和事件总线](https://stackoverflow.com/questions/6808905/javascript-event-bus-architecture)）。如果您正在寻找像插件系统这样的实质内容，那么[loader-js](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)看起来相当完整（向@Larry Battle 致敬）。

# php - 使用 Doxygen 或 PHPDoc 记录获取/发布参数

> ID：11797811
> 
> 赞同：10
> 
> 时间：2012-08-03T14:35:39.943
> 
> 标签：php, documentation, doxygen, phpdoc

我正在查看 PHPDoc 的文档，但找不到记录发送给各种方法的 Post 变量的好方法。

因此，我开始研究 Doxygen，希望它能为我提供一种更好的方法来记录所有这些变量。我的代码涉及到很多AJAX请求，所以大部分变量都是通过post发送的。

有没有一种好方法可以记录 doxygen 中的 post 变量？我无法确定仅使用标准参数标签运行是否会出错。

如果没有，是否有其他文档可能在此过程中有所帮助？还是我应该手动记录所有内容而忽略寻找自动记录工具？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T19:24:11.313

如果这些方法是直接从 $_POST 中读取的，而不是作为方法参数，那么我会依靠方法文档块中的[@uses](http://phpdoc.org/docs/latest/references/phpdoc/tags/uses.html)标记：

```
/**
 * My foo() method
 * @return void
 * @uses $_POST['bar'] directly
 */
public function foo()
{
    echo "I use ", $_POST['bar'], "... :-)";
} 
```

另一个选项可能是 @global 标签：

```
/**
 * My bar() method
 * @return void
 * @global mixed uses the 'bar' key from the $_POST superglobal directly
 */
public function foo()
{
    global $_POST;
    echo "I use ", $_POST['bar'], "... :-)";
} 
```

我意识到“全局”关键字在技术上对于方法内部的超全局不是必需的，但它确实有助于记录它。

* * *

**编辑**

请注意，根据 PHPDoc 的参考指南，[@uses](http://phpdoc.org/docs/latest/references/phpdoc/tags/uses.html)旨在显示双向关系。

> 文档生成器应该在接收元素的文档中创建一个@used-by 标记，该标记链接回与@uses 标记关联的元素

因此，虽然语义上的@uses 可能读起来更好，但[@see](http://phpdoc.org/docs/latest/references/phpdoc/tags/see.html)也可以用于记录$_[POST|GET|REQUEST] 参数。两者之间的主要/唯一区别是 @see 是指向在 doc 块中引用的[FQSEN](http://phpdoc.org/docs/latest/glossary.html#term-fqsen)的单向链接

# asp.net - Using ViewModels and Linq in ASP.Net MVC 4

> ID：11797814
> 
> 赞同：1
> 
> 时间：2012-08-03T14:35:50.607
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

I'm learning MVC with a view to updating some of the old ASP/ASP.Net web apps I have to manage for my employer - and I'm starting to get my head around ViewModels (well trying - hence the post).

In my example to help me learn - I've got a Car Dealership. Each DealerShip has a number of cars that they hire out. The Cars are classed as CarTypes - and each CarType can have a number of Cars associated with it.

```
CarType.cs

//
// Holds types of car - this has a one to many relationship with Car class
//
[Table("tType")]
public class CarType
{
    [Key]
    public int type_id { get; set; }
    public int dealer_id { get; set; }
    public string type_name { get; set; }
    public string type_desc { get; set; }
    public virtual ICollection<Car> Car { get; set; }
}  

Car.cs

//
// Holds actual Cars
//

[Table("tCar")]
public class Car
{
    [Key]
    public int car_id { get; set; }
    public int dealer_id { get; set; }
    public int type_id { get; set; }
    public int car_order { get; set; }
    public string car_name { get; set; }
    public virtual ICollection<Rental> Rentals { get; set; }
    public virtual CarType CarType { get; set; }
}

Rental.cs

//
// This holds records of when cars are hired, and for which dealer, and for how long
//

[Table("tRental")]
public class Rental
{
    [Key]
    public int rental_id { get; set; }
    public int dealer_id { get; set; }
    public int car_id { get; set; }
    public DateTime hire_from { get; set; }
    public DateTime hire_to { get; set; }
    public virtual Car Car { get; set; }

} 
```

The above classes map to my database. I've read that using Models like this is to be avoided, and instead you should use a ViewModel.

What I want to do in my example, is allow people to search a particular dealer, with a given date, and number of days hire they require.

I then want to populate the viewmodel with the following:

1.  Date Car Required From
2.  Number of Days Car is required
3.  The DealerID (which is taken from the URL - eg. [http://mycars.com/search/avail/dealerGlasgow](http://mycars.com/search/avail/dealerGlasgow) )
4.  A list of car types available
5.  Number of each car type available

To do this, I came up with the ViewModel below:

```
SearchViewModel.cs

public class SearchViewModel
{
    [Required]
    public DateTime From { get; set; }
    [Required]
    public int DaysHire { get; set; }
    public int dealer_id { get; set; }
    public IQueryable<Car> Cars { get; set; }
} 
```

Now I use this view model to display a Calendar and number of days search form in ASP.Net MVC - so I populate the dealer_id from a hidden field on the form (taken from the URL), and search the database, using the LINQ below in my controller.

The Search first looks for any rentals which overlap the dates the person is looking to hire for - it places that info into:

```
preBookedCars 
```

It then searches for Cars by the dealer_id - and excludes any that have already been hired:

```
freeCars 
```

The Controller code is:

```
 //
    // POST: /Search/Avail/DealerName

    [AllowAnonymous]
    [HttpPost]
    public ActionResult Avail(SearchViewModel model, string id)
    {
        if (ModelState.IsValid)
        {
            var dteFrom = model.From;
            var dteTo = model.From.AddDays(model.Days);

            // Search for any bookings for those dates, for the dealer specifed

            var prebookedCars = db.Cars
                .Where(car => car.Rentals.Any(rental =>
                    (model.dealer_id == rental.dealer_id && dteFrom >= rental.check_in && dteFrom < rental.check_out)
                    ||
                    (model.dealer_id == rental.dealer_id && dteTo > rental.check_in && dteTo <= rental.check_out)
                    ||
                    (model.dealer_id == rental.dealer_id && dteFrom <= rental.check_in && dteTo >= rental.check_out)
                ));

            // Search for Cars, include the Car Type (so we can have description etc), and exclude any cars that have already been hired

            var freeCars = db.Cars.Include("CarType")
                .Where(car => car.dealer_id == model.dealer_id)
                .Except(prebookedCars)
                .OrderBy(o => o.car_order);

            model.Cars = freeCars;

            return View(model);
        }
        else
        {
            return View(model);
        }

    } 
```

I've a couple of questions:

a) Is my Linq for prebookedCars efficient? Is there a way I should be checking the:

```
model.dealer_id == rental.dealer_id 
```

...just once, instead of 3 times (eg. by having 2 Where clauses for example)?

b) The query, when I'm stepping through the model in VS - for each Car in the model, I can click down in VS - ie. model.Cars.[Results View].Rentals - and see every Rental associated with that Car - even although I jut wanted to exclude any Cars which had already been booked. If I don't use that level of detail in my view, does it matter that this list is within the model? Or the fact that it's there, does that mean that I'm adding unnecessary overhead to my model/query?

c) I really wanted to end up, in my View, being able to show:

CarType (type_name) and Description (type_desc) - and in a drop down box, the number of cars of that type available.

What I've ended up with is the specific individual Cars - rather than being able to show:

model.CarType.type_name and model.CarType.count

How could I change my query, to return the number of car types available (or can I do it somehow with the model I have above?)

I know this is very long winded - but I thought showing the detail, would help - if anyone is able to help with any part of my query, I'd appreciate it.

thanks, Mark

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:24:56.643

> a) Is my Linq for prebookedCars efficient? Is there a way I should be checking the:
> 
> model.dealer_id == rental.dealer_id ...just once, instead of 3 times (eg. by having 2 Where clauses for example)?

You could alter your Statement to put the test for model.dealer_id first:

```
db.Cars.Where(car => car.Rentals.Any(rental =>
                    (model.dealer_id == rental.dealer_id) && (
                    (dteFrom >= rental.check_in && dteFrom < rental.check_out)
                    ||
                    (dteTo > rental.check_in && dteTo <= rental.check_out)
                    ||
                    (dteFrom <= rental.check_in && dteTo >= rental.check_out))
                )); 
```

Regarding B: There are a few things that could be wrong. Are you using code first for this? If so, you may need to implement the Equals function, or it might be a casting linq thing. [This article](https://stackoverflow.com/questions/693324/linq-except-operator-and-object-equality) may be related

Regarding C: I'm not really sure I understand your question - but I think you're wanting to count the available cars for any given car type and display it? If so, since you already have an enumeration of available cars (assuming b works) as you're iterating through the list of car types you could get the number of available cars from your previous query:

```
 foreach (var cartype in db.CarTypes)
            {
                var numberAvailable = freeCars.Where(fc => fc.CarType == cartype);
            } 
```

This is kind of pseudo-code as the loop should be in your view, and will probably be doing a number of other things, but I hope you get the idea.

# jquery - 寻找交互式决策树

> ID：11797815
> 
> 赞同：2
> 
> 时间：2012-08-03T14:35:52.480
> 
> 标签：jquery, flash, jquery-plugins, wordpress

我正在为由 Wordpress 提供支持的网站寻找交互式决策树。
我想要一个决策树的实际外观。一开始我只希望根可见，并且用户做出的每个决定都显示树的下一级。
我已经找了很长时间了，我找到的最接近的是：[http](http://listui.com/?p=84) ://listui.com/?p=84 ，这里也提到了。但这并没有给人一种树的感觉。我更喜欢 jQuery 代码，但 FLASH 也是可以接受的。或者作为替代方案，请指导我使用 jQuery 教程来构建树形图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T00:34:23.113

[http://philau.willbowman.com/2012/digitalInnovation/DevelopmentReferences/LIBS/d3JS/examples/tree/tree-interactive.html](http://philau.willbowman.com/2012/digitalInnovation/DevelopmentReferences/LIBS/d3JS/examples/tree/tree-interactive.html)

这个例子来自 Mike Bostocks Data Driven Documents。他的来源： [http ://d3js.org/](http://d3js.org/)

希望能帮助到你。

# asp.net-mvc-3 - 如何在 MVC3 中显示数据库中的图像并在视图中显示？

> ID：11797817
> 
> 赞同：0
> 
> 时间：2012-08-03T14:35:57.403
> 
> 标签：asp.net-mvc-3, image

大家好，我有一个 FileUpload 控件，用户可以在其中上传图像和 Doc 文件，当我从数据库中检索数据时，我现在将路径的 Url 保存在我的数据库中，我想检查文件是 .doc 还是图像是文档，它将打开文件我的问题是我如何为图像执行此操作我如何检查它的图像我必须在图像控件中显示图像从未在 MVC3 中的图像控件上工作过

这是我的控制器代码

```
 public ActionResult ViewAttachments(string AttachmentName)
    {
        try
        {
            AttachmentName = Session["AttachmentUrl"].ToString();
            var fs = System.IO.File.OpenRead(Server.MapPath(" "+ AttachmentName+" "));
            return File(fs, "application/doc", AttachmentName);
        }
        catch
        {
            throw new HttpException(404, "Couldn't find " + AttachmentName);
        }
    } 
```

我在这里使用一个aspx页面我必须使用什么html以及我必须在这里更改的代码是什么请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:04:35.297

您可以做的是对扩展名进行简单检查，然后在执行操作时返回 FILE 结果，或者返回包含简单图像控件的局部视图。

要扩展您的代码，您可以执行以下操作：

```
public ActionResult ViewAttachments(string AttachmentName)
    {
        try
        {
            AttachmentName = Session["AttachmentUrl"].ToString();
            var fs = System.IO.File.OpenRead(Server.MapPath(" " + AttachmentName + " "));
            var ext = Path.GetExtension(fs.Name);

            switch (ext)
            {
                case "doc":
                    return File(fs, "application/doc", AttachmentName);
                case "jpg":
                case "jpeg":
                case "png":
                    return PartialView("_imgControl", "http://www.mysite.com/downloads/" + AttachmentName + ext); 
            }                
        }
        catch
        {
            throw new HttpException(404, "Couldn't find " + AttachmentName);
        }
    } 
```

然后在您的局部视图中，您可以将模型对象（在本例中为您网站上图像路径的 url）返回到标准 html 图像控件。

# grails - 在 Twitter Bootstrap 模式中渲染 Grails 内容

> ID：11797818
> 
> 赞同：1
> 
> 时间：2012-08-03T14:35:59.890
> 
> 标签：grails, twitter-bootstrap, modal-dialog

我正在尝试将动作的结果呈现为模态（twitter bootstrap）。不幸的是我没有得到这个工作。

在我在每个迭代器中生成链接之前：

```
<g:link action="perform" id="${exerciseInstance.id}">
   <h2>${fieldValue(bean: exerciseInstance, field: "title")}: (${exerciseInstance.questions.size()} Questions)</h2>
 </g:link> 
```

而不是呈现一个完整的新网站，我更希望测验以模式呈现。因此，我尝试了一个简单的 twitter 引导模式示例：

```
<a data-toggle="modal" href="#myModal" class="btn btn-primary btn-large">${fieldValue(bean: exerciseInstance, field: "title")}</a>
<div id="myModal" class="modal hide fade" style="display: none; ">
  <div class="modal-header">
    <h3>Test</h3>
  </div>
  <div class="modal-body">
    --> This is where the content should go <--
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
  </div>
</div> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:13:22.307

在 SO 上寻求“最佳方式”是一种危险的游戏。应该没有最好的。只是方法不同。我会给你一个我使用 jQuery 的[$.load()](http://api.jquery.com/load/)函数的例子。

```
$("#myModal .modal-body").load(url); 
```

真的就是这么简单。显然，如果您需要传入参数、提供回调函数等，请调整您的 load() 函数。控制器的操作只会在模态体中呈现包含您想要的 HTML 的模板。这甚至不是 Grails 特有的。这种方法适用于任何服务器端技术。

# asp.net - 我可以缩短这个吗？在 vb.net 中创建了一个进程 - 必须调用它 4 次

> ID：11797822
> 
> 赞同：1
> 
> 时间：2012-08-03T14:36:09.750
> 
> 标签：asp.net, vb.net, unix

同样由于某种原因，它昨天还在工作，但今天却不工作。我认为它不是代码，而是一些外部问题。

无论如何

```
 Dim virtualFolder As String = "~/Scripts/"
    Dim physicalFolder As String = Server.MapPath(virtualFolder)
    Dim unixLogin As String = (USERNAME & "@" & COMPUTERNAME & ":" & UNIXSCRIPTNAME)

    ' Send file to Unix server via pscp
    Dim Proc As New System.Diagnostics.Process
    Proc.StartInfo = New ProcessStartInfo("C:\Windows\System32\cmd.exe")
    'MsgBox("/C C:\pscp.exe -pw " & PASSWORD & " " & physicalFolder & "\" & UNIXSCRIPTNAME & " " & unixLogin)
    Proc.StartInfo.Arguments = "C:\pscp.exe -pw " & PASSWORD & " " & physicalFolder & "\" & UNIXSCRIPTNAME & " " & USERNAME & "@" & COMPUTERNAME & ":" & UNIXSCRIPTNAME
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    'Proc.StartInfo.CreateNoWindow = True
    Proc.Start()
    ' Allows script to execute sequentially instead of simultaneously
    Proc.WaitForExit()

    ' Make file executable
    Proc.StartInfo = New ProcessStartInfo("C:\plink.exe")
    'MsgBox("-ssh -pw " & PASSWORD & " " & USERNAME & "@" & COMPUTERNAME & " chmod u+x ./" & UNIXSCRIPTNAME)
    Proc.StartInfo.Arguments = "-ssh -pw " & PASSWORD & " " & USERNAME & "@" & COMPUTERNAME & " chmod u+x ./" & UNIXSCRIPTNAME
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    ' Proc.StartInfo.CreateNoWindow = True
    Proc.Start()
    Proc.WaitForExit()

    ' Execute File
    Proc.StartInfo = New ProcessStartInfo("C:\plink.exe")
    Proc.StartInfo.Arguments = "-ssh -pw " & PASSWORD & " " & USERNAME & "@" & COMPUTERNAME & " ./" & UNIXSCRIPTNAME
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    'Proc.StartInfo.CreateNoWindow = True
    Proc.Start()
    Proc.WaitForExit()

    ' Remove File
    Proc.StartInfo = New ProcessStartInfo("C:\plink.exe")
    Proc.StartInfo.Arguments = "-ssh -pw " & PASSWORD & " " & USERNAME & "@" & COMPUTERNAME & " rm ./" & UNIXSCRIPTNAME
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    'Proc.StartInfo.CreateNoWindow = True
    Proc.Start()
    Proc.WaitForExit() 
```

这个可以缩短吗？我是... 1) 将文件发送到 unix 系统 2) 使其可执行 3) 运行文件（它的脚本） 4) 之后删除它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:33:58.937

您可能想看看这是否适合您。我没有 Unix 系统来检查它，但它似乎正确地填充了进程。出于测试目的，我还为您的变量设置了默认值。这消除了很多冗余并缩短了代码量。

```
Public Class Form1
    Dim USERNAME As String = "USERNAME"
    Dim COMPUTERNAME As String = "COMPUTERNAME"
    Dim UNIXSCRIPTNAME As String = "UNIXSCRIPTNAME"
    Dim PASSWORD As String = "PASSWORD"
    Dim virtualFolder As String = "~/Scripts/"
    Dim physicalFolder As String = "physicalFolder"
    Dim unixLogin As String = (USERNAME & "@" & COMPUTERNAME & ":" & UNIXSCRIPTNAME)
    Dim processCmdFileTransfer As String = "C:\pscp.exe -pw " & PASSWORD & " " & physicalFolder & "\" & UNIXSCRIPTNAME & " " & USERNAME & "@" & COMPUTERNAME & ":" & UNIXSCRIPTNAME
    Dim processCmdFileActions As String = "-ssh -pw " & PASSWORD & " " & USERNAME & "@" & COMPUTERNAME & "XX" & UNIXSCRIPTNAME

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        test()
    End Sub

    Public Sub test()

        RunProcess("C:\Windows\System32\cmd.exe", processCmdFileTransfer)
        RunProcess("C:\plink.exe", processCmdFileActions, " chmod u+x ./")
        RunProcess("C:\plink.exe", processCmdFileActions, " ./")
        RunProcess("C:\plink.exe", processCmdFileActions, " rm ./")

    End Sub

    Private Sub RunProcess(processPath As String, startInfo As String, Optional command As String = "")

        Dim Proc As New System.Diagnostics.Process
        Proc.StartInfo = New ProcessStartInfo(processPath)

        If (InStr(startInfo, "XX") > 0) And (command <> "") Then
            startInfo = startInfo.Replace("XX", command)
        End If

        Proc.StartInfo.Arguments = startInfo
        Proc.StartInfo.RedirectStandardInput = True
        Proc.StartInfo.RedirectStandardOutput = False
        Proc.StartInfo.UseShellExecute = False
        Proc.Start()
        Proc.WaitForExit()

    End Sub 
```

结束类

# objective-c - 目标C中UIScrollView中的zoomToRect方法不起作用

> ID：11797832
> 
> 赞同：3
> 
> 时间：2012-08-03T14:36:39.147
> 
> 标签：objective-c, ios, xcode, uiscrollview

在过去的几天里，我开始在目标 C 中工作，我真的很难理解 uiscrollview。我想让视图在大于屏幕尺寸的图像周围移动，并且每次点击屏幕时都可能放大/缩小。为了尝试一些早期的测试，我在下面写了一个简单的代码序列。注释为 (2) 的代码有效，我在构建和运行后看到了简短的动画，但 (1) 没有。图像只是坐在那里不动。我可以看到使用 zoomToRect 让滚动完全起作用*，*这是一个问题，因为我想缩放到图像的较小部分，而不是仅仅以相同的缩放级别移动到那里。

我确定我误解了有关其工作原理的一些基本内容。有人可以告诉我哪里出了问题（我还没有将任何这些编码到类/方法中） - 只是想了解 zoomToRect 的实际工作原理，因为我认为这是我需要的。

```
UIImage *myFirstImage = [UIImage imageNamed:@"page.jpg"];

UIScrollView * myFirstScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 360, 480)];

[myFirstScrollView setContentSize:CGSizeMake(myFirstImage.size.width, myFirstImage.size.height)];

UIImageView *myFirstImageView = [[UIImageView alloc] initWithImage:myFirstImage];

[myFirstImageView setFrame:CGRectMake(0, 0, myFirstImage.size.width, myFirstImage.size.height)];

[myFirstScrollView addSubview:myFirstImageView];

[self.view addSubview:myFirstScrollView];

// 1

[myFirstScrollView zoomToRect:CGRectMake(300, 300, 360, 480)
    animated:YES];  // THIS DOESN'T WORK

// 2

[myFirstScrollView scrollRectToVisible:CGRectMake(300, 300, 360, 480) 
    animated:YES]; // THIS DOES WORK 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:29:17.780

这是一个可能对你有帮助的答案

[UIScrollView 的内容大小](https://stackoverflow.com/questions/8978841/content-size-of-uiscrollview)

您的滚动视图 contentSize 与图像大小相同。所以在零缩放比例下，它不会滚动。

请查看 SO 链接，这将对您有所帮助。

# iphone - 按下 childViewController 中的后退按钮时更改 parentViewController 中的值

> ID：11797835
> 
> 赞同：0
> 
> 时间：2012-08-03T14:36:53.367
> 
> 标签：iphone, objective-c, ios

我需要这样的东西 `self.parentViewController.someValue = 20`。是否可以？我使用 UINavigationBar。我希望当用户点击后退按钮时，我的主控制器中的某些值发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:33:44.740

我可以想到四种方法来做到这一点，而且可能还有更多没有想到的方法。

1) 更新数据模型并让父控制器使用 KVO 观察更改。

2）当第二个控制器离开时发送通知并让父级监听它。

3) 创建一个委托协议，让第二个控制器直接引用父方法。

4）使用父母的`viewWillAppear:`并检查`isMovingToParentViewController`属性是否只是重新出现。

你有很多选择！:)

# php - php 登录变量始终为真，无法进入索引页面

> ID：11797837
> 
> 赞同：0
> 
> 时间：2012-08-03T14:36:54.747
> 
> 标签：php, variables, scope

我有 2 个页面和一个类，index.php、loggedin.php 和 userclass.php。

**

## 索引.php

**

```
require 'userclass.php';
$user = new User();

if($user->loggedin = true){
    header("location: loggedin.php");
    die();
} 
```

**

## 登录.php

**

```
require 'userclass.php';
$user = new User();

if($user->loggedin = false){
    header("location:index.php");
    die();
}

if(isset($_POST['logout'])){
    $user->logout();
    header("location:index.php");
} 
```

**

## 用户类.php

**

```
public $loggedin = false;

public function logout(){
    session_destroy();
    $this->loggedin = false;
    return $this->loggedin;
} 
```

我无法注销或访问索引页面而不会被重定向到 login.php。我有一种感觉，这可能与我的登录变量范围有关，或者它在哪里被使用？抱歉，我是 OO php 的新手，不胜感激。谢谢

ps 一些其他不相关的功能被遗漏了，但是如果您认为它们可能相关，我也会发布它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:37:26.067

您需要使用两个等号进行[比较](http://php.net/manual/en/language.operators.comparison.php)，否则您正在执行分配：

```
if($user->loggedin == true){

....

if($user->loggedin == false){ 
```

你写它的方式，你设置`loggedin`等于`true`每次。

# groovy - 如何通过函数将文件集传递给 Gradle Ant 任务？

> ID：11797856
> 
> 赞同：3
> 
> 时间：2012-08-03T14:37:43.413
> 
> 标签：groovy, gradle

在我的 Gradle 构建中，我想定义一个可重用的函数，用于将文件复制到远程主机。在函数里面我想使用`scp`Ant 任务。下面的代码有效：

```
def remoteCopy(todir) {
    ant.scp(
            todir: todir,
            passphrase: XXXXXXXX,
            keyfile: XXXXXXXX) {
        fileset(dir: 'config') {           // I want this to be passed
            include(name: '**/*.txt')      // in as a parameter to the
        }                                  // function
    }
}

task example {
    remoteCopy('user@host:/home/xxxxxxx/')
} 
```

但是，我不想在 remoteCopy 函数中硬编码文件集。我希望能够像这样调用函数（如果可以使用这种语法）：

```
remoteCopy('user@host:/home/xxxxxxx/') {
    ant.fileset(dir: 'config') {
       include(name: '**/*.txt')
    }
} 
```

或者也许作为第二个参数：

```
remoteCopy('user@host:/home/xxxxxxx/',
    ant.fileset(dir: 'config') { include(name: '**/*.txt') } ) 
```

了解 Groovy 和/或 Gradle 的人可以提供帮助吗？

* * *

为了完整起见，为了更容易重现，这是我`scp`在 Gradle 脚本中初始化 Ant 任务的方式：

```
configurations { ant_jsch }

repositories { mavenCentral() }

dependencies { ant_jsch 'org.apache.ant:ant-jsch:1.8.1' }

ant.taskdef(name: 'scp',
    classname: 'org.apache.tools.ant.taskdefs.optional.ssh.Scp',
    classpath: configurations.ant_jsch.asPath) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:51:21.573

这行得通吗？

```
def remoteCopy( todir, Closure fset ) {
  ant.scp( todir: todir, passphrase: XXXXXXXX, keyfile: XXXXXXXX) {
    fset()
  }
}

remoteCopy( 'user@host:/home/xxxxxxx/' ) {
  ant.fileset( dir: 'config' ) {
    include( name: '**/*.txt' )
  }
} 
```

# iphone - startDeviceMotionUpdatesToQueue:withHandler:? 的安全更新间隔

> ID：11797857
> 
> 赞同：5
> 
> 时间：2012-08-03T14:37:45.560
> 
> 标签：iphone, objective-c, ios, core-motion, cmmotionmanager

**编辑：添加了一个全局，现在它正在工作。但是我仍然有疑问..请继续阅读:)**

我想在需要时在 Y 轴上进行加速，并在代码的不同部分使用它。在这个例子中，我在一个 while 循环中使用它来进行测试。

我的代码正在运行，但我是正确使用 UpdateToQueue... 方法还是这种“非正统”的方式来实现我想要的？

我将更新间隔设置为 30 毫秒，你认为这是一个“安全”的更新间隔吗？有人告诉我，在选择一个时我应该小心，因为当前或以后的硬件/iOS 更新可能无法跟上这样的间隔，这是真的吗？

```
double myAcceleration; // a global..

-(void) play // my "main" method..
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    motionManager.deviceMotionUpdateInterval = 0.03; // update every 30ms
    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]  
                                       withHandler:^(CMDeviceMotion *motion, NSError *error) 
                                       {
                                           myAcceleration = motion.userAcceleration.y;
                                       }
    ];

    while(!self.stopButtonPressed)
    {
        NSLog(@"Y-Axis acceleration is %f", myAcceleration);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-10T11:11:13.687

最后。我找到了我自己问题的答案:)

苹果文档：

> **选择运动事件更新间隔**
> 
> 当您使用 Core Motion 请求运动数据时，您需要指定更新间隔。您应该选择满足应用需求的最大间隔。间隔越大，传递到您的应用程序的事件就越少，从而延长电池寿命。
> 
> 表 4-1 列出了一些常见的更新频率，并解释了您可以如何处理以该频率生成的数据。很少有应用程序需要每秒发送 100 次加速事件。
> 
> 事件频率 (Hz)
> 
> 10–20 适用于确定设备的当前方向矢量。
> 
> 30–60 适用于使用加速度计进行实时用户输入的游戏和其他应用程序。
> 
> 70–100 适用于需要检测高频运动的应用。例如，您可以使用此时间间隔来检测用户敲击设备或快速摇晃设备。
> 
> 您可以将报告间隔设置为小至 10 毫秒 (ms)，这对应于 100 Hz 的更新率，但大多数应用程序以较大的间隔运行即可。

简而言之，正如博格丹所说：10Hz-100Hz

来源：[选择运动事件更新间隔](https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/motion_event_basics/motion_event_basics.html#//apple_ref/doc/uid/TP40009541-CH6-SW15)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T20:55:14.820

以这种方式使用是可以的。

关于时间间隔：当前最大更新限制为100Hz（每秒100次，一个加速度计更新0.01秒），最小为10Hz（AFAIK）。如果您在这样的范围内设置了时间间隔，那么当前和下一个版本的苹果小工具肯定会支持它。但是您不能依赖默认时间间隔并祈祷它在所有地方都相同，因为苹果可能会更改 min 和 max（例如，一些新的 IC 芯片将支持 500Hz 刷新率）范围，因此默认值也会更改。

# magento - Magento 显示错误的页面布局

> ID：11797858
> 
> 赞同：0
> 
> 时间：2012-08-03T14:37:47.307
> 
> 标签：magento

嗨，我刚刚为我的主页制作了一个自定义布局，效果很好。

但是当我尝试将此布局应用到我的第二个站点的主页时，它无法生效。页面布局显示为“新的 3 列布局”，但在前端仍显示旧布局，还剩两列。

为了纠正这个问题，我已经刷新了所有可能的缓存并检查了范围，但一切似乎都很好。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:58:54.097

转到`Cms > Pages > (find home page by url_key home) > Design Tab > Layout`然后选择`3 columns`并保存页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:08:35.810

最后为我解决的问题是更改原始页面的 url 并将其所有内容复制到新页面中，但这次选择新布局。

# javascript - how to select drop down list based on value

> ID：11797872
> 
> 赞同：0
> 
> 时间：2012-08-03T14:38:21.580
> 
> 标签：javascript, jquery

Click form edit has trouble on drop down list

Dropdown list shows first item. I need to select value based on `<p>Professor<p/>`

html

```
<p>Title</p>
<p class='title'>Professor</p> 
```

JQuery

```
$('.title').click(function(){
    $(this).replaceWith('<select class="title" name="title"><option >Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
});​ 
```

[**Demo**](http://jsfiddle.net/sweetmaanu/U7rAc/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:45:50.870

If you are trying to select 'professor' by default this will do the trick:

```
$('.title').click(function(){
    var target = $(this);
    var text = target.text();
    var select = $('<select class="title" name="title"><option selected="selected">Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
    select.find('option[value="' + text + '"]').prop("selected", true);
    target.replaceWith(select);
}); 
```

[Fixed jsFiddle](http://jsfiddle.net/u8Bux/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:51:49.623

You can do it like [this](http://jsfiddle.net/sweetmaanu/U7rAc/3/):

```
$('.title').click(function(){
    $(this).replaceWith('<select class="title" name="title"><option selected="selected">Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
    $('.title').val($(this).text());
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:55:21.823

Can you use an array ?

```
$('.title').on("click", function(){
    var selected = $(this).text();

    var contents = null;
    var options = ['Mr', 'Mrs', 'Ms', 'Miss', 'Dr', 'Professor', 'Sir'];

    for ( i = 0 ; i < options.length ; i++ )
    {
        if ( options[i] == selected )
            contents += '<option value='+ options[i] +' selected="selected">'+ options[i] +'</option>';
        else              
            contents += '<option value='+ options[i] +'>'+ options[i] +'</option>';
    }

    $(this).replaceWith('<select class="title" name="title"><option>Please Select</option>'+ contents +'</select>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:47:00.987

Ona way to do it:

```
$('.title').click(function(){
    var pVal = this.innerHTML;
    $(this).replaceWith('<select class="title" name="title"><option selected="selected">Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
    $('select.title').val(pVal);
});​ 
```

[http://jsfiddle.net/U7rAc/6/](http://jsfiddle.net/U7rAc/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:47:06.333

You need to store the text of the paragraph that was clicked before you replace the HTML. Then use jQuery to find the select list you've created and set its value.

```
$('.title').click(function(){
    var $this = $(this),
        selected = $this.text();
    $this.replaceWith('<select class="title" name="title"><option selected="selected">Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
    $('.title').val(selected);
});​ 
```

in the fiddle: [http://jsfiddle.net/U7rAc/5/](http://jsfiddle.net/U7rAc/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:49:22.917

```
 var theValue = $(this).html();
    $("select.title").val( theValue ).attr('selected',true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T14:49:32.357

Rather than trying to append your `<select>` all at once, I'd do something more like this. That way, you can check for a default option and set the selected attribute on it.

```
$('.title').click(function() {
    var $this = $(this),
        $select = $('<select>'),
        defaultValue = $this.text(),
        options = [
            'Please Select',
            'Mr',
            'Mrs',
            'Ms',
            'Miss',
            'Dr',
            'Professor',
            'Sir'
        ];

    $.each(options, function() {
        var $option = $('<option>');
        $option.text(this);
        $option.val(this);
        if (this == defaultValue) {
            $option.attr('selected', 'selected');
        }
        $select.append($option);
    });

    $this.replaceWith($select);
});​ 
```

Here's a [working example](http://jsfiddle.net/my6FV/).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T15:01:24.423

Try something like this. This will convert and select the same value in the option list as that which was clicked on.

```
$('.title').click(function(){
    var selected_item = $(this).html();
    $(this).replaceWith('<select class="title" name="title"><option>Please Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Miss">Miss</option><option value="Dr">Dr</option><option value="Professor">Professor</option><option value="Sir">Sir</option></select>');
    $('option:contains("' + selected_item + '")', 'select.title').prop('selected', 'selected');
});​ 
```

# java - 如何获取 Json 数组中的元素并将内容放入数组列表中？

> ID：11797877
> 
> 赞同：1
> 
> 时间：2012-08-03T14:38:26.993
> 
> 标签：java, json, arraylist

首先，我只想说我是初学者，我能得到的任何帮助都会很棒。

我在表单应用程序中创建了一个汽车类。每辆车都有三个属性：spaceNum、make 和 model。

我将每辆车存储到一个数组列表中。在退出程序之前，我将 arraylist 的内容写入名为 save.json 的文件中。

内容如下：

> [{"spaceNum":"2","make":"b","model":"b"},{"spaceNum":"3","make":"c","model":"c "},{"spaceNum":"4","make":"d","model":"d"},{"spaceNum":"1","make":"a","model": “一个”}]

如您所见，我的数组列表中存储了四辆汽车。

我的问题是 - 如何从我的 save.json 文件中获取数组，然后我可以尝试将其放回数组列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:43:23.637

我使用[jackson](http://jackson.codehaus.org/)进行所有的 json 序列化，所以假设你有一个 Car 类，你可以做这样的事情。

```
List<Car> cars = new ObjectMapper().readValue(new File("save.json"), TypeFactory.defaultInstance().constructCollectionType(List.class, Car.class); 
```

# java - SharedPreferences 结构和 ovoid 用户清除此

> ID：11797883
> 
> 赞同：0
> 
> 时间：2012-08-03T14:38:40.400
> 
> 标签：java, android, xml, security, sharedpreferences

我在 SharedPreferences 中保存了一些价值。我知道这是一个 xml 文件，它被沙盒化以防止其他应用程序能够访问这些值。

1.  我想知道 SharedPreferences 的结构，或者就像一个原始的 xml 文件？所有 SharedPreferences 将仅保存在 1 个 xml 文件中？

2.  用户可以清除应用程序的数据，这意味着我所有的 SharedPreferences 都将消失。如何保护我保存的信息？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:46:42.510

1.  是的 SharedPreferences 是一个 xml 文件。但它不必是一个 xml 文件，您可以像这样改变它`SharedPreferences sharedPreferences = getSharedPreferences("options.xml", MODE_PRIVATE);`

2.  如果用户清除应用程序数据，则不会留下有关应用程序的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:46:52.237

1) 您可以从 /data/data/"package name"/prefs/ 中获取 xml 首选项文件的名称是如何使用[http://developer.android.com/reference/android/content/Context.html#getSharedPreferences命名的(java.lang.String, 整数)](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)

2) 清除数据有清除数据的意图。您不得保护用户保存的信息不被清除。您可以通过将一些设置放入 sdcard 来保护。但请不要为用户数据这样做。

# java - 在当前工作区中构建所有 Eclipse Maven 项目的单个命令？

> ID：11797886
> 
> 赞同：13
> 
> 时间：2012-08-03T14:38:50.200
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

有谁知道在当前工作空间中构建所有 Maven 项目的任何简单而有效的方法，例如，为每个这样的项目进行 Maven 全新安装。

例如，是否可以选择多个项目并使用类似于 ${project_loc} 的内容，或者弹出一个包含可能项目的弹出窗口以用于运行配置？还是有什么其他方式？

我正在使用 Eclipse Juno。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T14:48:17.260

你能给他们一个父 pom.xml 然后`mvn compile`父 pom.xml 吗？

[在这里](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)寻找项目继承。

如果您可以指定相对路径，这应该不会太难。使用 pom.xml 创建一个新的 maven 项目，例如：

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.    apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>parent-app</artifactId>
    <packaging>pom</packaging>
    <version>1</version>
    <modules>
        <module>../project1</module>
        <module>../project2</module>
    </modules>
</project> 
```

从 Eclipse 工作区（但不是文件系统）中删除项目，然后导入父 maven 项目。现在你可以：

`Run As...`> `Maven build`> `clean compile`（作为目标）

它应该清理和编译所有项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:15:46.047

由于启动配置始终与一个项目相关，因此无法通过纯 Eclipse 工具将多个项目放入启动配置中。但是，有一些解决方法：

*   使用 parent.pom 来创建一个包含所有现有项目的新项目（并在 Maven 中进行迭代）。
*   真正为每个项目定义一个启动配置，然后使用[CDT 启动组](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_run_dbg_launch_group.htm)或[EclipseRunner](http://www.google.de/url?sa=t&rct=j&q=eclipse%20launch%20view&source=web&cd=1&ved=0CFgQFjAA&url=http://code.google.com/p/eclipserunnerplugin/&ei=oCIcUICKGs75sgbMkIHoAg&usg=AFQjCNG0KnSBc-ZdiaF3HWeB0tGa-g6wew)插件来批量启动它们。
*   使用 Ant 脚本遍历您的工作区目录并使用[Ant4Eclipse](http://www.ant4eclipse.org/)调用启动配置。

也就是说，你最好的选择是 parent.pom，因为它是一种行之有效的方法，你可以在你的持续集成服务器上重用它。

# asp.net-mvc - 如何从 MVC4 中的 DateTime 绑定中取出 TimeZone

> ID：11797888
> 
> 赞同：2
> 
> 时间：2012-08-03T14:38:57.167
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在我的模型中传递 /Date(1337904300000)/ 以受默认 MVC 4 模型绑定器的约束。根据我的计算，这应该是 2012 年 5 月 24 日下午 8:04，但模型绑定器正在制作绑定到 {5/25/2012 12:05:00 AM} 的 DateTime 变量。我在美国东部标准时间，看来它正在花费我发回的时间并添加 4 小时的差异。我该如何设置它，以便只花时间输入并将其保存到模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:36:05.743

处理时区是一件非常棘手的事情，dotnet 处理日期的方式取决于 DateTimes 的一个名为 TimeKind 的属性，它指定日期是用本地时间还是以绝对时间表示。毋庸置疑，大多数数据源将此枚举设置为*未知*...因此系统的各个组件做出不同的假设...导致您遇到的各种问题。首先要做的是在向客户端发送任何日期时间之前设置 TimeKind。不幸的是，这不是唯一的问题……还有其他问题。请参考我博客的这篇文章，在这里您可以找到对所有 TimeZone 相关问题的深入分析： [Asp.net Mvc 和日期和时区的噩梦](http://www.dotnet-programming.com/post/2012/09/10/Aspnet-Mvc-and-the-Nightmare-of-Dates-and-Time-Zones.aspx)

# c++ - Google Drive API 插入带有无标题名称的新文件

> ID：11797896
> 
> 赞同：0
> 
> 时间：2012-08-03T14:39:20.753
> 
> 标签：c++, qt, google-drive-api

我在 C++ 和 Qt 上为 GDrive 编写了自己的应用程序；我在将新文件插入 GDrive 时遇到问题。我所有上传的文件都命名为“无标题”。我应该如何创建发布请求来发送我的文件和带有扩展名的有效名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:59:08.083

有多种使用 Drive API 上传文件的方法，它们都在[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)中进行了描述。

必须在`title`资源表示的字段中提供文件标题：[https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

# regex - 正则表达式完全匹配 7 位或 9 位数字

> ID：11797897
> 
> 赞同：19
> 
> 时间：2012-08-03T14:39:24.263
> 
> 标签：regex

我的 reg ex 技能几乎为零，我试图将一个字段匹配为正好有 7 个或 9 个数字（不在 7 或 9 之间，所以没有 8 个数字是无效的）。

我试过了（不要笑）

```
/^([0-9]{7} | [0-9]{9}) 
```

和

```
/^([0-9]{7 | 9}) 
```

如果有人可以提供帮助并解释将不胜感激的答案。

我假设（可能是错误的）我使用什么（编程）语言并不重要

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-03T14:44:14.250

```
/^\d{7}(?:\d{2})?$/ 
```

`\d`是现代正则表达式的简写`[0-9]`，使用`(?:`可防止发生您不希望或不需要[的组捕获。](http://www.regular-expressions.info/named.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T14:47:49.440

您的第一种方法有效。只需省略空格，添加 a`$`以匹配字符串结尾和尾部斜杠分隔符。您也可以`[0-9]`用快捷方式替换`\d`：

```
/^(\d{7}|\d{9})$/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T14:40:46.860

七位或九位数字是七位数字，可选地后跟两位数字：

```
[0-9]{7}([0-9]{2})? 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T14:41:34.080

使用这个正则表达式`^\d{7}(\d{2})?$`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:42:47.590

这在您使用的编程语言中可能更容易完成，但也可以在正则表达式中实现。看看这个链接：[正则表达式将字符数限制为 10](https://stackoverflow.com/questions/1649435/regular-expression-to-limit-number-of-characters-to-10)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:43:03.813

如果您只删除空格（以及可选的括号），您的第一个将起作用。

# git - git合并壁球和反复发生的冲突

> ID：11797904
> 
> 赞同：39
> 
> 时间：2012-08-03T14:39:36.520
> 
> 标签：git, version-control, git-branch, git-squash

我有一个带有分支`master`的git 存储库。分支包含修改后的代码版本，我正在尝试将更改从到合并为：`alt``alt``master``master``alt`

```
git merge --squash master 
```

合并导致冲突：

```
Auto-merging myproject/foo/bar
CONFLICT (content): Merge conflict in myproject/foo/bar
Squash commit -- not updating HEAD
Automatic merge failed; fix conflicts and then commit the result. 
```

在我解决冲突并提交更改后，一切似乎都很好，但是当我`git merge --squash master`再次运行（不对任何分支进行任何更改）时，我会得到相同的冲突错误。

这是为什么？我错过了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-03T14:43:03.700

通过`squash`合并，您创建了一个提交，它具有合并的效果，但不是真正的合并。

也就是说，工作树具有您所期望的修改，但元数据没有：至关重要的是，提交没有两个父级（一个 on`master`和一个 on `alt`），因此后续合并无法找出最后一个共同点祖先。

* * *

## 有用的用途`squash`

1.  *将一个完全完成*的功能分支合并到`master`. 我会将任何有用的信息累积到压缩提交中，但特别不希望此功能的增量开发历史污染`master`提交时间线。
2.  将几个独立的特性（或来自不同开发人员的贡献）合并到同一个集成分支上，同样不保留它们的增量历史。我*可以将*它们全部重新组合在一起，然后`rebase -i`用来压缩它们的提交，但这更容易

* * *

## 无用的用途`squash`

*您希望保持历史和祖先元数据完整的任何合并*，例如*任何您希望重复递归合并正常工作的时间*，特别*是 OP 尝试执行的操作*。

`squash`只是不是一个很好的默认值，这就是为什么它不是默认值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-10-01T16:20:57.587

添加到“壁球合并的无用用途”：Git 2.29（2020 年第四季度）说明了陷阱`merge --squash`：

请参阅[brian m的](https://github.com/bk2204)[提交 087c616](https://github.com/git/git/commit/087c61677c358091692ac6ce1de00bbfc9affdb1)、[提交 409f066](https://github.com/git/git/commit/409f066716598d5050c34b7bb0e6859940428dcf)、[提交 5065ce4](https://github.com/git/git/commit/5065ce412ef083a02288c1972ea3d07423cace0e)（2020 年 9 月 20 日） 。[卡尔森 ( `bk2204`)](https://github.com/bk2204) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 c5a8f1e](https://github.com/git/git/commit/c5a8f1efc03746fd6b6c71fef8e3a5c38ce4e2e8)中，2020 年 9 月 29 日）)

> ## [`docs`](https://github.com/git/git/commit/5065ce412ef083a02288c1972ea3d07423cace0e): 解释为什么 squash 合并会被长期运行的分支破坏
> 
> ^(签字人：brian m. 卡尔森)

> 在许多项目中，通常使用 squash 合并，主要是为了在面对不使用逻辑独立、可对分提交的开发人员时保持整洁的历史记录。
> 
> 尽管这很常见，但由于缺乏任何新的合并基础，当使用 squash 合并来合并长时间运行的分支时，这往往会导致严重的问题。
> 
> 即使是非常有经验的开发人员也可能会犯这个错误，所以让我们添加一个常见问题解答条目，解释为什么会出现问题，并解释应该使用常规合并提交来合并两个长期运行的分支。

`gitfaq`现在在其[手册页](https://github.com/git/git/blob/5065ce412ef083a02288c1972ea3d07423cace0e/Documentation/gitfaq.txt#L244-L275)中包含：

> 合并和变基
> 
> * * *
> 
> > ## 将长寿命分支与 squash 合并合并时会出现哪些问题？
> 
> 一般来说，使用 squash 合并多次合并两个分支时会出现各种问题。这些可能包括在输出中、使用 GUI 或在使用符号表示范围时
> 看到额外的提交，以及需要一次又一次地重新解决冲突的可能性。`git log``...`
> 
> 当 Git 在两个分支之间进行正常合并时，它只考虑三个点：两个分支和第三个提交，称为*合并基础*，它通常是提交的共同祖先。
> 合并的结果是合并基和每个头之间变化的总和。
> 
> 当您将两个分支与常规合并提交合并时，这会产生一个新的提交，当它们再次合并时，它将最终成为一个合并基础，因为现在有一个新的共同祖先。
> Git 不必考虑合并基础之前发生的更改，因此您不必重新解决之前解决的任何冲突。
> 
> 执行 squash 合并时，不会创建合并提交；相反，来自一侧的更改将作为常规提交应用到另一侧。
> 这意味着这些分支的合并基础不会改变，因此当 Git 执行下一次合并时，它会考虑它上次考虑的所有更改以及新的更改。
> 这意味着任何冲突都可能需要重新解决。
> 同样，使用 、 或 GUI 中的符号的任何内容都将`...`导致显示自原始合并基础以来的所有更改。`git diff``git log`
> 
> 因此，如果您想重复合并两个长期存在的分支，最好始终使用常规合并提交。

# php - 在 PHP 中使用命名空间解析 XML

> ID：11797906
> 
> 赞同：0
> 
> 时间：2012-08-03T14:39:48.270
> 
> 标签：php, xml, xml-parsing, simplexml

我搜索了高低，我找不到我的情况的直接答案。我有以下 XML：

```
<Tims xmlns="http://my.url.com/namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://my.url.com/namespace http://my.url.com/xsd/Tims.xsd">
<Database xlink:href="http://my.url.com/xml/performance/database.svc">
    <ProjectID xlink:href="http://my.url.com/xml/Tvq11p/project.svc" title="Title1">Tvq11p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq10p/project.svc" title="Title2">Tvq10p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq8p/project.svc" title="Title3">Tvq8p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq9p/project.svc" title="Title4">Tvq9p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq5p/project.svc" title="Title5">Tvq5p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq15p/project.svc" title="Title6">Tvq15p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq2p/project.svc" title="Title7>Tvq2p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq3p/project.svc" title="Title8">Tvq3p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq12p/project.svc" title="Title9">Tvq12p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq13p/project.svc" title="Title10">Tvq13p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq14p/project.svc" title="Title11">Tvq14p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq1p/project.svc" title="Title12">Tvq1p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq4p/project.svc" title="Title13">Tvq4p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq6p/project.svc" title="Title14">Tvq6p</ProjectID>
    <ProjectID xlink:href="http://my.url.com/xml/Tvq7p/project.svc" title="Title15">Tvq7p</ProjectID>
</Database>
<Timestamp>2012-08-03T09:47:06-04:00</Timestamp>
<ExecutionTime>0.01</ExecutionTime>
</Tims> 
```

我要做的就是提取每个`ProjectID`节点的属性和值..

我尝试过 DOM、SimpleXML 和 XMLParser。这一切都在 PHP 中，但是，我实际上对其他语言持开放态度，只要它们可以从 Unix 命令行执行。

谢谢！

**更新** 我的尝试：当我尝试失败时，我大部分都删除了我的尝试。我最新的迭代是这样的：

```
$return = send_request($requestUri, TIMS_REQUEST_TIMEOUT); // returns SimpleXMLElement
$return->registerXPathNamespace('e', 'http://www.webex.com/schemas/2002/06/service/event');
foreach($return->xpath('//ProjectID') as $project) {
    $project->registerXPathNamespace('xlink', 'http://www.w3.org/1999/xlink');
    print_r($project);
} 
```

我的`print_r`从不开火。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:02:16.293

对于这样一个简单的 XML 模式，您不需要使用 XPath。试试这个：

```
foreach( $xml->Database->ProjectID as $el) {
    $attributes = $el->attributes( 'xlink', true);
    echo $attributes['href'] . ' ' . $el . "\n";
} 
```

这是循环所有`ProjectID`节点并获取`href`属性并打印节点的内容。在修复属性中缺少的引号后，这[对我有用。](http://viper-7.com/PF0Zkw)`title="Title7`

# jquery - jQuery移动添加元素与类

> ID：11797907
> 
> 赞同：0
> 
> 时间：2012-08-03T14:39:56.523
> 
> 标签：jquery, class, mobile, element, add

我将项目添加到列表中，但它们不是连接的类。如何进行额外的清关？我使用 listview 缩略图。

```
<div class="content-primary" >    
<ul data-role='listview' id="games_list"><li>
 <a href='index.html'>
 <img src='images/default.png'/>
 <h3>aaaaaaaaa</h3>
 <p>bbbbbbb</p>
 </a>
 </li>
</ul>
</div> 
```

和脚本：

```
for (i = 0; i < response.data.length; ++i)
{
    games_list += "<li>\r\n\t<a href='index.html'>\r\n\t\t<img src='images/"+response.data[i].icon+"'/>\r\n\t\t<h3>"+response.data[i].name+"</h3>\r\n\t\t<p>"+response.data[i].description+"</p>\r\n\t</a>\r\n</li>\r\n";
}
$("#games_list").append(games_list); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:53:29.030

我不明白你的问题，但你的追加必须在你的循环内

```
for (i = 0; i < response.data.length; ++i)
{
    games_list += "<li>\r\n\t<a href='index.html'>\r\n\t\t<img src='images/"+response.data[i].icon+"'/>\r\n\t\t<h3>"+response.data[i].name+"</h3>\r\n\t\t<p>"+response.data[i].description+"</p>\r\n\t</a>\r\n</li>\r\n";
$("#games_list").append(games_list); 
} 
```

你也可以使用 each 而不是你的循环，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:03:19.217

您是否在问如何将类附加到您附加的项目？只需将其添加到附加代码中：

```
 myClass='foobar'
    games_list += "<li class='' + myClass + ''>\r\n\t<a href='index.html'>\r\n\t\t<img src='images/"+response.data[i].icon+"'/>\r\n\t\t<h3>"+response.data[i].name+"</h3>\r\n\t\t<p>"+response.data[i].description+"</p>\r\n\t</a>\r\n</li>\r\n"; 
```

我认为这就是您要问的，但如果不是，请澄清。

# c# - 如何检查字符串中的换行数？

> ID：11797908
> 
> 赞同：0
> 
> 时间：2012-08-03T14:39:57.873
> 
> 标签：c#

我有一个用来保存文本的字段。我要将文本保存在 HTML 文本区域中，但我需要设置行数。

如何计算字符串中的换行数，以便设置 textarea 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:47:49.220

使用`LINQ`：

```
int lineCount = text.Count(c => c == '\n'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:48:46.257

换行符是一个或两个字符，具体取决于系统。在windows系统上是两个字符的组合`\r\n`，但是数的时候只能找其中一个。

由于字符串是可枚举的，因此可以使用`Count`扩展方法：

```
int cnt = str.Count(c => c == '\n'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:43:14.313

试试这个代码扩展方法。

```
public class static Extension
{
    public static int CountStringOccurrences(this string text, string pattern)
        {
        // Loop through all instances of the string 'text'.
        int count = 0;
        int i = 0;
        while ((i = text.IndexOf(pattern, i)) != -1)
        {
            i += pattern.Length;
            count++;
        }
        return count;
        }
} 
```

采用

```
var text = "Sam dfdfgdf Sam.";
text.CountStringOccurrences("Sam")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:46:17.303

您可以使用[`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
int lines = stringVariable.Split('\n').Length + 1; 
```

或者，您可以使用[`Enumerable.Count`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)：

```
int lines = stringVariable.Count(s => s == '\n') + 1; 
```

（这两个示例都假设您的字符串不包含尾随换行符。）

但是，如果您的任何文本行比您的 宽，这不一定会给您所需的内容`textarea`，因为它们的文本会换行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:47:24.053

您也可以使用正则表达式

```
int count =  new Regex(@"\n").Matches(inputstr).Count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:50:54.663

其他方式;

```
 int lines = str.Length - str.Replace("\n", "").Length; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-03T14:54:18.657

这将取决于文本区域中的列数。尝试这样的事情：

```
StringBuilder mystring = new StringBuilder(@"Hey this is a fairly long string which I used in this /
example to show how long strings might be broken up into different lines based on how  /
wide your text area is. What is going to happen is we are about to insert a newline  /
after however many characters the textarea is wide. We'll also count the number of   /
newlines that we put in, and that number plus one will be the number we need for the  /
textarea!");

int columnCounter = 0;
int lineCounter= 1; //1 for the first line
const int COLUMNS_IN_TEXT_AREA = howeverManyColsYouHave;
for(int i = 0; i<mystring.Length;i++) //set to less than mystring.length, just in case the string were really short.
{
    if(columnCounter >= COLUMNS_IN_TEXTAREA)
    {
        mystring.Insert(i,"\n");
        lineCounter ++;
    }
} 
```

现在将字符串生成器和行数作为 JSon 或其他内容发送到您的视图中，瞧！

# jquery - 如何禁用 Bootstrap Collapse 的 API 点击事件

> ID：11797910
> 
> 赞同：0
> 
> 时间：2012-08-03T14:40:11.027
> 
> 标签：jquery, twitter-bootstrap

我在我正在处理的项目中使用 Twitter 的 Bootstrap 'Collapse' 插件（[文档](http://twitter.github.com/bootstrap/javascript.html#collapse)）。我真的不喜欢必须单击每个父元素才能切换可折叠项目，因此我编写了自己的脚本来显示和隐藏悬停而不是单击时的可折叠项目。

这是脚本代码：

```
$(function spark_item_hover() {
    $(this).on('mouseenter.collapse.data-api', '[data-toggle=collapse]', function() {
        var $this = $(this), target = $this.attr('data-target')
        , option = $(target).data('collapse') ? 'show' : $this.data()
        $(target).collapse();
        $(target).show('true');
    })
    $(this).on('mouseleave.collapse.data-api', '[data-toggle=collapse]', function() {
        var $this = $(this), target = $this.attr('data-target')
        , option = $(target).data('collapse') ? 'hide' : $this.data()
        $(target).hide('true');
    })   
}) 
```

以下是我在 HTML 中调用脚本的方式（删除了不相关的内容）：

```
<li class="spark-item" onhover="spark_item_hover()" data-target="#context155" data-toggle="collapse">
    <div class="span11">
        <div class="row-fluid">
            <div id="context155" class="collapse" style="height: auto; display: none;"></div>
        </div>
    </div>
</li> 
```

这基本上做了我想要它做的事情：当我将鼠标悬停在折叠的项目上时它会显示它，当我离开时它会隐藏它。唯一的问题是，API 中定义的点击事件（[此处](http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js)底部）仍在使用；当我单击父元素时，它仍然会切换可折叠项。我想知道是否有办法从 API 禁用点击切换？我仍然希望能够在元素内部单击（因为它包含指向其他页面的链接）；我只是不希望它切换可折叠项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:02:06.163

您可以使用另一个切换令牌：`[data-toggle=hovercollapse]`。这样插件将不会被启用。

# c# - 使用 C# 反序列化 GWT-RPC 响应

> ID：11797911
> 
> 赞同：2
> 
> 时间：2012-08-03T14:40:12.730
> 
> 标签：c#, parsing, deserialization, gwt-rpc

是否可以使用 C# 解析或反序列[化 GWT-RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)响应？我似乎找不到任何关于这种〜序列化格式的有用信息。

我从服务中得到以下响应并想使用它的内容；

`//OK[0,1,10,'Tjsknq4',4,6,9,'Tjsknq4',4,11,2,0,1,10,'TjsdwN4',4,6,9,'TjsdwN4',4,8,2,0,1,7,'TjskEwg',4,6,5,'TjskEwg',4,3,2,3,1,["java.util.ArrayList/3821976829","com.initka.onlineinfo.server.datamodel.DepartureInformation/3749734003","49 min","java.util.Date/1659716317","String1","844","A","22 min","String2","B","52 min"],0,6]` [稍作修改]

我知道它用于使用 Java 和 Javascript 在服务器和客户端之间进行通信，但它也可以在 C# 中反序列化，还是需要数​​据模型“DepartureInformation”？

缩小的 Javascript 使用响应来根据“java.util.ArrayList”/“DepartureInformation”中的数据填充列表，输出类似于以下示例；

*   844，String2，B，22 分钟
*   844，String1，A，49 分钟
*   844，String2，B，52 分钟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T13:46:15.960

我强烈建议从 GWT-RPC 切换到 RestyGWT ( [https://resty-gwt.github.io/](https://resty-gwt.github.io/) )。它是一个漂亮/简单的基于 REST 的 GWT 客户端。切换后，您只需在服务器端实现一个基于 C# REST 的 Web 服务，所有 json 都会为您序列化为“DepartureInformation”对象的集合（假设属性名称匹配）。

# c# - 在 Metro Windows 8 中将 ImageSource 转换为 WriteableBitmap

> ID：11797915
> 
> 赞同：5
> 
> 时间：2012-08-03T14:40:41.850
> 
> 标签：c#, windows-runtime, windows-store-apps, writeablebitmap, imagesource

我想知道如何将`ImageSource`对象（在我的情况下是图像元素的源属性）转换为`WriteableBitmap`. 构造`WriteableBitmap(BitmapSource)`函数在 Windows 8 Metro 中不起作用，所以我不能这样做。

我试图将`ImageSource`对象加载到流中然后使用`WriteableBitmap.SetSource(stream)`，但我也不知道如何将图像加载到流中。

```
InMemoryRandomAccessStream ras = new InMemoryRandomAccessStream();
BitmapEncoder enc = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, ras);

byte[] pixelArray = new byte[(uint)photoBox.Height * (uint)photoBox.Width * 4];

enc.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight,
                 (uint)photoBox.Width, (uint)photoBox.Height, 96, 96, pixelArray); 
```

我还添加了我在网上找到的这个辅助方法：

```
public Byte[] BufferFromImage(BitmapImage imageSource)
{
    Stream stream = imageSource.StreamSource;
    Byte[] buffer = null;
    if (stream != null && stream.Length > 0)
    {
        using (BinaryReader br = new BinaryReader(stream))
        {
            buffer = br.ReadBytes((Int32)stream.Length);
        }
    }

    return buffer;
} 
```

问题是`BitmapImage`不再有`StreamSource`方法了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:13:08.840

WinRT XAML 平台在位图类中有一些不幸的限制。[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)有一个您可以查看的[FromBitmapImage方法。](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/16916#309183)它基本上采用原始源并基于该源加载 WriteableBitmap。目前它仅限于安装应用程序的位图，但这应该很容易扩展到来自网络的文件（例如，使用[WebFile](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/16916#309191)类下载图像）。您需要执行一些特定于应用程序的代码的唯一情况是，如果您使用 SetStream 加载 BitmapImage - 原始 Uri 会丢失，但在这种情况下 - 您也可以使用 WriteableBitmap 而不是 BitmapImage 和可以在 WriteableBitmaps 之间复制像素/字节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T17:08:10.537

我在 MSDN 论坛上得到了答案。

> 无法从 ImageSource 中提取图像数据。您将需要跟踪信息的原始来源，并从原始来源在 WriteableBitmap 中重新创建图像。如果您知道您将需要这样做，您最好只使用 WriteableBitmap 作为您的 ImageSource 开始。

[来源](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/c059b1f9-8a28-47c2-a259-3ab561c6e49a)

# java - linux和windows之间的java剪贴板

> ID：11797919
> 
> 赞同：-1
> 
> 时间：2012-08-03T14:40:57.110
> 
> 标签：java, linux, awt, clipboard

我正在使用以下标准 java 代码将字符串复制到剪贴板。

```
StringSelection ss = new StringSelection("abc");
Toolkit.getDefaultToolkit().getSystemClipboard().setContents(ss, ss); 
```

我在 windows 上运行 java 代码，并且可以粘贴到任何其他 windows 应用程序中。

我想要的是能够在 Linux 服务器上运行 Java 代码（通过 Putty），并且仍然能够粘贴到 Windows 应用程序，例如 Excel/记事本。或者有没有更好的方法来使用复制/粘贴样式在 linux/windows 之间共享内容（主要是文本）？（假设在 linux 上复制并在 windows 上粘贴）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:14:18.030

在 Windows 上下载 VNC 客户端，您可以在 Linux 上运行 VNC 服务器[并在它们之间复制和粘贴](https://askubuntu.com/questions/41273/how-to-copy-paste-text-from-remote-system)。

# r - 通过列 [R] 中的重复元素折叠数据框

> ID：11797925
> 
> 赞同：0
> 
> 时间：2012-08-03T14:41:23.647
> 
> 标签：r, dataframe, aggregate

我被一件小事困住了。我在 R 中有一个这样的数据框

```
chrom exonCount
chr1         3
chr1         4
chr1         5
chr1         5
chr1         9
chr1        10
chr2         7
chr2        11
chr2        13
chr3         7
chr4         7 
```

我只希望输出为

```
chr1        36
chr2        31
chr3         7
chr4         7 
```

我认为**聚合**函数可以做到这一点，但我在使用中迷失了方向。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:47:42.793

我认为这个`plyr`包做的最清楚，但使用 base R

```
dat <- structure(list(chrom = c("chr1", "chr1", "chr1", "chr1", "chr1", 
"chr1", "chr2", "chr2", "chr2", "chr3", "chr4"), exonCount = c(3L, 
4L, 5L, 5L, 9L, 10L, 7L, 11L, 13L, 7L, 7L)), .Names = c("chrom", 
"exonCount"), class = "data.frame", row.names = c(NA, -11L))

aggregate(data=dat, exonCount ~ chrom, FUN=sum)

  chrom exonCount
1  chr1        36
2  chr2        31
3  chr3         7
4  chr4         7
> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T14:44:05.483

如果您想使用 plyr 包，请尝试：

```
df<-read.table(header=T,text="chrom exonCount
chr1         3
chr1         4
chr1         5
chr1         5
chr1         9
chr1        10
chr2         7
chr2        11
chr2        13
chr3         7
chr4         7
")
library(plyr)
ddply(df,.(chrom),summarise,sum(exonCount)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:47:23.123

另一种使用方法`ddply`是

```
ddply(df, .(chrom), numcolwise(sum))
  chrom exonCount
1  chr1        36
2  chr2        31
3  chr3         7
4  chr4         7 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:27:30.570

这是这里最快的方法，但不如 plyr 函数或聚合（使用 Justin 的 dat）直观：

```
x <- data.frame(sort(unique(dat$chrom)), 
    unlist(lapply(split(dat$exonCount, dat$chrom), sum)))
colnames(x) <- colnames(dat)
rownames(x) <- NULL
x 
```

这是这里第二快的方法：

```
x <- tapply(dat$exonCount, dat$chrom, sum)
x <- data.frame(names(x), x)
names(x) <- names(dat); rownames(x) <- NULL
x 
```

data.table 包在这里的基准测试中要慢一些，因为 1）我弄乱了语法，或者 2）它是为更大的问题而设计的，并且没有显示它在这样的假数据集上有多好：

```
library(data.table)  
dat2 <- data.table(dat)
dat2[,list(pop=sum(exonCount)), list(chrom)] 
```

# php - $_POST 数组不应该按 DOM 顺序排列吗？

> ID：11797927
> 
> 赞同：-2
> 
> 时间：2012-08-03T14:41:25.777
> 
> 标签：php, arrays, forms, post

我有一个看起来像这样的表格

```
<table class="audio_channels">
    <tbody>
        <tr class="channel">
            <td>
                <label>Field1</label><br>
                <select name="value[][field1]">
                    <option value="option">option</option>
                </select>
            </td>
            <td>
                <label>Field2</label><br>
                <select name="value[][field2]">
                    <option value="option">option</option>

                </select>
            </td>
            <td>
                <label>Field3</label><br>
                <select name="value[][field3]">
                    <option value="option">option</option>
                </select>
            </td>
            <td>
                <label>Field4</label><br>
                <select name="value[][field4]">
                    <option value="option">option</option>
                </select>
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr class="channel">
            <td>
                <label>Field1</label><br>
                <select name="value[][field1]">
                    <option value="option">option</option>
                </select>
            </td>
            <td>
                <label>Field2</label><br>
                <select name="value[][field2]">
                    <option value="option">option</option>
                </select>
            </td>
            <td>
                <label>Field3</label><br>
                <select name="value[][field3]">
                    <option value="option">option</option>
                </select>
            </td>
            <td>
                <label>Field4</label><br>
                <select name="value[][field4]">
                    <option value="option">option</option>
                </select>
            </td>

        </tr>
    </tbody>
    <tbody>
    </tbody>
</table> 
```

我`[]`用来自动增加动态添加的字段，它在一种形式上工作得很好，但在另一种形式上，var_dump`$_POST['value']`看起来像：

```
array(8) {
  [0]=>
  array(1) {
    ["field1"]=>
    string(6) "option"
  }
  [1]=>
  array(1) {
    ["field1"]=>
    string(6) "option"
  }
  [2]=>
  array(1) {
    ["field2"]=>
    string(6) "option"  }
  [3]=>
  array(1) {
    ["field2"]=>
    string(6) "option"  }
  [4]=>
  array(1) {
    ["field3"]=>
    string(6) "option"  }
  [5]=>
  array(1) {
    ["field3"]=>
    string(6) "option"  }
  [6]=>
  array(1) {
    ["field4"]=>
    string(6) "option"  }
  [7]=>
  array(1) {
    ["field4"]=>
    string(6) "option"  }
} 
```

注意 field1, field1 然后是 field2, field2.. 而不是逐行进行（这发生在文档的其他地方。）

为什么会这样？我读过的所有内容都表明，应该按照它们在 DOM 中出现的顺序将它们放入 $_POST 变量中，而这似乎不是这样做的。

我可能必须对递增键进行硬编码才能确定，但​​我很好奇为什么当我读到的所有内容都暗示它应该是 DOM 顺序时它会以这种方式出现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:43:01.583

改变

```
value[][fieldX] 
```

至

```
value[fieldX] 
```

也许您需要将这些值分组为：

```
value[groupX][fieldX] 
```

例如

```
value[row1][field1]
value[row1][field2]
value[row1][field3]

value[row2][field1]
value[row2][field2]
value[row2][field3] 
```

# indexing - lua 索引一个 nil 值

> ID：11797929
> 
> 赞同：1
> 
> 时间：2012-08-03T14:41:32.750
> 
> 标签：indexing, lua, null

到目前为止，我一直在谷歌搜索这个问题无济于事，所以我想知道是否有人知道答案 - 当你在 lua 中索引一个 nil 值时，脚本会引发一个错误 - 尝试索引“variableName” - 一个 nil 值 - 是吗有可能用可能是元方法来捕获它，做一些处理而不是出错吗？例如，如果变量 'num' 没有定义并且你说 'num = 2' 你可以设置 __newindex 元方法来做一些处理并且你有变量名 - 'num' 和值 - '2' 在堆栈上，但是如果你说 'num[2] = 3' 并且 'num' 没有定义你会出错 - 就像 __newindex 一样，我想捕获该事件并访问 nil 变量的名称 - 'num'， index - 2，设置值 - 3。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:50:16.443

您可以覆盖全局表上的 __newindex 元方法。

```
function OnNewIndex(tbl, key, value)
    if tbl[key] == nil then
        print(tostring(key).. " doesn't exist.")
    end
end

setmetatable(_G, { __newindex = OnNewIndex })

num = 15 
```

但是，默认情况下，我不相信 lua 有这种行为。只是做类似的事情：

```
num = 15 
```

应该只将变量“num”声明为全局变量并将值 15 分配给它。您是否将 lua 用作某些对此进行严格检查的框架的一部分？

编辑：在不让它冒泡的情况下“捕捉”这个错误的一种简单方法是将赋值包装在这样的 pcall 中......

```
pcall(function() num[2] = 15 end) 
```

如果你打印这个，你会得到输出：

```
false   test2.lua:18: attempt to index global 'num' (a nil value) 
```

这至少给了你一些关于发生了什么的迹象，如果你命名了这个函数，我猜你可能会尝试恢复。

```
function TrySetValue()
    num[2] = 15
end

local result, msg = pcall(TrySetValue)
if (not result) then
    num = {}
end

result, msg = pcall(TrySetValue)
print(result, msg)
print(num[2]) 
```

当您可能只是预先修复代码时，这似乎是一项非常艰巨的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:18:36.020

首先，如果您陈述您要解决的问题，则更容易提供帮助。您是否试图防止使用未初始化的全局变量？您可以使用元表来做到这一点。您是否试图确保脚本错误永远不会渗透到您的应用程序中？你可以用`pcall`. 您真的只是想抓住`nil`全局的这一特定用法，并以某种方式从中恢复吗？您提供的上下文越多，其他人就越容易找到您可能没有想到的解决方案。

至于你描述的情况，你想捕捉`num[index]`where `num`is `nil`，你并不能真正直接检测到。

这有两个部分：

1.  `num`从当前环境表（又名 _ENV 或 _G）中读取的当前值时
2.  当您尝试索引该值时。

您无法检测到＃2，因为`nil`它不是表，所以您不能给它一个元表。

但是，您*可以*检测到 #1。根据您的要求，您*可以*使用 #1 返回一个代理对象，然后该对象将允许您检测 #2，但这意味着永远不会有全局`nil`，因此这样的逻辑将不起作用：

```
--- initialize globalFoo if it doesn't exists
if not globalFoo then
    globalFoo = CreateGlobalFoo()
    .... 
```

当然，你总是可以做一些事情，比如命名你的代理对象`NIL`，所以你可以写：

```
if globalFoo == NIL then -- globalFoo is not initilalize
    globalFoo = CreateGlobalFoo() 
```

像这样工作的代理对象的示例：

```
local nil_proxy_mt = {
    __index    = function(t,k)   print('Attempted to index nil!') end,
    __newindex = function(t,k,v) print('Attempted to index nil!') end,
}

local NIL = setmetatable({}, nil_proxy_mt)

setmetatable (_G, { __index = function(t,k) return NIL end }) 
```

有了这个，如果你尝试了以下任何一个：

```
foo = num[2]
num[2] = 15 
```

你会得到“尝试索引零！” 并且程序继续运行。

# php - 解析 HTML 以修剪它

> ID：11797935
> 
> 赞同：2
> 
> 时间：2012-08-03T14:41:39.613
> 
> 标签：php, html, parsing, zend-framework

假设我有以下代码：

```
<div class="content">
    <h3>Test</h3>
    <img src="#" alt="" />
    <p>Lorem ipsum</p>
    <p>dolor sit</p>
    <p><!-- pagebreak --></p>
    <p>amet</p>
</div> 
```

我想修剪我的代码并在分页后删除所有内容，但保留 html 逻辑（`</div>`）：

```
<div class="content">
    <h3>Test</h3>
    <img src="#" alt="" />
    <p>Lorem ipsum</p>
    <p>dolor sit</p>
</div> 
```

**工具：Zend，常规 PHP。**

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:06:23.997

您可以使用 xpath 来访问这些节点，如下所示：

```
$doc = new DOMDocument;
$doc->loadHTML($html); // your content with a between '<html></html>' pair
$xpath = new DOMXpath($doc);
$elements = $xpath->query('//p[contains(comment(), "pagebreak")]/following-sibling::*|//p[contains(comment(), "pagebreak")]');
foreach ($elements as $elem) {
    $elem->parentNode->removeChild($elem);
}   

print $doc->saveHTML(); 
```

xpath的一个小故障：

*   **//p**每个 P 元素。
*   **//p[]**过滤 P 的列表，就像它是一个数组一样。
*   **//p[contains(comment(), "pagebreak")]**如果他们的 comment() 值包含“pagebreak”字符串，则过滤。
*   **//p[contains(comment(), "pagebreak")]/following-sibling::***已经选择了 P 的每个后续兄弟。
*   另一部分只是一个`|`没有该部分的具有相同模式的并集 ( ) `following-sibling::*`。

### 编辑：

一个可能不那么毛茸茸的 xpath 将是：

```
//p[contains(comment(), "pagebreak")]/preceding-sibling::*[1]/following-sibling::*

```

这通过在同级列表中后退一个（此时针对`<p>`带有注释的那个之前的那个）来解决问题，并拥有该节点的`following-siblings::*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:57:47.990

我做到了 ！我把它当作个人挑战，我终于用正则表达式做到了！
这段代码可能没有优化，那么请不要犹豫告诉我如何改进它（但使用正则表达式，而不是 DOM），但它仍然有效！:)

```
$str = '<div>
    <h3>Test</h3>
    <img/>
    <p>Lorem ipsum</p>
    <p>dolor sit</p>
    <p><-- pagebreak --></p>
    <p>amet</p>
    <blockquote>
        <p>
            lol
        <p>
    </blockquote>
</div>';

$pagebreak_str = '-- pagebreak --';
$weird_replacement = '§~@';

$parsed = array();
$is_below_break = false;

while (preg_match ("#<([^/]+)>#isU",$str)) {
    if ($is_below_break) {
        $str = preg_replace ("#<" .$pagebreak_str. ">#isU", "", $str);
        $str = preg_replace ("#<[^/>]+>(.+)</[^/>]+>#isU", "", $str);
        $str = preg_replace ("#<[^/>]+/>#isU", "", $str);
    }
    else {
        $get = preg_replace ("#^(.*)<([^/>]+)>(.*)$#isU","$2",$str,1);

        if ($get == $pagebreak_str)
            $is_below_break = true;
        if (!$is_below_break)
            $str = preg_replace ("#<([^/>]+)>#isU","$weird_replacement$1>",$str,1);
        if (preg_match ("#</([^/>]+)>(.+)(<$pagebreak_str>)#isU", $str))
            $str = preg_replace ("#</([^/>]+)>#isU", "$weird_replacement/$1>", $str, 1);
    }
}
$str = preg_replace ("#$weird_replacement#isU", "<", $str);

echo $str; 
```

此代码假设您没有任何 html 编码错误，例如交叉标记 (<div><a></div></a>)，但它肯定使用正确的编码样式。
试试看，享受吧！

# linux - 如何在 Linux 中查找同时包含两个字符串的行？

> ID：11797938
> 
> 赞同：1
> 
> 时间：2012-08-03T14:41:51.313
> 
> 标签：linux, string, file, search

我想在 Linux 文件的同一行上显示包含“addUser”和“2012-08-03”字符串的行。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:47:33.897

```
awk '/addUser/ && /2012-08-03/' < file 
```

或者

```
grep addUser < file | grep 2012-08-03 
```

或者

```
sed -n 's@addUser@&@p' < file | sed -n 's@2012-08-03@&@p' 
```

或者

```
ruby -e 'File.readlines( "file" ).each {|l| puts l if l =~ /addUser/ and l =~ /2012-08-03/ }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:01:34.677

linux中的命令

echo "adduser 2012-08-03" > data.txt

查看 data.txt 文件类型 cat data.txt 的内容

或 vi data.txt

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:06:04.987

```
grep addUser filename | grep "<user>2012-08-03</user>" 
```

# python - 无效的语法错误

> ID：11797942
> 
> 赞同：1
> 
> 时间：2012-08-03T14:42:01.603
> 
> 标签：python

我的代码是：

```
if any(s in attrs["show"] for s in ("Apple Mac OS","Intel Mac OS")): 
```

错误是：

```
 if any(s in attrs["show"] for s in ("Apple Mac OS","Intel Mac OS")):
                            ^
 SyntaxError: invalid syntax 
```

我可以在一台机器上成功运行相同的脚本，然后我将它复制到另一台机器，它返回此错误，真的不知道为什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:43:15.873

你的机器上有一个旧版本的 Python，它不会运行它。就像，一个非常旧的版本；我相信这个功能是在 Python 2.4 中添加的。

# c# - 在datagridview中不断刷新

> ID：11797943
> 
> 赞同：0
> 
> 时间：2012-08-03T14:42:05.283
> 
> 标签：c#

我已经编写了代码来`DataGridView`通过`CellFormatting`. 它运作良好，但我已更改为图像的单元格会不断刷新。我应该怎么办？

这是我的代码`CellFormatting`：

```
 dgvUnknownPayed.Rows[e.RowIndex].Cells[colStateImage.Name].Value = Properties.Resources.undo; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:47:27.893

您应该修改数据源，而不是直接修改单元格。

```
Datagridview1.datasouce = datatable1.defaultview();

foreach (DataRow row in datatable1.Rows)
{
  row.BeginEdit();
  row[2] = ‘Something_Here’;
  row.EndEdit();
} 
```

如果你想停止所有刷新使用这个：

`DataGrid.SuspendLayout(); //Stops refreshing`
`DataGrid.ResumeLayout(); //Re-Enable refreshing`

[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.71%29.aspx)是一个 .Net 对象，您在这种情况下用于将数据绑定到您的`DataGridView`.

`DataTable datatable1 = new DataTable` 创建 的新实例`DataTable`。
`Datagridview1.datasouce = datatable1.defaultview();`将 datatable1 绑定为网格的数据源。这样每次表格更改时，都会更新网格。

现在要使用此表，您可以按此方式进行。（这只是一个例子）

*   您可以像这样添加列，`table.Columns.Add("Division", typeof(int));`在其中指定列的名称和将在其中输入的数据类型。就像在 SQL Server 中一样。
*   您`table.Rows.Add(Something)`在某物所在的位置添加这样的行，在本例中为`Integer`.

就这么简单。更改`Integer`任何您想要的类型。不要忘记这只是一个简单的例子。您可以添加更多的列和行。

# java - 使用带有文件的 POST 使用 Play! 进行 jUnit 测试！框架

> ID：11797946
> 
> 赞同：0
> 
> 时间：2012-08-03T14:42:15.893
> 
> 标签：java, unit-testing, playframework, http-post

我正在尝试编写一个 POST 测试，我必须将 XML 文件发送到服务器（使用 PLAY！框架）。但是，我必须做错事。运行时的结果是控制器中没有“数据”。

这是我的代码：路线：

```
POST    /server/?                               Server.index(format:'xml') 
```

控制器：

```
 public static void index(Upload data) {
        if (data != null){
                DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder builder = dbf.newDocumentBuilder();

                Document xmlDoc = builder.parse(data.asStream());
         }
       etc..
   } 
```

测试：

```
 File f = new File("request.xml");
    TransformerFactory tFactory =
            TransformerFactory.newInstance();
    Transformer transformer = tFactory.newTransformer();

    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(f);
    transformer.transform(source, result);

    Map<String,String> map = new HashMap<String,String>();
    //map.put("data", xmlString);

    Map<String,File> files = new HashMap<String,File>();

    files.put("request.xml", f);
    Http.Response response = POST("/server/", map, files);
    assertIsOk(response);

    f.delete();

    StringReader reader = new StringReader(response.out.toString());
    InputSource inputSource = new InputSource( reader );
    Document xmlDoc = builder.parse( inputSource );
    reader.close(); 
```

# jquery-ui - jquery ui timepicker onChange 事件

> ID：11797947
> 
> 赞同：5
> 
> 时间：2012-08-03T14:42:30.403
> 
> 标签：jquery-ui, jquery-ui-timepicker

我正在为 JQuery ui timepicker 插件的 onchange 苦苦挣扎：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

我正在使用以下代码。

```
$(document).ready(function ()
{
    $('#CutoffTime').timepicker({ stepMinute: 15 });
}); 
```

// 试图捕获更改事件

```
$(function ()
{
    $('#CutoffTime').change(function ()
    {
        // do something heree
    });
}); 
```

// 我的 HTML

```
<input type="text" id="CutoffTime" /> 
```

由于某种原因，它似乎陷入了无限循环？有没有更好的方法来实现我所需要的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T14:48:29.130

如果您向下看页面，他们有一个使用 onselect 的示例

```
$('#CutoffTime').datetimepicker({
    stepMinute: 15,
    onSelect: function(dateText, inst){
        if(window.console)
            console.log(dateText);
    }
}); 
```

# java - 为什么 OpenEntityManagerInViewFilter 不执行脏检查？

> ID：11797948
> 
> 赞同：1
> 
> 时间：2012-08-03T14:42:32.687
> 
> 标签：java, hibernate, jpa, spring-mvc

我在 Spring MVC 控制器中使用 JPA 延迟加载（但它可能是一个临时的 servlet）。我找到了一个与 Author 具有 @ManyToOne 惰性关系的 Book 实体。

```
@Entity
public class Book extends BaseEntity {
    private String isbn;
    private String title;

    @ManyToOne(fetch= FetchType.LAZY)
    private Author author;

    private int price; 
```

SpringMVC 控制器对其进行了查找（为了示例，我简化了代码）：

```
@Controller
public class EditBookController {

    @Autowired    BookDao bDao;

    @RequestMapping(value={"/updatebook"})
    public String updateBook(@RequestParam("id")Long id) {
        Book book = bDao.find(id);
        System.out.println( book.getAuthor().getFirstName() ); // Lazy loading FAIL
        return “bookView”;
    } 
```

BookDao.find() 在其祖先 BaseRepository 中定义：

```
@Transactional
@SuppressWarnings("unchecked")
public class BaseRepository<E extends BaseEntity> {
    Class entityClass;

    public E find(Long id){
        return ( E ) em.find( entityClass, id );
    } 
```

当然它会在控制器中触发 LazyInit 异常。所以我添加了过滤器 OpenEntityManagerInViewFilter 并且它工作正常：书实体不再在控制器中分离。

现在，我想在控制器中修改这本书。例如，我调用 book.setPrice(4);

```
@RequestMapping(value={"/updatebook"})
public String updateBook(@RequestParam("id")Long id) {
    Book book = bDao.find(id);
    System.out.println( book.getAuthor().getFirstName() ); // Lazy loading OK
    book.setPrice(4);
    return “bookView”;
} 
```

我希望 Hibernate 进行脏检查，检测到该书的值已更改，然后保存它。它会在关闭 EntityMangager 时由 OpenEntityInViewFilter 触发。

但是我的（非分离的）托管实体不会触发对数据库的更新，除非我明确调用 em.merge(book)。

有人可以向我解释为什么在这种情况下脏检查不活跃吗？非常感谢！

Spring v3.1.2 休眠 v4.1.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:49:42.463

你用什么来管理交易？

如果 spring 正在管理它们，那么您需要在控制器方法中添加 @Transactional。@Transactional 注释用于划分事务开始的位置，因此您遇到的问题是 spring/hibernate 不知道`updateBook()`返回时需要保留任何更改。OpenEntityManagerInViewFilter 不提交事务（但您可能想要编写自己的执行提交的实现）。

在我看来（其他人可能不同意），使用 @Transactional 注释应用程序的入口点是一种很好的做法，它们可能是控制器、JMS 消费者或其他任何东西。

# asp.net - ASP.NET Listview 隐藏字段值为空 onselect

> ID：11797951
> 
> 赞同：0
> 
> 时间：2012-08-03T14:42:36.460
> 
> 标签：asp.net, vb.net, listview

我搜索了很多问题，阅读了很多解决方案，但仍然没有找到解决我正在努力解决的问题的解决方案：我的列表视图显示了目录中的一些图片，但有时我忘记旋转图片，那里我想要一个按钮来选择一个项目，然后是一个按钮来旋转显示的图片。但我无法解析保存 URL 值的 2 个隐藏字段中的值。我得到起始值而不是评估值：

```
Dim URLorg As HiddenField = TryCast(FotoListView.Items(FotoListView.SelectedIndex).FindControl("URLorigineel"), HiddenField) 
```

**URLorg.value 给出 >> "../<%# Eval("URLoriginel") %>"**

来源：

```
<asp:ListView runat="server" ID="FotoListView"    ItemPlaceholderID="PlaceHolder3"     DataSourceId='odsAvailableFotos' DataKeyNames="ID">
    <LayoutTemplate>
        <ul>
            <div style="overflow:scroll; height:380px;">                                             <asp:PlaceHolder runat="server" ID="PlaceHolder3" /> 
            </div> 
        </ul>
    </LayoutTemplate>
    <ItemTemplate>
        <li>
            <hr />
            <asp:LinkButton runat="server" ID="LinkButton1" Text="Select" CommandName="Select" BackColor="#33CCFF" BorderColor="#003399" Width="70"  CssClass="PhotoEditBtn" Height="15" />  
            <a href='../<%# Eval("URLorigineel") %>' target="_blank" id="ImageRef"><%# Eval("Caption")%><br />
                <img src='../<%# Eval("URL") %>' alt="Click to see image"  class="Rounded_image_sample" id="ImgSource" />
            </a> 
            <asp:HiddenField ID="URL" runat="server" Value='../<%# Eval("URL") %>' />
            <asp:HiddenField ID="URLorigineel" runat="server" Value='../<%# Eval("URLorigineel") %>' />
        </li>
    </ItemTemplate>
    <SelectedItemTemplate>
        <li>
            <hr />
            <asp:LinkButton runat="server" ID="LinkButton1" Text="Delete" CommandName="Delete" BackColor="#33CCFF" BorderColor="#003399" Width="70"  CssClass="PhotoEditBtn" Height="15" />  
            <asp:Label ID="dummy1" runat="server" text="     " />
            <asp:LinkButton runat="server" ID="LinkButton2" Text="Rotate" CommandName="Rotate" CssClass="PhotoEditBtn" BackColor="#33CC33" Width="70" Height="15" /> 
            <asp:LinkButton runat="server" ID="LinkButton3" Text="Cancel" CommandName="ANnuleer" CssClass="PhotoEditBtn" BackColor="#33CC33" Width="70" Height="15" />
            <br />
            <a href='../<%# Eval("URLorigineel") %>' target="_blank" id="ImageRef"><%# Eval("Caption")%><br />
                <img src='../<%# Eval("URL") %>' alt="Click to see image"  class="Rounded_image_sample" id="ImgSource" />
            </a> 
            <asp:HiddenField ID="URL" runat="server"  Value='../<%# Eval("URL") %>' />
            <asp:HiddenField ID="URLorigineel" runat="server" Value='../<%# Eval("URLorigineel") %>' />
        </li>
    </SelectedItemTemplate>

</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:01:21.817

您可以尝试使用此代码

```
Value='<%# string.Format("{0}{1}",'../',Eval("URL")) %>' 

Result :  <asp:HiddenField ID="URL" runat="server" Value='<%# string.Format("{0}{1}",'../',Eval("URL")) %>'  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:33:36.937

我找到了解决方案。Listview headertag中有一个字段“DataKeyNames =”，您可以在需要时设置和参考。就我而言，这足以使服务器端功能正常工作。

谢谢

# objective-c - iOS：在屏幕上捕获 CAEmitterLayer 粒子

> ID：11797952
> 
> 赞同：6
> 
> 时间：2012-08-03T14:42:38.857
> 
> 标签：objective-c, ios, screen-capture, particles, caemitterlayer

在捕获 ios 设备屏幕时，有没有办法捕获 CAEmitterCells（使用 CAEmitterLayer 生成）？
**UIGetScreenImage()**有效，但由于它是私有方法，因此我不允许使用它。
**UIGraphicsBeginImageContext**似乎不起作用，粒子只是从生成的图像中省略了。

**编辑：** 这是我目前用来捕获视图的代码。实际上，我正在使用 aroth 在[此处](http://codethink.no-ip.org/wordpress/archives/673)提供的代码录制一段 30 秒长的屏幕视频。它的工作原理是每秒记录 25 个自身的图像（它的 UIView 子类）及其子视图（在我们的例子中包括层是 CAEmitterLayer 的 UIView），并使用 AVAssetWriter 来组合记录。

非常拗口，所以我将相关行放在这里：我使用 XCode 中的 ARC 工具对代码进行了 ARC 编辑，因此代码在内存管理方面可能有点不同。

```
- (CGContextRef) createBitmapContextOfSize:(CGSize) size {
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    bitmapBytesPerRow   = (size.width * 4);
    bitmapByteCount     = (bitmapBytesPerRow * size.height);
    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (bitmapData != NULL) {
        free(bitmapData);
    }
    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL) {
        fprintf (stderr, "Memory not allocated!");
        return NULL;
    }

    context = CGBitmapContextCreate (bitmapData,
                                     size.width,
                                     size.height,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaNoneSkipFirst);

    CGContextSetAllowsAntialiasing(context,NO);
    if (context== NULL) {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
        return NULL;
    }
    CGColorSpaceRelease( colorSpace );

    return context;
}

//static int frameCount = 0;            //debugging
- (void) drawRect:(CGRect)rect {
    NSDate* start = [NSDate date];
    CGContextRef context = [self createBitmapContextOfSize:self.frame.size];

    //not sure why this is necessary...image renders upside-down and mirrored
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, self.frame.size.height);
    CGContextConcatCTM(context, flipVertical);

    [self.layer renderInContext:context];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage* background = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);

    self.currentScreen = background;

    //debugging
    //if (frameCount < 40) {
    //      NSString* filename = [NSString stringWithFormat:@"Documents/frame_%d.png", frameCount];
    //      NSString* pngPath = [NSHomeDirectory() stringByAppendingPathComponent:filename];
    //      [UIImagePNGRepresentation(self.currentScreen) writeToFile: pngPath atomically: YES];
    //      frameCount++;
    //}

    //NOTE:  to record a scrollview while it is scrolling you need to implement your UIScrollViewDelegate such that it calls
    //       'setNeedsDisplay' on the ScreenCaptureView.
    if (_recording) {
        float millisElapsed = [[NSDate date] timeIntervalSinceDate:startedAt] * 1000.0;
        [self writeVideoFrameAtTime:CMTimeMake((int)millisElapsed, 1000)];
    }

    float processingSeconds = [[NSDate date] timeIntervalSinceDate:start];
    float delayRemaining = (1.0 / self.frameRate) - processingSeconds;

    CGContextRelease(context);

    //redraw at the specified framerate
    [self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:delayRemaining > 0.0 ? delayRemaining : 0.01];
} 
```

真的希望这会有所帮助。谢谢你的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:46:29.133

你试过用`-[CALayer renderInContext:]`吗？

# ios - cocos2d 不能异步添加子

> ID：11797959
> 
> 赞同：0
> 
> 时间：2012-08-03T14:42:55.713
> 
> 标签：ios, asynchronous, cocos2d-iphone, cclayer

我需要从数据库中检索一些数据以显示在屏幕上。我想避免应用程序阻塞，因此在检索任何数据并添加数据之前显示下一个屏幕。

这是在屏幕上添加我需要的信息的方法：

```
- (void)initInfo
{
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    CCMenu *infoMenu;

    // get the info in seperate thread since it may block
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        infoMenu = [PlayerInfoHelper generateInfoForPlayerWithId:[PlayerManager sharedInstance].activePlayer.objectId tag:-1 sender:self];

        dispatch_async(dispatch_get_main_queue(), ^{
            if (infoMenu != nil) {
                infoMenu.position = ccp(winSize.width - kSSInfoPaddingX, winSize.height - kSSInfoPaddingY);
                [self addChild:infoMenu z:zIndex++]; // (1)
            }
        });
    });
} 
```

generateInfoForPlayerWithId:tag:sender: 方法可能会阻塞，这就是我将它放在自己的线程中的原因。我在主线程中添加菜单，因为它是 UI 更新。

我确信 infoMenu 是正确的 CCMenu* 对象。

当我没有注释掉 // (1) 指示的行时，我得到一个 EXC_BAD_ACCESS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:46:16.400

要在后台线程中运行 Cocos2D，您需要创建一个新的 EAGLContext。像这样：

```
- (void)createMySceneInBackground
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    EAGLContext *k_context = [[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1 sharegroup:[[[[CCDirector sharedDirector] openGLView] context] sharegroup]] autorelease];
    [EAGLContext setCurrentContext:k_context];

    if (infoMenu != nil) {
        infoMenu.position = ccp(winSize.width - kSSInfoPaddingX, winSize.height - kSSInfoPaddingY);
        [self addChild:infoMenu z:zIndex++]; // (1)
    }

    [pool release];
} 
```

祝你好运！

# .net - 汇总结果集 SQL Server

> ID：11797960
> 
> 赞同：0
> 
> 时间：2012-08-03T14:42:59.757
> 
> 标签：.net, sql-server, sql-server-2008

我有这样生成的数据

```
RowNumber   Firmware   value1   value2
    1          1          5      NULL
    1          1         NULL    NULL
    1          1         NULL    NULL 
```

知道如何使用 TSQL 将其分组以获得单行吗？

输出应该是

```
RowNumber Firmware  value1 value2
    1        1          5      NULL 
```

'value1' 和 'value2' 的值为 NULL 的行应该被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:47:31.123

为什么不

```
...
where 
          not value1 is null
      or  not value2 is null 
```

通过这种方式，您可以消除 value1 和 value2 具有 NULL 值的行，并且只获得一行而不使用 group by。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:25:52.150

```
Select 
        RowNumber, 
        FirmWare, 
        MAX(Value1) as Value1, 
        MAX(Value2) as Value2 

from    Table

Group by 
        RowNumber, FirmWare 
```

# windows - 在 winRT 应用程序中使用条码扫描器

> ID：11797965
> 
> 赞同：0
> 
> 时间：2012-08-03T14:43:02.843
> 
> 标签：windows, windows-8, microsoft-metro, windows-runtime, barcode-scanner

我想创建一个新的 winRT (metro) 应用程序。但是，我必须在此应用程序中处理来自条形码扫描仪的输入。我在这里和那里搜索过，但直到现在还没有找到任何关于做这种事情的指导。或者，如果这在 Metro 风格应用程序中甚至是可能的。所以： - 有可能吗？- 也许一个关于如何做到这一点的例子？

注意：目前如果我只有 USB 条形码扫描仪的解决方案就可以了。其他（串行，蓝牙）很好但不是必需的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:58:53.130

正如评论中所说，条形码扫描仪充当键盘，即如果您专注于文本字段并扫描某些内容，那么文本字段会与扫描的数字一起感受。一些条码扫描器被编程为在输入扫描序列后输入一个转义字符（例如回车），因此您可以监控文本字段，如果您发现这个转义字符然后触发一个动作，而不是等待用户按 enter 或按下按钮。我一直在使用的条形码扫描仪的文档中有一些带有“特殊条形码”的页面，您可以打印和扫描这些页面，以便在不安装驱动程序或配置应用程序的情况下对设备进行编程。

# android - 如何用 java 语言编写关于相对布局的 XML 代码

> ID：11797971
> 
> 赞同：0
> 
> 时间：2012-08-03T14:43:29.293
> 
> 标签：android, android-layout, android-widget

我想用 java 语言写一段关于 relativelayout 的 XML 代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content" android:id="@+id/xK1"
android:layout_height="wrap_content" android:orientation="vertical"
android:visibility="gone">
<include android:id="@+id/xKeyBoard" layout="@layout/keyboard"></include>
</RelativeLayout> 
```

我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:56:15.613

这是让它在您的代码中以编程方式工作的一种方法。LayoutInflator 的作用与 XML 中的 include 标记相同。希望这可以帮助！

```
RelativeLayout rl = new RelativeLayout(this);
rl.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
rl.setId(someId);
rl.setVisibilty(View.GONE);
rl.setOrientation(RelativeLayout.VERTICAL);

LayoutInflater layoutInflater = (LayoutInflater) 
   this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);    
rl.addView(0, layoutInflater.inflate(R.layout.keyboard, this, false)); 
```

# asp.net-mvc-3 - Ajax 从 mvc3 模型中获取数据

> ID：11797987
> 
> 赞同：0
> 
> 时间：2012-08-03T14:44:45.773
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试将数据从我的 Action Result 获取到 Ajax。

这是我的控制器：

```
public ActionResult Oku(int id)
{
    var ho = db.news.Select(c => c.news_id == id);
    return Json(ho,JsonRequestBehavior.AllowGet);
} 
```

我在 Shared View Index.cshtml 中的脚本是

```
$.ajax({
   type: "get",
   url: "Home/Oku",
   data: JSON.stringify([22]),
   dataType: "json",

   success: function(msg) {
      alert(msg);
   },
   error: function(msg) {
      alert(msg);
   }
}); 
```

但是某处缺少一些东西，我无法解决。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:49:26.660

如果您希望`JSON`从您的操作方法中获取数据，请使用 Use[`getJSON`](http://api.jquery.com/jQuery.getJSON/)方法，它是 GET 类型的 jQuery ajax 的缩写，数据类型为`"json"`. 始终尝试使用 URL Helper 方法。不要对其进行硬编码。

```
var someId="33";
$.getJSON("@Url.Action("Oku","Home")/"+someId,function(data){
   alert(data);
})
.error(function() { alert("some error error"); }) 
```

# sql - 从同一列中的两行获取时间跨度

> ID：11797989
> 
> 赞同：2
> 
> 时间：2012-08-03T14:44:52.390
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我在 SQL Server 2012 中有一个跟踪登录和注销时间的表，如下所示：

```
UserId    Type    InsertDate
2134      1       20120803 06:32:02.230
2134      1       20120803 10:12:24.350
2134      2       20120803 10:29:21.550
2134      2       20120803 14:10:34.220
5915      1       20120802 14:57:57.453
5915      2       20120802 16:59:00.477 
```

（类型 1 是登录，类型 2 是注销。）

我想查询此表 - 以显示每个登录/注销对的计算时间跨度（以秒为单位）的用户 ID 分组列表，因此我最终得到如下结果：

```
UserID    Duration 
2134      1017 
5915      7263 
```

**更新**：单个用户可以有多组登录/注销对，并且可能存在没有相应注销的登录。我想忽略没有相应值的登录或注销。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:58:12.467

SQL Server 2012 现在让自联接和聚合变得有点不必要了。此解决方案处理同一用户的多次登录。

```
DECLARE @t TABLE(UserID INT, [Type] TINYINT, InsertDate DATETIME);

INSERT @t VALUES
 (2134,1,'20120803 10:12:24.350'),
 (2134,2,'20120803 10:29:21.550'),
 (2134,1,'20120803 11:22:24.350'),
 (2134,2,'20120803 11:47:21.550'),
 (5915,1,'20120802 14:57:57.453'),
 (5915,2,'20120802 16:59:00.477');

;WITH x AS (
  SELECT UserID, [Type], InsertDate, Prev = LAG(InsertDate, 1) OVER 
  (PARTITION BY UserID ORDER BY InsertDate) FROM @t
)
SELECT UserID, DATEDIFF(SECOND, Prev, InsertDate) FROM x WHERE [Type] = 2;

-- or if you want cumulative time per user even if there are multiple login events:

;WITH x AS (
  SELECT UserID, [Type], InsertDate, Prev = LAG(InsertDate, 1) OVER 
  (PARTITION BY UserID ORDER BY InsertDate) FROM @t
)
SELECT UserID, SUM(DATEDIFF(SECOND, Prev, InsertDate)) 
  FROM x WHERE [Type] = 2 GROUP BY UserID; 
```

在以前的版本中，您可以使用更复杂的：

```
;WITH x AS 
(
  SELECT UserID, [Type], InsertDate, 
    rn = ROW_NUMBER() OVER (PARTITION BY UserID ORDER BY InsertDate)
  FROM @t
)
SELECT x.UserID, DATEDIFF(SECOND, x.InsertDate, y.InsertDate) 
  FROM x INNER JOIN x AS y 
  ON x.UserID = y.UserID
  AND x.rn = y.rn - 1
  WHERE x.Type = 1
  AND y.Type = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:52:19.047

尝试

```
select datediff(s, min(InsertDate), max(InsertDate)) as diff
from your_table
group by UserId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:53:58.423

如果只有一次登录和退出；

```
select UserId, DATEDIFF(second,Min(InsertDate),Max(InsertDate)) as Duration, 
from Table1
Group By UserId 
```

# ruby-on-rails - Ruby on Rails：提交搜索表单后保留用户输入

> ID：11797990
> 
> 赞同：1
> 
> 时间：2012-08-03T14:45:11.653
> 
> 标签：ruby-on-rails, ruby, search, drop-down-menu

快速提问。提交搜索时，我的某些字段在搜索完成后将用户输入保存在文本字段或下拉菜单中，但对于其他字段，它会恢复为默认选择。我如何让他们保存用户的选择。

```
 Start date:
<%= select_tag "start_date_dd", options_for_select({
    "Select a period" => "",
      "3 days ago"   => DateTime.now.to_date - 3.days,   # =    259_200 sec.
      "1 week ago"   => DateTime.now.to_date - 1.week,   # =    604_800 sec.
      "1 month ago"  => DateTime.now.to_date - 1.month,  # =  2_592_000 sec.
      "6 months ago" => DateTime.now.to_date - 6.months, # = 15_552_000 sec.
      "1 year ago"   => DateTime.now.to_date - 1.year,   # = 31_557_600 sec.
    }, :selected=>params[:start_date_dd] )%></br>

Status :

<%= select(@projects, :status, Project.all.map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br> 
```

在这里，我的状态下拉框将用户输入保留在文本框中，但我的开始日期下拉菜单没有。任何方式解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:50:02.417

:selected => params[:status] 是您的状态下拉框保留您需要添加的值的原因 :selected=>params[:start_date_dd] 添加到标签

# r - r中的自动化预测图

> ID：11797993
> 
> 赞同：0
> 
> 时间：2012-08-03T14:45:23.470
> 
> 标签：r, forecasting

我正在使用一堆不同的文件集，这些数据是每月的，但它们都是不同的月份。其中一些包括过去 2 年的月度数据，其中一些具有几个月的月度数据。

我喜欢使用这些数据来创建预测图。如果所有数据都是一致的，那将是直截了当的。但是数据是每月的，每个文件都有不同的开始和结束时间。

z 输出：

```
 Month   Value
1 2010-01-01 100
2 2010-02-01 200
3 2010-03-01 600
4 2010-04-01 400
5 2010-05-01 300
6 2010-06-01 700 
```

我试图这样做以将 start 设置为 s 对象，但不工作

```
s <- head(z,1)$Month
s <- sub("-", "," s)
t.ser <- ts(z$Value, start=s,freq=12) 
```

由于我使用的数据各不相同，我不知道开始日期。

这可行，但是，由于我不知道我的数据集的开始日期，我可以在开始时放置一个变量吗？

```
t.ser <- ts(z$Value, start=c(2010,1),freq=12)
t.ets <- ets(t.ser) 
t.fc <- forecast(t.ets,h=12)
plot(t.fc, xaxt="n") 
```

我想格式化 x 轴以显示实际数据的日期和预测值的日期。因为我不知道开始日期，我也不能这样做。无论数据如何，我都想预测 12 个月。

如果我知道开始时间，这将有效。

```
a = seq(as.Date("2011-01-01"), by="month", length=36)
axis(1, at = decimal_date(a), labels = format(a, "%Y %b %d"), cex.axis=0.6) 
```

当我这样做时：

```
 t.ser <- ts(z$Value/1000000, start(z[1,1]),freq=12) 
```

我明白了

```
t.ser
  Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
1  45  51  56  56  59  60  60  60  64  65  75  73
2  74  80  87  91  92  96 109 108 123 129 133 143
3 127 127 123 121 130 
```

但是当我这样做时：

```
t.ser <- ts(z$Value/1000000, start=c(2010,1),freq=12) 
```

我得到了这个，这是我在开始时使用变量而不是明确输入日期时想要的结果。任何人都有任何想法，我将如何做到这一点？

```
t.ser
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2010  45  51  56  56  59  60  60  60  64  65  75  73
2011  74  80  87  91  92  96 109 108 123 129 133 143
2012 127 127 123 121 130 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:43:10.810

试试这个（如果您的数据来自文件，请指定类似 file =`"mydata.dat"`的内容，如果这不是您的数据格式，请适当修改）：`text=Lines`

```
Lines <- "Month   Value
1 2010-01-01 100
2 2010-02-01 200
3 2010-03-01 600
4 2010-04-01 400
5 2010-05-01 300
6 2010-06-01 700"

library(zoo)
z <- read.zoo(text = Lines, header = TRUE, FUN = as.yearmon)
t.ser <- as.ts(z) 
```

这给出了：

```
> t.ser
     Jan Feb Mar Apr May Jun
2010 100 200 600 400 300 700 
```