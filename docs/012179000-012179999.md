# StackOverflow 问答 12179000-12179999

# ruby - Ruby：根据位置收集推特数据

> ID：12179002
> 
> 赞同：2
> 
> 时间：2012-08-29T13:23:20.263
> 
> 标签：ruby, twitter, geolocation

我正在尝试根据位置收集推特。我想要一些关于如何收集的提示：

1.  来自希腊社区的推文
2.  来自各地的推文（公共流线型）
3.  来自希腊的推文（基于位置）
4.  具有特定关键字的推文

我正在使用**Ruby**，可能会使用[tweetstream](https://github.com/intridea/tweetstream)。另一种方法是直接使用[twitter gem](http://twitter.rubyforge.org/)。请注意，**tweetstream**基于**twitter-gem**，由相同的开发人员制作，等等。它只是一个更高的抽象层，带有一些方便的附加组件，例如事件机器驱动的启动/停止守护程序。

**对于第 1 点**，很难说某人是否是希腊人。我能想到的唯一方法是从[公共流](https://dev.twitter.com/docs/streaming-apis/streams/public)中收集所有推文并过滤包含希腊词的推文。

**对于第 2 点**，好的，我会使用`Tweetstream::Client.new.sample`

**对于 point3**，我不知道。希腊的 GPS 坐标是纬度：**N 39° 0' 0''** 和经度**E 22° 0' 0**，但这只是*地图上的一个点，而*不是希腊领土。我知道 Tweetstream 支持几种定义基于位置的推文的方法，但我不知道如何处理这个问题……欢迎任何想法、提示或想法。

**对于第 4 点**，我使用 TweatStream::Client.new.track('keyword') 来保持连接正常运行。阅读 twitter 的 Streaming API，我的印象是

此致，

功放

# algorithm - 什么是构建具有单个状态的日期序列的优雅算法？

> ID：12179004
> 
> 赞同：0
> 
> 时间：2012-08-29T13:23:25.093
> 
> 标签：algorithm

给定具有打开或关闭的单个状态的任何一系列输入日期，这样至少有一个输入日期（打开状态）导致添加单个日期（关闭，最大日期）以完成输出序列您将使用什么算法来生成符合以下条件的输出？

*1\. 没有连续的开放日期和连续的关闭日期。*

*2\. 对于每个开放日期，只有一个关闭日期。*

*3\. 第一个日期应该是 Open，最后一个日期应该是 Closed。*

*4\. 除了第一个开盘日期和最后一个开盘日期外，每个开盘日期应该紧跟上一个开盘日期，或者换句话说，每个关盘日期应该是下一个开盘日期的前一天。*

*5\. 最终日期为 Closed 和 Max date（本例中为 9999-12-31）*

这不是一个家庭作业，我已经在 C# 中实现了它，它的生产代码将执行数百万次。性能很重要，是的，但在可读性方面非常次要。我使用的算法效果很好，但看起来很糟糕。欢迎任何语言。我会根据需要翻译。谢谢。

**示例 1**

```
input:
[2000-01-01,open] 

output: 
[2000-01-01,open]
[9999-12-31,closed] 
```

**示例 2**

```
input: 
[2000-01-01,open]
[2001-01-01,open]

output: 
[2000-01-01,open]
[2000-12-31,closed]
[2001-01-01,open]
[9999-12-31,closed] 
```

**示例 3**

```
input: 
[2000-01-01,open]
[2004-04-30,closed]

output: 
[2000-01-01,open]
[2004-04-30,closed]
[2004-05-01,open]
[9999-12-31,closed] 
```

**示例 4**

```
input: 
[2000-01-01,open]
[2000-03-17,open]
[2002-09-11,closed]
[2003-04-07,closed]

output: 
[2000-01-01,open]
[2000-03-16,closed]
[2000-03-17,open]
[2002-09-11,closed]
[2002-09-12,open]
[2003-04-07,closed]
[2003-04-08,open]
[9999-12-31,closed] 
```

我敢问哪一类语言最能解决这类问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:34:57.863

1.  按日期对输入进行排序。
2.  遍历输入，跟踪当前状态。
3.  如果状态为打开并且遇到打开日期，则插入关闭日期。
4.  如果状态为关闭并且遇到关闭日期，则插入打开日期。
5.  如果状态已关闭并且遇到的打开日期不是上一个关闭日期的第二天，则插入一个打开日期和一个关闭日期以填补该空白。
6.  完成对输入的迭代后，如果状态为打开，则插入最终关闭日期。
7.  完成输入迭代后，如果状态已关闭且最终关闭日期不是 9999-12-31。插入最后的开放和关闭日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:32:52.043

您可以首先生成所有开放日期的列表，然后通过从除第一个开放日期之外的每个日期减去一天来计算结束日期：

C# 伪代码：

```
 var opendates = input.Select ( date =>
      date.Type == closing ? date.Date + 1day : date.Date
  ).Sort ();
  closingdates = opendates.Skip (1).Select (date => date - 1).Append ( new Date [] { 9999-12-31 } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:27:56.803

所以解决方案应该很快，因为性能在这里至关重要。它还应该支持在线处理，因此当系统运行时，您可以随时添加新的开/关日期并立即获得更新的时间表。

由于这个问题的主要操作是排序，我建议使用堆。堆中的每个节点都存储一个日期/状态对。该算法以空堆启动，并不断将其开发为读取输入。当有新数据到来时，算法将其插入到树中，这需要 O(lgN)。当有请求拉动计划时，算法会执行有序遍历，这需要 O(N)。该算法还应该偶尔平衡一次以获得更好的性能。

# android - android: ArrayIndexOutOfBoundsException 当我在 5-10 分钟后重新打开应用程序时

> ID：12179005
> 
> 赞同：1
> 
> 时间：2012-08-29T13:23:27.633
> 
> 标签：android, indexoutofboundsexception

在我的应用程序中，我有一个 listView。

我一次填充了这个 listView 10 个项目。

所以，当我显示一个 spalsh 屏幕时，我会在后台获取第 10 个项目。一旦启动画面消失，用户就可以看到前 10 个项目。

现在在包含此 listView 的 Activity 中，我写了如下内容：

```
onLastItemReached(){
    getNextten();
} 
```

工作正常。当我要从此 listViewActivity 进行其他活动时，我设置了标志，以便在按下返回时保留在此之前浏览的所有项目（我的意思是，如果用户向下滚动到 100 个项目并单击一个项目并进入某个活动和点击设备返回按钮，他将显示第 100 项，其余 99 项不需要再次获取）

问题是当我关闭应用程序并在大约 5-10 分钟后打开它时，它会崩溃说：

```
ArrayIndexOutOfBoundsException 
```

如果我在 1-3 分钟内重新打开它，它工作正常。

抱歉，我无法发布任何代码，因为所有活动都有大约 800 行。

任何人都知道为什么我总是得到这个例外。我想知道的一件事是，有没有类似的东西`if an app is in background for more than 5 mins remove all its data`

编辑：

我正在关闭我的应用程序，我的意思是当我在 ListView 屏幕上时，我按下 Home 按钮，5-10 分钟后重新打开应用程序

这是我得到的 StackTrace，我试图处理 unCaughtExceptions：

```
threadid=1: thread exiting with uncaught exception (group=0x40020660)
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Android.WiC_MobileApp/com.Android.WiC_MobileApp.FeedListViewActivity}: java.lang.ArrayIndexOutOfBoundsException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1728)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1747)
at android.app.ActivityThread.access$1500(ActivityThread.java:155)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993) 
```

所以在查看我的日志猫后，它说错误在第 201 行，并且该行包含：

```
 Log.d("array of product names", SplashActivity.products_array[0] + "--"
            + SplashActivity.products_array[1]); 
```

这是一个填充在 SplashActivity 中并制作的数组`public static`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:29:17.447

> if an app is in background for more than 5 mins remove all its data

This could actually happen within 1 minute. It's just dependent on the environment that the system is running on. When you press the home button (or back button on the top activity) the system will put your app in a hibernation sort of mode. It keeps it in memory until that memory is needed. This allows the user to quickly go back to it on the event that they simply wanted to switch real quick and go back. After a few minutes though, if the user opened up a game or something, the OS may decide to wipe the app from memory. In which case, when the user reopens your app, you have to rebuild everything from scratch.

The reason your app crashes is because you're trying to retrieve the element before the app has actually rebuilt the ListView. If the app is still in memory, it works because everything is still built. If the app was removed, then the list must be rebuilt, re-inflated, or whatever. Then you try to retrieve the element.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:16:59.520

When your app is in the background, Android can kill it at any time (simply by killing the process that your activities are running in). If the user then wants to return to your app, Android creates a new process for your app and then recreates **only the activity that was on the top of the activity stack** (ie: the one that was showing when your app went to the background).

From the logs it looks like your app crashes when trying to launch `FeedListViewActivity`. Since this is probably the activity that was showing when your app went to the background it looks like Android is trying to recreate the activity, which would imply that your process was killed while the app was in the background (see my explanation above).

You say that the data you are trying to access is set up by `SplashActivity` and kept in a static variable. The problem is that when Android creates a new process for you, it only recreates the top activity, not all the activities underneath that. It doesn't recreate the `SplashActivity` so that variable has not yet been initialized.

Here are some possible alternatives to deal with this:

1.  Check if the process has been recreated in `onCreate()` of `FeedListViewActivity` and, if so, you'll need to recreate the list of data that the `SplashActivity` had previously set up for you. You can tell if the process has been recreated by having `SplashActivity` set a `public static boolean` variable to `true` when it runs and by checking that variable in `FeedListViewActivity`.

2.  Check if the process has been recreated in `onCreate()` of `FeedListViewActivity` and, if so, simply redirect to your `SplashActivity` to start the application all over again.

3.  Persist the data by saving it to a Bundle in `onSaveInstanceState()`. Android will call this method on your activity before the process gets killed so you have a chance to save any data you may need later when the activity/process is recreated. You'll need to restore the data in `onCreate()` and/or `onRestoreInstanceState()`.

4.  Persist the data in a file or in an SQLlite database.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:26:33.610

你得到，`ArrayIndexOutOfBoundsException`因为每次当你到达最后一个项目时，你都试图再读 10 条记录。

But suppose your array has **50 records**. When you reach to 50 you are again going to read new **10 records**. **it means 51-60**

which are not available that's why you are getting exception

```
onLastItemReached(){
    if(totalDispayed < yourArray.length())   <-----
    getNextten();
} 
```

You need to implement something like as i have mentioned above

# sql - 给定字母，获取字母表中的下一个字母

> ID：12179007
> 
> 赞同：12
> 
> 时间：2012-08-29T13:23:30.430
> 
> 标签：sql, sql-server, tsql

我有字母“a”、“b”、“c”。我希望我的结果在 TSQL 中分别为“b”、“c”、“d”。我会用什么来实现这一目标？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T13:26:18.403

用于`ASCII`获取字符的值，加一，`CHAR`用于将值转换回字符。

```
SELECT CHAR(ASCII('a') + 1) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-29T13:25:21.957

这就是你为一封信做的事情

```
DECLARE @myletter char(1) = 'a';
SELECT CHAR(ASCII(@myletter)+1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-23T10:18:33.330

带有两个 SQL 程序的 3 个字母的字母计数器

## （a，b...z，aa，ab...zy，zz，aaa...zzz）：

```
SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO

alter procedure letraMas
@letraEntra as char( 1),
@letraSale as char( 1) OUTPUT,
@seLleva as bit  OUTPUT

as

--set @letraEntra = 'w'
--set @letraSale = 'm'
set @seLleva = 0

select
@letraSale = CASE
        WHEN @letraEntra = '' or (@letraEntra is null) or @letraEntra = 'z'
        THEN 'a'
    WHEN @letraEntra < 'z'
        THEN CHAR (ASCII( @letraEntra) + 1)
end

if @letraEntra = 'z' set @seLleva = 1

return 
```

* * *

```
SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO

/* USO:
declare
@tareaEntra as char(3),
@tareaSale as char(3)
set @tareaEntra = 'xzz'
       EXEC tareaMas @tareaEntra, @tareaSale OUTPUT
*/
alter procedure tareaMas
@tareaEntra as char( 3),
@tareaSale as char( 3) OUTPUT

as
declare @charU as char(1 )     -- char de U_nidades albabéticas
declare @charD as char(1 )     -- char de D_ecenas albabéticas
declare @charC as char(1 )     -- char de C_entenas albabéticas
declare @letraSale as char(1 )        -- char de C_entenas albabéticas
declare @seLleva as bit

set @tareaEntra   = right('   ' + rtrim (@tareaEntra), 3)

set @charU = substring(@tareaEntra , 3, 1)
set @charD = substring(@tareaEntra , 2, 1)
set @charC = substring(@tareaEntra , 1, 1)

EXEC letraMas @charU, @letraSale OUTPUT, @seLleva OUTPUT
set @charU = @letraSale
if @seLleva = 1
BEGIN
        EXEC letraMas @charD, @letraSale OUTPUT, @seLleva OUTPUT
        set @charD = @letraSale
        if @seLleva = 1
        BEGIN
               EXEC letraMas @charC, @letraSale OUTPUT, @seLleva OUTPUT
               set @charC = @letraSale
        END
END

set @tareaSale = ltrim(@charC + @charD + @charU)
return 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T07:21:06.403

这是 Jonathan Wood 实现的 CTE

```
;WITH cte AS
   (SELECT  CHAR(ASCII('a')) [char], 1 [count]
    UNION ALL
    SELECT  CHAR(ASCII('a') + cte.count) [char], cte.count + 1 [count]
    FROM    cte)
SELECT  TOP(26) cte.count[pos], cte.char
FROM    cte 
```

您可以像那样使用它，也可以将结果插入到表变量或临时表中并在上面使用它。

我还要给出的另一个提示是，在您的数据库中有一个包含此 cte 数据的表，那么将来加入它并出于任何目的或原因使用它会更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:36:50.637

```
DECLARE @Letters AS TABLE
(
    Letter CHAR(1)
)
INSERT INTO @Letters
        ( Letter )
VALUES  ( 'A' )
INSERT INTO @Letters
        ( Letter )
VALUES  ( 'B' )
INSERT INTO @Letters
        ( Letter )
VALUES  ( 'C' )
SELECT CHAR(ASCII(Letter) + 1) FROM @Letters 
```

在 SQL 中使用表变量的示例，但上述任何方法都可以为您完成。显然取决于您使用什么方法来整理信件列表。

# apache - 防止子文件夹上的 mod_rewrite 出现问题

> ID：12179008
> 
> 赞同：0
> 
> 时间：2012-08-29T13:23:30.983
> 
> 标签：apache, mod-rewrite

我正在尝试在客户端的子文件夹上设置一个小型 Wordpress 安装。他们现有的网站非常小，但 WP 是独立的，所以它不会取代他们现有的网站，它只是运行一个单独的博客。

他们的 .htaccess 文件如下

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

他们现有的站点通过 index.php 放置所有内容，因此 index.php?contact 变为 /contact/

我正在尝试将 wordpress 安装到一个名为“blog”的子文件夹中。但是，每次我尝试运行安装程序时，我都会得到主页。访问像图像这样的文件可以正常工作，但尝试访问任何 .php 文件只会加载主页。我`RewriteEngine Off`只是尝试测试，但它不起作用。

如果我把上面的代码拿出来，它就可以工作（但会破坏网站）。

我的目标是从重写规则中忽略一个子目录。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:45:10.577

尝试在重写规则之前添加此条件：

```
RewriteCond %{REQUEST_URI} !^/blog/ 
```

# jquery - 通过 jquery 更改价格

> ID：12179009
> 
> 赞同：2
> 
> 时间：2012-08-29T13:23:42.957
> 
> 标签：jquery, math, option

在做了一些研究之后，我向你寻求一些 jquery 数学帮助。

我想通过“option rel =”更改一个说明产品价格的文本字段

我把html代码放在这里：http: [//jsfiddle.net/YjLM7/](http://jsfiddle.net/YjLM7/)

因此，如果选择列表状态：

```
<option selected="selected" rel="price-" value="0">50 x 50 cm</option> 
```

显示标准价格。

如果我将选择列表更改为：

```
<option rel="price-100" value="1">100 x 100 cm</option> 
```

价格应该增加 100（如果选择了第一个选项，则返回 -100）。

感谢您的帮助！

这里是完整的代码：

```
<select>
<option selected="selected" rel="price-" value="0">50 x 50 cm</option>

<option rel="price-100" value="1">100 x 100 cm, Price add: €  100,00</option>
</select>

<p>Price</p>
<p><strong>200 €&lt;/strong></p>

<form method="post" action="catalog/category-1/product-1.html">
<input type="hidden" value="" name="productid">
<input type="submit" class="button" value="Add to cart" name="addcart">
</form> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:46:45.600

我会建议一种不同的方法：将商品的实际价格放在 的`data-`属性中，并根据选择`option`的内容更改显示的文本。`option`如果您的下拉菜单有多个选项，这将使其具有更大的灵活性。

HTML：

```
<select class="item">
    <option selected="selected" data-price="200">50 x 50 cm</option>
    <option data-price="300">100 x 100 cm</option>
    <option data-price="400">150 x 150 cm</option>
</select> 
```

JS：

```
$('.item').each(function(i,sel) {
    var $sel = $(sel);
    $sel.find('option').each(function(j,opt) {
        var $opt = $(opt),
            optprice = $opt.data('price'),
            selprice = $sel.find('option:selected').data('price'),
            diff = optprice - selprice,
            diffaddsubtr = (diff > 0) ? "- add" : (diff < 0) ? "- subtract" : "",
            diffamount = Math.abs(diff) || "";
        $opt.find('.diffaddsubtr').text(diffaddsubtr).end()
            .find('.diffamount').text(diffamount);
    });
}); 
```

​</p>

[http://jsfiddle.net/mblase75/YjLM7/5/](http://jsfiddle.net/mblase75/YjLM7/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:34:15.303

[看到](http://jsfiddle.net/6TvTc/6/)这个jsfiddle。

```
<select>
   <option data-price="" selected="selected" value="0">50 x 50 cm</option>

   <option data-price="100" value="1">100 x 100 cm, Price add: €  100,00</option>
</select>

<p>Price</p>
<p><strong data-price="200">200 €&lt;/strong></p>

<form method="post" action="catalog/category-1/product-1.html">
      <input type="hidden" value="" name="productid">
      <input type="submit" class="button" value="Add to cart" name="addcart">
</form>
​
​ 
```

和JS：

```
$("select").change(function(){
   var price = parseFloat($(this).find("option:selected").data("price"));
   if(isNaN(price))
       price = 0;
   var currPrice = parseFloat($("strong").data("price"));
   $("strong").text(currPrice + price + ' €');
})​ 
```

​</p>

# unit-testing - 通过调用多个动作来单元测试控制器

> ID：12179013
> 
> 赞同：3
> 
> 时间：2012-08-29T13:23:52.410
> 
> 标签：unit-testing, grails, grails-2.0, grails-controller

[我有一个与这个问题](https://stackoverflow.com/questions/8862622/grails-how-to-test-controller-with-multiple-actions-and-multiple-redirects)中描述的问题非常相似的问题。（主要区别在于我使用的是 Grails 2.1）。

基本上我想写一个单元测试，它像：

```
// set params so i can create an obj.
def results = controller.save()

// validate results or model/view
results = controller.edit(id, version) 
```

但是，这不起作用，因为第一个方法操作（保存）已触发重定向，而第二个方法操作也会触发重定向，这会导致无法重定向异常。随着消息：

```
Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response. 
```

建议的解决方案（在各个地方都可以找到）是：

```
redirectArgs.clear() 
```

但是，这不起作用，因为从 Grails 2 开始，redirectArgs 不存在，只有

```
response.redirectUr 
```

只能读取，不能写入。

我也已经尝试过这些东西（各种组合）：

```
response.reset()
clearGrailsWebRequest()
bindGrailsWebRequest()
cleanupGrailsWeb()
controller.redirect([:])
controller.redirect(null)
controller = new OfferObjectController()
controller = mockController(OfferObjectController) 
```

一切都没有运气。

我完全没有其他想法可以工作/帮助。任何建议表示赞赏！

==== 编辑 ====

我忘了澄清

```
response.reset() 
```

有点工作，它让我调用另一个动作，但是它似乎撤消/回滚前一个动作所做的更改，这正是我想要避免的（如果我想要这样，我会将调用放入它自己的测试中[方法]）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:29:09.793

答案是

```
response.reset() 
```

我不知道你为什么会收到那个例外。顺便说一句，您应该创建一项任务一项测试。

我想你可以试试这个：

```
import org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequest
.....

// set params so i can create an obj.
def results = controller.save()

def lastRequest = GrailsWebRequest.lookup().currentRequest
lastRequest.removeAttribute("org.codehaus.groovy.grails.REDIRECT_ISSUED")

// validate results or model/view
results = controller.edit(id, version) 
```

# rspec - 使用 sinatra 在多条路由上运行相同的 rspec 测试

> ID：12179014
> 
> 赞同：0
> 
> 时间：2012-08-29T13:23:55.073
> 
> 标签：rspec, sinatra, dry

我的 sinatra 应用程序有一个在某些路由开始时运行的安全方法。我想针对我需要确保安全的每条路由运行同一组身份验证 rspec 测试，但我不想在 rspec 中重复自己。我该怎么做？

```
helpers do
  def requires_auth!
    # stuff
  end
end

post '/object' do
  requires_auth!

  # stuff
end

put '/object' do
  requires_auth!

  # stuff
end

get '/object' do
  # doesn't require auth

  # stuff
end 
```

我的规范目前看起来像这样，并且看起来非常重复。

```
describe 'The post request' do
  it 'should fail if auth token is invalid'
  it 'should fail if auth token has expired'

  it 'should pass if <other stuff>'
end

describe 'The put request' do
  it 'should fail if auth token is invalid'
  it 'should fail if auth token has expired'

  it 'should pass if <more other stuff>'
end

describe 'The get request' do
  it 'should pass if <other stuff yet again>'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:55:37.980

我应该有RTFM！看起来这正是`shared_examples`它的用途。如果您认为有特定于 Sinatra 的更好方法，请务必发布！

# android - 安装 apk 时缓存包共享库失败

> ID：12179019
> 
> 赞同：1
> 
> 时间：2012-08-29T13:24:28.340
> 
> 标签：android, installation, unity3d

在为 Android 制作 Unity3D 插件时，我遇到了这个错误。

```
08-29 20:57:56.544: W/NativeHelper(123): Failed to cache package shared libs

08-29 20:57:56.544: W/NativeHelper(123): java.io.IOException: Couldn't create cached binary /data/data/com.alpaca.billing/lib/libunity.so in /data/data/com.alpaca.billing/lib

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.internal.content.NativeLibraryHelper.copyNativeBinaryLI(NativeLibraryHelper.java:289)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.internal.content.NativeLibraryHelper.copyNativeBinariesLI(NativeLibraryHelper.java:260)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService.scanPackageLI(PackageManagerService.java:3474)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService.replaceNonSystemPackageLI(PackageManagerService.java:5834)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService.replacePackageLI(PackageManagerService.java:5800)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService.installPackageLI(PackageManagerService.java:6136)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService.access$2200(PackageManagerService.java:145)

08-29 20:57:56.544: W/NativeHelper(123):    at com.android.server.PackageManagerService$5.run(PackageManagerService.java:4820)

08-29 20:57:56.544: W/NativeHelper(123):    at android.os.Handler.handleCallback(Handler.java:587)

08-29 20:57:56.544: W/NativeHelper(123):    at android.os.Handler.dispatchMessage(Handler.java:92)

08-29 20:57:56.544: W/NativeHelper(123):    at android.os.Looper.loop(Looper.java:143)

08-29 20:57:56.544: W/NativeHelper(123):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我的 Unity3D 是 3.5.5f3，我在两部 Android 手机上对其进行了测试：1.Nexus S，Android 4.0。一切都很好。2.HTC Wildfire S，Android 2.3.3。Unity3D Android 插件示例没问题，我的插件有这个错误。

我在互联网上搜索过，发现有人遇到此错误，但没有找到原因和解决方案。我有足够的内部和 sd 空间来安装这个 apk。因为不知道是哪一部分导致这个错误，除了Unity3d论坛我也求助stackoverflow，可能是Android OS或者手机兼容性导致这个错误。</p>

任何人都可以告诉我是什么导致了这个错误以及如何解决它？谢谢你。

# php - META 描述和 Facebook

> ID：12179020
> 
> 赞同：1
> 
> 时间：2012-08-29T13:24:29.267
> 
> 标签：php, mysql, html, facebook

这是我的动态标题和元描述更新代码；

```
$titlecek=mysql_query("SELECT bahisisim,bahisiaciklama,URL FROM bahis WHERE id='$bahisid'");
$titlecekx=mysql_fetch_array($titlecek);
echo "<title>" . mb_strtolower($titlecekx[0],'UTF-8') . "</title>";
echo '<META NAME="Description" CONTENT="' . mb_strtolower($titlecekx[1],'UTF-8') . '">'; 
```

但是当我尝试在 Facebook 上分享我的页面时，它看起来像；

[http://666kb.com/i/c6st3ke4u4hqaem42.gif](http://666kb.com/i/c6st3ke4u4hqaem42.gif)

顺便说一句，它的 HTML 代码在输出时就像这些；

```
<title>bu bahise gelen evet says tek say olacak</title><META NAME="Description" CONTENT="bu bahise 2 gün içerisinde gelen evet oyu sayısı tek sayı olacak. (ilkokullu editi: 2'nin katları çift sayıdır, 0 çift sayıdır)"> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:26:44.673

每次更改元标记时，都必须通过[Facebook 调试器](https://developers.facebook.com/tools/debug)运行 URL ，以确保 Facebook 丢弃它的元标记缓存版本。

取自[Facebook Open Graph Protocol 文档](https://developers.facebook.com/docs/opengraphprotocol/)，在“编辑元标签”部分下 -

> 要使更改反映在 Facebook 上，您必须强制抓取您的页面。当页面的管理员单击“赞”按钮或将 URL 输入 Facebook URL ~~Linter~~调试器时，页面会被抓取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:32:02.897

确保您告知站点使用的字符编码。否则，即使您以 UTF-8 格式正确输出值，消费者（在本例中为 Facebook）也不会知道在读取数据时使用什么编码。

一种方法是使用这个：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

在 HTML5 中，[您还可以说](https://stackoverflow.com/questions/4696499/which-one-to-use-meta-charset-utf-8-vs-meta-http-equiv-content-type)：

```
<meta charset="UTF-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:57:07.603

最终解决方案；

```
$turkceler= array("ç", "ğ" , "ı", "ö", "ş", "ü");
$degistir= array("&#231", "&#287", "&#305", "&#246", "&#351", "&#252");
echo "<title>" . str_replace($turkceler,$degistir,mb_strtolower($titlecekx[0])) . "</title>";
echo '<META NAME="Description" property="og:description" CONTENT="' . substr(strip_tags(str_replace($turkceler,$degistir,mb_strtolower($titlecekx[1]))),0,200) . "..." . '">';
echo '<meta property="og:image" content="' . $titlecekx[2] . '"/>'; 
```

# python - 用英语以外的语言发送邮件

> ID：12179022
> 
> 赞同：0
> 
> 时间：2012-08-29T13:24:32.663
> 
> 标签：python, django, email, utf-8, multilingual

我需要发送非英文（中文、日文等）的邮件。我有一个 template.py 文件，我从中获取主题和正文。模板.py

```
 #!/us/bin/python                                                                                                                                                                       
    # -*- coding: utf-8 -*-   
  subject = '附录E: 配置参考'
  body = '附录E: 配置参考' 
```

我从 template.py 文件中读取了正文和主题。

```
 msg = EmailMultiAlternatives(subject, body, from, to)
  msg.attach_alternative(html_content, "text/html")
  msg.send() 
```

它适用于英语，但不适用于其他语言。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:39.460

尝试将页面设置为 unicode

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

该字符集可识别多种语言及其各自的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:37:34.200

正如 Burhan 所问的，您是如何生成`html_content`邮件的以及您在哪个邮件客户端中检查邮件？正如大卫建议的那样，通常`html_content`应该是有效的 HTML 。`<meta http-equiv="content-type" content="text/html; charset=utf-8" />` `<head>`

另外，检查`django.conf.settings.DEFAULT_CHARSET`，如果不是`'utf-8'`，您可以将其设置为`'utf-8'`或`msg.encoding = 'utf-8'`在您的代码中设置 。（如果您想使用 charset 等`gb18030`，请替换`'utf-8'`为它）

另外，在 Python 2.X 代码中，最好始终将 unicode 用于包含非 ascii 字符的字符串，因此

```
subject = u'附录E: 配置参考'
body = u'附录E: 配置参考'

# instead of
subject = '附录E: 配置参考'
body = '附录E: 配置参考' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:50:42.333

试试看

```
import sys
reload(sys)  # to enable 'setdefaultencoding' again  (optional)
sys.setdefaultencoding("UTF-8") 
```

subject.encode("UTF-8")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:31:31.383

或者试试这个：

```
from email import Charset
# Due to http://code.djangoproject.com/ticket/11212
Charset.add_charset('utf-8',Charset.SHORTEST,None,'utf-8') 
```

# extjs - XTemplate 不工作

> ID：12179030
> 
> 赞同：0
> 
> 时间：2012-08-29T13:25:06.757
> 
> 标签：extjs

我将 ExtJs 与 XTemplate 一起使用，我需要使用标签`<if>`来选择商店中的特定型号，但是当我运行此代码时：`'<tpl if="id == {id}">',`出现错误提示

> Uncaught SyntaxError: Unexpected token }

谁能给我一个见解？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:58:14.417

您需要对其进行编码，看看基本的数学支持示例：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate)

# java - 将 J2EE-MIB 统计信息发送到 SNMP 管理器的简单示例

> ID：12179032
> 
> 赞同：0
> 
> 时间：2012-08-29T13:25:12.307
> 
> 标签：java, snmp, mib, snmp4j

我正在寻找一个简单的 java 示例，该示例使用[J2EE-MIB](http://java.sun.com/j2ee/tools/management/downloads/J2EE-MIB)或[JVM-MANAGEMENT-MIB](http://docs.oracle.com/javase/1.5.0/docs/guide/management/JVM-MANAGEMENT-MIB.mib)主动将 SNMP 统计信息发送到 SNMP 管理器。我的意图是针对 CA Spectrum 使用[SNMP4j](http://www.snmp4j.org/)，但针对任何通用 SNMP 管理器的任何 Java API 都可以。我很乐意发送简单的陷阱，但我不确定如何继续使用更复杂的 MIB 以及如何指定动态组。例如，J2EE-MIB 定义了 JDBC 池指标，但各个指标必须以某种方式与池名称相关联。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:22:31.523

SNMP4J-AgentJMX 具有对 JVM-MANAGEMENT-MIB 的内置支持。

我不建议（不鼓励）使用陷阱来发送 MIB 规范的全部内容。相反，您应该使用陷阱定向轮询方法（可以在 comp.protocols.snmp 的 FAQ 中找到）。

# android - LinkedIn登录在我的三星应用程序中不起作用？

> ID：12179035
> 
> 赞同：2
> 
> 时间：2012-08-29T13:25:13.757
> 
> 标签：android, linkedin, samsung-mobile

我开发了一个应用程序，我正在使用 LinkedIn 集成来共享文本和图像，它在 HTC 手机中运行良好，但不适用于所有三星手机。请解决我的问题

我的java代码..

```
Button b1 = (Button)findViewById(R.id.button1);
b1.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

        Intent i = new Intent(getApplicationContext(),LinkedInPost.class);
        startActivity(i);
    }
} 
```

**LinkedInPost.java**

```
public class LinkedInPost extends Activity 
{
    // initializations

    public static final String CONSUMER_KEY = "key-key-key";
    public static final String CONSUMER_SECRET = "key-key-key";
    public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-linkedin";
    public static final String OAUTH_CALLBACK_HOST = "techgene";
    public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;

    final LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(CONSUMER_KEY,CONSUMER_SECRET);
    final LinkedInApiClientFactory factory = LinkedInApiClientFactory.newInstance(CONSUMER_KEY, CONSUMER_SECRET);
    LinkedInRequestToken liToken;
    LinkedInApiClient client;

    private String strLinkedInMessage;
    private String strLinkTitle;
    private String strLink;

    //Called when the activity is starting.
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.linkedin);

        strLinkedInMessage  =   "04.17pm";
        strLinkTitle        =   "testing";
        strLink             =   "http://184.173.113.66/images/deal/rest_2012_3_18-0_1_27309-oysters-01.jpg";

        liToken = oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);

        try
        {
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken.getAuthorizationUrl()));
            startActivity(i);
        } 
        catch (Exception e) 
        {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
        }
    }

/** 
 * Method to verify the authentication, As it is used only in this package, it is made protected 
 */
@Override
protected void onNewIntent(Intent intent)
{
    try
    {
        String verifier = intent.getData().getQueryParameter("oauth_verifier");
        LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
        client = factory.createLinkedInApiClient(accessToken);
        client.postShare(strLinkedInMessage, strLinkTitle,strLink, strLink,VisibilityType.CONNECTIONS_ONLY);
        Toast.makeText(getBaseContext(), "In Try +ve", Toast.LENGTH_SHORT).show();
    }
    catch (Exception e) 
    {
        Toast.makeText(getBaseContext(), "onNewIntent", Toast.LENGTH_SHORT).show();
    }
    finish();
} 
```

清单.xml

```
<activity
    android:name=".LinkedInPost"
    android:launchMode="singleInstance">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />

        <data
            android:host="techgene"
            android:scheme="x-oauthflow-linkedin" />
    </intent-filter>
</activity> 
```

此代码在 htc 中工作正常，但在 logcat 中无法在三星中工作我这样的错误

```
10-02 06:16:07.312: E/AndroidRuntime(11708): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.LinkedInPost}: com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: api.linkedin.com
10-02 06:16:07.312: E/AndroidRuntime(11708): Caused by: com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: api.linkedin.com
10-02 06:16:07.312: E/AndroidRuntime(11708):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
10-02 06:16:07.312: E/AndroidRuntime(11708):    at java.net.InetAddress.lookupHostByName(InetAddress.java:497)
10-02 06:16:07.312: E/AndroidRuntime(11708):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:38:28.150

我希望你一定已经解决了这个问题，但我想我必须回复它:) 在我的案例中，我已经花了一周时间解决有线问题。请确保您的设备时间正确，因为linkedin服务器不会接受错误的时间并会报错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:43:54.020

您想`api.linkedin.com`在我的网络端调用 404 响应的页面。您应该检查是否为 OAuth 调用了正确的端点。

除了回答您的问题外，您不应在任何网站上发布您的 OAuth 凭据。

# android - 如何访问内部存储的图像

> ID：12179045
> 
> 赞同：1
> 
> 时间：2012-08-29T13:25:42.730
> 
> 标签：android, android-intent, android-image

我有一个应用程序可以拍摄照片并将照片内部存储在我创建的文件夹中。拍完照片后，我希望能够访问它，以便我可以通过电子邮件发送它。如何访问我刚刚拍摄的图像？下面是我在拍摄照片后在内部保存图像的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

        File storagePath = new File(
                Environment.getExternalStorageDirectory() + "/DavePics/");
        storagePath.mkdirs();

        File myImage = new File(storagePath, Long.toString(System
                .currentTimeMillis()) + ".jpg");

        Bitmap b = Bitmap.createScaledBitmap(bmp, 320, 480, false);

        try {
            FileOutputStream out = new FileOutputStream(myImage);
            b.compress(Bitmap.CompressFormat.JPEG, 80, out);
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
}

} 
```

当我检查我创建的文件夹时，图片就在那里。我现在要做的是访问该图片，以便我可以通过下面的代码通过电子邮件发送它：

```
@Override
public void onClick(View v) {

    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bSendPic:

        String emailaddress[] = { "info@sklep.com", "", };

        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.putExtra(Intent.EXTRA_EMAIL, emailaddress);

        //emailIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, pic);

        emailIntent.setType("image/jpeg");
        startActivity(Intent.createChooser(emailIntent, "Send Mail"));

        break;
    case R.id.ibTakePic:

        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        startActivityForResult(i, cameraData);
        break;
    }

} 
```

如何访问此图片以便将其添加到我的电子邮件意图中？我会以正确的方式解决这个问题吗？谢谢

编辑：这是我的完整代码

```
public class Camera extends Activity implements View.OnClickListener {

ImageButton ib;
Button b;
ImageView iv;
Intent i;
final static int cameraData = 0;
Bitmap bmp;
File myImage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo);
    initialize();
    InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    bmp = BitmapFactory.decodeStream(is);

}

private void initialize() {
    ib = (ImageButton) findViewById(R.id.ibTakePic);
    b = (Button) findViewById(R.id.bSendPic);
    iv = (ImageView) findViewById(R.id.ivReturnedPic);
    b.setOnClickListener(this);
    ib.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bSendPic:

        if (myImage.exists()) {

            String emailaddress[] = { "info@sklep.com", "", };

            Intent emailIntent = new Intent(Intent.ACTION_SEND);
            emailIntent.putExtra(Intent.EXTRA_EMAIL, emailaddress);
            emailIntent.setType("image/jpeg");
            emailIntent
                    .putExtra(Intent.EXTRA_STREAM, Uri.fromFile(myImage));
            startActivity(Intent.createChooser(emailIntent, "Send Mail"));

        }

        break;
    case R.id.ibTakePic:

        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        startActivityForResult(i, cameraData);
        break;
    }

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

        File storagePath = new File(
                Environment.getExternalStorageDirectory() + "/DavePics/");
        storagePath.mkdirs();

        myImage = new File(storagePath, Long.toString(System
                .currentTimeMillis()) + ".jpg");

        Bitmap b = Bitmap.createScaledBitmap(bmp, 320, 480, false);

        try {
            FileOutputStream out = new FileOutputStream(myImage);
            b.compress(Bitmap.CompressFormat.JPEG, 80, out);
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:35:48.467

您忘记的代码行是，

```
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(myImage)); 
```

在您的代码中，`File myImage`在您的活动中全局声明，

现在在电子邮件发送代码

检查文件是否存在，

```
if(myImage.exist())
{
 String emailaddress[] = { "info@sklep.com", "", };
 Intent emailIntent = new Intent(Intent.ACTION_SEND);
 emailIntent.putExtra(Intent.EXTRA_EMAIL, emailaddress);
 emailIntent.setType("image/jpeg");
 emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(myImage));
 startActivity(Intent.createChooser(emailIntent, "Send Mail"));
} 
```

# php - Twitter搜索API，如何按@username过滤？

> ID：12179046
> 
> 赞同：4
> 
> 时间：2012-08-29T13:25:54.267
> 
> 标签：php, twitter

我正在使用 Twitter API 原子格式

```
http://search.twitter.com/search.atom?lang=en&q=some_hashtag 
```

但它向我返回了来自所有人的带有标签“some_hashtag”的推文。我正在寻找一些过滤器来搜索仅来自一个用户的带有标签“some_hashtag”的所有推文，例如@this_one。

[我在“ twitter get search](https://dev.twitter.com/docs/api/1/get/search) ”文档中没有找到这个参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:39:49.867

你必须给`q`:一个额外的参数`from:`。

例如，通过以下方式检索主题标签`some_hashtag`的推文`@VictimCommunity`：

```
http://search.twitter.com/search.atom?lang=en&q=some_hashtag%20from:VictimCommunity 
```

它在[文档](https://dev.twitter.com/docs/using-search)中有所描述，但有点隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:34:22.647

Twitter 不允许您搜索特定用户组的关键字。

由于您只是“搜索”一个用户的推文，我建议您只需阅读用户时间线`include_entities`并使用 PHP 过滤结果：

```
https://dev.twitter.com/docs/api/1/get/statuses/user_timeline?screen_name=this_one&include_entities=1 
```

现在使用 PHP 阅读...

```
foreach ($tweets as $tweet) 
{
    if (in_array('hashtag', $tweet->entities->hashtags))
    {
        // go...
    }
} 
```

编辑：虽然这仍然有效，但我建议查看[上面的这个答案](https://stackoverflow.com/questions/12179046/twitter-search-api-how-to-filter-by-username#answer-12179316)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:31:19.060

看看这两页：

[推特搜索 API](https://dev.twitter.com/docs/api/1/get/search)

[Twitter 搜索 API 实体](https://dev.twitter.com/docs/tweet-entities)

# java - 构造函数有问题吗？

> ID：12179051
> 
> 赞同：0
> 
> 时间：2012-08-29T13:26:11.107
> 
> 标签：java, exception, inheritance, stack-overflow, extend

我在构建类时遇到问题，

以下代码抛出异常

```
public class Agent extends Board{    
    private static boolean arrow;
    private static boolean backmove;
    private static boolean gotGold;

    private static int atlocationX;
    private static int atlocationY;
    private static int faceposition; 
    private static int pathcounter;

    public boolean temporaryGold;
    public boolean temporaryWumpus;
    public boolean temporaryStench;
    public boolean temporaryBreeze;
    public boolean temporaryPit;

    int agentgui = 0;
    int label = 0;

    Block blockstorage[][] = new Block[4][4];
    KnowledgeBase kb = new KnowledgeBase();

    public Agent() {
        super();
    }

    public void Agent(){
        Agent.arrow = true;
        Agent.faceposition = 2;
        Agent.atlocationX = 0;
        Agent.atlocationY = 0;
        Agent.backmove = false;
        Agent.gotGold = false;
        Agent.pathcounter = 1;
    }
} 
```

问题是，当我尝试添加

```
Agent agent = new Agent(); 
```

在我的其他一些课程中，例如：

```
public class Board {
    Agent agent = new Agent();
} 
```

它返回一个错误：

> > 线程“AWT-EventQueue-0”中的异常 java.lang.StackOverflowError

我也尝试过，但还是一样。

是什么导致了这个异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:27:38.820

您有一个带有间接递归调用的无限循环。

构造一个`Board`对象需要一个`Agent`对象，反之亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:35:44.350

问题是你的`Agent`课程扩展`Board`

```
public class Agent extends Board 
```

在`Agent`类的构造函数中，您正在调用`super()`构造函数，该构造函数调用`Board`类构造函数

```
public Agent() {
    super();
 } 
```

最后你的`Board`班级创建了一个`Agent`班级对象

```
public class Board {
 Agent agent = new Agent(); 
```

这使得无限循环导致：`Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError`.

**编辑：****根据您**在评论您的代理类中回答问题

 **```
public class Agent{    
private static boolean arrow;
private static boolean backmove;
private static boolean gotGold;

private static int atlocationX;
private static int atlocationY;
private static int faceposition; 
private static int pathcounter;

public boolean temporaryGold;
public boolean temporaryWumpus;
public boolean temporaryStench;
public boolean temporaryBreeze;
public boolean temporaryPit;

int agentgui = 0;
int label = 0;

Block blockstorage[][] = new Block[4][4];
KnowledgeBase kb = new KnowledgeBase();

public void Agent(){
    Agent.arrow = true;
    Agent.faceposition = 2;
    Agent.atlocationX = 0;
    Agent.atlocationY = 0;
    Agent.backmove = false;
    Agent.gotGold = false;
    Agent.pathcounter = 1;
 }
} 
```

**您的 Board 课程应如下所示**

```
public class Board {
 Agent agent = new Agent();
 // Now you can call your method of Agent class like following 
 agent.Agent()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:37:29.463

代理扩展董事会，董事会需要代理。虚拟机花费无限时间尝试完成该任务。

就像一张纸，两面都写着“把我翻过来”。您花费无限的时间尝试遵循指示。

此外，请考虑在 StackOverflow 上回答一些问题，然后再提出更多“为我查找问题”类型的问题。**

# c++ - 多通道垫子显示功能

> ID：12179059
> 
> 赞同：0
> 
> 时间：2012-08-29T13:26:34.580
> 
> 标签：c++, opencv, matrix

我想写一个简短的函数来显示 OpenCV Mat 矩阵类型。我关闭完成它。这是我的代码：

```
template <class eleType>
int MATmtxdisp(const Mat mtx, eleType fk)   
// create function template to avoid type dependent programming i.e. Mat element can be float, Vec2f, Vec3f, Vec4f
// cannot get rid of fk ('fake') variable to identify Mat element type
{   
    uchar chan = mtx.channels();

    for(int i = 0; i < mtx.rows; i++)
        for(int k = 0; k < chan; k++)
        {
            for(int l = 0; l < mtx.cols; l++)
            {
                eleType ele = mtx.at<eleType>(i,l);  
// I even split 2 cases for 1 channel and multi-channel element
// but this is unacceptable by the compiler when element is float type (1 channel)
// i.e. C2109: subscript requires array or pointer type
                if (chan > 1)
                    printf("%8.2f",ele[k]);   
                else 
                    printf("%8.2f",ele);
            }
            printf("\n");
        }

        return 0;
} 
```

有什么办法可以解决这个问题，以获得紧凑且无通道数的显示功能？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:30:30.950

那这个呢？

```
cv::Mat myMat(2,3, CV_8UC3, cv::Scalar(1, 2, 3));
std::cout << myMat << std::endl; 
```

无论如何，如果您使用 cout，您的代码会容易得多：

```
template <class T>
int MATmtxdisp(const Mat& mtx)
{   
    uchar chan = mtx.channels();
    int step = mtx.step();
    T* ptr = (T*)mtx.data;

    for(int i = 0; i < mtx.rows; i++)
        for(int k = 0; k < chan; k++)
        {
            for(int l = 0; l < mtx.cols; l++)
            {
                cout << ptr[ /* calculate here the index */];
            }
            cout << endl;
    }
} 
```

# java - 为了开始 Android 应用程序开发，我应该下载哪个 Eclipse？

> ID：12179061
> 
> 赞同：3
> 
> 时间：2012-08-29T13:26:36.117
> 
> 标签：java, eclipse

我迷失在这个列表中：http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

我下载了第一个：Eclipse IDE for Java EE Developers, 221 MB

我看到了比较表，但我想要你们的经验，我应该下载哪一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:32:56.517

您只需要 Eclipse IDE for JAVA Developer。安卓开发无论如何都不需要 EE 插件。它只有 149 MB 的大小。一旦您拥有了仅用于 JAVA 开发的 Eclipse，您就可以继续在其上安装 adt 插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:31:43.133

**-**下载`Eclipse Indigo Classic`版本。

**-**安装`ADT plugin`进去。

**-**然后安装`Android SDK`.

# java - 如何在 ATG Commerce 中显示 UTF-8 编码语言？

> ID：12179067
> 
> 赞同：0
> 
> 时间：2012-08-29T13:27:03.117
> 
> 标签：java, utf-8, localization, internationalization, atg

我们正在尝试使 ATG 商务网站（通过 CRS 制作）国际化。该站点支持 2 个本地人.. en_th 和 th_th。我们在使用密件抄送的产品中添加了 th(thailand) 翻译，如下所示。 ![在此处输入图像描述](../Images/b446baf2daa999e301a1eee381a1d16b.png)

现在，当我们在 JSP 中显示此产品详细信息时，英文版正常显示，但泰文版显示“??????????????????????”

到目前为止我所做的配置：

1.  在 Jboss 的 server.xml 中添加了 UTF-8 支持
2.  JSP 支持 UTF-8，在使用浏览器渲染时，源代码显示 UTF-8
3.  添加

    ```
    pResponse.setCharacterEncoding("UTF-8");
            pResponse.setContentType("text/html"); this in my droplet also to be on safe side. 
    ```

还需要做什么？任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:03:37.727

您需要在 HTML 标记中显式设置内容类型：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

此外，请确保在文档顶部声明了 doctype：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:35:31.130

您也可以尝试设置以下之一在您的 JSP 中，在标题部分中设置

```
<%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8" %> 
```

和/或

```
pResponse.setContentType("text/html; charset=UTF-8"); 
```

希望这有帮助

# search - Lucene 中同一存储位置上的多个索引器

> ID：12179069
> 
> 赞同：1
> 
> 时间：2012-08-29T13:27:18.047
> 
> 标签：search, solr, lucene, scalability, elasticsearch

我想构建一个高度可扩展的应用程序，我打算使用 Lucene 作为我的搜索引擎库。在浏览文档和常见问题解答时，我意识到它只允许通过在索引目录中创建一些 write.lock 在存储位置打开一个索引编写器。我们可以在该索引上打开多个 IndexReader。

我有兴趣构建一个架构，其中有多个索引器在不同的机器/服务器上运行，并且多个搜索器回答对这些索引器创建的索引的各种类型的查询。搜索器和索引器都将在不同的计算机上运行。

在这种情况下，最好让多个索引器使用相同的索引存储位置来索引文档。如何做到这一点？我应该使用 NFS（网络文件系统）之类的东西吗？Solr 或其他基于 Lucene 的框架是否解决了这个问题？我想到的一个明显的解决方案是为每个索引器创建一个索引，然后要求搜索者跨多个索引目录进行查询。但是这些将导致创建大量不同的索引目录，与索引器服务器一样多，我认为这并不是很理想。我想要 (# of index dirs) << (# of indexers) < (# of searchers)

在这种情况下，我有哪些不同的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:36:23.133

看看[ElasticSearch](http://www.elasticsearch.org/)和[Solr Cloud](http://wiki.apache.org/solr/SolrCloud/)。

[ElasticSearch 和 Solr 的比较](http://blog.sematext.com/2012/08/23/solr-vs-elasticsearch-part-1-overview/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:58:43.030

首先：永远不要将 NFS 与 Lucene 一起使用，它既慢又危险。

如果涉及可扩展性和高可用性，我建议您让 elasticsearch 为您完成所有艰苦的工作，这样您就可以专注于您的数据。您当然可以有多个线程索引数据。

如果您想进一步了解 elasticsearch 的分布式特性，我建议您观看[此视频](https://vimeo.com/26710663)。

# javascript - jQuery在切换期间更改'a'标签的属性

> ID：12179079
> 
> 赞同：0
> 
> 时间：2012-08-29T13:28:02.460
> 
> 标签：javascript, jquery, html

好的，我有一个`<a`标签，它调用一个切换函数来删除一个`<td`标签。在那个`a`标签中我有`&lt;&lt;`...<<

在功能中，我想在执行切换时将其更改`<<`为。`>>`它不工作。我究竟做错了什么？

html:

```
<td class="filter_td" id="filter_td">
  <td class="show_hide">
            <a href="javascript:toggleFilters();" id="show_hide" alt="Hide Filters" title="Hide Filters">&lt;&lt;</a>
        </td> 
```

jQuery：

```
 function toggleFilters()
{
    var td = $("#filter_td");
    td.toggle('slow');
    if (td.css("display") == "none")
    {
        $("#show_hide").html("&gt;&gt;").attr('title', 'Show Filters');
    }
    else
    {
        $("#show_hide").html("&lt;&lt;").attr('title', 'Hide Filters');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:37:45.940

将更改文本的代码放入“切换”的回调中。这样，您就知道动画已完成并且元素的可见状态已完成。像这样的东西：

```
var td = $("#filter_td");
td.toggle('slow', function () {
    if (td.not(":visible"))
    {
        $("#show_hide").html("&gt;&gt;").attr('title', 'Show Filters');
    }
    else
    {
        $("#show_hide").html("&lt;&lt;").attr('title', 'Hide Filters');
    }
}); 
```

此外，我将检查是否隐藏更改为 jQuery 的“.not()”。这是一种更通用的方式来判断元素是否在页面上实际可见，而不是简单地查看其样式（可能未定义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:45:13.960

```
$("#show_hide").on('click', function() {
    var td = $("#filter_td"),
        state = td.is(':visible');
    td.toggle('slow');
    $("#show_hide").html(state?"&gt;&gt;":"&lt;&lt;")
                   .prop('title', (state?'Hide':'Show')+' Filters');
}); 
```

[**小提琴**](http://jsfiddle.net/TBg9D/1/)

# c# - 在 C# 中将 XML 解析为对象，允许“零个或多个”情况

> ID：12179080
> 
> 赞同：0
> 
> 时间：2012-08-29T13:28:03.897
> 
> 标签：c#, linq-to-xml

我正在用 C# 编写一个 XML 解析器来提取大量（许多文件，超过 200GB 的数据）以 xml 形式存储的条目。我正在使用 Linq to XML 来解析文件并将所有信息获取到我为它们创建的对象中（14 个对象；一些对象包含包含对象列表的对象列表——这是很多数据）。

我遇到的问题是某些条目可能具有某个对象的零个或多个实例。在数据库上下文中，这没问题，但我不知道如何告诉我的程序，如果它在标签下找不到合适的对象，它应该只创建一个空/默认对象。运行程序会给我一个“序列不包含元素”错误，并且异常处理不起作用，因为程序只是在找到一个空列表而不是忽略它时退出查询。

如何处理 linq-to-xml 查询中的零个或多个案例？

有问题的对象的定义是：

```
<!ELEMENT prior-registration-applications (other-related-in* , prior-registration-application*)>
<!ELEMENT other-related-in (#PCDATA)>
<!ELEMENT prior-registration-application (relationship-type? , number?)> 
```

我遇到问题的代码是这样的：

```
priorRegistrationApplications = (
                        from q in e.Elements("prior-registration-applications")
                        select new PriorRegistrationApplications(
                            (string)q.Element("other-related-in"),
                            (from w in q.Elements("prior-registration-application")
                            select new PriorRegistrationApplication(
                            (string)w.Element("relationship-type"),
                            convertToInt((string)w.Element("number")))
                        ).ToList()
                        )
                        ).First(), //end prior-applications 
```

PriorRegistrationApplications 的对象定义是：

```
class PriorRegistrationApplications
{
    public string other_related_in; //only one appears, regardless of number of applications it seems.
    List<PriorRegistrationApplication> priorRegistrationApplications;

public PriorRegistrationApplications(string other_related_in, List<PriorRegistrationApplication> priorRegistrationApplications)
    {
        this.other_related_in = other_related_in;
        this.priorRegistrationApplications = priorRegistrationApplications;
    } 
```

对于 PriorRegistrationApplication：

```
class PriorRegistrationApplication
{
    public PriorRegistrationApplication() {
        relationship_type = "";
        number = 0;
    }

    public PriorRegistrationApplication(string relationship_type, int number)
    {
        this.relationship_type = relationship_type;
        this.number = number;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:30:36.017

目前尚不清楚代码在哪里失败（或者为什么你的`ToList`调用中有多余的括号，或者你为什么要调用`ToList`），但你可以考虑简单地将你的`First()`调用更改为`FirstOrDefault()`. 然后，如果返回`null`，则没有元素。这与创建“默认”不同，但您始终可以使用：

```
foo = query.FirstOrDefault() ?? new PriorRegistrationApplication(); 
```

如果你真的想要。（你真的*必须*在这里有一个空对象吗？）

另请注意：

```
convertToInt((string)w.Element("number")) 
```

不仅违反了命名约定，而且可能更简单地写成：

```
(int) w.Element("number") 
```

# ios - 在字典中访问字典中的字符串

> ID：12179086
> 
> 赞同：1
> 
> 时间：2012-08-29T13:28:19.833
> 
> 标签：ios, objective-c, ios4, nsdictionary, plist

如何在 plist 文件中的字典中访问字典中的字符串？我试过这个但它不起作用：

```
NSString *myfile = [[NSBundle mainBundle] pathForResource: arrayname ofType:@"plist"];
WordsDic = [[NSDictionary alloc] initWithContentsOfFile:myfile];

words = [WordsDic allKeys];

insidedic = [[NSDictionary alloc] initWithDictionary:[[words objectAtIndex:0] ]];;
level2 = [insidedic allKeys]; 
```

然后我尝试了这个但我得到了一个错误

```
for (NSString *parent in words) {

        insidedic = [WordsDic objectForKey:parent];
        level2 = [insidedic allKeys];

        NSLog(@"%@", level2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:22:42.320

您可以尝试以下方法：

```
for (NSString *key in [wordsDic allKeys]) {
   NSDictionary *secondLevel = [wordsDic objectForKey:key];
   for (NSString *secondLevelKey in [secondLevel allKeys]) {
      NSLog(@"%@",[secondLevel objectForKey:secondLevelKey]);
   }
} 
```

在您的代码中，“level2”是一个数组，而不是一个字符串，因此会因 NSLog 语句而崩溃。

# scala - 在 Scala 中键入伴随对象

> ID：12179092
> 
> 赞同：7
> 
> 时间：2012-08-29T13:28:28.217
> 
> 标签：scala, types, companion-object

我有一个类及其伴生对象，它们一起具有一些可重用的功能。我已经将伴生对象的功能封装成一个特征，所以现在的情况是这样的

```
class Foo {
  import Foo._

  def foo: Quux = bar(this)
}

trait Bar {
  def bar(f: Foo): Quux = frobnicate(f)
}

object Foo extends Bar 
```

由于`Foo.foo`是一种可重用的方法，我想把它放到它的 trait 中。

但是我必须找到一种方法来告诉类型检查器，虽然`bar`它不是 class 上的方法`Foo`，但它会在范围内，因为它是从伴随对象导入的。我想我需要一些东西，比如能够在类的伴随对象上打字。

有没有类似的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T14:04:18.933

有多种方法可以对 Scala 中所需的抽象进行建模。我将首先描述最简单的模式并分析您的问题，然后我将描述最复杂的模式，它用于 Scala 集合。

首先要注意的是，伴生对象是放置您需要调用的代码的正确位置，而无需类的实例，而在**实例**方法中使用的**帮助器的位置是****特征**。此外，智能 scala 编译器将为您的 trait 生成一个静态方法，并将所有将使用它的类链接到它。

 ****从您的代码的角度来看，很容易看出如何将其分解为特征，然后通过使用自类型表示法，可以强制仅当特征 Bar 混合时才能混合特征 FooTrait也是。

```
class Foo extends FooTrait with Bar 

  trait FooTrait {
    self:Bar =>
    def foo: Quux = bar(this)
  }

  trait Bar {
    def bar(f: Foo): Quux = frobnicate(f)
  } 
```

另请注意，如果您不想通过 Foo 类公开 Bar 接口，另一种方法如下

```
 class Foo extends FooTrait {
    protected val barrer = Foo
  }

  trait FooTrait {
    protected val barrer:Bar
    def foo: Quux = barrer.bar(this)
  }

  trait Bar {
    def bar(f: Foo): Quux = frobnicate(f)
  }

  object Foo extends Bar 
```

当您采用单个类和单个伴随对象时，第二种方法工作正常，但当您想要开发类层次结构时，您现在有一个可用于这些类中的每一个的伴随对象，并且您还想要强制伴生对象相对于“伴生类”具有某些特征。

还有一种更复杂的方法，用于 Scala 集合，我强烈建议您不要使用，除非绝对必要。

让我们从 GenTraversable 开始：

```
trait GenTraversable[+A]
extends GenTraversableLike[A, GenTraversable[A]]
   with GenTraversableOnce[A]
   with GenericTraversableTemplate[A, GenTraversable]
{
  def seq: Traversable[A]
  def companion: GenericCompanion[GenTraversable] = GenTraversable
}

object GenTraversable extends GenTraversableFactory[GenTraversable] {
  implicit def canBuildFrom[A] = new GenericCanBuildFrom[A]
  def newBuilder[A] = Traversable.newBuilder
} 
```

如您所见，特征定义了一个伴生对象，它为构建相同类型的新集合（通常用于过滤、映射等）提供了一些基本的基础设施。

通过在层次结构中向上，您可以看到`def companion`已改进：

```
trait GenIterable[+A]
extends GenIterableLike[A, GenIterable[A]]
   with GenTraversable[A]
   with GenericTraversableTemplate[A, GenIterable]
{
  def seq: Iterable[A]
  override def companion: GenericCompanion[GenIterable] = GenIterable
}

object GenIterable extends GenTraversableFactory[GenIterable] {
  implicit def canBuildFrom[A] = new GenericCanBuildFrom[A]
  def newBuilder[A] = Iterable.newBuilder
} 
```

如果您在类之间浏览，您将了解该机制用于保证对于每个具体的集合实现，在范围内都有一个伴生，该伴生具有与类本身相关的某种属性。这是可能的，因为在子类中细化方法的返回类型是合法的。

然而，为了正常工作，这个机制需要一些手动转换和大量通用参数，以及通用签名。

```
trait GenericTraversableTemplate[+A, +CC[X] <: GenTraversable[X]] extends HasNewBuilder[A, CC[A] @uncheckedVariance] {
 protected[this] def newBuilder: Builder[A, CC[A]] = companion.newBuilder[A]

  /** The generic builder that builds instances of $Coll
   *  at arbitrary element types.
   */
  def genericBuilder[B]: Builder[B, CC[B]] = companion.newBuilder[B]

  private def sequential: TraversableOnce[A] =this.asInstanceOf[GenTraversableOnce[A]].seq
// other code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:58:32.340

也许你需要一个[自我类型](http://debasishg.blogspot.in/2010/02/scala-self-type-annotations-for.html)？

```
trait Foo { self: Bar => // This says that anything that will mix in Foo
                         // must mix in Bar too.
  def foo: Quux = bar(this)
}

trait Bar {
  def bar(f: Foo): Quux = frobnicate(f)
}

object Foo extends Foo with Bar 
```****

# javascript - 各内各内各

> ID：12179094
> 
> 赞同：3
> 
> 时间：2012-08-29T13:28:34.247
> 
> 标签：javascript, jquery, json

我是使用 JSON 和 getJSON 函数等的新手，我正在尝试从 JSON 中获取数据，该 JSON 下降了几个级别并且可以有多个孩子。此刻，我可以通过将 .each 与另一个 .each 一起使用来查看我想要的值，例如：

```
$.each(data, function(i, value1) {
    $.each(value1, function(i, value2) {
        $.each(value2, function(i, value3) {
            $.each(value3, function(i, value4) {
                $.each(value4, function(i, value5) {
                    $.each(value5, function(i, value6) {
                        alert ("we got "+i);
                    }); 
```

唯一的问题是，我并不总是知道 JSON 中有什么，它可能有无限的孩子​​。那么我将如何让它成为动态的呢？

基本上我正在寻找的是不断检查孩子的东西，直到它达到最低水平。

另外，我知道最后的值 i 是 JSON 中任何值的索引，

有什么方法可以自动执行此操作，以便我可以检查 JSON 中的“名称”并返回“名称”的值？

这是我正在尝试使用的 JSON 示例：

```
[
 {
   "children": [
    {
      "children": [
       {
        "children": [
          {
            "children": [
              {
                "bucketPath": "AUDIO\\audio0.mp3",
                "id": 305,
                "modified": "2012-08-02T10:06:52",
                "name": "audio0.mp3",
                "state": "closed"
              } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:33:35.363

使用递归：

```
function recurse(name, obj) {
    if (!obj || typeof obj != "object")
        alert("found leaf '"+name+"': "+obj);
    else
        $.each(obj, recurse);
}
recurse("root", data); 
```

* * *

编辑：根据您的 JSON，可以使其更具体：

```
function recurse(arr) {
   for (var i=0; i<arr.length; i++)
       for (var prop in arr[i])
           if (prop == "children") // && arr[i].children instanceof Array
               recurse(arr[i].children);
           else
               alert("we got "+prop+": "+arr[i][prop]);
}
recurse(data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:32:34.473

这听起来像是需要[JPath](http://js-tables.googlecode.com/svn/trunk/jpath.js)或[JSONPath](http://goessner.net/articles/JsonPath/)

```
var name = jpath(data, '//name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:35:50.167

当 JSON 变得像这样有点复杂时，我认为 dojo 的 JSONQuery 是一个很好的解决方案。如果您熟悉它，它类似于 XPath。查询可能会变得相当复杂，但这里有一个查询示例，用于在任意深度搜索具有给定名称的属性：

```
var results = dojox.json.query("..property_name", json_data); 
```

这里有一篇很好的文章详细介绍了 dojo 的 JSONQuery 的使用：[http ://www.sitepen.com/blog/2008/07/16/jsonquery-data-querying-beyond-jsonpath/](http://www.sitepen.com/blog/2008/07/16/jsonquery-data-querying-beyond-jsonpath/)

# sql - SQL 错误 - 缺少 VALUES 关键字

> ID：12179097
> 
> 赞同：0
> 
> 时间：2012-08-29T13:28:39.153
> 
> 标签：sql, oracle-sqldeveloper

我收到以下错误，我不知道为什么

```
 INSERT INTO
        PRODUCT_TYPE, PANELIST_PROD_TYPE_DETAIL
             (TYPE_DESC, PRODUCT_TYPE_NUM)
        VALUES('JR' , 0) 
```

错误

> *缺少 VALUES 关键字*

我不知道为什么我`VALUES`在 SQL 语句中收到此错误。

`TYPE_DESC`在表中`PRODUCT_TYPE`，而`PRODUCT_TYPE_NUM`在表中`PANELIST_PROD_TYPE_DETAIL`。

有人可以告诉我我的 SQL 语句有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:31:14.240

您需要像这样单独插入每个表：

```
INSERT into PRODUCT_TYPE(TYPE_DESC) VALUES('JR');
INSERT INTO PANELIST_PROD_TYPE_DETAIL(PRODUCT_TYPE_NUM) VALUES(0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:31:23.803

您需要为每个表创建一个插入语句：

```
INSERT into PRODUCT_TYPE(TYPE_DESC) VALUES('JR');

INSERT into PANELIST_PROD_TYPE_DETAIL (PRODUCT_TYPE_NUM) VALUES(0); 
```

# sas - 创建扫描列表的列

> ID：12179104
> 
> 赞同：3
> 
> 时间：2012-08-29T13:28:55.533
> 
> 标签：sas

假设我有一个宏变量，它是一个单词列表

```
%LET myvariable= Avocado Banana Rice Corn Mango Milk Strawberry Banana Banana Lime; 
```

现在，我希望有一个数据集，其中每一行是该列表的一个单词，加上一个 ID 号

```
ID    Ingredient
1     Avocado
2     Banana
3     Rice
4     Corn
5     Mango
6     Milk
7     Strawberry
8     Banana
9     Banana
10    Lime 
```

我试过这样的事情：

```
DATA food;
DO id = 1 TO 10;
Ingredient= SCAN(&myvariable.,id,' ');
    OUTPUT;
END;
RUN; 
```

但这产生了一个错误：“错误 388-185：需要算术运算符。”

这似乎是一件微不足道的事情，但不知何故我被卡住了。因此，我们将不胜感激任何帮助。

一些背景：

在我的真实数据集中，这个宏变量是通过 PROC SQL 从一个数据集中创建的，其中每个条目都有几个单词，用空格分隔。像这样的东西：

```
Product_ID    Ingredients
1             Sugar Milk Vanilla
2             Corn Sugar Banana
3             Apple Banana Maple_Syrup Oats
...           ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:36:25.200

很接近。无需评论**为什么**要这样做，您只需在宏变量名称周围加上双引号：

```
DATA food;
   DO id = 1 TO 10;
      Ingredient= SCAN("&myvariable.",id,' ');
      OUTPUT;
   END;
RUN; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:02:03.807

不需要宏变量和所有其他东西。您可以直接从数据步执行此操作：

```
**
** CREATE SOME SAMPLE DATA
*;
data sentences;
  infile datalines truncover;
  input Product_ID    $
        Ingredients   $100.
        ;
datalines;
1 Sugar Milk Vanilla
2 Corn Sugar Banana
3 Apple Banana Maple_Syrup Oats
;
run;

**
** OUTPUT EACH WORD AS A ROW
*;
data words;
  length word $100;
  set sentences;
  retain id 0;

  cnt = 1;
  word = scan(ingredients,cnt);
  do while (word ne '');
    id = id + 1;
    output;
    cnt = cnt + 1;
    word = scan(ingredients,cnt);
  end;

  drop ingredients cnt;

run; 
```

# javascript - 使用 javascript 从页面中抓取某些链接

> ID：12179105
> 
> 赞同：0
> 
> 时间：2012-08-29T13:28:59.400
> 
> 标签：javascript, unique, scrape

**这是我需要抓取的示例代码块：**

```
<p>This paragraph contains <a href="http://twitter.com/chsweb" data-placement="below" rel="twipsy" target="_blank" data-original-title="Twitter">links to Twitter folks</a>, and <a href="http://twitter.com/blogcycle" data-placement="below" rel="twipsy" target="_blank" data-original-title="Twitter">more links to other Twitter folks</a>, but it also contains <a href="http://www.someOtherWebsiteHere.com">non-Twitter links too</a>.  How can I list only the Twitter links below?</p> 
```

**此脚本生成页面上每个 URL 的列表：**

```
<script>
var allLinks = document.links;
for (var i=0; i<allLinks.length; i++) {
  document.write(allLinks[i].href+"<BR/>");
}
</script> 
```

**如何修改脚本，使其仅列出包含特定域的 URL，例如；twitter.com/?**

这是一个演示页面： [http ://chsweb.me/OucTum](http://chsweb.me/OucTum)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:42:55.703

在现代浏览器上，您可以轻松检索所有所需的链接

```
var twitter_links = document.querySelectorAll('a[href*="twitter.com"]'); 
```

using`.querySelectorAll()`在速度方面有点不利，但您可能不会注意到任何显着差异，并且它会使代码更易于阅读并且比使用`for`带有正则表达式的循环更短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:34:19.153

以下将把所有 Twitter 链接放在`twitter_links`数组中：

```
var twitter_links = [ ],
    links = document.getElementsByTagName('a');
for(var i in links)
{
    if(/twitter.com/i.exec(links[i].href))
    {
        twitter_links.push(links[i]);
    }
} 
```

这是给你的 jsFiddle > [http://jsfiddle.net/Pv8DH/](http://jsfiddle.net/Pv8DH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:31:57.577

您可以使用[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)链接元素上的属性来提取 href 的不同部分。前：

```
var link = allLinks[i];
if ( /twitter\.com/.test( link.hostname ) ) {
    document.write(link.href+"<BR/>");
} 
```

您的代码的另一个问题：如果您`document.write`在 for 循环中使用，它将有效地清空链接集合，因为它们只是对当前文档中存在的链接的引用。所以它永远不会超过第一个链接。将它们收集在一个数组中：

```
var links = [];
for (var i=0; i<allLinks.length; i++) {
    var link = allLinks[i];
    if ( /twitter\.com/.test( link.hostname ) ) {
        links.push(link.href);
    }
}

document.write(links.join('<br>')); 
```

**演示**：http: [//jsfiddle.net/3xub6/](http://jsfiddle.net/3xub6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:32:00.730

**原文：**不在演示页面上工作（[示例 6](http://bit.ly/PO2v4o)）

```
<script>
if (allLinks[i].href.match("twitter\.com"))
{
     document.write(allLinks[i].href+"<BR/>");
}
</script> 
```

**已修订：**正在处理演示页面（[示例 7](http://chsweb.me/NWHuWi)）

```
<script>
var allLinks = document.links;
for (var i=0; i<allLinks.length; i++) {
      if (allLinks[i].href.match("twitter.com")) {
            document.write(allLinks[i].href+"<BR/>");
      }
}
</script> 
```

# ruby-on-rails - 将工厂女孩与制造进行比较

> ID：12179107
> 
> 赞同：24
> 
> 时间：2012-08-29T13:29:03.053
> 
> 标签：ruby-on-rails, ruby, testing, factory-bot, fabrication-gem

关于 gem 的资源似乎很少[`fabrication`](http://fabricationgem.org/)，我找不到一个很好的比较来区分它与[`factory_girl`](https://github.com/thoughtbot/factory_girl). 至于版本`fabrication-2.2.3`和`factory_girl-4.0.0`，我几乎找不到区别。这些宝石如何比较？什么可以做出`fabrication`更好的选择，为什么？他们两个都收敛了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T15:23:02.937

就其价值而言，我发现制造速度更快，而且我遇到的错误更少。我认为巨大的人气差距主要是因为制造要更新得多。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-29T13:38:01.757

Factory Girl 有一个额外的概念，`trait`其中非常有用。

其他功能似乎或多或少相似。

如果要选择一个，请考虑下载次数：

*   工厂女孩：[7,550,264](http://rubygems.org/gems/factory_girl)

*   制造：[521,433](http://rubygems.org/gems/fabrication)

当您寻求帮助/支持时可能会很有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-09T02:53:53.287

我们从 Factory Girl 开始，但最后为了构建“实际的”AR 模型实例而放弃了它；我现在正在重新考虑一个决定。

到目前为止，我喜欢Fabricator。模拟关联似乎更容易，因为在 FG 中绝对*没有任何东西*可以访问真正的数据库，而这在 FG 中从未感觉完全正确。当然，还有 YMMV，还有：

> 在你有数据之前永远不要理论。总是，你最终会扭曲事实以适应理论，而不是扭曲理论以适应事实。——福尔摩斯的事实理论定律

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-12T07:16:20.717

我最近做了一个 Fabricator vs FactoryGirl 的分析，因为我很好奇其他人提到的性能评论。我还发现 Fabricator 稍微快一些（但仅在使用关联时）：

[https://ksylvest.com/posts/2017-08-12/fabrication-vs-factorygirl](https://ksylvest.com/posts/2017-08-12/fabrication-vs-factorygirl)

鉴于运行时非常接近，我更喜欢 Fabricator 而不是 FactoryGirl，因为设置关联默认情况下会传播构建与创建（而不是必须指定策略）。

# android - 如何解决 IllegalArgumentException？

> ID：12179114
> 
> 赞同：0
> 
> 时间：2012-08-29T13:29:17.547
> 
> 标签：android, database, sqlite, methods, illegalargumentexception

我是安卓的菜鸟。并且在使用 SQLite 表时出现非法参数异常。logcat 表明这是由于我的游标没有关闭，所以我关闭了所有游标。现在我仍然收到没有详细消息的 IllegalArgumentException，而且我的 logcat 没有显示任何错误消息，只是调试和警告消息。没有任何错误消息可以为我指明正确的方向，我什至不知道如何开始解决此问题。任何帮助是极大的赞赏。

这是我事先用光标问题修复的代码：

```
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "cointype_name";
public static final String KEY_QUANTITY = "cointype_quantity";
public static final String KEY_OUNCES = "cointype_ounces";
public static final String KEY_VALUE = "cointype_value";

private static final String DATABASE_NAME = "PortfolioDatabase";
private static final String DATABASE_TABLE = "cointypeTable";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_QUANTITY  + " TEXT NOT NULL, " +
                KEY_OUNCES + " TEXT NOT NULL, " +
                KEY_VALUE + " TEXT NOT NULL);"
        );  
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }       
}

public PortfolioDatabase(Context c){
    ourContext = c;
}

public PortfolioDatabase open() throws SQLException{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();      
    return this;
}
 public void close(){
     ourHelper.close();
}

public long createEntry(String coin, String quantity, String ounces, String value) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, coin);
    cv.put(KEY_QUANTITY, quantity);
    cv.put(KEY_OUNCES, ounces);
    cv.put(KEY_VALUE, value);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };        
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + /*c.getString(iRow) + " " +*/ c.getString(iName) + " " + c.getString(iQuantity) + " " + c.getString(iOunces) + " " + c.getString(iValue) + "\n";

    }
    c.close();
    return result;

}

public String getCoin() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + /*c.getString(iRow) + " " +*/ c.getString(iName).substring(0, Math.min(18, c.getString(iName).length())) + "\n";
    }
    c.close();
    return result;
}

    public String getQty() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/ c.getString(iQuantity) + "\n";
        }           
    c.close();
    return result;
}

    public String getOunces() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/  c.getString(iOunces) + "\n";
        }
        c.close();
        return result;
    }

    public String getValue() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/ c.getString(iValue) + "\n";
        }           
        c.close();
    return result;
}

public String getSingleValue(String aCoin) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE};     
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=" + aCoin, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    if (c != null){
        c.moveToFirst();
        result= c.getString(0);
        return result;
    }
    c.close();
    return null;
}

/*public String getHotness(long l) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String hotness = c.getString(2);
        return hotness;
    }
    c.close();
    return null;
}*/

public void updateEntry(String mCoin, String mQuantity, String mOunces, String mValue) throws SQLException{
    // TODO Auto-generated method stub
    String[] whereArgs = new String[] { mCoin };
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);
    cvUpdate.put(KEY_QUANTITY, mQuantity);
    cvUpdate.put(KEY_OUNCES, mOunces);
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=?", whereArgs);   
}

public void changeCurrency(String mCoin, String mValue) throws SQLException{
    // TODO Auto-generated method stub
    String[] whereArgs = new String[] { mCoin };
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);      
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=?", whereArgs);   
}

public void deleteEntry(String coin) throws SQLException{
    String[] whereArgs = new String[] { coin };
    ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=?", whereArgs);
}

public void removeAll()
{
    /*// db.delete(String tableName, String whereClause, String[] whereArgs);
    // If whereClause is null, it will delete all rows.
    SQLiteDatabase db = helper.getWritableDatabase(); // helper is object extends SQLiteOpenHelper
    db.delete(DatabaseHelper.TAB_USERS, null, null);
    db.delete(DatabaseHelper.TAB_USERS_GROUP, null, null);*/
    ourDatabase.delete(DATABASE_TABLE, null, null);

}

} 
```

导致错误的代码。

```
public void add(){
    boolean didItWork = true;
    try {
        //String name = sqlName.getText().toString();
        //String hotness = sqlHotness.getText().toString();
        calculateaddentry();
        String coin = addcoinselection.getSelectedItem().toString();
        String quantity = sqlAddCoin.getText().toString();
        String ounces = entryounces;
        String value = denomination + newentryvalue;

        //PortfolioDatabase entry = new PortfolioDatabase(Portfolio.this);
        info.open();
        info.createEntry(coin, quantity, ounces, value);
        info.close();

        info.open();
        String data = info.getData();       
        String ccoin = info.getCoin();      
        String cqty = info.getQty();        
        String counces = info.getOunces();          
        String cvalue = info.getValue();
        info.close();

        currentcoin.setText(ccoin);
        currentqty.setText(cqty);
        currentounces.setText(counces);
        currentvalue.setText(cvalue);

    } catch (Exception e) {
        didItWork = false;
        String error = e.toString();
        Dialog d = new Dialog(this);
        d.setTitle("Dang it!");
        TextView tv = new TextView(this);
        tv.setText(error);
        d.setContentView(tv);
        d.show();
    } finally {
        if (didItWork) {
            /*Dialog d = new Dialog(this);
            d.setTitle("Heck Yea!");
            TextView tv = new TextView(this);
            tv.setText("Success");
            d.setContentView(tv);
            d.show();*/
        }
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:43:16.440

当您在数据库类中更改表结构、添加列或添加表时，请尝试将`DATABASE_VERSION`值更改为并递增。`2`

更改`DATABASE_VERSION`触发调用`onUpgrade()`，在您的情况下将删除表并创建一个新表。只要`DATABASE_VERSION`相同，`onUpgrade()`或者`onCreate()`不会被调用，因此结构不会受到影响，因此不会更新数据库结构。这可能是您收到 IllegalArgumentException 的原因，因为它可能无法在设备的数据库中找到列，因为该列不存在。这就是文档所说的含义：

> 注意：此类假设升级的版本号单调递增。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

因此，如果你做一个简单的数据库，运行它，然后在方法中添加一列`onCreate()`而不更改数据库版本，数据库类方法`onCreate()`或`onUpgrade()`不会被调用，因为就它而言，数据库是相同的。

您必须记住，Android 本地数据库是*持久*的。它会在应用程序运行后保留在您的设备上。因此，数据库保存从应用程序的一次运行到另一次运行的信息。***每次***运行应用程序时，数据库都不会重置。这不仅包括它保存的数据， *还*包括数据库结构，例如表和列。

当您首先运行代码时，它会检查是否已经创建了数据库。这是在实际设备上。如果存在，它将检查设备上的数据库版本是否与`DATABASE_VERSION`助手类中的匹配。如果是这样，它什么也做不了。如果 `DATABASE_VERSION`数据库类中的 大于设备上的数据库版本，则`onUpgrade()`调用该方法并将根据定义调整数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:40:22.337

确保您没有留下待处理的事务并打开游标。

对于插入、更新、删除：

```
db.beginTransaction();
try{

    //INSERT/UPDATE/DELETE statements here

    db.setTransactionSuccessful();
}finally {
    db.endTransaction();
} 
```

对于光标：

```
Cursor c = db.query( // query code

try{
   while(c.moveToNext()){

     //  read data

   }
} finally{
   c.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:30:44.747

尝试将数据库名称和表名称重命名为全部小写。

```
private static final String DATABASE_NAME = "portfolio_database";
private static final String DATABASE_TABLE = "cointype_table"; 
```

数据库以前工作过吗？

# python - 带有附加字段的单选按钮的 Django 设计模式

> ID：12179116
> 
> 赞同：1
> 
> 时间：2012-08-29T13:29:28.733
> 
> 标签：python, django, forms

我不确定这些类型的字段在技术上被称为什么，但它们是您拥有一组无线电选择的字段，并且每个字段都可以有一些额外的字段，这些字段只有在选择其关联的无线电时才会得到验证。

```
Field Label:
(*) Option 1
( ) Option 2 [Additional Field]
( ) Option 3 [Another Field], [Maybe Two] 
```

我正在寻找的关键内容：

1) 任何现有的用于帮助渲染此类字段的解决方案。即用它们的选项对附加字段进行分组。2）（不那么重要）处理验证的任何快捷方式，即仅在选择了选项时才验证其他字段。

通常，当我做这种事情时，我最终不得不手动编写大量的 HTML，这是一个轮子，我宁愿避免不得不不断地重新发明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:33:56.423

在客户端，您可以使用一些 js，例如（使用 jQuery）：

```
$('input[name=your_radio_field_name]').change(function() {
    switch ($(this).val()) {
        case 'option1_value':
            $('input[name=extra_field_for_option2], input[name=extra_field_for_option3]').hide();
            break;
        case 'option2_value':
            $('input[name=extra_field_for_option2]').show();
            $('input[name=extra_field_for_option3]').hide();
            break;
        // and so on ...
    } 
}) 
```

在服务器端，您可以拥有这样的字段验证功能：

```
def clean_extra_field_for_option2(self):
    if self.cleaned_data.get('your_radio_field_name') != 'option_2_value':
        return None
    return self.cleaned_data.get('extra_field_for_option2')

def clean_extra_field_for_option3(self):
    if self.cleaned_data.get('your_radio_field_name') != 'option_3_value':
        return None
    return self.cleaned_data.get('extra_field_for_option3') 
```

当然，如果你有很多这种情况，你应该先尝试像这样简单的东西，然后重构。

# python - Python httplib2 不适用于经过身份验证的资源

> ID：12179122
> 
> 赞同：1
> 
> 时间：2012-08-29T13:30:07.187
> 
> 标签：python, http, urllib2, basic-authentication, httplib2

我有一个经过身份验证的资源，需要领域、用户名和密码进行身份验证。Python 的 urllib2 有提供领域的规定，而我没有找到 httplib2 的任何规定。以下是使用 urllib2 的示例代码：

```
 auth_handler = urllib2.HTTPBasicAuthHandler()
  auth_handler.add_password("Protected",
                          uri="http://" + url,
                          user=username,
                          passwd=password)
  opener = urllib2.build_opener(auth_handler)
  urllib2.install_opener(opener)

  try :
     data = urllib2.urlopen(url, None, timeout).read() 
```

这里的“受保护”是身份验证所需的领域。

现在看看 httplib2 ：

```
req = httplib2.Http(timeout=5)
req.add_credentials(username, password)
response, data = req.request (url, headers={'Connection': 'Keep-Alive', 'accept-encoding': 'gzip'}) 
```

在 httplib2 的情况下，我没有找到任何提供域字符串进行身份验证的规定。

有没有办法在 httplib2 中添加这个领域字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:34:52.573

如果`httplib2`不是必须的，使用[`requests`](http://docs.python-requests.org)它变得微不足道：

```
requests.get('http://www.example.com/', auth=('user', 'pass')) 
```

# c# - C#父子静态变量访问

> ID：12179123
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:30:07.300
> 
> 标签：c#, inheritance

我有几门课是这样的：

```
public class Weapon
{
    public static int clip;
}

public class Uzi : Weapon{}
public class Ak47 : Weapon{} 
```

我在主代码的其他地方：

```
Uzi.clip = 5;
Ak47.clip = 1; 
```

这行得通吗，UZI 会有自己独特的夹子还是和 AK47 一样？如果不是如何实现这一点？

这是上面的简化版本，我后面的内容要复杂得多，但我只需要一个如何做到这一点的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:31:30.480

不。

`static`派生类中的字段不重复。
`BaseClass.Field`并`DerivedClass.Field`编译为相同的 IL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:34:13.067

一是**继承**。

为了`Uzi`成为 a `Weapon`，它必须从其基类*继承。*即 ，`Uzi : Weapon`对于 Ak47 也是如此。

然后，**类 x 实例**变量。

当您将属性声明为`static`时，它是一个*类*变量。也就是说，它不属于该类的*实例*（对象），而是属于该类本身。所以，如果你有一个`Uzi`和一个`Ak47`，并且你说`MyUzi.clip = 20;`，`MyAk47`将具有相同的值。

因此，为了实现您正在寻找的内容，请删除`static`修饰符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:34:45.617

为什么不试试呢？

它不起作用，因为两者都指的是同一个`clip`. （这里没有区别，但如果它是一个字符串，你可以测试并证明它们是同一个对象）。

你能做的最好的事情是：

```
public abstract class Weapon
{
  public abstract int Clip{get;}//though my bow and sword are both weapons and neither has a clip...
}

public class Uzi : Weapon
{
  public override int Clip
  {
    get { return 5; }
  }
}
public class Ak47 : Weapon
{
  public override int Clip
  {
    get { return 1; }
  }
} 
```

如果您希望单个武器具有`Clip`不同的代码，那么您需要再次使用不同的代码。

# java - 将 Void 用作可选参数的更好选择

> ID：12179124
> 
> 赞同：3
> 
> 时间：2012-08-29T13:30:08.483
> 
> 标签：java, oop, generics

我有一个接口指定方法，该方法将泛型类型作为输入，用于创建 URL。

```
interface UrlGenerator<T> {

    String prepareUrl( T input );

} 
```

有一种实现不需要该参数。它使用 Void 作为泛型类型 T。

```
class StaticUrlGenerator implements UrlGenerator<Void> {

    private final String url;

    public StaticUrlGenerator( String url ) {
        this.url = url;
    }

    @Override
    public String prepareUrl( Void nothing ) {
        return url;
    }

} 
```

StaticUrlGenerator 使用起来很尴尬，因为它需要 null 作为`prepareUrl`方法的参数。

我可能会丢失`input`参数：

```
interface UrlGenerator<T> {

    String prepareUrl( T input );

} 
```

现在我必须以其他方式（在构造函数中）将所需的输入传递给实现类。这样我就失去了类的无状态特性，每次我想更改输入时，我都必须使用不同的构造函数参数重新创建它。

```
class SchedulePageUrlGenerator implements UrlGenerator {

    public static final String QUERY_STRING_BASE = "?from=";

    private final String showingBaseUrl;
    private final LocalDate date;

    public SchedulePageUrlGenerator( String showingBaseUrl, LocalDate date ) {
        this.showingBaseUrl = showingBaseUrl;
        this.date = date;
    }

    @Override
    public String prepareUrl() {
        DateTimeFormatter fmt = DateTimeFormat.forPattern( "yyyy-MM-dd" );
        String dateStr = fmt.print( date );
        return showingBaseUrl + QUERY_STRING_BASE + dateStr;
    }

} 
```

我认为我的设计一定存在根本性的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:42:42.093

> 我认为我的设计一定存在根本性的问题。

唯一错误的是您试图将单参数方法和零参数方法混为一谈。你不能在 Java 中做到这一点......不打开其他问题的大门。

基本上你有三个选择：

*   坚持您当前的方法并明确传递`null`Void 案例。

*   向接口添加第二个（无参数）方法以处理 Void 情况，并使其调用带有`null`. 您的代码需要处理`null`when `T`is not `Void`，但无论如何它确实如此。

*   重构接口，以便有两个不同的接口，一个带有 a `String prepareUrl()`，另一个带有`String prepareUrl(T)`，并将前者实现为特例类。

就个人而言，选项 2 略好于选项 1，但选项 3 可能会导致其他问题；例如，具有两个变体的特定方法将成为对整个`T`类型空间进行多态方法调用的障碍。

*（可变参数是一个坏主意，因为这为多个*参数打开了大门，这对您的问题可能毫无意义。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:36:35.250

问题是如果`SchedulePageUrlGenerator`真的*是*`UrlGenerator`. 如果它有不同的论点，那么我认为它不是。如果您的界面有可选参数，那么我猜在调用代码中您必须执行以下操作：

```
// this is not a good pattern
if (urlGenerator instanceof SchedulePageUrlGenerator) {
    (SchedulePageUrlGenerator)urlGenerator.prepareUrl();
} else {
    urlGenerator.prepareUrl(...);
} 
```

这似乎是一个黑客。

综上所述，如果您的接口有更多方法并且只有`prepareUrl(...)`不同的方法，那么我`null`认为`Void`将`prepareUrl(...)`. 我想我需要查看更多调用框架来了解您如何生成参数以及为什么`null`参数是这样一个问题。

如果您的接口中有更多方法，另一种选择是*同时*使用带参数和不带参数的准备方法：

```
String prepareUrl( T input );
String prepareUrlNoInput(); 
```

`UnsupportedOperationException`然后你可以根据哪个实现支持哪个抛出。但同样，如果你必须做类似上述`instanceof` `if`陈述的事情，那么我认为这个`null`论点更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:36:34.860

您似乎希望为不同的实现评估不同数量的参数。

最接近这一点的是使用可变参数

```
interface UrlGenerator<T> {
    String prepareUrl(T... input );
}

// can use
System.out.println(new StaticUrlGenerator("url").prepareUrl());

//or
System.out.println(new StaticUrlGenerator("url").prepareUrl(null)); 
```

# database - 什么是范围锁？

> ID：12179130
> 
> 赞同：20
> 
> 时间：2012-08-29T13:30:33.973
> 
> 标签：database

好吧，维基百科中介绍隔离的主题有这样的词，链接在[这里](http://en.wikipedia.org/wiki/Concurrency_control)

......... *Serializable 这是最高的隔离级别。使用基于锁的并发控制 DBMS 实现，可串行化要求在事务结束时释放读取和写入锁（在选定数据上获取）。当 SELECT 查询使用范围 WHERE 子句时，还必须获取**范围锁，尤其是为了避免幻读现象（见下文）。**使用基于非锁的并发控制时，不获取锁；但是，如果系统检测到多个并发事务之间的写冲突，则只允许其中一个事务提交。有关此主题的更多详细信息，请参阅快照隔离。*

但整个主题没有解释“范围锁”，谷歌也没有准确的描述。

什么是“范围锁”，与“读锁”和“写锁”有什么不同？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T14:08:14.713

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T13:43:05.420

如果您在`WHERE`子句中使用范围，数据库将锁定该范围内的每个可能的元组以及下一个元组（之前和之后）。如果在某个方向上没有可用的下一个元组，它将在该方向上完全锁定。

所以在`SELECT`交易中是可靠的。

# performance - 如何优化 git update-index？

> ID：12179132
> 
> 赞同：1
> 
> 时间：2012-08-29T13:30:38.640
> 
> 标签：performance, git, optimization, git-filter-branch, git-rewrite-history

我有一个相当大的存储库（11 GB，900,000+ 个文件），并且在合理的时间内无法进行迭代。经过一番分析，真正的瓶颈似乎是 git update-index：

```
$ time git update-index --replace $path > /dev/null

real    0m5.766s
user    0m1.984s
sys     0m0.391s 
```

这使得获取文件列表的天数令人难以忍受。有什么方法可以加快更新索引操作吗？

对于它的价值，我在 Windows 7 上运行 cygwin。

**编辑：**为这个问题提供更多背景信息。

大型存储库来自 SVN 导入，并且包含许多不应在存储库中的二进制文件。但是，我想保留提交历史记录和提交日志。为了做到这一点，我试图用文件哈希替换二进制文件的内容，这应该压缩存储库并允许我保留历史记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:24:08.667

您想使用[BFG Repo-Cleaner](http://rtyley.github.com/bfg-repo-cleaner/)，这是一种更快、更简单的替代方案，`git-filter-branch`专门用于从 Git 存储库中删除**大文件。**

下载[BFG jar](http://rtyley.github.com/bfg-repo-cleaner/#download)（需要 Java 6 或更高版本）并运行以下命令：

```
$ java -jar bfg.jar  --strip-blobs-bigger-than 1MB  my-repo.git 
```

任何大小超过 1MB 的文件（不在您的*最新*提交中）都将从您的 Git 存储库的历史记录中删除，并替换为`.git-id`包含原始文件的**旧 Git hash-id**的文件（*与具有问题的文件哈希*要求的二进制文件）。

然后，您可以使用`git gc`清除死数据：

```
$ git gc --prune=now --aggressive 
```

BFG 通常比运行快[10-50](https://docs.google.com/spreadsheet/ccc?key=0AsR1d5Zpes8HdER3VGU1a3dOcmVHMmtzT2dsS2xNenc)`git-filter-branch`倍，并且这些选项是围绕以下两个常见用例量身定制的：

*   删除**疯狂的大文件**
*   删除**密码、凭证**和其他**私人数据**

*全面披露：我是 BFG Repo-Cleaner 的作者。*

# jsf - Richfaces：在 Rich:datatable 中验证 inputTexts

> ID：12179133
> 
> 赞同：1
> 
> 时间：2012-08-29T13:30:42.837
> 
> 标签：jsf, jsf-2, richfaces

我使用`rich:dataTable`用户可以添加新行的地方。其中一行包含两个`<h:inputText>`到达和离开时间。当用户继续前进（离开/模糊输入文本）时，应立即验证这些字段。验证效果很好，检测到错误的输入。这里是`rich:column`.

```
<rich:column>
<f:facet name="header">
    <h:outputText value="#{txt.detail_itinerary_times}" />
</f:facet>
<h:inputText id="arrivalTime" value="#{stop.arrival}" 
    validatorMessage="{txt.error_detailview_notatime}" size="5">
    <f:validateRegex 
        pattern="^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$" />
    <rich:validator />  
</h:inputText>
<h:inputText id="departureTime" value="#{stop.departure}" 
    validatorMessage="#{txt.error_detailview_notatime}" size="5">
    <f:validateRegex 
        pattern="^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$" />
    <rich:validator />
</h:inputText>
<rich:message for="arrivalTime departureTime" /> 
```

问题来了：如果这个数据表中有 20 行，而您输入了一个错误的时间，则*验证失败*消息会显示 20 次，对于每一行，对于每个输入字段。但它应该只显示在输入错误时间的输入字段中。

以下是讨论的一些类似问题。不幸的是，我无法加入这些线程并添加评论（分数不够？）。所以，很抱歉为可能已经回答的问题打开一个新线程。

# .net - 动态 TSQL 上的复合键异常

> ID：12179135
> 
> 赞同：1
> 
> 时间：2012-08-29T13:30:48.327
> 
> 标签：.net, sql-server, vb.net, tsql, sql-server-2005

我有几个动态构建的查询，在 and 列上有一个复合主`tblWarr_SWH_WarrCLHD_35`键。`[Account No]``tblWarr_SWH_WarrCLHD_35.[Claim No]`

最近出现了一个新要求，要求我们在结果中提供例外，因此用户可以要求通过`[Account No]`和过滤掉每一行`[Claim No]`。将有不确定数量的行异常。

`[Account No]`客户传递例外列表和`[Claim No]`组合的最佳方法是什么？

我需要传入一个字符串并在 T-SQL 中解析它吗？我可以这样建造

```
AND NOT ([Account No] = 'abc' AND [Claim No] = 'cde') 
AND NOT ([Account No] = 'fgh' AND [Claim No] = 'ijk') 
```

结果通过带有两个表格的类型化数据集显示给客户端软件。

**原始数据**

```
DECLARE @SQL nvarchar(4000)
DECLARE @SQLWhere nvarchar(4000) 
DECLARE @SQLOrder nvarchar(MAX)

SET @SQL = 'SELECT tblWarr_SWH_WarrCLHD_35.[Account No], tblWarr_SWH_WarrCLHD_35.[Claim No], tblWarr_SWH_WarrCLHD_35.ClaimCost, 
                      tblWarr_SWH_WarrCLHD_35.[Serial No], tblWarr_SMT_MCType_47.[Machine Type], tblWarr_SMH_MCHist_34.[Date Built], 
                      tblWarr_SMH_MCHist_34.[Date Sold], tblWarr_SVC_ServiceCodes.[Service Code], tblWarr_DefectCodes.Code AS [Defect Code], 
                      tblWarr_SPN_PartNo_01.[Part No], tblWarr_SPN_PartNo_01.[Part Description], tblWarr_SWH_WarrCLHD_35.[Failed Part No Qty], 
                      tblWarr_MachineHours.[Machine Hours At Failure], tblWarr_SWH_WarrCLHD_35.[Claim Date], tblWarr_SNA_WarNar_77.Narrative, 
                      tblWarr_SSU_Supplier_09.[Supplier Name],tblWarr_SWH_WarrCLHD_35.[ClaimStateID]
                FROM tblWarr_SMH_MCHist_34 INNER JOIN
                      tblWarr_SWH_WarrCLHD_35 ON tblWarr_SMH_MCHist_34.[Serial No] = tblWarr_SWH_WarrCLHD_35.[Serial No] INNER JOIN
                      tblWarr_SMT_MCType_47 ON tblWarr_SMH_MCHist_34.MachineTypeID = tblWarr_SMT_MCType_47.ID INNER JOIN
                      tblWarr_SVC_ServiceCodes ON tblWarr_SWH_WarrCLHD_35.ServiceCodeFullID = tblWarr_SVC_ServiceCodes.ID INNER JOIN
                      tblWarr_DefectCodes ON tblWarr_SWH_WarrCLHD_35.DefectCodeID = tblWarr_DefectCodes.ID INNER JOIN
                      tblWarr_SPN_PartNo_01 ON tblWarr_SWH_WarrCLHD_35.FailedPartNoID = tblWarr_SPN_PartNo_01.ID INNER JOIN
                      tblWarr_MachineHours ON tblWarr_SWH_WarrCLHD_35.MachineHoursID = tblWarr_MachineHours.ID INNER JOIN
                      tblWarr_SNA_WarNar_77 ON tblWarr_SWH_WarrCLHD_35.NarrativeID = tblWarr_SNA_WarNar_77.ID INNER JOIN
                      tblWarr_SSU_Supplier_09 ON tblWarr_SWH_WarrCLHD_35.SupplierID = tblWarr_SSU_Supplier_09.ID'
SET @SQLWhere = ' WHERE ((tblWarr_SPN_PartNo_01.[Part No] = @_PartNumber) AND '
SET @SQLOrder = ' ORDER BY CAST(tblWarr_SMH_MCHist_34.[Date Built] AS smalldatetime) DESC'

IF (@ClaimDateFrom IS NOT NULL AND @ClaimDateTo IS NOT NULL)AND (LEN(@ClaimDateFrom) > 0 AND LEN(@ClaimDateTo) > 0)
    SET @SQLWhere = @SQLWhere + '(tblWarr_SWH_WarrCLHD_35.[Claim Date] BETWEEN @_ClaimDateFrom AND @_ClaimDateTo) AND '

IF (@BuildDateFrom IS NOT NULL AND @BuildDateTo IS NOT NULL)AND (LEN(@BuildDateFrom) > 0 AND LEN(@BuildDateTo) > 0)
    SET @SQLWhere = @SQLWhere + '(CAST(tblWarr_SMH_MCHist_34.[Date Built] AS SmalldateTime) BETWEEN @_BuildDateFrom AND @_BuildDateTo) AND '

IF (@ClaimStates IS NOT NULL)AND (LEN(@ClaimStates) > 0)
    SET @SQLWhere = @SQLWhere + '(tblWarr_SWH_WarrCLHD_35.[ClaimStateID] IN (SELECT value FROM Split(''' + ',' + ''',@_ClaimStates))) AND '

IF LEN(@SQLWhere) > 0
    SET @SQL = @SQL + LEFT(@SQLWhere, LEN(@SQLWhere)-4) + ')' + @SQLOrder

EXEC sp_executesql @SQL,
    N'@_PartNumber nvarchar(20), @_ClaimDateFrom smalldatetime, @_ClaimDateTo smalldatetime, @_BuildDateFrom smalldatetime, @_BuildDateTo smalldatetime, @_ClaimStates nvarchar(50)',
    @_PartNumber = @PartNumber, @_ClaimDateFrom = @ClaimDateFrom, @_ClaimDateTo = @ClaimDateTo, @_BuildDateFrom = @BuildDateFrom, @_BuildDateTo = @BuildDateTo, @_ClaimStates = @ClaimStates 
```

**聚合数据**

```
DECLARE @SQL nvarchar(4000)
DECLARE @SQLWhere nvarchar(4000) 
DECLARE @SQLOrder nvarchar(MAX)
DECLARE @Date1 as nvarchar(5)   

SET @Date1 = '01/'

SET @SQL = 'SELECT CAST(@_Date1 + CAST(DATEPART(mm,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(2)) + ''' + '/' + ''' + CAST(DATEPART(yyyy,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(4)) as smalldatetime) AS ClaimDate , COUNT(tblWarr_SWH_WarrCLHD_35.[Claim No]) As FaultCount
                FROM tblWarr_SMH_MCHist_34 INNER JOIN
                      tblWarr_SWH_WarrCLHD_35 ON tblWarr_SMH_MCHist_34.[Serial No] = tblWarr_SWH_WarrCLHD_35.[Serial No] INNER JOIN
                      tblWarr_SMT_MCType_47 ON tblWarr_SMH_MCHist_34.MachineTypeID = tblWarr_SMT_MCType_47.ID INNER JOIN
                      tblWarr_SVC_ServiceCodes ON tblWarr_SWH_WarrCLHD_35.ServiceCodeFullID = tblWarr_SVC_ServiceCodes.ID INNER JOIN
                      tblWarr_DefectCodes ON tblWarr_SWH_WarrCLHD_35.DefectCodeID = tblWarr_DefectCodes.ID INNER JOIN
                      tblWarr_SPN_PartNo_01 ON tblWarr_SWH_WarrCLHD_35.FailedPartNoID = tblWarr_SPN_PartNo_01.ID INNER JOIN
                      tblWarr_MachineHours ON tblWarr_SWH_WarrCLHD_35.MachineHoursID = tblWarr_MachineHours.ID INNER JOIN
                      tblWarr_SNA_WarNar_77 ON tblWarr_SWH_WarrCLHD_35.NarrativeID = tblWarr_SNA_WarNar_77.ID INNER JOIN
                      tblWarr_SSU_Supplier_09 ON tblWarr_SWH_WarrCLHD_35.SupplierID = tblWarr_SSU_Supplier_09.ID'
SET @SQLWhere = ' WHERE ((tblWarr_SPN_PartNo_01.[Part No] = @_PartNumber) AND '
SET @SQLOrder = ' GROUP BY CAST(@_Date1 + CAST(DATEPART(mm,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(2)) + ''' + '/' + ''' + CAST(DATEPART(yyyy,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(4)) as smalldatetime) ORDER BY CAST(@_Date1 + CAST(DATEPART(mm,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(2)) + ''' + '/' + ''' + CAST(DATEPART(yyyy,CAST(tblWarr_SMH_MCHist_34.[Date Built] as smalldatetime)) as nvarchar(4)) as smalldatetime)'

IF (@ClaimDateFrom IS NOT NULL AND @ClaimDateTo IS NOT NULL)AND (LEN(@ClaimDateFrom) > 0 AND LEN(@ClaimDateTo) > 0)
    SET @SQLWhere = @SQLWhere + '(CAST(tblWarr_SWH_WarrCLHD_35.[Claim Date] AS SmalldateTime) BETWEEN @_ClaimDateFrom AND @_ClaimDateTo) AND '

IF (@BuildDateFrom IS NOT NULL AND @BuildDateTo IS NOT NULL)AND (LEN(@BuildDateFrom) > 0 AND LEN(@BuildDateTo) > 0)
    SET @SQLWhere = @SQLWhere + '(CAST(tblWarr_SMH_MCHist_34.[Date Built] AS SmalldateTime) BETWEEN @_BuildDateFrom AND @_BuildDateTo) AND '

IF (@ClaimStates IS NOT NULL)AND (LEN(@ClaimStates) > 0)
    SET @SQLWhere = @SQLWhere + '(tblWarr_SWH_WarrCLHD_35.[ClaimStateID] IN (SELECT value FROM Split(''' + ',' + ''',@_ClaimStates))) AND '

IF LEN(@SQLWhere) > 0
    SET @SQL = @SQL + LEFT(@SQLWhere, LEN(@SQLWhere)-4) + ')' + @SQLOrder

EXEC sp_executesql @SQL,
    N'@_PartNumber nvarchar(20), @_ClaimDateFrom smalldatetime, @_ClaimDateTo smalldatetime, @_BuildDateFrom smalldatetime, @_BuildDateTo smalldatetime, @_Date1 nvarchar(5), @_ClaimStates nvarchar(50) ',
    @_PartNumber = @PartNumber, @_ClaimDateFrom = @ClaimDateFrom, @_ClaimDateTo = @ClaimDateTo, @_BuildDateFrom = @BuildDateFrom, @_BuildDateTo = @BuildDateTo, @_Date1 = @Date1, @_ClaimStates = @ClaimStates 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:48:55.860

我可以建议像这样传递异常：

> "account_A,claim_1;account_B,claim_2;account_C,claim_3;"

然后，您可以创建一个函数来解析此字符串以返回一个表 @ExceptionAccountsAndClaims：

> 异常账户 | 例外声明
> 
> 账户_A | 索赔_1
> 
> 帐号_B | 索赔_2
> 
> 帐号_C | 索赔_3

然后，在您的动态查询中，使用条件：

> WHERE (SELECT COUNT(*) FROM @ExceptionAccountsAndClaim e WHERE tblWarr_SWH_WarrCLHD_35.[Account No] = e.ExceptionAccount AND tblWarr_SWH_WarrCLHD_35.[Claim No] = e.ExceptionClaim) = 0

注意：条件可能不是 100% 正确的。如果您愿意，请更正它以适合您。

祝你好运。

# php - 在二维数组的第 i 行内爆逗号

> ID：12179145
> 
> 赞同：3
> 
> 时间：2012-08-29T13:31:24.287
> 
> 标签：php, mysql, sql, insert

数组`$solution`是二维的。我需要将其内容保存到 SQL 表中。但是，在保存之前，我需要检查`$solution[i][0]`属于查询结果的那个`SELECT num_arr FROM Schedule WHERE num_arr<>''`。

问题出在线路上`$vals = implode(...)`。如何在数组的第 i 行内爆逗号`$solution`？现在这一行生成字符串`0,0,0,0`而不是正确的值。

```
 $columns_land = array("`num_arr`","`start`","`fin`","`way`");
    $cols_land = implode(",",$columns_land);

    for($i=0; $i<sizeof($solution); $i++) {
            $vals = implode(',', array_map('implode_comma', $solution[$i]));
            query_land = "INSERT INTO `Sequence` (" . $cols_land . ") 
                          VALUES " . $vals . " 
                          WHERE num_arr='".$solution[$i][0]."' 
                          AND num_arr IN (SELECT num_arr FROM Schedule WHERE num_arr<>'')";

            $result_land = execute_query($query_land);
    }

    function implode_comma($arr) {
        return '(' . implode(',', $arr) . ')';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:43:00.927

这句话让我很困惑：

```
$vals = implode(',', array_map('implode_comma', $solution[$i])); 
```

由于`implode_comma()`需要一个数组，因此其中的每个项目`$solution[$i]`也必须是一个数组；但这意味着`$solutions`它本身必须是一个三维数组。

我认为你可以在你的循环中写这个：

```
$vals = implode(',', $solution[$i]);
$query_land = "INSERT INTO `Sequence` ($cols_land) 
    VALUES ($vals)
    WHERE num_arr='".$solution[$i][0]."' 
    AND num_arr IN (SELECT num_arr FROM Schedule WHERE num_arr<>'')";

$result_land = execute_query($query_land); 
```

顺便说一句，你应该正确地转义你在 SQL 中使用的变量，但我不知道你正在使用哪个数据库层，所以我把它留给你。

# php - 问问题

> ID：12179151
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：php, html, ftp, image

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:33:32.607

您真的应该考虑不在您的 FTP 服务器上安装它们。没有办法保护密码。您应该有一个 PHP 页面，通过 HTTP 从 FTP 流式传输它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:43:10.333

我不容忍请求这样的图像，但您可以通过某些东西`file_get_contents`（甚至更好的[cURL](http://php.net/manual/en/book.curl.php)）请求图像的内容并将其保存到您的服务器。像这样（我使用 file_get_contents 作为示例速度，绝对使用 cURL）：

```
$image = file_get_contents('Username:Password@Url');
file_put_contents('image.jpg', $image); 
```

然后..

```
<img src="image.jpg"> 
```

# javascript - 如何使用 jQuery + Greasemonkey 清除这个伪复选框？

> ID：12179153
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:31:46.227
> 
> 标签：javascript, jquery, checkbox, greasemonkey

我目前正在开发一个需要 vk.com（俄罗斯 Facebook）的分享按钮的网站。

问题是当“添加图像”复选框被选中时，共享似乎不起作用。我试过`$("input:checkbox").attr('checked', false);`使用 Greasemonkey，但没有用。
我认为这是因为复选框是使用函数而不是纯 HTML 创建的。

该复选框是使用以下函数创建的：

```
if (!window.imageCheck) {
   window.imageCheck = new Checkbox(ge('add_image'), {
     checked: true,
     label: 'add image',
     width: 150,
     onChange: function(val) {
       if (val) {
         showImage(currentImage);
         recountImages();
       } else {
         hide('image_cont', 'select_image');
       }
       doResize(true);
     }
   });
}
doResize(true); 
```

当我查看页面源时，复选框实际上是在一个隐藏的输入中。`<input type="hidden" id="add_image" name="add_image" value="1" />`我已经尝试过`$("#add_image").val("0");`希望它会起作用，但仍然没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:32:48.387

将点击事件发送到适当的节点应该可以解决问题。就像是：

```
if ( $("#add_image").val()  !=  "0") {
    //--- Assumes #add_image is the user-interactive node (seems doubtful)
    var clickableNode   = $("#add_image");
    var clickEvent      = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    clickableNode[0].dispatchEvent (clickEvent);
} 
```

**但是**，不确定这`#add_image`是正确的节点。如果它不起作用，请回答以下问题：

1.  那个`ge()`函数是从哪里来的？什么图书馆？或者发布源，如果它是内联的。
2.  源中是否`<input id="add_image"...`有 onChange 处理**程序**？Firebug 的*事件*选项卡显示什么？
3.  验证`#add_image`s 值是`"1"`选中复选框时，`"0"`否则。
4.  链接到目标页面或将其代码保存到磁盘并在[pastebin.com](http://pastebin.com/)链接到它。

此外，[引入 Greasemonkey 1.0 的设计缺陷](https://github.com/greasemonkey/greasemonkey/issues/1614)可能会导致一些问题（即使您不使用 jQuery）。尝试添加`// @grant GM_getValue`到脚本的[元数据块](http://wiki.greasespot.net/Metadata_Block)。

# c++ - 对`boost::program_options::options_description::m_default_line_length'的未定义引用

> ID：12179154
> 
> 赞同：28
> 
> 时间：2012-08-29T13:31:46.773
> 
> 标签：c++, boost, g++, ubuntu-12.04

我正在尝试编译代码，但出现错误

> 未定义的引用`boost::program_options::options_description::m_default_line_length`

我在 Ubuntu 12.04 中使用 g++。虽然我做过一些 C++ 编程，但我对 Linux 开发环境还是新手（以前只使用过 IDE）。

所以我对这个问题进行了基本搜索，发现了一些链接问题。我不太了解他们，因为我是新手。阅读其中一些解决方案让我更加困惑。我的 boost 库文件夹位于`/usr/include`. 一些解决方案说它应该在`/usr/lib`. 但我那里没有任何 boost 文件夹。

我需要改变什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-29T13:39:26.143

如果你已经从 repo 安装了 boost，那么使用它就`-lboost_program_options`足够了。
如果您在其他库中安装了 boost 库，则需要通过以下方式指定该目录`-L/path/to/lib`

在 CMake 中，您可以指定`set(CMAKE_CXX_FLAGS "-lboost_program_options")`

但是对于 CMake，您应该使用

```
FIND_PACKAGE(Boost COMPONENTS program_options REQUIRED)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})
TARGET_LINK_LIBRARIES(target ${Boost_LIBRARIES}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-22T01:02:42.650

C++11 标准中对类的更改`<string>`可能与使用非 C++11 编译器（例如 G++-4.8）编译的 Boost 库版本冲突。尝试重新编译 boost 或使用用于编译 Boost 库的 C++ 编译器版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-04T16:42:36.867

还要仔细检查预处理器变量`_GLIBCXX_USE_CXX11_ABI`的设置是否与用​​于编译 boost 的变量的设置相同。变量的默认设置可能因 Linux 发行版和使用的 GNU 编译器版本而异。

有关详细信息，请参阅[双 ABI](https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:35:31.197

boost 库（以 .so 和 .a 结尾的文件）在哪里？找到这些，然后将其添加到您的链接命令：-L/path/to/boost/libs -lname-of-boost-lib

这一定是人们第一次启动 c++ 时遇到的最常见的问题。SO上可能还有一千个其他未定义的参考问题。只需搜索未定义的参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-16T13:28:26.120

这些库通常安装到`/usr/lib`（例如在我的系统上`/usr/lib/x86_64-linux-gnu/libboost_program_options.so.1.58.0`）。

为了编译将与这些库链接的代码，您通常使用`/usr/include`.

与许多库不同，Boost 不附带 pkg-config 文件，因此您需要自己添加链接器标志。使用通常的 Makefile 规则，您将需要类似`LDLIBS += -lboost_program_options`.

另请注意，虽然`libboost-dev`包提供了 的头文件`program_options`，但您还需要安装`libboost-program-options-dev`以获取相应的库。

# web-services - Webhook 回调安全

> ID：12179155
> 
> 赞同：5
> 
> 时间：2012-08-29T13:31:56.017
> 
> 标签：web-services, security, authentication, webhooks

我为客户提供网络服务。我想提供一个功能，在某些事件中，我会通过向客户提供的 URL 发送请求来通知客户。

例如，订单发货通知可能通过 GET 请求发送[https://customer.example.com/order/12345?status=shipped](https://customer.example.com/order/12345?status=shipped)

客户如何相信此请求是真实的？

当客户收到此请求时，他们需要验证该请求是否真的来自服务，它没有被篡改，并且是私有的。

想到只通过 SSL 发送给客户，但需要客户运行带有签名证书的启用 SSL 的 Web 服务器。另外，要对服务（此请求中的客户端）进行身份验证，需要客户端证书。但是，SSL 应该处理加密、中间人、消息签名和重放攻击。

Service 的 IP 地址可以更改，因此对身份验证没有用处。

PayPal 的 IPN 系统使用了另一种方法。PayPal 向客户（本示例中为商家）发送通知，然后客户通过 SSL 将有效负载发送回 PayPal 以进行确认。本质上是问：“嘿，贝宝。你把这个寄给我了吗？”

你能想到其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:58:15.897

即使您使用私钥/公钥对签署消息，您也需要实施一些措施来防止重放攻击。

也许更好的方法是通知他们他们有新东西，然后让他们访问您的服务器以获取新东西。然后他们可以简单地轮询您的服务器并验证您的 SSL 证书。

在向他们发送任何数据之前，您需要对他们进行身份验证。

对于通知，您可以简单地向他们发布最新通知的签名日期和时间。这样，即使重播该通知，他们也会知道，因为时间和日期不会比上一个更新。

# iphone - 关闭模态视图控制器会导致音乐停止

> ID：12179159
> 
> 赞同：0
> 
> 时间：2012-08-29T13:32:01.960
> 
> 标签：iphone, ios5, audio, modalviewcontroller

我正在创建一个需要一直播放背景音乐的应用程序。在应用程序启动时，我开始播放音乐，一切都很好，直到我关闭模态视图控制器（我这样做是为了返回应用程序的主屏幕）。此时，音乐突然停止，当我尝试调整音量时，它实际上说“铃声”.... 5-10 秒后它又回到“音量”，我可以再次启动音乐。

有没有人遇到过这个问题？我很难确定问题的根源......

编辑：这就是我开始播放音乐的方式（theData 是我的共享数据对象）

```
NSString *musicPath = [[NSBundle mainBundle] pathForResource:@"bg" ofType:@"mp3"]; 

theData.backgroundMusicPlayer =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:musicPath] error:nil];

theData.backgroundMusicPlayer.delegate = self;

[theData.backgroundMusicPlayer prepareToPlay];

[theData.backgroundMusicPlayer play];

theData.backgroundMusicPlayer.numberOfLoops = -1; 
```

在应用程序中，我有两个场景：我执行从场景 1 到场景 2 的转场，然后返回我使用以下代码：

```
 [self dismissModalViewControllerAnimated:NO];
 [theScene removeSubviews]; 
```

方法removeSubviews：

```
[fbInfoView removeFromSuperview];
[logoView removeFromSuperview];
 self.captureSession=nil;  // ending AVCaptureSession 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:50:08.873

目前还不清楚您是如何创建和设置`theData`的，但我建议您为此目的使用单例对象。像这样的东西：

```
@interface MySingleton : NSObject {

}
+(MySingleton*)sharedHelper;
-(void)playMusic;
@end 
```

实施：

```
@implementation MySingleton
static MySingleton* _sharedMySingleton = nil;

+(MySingleton*)sharedHelper
{
    if (!_sharedMySingleton)
        [[self alloc] init];

    return _sharedMySingleton;

    return nil;
}

+(id)alloc
{
    NSAssert(_sharedMySingleton == nil, @"Attempted to allocate a second instance of a singleton.");
    _sharedMySingleton = [super alloc];
        return _sharedMySingleton;
    }

    return nil;
}

-(id)init {
    self = [super init];
    if (self != nil) {
        // initialize stuff here
    }

    return self;
}

-(void)playMusic
{
   // your code
}

    @end 
```

并这样称呼它：

```
[[MySingleton sharedHelper] playMusic]; 
```

# shell - 绑定字符串（文本）粘贴到键 ubuntu

> ID：12179161
> 
> 赞同：1
> 
> 时间：2012-08-29T13:32:02.430
> 
> 标签：shell, ubuntu

谷歌没有给我答案，所以我在这里问。

有没有办法将文本（一些字符）绑定到一个键（比如说 F1），这样当我按下键时就像我输入了这些字符？

例如，我有一些与工作相关的帐户，其中一些令人毛骨悚然的密码很难记住。我只是进入登录页面，输入用户名，点击密码字段，按 F1 并写入密码。

我希望你能理解我的问题......我发现这对于一般用途非常有用，我敢打赌有更多的人想知道如何做到这一点。

谢谢 ，

GV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:10:20.703

许多终端仿真器允许它。例如，使用 xterm，它是通过资源完成的：

您可以在命令行上将资源放置在 xterm 加载的文件中，例如 .Xdefaults-$HOST（另请参见 $XAPPLRESDIR、$XUSERFILESEARCHPATH、$XENVIRONMENT），或者通过使用 xrdb 将它们安装在 X 服务器中（其优点是每个从任何主机连接到您的 X 服务器的 xterm 都会得到它，但这意味着任何能够连接到您的 X 服务器的人都能够得到它）

在命令行上：

```
xterm -xrm 'XTerm.VT100.translations: #override <KeyPress> F1: string("whatever")' 
```

请注意，任何在机器上运行“ps”的人都可以看到“whatever”。

对于独立于终端的解决方案，您可以使用 GNU screen，并在 .screenrc 中有类似的内容：

```
bindkey -k k1 stuff "whatever" 
```

**编辑**。抱歉，再次阅读您的问题，我看到您没有使用终端，所以请只看下面，尽管上面可能对其他人有用。如果它在浏览器中，还请查看为此设计的附加组件。

现在，如果您正在寻找非终端解决方案，您可以查看“xte”（来自 xautomation）以生成 KeyPress 和 KeyRelease 事件并配置您的窗口管理器以运行执行以下操作的脚本：

```
xte key\ {w,h,a,t,e,v,e,r} 
```

按 F1 时。

无论您做什么，请考虑将密码存储在 FS 上的安全隐患，或者如何访问它。

另请参阅 keepass 等解决方案。

# asp.net-mvc - Ninject MVC：在 CreateKernel 方法之后添加新绑定

> ID：12179162
> 
> 赞同：1
> 
> 时间：2012-08-29T13:32:04.193
> 
> 标签：asp.net-mvc, ninject

我正在将 MVC 3 与 Ninject 一起使用。我在 CreateKernel 方法中定义了 Global.asax.cs（一个 NinjectHttpApplication）中的所有绑定。

我还有一个为所有页面请求运行的 HTTP 模块。在执行 CreateKernel 方法后，模块在 PreRequestHandlerExecute 上运行其逻辑。

我想让 HTTP 模块通过将类类型链接到模块负责构建的特定实例变量来定义新的绑定。这可能吗？

基本上，在 HttpModule 中，我试图运行这个：

```
IUserContext userContext = userContextManager.GetUserContext();
Kernel.Bind<IUserContext>().ToConstant(userContext).InRequestScope(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:16:46.120

您不应该为每个请求重新绑定 - 如果您一次有 1000 个请求正在进行中，虽然可以让 Ninject 管理这些注册（例如，通过`.Named`使用绑定元数据工具的绑定），但您正在滥用容器而不是它应该做的（首先，你会做很多忙碌的工作，`HttpModule`在每次请求后删除注册吗？所有这一切都会导致争用，因为线程竞争对内核的访问。

相反，您`HttpModule`应该将相关信息存储在合适的地方（`HttpContext.Items`通常是合适的，但您可能有更好的主意？），然后使用`ToMethod()`来定义单个回调，该回调可以在给定请求需要使用时检索已存储的相关数据您的信息`HttpModule`已隐藏。

就像是：

```
Kernel.Bind<IUserContext>()
    .ToMethod( ctx=>(IUserContext)HttpContext.Items["userContext"] )
    .InRequestScope(); 
```

# c# - 我可以使用 System.Reflection (etc) 来确定 DLL 文件是托管还是非托管？

> ID：12179165
> 
> 赞同：3
> 
> 时间：2012-08-29T13:32:09.597
> 
> 标签：c#

> **可能重复：**
> [如何确定 DLL 是托管程序集还是本机（防止加载本机 dll）？](https://stackoverflow.com/questions/367761/how-to-determine-whether-a-dll-is-a-managed-assembly-or-native-prevent-loading)
> [这个 DLL 是托管的还是非托管的？](https://stackoverflow.com/questions/5275985/is-this-dll-managed-or-unmanaged)

我的场景：我正在开始将大量 DLL 资源从 C++ 迁移到 C# 托管代码的过程。这些 DLL 必须存在于一个公共目录中，并且它们不是静态链接（引用）的。相反，它们是根据需要使用 Assembly.LoadFile() 加载的。

为了确定哪些是新的（托管）DLL，我尝试使用 FileInfo 对象数组遍历目录中的文件，并为每个对象加载程序集。

当 DLL 是非托管 C++ DLL 之一时，加载程序集的尝试当然会失败。

那么，我的问题是，是否可以使用反射或其他方式检查 DLL 文件，并确定其托管/非托管性质。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:34:35.813

> 当 DLL 是非托管 C++ DLL 之一时，加载程序集的尝试当然会失败。

只要有一个函数使用 try/catch 块来尝试加载程序集，如果可以加载程序集，则返回 true，如果抛出适当类型的异常，则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:38:56.410

看来您可以使用 GetAssemblyName() 来尝试查询程序集元数据。如果调用失败，将抛出 BadImageException。

```
class TestAssembly
{
    static void Main()
    {

        try
        {
            System.Reflection.AssemblyName testAssembly =
                System.Reflection.AssemblyName.GetAssemblyName(@"C:\Windows\Microsoft.NET\Framework\v3.5\System.Net.dll");

            System.Console.WriteLine("Yes, the file is an assembly.");
        }

        catch (System.IO.FileNotFoundException)
        {
            System.Console.WriteLine("The file cannot be found.");
        }

        catch (System.BadImageFormatException)
        {
            System.Console.WriteLine("The file is not an assembly.");
        }

        catch (System.IO.FileLoadException)
        {
            System.Console.WriteLine("The assembly has already been loaded.");
        }
    }
}
/* Output (with .NET Framework 3.5 installed):
    Yes, the file is an assembly.
*/ 
```

如果您愿意阅读更多内容，我会无耻地从[http://msdn.microsoft.com/en-us/library/ms173100.aspx](http://msdn.microsoft.com/en-us/library/ms173100.aspx)复制此内容。

# matlab - 在 MATLAB 中生成世界地图

> ID：12179168
> 
> 赞同：0
> 
> 时间：2012-08-29T13:32:18.717
> 
> 标签：matlab, mapping

我最近一直在尝试在 matlab 中生成一些映射图，并且在一些基础知识方面遇到了麻烦。在我真正取得进一步进展之前，有人可以向我展示一种使用 matlab 中的基本映射工具箱生成如下所示地图的方法。如果可能的话，我将如何标记某些位置（如果我有纬度/经度）。

![在此处输入图像描述](../Images/15db6c55a751619b3be18579057996ac.png)

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:22:52.693

看看 Mapping Toolbox 文档，[http://www.mathworks.com/help/toolbox/map/f6-13193.html](http://www.mathworks.com/help/toolbox/map/f6-13193.html)名为“Your First Maps”的部分可能是一个很好的起点。此外，这些视频教程可能会提供信息： http: [//www.mathworks.com/products/mapping/examples.html](http://www.mathworks.com/products/mapping/examples.html)

但请记住，地图工具箱旨在帮助您操作、交互和可视化地理空间数据。它不一定与该数据一起提供。然而，它确实提供了一种使用 Web 映射服务获取数据的方法。请参阅此页面上的 Web 地图服务示例：http: [//www.mathworks.com/help/toolbox/map/exampleindex.html](http://www.mathworks.com/help/toolbox/map/exampleindex.html)

# c# - 如何在 Windows 中为 asp.net mvc 3 Web 应用程序安排任务？

> ID：12179169
> 
> 赞同：2
> 
> 时间：2012-08-29T13:32:17.593
> 
> 标签：c#, javascript, asp.net-mvc-3, jquery

> **可能重复：**
> [ASP.NET MVC 重复任务](https://stackoverflow.com/questions/6491301/asp-net-mvc-repeating-task)

我正在开发 MVC 3 Web 应用程序。我想在 Windows 中使用任务调度程序执行后台任务。是否可以在 Windows 中为 Web 应用程序创建计划？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:38:38.297

使用 Quartz.net 在 web 应用程序中创建计划的后台任务，而不是使用 windows 任务调度程序。

[http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:35:17.753

是的，您可以简单地使用任务调度程序调用您的网页

例子：

```
//Create a new scheduled task to open a browser eg: internet explorer then right
//click properties, in the run window type in with the quotes an example
"C:\Program Files\Internet Explorer\iexplore.exe" "http://www.mywebsite.com/something/myactionpage.chtml" 
//If you want to open the page with another browser, just change the first path 
```

而“任务”将是控制器内显示 myactionpage.chtml 的代码。像这样：

```
public ActionResult MyActionPage()
{
    // Do some actions
    return this.View();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T13:56:23.183

运行此类任务的简单方法是在您的操作中实现它，然后通过 powershell 调用此页面。为此，您需要执行以下步骤：

1）允许powershell运行未签名的脚本。为此，请运行 powershell 并执行：

```
Set-ExecutionPolicy RemoteSigned 
```

2）使用下一个内容创建您的powershell脚本：

```
$client = New-Object System.Net.WebClient
$client.DownloadString("http://yourserver/controller/action") // provide here a correct URL to your action 
```

并将其保存在 c:\scripts\task.ps1 例如

3）使用下一个命令在调度程序中创建任务：

```
powershell.exe "c:\scripts\task.ps1" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:45:12.610

对的，这是可能的。但是计划任务是否会在您的本地计算机上运行，​​如果您的互联网中断，可能会导致问题。

创建任务。创建一个基本的计划任务，设置名称和运行频率。然后在程序/脚本部分输入

```
"C:\Program Files\Internet Explorer\iexplore.exe" "http://www.yourwebsite.com/backgroundtask" 
```

在我有你的网站/背景任务的地方，输入指向你想要的应用程序页面位置的链接。

还有一些代码库可以帮助安排任务。我听说过的两个是 Quartz： http: [//quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html) 和 BackgroundWorker：[http ://backgroundworker.codeplex.com/](http://backgroundworker.codeplex.com/)

检查那些。

# azure - 在 Windows Azure 上安装 Tomcat7 并连接到 sql azure

> ID：12179174
> 
> 赞同：0
> 
> 时间：2012-08-29T13:32:36.360
> 
> 标签：azure, tomcat7, azure-sql-database

嗨，我正在尝试在 WA 上安装 tomcat 7。当我在 server.xml 文件中没有配置时，安装顺利，但是当我将以下资源元素添加到 server.xml 时，它无法部署 HostedService，它显示“等待实例”，然后中止它并重新开始。我正在使用 eclipse 和一个工人角色。这是使其失败的因素。

```
<Resource
        name="jdbc/myname"
        auth="Container"
        type="javax.sql.DataSource"
        username="**@**"
        password="****"
        driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
        url="jdbc:sqlserver://*****.database.windows.net:1433;database=EmoteDB1;user=***@***;password=*****;encrypt=true;hostNameInCertificate=*.database.windows.net;loginTimeout=30"
        maxActive="100"
        maxIdle="10"
        maxWait="5000"
        jmxEnabled="true"
        removeAbandoned="true"
        removeAbandonedTimeout="20"
        logAbandoned="true"
        factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
        validationQuery="select 1"
        minEvictableIdleTimeMillis="3600000"
        timeBetweenEvictionRunsMillis="1800000"
        numTestsPerEvictionRun="10"
        testWhileIdle="true"
        testOnBorrow="true"
        testOnReturn="false"
        /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:08:24.013

基于上述配置，您可能需要在配置中添加正确的 TCP/IP 端口才能使 SQL 数据库连接正常工作。您能否 RDP 到 Azure VM 并检查与 SQL 数据库的连接是否正常。我认为问题在于在 Tomcat 启动阶段处理 XML，并且您可能没有在 Azure VM 中为 SQL 数据库连接配置正确的端口。

如果您无法 RDP 到 Azure VM，我过去已经完成了完全相同的配置，以下是我使用的步骤。

在我通过辅助角色将 Tomcat7 部署到 Azure VM 后，我 RDP 到 Azure VM，然后在 Azure VM 中手动配置 SQL 数据库连接。这主要是通过修改 server.xml 并将 SQL 驱动程序添加到 tomcat 安装来完成的。完成所有设置并配置工作后，我将其复制回我的桌面并构建完整的 SQL 数据库支持的 Tomcat 设置，并将其放在我的 Windows Azure Worker Role 中以及适当的 TCP/IP 端点配置以使其正常工作。

# visual-studio-2012 - vstest.console.exe 无法启动测试

> ID：12179175
> 
> 赞同：1
> 
> 时间：2012-08-29T13:32:40.480
> 
> 标签：visual-studio-2012

我一直在尝试使用 VS2010 附带的新“vstest.console.exe”（在我的情况下，我使用的是 Visual Studio 2012 测试代理软件附带的版本）。

但是，当我指定启动测试时，如下所示：

> vstest.console.exe "MyTest.orderedtest"

我收到返回消息“开始测试执行，请稍候”，然后任务完成 - 但我的 UI 测试没有开始。而且我不知道是否有任何结果保存在任何地方，如果有的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:08:24.237

测试没有开始，因为我的测试 DLL（编码 UI 测试）引用了 VS2010 DLL。

vstest.console.exe 似乎没有给出任何输出来解释为什么测试没有开始，也没有迹象表明结果日志的保存位置。命令行选项[文档](http://msdn.microsoft.com/en-us/library/jj155796.aspx)在这里也没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T09:02:19.737

Vstest.console.exe 默认不创建 TRX 文件。结果将仅发送到控制台。如果需要 TRX，用户必须通过指定 /logger:trx 显式启用它

EX- Vstest.console.exe abc.dll /logger:trx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T11:49:55.817

要使用 vstest.console 运行任何有序测试，可以使用以下命令。

例如，如果你想执行 mytest.orderedtest 然后运行以下命令

**vstest.console mytest.orderedtest /Logger:trx**

从存在有序测试的文件夹中运行。

# windows - 将先前提交的“目标”目录添加到 .cvsignore

> ID：12179182
> 
> 赞同：4
> 
> 时间：2012-08-29T13:33:07.707
> 
> 标签：windows, eclipse, cvs, ignore

我们正在尝试添加到**`.cvsignore`**以前意外提交的**`target`**目录（包含二进制文件）。

它只是行不通。每次我们**与存储库同步或提交**（使用 Eclipse）时，**`target`都会包含该目录...**

我们不确定如何进行。任何人都可以提供建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T18:13:24.277

为了避免直接弄乱存储库，我

*   mv myFileToIgnore myFileToIgnore.save
*   cvs 删除 myFileToIgnore
*   cvs 提交 myFileToIgnore
*   mv myfile.save myFileToIgnore

这会将文件移开，以便我可以以 cvs 友好的方式将其从存储库中删除，然后将其放回我需要的位置。

如果我有一堆文件要执行此操作（例如：*.counter），我会将它们保存在一个目录中，这样我就可以使用通配符来保存和恢复它们。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:38:35.383

一旦文件或目录已提交到存储库，`.cvsignore`将无法正常工作。我很确定这是 CVS 的限制，但我找不到参考。我知道继续进行的唯一方法是从存储库中手动删除文件（例如，转到服务器文件系统并删除它们）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-12T18:57:02.727

这已经晚了几年，但如果您可以访问 CVS 命令行二进制文件，您可以使用以下命令递归删除目标目录：

```
cvs remove -fR target 
```

删除文件后，检查更改：

```
cvs ci -m "removing target dir" . 
```

最后，更新 .cvsignore 文件以忽略目标目录。

是的，我在 2015 年仍然被迫使用 CVS，我必须处理这些问题。希望这个答案可以帮助处于类似情况的人们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T07:52:56.017

如果您无权访问 CVS 服务器（因此您无法自行删除文件），您可以按照以下步骤从 repo 中删除文件：

*   将“.cvsignore”恢复为其初始状态（在您的情况下，它不包含“目标”）
*   将“目标”目录移动到其他地方（或者如果您不需要它或者可以在之后生成它，则将其删除）
*   提交删除，不要提交修改后的 .cvsignore
*   将“.cvsignore”恢复到正确的状态（在您的情况下添加“目标”）

# magento - 在扩展 Mage_Core_Model_Abstract 的几个 Magento 类中，由 _beforeSave() 方法覆盖破坏的事件/观察者模式

> ID：12179187
> 
> 赞同：5
> 
> 时间：2012-08-29T13:33:17.623
> 
> 标签：magento, magento-1.7

当试图实现一个观察者来捕捉`'cataloginventory_stock_item_save_before'`事件时，我开始意识到，在*不调用其 parent*`_beforeSave()`的情况下，该方法`Mage_CatalogInventory_Model_Stock_Item`覆盖了该方法，从而阻止了系统调度通常的事件和事件......`Mage_Core_Model_Abstract` *`'model_save_before'``$this->_eventPrefix.'_save_before'`*

 *在`Mage_Core_Model_Abstract`：

```
protected function _beforeSave()
{
    //...
    Mage::dispatchEvent('model_save_before', array('object'=>$this));
    Mage::dispatchEvent($this->_eventPrefix.'_save_before', $this->_getEventData());
    return $this;
} 
```

在`Mage_CatalogInventory_Model_Stock_Item`：

```
protected function _beforeSave()
{
    //...some other stuff, but no parent::_beforeSave()!
    return $this;
} 
```

虽然我对 Magento 很陌生，但这对我来说看起来很奇怪，尤其是在查看许多其他扩展`Mage_Core_Model_Abstract`、覆盖`_beforeSave()`方法但*确实*调用的 Magento 类时`parent::_beforeSave()`（以各种方式，如以下示例所示）。

例如，在`Mage_Catalog_Model_Product`：

```
protected function _beforeSave()
{
    //...
    parent::_beforeSave();
    //no return in this one!
} 
```

在`Mage_Catalog_Model_Product_Compare_Item`：

```
protected function _beforeSave()
{
    parent::_beforeSave();
    //...
    return $this;
} 
```

或在`Mage_Catalog_Model_Abstract`：

```
protected function _beforeSave()
{
    //...
    return parent::_beforeSave();
} 
```

等等。

更奇怪的是，`Mage_CatalogInventory_Model_Stock_Item`也覆盖了`_afterSave()`，但这次*确实*调用了父方法：

在`Mage_CatalogInventory_Model_Stock_Item`：

```
protected function _afterSave()
{
    parent::_afterSave();
    //...
    return $this;
} 
```

**我的问题是**（针对那里的 Magento 大师）：您是否了解省略in
是否有任何充分的理由？ 还是应该将其列为错误？`parent::_beforeSave()``Mage_CatalogInventory_Model_Stock_Item`

为了能够捕获`'cataloginventory_stock_item_save_before'`事件，我想到的唯一解决方法是将整个`Mage_CatalogInventory_Model_Stock_Item`类从`core`to复制`local`，然后添加对`parent::_beforeSave()`或直接到的调用`Mage::dispatchEvent('cataloginventory_stock_item_save_before', ...)`。
这个解决方案不是一个糟糕的黑客吗？

在搜索（只是出于好奇）的许多其他直系后代之后`Mage_Core_Model_Abstract`，我发现除了`Mage_CatalogInventory_Model_Stock_Item`之外，只有其他两个子类共享相同的问题，至少就`_beforeSave()`方法而言（我没有检查其他基本事件如`_afterSave`等）：`Mage_XmlConnect_Model_Application``and`Mage_Dataflow_Model_Batch`。
这使我认为，仅在三个班级中的这种遗漏可能不是故意的……

所以：这是一个错误，还是我错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:14:24.520

不确定在这种情况下“蛋白酥皮”是什么意思，但这是*目标* `Mage_Core_Model_Abstract`自动触发事件的几个示例之一......

*   *_load_before
*   *_load_after
*   *_delete_before
*   *_delete_after
*   *_delete_commit_after
*   *_save_before
*   *_save_after
*   *_save_commit_after

……坏了。

发生这种情况是由于子类在覆盖时未能调用父模板方法（正如您所提到的）或由于未能覆盖`_eventPrefix`子类中的 。对我来说，这似乎一直是一种疏忽，而不是一种意图。

在这种情况下，`Mage_CatalogInventory_Model_Stock_Item::_beforeSave()`这似乎是一个遗漏。在此类的[1.3.2.4 版本](https://github.com/LokeyCoding/magento-mirror/blob/1.3.2.4/app/code/core/Mage/CatalogInventory/Model/Stock/Item.php#L424)中，该方法复制了目标事件逻辑（尽管它省略了 的调度`model_save_before`）。此文件的[1.4.0.0-alpha2 版本](https://github.com/LokeyCoding/magento-mirror/blob/1.4.0.0-alpha2/app/code/core/Mage/CatalogInventory/Model/Stock/Item.php#L441)会看到`_eventPrefix`正在添加的属性，但调用父`_beforeSave()`方法失败会导致此目标事件丢失。

在这种情况下，我可以看到的唯一意图可能是强制开发人员将 cataloginventory 对象作为`stock_item`产品保存过程的上下文中的属性进行操作，但这值得代码注释。*

# java - 突出 Java 的变化

> ID：12179188
> 
> 赞同：0
> 
> 时间：2012-08-29T13:33:27.333
> 
> 标签：java, eclipse, string, for-loop

基本上，我已经完成了我的程序，以便它显示字符串的差异并显示整行。我想突出显示（以颜色）线条中的差异。

例子：

```
Original at line 5
   <rect x="60.01" width="855.38" id="rect_1" y="-244.35" height="641.13" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; "/>

Edited at line 5
   <rect x="298.43" width="340.00" y="131.12" height="380.00" id="rect_1" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(255, 102, 0); "/> 
```

在此示例中，宽度不同于“原始”版本和“编辑”版本。我希望能够强调这种差异和任何其他差异。

到目前为止我的代码：

```
Patch patch = DiffUtils.diff(centralFile, remoteFile);
        StringBuffer resultsBuff = new StringBuffer(remoteFileData.length);
        for (Delta delta : patch.getDeltas())
            {
            resultsBuff.append("Original at line " + delta.getOriginal().getPosition() + "\n");
            for (Object line : delta.getOriginal().getLines())
                {
                resultsBuff.append("   " + line + "\n");
                }
            resultsBuff.append("Edited at line " + delta.getRevised().getPosition() + "\n");
            for (Object line : delta.getRevised().getLines())
                {
                resultsBuff.append("   " + line + "\n");
                }
            resultsBuff.append("\n");
            }
        return resultsBuff.toString();
        } 
```

这将像之前的示例一样显示两行（原始版本和编辑版本）我希望能够突出显示实际所做的更改，有没有办法在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:56:37.163

您尝试重写 WinDiff 和 Beyond Compare 等常用工具的任何特殊原因？
如果你真的需要它：
主要困难是找到差异停止的地方
`<rect x="60.01" width="855.38" id="rect_1" y="-244.35" height="641.13" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; "/>`
`<rect x="298.43" width="340.00" y="131.12" height="380.00" id="rect_1" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(255, 102, 0); "/>`

你认为有什么区别？
1）“x”和“width”的改变值很容易——它们以相同的顺序出现
2）你认为“id”发生了什么，它的值是什么？你想如何突出它？

假设您总是知道哪个是
“原始”字符串，我建议您扫描“原始”字符串，对其进行标记，分别匹配每个标记并删除匹配的标记。当您用尽所有“原始”标记时，您才开始突出显示“原始”和“已编辑”其余部分的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:03:46.407

Diff match patch 是 Java 中可用的库，可让您生成 diff 查看器，如 html。也许它对你有帮助？[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:13:53.583

要回答您提出的问题，这取决于您显示整个文本的方式。我可以想到两种方法，我相信还有其他方法。

1.  最简单的方法是使用 println() 将文件写入 System.out。这会将文件内容转储到 Eclipse 控制台。要突出显示某些内容，请将该行写入 System.err 而不是 System.out 导致该行以红色写入控制台。这为您提供了突出显示更改的最简单方法，但它是在行级别而不是字符级别。
2.  除此之外，当您编写某种工具（如 Eclipse 中的比较工具）时，事情会变得非常复杂。一旦您确定了发生了什么变化（我认为这超出了这个问题的范围），您可以使用一些小部件来构建工具 UI 来显示这些变化。一个这样的小部件是 StyledText 小部件，它是一种文本小部件，可让您在文本范围的基础上控制颜色、字体和其他文本属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T09:36:46.563

我找到了一种更简单的方法来做到这一点。我已将每一行保存到一个字符串数组中（拆分每个元素/参数），按字母顺序对字符串进行排序，然后比较字符串。列出那些已经改变的。

```
resultsBuff.append("\nEdited at line " + delta.getRevised().getPosition() + "\n");
            for (Object line : delta.getRevised().getLines())
                {

                String xmlLineEdit = line.toString();//save 'original' xml line into string

            XMLInputFactory xif = XMLInputFactory.newFactory();   
            XMLStreamReader xsr = xif.createXMLStreamReader(new StringReader(xmlLineEdit));//put xml into parser

            xsr.nextTag(); // Advance to svg element
            int attributeCount = xsr.getAttributeCount();//get the number of attributes
            array1 = new String[attributeCount];
            for(int x=0; x<attributeCount; x++) //for each attribute
               {
            //StringBuilder stringBuilder = new StringBuilder();//might remove
            array1[x]= xsr.getAttributeLocalName(x) + "=\"" + xsr.getAttributeValue(x) + "\"";//add attributes and values to an array
               }

            Arrays.sort(array1);//sort the array alphabetically 
```

# php - 使用 Yahoo Contacts API 获取联系人

> ID：12179189
> 
> 赞同：3
> 
> 时间：2012-08-29T13:33:28.873
> 
> 标签：php, oauth, yahoo-api

我按照这些步骤“http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html”并从经过身份验证的用户那里获得了 oauth 令牌和 GUID。现在我正在尝试通过 GUID 检索所有联系人，正如我在使用此 url“http://social.yahooapis.com/v1/user/GUID_HERE/contacts”搜索网络时看到的并通过标题传递授权数据但我只是得到这个回复：

```
<?xml version='1.0' encoding='UTF-8'?><yahoo:errorxmlns:yahoo='http://yahooapis.com/v1/base.rng' xml:lang='en-US'><yahoo:description>Please provide valid credentials. OAuth oauth_problem="signature_invalid", realm="yahooapis.com"</yahoo:description></yahoo:error><!-- ws129.socdir.sp2.yahoo.com uncompressed/chunked Tue Aug 28 06:22:40 PDT 2012 --> 
```

我正在使用 cURL (PHP) 执行请求，就像这里写的“http://developer.yahoo.com/oauth/guide/oauth-make-request.html”（我已经检查过并且我使用我的消费者秘密作为 ouath_signature ):

```
$header = array(
'GET http://social.yahooapis.com/v1/user/' . $guid[1] . '/contacts',
'Authorization: OAuth realm="yahooapis.com", '.
                                     'oauth_consumer_key="'.$yahoo_consumer_key.'", '.
                                     'oauth_nonce="'.uniqid().'", '.
                                     'oauth_signature_method="HMAC-SHA1", '.
                                     'oauth_timestamp="'.time().'", '.
                                     'oauth_token="'.$ouathToken[1].'", '.
                                     'oauth_version="1.0", '.
                                     'oauth_signature="'.$yahoo_consumer_secret.'"');
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
              CURLOPT_FOLLOWLOCATION => TRUE,
              CURLOPT_SSL_VERIFYPEER => false,
              CURLOPT_SSL_VERIFYHOST => 0,
              //CURLOPT_HTTPGET => true,
              CURLOPT_URL => 'http://social.yahooapis.com/v1/user/' . $guid[1] . '/contacts',
              CURLOPT_HTTPHEADER => $header
    )); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:48:42.240

OAuth 签名不仅仅是消费者的秘密。雅虎有一些[关于如何签署请求的文档，](http://developer.yahoo.com/oauth/guide/oauth-signing.html)这就是 oauth_signature 字段中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:20:24.720

似乎创建的签名是错误的。对于创建签名，首先创建通过规范化您的 url 创建的基本字符串。

有关基本字符串的更多详细信息，请访问 [http://developer.yahoo.com/oauth/guide/oauth-signing.html](http://developer.yahoo.com/oauth/guide/oauth-signing.html)。 [http://oauth.net/core/1.0/#anchor16](http://oauth.net/core/1.0/#anchor16)

创建一个基本字符串后，创建一个签名密钥，该密钥是通过将 COSUMER SECRET 和令牌秘密与 & 连接起来而开发的。像这样，

$signatureKey = CONSUMER_SECRET."&".{yourtokensecret};

然后创建签名试试这个代码： $signature = urlencode(base64_encode(hash_hmac('sha1',{baseString}, $signatureKey, true)));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T16:04:42.813

[这里](https://github.com/joechung/oauth_yahoo/blob/master/oauth_helper.php)有一个出色的签名功能。

# android - 具有交互式调用方法的 Android 后台服务示例

> ID：12179200
> 
> 赞同：2
> 
> 时间：2012-08-29T13:33:59.517
> 
> 标签：android, service, background

我不是 android 专家，我正在寻找一个 Android 应用程序的例子，它使用一个服务，其中有真正的功能方法，或者换句话说，服务可以用于什么，我们什么时候需要它。超越简单的东西服务示例..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:59:24.137

我敢肯定你渴望得到一些工作代码，但如果你是 android 新手，一个服务的工作示例可能会引发更多问题......

我建议您熟悉后台进程的类型并确定您需要哪些：

*   [Service与AsyncTask的简要说明](https://stackoverflow.com/questions/6957775/android-asynctask-vs-service)

*   [后台进程类型矩阵](http://crazyaboutandroid.blogspot.com/2011/12/difference-between-android.html)

这是一个服务的例子：

*   [http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

这是一个 AsyncTask 的示例

*   [http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)

*   [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

确定您需要哪种类型的后台进程，尝试让它工作，如果它不起作用，请按照您的要求发布代码。

# wcf - WCF 中的传输协议

> ID：12179202
> 
> 赞同：8
> 
> 时间：2012-08-29T13:34:11.010
> 
> 标签：wcf

在学习 WCF 的过程中，我发现 WCF 支持 HTTP、TCP、Named Pipes 和 MSMQ 作为传输协议。但是，Http 是应用层协议，它使用 TCP 作为传输协议。那么，当它使用 TCP 作为传输层时，Http 作为 WCF 中的传输协议意味着什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T13:43:19.447

从网络堆栈的角度来看，除了 TCP 之外，您列出的所有内容都是通过 TCP 进行通信的应用层协议（至少在任何现代系统上）。

不过，就 WCF 而言，这些都不重要。从这个意义上说，“传输协议”正是它所说的——它是一种用于在端点之间传输信息的协议。从这个意义上说，传输协议定义了消息的内部结构、传递机制、可用的额外功能等。当您查看所有这些方面时，HTTP、HTTPS、MSMQ 和命名管道协议是都彼此不同。但在幕后，最终它们都会生成 TCP 数据包。（您可以为使用 UDP 的 WCF 构建自定义传输，但我认为任何内置传输都不能这样做。）

在这种情况下，将 TCP 传输称为“原始 TCP”传输可能更合适。它使用 WCF 独有的自定义低级二进制消息格式，并且比任何其他传输协议具有低得多的开销。从技术上讲，该消息格式是在 TCP 之上分层的应用协议，但它没有名称，完全在 WCF 内部，因此简称为“TCP 传输协议”。

# java - JAVA 使用变量值作为实例名称

> ID：12179215
> 
> 赞同：0
> 
> 时间：2012-08-29T13:34:38.730
> 
> 标签：java

所以基本上我正在阅读一个文件，该文件的每一行都包含对 3 到 5 个实例的两种类型对象的描述，其中 2 到 4 个是第一种类型的对象，最后一个是另一种类型的对象。该文件最多可包含 500 行。我将重用每个对象，从 1 到未知，但规模为数百次，我需要跟踪它们的状态。

虽然我可以将所有数据放入一个数组中，并且只使用 5 个对象不断更改它们的值，这将使得跟踪它们的每个参数组合的状态变得相当困难。

我想要的是使用 FromLine1Obj1 、 FromLine10Obj3 等名称创建我的实例。

我没有提到单行中的每组对象也应该创建一个新线程，并且该组在该线程中进行处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:38:14.267

您需要使用地图。

```
Map<String, MyObject> map = new ....

map.put("FromLine1Obj1", new MyObject());

MyObject mo = map.get("FromLine1Obj1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:41:01.223

如果你读过一次文件，它毕竟不会改变——你可能想做一些代码生成，比如[http://cglib.sourceforge.net/](http://cglib.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:37:52.817

你不能用名字作为键的地图吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:38:00.993

您可以将解析结果存储在映射中，将您想要的名称作为键，并将创建的实例作为值，这是 Java 中名称间接的简洁方式。

# php - 我无法销毁会话

> ID：12179218
> 
> 赞同：-2
> 
> 时间：2012-08-29T13:34:46.907
> 
> 标签：php, session

我使用数据库中的用户名和密码作为会话变量，但是当我注销时，我仍然可以通过浏览器的直接链接访问受保护的页面，这可能是造成这种情况的原因。这是我的 login.php：

```
//initialize the variables
            $username="";
            $password="";
            $_SESSION['username']="";
            $_SESSION['password']="";
            if(isset($_POST["submit"]) && @$_GET["username"] !==""){
                $username=$_POST["username"];
                $password=$_POST["password"];
                if(isset($_POST["username"]) && $_POST["username"]!=="" && isset($_POST["password"]) && $_POST["password"]!==""){
                    //sucuring the data
                    $username=htmlentities(mysql_real_escape_string(trim($_POST["username"])));
                    $password=htmlentities(mysql_real_escape_string(trim($_POST["password"])));
                    //checking if user does exist
                    $sql="SELECT email, password FROM ".$db_name.".user WHERE email=\"".$username."\" AND password='".md5($password)."' LIMIT 1";
                    $query=mysql_query($sql,$con);
                    $result=mysql_fetch_assoc($query);
                    //check query to c if is successfully optional
                    if(!$result){
                        print"No result";
                    }else{
                        //if combination found in our database then register session values";
                        $_SESSION['username']=$_POST['username'];
                        $_SESSION['password']=md5($_POST['password']);
                        //check location
                        $sql="SELECT location FROM ".$db_name.". user WHERE email ='".$_POST['username']."' LIMIT 1";
                        $query=mysql_query($sql,$con);
                        $result=mysql_fetch_array($query);
                        //no need of loop since we want only one field/single record/row 
                        $location=$result['location'];
                        header("Location:".$location."");
                    }
                }else{
                //do nothing
                }

            }

        ?>
        <form id="loginFrm" method="post" action="?lgn=getin">
            <fieldset>
                <legend>
                    Inshuz Login
                </legend>
                <table>
                    <tr>
                        <td>
                            Username
                            <div id="specify">Your email</div>
                        </td>
                        <td>
                            <input type="text" name="username" size="40" class="text" value="<?php print $username; ?>">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Password
                        </td>
                        <td>
                            <input type="password" name="password" size="40" class="text" value="<?php print $password; ?>">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <input type="submit" name="submit" class="btn" value="Login">
                        <td>
                    </tr>
                </table>
            </fieldset>
        </form> 
```

这个 login.php 包含在我的 index.php 中，下面是主页

```
 <?php   session_start(); require_once("includes/functions/url.php"); require_once("includes/config/config.php");?>
    <html>
        <head>
            <title>

            </title>
        <head>
        <link rel="stylesheet" media="all" type="text/css" href="css/main.css"/>
        <script type="text/javascript" src="js/jquery-1.8.0.js"></script>
        <body>
                <div id="wrapper">
                    <div id="header">
                        <div id="nav">
                            <a href="#">Home </a> | <a href="#">About us</a> | <a href="#">Products</a> | <a href="#">Services</a> | <a href="#">Carrers</a>
                        </div>
                    </div><!--end of header-->
                    <div id="mainContent">
                    <div id="RighContent">
                        <?php require_once("includes/pages/".@$page);?>
                    </div><!---RightCont--->
                    <div id="LeftCont">
                        afafhkashf
                    </div><!---leftcont--->
                    </div><!---end of maincontent-->
                    <div id="footer">

                    </div><!--end footer-->
                </div><!--end of wrapper-->
        <body>
    </html> 
```

这是我的安全页面：

```
<?php session_start();
     require_once("includes/functions/url.php");
    if(!isset($_SESSION['username'])){
        header("Location: ../");
        exit();
    }
?>
<html>
    <head>
        <title>

        </title>
    <head>
    <link rel="stylesheet" media="all" type="text/css" href="css/main.css"/>
    <script type="text/javascript" src="js/jquery-1.8.0.js"></script>
    <body>
            <div id="wrapper">
                <div id="header">
                    <div id="nav">
                        <a href="#">Home </a> | <a href="#">About us</a> | <a href="#">Products</a> | <a href="#">Services</a> | <a href="#">Carrers</a>
                        <?php
                            //show logout
                            if(isset($_SESSION['username'], $_SESSION['password'])){
                                print " | <a href=\"includes/pages/logout.php?log=logout\">Logout</a>";
                            }
                        ?>
                    </div>
                </div><!--end of header-->
                <div id="mainContent">
                <div id="RighContent">
                    <h1>Welcome admin: <?php print @$_SESSION['username']; ?></h1>
                </div><!---RightCont--->
                <div id="LeftCont">
                    afafhkashf
                </div><!---leftcont--->
                </div><!---end of maincontent-->
                <div id="footer">

                </div><!--end footer-->
            </div><!--end of wrapper-->
    <body>

</html> 
```

最后这是我的注销页面：

```
 <?php 
            ini_set('session.use_trans_sid', false);
            session_start();
             //require_once("includes/functions/url.php");
             if(isset($_GET['log']) && $_GET['log']=="logout"){
                if(isset($_SESSION['username'] , $_SESSION['password']) && !empty($_SESSION['username']) && !empty($_SESSION['password'] )){
                    unset($_SESSION['username']);
                    unset($_SESSION['password']);
                    header("Location: ../../");
                    exit();
                }
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:39:01.247

Bellow 是您所说的注销功能。只是因为您取消设置`Session[username] and Session[password]`并不意味着您破坏了会话。有一个名为的函数`session_destroy`可以满足您的需求。有关其用法的信息， 请参阅[此内容。](http://php.net/manual/en/function.session-destroy.php)

```
<?php 
                ini_set('session.use_trans_sid', false);
                session_start();
                 //require_once("includes/functions/url.php");
                 if(isset($_GET['log']) && $_GET['log']=="logout"){
                    if(isset($_SESSION['username'] , $_SESSION['password']) && !empty($_SESSION['username']) && !empty($_SESSION['password'] )){
                        unset($_SESSION['username']);
                        unset($_SESSION['password']);
                        header("Location: ../../");
                        exit();
                    }
                }
            ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:37:04.363

```
unset($_SESSION);
session_destroy(); 
```

你有没有尝试过？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T17:51:53.760

在注销页面中使用它

```
<?php 
session_start();
session_destroy();
session_unset();
header("location:../index.php");

?> 
```

和下面的安全页面代码

```
if($_SESSION['uid']==true){
}
    }else{
        header('Location:../');  
  } 
```

我会推荐用户 ID 而不是使用用户名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:52:18.377

除了上面所有关于`session_unset()`和的评论之外`session_destroy()`，您可能还想在浏览器中包含一些清除缓存的内容，以防止有人使用后退按钮或以其他方式重新加载页面。

```
header('cache-control: no-cache,no-store,must-revalidate'); // HTTP 1.1.
header('pragma: no-cache'); // HTTP 1.0.
header('expires: 0'); // Proxies. 
```

# pdf - 如何找出只有 SE 字典的 PDF 大纲的目标

> ID：12179224
> 
> 赞同：2
> 
> 时间：2012-08-29T13:35:02.353
> 
> 标签：pdf

PDF 参考（12.3.3，表 153）说大纲将具有 Dest 字典、A 字典或 SE 字典（带有可选的 Dest 字典）。我有一个只有 SE 字典的大纲文档。该参考将我引向结构层次结构（14.7.2），这就是我迷失的地方。结构项目可能有 Pg 字典，但我的没有（在递归遍历中，父母也没有）。所以我需要从 SE 字典中找出页码、页面偏移量和缩放（如果适用）。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:03:11.790

结构树有一个有点特殊的根节点。它包含一些其他节点没有的条目。有一个称为**ParentTree**的条目用于定位对应于页面、注释和 XForms 的结构元素。请参阅*14.7.2 结构层次结构*和*14.7.4.4 从内容项中查找结构元素*。

页面和结构元素之间的引用是双向的，您应该在一个结构元素或其递归父元素之一中拥有 Pg 条目（据我所知，如果不是这种情况，文件可以被视为损坏），并且您*将*在页面字典中有一个名为 StructParents 的条目，其中包含与 ParentTree 结构中该页面对应的索引。

如果页面字典中缺少 StructParents 条目并且存在结构树，则文件很可能已损坏。“腐败”是指它包含的信息不一致，连贯等。

那么有两种方法可以使用这些信息。如果你有一个结构元素的引用，你应该能够通过使用 Pg 条目找到它所引用的页面。如果您有一个页面的引用，您应该能够通过使用 ParentTree 结构来使用其相应的结构元素。两个方向都应该出现在文件中，以使信息保持一致。

# ruby-on-rails - 回形针显示图像/文档链接

> ID：12179225
> 
> 赞同：0
> 
> 时间：2012-08-29T13:35:08.463
> 
> 标签：ruby-on-rails

我使用回形针并想在显示页面中显示文档链接。我在用

```
 <%= image_tag @event.photo.url(:small) %> 
```

问题是它不会显示链接。同样对于图像我只想显示链接而不是缩略图。这怎么可能？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:13:25.113

如果您想通过单击链接获取原始照片，请执行以下操作：

```
<%= link_to image_tag(@event.photo.url(:small)), @event.photo.url(:original) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:39:12.847

链接很简单：

```
<%= @event.photo.url(:small) %> 
```

`image_tag`是一个帮助创建适当的 html 标签来显示图片的助手。

```
<%= link_to "pic name here", @event.photo.url(:small) %> 
```

# android - 画布中的选框文字

> ID：12179231
> 
> 赞同：2
> 
> 时间：2012-08-29T13:35:20.993
> 
> 标签：android

我正在使用`Canvas.drawText`which 没有任何参数。我在画布中绘制文本的宽度有限，所以有什么想法可以让它滚动吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:45:53.480

得到解决方案，我计算编辑文本宽度并测量文本。如果文本太宽，则启动可运行循环来调整 drawText 参数中使用的偏移 x 值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T13:39:27.200

这是一个例子：

```
public class TextViewMarquee extends Activity {
    private TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) this.findViewById(R.id.tv);  
        tv.setSelected(true);  // Set focus to the textview
    }
} 
```

带有文本视图的 xml 文件：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/mywidget"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:lines="1"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:textColor="#ff4500"
        android:text="Simple application that shows how to use marquee, with a long text" />
</RelativeLayout> 
```

**注意**- 这仅在提供 android:singleLine="true" 时才有效。在 Android 中**引用** [选取框文本](https://stackoverflow.com/questions/2182578/marquee-text-in-android)

# extjs - 如何在 ExtJS 面板中设置列表样式？

> ID：12179232
> 
> 赞同：1
> 
> 时间：2012-08-29T13:35:23.943
> 
> 标签：extjs, extjs3

我正在尝试在 ExtJS 中创建密码要求帮助框。它不会为无序列表呈现内联 CSS 样式。我把 style="list-style-type: circle;"

这是我的密码框代码：

```
 {
            xtype: 'panel',
            html: '<br></span><div style="border:2px solid;padding:5px;width:329px">* Password must be a minimum of 8 characters in length. Passwords must contain a combination of characters from <b>three of the following four categories</b>:<br><br><ul style="list-style-type: circle;"><li>An uppercase character (A-Z)</li><li>An lowercase character (a-z)</li><li>A number from 0-9</li><li>One of the following special characters: ~!@#$%^&amp;*_-+=`|&#92; (){}[]:;&quot;&lt;&gt;&#39;,.?&#47;</li></ul><div>'
        } 
```

这是它呈现的内容（我想要密码框中的圆形项目符号）： ![在此处输入图像描述](../Images/5314dc61d58eea71670721641a2b7eea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:14:55.640

不要使用内联样式。声明一个新类，如下所示：

```
.fred ul
{
    list-style: circle outside none;
} 
```

然后为面板执行此操作：

```
{
    xtype: 'panel',
    bodyCls: 'fred'
} 
```

这可能对你有用。

# php - 如何获取stdClass对象foreach循环的值

> ID：12179235
> 
> 赞同：1
> 
> 时间：2012-08-29T13:35:30.450
> 
> 标签：php, mysql, wordpress

```
stdClass Object
(
    [meta_id] => 11
    [post_id] => 8
    [meta_key] => wpp_gpid
    [meta_value] => gpid_1124779119
)
stdClass Object
(
    [meta_id] => 12
    [post_id] => 8
    [meta_key] => _edit_last
    [meta_value] => 1
)
stdClass Object
(
    [meta_id] => 13
    [post_id] => 8
    [meta_key] => _edit_lock
    [meta_value] => 1346228510:1
)
stdClass Object
(
    [meta_id] => 16
    [post_id] => 8
    [meta_key] => _thumbnail_id
    [meta_value] => 9
) 
```

这是 print_r 的值 `$poster_meta = $wpdb->get_results("SELECT * FROM $wpdb->postmeta WHERE post_id = '{$poster}'");`

我如何得到`meta_value`of`meta_key = thumbnail`和`meta_key = _edit_last`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:37:20.557

把它当作一个对象。检查[对象如何](http://uk.php.net/manual/en/language.types.object.php)工作。

```
foreach($poster_meta as $object){
    echo $object->meta_id."\n";
    echo $object->post_id."\n";
    echo $object->meta_key."\n";
    echo $object->meta_value."\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:41:15.600

如果你想在 wordpress 中获取元键值，那么

试试这个代码： -

```
$team_counter = get_post_meta($post->ID, 'team_counter', true); 
```

get_post_meta 是 wordpress 库默认函数

# vb.net - 在 LINQ 语句中使用 OrElse

> ID：12179245
> 
> 赞同：2
> 
> 时间：2012-08-29T13:36:07.047
> 
> 标签：vb.net, linq

我有以下查询：

```
Dim query = From m In Me.DataWorkspace.Products_dbData.MaterialList _
            Where m.ProductModel = Me.lblMyModel _
            And ((m.MaterialID = MyParam) OrElse (m.MaterialID.Contains(MyParam))) _
            Select m _
            Order By m.SortNumber 
```

我的数据摘录如下所示：

```
ProductModel        MaterialID           SortNumber
------------        -------------        ----------
111                 ABC_Material1        NULL
111                 Material1            0
111                 XYZ_Material1        0
111                 Material2_J          0
111                 Material2_K          1
111                 Material2_L          2 
```

我有两种情况我想使用相同的查询。

**场景一：**

`MyParam = "Material1"`

*期望的结果：*

`query = "Material1"`

意思是`m.MaterialID = MyParam`匹配和`OrElse`短路所以`m.MaterialID.Contains(MyParam)`不执行。

*实际结果：*

`query = "ABC_Material1", "Material1", "XYZ_Material1"`

所以出于某种我不明白的原因，`Contains`正在执行。

**场景二：**

`MyParam = "Material2"`

*期望的结果：*

`query = "Material2_J", "Material2_K", "Material2_L"`

意思是`m.MaterialID = MyParam`不匹配，所以`m.MaterialID.Contains(MyParam)`改为执行。

*实际结果：*

`query = "Material2_J", "Material2_K", "Material2_L"`

所以这似乎像我预期的那样工作。

**问题：**

为什么这不像我期望的那样工作？我究竟做错了什么？我很确定我误解了`OrElse`操作员的功能，但我似乎找不到对我有意义的解释。

替代方案和解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:38:22.400

> 这意味着 m.MaterialID = MyParam 匹配并且 OrElse 短路，因此 m.MaterialID.Contains(MyParam) 不执行。

好吧，它不会为*那个单独的值*执行- 但它*会*为其他条目执行。

您必须记住的是，您的谓词应用于*每个*结果。是否已经存在完全匹配是完全不可见的，并且与您的谓词的后续应用无关。

顺便说一句，鉴于字符串“包含自身”，您的谓词等效于：

```
Where m.ProductModel = Me.lblMyModel And m.MaterialID.Contains(MyParam) 
```

听起来你真的想做两个查询：一个完全匹配查询，然后（如果没有找到任何结果）一个部分匹配查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:41:04.780

您理解`OrElse`正确，但不是 LINQ 查询的工作方式。
对每一行执行条件，与前一行的结果无关。

# ios - AVPlayer 是否支持在单独的文本文件中提供隐藏式字幕？

> ID：12179247
> 
> 赞同：5
> 
> 时间：2012-08-29T13:36:18.747
> 
> 标签：ios, accessibility, avplayer, closed-captions

我的团队制作了使用 AVPlayer 播放视频的 iOS 应用程序。最近有人告诉我们，我们必须允许显示所有视频的隐藏式字幕……但隐藏式字幕不会作为视频文件中的轨道出现（我们已经支持以这种方式出现的隐藏式字幕）。相反，我们会将它们作为单独的文本文件获取。我已经看到了一些关于在 SMIL 中包含字幕文本文件的参考资料，但我没有发现有关如何将此文本文件合并到播放体验中的任何信息。有没有人有这方面的个人经验，或者知道任何有帮助的在线文档/教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:37:15.070

好的，我们现在有一个计划，虽然它有点复杂，因为涉及 DRM。简化的版本是我们将按照 WWDC 2012 (https://developer.apple.com/videos/wwdc/2012/?id=512) 的 What's New in HTTP Live Streaming 演讲中的描述进行：即，创建一个引用我们的 webvtt 文件的播放列表，然后从主 m3u8 引用该播放列表。这将在 iOS6 中为我们提供隐藏式字幕作为字幕。

# java - 如何在 Android 中为按钮文本添加替代字体？

> ID：12179248
> 
> 赞同：2
> 
> 时间：2012-08-29T13:36:19.607
> 
> 标签：java, android, button, custom-font

我正在尝试在我的一个 Android 应用程序的按钮上使用 Calibri 字体，经过一番搜索后，我发现了如何制作自己的字体。但是当我尝试在按钮上设置字体时，它不会给我一个错误，但应用程序不会启动。有谁知道如何解决这个问题？

```
final Button bt4 = (Button) findViewById(R.id.bt4);
final Typeface font = Typeface.createFromAsset(getAssets(),"CALIBRI.ttf");
bt4.setTypeface(font); 
```

这几乎是我到目前为止使用的所有代码。

和日志猫信息

```
08-29 13:31:20.593: E/global(1143): Deprecated Thread methods are not supported.
08-29 13:31:20.593: E/global(1143): java.lang.UnsupportedOperationException
08-29 13:31:20.593: E/global(1143):     at java.lang.VMThread.stop(VMThread.java:85)
08-29 13:31:20.593: E/global(1143):     at java.lang.Thread.stop(Thread.java:1280)
08-29 13:31:20.593: E/global(1143):     at java.lang.Thread.stop(Thread.java:1247)
08-29 13:31:20.593: E/global(1143):     at com.github.TheCad.nijmegen1.SplashScreen$1.run(SplashScreen.java:33)
08-29 13:31:21.553: D/AndroidRuntime(1143): Shutting down VM
08-29 13:31:21.553: W/dalvikvm(1143): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-29 13:31:21.583: E/AndroidRuntime(1143): FATAL EXCEPTION: main
08-29 13:31:21.583: E/AndroidRuntime(1143): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.github.TheCad.nijmegen1/com.github.TheCad.nijmegen1.MainActivity}: java.lang.RuntimeException: native typeface cannot be made
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.os.Looper.loop(Looper.java:123)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invoke(Method.java:507)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at dalvik.system.NativeStart.main(Native Method)
08-29 13:31:21.583: E/AndroidRuntime(1143): Caused by: java.lang.RuntimeException: native typeface cannot be made
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.graphics.Typeface.<init>(Typeface.java:147)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.graphics.Typeface.createFromAsset(Typeface.java:121)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at com.github.TheCad.nijmegen1.MainActivity.onCreate(MainActivity.java:25)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-29 13:31:21.583: E/AndroidRuntime(1143):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-29 13:31:21.583: E/AndroidRuntime(1143):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:44:30.097

您已在运行时创建 TypeFace。

例子：

```
Button btn=(Button)findViewById(R.id.BUTTON_ID);
Typeface face=Typeface.createFromAsset(getAssets(), "fonts/FONT_NAME.TTF");
btn.setTypeface(face); 
```

**更新：** 您在 mainactivity 的第 25 行有错误。发布该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:02:01.953

在 assets 文件夹中创建一个名为“font”的文件夹并将您的字体“calibri.ttf”存储在该文件夹中，也尝试以小写字母保存您的字体名称并使用此代码，

```
Button btn=(Button)findViewById(R.id.BUTTON_ID);
Typeface face= = Typeface.createFromAsset(getAssets(), "font/calibri.ttf");
btn.setTypeface(face); 
```

# jquery - onmouseover 显示存储在数据库中的 blob 中的图像

> ID：12179257
> 
> 赞同：1
> 
> 时间：2012-08-29T13:36:39.243
> 
> 标签：jquery, css, jsp

Image(.jpg) 以 blob 类型存储在数据库中。我已经编写了用于检索 blob 的代码

```
<%@ page import="java.sql.*"%>
<%@ page import="java.io.*"%>
<% Blob image = null;
java.sql.Connection con = null;
byte[ ] imgData = null ;
java.sql.Statement stmt = null;
java.sql.ResultSet rs = null;
 try {
System.out.println("DisplayBlob.jsp request Parameter "+request.getParameter("imgName"));
con = java.sql.DriverManager.getConnection("jdbc:oracle:thin:@ip:1521:sid","userName", "password");
stmt = con.createStatement();
rs = stmt.executeQuery("SELECT blobObj FROM ImageBlobTable");
if (rs.next()) {
image = rs.getBlob(1);
imgData = image.getBytes(1,(int)image.length());
} else {
out.println("Display Blob Example");
out.println("image not found for given id>");
return;
}
response.setContentType("image/gif");
OutputStream o = response.getOutputStream();
o.write(imgData);
o.flush();
o.close();
} catch (Exception e) {
out.println("Unable To Display image");
out.println("Image Display Error=" + e.getMessage());
return;
} finally {
try {
rs.close();
stmt.close();
con.close();
 } catch (SQLException e) {
 e.printStackTrace();
 }
 }
 %> 
```

有 index.jsp。在这个 Jsp 中有文本，当用户将光标移到文本上时，我必须显示图像。当用户删除该文本上的光标时，图像应该消失。我怎样才能做到这一点？

技术：JSP,jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:48:17.693

将您的代码拆分为 servlet 以便像这样检索图像数据 + 下载，以及像[这样](https://stackoverflow.com/questions/6315671)通过 JavaScript 执行图像显示/隐藏的[JSP](https://stackoverflow.com/questions/6244593)。

# java - 使用 XSLT 转换在 XML 中创建 xmlns 属性

> ID：12179258
> 
> 赞同：4
> 
> 时间：2012-08-29T13:36:44.567
> 
> 标签：java, xml, xslt, xml-namespaces

我正在尝试使用 JDK Transformer（Oracle XML v2 Parser 或 JAXP）在 XSLT 转换期间将 xmlns 属性添加到生成的 XML，并使用参数传递的值，但它始终默认为[http://www.w3.org/2000/xmlns /](http://www.w3.org/2000/xmlns/)

我的源 XML

```
<test/> 
```

我的 XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://example.com">
    <xsl:param name="myNameSpace" select="'http://neilghosh.com'"/>
    <xsl:template match="/">
        <process>
            <xsl:attribute name="xmlns:neil">
                <xsl:value-of select="$myNameSpace"/>
            </xsl:attribute>
        </process>
    </xsl:template>
</xsl:stylesheet> 
```

我的结果

```
<?xml version="1.0"?>
<process xmlns="http://www.w3.org/2000/xmlns/" xmlns:neil="neilghosh.com">
</process> 
```

我想要的结果

```
<?xml version="1.0"?>
<process xmlns="http://example.com"  xmlns:neil="neilghosh.com">
</process> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:11:07.293

首先，在 XSLT 数据模型中，您不想创建属性节点，而是要创建名称空间节点。

命名空间节点通常是自动创建的：如果您在特定命名空间中创建元素或属性，处理器会自动添加必要的命名空间节点（因此，在序列化时，命名空间声明）会自动添加。

如果您想创建一个不必要的名称空间节点（因为它没有用于任何元素或属性的名称中），那么在 XSLT 2.0 中您可以使用 xsl:namespace。如果您坚持使用 XSLT 1.0，那么有一个解决方法，它涉及在相关命名空间中创建一个元素，然后复制其命名空间节点：

```
<xsl:variable name="ns">
  <xsl:element name="neil:dummy" namespace="{$param}"/>
</xsl:variable>
<process>
  <xsl:copy-of select="$ns/*/namespace::neil"/>
</process> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T16:26:51.260

Michael Kay 为您提供了正确答案，但根据您的评论，您不确定如何在转换中使用它。

**这是一个完整的转换**：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pNamespace" select="'neilghosh.com'"/>

 <xsl:variable name="vDummy">
   <xsl:element name="neil:x" namespace="{$pNamespace}"/>
 </xsl:variable>

 <xsl:template match="/*">
  <xsl:element name="process" namespace="http://example.com">
    <xsl:copy-of select="namespace::*"/>
    <xsl:copy-of select="ext:node-set($vDummy)/*/namespace::*[.=$pNamespace]"/>
  </xsl:element>
 </xsl:template>
 </xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<test/> 
```

**产生了想要的正确结果：**

```
<process xmlns="http://example.com" xmlns:neil="neilghosh.com" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:58:26.880

XML 中的命名空间声明不是属性，即使它们看起来像属性。在 XSLT 2.0 中，您可以使用`<xsl:namespace name="neil" select="$myNameSpace" />`动态地将名称空间声明添加到结果树中，但该功能在 XSLT 1.0 中不可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:22:01.293

终于找到了一个与我的 XSLT 处理器 (Oracle XML V2 Parser) 一起使用的解决方法

我必须将[其转换为 DOM 文档](http://www.java2s.com/Code/Java/XML/TransforminganXMLFilewithXSLintoaDOMDocument.htm)，然后将该 DOM 保存到文件系统，而不是直接输出到[StreamResult](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/stream/StreamResult.html)

我在[转换方法中使用了](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/Transformer.html#transform%28javax.xml.transform.Source,%20javax.xml.transform.Result%29)[DOMResult](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/dom/DOMResult.html)

以下 XSLT 片段有效，但有一个额外的 xmlns:xmlns="http://www.w3.org/2000/xmlns/" 可能被[Document](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html)吸收，并且当我坚持到文件系统时没有出现在最终输出中。

```
 <process>    
      <xsl:attribute name="xmlns">
        <xsl:value-of select="'http://example.com'"/>
      </xsl:attribute> 
 <process> 
```

我知道这不是最好的方法，但考虑到解析约束，这是我现在唯一的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:44:24.293

不要尝试自己创建“xmlns”属性。在 XSLT 中创建名称空间，它们将自动完成。这个 XSLT 工作（用 Saxon 9.4 测试）：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:neil="neilghosh.com"    
xpath-default-namespace="http://example.com"
xmlns="http://example.com" version="2.0">

<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:param name="myDynamicNamespace" select="'http://neilghosh.com'"/>

<xsl:template match="/">
    <xsl:element name="process">   
        <xsl:namespace name="neil" select="$myDynamicNamespace"/>
    </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

并给出以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<process xmlns="http://example.com" xmlns:neil="http://neilghosh.com"/> 
```

# jquery - 我怎么知道哪个收音机检查了，哪个没有用 jquery

> ID：12179261
> 
> 赞同：0
> 
> 时间：2012-08-29T13:36:46.780
> 
> 标签：jquery, jquery-selectors, radio

我正在研究 php 测验测试脚本。

我需要知道哪个被选中，哪个不是。

所有收音机都在里面，它们是由while创建的。

```
var myRadio = $("#form1 input[type='radio']:checked").val();
alert(myRadio); 
```

这只是返回 1 个值，我有很多收音机里面的形式。

```
<label>

      <input type="radio" name="<?php echo $s_id; ?>" value="<?php echo $cid; ?>"  />
      <?php echo $answer; ?>
</label> 
```

[jsfiddle](http://jsfiddle.net/bhtZA/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:43:30.233

```
var myRadio = $('input[name=myRadio]');
var checkedValue = myRadio.filter(':checked').val(); 
```

或者

```
$('input[name=radioName]:checked', '#myForm').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:41:16.080

因为看起来你对每个人的唯一标识是他们的-name-，所以我只是记录单选按钮名称属性。通过循环并检查`prop('checked')`，您可以轻松查看选择了哪些。

```
$('input[type="radio"]').each(function () {
    if ( $(this).prop('checked') === true ) {
        console.log($(this).prop('name'));
    }
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/bhtZA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:04:02.193

> $('#checkbox').is(':checked')

返回真或假。

[在这里，您有指向脚本的小提琴链接](http://jsfiddle.net/LfddZ/1/)

# oop - 动画和MVC原理

> ID：12179267
> 
> 赞同：3
> 
> 时间：2012-08-29T13:37:17.923
> 
> 标签：oop, model-view-controller, design-patterns, animation

我总是根据 MVC 原则设计我的程序，但是在其中安装动画是一件很痛苦的事情。

到目前为止，我已经实施了以下方案：

1）模型做一些动作[]并向所有监听器发送通知；

2) 收到通知后，视图会向队列中添加动画。

这是一种可行的方法，但它有一个巨大的缺点——模型和 UI 变得不同步。例如，模型已经应用了 10 个操作，但 UI 仍处于状态，其中应用了 5 个。

这个缺点迫使动画被编码为不可中断的，这对于 UI 设计来说不是很好的做法。请建议如何解决该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:44:30.257

您可以在动画完成**后**更新您的模型。这样，您的动画是用户可以用来确定操作何时完成的表示。例如，在将一个对象拖到其目的地之后，该对象将（模型端）保持在其旧位置，直到动画结束，然后才将其移动到新位置。

这样，如果动画因用户中断或发生错误而失败，您的模型仍将与视图的当前状态同步。

# python - @classmethod 和 @staticmethod 对初学者的意义？

> ID：12179271
> 
> 赞同：1784
> 
> 时间：2012-08-29T13:37:33.443
> 
> 标签：python, oop, static-methods, class-method

有人可以向我解释python中`@classmethod`和的含义吗？`@staticmethod`我需要知道区别和含义。

据我了解，`@classmethod`告诉一个类它是一个应该被继承到子类中的方法，或者......什么。然而，这有什么意义呢？为什么不直接定义类方法而不添加`@classmethod`or`@staticmethod`或任何`@`定义？

**tl;dr：我应该什么** *时候*使用它们，*为什么*要使用它们，我应该*如何*使用它们？

* * *

## 回答 #1

> 赞同：2807
> 
> 时间：2012-08-29T14:03:03.613

虽然`classmethod`和`staticmethod`非常相似，但两个实体的用法略有不同：`classmethod`必须将类对象的引用作为第一个参数，而`staticmethod`可以根本没有参数。

## 例子

```
class Date(object):

    def __init__(self, day=0, month=0, year=0):
        self.day = day
        self.month = month
        self.year = year

    @classmethod
    def from_string(cls, date_as_string):
        day, month, year = map(int, date_as_string.split('-'))
        date1 = cls(day, month, year)
        return date1

    @staticmethod
    def is_date_valid(date_as_string):
        day, month, year = map(int, date_as_string.split('-'))
        return day <= 31 and month <= 12 and year <= 3999

date2 = Date.from_string('11-09-2012')
is_date = Date.is_date_valid('11-09-2012') 
```

## 解释

让我们假设一个类的例子，处理日期信息（这将是我们的样板）：

```
class Date(object):

    def __init__(self, day=0, month=0, year=0):
        self.day = day
        self.month = month
        self.year = year 
```

此类显然可用于存储有关某些日期的信息（没有时区信息；假设所有日期都以 UTC 表示）。

这里我们有`__init__`一个 Python 类实例的典型初始化程序，它接收参数作为典型的`instancemethod`，具有第一个非可选参数 ( `self`)，它包含对新创建实例的引用。

**类方法**

我们有一些任务可以使用`classmethod`s 很好地完成。

*假设我们要创建许多`Date`类实例，这些实例的日期信息来自外部源，编码为格式为“dd-mm-yyyy”的字符串。假设我们必须在项目源代码的不同位置执行此操作。*

所以我们必须在这里做的是：

1.  解析字符串以接收日、月和年作为三个整数变量或由该变量组成的 3 项元组。
2.  `Date`通过将这些值传递给初始化调用来实例化。

这看起来像：

```
day, month, year = map(int, string_date.split('-'))
date1 = Date(day, month, year) 
```

为此，C++ 可以通过重载实现这样的功能，但 Python 缺少这种重载。相反，我们可以使用`classmethod`. 让我们创建另一个“*构造函数*”。

```
 @classmethod
    def from_string(cls, date_as_string):
        day, month, year = map(int, date_as_string.split('-'))
        date1 = cls(day, month, year)
        return date1

date2 = Date.from_string('11-09-2012') 
```

让我们更仔细地看一下上面的实现，并回顾一下我们在这里有什么优势：

1.  我们已经在一个地方实现了日期字符串解析，现在它可以重用了。
2.  封装在这里工作得很好（如果您认为可以在其他地方将字符串解析实现为单个函数，则此解决方案更适合 OOP 范式）。
3.  `cls`是一个包含**类本身**的对象，而不是类的实例。这很酷，因为如果我们继承我们的`Date`类，所有的孩子也将被`from_string`定义。

**静态方法**

怎么样`staticmethod`？它非常类似于`classmethod`但不采用任何强制性参数（就像类方法或实例方法一样）。

让我们看下一个用例。

*我们有一个想要以某种方式验证的日期字符串。此任务在逻辑上也绑定到`Date`我们目前使用的类，但不需要对其进行实例化。*

这是`staticmethod`有用的地方。让我们看下一段代码：

```
 @staticmethod
    def is_date_valid(date_as_string):
        day, month, year = map(int, date_as_string.split('-'))
        return day <= 31 and month <= 12 and year <= 3999

    # usage:
    is_date = Date.is_date_valid('11-09-2012') 
```

因此，正如我们从 的用法中看到的那样`staticmethod`，我们无法访问类是什么——它基本上只是一个函数，在语法上像方法一样被调用，但无法访问对象及其内部结构（字段和另一个方法），而 classmethod 可以。

* * *

## 回答 #2

> 赞同：938
> 
> 时间：2013-01-30T13:35:39.083

Rostyslav Dzinko 的回答非常恰当。我想我可以强调在创建附加构造函数时应该选择`@classmethod`的另一个原因。`@staticmethod`

在上面的示例中，Rostyslav 将`@classmethod` `from_string`用作工厂来`Date`从其他不可接受的参数创建对象。`@staticmethod`如下代码所示，可以执行相同的操作：

```
class Date:
  def __init__(self, month, day, year):
    self.month = month
    self.day   = day
    self.year  = year

  def display(self):
    return "{0}-{1}-{2}".format(self.month, self.day, self.year)

  @staticmethod
  def millenium(month, day):
    return Date(month, day, 2000)

new_year = Date(1, 1, 2013)               # Creates a new Date object
millenium_new_year = Date.millenium(1, 1) # also creates a Date object. 

# Proof:
new_year.display()           # "1-1-2013"
millenium_new_year.display() # "1-1-2000"

isinstance(new_year, Date) # True
isinstance(millenium_new_year, Date) # True 
```

因此两者`new_year`都是类`millenium_new_year`的实例`Date`。

但是，如果您仔细观察，`Date`无论如何，Factory 过程都经过硬编码来创建对象。这意味着即使`Date`该类是子类，子类仍将创建普通`Date`对象（没有子类的任何属性）。请参阅下面的示例：

```
class DateTime(Date):
  def display(self):
      return "{0}-{1}-{2} - 00:00:00PM".format(self.month, self.day, self.year)

datetime1 = DateTime(10, 10, 1990)
datetime2 = DateTime.millenium(10, 10)

isinstance(datetime1, DateTime) # True
isinstance(datetime2, DateTime) # False

datetime1.display() # returns "10-10-1990 - 00:00:00PM"
datetime2.display() # returns "10-10-2000" because it's not a DateTime object but a Date object. Check the implementation of the millenium method on the Date class for more details. 
```

`datetime2`是不是一个实例`DateTime`？怎么回事？嗯，那是因为使用了`@staticmethod`装饰器。

在大多数情况下，这是不希望的。如果您想要的是一个知道调用它的类的工厂方法，那么`@classmethod`这就是您所需要的。

重写`Date.millenium`为（这是上面代码中唯一改变的部分）：

```
@classmethod
def millenium(cls, month, day):
    return cls(month, day, 2000) 
```

确保`class`不是硬编码而是学习的。`cls`可以是任何子类。结果`object`将正确地成为`cls`.
让我们测试一下：

```
datetime1 = DateTime(10, 10, 1990)
datetime2 = DateTime.millenium(10, 10)

isinstance(datetime1, DateTime) # True
isinstance(datetime2, DateTime) # True

datetime1.display() # "10-10-1990 - 00:00:00PM"
datetime2.display() # "10-10-2000 - 00:00:00PM" 
```

原因是，正如你现在所知道的，它`@classmethod`被用来代替`@staticmethod`

* * *

## 回答 #3

> 赞同：275
> 
> 时间：2012-08-29T13:40:24.343

`@classmethod`意思是：当这个方法被调用时，我们将类作为第一个参数而不是该类的实例传递（就像我们通常对方法所做的那样）。这意味着您可以在该方法而不是特定实例中使用类及其属性。

`@staticmethod`意思是：当这个方法被调用时，我们不会将类的实例传递给它（就像我们通常对方法所做的那样）。这意味着您可以将函数放在类中，但不能访问该类的实例（当您的方法不使用实例时，这很有用）。

* * *

## 回答 #4

> 赞同：110
> 
> 时间：2014-04-14T07:12:38.953

# 何时使用每个

`@staticmethod`函数只不过是在类中定义的函数。它可以在不先实例化类的情况下调用。它的定义通过继承是不可变的。

*   Python 不必为对象实例化**绑定方法**。
*   它简化了代码的可读性：看到**@staticmethod**，我们知道该方法不依赖于对象本身的状态；

`@classmethod`函数也可以在不实例化类的情况下调用，但它的定义遵循子类，而不是父类，通过继承，可以被子类覆盖。那是因为`@classmethod`函数的第一个参数必须始终是`cls (class)`.

*   **工厂方法**，用于使用例如某种预处理为类创建实例。
*   **静态方法调用静态方法**：如果将一个静态方法拆分为多个静态方法，则不应硬编码类名，而应使用类方法

[这](http://julien.danjou.info/blog/2013/guide-python-static-class-abstract-methods)是该主题的良好链接。

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2017-10-24T16:09:46.757

> ## `@classmethod`和的含义`@staticmethod`？

*   方法是对象命名空间中的函数，可作为属性访问。
*   常规（即实例）方法将实例（我们通常称之为`self`）作为隐式的第一个参数。
*   类方法获取***类***（我们通常称之为`cls`）作为隐式的第一个参数。
*   静态方法没有隐式的第一个参数（如常规函数）***。***

> 我应该什么时候使用它们，为什么要使用它们，我应该如何使用它们？

你*不需要*任何一个装饰器。但是根据您应该最小化函数参数数量的原则（请参阅 Clean Coder），它们对于这样做很有用。

```
class Example(object):

    def regular_instance_method(self):
        """A function of an instance has access to every attribute of that 
        instance, including its class (and its attributes.)
        Not accepting at least one argument is a TypeError.
        Not understanding the semantics of that argument is a user error.
        """
        return some_function_f(self)

    @classmethod
    def a_class_method(cls):
        """A function of a class has access to every attribute of the class.
        Not accepting at least one argument is a TypeError.
        Not understanding the semantics of that argument is a user error.
        """
        return some_function_g(cls)

    @staticmethod
    def a_static_method():
        """A static method has no information about instances or classes
        unless explicitly given. It just lives in the class (and thus its 
        instances') namespace.
        """
        return some_function_h() 
```

对于实例方法和类方法，不接受至少一个参数是 TypeError，但不理解该参数的语义是用户错误。

（定义`some_function`的，例如：

```
some_function_h = some_function_g = some_function_f = lambda x=None: x 
```

这将起作用。）

### 实例和类的虚线查找：

实例上的虚线查找按此顺序执行 - 我们查找：

1.  类命名空间中的数据描述符（如属性）
2.  实例中的数据`__dict__`
3.  类命名空间（方法）中的非数据描述符。

请注意，实例上的虚线查找是这样调用的：

```
instance = Example()
instance.regular_instance_method 
```

和方法是可调用的属性：

```
instance.regular_instance_method() 
```

### 实例方法

参数 ,`self`是通过虚线查找隐式给出的。

您必须从类的实例访问实例方法。

```
>>> instance = Example()
>>> instance.regular_instance_method()
<__main__.Example object at 0x00000000399524E0> 
```

### 类方法

参数 ,`cls`是通过点查找隐式给出的。

您可以通过实例或类（或子类）访问此方法。

```
>>> instance.a_class_method()
<class '__main__.Example'>
>>> Example.a_class_method()
<class '__main__.Example'> 
```

### 静态方法

没有隐式给出任何参数。此方法与在模块的命名空间上定义（例如）的任何函数一样工作，除了它可以被查找

```
>>> print(instance.a_static_method())
None 
```

> ## 同样，我应该什么时候使用它们，为什么要使用它们？

与实例方法相比，它们中的每一个在传递方法的信息方面都越来越严格。

当您不需要这些信息时使用它们。

这使您的函数和方法更易于推理和单元测试。

哪个更容易推理？

```
def function(x, y, z): ... 
```

或者

```
def function(y, z): ... 
```

或者

```
def function(z): ... 
```

参数较少的函数更容易推理。它们也更容易进行单元测试。

这些类似于实例、类和静态方法。请记住，当我们有一个实例时，我们也有它的类，再次问自己，哪个更容易推理？：

```
def an_instance_method(self, arg, kwarg=None):
    cls = type(self)             # Also has the class of instance!
    ...

@classmethod
def a_class_method(cls, arg, kwarg=None):
    ...

@staticmethod
def a_static_method(arg, kwarg=None):
    ... 
```

## 内置示例

以下是我最喜欢的几个内置示例：

`str.maketrans`静态方法是模块中的一个函数，`string`但从命名空间访问它更方便`str`。

```
>>> 'abc'.translate(str.maketrans({'a': 'b'}))
'bbc' 
```

`dict.fromkeys`类方法返回一个从可迭代的键实例化的新字典：

```
>>> dict.fromkeys('abc')
{'a': None, 'c': None, 'b': None} 
```

子类化时，我们看到它以类方法的形式获取类信息，这非常有用：

```
>>> class MyDict(dict): pass
>>> type(MyDict.fromkeys('abc'))
<class '__main__.MyDict'> 
```

## 我的建议 - 结论

当你不需要类或实例参数时使用静态方法，但函数与对象的使用有关，并且函数在对象的命名空间中很方便。

当您不需要实例信息时使用类方法，但可能需要其他类或静态方法的类信息，或者本身作为构造函数。（您不会对类进行硬编码，以便可以在此处使用子类。）

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2015-08-21T07:18:24.240

`@classmethod`当他/她想要根据哪个子类调用该方法来更改该方法的行为时，将使用该方法。请记住，我们在类方法中有对调用类的引用。

使用静态时，您希望行为在子类之间保持不变

例子：

```
class Hero:

  @staticmethod
  def say_hello():
     print("Helllo...")

  @classmethod
  def say_class_hello(cls):
     if(cls.__name__=="HeroSon"):
        print("Hi Kido")
     elif(cls.__name__=="HeroDaughter"):
        print("Hi Princess")

class HeroSon(Hero):
  def say_son_hello(self):
     print("test  hello")

class HeroDaughter(Hero):
  def say_daughter_hello(self):
     print("test  hello daughter")

testson = HeroSon()

testson.say_class_hello() #Output: "Hi Kido"

testson.say_hello() #Outputs: "Helllo..."

testdaughter = HeroDaughter()

testdaughter.say_class_hello() #Outputs: "Hi Princess"

testdaughter.say_hello() #Outputs: "Helllo..." 
```

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2015-07-19T16:43:01.097

***一点汇编***

**@staticmethod** 一种在类中编写方法而不引用它被调用的对象的方法。所以不需要传递像 self 或 cls 这样的隐式参数。它的编写方式与在类外部编写的方式完全相同，但在 python 中没有用，因为如果您需要在类中封装一个方法，因为该方法需要成为该类的一部分，@staticmethod 就派上用场了案子。

**@classmethod** 当您想编写工厂方法并且可以通过此自定义属性附加到类中时，这一点很重要。可以在继承的类中覆盖此属性。

这两种方法之间的比较可以如下

[![桌子](../Images/f20a2af1f9db06a8a06f4a1cb2119284.png)](https://i.stack.imgur.com/LUyfq.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-12T21:21:20.893

**@classmethod**

`@classmethod`可以比较`__init__`。你可以认为它是另一个`__init__()`。这是python在c++中实现类构造函数重载的方式。

```
class C:
    def __init__(self, parameters):
        ....

    @classmethod
    def construct_from_func(cls, parameters):
        ....

obj1 = C(parameters)
obj2 = C.construct_from_func(parameters) 
```

请注意，它们在使用时都有一个类的引用作为定义中的第一个参数，但通常`__init__`使用。`self``construct_from_func``cls`

**@静态方法**

`@staticmethod`可以比较`object method`

```
class C:
    def __init__(self):
        ....

    @staticmethod
    def static_method(args):
        ....

    def normal_method(parameters):
        ....

result = C.static_method(parameters)
result = obj.normal_method(parameters) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-23T11:38:23.723

我是这个网站的初学者，我已经阅读了上述所有答案，并得到了我想要的信息。但是，我没有投票的权利。所以我想以我理解的答案开始我的 StackOverflow。

*   `@staticmethod`不需要 self 或 cls 作为方法的第一个参数
*   `@staticmethod``@classmethod`包装函数可以由实例或类变量调用
*   `@staticmethod`装饰函数影响某种“不可变属性”，子类继承不能覆盖其由`@staticmethod`装饰器包装的基类函数。
*   `@classmethod`需要 cls（类名，如果需要，可以更改变量名，但不建议）作为函数的第一个参数
*   `@classmethod`一直以子类方式使用，子类继承可能会改变基类函数的效果，即`@classmethod`包装好的基类函数可能被不同的子类覆盖。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-12T09:41:11.370

简而言之，@classmethod 将普通方法转换为工厂方法。

让我们用一个例子来探索它：

```
class PythonBook:
    def __init__(self, name, author):
        self.name = name
        self.author = author
    def __repr__(self):
        return f'Book: {self.name}, Author: {self.author}' 
```

如果没有@classmethod，您应该努力一个一个地创建实例并且它们是分散的。

```
book1 = PythonBook('Learning Python', 'Mark Lutz')
In [20]: book1
Out[20]: Book: Learning Python, Author: Mark Lutz
book2 = PythonBook('Python Think', 'Allen B Dowey')
In [22]: book2
Out[22]: Book: Python Think, Author: Allen B Dowey 
```

例如@classmethod

```
class PythonBook:
    def __init__(self, name, author):
        self.name = name
        self.author = author
    def __repr__(self):
        return f'Book: {self.name}, Author: {self.author}'
    @classmethod
    def book1(cls):
        return cls('Learning Python', 'Mark Lutz')
    @classmethod
    def book2(cls):
        return cls('Python Think', 'Allen B Dowey') 
```

测试它：

```
In [31]: PythonBook.book1()
Out[31]: Book: Learning Python, Author: Mark Lutz
In [32]: PythonBook.book2()
Out[32]: Book: Python Think, Author: Allen B Dowey 
```

看？在类定义中成功创建实例并将它们收集在一起。

总之，@classmethod 装饰器将常规方法转换为工厂方法，使用 classmethods 可以根据需要添加尽可能多的替代构造函数。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-24T22:59:50.330

一种稍微不同的思考方式，可能对某人有用......在超类中使用类方法来定义该方法在被不同的子类调用时应该如何表现。当我们想要返回相同的东西而不考虑我们正在调用的子类时，使用静态方法。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-09-02T14:34:19.707

类方法可以修改类的状态，它绑定到类，它包含 cls 作为参数。

静态方法不能修改类状态，它绑定到类，它不知道类或实例

```
class empDetails:
    def __init__(self,name,sal):
        self.name=name
        self.sal=sal
    @classmethod
    def increment(cls,name,none):
        return cls('yarramsetti',6000 + 500)
    @staticmethod
    def salChecking(sal):
        return sal > 6000

emp1=empDetails('durga prasad',6000)
emp2=empDetails.increment('yarramsetti',100)
# output is 'durga prasad'
print emp1.name
# output put is 6000
print emp1.sal
# output is 6500,because it change the sal variable
print emp2.sal
# output is 'yarramsetti' it change the state of name variable
print emp2.name
# output is True, because ,it change the state of sal variable
print empDetails.salChecking(6500) 
```

# android - 跨平台的应用程序开发堆栈来解决 PC 和移动问题？

> ID：12179273
> 
> 赞同：3
> 
> 时间：2012-08-29T13:37:36.170
> 
> 标签：android, ios, mobile, cross-platform, desktop-application

我想开发一个适用于 PC（Windows、Mac、Linux 等）和移动设备（iPhone、Android 等）的应用程序。我想在 GUI 层下尽可能多地在这些平台之间共享/重用代码。GUI 层本身可能是特定的或在某些平台之间共享。我想尽可能使用 Web 技术，所以更喜欢用 JavaScript 编写共享代码，至少用 HTML 编写 PC GUI。

没有花哨的 GUI 要求，但重点是同步和存储/搜索大量数据（可能是千兆字节）并接收有关其更新的通知。

您会建议什么（一组）应用程序开发堆栈？

更新：具体来说，我正在寻找以下工具或库：

1.  可以在每个平台上生成可安装的应用程序（可安装的 exe、apk 等）。
2.  允许应用程序使用同步数据完全脱机运行。
3.  尽量减少我的共享代码需要担心的不同 API 和实现的数量（相同的数据库 API，尽可能少的不同 DOM 实现等）。

例如，我可以为 PC 制作一个基于 HTML 的 Adob​​e Air 应用程序，然后在移动设备上使用 PhoneGap。或者我的用例有更好的产品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:46:48.783

网络是你的朋友。您将需要一个基于 Web 的 API 和一个基于 Web 的数据库。假设您也将创建一个**网站**，因此在创建网站时，您应该将所有业务逻辑放入 API（或创建可以输出为 XML/JSON 的控制器）以及前端网站的 HTML）。

这样，GUI 可以在每个平台上本地创建，并且大部分“业务逻辑”都通过服务器。

您甚至可以创建一个可以“响应式”的 GUI（基于 Web）（即根据您正在查看的设备进行更改。请参阅 Twitter 的 Bootstrap 以获取灵感），而您只需要本地创建一个 Web 浏览器/web 基于视图的应用程序，它将成为您网站的窗口。

如果您选择跨平台开发，那么[Mono](http://www.mono-project.com/Main_Page)看起来是您最好的选择。它声称在 Windows、PC、Linux、iOS 和 Android 上是跨平台的——尽管你已经怀疑你将为所有人创建单独的应用程序。您可能能够将业务逻辑打包到框架或插件中，这些框架或插件可以在可能适合您需求的所有平台上共享。虽然它很贵 - 对于一家公司来说它会很好，但如果这只是一个“副项目”，那么它可能有点太贵了。

# java - 使用 documentFilter 过滤制表符

> ID：12179274
> 
> 赞同：2
> 
> 时间：2012-08-29T13:37:36.607
> 
> 标签：java, swing, jtextarea, documentfilter

所以，我有一个带有 DocumentFilter 的 JTextArea 程序。它应该（除其他外）过滤掉制表符并防止它们完全输入到 JTextArea 中。

好吧，当我打字时效果很好，但我仍然可以将它粘贴进去。根据代码，我应该不能......

下面是一种SSCCE。只需运行它，按 ctrl+n 并输入。所有彩色文件都是具有相同 DocumentFilter 的 JTextAreas。过滤器本身是第一类（DefaultDocFilter），只有您需要查看。

```
package core;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Properties;
import java.util.ResourceBundle;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.KeyStroke;
import javax.swing.border.Border;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;
import javax.swing.text.JTextComponent;

class DefaultDocFilter extends DocumentFilter
{
    public void insertString(FilterBypass fb, int offs,String str, AttributeSet a) throws BadLocationException 
    {
        if ((fb.getDocument().getLength() + str.length()) <= 200)
        {
            str.replaceAll("\n", " ");
            str.replaceAll("\t", " ");
            System.out.print(str);
            fb.insertString(offs, str, a);
        }
        else
        {
            int spaceLeft = 200 - fb.getDocument().getLength();
            if (spaceLeft <= 0)
                return;

            str.substring(0, spaceLeft);
            str.replaceAll("\n", " ");
            str.replaceAll("\t", " ");

            fb.insertString(offs, str, a);
        }
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException 
    {
        if (str.equals("\n") || str.equals("\t"))
        { 
            str = "";
        }
        if ((fb.getDocument().getLength() + str.length() - length) <= 200)
        {
            str.replaceAll("\n", " ");
            str.replaceAll("\t", " ");
            fb.replace(offs, length, str, a);
        }
        else
        {
            int spaceLeft = 200 - fb.getDocument().getLength() + length;
            if (spaceLeft <= 0)
                return;

            fb.replace(offs, length, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
        }
    }
}

@SuppressWarnings("serial")
class DefaultFont extends Font
{
    public DefaultFont()
    {
        super("Arial", PLAIN, 20);
    }
}

@SuppressWarnings("serial")
class Page extends JPanel
{
    public JPanel largePage;
    public int content;

    public Page(JPanel panel, int index)
    {
        largePage = new JPanel();
        largePage.setLayout(new BoxLayout(largePage, BoxLayout.Y_AXIS));
        largePage.setMaximumSize(new Dimension(794, 1123));
        largePage.setPreferredSize(new Dimension(794, 1123));
        largePage.setAlignmentX(Component.CENTER_ALIGNMENT);
        largePage.setBackground(Color.WHITE);
        largePage.add(new Box.Filler(new Dimension(0, 96), new Dimension(0, 96), new Dimension(0, 96)));

        setMaximumSize(new Dimension(556, 931));
        setBackground(Color.LIGHT_GRAY);
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        add(new Box.Filler(new Dimension(556, 0), new Dimension(556, 931), new Dimension(556, 931)));

        largePage.add(this);
        largePage.add(new Box.Filler(new Dimension(0, 96), new Dimension(0, 96), new Dimension(0, 96)));

        panel.add(largePage, index);
        panel.add(new Box.Filler(new Dimension(0, 40), new Dimension(0, 40), new Dimension(0, 40)));

        content = 0;

        Main.pages.add(this);
    }
}

@SuppressWarnings("serial")
class Heading extends JTextArea
{
    public boolean type;
    public AbstractDocument doc;
    public ArrayList<JPanel/*Question*/> questions;
    public ArrayList<JPanel/*List*/> list;  

    public Heading(boolean segment, Page page)
    {
        type = segment;

        setBackground(Color.RED);
        setFont(new Font("Arial", Font.BOLD, 20));

        Border in = BorderFactory.createDashedBorder(Color.BLACK);
        Border out = BorderFactory.createMatteBorder(0, 0, 10, 0, Color.WHITE);

        setBorder(BorderFactory.createCompoundBorder(out, in));
        setLineWrap(true);
        setWrapStyleWord(true);

        setText("Heading 1 Heading 1 Heading 1 Heading 1");

        doc = (AbstractDocument)this.getDocument();
        doc.setDocumentFilter(new DefaultDocFilter());

        page.add(this, 0);
        page.content++;

        if (type)
        {
            questions = new ArrayList<JPanel>();
        }
        else
        {
            list = new ArrayList<JPanel>();
        }
    }
}

@SuppressWarnings("serial")
class Question extends JPanel
{
    public JPanel questionArea, numberArea, answerArea;
    public JLabel number;
    public JTextArea question;
    public AbstractDocument doc;

    public Question(Page page, int pageNum, int index)
    {
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        setBorder(BorderFactory.createMatteBorder(0, 0, 5, 0, Color.WHITE));

        questionArea = new JPanel();
        questionArea.setLayout(new BoxLayout(questionArea, BoxLayout.X_AXIS));
        questionArea.setBorder(BorderFactory.createMatteBorder(0, 0, 8, 0, Color.WHITE));

        numberArea = new JPanel();
        numberArea.setLayout(new BorderLayout());
        numberArea.setBackground(Color.WHITE);

        number = new JLabel(pageNum+".  ", JLabel.RIGHT);
        number.setMinimumSize(new Dimension(100, 20));
        number.setPreferredSize(new Dimension(100, 20));
        number.setMaximumSize(new Dimension(100, 20));
        number.setFont(new Font("Arial", Font.PLAIN, 17));

        numberArea.add(number, BorderLayout.NORTH);

        questionArea.add(numberArea);

        question = new JTextArea();
        question.setFont(new Font("Arial", Font.PLAIN, 17));
        question.setBorder(BorderFactory.createDashedBorder(Color.BLACK));
        question.setLineWrap(true);
        question.setWrapStyleWord(true);
        question.setBackground(Color.GREEN);

        question.setText("Is this the first question?");

        doc = (AbstractDocument)question.getDocument();
        doc.setDocumentFilter(new DefaultDocFilter());

        questionArea.add(question);

        add(questionArea);

        answerArea = new JPanel();
        answerArea.setLayout(new BoxLayout(answerArea, BoxLayout.Y_AXIS));

        add(answerArea);

        page.add(this, index);
        page.content++;
    }
}

@SuppressWarnings("serial")
class Answer extends JPanel
{
    public JPanel letterArea;
    public JLabel letter;
    public JTextArea answer;
    public AbstractDocument doc;

    public Answer(Question q, int index)
    {
        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));

        letterArea = new JPanel();
        letterArea.setLayout(new BorderLayout());
        letterArea.setBackground(Color.WHITE);

        letter = new JLabel((char)(index+96)+")  ", JLabel.RIGHT);
        letter.setMinimumSize(new Dimension(150, 20));
        letter.setPreferredSize(new Dimension(150, 20));
        letter.setMaximumSize(new Dimension(150, 20));
        letter.setFont(new Font("Arial", Font.PLAIN, 17));

        letterArea.add(letter, BorderLayout.NORTH);

        add(letterArea);

        answer = new JTextArea();
        answer.setFont(new Font("Arial", Font.PLAIN, 17));

        Border in = BorderFactory.createDashedBorder(Color.BLACK);
        Border out = BorderFactory.createMatteBorder(0, 0, 5, 0, Color.WHITE);

        answer.setBorder(BorderFactory.createCompoundBorder(out, in));
        answer.setLineWrap(true);
        answer.setWrapStyleWord(true);

        answer.addKeyListener(new KeyListener()
        {
            @Override
            public void keyPressed(KeyEvent arg0)
            {
                System.out.print(((JTextComponent) arg0.getSource()).getText());
                if (arg0.getKeyCode() == KeyEvent.VK_ENTER)
                {
                    String JLabelText = ((JLabel) ((JPanel) ((JPanel) ((Component) arg0.getSource()).getParent()).getComponent(0)).getComponent(0)).getText();
                    int ansNum = (int)JLabelText.charAt(0)-95;
                    if (ansNum < 6)
                    {
                        Answer k = new Answer((Question) ((JTextArea) arg0.getSource()).getParent().getParent().getParent(), ansNum);
                        k.answer.grabFocus();
                        Main.mWindow.repaint();
                        Main.mWindow.validate();
                    }
                }

            }

            public void keyReleased(KeyEvent arg0) {}

            public void keyTyped(KeyEvent arg0) {}

        });

        doc = (AbstractDocument)answer.getDocument();
        doc.setDocumentFilter(new DefaultDocFilter());

        answer.setBackground(Color.PINK);

        add(answer);
        q.answerArea.add(this, index-1);
    }
}

public class Main
{

    public static Properties config;
    public static Locale currentLocale;
    public static ResourceBundle lang;

    public static JFrame mWindow;

    public static JMenuBar menu;
    public static JMenu menuFile, menuEdit;
    public static JMenuItem itmNew, itmClose, itmLoad, itmSave, itmSaveAs, itmExit, itmCut, itmCopy, itmPaste, itmProperties; 

    public static JDialog newDoc;
    public static JLabel newDocText1, newDocText2;
    public static JRadioButton questions, list;
    public static ButtonGroup newDocButtons;
    public static JButton newDocOk;
    public static Boolean firstSegment;

    public static JPanel workspace;
    public static JScrollPane scroll;
    public static ArrayList<Page> pages;

    public static void newDocumentForm()
    {
        //new document dialog
        mWindow.setEnabled(false);

        newDoc = new JDialog(mWindow, "newDoc");
        newDoc.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        newDoc.addWindowListener(new WindowListener ()
        {
            public void windowActivated(WindowEvent arg0) {}
            public void windowClosing(WindowEvent arg0)
            {
                mWindow.toFront();

                newDocText1 = null;
                newDocText2 = null;
                questions = null;
                list = null;
                newDocButtons = null;
                newDocOk = null;
                newDoc.dispose();

                mWindow.setEnabled(true);               
            }

            public void windowClosed(WindowEvent arg0) {}
            public void windowDeactivated(WindowEvent arg0) {}
            public void windowDeiconified(WindowEvent arg0) {}
            public void windowIconified(WindowEvent arg0) {}
            public void windowOpened(WindowEvent arg0) {}   
        });

        newDoc.setSize(400, 200);
        newDoc.setLocationRelativeTo(null);
        newDoc.setResizable(false);
        newDoc.setLayout(null);
        newDoc.setVisible(true);

        newDocText1 = new JLabel("newDocText1");
        newDocText1.setBounds(5, 0, 400, 20);

        newDocText2 = new JLabel("newDocText2");
        newDocText2.setBounds(5, 20, 400, 20);

        newDoc.add(newDocText1);
        newDoc.add(newDocText2);

        firstSegment = true;

        questions = new JRadioButton("questions");
        questions.setSelected(true);
        questions.setFocusPainted(false);
        questions.setBounds(10, 60, 400, 20);
        questions.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                firstSegment = true;
            }
        });

        list = new JRadioButton("list");
        list.setFocusPainted(false);
        list.setBounds(10, 80, 400, 20);
        list.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                firstSegment = false;
            }
        });

        newDoc.add(questions);
        newDoc.add(list);

        newDocButtons = new ButtonGroup();
        newDocButtons.add(questions);
        newDocButtons.add(list);

        newDocOk = new JButton("ok");
        newDocOk.addKeyListener(new KeyListener()
        {
            public void keyPressed(KeyEvent e)
            {
                if (e.getKeyCode() == KeyEvent.VK_ENTER)
                {
                    newDocOk.doClick();
                }
            }

            public void keyReleased(KeyEvent e) {}
            public void keyTyped(KeyEvent e) {}
        });

        newDocOk.setFocusPainted(false);
        newDocOk.setBounds(160, 120, 80, 40);
        newDocOk.setMnemonic(KeyEvent.VK_ACCEPT);
        newDocOk.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                createNewDocument();
            }
        });

        newDoc.add(newDocOk);
        newDocOk.requestFocus();
    }

    public static void createNewDocument()
    {
        //dispose of new document dialog
        mWindow.toFront();

        newDocText1 = null;
        newDocText2 = null;
        questions = null;
        list = null;
        newDocButtons = null;
        newDocOk = null;
        newDoc.dispose();

        mWindow.setEnabled(true);

        //create document display               
        workspace = new JPanel();
        workspace.setLayout(new BoxLayout(workspace, BoxLayout.PAGE_AXIS));
        workspace.add(new Box.Filler(new Dimension(0, 40), new Dimension(0, 40), new Dimension(0, 40)));
        workspace.setBackground(Color.BLACK);

        scroll = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        scroll.getVerticalScrollBar().setUnitIncrement(20);
        scroll.setViewportView(workspace);

        pages = new ArrayList<Page>();

        Page p = new Page(workspace, 1);

        new Heading(true, p);

        Question q = new Question(p, 1, 1);

        new Answer(q, 1);

        mWindow.add(scroll, BorderLayout.CENTER);
        mWindow.repaint();
        mWindow.validate();

    }

    public static void main(String[] args) throws FileNotFoundException, IOException
    {   
        //create main window
        mWindow = new JFrame("title");
        mWindow.setSize(1000, 800);
        mWindow.setMinimumSize(new Dimension(1000, 800));
        mWindow.setLocationRelativeTo(null);
        mWindow.setLayout(new BorderLayout());
        mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        mWindow.setVisible(true);

        //create menu bar
        menu = new JMenuBar();

        menuFile = new JMenu("file");
        menuEdit = new JMenu("edit");

        itmNew = new JMenuItem("new");
        itmNew.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.CTRL_MASK));
        itmNew.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                newDocumentForm();
            }
        });

        itmClose = new JMenuItem("close");
        itmClose.setActionCommand("Close");
        itmClose.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W, ActionEvent.CTRL_MASK));

        itmLoad = new JMenuItem("load");
        itmLoad.setActionCommand("Load");
        itmLoad.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, ActionEvent.CTRL_MASK));

        itmSave = new JMenuItem("save");
        itmSave.setActionCommand("Save");
        itmSave.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, ActionEvent.CTRL_MASK));

        itmSaveAs = new JMenuItem("saveAs");
        itmSaveAs.setActionCommand("SaveAs");
        itmExit = new JMenuItem("exit");
        itmExit.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                //Add confirmation window!
                System.exit(0);
            }
        });

        itmCut = new JMenuItem("cut");
        itmCut.setActionCommand("Cut");
        itmCut.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_X, ActionEvent.CTRL_MASK));

        itmCopy = new JMenuItem("copy");
        itmCopy.setActionCommand("Copy");
        itmCopy.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, ActionEvent.CTRL_MASK));

        itmPaste = new JMenuItem("paste");
        itmPaste.setActionCommand("Paste");
        itmPaste.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_V, ActionEvent.CTRL_MASK));

        itmProperties = new JMenuItem("properties");
        itmProperties.setActionCommand("properties");
        itmProperties.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_P, ActionEvent.CTRL_MASK));

        menuFile.add(itmNew);
        menuFile.add(itmClose);
        menuFile.addSeparator();
        menuFile.add(itmLoad);
        menuFile.addSeparator();
        menuFile.add(itmSave);
        menuFile.add(itmSaveAs);
        menuFile.addSeparator();
        menuFile.add(itmExit);

        menuEdit.add(itmCut);
        menuEdit.add(itmCopy);
        menuEdit.add(itmPaste);
        menuEdit.addSeparator();
        menuEdit.add(itmProperties);

        menu.add(menuFile);
        menu.add(menuEdit);

        //create actionListener for menus

        mWindow.add(menu, BorderLayout.NORTH);

        mWindow.repaint();
        mWindow.validate();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:54:16.427

你为什么不分配`String`到`DocumentFilter`

```
str = str.replaceAll()? 
```

# eclipse - Eclipse 抛出的负数组大小异常

> ID：12179284
> 
> 赞同：1
> 
> 时间：2012-08-29T13:38:11.100
> 
> 标签：eclipse

最近我的 eclipse 副本不再存在，虽然我想不出我可能做了什么导致这种情况，但我一定做了一些事情，但基本上对于任何工作空间，我尝试在我的日志文件中打开以下显示：

```
eclipse.buildId=M20120208-0800
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.ui 4 0 2012-08-29 09:30:43.361
!MESSAGE Unhandled event loop exception
!STACK 0
java.lang.NegativeArraySizeException
    at org.eclipse.core.internal.registry.TableReader.readArray(TableReader.java:360)
    at org.eclipse.core.internal.registry.TableReader.basicLoadExtensionPoint(TableReader.java:351)
    at org.eclipse.core.internal.registry.TableReader.loadExtensionPoint(TableReader.java:339)
    at org.eclipse.core.internal.registry.TableReader.loadExtensionPointTree(TableReader.java:309)
    at org.eclipse.core.internal.registry.RegistryObjectManager.load(RegistryObjectManager.java:421)
    at org.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject(RegistryObjectManager.java:270)
    at org.eclipse.core.internal.registry.RegistryObjectManager.getObject(RegistryObjectManager.java:262)
    at org.eclipse.core.internal.registry.BaseExtensionPointHandle.getExtensionPoint(BaseExtensionPointHandle.java:106)
    at org.eclipse.core.internal.registry.BaseExtensionPointHandle.getExtensions(BaseExtensionPointHandle.java:32)
    at org.eclipse.ui.internal.activities.ws.TriggerPointManager.<init>(TriggerPointManager.java:87)
    at org.eclipse.ui.internal.activities.ws.WorkbenchActivitySupport.<init>(WorkbenchActivitySupport.java:80)
    at org.eclipse.ui.internal.Workbench.init(Workbench.java:1523)
    at org.eclipse.ui.internal.Workbench.access$36(Workbench.java:1486)
    at org.eclipse.ui.internal.Workbench$66.run(Workbench.java:2597) 
```

我尝试查找此错误，并在 eclipse 错误论坛中发现了一些对负数组大小异常的引用，但似乎没有与此相关的内容。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:37:45.103

尝试运行`eclipse -clean`以清理您的配置区域。也许有些东西被破坏了。这可能会解决您的问题。

# ruby-on-rails-3 - 在包含字符冒号“：”的 rvm gemset 名称中使用 Gem 安装 rails 失败

> ID：12179288
> 
> 赞同：0
> 
> 时间：2012-08-29T13:38:23.477
> 
> 标签：ruby-on-rails-3, rvm

我创建了一个包含冒号的 rvm gemset 名称，比如说`project:marklar`，然后我`gem install rails`在该 gemset 中进行操作。一切顺利，直到它到达 json gem 并抛出此错误：

```
Fetching: json-1.7.5.gem (100%)
Building native extensions.  This could take a while...
/Users/hendrauzia/.rvm/rubies/ruby-1.9.3p0/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb:48: warning: Insecure world writable dir /usr/local/mysql/bin in PATH, mode 040777
ERROR:  Error installing rails:
  ERROR: Failed to build gem native extension.

  /Users/hendrauzia/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb
creating Makefile

make
Makefile:158: *** target pattern contains no `%'.  Stop. 
```

我以为是 ruby​​ 版本导致了问题，但是当我更改为 时`1.9.2`，它仍然抛出相同的错误。

我使用了 mac osx 10.8 山狮，令人惊讶的是，当我删除 gemset 名称中的冒号时，假设我们将其更改为`marklar`，一切顺利。有人注意到这种行为吗？这种行为是预期的还是 rvm 或 json gem 中的错误，还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:17:51.943

我已经比较了在`1.9.3`和中定义的 Makefile `1.9.3@some:colon`- 除了路径之外没有区别：

```
127,128c127,128
< RUBYLIBDIR = /home/mpapis/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib$(target_prefix)
< RUBYARCHDIR = /home/mpapis/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib$(target_prefix)
---
> RUBYLIBDIR = /home/mpapis/.rvm/gems/ruby-1.9.3-p194@some:colon/gems/json-1.7.5/lib$(target_prefix)
> RUBYARCHDIR = /home/mpapis/.rvm/gems/ruby-1.9.3-p194@some:colon/gems/json-1.7.5/lib$(target_prefix) 
```

进一步检查后，我发现文件名中不允许使用空格和冒号：[在 Makefile 中的文件名中转义冒号](https://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile)=> [http://www.mail-archive.com/bug-make@gnu.org/msg03318.html](http://www.mail-archive.com/bug-make@gnu.org/msg03318.html)

# php - 用php锁定mysql表

> ID：12179290
> 
> 赞同：7
> 
> 时间：2012-08-29T13:38:42.767
> 
> 标签：php, mysql, locking

脚本 1。

```
$query_ = "lock tables test1 as test11 write";
mysql_query($query);
$query_ = "select * from test11";
sleep(20);
$query_ = "unlock tables";
mysql_query($query_); 
```

脚本 2。

```
$query_ = "select * from test1";
$result = mysql_query($query_); 
```

问题是，如果我在运行第一个脚本时运行第二个脚本。表**未**锁定。我可以从中读取任何数据。

我需要将其锁定并返回错误。

如何使这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:45:31.883

如果您不希望其他人访问该表，请使用

```
LOCK TABLES test1 WRITE; 
```

其他脚本不会返回错误，而是会等到锁被释放。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T13:43:15.720

您正在`read`锁定表`$query_ = "lock tables test1 as test11 read";`- 这意味着其他查询仍然可以毫无问题地读取它（相关[链接](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)- 向下滚动到锁定类型部分）：

关于`read`锁类型的信息：

*   持有锁的会话可以读取表（但不能写入）。
*   多个会话可以同时获取表的读取锁。
*   其他会话无需显式获取 READ 锁即可读取该表。

如果你想停止*其他任何*事情，比如 reding 表，你需要使用`write`锁，如下所示：

```
$query_ = "lock tables test1 as test11 write"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-30T08:36:07.660

您必须将锁定表的权限授予 db 用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-09T16:33:41.763

您对锁的作用有误解。锁不会阻止其他脚本访问数据，而是会影响其他脚本访问数据的时间。当脚本 2 尝试访问或修改由于锁定而不允许访问的数据时，它将暂停并等待锁定被释放。脚本 1 解锁表后，脚本 2 将继续并完成，没有任何问题。

# c# - X509Store.Add/Remove OS 同步

> ID：12179291
> 
> 赞同：1
> 
> 时间：2012-08-29T13:38:49.980
> 
> 标签：c#, windows, cryptography, certificate, x509certificate

我正在尝试将证书添加到当前用户证书存储中，并在它从其他应用程序中读取后立即添加。所以，我正在做的是

```
var cert = new X509Certificate2(...//binary certificate here){
  PrivateKey = myPrivateKey
};

var store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
store.Open(OpenFlags.MaxAllowed);
store.Add(new X509Certificate2(cert.Export(X509ContentType.Pfx), string.Empty, X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.UserKeySet));
store.Close();
store = null;

cert.Reset();
cert = null; 
```

完成此操作后，应用程序仍在运行并执行其他操作，但并不总是可以在存储中找到此证书。但是，如果我们等待 1/2 分钟，我们肯定会找到此证书！

怎么了？是不是 X509Store.Add 不是同步操作，也许在关闭和处理之后，Windows 仍然在做一些事情来完成导入过程？

# xml - XSLT/XML 日期在 Firefox 中的格式不正确（在单词之间显示）

> ID：12179292
> 
> 赞同：0
> 
> 时间：2012-08-29T13:38:49.803
> 
> 标签：xml, firefox, xslt, format, date-formatting

我正在使用编辑 XSLT 模板，这些模板将用于在博彩办公室显示价格/赔率。XML 文件包含我需要在 html 中显示的日期。这完全按照 Internet Explorer 中的预期显示，但是当我在 Firefox 中打开 XML 文件时，`&nbsp;`会显示文字实体引用而不是不间断空格。

[火狐（上）/ IE（下）](http://i.imgur.com/T6i3s.png)

```
<competition status="O" id="1" name="STEVENAGE v TORQUAY" shortname="STEVENAG-TORQUAY" description="STEVENAGE v TORQUAY" startdatetime="2011-05-25T00:00" enddatetime="2011-05-25T00:00" venue="" leaguename="" country=""> 
```

它在屏幕上显示 startdatetime 属性。有没有人遇到过这个问题/理解为什么它显示`&nbsp;`而不是空格？任何帮助将不胜感激。

**这是包含时间 DIV 的代码 (XSLT)**

```
<xsl:if test="$displayTimeTitle=1">
          <div class="TIME editable" id="timeHeader">
            <div class="TIMETEXT">
              <xsl:call-template name="wysiwyg:doAttributes">
                <xsl:with-param name="WYSIWYG" select="$WYSIWYG" />
                <xsl:with-param name="pItem" select="//competition[1]/@startdatetime" />
              </xsl:call-template>
              <xsl:choose>
                <xsl:when test="//competition[1]/edited[@name='startdatetime']">
                  <xsl:value-of select="//competition[1]/@startdatetime"/>
                </xsl:when>
                <xsl:otherwise>
                  <xsl:if test="//competition[1]/@startdatetime !=''">
                    <xsl:call-template name="doMM_Date">
                      <xsl:with-param name="Date">
                        <xsl:call-template name="Time_Add">
                          <xsl:with-param name="Date" select="//competition[1]/@startdatetime"/>
                          <xsl:with-param name="AddMinutes" select="$timeadjustment"/>
                        </xsl:call-template>
                      </xsl:with-param>
                      <xsl:with-param name="languagecode" select="E"/>
                    </xsl:call-template>
                  </xsl:if>
                  <xsl:if test="$displayHeaderAMPM=1">
                    <nobr>
                      <xsl:value-of select="$headerAMPM"/>
                    </nobr>
                  </xsl:if>
                </xsl:otherwise>
              </xsl:choose>
            </div>
          </div>
        </xsl:if> 
```

**这是外部样式表 Date_Time_Templates.xsl ，其中包含像 doMM_Date 这样的模板，如上所示**

```
<?xml version="1.0"?>
<!-- (C) Copyright 2DB Limited 2012\. No part of this document can be reproduced without the express written permission of 2DB Limited. -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
<xsl:template name="Time_Add">
    <xsl:param name="Date"/>
    <xsl:param name="AddMinutes"/>

    <xsl:param name="year">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,1,4)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,7,4)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="month">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,6,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,4,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="day">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,9,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,1,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>

    <xsl:param name="hour" select="substring($Date,12,2)"/>
    <xsl:param name="minute" select="substring($Date,15,2)"/>
    <xsl:variable name="newhour">
        <xsl:choose>
            <xsl:when test="($hour + ($AddMinutes div 60)) &gt; 23">
                <xsl:value-of select="($hour + ($AddMinutes div 60)) - 24"/>
            </xsl:when>
            <xsl:when test="($hour + ($AddMinutes div 60)) &lt; 00">
                <xsl:value-of select="($hour + ($AddMinutes div 60)) + 24"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="($hour + ($AddMinutes div 60))"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="tempday">
        <xsl:choose>
            <xsl:when test="($hour + ($AddMinutes div 60)) &gt; 23">
                <xsl:value-of select="$day + 1"/>
            </xsl:when>
            <xsl:when test="($hour + ($AddMinutes div 60)) &lt; 00">
                <xsl:value-of select="$day - 1"/>

            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$day"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="newday">
        <xsl:choose>
            <xsl:when test="($month='01' or $month='03' or $month='05' or $month='08' or $month='10' or $month='12') and  $tempday &gt; 31">
                <xsl:value-of select="01"/>
            </xsl:when>
            <xsl:when test="($month='04' or $month='06' or $month='09' or $month='11') and  $tempday &gt; 30">
                <xsl:value-of select="01"/>
            </xsl:when>
            <xsl:when test="($month='02') and  $tempday &gt; 28">
                <xsl:value-of select="01"/>
            </xsl:when>
            <xsl:when test="($month='02' or $month='04' or $month='06' or $month='09' or $month='11' or $month='01') and $tempday = 00">
                <xsl:value-of select="31"/>
            </xsl:when>
            <xsl:when test="($month='05' or $month='07' or $month='10' or $month='12') and $tempday = 00">
                <xsl:value-of select="30"/>
            </xsl:when>
            <xsl:when test="($month='03') and $tempday = 00">
                <xsl:value-of select="28"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$tempday"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="tempmonth">
        <xsl:choose>
            <xsl:when test="($newday = 01 or $newday = 1) and $newday != $day and $day != 02">
                <xsl:value-of select="$month + 1"/>
            </xsl:when>
            <xsl:when test="($newday = 31 or $newday = 28 or $newday = 30) and $newday != $day and $day != 02">
                <xsl:value-of select="$month - 1"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$month"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="newmonth">
        <xsl:choose>
            <xsl:when test="$tempmonth &gt; 12">
                <xsl:value-of select="01"/>
            </xsl:when>
            <xsl:when test="$tempmonth = 00">
                <xsl:value-of select="12"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$tempmonth"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="newyear">
        <xsl:choose>
            <xsl:when test="($newmonth = 01 or newmonth = 1) and $newmonth != $month">
                <xsl:value-of select="$year + 1"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$year"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="finalday">
        <xsl:choose>
            <xsl:when test="string-length($newday) = 1">0<xsl:value-of select="$newday"></xsl:value-of></xsl:when>
            <xsl:otherwise><xsl:value-of select="$newday"></xsl:value-of></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:variable name="finalmonth">
        <xsl:choose>
            <xsl:when test="string-length($newmonth) = 1">0<xsl:value-of select="$newmonth"></xsl:value-of></xsl:when>
            <xsl:otherwise><xsl:value-of select="$newmonth"></xsl:value-of></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:variable name="finalhour">
        <xsl:choose>
            <xsl:when test="string-length($newhour) = 1">0<xsl:value-of select="$newhour"></xsl:value-of></xsl:when>
            <xsl:otherwise><xsl:value-of select="$newhour"></xsl:value-of></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:value-of select="$finalday"/>/<xsl:value-of select="$finalmonth"/>/<xsl:value-of select="$newyear"/>/<xsl:value-of select="$finalhour"/>:<xsl:value-of select="$minute"/>

</xsl:template>

<xsl:template name="Time_Add_NoDate">
    <xsl:param name="Date"/>
    <xsl:param name="AddMinutes"/>

    <xsl:param name="hour" select="substring($Date,1,2)"/>
    <xsl:param name="minute" select="substring($Date,4,2)"/>
    <xsl:variable name="newhour">
        <xsl:choose>
            <xsl:when test="($hour + ($AddMinutes div 60)) &gt; 23">
                <xsl:value-of select="($hour + ($AddMinutes div 60)) - 24"/>
            </xsl:when>
            <xsl:when test="($hour + ($AddMinutes div 60)) &lt; 00">
                <xsl:value-of select="($hour + ($AddMinutes div 60)) + 24"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="($hour + ($AddMinutes div 60))"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="finalhour">
        <xsl:choose>
            <xsl:when test="string-length($newhour) = 1">0<xsl:value-of select="$newhour"></xsl:value-of></xsl:when>
            <xsl:otherwise><xsl:value-of select="$newhour"></xsl:value-of></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:call-template name="TwentyFourToTwelveHrClock">
        <xsl:with-param name="Time"><xsl:value-of select="$finalhour"/>:<xsl:value-of select="$minute"/></xsl:with-param>
    </xsl:call-template>

</xsl:template>

<xsl:template name="Date_Day">

    <xsl:param name="Date"/>
    <xsl:param name="year">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,1,4)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,7,4)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="month">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,6,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,4,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="day">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,9,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,1,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>

    <!--<xsl:value-of select="$year"/>-->
    <xsl:variable name="a" select="floor((14 - $month) div 12)"/>
        <xsl:variable name="y" select="$year - $a"/>
        <xsl:variable name="m" select="$month + 12 * $a - 2"/>
    <xsl:variable name="WkDay" select="($day + $y + floor($y div 4) - floor($y div 100) + floor($y div 400) + floor((31 * $m) div 12)) mod 7"/>

     <xsl:choose>
        <xsl:when test="$WkDay = 0">Sunday</xsl:when>
        <xsl:when test="$WkDay = 1">Monday</xsl:when>
        <xsl:when test="$WkDay = 2">Tuesday</xsl:when>
          <xsl:when test="$WkDay = 3">Wednesday</xsl:when>
          <xsl:when test="$WkDay = 4">Thursday</xsl:when>
          <xsl:when test="$WkDay = 5">Friday</xsl:when>
          <xsl:when test="$WkDay = 6">Saturday</xsl:when>
          <xsl:otherwise>error: <xsl:value-of select="$WkDay"/></xsl:otherwise>
    </xsl:choose>

</xsl:template>

  <xsl:template name="Date_Day2">

    <xsl:param name="Date"/>
    <xsl:param name="year">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,1,4)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,7,4)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="month">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,6,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,4,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="day">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,9,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,1,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>

    <xsl:variable name="a" select="floor((14 - $month) div 12)"/>
    <xsl:variable name="y" select="$year - $a"/>
    <xsl:variable name="m" select="$month + 12 * $a - 2"/>
    <xsl:variable name="WkDay" select="($day + $y + floor($y div 4) - floor($y div 100) + floor($y div 400) + floor((31 * $m) div 12)) mod 7"/>

    <xsl:choose>
      <xsl:when test="$WkDay = 0">Sun </xsl:when>
      <xsl:when test="$WkDay = 1">Mon </xsl:when>
      <xsl:when test="$WkDay = 2">Tue </xsl:when>
      <xsl:when test="$WkDay = 3">Wed </xsl:when>
      <xsl:when test="$WkDay = 4">Thu </xsl:when>
      <xsl:when test="$WkDay = 5">Fri </xsl:when>
      <xsl:when test="$WkDay = 6">Sat </xsl:when>
      <xsl:otherwise>
        error: <xsl:value-of select="$WkDay"/>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>

<xsl:template name="doMM_Date">
<xsl:param name="Date"/>

            <xsl:call-template name="Date_Day_MM"><xsl:with-param name="Date" select="$Date"/></xsl:call-template>
            <xsl:text disable-output-escaping="yes">&amp;nbsp;</xsl:text>

            <xsl:value-of select="substring($Date, 1, 2)"/>
            <xsl:call-template name="StNd"><xsl:with-param name="Day" select="substring($Date, 1, 2)"/></xsl:call-template>

            <xsl:text disable-output-escaping="yes">&amp;nbsp;</xsl:text>
            <xsl:call-template name="Date_Month_MM"><xsl:with-param name="Date" select="$Date"/></xsl:call-template> 

            <xsl:text disable-output-escaping="yes">&amp;nbsp;</xsl:text>
            <xsl:call-template name="TwentyFourToTwelveHrClock">
                <xsl:with-param name="Time"><xsl:value-of select="substring($Date, 12, 5)"/></xsl:with-param>
            </xsl:call-template>

</xsl:template>         

<xsl:template name="Date_Day_MM">
    <xsl:param name="Date"/>

    <xsl:param name="year">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,1,4)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,7,4)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="month">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,6,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,4,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>
    <xsl:param name="day">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,9,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,1,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>

    <xsl:variable name="a" select="floor((14 - $month) div 12)"/>
        <xsl:variable name="y" select="$year - $a"/>
        <xsl:variable name="m" select="$month + 12 * $a - 2"/>
    <xsl:variable name="WkDay" select="($day + $y + floor($y div 4) - floor($y div 100) + floor($y div 400) + floor((31 * $m) div 12)) mod 7"/>

     <xsl:choose>
        <xsl:when test="$WkDay = 0">Sunday</xsl:when>
        <xsl:when test="$WkDay = 1">Monday</xsl:when>
        <xsl:when test="$WkDay = 2">Tuesday</xsl:when>
          <xsl:when test="$WkDay = 3">Wednesday</xsl:when>
          <xsl:when test="$WkDay = 4">Thursday</xsl:when>
          <xsl:when test="$WkDay = 5">Friday</xsl:when>
          <xsl:when test="$WkDay = 6">Saturday</xsl:when>
          <xsl:otherwise></xsl:otherwise>
    </xsl:choose>

</xsl:template>

<xsl:template name="Date_Month_MM">

    <xsl:param name="Date"/>
    <xsl:param name="month">
        <xsl:choose>
            <xsl:when test="contains($Date,'-')">
                <xsl:value-of select="substring($Date,6,2)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($Date,4,2)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:param>

     <xsl:choose>
        <xsl:when test="$month = 1 or $month = 01">January</xsl:when>
        <xsl:when test="$month = 2 or $month = 02">February</xsl:when>
        <xsl:when test="$month = 3 or $month = 03">March</xsl:when>
        <xsl:when test="$month = 4 or $month = 04">April</xsl:when>
        <xsl:when test="$month = 5 or $month = 05">May</xsl:when>
        <xsl:when test="$month = 6 or $month = 06">June</xsl:when>
        <xsl:when test="$month = 7 or $month = 07">July</xsl:when>
        <xsl:when test="$month = 8 or $month = 08">August</xsl:when>
        <xsl:when test="$month = 9 or $month = 09">September</xsl:when>
        <xsl:when test="$month = 10">October</xsl:when>
        <xsl:when test="$month = 11">November</xsl:when>
        <xsl:when test="$month = 12">December</xsl:when>
        <xsl:otherwise></xsl:otherwise>
    </xsl:choose>

</xsl:template>

<xsl:template name="Sh_Month">

    <xsl:param name="Month"/>
    <xsl:choose>
        <xsl:when test="$Month = 01">January</xsl:when>
        <xsl:when test="$Month = 02">February</xsl:when>
        <xsl:when test="$Month = 03">March</xsl:when>
        <xsl:when test="$Month = 04">April</xsl:when>
        <xsl:when test="$Month = 05">May</xsl:when>
        <xsl:when test="$Month = 06">June</xsl:when>
        <xsl:when test="$Month = 07">July</xsl:when>
        <xsl:when test="$Month = 08">August</xsl:when>
        <xsl:when test="$Month = 09">September</xsl:when>
        <xsl:when test="$Month = 10">October</xsl:when>
        <xsl:when test="$Month = 11">November</xsl:when>
        <xsl:when test="$Month = 12">December</xsl:when>
        <xsl:otherwise>error: <xsl:value-of select="$Month"/></xsl:otherwise>

    </xsl:choose>

</xsl:template>

<xsl:template name="StNd">
    <xsl:param name="Day"/>
        <xsl:if test="$Day != ''">
        <xsl:choose>
            <xsl:when test="$Day = 01">st</xsl:when>
            <xsl:when test="$Day = 02">nd</xsl:when>
            <xsl:when test="$Day = 03">rd</xsl:when>
            <xsl:when test="$Day = 21">st</xsl:when>
            <xsl:when test="$Day = 22">nd</xsl:when>
            <xsl:when test="$Day = 23">rd</xsl:when>
            <xsl:when test="$Day = 31">st</xsl:when>
            <xsl:otherwise>th</xsl:otherwise>
        </xsl:choose>
        </xsl:if>
</xsl:template>

<!--
    This Template Converts a time to 12 hour clock from 24 in the format HH:MM.
    Use the xsl:call-template name="TwentyFourToTwelveHrClock"><xsl:with-param name="Time" select="HH:MM"/>" 
 -->

<xsl:template name="TwentyFourToTwelveHrClock">
    <xsl:param name="Time"/>
    <xsl:choose>
        <xsl:when test="substring($Time,1,2) &gt; 12">
            <xsl:value-of select="substring($Time,1,2) - 12" />
            <xsl:value-of select="substring($Time,3,3)" />
        </xsl:when>
        <xsl:otherwise> <!-- nothing to do as am, output as normal -->
            <xsl:value-of select="substring($Time,1,5)"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:14:23.097

至少在某些版本的 FF 中，带有 DOE 的 xsl:text 不起作用。这是[FF 中的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=98168)。您的样式表正在广泛使用 xsl:text+DOE 。我建议重新设计样式表，使其不使用任何 DOE。这应该是一个微不足道的练习。

### 边注

在所有浏览器中，FF 对 XSLT 的支持最差。考虑到 FF 多年来在推动浏览器边界方面发挥的主导作用，这真是一场悲剧。即使是垃圾恶意软件 MS Internet Exploder，也比 FF 具有更好的 XSLT 支持。哦——耻辱！

# sql - 逗号分隔的 SQL Server 结果集“已加入”与其他列

> ID：12179295
> 
> 赞同：2
> 
> 时间：2012-08-29T13:38:53.160
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有一张桌子说`ProjectMaster`：

```
 Id       ProjectName
  1         A
  2         B
  3         C 
```

另一张桌子`ProjectMeter`

```
 Id   ProjectId   MeterNumber
 1      1          #0001
 2      1          #0002
 3      1          #0003 
 4      2          #0004
 5      2          #0005 
 6      3          #0006 
```

我希望有以下输出

```
ProjectName   MeterNumbers 
 A             #0001, #0002, #0003
 B             #0004, #0005
 C             #0006 
```

我试过[这个](https://stackoverflow.com/questions/4819412/convert-sql-server-result-set-into-string)和[这个](https://stackoverflow.com/questions/8302337/sql-server-sub-query-with-a-comma-separated-resultset)，但无法解决我的问题。我不能使用表变量。

我已经编写了一个存储过程，它从许多`joined`表中获取数据。ProjectMaster 也恰好加入了这些表之一。现在需要从 ProjectMeter 获取数据，这样，每一行都连接了对应于该列中 ProjectId 的 ProjectMeter.MeterNumber。

现在，我得到所有行中所有仪表编号的串联列表。

```
I cannot use CURSOR, TABLE variable , Temp TABLE 
```

（我希望仍然可以为我的事业做点什么）

请帮忙.....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:57:44.110

尝试这个：

```
SELECT projectname, STUFF((SELECT distinct ', ' + meternumber 
              from projectmeter m
              where p.id = m.projectid
            FOR XML PATH(''), TYPE

            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') MeterNumbers
from projectmaster p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/76047/14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:02:56.960

同样在 MS SQL 中，您可以使用[带有 CTE 的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28SQL.105%29.aspx)来做到这一点。

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/f18ea/6)

```
;with t1 as (
 select t.*,
        cast(meternumber as varchar(max)) as m2,
        0 as level
     from ProjectMeter t 
     where not exists 
        (select id 
                from ProjectMeter l 
          where l.id<t.id and l.ProjectId=t.ProjectID 
        )
 union all
 select b.*,
        cast(c.m2+','+b.MeterNumber as varchar(max)) as m2,
        c.level+1 as level
     from ProjectMeter b
         inner join t1 c
             on (c.id < b.id) and (b.ProjectID=c.ProjectId)

)

select pm.ProjectName as ProjectName, 
       t1.m2 as MeterNumbers 
      from t1 
      inner join
        (select ProjectId,max(level) ml 
              from t1 
          group by ProjectId
        ) t2  
            on (t1.ProjectId=t2.ProjectID) and (t1.level=t2.ml)
       left join ProjectMaster pm 
           on (t1.ProjectId=pm.Id)
order by t1.ProjectID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:58:17.343

```
DECLARE @ProjectMaster AS TABLE
    (
      ID INT IDENTITY(1, 1) ,
      ProjectName VARCHAR(2)
    )
DECLARE @ProjectMeter AS TABLE
    (
      ID INT IDENTITY(1, 1) ,
      ProjectID INT ,
      MeterNumber VARCHAR(50)
    )

INSERT  INTO @ProjectMaster
        ( ProjectName )
VALUES  ( 'A' )

INSERT  INTO @ProjectMeter
        ( ProjectID, MeterNumber )
VALUES  ( 1, '#0001' )
INSERT  INTO @ProjectMeter
        ( ProjectID, MeterNumber )
VALUES  ( 1, '#0002' )

SELECT pMaster.ID, STUFF(( SELECT  ',' + MeterNumber
                FROM    @ProjectMeter
              FOR
                XML PATH('')
              ), 1, 1, '') AS 'Concat Result'
FROM    @ProjectMeter pMeter
        INNER JOIN @ProjectMaster pMaster ON pMaster.ID = pMeter.ProjectID
GROUP BY pMaster.ID 
```

我在这里使用了表变量，但是您肯定只需要删除@，因为我使用了与您指定的相同的表名吗？不确定这是否可以？:)

# java - 带有纹理的 VBO，没有弃用的功能

> ID：12179302
> 
> 赞同：3
> 
> 时间：2012-08-29T13:39:08.390
> 
> 标签：java, opengl, lwjgl, vbo

我正在尝试使用 VBO、VAO、IBO 和着色器编写一个基本的四渲染器。我试图主要只使用一个 VBO、VAO、IBO 并在添加/删除元素时重新缓冲数据。大多数情况下一切都很好，直到我决定实现纹理，而不是颜色分级。

无论我尝试什么，它都不会绘制任何内容，因为我想避免使用诸如 ClientStates 之类的不推荐使用的函数，并且可能使用着色器中的纹理。

除了没有绘制任何内容的问题之外，我的问题是纹理保存在 BRectangle 类中，现在我不知道如何在使用 DrawElements 时访问它们。

我可以重复使用我的 IBO，这样我就不必添加额外的索引了吗？

我目前的做法：

渲染器，您可以添加一个 Rectangle atm，它将缓冲所需的数据。

```
 public class ShaderRenderer {

    public static final int POSITION_INDEX = 0; // index of vertex attribute "in_Position"
    public static final int TEXTURE_INDEX = 1; // index of vertex attribute "in_Texture"

    public static final int FLOAT_NUM_BYTES; // sizeof(float) in bytes
    public static final int INT_NUM_BYTES; // sizeof(int) in bytes
    public static final int VEC4_BYTES; // sizeof(vec4) in bytes

    static {
        FLOAT_NUM_BYTES = Float.SIZE / Byte.SIZE;
        INT_NUM_BYTES = Integer.SIZE / Byte.SIZE;
        VEC4_BYTES = 4 * FLOAT_NUM_BYTES;
    }

    private VAO vao = new VAO();
    private VBO vbo = new VBO();
    private IBO ibo = new IBO();

    private int elements = 0;

    public ShaderRenderer() {
        try {
            ShaderUtilities.compileShader("shaders/screen.vert", "shaders/screen.frag", POSITION_INDEX, TEXTURE_INDEX);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void add( BRectangle rect ) {

        // Bind the VAO
        // This OpenGL-object groups the "in_Position" and "in_Color"
        // vertex attributes.
        vao.bind();

        // Bind the VBO and add the FloatBuffer from the Rect
        vbo.bind();
        vbo.addBuffer(rect.vertexData);

        ibo.bind();
        ibo.addIndices(generateIndices());
        ibo.buffer();

        //==============================================================       
        // Now we tell OpenGL that we will use POSITION_INDEX and COLOR_INDEX
        // to communicate respectively the vertex positions and vertex colors
        // to our shaders.
        {
            // First we enable the indices. This will affect the vertex
            // array object from above.
            glEnableVertexAttribArray(POSITION_INDEX);
            Util.checkGLError();

            // Then we tell OpenGL how it should read the GL_ARRAY_BUFFER
            // (to which we have bound our vertex data, see above).

            // The position data starts at the beginning of the vertex data
            glVertexAttribPointer(POSITION_INDEX, 4, GL_FLOAT, false,
                    2 * VEC4_BYTES, 0);
            Util.checkGLError();

            // The color data starts after the first 4 floats of position data
            glVertexAttribPointer(TEXTURE_INDEX, 2, GL_FLOAT, false,
                    0, VEC4_BYTES);
            Util.checkGLError();
        }

        vbo.bufferData();

        // Just to be VERY clean, we will unbind the vertex attribute object
        // and only bind it when we render. This way we cannot accidentally modify
        // it anymore.
        vao.unbind();

        // Only after the vertex array is disabled, we unbind the buffers
        // to the GL_ARRAY_BUFFER and GL_ELEMENT_ARRAY_BUFFER targets, because
        // otherwise the vertex array object would become invalid again.
        vbo.unbind();

        ibo.unbind();
    }

    void DestroyVBO() {

        glDisableVertexAttribArray(POSITION_INDEX);
        Util.checkGLError();

        glDisableVertexAttribArray(TEXTURE_INDEX);
        Util.checkGLError();

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        Util.checkGLError();

        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        Util.checkGLError();

        glDeleteBuffers(ibo.id);
        Util.checkGLError();

        glDeleteBuffers(vbo.id);
        Util.checkGLError();

        glBindVertexArray(0);
        Util.checkGLError();

        glDeleteVertexArrays(vao.id);
        Util.checkGLError();
    }

    private int[] generateIndices() {
        int c = elements * 3;
        int v[] = { c, c+1, c+2,
                    c, c+3, c+2};
        elements++;
        return v;
    }

    public void render () {
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        Util.checkGLError();

        vao.bind();
        glDrawElements(
                GL_TRIANGLES,
                ibo.size,
                GL_UNSIGNED_INT,
                0);
        Util.checkGLError();

        vao.unbind();
    }

} 
```

我的基本矩形类

```
public class BRectangle  {
    final int amountOfVertices = 8;
    final int vertexSize = 3;
    final int textureSize = 2;

    public FloatBuffer vertexData;

    Texture texture;

    public BRectangle(float x, float y ) {
        float[] VerticesArray = new float[]{
                -0.5f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f,
                -0.1f, 0.0f, 0.0f, 1.0f, 1.0f, 0.0f,
                -0.1f, 0.4f, 0.0f, 1.0f, 1.0f, 1.0f,
                -0.5f, 0.4f, 0.0f, 1.0f, 0.0f, 1.0f
            };
        vertexData = BufferUtils.createFloatBuffer(24);
        vertexData.put(VerticesArray);

        try {
            texture = Textures.loadTexture("data/floor.jpg");
        } catch (IOException e) {
            e.printStackTrace();
        }
        glBindTexture(GL_TEXTURE_2D, texture.getTextureID());

    }

} 
```

使用 main[] 进行的测试

```
public class ShaderTest {

    ShaderRenderer sr;

    FpsCounter c;

    public ShaderTest() {
    }

    public void create() throws LWJGLException, Exception {

        new SimpleDisplay(800, 600, "test", false, false);
        glOrtho(0, 800, 0, 600, 1, -1);
        //Keyboard
        Keyboard.create();

        c = new FpsCounter();

        Textures.setUpTextureLoader();

        //Mouse
        Mouse.setGrabbed(false);
        Mouse.create();

        sr = new ShaderRenderer();
        //OpenGL
        initGL();

    }

    public void destroy() {
        Mouse.destroy();
        Keyboard.destroy();
        Display.destroy();
    }

    public void initGL() throws IOException {

        ShaderUtilities.compileShader("shaders/screen.vert", "shaders/screen.frag", ShaderRenderer.POSITION_INDEX, ShaderRenderer.TEXTURE_INDEX);
        sr.add(new BRectangle(0f, 0f));
    }

    public void processKeyboard() {
    }

    public void processMouse() {
    }

    public void render() throws LWJGLException {
        sr.render();
    }

    public void run() throws LWJGLException {
        while (!Display.isCloseRequested() && !Keyboard.isKeyDown(Keyboard.KEY_ESCAPE)) {
            if (Display.isVisible()) {
                processKeyboard();
                processMouse();
                update();
                render();
            } else {
                if (Display.isDirty()) {
                    render();
                }
                try {
                    Thread.sleep(100);
                } catch (InterruptedException ex) {
                }
            }

            Display.update();
            //Display.sync(60);
        }
    }

    public void update() {
        c.updateFPS();
    }

    public static void main(String[] args) {
        ShaderTest main = null;
        try {
            main = new ShaderTest();
            main.create();
            main.run();
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            if (main != null) {
                main.destroy();
            }
        }
    }
} 
```

和openglinit

```
public static void initGLSlim() {
    glClearColor(0, 0, 0, 0);
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_LIGHTING);

    glEnable(GL11.GL_TEXTURE_2D);  

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, 800, 600, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

} 
```

顶点着色器

```
#version 140

in vec4 in_Position;
in vec2 in_Texture;
out vec2 out_Texture;

void main(void)
{
   gl_Position = vec4(in_Position.x *0.75 ,in_Position.y, in_Position.z, in_Position.w);
   out_Texture = in_Texture;
} 
```

片段着色器

```
#version 140

in vec2 out_Texture;
uniform sampler2D mytexture;
out vec4 fragColor;

void main(void)
{
   fragColor = texture2D(mytexture, out_Texture);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:47:36.297

您的步幅参数不正确。

这就是你所拥有的：

```
glVertexAttribPointer(POSITION_INDEX, 4, GL_FLOAT, false, 2 * VEC4_BYTES, 0); 
glVertexAttribPointer(TEXTURE_INDEX, 2, GL_FLOAT, false, 0, VEC4_BYTES); 
```

你告诉位置索引它有 8 个浮动步幅，这是不正确的。据我所知，您正在上传 4 个顶点，每个顶点有 6 个浮点数（4x 位置 + 2x 纹理）。这意味着您的 POSITION 步幅应该是`6 * FLOAT_NUM_BYTES`.

您的纹理步幅应该相同，因为它被打包到同一个数组中。在这里，您告诉它 texcoords 紧密包装，但实际上每 6 个浮点数只有一对 texcoords。所以你再次需要`6 * FLOAT_NUM_BYTES`这里。

* * *

> 我可以重复使用我的 IBO，这样我就不必添加额外的索引了吗？

是的，您可以使用 IBO 绘制任意数量的对象，前提是它们都需要相同的索引。

* * *

其他不太严重的评论：

*   您不需要在初始化时将颜色清除为零，默认情况下为零。
*   您不需要在初始化时禁用 depth_test/lighting，默认情况下它们是关闭的。
*   使用着色器时不要调用 glEnable(GL_TEXTURE_2D)。这个开关只为固定管线启用纹理，它对着色器程序没有影响。如果您移动到核心配置文件，这将产生错误，因此请摆脱它。

# django - django-registration 的额外上下文

> ID：12179307
> 
> 赞同：0
> 
> 时间：2012-08-29T13:39:17.323
> 
> 标签：django, django-registration

我正在使用 django-registration 但我有问题。我想获取用户的登录状态并将其传递给我项目中的所有 html 页面。我通常只是像这样在我的views.py中声明它

`logged_in =request.user.is_authenticated() # get login status`

然后将其作为上下文传递给相应的 html。现在正在使用 django-registration，我需要传递`logged_in`给 django-registration 呈现的所有 html，但不知道该怎么做。我试图不修改 django-registration 代码。我有一种感觉，我需要 context_processors，但我不知道我在这里真正需要做什么。请帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:38:31.547

通过添加`django.core.context_processors.request`到您的`TEMPLATE_CONTEXT_PROCESSORS`（默认情况下），您应该`request`在模板上有一个实例。**然后**，您可以通过键入以下内容访问模板上的用户（可能是经过身份验证`User`的或`AnonymousUser`, never ）：`None`

```
{% if request.user.is_authenticated %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:19:35.097

我正在使用 django 1.4，显然`request`不是默认上下文。或者因为默认情况下我无法访问`request`所以我将它添加到我的`settings.py`并且它对我有用

```
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.contrib.messages.context_processors.messages",
"django.core.context_processors.request",) 
```

当然，在我的情况下，我只需要，`"django.core.context_processors.request"`但由于我覆盖了`default context processors`，我需要在我的设置中手动添加它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:53:04.020

请求对象本身可以在 html 页面上访问

最好在 base.html 文件中使用它来访问所有页面，例如

```
 {% if request.user.is_authenticated %} 
```

# jquery - 使用 IP 的 getJSON 不起作用

> ID：12179312
> 
> 赞同：6
> 
> 时间：2012-08-29T13:39:28.250
> 
> 标签：jquery, ajax, playframework, getjson

我的问题是：

当我使用以下代码调用 json

```
var url="http://localhost:9000/json";
$.getJSON(url,
 function(data){
    alert(data['yay']);
    }); 
```

它工作得很好，但是，我的 localhost IP 是 10.0.0.145，当我用 IP 地址替换 localhost 时，它不再工作

```
var url="http://10.0.0.145:9000/json";
$.getJSON(url,
 function(data){
    alert(data['yay']);
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:41:49.433

您违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。如果您控制目标站点，则应考虑使用[JSONP](http://remysharp.com/2007/10/08/what-is-jsonp/)调用样式或在您的站点和 AJAX 调用中启用[跨域](http://api.jquery.com/jQuery.ajax/)选项 ( )。`crossDomain`

默认情况下，如果您违反相同来源，您的浏览器不会拨打电话。通过使用 Fiddler、FireBug 或 Chrome 工具查看 HTTP 流量，您就会知道这一点。你甚至不会看到你的请求被执行。如果是这种情况，请采用上述方法之一。

我希望这有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:40:46.963

原因只是跨域保护：只有在服务器提供特定标头的情况下，才能从另一个域（显然）对 json 进行 ajax 查询。

我建议您阅读[这份完整的参考资料](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，因为现在这是编写基于 ajax 的应用程序的基本知识。

两者使用相同的名称。

# tcl - tcl 中棘手的 var 验证

> ID：12179314
> 
> 赞同：2
> 
> 时间：2012-08-29T13:39:46.967
> 
> 标签：tcl

我有一个变量是否存在取决于我的输入，所以我做了一个 if ：

```
if { [info exists $var1] } {
    puts "Here we are, Born to be kings, We're the princes of the universe ..."
} 
```

但是当我启动我的脚本时，我得到了错误日志：

```
can't read "var1": no such variable
while executing
"info exists $var1" 
```

有什么错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:43:26.797

采用`if { [info exists var1] } {...`

变量在调用**之前**`info`被替换，也不例外。所以传递变量的*名称*而不是它的值。

# ios - 混合颜色 ios

> ID：12179319
> 
> 赞同：1
> 
> 时间：2012-08-29T13:40:04.177
> 
> 标签：ios

我想从一张脸上矩形裁剪眼睛并将其粘贴到另一张脸上，以便在生成的图像中眼睛部分的肤色与我们粘贴眼睛的人的面部颜色很好地融合。我可以裁剪和粘贴，但混合有问题。目前，矩形裁剪后的眼睛在粘贴后的边界非常明显。我想减少这种效果，这样眼睛就可以很好地与脸部融合，并且生成的图像不会看起来很假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:15:45.657

我的建议是在代码中进行混合。首先，你需要创建两个位图上下文，这样你就有了你的脸和你的新眼睛。

*   仅在重叠区域中，您需要通过评估两个区域的颜色来确定最外面的“皮肤”区域，并在两个“皮肤”区域中创建这些区域的映射。你会从最外面的区域工作并向中心工作。

*   对于颜色评估，您应该将颜色转换为 HSV（或 HCL）并查看色调和饱和度。

*   你需要找出一些标准来确定什么是皮肤和什么是眼睛

*   一旦你定义了外部区域——不是眼睛，而是皮肤，你就会融合。混合将根据其与眼睛中心的距离（或与定义眼睛的椭圆的距离）使用更多的原始颜色。因此，最初，外部颜色将是 5% 的新颜色，95% 的原始颜色。

*   当您靠近眼睛时，您将使用更多的眼睛覆盖皮肤颜色。

这应该会产生一个非常好的图像。最大的问题当然是获得一个很好的算法来将眼睛与皮肤分开。

# cuda - CUDA：无符号整数缓冲区上的 cuMemsetD32 由于参数在无效范围内而失败

> ID：12179326
> 
> 赞同：0
> 
> 时间：2012-08-29T13:40:33.780
> 
> 标签：cuda, memset

我想重置（设置为 0）一个 unsigned int 类型的缓冲区。我不知道为什么，但对我来说只有 cuMemsetD8 版本有效。这是我的代码：

```
CUdeviceptr pBuffer;
cuMemAlloc(&pBuffer, sizeof(unsigned int) * 1000);
cuMemsetD32(pBuffer, 0, sizeof(unsigned int) * 1000); // fails with invalid argument (range) error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:54:46.083

[cuMemsetD32](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDA__MEM_g983e8d8759acd1b64326317481fbf132.html)的第三个参数是*元素*数，而不是*字节*数。所以应该是：

```
CUdeviceptr pBuffer;
cuMemAlloc(&pBuffer, sizeof(unsigned int) * 1000);
cuMemsetD32(pBuffer, 0, 1000); 
```

# c# - C# winforms函数返回值

> ID：12179327
> 
> 赞同：-3
> 
> 时间：2012-08-29T13:40:39.460
> 
> 标签：c#, xml, winforms, function

我的函数的返回值有一些问题。我想做的是从中获取一个元素值`XML_File`并返回该值，以便我可以在`Form_Load`.

我尝试处理该`XML_Array_Load`功能，但出现以下错误。（`Form_Load`由于其他函数的错误，尚未测试。）

XML_Array_Load 函数错误：

> 错误 1 ​​由于 'Pr​​ogram.Form1.XML_Array_Load(System.Collections.Generic.Dictionary, System.Collections.Generic.Dictionary)' 返回 void，return 关键字后面不能跟对象表达式

C#代码：

```
 static void XML_Array_Load(Dictionary<string, string> Data_Array, Dictionary<string, string> Elements_Array)
    {
        // XML File
        String xmlfile = Data_Array["XML_File"];

        // XML Page Check
        if (File.Exists(xmlfile))
        {
            XmlDocument doc = new XmlDocument();
            // If Page Exist Load XML File
            doc.Load(xmlfile);

            foreach (KeyValuePair<string, string> Element in Elements_Array)
            {
                // Get Element From Dictionary Array
                String Element_Name = Element.Key;
                String Element_Type = Element.Value;

                // Get Element_Name from XMLFile
                String Value = String.Format("XMLFILE/{0}", Element_Name);

                // Get Element_Name Value From XMLFile
                XmlNode Element_Value = doc.SelectSingleNode(Value);

                // Check If Element_Value Is Null Or Not
                if (Element_Value != null)
                {
                    return Element_Value;
                }

            }
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // Start Data Array
        Dictionary<string, string> Data_Array = new Dictionary<string, string>();

        // XML_File path is come here
        Data_Array.Add("XML_File", "../Debug/XMLFiles/Settings.xml");

        // This is the element what i need to get the value from XML_File
        Elements_Array.Add("Active", "");

        // Send Arrays To Function and get function result
        String Return_Value = XML_Array_Insert(Data_Array, Elements_Array);

        // Here will setup textBox4.Text with the value
        textBox4.Text = Return_Value.InnerText;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:42:41.887

您将方法声明为`static void XML_Array_Load()`. `void`意味着它不返回任何值。然后你试图返回一个值。

你不能那样做。如果您希望该方法返回一个值，请将其声明为这样。

```
static XmlNode XML_Array_Load(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:42:32.517

正如错误消息告诉您的那样，该方法的返回类型为 void，这意味着它不返回任何内容。如果您希望它返回某些内容，那么您需要更改`void`为您希望它返回的任何内容。

您的代码还有其他几个问题。您调用该方法的地方似乎期望它返回一个字符串，但在方法本身内它返回一个`XmlNode`. 您需要从两个位置中选择一个返回，并更改这两个位置之一以与该选择保持一致。

你也有你的循环`return`内的语句。`foreach`你只能`return`有一个值，所以你最终要做的是返回集合的第一个非空值。这真的是你想要的吗？这是一件相当不寻常的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:43:13.610

1 用返回类型替换 void

```
static XmlNode  XML_Array_Load(Dictionary<string, string> Data_Array, Dictionary<string, string> Elements_Array) 
```

2 并在函数末尾添加return，以确保所有路径返回值

```
...
return null;
} 
```

结果 ：

```
static XmlNode   XML_Array_Load(Dictionary<string, string> Data_Array, Dictionary<string, string> Elements_Array)
    {
        // XML File
        String xmlfile = Data_Array["XML_File"];

        // XML Page Check
        if (File.Exists(xmlfile))
        {
            XmlDocument doc = new XmlDocument();
            // If Page Exist Load XML File
            doc.Load(xmlfile);

            foreach (KeyValuePair<string, string> Element in Elements_Array)
            {
                // Get Element From Dictionary Array
                String Element_Name = Element.Key;
                String Element_Type = Element.Value;

                // Get Element_Name from XMLFile
                String Value = String.Format("XMLFILE/{0}", Element_Name);

                // Get Element_Name Value From XMLFile
                XmlNode Element_Value = doc.SelectSingleNode(Value);

                // Check If Element_Value Is Null Or Not
                if (Element_Value != null)
                {
                    return Element_Value;
                }

            }
        }

        return null;
    } 
```

# jquery-ui - Jquery 类选择器不起作用

> ID：12179330
> 
> 赞同：1
> 
> 时间：2012-08-29T13:40:52.893
> 
> 标签：jquery-ui, jquery, jquery-mobile, jquery-selectors

我有以下 html 标签。

```
<span class="ui-btn-text">ALFL</span>
<span class="ui-btn-text">AL</span> 
```

我想将 ALFL 替换为

```
<span class="ui-btn-text">A</span> 
```

通过jQuery。

我用过

```
$("span .ui-btn-text").replaceWith("<span class="ui-btn-text">A</span>"); 
```

但它不起作用。请给我一些答案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:41:58.053

您的选择器匹配一个元素，该元素的类`ui-btn-text`的父级为`span`. 你只需要删除空间。

我还注意到您`replaceWith`将元素替换为具有某些内容的自身副本。无需替换元素，只需设置文本：

```
$("span.ui-btn-text").text("A"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:42:30.910

关于什么

`$("span.ui-btn-text").replaceWith("<span class='ui-btn-text'>A</span>");`

或者

```
$("span.ui-btn-text").text("A"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:42:03.070

您的选择器正在寻找一个元素`.ui-btn-next`内部的类的`span`元素，因为您包含了一个多余的空格字符：

```
$("span.ui-btn-text").replaceWith("<span class="ui-btn-text">A</span>"); 
```

应该是你想要的。此外，如果您只需要更改元素的内容（即更改为“A”），请使用`text()`or `html()`：

```
$("span.ui-btn-text").text('A'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:43:42.677

```
$("span.ui-btn-text").replaceWith('<span class="ui-btn-text">A</span>'); 
```

您编写的替换字符串将使 Javascript 引擎崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:52:03.620

如果您只想更改**ALFL** Text ，您可以执行以下操作：

```
var $span= $('span.ui-btn-text');
$span.each(function(){
    if ($(this).text() =='ALFL') {
        $(this).text('A');
    }        
}); 
```

Js小提琴演示：http: [//jsfiddle.net/95CyN/](http://jsfiddle.net/95CyN/)

如果你想用类 ui-btn-text 更改所有 span 的 text/html，请执行以下操作：

```
 // change the text inside the element
 $('span.ui-btn-text').text('A'); 
```

或者

```
 // change the html content inside the element
 $('span.ui-btn-text').html('A'); 
```

或者

```
 // Replace the html element
  $('span.ui-btn-text').replaceWith('<span class="ui-btn-text">A</span>'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T10:05:54.107

```
Try this code friend:-

 $("span.ui-btn-text").each(function () {                   
                if ($(this).html() == "ALFL") {
                    $(this).html("A");
                }
            });
        }); 
```

# sql - SQL如何将数字（整数）转换为日期？

> ID：12179331
> 
> 赞同：-6
> 
> 时间：2012-08-29T13:40:52.570
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在使用小型商业软件并导入到 SQL Server。但是有数字：

```
75739
76910
73105
75821
75245
75605
77169
73265
75611
74073
77012 
```

这代表我认为的日期。

如何将这些数字转换为日期`YYYY-MM-DD`和`YYYYMMDD`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:44:53.297

基于 1900 年 1 月 1 日的 SQL Server 纪元（基准或零日期），这些日期为 22 世纪

```
SELECT DATEADD(day, 75739, 0) -- 2107-05-15 00:00:00.000 
```

还是它们基于日期时间的下限？这是 1960-ish，适用于出生日期

```
SELECT DATEADD(day, 75739, '17530101') -- 1960-05-15 00:00:00.000 
```

tl;博士需要更多信息。否则不要尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:49:53.317

通常，当日期表示为数字时，它们表示自给定日期以来的天数。在某些情况下，您可能有一个像 20120829 这样的数字，它实际上可以解析为 YYYYMMDD。但这些日期似乎不是那种形式。另一种格式可能是 YYday-of-year，因此 100001 将是 2010 年 1 月 1 日。但是，这些日期也不会以该格式显示。

假设这些是自给定日期以来的天数，那么在 SQL Server 中您将使用：

```
select dateadd(day, <val>, <basedate>) 
```

对于 Excel，你会使用类似的东西：

```
select dateadd(day, <val>, '1899-12-31') 
```

然而，这将这些日期置于 22 世纪。

您需要了解有关这些日期格式的更多信息。

# rspec - 以随机顺序执行 RSpec 测试，但以连贯的顺序显示？

> ID：12179335
> 
> 赞同：2
> 
> 时间：2012-08-29T13:41:07.187
> 
> 标签：rspec

有什么办法可以让我的 RSpec 测试以随机顺序运行，但让它们以一致的顺序显示？

# background - ImageMagick 用透明背景扩展画布

> ID：12179342
> 
> 赞同：62
> 
> 时间：2012-08-29T13:41:39.477
> 
> 标签：background, imagemagick, png, transparency

```
convert input.png -extent 100x100 -gravity center -background white output.png 
```

如果输入为 50x50，则周围的背景为白色。我可以以某种方式将其设置为透明而不将输入中的任何颜色声明为透明吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-08-29T21:25:30.017

改用这个：

```
convert               \
      input.png       \
     -background none \
     -gravity center  \
     -extent 100x100  \
      output.png 
```

***注意：***参数的顺序很重要！（为了说服自己，只需将`-background none`参数放在末尾而不是开头...）

* * *

*更新：*感谢@jesmith，他注意到我最初提供的命令行不再按预期工作。较新的版本`convert`还需要在*之前*`-gravity center`调用。（这是对 ImageMagick 的最新版本 [在最初编写此答案时] 引入的更改之一）。 *`-extent 100x100`*

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-31T15:05:24.943

具有讽刺意味的是，Kurt 的注释恰到好处，顺序非常重要。Kurt 的命令导致`gravity`不应用于`extent`，因此透明的“边框”将全部位于图像的底部和/或右侧。

前移将正确地`gravity`在`extent`所有适用的边上创建相同的透明“边界”。

> 转换 input.jpg -background none -gravity Center -extent 100x50 output.png*

# php - jQuery TagIt：自动完成功能不起作用

> ID：12179343
> 
> 赞同：0
> 
> 时间：2012-08-29T13:41:44.583
> 
> 标签：php, javascript, jquery, tags

我正在使用 jquery tagit api，我已经编写了我的代码

```
 $(document).ready(function() {
  $("#mytags").tagit({
    tagSource: function(search, showChoices) {
      $.ajax({
        url: "http://localhost/UI/user/taggin.php",
        data: {search: search.term},
        success: function(choices) {
          showChoices(choices);
        }
      });
    }
  });
  }); 
```

这是我的html

```
 <tr>                        
                    <td>Tags</td>
                        <td><input id="mytags"  class= "ulc" name = "mytags"></ul>
                    </td>

                </tr> 
```

我`http://localhost/UI/user/taggin.php`正在返回数据，例如

```
["tag1","tag2","surgeon"] 
```

json格式

请告诉我我做错了什么，所以我的自动完成在这里不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:31:24.820

[Jquery UI's autocomplete](http://jqueryui.com/demos/autocomplete/) is another option.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:08:41.210

尝试这个

```
tagSource: function(search, showChoices) {
    var that = this;
    $.ajax({
        url: "/tags/autocomplete.json",
        data: {
            q: search.term
        },
        success: function(choices) {
            showChoices(that._subtractArray(choices, that.assignedTags()));
        }
    });
}​ 
```

看看这个[github问题](https://github.com/aehlke/tag-it/issues/13#issuecomment-1833137)

# domain-driven-design - DDD 性能问题急切加载 AR 子实体

> ID：12179348
> 
> 赞同：2
> 
> 时间：2012-08-29T13:41:59.183
> 
> 标签：domain-driven-design, eager-loading

在最后几天，我正在制作一个示例应用程序来申请/学习 DDD。DDD 的原则之一（如果我错了，请纠正我）是对实体的所有更改都应该通过聚合根（AR）进行，并且 AR 应该与他的子实体一起加载。这样更容易验证聚合一致性。只有一个小细节让我感到困扰。我无法理解 DDD 如何处理性能问题。想象一下，我有一个 Order(AR)，比如说，20000、30000 个 OrderLine。急切加载大量子记录时会存在性能问题。将 Order 作为 AR 说，您可以想象其他可能发生这种情况的场景。我期待着阅读您对这个主题的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:23:08.940

DDD 并不总是没有技术考虑。如果您的 AR 可以包含大量子实体，请考虑是否可以让子实体自行成为 AR。必须在考虑最终一致性的同时做出此决定。

在您提供的示例中，考虑 Order AR 是否真的需要首先引用 OrderLine 实体以保持完整性。如果是这样，请考虑让 OrderLine 本身成为 AR，在这种情况下，您可能必须处理最终的一致性。当然，如果您将 OrderLine 设置为 AR，您的应用程序逻辑将发生变化，因为需要在 OrderLine 上执行的操作必须通过 OrderLineRepository 才能访问 OrderLine，而不是通过 Order AR。

有关这方面的更多信息，请查看[Vaughn Vernon 的有效聚合设计](http://dddcommunity.org/library/vernon_2011)。

# java - 如何在具有路径的java中创建会话cookie，同时仍然具有函数式编程的良好编程实践

> ID：12179358
> 
> 赞同：0
> 
> 时间：2012-08-29T13:42:31.987
> 
> 标签：java, functional-programming, immutability

我真的很喜欢函数式编程，我喜欢它的不变性概念，而且它对函数没有副作用的概念。

我正在尝试将其中一些概念带入 java。

现在我有某种接收请求的 servlet，如果浏览器没有向服务器发送 cookie，那么我想创建一个具有特定路径的 cookie 给用户。

现在在 servlet 内部，我不想保留该逻辑，因为它对多个 servlet 是通用的。所以我将它提取到某种 cookie 管理器中，它会做到这一点：

CookieManager.java.handleCookies（请求，响应）

1.  检查浏览器是否发送了cookie。
2.  如果未使用具有特定路径的新会话 cookie 值设置 cookie。

但是我不喜欢它，因为现在 servlet 将调用 CookieManager.java.handleCookie 会产生副作用'正在传递给它。

任何人都可以提出一个既优雅又无副作用且性能出色的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:51:33.730

您可以使用 servlet 过滤器。这将非常适合您的情况。您可以将过滤器映射到 URL 模式并在 dofilter 方法中编写代码。如果您想对请求/响应进行前后处理，建议使用过滤器。由于您正在为您的请求进行预处理，因此它适合您的情况。If 也是松耦合的，因为您可以随时删除、修改或添加其他规则，而无需修改核心 servlet 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:52:12.823

一个好的解决方案是使用创建一个 servlet，它将充当所有其他 servlet 的父类。现在在这个 servlet 中，将这个 cookie 处理逻辑放在一个通用函数中，比如 handlecookie。在此 servlet 的 get 和 post API 中，首先调用此 handleCookie，然后调用 servlet 的服务 API（保持为空）

在所有子 servlet 类中，您只能覆盖从父类继承的服务类，并且对您来说应该可以正常工作

[Servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)是您可以使用的其他解决方案。

# python - 学习如何在 Python 中实现 MapReduce/Hadoop 的起点？

> ID：12179359
> 
> 赞同：13
> 
> 时间：2012-08-29T13:42:32.923
> 
> 标签：python, hadoop, mapreduce

我最近开始涉足数据分析，去年我学到了很多东西（目前，几乎完全使用 Python）。我觉得下一步是开始在 MapReduce/Hadoop 中训练自己。但是，我没有接受过正式的计算机科学培训，因此通常不太了解人们撰写有关 Hadoop 时使用的行话，因此我在这里提出问题。

我希望的是 Hadoop 的顶级概述（除非我应该使用其他东西？），也许是对某种教程/教科书的推荐。

例如，如果我想并行化我用 Python 编写的神经网络，我应该从哪里开始？是否有一种相对标准的方法来使用算法实现 Hadoop，或者每个解决方案都非常具体？

Apache wiki 页面将 Hadoop 描述为“在由商品硬件构建的大型集群上运行应用程序的框架”。但这*意味着*什么？我听说过“Hadoop 集群”这个词，而且我知道 Hadoop 是基于 Java 的。那么这是否意味着对于上面的示例，我需要学习 Java，在一些亚马逊服务器上建立一个 Hadoop 集群，然后 Jython 化我的算法，然后最终让它在使用 Hadoop 的集群上工作？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T14:00:41.797

首先，要将 Hadoop 与 Python 一起使用（无论何时在您自己的集群、Amazon EMR 或其他任何东西上运行它），您都需要一个名为“Hadoop Streaming”的选项。

阅读 Hadoop 手册的[原始章节](http://hadoop.apache.org/common/docs/r0.15.2/streaming.html)（[更新链接](http://hadoop.apache.org/docs/r0.18.0/commands_manual.html)）以了解其工作原理。

还有一个[很棒的库](http://packages.python.org/mrjob/#table-of-contents)“MrJob”可以简化在 Hadoop 上运行 Python 作业。

您可以设置自己的集群或尝试使用 Amazon Elastic Map Reduce。后者可能会让你付出一些代价，但有时在开始时更容易运行。关于如何在 Amazon EMR 上使用 Hadoop Streaming 运行 Python有一个[很棒的教程。](http://aws.amazon.com/articles/2294)它立即显示了一个简单但实​​用的应用程序。

要了解 Hadoop 本身，我建议您阅读其中一本书。他们说[“Hadoop In Action”](https://rads.stackoverflow.com/amzn/click/com/1935182196)更适合那些对 Python/Hadoop Streaming 感兴趣的人。

另请注意，为了测试/学习，您可以在本地机器上运行 Hadoop，而无需实际的集群。

更新：

至于理解 Map Reduce（即如何识别和表达 Map Reduce 语言的不同类型问题），请阅读伟大的文章“ [MapReduce 模式、算法和用例](http://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/)”，其中包含 Python 示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:57:46.770

我建议您从下载[Cloudera VM for Hadoop](https://ccp.cloudera.com/display/SUPPORT/Cloudera%27s+Hadoop+Demo+VM)开始，这几乎是当今许多行业的标准，并简化了 Hadoop 设置过程。然后按照[本教程](https://ccp.cloudera.com/display/SUPPORT/Hadoop+Tutorial)学习单词计数示例，这是学习 Map/Reduce 的标准 hello world 等价物

在此之前，理解 map/reduce 的一种简单方法是尝试 python 的内置 map/reduce 函数：

```
x = [1, 2, 3, 4]
y = map(lambda z: z*z, x]
print y
[1, 4, 9, 16]
q = reduce(lambda m,n : m+n, y)
print q
30 
```

在这里，mapper 通过对每个元素进行平方来转换数据，reducer 将平方相加。Hadoop 只是使用它来扩展大规模计算，但您需要找出自己的映射和归约函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-13T11:47:59.543

对于喜欢 MOOC 的人来说，Udacity 上的[Intro to Hadoop 和 Mapreduce](https://www.udacity.com/course/ud617)是与 Cloudera 合作制作的。在课程期间，您有机会在本地安装 Cloudera Hadoop Distribution 虚拟机并在示例数据集上执行一些 map/reduce 作业。Hadoop Streaming 用于与 Hadoop 集群交互，编程是用 Python 完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:50:02.497

为什么不从[google 的原创作品](http://research.google.com/archive/mapreduce.html)开始呢？因为这是其他人开始的地方。[对于并行性，这里](http://wiki.python.org/moin/ParallelProcessing)有许多不同的选项可供选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:02:26.553

[http://blog.doughellmann.com/2009/04/implementing-mapreduce-with.html](http://blog.doughellmann.com/2009/04/implementing-mapreduce-with.html)

Doug 的解决方案不适合 Google 规模的生产，因为它只是 Python 多处理池的一个精简包装器（它只使用一台机器，尽管它可以使用该机器上的许多内核）。但这足以让您入门，并且很容易看到它在做什么。

> 我想并行化一个神经网络

不容易。节点之间的通信将比它的价值更麻烦。但是，您可以运行多个网络实例来增加吞吐量。

ML 问题通常很容易并行化——您在每个节点上运行不同的神经网络。梯度下降可能有点棘手，因为梯度下降是非常线性的，但您可以使用其他一些优化方法（尝试几种不同的步长，然后选择最好的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T21:22:44.763

好吧，我已经连续工作了 4 天，最后我想我已经涉足了。请检查[此回购](https://github.com/rinkon/Mapreduce-Implementation-Python)。我认为这会有所帮助。

# java - 缺少字符（此行有多个标记

> ID：12179360
> 
> 赞同：1
> 
> 时间：2012-08-29T13:42:35.103
> 
> 标签：java, android

嗨，Android 和 Java 还是新手。

请看一下这段代码，我收到多个标记错误，无法弄清楚我在哪里缺少字符或括号。它表示最后两个括号的错误。

```
public class watsnuut extends Activity{      

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.watsnuut);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    WebView webView = (WebView) findViewById(R.id.webView2);
    final ProgressBar progess = (ProgressBar) findViewById(R.id.ProgressBar);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://kyknet.dstv.com/nuus/");
    webView.setWebViewClient(new WebViewClient() {
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            progess.setVisibility(View.VISIBLE);
        }
        public void onPageFinished(WebView view, String url) {
        progess.setVisibility(View.GONE);
        }

    }
  } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:44:26.527

你没有关闭`setWebViewClient`方法调用

```
webView.setWebViewClient(new WebViewClient() {
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            progess.setVisibility(View.VISIBLE);
        }
        public void onPageFinished(WebView view, String url) {
        progess.setVisibility(View.GONE);
        } 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:44:49.477

您忘记添加**});** 在

```
 webView.setWebViewClient(new WebViewClient() {
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                progess.setVisibility(View.VISIBLE);
            }
            public void onPageFinished(WebView view, String url) {
            progess.setVisibility(View.GONE);
            }
    }); 
```

代替

```
webView.setWebViewClient(new WebViewClient() {
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            progess.setVisibility(View.VISIBLE);
        }
        public void onPageFinished(WebView view, String url) {
        progess.setVisibility(View.GONE);
        } 
```

# java - Maven 存储库工件：jboss-j2ee

> ID：12179361
> 
> 赞同：1
> 
> 时间：2012-08-29T13:42:38.977
> 
> 标签：java, maven, jboss, java-ee-5, jboss-4.2.x

关于 Maven 存储库和 Java EE 规范的问题。

我刚看到这个问题：[Single/complete Maven dependencies for Java EE 5 API](https://stackoverflow.com/questions/12177131/single-complete-maven-dependencies-for-java-ee-5-api)并检查了我们的项目。

我们在 JBoss 4.2.2 上并使用 jboss-j2ee 工件。

```
<dependency>
    <groupId>jboss</groupId>
    <artifactId>jboss-j2ee</artifactId>
    <version>4.2.2.GA</version>
</dependency> 
```

令我困惑的是，这是我在[搜索中央存储库](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22jboss%22%20AND%20a%3A%22jboss-j2ee%22)时能找到的 jboss-j2ee 的最后一个版本。

我认为它可能列在不同的工件 ID 下（J2EE 与 Java EE 更名），所以我查找了所有[工件的组 ID 为`jboss`](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22jboss%22).

看来 4.2.2.GA 是任何 Artifact 的最新版本。有人知道为什么吗？JBoss 是否停止将工件发布到 Maven 存储库？

在某些时候，我们会想要升级 JBoss，知道在哪里可以找到依赖项很重要。

在这个特定场景中，我可以只使用 Java EE 5 或 Java EE 6 API，但我很好奇为什么在中央存储库上找不到*任何超过 4.2.2 的 JBoss 工件。*

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:15:12.393

请尝试使用 JBoss Maven 存储库。

[http://repository.jboss.org/nexus/content/groups/public-jboss](http://repository.jboss.org/nexus/content/groups/public-jboss)

# android - Android Admob 抛出异常

> ID：12179366
> 
> 赞同：1
> 
> 时间：2012-08-29T13:42:54.937
> 
> 标签：android, admob

我从谷歌收到很多例外。例外情况与 Admob 有关。这是从谷歌开发者控制台报告的错误之一：

这些行对于所有错误报告都是相同的。

```
java.lang.NullPointerException
at com.google.ads.util.g.a(SourceFile:439)
at com.google.ads.v.a(SourceFile:55)
at com.google.ads.internal.a.a(SourceFile:200)
at com.google.ads.internal.i.shouldOverrideUrlLoading(SourceFile:125)
at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:268)
at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:383) 
```

下一行是不同的/取决于报告/

```
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4945)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码：

```
if (ads_enabled)
{
    try
{
     AdRequest adRequest = new AdRequest();
     m_adView.loadAd(adRequest);
}
catch (Exception e)
{
    K_log.e(e.toString());
}
} 
```

OnDestroy 代码：

```
try
{
    if (m_adView != null)
        m_adView.destroy();
}
catch (Exception e)
{
K_log.e("MainScreen -> m_adView.destroy()" + m_iCount + " " + e.toString());
}

super.onDestroy(); 
```

更新：构建适用于最低版本 8，目标版本 13

# php - 如何在 Drupal 7 中配置字段和视图？

> ID：12179368
> 
> 赞同：0
> 
> 时间：2012-08-29T13:42:56.460
> 
> 标签：php, mysql, drupal

Drupal 7.x：如何配置字段和视图（以及其他模块，如果需要）以获取 javascript 图像查看器，如下面的示例？

[http://www.amazon.co.uk/gp/product/images/B000TER4HO/](http://www.amazon.co.uk/gp/product/images/B000TER4HO/)

[http://www.amazon.co.uk/gp/product/images/B00126INHI/](http://www.amazon.co.uk/gp/product/images/B00126INHI/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:37:40.127

1.  如果图像是节点的字段值（推荐）：[http ://drupal.org/project/field_slideshow](http://drupal.org/project/field_slideshow)

    创建一个具有无限值的图像字段，并在 上设置该字段的显示`admin/structure/types/manage/NODE_TYPE/display`。（幻灯片选项有一些选项。）

    ![在此处输入图像描述](../Images/da942b2c82a436346aa22589a88cb62b.png)

2.  如果图像是连接到产品节点 someshow 的单独节点：http: [//drupal.org/project/views_slideshow](http://drupal.org/project/views_slideshow)

    您需要为此创建一个加载图像节点的视图。可能与当前节点有关系。

# spring - java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;

> ID：12179370
> 
> 赞同：8
> 
> 时间：2012-08-29T13:42:58.293
> 
> 标签：spring, gwt, maven-2, gxt

我将 Gxt2.2.3 和 Gwt2.2.0 与 maven 一起使用，当我尝试通过 jetty 服务器以托管模式运行应用程序时，我得到以下错误跟踪如下。

```
 org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception     parsing XML document from class path resource [spring/spring-security.xml];     nested exception is java.lang.NoSuchMethodError:     org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
            [INFO]  at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420)
            [ERROR] log4j:ERROR Error occured while sending e-mail notification.
            [ERROR] javax.mail.NoSuchProviderException: smtp
            [ERROR]     at javax.mail.Session.getService(Session.java:794)
            [ERROR]     at javax.mail.Session.getTransport(Session.java:716)
            [ERROR]     at javax.mail.Session.getTransport(Session.java:656)
            [ERROR]     at javax.mail.Session.getTransport(Session.java:636)
            [ERROR]     at javax.mail.Session.getTransport(Session.java:693)
            [ERROR]     at javax.mail.Transport.send0(Transport.java:188)
            [ERROR]     at javax.mail.Transport.send(Transport.java:120)
            [ERROR]     at org.apache.log4j.net.SMTPAppender.sendBuffer(Unknown Source)
            [ERROR]     at org.apache.log4j.net.SMTPAppender.append(Unknown Source)
            [ERROR]     at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
            [ERROR]     at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
            [ERROR]     at org.apache.log4j.Category.callAppenders(Category.java:203)
            [ERROR]     at org.apache.log4j.Category.forcedLog(Category.java:388)
            [ERROR]     at org.apache.log4j.Category.log(Category.java:853)
            [ERROR]     at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:257)
            [ERROR]     at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:215)
            [INFO]  at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
            [INFO]  at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
            [INFO] [ERROR]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
                at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
            [ERROR] [INFO]  at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
                at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
            [INFO]  at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
            [INFO]  at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
            [ERROR]     at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
            [INFO]  at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
            [ERROR]     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
            [INFO]  at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
            [INFO]  at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
            [INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
            [INFO]  at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
            [INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
            [INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
            [INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
            [INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
            [INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
            [INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
            [INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
            [INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:461)
            [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
            [INFO]  at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
            [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
            [INFO]  at org.mortbay.jetty.Server.doStart(Server.java:222)
            [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:565)
            [INFO]  at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:494)
            [INFO]  at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1058)
            [INFO]  at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:800)
            [INFO]  at com.google.gwt.dev.DevMode.main(DevMode.java:304)
            [INFO] Caused by: java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
            [INFO]  at org.springframework.security.config.SecurityNamespaceHandler.parse(SecurityNamespaceHandler.java:45)
            [INFO]  at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1297)
            [INFO]  at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1287)
            [ERROR] [INFO]  at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
                at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
            [INFO]  at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
            [INFO]  at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
            [INFO]  at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
            [INFO]  ... 31 more
            [ERROR]     at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
            [ERROR]     at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:461)
            [ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
            [ERROR]     at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
            [ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
            [ERROR]     at org.mortbay.jetty.Server.doStart(Server.java:222)
            [ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
            [ERROR]     at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:565)
            [ERROR]     at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:494)
            [ERROR]     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1058)
            [ERROR]     at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:800)
            [ERROR]     at com.google.gwt.dev.DevMode.main(DevMode.java:304) 

```

似乎有一些 jar 冲突，但我无法找到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:59:05.347

问题出在这里，您可能将 spring2.x.jar 用于 spring-security3.x.jar。我们知道 spring-security3.x 需要 spring3.x 及更高版本。它不支持spring2.x。检查项目的类路径，并确保 spring-security3.x 版本没有 spring2.x。当我通过以下链接遇到相同问题时，我找到了解决方案。希望此[链接](https://jira.springsource.org/browse/SEC-1397)对您有所帮助。

# javascript - 为什么 jslint 抱怨此代码以及我应该如何修复它

> ID：12179371
> 
> 赞同：0
> 
> 时间：2012-08-29T13:42:59.273
> 
> 标签：javascript, jslint

> **可能重复：**
> [jslint 错误：意外的“输入”。与未定义比较，或使用 hasOwnProperty](https://stackoverflow.com/questions/6824895/jslint-error-unexpected-in-compare-with-undefined-or-use-the-hasownproperty)

为什么 jslint 抱怨此代码以及我应该如何修复它。

```
 if ('children' in object) {
                for (key in object.children) {
                    recurse(object.children[key], key);
                }
            } 
```

显然定义了递归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:46:41.940

您缺少一个 var。此外，您没有使用“hasOwnProperty”。

```
if (object.hasOwnProperty('children')) {
    for (var key in object.children) {
        if(object.children.hasOwnProperty(key)) {
            recurse(object.children[key], key);
        }
    }
} 
```

# .net - 解析 .Net 4 解决方案文件

> ID：12179377
> 
> 赞同：0
> 
> 时间：2012-08-29T13:43:12.877
> 
> 标签：.net, visual-studio

我面临一个问题，其中 .net 中有许多项目，所有项目都保存到特定位置，其中大部分只是向导生成的默认位置。

有些项目只是具有默认结构。

我正在考虑从项目文件中读取 XML，以了解解决方案中存在哪些文件/引用。

但是，如何知道菜鸟是否做了默认项目。

我需要对代码文件使用 .Net 解析器吗？

例如，在 ac# 默认项目中，引用了一些标准程序集，以及使用标准函数创建的默认 .cs 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:51:26.483

解决方案文件基于文本而不是 XML。此处有关于其格式的信息[Solution (.sln) File](http://msdn.microsoft.com/en-us/library/bb165951%28v=vs.80%29.aspx)。

大多数项目文件（例如 .csproj 文件）都是基于 XML 的 MSBuild 文件格式。可以使用标准 XML 解析器来读取这些文件，文件格式记录在此处[MSBuild Reference](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:48:25.713

解决方案文件不是xml，但有解析器看这个主题：

[解析 Visual Studio 解决方案文件](https://stackoverflow.com/questions/707107/library-for-parsing-visual-studio-solution-files)

# ios - 阅读来自非朋友的新闻提要

> ID：12179394
> 
> 赞同：0
> 
> 时间：2012-08-29T13:43:46.317
> 
> 标签：ios, iphone, facebook

如果用户不是您在 Facebook 上的朋友，是否可以使用 Facebook API 获取用户的新闻提要帖子？

我的场景是这样的：在我的 iOS 应用程序中，如果说人 B 允许应用程序这样做并且两个用户都安装了应用程序，我希望人 A 能够读取人 B 的提要。

是否支持这种事情，或者两个人都必须在 Facebook 上交朋友？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:48:23.123

你不能直接这样做。但是您应该能够通过您的应用程序做到这一点。即存储人 B 的提要并将其作为应用程序发布在人 A 的提要上。

# cloudbees - 如何找出 CloudBees Jenkins 占用了多少空间工作空间和构建工件

> ID：12179400
> 
> 赞同：2
> 
> 时间：2012-08-29T13:43:55.160
> 
> 标签：cloudbees

有什么方法可以查看 CloudBees dev@cloud 中的 Jenkins 占用了多少空间工作空间和构建工件？

当我的帐户用完配额时，我会收到一条消息，告诉我使用了多少磁盘空间并从中减去我的 Forge 使用量告诉我 Jenkins 占用了多少空间，但我不知道如何确定哪个作业的工作空间和/或构建工件占用空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:22:08.770

您可以安装[磁盘使用插件](https://wiki.jenkins-ci.org/display/JENKINS/Disk+Usage+Plugin)，该插件将分解哪些构建使用的空间最多。您的工作空间不计入您的配额，仅计入构建。

# javascript - 如果元素失去焦点，关闭弹出 div

> ID：12179402
> 
> 赞同：1
> 
> 时间：2012-08-29T13:44:07.450
> 
> 标签：javascript, jquery

我有以下场景：在标签的鼠标悬停事件中，我显示一个 div。div 必须保持打开状态才能在 div 中进行选择。在标签的 mouseout 事件中，div 必须消失。问题是当我的光标从标签移动到 div 时，会触发标签的 mouseout 事件，这会在我到达那里之前关闭 div。我有一个名为的全局布尔变量`canClose`，我根据必须关闭或保持打开的情况将其设置为 true 或 false。为此，我删除了在标签的 mouseout 事件上关闭 div 的功能。下面是一些示例代码。

**编辑** 我找到了解决我的问题的方法，尽管亚历克斯也提供了一个可行的解决方案。我`mouseleave`还在标签上添加了一个事件，其`setTimeout`功能将在 1.5 秒内执行。这将给用户足够的时间将鼠标悬停在打开的 div 上，该 div 将`canClose`再次设置为 false。

```
$("#label").live("mouseover", function () {
        FRAMEWORK.RenderPopupCalendar();
    });

$("#label").live("mouseout", function () {
        setTimeout(function(){
            if(canClose){
                FRAMEWORK.RemovePopupCalendar();
            }
        },1500);
    });

    this.RenderPopupCalendar = function () {
        FRAMEWORK.RenderCalendarEvents();
        }
    };

    this.RenderCalendarEvents = function () {
        $(".popupCalendar").mouseenter(function () {
            canClose = false;
        });

        $(".popupCalendar").mouseleave(function () {               
            canClose = true;
            FRAMEWORK.RemovePopupCalendar();
        });
    }

    this.RemovePopupCalendar = function () {
        if (canClose) {
            if ($(".popupCalendar").is(":visible")) {
                $(".popupCalendar").remove();
            }
        }
    }; 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:03:10.967

我会将`<label>`and包装`<div>`在一个容器中，`<div>`然后在其上执行所有鼠标/隐藏事件。

查看这个小提琴示例 - [http://jsfiddle.net/6MMW6/1](http://jsfiddle.net/6MMW6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:51:43.120

给你的 popupCalendar 一个明确的 ID 而不是一个类选择器，例如

```
<div id="popupCalendar"> 
```

使用 #popupCalendar 而不是 .popupCalendar 引用它。

现在，remove() 非常激烈，因为它将完全从 DOM 中删除 div。如果您希望再次显示日历，您只需 .hide() 即可。

但是您的逻辑似乎有点过于复杂，为什么不只是在 mouseenter 上使用 .show() 并在 mouseout 事件上使用 .hide() 呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T22:50:32.253

如果标签页失去焦点，这将关闭整个标签页。但是，如果您定位它，它也可以用于页面内的某些内容，只需更改目标代码即可。

**JavaScript：**

```
<script type="text/javascript" >
delay=1000 // 1 sec = 1000.
closing=""
function closeme(){
closing=setTimeout("self.close()",delay)
// self means the tab page close when losing focus, but you can change and target it too.
}
<!--// add onBlur="closeme()" onfocus="clearTimeout(closing)" to the opening BODY tag//-->
</script> 
```

**HTML：**

```
<body onBlur="closeme()" onfocus="clearTimeout(closing)"> 
```

# jasperserver - 想要在级联输入控件中显示重复值

> ID：12179413
> 
> 赞同：1
> 
> 时间：2012-08-29T13:44:31.323
> 
> 标签：jasperserver

我在药房工作。对药物进行分类的一种方法是称为 GPI 的标识符。GPI 中的数字是有意义的，是父子关系。

![在此处输入图像描述](../Images/f4a94c7cae1ca2bdab6cd2766787528e.png)

在我的数据库中，我有一个组表、一个类表（包括组）和一个子类表（包括组和类）。类的数值在组中重复。例如，组 01 可能具有类 01、02、03 和 04。组 02 也可能具有 01、02、03 和 04。每个组中的类不同，它们使用具有相同的标识符。

在 JasperReports Server 4.7 中，我有一个显示 GPI 组的多选查询输入控件。我还有一个多选查询级联输入控件，它采用 gpi_group 值来显示类列表。这是填充级联输入控件的查询：

```
 SELECT DRUG_GROUP, DRUG_CLASS, CLASS_NAME
 FROM Schema.DRUG_CLASSES
 WHERE $X{IN, DRUG_GROUP, gpi_group}
 ORDER BY DRUG_GROUP, DRUG_CLASS 
```

可见列：DRUG_GROUP、DRUG_CLASS、CLASS_NAME

值列：DRUG_CLASS

当我选择一个药物组时效果很好。这是第01组：

![在此处输入图像描述](../Images/0ae680f7f8d31e4e732a22ce695599e4.png)

这是第02组：

![在此处输入图像描述](../Images/1817fff87f6592be378828559dbd10fb.png)

但是当我一起选择它们时：

![在此处输入图像描述](../Images/a3f46fbf328228f5d13cfb773836bd46.png)

输入控件似乎不喜欢选择多个 GPI 组时出现的 GPI 类的重复值。如果我将值列更改为 GPI 类名称（其中没有重复项），则显示是所需的：

![在此处输入图像描述](../Images/8743d6d3a197cbcdc6205c10c672ccd5.png)

但是，我不希望我的值列是 GPI 类名称，我希望它是 GPI 类。我想将我的 GPI 子类输入控件限制在来自 GPI 组和 GPI 类输入控件的值上，并且我想将 GPI 组、GPI 类和 GPI 子类输入到我的查询中。

关于如何让级联输入控件显示“重复”GPI 类值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:44:05.227

这是我决定要做的——

输入控件需要值列中的唯一值。我认为没有办法解决这个问题，所以我只是顺其自然。我将在我的查询中处理连接的字符串。

查询 GPI Class 级联输入控制：

```
 SELECT 
   DRUG_GROUP, 
   DRUG_CLASS, 
   CLASS_NAME, 
   DRUG_GROUP||DRUG_CLASS AS GROUP_CLASS
 FROM Schema.DRUG_CLASSES
 WHERE $X{IN, DRUG_GROUP, gpi_group} 
```

值列：GROUP_CLASS（GPI Group 和 GPI Class 的串联）

查询 GPI 子类级联输入控件：

```
 SELECT 
   DRUG_GROUP, 
   DRUG_CLASS, 
   GROUP_CLASS, 
   DRUG_SUBCLASS, 
   GROUP_CLASS_SUBCLASS,      
   DRUG_SUBCLASSNAME 
 FROM (
     SELECT 
       DRUG_GROUP, 
       DRUG_CLASS, 
       DRUG_GROUP||DRUG_CLASS AS GROUP_CLASS, 
       DRUG_SUBCLASS, 
       DRUG_GROUP||DRUG_CLASS||DRUG_SUBCLASS AS GROUP_CLASS_SUBCLASS, 
       DRUG_SUBCLASSNAME
     FROM Schema.DRUG_SUBCLASSES
 )
 WHERE $X{IN, GROUP_CLASS, gpi_class_cas} 
```

值列：GROUP_CLASS_SUBCLASS（GPI Group、GPI Class 和 GPI Subclass 的串联）

# algorithm - 生成前 n 个自然数的随机排列的最有效方法是什么？

> ID：12179414
> 
> 赞同：1
> 
> 时间：2012-08-29T13:44:36.790
> 
> 标签：algorithm, implementation, permutation, probability, random-sample

到目前为止，我一直在使用一个列表来跟踪遇到的所有唯一数字。我正在使用随机数生成器来获取 1 和 n 之间的随机数。如果该数字已经在我的列表中，那么我将继续生成随机数，直到遇到不在列表中的数字。当我得到一个不在我的列表中的新号码时，我将它添加到我的列表中并重复该过程，直到所有“n”个号码都在我的列表中。

显然这种方法效率很低。有人可以为此提出一个有效的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:46:40.837

[Knuth 是你的人选](http://en.wikipedia.org/wiki/Random_permutation)，尽管还有其他算法可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:51:10.620

*   用从 1 到 N 的数字创建一个有序列表。
*   随机播放它（即，创建它的排列）。这可以在线性时间内完成（参见[这个算法](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)）。

# java - 具有多个但单独的主键 (OR) 的休眠映射

> ID：12179415
> 
> 赞同：1
> 
> 时间：2012-08-29T13:44:41.020
> 
> 标签：java, hibernate, mapping

我目前正在使用hibernate，并且已经尝试了几个星期来找到以下问题的解决方案。与往常一样，无法更改表格。

有两个这样的表：

```
Table 1
     -> ID
     -> REF_ID 
```

-

```
Table 2
     -> ID 
```

ID 是每个表的主键。REF_ID 大多为 0，但有时包含有效 ID。

所以我希望在休眠中实现类似的东西：

```
select        
    ....
from
    Table1 this_ 
inner join
    Table2 this_1_ 
        on this_.ID=this_1_.ID
        or this_.REF_ID=this_1_.ID 
```

我必须在 java 代码中应用某些标准，所以我可能无法使用 HQL。另外我已经在使用其他表的代码，所以理想情况下我想使用映射文件。我当前的映射文件如下所示：

```
<hibernate-mapping>
    <class name="Table1" table="Table1">
        <id name="ID" type="string">
            <column name="ID" />
        </id>   
         <join table = "Table2"  fetch = "join">
            <key column ="ID"/>
        </join> 
    </class>
</hibernate-mapping> 
```

我希望有人能提出一个好的方法。

# twitter - Twitter 搜索 API - 超过 20 个术语

> ID：12179421
> 
> 赞同：2
> 
> 时间：2012-08-29T13:45:01.517
> 
> 标签：twitter, twitter-oauth, twitter-search

我正在尝试从 twitter 搜索 API 中提取几个 @user 和 #hashtags。查询的复杂性导致 403 错误。想知道为此推荐的解决方法是什么。

我的想法是单独查询每个术语。因此，如果我有 40 个 @user 我想为其获取推文，我将进行 40 个查询，缓存每个查询，然后从缓存中提取数据并显示为一个提要。

如果有其他方法或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:51:07.273

我认为 Twitter 调整了他们的搜索复杂度算法，确切的细节可能会随着时间而改变。我相信逻辑运算的经验法则大约是 10。翻译起来，每个术语都是一个 OR 运算。因此，您可能对每个查询 10 个词没问题，并且可能想尝试看看您可以做多少来避免 403，然后回退以提供更多空间，以防查询的复杂性得分发生变化。

乔

# php - 脚本修改为 OOP，现在它不起作用

> ID：12179423
> 
> 赞同：1
> 
> 时间：2012-08-29T13:45:07.813
> 
> 标签：php

基本上我创建了这个脚本来检查文件是否存在然后创建它。在我拥有它的非 OOP 版本之前，它运行良好。

现在我将它修改为 OOP 并且不知何故它不起作用，我在 Apache **PHP Fatal error: Call to undefined function createFile() in C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\ 1.php在第66行**

我突出显示了第 66 行与该行所在的位置`//// THE ERROR LINE BELOW`

它出什么问题了？？？谢谢

```
<?php 
//DB Config File

$phase = $_GET['phase'];

if(empty ($phase)){
    $phase = new phase1();
    $phase->start();
    } elseif ($phase = 1) {
        $phase = new phase2();
    $phase->stepFunction();
        };

class phase1 {

    function __construct () {
        $dbFile = 'dbconfig.php';
        $step = 0;
        $username = $_GET['username'];
        $password = $_GET['password'];
        $server = $_GET['server'];
        $dbName = $_GET['dbName'];

        $this->step = $step;
        $this->dbFile = $dbFile;
        $this->username = $username;
        $this->password = $password;
        $this->server = $server;
        $this->dbName = $dbName;

        $db = new PDO ('mysql:host=' .$server.';dbname='.$this->dbName,$this->username,$this->password);

        $this->db = $db;
        }

public function createFile () {
        //Creates File and populates it.
        $fOpen = fopen($this->dbFile, 'w');
            $fString .= "<?php\n";
            $fString .= "// Database Constants\n";
            $fString .= "\$DB_SERVER =" . "\"" . $this->server . "\";\n";
            $fString .= "\$DB_USER =" . "\"" . $this->username . "\";\n";
            $fString .= "\$DB_PASS =" . "\"" . $this->password . "\";\n";
            $fString .= "\$DB_NAME =". "\"" . $this->dbName . "\";\n";
            $fString .= "?>";

        fwrite($fOpen, $fString);
        fclose($fOpen);

    return true;
}   

public function start (){

try {

if ($this->db) { //if succesful at connecting to the DB

if (file_exists($this->dbFile)){
    if (is_readable($this->dbFile) && is_writable($this->dbFile)){ 

        //Creates File, populates it and redirects the user

  //////////////////////////
  //// THE ERROR LINE BELOW
  //////////////////////////

    if (createFile()) { 

        $phase = new phase2();
        $phase->stepFunction($this->step);
         exit ();
            }

        } else { 

        echo "The file {$dbFile} cannot be accessed. Please configure the file manualy or grant Write and Read permission.";  }

    } else {

        //Creates File, populates it and redirects the user

    if (createFile()) {

        $phase = new phase2();
        $phase->stepFunction($this->step);
         exit ();
            }

        }

}

} catch (PDOException $e) { //Catchs error if can't connect to the db.
    echo  'Connection failed: ' . $e->getMessage();
}

}
    } // en class Phase 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T13:46:15.087

`createFile()`是类中定义的方法，必须在类中调用`$this->createFile()`：

```
if ($this->createFile()) {...} 
```

我还没有彻底检查你的代码，但你可能也忽略`$this->`了其他方法调用。

我还要指出，由于似乎没有任何情况会`createFile()`返回除 之外`TRUE`的任何内容，因此实际上不需要该`if () {}`块；案件将`else`永远无法到达。

# c# - 禁用事件触发不起作用 Sharepoint 2010

> ID：12179429
> 
> 赞同：0
> 
> 时间：2012-08-29T13:45:26.403
> 
> 标签：c#, events, sharepoint-2010

我有一段代码，我试图在编辑文件时禁用事件触发，一旦调试器点击 item.SystemUpdate(false) 行，它就会抛出一个异常，指出“文件 xxxx 已被 xxxxx 修改”

```
HandleEventsFiring handle = new HandleEventsFiring();
handle.DisableHandleEventFiring();
   try
   {
      web.AllowUnsafeUpdates = true;

      SPFile rptFile = web.GetFile(item.Url); //item is an SPListItem
      if (rptFile.Exists)
      {
         WordDocUtility word = new WordDocUtility();
         using (System.IO.Stream stream = rptFile.OpenBinaryStream())
         {
               word.ReplaceKeys(stream, keys);
               rptFile.SaveBinary(stream);
         }
      }

        item.SystemUpdate(false); // the line throwing the exception
    }
    finally
    {
      handle.EnableHandleEventFiring();
      web.AllowUnsafeUpdates = allowUnsafeUpdates;
    }

    public class HandleEventsFiring: SPItemEventReceiver
    {
        public void DisableHandleEventFiring()
        {
            this.EventFiringEnabled = false;
        }

        public void EnableHandleEventFiring()
        {
            this.EventFiringEnabled = true;
        }

    } 
```

有谁知道解决这个问题的方法还是我做错了什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:51:20.533

您没有真正展示足够的代码让我们指出确切的问题。您收到的错误意味着在您`item`从内容数据库中提取列表项后，它后来被更新。如果您每次都收到错误，那么您可能不止一次地下拉同一个项目并且您的更改与您自己发生冲突。我的猜测是它`item`代表文档库中的一个文件，并且除了 splist 项目之外，您正在修改该文件。这些变化是相互矛盾的。您需要获取项目，更新项目，然后获取文件并更新文件。如果您需要获取项目然后更新文件，您将需要*再次获取项目*这样您就不会在获取和更新之间发生另一个更新时最终更新项目。

# node.js - 为什么我的 NodeJS shred POST 请求的最后 2 个字符被剥离？

> ID：12179434
> 
> 赞同：0
> 
> 时间：2012-08-29T13:45:41.353
> 
> 标签：node.js, post, utf-8, document-body, shred

我在使用 NodeJS“shred”在 POST 请求中提交 UTF8 编码的文本文件时遇到问题

我试图发布的文本内容在客户端看起来很好，我知道因为我在调用 client.post 之前将它控制台记录到屏幕上，服务器得到的是文本文件的内容，但最后 2 个字符是总是丢失/切碎。这不是 ANSI 文本文件的问题。如果我将文本文件从 UTF8 转换为 ANSI，当它到达服务器时它就完成了。

```
var Shred = require('shred');
var client = new Shred();
var textToPost = fs.readFileSync("myfile.txt", 'utf8');
console.log (textToPost);
client.post({
     url: "http://www.example.com/readTextFile.php",
     headers: { 'Content-Type': 'application/x-subrip'},
content: textToPost,
on: {
  200: function (response) {
    console.log("posted ok");
console.log(response.content.body);
  },
  500: function (response) {
    asyncCb(new Error('bad response\n' + response.content.body));
  }
} 
```

服务器（通过 readTextFile.php）收到的是 myfile.txt 的内容，其中最后 2 个字符被删除。我不明白为什么。这对下游有很大的影响，因此任何零散的解决方法都不太可能有帮助。

我还注意到，当 textToPost 的内容被记录到控制台时，有一个“？” 在内容之前。当文件是 ANSI 编码文件时，这不会出现。

请帮忙。。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:11:01.917

Ok, after the comments above (thanks rdrey and JohnnyHK), I decided to try stripping out the BOM from the file(s). So I used a hex editor, deleted the EF BB BF chars and saved, this time the file arrived at the server fully intact with no chars missing at the end. Now I'll modify my nodeJS to strip the chars out also. This doesn't completely answer my question (why is there an issue with the BOM). Perhaps shred has a problem posting text files with a BOM. Maybe it incorrectly reads it and decides the file is smaller than it actually is and as a result, chops the end off. I am not sure.

# sed - 用另一行替换 3 行 SED 语法

> ID：12179437
> 
> 赞同：3
> 
> 时间：2012-08-29T13:45:48.237
> 
> 标签：sed

这是一个简单的问题，我不确定我是否能够使用 sed/awk 来做到这一点 我怎样才能让 sed 搜索这 3 行并替换为具有确定字符串的行？

```
<Blarg>
<Bllarg>
<Blllarg> 
```

用。。。来代替

```
<test> 
```

我尝试使用 sed`"s/<Blarg>\n<Bllarg>\n<Blllarg>/<test>/g"`但它似乎没有找到这些行。可能是我的换行符 (?) `\n`。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:57:09.153

因为 sed 通常一次只处理一行，所以您的模式永远不会匹配。试试这个：

```
sed '1N;$!N;s/<Blarg>\n<Bllarg>\n<Blllarg>/<test>/;P;D' filename 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:49:51.850

这可能对您有用：

```
sed '/<Blarg>/ {N;N;s/<Blarg>\n<Bllarg>\n<Blllarg>/<test>/}' <filename> 
```

它的工作原理如下：

*   搜索文件直到`<Blarg>`找到
*   然后使用以下两行附加到当前模式空间`N;N;`
*   检查当前模式空间是否匹配`<Blarg>\n<Bllarg>\n<Blllarg>`
*   如果是这样，则将其替换为`<test>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-01T17:26:33.650

You can use [range addresses](https://www.gnu.org/software/sed/manual/sed.html#Range-Addresses) with regular expressions an the [c](https://www.gnu.org/software/sed/manual/sed.html#index-c-_0028change-to-text-lines_0029-command) command, which does exactly what you are asking for:

```
sed '/<Blarg>/,/<Blllarg>/c<test>' filename 
```

# ios - 无法再将应用测试版更新给我的测试版测试人员（Ad-Hoc）？

> ID：12179443
> 
> 赞同：1
> 
> 时间：2012-08-29T13:46:19.647
> 
> 标签：ios, xcode, ios5, provisioning

我有一个应用程序，我的客户通过分布式 ad-hoc*（邮寄的 x.ipa + x.mobileprovision 文件）在每个主要开发步骤中不断审查。在移动配置配置文件在 8**月过时之前，这一直工作得很好。**

但是不可能只在 Xcodes Organizer 窗口中“更新”它。阅读一些相关帖子，但尚未找到任何答案。

**我的开发人员的已知更改。环境：**

自从我的客户获得最后一个工作的临时测试版（以相同的方式创建*）以来，我所知道的唯一变化是；

*   在开发机器上更新到 Mountain Lion
*   从 4.3.x 更新到 Xcode 4.4.1
*   在 Dev 门户中更新了我的开发人员、配置和分发过时的许可证。

**这样做：**

*   在 betatesting 配置文件 (mobileprovision) 中，我确保包含了客户的 iPhone UDID。
*   我还通过将 UDID 发送应用程序从 Store 发送到客户端进行了双重检查。

*   还创建了另一个小应用程序，使用正常的临时步骤*，但它也没有安装在 betatesters 的 iPhone 上。

该应用程序“工作”到此为止：它可以通过邮件传输给 betatesters iTunes > Syncing to testers iPhone > 并且似乎安装在 iPhone 上，但就在它完成安装时（应用程序图标上的进度条消失），然后 beta 应用程序得到带走了。手机搜索也找不到。

= 这告诉我不是应用程序本身有问题，而是我从 Apple 或开发门户或我的 Xcode 提供的配置证书有问题。但它是哪个或什么？！

*   删除管理器中旧的过时配置文件。
*   使用刷新按钮**更新了管理器中的配置文件。
*   创建了新的 Betatesting 分发配置文件 (x.mobileprovision) 并用于分发档案 (ipa)。

*   当然重新盯着 Xcode 和我的开发 mac 几次。

* *（构建应用程序 > 存档 > 分发 > Betatest 配置文件（x.mobileprovision）+ x.ipa 邮寄给客户端）*

* ***也相关；**

在管理器中点击刷新按钮时，我所有的个人资料都是有效的（绿色），但我收到了这个奇怪的信息；“您的团队没有要为其生成配置文件的设备。请连接设备以用于开发或使用配置门户手动添加设备 ID ” HTTPS ....” 据我所见，我有我的开发 iPhone 已连接并在管理器左侧的设备下显示为“绿色”。它也包含在我的个人资料中。

供参考：

*   我在 Xcode Organizer & Dev Portal 中的所有个人资料都是“绿色的”（好的）。
*   在 OSX ML10.8.1、Xcode 4.4.1 上运行我的 Dev mac。

**有人可以帮忙吗？**

一直在这几天，尝试了很多东西，但就是无法让它发挥作用。客户越来越沮丧！似乎我并不孤单 - 其他人似乎也有这个问题。谢谢 ：-）

Ps Maybe 应该提到测试版应用程序在我的开发 iPhone 上运行良好......

*这个话题也在苹果开发论坛上：[https ://devforums.apple.com/thread/164981?tstart=0](https://devforums.apple.com/thread/164981?tstart=0)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:57:24.250

**解决了！** 这个周末我有更多时间回来解释我的 Xcode 和设置中的问题和问题。如果其他人遇到同样令人沮丧的麻烦，可能会很有用......

**更新解决方案：**

**我上面描述的问题的解决方案是；**

在上周进行了很多尝试和错误之后，我终于解决了这个问题。

**1) 确保您在 Xcode > Organizer > Devices 中拥有正确的 UDID。**

*   获取您的测试人员最新的 UDID 。我使用了做得很好的免费应用程序“UDID Finder”（[http://itunes.apple.com/se/app/udid-finder/id384382012?mt=8](http://itunes.apple.com/se/app/udid-finder/id384382012?mt=8)）。

*   在线将 UDID 添加/更新到 iOS 配置门户。

*   然后刷新本地 Xcode > Organizer > Devices。

**2) 确保您的配置和分发配置文件在 iOS Prov 中是最新的。门户网站。**

*   然后刷新 Xcode > Organizer > Devices > Library > Provisioning Profiles。

**3) 检查您的 Xcode > 构建设置**

*   在您的应用程序中>选择顶部/根行（洞项目）>目标>您的应用程序>构建设置>代码签名>代码签名身份；

*   确保“调试”选择了“[b]iPhone Developer[/b] + you provisioning profile”并

*   对于“Release”，选择了“[b]iPhone Distribution[/b] + your distribution profile”。另请参阅附加的示例屏幕转储。

![屏幕转储](../Images/8a65a50dc6ee1dee4c0b7e86cc33629b.png)

上面的一个很好的链接（Apple Dev Forum）；[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)

我对 betatesters 的临时分发现在工作得很好。希望这对其他人有帮助:-)

**结论：** 我认为问题的原因是 Xcode 4.4.1（也许还有 Xcode 4.5DP？）默认情况下将构建设置设置为一些“错误”的默认值，这阻止了我将 ad-hoc 分发到我的 betatesters 通过邮件。

# javascript - 使用jquery到Excel的客户端表

> ID：12179445
> 
> 赞同：1
> 
> 时间：2012-08-29T13:46:29.983
> 
> 标签：javascript, jquery, html-table, export-to-excel

我想将客户端表转换为 Excel `.xls`，没有服务器端。以下代码成功包含简单表格和 Javascript 以及表格到 Excel，但在 Firefox 或 Chrome 中不起作用？

如何在所有浏览器中运行它？

```
<script type="text/javascript">
function CreateExcelSheet()
{
 var x=myTable.rows
   var xls = new ActiveXObject("Excel.Application")
   xls.visible = true
   xls.Workbooks.Add
   for (i = 0; i < x.length; i++)
   {
    var y = x[i].cells
    for (j = 0; j < y.length; j++)
   {
   xls.Cells( i+1, j+1).Value = y[j].innerText
  }
  }
 }
</script>

<table id="myTable" border="1">
<tr> <b><td>Name </td> <td>Age</td></b></tr>
<tr> <td>Shivani </td> <td>25</td> </tr>
<tr> <td>Naren </td> <td>28</td> </tr>
<tr> <td>Logs</td> <td>57</td> </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:01:50.550

`ActiveXObject`是 Internet Explorer 唯一的方法。你不能做你想做的事情纯粹用 jquery/javascript 做（至少，不是微不足道的）

您要么必须使用可以生成 Excel 电子表格的服务器端应用程序，要么生成文件的 CSV，对其进行 base64 编码并使用 data: URI 方案将浏览器导航到 base64 数据触发您生成的内容的“下载”。

# javascript - 如何将备用类分配给 Angular JS 中的行？

> ID：12179455
> 
> 赞同：71
> 
> 时间：2012-08-29T13:46:48.913
> 
> 标签：javascript, angularjs

我想将备用类分配给表中的行。我正在使用 ng-repeat

```
<tr ng-repeat="event in events"> 
```

我想得到这样的输出：

```
<tr class="odd">...</tr>
<tr class="event">....</tr> 
```

我试过这个（不起作用）：

```
<tr ng-repeat="event in events" class="$index % 2 == 0? 'event' : 'odd'"> 
```

我无法让它工作。此外，Angular 似乎正在使用“类”属性。为什么要这样做？我可以告诉 AngularJS 不要使用 class 属性进行内部评估吗？

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-29T14:01:18.433

您应该为此使用角度指令 ngClassEven 和 ngClassOdd。

查看文档部分以了解如何使用它们

[http://docs.angularjs.org/api/ng.directive:ngClassEven](http://docs.angularjs.org/api/ng.directive:ngClassEven)

[http://docs.angularjs.org/api/ng.directive:ngClassOdd](http://docs.angularjs.org/api/ng.directive:ngClassOdd)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-01T09:48:05.507

来自 Angular 文档..

使用**ng-class-odd ng-class-even**

```
<li ng-repeat="name in names">
  <span ng-class-odd="'odd'" ng-class-even="'even'">
    {{name}}
  </span>
</li> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-04T15:24:12.403

正如@ganaraj 所说，ng-class-odd 和 ng-class-even 是正确的方法，但是为了搜索者的利益，您最初的建议在 Angular >=1.2.19 中工作并不遥远。

这是一个密切相关的例子，如果着色超过交替行（例如每 3 行），它会起作用并且也会起作用：

```
<div>
<style>
    .color0 {
        background-color: lightblue;
    }

    .color1 {
        background-color: lightyellow;
    }

    .color2 {
        background-color: lightgray;
    }
</style>

<div ng-repeat="result in results" ng-class="'color' + ($index % 3)">
    <div>
        <p>{{result.myText}}</p>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-30T08:34:51.427

您还可以直接在指令中使用`ng-class-odd`and指令。`ng-class-even``ng-repeat`

```
<div class="cssOneProductRecord" 
   ng-repeat='..' 
   ng-class-odd="'cssProductOdd'" 
   ng-class-even="'cssProductEven'" > 
```

这为每一行提供了很好的交替类：

![在此处输入图像描述](../Images/aca4ef64c6d65f9894d571cb3c3ead73.png)

此示例取自以下页面，该页面还演示了如何将 JSON 数据转换为友好、响应式的 Master-View 页面：

[使用 AngularJS 的主视图](http://mikesknowledgebase.com/pages/Services/WebServices-Page8.7.htm)

![在此处输入图像描述](../Images/b9faa71b0a08715a8c67c001e58b2ebd.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T16:09:30.490

改进 Fintan Kearney 的答案，

来自：[https ://docs.angularjs.org/api/ng/directive/ngClassOdd](https://docs.angularjs.org/api/ng/directive/ngClassOdd)

样式.css

```
.odd {
  color: red;
}
.even {
  color: blue;
} 
```

索引.html

```
<ol ng-init="names=['John', 'Mary', 'Cate', 'Suz']">
  <li ng-repeat="name in names">
   <span ng-class-odd="'odd'" ng-class-even="'even'">
     {{name}}
   </span>
  </li>
</ol> 
```

# kivy - 为 kivy 发行版 .apk 编码源代码

> ID：12179456
> 
> 赞同：0
> 
> 时间：2012-08-29T13:46:53.707
> 
> 标签：kivy

我最近刚刚开始使用 kivy 进行开发以进行测试并构建第一个 .apk ，所以我想到了一个问题。

main.py 包含源代码，如果我想分发我的 apk，我可能不想“可读”......所以当我为 google play 创建 .apk 时，有没有办法编码或隐藏我的主代码商店或作为普通的 linux 应用程序？

多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T09:49:01.573

.py 没有发送到 apk 中，只有 .pyo（Python 字节码，优化版本，无文档字符串）。尽管如此，字节码还是可以颠倒过来的。

您可以使用[Cython](http://cython.org)生成应用程序的 C (.pyx -> .c -> .so)。main.py 所能做的就是：

```
from myencodedlib import run
run() 
```

你会有一个 myencodedlib.pyx ，其中包含你想要编译成二进制 C 的所有东西。（附带说明，python-for-android 需要一个配方来编译 python 扩展。查看 recipes/ 目录以了解它是如何为别人做的。）

最后一点，.so 对于更高级的黑客来说仍然是可反编译的。但是你会有一堆 cpython 调用，带有生成的变量名称。理解它需要几个小时。:)

# jquery - 用括号拆分字符串并推入数组

> ID：12179458
> 
> 赞同：2
> 
> 时间：2012-08-29T13:46:59.000
> 
> 标签：jquery

我有以下字符串

```
"[01][23.81][New]" 
```

我试图通过检索括号之间的值并将它们放入数组中来分解字符串，使其看起来类似于以下内容

```
array({
   "id"        : 01,
   "price"     : 23.81,
   "condition" : "New"
}); 
```

**这是我到目前为止...**

```
var arr = new Array();
$("input:checkbox.addItm:checked").each(function(){
    //str.split('[');
    arr.push({
       "id": $(this).val()
    });
}); 
```

我想知道拆分字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:52:01.227

您可以改用正则表达式：

```
var m = "[01][23.81][New]".match(/\[([^\]]+)\]\[([^\]]+)\]\[([^\]]+)\]/);
arr.push({
  id: m[1], // 01
  price: m[2], // 23.81
  condition: m[3]  // New
}); 
```

# c++ - 无论传递了迭代器类型/指针，指向元素的地址

> ID：12179460
> 
> 赞同：20
> 
> 时间：2012-08-29T13:47:08.273
> 
> 标签：c++, pointers, iterator, object-address

以下函数的最通用语法是什么：

```
template<IteratorType> void myFunction(const IteratorType& myIterator)
{
    _ptr = &myIterator[0];
} 
```

它采用迭代器 myIterator （它可以是原始指针），目标是将指向的对象的地址分配给`myIterator`原始指针`_ptr`。目前我使用`&myIterator[0]`但我意识到只有随机访问迭代器才有运算符 []。

那么是否有适用于所有类型的标准迭代器和指针的语法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-29T13:48:08.940

您可以取消引用指针，然后获取对象的地址。

```
template<IteratorType> void myFunction(const IteratorType& myIterator)
{
    _ptr = &(*myIterator);
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-29T13:49:08.063

根据标准 * 运算符返回一个引用，所以在我看来最好的方法是`&*myIterator`，但由于类可能重载 & 运算符，最好的方法是`std::addressof(*myIterator)`适用于所有类

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-29T13:49:08.003

所有的迭代器都必须有`operator *`(24.2.2:2)，所以你可以写

```
_ptr = &*myIterator; 
```

但是，这对输出迭代器无效，其中`*r`仅在赋值操作 (24.2.4:2) 的左侧有效。

另请注意，不一定`*r`会提供`&`可以合理应用的值；例如，专业化`std::vector<bool>`(23.3.7) 的`reference`类型不是`bool &`。在您的情况下`_ptr = &*myIterator`，假设这`_ptr`是一个适当的指针类型，分配会捕获这个，并且您会遇到编译失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-24T10:23:45.000

我希望你们现在都还活着。如果您的迭代器是 的迭代器`std::vector`，则有更好的方法来获取迭代器所持有的地址。您可以使用：

```
auto *ptr = myIterator._Ptr; 
```

我希望我能给你的问题一个正确的答案。

# javascript - 用 cucumber + capybara + selenium 测试 rails 应用程序会导致空白页

> ID：12179461
> 
> 赞同：0
> 
> 时间：2012-08-29T13:47:13.757
> 
> 标签：javascript, ruby-on-rails, selenium, cucumber, capybara

我正在尝试使用 cucumber 1.2.1、capybara 1.1.2 和 selenium 在 javascript 中测试确认对话。Ruby 是 1.9.3，而 RoR 是 3.2.6。

我的 features/env.rb 是：

```
require 'cucumber/rails'

Capybara.default_selector = :css
Capybara.default_driver = :selenium

ActionController::Base.allow_rescue = false

begin
  DatabaseCleaner.strategy = :transaction
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Cucumber::Rails::Database.javascript_strategy = :truncation

# For testing email
require 'email_spec/cucumber'

# Load FactoryGirl methods
World(FactoryGirl::Syntax::Methods)

require 'declarative_authorization/maintenance'
World(Authorization::TestHelper)

# To handle popups
require 'prickle/capybara'
World(Prickle::Capybara) 
```

我的步骤是：

```
# To test popups. The popup object is define by the gem prickle
Entonces /^debería ver "([^"]*)" en un cuadro de diálogo$/ do |text|
  popup.message.should have_content(text)
end

Cuando /^(cancelo|confirmo) el cuadro de diálogo$/ do |option|
  popup.send(option == "cancelo" ? "dismiss" : "confirm")
end 
```

gem prickle 使用 page.driver.browser.switch_to.alert 打开这些弹出窗口（这只是一个捷径）。

我安装的宝石是：

```
group :test do
  gem 'cucumber-rails'
  # database_cleaner is not required, but highly recommended
  gem 'database_cleaner'
  gem 'capybara'
  # To test email delivery with cucumber
  gem 'email_spec'
  # Rspec
  gem 'rspec-rails'
  gem 'rspec'
  # To create instance of objects in the database
  gem 'factory_girl_rails'
  # To generate random data
  gem 'faker'
  # To open pages with capybara
  gem 'launchy'

  #To test popups
  gem 'prickle'
  # To open web browser while testing and test javascript
  gem 'selenium'
end 
```

当我运行我的测试时，它不会在我的浏览器（firefox）中显示任何内容。它说“连接已重置”，当然水豚在页面中找不到任何元素。如果我删除该行：

```
Capybara.default_driver = :selenium 
```

来自 env.rb，没有 javascript 的测试可以正常工作，但是在尝试运行弹出窗口的步骤时，它说：

```
undefined method `switch_to' for #<Capybara::RackTest::Browser:0x00000005424cf8> (NoMethodError) 
```

我可以尝试什么？我已经花了很多时间尝试不同的方法，但没有一个有效。我也尝试了 webkit，但由于一个神秘的错误，我无法安装它。

# 更新以显示功能内容

```
 #language: es
    Característica: Eliminar usuario

    Antecedentes: Usuarios registrados

        Dado que los siguientes usuarios existen:

           | email                     | password      |
           | bstornelli@integra.la     | b12345        |
           | eliminame@integra.la      | e12345        |

        Y estoy autenticado como "bstornelli@integra.la"

    Escenario: Eliminación exitosa    
        Dado que estoy autorizado para "eliminar usuario"
        Cuando visito la página "ver usuario" para "eliminame@integra.la"
        Y presiono "Eliminar usuario"
        Entonces debería ver "¿Está seguro que desea eliminar el usuario eliminame@integra.la?" en un cuadro de diálogo
        Cuando confirmo el cuadro de diálogo
        Entonces debería estar en la página "listar usuarios"
        Y debería ver "El usuario 'eliminame@integra.la' ha sido eliminado exitosamente"
        Y no debería existir un "usuario" con "email" "eliminame@integra.la" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:31:18.650

当我的测试数据库没有迁移到最新时，我遇到了同样的问题，但是由于控制台中没有显示错误，所以发生的事情并不明显，我只是遇到了一个“连接重置”错误，就像你得到的那样。通过在 features/support/env.rb 中设置以下内容，我终于能够获得问题的堆栈跟踪

Capybara.app = Rack::ShowExceptions.new(YourRailsApp::Application)

# android - LibGDX 声音问题

> ID：12179462
> 
> 赞同：1
> 
> 时间：2012-08-29T13:47:18.440
> 
> 标签：android, libgdx, game-physics, audio

我正在使用 LibGDX 为 Android 和桌面开发游戏。我在播放声音时遇到问题。该游戏是迷宫式游戏，使用加速度计在设备上滚动球。当球击中边界或彼此时，会发出声音。体积是根据碰撞的线速度设置的。问题是，当球真正靠近边界时，它们会在很短的时间内反弹很多次。这最终导致主线程陷入困境，并且 UI 开始出现卡顿。在 log-cat 中，它说“降低采样率”或类似的东西，因为它无法处理负载。此外，当有一堆碰撞时，不再有碰撞后声音会继续播放。

我需要每个声音独立于其他声音播放。我在想，也许为声音创建一个单独的线程。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:50:29.867

我现在正在处理我的游戏声音。最后一个 LibGDX 版本可以同时播放很多声音。如果您打算同时播放它们，您需要做的就是控制播放的最大声音数量（更多声音需要更多设备资源）并降低播放次数最多的采样率和质量。您可以使用 Audacity 重新采样您的声音。尝试将其保存为质量较低的 OGG 文件，然后重试。此外，您可以将声音创建为静态，并从同一个声音中多次播放，而无需创建新声音。

希望这对您有所帮助。

# c# - 如何从 SQL 服务器（一次性）填充一组实体框架代码第一个 POCOS？

> ID：12179463
> 
> 赞同：0
> 
> 时间：2012-08-29T13:47:18.673
> 
> 标签：c#, sql, entity-framework, entity-framework-4, code-generation

我们有自定义代码，通过创建一些对象并将它们保存到 DatabaseContext 来擦除和初始化我们的测试数据库（我们将迁移用于模式，但不用于数据）。但是，我们的测试人员创建了更多数据，并且不想在我们进行干净部署时丢失她的测试数据。因此，我必须弄清楚如何将数据从 SQL Server 获取到 C#（一次性），所以它可以与我们的数据初始化程序一起运行。

我最初的方法是将数据手动复制粘贴到 C# 对象初始化程序中，但这很快就过时了，因为要复制 100 多行。

我的第二种方法是在 SQL Server 中使用 SELECT 语句创建对象，将 C# 初始化程序语法混合到 SQL SELECT 语句中，然后将 SQL Server 生成的 C# 字符串复制回 Visual Studio。

虽然第二种方法看起来不错，但我想知道是否有一个明显的解决方案（除了每次都简单地运行 SQL INSERT 脚本）我错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:16:35.047

我最终采用了问题中提到的方法。在 SQL Select 语句中生成 C# 对象初始化程序。

我收集了一些东西，最明显的是：

*   CAST AS VARCHAR 用于所有数字字段（尽管如果您不这样做，SQL Server 会给出错误）。

*   日期：转换为 VARCHAR 并用 DateTime.Parse() 包围

*   使用 CASE 语句将 SQL 布尔值 (1/0) 转换为字符串形式的真/假。

*   枚举：生成演员表。

*   如果使用自动编号 ID，请记住在实例名称前面加上一个字母。初始化后将对象添加到 DataContext 中。

不要害怕在生成的代码中引用您的 C# 代码。无论如何，它都不会在 SQL Server 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:55:33.893

我只想创建一个 SQL 脚本来重新创建数据库中的数据。
您可以通过命令行或通过 C# 运行此脚本...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:57:57.140

你确实有另一个选择。备份测试数据库，将该备份加载到与目标数据库相同的服务器上的新数据库中，并在迁移完成时（包括清除数据库）发出跨数据库`INSERT...SELECT`语句。

这种方法的好处是，如果测试团队获得了他们喜欢的另一个版本，您可以进行备份并覆盖暂存数据库，从而允许他们不断构建更多数据。

# opengl - SOIL OpenGL 库在类内部崩溃

> ID：12179464
> 
> 赞同：0
> 
> 时间：2012-08-29T13:47:26.953
> 
> 标签：opengl, textures, texture-mapping, soil

我正在使用 OpenGL 开发一个简单的 3D 模型加载器，我想添加纹理支持。但是，不想不必要地重写图像库，我下载了我在 NeHe 纹理映射教程中学到的 SOIL（简单 OpenGL 图像库）。它有一些非常有用的函数来处理多次加载图像并将它们传递给 OpenGL。

问题是这样的：在NeHe教程代码中，SOIL函数

```
SOIL_load_OGL_texture(char *, param,param,param) 
```

完全按照承诺，多边形映射到正确的图片。但是，我创建了一个加载 OBJ 和 MTL 文件（3D 模型文件）的类。当我尝试使用 SOIL 函数在此类中加载纹理时，我的程序崩溃了。

*   我正在使用带有 Code::Blocks 的 GNU C++（我也在 Dev-C++ 中尝试过这段代码）
*   我使用 -g -Wall 没有收到来自编译器的错误或警告。
*   我已将所有内容正确链接并包含在我的项目中（如果我复制/粘贴 NeHe 代码，它会正常运行）。
*   SOIL 命令在任何类中都不起作用（我尝试创建另一个只执行 SOIL 函数的类，但我遇到了同样的问题）。
*   传递给函数的文件路径都是正确的。我尝试过相对和绝对，所有格式的正斜杠和反斜杠。我将在 NeHe 代码中有效的绝对路径复制并粘贴到我的代码中，但它不起作用。
*   我的其余代码工作正常 - 我可以使用环境/漫反射/等渲染我的形状。颜色和其他设置正确应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:27:35.370

听起来您在调用该函数时几乎没有有效的 OpenGL 上下文。

您确定只有*在*您的 opengl 上下文初始化后才调用 SOIL 吗？（例如，没有在程序初始化时构造的对象的静态构造）。一个快速检查的方法是在你的 opengl 初始化上设置一个断点，看看你是否命中了 BP 或者你的程序是否首先崩溃。

此外，请确保 SOIL 调用与您的 opengl 上下文位于同一线程上。

# blogger - 在 Blogger 动态视图中添加脚本标记

> ID：12179467
> 
> 赞同：3
> 
> 时间：2012-08-29T13:47:45.067
> 
> 标签：blogger, blogger-dynamic-views

我有一个以“动态视图”为模板的博客（带有侧边栏/马赛克和其他选项的博客）。我试图使用 GIST/Github 作为我的默认语法荧光笔，因为它就像一个魅力。

但是，博客 POST 中包含的“脚本”标签不会被渲染。有没有人设法将脚本标签添加到他们的动态视图模板中？

（显然还有其他嵌入语法高亮的方法，但我觉得 Gist 是其中最优雅的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T09:49:52.257

这个链接对我来说非常好

[http://blog.moski.me/2012/01/gist-with-bloggers-dynamic-views.html](http://blog.moski.me/2012/01/gist-with-bloggers-dynamic-views.html)

在每篇博文的末尾，使用 HTML 编辑器添加以下代码：

```
<script src="https://raw.github.com/moski/gist-Blogger/master/public/gistLoader.js" type="text/javascript"></script> 
```

现在要包含任何 gist 模板，只需在您的博客文章中的任何位置添加以下内容。

```
<div class="gistLoad" data-id="GistID" id="gist-GistID">Loading ....</div> 
```

将“GistID”替换为您的 gist id。

# javascript - 如何使用javascript在另一张图像上添加图像

> ID：12179468
> 
> 赞同：3
> 
> 时间：2012-08-29T13:47:53.787
> 
> 标签：javascript, jquery

我有一个小要求：我需要通过 javascript 在另一个图像上添加图像。请给我建议！

![一只鸡](../Images/fc2886b822ebd09fa590c15871437d74.png)

```
function sampleImage()
{     
    document.getElementById('img1').innerHTML='<img src="C:\Users\rajasekhark\Desktop\assets\images\Cock.png" />';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:53:50.437

您需要将两个图像包含在 a 中`<div>`，然后使用以下 CSS 属性：

```
div {
    position: relative;
}

​#img2 {
    position: absolute;
    top: 100px;
    left: 100px;
} 
```

见[http://jsfiddle.net/C8hh4/](http://jsfiddle.net/C8hh4/)

第二个图像必须是第一个图像的*兄弟*，它不能是后代，因为那不是合法的 HTML。`<div>`需要有`relative`position的`#img2`绝对位置将相对于*没有*默认`static`位置的最近祖先计算。

的值`top`应该是外部图像高度和内部图像高度之间差异的一半，左侧/宽度也是如此。

如果您的内容是静态的，请手动计算这些值。如果是动态的，使用JS设置样式：

```
var img1 = $('#img1')[0];
var img2 = $('#img2')[0];

var top = 0.5 * (img1.height - img2.height);
var left = 0.5 * (img1.width - img2.width);

$(img2).css({top: top, left: left}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:52:40.307

为什么是 JavaScript？当然，您可以使用画布并将它们相互绘制，但我建议使用简单的 CSS：

```
<img
  style="padding: 20px 7px, background: url('/some/frame.png')"
  src="/cock.jpg"
  width="50px" height="40px"
/> 
```

您可以为此使用一个类，内联样式更短。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:53:42.667

您可以使用相对定位。将图像堆叠在一起，设置`position:relative;top:VALUE;` 值应为 -HalfHeightOfBackgroundImage-HalfHeightOfForegroundImage。

另一种方法是将前景图像包装在 div 中并将背景图像设置为`background-image`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:51:25.663

你应该这样做（我看到了 jquery 标签）：

```
$("#img1 img").first().prop("src", "C:\Users\rajasekhark\Desktop\assets\images\Cock.png"); 
```

和一个建议：不要使用本地磁盘的完整路径......

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-29T13:50:41.327

jQuery 选项将是

```
$("#img1").prop("src","blahblah.jpg"); 
```

虽然我不太明白你的问题。

如果您的意思是您需要更改悬停时的图像，那么这可能会有所帮助...

```
$("#img1").hover(
    function () {
    $(this).prop("src","newImage.jpg");
    }, 
    function () {
    $(this).prop("src","originalImage.jpg");
}); 
```

编辑：

好的...您需要的是一个以绿色抽认卡为背景图像的 div。并将公鸡图像放在该 div 中，但设置为 display:none;

然后在悬停时只显示公鸡的图像。

```
$("#containerDiv").hover(
    function () {
    $(this).find("img").show();
    }, 
    function () {
    $(this).find("img").hide();
}); 
```

# javascript - 如何在 TiddlyWiki 中制作列表格式化程序

> ID：12179469
> 
> 赞同：0
> 
> 时间：2012-08-29T13:47:54.473
> 
> 标签：javascript, html, tiddlywiki

我正在使用 TiddlyWiki，我想为列表制作一个自定义格式化程序。基本上我有一个名为的html标签`popuplist`，我想用`li`标签包围标签内的每一行并删除popuplist标签。有人可以告诉我该怎么做吗？我可以使用 jQuery，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:48:34.900

您可以在 TiddlyWiki HTML 文件中搜索 popuplist 并使用 li 标签手动换行。然后，您搜索并用空字符串替换 popuplist 标记以在整个文档中将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:32:11.660

这是一个可能适用于包装的答案：[https ://stackoverflow.com/a/5744244/258482](https://stackoverflow.com/a/5744244/258482)

```
var x = $('#xxx').wrapAll('<div></div>').parent().html(); 
```

或者

```
var x = $('#xxx').clone().wrap('<div></div>').parent().html(); 
```

如果我没记错的话，我最终走了另一条路，比如 tiddly markup 或类似的东西。

# twitter-bootstrap - 试图让 Scrollspy 工作

> ID：12179470
> 
> 赞同：1
> 
> 时间：2012-08-29T13:47:56.377
> 
> 标签：twitter-bootstrap

我已经阅读并遵循了这个论坛的一些例子，但我根本无法让 scrollspy 工作。

我担心我可能会错过一些愚蠢的东西，这是我的 jsFiddle：

[http://jsfiddle.net/pickledegg/2DV5L/9/](http://jsfiddle.net/pickledegg/2DV5L/9/)

这是一个有效的方法，[http://jsfiddle.net/hajpoj/SZYKM/](http://jsfiddle.net/hajpoj/SZYKM/)希望有人能告诉我我的怎么了！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:36:10.957

您需要将 ScrollSpy 插件附加到*触发***滚动**事件的元素，在您的情况下，它不是正文。

```
<div class="stuff" data-spy="scroll"> 
```

### [JSFiddle](http://jsfiddle.net/mmfansler/2DV5L/10/)

# oracle - 将数据库权限授予用户

> ID：12179473
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:48:12.310
> 
> 标签：oracle, grant

我想向 Oracle 中的特定用户授予选择权限。它可以在mysql中使用以下查询

```
GRANT SELECT, INSERT, DELETE ON database TO username@'localhost' IDENTIFIED      
BY 'password'; 
```

有什么方法可以在 Oracle 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:56:18.243

MySQL 所称的“数据库”更类似于 Oracle 所称的“模式”。Oracle 无法将架构中所有对象的权限授予特定用户，您必须单独授予每个对象的权限。您可以使用一些动态 SQL 来简化初始授权

```
BEGIN
  FOR x IN (SELECT *
              FROM dba_tables
             WHERE owner = <<name of schema>>)
  LOOP
    EXECUTE IMMEDIATE 'GRANT select, insert, delete ON ' || 
                         x.owner || '.' || x.table_name ||
                         ' TO <<username>>';
  END LOOP;
END; 
```

但是，每次在模式中创建新对象时，都需要将新对象的相同权限授予用户，或者需要重新运行上面的 PL/SQL 块。如果您真的愿意，DDL 触发器可以提交一个作业，该作业会在创建新对象时自动授予权限，但不特别推荐这样做。

从可管理性的角度来看，您通常会创建一个角色，该角色将被分配所有这些特权，然后[将该角色分配给实际需要这些 DML 特权的任何用户集](http://docs.oracle.com/cd/E11882_01/network.112/e16543/authorization.htm)。这使您可以轻松地将相同的角色分配给组织中需要相同权限集的每个人，而不是`n`为`m`用户管理对象权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:49:41.110

是的，它带有 GRANT 语句： [Oracle 文档中的 GRANT](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9013.htm#SQLRF01603)

您必须首先使用[CREATE USER](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8003.htm#i2065278)创建一个用户。

# jquery - WordPress中的Jquery没有运行

> ID：12179480
> 
> 赞同：0
> 
> 时间：2012-08-29T13:48:25.660
> 
> 标签：jquery, wordpress

我正在尝试使用以下内容创建一个小型缩略图库：

这是我正在使用的代码：

[http://fiddle.jshell.net/Gkjx2/](http://fiddle.jshell.net/Gkjx2/)

它显然在 jsfiddle 中运行，但不在我的网页中，任何人都可以找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:53:32.093

您的页面上有一些错误，并且您的网站上没有“.active”。

**编辑**

确保您的代码是并行的。您的小提琴正在工作，因为代码在那里，但不在您的网站上。

好的，您的小提琴有一个 img 标签，但您的网站中没有一个...这就是我所说的并行，您正在搜索 .find() 不存在的东西。

小提琴：

```
<div id="imgHolder">
    <img src="http://www.whitegadget.com/attachments/pc-wallpapers/16215d1222951905-nature-photos-wallpapers-images-beautiful-pictures-nature-444-photos.jpg" alt="" width="400" height="400">        
</div> 
```

地点：

```
<div id="imgHolder">
</div> 
```

你的小提琴应该是这样的：

[http://fiddle.jshell.net/Gkjx2/1/](http://fiddle.jshell.net/Gkjx2/1/)

您的问题是 js 正在使用 find 在 imgHolder 中查找 img 标签，但没有，所以什么也没有发生。我建议添加您加载的第一张图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:54:00.773

首先：jQuery被包含两次

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script> 
```

和

```
<script type="text/javascript" src="http://www.neurosignsurgical.com/v2/wp-includes/js/jquery/jquery.js?ver=1.7.2"></script> 
```

删除一个并将另一个更新到最新版本，因为两者都已过时。

其次，我似乎无法在任何地方找到您的代码。

第三：在这种情况下，它比使用`children`更好`find`。在性能方面它会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:51:38.467

我不知道 Wordpress，但也许它正在使用其他 js-libs？在这种情况下，您的 $ 可能正在使用中。

尝试使用 jQuery(stuff) 而不是 $(stuff) 与 jQuery.noConflict(); 在你的脚本之上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:03:38.780

解决了：

```
jQuery(document).ready(function(){   
jQuery('.showImg').hover(function(){    

    var imgURL = jQuery(this).find('img').attr("src");    
    jQuery('#imgHolder').find('img').attr("src", imgURL);    
});
}); 
```

# c++ - 实际结构尺寸

> ID：12179481
> 
> 赞同：4
> 
> 时间：2012-08-29T13:48:26.273
> 
> 标签：c++, alignment, sizeof

我怎样才能知道实际的结构尺寸？使用 sizeof 返回对齐后的字节数。例如 ：

```
struct s {
               char c;
               int i
} 
```

sizeof(s) = 8; 我有兴趣获得没有对齐的字节大小，即 5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T13:54:04.347

结构体的实际大小是对齐后的结构体大小。我的意思是`sizeof`返回内存中结构的大小。如果你想有一个按字节对齐的结构，你应该告诉编译器这样做。例如这样的：

```
#ifdef _MSVC
#  pragma pack(push)
#  pragma pack(1)
#  define PACKED
#else
#  define PACKED            __attribute((packed))
#endif
struct byte_aligned {
    char c;
    int i;
} PACKED;
#ifdef _MSVC
#  pragma pack(pop)
#endif 
```

现在`sizeof(byte_aligned)`返回 5 和它在内存中的实际 5 个字节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:54:32.780

sizeof 返回实际的结构大小。

没有padding的大小有点无意义，因为编译器会插入自己觉得合适的padding。一些编译器支持关闭结构填充的编译指示，在这种情况下你应该使用它，但你可能会得到各种有趣的事情发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:08:14.453

您误解了文档。

> 使用 sizeof 返回对齐后的字节数

这是不正确的。**返回padding**`sizeof`之后的字节数，这不是一回事。

 **因此，如果您想知道“我的结构将占用多少空间”，`sizeof()`那么就是告诉您正确的答案。**

# jquery - 单击时隐藏元素

> ID：12179484
> 
> 赞同：0
> 
> 时间：2012-08-29T13:48:33.420
> 
> 标签：jquery

```
 $(document).ready(function()
    {
        $("#cover img").click(function(event)
        {
            var selected_script = $(this).attr('id');

            //alert(selected_script);
        //alert('#run_'+selected_script);

            $('#run_'+selected_script).hide();
        });
    });

<div>
    <img id="run_0" src="play.png" />
</div> 
```

上面的代码在单击时不会隐藏图像。当我发出警报时，我得到了正确的 ID 值。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:51:52.617

你不是想把它隐藏在上面的代码中，只是做一个简单的`.hide()`

```
$("#cover img").on('click', function(e) {
    $(this).hide();

    // If you want to know why your above code isn't working, it is because you have:
    // $('#run_'+selected_script).hide();
    // selected_script already has the entire ID of run_0, etc
    // so this is outputting $('#run_run_0').hide(); why it doesn't work

    $('#' + selected_script).hide(); // this outputs $('#run_0').hide(), and will work!
}); 
```

[jsFiddle 演示](http://jsfiddle.net/uXR5S/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:51:54.510

```
 $(document).ready(function()
    {
        $("#cover img").click(function(e)
        {
            $(this).hide();
        });
    });

<div id='cover'>
    <img id="run_0" src="play.png" />
</div> 
```

1.  您的“selected_script”变量将包含 id。为什么还要在前面加上“运行”？
2.  您只希望#cover id 中的 img 具有 onclick。您的 div（或父元素）应具有“封面”ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:52:15.437

```
$(document).ready(function()
    {
        $("#cover img").click(function(event)
        {    
            $(this).hide();
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:52:22.420

你可以直接隐藏它

```
$(this).hide(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:59:26.097

这就是您的代码不起作用的原因：http: [//jsfiddle.net/prsjohnny/wp5Bs/](http://jsfiddle.net/prsjohnny/wp5Bs/)

但是（如果你是 jQuery 新手）你已经有了你要找的元素，那为什么还要再找呢？

这效率更高。

```
$(document).ready(function()
{
    $("#cover img").click(function(event)
    {
        // just use $(this) instead of $('#'+selected_script) and 
        // having jquery traverse the DOM again looking for it.
        $(this).hide();
    });
});​ 
```

# asp.net-mvc - 我想构建 asp.net mvc 应用程序，我不想依赖 ID

> ID：12179489
> 
> 赞同：-3
> 
> 时间：2012-08-29T13:48:54.573
> 
> 标签：asp.net-mvc

我有一个名为 country 的表，它有 3 列：

```
ID: generated primary key
Country_Code : not primary key but it is Unique and in most of the time I will
use it Instead of ID.
Country_Name : the long name of the country 
```

我不能从上面改变任何东西，这是业务需求。

我使用 asp.net mvc 生成 CURD 功能，然后我更改了代码，使其依赖于 Country_Code 而不是 ID，例如我的详细信息页面 url 如下所示：

```
something.com/country/detail/ss 
```

我成功读取、写入和删除，但在编辑中我未能通过验证语句（ModelState.IsValid），问题是当数据来自我的编辑页面时，ID 始终为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:52:42.160

您可以创建一个 HiddenFor 以在将 ID 发布到控制器时保存它。

# xml - 验证 XML 所需的 XSD 文件帮助

> ID：12179498
> 
> 赞同：0
> 
> 时间：2012-08-29T13:49:11.920
> 
> 标签：xml, xsd, xml-validation, xsd-validation

我在编写用于验证特定 XML 格式的 xsd 文件时遇到问题。XML 格式如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<p:customers xmlns:p="http://www.w3schools.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3schools.com NewXMLSchema.xsd ">
<p:customer>
   <p:name salutation="Mr."/>
   <p:age>25</p:age>
   <p:discount>6</p:discount>
</p:customer>
<p:customer>
   <p:name salutation="Ms."/>
   <p:age>35</p:age>
   <p:discount>10</p:discount>
</p:customer>
........
........
</p:customers> 
```

客户数量会有所不同；它可能是一个或多个。

这是我想出的用于验证此 XML 的 XSD：

```
<xs:complexType name="customerName">
    <xs:attribute name="salutation" type="xs:string" default="Mr."></xs:attribute>
</xs:complexType>

<xs:simpleType name="customerAge">
    <xs:restriction base="xs:integer">
        <xs:minInclusive value="18"></xs:minInclusive>
        <xs:maxInclusive value="60"></xs:maxInclusive>
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="customerdiscount">
    <xs:restriction base="xs:integer">
        <xs:minInclusive value="5"></xs:minInclusive>
        <xs:maxInclusive value="30"></xs:maxInclusive>
    </xs:restriction>
</xs:simpleType>

<xs:complexType name="customer">
    <xs:sequence>
        <xs:element name="name" type="customerName"></xs:element>
        <xs:element name="age" type="customerAge"></xs:element>
        <xs:element name="discount" type="customerdiscount"></xs:element>
    </xs:sequence>
</xs:complexType>

<xs:element name="customers">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="customer" type="customer"></xs:element>
            <xs:element name="customer" type="customer"></xs:element>
            <xs:element name="customer" type="customer"></xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

在上述 XSD 中，我面临一些问题，需要解决方案：

1）我希望名字是这样的：

```
<name salutation="Mr.">XYZ NAme</name> 
```

2) 客户名称可以是一个或多个。在上面的代码中，我使用了序列，因此可以有 3 个并且只有 3 个客户。这件事我需要纠正。

请帮助我解决 XSD 中的这两个问题。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:41:58.303

我希望这有帮助：

1）您可以将 xs:string 扩展为具有属性的复杂类型：

```
 <xs:element name="name">
   <xs:complexType>
     <xs:simpleContent>
       <xs:extension base="xs:string">
         <xs:attribute name="salutation" type="xs:string"/>
       </xs:extension>
     </xs:simpleContent>
   </xs:complexType>
 </xs:element> 
```

2）您可以使用 minOccurs 和 maxOccurs：

```
<xs:element name="customer" type="customer" minOccurs="1" maxOccurs="unbounded"/> 
```

另外，我认为您需要在顶部指定架构的目标命名空间：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified"
           targetNamespace="http://www.w3schools.com"
           xmlns:p="http://www.w3schools.com"> 
```

并以 p 为类型引用前缀（因为模式定义的所有类型都在目标命名空间中）：

```
 <xs:element name="age" type="p:customerAge"/>
 <xs:element name="discount" type="p:customerdiscount"/>
 <xs:element name="customer" type="p:customer" minOccurs="0" maxOccurs="unbounded"/> 
```

通过这些更改，我可以成功验证上面的文档（删除了点）。

# ios - iOS 提醒 App 如何允许自动换行到 TableView 中的下一行？

> ID：12179500
> 
> 赞同：0
> 
> 时间：2012-08-29T13:49:22.727
> 
> 标签：ios, uitextfield

我在我的 iPhone 上使用 iOS 提醒应用程序，我注意到在 tableview 中它允许您输入可以换行的文本并继续输入文本以进行提醒。我注意到单元格的高度会发生变化以适应提供的提醒文本的大小。我的问题是我知道这可以用 UILabel 来完成，但是你不能在 UILabel 中编辑和输入文本可以吗？所以它必须是 UITextField，但我认为 UITextField 不允许单词换行？我以为它只是继续缩小自己在一条线上？那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:52:17.503

它很可能使用`UITextView`允许多行文本的 a 。然后，您可以`UITableViewCell`通过查看 的委托方法来更改文本换行到下一行时的高度`UITextView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:07:06.150

您是否尝试过 UITextView，它会为您自动换行，但要自动调整表格单元格的高度，可能必须使用 textViewDelegate didReplaceString 方法。

```
// goes inside the UITextView didReplaceString method
// assumes expectedTextSize is a CGSize struct (like this CGSize expectedTextSize)
expectedTextSize = [myTextView.text sizeWithFont:[UIFont fontWithName:"Arial" size:12] constrainedToSize:CGSizeMake(200, 999999) lineBreakMode:UILineBreakModeWordWrap];

// then in your tableView:heightForRow: table view delegate method
return expectedTextSize.height; 
```

# java - Java 数学 DescriptiveStatistics 删除值

> ID：12179501
> 
> 赞同：0
> 
> 时间：2012-08-29T13:49:25.773
> 
> 标签：java, statistics, esper

我是 Java 新手，一直在使用 Esper CEP 引擎。然而，这个问题与 Esper 无关，它更像是一个 Java 问题。

首先，我的课：-

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.commons.math3.stat.descriptive.DescriptiveStatistics;

import com.espertech.esper.epl.agg.AggregationSupport;
import com.espertech.esper.epl.agg.AggregationValidationContext;

public class CustomPercentiles extends AggregationSupport {
    private List<Double> numbers = new ArrayList<Double>();

    public CustomPercentiles(){
        super();
    }

    public void clear() {
        numbers.clear();
    }

    public void enter(Object arg0) {
        Double value = (Double) (double) (Integer) arg0;
        if (value > 0){
            //Not interested in < 1
            numbers.add(value);         
        }
    }

    public void leave(Object arg0) {
        Double value = (Double) (double) (Integer) arg0;
        if (value > 0){
            //Not interested in < 1
            numbers.remove(value);          
        }
    }

    public Object getValue() {
        DescriptiveStatistics stats = new DescriptiveStatistics();
        Map<String, Integer> result = new HashMap<String, Integer>();
        for (Double number:numbers.subList(0, numbers.size())){
            stats.addValue(number);     
        }
        result.put("median", (int) stats.getPercentile(50));
        result.put("pct90", (int) stats.getPercentile(90));
        result.put("pct10", (int) stats.getPercentile(10));
        result.put("mean", (int) stats.getMean());
        result.put("std", (int) stats.getStandardDeviation());

        return result ;
    }

    public Class getValueType() {
        return Object.class;
    }

    @Override
    public void validate(AggregationValidationContext arg0) {
        // TODO Auto-generated method stub
    }

} 
```

基本上，Esper 会根据与此处无关的逻辑随时调用 enter(value) 和 leave(value)。它调用 getValue() 来获取计算结果。

因为我想计算百分位数，所以我需要所有可用的数字来处理它。为此，我将其存储在名为 numbers 的全局列表中，并在 getValue() 中将所有数字放入[DescriptiveStatistics](http://commons.apache.org/math/apidocs/org/apache/commons/math/stat/descriptive/DescriptiveStatistics.html)实例中，然后处理我需要的统计信息。

我的假设是，每次我将列表作为新的 DescriptiveStatistics 对象时，它都需要进行排序。有什么方法可以维护一个类似 DescriptiveStatistics 的对象作为我的全局对象？

我使用 ArrayList vs DescriptiveStatistics 作为我的全局对象的唯一原因是 DescriptiveStatistics 没有删除方法。即我不能按值删除对象。

实际上，在任何给定时间都有数百个此类实例在运行，并且每 1 到 10 秒都会调用每个实例的 getValue()。我目前没有任何性能问题，但正在寻找一些优化帮助以避免将来出现问题。

替代解释：-

我在这里做的是维护一个数字列表。Esper 会多次调用 enter() 和 leave() 方法来告诉我哪些数字应该保留在列表中。在我的情况下，这是基于时间的聚合。我告诉 esper 我想根据最后 1 分钟的数字进行计算。

```
So on 00:00:00 esper calls enter(10)
my numbers becomes [10]
So on 00:00:05 esper calls enter(15)
my numbers becomes [10, 15]
So on 00:00:55 esper calls enter(10)
my numbers becomes [10, 15, 10]
So on 00:01:00 esper calls leave(10)
my numbers becomes [15, 10]
So on 00:01:05 esper calls leave(15)
my numbers becomes [15] 
```

现在，在此期间 getValue() 可能已被多次调用。每次调用它时，都会根据数字的当前内容返回计算结果。

getValue() 计算第 10、50 和 90 个百分位数。为了计算百分位数，DescriptiveStatistics 需要对数字进行排序。（100 个数字的第 10 个百分位将是排序后列表的第 10 个数字。）。

所以我正在寻找一种能够从 DescriptiveStatistics 实例中取出任意数字的方法。或者向其他一些库寻求推荐，这些库可以给我中位数和百分位数，同时能够在知道值的同时从列表中取出一个数字。

DescriptiveStatistics 有一个 removeMostRecentValue()，但这不是我想要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:49:57.320

据我了解，您正在寻求一种使用[DescriptiveStatistics](http://www.koders.com/java/fid43647D11FB2F898044E290450F139DC892BA0D19.aspx?s=IsNa)类作为列表的方法，而不是“数字”。这意味着，您希望从 DescriptiveStatistics 变量中动态添加和删除数字。

据我所知，没有比你现在做的更好的方法了。

在再次计算百分位数之前，您确定需要该功能从列表中删除特定数字吗？它不总是新的数字吗？

这听起来有点像您想学习更多 Java 基础知识。

无论如何，由于我无法真正为您的问题提供合格的答案，我想我至少会帮助您更正一些代码，以遵循更好的做法：

```
public class CustomPercentiles extends AggregationSupport {
    private List<Double> numbers = new ArrayList<Double>();

    //Methods that are inherited from super-classes and interfaces
    //should have the "@Override" annotation,
    //both for the compiler to check if it really is inherited,
    //but also to make it more clear which methods are new in this class.
    @Override    
    public void clear() {
        numbers.clear();
    }

    @Override
    public void enter(Object value) {
        double v = (double) value;
        if (v > 0){
            numbers.add(v);            
        }
    }

    @Override
    public void leave(Object value) {
        double v = (double) value;
        if (v > 0){
            numbers.remove(v);            
        }
    }

    @Override
    public Object getValues() {
        DescriptiveStatistics stats = new DescriptiveStatistics();
        Map<String, Integer> result = new HashMap<String, Integer>();
        //It is unnecessary to call number.subList(0, numbers.size())
        //since it will just return the entire list.
        for (Double number : numbers){
            stats.addValue(number);        
        }
        result.put("median", (int) stats.getPercentile(50));
        result.put("pct90", (int) stats.getPercentile(90));
        result.put("pct10", (int) stats.getPercentile(10));
        result.put("mean", (int) stats.getMean());
        result.put("std", (int) stats.getStandardDeviation());

        return result ;
    }

    //Judgning from the API of AggregationSupport,
    //I would say this method should return Double.class
    //(it basically seems like a bad way of implementing generics).
    //Are you sure it should return Object.class?
    public Class getValueType() {
        return Object.class;
    }

    @Override
    public void validate(AggregationValidationContext arg0) {
        // TODO Auto-generated method stub
    }

} 
```

# javascript - 升级到 Ember 1.0 计算属性不再在视图中工作

> ID：12179510
> 
> 赞同：2
> 
> 时间：2012-08-29T13:50:12.090
> 
> 标签：javascript, ember.js

我相信我从 0.97 升级，甚至使用了弃用警告告诉我的配置设置，但这并没有阻止我的应用程序在升级时完全中断

我的车把代码有这个

```
<script type="text/x-handlebars" data-template-name="say-hello">
    {{name}}</br>
    {{hello}}
</script>​ 
```

我的视图代码是这样的

```
App = Ember.Application.create();

App.myView = Ember.View.create({
    templateName: 'say-hello',
    nameBinding: 'App.arrayProxy.name',
    helloBinding: 'App.arrayProxy.hello',
}).append();

App.arrayProxy = Ember.ArrayProxy.extend({
    name: "test",
    hello: function(){
      return 'hello ' + this.get('name')
    }.property('name')
}) 
```

Niether 属性显示在视图中。就像绑定甚至不再起作用一样。即使我将 console.log 添加到 hello 它甚至都不会被调用。由于某种原因，在 ember 1.0 中处理的属性完全不同，这是一个非常大的 PITA。如果我必须添加或删除某些内容，是否有人对我如何在最新版本中执行此操作有任何见解？

更新：这是一个 jsfiddle 来展示它是如何不起作用的[http://jsfiddle.net/664H9/](http://jsfiddle.net/664H9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:09:33.000

您的 jsfiddle 中有三件事不起作用：

*   附加视图。对我来说，最好声明一个默认模板（没有数据模板名称），并引用其中的视图。Ember 将为您创建视图

*   从 1.0 pre 开始，要将视图的属性调用到模板中，您必须在它们前面加上`view`

*   您的绑定无法工作，因为您没有创建数组代理的实例，而只是创建了一个类（我认为即使在 0.9.7 中，这也不应该工作。

这是一个有效的 jsfiddle：http: [//jsfiddle.net/Sly7/664H9/22/](http://jsfiddle.net/Sly7/664H9/22/)

```
<script type="text/x-handlebars">
  {{view App.MyView}}
</script>

<script type="text/x-handlebars" data-template-name="my-view">
  {{view.name}}</br>
  {{view.hello}}
</script>​ 
```

```
App = Ember.Application.create();

App.ApplicationView = Ember.View.extend({
  nameBinding: 'App.arrayProxy.name',
  helloBinding: 'App.arrayProxy.hello',
});

App.arrayProxy = Ember.ArrayProxy.create({
  name: "test",
  hello: function(){
    return 'hello ' + this.get('name')
  }.property('name')
});

App.initialize(); 
```

​</p>

# javascript - 当在其中设置空格时，javascript会中断

> ID：12179513
> 
> 赞同：0
> 
> 时间：2012-08-29T13:50:31.603
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中的多行代码中拆分字符串？](https://stackoverflow.com/questions/508269/how-do-i-break-a-string-across-more-than-one-line-of-code-in-javascript)

嗨，我是 javascript 的新手，我正在努力让它工作。

基本上一切正常，但只要其中有任何空间，它就会中断。

它从数据库中提取一个文本字符串，这很好，直到有如下空格：

```
var getHtml = '<div class="counterwrap"><div class="countertitle"><h1><?php echo $ublunderconstructioninfo->title ; ?></h1></div><div class="counter"><div class="counternumbers"><div id="counterdays"></div><p>Days</p></div><div class="counternumbers"><div id="counterhours"></div><p>Hours</p></div><div class="counternumbers"><div id="counterminutes"></div><p>Minutes</p></div><div class="counternumberslast"><div id="counterseconds"></div><p>Seconds</p></div></div><div class="countertext">this is where some text goes</div></div>';
            $("body").html(getHtml); 
```

现在，如果有这样的空间，那么它会中断：

```
 var getHtml = '<div class="counterwrap"><div class="countertitle"><h1><?php echo $ublunderconstructioninfo->title ; ?></h1></div><div class="counter"><div class="counternumbers"><div id="counterdays"></div><p>Days</p></div><div class="counternumbers"><div id="counterhours"></div><p>Hours</p></div><div class="counternumbers"><div id="counterminutes"></div><p>Minutes</p></div><div class="counternumberslast"><div id="counterseconds"></div><p>Seconds</p></div></div><div class="countertext">this is where some text goes

but when there is a linebreak

like this it breaks
</div></div>';
            $("body").html(getHtml); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:54:52.607

这是因为 javascript 中的字符串不能分成多行。

相反，请执行以下操作：

```
var SomeString = "line 1\n" + 
   "line 2\n" + 
   "line 3"; 
```

或者

```
var SomeString = "line 1\
    line 2\
    line 3"; 
```

# c# - 如何在 C# 中创建语音识别控制台计算器？

> ID：12179514
> 
> 赞同：1
> 
> 时间：2012-08-29T13:50:39.840
> 
> 标签：c#, console, calculator, voice-recognition

我创建了一个简单的 C# 控制台计算器，我想添加语音识别来识别人声。

示例：如果我想添加两个数字，我会通过我的声音告诉程序添加两个数字，然后它会进行计算。但我不知道该怎么做。这是代码

```
class Program
{
    static void Main(string[] args)
    {
        int num1;
        int num2;
        string operators;
        float ans;

        Console.Write(" first integer: ");
        num1 = Convert.ToInt32(Console.ReadLine());
        Console.Write("enter a operator (+, -, /, *): ");
        operand = Console.ReadLine();
        Console.Write("enter the second integer: ");
        num2 = Convert.ToInt32(Console.ReadLine());
        switch (operators)
        {
            case "-":
                answer = num1 - num2;
                break;

            case "+":
                answer = num1 + num2;
                break;

            case "/":
                answer = num1 / num2;
                break;

            case "*":
                answer = num1 * num2;
                break;

            default:
                answer = 0;
                break;
        }

        Console.WriteLine(num1.ToString() + " " + operators 
                                 + " " + num2.ToString() + " = " + ans.ToString());
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:10:32.073

1.  您将需要包含`System.Speech`参考。
2.  当应用程序启动时，您需要发出代码来连接语音识别。**请注意，该`Text`属性可能已经包含您期望的表达式 - 类似于`1 * 2`if you speak `One times two`。**

# 语音识别代码

```
SpeechRecognizer rec = new SpeechRecognizer();
rec.SpeechRecognized += rec_SpeechRecognized;
void rec_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
    // parse the grammar here and perform your operations
    // write the result to the console
} 
```

# iphone - 在 NSString 中出现一个字符

> ID：12179518
> 
> 赞同：0
> 
> 时间：2012-08-29T13:50:46.297
> 
> 标签：iphone, objective-c, ios, nsstring

我正在谷歌搜索过去几个小时的 NSSting 操作方法。[并在这里](https://stackoverflow.com/questions/7504115/how-could-i-substring-an-nsstring-to-the-third-occurrence-of-a-character)发现了很多这样的堆栈溢出

我有一个字符串**"1800 Ellis St, San Francisco, CA 94102, USA"**。字符串可以有任意数量的 "," 。我必须在“，”之后取倒数第三个（旧金山）和最后一个（美国）子字符串。

并且输出应该是“ **San Franncisco USA** ”。

我有逻辑如何在我的脑海中做到这一点，但我正在努力实现它。

我尝试使用此代码获取字符串中最后三个“，”的位置。但这对我不起作用

```
 NSInteger commaArr[3];

        int index=0;   
        int commaCount=0;

        for(unsigned int  i =  [strGetCityName length]; i > 0; i--)
        {
            if([strGetCityName characterAtIndex:i] == ',')
            {

                commaArr[index]=i;
                index++;
                ++commaCount;
                if(commaCount == 3)
                {
                    break;
                }
            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:54:22.753

你可以这样做：

```
NSString *s = @"1800 Ellis St, San Francisco, CA 94102, USA";
NSArray *parts = [s componentsSeparatedByString:@","];
NSUInteger len = [parts count];
NSString *res;
if (len >= 3) {
    res = [NSString stringWithFormat:@"%@%@", [parts objectAtIndex:len-3], [parts objectAtIndex:len-1]];
} else {
    res = @"ERROR: Not enough parts!";
} 
```

将`componentsSeparatedByString:`在 处拆分字符串`,`，`stringWithFormat:`并将各部分重新组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:17:13.513

```
NSString *s = @"1800 Ellis St, San Francisco, CA 94102, USA";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^(?:[^,]*,)?\\s*([^,]*),\\s*(?:[^,]*),\\s*([^,]*)$" options:0 error:NULL];
NSString *result = [regex stringByReplacingMatchesInString:s options:0 range:NSMakeRange(0, [s length]) withTemplate:@"'$1 $2'"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:57:18.080

试试这个：

```
NSString *string = @"1800 Ellis St, San Francisco, CA 94102, USA";
NSArray *components = [string componentsSeparatedByString:@","];
NSString *sanFrancisco = [components objectAtIndex:components.count - 3];
NSString *usa = [components objectAtIndex:components.count - 1];
NSString *result = [sanFrancisco stringByAppendingString:usa]; 
```

# php - 针对查询的mysql搜索数据库

> ID：12179519
> 
> 赞同：0
> 
> 时间：2012-08-29T13:50:49.420
> 
> 标签：php, mysql

我正在寻找一种使用 MySql 将数据库值与给定查询进行比较的方法（而不是在数据库中搜索查询）

* * *

我将详细说明：我有一个表格，其中包含逗号分隔的关键字和每个关键字块的结果，例如：

第 1 列 第 2 列

奔驰、宝马、斯巴鲁汽车

万宝路、温斯顿香烟

* * *

今天我正在接受用户查询（例如 - Marlboroligt），你可以看到我是否会在数据库中搜索值“Marlboroligt”，我不会得到任何结果。

就此而言，我想从查询中的数据库中搜索“万宝路”并返回“香烟”

希望我的解释是足够的，这实际上是可能的:-)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:00:30.923

我看到以下可能的解决方案：

*   设置一个像[Sphinx](http://sphinxsearch.com/)这样的关键字搜索引擎，并使用它在你的数据库中搜索关键字
*   标准化您的数据库 - col1 必须包含唯一的关键字
*   使用*类似的*模式

    从 mytable 中选择 col2 where col1 like "%Marlboro%"

*like*会减慢您的应用程序的速度，并且可能会出现与子字符串相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:57:21.250

规范化对您的帮助最大。否则，此处讨论在逗号分隔的字段中的搜索：

[选择所有字段包含以逗号分隔的字符串](https://stackoverflow.com/questions/12149218/select-all-where-field-contains-string-separated-by-comma)

...并且要搜索“Marlboroligt”而不是“Marlboro Light”，您可以尝试查看`LEVENSHTEIN`函数，或者可能是 Soundex 编码（对于太大的钱来说，这看起来太小了，但话又说回来，也许...... ）。

# objective-c - NSManagedObject 子类的自定义初始化

> ID：12179522
> 
> 赞同：5
> 
> 时间：2012-08-29T13:50:56.343
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

如何`init`为`NSManagedObject`子类编写自定义代码？例如，我想要类似的东西`initItemWithName:Volume:`。where`Item`是`NSManagedObject`具有两个属性的子类，`name`而`volume`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:47:31.623

卡洛斯，

正如**Nenad Mihajlovic**建议的那样，您可以为此创建一个类别。

因此，例如，如果您有一个`Item`类，您可以创建一个名为的类别`Item+Management`并将创建代码放在那里。在这里你可以找到一个简单的例子。

```
// .h

@interface Item (Management)

+ (Item*)itemWithName:(NSString *)theName volume:(NSNumber*)theVolume inManagedObjectContext:(NSManagedObjectContext *)context;

@end

// .m

+ (Item*)itemWithName:(NSString *)theName volume:(NSNumber*)theVolume inManagedObjectContext:(NSManagedObjectContext *)context
{
    Item* item = (Item*)[NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:context];
    theItem.name = theName;
    theItem.volume = theVolume;

    return item;
} 
```

当您想创建新项目时，请执行导入

```
#import "Item+Management.h" 
```

并像这样使用

```
Item* item = [Item itemWithName:@"test" volume:[NSNumber numberWithInt:10] inManagedObjectContext:yourContext];
// do what you want with item... 
```

这种方法在应用程序开发过程中非常灵活且易于维护。

[您可以在斯坦福课程讲座 14](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)代码示例中找到更多信息。此外，还可以查看 Stanford 的 iTunes 上的免费视频（如果您有 Apple ID）。

希望有帮助。

PS 为了简单起见，我想`name`是 a`NSString`并且`volume`是 a `NSNumber`。因为`volume`使用`NSDecimalNumber`类型可能会更好。

# sql - 使用 VB .NET 插入行 SQL Server 影响数据时间字段

> ID：12179530
> 
> 赞同：0
> 
> 时间：2012-08-29T13:51:13.130
> 
> 标签：sql, sql-server, vb.net, ado.net, insert

我试图在驻留在 SQL Server 上的数据库中插入一行。我正在使用 VB .NET 和 ADO .NET 框架。我想要影响的表的结构如下所示：

```
 CREATE TABLE [dbo].[Users](
  [UserName] [nvarchar](80) NOT NULL,
  [Description] [nvarchar](600) NULL,
  [IDCategory] [int] NULL,
  [RegistrationDate] [datetime] NOT NULL,
  [CategoryFlag] [bit] NULL,
  [TypeFlag] [bit] NULL,
   ... 
```

我已经使用以下代码实现了这一点：

```
 <WebMethod()> _
   Sub insertElement()
     Dim conn As SqlConnection
     Dim sqlcmd As SqlCommand
     Dim res As Integer

     conn = New SqlConnection(Utilities.ConnectionString)
     sqlcmd = New SqlClient.SqlCommand()
     sqlcmd.Connection = conn
     sqlcmd.CommandType = CommandType.Text
     sqlcmd.CommandText = "insert into Users (UserName, RegistrationDate) values (@user, @date)"
     Dim param As SqlParameter
     param = New SqlParameter("@user", "myself")
     sqlcmd.Parameters.Add(param)
     param = New SqlParameter("@date", '2012/10/11 20:30:15')
     sqlcmd.Parameters.Add(param)

     Try
        conn.Open()
        res = sqlcmd.ExecuteNonQuery()
    Catch ex As Exception

    Finally
        sqlcmd.Dispose()
        conn.Close()
    End Try 
```

Utilities.ConnectionString 只是我创建的一个类，用于重新调整与我的数据库关联的 ConnectionString。

我试图做这样的事情，而不影响任何提交的数据时间并且它有效。但是上面的代码可能在数据时间管理上有一个错误，因为它不起作用。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:53:42.270

我不明白这一行如何

```
param = New SqlParameter("@date", '2012/10/11 20:30:15') 
```

甚至编译，但我想它应该读

```
param = New SqlParameter("@date", CDate("2012/10/11 20:30:15", CultureInfo.InvariantCulture)) 
```

使用`DateTime`值而不是 a `string`。

我认为您只需使用空`catch`块即可吞下异常。

* * *

尽管如此，您最好使用以下`using`语句：

```
using conn = New SqlConnection(Utilities.ConnectionString), sqlcmd = New SqlClient.SqlCommand()
    sqlcmd.Connection = conn
    sqlcmd.CommandType = CommandType.Text
    ...
    res = sqlcmd.ExecuteNonQuery()
End Using 
```

这将自动关闭/处理您的连接等。

# meta - 编程关键字的词库

> ID：12179532
> 
> 赞同：5
> 
> 时间：2012-08-29T13:51:21.733
> 
> 标签：meta

想象一下，有一个用于编程语言关键字和概念的 TheSaurus，它使用严格意义上的其他语言关键字或操作数的同义词和反义词来响应查询。询问“>=”，用户将看到“<=”作为反义词，“>”作为同义词（这是一个示例）。您希望找到哪个反义词来搜索“for each”一词？

如果这是OT，请告诉我。多年来，我与社区的步伐不太一致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-08T05:11:43.947

will 的反义词`foreach`是`fornone`，但因为它不是很有用，所以你不会在任何编程语言中找到它，除非你算上 Python`pass`或 a之类的东西`NOOP`。

然而， -loop在某些情况下`while`可以是同义词，并且循环确实与-loop 有直接的反义词（在 Ruby、Bash 和 Lisp 中可用）。同样，该语句与该语句存在一个反义词。`foreach``while``until``if``unless`

我不知道有任何相当完整的程序员词库可以回答此类和类似的问题，但是 Github 上有一些项目可以作为起点：

*   [https://github.com/tindzk/thesaurus](https://github.com/tindzk/thesaurus)
*   [https://github.com/wobh/lexicode](https://github.com/wobh/lexicode)
*   [https://github.com/imightbeinatree/what_the_function](https://github.com/imightbeinatree/what_the_function)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-15T04:19:30.300

“对于每个”没有反义词。你的问题让我想起了另一个谜语：“圆圈的反面是什么？”

# visual-studio-2010 - VS2010安装SAP水晶报表

> ID：12179538
> 
> 赞同：0
> 
> 时间：2012-08-29T13:51:35.783
> 
> 标签：visual-studio-2010, crystal-reports

问题是我已经在 VS2010 中安装了水晶报表的 sap 运行时引擎，但我无法在 VS 2010 中打开水晶报表文件。我不知道问题是什么。除了运行时引擎，我还需要安装其他文件吗？如果有，请通知并给我链接。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:20:33.267

在 .NET 中使用 CR 时，通常需要引用以下 DLL：

```
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T11:38:46.483

您需要安装 SAP Crystal Reports for Visual Studio 而不仅仅是运行时引擎。

# android - ListView 在手机和模拟器上的行为不同

> ID：12179539
> 
> 赞同：0
> 
> 时间：2012-08-29T13:51:36.640
> 
> 标签：android, android-emulator, android-listview, android-arrayadapter

我做了我的自定义 ArrayAdapter 以突出显示 ListView 的选定项。代码如下：

```
public class HeroListViewAdapter extends ArrayAdapter<Hero> {

public static int NO_POS = -1;

private List<Hero> heroes;
private int selected_pos = NO_POS;

public HeroListViewAdapter(Context context, List<Hero> heroes){
    super(context, R.layout.hero_list_item_view, heroes);
    this.heroes = heroes;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = GuiBuilder.createHeroListItemView(heroes.get(position),getContext(),parent,false);
    if(position == selected_pos){
        rowView.setBackgroundColor((rowView.getResources().getColor(R.color.list_item_selected_color)));
    }
    return rowView;
}

public void setSelectedPosition(int selected_pos){
    this.selected_pos = selected_pos;
}

public int getSelectedPosition(){
    return selected_pos;
}

public Hero getSelectedHero(){
    if(selected_pos>=0 && selected_pos<heroes.size())
        return this.getItem(selected_pos);
    else
        return null;
}

} 
```

其中方法修改内部成员以跟踪所选位置，getView 方法测试此内部成员的值，以便通过更改其背景来突出显示该项目。事物的使用方式如下：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
public void onItemClick(AdapterView<?> parent, View view, int position, long id){
   list_adapter.setSelectedPosition(position);
   listView.invalidate();
}
}); 
```

现在...在我的 2.2.1 Froyo（API 8 级）智能手机上一切正常。但是，当我单击一个项目时，在模拟器（API 16 级）上运行应用程序，背景不会改变。所以问题是：这是 API 问题（以及向后兼容性？）还是模拟器问题？我是否必须担心该应用程序可能无法在我的其他设备上按预期运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:31:11.253

它适用于智能手机的事实是纯粹的运气。这不是为了工作。

`listView.invalidate()`还不够。您应该在呼叫`notifyDataSetChanged()`后`list_adapter.setSelectedPosition(position)`呼叫您的适配器。

`invalidate()`只是重绘一个视图。在列表视图布局运行（而不是绘制运行）期间调用适配器`getView()`，它是`getView()`您更改背景的地方。

您也可以调用 listView.requestLayout() 而不是 listView.invalidate()。这很丑陋，但它应该可以工作。

# php - 共享服务器上的资产

> ID：12179542
> 
> 赞同：0
> 
> 时间：2012-08-29T13:51:46.143
> 
> 标签：php, apache, .htaccess, symfony

通过本教程，我成功地将我的应用程序安装在共享服务器上。我的问题是资产水平。在我的模板中，我像这样使用我的 CSS：

```
 {% stylesheets '@FrontHomeBundle/Resources/public/css/style.css'
               '@FrontHomeBundle/Resources/public/css/960.css' combine=true filter='?yui_css' output='css/comingSoon.css' %}
     <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}"/>
    {% endstylesheets %} 
```

JS 相同：

```
{% javascripts  'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'
                '@FrontHomeBundle/Resources/public/js/cufon-yui.js'
                '@FrontHomeBundle/Resources/public/js/Adobe_Caslon_Pro_600.font.js' filter='?yui_js' combine=true output='js/comingSoon.js' %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

在我的本地服务器上，它运行良好，但在我的共享服务器上，我无法访问目录“web/images/”中的 CSS 和 JS 或图像。

我想这是一个 .htaccess 问题，但我不知道是什么。

我将配置用于资产：

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    read_from: %kernel.root_dir%/../web
    write_to: %kernel.root_dir%/../web/cache
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        yui_js:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.6.jar
        yui_css:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.6.jar 
```

项目根目录下的 .htaccess：

```
SetEnv SHORT_OPEN_TAGS 0
SetEnv REGISTER_GLOBALS 0
SetEnv MAGIC_QUOTES 0
SetEnv SESSION_AUTOSTART 0
SetEnv ZEND_OPTIMIZER 1
SetEnv PHP_VER 5_3
AddType x-mapp-php5 .php

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/app.php [QSA,L]
</IfModule> 
```

web目录中的.htaccess：

```
SetEnv SHORT_OPEN_TAGS 0
SetEnv REGISTER_GLOBALS 0
SetEnv MAGIC_QUOTES 0
SetEnv SESSION_AUTOSTART 0
SetEnv ZEND_OPTIMIZER 1
SetEnv PHP_VER 5_3
AddType x-mapp-php5 .php

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]

</IfModule> 
```

你有解决问题的方法吗？您在共享服务器上如何显示图像和 CSS？

非常感谢您的帮助

# java - 分析 Java 应用程序所涉及的步骤

> ID：12179547
> 
> 赞同：-2
> 
> 时间：2012-08-29T13:51:55.237
> 
> 标签：java, spring, hibernate

请解释分析 JAVA 应用程序所涉及的步骤？这与使用的分析工具无关。剖析 java 应用程序的最佳实践和步骤是什么？专家，任何链接或文件都非常感谢。

谢谢。

* * *

谢谢。我想知道的是有很多可用的分析器，但是当我们为 OutOfMemory 或 Memoryleaks 等分析 Java 应用程序时。在分析应用程序时我们需要执行哪些步骤。假设我正在使用具有分析器的 VisualVM，我的应用程序中出现 OutOfMemory 错误，我的应用程序非常大，以至于我不知道问题到底出在哪里，即使记录器没有用（仅用于假设）。在这种情况下，我们如何通过使用 VisualVM 之类的分析器工具找出问题所在？我们需要研究哪些步骤？我们是否可以直接使用 CPU 和内存 profiling，还是需要去获取线程转储并分析它，然后创建一个堆转储分析它，然后再进行 CPU 和内存分析？我在这里有点困惑。因此，请指出正确的方向以及分析 JAVA 应用程序以查找内存泄漏所涉及的步骤。希望我对我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:48:49.567

本系列文章应该让您了解如何对相对复杂的 Java 应用程序进行认真的性能调查。

[http://www.jinspired.com/solutions/case-studies/scala-compiler](http://www.jinspired.com/solutions/case-studies/scala-compiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:08:01.127

根据您需要分析应用程序的原因，您必须决定需要哪些过滤器，如评论中所述，问题非常笼统，您应该提供一些更准确的信息以获得一些帮助。

尝试以下链接（在 Eclipse 中）：

[剖析 Java 应用程序简介](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html)

并检查[此列表](http://java-source.net/open-source/profilers)或开源 java 分析器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:22:10.877

我使用过 JProfiler 和 yourkit，但我对实际性能调整的输出不满意。目前我们已经切换到[java melody](https://code.google.com/p/javamelody/)。这不仅有助于开发和生产系统中的性能优化。Java melody 非常易于集成和配置，在生产中您只需更新 web.xml 即可启用或禁用

# ios - 子类 UISegmentedControl 不响应“setEnabled:(BOOL)enabled forSegmentAtIndex:(NSUInteger)segment”

> ID：12179549
> 
> 赞同：0
> 
> 时间：2012-08-29T13:51:57.747
> 
> 标签：ios, uisegmentedcontrol, subclassing

我需要以各种方式设置 UISegmentedControl 的样式，因此创建了一个子类：

```
@interface MYSegmentedControl : UISegmentedControl
@end 
```

我可以使用 [[MYSegmentedControl 外观]...] 设置我的控件样式，并且一切似乎都可以正常工作（设置选定的段、标题等），除了我无法禁用 MYSegmentedControl 中的段这一事实。

查看下面的代码片段，我的 *segway 和 *segwayTwo 的段 0 都应该被禁用。然而，这只是 *segwayTwo 的情况——我的 *segway 启用了所有段，它只是 UISegmentedControl 的子类。

```
MYSegmentedControl *segway = [[MYSegmentedControl alloc] initWithFrame:CGRectMake(10, 10, 100, 30)];
[segway insertSegmentWithTitle:@"A" atIndex:0 animated:NO];
[segway insertSegmentWithTitle:@"B" atIndex:1 animated:NO];
[segway insertSegmentWithTitle:@"C" atIndex:2 animated:NO];

segway.selectedSegmentIndex = 1;
[segway setEnabled:NO forSegmentAtIndex:0];
[segway setEnabled:YES forSegmentAtIndex:1];
[segway setEnabled:YES forSegmentAtIndex:2];

[myTableCell addSubview:segway];

UISegmentedControl *segwayTwo = [[UISegmentedControl alloc] initWithFrame:CGRectMake(125, 10, 100, 30)];
[segwayTwo insertSegmentWithTitle:@"X" atIndex:0 animated:NO];
[segwayTwo insertSegmentWithTitle:@"Y" atIndex:1 animated:NO];
[segwayTwo insertSegmentWithTitle:@"Z" atIndex:2 animated:NO];

segwayTwo.selectedSegmentIndex = 1;
[segwayTwo setEnabled:NO forSegmentAtIndex:0];
[segwayTwo setEnabled:YES forSegmentAtIndex:1];
[segwayTwo setEnabled:YES forSegmentAtIndex:2];

[myTableCell addSubview:segwayTwo]; 
```

有没有人知道为什么“setEnabled：NO ...”显然被 MYSegmentedControl 抑制了，你能想办法让它表现得像一个“普通”的 UISegmentedControl 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T20:42:38.430

```
 //this should solve

  dispatch_async(dispatch_get_main_queue(),^{
     [segwayTwo setEnabled:NO forSegmentAtIndex:0];
     [segwayTwo setEnabled:YES forSegmentAtIndex:1];
     [segwayTwo setEnabled:YES forSegmentAtIndex:2];
  }); 
```

# php - 类中的php回调函数

> ID：12179552
> 
> 赞同：11
> 
> 时间：2012-08-29T13:52:04.283
> 
> 标签：php, class, hosting, php-5.2

由于某些原因，我们的托管公司使用 PHP 5.2，甚至没有预装 mysqli 和 PDO。

我别无选择，只能重写部分代码以使其与 5.2 兼容。

所以，这是我的问题：

在 PHP 5.2 中不支持匿名函数，因此我进行了以下测试以确保我正确更改了代码：

```
class foo{

    public function toString(){
        $arr = array("a", "b");
        $arr2 = array("c", "d");
        print_r(array_map('mapKeyValue', $arr, $arr2));
    }

    private function mapKeyValue($v, $k){
        return $k."='".$v."'";
    }
}

$foo = new foo();
echo $foo->toString(); 
```

但上面会给我：

```
Warning: array_map() expects parameter 1 to be a valid callback, function 'mapKeyValue' not found or invalid function name in ....
PHP Warning: array_map() expects parameter 1 to be a valid callback, function 'mapKeyValue' not found or invalid function name in .... 
```

正确的做法是什么：

```
array_map('mapKeyValue', $arr, $arr2); 
```

在一个班级内？

PS：因为他们使用PHP 5.2而改变托管公司是否足够好？（我得到了大约7个月的合同）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T13:53:03.387

使用`$this`和数组作为回调：

```
array_map( array( $this, 'mapKeyValue'), $arr, $arr2); 
```

而且，可以肯定的是，这是[用 PHP 5.2.17 测试的，](http://viper-7.com/wHL6mA)并且确认可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:59:03.140

尝试使用：

```
print_r(array_map(array($this, "mapKeyValue") , $arr, $arr2)); 
```

您需要使用 $this 调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:53:15.343

```
array_map(array($this, 'mapKeyValue'), $arr, $arr2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T08:47:55.680

确保您的回调方法是**public**。

```
public function mapKeyValue($v, $k){
    return $k."='".$v."'";
}

print_r(array_map(array($this, "mapKeyValue") , $arr, $arr2)); 
```

# java - StackOverflowError 生成 JasperReport

> ID：12179553
> 
> 赞同：0
> 
> 时间：2012-08-29T13:52:08.790
> 
> 标签：java, stack-overflow

早上好！

我正在使用 jasperreport 生成 pdf 报告。

此 pdf 包含多张纸，共七 (7) 张。但是当用户单击它以获取报告时，服务器会抛出此错误：

[Servlet 错误]-[操作]：com.thoughtworks.xstream.mapper.DefaultMapper.serializedMember 处的 java.lang.StackOverflowError（DefaultMapper.java:122）

有人可以帮助我吗？谢谢！

代码在底部

痕迹是：

```
 at com.thoughtworks.xstream.mapper.DefaultMapper.serializedMember(DefaultMapper.java:122)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.FieldAliasingMapper.serializedMember(FieldAliasingMapper.java:45)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.OuterClassMapper.serializedMember(OuterClassMapper.java:41)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.mapper.MapperWrapper.serializedMember(MapperWrapper.java:30)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:91)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41)

  at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:59)

  at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:50)

  at com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.marshallField(AnnotationReflectionConverter.java:37)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:105)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:81)

  at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:109)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:66)

  at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:41) 
```

代码是：

public void generatePDFSReport(List template, Reportable reportable, Map parameters, OutputStream output){

```
 Object[] reportableObj= {reportable};

        if(parameters==null){
            parameters = new HashMap();
            parameters.put("RutaImagen", basePath + templatesFolder + templatesImageFolder);
        }else {
            parameters.put("RutaImagen", basePath + templatesFolder + templatesImageFolder);
        }

        try {
            List printList =  new ArrayList();

            for (Iterator iter = template.iterator(); iter.hasNext();) {
                String fileName = (String) iter.next();
            try {
                String file = JasperFillManager.fillReportToFile(basePath + templatesFolder +fileName, parameters, new JRBeanArrayDataSource(reportableObj));
                printList.add(JRLoader.loadObject(file));
            } catch (JRException e1) {
                e1.printStackTrace();
            }
            }

            JRPdfExporter exporter = new JRPdfExporter();

            exporter.setParameter(JRExporterParameter.JASPER_PRINT_LIST, printList);
            exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, output);

            exporter.exportReport();    

        } catch(JRException  e){
            throw new InfinixRuntimeException("No se creo el reporte",e);
        }

     } 
```

public ConsultarPreSolicitudConfirmarDTO imprimirSolicitudCredito(ConsultarPreSolicitudConfirmarDTO dto, DetallePreSolicitudConfirmadaDTO preSolicitud) { final String error ="No se pudo imprimir la Solicitud de Crédito";

```
 try {

        List plantillas = new ArrayList();
        plantillas.add("SolicitudDeCredito.jasper");
        plantillas.add("SolicitudDeCredito_2.jasper");
        plantillas.add("SolicitudDeCredito_3.jasper");
        plantillas.add("SolicitudDeCredito_4.jasper");
        plantillas.add("SolicitudDeCredito_5.jasper");
        plantillas.add("SolicitudDeCredito_6.jasper");
        plantillas.add("SolicitudDeCredito_7.jasper");      

        reporteService.generatePDFSReport(plantillas, preSolicitud, null, dto.getPdf());

        logger.logError("******* Se genera la Solicitud de Crédito *********");

    } catch (BusinessRuntimeException e) {
        dto.addErrors(e.getErrors());
        logger.logDebug(error);
    } catch(InfinixRuntimeException e) {
        dto.addError(new InfinixError("81452"));
        logger.logError("No se pudo imprimir el reporte", e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:54:13.353

我猜，因为`for (Iterator iter = template.iterator(); iter.hasNext();) {`你以无限循环结束，它会抛出`StackOverflowError`.

我认为你的代码应该是这样的。

```
Iterator iter = template.iterator(); 
while (iter.hasNext();) {
                String fileName = (String) iter.next();
            try {
                String file = JasperFillManager.fillReportToFile(basePath + templatesFolder +fileName, parameters, new JRBeanArrayDataSource(reportableObj));
                printList.add(JRLoader.loadObject(file));
            } catch (JRException e1) {
                e1.printStackTrace();
            }
            } 
```

# java - 使用 Spring 添加行为

> ID：12179561
> 
> 赞同：1
> 
> 时间：2012-08-29T13:52:38.327
> 
> 标签：java, spring

我有一堆项目声明了一些 spring bean 文件。我想编写一个“库”，它提供一个实用程序，该实用程序采用一些 bean 名称并在对象“周围”添加一些行为（例如：呼叫计数、监控、日志记录等）

一种明显的方法是在项目的 spring xml 文件中添加一些 AspectJ 注释，但我希望“实用程序”搜索一些 bean 并向它们添加行为（这样项目本身不知道效用）。

该实用程序将在 spring xml 文件中的某个地方声明，因此它可以访问 ApplicationContext，因为它可以实现 ApplicationContextAware 接口，但是我热衷于探索如何以编程方式在应用程序上下文中修改另一个 bean 的行为。例如，找到一个 id 为“OrderService”的 bean，围绕所有方法创建一个带有一些监视/调用计数等的切面 bean，并在应用程序上下文中替换该 bean 为“OrderService”

我知道这种方法有缺点，但我追求的是“有可能做到这一点吗？如果可以，怎么做？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:15:29.663

如果您不想使用 AOP，可以使用[BeanPostProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)来实现。Spring 文档[指出](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension-bpp)：

> BeanPostProcessor 接口定义了回调方法，您可以实现这些方法以提供您自己的（或覆盖容器的默认）实例化逻辑、依赖关系解析逻辑等。如果你想在 Spring 容器完成实例化、配置和初始化 bean 之后实现一些自定义逻辑，你可以插入一个或多个 BeanPostProcessor 实现。

因此，您可以创建并注册一个 BeanPostProcessor 并实现该`postProcessAfterInitialization(Object bean, String beanName)`方法来修改您要自定义的方法。这是一个[例子](http://www.springindepth.com/2.5.x/0.10/ch03s13.html#d0e3261)。

（但我仍然建议您使用 AOP 执行此操作，因为这是它的经典用例，并且更容易且更具声明性。使用[bean() 切入点](http://blog.springsource.org/2007/09/24/the-new-bean-pointcut/)，您甚至可以建议名称与特定模式匹配的 bean。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:15:29.433

您可以创建自己的[BeanPostProcessor](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)。您只需在其中声明两个它，`applicationContext.xml`它将在 bean 初始化期间为每个 bean 调用（实际上，就在之前或之后）。在每次调用中，您都会得到一个实际对象及其名称。例如，您可以在那里根据对象的名称或类型包装该对象。

# spring-data-jpa - JPA 将“真”替换为 1

> ID：12179565
> 
> 赞同：2
> 
> 时间：2012-08-29T13:52:49.870
> 
> 标签：spring-data-jpa

我使用 Spring Data JPA 和 hibernate 作为持久性提供程序。PostgreSQL 9.1.5 是我的数据库。

询问：

```
@Query("select COUNT(u) from User u where u.enabled=true") 
```

被自动翻译成

```
select count(user0_.username) as col_0_0_ from users user0_ where user0_.enabled=1 
```

如您所见，“真”被“1”取代。Postgre 不接受此查询并抛出错误：

```
 org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [select count(user0_.username) as col_0_0_ from users user0_ where user0_.enabled=1]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query] with root cause 
```

无需替换的查询工作正常。在 pgadmin 查询界面中，以下查询有效。

```
select count(user0_.username) as col_0_0_ from users user0_ where user0_.enabled=true 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:43:32.370

确保您在 JPA 提供程序中使用正确的数据库方言。例如在 Hibernate 中它应该是：

```
org.hibernate.dialect.PostgreSQLDialect 
```

# php - Zend Framework 基于 URL 的翻译路由

> ID：12179566
> 
> 赞同：9
> 
> 时间：2012-08-29T13:52:53.760
> 
> 标签：php, zend-framework, url-routing, zend-translate

我正在尝试在 Zend Framework 中实现基于 URL 的翻译，以便我的网站对 SEO 友好。这意味着除了默认路由之外，我还需要像下面这样的 URL。

```
zend.local/en/module
zend.local/en/controller
zend.local/en/module/controller
zend.local/en/controller/action 
```

以上是我现在遇到的问题；其余的*应该*没问题。我添加了一个控制器插件来获取`lang`参数，以便我可以在`preDispatch`方法中设置语言环境和翻译对象。以下是我的一些路线（存储在 .ini 文件中）：

```
; Language + module
; Language + controller
resources.router.routes.lang1.type = "Zend_Controller_Router_Route_Regex"
resources.router.routes.lang1.route = "(^[a-zA-Z]{2})/(\w+$)"
resources.router.routes.lang1.defaults.controller = index
resources.router.routes.lang1.defaults.action = index
resources.router.routes.lang1.map.1 = "lang"
resources.router.routes.lang1.map.2 = "module"

; Language + module + controller
; Language + controller + action
resources.router.routes.lang2.type = "Zend_Controller_Router_Route_Regex"
resources.router.routes.lang2.route = "(^[a-zA-Z]{2})/(\w+)/(\w+$)"
resources.router.routes.lang2.defaults.module = default
resources.router.routes.lang2.defaults.action = index
resources.router.routes.lang2.map.1 = "lang"
resources.router.routes.lang2.map.2 = "controller"
resources.router.routes.lang2.map.3 = "action" 
```

正如评论所指出的，多个 URL 结构将匹配相同的路由，这使我的应用程序错误地解释了格式。例如，以下两个 URL 将被`lang1`路由匹配：

```
zend.local/en/mymodule
zend.local/en/mycontroller 
```

在第一个 URL 中，“mymodule”用作模块名称，这是正确的。但是，在第二个 URL 中，“mycontroller”用作模块名称，这不是我想要的。在这里，我希望它使用“默认”模块和“mycontroller”作为控制器。这同样适用于之前的`lang2`路线。所以我不知道如何区分 URL 是结构`/en/module`还是`/en/controller`.

为了解决这个问题，我在我的控制器插件中尝试了下面的代码。

```
// Get module names as array
$dirs = Zend_Controller_Front::getInstance()->getControllerDirectory();
$modules = array_keys($dirs);

// Module variable contains a module that does not exist
if (!in_array($request->getModuleName(), $modules)) {
   // Try to use it as controller name instead
   $request->setControllerName($request->getModuleName());
   $request->setModuleName('default');
} 
```

这在我测试的场景中可以正常工作，但是我必须做一些类似的事情才能使`lang2`路由工作（这可能涉及扫描目录以获取控制器列表）。这似乎是一个糟糕的解决方案，所以如果可能的话，我很想只用路由（或不那么“hacky”的简单代码）来完成所有这些。例如，我*也*可以在每次我想要的时候制定路线`/en/controller`，但这是我宁愿不采用的折衷方案。所以，如果有人知道如何解决这个问题，或者知道另一种方法来完成同样的事情，我会全力以赴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:57:21.107

我在这里重现了您的问题并提出了以下内容（尽管不使用配置文件）：

## 路由器

```
/**
 * Initializes the router
 * @return Zend_Controller_Router_Interface
 */
protected function _initRouter() {
    $locale = Zend_Registry::get('Zend_Locale');

    $routeLang = new Zend_Controller_Router_Route(
        ':lang',
        array(
        'lang' => $locale->getLanguage()
        ),
        array('lang' => '[a-z]{2}_?([a-z]{2})?')
    );

    $frontController  = Zend_Controller_Front::getInstance();
    $router = $frontController->getRouter();

    // Instantiate default module route
    $routeDefault = new Zend_Controller_Router_Route_Module(
        array(),
        $frontController->getDispatcher(),
        $frontController->getRequest()
    );

    // Chain it with language route
    $routeLangDefault = $routeLang->chain($routeDefault);

    // Add both language route chained with default route and
    // plain language route
    $router->addRoute('default', $routeLangDefault);

    // Register plugin to handle language changes
    $frontController->registerPlugin(new Plugin_Language());

    return $router;
} 
```

## 插入

```
/**
 * Language controller plugin
 */
class Plugin_Language extends Zend_Controller_Plugin_Abstract
{
    /**
     * @var array The available languages
     */
    private $languages = array('en', 'pt');

    /**
     * Check the URI before starting the route process
     * @param Zend_Controller_Request_Abstract $request
     */
    public function routeStartup(Zend_Controller_Request_Abstract $request)
    {
        $translate = Zend_Registry::get('Zend_Translate');
        $lang = $translate->getLocale();

        // Extracts the URI (part of the URL after the project public folder)
        $uri = str_replace($request->getBaseUrl() . '/', '', $request->getRequestUri());
        $langParam = substr($uri, 0, 3);

        // Fix: Checks if the language was specified (if not, set it on the URI)
        if((isset($langParam[2]) && $langParam[2] !== '/') || !in_array(substr($langParam, 0, 2), $this->languages)) { {
            $request->setRequestUri($request->getBaseUrl() . '/' . $lang . "/" . $uri);
            $request->setParam('lang', $lang);
        }
    }
} 
```

基本上，有用于在模块默认路由中应用语言设置的路由链。作为修复，我们确保 URI 将包含用户遗漏的语言。

您需要调整它，因为我正在使用`Zend_Registry::get('Zend_Locale')`and `Zend_Registry::get('Zend_Translate')`。将其更改为应用程序上的实际键。

至于 lang 路线：`[a-z]{2}_?([a-z]{2})?`它将允许像我这样的语言：`pt_BR`

让我知道它是否对您有用。

# asp.net - 列表视图 OnItemDataBound 事件的类型转换问题

> ID：12179572
> 
> 赞同：1
> 
> 时间：2012-08-29T13:53:03.240
> 
> 标签：asp.net, c#-4.0

在页面加载事件中我正在尝试做

```
 protected void Page_Load(object sender, EventArgs e)
        {
     XmlReader reader = XmlReader.Create(FeedUrl);
                   SyndicationFeed feed = SyndicationFeed.Load(reader);

                   lstViewNewsFeeds.DataSource = feed.Items;
                   lstViewNewsFeeds.DataBind(); 
         } 
```

* * *

```
protected void lstViewNewsFeeds_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        try
        {
            // Instantiate listview control object.
            ListViewDataItem lvDataItem = (ListViewDataItem)e.Item;

            at this line given exception
            **DataRowView drvItem = (DataRowView)lvDataItem.DataItem;** 

            //Make sure that data item is binding with listview.
            if (lvDataItem.ItemType == ListViewItemType.DataItem)
            {

                SyndicationItem item = e.Item.DataItem as SyndicationItem;

                LinkButton linkButtonTitle = (LinkButton)e.Item.FindControl("lbNewsTitle");
                Panel panelNewsDescContent = (Panel)e.Item.FindControl("panelNewsDescription"); 

                // Make sure that linkButtonTile is referenced.
                if (linkButtonTitle != null)
                {
                   // linkButtonTitle.Text = Convert.ToString(item.Title);
                    linkButtonTitle.Text = Convert.ToString(drvItem["Title"]);
                }
                // Make sure that panel object is referenced.
                if (panelNewsDescContent != null)
                {
                    Label lblBox = new Label();
                   // lblBox.Text = Convert.ToString(item.Summary);
                    panelNewsDescContent.Controls.Add(lblBox);
                }

                //Label l = e.Row.FindControl("Label1") as Label;
                //l.Text = item.Title.Text;
                //HyperLink hl = e.Row.FindControl("HyperLink1") as HyperLink;
                //hl.Text = item.Title.Text;
                //hl.NavigateUrl = item.Links[0].Uri.AbsoluteUri;
            }
        }
        catch(Exception ee)
        {
            Response.Write(ee.Message);
        } 
```

给出错误：

> “System.Data.DataRowView”。无法将“System.ServiceModel.Syndication.SyndicationItem”类型的对象转换为“System.Data.DataRowView”类型。无法转换类型的对象

我无法理解如何消除此错误。请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:08:50.963

i have tried this works fine.

```
 SyndicationItem item = e.Item.DataItem as SyndicationItem;  

 protected void lstViewNewsFeeds_ItemDataBound(object sender, ListViewItemEventArgs e)
        {
            try
            {
                // Instantiate listview control object.
                ListViewDataItem lvDataItem = (ListViewDataItem)e.Item;
                //DataRowView drvItem = (DataRowView)lvDataItem.DataItem; 
                //SyndicationItem item = (SyndicationItem)lvDataItem.DataItem;

                //Make sure that data item is binding with listview.
                if (lvDataItem.ItemType == ListViewItemType.DataItem)
                {

                    SyndicationItem item = e.Item.DataItem as SyndicationItem;

                    LinkButton linkButtonTitle = (LinkButton)e.Item.FindControl("lbNewsTitle");
                    Panel panelNewsDescContent = (Panel)e.Item.FindControl("panelNewsDescription"); 

                    // Make sure that linkButtonTile is referenced.
                    if (linkButtonTitle != null)
                    {
                       // linkButtonTitle.Text = Convert.ToString(item.Title);
                        linkButtonTitle.Text = Convert.ToString(item.Title.Text);
                    }
                    // Make sure that panel object is referenced.
                    if (panelNewsDescContent != null)
                    {
                        Label lblBox = new Label();
                        lblBox.Text = Convert.ToString(item.Summary);
                        panelNewsDescContent.Controls.Add(lblBox);
                    }

                    //Label l = e.Row.FindControl("Label1") as Label;
                    //l.Text = item.Title.Text;
                    //HyperLink hl = e.Row.FindControl("HyperLink1") as HyperLink;
                    //hl.Text = item.Title.Text;
                    //hl.NavigateUrl = item.Links[0].Uri.AbsoluteUri;
                }
            }
            catch(Exception ee)
            {
                Response.Write(ee.Message);
            }
} 
```

By The way thanks all of you for help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:09:39.173

尝试这个：

```
protected void lstViewNewsFeeds_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        try
        {
            //Make sure that data item is binding with listview.
            if (lvDataItem.ItemType == ListViewItemType.DataItem)
            {

                SyndicationItem item = e.Item.DataItem as SyndicationItem;

                LinkButton linkButtonTitle = (LinkButton)e.Item.FindControl("lbNewsTitle");
                Panel panelNewsDescContent = (Panel)e.Item.FindControl("panelNewsDescription"); 

                // Make sure that linkButtonTile is referenced.
                if (linkButtonTitle != null)
                {
                   linkButtonTitle.Text = Convert.ToString(item.Title);
                }
                // Make sure that panel object is referenced.
                if (panelNewsDescContent != null)
                {
                    Label lblBox = new Label();
                    lblBox.Text = Convert.ToString(item.Summary);
                    panelNewsDescContent.Controls.Add(lblBox);
                }

                Label l = e.Row.FindControl("Label1") as Label;
                l.Text = item.Title.Text;
                HyperLink hl = e.Row.FindControl("HyperLink1") as HyperLink;
                hl.Text = item.Title.Text;
                hl.NavigateUrl = item.Links[0].Uri.AbsoluteUri;
            }
        }
        catch(Exception ee)
        {
            Response.Write(ee.Message);
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:58:35.343

[`SyndicationFeed.Items`属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.items.aspx)返回一个`IEnumerable<SyndicationItem>`，因此您应该将其转换为[`SyndicationItem`](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationitem.aspx)。

```
SyndicationItem item = (SyndicationItem)lvDataItem.DataItem; 
```

# facebook - Joomla 到 wordpress 迁移 - 如何迁移 fb 评论？

> ID：12179573
> 
> 赞同：3
> 
> 时间：2012-08-29T13:53:03.013
> 
> 标签：facebook, wordpress, migration, joomla1.5

我正在将我的一个网站迁移到新的 cms，我想知道是否有办法将 facebook 评论连同内容、用户、模板等一起迁移？在我使用的旧 joomla 网站中： http: [//extensions.joomla.org/extensions/social-web/social-comments/16890](http://extensions.joomla.org/extensions/social-web/social-comments/16890)这个插件用于评论，如果这有所作为:)

我正在使用 joomla 1.5 和 WordPress 3.4.1 版本。任何可能的解决方案都是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:26:46.387

您无法导入 Facebook 评论，因为 Facebook 需要将每条评论与 Facebook 用户相关联。他们不允许导入，因为他们无法验证用户是否确实发表了您可能说他们发表的所有评论，这将是垃圾邮件或滥用的一个很大的潜在区域。

# php - 如何在不重新加载页面的情况下直接从数据库验证输入？

> ID：12179576
> 
> 赞同：0
> 
> 时间：2012-08-29T13:53:05.717
> 
> 标签：php, jquery, post

我只是一个 PHP 初学者，现在我想学习 JQUERY，在我的学习过程中，我练习验证输入，通常我只使用纯 PHP 代码验证我的输入，每次验证输入时，页面都会重新加载，现在我想改进做事我发现一些文章，如[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)，[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)（不能发布其他链接）但我更多很困惑，因为他们有不同的方法，我想使用 JQUERY 教程中的方法，但我没有找到任何好的教程，并且 JQUERY 的网站上没有使用数据库的教程，通常我这样编码：

```
<form method="post">
<label for="Username">Username:</label>
<input id="Username" type="text" name="username">
<?php
session_start();
if(isset($_SESSION['msg'])){
$msg=$_SESSION['msg'];
echo '<label for="Username">'.$msg.'</label>';
?>
<input type="submit" name="reg">
</form>
<?php
if(isset($_POST['reg'])){
$result=//check username from database here
if($result){
$_SESSION['msg']='username not available.';
}
else {
$_SESSION['msg']='username available.';
}
}
?> 
```

现在我想了解如何在不重新加载页面的情况下直接从数据库验证输入？我不知道我应该从哪里开始，在我的代码中添加什么。任何帮助、建议或建议对我来说都会有很大的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:00:16.477

编写您的验证脚本，就好像您期待页面刷新一样。不要输出错误消息，而是将它们放入 JSON 数组并打印 JSON 数据。然后从 AJAX 函数调用脚本。真的就是这么简单。

```
<?php
// validate.php

$sampleInput_number = isset($_POST['sampleInput_number']) ? $_POST['sampleInput_number'] : "";

$errors = array();
if (trim($sampleInput_number) == "" || !is_numeric(trim($sampleInput_number)) {
    $errors[] = "SampleInput_number must be a number!";
}

// sample input must also match a value from the database
if (!matchesDBValue($sampleInput_number)) {
    $errors[] = "SampleInput_number must match a value from the database!";
}

function matchesDBValue($value) {
    $retval = false;

    // compare to db values here...

    return $retval;
}

echo json_encode($errors); 
```

您的表单将如下所示：

```
<form action="" method="post" id="theForm">
    <input type="text" name="sampleInput_number" id="sampleInput_number" />
    <input type="button" id="formSubmit" value="Submit" />
</form> 
```

你的 javascript 看起来像这样：

```
<script language="javascript" type="text/javascript">
    $(#formSubmit).on("click", function() {
        $.post("validate.php", 
            {
                sampleInput_number: $("#sampleInput_number").val()
            }, function(data) {
                // check returned json data
                // perform action based on results

                if (no_errors) {
                    $("#theForm").submit();
                }
            }, "json"
        );
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:07:14.537

首先，在您的表单中添加一个 onSubmit 函数

```
 <form name='myform' type='POST' action='http://www.action.fr' onSubmit="return check_form()"> 
```

你可以像这样在ajax中做到这一点

```
function check_form()
 {
    var user = $('#Username').val(); // Username is the id of your input
    var password = $('#password').val(); // password is the id of your input
    $.ajax(
   {
     type:"POST", // or get as you want
     url:"myfile.php", // it is the php file which can do the job
     data: "user="+user+"&password="+password, // the param to send to your file, 
     success:function(msg)
     {
          ;// msg is the result of your 'myfile.php', everything you write is in the msg var

     }
  });
} 
```

在您的 php 文件中，您可以像这样获取数据：

```
 $user = $_POST['user'];
 $password = $_POST['password'];
 // if your type is get then use $_GET instead of $_POST 
```

如果您对我的代码有任何问题，请告诉我。

# regex - 使用 Apache 和 mod_rewrite 根据查询字符串值引导流量

> ID：12179578
> 
> 赞同：1
> 
> 时间：2012-08-29T13:53:13.777
> 
> 标签：regex, apache, mod-rewrite

本质上，我正在尝试使用（出于此问题范围之外的原因）查询字符串参数的第一个字符来对两台服务器进行负载平衡，以决定向哪个服务器发送流量。

为了解释我到目前为止所拥有的，如果我们以“用户”作为参数，并假设有两台服务器。服务器一用于服务名称以 A 和 M 之间的字母开头的用户，第二台服务器用于服务 N 到 Z。

因此，例如请求

[https://www.example.com/service/](https://www.example.com/service/)？***用户=保罗***

会去

https: **//*am.internal。***example.com/service/?user=paul

并要求

[https://www.example.com/service/](https://www.example.com/service/)？***用户=orla***

会去

https: **//*nz.internal。***example.com/service/?user=orla

到目前为止，我有这样的事情：

```
RewriteEngine On
RewriteCond %{Query_String} ^[\?\&]user=[n-z].*
RewriteRule ^(.*) https://n-z. internal .example.com/service/$1 [P]

RewriteRule ^(.*) https://a-m.internal.example.com/service/$1 [P,L] 
```

首先，如果是 nz，我只是重写，并将 URL 附加到规则 ($1)。如果不匹配nz，那么我默认发送给am。

我是 mod_rewrite 的新手，我似乎找不到可以按我想要的方式运行的组合或排列。

有人可以解释为什么我没有得到预期的结果吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:09:05.890

Try this :

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteCond %{QUERY_STRING} ^(.*\&)?user=[a-m]
RewriteRule ^(.*)$ https://a-m.internal.example.com/$1 [QSA,P]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteCond %{QUERY_STRING} ^(.*\&)?user=[n-z]
RewriteRule ^(.*)$ https://n-z.internal.example.com/$1 [QSA,P] 
```

# php - 基于 $curr_time->format('Ymd H:i') 的 SQL 语句

> ID：12179581
> 
> 赞同：5
> 
> 时间：2012-08-29T13:53:25.010
> 
> 标签：php, mysql, sql

为什么这个代码...

```
$curr_time = new DateTime();
$query_inprocess = "UPDATE `MyTable` 
                    SET inprocess=1 
                    WHERE startTime <= '" .$curr_time->format('Y-m-d H:i') . "'"; 
```

...导致错误的 SQL 查询，其中后面的语句`<`被忽略？

```
UPDATE `MyTable` SET inprocess=1 WHERE startTime < 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:38:52.433

找到下面的一个：

```
"UPDATE `MyTable` SET inprocess=1 WHERE startTime <= now()" 
```

它可以帮助您获得所需的确切结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:02:50.910

尝试这个

```
$curr_time = new DateTime();
$query_inprocess = "UPDATE `MyTable` 
                    SET inprocess=1 
                    WHERE startTime <='" .$curr_time->format('Y-m-d H:i'). "'";//OR use date('Y-m-d H:i') instead of $curr_time->format('Y-m-d H:i') 
```

# ruby-on-rails - 我如何解析出这个字符串

> ID：12179582
> 
> 赞同：0
> 
> 时间：2012-08-29T13:53:26.253
> 
> 标签：ruby-on-rails, ruby

好的，所以我有这个字符串

```
Something 06/15/2009 some other data  33 77 
```

我想像这样分开

```
Something
06/15/2009
some other data  
33 
77 
```

任何想法都是一种干净的方法来做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:57:17.877

我会使用正则表达式（或用空格分割它？）。

这是一个为您拆分的快速正则表达式

```
([a-zA-Z0-9\/]*\s) 
```

[http://rubular.com/r/qWVj3yr3aw](http://rubular.com/r/qWVj3yr3aw)

编辑：没有注意到带有空格的一条数据。您仍然可以使用正则表达式，您只需要澄清一个“列”数据的开始和结束位置。

如果这就是您要查找的数据，这是数据的完全匹配（尽管有更好的方法考虑到如果“其他数据”发生更改，则此语句不是很有用..）

```
(\w+)\s([\w\/]+)\s(some other data)\s\s(\d*)\s(\d*) 
```

[http://rubular.com/r/yNEBNKq97N](http://rubular.com/r/yNEBNKq97N)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:17:15.890

你可以试试：

```
/(.+?)\s+(\d+\/\d+\/\d+)\s+(.+?)\s+(\d+)\s+(\d+)/ 
```

[红字样例](http://rubular.com/r/u1MPpHM7id)

至少给出你想要的例子。

**更新：**

让 .+ 部分变得贪婪可能会更好：

```
/(.+)\s+(\d+\/\d+\/\d+)\s+(.+)\s+(\d+)\s+(\d+)/ 
```

这样，“某事”或“其他一些数据”可以包括日期和数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:17:33.080

一种简单的方法是`some_string.split(" ")`，获取子字符串的数组。

```
"Something 06/15/2009 some other data  33 77".split(" ")
=> ["Something", "06/15/2009", "some", "other", "data", "33", "77"] 
```

# javascript - qooxdoo 中的离线商店是否与所有浏览器和本地文件系统兼容？

> ID：12179589
> 
> 赞同：1
> 
> 时间：2012-08-29T13:53:49.330
> 
> 标签：javascript, qooxdoo, offlineapps, web-storage

我有一个从本地文件系统运行的基于 qooxdoo 的应用程序。

现在，我看到 IE 通常不支持本地文件的离线存储（即使用 访问应用程序`file:///...`）。但是qooxdoos离线商店不应该有这种情况的后备（例如userData行为）吗？我的意思是说它与所有浏览器兼容，但它在IE9中不起作用......

只是为了我的兴趣：有谁知道为什么 IE 不支持本地 javascripts 的离线存储？本地脚本不是比远程脚本更可靠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:16:05.463

这取决于您使用的 qooxdoo 版本。例如，lastes 2.0.1 版本确实为较旧的 IE 提供了使用 userData 的回退，以防不支持本地存储 [1]。当我们使用功能检查来决定使用哪个实现时，这取决于 IE 是否在 API 不可用时正确禁用该功能。如果不是这样，可能需要考虑在 qooxdoo 的 bugzilla [2] 中打开错误报告并将其报告为问题。

*   [1] [https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/bom/Storage.js#L37](https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/bom/Storage.js#L37)
*   [2] [http://bugzilla.qooxdoo.org/](http://bugzilla.qooxdoo.org/)

# python - Flask - 不允许使用 POST 错误 405 方法

> ID：12179593
> 
> 赞同：65
> 
> 时间：2012-08-29T13:53:51.067
> 
> 标签：python, http, post, flask

我刚刚开始学习 Flask，我正在尝试创建一个允许**POST**方法的表单。

这是我的方法：

```
@app.route('/template', methods=['GET', 'POST'])
def template():
    if request.method == 'POST':
        return("Hello")
    return render_template('index.html') 
```

我的`index.html`：

```
<html>

<head>
  <title> Title </title>
</head>

<body>
  Enter Python to execute:
  <form action="/" method="post">
    <input type="text" name="expression" />
    <input type="submit" value="Execute" />
  </form>
</body>

</html> 
```

**加载表单（在收到GET**时渲染它）工作正常。但是，当我单击**提交**按钮时，我得到一个`POST 405 error Method Not Allowed`.

为什么不显示**“你好”**？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-29T13:57:24.707

您的表单正在提交到`/`路由方法的时间，`/template`除非这是一个错字，您应该调整表单的`action`属性以指向`template`视图：`action="{{ url_for('template') }}"`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T14:03:01.790

代替：

```
 <form action="/" method="post"> 
```

和：

```
 <form action="{{ url_for('template') }}" method="post"> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-15T11:28:01.263

如果省略该`action`属性，表单将发布到当前 URL。

代替：

```
<form action="/" method="post"> 
```

和：

```
<form method="post"> 
```

# php - 如何隐藏 php_self

> ID：12179594
> 
> 赞同：0
> 
> 时间：2012-08-29T13:53:53.947
> 
> 标签：php, apache, .htaccess

我正在使用 php 在 Apache 服务器上运行我的网站。我使用 htaccess 隐藏 URL 中的信息并使它们看起来不错。但是，如果我在浏览器中检查我网站的标题，则会`php_self`显示打开文件的实际路径。有没有办法隐藏它或改变它的价值？

# apache - .htacces - 如何使用自定义消息阻止每个人的服务器？

> ID：12179603
> 
> 赞同：0
> 
> 时间：2012-08-29T13:54:17.043
> 
> 标签：apache, .htaccess, block

是否可以通过以下方式阻止服务器：

```
deny from all 
```

（或通过 .htaccess 文件中的其他方式）并显示一些消息，例如

```
For technical reasons the server is temporarily unavailable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:55:20.683

您可以[重定向到维护页面](http://wiki.lunarpages.com/Redirect_to_Maintenance_Page_Using_htaccess)。

# spring - Spring - 从 JNDI 设置属性值

> ID：12179607
> 
> 赞同：2
> 
> 时间：2012-08-29T13:54:40.653
> 
> 标签：spring, properties, jndi

这是我之前的问题 [Spring and Hibernate - changed dialect的一些后续](https://stackoverflow.com/questions/12177423/spring-and-hibernate-changing-dialect/12178432#comment16303596_12178432)

例如，如果我有这段 .xml

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="SpringMVCTest" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect" >

            </prop>
        </props>
    </property>
</bean> 
```

现在，我想设置`hibernate.dialect`为 jndi by 公开的值`jdbc/dialect`，但是当我`<jee:jndi-lookup jndi-name="jdbc/MyDataSource"/>`输入时我得到了`Invalid content was found starting with element 'jee:jndi-lookup'. No child element is expected at this`，所以我怀疑我不能在`prop`.

那么，有什么方法可以将 jndi 资源插入此属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:52:16.210

不完全确定，但您应该可以在这里使用 Spring-EL，如下所示：

```
<jee:jndi-lookup id="dialect" jndi-name="..." />

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="SpringMVCTest" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect" >#{dialect}</prop>
        </props>
    </property>
</bean> 
```

# iphone - 使用条件故事板进行转场

> ID：12179608
> 
> 赞同：1
> 
> 时间：2012-08-29T13:54:41.367
> 
> 标签：iphone, objective-c, ios, xcode, uistoryboard

我是故事板和 xcode 的新手（使用 4.4）

我想实现一个登录条件，如果完成 - segue 会起作用。否则，用户应该停留在同一个视图上。

我创建了 2 个 UIView：ViewController 和 Bar Controller。

我还创建了一个从 ViewController 到 Bar Controller 的 segue，并将其标识符设置为 loginSegue 作为模式。

在 LoginViewController.m 我添加了以下内容：

```
- (IBAction)login:(id)sender {
    self.email = self.emailText.text;
    self.password = self.passwordText.text;
   if ([self.email isEqualToString:@"O"] && [self.password isEqualToString:@"O"])
       [self performSegueWithIdentifier:@"LoginSegue" sender:sender];
    else
        [passwordText setText:@""];   
} 
```

当我调试代码时 - 我看到如果电子邮件和密码不等于 O，if 会跳到 else，但是 segue（转换到新视图）仍然会发生。

如何防止用户被转移到新视图？

顺便说一句，如果我删除 if else 条件 - 用户将自动转移到下一个视图。在我看来，当我将 segue 从一个视图绘制到另一个视图时，它是在某个地方配置的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:59:32.657

`if`删除你和之间的空行`[self perform...]`

此外，您可能需要考虑将`if-else`语句放在大括号中，以防止此问题再次发生：

```
if ([self.email isEqualToString:@"O"] && [self.password isEqualToString:@"O"]){
    [self performSegueWithIdentifier:@"LoginSegue" sender:sender];
}else{
    [passwordText setText:@""];
} 
```

如果这不能解决问题，请务必确认 segue 已连接到两个控制器而不是直接连接到按钮。

# java - 带有纯 Java 应用程序的 Apache 负载均衡器

> ID：12179610
> 
> 赞同：0
> 
> 时间：2012-08-29T13:54:48.030
> 
> 标签：java, apache, load-balancing

我有一个纯 Java 应用程序，它无需任何应用程序服务器即可发布 Web 服务。如何配置 Apache Http 负载平衡器以将请求转发到安装此应用程序的服务器。

当我在 Glassfish 等应用服务器上部署 Web 服务时，我可以处理它。但我不知道如何使用纯 Java 应用程序来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:21:19.037

您应该能够在平衡器配置中使用 http:// 而不是 ajp:// ，例如：

```
<Proxy balancer://myApp>
  BalancerMember http://47.168.96.31:2020 route=r1
  BalancerMember http://192.168.0.2:2020 route=r2
</Proxy> 
```

或直接使用代理转发，例如：

```
ProxyPass / balancer://myApp
ProxyPassReverse / balancer://myApp 
```

假设 apache 在 47.168.96.31 上，那么您将访问该服务`http://47.168.96.31/StockQuote/StockQuoteService`

如果您希望服务在 响应`http://47.168.96.31/`，您可以执行以下操作：

```
ProxyPass / balancer://myApp/StockQuote/StockQuoteService
ProxyPassReverse / balancer://myApp/StockQuote/StockQuoteService 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:29:08.590

这是我到目前为止所做的，这使它成为现实。服务可访问：

```
 http://47.168.96.31/StockQuote/StockQuoteService 
```

安装：

```
./configure --prefix=/usr/local/apacheHttpServer3 --enable-modules=proxy 
```

配置：

```
<Proxy balancer://kekagent>
      BalancerMember http://47.168.96.31:2020  loadfactor=10
      BalancerMember http://192.168.0.2:2020   loadfactor=10 timeout=2
</Proxy>
ProxyPass /StockQuote/StockQuoteService balancer://kekagent/StockQuote/StockQuoteService 
```

# git - 使用 git filter-branch 删除不需要的文件而不 git rm 失败的正确方法

> ID：12179611
> 
> 赞同：6
> 
> 时间：2012-08-29T13:54:49.533
> 
> 标签：git, git-filter-branch

我有一个 SNMP 代理项目，与它一起开发了相关的 MIB 文件（*.smiv2 文件），但现在我希望它们在单独的 git 存储库中。

为了不丢失任何 MIB 文件历史记录，因为它们没有在现在的同一目录中启动，我不能只使用`--subdirectory-filter`filter-branch，所以我尝试了`--filter-index`基于[这个问题](https://stackoverflow.com/questions/5998987/splitting-a-set-of-files-within-a-git-repo-into-their-own-repository-preserving)的方法。这个想法是删除每个不以结尾的文件`.smiv2`（显然是在原始项目的新克隆上，在过程结束时将被推送到我的新 MIB 存储库）。

为了使它更简单，我选择使用`ls-files`over `ls-tree`，而不是：

```
git filter-branch --prune-empty --index-filter 'git ls-tree -r --name-only \
--full-tree $GIT_COMMIT | grep -v ".smiv2$" | xargs git rm --cached \
--ignore-unmatch -r' 
```

我用这个：

```
git filter-branch --prune-empty --index-filter 'git ls-files | \
grep -v ".smiv2$" | xargs git rm --cached --ignore-unmatch' 
```

但是这些中的任何一个在第一次提交中都失败了，因为它似乎`git rm`根本没有提供任何参数（我想`--ignore-unmatch`如果找不到提供的参数会正常工作，但在没有提供参数的情况下不会）：

```
$ git filter-branch --prune-empty --index-filter 'git ls-files | \
>     grep -v ".smiv2$" | xargs git rm --cached --ignore-unmatch'
Rewrite 4cd2f1c98dbaa96bc103ae81fbd405bd1d991d9a (1/418)usage: git rm [options] [--] <file>...

    -n, --dry-run         dry run
    -q, --quiet           do not list removed files
    --cached              only remove from the index
    -f, --force           override the up-to-date check
    -r                    allow recursive removal
    --ignore-unmatch      exit with a zero status even if nothing matched

index filter failed: git ls-files | \
    grep -v ".smiv2$" | xargs git rm --cached --ignore-unmatch 
```

我把它包装`git rm`在一个脚本中，即使由于缺少参数而失败，它也会返回成功（保存在 中`/usr/local/bin/gitrm_alt`）：

```
#!/bin/sh
git rm --cached --ignore-unmatch "$@" 
exit 0 
```

然后调用它而不是`git rm`：

```
git filter-branch --prune-empty --index-filter 'git ls-files | \
    grep -v ".smiv2$" | xargs gitrm_alt' 
```

但我发现这非常丑陋和笨重，所以我想问一下是否有更直接/正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T20:18:49.417

最简单的解决方案是添加一个虚拟参数，`git rm`以便它始终具有至少一个文件参数。

例如

```
... | xargs git rm --cached --ignore-unmatch DoesNotExistInMyProject 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-23T03:51:07.867

`xargs`'s `-r`|`--no-run-if-empty` flag might be cleaner:

> `... | xargs`**`--no-run-if-empty`**`git rm --cached --ignore-unmatched`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-23T03:44:51.353

Full Answer, for future reference

```
git filter-branch --prune-empty --index-filter 'git ls-files | \
grep -v ".smiv2$" | xargs git rm --cached --ignore-unmatch DoesNotExistInMyProject' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T05:26:29.347

也可以使用 -I 开关。

```
some command | xargs -I % rm % 
```

# qt - 如何将 qextserialport 1.2win alpha 与 Qt Creator 集成？

> ID：12179615
> 
> 赞同：2
> 
> 时间：2012-08-29T13:55:02.493
> 
> 标签：qt, qextserialport

我需要使用 Qt 中的 GUI 与串行 RS232 设备通信....我从[代码谷歌下载了最新的代码...](http://code.google.com/p/qextserialport/downloads/detail?name=qextserialport.1.2win-alpha2.zip&can=1&q=) ...但不知道下一步该做什么...最初我做了（我不记得哪个版本它是 qextserial 的）但它有一个 .pri 文件，我刚刚将它包含在我的 .pro 文件中......[这个网站](http://code.google.com/p/qextserialport/wiki/QextSerialPort_1_2_Beta2)......但现在下载的代码中没有 .pri 文件......

```
include(qextserialport/src/qextserialport.pri) 
```

请帮助我任何将此功能集成到Qt Creator的人......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:23:21.277

是的，您正在使用没有 PRI 包含文件的 1.2 Alpha 版本，使用[此处](http://code.google.com/p/qextserialport/downloads/list?can=1&q=)找到的推荐版本或 1.2 Alpha 之后的任何版本都可以正常包含 PRI 并且应该可以正常工作。

# ruby-on-rails - 与单表继承的分支冲突

> ID：12179616
> 
> 赞同：0
> 
> 时间：2012-08-29T13:55:18.627
> 
> 标签：ruby-on-rails, single-table-inheritance

我想在我的一个表中使用单表继承方法。所以我创建了一个新的 git 分支（原因很明显：）并为表创建了 STI。现在，当我切换回我的主分支以运行其他一些测试时，我得到了单表继承错误：

> “单表继承机制未能定位子类：‘xxx’。出现此错误是因为‘type’列保留用于存储类以防继承。如果您不打算这样做，请重命名此列用于存储继承类或覆盖 Transaction.inheritance_column 以使用另一列存储该信息。”

我的问题是，如何使 STI 仅与一个分支隔离？我认为通过分支方法，它不会在我的主分支中产生问题。请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:02:44.767

如果您使用 STI，您的数据库将会改变。

MySQL 本身不在 git 下——您需要确保数据库与您当前的分支同步。

选项包括：

*   创建一个新的、特定于分支的数据库，并修改数据库配置中的默认环境。
*   吹走数据库并使用迁移/转储/等重新创建。并重新加载任何初始数据。

我倾向于第一个（特定于分支的数据库），因为它是一个简单的配置文件更改（*受*源代码控制）并且迁移很简单，并且特定于分支。您可能需要记住在删除分支时删除额外的数据库（或编写同时执行这两种操作的脚本）。

可能还有其他解决方案，希望人们会编辑此答案并将其包括在内。

# c++ - windows 7下如何判断用户是否为管理员？

> ID：12179624
> 
> 赞同：1
> 
> 时间：2012-08-29T13:55:42.530
> 
> 标签：c++, windows, windows-7, sid

我在 msdn 中找到了这个[链接](http://msdn.microsoft.com/en-us/library/aa376389%28VS.85%29.aspx)来检查用户是否是管理员。当进程提升（以管理员身份运行）时，它在某些 win7 机器上工作正常，但我发现一些机器（一些 win 2008）无法正常工作！这是正确的方法吗？

```
BOOL IsUserAdmin(VOID)
{
  BOOL b;
  SID_IDENTIFIER_AUTHORITY NtAuthority = SECURITY_NT_AUTHORITY;
  PSID AdministratorsGroup; 
  b = AllocateAndInitializeSid(
    &NtAuthority,
    2,
    SECURITY_BUILTIN_DOMAIN_RID,
    DOMAIN_ALIAS_RID_ADMINS,
    0, 0, 0, 0, 0, 0,
    &AdministratorsGroup); 
  if(b) 
  {
    if (!CheckTokenMembership( NULL, AdministratorsGroup, &b)) 
    {
      b = FALSE;
    } 
  FreeSid(AdministratorsGroup); 
  }
  return(b);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:59:35.230

您可以使用`IsUserAnAdmin()`它作为上述调用的包装器

# php - 使用 PHP 获取 Adf.ly 隐藏链接

> ID：12179625
> 
> 赞同：1
> 
> 时间：2012-08-29T13:55:44.503
> 
> 标签：php, curl

嗨，我对 stackoverflow 很陌生，我正在尝试开发一个脚本来从缩短的链接中获取实际隐藏的链接。

我想知道的是，有没有办法从带有 PHP 或 cURL 的 adf.ly 链接获取实际（最终隐藏）链接？

```
function get_link($url){
  $redirect_url = null;
  if(function_exists("curl_init")){
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_AUTOREFERER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 5);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_exec($ch);
    $redirect_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
    return $redirect_url;
  }
} 
```

# arrays - MVC 混乱，我该把我的模型放在哪里？

> ID：12179629
> 
> 赞同：0
> 
> 时间：2012-08-29T13:56:06.763
> 
> 标签：arrays, cocoa, model-view-controller, model

我正在从头开始开发我的第一个可可应用程序，我对如何让我的模型、视图和控制器一起工作有点困惑。我确定我只是错过了一些愚蠢的东西。

基本上，我的视图当前设置为向控制器返回 3 个值。控制器采用这些值并创建一个类的新实例。我希望能够将这些对象放入一个数组中，然后使用该数组。

第一：我要创建的数组......它是我的模型，对吗？我如何以及在哪里创建它，以便控制器正确解释视图中的动作（输入值）（创建对象）然后存储在方法中？

第二：我所做的尝试使我与我的阵列隔离。我试图为数组创建一个类，但我无法从控制器访问它。我该如何解决这个问题？

最后：几天来，我一直在敲代码。我正在自学，我学到了很多东西，但我有很多像这样的简单问题。感谢您花时间提供帮助。)

编辑：

我创建了 Student 类。Action 将值发送到控制器，控制器创建一个新实例：
`- (IBAction)addNewStudentButtonPressed:(id)sender
{
Student *newStudent = [[Student alloc] initNewStudentwithName:[nameField stringValue]
andID:[idField intValue]
andLevel:[levelField stringValue]];
}`

数组正在`appDidFinishLaunching`方法中创建：
`-(void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
NSMutableArray *roster = [[NSMutableArray alloc] initWithCapacity:100];
}`

现在我想将学生添加到数组中。我只是错过了一些明显的东西。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:39:49.430

好的，所以您似乎主要在问谁的责任是存储模型对象的容器。这是可能引起冗长讨论的灰色区域之一，但最简单的做法是将其视为模型的一部分。这是因为，您很可能希望在某个时候持久化您的模型，而不是为每个项目创建一个文件，您更有可能只想将整个容器流式传输到一个文件并再次返回。

那么，谁来控制呢？如果你有一个基于文档的应用程序，你的 NSDocument 子类就有。这是一个“模型控制器”（很好地覆盖了那个灰色区域）。您将覆盖提供的方法来写入和读取您决定的文件格式，这就像使用 NSKeyedArchiver/NSKeyedUnarchiver 读取/写入整个数组（或字典或其他容器）一样简单。文档实例保留容器，并将 Student 实例添加到您的 UI 命令中/从中删除。

在非基于文档的应用程序中，有人需要保留这个容器，所以这是一个架构问题。最简单的方法是将其存储到您的应用程序委托实例中，并提供从应用程序的其他部分以这种方式访问​​它的路径（访问器方法等）。“更好”的解决方案是拥有一个管理学生数组的“StudentController”对象。当你更舒服的时候，看看 Cocoa Bindings 和 NSArrayController。它可以简化一些事情并使其他事情复杂化，但它的设计是基本思想。但是，没有绑定，您的 StudentController 对象将保存容器（数组）并处理 -addStudent: -removeStudent: 以及“归档/取消归档”函数，但是您想处理它们。这样，您的 StudentController 就成为所有学生的中央存储管理器，

在基本情况下，使用 Core Data 使这变得更加容易。您定义您的数据模型（一个名为 Student 的单个实体），并且可以创建/插入/编辑学生，而无需任何代码。Core Data 和 Cocoa Bindings 通过使用我上面描述的一些架构和一些我没有使用的架构来处理幕后的所有事情。

更具体的问题会给你更具体的答案。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:51:03.250

将**模型**视为您的程序正在处理的内容的积极表示 - 您需要显示学生列表吗？然后你必须设计一个`Student`具有一堆属性的类[就像我闻到你已经做过的那样]。

**控制器**充当用户和模型之间的桥梁，这种连接就是视图**：**您在视图中点击一个按钮，因此您希望创建一个新学生，然后将其添加到数组中。

首先，你需要一个数组：你为你的控制器提供这样的属性/ivar——在这个例子中我会坚持使用 ivar：

**AppDelegate.h**

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{

    //this is the array you will deal with inside Controller methods
    NSMutableArray* students;

    //you probably have some IBOutlets here:
    IBOutlet NSTextField* nameField;
    IBOutlet NSTextField* idField;
    IBOutlet NSTextField* levelField;

} 
```

**AppDelegate.m**

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    students = [[NSMutableArray alloc] initWithCapacity:100];

}

- (IBAction)addNewStudentButtonPressed:(id)sender
{

    Student *newStudent = [[Student alloc] initNewStudentwithName:[nameField stringValue]
    andID:[idField intValue]
    andLevel:[levelField stringValue]];

     //now you add the student to the array
    [students addObject: newStudent]

} 
```

数组是逻辑的一部分，但不是模型本身的一部分——目前它只是一个控制器基本字段。当然，如果您`Classroom`使用学生列表定义一个班级，那么您就是将数组包装在另一个实体中。

Anyway the MVC matter is quite loose, and has many implementations - don't let it overhelm you, just let the pattern help you to separate concerns and to have a smoother development, but don't think of it as a dogma.

# windows - regsvr32 和标准输出

> ID：12179631
> 
> 赞同：2
> 
> 时间：2012-08-29T13:56:12.817
> 
> 标签：windows, winapi

该`regsvr32`实用程序抑制标准输出。例如：

```
STDAPI DllRegisterServer(void)
{
    std::cout << "RegisterServer\n";
    return S_OK;
} 
```

执行时：

> regsvr32 my.dll

标准输出中不显示任何内容（显示成功消息框）。有没有让标准输出出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:59:06.953

regsvr32.exe 它是一个 Windows 应用程序。它不拥有控制台。printf 或 std::cout 不会显示任何文本。

如果你坚持要展示一些东西，你可以自己创建控制台。

在您的文本输出之前调用以下行。

```
AllocConsole();
freopen("CONOUT$", "w+t", stdout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:05:41.460

与 /c 一起使用

```
regsrv32  yourFile.dll  /c C://log.txt 
```

# bash - 使 shopt 更改本地功能

> ID：12179633
> 
> 赞同：30
> 
> 时间：2012-08-29T13:56:17.483
> 
> 标签：bash, shopt

我正在尝试编写一个 bash 函数，该函数在`nocasematch`不更改选项的调用者设置的情况下使用。函数定义为：

```
is_hello_world() {
  shopt -s nocasematch
  [[ "$1" =~ "hello world" ]] 
} 
```

在我调用它之前：

```
$ shopt nocasematch
nocasematch     off 
```

叫它：

```
$ is_hello_world 'hello world' && echo Yes
Yes
$ is_hello_world 'Hello World' && echo Yes
Yes 
```

正如预期的那样，但现在`nocasematch`调用者已经改变：

```
$ shopt nocasematch
nocasematch     on 
```

**是否有任何简单的方法可以使选项更改为函数的本地？**

我知道我可以检查返回值，`shopt -q`但这仍然意味着函数应该记住这一点并在退出之前将其重置。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-29T14:00:15.463

函数体可以是任何复合命令，而不仅仅是组命令 ( `{}`)。使用子外壳：

```
is_hello_world() (
  shopt -s nocasematch
  [[ "$1" =~ "hello world" ]] 
) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-06-12T02:35:20.773

# 使用 RETURN 陷阱

> 使用 RETURN 陷阱指定的命令在 shell 函数...返回后继续执行之前执行。

> `-p`选项 [to shopt] 导致输出以可重复用作输入的形式显示。

– [https://www.gnu.org/software/bash/manual/bash.html](https://www.gnu.org/software/bash/manual/bash.html)

```
foobar() {
    trap "$(shopt -p extglob)" RETURN
    shopt -s extglob

    # ... your stuff here ...

} 
```

**用于测试**

```
foobar() {
    trap "$(shopt -p extglob)" RETURN
    shopt -s extglob

    echo "inside foobar"
    shopt extglob # Display current setting for errexit option
}

main() {
    echo "inside main"
    shopt extglob # Display current setting for errexit option
    foobar
    echo "back inside main"
    shopt extglob # Display current setting for errexit option
} 
```

**测试**

```
$ main
inside main
extglob         off
inside foobar
extglob         on
back inside main
extglob         off 
```

**变化：**要重置***所有 shopt***选项，请将陷阱语句更改为：

```
trap "$(shopt -p)" RETURN 
```

**变化：**要重置***所有设置***选项，请将陷阱语句更改为：

```
trap "$(set +o)" RETURN 
```

注意：从 Bash 4.4 开始，有一个更好的方法：[make $-local](https://unix.stackexchange.com/a/406332/89782)。

**变化：**要重置***所有设置***和***所有 shopt***选项，请将陷阱语句更改为：

```
trap "$(set +o); $(shopt -p)" RETURN 
```

**注意：** `set +o`相当于`shopt -p -o`：

> **+o** 以适合作为实现相同选项设置的命令重新输入到 shell 的格式将当前选项设置写入标准输出。
> 
> –[开放组基本规范第 7 期，2018 年版 > 设置](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#set)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-27T23:27:18.387

我知道这篇文章的日期是 2012 年，但您也可以执行以下操作（在 Windows 上的 Git Bash 1.8.4 中工作，因此它应该在 Linux 上工作）：

```
function foobar() {
    local old=$(shopt -p extglob)
    shopt -s extglob

    ... your stuff here ...
    eval "$old"
} 
```

该`-p`选项仅打印`shopt -s extglob`if`extglob`为 on，否则为`shopt -u extglob`。

`shopt -p`打印整个选项列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-28T14:57:44.753

您可以使用关联数组来记住之前的设置，然后使用它来恢复到之前的设置，如下所示：

# shopt_set

```
declare -gA _shopt_restore
shopt_set() {
    local opt count
    for opt; do
        if ! shopt -q "$opt"; then
            echo "$opt not set, setting it"
            shopt -s "$opt"
            _shopt_restore[$opt]=1
            ((count++))
        else
            echo "$opt set already"
        fi
    done
} 
```

# shopt_unset

```
shopt_unset() {
    local opt restore_type
    for opt; do
        restore_type=${_shopt_restore[$opt]}
        if shopt -q "$opt"; then
            echo "$opt set, unsetting it"
            shopt -u "$opt"
            _shopt_restore[$opt]=2
        else
            echo "$opt unset already"
        fi
        if [[ $restore_type == 1 ]]; then
            unset _shopt_restore[$opt]
        fi
    done
} 
```

# shopt_restore

```
shopt_restore() {
    local opt opts restore_type
    if (($# > 0)); then
        opts=("$@")
    else
        opts=("${!_shopt_restore[@]}")
    fi
    for opt in "${opts[@]}"; do
        restore_type=${_shopt_restore[$opt]}
        case $restore_type in
        1)
            echo "unsetting $opt"
            shopt -u "$opt"
            unset _shopt_restore[$opt]
            ;;
        2)
            echo "setting $opt"
            shopt -s "$opt"
            unset _shopt_restore[$opt]
            ;;
        *)
            echo "$opt wasn't changed earlier"
            ;;
        esac
    done
} 
```

然后将这些函数用作：

```
... some logic ...
shopt_set nullglob globstar      # set one or more shopt options
... logic that depends on the above shopt settings
shopt_restore nullglob globstar  # we are done, revert back to earlier setting 
```

或者

```
... some logic ...
shopt_set nullglob
... some more logic ...
shopt_set globstar
... some more logic involving shopt_set and shopt_unset ...
shopt_restore             # restore everything 
```

完整的源代码在这里：[https ://github.com/codeforester/base/blob/master/lib/shopt.sh](https://github.com/codeforester/base/blob/master/lib/shopt.sh)

# axapta - Dynamics AX 2012 InventJournalTrans 表字段

> ID：12179640
> 
> 赞同：1
> 
> 时间：2012-08-29T13:57:06.283
> 
> 标签：axapta, microsoft-dynamics

我的环境中有一个模块，可让您将固定资产分配给库存项目和序列号。现在，我尝试更改计数日记帐行表单，以在每次创建新的计数日记帐行时显示相同的固定资产 ID 和序列号。

目前，InventJournalTrans 似乎有可放置在表单上的其他字段。此分配是否出现在 InventJournalTrans 表之外的任何位置？

此外，什么允许资产可用于固定资产到库存日记帐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:47:33.887

[更新交叉引用](http://msdn.microsoft.com/en-us/library/aa626961.aspx)以自己回答问题。

您可以搜索使用的`AssetId`，尤其是搜索“write”。

据我所知， 和 之间没有关系`AssetId`，`ItemId`即使有，更新计数日志也会更新库存，但不会更新资产子系统。使用交叉引用可能会证明我错了。

# active-directory - 用于 Active Directory 的 Jenkins 用户定义组

> ID：12179642
> 
> 赞同：0
> 
> 时间：2012-08-29T13:57:12.110
> 
> 标签：active-directory, jenkins

我们在我们公司使用 Jenkins，我想使用现有的 ActiveDirectory 来设置访问权限。

我想将人们分组在一起，以使 Jenkins 中的访问矩阵尽可能小。

现在的问题是，我不允许在 Active Directory 中创建新组，所以我的问题是：是否可以在 Jenkins 中创建用户定义的组来组合 ActiveDirectory 用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T22:39:36.817

是的，Jenkins 可以识别 Active Directory 中的组。例如，设置基于矩阵的安全性并使用“域管理员”之类的组。

# entity-framework-4.1 - DB2 Entity Framework SQL0518N Error with Identity Column

> ID：12179654
> 
> 赞同：1
> 
> 时间：2012-08-29T13:57:44.397
> 
> 标签：entity-framework-4.1, db2-400

I am using IBM .NET Provider with .NET 4.0\. The version of DB2 is V6R1 on iSeries.

I'm trying to insert multiple rows with an identity column with Entity Framework 4.1\. When I try to insert multiple rows, it fails on the second insert statement with the following error:

```
IBM.Data.DB2.DB2Exception: ERROR 07003 IBMAS SQL0518N L'instruction désignée dans l'instruction EXECUTE n'est pas préparée ou il s'agit d'une instruction SELECT ou VALUES.
Entity Framework generate the following SQL statements in the same transaction :
select ID_IDENT as ID_IDENT from new table ( insert into DEV.N_IDENTITY( LABEL) values ( 'Label1' ) )
select ID_IDENT as ID_IDENT from new table ( insert into DEV.N_IDENTITY( LABEL) values ( 'Label2' ) )

```

I did a test with `DBCommand` and I get the same result. However, when I execute these statements with iNavigator, it works. What can I do to resolve this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:53:44.313

Après multiple recherche et test avec le support IBM. Voici la solution qui a débloqué la situation. Installer la **ptf SI48310**. Ensuite, l'insertion dans les colonnes à auto-incrément fonctionne parfaitement avec Entity Framework.

# plugins - 用于 VIM 的 Vundle 无法在 Ubuntu 上运行

> ID：12179655
> 
> 赞同：16
> 
> 时间：2012-08-29T13:57:45.307
> 
> 标签：plugins, vim, vim-plugin

[我通过此博客http://web.archive.org/web/20120731003342/http://www.charlietanksley.net/philtex/sane-vim-plugin-management](http://web.archive.org/web/20120731003342/http://www.charlietanksley.net/philtex/sane-vim-plugin-management)中给出的说明安装了 Vundle

但是在尝试运行时`:BundleInstall`出现 VIM 错误

```
E492: Not an editor command: BundleInstall 
```

这是我的`tree ~/.vim`

```
/home/max/.vim
└── bundle
    └── vundle
        ├── autoload
        │   ├── vundle
        │   │   ├── config.vim
        │   │   ├── installer.vim
        │   │   └── scripts.vim
        │   └── vundle.vim
        ├── doc
        │   └── vundle.txt
        ├── LICENSE-MIT.txt
        ├── README.md
        └── test
            ├── files
            │   └── test.erl
            ├── minirc.vim
            └── vimrc 
```

此外，在启动 VIM 时，我会得到很多`E492`s 像这样

```
Error detected while processing /home/max/.vimrc:
line    6:
E117: Unknown function: vundle#rc
line   10:
E492: Not an editor command: Bundle 'gmarik/vundle'
line   15:
E492: Not an editor command: Bundle 'tpope/vim-fugitive'
line   16:
E492: Not an editor command: Bundle 'Lokaltog/vim-easymotion'
line   17:
E492: Not an editor command: Bundle 'rstacruz/sparkup', {'rtp': 'vim/'}
line   19:
E492: Not an editor command: Bundle 'surround.vim'
line   20:
E492: Not an editor command: Bundle 'snipMate'
line   21:
E492: Not an editor command: Bundle 'tComment'
line   22:
E492: Not an editor command: Bundle 'mru.vim'
line   23:
E492: Not an editor command: Bundle 'The NERD tree'
line   24:
E492: Not an editor command: Bundle 'matchit.zip'
line   25:
E492: Not an editor command: Bundle 'Vimball'
line   26:
E492: Not an editor command: Bundle 'ScrollColors'
line   27:
E492: Not an editor command: Bundle 'L9'
line   28:
E492: Not an editor command: Bundle 'FuzzyFinder'
line   30:
E492: Not an editor command: Bundle 'git://git.wincent.com/command-t.git' 
```

这是我的`.vimrc`

```
set nocompatible

filetype off  " required!

set rtp+=~/.vim/vundle.git/ 
call vundle#rc()

" let Vundle manage Vundle
" required! 
Bundle 'gmarik/vundle'

" My Bundles here:
"
" original repos on github
Bundle 'tpope/vim-fugitive'
Bundle 'Lokaltog/vim-easymotion'
Bundle 'rstacruz/sparkup', {'rtp': 'vim/'}
" vim-scripts repos
Bundle 'surround.vim'
Bundle 'snipMate'
Bundle 'tComment'
Bundle 'mru.vim'
Bundle 'The NERD tree'
Bundle 'matchit.zip'
Bundle 'Vimball'
Bundle 'ScrollColors'
Bundle 'L9'
Bundle 'FuzzyFinder'
" non github repos
Bundle 'git://git.wincent.com/command-t.git'

" Shortcuts

noremap <C-Up> <C-W>+
noremap <C-Down> <C-W>-
noremap <C-Left> <C-W>>
noremap <C-Right> <C-W><

nnoremap ,v <C-w>v
nnoremap ,h <C-w>s
nnoremap ,, <C-w>w

map <F11> <Esc>:call libcallnr("gvimfullscreen.dll", "ToggleFullScreen", 0)<CR> 
nmap gf <S-g>
nmap f :FufFile <CR>
vmap c gc 
nmap c gcc
nmap tt :tabnew <CR>
nmap tc :tabclose <CR>
nmap ml :MRU <CR>
nmap s :w <CR>
nmap q :q! <CR>
syntax on
set mouse=a "enables mouse

" Selecting different color schemes
map <silent> ,3 :NEXTCOLOR<cr>
map <silent> ,2 :PREVCOLOR<cr>
map <silent> ,1 :SCROLL<cr>

" Directory Set up

set backup "backs up files
set backupdir=$HOME/.vimbackup
set directory=$HOME/.vimswap
set viewdir=$HOME/.vimviews
"
" silent execute '!mkdir -p $HOME/.vimbackup'
" silent execute '!mkdir -p $HOME/.vimswap'
" silent execute '!mkdir -p $HOME/.vimviews'

" au BufWinLeave * silent! mkview "makes vim save view state
" au BufWinEnter * silent! loadview "makes vim load view state

" Appearance

set columns=60

set guifont=Monaco:h11

map <F11> <Esc>:call libcallnr("gvimfullscreen.dll", "ToggleFullScreen", 0)<CR>
map <silent> ,m :e ftp://mitemiu.com/public_html/wp-content/themes/Mitemiu/<CR>
" map <silent> ,c :e ftp://www.caeious.com/public_html/wp-content/themes/caeious/<CR>
map <silent> ,c :e ftp://www.caeious.com/public_html/<CR>

color jellybeans
set tabpagemax=10 "show only 10 tabs
set background=dark

set number

set scrolloff=3 "minimum lines to keep above/below cursor
set foldenable "auto fold code

" Behaviour
" set nowrap "wrap long lines
set linebreak
:filetype plugin indent on  " lets filetype plugins be used

" if bufwinnr(1)
"   map <kPlus><C-W>+
"   map <kMinus><C-W>-  
"   map <kDivide><c-w><
"   map <kMultiply><c-w>>
" endif

set autoindent
set smartindent                                
set tabstop=4
set shiftwidth=4
set smarttab
set expandtab
set softtabstop=4
set spell

set showmatch "shows matching parens, brackets

set winminheight=0

set go-=T "eliminates tool bar in gVim
set go-=m "eliminates menu bar in gVim
set go-=r "eliminates right scroll bar
set lines=50 "50 lines of text instead of 24

set backspace=2 "makes backspace work like normally it does
:fixdel

set vb t_vb= "prevents vim from beeping when command is bad. instead it flashes screen.            

set ruler "shows statusline, displays curor position

set incsearch "vim searches text as you enter it
" set hlsearch "hilights searched items
set ignorecase "case insensitive search
set smartcase "case sensetive when using captials
set wildmenu "shows list instead of completing
set wildmode=list:longest,full "command <TAB> completeiton, lists matches,
set virtualedit=all "lets cursor freely roam anywhere like in command mode 
```

显然 Vundle 没有正确安装。**如何使 Vundle 工作？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-29T14:48:16.600

Vundle 安装在

```
~/.vim/bundle/vundle 
```

所以这条线

```
set rtp+=~/.vim/vundle.git/ 
```

应该

```
set rtp+=~/.vim/bundle/vundle 
```

* * *

```
~/.vim/vundle.git/ 
```

是包含使 Git 存储库成为 Git 存储库的所有内容的文件夹的路径。你不能指望 Vim 在那里找到可用的脚本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-02T10:35:50.517

我有这个问题使用`git commit`或`crontab -e`

这些命令似乎调用`vi`而不是`vim`

在我的 .bashrc 中设置这个修复了这个

```
export EDITOR=vim 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-25T06:05:15.957

我刚遇到问题，阅读后解决了

[https://github.com/gmarik/vundle/issues/168](https://github.com/gmarik/vundle/issues/168)

它说。

如果您通过 /usr/bin/vi 而不是 vim 显式调用 vi 编辑器（以避免任何别名），则可能会发生这种情况。在我将它配置为使用 vim 之前，一个普通的“git commit”会为我做这件事。(git config --global core.editor "vim")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-20T00:23:41.177

我遇到了同样的问题。在尝试了其他人推荐的所有方法后，都失败了。最后，我发现在我们的 Ubuntu 14.04.1 服务上，VIM 没有默认安装！

很难意识到这个问题，因为像我这样的 VIM 用户只是习惯于输入“vi”而不是“vim”，它会显示一个“VIM - 改进的 VI”欢迎页面。

所以确保你已经安装了 VIM：

```
whereis vim 
```

或者只需键入：

```
vim 
```

如果未安装，请按照建议进行操作：

```
sudo apt-get install vim 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-21T16:06:54.663

vi ~/.gitconfig

和

```
[core]

 autocrlf = false 
```

放

```
[core]

 autocrlf = true 
```

然后 $rm -rf ~/.vim/bundle/vundle

和 $git 克隆[https://github.com/gmarik/vundle.git](https://github.com/gmarik/vundle.git) ~/.vim/bundle/vundle

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-18T07:05:48.030

正如@romainl 所说，我的 vundle 安装在`.vim/bundle/Vundle.vim/`，所以你需要换行： `set rtp+=~/.vim/vundle.git/`

到 `set rtp+=~/.vim/bundle/Vundle.vim/`

是的，谢谢~

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T18:44:13.130

这里的 .vimrc 对我有用：[https ://github.com/wavded/vim-stylus/issues/26#issuecomment-13114948](https://github.com/wavded/vim-stylus/issues/26#issuecomment-13114948)

# c# - 面板上的 C# spirograph...如何另存为 BMP？

> ID：12179658
> 
> 赞同：0
> 
> 时间：2012-08-29T13:57:49.967
> 
> 标签：c#, save

我正在使用`Graphics`a`Panel`来生成螺旋图，但是当我尝试将绘图另存为 BMP（或任何文件扩展名）时，该文件仅采用面板的背景，但螺旋图不存在！有谁知道周围的方法？

```
 int rayonA = Convert.ToInt32(txtCercleFixe.Text);
        int rayonB = Convert.ToInt32(txtCercleNonFixe.Text);
        int distance = Convert.ToInt32(txtPenDistance.Text);
        int pointsParCourbe = Convert.ToInt32(txtPointsParCourbe.Text);
        int TypeCourbe = 0;

        Graphics dessin = pnlSpiro.CreateGraphics();

public void DessinHypotrochoid(ref Graphics dessin, PointF ptOrigin, int rayonA, int rayonB, int distance, int pointParCourbe, int PFC, int rouge, int vert, int bleu,bool random)
    {
        // Dim angleStep As Double = radiansPerCircle / PointsPerCurve
        double angleStep = radians / pointParCourbe;

        //' Compute number of revolutions.
        //Dim NumRevolutions As Integer = (bRadius / HighestCommonFactor(Math.Round(aRadius), Math.Round(bRadius)))
        int NumRevolution = rayonB / PFC;

        //' Total number of points to generate
        //Nombre de points totaux à générer
        //Dim NumPoints As Integer = PointsPerCurve * NumRevolutions
        int NumPoints = pointParCourbe * NumRevolution;

        //Dim oldPoint As New PointF( _
        // ptOrigin.X + aRadius - bRadius + distance, ptOrigin.Y)
        PointF oldPoint = new PointF((ptOrigin.X + rayonA - rayonB + distance), ptOrigin.Y);

        //Dim angle As Double = 0
        double angle = 0;
        //Dim aMinusb As Double = aRadius - bRadius
        double aMoinsB = rayonA - rayonB;
        //Dim aMinusbOverb As Double = aMinusb / bRadius
        double aDiviseB = aMoinsB / rayonB;
        //Dim pt As Integer
        //For pt = 0 To NumPoints - 1
        // On fait le dessin.

        for (int pt = 0; pt <= NumPoints; pt += 1)
        {
            angle += angleStep;
            PointF newPoint = new PointF((float)(ptOrigin.X + aMoinsB * Math.Cos(angle) + distance * Math.Cos(angle * aDiviseB)),(float)(ptOrigin.Y + aMoinsB * Math.Sin(angle) - distance * Math.Sin(angle * aDiviseB)));
            if (pt == 0)
            {
                oldPoint = newPoint;
            }
            if (random == false)
            {
                Pen Pinceau = new Pen(Color.FromArgb(rouge, vert, bleu), 1);
                dessin.DrawLine(Pinceau, oldPoint, newPoint);
            }
            else
            {
                Random r = new Random();
                Pen Pinceau = new Pen(Color.FromArgb(r.Next(0, 256), r.Next(0, 256), r.Next(0, 256)), 1);
                dessin.DrawLine(Pinceau, oldPoint, newPoint);
            }

            oldPoint = newPoint;
        }
        dessin.Flush();
        dessin.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:06:43.130

您不能直接从 Panel 的 Graphics 对象保存位图。

首先，您必须创建一个 Bitmap 对象并从中派生 Graphics。然后，一旦绘图完成，您可以根据需要重新使用位图：将其保存到磁盘或显示在图片框中，或两者兼而有之！

本文将向您展示有关如何执行此操作的详细信息[。](http://www.techotopia.com/index.php/Using_Bitmaps_for_Persistent_Graphics_in_C_Sharp)

# java - 如何在 Eclipse 中使用 JavaPOS 进行开发？

> ID：12179659
> 
> 赞同：7
> 
> 时间：2012-08-29T13:57:49.833
> 
> 标签：java, eclipse, javapos

我是[JavaPOS](http://www.javapos.com/)的新手。我想创建一个使用 JavaPOS 的在线 Java POS 应用程序。无论品牌如何，都可以访问 POS 外围设备吗？Epson ADK 是否也足以访问其他品牌？更重要的是，它可以通过网络访问吗？

如何在 Eclipse 中开始使用 JavaPOS 进行编码？我找到了一篇关于部署的论文（[JavaPOS 部署](http://www.javapos.com/downloads/JavaPOS-Deployment_20040212.pdf)），但它没有说明任何关于开发的内容。我还找到了一些示例，但我不知道如何在 eclipse 中进行设置？首先我应该把它放在哪里`jpos.xml`？我已经做了健康检查，没问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T01:28:10.000

我找到的文档还不够。我在他的项目中找到了一个使用 JavaPOS 的 github 存储库。我刚刚检查了一下，它以某种方式工作。[https://github.com/emigonza](https://github.com/emigonza)。感谢 emigonza 和他的例子，我有一个先机。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T14:56:35.260

根据[javaPOS site](http://www.javapos.com/public.app.guide.10.html)，有一个*JavaPOS v1.10 Guide for Application and Device Programmers*，从版本 1.10 开始，它是

> 应用程序和设备程序员的 JavaPOS v1.10 指南现在可从位于 UnifiedPOS v1.10 规范中的[Arts 网站获得。](http://www.nrf-arts.org/)

跟随此链接一无所获……在 Arts 网站上的搜索*没有产生任何结果*。死胡同？不太确定...

很容易找到

*   JavaPOS[常见问题解答](http://www.docstoc.com/docs/41083511/JavaPOS-FAQ-pos-software)
*   [JavaPOS 驱动程序套件](http://www.toshibatec-eu.com/upl/default/default/doc/ST-B10_JavaPOSDriverKitOperationManual_1st.pdf)手册
*   [Java for Retail POS prgrammer's manual v 1.6](http://www.javapos.com/downloads/JPOS_Version_1_6.pdf)

我想这足以作为一个开始，不是吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T18:08:44.263

[UnifiedPOS Spec](https://nrf.com/resources/retail-technology-standards/unifiedpos)（必须在那里注册才能下载）

检查**“*附录 B*：零售 POS 的 Java — JavaPOS 实现参考”**。这是 JavaPOS 开发指南。这实际上与您在 JavaPOS 开发方面所获得的一样好，至少据我所知。

# sharepoint - 我可以将 Sharepoint 2007 列表迁移到 Sharepoint 2010 吗？

> ID：12179663
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:58:15.190
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

有谁知道将 Sharepoint 2007 列表迁移到 Sharepoint 2010 的简单方法 - 包括列名和链接等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:20:32.700

您可以使用共享点列表模板轻松完成此操作。如果您需要学习列表模板的基础知识，请观看[此](http://www.youtube.com/watch?v=8YVV7UTeELU)视频。要使用列表模板将列表从 2007 迁移到 2010，请阅读[本文](http://tom-dw.blogspot.com.au/2010/06/importing-sharepoint-2007-list.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:24:14.477

市场上有几种工具。您必须购买工具并将这些内容和列名迁移到 sharepoint 2010。这些工具还维护安全性和许多元数据。如果您有任何问题，请随时与我联系

# .net - 从共享目录部署 .Net 应用程序

> ID：12179664
> 
> 赞同：1
> 
> 时间：2012-08-29T13:58:16.417
> 
> 标签：.net, vb.net, deployment, .net-3.5, clickonce

我们计划将 Click Once 部署用于应用程序库。由于我工作所在的安全和政治环境，我无法设置网络服务器来执行此操作。我有一个测试应用程序 exe 与发布版本中生成的文件一起位于共享目录中，并且它可以工作。我从未编程过我的应用程序是从共享驱动器执行的位置。它一直是直接安装或网络。

这是可接受的部署策略吗？如果它“有效”在哪里好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:01:59.337

ClickOnce 关闭共享驱动器是受支持的选项，并且运行良好。

我自己也使用过这种机制。

请参阅MSDN 上的[发布 ClickOnce 应用程序](http://msdn.microsoft.com/en-us/library/748fh114.aspx)。

从[如何：指定最终用户将安装的位置](http://msdn.microsoft.com/en-us/library/c37e68bc.aspx)：

> 在安装 URL 字段中，使用格式为[http://www.microsoft.com/ApplicationName](http://www.microsoft.com/ApplicationName)的完全限定 URL或**使用格式 \Server\ApplicationName 的 UNC 路径**输入安装位置。

（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:01:45.020

我认为您应该可以使用 ClickOnce 将安装文件部署到网络共享。

*直接*从网络共享运行应用程序 (.exe)很容易出现问题，因为网络位置上的应用程序不像本地驱动器上那样受信任（由于 .NET 框架的默认策略，该策略[在 3.5 SP1 中修复](http://blogs.msdn.com/b/vancem/archive/2008/08/13/net-framework-3-5-sp1-allows-managed-code-to-be-launched-from-a-network-share.aspx)，然后被破坏再次在 4.0 中）

如果你真的想做后者，你必须[完全信任共享](http://blogs.msdn.com/b/shawnfa/archive/2004/12/30/344554.aspx)

# jsp - 为什么我的数据在构建时可用，但在渲染时不可用？

> ID：12179672
> 
> 赞同：2
> 
> 时间：2012-08-29T13:58:42.447
> 
> 标签：jsp, jsf, components, jstl, facelets

我已经阅读了许多答案和页面，但我似乎找不到与我自己相似的情况（我当时猜测，我的错误只是一个愚蠢的错误）。

我只是想打印出一个项目列表。c:forEach 有效...但 ui:repeat 无效（我的任何 primefaces 数据网格/表格也无效）。

```
<html xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:composition template="/templates/pageLayout.xhtml">
        <ui:define name="windowTitle">Manage my Worklists</ui:define>
        <ui:define name="pageContent">

            <h:outputStylesheet library="css" name="puradmin-style.css"  />

            <h:form id="manage-worklist" prependId="false">
                <br/>
                <c:forEach items="#{manageWorklistBean.givenAccessList}" var="friend">
                    <h:outputText value="* #{friend.receivingUser.name}" />
                    <br/>
                </c:forEach>
                <br/>
                <ui:repeat value="#{manageWorklistBean.givenAccessList}" var="friend">
                    <h:outputText value="* #{friend.receivingUser.name}" />
                    <br/>
                </ui:repeat>
            </h:form>
        </ui:define>
    </ui:composition>
</html> 
```

这是我的输出：

* 朋友一
* 朋友二
* 朋友三
*
*
*

有没有人有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:29:17.213

给定三个空`*`行，迭代因此完美地工作，但`var`由于某种原因无法解析属性表示的每个项目。一个可能的原因是`var`视图渲染期间 EL 范围内的属性命名冲突，这很可能是由于在同一视图中使用另一个 JSF 迭代组件而导致的，该组件也使用相同的`var`属性名称。正如问题评论中所证实的那样，给它一个不同且唯一的名称应该可以解决问题。

# java - Spring DMLC 在负载测试后停止显示消息

> ID：12179676
> 
> 赞同：0
> 
> 时间：2012-08-29T13:58:56.390
> 
> 标签：java, spring, jboss, jms

我在独立环境中使用 Spring3.1。

我已经配置了 DMLC(DefaultMessageListenerContainer) 来监听远程 jboss4 服务器上的远程主题。

在收到 200000 条消息后，我的情况很糟糕，我收到的消息率很高（可能会更少）

侦听器在没有错误/警告的情况下停止接收消息。

但另一方面，应用程序仍在运行。（还有什么我需要杀死 -9 进程和常规 ./stop 脚本无济于事）

我配置错了什么？

这是我的配置：

```
<bean id="TgwListenerDLMC"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="topicConnFactory" />
    <property name="pubSubDomain" value="true" />
    <property name="destinationResolver" ref="destinationResolver" />
    <property name="concurrentConsumers" value="1" />
    <property name="destinationName" value="/topic/TopicRealTime" />
    <property name="messageListener" ref="TgwMDB" />
    <property name="sessionAcknowledgeModeName" value="AUTO_ACKNOWLEDGE" />
    <property name="recoveryInterval" value="5000" />

</bean>

<bean id="topicConnFactory"
        class="org.springframework.jms.connection.CachingConnectionFactory">
        <property name="targetConnectionFactory" ref="jndiTopicConnFactory" />
        <property name="reconnectOnException" value="true" />
        <!-- Number of sessions that will be cached -->
        <property name="sessionCacheSize" value="20" />
    </bean>

    <bean id="jndiTopicConnFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate" />
    <!-- JNDI name of connection factory as defined by provider -->
    <property name="jndiName" value="ConnectionFactory" />
</bean>

<bean id="destinationResolver"
    class="org.springframework.jms.support.destination.JndiDestinationResolver">
    <property name="jndiTemplate" ref="jndiTemplate" />
    <property name="cache" value="true" />
    <!--
        do not create a dynamic destination if the destination name is not
        found in JNDI
    -->
    <property name="fallbackToDynamicDestination" value="false" />
</bean>

<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.provider.url">${java.naming.provider.url}</prop>
            <prop key="java.naming.factory.initial">${java.naming.factory.initial}</prop>
            <prop key="java.naming.factory.url.pkgs">${java.naming.factory.url.pkgs}</prop>
        </props>
    </property>
</bean> 
```

这是使用 jstack 打印的 ThreadDump：

```
[Loaded sun.reflect.GeneratedConstructorAccessor17 from __JVM_DefineClass__]
2012-08-29 14:45:37,771 org.springframework.jms.connection.CachingConnectionFactory [WARN] Encountered a JMSException - resetting the underlying JMS Connection

javax.jms.JMSException: Failure on underlying remoting connection
        at org.jboss.jms.client.remoting.ConsolidatedRemotingConnectionListener.handleConnectionException(ConsolidatedRemotingConnectionListener.java:102)
        at org.jboss.remoting.ConnectionValidator$1.run(ConnectionValidator.java:608)
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor88 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor89 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor90 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor91 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor92 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor93 from __JVM_DefineClass__]
[Loaded sun.reflect.GeneratedSerializationConstructorAccessor94 from __JVM_DefineClass__] 
```

谢谢，雷。

# datetime - 在生日字段中留一个空字段，只取日期或月份？- Symfony2

> ID：12179677
> 
> 赞同：0
> 
> 时间：2012-08-29T13:58:59.707
> 
> 标签：datetime, symfony

我的表单中有一个生日字段，但我希望用户能够选择他想要的任何内容 - 填写`day, month and year`或仅填写`day and month`。有没有办法让这一年空着？

另外我想问一下输入数据是否是 DateTime 对象；我可以以某种方式只取某个变量中的一天，还是只取一个月......或者它应该是一个数组来做到这一点？我想要这个，因为我希望我的应用程序通知用户今天是否有人过生日。

这是我的代码：

```
 $builder->add('birthday', 'birthday', array(
        'widget' => 'choice',
        'format' => 'dd-MMMM-yyyy',
        'pattern' => 'dd-MMMM-yyyy',
        'years' => range(date('Y'), date('Y')-70),
        'label' => 'Birthday: ',
        'error_bubbling' => true,
        'required' => false)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:31:36.700

我不知道你问题的第一部分，但第二部分很容易：

```
$date = new DateTime('2012-08-29');
$month = $date->format('m');
$day = $date->format('d');
echo $day;
echo $month; 
```

见：[http ://www.php.net/manual/en/datetime.format.php](http://www.php.net/manual/en/datetime.format.php)

# c# - 如何允许只读绑定到自定义控件 DependencyProperty 的内部属性？

> ID：12179679
> 
> 赞同：1
> 
> 时间：2012-08-29T13:58:58.850
> 
> 标签：c#, wpf, binding, dependency-properties

我正在开发一个基于自定义类的`CustomControl`公开.`DependencyProperty` `SearchRange``Range`

```
public class MyCustomControl : Control
{
    public static readonly DependencyProperty SearchRangeProperty
        = DependencyProperty.Register(
            "SearchRange",
            typeof (Range<DateTime>),
            typeof (VariableBrowser));

    // ...

    public Range<DateTime> SearchRange
    {
        get { return (Range<DateTime>)this.GetValue(SearchRangeProperty); }
        set { this.SetValue(SearchRangeProperty, value); }
    }

    // ...
} 
```

该类`Range`包含两个不同的属性，`Minimum`和`Maximum`，它实现了`INotifyPropertyChanged`。

```
public class Range<T> : INotifyPropertyChanged where T : IComparable
{
    private T _maximum;
    private T _minimum;

    public T Maximum
    {
        get { return this._maximum; }
        set
        {
            this._maximum = value;
            this.OnPropertyChanged("Maximum");
        }
    }

    public T Minimum
    {
        get { return this._minimum; }
        set
        {
            this._minimum = value;
            this.OnPropertyChanged("Minimum");
        }
    }

    // ...
} 
```

我遵循的规范要求使用我的自定义控件的应用程序应该能够绑定到`SearchRange`属性，以便读取其内部值（`Minimum`和`Maximum`），因为这些必须在内部处理并仅由我的`CustomControl`. 绑定目标应在`SearchRange`属性或其内部道具（`Minimum`和`Maximum`）发生任何变化后更新，而无需重新分配整个`SearchRange`. 或者，我应该允许直接绑定到内部属性（`SearchRange.Minimum`和`SearchRange.Maximum`）。

我尝试了许多不同的方法来达到这个结果，但没有一个成功。我怎样才能获得所需的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:06:36.540

最小值和最大值应该有两个依赖属性，注册一个[属性更改回调](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)。然后，在此回调中，您可以从新值构造一个范围并[`SetCurrentValue`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.setcurrentvalue.aspx)在范围属性上使用（这使绑定保持不变）。您还可以为使用 SetCurrentValue 更新其他两个属性的范围属性提供回调。

伪代码：

```
private static void MinChangedCallback(DependencyObject o, TheRightKindOfArgs e)
{
    var control = (MyCustomControl)o;
    control.UpdateRange((DateTime)e.NewValue, Maximum);
}
private static void MaxChangedCallback(DependencyObject o, TheRightKindOfArgs e)
{
    var control = (MyCustomControl)o;
    control.UpdateRange(Minimum, (DateTime)e.NewValue);
}

private void UpdateRange(DateTime min, DateTime max)
{
    var range = new Range<DateTime>(min, max);
    SetCurrentValue(SearchRangeProperty, range);
} 
```

# iphone - WhirlyGlobe 框架 - 旋转到坐标

> ID：12179683
> 
> 赞同：0
> 
> 时间：2012-08-29T13:59:07.450
> 
> 标签：iphone, objective-c, ios

如何使地球在特定坐标处旋转？我想将地球旋转到 URL 中的特定坐标。我设法做到了，但只有在应用程序关闭时。当它在后台时，它只是移动到南极附近的某个位置，无论我给它的坐标是什么。

这是代码：

```
- (void)moveToLocation
{
    WhirlyGlobe::GeoCoord startCoord;

    // If the app wasn started from URL
    if ([[GlobalValues sharedGlobalValues] enteredFromURL])
    {
        float lat = [[GlobalValues sharedGlobalValues] sharedLat];
        float lon = [[GlobalValues sharedGlobalValues] sharedLon];

        // Set the shared location
        startCoord = WhirlyGlobe::GeoCoord::CoordFromDegrees(lon, lat);
        // Calculate the rotation and make it
        Eigen::Quaternionf startLoc = [self.theView makeRotationToGeoCoord:startCoord keepNorthUp:YES];
        self.theView.delegate = [[[AnimateViewRotation alloc] initWithView:self.theView rot:startLoc howLong:5.0] autorelease];
    }
} 
```

另外，我怎样才能使它缩放？当应用程序从 url 启动时，它会旋转 + 缩放，但当它在后台时，它不会缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:47:51.903

尝试保留 AnimateViewRotation 委托。如果它在幕后被释放，动画可能会消失。

另外，如果可以的话，我建议切换到 WhirlyGlobe 组件。使用起来要简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T11:40:43.867

检查名为“animateToPosition”的方法
示例：

```
 [globeViewC animateToPosition:MaplyCoordinateMakeWithDegrees(75.011509, 15.8377301) time:1.0]; 
```

# php - 通过 SOAP API 和 PHP 创建 JIRA 问题

> ID：12179685
> 
> 赞同：0
> 
> 时间：2012-08-29T13:59:21.320
> 
> 标签：php, soap, jira

我无法通过 PHP 中的 SOAP API 创建问题。我试过这个：

```
$soapClient = new SoapClient("http://jira:9090/rpc/soap/jirasoapservice-v2?wsdl");
$token = $soapClient->login('user', 'pass');
$issue=array(
    'type'=>3,
    'priority'=>3,
    'project'=>'XXX',
    'duedate'=>time(),
    'components'=>'',
    'versions'=>'',
    'fixVersions'=>'',
    'assignee'=>'user1',
    'reporter'=>'user1',
    'environment'=>'',
    'description'=>'test',
    'summary'=>'test',
    'timetracking'=>'',
    'attachment'=>'',
    'labels'=>''
);
$soapClient->createIssue($token, $issue); 
```

但是当我运行这个脚本时，新问题不会在 JIRA 中创建。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:35:17.903

确保：

*   项目名称正确
*   问题类型 3 存在并包含所有这些字段
*   `user1`（来自问题字段）有权成为该项目的受让人和报告者（尝试手动执行）
*   `user`（来自身份验证）有权在此项目中创建新问题（使用用户手动登录并尝试创建问题）

对`duedate'=>time()`我来说工作正常。实际上，我拿了你的代码，更改了项目、记者和受让人的名字，它在 Jira 4.4.4 下对我有用。

奇怪的是，如果有问题你会得到一个错误，你是如何尝试执行 php 文件的？尝试手动运行它以检查错误。为此，请创建一个带有以下标头的 PHP 文件：

```
#!/usr/bin/php 
```

给它运行权限`chmod +x myscript.php` 并执行它`./myscript.php`。如果您从 Web 服务器运行它，请检查`/var/log/httpd/error_log`错误。确保您已安装 SOAP：

```
[root@localhost]# cat /etc/php.d/soap.ini
; Enable soap extension module
extension=soap.so 
```

如果您发现任何错误，请更新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:05:34.987

您的问题查询必须是一个对象

```
$issueQuery = new stdClass; 
```

您的所有字段都必须在一个数组中

```
$customFields = array(); 
```

您的自定义字段必须是一个对象

```
$fieldOBJ = new stdClass;
$fieldOBJ->customfieldId = 'customfield_10237';
$fieldOBJ->key = '';
$fieldOBJ->values = array(utf8_encode($value)); 
```

将其添加到数组

```
$customFields[] = $fieldOBJ; 
```

将自定义字段添加到问题查询（和其他主要字段）

```
$issueQuery->customFieldValues = $customFields; 
```

创建问题（$token 是您的连接）

```
$issueCreated = $soapClient->createIssue($token, $demande); 
```

而已！$issueCreated 将是返回的问题密钥

# clojure - Clojure 中的工作队列

> ID：12179697
> 
> 赞同：10
> 
> 时间：2012-08-29T13:59:49.387
> 
> 标签：clojure, queue

我正在使用 Clojure 应用程序从 Web API 访问数据。我将发出大量请求，其中许多请求将导致发出更多请求，因此我想将请求 URL 保留在队列中，以便在后续下载之间留出 60 秒。

在[这篇博文之后](http://blog.marrowboy.co.uk/2011/10/21/worker-queues-in-clojure/)，我把它放在一起：

```
(def queue-delay (* 1000 60)) ; one minute

(defn offer!
  [q x]
  (.offerLast q x)
  q)

(defn take!
  [q]
  (.takeFirst q))

(def my-queue (java.util.concurrent.LinkedBlockingDeque.))

(defn- process-queue-item
  [item]
  (println ">> " item)   ; this would be replaced by downloading `item`
  (Thread/sleep queue-delay)) 
```

如果我`(future (process-queue-item (take! my-queue)))`在代码中的某处包含 a ，那么我可以在 REPL 中`(offer! my-queue "something")`看到“>> something”立即打印出来。到现在为止还挺好！但是我需要队列在我的程序处于活动状态的整个过程中持续存在。我刚刚提到的`(future ...)`调用可以将一个项目从队列中拉出，一旦它可用，但我想要一些能够持续观察队列并`process-queue-item`在有可用时调用的东西。

此外，与 Clojure 通常对并发的热爱相反，我想确保一次只发出一个请求，并且我的程序等待 60 秒以发出每个后续请求。

我认为[这个 Stack Overflow 问题](https://stackoverflow.com/questions/2760017/producer-consumer-with-qualifications)是相关的，但我不确定如何调整它来做我想做的事情。如何连续轮询我的队列并确保一次只运行一个请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T16:20:23.970

[这是我为乐趣而做的一个项目](https://github.com/jeremyheiler/trabajo/blob/master/src/trabajo/core.clj#L98)的代码片段。它并不完美，但可以让您了解我是如何解决“等待 55 秒等待第一项”问题的。它基本上循环通过承诺，使用期货立即处理事情或直到承诺“变得”可用。

```
(defn ^:private process
  [queues]
  (loop [[q & qs :as q+qs] queues p (atom true)]
    (when-not (Thread/interrupted)
      (if (or
            (< (count (:promises @work-manager)) (:max-workers @work-manager))
            @p) ; blocks until a worker is available
        (if-let [job (dequeue q)]
          (let [f (future-call #(process-job job))]
            (recur queues (request-promise-from-work-manager)))
          (do
            (Thread/sleep 5000)
            (recur (if (nil? qs) queues qs) p)))
        (recur q+qs (request-promise-from-work-manager)))))) 
```

也许你可以做类似的事情？代码不是很好，可能需要重新编写才能使用`lazy-seq`，但这只是我还没有做的练习！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T07:52:03.330

这很可能很疯狂，但你总是可以使用这样的函数来创建一个慢下来的惰性序列：

```
(defn slow-seq [delay-ms coll]
  "Creates a lazy sequence with delays between each element"
  (lazy-seq 
    (if-let [s (seq coll)]
        (do 
          (Thread/sleep delay-ms)
          (cons (first s)
                (slow-seq delay-ms (rest s))))))) 
```

这将基本上确保每个函数调用之间的延迟。

您可以将其与以下内容一起使用，以毫秒为单位提供延迟：

```
(doseq [i (slow-seq 500 (range 10))]
  (println (rand-int 10)) 
```

或者，您可以将函数调用放在序列中，例如：

```
(take 10 (slow-seq 500 (repeatedly #(rand-int 10)))) 
```

显然，在上述两种情况下，您都可以替换`(rand-int 10)`为用于执行/触发下载的任何代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:02:22.677

我最终推出了自己的小型库，我称之为[simple-queue](https://github.com/bdesham/simple-queue)。你可以在 GitHub 上阅读完整的文档，但这里是完整的源代码。**我不会更新这个答案，所以如果你想使用这个库，请从 GitHub 获取源代码。**

```
(ns com.github.bdesham.simple-queue)

(defn new-queue
  "Creates a new queue. Each trigger from the timer will cause the function f
  to be invoked with the next item from the queue. The queue begins processing
  immediately, which in practice means that the first item to be added to the
  queue is processed immediately."
  [f & opts]
  (let [options (into {:delaytime 1}
                      (select-keys (apply hash-map opts) [:delaytime])),
        delaytime (:delaytime options),
        queue {:queue (java.util.concurrent.LinkedBlockingDeque.)},
        task (proxy [java.util.TimerTask] []
               (run []
                 (let [item (.takeFirst (:queue queue)),
                       value (:value item),
                       prom (:promise item)]
                   (if prom
                     (deliver prom (f value))
                     (f value))))),
        timer (java.util.Timer.)]
    (.schedule timer task 0 (int (* 1000 delaytime)))
    (assoc queue :timer timer)))

(defn cancel
  "Permanently stops execution of the queue. If a task is already executing
  then it proceeds unharmed."
  [queue]
  (.cancel (:timer queue)))

(defn process
  "Adds an item to the queue, blocking until it has been processed. Returns
  (f item)."
  [queue item]
  (let [prom (promise)]
    (.offerLast (:queue queue)
                {:value item,
                 :promise prom})
    @prom))

(defn add
  "Adds an item to the queue and returns immediately. The value of (f item) is
  discarded, so presumably f has side effects if you're using this."
  [queue item]
  (.offerLast (:queue queue)
              {:value item,
               :promise nil})) 
```

使用此队列返回值的示例：

```
(def url-queue (q/new-queue slurp :delaytime 30))
(def github (q/process url-queue "https://github.com"))
(def google (q/process url-queue "http://www.google.com")) 
```

调用将阻塞，因此两个语句`q/process`之间会有 30 秒的延迟。`def`

使用此队列纯粹用于副作用的示例：

```
(defn cache-url
  [{url :url, filename :filename}]
  (spit (java.io.File. filename)
        (slurp url)))

(def url-queue (q/new-queue cache-url :delaytime 30))
(q/add url-queue {:url "https://github.com",
                  :filename "github.html"})    ; returns immediately
(q/add url-queue {:url "https://google.com",
                  :filename "google.html"})    ; returns immediately 
```

现在调用`q/add`立即返回。

# jetty - 使用 jetty 仅服务多个子域中的一个

> ID：12179698
> 
> 赞同：1
> 
> 时间：2012-08-29T13:59:51.727
> 
> 标签：jetty, jetty-8

多个域和子域指向我的服务器。我只想为其中一两个提供超过 8080 的码头服务，其余的应该被码头忽略。

有没有办法做到这一点？（好的，我确定有一个，但我不知道怎么做）我在 Ubuntu 12.04 上使用 Jetty 8

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:24:12.053

您要使用的是虚拟主机。 [http://wiki.eclipse.org/Jetty/Howto/Configure_Virtual_Hosts](http://wiki.eclipse.org/Jetty/Howto/Configure_Virtual_Hosts)

但是，请注意，这适用于您部署的 web 应用程序，而不是所有的 jetty。这是因为 Jetty 将绑定/侦听您指定的接口（IP 地址）上的端口 8080，并且必须接受连接，接受 HTTP 请求，然后确定浏览器要求的主机名/域。

# wpf - 从 WPF DataGrid 中的按钮触发 RelayCommand

> ID：12179701
> 
> 赞同：13
> 
> 时间：2012-08-29T13:59:59.327
> 
> 标签：wpf, mvvm, command

我有一个`DataGrid`显示在 XAML 中定义的客户列表，如下绑定到我的 ViewModel：

```
<DataGrid Name="CustomersDataGrid" ItemsSource="{Binding Customers}">
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Command="{Binding showCustomerCommand}" 
                        Content="{Binding Path=Name}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

网格的显示工作正常。我希望能够显示单个客户的详细信息。以前，我为选定的行设置了一个绑定，并在页面上有一个绑定到以下命令的按钮：

```
RelayCommand _showCustomerCommand;
public ICommand showCustomerCommand
{
    get
    {
        if (_showCustomerCommand == null)
        {
            _showCustomerCommand = new RelayCommand(param => this.ShowCustomer());
        }
        return _showCustomerCommand;
    }
}

private void ShowCustomer()
{
    if (Parent != null)
    {
        // Handle Customer Display Here
    }
} 
```

这工作得很好。但我希望能够单击单个行内的按钮，而不是基于选定行的单个按钮。我知道上述 XAML 中的数据上下文是错误的，但我不知道如何纠正它，也不知道如何传递按钮按下的特定行。任何和所有帮助我连接我的嵌入式按钮的建议都非常感谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-05T10:57:53.623

这将帮助你

```
<DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <Button 
                          Command="{Binding Path=DataContext.showCustomerCommand,       
 RelativeSource= {RelativeSource FindAncestor,
  AncestorType={x:Type DataGrid}}}">
                            </Button>
                        </StackPanel>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T15:46:51.703

[此](https://stackoverflow.com/questions/1168976/wpf-datagrid-button-in-a-column-getting-the-row-from-which-it-came-on-the-cli)问题/答案看起来与您要查找的内容相似。

您可以将行的ID绑定到命令参数

```
<Button Click="Button_Click" Command="{Binding showCustomerCommand}" 
    CommandParameter="{Binding Path=ID}">View Details</Button> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-06T01:29:05.563

Resharper/Intellisense 推理在`DataGridTemplate`.

这可能会导致混淆，为了纠正这种情况，DataTemplate 应该有一个明确的 DataType 引用该行绑定到的类型。

我发现有两种方法可以解决您的问题，使用相对绑定的命令，以便它使用 DataGrid 的上下文进行绑定，而不是当前行，或者在具有您的上下文的元素上创建 x:Name 属性希望绑定到。

我相信，如果您尝试访问祖先，则相对绑定会更清晰，但是如果您需要绑定到树中其他地方的某些东西，那么 ElementName 可能会允许这样做。

XAML：

```
<Window x:Class="TestBindings.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TestBindings"
        mc:Ignorable="d"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:WindowViewModel/>
    </Window.DataContext>
    <Grid ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <GroupBox x:Name="Test"  Header="Grid" Grid.Column="0"> <!-- #2 Add a name to the element you need to bind to. -->
            <DataGrid ItemsSource="{Binding RowList}" IsSynchronizedWithCurrentItem="True" SelectionUnit="FullRow" >
                <DataGrid.Columns>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate DataType="local:RowViewModel"><!-- Needed for correct inference in XAML editor -->
                                <!-- #1 Cleaner solution as it doesn't depend on names -->
                                <Button Content="{Binding Path=RowCount}" Command="{Binding Path=DataContext.NineCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}" />
                                <!-- #2 Naming the element explicitly probably allows you to jump elsewhere in the tree -->
                                <Button Content="{Binding Path=RowCount}" Command="{Binding Path=DataContext.NineCommand, ElementName=Test}" CommandParameter="{Binding}" />

                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>
        <GroupBox Header="{Binding Path=SelectedRow.RowCount}" Grid.Column="1">
            <Label Content="{Binding Path=RowList/RowCount}"></Label>
        </GroupBox>
    </Grid>
</Window> 
```

班级：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Data;
using System.Windows.Input;
using Microsoft.Expression.Interactivity.Core;
using Microsoft.Practices.Prism.ViewModel;

namespace TestBindings
{
    public class RowViewModel : NotificationObject
    {
        private static int _max = 0;
        private int _rowCount;

        public int RowCount
        {
            get { return _rowCount; }
            set
            {
                if (_rowCount == value) return;
                _rowCount = value;
                RaisePropertyChanged(nameof(RowCount));
            }
        }

        public RowViewModel()
        {
            _rowCount = _max++;
        }
    }

    public class TypedCommand<T> : ICommand
    {
        private readonly Predicate<T> _canExecute;
        private readonly Action<T> _execute;

        public TypedCommand(Action<T> execute, Predicate<T> canExecute = null)
        {
            this._canExecute = canExecute;
            this._execute = execute;
        }

        public bool CanExecute(object parameter)
        {
            return _canExecute == null || _canExecute((T) parameter);
        }

        public void Execute(object parameter)
        {
            _execute?.Invoke((T) parameter);
        }

        public event EventHandler CanExecuteChanged;
    }

    public class WindowViewModel : NotificationObject
    {
        public ObservableCollection<RowViewModel> RowList { get; } = new ObservableCollection<RowViewModel>();

        private RowViewModel _selectedRow;

        public RowViewModel SelectedRow
        {
            get { return _selectedRow; }
            private set
            {
                if (_selectedRow == value) return;
                _selectedRow = value;
                RaisePropertyChanged(nameof(SelectedRow));
            }
        }

        private static readonly Action<RowViewModel> DeleteAction = new Action<RowViewModel>(row => row.RowCount=99);

        public ICommand NineCommand { get; } = new TypedCommand<RowViewModel>(DeleteAction);

        public WindowViewModel()
        {
            //0
            RowList.Add(new RowViewModel());
            //1
            RowList.Add(new RowViewModel());
            //2
            RowList.Add(new RowViewModel());
        }
    }
} 
```

# python - 从python，使用“ctr c”信号取消C脚本到命令行

> ID：12179704
> 
> 赞同：1
> 
> 时间：2012-08-29T14:00:14.287
> 
> 标签：python, c

我使用系统调用从 C 脚本调用 python 脚本（我知道这不是最佳实践，但现在它完成了预期的工作）。

当 C 在命令行上运行时，我可以使用 Ctrl-C 取消它。

当我运行 python 脚本时，当代码遵循特定的 if 子句时，我想使用 Ctr-C 调用命令行来取消 C 脚本，就像我可以手动执行一样。

请问这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:07:08.257

```
import signal
import os

os.kill(0, signal.CTRL_C_EVENT) 
```

# android - 如果 Play 应用程序具有非空堆栈，如何使后退按钮直接从 Google Play 返回到启动它的应用程序？

> ID：12179712
> 
> 赞同：1
> 
> 时间：2012-08-29T14:00:40.690
> 
> 标签：android, android-intent, google-play, back

我正在从我的应用程序的 HelpActivity 启动 Google Play，如下所示：

```
Uri uri = Uri.parse("market://search?q=pub:\"Some Developer\"");
Intent playIntent = new Intent(Intent.ACTION_VIEW, uri);
playIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY 
                    | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);              
startActivity(playIntent); 
```

就在执行此代码之前，我手动进入 Google Play，从第一页选择应用程序，然后选择当前功能的应用程序（在本例中为 Pandora）。这会在 Google Play 内部建立一个堆栈，如果在 Google Play 中按下后退按钮，将通过该堆栈返回。

运行上述代码时，Google Play 会出现并按预期导航到某些开发人员的应用程序列表。

问题是，当我按下后退按钮时，我会通过 Google Play 堆栈返回，访问 Pandora，然后是主应用程序页面，然后是 Google Play 的主页面，最后返回到我自己的应用程序（在第四次按下返回按钮）。

我想要发生的是让“后退”按钮将我直接带回我自己的应用程序，而将先前建立的 Google Play 应用程序堆栈保留为我的应用程序最初找到的堆栈。

我尝试了 Intent 标志的各种组合，但无济于事。

我应该补充一点，我的应用程序针对的是 API 8。

当用户在主活动的选项菜单上按下帮助时，HelpActivity 本身是从我的主活动启动的。这是执行该启动的代码：

```
.
.
.
else if(itemID == R.id.menu_help) {
  Intent helpIntent = new Intent(this, HelpActivity.class);
  helpIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  helpIntent.setAction(Intent.ACTION_MAIN);
  startActivity(helpIntent);
} 
```

此外，HelpActivity 在我的应用程序清单中以不寻常的方式声明：

```
 <activity android:name="com.mycompany.HelpActivity"
              android:label="@string/app_help"
              android:configChanges="keyboardHidden|orientation|keyboard|locale|mcc|mnc|touchscreen|screenLayout|fontScale"
              android:launchMode="singleInstance"
              android:taskAffinity="com.mycompany.helpactivity"
              android:clearTaskOnLaunch="true"
              android:alwaysRetainTaskState="true"
              android:process=":fbhelp"
              android:stateNotNeeded="true"
              android:excludeFromRecents="true"
              > 
```

其中一些属性似乎与此问题有关，这就是为什么我将这部分包含在清单中的原因。此活动在其自己的进程中运行，以避免在我的主应用程序中消耗堆。它被排除在最近，因为我不希望用户将它与我的应用程序分开。在用户多次启动它的情况下，它是 singleInstance 以防止不可见实例的累积。

我尝试了各种 Intent 标志，但似乎没有达到我想要的结果。

我发现这种异常行为在运行 Android 2.3.3 的 Nexus One 手机上可以可靠地重现。

我还在运行 Android 2.2.1、CyanogenMod-6.1.0-Droid 的 Moto Droid 上重现了它，并且异常行为也存在于那里。它运行的是 Android Market 应用程序，而不是 Google Play；我没有更新的计划，因为这是一个测试设备，大多数用户不会经历手动更新的过程。

我还在运行 Android 2.2.1、CyanogenMod-6.1.0-DS 的 G1 上复制了它，它也运行旧的 Android Market 应用程序。

但是，在我运行 2.3.3 的 GTablet 上完全没有它。因此，它可能在某种程度上是操作系统（CM7 的风格）或 GP 应用程序，是特定的，因此不太受普遍关注，尽管您可以看到有许多平台和设备展示了它。除非您碰巧拥有表现出异常的设备，否则其他人也可能难以复制。

请参阅下面的评论以进行进一步讨论。

# wordpress - Wordpress 查询特定帖子

> ID：12179717
> 
> 赞同：0
> 
> 时间：2012-08-29T14:01:03.517
> 
> 标签：wordpress, attachment

我在 Wordpress 中创建了一个“portafolio”自定义类型，我想在我编写的这段代码中查询一个特定的帖子（确切地说是 ID = 780），它检索该帖子中的所有附件图像：

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <?php if ( $post->post_type == 'portafolio' && $post->post_status == 'publish' ) {
            $attachments = get_posts( array(
                'post_type' => 'attachment',
                'posts_per_page' => -1,
                'post_parent' => $post->ID,
                'exclude'     => get_post_thumbnail_id(),
                'orderby'           => 'menu_order',
                'order'           => 'ASC'  

    ) );?>

    <?php
            if ( $attachments ) {
                foreach ( $attachments as $attachment ) {
                    $class = "post-attachment mime-" . sanitize_title( $attachment->post_mime_type );
                    $thumbimg = wp_get_attachment_image_src( $attachment->ID, 'original', false ); ?>

    {image : '<?php echo '' . $thumbimg[0] . ''; ?>', title : '<?php wp_title("",true); ?>', thumb : ''},

    <?php               
                }

            }
        }
    ?>

<?php endwhile; endif; ?> 
```

但是，我不知道我应该在该代码中的哪个位置查询我想要检索的特定帖子。

有任何想法吗？

编辑：

我努力了：

```
<?php
    query_posts( array('p' => 780) );
    if (have_posts()) : while (have_posts()) : the_post();
    ?>

    <h2>Test</h2>

    <?php endwhile; endif; ?> 
```

只是看看我是否能够检索到一些东西，没有运气。

如果这有帮助，我这样做是为了在 Wordpress 上创建一个页面，以显示一个名为“portafolio”的自定义类型的单个帖子，然后将其分配为首页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:38:23.177

[您可以通过在循环](http://codex.wordpress.org/The_Loop)`query_posts`之前调用来更改查询：

```
query_posts( array('p' => $myPostID) ); 
```

只需在循环之前调用此函数。你的最终代码可能是这样的：

```
<?php
query_posts( array('p' => 780) );
if (have_posts()) : while (have_posts()) : the_post();
?> 
```

您可以指定更多[参数](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)，例如作者或帖子类型等。如果您在主循环之后还有另一个循环，请在之后`rewind_posts()`调用。`endwhile; endif;`

**编辑：**

稍后发表一些评论......如果您正在使用自定义帖子类型，请务必将“post_type”添加到您的函数中。例如：

```
query_posts( array('p' => 780, 'post_type' => 'book') ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:28:11.163

您可以简单地使用[get_post](http://codex.wordpress.org/Function_Reference/get_post)：

```
$my_id = 780;
$my_post = get_post($my_id); 
```

# network-protocols - 外部附件设计协议指南

> ID：12179718
> 
> 赞同：1
> 
> 时间：2012-08-29T14:01:05.843
> 
> 标签：network-protocols, external-accessory

我正在为我的应用程序设计一个协议，以通过 EA 框架与我的外部设备进行通信。由于事情是在字节数据级别进行通信（使用 NSInputStream/NSOutputStream），我想确保握手/通信协议既安全又高效，所以关于指南或原则的任何建议（很像 Google 的 Objective- 风格指南） C）或参考文献将不胜感激。

# php - jQuery setTimeOut 函数不起作用

> ID：12179719
> 
> 赞同：0
> 
> 时间：2012-08-29T14:01:08.390
> 
> 标签：php, jquery, settimeout, slidedown

所以页面以

```
<div id="show-quick-cart-zone"></div> 
```

在页面顶部，我使用加载命令脚本：

```
$('#show-quick-cart-zone').load('/loadbalance/quickcart'); 
```

然后在页面上插入一个购物车 div 框，如下所示：

```
<div id="quickcart" class="quickcart" style="display:none">
    <div class="quickcarttitle"><span>SHOPPING BAG</span></div>
    <strong>Total</strong> £<?=$CartTotal?><br />
    <a href="/cart?ref=quick-cart"><img src="secure-checkout.png"></a>
    <a onclick="jQuery('#quickcart').slideUp(500);" href="#close-quick-cart"><img src="continue-shopping.png" style="margin-top:8px"></a>
</div> 
```

我使用普通的超链接来滑动切换它以显示和关闭。

我想要这样，如果用户在他们的 URL 中有 ?x=1 查询，它会通过加载加载后通过向下滑动来预加载框：

我有以下 jQuery 函数。页面加载后，它基本上应该向下滑动购物车 div。

```
<script type="text/javascript">
<? if($_GET["x"]=="1"){ ?>
function showCart() {
    $('#quickcart').slideDown(500);
    Cufon.replace('.quickcart');
}
// Toggle the Quick Cart (uses Load Balance for higher TPS no que!)
// showCart();
$(document).ready(function () {
    // Code to do stuff immediately
    setTimeout(showCart, 0);
});
<? } ?>
</script> 
```

但是，该框不会毫无错误地向下滑动。我想要它，以便如果用户在正常页面上，如下所示：

```
/cart/product.php 
```

什么都没发生。

但是，如果他们在`/cart/product.php?x=1`

默认情况下，该框将向下滑动，指示添加了新项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:08:35.033

The `.load` function takes some time to complete, probably longer time than the document takes to have the correct state. So try something like:

```
$('#show-quick-cart-zone').load('/loadbalance/quickcart', function() {
    // this will execute when the ajax load is complete
    showCart();
}); 
```

# android - 如何在 Android 中实现 ViewFactory

> ID：12179726
> 
> 赞同：0
> 
> 时间：2012-08-29T14:01:29.340
> 
> 标签：android, model-view-controller, factory-pattern

我有一个在 3 个平台上运行的应用程序：J2ME、BlackBerry 和 Android。它有一个带有通用代码的模块和其他带有平台特定代码的模块（针对每个平台）。

我们使用的是 MVC 架构。起初，我们将 View 和 Controller 留在每个平台上实现。但是我们得到了不同的行为或三重代码。所以我们决定统一Controller。

现在我们有一个要在每个平台上实现的 ViewFactory。在通用代码中，我们只是获取视图，设置它的控制器，一切运行良好。

问题是我无法在 Android 中做到这一点。我自己无法实例化一个 Activity，我必须发送一个 Intent 并让系统创建它。一个活动看起来像一个“视图加控制器”。我只想要 View 部分。做这个的最好方式是什么？

# ios - iOS 错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序

> ID：12179730
> 
> 赞同：0
> 
> 时间：2012-08-29T14:01:46.933
> 
> 标签：ios, ipad, sqlite, exception

我是一名新开发人员，我收到此错误。我厌倦了通过两次添加 libsqlite3.0.dylib 并重新启动 x-code 来修复它。即使我添加了 libsqlite3.dylib 的另一个库，但没有工作。错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法创建带有消息的可写数据库文件

```
-(void)copyDatabaseIfNeeded
{
    NSFileManager * filemanger = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbpath= [self getDbPath];
    BOOL success = [filemanger fileExistsAtPath:dbpath];

    if(!success)
    {
        NSString *defaultDBpath= [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"myDatabase.sqlite"];
        success = [filemanger copyItemAtPath:defaultDBpath toPath:dbpath error:&error];
        if(!success)
        {
            NSAssert1(0, @"Failed to create writeable database file with message '@' .", [error localizedDescription]);
        }
    }

}
-(NSString *)getDbPath
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [path objectAtIndex:0];
    return[documentsDir stringByAppendingPathComponent:@"myDatabase.sqlite"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:29:46.013

来吧，这个函数打开一个数据库，如果它不存在于文档中，它会从bundle中复制它。您需要从头开始创建一个吗？

```
-(BOOL) openDB: (NSString *) dbName{
    NSString *dbPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    dbPath = [dbPath stringByAppendingPathComponent:dbName];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath:dbPath]) {

        NSString *sourcePath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:dbName];   
        [fileManager copyItemAtPath:sourcePath toPath:dbPath error:nil];
    }

    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))           
    {               
       NSLog(@"An error has occured opening Sqlite");  
       return FALSE;
    }

    return TRUE;
} 
```

# openwrap - 您不能使用 OpenWrap 将依赖项提交到源代码吗？

> ID：12179735
> 
> 赞同：0
> 
> 时间：2012-08-29T14:02:05.820
> 
> 标签：openwrap

我知道在 nuget 中，您可以通过使用“启用包还原”命令来避免将依赖项提交到源。这将允许另一个开发人员检查解决方案，并通过构建它来下载所有必需的依赖项。

在 OpenWrap 中是否有类似的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:33:42.657

使用 OpenWrap，您可以做类似的事情：您只需将整个“wraps”文件夹放在版本控制系统的忽略列表中。结帐后，您只需发出以下命令即可下载依赖项：

```
o update-wrap 
```

就这么简单。这就是我个人一直使用 openwrap 的方式：我从不将依赖项提交到版本控制系统中。

这种方法有缺点吗？不，但您必须考虑到“update-wrap”命令始终获取满足您的依赖项要求的最新依赖项（您可以指定版本的下限和上限）。这意味着开发人员 A 可能比开发人员 B 具有更新的依赖项。就我而言，这从来都不是问题，我什至认为，在开发过程中，应该不时发出“update-wrap”以确保一个总是针对最新的依赖项进行开发。

顺便说一句，在构建中集成对“update-wrap”的调用在技术上是可行的，这样每个构建都会触发依赖项的更新。但就个人而言，我从来没有看到需要这样做。

# java - Jersey + Json 媒体类型 application/json 未找到

> ID：12179737
> 
> 赞同：17
> 
> 时间：2012-08-29T14:02:23.503
> 
> 标签：java, json, jersey, jax-rs

我正在尝试使用简单的 Jersey + JSON 示例，但出现以下错误 `message body writer for Java class com.test.jsonexample and MIME media type application/json was not found`

我放了以下 jar 文件以获得适当的结果

```
asm-3.1.jar
jackson-core-asl-1.9.9.jar
jackson-jaxrs-1.9.9.jar
jackson-mapper-asl-1.9.9.jar
jackson-xc-1.9.9.jar
jersey-client-1.9.jar
jersey-core-1.9.1.jar
jersey-json-1.9.jar
jersey-server-1.9.1.jar
jettison-1.3.2.jar
jsr311-api-1.1.1.jar 
```

为什么我会收到这种类型的错误？错误日志在这里：

```
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class com.test.Jsonexample, and Java type class com.test.Jsonexample, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>TestJaxRs</display-name>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.test.rest</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

JsonExample.java

```
@XmlRootElement  
public class JsonExample {

    String title;
    String singer;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getSinger() {
        return singer;
    }

    public void setSinger(String singer) {
        this.singer = singer;
    }

    @Override
    public String toString() {
        return "JsonExample [title=" + title + ", singer=" + singer + "]";
    }

} 
```

和 Json 服务

```
@Path("/json/metallica")
public class JSONService {

    @GET
    @Path("/get")
    @Produces(MediaType.APPLICATION_JSON)
    public JsonExample getTrackInJSON() {

        JsonExample json = new JsonExample();
        json.setTitle("Enter Sandman");
        json.setSinger("Metallica");

        return json;

    }

    @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTrackInJSON(JsonExample track) {

        String result = "Track saved : " + track;
        return Response.status(201).entity(result).build();
    } 
```

如果我做错了什么，请建议我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T06:30:29.520

此问题已通过 jersey-bundle-1.8.jar 修复

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-09T22:18:34.493

通过将以下内容添加到我的 pom.xml 来解决问题：

```
 <dependency>
        <groupId>com.owlike</groupId>
        <artifactId>genson</artifactId>
        <version>0.99</version>
    </dependency> 
```

可以在以下位置找到文档：[https ://code.google.com/p/genson/](https://code.google.com/p/genson/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T11:40:50.463

首先，如果您的`@POST`网络服务返回响应，您必须添加`@Produces`注释。

确保`jersey-json`lib 在您的类路径中。尝试删除该`toString()`方法，因为它可能会破坏 bean 结构格式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-21T07:18:14.600

添加如下依赖解决问题

```
"javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class com.test.Jsonexample, and Java type class com.test.Jsonexample, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)" 
```

## 解决方案 ：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-bundle</artifactId>
    <version>1.18</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T16:30:24.653

如果你不依赖于杰克逊，你可以尝试 Genson 库[http://owlike.github.io/genson/](http://owlike.github.io/genson/)。你只需要你的类路径中的 lib 并且每件事都应该在没有任何额外代码的情况下工作。您甚至不必在 web.xml 中使用 POJOMappingFeature 也不必在您的 pojo 上添加 @XMLRootElement！

您还可以使用球衣机制 (ContextResolver) 注入具有特定配置的 Genson 实例。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-08T07:33:10.090

试过了`'com.sun.jersey:jersey-bundle:1.19'`，没有解决。

`genson`为我设置对已解决的依赖。

```
runtime(
        'com.owlike:genson:0.99'
) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-21T02:09:47.547

我已经花了 4 天的时间在这上面，在谷歌搜索了几个小时之后，为什么我的 POST 根本没有工作。由于stackoverflow上的人建议使用MOXY而不是Jackson，我收到了这个错误以及与MOXY有关的其他错误，例如classdefnotfound错误。我还尝试了 genson 库，它也没有任何区别。

我最终完全删除了 MOXY，只保留了杰克逊。几个小时后，我终于找到了解决方案，这让我有点生气，因为它很简单。我的工作空间分为多个不同的项目，一个用于保存 web.xml 的 web 应用程序，另一个用于 RESTful API。

我也在运行 Jersey 2，这是另一个问题，因为这个问题的许多公认答案只谈论 Jersey 1，当我第一次尝试解决这个问题时，它非常令人困惑。

经过数小时的尝试，它最终归结为这一点（使用 OP 中发布的代码结构）：

1.  您必须在 POJO 类的顶部包含 @XmlRootElement，这与 stackoverflow 上的许多示例相反，这些示例似乎都省略了它。

2.  您必须在包含 web.xml 的项目以及包含 REST 服务和相关类的项目中包含以下内容。更改与您正在使用的 Jersey 版本相关的版本。

    ```
    <dependency>
        <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-json-jackson</artifactId>
        <version>2.5.1</version>
    </dependency> 
    ```

而已。除了这个和您正在使用的相关 Jersey 库之外，您不需要包含其他任何内容。

我非常希望这可以帮助其他人节省数小时尝试解决此问题的时间。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-18T08:53:29.640

使用 jersey-bundle-1.19.1.jar （非 maven）时，我必须删除它：

```
<init-param>
  <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
  <param-value>true</param-value>
</init-param> 
```

来自 web.xml 文件。

我知道文档表明这部分是必要的，但令人惊讶的是，这是问题的原因。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-26T18:26:12.200

我遇到了同样的问题，我通过删除所有 json 依赖项并添加 com.owlike genson 0.99 来修复它

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-27T08:29:42.833

我知道这是一个老问题，但我遇到了这个问题并尝试了上述所有解决方案，但不幸的是，它们都没有帮助我。我发现，MediaType 类是在两个不同的 jar 中定义的，并且在构建 jar 时，它采用了在另一个类中定义的类（在我的例子中，glassfish jar）。去掉其他jar后（也可以排除特定部分），问题解决

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-03-28T21:56:45.543

我尝试下载以下 jar 库：

*   jersy-json.jar 来自[MVNrepository](https://mvnrepository.com/artifact/com.sun.jersey/jersey-json/1.19)的 1.19 版，
*   **[来自MVNrepository](https://mvnrepository.com/artifact/com.owlike/genson/0.99)的 gson 版本 0.99**
*   jersey-media-json-jackson-2.15 来自[MVNrepository](https://mvnrepository.com/artifact/org.glassfish.jersey.media/jersey-media-json-jackson/2.15)
*   [来自java2s.com](http://www.java2s.com/Code/Jar/j/Downloadjerseybundle18jar.htm)的 jersey-bundle-1.8

当我下载**gson 0.99**时，我的休息服务运行良好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-11T11:49:27.340

在您的 POM.xml 中包含此依赖项并运行 Maven -> Update

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.18.1</version>
</dependency>
<dependency>
   <groupId>com.owlike</groupId>
   <artifactId>genson</artifactId>
   <version>0.99</version>
</dependency> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-09T22:21:50.457

对于新版本的 Maven，如果你有依赖问题，这里有一个很好的官方参考： [https](https://jersey.java.net/documentation/latest/modules-and-dependencies.html#d0e383) ://jersey.java.net/documentation/latest/modules-and-dependencies.html#d0e383 (Section 2.3.1, 2.3\. 2)

这里还有一个很好的教程，用于在 Eclipse 中安装 Jersey 的 maven 和 tuto：http: [//javaposts.wordpress.com/2012/01/14/maven-rest-jersey-eclipse-tutorial/](http://javaposts.wordpress.com/2012/01/14/maven-rest-jersey-eclipse-tutorial/)

```
<dependency>
    <groupId>org.glassfish.jersey.containers</groupId>
    <artifactId>jersey-container-servlet</artifactId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency>
<!-- if you are using Jersey client specific features -->
<dependency>
    <groupId>org.glassfish.jersey.core</groupId>
    <artifactId>jersey-client</artifactId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-08T09:54:28.677

还要检查 post 方法的实际类型参数。

也将 gson 作为依赖项，我应该使用 JSONObject（来自 Jersey-Json 的Jettison）而不是 JsonObject（gson），这会导致相同的异常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-20T10:49:46.007

我对 1.19.4 球衣也有同样的问题。通过添加它得到了修复

```
compile group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: '2.10.0.pr1' 
```

分级依赖。

谢谢，普拉文·R。

# javascript - jQuery 基于匹配的 id 隐藏类

> ID：12179739
> 
> 赞同：1
> 
> 时间：2012-08-29T14:02:35.733
> 
> 标签：javascript, jquery, html, css

这是我的html代码：

```
<div id="bibletree">
  <p id="gen">Genesis</p>
  <p class="gen">01</p>
  <p class="gen">02</p>
  <p class="gen">03</p>
  <p class="gen">04</p>
  <p id="exo">Exodus</p>
  <p class="exo">01</p>
  <p class="exo">02</p>
  <p class="exo">03</p>
  <p class="exo">04</p>
  <p id="lev">Leviticus</p>
  <p class="lev">01</p>
  <p class="lev">02</p>
  <p class="lev">03</p>
  <p class="lev">04</p>     
</div> 
```

Javascript：

```
$("#bibletree p").click(function() {
  $(".gen").slideToggle(400)
}); 
```

如您所见，我匹配`<p>`了 bibletree 中的所有标签`<div>`。我想知道如何只切换那些`<p>`与被点击元素的 id 相同的类。因此，`.gen`它不会切换，而是切换`.[id of <p> that was clicked]`. 我要的是让人想起正则表达式引用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:06:12.273

**[jsBin 演示](http://jsbin.com/adirip/4/edit)**

```
$("#bibletree p[id]").click(function() {
  $("."+this.id).slideToggle(400);
}); 
```

* * *

**编辑：**
如果您想删除所有（不必要的？）类，您可以这样做：

```
$("#bibletree p[id]").click(function() {
  $(this).nextUntil('p[id]').slideToggle(400);
}); 
```

**[jsBin 演示](http://jsbin.com/adirip/6/edit)**

```
<div id="bibletree">
  <p id="title">Genesis</p>
  <p>01</p>
  <p>02</p>
  <p>03</p>
  <p>04</p>
  <p id="title">Exodus</p>
  <p>01</p>
  <p>02</p>
  <p>03</p>
  <p>04</p>
  <p id="title">Leviticus</p>
  <p>01</p>
  <p>02</p>
  <p>03</p>
  <p>04</p>     
</div> 
```

CSS：

```
#bibletree p{
  display:none;
}
#title{
 display:block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:06:23.343

```
$("#bibletree p").click(function() {
  $("." + $(this).attr("class")).slideToggle(400);
}); 
```

考虑到您已经拥有的代码，最简单的方法是这样做。这假设那些 P 元素将只有一个类/，而一个根本没有类的元素呢？

无视，我读错了你的问题。您想要点击了 id 的那个。刚刚弹出的其他两个答案可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:07:30.960

问答

```
$("#bibletree p").click(function() {
  $("#bibletree > p." + $(this).attr("id")).slideToggle(400)
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:14:47.307

我建议更改您的 HTML 结构：

```
<ul id="bibletree">
  <li id="gen">
    <h2>Genesis</h2> // the tag here would semantically depend on the rest of your page.
    <ol>
      <li>01</li>
      <li>02</li>
      <li>03</li>
      <li>04</li>
    </ol>
  </li>
  ... 
</ul> 
```

然后，您可以像这样切换编号的项目：

```
$("#bibletree h2").click(function(){
    $(this).siblings("ol").slideToggle(400);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:08:18.650

```
$("#bibletree p").click(function() {  
$(this).slideToggle(400)
}); 
```

[http://jsfiddle.net/D7aWQ/](http://jsfiddle.net/D7aWQ/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T14:11:54.313

这里有一些不错的解决方案。但是，当单击没有 id 的 ap 时，它们都会引发错误。

这将解决这个问题：

```
$("#bibletree p[id]").click(function() {
  this.id && $("#bibletree p."+this.id).slideToggle(400);
}); 
```

# ruby-on-rails - 如何获得父关联的总和？

> ID：12179741
> 
> 赞同：0
> 
> 时间：2012-08-29T14:02:43.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在我的 Rails 3.2.8 应用程序中，我试图计算所有用户的产品和总税额。它应该得到产品的总数，然后是每个产品的税。

```
class Product
  attr_accessible :amount, :location_id, :tax_id
  belongs_to :tax
  belongs_to :location
  belongs_to :user
  belongs_to :tax, :class_name => "Tax"

  def self.total
    self.sum(:amount) + self.tax.sum(:amount)
  end
end 
```

**税.rb**

```
class Tax < ActiveRecord::Base
  attr_accessible :amount, :date, :location_id
  belongs_to :user
  belongs_to :location
  has_many :products
end 
```

所以当我尝试这样的范围时：

```
<%= number_to_currency(current_user.products.total) %> 
```

这当然给了我一个错误：

```
undefined method `tax' for #<Class:0x57f5298> 
```

我怎样才能写这个让它工作？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:16:05.013

`tax`是 Product 的实例方法，而不是 Product 类

尝试以下（性能较弱）：

```
class Product
  belongs_to :tax

  def self.total
    self.sum(:amount) + all.map(&:tax).map(&:amount).sum
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:53:19.023

我不喜欢 ActiveRecord 的新查询方法。我客人我有点过时并且倾向于更倾向于SQL，但这应该“有效地”得到你想要的。

```
 def self.total
    self.select('sum(products.amount + taxes.amount) AS sum').joins(:tax).try(:sum, 0)
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T20:38:32.213

从这条线

```
<%= number_to_currency(current_user.products.total) %> 
```

我了解到，对于当前用户，您需要他的产品和税款的总和。你之前所做的不是与当前用户相关，而是与整个产品表相关，当然该表中的某些产品可能与当前用户无关。

所以这就是我的想法。

```
#Instance method for current user
class User < ...
  def product_tax_total
    products.joins(:tax).select('SUM(products.amount + taxes.amount) AS sum').sum
  end
end 
```

并像这样使用它：

```
<%= number_to_currency(current_user.product_tax_total) %> 
```

更新：

您可以使用范围链接查询：

```
class Product
  scope :today, lambda { where(:date => Date.today) }
end 
```

然后链它

```
class User < ...
  def product_tax_total
    products.today.joins(:tax).select('SUM(products.amount + taxes.amount) AS sum').sum
  end
end 
```

# .net - 没有互联网的软件许可机制

> ID：12179742
> 
> 赞同：2
> 
> 时间：2012-08-29T14:02:43.983
> 
> 标签：.net, licensing, software-distribution, copy-protection

我开发了想要通过许可保护的软件。到目前为止，我已经获得了使用硬件组件的详细信息为每台机器生成唯一 ID 的代码。然后，我可以允许针对一个序列密钥激活 5 台机器（我出售的是每个许可证 5 台机器）。

这一切都很好，但显然只在有互联网连接的机器上。这只是这种保护的限制，我对此无能为力吗？或者有什么办法可以解决这个问题？

注意：在这一点上，在这个线程中，我不会批评我生成唯一 ID 的方式，这是我选择的方法，而且相当无知，需要坚持一段时间原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:36:54.723

要求拥有中央许可服务器。启动时的每个程序都会向该服务器注册。服务器告诉客户端它是否可以启动。如果已经启动了 5 个程序，则程序拒绝启动。

当程序停止时，它会再次告诉许可服务器不再需要它的许可证。

任务完成。无需互联网。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:23:55.430

我认为你有几个选择：

1.  如评论中所述，不要通过将所有允许机器的唯一 ID 合并到密钥中来使您的许可证浮动，而是特定于机器。启动时根据密钥检查当前机器的唯一 ID
2.  使用您当前的方法，但不同之处在于服务器不在您身边，而是在客户的前提下，即客户需要安装在某处的许可证服务器。
3.  实施某种自检：每个运行实例将其唯一 ID 发送到网络，然后监听其他运行实例的唯一 ID。通过网络接收超过四个唯一 ID 的第一个实例会自行关闭。我想这可以使用 UDP 广播来实现。这个的实现并不是那么简单：

    *   您需要确保退出一个实例并在之后立即启动一个新实例不会导致其他地方关闭。
    *   此外，您可能希望检查机器是否确实联网

    如果我要实现类似的东西，我会介绍以下三种包类型：

    *   启动：实例刚启动并第一次广播它的ID。所有其他实例都需要广播自己的 ID 作为答案。原因有两个：
        1.  快速失败
        2.  理想情况下，如果超过了允许的最大实例数，则最后启动的实例应该退出。如果已经运行的实例之一关闭，那将是不理想的。
    *   定期：所有实例都会定期发送其唯一 ID，以防之前的传输丢失
    *   退出：如果一个实例被关闭，它会告诉其他实例这个事实

在所有情况下，您都应该考虑将允许的实例数编码到密钥中，以便以后可以分发不同大小的密钥。

# .net - ItemContainerGenerator.IndexFromContainer 比 Items.IndexOf 快吗？

> ID：12179749
> 
> 赞同：0
> 
> 时间：2012-08-29T14:03:01.057
> 
> 标签：.net, wpf

是否`ItemsControl.ItemContainerGenerator.IndexFromContainer`比`ItemsControl.Items.IndexOf`相应项目的要求更快？

# css - 动态创建 CSS 类名？

> ID：12179753
> 
> 赞同：3
> 
> 时间：2012-08-29T14:03:04.317
> 
> 标签：css, asp.net-mvc, razor

我想做这样的事情：

**看法**

```
<td class="status_@Model.IsActive">
      @Model.Description
</td> 
```

**CSS**

```
<style type="text/css">
    .status_True
    {
        background-color: Red;
    }
    .status_False
    {
        background-color: Green;
    }
</style> 
```

`@Model.IsActive`是返回`True`或`False`。当然，这段代码不起作用。

类的HTML输出是：`class="status_@Model.IsActive"`

我的预期输出是：`class="status_True"`

这有可能做这样的逻辑吗？如果可能，我该怎么办？或者另一种改变css类的方法？可能有不同的方法。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T14:10:42.443

Razor 语法需要一些时间来适应。使用括号获取实际的属性值：

```
<td class="status_@(Model.IsActive)"> 
```

这是[Phil Haack 的快速参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# xml - XSLT 后 Altova XMLSpy 自动缩进

> ID：12179759
> 
> 赞同：0
> 
> 时间：2012-08-29T14:03:14.737
> 
> 标签：xml, xslt, altova, xmlspy

我所做的是打开一个 ABC.xml 文件并通过在 Altova XMLSpy 中按 F10 对其执行 XSLT。生成了一个 XSL Output.xml，结果非常混乱，即大部分代码只有 1-2 行，因为所有标签都不会自动缩进，而且很难阅读。是否有我缺少的工具，或者我没有使用的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:05:58.337

在 XSLT 的开头（在 xsl:stylesheet 内部）添加 xsl:output 标记并指定所需的输出：

```
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/> 
```

indent="yes" 将改善输出 - 并非所有内容都在一行中。

# objective-c - 带有 UINavigationController 的 ARC 项目和发布屏幕

> ID：12179761
> 
> 赞同：0
> 
> 时间：2012-08-29T14:03:22.470
> 
> 标签：objective-c, ios, uinavigationcontroller, automatic-ref-counting

我有一个带有自定义后退/主页按钮的项目，当用户点击它时，我调用：

```
 -(IBAction)backBtnTapped:(id)sender {
    [appDelegate.navController popToRootViewControllerAnimated:YES];
} 
```

现在我看到它没有调用 viewDidUnload 方法。为什么？如何在 ARC 项目中强制卸载 VC（及其中的视图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:17:32.070

`viewDidUnload`仅当您有内存警告时才会调用该方法，而不是当视图超出屏幕时，为此您可能想要使用`viewDidDisappear:`或`viewWillDisappear`

为了更好地解释 viewDidUnload 方法，你可以看看这个问题：[UIViewController viewDidUnload 是什么时候调用的？](https://stackoverflow.com/questions/1285932/when-is-uiviewcontroller-viewdidunload-called)

所以当你的 viewDidUnload 被调用时，你可能不需要关心，只需要它做它需要做的事情。此外，您正在照顾您需要照顾的东西`viewDidDisappear:`或`viewWillDisappear`。

强制卸载可能不是解决此问题的最佳方法，也许如果您在此方法中有很多逻辑，则需要将其更改为其他方法。不要担心调用 release 或 dealloc，只要确保你的项目中没有循环引用，并且你正在适当地使用弱引用和强引用，这样弧才能正常工作。

希望对你有帮助！

# cordova - 如何自动更新 Phonegap 应用程序

> ID：12179766
> 
> 赞同：4
> 
> 时间：2012-08-29T14:03:34.717
> 
> 标签：cordova

我想通过 Google Play 和 AppStore 摆脱更新。相反，我希望移动客户端自动获取我的应用程序。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:25:25.087

有可能，您必须制作某种引导代码，如果没有 AppStore/Play，该代码将无法更新，但该部分将通过 FileTransfer.download() 获取任何 html/js/css/... 文件到您的缓存文件夹，然后将它们包含在主 html 中，否则将为空。例如：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>My App</title>
    <script type="text/javascript" href="js/bootstrap.js"></script>
</head>
<body>
</body>
</html> 
```

现在在你的 bootstrap.js 中使用 requestFileSystem 和 co。访问缓存文件夹，您将在其中下载要执行的任何其他内容，然后将其添加到 html 并执行，可能类似于[https://github.com/mmarcon/jquery-on-demand](https://github.com/mmarcon/jquery-on-demand) 将内容添加到从本地缓存加载 html 很简单，只需在添加内容 src 时说 file://+full_path_to_your_file ，或者只需将其加载并 .append() 到 html。基本上这就像编写自我修改代码。

现在有一个完全不同的故事，AppStore & co 可以在没有他们批准的情况下更新你的应用程序......内容可以，但代码不确定，但另一方面，这不是本机代码，只是 js 所以我认为这可能没问题，但这需要更多的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T15:52:46.097

Cordova-standalone-hydration 正是这样做的，你可以在这里找到它：

[https://github.com/torrmal/cordova-standalone-hydration](https://github.com/torrmal/cordova-standalone-hydration)

希望对您有所帮助，如果您有任何问题，请随时告诉我，我很乐意提供帮助。

# mysql - MySQL 1062 - 键 'PRIMARY' 的重复条目 '0'

> ID：12179770
> 
> 赞同：52
> 
> 时间：2012-08-29T14:03:51.487
> 
> 标签：mysql, sql, mysql5

我在 MySQL 5.5.24 版中有下表

```
DROP TABLE IF EXISTS `momento_distribution`;

CREATE TABLE IF NOT EXISTS `momento_distribution`
  (
     `momento_id`       INT(11) NOT NULL,
     `momento_idmember` INT(11) NOT NULL,
     `created_at`       DATETIME DEFAULT NULL,
     `updated_at`       DATETIME DEFAULT NULL,
     `unread`           TINYINT(1) DEFAULT '1',
     `accepted`         VARCHAR(10) NOT NULL DEFAULT 'pending',
     `ext_member`       VARCHAR(255) DEFAULT NULL,
     PRIMARY KEY (`momento_id`, `momento_idmember`),
     KEY `momento_distribution_FI_2` (`momento_idmember`),
     KEY `accepted` (`accepted`, `ext_member`)
  )
ENGINE=InnoDB
DEFAULT CHARSET=latin1; 
```

它有大量数据与其他两个表具有多对一关系，其中`ondelete=restrict`和`onupdate=restrict`。

现在，我需要更改结构并在表中引入单独的主键，同时仍保留现有的关系和数据。为此，我执行了以下查询：

```
ALTER TABLE  `momento_distribution` ADD  `id` INT( 11 ) NOT NULL FIRST;
ALTER TABLE  `momento_distribution` DROP PRIMARY KEY , ADD PRIMARY KEY (  `id` ); 
```

不幸的是，我的第二个查询失败并出现以下错误：

> 1062 - 键 'PRIMARY' 的重复条目 '0'

有人可以指出这个问题吗？我想问题是现有的关系，但我不想丢失现有的关系或数据，它有几千行。有没有办法做到这一点而不会丢失数据？

**编辑：** 通过查看数据，我知道新创建的列中的值是“0”。由于重复记录（在新主键中），这可能不允许更改主键

我有超过 8,000 行，所以我无法手动更改它。有没有办法分配`rowid`给新的主键？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-29T14:04:21.467

您需要将主键指定为自增

```
CREATE TABLE `momento_distribution`
  (
     `momento_id`       INT(11) NOT NULL AUTO_INCREMENT,
     `momento_idmember` INT(11) NOT NULL,
     `created_at`       DATETIME DEFAULT NULL,
     `updated_at`       DATETIME DEFAULT NULL,
     `unread`           TINYINT(1) DEFAULT '1',
     `accepted`         VARCHAR(10) NOT NULL DEFAULT 'pending',
     `ext_member`       VARCHAR(255) DEFAULT NULL,
     PRIMARY KEY (`momento_id`, `momento_idmember`),
     KEY `momento_distribution_FI_2` (`momento_idmember`),
     KEY `accepted` (`accepted`, `ext_member`)
  )
ENGINE=InnoDB
DEFAULT CHARSET=latin1$$ 
```

关于下面的评论，怎么样：

```
ALTER TABLE `momento_distribution`
  CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT,
  DROP PRIMARY KEY,
  ADD PRIMARY KEY (`id`); 
```

PRIMARY KEY 是唯一索引，因此如果它包含重复项，则不能将该列指定为唯一索引，因此您可能需要完全创建一个新列

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-30T04:23:31.490

在 mysql 控制台中运行以下查询：

```
SHOW CREATE TABLE momento_distribution 
```

检查看起来像这样的线

```
CONSTRAINT `momento_distribution_FK_1` FOREIGN KEY (`momento_id`) REFERENCES `momento` (`id`) 
```

它可能会有所不同，我只是猜测它可能是什么。如果您在“momento_id”和“momento_idmember”上都有一个[外键，您将获得两个外键名称。](https://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_foreign_key_constraint)下一步是删除外键。运行以下查询：

```
ALTER TABLE momento_distribution DROP FOREIGN KEY momento_distribution_FK_1
ALTER TABLE momento_distribution DROP FOREIGN KEY momento_distribution_FK_2 
```

请务必将外键名称更改为您从`CREATE TABLE`查询中获得的名称。现在您没有任何外键，因此您可以轻松删除[主键](https://dev.mysql.com/doc/refman/5.7/en/constraint-primary-key.html)。尝试以下操作：

```
ALTER TABLE  `momento_distribution` DROP PRIMARY KEY 
```

添加所需的列，如下所示：

```
ALTER TABLE  `momento_distribution` ADD  `id` INT( 11 ) NOT NULL  PRIMARY KEY AUTO_INCREMENT FIRST 
```

此查询还会添加数字，因此您无需依赖 @rowid。现在您需要将外键添加回前面的列。为此，首先制作这些索引：

```
ALTER TABLE  `momento_distribution` ADD INDEX (  `momento_id` )
ALTER TABLE  `momento_distribution` ADD INDEX (  `momento_idmember` ) 
```

现在添加外键。根据需要更改参考表/列：

```
ALTER TABLE  `momento_distribution` ADD FOREIGN KEY ( `momento_id`) REFERENCES  `momento` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT 
ALTER TABLE  `momento_distribution` ADD FOREIGN KEY ( `momento_idmember`) REFERENCES  `member` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT 
```

希望有帮助。如果您遇到任何错误，请使用参考表的结构和您获得的错误代码编辑问题。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-05T20:14:06.747

检查您的主键字段是否设置为自动递增

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-27T09:14:58.997

这一步对我来说非常适合..你可以试试

1.  添加索引
2.  添加自动增量
3.  添加主键

希望它也对你有用。祝你好运

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-09T03:23:29.053

将您的 PRIMARY KEY 设置为 AUTO_INCREMENT。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-25T11:15:18.633

对我来说，我忘记将 AUTO_INCREMENT 添加到我的主字段并插入没有 id 的数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-26T08:33:26.240

将**AUTO_INCREMENT**设置为**PRIMARY KEY**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-03T08:56:58.480

我遇到了这个错误，Used typeorm migrations Api，这个错误如上所述是由于id没有自动递增，所以如果你使用typeorm的Api迁移来写迁移，当你写你的id列时，用这个来设置 id 列。 `{ name: "id", type: "int auto_increment", isPrimary: true }`

# android - 生成随机的两位十六进制值

> ID：12179775
> 
> 赞同：-2
> 
> 时间：2012-08-29T14:04:03.437
> 
> 标签：android

我正在为 android 开发一个应用程序，在这个应用程序中我想生成两个随机的两位十六进制值，例如：
1\. 两位随机十六进制值（例如 AA、3A、4E...）
2\. 两位随机甚至十六进制值（例如 12、1A... 不是 13、35、1B、2D...）

并将它们设置为文本视图。

设置为 textview 很容易，但我找不到生成两位随机偶数十六进制数的方法。

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:08:51.133

Just generate a random integer and convert it to hexadecimal:

```
Random rnd = new Random(System.currentTimeMillis());
int x = rnd.nextInt(256); //Between 0-255
String hex = Integer.toHexString(x); 
```

If you need to make sure it's even, just check whether `x % 2 == 0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:09:11.760

我不知道实际的android API，但你可以（分别是你提到的两种情况）：

1.  生成一个介于 0 到 255 之间的随机整数；
2.  生成一个介于 0 到 127 之间的随机整数并将其乘以 2；

然后以十六进制格式打印它们。

# mysql - 本地和云数据库 2 种方式复制

> ID：12179778
> 
> 赞同：0
> 
> 时间：2012-08-29T14:04:09.963
> 
> 标签：mysql, database, replication, cloud-hosting, amazon-rds

本地数据库和云数据库之间是否可以有两种复制方式？

例如，本地数据库（MySQL 或 MS SQL）上的任何更新都将复制到亚马逊云上的数据库，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:33:57.060

Amazon Cloud VM 只是普通的服务器，所以你只需要设置一个经典的双向复制，但自然由于 Internet 延迟和你自己的带宽，在某些情况下可能会出现问题，例如插入/更新/删除大量数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:14:29.100

是的，本地数据库和云数据库之间可以进行双向复制。
但是，在决定实施此类复制之前，您可能需要考虑以下事项：

1.  成本：托管服务提供商对数据中心的输入和输出操作收费，因此这可能会增加您所支付的费用。
2.  性能：网络延迟会影响本地和托管数据库之间的数据流量。
3.  可靠性：如果由于某种原因您的本地数据库关闭，那么复制将被中断，这当然会导致问题。

您或许应该考虑考虑将您的数据库保存在云中，而不是双向复制，而是检查不同供应商提供的本地备份和访问类型。:)

# java - SRV 记录处理

> ID：12179780
> 
> 赞同：0
> 
> 时间：2012-08-29T14:04:17.857
> 
> 标签：java, dns

我正在玩一个非常基本的客户端<->服务器项目以获得乐趣，并且认为如果无法访问主服务器，那么实现一个后备系统会很好。我打算通过 SRV 记录查找来做到这一点。

对于它的价值，这就是我获取 SRV 记录的方式..

```
String query = "_test._tcp.my.domain.com";
Hashtable<String, String> environment = new Hashtable<String, String>();
environment.put("java.naming.factory.initial", "com.sun.jndi.dns.DnsContextFactory");
environment.put("java.naming.provider.url", "dns:");
InitialDirContext dirContext = new InitialDirContext(environment);
Attributes records = dirContext.getAttributes(query, new String[] {"SRV"}); 
```

所以我设置了一些 SRV 记录，所有这些，代码都能很好地检索它们。我不知道的是，在建立一个正确排序记录的列表后，我怎样才能找到要使用的记录？

我知道我可以只连接到最低优先级记录的主机/端口，如果失败，则转到下一个，等等。但是如果有相当数量的记录并且只有一个具有最高优先级的记录工作怎么办？无论谁使用客户端，都必须等待每个低优先级记录连接超时，然后才能最终找到一个有效的连接。

我要做的是无缝地找到工作主机/端口的记录，因为用户不必等待可能的年龄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:08:31.600

You can start connections in separate threads, and just wait until one will complete.

Please consider using [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CompletionService.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CompletionService.html)

So in short:

*   implement callable to return desired value
*   create completion service
*   submit jobs to it
*   call completionService.poll
*   cancel all tasks in completion service

# c# - 单位小于一个像素，屏幕捕捉在屏幕的较大部分内搜索屏幕的部分图像

> ID：12179792
> 
> 赞同：0
> 
> 时间：2012-08-29T14:04:42.350
> 
> 标签：c#, bitmap, image-comparison

整件事是，通过`CopyFromScreen()`方法，我能够将图像（以前捕获的）与与捕获的图像相同的图像进行比较，因为它实际上是从该特定屏幕捕获的。

或更简单地说，例如，从桌面裁剪并保存为图像的图标以及引用其位置（点）和大小（大小（h，w））的文本文件

因此，当我们通过 File.WriteAllBytes(byte[]made it .bar) 将.bar 捕获到文件 + cuptured.txt 时，参考位置和大小，我们将副本保存到 hdd 及其在 txt 中的位置和大小。（我不必发布所有代码，但它工作正常，所以如果有人需要它..我随时分享）

我实现这一点的方法是使用我制作的方法`DoCopyFScr()`- 捕获正在使用的屏幕部分`Bitmap2ByteArr()`- 将位图保存为 ByteArr，然后在需要时使用 byte[] - 保存，与屏幕上捕获的位置进行比较。

```
 public void DoCopyFScr(Point SourceP, Size Mysz, string initDir, string Fname, bool SaveIt, bool DoCompare)
    {

        SetForegroundWindow(A window handle suplied here);
        pause(200);
        Point pZero = new Point(0, 0);

        using (Bitmap bitmap = new Bitmap(Mysz.Width, Mysz.Height))
        {
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                g.CopyFromScreen(SourceP, pZero, Msyz);
            }
            Image img = (Image)bitmap;
            Clipboard.SetImage(img);
            ItsCopiedFromScreen = true;
            MyBtmpToByteArr b2arr = new MyBtmpToByteArr();// inststance of My bitmap to byte[]

            AAdToAppLog("start Converting Bitmap To ByteArr");// logging programs activity in a listview via reflection
            MyCuptredBtmpToolBox.CuptByteArr = b2arr.Bitmap2ByteArr(bitmap);
            AAdToAppLog("Done Convertion ArrSize " + b2arr.Bitmap2ByteArr(bitmap).Length + ", Resting CopyDestionation SelctdIndx");
                                Combo_CopyFromScrn.SelectedIndex = 0;
            if (SaveIt)
            {
                string btmpsRefrenceSave = MyCuptredBtmpToolBox.SourceX_Cuptured.ToString() + "," + MyCuptredBtmpToolBox.SourceY_Cuptured.ToString() + "," + MyCuptredBtmpToolBox.RectWidth_Cuptured.ToString() + "," + MyCuptredBtmpToolBox.RectHeight_Cuptured.ToString() + "," + TBX_FileSaveName.Text;
                if (ItsLoadedFromFile)
                {
                    File.WriteAllBytes(initDir + TBX_FileSaveName.Text, b2arr.Bitmap2ByteArr(bitmap));// See next block Method Bitmap2ByteArr method
                    File.WriteAllText(initDir + TBX_FileSaveName.Text.Replace("bar", "txt"), btmpsRefrenceSave);
                }
                else
                {
                    File.WriteAllBytes(initDir + TBX_FileSaveName.Text + ExtBar, b2arr.Bitmap2ByteArr(bitmap));
                    File.WriteAllText(initDir + TBX_FileSaveName.Text.Replace("bar", "txt") + ExtTXT, btmpsRefrenceSave);
                }
                //MyCuptredBtmpToolBox.CupturedStaticBmp.Save(MyCuptredBtmpToolBox.FnameToSave.Replace(".bar", ".") + ExtJpg, ImageFormat.Jpeg);
                bitmap.Save(initDir + TBX_FileSaveName.Text + ExtJpg, ImageFormat.Jpeg);
            }
            if (DoCompare)
            {
                AAdToAppLog("starting Compare " + Fname +" With Btmp2Arr From Screen");
                R_ComparwByteArrClass tstCmp = new R_ComparwByteArrClass();
                if (itsAutomated)
                {
                    CompareByt2Btmp = R_ComparwByteArrClass.ByteArrCompare(DoAutoLoadCuptByteArr(initDir, Fname + ExtBar), b2arr.Bitmap2ByteArr(bitmap));
                }
                else
                {
                    CompareByt2Btmp = R_ComparwByteArrClass.ByteArrCompare(MyLoadedBtmpToolBox.LoadedByteArr, b2arr.Bitmap2ByteArr(bitmap));
                }
                bring(MyApp);
                AAdToAppLog(CompareByt2Btmp.ToString());

            }
        }

    } 
```

位图到 ByteArr 类，方法是将 cuptured btmp 转换为 byte[]

```
 public class MyBtmpToByteArr
    {

        public byte[] Bitmap2ByteArr(Bitmap btmpToConvertintoByteArr)
        {

            //Convert image to a byte array
            System.Drawing.ImageConverter MyImgCvrtr = new System.Drawing.ImageConverter();
            byte[] btImage = new byte[1];
            btImage = (byte[])MyImgCvrtr.ConvertTo(btmpToConvertintoByteArr, btImage.GetType());

            return btImage;
        }
    } 
```

但是如果位置改变了，即使我在屏幕上给出了图像的新位置，我也无法识别它，但当我进行测试时，使用绘画并打开网格，我定位了同一个裁剪图像的两个副本，我确实成功了，但是在游戏屏幕的真实场景中，几个图标共享背景，我尝试将它们相互比较，即使我给出了位置也没有成功，是否有一个小于像素的单位也许游戏的图形使用了一种只有几分之一像素的单位？？或者可能是其他单位，所以我的给定位置 Point1 是第一个图标的 X100 Y100，而另一个不是在 200,200，实际上是在 200.33、200.55 左右......这就是为什么我没有得到死锁位置/位置？ps 我认为如果不是它，它正在使用 diretx'**是否存在小于像素的单位......并且常用？** 如果不是，你将如何实现一个从 x100 到 x150 和 y100 到 y150 循环的函数，这样我就可以搜索图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:47:51.763

您可能会看到与缩放、混叠或亚像素提示不同的渲染伪影。

例如，基于 WPF 的应用程序是独立于 DPI 的，因此它们使用“显示点”而不是像素，并且您可以使用显示点的一小部分来解释您所看到的行为类型。

“像素”是一个非常物理的东西（显示器上的点），但并非所有东西都严格按照 1:1 映射到现实世界的像素。

因此，您将需要一个更聪明的机制来比较相似的图像 -[这个相关的 stackoverflow 帖子](https://stackoverflow.com/questions/6608315/compare-two-images-and-return-the-rate-of-similarity-in "这个相关的stackoverflow帖子")可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:38:08.777

制作了我的问题的第二部分 MySelf

StpX ,StpY 限制循环最大迭代次数

作为捕获位置的原始点是`initPoint` CountDown 正在计算距离结束还剩多少轮，并且在内部循环中有一个“手断”，当搜索成功时触发

```
 Point SearchFromPoint = Point.Empty;
        Point initPoint = new Point(150, 100);
        Size imgSz = new Size(320, 240);
        int StpX = initPoint.X + 1, StpY = initPoint.Y + 1;

        int CountDownX, CountDownY;
        for (int StrtX = initPoint.X - extraX; StrtX < StpX; StrtX++)
        {
            SearchFromPoint.X = StrtX;
            for (int StrtY = initPoint.Y - extraY; StrtY < StpY; StrtY++)
            {
                CountDownX = (initPoint.X - StrtX); CountDownY=(initPoint.Y - StrtY);
                 SearchFromPoint.Y = StrtY;
                AAdToAppLog("Search Report For: " + imgName + " Still trying Search On " + CountDownX + ":" + CountDownY +" Point(" + SearchFromPoint.X + ", " + SearchFromPoint.Y + ")");
                DoCopyFScr(SearchFromPoint, tmpSz, initDir, Fname, false, true);
                    if (CompareByt2Btmp.ToString() == R_ComparwByteArrClass.CompHashResult.HashCompare_Ok.ToString())
                    {
                        same = true;
                        AAdToAppLog("Search Report For: " + imgName + "Search Completed Successfully On Try " + CountDownX + ":" + CountDownY);

                        break;
                    }
            }

        } 
```

这就是我的想法......总结了搜索方法，而不是固定的已知位置场景。

如果您有任何想评论此 feal 的内容，请随时发表。

# python - 为python安装mysqldb

> ID：12179793
> 
> 赞同：2
> 
> 时间：2012-08-29T14:04:46.670
> 
> 标签：python, windows, mysql-python

我尝试为python安装mysqldb，我是python的新手，对不起。当我在提示符下键入“python setup.py install”时，这是味精：

```
Traceback (most recent call last):
  File "C:\Python26\MySQL-python-1.2.3\setup.py", line 15, in <module>
    metadata, options = get_config()
  File "C:\Python26\MySQL-python-1.2.3\setup_windows.py", line 7, in get_config
    serverKey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, options['registry_key'])
WindowsError: [Error 2] The system cannot find the file specified 
```

我正在使用 python 2.6，mysq-python 1.2.3，在 7 32 位上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:44:43.367

SourceForge 现在有一个[Windows MSI 安装程序。](http://sourceforge.net/projects/mysql-python/files/mysql-python/1.2.3/MySQL-python-1.2.3.win32-py2.7.msi/download)试试看，但如果你现在更愿意自己构建（直到 1.2.4 发布），你应该可以这样做：

```
pip install http://svn.code.sf.net/p/mysql-python/svn/branches/MySQLdb-1.2/MySQLdb 
```

以上假设您已安装 Subversion。您还需要安装适当的[C 连接器](http://www.mysql.com/downloads/connector/c/)。然后查看 site.cfg 中的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:12:23.790

在 Windows 上从源代码安装 MySQL-python 可能会很棘手。使用 exe 安装程序或使用 ActivePython + Pypm

这是获取许多 python 库的二进制包的好地方

[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

# javascript - RxJS 多个订阅 Observable.Interval

> ID：12179795
> 
> 赞同：6
> 
> 时间：2012-08-29T14:04:50.133
> 
> 标签：javascript, reactive-extensions-js, rxjs

有没有像 RxJS 一样的解决方案？ [是否可以在 Rx 的不同线程上调用订阅者的 OnNexts？](https://stackoverflow.com/questions/7821404/is-it-possible-to-invoke-subscriberss-onnexts-on-different-threads-in-rx)

PS 我的第一个天真的方法（在 CoffeeScript 中）显然失败了：

```
hObs = Rx.Observable.interval(35000)
    .startWith(-1)
    .select(moment().format("D MMMM, HH:mm:ss"))
    .publish()

hObs.subscribe((x)->console.log(x))
hObs.connect()
hObs.subscribe((x)->console.log(x, 1))
hObs.connect() 
```

第二次订阅在 35s 间隔内不返回任何内容，依此类推

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-23T20:14:46.863

`.select`需要一个函数，而不是一个值。以下作品：

```
(function() {
    var list = document.getElementById("list");
    var stream = Rx.Observable.interval(35000)
    .startWith(-1)
    .select(function(){ return moment().format("D MMMM, HH:mm:ss") });

    stream.subscribe(function(value) {
        var li = document.createElement("li");
        li.innerHTML = "subscriber 1: "+value;
        list.appendChild(li); 
    });    
    stream.subscribe(function(value) {
        var li = document.createElement("li");
        li.innerHTML = "subscriber 2: "+value;
        list.appendChild(li); 
    });
})(); 
```

[http://jsfiddle.net/9EjSQ/43/](http://jsfiddle.net/9EjSQ/43/)

请注意，您不需要调用`connect()`两次，通常只调用一次。最好通过在可观察链的末尾`connect()`调用来使用“自动”。`.publish().refCount()`这将创建一个 ConnectableObservable，换句话说，一个“热可观察”（参见[https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/creating.md#cold-vs-hot-observables](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/creating.md#cold-vs-hot-observables)） . 在这种情况下，我们不需要 hot observable。

在咖啡脚本中：

```
list = document.getElementById("list")
stream = Rx.Observable.interval(35000)
.startWith(-1)
.select(-> moment().format("D MMMM, HH:mm:ss"))

stream.subscribe((value) ->
    li = document.createElement("li")
    li.innerHTML = "subscriber 1: " + value
    list.appendChild(li)
)
stream.subscribe((value) ->
    li = document.createElement("li")
    li.innerHTML = "subscriber 2: " + value
    list.appendChild(li)
) 
```

[http://jsfiddle.net/9EjSQ/44/](http://jsfiddle.net/9EjSQ/44/)

# c# - 我可以加载登录页面，但使用 jquery ui 没有显示控件？

> ID：12179802
> 
> 赞同：1
> 
> 时间：2012-08-29T14:05:33.457
> 
> 标签：c#, jquery, asp.net

我正在尝试通过 JQuery UI 加载登录页面。当我调试代码时，发现它被调试到`page_load`事件并且在运行应用程序后，该页面中的控件没有显示在前端？

在母版页面中，我有一个登录按钮，单击该按钮登录页面需要使用 JQuery UI 加载。

登录页面有以下代码：

```
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
    <div id="loginPanel" runat="server">
        <asp:Label ID="lblUsername" runat="server" Text="Username"></asp:Label>
        <asp:TextBox ID="txtUsername" runat="server"></asp:TextBox>
        <asp:Label ID="lblPassword" runat="server" Text="Password"></asp:Label>
        <asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox>
        <asp:Button ID="btnLogin" runat="server" Text="Login" OnClick="LoginClick" />
        <asp:Button ID="btnClear" runat="server" Text="Clear" />
        <asp:Label ID="lblErrorMessage" runat="server" Text=""></asp:Label>
    </div>
</asp:Content> 
```

jQuery代码：

```
$.ajax({
      url: 'Login.aspx',
      success: function (data) {
          $('.result').html(data);
          alert('Load was performed.');
          }
      }); 
```

页面控件值正在“数据”中加载，但未显示在首页中。

我需要做什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:22:10.633

数据是字符串吗？即它实际上只包含您要加载的html，还是您仍然需要从中获取html 的javascript 对象？

另请记住，您可能会丢失按钮上的回发事件，因此您可能希望将按钮连接到将发布到相关页面的 javascript 函数。

希望有帮助

使用下面的代码示例编辑：注意此解决方案使用 jQuery，但我看到您已经在使用它

首先，您需要一个文件，其中包含您要用于登录的表单（在这种情况下，我在正文中添加了一个 JavascriptPost.aspx，其中包含以下内容

```
<form id="frmPost" method="post" action="Default.aspx">
    <span>Username</span><input type="text" name="username" />
    <span>Password</span><input type="password" name="password" />
    <button onclick="login();">submit</button>
</form> 
```

然后我添加了带有以下内容的 default.aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="js/jquery-1.7.2.min.js"></script>
    <link href="css/main.css" rel="stylesheet" />
    <script type="text/javascript">
        function loadLogin() {
            $('#loginContainer').load('JavascriptPost.aspx #frmPost');
        };
        function login() {
            $('#frmPost').submit();
        }
    </script>
</head>
<body>
    <div>
        Some really cool stuff about the website
    </div>
    <button onclick="loadLogin()">Login</button>
    <div id="loginContainer"></div>
</body>
</html> 
```

然后最后要访问您的表单参数，您可以使用请求将它们拉出：

```
if (Request["username"] != null)
{
    string username = Request["username"];
    string password = Request["password"];
} 
```

如果您需要进一步解释，请告诉我

# javascript - 如何在纯javascript中创建具有多个输入的提示

> ID：12179805
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:05:52.620
> 
> 标签：javascript

我想制作一个类似 prompt() 方法的模态对话框。如何使用 2 个输入进行提示对话框，如下所示：

![样本](../Images/5019ac2e9c3d3320990a56dbe2539b72.png)

使用纯 javascript（不使用任何 jquery/javascript 框架）。

是否可以创建这样的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:20:00.957

这些是您无法修改的本机特定于浏览器的控件。同样对于警报、提示和确认，您只能向它们提供值。另请参阅[此答案](https://stackoverflow.com/questions/12177109/javascript-closing-confirmation-message-if-no-response-from-user/12177256#12177256)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:23:43.737

对于模态提示，我的建议是：

1.  创建一个屏幕填充 div 以获取模态结果：

    ```
     <div id="modalDiv" style="position: absolute; top: 0px; left: 0px; width: 100%;
       height: 100%; z-index: 4; display: none">&#160;</div> 
    ```

2.  为提示创建一个 div，具有更高的 z-index 和文本字段、标签、按钮和您需要的所有内容。让它在屏幕中央。

3.  制作一个函数customPrompt（或任何您喜欢的名称），在其中您将两个div的显示设置为“块”，并为OK按钮设置一个处理您需要的输入的函数。

# c# - 使用 Spring.Net 的委托和 lambda 表达式

> ID：12179808
> 
> 赞同：6
> 
> 时间：2012-08-29T14:06:08.403
> 
> 标签：c#, delegates, lambda, spring.net

是否可以像动态创建委托一样

```
arg => { return something; }
or arg => someting; 
```

使用内置的 DelegateFactoryObject 和 Spring.Net 提供的 Spring 表达式？

我想**创建没有编码的工厂**。spring文档中的abstract sample需要一个抽象工厂，通过config动态实现工厂方法。我想通过 Spring.Net 定义一个委托和结果。

我已经使用了如下结构。

```
<object type="Spring.Objects.Factory.Config.DelegateFactoryObject">
  <property name="DelegateType" value="System.Func&lt;string,bool&gt;" />
  <property name="TargetObject" value="aString" />
  <property name="MethodName" value="Equals" />
</object>

<object type="Spring.Objects.Factory.Config.DelegateFactoryObject">
  <property name="DelegateType" value="System.Func&lt;string,My.Interface&gt;" />
  <property name="TargetObject">
    <object id="result" type="My.DelegateContainer&lt;string,My.Interface&gt;">
      <constructor-arg name="objectToReturn" ref="theObjectToReturn" />
    </object>
  </property>
  <property name="MethodName" value="Evaluate" />
</object> 
```

（字符串为输入，My.Interface实现类型为输出，通过ObjectToReturn）

...但我无法找到如何使用表达式来定义通过 xml-config 返回对象的函数的解决方案。我想用一个简单的配置定义的工厂来替换这个例子中的 DelegateContainer，返回 theObjectToReturn。

这个问题与这个问题有关：[How to injection Predicate and Func in Spring.net](https://stackoverflow.com/questions/7039144/how-to-inject-predicate-and-func-in-spring-net)，您可以在那里找到有关该问题的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:06:02.687

我相信您正在尝试使用委托异步调用方法，如果是这样，您可以使用这些方法中的任何一种来使用异步调用作为委托来调用函数：

```
 Action act = () =>
        { 
             //Function Body            
        };
        //call
        act();

        Action<Action> act2 = (x) =>
        { 
            //Function Body            
        };
        //call
        act2(() => { });

        var tsk = Task.Factory.StartNew(() => {
            //Function Body                     

        });
        //call
        tsk.Wait();

        Parallel.Invoke(() => {
            //Function Body                                 
        }, () => {
            //Function Body                                 
        }); 
```

最后，您可以使用 Func<> 如下：

```
Func<string, int, string> sayHello = delegate(string name, int age)
        {
            return string.Format("my name is {0} and I'm {1} years old.", name, age.ToString());
        }; 
```

希望这个帮助，最好的。

# java - Akka ZeroMQExtension 使用一个 zeromq 套接字创建多个连接

> ID：12179811
> 
> 赞同：0
> 
> 时间：2012-08-29T14:06:13.517
> 
> 标签：java, akka, zeromq

是否可以使用 ZeroMQExtensions 创建具有多个传出（传入）连接的套接字？

[有关ZeroMQ 指南中的](http://zguide.zeromq.org/page%3aall#Plugging-Sockets-Into-the-Topology)多个连接的更多信息。

**upd：** 我看不到 ZeroMQExtensions 的等价样本。在 0MQExtensions 文档中，我发现：

```
newPubSocket(socketParameters: Array[SocketOption]): ActorRef 
```

*用于创建表示 ZeroMQ Publisher 套接字的参与者的 Java API 工厂方法。您可以根据需要传入任意数量的配置选项，并且配置选项的顺序无关紧要它们在类型上匹配，并且找到**的第一个**获胜。*

PS：我不知道 scala，刚开始阅读 akka 文档以了解我是否需要 Akka。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:16:18.313

我找到了解决方案（它不直观但有效）：

```
 ActorRef subSocket = ZeroMQExtension.get(getContext().system())
            .newSubSocket(null, new Listener(getSelf()), new Subscribe("health"));

    @Override
    public void preStart() {
        super.preStart();

        subSocket.tell(new Connect("tcp://127.0.0.1:1237"));
        subSocket.tell(new Connect("tcp://127.0.0.1:1238"));
    } 
```

# php - 扩展 Doctrine Entity 以添加业务逻辑

> ID：12179812
> 
> 赞同：8
> 
> 时间：2012-08-29T14:06:18.033
> 
> 标签：php, model-view-controller, orm, doctrine-orm

我正在尝试实践一个好的设计和扩展 Doctrine 实体。我的扩展类，基本上是模型，将有额外的业务逻辑+对实体基本数据的访问。

我正在使用 Doctrine 2.2.1 & Zend Framework 1.11.4 & php 5.3.8

当我使用 DQL 时，学说成功返回模型实体。当我使用 Doctrine 本机 find() 函数时，它什么也不返回:(。

帮助...

## 它是这样滚动的：

**引导程序.php**：

```
 $classLoader = new \Doctrine\Common\ClassLoader('Entities', APPLICATION_PATH.'/doctrine');
    $classLoader->register();
    $classLoader = new \Doctrine\Common\ClassLoader('Models', APPLICATION_PATH);
    $classLoader->register(); 
```

**APPLICATION_PATH\models\User.php 中的模型**：

```
namespace Models;
use Doctrine\ORM\Query;

/**
 * Models\User
 *
 * @Table(name="user")
 * @Entity
 */
class User extends \Entities\User {

public function __wakeup() {
    $this->tools = new Application_App_Tools();
} 
```

**实体检索功能**：

***不工作***：

```
$userEntity = $registry->entityManager->find('Models\User', $userEntity); 
```

***作品***：

```
$qry = $qb
        ->select('u')
        ->from('Models\User','u'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T02:34:16.543

您不应该将业务逻辑添加到实体中，而应该使用模型来代替。一种方法是：

1.  将模型用于业务逻辑。
2.  为您的所有数据库查询（DQL 或其他）[1] 创建自定义 Doctrine 2 存储库。
3.  别管你的实体。

在实践中，这意味着模型是普通的 PHP 类（或者可能是框架扩展，具体取决于您使用的内容），但您的模型与您的数据库无关。但是，您的模型会实例化您的自定义 Doctrine 2 存储库。例如 a`UserRepository`可能包含一个名为 的方法`getUserById`。在您的存储库中，您可以运行实际查询并返回实体实例以供模型使用。

[1] [http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html#custom-repositories](http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html#custom-repositories)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:30:21.020

据我了解，Doctrine`entityManager`仅负责持久实体，并且扩展`Entities\User`实体`Model\User`将创建另一个实体（存储在 docblock 中所述的同一表中），但不由它管理`entityManager`或与之冲突，因为您可能没有`@InheritanceType("SINGLE_TABLE")`在`Entities\User`docblocks 中提及：

阅读此文档以获取更多信息[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:15:09.750

我试图做的是一种不好的做法。正如@Ivan Hušnjak 提到的，我将我的数据库实体和来自zend 的工具耦合在一起。

应该做的是解耦。

业务逻辑应该在 services\controller 中，这些应该针对实体及其方法。您可以\应该将辅助函数添加到**仅**与实体属性相关的学说实体。

关于我的主要目的（拥有一个 Doctrine CLI 可以重写和更新的实体类）：教义只搜索本地字段\方法中的更改，相应地更新它们并丢弃所有其他功能（帮助程序）。所以让学说更新php实体是没有问题的！

ps移动到symfony2。

# android - build.xml 在编译包含 ArduinoAdkUsb 的处理草图时出现错误

> ID：12179813
> 
> 赞同：10
> 
> 时间：2012-08-29T14:06:17.990
> 
> 标签：android, arduino, processing, build.xml, adk

涉及软件：

```
* Latest Android SDK (as of today - 8/29/2012) with all of the latest APIs, Tools, Extras, etc downloaded.
* Processing 2.0a8 (latest build)
* Arduino ADK libraries for Processing ("ArduinoADK-beta-001" folder)
* My system: 64-bit Windows 7 
```

我按照网页上的说明[设置](http://labs.arduino.cc/ADK/AccessoryMode) 处理和 Arduino IDE 以及其他所有内容。我有一个 Arduino Mega ADK 板。我毫无问题地将其中一个 ADK 示例上传到了开发板上。下一步是通过 Processing 将匹配示例上传到 Android。我有一部 Nexus One 手机（Android 版本 2.3.6）。

```
Android SDK Tools Revision 20.0.3
Installed at D:\Programs\Android SDK
Project Type: Application
Project Target:   Android 2.3.3
API level:        10
Library dependencies:
No Libraries

------------------
API<=15: Adding annotations.jar to the classpath.
Merging AndroidManifest files into one.
Manifest merger disabled. Using project manifest only.
No AIDL files to compile.
No RenderScript files to compile.
Generating resource IDs...
Generating BuildConfig class.

BUILD FAILED
D:\Programs\Android SDK\tools\ant\build.xml:679: The following error occurred while executing this line:
D:\Programs\Android SDK\tools\ant\build.xml:692: Compile failed; see the compiler error output for details.

Total time: 2 seconds 
```

当我上传自己的旧草图或任何其他不使用 ADK 的草图时，构建成功并且应用程序可以在手机上运行。我花了很多时间寻找解决方案，但到目前为止，还没有运气。我在 Stackoverflow 中找到了 Will Scott-Jackson 发布的一篇文章（[使用 Android ADK 与 Arduino Mega ADK 通信时 build.xml 出现问题](https://stackoverflow.com/q/11493422/1631910)），他似乎遇到了同样的问题，但没有有效的解决方案。我不熟悉java编译过程、清单等；因此，我没有足够的能力自己解决这个问题。任何帮助，将不胜感激。

更新：所以我能够在不使用草图中的 ADK 库的情况下重现相同的错误。我用不正确的返回参数修改了一个surfaceTouchEvent，得到了同样的错误，这让我发现错误来自android工具/编译器。

处理告诉我“来自 Android 工具内部的错误，请检查控制台。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:42:03.997

将您的工作区更改为新位置，然后再次尝试运行您的项目。

# java - 如何修复 JFileChooser 的错误或避免阻止 JFC 显示快捷方式 (lnk) 文件夹的错误

> ID：12179816
> 
> 赞同：1
> 
> 时间：2012-08-29T14:06:31.147
> 
> 标签：java, swing, directory, jfilechooser, lnk

使用 NetBeans(java) 我创建了一个带有 JFileChooser 的 JDialog，当我尝试使用 ComboBox 打开一个 lnk 文件夹时（以其他方式工作正常），抛出异常并且该文件夹未打开。我发现这是一个[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6672017)：我尝试了一些解决方法，但没有奏效。你能帮助我吗？或者，你能建议我一个“技巧”吗？我想过阻止 JFileChooser（或至少 ComboBox）显示 lnk 文件夹，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:22:56.610

您可以使用[Apache Commons](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#isSymlink%28java.io.File%29)[`FileFilter`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/filechooser/FileFilter.html)中的 a和 the`FileUtils`来阻止显示符号链接：

```
JFileChooser fc = new JFileChooser();
fc.setFileFilter(new FileFilter() {

    @Override
    public String getDescription() {
        return "All (without symlinks)";
    }

    @Override
    public boolean accept(File f) {
        try {
            return !FileUtils.isSymlink(f);
        } catch (IOException e) {
            return true; // Maybe to be changed to false depending on
                         // your use case
        }
    }
}); 
```

[`FileSystemView`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/filechooser/FileSystemView.html)正如@Andrew Thompson 建议的那样，另一种选择是使用 custom 。

**编辑**：仔细阅读您的问题后，您似乎对过滤 Windows 快捷方式更感兴趣。同样的技术适用：

```
JFileChooser fc = new JFileChooser();
fc.setFileFilter(new FileFilter() {

    @Override
    public String getDescription() {
        return "All (without shortcuts)";
    }

    @Override
    public boolean accept(File f) {
        return !f.getName().endsWith(".lnk");
    }
}); 
```

# xpath - scrapy：从 xpath 选择器中删除元素

> ID：12179821
> 
> 赞同：1
> 
> 时间：2012-08-29T14:06:47.883
> 
> 标签：xpath, lxml, scrapy

我正在使用scrapy 来抓取具有一些奇怪格式约定的网站。基本思想是，我想要某个 div 的所有文本和子元素，除了开头的几个和结尾的几个。

这是要点。

```
<div id="easy-id">
  <stuff I don't want>
  text I don't want
  <div id="another-easy-id" more stuff I don't want>

  text I want
  <stuff I want>
  ...
  <more stuff I want>
  text I want
  ...

  <div id="one-more-easy-id" more stuff I *don't* want>
  <more stuff I *don't* want> 
```

注意：缩进意味着结束标签，所以这里的所有内容都是第一个 div 的子元素——id="easy-id"

因为文本和节点是混合的，所以我无法找到一个简单的 xpath 选择器来获取我想要的东西。此时，我想知道是否可以从 xpath 检索结果作为 lxml.etree.elementTree，然后使用 .remove() 方法对其进行破解。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:26:37.443

我猜你想要从 ID 为 another-easy-id 的 div 到但不包括 one-more-easy-id div 的所有内容。

堆栈溢出没有保留缩进，所以我不知道第一个 div 元素的结尾在哪里，但我猜它在文本之前结束。

在这种情况下，您可能需要 //div[@id = 'another-easy-id']/following:node() [not(preceding::div[@id = 'one-more-easy-id']) 和不是（@id = '一个更简单的 ID'）]

如果这是 XHTML，您需要将一些前缀 h，例如，绑定到 XHTML 名称空间并在两个地方使用 h:div。

编辑：这是我最后使用的语法。（原因见评论。）

```
//div[@id='easy-id']/div[@id='one-more-easy-id']/preceding-sibling::node()[preceding-sibling::div[@id='another-easy-id']] 
```

# perl - 递归搜索并用 / 和 ' 替换

> ID：12179823
> 
> 赞同：0
> 
> 时间：2012-08-29T14:06:57.543
> 
> 标签：perl, shell, unix, replace, xargs

我已经搜索并没有找到解决方案，如果之前已经回答过这个问题，我很抱歉，我不擅长 shell。

我正在尝试通过 SSH 在所有文件中进行递归搜索和替换。

到目前为止，我有这个：

```
find . -type f | xargs -d "\n" perl -pi -e 's/$this->helper('catalog/product')->getPriceHtml/$this->getPriceHtml/g' 
```

我正在尝试替换它：

```
$this->helper('catalog/product')->getPriceHtml 
```

有了这个：

```
$this->getPriceHtml 
```

但我认为它不起作用，因为斜线和单引号。我试过逃避这些`\`但无济于事，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:14:38.310

操作员的替代分隔`s`符可用于避免*栅栏*。除非转义`$this`，否则将被视为变量。`$`括号也必须转义。否则他们会组成一个捕获组。由于它是单行且引号已用尽，因此已使用十六进制转义对单引号进行编码。以下应该有效：

```
s{\$this->helper\(\x{27}catalog/product\x{27}\)->getPriceHtml}{\$this->getPriceHtml}g; 
```

或者：

```
s{(?<=\$this)->helper\(\x{27}catalog/product\x{27}\)(?=->getPriceHtml)}{}g; 
```

# java - Classe 类型的层次结构不一致

> ID：12179824
> 
> 赞同：6
> 
> 时间：2012-08-29T14:06:57.607
> 
> 标签：java, abstract-class

我有一个实现抽象类的类。抽象类在我项目的另一个包中。通过配置构建路径/项目添加了类抽象的包。在实现的类中指责以下错误：类型类的层次结构不一致

我必须在其他地方添加这个包吗？

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-29T14:09:54.097

发生这些错误是因为层次结构中的某些接口/类无法解析。例如：错误在您的类中 - 类 X，X 继承 Y，反过来，Y 继承 Z。但是，编译器无法解析 z（在上述错误中），因为 z 属于未包含的库。因此，您必须将包含 z 的包添加到 classpath/ 或项目的 Java 构建路径（如果您使用的是 eclipse）。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-25T11:18:33.927

转到项目资源管理器。

1.  右键单击您的项目
2.  构建路径
3.  配置构建路径
4.  删除 JRE 系统库
5.  点击添加库
6.  添加 JRE 系统库
7.  单击下一步然后完成

错误将得到解决。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T14:09:23.253

这意味着您在超类中进行了不兼容的更改，但尚未重新编译它。

我建议您使用 Maven 或 Ant 之类的构建系统和/或使用 IDE 来构建您的所有代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-14T06:25:47.570

我在我的 RCP 应用程序之一中遇到了这个问题。

原因：我没有**`org.eclipse.core.runtime`**在 Manifest 文件的依赖部分添加核心插件。当我添加此依赖项 jar 问题已解决。

谢谢， 席德

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T14:11:25.110

这意味着您实现的类引用了接口或类，该接口或类再次引用了其他库中的一些其他类或接口，而这些类或接口不可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-27T05:47:51.557

springframework.aop jar 取决于 aopalliance.jar 将其添加到您的类路径中，它将解决您的问题，希望它可以工作，因为我面临同样的问题，我添加了依赖 jar，所以它解决了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-17T04:41:08.107

```
right click your project ,Properties- java build path- source- include all the cs file source(it may inherit the files) and sync. 
```

这对我有用并且正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-20T15:39:46.733

当我尝试在另一个插件项目中使用某个类时，我也遇到了这个问题。我有类似 myClass extends pp1Class 之类的东西 - 在这里我遇到了错误，pp1Class 插件被添加为依赖项。pp1Class 扩展 pp2Class - 这是 pp1（插件 proj1）中的依赖项，但不是我的插件。我所做的是转到 pp1 并在其中定义了对 pp2 的依赖项，单击属性并检查“重新导出此依赖项”（这是在 MANIFEST.MF 中）。这应该可以解决问题，它解决了我的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-12T11:57:05.570

此错误的另一个原因是，您的一个基类实现了一个位于外部库中的接口，并且您的 .classpath 文件保存在源代码控制系统上（因此是只读的）。

例如，您的 ClassB 扩展了 ClassA，而 ClassA 实现了 LibraryA.jar 中的 InterfaceA。ClassA 在 ProjectA 中，ClassB 在 ProjectB 中。ProjectA .classpath 文件是只读的。

在这里，您必须从 ProjectA 中导出 LibraryA.jar。但我猜由于 Eclipse 错误，当一个新的队友连接这些项目时（或者偶尔当你准备另一个工作区时），他会得到这种类型层次结构错误。解决此问题的唯一方法是检出 ProjectA 中的 .classpath 文件，删除并重新添加一个库（不必是 LibraryA.jar）。此操作以某种方式解决了错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-24T14:41:51.083

在Eclipse、OSGi环境下，可以将需要的包添加到MANIFEST.MF->Dependencies选项卡->Imported packages。这将解决问题。或者包含该类的插件可以添加到Required Plugin-ins

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-19T07:43:55.073

我实际上在构建路径中添加了所有相关的 jar 和接口，但我仍然面临错误，所以后来有人建议我在构建路径中添加 j2ee.jar，我的错误就消失了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-12T13:12:26.280

我在`maven`使用`Eclipse oxygen.1a`IDE 的项目中也遇到了这个问题，

> MyClassName 类型的层次结构不一致

在类名级别显示错误，

此后，我从存储库中获取了完整的 svn 更新，之后`Maven -> Update Project`又进行了更新`Project Refresh`。

错误消失了...

据我了解，这是由于非托管项目版本而发生的。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-04-13T02:42:35.690

> A型的层次结构不一致

上述错误主要是因为类路径中缺少一些 jars 例如：我试图实现一个接口“MethodBeforeAdvice”

这里 MethodBeforeAdvice 实现了 BeforeAdvice，这两个接口存在于一个名为“Spring-aop-4.2.5.Release.jar”的 jar 文件中

但是“BeforeAdvice”接口实现了一个接口“Advice”，该接口存在于我的类路径中不存在的其他一些 jar“aop-alliance-1.0.0.jar”中

# haskell - 使用 yesod 生成动态表单

> ID：12179832
> 
> 赞同：7
> 
> 时间：2012-08-29T14:07:15.653
> 
> 标签：haskell, yesod

如何动态生成具有不同数量输入字段的表单？

我管理的最接近的是：

```
listEditForm :: [String] -> Html -> MForm App App (FormResult Text, Widget)
listEditForm xs = renderDivs $ mconcat [ areq textField (String.fromString x) Nothing | x <- xs] 
```

但这具有结果类型`Text`而不是`[Text]`预期的结果，因为巧合`Text`是 的一个实例`Monoid`，例如它失败了`Int`。

我有一个可行的替代尝试，它结合了几种形式，但不知何故，它只适用于这个玩具示例，而真正的尝试却奇怪地失败了。无论如何，我认为这不是正确的方法：

```
data MapPair = MapPair { mpKey :: T.Text, mpValue :: Maybe T.Text }

editForm mmp = renderTable $ MapPair
  <$> areq textField "Key"   (mpKey  <$> mmp)
  <*> aopt textField "Value" (mpValue <$> mmp)

pair2mp (v,k) = MapPair { mpKey = v, mpValue = Just k }

getEditR = do
  sess <- getSession
  let sesslist = Map.toList $ Map.map (decodeUtf8With lenientDecode) sess  
  forms <- forM sesslist (\a -> generateFormPost $ editForm $ Just $ pair2mp a)

  defaultLayout [whamlet|
    <h1>Edit Value Pairs
    $forall (widget,enctype) <- forms
      <form method=post action=@{EditR} enctype=#{enctype}>
        ^{widget}
        <input type=submit>
  |]

  postEditR = do
    sess <- getSession
    let sesslist = Map.toList $ Map.map (decodeUtf8With lenientDecode) sess
    forM_ sesslist (\a -> do
        ((res,_),_) <- runFormPost $ editForm $ Just $ pair2mp a
        case res of
          (FormSuccess (MapPair {mpKey=mk, mpValue=(Just mv)})) -> setSession mk mv
          _ -> return ()
      )
    defaultLayout [whamlet|ok|] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T09:40:01.577

呃，使用单子形式实际上很容易（见下面的代码）。

我最头疼的是额外的文本字段，以确保收到答案的处理程序也可以推断出相应的问题。也许我可以隐藏那些文本字段，使它们不可编辑，或者找到另一种解决方法（但我对 Html 还不太了解）。

```
listEditMForm :: [(String,Int)] -> Html -> MForm App App (FormResult [(FormResult Int, FormResult Text)], Widget)
listEditMForm xs extra = do
    ifields <- forM xs (\(s,i) -> mreq intField  (String.fromString s) (Just i))
    tfields <- forM xs (\(s,i) -> mreq textField (String.fromString s) (Just $ pack s))
    let (iresults,iviews) = unzip ifields
    let (tresults,tviews) = unzip tfields
    let results = zip iresults tresults
    let views   = zip iviews tviews
    let widget = [whamlet|
        #{extra}
        <h1>Multi Field Form
        $forall (iv,tv) <- views
          Field #
          #{fvLabel iv}: #
          ^{fvInput tv} #
          ^{fvInput iv}
          <div>
      |]
    return ((FormSuccess results), widget) 
```

还有一些我不知道的丑陋的东西，比如总是将结果包装在最外层的`FormSuccess`构造函数中，但我想这真的取决于每个用例（例如，单个 FormFailure 或 FormMissing 可能会使整个表单失败/missing 以及，但也许在某些情况下这是不想要的。）

所有的压缩和解压缩可能都可以更整齐地完成，但我想在我的情况下我只是创建一个组合字段`textintField`。我想我知道该怎么做，但是如果有一个组合字段的功能会很整洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-25T03:21:03.057

具有动态数量的字段的棘手之处在于，在处理程序中解析表单时需要知道行/字段的数量。

假设我们有一个如下所示的常规形式：

```
type Form m a b =
    (MonadHandler m, m ~ HandlerFor App) =>
    Maybe a ->
    Html ->
    MForm m (FormResult b, Widget)

nameAndAgeForm :: Form m (Text, Int) (Text, Int)
nameAndAgeForm mPair extra = do
    let nameSettings =
            FieldSettings
                { fsLabel = "name"
                , fsTooltip = Nothing
                , fsId = Nothing
                , fsName = Nothing
                , fsAttrs = []
                }
    (nameResult, nameField) <- mreq textField nameSettings (fst <$> mPair)

    let ageSettings =
            FieldSettings
                { fsLabel = "age"
                , fsTooltip = Nothing
                , fsId = Nothing
                , fsName = Nothing
                , fsAttrs = []
                }

    (ageResult, ageField) <- mreq intField ageSettings (snd <$> mPair)

    let result = (,) <$> nameResult <*> ageResult
    let widget = [whamlet|age: ^{fvInput nameField}, age: ^{fvInput ageField}^{extra}|]

    pure (result, widget) 
```

**注意**重要的是`fsName = Nothing`在所有字段中，否则当我们尝试在列表中重复表单时它们会相互碰撞。

我们可以将其转换为具有以下签名的函数的对列表形式`Form m a b -> Form m [a] [b]`。

如果我们使用一个技巧来解决解析时必须知道字段数的问题，我们可以编写这样一个函数。我们可以将行数作为要解析的第一个字段发送。

```
listifyForm :: Form m a b -> Form m [a] [b]
listifyForm form items csrf = do
    let countSettings =
            FieldSettings
                { fsLabel = "rowCount"
                , fsTooltip = Nothing
                , fsId = Nothing
                , fsName = Just "listifiedFormRowCount"
                , fsAttrs = []
                }

    (rowCountResult, rowCountField) <- mreq hiddenField countSettings (length <$> items)

    case (rowCountResult, items) of
        (FormSuccess rowCount, _) -> constructForms rowCountField $ replicate rowCount Nothing
        (FormMissing, Just items') -> constructForms rowCountField $ Just <$> items'
        (FormFailure err, _) -> pure (FormFailure err, [whamlet|Something went wrong with the form. Do all the fields have unique ID's?|])
        (FormMissing, _) -> pure (FormMissing, [whamlet|Something went wrong with the form|])
  where
    constructForms rowCountField mItems =
        fmap ([whamlet|^{csrf}^{fvInput rowCountField}|] <>) . bimap sequenceA mconcat . unzip
            <$> traverse (flip form mempty) mItems 
```

现在我们可以将 转换`nameAndAgeForm`为`nameAndAgeListForm`：

```
nameAndAgeListForm :: Form m [(Text, Int)] [(Text, Int)]
nameAndAgeListForm = listifyForm nameAndAgeForm 
```

然后可以在显示表单的处理程序中像这样调用它：

```
((_, namesAndAgesWidget), _) <- runFormPost $ nameAndAgeListForm $ Just [("Alice", 12), ("Bob", 34)] 
```

在处理输入的处理程序中就像这样：

```
((result, _), _) <- runFormPost $ nameAndAgeListForm Nothing 
```

# c - 将字符串分配给C中结构中的元素

> ID：12179833
> 
> 赞同：5
> 
> 时间：2012-08-29T14:07:15.673
> 
> 标签：c, string, structure

我有这个结构：

```
typedef struct SM_DB
{
    LIST_TYPE           link;
    char                name[SM_NAME_SIZE];
} SM_DB_TYPE; 
```

我想为其“名称”分配一个字符串。我这样做是这样的：

```
SM_DB_TYPE one;
one.name = "Alpha"; 
```

但是，编译后出现错误：“错误 C2106：'='：左操作数必须是左值”。我希望这是相当明显的。有谁知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:10:23.737

您只能在声明字符串时为其赋值。您以后不能使用`=`.

你必须使用`strcpy()`函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T14:13:10.537

假设`SM_NAME_SIZE`足够大，您可以`strcpy`像这样使用：

`strcpy(one.name, "Alpha");`

在执行 strcpy 之前确保您的目的地有足够的空间来保存字符串，您将获得缓冲区溢出。

如果你想安全起见，你可以这样做

```
if(!(one.name = malloc(strlen("Alpha") + 1))) //+1 is to make room for the NULL char that terminates C strings
{
      //allocation failed
}
strcpy(one.name, "Alpha");  //note that '\0' is not included with Alpha, it is handled by strcpy
//do whatever with one.name
free(one.name) //release space previously allocated 
```

如果使用 malloc，请确保释放`one.name`，以免浪费内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:09:24.807

在 C 中使用`strcpy`or`strncpy`分配字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T14:24:53.273

C 没有内置的字符串类型。您必须使用字符数组来保存字符串。

由于 C 也不允许将一个数组分配给另一个数组，因此您必须使用标准 C 库中的各种函数将数组元素从一个数组复制到另一个数组，或者您必须自己编写一个循环来完成。尽管有时有理由编写自己的循环，但更倾向于使用标准 C 库函数。

对于与该类型一起使用的标准 ANSI 类型字符串，`char`有大量函数，其中大多数以 str 开头，例如复制或比较字符串的函数`strcpy()`，`strcmp()`. 还有另一组，您可以指定要复制或比较的最大字符数，例如`strncpy()`or `strncmp()`。

C 中的字符串是一个以二进制零字符结尾的字符数组。因此，如果您使用诸如“Constant”之类的常量字符串，这将创建一个字符数组，其中每个字符一个元素加上一个用于零终止符的附加元素。

这意味着在调整 char 数组大小时，您还必须记住再添加一个额外的数组元素来保存零终止符。

strncpy() 函数会将一个 char 数组复制到另一个，直到指定的最大字符数或找到零终止符时。如果达到最大字符数，则目标数组将不会被零终止符终止，因此需要注意这一点。

```
char  one[10];
char  two[20];
strncpy (one, "1234567", 10);  // copy constant to the char buffer max of 10 chars
one[9] = 0;   // make sure the string is zero terminated, it will be this is demo
strcpy (two, one);
strcat (two, " suffix");    // add some more text to the end 
```

还有一些函数可以处理与 UNICODE 一起使用的宽字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T14:17:53.110

采用：

```
strcpy(one.name, "Alpha"); //Removed null byte (Read first comment by shf301) 
```

选择：

```
typedef struct SM_DB  
{
    LIST_TYPE           link;
    char*               name;   
} SM_DB_TYPE;

SM_DB_TYPE one;
one.name = malloc(sizeof(char) * (strlen("Alpha") + 1); //Allocate memory
if (!one.name) {
   /* Error handling */
} else {
    strcpy(one.name, "Alpha");
} 
```

# git - 在 Heroku 上使用 Octopress 的 Git 工作流

> ID：12179834
> 
> 赞同：1
> 
> 时间：2012-08-29T14:07:18.807
> 
> 标签：git, heroku, octopress

我想在 Heroku 上部署一个 Octopress 博客。问题是这需要在 VCS 下添加“公共”目录（包含已编译的内容）。但是对于我的一般工作流程，我不想跟踪这个目录。那么我应该怎么做：

1.  跟踪对源文件和配置文件的更改并将其推送到 GitHub。
2.  将生成的博客推送到 Heroku。
3.  保持 Octopress 可更新（参见[http://octopress.org/docs/updating/](http://octopress.org/docs/updating/)）

我是 Heroku 和 Octopress 的新手，所以请在你的回答中详细说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T16:33:40.297

将 Octopress 部署到 heroku 的标准方法是提交和部署公共目录。我同意这并不理想，因为跟踪生成的资产通常是一种不好的做法。但是，由于这是一个静态站点，因此能够部署静态资产可以更轻松地在任何地方部署您的博客，因为您不会依赖配置为为您生成博客的远程服务器。

话虽如此，有些人在构建包和 Heroku 的 cedar 堆栈方面处于领先地位。你可以在这里关注他们的工作。[http://jasongarber.com/blog/2012/01/10/deploying-octopress-to-heroku-with-a-custom-buildpack](http://jasongarber.com/blog/2012/01/10/deploying-octopress-to-heroku-with-a-custom-buildpack)

我没有尝试过这种方法，但许多人报告说使用它成功。如果您有问题，请联系作者，因为我相信他们会更能帮助您。

# c# - 动态创建用户输入

> ID：12179837
> 
> 赞同：0
> 
> 时间：2012-08-29T14:07:26.237
> 
> 标签：c#

我正在使用 Windows Visual C# 2010 Express 在 C# 中编程。

我的目标是创建一个在初始化时显示单行`Textbox`输入的表单，但在填写完信息后，让程序创建第二行以允许用户输入另一行信息。我也不知道需要多少这些行的限制，因此希望动态创建它们。我希望这个程序足够通用，可以创建无限（某种）数量的///`TextBoxes`等。`Buttons``Labels`

到目前为止，我所看到的一切都是基于 Web 的（ASP.Net 中的 C#）。我想制作一个具有此功能的程序。有什么想法或见解吗？我不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:10:27.747

使用 a`DataGridView`和 a`TextBoxColumn`并使用 a`BindingSource`将其附加到 a `List<string>`。

# php - 如何在 zf2 中获取控制器和动作名称

> ID：12179840
> 
> 赞同：5
> 
> 时间：2012-08-29T14:07:32.800
> 
> 标签：php, zend-framework2

在 zf1 中，我们可以使用获取控制器和动作名称

```
$controller = $this->getRequest()->getControllerName();
$action = $this->getRequest()->getActionName(); 
```

我们如何在 zf2 中实现这一点？

更新：我试图让他们使用

```
echo $this->getEvent()->getRouteMatch()->getParam('action', 'NA');
echo $this->getEvent()->getRouteMatch()->getParam('controller', 'NA'); 
```

但我收到错误

```
Fatal error: Call to a member function getParam() on a non-object 
```

我喜欢在 __construct() 方法中获取它们；

理想情况下，我想检查是否没有定义 Action 它将执行 noaction() 方法。我会使用 php 方法 method_exists 进行检查。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T15:27:18.640

更简单：

```
$controllerName =$this->params('controller');
$actionName = $this->params('action'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:51:42.710

您无法在控制器`__construct()`方法中访问这些变量，但您可以在`dispatch`方法和`onDispatch`方法中访问它们。

但是如果您想检查动作是否存在，在 zf2 中已经有一个用于 notFoundAction 的内置函数，如下所示

```
 public function notFoundAction()
{
    parent::notFoundAction();
    $response = $this->getResponse();
    $response->setStatusCode(200);
    $response->setContent("Action not found");
    return $response;   
} 
```

但是如果您仍然喜欢手动执行此操作，您可以使用如下调度方法执行此操作

```
namespace Mynamespace\Controller;

use Zend\Mvc\Controller\AbstractActionController;

use Zend\Stdlib\RequestInterface as Request;
use Zend\Stdlib\ResponseInterface as Response;
use Zend\Mvc\MvcEvent;

class IndexController extends AbstractActionController 
{

    public function __construct()
    {

    }        

      public function notFoundAction()
    {
        parent::notFoundAction();
        $response = $this->getResponse();
        $response->setStatusCode(200);
        $response->setContent("Action not found");
        return $response;   
    }

    public function dispatch(Request $request, Response $response = null)
    {
        /*
         * any customize code here
         */

        return parent::dispatch($request, $response);
    }
    public function onDispatch(MvcEvent $e)
    {
        $action = $this->params('action');
        //alertnatively 
        //$routeMatch = $e->getRouteMatch();
        //$action = $routeMatch->getParam('action', 'not-found');

        if(!method_exists(__Class__, $action."Action")){
           $this->noaction();
        }

        return parent::onDispatch($e);
    }
    public function noaction()
    {        
        echo 'action does not exits';   
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T23:31:10.413

您将在控制器内的 Zf2 中获得类似这样的模块、控制器和操作名称...

```
$controllerClass = get_class($this);
$moduleNamespace = substr($controllerClass, 0, strpos($controllerClass, '\\'));
$tmp = substr($controllerClass, strrpos($controllerClass, '\\')+1 );
$controllerName = str_replace('Controller', "", $tmp);

//set 'variable' into layout...
$this->layout()->currentModuleName      = strtolower($moduleNamespace);
$this->layout()->currentControllerName  = strtolower($controllerName);
$this->layout()->currentActionName      = $this->params('action'); 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-01-24T07:59:52.560

```
$controllerName = strtolower(Zend_Controller_Front::getInstance()->getRequest()->getControllerName()); 
```

# javascript - 是否可以从 SOAPUI 中的脚本编辑器更改 REST API 中的查询参数？

> ID：12179841
> 
> 赞同：1
> 
> 时间：2012-08-29T14:07:33.943
> 
> 标签：javascript, api, rest, groovy, soapui

我正在使用 SOAPUI 对此 REST API 进行负载测试。

```
http://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false 
```

我已经成功设置了测试套件和所有。我的疑问是，当我执行测试时，是否可以通过从脚本编辑器（javascript 或 groovy）传递测试套件的值来更改 REST API url 中的查询参数？如果是这样，我应该如何编写脚本？

希望我对我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:37:02.463

参数通过 REST 测试请求的主选项卡进行操作。

图标看起来像

*   带有圆形箭头的框 - 将参数恢复为默认值
*   普通框 - 清除所有参数
*   一个加号，下面有一些破折号 - 从指定的 URL 更新此请求参数

您可以使用 groovy 动态设置值

如果你的参数看起来像

```
address  ${address}
sensor   ${useSensor} 
```

您可以在 groovy 脚本中设置这些值：

```
context.setProperty("address", "1600+Amphitheatre+Parkway,+Mountain+View,+CA")
context.setProperty("useSensor", "false") 
```

# jquery - AJAX调用后jqPlot调整图表大小

> ID：12179845
> 
> 赞同：0
> 
> 时间：2012-08-29T14:07:52.493
> 
> 标签：jquery, jqplot

我正在使用 jqPlot 来显示水平条形图，其中 yAxis 中的数据是动态点数。正在使用 AjaxDataRenderer 加载数据。由于 yAxis 上的点数是动态的，因此我需要更改 jqPlot 容器 div 的高度，因此无论如何条形的大小都是相同的。我需要根据从 ajax 调用返回的数据更改高度。

我已经通过在按钮上添加一个单击处理程序来调整图表容器 div 的大小来测试这一点。这工作正常。我的问题是如何在 ajax 调用返回之后但在图表呈现之前更改高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:27:23.753

几周前我遇到了这种问题。

查看[此相关帖子](https://stackoverflow.com/questions/11229577/jqplot-set-a-fix-height-value-for-the-graph-area-not-including-y-axe-labels)，Boro 解释了如何设置图形的固定高度和宽度。

# c# - xna 上的错误“由于其保护级别而无法访问”

> ID：12179849
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:08:08.633
> 
> 标签：c#, xna-4.0

尝试获取鼠标位置时出现错误。

这是我的播放器类。我试图让玩家精灵通过鼠标光标移动

```
class Player : Actor
{
    public MouseState mState;

    EnemyManager enemyManager;

    public Player(Texture2D texture, Vector2 origin, SpriteBatch spriteBatch, EnemyManager enemyManager)
        : base(texture, origin, spriteBatch, new Vector2(250.0f, 516.0f))
    {

        this.enemyManager = enemyManager;
    }

    public override void Update(GameTime gameTime)
    {
        //KeyboardState keyboardState = Keyboard.GetState();

        //if (keyboardState.IsKeyDown(Keys.Left))
        //{
        //    if (this.Position.X > 32.0f)
        //    {
        //        this.Position -= 10.0f * Vector2.UnitX;
        //    }
        //}

        //if (keyboardState.IsKeyDown(Keys.Right))
        //{
        //    if (this.Position.X < 748.0f)
        //    {
        //        this.Position += 10.0f * Vector2.UnitX;
        //    }
        //}

        MouseState mState = Mouse.GetState();
        this.Position = new Vector2(mState.x, mState.y);

        // Collisions... 
        foreach (Enemy e in this.enemyManager.Enemies)
        {
            if (this.BoundingRectangle.Intersects(e.BoundingRectangle))
            {
                e.OnHit();

                break;
            }
        }

        base.Update(gameTime);
    }
} 
```

这是我的`Actor`类，它有位置变量

```
namespace Shmup
{
    public class Actor
    {
       public Texture2D texture;
       public Vector2 origin;
       public SpriteBatch spriteBatch;
       public Vector2 position;
       public Rectangle boundingRectangle;

        public Vector2 Position
        {
             get { return position; }
             set { position = value; }
        }

        public Rectangle BoundingRectangle
        {
            get { return boundingRectangle; }
        }

        public Actor(Texture2D texture, Vector2 origin, SpriteBatch spriteBatch, Vector2 initialPosition)
        {
            this.texture = texture;
            this.origin = origin;
            this.spriteBatch = spriteBatch;
            this.position = initialPosition;

            boundingRectangle = new Rectangle((Int32)(initialPosition.X - origin.X), (Int32)(initialPosition.Y - origin.Y), texture.Width, texture.Height);
        }

        public virtual void Update(GameTime gameTime)
        {

        }

        public virtual void Draw(GameTime gameTime)
        {
            this.spriteBatch.Draw(texture, position - origin, Color.White);
        }
    }
} 
```

我的主要课程

```
public class MyGame : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Player player;
    EnemyManager enemyManager;
    Actor actor;

    public MyGame()
    {
        graphics = new GraphicsDeviceManager(this);

        IsMouseVisible = true;

        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        Actor actor = new Actor();
        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        startTheGame(); 
    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        {
            this.Exit();
        }

        this.player.Update(gameTime);
        this.enemyManager.Update(gameTime);

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Maroon);

        this.spriteBatch.Begin();

        this.player.Draw(gameTime);
        this.enemyManager.Draw(gameTime);

        this.spriteBatch.End(); 

        base.Draw(gameTime);
    }

    void startTheGame()
    {
        enemyManager = new EnemyManager(this.Content.Load<Texture2D>("Enemy"), new Vector2(16), this.spriteBatch);

        player = new Player(this.Content.Load<Texture2D>("Player"),actor.position, this.spriteBatch, enemyManager);

        enemyManager.StartTheGame(10);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:15:30.183

这条线是我认为的问题：

```
this.Position = new Vector2(mState.x, mState.y); 
```

`x`并且`y`不会在`MouseState`. 您需要将它们大写（C# 区分大小写）。改用这个：

```
this.Position = new Vector2(mState.X, mState.Y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T03:39:29.720

“进行这些更改会给我一个不同的错误 Object reference not set to an instance of an object in line player = new Player(this.Content.Load("Player"),actor.position, this.spriteBatch,enemyManager); on我的主类它说错误'Shmup.Actor'不包含带有0个参数的构造函数——”

Actor 的构造函数需要 - Texture2D 纹理、Vector2 origin、SpriteBatch spriteBatch、Vector2 initialPosition。

所以你需要改变“Actor actor = new Actor();” 在您提供了声明新 Actor 所需的所有信息后，将其放入 LoadContent() 或单独的方法中。

它应该阅读以下内容（将每个参数替换为游戏类中的正确项目）：

Actor actor = new Actor( texture, origin, spriteBatch, initialPosition);

如果你这样做，它将修复错误，如果你不这样做，除非你在 Actor 中定义一个接受 0 个参数的构造函数，否则你将继续得到错误。希望这会有所帮助。

# javascript - 是否可以在 Underscore.js 中获取您正在排序的索引？

> ID：12179855
> 
> 赞同：89
> 
> 时间：2012-08-29T14:08:18.967
> 
> 标签：javascript, underscore.js

我正在使用 JS 库[下划线](http://underscorejs.org)，特别是使用**[`_.each`](http://underscorejs.org/#each)**和**[`_.sortby`](http://underscorejs.org/#sortBy)**库调用。我想知道是否有任何可能的方法来获取迭代器委托中的值的索引

```
_.sortBy([1, 4, 2, 66, 444, 9], function(num){ 
    /*It'd be great to have access to the index in here */
    return Math.sin(num); 
}); 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-08-29T14:14:48.903

索引实际上是可用的；

```
_.sortBy([1, 4, 2, 66, 444, 9], function(num, index){  }); 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-08-29T14:14:51.537

您可以通过向迭代器添加另一个参数来获取当前迭代的索引`function`，例如

```
_.each(['foo', 'bar', 'baz'], function (val, i) {
    console.log(i + ": " + val); // 0: foo, 1: bar, 2: baz
}); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-03-13T07:32:17.980

如果你想转换你的数组，那么`iterator`下划线`map`函数的参数也会作为第二个参数传递索引。所以：

```
_.map([1, 4, 2, 66, 444, 9], function(value, index){ return index + ':' + value; }); 
```

...返回：

```
["0:1", "1:4", "2:2", "3:66", "4:444", "5:9"] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-29T14:14:33.070

的迭代器`_.each`使用 3 个参数调用`(element, index, list)`。所以是的，为`_.each`您获取索引。

你可以在 sortBy 中做同样的事情

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-09T16:44:28.803

我认为值得一提的是 Underscore 的 _.each() 是如何在内部工作的。_.each(list, iteratee) 检查传递的列表是数组对象还是对象。

如果列表是一个数组，迭代参数将是一个列表元素和索引，如下例所示：

```
var a = ['I', 'like', 'pancakes', 'a', 'lot', '.'];
_.each( a, function(v, k) { console.log( k + " " + v); });

0 I
1 like
2 pancakes
3 a
4 lot
5 . 
```

另一方面，如果 list 参数是一个对象，则 iteratee 将采用一个列表元素和一个键：

```
var o = {name: 'mike', lastname: 'doe', age: 21};
_.each( o, function(v, k) { console.log( k + " " + v); });

name mike
lastname doe
age 21 
```

作为参考，这是来自 Underscore.js 1.8.3 的 _.each() 代码

```
_.each = _.forEach = function(obj, iteratee, context) {
   iteratee = optimizeCb(iteratee, context);
   var i, length;
   if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
         iteratee(obj[i], i, obj);
      }
   } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
         iteratee(obj[keys[i]], keys[i], obj);
      }
   }
   return obj;
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-11T16:41:04.317

更一般地，在大多数情况下，将列表和参数作为前两个参数的下划线函数提供对列表索引的访问，作为迭代器的倒数第二个参数。当涉及到两个下划线函数 _.reduce 和 _.reduceRight 时，这是一个重要的区别，它们将 'memo' 作为第三个参数——在这两个函数的情况下，索引不是第二个参数，而是第三：

```
var destination = (function() {
    var fields = ['_333st', 'offroad', 'fbi'];
    return _.reduce(waybillInfo.destination.split(','), function(destination, segment, index) {
        destination[fields[index]] = segment;
        return destination;
    }, {});
})();

console.log(destination);            
/*
_333st: "NYARFTW  TX"
fbi: "FTWUP"
offroad: "UP"

The following is better of course but not demonstrate my point:
var destination = _.object(['_333st', 'offroad', 'fbi'], waybillInfo.destination.split(','));
*/ 
```

因此，如果您愿意，可以使用下划线本身获取索引：`_.last(_.initial(arguments))`. 一个可能的例外（我没有尝试过）是 _.map，因为它可以使用对象而不是列表：“如果列表是 JavaScript 对象，迭代器的参数将是（值、键、列表）。” -- 见：[http ://underscorejs.org/#map](http://underscorejs.org/#map)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-05T21:28:04.253

如果可用，我相信大多数 lodash 数组函数都会显示迭代。但是排序并不是真正意义上的迭代：当你在数字 66 上时，你不会处理数组中的第四个项目，直到它完成。自定义排序函数将多次循环遍历数组，向前或向后轻推相邻的数字，直到所有内容都在适当的位置。

# multithreading - Global variable declaration in Qt

> ID：12179856
> 
> 赞同：1
> 
> 时间：2012-08-29T14:08:21.230
> 
> 标签：multithreading, qt4, qtnetwork

I have made a Gui thread and a QTcpSocket thread in Qt.I want to access data
from QTcpSocket thread to Gui thread.How to solve it?
Do i need to declare some global variable and how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:17:54.817

QTcpSocket 是从 gui 线程创建的。
所以此时 gui 线程有一个指向套接字对象的指针。
然后它在 gui 中的插槽和套接字中的信号之间创建连接。
在套接字对象中，每当您获取数据时，您只需发出一个包含数据的信号，该信号将被 gui 线程拾取。

您可以通过信号/插槽非常有效地传递任何 Qt 类型，例如 QString、QByteArray（或原始指针）。如果线程之间的信号的详细信息也会自动处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:59:35.897

最简单的方法是通过信号槽连接进行通信。每个线程中有一个 QObject。发送对象有一个信号，该信号连接到另一个线程中接收对象的槽。

在此设置中，您确保将连接两端的对象配置为存在于正确的线程中。您可能需要调用`QObject::moveToThread()`. QObject 还有一个属性，您可以在其中获取当前线程（在这种情况下用于调试目的）。

然后像往常一样建立信号槽连接。由于两个对象在不同的​​线程中，当触发信号时，会在接收标志的事件循环中放置一个槽调用事件。这在 Qt 文档中进行了解释，请查找`Qt::QueuedConnection`.

# php - 如何在php中通用打开文件

> ID：12179871
> 
> 赞同：2
> 
> 时间：2012-08-29T14:08:55.563
> 
> 标签：php, file, csv, file-handling

我一直在寻找有关此主题的问题，但未能得到我想要的东西。[这是用于 C++](https://stackoverflow.com/questions/5959832/working-with-file-streams-generically)的，我需要类似的用于 PHP。[这是为了包含 php 文件](https://stackoverflow.com/questions/735501/how-to-use-php-function-without-load-source-file)，我只想读取一个 CSV 文件。

我有这个：

```
if(file_exists("data.csv")){
    echo "CSV file found";

    $csv_data = file_get_contents("data.csv"); 

    $lines = explode("\n", trim($csv_data));   

    $array = array();

    foreach ($lines as $line){
            $array[] = str_getcsv($line);

}else {echo "File not found";} 
```

但我不想指定文件名 - 即通常加载/读取/打开文件。

这样做有什么简单的原因吗？没有意义，但有人告诉我不要在我的 PHP 脚本中硬编码任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:13:29.943

采用`fgetcsv`

```
if(file_exists("data.csv")){
    echo "CSV file found";
    $handle = fopen("data.csv", "r");
    if(!$handle) die("Could not open file!");
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
      $num = count($data);
      $row++;
      for ($c=0; $c < $num; $c++) {
        echo $data[$c] . "<br />\n";
      }
    }
    fclose($handle); 

}else {echo "File not found";} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:12:52.207

将您的代码放入函数中...

```
function open_file($file_name)
{
    if (!file_exists($file_name))
    {
        return false;
    }

    $csv_data = file_get_contents($file_name);
    $lines = explode("\n", trim($csv_data));

    $array = array();
    foreach ($lines as $line)
    {
        $array[] = str_getcsv($line);
    }

    return $array;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:22:17.513

如果您的脚本中可能没有任何硬编码，则需要将这些硬编码的内容放入某种外部配置文件中。您必须将该配置文件的名称硬编码到您的引导程序或应用程序中首先出现的任何内容中。加载配置后，在需要的地方提供配置数据。不将配置数据硬编码到您的代码中将允许您创建更多可重用的组件和代码，例如可以读取*任何*CSV 文件的 CSV 阅读器，而不是只能读取硬编码到其中的一个特定 CSV 文件的 CSV 阅读器。

### 例子：

```
// config.php
<?php
return array(
    'csvFile' => '/path/to/file.csv',
    …
);

// bootstrap.php
<?php
$config = include '/path/to/config.php';
…

// someFile.php
<?php
include '/path/to/bootstrap.php';
$file = new SplFileObject($config['csvFile']);
$file->setFlags(SplFileObject::READ_CSV);
foreach ($file as $row) {
   // Do something with values
} 
```

# gcc - ARM 内联汇编中的指令 mrc p15 有什么作用？

> ID：12179872
> 
> 赞同：1
> 
> 时间：2012-08-29T14:08:58.957
> 
> 标签：gcc, assembly, arm, inline-assembly

ARM 汇编中的这一行是做什么的？

```
mrc p15, 0, %0, c9, c13, 0" : : "r" (counter) 
```

是什么`p15`？通常寄存器以`r`in为前缀`r15`。

符号是`::`什么，角色是什么`c9, c1`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:45:22.120

虽然`MRC`是通用协处理器互操作指令， `cp15`但*控制处理器*是所有现代 ARM CPU 都具有的，并且已被 ARM 用于扩展片上单元（如高速缓存、MMU、性能监控等等。

一次接受你的指导：

`mrc p15, 0, %0, c9, c13, 0" : : "r" (counter)`

根据[ARM Cortex A7 MPCore Reference](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0464d/DDI0464D_cortex_a7_mpcore_r0p3_trm.pdf)，指令格式为：

`MRC{cond} P15, <Opcode_1>, <Rd>, <CRn>, <CRm>, <Opcode_2>`

在第 4-11 页上，这被描述为将 CPU 寄存器传输到性能监视器计数寄存器（我猜`count=0`这是性能计数器的重置）。

至于内联汇编的语法。请参阅[此](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#ss5.1)以获取 x86 概述 - 这可能类似于 ARM。

该`: : "r" (counter)` 指令具有以下含义：

*   寄存器中没有需要以局部变量结尾的输出
*   从变量 获取输入`counter`，并且该寄存器应用作`%0`。
*   编译器没有应该注意的副作用（clobbers）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:17:54.470

手臂中的协处理器可能比其他处理器更明显/可见。尽管如此，这是一个协处理器访问函数，协处理器接口是通用的，这些指令是通用的，就好像您只是在通用总线上填写项目一样。现在 arm 确实重用了一些东西，因为一个内核中的协处理器寄存器如果存在于另一个内核中，则更有可能不相关或相同。正确的答案是访问 arm 网站 (infocenter.arm.com) 并找到您正在使用的处理器系列和内核的 arm arm（arm 架构参考手册）和 trm（技术参考手册）或查看代码因为，在一本或两本手册中，它将有一个关于协处理器的部分，当您进入该部分时，您将看到协处理器编号，然后在该协处理器中注册，其中一些编号将是有意义的。ARM 通常会说，在这里读取这个寄存器是确切的指令，在这里写这个寄存器是确切的指令，它会采用您提供的形式。如果您希望从代码倒退到它的作用，您会发现您可以非常快速地进入手册的该部分并快速找到说明，然后查看它对特定核心或系列的作用。另一种方法是查看章节标题，找到感兴趣的寄存器，然后查看用于操作它的指令的语法。如果您希望从代码倒退到它的作用，您会发现您可以非常快速地进入手册的该部分并快速找到说明，然后查看它对特定核心或系列的作用。另一种方法是查看章节标题，找到感兴趣的寄存器，然后查看用于操作它的指令的语法。如果您希望从代码倒退到它的作用，您会发现您可以非常快速地进入手册的该部分并快速找到说明，然后查看它对特定核心或系列的作用。另一种方法是查看章节标题，找到感兴趣的寄存器，然后查看用于操作它的指令的语法。

至于 :: 双冒号，我猜你是从内联汇编中得到的，这与内联汇编有关，编译器的东西，与 arm 指令完全无关，arm 指令以 c13, 0 结尾。

# c# - 在 VB 中声明属性的两种方式 - 有什么区别？

> ID：12179879
> 
> 赞同：0
> 
> 时间：2012-08-29T14:09:21.583
> 
> 标签：c#, vb.net

这两个片段有什么区别？

```
Public Property UserName As String 
```

和

```
Public Property User As String
    Get
        Return _User
    End Get
    Set(ByVal value As String)
        _User = value
    End Set
End Property 
```

如果这是一个重复或愚蠢的问题，我很抱歉。我不习惯 VB.NET，我更习惯 C#。我正在尝试将其翻译成 C#，我没有犯错的余地。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:11:16.513

第一个（自动实现的属性）将自动为您创建支持字段，因此您不必`_User`像第二个示例中那样声明自己。

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd293589.aspx)：

> 当您声明一个自动实现的属性时，Visual Basic 会自动创建一个隐藏的私有字段，称为支持字段以包含该属性值。支持字段名称是自动实现的属性名称，前面带有下划线 (_)。例如，如果您声明一个名为 ID 的自动实现属性，则支持字段名为 _ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:11:19.463

没有区别。第一个只是第二个的简短版本。

但是，如果您想限制 setter 或在属性中执行更多操作而不是获取/设置变量，则需要使用第二个版本。

所以它与（在 C# 中）相同

```
public string UserName { get; set; } 
```

[自动实现的属性 (Visual Basic)](http://msdn.microsoft.com/en-us/library/dd293589.aspx)

[自动实现的属性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:10:51.903

其中一个更短:)

在第一种情况下，它是一个自动实现的属性，与第二种情况执行相同的操作，只是您看不到或使用支持字段。

顺便说一句，C# 等价物是：

```
public string UserName { get; set; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:10:59.053

这只是[自动实现属性的 VB 版本](http://msdn.microsoft.com/en-us/library/dd293589.aspx)。

所以 C# 等价物是：

```
public string UserName { get; set; } 
```

请注意，VB 允许自动实现属性的默认值，而 C# 不允许 - 您需要在构造函数中将属性设置为默认值。

# java - Android 队列与堆栈

> ID：12179887
> 
> 赞同：7
> 
> 时间：2012-08-29T14:09:50.510
> 
> 标签：java, android

为什么`java.util.Stack`允许我`Stack`使用简单的构造函数在 android 活动中创建一个新的，例如：

```
Stack < ImageView> stack = new Stack< ImageView>(); 
```

我不能这样做`java.util.Queue`吗？队列不应该有类似的构造函数吗？奇怪的是[http://developer.android.com/reference/java/util/Stack.html](http://developer.android.com/reference/java/util/Stack.html)它说`Stack`有一个公共构造函数和[http://developer.android.com/reference/java/util/Queue.html](http://developer.android.com/reference/java/util/Queue.html)我没有看到类似的队列构造函数..为什么会这样？`Queue`例如，拥有一个`ImageView`元素的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T14:14:57.760

因为 Queue 是一个接口，所以你应该用一个来初始化它`LinkedList`：

```
Queue<String> qe = new LinkedList<String>();

qe.add("b");
qe.add("a");
qe.add("c");

//Traverse queue
Iterator it = qe.iterator();

System.out.println("Initial Size of Queue :" + qe.size());

while(it.hasNext())
{
   String iteratorValue = (String) it.next();
   System.out.println("Queue Next Value :" + iteratorValue);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T14:13:06.233

这是因为 Queue 只是一个接口。要创建 Queue 对象，您需要一个类，它实现了 Queue 的方法。

队列的一些实际实现：[链接](http://docs.oracle.com/javase/tutorial/collections/implementations/queue.html)

# html - 从网络浏览器发送电子邮件

> ID：12179889
> 
> 赞同：1
> 
> 时间：2012-08-29T14:09:55.437
> 
> 标签：html, html-email

这个问题很难解释，而且可能含糊不清。我想要实现的目标类似于点击Craigslist 上的“[回复”按钮。](http://toronto.en.craigslist.ca/tor/eve/2940846940.html)

与简单的 mailto 或使用 smtp 服务器相比，此功能的独特之处在于用户必须登录到他们的电子邮件帐户并自动使用可用的发送信息或（已经给出）例如发送电子邮件。“joesmith@email.com”。

我在哪里可以找到这方面的信息？和例子。

请注意，我使用 Visual Studio 2010 语言 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:31:24.530

您应该能够通过创建具有以下 URL 的链接来完成类似于 Craigslist 示例的操作：

```
https://mail.google.com/mail/?view=cm&fs=1&to=<to_address>&su=<subject>
http://compose.mail.yahoo.com/?to=<to_address>&subject=<subject>
http://mail.live.com/mail/EditMessageLight.aspx?n=&to=<to_address>&subject=<subject>
http://webmail.aol.com/Mail/ComposeMessage.aspx?to=<to_address>&subject=<subject> 
```

# apache - Restler ssl https 重定向

> ID：12179891
> 
> 赞同：2
> 
> 时间：2012-08-29T14:09:59.180
> 
> 标签：apache, authentication, ssl, https, restler

我正在使用restler编写一个REST api，由于我不想做一些基本的身份验证，我需要将每个不是来自https的请求重定向到https。

有人知道使用restler 提供的.htaccess 文件执行此操作的方法，还是使用php 标头进行此重定向更好？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:55:52.993

对我有用的方法是从 index.php （网关）将下面的代码放在 index.php 中，然后放在任何其他代码之前

```
if($_SERVER['HTTPS']!="on")
{
   $redirect= "https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
   header("Location:$redirect");
   exit;
} 
```

# python - 获取挂载驱动器的网络路径，windows

> ID：12179892
> 
> 赞同：3
> 
> 时间：2012-08-29T14:10:00.377
> 
> 标签：python, windows, pywin32

问题是：我如何使用 python 将安装的网络驱动器号解析为 Windows 中的网络路径？

pywin32 或任何其他 python 的模块可以做到吗？

我玩过 pywin32file 及其方法，但我不知道该怎么做。

所有示例和帮助将不胜感激！

# python - 使用 python 的 pylab 创建可滚动的多图

> ID：12179893
> 
> 赞同：5
> 
> 时间：2012-08-29T14:10:05.773
> 
> 标签：python, matplotlib

我有大量的图，并希望使用 python 在同一个图中绘制它们。我目前正在使用 pylab 进行绘图，但是由于太多，它们被绘制在另一个之上。有没有办法使图形可滚动，使图形足够大并且使用滚动条仍然可见？

我可以为此使用 PyQT，但我可能缺少 pylab 的图形对象的一个​​功能......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T16:16:01.957

这符合你想要的精神，如果不是字母的话。我认为您想要一个带有多个轴的窗口，`axes`然后能够滚动轴（但仍然平均一次只能看到一个轴），该解决方案有一个轴和一个滑块，用于选择要设置的数据阴谋。

```
import numpy
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider
# fake data
xdata = numpy.random.rand(100,100) 
ydata = numpy.random.rand(100,100) 
# set up figure
fig = plt.figure()
ax = fig.add_subplot(111)
ax.autoscale(True)
plt.subplots_adjust(left=0.25, bottom=0.25)

# plot first data set
frame = 0
ln, = ax.plot(xdata[frame],ydata[frame])

# make the slider
axframe = plt.axes([0.25, 0.1, 0.65, 0.03])
sframe = Slider(axframe, 'Frame', 0, 99, valinit=0,valfmt='%d')

# call back function
def update(val):
    frame = int(round(numpy.floor(sframe.val)))
    ln.set_xdata(xdata[frame])
    ln.set_ydata((frame+1)* ydata[frame])
    ax.set_title(frame)
    ax.relim()
    ax.autoscale_view()
    plt.draw()

# connect callback to slider   
sframe.on_changed(update)
plt.show() 
```

这是改编自这个[问题](https://stackoverflow.com/questions/11563295/visualization-of-3d-numpy-array-frame-by-frame/11563414#11563414)中的代码。您可以使用按钮小部件 ( [doc](http://matplotlib.sourceforge.net/api/widgets_api.html) ) 添加下一个/后退按钮。

# java - 使用 selenium 时出现“jboss 调用程序未绑定”

> ID：12179896
> 
> 赞同：0
> 
> 时间：2012-08-29T14:10:14.080
> 
> 标签：java, testing, selenium, jboss

我正在尝试将 selenium 2.25.0 与 jboss 和 seam 一起使用。我使用以下代码：

```
@Test
public void testRegistration() throws InterruptedException {
    DefaultSelenium selenium = new DefaultSelenium(
            new WebDriverCommandProcessor("http://localhost:8080",new FirefoxDriver()));
    selenium.open("*****");
    selenium.waitForPageToLoad("30000");
    selenium.type("main_form:name", "***");
    selenium.type("main_form:password", "***");
    selenium.click("main_form:login_button");
    selenium.waitForPageToLoad("30000");
    Assert.assertTrue(selenium.isTextPresent("****"));
    selenium.click("logout");
    selenium.close();
} 
```

但经过测试，它无法停止服务器并给出以下错误：

```
Exception in thread "main" javax.naming.NamingException: Could not dereference object [Root exception is javax.naming.NameNotFoundException: invoker not bound]
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1352)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:817)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:686)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.jboss.Shutdown.main(Shutdown.java:219) Caused by: javax.naming.NameNotFoundException: invoker not bound
at org.jnp.server.NamingServer.getBinding(NamingServer.java:771)
at org.jnp.server.NamingServer.getBinding(NamingServer.java:779)
at org.jnp.server.NamingServer.getObject(NamingServer.java:785)
at org.jnp.server.NamingServer.lookup(NamingServer.java:396)
at org.jnp.server.NamingServer.lookup(NamingServer.java:399)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
at sun.rmi.transport.Transport$1.run(Transport.java:159)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
at org.jnp.server.NamingServer_Stub.lookup(Unknown Source)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:726)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:686)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1346) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:24:17.827

发生这种情况是因为出于某种原因，jboss 在端口 4444 上运行与 rmi 相关的操作，而 selenium 也在 4444 上运行。更改 selenium 的端口（更容易做到）并且你在做生意。

是的，回答了我自己的问题。

# eclipse - 在 Eclipse 中编译和运行 OSGI 应用程序

> ID：12179897
> 
> 赞同：5
> 
> 时间：2012-08-29T14:10:15.907
> 
> 标签：eclipse, maven-2, compilation, osgi, bundle

我们的企业应用程序的基础是 OSGI，我们有几个逻辑上是 OSGI 包的 Java 项目。我们使用 Maven 使用 Maven Bundle 插件来编译应用程序。但是这个过程非常耗时，并且无法调试应用程序。我们还使用 Runner 和 Pax(:provison) 插件来运行应用程序。如果我们可以依赖 Eclipse 的 Auto build 功能并调试应用程序，那将会使我们的生活变得更加轻松。有没有办法将 Eclipse 配置为能够编译（并且可以运行）基于 OSGI 的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T16:27:00.650

我不完全确定我是否理解你，但这里是。

好吧，在 Eclipse 中运行/调试 OSGi 应用程序真的很容易，只要您的包驻留在 PDE 感知项目中或至少在您的目标平台上。

你有所有捆绑包的来源吗？没有源代码的调试并不是那么有用。如果你这样做了，你能把你的包的所有源代码导入你的 Eclipse 工作区吗？

否则，您可以创建一个[目标平台](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.pde.doc.user/concepts/target.htm)，将所有捆绑包添加到该平台。（作为第一次尝试，我会说将所有捆绑包转储到一个目录中并将目标平台指向那里）

无论哪种方式，您都应该能够运行（或调试）-> OSGi 框架-> 新建-> 选择您的捆绑包-> 开始

您既可以从或目标平台以及您的工作区中选择捆绑包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:46:24.237

对于构建，您可以使用[Eclipse 插件开发环境 (PDE)](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.pde.doc.user/guide/intro/pde_overview.htm)。尽管有它的名字，但它并不是专门用于构建 Eclipse 插件，并且可以用于处理纯 OSGi 包。Eclipse 插件是带有一些附加功能的 OSGi 包。

尽管我知道一些面向企业的 OSGi 平台提供了 PDE 的扩展，但无法帮助您处理运行或调试部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:23:45.363

如果您已经在使用 maven 捆绑插件，您可能会发现 PDE 的清单优先方法不适合您现有的代码优先构建（我假设最后您需要一个用于开发和调试的 IDE 构建，以及用于持续集成和自动化测试的命令行构建）。

你有两个选择。正如其他人所建议的，您可以使用 Eclipse 的集成 PDE，并将 Tycho 用于您的 maven 构建。第谷使用与 PDE 相同的数据，因此您不必多次写下内容。或者，您可以坚持使用 maven 捆绑插件并在 Eclipse 中使用 bndtools。与捆绑插件一样，bndtools 是代码优先的，因此您无需担心维护清单。但是，您可能会发现 bndtools 中的功能集不如 PDE 中的那么大，我建议您仍然手动检查您的清单以确保您了解正在生成的内容。无论您更喜欢清单优先还是代码优先，这是一场激烈的哲学辩论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T06:34:12.593

看看 bndtools。bndtools 使用与 maven bundle 插件相同的 bnd。您甚至可以将 bndtools 与 m2e 一起使用。bndtools 可从 Eclipse 市场获得。

# titanium - 使用 appcelerator 在 Android 中添加菜单

> ID：12179904
> 
> 赞同：0
> 
> 时间：2012-08-29T14:10:24.890
> 
> 标签：titanium, titanium-mobile, appcelerator-mobile

我这里有个问题。新窗口在单独的 js 文件中定义。我想在这个窗口中添加一个菜单。所以我使用了以下代码：

```
var menu = Titanium.UI.Android.OptionMenu.createMenu();

var item1 = Titanium.UI.Android.OptionMenu.createMenuItem({
     title : 'Item 1',
     icon : '/images/item1.png'
});

var item2 = Titanium.UI.Android.OptionMenu.createMenuItem({
     title : 'Refresh',
     icon : '/images/refresh.png'
});
menu.add(item1);
Titanium.UI.Android.OptionMenu.setMenu(menu); 
```

在这样做时，应用程序已经崩溃。谁能帮我解决这个问题？

提前致谢！

注意：使用 Appcelerator 开发 Android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:48:14.223

always remember Set the menu on the current heavyweight window. To create a heavyweight window, specify one or more of

1.  fullscreen,
2.  navBarHidden,
3.  modal

otherwise you can use you app.js file this is working.... with specify this property.

```
var menu = Titanium.UI.Android.OptionMenu.createMenu();
var item1 = Titanium.UI.Android.OptionMenu.createMenuItem({
    title : 'Item 1',
    icon : '/images/item1.png'
});

item1.addEventListener('click', function(){
    Ti.UI.createAlertDialog({ title : 'You clicked Item 1'}).show();
});
var item2 = Titanium.UI.Android.OptionMenu.createMenuItem({
    title : 'Refresh',
    icon : '/images/refresh.png'
});
item2.addEventListener('click', function(){
    Ti.UI.createAlertDialog({ title : 'You clicked Refresh'}).show();
});
menu.add(item1);
menu.add(item2);

// Set the menu on the current heavyweight window. A heavyweight window maps to an Android
// Activity. To create a heavyweight window, specify one or more of [**fullscreen**,**navBarHidden**,**modal**] to createWindow.

Titanium.UI.Android.OptionMenu.setMenu(menu); 
```

# ios - iOS Phonegap：在启动/加载期间更改方向

> ID：12179906
> 
> 赞同：1
> 
> 时间：2012-08-29T14:10:30.943
> 
> 标签：ios, cordova, jquery-mobile, screen-orientation, cordova-2.0.0

现在，我正在开发一个由 Phonegap 2.0 和 jQuery Mobile 1.1.1 组成的 iOS 项目，并且我在方向更改方面遇到了严重问题。

问题是您在加载过程中更改方向后的屏幕尺寸比例。

如果我在加载过程中没有改变方向，加载完成后方向工作没有任何问题。

如果我在应用程序的启动/加载过程中改变方向，它就会开始变得奇怪！就像在屏幕附近留出空白等。从那一刻起，方向完全开始表现得很奇怪，这促使我重新启动应用程序。

有人遇到过同样的问题吗？

# android - 如何避免 OutofMemoryException？

> ID：12179908
> 
> 赞同：0
> 
> 时间：2012-08-29T14:10:34.283
> 
> 标签：android, memory

我的应用程序中的活动包含片段，这些片段又包含充满位图数据的列表视图/网格视图。最终用户将耗尽内存，因为先前活动的视图及其片段没有被破坏。因此，当用户达到第 10 个活动时 - 前 9 个活动持有大量位图数据。

我已经在使用弱引用，但是 MAT 说某些片段的视图包含对例如 Gallery 的引用，而 Gallery 又包含适配器等。因此 ImageViews 保持活动状态，位图也是如此。

到目前为止，我已经尝试过完全移除片段、移除适配器。有时它有效，但我想知道为什么这会如此复杂，是否有任何更简单的方法可以在没有太多编码的情况下释放/获取？

**UPD**

我会欣赏一个挑战相同问题的开源应用程序示例。

**UPD2**

我的大部分活动的蓝图是：活动持有片段。片段包含充满图像视图的 AbslistView。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:14:53.363

我建议只保留你需要的内存并销毁其他所有内容。用完所有可用内存是不好的形式。我会查看活动生命周期并完全理解它以解决您的问题： [https ://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:17:44.593

我建议观看[Android 应用程序的内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)Google IO 2011 演示文稿。

您还应该检查应用程序的工作流程，以确定何时可以开始销毁旧活动或释放其他资源。

您还可以使用[ActivityManager.getProcessMemoryInfo()](http://developer.android.com/reference/android/app/ActivityManager.html#getMyMemoryState%28android.app.ActivityManager.RunningAppProcessInfo%29)来检索进程的内存使用信息，以帮助确定是否需要释放一些旧资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:28:32.933

如果不使用所有内存，很难完成它。

这需要按需（重新）加载、在视图销毁时释放内存以及仔细设计片段和类。

[https://developer.android.com/training/displaying-bitmaps/index.html](https://developer.android.com/training/displaying-bitmaps/index.html)有一些关于以这种方式加载图像的有价值的信息。

如果您通过某种异步缓存加载器加载所有图像，请根据您的需要`onViewDestroyed`或`onDetached`根据您的需要清除缓存，并且不要保留对这些位图的其他引用，您应该已经消除了大部分问题。

生命周期非常对称（`onCreate`<> `onDestroy`，...），因此最好将您在该生命周期部分的另一侧创建的任何引用清空。假设您在生命周期中使用适当的位置，您将免费获得大量内存管理。在您的情况下，您应该检查如果您的片段被保留，您不会保留对`Gallery`or `ImageView`s 的引用（应该只存在于`onCreateView`->之间`onDestroyView`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:29:02.357

如果您的内存不足异常发生在适配器的 getView 方法中，

您可以隔离它通常发生的行，并用这样的 try-catch 包围它：

```
try {
   // load image (or whatever your loadimage is)
    mViewHolder.thumbImage.loadImage();
} catch (OutOfMemoryError e) {
   // clear your image cache here if you have one
   // call gc
   System.gc();
   // load image retry
   mViewHolder.thumbImage.loadImage();
} 
```

它不是世界上最优雅的解决方案，但它应该有所帮助。

# java - Android，更有效地从 youtube 数据 api 获取缩略图？

> ID：12179909
> 
> 赞同：0
> 
> 时间：2012-08-29T14:10:37.940
> 
> 标签：java, android, youtube, google-api, thumbnails

我的程序是这样的：我将数据 api 的响应传递给第二个活动，即 ListActivity。而且我在做List映射的时候把所有的缩略图都一一下载了。它起作用了，但是当它下载缩略图时，用户界面冻结了。我试图用 AsycTask 来做，但没有用。

这是我的代码：第一个活动

```
 public void Search(View view){
      String searchText;
      searchText = searchTarget.getText().toString();
      searchText= searchText.replaceAll(space,searchOr);
      if(searchText==null||searchText==""){
          Toast.makeText(Login.this, "Please enter at least one keyword", Toast.LENGTH_LONG).show();
          }
      else{
          try {
              //AsyncTask code here
              String SearchLink=searchTextStart+searchText+searchTextMid+page+searchTextEnd;
              new DownloadTask().execute(SearchLink);
              Log.v("Search checking ", SearchLink);
              } catch(Exception ex) {
                  //your timeout code
                  Toast.makeText(this, "No drivers found, network problem!", Toast.LENGTH_LONG).show();
                  }
          this.pd = ProgressDialog.show(this, "Working..", "Searching...", true, false);
          } 
      } 
```

第二次活动

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle bundle = this.getIntent().getExtras(); 
    arrayLength= bundle.getInt("indexToList");
    videoInfo = bundle.getStringArray("videoInfo");

    mData=getData();

    MyAdapter adapter = new MyAdapter(this);
    setListAdapter(adapter);
    }
private List<Map<String, Object>> getData() {

    List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();

    Log.v("In videoInfo List","length"+arrayLength);       
    Map<String, Object> map;

    for(int j=0, i=0 ; j<arrayLength; j++, i++){
        map = new HashMap<String, Object>();
        map.put("uploaded", videoInfo[j]);
        j++;
        map.put("category", videoInfo[j]);
        j++;
        map.put("title", videoInfo[j]);
        j++;
        map.put("description", videoInfo[j]);
        j++;

        try {
            Log.i("Check bitmap","before");
            //new DownloadTask().execute(videoInfo[j]);
            //VideoList.this.pd = ProgressDialog.show(VideoList.this, "Working..", "Searching...", true, false);
            Log.i("Check bitmap","after"+videoInfo[j]);
            Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(videoInfo[j]).getContent());
            map.put("thumbnail", bitmap);           
            }
        catch (Exception e){
              Toast.makeText(VideoList.this, "Network problem!", Toast.LENGTH_LONG).show();
        }

        //map.put("thumbnail",thumbnail[i]);            
        j++;            
        map.put("youtube_link", videoInfo[j]);   
        j++;
        map.put("rtsp", videoInfo[j]); 
        Log.v("In videoInfo List","rtsp: "+videoInfo[j]);  
        j++;

        float a = Float.parseFloat(videoInfo[j]);
        int b=(int)a;
        int sec = b % 60;
        int min = b/60;         
        String duration;
        if (sec<10)
        { duration = min+" : 0"+sec;}
        else
        {duration = min+" : "+sec;}
        videoInfo[j] = duration;
        map.put("duration", videoInfo[j]);   
        Log.v("In videoInfo List","duration: "+videoInfo[j]);       
        list.add(map);

        }
    Log.v("In videoInfo List","list: "+list.size());       

    return list;
} 
```

对不起我的英语，如果你不明白我写了什么，请告诉我。谁能帮帮我？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:08:33.060

问题解决了！在缩略图下载完成之前，我实际上调用了 ListView.setAdapter(adapter)。所以我把 ListView.setAdapter(adapter) 放在 onPostExecute() 中，它工作得很好

# php - 循环 PHP 函数，显示 Mysql 中的用户数据 - 限制显示 25 项并添加下一步按钮

> ID：12179916
> 
> 赞同：0
> 
> 时间：2012-08-29T14:10:47.263
> 
> 标签：php, jquery, mysql, function

我有这个 PHP 函数，我用它来显示我的用户数据。如果运行一次，它将基本上显示一个包含用户数据的 div。

```
function listings($fornavn, $efternavn, $email, $adresse, $tlf, $postnr, $city, $fodselsdag, $brugerid,$bartype,$idbar)
{

    ?>

    <div class="container">
    <span class="records" id="id-<?php echo $brugerid;?>">

    <div class="customer bidDiv clearfix">

    <?php if ($bartype=='temp_vip') { ?>

        <ul>
            <li>
                <span class="actionSpan" id="<?php echo $brugerid;?>" value="<?php echo $idbar;?>">
                <a class="edit-opt" id="godkend" href="#">GODKEND</a>
                </span>
            </li>
            <li>
                <span class="actionSpan" id="delete-<?php echo $brugerid;?>" value="<?php echo $bartype;?>">
                <a class="delete-opt" id="delete" href="#">Afvis</a>
                </span>
            </li>

    <?php }else{ ?>

            <ul>
            <li>
                <span class="actionSpan" id="delete-<?php echo $brugerid;?>" value="<?php echo $bartype;?>">
                <a class="delete-opt" id="delete" href="#">Slet</a>
                </span>
            </li>
            <li>
                <a class="edit-opt" href="editform.php?id=<?php echo $brugerid."&bartype=".$bartype;?>" rel="facebox">Rediger</a>
            </li>

    <?php if ($bartype =='vip'){?>

            <li>
                <a class="print-opt" href="print.php?id=<?php echo $brugerid;?>" rel="facebox">Print</a>
            </li>

    <?php }else{
         // Dont render vip link
    }}?>
            </ul>
            <p class="contact-data">
                <?php echo $email;?><br>
                Tlf.: <?php echo $tlf;?>
            </p>
            <div class="base-data">
                <h4><?php echo ucwords($fornavn)." ".ucwords($efternavn);?></h4>
                <p>Fødselsdag <?php echo $fodselsdag;?></p>
                <address><?php echo ucwords($adresse) ." ". $postnr ." ". ucwords($city);?></address>
            </div>
    </div><!-- end customer -->

        </div>
    </span>
<?php 
```

我主要在一个循环中使用这个函数，以显示我的 MySQL 数据库中的所有用户，这些用户与其他东西有特定的关系。

这一切都很好。但目前它会立即提取所有结果。现在我只有 5 个成员，所以没问题，但是如果我有 800 或 2000 个成员，那么用户列表会很长。

所以我想对它显示的用户数实施某种限制，但仍然能够浏览所有用户。许多网站使用类似页面的东西并以这种方式分割结果。链接如：

```
[1] [2] [3] [Last page>>] 
```

我不知道如何开始这样做？我将如何进行？

还研究了这个 Jquery 插件： [http ://andersonferminiano.com/jqueryscrollpagination/](http://andersonferminiano.com/jqueryscrollpagination/)

但它不断重新加载我的 PHP 文件，导致循环重新启动，它只是无休止地一遍又一遍地显示结果。

有人可以帮我解释创建这个背后的逻辑吗？或者更好的是，指出我可以使用上面的 jquery 插件的方向 - 它只加载循环一次，并在我滚动时呈现结果。

任何帮助或指示将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:19:31.850

默认情况下，jquery 分页只会将给定的表分解为页面上的几个选项卡，即所有数据都被实际加载。有一些可以让您执行 AJAX 请求来获取下一页，与您的 PHP 代码一起工作。

理想情况下，您希望使用 LIMIT（结果对象中的行数）和 OFFSET（从行 X 开始）来限制查询，这将为您提供从偏移行开始直到限制的记录数，然后在PHP端确定最大页数。

```
 $page = $_POST["page"] * 25; // make sure that page 0 is the starting page or calculate 
  $SQL =  "SomeQueryText LIMIT 25 OFFSET '$page'" ;
  $result = query ($SQL); 
```

# jquery - 我正在尝试编写一个实用程序来在画布上绘制两个图像并希望保存为一个图像对象

> ID：12179918
> 
> 赞同：2
> 
> 时间：2012-08-29T14:10:52.917
> 
> 标签：jquery, html, canvas

我有两个具有不同 src url 的 html img 对象。我想组合这两张图片（使用画布），并创建一个合并的 img 对象。我想让用户从他的位置选择一个图像，第二个图像将是徽标，用户可以更改徽标的位置，当单击发布按钮时，会生成一个图像对象并能够保存在数据库中。我在编写此 javascript 对象类型不匹配时遇到一个错误，我不知道问题出在哪里...

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

    </head>
    <body>
    <form name="drawImage" id="drawImage">
    <input type="file" id="filename" name="filename" value="hello" />
    <canvas id="mycanvas" width="400" height="400"></canvas>
    <input type="button" id="mybtn" name="mybtn" value="hello" />
    </form>
    <script>
    $(function(){
        var canvas,ctx,img1,img2;
        var imagesLoaded = 0;
        function main() {
            imagesLoaded += 1;
            var canvas = document.getElementById("mycanvas");
            var ctx = canvas.getContext("2d");
            if(imagesLoaded == 2) {
                // composite now
                console.log(img1);
                ctx.drawImage(img1, 0, 0);
                //ctx.globalAlpha = 1;
                ctx.drawImage(img2, 0,100);
            }
        }
        function loadImage(src, onload) {
            // http://www.thefutureoftheweb.com/blog/image-onload-isnt-being-called
            var img = new Image();
            img.onload = onload;
            img.src = src;
            return img;
        }
        function drawImages(){
            var img1 = loadImage('http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png', main);
            var img2 = loadImage('http://blog.carazoo.com/wp-content/uploads/2010/11/skoda_logo-300x300.jpg', main);
        }

        $("#mybtn").click(function(){
            //var getImageInput=$("#filename").val();
            //var img1 = loadImage(getImageInput, main);
            //var img2 = loadImage('play-button.png', main);
            drawImages();   
        });
    });
    </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:20:59.757

问题是`img1`and`img2`是在内部本地重新声明`drawImages()`的，因此作用域内的`img1`and`img2`变量`main()`指向未定义`img1`的`img2`全局作用域。`canvas`和也是如此`ctx`，尽管这不会引起任何问题，因为它们只在内部使用`main()`。

简而言之，您可以通过移除`var`内部来“修复”这个问题`drawImages()`：

```
 function drawImages(){
        img1 = loadImage('http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png', main);
        img2 = loadImage('http://blog.carazoo.com/wp-content/uploads/2010/11/skoda_logo-300x300.jpg', main);
    } 
```

此外，您可以从全局范围中删除`canvas`and `ctx`，因为它们仅在内部使用`main()`。

```
 var img1, img2;
    var imagesLoaded = 0;

    function main() {
        imagesLoaded += 1;
        var canvas = document.getElementById("mycanvas");
        var ctx = canvas.getContext("2d");
        // ...
    } 
```

但是，您可能希望对代码进行更彻底的重写并正确限定变量的范围。您想先加载这两个图像，然后在画布上渲染它们。这是两个截然不同的问题，最好将处理它们的代码分开。

# excel - 旋转按钮最小值 001？

> ID：12179923
> 
> 赞同：2
> 
> 时间：2012-08-29T14:11:07.637
> 
> 标签：excel, vba

我需要枚举从 001 到 999 的一些项目
也许，如果我可以像这样设置一个 spinButton

```
spin1.Min = 001
spin1.Max = 999 
```

但是 Excel 不接受这样的最小值？
请问我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:15:20.243

您可以将 min/max 设置为 1/999 整数，然后将值作为文本处理

如果 [A1] = 1 那么在 Excel 中

`=TEXT(A1,"000")`

或在 VBA 中使用

`Format(val, "000")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:15:26.213

您是否尝试过使用 1 而不是 001？通常 001 被认为是字符串而不是数值。

# java - 如何使用正则表达式在 url 中授权 com/net/etc？

> ID：12179924
> 
> 赞同：0
> 
> 时间：2012-08-29T14:11:07.363
> 
> 标签：java, regex

我有下面的正则表达式。我如何授权 .com/net/etc？

```
String regex = "^(((https?|ftp)://|(www|ftp)\\.)[a-z0-9-]+(\\.[a-z0-9-]+)+([/?].*)?)|(http://)$"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:14:50.693

我建议您不要为此使用正则表达式。

我建议您使用`URL`类（或`URI`更合适的类）解析 URL，然后检查主机名部分是否以所需的顶级域之一结尾。

我还建议您避免将一组顶级域硬连接到您的代码和/或正则表达式中。

*   一大批新的顶级域名将很快上线。像*成千上万*的人一样...

*   即使忽略新的 TLD，这组 2 个字母的国家 TLD 也不是固定的。（南苏丹有代码吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:18:30.007

这个正则表达式应该这样做：

```
[.](com|net|other) 
```

但是将它放在你的大 url 正则表达式中的正确位置（这可能不是最好的方法......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:15:07.530

验证 URL 协议后，您可以使用 ^[a-zA-Z0-9-.]+.(com|org|net|mil|edu|COM|ORG|NET)$

# c# - 为什么有一个“包”文件夹以及如何使其工作？

> ID：12179925
> 
> 赞同：5
> 
> 时间：2012-08-29T14:11:09.627
> 
> 标签：c#, web, nuget

我在 VS2010 中有一个网站项目。文件夹结构如下：

```
../packages
../Website
../Website.DataAccess
etc. 
```

我正在尝试通过在 VS2010/Open Website 中打开根文件夹来打开网站。但是当我这样做时，它似乎丢失了所有引用，例如 System.Web.Helper、System.Web.Mvc 等。错误消息如下：

> 无法加载文件或程序集“System.Web.Helpers，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

继续出现。

那么为什么还有这个文件夹“packages”呢？它应该自动让我打开网站项目而不用担心所有的引用/程序集吗？

我应该做些什么来让网站看到“包”文件夹并使用它，这样我就可以建立这个网站了吗？

**编辑 1：** 此外，当尝试从 nuget 控制台安装新软件包时：`install-package system.web.helpers`

我收到错误消息：`The current environment doesn't have a solution open.`

由于这是一个网站，我没有解决方案文件。无论如何，对我来说似乎有点奇怪，需要那个解决方案文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:12:07.800

您可能正在谈论[NuGet](http://nuget.codeplex.com/)包文件夹，该文件夹用于存储您从 NuGet 包管理器安装的包的链接。

![在此处输入图像描述](../Images/00560c1aafee8ee0a6e57e08b20abd86.png)

转到[nuget.codeplex.com](http://nuget.codeplex.com/)并单击此按钮：

![在此处输入图像描述](../Images/225a38ca2dd7f59eaaa0b0fbbfa3a398.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T14:13:50.997

您需要先安装[`NuGet`](http://nuget.codeplex.com/)Visual Studio 扩展。`Tools -> Extension Manager`您可以通过在线搜索并在 Visual Studio 中直接获取它`NuGet`- 然后安装它。

安装好之后，就可以通过它来管理包了——右键里面的项目节点`Solution Explorer`，选择`Manage NuGet Packages...`获取UI。

查看有关[如何让 NuGet 安装/更新 packages.config 中的所有包的答案？](https://stackoverflow.com/q/6876732/1583)详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:20:18.277

你不需要“让它工作”。如果没有 NuGet，您将无法正确编辑它，但它应该包含构建项目所需的二进制文件，即使没有安装 NuGet。

# c++ - 在 C++ 中加密并在 Python 中解密

> ID：12179929
> 
> 赞同：3
> 
> 时间：2012-08-29T14:11:27.387
> 
> 标签：c++, python, aes, rsa, des

您知道哪些库可用于在 C/C++ 中加密并在 python 中为 RSA/AES/DES 算法解密？

我们将使用其中一种算法来加密 URL 中的一些参数。

我们已经在 C++ 中尝试了一些库：

*   加密++
*   [http://code.google.com/p/rsa/](http://code.google.com/p/rsa/)

在python中

*   pycryptopp
*   Python-RSA

但不幸的是，我没有设法匹配这些库使用的参数/键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:27:48.217

为什么不在每种语言中都使用 OpenSSL 包装器？这是一种非常标准化的加密方法，并且有许多库可以轻松编写代码本身。

[http://www.openssl.org/](http://www.openssl.org/)

[https://launchpad.net/pyopenssl](https://launchpad.net/pyopenssl)

[http://www.boost.org/doc/libs/1_49_0/boost/asio/ssl/detail/openssl_init.hpp](http://www.boost.org/doc/libs/1_49_0/boost/asio/ssl/detail/openssl_init.hpp)

这将允许两种语言与您可能需要的任何其他系统之间的最大兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:23:07.707

看看[keyczar](http://www.keyczar.org/)，一个来自 Google 的加密工具包。它易于使用，它不仅仅是一组加密/解密功能；它具有其他功能（例如密钥管理）。它不依赖于单一的加密算法，因为开发人员可以选择使用哪一种。

这里有很好的文档：[http ://code.google.com/p/keyczar/w/list](http://code.google.com/p/keyczar/w/list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:21:35.977

我使用 pycrypto [http://pypi.python.org/pypi/pycrypto/2.6](http://pypi.python.org/pypi/pycrypto/2.6)

pycryptopp 只是 Crypto++ 的包装器，这意味着您可能在 Crypto 、 Python 或两者中都做错了。

如果您只是在 Web 内容的 URL 中使用有效负载，我编写了这个库来处理所有这些废话

[https://github.com/jvanasco/insecure_but_secure_enough/blob/master/insecure_but_secure_enough/__init__.py](https://github.com/jvanasco/insecure_but_secure_enough/blob/master/insecure_but_secure_enough/) _

# php - 将 Youtube 链接添加到 php 循环上的滑块

> ID：12179930
> 
> 赞同：2
> 
> 时间：2012-08-29T14:11:32.770
> 
> 标签：php, html

我在网站上有一个滑块。滑块称为任何滑块。

您可以在下面的链接中查看它：

[http://css-tricks.com/examples/AnythingSlider/#&panel1-1](http://css-tricks.com/examples/AnythingSlider/#&panel1-1)

滑块允许嵌入 youtube 视频。

但是，目前我有一个 php 外观，它正在遍历一个目录以显示上传到该目录的任何横幅图像。

我不确定如何将 youtube 链接添加为滑块之一，但仍保持循环通过目录。

这是我正在使用的代码：

```
<ul id="slider">

<?php
if ($handle = opendir('public/slider/'))
{
    while (false !== ($file = readdir($handle)))
    {
        $files[] = $file;
    }

    $files = array_slice($files, 2);

    foreach ($files as $file)
    {
        $name = explode('.', $file);
        print '<li><img src="public/slider/'.$file.'" title="'.$name[0].'" /></li>';
    }
    closedir($handle);
}
?> 
```

关于如何做到这一点的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:24:01.657

尝试这个：

```
<?php

//will hold anything that you want displayed
$content = array(
    array('type' => 'yt', 'content' => 'http://www.youtube.com/watch?v=nn2FB1P_Mn8'),
    array('type' => 'yt', 'content' => 'http://www.youtube.com/watch?v=8mwKq7_JlS8')
);

if ($handle = opendir('public/slider/'))
{
    while (false !== ($file = readdir($handle)))
    {
        $content[] = array('type' => 'img', 'content' => $file);
    }

    closedir($handle);
}

    //$content = array_slice($content, 2);

    foreach ($content as $liItem)
    {
        switch($liItem['type']){
            case 'img':
                $name = explode('.', $liItem['content']);
                print '<li><img src="public/slider/'.$liItem['content'].'" title="'.$name[0].'" /></li>';
                break;
            case 'yt':
                if (preg_match('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $liItem['content'], $match)) {
                    echo '<li><iframe width="420" height="315" src="http://www.youtube.com/embed/'.$match[1].'" frameborder="0" allowfullscreen></iframe></li>';
                }
                break;
        }

    }

?> 
```

# .net - 通过 SSIS 目录托管对象模型以编程方式验证 SSIS 2012 包

> ID：12179934
> 
> 赞同：5
> 
> 时间：2012-08-29T14:12:02.007
> 
> 标签：.net, sql-server, ssis, sql-server-2012

我想通过`Microsoft.SqlServer.Management.IntegrationServices`命名空间中的对象验证并执行存储在 SSIS 目录（项目部署模型）中的 SSIS 包。当我从[PackageInfo类执行](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.integrationservices.packageinfo.aspx)[Validate](http://msdn.microsoft.com/en-us/library/ff930482.aspx)方法时，它只运行验证，但不等到它结束。在[一个示例](http://blogs.msdn.com/b/mattm/archive/2011/07/26/overview-of-the-ssis-mom.aspx)中，我发现作者在“即发即弃”模式下触发验证 - 为什么在我们不关心结果时触发它？在[另一种](http://blogs.msdn.com/b/mattm/archive/2011/11/17/ssis-and-powershell-in-sql-server-2012.aspx)情况下，执行在没有事先验证的情况下被触发。

1.  我应该在每次执行之前验证包吗？
2.  如果是这样，如何在同步模式下做到这一点？
3.  我也对[ValidationOperation](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.integrationservices.validationoperation.aspx) Status 属性感到好奇。它是包装[`catalog.validations status`](http://msdn.microsoft.com/en-us/library/ff878143.aspx)列，除其他外，可以具有值`succeeded (7)`和`completed (9)`-它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:12:02.007

广告 2：我能够循环等待验证结果：

```
var validationId = package.Validate(false, PackageInfo.ReferenceUsage.UseAllReferences, null);
ValidationOperation validation = package.Parent.Parent.Parent.Validations[validationId];
do
{
    Thread.Sleep(1000);
    validation.Refresh();
}
while (!validation.Completed); 
```

# android - 自定义相机不适用于摩托罗拉设备

> ID：12179936
> 
> 赞同：0
> 
> 时间：2012-08-29T14:12:05.990
> 
> 标签：android

我只是在android中制作了一个应用程序，我在其中使用了自定义相机。整个应用程序在所有版本的三星设备中都可以正常工作。但是自定义相机在摩托罗拉设备中无法正常工作。谁能帮我解决这个问题问题？？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:15:01.007

将此添加到您的清单文件中

```
<uses-feature android:name="android.hardware.camera" /> 
```

摩托罗拉特别遇到过问题

希望对你有帮助

# css - 如何在 HTML 中使文本反向？

> ID：12179941
> 
> 赞同：27
> 
> 时间：2012-08-29T14:12:16.343
> 
> 标签：css

我正在开发一个以愚蠢的打油诗为特色的创意网站。我想以交替的方向显示打油诗的每一行。也就是说，我想要它的[boustophedon 形式](http://en.wikipedia.org/wiki/Boustrophedon)。我想知道这是否可能仅使用 HTML。

例如，我希望能够编写如下所示的标记：

```
<p>
  <forward>There once was a young lady with pride,<br>
  <backward>who ate fourteen green apples and died.<br>
  <forward>Within the lamented,<br>
  <backward>the apple fermented<br>
  <forward>and made cider inside her insides.
</p> 
```

会显示这样的东西

> 曾经有一位自豪的年轻女士，
> .deid dna selppa neerg neetruof eta ohw
> 在感叹的
> detnemref elppa eht
> 中，她在她的内心深处制作了苹果酒。

对于此示例，我只是手动将文本倒写，但我不想继续这样做，因为这是一个非常乏味的过程。如果我可以在纯 HTML 中执行此操作，而无需编写任何脚本来动态操作文本，那就太好了。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-29T14:16:42.397

是的，这可以使用两个 Unicode 控制字符的组合来实现。即，

*   '从右到左覆盖' (U+202E)
*   '从左到右覆盖' (U+202D)

每个覆盖字符都使其后面的文本沿相应的方向流动。

这些可以插入到带有 HTML 实体的文档中`&#x202E;`和`&#x202D;`，或十进制等效项 ，`&#8238;`和`&#8237;`。

这使您可以编写示例：

```
<p>
  There once was a young lady with pride,<br>
  &#x202e;who ate fourteen green apples and died.<br>
  &#x202d;Within the lamented,<br>
  &#x202e;the apple fermented<br>
  &#x202d;and made cider inside her insides.
</p> 
```

我现在发布此 HTML，以便您查看它的显示方式。您可以通过选择部分文本来观察实际的方向变化。

> 从前有一个骄傲的小姐，
> 吃了十四个青苹果，一百二十三粒，死了。
> 在哀叹中，苹果 在她的内脏
> 发酵并制成苹果酒。

如果你想要一个*真正*的boustrephedon，其中字母形式也是向后的，并且如果你不介意使用 CSS3 功能，那么你可以使用 CSS3 转换：

```
backward {
  display: inline-block;
  -moz-transform: scale(-1, 1);
  -webkit-transform: scale(-1, 1);
  transform: scale(-1, 1);
}
```

```
<p>
  There once was a lady with pride,<br>
  <backward>who ate fourteen green apples and died.</backward><br> Within the lamented,<br>
  <backward>the apple fermented</backward><br> and made cider inside her insides.
</p>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-29T14:16:56.073

试试这个。

```
span {
  direction: rtl;
  unicode-bidi: bidi-override;
}
```

```
<span>who ate fourteen green apples and died.</span>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-16T09:20:10.187

您可以像这样使用**[bdo](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/bdo)**标签：

```
bdo[dir='rtl'] {
  color: red;
}
```

```
There once was a lady with pride,<br>
<bdo dir='rtl'>who ate fourteen green apples and died.</bdo><br> 
Within the lamented,<br>
<bdo dir='rtl'>the apple fermented</bdo><br> 
and made cider inside her insides.
```

# sql - SQL Server：当前命令出现严重错误。结果，如果有的话，应该被丢弃

> ID：12179942
> 
> 赞同：0
> 
> 时间：2012-08-29T14:12:20.357
> 
> 标签：sql, tsql, stored-procedures

尝试执行我的 SQL Server 存储过程时出现此错误：当前命令发生严重错误。结果，如果有的话，应该丢弃。

这是打破的部分。任何想法为什么？谢谢！

```
IF  @Supervisor = 1 
AND @Calc = 1
    BEGIN
        INSERT INTO @Employees
        SELECT [Employee_No]
        FROM 
            dbo.fx_DetermineEmployeesBase
            (
                @Employee_ID
              , NULL
              , @Employee_ID
              , 2
            )

    ;WITH Applications AS
    (
         SELECT TOP 25
            ROW_NUMBER() OVER (ORDER BY vw.[Fullname] ASC, vw.[Submission_Date] DESC) AS [Row]
          , ((ROW_NUMBER() OVER (ORDER BY vw.[Fullname] ASC, vw.[Submission_Date] DESC) - 1) / @Page_Size) + 1 AS [Page_Number]
          , vw.[Employee_No]
          , CASE 
                WHEN fx.[New_Balance] > vw.[Balance] THEN vw.[Balance]
                ELSE fx.[New_Balance]
            END AS [Predicted_Balance]
        FROM vw_Employee_Leave_Application vw
            FULL OUTER JOIN @Employees e ON
                vw.[Employee_No] = e.[Employee_No]
            --This causes the error:
            --A severe error occurred on the current command.  The results, if any, should be discarded.
            CROSS APPLY dbo.fx_Employee_Leave_Type_Balance_Predict_LastRow
                (
                    NULL 
                  , COALESCE
                    (
                        CASE
                            WHEN vw.[Start_Date] <= 
                                (
                                    SELECT TOP 1 [End_Date]
                                    FROM vw_Employee_Leave_Planner
                                    WHERE
                                        [Employee_No] = vw.[Employee_No]
                                    AND [Leave_Type_No] = vw.[Leave_Type_No]
                                    AND 
                                    [Accepted] = 1
                                    AND [End_Date] > GETDATE()
                                    ORDER BY [End_Date] DESC
                                )
                            THEN
                                (
                                    SELECT TOP 1 [End_Date]
                                    FROM vw_Employee_Leave_Planner
                                    WHERE
                                        [Employee_No] = vw.[Employee_No]
                                    AND [Leave_Type_No] = vw.[Leave_Type_No]
                                    AND [Accepted] = 1
                                    AND [End_Date] > GETDATE()
                                    ORDER BY [End_Date] DESC
                                )
                            ELSE vw.[Start_Date]
                        END
                      , GETDATE()
                    )
                  , vw.[Employee_No]
                  , vw.[Leave_Type_No]
                ) fx
        WHERE
            (
                vw.[Employee_No] = e.[Employee_No]
            AND vw.Approver_No IS NULL
            )
        OR  vw.[Approver_No] =  @Approver_ID
    ),
    PageSettings AS
    (
        SELECT TOP 1
            [Row] AS [Item_Count]
          , [Page_Number] AS [Page_Count]
        FROM Applications
        ORDER BY [Row] DESC
    )

    SELECT
        [Row] AS [Row_Number]
      , [Page_Number]
      , @Page_Size AS [Page_Size]
      , [Item_Count]
      , [Page_Count]
    FROM Applications, PageSettings
    WHERE
        [Page_Number] = @Page_No
    OR  @Page_No IS NULL  
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:56:09.777

Restore an older backup of the database and try again, it solves mine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:29:53.867

据我在谷歌上看到的，这可能是：

[链接](http://blog.sqlauthority.com/2008/02/19/sql-server-2005-fix-error-message-when-you-run-a-query-against-a-table-that-does-not-have-a-clustered-index-in-sql-server-2005-a-severe-error-occurred-on-the-current-command/)：

> 在 SQL Server 2005 中测试索引时，我创建了一个仅包含一个非聚集索引的表。我没有在表上创建任何聚集索引。之后我运行 SELECT 语句，它给了我以下错误。当我看到错误时，我感到非常惊讶。它说 Msg 0，这意味着这个错误对于 Microsoft 来说不是已知的错误，它可能是错误。
> 
> 消息 0，级别 11，状态 0，行 0 当前命令发生严重错误。结果，如果有的话，应该丢弃。Msg 0, Level 20, State 0, Line 0 当前命令发生严重错误。结果，如果有的话，应该丢弃。
> 
> 我确实搜索了错误，发现它肯定是错误，并且有 SQL Server 2005 Service Pack 2 的累积更新包 6，它修复了这个问题。您可以从此处下载 SQL Server 2005 Service Pack 2 的累积更新包 6。
> 
> 若要解决此问题，请向 Microsoft 在线客户服务提交请求以获取累积更新包。要提交获取累积更新包的联机请求，请访问以下 Microsoft 网站： http: [//go.microsoft.com/ ?linkid=6294451](http://go.microsoft.com/?linkid=6294451)

[另一个下载链接](http://support.microsoft.com/kb/910416)

# javascript - 访问范围外的本地函数

> ID：12179944
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:12:22.120
> 
> 标签：javascript, jquery

如何在 $(document).ready 事件范围之外访问声明的函数？换句话说，如何将本地函数更改为全局函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:14:23.737

为什么不在范围之外声明变量并在文档就绪方法中分配它。那么您将能够在文档就绪范围之外访问它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:16:07.873

您可以将函数添加到文档`ready`处理程序中的窗口对象：

```
$(document).ready(function(){
     window.YourFunc = function (){
     // Do something.
     };
}); 
```

然后随时调用它：

```
window.YourFunc(); 
```

但最好的方法是在处理程序之外定义你的`ready`函数。

# c# - 在接口中传递方法

> ID：12179946
> 
> 赞同：1
> 
> 时间：2012-08-29T14:12:24.440
> 
> 标签：c#, .net, wpf, events

我有以下界面：

```
public interface IModuleTile
{
    void AddEvent(/*Type here*/ methodToAdd);
    void RemoveEvent(/*Type here*/ methodToRemove);
} 
```

我想这样做：

```
public partial class TestControl : UserControl, IModuleTile
{
    public TestControl()
    {
        InitializeComponent();
    }

    public void AddEvent(/*Type here*/ eventToAdd)
    {
        ShowModule.Click += methodToAdd;
    }

    public void RemoveEvent(/*Type here*/ methodToRemove);
    {
        ShowModule.Click += methodToRemove;
    }
} 
```

我必须将什么设置为传递方法的接口类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:24:52.903

我在这里要做的只是将一个事件直接放入接口中，而不是显式添加添加/删除方法。

```
public interface IModuleTile
{ 
    //change `EventHandler` to match whatever the event handler type 
    //is for the event that you're "wrapping", if needed
    event EventHandler MyClick;
} 
```

然后实现可以是这样的：

```
public partial class TestControl : UserControl, IModuleTile
{
    //You'll need to change `EventHandler` here too, if you changed it above
    public event EventHandler MyClick
    {
        add
        {
            ShowModule.Click += value;
        }
        remove
        {
            ShowModule.Click -= value;
        }
    }
} 
```

# google-maps - 使用 API 在谷歌地图上绘制多个点

> ID：12179948
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:12:45.857
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用 API 在谷歌地图上的任何路线上显示不同的点。我想传递开始、停止和结束的位置。这是否可以使用 javascript API 或者我需要查看其他选项，例如地理位置？

我正在使用以下代码来实现这一点：

```
function initialize() {
var mapOptions = {
    zoom: 10,
    center: new google.maps.(-64.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function loadScript() {
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "http://maps.googleapis.com/maps/api/js?key=52554&sensor=false&callback=initialize";
document.body.appendChild(script);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:57:02.423

这是我的代码。

```
`<script type="text/javascript">
    var geocoder = null;
    var arr = new Array();
    var arr1 = new Array();
    var arr2 = new Array();
    var map = null;
    var chr;
    var baseIcon = null;

    function initialize() {
        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById("map_canvas"));
            map.setCenter(new GLatLng('<%=Request["Lat"]%>', '<%=Request["Long"]%>'), 13);
            map.addControl(new GSmallMapControl());
            map.addControl(new GMapTypeControl());

            // Create a base icon for all of our markers that specifies the
            // shadow, icon dimensions, etc.
            baseIcon = new GIcon();
            //        baseIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
            baseIcon.iconSize = new GSize(25, 30);
            baseIcon.shadowSize = new GSize(37, 34);
            baseIcon.iconAnchor = new GPoint(9, 34);
            baseIcon.infoWindowAnchor = new GPoint(9, 2);
            baseIcon.infoShadowAnchor = new GPoint(18, 25);

            // Creates a marker whose info window displays the letter corresponding to the given index.

            function createMarker(point, index) {
                // Create a lettered icon for this point using our icon class
                var letter = String.fromCharCode("A".charCodeAt(0) + index);
                var letteredIcon = new GIcon(baseIcon);
                letteredIcon.image = "markers/marker" + index + ".png";

                // Set up our GMarkerOptions object
                markerOptions = { icon: letteredIcon };
                var marker = new GMarker(point, markerOptions);

                GEvent.addListener(marker, "click", function () {
                    marker.openInfoWindowHtml("<table><tr><td><img src=markers/marker" + index + ".png length=25 width=25 /></td>" + "<td>" + arr2[index] + "</td></tr></table>");
                });
                return marker;
            }

            for (var i = 0; i < arr.length; i++) {
                var latlng = new GLatLng(arr[i], arr1[i]);
                map.addOverlay(createMarker(latlng, i));                    
            }
        }

    } 
```

`

# android - Android：ListView 和 TabWidget：ListView 越过 TabWidget

> ID：12179949
> 
> 赞同：1
> 
> 时间：2012-08-29T14:12:46.863
> 
> 标签：android, android-listview, android-xml, tabwidget, android-tabs

我在我的 android 项目中使用 TabWidget，并且视图中有一个 listView 和一个 FrameLayout。问题是当 ListView 高于屏幕高度时，选项卡是不可见的，因为列表视图越过了选项卡。

我不知道如何在选项卡上方设置 listView。

这是我的看法：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

    <FrameLayout
        android:id="@+id/frameLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#ffffff"
        android:minHeight="44dp" >

    </FrameLayout>

    <ListView
        android:id="@+id/NewsCategorieslistView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000" 
        android:layout_below="@+id/frameLayout"
        >

    </ListView>

</RelativeLayout> 
```

这是我的标签视图：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:divider="@null" >

    </TabWidget>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        >
    </FrameLayout>
</RelativeLayout>
</TabHost> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T22:19:30.927

我找到了解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <FrameLayout android:id="@android:id/tabcontent"
             android:layout_width="fill_parent" 
             android:layout_height="fill_parent"
             android:layout_alignParentTop="true" 
             android:layout_above="@android:id/tabs" />

        <TabWidget android:id="@android:id/tabs"
             android:layout_width="fill_parent" 
             android:layout_height="wrap_content"
             android:layout_alignParentBottom="true" />

    </RelativeLayout>

</TabHost> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:27:34.643

**为您的tab.xml**尝试此操作（选项卡活动的布局）

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

# jquery - 仅当用户屏幕分辨率高于 X 时，我如何运行一些 JQ 代码？

> ID：12179955
> 
> 赞同：3
> 
> 时间：2012-08-29T14:13:01.697
> 
> 标签：jquery, responsive-design

仅当用户屏幕分辨率高于/低于 X 时，我如何运行一些 JQ 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:16:03.583

你可以用纯 JS 做到这一点：

```
if(screen.width>=1024)
{
   myFunction();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:15:43.223

好吧，我建议不要使用屏幕分辨率，因为不是每个人都会最大化他们的窗口（更不用说全屏了）。检查**窗口**宽度/高度，并执行相应的操作：

```
var winW = $(window).width(),
    winH = $(window).height();

if ( winW > X && winH > Y) { 
    waWaWeeWah(); // do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:18:24.623

使用窗口事件监听器，例如：

```
$(window).resize(function() {
    if( $(window).width() < yourThreshold ){

        // do your business

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:55:31.560

我试图获得一些反馈的这个建议怎么样，它将 js 与媒体查询联系起来：[https ://stackoverflow.com/questions/12203220/suggestion-for-responsive-design-jquery-and-mobile-sites](https://stackoverflow.com/questions/12203220/suggestion-for-responsive-design-jquery-and-mobile-sites)

# asp.net - 从中继器中删除行

> ID：12179957
> 
> 赞同：0
> 
> 时间：2012-08-29T14:13:04.517
> 
> 标签：asp.net, .net, sqldatasource

我的页面上有以下中继器：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1" 
        onitemcommand="Repeater1_ItemCommand">
        <ItemTemplate>
            <div id="fullcommentheader">
                <span class="fullname">
                    <asp:Literal ID="Literal3" runat="server" Text='<%# Eval("Name") %>'></asp:Literal></span>
                <br />
                <span class="fullbodytext">
                    <asp:Button ID="Button2" runat="server" CommandName="Delete" CommandArgument='<%# Eval("Id") %>' Text="Delete" />
                    <asp:Literal ID="LitBody2" Text='<%# Eval("Message")%>' runat="server"></asp:Literal></span>
                <span class="dateTime">
                    <asp:Literal ID="Literal4" runat="server" Text='<%# Eval("CreateDateTime") %>'></asp:Literal></span>
            </div>
            <br />
        </ItemTemplate>
    </asp:Repeater> 
```

我有一个**Button2**，我想用它来删除转发器条目，我如何查询数据库来实现这一点？我习惯在gridview上默认使用这些命令，所以我不确定如何手动执行此操作。

我的活动：

```
protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "Delete" && e.CommandArgument.ToString() != "")
        {

        }
    } 
```

这是我的 SqlDataSource：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:orangefreshConnectionString1 %>"
        DeleteCommand="DELETE FROM [Comment] WHERE [Id] = @Id" 
        InsertCommand="INSERT INTO [Comment] ([Name], [Email], [Website], [Message], [PostId]) VALUES (@Name, @Email, @Website, @Message, @PostId)"
        SelectCommand="SELECT [Name], [Email], [Website], [Message], [PostId], [Id], [CreateDateTime] FROM [Comment] WHERE ([PostId] = @PostId)"
        UpdateCommand="UPDATE [Comment] SET [Name] = @Name, [Email] = @Email, [Website] = @Website, [Message] = @Message, [PostId] = @PostId, [CreateDateTime] = @CreateDateTime WHERE [Id] = @Id">
        <DeleteParameters>
            <asp:Parameter Name="Id" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="Website" Type="String" />
            <asp:Parameter Name="Message" Type="String" />
            <asp:QueryStringParameter Name="PostId" QueryStringField="Id" Type="Int32" />
            <asp:Parameter Name="CreateDateTime" Type="DateTime" />
        </InsertParameters>
        <SelectParameters>
            <asp:QueryStringParameter Name="PostId" QueryStringField="Id" Type="Int32" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="Website" Type="String" />
            <asp:Parameter Name="Message" Type="String" />
            <asp:Parameter Name="PostId" Type="Int32" />
            <asp:Parameter Name="CreateDateTime" Type="DateTime" />
            <asp:Parameter Name="Id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:45:53.143

您需要先声明一个私有 int _id 全局变量。

然后，在您的 sqldatasource 删除事件中动态添加参数：

然后在您的 ItemCommand 'delete' 中，将全局 _id 设置为 CommandArgument，因为您将其传入。然后执行 SqlDataSource1.Delete()

```
_id = Convert.ToInt32(e.CommandArgument);
SqlDataSource1.Delete();
_id = 0;
//need to rebind your repeater here or you won't see the changes

protected void SqlDataSource1_Deleting(object sender, SqlDataSourceCommandEventArgs e)
{
  //add the parameter
  if (_id != 0)
    e.Command.Parameters["@Id"].Value = _id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:16:40.210

将[ItemCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)事件用于中继器。这将在单击按钮时触发，并允许您访问命令名称和命令参数。然后，您可以使用命令参数从数据库中删除记录。

删除记录，您可以使用[SqlDataSource.Delete()](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.delete.aspx)方法，但您需要在调用该方法之前填充删除参数或处理删除事件并在那里填充参数。

# c# - WPF GUI 无响应更新 ListView

> ID：12179963
> 
> 赞同：0
> 
> 时间：2012-08-29T14:13:16.467
> 
> 标签：c#, wpf, performance, user-interface

更新：看起来数据模板中的两行是减慢速度的原因。如果我只注释掉这两行，即

```
<Image Source="{Binding IconSelect}" Width="20" Height="20" /> 
```

和

```
<Image Source="{Binding IconBaseAcctFlag}" Width="20" Height="20" /> 
```

它工作正常。知道为什么在将列表呈现到列表视图时让这些图像在数据模板中冻结 GUI 吗？

我有一个包含两个面板的表单。左侧是树视图，当您单击一行时，它会检索该实体的相应数据并在右侧构建一个摘要窗格，由列表视图表示。

我在后台线程上获取和处理数据，然后在最终调用中使用 Application.Current.Dispatcher.Invoke() 将 ListView 的 ItemsSource 属性设置为我建立的集合。我原以为这会保持一个响应速度非常快的 GUI，但在更新 ItemsSource 属性时，GUI 会在这发生时冻结大约 1.5 秒，我不确定为什么要花这么长时间。

我还尝试在开始时绑定一个空的 ObservableCollection，然后在每次添加到集合时调用调度程序。这使它的响应速度更快，但是面板逐行加载，但仍然不是我想要的性能，而且代码最终会因为调度程序调用而变得非常混乱。

谁能建议这里可能是什么问题？当然，您可以将包含大约 12-20 个条目的通用集合绑定到列表视图并让它几乎立即更新？

```
public void DisplayAcctSummary(RbcUIAccount selAcct)
{
    if (selAcct == null)
    {
        ClearBaseAcctTransSummary();
        return;
    }

    InvokeUpdate(() => gbBaseDetails.Header = "Account Details");
    InvokeUpdate(() => lvBaseAccountDetails.ItemsSource = null);

    SelBoolValueForSelectedQueue();

    var lstBaseAcctDetails = new ObservableCollection<RbcUIBaseAcctDetails>();

    if (selCustSummary != null)
    {
        var offsetAllowed = IsOffselAllowed(selAcct.Branch);
        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Account No:", selAcct.AccountId));
        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Account Name:", selAcct.AcctDesc));
        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Account Type:", ((RbcEnums.AccountType)selAcct.AccountType).ToString()));

        if (selAcct.Branch != string.Empty)
        {
            var rbcBranch = RbcStaticData.GetBranchbyID(selAcct.Branch.Trim());
            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Branch:", rbcBranch.BranchName));
        }

        if (!IsInCURView && !IsInCURPendingView)
        {
            var serviceLayer = new RbcServiceLayer();
            var account = serviceLayer.GetAccountById(selAcct.AccountId, UserSession.SecurityContext);

            if (account != null)
            {
                if (account.BaseId != string.Empty)
                {
                    lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Current Balance:", selAcct.CurrentBalance, false, selAcct.DisplayUSDRate));

                    if (!offsetAllowed || (IsInCCMPView) || (IsInCCMPPendingView))
                    {
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Balance:", selAcct.AvailableBalance, false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Funds:", selAcct.AvailableFunds, false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Base Sublimit:", rbcUtils.DisplayAmount(selAcct.BaseSublimit)));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Funds SL:", selAcct.AvailableFundsSL, false, selAcct.DisplayUSDRate));
                    }

                    if (!IsInCustomerEnquiryView && !offsetAllowed)
                    {
                        var excessToday = new RbcMoney();
                        var totAwtToday = SumTotalAwtForAccount(selAcct.AccountId);
                        var totAwtAllDates = SumTotalAwtAllDatesForAccount(selAcct.AccountId);

                        excessToday.Amount = totAwtToday.Amount - selAcct.AvailableFunds.Amount;
                        excessToday.Currency = totAwtToday.Currency;

                        if (excessToday.Amount < 0)
                            excessToday.Amount = 0;

                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Total Awaiting Today:", new RbcMoney(Math.Round(totAwtToday.Amount), totAwtToday.Currency), false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Total Excess Today:", new RbcMoney(Math.Round(excessToday.Amount), excessToday.Currency), false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Total Awaiting All Dates:", new RbcMoney(Math.Round(totAwtAllDates.Amount), totAwtAllDates.Currency), false, selAcct.DisplayUSDRate));

                        if (customer.Category != Convert.ToByte((CustCategory.Today)))
                        {
                            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Total Awaiting Future:", selAcct.TotalAwaitingToday, false, selAcct.DisplayUSDRate));
                            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Total Excess Future:", selAcct.TotalExcessToday, false, selAcct.DisplayUSDRate));
                        }
                    }
                }
                else
                {
                    lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Current Balance", selAcct.CurrentBalance, false, selAcct.DisplayUSDRate));

                    if (!offsetAllowed && account.BaseId != string.Empty)
                    {
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Balance:", selAcct.AvailableBalance, false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Funds:", selAcct.AvailableFunds, false, selAcct.DisplayUSDRate));
                        lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Available Funds SL:", selAcct.AvailableFundsSL, false, selAcct.DisplayUSDRate));
                    }
                }
            }

            if (IsInCCMPView || IsInCCMPPendingView)
            {
                lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails(AppString.CustomerSummary.EarmarkPaymentDate, "0", true, string.Empty));
            }
        }

        if (!IsInCURView && !IsInCustomerEnquiryView)
        {
            var txnCount = 0;
            double totAmount = 0;
            RbcUITransaction transaction;

            foreach (var t in selAcct.Transactions)
            {
                transaction = t;
                var amount = rbcUtils.GetAmountInCustomerCurency(transaction.Amount.Amount, transaction.Amount.Currency, customer.CustCurrencyId);
                totAmount += amount;
                txnCount++;
            }

            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("No of Txns:", txnCount.ToString()));
            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Value of Txns:", new RbcMoney(totAmount, customer.CustCurrencyId), false, true));
            lstBaseAcctDetails.Add(new RbcUIBaseAcctDetails("Last updated at:", selAcct.LastUpdatedAt.ToString("dd-MM-yyyy HH:mm") + " GMT"));
        }
    }

    InvokeUpdate(() => lvBaseAccountDetails.ItemsSource = lstBaseAcctDetails);
} 
```

更新：这是 ListView 的 XAML

```
<ListView x:Name="lvBaseAccountDetails" Margin="10,10,10,10" Background="#F4F8FB" ItemsSource="{Binding}" MouseDoubleClick="lvBaseAccountDetails_MouseDoubleClick" ItemContainerStyle="{StaticResource myHeaderStyleColor}">
                <ListView.View>
                    <GridView ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}">
                        <GridView.Columns>
                            <GridViewColumn Header=""  >
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate >
                                        <Grid>
                                            <Image Source="{Binding IconSelect}" Width="20" Height="20" />
                                        </Grid>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Width="200" Header="" DisplayMemberBinding="{Binding SubBaseAcctType}" >
                            </GridViewColumn>
                            <GridViewColumn Width="200" Header=""  DisplayMemberBinding="{Binding SubBaseAcctValue}">
                            </GridViewColumn>
                            <GridViewColumn Header=""  >
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate >
                                        <Grid>
                                            <Image Source="{Binding IconBaseAcctFlag}" Width="20" Height="20" />
                                        </Grid>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView.Columns>
                    </GridView>
                </ListView.View>
            </ListView> 
```

# google-app-engine - 是否有任何分析工具可以在 gae 上应用服务器端？

> ID：12179964
> 
> 赞同：0
> 
> 时间：2012-08-29T14:13:18.230
> 
> 标签：google-app-engine, web-analytics

我有一个在 GAE 上运行的应用程序，它没有**网页**（实际上是执行 302 重定向），所以我只能在服务器端进行分析。

所以我想知道是否有一些工具可以处理请求并进行分析。

而且我看到大多数 url-shorten 服务都可以进行分析（比如 goo.gl），他们是在服务器端这样做的吗？我看到他们也在做服务器端重定向（http 301）

顺便说一句，我使用`python`，如果效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:13:34.767

这取决于您要分析的内容以及您希望如何显示数据。是点击次数、负载、延迟吗？

[http://www.prodeagle.com](http://www.prodeagle.com)是一个易于实现的选项，它可能会满足您的一些要求。它为您完成所有绘图。您需要做的就是在他们的系统上为您的计数器提供数据，其余的由它来完成。如果您需要国家和城市分析，您可能可以从请求标头中创建一些使用城市和国家的计数器。看看他们的网站，看看它是否适合您的需求。

# ssrs-2008 - SSRS 未来日期

> ID：12179966
> 
> 赞同：0
> 
> 时间：2012-08-29T14:13:26.083
> 
> 标签：ssrs-2008, reporting-services

我正在构建一个基本的 SSRS 报告，它是一个引用。我有一个数据何时输入系统的日期字段。在报价单上，我想在该字段上加上 30 天，这样我就可以证明该报价单在接下来的 30 天内是好的。我将如何在 SSRS 中的表达中写下它？

到目前为止我所拥有的：

=First(Fields!Date.Value, "DataSet1")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:19:10.523

使用[DateAdd](http://msdn.microsoft.com/en-us/library/aa337194%28v=sql.100%29.aspx)函数。

例子：`DateAdd("d", 30, First(Fields!Date.Value, "DataSet1"))`

# c# - 无法在 Internet Explorer 中看到图像

> ID：12179969
> 
> 赞同：1
> 
> 时间：2012-08-29T14:13:31.663
> 
> 标签：c#, html, internet-explorer

我有一个我已经建立的网站，我只是在 IE 中看不到那里的图像。在 chrome 中它可以工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Report</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    </head>
    <body>
        <table>
            <tr>
                <td align="left">
                    <img width="215" height="62" src="Report_files/image293.png" />
                </td>
                <td align="right">
                    <img width="257" height="75" src="Report_files/image310.jpg" />
                </td>
            </tr>
        </table>
        <img width="776" height="9" src="Report_files/image318.gif" />
        <br />
        <div style="text-align: center;">
            Report - Protein Expression<br />
            1111111111 <br /><br />

        </div>
        <div>
            Application Details<br />
            Application: Protein Expression<br />
            <img width="382" height="245" src="Report_files/Plate.gif" /><br />
        </div>
    </body>
</html> 
```

我可以看到前三张图片，但看不到 Plate.gif 一张。

编辑：实际上，即使直接访问它，我也根本无法在 Internet Explorer 中看到此图像！

编辑 2：我发现我使用 C# 代码创建了图像。我的猜测是图像是用错误的标题或其他东西创建的。这是代码：

```
Size size = new Size( panelPlateDrawing1.Size.Width + ucColorMapLegend1.Size.Width, 
                Math.Max(panelPlateDrawing1.Size.Height, ucColorMapLegend1.Size.Height) );

            Bitmap img = new Bitmap(size.Width, size.Height);

            panelPlateDrawing1.DrawToBitmap(img, new Rectangle(0, 0, panelPlateDrawing1.Size.Width, panelPlateDrawing1.Size.Height));

            ucColorMapLegend1.DrawToBitmap(img, new Rectangle(panelPlateDrawing1.Size.Width, 0, ucColorMapLegend1.Size.Width, ucColorMapLegend1.Size.Height));

            return img; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:14:42.913

也许是区分大小写的问题。验证文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:33:54.927

通常，当 Internet Explorer（或任何浏览器）不显示图像时，这是因为它的格式无法理解，并且由于您没有显示如何将这些图像保存到磁盘，可能因为您已经猜到了，它们带有破旧的标题或信息；要解决它，您需要以正确的格式保存它们，有关如何执行此操作的更多信息可以在这里看到：[Bmp to jpg/png in C#](https://stackoverflow.com/questions/41665/bmp-to-jpg-png-in-c-sharp)

# php - 在php中连接进程的管道

> ID：12179978
> 
> 赞同：2
> 
> 时间：2012-08-29T14:13:59.743
> 
> 标签：php, resources, stream, pipe, proc-open

我希望使用 proc_open 创建的一个进程的输出通过管道传输到使用 proc_open（在 php 中）创建的另一个进程。例如。在 bash 我可以这样做：

```
[herbert@thdev1 ~]$ cat foo
2
3
1
[herbert@thdev1 ~]$ cat foo | sort
1
2
3
[herbert@thdev1 ~]$ 
```

我想使用 proc_open（而不是 shell_exec）在 php 中模拟这个，以便控制返回码、管道等。所以我想要这样的东西：

```
$catPipes=array();
$sortPipes=array();
$cwd = '/tmp';
$env = array();
$catProcess = proc_open("cat foo", array(
        0 => array("pipe", "r"),
        1 => array("pipe", "w")
    ), $catPipes, $cwd, $env);

$sortProcess = proc_open("sort", array(
    0 => array("pipe", "r", $catPipes[1]),
    1 => array("pipe", "w"),
    ), $sortPipes, $cwd, $env);

echo stream_get_contents($sortPipes[1]);
fclose($sortPipes[1]);
//proc_close(this) ... proc_close(that) ... etc 
```

有人知道我如何模拟“|” php中的bash，即将cat-process的第二个描述符连接到sort-process的第一个描述符？任何帮助，将不胜感激！但请不要将我重定向到 shell_exec，因为我希望能够检查退出代码并记录错误:)。

编辑：

顺便说一句，我需要工作的业务解决方案是：

```
while(!feof($searchPipes[1])) fwrite($lookupPipes[0], stream_get_line($searchPipes[1], 40000)); 
```

这基本上是操作系统会做的事情，但我不想自己进行管道管理，因为我有一个内核/posix，老实说，这不是 1976 年 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:42:51.610

是的，你可以——但我认为你必须反过来定义这个。您可以使用“排序”的标准输入作为“猫”的标准输出管道。看看以下内容，这对我有用：

```
<?php

$txt = "a\nc\ne\nb\nd\n";
$fh  = fopen('data://text/plain;base64,' . base64_encode($txt), 'r');

$sort_pipes = array();
$sort_proc  = proc_open(
    'sort',
    array(
        array('pipe', 'r'),
        STDOUT
    ),
    $sort_pipes
);

$cat_pipes = array();
$cat_proc  = proc_open(
    'cat',
    array(
        $fh,
        $sort_pipes[0]
    ),
    $cat_pipes
); 
```

在前两行中，我从文本字符串中定义了一个数据流，我不必依赖文件系统中某处的文件。请注意，我有一个存储在数据流（a、c、e、b、d）中的未排序字符列表。运行上面的脚本应该将排序列表返回到 STDOUT。

请注意，您也可以将资源指定为描述符。在这种情况下，您必须省略数组表示法，因此：

```
STDOUT 
```

代替

```
array(STDOUT) 
```

等等

顺便说一句：您甚至可以直接写入由文件名指定的文件。[您可以在http://en.php.net/manual/de/function.proc-open.php](http://en.php.net/manual/de/function.proc-open.php)的 proc_open 手册条目中找到有关描述符规范的更多信息

**编辑**

当然，另一种方法也可以：您也可以将“cat”写入 STDOUT 管道`array('pipe', 'w')`并`$cat_pipes[1]`用作“排序”的 STDIN。:)

# c# - 如何在 C# 中获取当前日期

> ID：12179979
> 
> 赞同：0
> 
> 时间：2012-08-29T14:14:03.563
> 
> 标签：c#, reporting

我正在使用 Visual Studio 中的报告功能，我需要创建一个道具/变量来存储当前日期，以便可以在我的表单上显示它。我似乎无法在报告视图中找到执行此操作的正确方法。

我最初尝试了以下属性：

```
public DateTime CurrentDate {get;} 
```

这不起作用，因为没有设置器。为了解决这个问题，我：

```
public DateTime CurrentDate{get{return DateTime.Now;}} 
```

感谢您的建议。他们引导我走向正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:15:20.257

```
DateTime.Now 
```

见：http: [//msdn.microsoft.com/en-us/library/system.datetime.now.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:16:15.263

您可以尝试使用此代码

```
DateTime.Now 
```

您可以指定格式

```
DateTime.Now.ToString("yourFormat") 
```

msdn：http: [//msdn.microsoft.com/en-us/library/zdtaw1bw.aspx](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:17:35.107

唯一的`Date`，我会用

日期时间.今天

或者

日期时间.现在.日期

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:17:19.367

系统.日期时间.现在。获取字符串格式：

System.DateTime.Now.ToString()

# javascript - 如何使用 jquery 生成 html 列表

> ID：12179983
> 
> 赞同：2
> 
> 时间：2012-08-29T14:14:23.087
> 
> 标签：javascript, jquery

为什么下面的代码（1）没有给我下面的输出（2）

(1)

```
var $ul = $('<ul>');
var $li = $('<li>').text('text');
$ul.append($li);
$ul.append($li);
$ul.append($li);
$('<div>').append($ul); 
```

(2)

```
<div>
   <ul>
     <li> text <li>
     <li> text <li>
     <li> text <li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:19:19.660

您一遍又一遍地附加相同的 li 而不是创建一个新的。

我建议改为创建一个 html 字符串并立即将其全部附加。

```
var strHTML = "<div><ul>";
strHTML += "<li>text</li>";
strHTML += "<li>text</li>";
strHTML += "<li>text</li>";
strHTML += "</ul></div>";
var elements = $(strHTML);

//OR in jQuery 1.8.0+    
//var elements = $.parseHTML(strHTML); 
```

此外，您应该始终将完整的 html 传递给`$()`，这意味着当您升级 jQuery 时，您将有很多工作要做。`$("<li />")``$("<li>")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:19:51.830

使用克隆。

```
$li.clone().appendTo('ul'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:20:02.803

你可以使用`clone()`方法。

```
var $ul = $('</ul>');
var $li = $('</li>', {text:'text'});
$ul.append($li.clone());
$ul.append($li.clone());
$ul.append($li.clone());
$('<div/>').append($ul) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:29:49.777

```
var $ul = $('<ul />');

for (i=0; i<3; i++) {
    $ul.append($('<li />', {text : 'text'}));
}

$('<div>').append($ul); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:22:01.887

你可以使用一个while循环：

```
var i = 1;

while (i <= 3){
    $('ul').append('<li>Text</li>');
    i=i+1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T14:18:54.627

尝试

```
$("<div/>")
    .append(
       $("<ul/>")
          .append(
              $("<li/>")
                  .text(" text ")
          )
          .append(
              $("<li/>")
                  .text(" text ")
          )
          .append(
              $("<li/>")
                  .text(" text ")
          )
    ); 
```

当您`$li`多次附加相同的内容时，您只是在移动它。您需要为每个追加创建一个新的。

# c++ - Qt Creator 不显示 SFML 窗口

> ID：12179998
> 
> 赞同：0
> 
> 时间：2012-08-29T14:14:54.390
> 
> 标签：c++, qt-creator, sfml

我最近设置了 qt creator 来使用 SFML，我尝试运行一段代码作为测试，看看它是否有效。我必须注意下面的代码在 Codeblocks IDE 中**完美**运行，但在 qt creator 中它只是显示一个带有文本“Press RETURN to close this window...”的控制台

```
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <iostream> 

using namespace std;
using namespace sf;

Window w(VideoMode(350,350,32), "Tic Tac Toe"); Event e1; const Input&
in1 = w.GetInput();

int main() {
    while(w.IsOpened())
    {
        w.Display();
    }
    return EXIT_SUCCESS;
} 
```

这是我的 .pro 文件：

```
INCLUDEPATH += C:\SFML-1.6\include
LIBS += C:\SFML-1.6\lib\sfml-system.lib \
    C:\SFML-1.6\lib\sfml-window.lib \
    C:\SFML-1.6\lib\sfml-graphics.lib \
    C:\SFML-1.6\lib\sfml-audio.lib \
    C:\SFML-1.6\lib\sfml-network.lib 
```

一百万年来，我从未想过在我最喜欢的 IDE 上使用 SFML 会如此困难，问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:12:38.143

你不应该使用全局对象。他们可能会弄乱 SFML 的内部。

你也应该处理事件。不这样做可能是您的问题的原因。

尝试[教程](http://www.sfml-dev.org/tutorials/1.6/window-events.php)中[的示例](http://www.sfml-dev.org/tutorials/1.6/sources/window-events.cpp)。

如果您是第一次发现 SFML，我强烈建议您从 2.0 开始，而不是旧的、有缺陷的和已弃用的 1.6 版本。看看官方论坛上的一些讨论，了解为什么 2.0 更好，尽管它目前“只是”一个候选版本。