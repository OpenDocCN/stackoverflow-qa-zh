# StackOverflow 问答 12281000-12281999

# java - 如何编写像python这样的打印方法？

> ID：12281000
> 
> 赞同：2
> 
> 时间：2012-09-05T12:02:58.570
> 
> 标签：java, printing, casting

我想在java中编写一个方法，就像我在python中使用它一样，但它会打印地址而不是num：

以下是代码：

我可以使用 print(1,2,3) 或 print(obj[])，但是当我使用 integer[] num={1,2,3,4,5} 时我不能 print(int[])；输出正确

如何像 python 一样打印（int []）？

```
 public class Print {

        public static void print() {
            System.out.println();
        }   

        public static void print(Object... obj) {
            for(Object c:obj){
                System.out.print(c);
                System.out.print(" ");
            }
            System.out.println();
        }

        public static void print(Object obj) {
            System.out.println(obj);
        }

        public static void main(String[] args){
            int[] num={1,2,3,4,5};
            print(num);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:06:02.790

要显示数组内容，您可以使用：

```
System.out.println(Arrays.toString(num)); 
```

输出：

```
[1, 2, 3, 4, 5] 
```

您看到“地址”的原因是原始数组`int[]`是一个对象，而不是`Object[]`您第一个`print`方法中使用的对象。所以

```
public static void print(Object obj) 
```

叫做。

要使您的第一种方法起作用，您必须使用以下内容：

```
public static void print(int[] nums {
    for (int num : nums) {
        System.out.print(num);
        System.out.print(" ");
    }
    System.out.println();
} 
```

或者如果上述输出格式可以接受：

```
public static void print(int[] nums) {
    System.out.println(Arrays.toString(nums));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:20:36.650

`print(Object... obj)`基本上是`print(Object[] obj)`。如果您不通过`Object[]`,`print(Object obj)`将被使用。`int`是原语并且不**继承**自所以`Object`您`int[]`的**不是**`Object[]`. 您可以使用包装类`Integer`并创建一个，`Integer[]`或者您必须实现`print(int[] ints)`.

`print(1,2,3)`有效，因为参数会自动转换为`Integer`s。

# javascript - 在 jQuery 中获取 div 的计算值

> ID：12281001
> 
> 赞同：0
> 
> 时间：2012-09-05T12:03:01.690
> 
> 标签：javascript, jquery, html, height

我有 3`li`下`ul`。现在我想知道 的高度`li`。我不给高度`li`。但我想要计算出的高度`li`。当我看到萤火虫时，我发现计算出的高度`li`是 14px。但是在使用`.height()`jQuery 之后，我得到了 0px 的高度`li`。

如何获得计算值高度`li`？

我尝试了以下代码段，但无法获得高度：

```
var $ht = jQuery("#access ul ul ul a").height();
console.log($ht); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:14:50.203

如果您`<a>`是空的，则`height()`适当地产生 0。如果您想要高度，`<li>`则将代码更改为：

```
var $ht = jQuery("#access ul li li li").height();
console.log($ht); 
```

如果您`<li>`有要包含在计算中的边距和填充，请使用以下内容：

```
var $ht = jQuery("#access ul li li li").outerHeight(true);
console.log($ht); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T12:16:49.753

尝试`console.log($("#access ul ul ul a").css("height"));`

# optimization - 将任务转换为线性规划

> ID：12281004
> 
> 赞同：2
> 
> 时间：2012-09-05T12:03:18.070
> 
> 标签：optimization, linear-programming

我在组织非自动化仓库（带叉车）时遇到了这样的问题。在一天开始时，仓库的托盘架上有一些托盘，白天有一些特定数量的卡车将托盘进出口到仓库。我想尽量减少白天叉车的行驶距离和（或）尽量减少正在处理外送货物的卡车的等待时间（他们正在等待用托盘装满卡车）。

我提出了一些非常直观的算法，但如果我将它们与最直观的方法进行比较，它们并没有产生好的结果——将进口托盘放在仓库中最近的空闲货架上。我试图将这个问题转换为线性规划，但我没有成功 - 我知道如何为单个货车找到最小化的叉车路径，但是我不知道如何将它们放在一起，因为每次货车导出/导入一些托盘时，仓库状态是改变（仓库中不同的托盘布局）。我还尝试了通过系统检查每种可能性来找到最佳结果的蛮力方法，但这并没有在合理的时间内产生结果......

有没有人有一些想法（关于将问题转换为线性规划）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:20:03.830

一些想法。

听起来您可能无法将此问题转换为 LP 规范形式。回想一下，LP 的规范形式是

![LP 方程](../Images/fd4e4777e12905a84c1a23cc3c2fe266.png)

如果您想优化叉车的行驶距离，则 - **c**是操作每辆叉车的成本向量，**A**将是大小为*#lorries x #forklifts*的矩阵，其中包含您能够计算的最佳距离，并且解决方案**x**会将一部分工作分配给每辆叉车。

您必须根据系统约束计算出向量**b**，即 b[i] 可能是叉车根据其平均速度可以行驶的最大距离。

希望您可以将实数解转换为一些合理的整数解，否则您将需要使用整数线性规划，这是一个更困难的优化问题。

最后，如果在仓库中移动调色板会改变系统的成本，那么 LP 将不适用，您将不得不使用某种状态空间搜索（最佳优先、A* 或其他变体），其中该州由调色板、叉车和卡车的位置定义。

# css - 自动调整css div内容

> ID：12281009
> 
> 赞同：0
> 
> 时间：2012-09-05T12:03:29.787
> 
> 标签：css

我正在尝试使用 css div 自动调整内容。我对 div 宽度感到震惊。下面是我的代码。我正在附加屏幕我的要求到底应该是什么。如果您看到附加的屏幕，您可以理解。

[http://jsfiddle.net/266PG/44/](http://jsfiddle.net/266PG/44/)

请任何人都可以解决这个问题。

这就是我要的

![在此处输入图像描述](../Images/6149692b0ddc199cbb2978a8b34e3ecf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:08:10.047

您可以尝试使用此示例

```
<div id="outerDiv" class="autosize">
    <div id="innerDiv" runat="server" style="display: block">
        //Content...
    </div>
</div> 
```

**CSS：**

```
#outerDiv
{
    min-height: 200px; 
}

div.autosize { display: table; width: 1px; }
div.autosize > div { display: table-cell; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:08:19.813

只需使用

```
width: auto 
```

并且不要对内部 div 使用固定宽度。也许您可以`max-width`为外部 div 定义属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:46:08.923

您可以只使用：

```
div {float:left;overflow:hidden;} 
```

# javascript - jQuery - 尝试附加每个新选项以进行选择

> ID：12281011
> 
> 赞同：0
> 
> 时间：2012-09-05T12:03:43.527
> 
> 标签：javascript, jquery

我正在尝试将每个新的附加`<option>`到该`select`领域，但在第一次提交后我似乎得到了倍数。

任何帮助表示赞赏。

```
<input id="name" placeholder="name">
<input id="phone" placeholder="phone">
<button id="submit">Submit</button> 
```

和

```
$("button").on("click", function(){
    userData.name = $("#name").val();
    userData.phone = $("#phone").val();
    users.push(userData);

    var len = users.length;

    for (var i = 0; i < len; i++) {
        $("<option value=" + users[i].phone+ ">" + users[i].name + "</option>").appendTo(select);
    }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/Buttery/5dQhj/3/](http://jsfiddle.net/Buttery/5dQhj/3/)

当前输出

```
Terry
Gus
Gus
Foo
Foo
Foo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:07:58.453

当您单击按钮时，您会将新添加的内容附加到原始数据源，然后遍历原始数据源并重新添加每个，创建重复项，试试这个：

```
$("button").on("click", function(){
    userData.name = $("#name").val();
    userData.phone = $("#phone").val();
    users.push(userData);

    $("<option value=" + userData.phone + ">" + userData.name + "</option>").appendTo(select);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:07:46.837

删除你的 for 循环：

```
$("button").on("click", function(){
    userData.name = $("#name").val();
    userData.phone = $("#phone").val();
    users.push(userData);

    $("<option value=" + userData.phone+ ">" + userData.name + "</option>").appendTo(select);
}); 
```

[http://jsfiddle.net/9u7LS/](http://jsfiddle.net/9u7LS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:13:29.143

将全局变量移动到函数中

```
$ ("button").on("click", function(){
var users = [];
var userData = {};
var select = $("#users");
userData.name = $("#name").val();
userData.phone = $("#phone").val();
users.push(userData);

var len = users.length;

for (var i = 0; i < len; i++) {
    $("<option value=" + users[i].phone + ">" + users[i].name +  "</option>").appendTo(select);
} 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:14:38.357

试试这个：**[小提琴演示](http://jsfiddle.net/5dQhj/13/)**

正如您一次又一次地使用循环添加现有值一样，请避免使用循环。

```
var users = [];
var userData = {};
var select = $("#users");

$("button").on("click", function(){

userData.name = $("#name").val();
userData.phone = $("#phone").val();
users.push(userData);

    $("<option value=" + users[0].phone+ ">" + users[0].name +   
    "</option>").appendTo(select);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:18:43.423

```
var users = [];
var userData = {};
var select = $("#users");

$("button").on("click", function(){
    userData.name = $("#name").val();
    userData.phone = $("#phone").val();
    users.push(userData);

    select.append($("option>/option>").attr("value",userData.phone).text(userData.name));

}); 
```

# iphone - 类似sqlite的查询导致崩溃

> ID：12281015
> 
> 赞同：1
> 
> 时间：2012-09-05T12:04:01.130
> 
> 标签：iphone, ios, sqlite

大家好，我对 ios 中的 sqlite 不太了解。我正在使用查询来搜索单词/句子。下面是我检索记录的示例代码

```
 -(NSArray *)prepareSearchResultsForQuery:(NSString *)searchString{

        searchQueryString = searchString;

        sqlite3_stmt *searchResultsStmt;
        NSMutableArray *arrayOfSearchResults;
       NSString *searchResultsQuery = [NSString stringWithFormat:@"SELECT * FROM Search WHERE pageText LIKE '%%%@%%'",searchString];
        if (sqlite3_prepare_v2(bookDB,[searchResultsQuery UTF8String],-1,&searchResultsStmt,nil) == SQLITE_OK) {
            arrayOfSearchResults = [[NSMutableArray alloc]initWithCapacity:1];

            while (sqlite3_step(searchResultsStmt) == SQLITE_ROW) {
                XPathSearchResult *xpathObj = [[XPathSearchResult alloc] init];
                xpathObj.targetPageIndex = sqlite3_column_int(searchResultsStmt, 2);
                NSString *entirePageString = [[[NSString alloc] initWithUTF8String:(const char*)sqlite3_column_text(searchResultsStmt, 4)] autorelease];
                xpathObj.stringContainingSearchQuery = [self getDisplayStringFromPageString:entirePageString];

                [arrayOfSearchResults addObject:xpathObj];
                [xpathObj release];

            }
        }
        sqlite3_finalize(searchResultsStmt);
        return arrayOfSearchResults; 
    }
    } 
```

上面的代码对我有用，直到有类似**地球的词**

如果单词包含 '"" < 字符我的方法不起作用。现在我发现我们需要使用准备好的语句来摆脱这个问题。任何人都可以建议我在这种情况下如何使用准备好的语句。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:33:42.883

该应用程序正在崩溃，因为您有未转义的转义字符（在本例中为单引号）。添加这一行：

`[sqlQuery stringByReplacingOccurrencesOfString:@"'" withString:@"\\'"];`

应该防止由单引号引起的崩溃。您还可以创建一个正则表达式来删除所有此类字符的转义。

# selenium - Webdriver 为 textarea.sendKeys(text) 返回错误

> ID：12281019
> 
> 赞同：0
> 
> 时间：2012-09-05T12:04:17.120
> 
> 标签：selenium, textarea, webdriver, sendkeys, selenium-webdriver

我正在使用 Webdriver 2.25.0 和 Firefox 14

我有以下文本区域：

```
<textarea id="source-text" placeholder="Start typing your text" style="resize: none; overflow: hidden;"></textarea> 
```

我在我的 HomePage 对象中识别这个文本区域，如下所示：

```
@FindBy(how = How.CSS, using = "div.myclass textarea")
public WebElement columnLeftTextarea; 
```

我想要做的只是使用以下代码在此文本区域内键入一些文本

```
homePage.columnLeftTextarea.sendKeys("some text"); 
```

这将返回以下错误：

```
Type mismatch Can't assign non-array value to an array 
```

textarea 被正确定义为我运行时

```
 homePage.columnLeftTextarea.getAttribute("placeholder") 
```

我得到正确的文字

我什至尝试通过将功能设置为可处理本机事件来启动浏览器：

```
FirefoxProfile ffProfile = new FirefoxProfile(new File(generalPropertiesTestObject.getFirefox_profile_template_location()));
        ffProfile.setEnableNativeEvents(true);
        FirefoxDriver ffd = new FirefoxDriver(ffProfile);
        capabilities = ffd.getCapabilities(); 
```

但我仍然遇到同样的错误。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:12:19.327

尝试首先关注文本区域。我使用以下代码做到了：

```
 driver.findElement(By.id("source-text")).clear();
 driver.findElement(By.id("source-text")).sendKeys("some text"); 
```

它似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:40:04.550

您需要更改此代码：

```
@FindBy(how = How.CSS, using = "div.myclass textarea")
public WebElement columnLeftTextarea; 
```

对此：

```
@FindBy(how = How.ID, using = "source-text") 
public WebElement columnLeftTextarea; 
```

首先，它工作得更快，因为按 ID 搜索比按 CSS 搜索更快。其次，ID 变化的时间不如 CSS。

# android - 禁用移动数据

> ID：12281020
> 
> 赞同：1
> 
> 时间：2012-09-05T12:04:22.377
> 
> 标签：android, android-internet

我需要以编程方式禁用移动数据连接

我跟着这个

```
private void setMobileDataEnabled(Context context, boolean enabled) {
    final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    final Class conmanClass = Class.forName(conman.getClass().getName());
    final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
    iConnectivityManagerField.setAccessible(true);
    final Object iConnectivityManager = iConnectivityManagerField.get(conman);
    final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
    final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    setMobileDataEnabledMethod.setAccessible(true);

    setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

[StackOverFlow 链接](https://stackoverflow.com/questions/3644144/how-to-disable-mobile-data-on-android)

但我收到错误“java.lang.NullPointerException：Println 需要一条消息”

日志

```
09-05 18:20:29.081: E/AndroidRuntime(736): FATAL EXCEPTION: Timer-0
09-05 18:20:29.081: E/AndroidRuntime(736): java.lang.NullPointerException: println needs a message
09-05 18:20:29.081: E/AndroidRuntime(736):  at android.util.Log.println_native(Native Method)
09-05 18:20:29.081: E/AndroidRuntime(736):  at android.util.Log.d(Log.java:138)
09-05 18:20:29.081: E/AndroidRuntime(736):  at com.anand.batterysaver.BatterySaverActivity.checkScreenStatus(BatterySaverActivity.java:69)
09-05 18:20:29.081: E/AndroidRuntime(736):  at com.anand.batterysaver.BatterySaverActivity$1.run(BatterySaverActivity.java:43)
09-05 18:20:29.081: E/AndroidRuntime(736):  at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

checkScreenStatus 函数

```
 public void checkScreenStatus(){
        PowerManager powermanager;
        GetProcessList list = new GetProcessList();
        ConnectivityManager cm = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);

        powermanager = (PowerManager) this.getSystemService(Context.POWER_SERVICE); 
        if (powermanager.isScreenOn() == false)
        {
            Log.d("PowerStatus","Lock All Settings");
            boolean gprsstatus = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED;
            Log.d("Locked gprsStatus",String.valueOf(gprsstatus));
            if(gprsstatus == true){
                try{
                    list.setDataEnabled(getApplicationContext(), false);
                }catch (Exception e) {Log.d("Exception",e.getMessage()); }
            }
        }else{
            Log.d("PowerStatus","Resume All");
            gprsstatus = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED;
            Log.d("Locked gprsStatus",String.valueOf(gprsstatus));
            if(gprsstatus == true){
                TelephonyManager gprs = (TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
                if(gprs.getDataState() == TelephonyManager.DATA_CONNECTED){
                    Log.d("Gprs","on");
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:15:57.290

试试这个：这行得通（这是我在市场上的一个应用程序的代码）

```
private static void updateAPN(Context paramContext, boolean enable) {
    try {
        ConnectivityManager connectivityManager = (ConnectivityManager) paramContext.getSystemService("connectivity");
        Method setMobileDataEnabledMethod = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
        setMobileDataEnabledMethod.setAccessible(true);
        setMobileDataEnabledMethod.invoke(connectivityManager, enable);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

奖金 ：

```
private static boolean isAPNEnabled(Context paramContext) {
    try {
        NetworkInfo networkInfo = ((ConnectivityManager) paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
        return networkInfo.isConnected();
    } catch (Exception e) {
        return false;
    }
} 
```

顺便说一句，不要忘记这一点：

```
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"
uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"
uses-permission android:name="android.permission.INTERNET"
uses-permission android:name="android.permission.READ_PHONE_STATE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:18:07.613

我使用了相同的方法，但是我添加了 throws Exception，如下所示：

```
public static void setMobileDataEnabled(Context context, boolean enabled)throws Exception {
       final ConnectivityManager conman = (ConnectivityManager)  context.getSystemService(Context.CONNECTIVITY_SERVICE);
       final Class conmanClass = Class.forName(conman.getClass().getName());
       final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
       iConnectivityManagerField.setAccessible(true);
       final Object iConnectivityManager = iConnectivityManagerField.get(conman);
       final Class iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
       final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
       setMobileDataEnabledMethod.setAccessible(true);

       setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
    } 
```

以这种方式调用了一个方法

```
 try {
    Tools.setMobileDataEnabled(getApplicationContext(), true); //true for enable, false for disable
    } catch (Exception e) { }
} 
```

它对我有用。

# android - 应用程序运行安全异常

> ID：12281021
> 
> 赞同：0
> 
> 时间：2012-09-05T12:04:33.110
> 
> 标签：android

运行应用程序时出现问题：在控制台屏幕中

> java.lang.SecurityException: Permission Denial: 从 null (pid =9137, uid=2000) 要求为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:08:27.023

确保您有足够的权限`<uses-permission>`。查看以下有关 android 安全性的指南[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

# c# - 适用于 Android 的 Mono 的 GPS 功能

> ID：12281029
> 
> 赞同：0
> 
> 时间：2012-09-05T12:05:02.437
> 
> 标签：c#, xamarin.android, monodevelop

在我开始做一些 Android 编程之前，我想知道一些信息。

我想做一个应用程序来获取其他 Android 手机用户的 GPS 位置。这很容易做到吗？

另外，制作一个类似于 Tom Tom GPS 应用程序来通过地图引导您到各个地方是否容易？

最后一个问题......我可以获取我当前的位置作为 GPS 坐标，并通过地图找到我附近的任何商店、银行、服务站等的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:19:16.050

这实际上是关于将 GPS 与其他服务结合起来的一整套问题。这些东西中的大部分实际上超出了使用 Android 操作系统的范围，并扩展到了数据库和在线服务。

## 我可以获取附近手机的 GPS 坐标吗？

回答您的第一个问题：是的，您可以跟踪手机的 GPS 位置。最重要的是，您需要手机将其 GPS 坐标推送到服务器。下一步是询问服务器，使用您自己的 GPS 坐标作为兴趣点，还记录了哪些其他 GPS 坐标，比如说 200m。但是，我必须指出，这仅在您为其构建应用程序并要求人们安装并运行它时才有效。此外，它还存在一些隐私问题，因为无缘无故地向人们询问他们的 GPS 位置并不是真正的主流，更不用说将这些信息存储在服务器上。

## 我可以创建像汤姆汤姆这样的个人导航应用程序吗？

是的，您当然可以创建个人导航应用程序。有开放的街道地图，其中包含许多免费的世界地图数据。查看他们的网站了解更多信息：[http ://www.openstreetmap.org/](http://www.openstreetmap.org/)

## 我可以检索附近商店、银行和其他场所的位置吗？

是的，这是可能的，您可以在 Android 中检索您当前的位置，并将其与支持 GPS 的搜索引擎相结合。该过程的第一步是获取用户位置。关于如何在 Google 上确定用户的位置，有一个非常好的 API 指南。可悲的是，还没有人专门为 Mono for Android 写过一篇关于它的博文（至少我没有找到）。不过这并不重要，因为 java 代码很容易转换成 C#。在此处查看 API 指南：http: [//developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

您可以将这项技术与谷歌地图 API 等服务相结合，并查询特定位置附近的地址。这里有几个选项（[给定 GPS 坐标，我如何找到附近的地标或兴趣点？](https://stackoverflow.com/questions/2631742/given-gps-coordinates-how-do-i-find-nearby-landmarks-or-points-of-interest)），我个人真的很喜欢在一个位置附近询问四个广场的场地，因为那个场地是由一大群人积极维护的。提供更最新的体验。

# git - 如何在我们的登台服务器上切换到特定的 git 分支和提交 id

> ID：12281031
> 
> 赞同：1
> 
> 时间：2012-09-05T12:05:01.970
> 
> 标签：git, fabric

我想在我的部署中构建检查用户分支和他正在使用的提交 ID 的能力。

过去，我们只在我们的部署框中签出 master。我这样做了，它似乎奏效了。

```
git checkout HASH 
```

但现在我希望能够在我们的暂存盒上测试分支和散列。我怎么做？我想如果我重置为 HASH，它会推断出分支，但这不起作用。我以为我可以做一个`checkout branch HASH`.

**如何在我们的登台服务器上重新创建用户当前在他的分支上的签到？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:08:48.490

提交哈希本身并不引用分支；它指的是可能存在于多个分支上的提交，甚至根本没有。

分支只是一个指向提交哈希的名称（并且此指针随着提交添加到分支而移动）。

要签出分支，您需要使用`git checkout <branch>`.

如果您只是推送一个哈希，则需要切换到按名称推送分支，以便在您的暂存框上知道该分支名称。

> 如何在我们的登台服务器上重新创建用户当前在他的分支上的签到？

如果这就是你所需要的，你不需要检查一个分支。就像`git checkout HASH`你已经在做的那样使用。这保证总是反映同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:21:51.000

## 这需要多个命令

除了创建新分支的特殊情况外，*checkout*命令不能同时获取分支引用和提交哈希。因此，要将不同分支上的提交作为分离的头签出：

```
git checkout <branch_name>
git checkout <commit_hash> 
```

## 相同的哈希是相同的提交

以上可能不是绝对必要的，因为（从实际的角度来看）相同的提交哈希包含相同的内容，而不管它位于哪个分支上。例如，提交 1d2cad0 可以存在于多个分支上，对于分离的头，当你`git checkout`提交时你在哪个分支上并不重要。

例如，如果分支*foo*上存在 1d2cad0 ，您可以`git checkout 1d2cad0`从*任何*分支，您将收到类似于以下内容的消息：

> HEAD 现在在 6bce656... foo

您处于一个分离的头脑中，并且会看到有关如何处理它的其他说明。对于这个用例，你真的不需要担心分支*本身*，除非你想要进行额外的提交，这需要 git 来跟踪祖先。

# jquery - 在 Wordpress 中使用 Magicline 菜单

> ID：12281035
> 
> 赞同：0
> 
> 时间：2012-09-05T12:05:18.333
> 
> 标签：jquery, css, wordpress

有没有人熟悉在 css 技巧中看到的 Magic Line jquery 菜单？[http://css-tricks.com/jquery-magicline-navigation/](http://css-tricks.com/jquery-magicline-navigation/)

我找不到任何关于如何使其在 Wordpress 中工作的指南（尽管很多人在评论中提到了 Wordpress）。

一直试图让它在一个非常精简的主题上工作，但无济于事。有没有人成功地实现了这一点？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:17:53.780

尝试这个...

当您调用菜单时，请使用它。

```
<?php $defaults = array(
    'theme_location'  => '',
    'menu'            => '', 
    'container'       => 'div', 
    'container_class' => 'nav-wrap', 
    'container_id'    => '',
    'menu_class'      => 'group', 
    'menu_id'         => '',
); ?>

<?php wp_nav_menu( $defaults ); ?> 
```

基本上，这将为与 jquery 对应的所有菜单元素添加类和 ID。您可能需要稍微修改名称，但如果您使用的是安装了开发人员工具的浏览器，那么应​​该很容易确定每个项目的名称。另外，我在某处读到它说“当前”功能默认情况下应该在 wordpress 中工作。

# python - 在Django中设置多个具有相同名称的cookie

> ID：12281038
> 
> 赞同：3
> 
> 时间：2012-09-05T12:05:23.577
> 
> 标签：python, django, cookies

有没有办法在同一个响应中为多个域或路径设置同名的 cookie？以下仅设置第二个cookie：

```
response.set_cookie("alice", "123", domain='sub.example.com')
response.set_cookie("alice", "456", domain='example.com') 
```

我查看了[Django 实现](https://github.com/django/django/blob/master/django/http/__init__.py#L634)。它使用字典来存储 cookie：

```
self.cookies[key] = value 
```

所以 Django 不能在同一个响应中设置多个同名的 cookie。

这是打算这样工作吗？您是否找到解决该限制的方法？

**更新**

报告为错误：[https ://code.djangoproject.com/ticket/18908](https://code.djangoproject.com/ticket/18908)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:13:26.457

这可能不是问题的确切答案，但仍然如此。

这似乎与 django 实现有关，因为它仅使用 cookie 名称作为 dict 中的键。在现实世界中，只要域或路径不同，就可以拥有具有多个值的同名 cookie。我发现解释了这个有用[的 HTTP cookie](http://www.nczonline.net/blog/2009/05/05/http-cookies-explained/)

更多参考：

[RFC2965](https://www.rfc-editor.org/rfc/rfc2965)

[Http Cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-05T23:19:07.700

它确实使用一个简单的 dict 来存储 cookie，但是当将 cookie 呈现到响应标头时，django simple 迭代`cookies.values()`它不会查看键。

为此，您可以花哨（这是python 3.5）：

```
# python 3.5 specific unpacking
# Note that according to the RFC, cookies ignore the ports

hostname, *_ = request.get_host().split(':')

# set the cookie to delete
response.delete_cookie(settings.ACCESS_TOKEN_COOKIE_KEY,
                       domain=settings.COOKIE_DOMAIN)
# pull it out of the cookie storage
# and delete it so we can write an new one
cookie_domain_cookie = response.cookies[settings.ACCESS_TOKEN_COOKIE_KEY]
del response.cookies[settings.ACCESS_TOKEN_COOKIE_KEY]

# write the new cookie
response.delete_cookie(settings.ACCESS_TOKEN_COOKIE_KEY,
                       domain=hostname)

# do the same as we did above, probably not strictly necessary
hostname_cookie = response.cookies[settings.ACCESS_TOKEN_COOKIE_KEY]
del response.cookies[settings.ACCESS_TOKEN_COOKIE_KEY]

# make new keys for the cookies
cookie_domain_cookie_key = "{}:{}".format(settings.ACCESS_TOKEN_COOKIE_KEY, settings.COOKIE_DOMAIN)
hostname_cookie_key = "{}:{}".format(settings.ACCESS_TOKEN_COOKIE_KEY, hostname)

# set them
response.cookies[cookie_domain_cookie_key] = cookie_domain_cookie
response.cookies[hostname_cookie_key] = hostname_cookie 
```

# sitecore - Sitecore：更改内容树节点上的文本颜色？

> ID：12281039
> 
> 赞同：4
> 
> 时间：2012-09-05T12:05:23.633
> 
> 标签：sitecore, sitecore6

是否可以根据工作流状态更改 Sitecore 内容树上的文本/名称的颜色？

我是否认为这可以通过修改页面上的“外观、样式”值的工作流来完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T20:20:27.643

是的，应该这样做。如果您将外观选项卡中“样式”字段的值设置为“颜色：红色；” 内容树中的项目名称将以红色字体显示。还应该可以更改字体、字体样式、大小和其他效果，如粗体/斜体。

为此，您需要编写一个自定义工作流操作来设置样式属性。

# javascript - 在 PHP 邮件中发送由 javascript 创建的内容？

> ID：12281040
> 
> 赞同：0
> 
> 时间：2012-09-05T12:05:30.957
> 
> 标签：javascript, jquery, php

我在商店中使用 javascript 购物车，我想在结帐时发送订单确认。问题是购物车没有保存在任何类型的数据库中，而是用 javascript 打印的。我如何将其附加到电子邮件中？我在发送邮件的页面上包含了购物车脚本。

`<table class="simpleCart_items"></table>`会打印购物车，但我如何将打印的购物车附加到电子邮件中？

隐藏输入还是什么？

**更新**

我的 ajax 调用如下所示：

```
var data = $('#yhteystiedot').serialize();
      data.cartContent = $('.simpleCart_items').html(); 
      //alert (dataString);return false;
     $.ajax({
    type: "POST",
    url: "order.php",
    data: data,
    dataType: "text",
    error: function(){ alert("Jotakin meni pahasti pieleen! Yritä uudelleen?");
 },
    success: function() {
 $(document).html("Tilaus lähti.");
        }

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:24:27.087

您可以对发送电子邮件的 php 函数进行 ajax 调用。参数是javascript生成的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:20:24.200

您需要将购物车值发布到服务器端 PHP 脚本并为购物车重新创建 HTML，以便能够通过电子邮件发送它。您可以根据需要进行直接表单发布或 ajax 发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:30:31.537

我假设你的`$.ajax()`电话看起来像这样：

```
$('form').submit(function(){
    var dataTrunk = $(this).serializeArray();
    dataTrunk.push( { name: 'cartContent', value: $(your_table_selector).html()});
    $.ajax({
        url: 'mail.php', // your mail script
        data: dataTrunk,
        type: 'post'
    });
    return false;
}); 
```

在 php 中，您将捕获`$_POST['cartContent']`并在电子邮件中呈现它并发送它。

如果您使用`html`and发送电子邮件`plain text body`，那么去除 html 元素并将其替换为与纯文本兼容的字符可能是个好主意。

// 已编辑：我已修复错误

# spring - HibernateCallback 实现

> ID：12281044
> 
> 赞同：0
> 
> 时间：2012-09-05T12:05:47.353
> 
> 标签：spring, hibernate

考虑代码

```
public List<Product> listProducts(){

    HibernateCallback callBack=new HibernateCallback(){

    public Object doInHibernate(Session session){
       Query query=session.createQuery("from Product");
       return query.list();
     }
    };
    return (List<Product>)hibernateTemplate.execute(callBack);
} 
```

上面的代码有什么问题吗？在*Eclipse Helios*中，它显示以下错误：

```
The type new HibernateCallback(){} must implement the inherited abstract method HibernateCallback.doInHibernate(Session) 
```

`doInHibernate()`已实现，为什么它显示上述错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:09:03.430

确保它`Session`是`org.hibernate.Session`，而不是其他东西（例如`org.hibernate.classic.Session`）。

`org.hibernate.Session`和对`org.hibernate.classic.Session`特别棘手 - 由于后者接口扩展了前者，这种意外错误不会导致其他问题并且不容易被注意到。

# javascript - inArray, indexOf 在一个二维数组中

> ID：12281046
> 
> 赞同：2
> 
> 时间：2012-09-05T12:05:51.533
> 
> 标签：javascript, jquery, arrays, indexof

我有一个二维数组。例如

```
var bruecken = [[1,2],[3,4]]; 
```

现在我正在尝试测试是否存在子数组：

```
console.log(jQuery.inArray([1,2], bruecken)); 
```

或者

```
console.log(bruecken.indexOf([1,2])); 
```

但两种方式都返回-1。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:33:09.113

最快的方法是使用 for 循环并比较它们，如果找到则返回。这是您可以使用的东西，我使用 JSON 进行比较，但您可以使用您认为最好的任何比较器（有很多）：

```
function arrayInArray(needle, haystack) {
    var i=0, len=haystack.length, target=JSON.stringify(needle);
    for(; i<len; i++) {
        if (JSON.stringify(haystack[i]) == target) {
            return i;
        }
    }
    return -1;
}

arrayInArray( [0,1], [ [1,2], [0,1] ] ); // 1 
```

如果你想要布尔值，只需返回`true`而不是`i`和`false`而不是`-1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:14:07.540

我不认为 inArray 会起作用，因为比较两个相同的数组 using`==`将返回 false。您可以尝试`grep`改用：

```
function subArrayInArray(subArray, array){
    var matches = $.grep(array, function(a){
        // Compare the target array with each of the child arrays
        return $(subArray).not(a).length == 0 && $(a).not(subArray).length == 0;
    });
    return !!matches.length;    
} 
```

比较两个数组的方法是从[这个问题中偷来的](https://stackoverflow.com/questions/1773069/using-jquery-to-compare-two-arrays)

# hibernate - 为什么命名查询？

> ID：12281047
> 
> 赞同：1
> 
> 时间：2012-09-05T12:06:00.283
> 
> 标签：hibernate, jpa-2.0, named-query

我想知道使用命名查询是否会带来更好的性能。何时何地编译和部署命名查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:17:09.457

命名查询的主要原因是安全性：它强制使用查询参数（即，您将无法使用某些字符串连接构建查询），并且可以避免程序中的错误最终导致执行恶意查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:18:12.403

命名查询将在启动应用程序服务器时编译并在停止应用程序服务器后销毁。所以在运行时没有性能问题

# php - 我如何使用 AJAX 和 symfony2 Doctrine 上传多个 jpg

> ID：12281050
> 
> 赞同：0
> 
> 时间：2012-09-05T12:06:25.583
> 
> 标签：php, ajax, symfony, doctrine-orm

我知道使用 symfony 和教义 2 上传单个图像很容易。但我想拥有像谷歌文档这样的系统，我可以在其中使用教义2看到当前图像上传的进度条。

我知道想使用第三方插件。

因为我需要为每个图像创建一个实体并将其存储在数据库中并包含一些细节。所以我可以在目录中使用第三方软件批量上传

有没有可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-26T19:56:44.257

您可以使用 javascript 在客户端上传文件。

请参阅[http://fineuploader.com/demos.html](http://fineuploader.com/demos.html)。您可以浏览文件并自动触发上传，或者如果您想在客户端处理数据（例如预览），您也可以手动处理和触发上传。

您也可以参考[http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins](http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins)

并选择适合您要求的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:21:23.507

你可以试试**[AX Ajax Multi Uploader](http://code.google.com/p/ax-jquery-multiuploader/)**

这是他们的主页[http://www.albanx.com/](http://www.albanx.com/)（虽然不相关）

# asp.net - 向导控件不保留步骤之间的状态

> ID：12281052
> 
> 赞同：0
> 
> 时间：2012-09-05T12:06:30.110
> 
> 标签：asp.net, wizard

我有一个向导控件，在其中一个步骤中，我动态地构建了一个表。如果我前进到下一步并决定返回到带有表格的步骤，则表格将被破坏，并且只有标题行存在。我设置了一些测试场景，底线是当你离开这个步骤时，桌子就被抹掉了。

我已启用视图状态并将其设置为 true。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:44:14.137

问题已解决....禁用视图状态。

# c++ - 我需要制作一个包含基类和派生类对象的向量，并知道哪个元素是哪个

> ID：12281053
> 
> 赞同：-1
> 
> 时间：2012-09-05T12:06:31.627
> 
> 标签：c++, inheritance, vector, base-class

我正在开发一个有怪物和龙的游戏。龙可以做怪物能做的所有事情，除了它们也会喷火。

我已经创建了一个类型为“monster”的类和一个继承自名为“dragon”的怪物的类。

然后我有一个名为“monsters”的类，它作为私有成员向量，将包含龙和怪物元素。

在主游戏循环中，如果当前元素是龙，我需要循环遍历矢量并喷火，如果它只是怪物，则什么也不做。

我尝试过使用 typeid() 但无论当前元素是普通怪物还是龙，它总是返回 monster*。

有没有办法做到这一点，或者在这种情况下甚至使用继承没有意义？龙类不继承，而是独立于怪物独立存在是否更有意义？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:11:24.357

你*可以*做这样的事情。

```
class Monster {};
class Dragon : public Monster
{
  public:
    void BlowFire() {}
}

std::vector<Monster*> monsters; // Collection of monsters

for(auto it = monsters.begin(); it != monsters.end(); ++it)
{
    Dragon* pDragon = dynamic_cast<Dragon*>(*it); // Attempt to convert pointer
    if(pDragon)
    {
       pDragon->BlowFire(); // If it is indeed a Dragon, blow fire.
    }
} 
```

但听起来你应该更好地安排你的课程。你为什么不让你所有的怪物类都有一个`Attack`方法？这样，您可以**覆盖**每种不同怪物类型的方法。

```
class Monster 
{
  public:
    virtual void Attack() {} // All monsters can attack
};

class Dragon : public Monster
{
  public:
    virtual void Attack() { // Do something special for a Dragon. }      
};

Monster myMonster;
Dragon myDragon;
myMonster.Attack(); // Generic monster attack.
myDragon.Attack(); // Special super dragon fire attack! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:08:48.593

并不是说这是最好的方法，但只是为了您的信息，如果您想要对象的运行时类型，您调用`typeid`的*指针*不起作用。`typeid` *确实*在需要时在运行时工作，但您需要取消引用指向多态类型的指针：

```
typeid(*monsterpointer) 
```

这将获得运行时类型`*monsterpointer`，无论是 a`monster`还是`dragon`.

但是，`typeid`仅用于精确比较，因此如果添加另一个`ImpairedDragon`继承自的名为的类`Dragon`，`typeid`代码将中断并且无法使用它们。因此，如果您能想到如何很好地使用一个虚函数，您可能应该使用`dynamic_cast`哪个与继承一起工作，或者甚至更好地使用一个虚函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:13:02.250

有两种可能的方法：使用虚函数或使用`dynamic_cast`. 如果`monster`有一个什么都不做的虚函数`blow_fire()`，`dragon`可以覆盖它来做任何适合龙的事情。然后你只需为所有`monster`对象调用它，龙就会喷火。使用`dynamic_cast`，代码将是这样的：

```
if (dragon *dragon_ptr = dynamic_cast<dragon*>(monster_ptr)) {
    dragon_ptr->blow_fire();
} 
```

这通常被认为是一种不好的方法，因为它不会自然生长。如果您添加了另一种可以喷火的怪物，则必须添加另一种`dynamic_cast`. 使用虚函数，新类型只会覆盖虚函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:41:37.390

如果你的容器中有怪物指针，那么公共怪物成员就是你能够以类型安全的方式通过这些指针访问的所有成员（据我的回忆）。您可能会尝试采用基于接口的设计（如 COM），以便您可以查询怪物基类的任何额外功能，即接口。我会为您提供样品，但我的午餐时间已经结束了。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-05T12:11:46.857

如何`blowFire`在基类中放置一个空（无操作）虚拟，然后在派生类中用某些东西覆盖它？

将方法重命名为或类似的通用名称会更好`specialAttack`，因此您不需要为其他类型的怪物添加类似的方法。

# ssis - Oracle 中的 Windows 排序规则

> ID：12281055
> 
> 赞同：0
> 
> 时间：2012-09-05T12:06:37.273
> 
> 标签：ssis

我是新的 SSIS，我正在构建的包涉及使用 Merge Join。在 RAW 文件和 Oracle 表之间执行连接。oracle 数据库的`NLS_SORT`and`NLS_COMP`选项是`"BINARY"`. RAW 文件，默认选择 Windows 排序规则。ORACLE 中的 Windows 排序规则等价物是什么？上述设置会起作用还是需要一些解决方法，因为我没有从 Merge Join 获得所需的结果。我什至使用过`SELECT.... ORDER BY NLSSORT(EmployeeName, 'BINARY_CI')`，但仍然得到错误的结果。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:20:26.540

在排序元素之前对两个源使用数据转换元素。为 NLS_SORT 和 NLS_COMP 两列选择相同的数据类型，现在您可以在具有新数据类型的新列上加入。

[一些关于数据转换](http://www.youtube.com/watch?v=dzfZJlN4nzI#t=4m45s)的 youtube 示例

# jquery - 将 jQuery .on() 转换为 .bind()

> ID：12281067
> 
> 赞同：0
> 
> 时间：2012-09-05T12:07:02.870
> 
> 标签：jquery

由于我使用的软件框架的限制，我必须使用 jQuery 1.6.2，但 jQuery 插件使用以下代码：

```
$('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) { } 
```

.on() 在 jQuery 1.6.2 中不可用...如何使用 .bind() 而不是 .on() 编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:10:15.143

您应该使用委托而不是绑定

```
$('body').delegate(
    '[data-toggle="tab"], [data-toggle="pill"]',
    'click.tab.data-api', 
    function (e) {
        ... 
    }
); 
```

# asp.net-mvc-3 - 使用 Ole db 读取 Excel 文件无法读取所有 excel 行

> ID：12281070
> 
> 赞同：0
> 
> 时间：2012-09-05T12:07:08.397
> 
> 标签：asp.net-mvc-3, excel, connection-string, oledb, sqlconnection

我正在制作 MVC3 应用程序，我需要使用 Ole db 连接读取 excel 文件，但它无法获取某些机器上的所有 excel 行，并且可以获取其他机器上的所有数据。以下是我的代码：

```
var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 12.0 Xml", serverPath);

            //Fill the dataset with information from the Hoja1 worksheet.
            string SqlCommand="SELECT * FROM [sheet1$] ";

            var adapter = new OleDbDataAdapter(SqlCommand, connectionString);
            var ds = new DataSet();
            adapter.Fill(ds, "results");
            DataTable data = ds.Tables["results"]; 
```

我需要知道这个问题的原因非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:39:19.323

是的！，好 QI 这次研究你的问题。还有更多是的选项，例如我看到写：

1)WindowsBase & Core 优化 -[在此输入链接描述](http://www.sadev.co.za/content/reading-and-writing-excel-2007-or-excel-2010-c-part-v-full-source-reading)

2）OpenXML SDK（从微软项目下载见链接[点击这里](http://www.microsoft.com/en-us/download/details.aspx?id=5124)，它用于MS Office读写使用XML和XSLT格式，在Win和Web应用程序中没有问题）。不，1-bad section 它适用于 MS 2007,2010，...版本。不适用于 MS 1997,2003？例如文章 - [Article-1](http://www.clear-lines.com/blog/post/OpenXML-reading-the-cells-of-a-workbook.aspx) , [Article-2](http://debugmode.net/2011/10/08/reading-excel-file-in-a-collection-using-open-xml-sdk-2-0/) , [Article-3](http://blogs.msdn.com/b/brian_jones/archive/2008/11/10/reading-data-from-spreadsheetml.aspx) ,...

，还有更多的选择......

试试热门文章！

# java - 将常量值从常量文件访问到 JSP 文件

> ID：12281077
> 
> 赞同：1
> 
> 时间：2012-09-05T12:07:34.790
> 
> 标签：java, jsp

我在 Constant.java 文件之一中有常量值，我想将该常量值访问到 jsp 文件。这怎么可能？实际上，我想将该常量值设置为某个复选框和 rediobutton 值，以便可以在单个位置进行修改。

我知道另一种方法是使用捆绑。一个属性文件，但我想从常量文件中访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:13:05.683

基本上，您只需要导入您的常量类：

```
<%@ page import="YourConstantClass"%> 
<%= YourConstantClass.YOUR_CONSTANT %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:26:47.337

如果你真的想使用 script let 标签，你可以使用

创建该类的对象。并使您的常量公开。

```
 <%
    MyClass objClass=new MyClass();

    System.out.println(objClass.YOUR_CONSTANT);
    %>

   OR 

   <%=objClass.YOUR_CONSTANT%> 
```

现在，您可以在页面的任何位置使用常量值。如果您不想创建任何对象，那么最好将成员设为静态。

# z3 - 漏洞？更改断言顺序会影响可满足性

> ID：12281085
> 
> 赞同：3
> 
> 时间：2012-09-05T12:08:00.453
> 
> 标签：z3

在 unsat 查询中更改断言的顺序后，它变为 sat。

查询结构为：

```
definitions1
assertions1
definitions2
bad_assertions
check-sat 
```

我使用 Python 的 sorted 函数对 bad_assertions 进行排序，这使得 Unsat 查询 Sat。

Z3 版本 4.0、4.1；Ubuntu 12.04

不幸的是，查询非常大，这使得它们难以调试，因此我可以提供任何其他附加信息。

这里最初是带有标记行的未饱和[查询](https://dl.dropbox.com/u/444947/posts/unsat_query.smt2)，用于混合，以及一个简单的python[脚本](https://dl.dropbox.com/u/444947/posts/lines_mixer.py)来混合查询中的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:54:10.587

我设法重现了您问题中报告的问题。这两个例子都可以满足。生成的脚本`unsat`暴露了数据类型理论中的一个错误。我修复了这个错误，该修复将在 Z3 4.2 中可用。由于这是一个健全性错误，我们将很快发布 4.2 版。`RELEVANCY=0`同时，您可以使用命令行中的选项来解决该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:33:14.880

根据您的描述，这听起来像是一个错误。sat/unsat 当然不应该依赖于排序。如果打包一个重现文件很困难，那么帮助我们调试问题的一种方法是，一旦您对触发错误的原因有信心，就是使用“open_log()”转储与 Z3 的所有交互的跟踪。您应该在对 Z3 的其他调用之前使用“open_log”。然后，我们可以在没有您的来源的情况下重播日志。

# linux - 使用 sed 替换文件中的字符串

> ID：12281086
> 
> 赞同：0
> 
> 时间：2012-09-05T12:08:00.997
> 
> 标签：linux, sed

我有数据字段格式为 YYYY-MM-DD HH:MM:SS 的文件，但我注意到导出将月份值设置为与分钟值相同。我想使用 sed 将所有行的 Month 值替换为相同的值。

我正在尝试这个，但没有奏效：

```
sed "s/-[0-9]{2,}-/-08-/g" test.txt 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:11:27.127

```
$ sed 's/^\(....\)-../\1-09/' < input 
```

输入：

```
$ cat input 
2012-52-05 09:52:00
2012-53-05 09:53:00
2012-54-05 09:54:00 
```

输出：

```
$ sed 's/^\(....\)-../\1-09/' < input
2012-09-05 09:52:00
2012-09-05 09:53:00
2012-09-05 09:54:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:26:51.123

使用 GNU sed：

```
sed -r 's/([0-9]{4})-[0-9]{2}-/\1-08-/' infile 
```

# c - 调用回调函数时程序因分段错误而崩溃

> ID：12281088
> 
> 赞同：1
> 
> 时间：2012-09-05T12:08:08.687
> 
> 标签：c, callback, segmentation-fault

我的程序在随机调用回调函数时因分段错误而崩溃。当我分析内核时，回调函数地址是 0x20202020。程序以信号 11 终止，分段错误。

```
#0  0x20202020 in ?? ()

(gdb) bt

#0  0x20202020 in ?? ()
#1  0xf775a8cf in my_function (parm_p=0x9b88020) at ../src/mewz.c:1395

(mqheader_p->mqh_callback)(mqheader_p->mqh_cbarg);

mqh_callback = 0x20202020,
mqh_cbarg = 0x20202020, 
```

这是随机发生的。我理解0x20202020不是回调函数的有效地址，但是为什么这个回调函数地址随机指向一个无效地址。任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:26:31.913

回调函数指针可能已被覆盖，或者正在从甚至没有正确分配和初始化的内存中使用。

有点有趣的是，0x20 是空格字符的 ASCII 码。

要做的事情：

1.  检查周围数据 `mqheader_p`点分配的代码。
2.  在调试器中运行程序，并在函数指针上设置观察点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:28:38.757

我的猜测是缓冲区溢出。因为 0x20 恰好是 ASCII 空间，所以我认为这是覆盖地址的字符串的一部分。看看你对 sprintf 等的使用。

您可以在之前和之后记录内存，这可能会给您更多线索，哪个字符串可能被覆盖。

注意：0x20202020 是四个字节 0x20 0x20 0x20 0x20 或 4 个连续的空格字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:59:42.210

要解决此类问题，我认为您可以在第一次初始化 mqh_callback 后打印出 mqh_callback 值，而另一个打印输出应该在您调用回调之前。另一种是在 mqh_callback 的地址上使用写断点。

这种错误可能来自一些指针技巧操作，例如缺少初始化、缓冲区溢出等。

# javascript - 在文本框中搜索关键字时，我得到以前的结果作为输出

> ID：12281093
> 
> 赞同：0
> 
> 时间：2012-09-05T12:08:31.353
> 
> 标签：javascript, asp.net-ajax

主页表格

```
<form id="form1" runat="server">
    Search your keyword
    <asp:TextBox ID="search" onkeydown="javascript:doAJAX(this.value)"  runat="server">
    </asp:TextBox>
</form> 
```

这是文本框搜索关键字的代码。当一个键被按下时，我的代码正在发送上一个输入的键。如何获取当前密钥？该`doAJAX`函数又调用另一个 aspx 页面并填充此页面。

```
Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)

    Try
        'Response.ContentType = "application/xhtml+xml"
        'Build CategoriesList
        Dim strSQL As String
        Dim Mytable As DataTable
        strSQL = "exec GetAJAXSearchResults '"
        strSQL &= Request("keyword")
        strSQL &= "', " & AppSettings("SiteId")
        Mytable = myLib.GetData(strSQL)

        For Each row As DataRow In Mytable.Rows
            'strChartList &= row.Item("title") & "<br/>"
            strChartList &= row.Item("PID") & "  " & row.Item("title") & "<br/>"
        Next row

        strChartList &= "</p>" 
```

这是具有过程详细信息的 aspx 代码...我尝试在 for 之前放置一个 if 语句..但没有工作..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:15:03.660

更改`onkeydown`为，`onkeyup`以便在内容更改后触发

请参阅此[链接](http://www.quirksmode.org/dom/events/keys.html)。事件顺序：keydown（符号尚未插入）、keypress（符号插入的时刻）、keyup - 符号插入后

```
'Response.ContentType = "application/xhtml+xml"
    'Build CategoriesList
    Dim strSQL As String
    Dim Mytable As DataTable
    strSQL = "exec GetAJAXSearchResults '"
    strSQL &= Request("keyword")
    strSQL &= "', " & AppSettings("SiteId")
    strChartList &= "<p>" // see no opening tag in your code.
    If Not String.IsNullOrEmpty(Request("keyword")) And Request("keyword").Length() > 1 Then
      Mytable = myLib.GetData(strSQL)

       For Each row As DataRow In Mytable.Rows
          'strChartList &= row.Item("title") & "<br/>"
          strChartList &= row.Item("PID") & "  " & row.Item("title") & "<br/>"
      Next row
    End If
    strChartList &= "</p>" 
```

应该像上面那样。对不起，如果语句不是来自 VB，我只是不记得它在 VB 中应该是什么样子的细节。希望你能把 C# if 翻译成 VB if

# android - Android 语言环境支持

> ID：12281096
> 
> 赞同：0
> 
> 时间：2012-09-05T12:08:46.713
> 
> 标签：android, locale

如何将新的语言环境添加到 android. 我正在寻找一种安装日语的方法，以便手机将 JAPAN 或 JAPANESE 报告为区域设置。我发现像 simeji 这样的应用程序增加了日语键盘支持。但无法弄清楚如何为特定语言安装新的语言包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:48:08.177

您可以使用以下代码覆盖 Android 设备的语言设置：

```
Configuration config = new Configuration();
Locale locale = new Locale("ja");
        Locale.setDefault(locale);

        config.locale = locale;
        ((Activity) c).getBaseContext().getResources()
            .updateConfiguration(config, null); 
```

如果您说它隐藏在操作系统中并且您的用户无法选择它，这可能会起作用。

但是如果设备没有安装这种语言，就不可能达到你的目的。您不能只在设备上安装一种新语言。

编辑：如果您将此代码添加到您的应用程序的开始，尽管系统语言，电话仍将报告为日语。因此，它将使用您的“values-ja”例如。

安装 SystemLanguage 仅对 SystemValues 很重要，例如预设提交按钮。

因此，您可以让手机表现得像日本人，而无需了解任何日语。它只会占用您的日语资源。

可能只有一个问题，如果系统没有安装日文键盘，您必须创建自己的键盘。

见[http://tutorials-android.blogspot.de/2011/06/create-your-own-custom-keyboard-for.html](http://tutorials-android.blogspot.de/2011/06/create-your-own-custom-keyboard-for.html)

如果这真的适用于日语，我不是 100%，因为我不知道那些不能选择日语的手机是否知道如何绘制日语字母，但他们应该能够。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:12:24.943

你想看看[Android Localization](http://developer.android.com/guide/topics/resources/localization.html)。

# ant - 如何将 VM 属性复制到 ANT 中的 JUnit 任务？

> ID：12281099
> 
> 赞同：3
> 
> 时间：2012-09-05T12:08:49.240
> 
> 标签：ant, junit

作为 JUnit 测试（从 ANT 执行）的一部分，我需要访问相当多的属性，这些属性不仅依赖于环境，而且还可以从一次运行更改为下一次运行。为了不影响可能使用相同 build.xml 的众多其他开发人员中的任何一个，我想在命令行上使用`-D`标志定义这些属性（它们很容易使用脚本填充）。阅读`<junit>`ant 中的任务时，我认为这些属性很容易复制到使用`clonevm`标志运行 JUnit 测试的 VM，但这似乎不起作用。一个简单`<echo>`的`<junit>`调用前确认属性设置正确，然后我执行以下 JUnit 测试：

```
<junit
    printsummary="on" showoutput="true" timeout="${tests.timeout.value}"
    haltonfailure="false" errorproperty="test.error.occurred"
    haltonerror="false" failureproperty="test.failure.occurred" forkmode="perTest"
    maxmemory="${project.junit.maxmemory}" clonevm="true">
    <jvmarg line="${project.test.vmargs}"/>
    <sysproperty key="java.io.tmpdir" value="${java.io.tmpdir}"/>
    <formatter type="xml" usefile="true"/>
    <classpath>
        <path refid="build.test.classpath"/>
    </classpath>
    <batchtest fork="yes" todir="${test.rpt.dir}">
        <fileset dir="${test.bin.dir}">
            <include name="**/${test.classes.run}.class"/>
            <includesfile name="${test.run.includesfile}"/>
            <!-- ignore inner classes -->
            <exclude name="**/*$*.class"/>
        </fileset>
    </batchtest>
</junit> 
```

然后，我尝试使用`System.getProperty("property");`但总是获取 null 来读取属性值。我想我一定是做错了什么，所以属性不会发送到 JUnit VM，或者我没有正确读取它。有任何想法吗？我想我可以解决这个问题（使用脚本编写一个临时属性文件，然后从测试中读取它），但如果可能的话，我仍然想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:18:57.550

尝试使用嵌套的 syspropertyset 元素。

查看[junit文档](http://ant.apache.org/manual/Tasks/junit.html)

# android - 需要Android 9patch软件帮助

> ID：12281103
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:05.867
> 
> 标签：android, nine-patch

我正在尝试创建九个补丁`drawable`。我创建了一个带有白色边框的图像，然后在`Draw9patch`软件中打开它，如下所述：

*   [http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)
*   [http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

我不明白我应该做什么。我在它周围画了一些黑色边框，当我在我的应用程序中尝试使用它时，它给了我错误。我试图在它周围画一个红色边框，它也给出了九个补丁无效的相同错误。

有时九个补丁的区域显示为粉红色，有时显示为绿色。我不明白这是什么意思，任何地方都没有解释。

1.  如果九个补丁无效，我怎么知道（当然是在编译应用程序之前！）？
2.  你知道有什么好的九补丁教程，解释的不仅仅是如何打开九补丁软件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:12:17.927

9Patch 图像没有什么复杂的，让我通过示例向您解释（图像） ![在此处输入图像描述](../Images/1515bb484a0e6bd4559d1d1a98f72f58.png)

`Top`和`Left`部分是可拉伸区域，当您的屏幕尺寸增加时，这部分会增加

您可以在图像的第一部分看到粉红色的虚线框，显示`this`部分将调整大小。

`Bottom`和`Right`部分用于内容填充，您的内容将仅驻留在此部分中（保留您的内容区域）。

您可以在图像的第二部分看到粉红色虚线框，显示`this`部分用于您的内容（字符串或等）。

下图给出了要遵循的一般标准。

![在此处输入图像描述](../Images/3b141032f9bd723defad6ab2457dd35e.png)

*注意：将那些具有统一颜色和形状（不是复杂曲线）的图像制作 9 块。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:11:48.787

9 个补丁图像是定义了可拉伸区域的图像。

这些区域被定义在该区域周围的一个特殊的 1 像素宽的边框中。在此边框的顶部和左侧添加黑色像素，以描述图像可以水平和垂直拉伸的位置。

[在这里寻找创建九个补丁图像](http://www.androiddom.com/2011/05/android-9-patch-image-tutorial.html)。

# javascript - 比较逗号分隔的字符串

> ID：12281104
> 
> 赞同：-2
> 
> 时间：2012-09-05T12:09:09.897
> 
> 标签：javascript, jquery

我有 2 个字符串

```
string1="fruit,animal,vehicle";
string2="plane,fruit,culture,animal"; 
```

因此，如果我比较 string1 和 string2 它应该说 true，因为fruit,animal 存在于两个字符串中的字符串中，否则如果不存在则为 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:17:20.203

将数组 1 中的每个元素与数组 2 中的每个元素进行比较可能会非常慢，因为运行时间呈二次方增长。

该算法如何查找重复项：

1.  连接两个数组 - 常量运行时
2.  sort() 结果数组 - 运行时间取决于 javascript 引擎使用的算法，但通常应该是 O(n log n)
3.  迭代它，将每个元素与先行者进行比较 - O(n) 运行时

请注意，当输入字符串本身可能存在重复项时，需要使用相同的技术预先将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:12:51.267

```
function compare(string1, string2) {
    var arr1 = string1.split(",");
    var arr2 = string2.split(",");
    for (var i = 0; i < arr1.length; i++) {
        for (var j = 0; j < arr2.length; j++) {
            if (arr1[i] === arr2[j]) {
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:44:54.370

```
var string1="fruit,animal,vehicle",
string2="plane,fruit,culture,animal";
function compare(string1, string2){
     var s = string1.split(",");
     for(var k = 0 ;k < s.length; k++){
        if(string2.indexOf("," + s[k] + ",") )
        { 
          return true;
        }
     }
     return false;
}

compare(string1, string2); 
```

# iphone - 调用 RESTFul API - HTTP POST 限制

> ID：12281105
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:10.143
> 
> 标签：iphone

我调用了一个 RESTFul API，但是 HTTP POST 有一个限制，因为我正在发送 JSON，并且它正在切断部分 JSON 请求......我能做些什么来解决这个问题？

RESTFUl API 是用 PHP 编写的，并通过 HTTP POST 请求接受变量中的 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:11:36.680

您可以修改服务器上从 PHP 接受的请求的大小。

看这个讨论[post request的大小限制是多少？](https://stackoverflow.com/questions/2364840/what-is-the-size-limit-of-a-post-request)

# java - 为什么不能在类的构造函数中调用静态方法？

> ID：12281108
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:25.027
> 
> 标签：java, methods, static, constructor, undefined

显然我的 Java 暂停时间太长了......

我有以下课程：

```
public class TimeLine {

    public static final String TIME_LINE_DATE_FORMAT = "dd.MM.yyyy";

    public TimeLine(Context context, LinearLayout layout)
    {
        this.context = context;
        this.layout = layout;           
    }

    // some methods and stuff

    public static Date getDateFromString(String dateString)
    {
        SimpleDateFormat s = new SimpleDateFormat(TIME_LINE_DATE_FORMAT);
        try {
            return s.parse(dateString);
        } catch (ParseException e) {            
            e.printStackTrace();
            return null;
        }
    }
} 
```

我经常使用将字符串解析为日期，这就是为什么我希望这个函数只有 1 次和静态。

我尝试像这样访问它：

```
public class TrackedValue {

    private double value;
    private String unit;
    private Date date;

    public TrackedValue()
    {       
    }

    public TrackedValue(Date date, String unit, double value)
    {
        this.date = date;
        this.unit = unit;
        this.value = value;
    }

    public TrackedValue(String dateString, String unit, double value)
    {      
        this.date = TimeLine.getDateFromString(dateString); //Here's the error
        this.unit = unit;
        this.value = value;
    }

    // some getters and setters here

} 
```

这给我带来了错误： *方法 getDateFromString(String) 未定义类型时间线*

呃……为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:20:52.197

查看您的导入部分。

你的时间线类是在那里引用的，还是你已经导入到应用程序的其他 jar 中的另一个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:28:24.517

`Why can't I call a static method in the constructor of a class?`

***您可以在构造函数中调用静态方法，***除非您无权访问诸如访问修饰符限制之类的方法，否则没有人可以阻止您。

`import`您的陈述可能有问题。请检查`TimeLine` 课程是否存在或是否正确导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:33:36.107

dah... TimeLine 没有保存，因此没有编译...我现在觉得有点愚蠢：-/ 谢谢大家！

# javascript - 单击带有按钮的字段的复制值

> ID：12281111
> 
> 赞同：1
> 
> 时间：2012-09-05T12:09:28.937
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 创建一个简单的按钮。当用户点击一个按钮时，'timestart' 的值被复制到 'timeend' 中。

```
<input id="timestart" name="timestart" value="" /> 
<!-- need button here: Click here to copy/paste value into timeend field -->
<input id="timeend" name="timeend" value="" /> 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:11:49.493

在那里放一个按钮，给它一个 ID 或其他一些定义特征，然后简单地设置`timeend`它被点击时的值。此示例假定某个元素的 ID 为“yourButton”：

```
$("#yourButton").on("click", function () {
    $("#timeend").val($("#timestart").val());
}); 
```

参考：

*   [`.on()`](http://api.jquery.com/on/)
*   [`.val()`](http://api.jquery.com/val/)

这是非常简单的东西。我建议花一些时间阅读 jQuery 文档，以了解可供您使用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:12:06.993

像这样做

```
 $('#btnSubmit')​.click(function(){
        $('#timeend').val($('#timestart').val());
    }); 
```

​<a href="http://jsfiddle.net/F5Ehg/" rel="nofollow">现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:14:18.403

HTML

```
<input id="timestart" name="timestart" value="" />
<button id='copy'>Copy</button>
<input id="timeend" name="timeend" value="" /> 
```

jQuery

```
$(function(){
    $("#copy").on("click",function(){
      $("#timeend").val($("#timestart").val())   
    })
}) 
```

**[演示](http://jsfiddle.net/CQJtR/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:26:47.530

尝试这个：

```
$('.button').on('click', function(){
    var val = $('#timestart').val();
    $('input#timeend').val(val);
}); 
```

# c++ - 如何从 ip 地址或 sockaddr_in 结构 (C++/WinAPI) 中获取主机名？

> ID：12281113
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:31.970
> 
> 标签：c++, winapi, sockets, winsock2

如何在 C++（WinAPI）中从 IP 地址或 sockaddr_in/sockaddr_in6/sockaddr 结构（或其他）获取主机名（如“www.google.com”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:11:42.433

您正在寻找[`getnameinfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738532%28v=vs.85%29.aspx)功能。MSDN 页面上包含的示例。

# internet-explorer-7 - PHP.js unserialize() 错误 IE7

> ID：12281119
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:51.960
> 
> 标签：internet-explorer-7, jsonserializer, phpjs

我尝试使用 PHP.js 的序列化包序列化对象数据以通过 php 保存到文件中。

Chrome：很好 FF：很好 IE9：在兼容模式下很好 IE9（本质上是 IE7）：不好。

来自控制台的错误：

```
SCRIPT5022: Exception thrown and not caught 
serialize.min.js, line 144 character 55 
```

序列化后的数据基本上是这样的：

```
a:180:{s:40:"Aleksis Kiven tie 15<br>04200 Kerava<br>";a:2:{i:0;d:60.4012598;i:1;d:25.09659910000005;} 
```

未序列化：

```
{"Aleksis Kiven tie 15<br>04200 Kerava<br>": [60.4012598, 25.09659910000005]} 
```

处理缓存的 Javascript 如下所示：

```
function saveCache(data) {
    sdata = serialize(data);
    $.ajax({
        type: 'POST',
        url: 'http://localhost/foobar/files/coordinates.php',
        data: {
            'do': 'write',
            'data': sdata
        }
    });
} 
```

我正在按地址将地理编码结果缓存到文本文件中。

如果我没有道理，请多问。

**主要编辑：**我更正了所指出的示例。同样重要的是问题确实发生了变化。这实际上不是 serialize() 的问题，而是 unserialize() 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:08:02.860

毕竟是我自己想出来的。

当我仔细观察时，并不是 serialize() 导致错误，而是 unserialize() 与我在同一个包中。

在某些时候，缓存损坏了，由于某种原因，在 comp-mode 下的 IE9 是我测试过的唯一不能容忍它的浏览器。缓存损坏的原因是堆叠 utf8_encodes/decodes 开始搞砸了。

它是这样的：

*   缓存是使用 serialize() 构建和序列化的。一切都好。
*   PHP 检查数据是否真的是 UTF-8 并相应地执行 utf8_encode。保存数据。一切都好。
*   下一页加载。PHP 使用 AJAX 返回存储的数据。发送一个 UTF-8 标头以防万一。数据是 unserialize()d 并相应地处理。一切都好。
*   缓存可能会更新新内容和 serialize()d。警告序列化数据会产生一个惊喜：中文字符和损坏代替 åäö！

解决方案在于 unserialize() 执行**不必要**的utf8_decode()。该页面是 UTF-8。我所有的 javascript 文件都是 UTF-8。缓存数据多次确保为 UTF-8。所以不存在也没有任何理由来解码 UTF-8。我不是 100% 确定这*究竟是*如何剔除数据的，但注释掉 utf8_decode 解决了这个问题。

我对现代浏览器的容错能力有点失望。它太高了。不过还好我想通了。

# visual-studio-2010 - VS2010 FTP 从多台机器发布

> ID：12281120
> 
> 赞同：0
> 
> 时间：2012-09-05T12:09:55.413
> 
> 标签：visual-studio-2010, ftp, publishing

我*认为*这个问题是由多台机器发布引起的。

当我单击发布时，我在输出/构建窗口中得到以下信息

```
将所有文件复制到下面的临时位置以进行打包/发布：
obj\Release\Package\PackageTmp。
发布文件夹/...

========== 构建：6 个成功或最新，0 个失败，0 个跳过 ==========
========== 发布：1 成功，0 失败，0 跳过 ==========

```

即它不迭代要发布的文件夹 - 当它工作时，“发布文件夹/...”列出了项目中的每个文件夹。

obj\Release\Package\PackageTmp 是用可发布的内容正确构建的——我最终通过 FTP 手动将其发布。

一旦我从多台机器（即多台开发人员，或一台开发多台机器，通过 git 共享代码，多台发布者）发布项目，这似乎就开始了，但这可能是巧合。

有什么想法可以解决/重置此问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:34:02.923

我有同样的问题。我正在一台机器上开发一个网络应用程序，它部署得很好。当我在路上时，我拉了源代码，它不会发布。我注意到我忘记将 Properties\PublishProfiles 文件夹签入到 SVN，所以我不得不重新创建它。我相信问题出在 Profile.pubxml.user 文件上。它需要包含标签中的所有文件。我刚刚创建了一个新配置文件，然后将 pubxml.user 复制到与损坏的配置文件匹配的文件中。

# eclipse - Eclipse 编译

> ID：12281121
> 
> 赞同：0
> 
> 时间：2012-09-05T12:10:10.687
> 
> 标签：eclipse, compilation

eclipse 如何决定编译哪个文件，不编译什么文件？

我有一个非常大的项目，需要花费大量时间来编译，但是当我更改单个文件时，有时会发生整个项目开始编译，浪费我们宝贵的时间。

任何人都可以帮助修复这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:21:26.980

启用自动构建后，Eclipse 会跟踪哪些项目文件已更改并将此增量传递给项目构建器（项目属性 -> 构建器）。构建者有责任确定给定增量必须进行多少工作。一些构建器（如 Java Builder）非常成熟，可以很好地做到这一点而不会浪费周期。其他建设者没有那么好。

首先检查您在项目中遇到所描述行为的构建器。下一步更加困难。您需要弄清楚哪个建筑商对浪费的建筑负责。如果不进行调试，这不容易弄清楚，但是您可以将有此问题的项目中的构建器与没有此问题的项目中的构建器进行比较。一旦您确定了可疑的构建器，请联系相关插件的提供商。

# wpf - 使用 MVVM 替代通用用户控件

> ID：12281122
> 
> 赞同：0
> 
> 时间：2012-09-05T12:10:10.760
> 
> 标签：wpf, generics, design-patterns, mvvm, user-controls

> **可能重复：**
> [如何在 mvvm 模式中定义用户控件？](https://stackoverflow.com/questions/9544729/how-to-define-the-usercontrols-in-mvvm-pattern)

我正在尝试使用 MVVM 编写我的第一个 WPF 应用程序。我创建了一个包含 2 个部分的用户控件，一个`DataGrid`和一个详细信息视图（在 中显示所选行的详细信息`DataGrid`）。这个控件假设加载和显示不同的数据模型（如客户、产品等），但由于它似乎无法使用通用用户控件，我发现我的用户控件无用。坦率地说，我开始认为 MVVM 模式中的任何用户控件都是无用的。在我看来，是否有任何替代方法可以防止对相同`DataGrid`视图和详细视图进行不必要的复制/粘贴？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:04:30.840

首先，*可以*使用通用用户控件。但除此之外，它可能不是你想要的。

您需要做的是创建一个可以重复使用的用户控件。有几种选择：

1.  创建一个基本用户控件并允许视图从中派生
2.  创建一个基于当前视图模型自行组合的视图（推荐）

要为特定用户控件创建视图模型，包括延迟加载视图模型，您可以使用[Catel](http://catel.codeplex.com)。有关详细信息，请参阅[此文档](http://catel.catenalogic.com/index.htm?gs_viewscontrols_nested_user_controls_problem.htm)。

**免责声明：**我是 Catel 的开发人员之一，但如果其他人知道其他方式，我很高兴听到他们的声音。

# django - Modelforms：匹配查询不存在并发布数据

> ID：12281128
> 
> 赞同：0
> 
> 时间：2012-09-05T12:10:19.403
> 
> 标签：django

我有一个字段，用户可以在其中选择车辆的车牌，根据这个选择，我希望从车辆表（查询：）中填充一个表单`vehicle = Vehicles.objects.get(plate=plate)`。我用这个视图管理这个：

```
def vehicles_archive(request):
    user = request.user
    user_id = user.id 
    u_id = user_id

    vehicles = Vehicles.objects.filter(own_id1 = u_id)
    if request.method == 'POST':
        plate = request.POST.get('searchPlate')
        vehicle = Vehicles.objects.get(plate=plate)

        form = VehiclesForm(data=request.POST, instance=vehicle, own_id=u_id)
        if form.is_valid():
            form.save()
            return render_to_response('success.html', locals(), context_instance= RequestContext(request))
        else:
            vehicles = Vehicles.objects.filter(own_id1 = u_id)
            vehicle = Vehicles.objects.get(plate=plate)
            form = VehiclesForm(instance=vehicle, own_id=u_id)

    return render_to_response('vehiclesArchive.html', locals(), context_instance= RequestContext(request)) 
```

一切似乎都工作正常，但是当我编辑表单字段并尝试提交我得到的表单时：车辆匹配查询不存在。并表示用车牌查询。我使用的逻辑一定有错误，但我该如何解决？或者有没有更好的方法来实现上述功能？

编辑：

```
class Vehicles(models.Model):
    id = models.DecimalField(primary_key=True, unique=True, max_digits=127, decimal_places=0)
    plate = models.CharField(max_length=80, unique=True)
    tempflag = models.BooleanField()
    vht_id = models.ForeignKey('Vehtypes', null=True, db_column='vht_id',  blank=True)
    vlength = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    vwidth = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    vheight = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    vnetweight = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    vmaxload = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    axleno = models.DecimalField(null=True, max_digits=127, decimal_places=0, blank=True)
    chassis = models.CharField(max_length=160, blank=True)
    man_id = models.ForeignKey('Manufacturers', null=True, blank=True, db_column='man_id')
    own_id1 = models.ForeignKey('Owners', null=True, db_column='own_id1', related_name='veh_own_id1', blank=True)
    own_id2 = models.ForeignKey('Owners', null=True, db_column='own_id2',related_name='veh_own_id2', blank=True)
    ins_id = models.ForeignKey('Insurancecompanies', null=True, blank=True, db_column='ins_id')
    modelno = models.CharField(max_length=160, blank=True)
    checkflag = models.BooleanField()

    def __unicode__(self):
        return self.plate 

    class Meta:
        db_table = u'vehicles'
        ordering = ['plate'] 
```

而 searchPlate 是一个随机字段，仅用于获取用户的选择。我认为所有者模型定义并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:28:58.790

我不明白的东西：

> 我有一个用户选择车辆牌照的字段

这发生在哪里？在您发布的视图代码中？

因为这似乎是一个两步过程，而不是一个。

a) 用户通过`vehicles_archive`视图从列表中进行选择。此视图仅处理 GET 请求，因为它仅用于显示此用户拥有的车辆。这个视图的 url 就像`r'^vehicles/$'`. 该列表将是一组条目，每个条目都包含指向相应车辆的链接。例如`/vehicles/YKH4034/`。所以我们需要在 urls.py 中添加另一个 url 正则表达式`r'^vehicles/(?P<plate>\w{80})/$'`。以及处理此 url 的不同视图。例如命名`vehicles_archive_detail`。

b) 用户选择了他想要编辑的车辆，现在由`vehicles_archive_detail`. 此视图处理 GET 和 POST 请求。GET 用于显示特定车辆的表单，而 POST 用于所有者实际修改（提交表单）车辆时。

不过，我在您的代码中看不到这种逻辑。或者，也许我对您的问题还不够了解。

**更新：**

您不需要 GET 参数（searchPlate），也不需要`search`按钮。它不是一种形式。您的 vehicle_archive 视图将具有类似于以下内容的模板：

```
{% extends 'somebaseview.html' %}

{% block content %}
    <ul>
    {% for vehicle in owner_vehicles %}
        <a href="/vehicles/{{ vehicle.plate }}/"> {{ vehicle.plate }} </a>
    {% endfor %}
    </ul>
{% endblock %} 
```

因此，用户只需单击一个链接，即可将他带到他想要编辑的特定车辆。

**更新 2：**

你说你需要一个下拉菜单和一个搜索按钮。但是我没有看到搜索功能。有没有可能找不到表格？当他“点击”搜索时，是否有可能会有多个结果（车辆）？

无论如何，如果那是您真正需要的。我看到了两种方式：

1) 用 Ja​​vascript 和 AJAX 做所有这些事情。虽然我很难在这里展示一个例子，因为它会很长而且超出你原来问题的范围。

2) 使用 django 的[表单向导](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)工具。

在任何情况下，您都可以首先确保第二步（用户查看/编辑特定车辆）有效，然后决定如何从第 1 步过渡到第 2 步。即 Ajax 或表单向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:35:34.363

问题是您正在通过其 id 而不是对象本身来查找外键。例如：

```
vehicles = Vehicles.objects.filter(own_id1 = u_id) 
```

要与 进行比较`own_id1`，您需要传递一个`User`实例，而不是整数。如果您想通过 id 查找它，那么您需要执行以下操作：

```
vehicles = Vehicles.objects.filter(own_id1_id = u_id) 
```

这也说明了为什么不应该在名称中使用`_id`in 来命名外键。在数据库级别，Django 自动附加`_id`.

# java - BouncyCastle RSA 解密：“数据哈希错误”？

> ID：12281130
> 
> 赞同：2
> 
> 时间：2012-09-05T12:10:20.700
> 
> 标签：java, bouncycastle

如果我的整个代码都在一个方法中，我的应用程序就可以正常工作。但是当它以不同的方法，在不同的时间执行时，就会`InvalidCipherTextException: Data hash wrong`发生。我猜这个错误可能是因为填充，但不确定。

加密数据的功能（公钥在证书中）：

```
public byte[] Encrypt(byte[] data)
{
  byte[] bCertificate = Value;
  //Get Public Key from the certificate
  X509CertImpl x509Cert = new X509CertImpl(bCertificate);
  PublicKey publicKey = x509Cert.getPublicKey();
  RSAPublicKey rsaPublickey = (RSAPublicKey) publicKey;

  byte[] cipher = new byte[256];
  byte[] paddingData = new byte[]{(byte) 0x9a, (byte) 0x72, (byte) 0x7f, 
      (byte)0x3b, (byte) 0xe4, (byte) 0x9d, (byte) 0x47, (byte) 0x03, 
      (byte) 0x2f, (byte) 0x15,(byte) 0x5f, (byte) 0x2f, (byte) 0x8f, 
      (byte) 0xc0, (byte) 0xf4, (byte) 0x39};

  byte[] tempData = null;

  AsymmetricBlockCipher eAsymmetricBlockCipher = new OAEPEncoding(
      new RSAEngine(), new SHA256Digest(), paddingData);
  BigInteger eModulus = new BigInteger(1, rsaPublickey.getModulus()
      .toByteArray());
  BigInteger eExponent = new BigInteger("1", 16);
  RSAKeyParameters rsaKeyParams = new RSAKeyParameters(false, eModulus, 
      eExponent);

  eAsymmetricBlockCipher.init(true, rsaKeyParams);
  tempData = eAsymmetricBlockCipher.processBlock(data, 0, data.length);            

  Cipher encryptionCipher = Cipher.getInstance("RSA/ECB/NoPadding");
  encryptionCipher.init(Cipher.ENCRYPT_MODE, publicKey);
  cipher = encryptionCipher.doFinal(tempData );

  return cipher;
} 
```

解密函数（私钥在 PKCS11 智能卡令牌中）：

```
public byte[] Decrypt(byte[] cipher)
{
  byte[] paddingData = new byte[]{(byte) 0x9a, (byte) 0x72, (byte) 0x7f, 
      (byte)0x3b, (byte) 0xe4, (byte) 0x9d, (byte) 0x47, (byte) 0x03, 
      (byte) 0x2f, (byte) 0x15,(byte) 0x5f, (byte) 0x2f, (byte) 0x8f, 
      (byte) 0xc0, (byte) 0xf4, (byte) 0x39};
  CK_ATTRIBUTE[] privateKeyAttributes = new CK_ATTRIBUTE[2];
  privateKeyAttributes[0] = new CK_ATTRIBUTE();
  privateKeyAttributes[0].type = PKCS11Constants.CKA_CLASS;
  privateKeyAttributes[0].pValue = PKCS11Constants.CKO_PRIVATE_KEY;

  privateKeyAttributes[1] = new CK_ATTRIBUTE();
  privateKeyAttributes[1].type = PKCS11Constants.CKA_KEY_TYPE;
  privateKeyAttributes[1].pValue = PKCS11Constants.CKK_RSA;

  long hRsaPrivateKey = 0;
  pkcs11.C_FindObjectsInit(session, privateKeyAttributes);
  hRsaPrivateKey = pkcs11.C_FindObjects(session, 1)[0];
  pkcs11.C_FindObjectsFinal(session);

  CK_MECHANISM decryptionMechanism = new CK_MECHANISM();
  decryptionMechanism.mechanism = PKCS11Constants.CKM_RSA_X_509;
  decryptionMechanism.pParameter = null;

  pkcs11.C_DecryptInit(session, decryptionMechanism, hRsaPrivateKey);
  byte[] decryptedData = new byte[256];
  int rv = pkcs11.C_Decrypt(session, cipher, 0, cipher.length, decryptedData, 
      0, 256);

  AsymmetricBlockCipher dAsymmetricBlockCipher = new OAEPEncoding(
      new RSAEngine(), new SHA256Digest(), paddingData);
  BigInteger dModulus = new BigInteger(1, 
      (byte[]) privateKeyAttributeModulus[0].pValue);
  BigInteger dExponent = new BigInteger("1", 16);
  rsaKeyParams = new RSAKeyParameters(true, dModulus, dExponent);

  dAsymmetricBlockCipher.init(false, rsaKeyParams);
  byte[] data = dAsymmetricBlockCipher.processBlock(decryptedData, 0, 
      decryptedData.length);

  return data;
} 
```

# asp.net - 如何获取 ajaxcontroltoolkit 2012 版本的源代码？

> ID：12281133
> 
> 赞同：0
> 
> 时间：2012-09-05T12:10:47.537
> 
> 标签：asp.net, ajax, ajaxcontroltoolkit

我想要 ajaxcontroltoolkit 2012 的源代码。我尝试了很多，但我只得到二进制文件，似乎没有任何源代码。任何人都可以帮助我如何获取它的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:13:31.740

您可以从其[codeplex 页面下载源代码或各种版本](http://ajaxcontroltoolkit.codeplex.com/)

在[源代码选项卡](http://ajaxcontroltoolkit.codeplex.com/SourceControl/list/changesets)中，右侧有下载源代码的链接。

![下载的源屏幕截图](../Images/19d6ff7d61aa9a7d956eb73c06d4c004.png)

# android - wxPython 脚本因未知原因挂起

> ID：12281134
> 
> 赞同：-2
> 
> 时间：2012-09-05T12:10:49.483
> 
> 标签：android, python, wxpython

这是我的脚本。由于某种原因，它不再起作用了。它以前做过。有人可以追踪任何潜在的错误吗？

```
 #! /usr/bin/env python

import wx
import os
TRAY_TOOLTIP = 'jmtpfs mounter'

def create_menu_item(menu, label, func):
    item = wx.MenuItem(menu, -1, label)
    menu.Bind(wx.EVT_MENU, func, id=item.GetId())
    menu.AppendItem(item)
    return item

class TaskBarIcon(wx.TaskBarIcon):
    def __init__(self):
        super(TaskBarIcon, self).__init__()
    self.off=wx.IconFromBitmap(wx.Bitmap("android_off.png"))
    self.SetIcon(self.off)
        self.Bind(wx.EVT_TASKBAR_LEFT_DOWN, self.on_left_down)
    def CreatePopupMenu(self):
        menu = wx.Menu()
        create_menu_item(menu, 'Mount', self.mount)
        create_menu_item(menu, 'UnMount', self.unmount)
        menu.AppendSeparator()
        create_menu_item(menu, 'Exit', self.on_exit)
        return menu
    def on_left_down(self, event):
        print 'Tray icon was left-clicked.'
    def mount(self, event):
        retvalue = os.system("jmtpfs ~/Nexus")
        print retvalue
    self.on=wx.IconFromBitmap(wx.Bitmap("android_on.png"))
    self.SetIcon(self.on)
    def unmount(self, event):
        retvalue = os.system("fusermount -u ~/Nexus")
    print retvalue
    self.off=wx.IconFromBitmap(wx.Bitmap("android_off.png"))
    self.SetIcon(self.off)
    def on_exit(self, event):
        wx.CallAfter(self.Destroy)

def main():
    app = wx.PySimpleApp()
    TaskBarIcon()
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

运行跟踪给出了这个：

mounter.py(17): self.SetIcon(self.off) --- modulename: _windows, funcname: SetIcon _windows.py(2174): return *windows* .TaskBarIcon_SetIcon(*args, **kwargs) mounter.py(18) ：self.Bind（wx.EVT_TASKBAR_LEFT_DOWN，self.on_left_down）---模块名称：_core，funcname：绑定_core.py（3916）：断言isinstance（事件，wx.PyEventBinder）_core.py（3917）：断言处理程序是无或 callable(handler) _core.py(3918): assert source is None or hasattr(source, 'GetId') _core.py(3919): if source is not None: _core.py(3921): event.Bind(self , id, id2, 处理程序)
--- 模块名：_core，funcname：绑定 _core.py(3994)：for et in self.evtType：_core.py(3995)：target.Connect(id1, id2, et, function) --- 模块名：_core, funcname: Connect _core.py(3875): return *core* .EvtHandler_Connect(*args, **kwargs) _core.py(3994): for et in self.evtType: mounter.py(44): app.MainLoop() -- - 模块名称：_core，函数名称：MainLoop _core.py(8010)：wx.PyApp.MainLoop(self) --- 模块名称：_core，函数名称：MainLoop _core.py(7306)：返回*核心*.PyApp_MainLoop(*args, **夸格斯）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:12:57.373

在 PyDev 中调试您的代码时，我无法重现您的错误。但是，我发现了一大堆我必须修复的错误，因为代码甚至会执行。修复它们后，代码运行良好。

首先，您的错误表明您`self.Bind(wx.EVT_TASKBAR_LEFT_DOWN, self.on_left_down)`调用中的“处理程序”是`None`. 在这种情况下，它的意思`self.on_left_down`是`None`。但是，我们可以看到有一个 function `on_left_down(self, event)`，所以这是我第一次暗示您的代码有问题。第二个提示是堆栈跟踪似乎包含该`Bind()`调用作为 line 的一部分`self.SetIcon(self.off)`，这没有任何意义。

就在那时我注意到你的缩进很可怕。在像 Java 这样的语言中，两者之间的所有内容都是`{}`函数的一部分，因此缩进只是为了让您的代码更易于阅读。在 Python 中缩进**更为重要**。这就是你如何将某物表示为函数的一部分。你如何判断一行代码是否仍然是循环的一部分？你检查缩进。`__init__()`, `mount()`, 和`unmount()`所有包含缩进太左的行，因此甚至在运行之前`__init__()`运行，可能导致这些`None`值。

其次，您必须使用`wx.PySimpleApp`已弃用的旧教程。在代码执行之前，我必须编写自己的简单`wx.App`代码（我的整个代码`wx.App`只有 4 行，包括声明。我相信您可以找到一个简单的示例来说明如何自己执行此操作）。

最后，恳求：请永远不要**盲目**地使用您在教程中找到的代码，特别是如果您不熟悉该语言。你说你不是python程序员，那你为什么选择wxPython？你知道C吗？wxPython 基于 wxWidgets，一个 C 的 GUI 工具包。你知道 Java 吗？Java 有许多 GUI 工具包。我敢肯定，您可以用您理解的语言找到可以满足您需求的东西。通过将您不理解的代码放入您的应用程序中，您实际上只是在放入一个可能会失败的新部分，如果是这样，那么您将无法修复它。

我不认识你，也不知道你的专业知识，所以*这次*我要让你受益，但下次我需要看到你付出更多的努力，否则我不会发布答案。

祝你好运。

# java - 使用 Scalr 调整大小时，具有透明背景的 PNG 变黑

> ID：12281135
> 
> 赞同：3
> 
> 时间：2012-09-05T12:10:50.993
> 
> 标签：java, image-processing, scalr, imgscalr

我正在使用 org.imgscalr.Scalr(http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/#solve) 库来调整图像的大小，但是具有透明背景的 PNG 在调整大小时会变黑。我的代码如下所述：

```
 public void scaleImage(String originalImage, int width, int height) throws IOException {
    File imgFl = new File(originalImage);
    BufferedImage originalBufImage = ImageIO.read(imgFl);
    BufferedImage scaledImage = Scalr.resize(originalBufImage, Scalr.Method.ULTRA_QUALITY, width, height, Scalr.OP_BRIGHTER);
    File outputfile = new File(originalImage);
    String fileExtension = originalImage.substring(originalImage.indexOf(".") + 1, originalImage.length());
    ImageIO.write(scaledImage, fileExtension, outputfile);
} 
```

有人对此有任何线索吗？

谢谢， 阿布舍克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:29:44.940

我不知道为什么会这样，但假设图像中没有其他东西是黑色的，你可以用这个方法使黑色透明：

```
private static Image mct(Image im, final Color color) {
    ImageFilter filter = new RGBImageFilter() {
      // the color we are looking for... Alpha bits are set to opaque
      public int markerRGB = color.getRGB() | 0xFF000000;

      public final int filterRGB(int x, int y, int rgb) {
        if ( ( rgb | 0xFF000000 ) == markerRGB ) {
          // Mark the alpha bits as zero - transparent
          return 0x00FFFFFF & rgb;
          }
        else {
          // nothing to do
          return rgb;
          }
        }
      }; 
```

它返回一个图像，其所有 RGB 值与颜色匹配为透明。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T06:40:20.140

在创建新的 BufferedImage 时，Scalr 可能没有使用 BufferedImage.TYPE_INT_ARGB - 也许你可以要求它？

# ant - 在 Solaris 上组装本机 Hadoop 库不成功：build.xml 不存在

> ID：12281138
> 
> 赞同：2
> 
> 时间：2012-09-05T12:11:06.410
> 
> 标签：ant, hadoop, solaris

操作它同意[https://issues.apache.org/jira/browse/HADOOP-3123](https://issues.apache.org/jira/browse/HADOOP-3123)

```
root@one: /export/hadoop-1.0.1/bin# ant -Dcompile.native=true -Dnonspace.os=SunOS -Dmake.cmd=gmake clean tar 
```

结果也收到了：

```
Buildfile: build.xml does not exist!    
Build failed 
```

# iphone - 在按下 UIBarButtonItem 之前如何启用/禁用方向（旋转）？

> ID：12281139
> 
> 赞同：2
> 
> 时间：2012-09-05T12:11:08.970
> 
> 标签：iphone, ios, rotation, orientation

我在 TabBarController 中有一个带有 3 个选项卡的应用程序。在第一个选项卡上，是否可以在用户按下 NavigationBar 上的按钮时启用从纵向到横向的旋转？用户第一次不能旋转，只有当他按下一个按钮。

我正在使用 SDK iOS 6。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:26:07.350

```
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    // Return YES for supported orientations
    return allowedToRotate;

} 
```

然后`BOOL allowedToRotate;`在您的类标题中添加一个，并在您想要允许旋转时将其设置为 YES。如果您使用的是 iOS 6：

```
-(NSUInteger)supportedInterfaceOrientations {

    if (allowedToRotate)
        return UIInterfaceOrientationMaskAll;
    else
        return UIInterfaceOrientationMaskPortrait;

} 
```

这应该可以，虽然我没有尝试过......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T20:56:28.977

这对我有用......不确定它是否是最好的方法......但它有效：

```
 -(BOOL) shouldAutorotate {

// Return YES for supported orientations
return NO;

 }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
//Setting the orientation of the view.  Ive set it to portrait here.

return UIInterfaceOrientationPortrait;

 } 
```

# php - html php循环错误

> ID：12281141
> 
> 赞同：0
> 
> 时间：2012-09-05T12:11:14.533
> 
> 标签：php, html, loops

我有以下脚本，它是一个订单列表：

```
<?php
$manifest_query = tep_db_query("SELECT o.franchise_id, o.orders_id, 
    o.customers_id, o.delivery_name, o.delivery_street_address [...]");
while ($manifest = tep_db_fetch_array($manifest_query)){
?>
<tr>
<td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
<td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. 
    $manifest['delivery_street_address'] .'<br> '. 
    $manifest['delivery_city'].'<br> '. 
    $manifest['delivery_postcode'].'<br> '. 
    $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?>
</td>

<?php
$products_query = tep_db_query("select products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
while ($products = tep_db_fetch_array($products_query)) {
?>

<td><?php echo$products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . 
    '<br> ' . '&nbsp;&nbsp;'.$products['products_model'] .'<br>';?></td>
<?php
}
?>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td colspan="2"></td>
</tr>

<?php
}
?> 
```

打印`$products`变量的单元格每次都会重复，作为一个新的 td，但如果有超过 1 个产品，我需要它在一个 td 中打印所有产品。我有点糊涂了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:13:20.777

```
<td><?php
$products_query = tep_db_query("select products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
while ($products = tep_db_fetch_array($products_query)) {
?>

<?php echo$products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . 
    '<br> ' . '&nbsp;&nbsp;'.$products['products_model'] .'<br>';?>
<?php
} ?></td> 
```

只是放在外面的while循环。像上面一样，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:13:33.960

应该像将包含移出循环一样`<td></td>`简单`while()`：

```
<?php
$manifest_query = tep_db_query("SELECT o.franchise_id, o.orders_id, 
    o.customers_id, o.delivery_name, o.delivery_street_address [...]");
while ($manifest = tep_db_fetch_array($manifest_query)){
?>
<tr>
<td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
<td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. 
    $manifest['delivery_street_address'] .'<br> '. 
    $manifest['delivery_city'].'<br> '. 
    $manifest['delivery_postcode'].'<br> '. 
    $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?>
</td>
<td><!-- open here -->
<?php
$products_query = tep_db_query("select products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
while ($products = tep_db_fetch_array($products_query)) {
?>
<?php echo$products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . 
    '<br> ' . '&nbsp;&nbsp;'.$products['products_model'] .'<br>';?>
<?php
}
?>
</td><!-- and close here -->
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td colspan="2"></td>
</tr>

<?php
}
?> 
```

# eclipse - Eclipse 4.2 (Juno)：扁平化搜索树视图类似于包/项目浏览器？

> ID：12281148
> 
> 赞同：2
> 
> 时间：2012-09-05T12:11:44.457
> 
> 标签：eclipse, search, view, tree, flat

在两者中`Package Explorer`，都`Project Explorer`可以选择使用例如`[More options arrow] -> Package Presentation -> Flat`.

显示结果时搜索窗格是否有类似的选项？

如果单击`[Search pane] -> [More options arrow] -> Display as tree`然后搜索，则`Search`窗格中的结果视图将项目内搜索路径中的每个单独的文件夹显示为单独的可展开/可折叠文件夹，并且在我看来，这会在视觉上不必要地占用空间并且在导航方面也很耗时。

真诚的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:45:21.083

如果您执行 Java 搜索（或执行类似扁平化样式的操作）而不是普通文件搜索，它将自动执行此操作。

# node.js - 如何在键名中传递 mongojs 查询中的变量

> ID：12281153
> 
> 赞同：0
> 
> 时间：2012-09-05T12:11:58.993
> 
> 标签：node.js, mongodb, mongojs

我的用户集合中的每个文档如下所示： `access: { 123456789012345678901234: 3, 123456789012345678901235: 2, 123456789012345678901234: 1, 123456789012345678901236: 0 }`

我正在尝试查找所有`access.123456789012345678901234`大于 0 的记录，这就是我编写函数的方式。（值123456789012345678901234传递给参数companyid中的函数）

```
findUsersInCompany: function(companyid, callback) {
    base.db.users.find({ "access." + companyid: { "$gt": 0 } }, function(err, usersList) {
        if( err ) callback(err);
        else if( _.isEmpty(usersList) ) callback(1016);
        else callback( null, usersList );
    });
} 
```

但是，我收到一条错误消息，上面写着“意外的令牌 +”

任何有关如何使其工作的帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:15:12.067

您必须在调用之前建立您的`find`选择器，如下所示：

```
var selector = {};
selector["access." + companyid] = { "$gt": 0 };        
base.db.users.find(selector, function(err, usersList) {
    ...
}); 
```

# java - 是否有任何可以调整大小以及增强任何类型图像的开源 Java 库？

> ID：12281160
> 
> 赞同：0
> 
> 时间：2012-09-05T12:12:19.370
> 
> 标签：java, image-processing

是否有任何可以**调整大小**以及**增强**任何类型图像（准确地说是jpg、jpeg、png、PNG）的opnesource java库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:29:00.167

要重新调整图像大小，您可以使用 Java 库 javax.imageio

示例代码如下

```
BufferedImage createResizedCopy(Image originalImage,  
        int scaledWidth, int scaledHeight,  
        boolean preserveAlpha) 
{ 
    System.out.println("resizing..."); 
    int imageType = preserveAlpha ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB; 
    BufferedImage scaledBI = new BufferedImage(scaledWidth, scaledHeight, imageType); 
    Graphics2D g = scaledBI.createGraphics(); 
    if (preserveAlpha) { 
        g.setComposite(AlphaComposite.Src); 
    } 
    g.drawImage(originalImage, 0, 0, scaledWidth, scaledHeight, null);  
    g.dispose(); 
    return scaledBI; 
} 
```

使用此函数的示例运行应用程序是[使用 Java 调整图像大小的示例](http://warm-sunrise-5783.herokuapp.com/?url=http://i.imgur.com/By9gL.jpg&height=400&width=400)

您可以将任何图像 URL 作为 ?url 和 ?height 、?width 传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:25:36.547

[http://www.jmagick.org](http://www.jmagick.org)怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:26:55.457

检查标量：

[http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)

轻松调整图像大小：

```
Scalr.resize(img, maxWidth, maxHeight, (BufferedImageOp) null); 
```

# c - 复杂数据类型的内存分配

> ID：12281161
> 
> 赞同：0
> 
> 时间：2012-09-05T12:12:23.010
> 
> 标签：c, memory-management, malloc, typedef

我想为下面的结构分配内存

```
typedef struct {
int *buffer;
int length;
int dsn;
int handle;
} myStr; 
```

哪一个是正确的？

```
myStr *pStr = malloc(sizeof(myStr)+lenOfBuff); 
```

或者

```
myStr *pStr = malloc(sizeof(myStr)); 
```

我在一些使用第一个示例的示例中看到了，但这对我来说似乎有点奇怪。是否必须同时为data Buffer分配内存？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:22:31.473

这取决于。

如果要在创建后更改缓冲区的长度，则需要单独分配。如果没有，您可以在一次`malloc()`调用中共同分配两个块，这可能会更有效。

共同分配看起来像这样：

```
myStr * mystr_create(size_t initial_size)
{
  myStr *ptr;

  ptr = malloc(sizeof *ptr + initial_size * sizeof *myStr->buffer);
  ptr->buffer = (int *) (ptr + 1);
  ptr->length = initial_size;
  ptr->dsn = ... something ...
  ptr->handle = ... something ... *

  return ptr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:13:33.063

您必须分别为每个数据分配内存。

```
#include <stdlib.h>

myStr *pStr = malloc(/* ... */);
pStr->buffer = malloc(/* ... */); 
```

C中有一个例外：[灵活数组成员](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fstrct.htm)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T12:14:35.503

第二个是正确的。第一个是不正确的。缓冲区中的数据将是一个单独的分配。

*有时你会在最后一个*字段上看到一个数组，这是一个“聪明”的意思是对结构使用单个分配，其中传递给 malloc 的大小根据数组中元素的数量而变化——你不会在很多情况下看到这一点C++ 圈子。在这种情况下，你可以*只*使用一个分配——以下形式在 C++ 中是未定义的，尽管你会看到它被一些实现使用和支持：

```
struct t_array {
  size_t count;
  t_thing at[1]; // << variable length array, with t_array.count elements
}; 
```

在 C 中，您可以使用灵活的数组，尽管您的 C++ 编译器仅通过扩展支持该功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:15:26.883

```
typedef struct {
  int length;
  int dsn;
  int handle;
  int buffer[];
} myStr; 
```

如果你想使用第一种情况。但我强烈建议不要这样做，如果你不知道足够多，你可以弄清楚为什么这会起作用。

# css - 错误验证css时jsf表单中的位移组件

> ID：12281165
> 
> 赞同：0
> 
> 时间：2012-09-05T12:12:39.770
> 
> 标签：css, forms, jakarta-ee, jsf-2, panel

我有这个 xhtml 页面：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./template_admin.xhtml">

            <ui:define name="tohead">
            </ui:define>

            <ui:define name="content">

                <p:panel header="Edition d'une commande"  style="height: 490px;margin:auto;" id="panel"  >
                    <p:messages id="msgs"/>
                    <h:panelGrid columns="3" style="float:left;" columnClasses="column" cellpadding="5">

                        <h:outputLabel  for="idd" value="Id : " />   
                        <p:inputText  disabled="true" value="#{editCommandController.myCom.id}" id="idd" required="true" requiredMessage="veuillez saisir un nom" label="Nom"  />  
                        <p:message for="idd" display="icon"/>

                        <h:outputLabel for="dteenvoi" value="Date d'envoi : " />  
                        <p:inputText disabled="true" id="dteenvoi" value="#{editCommandController.myCom.dateEnvoi}" required="true" requiredMessage="veuillez saisir un prénom" label="Prénom" />  
                        <p:message for="dteenvoi" display="icon"/>

                        <h:outputLabel for="division" value="Date de livraison recommandée : " />  
                        <p:inputText disabled="true"  id="division" value="#{editCommandController.myCom.dateLivraisonRecommande}" />  
                        <p:message for="division" display="icon"/>

                        <h:outputLabel for="poste" value="Nombre de page : " />  
                        <p:inputText id="poste" disabled="true" value="#{editCommandController.myCom.nbrePage}" />  
                        <p:message for="poste" display="icon"/>

                        <h:outputLabel for="email" value="Nombre d'exemplaire : " />  
                        <p:inputText id="email" disabled="true" value="#{editCommandController.myCom.nbreExemplaire}" />
                        <p:message for="email" display="icon"/>

                        <h:outputLabel for="autres" value="Type d'impression : " />  
                        <p:inputText id="autres" disabled="true" value="#{editCommandController.myCom.typeImpression}"  />  
                        <p:message for="autres" display="icon"/>

                        <h:outputLabel for="identifiant" value="Observation : " />  
                        <p:inputTextarea id="identifiant" disabled="true" value="#{editCommandController.myCom.observation}" required="true" validator="#{addUserController.validateIdentifiant}" requiredMessage="veuillez saisir un identifiant" label="Identifiant" />  
                        <p:message for="identifiant" display="icon"/>

                        <h:outputLabel for="dec" value="Decision : " />  
                        <p:selectOneMenu  id="dec" value="#{editCommandController.myCom.decision}" >  
                            <f:selectItems value="#{editCommandController.decisions}" />  
                            <p:ajax update="etat calen gridContainer :myform:alors" listener="#{editCommandController.decisionlistener()}" event="change" />
                        </p:selectOneMenu>  
                        <p:message for="dec" display="icon"/>

                        <h:outputLabel for="etat" value="Etat : " />  
                        <p:selectOneMenu  id="etat" value="#{editCommandController.myCom.etat}" disabled="#{editCommandController.myCom.decision eq 'rejettée' or editCommandController.myCom.decision eq 'en attente'}" >  
                            <f:selectItems value="#{editCommandController.etats}" />   
                        </p:selectOneMenu>  
                        <p:message for="etat" display="icon"/>

                        <h:outputLabel for="calen" value="Date de Livraison réelle: *" />
                        <p:calendar  label="Date de Livraison reelle" id="calen" showOn="button" disabled="#{editCommandController.myCom.decision eq 'rejettée' or editCommandController.myCom.decision eq 'en attente'}" effect="slide" value="#{editCommandController.myCom.dateLivraisonReelle}" pattern="MM/dd/yyyy HH:mm" >
                        </p:calendar>  
                        <p:message for="calen" id="msgSurname4" display="icon"/>

                    </h:panelGrid>  

                    <p:outputPanel id="gridContainer" style="margin-left: 150px;" layoyut="block" >
                        <h:panelGrid id="alors"   rendered="#{editCommandController.myCom.decision ne 'rejettée' and editCommandController.myCom.decision ne 'en attente'}" >
                            <h:outputText value="ci dessous la liste des papiers ayant un stock (>=) à la quantité demandé" style="font-size: 0.7em;margin-bottom: -3px;" />
                            <p:dataTable  id="cars" style="width: 80px;margin-top: -6px;" var="car" value="#{editCommandController.pdm}" paginator="true" rows="10"  
                                         selection="#{editCommandController.selectedPapier}" selectionMode="single" >  

                                <p:ajax event="rowSelect" update=":myform:jesuis :myform:jesuis1 :myform:jesuis2" />  

                                <f:facet name="header">  
                                    RadioButton Based Selection  
                                </f:facet>                    

                                <p:column headerText="libelle"  >  
                                    #{car.libelle}  
                                </p:column>  

                                <p:column headerText="format"  >  
                                    #{car.format}  
                                </p:column>  

                                <p:column headerText="stock"   >  
                                    #{car.stock}  
                                </p:column>  

                            </p:dataTable>  

                            <h:outputText  id="jesuis" value="vous avez choisi le papier : #{editCommandController.selectedPapier.libelle}"  />
                            <h:outputText id="jesuis1" value="la quantité nécéssaire : #{editCommandController.myCom.nbreExemplaire*editCommandController.myCom.nbrePage}" />
                            <h:outputText id="jesuis2" value="la quantité réstante en Stock : #{editCommandController.selectedPapier.stock - (editCommandController.myCom.nbreExemplaire*editCommandController.myCom.nbrePage)}" />
                            <span id="relief" ></span>
                            <h:panelGrid columns="2" cellpadding="5" style="margin-top: 15px;">  
                                <h:outputLabel value="Reliure :" for="city" />
                                <p:selectOneMenu id="Reliure" required="true" value="#{editCommandController.choixReliure}">  
                                    <f:selectItem itemLabel="choisir reliure" itemValue="" />  
                                    <f:selectItems value="#{editCommandController.libelleReliures}" />  
                                    <p:ajax listener="#{editCommandController.vclistener()}" />  
                                </p:selectOneMenu>
                            </h:panelGrid>

                        </h:panelGrid>
                    </p:outputPanel>

                    <h:panelGrid columns="2" style="clear:left;" >
                        <p:commandButton value="Editer" ajax="false" action="#{editCommandController.updateCommand()}" update="panel" ></p:commandButton>
                        <p:commandButton value="Annuler"  immediate="true" action="commandesUser" ajax="false" ></p:commandButton>
                    </h:panelGrid>

                </p:panel>  

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

当我运行我的应用程序并打开此页面时：我有这样的 ![在此处输入图像描述](../Images/e12fa98b3a4ce378e3b8a480e9b4b19e.png)

但是当我点击编辑按钮时，如果验证中有错误：我有这样的表格： ![在此处输入图像描述](../Images/a52e755128a73446135973a3ea92fef7.png)

我不知道这个位移组件的原因

你知道如何解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:24:17.313

你给了它一个固定的高度。

```
<p:panel header="Edition d'une commande" style="height:490px;margin:auto;" id="panel"> 
```

将其移除以使其与内容物一样高。

```
<p:panel header="Edition d'une commande" style="margin:auto;" id="panel"> 
```

# iphone - 图像裁剪在 iOS 6.0 中无法正常工作。在模拟器中工作正常。

> ID：12281166
> 
> 赞同：5
> 
> 时间：2012-09-05T12:12:42.993
> 
> 标签：iphone

```
- (UIImage *)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{
    CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return cropped;
} 
```

我正在使用此代码。请给出一些解决方案。在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:52:39.280

`CGImageCreateWithImageInRect`无法正确处理图像方向。网上有许多奇怪而奇妙的裁剪技术，涉及巨大的 switch/case 语句（请参阅 Ayaz 答案中的链接），但是如果您停留在 UIKit 级别并且仅在`UIImage`其自身上使用方法来进行绘图，那么所有细枝末节的细节都会为您处理好。

以下方法尽可能简单，并且适用于我遇到的所有情况：

```
- (UIImage *)imageByCropping:(UIImage *)image toRect:(CGRect)rect
{
    if (UIGraphicsBeginImageContextWithOptions) {
        UIGraphicsBeginImageContextWithOptions(rect.size,
                                               /* opaque */ NO,
                                               /* scaling factor */ 0.0);
    } else {
        UIGraphicsBeginImageContext(rect.size);
    }

    // stick to methods on UIImage so that orientation etc. are automatically
    // dealt with for us
    [image drawAtPoint:CGPointMake(-rect.origin.x, -rect.origin.y)];

    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

`opaque`如果您不需要透明度，您可能想要更改参数的值。

# drawing - 在 Marmalade 中绘制“高级”图元

> ID：12281180
> 
> 赞同：2
> 
> 时间：2012-09-05T12:13:25.623
> 
> 标签：drawing, primitive, marmalade

我一直在寻找有关在 Marmalade SDK 中绘制更高级原语的示例。

示例：语音气泡、圆角矩形、星形等。

我不确定 Iw2d 或 IwGx 是否是正确的路径。我也看过开罗，这可能是一个选择，尽管它比我需要的多一点。

有人在不使用精灵/纹理的情况下使用 Marmalade SDK 和绘图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:43:27.593

我认为没有理由使用 Iw2D。它并不比 IwGX 更简单。您应该使用带有精灵和纹理的 IwGX 或 OpenGL ES。

我使用 OpenGL ES 2.0。

我不知道其他图形库来绘制基元，但橘子酱 github 有 cairo [https://github.com/marmalade/cairo](https://github.com/marmalade/cairo)

这是非常古老的库。

# objective-c - 从 iPhone 中的 NSString 中删除字符问题

> ID：12281181
> 
> 赞同：2
> 
> 时间：2012-09-05T12:13:25.760
> 
> 标签：objective-c, ios, nscharacterset

我有一个值为“€100,000,000”的字符串。我想同时删除“€”和“,”。我正在尝试使用`[NSCharacterSet symbolSet]`，但这种方法只删除了“€”而不删除“，”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:16:27.290

用这个：

```
string = [string stringByReplacingOccurrencesOfString:@"€" withString:@""];
string = [string stringByReplacingOccurrencesOfString:@"," withString:@""]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:23:37.887

你可以试试：

```
-(NSString*)cleanString:(NSString*)str
    NSString *string = [NSString stringWithString:str];
    NSCharacterSet *charSet = [NSCharacterSet characterSetWithCharactersInString:@"€,"];
    string = [string stringByTrimmingCharactersInSet:charSet];
    return string;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:21:42.967

最好的解决方案是从 NSString答案中[删除除数字之外的所有数字。](https://stackoverflow.com/questions/1129521/remove-all-but-numbers-from-nsstring)

字符串中固定清洁的替代方法是：

```
string = [[string stringByReplacingOccurencesOfString:@"€" withString:@""] stringByReplacingOccurencesOfString:@"," withString:@""]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:28:12.653

```
string = [string stringByReplacingOccurrencesOfString:@"€" withString:@""]; 
```

其中字符串包含`"€100,000,000"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:33:42.533

逗号不是符号。它是`[NSCharacterSet punctuationCharacterSet]`. 但是，如果您使用该设置，它将删除小数位持有者（句点）。

您只需执行两次操作即可获得所需的结果。

1.  使用`[NSCharacterSet symbolSet]`它将处理货币的所有符号。
2.  使用`stringByReplacingOccurencesOfStrin`仅删除`","`

# php - 构造 mysql 数据库表以具有顺序 ID 而无法使用 auto_increment 的最佳方法

> ID：12281190
> 
> 赞同：0
> 
> 时间：2012-09-05T12:13:52.310
> 
> 标签：php, mysql, database, layout, records

我在试图解决数据库问题时遇到了问题。入学制度的情况如下。

表 1：学校 CREATE TABLE 学校（schoolID auto_increment、school_name varchar 等）

表 2：学生 CREATE TABLE 学生（studentID auto_increment、student_name varchar 等）

表 3：注册（我相信问题就在这里） CREATE TABLE 注册（enrolID，...）

问题是，以前系统的范围是允许注册来自任意数量的位置，在任何时候，并且只插入到数据库中，这很好，一切都是自动递增的。

范围发生了变化，因为他们不喜欢这样一个事实，即当报告完成时，当他们检索注册时，注册的数字是分散的。他们希望每个学校的注册 ID 是连续的。

我的一个想法是，选项（a）

*为每所学校*创建一个注册表（查看大约 1000-1500 所学校），这样每个插入的注册都将按顺序存储。

选项 (B)

有另一个表来记录为该学校插入的“lastrecord”。

CREATE TABLE lastrecord (schoolname varchar, nextrecord int)

这样，*在*每次插入之前，它必须检查数据库以查找该学校使用的最后一个 ID，检索该值，对其 +1，然后将其插入到招生表中。

使用这种方法，我会在注册 ID 前面加上学校 ID，例如 schoolID : 100

第 45 名学生的新注册 ID：10045。

然后在每次插入后，使用使用的记录更新该表。这似乎效率极低，但我正在努力寻找更好的解决方案。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:20:08.237

数据库表中的主键没有实际意义。它只是在那里识别行。因此，您应该将表的学生 ID（有意义）和主键（没有意义）拆分为 2 个字段。

主键是自动生成的，对于学生 ID 的生成，您可以使用有意义的算法，例如 year.number。制作一个单独的表格来跟踪要提供的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:22:32.247

您可以在两个字段上进行自动增量

喜欢： `ADD PRIMARY KEY (`school_id `,`enrolID`)` 并将 enrolID 设置为 autoincrement

然后每个学校都会有自己的自动增量

# asp.net-mvc - 登录为...最佳实践？

> ID：12281191
> 
> 赞同：1
> 
> 时间：2012-09-05T12:13:55.140
> 
> 标签：asp.net-mvc, forms-authentication, session-timeout

我正在开发一个站点，管理员用户将能够以系统中其他用户类型的身份登录。我在那里需要跟踪当前的“显示”用户和当前的“登录”用户。最明显的地方似乎是会话，但您面临保持会话超时与身份验证超时同步的挑战。

在这里查看我的问题： [MVC session expiring but not authentication](https://stackoverflow.com/questions/12273494/mvc-session-expiring-but-not-authentication)

处理这种情况的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:57:36.243

除了通常的 web.config 超时/安全设置：

```
<location path="Portal/Dashboard">
<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web>
</location>

<authentication mode="Forms">
  <forms loginUrl="~/Portal/Logout" timeout="10" />
</authentication> 
```

这是我在控制器中处理此问题的方法：

```
 loggedInPlayer = (Player)Session["currentPlayer"];
        if (loggedInPlayer == null)
        {
            loggedInPlayer = Common.readCookieData(User.Identity);
        }
        if (loggedInPlayer.UserID > 0)
        {
          //Dude's signed in, do work here
        }
     else
        {
            return PartialView("Logout");
        } 
```

然后对于我的 LogOut() 控制器方法，我说：

```
public ActionResult Logout()
    {
        Session["currentPlayer"] = null;
        FormsAuthentication.SignOut();
        return RedirectToAction("Index", "Home", new { l = "1"}); //Your login page
    } 
```

对于处理 cookie，我有：

```
public static Player readCookieData(System.Security.Principal.IIdentity x)
    {
        Player loggedInPlayer = new Player();
        if (x.IsAuthenticated)
        {
            loggedInPlayer.UserID = 0;
            if (x is FormsIdentity)
            {
                FormsIdentity identity = (FormsIdentity)x;
                FormsAuthenticationTicket ticket = identity.Ticket;
                string[] ticketData = ticket.UserData.Split('|');
                loggedInPlayer.UserID = Convert.ToInt32(ticketData[0]);
                loggedInPlayer.UserFName = ticketData[1];
                loggedInPlayer.UserLName = ticketData[2];
            }
        }
        else
        {
            loggedInPlayer.UserID = 0;
            loggedInPlayer.UserFName = "?";
            loggedInPlayer.UserLName = "?";
        }
        return loggedInPlayer;
    } 
```

# ios - 将方法从 ViewController 复制到 AppDelegate - NULL

> ID：12281193
> 
> 赞同：2
> 
> 时间：2012-09-05T12:14:01.430
> 
> 标签：ios, nsstring, null, viewcontroller, appdelegate

您好，我正在尝试将 ViewController 中的文本字段中的输入复制到我的 AppDelegate。不，反之亦然。

当我试图这样做时，我 NSLog 给了我这个：

```
StruktonTest[8467:11603] (null) 
```

顺便说一句，StruktonTest 是我的 Testapp 的名称。

这是我在 ViewController 中获取文本的代码：

```
if ([[[self m_textfield] text] length] == 10) {
m_textfield.text=[NSString stringWithFormat:@"%@", m_textfield.text];
NSLog(@"%@", m_textfield.text);
telefoonnummer = m_textfield.text; 
```

我将它复制到我的 AppDelegate.h 文件中，如下所示：

```
@interface  LocationDelegate : NSObject <CLLocationManagerDelegate> 
{
UILabel * resultsLabel;
NSString *phonenumber;

}

- (id) initWithLabel:(UILabel*)label;
-(id)initWithDictionary:(NSDictionary *)dict;
-(id)initWithName:(NSString *)aName;
-(NSDictionary *)toDictionary;

@property (nonatomic , retain) NSString *phonenumber; 
```

这是我来自 ViewController 的代码，也许我在这里犯了错误：

```
@interface LocationTestViewController : UIViewController <CLLocationManagerDelegate> {
IBOutlet UILabel * m_significantResultsLabel;
IBOutlet UISwitch * m_significantSwitch;
IBOutlet UISwitch * m_mapSwitch;
IBOutlet MKMapView * m_map;
IBOutlet UITextField * m_textfield;
NSString *String;
IBOutlet UILabel * mobielnummer;
IBOutlet UILabel * deellocatie;
IBOutlet UILabel * welldone;
IBOutlet UILabel * locatiemaps;
IBOutlet UILabel * mapslocatie;
NSString *telefoonnummer;

LocationDelegate * m_significantDelegate;

// location objects
CLLocationManager* m_gpsManager;
CLLocationManager* m_significantManager;
}

-(IBAction) actionSignificant:(id)sender;
-(IBAction) actionMap:(id)sender;
-(IBAction) actionLog:(id)sender;
-(IBAction)changrGreeting ;

@property (retain, nonatomic) IBOutlet UILabel * m_significantResultsLabel;
@property (retain, nonatomic) IBOutlet UISwitch * m_significantSwitch;
@property (retain, nonatomic) IBOutlet UISwitch * m_mapSwitch;
@property (retain, nonatomic) IBOutlet MKMapView * m_map;
@property (nonatomic ,retain) IBOutlet UITextField *m_textfield;
@property (nonatomic, copy) IBOutlet NSString *String;
@property (nonatomic, retain) IBOutlet UILabel  *mobielnummer;
@property (nonatomic, retain) IBOutlet UILabel  *deellocatie;
@property (nonatomic, retain) IBOutlet UILabel  *welldone;
@property (nonatomic, retain) IBOutlet UILabel  *locatiemaps;
@property (nonatomic, retain) IBOutlet UILabel  *mapslocatie;
@property (nonatomic , retain) NSString *telefoonnummer;

@end 
```

这是我的 AppDelegate.m 中的代码

```
LocationTestViewController*locationTestViewController = [[LocationTestViewController   alloc]init];
phonenumber = locationTestViewController.telefoonnummer;
NSLog(@"%@", phonenumber); 
```

因此，当我复制此内容时，我收到了 NULL。有谁知道如何解决这个问题。将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:22:45.153

这段代码：

```
LocationTestViewController*locationTestViewController = [[LocationTestViewController   alloc]init];
phonenumber = locationTestViewController.telefoonnummer;
NSLog(@"%@", phonenumber); 
```

正在创建 LocationTestViewController 的新实例，然后读取显然为空的 .telefoonnummer 字段。

当然，您可以使用 ViewController 将字段“提供”给 AppDelegete，而不是 AppDelegate “读取”该字段？

你可以使用 NSUserDefaults 作为临时存储，或者在你的 ViewController 中使用这样的代码：

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
appDelegate.phoneNumber = self.telefoonnummer; 
```

# android - 可以在不扩展 Activity 的情况下在 android 中添加菜单

> ID：12281197
> 
> 赞同：1
> 
> 时间：2012-09-05T12:14:23.370
> 
> 标签：android, android-menu

我正在创建自定义控件`extends WebView`。我已经提到了在 Android 中添加菜单的可能教程。但没有发现在非活动类中添加菜单。`Is that possible to add the Menu in Non-Activity class?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:21:32.400

最简洁的答案是不。您应该在使用 WebView 的 Activity 中添加菜单。

[您可以在此处](http://developer.android.com/guide/topics/ui/menus.html)阅读有关菜单的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:44:31.590

您不能`onCreateOptionsMenu()`在 WebView 的子类中使用，但 WebView 扩展`AbsoluteLayout`，因此您可以获得窗口的尺寸并（当您需要时）在 WebView 子类的底部添加一些按钮，这似乎是您的 WebView 上的选项菜单.
您还可以使用`window manager`在窗口上显示特定布局，并且用户可以与出现在 WebView 顶部的布局进行交互。

# javascript - HTML 文本输入大小

> ID：12281203
> 
> 赞同：1
> 
> 时间：2012-09-05T12:14:42.320
> 
> 标签：javascript, html, textinput

我有一个使用 javascript 动态创建的文本输入，我也在其中使用 javascript 放置一些文本。我想让文本输入大小可变，取决于文本长度，最大宽度为 70%

为此，我正在使用：

```
'<input type="text" style="max-width:70%" name="affiliation"
 id="affiliation'+affiliation_id+'" value="'+article_affiliations[i].name+'"
 size='+article_affiliations[i].name.length+'/>' 
```

当文本长度超过 68% 时一切正常，但当不长时，文本输入区域小于文本大小。

例如，当文本大小为 118 时，文本区域将只有 106 个字符长度，我不知道为什么。任何帮助和建议都将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:41:31.267

**Javascript：**

```
function incSize(event) {
   var size = event.value.length; 
   event.setAttribute("size", size);
   event.setAttribute("style", "width:auto")    
} 
```

**HTML：**

```
<input type="text" name="affiliation" onkeyup="incSize(this)" size="1" />​ 
```

[**演示**](http://jsfiddle.net/akhurshid/vgZHh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:23:23.987

删除样式属性，然后试试这个：

```
$('input[type="text"]').keyup(function(){
  $(this).attr({width: 'auto', size: $(this).val().length});
}); 
```

确保没有 CSS 样式覆盖宽度。从这里得到答案：[动态调整输入大小](https://stackoverflow.com/questions/1475358/dynamically-resize-input)

# java - 为什么像 Adob e Photoshop、Adobe Premiere、Autocad、3ds max、maya 和许多其他软件不是由 Java 制成的？

> ID：12281206
> 
> 赞同：-4
> 
> 时间：2012-09-05T12:14:50.197
> 
> 标签：java

这些软件正在许多平台上使用，那么他们为什么不使用 Java 来开发这些软件呢？为什么他们为每个平台制作不同的源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:16:34.790

只是推测，但在这些情况下有很多理由不使用 Java，例如

*   这些包早于 Java。
*   他们有专门的高性能库，不适合 Java。
*   他们有紧密的平台集成，Java 做得不好。
*   供应商更喜欢软件难以进行逆向工程并且只锁定在一个平台上。他们通过一次为一个用户或系统销售许可证来赚钱。
*   您可以为多个平台拥有一个源，构建必须为每个目标运行一次，但这是一个相对较小的代价。

恕我直言，如果他们要迁移他们的任何软件，它可能会朝着[OpenCL](http://en.wikipedia.org/wiki/OpenCL)或[OpenCV](http://en.wikipedia.org/wiki/OpenCV)的方向发展，它们是用于利用 GPU 的低级语言。即他们更有可能使用低级语言而不是高级语言。

免责声明：我是 Java 的粉丝，但它并不是所有事情的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:19:17.067

他们不喜欢依赖太阳/神谕（考虑到拉里的态度和贪婪，这并不奇怪）。而且大多数有问题的程序都在java之前存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:19:21.943

所有这些程序都是用 C++ 编写的。Java 本身是用 C++ 编写的。这是因为 C++ 可以优化为闪电般的速度，这就是为什么它仍然是首选。

# jquery - 下载最近修改的文件

> ID：12281223
> 
> 赞同：0
> 
> 时间：2012-09-05T12:16:07.523
> 
> 标签：jquery, ajax, servlets, download

下面的代码执行此操作：执行struts动作，修改服务器中的文件，然后下载文件下载文件但不是该文件的最新版本

```
$("#generateButton").live("click",function(){
    $.ajax({
        type: "POST",
        url: "../generateBlame.do",
        data: { fileName: "blame", nbrParam: "2",param1 :"aaa",param2:"bbb" }
    });

    $.fileDownload('http://localhost:8080/gestionRH/fiches/decision de blame.doc');
}); 
```

有什么方法可以获取更新的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:18:35.360

更新完成后开始下载操作（在`success`回调 ajax 请求时）

```
$("#generateButton").live("click",function(){
    $.ajax({
       type    : "POST",
       url     : "../generateBlame.do",
       data    : { fileName: "blame", nbrParam: "2",param1 :"aaa",param2:"bbb" },
       success : function() {
           $.fileDownload('http://localhost:8080/.../decision de blame.doc');
       }

    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:20:04.763

假设`generateBlame.do`请求是在指定路径创建文件的内容，您需要将`$.fileDownload`方法调用放在请求的`success`处理程序中 - 因为请求是异步发出的。

试试这个：

```
$("#generateButton").live("click",function(){
    $.ajax({
        type: "POST",
        url: "../generateBlame.do",
        data: { fileName: "blame", nbrParam: "2",param1 :"aaa",param2:"bbb" },
        success: function() {
            $.fileDownload('http://localhost:8080/gestionRH/fiches/decision de blame.doc');
        },
        error(xhr, status, error) {
            alert("File generation failed - " + error);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:11:36.667

可能问题是由于服务器需要一些时间来刷新其资源；所以为了解决这个问题，我强制在一段时间后触发下载的事件这是代码

```
function timeout_trigger() {
  $.fileDownload('path_to_file');   
    $('#loading').hide();
    $('#generateButton').button({ disabled: false });
}

 $("#generateButton").live("click",function(){
 $('#generateButton').button({ disabled: true });
    $('#loading').show();
    $.post(
       '../generateBlame.do',
       { fileName: "blame", nbrParam: "2",param1 :"pop",param2:"lll" },
      function(data) {
      setTimeout('timeout_trigger()',5000);             
});
}); 
```

这是工作，但我更喜欢以更聪明的方式做任何建议？有什么方法可以刷新服务器吗？

# c# - 为什么 .NET 中的集合类不是通用的？

> ID：12281224
> 
> 赞同：5
> 
> 时间：2012-09-05T12:16:13.637
> 
> 标签：c#, .net, generics, collections

在所有关于非泛型类过时的大惊小怪之后（几乎）为什么.NET 集合类仍然是非泛型的？例如，[Control.ControlCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.aspx)不实现`IList<T>`but only `IList`，或者[FormCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.formcollection.aspx)只实现 upto`ICollection`而 not `ICollection<T>`。每次我必须做一些很酷的操作`IEnumerable<T>`或利用`Linq`细节时，我必须总是将集合类转换为其等效的泛型类型，如下所示：

```
this.Controls.OfType<Control>(); 
```

当它唯一可以保存的东西又是一个控件时，必须`Control`在这样的操作中指定它是很奇怪的。`ControlCollection`

考虑到这些集合早在 .Net 1.1 天就已经存在，是为了保持向后兼容性吗？即使是这样，为什么这些集合（还有更多）不能进一步实现通用接口以及我认为不会破坏向后兼容性的现有接口。我不确定我是否遗漏了仿制药的一些关键，可能是我对这个想法不够彻底。

**编辑：**虽然我在只考虑 WinForms 时问过这个问题，但我发现这也适用于 WPF 等新技术。正如@Dennis 指出的那样，WPF 也有非泛型集合。例如[WindowCollection](http://msdn.microsoft.com/en-us/library/system.windows.windowcollection.aspx)或[ItemCollection](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.aspx)。WPF 是随 .NET 3 发布的，但泛型是在 .NET 2 中引入的：-o

## 对此进行更新：

现在有一张票：[https](https://github.com/dotnet/winforms/issues/2644) ://github.com/dotnet/winforms/issues/2644 （当然是.NET Core）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T12:18:47.307

> 考虑到这些集合早在 .Net 1.1 天就已经存在，是为了保持向后兼容性吗？

是的，但主要是因为 WinForms 自 2005 年或更早以来一直是“功能完整”的。

功能完整意味着它处于生命支持状态，只是缺少不复苏。

### 附加，重新编辑：

WindowsCollection 已经是“专门的”，它包含从 Window 派生的类。继承是这里的正确模型，不需要泛型。

并且 ItemCollection 也是故意非泛型的。这是一个经过深思熟虑的特性，它可以包含所有类型，甚至同时包含不同的类型。同样，泛型不是必需的，也是不可取的。

# excel - 运行时错误“424”：尝试更改对象定义时需要对象，Excel VBA

> ID：12281225
> 
> 赞同：0
> 
> 时间：2012-09-05T12:16:19.083
> 
> 标签：excel, vba

就目前而言，我已经将它写在代码在原始文件所在的文件夹中创建一个文件的位置。创建文件后，我希望将其 wbBK2 定义为刚刚创建的文件。我想使用相同的代码来创建文件，减去 SaveAs 选项会起作用，但它似乎不喜欢该对象。

有什么原因吗？出于所有预期目的，它应该直接指向文件，但似乎不同意......有人能看到我犯的错误吗？

```
Option Explicit

Sub OpenOrderReportExport()

    Dim wsJL As Worksheet   'Jobs List
    Dim wsPOT As Worksheet  'PO Tracking
    Dim wsTNO As Worksheet  'Tel-Nexx OOR
    Dim wbBK2 As Workbook   'New Workbook
    Dim wsWS1 As Worksheet  'Sheet1
    Dim wsWS2 As Worksheet  'Sheet2
    Dim wsWS3 As Worksheet  'Sheet3
    Dim CurrentFile As String, NewFileType As String, NewFile As String, Dir As String

    Set wsJL = Sheets("Jobs List")      'Jobs List
    Set wsPOT = Sheets("PO Tracking")   'PO Tracking
    Set wsTNO = Sheets("Tel-Nexx OOR")  'Tel-Nexx OOR
    Set wbBK2 = Workbooks.Add           'New Workbook
    Set wsWS1 = wbBK2.Sheets("Sheet1")  'Sheet1
    Set wsWS2 = wbBK2.Sheets("Sheet2")  'Sheet2
    Set wsWS3 = wbBK2.Sheets("Sheet3")  'Sheet3

        Application.ScreenUpdating = False    ' Prevents screen refreshing.
        CurrentFile = ThisWorkbook.FullName
        NewFileType = "Excel Files 2007 (*.xlsx)"
        Dir = ThisWorkbook.path
        wbBK2.SaveAs Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx"
        Set wbBK2 = Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx"

        MsgBox wbBK2
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:31:00.420

正如评论中已经暗示的那样，`Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx"`不会创建对象。该代码返回一个字符串，它是 VBA 中的普通数据类型。

当您使用`set wbBK2 =`上面的代码时会发生错误，因为 set 需要一个对象来引用。

顺便说一句，正如 Siddharth Rout 已经指出的那样，您实际上使用此行正确创建了对工作簿的引用，`Set wbBK2 = Workbooks.Add`因此不需要进一步设置行。

# vb.net - 将光标位置设置在 vb.net 中选定文本的开头

> ID：12281230
> 
> 赞同：2
> 
> 时间：2012-09-05T12:16:35.603
> 
> 标签：vb.net

我在一个被选中的文本框中有一个长文本。光标位于文本的末尾。由于文本的长度，我看不到导入的开头。我尝试了所有选择，选择（开始，长度）等，但光标是或在末尾或没有选择任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:24:05.687

如果设置焦点到文本框没问题，您可以使用`SendKeys 选择开头显示的文本：

```
TextBox1.Focus()
TextBox1.SelectionStart = TextBox1.TextLength
SendKeys.Send("+{HOME}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:36:15.373

（假设 WinForms） - 您应该能够执行以下操作：

```
 TextBox1.SelectionStart = 0
    TextBox1.SelectionLength = 0 
```

然后将焦点设置在文本框上以查看插入符号：

```
 TextBox1.Focus() 
```

# android - 线程中的中断循环器

> ID：12281235
> 
> 赞同：3
> 
> 时间：2012-09-05T12:16:56.633
> 
> 标签：android, multithreading

嗨，伙计，我有一个带有此代码的线程

```
private final class Consumer extends Thread {

    public boolean running;

    public Handler consumerHandler;

    public void run() {
        Looper.prepare();
        consumerHandler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                Log.i(LOG_TAG, "Consumer-> " + msg.obj);
            }
        };
        Looper.loop();

    }

} 
```

我的活动创建了一个 Consumer 类型的线程 T 并在其上调用 start。活动如何停止线程 T ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:37:25.480

除非抛出异常或您调用了该方法，否则运行消息循环通常不会*退出循环。*`quit()`看看 DOC -[一定要调用 quit() 来结束循环](http://developer.android.com/reference/android/os/Looper.html#loop%28%29)。

```
 @Override
    protected void onDestroy() {
      consumerObj.consumerHandler.quit(); 
      super.onDestroy();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T18:51:32.330

上面的一条评论说 Looper 不检查`isInterrupted()`. 我试图通过调用`Thread.interrupt()`并将其添加到循环中来说服我的：

```
 if (isInterrupted()) {
            socket.close();
            Looper.myLooper().quit();
        } else {
            Looper.loop();
        } 
        //some exit code. 
```

我还调用了 myHandler.sendEmptyMessage(0) 来执行一个循环并捕获`interrupt`，但没有运行退出代码的迹象。在调试时，消息甚至没有到达队列；
我不确定是否兴奋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:26:11.503

试试这个

```
if(Consumer != null) {
   Thread thread = Consumer;
   Consumer = null;
   thread.interrupt();
} 
```

或者里面有条件

```
public void run() {
   while(running) {

   }
} 
```

停止线程集`running = false;`

参考[这里](https://stackoverflow.com/questions/9737420/how-to-stop-or-destroy-a-running-thread)

# git - 使用Git，是不是真的做了一些修改后，就可以提交到任意分支了？

> ID：12281236
> 
> 赞同：0
> 
> 时间：2012-09-05T12:16:56.433
> 
> 标签：git

比如说，如果一个使用 Git 的项目都已提交，则 with`master`和`foo`branch 都指向同一个提交。如果我们现在在`master`分支上，并且更改了一些文件，似乎我们可以切换到`foo`分支，甚至创建一个新分支：

```
git checkout -b bar 
```

并将更改提交到 3 个分支中的任何一个？所以就像是，对于编程提交到选择的任何分支，这些更改仍然是“灵活的”？（即使分支`foo`中已经完成了一个或多个提交`foo`，只要修改后的文件不与这些提交中的任何文件重叠，甚至提交）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:19:51.207

是的。如果发生冲突，您将无法更改分支。否则，它只是工作。

# windows-7 - 带有空格路径的 Cmd 和 mmc

> ID：12281238
> 
> 赞同：1
> 
> 时间：2012-09-05T12:17:14.570
> 
> 标签：windows-7, cmd, whitespace, shortcut, mmc

我正在尝试创建 .msc 文件的快捷方式，但我想用另一个帐户打开该文件。我最接近的是：

```
runas /savecred /user:PATHy\USERx "mmc \\folder\subfolder\folder with space\file.msc" 
```

只要路径名中没有任何空格，它就可以工作。我知道我应该在 Windows 中使用“”（引号）转义空格，但该`runas`命令已经要求对该`mmc`命令进行转义。有谁知道我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:23:55.823

`runas`文档 ( )作为`runas /?`示例之一展示了如何执行此操作：

```
REM use backslash to escape your quotes, e.g., \"file with spaces\"
runas /env /user:user@domain.microsoft.com "notepad \"my file.txt\"" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:29:17.047

也可以使用目录的短文件名

类型

目录 /x \文件夹\子文件夹

记下带有空格的目录的短文件
然后在您的命令中使用这个短名称。例如

```
runas /savecred /user:PATHy\USERx "mmc \\folder\subfolder\folder~1\file.msc" 
```

# ios - 另一个 UITableView 内的 ios 水平 UITableView

> ID：12281239
> 
> 赞同：0
> 
> 时间：2012-09-05T12:17:16.360
> 
> 标签：ios, uitableview

我在另一个 UITableView 内的水平 UITableView 中有一个按钮。当我点击按钮时，应用程序崩溃并显示此消息“无法识别的选择器已发送到实例”。据我了解，问题是另一个类处理水龙头，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:39:22.103

我刚刚解决了。也许有人会需要我的解决方案。我搬家了

```
[self.checkBoxButton addTarget:self action:@selector(checkBoxButtonAction) forControlEvents:UIControlEventTouchUpInside]; 
```

从视图（实际上显示此视图而不是单元格

> [单元格添加子视图：CellView.view]；

) 到 UITableView 类

> `- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

并改变了一点

> [CellView.checkBoxButton addTarget:self action:@selector(checkBoxButtonAction) forControlEvents:UIControlEventTouchUpInside];

所以，现在点击句柄不是视图而是 uitableview 类，一切正常

# objective-c - ld：找不到 -lxml2 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：12281242
> 
> 赞同：2
> 
> 时间：2012-09-05T12:17:26.560
> 
> 标签：objective-c, clang, libxml2, exit-code

我在我的应用程序中使用 libxml2 框架。

但它显示了这个错误：

ld：找不到 -lxml2 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我还将标题搜索路径更改为 - /usr/include/libxml2

这是构建输出：

```
Ld /Users/classic/Library/Developer/Xcode/DerivedData/TeleSketchProj-aiaovvbknclizsekxxhxxqthzauf/Build/Products/Debug-iphoneos/TeleSketchProj.app/TeleSketchProj normal armv7
cd /Users/classic/Desktop/TeleSketchProj
setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -L/Users/classic/Library/Developer/Xcode/DerivedData/TeleSketchProj-aiaovvbknclizsekxxhxxqthzauf/Build/Products/Debug-iphoneos -L/Users/classic/Desktop/TeleSketchProj/Twitter+OAuth/SAOAuthTwitterEngine -F/Users/classic/Library/Developer/Xcode/DerivedData/TeleSketchProj-aiaovvbknclizsekxxhxxqthzauf/Build/Products/Debug-iphoneos -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/Developer/Library/Frameworks -filelist /Users/classic/Library/Developer/Xcode/DerivedData/TeleSketchProj-aiaovvbknclizsekxxhxxqthzauf/Build/Intermediates/TeleSketchProj.build/Debug-iphoneos/TeleSketchProj.build/Objects-normal/armv7/TeleSketchProj.LinkFileList -dead_strip -fobjc-arc -miphoneos-version-min=5.0 -lz -lxml2 -framework CFNetwork -framework SystemConfiguration -framework AVFoundation -framework AddressBookUI -framework AddressBook -framework MediaPlayer -framework AudioToolbox -framework MessageUI -framework MobileCoreServices -framework CoreAudio -framework Security -framework UIKit -framework Foundation -framework CoreGraphics -lOAuth -framework SenTestingKit -o /Users/classic/Library/Developer/Xcode/DerivedData/TeleSketchProj-aiaovvbknclizsekxxhxxqthzauf/Build/Products/Debug-iphoneos/TeleSketchProj.app/TeleSketchProj 
```

请建议一些东西..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:31:54.760

尝试在应用程序的构建设置中的其他链接器标志中键入 -ObjC。它可能会工作......

# vba - 在 Word for Mac 2011 中显示代码片段

> ID：12281244
> 
> 赞同：6
> 
> 时间：2012-09-05T12:17:31.160
> 
> 标签：vba, macos, ms-word, code-snippets

我想在 Word for Mac 2011（我坚持使用）中创建的 .docx 文件中显示代码片段（在 R 中创建）。我曾尝试插入文本框，但它们只显示一页的长度，这使得编辑变得困难。有什么建议么？

PS 我意识到之前有人问过关于 MS Word 的[类似问题](https://stackoverflow.com/questions/387453/best-way-to-show-code-snippets-in-word)，但似乎没有一个解决方案适用于 mac 2011 的 word。

# google-nativeclient - 如何编写一个与jsoncpp naclport集成的nacl程序

> ID：12281250
> 
> 赞同：1
> 
> 时间：2012-09-05T12:17:59.210
> 
> 标签：google-nativeclient

Naclports 似乎只提供了一个 32 位的目标文件，我如何让我的项目链接到它们？是否有关于某人如何在 nacl 程序中使用 jsoncpp 的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:47:57.837

我为您创建了一个示例，您可以在此处查看：

[https://github.com/johnmccutchan/NaClJsonCpp](https://github.com/johnmccutchan/NaClJsonCpp)

构建系统是基于 premake 的，你可以在这里下载 premake4：

[http://industriousone.com/premake](http://industriousone.com/premake)

从终端（cygwin 或 *nix）：

```
premake4 gmake
make -R 
```

将构建和链接项目。

要测试它运行：

```
python ./http.py 
```

然后导航到 localhost:5103。您应该看到以下内容：

```
NaCl Json Cpp Test

Status: SUCCESS

Loading plug-in ruby
Loading plug-in c++
Loading plug-in python
Sample Running.
Instance Built: 14:41:31 (Sep 5 2012) 
```

要了解如何使用 Json Cpp，请参阅 nacl_sample_main.cpp 中的函数 JsonCPP。

如果您有任何问题，请告诉我。

# php - 如何隐藏会话的警告消息？

> ID：12281252
> 
> 赞同：1
> 
> 时间：2012-09-05T12:18:06.233
> 
> 标签：php, session, session-variables, mysql-error-1064

如图所示，我收到以下警告消息，我认为这是由于添加了额外的会话变量（session_start），所以我想要的是我需要隐藏该警告。 ![在此处输入图像描述](../Images/166abed37a793d9f5563db4a0e5aae00.png)

实际上，如果我在开始时没有给出会话来获取用户会话，但如果没有给出会话，则没有设置会话，但是在添加时会发出警告。可能是什么问题？

代码：

```
 <?php
    session_start();
    include("connect/config1.php");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:20:20.117

您必须放置`session_start()`在文档的开头。在此调用之前必须没有输出。

隐藏消息不会解决您的问题。

如果您只想隐藏警告：

```
<?php
ini_set('error_reporting', 0);
ini_set('display_errors', 0);
?> 
```

查看您的 fullsearch.php，开头可能有一个空行（之前`<?php`）。去掉它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:24:26.607

永远不要试图在开发环境中*隐藏*警告：它们在寻找错误方面非常有用。例如，如果没有这个特别的警告，您可能永远不会知道为什么实际上没有发送与会话相关的标头（换句话说，为什么会话不起作用）。

消除显示警告的原因。这个特殊的警告很可能是由在您可信赖的`<?php`代码分隔符前面爬行的恶意空格引起的。这意味着服务器已经开始向客户端输出一些东西，但是您希望他们回到发送标头...

因此，请检查您的文件并确保在调用之前*没有*回显任何内容。[这个讨论](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)可能会很有帮助。)`session_start()`

**更新：**

实际上，您在问题中引用的代码非常清楚：

```
 <?php
    session_start();
    include("connect/config1.php");
?> 
```

看，`<?php`这里前面是空格。这意味着服务器将实际发送这些符号（在 HTTP 响应正文中），然后才开始解析脚本本身。但随后它将被指示发送*头球*- 并因这个警告而犯规。

解决方案很简单：删除空格。这样不仅警告会消失，而且会话也将开始工作。)

# r - 在 R 中得到一个曲面图

> ID：12281255
> 
> 赞同：1
> 
> 时间：2012-09-05T12:18:10.407
> 
> 标签：r, plot, field, geometry-surface

我正在尝试从数据框中获取曲面图`AAA`：

```
j     a           m  p       o            f
13929 0.86739583  19 165.83  0.1588727    13.24444
13930 0.63166667  19 178.19  0.6105804    12.68333
13932 0.90212963  17 157.77  0.3345627    12.52222
13933 0.80152778  68 146.19  0.1219885    12.35000
13934 0.75784722  62 134.88  0.1531627    12.36667
13935 0.57763889  66 123.80  0.4093869    12.47500
13936 0.56201389  88 112.87  0.9095722    12.45833
13937 0.51680556  26 102.03  0.8494420    12.37500
13938 0.46093333  28  91.20  0.9153419    12.21111
13939 0.16645833  24  80.30  0.8309784    12.04444
13940 0.15451389  36  69.23  2.2847927    12.15556
13941 0.51347222 134  57.92  2.9551087    12.42500
13942 0.33763889 128  46.31  3.5784096    12.53333
13943 0.12937500  38  34.33  3.7371723    12.47778
13944 0.42760870  63  22.00  4.7831677    12.46667
13945 0.09962121   8   9.36  4.8281897    12.30000
13950 0.97901515  18  57.70  0.0000000    12.15833
13951 0.85333333  14  71.07  0.0000000    12.48333
13952 0.92811594  14  84.28 10.0444672    12.49167
13953 0.84812500  42  97.29  7.8020987    12.51667 
```

我的代码：

```
require(fields)
fitx <- Tps( AAA[, 4:6], AAA$a)
out.p <- predict.surface(fitx, xy = c(4,5))
plot.surface(out.p, type="p") 
```

但是，它并没有通过。显然，网格不足以表示数据，并且无法获取`predict.surface`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T07:30:27.547

在`Tps`函数中，您的`x`矩阵是`AAA[, 4:6]`，因此具有三列。

但是在`predict.surface`函数中，您指定了`xy = c(4,5)`. 传递给`xy`参数的值与`fitx`对象中的矩阵相关。`fitx`由于使用函数创建的矩阵`predict.surface`有三列，所以不能参考第 4 列和第 5 列。相反，原始 data.frame 的第 4 列和第 5`AAA`列对应于 中的第 1 列和第 2 列`fitx`。

您可能希望尝试：

```
library(fields)
fitx <- Tps(AAA[, 4:6], AAA$a)
out.p <- predict.surface(fitx, xy = c(1,2)) # Note the different argument passed to `xy`
plot.surface(out.p, type="p") 
```

# java - 无法加载 Skuli 库

> ID：12281264
> 
> 赞同：1
> 
> 时间：2012-09-05T12:18:26.380
> 
> 标签：java, automated-tests, ui-automation, sikuli

尝试执行以下 java 代码时遇到异常：

```
package testSikuliPackage;
import org.sikuli.script.*;
public class MyFirstSikuliTest {
public static void main(String[] args) throws FindFailed {
    float similarity = (float) 0.8;
    int timeout = 5;
    Pattern winStartBtn = new Pattern("img/start.PNG");
    Screen s = new Screen();
    if (s.exists(winStartBtn.similar(similarity), timeout) != null) {
      try {
        s.click(winStartBtn, 0);
    } catch (Exception e) {
        e.printStackTrace();
    }
    }
}
} 
```

我已确保使用 Java 32 位。确保 java 和 sikuli 的环境变量设置正确。无法弄清楚到底是什么问题！

```
C:\Users\Admin\AppData\Local\Temp\tmplib\VisionProxy.dll: Can't find dependent libraries
  at java.lang.ClassLoader$NativeLibrary.load(Native Method)
  at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1807)
  at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1703)
  at java.lang.Runtime.load0(Runtime.java:770)
  at java.lang.System.load(System.java:1003)
  at com.wapmx.nativeutils.jniloader.NativeLoader.loadLibrary(NativeLoader.java:44)
  at org.sikuli.script.Finder.<clinit>(Finder.java:33)
  at org.sikuli.script.Regi... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:25:58.740

对不起..我解决了这个问题。它与环境变量有关。错过了一个“;”......

对于其他人，如果您遇到类似问题，请尝试此...

1.  设置 SIKULI_HOME_home 路径
2.  设置 JAVA_HOME（确保 java 是 32 位版本）
3.  设置您的路径 = %Path%;%JAVA_HOME%\bin;%SIKULI_HOME%\libs;

和tadaa ..它应该工作..！谢谢。

# android - 如何检查数据库是否被锁定

> ID：12281267
> 
> 赞同：3
> 
> 时间：2012-09-05T12:18:35.413
> 
> 标签：android, sqlite

我在检查我的数据库是否被锁定时遇到错误。这是我的数据库类。在名为 checklocked 的方法中检查它是否被锁定。

```
private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME
                    + " INTEGER NOT NULL, " + KEY_SYNC + " INTEGER);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_2 + " (" + ID_ROW
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + VALUE_ROW
                    + " INTEGER NOT NULL);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_3 + " (" + ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + STATE
                    + " INTEGER NOT NULL);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_4 + " (" + ID_CONTACTS
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + NAME
                    + " TEXT NOT NULL, " + NUMBER + " TEXT NOT NULL);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_5 + " (" + ID_OFFLINE
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + BODY + " TEXT, "
                    + PHONE + " TEXT, " + DATE + " TEXT, " + M_TYPE + " TEXT, "
                    + CONTACT + " TEXT, " + APP_NAME + " TEXT, " + PACKAGE
                    + " TEXT, " + VERSION + " TEXT," + TYPE + " TEXT, "
                    + DURATION + " TEXT, " + TYPE_CALL + " TEXT);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_6 + " (" + ID_CALL_LOG
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + ID_CALL_LOG_ID
                    + " INTEGER NOT NULL);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLE_7 + "(" + ID_USED
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + ID_USED_YES_NO
                    + " INTEGER);");

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE_2);
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE_3);
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE_4);
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE_5);
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE_6);
            onCreate(db);

        }

    }

    public Database(Context c) {
        ourContext = c;

    }

    public Database open() throws SQLException {
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public boolean checklocked() {
        if (ourDatabase.isDbLockedByCurrentThread()) {
            return true;
        } else {
            return false;
        }
    }

    public void close() {
        ourHelper.close();

    } 
```

这段代码给了我这个错误：

```
09-05 14:13:38.955: E/AndroidRuntime(2262): FATAL EXCEPTION: main
09-05 14:13:38.955: E/AndroidRuntime(2262): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in com.background.Broadcast_Reciver@41647888
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.os.Handler.handleCallback(Handler.java:605)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.os.Looper.loop(Looper.java:137)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.app.ActivityThread.main(ActivityThread.java:4507)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at java.lang.reflect.Method.invokeNative(Native Method)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at java.lang.reflect.Method.invoke(Method.java:511)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at dalvik.system.NativeStart.main(Native Method)
09-05 14:13:38.955: E/AndroidRuntime(2262): Caused by: java.lang.NullPointerException
09-05 14:13:38.955: E/AndroidRuntime(2262):     at com.background.Database.checkopened(Database.java:139)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at com.background.Broadcast_Reciver.onReceive(BroadcastService.java:100)
09-05 14:13:38.955: E/AndroidRuntime(2262):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
09-05 14:13:38.955: E/AndroidRuntime(2262):     ... 9 more 
```

我已经阅读了一些解释这种方法的谷歌文档，但没有示例。也许我没有正确使用这种方法。

谢谢

# c++ - 具有不完整值类型的映射

> ID：12281274
> 
> 赞同：6
> 
> 时间：2012-09-05T12:19:15.780
> 
> 标签：c++, map, c++11, std, libc++

我收到以下错误：

```
class Test
{
    std::map<std::string,Test> test;
}; 
```

错误是“字段的类型'Test'不完整”。我阅读了一些线程，建议这可能是 xcode 附带的 libcxx 版本中的一个错误，但如果我只需将其更改为：

```
class Test
{
    std::map<std::string,std::shared_ptr<Test>> test;
}; 
```

我只是想仔细检查这绝对是一个正确的错误，而不是一个错误。

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T08:17:52.420

标准要求，标准库模板组件中使用的所有类型必须是完整的，除非另有说明。因此 libc++ 的错误是正确的。使用不完整的类型是未定义的行为（§17.6.4.8[res.on.functions]/2），所以 libstdc++ 接受它也没有错。

您可以像以前一样使用指针对象来构造完整的类型。但是您也可以使用一些允许不完整类型的第三方集合库，例如[`boost::container::map`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/container/map.html)旨在[允许不完整类型](http://www.boost.org/doc/libs/1_51_0/doc/html/container/containers_of_incomplete_types.html)。

* * *

§17.6.4.8 其他功能/2：

> 特别是，在以下情况下效果是不确定的：
> 
> *   ...
>     
>     
> *   如果在实例化模板组件时将不完整的类型 (3.9) 用作模板参数，除非该组件特别允许。

（唯一明确允许不完整类型的组件是、`declval`、`unique_ptr`、`default_delete`和`shared_ptr`。）`weak_ptr``enable_shared_from_this`

# linux - exec命令上的Linux shell脚本语法错误

> ID：12281277
> 
> 赞同：1
> 
> 时间：2012-09-05T12:19:19.597
> 
> 标签：linux, shell

我在我的 shell 脚本顶部附近添加了以下命令，以便将脚本输出记录到文件中。当我以我的用户 jsmith 身份运行脚本时，这没有问题，但是当脚本在 crontab 中以 root 身份运行时，我收到一个错误：

```
syntax error near unexpected token:

exec &> >(tee $LOG_PATH$TIMESTAMP.log) 
```

我确实在命令上方正确定义了 $LOG_PATH 和 $TIMESTAMP ：

```
LOG_PATH="/home/jsmith/script/logs/"
TIMESTAMP="$(date -d "today" +"%Y-%m-%d-%H:%M")" 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:25:08.353

通常，Linux 具有多个具有细微语法差异的 shell（sh、csh、dash、bash 等）。您可能使用 bash 测试了脚本，而 crontab 使用 dash 执行。

我建议你以下：

1.  检查您的脚本需要什么外壳（查看第一行）
2.  告诉 cron 使用该 shell，即`SHELL=/bin/my_shell`在 crontab 的开头设置（有关详细信息，请参见[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab%205)）。

# javascript - javascript：如果用户没有更改，则表单值为空

> ID：12281281
> 
> 赞同：-1
> 
> 时间：2012-09-05T12:19:31.313
> 
> 标签：javascript, html, forms, javascript-events

我有一个有 2 个输入的表格

```
<input type="text" name="keyword" value="Search" onfocus="wipe(this)"/>
<input type="text"  name="city" value="City" onfocus="wipe(this)"/> 
```

一旦你用鼠标单击它，我的 javascript 就会摆脱表单字段中的预设值：

```
function wipe(obj)
{
obj.value="";
} 
```

我的问题是，假设用户没有在 city 字段中输入任何内容，我该如何做到这一点，以便在提交表单时该字段的值为空而不是单词 City？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:26:12.217

您在这里使用了错误的技术。您应该使用大多数主流浏览器都[支持的](http://caniuse.com/#search=placeholder)[占位符](http://www.w3.org/TR/html5/common-input-element-attributes.html#the-placeholder-attribute)， IE 除外。因此，如果这不是您所关心的，那么您绝对应该使用它。特别是，如果您有该字段的标签元素。否则，您需要在提交时检查该输入值并查看它是否等于字符串 city

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:40:24.823

**占位符** 是一个很好的属性，当我们习惯于使用值来显示我们拥有哪个文本框时，它可以解决您的问题，它是过去的历史

```
 <input type="text" name="keyword" placeholder="Search" /> 
```

如果您仍想使用 java 脚本，请修改您的代码，如下所示

```
<input type="text" name="keyword" value="Search" onfocus="wipe(this,'Search')" onblur="wipe2(this,'Search')"/>
<input type="text"  name="city" value="City" onfocus="wipe(this,'City')" onblur="wipe2(this,'City')"/> 
```

第二种方法的脚本功能

```
function wipe(obj, str)
{
if(obj.value!=str){
obj.value="";}
}

function wipe2(obj, str)
{if(obj.value==""){
obj.value=str;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:23:38.493

在提交时为什么不检查`value='city'`

```
if(obj.value!='city')
{
    //your code here
} 
```

或者如果您在使用 jquery 时没有问题，请使用水印插件，这也将处理浏览器兼容性问题

[jQuery水印](http://code.google.com/p/jquery-watermark/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:27:31.780

只需声明一个变量 hasChanged 并在调用擦除函数时将其设置为 true。然后在提交按钮的 onclick 函数上调用一个函数说“SubmitFunction()”。

```
<input type="text" name="keyword" value="Search" id="Search" onfocus="wipe(this)"/>
<input type="text"  name="city" value="City" id="City" onfocus="wipe(this)"/>
<input type="submit"  name="submit" value="submit"  onclick="SubmitFunction();"/>
var hasChanged=false;
function wipe(obj)
 {
  hasChanged=true;
  obj.value="";
 }
function SubmitFunction()
 {
 if(hasChanged==false)
  {

   $("#City").val('');
  }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:32:06.837

您应该再添加一个属性（例如 default `<input type="text" name="keyword" default="Search" value="Search" onfocus="wipe(this)"/>`），其值与 value 属性相同。

在提交时比较每个表单字段

```
function onSubmit(){
    for (var fields in form)
      if(form[fields].value== form[fields].getAttribute("default")){
          form[fields].value = "";
      }
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T12:23:50.707

尝试这个：

```
if($('input[name="city"]').val() && $('input[name="city"]').val() != 'city') { yourform.submit(); } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T12:27:15.930

有关此问题的一些解决方案，请参阅[如何使用在键入时消失的提示文本 (jQuery) 预填充输入文本字段。](https://stackoverflow.com/questions/4289025/how-to-prepopulate-input-text-fields-with-prompting-text-which-disappears-on-typ)如果您可以使用 HTML5，最好的解决方案可能是使用“占位符”而不是“值”。

# symfony - 在 symfony2 中禁用对路由的直接访问

> ID：12281284
> 
> 赞同：0
> 
> 时间：2012-09-05T12:19:37.223
> 
> 标签：symfony

我创建了一个 symfony2 网页，其中包含“/new”路由中的表单。用户将输入发布到控制器，控制器呈现“/create”，如果成功，则调用最终路由“/thankyou”并出现感谢页面。

我想禁用对 /thankyou 路由的直接访问，该路由只能通过成功的 /create POST 访问。这适用于 /create（为什么？）但不适用于 /thankyou。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:11:03.150

您可以根据推荐人信息在“/Thankyou”操作中添加一些条件：

```
$request->headers->get('referer'); 
```

或者您可以像@Florian 所说的那样在 url 中使用一些额外的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:22:35.997

在路由中添加 a`requirements: _method: POST`至少会限制对 POST 操作的访问。

但我不确定你如何才能实现只接受来自特定站点的 POST。也许使用作为您在控制器中检查的参数传递的特殊令牌可以解决问题。

# mysql - 上传带有文本框的文件（上传是可选的）

> ID：12281286
> 
> 赞同：0
> 
> 时间：2012-09-05T12:19:51.597
> 
> 标签：mysql, file, codeigniter, upload

我有一个表单，其中有两种类型的字段意味着输入 text 、 radio 、 select 、 textarea 和文件上传字段。我使用相同的表格进行插入和编辑。我的问题是我必须上传文件并将数据插入表中。上传也是可选的。我没有找到任何逻辑来处理这个问题。谁能建议我如何完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:16:23.087

在半伪代码中，逻辑是

```
 if ($this->form_validation('your_rule'))
   {
         // Insert data to database
     $this->insert('stuff');

     // Now check for file upload
     if ($FILES['file_name'])
     {
        // Do upload
     }
} 
```

或者

作为 form_validation 的一部分，您可以进行自定义回调来处理上传。然后在你的表单验证中包含这个“规则”——它会在一次扫描中处理所有事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:19:36.057

经过一番研究，我在这里找到了解决方案

使用 Codeigniter 表单验证库

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

和

[http://keighl.com/post/codeigniter-file-upload-validation](http://keighl.com/post/codeigniter-file-upload-validation)

一篇很棒的文章。解决我的问题

# makefile - 如何使用 makefile 构建一个项目的多个变体？

> ID：12281288
> 
> 赞同：0
> 
> 时间：2012-09-05T12:20:00.117
> 
> 标签：makefile, nmake

我从事一个项目，该项目通常在多个操作系统和多种配置中构建和运行。我使用两个编译器：icc 和 gcc，以及这些编译器的多组参数。这可以给我一个项目构建的许多变体。

我想做的是：

> *   使用带有一组参数的 icc 或 gcc 编译器编译项目
> *   在新构建之前和之后测试应用程序的性能>
> *   比较获得的结果
> *   为另一组参数编译项目并重复前面的步骤

有谁知道如何使用makefile很好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:45:11.927

你只需要根据你的需要级联你的make-targets：例如：

```
# Assumed that $(CONFIGURATION_FILES) is a list of files, all named *.cfg
# There you store your set of arguments per step

#The main target 
all: $(CONFIGURATION_FILES)

#Procedure for each configuration-file
%.cfg: compile_icc compile_gcc test compare

compile_icc:
#DO whatever is necesarry

compile_gcc:
#DO whatever is necesarry

test:
#DO whatever is necesarry

compare:
#DO whatever is necesarry 
```

但是，对于这种工作，我宁愿使用一些构建自动化工具......我只知道 Maven，但对于基于 Makefile 的构建，其他一些工具可能更适合......看看不同的选项，例如这里： [https ://en.wikipedia.org/wiki/List_of_build_automation_software](https://en.wikipedia.org/wiki/List_of_build_automation_software)

# winapi - 编写 Win32 GUI 应用程序的选项？

> ID：12281292
> 
> 赞同：0
> 
> 时间：2012-09-05T12:20:06.457
> 
> 标签：winapi, programming-languages

由于 SO 返回“包含“win32 gui 应用程序”的帖子的 4,476 个搜索结果”......我将不得不问一个可能以前被问过但在所有这些问题中迷失的问题。

目前，为 Win32 编写 GUI 应用程序的选项有哪些，这些应用程序有足够多的追随者，以便该环境提供足够多且得到良好支持的第三方工具？

我可以想出：

*   C++
*   德尔福，可能还有
*   RealBasic（尽管它最初是一个 Macintosh 工具这一事实可能会导致外观上的小而明显的问题）。

除了相对缺乏支持良好的第三方工具外，Python + wxWidgets 或 [Power|Pure|Free]Basic 等解决方案也不是好的选择：前者有太多 1.0 小部件（找不到商业级网格，例如），而后者是过程语言，因此需要编写像 Petzold 的书这样的应用程序，其生产力较低。

是否有其他可用的解决方案？

谢谢你。

* * *

编辑：抱歉不够精确：.Net 和 Java 等大型工具不是选项。我正在寻找可以静态构建整个 EXE（例如 Delphi）或提供足够轻量级运行时（VBClassic）的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:29:42.340

如果你是编程新手，如果你只是想为 Windows 平台制作这个应用程序，我也建议你使用 C#，但是使用 Mono 等工具，它可以移植到 OS X 和 Linux 平台。

Windows 有自己的 IDE 专门为此调用 Visual Studio Express C# [Visual Studio 的 C#](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express)

如果你想用那种编程语言说的话，还有一个 C++ 版本。

Mono 项目允许您在 Linux 和 Mac 中使用 C#，并将应用程序移植到 iOS 和 Android [http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:25:46.633

您可以使用 C++，甚至可以使用 .net 框架来开发您的 Windows 应用程序。与您提到的其他选项相比，.Net 框架有许多开源贡献模块和付费模块，以及互联网上的大量资源，以加快开发速度。

如果您要使用 Windows 32 gui 应用程序，我更愿意使用 .net 框架、C++。

Java Swings 也是另一个独立于平台的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:22:06.817

您可以使用[Lazarus](http://www.lazarus.freepascal.org/)作为 Delphi 的免费替代品。如果您以后决定将 Win32 应用程序移植到 Linux 或 MacOS，那么您很有可能会检查其“一次编写，随处编译”的座右铭。在理想情况下它会起作用，但实际上您可能需要一些条件定义部分。

# sas - 如何通过proc报告在另一个单元格上方的excel中添加单元格

> ID：12281294
> 
> 赞同：0
> 
> 时间：2012-09-05T12:20:08.447
> 
> 标签：sas

```
ods listing close;
ods tagsets.excelxp file='Y:\fonts\CC_ACQ_fonts_v2_har.xls' style=sasweb
options(sheet_name="CC_ACQ_JUN12_V2");
proc report data=work.matrix_input nowd
 style(report)={font_face=times font_size=1 font_weight=bold bordercolor=black}
 style(header)={font_face="Times New Roman" font_size=8pt  font_face=times    cellwidth=1in background=gray foreground=black font_weight=bold bordercolor=black  }
 style(column)={font_face="Times New Roman" font_size=8pt 
         just=center cellheight=15in font_face=times};
 column CELL offer_description pop product;
 run;
ods tagsets.excelxp close;
ods listing; 
```

知道excel中的第一列是CELL 知道上面的CELL（列名）我想写BY：CELL（在另一个单元格中）和上面的offer_description pop产品（3列）我想写TOTAL Consildate Mail），以绿色为背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:24:54.477

这应该有效。基本上，您使用 ACROSS 变量来获取第二个标题，然后您必须放入一个非打印虚拟列才能使事情正常运行（您不能完全拥有 ACROSS 变量）。您可以使用样式声明添加颜色。如果您使用 PROC TEMPLATE 定义样式，您的代码将看起来更清晰，这样您就可以使用样式继承而不是一遍又一遍地重写您的样式。

```
data class;
set sashelp.class;
total='Total Consolidated';
namedummy='By Name';
dummy=' ';
run;

ods listing close;
ods tagsets.excelxp file='c:\temp\test.xml' style=sasweb
options(sheet_name="CC_ACQ_JUN12_V2");
proc report data=class nowd
 style(report)={font_face=times font_size=1 font_weight=bold bordercolor=black}
 style(header)={font_face="Times New Roman" font_size=8pt  font_face=times    cellwidth=1in background=gray foreground=black font_weight=bold bordercolor=black  }
 style(column)={font_face="Times New Roman" font_size=8pt 
         just=center cellheight=15in font_face=times};
 column dummy namedummy,name total,(age height weight);
define total/' ' across style={font_face="Times New Roman" font_size=8pt  font_face=times    cellwidth=1in background=green foreground=black font_weight=bold bordercolor=black };
 define namedummy/' ' across;
 define dummy/noprint;
 run;
ods tagsets.excelxp close;
ods listing; 
```

# php - Curl 或 Mysql 服务器使用情况

> ID：12281299
> 
> 赞同：2
> 
> 时间：2012-09-05T12:20:30.050
> 
> 标签：php, mysql, curl

我试图做出决定，但我很挣扎。我有几个选择。

一种选择是让每个用户每 10 秒运行一次 mysql 查询，另一种选择是让他们使用 curl 从另一个页面提取结果。

查询从数据库中提取 80 个值（2 列，40 行）。

我只是不确定哪个对资源最不利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:18:59.140

已切换到使用 Memcache 并使用 Ajax 作为重新加载器，这大大减少了服务器负载。

感谢所有反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:27:00.743

好问题。您可以在两种不同的数据流备选方案之间进行直接选择。

您说过您有 1-40 个用户，但大多数处于该用户数的低端。你还没有说这是一个网络应用程序还是一个直接连接的应用程序，但你使用的是 php，所以它可能是一个网络应用程序。

您已经说过您需要重新加载并可能重新向每个用户显示一个包含 40 个短行的结果集。

你说过你需要每十秒钟做一次。

你*还没有*描述你的十秒规范的起源。据推测，结果集中的某些变化经常足以证明十秒刷新是合理的。

您*还没有*描述您的每个用户是否获得不同的结果集，或者他们是否都相同。但这并没有太大的区别。

那么，有哪些选择和问题呢？让我们解决它。

A. 每次刷新都使用 MySQL 查询。

B. 为每次刷新获取另一个网页（使用 curl）。

1.  Pro A. 你的系统会更简单，也不会因为系统故障而出现故障。

2.  Pro A. 编程和测试要容易得多。

3.  Pro A. 生产中的故障将更容易诊断和修复。

4.  骗局 A. 每分钟用 40 x 40 x 6 个请求访问 MySQL 数据库似乎很多。

5.  骗局 4\. 但是您仍然必须生成要使用 CURL 抓取的网页。

6.  缺点 4\. 如果您的系统负载过重，您可以通过将 10 秒更改为 30 秒或类似的时间来优雅地降级。

7.  缺点 4\. MySQL 在处理小型缓存请求方面非常快。

8.  Pro B. 如果已经生成了您正在使用 CURL 的网页，那么这可能会更快。

9.  骗局 8\. 但它仍然是一个更复杂的操作。

10.  Pro A. 向服务器添加 RAM 比向复杂系统添加人工要便宜得多。

基于这个分析（这是基于我对你系统的不完全理解）MySQL绝对是要走的路。您可能可以根据自己的理解扩大此分析。

# ruby-on-rails - 为什么在 Ruby on Rails 中使用 Sunspot Solr 时出现 NullPointerException？

> ID：12281300
> 
> 赞同：0
> 
> 时间：2012-09-05T12:20:32.603
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我最近将本地项目中的 Rails 升级到了 3.2.8，现在当我进行任何搜索时，我收到以下错误：

```
RSolr::Error::Http - 500 Internal Server Error
Error: java.lang.NullPointerException
    at org.apache.solr.servlet.SolrServlet.doGet(SolrServlet.java:91)
    at org.apache.solr.servlet.SolrServlet.doPost(SolrServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:297)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)

Request Data: "fq=type%3ALocation&fq=%7B%21geofilt+sfield%3Dcoordinates_ll+pt%3D29.813142%2C-95.309789+d%3D60%7D&q=gem&fl=%2A+score&qf=name_text%5E3.0+alternate_name_text%5E2.0+business_name_text%5E1.7+category_ids_text%5E1.2+reviews_text%5E0.8+questions_answers_text%5E0.6+simple_name_basic_text+name_without_articles_text+description_text+keywords_text&defType=dismax&pf=name_text%5E5.0+category_ids_text%5E2+reviews_text%5E2.5+questions_answers_text%5E2&mm=2%3C66%25&ps=1&qs=1&tie=0.1&start=0&rows=10&facet=true&f.category_ids_sm.facet.sort=false&f.category_ids_sm.facet.mincount=1&facet.field=category_ids_sm"

Backtrace: /Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/bundler/gems/sunspot-8f330615edb1/sunspot/lib/sunspot/search/abstract_search.rb:45:in `execute'
/Users/a_user/rails_projects/project_a/lib/location_searchable.rb:132:in `search'
/Users/a_user/rails_projects/project_a/app/controllers/locations_controller.rb:34:in `index'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/a_user/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action' 
```

我已将 solr schema.xml 更改为以前的版本，但它仍然给我同样的错误。

我安装的宝石：

```
sunspot (2.0.0.pre.120720)
sunspot_rails (2.0.0.pre.120720)
sunspot_solr (2.0.0.pre.120720) 
```

此外，solr 错误日志显示以下内容：

```
Sep 5, 2012 9:24:50 PM org.apache.solr.core.SolrResourceLoader locateSolrHome
INFO: JNDI not configured for solr (NoInitialContextEx) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T17:59:31.217

尝试删除`solr`文件夹并重新启动 Solr。它应该重新生成`solr/data`和`solr/conf`文件夹。然后重新索引，例如：

```
cd /path/to/rails/root
rm -r solr
rake sunspot:solr:run
rake sunspot:solr:reindex 
```

另请注意 sunspot 2.0 不适用于 JRuby 1.7，仅适用于 1.6。

# python - ctypes.pointer、ctypes.POINTER 和 ctypes.byref 有什么区别？

> ID：12281306
> 
> 赞同：19
> 
> 时间：2012-09-05T12:20:57.690
> 
> 标签：python, ctypes

在ctypes中，指针和byref有什么区别？它们似乎都是将指针传递给函数的一种方式，例如作为输出参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:30:10.190

在功能上，它们是等价的。

但是，[python 文档](http://docs.python.org/release/2.5.2/lib/ctypes-passing-pointers.html)确实指出

> 指针做了很多工作，因为它构造了一个真正的指针对象，所以如果你不需要 Python 本身的指针对象，使用 byref 会更快。

# android - 在 Android 上实现 Google Play 应用程序静默安装功能

> ID：12281308
> 
> 赞同：12
> 
> 时间：2012-09-05T12:21:08.080
> 
> 标签：android

嗨专家/专家黑客，

我正在尝试在 android 上实现 Google Play 应用程序静默安装功能（类似于 appbrain 快速网络安装程序）。

到目前为止，我能够实现以下目标：

1.  找出一种检索 Google Play Auth Token 的方法（从而授予我的应用程序与电话上的 Google Play 应用程序通信的权限）。我在下面列出了我用于此的代码：

    ```
     Log.i(TAG,"Getting the Google Play Auth Token Using Account Manager : START");
        AccountManager accountManager = AccountManager.get(getApplicationContext());
        Account[] accArr = accountManager.getAccountsByType("com.google");

        for (Account acc : accArr) {
            Log.i(TAG, "For Account Name : " + acc.name + " - "+ "Account Type : " + acc.type);
            accountManager.getAuthToken(acc, "googleplay", null, this,new AccountManagerCallback<Bundle>() {

                        public void run(
                                AccountManagerFuture<Bundle> paramAccountManagerFuture) {
                            try {
                                Bundle localBundle = (Bundle) paramAccountManagerFuture.getResult();
                                String authToken = localBundle.get("authtoken") + "";

                                Log.i(TAG, "Got AuthToken : " + authToken);

                            } catch (Exception ex) {
                                StackTraceElement[] starray = ex.getStackTrace();
                                StringBuffer bf = new StringBuffer();
                                bf.append("Error : " + ex.getMessage()).append("\n");
                                for (StackTraceElement ste : starray) {
                                    bf.append(ste.toString()).append("\n");
                                }
                                Log.e(TAG, bf.toString());
                            }

                        }

                    }, null);
        }
        Log.i(TAG,"Getting the Google Play Auth Token Using Account Manager : END") 
    ```

2.  了解如何检索手机的 Android-Id（我认为应该在将 appInstall 请求发送到 GPlay 服务器或 Android 手机上的 Gplay/vending 应用程序时使用此 ID）

    ```
     Log.i(TAG, "Getting the Android ID Of the Phone : START");

        Uri localUri = Uri.parse("content://com.google.android.gsf.gservices");
        ContentResolver localContentResolver = getContentResolver();
        String[] arrayOfString = new String[1];
        arrayOfString[0] = "android_id";
        Cursor localCursor = localContentResolver.query(localUri, null,null, arrayOfString, null);
        Log.i(TAG, "Column Count : " + localCursor.getColumnCount());
        if ((localCursor != null) && (localCursor.moveToFirst())) {
            String androidId = Long.toHexString(Long.parseLong(localCursor.getString(1)));
            Log.i(TAG, "Received Android ID : " + androidId);

            Log.i(TAG,"Other Value in Column : " + localCursor.getString(0));
        }

        Log.i(TAG,"Getting the Android ID of the Phone : END"); 
    ```

3.  找出要发送到 Google Play 服务器或手机上的 Gplay/vending 应用程序的协议缓冲区请求，以启动静默应用程序下载和安装过程。

    ```
    message InstallRequest {
    optional string appId = 1;
    }
    message RequestContext {
    required string authSubToken = 1;
    required bool isSecure = 2;
    required int32 version = 3;
    required string androidId = 4;
    optional string deviceAndSdkVersion = 5;
    optional string userLanguage = 6;
    optional string userCountry = 7;
    optional string operatorAlpha = 8;
    optional string simOperatorAlpha = 9;
    optional string operatorNumeric = 10;
    optional string simOperatorNumeric = 11;

    }
    message Request {
    optional RequestContext context = 1;
    repeated group RequestGroup = 2 {
    optional InstallRequest installRequest = 10;
    }
    } 
    ```

4.我什至使用了 protobuf 编译器并生成了用于处理上述协议缓冲区请求的 java 类，并用一些示例数据填充了上述协议缓冲区字段。请参阅下面的代码：

```
 public void buildAndSendSilentInstallProtoBuffMessage(String gplayAuthToken, String deviceAndroidId){

    try{
    /*
     * The Root Request Object Assumed to be Holding the Silent Install Request
     */
    Request.Builder request = Request.newBuilder(); 

    //Populating the ReequestContext Object
    RequestContext.Builder context = RequestContext.newBuilder();

    context.setAndroidId(deviceAndroidId);
    context.setAuthSubToken(gplayAuthToken);

    context.setIsSecure(true);
    context.setVersion(1002);
    context.setDeviceAndSdkVersion("dream:4");
    context.setUserLanguage("en");
    context.setUserCountry("us");
    context.setOperatorAlpha("Android");
    context.setOperatorNumeric("310260");
    context.setSimOperatorNumeric("310260");

    //Building the Install Request
    InstallRequest.Builder installRequest = InstallRequest.newBuilder();
    installRequest.setAppId("-2564446724934482383");

    //Setting the Install Request to the Request Group
    RequestGroup.Builder requestGroup = RequestGroup.newBuilder();
    requestGroup.setInstallRequest(installRequest);

    //Setting the Request Context to the Main Request Object
    request.setContext(context);

    //Setting the Request Group to the Request Object
            request.addRequestGroup(requestGroup); 
```

GPlay Token 和 Android Id 的示例数据如下：

1.  Android_ID：

3a0f901831a0f402

1.  谷歌播放验证令牌：

DQAAAMgAAACpOyPf6apRbb0i4qhTVaf0yYoikTAb4TYlHCRLrW 4mu5f14j-H35KGmO9TQKUDYCfj3-B-QIH5chfXT3bS02Uxljg7vYt4I-kgXLEJwPcynjugDcJ9fYPOh1c2FnOnywFXXxXw6hcqs5sVnJEt 5zW2ditoB5VeeXG9Zfodj9dXKobObi50-XnHoGfWi2b64Uf3EHGdQTsDCMzfZrE4mb22fr9LCW1oZG5tkzw S4KhPBHWMN2fO7w-1IZ4UK5LOI80vPBLjxBaavKAXHoVUHSNV

1.  在 Gplay 应用程序静默安装期间，我还使用我的有根 Galaxy nexus 手机进行了一些嗅探，发现只有两个 HTTP GET 请求。

我尝试复制使用 Shark for root 捕获的这两个 Http GET 请求（使用我的 root android Galaxy nexus 手机），第一个请求只是下载市场文件本身（我能够将其保存到手机的 SD 卡中。但后来它必须像任何未知来源的应用程序一样安装），而第二个请求什么也不返回。

捕获的两个 get 请求如下所示：

1.  得到一个请求：

    ```
    21 0.827240 192.168.135.102 173.194.36.4 HTTP 535 GET /market/download/Download?                                                                     packageName=com.gau.go.launcherex.theme.appwidget.gopowermaster.futureworld&versionCode=1&token=AOTCm0QRnH3rmypWtCGoAL_SU1BSt311wpyz-_LZTodkUSAlc-             f5SrdMiz5WDRDUKMMm6S3plBI9Jbh1tukT1jyCYXLgP4QhVvZvn5JLtZQ&downloadId=-165214892049282883 HTTP/1.1

     Which has the following http headers :

    Cookie: MarketDA=17214805622679635526\r\n
    Host: android.clients.google.com\r\n
    Connection: Keep-Alive\r\n
    User-Agent: AndroidDownloadManager/4.1.1 (Linux; U; Android 4.1.1; Galaxy Nexus Build/JRO03C)\r\n 
    ```

2.  获取请求二：

    ```
    44    6.595093    192.168.135.102    222.165.163.15    HTTP    608    GET /market/GetBinary/com.gau.go.launcherex.theme.appwidget.gopowermaster.futureworld/1?expire=1346838270&ipbits=0&ip=0.0.0.0&cp=SnpybWlzSFk6OTYzMzg0MTE2NzA1ODEwOTYxMjE&sparams=expire,ipbits,ip,q:,cp&signature=2C0778C4635F6F8AE1DA8479FB08DCB9BC04C2E9.60202D8D4D2FDDA70609A3862A25852F0BAA2766&key=am2 HTTP/1.1

    Which has the following http headers :

    Cookie: MarketDA=17214805622679635526\r\n
    Host: o-o.preferred.slt-cmb2.v12.lscache4.c.android.clients.google.com\r\n
    Connection: Keep-Alive\r\n
    User-Agent: AndroidDownloadManager/4.1.1 (Linux; U; Android 4.1.1; Galaxy Nexus  Build/JRO03C)\r\n 
    ```

我已经研究了大约两个星期了，但我仍然找不到以下内容：

1.  AppBrain fast Web Installer 是否使用协议缓冲区来调用手机或 Gplay 服务器上的 Gplay（自动售货应用程序）？如果是这样，上述协议缓冲区请求格式是否正确？？

2.  如果上述协议缓冲区请求格式正确，那么我应该在电话或 Gplay 服务器中的何处发送协议缓冲区请求以调用静默应用程序下载和安装程序？

我也有一个围绕这个任务的 C2DM（现在是 GCM）服务器和客户端设置。谁能指出我正确的方向或给我任何解决这个问题的线索？任何帮助深表感谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:01:43.920

只能通过 Google Play 在 Google Experience 设备上进行静默安装。更一般地说，只有预装在您的硬件上的商店才能做到这一点，因为它们需要使用操作系统的签名密钥。

这是出于安全原因。用户需要能够接受新安装的权限。操作系统无法验证非官方商店是否正确执行此操作。

第三方应用程序*必须*使用 PackageManager 安装新应用程序，这将代表您显示权限并需要明确的用户批准。

试图规避这一点可能会受到 Google Play DDA 的“禁止行为”条款的约束，这会使您的开发者帐户面临被暂停的风险。不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:36:50.907

除了受信任的应用程序之外，操作系统不允许任何人执行一些操作。

使用平台密钥签名的应用程序受到操作系统的信任，因此这些应用程序可以使用手机执行更多操作，例如静默安装。我倾向于看到平台签名的应用程序比拥有根功能更强大，只是因为它允许您更轻松地访问意图和 android API。

您不需要嗅探 Google Play 从 HTTP 服务器发送/接收的消息...您需要使用平台密钥对应用程序进行签名。问题是每个运营商/制造商/电话/版本可能具有不同的平台密钥......因此，要实现这一点，您需要为每个特定设备构建多个版本的应用程序......

一些运营商使用相同的密钥为同一制造商的所有手机签名，但其他运营商为每部手机使用不同的密钥。

您将不得不付出很大的努力并与运营商协商以允许使用此功能，或者依赖 ROOT 用户。或者只是发布使用测试密钥（Android SDK 附带的那些）签名的应用程序，它将适用于所有拥有带有测试密钥的自定义 rom 的用户。

# command-line - 图标集命令行工具“iconutil”在哪里？

> ID：12281309
> 
> 赞同：1
> 
> 时间：2012-09-05T12:21:10.737
> 
> 标签：command-line, icons, xcode4.2, osx-snow-leopard, iconutil

我有 XCode 4.2，需要向 App Store 提交 Mac 应用程序。我已经尝试了各种建议的方法来获取多分辨率图标，所以你不需要通知我。

剩下的方法是使用`iconutil`. 我在 Spotlight 中进行了搜索，在 Finder 中搜索了我的 Mac 硬盘，在终端中搜索了两个后来的 XCode`.dmg`图像，`sudo find`并在网络上查找了路径。XCode 4.4.1`.dmg`有`Iconutil.strings`and `Iconutil.xcspecs`，但就我而言。

有没有我可以下载的包来获取这个命令或工具，所以我可以转换`.iconset`？如果我可以在 XCode 中更改设置以使其允许旧`.icns`文件（之前`1024x1024`和`512x512@2x`），那将是我可以暂时接受的解决方案。我有操作系统 10.6.8。

**编辑**
我会接受一个确认该命令是否在 10.6.8 中以及它在哪里的答案。我会接受一个答案，该答案链接到最近已通过 App Store 验证批准的有效文件（最好内部未`.icns`压缩） 。`512x512``512x512@2x``.png`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T21:12:30.293

我有 Xcode 4.5。您必须在此处单独安装命令行工具。检查 Xcode 首选项 --> 下载 --> 组件。在那里您应该找到“命令行工具”和一个下载按钮，您可以在其中安装这些工具。

然后您可以按照 OS X 文档中的说明进行操作：[Optimizing for High Resolution, Provide High-Resolution Versions of All App Graphics Resources](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:25:16.517

您首先需要确保您已正确设置`xcode-select`（[手册页）；](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)这将向您显示当前设置：

```
$ xcode-select -print-path 
```

这需要指向该`/.../Xcode.app/Contents/Developer`文件夹，因此如果您已`Xcode.app`安装，`/Applications`则可以使用以下方法进行更改：

```
$ xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

现在如果`iconutil`与 Xcode 打包在一起（我目前无法检查），您应该可以使用`xcrun`（[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)）运行它：

```
$ xcrun iconutil ...whatever... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:25:50.167

我在 Snow Leopard 上安装了 Xcode 4.2 和 Xcode 3.2.5 并且 iconutil 不在系统中。

# java - clientlibs下的js文件没有被加载

> ID：12281311
> 
> 赞同：4
> 
> 时间：2012-09-05T12:21:14.023
> 
> 标签：java, javascript, jquery, aem

clientlibs 下的 js 文件没有被加载，当我尝试 `clientlibs.js`使用 url访问那些文件时`//localhost:5555/etc/designs/MyProject/clientlibs.js`（我在这个 url 中删除了 http，因为它会被视为链接），
我收到 404 错误。

但是，如果我在 felix 控制台的 HTML 配置中禁用了 minify 选项，那么这些 js 文件就会被加载。实际上 minify 选项用于压缩 CSS 和 JS 文件以及删除空白字符。我不确定为什么启用该选项后我的 JS 文件没有被加载。但在生产中，我们应该启用该选项。

我可以知道我们如何加载这些 JS 文件。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-14T17:10:31.590

在这里，启用 minify 选项只不过是压缩 js 文件。启用此选项后，如果您的 js 文件突然找不到（尝试访问这些 js 文件时出现 404 错误），那么这些 js 文件肯定会抛出一些压缩后出错。要确认这一点，请将您的每个 js 文件内容复制并粘贴到在线提供的**YUI 压缩器**中，并尝试使用该压缩器对其进行压缩，如果出现错误，则证明 js 文件中存在错误，您需要修复它。希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T21:34:44.673

Adobe 的文档警告在更改配置后删除 clientlibs 的内容：更改 Minify 或 Gzip 的设置时，您还需要删除 /var/clientlibs 的内容。这是客户端库的缓存版本，将在下次请求时重建。

请参阅此处的文档：http: [//dev.day.com/docs/en/cq/current/deploying/configuring_osgi.html](http://dev.day.com/docs/en/cq/current/deploying/configuring_osgi.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T17:40:49.027

您还可以查看 cq 日志 (error.log)。包含在最终 clientlibs.js 中的 js 库之一可能有问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:46:31.937

您的 JS 缩小器可能会将缩小的文件放置到不同的位置。

# firefox - Firefox 扩展 - 错误的字符集？

> ID：12281319
> 
> 赞同：0
> 
> 时间：2012-09-05T12:21:44.170
> 
> 标签：firefox, character-encoding

如果在 Firefox 扩展中我写：

gBrowser.contentDocument.getElementsByTagName('html')[0].innerHTML = "†";

我得到一个�字符。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:09:22.957

在目标页面的编码中写入字符，或使用 HTML 实体`&dagger;`†

# android - 使用 Android 语音识别 API

> ID：12281332
> 
> 赞同：3
> 
> 时间：2012-09-05T12:22:37.930
> 
> 标签：android, speech-recognition

有什么方法可以使用果冻豆的离线语音识别api制作应用程序并选择灵敏度？

其实我想建立一个应用程序，测试用户的英语口语和分数。

如果有人可以提供指向当前执行相同操作的应用程序的链接，那也会很有帮助，因为在这种情况下，我不需要构建应用程序来帮助自己

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:34:43.537

如果您想在 android 上进行离线语音识别，请使用 Pocketsphinx：

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

# ajax - 使用 Ajax 为基于 WPML 的站点加载单个帖子

> ID：12281333
> 
> 赞同：0
> 
> 时间：2012-09-05T12:22:41.997
> 
> 标签：ajax, wordpress

我想使用 Ajax 将单个帖子加载到索引页面中，用于我正在处理的基于 WPML 的站点。不知道我错过了什么，但在使用多种语言并获取正确的帖子时似乎有一个问题。

这是我写的代码 -

```
function loadProject(reference) {
    console.log(window.location.origin + '/references/' + reference);
    // Displays "http://mysite.com/references/example-post/", which exists

    $('#content').load(window.location.origin + '/references/' + reference, function() {
        console.log('Load was performed.');
    });
} 
```

load() 之后我没有到达 JS 日志，但我也没有收到任何错误消息（例如“找不到文件”）。“References”是我使用 Types 插件创建的自定义帖子类型，并且有一个名为 single-references.php 的自己的文件。我不完全确定 CPT 如何与 WPML 一起工作，这可能就是问题所在。我有两种语言，瑞典语和英语，而 CPT 只有一种语言（“参考”）。

[已解决] 使用 .get() 方法来检索帖子，现在它可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:04:52.500

好吧，没有控制台错误，没有网络查询：

*   这不是 WPML 问题

*   你检查过#content 真的存在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:21:36.407

在 chrome 开发工具中，转到网络，然后触发您的功能。你会看到你收到什么。

# r - 使用 ggplot2 每组添加回归线

> ID：12281335
> 
> 赞同：16
> 
> 时间：2012-09-05T12:22:46.940
> 
> 标签：r, ggplot2

我做下面的图表：

```
> ddd
      UV.NF TRIS            volvol
2  145.1923   31  500 µl / 625  µl
3  116.3462   50  500 µl / 625  µl
4  127.1635   60  500 µl / 625  µl
5  125.9615   69  500 µl / 625  µl
6  162.0192   30    1 ml / 625  µl
7  166.8269   50    1 ml / 625  µl
8  176.4423   60    1 ml / 625  µl
9  171.6346   70    1 ml / 625  µl
19 292.3077   31 500 µl / 2500  µl
20 321.1538   50 500 µl / 2500  µl
21 225.0000   60 500 µl / 2500  µl
22 263.4615   69 500 µl / 2500  µl
23 301.9231   30   1 ml / 2500  µl
24 350.0000   50   1 ml / 2500  µl
25 282.6923   60   1 ml / 2500  µl
26 282.6923   70   1 ml / 2500  µl
35 133.6207   31  500 µl / 625  µl

ggplot() +  
    geom_point(aes(y = log(UV.NF), x = TRIS, colour=ddd[,"volvol"], shape=ddd[,"volvol"]), 
        data=ddd) + 
    labs(colour = "volvol", shape="volvol") + xlab("TRIS (mM)") + 
    guides(colour = guide_legend(title="Vol. lyo. / Vol. reconst."), 
        shape=guide_legend(title="Vol. lyo. / Vol. reconst.")) +
    scale_shape_manual(values = c(19,19,3,3)) + scale_colour_manual(values = c(2,4,2,4)) 
```

![图形](../Images/822f6a9fb31b12c33b7e3ee93bcbae31.png)

我想为图例中出现的四个组中的每一个添加回归线`lm(y~x)`。我做了很多尝试，`geom_smooth()`但都没有成功。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-05T12:40:35.583

我不太确定这是否是您想要的，但是您是否尝试过以下方法？

```
ggplot(ddd,aes(y = log(UV.NF), x = TRIS, colour = volvol, shape = volvol)) +
   geom_point() + geom_smooth(method = "lm", fill = NA) 
```

这给了我下面的情节与你的数据：![在此处输入图像描述](../Images/99b2e619f36b067f90e9f1f010e8530d.png)

还有一些关于[geom_smooth](http://had.co.nz/ggplot2/geom_smooth.html)的文档，它几乎可以满足您的需求，尽管是以更复杂（但更灵活）的方式。

# magento - 谷歌分析不跟踪 Magento 1.7 中的转化

> ID：12281336
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:00.740
> 
> 标签：magento, google-analytics

我正在使用 Magento 内置的 Googleanalytics 模块，该模块适用于页面浏览量，但不适用于转换。该帐户在 Google 上设置得很好，但它没有在结帐/单页/成功页面中添加 addTrans 部分。

今天早上我做了很多挖掘，发现观察者确实正确地观察到了“checkout_onepage_controller_success_action”，并且确实运行了。它执行以下操作：

```
$block = Mage::app()->getFrontController()->getAction()->getLayout()->getBlock('google_analytics');
    if ($block) {
        $block->setOrderIds($orderIds);
    } 
```

我做了一些回显，它确实检索了块，它还正确设置了订单 ID。但是，在块本身中，如果我回显 $this->getOrderIds(); 它是空的。

我的下一个想法是，也许它可能在页面上使用了两个 GA 块，并且可能将数据传递给第一个，但回显了第二个的 HTML，但我不知道如何开始检查！Googleanalytics.xml 文件中只有一个块，我不会在其他任何地方使用该块名称！

有没有人经历过类似的？或者知道我可以从这里去哪里吗？

编辑：如果 $this->getOrderIds() 返回一个数组，则 Ga.php 块包含事务代码，但它没有这样做。然而，观察者正在做 $block->setOrderIds($order_ids); 它正在通过一个包含订单 ID 的数组。所以观察者将 ids 传递给块，并且块正在接收它们（设置 setBlockIds 的方法并回显参数，确实显示了数组），但是当块尝试访问自己的数据时，它突然不那里（$block->getData() 返回一个属性数组，但没有 order_ids 属性）。

我还想可能是它在设置订单 ID 之前回显了块 HTML，所以我添加了一些变量来检查它，但事实并非如此 - 它肯定会在尝试再次获取它们之前设置 order_ids，但它仍然无法正常工作！

我完全被难住了！我现在唯一的想法是修改 Ga.php 块以使用 Magento 的注册表而不是它自己的 _data 属性，这真的不是一个好方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:18:53.697

我想我是一个彻头彻尾的工具。Magento 没有在实时站点上跟踪转换，因为我没有将帐户代码放在配置部分，但我在我的测试站点上有。

我之前将自己的分析代码放入模板中，因此我跟踪了页面浏览量。

当我没有看到任何转化时（尽管将帐户代码放在我的测试站点中），我开始在测试站点下订单，然后查看订单成功页面的来源。Firefox 将其源作为新请求加载...它会自动转到空购物篮页面。很明显，它没有显示 addTrans 或任何东西，因为它已经这样做了。

对萤火虫的快速检查表明它正在正常工作。

所以最后，经过一天的搜索，我不得不在后台将“否”更改为“是”，然后输入帐户代码。伟大的。

# php - 从 xml -> php 获取特定数据？

> ID：12281342
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:13.847
> 
> 标签：php, xml

我想从以下 xml 进入 foreach 循环：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <players>
    <player id="1">4</player>
    <player id="2">3</player>
  </players>
  <chats>
    <chat playerid="2">Some chat here...</chat>
    <chat playerid="1">skfgjh kjgh fdskgjhdf kgjhdf gkjd gkjdfhg dkfjhg</chat>
  </chats>
</data> 
```

我想要一个用于玩家的 foreach 和一个用于聊天的，但似乎无法解决这个问题......我也想要属性，但不知道如何？

这是我尝试过的：

```
$userXML = simplexml_load_file('xml_chats/0^0.xml') or die ("error");  

foreach($userXML->chats as $nchats){ 
    echo $nchats->chat.'<br>';     
} 
```

我做错了什么，我怎么能做到这一点？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:29:27.850

您可以尝试使用[xpath](http://php.net/manual/en/simplexmlelement.xpath.php)方法来选择您感兴趣的节点：

```
$xml = simplexml_load_string($xml);
$chats = $xml->xpath('/data/chats/chat');    
$players = $xml->xpath('/data/players/player'); 
```

或者您可以使用 simplexml 到节点的魔法映射，如下所示：

```
foreach ($xml->players->player as $player) { ... }
foreach ($xml->chats->chat as $chat) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:31:24.580

像这样试试

```
$xml=simplexml_load_file(filename);

foreach($xml->chats as $nchats){ 
    foreach($nchats as $chat)
    {
    echo $nchats->chat.'<br>';     
    foreach($chat->attributes() as $key=>$attrib)
    {
     echo $key."=>".$attrib.'<br>';
    }
    }
} 
```

# c++ - 使用 SetWindowsHookEx 的 C++ 仅适用于添加到其中的奇怪 vcl 代码。在 BCB2009

> ID：12281345
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:16.523
> 
> 标签：c++, c++builder, setwindowshookex, c++builder-2007

我在使用 SetWindowsHookEx 时遇到了一个奇怪的情况

我有一个 bcb 2009 项目，上面有一个表格和一个备忘录。

在创建中，我们加载 Dll 并将函数处理程序附加到两侧。

这个想法是，当按下键盘时，备忘录框中会出现一条消息，而当鼠标事件发生时，备忘录框中会出现其他文本。

奇怪的是，当我从调试信息中清除代码时，它停止工作。这意味着钩子被触发了一次，然后就结束了。在调试中，我使用了一些 VCL TStringList 将 key stokes 数据记录到磁盘。使用该代码我终于通过添加检测到

[代码]

```
TList* lList = new TList();
delete lList; 
```

对于每个钩子函数（键盘、鼠标），代码都可以再次工作。

我必须这样做的代码有什么问题？

这是我 15 年来第一次制作 dll。所以它可以是创建 dll 或导出函数的真正基础。

欢迎提出任何建议。

问候

合资公司

一些新的附加信息：

[已解决]我的目标是嵌入式win XP。我的应用程序创建了一个错误，该错误会通过 Windows 关闭资源管理器。并且该钩子在 xp 中不能全局工作，而只能在本地工作。但它正在我的开发平台上运行 win 7 x64 全局键入和鼠标在记事本中导致应用程序中的消息。[解决] 将WH_KEYBOARD修改为WH_KEYBOARD_LL，鼠标从WH_MOUSE修改为WH_MOUSE_LL，解决了Windows XP嵌入式接收键鼠问题。

dll 和应用程序都没有运行时库或包。

DLL 代码

[代码]

```
//---------------------------------------------------------------------------

#include <vcl.h>
#include <windows.h>
#pragma hdrstop
//---------------------------------------------------------------------------
//   Important note about DLL memory management when your DLL uses the
//   static version of the RunTime Library:
//
//   If your DLL exports any functions that pass String objects (or structs/
//   classes containing nested Strings) as parameter or function results,
//   you will need to add the library MEMMGR.LIB to both the DLL project and
//   any other projects that use the DLL.  You will also need to use MEMMGR.LIB
//   if any other projects which use the DLL will be performing new or delete
//   operations on any non-TObject-derived classes which are exported from the
//   DLL. Adding MEMMGR.LIB to your project will change the DLL and its calling
//   EXE's to use the BORLNDMM.DLL as their memory manager.  In these cases,
//   the file BORLNDMM.DLL should be deployed along with your DLL.
//
//   To avoid using BORLNDMM.DLL, pass string information using "char *" or
//   ShortString parameters.
//
//   If your DLL uses the dynamic version of the RTL, you do not need to
//   explicitly add MEMMGR.LIB as this will be done implicitly for you
//---------------------------------------------------------------------------

typedef void __stdcall ( *typFn)(WPARAM,LPARAM);

static typFn gGUIProcessingKeyboard = NULL;

static HHOOK gGUIProcessingKeyboardHook = NULL;

static typFn gGUIProcessingMouse = NULL;;

static HHOOK gGUIProcessingMouseHook = NULL;

#pragma argsused

int WINAPI DllEntryPoint(HINSTANCE hinst, unsigned long reason, void* lpReserved)

{

  return 1;

}

//---------------------------------------------------------------------------

extern "C"

{ __declspec(dllexport) void SetGUIProcessingKeyboard(typFn aHandle);

 __declspec(dllexport) void ReleaseGUIProcessingKeyboard(typFn aHandle);

 __declspec(dllexport) LRESULT CALLBACK wireKeyboardProc(int code, WPARAM wParam,LPARAM lParam);

 __declspec(dllexport) void SetKeyboardHookHandle(HHOOK aHook );

 __declspec(dllexport) void SetGUIProcessingMouse(typFn aHandle);

 __declspec(dllexport) void ReleaseGUIProcessingMouse(typFn aHandle);

 __declspec(dllexport) void SetMouseHookHandle(HHOOK aHook );

 __declspec(dllexport) LRESULT CALLBACK wireMouseProc(int code, WPARAM wParam,LPARAM lParam);

 /**
  * Set the keyboard loop back handle
  */

void SetGUIProcessingKeyboard(typFn aHandle)
{
  if (aHandle != gGUIProcessingKeyboard)
  {
    gGUIProcessingKeyboard = aHandle;
  }
}

 /**
  * Release the keyboard loop back handle
  */
void ReleaseGUIProcessingKeyboard(typFn aHandle)
{
  gGUIProcessingKeyboard = NULL;
}

/**
 * Set the handle used for tapping the Keyboard
 */
void SetKeyboardHookHandle(HHOOK aHook )
{
  gGUIProcessingKeyboardHook = aHook;
}

 /**
  * Tapping the keyboard from the other applications
  */
LRESULT CALLBACK wireKeyboardProc(int code, WPARAM wParam,LPARAM lParam)
{
    TList* lList = new TList();
    delete lList;
    if (code < 0) {
      return CallNextHookEx(gGUIProcessingKeyboardHook, code, wParam, lParam);
    }
    if (NULL != gGUIProcessingKeyboard)
    {
      gGUIProcessingKeyboard( wParam,lParam);
    }
    return CallNextHookEx(gGUIProcessingKeyboardHook, code, wParam, lParam);
}

 /**
  * Set the mouse loop back handle
  */

void SetGUIProcessingMouse(typFn aHandle)
{
  if (aHandle != gGUIProcessingMouse)
  {
    gGUIProcessingMouse = aHandle;
  }
}

 /**
  * Release the mouse loop back handle
  */

void ReleaseGUIProcessingMouse(typFn aHandle)
{
  gGUIProcessingMouse = NULL;
}

/**
 * Set the handle used for tapping the mouse
 */

void SetMouseHookHandle(HHOOK aHook )
{
  gGUIProcessingMouseHook = aHook;
}

 /**
  * Tapping the mouse from the other applications
  */

LRESULT CALLBACK wireMouseProc(int code, WPARAM wParam,LPARAM lParam)
{
    TList* lList = new TList();
    delete lList;
//  if (gGUIProcessingMouseHook != NULL)
//  {
    if (code < 0) {
      return CallNextHookEx(gGUIProcessingMouseHook, code, wParam, lParam);
    }
    if (NULL != gGUIProcessingMouse)
    {
      gGUIProcessingMouse( wParam,lParam);
    }
    return CallNextHookEx(gGUIProcessingMouseHook, code, wParam, lParam);
    //  }
    //  return 0;

    }

    } // extern C 
```

这是应用程序。

[代码cpp]

```
//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "MonitoringToolMain.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"

typedef void __stdcall ( __closure *typFn)(WPARAM,LPARAM);

TForm1 *Form1;
HHOOK TForm1::mHook = NULL;
typedef void __stdcall (*typSetHook)(HHOOK);
typedef LRESULT CALLBACK (  *typHookFunc)(int,WPARAM,LPARAM);
static HHOOK gMyGUIProcessingKeyboardHook = NULL;
static HHOOK gMyGUIProcessingMouseHook = NULL;

//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
  : TForm(Owner)
{
}

void __stdcall TForm1::MyKeyboardProc(
  WPARAM wParam,
  LPARAM lParam
)
{
  if (Form1 != NULL)
  {
    Form1->Memo1->Lines->Add(L"GotA keyboard");
  }
}
void __stdcall TForm1::MyMouseProc(
  WPARAM wParam,
  LPARAM lParam
)
{
  if (Form1 != NULL)
  {
    Form1->Memo1->Lines->Add(L"Pip pip");
  }
}

//---------------------------------------------------------------------------
void __fastcall TForm1::FormCreate(TObject *Sender)
{
  if (NULL == mHinst)
  {
    mHinst = LoadLibrary("KeyboardMouseHookDLL.dll");
  }

  if (mHinst)
  {
    typedef void (*Install)(typFn);

    // the keyboard

    typSetHook SetHook = (typSetHook) GetProcAddress( mHinst, "_SetKeyboardHookHandle" );
    typHookFunc wireKeyboardProc = (typHookFunc)GetProcAddress(mHinst, "wireKeyboardProc" );

    Install install = (Install) GetProcAddress(mHinst, "_SetGUIProcessingKeyboard");

    if (install)
    {
       install(&MyKeyboardProc);
    }

    if ((NULL != wireKeyboardProc) &&
        (NULL != SetHook) )
    {
      gMyGUIProcessingKeyboardHook = SetWindowsHookEx(WH_KEYBOARD, (HOOKPROC)wireKeyboardProc,mHinst,NULL);
      SetHook(gMyGUIProcessingKeyboardHook);
    }

    // The mouse
    typSetHook  SetMouseHook = (typSetHook) GetProcAddress(mHinst, "_SetMouseHookHandle");
    typHookFunc wireMouseProc = (typHookFunc)GetProcAddress(mHinst, "wireMouseProc");

    Install installMouse = (Install) GetProcAddress(mHinst, "_SetGUIProcessingMouse");

    if (installMouse)
    {
       installMouse(&MyMouseProc);
    }

    if ((NULL != wireMouseProc) &&
        (NULL != SetMouseHook) )
    {
      gMyGUIProcessingMouseHook = SetWindowsHookEx(WH_MOUSE,(HOOKPROC)wireMouseProc,mHinst,NULL);
      SetMouseHook(gMyGUIProcessingMouseHook);
    }
  }
}
//---------------------------------------------------------------------------
void __fastcall TForm1::FormDestroy(TObject *Sender)
{
  if (NULL == mHinst)
  {
    mHinst = LoadLibrary("KeyboardMouseHookDLL.dll");
  }

  if (mHinst)
  {

    if (NULL != gMyGUIProcessingKeyboardHook )
    {
      UnhookWindowsHookEx(gMyGUIProcessingKeyboardHook);
      gMyGUIProcessingKeyboardHook = NULL;
    }
    typedef void (*Uninstall)(typFn);

    Uninstall uninstall = (Uninstall) GetProcAddress(mHinst, "_ReleaseGUIProcessingKeyboard");

    if (uninstall)
    {
      uninstall(&MyKeyboardProc);
    }

    if (NULL != gMyGUIProcessingMouseHook )
    {
      UnhookWindowsHookEx(gMyGUIProcessingMouseHook);
      gMyGUIProcessingMouseHook = NULL;
    }

    Uninstall uninstallMouse = (Uninstall) GetProcAddress(mHinst, "_ReleaseGUIProcessingMouse");

    if (uninstallMouse)
    {
      uninstallMouse(&MyMouseProc);
    }

    FreeLibrary(mHinst);
    mHinst = NULL;
  }
}
//--------------------------------------------------------------------------- 
```

和表格标题

[代码]

```
//---------------------------------------------------------------------------

#ifndef MonitoringToolMainH
#define MonitoringToolMainH
//---------------------------------------------------------------------------
#include <Classes.hpp>
#include <Controls.hpp>
#include <StdCtrls.hpp>
#include <Forms.hpp>
//---------------------------------------------------------------------------
class TForm1 : public TForm
{
__published:    // IDE-managed Components
  TMemo *Memo1;
  void __fastcall FormCreate(TObject *Sender);
  void __fastcall FormDestroy(TObject *Sender);
private:    // User declarations
  int __stdcall lKeyBoard();
  void __stdcall MyKeyboardProc( WPARAM wParam, LPARAM lParam );
  void __stdcall MyMouseProc( WPARAM wParam, LPARAM lParam );
  HINSTANCE mHinst;
static  HHOOK mHook;

public:     // User declarations
  __fastcall TForm1(TComponent* Owner);
};
//---------------------------------------------------------------------------
extern PACKAGE TForm1 *Form1;
//---------------------------------------------------------------------------
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:00:24.203

如果您正在安装全局系统挂钩，则挂钩 DLL 将被注入到每个正在运行的进程中。由于每个进程都有自己的内存空间，因此您需要定义一个共享数据部分来放置诸如挂钩句柄之类的变量，否则每个进程的变量都会不同。

```
#pragma data_seg(".SHARDAT")
static HHOOK gGUIProcessingKeyboardHook = NULL;
static HHOOK gGUIProcessingMouseHook = NULL;
#pragma data_seg() 
```

也不要注册指向钩子 DLL 的函数指针，因为您将要求其他进程在您的应用程序中调用注册的函数。最好注册应用程序的 HWND 和窗口消息。

在您的 DLL 中创建一个导出函数，用于设置挂钩并存储 HWND 和自定义消息编号 fe：

```
#pragma data_seg(".SHARDAT")
static HHOOK g_keybHook = NULL;
    static HHOOK g_mouseHook = NULL;
HWND g_registeredWnd = NULL;
UINT g_registeredKeybMsg = 0;
UINT g_registeredMouseMsg = 0; 
#pragma data_seg()
HINSTANCE g_hInstance = NULL;

BOOL InstallHook(HWND registeredWnd, UINT registeredKeybMsg, UINT registeredMouseMsg)
{
    if (g_hHook != NULL) return FALSE;  // Hook already installed
    g_keybHook = SetWindowsHookEx(WH_KEYBOARD_LL, (HOOKPROC)KeybProc, g_hInstance, 0);
    if (g_keybHook == NULL) return FALSE;   // Failed to install hook
    g_registeredWnd = registeredWnd;
    g_registeredKeybMsg = registeredKeybMsg;
    g_registeredMouseMsg = registeredMouseMsg;
    return TRUE;
} 
```

在`DllEntryPoint`你保存以防`hinst`万一：`g_hInstance``reason == DLL_PROCESS_ATTACH`

```
int WINAPI DllEntryPoint(HINSTANCE hinst, unsigned long reason, void* lpReserved)
{
    if ((reason == DLL_PROCESS_ATTACH) && (g_hInstance == NULL))
        g_hInstance = hinst;

    return 1;
} 
```

在您的应用程序中，您使用[RegisterWindowMessage 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644947%28v=vs.85%29.aspx)注册 2 个窗口消息，并将这些值`InstallHook`从钩子 DLL 传递给函数。然后您的应用程序需要在其消息循环中处理这些消息。

```
registeredKeybMsg = RegisterWindowMessage("MyOwnKeybHookMsg");
registeredMouseMsg = RegisterWindowMessage("MyOwnMouseHookMsg");
InstallHook(hwnd, registeredKeybMsg, registeredMouseMsg); 
```

# entity-framework - 实体框架 CF Fluent API 映射

> ID：12281346
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:17.087
> 
> 标签：entity-framework, mapping

我有 2 个实体：

```
public class User
{
  public int userId { get; set; }
  public string name { get; set; }
  public Guid userGuid { get; set; }
}

public class Absence
{
  public int absenceId { get; set; }
  public Guid applicantId { get; set; }
  public User applicant { get; set; }
  public Guid permitterId{ get; set; }
  public User permitter{ get; set; }
  ...
}

AbsencesConfiguration:
  this.HasRequired(u => u.Applicant).WithMany().HasForeignKey(d => d.ApplicantId);
  this.HasRequired(u => u.Permitter).WithMany().HasForeignKey(d => d.PermitterId); 
```

我想要两个类之间的 Fluent API 映射，但它给出了以下错误消息：

> Blockquote\tSystem.Data.Entity.Edm.EdmAssociationConstraint: : 引用约束的 Dependent Role 中所有属性的类型必须与 Principal Role 中对应的属性类型相同。实体“Absences”上的属性“ApplicantId”类型与引用约束“Absences_Applicant”中实体“User”上的属性“UserId”类型不匹配。

我认为这是因为 EF 尝试使用 User 实体的 UserId 而不是 UserGuid 列加入这两个表。我以为我会让这两列 Absence 实体独一无二，但我如何将它们映射在一起？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:39:13.500

问题是您的用户主键是 int，但您的外键是 Guid。

您需要更改您的 User 类以获得 userId 的 guid：

```
 public Guid userId { get; set; } 
```

或者，更新您的 Absence 类以使用 int：

```
 public int applicantId { get; set; } 
```

# objective-c - iOS 应用程序在加载广告时崩溃？

> ID：12281351
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:37.143
> 
> 标签：objective-c, ios5, admob

这是我在`viewDidLoad`方法中的代码：

```
self.bannerView_= [[GADBannerView alloc] initWithFrame:CGRectMake(80,
                                                self.view.frame.size.height -
                                                GAD_SIZE_320x50.height,
                                                GAD_SIZE_320x50.width, 
                                                GAD_SIZE_320x50.height)]; 

self.bannerView_.adUnitID = @"a15037256bd8776";
self.bannerView_.rootViewController =self;
[self.view addSubview:self.bannerView_];
[bannerView_ loadRequest:[GADRequest request]]; 
```

我的应用程序仅适用于风景模式。它在主屏幕上运行良好，但是当我转到其他屏幕并尝试加载广告（通过点击横幅）时，广告加载在屏幕的一半部分，屏幕的另一半部分保持不变。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:35:20.830

尝试以下代码

```
self.adBanner= [[GADBannerView alloc]
                    initWithFrame:CGRectMake(0.0,
                                             self.view.frame.size.height -
                                             GAD_SIZE_320x50.height,
                                             GAD_SIZE_320x50.width,
                                             GAD_SIZE_320x50.height)];

    self.adBanner.adUnitID = @"a15037256bd8776";
    self.adBanner.delegate = self;
    self.adBanner.rootViewController =self; 
    [self.view addSubview:self.adBanner];

    [self.adBanner loadRequest:[self createRequest]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:43:39.297

两天多后，我终于解决了这个问题-

我创建了一个单例类并使用它，而不是从我所有视图的 viewDidLoad 实例化和调用 GADBannerView。[请参阅此链接以获取更多帮助](http://googleadsdeveloper.blogspot.in/2012/04/creating-gadbannerview-singleton-in.html)

# android - Android IntentService 我如何知道正在运行的队列中的实例数？

> ID：12281356
> 
> 赞同：0
> 
> 时间：2012-09-05T12:23:47.930
> 
> 标签：android, intentservice

有什么办法可以找出 IntentService 的 Queue 实例数？其次，我可以暂停 IntentService 的特定实例吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:32:35.183

您可以在每次实例化/销毁时添加一个递增和递减的静态变量

# javascript - 从简单的 html 页面调用实时 web 服务...？

> ID：12281364
> 
> 赞同：1
> 
> 时间：2012-09-05T12:24:19.123
> 
> 标签：javascript, html, web-services

我在这里阅读了很多帖子，但没有得到具体的答案。我有实时服务器，我的 Web 服务在该服务器上正常工作。现在，我想创建一个简单的 html 页面，通过它调用该 Web 服务。使用 javascript 这是可能的，但什么是准确的。

我再次重复我想通过它们调用该 Web 服务的 html 和 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:52:23.383

您可以使用 jquery 从 web 服务加载数据，但您可能需要包含 jquery js 文件，并且您的浏览器（IE）可能会提示安全违规，您可能需要单击是。

# java - 使用 ProGuard 混淆 clojure uberjars

> ID：12281365
> 
> 赞同：12
> 
> 时间：2012-09-05T12:24:20.423
> 
> 标签：java, clojure, obfuscation, proguard

我想知道是否有人有使用 proguard 混淆他们的 leiningen 编译的 uberjars 的经验。我已尽力在 Google 上寻找解决方案，但无法真正找到答案。我想知道这是否可能。

我一直在试图混淆一个默认的 lein 项目。这是 core.clj 文件：

```
(ns proguard.core
(:gen-class))

(defn -main
  "I don't do a whole lot."
  [& args]
  (println "Hello, World!")) 
```

项目文件：

```
(defproject proguard "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :aot :all
  :main proguard.core) 
```

和我的 proguard 配置文件：

```
-injars clojure/proguard/target/proguard-0.1.0-SNAPSHOT-standalone.jar
-outjars clojure/test-project

-libraryjars /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/rt.jar

-dontshrink
-dontoptimize
-dontusemixedcaseclassnames
-dontpreverify
-dontnote
-printseeds

-keepclasseswithmembers public class * {
    public static void main(java.lang.String[]);
}

-keep class clojure.core__init { public static void load(); }
-keep class clojure.core_proxy__init { public static void load(); }
-keep class clojure.core_print__init { public static void load(); }
-keep class clojure.genclass__init { public static void load(); }
-keep class clojure.core_deftype__init { public static void load(); }
-keep class clojure.core.protocols__init { public static void load(); }
-keep class clojure.gvec__init { public static void load(); }
-keep class clojure.java.io__init { public static void load(); }
-keep class clojure.lang__init { public static void load(); }

-keep class proguard.core__init {
    public static void load();
}
-keep class proguard.core {
    public *** super*(...);
} 
```

每当我尝试运行经过混淆的 jar 时，都会出现以下错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at clojure.lang.ve.<init>(Unknown Source)
    at clojure.lang.ve.c(Unknown Source)
    at clojure.lang.yf.a(Unknown Source)
    at proguard.core.<clinit>(Unknown Source)
Caused by: java.lang.ClassNotFoundException: clojure.lang.PersistentList, compiling:(clojure/core.clj:20)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.at.b(Unknown Source)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.bj.a(Unknown Source)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.at.b(Unknown Source)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.at.a(Unknown Source)
    at clojure.lang.xh.a(Unknown Source)
    at clojure.lang.xh.a(Unknown Source)
    at clojure.lang.xh.b(Unknown Source)
    at clojure.lang.xh.d(Unknown Source)
    at clojure.lang.xh.c(Unknown Source)
    at clojure.lang.xh.<clinit>(Unknown Source)
    ... 4 more
Caused by: java.lang.ClassNotFoundException: clojure.lang.PersistentList
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at clojure.lang.ec.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at clojure.lang.xh.h(Unknown Source)
    at clojure.lang.bp.b(Unknown Source)
    at clojure.lang.bp.a(Unknown Source)
    at clojure.lang.bq.a(Unknown Source)
    ... 19 more 
```

我不太确定我在这里做错了什么......我试图遵循一个以 clojure 为目标的 proguard 教程[，用 proguard 混淆](http://www.deepbluelambda.org/programming/clojure/creating-android-applications-with-clojure--slimming-things-down-with-proguard)，但是它是 android 和 ant 特定的，所以我想知道这个过程是否完全不同使用 lein 的桌面应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T12:42:16.457

从上面复制：

**混淆 uberjars**

**1\. 准备你的 project.clj 文件**

这是我的副本（简单，默认的 lein 项目，带有注释）：

```
(defproject proguard "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :main proguard.core
  ;;; Make sure everything is aot compiled
  :aot :all
  ;;; Remove source .clj files from the resulting jar
  :omit-source true
  ) 
```

这里没有更多内容......还要确保 (`:gen-class)`包含在您的命名空间声明中。

使用构建 uberjar，`lein uberjar`我们将进入下一步。

**2\. 准备你的 ProGuard 配置文件**

我的文件的副本再次带有注释

```
# Our uberjar
-injars clojure/proguard/target/proguard-0.1.0-SNAPSHOT-standalone.jar
# Our output direcotry
-outjars clojure/obfuscated

# Link to rt.jar. I'm on a Mac so your path may differ
-libraryjars /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/rt.jar

# ProGuard options. Detailed explanation here http://proguard.sourceforge.net/index.html#manual/usage.html
-dontskipnonpubliclibraryclassmembers
-dontnote
-printseeds

# What we will be doing is obfuscating, shrinking and optimizing the jar. 
# If you experience any problems start out with obfuscation and add the 
# -dontoptimize  and the -dontshrink flags and see if it works.

# Tell proguard to leave the clojure runtime alone
# You would need to add any other classes that you wish to preserve here.
-keep class clojure.** { *; }

# Keep our core__init class
-keep class proguard.core__init {
    public static void load();
}

# Keep classes that contain a main method (otherwise we won't be able to run the jar)
-keepclasseswithmembers public class * {
    public static void main(java.lang.String[]);
} 
```

就是这样。现在用你的新配置文件运行 proguard `java -jar proguard.jar @myconfig.pro`。由于该标志，您应该会看到一堆输出`-printseeds`（如果您不想看到 proguard 将保留哪些类，您当然可以将其删除）。

# c++ - 将一个枚举映射到另一个枚举

> ID：12281368
> 
> 赞同：4
> 
> 时间：2012-09-05T12:24:29.373
> 
> 标签：c++, enums

有一个现有的枚举

```
typedef enum
{
    myEnum_front = 11,
    myEnum_back = 19
} myEnumSides; 
```

我想创建另一个枚举`new_myEnumSides`，它的值应该映射到`myEnumSides`. 因此，我将使用`new_myEnumSides`而不是`myEnumSides`. 下面的代码可以用于此目的吗？

```
typedef enum
{
    new_myEnum_front = myEnumSides::myEnum_front,
    new_myEnum_back = myEnumSides::myEnum_back
} new_myEnumSides; 
```

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:28:24.480

我无法想象你*为什么*需要这样做......如果你不需要*重命名*枚举的值，你可以只创建第一个变量的另一个变量，而不添加另一个枚举（我相信这不是你的情况下，但还是要指出这个机会）：

```
typedef enum
{
    myEnum_front = 11,
    myEnum_back = 19
} myEnumSides, new_myEnumSides;//<-- just add the new variable here 
```

如果您*确实*想重命名它（我相信这*是*您的情况），则不应*使用*运算`::`符，而只需编写：

```
typedef enum
{
    myEnum_front = 11,
    myEnum_back = 19
} myEnumSides;

typedef enum
{
    new_myEnum_front = myEnum_front,
    new_myEnum_back = myEnum_back
} new_myEnumSides; 
```

仅当`::`枚举位于类、结构或命名空间内时才应使用运算符，否则`::`不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:38:41.503

我能想象你想要这样做的唯一原因是*扩展*现有的`enum`并创建一个具有额外价值的新的。

由于`enum`不提供任何形式的继承，作为编译时间常量，实际上只是整数，你*可以*做这样的事情，虽然我不特别推荐它..

```
// internalEnums.h
myEnum_front = 11,
myEnum_back = 19

// customerEnums.h
someNewValue = 20,
someOtherNewValue = 21

// Wherever you want to define your enums
typedef enum
{
  #include "customerEnums.h"
} customerAccessible;

typedef enum
{
  #include "internalEnums.h"
  #include "customerEnums.h"
} internalUseOnly;

// Now there are two enumerations, sharing items.
customerAccessible::someNewValue // 11
customerAccessible::myEnum_front; // Doesn't exist 
```

**编辑**根据您的评论，您可以通过将值保留在专门供外部使用的标头中来向客户公开枚举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-09T14:21:42.927

通常情况下，您不想公开第三方库的详细信息，但其中的枚举可能具有您需要的确切成员。

在这种情况下，为第三方创建映射是有益的`enum`，这样即使后端库发生更改，您也可以简单地自己提供枚举器。

最简洁的方法是创建一个别名：

```
using MyEnum = ThirdPartyEnum;
// {
//   enumerator1,
//   enumerator2
// } 
```

这样，用户代码将不依赖第三方内部，您避免进行转换，即使第三方库被替换，您的用户也可以`MyEnum`通过简单地取消注释枚举器值来继续使用（我喜欢将它们保留在注释中，所以用户不必参考第三方库的文档。

# excel - 将两个嵌套小计应用于 Excel 2007 中的表

> ID：12281370
> 
> 赞同：3
> 
> 时间：2012-09-05T12:24:35.123
> 
> 标签：excel, excel-2007

我想将两个嵌套的小计应用于 Excel 2007 中的表格，但我发现“小计”按钮似乎无法始终如一地工作。

想象一下下表

```
Year    Colour  Amount
2011    Red     10
2011    Green   20 
```

如果我选择所有行并使用以下参数单击“SubTotal”

*   在 -**年的每次变化**
*   使用函数 -**求和**
*   添加小计 -**金额**
*   替换当前小计 -**否**
*   组之间的分页符 -**否**
*   以下数据摘要 -**否**

然后我做同样的事情，但是 - 每次改变 -**颜色**

我得到了下面这张漂亮的桌子，这正是我想要的

```
Year    Colour  Amount
Grand Total     30
2011 Total      30
    Red Total   10
2011    Red     10
    Green Total 20
2011    Green   20 
```

想象一下，虽然我在原始表格中将“绿色”更改为“红色”

```
Year    Colour  Amount
2011    Red     10
2011    Red     20 
```

如果我按照上述步骤操作，那么我希望看到表格的格式相同。但是我得到以下

```
Year    Colour  Amount
    Red Total   30
Grand Total     30
2011 Total      30
2011    Red     10
2011    Red     20 
```

如您所见，红色总计位于顶部，而我希望它位于“2011 总计”行之后，就像它在第一个表中一样。

有没有办法解决这个问题。[我知道我可以手动执行此操作，但想使用 SubTotal 按钮]

总而言之，我需要对 2011 年和颜色进行小计，但首先要对 2011 年进行小计，然后再对颜色进行小计（如我上面显示的第一个表所示）。无论构成表格的数据如何，这都需要工作。对我来说，它只适用于第一个数据集，而不适用于第二个数据集。

**问题已更新**

这是一个例子。该示例包括问题中未提及的额外十个“价格”列。我展示这十列的原因是为了说明为什么数据透视表不是我的理想解决方案。我认为数据透视表不可能以图片中描述的方式显示与小计内联的行的“详细信息”。

![在此处输入图像描述](../Images/aa4b8c23ee2e07c5d26f66e073ba5642.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:35:53.237

我同意 d--b - 您将要使用数据透视表 - 它们提供了比小计系统更直观的功能（在我看来）：

![数据透视表说明](../Images/0bbfce71abd0f22d2e4e6dcea7c7ca2f.png)

小计系统依赖于数据的初始排序和组织来产生什么。而数据透视表不关心您的初始数据是否/如何排序。

祝你好运。

**编辑：**

您仍然可以使用标准的复制/剪切和粘贴功能来操作小计表 - 它将保持其树结构：

![小计解决方案1](../Images/24b028a757fe744f280b597758bfd3f6.png) ![小计解决方案2](../Images/31200e651cd1ed6ca24cf9537b9ab25a.png) ![小计解决方案3](../Images/99cbb15c3845d827093b960ca063a724.png) ![小计解决方案4](../Images/4f862c45b31aa5deab2ee1520aee3a70.png)

所以基本上可以随意使用剪切和粘贴来移动行，但是你希望它看起来 - 你甚至可以在一行内移动单个单元格 - 它仍然会保持它的结构/外观。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:57:40.357

尝试使用*替换当前小计 -**是***

在我可以重建您的问题之前，有一点要玩，但这解决了它。

当我重建您的示例时，它起作用了，然后标记了整个事情并再次进行了小计，并替换了当前的小计。

当我在一个*干净*的纯数据表上做你的例子时，它也有效。

为了重建您的示例，我必须在按颜色分组的小计表上使用小计而不替换。

希望这可以帮助 ;）

# c# - 在 .net 代码中运行时编辑 HTML 电子邮件模板

> ID：12281374
> 
> 赞同：3
> 
> 时间：2012-09-05T12:24:46.943
> 
> 标签：c#, asp.net, html, system.net.mail

我下面的代码是通过阅读模板html来发送电子邮件，它工作正常。但现在我的问题是如何在运行时将 Salutation customerName 从我的 .net 代码传递到模板。

```
 StringBuilder strBlr = new StringBuilder();
            string strHTML = string.Empty;
            string strTempalteHtmlpath = string.Empty;

            //create the mail message
            MailMessage mail;

 string strFrom = ConfigurationSettings.AppSettings["fromAddressForBT"];
                string strSubject = "Thanks for choosing Email contact preference";
                mail = new MailMessage(strFrom, customerDetails.EmailId);

                mail.Subject = strSubject;

                //Read Html Template File Path
                strTempalteHtmlpath = Convert.ToString(ConfigurationSettings.AppSettings["TemplatePath"]);
                strHTML = File.ReadAllText(strTempalteHtmlpath);
                strBlr = strBlr.Append(strHTML);
                mail.Body = strBlr.ToString();
                mail.IsBodyHtml = true;

                //first we create the Plain Text part
                AlternateView plainView = AlternateView.CreateAlternateViewFromString(strBlr.ToString(), null, "text/plain");
                AlternateView htmlView = AlternateView.CreateAlternateViewFromString(strBlr.ToString(), null, "text/html");

 mail.AlternateViews.Add(plainView);
                mail.AlternateViews.Add(htmlView);

                //send the message
                SmtpClient smtpMail = new SmtpClient(ConfigurationSettings.AppSettings["smtpClient"]);
                smtpMail.Send(mail);

                mail.Dispose(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:01:14.507

**这是发送电子邮件按钮的代码**

```
 StreamReader sr = new StreamReader(Server.MapPath("Sendpage.htm"));
    string body = sr.ReadToEnd();         
    sr.Close();          
    body = body.Replace("#NameFamily#", txtNameFamily.Text);     
    body = body.Replace("#Email#", txtEmail.Text);        
    body = body.Replace("#Tellphone#", txtTellphone.Text);   
    body = body.Replace("#Text#", txtText.Text);       
    body = body.Replace("#Date#", DateTime.Now);        
    string Time = Convert.ToString(DateTime.Now.ToShortTimeString());    
    body = body.Replace("#Time#", Time);        
    SendMail("email that you want to send to it", body); 
```

**这是发送邮件功能代码：**

```
 private void SendMail(string To, string Body)
    {
        SmtpClient Mailing = new SmtpClient("mail.domain.com");
        MailMessage Message = new MailMessage();
        Message.From = new MailAddress("mail@domain.com", "Your name or company name");
        Message.Subject = "Subject";
        Message.SubjectEncoding = Encoding.UTF8;
        Message.IsBodyHtml = true;
        Message.BodyEncoding = Encoding.UTF8;
        Message.Body = Body;
        Message.To.Add(new MailAddress(To));
        Mailing.UseDefaultCredentials = false;
        NetworkCredential MyCredential = new NetworkCredential("mail@domain.com", "password");
        Mailing.Credentials = MyCredential; Mailing.Send(Message);
    } 
```

# .htaccess - CodeIgniter 使用 .htaccess 保护管理控制器

> ID：12281375
> 
> 赞同：0
> 
> 时间：2012-09-05T12:24:48.210
> 
> 标签：.htaccess, codeigniter, digest-authentication

我需要设置 .htaccess 规则以保护 CodeIgniter 中的管理控制器。

在 .htaccess 中已经有这样的友好 URL 规则：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

如何添加额外的规则来保护 /admin/ 文件夹（控制器）下的所有内容，并使用 Digest 身份验证？

我尝试了各种组合，但没有一个是正确的。以下是一些我试图获取线索的规则：

```
# set an environtment variable "doauth" if the request starts with "/admin/"
SetEnvIf Request_URI ^/admin/ doauth=1

AuthType Digest
AuthName "Admin Protected Area"
AuthUserFile /hta/.htdigest

# Here is where we allow/deny
Order Allow,Deny
Allow from all
Require valid-user
Deny from env=doauth
Satisfy any 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:54:34.377

试试这个代码来控制对你的管理控制器的访问：

```
SetEnvIfNoCase Request_URI "^/admin/" doauth

AuthType Digest
AuthName "Admin Protected Area"
AuthUserFile /hta/.htdigest

Require valid-user
Satisfy         any
Order           allow,deny
Allow from      all
Deny from       env=doauth 
```

# mingw - dlltool 创建程序集文件和空库文件

> ID：12281377
> 
> 赞同：2
> 
> 时间：2012-09-05T12:24:53.747
> 
> 标签：mingw

我有一个用于创建库文件的 def 文件。但是，当我尝试使用 dlltool（来自 MinGW）执行此操作时，它所做的只是创建一个程序集文件和一个空库文件。

程序集文件每次名称不同，但内容相同。下面是汇编文件的内容。

```
# IMAGE_IMPORT_DESCRIPTOR
.section    .idata$2
.global _head_libnidaq_a
_head_libnidaq_a:
.rva    hname   #Ptr to image import by name list
#this should be the timestamp, but NT sometimes
#doesn't load DLLs when this is set.
.long   0   # loaded time
.long   0   # Forwarder chain
.rva    __libnidaq_a_iname  # imported dll's name
.rva    fthunk  # pointer to firstthunk
#Stuff for compatibility
.section    .idata$5
fthunk:
.section    .idata$4
hname: 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T19:33:12.177

如此处所述，在提出[此](https://stackoverflow.com/questions/25343929/mingw-dlltool-creates-empty-file)问题两年后，如果包含 as.exe 的目录（通常为 [安装位置]/mingw32/bin）不在系统路径上，则会出现此问题。不幸的是，如果使用详细标志 (-v) 运行，dlltool 只会对此发出警告（通过回显尝试运行 as.exe 时生成的“没有这样的文件或目录”错误）。

在 Windows 命令提示符下运行该命令`set PATH=%PATH%;[installation location]/mingw32/bin`，然后运行 ​​dlltool 可解决此问题。

# php - 通过单击从列表中发布选定的值 - PHP/HTML

> ID：12281379
> 
> 赞同：1
> 
> 时间：2012-09-05T12:24:55.530
> 
> 标签：php, javascript, html, html-lists

我有代码：

```
<table>
<?php foreach (ListFiles('clients/'.$entry) as $key=>$file){?>
<tr>
<td><?php echo $file;?></td>
<td><img src="pdf.png" height="40" width="40" alt="strategic report"></img></td>
</tr>
</table> 
```

.. 生成表中的项目列表。我在表格的不同部分的右侧添加了一个按钮。

问题是：当用户单击图像时，即 onclick，我将如何从所选的相应值/项目中获取值？

我正在使用 PHP。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:27:50.287

您应该为每个项目提供一个唯一的 ID，并在单击按钮时将该 ID 传递给服务器。

# dynamics-crm - 如何在 Dynamic CRM 中通过 customerid/电话号码打开特定帐户记录

> ID：12281386
> 
> 赞同：0
> 
> 时间：2012-09-05T12:25:20.647
> 
> 标签：dynamics-crm, crm

我需要根据 url 开一个特定的帐户。我要求使用查询字符串针对电话号码/客户 ID 开户。我试试这些网址

[http://ef.crm/EFCRMDB/main.aspx?etn=account&pagetype=entityrecord](http://ef.crm/EFCRMDB/main.aspx?etn=account&pagetype=entityrecord)（这会打开一个创建新帐户的表格）

[http://ef.crm/EFCRMDB/main.aspx?etn=account&extraqs=etc%3d1%26expert_test%3dabcdef&pagetype=entityrecord](http://ef.crm/EFCRMDB/main.aspx?etn=account&extraqs=etc%3d1%26expert_test%3dabcdef&pagetype=entityrecord) （传递查询字符串值，我成功地在表单上得到这个值）

在数据库 AccountBase 表中，我找到记录的唯一 ID，即“AccountId”。

这对我来说很好

[http://ef.crm/EFCRMDB/main.aspx?etn=account&pagetype=entityrecord&id=A3D57E8C-87F6-E111-8BF8-000C29E2596B](http://ef.crm/EFCRMDB/main.aspx?etn=account&pagetype=entityrecord&id=A3D57E8C-87F6-E111-8BF8-000C29E2596B)

现在的问题是我如何得到'AccountId' 反对电话号码或客户ID 收到的表格URL？如果可以，我可以通过对话或工作流程开户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:50:45.673

也许你也可以制作一个 HTML+JS Web 资源并将其上传到 Dynamic CRM。然后，您可以通过 URL 访问 Web 资源。

您上传的网站必须执行以下操作：

1.  从查询字符串中获取电话号码
2.  从 JavaScript 获取 XML 调用。将电话号码作为参数传递，然后获取帐户的 ID。
3.  通过在查询字符串中传递帐户 ID 打开所需的帐户窗口。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:44:37.557

因此，我不确定是否有任何开箱即用的东西可以为您提供 ID。但你可以尝试：

*   对话框和工作流现在可以选择获取记录的 url。

![在此处输入图像描述](../Images/d3c30ba7ddb05803541c9cac14afadd4.png)

*   您可以创建自定义工作流活动（用于对话框和工作流）来获取 Id
*   如果您使用 JavaScript，您可以这样做：[Xrm.Page.data.entity.getId()](http://msdn.microsoft.com/en-us/library/gg334720.aspx#BKMK_getId)

# regex - 如果连续存在两个以上的空格，则删除字符串中的空格

> ID：12281388
> 
> 赞同：2
> 
> 时间：2012-09-05T12:25:39.043
> 
> 标签：regex, string

可以说我有这样的字符串，

```
String sample = "This is a sample  string    with more than   two spaces in      a string   "; 
```

现在我必须做什么才能使字符串在每个单词之间只有一个空格。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T12:27:21.503

如果字面意思是“空格”，那么您可以`/ {2,}/`用一个空格替换。请注意，正则表达式中的空格与文本中的空格匹配。

如果“空格”实际上是指“所有空格”（空格、制表符、换行符等），请`\s+`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:27:36.343

将它们与正则表达式匹配`\s+`并替换为单个空格。如果您只想替换多个空格（而不是制表符和其他白色字符），请使用`\ +`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:30:11.333

如果这是 C#，那么你可以这样做

```
using System.Text.RegularExpressions;
…
      String sample = "This is a sample  string    with more than   two spaces in      a string   ";
      sample = Regex.Replace(sample, @"\s+", " "); 
```

# php - 使用 Adob e Air 或 Flex 连接到服务器/php 文件以进行数据库交互

> ID：12281391
> 
> 赞同：0
> 
> 时间：2012-09-05T12:25:54.433
> 
> 标签：php, actionscript-3, flash, http, flash-builder

我将使用 adobe air 或使用 flex 在 actionscript 3 中开发智能手机应用程序（例如 iOS）。但是，我需要连接到数据库以进行大量数据存储和检索。有大量关于本地数据库存储的信息，但不在外部服务器上！

我做了一些研究，大多数都把我带入了死胡同，或者不是我需要的。我听说将变量传递给处理数据库内容的 PHP 文件更安全；但是如何将 actionscript 文件中的数据发送到服务器和目标 php 文件？我似乎在任何地方都找不到这个！

目前我没有要显示的代码，我正在尝试找到最佳解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:03:58.730

我认为最好的不是仅仅调用 php 脚本，而是构建一个基于 php 的 web 服务。您可以通过使用 AMFphp 来实现

请查看下面的链接，了解您可以做什么以及如何做。

[http://cookbooks.adobe.com/post_AMFPHP___Flex_4_demo-16508.html](http://cookbooks.adobe.com/post_AMFPHP___Flex_4_demo-16508.html)

[http://polygeek.com/530_video-tutorial_amfphp-video-tutorial-connecting-to-amfphp-and-returning-data-version-10](http://polygeek.com/530_video-tutorial_amfphp-video-tutorial-connecting-to-amfphp-and-returning-data-version-10)

[http://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)

# objective-c - 在这种情况下如何实现 UINavigationController？

> ID：12281392
> 
> 赞同：2
> 
> 时间：2012-09-05T12:25:55.680
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

**我的项目的当前版本：**

> 我的应用程序中有 5 个不同`UIViewControllers`。我已将我设置 `FirstViewController`为`Initial View Controller`使用属性检查器。我使用 StoryBoard 使用分配模态序列的按钮从一个 ViewController 到另一个 ViewController 来回移动，从一个 ViewController 到另一个

**我想改变的：**

> 我想显然保留导航按钮，删除模态序列并改用 a `UINavigationController`。如果我正确理解了这个概念，那么在使用 a 时，`UINavigationController`我需要进入每个 `UIButton-IBAction`方法，并且在方法的最后，我必须将要移动到的下一个 ViewController 推到我的 NavigationController 上（我是否还必须弹出当前的第一的？）。但是，我无法弄清楚如何正确实现所有这些。

**到目前为止我所做的：**

*   我从情节提要中删除了所有模态序列，并保留了导航按钮及其相应的 IBActions
*   我取消选中了属性检查器中使我的 FirstViewController 成为我的应用程序的初始视图控制器的框
*   我进入我的**AppDelegate.m**并尝试在那里创建导航控制器并使我的 FirstViewController 成为 RootViewController

**MyAppDelegate.m**

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIViewController *myFirstViewController = [[FirstViewController alloc] init];
    UINavigationController *myNavigationController = [[UINavigationController alloc] initWithRootViewController:myFirstViewController];

    [myNavigationController pushViewController:myFirstViewController animated:YES];

    // Override point for customization after application launch.

    return YES;
} 
```

*   然后，我尝试通过进入我的 FirstViewController 上导航按钮的 IBAction 来测试上述是否有效，并实现了以下操作，以便在按下按钮时移动到我的 SecondViewController：

**第一视图控制器.m**

```
- (IBAction)goRightButton:(UIButton *)sender
{
    // some code drawing the ButtonIsPressed UIImageView on the current View Controller

    UIViewController *mySecondViewController = [[SecondViewController alloc] init];
    [self.navigationController pushViewController:mySecondViewController animated:YES];
} 
```

但什么也没发生。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:44:31.563

您没有链接您的 XIB 文件。请将您的导航控制器添加为

```
UIViewController *myFirstViewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
navigationController = [[UINavigationController alloc] initWithRootViewController:myFirstViewController]; 
```

使用以下代码从一个视图移动到另一个视图

```
UIViewController *mySecondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
[self.navigationController pushViewController:mySecondViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:31:14.503

如果您使用的是故事板，您只需将导航控制器拖入那里并将其连接到您的应用程序委托。只要它是主故事板，并且您已确定要首先加载的视图控制器，您就不需要在应用程序委托中加载任何视图。

为了以编程方式推送故事板中的视图，您需要执行以下操作：

```
 //bundle can be nil if in main bundle, which is default
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
 MyCustomViewController *customVC = (MyCustomViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:@"customVC"];
//standard way
[self.navigationController pushViewController:customVC animated:YES];

//custom animation
[UIView transitionWithView:self.navigationController.view duration:0.5 options:UIViewAnimationOptionTransitionCurlUp animations:^{
    [self.navigationController pushViewController:customVC animated:NO];
} completion:nil]; 
```

您可以使用在故事板编辑器中添加的标识符来标识视图控制器。下面是一些屏幕截图，以帮助说明我的意思。

![带箭头的导航控制器指示初始负载](../Images/27e7ae6715fda8227b9d43f5268528a5.png)

![更改视图控制器标识符的地方，因此您可以调用它](../Images/e4fa2ca52704c2185aa8b0a51e29bb4a.png)

# lwuit - LWUIT - 添加 3 个命令以及如何从中获取事件？

> ID：12281393
> 
> 赞同：2
> 
> 时间：2012-09-05T12:26:06.463
> 
> 标签：lwuit, lwuit-form, lwuit-resource-editor, lwuit-button, lwuit-command

我正在使用带有 LWUIT 的 Command Component 来开发小型 Midlet 应用程序，当时我必须使用三个命令来帮助我转到不同的表单。

Display.getInstance().setThirdSoftButton(true); 肯定有助于显示 3 个命令。由于我使用的是用于 CLDC 2.5.2 的 Sun Wireless 工具包，它为移动仿真器提供了只有两个软键。

请帮助我从第三键获取事件...

急切等待回复。。

谢谢和问候， 斯瓦蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:59:07.937

您需要为第三个命令使用开火按钮。

# qt - QLabel 自动多行

> ID：12281396
> 
> 赞同：58
> 
> 时间：2012-09-05T12:26:15.000
> 
> 标签：qt, qlabel

例如，我们将`QLabel`MaximumWidth 设置为400。
当我们尝试显示一些像素宽度超过400 的文本时，它会显示为截断。
有没有办法让 QLabel 在不使用 QFontMetrics 等的情况下多行显示这个字符串？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-05T12:38:57.320

如果我正确理解了您的问题，您应该[`setWordWrap`](http://doc.qt.io/qt-5.7/qlabel.html#wordWrap-prop)为您的标签使用该函数，并`true`作为其参数。

```
QLabel lbl("long long string");
lbl.setWordWrap(true); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-01T20:06:14.447

为了在 QLabel 中显示多行，右键单击 QLabel 并选择“更改富文本”。这会弹出对话框，您可以在其中键入想要查看的文本，包括输入键。为此不需要设置自动换行。

如果您也设置了自动换行（在 QLabel 属性中），那么它将在 Qlabel 中的每一行都比不动产长时换行。

[![在此处输入图像描述](../Images/5505bc2b9d95bf6f5c7112fa0660ac01.png)](https://i.stack.imgur.com/KPAGk.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T14:19:37.137

作为使用 Qt Designer 包装文本的另一个选项，您可以选中属性编辑器下的 QLabel 框：

[![在此处输入图像描述](../Images/1fbb73bd02fd99ea60d91e4d14cd3e97.png)](https://i.stack.imgur.com/B7N1B.png)

# ruby-on-rails - 大礼包的集成测试（与炼油厂一起）

> ID：12281397
> 
> 赞同：1
> 
> 时间：2012-09-05T12:26:18.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, rails-engines, refinerycms

我刚刚启动了一个新的 Rails 应用程序。到目前为止，还没有控制器或模型，只有两个引擎：炼油厂和狂欢节并排工作。

它们安装如下：

```
Store::Application.routes.draw do

  mount Spree::Core::Engine, :at => '/shop'
  mount Refinery::Core::Engine, :at => '/'

end 
```

现在我已经使用炼油厂设置了几个页面，所以当我去 / 然后我看到炼油厂主页，可以点击关于我们页面等。当我去 /shop 然后我看到网站的狂欢部分也是运作良好。

现在我想写一个小测试，证明 spree 引擎正确安装在“/shop”。我尝试了以下测试：

```
require 'test_helper'

class SpreeEngineTest < ActionDispatch::IntegrationTest

  test "has been correctly mounted" do
    get "/shop"
    assert_response :success
  end

end 
```

但它失败了，结果如下：

```
Expected response to be a <:success>, but was <302> 
```

我查看了请求的正文，其中包含以下内容：

```
"<html><body>You are being <a href=\"http://www.example.com/refinery/users/register\">redirected</a>.</body></html>" 
```

我正在使用标准的 testunit 包和 rails 3.2

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-04T12:27:28.737

抱歉回复晚了。原因是当 Refinery 检测到数据库中不存在具有正确角色的用户时，它会将您重定向到创建用户对话框。所以我的猜测是，您正在运行此测试而没有在测试数据库中注册任何用户，这会导致重定向。

在您的集成测试中，添加以下设置方法：

```
def setup
  user = Refinery::User.new(:username => 'testuser', :email => 'test@example.com', :password => 'test', :password_confirmation => 'test')
  assert user.create_first
end 
```

这将确保存在具有正确角色的默认用户，并且测试的其余部分应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:04:38.843

也许您应该使用 assert_redirected_to 而不是 assert_response。 [http://api.rubyonrails.org/classes/ActionDispatch/Assertions/ResponseAssertions.html](http://api.rubyonrails.org/classes/ActionDispatch/Assertions/ResponseAssertions.html)

# php - 在 domdocument 中创建 XML 片段并添加到其父级

> ID：12281398
> 
> 赞同：0
> 
> 时间：2012-09-05T12:26:18.750
> 
> 标签：php, xml

下面是我用来创建一堆 xml 节点并尝试附加到传递给它的父节点的代码。

不知道出了什么问题，父节点没有得到增强。

**输入.xml**

```
<?xml version="1.0"?>
<root>
    <steps> This is a step </steps>
    <steps> This is also a step </steps>
</root> 
```

**output.xml 应该是**

```
<?xml version="1.0">
<root>
    <steps>
        <step>
            <step_number>1</step_number>
            <step_detail>Step detail goes here</step_detail>
        </step> 
    </steps>
    <steps>
        <step>
            <step_number>2</step_number>
            <step_detail>Step detail of the 2nd step</step_detail>
        </step> 
    </steps>
</root>

    <?php
    $xml = simplexml_load_file( 'input.xml' );

    $domxml  = dom_import_simplexml( $xml );

    //Iterating through all the STEPS node
    foreach ($steps as $stp ){
        createInnerSteps( &$stp, $stp->nodeValue , 'Expected Result STring' );

        echo 'NODE VAL  :-----' . $stp->nodeValue;// Here it should have the new nodes, but it is not
    }

    function createInnerSteps( &$parent )
    {   
        $dom  = new DOMDocument();
        // Create Fragment, where all the inner childs gets appended
        $frag = $dom->createDocumentFragment();

        // Create Step Node
        $stepElm = $dom->createElement('step');
        $frag->appendChild( $stepElm );

        // Create Step_Number Node and CDATA Section
        $stepNumElm = $dom->createElement('step_number');
        $cdata = $dom->createCDATASection('1');
        $stepNumElm->appendChild ($cdata );

        // Append Step_number to Step Node
        $stepElm->appendChild( $stepNumElm );

        // Create step_details and append to Step Node 
        $step_details = $dom->createElement('step_details');
        $cdata = $dom->createCDATASection('Details');
        $step_details->appendChild( $cdata );

        // Append step_details to step Node
        $stepElm->appendChild( $step_details );

        // Add Parent Node to step element
            //  I get error PHP Fatal error:  
            //  Uncaught exception 'DOMException' with message 'Wrong Document Error'
        $parent->appendChild( $frag );

        //echo 'PARENT : ' .$parent->saveXML(); 
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:58:50.057

你得到了，`Wrong Document Error`因为你在 中创建了一个新`DOMDocument`对象`createInnerSteps()`，每次调用它。

当代码到达该行时`$parent->appendChild($frag)`，`$frag`属于在函数中创建的文档，`$parent`属于您尝试操作的主文档。您不能像这样在文档之间移动节点（或片段）。

最简单的解决方案是通过替换只使用一个文档：

```
$dom  = new DOMDocument(); 
```

和

```
$dom = $parent->ownerDocument; 
```

查看[运行示例](http://viperpad.com/HtS7iZ)。

最后，要获得所需的输出，您需要删除每个`<steps>`元素中的现有文本。

# javascript - 使用 javascript 停用/删除 iframe

> ID：12281399
> 
> 赞同：1
> 
> 时间：2012-09-05T12:26:19.590
> 
> 标签：javascript, iframe, youtube

我在网页上显示了超过 15 张缩略图（从数据库中获取并循环播放）。单击图像时，我有一个播放 youtube 视频（iframe 版本）的叠加层。

问题是，在关闭覆盖时，youtube 视频会继续播放。

在浏览了 YT 文档后，我发现无法在 iframe 中控制 YTplayer。但是，我必须使用一个`iframe`因为`embed`和`object`标签使用 flash 并且 Mac 不支持 flash（Mountain Lion）

所以，我在想，如果有办法停用，`iframe`那么玩家可能会停止。`display:none;`没有帮助。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:50:30.730

我尝试了这种方法并且它有效：我使用 javascript 通过 id 获取 iframe 源并将源设为空白。

```
 <script>
    function stopVideo(){

       document.getElementById("iframeID").src= "";

    }
    </script> 
```

# android - 如何检索由 android 应用程序创建的文件？

> ID：12281400
> 
> 赞同：0
> 
> 时间：2012-09-05T12:26:26.143
> 
> 标签：android

我的 android 应用程序创建了一个 sqlite 数据库，我需要将它从设备中取出，以便我可以使用数据库查看器查看数据。

希望我可以发出 >adb shell 然后在文件系统的某个地方找到它。看起来很多命令都存在权限问题。即使只是运行 >find 。-name *.sqlite 授予权限被拒绝。

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:29:06.900

无论如何，您的设备似乎没有植根..

将您的 .db 文件形式复制`/data/data/<package_name>/databases/`到`ExternalStorage`使用代码。然后您可以通过`adb pull`命令或`DDMS -> FIle Explorer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:29:37.700

目前没有办法在设备上浏览数据库（没有你想要的root权限）。

您可以使用 adb shell 从模拟器浏览数据库。

# java - 如何在 MyBatis 中调用返回 Oracle 记录类型的 Oracle 函数

> ID：12281403
> 
> 赞同：3
> 
> 时间：2012-09-05T12:26:35.510
> 
> 标签：java, oracle, spring, mybatis

我在包装规范中有记录类型：

```
 TYPE Payment_Capabilities IS RECORD(
    pp_partial_payment NUMBER(1) DEFAULT 0,
    co_advance_payment NUMBER(1) DEFAULT 0,
    dp_deposit_payment NUMBER(1) DEFAULT 0,
    dr_deposit_repay   NUMBER(1) DEFAULT 0,
    wp_wallet_payment  NUMBER(1) DEFAULT 0,
    wr_wallet_repay    NUMBER(1) DEFAULT 0,
    ss_prepaid_payment NUMBER(1) DEFAULT 0); 
```

和返回此类型的函数。我正在使用 MyBatis 与 Spring 的集成。如何调用（使用 MyBatis XML Mapper）这个函数并将结果映射到 POJO 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:27:52.213

```
<select id="identifyPaymentCapabilities" parameterType="PaymentCapabilities" statementType="CALLABLE">
    DECLARE
        v_payment_capabilities APS.Payment_Capabilities;
    BEGIN
        v_payment_capabilities := APS.get_payment_capabilities(#{customerId, javaType=Integer, jdbcType=NUMERIC, mode=IN});

        #{partialPaymentPP, javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.pp_partial_payment;
        #{advancePaymentCO, javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.co_advance_payment;
        #{depositPaymentDP, javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.dp_deposit_payment;
        #{depositRepayDR,   javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.dr_deposit_repay;
        #{walletPaymentWP,  javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.wp_wallet_payment;
        #{walletRepayWR,    javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.wr_wallet_repay;
        #{prepaidPaymentSS, javaType=Integer, jdbcType=NUMERIC, mode=OUT} := v_payment_capabilities.ss_prepaid_payment;
    END;
</select> 
```

# aem - 无法更改默认 CQ 登录页面

> ID：12281404
> 
> 赞同：2
> 
> 时间：2012-09-05T12:26:39.690
> 
> 标签：aem

我想更改默认登录页面（到`/content/ethz_ch/Login`）

我通过*Day CQ Login Selector Authentication Handler配置了页面*

![在此处输入图像描述](../Images/d107755b82f6d1d4d751f886016d2dd8.png)

在`./launchpad/config/com/day/cq/auth/impl/LoginSelectorHandler.config`我看到

```
auth.loginselector.defaultloginpage="/content/ethz_ch/Login" 
```

正如预期的那样。

然后，我配置了一个包含封闭用户组的测试页面 ( `/content/ethz_ch/de/auth_test.html`)，并将登录页面字段留空。

访问测试页面时，而不是在新定义的登录页面上，我被重定向到

```
https://..../system/sling/cqform/defaultlogin.html?resource=%2Fcontent%2Fethz_ch%2Fde%2Fauth_test.html&$$login$$=%24%24login%24%24 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:23:57.757

在*Day CQ Login Selector Authentication Handler*中有一个**路径信息**设置，它限制了可能的登录页面：

> 请求扩展列表，指示登录选择器身份验证处理程序可能请求凭据的请求。任何扩展名不是列出的扩展名之一的请求都不会导致请求凭据。如果此列表为空，则使用 html 和 htm 的默认列表。请注意，列表条目不能有前导点。无论此配置如何，不带扩展名的请求或带有斜杠 (/) 的请求始终由登录选择器身份验证处理程序处理。

使用完整 URL（带扩展名）指定**默认登录页面解决了该问题：**

```
/content/ethz_ch/login.html 
```

# c# - 表达式...我做错了什么？

> ID：12281411
> 
> 赞同：4
> 
> 时间：2012-09-05T12:26:56.213
> 
> 标签：c#, expression, argumentexception

我决定花一些黄金时间来学习更多关于表达式的知识。我正在尝试一个非常简单的练习，即添加两个数字。我遇到了一个很难搜索的异常。

这是我的代码

```
Expression<Func<int,int,int>> addExpr = (x, y) => x + y;
var p1 = Expression.Parameter(typeof(int), "p1");
var p2 = Expression.Parameter(typeof(int), "p2");
var lambda = Expression.Lambda<Func<int,int,int>>(addExpr, p1, p2); //<-here
var del = lambda.Compile();
var result = del(2,3); //expect 5 
```

但这会引发 ArgumentException：“System.Func`3[System.Int32,System.Int32,System.Int32]”类型的表达式不能用于返回类型“System.Int32”

在上面指示的行。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:36:04.933

您需要`addExpr`使用表达式参数将

```
Expression<Func<int,int,int>> addExpr = (x, y) => x + y;
var p1 = Expression.Parameter(typeof(int), "p1");
var p2 = Expression.Parameter(typeof(int), "p2");
var invokeExpression=Expression.Invoke(addExpr,p1,p2);
var lambda = Expression.Lambda<Func<int,int,int>>(invokeExpression,p1,p2);
var del = lambda.Compile();
var result=del(2,3); 
```

调用是您如何将 p1 键入 x 并将 p2 键入 y，或者您可以将上面的内容写为

```
var p1 = Expression.Parameter(typeof(int), "p1");
var p2 = Expression.Parameter(typeof(int), "p2");
var lambda=Expresion.Lambda<Func<int,int,int>>(Expression.Add(p1,p2),p1,p2);
var del = lambda.Compile();
var result=del(2,3); 
```

否则，您需要将表达式主体抓取到 lambda 中并传递表达式参数。

```
var lambda=Expresion.Lambda<Func<int,int,int>>(addExpr.Body,addExpr.Parameters); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:29:24.107

您的代码应该是：

```
var lambda = Expression.Lambda<Func<Expression<Func<int, int, int>>, int, int>(addExpr, p1, p2); 
```

您当前的代码需要一个`int`和您传入的`Expression<Func<int, int, int>>`.

**更新**

实际上上面不会编译，你需要做：

```
var lambda = Expression.Lambda<Func<int, int, int>>(Expression.Add(p1, p2), p1, p2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:32:59.550

您需要分解`addExpr`的主体，或者最好只是从头开始编写，`Expression.Add(p1,p2)`而不是`addExpr`.

# php - 使用 elasticsearch 过滤搜索结果

> ID：12281412
> 
> 赞同：0
> 
> 时间：2012-09-05T12:26:59.030
> 
> 标签：php, elasticsearch

我正在使用以下 PHP 客户端进行弹性搜索：[https](https://github.com/nervetattoo/elasticsearch) ://github.com/nervetattoo/elasticsearch ，但在我的搜索查询中添加多个字段以匹配时遇到问题。

如果已设置，我想按类型选项添加过滤器。

我玩过这种语法，但在搜索时只考虑指定的第一个字段。

```
$type = ($type) ? $type : false;

$options = array(
            'fields' => array('title', 'content', 'profile_id', 'type', 'name', 'description', 'date', 'url'),
            'from' => 0,
            'size' => 10,
            'query' => array(
                ($type ?
                    array('match' => array('name' => $term, 'type' => $type)) :
                    array('match' => array('_all' => $term))
                )
            )
        ); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:38:14.990

如果有人感兴趣，我使用 bool 标志和调整语法解决了它。

```
$options = array(
   'fields' => array('title', 'content', 'profile_id', 'type', 'name', 'description', 'date', 'url'),
   'from' => 0,
   'size' => 10,
   'query' => array(
      ($type ?
          array(
              'bool' => array(
                  'must' => array(
                      array('term' => array('_all' => $term)),
                      array('term' => array('type' => $type))
                   )
              )
          ) :
            array('match' => array('_all' => $term))
    )
  )
); 
```

# windows - 使用命令提示符锁定文件夹

> ID：12281413
> 
> 赞同：1
> 
> 时间：2012-09-05T12:27:02.310
> 
> 标签：windows, command-line

我们如何使用命令提示符锁定文件夹，而不设置用户权限，也不使用`attrib`命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:47:00.387

首先进入文件夹目录，然后输入 cacls folder_name /e /p everyone:n 锁定和 cacls folder_name /e /p everyone:f 解锁。

# c# - EnterpriseLibrary.Logging 终止应用程序

> ID：12281415
> 
> 赞同：0
> 
> 时间：2012-09-05T12:27:07.583
> 
> 标签：c#, logging, enterprise-library

我们使用一些使用 Microsoft.EnterpriseLibrary.Logging 作为服务运行的第三方软件。

最近该服务停止了很多次。我们只有来自 Windows 事件日志的数据。Stacktrace 显示 MS EntLib 日志记录引发了 ArgumentNullException。

`Event Type: Error Event Source: .NET Runtime Event Category: None Event ID: 1026 Date: 04/09/2012 Time: 19:05:23 User: N/A Computer: XXX Description: Application: XXX.Service.exe Framework Version: v4.0.30319 Description: The process was terminated due to an unhandled exception. Exception Info: System.ArgumentNullException Stack: at Microsoft.Practices.EnterpriseLibrary.Logging.LogEntry.BuildCategoriesCollection(System.String) at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.WriteTraceMessage(System.String, System.String, System.Diagnostics.TraceEventType) at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.WriteTraceEndMessage(System.String) at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.Dispose(Boolean) at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.Dispose() at XXX`

我已经检查过了，看起来它是由以下原因引起的：

`Trace.CorrelationManager.LogicalOperationStack.Peek()`

返回空

谁能帮助我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T23:05:26.383

在以前的版本中，这个问题似乎也是 E-Lib 的一个已知错误。

称为：从多个线程使用日志记录 AB 时出现未处理的异常。

“根本问题是，在 .NET 2.0 RTM 中，如果创建子线程时存在这样的堆栈，则父线程的操作堆栈与其子线程共享。”

在这里阅读更多：http: [//entlib.codeplex.com/workitem/9592](http://entlib.codeplex.com/workitem/9592)

很难为此提出通用解决方案，因为它在很大程度上取决于您的应用程序的架构。

# embedded-jetty - 单线程嵌入式 Jetty？

> ID：12281418
> 
> 赞同：2
> 
> 时间：2012-09-05T12:27:15.653
> 
> 标签：embedded-jetty

如何使嵌入式 Jetty 实例成为单线程？

我努力了

```
server.setThreadPool(new QueuedThreadPool(1)) 
```

但它抱怨池中没有足够的线程，并挂起。即使我使用 a`SocketConnector`而不是 NIO 连接器，这种情况仍然会发生。

（我想要这个的原因是我正在尝试解决[这个问题](https://stackoverflow.com/questions/11743894/integration-tests-for-google-app-engine-java)- 顺便说一句，我目前有一个赏金！ - 谷歌`LocalServiceTestHelper`似乎只在当前线程中生效。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:58:07.947

需要 2个`SocketConnector`线程 - 一个用于等待连接，一个用于服务连接。其他连接器可能需要更多，因此请使用`SocketConnector`.

此外，您**必须**确保在建立另一个连接之前在客户端关闭每个连接 - 否则服务器会将其保持打开一段时间，以防要发送更多 HTTP 请求。确保禁用 Keep-Alive。

# php - 通过 Javascript 更改 PHP 会话变量

> ID：12281420
> 
> 赞同：0
> 
> 时间：2012-09-05T12:27:15.893
> 
> 标签：php, javascript, html, session, session-variables

我在我的 PHP 网站上有一个横幅，可以通过使用 Javascript 单击图像来关闭它。但是当用户重新加载页面或访问另一个页面时，横幅会再次显示，我想阻止这种情况。为了做到这一点，我需要一种从该 Javascript 访问会话变量的方法。有什么办法可以做到这一点，或者除了使用会话变量之外还有其他方法吗？

我已经看到已经有一些关于这个主题的问题，但我无法成功使用这些答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:30:30.743

您不能直接访问会话变量，因为它们保存在服务器上，而不是在执行 JavaScript 的客户端上。

但是，您可以将 AJAX 请求发送回您的服务器，请求设置该会话变量。

另一种选择是设置 cookie 值并为下一个站点请求检索该 cookie 值。

我认为第一种选择更好，但根据您的系统，第二种方法可能更适合您的情况。

# spring-mvc - Spring MVC 和请求参数绑定

> ID：12281422
> 
> 赞同：0
> 
> 时间：2012-09-05T12:27:25.243
> 
> 标签：spring-mvc

假设我有一个格式为 action.htm?key0=value0&key1=value1 的 URL。我已将此绑定到控制器。现在，使用 @PathVariable 如何绑定 key0 和 key1？例如：

```
@RequestMapping(value = "/action", params="myParam=myValue")
public String action(@PathVariable String key0, @PathVariable String key1, Model model) { 
```

不工作。我能看到的所有示例都是针对休息样式绑定的，找不到任何键值类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:37:07.303

使用 RequestParam 注释，例如：

```
public String create(@Valid Message message, BindingResult bindingResult, @RequestParam(required = false) Integer page, @RequestParam(required = false) Integer size) { 
```

许多示例在 RequestParam 注释中使用 value=""，例如：

```
@RequestParam(value = "size", required = false) Integer size 
```

但是，如果没有提供值，它将使用参数名称，因此，我认为这是重复的，所以不喜欢使用 value="" 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:33:15.270

为了安静，这样做：

```
@RequestMapping(value = "/{key0}/{key1}", method = RequestMethod.GET)
public String action(@PathVariable String key0, @PathVariable String key1) 
```

# android - 如何在意图中获得选定的微调器值？

> ID：12281428
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:02.310
> 
> 标签：android

如何在意图中获取微调器选择的位置并将其作为参数传递给另一个 Activity？

```
 spinner  sp;
if (position==1) {
 do this
} if (position==2) {
 do this
}

Intent i = new Intent(this.getApplicationContext(), AgAppMenu.class);
Bundle bundle = new Bundle();
bundle.putString("mno", mobile.getText().toString());
bundle.putString("pinno", pin.getText().toString());
bundle.putLong("CODE",sp.getSelectedItemPosition()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:36:09.477

也许这就是你想要做的？

```
sp.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> av, View v,
                    int pos, long id) {
                //do something with the pos var
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {}                       
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:31:07.967

如果我理解正确。现在你所缺少的是

```
intent.putExtras(bundle);
startActivity(intent); 
```

编辑：

要获得价值，请使用

```
(YourType) sp.getSelectedItem(); 
```

`YourType`您希望获得的值的类型在哪里。如果是`Long`，则将其转换为`Long`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:33:40.613

定义一个类变量（此处为 String selectedMonth）并在以下方法中为其赋值，然后在意图中使用此变量

公共无效 onItemSelected（AdapterView 月，查看 arg1，int arg2，long arg3）{

```
 selectedMonth=  month.getItemAtPosition(arg2).toString();

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:42:36.087

```
String item;
sp.setOnItemSelectedListener(new OnItemSelectedListener() {
public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
item = (String) arg0.getItemAtPosition(arg2);
}
public void onNothingSelected(AdapterView<?> arg0) {
// TODO Auto-generated method stub
}
});

Intent i = new Intent(this.getApplicationContext(), AgAppMenu.class);
Bundle bundle = new Bundle(); bundle.putString("CODE",item); 
```

# php - 我如何与 symfony2 学说2中的实体之间的关系建立关系

> ID：12281433
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:14.253
> 
> 标签：php, symfony, doctrine-orm

我有这个复杂的关系

```
`School` has one to many with  `rules`
`Games` has many to many `rules` 
```

`Games`与`School`

但是对于每所学校，同样的游戏有不同的规则

IE。我需要有三个 id 的表

`school_id , game_id , rule_id`

到目前为止，我只能与两个实体建立关系，但我不知道如何在关系中建立三个实体

假设我与`game`and有简单的关系`rules`。

IE `S1 has R1 R2 R3`

和`S2 HAS R4 R5 R6`

现在游戏假设`G1 for S1 has is linked to R1 R2 and for S2 linked to R4 R5`

我得到的问题是当我编辑任何学校的数据时，学说首先删除所有学校的所有其他值，然后插入新值。

理想情况下，它应该只更新该学校的 avlues

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:40:07.500

实体学校有一个或多个规则。

实体规则有一个游戏。

你不需要在游戏和学校之间建立关系。

您可以轻松地为学校提供具有不同规则的不同游戏。

如果您需要学校的游戏规则，您只需要找到哪些实体规则与您的学校和您的游戏有关。

看起来很完美。:) 如果我（或你）错过了什么，请告诉我。

# ruby-on-rails - 视图中的响应类型

> ID：12281439
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:32.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, response

我想将我的表单部分用于 html 和 js 请求。第二个我必须放入`:remote => true`标签`form_for`。

是否可以读取响应类型（html、js、...）并将其用作视图中的条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:09:43.063

例如，这个[**`respond_to`**](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)'s 用法示例应该对您有所帮助。并且作为补充：您可以利用[**Ruby 论坛中的讨论。**](http://www.ruby-forum.com/topic/150877)

```
respond_to do |format|
  format.js { #Magic goes here } 
```

您也可以`respond_to`通过调用`request.xhr?`. 但要注意`respond_to`块。AJAX**可以**用 html 响应（即`$.ajax({dataType: 'html'})`）

# javascript - Google Maps V3 中的奇怪光标行为

> ID：12281440
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:37.720
> 
> 标签：javascript, google-maps-api-3, cursor

当我从远程服务器请求信息时，我试图将我在谷歌地图中的光标更改为“等待”光标。这是来自国际服务器的天气信息，有时可能需要很长时间才能返回，所以我希望用户知道正在发生一些事情。

用户单击标记或边界框，然后我进行以下调用以获取数据：

```
map.setOptions({draggableCursor: "wait"});
$.ajax({
    type:"GET",
    dateType:"html",
    url:url,
    cache:false,
    success:function(response){openInfoWindow(response, 1);},
    error:function() 
        {
        map.setOptions({draggableCursor: null});
        displayMessage("badGet",0);
        }
});;

function openInfoWindow(request, ignoreStatus)
{
map.setOptions({draggableCursor: null});
infoWindow = new InfoBox({maxWidth: 0, position: center, disableAutoPan: true});
} 
```

我在 openInfoWindow 中做的第一件事是 map.setOptions({draggableCursor: null})，所以光标应该回到正常光标。之后，我打开一个带有结果的 infoWindow。

以下是我觉得很奇怪的地方：

1）如果我将光标留在标记上或边界框内，它永远不会切换到等待光标。如果我将它移出标记或边界框之外，它会按预期工作。

2) 如果光标位于 infoWindow 出现的位置上，则光标切换到等待光标，但直到我将光标移出 infoWindow 后才会切换回正常光标。

3) 当光标不在被点击的对象或信息窗口的位置上时，它不会从“等待”变为正常，直到光标移动。

我怀疑关于光标如何/何时更新，我缺少一些基本的东西。任何启示将不胜感激。

请注意，您可以在[http://www.geoffschultz.org/weather_map_2.php](http://www.geoffschultz.org/weather_map_2.php)通过选择 Weather Charts/BBC In-shore Forecast 和许多其他地方查看此行为。

——杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-07T23:29:52.820

我还必须拖动或单击以使光标在之后变回来

`map.setOptions({draggableCursor: null});`

只要我移动鼠标，使用它就对我有用

`map.setOptions({draggableCursor: ''});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:16:01.553

对于问题 1，您需要将标记光标与地图光标分开设置。

```
Marker.setCursor("wait"); 
```

不确定 InfoWindow 的问题。

# c# - 如何防止 RegisterHotKey 停止默认键操作？

> ID：12281442
> 
> 赞同：3
> 
> 时间：2012-09-05T12:28:41.273
> 
> 标签：c#, winapi, registerhotkey

我正在使用 Window 的 API [RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)函数在特定应用程序打开并获得焦点时按下 F2 键来运行宏。

问题是，这会阻止 F2 键用于其他应用程序，例如 Excel。

如何防止`RegisterHotKey`停止默认操作？

我有一个系统托盘应用程序，它使用[这个答案](https://stackoverflow.com/a/3654821/302677)`HotKeyManager`中的类来注册热键。当按下特定键（例如 F2）时，我使用 Windows API 检查闭源应用程序是否已打开并获得焦点，如果是，则向其发送一系列[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:02:38.320

RegisterHotKey 是全局的，因此它将捕获所有这些击键（换句话说，我认为不可能完全按照您的要求进行操作）。

但是，这个线程 [Global Keyboard Hooks (C#)](https://stackoverflow.com/questions/824229/global-keyboard-hooks-c) 谈论创建键盘消息过滤器，这（我相信）更像你想要的。

澄清一下：RegisterHotKey 将最适合诸如托盘应用程序之类的东西以及您想要不依赖于应用程序焦点的操作系统范围键盘快捷方式的任何其他地方。

Application.AddMessageFilter() 是您想要一致处理特定击键时想要的，但前提是您的应用程序已经获得焦点。

执行您所描述的操作并仍留在 .NET 中的一种方法是监视操作系统上正在运行的进程，并且仅在您的应用程序运行时启用全局挂钩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:05:22.180

据我了解，您希望您的全局热键仅在一个或多个选定应用程序集中时才起作用。[`SendKeys`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)如果您确定不兼容的应用程序在前台，您不能简单地截取笔画吗？

例如，

```
if (IsSpecificWindowFocused())
{
    // Do work
}
else
{
    // Resend the key to whatever window is current
    SendKeys.Send("{F2}");
} 
```

# .net - Windows 2008 R2 附带什么版本的 .Net Framework

> ID：12281444
> 
> 赞同：1
> 
> 时间：2012-09-05T12:28:48.980
> 
> 标签：.net, windows-server-2008-r2

全新安装的 2008 R2 会默认提供哪个 .net 框架？frameowkr 2.0 或 3.5 或什么都没有。如果我需要手动启用 3.5 意味着默认情况下已经安装了所有内容，我需要启用它还是需要安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:33:31.683

资料来源：[Windows 2008 R2 附带什么版本的 .Net Framework？](http://social.technet.microsoft.com/Forums/en-US/windowsserver2008r2webtechnologies/thread/ac1bf719-0a88-4b5d-be98-395f2623e805)

Windows Server 2008 R2 包括带有 SP1 的 .Net Framework 3.5。你需要安装它`from --> Server Manager --> Features --> .Net Framework 3.5.1 Features.`

默认情况下，系统自带.Net Framwork Setup v2.0.50727 安装。您可以通过以下注册表项进行验证

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP
- Version REG_SZ 2.0.50727 
```

检查 ServerFault 线程 - [https://serverfault.com/questions/149415/exactly-which-net-version-does-windows-server-2008-r2-core-support](https://serverfault.com/questions/149415/exactly-which-net-version-does-windows-server-2008-r2-core-support) 和 SO 线程[https://stackoverflow.com/questions/ 71390/which-operating-systems-come-with-net](https://stackoverflow.com/questions/71390/which-operating-systems-come-with-net) 了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:44:54.070

来自：[什么版本的 .NET Framework 包含在什么版本的操作系统中？](http://blogs.msdn.com/b/astebner/archive/2007/03/14/mailbag-what-version-of-the-net-framework-is-included-in-what-version-of-the-os.aspx)作者：[亚伦·斯特布纳](http://social.msdn.microsoft.com/profile/aaron%20stebner/)

> Windows Server 2008 R2（所有版本）包括 .NET Framework 3.5.1 作为操作系统组件。这意味着您将获得 .NET Framework 2.0 SP2、3.0 SP2 和 3.5 SP1 以及一些 3.5 SP1 后的错误修复。可以通过程序和功能控制面板添加或删除 3.0 SP2 和 3.5 SP1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:32:04.887

见这里：[https ://stackoverflow.com/questions/71390/which-operating-systems-come-with-net](https://stackoverflow.com/questions/71390/which-operating-systems-come-with-net)

显然 .NET Framework 3.5 SP1

搜索是你的朋友；）

# wordpress - Wordpress - 在 2 列中显示子类别

> ID：12281445
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:51.087
> 
> 标签：wordpress

我使用以下代码显示子类别列表：

```
<?php
if (is_category()) {
$this_category = get_category($cat);
}
if($this_category->category_parent)
$this_category = wp_list_categories('orderby=id&title_li=&child_of='.$this_category->category_parent."&echo=0"); else
$this_category = wp_list_categories('orderby=id&title_li=&child_of='.$this_category->cat_ID."&echo=0");
if ($this_category) { ?>
<?php echo $this_category; ?>
<?php } ?> 
```

如何在 2 列中显示子类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:26:59.680

Wordpress 通过这些功能为您提供大量内容。它们为您提供了许多功能来使用此内容，但如果您遇到困难并且没有任何功能符合您的需求，请随意创建自己的功能。

在这里，尝试您的对象 $this_category 的 var_dump()，并查看结果。

然后，您应该能够使用此内容以您想要的方式显示您的类别。

# oracle - 如何提高查询的性能？/ 我的查询运行缓慢。

> ID：12281448
> 
> 赞同：0
> 
> 时间：2012-09-05T12:28:59.837
> 
> 标签：oracle, plsqldeveloper

workitem_routing_stats 表有大约 1000000 条记录。所有记录都被访问，这就是我们使用完整扫描提示的原因。执行大约需要 25 秒，是否有任何方法可以调整此查询。

```
SELECT /*+ full(wrs) */
wrs.NODE_ID,
wrs.bb_id--,
SUM(CASE WHEN WRS.START_TS >= (SYSTIMESTAMP-NUMTODSINTERVAL(7,'day'))
AND wrs.END_TS <= SYSTIMESTAMP THEN (wrs.WORKITEM_COUNT) END) outliers_last_sevend,

SUM(CASE WHEN WRS.START_TS >= (SYSTIMESTAMP-NUMTODSINTERVAL(30,'day'))
AND wrs.END_TS <= SYSTIMESTAMP THEN (wrs.WORKITEM_COUNT) END)
outliers_last_thirtyd ,

SUM(CASE WHEN WRS.START_TS >= (SYSTIMESTAMP-NUMTODSINTERVAL(90,'day'))
AND wrs.END_TS <= SYSTIMESTAMP THEN (wrs.WORKITEM_COUNT) END)
outliers_last_ninetyd ,
SUM(wrs.WORKITEM_COUNT)outliers_year

FROM workitem_routing_stats wrs
WHERE wrs.START_TS BETWEEN (SYSTIMESTAMP-numtodsinterval(365,'day')) AND SYSTIMESTAMP
AND wrs.END_TS BETWEEN (SYSTIMESTAMP-numtodsinterval(365,'day')) AND SYSTIMESTAMP
GROUP BY wrs.NODE_ID,wrs.bb_id ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:17:40.973

您可以按月在 START_TS 列上对表进行范围分区。（将仅扫描您感兴趣的年份）

其次（不是一个非常智能的解决方案）如果您的存储功能强大，您可以添加并行（wrs 4）提示。

你可以把这两件事结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:11:59.930

另一种可能性 - 似乎这些数据可能会从今天开始添加新的时间戳，但其余的只是历史......

如果是这种情况，那么您可以添加一个汇总表来保存汇总的历史信息，并仅在当前表中查询最近的内容，并在汇总表中查询较旧的内容。

然后，您将需要仔细考虑 JOB 或其他预定流程以获取汇总信息，但这会在此查询时间内为您节省大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:37:14.253

无论如何，全面扫描会很痛苦......

但是 - 如果您只是输入正确的数字而不是调用转换函数，您可能会避免一些计算：

```
(SYSTIMESTAMP-numtodsinterval(365,'day')) 
```

应该与

```
(SYSTIMESTAMP-365) 
```

这应该消除调用函数和解析参数字符串（'day'）的开销

# .net - 防止WPF ComboBox中的文本自动完成？

> ID：12281453
> 
> 赞同：8
> 
> 时间：2012-09-05T12:29:07.623
> 
> 标签：.net, wpf, vb.net, combobox

我正在使用Diederik Krols 的[这个过滤的 WPF ComboBox 控件](http://dotbay.blogspot.co.uk/2009/04/building-filtered-combobox-for-wpf.html)。

我发现它几乎适用于所有情况，但是输入集合中任何给定项目的第一个字母会导致 ComboBox 自动将其文本属性设置为表示该项目的字符串，因此会终止所有进一步的过滤。发生这种情况时，我什至无法从结果中退格，因为按退格键会导致循环再次发生。

经过多次挠头，盯着墙壁，像个白痴一样流口水后，我*终于*发现，如果 ComboBox 已设置为 AutoCompleteMode.Append，这实际上是预期的行为。我需要将其设置为 AutoCompleteMode.None。

[WPF 组合框](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.aspx)似乎没有 AutoCompleteMode 属性。

有没有办法解决这个问题，以实现 AutoCompleteMode.None 行为？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-05T12:34:06.897

```
<ComboBox IsTextSearchEnabled="false"/> 
```

# c# - System.Speech.Recognition 可以使用语音文件作为语法吗？

> ID：12281454
> 
> 赞同：0
> 
> 时间：2012-09-05T12:29:08.797
> 
> 标签：c#, speech-recognition

我正在 c# .NET Framework 4.0 中制作基于语音的应用程序

我想使用语音文件（如 .wav）作为语法而不是字符串，因为我的应用程序将使用非英语语言，并且很难将其转换为英文字符。例如，会有像**Khorooj**或**Taghire 'onvan 这样的表达式**。而且会有很多问题，比如**一个**字母的短语差异等等。所以通过语音文件作为参考，这样做会容易得多。

我该如何开始？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:49:33.103

作为变体，我建议您使用 Google Voice Search (GVS)。
GVS 使用 flac 作为输入音频的音频格式，因此您应该使用 Cuetools 之类的东西将波流转换为 flac

```
 public static int Wav2Flac(String wavName, string flacName)
    {
        int sampleRate = 0;

        IAudioSource audioSource = new WAVReader(wavName, null);
        AudioBuffer buff = new AudioBuffer(audioSource, 0x10000);

        FlakeWriter flakewriter = new FlakeWriter(flacName, audioSource.PCM);
        sampleRate = audioSource.PCM.SampleRate;            
        FlakeWriter audioDest = flakewriter;
        while (audioSource.Read(buff, -1) != 0)
        {
            audioDest.Write(buff);                
        }
        audioDest.Close();

        audioDest.Close();
        return sampleRate;
  }
  public static String GoogleSpeechRequest(String flacName, int sampleRate)
  {

    WebRequest request = WebRequest.Create("https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=ru-RU");

    request.Method = "POST";

    byte[] byteArray = File.ReadAllBytes(flacName);

    // Set the ContentType property of the WebRequest.
    request.ContentType = "audio/x-flac; rate=" + sampleRate; //"16000";        
    request.ContentLength = byteArray.Length;

    // Get the request stream.
    Stream dataStream = request.GetRequestStream();
    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);

    dataStream.Close();

    // Get the response.
    WebResponse response = request.GetResponse();

    dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();

    // Clean up the streams.
    reader.Close();
    dataStream.Close();
    response.Close();

    return responseFromServer;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:37:28.920

您不能将语音文件用作语法。Microsoft 语音识别引擎需要[W3C 开放标准机构指定格式的](http://www.w3.org/TR/speech-grammar/)语法。语法并不是语音识别引擎应该理解的所有单词的列表。语法是一组规则，用于对与系统的特定对话的预期响应。另一种说法是语法没有指定语音识别系统将理解的语言。您需要获取语言包并为您要使用的特定语音供应商安装它们。对于 Microsoft，它也可以特定于您使用的操作系统版本。以下是[Vista 支持的语言](http://support.microsoft.com/kb/934377)。您可能需要与其他语音记录供应商合作以支持您想要的语言，例如[Nuance](http://www.nuance.com/for-business/by-product/automotive-products-services/language-portfolio/index.htm).

# ruby - 在 ruby 正则表达式中匹配换行符`\n`

> ID：12281458
> 
> 赞同：10
> 
> 时间：2012-09-05T12:29:23.997
> 
> 标签：ruby, regex

我试图理解为什么以下返回错误：（**我应该把“输出0”**）

```
puts "a\nb" =~ Regexp.new(Regexp.escape("a\nb"), Regexp::MULTILINE | Regexp::EXTENDED) 
```

也许有人可以解释。

我正在尝试从与字符串匹配的多行字符串生成正则表达式。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T12:47:48.913

`puts`总会回来`nil`的。

您的代码应该可以正常工作，尽管很长。`=~`返回匹配的位置，即 0。

您还可以使用：

```
"a\nb" =~ /a\sb/m 
```

或者

```
"a\nb" =~ /a\nb/m 
```

注意：该`m`选项在此示例中不是必需的，但演示了如何在没有`Regexp.new`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:39:57.820

大概，`puts`导致了这个

```
1.9.3-194 (main):0 > puts ("a\nb" =~ Regexp.new(Regexp.escape("a\nb"), Regexp::MULTILINE | Regexp::EXTENDED) )
0
=> nil

1.9.3-194 (main):0 > "a\nb" =~ Regexp.new(Regexp.escape("a\nb"), Regexp::MULTILINE | Regexp::EXTENDED)
=> 0 
```

# objective-c - 这是使用快速枚举的低效方式吗？

> ID：12281461
> 
> 赞同：4
> 
> 时间：2012-09-05T12:29:30.540
> 
> 标签：objective-c, ios, fast-enumeration

我不完全了解枚举速度如何工作的细节，但比较以下两种情况：

```
for(NSObject *object in self.myParent.parentsParents.granfathersMother.cousin.unclesNephew.array) {
    // do something
} 
```

对比

```
NSArray *array = self.myParent.parentsParents.granfathersMother.cousin.unclesNephew.array;
for(NSObject *object in array) {
     // do something
 } 
```

在第一个示例中，它是否会在每次迭代时遍历整个链来获取数组？我应该使用第二种方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:16:06.333

当 Apple 推出快速枚举时，我在 WWDC，并且（我记得）当时我们被告知右手对象被移动到临时对象中。此外，它必须是因为这有效：

for(id foo in [myCollection reverseObjectEnumerator])

您可以看到执行快速枚举的集合采用“快速枚举协议”（NSFastEnumeration），它有一种方法：

```
– countByEnumeratingWithState:objects:count: 
```

该方法返回一个 C 对象数组，它可以让枚举非常快速地进行，再次支持右侧的一次性使用。

* * *

现在，说了这么多，目前 Apple 建议开发人员（在 WWDC）使用块枚举，他们声称这既更快又生成更少的代码：

```
[myCollection enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
{
... your code
} ]; 
```

我喜欢做的不是使用“id obj”，而是使用实际类型（以避免在块中强制转换）：

```
[myCollection enumerateObjectsUsingBlock:^(NSDictionary *dict, NSUInteger idx, BOOL *stop)
{
... your code
} ]; 
```

当我这样做时，编译器和分析器（4.4）都不会抱怨。

如果您需要在此方法之外设置变量，则必须将其设为块变量：

```
__block int foo = 0;
[myCollection enumerateObjectsUsingBlock:^(NSNumber *num, NSUInteger idx, BOOL *stop)
{
   foo = MAX(foo, [num integerValue]);
} ]; 
```

编辑：作为澄清，您的问题的直接答案是“否”，语句“self.myParent.parentsParents.granfathersMother.cousin.unclesNephew.array”被评估一次，最终对象存储为堆栈上的临时对象。此外，您可以对块枚举使用相同的技术 - 语句被评估一次，最终返回的对象用于枚举。

```
__block int foo = 0;
[self.myParent.parentsParents.granfathersMother.cousin.unclesNephew.array enumerateObjectsUsingBlock:^(NSNumber *num, NSUInteger idx, BOOL *stop)
{
   foo = MAX(foo, [num integerValue]);
} ]; 
```

EDIT2：我在 SO 上找到了另一个讨论相同主题的线程。关于块枚举，我错过的一点是，您可以使用稍微复杂的方法指定它们应该同时（或反向）运行：

```
enumerateObjectsWithOptions:usingBlock: 
```

随着 iOS 设备获得越来越多的核心，这可能是一个巨大的胜利，这取决于你在做什么。

@bbum 对这个问题的回答（以及其他问题）在[这里](https://stackoverflow.com/a/4487012/1633251)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:40:04.810

这可能是特定于编译器的（即未定义的）。如果您对此感到困扰，请添加一些计时代码并找出自己：

```
#import <sys/time.h>

static unsigned getTickCount()
{
    struct timeval tv;
    gettimeofday(&tv, 0);
    return (unsigned)((tv.tv_sec * 1000) + (tv.tv_usec / 1000));
} 
```

...

```
unsigned startTime = getTickCount();
for(NSObject *object in self.myParent.parentsParents.granfathersMother.cousin.unclesNephew.array) {
    // do something
}
unsigned endTime = getTickCount();
NSLog(@"That took %umS", endTime - startTime); 
```

但是，您必须有一个相当大的数组才能注册上面的任何内容`0`。

# php - PHP：如何按数字键对数组进行排序？

> ID：12281462
> 
> 赞同：2
> 
> 时间：2012-09-05T12:29:30.523
> 
> 标签：php, sorting, ksort

尽管我已经阅读了 PHP 文档并且这看起来像是一个常见问题解答，但它仍然让我有些头疼。

我有一个这样的数组，其中包含一年中的月份：

```
[12] => december
 [4] => april
 [3] => march
 [6] => june
 [7] => july
[10] => october

...and so on 
```

顺序不是应有的。我想以数字方式重新排序键。如果我愿意，我可以用值交换键，但是虽然每个数值都会匹配相应的月份，但它们永远不会按顺序排列。所以我想通过 PHP 把这些整理好。

我试过了`$calendar = ksort( $myarray );`

但是如果我尝试打印`$calendar`，我只会得到 bool=true 或带有单个键和“1”作为值的数组......我打算稍后在 foreach 中使用 ksort 结果，但我不能。

我说错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:30:36.583

不..只需使用：

```
ksort($myarray);
print_r($myarray) 
```

[键盘示例](http://codepad.org/kQihb8K8)

[ksort()](http://uk.php.net/ksort)按键对数组进行排序，维护数据相关性的关键，`TRUE`成功或`FALSE`失败返回，如果你将 与你关联`$calendar`，`ksort()`你将得到什么`ksort`返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:26:27.633

```
ksort($arr);
foreach ($arr as $key => $val) 
{ 
   echo "$key = $val\n";
} 
```

# jquery - 本地表单编辑demo和jqGrid 4.4.1

> ID：12281463
> 
> 赞同：1
> 
> 时间：2012-09-05T12:29:36.407
> 
> 标签：jquery, jqgrid, treegrid

此演示：[http](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm) : //www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm 如果我将 javascript 包含更新到 jqGrid 的最新版本，则无法正常工作。

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/css/ui.jqgrid.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/i18n/grid.locale-en.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.base.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.common.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.formedit.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.inlinedit.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.celledit.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.subgrid.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.treegrid.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.grouping.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.custom.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/jquery.fmatter.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/jquery.searchFilter.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/grid.jqueryui.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/jqDnR.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/jqModal.js"></script>
<!--<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.min.js"></script>--> 
```

主要问题是当我添加记录时，TR 的 ID 是错误的。对此有何更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:42:05.720

从[旧答案中使用](https://stackoverflow.com/a/5611519/315935)[我的旧演示](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm)的主要问题在于代码行

```
this.processing = true; 
```

jqGrid 现在在大多数回调函数的调用中初始化`this`为表 ( ) 的 DOM 元素。`$("#list")[0]`所以上面的行必须固定为

```
options.processing = true; 
```

还有其他一些小的变化也应该实施。最重要的是调用对`$.unformat.date`格式化程序使用的所有字段进行解码`"date"`。

新的演示使用了 jqGrid 4.4.1，你可以在[这里](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing1.htm)找到。

您将在下面找到完整的代码

```
var lastSel,
    mydata = [
        {id: "1",  invdate: "2007-10-01", name: "test",   note: "note",   amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"},
        {id: "2",  invdate: "2007-10-02", name: "test2",  note: "note2",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00"},
        {id: "3",  invdate: "2007-09-01", name: "test3",  note: "note3",  amount: "400.00", tax: "30.00", closed: false, ship_via: "FE", total: "430.00"},
        {id: "4",  invdate: "2007-10-04", name: "test4",  note: "note4",  amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"},
        {id: "5",  invdate: "2007-10-31", name: "test5",  note: "note5",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00"},
        {id: "6",  invdate: "2007-09-06", name: "test6",  note: "note6",  amount: "400.00", tax: "30.00", closed: false, ship_via: "FE", total: "430.00"},
        {id: "7",  invdate: "2007-10-04", name: "test7",  note: "note7",  amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"},
        {id: "8",  invdate: "2007-10-03", name: "test8",  note: "note8",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00"},
        {id: "9",  invdate: "2007-09-01", name: "test9",  note: "note9",  amount: "400.00", tax: "30.00", closed: false, ship_via: "TN", total: "430.00"},
        {id: "10", invdate: "2007-09-08", name: "test10", note: "note10", amount: "500.00", tax: "30.00", closed: true,  ship_via: "TN", total: "530.00"},
        {id: "11", invdate: "2007-09-08", name: "test11", note: "note11", amount: "500.00", tax: "30.00", closed: false, ship_via: "FE", total: "530.00"},
        {id: "12", invdate: "2007-09-10", name: "test12", note: "note12", amount: "500.00", tax: "30.00", closed: false, ship_via: "FE", total: "530.00"}
    ],
    grid = $("#list"),
    getColumnIndex = function (columnName) {
        var cm = $(this).jqGrid('getGridParam', 'colModel'), i, l = cm.length;
        for (i = 0; i < l; i++) {
            if ((cm[i].index || cm[i].name) === columnName) {
                return i; // return the colModel index
            }
        }
        return -1;
    },
    onclickSubmitLocal = function (options, postdata) {
        var $this = $(this), grid_p = this.p,
            idname = grid_p.prmNames.id,
            grid_id = this.id,
            id_in_postdata = grid_id + "_id",
            rowid = postdata[id_in_postdata],
            addMode = rowid === "_empty",
            oldValueOfSortColumn,
            new_id,
            tr_par_id,
            colModel = grid_p.colModel,
            cmName,
            iCol,
            cm;

        // postdata has row id property with another name. we fix it:
        if (addMode) {
            // generate new id
            new_id = $.jgrid.randId();
            while ($("#" + new_id).length !== 0) {
                new_id = $.jgrid.randId();
            }
            postdata[idname] = String(new_id);
        } else if (typeof postdata[idname] === "undefined") {
            // set id property only if the property not exist
            postdata[idname] = rowid;
        }
        delete postdata[id_in_postdata];

        // prepare postdata for tree grid
        if (grid_p.treeGrid === true) {
            if (addMode) {
                tr_par_id = grid_p.treeGridModel === 'adjacency' ? grid_p.treeReader.parent_id_field : 'parent_id';
                postdata[tr_par_id] = grid_p.selrow;
            }

            $.each(grid_p.treeReader, function (i) {
                if (postdata.hasOwnProperty(this)) {
                    delete postdata[this];
                }
            });
        }

        // decode data if there encoded with autoencode
        if (grid_p.autoencode) {
            $.each(postdata, function (n, v) {
                postdata[n] = $.jgrid.htmlDecode(v); // TODO: some columns could be skipped
            });
        }

        // save old value from the sorted column
        oldValueOfSortColumn = grid_p.sortname === "" ? undefined : grid.jqGrid('getCell', rowid, grid_p.sortname);

        // save the data in the grid
        if (grid_p.treeGrid === true) {
            if (addMode) {
                $this.jqGrid("addChildNode", new_id, grid_p.selrow, postdata);
            } else {
                $this.jqGrid("setTreeRow", rowid, postdata);
            }
        } else {
            if (addMode) {
                // we need unformat all date fields before calling of addRowData
                for (cmName in postdata) {
                    if (postdata.hasOwnProperty(cmName)) {
                        iCol = getColumnIndex.call(this, cmName);
                        if (iCol >= 0) {
                            cm = colModel[iCol];
                            if (cm && cm.formatter === "date") {
                                postdata[cmName] = $.unformat.date.call(this, postdata[cmName], cm);
                            }
                        }
                    }
                }
                $this.jqGrid("addRowData", new_id, postdata, options.addedrow);
            } else {
                $this.jqGrid("setRowData", rowid, postdata);
            }
        }

        if ((addMode && options.closeAfterAdd) || (!addMode && options.closeAfterEdit)) {
            // close the edit/add dialog
            $.jgrid.hideModal("#editmod" + grid_id, {
                gb: "#gbox_" + grid_id,
                jqm: options.jqModal,
                onClose: options.onClose
            });
        }

        if (postdata[grid_p.sortname] !== oldValueOfSortColumn) {
            // if the data are changed in the column by which are currently sorted
            // we need resort the grid
            setTimeout(function () {
                $this.trigger("reloadGrid", [{current: true}]);
            }, 100);
        }

        // !!! the most important step: skip ajax request to the server
        options.processing = true;
        return {};
    },
    editSettings = {
        //recreateForm: true,
        jqModal: false,
        reloadAfterSubmit: false,
        closeOnEscape: true,
        savekey: [true, 13],
        closeAfterEdit: true,
        onclickSubmit: onclickSubmitLocal
    },
    addSettings = {
        //recreateForm: true,
        jqModal: false,
        reloadAfterSubmit: false,
        savekey: [true, 13],
        closeOnEscape: true,
        closeAfterAdd: true,
        onclickSubmit: onclickSubmitLocal
    },
    delSettings = {
        // because I use "local" data I don't want to send the changes to the server
        // so I use "processing:true" setting and delete the row manually in onclickSubmit
        onclickSubmit: function (options, rowid) {
            var $this = $(this), grid_id = $.jgrid.jqID(this.id), grid_p = this.p,
                newPage = grid_p.page;

            // reset the value of processing option to true to
            // skip the ajax request to 'clientArray'.
            options.processing = true;

            // delete the row
            if (grid_p.treeGrid) {
                $this.jqGrid("delTreeNode", rowid);
            } else {
                $this.jqGrid("delRowData", rowid);
            }
            $.jgrid.hideModal("#delmod" + grid_id, {
                gb: "#gbox_" + grid_id,
                jqm: options.jqModal,
                onClose: options.onClose
            });

            if (grid_p.lastpage > 1) {// on the multipage grid reload the grid
                if (grid_p.reccount === 0 && newPage === grid_p.lastpage) {
                    // if after deliting there are no rows on the current page
                    // which is the last page of the grid
                    newPage--; // go to the previous page
                }
                // reload grid to make the row from the next page visable.
                $this.trigger("reloadGrid", [{page: newPage}]);
            }

            return true;
        },
        processing: true
    },
    initDateEdit = function (elem) {
        setTimeout(function () {
            $(elem).datepicker({
                dateFormat: 'dd-M-yy',
                //autoSize: true,
                showOn: 'button',
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                showWeek: true
            });
        }, 100);
    },
    initDateSearch = function (elem) {
        setTimeout(function () {
            $(elem).datepicker({
                dateFormat: 'dd-M-yy',
                //autoSize: true,
                //showOn: 'button', // it dosn't work in searching dialog
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                showWeek: true
            });
        }, 100);
    };

grid.jqGrid({
    datatype: 'local',
    data: mydata,
    colNames: [/*'Inv No', */'Client', 'Date', 'Amount', 'Tax', 'Total', 'Closed', 'Shipped via', 'Notes'],
    colModel: [
        //{name: 'id', width: 70, align: 'center', sorttype: 'int', searchoptions: {sopt: ['eq', 'ne']}},
        {name: 'name', index: 'name', editable: true, width: 60, editrules: {required: true}},
        {name: 'invdate', index: 'invdate', width: 80, align: 'center', sorttype: 'date',
            formatter: 'date', formatoptions: {newformat: 'd-M-Y'}, editable: true, datefmt: 'd-M-Y',
            editoptions: {dataInit: initDateEdit, size: 14},
            searchoptions: {dataInit: initDateSearch}},
        {name: 'amount', index: 'amount', width: 70, formatter: 'number', editable: true, align: 'right'},
        {name: 'tax', index: 'tax', width: 50, formatter: 'number', editable: true, align: 'right'},
        {name: 'total', index: 'total', width: 60, formatter: 'number', editable: true, align: 'right'},
        {name: 'closed', index: 'closed', width: 70, align: 'center', editable: true, formatter: 'checkbox',
            edittype: 'checkbox', editoptions: {value: 'Yes:No', defaultValue: 'Yes'},
            stype: 'select', searchoptions: {sopt: ['eq', 'ne'], value: ':All;true:Yes;false:No'}},
        {name: 'ship_via', index: 'ship_via', width: 100, align: 'center', editable: true, formatter: 'select',
            edittype: 'select', editoptions: {value: 'FE:FedEx;TN:TNT;IN:Intim', defaultValue: 'Intime'},
            stype: 'select', searchoptions: {value: ':All;FE:FedEx;TN:TNT;IN:Intim'}},
        {name: 'note', index: 'note', width: 60, sortable: false, editable: true, edittype: 'textarea'}
    ],
    rowNum: 10,
    rowList: [5, 10, 20],
    pager: '#pager',
    gridview: true,
    rownumbers: true,
    autoencode: true,
    ignoreCase: true,
    sortname: 'invdate',
    viewrecords: true,
    sortorder: 'desc',
    caption: 'How to implement local form editing',
    height: '100%',
    editurl: 'clientArray',
    ondblClickRow: function (rowid, ri, ci) {
        var $this = $(this), p = this.p;
        if (p.selrow !== rowid) {
            // prevent the row from be unselected on double-click
            // the implementation is for "multiselect:false" which we use,
            // but one can easy modify the code for "multiselect:true"
            $this.jqGrid('setSelection', rowid);
        }
        $this.jqGrid('editGridRow', rowid, editSettings);
    },
    onSelectRow: function (id) {
        if (id && id !== lastSel) {
            // cancel editing of the previous selected row if it was in editing state.
            // jqGrid hold intern savedRow array inside of jqGrid object,
            // so it is safe to call restoreRow method with any id parameter
            // if jqGrid not in editing state
            if (typeof lastSel !== "undefined") {
                $(this).jqGrid('restoreRow', lastSel);
            }
            lastSel = id;
        }
    }
}).jqGrid('navGrid', '#pager', {}, editSettings, addSettings, delSettings,
    {multipleSearch: true, overlay: false,
        onClose: function (form) {
            // if we close the search dialog during the datapicker are opened
            // the datepicker will stay opened. To fix this we have to hide
            // the div used by datepicker
            $("div#ui-datepicker-div.ui-datepicker").hide();
        }}); 
```

PS我没有用TreeGrid测试代码，但我希望它也能工作。可能还需要`$.unformat.date`使用“日期”格式化程序对列进行相同的调用。

# python - 如何防止短路评估？

> ID：12281469
> 
> 赞同：27
> 
> 时间：2012-09-05T12:29:45.473
> 
> 标签：python, logical-operators, short-circuiting, short-circuit-evaluation

这是我在处理 Django 项目时遇到的一个问题。这是关于表单验证的。

在 Django 中，当您有一个提交的表单时，您可以调用`is_valid()`相应的表单对象来触发验证并返回一个布尔值。所以，通常你的视图函数中有这样的代码：

```
if form.is_valid():
    # code to save the form data 
```

`is_valid()`不仅验证表单数据，还向表单对象添加错误消息，之后可以显示给用户。

在一个页面上，我同时使用了两个表单，并且还希望仅当两个表单都包含有效数据时才保存数据。这意味着我必须`is_valid()`在执行代码之前调用这两个表单来保存数据。最明显的方式：

```
if form1.is_valid() and form2.is_valid():
    # ... 
```

由于逻辑运算符的短路评估而无法工作。如果`form1`无效，`form2`则不会进行评估，并且会丢失其错误消息。

这只是一个例子。据我所知，在其他语言（即 Smalltalk）中没有`and`/的贪婪替代品。`or`我可以想象在不同的​​情况下会出现这个问题（不仅在 Python 中）。我能想到的解决方案都是笨拙的（嵌套`if`s，将返回值分配给局部变量并在`if`语句中使用它们）。我想知道解决此类问题的pythonic方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-05T12:32:46.297

怎么样：

```
if all([form1.is_valid(), form2.is_valid()]):
   ... 
```

在一般情况下，可以使用列表理解，以便预先计算结果（与此上下文中常用的生成器表达式相反）。例如：

```
if all([ form.is_valid() for form in (form1,form2) ]) 
```

这也将很好地扩展到任意数量的条件......唯一的问题是它们都需要通过 " `and`" 而不是`if foo and bar or baz: ...`.

（对于非短路`or`，您可以使用`any`代替`all`）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-05T12:43:30.777

您可以简单地使用二元`&`运算符，它将对布尔值执行非短路逻辑*与*。

```
if form1.is_valid() & form2.is_valid():
   ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-19T18:30:31.703

您可以使用中[缀运算符](https://code.activestate.com/recipes/384122/)（ActiveState Python 配方）来定义您自己的布尔运算符：

```
aand = Infix(lambda x,y: bool(x) and bool(y))
1 |aand| 2  # Will return `True` instead of `1` 
```

# ruby - Ruby on Rails plus Mongo开发环境中如何将别名字段设置为多键哈希

> ID：12281474
> 
> 赞同：0
> 
> 时间：2012-09-05T12:29:49.067
> 
> 标签：ruby, mongodb

例如，有一个名为的模型`Order`，在我的 Mongo 数据库中有这样的数据

```
#<Order price: "100", receiver:{"name"=>"Betty", "cell_phone" =>"123"}> 
```

我的问题是我不知道如何在我的 order.rb 文件中编写一个别名，该别名可以使用以下语句在我的接收器哈希中获取密钥“名称”

```
field :money_spent, type:Float, as: :price 
```

有人可以告诉我这是否可行吗？

# python - Python：格式化合并的txt文件

> ID：12281477
> 
> 赞同：3
> 
> 时间：2012-09-05T12:29:51.820
> 
> 标签：python

我想合并两个文本文件：names.txt 和 studentid.txt

名称 txt 包含：

```
Timmy Wong, Johnny Willis, Jason Prince 
```

studentid.txt 包含：

```
B5216, B5217, B5218 
```

我想将它们组合成一个名为 studentlist.txt 的新文本文件，其格式只是希望所有逗号都变成竖线

```
Student_Name             Student_ID
Timmy Wong              | B5216
Johnny Willis           | B5217
Jason Prince            | B5218 
```

到目前为止，我真的不知道如何格式化这个，一直在阅读一些指南和我的书，但它真的没有多大帮助。

这是我到目前为止所做的

```
def main():
    one = open( "names.txt", 'r' )
    lines = one.readlines()

    two = open( "studentid.txt", 'r' )
    lines2 = two.readlines()

    outfile = open( "studentlist.txt", 'w' )
    outfile.write( "Student_Name StudentID")
    outfile.writelines( lines + lines2 )

main() 
```

并且输出变为

```
Student_Name StudentIDTimmy Wong, Johnny Willis, Jason Prince
B5216, B5217, B218 
```

我是初学者所以放轻松><"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:35:28.373

```
names = [n.strip() for n in open("names.txt").read().split(",")]
ids = [i.strip() for i in open("studentid.txt").read().split(",")]

print "Student_Name\t| Student_ID"
for n, i in zip(names, ids):
    print "{}\t| {}".format(n, i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:37:01.407

```
with open('data.txt') as f1,open('data1.txt') as f2,open('sudentlist.txt') as f3:

    line=f1.readline().strip()             #read the first line of names file 
    names=map(str.strip,line.split(','))   #split the line by "," and then apply strip()

    line=f2.readline().strip()             #read the first line of ID file 
    ids=map(str.strip,line.split(','))     #split the line by "," and then apply strip()

    f3.write("{0:25}{1}\m".format("Student_Name","Student_Id"))

    for name,i in zip(names,ids):          #use zip() to fetch data from both lists
        f3.write("{0:25}|{1}\n".format(name,i)) #use write() instead of print to write it to a file 
```

**输出：**

```
Student_Name             Student_Id
Timmy Wong               |B5216
Johnny Willis            |B5217
Jason Prince             |B5218 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:37:57.937

未经测试，但你想要类似的东西：

```
import csv
with open('names.txt') as nf, open('studentid.txt') as sf, open('output.txt','wb') as pf:
    csvnf = csv.reader(nf)
    csvsf = csv.reader(sf)
    csvpf = csv.writer(pf, delimiter='|')
    for name_student in zip(csvnf, csvsf):
        pf.writerow( name_student ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:40:07.447

```
names       = [n.strip() for n in open("names.txt").read().split(",")]
student_ids = [i.strip() for i in open("studentid.txt").read().split(",")]

outfile = open("studentlist.txt", 'w')
outfile.write("Student_Name\tStudent_ID\n")

for current_name, current_id in zip(names, student_ids):
    outfile.write(current_name + "\t|" + current_id + "\n")

outfile.close() 
```

# git - cgit 是否单独运行其编译的版本？

> ID：12281479
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:05.337
> 
> 标签：git, installation, cgit

cgit文档表明 cgit 也将 git 编译到自身中[。](http://hjemli.net/git/cgit/tree/README)

你的整个服务器都在使用那个 git 版本，还是 cgit 在内部使用它只是为了解析 git 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:05:28.380

git版本静态编译成cgit，独立于服务器。事实上，cgit 可以在没有安装 git 的情况下运行（它不执行外部程序）。

例如，考虑[Arch Linux 中的 cgit 包](https://www.archlinux.org/packages/community/x86_64/cgit/)，`git`它没有被标记为依赖项。构建过程会产生一个二进制文件。

# javascript - javascript 网格不显示在 IE 8 及更高版本中

> ID：12281483
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:12.100
> 
> 标签：javascript

我们使用 c#.net 开发了 Web 应用程序，并且 java 脚本网格在 IE 8 及更高版本中不显示这是用于生成表（网格）标题的 javascript 代码 tableid 是行数，Title 是网格标题名称

```
function GenerateTableHeader(TableId,Title)
     {

       if(document.getElementById(TableId).rows.length>0) //0-indicates No rows in table
       {
        return false;
       }
        var tblrow  = document.createElement("TR");
        tblrow.setAttribute("name","row1");
        tblrow.setAttribute("Id","row1");
        var TitleDesc=document.getElementById(Title).value;
        var TitleColumns=TitleDesc.split('|');
        for(i=0;i<TitleColumns.length;i++)
        {
        //Apply Style for table row heading
        var tblCell = document.createElement("<TD class=\"Gridheading\">"); 
        tblCell.innerHTML='<b>' + TitleColumns[i] + '</b>';
        tblCell.setAttribute ("align","center");
        //tblCell.setAttribute ("width","7%");
        tblrow.appendChild(tblCell);
        tblCell = null;
    }
        var tblItemBody=document.getElementById(TableId).getElementsByTagName("tbody")[0]
        tblItemBody.appendChild(tblrow);  
} 
```

在 IE 6 和 7 中显示网格。我需要在 IE 8 及更高版本中显示网格请帮助我.....提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:34:09.523

尝试这个

```
function GenerateTableHeader(TableId,Title)
 {

   if(document.getElementById(TableId).rows.length>0) //0-indicates No rows in table
   {
    return false;
   }
    var tblrow  = document.getElementById(TableId).insertRow(0);
    tblrow.setAttribute("name","row1");
    tblrow.setAttribute("Id","row1");

    var TitleDesc=document.getElementById(Title).value;
    var TitleColumns=TitleDesc.split('|');
    for(i=0;i<TitleColumns.length;i++)
    {

    var tblCell = tblrow.insertCell(0);
    tblCell.className='Gridheading';

    tblCell.innerHTML='<b>' + TitleColumns[i] + '</b>';
    tblCell.style.align="center";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:42:13.943

```
function GenerateTableHeader(TableId,Title)
     {

       if(document.getElementById(TableId).rows.length>0) //0-indicates No rows in table
       {
        return false;
       }
        var tblrow  = document.createElement("<TR></TR>");
        tblrow.setAttribute("name","row1");
        tblrow.setAttribute("Id","row1");
        var TitleDesc=document.getElementById(Title).value;
        var TitleColumns=TitleDesc.split('|');
        for(i=0;i<TitleColumns.length;i++)
        {
        //Apply Style for table row heading
        var tblCell = document.createElement("<TD class=\"Gridheading\"/>"); 
        tblCell.innerHTML='<b>' + TitleColumns[i] + '</b>';
        tblCell.setAttribute ("align","center");
        //tblCell.setAttribute ("width","7%");
        tblrow.appendChild(tblCell);
        tblCell = null;
    }
        var tblItemBody=document.getElementById(TableId).getElementsByTagName("tbody")[0]
        tblItemBody.appendChild(tblrow);  
} 
```

您可能应该在创建标签时关闭标签..

# java - 在java中使用PGP生成数字签名

> ID：12281484
> 
> 赞同：-3
> 
> 时间：2012-09-05T12:30:25.103
> 
> 标签：java, digital-signature, pgp

我正在开发一个使用 DSA、RSA 算法生成数字签名的工具。我还想生成数字签名并使用 PGP 算法进行验证。我用谷歌搜索并找到了一些资源，例如

[http://www.javacodegeeks.com/2011/06/java-pretty-good-privacy-pgp.html](http://www.javacodegeeks.com/2011/06/java-pretty-good-privacy-pgp.html)

[http://sloanseaman.com/wordpress/2011/08/11/pgp-encryptiondecryption-in-java/](http://sloanseaman.com/wordpress/2011/08/11/pgp-encryptiondecryption-in-java/)

有人知道在java中实现PGP的好例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:24:17.083

签名不是“生成的”。它们是使用非对称私钥（DSA、RSA）制作的。基本上，您需要一个 Java 类，它可以让您生成密钥（除非您已经拥有一个）并使用该密钥进行签名。您的选择是[BouncyCastle](http://www.bouncycastle.org/)和我们的[SecureBlackbox](http://www.eldos.com/sbb/java-pgp.php)。BouncyCastle 是开源的，而 SecureBlackbox 提供支持、文档和示例。

# ios - ios - 发布构建配置 - 应用程序协同设计验证失败 (-19011)

> ID：12281485
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:27.997
> 
> 标签：ios, xcode, release, app-store-connect

在 Xcode 中，我编辑了 iOS 设备的方案，并将构建配置更改为发布（在运行应用程序下）。

现在，当我连接我的 iPhone 并尝试**直接**在我的 iPhone 上按运行 Xcode 项目时，我收到以下错误：

```
(null):  Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) 
```

注意 - 当我将构建配置更改回调试模式时，它似乎可以在设备上运行。

我想在提交到应用商店之前以发布模式测试应用。

**混乱**

我不确定我尝试的方式是否正确，或者我是否应该使用存档在发布模式下对其进行测试。

**问题：**

1.  我应该怎么做才能解决这个错误？
2.  是否可以从 Xcode 在设备上以发布模式运行应用程序？
3.  对于发布模式测试，我应该使用存档（.ipa）并同步它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:18:27.817

当应用程序使用应用商店配置文件构建时，您无法在设备上调试或运行应用程序。权利不允许通过该值进行调试`get-task-allow`，并且配置文件不包括任何允许的设备 ID。

如果您使用标准 Xcode“存档”命令存档您的应用程序，您可以使用您的开发人员身份和配置文件重新签署存档，以便在设备上进行测试。在管理器中选择存档并选择“分发”。选择第二个选项并选择您的开发者身份/资料：

![在此处输入图像描述](../Images/fb5f8e487670853385e334d51ae653d2.png)

然后，生成的 IPA 应在设备上运行以进行测试。当您要提交到商店时，您可以选择相同的存档进行提交。

如果您不使用 Xcode 的存档功能（例如在命令行上构建），您将需要自己退出应用商店 IPA 以进行测试（在命令行上很困难但可能），或者只是构建应用商店和测试版本同时来自相同的代码库。然后，您可以相当确定这两个 IPA 是基于相同版本的源代码。

# macos - coreaudio：如何获取/设置系统警报音量而不是设备音量

> ID：12281486
> 
> 赞同：6
> 
> 时间：2012-09-05T12:30:27.440
> 
> 标签：macos, cocoa, core-audio

几天来，我一直在搜索文档、邮件列表，但似乎找不到答案。

我有一个 OS X 应用程序，除其他外，它使用 kAudioDevicePropertyVolumeScalar 和朋友查询可用的硬件设备及其当前音量。

我想要做的是获取并设置由 kAudioHardwarePropertyDefaultSystemOutputDevice 表示的系统输出设备的 -alert-volume (?) 而不是该设备音量。

从我有限的理解中澄清一下，这是用户可以在“播放音效”下的“系统偏好设置”中调整的音量设置。

搜索 coreaudio-api 列表，我设法收集到这个音量设置不是设备属性，而是某种派生值，但我不知道从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:45:48.203

我不确定您是否*真的*需要通过 CoreAudio 阅读它，但以下工作正常：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults addSuiteNamed:@"com.apple.systemsound"];        
NSLog(@"%f", [defaults floatForKey:@"com.apple.sound.beep.volume"]); 
```

虽然这可能会随着操作系统更新而改变，因为设置存储在`~/Library/Preferences/com.apple.systemsound.plist`.

# android - 通过 USB 获取 Android 信息

> ID：12281491
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:32.763
> 
> 标签：android, usb

我将创建一个需要我通过 USB 获取数据的应用程序。这些数据基本上是一个简单的字符串。我插入的接口将是一个带有微型 USB 接口的数字千分尺。我想知道这是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:37:00.303

有可能的。我以前没有做过，但这里有一些指南：

[`USB Host and Accessory`](http://developer.android.com/guide/topics/connectivity/usb/index.html)

# entity-framework - 实体框架自动迁移多上下文

> ID：12281492
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:35.360
> 
> 标签：entity-framework

我有两个数据库。当我对我的一个 dbcontext 进行更改（添加一个新的 DbSet）时，它应该在运行我的 web 应用程序时自动将更改应用到正确的数据库。所以应该添加新表。因此我添加了两个配置类。每个数据库/上下文一个。

但是，使用下面这样的初始化程序，更改总是应用于第二个上下文/数据库。因为这是配置的最新初始化程序。

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<DomainReadModelContext, DomainConfiguration>());
Database.SetInitializer(new MigrateDatabaseToLatestVersion<WebsiteReadModelContext, WebsiteConfiguration>()); 
```

我也在 web.config 中尝试过

```
<contexts>
  <context type="Domain.ReadModels.DomainReadModelContext, Domain.ReadModels">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[Domain.ReadModels.DomainReadModelContext, Domain.ReadModels], [Website.Migrations.Domain.DomainConfiguration, Website-WebAppMainModule, Version=1.0.0.0, Culture=neutral]], EntityFramework" />
  </context>
  <context type="Website.ReadModels.WebsiteReadModelContext, Website.ReadModels">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[Website.ReadModels.WebsiteReadModelContext, Website.ReadModels], [Website.Migrations.Website.WebsiteConfiguration, Website-WebAppMainModule, Version=1.0.0.0, Culture=neutral]], EntityFramework" />
  </context>
</contexts 
```

通过包管理器应用更改时，它可以正常工作。该表被添加到我的域上下文数据库中。

```
Update-Database -config DomainConfiguration 
```

这是因为不支持还是我做错了？现在它似乎只适用于注册的最新初始化程序。

对于更新，我使用包管理器中的 Add-Migration 命令构建了迁移。

```
Add-Migration AddUniquePersonReadModelMigration -config DomainConfiguration 
```

这为我生成了以下课程。

```
public partial class AddUniquePersonReadModelMigration : DbMigration
{
    public override void Up()
    {
        CreateTable(
            "UniquePersonReadModels",
            c => new
                {
                    Id = c.Guid(nullable: false, identity: true),
                    PersonId = c.Guid(nullable: false),
                    DisplayName = c.String(maxLength: 128),
                })
            .PrimaryKey(t => t.Id)
            .Index(p => p.PersonId)
            .Index(p => p.DisplayName, true);
    }

    public override void Down()
    {
        DropIndex("UniquePersonReadModels", new[] { "PersonId" });
        DropIndex("UniquePersonReadModels", new[] { "DisplayName" });
        DropTable("UniquePersonReadModels");
    }
} 
```

所以我的问题是实体框架是否支持使用初始化器的多个上下文的迁移？如果没有，当迁移可以处理多个上下文时，这将是一个很好的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:21:22.350

我通过将 Migration 文件夹从我的网站移动到单独的程序集解决了这个问题。

因此，而不是以下内容：

```
Solution/
    DomainReadModels/
        DomainContext.cs
        Classes........
    WebsiteReadModels/
        WebsiteContext.cs
        Classes........
    Website/
        Migration/
            AddSomeTableToDomainMigration.cs
            AddSomeTableToWebsiteMigration.cs
            WebsiteReadModelsConfiguration.cs
            DomainReadModelsConfiguration.cs
        Websitefiles... 
```

我将解决方案更改为：

```
Solution/
    DomainReadModels/
        Migration/
            DomainReadModelsConfiguration.cs
            AddSomeTableToDomainMigration.cs
        DomainContext.cs
        Classes........
    WebsiteReadModels/
        Migration/
            AddSomeTableToWebsiteMigration.cs
            WebsiteReadModelsConfiguration.cs
        WebsiteContext.cs
        Classes........
    Website/
        Websitefiles... 
```

现在唯一的缺点是我必须在包管理器控制台中切换项目......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:10:52.047

如果我正确理解了您的问题，那么您正在使用两个上下文`DomainReadModelContext`，`WebsiteReadModelContext`并且每个上下文都使用不同的数据库。如果是这种情况，那么您当然可以为每个上下文都有一个初始化程序，并且它将在第一次针对给定数据库使用该上下文时运行。换句话说，初始化器 for`DomainReadModelContext` 将在第一次`DomainReadModelContext`用于域模型数据库时运行，而初始化器 for`WebsiteReadModelContext`将在第一次`WebsiteReadModelContext`用于域模型数据库时运行。

如果两个上下文都使用同一个数据库，那么这将不起作用。EF5 不支持对访问同一数据库的多个上下文使用迁移，但我们正在为 EF6 开发它。

# image - 在浮动的图像（链接）下左对齐文本？

> ID：12281495
> 
> 赞同：0
> 
> 时间：2012-09-05T12:30:41.147
> 
> 标签：image, html

我有这个图片链接：

```
<p class="alignright">
    <a target="_blank" href="...">
        <img width="230" height="158" align="right" style="margin-right: 30px;  margin-top: 20px;" src="some_source" >
    </a>
    text should go here
</p> 
```

alignright 类如下所示：

```
.alignright {
    float: right;
    margin: 4px 0 1px 10px;
} 
```

现在我尝试了几件事来在上面的图片链接下方放置文本（例如，我尝试使用 <br> 和图片标题），但一切都失败了。文本要么在左侧太远，要么甚至不在图像链接下方。

任何想法如何获取图像链接下方的文本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:36:40.290

`<p class="alignright"></p>`标签放置后

```
<br style="clear: both;" />
some text here 
```

文字将出现在图像下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:49:45.290

您的意思是您希望文本与图像链接的**左边缘对齐？**

这意味着您必须将两个元素放入一个容器中并将 float:left 属性分配给这个容器：

我想这是我在您的示例中可以看到的“”。您确定 p 元素的宽度与图像链接的宽度相同吗？

否则文本将与页面上的任何位置的 p 边框对齐。

缩小 p-Element 的大小或将所有内容放入一个额外的容器中：

```
<div style="float:right; width:#IMAGE_LINK_WIDTH#; text-align:left;">
  <a href="">IMAGE_LINK</a>
  <!-- A <br /> might be placed here -->
  Text
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:38:46.040

**[现场样品](http://jsfiddle.net/vYRLZ/)**

只需添加 a`span`或 a `div`with`clear:both`属性，然后根据需要对齐文本。

**编辑：**

如果图像下方的文本是a，`link`那么只需将链接包装在`p`这样的标签内

```
<p><a href="#">Your Text</a></p> 
```

通过这样做，您将作为一个元素`link`出现在下一行。`p``block`

`Block`元素在它们放置的位置之前和之后强制换行。

**[看演示](http://jsfiddle.net/vYRLZ/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:55:15.007

这是html文件

```
<a href="#" target="_blank"><img src=""><span id="title" >your text</span></a> 
```

这是css文件

```
span#title {
text-align: center;
font-weight: bold;
}

span {
background: black;
bottom: 459px;
padding: 5px;
color: white;
opacity: 0.7;
position: absolute;
left: 8px;
width: 244px;
} 
```

以这种方式尝试

# linq - C# LINQ - 识别唯一索引违规

> ID：12281497
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:50.867
> 
> 标签：linq, sql-server-2008

我正在使用 Linq-to-SQL 访问 SQL Server 2008。在数据库中，我在某些列上有 UNIQUE 索引。

当我在该列中输入重复数据时，LINQ 将抛出带有错误消息的 SqlException。有没有办法确定异常与 UNIQUE 索引有关，而不是与其他 SQL 错误有关？

我知道的解决方案是让用户 RegEx 解析异常消息，但我想知道有没有更优雅的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:39:27.100

您可以使用该[`SQLException.Number`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)物业。

有关更多详细信息，您可以迭代[`Errors`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.errors.aspx)集合，每个集合都有自己的[`number`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlerror.number.aspx).

* * *

顺便说一句，过去我已经编写了自己的自定义序列化程序，`SqlException`但似乎在 4.5[`ToString()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.tostring.aspx)中已被覆盖，因此现在没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:57:50.870

您可以检查具有唯一约束的表，以确定它是否已经在受约束的列中有具有某些值的行：

```
 if (linqDataContext.ConstrainedTable.Any(row => row.ConstrainedColumn == somevalue))
            {
                //show a message, saying you've already got this value
                //and it is not applicable    
            }
            else
            {
                //accept your changes with smth like this:
                linqDataContext.SubmitChanges();
            } 
```

另一个问题，这种方法是否适用于你，即这个查询的成本是否超过了捕获异常并处理它的成本。如果受约束的列被索引，那么对该列的简单请求一定不会那么昂贵。

# .htaccess - 用 htaccess 重写不起作用

> ID：12281498
> 
> 赞同：1
> 
> 时间：2012-09-05T12:30:52.473
> 
> 标签：.htaccess, mod-rewrite

我有一个网站，只有 3 页的动态 url。为此，我不使用 php 函数。所以我决定去 .htaccess 重写规则，但我还没有运气。

这是我的实际网址：`/index.php?mode=service&inid=1`

我想将其重写为：`/home-theater`

我自己尝试一下，并使用以下代码：

```
RewriteEngine On 

RewriteCond %{HTTP_HOST} !^www\.mysite\.com.au$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com.au/$1 [L,R=301]

Options +FollowSymLinks
DirectoryIndex index.php

RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^index\.php$ http://www.mysite.com.au/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

Options +FollowSymLinks
RewriteEngine On
RewriteRule ^home-theater/?$ index.php?mode=service&inid=1 [L,NC,QSA] 
```

我仍然无法让它工作。

此外，我在此代码之前将 index.php 写入 www 重定向，所以我猜它是否会导致任何问题。index.php 到 www 站点的重定向工作完美，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:44:31.037

像这样使用`L`标志：

```
RewriteRule ^home-theater/?$ index.php?mode=service&inid=1 [L,NC,QSA] 
```

请记住，这不会更改浏览器中的 URL，因为这会在内部将请求转发到您的`index.php`.

此外，如果这不起作用，请在您的问题中提供完整的 .htaccess。

**更新**：我在此处修改了您的 .htaccess，请在清除浏览器缓存后立即尝试：

```
DirectoryIndex index.php

Options +FollowSymLinks -MultiViews
RewriteEngine On 
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.mysite\.com.au$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com.au/$1 [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^ http://www.mysite.com.au/ [R=301,L]

RewriteRule ^home-theater/?$ index.php?mode=service&inid=1 [L,NC,QSA]

RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ /index.php [L] 
```

# iphone - 无法访问任何其他类中的 MailCore 类

> ID：12281499
> 
> 赞同：1
> 
> 时间：2012-09-05T12:31:00.093
> 
> 标签：iphone, objective-c, ios, mailcore

我在我的应用程序中添加了 MailCore.xcodeproj，并像在 Remail 应用程序中设置的那样设置标题搜索路径、库搜索路径和框架搜索路径。但是，当我在导入任何其他类并创建如下对象后访问 MailCore 的类（如 CTCoreAccount、CTCoreFolder 等）时：

```
#import "CTCoreAccount.h"
CTCoreAccount* account = [[CTCoreAccount alloc] init]; 
```

我会收到以下错误：

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_CTCoreAccount”，引用自：ImapSync.o 中的 objc-class-ref ld：未找到架构 i386 的符号 collect2：ld 返回 1 个退出状态

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:44:56.930

我认为您的导入声明是错误的。

您应该使用相对标头 - 并且只使用框架的顶级标头：

```
#import <MailCore/MailCore.h> 
```

# payment-gateway - Authorize.net 自动定期计费如何计算月数？

> ID：12281504
> 
> 赞同：1
> 
> 时间：2012-09-05T12:31:19.817
> 
> 标签：payment-gateway, authorize.net, recurring-billing

我制作了使用的应用程序，`Authorize.net Automated Recurring Billing`但发现了一些歧义：

当我们添加`subscription`间隔一个月的交易时，它是如何工作的？

**示例 1**

它从 7 月 15 日开始，然后在 8 月 15 日、9 月 15 日等进行交易......好吧。

**示例 2**

它从 1 月 31 日开始……所以呢？

它一个月至少30天？我需要知道它到底是如何工作的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:40:05.640

如果您提交的订阅开始日期为 31 日，则下一次订阅付款将在每个月的最后一天进行。当您将间隔设置为月时，ARB 服务会尝试在每个月的同一天运行每笔付款。但是对于您的示例，由于该日期并不总是每个月都存在，因此它将在该月的最后一天运行。

# sql-server-2008-r2 - SQL Server 2008 R2 空间查询

> ID：12281506
> 
> 赞同：0
> 
> 时间：2012-09-05T12:31:24.600
> 
> 标签：sql-server-2008-r2, spatial

我对 SQL Server 的空间领域非常陌生，需要一些帮助。我有一个航点组织应用程序，我正在尝试生成一些查询，这些查询遵循查找属于地理多边形（如湖泊、河流等）的航点的前提。我已经用我下载的数据预加载了我的表。我使用 shape2sql.exe 将 shapefile 加载到适当的数据库表中。

表格如下：
Water table - id, name, geog(geography data type)
State table - id, state_name, state_abbr, geog(geography data type)
County table - id, name, state_name, geog(geography data type)
Waypoint table - id、name、lat、lon、waterid

我如何针对这些表编写查询以返回以下内容：
- 'michigan' 中的
所有航路点 - 'michigan' 的 'montcalm' 县的 'bass lake' 上的所有航路点（密歇根州和该国有多个 bass 湖，因此县/州部分）
- 通过“处理”一组航点并找到它们实际属于哪个湖来自动分配航点表的水 id 列
- 等等。

谢谢！

到目前为止学到的：
选择 geog.ToString() 作为 Points，geog.STArea() 作为 Area，geog.STLength() 作为 Length from water where name like '%bass lake%' and STATE = 'mi'

将返回 Bass Lake 的记录和带有该湖实际坐标的多边形。
POLYGON ((-87.670498549804691 46.304831340698243, -87.670543549804691 46.307117340698241, -87.676573549804687 46.313480340698241, -87.68120854980468 46.314821340698245, -87.685168549804686 46.315703340698242, -87.6877605498047 46.313390340698241, -87.685051549804683 46.308827340698244, -87.682360549804685 46.305650340698243, -87.677734549804683 46.304768340698246, -87.674440549804686 46.304336340698242, -87.670498549804691 46.304831340698243)) 1022083.96662664 4027.52433709888

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:41:27.793

从臀部射击，在这里，但可能是这样的：

```
UPDATE  waypoints
SET waypoints.WaterId = water.Id
FROM    dbo.Waypoints AS waypoints LEFT JOIN
    dbo.Water AS water ON geography::Point(waypoints.Lat, waypoints.Lon, 4326).STIntersects(water.geog) 
```

应将 wapoints 表上的 waterId 设置为水表中匹配的水 id 之一。

这应该可以为您提供 BASS LAKE 上的所有航路点

```
SELECT  waypoints.*
FROM    dbo.Waypoints as waypoints INNER JOIN
    dbo.Water AS water ON geography::Point(waypoints.Lat, waypoints.Lon, 4326).STIntersects(water.geog) = 1
WHERE   water.Name = 'BASS_LAKE' -- OR WHATEVER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:43:33.777

好的 - 边走边学，所以这里有一些我自己的问题的答案，供任何想知道的人使用。

这是一个用于在 where 子句中查找具有条件的各种航路点的查询：
SELECT * FROM WaypointTable wp
JOIN WaterTable w
ON wp.geogcolumn.STIntersects(w.geogcolumn) = 1
WHERE w.name LIKE '%bass lake%'
AND w.状态 = 'mi';

这是一个查询，用于根据它们“适合”的位置将水 id 分配给航点：
UPDATE WaypointTable wp
SET WaterID = (
SELECT ID
FROM WaterTable
WHERE geogcolumns.STIntersects(wp.geogcolumn) = 1
);

这两个查询都运行得非常好和快！爱它！

# shared-libraries - 你更喜欢如何拆分你的多部分程序？

> ID：12281507
> 
> 赞同：0
> 
> 时间：2012-09-05T12:31:26.960
> 
> 标签：shared-libraries, static-libraries, multi-project

拥有一个具有多个不同*部分*的程序是很常见的。我所说的*部分*是指具有自己的窗口和功能的图形部分。（关于非图形部分，我认为创建一个库是更好的解决方案）您更喜欢如何将它们分开？把它们都做成一个静态库并在主程序中使用它们会更好吗？或者更好的解决方案是为每个创建一个可执行文件并将它们加载到主程序中？甚至更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:38:07.787

我建议您阅读[Code Complete](http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670)或类似的东西。这本书和其他人深入探讨了最佳实践，甚至如何知道在创建产品时应该研究哪些最佳实践。

问题是范围之一。在回答这个问题之前，您需要了解您的规格和连接在一起的部分，以及您将使用哪些设计实践。

我也倾向于认为没有正确或错误的答案（取决于您的错误程度），并且没有其他人可以为您回答这个问题，特别是因为您可能是维护该问题的主要参与者之一代码。

希望能给你一些思考的食物:-)

# xml - xml 命名空间中的 uri 规范

> ID：12281512
> 
> 赞同：2
> 
> 时间：2012-09-05T12:31:52.660
> 
> 标签：xml

我正在浏览[http://www.w3schools.com/xml/xml_namespaces.asp上的一个示例](http://www.w3schools.com/xml/xml_namespaces.asp)

有一个使用以下 xml 的示例：

```
<root xmlns:h="http://www.w3.org/TR/html4/"
xmlns:f="http://www.w3schools.com/furniture">

<f:table>
  <f:name>African Coffee Table</f:name>
  <f:width>80</f:width>
  <f:length>120</f:length>
</f:table>

</root> 
```

但是，当我尝试访问 URL“http://www.w3schools.com/furniture”时，它显示了 404。那么，使用 URI 的意义是什么？xml 是否意味着在使用时访问互联网？还是供使用xml的人参考。而不是使用这样的 URI 名称，只给一个小 id 说“家具”是不是很容易。另外，假设我使用 URI，那么作为 xml 的所有者，我应该在该 URI 处提供什么信息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:34:47.410

> 那么，使用 URI 有什么意义呢？

它唯一地标识命名空间。

> xml 是否意味着在使用时访问互联网？

不

> 还是供使用xml的人参考。

不

> 而不是使用这样的 URI 名称，只给一个小 id 说“家具”是不是很容易。

这将使多个人更有可能独立创建一个名为“家具”的名称空间，该名称空间与所有其他人不兼容。

您可以`xmlns:furniture="http://example.com/..."`给它一个短名称，以便在文档中使用。

> 另外，假设我使用 URI，那么作为 xml 的所有者，我应该在该 URI 处提供什么信息？

通常会提供一些文档。可能以模式的形式。

# android - webview中的android网页

> ID：12281514
> 
> 赞同：0
> 
> 时间：2012-09-05T12:32:00.057
> 
> 标签：android, webview, offline

我想将网页存储在 android 项目文件夹中，以便用户不需要也不需要互联网连接来查看网页。我正在使用android webview。我可以看到带有 HTTP 协议的网页。我的代码如下：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        WebView webview = (WebView) findViewById(R.id.webView1);
       // webview.loadUrl("http://www.mysite.com/index.html");

        webview.getSettings().setJavaScriptEnabled(true);
    } 
```

但我想离线查看网页。有什么方法可以将网页作为资源存储在 android 项目文件夹中，即使没有互联网连接也可以查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:36:42.077

是的 ！

将它们放在`/assets`文件夹中并像这样访问它们：

```
webview.loadUrl("file:///android_asset/my_html_page.html"); 
```

这个问题已经得到解答：[Webview load html from assets directory](https://stackoverflow.com/questions/3152422/webview-load-html-from-assets-directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:43:46.877

将网页存储在您的资产文件夹中并使用

```
 public  File getfile(String filename) throws IOException {
    // TODO Auto-generated method stub
   String externalStorage_path          =Environment.getExternalStorageDirectory().toString();
   String state = Environment.getExternalStorageState();
   if (Environment.MEDIA_MOUNTED.equals(state)){
        File dir = new File(externalStorage_path + "/yourfilename");
        dir.mkdir();
        File mfile = new File(dir,filename);
        if( mfile.exists()==true)  return  mfile;
        else{
              try{
                  InputStream myInput =  mcontext.getAssets().open(filename);
                  String path =externalStorage_path+"/yourfilename";
                  OutputStream  myOutput = new FileOutputStream (path);
                  byte[] buffer = new byte[1024];
                  int length;
                  try {
                      while((length = myInput.read(buffer))>0)
                      myOutput.write(buffer,0,length);
                  }catch(FileNotFoundException e){Log.d("error",""+ e.toString());
                  }finally{
                      myOutput.flush();
                      myOutput.close();
                      myInput.close();
                  }
              }catch(IOException e){ }
              File dir1 = new File(externalStorage_path + "/yourfilename");
              dir1.mkdir();
              File mfile1 = new File(dir,filename);
              return mfile1;
        }
   }else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)){
       showToast("External storage has readonly access");
   } else if (Environment.MEDIA_REMOVED.equals(state)) {
       showToast("External storage not present");
   } else if (Environment.MEDIA_UNMOUNTABLE.equals(state)){
       showToast("External storage cannot be mounted. Sdcard problem");
   } 
```

这会将文件写入您的存储中，并且可以由其他应用程序（如 Adob​​e）共享以打开。只是调用了这个方法。

# ajax - 为什么 xhr-polling 比 websockets 快？

> ID：12281515
> 
> 赞同：2
> 
> 时间：2012-09-05T12:32:01.523
> 
> 标签：ajax, xmlhttprequest, websocket, benchmarking

我已经用**Node.js**和**Websockets**做了几个测试。

我认为即使我使用了**xhr-polling ，websocket 连接也比****XHR**快得多，但结果恰恰相反。

 **我使用**benchmark.js**来检查。

如果我将**Socket.io**的传输选项设置为**xhr-polling**，Firefox 和 Chrome 的运行速度比使用 websocket 多 300 次/秒。

但我不明白为什么。你能解释一下这个谜团吗？**

# ios - 寻找提供拖放功能的第三方 iOS 库

> ID：12281518
> 
> 赞同：3
> 
> 时间：2012-09-05T12:32:10.173
> 
> 标签：ios, drag-and-drop

我正在寻找提供以下功能的第三方 iOS 库：

*   网格或列表视图显示
*   使用拖放将项目/单元格从一个视图移动到另一个视图
*   如果目标视图中已经存在类似的项目/单元格，则忽略移动操作
*   允许用户通过使视图“可编辑”来删除项目/单元格
*   添加或删除项目/单元格时自动调整网格或列表

到目前为止，我已经评估了以下库，但这些库都没有完成上述所有操作：

*   [iOS DragAndDrop by brynbellomy](https://github.com/brynbellomy/iOS-DragAndDrop)
*   [RGDragAndDrop by frenetisch-applaudierend](https://github.com/frenetisch-applaudierend/RGDragAndDrop)
*   [gmoledina 的 GMGridView](https://github.com/gmoledina/GMGridView)
*   [Hegaka 的 HGKDragAndDropRecycleBin](https://github.com/Hegaka/HGKDragAndDropRecycleBin)
*   [HMLauncher 由 heikomaass 查看](https://github.com/heikomaass/HMLauncherView)
*   [JDDroppableView by jaydee3](https://github.com/jaydee3/JDDroppableView)
*   [iPad-UITableView-DnD-Demo by josh2112](https://github.com/josh2112/iPad-UITableView-DnD-Demo)
*   [TKDragView 由 mapedd](https://github.com/mapedd/TKDragView)

HLMLauncherView 相当不错，但它没有为我提供以下功能：

*   添加或删除项目/单元格时自动调整网格或列表
*   如果目标视图中已经存在类似的项目/单元格，则忽略移动操作

还有其他建议吗？

# haskell - 真正无序的折叠包

> ID：12281520
> 
> 赞同：6
> 
> 时间：2012-09-05T12:32:23.630
> 
> 标签：haskell, types, bag, commutativity

我想要一个能对客户隐藏其“真实”订单的 Bag 容器。

它还必须是完全多态的，即不需要对其元素类型进行任何约束。

我发现了至少三个包的实现：`Bag`module from `ghc`package、`Data.Bag`from`bag`和`Math.Combinatorics.Multiset`from `multiset-comb`。

但是，它们都具有暴露内部元素顺序`toList`的`fold*`操作，这可能取决于实现细节或包构造的顺序。

`toList`是不可能的，至少对于 type `Bag a -> [a]`。然而，折叠并不总是暴露顺序。

例如，`fold (+) 0`不暴露。

问题是，我应该如何设计折叠界面？`a -> a -> a`折叠功能的安全是否存在充要条件？由于`fmap`不暴露订单，折叠是否会失去通用性`a -> b -> b`？

我正在考虑可交换的幺半群——它们看起来就足够了，但我不确定关联性和身份元素是否是必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T13:17:09.580

如果您的包可以是空的，则可能需要一个身份 - 在这种情况下您必须返回一些东西，并且如果您希望您的折叠是同态（因此组合折叠一些包的结果与折叠由结合袋子，这是一个非常自然的属性），它必须是一个身份元素。

同样，关联性也是一个好主意。假设我有这样的类型和操作：

```
data T a = Zero | One a | Two (T a) (T a)
  deriving (Eq, Ord, Show)

(+-+) :: Ord a => T a -> T a -> T a
Zero +-+ x = x
x +-+ Zero = x
a +-+ b = Two (min a b) (max a b) 
```

显然`(+-+)`是可交换的并且具有同一性，但是是非关联的。假设我将一个包实现为一个列表：

```
newtype Bag a = Bag [a]

-- pre-condition: f is commutative and z is an identity for it
foldBag :: (a -> a -> a) -> a -> Bag a -> a
foldBag f z (Bag xs) = foldr f z xs

foldNonAssoc :: (Ord a) => Bag (T a) -> T a
foldNonAssoc = foldBag (+-+) Zero 
```

即使我要求规定的先决条件，我仍然可以使用 my`foldNonAssoc`来区分`Bag [One 1,One 2,One 3]`, 将折叠到`Two (One 1) (Two (One 2) (One 3))`和`Bag [One 3,One 2,One 1]`, 将折叠到`Two (One 3) (Two (One 1) (One 2))`（请注意，并非*所有*结构都被保留，但在长列表中我会得到整个列表除了最后两个元素的排序之外，重新排序）。

先验地，如果您将所有项目与操作结合起来，您将拥有一棵应用程序树，例如`a +-+ (b +-+ (c +-+ d))`. 交换性会让你做一些重排，但不管你做什么，`c`总是会和`d`. 因此，如果您希望它与 相同`(a +-+ c) +-+ (b +-+ d)`，那么您也确实需要关联性。

# javascript - 内联行编辑的 onSuccess 事件未触发

> ID：12281523
> 
> 赞同：1
> 
> 时间：2012-09-05T12:32:45.780
> 
> 标签：javascript, jquery, jqgrid

我正在使用带有内联行编辑的 jqGrid，我想让用户指示行更新是否成功。

问题是在行编辑更新后没有触发 onSuccess 事件，实际上没有触发任何操作事件。

注意：我只使用 JSON 服务器数据，没有本地数据。

有一个很好的 HTTP 发布到服务器。

这是我的代码：

```
 colNames:['Actions',...],
                    colModel:[
                        {name:'act',index:'act',width:55,align:'center',sortable:false,formatter:'actions',
                         formatoptions:{
                             keys: true,
                             onEdit:function(rowid) {
                             },
                             onSuccess:function(jqXHR) {
                                 alert('The update succeed!');
                             },
                             onError:function(rowid, jqXHR, textStatus) {
 alert('There was some problem, check the row!');
                             },
                             afterSave:function(rowid) {

                             },
                             afterRestore:function(rowid) {

                             }
                         }} 
```

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:29:49.760

最终，问题是我使用的旧 jqGrid 版本（3.8）。

使用 jqGrid 4.3.0 及更高版本使其正常工作，并确保您的 jQuery 版本是最新的。

亚尔

# sql-server - 如何防止其他应用程序连接到 SQL Server？

> ID：12281526
> 
> 赞同：4
> 
> 时间：2012-09-05T12:32:55.597
> 
> 标签：sql-server, sql-server-2012-express

我有一个 Delphi 应用程序通过 ADO 组件连接到远程 SQL Server。

如何**只**允许我的应用程序访问 SQL Server 2012，而任何其他尝试连接的应用程序都应该被丢弃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:14:22.373

问题是所有连接到 SQL Server 的东西都是通过 ConnectionString 来完成的。

如果你真的想要，你可以拦截那些，并用它们来伪装成另一个应用程序。

只要应用程序不能以一种方式或另一种方式使用数字签名进行连接，就无法强制执行您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:40:15.550

您应该使用[Logon 触发器](http://msdn.microsoft.com/en-us/library/bb326598.aspx)，并在此触发器中`APP_NAME()`与包含您的应用程序名称的常量进行比较。如果它们不同，则执行`ROLLBACK`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:48:52.607

您可以使用SQL Server 的[应用程序角色](http://beyondrelational.com/modules/2/blogs/88/posts/10182/working-with-application-role-sql-server.aspx)。

对我来说，用登录触发器锁定整个 SQL Server 是没有意义的。可能还有其他数据库，它也应该是免费的，例如 SQL 代理或 Management Studio 或更新程序......

如果您想控制对数据库的访问 - 使用用户和应用程序角色。按应用程序。角色你应该从你编译的代码中调用一个存储过程，并且你能做的所有事情都将由应用程序角色定义。如果您禁用其他角色和用户的访问权限，则没有人可以访问您的数据库......其他数据库也可以配置为不授予其他用户/角色权限。

它更有意义，连接字符串没有问题，并且可以灵活地用于其他任务。

对不起我的英语，它不是我的母语。

# php - 使用php自定义函数将值插入mysql

> ID：12281527
> 
> 赞同：0
> 
> 时间：2012-09-05T12:32:57.670
> 
> 标签：php

我想将值插入 MySQL 数据库，但值没有插入，我不知道出了什么问题。

这是我的代码：

```
<?php

include("inc/connection.php");

function RegisterStep1() {

        $txtuser = $_POST['txtName'];
        $txtsurname = $_POST['txtSurname'];
        $txtemail = $_POST['txtEmail'];
        $txtpass = $_POST['txtPassword'];
        $txtconfirmpass = $_POST['txtConfirmPass'];
        $txtcontactperson = $_POST['txtcompanycontactname'];
        $txtCompAddress = $_POST['txtCompAddress'];
        $txtRegNo = $_POST['txtRegNo'];
        $txtuserpos = $_POST['txtuserpos'];
        $txtdepartment = $_POST['txtdepartment'];
        $txtcontacts = $_POST['txtcontacts'];
        /* check if values are posted */

        $txtuser = mysql_real_escape_string($_POST['txtName']);
        /* combo company type */
        $txtCompAddress = mysql_real_escape_string($_POST['txtCompAddress']);
        /* combo locations
         */
        $txtRegNo = mysql_real_escape_string($_POST['txtRegNo']);
        /* combo companysize */
        $txtcontactperson = mysql_real_escape_string($_POST['txtcompanycontactname']);
        $txtsurname = mysql_real_escape_string($_POST['txtSurname']);
        $txtuserpos = mysql_real_escape_string($_POST['txtuserpos']);

        $txtdepartment = mysql_real_escape_string($_POST['txtdepartment']);
        $txtcontacts = mysql_real_escape_string($_POST['txtcontacts']);
        $txtemail = mysql_real_escape_string($_POST['txtEmail']);
        $txtpass = mysql_real_escape_string($_POST['txtPassword']);
        $txtconfirmpass = mysql_real_escape_string($_POST['txtConfirmPass']);

        $q = "INSERT INTO company(Name,Type,Address,Location,RegisteredNumber,CompanySize,ContactPerson,Surname,Position,Department,Contacts,DateResgistered,AccountStatus,Email,Password)
      Values('" . $txtuser . "','" . $txtCompAddress . "','" . $txtRegNo . "','" . $txtcontactperson . "','" . $txtsurname . "','" . $txtuserpos . "','" . $txtRegNo . "','" . $txtdepartment . "','" . $txtcontacts . "','" . $txtemail . "','" . $txtpass . "')";

        $submitquery = mysql_query($q);
        if ($submitquery) {
            echo"<div id='results'>Error occured while creating account,please try again in few minutes</div>";
        } else {
            echo "<div id='results'>Thanks for signing up</div>";
        }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:01:52.403

一件有趣的事，请检查您的状况

```
$submitquery = mysql_query($q);
        if ($submitquery) {
            echo"<div id='results'>Error occured while creating account,please try again in few minutes</div>";
        } else {
            echo "<div id='results'>Thanks for signing up</div>";
        } 
```

它应该是

```
$submitquery = mysql_query($q);
            if (!$submitquery) {
                echo"<div id='results'>Error occured while creating account,please try again in few minutes</div>";
            } else {
                echo "<div id='results'>Thanks for signing up</div>";
            } 
```

我认为您的代码运行良好。:)

# design-patterns - 单页应用模式是否适用于中型应用？

> ID：12281529
> 
> 赞同：1
> 
> 时间：2012-09-05T12:33:00.087
> 
> 标签：design-patterns, asp.net-mvc-2, single-page-application

我遇到过 SPA 设计模式，并且怀疑这是否适用于小型完整应用程序，例如员工考勤系统或类似应用程序。这将至少有 5 个视图和几个要实现的控制器或操作。SPA 模式如何解决这个问题？请澄清我的疑问，因为我对这种模式很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:43:34.590

Sigeleton 模式将控制实例的数量，它将只有一个。如果单个实例足以完成您的工作，这在任何情况下都会有所帮助。例如。您永远不能将 Employee 实例创建为 sigeleton，它们通常是那些进行简单处理的类。

因此，无论您的业务应用程序的规模如何，只要单个实例 id 足以满足您的应用程序，您都可以使用它。常见的例子是控制器，但同样任何 MVC 框架都足以实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:39:34.027

SPA 是一种可能性，尽管它的目标实际上是通过不经常通过非常高周转率的网站使用服务器重定向来提高吞吐量。您将回发替换为 AJAX/JSON 调用。

从您所描述的内容来看，标准 MVC 模式可以满足您的需求。您仍然可以稍后将您的操作转换为使用 JSON。

# java - 集合上的 Java 可修改视图

> ID：12281533
> 
> 赞同：7
> 
> 时间：2012-09-05T12:33:14.303
> 
> 标签：java, data-structures, collections

我正在寻找解决以下问题：
从集合 A 开始，我想将该集合（比如集合 B）上的某种“视图”传递给某个方法。视图 B 不一定包含原始集合 A 的所有元素。如果在此方法中将对象添加到视图（集合 B）或从视图（集合 B）中删除，这些更改也应该反映在原始集合 A 上。

例如（伪代码）：

1.  启动情况：

    ```
    Collection A = {1, 2, 3};  
    View-on-collection B = {1, 2}; 
    ```

2.  方法调用：

    ```
    someMethod(B) {  
        B.add(4);  
        B.remove(2);  
    } 
    ```

3.  结束情况：

    ```
    Collection A = {1, 3, 4}; 
    ```

有谁知道这个问题的巧妙解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:45:31.983

一种方法是使用[`List.sublist()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)：

```
public static void main(String[] args) {
    List<Integer> aList = new ArrayList<Integer>(Arrays.asList(1,2,3));
    List<Integer> view = aList.subList(0, 2);

    view.add(new Integer(4));
    view.remove(new Integer(2));
    System.out.println("aList: " + aList);
    System.out.println("view : " + view);        
} 
```

另一种更通用的方法是通过 Guavas [`Collections2.filter()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#filter%28java.util.Collection,%20com.google.common.base.Predicate%29)，它允许您定义一个谓词来控制哪些对象应该在视图中：

```
public static void main(String[] args) {

    List<Integer> aList = new ArrayList<Integer>(Arrays.asList(1,2,3));
    @SuppressWarnings("unchecked")
    Collection<Integer> view = Collections2.filter(aList, new Predicate() {
        public boolean apply(Object arg0) {
            return ((Integer) arg0).intValue() % 3 != 0;
        }});
    view.add(new Integer(4));
    view.remove(new Integer(2));
    System.out.println("aList: " + aList);
    System.out.println("view : " + view);

} 
```

两个例子都打印

```
aList: [1, 4, 3]
view : [1, 4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:46:37.833

您可以扩展 AbstractList （或您正在使用的任何抽象类型的集合）

在这个抽象中，您可以在构造函数中获取源集合并持有对它的引用以及原始列表的视图的起点和终点

覆盖 add/remove/set 方法，以便这些操作也在源集合上执行。

IE

```
class ListView<T> extends AbstractList<T> {

   int start = 0;
   int end = 0;
   private Collection<T> original = null;

   public ListView(List<T> original, int start, int end) {
       this.original = original;
       this.start = start;
       this.end = end;
       super.addAll(0, original.subList(start, end));
   }

   // Any add/set/remove must also alter the original 
```

}

ListView 实际上应该是原始列表的[代理。](http://en.wikipedia.org/wiki/Proxy_pattern)

或者，通过更多的工作，您可以实现 Collection 或 List 接口，以便您以类似的方式直接处理原始列表

然后，您可以调用您的方法或传递 ListView，就像普通集合一样。

IE

```
public void doSomeWork(Collection<String> collection);

...

object.doSomeWork(new ListView<String>(original, 0, 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:37:00.897

Jacarta 集合框架具有这样的功能。但是这个框架不支持泛型。看看谷歌番石榴。我相信他们也应该支持这样的功能。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-05T12:36:43.700

你总是可以有两个不同的集合，一个集合 A 和一个集合 B。

然后，每当您向 中添加某些内容时`B`，您都会将其添加到 中`A`，并且每当从`B`您那里删除某些内容时，也会将其从 中删除`A`。

从`A`您那里删除时，将检查是否`B`包含要删除的对象，如果是，则将其删除。

但是，添加到 时`A`，您不会触摸`B`。

这可能比最佳解决方案的空间效率低，但它不会改变时间复杂度（除了可能从`A`. 中删除）

# jquery - 取一个 TD，并将其插入到父 TR 中的第二个 TD 之后

> ID：12281535
> 
> 赞同：0
> 
> 时间：2012-09-05T12:33:18.093
> 
> 标签：jquery, html-table, jquery-selectors

我有一张桌子。我想取每个 TR 中的**所有**第九个 TD，并将其放在同一个 TR 中的第一个原始 TD 之后。

此代码采用第九个 TD，并将其放在父 TR 之后。我想把它放在同一个 TR 中的第一个原始 TD 之后：

```
$('td:nth-child(9)').each( function(){
   $(this).prependTo($(this).parent());
}); 
```

我需要的是相当于：

```
.parent():first-child 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:42:54.573

尝试这个

```
$('td:nth-child(9)').each( function(){

            $(this).siblings('td').eq(0).after(this);
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:35:25.813

```
$('td:nth-child(9)').each( function(){
    $(this).siblings('td:first').after(this);
}); 
```

[**小提琴**](http://jsfiddle.net/6nyqE/2/)

# delphi - Delphi XE2：跳到 CHM 中的锚点？

> ID：12281543
> 
> 赞同：6
> 
> 时间：2012-09-05T12:33:37.927
> 
> 标签：delphi, anchor, delphi-xe2, chm, html-help

在 Delphi XE2 程序中，如何跳转到 CHM 帮助文件主题内的锚点？锚点具有以下格式（从显示 CHM 文件的 HTML HelpViewer 中的主题页面源中提取）：

```
<a name="my_anchor_id"></a> 
```

我尝试了以下方法：

```
Application.HelpJump('MyTopicName.htm#my_anchor_id'); 
```

不幸的是，这不起作用：它确实跳转到了这个主题，但只跳转到了主题的顶部，而不是跳转到页面的锚点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:01:31.103

跳转到 CHM 中的锚点
使用 Delphi2010 测试 - DelphiXE2 - Windows XP

如何使用 Delphi 跳转到 chm 文件（已编译的 HTML 帮助）中的**锚点**。

**是的，可以使用 HtmlHelp() 命令跳转到锚点。**
`<a name="my_anchor"></a>`

```
 HtmlHelp(0,hpPath+'::/Overview.htm#UsingtheMenus>main',HH_DISPLAY_TOPIC,DWORD(nil)); 
```

**中的链接：** Overview.htm

*   注意：这个链接**不需要**通过delphi程序跳转到
    锚点。（仅用于测试）。

概述.htm

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
[...]
<BODY bgColor=#f7f8e2>
<H1>Overview</H1>
<A HREF="Overview.htm#UsingtheMenus">Using the Menus</A>
[...] 
```

**中的锚：** Overview.htm

```
[...]
<A NAME="UsingtheMenus" </A>
<P><STRONG>Using the Menus and Toolbars</STRONG>
[...] 
```

**如果有人想试试。**

以下是更多信息和测试程序：

![在此处输入图像描述](../Images/669fb0e10d80111a171c23247cd6dcbc.png)

运行 Project1.exe 并选择**without ：**

![在此处输入图像描述](../Images/e6b2f4271b6ff38879489c449435feb3.png)

Unit1.pas/命令

```
procedure TForm1.Button2Click(Sender: TObject);
begin
    HtmlHelp(0,hpPath+'::/Overview.htm#UsingtheMenus>main',HH_DISPLAY_TOPIC,DWORD(nil));
end; 
```

*   点击按钮 `Overview.htm#UsingtheMenus`

结果：

帮助文件打开并`overview.htm`出现。它被**跳到了锚点。**

![在此处输入图像描述](../Images/608520e7bf0faea7ea77a3b24f2c6765.png)

* * *

下载源 Project1.exe D2010 和 XE2。
下载源码 sample.chm HtmlHelp 项目。

[**下载**](http://moskito-x.de/stack/stackdwl.html)

* * *

**现在让我们测试其他 2 个按钮**

```
procedure TForm1.HelpKeywordClick(Sender: TObject);
begin
  Application.HelpKeyword('UsingtheMenus');
end;

procedure TForm1.HelpContextClick(Sender: TObject);
begin
  Application.HelpContext(IDH_UsingtheMenus);
end; 
```

*   点击按钮`HelpKeyword('UsingtheMenus')`

结果：

帮助文件打开并`FirstTopic.htm`出现。文本`UsingtheMenus`被插入到搜索字段中。**没有跳到锚点！**

* * *

*   点击按钮`HelpContext(IDH_UsingtheMenus)')`

除了搜索框为空外，结果相同。

* * *

**最后 2 次点击在这里演示：**
HelpFile2\sample.chm 文件 中**没有可用的秘密 ID 或关键字**。

* * *

**现在我们更改帮助文件，以便**除`Overview.htm#UsingtheMenus`其他两种方法外都能成功。

*   关闭应用程序“Project.exe”
*   再次运行“Project.exe”。
*   确保`with`已选中。

现在我们使用文件夹 HelpFile\
中的“sample.chm”，并进行以下设置。

样本.h

`#define IDH_Creating_Projects_and_Topics 1005`
`#define IDH_Overview 1003`
`#define IDH_UsingtheMenus 1009`

示例.ali

`IDH_Overview=Overview.htm`
`IDH_welcom=FirstTopic.htm`
`IDH_UsingtheMenus=Overview.htm#UsingtheMenus`

样本.hcc

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
[...]
        <LI> <OBJECT type="text/sitemap">
            <param name="Name" value="Using the Menus">
            <param name="Local" value="Overview.htm#UsingtheMenus">
        </OBJECT>   
[...]
</HTML> 
```

样本.hhk

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
[...]
    <LI> <OBJECT type="text/sitemap">
        <param name="Name" value="Using the Menus">
        <param name="Name" value="Using the Menus">
        <param name="Local" value="Overview.htm#UsingtheMenus">
        </OBJECT>   
[...]
</HTML> 
```

如果我们编译“sample.chm”，我们会收到一条错误消息。

`HHC3015: Warning: An alias has been created to "Overview.htm#UsingtheMenus" but the file does not exist.`

这是正常的，因为文件“Overview.htm#UsingtheMenus”并不真正存在！

**让我们尝试一下**

不要忘记，在尝试以下各项后，“帮助窗口”会再次关闭。否则你无法追踪不同的状态。

*   点击按钮`HelpKeyword('UsingtheMenus')`

![在此处输入图像描述](../Images/f37d794e0367d2779104a76ae5255a2e.png)

结果：
帮助文件打开并`FirstTopic.htm`出现。文本`UsingtheMenus`被插入到搜索字段中。文本`UsingtheMenus`在列表框中被选中
如果单击`Show`
它被**跳转到锚点。**

* * *

*   点击按钮`HelpContext(IDH_UsingtheMenus)')`

结果：

帮助文件打开并`overview.htm`出现。它被**跳到了锚点。**

* * *

*   点击按钮 `Overview.htm#UsingtheMenus`

结果：

结果与上述相同。
帮助文件打开并`overview.htm`出现。它被**跳到了锚点。**

* * *

**现在我们可以使用三种方法之一来跳转到所需的标记。**

* * *

如果有人对其他按钮的功能感兴趣，请继续阅读并获取更多信息。

明天继续。

# cakephp - CakePHP 如何在自定义验证功能中使用内置验证规则？

> ID：12281544
> 
> 赞同：2
> 
> 时间：2012-09-05T12:33:39.347
> 
> 标签：cakephp, cakephp-1.3

我有一个应该接受整数值的字段，它与另一个字段的总和应该是 100。为了做到这一点，我编写了这样的自定义方法。

```
'share' => array(
    'share' => array(
        'rule' => array('share'),
        'message' => 'This field is required.',
        'last' => true, 
    ), 
```

在这里，我想使用内置的验证方法来检查天气这个字段是数字的。

```
function share() {
        if( $this->data['Model']['commission_type'] == "usage_based" ) {
            // if($this->data['SmeCommission']['share']) { // Want to check this is a valid integer How can I built in Numeric validation here
                // Next validation to sum is equal to 100 with another field in the data.
            // }
        } else { 
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:09:00.413

对该字段使用多个规则。如下所示，第一个规则检查值是数字，然后是检查总和的自定义规则。

```
'share' => array(
    'numeric' => array(
        'rule' => 'numeric'
    ),
    'share' => array(
        'rule' => array('share'),
   )
), 
```

如果您确实想直接使用验证规则，您可以这样做：

```
Validation::numeric(array('key' => 'value')); 
```

# firefox - Mozilla Firefox 预取 rel="next"

> ID：12281548
> 
> 赞同：5
> 
> 时间：2012-09-05T12:33:47.640
> 
> 标签：firefox, prefetch

Firefox 似乎会预取在元标记中设置的任何内容，如下所示：

```
<link rel="next" href="http://domain.com/page/2"> 
```

更多信息可以在这里阅读：http: [//developer.mozilla.org/en-US/docs/Link_prefetching_FAQ](http://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ)

现在在我的网站上，当有多个页面用于评论之类的内容时，我一直在使用 rel="next" 和 rel="previous"，因为我认为这是很好的标记，可以用来帮助某些读者或搜索引擎机器人。

但是，我也一直在尝试跟踪用户阅读的最后一条评论是什么，但这并没有奏效（当您在一些简单的事情上花费数小时时的愚蠢时刻之一）。

基本上，例如，当用户阅读第 2 页（共 3 页）时，我会更新数据库以说明他们已阅读第 2 页，但未阅读第 3 页。但是，由于第 3 页被预取，该页面的代码运行并触发 SQL 更新即使用户从未真正阅读过第 3 页，该页面也是如此。

所以我真的有几个问题：

*   有没有办法在保持“下一个”和“上一个”标记的同时避免这种情况？还是只删除那些元标记更容易？
*   我应该知道并尝试处理任何其他形式的预取吗？
*   是否有一种特殊的方法可以判断某些内容是否只是预取，例如特殊的请求标头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T06:31:43.700

按顺序回答您的问题：

1.  有点。我认为，您可以`?something`在 URI 的末尾添加 a 以使它们不可预取。
2.  几乎可以确定。Chrome 也会做各种预取的东西，这个`?something`技巧可能在那里行不通。
3.  是的。请参阅您链接到的常见问题解答中的[https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ#As_a_server_admin.2C_can_I_distinguish_prefetch_requests_from_normal_requests.3F 。](https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ#As_a_server_admin.2C_can_I_distinguish_prefetch_requests_from_normal_requests.3F)

# android - 在 android 上将 GPS 坐标转换为 EPSG:54004

> ID：12281549
> 
> 赞同：0
> 
> 时间：2012-09-05T12:33:47.417
> 
> 标签：android, gps, gis, projection

我需要在 android 上将 GPS 坐标转换为 EPSG:54004。是否有任何库或公式来完成任务？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T16:21:18.717

在 Android 上，proj4j（“for java”）是一个不错的选择。显示 Proj4J 的示例 Android 应用程序在这里：[https ://github.com/devork/android-hello-proj4](https://github.com/devork/android-hello-proj4)

在 Android 上编译 proj4j 时报告了一些错误，所以也许这个 java 投影库值得一试：[http ://www.jhlabs.com/java/maps/proj/](http://www.jhlabs.com/java/maps/proj/)

# c++ - 如何测试项目中的所有标头是否都包含在 CMake 中？

> ID：12281550
> 
> 赞同：4
> 
> 时间：2012-09-05T12:33:54.380
> 
> 标签：c++, build, cmake

我想自动测试项目中的所有头文件是否都可以自己构建。这是检查标头是否包含所有依赖项的常用技术。不幸的是，我找不到如何实现这一点。也许有人可以帮忙？作为 CMake 新手，我不确定我是否可以自己设计解决方案。

希望解决方案不需要生成任何新`.cc`文件或运行任何外部脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:45:45.120

查看标准 CMake 模块函数[CheckCXXSourceCompiles](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#module%3aCheckCXXSourceCompiles)和[CheckCSourceCompiles](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#module%3aCheckCSourceCompiles)。这两个函数都检查给定的（内联）源代码是否正确编译和链接。要测试一个头文件是否是自包含的，源代码需要包含一个包含要测试的头文件的 include 语句和一个 main 函数：

```
include (CheckCXXSourceCompiles)

set (CMAKE_REQUIRED_INCLUDES "${CMAKE_CURRENT_SOURCE_DIR}")   
check_cxx_source_compiles(
"#include \"file.h\"
int main() { return 0;}" File_H_IsSelfContained)
message ("File_H_IsSelfContained: ${File_H_IsSelfContained}") 
```

两者`check_cxx_source_compiles`都`check_c_source_compiles`只能在 CMake 配置时运行，这可能不是您想要的。

由于这两个函数都使用了不可编写脚本的底层 CMake 命令`try_compile`，因此无法在生成的 CMake 脚本中使用这些函数，该脚本在构建时作为自定义目标运行。

# android - 如何将相对布局放置在主布局底部的相对布局之上，该布局是自定义列表视图？

> ID：12281552
> 
> 赞同：0
> 
> 时间：2012-09-05T12:34:07.357
> 
> 标签：android, android-layout, android-listview, android-relativelayout

我有一个主布局，底部有一个相对布局。当我尝试在此相对布局（id：relativelayout）上方放置相对布局（id：rl）时，它不会显示。但是当我在底部添加边距时，它会出现在列表视图中每个项目的顶部。这是我的xml。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ImageView>

<TextView
    android:id="@+id/amount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="16dp"
    android:layout_marginTop="16dp"
    android:background="#669900"
    android:padding="5dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/rl"
   android:layout_above="@+id/relativelayout"
    android:layout_marginBottom="2dp" >

    <TextView
        android:id="@+id/pass_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="16dp"
        android:background="#669900"
        android:padding="5dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/discount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp"
        android:background="#FF8800"
        android:padding="5dp" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"

            android:layout_alignParentBottom="true"
    android:background="#0099CC" >     <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="16dp"
        android:layout_marginTop="4dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/locality"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp"
        android:layout_marginTop="12dp"
        android:textColor="#FFFFFF" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:40:08.720

请提供屏幕截图或粗略图片，以便我了解您实际想要显示的内容.....您也可以尝试将重力赋予第一个相对布局`PARENT_BOTTOM`，然后将另一个相对布局赋予参数`LAYOUT_ABOVE= "ID OF THE FIRST LAYOUT"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:00:46.660

将您的布​​局更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ImageView>

    <TextView
        android:id="@+id/amount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp"
        android:layout_marginTop="16dp"
        android:background="#669900"
        android:padding="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <RelativeLayout
        android:id="@+id/relativelayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#0099CC" >

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="16dp"
            android:layout_marginTop="4dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#FFFFFF"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/locality"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="16dp"
            android:layout_marginTop="12dp"
            android:textColor="#FFFFFF" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/relativelayout"
        android:layout_marginBottom="2dp" >

        <TextView
            android:id="@+id/pass_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="16dp"
            android:background="#669900"
            android:padding="5dp"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/discount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="16dp"
            android:background="#FF8800"
            android:padding="5dp" />
    </RelativeLayout>

</RelativeLayout> 
```

这就是你想要的？

![在此处输入图像描述](../Images/3074ce8eb35e9e17a126a37b099dc957.png)

# php - 在 PHP_FUNCTION() C++ 中更改返回字符串的大小写

> ID：12281561
> 
> 赞同：0
> 
> 时间：2012-09-05T12:35:02.093
> 
> 标签：php, c++, php-extension

我想用 Visual Studio 2010 为 php 创建一个扩展，我是 C++ 的初学者。
我在 C++ 中的最后一个函数是：

```
PHP_FUNCTION(DoubleUp){
    char* text;
    int len;
    char string[255];
    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "z", &text) == FAILURE) {
        RETURN_STRING("Invalid Parameters",true);
    } 
      len = sprintf(string,"echo 'hello %.78s'", text);
      RETURN_STRINGL(string,len, 1);
} 
```

在 php 中我使用：

```
echo DoubleUp('sss'); 
```

但输出是：`echo 'hello Ð«õ'`
应该是：`echo 'hello sss'`
参数是一个很长的字符串。
现在我不知道该怎么办。谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:56:10.907

您的代码的问题是，如果您在“类型说明符”（的第三个参数）中指定，则`zend_parse_parameters`返回 a 。`zval``"z"``zend_parse_parameters`

要获取正确的字符串，您可以使用“s”直接获取字符串：

```
if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &text, &len) == FAILURE) { 
```

在这种情况下，您必须提供指向`char*`字符串的指针加上指向 an 的指针以`int`保存字符串长度。

第二种解决方案是`zval`正确使用并将字符串从`zval`:

```
zval* text;
int len;
char string[255]      
if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "z", &text) == FAILURE) { 
    /* ... */ 
}

// cast the value to string
convert_to_string(text);

// get the string value with the Z_STRVAL_P macro (Z_STRLEN_P for the length)
len = sprintf(string,"echo 'hello %.78s'", Z_STRVAL_P(text)); 
```

# php - 删除空格后奇怪的换行符

> ID：12281562
> 
> 赞同：0
> 
> 时间：2012-09-05T12:35:04.043
> 
> 标签：php, regex, curl

我正在使用 cURL 来获取网站的内容。我想从字符串中删除所有空格和换行符。这就是我正在做的事情：

```
// Getting the content
$curl_handle = curl_init();
curl_setopt($curl_handle, CURLOPT_URL, $url);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec($curl_handle);
curl_close($curl_handle);

// Removing html tags
$content = strip_tags($content);

// Removing whitespaces
$content = preg_replace('/\s+/', '', $content); 
```

当我回显内容时，仅在以下特殊字符后才会出现换行符：`=),.?}` 我尝试删除换行符，`str_replace(array("\r\n", "\r"), "\n", $content);`但它不起作用。有任何想法吗？

# javascript - 如何在灯箱中显示第一个而不是最后一个图像？

> ID：12281563
> 
> 赞同：-1
> 
> 时间：2012-09-05T12:35:10.520
> 
> 标签：javascript, lightbox

您好，我使用这样的灯箱：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="lightbox/js/lightbox.js"></script>
    <link href="lightbox/css/lightbox.css" rel="stylesheet" />
    <title></title>
    </head>

<body>

<a href='http://polishwords.com.pl/images/logo179x24.png' rel="lightbox[roadtrip]"><img src="http://polishwords.com.pl/images/logo179x24.png"  /></a>      
<a href='http://polishwords.com.pl/images/logo179x24.png' rel="lightbox[roadtrip]"><img src="http://polishwords.com.pl/images/logo179x24.png"  /></a>
<a href='http://polishwords.com.pl/images/logo179x24.png' rel="lightbox[roadtrip]"><img src="http://polishwords.com.pl/images/logo179x24.png"  /></a>

</body>

</html> 
```

现场演示： http: [//polishwords.com.pl/grono/fb_dragchallenge2/test.html](http://polishwords.com.pl/grono/fb_dragchallenge2/test.html)

当我单击任何图像时，它会显示图库，但图像 3/3 不是图像 1/3。如何显示第一张图片而不是最后一张？

我用这个： http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:42:33.590

尝试将它们放在这样的组中：

```
<a href="images/image-1.jpg" rel="lightbox[roadtrip]">image #1</a>
<a href="images/image-2.jpg" rel="lightbox[roadtrip]">image #2</a>
<a href="images/image-3.jpg" rel="lightbox[roadtrip]">image #3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T12:09:49.223

这是上面链接中最新版本的 Lightbox 中的一个错误。我换了其他软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T08:04:39.277

`Lightbox.prototype.start`函数(lightbox.js)中存在错误。将图片添加到相册后，变量`imageNumber`仍然包含最后一张图片的编号。

在函数调用之前更改`imageNumber`为：`0``this.changeImage`

```
imageNumber = 0; // insert this line before 
this.changeImage(imageNumber); 
```

# javascript - cmi.core.lesson_location 不返回我存储在其中的相同字符串？

> ID：12281568
> 
> 赞同：1
> 
> 时间：2012-09-05T12:35:29.213
> 
> 标签：javascript, string, scorm, scorm1.2

我目前正在围绕现有 LMS 开发一个包装器，以使其成为 SCORM 投诉。为此，我使用 cmi.core.lesson_location 来存储一些与课程相关的数据。我知道 cmi.core.lesson_location 只存储 255 个字符。但是当我将它设置为一个超过 200 个字符的字符串时，它会返回一个截断的字符串。

我无法确定任何人遇到过类似问题的任何模式？有时它会返回一个以 %3 或类似名称结尾的截断字符串。使用 cmi.core.lesson_location 时是否有任何编码问题？如果是这样，任何人都可以发布它们

谢谢施瓦鲁普_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:44:02.663

如果您的字符串包含非字母数字字符并且它在某个时刻被 URLEncoded，则每个非字母数字字符实际上变成 3 个字符并且您的字符串被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:05:57.440

您可以使用 cmi.suspend_data 代替 cmi.core.lession_location。cmi.suspend_data 可以存储更多数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:11:56.600

Cmi.suspend_data 应该存储 4096 字节。LMS 可以存储更多……或更少的字节。你应该测试一下。

# php - PHP/MySQLI 多重搜索 [2]

> ID：12281569
> 
> 赞同：-2
> 
> 时间：2012-09-05T12:35:34.780
> 
> 标签：php, search, mysqli

我正在处理一个处理多个输入表单的搜索表单。当只插入一个搜索条件时，如果工作正常。但是当使用两个时，它不会。我看到了这个缺陷，但我不知道如何解决它。我已经尝试过循环等，但问题仍然存在。

```
$sql = 'SELECT product_id, product_title FROM product WHERE ';
$where = array();
$values = array();
$types = '';

if (!empty($_GET['searchText'])) {
    $where[] = 'product_title = ?';
    $values[] = $_GET['searchText'];
    $types .= 's';
}
if (!empty($_GET['searchCategorySelect'])) {
    $where[] = 'product_categoryid = ?';
    $values[] = $_GET['searchCategorySelect'];
    $types .= 's';
}

$sql .= implode(' AND ',$where);
$search_stmt = $mysqli->prepare($sql);
$values = implode("", $values);
$search_stmt->bind_param($types, $values);
$search_stmt->execute();
$search_stmt->bind_result($product_id, $product_title);
etc... 
```

bind_param 必须获得适当数量的参数，因为当使用两个或多个搜索条件时会有多个参数。

提前致谢。

编辑：这是我得到的错误消息：“类型定义字符串中的元素数与..中的绑定变量数不匹配”

EDIT2：
echo $sql 结果（有两个标准）：
SELECT product_id, product_title FROM product WHERE product_title = ? AND product_categoryid = ?

echo $types 导致：
ss

这也是正确的，因此查询按预期工作。

问题是 $values 将是一个字符串，其中包含：
**[searchCondition1][SearchCondition2]**
例如：如果我在 Volvo 类别车辆中搜索，则 echo $values 将输出 Volvo2，其中 2 是 categoryId。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:14:19.600

```
$sql .= implode(' AND ',$where);
$search_stmt = $mysqli->prepare($sql);
if ( count($values) == 2 )
{
     $search_stmt->bind_param($types, $values[0], $values[1]);
}
else
{
     $search_stmt->bind_param($types, $values[0]);
}
$search_stmt->execute(); 
```

但这是硬编码的，它不是一个很好的解决方案。问题是，在您的示例中，您调用 bind_param 时使用`$types = 'ss';`and`$values`只是 1 个参数（不管它是否像`$values = 'one,two';`，它仍然是 1 个参数。

# azure - 通过代理后面的 http 发布到 Azure 服务总线

> ID：12281570
> 
> 赞同：3
> 
> 时间：2012-09-05T12:35:46.010
> 
> 标签：azure, servicebus

我使用 Azure ServiceBus API 发布到服务总线。sb 协议在防火墙后面不起作用。因此，我将 ServiceBusEnvironment.SystemConnectivity.Mode 设置为 ConnectivityMode.Http。只要我直接连接到互联网，它就可以工作。即使在配置了 http 代理之后，这在我的办公室也行不通。ServiceBus API 有问题吗？感谢您对此的帮助。

下面是我使用的一段代码......

```
 public static void Initialize()
    {
        // Using Http to be friendly with outbound firewalls
        ServiceBusEnvironment.SystemConnectivity.Mode =
            ConnectivityMode.Http;

        //InitializeQueue();
    }

    // The name of your queue
    public const string QueueName = "ordersqueue";

    public static NamespaceManager CreateNamespaceManager()
    {
        // Create the namespace manager which gives you access to
        // management operations
        var uri = ServiceBusEnvironment.CreateServiceUri(
            "sb", Namespace, String.Empty);
        var tP = TokenProvider.CreateSharedSecretTokenProvider(
            IssuerName, IssuerKey);
        return new NamespaceManager(uri, tP);
    }

    private static void InitializeQueue()
    {
        // Create the namespace manager which gives you access to 
        // management operations
        var namespaceManager = CreateNamespaceManager();

        // Create the queue if it does not exist already
        if (!namespaceManager.QueueExists(QueueName))
        {
            namespaceManager.CreateQueue(QueueName);
        }

        // Get a client to the queue
        var messagingFactory = MessagingFactory.Create(
            namespaceManager.Address,
            namespaceManager.Settings.TokenProvider);
        OrdersQueueClient = messagingFactory.CreateQueueClient(
            QueueName);
    } 
```

下面是我得到的堆栈跟踪...................................... ..................................................... ..

```
Microsoft.ServiceBus.Messaging.MessagingCommunicationException was unhandled
  Message=Unable to connect to ServiceBus using HTTP connectivity mode
  Source=Microsoft.ServiceBus
  IsTransient=true
  StackTrace:
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand(IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnEndSend(IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnSend(TrackingContext trackingContext, IEnumerable`1 messages, TimeSpan timeout)
       at Microsoft.ServiceBus.Messaging.MessageSender.Send(TrackingContext trackingContext, IEnumerable`1 messages, TimeSpan timeout)
       at Microsoft.ServiceBus.Messaging.MessageSender.Send(BrokeredMessage message)
       at Microsoft.ServiceBus.Messaging.QueueClient.Send(BrokeredMessage message)
       at AzureServiceBusPublisher.QueueConnector.send(String arg) in C:\Users\prasanh\Documents\Visual Studio 2010\Projects\AzureServiceBusPublisher\AzureServiceBusPublisher\QueueConnector.cs:line 72
       at AzureServiceBusPublisher.Program.sendMessagesToQueue() in C:\Users\prasanh\Documents\Visual Studio 2010\Projects\AzureServiceBusPublisher\AzureServiceBusPublisher\Program.cs:line 23
       at AzureServiceBusPublisher.Program.Main(String[] args) in C:\Users\prasanh\Documents\Visual Studio 2010\Projects\AzureServiceBusPublisher\AzureServiceBusPublisher\Program.cs:line 13
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.ServiceModel.CommunicationException
       Message=Unable to connect to ServiceBus using HTTP connectivity mode
       Source=Microsoft.ServiceBus
       StackTrace:
         Server stack trace: 
            at Microsoft.ServiceBus.WebStream..ctor(Uri factoryEndpointUri, String webSocketRole)
            at Microsoft.ServiceBus.WebSocketConnection..ctor(Uri factoryEndpointUri, String webSocketRole, Int32 asyncReadBufferSize)
            at Microsoft.ServiceBus.WebSocketOnewayConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
            at Microsoft.ServiceBus.WebSocketOnewayConnectionInitiator.BeginConnect(Uri uri, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.BufferedConnectionInitiator.BeginConnect(Uri uri, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.ConnectionPoolHelper.EstablishConnectionAsyncResult.OpenUsingNewConnection()
            at Microsoft.ServiceBus.Channels.ConnectionPoolHelper.EstablishConnectionAsyncResult.Begin()
            at Microsoft.ServiceBus.Channels.ConnectionPoolHelper.EstablishConnectionAsyncResult..ctor(ConnectionPoolHelper parent, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.ConnectionPoolHelper.BeginEstablishConnection(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.ClientFramingDuplexSessionChannel.OpenAsyncResult..ctor(ClientFramingDuplexSessionChannel duplexChannel, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.ClientFramingDuplexSessionChannel.OnBeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.CommunicationObject.OpenAsyncResult..ctor(CommunicationObject communicationObject, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.CommunicationObject.BeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.LayeredChannel`1.OnBeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.CommunicationObject.OpenAsyncResult..ctor(CommunicationObject communicationObject, TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Channels.CommunicationObject.BeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.OnBeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at System.ServiceModel.Channels.CommunicationObject.OpenAsyncResult.InvokeOpen()
            at System.ServiceModel.Channels.CommunicationObject.OpenAsyncResult..ctor(CommunicationObject communicationObject, TimeSpan timeout, AsyncCallback callback, Object state)
            at System.ServiceModel.Channels.CommunicationObject.BeginOpen(TimeSpan timeout, AsyncCallback callback, Object state)
            at Microsoft.ServiceBus.Messaging.Channels.SharedChannel`1.GetInstanceAsyncResult.<GetAsyncSteps>b__3(GetInstanceAsyncResult thisPtr, TimeSpan t, AsyncCallback c, Object s)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.EnumerateSteps(CurrentThreadType state)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.Start()
         Exception rethrown at [0]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.SharedChannel`1.OnEndCreateInstance(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.SingletonManager`1.EndGetInstance(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.<GetAsyncSteps>b__f(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.EnumerateSteps(CurrentThreadType state)
         Exception rethrown at [1]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.SbmpTransactionalAsyncResult`1.<GetAsyncSteps>b__44(TIteratorAsyncResult thisPtr, IAsyncResult a)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.EnumerateSteps(CurrentThreadType state)
         Exception rethrown at [2]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand(IAsyncResult result)
       InnerException: System.ServiceModel.CommunicationException
            Message=Unable to connect downstream
            Source=Microsoft.ServiceBus
            StackTrace:
                 at Microsoft.ServiceBus.WebStream.CreateDownStreamRequest(Uri endpointLocation)
                 at Microsoft.ServiceBus.WebStream.StartSession(Uri readEndpoint, Uri writeEndpoint)
                 at Microsoft.ServiceBus.WebStream..ctor(Uri factoryEndpointUri, String webSocketRole)
            InnerException: System.Net.WebException
                 Message=The remote server returned an error: (403) Forbidden.
                 Source=System
                 StackTrace:
                      at System.Net.HttpWebRequest.GetResponse()
                      at Microsoft.ServiceBus.WebStream.CreateDownStreamRequest(Uri endpointLocation)
                 InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:54:48.817

您得到的详细异常是什么？

根据我的经验，太多代理的默认配置不支持 HTTP 1.1。HTTP 1.1 是服务总线正常工作所必需的。

除此之外，我建议您查看本[指南以解决与服务总线的连接问题](http://social.technet.microsoft.com/wiki/contents/articles/troubleshooting-connectivity-issues-in-the-windows-azure-appfabric-service-bus.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T06:16:23.793

微软本周发布了新的服务总线 API。请参阅下面的链接 [http://msdn.microsoft.com/en-us/library/windowsazure/hh667331.aspx#New_SB](http://msdn.microsoft.com/en-us/library/windowsazure/hh667331.aspx#New_SB) 我已经在服务总线 1.8 中测试了这个问题。还是同样的错误。谁能指导我微软是否解决了这个问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T04:47:14.357

我是 Windows Azure 服务总线团队的 SDE。请尝试发布的指南。

另请注意，从 SDK 1.7 开始，服务总线消息传递仅适用于支持 POST 分块的 HTTP 1.1 代理。我们正在为此制定长期解决方案，即将推出的 SDK 1.8 允许服务总线中继通过使用 HTTPS 而不是 POST 分块来处理这些代理以及 HTTP 1.0 代理。

我们还知道，某些 Cisco 代理（可能还有其他代理）需要名称地址才能尝试任何 IP 地址连接。我们正在为此制定长期解决方案。

# solr - 如何处理 SolrNet 中过滤器中的特殊字符？

> ID：12281573
> 
> 赞同：1
> 
> 时间：2012-09-05T12:35:59.380
> 
> 标签：solr, solrnet

我正在研究 SolrNet 3.6，它用于基于 ASP.NET MVC3 和 C# 的电子商务网站。

有一个名为“cpu socket type”的过滤器，它的值是

1.  AM2+
2.  AM3+
3.  AM2

当您使用“AM2”过滤时，Solr 可以正常工作，但使用“AM2+”或“AM3+”过滤时它无法正常工作。同时我们也不能得到任何结果或错误。我知道这个问题与特殊字符有关，但不知道如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:01:16.500

根据[SolrNet Wiki Page on Querying](http://code.google.com/p/solrnet/wiki/Querying)，尝试使用以下`SolrQueryByField`方法：

> 它还具有为您处理特殊字符转义的好处。

`cpusockettype`因此，假设您的字段在您的 solr schema.xml 文件中命名，您的代码将与此类似。

```
ISolrOperations<Item> solr = ...
var items = solr.Query(new SolrQueryByField("cpusockettype", "AM2+")); 
```

# c# - 某个基类的泛型，也继承基类

> ID：12281585
> 
> 赞同：0
> 
> 时间：2012-09-05T12:36:38.100
> 
> 标签：c#, generics, inheritance, constraints, base-class

我正在尝试创建一个简单的 DataContainer 类，

```
public interface DataObject
{
    string Name { get; set; }
    uint ID { get; set; }
}

[Serializable()]
public class DataContainer<T> where T : DataObject
{
} 
```

...但是如果我希望 DataContainer 也继承 DataObject - 我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:38:39.567

有什么问题

```
[Serializable()]
public class DataContainer<T> : DataObject where T : DataObject
{
    public string Name
    {
        get { //implementation here }
        set { //implementation here }
    }

    public uint ID
    {
        get { //implementation here }
        set { //implementation here }
    }
} 
```

# c# - 无法使用 EndEditing 隐藏单点触控键盘（在 ScrollView 中）

> ID：12281586
> 
> 赞同：0
> 
> 时间：2012-09-05T12:36:39.620
> 
> 标签：c#, ipad, keyboard, xamarin.ios, hide

我看到了一些像我这样的问题，但它们完全不同。我制作了一个 ipad 应用程序，每次它工作时我都使用 EndEvent bevor end。但在最新的星座中它不会。

我有一个带有 ScrollView 的 ViewController。在 ScrollView 内部，我正在加载另一个视图。视图有一些文本字段。现在第一个问题是我的文本字段的触摸事件没有触发。好的，我通过调用 EditingDidBegin 来修复它并使用 view.EditingEnd(true) 隐藏键盘。EditingDidBegin 调用另一个 ViewController。

```
txtPosition.EditingDidBegin += delegate(object sender, EventArgs e) {
                                 View.EndEditing(true);
                                 selection = new SelectionViewController(lead, parent);
                                 parent.NavigationController.PushViewController(selection, true);
                                 selection.CreatePositionTable();
                               }; 
```

当我在键盘出现之前在视图中使用普通文本框时知道问题，并且当我点击上面描述的文本字段时，键盘不会消失。我试图在任何元素和任何位置上调用 EndEditing 方法，键盘在加载的新视图上仍然存在。甚至用户也无法通过单击自己的隐藏键盘按钮来隐藏键盘！感觉就像一个错误......我也尝试在类似我的问题中使用 resignFirstResponder 解决方案，但没有改变键盘无法隐藏。

我希望有人可以帮助我。

PS：当我在滚动视图之外使用其文本字段调用视图时，一切正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:03:12.687

要隐藏键盘，通常您使用：

`yourTextField.ResignFirstResponder()`

虽然，老实说，我对你想要做的事情有点困惑。为什么要隐藏键盘`EditingDidBegin`？

# java - java中的对象类在哪里使用？

> ID：12281588
> 
> 赞同：0
> 
> 时间：2012-09-05T12:36:40.010
> 
> 标签：java, object

我需要了解java中的对象类。这里有一些代码我想知道我们为什么使用它以及在哪里使用它

```
Object obj = arg0.getItemAtPosition(arg2);
String str = obj.toString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:39:17.397

所有`Object`的 " " 都继承自`Object`，所以基本上 Java 中的任何类也是 type`Object`的。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)

正因为如此，所有的类都隐含着一些方法：

* * *

```
Method Summary

protected  Object   clone() 

 boolean    equals(Object obj) 

protected  void finalize() 

 Class  getClass() 

 int    hashCode() 

 void   notify() 

 void   notifyAll() 

 String toString() 

 void   wait() 

 void   wait(long timeout) 

 void   wait(long timeout, int nanos) 
```

* * *

如有必要，您可以覆盖这些方法以提供您自己的功能。

例如，您可以重写该`toString`方法以返回`String`您认为总结了该类的特定实例的方法。然后，如果您将您的传递`Object`给类似的东西`System.out.println`，它将打印该`toString`方法返回的内容。

更多阅读：

[http://journals.ecs.soton.ac.uk/java/tutorial/java/javaOO/objectclass.html](http://journals.ecs.soton.ac.uk/java/tutorial/java/javaOO/objectclass.html)

这里有一些不错的继承教程：

[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

[http://docs.oracle.com/javase/tutorial/java/concepts/inheritance.html](http://docs.oracle.com/javase/tutorial/java/concepts/inheritance.html)

[http://www.cs.utexas.edu/~lavender/courses/tutorial/java-06.pdf](http://www.cs.utexas.edu/~lavender/courses/tutorial/java-06.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:48:26.913

为什么我们使用它，因为..

*   Java 选择使单个类成为所有事物的最终父类，以便有一种简单的方法可以传递任意对象，而无需知道其类型

    即，您可以使用声明的 Object 类型来引用类型系统中的每个项目，甚至是使用其包装类的基元。

*   Java 需要在所有存在的平台（无论是移动设备、Windows、Linux 等）上运行，并且编写大量代码以在每个平台上运行是一项任务。因此，Java 创建了本机。这样，所有对象都被注册为 JVM 可以理解和执行的本机对象。不要忘记 JVM 是用 C++ 编写的（不管它在什么平台上执行）。

*   对于垃圾回收，当不需要 Object 时，JVM 会调用 finalize 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:44:13.353

当变量的特定类未知时使用 Object 类。对象类是许多类（Integer、Sting、...等）的父类。在上面提到的情况下，`getItemAtPosition()`类返回一个`Object`实例，因为例如微调器可以有许多不同的类类型，所以它返回一个通用的（对象），然后你将它转换为字符串（或其他类，具体取决于情况）当目标类型在上下文中已知时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:38:16.343

`Object`是Java中所有类的超类。如果有可能返回多个类型，则将返回 Object（或）如果 API 设计为更通用，`Object`则将返回。

**如何使用返回的对象？**

根据上下文，您可能需要`toString()`像您所做的那样施放（或）做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T12:40:07.477

通常`Object`只应在处理不同或未知类型的元素集合时使用。然后通常紧随其后的是`instanceof`and cast 语句。许多 API`Object`在可以提供不同类型时返回，其中一些是 Java 4 和泛型之前的更早版本的保留。只要有可能，这应该用泛型代替。

**编辑**

结合基本规则，你永远不应该做以下事情：永远不应该在任何代码`Object ob = new Object();`中实例化。`Object`唯一`Ojbect`应该使用的时间是当类型不知道时。

泛型如何改变的一个例子是`Collections.max`. 在 java 4 中返回`Object`（[Java 4 Collections](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#max%28java.util.Collection%29)），在 java 6 中，这有一个返回泛型的版本`T`（[Java 6 Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#max%28java.util.Collection%29)）。

爪哇 4：`public static Object max(Collection coll)`

返回`Object`是因为`Collection`当时不是通用的

爪哇 6：`public static <T extends Object & Comparable<? super T>> T max(Collection<? extends T> coll)`

返回`T`是因为后 Java 5`Collection`是通用的。

重点是过去很多 API`Object`仅仅因为 Java 没有泛型而返回。现在，在大多数情况下，应该使用泛型，但并非所有 API 都已更新。展望未来，您应该尽可能尝试使用泛型而不是 Object。

# android - Android 调试器错误 (MonoDroid)

> ID：12281590
> 
> 赞同：13
> 
> 时间：2012-09-05T12:36:41.773
> 
> 标签：android, debugging, xamarin.android, xamarin

我正在使用 MonoDroid 在 Visual Studio 2010 中开发一个 Android 应用程序。我已经很远了，能够在模拟器和 Android 设备上运行和调试我的应用程序。出于某种原因，我的 Visual Studio 不再将应用程序正确调试到我的设备上。我（有时）得到的错误是：

* * *

## 微软视觉工作室

无法启动应用程序。确保应用程序已安装到目标设备并具有可启动的活动 (MainLauncher = true)。

## 此外，检查 Build->Configuration Manager 以确保将此项目设置为 Deploy 用于此配置。

## 好的

（上面的所有解决方案我都已经检查过了..）

其他时候根本没有错误，Visual Studio 只是停止运行或应用程序启动正常，但 Visual Studio 没有响应。

该错误最近才开始，而（几乎）应用程序没有任何变化。我希望有人之前遇到过这个错误，并且知道这是因为某些属性设置还是什么？

PS：我也相信它可能是由我的相机引起的，我在我的应用程序中使用它，当我的应用程序决定部署时（约 5 次中的 1 次）它在相机屏幕上崩溃，这是相机代码：

```
 private void CreateCamera(ISurfaceHolder holder)
    {
        try
        {
            if (holder != null)
            {
                camera = Android.Hardware.Camera.Open();
                Android.Hardware.Camera.Parameters p = camera.GetParameters();
                p.PictureFormat = ImageFormatType.Jpeg;
                camera.SetParameters(p);
                camera.SetDisplayOrientation(90);
                camera.SetPreviewCallback(this);
                camera.Lock();
                camera.SetPreviewDisplay(holder);
                camera.StartPreview();

                if (PackageManager.HasSystemFeature("android.hardware.camera.autofocus"))
                {
                    camera.AutoFocus(this);
                }
            }
        }
        catch (System.Exception e)
        {
            Android.Util.Log.Debug("SIMPLECAMERA", e.Message);
            System.Console.WriteLine(e.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T16:50:43.053

在 Visual Studio 2010 中：构建 -> 配置管理器 -> 选中“部署”框。

当我从调试配置更改为发布时，这发生在我身上。出于某种原因，“部署”框仍未选中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-25T11:11:34.907

对我来说，我一直勾选 Deploy 复选框，但**如果您针对模拟器的“任何 CPU”目标，我发现诀窍是明确针对 x86。**

我正在运行 32 位 PC，x86 平台设置位于配置管理器中：

![在此处输入图像描述](../Images/29c950dc954c7bbeb93ab8f1f20a30a5.png)

![在此处输入图像描述](../Images/800534bd37a9dd51a2e36609b1ce3f37.png)

![在此处输入图像描述](../Images/ab53230121032cfdefe4af1dc18e466b.png)

第一次运行应用程序需要几分钟（安装平台框架等）。

**编辑：**我刚刚找到了[官方文档](http://docs.xamarin.com/guides/android/deployment,_testing,_and_metrics/configuring_the_x86_emulator/)，一些基于 ARM 的架构和 x86 的问题是要走的路

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-20T02:24:00.560

**特定于安卓**

如果您尝试了上述所有解决方案仍然没有成功，请转到您的应用程序管理器并检查是否使用您的应用程序名称或服务名称安装了任何东西并卸载它们。

有时即使您卸载了应用程序，应用程序管理器中仍会显示 0KB 大小。

当我从发布模式更改为调试模式时，它发生在我身上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T00:09:55.140

我必须卸载应用程序、Mono Shared Runtime 和 Xamarin.Android API 才能正常工作。

# matlab - 网格数据双线性插值 MATLAB

> ID：12281592
> 
> 赞同：0
> 
> 时间：2012-09-05T12:36:46.000
> 
> 标签：matlab, interpolation, linear-interpolation

我有一个表格数据![在此处输入图像描述](../Images/2794111c086fa236f602603c828cc63c.png)

我喜欢在 MATLAB 中的数据（图像中的橙色突出显示）之间使用双线性插值。我不知道如何使用 interp1 或 interp2。

如果我假设蓝色行是 x，蓝色列是 y，并且之间的数据是 k(x,y)。所以我有三个向量，我将扩展向量 x 和稍后的向量 y，以插入数据。

你能帮帮我吗？

我将不胜感激任何帮助和评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:44:39.227

尝试[griddata](http://www.mathworks.com/help/matlab/ref/griddata.html)或 Delaulay 三角化方法，例如[TriScatteredInterp](http://www.mathworks.com/help/matlab/ref/triscatteredinterpclass.html)

# php - session_destroy(); 还在工作吗？

> ID：12281594
> 
> 赞同：0
> 
> 时间：2012-09-05T12:36:55.327
> 
> 标签：php, session, session-state, sessionid

所以我有一个注销按钮，它链接到一个名为 logout.php 的脚本，标准的东西。

此刻的 Logout.php 看起来像这样：

```
<?php
session_start();
$sid = session_id();
echo $sid;

session_destroy();
session_unset();

session_start();
session_regenerate_id(true);
$sid = session_id();
echo $sid;
?> 
```

这段代码来自在互联网上进行一些研究（和堆栈溢出）并在使用简单之后：

```
session_start();
session_destroy(); 
```

没用。

所以当前脚本产生了这个：

```
a920o3mmfhh7gldak4ki4nure5
Warning: session_destroy() [function.session-destroy]: Session object destruction failed in (File Path)p on line 7

Warning: session_regenerate_id() [function.session-regenerate-id]: Session object destruction failed in (File Path) on line 12
a920o3mmfhh7gldak4ki4nure5 
```

session_destroy 折旧了吗？因为我查看了手册，它并没有说它曾经是并且它通常是最新的。如果没有，谁能明白为什么它不能破坏我的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:55:25.573

使用它来注销：

```
session_start();
$_SESSION = array();

if (ini_get("session.use_cookies")) {
$params = session_get_cookie_params();
setcookie(session_name(), '', time() - 42000,
$params["path"], $params["domain"],
$params["secure"], $params["httponly"]
);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:32:31.390

```
if(isset($_SESSION)){
   unset($_SESSION);
 } 
```

# iphone - 在 ikal 日历中选择日期 在 tableview 中显示两个数据

> ID：12281598
> 
> 赞同：2
> 
> 时间：2012-09-05T12:37:03.193
> 
> 标签：iphone, ios, xcode

我在我的应用程序中实现了 ikal 或本机日历。它工作正常。我在其中添加了一些事件。添加

事件也可以正常工作，但是当我们单击日历中的事件时，其数据会显示在表格中

view.its 很好，但是当我们关闭我们的应用程序并再次选择该事件时，它现在显示两倍的数据

我们想要在表格视图中。当我们再次关闭并再次选择事件时，它会三次显示数据，依此类推。

请任何人都知道为什么数据不只在表格视图中一次显示的原因。

# php - 计算一列php的总和

> ID：12281600
> 
> 赞同：0
> 
> 时间：2012-09-05T12:37:11.280
> 
> 标签：php, mysql, sum

我有以下代码：

```
<td class="dataTableContent">
<?php
$cuttinglist_weight_query = tep_db_query("select op.orders_id, p.products_id, SUM(p.products_weight) as total_products_weight from " . TABLE_ORDERS_PRODUCTS . " op  left join " . TABLE_PRODUCTS . " p on (op.products_id = p.products_id) where orders_id = '" . (int)$cuttinglist['orders_id'] . "'");
$cuttinglist_weight = tep_db_fetch_array($cuttinglist_weight_query);

echo $cuttinglist_weight['total_products_weight'];

?>

</td> 
```

这将打印订单列的总重量：

![在此处输入图像描述](../Images/92b5fc2604803de152dab9bb8bec0703.png)

在下面标题为“要准备的总重量”的框中，我需要显示该栏的总重量，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:43:34.820

```
<td class="dataTableContent">

    <?php
    $cuttinglist_weight_query = tep_db_query("select op.orders_id, p.products_id, SUM(p.products_weight) as total_products_weight from " . TABLE_ORDERS_PRODUCTS . " op  left join " . TABLE_PRODUCTS . " p on (op.products_id = p.products_id) where orders_id = '" . (int)$cuttinglist['orders_id'] . "'");
    $cuttinglist_weight = tep_db_fetch_array($cuttinglist_weight_query);

    echo $cuttinglist_weight['total_products_weight'];

    if(!$totalSum){ $totalSum = 0; }
    $totalSum += $cuttinglist_weight['total_products_weight']
    ?>

</td> 
```

然后在你的单元格最后回显它：

```
<table>
    <tr>
        <td>Total Weight To Prepare</td>
    </tr>
    <tr>
        <td><?php echo $totalSum; ?></td>
    </tr>
</table> 
```

# python - Django 多输入表单

> ID：12281603
> 
> 赞同：0
> 
> 时间：2012-09-05T12:37:13.750
> 
> 标签：python, django, django-forms

我有一个看起来像这样的模板：

```
<form method="post" action="{% url ... %}">
{% csrf_token %}
<table class="table">
    {% for x in X %}
        <tr>
            <td>{{ x.name }}</td>
            <td><input type="checkbox" value="{{x.id}}"" /></td>
        </tr>
    {% endfor %}
</table>
</form> 
```

我应该在 django 表单类中为复选框使用什么类型的字段？

感谢您的回答

编辑：

我没有提到，X in loop 是在运行时给出的。它不是预定义值的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:03:54.987

您需要`CheckBoxMultipleSelect`为表单字段指定小部件。

例如

```
def MyForm(forms.Form):
    favorite_colors = forms.MultipleChoiceField(required=False,
        widget=CheckboxSelectMultiple, choices=FAVORITE_COLORS_CHOICES)
    ... 
```

参考：[小部件](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:05:56.967

例如

```
CUSTOMERTYPE = (
    (u'-', u'-'),
    (u'Single', u'Single Customer'),
    (u'Community', u'Community Change'),
)
CustomerType = forms.ChoiceField(choices=CUSTOMERTYPE) 
```

# sqlite - SQLite 删除不起作用

> ID：12281605
> 
> 赞同：0
> 
> 时间：2012-09-05T12:37:23.817
> 
> 标签：sqlite

我有一个名为 WPList 的 SQLite 表，它有 4 列

`ID (int), ID_quote (int foreign key), ID_workperformance (int foreign key), expire_date (text)`

当我尝试使用此查询消除一行时，我遇到了一个大问题：

`DELETE FROM WPList WHERE ID_workperformance = 12 & ID_quote = 21`

我绝对确定 ID_workperformance 12 和 ID_quote 21 存在于表中，但是当我执行此查询时没有任何反应。你能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:43:02.197

是`AND`，不是`&`。

```
DELETE FROM WPList WHERE ID_workperformance = 12 AND ID_quote = 21 
```

它似乎`&`是等效的，但有点难以使用，因为你需要在你的情况下添加括号

```
DELETE FROM WPList WHERE ((ID_workperformance = 12) & (ID_quote = 21)) 
```

如果没有 backet，您的语法的执行计划（请参阅[EXPLAIN](http://www.sqlite.org/lang_explain.html)）与

```
DELETE FROM WPList WHERE (ID_workperformance = 12 & ID_quote) = 21 
```

这解释了为什么它不能按预期工作。

# boost - 将对象传递给函数可以吗？

> ID：12281608
> 
> 赞同：0
> 
> 时间：2012-09-05T12:37:26.640
> 
> 标签：boost

问题是这样的：我尝试使用 class progress_display(boost/progress.hpp) 来计算和显示我的程序的进度。正确使用类：

```
1.Instantiation: progress_display pd(count);
2.for(  ;  ;  ){
       pd++;
    }
3.With the increment of 'pd', the progress is display in console in real-time. 
```

我的麻烦：做大部分计算的核心函数是一个迭代函数，我试图将对象'pd'传递给那个函数，这样当一个子迭代函数的执行完成时，对象'pd'将携带退出“++”操作。

```
#include<Windows.h>
#include<boost/progress.hpp>
using namespace std;
using namespace boost;

void functest(progress_display pdInput){
    pdInput++;
}
int _tmain(int argc, _TCHAR* argv[])
{
    vector<int> L;
    progress_display pd(100);
    functest(pd);
    return 0;
} 
```

但是，这里出现一个错误：错误 C2248:"boost::noncopyable_::noncopyable::noncopuable": 无法访问私有成员（在类中声明"boost::noncopyable_::noncopyalbe）。

我仍然不知道这个错误来自实例化对象的错误使用，这将发生在所有公共类中还是与导入的boost库有关？

感谢任何能给我更多有用信息的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:10:49.997

类`progress_display`不能被复制，所以不要将它作为参数传值。通过 [const] 引用或指针传递。

# php - php IMAP 连接失败

> ID：12281609
> 
> 赞同：1
> 
> 时间：2012-09-05T12:37:27.240
> 
> 标签：php, email, imap

我正在开发一个爬虫来从电子邮件中获取数据。我有 3 个电子邮件地址，我必须使用它。在我的本地机器上，具有给定凭据的所有 3 个连接都工作正常。但是当我上传到服务器时，其中 1 正在工作，其余 2 正在提供

```
Can not authenticate to IMAP server: [CLOSED] IMAP connection broken (authenticate) 
```

这 3 个收件箱位于共享主机上，我使用端口`143`读取数据。

在 ssh 我得到这个错误：

> 无法向 IMAP 服务器进行身份验证：[CLOSED] IMAP 连接断开（身份验证）PHP 注意：未知：登录失败后重试 CRAM-MD5 身份验证。(errflg=1) in Unknown on line 0 PHP Notice: Unknown: Can not authenticate to IMAP server: [CLOSED] IMAP connection broken (authenticate) (errflg=2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:41:02.300

这是邮箱类型的问题。那个打不开的邮箱不是 IMAP 类型的。所以它在使用 imap_open() 函数打开时会出现问题

# android - 在android中使用Web服务时无法切换屏幕页面

> ID：12281615
> 
> 赞同：0
> 
> 时间：2012-09-05T12:38:05.020
> 
> 标签：android, web-services

我正在尝试使用此 Web 服务： `http://54.251.60.177/TMSWebService/MarginService.asmx`在 android 中通过 SOAP 方法。

此 Web 服务的输入值为

```
fd : 01/01/2012
td : 07/07/2012 
```

但是我无法切换屏幕页面，谁能告诉我我在这里犯了什么错误？请告诉我解决方案..

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:41:50.823

听起来您正在尝试在 Activity 中使用 Web 服务，您应该尝试使用 Service，以便可以从 UI 中使用 Web 服务，然后 UI 可以从服务中的持久数据中读取它是准备好。这样，您还可以在加载和更新期间切换页面。

# iphone - 没有收到推送通知警报请求 iPhone

> ID：12281620
> 
> 赞同：5
> 
> 时间：2012-09-05T12:38:21.750
> 
> 标签：iphone, ios, push-notification

我对这个开发很陌生，所以请帮助我

我正在使用此代码开始推送通知

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

但是，在我的设备上，我没有收到推送通知用户权限警报说**“应用程序名称”想要发送通知**

我发现如果设备越狱，那么我们不会收到权限警报消息，但我的设备没有越狱。

*已编辑*

我也在我的设备上收到推送通知，只是在第一次启动时没有收到权限警报。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-07T00:32:37.343

来自：[https ://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG42](https://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG42)

1.  从设备中删除您的应用程序。
2.  完全关闭设备并重新打开。
3.  前往“设置”>“通用”>“日期和时间”，将日期提前一天或更长时间。
4.  再次完全关闭设备，然后重新打开。

5.  重新安装应用程序

我刚刚在 iOS 7.1 上进行了测试，它工作正常。请注意，这需要关闭设备两次。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T13:48:40.437

我发现推送通知权限警报只有在第一次启动应用程序时才会出现，即使我们删除应用程序，权限警报也不会出现。即使应用程序被卸载超过 7 天，仍然不会出现权限警报。

当我在不同设备上测试我的应用程序时，我发现了这个问题，权限警报只出现一次，第一次运行应用程序。

希望这些信息可以帮助其他也面临同样问题的人..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T13:03:03.837

如果您使用 IOS S.1 /5.1 + ，请阅读推送通知指南 [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/#push-notifications)

通过[苹果文档](https://developer.apple.com/library/archive/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG42)

**启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。**

如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。您可以通过将系统时钟提前一天或更长时间，完全关闭设备，然后重新打开设备来实现后者，而无需实际等待一天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:59:06.767

你需要做这样的事情——你还需要注册你的设备。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {   

    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];
} 
```

根据您的状态通知委托方法回调 -

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken 
{

}

- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err 
{
    DebugLog(@"Error in registration. Error: %@", err);
} 
```

# regex - MVC 正则表达式数据属性验证未正确触发

> ID：12281622
> 
> 赞同：1
> 
> 时间：2012-09-05T12:38:25.060
> 
> 标签：regex, asp.net-mvc

无论在字段中输入什么内容，以下正则表达式属性都会触发错误。这发生在客户端。此外，它显示的是通用消息而不是指定消息。你能帮我吗？

公共类注册模型

```
{

    [Required]

    [StringLength(63, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]

    [RegularExpression(@"/^[a-z\d]+([-_][a-z\d]+)*$/i",ErrorMessage="The Site Name can only contain letters from a-z (no accents), numbers from 0-9 and non consecutive hyphens or underscores.")]

    [Display(Name = "Site Name")]

    public string UserName { get; set; }

} 
```

以下不同的正则表达式有效，因此它必须是表达式本身或 @（字符串文字）字符的问题，因为 \d 组合是 C# 转义字符。

RegularExpression("^[a-zA-Z][a-zA-Z0-9]+", ErrorMessage = "站点名称只能包含 az 中的字母（无重音符号）、0-9 中的数字和非连续连字符或下划线。")]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:59:10.060

以下似乎工作正常。

[RegularExpression(@"^(a-z0-9{0,61}[a-z0-9]|[a-z0-9])$", ErrorMessage = "站点名称只能包含来自 az 的字母（没有重音符号）、0-9 的数字和非连续的连字符或下划线。")]

# sas - 从同一行中的多个字符串创建虚拟变量

> ID：12281626
> 
> 赞同：1
> 
> 时间：2012-09-05T12:38:44.880
> 
> 标签：sas

我有一个看起来像这样的数据集（请注意，每个产品都有一个空格）：

```
Client_ID      Purchase
121212         "Orange_Juice Lettuce"
121212         "Banana Bread "
230102         "Banana Apple"
230102         "Chicken"
121212         "Chicken Bread"
301450         "Grapes Lettuce"
...            ... 
```

现在，我想知道每个人购买什么产品，对每个项目使用一个虚拟变量：

```
Client_ID    Apple    Banana    Bread    Chicken    Grapes    Lettuce    Orange_Juice
121212       0        1         1        1          0         1          1  
230102       1        1         0        1          0         0          0
301450       0        0         0        0          1         1          0
...          ...      ...       ...      ...        ...       ...        ... 
```

几周前我问了一个[类似的问题，但我没有在同一行中有几个项目，就像这里的情况一样。](https://stackoverflow.com/questions/11490190/transforming-levels-of-one-variable-into-other-variables)所以我真的迷路了。我试图将项目分成多列，但这并不理想，因为每次购买可以有不同数量的项目（据我所知最多几十个）。

关于如何进行的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:35:21.853

这是使用 PROC FREQ 和 PROC TRANSPOSE 的灵活解决方案。SPARSE 选项让您归零。我假设你只想要 1 或 0，因此 NODUPKEY 排序；如果您确实需要 2 作为第一个 ID 的 BREAD，请删除 NODUPKEY （或完全删除排序）。

首先创建一个垂直数据集，每个 ID/产品有一条记录（将购买拆分为产品）；然后 PROC FREQ 那个数据集，这样你就有一个数据集，每个客户/产品组合都是 1/0；然后将其转置为使用产品作为 ID 并计为 VAR。

如果您有任何想要保证显示为零的产品，即使*没有人*拥有它们，您应该使用虚拟客户端 ID 和所有可能的产品在初始表（或 proc freq 之前的任何内容）中添加一行，然后在转置删除虚拟客户端 ID。

```
data test;
input @1 Client_ID  6\.   @16 Purchase $50.;
datalines;
121212         Orange_Juice Lettuce
121212         Banana Bread 
230102         Banana Apple
230102         Chicken
121212         Chicken Bread
301450         Grapes Lettuce
;;;;
run;

data vert;
set test;
format product $20.;
do _x = 1 by 1 until (missing(product));
  product=scan(purchase,_x);
  if not missing(product) then output;
end;
run;
proc sort data=vert nodupkey;
by client_id product;
run;

proc freq data=vert;
tables client_id*product/sparse out=prods;
run;

proc transpose data=prods out=horiz;
by client_id;
id product;
var count;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:02:20.507

这是一个数据步编程解决方案：

```
proc sort data=have;
   by client_id;
run;
data want(keep=client_id apple banana bread chicken grapes lettuce orange_juice);
   set have;
      by client_id;
   retain apple banana bread chicken grapes lettuce orange_juice;
   if first.client_id then do;
      apple = 0;
      banana = 0;
      bread = 0 ;
      chicken = 0;
      grapes = 0;
      lettuce = 0;
      orange_juice = 0;
      end;
   length item $20;
   _x = 1;
   item = scan(purchase,_x);
   do while(item ne ' ');
      select(item);
         when('Apple') then apple = 1;
         when('Banana') then banana = 1;
         when('Bread') then bread = 1;
         when('Chicken') then chicken = 1;
         when('Grapes') then grapes = 1;
         when('Lettuce') then lettuce = 1;
         when(("Orange_Juice') then orange_juice = 1;
         otherwise;
         end;
      _x = _x + 1;
      item = scan(purchase,_x);
      end;
   if last.client_id then output;
run; 
```

**编辑：**`PURCHASE`我错过了每个变量中多个项目的问题部分。谢谢乔！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:36:59.137

让 SAS 数据步骤为您进行一些虚拟变量编码也是一个可行的解决方案。

```
data test;
input Client_ID 6\. Purchase $50.;
datalines;
121212         Orange_Juice Lettuce
121212         Banana Bread 
230102         Banana Apple
230102         Chicken
121212         Chicken Bread
301450         Grapes Lettuce
 ;;;;
 run;

filename tmp temp;
 data _null_;
 set test end = done;
 file tmp;
 length product $25 prodlist $1000;
 retain prodlist;
 do i = 1 to countw( purchase, " " );
      product = scan( purchase, i, " " );
      prodlist = ifc( indexw( prodlist, product )=0, catx( ' ', prodlist, product ), prodlist );
 end;
 if done then do; 
    prodlinit=prxchange("s/ /=0; /",-1,compbl(prodlist)); 
    put 'array prods(*) ' prodlist ';'  / prodlinit;
 end;
 run;

 data new;
  set test;
   %inc tmp/source2;
   do i = 1 to dim( prods );
     if indexw(purchase,vname(prods(i))) > 0 then prods(i) = 1;
   end; 
  run;

proc print;
run; 
```

# python - Django/Python：/foo/bar 处的 ValueError

> ID：12281630
> 
> 赞同：0
> 
> 时间：2012-09-05T12:39:00.613
> 
> 标签：python, django, forms, django-forms

我在使用 django 表单时遇到了一些问题。这是我得到的错误：

```
ValueError at /coach/new/
Cannot assign "u'7'": "Course.category" must be a "Category" instance. 
```

视图.py

```
def create_course_page(request):
if request.method == 'POST': # If the form has been submitted...
    form = CreateCourseForm(request.POST) # A form bound to the POST data
    #form.data['category'] = Category.objects.get(pk=form.data['category']),
    if form.is_valid(): # All validation rules pass
        cleaned_data = form.cleaned_data
        my_course = Course(
            title = cleaned_data['title'],
            prerequisite = cleaned_data['prerequisite'],
            category = Category.objects.get(pk=cleaned_data['category']),
            short_description = cleaned_data['short_description'],
            #listing_city = cleaned_data['xxxx'],
            date_created = datetime.now(),
            date_last_updated = datetime.now(),
            teacher = request.user,
        )
        my_course.save()
        return HttpResponseRedirect('/') # Redirect after POST
    else:
        return HttpResponseRedirect('/wtf') # Redirect after POST
else:
    my_course = Course()
    form = CreateCourseForm(instance=my_course) # An unbound form

return render(request, 'learn/new_course.html', {
    'form': form,
}) 
```

我试图用“form.data['category'] = Category.objects.get(pk=form.data['category'])”来解决这个问题，但那是行不通的。

有没有人有更好的主意？非常感谢。

编辑：回溯显示错误发生在

```
if form.is_valid(): # All validation rules pass 
```

EDIT2：这可能会更好地解释为什么 django 表单不适用于“默认”编程：

表格.py

```
def categories_as_choices():
categories = [(u'', u'')] # So select box get's an empty value/default label
for category in Category.objects.all():
    new_category = []
    sub_categories = []
    for sub_category in category.get_children():
        sub_categories.append([sub_category.id, sub_category.name])

    new_category = [category.name, sub_categories]
    categories.append(new_category)
return categories

class CreateCourseForm(ModelForm):
category = forms.ChoiceField(choices=categories_as_choices()) #chzn-select
class Meta:
    model = Course
    fields = ('title', 'category')

def __init__(self, *args, **kwargs):
    super (CreateCourseForm, self).__init__(*args, **kwargs)
    self.fields['category'].widget.attrs['class'] = 'chzn-select' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:50:43.283

尝试这个

```
get_cat_name =  form.cleaned_data['category']

get_obj = Category.objects.get(category = get_cat_name)

category = get_obj.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:52:16.957

```
category = Category.objects.get(pk=cleaned_data['category']) 
```

通常你不需要相关`Category`的对象，只需给出`cleaned_data`足够的正确方法即可。

```
my_course = Course(......, category = cleaned_data['category'], ...) 
```

或者，如果您必须使用相关的类别 ID，则每个`ForeignKey`模型字段都可以用作`<field_name>_id`. 但是你必须给出一个有效的外键，而不是相关的对象。

```
my_course = Course(......, category_id = 8, ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:57:47.733

你可以试试

```
my_course = Course(..., category = form.cleaned_data['category']), ...) 
```

将`form.cleaned_data`有类别实例。

但是，很多推荐的方法是将表单保​​存为

```
my_course = form.save() 
```

如果要手动更改某些字段，请执行

```
my_course = form.save(commit=False)
my_course.some_field = some_value
...
my_couse.save() 
```

# clojure - Clojure 符号在用作函数时有什么作用？

> ID：12281631
> 
> 赞同：12
> 
> 时间：2012-09-05T12:39:00.507
> 
> 标签：clojure

在尝试解决涉及重新实现评估的 4Clojure 问题“[通用计算引擎](http://www.4clojure.com/problem/121)”时，我不小心最终调用了这样的东西：

```
(apply '/ '(16 8)) 
```

而不是预期的：

```
(apply / '(16 8)) 
```

这有返回的令人困惑的副作用`8`，这让我觉得我搞砸了我的数学。

后来我在一些调试后意识到了我的错误——`/`在尝试调用它之前我没有评估这个符号——所以我意识到`clojure.lang.Symbol`必须实现`clojure.lang.IFn`. 但是那个实现有什么作用*呢*？我所能做的就是返回`nil`一个参数，或者如果给出第二个参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T12:39:00.507

符号在地图中*查找自己*，就像关键字一样。参见[Symbol 的实现](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Symbol.java#L122)：

```
…
122 public Object invoke(Object obj) {
123         return RT.get(obj, this);
124 }
125
126 public Object invoke(Object obj, Object notFound) {
127         return RT.get(obj, this, notFound);
128 }
… 
```

（`RT`是[`clojure.lang.RT`](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/RT.java)，它几乎可以做所有事情。“运行时”？）

在给出的示例中，查找失败（因为 16 不是映射），因此`notFound`返回值 (8)。

# jquery - 我是否需要使用 Web 服务来使用 JQuery 执行“Ajax”以获取 JSON 格式的数据

> ID：12281632
> 
> 赞同：0
> 
> 时间：2012-09-05T12:39:00.767
> 
> 标签：jquery, ajax, json

我是否需要使用 Web 服务来使用 JQuery 执行“Ajax”以获取 JSON 格式的数据？同事推荐我用一个“Httphandler”……最后想知道是不是不能直接调用DataAccessLayer中的一个方法，传给Ajax……

我迷路了，**如果我真的需要一个 Web 服务来用 JQuery 做 Ajax，**有人可以解释一下吗？只有**一台服务器（没有远程服务器）**，所以我可能不需要网络服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:55:31.047

您实际上并不需要单独的 Web 服务。您实际上可以在同一页面上执行 AJAX。我对此有点生疏，所以请耐心等待，但您要做的就是：

1.  从 AJAX 控件工具包中添加 ToolkitScriptManager
2.  在您的 HTML 中，将其添加到表单标记之后`<asp:ToolkitScriptManager runat="server" EnablePageMethods="true"/>`
3.  将`[ScriptService]`属性添加到您的页面类声明
4.  `[ScriptMethod]`为您要调用的方法添加一个属性。默认情况下，它以 JSON 格式传输，但您可以使用 XML 响应`[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]`
5.  这个方法需要是静态的，因为它应该在不重新运行页面渲染周期的情况下执行。
6.  现在你只需要一些 jQuery 来调用函数

```
[ScriptService]
public class MyPage : Page
{
   [ScriptMethod]
   public static string GetText() { return "Hello, world!"; }
} 
```

```
<html>
<!-- jQuery scripts -->
<body>
<script language="javascript">
   $.ready(function () {

   var text = PageMethods.GetText();
   $("#label1").value(text);
   });
</script>
<form runat="server">

  <asp:ToolkitScriptManager runat="server" EnablePageMethods="true"/>
  <asp:Label runat="server" ID="label1"/>

</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:47:34.940

不，你没有。你需要做的就是

*   在标头“application/json”中发送正确的内容类型
*   重新安排服务器端输出以返回实际输出的 JSON 字符串表示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:52:03.367

您可以使用 AJAX 调用常规的 .aspx（我知道 asp.net 中的 HttpHandler）页面。但是在这种情况下，您正在做很多额外的工作（您必须停止页面执行的常规流程，确保您不返回一些垃圾，将响应转换为 JSON 等）同时 -webservice 不需要所有这些基础设施常规页面（在 asp.net 中）需要，并且不会在您的服务器上产生额外的负载。HttpHandler 也是如此。你只做你需要的，没有别的。

# javascript - 为什么当我说它时我的 html 可以工作，但它在 jsfiddle 上不起作用？

> ID：12281635
> 
> 赞同：0
> 
> 时间：2012-09-05T12:39:09.680
> 
> 标签：javascript, jquery, html, google-api, jsfiddle

我用javascripts编写了一个格式完美的html来调用google API，当我将它保存在我的机器上时，它工作正常。但是当我将它复制并粘贴到 jsfiddle 上时，合成器部分将无法工作。[http://jsfiddle.net/LNpYB/33/](http://jsfiddle.net/LNpYB/33/)

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:41:39.083

查看您的浏览器 JavaScript 控制台。

铬：F12 或 Ctrl+Shift+I

![在此处输入图像描述](../Images/94ad8555d2e3ba0e53b3755668f97bd3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:12:49.070

它可能对我有用 20 次。

在浏览器中输入 url，它将起作用，从链接打开它，http 检查器显示 Google 为相同的 url 返回 404。

他们只允许通过不包含引荐来源网址的请求使用 TTS（本地页面不包含）。

# java - Android：在 API 级别 9 中使用 PopupMenu

> ID：12281639
> 
> 赞同：5
> 
> 时间：2012-09-05T12:39:19.913
> 
> 标签：java, android, eclipse, android-layout, popupmenu

我喜欢在我的应用程序中添加一个 PopupMenu。问题是它也应该在 Android 2.3 上运行。我发现了一些帖子，人们建议使用 AlertDialog 作为替代方案，但我更喜欢 PopupMenu ;)

我认为它也应该在这个 API 级别上工作，因为我已经在几个应用程序中看到过它（我的手机有 2.3.5 并且工作正常）。

有没有可能使这项工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-22T13:33:59.327

*   您必须在您的应用程序中导入支持 v7，如下所示：[添加具有资源的库](http://developer.android.com/tools/support-library/setup.html#libs-with-res)

*   `import android.support.v7.widget.PopupMenu;`

*   用它编译你的代码，然后你的弹出菜单与 android 2.2 及更高版本兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:57:21.103

PopupMenu 是可能的，您可以在发送电子邮件的方法中尝试此操作，您可以根据自己的需要扩充您的 xml：

```
 LayoutInflater inflater = (LayoutInflater)EEActionListDetail.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    Display display = getWindowManager().getDefaultDisplay();

    int width = display.getWidth()/2;
    int height = display.getHeight()/2;

    View pop = inflater.inflate(R.layout.popupemail,null,false);
    pop.measure(View.MeasureSpec.UNSPECIFIED,View.MeasureSpec.UNSPECIFIED);
    height = pop.getMeasuredHeight();
    width = pop.getMeasuredWidth()+200;
    pu = new PopupWindow(pop,width,height,true);
    pu.showAtLocation(findViewById(R.id.ll3),Gravity.CENTER,1,1);

    Button brnSend = (Button)pu.getContentView().findViewById(R.id.btnSend);
    Button close = (Button)pu.getContentView().findViewById(R.id.close);

    Subject = (EditText)pu.getContentView().findViewById(R.id.subject);
    Message = (EditText)pu.getContentView().findViewById(R.id.message);

    close.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            pu.dismiss();

        }
    });
    brnSend.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            for(int j=0;j<EmailArray.size();j++){
                String EmailSent = EmailArray.get(j);
                SendEmailALL(EmailSent);
            }
        }
    }); 
```

# android - Android：onTouchEvent 在单击左角时给出奇怪的坐标

> ID：12281648
> 
> 赞同：0
> 
> 时间：2012-09-05T12:39:50.880
> 
> 标签：android, touch-event

我正在实现`onTouch`事件并在单击时获取 x 和 y 坐标

```
int x = (int) event.getX();
int y = (int) event.getY(); 
```

我在模拟器中单击屏幕的左上角，但获取坐标`(0,25)`而不是`(0,0)`.

我在多个版本的 Android 中尝试过这个，但结果是一样的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:15:34.833

我想到了。这与模拟器有关。在设备上它工作正常。在具有缩放比例的模拟器上，这就是它没有给出正确坐标的原因。

# jquery - jqChart日期标签只显示时间

> ID：12281654
> 
> 赞同：2
> 
> 时间：2012-09-05T12:40:08.140
> 
> 标签：jquery, charts, jqchart

我正在用 jqChart 创建一个可缩放的图表。我正在使用此示例中的代码：

[http://www.jqchart.com/samples](http://www.jqchart.com/samples)

问题是当我大量缩放图表时，x 轴标签会将日期转换为时间。

缩放时如何显示实际日期（不仅是时间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:26:53.350

您好，您可以在构建图表时在***dateTimeAxisOptions中指定******intervalType***

 *[这](http://www.jqchart.com/documentation/userguide/default.aspx#!DateTimeAxis)是文档，你可以做这样的事情，这应该可以解决你的问题

```
axes: [
    {
          type: 'dateTime',
          location: 'bottom',
          minimum: new Date(2011, 1, 4),
          maximum: new Date(2011, 1, 18),
          interval: 1,
          intervalType: 'days'
      }
   ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:45:53.983

jqChart 轴标签的格式取决于计算的日期时间间隔。如果间隔变为“小时”，它会更改标签字符串格式。

您可以使用以下方法更改字符串格式：

```
axes: [ 
       { 
          type: 'dateTime', 
          location: 'bottom', 
          labels: { stringFormat: 'm/d/yy' }
      } 
     ] 
```

在这种情况下，标签不会变成时间。

有关标签格式的更多信息，您可以在此处找到：

[http://www.jqchart.com/documentation/userguide/default.aspx#!LabelsFormatting](http://www.jqchart.com/documentation/userguide/default.aspx#!LabelsFormatting)*

# javascript - 随机数 javascript

> ID：12281657
> 
> 赞同：-2
> 
> 时间：2012-09-05T12:40:15.833
> 
> 标签：javascript

我正在为客户工作，我需要即时生成优惠券号码。我发现了一个在生成随机数方面很有魅力的 javascript。问题是我需要将生成的随机数输入另一个字段 - 以某种方式捕获它。我的javascript知识有限。非常感谢任何建议或帮助。

```
<script type="text/javascript">
function randomnumber() {
document.forms[0].randomnumber.value=(Math.round(Math.random()*9999999999999999+1));
}
onload=randomnumber

</script>
</head>
<body>
<form>
<input id="randomnumber"type="text" name="randomnumber" readonly>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:42:02.187

您应该使用 document.getElementById 来检索该字段。

```
function randomNumber() {
    document.getElementById('randomnumber').value =
        (Math.round(Math.random()*9999999999999999+1));
}
randomNumber(); 
```

[现场演示](http://jsfiddle.net/RNdYp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:52:57.973

您是否尝试过使用返回将函数设置为 VAR。

```
function randomnumber() { 
var x =document.forms[0].randomnumber.value=(Math.round(Math.random()*9999999999999999+1)); 
return:x
} 

var coupon = randomnumber() 
```

然后，您可以使用 javascript 用您的“优惠券”变量填充任何 html。

没有测试过这个，它不是很整洁，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:53:46.850

听起来您需要存储随机数以在多个地方使用：

```
function getRandomNumber() {
    return Math.round(Math.random()*9999999999999999+1);
};

var randomNumber = getRandomNumber();

document.getElementById('randomnumber').value = randomNumber;

// do whatever else you want with the randomNumber variable 
```

# c# - MonoTouch 中的 CGBitmapContext 抛出无效句柄异常

> ID：12281658
> 
> 赞同：0
> 
> 时间：2012-09-05T12:40:17.133
> 
> 标签：c#, xamarin.ios, cgbitmapcontext

我是 MonoTouch 的新手，我最近一直在将代码从标准 C# 转换为符合 MonoTouch 的代码，以便可以在 iPhone 应用程序中使用它。我已经设法转换了代码，但是我遇到了这个用于返回位图上下文的方法的问题：

```
private CGBitmapContext ExtractWriteableBitmap( RGBPaletteRecord rgbPalette, double dpi, ChartIndexFile indexFile, RasterChartFile chartFile )
        {
            CGBitmapContext bitmapImage = null;
            TileRecord tile;

            // calc the number of tiles in each plane
            int tileCountX = indexFile.TileIndexRecords.Max(ti => ti.X);
            int tileCountY = indexFile.TileIndexRecords.Max(ti => ti.Y);

            // create the big picture
            int pixelWidth = (tileCountX + 1) * TileRecord.PixelWidth;
            int pixelHeight = (tileCountY + 1) * TileRecord.PixelHight;

            int intDPI = Convert.ToInt32(dpi);

            int bytesPerRow = (int)TileRecord.PixelWidth * 4; // note that bytes per row should 
    //be based on width, not height.

            CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB();
            CGImageAlphaInfo info = CGImageAlphaInfo.NoneSkipFirst;

            // create the big picture 
            bitmapImage = new CGBitmapContext(System.IntPtr.Zero, pixelWidth, pixelHeight, intDPI, intDPI, colorSpace, info);

            byte[] sourceArray;
            RectangleF sourceRect;

            //copy the tiles into the big picture
            int index = 0;
            foreach (TileIndexRecord tileIndexRecord in indexFile.TileIndexRecords)
            {
                // get the tile record
                tile = chartFile.TileRecords[index];

                // extract the byte array for the given palette
                sourceArray = tile.GetBytes(rgbPalette);

                GCHandle pinnedArray = GCHandle.Alloc(sourceArray, GCHandleType.Pinned);
                IntPtr pointer = pinnedArray.AddrOfPinnedObject();
                //do your stuff
                //pinnedArray.Free();

                CGImage image = new CGImage(pointer);
                sourceRect = new RectangleF(0, 0, TileRecord.PixelWidth, TileRecord.PixelHight); 

                bitmapImage.DrawImage(new RectangleF(0,0,128,128),image);

                // copy the tile image into the big picture
                //bitmapImage.WritePixels(sourceRect, sourceArray, TileRecord.Stride, (tileIndexRecord.X * TileRecord.PixelWidth), (tileIndexRecord.Y * TileRecord.PixelHight));

                // increment the index
                index++;
            }
            return bitmapImage;
        } 
```

这是堆栈跟踪：

```
System.Exception: Invalid handle
  at MonoTouch.CoreGraphics.CGContext..ctor (IntPtr handle, Boolean owns) [0x00022] in /Developer/MonoTouch/Source/monotouch/src/shared/CoreGraphics/CGContext.cs:136
  at MonoTouch.CoreGraphics.CGBitmapContext..ctor (IntPtr data, Int32 width, Int32 height, Int32 bitsPerComponent, Int32 bytesPerRow, MonoTouch.CoreGraphics.CGColorSpace colorSpace, CGImageAlphaInfo bitmapInfo) [0x00000] in <filename unknown>:0
  at Jargoon.Data.Arcs.Loader.ExtractWriteableBitmap (Jargoon.Data.Arcs.Records.RGBPaletteRecord rgbPalette, Double dpi, Jargoon.Data.Arcs.Raschts.ChartIndexFile indexFile, Jargoon.Data.Arcs.Raschts.RasterChartFile chartFile) [0x00079] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Loader.cs:569
  at Jargoon.Data.Arcs.Loader.GetHiResImage (Jargoon.Data.Arcs.Records.RGBPaletteRecord rgbPalette) [0x00000] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Loader.cs:361
  at ARCSViewer.ARCSViewerViewController.ViewDidLoad () [0x0001c] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/ARCSViewerViewController.cs:37
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at ARCSViewer.Application.Main (System.String[] args) [0x00000] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Main.cs:17 
```

错误发生在以下行：

```
// create the big picture 
            bitmapImage = new CGBitmapContext(System.IntPtr.Zero, pixelWidth, pixelHeight, intDPI, intDPI, colorSpace, info); 
```

我对 MonoTouch 很陌生，所以如果它非常明显，请尝试忍受我，但有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:08:13.517

这通常发生在内存不足时。（设备）控制台通常会打印更多信息。

我的猜测是你没有释放你正在创建的 CGBitmapContext 。

# python - 找出数字的更多pythonic方法是所有数字的最小化

> ID：12281659
> 
> 赞同：0
> 
> 时间：2012-09-05T12:40:20.470
> 
> 标签：python, compare, max, minimum

是否有任何 pythonic 方法来找出一个变量在一堆变量中具有最小值。例如

```
In [5]: if d<c and d<b and d<a:
   ...:     print "d is minimum.."
   ...:     
d is minimum.. 
```

现在这里只有 3 个变量，所以我们可以使用 and 来做，但是如果有这么多变量要比较呢？
请告诉我一次检查的情况 d 是否与所有其他变量一起是**最大值**。？
检查 d 是否**等于所有其他变量**呢？
**我的解决方案：**

> 也许我们可以将所有需要比较的变量添加到一个列表中并一个一个地比较它们，但我认为必须有更好的方法来使用 python 来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T12:41:59.127

使用`all`which 将是有效的，因为它会短路：

```
if all(d < i for i in [1,5,4,4,6,6,4,4,5]) 
```

哪里`i`可以是任何可迭代的

你的例子是：

```
if all(d < i for i in (c, b, a)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T12:41:47.250

你看过[`min`](http://docs.python.org/library/functions.html#min)函数吗？

```
if d <= min(c,b,a):
   ... 
```

当然，您也可以使用可迭代对象：

```
if d <= min([c,b,a]):
   ... 
```

我喜欢这个版本，因为它是**明确**的。这很容易阅读。正如 JonClements 指出的那样，对于大型集合，可能有更有效的方法来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:42:44.693

```
>>> a=2
>>> b=6
>>> c=5
>>> d=1
>>> d==min(a,b,c,d)
True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:43:09.607

有什么比 Python 的内置函数更*Pythonic的呢？*`min`

```
f = [a,b,c]
if d < min(f):
    print "d is the minimum" 
```

.(..这里是python内置[min](http://docs.python.org/library/functions.html#min)函数的文档)

如果您正在寻找更有效的方式来使用`all`函数，一旦您发现其中一个元素小于`d`您停止迭代并返回 false：

```
if all(d < x for x in a):
    print "d is the minimum" 
```

# iphone - 我们如何使用 UIbutton 实现类似于 tabbarcontroller 的功能？

> ID：12281662
> 
> 赞同：-4
> 
> 时间：2012-09-05T12:40:25.590
> 
> 标签：iphone, ios, ipod

我想要两个在两个三视图控制器之间切换，方法是保留当前上下文，就像 TabBarController 所做的一样。但不使用 TabBarController 模板。

请参阅附件屏幕截图。

?![在此处输入图像描述](../Images/e2166fc577ac11fd8d155912797680f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:57:48.873

如果你一直在做同样`UIView`的事情，你可以做类似的事情

在你的文件中取一个`UISegmentedControl`和三个。`UIViews``.h`

使用for `changeView`中的操作绑定每个视图和分段控制`IB``UIControlEventsValueChanged`

```
- (IBAction) changeView
{    
 switch (segmentViews.selectedSegmentIndex) 
 {
    case 0:
        [firstView setHidden:NO];
        [secondView setHidden:YES];
        [thirdView setHidden:YES];
        break;

    case 1:
        [firstView setHidden:YES];  
        [secondView setHidden:NO];
        [thirdView setHidden:YES];
        break;

    case 2:
        [firstView setHidden:YES];
        [secondView setHidden:YES];
        [thirdView setHidden:NO];
        break;
 }
} 
```

它会随着变化的变化而`selectedSegmentIndex`变化。给它适当的`backgrondColor`样子`tapbar`。您甚至可以添加`animation`视图过渡效果。

它可以与不同的控制器一起工作`UIViewControllers`，但您必须在每个控制器中添加`UISegmentControl`和维护。`UIDesign`也需要保养`currentIndex`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:46:49.753

在您的 VC 中，您应该定义 3并在方法`UIViewController`中初始化它们。`-(id)init`然后，当您按下按钮时，您只需将相应的视图控制器附加到`self.view`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:50:52.823

您可以拥有一个“主”视图控制器，并将控件放在其视图的底部。然后它会在按下按钮时“呈现”和“关闭”这 3 个视图控制器（我希望这是您正在显示的分段控件）。只需使用 UIViewController 的标准功能，这一切都应该很好地工作。

编辑：要处理过渡，您将需要尝试各种想法来找到您最喜欢的想法。一些想法：

*   当点击不同的选项卡时，关闭显示的视图并呈现没有动画的新视图。这应该模仿 tabBarController 的作用

*   阅读 UIViewController 类描述中标题为“实现容器视图控制器”的段落 - 它向您展示了容器视图可以导致从 viewController A 转换到 viewController B 的各种方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:01:45.097

在您的代码中，您应该定义 3 UIViewController 并且您可以在按下任何一个视图时设置剩余两个视图的隐藏属性。然后，当您按下任何其他按钮时，您就可以显示隐藏属性并为以前的视图设置隐藏属性。

# php - 2 使用我的代码查询数组

> ID：12281664
> 
> 赞同：4
> 
> 时间：2012-09-05T12:40:36.910
> 
> 标签：php, arrays, wordpress, array-merge

我为我的 Wordpress 特色文章使用滑块。它选择一个自定义类别并返回一定数量的帖子。

如何制作显示为自定义帖子的第一个帖子？我可以直接在滑块代码中添加特定帖子的 ID**以使该帖子首先出现**，然后是原始查询返回的其他帖子？

例如，在页面上，第一个帖子的 ID 为 6（手动编写在源代码中），第二个、第三个和第四个帖子是原始代码中查询返回的帖子。这怎么可能？

有人建议这很简单，我需要做的就是在此之前进行另一个查询以获取自定义帖子，然后关闭查询，重新打开它以获取下一个查询（即在滑块代码中），最后推送项目一起放入一个数组中。我对 PHP 的了解非常有限，这限制了我理解如何做到这一点。

我知道如何获取自定义帖子，此代码有效：

```
<?php
$post_id = 6;
$queried_post = get_post($post_id);
?> 
```

但是，我不知道如何将这个和原始查询添加到数组中。**你？**

这是滑块的完整代码：

```
<?php 
    $responsive = 'on' != get_option('henrik_responsive_layout') ? false : true;
    $featured_auto_class = '';
    if ( 'on' == get_option('henrik_slider_auto') ) $featured_auto_class .= ' et_slider_auto et_slider_speed_' . get_option('henrik_slider_autospeed');
?>
<div id="featured" class="<?php if ( $responsive ) echo 'flexslider' . $featured_auto_class; else echo 'et_cycle'; ?>">
    <a id="left-arrow" href="#"><?php esc_html_e('Previous','henrik'); ?></a>
    <a id="right-arrow" href="#"><?php esc_html_e('Next','henrik'); ?></a>

<?php if ( $responsive ) { ?>
    <ul class="slides">
<?php } else { ?>
    <div id="slides">
<?php } ?>
        <?php global $ids;
        $ids = array();
        $arr = array();
        $i=0;

        $featured_cat = get_option('henrik_feat_cat'); 
        $featured_num = (int) get_option('henrik_featured_num'); 

        if (get_option('henrik_use_pages') == 'false') query_posts("showposts=$featured_num&cat=".get_cat_ID($featured_cat));
        else {
            global $pages_number;

            if (get_option('henrik_feat_pages') <> '') $featured_num = count(get_option('henrik_feat_pages'));
            else $featured_num = $pages_number;

            query_posts(array
                            ('post_type' => 'page',
                            'orderby' => 'menu_order',
                            'order' => 'ASC',
                            'post__in' => (array) get_option('henrik_feat_pages'),
                            'showposts' => (int) $featured_num
                        ));
        } ?>
        <?php if (have_posts()) : while (have_posts()) : the_post();
        global $post; ?>
        <?php if ( $responsive ) { ?>
            <li class="slide">
        <?php } else { ?>
            <div class="slide">
        <?php } ?>
                <?php
                $width = $responsive ? 960 : 958;
                $height = 340;
                $small_width = 95;
                $small_height = 54;
                $titletext = get_the_title();

                $thumbnail = get_thumbnail($width,$height,'',$titletext,$titletext,false,'Featured');

                $arr[$i]['thumbnail'] = get_thumbnail($small_width,$small_height,'',$titletext,$titletext,false,'Small');
                $arr[$i]['titletext'] = $titletext;

                $thumb = $thumbnail["thumb"];
                print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, ''); ?>
                <div class="featured-top-shadow"></div>
                <div class="featured-bottom-shadow"></div>  
                <div class="featured-description">
                    <div class="feat_desc">
                        <p class="meta-info"><?php esc_html_e('Posted','henrik'); ?> <?php esc_html_e('by','henrik'); ?> <?php the_author_posts_link(); ?> <?php esc_html_e('on','henrik'); ?> <?php the_time(esc_attr(get_option('henrik_date_format'))) ?></p>
                        <h2 class="featured-title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                        <p><?php truncate_post(410); ?></p>
                    </div>
                    <a href="<?php the_permalink(); ?>" class="readmore"><?php esc_html_e('Read More', 'henrik'); ?></a>
                </div> <!-- end .description -->
        <?php if ( $responsive ) { ?>
            </li> <!-- end .slide -->
        <?php } else { ?>
            </div> <!-- end .slide -->
        <?php } ?>
        <?php $ids[] = $post->ID; $i++; endwhile; endif; wp_reset_query(); ?>
<?php if ( $responsive ) { ?>
    </ul> <!-- end .slides -->
<?php } else { ?>
    </div> <!-- end #slides -->
<?php } ?>
</div> <!-- end #featured -->

<div id="controllers" class="clearfix">
    <ul>
        <?php for ($i = 0; $i < $featured_num; $i++) { ?>
            <li>
                <div class="controller">
                    <a href="#"<?php if ( $i == 0 ) echo ' class="active"'; ?>>
                        <?php print_thumbnail( $arr[$i]['thumbnail']['thumb'], $arr[$i]['thumbnail']["use_timthumb"], $arr[$i]['titletext'], $small_width, $small_height ); ?>
                        <span class="overlay"></span>
                    </a>
                </div>  
            </li>
        <?php } ?>
    </ul>
    <div id="active_item"></div>
</div> <!-- end #controllers --> 
```

如果您选择回复，请详细说明代码示例，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:21:11.540

不确定我的解决方案，因为我没有 WP 主机来测试它，但是 rty 是这样的：

**第 39 行**：用下面的代码替换该行

```
 <?php if (have_posts()) : while (have_posts()) : 
    global $post;
    if (!$first_time)  
    {
        $post_id = 6;
        $post = get_post($post_id);
        $first_time = 1;
    }
    else the_post();
     ?> 
```

解决思路很简单：

```
 Check for first-time loop
   :firt loop - simply get needed post with "get_post()" function
   :other loops - get posts from original query by "the_post()" function. 
```

# javascript - 未捕获的referenceerror函数未定义javascript android

> ID：12281665
> 
> 赞同：1
> 
> 时间：2012-09-05T12:40:37.040
> 
> 标签：javascript, android

我尝试将html页面加载到自定义webView，我还需要将4个javascript文件加载到webView，当我将javascript引用直接放在html的head标签中时，它们运行良好，但是当我在运行时从我的android加载它们时函数，它们正确加载，但不工作并捕获“未定义未捕获的引用错误函数”异常。

这是我在两种状态下所做的：

状态1：直接加载参考：

这完美......

```
<html>

<head>
<head>

<script type="text/javascript" src="file:///android_asset/selection/android.selection.js"></script>
<script type="text/javascript" src="file:///android_asset/selection/jquery.js"></script>
<script type="text/javascript" src="file:///android_asset/selection/rangy-core.js"></script>
<script type="text/javascript" src="file:///android_asset/selection/rangy-serializer.js"></script>      
</head>
<body>
......
</body>
</html> 
```

状态2：从webview客户端的android应用程序加载，，，onPageFinished方法我把这个代码：

```
String str =  "javascript: (function() { "

            + " var rangycore=document.createElement('script');"
            + " rangycore.type='text/javascript';"
            + " rangycore.src='file:///android_asset/selection/rangy-core.js';"
    +"document.getElementsByTagName('head').item(0).appendChild(rangycore);"

            + " var rangyserializer=document.createElement('script');"
            + " rangyserializer.type='text/javascript';"
            + " rangyserializer.src='file:///android_asset/selection/rangy-serializer.js';"
            + " document.getElementsByTagName('head').item(0).appendChild(rangyserializer);"

            +  " var select=document.createElement('script');"
            + " select.type='text/javascript';"
            + " select.src='file:///android_asset/selection/android.selection.js';"
            + " document.getElementsByTagName('head').item(0).appendChild(select);"

            + " var jquery=document.createElement('script');"
            + " jquery.type='text/javascript';"
            + " jquery.src='file:///android_asset/selection/jquery.js';"
            + " document.getElementsByTagName('head').item(0).appendChild(jquery);})()";

    BTWebView.this.loadUrl(str); 
```

此打印控制台消息“未捕获的参考错误：未定义范围”，尽管 head 标记正确附加了脚本字符串。

我该如何解决这个问题，谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:54:51.060

在运行时加载 JavaScript 的一种更简单和优雅的方式 ist [yepnope](http://yepnopejs.com/)，一个 1.7 KB 的小型库。

```
yepnope({
  load: [
    "file:///android_asset/selection/android.selection.js",
    "file:///android_asset/selection/jquery.js",
    "file:///android_asset/selection/rangy-core.js",
    "file:///android_asset/selection/rangy-serializer.js"
  ],
  complete: function () {
    alert('loaded successfully');
  }
}); 
```

您将拥有更少的代码，因此连接字符串中的错误可能更少。

可用的回调可能有助于发现错误或添加有用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:59:01.733

您在两个示例中以不同的顺序加载文件！

加载脚本文件的顺序很重要。我猜你有依赖关系，无法解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T06:52:37.707

试试看：- 如果应用程序以 LOLLIPOP 或更高版本为目标，则默认 Web 视图行为是完全拒绝混合内容。由于移动连接需要在标头丰富期间使用 HTTP，因此我们需要更宽松的安全设置。 `if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) { webView.getSettings().setMixedContentMode(WebSettings.MIXED_‌CONTENT_COMPATIBILIT‌Y_MODE); }`

# insert - 使用javascript和oauth2插入融合表

> ID：12281668
> 
> 赞同：0
> 
> 时间：2012-09-05T12:40:48.160
> 
> 标签：insert, client, oauth-2.0, google-fusion-tables

请查看[http://www.udayan2k12.com/trial.html](http://www.udayan2k12.com/trial.html)

我刚刚从 Google 链接（源）
原始页面[链接](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)
复制了源 我已经更改了客户端 ID 和 api 密钥
但这仍然不起作用

我的客户 ID 详细信息是！[在此处输入图像描述][1]

客户端 ID：365219651081-istfrdgsvrtj324sufau0ldi5e8b3fmk.apps.googleusercontent.com
电子邮件地址：365219651081-istfrdgsvrtj324sufau0ldi5e8b3fmk@developer.gserviceaccount.com
客户端密码：--
重定向 URI：无
JavaScript 来源：https://www[dot]udayan]
2密钥：AIzaSyA0FVy-lEr_MPGk1p_lHSrxGZDcxy6wH4o

我应该做些什么改变才能让它发挥作用。授权按钮不起作用。

但它适用于 http://udayan2k12[dot]com/token.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:14:09.397

如果您检查错误控制台，您将看到您收到以下错误：

```
Failed to load resource: the server responded with a status of 400 (Bad Request) https://accounts.google.com/o/oauth2/auth?client_id=365219651081-istfrdgsvrtj324sufau0ldi5e8b3fmk.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Ffusiontables&immediate=true&redirect_uri=postmessage&origin=http%3A%2F%2Fwww.udayan2k12.com&proxy=oauth2relay665167919&response_type=token&state=225646027&authuser=0 
```

当您点击[链接](https://accounts.google.com/o/oauth2/auth?client_id=365219651081-istfrdgsvrtj324sufau0ldi5e8b3fmk.apps.googleusercontent.com&scope=https://www.googleapis.com/auth/fusiontables&immediate=true&redirect_uri=postmessage&origin=http://www.udayan2k12.com&proxy=oauth2relay665167919&response_type=token&state=225646027&authuser=0)时，您收到的错误消息是：`origin_mismatch`

这意味着您没有将**[http://udayan2k12.com](http://udayan2k12.com)**（而不是*https*）添加到客户端 ID 的允许 JavaScript 来源。您可以在[Google API 控制台](https://code.google.com/apis/console/)上更改它（选项卡“API 访问”）。您也可以添加 localhost，以便它也可以在您的机器上运行。

这是我的设置示例：

![我的客户 ID 设置](../Images/15ed4e5a51527e9f5b01a7f83d10278a.png)

请查看[Google 的 OAuth 2.0 指南，](https://developers.google.com/accounts/docs/OAuth2)了解您需要的所有步骤。

# ios - TableView Cell 图像持久化使用 Core Data

> ID：12281669
> 
> 赞同：0
> 
> 时间：2012-09-05T12:40:52.450
> 
> 标签：ios, xcode, uitableview, core-data, uiimage

我正在尝试使用具有个人资料名称和人物图像的表格视图的应用程序。表格视图是可编辑的，可以添加新名称和图片，删除现有名称和重新排列表格是可能的。表格视图及其更改应该被保存使用核心数据..我几乎完成了它，但核心数据部分有一些问题..

我已经实现了核心数据来为表格单元提供数据持久性..每次我重新启动应用程序时，表格单元都会保留上次所做的更改..但是单元格图像没有加载..如何使该图像持续存在？

```
NSManagedObject *person1 = [NSEntityDescription
                            insertNewObjectForEntityForName:@"Person"
                            inManagedObjectContext:context];
NSManagedObject *person2 = [NSEntityDescription
                            insertNewObjectForEntityForName:@"Person"
                            inManagedObjectContext:context];

[person1 setValue:@"Bruce" forKey:@"personName"];
UIImage *image1 = [UIImage imageNamed:@"image1.jpg"]; 
NSData *imageData1 = UIImageJPEGRepresentation(image1, 0.9);
[person1 setValue:imageData1 forKey:@"personPicture"];
NSLog(@"Image1 data %@",imageData1);

[person2 setValue:@"Alfred" forKey:@"personName"];
UIImage *image2 = [UIImage imageNamed:@"image2.jpg"]; 
NSData *imageData2 = UIImageJPEGRepresentation(image2, 0.9);
[person2 setValue:imageData2 forKey:@"personPicture"];

NSError *error;
if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

然后 fetch 完成为

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Person" inManagedObjectContext:context];

[fetchRequest setEntity:entity];
NSError *error1 = nil;
self.persons = [[context executeFetchRequest:fetchRequest error:&error1] mutableCopy]; 
```

`didFinishLaunchingWithOptions`在 appDelegate中完成了很多工作。然后在`cellForRowAtIndexPath`tableview 类实现文件中的方法中使用数据作为

```
Person *thisPerson = [persons objectAtIndex:indexPath.row];
cell.textLabel.text = thisPerson.personName;

UIImage *image = [UIImage imageWithData:[thisPerson valueForKey:@"personPicture"]];
if ( image == nil ) {
    image = [UIImage imageNamed:@"QuestionMark.jpg"]; 
}
cell.imageView.image = image; 
```

单元格正在正确加载..我所做的所有编辑部分也正在保存和重新加载..第一次加载应用程序时图像正确加载..重新启动时出现 QuestionMark.jpg 图像..这是因为图像是 nil ..我尝试 NSLog 显示第一个图像数据并得到这个：

```
2012-09-07 17:05:59.395 Sample Project[1688:fb03] Image1 data <ffd8ffe0 00104a46     
49460001 01000001 00010000 ffe10058 45786966 00004d4d 002a0000 00080002 01120003 
00000001 00010000 87690004 00000001 00000026 00000000 0003a001 00030000 00010001 
0000a002 00040000 00010000 00bea003 00040000 00010000 01090000 .........
......               .............. 7ff4d668 0356803f 357e307f c94ff14f fd858ffe 
9af4ba00 f39a00cf a00d0a00 cfa00280 0a002803 ffd9> 
```

在我添加点的地方还有很多..无论如何..这似乎表明它保存了数据..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:48:17.207

如果图像比较小，则将其保存为核心数据存储库中的 NSData 对象。我为缩略图等执行此操作。对于大图像，您可以保存 URL 并将图像放在 Documents 文件夹中，并将文件的 URL (NSURL) 作为对象保存在 Core Data 中。如果您删除该核心数据实体，则它必须删除该文件。

编辑：关于您问题中的“对不起...”评论，更改此行：

```
UIImage *image = [UIImage imageWithData:[thisPerson valueForKey:@"personPicture"]]; 
```

到

```
NSData *data = thisPerson.personPicture;
if(data) {
  NSLog(@"Image class: %@", NSStringFromClass[data class]);
  if([data isKindOfClass:[NSData data]]) {
    NSLog(@"Data was of size %u", [data length]);
    UIImage *image = [UIImage imageWithData:data];
    if(image) NSLOg(@"SUCCESS!");
    else NSLog(@"PROBLEM: cannot create image from data");
  }
} else {
  NSLog(@"BIG PROBEM - personPicture is nil");
} 
```

您将从此处的输出中学到很多东西。

# functional-programming - 功能块图是函数式编程吗？

> ID：12281679
> 
> 赞同：2
> 
> 时间：2012-09-05T12:41:45.643
> 
> 标签：functional-programming, plc

用于PLC系统编程的*功能框图*是一种功能编程形式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-21T13:28:54.100

解决此问题的一种方法是查看 Wikipedia 页面中的函数式编程。

> 2 概念
> 
> ```
> 2.1 First-class and higher-order functions
> 2.2 Pure functions
> 2.3 Recursion
> 2.4 Strict versus non-strict evaluation
> 2.5 Type systems 
> ```

综上所述，对于 FBD 编程，我们有：

*   2.1 - 不
*   2.2 - 不（访问 DB、Q 和 M 区域中的全局内存）
*   2.3 - 不允许
*   2.4 - 有点不适用，但懒惰的评估是不可能的
*   2.5 - 不。类型系统不是用户可定义的，至少不是 FP 意义上的

所以，这是一个很大的不，我害怕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:10:52.560

不它不是。函数式编程的不同之处在于它将计算视为对数学函数的评估[（参见维基百科）](http://en.wikipedia.org/wiki/Functional_programming)。PLC 编程中的功能块只是一种方便的方式来分组和重用代码，即使“非程序员”也可以使用它。

# java - Selenium 点击操作指向非 Selenium IDE 的页面

> ID：12281682
> 
> 赞同：3
> 
> 时间：2012-09-05T12:41:54.917
> 
> 标签：java, selenium, selenium-ide, selenium-webdriver

我正在尝试使用 Selenium WebDriver(2.21.0) 单击 Web 元素。

当我尝试通过 Selenium IDE 驱动时，它可以正常工作，但是当我使用 Firefox 驱动程序的 Java 实现尝试相同的操作时，它会导致错误的页面。

**当代码正在运行并且我手动滚动到所需的元素时，它可以工作。**

我确保 web 元素可见并使用

```
By by = By.xpath("(//a[contains(@href, 'javascript:void(0);')])[26]"); //**Edit:** this is how i  
                                                                       //am getting the locator

WebElement element = driver.findElement(by);

return (element.isEnabled() || element.isDisplayed()) ? element : null; 
```

它返回一些元素，但不是我期望的元素。

这对我来说看起来很奇怪，因为 Selenium webdriver 主要滚动到一个元素（如果在屏幕上不可见）并执行所需的交互。

我尝试了一些答案，例如[一个](https://stackoverflow.com/questions/12035023/selenium-webdriver-cant-click-on-a-link-outside-the-page)，[两个](https://stackoverflow.com/questions/3401343/scroll-element-into-view-with-selenium)没有成功。

提前致谢！

**编辑：**这是 IDE 的导出代码（java/JUnit4/webdriver）

```
package com.example.tests;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class Bandar {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();
    @Before
    public void setUp() throws Exception {
        driver = new FirefoxDriver();
        baseUrl = "http://e.weibo.com/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testBandar() throws Exception {
        driver.get(baseUrl + "/nescafechina");
        driver.findElement(By.xpath("(//a[contains(@href, 'javascript:void(0);')])[26]")).click();
        driver.findElement(By.xpath("(//a[contains(@href, 'javascript:void(0);')])[12]")).click();
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    }

    private boolean isElementPresent(By by) {
        try {
            driver.findElement(by);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:08:00.503

伊尚克，

我所做的是完成并创建了一个测试，该测试显示了您可以在测试中使用的不同类型的断言。它们看起来确实与你所看到的有点不同，我觉得你的主要问题是`WebElement element = driver.findElement(by);`因为你没有给它一个实际的元素。该`(by);`部分正在寻找可以在页面上找到的字符串。可接受的字符串是；id`("gbfqb");`或 xpath`("(//a[contains(@href, 'javascript:void(0);')])[26]");`甚至 name `("find-button");`。

```
/**
 * Test the main Google page.
 * @throws InterruptedException 
 * 
 */
@Test
public void signUp() throws InterruptedException {

String testId = "TestStack01";

entered(testId);

webDriver.get("www.google.com");
webDriver.findElement(By.id("gbqfq")).clear();
webDriver.findElement(By.id("gbqfq")).sendKeys("Test");
assertEquals("", webDriver.findElement(By.id("gbqfb")).getText());

WebElement whatyourlookingfor = webDriver.findElement(By.id("gbqfb"));
assertTrue(selenium.isElementPresent("gbqfb"));
assertTrue(whatyourlookingfor.isEnabled());
assertTrue(whatyourlookingfor.isDisplayed());
assertFalse(whatyourlookingfor.isSelected());

webDriver.findElement(By.id("gbqfb")).click();

leaving(testId);

} 
```

我希望这有助于获取要返回的元素。

柯蒂斯·米勒

# css - 处理具有固定 em 宽度和高度的图像

> ID：12281691
> 
> 赞同：0
> 
> 时间：2012-09-05T12:42:21.110
> 
> 标签：css

以下是我在基于 em 的布局中处理图像的方式：

```
.model {
    width: 14.5em;
    float: left
    }

.model img {
    width: 100%;
    height: auto;
    } 
```

问题是某些图像的纵横比、尺寸不同，并且会影响布局。

所以我试图在 em 中给图像一个固定的大小。

如果我这样做：

```
.model {
    width: 14.5em;
    float: left
    }

.model img {
    width: 14.5em;
    height: 14em;
    } 
```

高度设置正确，但宽度小于 14.5em。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:50:58.877

尝试使用 max- 和 min- 属性：

```
.model img {
width: 14.5em;
height: 14em;
max-height: 14.5em
min-height: 14.5em
} 
```

为什么不在`img`标签中定义宽度和高度（页面渲染更快）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:27:41.730

当我们重新调整大小时，图像的宽度和高度会出乎意料，请尝试以下方法：

```
.model {
    width: 14.5em;
    float: left
    }

.model img {
    max-width: 14.5em;
    height:auto;
    } 
```

除此以外

```
.model {
    width: 14.5em;
    float: left
    }

.model img {
    width: auto;
    max-height:14.5em;
    } 
```

# java - 在 LoginContext 类中提交身份验证时 LDAP 身份验证不起作用

> ID：12281692
> 
> 赞同：0
> 
> 时间：2012-09-05T12:42:21.393
> 
> 标签：java, jakarta-ee, ldap, jaas

对于新客户端，我必须用 LDAP 替换应用程序的 JAAS 身份验证。
流程转到`javax.security.auth.login.LoginContext`类的 login()。这里有两个步骤来验证

```
// module invoked in doPrivileged
        invokePriv(LOGIN_METHOD);
        invokePriv(COMMIT_METHOD); 
```

`invokePriv(LOGIN_METHOD);`转到 JAAS 登录类或 LDAP 登录类并以 loginSucceeded = true 的形式返回。
但`invokePriv(COMMIT_METHOD);`LDAP 登录失败。在 API 中对其进行调试时，此行中的状态返回 false

```
boolean status = ((Boolean)methods[mIndex].invoke
                (moduleStack[i].module, args)).booleanValue(); 
```

我对这个问题完全一无所知。因为它是 API 类，所以在调试时我无法看到变量值。
在 LDAP 身份验证期间创建 IntialContext 是否会与 JAAS API 的 LoginContext 混淆。

```
Note: I know there is a JAASLDAP module available. I will be implementing that in next iteration. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:51:51.947

配置的 LoginModule 从其 commit() 方法返回 false。如果它自己的登录方法成功，它应该返回 true。

# magento - 简单的 magento cronjob 扩展

> ID：12281693
> 
> 赞同：1
> 
> 时间：2012-09-05T12:42:25.713
> 
> 标签：magento, cron

我正在尝试编写一个简单的扩展程序，为 magento 注册一个 cron 作业，我似乎在这里遗漏了一些东西。cron 作业从未计划过，在 cron_schedule 表中没有任何条目。我什至尝试在那里输入一个，但这项工作从未执行。默认的 magento cron 作业运行良好。通过查看 /var/log/syslog 我可以看到正在执行的 cron.sh。扩展非常简单。只是一个模型（Observer.php）和 config.xml 应该设置 cron 作业。我觉得自己像个傻瓜。从我在网上阅读的内容来看，这应该很容易设置，但我却一无所获。

这是config.xml的内容

```
<?xml version="1.0"?>
<config>
    <modules>
        <Twobuy_Import>
            <version>1.0</version>
        </Twobuy_Import>
    </modules>
    <global>
        <models>
            <twobuy_import>
                <class>Twobuy_Import_Model</class>
            </twobuy_import>
        </models>
    </global>
    <crontab>
        <jobs>
            <twobuy_import>
                <schedule>
                    <cron_expr>50 13 * * *</cron_expr>  <!-- I set this value to say 10-20-30 minutes in the future, and wait, nothing ever happens -->
                </schedule>
                <run>
                    <model>twobuy_import/observer::parse</model>
                </run>
            </twobuy_import>
        </jobs>
    </crontab>
</config> 
```

这是 app/etc/modules 中的 Twobuy_Import.xml（扩展名显示在 system->configuration->advanced 下）

```
<?xml version="1.0"?>
<config>
    <modules>
        <Twobuy_Import>
            <active>true</active>
            <codePool>local</codePool>
        </Twobuy_Import>
    </modules>
</config> 
```

和 Observer.php

```
class Twobuy_Import_Model_Observer
{
    public function parse()
    {
        $row = 1;
        if (($handle = fopen(Mage::getBaseDir('var')."/orders/Stock/webstock.csv", "r")) !== FALSE)
        {
            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
            {
                if($row++ > 1)
                {
                    if($product = Mage::getModel('catalog/product')->loadByAttribute('sku',$data[1]))
                    {
                        $product = Mage::getModel('catalog/product')->load($product->getEntityId());
                        $product->setPrice($data['3']);
                        $product->setAnalysiscode($data['4']);
                        if($data[5] == 'Y')
                            $stockData['is_in_stock'] = 0;
                        else
                            $stockData['is_in_stock'] = 1;
                        $product->setStockData($stockData);
                        try
                        {
                            $product->save();
                        }
                        catch (Exception $e)
                        {
                           Mage::log('Saving error with the following message: '.$e->getMessage());
                           Mage::log('Saving product:');
                           Mage::log($product->getData);
                           Mage::log('CSV line:');
                           Mage::log($data);
                        }
                    }
                    else
                    {
                        Mage::log('Import error, sku not found: '.$data[1]);
                        Mage::log('CSV line:');
                        Mage::log($data);
                    }
                }
            }
            fclose($handle);
        }
        else
        {
            Mage::log('Import, no csv file found!')
        }
    }
} 
```

这也是我来自系统->配置->系统的cron作业配置：

```
Generate Schedules Every 1
Schedule Ahead for 5
Missed if Not Run Within 20
History Cleanup Every 30
Success History Lifetime 60
Failure History Lifetime 600 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:02:52.743

像这样运行 cron，这样你就会得到一个错误日志来读取：

```
* * * * * /usr/bin/php /home/magento/public_html/cron.php >> /home/magento/public_html/var/log/cron.log 2>&1 
```

[还可以在http://connect20.magentocommerce.com/community/Aoe_Scheduler](http://connect20.magentocommerce.com/community/Aoe_Scheduler)上弹出此扩展程序，它可以让您随时运行 cron 作业，清除计划并重建它。

不，我无法告诉您为什么您的扩展程序无法正常工作，但是，通过记录和控制您的扩展程序，您应该可以轻松上手。

你可能还想要这个：

配置.xml：

```
<events>
  <mymodule_update_stuff>
    <observers>
      <mymodule_update_stuff_handler>
        <type>model</type>
        <class>mymodule/observer</class>
        <method>updateStuff</method>
        <args/>
      </mymodule_update_stuff_handler>
    </observers>
  </mymodule_update_stuff>
</events>
....
<crontab>
<jobs>
  <mymodule_updatestuff>
    <schedule>
      <!--<cron_expr>*/15 * * * *</cron_expr> -->
      <config_path>mymodule/misc/frequency</config_path>
    </schedule>
    <run>
      <model>mymodule/observer::updateStuff</model>
    </run>
  </mymodule_updatestuff>
</jobs>
</crontab> 
```

现在在 system.xml 中：

```
<config>
<sections>
<mymodule translate="label" module="mymodule">
  <label>Whatever</label>
  <tab>catalog</tab>
  <frontend_type>text</frontend_type>
  <sort_order>200</sort_order>
  <show_in_default>1</show_in_default>
  <show_in_website>1</show_in_website>
  <show_in_store>0</show_in_store>
  <groups>
    <misc translate="label">
      <label>Import Options</label>
      <frontend_type>text</frontend_type>
      <sort_order>0</sort_order>
      <show_in_default>1</show_in_default>
      <show_in_website>1</show_in_website>
      <show_in_store>0</show_in_store>
      <fields>
        <frequency translate="label">
          <label>Update Frequency</label>
          <frontend_type>text</frontend_type>
          <sort_order>100</sort_order>
          <show_in_default>1</show_in_default>
          <show_in_website>0</show_in_website>
          <show_in_store>0</show_in_store>
        </frequency> 
```

您现在可以将您的 cron 计划放入模块的管理配置中，而不是将其硬连接到您的 config.xml 中。这使得开发 cron 样式的模块变得更加容易。

# android - 跨多个屏幕尺寸均匀分布视图

> ID：12281698
> 
> 赞同：0
> 
> 时间：2012-09-05T12:42:41.323
> 
> 标签：android, android-tablelayout, spacing

我正在尝试创建一个排名表，但是如果数字变为两位数，它会在不同的手机上推动下一个数字，那么我正在努力使事情均匀排列，该表完全不符合要求等等。所以有人知道我是怎么做到的可以均匀地对齐视图并将数字居中，这样它就不会使所有内容不同步。

理想情况下，我希望它喜欢这样：

```
 8    team         2   5   3   10   0   8  0
 9    team         2   5   3   10   0   8  0
10    team         2   5   3   10   0   8  0
11    team         2   5   3   10   0   8  0 
```

目前它正在这样做

```
8    team         2   5   3   10   0   8  0
9    team         2   5   3   10   0   8  0
10    team         2   5   3   10   15   8  0
11    team         2   5   3   10   0   8  0 
```

这是我的布局：

```
 <?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="20dip"
    android:background="@drawable/bg_tablecell"
    android:orientation="horizontal"
    >
    <TableRow>
  <TextView
        android:id="@+id/position"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="4dip"
        android:text="@string/POS"
        android:textSize="15dip"
        android:textColor="@color/blue"
        android:gravity="center"
         />

    <TextView
        android:id="@+id/TeamName"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="23dip"
        android:ellipsize="end"
        android:gravity="left"
        android:lines="1"
        android:text="@string/Team"
        android:textColor="@color/blue"
        android:textSize="15dip"
        android:textStyle="bold" 
       />

    <TextView
        android:id="@+id/played"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />

    <TextView
        android:id="@+id/won"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />

    <TextView
        android:id="@+id/drawn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />

    <TextView
        android:id="@+id/lost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />

    <TextView
        android:id="@+id/goalsFor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />

    <TextView
        android:id="@+id/goalsAgainst"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
       />

    <TextView
        android:id="@+id/Difference"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
       />

    <TextView
        android:id="@+id/points"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="13dp"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="15dip" 
        />
            </TableRow>
    </TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:37:29.950

我已经添加了六列您可以根据需要添加列

您只需要设置 `android:width`所有冷却器的相同测量值

我的代码是

```
 <?xml version="1.0" encoding="utf-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/lv"
android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent"
android:textColor="#000000">
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="horizontal"
        android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
        <TextView android:id="@+id/t1"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="left"/>
        <TextView android:id="@+id/t2"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="right"/>
        <TextView android:id="@+id/t3"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="left"/>
        <TextView android:id="@+id/t4"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="right"/>
        <TextView android:id="@+id/t5"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="left"/>
        <TextView android:id="@+id/t6"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="right"/>
        <TextView android:id="@+id/t7"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="left"/>
        <TextView android:id="@+id/t8"   android:textColor="#7E3517" android:typeface="sans"
        android:textSize="14sp" android:layout_height="fill_parent" android:layout_width="wrap_content"
        android:layout_weight="1.0" android:width="10dip" android:gravity="right"/>

    </LinearLayout>
</LinearLayout> 
```

# android - Android 应用程序无法在 ICS 中安装

> ID：12281704
> 
> 赞同：1
> 
> 时间：2012-09-05T12:43:08.470
> 
> 标签：android, android-manifest

我有一个使用 Android 2.2 和 API 级别 8 编译的应用程序。它在姜饼设备上完美运行。现在，当我尝试在 ICS 4.0.3 设备上安装相同的 apk 文件进行测试时，出现错误“不幸的是，软件包安装程序已停止”。我是 android 开发的新手，非常感谢任何帮助。

以下是我的 Manifest.xml 文件：-

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.quickshop"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="3" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.VIBRATE" />

<supports-screens
android:largeScreens="true"
/>

<application
android:icon="@drawable/quicklogo"
android:label="@string/app_name" >
<activity
android:name=".SplashScreen"
android:label="@string/app_name">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity
android:name=".QuickShop"
android:label="@string/app_name" >
</activity>
<activity
android:name=".Download"
android:label="@string/app_name" >

</activity>
<activity
android:name=".QuickShopCameraActivity"
android:label="@string/app_name">

</activity>
<activity
android:name=".QuickShopPreviewActivity"
android:label="@string/app_name">
</activity>
<activity
android:name=".QuickShopActionActivity"
android:label="@string/app_name">

</activity>
<activity
android:name=".QuickShopProductDetails"
android:label="@string/app_name">
</activity>
<activity
android:name=".TestActivity"
android:label="@string/app_name">
</activity>

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:47:08.293

```
 <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="15" /> 
```

在清单中添加这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:47:23.083

为了让您的应用程序在 ics 上运行，您必须在清单中包含此属性：

```
<uses-sdk android:minSdkVersion="3" 
      android:targetSdkVersion="15" /> 
```

这样，您的应用程序将兼容从纸杯蛋糕到冰淇淋三明治。

# java - 在包中分组类的约定

> ID：12281705
> 
> 赞同：2
> 
> 时间：2012-09-05T12:43:09.343
> 
> 标签：java, naming-conventions

我一直想知道这些方法中哪一种是最好的：

1)

包：`cars.blue` 类：`CarOne.java`，`CarTwo.java`

包：`cars.red` 类：`CarOne.java`，`CarTwo.java`

2)

包：`cars.blue` 类：`BlueCarOne.java`，`BlueCarTwo.java`

包：`cars.red` 类：`RedCarOne.java`，`RedCarTwo.java`

3)

包裹：`cars`

类：`BlueCarOne.java`, `BlueCarTwo.java`, `RedCarCone.java`,`RedCarTwo.java`

方法 1：将汽车类拆分为不同的包。

方法 2：似乎有点过载，因为汽车类已经可以通过包来区分。但是当你只看类名时，前缀是一个优势，不需要再看它所属的位置。

方法3：将所有汽车放在一个包裹中。

哪种方法最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:45:22.133

我会采用方法 3。因为所有汽车都在同一个包中（所有域类放在一起）。有争议的问题，每个人都可能有自己的兴趣。AFAIK 除了基于用例的判断外，没有针对这些的预定义约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:51:23.197

我认为这取决于您想要实现的目标，但您应该记住该软件包不仅用于分组内容。但是您也可以利用访问修饰符。

如果所有汽车类都应该可以访问某种方法，那么它们应该在一个包中，所以药水 3 很好。

```
package cars;  
public class BlueCarOne {
  void method() {}
}

package cars;

public class BlueCarTwo {
  void method() {}
}

package cars;

public class RedCarOne {
  void method() {}
}

package cars;

public class RedCarTwo {
  void method() {}
} 
```

在这种情况下，只有`cars`包中的类才能调用`method()`.

但是如果你想隐藏一些实现细节`RedCar`并将`BlueCar`它们放入不同的包中。并将应隐藏的方法或字段标记为`package protected`.

干杯，迈克尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:48:49.547

可能您应该创建封装功能块的包。颜色的区别并不真正意味着任何功能差异，因此我也会在这里选择选项 3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:49:03.003

方法 1 主要在两个包相互*排斥的*情况下很有用，即当汽车有一个共同的界面时，红色和蓝色被编译成单独的 JAR，并且一次只存在这两个 JAR 中的一个。当两个包都可能存在时，这个命名会令人困惑。

方法 2 和 3 几乎是等效的，因为它们的名称彼此完全不同。创建一个单独的包（方法 2）可能会也可能不会过大，这取决于在您的应用程序中使用两组类的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T12:49:05.813

否则我将有`model`//包，并执行以下操作`pojo`：`domain`

```
package model;

class Car {
    private String carColor; //Blue, Red
    private String carType;  // One, Two

    // getter and setters

} 
```

# asp.net - 使用时区偏移量计算日期时间值

> ID：12281709
> 
> 赞同：0
> 
> 时间：2012-09-05T12:43:14.950
> 
> 标签：asp.net

我们在英国的服务器上托管了一个应用程序，全世界的客户都可以访问它。我们的客户为他们的公司打开了一个订单，随着时间的推移而增加。他们在设置订单时需要做的一件事是选择订单关闭日期，此时订单将自动关闭并提交。

我们希望在客户选择的日期的午夜（基于时区的当地时间）关闭任何订单，但是当我们考虑不同的时区时，这会带来问题，因为我们的服务器在英国。我们的服务器需要知道在哪个英国时间关闭订单，以便客户在他们的时间午夜看到他们的订单关闭。

我们要求客户在设置帐户时输入他们的时区，因此我们将其作为 .net timezoneinfo id 存储在数据库中。我们还将存储 targetCloseDate，即 2012 年 9 月 30 日（以便向用户显示）。但是，我们需要将目标日期转换为我们的服务器用作订单关闭日期的英国时间。

我们如何进行这种转换？

欢呼翼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:04:39.433

在更多地研究 timezoneinfo 类后，我自己回答了这个问题。您可以使用：

```
 TimeZoneInfo.ConvertTimeBySystemTimeZoneId(orderCloseDate, customerTimeZone, TimeZoneInfo.Local.Id) 
```

这将转换日期时间值 - orderCloseDate 使用源时区和目标时区......完美！

翅膀

# windows - 是否可以在 DDK 项目中使用网络套接字？

> ID：12281710
> 
> 赞同：0
> 
> 时间：2012-09-05T12:43:17.287
> 
> 标签：windows, networking, driver, wdk

由于 DDK 项目中没有 WinSock 和其他套接字 C 库，那我应该使用什么？我需要使用 TCP 协议进行通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:34:44.747

您将使用 Winsock 内核 (WSK) API。您可以在 src\network\wsk\echosrv 中找到示例代码。

# bash - 如何使用 find 捆绑文件

> ID：12281712
> 
> 赞同：0
> 
> 时间：2012-09-05T12:43:22.267
> 
> 标签：bash, find, bundle

我正在努力完成这项任务：

> 编写一个脚本，将目录（路径）名称和文件名库（例如“.”、“*.txt”等）作为输入。该脚本将搜索给定的目录树，找到与给定文件名匹配的所有文件，并将它们捆绑到一个文件中。将给定文件作为脚本执行应返回原始文件。

谁能帮我？

首先，我尝试像这样进行查找部分：

```
#!/bin/bash

filebase=$2
path=$1

find $path \( -name $base \) 
```

然后我找到了这个捆绑代码，但我不知道如何组合它们。

```
for i in $@; do
 echo "echo unpacking file $i"
 echo "cat > $i <<EOF"
 cat $i
 echo "EOF"
 done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:47:39.623

Going on tripleee's comment you can use `shar` to generate a self extracting archive. You can take the output of `find` and pass it through to `shar` in order to generate the archive.

```
#!/bin/bash

path="$1"
filebase="$2"
archive="$3"

find "$path" -type f -name "$filebase" | xargs shar > "$archive" 
```

The `-type f` option passed to `find` will restrict the search to files (i.e. excludes directories), which seems to be a required limitation.

If the above script is called `archive_script.sh`, and is executable, then you can call it as below for example:

```
./archive_script.sh /etc '*.txt' etc-text.shar 
```

This will create a `shar` archive of all the .txt files in /etc.

# jquery - 基于文本的选项选择器

> ID：12281719
> 
> 赞同：0
> 
> 时间：2012-09-05T12:43:35.107
> 
> 标签：jquery

SO上的任何地方都只有选择器 via `value`，但我想`option`根据它的文本进行选择。

例如，我有这个：

```
<select id="some-id">
    <option>1</option>
    <option>2</option>
</select> 
```

如何获得文本等于“2”的选项？像这样的东西：

```
jQuery("#some-id option[text='2']") 
```

但这对我不起作用，应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:45:06.033

您可以使用[`:contains`](http://api.jquery.com/contains-selector/)选择器：

```
var option = jQuery("#some-id option:contains('2')"); 
```

这是一个[工作示例](http://jsfiddle.net/eNzuf/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T12:46:28.253

像这样的东西应该可以工作：

```
$("#some-id option").filter(function() { return $(this).text() == '2'; }); 
```

# powerbuilder - 可执行相关问题

> ID：12281723
> 
> 赞同：1
> 
> 时间：2012-09-05T12:43:43.107
> 
> 标签：powerbuilder

我们有一个在 PowerBuilder 9 中开发的应用程序。

问题是我们已经实现了一个更改密码的窗口。在窗口中，我们有一个旧密码字段。当我们通过 EXE 更改密码时，它不允许我们输入超过 8 个字符的密码。但是我们现有的密码有 9 个字符。

检查以下属性：

1.  旧密码字段大小。（没有限制）
2.  通过 PB 9 IDE 执行应用程序（没问题，我也可以输入超过 8 个字符）。
3.  该问题仅发生在已编译的 EXE 上。
4.  检查桌面主题（不走运）

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:05:58.900

不确定为什么两个版本之间的文本大小可能不同，但如果不同，可能由于`AutoHScroll`文本字段的禁用属性而无法输入所有具有较大字体的文本？

我意识到不同的显示可能来自编译属性`Windows classic style`选项 `General`卡中的选项。

# c# - 添加包含占据整个 WPF Datagrid 区域的文本的单行

> ID：12281732
> 
> 赞同：0
> 
> 时间：2012-09-05T12:44:33.540
> 
> 标签：c#, wpf, wpfdatagrid

我有一个 WPF 数据网格，我想在数据网格中间显示一条消息“未找到记录”。

我可以看到这样做的一种方法是添加一个跨越所有列的单个数据行，其高度是数据网格的高度，然后将行中的文本居中。

我挣扎的主要事情是以编程方式将行添加到数据网格中。

这是可能的还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:56:51.717

您可以像这样以编程方式将项目添加到数据网格：

```
myDataGrid.Items.Add(new MyDataGridItem()); 
```

如果您已将数据网格的 ItemsSource 设置为某个集合或其他内容，则需要修改该集合。你可以这样做：

```
myCollection.Add(new MyDataGridItem());
myDataGrid.ItemsSource = null;
myDataGrid.ItemsSource = myCollection; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:58:41.747

将“未找到记录”消息放在 a 中，并根据是否有数据`TextBlock`显示/隐藏。`TextBlock``DataGrid`

```
<Grid>

  <DataGrid x:Name="_dataGrid" />

  <TextBlock 
    HorizontalAlignment="Center"
    VerticalAlignment="Center"
    Visibility="{Binding ElementName=_dataGrid, Path=HasItems, Converter={StaticResource BooleanToInverseVisibilityConverter}, Mode=OneWay}">
      No Records Found
  </TextBlock>

</Grid> 
```

编辑：来源`BooleanToInverseVisibilityConverter`（在我的 WPF 项目中，我有一堆像这样的方便的转换器总是可供我使用）

```
public class BooleanToInverseVisibilityConverter : IValueConverter {

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        return (bool) value ? Visibility.Collapsed : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        return null;
    }

} 
```

# git - 如何诊断/修复 git repo

> ID：12281734
> 
> 赞同：0
> 
> 时间：2012-09-05T12:44:35.680
> 
> 标签：git, repository, commit

在涉及重置的本地存储库的提交后，我们的中央 git 存储库进入了一个奇怪的状态。

我不能 100% 确定这次提交中到底做了什么，但是在这次提交之后，当从这个重置的本地存储库推送内容时，来自其他提交的更改可以被旧版本静默覆盖（​​“静默”意味着覆盖其他提交不会出现在更改历史记录中）。

我的问题是：
（1）我如何诊断发生了什么（最好没有访问重置的本地仓库）？
(2) 如果我无法查明发生了什么，摆脱这种状态的最佳行动方案是什么？

对于（2）我正在考虑（a）丢弃有问题的本地仓库并且不再使用它，（b）在有问题的提交之前硬重置中央仓库并手动重播不包括有问题的提交的提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:20:42.637

您可以使用`git show <commit-id>`. 不知道“其他提交的覆盖不会出现在更改历史记录中”是什么意思，git中没有*覆盖*之类的东西，只有提交。

那么，您已经确定了一个有问题的提交？刚刚的`git revert`时候。

或者一个分支被强制推送重写（一些提交从历史中消失了）？更糟糕的是，您应该使用它，`git fsck −−lost-found`直到它被垃圾收集为止。

下次配置中央存储库以禁止非快进`receive.denyNonFastForwards=true`或至少启用 reflogs `logAllRefUpdates=true`。

# java - 关于 eclipse 中向后搜索模式的快捷方式

> ID：12281736
> 
> 赞同：2
> 
> 时间：2012-09-05T12:44:42.803
> 
> 标签：java, eclipse

我对 Eclipse 快捷方式有疑问。假设我有一个 java 类，如下所示：

```
class As
{
    int i=10;
    public void test1(){
        System.out.println("test1 A");
    }
}

class Bs extends As
{
    int i=10;
    public void test1(){
        System.out.println("test1 B");
    }
}

public class Cvb 
{
    public static void main(String []args)
    {
        As b = new Bs();
        System.out.println(b.i);
        b.test1();
    } 
```

现在，如果我`test1()`用鼠标选择并按下`CTRL+K`，它将带我到下一个出现的`test1()`，换句话说，它将沿增量方向前进。我正在寻找的是一个 Eclipse 快捷方式，它将在向后的方向上做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:49:54.127

添加`Shift`到命令：`Ctrl+Shift+K`将反向搜索当前的选择/搜索模式。

# actionscript-3 - 闪存开发？我还需要Flash CS吗

> ID：12281737
> 
> 赞同：0
> 
> 时间：2012-09-05T12:44:43.460
> 
> 标签：actionscript-3, flash, flashdevelop

我对 Flash 和 AS3 还很陌生。

我的问题是我真的还需要使用 Flash CS6 来设置舞台和库文件吗？

或者这一切都可以从 FlashDevelop 完成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:04:07.077

Flash CS6 是一个类似于 Photoshop 的应用程序，您通常使用它来创建/构造/定位图形资源，然后使这些动画（从关键帧到关键帧）成为可能，然后从代码中访问图形内容。

所以，答案是否定的，您可以在没有 Flash 的情况下创建 SWF 文件，您可以在没有 Flash 的情况下嵌入要在 AS3 代码中使用的内容，您可以使用 flex-components 并在没有 Flash 的情况下定位它们。

但是像这样创建任何更大的项目都是没有必要的，因为你也可以使用其他语言或工具来做这类事情。旨在执行此特定操作的工具和语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:59:38.187

几个月前，我完全切换到 FD，从今天开始，我只在 FD 中成功构建了所有东西。原因是我有一个庞大的项目要发布，由于 JVM 编译器的内存不足，我无法在 Flash 中编译它。使用FD这不是问题。

所以简而言之，不，你不再需要闪光灯了。

虽然可能有些东西在 Flash 中比在 FD 中创建更快、更容易（例如：一些时间线动画，然后发布到 SWC 以与 FD 一起使用）。

我仍然安装了 Flash，以防快速动画工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:05:30.263

这取决于。如果您需要使用在 Flash 中绘制的矢量图形，那么将它们合并到您的项目中的最简单方法是使用基于 IDE 的项目 ( [http://www.flashdevelop.org/wikidocs/index.php?title=Projects #AS3_Flash_IDE_Project](http://www.flashdevelop.org/wikidocs/index.php?title=Projects#AS3_Flash_IDE_Project)）。这不是唯一的方法，但它比将它们打包并使用库更容易。在这种情况下，您实际上将 FD 用作外部 AS 编辑器（为此值得这样做，因为它比 Flash Pro 内置的编辑器要好得多*。*

另一方面，如果您正在处理用代码、文本或外部位图绘制的对象，那么不，根本不需要使用 CS*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:45:41.740

OOP 的优势在于拥有像 Flash 这样的环境来进行布局。作为一名设计师，这对我来说非常重要，当使用适当的类结构正确实施时，它会变得非常强大。这实际上取决于您使用 as3 的目的。我发现 Flash 架构在界面设计方面是最有利的，但对于游戏或“静态”交互等事物，有时在代码中完成所有工作并在 Flash 之外编译会更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:57:45.603

如果您想创建图形对象以便稍后在代码中使用它们，则需要它。另一种方法是通过代码创建所有内容

# javascript - 删除第一个视图并创建第二个视图 (backbone.js)

> ID：12281749
> 
> 赞同：3
> 
> 时间：2012-09-05T12:45:23.803
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在开发以下功能：当用户单击页面上的照片时，会`modalView`出现一个模式，其中包含该项目的更多详细信息。在`modalView`中，用户可以单击另一个项目的照片，这将关闭第一个模态窗口`modalView`并打开一个新的模态窗口`modalView`，其中包含下一个项目的完整详细信息。s的打开和关闭`modalView`由路由器函数处理。

*（用户可能会遇到闪烁，但这是另一个问题）*

**问题：**当用户点击其中另一个项目的照片时`modalView`，`showModal()`会导致当前`modalView`关闭并且URL更新为下一个项目的URL `/product/1234`，但是新的`modalView`没有出现！使用`console.log()`调试，我发现第一个`modalView`关闭，第二个`modalView`打开然后关闭！

发生了什么，如何解决？

**路由器**

```
var AppRouter = Backbone.Router.extend({
    routes: {,
        'product/:id': 'showModal'
    },

    showModal: function(id) {
        // Close any existing ModalView
        if(app.modalView) {
            app.modalView.closeModal();
            console.log('closing');
        }

        // Create new ModalView
        app.modalView = new ModalView({ model: new Product({id:id}) });
        console.log('creating new');
    }

});

app = new AppRouter();
Backbone.history.start({
    pushState: true,
    root: '/'
}); 
```

**看法**

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    events: {
        'click .more_photo': 'showModal',
    },

    initialize: function() {
        // Update Model with Full details
        var self = this;
        this.model.fetch({
            data: {post_id: self.model.get('id')},
            processData: true,
            success: function() {
                self.render();
        });
    },

    render: function() {
        $(this.el).show().append( this.template( this.model.toJSON( this.model ) ) );
    },

    closeModal: function() {
        // Restore scrollbars
        $(this.el).css('overflow-y', 'auto');
        $('body').removeClass('noscroll');

        // Close modal and remove contents
        $(this.el).fadeOut();
        $(this.el).empty();
    },

    showModal: function() {
        // Update URL & Trigger Router function `showModal`
        app.navigate('/product/' + this.model.get('id'), {trigger:true});
    }
}); 
```

**Console.log 输出**

```
creating new
               <----clicks on another photo
closing
creating new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:27:04.020

根据您提供的代码，我不确定为什么您的`closeModal`方法可能会触发两次，我已经从您的代码中创建了一个简化版本，并且该方法每次只调用一次（当然我即兴创作了一点，所以也许有与它有关）。

作为每次您可能想尝试仅交换模型时关闭并重新打开模态视图的替代方法。

例如

```
 showModal: function(id) {

        if(app.modalView) {
            app.modalView.model = new Product({id:id});
            app.modalView.model.fetch();
        } else {
           app.modalView = new ModalView({ model: new Product({id:id}) });
        }
    } 
```

# c# - 知道另一个类中很长的函数（执行时间）的状态

> ID：12281750
> 
> 赞同：1
> 
> 时间：2012-09-05T12:45:28.203
> 
> 标签：c#, .net, wpf, visual-studio-2010

目前我有一个后台线程，其 doWork 调用类似于下面的函数。

```
private void ThreadForAnalyzingReqFile_DoWork(object sender, DoWorkEventArgs e) 
{
    AnotherClass.AVeryLongTimedFunction();
} 
```

现在，代码将等到AnotherClass中的**AVeryLongTimedFunction** **()**完成（这可能需要大约 1-2 分钟）虽然发生这种情况，但我怎么知道到底发生了什么？有什么方法可以通知我函数（在另一个类中）完成？

 **这个线程在我的 WPF 的 MainWindow 类中。我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:50:49.487

尝试将回调函数传递给您的“VeryLongTimedFunction”，并在每次发生某种“进度”事件时调用它，例如每次处理 50 个项目，或进行 20 次迭代，或者您的操作是什么情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:51:03.040

有很多方法可以做到这一点。两个简单的选择：

(1) 在您的 UI 类中创建一个事件，例如`UpdateProgress`，并以有意义的时间间隔通知该事件

例子：

```
 private void ThreadForAnalyzingReqFile_DoWork(object sender, DoWorkEventArgs e)
    {
        AnotherClass processor = new AnotherClass();
        processor.ProgressUpdate += new AnotherClass.ReallyLongProcessProgressHandler(this.Processor_ProgressUpdate);
        processor.AVeryLongTimedFunction();
    }

    private void Processor_ProgressUpdate(double percentComplete)
    {

        this.progressBar1.Invoke(new Action(delegate()
        {
            this.progressBar1.Value = (int)(100d*percentComplete); // Do all the ui thread updates here
        }));
    } 
```

在“另一个班级”中

```
public partial class AnotherClass
{
    public delegate void ReallyLongProcessProgressHandler(double percentComplete);

    public event ReallyLongProcessProgressHandler ProgressUpdate;

    private void UpdateProgress(double percent)
    {
        if (this.ProgressUpdate != null)
        {
            this.ProgressUpdate(percent);
        }
    }

    public void AVeryLongTimedFunction()
    {
        //Do something AWESOME
        List<Item> items = GetItemsToProcessFromSomewhere();
        for (int i = 0; i < items.Count; i++)
        {
            if (i % 50)
            {
               this.UpdateProgress(((double)i) / ((double)items.Count)
            }
            //Process item
        }
    }
} 
```

(2) 在 上创建进度百分比字段`AnotherClass`。偶尔在你的 UI 中的计时器上询问这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:02:54.237

正如其他人暗示的那样，有多种方法可以实现这一目标，但最简单的方法似乎只是使用`BackgroundWorker`而不是线程。

要指示进度，只需将`WorkerSupportsCancellation`属性设置为 true，然后调用`worker.ReportProgress(percentage complete)`以指示进度。对于完成通知使用事件通知，例如

```
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(method_run_on_complete);
private void method_run_on_complete(object sender, DoWorkEventArgs e) { ... } 
```

有关更多详细信息，请参阅：

[http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c%23/](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c%23/)

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/28774446-144d-4716-bd1c-46f4bb26e016](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/28774446-144d-4716-bd1c-46f4bb26e016)**

# javascript - .find 和 .contents 不起作用

> ID：12281752
> 
> 赞同：2
> 
> 时间：2012-09-05T12:45:33.293
> 
> 标签：javascript, jquery, html

我有一个条件，如果我的父母`div`有孩子上课，`.ads`那么它应该`alert('true')`是其他`alert('false')`的。但是我的函数`true`在这两种情况下都会返回。这是 jsFiddle 链接[http://jsfiddle.net/F3EXf/](http://jsfiddle.net/F3EXf/)

```
<head>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function(){
            if($('#me').find('.ads')){
                alert('true')
            } else {
                alert('false')
            }
        });
    </script>
</head>
<body>
    <div id="me">
        <div class="noads">aaaa</div>
    </div>
</body> 
```

嗨 vega 请看下面的截图

![在此处输入图像描述](../Images/e74ed7b09d906cb24b3a27c24df69499.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T12:47:33.343

要检查元素是否存在，请改用

```
if ($('#me').find('.ads').length) {
   ...
} 
```

由于`$('#me').find('.ads')`将始终返回 true（它返回一个评估为 true 值的 jQuery 包装的空对象），即使目标元素`find()`不存在

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:06:25.450

所有 jQuery[**选择器**](http://api.jquery.com/category/selectors/)和[**遍历**](http://api.jquery.com/category/traversing/)函数都返回一个 jQuery 对象。jQuery 对象是一个类数组对象，具有属性和对核心函数的引用。

[显示 jQuery 对象http://jsfiddle.net/Tj9e8/1/](http://jsfiddle.net/Tj9e8/1/)中随时可用的属性和函数列表的小示例

当您将 jQuery 函数调用为`$(selector)`时，它会创建一个 jQuery 对象，其中包含基于选择器的匹配元素的包装列表。

例如：当你这样做时`$('#test')`，它会创建一个 jQuery 对象并用 ID 包装 DOM 元素`test`。

检查 jQuery 函数中的以下代码片段`.init`以处理 ID 选择器

```
elem = document.getElementById(match[2]); 
//match[2] is string 'test' in '#test' that was passed to $('#test')

if (elem && elem.parentNode) {
   if (elem.id !== match[2]) {
      return rootjQuery.find(selector);
   }
   //below 2 lines allows the jQuery object to behave like array like objects
   this.length = 1;
   this[0] = elem; //elem is nothing but the dom node.
}
this.context = document;
this.selector = selector;
return this; //Returns jQuery object 
```

[有关更多信息，请查看`.init`功能代码](http://james.padolsey.com/jquery/#v=git&fn=init)

下面是截图`$('#test')`。

![在此处输入图像描述](../Images/56fa8fcb830d26074a36aae88e62a1a8.png)

如您所见，长度为 0，但 $ 函数仍返回长度为 0 的 jQuery 对象。这是为了保护下一个链式调用而不是引发错误。

在大多数情况下，我们选择一个元素在其上运行某些功能。

**例如：** `$('#test').addClass('example')`。

1.  `$('#test')`使用字符串参数调用的 jQuery 函数`'#test'`
2.  上面的 jQuery 调用`.init`来确定参数的类型并返回一个包含匹配元素的 jQuery 对象（如果有，否则只是 jQuery 对象）。
3.  调用`.addClass`jQuery 对象，该对象在内部迭代匹配元素的列表并将类添加到元素中。以下是`.addClass`功能代码的片段

    ```
    if (value && typeof value === "string") {
        classNames = value.split(core_rspace);
        for (i = 0, l = this.length; i < l; i++) { 
        //^-- This is where it iterate over matched elements
            elem = this[i];
            if (elem.nodeType === 1) { 
    ```

现在要注意的是，

1.  $ 函数总是返回一个 jQuery 对象
2.  jQuery 对象只不过是一个带有以下内容的 javascript 对象

    一个。包装的匹配元素集[使用 .find 的示例](http://jsfiddle.net/Tj9e8/4/)

    湾。properties -[列出属性的示例](http://jsfiddle.net/Tj9e8/2/)

    C。函数 -[列出函数的示例](http://jsfiddle.net/Tj9e8/3/)

**HTML：**

```
<ul>
    <li>Test</li>
    <li class="red">Test</li>
    <li>Test</li>
    <li class="red">Test</li>
</ul> 
```

**JS：**

```
var $lisample = $('ul').find('.red'); 
```

由于`.find`如下所示，不是包装的匹配元素集，

![在此处输入图像描述](../Images/419c0dc838e7f7e51d86e1ab4b43ac9a.png)

## 更多阅读

1.  [jQuery 对象如何模仿数组？](https://stackoverflow.com/questions/1483445/how-do-jquery-objects-imitate-arrays)
2.  [jQuery 对象和 DOM 元素](https://stackoverflow.com/questions/6974582/jquery-object-and-dom-element)
3.  [http://blog.buymeasoda.com/does-calling-the-jquery-function-return-an-ob](http://blog.buymeasoda.com/does-calling-the-jquery-function-return-an-ob)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:02:24.707

我通常这样做：

```
if(typeof variable != 'undefined') 
```

所以在你的情况下：

```
if(typeof variable[0] != 'undefined'){ 
```

因为[.find](http://api.jquery.com/find/)函数返回一个数组。

**代码**

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $(function(){
                var variable = $('#me').find('.ads');
                if(typeof variable[0] != 'undefined'){
                    alert('true')
                } else {
                    alert('false')
                }
            });
        });
    </script>
</head>
<body>
    <div id="me">
        <div class="noads">aaaa</div>
    </div>
</body>
</html> 
```

您可以在`typeof variable != 'undefined'` [此处](https://stackoverflow.com/questions/1485840/whether-a-variable-is-undefined)找到有关信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:49:15.767

```
 $(function () {
        if ($('#me').find('.ads').length>0) {
            alert('true');
        } else {
            alert('false');
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:01:08.950

小提琴链接：http: [//jsfiddle.net/F3EXf/8/](http://jsfiddle.net/F3EXf/8/)

1.如果需要查找元素的子元素，请立即使用 Children()。2.另外，尝试计算选择器产生的元素，然后确定它是否可用

```
$(function(){
    var children = $('#me').children('.noads');
if(children.length > 0){
    alert('true')
    }

    else {
        alert('false')

        }
}) 
```

​</p>

对于演示，查找上面提供的小提琴链接。

要回答您的问题，如果元素不存在，为什么它会发出警报。

1.  它返回一个空数组但不是空数组...这意味着它在结果对象中有一些信息但长度为“零”但实际上它不是空或未定义

# c++ - 带有指向成员函数的指针作为参数的模板类构造函数

> ID：12281754
> 
> 赞同：0
> 
> 时间：2012-09-05T12:45:41.823
> 
> 标签：c++, templates, function-pointers

我有以下设置，这让我很头疼，因为我没有看到问题：

```
ValidationModule module = ValidationModule(std::vector<FilterFlag>(0));
Settings validationSettings = Settings("Validation Settings");
validationSettings.registerFloat("test", module, &ValidationModule::setRatio, &ValidationModule::getRatio, 0.0f, 1.0f); 
```

`registerFloat`有两个指向成员函数的指针`ValidationModule`

验证模块.h

```
// constructor
ValidationModule(const std::vector<FilterFlag>& filterFlags, float ratio = 0.7f);

// getter and setter, which are passed to Settings::registerFloat
inline void setRatio(float value) { _ratio = value; }
inline float getRatio() const { return _ratio; } 
```

设置.h

```
template<class TClass>
inline void Settings::registerFloat(const std::string& name, TClass owner, void (TClass::*setter)(float), float (TClass::*getter)() const, float minValue, float maxValue)
{
    CallBackToMemberSingleArg<float, TClass>* setterCallback = new CallBackToMemberSingleArg<float, TClass>(owner, setter);
    CallBackToMemberReturn<float, TClass>* getterCallback = new CallBackToMemberReturn<float, TClass>(owner, getter);
    // some unrelated processing
    [...]
} 
```

**编译器为**`CallBackToMemberSingleArg`和的两个构造函数给了我以下错误`CallBackToMemberReturn`：

```
No matching constructor for initialization of 'CallBackToMemberSingleArg<float, ValidationModule>'
No matching constructor for initialization of 'CallBackToMemberReturn<float, ValidationModule>' 
```

这是构造函数声明

回调.h

```
template <typename TParam>
class CallBackSingleArg
{
public:
    virtual ~CallBackSingleArg() { }
    virtual void call(const TParam& p) = 0;
};

template <typename TParam, typename TClass>
class CallBackToMemberSingleArg : public CallBackSingleArg<TParam>
{
    void (TClass::*function)(const TParam&);
    TClass* object;
public:
    CallBackToMemberSingleArg(TClass* object, void(TClass::*function)(const TParam&)) : object(object), function(function) { };
    void call(const TParam& p) {
        (*object.*function)(p);
    }
};

template <typename TParam>
class CallBackReturn
{
public:
    virtual ~CallBackReturn() { }
    virtual TParam call() = 0;
};

template <typename TParam, typename TClass>
class CallBackToMemberReturn : public CallBackReturn<TParam>
{
    TParam (TClass::*function)();
    TClass* object;
public:
    CallBackToMemberReturn(TClass* object, TParam(TClass::*function)()) : object(object), function(function) { };
    TParam call() {
        return (*object.*function)();
    }
}; 
```

我试图将实际的 setter 更改为`void setRatio(const float& value)`，因为`CallBackToMemberSingleArg`它需要一个 const 引用参数，但这并没有帮助，而且对构造函数的调用也`CallBackToMemberReturn`给出了上述错误，所以肯定还有其他东西，我看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:00:24.893

您将 a`TClass`作为第一个参数传递给`CallBackToMemberSingleArg`构造函数，但 a`TClass*`是预期的。

# java - 通过下载另一个应用程序来扩展应用程序

> ID：12281755
> 
> 赞同：1
> 
> 时间：2012-09-05T12:45:50.657
> 
> 标签：java, android, google-play, android-billing

我有一个尚未发布的 android 应用程序，但我希望它是可扩展的。

所以我想做的是：您从市场上下载应用程序“XYZ”，例如音频播放器。

用户现在可以播放他自己的音频文件（从系统中选择文件），或者他可以从市场“XYZ 音频包”下载另一个应用程序。

我已经看到与可用的“主屏幕”类似的东西。他们提供主屏幕应用程序，每次下载其他“应用程序”，您都可以扩展可能性。

你如何在技术上做到这一点？

# c# - 从 cmd 运行 C# 应用程序

> ID：12281757
> 
> 赞同：-6
> 
> 时间：2012-09-05T12:45:55.897
> 
> 标签：c#, exe

我已经在 c# 中创建了一个应用程序，现在它可以正常工作了，我希望该 exe 应该能够从命令提示符运行。应用程序输入一个 .txt 文件并生成 .txt 文件

**例如：-C:\user\abc>xyz.exe INPUT.txt**

**C:\user\abc>OUTPUT.txt 已保存。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:47:28.330

您需要为您的控制台应用程序使用[命令行参数](http://msdn.microsoft.com/en-us/library/cb20e19t.aspx)，以便您可以将参数从命令行传递给程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T11:06:22.163

如果您在 PC 上安装了 Visual Studio，则可以使用 VS 的开发人员命令提示符。您可以找到如下所示的开发人员命令。

开始 => VS 的开发人员命令提示符

然后你可以使用命令行参数来传递你的文本文件。实际上文本文件的位置是一个字符串。该字符串将被 main 方法捕获。这就是 main 方法有一个字符串数组的原因。您可以从 main 方法内的字符串数组参数中获取您传递给程序的所有参数。

`static void main(string[] args)`

# python - Qt 的米勒专栏？

> ID：12281758
> 
> 赞同：0
> 
> 时间：2012-09-05T12:46:01.463
> 
> 标签：python, user-interface, qt4, pyqt

有没有一种简单的方法可以在 Qt4 中拥有类似 iTunes 的界面（带有[Miller Columns](https://en.wikipedia.org/wiki/Miller_columns)），还是我必须自己创建一个 MillerColumnWidget？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:55:14.230

我对“Miller Columns”一词不熟悉，但描述表明[QColumnView](http://doc.qt.nokia.com/4.7-snapshot/qcolumnview.html)是合适的。

# android - Android - 如何为整个应用设置自定义字体

> ID：12281761
> 
> 赞同：25
> 
> 时间：2012-09-05T12:46:13.560
> 
> 标签：android, text, fonts

> **可能重复：**
> [是否可以为整个应用程序设置字体？](https://stackoverflow.com/questions/2711858/is-it-possible-to-set-font-for-entire-application)

我需要为整个应用程序设置自定义字体（.ttf 格式），我该怎么做？如果可能，来自 Manifest 或 XML 将是最佳选择

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-05T12:53:52.417

**编辑 2014 年 9 月：**

对于仍然看到这个旧的可怕答案的人来说，真正的好答案就在这里：

[https://stackoverflow.com/a/16883281/1154026](https://stackoverflow.com/a/16883281/1154026)

* * *

**老的：**

你最好的选择是：

[自定义 Android 字体](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

所以

```
 TextView text = (TextView) findViewById(R.id.custom_font);
    Typeface font = Typeface.createFromAsset(getAssets(), "yourfont.ttf");
    text.setTypeface(font); 
```

将您的 .ttf 放在“assets”文件夹的根目录中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T13:16:00.860

你可以这样做。创建一个自定义文本视图并在任何地方使用它

```
public class MyTextView extends android.widget.TextView
{

    public MyTextView(Context context)
    {
        this(context, null);
    }

    public MyTextView(Context context, AttributeSet attrs)
    {
        this(context, attrs, 0);
    }

    public MyTextView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs);
        if (this.isInEditMode()) return ;

        final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.SomeStyle);
        final String customFont = a.getString(R.styleable.SomeStyle_font);

        //Build a custom typeface-cache here!
        this.setTypeface(
            Typeface.createFromAsset(context.getAssets(), customFont)
        );  
    }
} 
```

将此添加到 attrs.xml

```
<declare-styleable name="SomeStyle">
    <attr name="font" format="string" />
</declare-styleable> 
```

然后在您的主题中，执行以下操作：这将确保所有文本视图都将使用样式 MyTextView

```
<item name="android:textViewStyle">@style/MyTextView</item> 
```

现在我们可以使用这种样式中的自定义属性来定义您的自定义字体。

```
<style name="MyTextView" parent="@android:style/Widget.TextView">
    <item name="font">MyPathToFontInAssets.ttf</item>
</style> 
```

所以每当你在项目中使用 MyTextView 时，它都会有你的自定义字体。

**重要提示：**字体不会被缓存，因此如果您打算使用此代码，您还应该构建一个自定义字体缓存，以便您可以为所有文本视图重新使用自定义字体。这将显着加快应用程序！

**更新：正如 Amir 所说，这与**[自定义字体和 XML 布局 (Android)](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android/7197867#7197867)几乎相同，但我也使用 android 样式自动在应用程序中的所有文本视图上使用它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-05T12:58:47.333

创建一个 TextView 子类并在任何地方使用它

```
 public class RobotoTextView extends TextView {

    public RobotoTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public RobotoTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public RobotoTextView(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Light.ttf");
            setTypeface(tf);
        }
    }

} 
```

用法

```
<com.test.RobotoTextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        /> 
```

在java代码中，您可以将其转换为 TextView

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-05T12:53:27.603

```
TextView tv=(TextView)findViewById(R.id.custom);
    Typeface face=Typeface.createFromAsset(getAssets(),
                                          "fonts/Verdana.ttf");

    tv.setTypeface(face); 
```

将字体文件放在 /res/ 的字体文件夹中

喜欢我的回答，如果有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T13:04:25.533

[您可以按照此处](https://stackoverflow.com/a/7197867/1545562)的建议扩展 TextView并在其上设置您的字体，然后在整个应用程序中使用它。

# mysql - 是否可以在 mysql 的全文搜索中搜索整个给定的单词

> ID：12281763
> 
> 赞同：0
> 
> 时间：2012-09-05T12:46:20.437
> 
> 标签：mysql, full-text-search

我在 3 列上使用带有 mysql 的全文搜索。假设数据如下：

1.  第 1 行包含两列，分别为“Greater Noida Expressway”和“Sector 91”。
2.  第 2 行包含两列，分别为“Ho Chi Minh Marg”和“Greater Kailash 2”。
3.  第 3 行包含两列，分别为“Rohini”和“Sector 91”

现在，如果我查询

```
SELECT * FROM trafficker.traffics WHERE MATCH (column1, column2) AGAINST ('Greater Noida'); 
```

上面的查询将产生前两行，因为匹配将在“Greater”和“Noida”上完成。在第 2 行的“Greater Kailash”中也可以找到“Greater”：|

有什么办法可以阻止对“空间”的搜索，并将大诺伊达视为一个搜索词组，而不是用“空间”分隔？

这将非常有用，因为它将帮助我过滤噪声，因为实际数据将非常庞大..

提前致谢！

**编辑：** 另一个问题是，如果我搜索扇区 91。它只会搜索扇区并忽略 91（因为它少于四个字符）。除了下载源代码并编译之外，还有什么方法可以解决这个问题。因为我确信它不会在共享服务器上工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:20:18.977

检查“布尔模式”选项：

[http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)

您可以将单词括在引号中，例如：

```
SELECT * FROM trafficker.traffics WHERE MATCH (column1, column2) AGAINST ('"Greater Noida"' IN BOOLEAN MODE); 
```

这应该让你接近你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T12:11:32.313

我们可以通过在布尔模式下在搜索短语之前添加 + 和 - 来定义搜索的优先级

*   包括那个词
*   排除这个词 For Eg

    `SELECT * FROM trafficker.traffics WHERE MATCH (column1, column2) AGAINST ('"+mobile -nokia"' IN BOOLEAN MODE);`

# jquery - JQuery，ajax逻辑问题

> ID：12281765
> 
> 赞同：0
> 
> 时间：2012-09-05T12:46:28.473
> 
> 标签：jquery, ajax, mobile, logic

我的代码有一些问题。我想我会在这个网站上与伟大的思想家分享我的问题，看看是否有人可以给我的大脑一些关于如何解决它的指示。

我正在开发一个应用程序（JQuery、PhoneGap）并且我有一个登录功能。登录功能将登录凭据发送到 Web 服务。所以我使用 JQUery ajax 发送它。该网络服务还包含一个 fetchData 函数，让我的客户端获取一些数据。网络服务将检查我当前是否已登录以及我的会话是否超时。如果超时，我需要再次登录。然后再试一次。这是用户永远不会看到的。loginUser() 是一个在我的代码中多次使用的函数。所以不想摆弄它，所以我必须做出很多改变。

所以这里有一些伪代码：

```
function loginUser()
{
$.ajax(
{
    ....
    success: function(data,status)
    {
        //everything worked great
        return true;
    },
    error: function(data,status)
    {
        //display some user error stuff.
        return false;
    },
});  
}

function getData()
{
$.ajax(
{
    ...
    success: function(data,status)
    {
        //everything worked great. No need to login user again.
    },
    error: function(data,status)
    {
        //Opps user needs to login again and then we need to try again.
    //If we have tried to getData after we tried to login (and got succeess from the loginUser() function)....report error.
        //Below code will not work. But it will show you roughly what i am trying to do. It will also create an infinite loop.
        if (loginUser())
        {
            getData();
        }
    },
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:27:54.507

异步函数*不能（有用地）返回值*。

首先，更改`loginUser`以使其返回`jqXHR`对象：

```
function loginUser() {
    return $.ajax(...);
} 
```

这应该对代码的（有效）现有使用没有任何影响，该代码当前不返回任何内容（实际上`undefined`）。

然后，您的第二个函数也可以注册对AJAX 调用`error`状态的兴趣：`loginUser`

```
error: function() {
    var loginPromise = loginUser();
    loginPromise.done(getData);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:36:06.873

```
 var user_id, has_valid_session;
    function check_session() {
        $.ajax({
        type: "POST",
        url: "login.php",
        data: "{user:user_id}",
        success: function(result) {
            // you send to your server the user_id and make sure he has a valid session
            if(result == "true") {
                has_valid_session = true;
                continue();
            } else {
                $('#error').html("you need to login first");
                login_user();
            }
        }
    });
} 
```

如果我理解您的问题，您需要加载服务器端脚本 php/asp 并等待结果，在我的示例中，结果将是 true ot false。如果为真，则继续，否则向用户显示登录表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:24:54.570

您可以进行非异步调用并让它的成功/错误处理程序在您的函数中设置一个局部变量（因为 ajax 只会在请求完成后返回）

```
function loginUser()
{
  var result = false;
  $.ajax(
  {
    ....
    async: false,
    success: function(data,status)
    {
        //everything worked great
        result = true;
    },
    error: function(data,status)
    {
        //display some user error stuff.
        result = false;
    },
  });  
  return result;
} 
```

# web-services - 如何使用 oAuth 2.0 保护 apache cxf webservice(jax-ws)

> ID：12281770
> 
> 赞同：5
> 
> 时间：2012-09-05T12:46:48.657
> 
> 标签：web-services, apache, oauth-2.0, cxf

我已经在 Tomcat 中使用`Apache CXF`. 我将如何继续使用 保护该 Web 服务`OAuth 2.0`？

我浏览了以下 URL，但没有找到任何合适的解决方案。关于如何实现`oAuth 2.0`简单 Web 服务的工作示例或教程？

原教程链接：

*   [JAX-RS：OAuth2](http://cxf.apache.org/docs/jax-rs-oauth2.html "Apache CXF 文档中的原始教程")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T14:19:38.087

我在这里添加了一个简短的介绍： [https ://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+OAuth2#JAX-RSOAuth2-OAuth2tokensandSOAPendpoints](https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+OAuth2#JAX-RSOAuth2-OAuth2tokensandSOAPendpoints)

基本上，它将与通过授权标头传递的不记名令牌一起工作，并且可以轻松定制以处理 WS-Security 二进制令牌

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T13:01:09.127

我最近遇到了同样的问题。经过大量研究后，我发现（这可能仅限于我一个人）这非常复杂。

可以通过以下方式将所需的“授权标头”附加到 SOAP Web 服务调用：

```
Map<String, Object> req_ctx = ((BindingProvider)port).getRequestContext();
req_ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, WS_URL);

Map<String, List<String>> headers = new HashMap<String, List<String>>();
headers.put("key", Collections.singletonList("yourkey"));
//... all other parameters required.
req_ctx.put(MessageContext.HTTP_REQUEST_HEADERS, headers); 
```

然后可以在服务器端检查请求，如下所示：

```
MessageContext mctx = wsctx.getMessageContext();

//get detail from request headers
    Map http_headers = (Map) mctx.get(MessageContext.HTTP_REQUEST_HEADERS);
    List userList = (List) http_headers.get("key");
//... get other information required here 
```

因此您可以验证请求。

* * *

### 附带说明

值得注意的是，根据我的发现，oAuth2 对于简单地保护您的 API 并不是很有用 - 只是保护它不被外部使用。

*推理*

使用 oAuth 1，您可以使用身份验证通过用户的密钥来验证用户。您知道他们已获得授权，因为他们已成功签署请求，因此您将允许他们访问信息。

对于 oAuth 2，该协议要求您使用 HTTPS。那么为什么不将应用程序身份验证与您的 API 一起使用呢？我发现 oAuth 2 对于使用原始凭据集（协议的目标）访问 3rd 方应用程序非常有用。但除非您需要这样做，否则无需（再次 IMO）实施完整的 oAuth。如果您只希望保护您的 API，只需使用 SSL 和密钥或用户名/密码组合即可。

* * *

## 也可以看看：

*   [使用 JAX-WS 进行应用程序身份验证](http://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/)
*   [CFX 用户指南](http://cxf.apache.org/docs/index.html)
*   [OAuth 2 与 OAuth 1 有何不同？](https://stackoverflow.com/questions/4113934/how-is-oauth-2-different-from-oauth-1)
*   [设计一个没有 oAuth 的安全 REST API](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/) -*对一般理解更有用*。

# ffmpeg - 通过 ffmpeg 生成带有扩展 M3U 指令的 m3u8 文件

> ID：12281774
> 
> 赞同：5
> 
> 时间：2012-09-05T12:47:11.250
> 
> 标签：ffmpeg

我正在使用 ffmpeg 生成 m3u8 文件。

命令如下：

```
ffmpeg -i sourcefile.mp4 -vcodec libx264 -acodec libvo_aacenc -b:v 128k -flags -global_header -map 0:0 -map 0:1 -f segment -segment_time 4 -segment_list_size 0 -segment_list testlist.m3u8 -segment_format mpegts stream%05d.ts 
```

这成功地创建了 m3u8 文件，但它没有添加扩展的 m3u8 指令。

那么，如何添加这些指令呢？

提前致谢，

萨加尔乔希

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:38:13.247

根据[HTTP Live Streaming](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-10)规范，除非您使用的是旧版本的 ffmpeg（我使用的是 1.0），否则它创建的 m3u8 文件就可以了。

我的看起来像这样（而 ffmpeg 仍在编码）：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOWCACHE:1
#EXTINF:8.308300,
stream00000.ts
#EXTINF:8.341667,
stream00001.ts 
```

通过省略#EXT-X-ENDLIST 标记，客户端应该知道重新加载此 m3u8 文件以获取更多媒体。这是概述[here](http://developer.apple.com/library/ios/documentation/networkinginternet/conceptual/streamingmediaguide/HTTPStreamingArchitecture/HTTPStreamingArchitecture.html#//apple_ref/doc/uid/TP40008332-CH101-DontLinkElementID_11)。一旦 ffmpeg 退出（或者我 ctrl-c 退出）#EXT-X-ENDLIST 就会添加到文件的末尾。

# jquery - 从 JQuery 中的文件输入中获取数据

> ID：12281775
> 
> 赞同：176
> 
> 时间：2012-09-05T12:47:13.247
> 
> 标签：jquery, file, file-upload, base64, html-input

我实际上有一个文件输入，我想检索文件的 Base64 数据。

我试过：

```
$('input#myInput')[0].files[0] 
```

检索数据。但它只提供名称、长度、内容类型，而不提供数据本身。

我实际上需要将这些数据发送到 Amazon S3

我已经测试了 API，当我通过编码类型为“multipart/form-data”的 html 表单发送数据时，它可以工作。

我使用这个插件：http: [//jasny.github.com/bootstrap/javascript.html#fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload)

这个插件给了我图片的预览，我在图片预览的 src 属性中检索数据。但是当我将这些数据发送到 S3 时它不起作用。我可能需要对“multipart/form-data”之类的数据进行编码，但我不知道为什么。

有没有办法在不使用 html 表单的情况下检索这些数据？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2013-10-30T19:42:30.320

输入文件元素：

```
<input type="file" id="fileinput" /> 
```

获取文件：

```
var myFile = $('#fileinput').prop('files'); 
```

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2012-09-05T13:08:11.550

你可以试试 FileReader API。做这样的事情：

```
<!DOCTYPE html>
<html>
  <head>
    <script>        
      function handleFileSelect()
      {               
        if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
          alert('The File APIs are not fully supported in this browser.');
          return;
        }   

        var input = document.getElementById('fileinput');
        if (!input) {
          alert("Um, couldn't find the fileinput element.");
        }
        else if (!input.files) {
          alert("This browser doesn't seem to support the `files` property of file inputs.");
        }
        else if (!input.files[0]) {
          alert("Please select a file before clicking 'Load'");               
        }
        else {
          var file = input.files[0];
          var fr = new FileReader();
          fr.onload = receivedText;
          //fr.readAsText(file);
          //fr.readAsBinaryString(file); //as bit work with base64 for example upload to server
          fr.readAsDataURL(file);
        }
      }

      function receivedText() {
        document.getElementById('editor').appendChild(document.createTextNode(fr.result));
      }           

    </script>
  </head>
  <body>
    <input type="file" id="fileinput"/>
    <input type='button' id='btnLoad' value='Load' onclick='handleFileSelect();' />
    <div id="editor"></div>
  </body>
</html>
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-10-23T14:28:35.690

我创建了一个表单数据对象并附加了文件：

```
var form = new FormData(); 
form.append("video", $("#fileInput")[0].files[0]); 
```

我得到了：

```
------WebKitFormBoundaryNczYRonipfsmaBOK
Content-Disposition: form-data; name="video"; filename="Wildlife.wmv"
Content-Type: video/x-ms-wmv 
```

在发送的标题中。我可以确认这是可行的，因为我的文件已发送并存储在服务器上的文件夹中。如果您不知道如何使用 FormData 对象，网上有一些文档，但不多。[Mozilla 的表单数据对象解释](https://developer.mozilla.org/en-US/docs/Web/Guide/Using_FormData_Objects)

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2017-09-20T21:14:48.757

html:

```
<input type="file" name="input-file" id="input-file"> 
```

jQuery：

```
var fileToUpload = $('#input-file').prop('files')[0]; 
```

我们只想获取第一个元素，因为 prop('files') 返回数组。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-01-17T16:08:18.433

`input`元素，类型`file`

```
<input id="fileInput" type="file" /> 
```

在您`input`更改时使用该`FileReader`对象并读取您的`input`文件属性：

```
$('#fileInput').on('change', function () {
    var fileReader = new FileReader();
    fileReader.onload = function () {
      var data = fileReader.result;  // data <-- in this var you have the file data in Base64 format
    };
    fileReader.readAsDataURL($('#fileInput').prop('files')[0]);
}); 
```

FileReader 将加载您的文件，并在`fileReader.result`其中拥有 Base64 格式的文件数据（还有文件内容类型 (MIME)、文本/纯文本、图像/jpg 等）

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-09-27T09:22:44.087

带有 jQ​​uery 的 FileReader API，简单示例。

```
( function ( $ ) {
	// Add click event handler to button
	$( '#load-file' ).click( function () {
		if ( ! window.FileReader ) {
			return alert( 'FileReader API is not supported by your browser.' );
		}
		var $i = $( '#file' ), // Put file input ID here
			input = $i[0]; // Getting the element from jQuery
		if ( input.files && input.files[0] ) {
			file = input.files[0]; // The file
			fr = new FileReader(); // FileReader instance
			fr.onload = function () {
				// Do stuff on onload, use fr.result for contents of file
				$( '#file-content' ).append( $( '<div/>' ).html( fr.result ) )
			};
			//fr.readAsText( file );
			fr.readAsDataURL( file );
		} else {
			// Handle errors here
			alert( "File not selected or browser incompatible." )
		}
	} );
} )( jQuery );
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="file" id="file" />
<input type='button' id='load-file' value='Load'>
<div id="file-content"></div>
```

以文本形式阅读...取消注释`//fr.readAsText(file);`行和注释`fr.readAsDataURL(file);`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-07T21:59:50.317

HTML

```
<div class="row form-group my-2">
                <div class="col-12">
                    <div class="">
                        <div class="text-center">
                            <label for="inpImage" class="m-2 pointer">
                                <img src="src/img/no-image.jpg" id="img-visor" height="120" class="rounded mx-auto d-block">
                            </label>
                            <input type="file" class="visually-hidden" accept="image/*" name="picture" id="inpImage">
                        </div>
                    </div>
                </div>
            </div> 
```

jQuery

```
$('#inpImage').change(()=>{
const file = $('#inpImage').prop("files")[0];
const imagen = URL.createObjectURL(file);
console.log(URL.createObjectURL(file));
$('#img-visor').attr('src', imagen);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-12-12T10:37:15.313

使用 jquery 获取文件

元素html：

```
 <input id="fileInput" type="file" /> 
```

jQuery代码：

```
 $("#fileInput")[0].files[0] 
```

这对我有用:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-30T23:33:19.650

```
 <script src="~/fileupload/fileinput.min.js"></script>
 <link href="~/fileupload/fileinput.min.css" rel="stylesheet" /> 
```

下载名为 fileinput 的上述文件，在您的索引页面中添加路径。

```
<div class="col-sm-9 col-lg-5" style="margin: 0 0 0 8px;">
<input id="uploadFile1" name="file" type="file" class="file-loading"       
 `enter code here`accept=".pdf" multiple>
</div>

<script>
        $("#uploadFile1").fileinput({
            autoReplace: true,
            maxFileCount: 5
        });
</script> 
```

# php - 如何有条件地显示单行或多行结果集的输入文本框或列表框？

> ID：12281776
> 
> 赞同：0
> 
> 时间：2012-09-05T12:47:15.277
> 
> 标签：php, javascript, mysql

如果唯一纸张显示输入框值设置值但计算多张纸张（如果计算相同的 2 张纸张），则纸张计数创建一个列表框设置选项纸张。

请注意，Paper1 - Paper3 每个都只有一个 Title 值。请注意 Paper4 - Paper5 具有三个不同的 Title 值。我只想显示 Paper1 - Paper3 的文本框和 Paper4 和 Paper5 的列表框。

```
 mysql fetch record 
      **id       groupoptional        title**
      1           Paper1              Title1
      2           Paper2              Title2
      3           Paper3              Title3
      4           Paper4              Title4
      5           Paper4              Title5
      6           Paper4              Title6
      7           Paper5              Title7
      8           Paper5              Title8
      9           Paper5              Title9 
```

一些例子：

```
 create html input 1 <input name="Paper1" type="text" value='1'> Title1
   create html input 2 <input name="Paper2" type="text" value='2'> Title2
   create html input 3 <input name="Paper3" type="text" value='3'> Title3

    create html listbox Paper4 -> <select name='paper4'>
                                  <option value="4">Title 4</option>
                                  <option value="5">Title 5</option>
                                  <option value="6">Title 6</option>
                                  </select>

     create html listbox Paper5 -> <select name='paper5'>
                                   <option value="7">Title 7</option>
                                   <option value="8">Title 8</option>
                                   <option value="9">Title 9</option>
                                   </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:17:45.300

虽然很难弄清楚你在问什么，但我认为你想要这样的东西：

```
$sql = "SELECT id, groupoptional, title FROM tableName";
$results = $db->query($sql);

$newArray = array();

foreach($results as $row)
{
    if(isset($newArray[$row["groupoptional"]]))
    {
        $newArray[$row["groupoptional"]][] = array("id" => $row["id"], "title" => $row["title"]);
    }
    else
    {
        $newArray[$row["groupoptional"]] = array(array("id" => $row["id"], "title" => $row["title"]));
    }
}

foreach($newArray as $key => $value)
{
    if(count($value) > 1)
    {
        echo "<select name='".$key."'>";
        foreach($value as $group)
        {
            echo "<option value='".$group["id"]."'>".$group["title"]."</option>";
        }
        echo "</select>";
    }
    else
    {
        echo "<input type='text' name='".$key."' value='".$value[0]["id"]."'> ".$value[0]["title"];
    }
} 
```

# c# - 实现 HttpWebRequest 异步调用

> ID：12281777
> 
> 赞同：8
> 
> 时间：2012-09-05T12:47:15.897
> 
> 标签：c#, asynchronous, httpwebrequest, streamwriter

我有这个代码

```
using (var stream = new StreamWriter(request.GetRequestStream(), Encoding))
   stream.Write(body.ToString()); 
```

我需要让它异步。据我了解，这意味着我需要将调用更改`request.GetRequestStream()`为`asychronous.BeginGetRequestStream()`. 我看过[这个](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx)例子，但不知道如何将它应用到这个场景中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T15:21:17.697

该文档有一个很好的例子（[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream%28v=vs.100%29.aspx)）：

```
using System;
using System.Net;
using System.IO;
using System.Text;
using System.Threading;

class HttpWebRequestBeginGetRequest
{
    private static ManualResetEvent allDone = new ManualResetEvent(false);
public static void Main(string[] args)
{
    // Create a new HttpWebRequest object.
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.contoso.com/example.aspx");

    request.ContentType = "application/x-www-form-urlencoded";

    // Set the Method property to 'POST' to post data to the URI.
    request.Method = "POST";

    // start the asynchronous operation
    request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

    // Keep the main thread from continuing while the asynchronous 
    // operation completes. A real world application 
    // could do something useful such as updating its user interface. 
    allDone.WaitOne();
}

private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

    // End the operation
    Stream postStream = request.EndGetRequestStream(asynchronousResult);

    Console.WriteLine("Please enter the input data to be posted:");
    string postData = Console.ReadLine();

    // Convert the string into a byte array. 
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);

    // Write to the request stream.
    postStream.Write(byteArray, 0, postData.Length);
    postStream.Close();

    // Start the asynchronous operation to get the response
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

private static void GetResponseCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

    // End the operation
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
    Stream streamResponse = response.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    string responseString = streamRead.ReadToEnd();
    Console.WriteLine(responseString);
    // Close the stream object
    streamResponse.Close();
    streamRead.Close();

    // Release the HttpWebResponse
    response.Close();
    allDone.Set();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T12:09:05.123

你可以通过这段代码理解。

该程序定义了两个供自己使用的类，RequestState 类，它通过异步调用传递数据，以及 ClientGetAsync 类，它实现对 Internet 资源的异步请求。

RequestState 类在对为请求提供服务的异步方法的调用中保留请求的状态。它包含 WebRequest 和 Stream 实例，其中包含对资源的当前请求和响应中接收到的流，包含当前从 Internet 资源接收的数据的缓冲区，以及包含完整响应的 StringBuilder。当向 WebRequest.BeginGetResponse 注册 AsyncCallback 方法时，将 RequestState 作为状态参数传递。

ClientGetAsync 类实现对 Internet 资源的异步请求，并将生成的响应写入控制台。它包含以下列表中描述的方法和属性。

allDone 属性包含一个 ManualResetEvent 类的实例，该实例发出请求完成的信号。

Main() 方法读取命令行并开始对指定 Internet 资源的请求。它创建 WebRequest wreq 和 RequestState rs，调用 BeginGetResponse 开始处理请求，然后调用 allDone.WaitOne() 方法，以便应用程序在回调完成之前不会退出。从 Internet 资源读取响应后，Main() 将其写入控制台，应用程序结束。

showusage() 方法在控制台上编写示例命令行。当命令行上没有提供 URI 时，它由 Main() 调用。

RespCallBack() 方法实现了互联网请求的异步回调方法。它创建包含来自 Internet 资源的响应的 WebResponse 实例，获取响应流，然后开始异步读取流中的数据。

ReadCallBack() 方法实现了读取响应流的异步回调方法。它将从 Internet 资源接收到的数据传输到 RequestState 实例的 ResponseData 属性中，然后开始另一个异步读取响应流，直到不再返回数据。读取完所有数据后，ReadCallBack() 关闭响应流并调用 allDone.Set() 方法以指示整个响应存在于 ResponseData 中。

```
using System;
using System.Net;
using System.Threading;
using System.Text;
using System.IO;

// The RequestState class passes data across async calls.
public class RequestState
{
   const int BufferSize = 1024;
   public StringBuilder RequestData;
   public byte[] BufferRead;
   public WebRequest Request;
   public Stream ResponseStream;
   // Create Decoder for appropriate enconding type.
   public Decoder StreamDecode = Encoding.UTF8.GetDecoder();

   public RequestState()
   {
      BufferRead = new byte[BufferSize];
      RequestData = new StringBuilder(String.Empty);
      Request = null;
      ResponseStream = null;
   }     
}

// ClientGetAsync issues the async request.
class ClientGetAsync 
{
   public static ManualResetEvent allDone = new ManualResetEvent(false);
   const int BUFFER_SIZE = 1024;

   public static void Main(string[] args) 
   {
      if (args.Length < 1) 
      {
         showusage();
         return;
      }

      // Get the URI from the command line.
      Uri httpSite = new Uri(args[0]);

      // Create the request object.
      WebRequest wreq = WebRequest.Create(httpSite);

      // Create the state object.
      RequestState rs = new RequestState();

      // Put the request into the state object so it can be passed around.
      rs.Request = wreq;

      // Issue the async request.
      IAsyncResult r = (IAsyncResult) wreq.BeginGetResponse(
         new AsyncCallback(RespCallback), rs);

      // Wait until the ManualResetEvent is set so that the application 
      // does not exit until after the callback is called.
      allDone.WaitOne();

      Console.WriteLine(rs.RequestData.ToString());
   }

   public static void showusage() {
      Console.WriteLine("Attempts to GET a URL");
      Console.WriteLine("\r\nUsage:");
      Console.WriteLine("   ClientGetAsync URL");
      Console.WriteLine("   Example:");
      Console.WriteLine("      ClientGetAsync http://www.contoso.com/");
   }

   private static void RespCallback(IAsyncResult ar)
   {
      // Get the RequestState object from the async result.
      RequestState rs = (RequestState) ar.AsyncState;

      // Get the WebRequest from RequestState.
      WebRequest req = rs.Request;

      // Call EndGetResponse, which produces the WebResponse object
      //  that came from the request issued above.
      WebResponse resp = req.EndGetResponse(ar);         

      //  Start reading data from the response stream.
      Stream ResponseStream = resp.GetResponseStream();

      // Store the response stream in RequestState to read 
      // the stream asynchronously.
      rs.ResponseStream = ResponseStream;

      //  Pass rs.BufferRead to BeginRead. Read data into rs.BufferRead
      IAsyncResult iarRead = ResponseStream.BeginRead(rs.BufferRead, 0, 
         BUFFER_SIZE, new AsyncCallback(ReadCallBack), rs); 
   }

   private static void ReadCallBack(IAsyncResult asyncResult)
   {
      // Get the RequestState object from AsyncResult.
      RequestState rs = (RequestState)asyncResult.AsyncState;

      // Retrieve the ResponseStream that was set in RespCallback. 
      Stream responseStream = rs.ResponseStream;

      // Read rs.BufferRead to verify that it contains data. 
      int read = responseStream.EndRead( asyncResult );
      if (read > 0)
      {
         // Prepare a Char array buffer for converting to Unicode.
         Char[] charBuffer = new Char[BUFFER_SIZE];

         // Convert byte stream to Char array and then to String.
         // len contains the number of characters converted to Unicode.
      int len = 
         rs.StreamDecode.GetChars(rs.BufferRead, 0, read, charBuffer, 0);

         String str = new String(charBuffer, 0, len);

         // Append the recently read data to the RequestData stringbuilder
         // object contained in RequestState.
         rs.RequestData.Append(
            Encoding.ASCII.GetString(rs.BufferRead, 0, read));         

         // Continue reading data until 
         // responseStream.EndRead returns –1.
         IAsyncResult ar = responseStream.BeginRead( 
            rs.BufferRead, 0, BUFFER_SIZE, 
            new AsyncCallback(ReadCallBack), rs);
      }
      else
      {
         if(rs.RequestData.Length>0)
         {
            //  Display data to the console.
            string strContent;                  
            strContent = rs.RequestData.ToString();
         }
         // Close down the response stream.
         responseStream.Close();         
         // Set the ManualResetEvent so the main thread can exit.
         allDone.Set();                           
      }
      return;
   }    
} 
```

# spring - 避免嵌套调用

> ID：12281778
> 
> 赞同：2
> 
> 时间：2012-09-05T12:47:15.820
> 
> 标签：spring, aop, aspectj

假设我的服务的所有公共方法都有一个方面包装器，它在将实体返回到控制器之前将它们从数据库中分离出来：

```
@Around("execution(public * *(..)) && @within(org.springframework.stereotype.Service)") 
```

当一个服务直接调用另一个服务时，这个包装器也会被触发。例如：

```
@Service
class ServiceA {
    @Autowired
    ServiceB b;

    public void foo() {
        b.bar();
    }
}

@Service
class ServiceB {
    public void bar() {
    }
} 
```

当我调用`ServiceA.foo()`时，包装器也会围绕嵌套调用触发`bar()`。

它应该围绕对 的调用触发`foo()`，但不是`bar()`。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:21:36.270

我有时使用[ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)变量解决了这类问题。尝试类似：

```
@Aspect
public class DetacherAspect {

    private final ThreadLocal<Object> threadLocal = new ThreadLocal<Object>();

    @Around("execution(public * *(..)) && @within(org.springframework.stereotype.Service)")
    public Object execute(ProceedingJoinPoint pjp) throws Throwable {

        boolean isNested = threadLocal.get() != null;
        if (!isNested) {
            // Set some object (better create your own class) if this is the first service
            threadLocal.set(new Object());
        }

        try {

            ... // Your aspect

        } finally {

            // Clean thread local variables
            if (!isNested) {
                threadLocal.remove();
            }

        }

    }

} 
```

显然，这只有在所有调用都在同一个线程中完成时才有效。线程局部变量也有一些其他的缺点，很适合阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:38:47.597

我只带着我的 iPad 在路上，所以我现在无法测试它，但你可以尝试以下方式：

```
pointcut myCalls() :
    execution(public * *(..)) && @within(org.springframework.stereotype.Service);
pointcut myCallsNonRecursive() :
    myCalls() && !cflowbelow(myCalls())

around() : myCallsNonRecursive() {
    // ...
} 
```

对不起 AspectJ 原生语法，我只是更熟悉它。

# windows - 在 Windows 中找到正在运行的 JRE 目录

> ID：12281779
> 
> 赞同：3
> 
> 时间：2012-09-05T12:47:19.703
> 
> 标签：windows, java

知道 Java 版本（例如 1.6.0_31）我如何以*编程*方式（从 Java 程序中）找到相应的 JRE 在 Windows 机器上的磁盘上的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:51:37.343

它应该可以通过读取`java.home`系统环境变量的值来获得。请参阅 [http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。

但请记住，安全管理器可能会从上面的链接中阻止您：

> 安全注意事项：安全管理器可以限制对系统属性的访问。这通常是小程序中的一个问题，它无法读取某些系统属性，也无法写入任何系统属性。有关在 applet 中访问系统属性的更多信息，请参阅 Doing More With Java Rich Internet Applications 课程中的系统属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:51:57.877

```
System.getProperty("java.home"); 
```

将为您返回运行该程序的 JRE 的安装目录。

另请查看以下链接以获取更多信息：[http ://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:53:35.410

您可以查看当前[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)值`java.home`：

```
String installDirOfJRE = System.getProperty("java.home"); 
```

根据您可以**预期（但只是预期）**的返回值，其他版本的 JRE**可能**位于同一父文件夹中，因此您可以尝试搜索您想要查找的版本。

恐怕没有别的选择了……

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:53:38.430

```
System.getProperty("java.runtime.version"); 
```

为您提供执行 VM 的版本。

# google-chrome - jQuery Mobile 缓存页面和 HTML 基础 href

> ID：12281786
> 
> 赞同：1
> 
> 时间：2012-09-05T12:47:44.853
> 
> 标签：google-chrome, jquery-mobile, relative-path

我的多页 jQuery Mobile 应用程序跨越了几个目录。一个有状态的页面被缓存`data-dom-cache="true"`。当我导航到它时，用于相对链接 ( `$('base')[0].href`) 的基本路径不会恢复到正确的子目录；这是一个级别。看起来像一个 jQuery Mobile 错误。

为了解决这个问题，我尝试了`$('base')[0].href = 'subdir';`. 但执行它会将其送入`subdir`s 的兔子洞。在它给我的页面内`subdir/subdir`，从 Chrome 控制台它是`subdir/subdir/subdir`.

这是 Chrome 或 jQuery Mobile 的一个怪癖，我还能做些什么来解决？用另一个浏览器测试对我来说并不容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:06:44.390

哎呀，我当时忘了回答这个问题。我相信解决方案是添加另一个`<base>`，而不是修改现有标签，以避免相对 URL 的任何怪癖。

# git - node.js 在不同的 git 标签点需要模块

> ID：12281787
> 
> 赞同：0
> 
> 时间：2012-09-05T12:47:47.303
> 
> 标签：git, node.js

我正在开发一个 node.js express 应用程序以及几个私有 node_modules。

我想通过使用 git 标签让我的用户接触这些模块的不同版本。这是一个明智的想法吗，是否有一种同样明智的方法可以通过自动检测标签来做到这一点，并要求每个 git 标签引用中的模块？

也许可能存在“git-helpers”之类的东西？（代码是咖啡脚本）

```
git = require('git-helpers?').dir('./node_modules/module/')
tags = git.getGitTags()

modules = []

for tag in tags
  git.requireAtGitTag tag, (err, res) ->
    modules.push {version: tag, module: res} 
```

然后模块变量看起来像这样

```
[
 { version: "0.8", module: required_module_here_at_tag},
 { version: "0.9", module: required_module_here_at_tag},
 { version: "1.0", module: required_module_here_at_tag}
] 
```

**编辑**

我想出了一个使用名为[Gift](https://github.com/sentientwaffle/gift)的 node.js git cli 包装器的想法。这是一种明智的做法吗？

```
gift = require("gift")
repo = gift("./node_modules/moduleA")

modules = []

repo.tags (err, tags) ->
  for tag in tags
    repo.checkout tag.name, (err, a) ->
      modules.push
        version: tag.name
        module: require("./node_modules/moduleA") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:55:10.590

归档此类内容的最佳方法是使用 npm：[Git URLs as Dependencies](https://npmjs.org/doc/json.html#Git-URLs-as-Dependencies)

`package.json`您的应用程序文件夹中的示例：

```
{
  "name": "foobar",
  "version": "0.0.1",
  "dependencies": {
    "library": "git://example.com/user/project.git#tag_name"
  }
} 
```

然后你可以：

```
var library = require('library') 
```

# android - 我无法将通知作为第一个通知打开

> ID：12281788
> 
> 赞同：1
> 
> 时间：2012-09-05T12:47:48.030
> 
> 标签：android, android-intent, textview, google-cloud-messaging

我有一个关于推送通知的问题，我可以处理发送消息并在 textview 中显示它。但在那之后我发送了第二次推送并尝试打开它，它仍然显示上一个推送通知的消息。

我该如何解决？

这是代码句柄消息

```
 package com.example.cepyolwebview;

    import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.os.Bundle;
    import android.util.Log;

    import com.xtify.sdk.api.XtifyBroadcastReceiver;
    import com.xtify.sdk.api.XtifySDK;

    public class XtifyNotifier extends XtifyBroadcastReceiver {
        String TAG = XtifyNotifier.class.getName();
        private static final String NOTIFICATION_TITLE = "com.xtify.sdk.NOTIFICATION_TITLE";
        private static final String NOTIFICATION_CONTENT = "com.xtify.sdk.NOTIFICATION_CONTENT";

        @Override
        public void onMessage(Context context, Bundle msgExtras) {
            Log.d(TAG, "-- Notification recived");
            String title = msgExtras.getString(NOTIFICATION_TITLE);
            String message = msgExtras.getString(NOTIFICATION_CONTENT);
            Log.d(TAG, "Notification Title: " + title);
            Log.d(TAG, "Notification Content: " + message);
            generateNotification(context, title, message);

        }

        @Override
        public void onRegistered(Context context) {
            Log.d(TAG, "-- SDK registerd");
            Log.d(TAG, "XID is: " + XtifySDK.getXidKey(context));
        }

        @Override
        public void onC2dmError(Context context, String errorId) {
            Log.i(TAG, "ErrorId: " + errorId);
        }

        private static void generateNotification(Context context, String title,
                String message) {
            int icon = R.drawable.ic_launcher;

            NotificationManager notificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(icon, title,
                    System.currentTimeMillis());

            Intent notificationIntent = new Intent(context, Utils.class);
            // set intent so it does not start a new activity
            notificationIntent.putExtra("message", message);
            notificationIntent.putExtra("title", title);

            PendingIntent intent = PendingIntent.getActivity(context, 0,
                    notificationIntent, 0);
            notification.setLatestEventInfo(context, title, message, intent);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notificationManager.notify(0, notification);
        }
  } 
```

和查看通知的代码

```
package com.example.cepyolwebview;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Utils extends Activity {

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.utils);
        TextView title= (TextView) findViewById(R.id.title);
        TextView message= (TextView) findViewById(R.id.message);

        title.setText(getIntent().getExtras().getString("title"));
        message.setText(getIntent().getExtras().getString("message"));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:53:34.513

用这个。

```
 PendingIntent intent=PendingIntent.getActivity(context, 0, notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT ); 
```

# apache-flex - 如何在 Adob e Air 中检测文本框中的焦点

> ID：12281790
> 
> 赞同：0
> 
> 时间：2012-09-05T12:47:53.287
> 
> 标签：apache-flex, air, textbox, focus

如何检测特定文本框何时获得焦点（通过键盘和鼠标单击）。例如，当您单击文本框时，我只想要一个警报弹出窗口。

我正在尝试做类似的事情

```
protected function textbox1_changeHandler(event:Event):void
    {
          if(textbox1.IsFocus){
             //run some code
          }
    } 
```

我知道 IsFocus 不存在，但有什么可以让我做类似的事情吗？

我正在使用 Flash Builder 4.6，组件是 mx:TextInput

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:58:43.053

使用[focusIn](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#event%3afocusIn)事件。

概念上是这样的：

```
<mx:TextInput focusIn="trace('received focus')"/> 
```

* * *

如果你想知道一个 textInput 是否有焦点，你可以使用[getFocus()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#getFocus%28%29)方法。概念上是这样的：

```
if(myComponent.getFocus() == myComponent){
 trace('component has focus');
} else {
 trace('component does not have focus');
} 
```

# jquery - 屏幕底部的选项卡，单击时随内容上升

> ID：12281800
> 
> 赞同：0
> 
> 时间：2012-09-05T12:48:29.830
> 
> 标签：jquery, html, css, tabs, transparent

我正在尝试制作两个位于底部中心的选项卡，当单击时，整个内容会上升并显示内容 - 就像他们在 www.hunterandsand.com 上所做的那样，但我似乎无法弄清楚他们是如何使用代码做到的他们有。还有他们是如何让它变得透明的。任何帮助都会非常有用，谢谢。

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="description" content="Beauchamp&#39;s Corporate offers a unique service for clients wishing to design a special product for their business.">
<title>Beauchamp&#39;s Corporate</title>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#maximage').cycle({
        fx: 'scrollHorz', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
        speed: 1000,
        timeout: 7000,
        prev: '#arrow_left',
        next: '#arrow_right'
    });
</script>
</script>
<body>

        <div id="logo"><img src="images/logo1.jpg" alt="Beauchamp's Corporate"></div>

        <div id="cycle-loader">
         </div>   

        <div id="maximage">
            <img src="images/boat1.jpg" alt="" />
            <img src="images/car1.jpg" alt="" />
            <img src="images/dock1.jpg" alt="" />
            <img src="images/glass1.jpg" alt="" />
            <img src="images/hotel1.jpg" alt="" />   
            <img src="images/table1.jpg" alt="" />         
        </div>

        <a href="" id="arrow_left" class="button" title="Previous Photo"></a>

        <a href="" id="arrow_right" class="button" title="Next Photo"></a> 
 <div id="pages">

            <div id="nav">

                <ul id="menu">
                    <li id="services">Our Product</li>
                    <li id="contact">Contact Us</li>
                </ul>

            </div>

            <div id="content">

                <div id="copy">

                    <div class="page product">

                        <p>We offer a consultation meeting in which we discuss client requirements, design ideas, packaging options, budgets, lead times and more...
                            <br />
                        We have a number of designs already in production which we can edit & brand with the client logo or...
                            <br />
                        Following this initial meeting, we produce product drawings, quotes, source leather samples and materials specific to this product. Samples can be produced once drawings have been approved by the client.
                            <br />
                        Lead times, delivery schedules and product prices are unique to the client and indervidually calculated according to the specific client reqirements.
                            <br />
                        Where possible Beauchamp&#39;s aims to produce products in one of our UK factories however should it be required we will use factories further afield. </p>

                    </div>

                    <div class="page contact">

                        <p>For further information:
                            <br />
                        Email: <a href="info@beauchampsoflondon.com">info@beauchampsoflondon.com</a>
                            <br />
                        Address: 35 Bruton Street, London, W1J 6QY 
                            <br />
                        Website: <a href="www.beauchampscorporate.com">www.beauchampscorporate.com</a>
                            <br />
                        Fashion Accessories Website: <a href="www.beauchampsoflondon.com">www.beauchampsoflondon.com</a></p>

                    </div>

                </div>

            </div>

        </div>      

</body>
</html> 
```

CSS：

```
#logo{
width:180px;
height:113px;
margin-left:auto;
margin-right:auto;
margin-top:-10px;
}

a.button {
    display:block;
    width:50px;
    height:50px;
    margin-top:200px;
    opacity: 0.6%;
    }

a#arrow_left{
    float:left;
    background: transparent url('../images/arrowleft1.jpg') no-repeat;
    position: relative;
    z-index: 100;
}

a#arrow_right{
    float:right;
    background: transparent url('../images/arrowright1.jpg') no-repeat;
    position: relative;
    z-index: 100;
}

#maximage { 
height: 100%; 
width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000; 
 }
#maximage img {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000; 
}
li {
list-style:none;
} 
```

看到它运行 - [www.musidoraland.co.uk](http://www.musidoraland.co.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:05:05.777

首先，您的网站需要很多关注。在你做任何其他事情之前，必须拥有可读的文本......

也就是说，您可以使用以下方法模仿它们的透明度：

```
#[Tab_Container] {background:transparent url([Image_Dir]/[Transparent_Image.EXT]) repeat;} 
```

要使标签以这种方式向上滑动，您应该使用 jQuery 的滑动动画，例如[http://www.bennadel.com/blog/1827-Using-jQuery-s-SlideUp-and-SlideDown-Methods-With-Bottom-Positioned-元素.htm](http://www.bennadel.com/blog/1827-Using-jQuery-s-SlideUp-and-SlideDown-Methods-With-Bottom-Positioned-Elements.htm)

这似乎是您的示例网站如何执行此操作：

```
$(function() {
    $('.page').hide();
    $('#menu li').click(
        function() {

            var content_id = $(this).attr('id');

            $('#menu li').addClass('off');
            $(this).removeClass('off');

            if ($('.page').is(':visible')) 
            {
                $('.page').hide();
                $('.'+content_id).show();
            }
            else
            {
                $('#pages').animate({ height: '300px', easing: 'easeInOutQuart' });

                    //console.log($(this).attr('id'));
                $('.'+content_id).show();
            }

        });
}); 
```

老实说，您似乎应该咨询专业人士，但如果您真的想学习并自己动手练习不同浏览器中的动画，直到您得到您想要的！

# android - 在侦听器中显示微调器

> ID：12281802
> 
> 赞同：1
> 
> 时间：2012-09-05T12:48:30.680
> 
> 标签：android, spinner

我有一个`Spinner`第一项是“选择一个”。在其中`onTouchListener`，我已经从用于`ArrayAdapter`. 现在我想`Spinner`直接在监听器中打开他的菜单，而不需要用户的第二次触摸。

这是我创建微调器的地方：

```
spinnerCategoria = (Spinner) findViewById(R.id.spinnerCategoria);
spinnerCategoriaArray = new ArrayList<String>();
spinnerCategoriaArray=CpmAnalysisParams.categoria();
spinnerCategoriaArrayAdapter = new ArrayAdapter<String>(this, R.layout.spinner, spinnerCategoriaArray);
spinnerCategoriaArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinnerCategoria.setAdapter(spinnerCategoriaArrayAdapter);
spinnerCategoria.setSelected(true);
spinnerCategoria.setOnTouchListener(Spinner_OnTouch);
spinnerCategoria.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
        Spinner spinnerOrdinata=(Spinner) findViewById(R.id.spinnerOrdinata);
        if (arg0.getItemAtPosition(arg2).equals("Grafico a torta")){
            spinnerOrdinata.setEnabled(false);
        }
        else{
            spinnerOrdinata.setEnabled(true);
        }
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

这是他的ontouchlistener：

```
private View.OnTouchListener Spinner_OnTouch = new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {

            spinnerCategoriaArrayAdapter=null;
            Spinner spinnerCat=(Spinner)findViewById(R.id.spinnerCategoria);
            spinnerCategoriaArray.remove(0);
            spinnerCategoriaArrayAdapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.spinner, spinnerCategoriaArray);
            spinnerCategoriaArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinnerCat.setAdapter(spinnerCategoriaArrayAdapter);
            spinnerCat.setOnTouchListener(null);

        }
        return true;
    }
}; 
```

# python - Django“动态”验证表

> ID：12281803
> 
> 赞同：0
> 
> 时间：2012-09-05T12:48:45.063
> 
> 标签：python, django, forms

我正在尝试在 Django 中创建一个验证表单，向用户提供一个选项列表，其中只有一个是有效的。

例如，对于喜欢披萨配料包括菠萝和羊乳干酪的用户来说——</p>

> 你最喜欢的披萨配料是什么？
> 
> *   火腿
> *   菠萝
> *   凤尾鱼

**每次选择都应该是随机的，无论是顺序还是值，但总是有一个有效的答案。**例如，如果用户刷新页面，表单可能是——</p>

> 你最喜欢的披萨配料是什么？
> 
> *   马苏里拉奶酪
> *   火腿
> *   羊乳干酪

我如何构建这样的表格？我被淹没了。我们必须在某处记录特定表单的有效选择是什么：

*   在数据库中为每个问题创建条目（不可扩展）？
*   在会话中设置它（hacky）？
*   基于用户 ID（可以预测）？

**编辑**——我们确实将披萨配料列表存储在数据库中——</p>

```
class UserProfile(Model):
    favourite_pizza_toppings = ManyToManyField(PizzaTopping) 
```

我想要的是这样的形式——</p>

```
class QuestionForm(Form):
    questions = ChoiceField(choices=(('a', RANDOMLY_CHOSEN_OPTION_A),
                                     ('b', RANDOMLY_CHOSEN_OPTION_B),
                                     ('c', RANDOMLY_CHOSEN_OPTION_C))) 
```

其中，每次实例化时，都是`RANDOMLY_CHOSEN_OPTION`从 中随机选择的`PizzaTopping.objects.all`，只有一个是`PizzaTopping`也在 中`UserProfile.favourite_pizza_toppings`。

当用户发布表单时，我们需要验证表单——这是棘手的一点。我们必须以某种方式记录每个实例化表单的有效选择（`a`、`b`或`c`）。我们应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:23:36.070

**您将需要在表单init**方法中建立选项，否则每次页面加载时表单元素的选项都是相同的（它们不会改变）。

```
class QuestionForm(Form):
    questions = ChoiceField()

    def __init__(self, *args, **kwargs):
        super(QuestionForm, self).__init__(*args, **kwargs)
        self.fields['questions'].choices = set_up_choices() # function that creates list

    clean_questions(self):
        # do your validation of the question selection
        # here you could check whether the option selected matches
        # a correct value, if not throw a form validation exception
        return self.cleaned['questions'] 
```

# c# - 检查 dll 是否已安装且可用

> ID：12281808
> 
> 赞同：3
> 
> 时间：2012-09-05T12:49:00.040
> 
> 标签：c#, .net, dll

我正在尝试制作一个可能依赖于 Wacom 平板电脑的应用程序。该程序不需要工作，但它是一个很好的补充。虽然，它也应该在没有安装 Wintab32.dll 的计算机上工作，我想检查一下 DLL 是否可用。

这段代码会产生一个错误，我想在它产生之前捕获它。我正在使用 WintabDN 来支持 .net Wacom 应用程序。

```
if (WintabDN.CWintabInfo.IsWintabAvailable())
{
    // Initialize Wintab
    WintabLib.Initialize(true);
    WintabLib.OnWintabPacketReceived += WintabLib_OnWintabPacketReceived;
} 
```

> 失败 IsWintabAvailable：System.DllNotFoundException：无法加载 DLL“Wintab32.dll”：找不到指定的模块。（HRESULT 异常：0x8007007E）在 WintabDN.CWintabFuncs.WTInfoA(UInt32 wCategory_I, UInt32 nIndex_I, IntPtr IpOutput_O) 在 WintabDN.CWintabInfo.IsWintabAvailable()

这个错误的问题在于它是一个消息框，而不是包抛出的异常。如何防止此消息框出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:01:09.937

这有点棘手，因为底层异常已经在处理中。

试图阻止消息框显示将很困难，如果不是不可能的话。你*可以*做一些真正的黑客行为，比如观察者线程来捕捉前台窗口的变化，然后手动向应用程序的底层消息队列发送鼠标点击消息，以尝试触发消息框上的 OK 按钮。

所以我有两个建议：[这是关于DLL搜索顺序的官方主题](http://msdn.microsoft.com/en-us/library/ms682586.aspx)；您可以使用它来模拟搜索并提前找到文件。

如果您不想这样做，您可以从中导入`LoadLibrary`方法`kernel32.dll`，然后调用它以尝试加载 WintabDN 库尝试使用的 DLL；如果您遇到异常，那么您知道 WintabDN 库也会。这是一个*几乎*相关的主题，有助于绑定 LoadLibrary：http: [//blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_ .aspx](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:10:50.997

尝试以下哪些答案：

（如果系统上没有安装 Wintab，Wintab SDK 示例将无法运行。如果系统上没有平板电脑（没有 Wintab），如何使我的程序工作？）

[http://www.wacomeng.com/windows/docs/WacomWindevFAQ.html](http://www.wacomeng.com/windows/docs/WacomWindevFAQ.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:01:54.907

> 如何防止此消息框出现？

你不能：

```
 public static bool IsWintabAvailable()
    {
        IntPtr buf = IntPtr.Zero;
        bool status = false;

        try
        {
            status = (CWintabFuncs.WTInfoA(0, 0, buf) > 0);
        }
        catch (Exception ex)
        {
            MessageBox.Show("FAILED IsWintabAvailable: " + ex.ToString());
        }

        return status;
    } 
```

:D

我讨厌库开发人员，编写这样的代码。他们不应该决定您将选择哪种错误处理机制。

但它是开源的，你可以解决这个问题。
或者你可以在他们的跟踪器上发布一个错误，然后等待他们修复它。

# networking - 快速实时文本传输协议

> ID：12281813
> 
> 赞同：0
> 
> 时间：2012-09-05T12:49:22.373
> 
> 标签：networking, xmpp, real-time

我需要在两个远程 Java 应用程序之间传输命令。

我目前正在使用 XMPP 来传输命令的文本，但是对于快速的命令序列来说它有点太慢了。

是否有任何协议可以让我实现近乎实时的文本传输？（例如多人在线游戏中通常使用哪些协议）或者有什么方法可以加速 XMPP？

编辑：我现在专注于让两个应用程序进行通信。快速序列将是每秒大约 10-20 条消息（长度大约 30 个字符）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:57:24.657

您可以使用 ICE 在对等方之间建立 RTP 连接。Ice4j 是一个基于 Java 的库，您可以使用它。

# c# - 中级程序员使用 C# 进行 RPC

> ID：12281816
> 
> 赞同：1
> 
> 时间：2012-09-05T12:49:30.353
> 
> 标签：c#, rpc

我正在尝试使用 C# 实现 RPC，并且正在四处寻找示例，但甚至找不到 hello world 示例（类似于[http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello /你好世界.html](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html) )

JAVA 似乎是流行的选择，但由于我有一些用 C# 编码的经验（在 JAVA 中没有），所以我想在 C# 中尝试一下。

有人可以提供一些关于如何在 C# 中启动 socket/rpc 编程的指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:10:27.383

这个链接有点旧，但应该给你基本的想法。大约一年前我发现它很常见。 [RPC 简介](http://www.codeproject.com/Articles/4837/Introduction-to-RPC-Part-1) 该示例是用 C++ 编写的，但您应该能够将其重写为 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:21:04.150

使用 WCF查看其他[线程。](https://stackoverflow.com/questions/2878447/tutorial-simple-wcf-xml-rpc-client)最终WCF更加灵活，不仅限于XML，还可以做JSON和SOAP与其他平台进行交互操作。并且使用 Visual Studio 标准项目模板，这很容易。

# c# - Monotouch UITableViewCell AddSubView

> ID：12281817
> 
> 赞同：0
> 
> 时间：2012-09-05T12:49:32.583
> 
> 标签：c#, ios, xcode, xamarin.ios, custom-cell

我正在尝试创建一个类似表格/网格的视图，可用于显示大量信息。

我试图实现这一点的方法是创建一个自定义单元格视图。它基本上`UINavigationController`是 ，我知道这是不正确的，因为它需要是 a`UIView`才能将其添加到`UITableViewCell.ContentView.AddSubView(UiView view)`.

它看起来像这样：

![在此处输入图像描述](../Images/25b9eafd47f4f54f2c6072e668d010e4.png)

然后在我的表源中`GetCell()`我有这个。

```
public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
{
    int rowIndex = indexPath.Row;
    Incident _incident = tableData[rowIndex];

    UITableViewCell cell = tableView.DequeueReusableCell(cellID);
    if(cell == null)
        cell = new UITableViewCell(UITableViewCellStyle.Default, cellID);

    CustomCellView content = new CustomCellView();
    content.SetRef(_incident.Id);
    content.SetDescription(_incident.Description);

    cell.ContentView.Add(content);
    return  cell;
} 
```

它`cell.ContentView.Add`是我要去哪里错了吗？我只需要将我在 IB 中创建的自定义视图添加到单元格内容中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:08:55.733

我认为这个[答案](https://stackoverflow.com/q/5365385/220643)将帮助您将 Xcode/InterfaceBuilder NIB 文件与`UITableViewCell`.

要记住的一件重要事情是，您（经常）**重复使用**单元格，它们将处于您离开它们的状态。

因此，如果您每次**重用**`Add`单元格时都添加（例如或`AddSubview`）并且**从不**删除视图（或子视图...），那么您的内存使用量将随着时间的推移而增长（并且在滚动表格时可能会很快发生）。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:34:25.850

我自己想通了。我没有继承正确的观点。**

# c# - 将 ac# 命令行应用程序转换为 Windows 服务

> ID：12281819
> 
> 赞同：4
> 
> 时间：2012-09-05T12:49:35.447
> 
> 标签：c#, service, command-line

我找到了很多部分答案，但没有什么足够的。

案例：应用程序是一个工作命令行应用程序，没有用户交互，除了能够在输入时接收按键以停止，这已经以一种即使不作为 Environment.UserInteractive == 运行时也会禁用的方式编写真的。

我正在使用 Visual Studio 2010。

问题是我需要将此应用程序转换为 Windows 服务。是否“只是”将一个新的类文件作为服务，并让它在现有应用程序上调用我的启动和停止方法？

安装程序（VS 的默认 msi 安装程序）怎么样，现有的安装程序项目可以“升级”以处理服务安装吗？

我之前搞砸了这个，最后得到了一个安装程序，它一直拒绝安装，因为它一直检测到服务已经安装，停止安装过程，然后迅速回滚所有内容。它检测到的服务是它刚刚安装的服务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T13:09:10.233

要将控制台应用程序作为 Windows 服务或控制台应用程序运行，请编写单个控制台应用程序并使用命令行参数来确定您应该直接运行还是启动服务。包括一个安装程序/卸载程序，以使用正确的命令行参数作为 Windows 服务安装。

这是我们使用的提供此功能的基类。

```
using System;
using System.Collections;
using System.Configuration.Install;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.ServiceProcess;
using System.Windows.Forms;
using Microsoft.Win32;

namespace Console40
{
    public abstract class AbstractService : ServiceBase
    {
        public static AbstractService Current { get; private set; }

        protected virtual string HelpTextPattern
        {
            get
            {
                #region Help Text

                return
                    @"
USAGE

    {0} [command]

    WHERE [command] is one of

        /console   - run as a console application, for debugging
        /service   - run as a windows service
        /install   - install as a windows service
        /uninstall - uninstall windows service

";

                #endregion
            }
        }

        public abstract string DisplayName { get; }

        public ServiceExecutionMode ServiceExecutionMode { get; private set; }

        protected abstract Guid UninstallGuid { get; }

        protected virtual string UninstallRegKeyPath
        {
            get
            {
                return @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
            }
        }

        protected AbstractService(string serviceName)
        {
            ServiceName = serviceName;
            if (Current != null)
            {
                throw new InvalidOperationException(String.Format(
                         "Service {0} is instantiating but service {1} is already instantiated as current.  References to AbstractService.Current will only point to the first service.",
                         GetType().FullName,
                         Current.GetType().FullName));
            }
            Current = this;
        }

        public void Run(string[] args)
        {
            Environment.CurrentDirectory = AppDomain.CurrentDomain.BaseDirectory;

            if (args.Length == 0 && Debugger.IsAttached)
            {
                args = new[] { "/console" };
            }

            if (args.Length == 0)
            {
                Console.WriteLine(HelpTextPattern, Path.GetFileName(GetType().Assembly.CodeBase));
            }
            else
            {
                switch (args[0].ToLower())
                {
                    case "/service":
                        ServiceExecutionMode = ServiceExecutionMode.Service;
                        Run(new[] { this });
                        break;

                    case "/console":
                        ServiceExecutionMode = ServiceExecutionMode.Console;
                        Console.WriteLine("Starting Service...");
                        OnStart(new string[0]);
                        OnStartCommandLine();
                        OnStop();
                        break;

                    case "/install":
                        ServiceExecutionMode = ServiceExecutionMode.Install;
                        InstallService();
                        break;

                    case "/uninstall":
                        ServiceExecutionMode = ServiceExecutionMode.Uninstall;
                        UninstallService();
                        break;

                    case "/uninstallprompt":
                        ServiceExecutionMode = ServiceExecutionMode.Uninstall;
                        if (ConfirmUninstall())
                        {
                            UninstallService();
                            InformUninstalled();
                        }
                        break;

                    default:
                        if (!OnCustomCommandLine(args))
                        {
                            Console.WriteLine(HelpTextPattern, Path.GetFileName(GetType().Assembly.CodeBase));
                        }
                        break;
                }
            }
        }

        protected override void OnStart(string[] args)
        {
            OnStartImpl(args);

            AppDomain.CurrentDomain.UnhandledException += OnCurrentDomainUnhandledException;
        }

        protected virtual void OnStartCommandLine()
        {
            Console.WriteLine("Service is running...  Hit ENTER to break.");
            Console.ReadLine();
        }

        protected abstract void OnStartImpl(string[] args);

        void OnCurrentDomainUnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            // do something useful here, log it..
        }

        protected override void OnShutdown()
        {
            Stop();
        }

        protected override void OnStop()
        {
            OnStopImpl();
        }

        protected abstract void OnStopImpl();

        protected virtual bool OnCustomCommandLine(string[] args)
        {
            // for extension
            return false;
        }

        private void InstallService()
        {
            GetInstaller(".InstallLog").Install(new Hashtable());
            InstallServiceCommandLine();
            CreateUninstaller();
        }

        private void InstallServiceCommandLine()
        {
            string keyParent = @"SYSTEM\CurrentControlSet\Services\" + ServiceName;
            const string VALUE_NAME = "ImagePath";

            try
            {
                using (RegistryKey key = Registry.LocalMachine.OpenSubKey(keyParent, true))
                {
                    if (key == null)
                    {
                        throw new InvalidOperationException("Service not found in registry.");
                    }

                    var origPath = key.GetValue(VALUE_NAME) as string;
                    if (origPath == null)
                    {
                        throw new Exception("HKLM\\" + keyParent + "\\" + VALUE_NAME + " does not exist but was expected.");
                    }

                    key.SetValue(VALUE_NAME, origPath.Replace("\"\"", "\"") + " /service");
                }
            }
            catch (Exception ex)
            {
                throw new Exception(
                    "Error updating service command line after installation.  Unable to write to HKLM\\" + keyParent, ex);
            }
        }

        private void CreateUninstaller()
        {
            using (RegistryKey parent = Registry.LocalMachine.OpenSubKey(UninstallRegKeyPath, true))
            {
                if (parent == null)
                {
                    throw new Exception(String.Format("Uninstall registry key '{0}' not found.", UninstallRegKeyPath));
                }
                try
                {
                    RegistryKey key = null;

                    try
                    {
                        string guidText = UninstallGuid.ToString("B");
                        key = parent.OpenSubKey(guidText, true) ??
                              parent.CreateSubKey(guidText);

                        if (key == null)
                        {
                            throw new Exception(String.Format("Unable to create uninstaller '{0}\\{1}'", UninstallRegKeyPath, guidText));
                        }

                        Assembly asm = GetType().Assembly;
                        Version v = asm.GetName().Version;
                        string exe = "\"" + asm.CodeBase.Substring(8).Replace("/", "\\\\") + "\"";

                        key.SetValue("DisplayName", DisplayName);
                        key.SetValue("ApplicationVersion", v.ToString());
                        key.SetValue("Publisher", "B-Line Medical");
                        key.SetValue("DisplayIcon", exe);
                        key.SetValue("DisplayVersion", v.ToString(2));
                        key.SetValue("URLInfoAbout", "http://www.blinemedical.com");
                        key.SetValue("Contact", "support@blinemedical.com");
                        key.SetValue("InstallDate", DateTime.Now.ToString("yyyyMMdd"));
                        key.SetValue("UninstallString", exe + " /uninstallprompt");
                    }
                    finally
                    {
                        if (key != null)
                        {
                            key.Close();
                        }
                    }
                }
                catch (Exception ex)
                {
                    throw new Exception(
                        "An error occurred writing uninstall information to the registry.  The service is fully installed but can only be uninstalled manually through the command line.",
                        ex);
                }
            }
        }

        private bool ConfirmUninstall()
        {
            string title = "Uninstall " + DisplayName;
            string text = "Are you sure you want to remove " + DisplayName + " from your computer?";
            return DialogResult.Yes ==
                   MessageBox.Show(text, title, MessageBoxButtons.YesNo, MessageBoxIcon.Question,
                                   MessageBoxDefaultButton.Button2);
        }

        private void InformUninstalled()
        {
            string title = "Uninstall " + DisplayName;
            string text = DisplayName + " has been uninstalled.";
            MessageBox.Show(text, title, MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

        private void UninstallService()
        {
            GetInstaller(".UninstallLog").Uninstall(null);
            RemoveUninstaller();
        }

        private TransactedInstaller GetInstaller(string logExtension)
        {
            var ti = new TransactedInstaller();

            ti.Installers.Add(new ServiceProcessInstaller
            {
                Account = ServiceAccount.LocalSystem
            });

            ti.Installers.Add(new ServiceInstaller
            {
                DisplayName = DisplayName,
                ServiceName = ServiceName,
                StartType = ServiceStartMode.Automatic
            });

            string basePath = Assembly.GetEntryAssembly().Location;
            String path = String.Format("/assemblypath=\"{0}\"", basePath);
            ti.Context = new InstallContext(Path.ChangeExtension(basePath, logExtension), new[] { path });

            return ti;
        }

        private void RemoveUninstaller()
        {
            using (RegistryKey key = Registry.LocalMachine.OpenSubKey(UninstallRegKeyPath, true))
            {
                if (key == null)
                {
                    return;
                }
                try
                {
                    string guidText = UninstallGuid.ToString("B");
                    RegistryKey child = key.OpenSubKey(guidText);
                    if (child != null)
                    {
                        child.Close();
                        key.DeleteSubKey(guidText);
                    }
                }
                catch (Exception ex)
                {
                    throw new Exception(
                        "An error occurred removing uninstall information from the registry.  The service was uninstalled will still show up in the add/remove program list.  To remove it manually delete the entry HKLM\\" +
                        UninstallRegKeyPath + "\\" + UninstallGuid, ex);
                }
            }
        }
    }

    public enum ServiceExecutionMode
    {
        Unknown,
        Service,
        Console,
        Install,
        Uninstall,
        Custom
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:11:50.987

[保持 C# 应用程序运行](https://stackoverflow.com/questions/10688727/keep-c-sharp-application-running/10688777#10688777)

```
public partial class DemoService : ServiceBase
{
    static void Main(string[] args)
    {
        DemoService service = new DemoService();

        if (Environment.UserInteractive)
        {
            service.OnStart(args);
            Console.WriteLine("Press any key to stop program");
            Console.Read();
            service.OnStop();
        }
        else
        {
            ServiceBase.Run(service);
        }
    } 
```

检查上面的链接。我提供了一些代码以及描述使用控制台作为控制台和服务的双重职责的链接。我将使用控制台项目并在作为服务运行之前检查 UserInteractive。这样您就可以像控制台一样进行调试，但可以将其作为服务安装在生产服务器上。

关于安装，我没有从 .msi 安装的经验，但我们使用批处理脚本来安装服务（使用 sc.exe），然后如果您更新代码，只需替换文件即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:08:49.290

对您来说最好的办法是启动一个新项目作为 Windows 服务。在这个新项目中，您将找到 Service1.cs，这是将从头开始运行的文件。以下代码将在文件中：

```
namespace WindowsService1
{
    public partial class Service1 : ServiceBase
    {
        public Service1()
        {
        InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
        }

        protected override void OnStop()
        {
        }
    }
} 
```

从这里弄清楚要做什么并不难。只需将您的类添加到项目中，并确保将主代码复制到 OnStart() 函数中。当然，您可能需要稍微编辑代码以确保其中没有 readlines。

现在您必须创建和安装程序。如何做到这一点可以在这里找到：http: [//msdn.microsoft.com/en-us/library/zt39148a%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.100%29.aspx)

我希望这会有所帮助：D

亲切的问候

RoXaS

# c# - C# 泛型和强制转换

> ID：12281826
> 
> 赞同：4
> 
> 时间：2012-09-05T12:50:04.120
> 
> 标签：c#, generics, casting

我在我们的代码库中遇到了一个抛出错误的函数：

```
public static T InternalData<T>()
{
    return (T)"100";
} 
```

显然我已经简化了代码并将“100”添加为文字字符串值。T 属于 类型`int`。

它抛出一个：

> System.InvalidCastException：指定的强制转换无效。

似乎您无法`int`在 C# 中隐式转换字符串，我该如何修复此代码以便它可以处理转换任何泛型类型？

实际代码如下所示：

```
public static T InternalData<T>()
{
    return (T) something (not sure of type or data);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T12:51:45.933

尝试：

```
public static T InternalData<T>(object data)
{
     return (T) Convert.ChangeType(data, typeof(T));
} 
```

这适用于实现`IConvertible`接口的类型（which `Int32`and `String`does）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T12:52:17.473

一种可能性是使用

```
return (T)Convert.ChangeType(yourValue, typeof(T)); 
```

`yourValue`请注意，如果不是实现的类型的实例，这将引发异常`IConvertible`。如果值本身无法转换，它也会抛出异常，例如如果你有“abc”而不是“100”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T12:52:50.083

使用`Convert.ChangeType`.

```
public static T InternalData<T>()
{
    return (T)Convert.ChangeType("100", typeof (T));
} 
```

如果无法转换值，它仍然会抛出错误，但它不会尝试进行直接转换。它可以将字符串转换为整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:02:52.147

不要混淆铸造和转换！如果编译器不知道表达式的真实类型，例如因为它的类型为`object`，并且您知道它的固有类型，则可以告诉 C# 编译器，“嘿，我知道它是 a `int`，所以请把它当作 a `int`” .

```
 (int)expression 
```

在您的情况下，表达式是一个字符串表达式，不能转换为`int`，只是因为它不是`int`. 但是，您可以将字符串转换为`int`是否表示有效整数。此外，您的转换结果类型是未知的，因为它是通用的。`(T)Convert.ChangeType(...)`像其他人已经建议的那样使用。

# .net - umbraco 后端登录在 FireFox 中不起作用

> ID：12281829
> 
> 赞同：2
> 
> 时间：2012-09-05T12:50:13.417
> 
> 标签：.net, firefox, iis, cookies, umbraco

今天我们开始遇到使用 FireFox 登录 Umbraco 的问题 - 按下登录按钮后，登录页面会刷新而没有错误。登录在 IE、Opera、Safari 和 Chrome 中正常工作。

经过调查，我发现原因是FireFox不接受umbraco cookie。

按登录后，我看到此响应

![在此处输入图像描述](../Images/7bb5f7103f49cb1287aea257e70869c3.png)

但是这个 cookie 不会出现在下一个请求中。

我检查了以下内容：

*   FireFox 中的 Cookie 权限。
*   域名不包含下划线。
*   App_Browsers 文件夹包含为所有浏览器启用 cookie 的浏览器文件。

任何建议和帮助将不胜感激。

环境配置

*   视窗服务器 2008
*   IIS 7
*   .NET 4
*   Umbraco 4.7.1
*   火狐 15

谢谢

2012 年 6 月 9 日更新

这是我发现解决方案完全相同的问题，但这**对我不起作用**，也许有人会更幸运:)

详细问题描述：使用 fiddler 会显示对 /umbraco/umbraco.aspx/ 的 URL 请求，然后立即转到 /umbraco/logout.aspx?redir=%2fumbraco%2fumbraco.aspx%2f，这会将您带回登录屏幕。

解决方案：嗯，我想通了。在 IIS 7.5 上输入 HTTP 重定向时，请务必小心操作。[当有人输入http://login.myurlhere.com/](http://login.myurlhere.com/)时，我最初设置了重定向地址

指向以下

[http://www.myurlhere.com/umbraco/umbraco.aspx](http://www.myurlhere.com/umbraco/umbraco.aspx)

这样做是为了给最终用户提供一种访问登录屏幕的简单方法。它似乎被困在一个循环中，所以我没有将它指向[http://www.myurlhere.com/umbraco/login.aspx](http://www.myurlhere.com/umbraco/login.aspx)并在下面的框中进行重定向行为（我相信这是关键）我检查了“将所有请求重定向到确切的目的地（而不是相对于目的地）”这已经解决了我在 FF/IE/Chrome 中的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:57:42.933

您能否验证服务器日期/时间是否与工作站时间/日期相同？当它们不同步时，我曾经遇到过这样的奇怪问题。

事实上，看起来在上面的标题中显示了 9/8 的日期，并且 cookie 应该在 9/6 到期...

# zsh - ZSH Shell 历史记录不起作用

> ID：12281833
> 
> 赞同：42
> 
> 时间：2012-09-05T12:50:21.200
> 
> 标签：zsh

我最近从 bash 切换到 zshell，但我的历史似乎不起作用。当我按下向上箭头时，我没有收到以前的命令。捷径不一样吗？另外，如何通过选项卡和新窗口启用共享历史记录？我在 Lion 上，使用标准终端

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-27T17:50:54.277

将此添加到您的`.zshrc`：

```
SAVEHIST=1000  # Save most-recent 1000 lines
HISTFILE=~/.zsh_history 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-08-08T15:37:34.327

要添加到用户 RoboSloNE，如果您仔细检查是否已通过以下方式设置 SAVEHIST 和 HISTFILE：

```
$echo $HISTFILE
 ~/.zsh_history
$echo $SAVEHIST
 100 
```

然后下一步是检查HISTFILE的权限：

```
$ls -l $HISTFILE
 -rw-------  1 user  staff  3722 Aug  8 11:29 /Users/user/.zsh_history 
```

您的用户需要对此文件具有读/写权限才能将其用作您的历史文件。我注意到以 root 身份安装 oh-my-zsh 会将此文件权限设置为 root，因此您需要：

```
$chown user:group $HISTFILE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-30T16:37:16.033

我已经使用 vim ~/.zshrc 下面的设置解决了 zsh 历史记录

```
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000 
```

但我对阅读历史有疑问。我需要手动清理文件`~/.histfile`然后开始工作。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-13T02:23:40.813

如果所有这些都不起作用，我的建议是检查文件的权限`~/.zsh_history`。

例如，输入

```
sudo chmod 777 ~/.zsh_history 
```

# html - JSF/Facelets : CSS 文件没有被识别使用 标签

> ID：12281839
> 
> 赞同：20
> 
> 时间：2012-09-05T12:50:49.633
> 
> 标签：html, css, jsf, facelets

我正在使用 JSF/Facelets 开发一个项目。我想对我的 View XHTML 做一些 CSS 更改，但是当我在我的 Tomcat 服务器中部署我的 Web 应用程序时没有任何反应。我尝试了很多技巧，但我得到了相同的结果。

无论如何，这是我的“styles.css”：

```
body { width: 750px; }

#header 
{
width:              100%;
font-size:          36px;
font-weight:        bold;
line-height:        48px;
background-color:   navy;
color:              white;
}

#footer
{
width:              100%;
font-weight:        bold;
background-color:   navy;
color:              white;
} 
```

这是主模板“Template.html”，包括“Header.html”和“Footer.html”，我在其中使用标签放置了“styles.css”：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<h:outputStylesheet name="css/styles.css" />
    <!-- i've also tried this one, using the "library" attribute -->
    <!--
     <h:outputStylesheet library="css" name="styles.css" />
    -->
</head>
<h:body>
<h:panelGroup id="page" layout="block">

    <h:panelGroup id="header" layout="block">
        <ui:insert name="header">
            <ui:include src="Header.html" />
        </ui:insert>
    </h:panelGroup>

    <h:panelGroup id="container" layout="block">
        <h:panelGroup id="content" layout="block">
            <ui:insert name="content">CONTENT</ui:insert>
        </h:panelGroup>
    </h:panelGroup>

    <h:panelGroup id="footer" layout="block">
        <ui:insert name="footer">
            <ui:include src="Footer.html" />
        </ui:insert>
    </h:panelGroup>

</h:panelGroup>

</h:body>
</html> 
```

Anf 最后是我的“Main.xhtml”，其中包括模板“Template.html”：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich" template="Template.html">
<h:body>
    <ui:define name="content">
        <h:form>
            <h:inputText title="inputText"></h:inputText>
            <h:commandButton value="OK"></h:commandButton>
        </h:form>
    </ui:define>
</h:body>
 </ui:composition> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-05T13:08:55.710

( `<h:outputStylesheet>`and `<h:outputScript>`) 需要 a `<h:head>`，但你有一个`<head>`. 相应地修复它。

```
<h:head>
    <h:outputStylesheet name="css/styles.css" />
</h:head> 
```

此外，您需要确保将`css/styles.css`文件放置在`/resources`公共 Web 内容的子文件夹中。

```
WebContent
 |-- resources
 |    `-- css
 |         `-- styles.css
 : 
```

至于您尝试使用该`library`属性，请注意这一点，`library="css"`在这种情况下使用并不完全正确。另请参阅：[JSF 资源库的用途是什么以及应该如何使用它？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-07-18T06:11:46.697

**在WebContent**下添加**资源**文件夹

 **并在资源内部创建 css 文件夹

然后像这样访问文件

`h:outputStylesheet library="css" name="myNewStylesFile.css" target="head"` 在`h:head`您未添加的部分下**

# hadoop - 匹配数千个查询中的海量数据记录

> ID：12281844
> 
> 赞同：0
> 
> 时间：2012-09-05T12:50:57.550
> 
> 标签：hadoop, hbase

我有很多数据记录。（大约 15 亿条）和很多查询。（大约 1 万条）。

每条记录可以匹配多个查询。（可以通过对数据记录评估查询来确定）

记录存储在分布式数据库中。每条记录都有一个字段来存储与该数据记录匹配的查询的 ID。

我可以在大约 15 分钟内扫描所有记录。（但对数据不做任何事情）。

对于每条记录。我想用它匹配的查询 ID 标记它。没有很大的延迟（例如：1小时）。有没有一个好的算法来做到这一点？在查询上迭代每个查询不是解决方案。我认为需要某种索引。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:30:34.883

Apache Pig 默认开启了多查询。如果您的查询共享相同的数据源，那么 Pig 将并行执行它们，因此输入数据只读取一次。

# java - Java：可能有不止一种类型的流？

> ID：12281848
> 
> 赞同：0
> 
> 时间：2012-09-05T12:51:02.917
> 
> 标签：java, networking, io, stream, protocols

想知道是否可以成功地做这样的事情：

```
Socket s = new Socket("", 1234);
BufferedInputStream in = new BufferedInputStream(s.getInputStream());
BufferedOutputStream out = new BufferedOutputStream(s.getOutputStream());
ObjectInputStream oin = new ObjectInputStream(s.getInputStream());
ObjectOutputStream out = new ObjectOutputStream(s.getOutputStream()); 
```

或者，如果有更好的方法来做到这一点。我问是因为我想通过缓冲 I/O 流发送原始数据，并使用对象流作为通信细节和为我的程序建立连接协议的手段。现在我试图只使用缓冲流并`byte`为我的客户端/服务器协议使用数组，但是我遇到了一个小问题，`byte`我收到的数组不等于我期望的，所以`==`操作符和`.equals()`方法做不适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:54:19.530

你不能混合使用流，因为它们都是缓冲的，所以你会得到腐败和混乱。

只需将 ObjectStreams 用于所有内容。

通常，您应该只读取或写入流的一个 Stream、Reader 或 Writer。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:58:40.003

去看看[如何在同一个 InputStream 上读取不同的数据组，为每个数据使用不同类型的 InputStream？](https://stackoverflow.com/questions/12110523/how-can-i-read-different-groups-of-data-on-the-same-inputstream-using-different)看看我那边的回答是否有帮助。它涉及在 ObjectStream 中标记数据，以了解它是文本还是对象。

# wso2 - wso2 esb 序列数据库更新

> ID：12281854
> 
> 赞同：0
> 
> 时间：2012-09-05T12:51:19.313
> 
> 标签：wso2, esb, wso2esb, orchestration

我对输出语法错误的 DBreport 调解器有疑问，但我在 SQL 语句中看不到任何错误

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="_dbcount">
   <dblookup>
      <connection>
         <pool>
            <password>1234</password>
            <user>root</user>
            <url>jdbc:mysql://localhost:3306/new_db</url>
            <driver>com.mysql.jdbc.Driver</driver>
         </pool>
      </connection>
      <statement>
         <sql>
            <![CDATA[            select * from consume where username= ? and id_api+ ?]]></sql>
            <parameter value="riccardo" type="VARCHAR" />
            <parameter value="1" type="INTEGER" />
            <result name="result_use" column="use" />
            <result name="result_user" column="username" />
         </statement>
      </dblookup>
      <dbreport>
         <connection>
            <pool>
               <password>1234</password>
               <user>root</user>
               <url>jdbc:mysql://localhost:3306/new_db</url>
               <driver>com.mysql.jdbc.Driver</driver>
               <property name="autocommit" value="false" />
            </pool>
         </connection>
         <statement>
            <sql>
               <![CDATA[UPDATE consume SET use=21 WHERE username='riccardo' AND id_api='1']]></sql>
            </statement>
         </dbreport>
         <log level="custom">
            <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="result for client" expression="get-property('result_user')" />
            <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="result for use" expression="get-property('result_use')" />
         </log>
      </sequence> 
```

**第一个 DB 查找工作正常，但 DBreport 中的第二个 SQL 语句无法更新值：**

```
ERROR - DBReportMediator Error execuring insert statem
ent : UPDATE consume SET use='21' WHERE username='riccardo' AND id_api='1' again
st DataSource : jdbc:mysql://localhost:3306/new_db
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in
your SQL syntax; check the manual that corresponds to your MySQL server version
for the right syntax to use near 'use='21' WHERE username='riccardo' AND id_api=
'1'' at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)... 
```

我的表格如下：

消费（int id，varchar 用户名，int id_api，int 使用）用户（int id，varchar 用户名，varchar 密码）

非常感谢

**编辑**我认为在 Mysql DB 上写入时 DBREPORT 和 DBLOOKUP 中介存在重大问题，阅读很好，但更新和插入不起作用......告诉我我是否错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:37:25.777

努维奥，

我认为这个问题的出现不是因为 DBReport 调解器有问题。在查看报告的堆栈跟踪和序列配置时，我可以看到您已将“使用”定义为列名。我不太确定您是如何使用“use”一词创建数据库列的，因为它是 MySQL 关键字，并且只要您的 SQL 查询中有关键字作为列或任何其他用户定义的属性，MySQL 查询编译器就会抛出 SQLException . 使用非关键字名称代替“使用”列将解决您的问题。

干杯，普拉巴斯

# c++ - Boost Python 的性能

> ID：12281855
> 
> 赞同：5
> 
> 时间：2012-09-05T12:51:19.967
> 
> 标签：c++, python, boost-python

我正在做一个正在试验 boost python 的项目。在研究如何组织我的 python 界面时，我遇到了一条[评论](https://stackoverflow.com/questions/4774807/how-to-organise-python-boost-python-projects/4774896#4774896)，声称 boost python 存在性能问题。它的性能有什么实际问题吗？

在这种情况下，我正在处理一个大型项目，我们希望将其中的一些暴露给 python。我发现 boost python 可以很容易地公开我已经拥有的类。所以我宁愿坚持使用 boost python 的暴露类的方法，因为它很简单。除非有人有一个同样易于使用和高性能的替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:30:14.603

如果您的用例需要在紧密循环中在 Python 和 C++ 之间来回调用大量调用，那么 Boost.Python 可能是一个性能问题，至少相对于直接使用 Python C-API 的手动包装器而言。很难猜测它是否会比类似用户友好的东西（如 SWIG）更糟糕。

但最大的性能问题是您是否可以避免这种来回的来回——无论您使用什么库或包装工具，一个可以避免反复跨越 C++/Python 障碍的 API 通常总是比这样做的 API 性能更好。大多数情况下，这意味着将循环从 Python 移至 C++，并避免 Python 回调，尤其是在这些循环中避免 Python 到 C++ 的类型转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:30:45.640

我们正在使用 boost::python 将一个大型计算机视觉库集成到一个高度可配置的软件包中，供其他领域的研究人员使用。我们没有遇到任何疑虑或问题。但是，我们最近没有进行任何比较测试。

# c# - 将用户控件添加到画布

> ID：12281856
> 
> 赞同：1
> 
> 时间：2012-09-05T12:51:20.793
> 
> 标签：c#, wpf, xaml, canvas, user-controls

我见过其中一个例子是 [在运行时添加 WPF 控件](https://stackoverflow.com/questions/311131/add-wpf-control-at-runtime) 似乎这个解决方案对很多人都有效。我到底做错了什么？我的标签不会显示在画布上。

```
Label l = new Label();
l.Background = new LinearGradientBrush(Colors.Black, Colors.Black, 0);
canBackArea.Children.Add(l);
l.Visibility = System.Windows.Visibility.Visible;
l.Content = "Hello";
Canvas.SetLeft(l,20); 
Canvas.SetTop(l, 20);
Canvas.SetZIndex(l, lableList.Count); 
```

帆布有白色，因此背景。canBackArea 是一个画布

XML 代码

```
 <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Visible">
        <Canvas Name="canBackArea"
                Width="500"
                Height="300"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Background="White"
                MouseMove="canBackArea_MouseMove">
            <telerik:RadContextMenu.ContextMenu>
                <telerik:RadContextMenu Name="mnuBack"
                                        ItemClick="ContextMenu_ItemClick"
                                        Opened="mnuBack_Opened">
                    <telerik:RadMenuItem Name="mBackground" Header="Set Background Image" />
                    <telerik:RadMenuItem Name="mSize" Header="Set Size" />
                    <telerik:RadMenuItem Name="mLable" Header="Add Text" />
                    <telerik:RadMenuItem Name="mChangeText" Header="Change Text" />
                </telerik:RadContextMenu>
            </telerik:RadContextMenu.ContextMenu>
            <Image Name="imgBackground" />
        </Canvas>
    </ScrollViewer> 
```

添加很多标签后。

![](../Images/95d29f2e0a18fbad0884a8ad5d0366fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:05:16.640

这是我的 MainWindow.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Canvas x:Name="canBackArea">

</Canvas> 
```

这是我的代码隐藏。

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Label l = new Label();

        canBackArea.Children.Add(l);
        l.Visibility = System.Windows.Visibility.Visible;
        l.Content = "Hello";
        Canvas.SetLeft(l, 20);
        Canvas.SetTop(l, 20);
    } 
```

这工作得很好。

[http://i.imgur.com/JooqS.png](http://i.imgur.com/JooqS.png)

这可能取决于您使用它的上下文？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:25:49.633

使用你的 xaml 和这个

```
private void mnuBack_ItemClick(object sender, Telerik.Windows.RadRoutedEventArgs e)
    {
        Label l = new Label();

        canBackArea.Children.Add(l);
        l.Visibility = System.Windows.Visibility.Visible;
        l.Content = "Hello";
        Canvas.SetLeft(l, 20);
        Canvas.SetTop(l, 20);
        Canvas.SetZIndex(l, lableList.Count);
        lableList.Add(l);
    } 
```

我可以添加标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:19:05.303

我试图重现您的问题，我怀疑可能的问题应该是

*   没有为标签控件设置前景色。
*   zIndex 应该比我认为的任何其他子控件更多 Canvas.SetZIndex(l, canBackArea.Children.Count);

以下是我尝试和测试过的。

## XAML 代码

```
<Window x:Class="TestApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="269*" />
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal">
            <Label Content="New Label Content" Height="30" />
            <TextBox x:Name="txtLabelContent" Width="200" Height="30"></TextBox>
            <Button Margin="10 0 0 0" Height="30" Width="70" Click="Button_Click">Add Label</Button>
        </StackPanel>
        <Canvas Grid.Row="1" x:Name="canBackArea" Background="White" Grid.RowSpan="2">
        </Canvas>
    </Grid>
</Window> 
```

## 窗口代码隐藏

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace TestApplication
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Label l = new Label();
            l.Background = new LinearGradientBrush(Colors.Black, Colors.Black, 0);
            l.Foreground = new LinearGradientBrush(Colors.White, Colors.White, 0);
            canBackArea.Children.Add(l);
            l.Visibility = System.Windows.Visibility.Visible;
            l.Content = txtLabelContent.Text;
            Canvas.SetLeft(l, 20);
            Canvas.SetTop(l, 20);
            Canvas.SetZIndex(l, canBackArea.Children.Count);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:33:24.120

问题是我正在使用样式，而且我的标签写得太多了，我用文本框替换了它，一切看起来都很好......

# git - 我可以在 git 推送时继续工作吗？

> ID：12281859
> 
> 赞同：20
> 
> 时间：2012-09-05T12:51:32.010
> 
> 标签：git, git-push

我正在将现有代码初始导入 git，这是一个相当大的代码库，所以推送需要时间。

据我所知，git 获取更改然后上传，所以在推送进行时我是否可以安全地继续工作，或者我是否需要等待它完成才能修改文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T12:55:10.220

当 Git 推送时，它不会从工作树中读取或写入任何内容，只会从`.git`文件夹中读取或写入内容。

所以是的，你可以安全地继续工作。

# php - PHP 平等 - 我哪里错了？

> ID：12281860
> 
> 赞同：1
> 
> 时间：2012-09-05T12:51:33.360
> 
> 标签：php, integer, equality

这让我发疯了。两个整数应该相等。

```
<?php

function getPort() {
    return 443;
}

$port = getPort(); 
var_dump(433, $port, $port == 433, 443 == $port, 433 == 433);

?> 
```

结果在 PHP 5.2 和 5.4 中：

```
int(433)
int(443)
bool(false)
bool(true)
bool(true) 
```

在前面的代码中，为什么 $port 不等于 443 但 443*等于*$port？我一定是在做一些愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:53:50.690

小错字：

一旦您将 433 与`$port`而不是 443 进行比较！

```
$port == 433 
```

对比

```
443 == $port 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:53:07.470

您在第一个参数中执行 $port == 433 并在第二个参数中执行 443 ，因此它是正确的。

所以，回答你的问题，是的；你在做一些愚蠢的事情！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:55:32.170

您在 $port 中设置 443 并与 433 进行比较。这将始终返回 false。

# java - JavaFx ml Eclipse

> ID：12281864
> 
> 赞同：0
> 
> 时间：2012-09-05T12:51:44.100
> 
> 标签：java, eclipse, javafx-2, fxml, scenebuilder

我之前发布过一个关于这个话题的问题，我走得很远，但突然撞墙了

所以事情已经厌倦了 Eclipse 的 gui builder 中的构建，我想尝试 JavaFx Scene builder 到目前为止，我安装了 e(fx)clipse，我还安装了最新版本的 JDK

我上一个问题的人给了我这个链接： [http ://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)

它基本上展示了我如何从在 java 中创建 FXML 项目开始。但是，此指南适用于 Netbeans，当我尝试按照创建项目的步骤操作时，我在以下事情上失败了：

2.在JavaFX 应用程序类别中，选择JavaFX FXML 应用程序。点击下一步

我根本没有选择 JavaFx Fxml 应用程序的选项。

所以我的问题是，你们中的任何人都有关于 eclipse 的指南吗，或者你们中的任何人有这方面的经验，并且能够分享我想在 JavaFx Scene builder 中构建我的 gui 时应该做什么?

希望你们中的一个能够帮助我

最好的祝福

马克·拉斯穆森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:53:01.857

将[e(fx)](http://efxclipse.org/)插件安装到您的 eclipse 中。

# html - 如何在 KineticJS 管理的 HTML5-Canvas 中收听 Keydown-Events？

> ID：12281866
> 
> 赞同：11
> 
> 时间：2012-09-05T12:51:51.280
> 
> 标签：html, events, canvas, html5-canvas, kineticjs

我正在尝试将事件侦听器添加到由 Kineticjs 管理的 Htm5-Canvas [（](http://www.kineticjs.com/)画布是通过 KineticJS 的阶段创建的）。

我试过（使用jQuery）：

$(*选择器*).keydown( 函数(e) {... } )

使用以下选择器：

*   窗口（**它正在工作**，但它正在听整个窗口，因此不好）
*   所有画布元素 $('canvas') *<-- 不工作*
*   嵌入 KineticJS 及其画布的容器 *<-- 不工作*
*   KineticJS（由 Kinetic 创建）的 Container-Div 与 $('.kineticjs-content').keydown( function() { ... } ) *<--不工作*

只有 $(window) 正在工作。在尝试了普通的 Html5-Canvas 之后，我发现 Canvas-Element 具有对键盘事件的内置支持。所以我认为，KineticJS 在这里做了一些神奇的事情。可以排除错误的选择器用法。

我使用以下代码检查了每个选择器：console.log( $(selector).length )

有人可以在这里帮忙吗？提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T17:13:15.257

我建议使用其中一个键盘插件：

*   [http://robertwhurst.github.io/KeyboardJS/](http://robertwhurst.github.io/KeyboardJS/)
*   [http://dmauro.github.io/Keypress/](http://dmauro.github.io/Keypress/)

它们与 KineticJS 一起工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T01:49:59.107

如果您可以在其中包含 javascript，则代码如下：

```
if(keyIsPressed && keycode == somenumber){
doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T03:50:08.467

见[链接](https://github.com/ericdrowell/KineticJS/issues/894)，你需要：

```
var canvas=layer.getCanvas()._canvas;
$(canvas).attr('tabindex', 0); // increase tabindex if needed
canvas.focus();
$(canvas).keydown(function (e) {
    console.log(e.keyCode); // your handler here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T14:29:57.490

根据我对此（2天）的有限经验，我看到您添加的每一层都变成了一个画布，所以如果您在变量（即`topmostLayer`）中有对最顶层的引用，您可以这样做

```
var canvas = $(topmostLayer.getContext().canvas); 
```

有了这个，[@devnull69 的](https://stackoverflow.com/users/1030974/devnull69)建议就可以了：

```
canvas.attr('tabindex', 0);
canvas.keydown(function (ev) { ... }); 
```

我在我的应用程序中安装了它并且工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T01:37:32.250

截至目前[On](http://kineticjs.com/docs/symbols/Kinetic.Node.php#on)仅支持鼠标和触摸事件。

每个图层都有自己的[画布](http://kineticjs.com/docs/symbols/Kinetic.Layer.php#getCanvas)，您可以在其中抓取和附加事件。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-05T13:16:14.733

您必须确保 canvas 元素具有焦点，然后才能接受键盘事件。不幸的是 .focus() 方法在 Firefox 中对我不起作用，所以我尝试了这个，瞧

```
$('canvas').attr('tabindex', 0);
$('canvas').keydown(function(e) {
    alert(e.keyCode);
    e.preventDefault();    // to stop the key events from bubbling up
}); 
```

单击画布，它将获得焦点。

# java - 如何以编程方式在 twitpic/twitter 上上传视频？

> ID：12281867
> 
> 赞同：0
> 
> 时间：2012-09-05T12:51:52.463
> 
> 标签：java, android, twitter, twitter4j

我是安卓新手。我正在努力在 Twitter 上上传图片/视频。为此，我使用了 twitpic。我首先将图像发送到 twitpic，然后使用推文的 url 更新 twitter 中的状态。根据我从图库中的选择成功加载图像。

但我被困在推特上上传视频。因为上传视频有 twitpic 或 twitvid 选项。但是没有给出这种类型的代码或 sdk。很困惑如何做到这一点，必须使用哪些类。

我需要一个上传视频的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:18:23.977

我自己也被困了一段时间（周围没有很多例子），并在 SO 上找到了一个不起作用的例子，我已经设法塑造它......

首先你需要[twitvid Java API](http://twitvid.pbworks.com/w/page/22556292/Client%20Libraries)

1 下载jar文件（我用的是twitvid-java 1.6.1）

2把它放在你的“libs”文件夹中

3 右键单击​​您的项目并转到“属性”

4 选择“Java 构建路径”并包含 jar（“库”选项卡）并确保它已构建（“订购和导出”选项卡）

下面的代码假设您已经使用常规 twitter4j 方法制作了一个令牌：

```
private void postToTwitvid(String videoPath){

    AccessToken token = mTwitter.getAccessToken();

    Values values = new Values();
    values.setSession(new Session());
    TwitvidApi api = new TwitvidApi(values);
            api.setSecureUrlEnabled(false);

            Session session;
            try {
                session = api.authenticate(new TwitterAuthPack.Builder()
                .setConsumerKey(twitter_consumer_key)
                .setConsumerSecret(twitter_secret_key)
                .setOAuthToken(token.getToken())
                .setOAuthTokenSecret(token.getTokenSecret())
                .build());

                api.getValues().setSession(session);

                final UploadHelper helper = new UploadHelper(api);

                File file=new File(videoPath);
                TwitvidPost twitvidPost = new TwitvidPost.Builder()
                        .setFile(file).setChunkSize(10485760)
                        .setMessage("Twitvid test")
                        .setPostToTwitter(true)
                        .create();
                try {
                    if (helper.upload(twitvidPost))
                    {
                        Toast.makeText(TwitterShare.this, "Posted on Twitter and Twitvid", Toast.LENGTH_LONG).show();
                    } 
                    else 
                    {
                        Toast.makeText(TwitterShare.this, "Post failed", Toast.LENGTH_LONG).show();
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

            } catch (ApiException e1) {
                e1.printStackTrace();
            }

} 
```

令牌取决于您如何实现定期发布到 twitter，只需包括您的。希望这可以帮助！

PS：我不得不强制 UI 线程接受网络连接才能完成这项工作

（我的第一个答案！w00t！）

# javascript - 为 img 加载新 src 时，jquery 未触发 403 上的错误事件

> ID：12281868
> 
> 赞同：4
> 
> 时间：2012-09-05T12:51:55.193
> 
> 标签：javascript, jquery, ajax

我正在尝试制作一个包含静态 Google 地图的页面。调整页面大小时，我会动态更改地图。我在一个函数中有以下代码，该函数在页面调整大小时触发，并在检查页面上元素的大小是否匹配后定期触发：

```
if (imageDownloadEnabled) {
   url = 'http://maps.googleapis.com/maps/api/staticmap?center=' + userLat + ',' + userLng + '&zoom=14&size=' + ((theWidth/2)|0) + 'x'+ ((theHeight/2)|0) + '&sensor=false&scale=2';
   newImage = $('<img />');
   console.log('Retrieving map from ' + url);

   newImage.error( function() { 
      console.log("error loading image");
      imageDownloadEnabled = false;
   }).load(function(eventObject) {
      console.log("done loading image");
      console.dir(eventObject);
      $('#maps-image').replaceWith(newImage);
      newImage.attr('id', 'maps-image');
   }).attr('src', url);
/**/
} else {
   console.log('disabled');
} 
```

当 google maps api 重载（目前发生，因为我的一个 bug 导致了无限循环）我得到一个 403 错误和一个替代图像。虽然没有调用错误事件处理程序。

有没有办法解决？我想确保在 403 事件中，该页面停止向 Google 请求新图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:34:13.197

尝试使用 .load 的完整回调函数并检查 textStatus 值

```
.load($url,function(responseText, textStatus, XMLHttpRequest) {
    if(textStatus=="error") {
        //do something
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:53:29.803

如果您只想知道图像是否无法加载，我认为您不需要加载位，以下示例适用于我：

.error() 是 .bind('error', handler) 的快捷方式。

预设 src 加载正常，一旦加载（文档就绪）jquery 尝试用无效文件替换它，如果不能，则回退到谷歌徽标

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#foo-image").error(function(){
                    alert("error loading image, substituting...");
                    $(this).attr("src","http://www.google.co.uk/images/srpr/logo3w.png");
                }).attr("src", "missing.png");
            });
        </script>
    </head>
    <body style="font-family:arial; font-weight:bold;">
        <img id="foo-image" src="http://www.iskin.co.uk/wallpapers/imagecache/ipad/union_flag_wallpaper.jpg" />
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:35:17.733

这是我环顾四周后最终想到的。

问题是 Google 正在返回图像以及 403 状态，因此触发了 onload 事件。所以我的代码会加载 10px x 10px 的错误图像，不管它所在的 div 的大小。

诀窍是使用内存中的 Image()，加载 url 并在 onload 事件中检查图像的大小。如果图像太小，请加载替身。

编码 ：

```
if (imageDownloadEnabled) {
    url = 'http://maps.googleapis.com/maps/api/staticmap?center=' + userLat + ',' + userLng + '&zoom=14&size=' + ((rightWidth/2)|0) + 'x'+ ((rightHeight/2)|0) + '&sensor=false&scale=2';
    oldMap = $('#maps-image');
    var img = new Image();
    img.onload = function() {
        if(this.width < 100 || this.height <100) {
            console.log('Google 403, loading standin');
            /*  disable image download */
            imageDownloadEnabled = false;
            oldMap.attr('src', standinUrl);
        } else {
            oldMap.attr('src', url);
        }
    }
    img.onerror = function() {
        console.log('Error, loading standin');
        oldMap.attr('src', standinUrl);
    }
    img.src = url;
} else {
    oldMap.attr('src', standinUrl);
} 
```

In case it is not clear, below a certain browser size I get rid of the map, which is why I simply check for image size in the onload function.

# php - 仅使用外键写入数据表

> ID：12281871
> 
> 赞同：0
> 
> 时间：2012-09-05T12:52:13.543
> 
> 标签：php, postgresql

我有一个具有以下数据模型的 PostGreSQL 数据库：

```
CREATE TABLE staff (s_id serial UNIQUE, name, username, password, email)
CREATE TABLE institution (i_id serial UNIQUE, name);
CREATE TABLE isStaffOf (i_id, s_id); //foreign key references 
```

当用户提交表单时，我有一个 PHP 脚本，它将信息写入前两个数据表并自动生成 s_id 和 i_id 值。伟大的！

我已经尝试了一些 PHP 修改，以使系统将 s_id 和 i_id 写入 isStaffOf 关系，以便它可以强制执行我的项目所需的显式 1..1 关系，但在提交时它说我的数据类型不足。请参阅下面的 PHP 代码。

```
 $name = $_POST["name"];
    $username = $_POST["username"];
    $password = $_POST["password"];
    $email = $_POST["email"];
    $institution = $_POST["institution"];

    $conn = pg_connect("host=***** port=**** dbname=****** user=**** password=******");
    $staffWrite = pg_query("INSERT INTO staff(name, username, password, email) VALUES ('$name', '$username', '$password', '$email')");
    $instiWrite = pg_query("INSERT INTO institution(name) VALUES ('$institution')");

    $instiFK=pg_query("SELECT i_id FROM institution WHERE name='$institution'");
    $staffFK=pg_query("SELECT s_id FROM staff WHERE name='$username'");

    $sql=("INSERT INTO isstaffof(i_id, s_id) VALUES ('$instiFK', '$staffFK')");
    $result = pg_query($sql); 
```

那是我目前拥有的脚本，但它不起作用。关于如何解决这个问题的任何想法，以便当用户提交所有数据表时将被填充并强制执行参照完整性？我快到了，还在尝试，但无济于事。

错误信息：

```
 ERROR: invalid input syntax for integer: "Resource id #4" LINE 1: INSERT INTO isstaffof(i_id, s_id) VALUES ('Resource id #4', ... 
```

如果您需要更多解释，请告诉我，但我确信它很清楚我想要实现的目标，并且我相信我可以在没有这么多`pg_query`电话的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:53:32.963

从 PostgreSQL 版本 9.1 开始，您可以使用单个查询在所有 3 个表中插入一个[可写的公共表表达式](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

```
WITH 
step_1 AS(
    INSERT INTO staff (name) VALUES('Frank') RETURNING s_id
),
step_2 AS (
    INSERT INTO institution (name) VALUES('PostgreSQL') RETURNING i_id
)
INSERT INTO isStaffOf (i_id, s_id) SELECT i_id,s_id FROM step_1, step_2; 
```

简单、快速、可靠。

当某些记录已经存在并且只想选择主键值时，您也可以做一些其他技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:50:32.263

您必须使用[pg_fetch_assoc](http://ch.php.net/manual/en/function.pg-fetch-assoc.php)或类似的东西来获取结果。您现在使用它的方式是将整个 pg_query 资源作为整数传递 - 显然 php 无法将其转换为有效整数。

```
$name = $_POST["name"];
$username = $_POST["username"];
$password = $_POST["password"];
$email = $_POST["email"];
$institution = $_POST["institution"];

$conn = pg_connect("host=***** port=**** dbname=****** user=**** password=******");
$staffWrite = pg_query("INSERT INTO staff(name, username, password, email) VALUES ('$name', '$username', '$password', '$email')");
$instiWrite = pg_query("INSERT INTO institution(name) VALUES ('$institution')");

$instiFK=pg_query("SELECT i_id FROM institution WHERE name='$institution'");
$rowInsti = pg_fetch_assoc($instiFK);
$staffFK = pg_query("SELECT s_id FROM staff WHERE name='$username'");
$rowStaff = pg_fetch_assoc($staffFK);

$result = pg_query("INSERT INTO isstaffof(i_id, s_id) VALUES (".$rowInsti['i_id'].", ".$rowStaff['s_id'].")"); 
```

作为替代方案，您可以在每次插入后直接使用[pg_last_oid](http://ch.php.net/manual/en/function.pg-last-oid.php)来获取 id。（返回解决方案会更漂亮。只需阅读 php.net 页面上的评论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:01:45.770

在创建 isstaffof 表时，您至少必须指定数据类型，并且*可以*指定它们是外键。

```
CREATE TABLE isstaffof
    (i_id BIGINT REFERENCES institution(i_id)
    , s_id BIGINT REFERENCES staff(s_id)
    ); 
```

注意：避免使用 MixedCase 作为标识符。如果您必须移植到不同的 DBMS 平台，它可能会导致严重的问题。

更新：只要把它放在一个简单的`INSERT INTO ... SELECT ... FROM ...`声明中。

```
CREATE TABLE staff (s_id serial UNIQUE, sname varchar);
CREATE TABLE institution (i_id serial UNIQUE, iname varchar);
CREATE TABLE isstaffof
    (i_id BIGINT REFERENCES institution(i_id)
    , s_id BIGINT REFERENCES staff(s_id)
    );

INSERT INTO isstaffof(i_id,s_id)
SELECT i.i_id,s.s_id
FROM staff s, institution i
WHERE i.iname='$institution'
AND s.sname = '$staff'
        ; 
```

现在，您可以将其包装到您的前端代码中。

# javascript - 根据其他多项选择中的选择填充多项选择

> ID：12281875
> 
> 赞同：1
> 
> 时间：2012-09-05T12:52:22.260
> 
> 标签：javascript, jquery, select, multiple-select

好的，我会尽力解释这一点。我有一个显示在多选元素中的公司部门列表。每个员工都可以连接到这些部门中的几个。我从我们的数据库中获取这些数据。当我选择一个部门时，该部门的员工列表显示在另一个多选元素中。当我选择多个部门时，应显示这些部门的员工。这就是问题所在。我只能让它与选定的部门之一合作。

我想确保所选部门的所有员工都显示在多选元素中，并且如果一名员工属于多个部门，他只会显示一次。

希望有人能指出我正确的方向。我试图简化我的代码，所以这是硬编码版本，没有从数据库中获取内容。

我没有在这里发布代码，而是制作了一个[jsFiddle](http://jsfiddle.net/Kw5Km/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:02:32.900

让我们在代码中再添加一个循环和 if 子句。此外，我们将使用`obj.options[k].value`代替`obj.value`：

```
for (k = 0; k < obj.options.length; k++) {                   // <-- add here
    if (obj.options[k].selected) {                           // <-- add here
        for (i = 0; i < selOptions.length; i++) {
            if (obj.options[k].value == selOptions[i][0]) {  // <-- change here
                for (j = 1; j < selOptions[i].length; j++) {
                    oSel2.options[oSel2.options.length] = new Option(
                        selOptions[i][j], selOptions[i][j], false, false);
                }
                i = selOptions.length;
            }
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/Kw5Km/2/](http://jsfiddle.net/Kw5Km/2/)

# php - 如何调用 facebook api 的 javascript 来发送动态值以便在墙上发布

> ID：12281885
> 
> 赞同：0
> 
> 时间：2012-09-05T12:52:54.420
> 
> 标签：php, javascript, facebook

我有一个父页面，我在其中提交表单并调用`on_click`提交按钮的两个函数。一个功能来自同一页面，另一个来自子页面。

我想知道如何从子页面调用父页面上的 Javascript 函数以在 Facebook 墙上发布。[这](http://www.ebhasin.com/apps/apps-source/precussion/)是我的申请。

**我的父母.php：**

```
<form action="child.php" method="post">
   <input type="text" value="$result" name="codebox">
   <input type="submit" onclick="funcion codeload();function postToFeed();"/>
</form> 
```

**我的孩子.php：**

```
 <body> 
  <?PHP
          $son=$_REQUEST['codebox'];
          session_start();
          $_SESSION['sony'] =$son;
          $ashutosh=$_SESSION['sony'] ;
          $tinyurl = file_get_contents("http://tinyurl.com/api-create.php?                 
                url=http://www.ebhasin.com/approval/files/main.php?a=$ashutosh");
          $desc='Place here description what you want';
  ?>
<div id='fb-root'></div> 
<script src='http://connect.facebook.net/en_US/all.js'></script>

<p id='msg'></p>    

<script>

  FB.init({appId: "313877282043416", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
       link: '<?PHP echo $tinyurl?>',
            picture: 'http://www.dogoscanarios.com/en/themes/dogotheme/images/icon_dot_cat.gif',
      name: 'Drum Precussion',
    caption: ' I just created a new Drum Loop using Drum Beats Pro! Come listen to it!',
      description: '.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:56:02.863

好吧，如果让我们说父窗口打开一个子弹出窗口，那么请执行以下操作

**编辑 ：**

**你的父页面，parent.php**

```
 <script>
var Popup;
function popUp()
{
    Popup = window.open("child.php", "bpPopup", 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=420,height=300,left = 490,top = 262');
    Popup.focus();
}
</script>
<a href="javascript:void(0)" onclick="popUp();">Open child window</a><br />
<a href="javascript:void(0)" onclick="Popup.postToFeed();">Call child window function</a> 
```

第一个链接打开弹出窗口，第二个链接`postToFeed()`从父级调用弹出窗口中的函数。

**您的孩子弹出窗口，child.php**

```
<script>
function postToFeed(){
    alert("Popup function called by parent window");
}
</script> 
```

单击父窗口中的链接后，将调用弹出窗口中的此函数。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:15:45.547

我有一个您的表单提交到的 PHP 脚本，该脚本发布到 Facebook 提要。原因是，如果 JavaScript 由于某种原因不可用，它仍然可以工作。然后，您可以使用 JavaScript 通过 AJAX 提交表单，这将获得您想要的结果。

# entity-framework - 使用实体框架对 void 方法进行单元测试

> ID：12281887
> 
> 赞同：0
> 
> 时间：2012-09-05T12:53:00.390
> 
> 标签：entity-framework, unit-testing

我正在尝试熟悉单元测试。我编写了一个小型应用程序，它解析来自 Internet 的数据并将其存储到数据库中。为此，我使用实体框架。

由于许多方法都是 void 方法，例如

```
public void UpdateSiteValue(Site site, ObjectContext context) 
```

此方法可用于更新数据库中的某些值。所以我基本上想知道如何从单元测试的角度来解决这个问题。也许我可以模拟对象上下文？

将不胜感激任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:22:14.993

这取决于您要测试的内容。

由于您返回的是 void，因此您无法测试函数的返回 - 那么您是否想测试您的方法是否真的会在数据库中进行更改？如果是这样，那么模拟您的上下文并不是最好的解决方案，因为您没有测试实际代码。Ladislav Mrnka 对此发表了[一篇很棒的文章](https://stackoverflow.com/questions/6766478/unit-testing-dbcontext)。您能否将测试包装在事务范围内，然后再进行回滚？Id 会增加，但至少你会测试一切。

或者，如果您想测试您的方法是否正确 - 在您到达数据库层之前，有几种方法可以解决这个问题。很多建议是使用存储库模式，以便您在测试中不依赖 EF。Truewill 也就此发表了[一篇很好的文章](https://stackoverflow.com/questions/3463017/unit-testing-with-ef4-code-first-and-repository)。他还链接到有关此的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ff714955.aspx)，使用您可能会发现相关的内存中 ObjectContext。

这里有一些关于单元、功能和集成测试的更[一般的阅读，可以提供帮助。](https://stackoverflow.com/questions/2230286/unit-testing-or-functional-testing)

# android - 如何使用游戏循环每五秒在屏幕上出现和消失一个对象

> ID：12281888
> 
> 赞同：3
> 
> 时间：2012-09-05T12:53:03.557
> 
> 标签：android, game-loop

我正在尝试在android中学习游戏开发。首先，我尝试每五秒钟使用游戏循环在屏幕上出现和消失一个对象。但我没有成功。我读过不同的教程和论坛。我在教程中应用了所有东西，但对象仍在连续绘制。它并没有消失。我没有得到我所缺少的东西？请指导我。

完整的代码在这里：

**MainGameActivity.java**

```
package com.example.showandhideobject;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class MainGameActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(new MainGamePanel(this));
    }  
} 
```

**主游戏面板.java**

```
package com.example.showandhideobject;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MainGamePanel extends SurfaceView implements
        SurfaceHolder.Callback {

    private MainGameThread thread;
    private ImageObject image;

    // private long gameStartTime;

    public MainGamePanel(Context context) {
        super(context);
        // adding the callback (this) to the surface holder to intercept events
        getHolder().addCallback(this);
        // create the game loop thread
        thread = new MainGameThread(getHolder(), this);

        Bitmap imageBitMap = BitmapFactory.decodeResource(getResources(),
                R.drawable.rose);
        image = new ImageObject(imageBitMap, 100, 150);
        image.setAppeared(false);
        image.setDisappearTime(System.currentTimeMillis());

        // make the GamePanel focusable so it can handle events
        setFocusable(true);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // at this point the surface is created and
        // we can safely start the game loop

        thread.setRunning(true);
        thread.start();

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
    }

    public void update() {

        Log.i("Image Status:::::::::::::    ",
                Boolean.valueOf(image.isAppeared()).toString());

        if (!image.isAppeared()
                && System.currentTimeMillis() - image.getDisappearTime() >= 5000) {

            Log.i("Image Object:::::::  ", "Showing");
            image.setAppeared(true);
            image.setAppearTime(System.currentTimeMillis());

        }
        if (image.isAppeared()
                && (System.currentTimeMillis() - image.getAppearTime() >= 5000)) {

            Log.i("Image Object:::::::  ", "Not Showing");
            image.setAppeared(false);
            image.setDisappearTime(System.currentTimeMillis());
        }
    }

    public void render(Canvas canvas) {

        if (image.isAppeared()) {
            image.draw(canvas);
        }
    }

} 
```

**MainGameThread.java**

```
package com.example.showandhideobject;

import android.graphics.Canvas;
import android.util.Log;
import android.view.SurfaceHolder;

public class MainGameThread extends Thread {

    // Surface holder that can access the physical surface
    private SurfaceHolder surfaceHolder;

    // The actual view that handles inputs
    // and draws to the surface
    private MainGamePanel gamePanel;

    // flag to hold game state
    private boolean running;

    public boolean isRunning() {
        return running;
    }

    public void setRunning(boolean running) {
        this.running = running;
    }

    public MainGameThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
        super();
        this.surfaceHolder = surfaceHolder;
        this.gamePanel = gamePanel;
    }

    @Override
    public void run() {
        Canvas canvas;

        while (isRunning()) {
            canvas = null;
            // try locking the canvas for exclusive pixel editing
            // in the surface
            try {
                canvas = this.surfaceHolder.lockCanvas();
                synchronized (surfaceHolder) {
                    Log.i("With in :::::::::", "Game Loop");
                    // update game state
                    gamePanel.update();
                    // render state to the screen and draw the canvas on the
                    // panel

                    gamePanel.render(canvas);
                    // gamePanel.onDraw(canvas);
                }
            } finally {
                // in case of an exception the surface is not left in an
                // inconsistent state
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            } // end finally
        }
    }
} 
```

**ImageObject.java**

```
package com.example.showandhideobject;

import android.graphics.Bitmap;
import android.graphics.Canvas;

public class ImageObject {

    private Bitmap bitmap; // the actual bitmap
    private int x; // the X coordinate
    private int y; // the Y coordinate
    private boolean isAppeared;
    private long appearTime;
    private long disappearTime;

    // Constructor for this class
    public ImageObject(Bitmap bitmap, int x, int y) {
        this.bitmap = bitmap;
        this.x = x;
        this.y = y;
    }

    public Bitmap getBitmap() {
        return bitmap;
    }

    public void setBitmap(Bitmap bitmap) {
        this.bitmap = bitmap;
    }

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }

    public int getY() {
        return y;
    }

    public void setY(int y) {
        this.y = y;
    }

    public boolean isAppeared() {
        return isAppeared;
    }

    public void setAppeared(boolean isAppeared) {
        this.isAppeared = isAppeared;
    }

    public long getAppearTime() {
        return appearTime;
    }

    public void setAppearTime(long appearTime) {
        this.appearTime = appearTime;
    }

    public long getDisappearTime() {
        return disappearTime;
    }

    public void setDisappearTime(long disappearTime) {
        this.disappearTime = disappearTime;
    }

    /* Method to draw images on Canvas */
    public void draw(Canvas canvas) {
        canvas.drawBitmap(bitmap, x - (bitmap.getWidth() / 2),
                y - (bitmap.getHeight() / 2), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:57:33.773

在这部分

```
if (image.isAppeared()) {
    image.draw(canvas);
} 
```

你永远不会清理你的画布。你所做的实际上是在同一个地方一遍又一遍地绘制你的图像。

您可能需要在 cas `isAppeared()`is中重绘背景`false`

## 编辑

您还可以在绘制图像之前使用 canvas.save()，当您不再需要图像时使用 canvas.restore()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:11:56.207

不要过早尝试优化，游戏渲染通常效率低下，因为几乎所有屏幕都会发生变化。

循环应该是：

1.  总是将背景绘制到画布上
2.  始终将所有游戏对象绘制到画布上，让它们决定它们是否可见，这将简化 MainGamePanel 类
3.  最后总是显示画布（通过复制到你正在做的图像）

扩展第 2 点：

```
/* Method to draw images on Canvas */  
public void draw(Canvas canvas) { 
    if(!isAppeared) return; //let the object decide when it should be drawn
    canvas.drawBitmap(bitmap, x - (bitmap.getWidth() / 2),  
            y - (bitmap.getHeight() / 2), null);  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:05:28.610

将 MainGamePanel.java 中的方法 render 更改为

```
if (image.isAppeared() && canvas != null) {
        image.draw(canvas);
} 
```

# jquery - 如何在 jQuery 1.8 中停止事件冒泡？

> ID：12281893
> 
> 赞同：0
> 
> 时间：2012-09-05T12:53:19.517
> 
> 标签：jquery, events

我遇到了 jquery 事件冒泡的问题。我有一个按钮，它打开一个消息框并有一个按钮，关闭它。用这两个按钮打开和关闭很容易。当我尝试通过单击#overlay div 来关闭消息框时会出现问题。

这是我的代码： HTML：

```
<div id="wrapper">
<button id="open">Open</button>
<div id="overlay">
    <div id="message">
        <p>Some error message</p>
        <button id="close">Close</button>    
    </div>
</div>
</div>​ 
```

CSS：

```
#wrapper {
    background:#ccc;
    height:500px;
    position:relative;
}

#overlay {
    background: rgba(0, 0, 0, 0.6);
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:100%;
    display:none;
}

#message {
    background:#fff;
    border-radius:5px;
    padding:20px;
    position:absolute;
    top:50%;
    left:50%;
    margin-left:-110px;
    margin-top:-100px;
    width:200px;
    text-align:center;
    display:none;
}

#close {
    color:#fff;
    background:red;
    cursor:pointer;
    border:0;
    border-radius:4px;
    padding:5px 8px;
} 
```

​Javascript/jQuery：

```
$(function() {

    // cache the body tag
    var body = $('body');

    // open message box
    body.on('click', '#open', function(e){
       $('#overlay, #message').show();         
    });

    // close message box
    body.on('click', '#close, #overlay', function(e){
       $('#overlay, #message').hide();   
       e.stopPropagation();                     
    });            

});​ 
```

这是一个演示：http: [//jsfiddle.net/vnj6X/](http://jsfiddle.net/vnj6X/)

我试图添加

```
// do not close message box
body.on('click', '#message', function(e){
    return false;       
}); 
```

但在其他情况下，我有一个登录表单，当我单击提交按钮时，它不会将表单数据发送到服务器。

谁能帮助我如何停止事件冒泡？

当我点击#overlay div而不是#message div时，我想关闭消息框div。当我单击#message div 时，它不应该做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:58:08.123

它不是事件冒泡它的嵌套。您的消息嵌套在叠加层内，这意味着对消息的任何点击也是对叠加层的点击。

尝试这个：

```
<div id="wrapper">
    <button id="open">Open</button>
    <div id="overlay">
    </div>
    <div id="message">
        <p>Some error message</p>
        <button id="close">Close</button>    
    </div>
</div>​ 
```

这是小提琴：http: [//jsfiddle.net/Vq5Nq/](http://jsfiddle.net/Vq5Nq/)

这样，当您单击该消息时，它不会关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:59:08.840

您可以检查`e.target.id`以确保单击的元素是`#overlay`or `#close`：

```
// close message box
body.on('click', '#close, #overlay', function(e){
    if(e.target.id === 'overlay' || e.target.id === 'close') {
        $('#overlay, #message').hide();
    }            
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:58:44.543

用这个：

```
// close message box
$('#close').click(function(e){
   $('#overlay, #message').hide();         
}); 
```

而不是您的关闭消息框代码。

# javascript - 有没有办法使用 YepNope.js 为脚本赋予动态名称？

> ID：12281910
> 
> 赞同：0
> 
> 时间：2012-09-05T12:54:03.717
> 
> 标签：javascript, jquery, css, yepnope

我目前正在使用[YepNope.js](https://github.com/SlexAxton/yepnope.js)加载我的 css/javascript 文件。我想知道在初始过程中是否有任何方法可以给脚本一个变量名。例如：

```
yepnope({
    test : Modernizr.csstransforms,
    yep  : ['MyCSS', 'jQuery']
    nope : ['MyCSS2']
});

// Where 'MyCSS' = '/css/mycss.css' | 'jQuery' = '/scripts/jquery.min.js' 
// 'MyCSS2' = '/css/mycss2.css 
```

我有一个开发团队，他们都将使用相同的脚本集，并希望使其尽可能易于处理。与简单的名称分配相比，必须追踪脚本路径可能会耗费大量时间。

我希望能够定义一个变量名称列表，这些变量名称具有分配给它们的实际脚本的值，YepNope.js 将解释这些变量名称，而无需开发人员将变量分配添加到他们的项目代码中：

```
{ 'MyCSS': '/css/mycss.css', 'jQuery', '/scripts/jquery.min.js' } 
```

这样，当开发人员将他们的脚本文件添加到他们的项目时，他们就不必追踪指定文件的所有路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:59:28.693

这是你需要的吗？

```
var yeps = ['/css/mycss.css','/scripts/jquery.min.js'];
var nopes = ['/css/mycss2.css'];

yepnope({
    test : Modernizr.csstransforms,
    yep  : yeps,
    nope : nopes
}); 
```

或者

```
var myCSSpath= '/css/mycss.css',
    jQpath = '/scripts/jquery.min.js',
    myCSS2path = '/css/mycss2.css';

yepnope({
    test : Modernizr.csstransforms,
    yep  : [myCSSpath, jQpath],
    nope : [myCSS2path]
}); 
```

编辑：所以你想把变量分配到不同的文件？

制作一个 yepnope.variables.js

```
<script src="path/yepnope.js"></script>
<script src="path/yepnope.variables.js"></script>

<script>
yepnope({
    test : Modernizr.csstransforms,
    yep  : [myCSSpath, jQpath],
    nope : [myCSS2path]
});
</script> 
```

并在 js 文件中：

```
var myCSSpath= '/css/mycss.css',
    jQpath = '/scripts/jquery.min.js',
    myCSS2path = '/css/mycss2.css'; 
```

# android - Android：如何禁用可触摸性？

> ID：12281914
> 
> 赞同：1
> 
> 时间：2012-09-05T12:54:21.483
> 
> 标签：android, imagebutton, ontouchlistener

我使用的是安卓 2.0。我有一个视图（只是一个以图像为背景的简单线性布局），其中包含 3 个图像按钮。当我触摸此视图的任何部分时，我的按钮不再可触摸。因为他们是残疾人！如何禁用背景的可触摸性？即使我将手指放在视图的其他部分上，我也只想能够触摸按钮。那可能吗？代码示例：

```
public class myView extends LinearView {
public myView(Context context) {
    super(context);
}
public setView(Context context) {
    setBackgroundDrawable(backImg);    
    setOrientation(LinearLayout.HORIZONTAL);
    setGravity(Gravity.CENTER);
    setScrollContainer(false);

    ImageButton imgBtn0 = new ImageButton(context);
    imgBtn0.setBackgroundColor(Color.TRANSPARENT);
    imgBtn0.setBackgroundDrawable(imgBtnD0);
    imgBtn0.setDrawingCacheEnabled(true);
    imgBtn0.setOnTouchListener(new TouchListener(context, id0));

    ...

    addView(imgBtn0, 0);
    addView(imgBtn1, 1);
    addView(imgBtn2, 2);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:58:17.893

您可以使用禁用线性布局的触摸，`android:clicable="false"`但是如果用户在后台单击，您将如何确定要单击的图像按钮？

# python - 我可以使用自定义 Graph API 操作在 Facebook 帖子中嵌入操作以在我的网站上执行某些操作吗？

> ID：12281915
> 
> 赞同：0
> 
> 时间：2012-09-05T12:54:29.953
> 
> 标签：python, facebook-graph-api

我可以使用自定义图形 api 操作在我的网站上执行一些其他操作，例如**从 facebook 帖子中对网站内容进行投票（通过 ajax）的操作**。

***已编辑...***

我的意思是说，在普通的 Facebook 帖子中，我们在底部有喜欢、分享和评论的操作。那么我们是否可以将我们自己的自定义操作放在那里，以便在实际站点上执行某些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:22:33.943

查看操作链接，您应该能够使用指定的操作从 Facebook 向您的网站调用服务器返回 Facebook - [https://developers.facebook.com/docs/opengraph/actionlinks/](https://developers.facebook.com/docs/opengraph/actionlinks/)

![前](../Images/bfacbcaa6ef9a5948ccb688d0b60657f.png)

![后](../Images/a69136a78b89c43b2ef90678e9f29bb1.png)

# mysql - MySQL 控制流建议 (CASE/THEN)

> ID：12281916
> 
> 赞同：1
> 
> 时间：2012-09-05T12:54:34.850
> 
> 标签：mysql, if-statement, controls, flow

我手上有一个非常特殊的问题。我有一个项目，以前的数据库工程师没有考虑过数据库设计，现在我坚持下去。我的问题很简单：

我有两个不同的选择查询，如果设置了字段，则应该执行其中一个，即

如果 field1 为 0 -> 执行查询 1 如果 field1 为 1 -> 执行查询 2

到目前为止，我到了这里：

```
SELECT should_i_care
FROM 
    product_sample
WHERE
    pid='XXX'
CASE should_i_care
    WHEN '1' then call query2
    WHEN '0' then call query1 
```

但发现我不能声明我想运行的查询。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:07:44.483

它应该是这样的脚本或存储过程

```
DECLARE  shouldICare INT; 

SELECT @shouldICare := should_i_care
FROM 
    product_sample
WHERE
    pid='XXX';

IF @shouldICare = 1 THEN
   Call query2;
ELSE
   Call query1;
END IF; 
```

# oracle - 如何同步多台机器插入一行？

> ID：12281920
> 
> 赞同：2
> 
> 时间：2012-09-05T12:54:45.413
> 
> 标签：oracle, synchronization

我有一些代码在多台机器上运行，并访问 Oracle 数据库。我通过锁定行将此数据库（除其他外）用作不同机器之间的同步对象。

我遇到的问题是，当我的进程启动时，数据库中还没有任何东西可以依赖于同步，并且我的进程得到了 oracle 异常，`unique constraint violated`因为它们都尝试同时插入。

我现在的解决方案是捕获那个精确的异常并忽略它，但我真的不喜欢在我的应用程序的正常工作流程中抛出异常。

有没有更好的方法在数据库中原子地“测试和插入”？插入行时锁定整个表/分区不是可接受的解决方案。

我检查了一下`merge into`，认为这是我的解决方案，但它产生了同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:58:16.413

您可能希望使用 DBMS_LOCK，它允许用户应用程序代码实现与 Oracle 数据库在锁定行和其他资源时相同的锁定模型。您可以创建一个类型为“UL”（用户锁定）的队列，并定义一个资源名称，然后将多个会话锁定到他们的核心内容，而不依赖于某个表中的数据。它同时支持独占锁和共享锁，因此，您有一些可以并发运行的进程（如果它们使用共享锁）或其他独占运行的进程（如果它们使用独占锁），它们将自动在共享锁后面排队（如果有的话）由其他类型的进程等持有。

这是一个非常灵活的锁定模型，你不需要依赖任何表中的任何数据来实现它。

[有关DBMS_LOCK 包](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lock.htm)的完整信息，请参阅 Oracle PL/SQL 包和类型参考。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:30:55.067

如果您的 PK 受非唯一索引监管，您不会立即收到错误，请考虑：

```
<<SESSION 1>>
SQL> create table afac (
  2     id number,
  3     constraint afac_pk primary key (id) 
  4        deferrable /* will cause the PK to be policed by a non-unique index */
  5  );

Table created.

SQL> insert into afac values (1);

1 row created.

<<SESSION 2>>    
SQL> insert into afac values (1); /* Will cause session 2 to be blocked */ 
```

会话 2 将被阻止，直到会话 1 提交或回滚。我不知道这种机制是否与您的要求兼容。

# android - 来自移动设备（iOS 和 android）的 swf 提要在预览对话框中没有图像

> ID：12281922
> 
> 赞同：1
> 
> 时间：2012-09-05T12:54:48.720
> 
> 标签：android, ios, facebook, feed

我正在发布视频提要[https://developers.facebook.com/docs/feed-gaming/](https://developers.facebook.com/docs/feed-gaming/)在移动内容上使用此 API 在网络上很好，但在移动设备上预览，同时发布时没有显示图像。有什么方法可以声明移动预览图像？

# php - 获取 url，给定的 url 重定向到

> ID：12281925
> 
> 赞同：5
> 
> 时间：2012-09-05T12:54:59.283
> 
> 标签：php, web

我从 rss 链接中挖掘数据并获得一堆网址，例如：

[http://feedproxy.google.com/~r/electricpig/~3/qoF8XbocUbE/](http://feedproxy.google.com/~r/electricpig/~3/qoF8XbocUbE/)

....如果我访问我的网络浏览器中的链接，我会被重定向到类似的内容：

[http://www.electricpig.co.uk/stuff](http://www.electricpig.co.uk/stuff)。

php中有没有办法编写一个函数，当给定一个将用户重定向到url“b”的url“a”时，返回url“b”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T12:59:56.973

干得好：

```
function getRedirect($oldUrl) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $oldUrl);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $res = curl_exec($ch);
    $newUrl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
    curl_close($ch);
    return $newUrl;
} 
```

该函数需要 cURL，并使用`CURLINO_EFFECTIVE_URL`. [您可以在此处](http://php.net/manual/en/function.curl-getinfo.php)的 phpdoc 上查找它

**编辑：**

~~如果您确定 oldUrl 没有通过 javascript 重定向到 newUrl，那么~~您也可以避免使用获取 newUrl 的正文

```
curl_setopt($ch, CURLOPT_NOBODY, TRUE); // remove body 
```

将上述行`$res = curl_exec($ch);`放在函数之前以`getRedirect`实现更快的执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:59:49.980

```
public function getRedirect($url) {
    $headers = get_headers($url, 1);
    if (array_key_exists("Location", $headers)) {
        $url = getRedirect($headers["Location"]);
    }
    return $url;
} 
```

# c# - 在这种简单的情况下，如何保持单元测试相互独立？

> ID：12281927
> 
> 赞同：6
> 
> 时间：2012-09-05T12:55:02.010
> 
> 标签：c#, unit-testing, tdd

我正在使用测试驱动开发方法用 C# 编写一个小游戏。我面临一个问题：

我有一堂课`CheckersBoard`：

```
public class CheckersBoard
{
    private const string InitialBoardPattern = "B-B-B-B-" +
                                               "-B-B-B-B" +
                                               "B-B-B-B-" +
                                               "--------" +
                                               "--------" +
                                               "-W-W-W-W" +
                                               "W-W-W-W-" +
                                               "-W-W-W-W";

    public SquareStatus[,] Squares { get; private set; }

    public CheckersBoard(IBoardGenerator boardGenerator)
    {
        Squares = boardGenerator.GenerateFromPattern(InitialBoardPattern, 8, 8);
    }

    //....
} 
```

还有一个类`BoardGenerator`：

```
public class BoardGenerator : IBoardGenerator
{

    public SquareStatus[,] GenerateFromPattern(string pattern, int width, int height)
    {
        //....
    }

} 
```

`BoardGenerator`允许我以`CheckersBoard`非常易读的方式进行初始化。所以，我真的很想`BoardGenerator`在我的单元测试中使用来避免丑陋的数组初始化。

但这违反了我必须保持所有单元测试相互独立的规则。如果测试`GenerateFromPattern`失败，则会产生“级联”效应，所有使用的测试`GenerateFromPattern`也会失败。

这是我第一次使用单元测试，所以我有点困惑。我怎样才能避免这个问题？我的设计有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:34:16.923

显然这是一个没有明显答案的常见问题，我碰巧处理了两个类似的问题：

*   [在单元测试中重用业务逻辑](https://stackoverflow.com/questions/10091514/reusing-business-logic-in-a-test-class-to-save-time)- 建议**反对**，因为 OP 谈论 2 个不同的组件（类似于您的案例）
*   [使用经过测试的函数来准备另一个单元测试](https://stackoverflow.com/questions/9018142/is-it-a-good-way-of-unit-testing-to-use-another-tested-function-to-make-prepara)- 建议**使用**，然后将使用范围限定为单个类（这样新的错误可能不会使某些完全不相关的组件崩溃，而是所有组件都将保持在原始的*“崩溃范围”内*）

在一定程度上，重用业务逻辑（其他，经过测试的组件）*有点*类似于在单元测试中使用 3rd 方库——我们假设它们可以工作，并且不费心生成关于它们的额外断言。你会犹豫`List<T>`在单元测试中使用吗？很可能没有。但是请注意，`List<T>`许多其他开发人员每天都对其进行测试，并且背后有大型软件公司。你能说同样的话`BoardGenerator`吗？

另一个需要考虑的问题是，`CheckersBoard`测试代码对从未工作过的人来说`BoardGenerator`是否会像对你一样明显？您声称它是可读的，但考虑到创作，这很常见。也许使用数组初始化*并不像你想象的那么糟糕*（不可读）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:58:25.850

您可以[模拟](http://en.wikipedia.org/wiki/Mock_object)您的`BoardGenerator`课程或只是伪造实现，例如

```
internal class MockBoardGenerator : IBoardGenerator
{
    public SquareStatus[,] GenerateFromPattern(string pattern, int width, int height)
    {
        // return fixed test data
    }
} 
```

# hbase - 在 hbase 中处理自定义 ColumnInterpreter 的正确方法

> ID：12281933
> 
> 赞同：0
> 
> 时间：2012-09-05T12:55:11.923
> 
> 标签：hbase, aggregation

我有一个扩展 ColumnInterpreter 的类，它旨在处理 BigDecimal 而不是 Long，它是 hbase 开箱即用的。

现在我在想，这纯粹是客户端功能，所以我想，我所要做的就是将一个新的 ColumnInterpreter 实例化为

```
final ColumnInterpreter<Long, Long> ci = new BigDecimalColumnInterpreter(); 
```

我在想，这会起作用，因为我没有更改聚合协议，因此我不需要创建新的端点。

但是，当我将其称为如下时会发生什么：

```
AggregationClient ag = new AggregationClient(config);
avg = ag.avg(Bytes.toBytes(tableName), ci, scan); 
```

将发生以下情况：

> 2005 年 12 月 9 日 13:58:52 警告 client.HConnectionManager$HConnectionImplementation：执行 java.util.concurrent.ExecutionException 行时出错：org.apache.hadoop.hbase.client.RetriesExhaustedException：尝试=10 后失败，异常：星期三2012 年 9 月 5 日 13:58:12 CEST，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 9 月 5 日星期三 13:58:14 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:15 CEST，org.apache。 hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:16 CEST，org.apache.hadoop.hbase.ipc。ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:18 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java。 io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:20 CEST，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:24 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：错误readFields Wed Sep 05 13:58:28 CEST 2012, org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC server cannot read call parameters: Error in readFields Wed Sep 05 13:58 :36 CEST 2012，组织。apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:52 CEST 2012，org.apache.hadoop.hbase.ipc .ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误
> 
> 在 java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252) 在 java.util.concurrent.FutureTask.get(FutureTask.java:111) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation .processExecs(HConnectionManager.java:1434) 在 org.apache.hadoop.hbase.client.HTable.coprocessorExec(HTable.java:1263) 在 org.apache.hadoop.hbase.client.HTable.coprocessorExec(HTable.java:1243) ) 在 helpers.HbaseReaderBigDecimal.getWeekAvgSCAN(HbaseReaderBigDecimal.java:309) 在 helpers.HbaseReaderBigDecimal.main(HbaseReaderBigDecimal.java:75) 原因：org.apache.hadoop.hbase.client.RetriesExhaustedException：尝试=10 后失败，异常： Wed Sep 05 13:58:12 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:14 CEST 2012, org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三:58:15 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:16 CEST， org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:18 CEST 2012，org.apache.hadoop.hbase .ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC server cannot read call parameters: Error in readFields Wed Sep 05 13:58:20 CEST 2012, org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204 , java.io.IOException:IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:24 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数: readFields Wed Sep 05 13:58:28 CEST 2012, org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC 服务器无法读取调用参数：错误 in readFields Wed Sep 05 13:58:36 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:52 CEST , org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC 服务器无法读取调用参数：readFields 中的错误hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:28 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker $1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:36 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io .IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:52 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:28 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker $1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:36 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io .IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:52 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:36 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java。 io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:52 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:36 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java。 io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:52 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误IPC 服务器无法读取调用参数：readFields 中的错误IPC 服务器无法读取调用参数：readFields 中的错误
> 
> 在 org.apache.hadoop.hbase.client.ServerCallable.withRetries(ServerCallable.java:183) 在 org.apache.hadoop.hbase.ipc.ExecRPCInvoker.invoke(ExecRPCInvoker.java:79) 在 $Proxy7.getAvg（未知来源) 在 helpers.HbaseReaderBigDecimal$1.call(HbaseReaderBigDecimal.java:313) 在 helpers.HbaseReaderBigDecimal$1.call(HbaseReaderBigDecimal.java:1) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$4.call(HConnectionManager.java :1422) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask.java:166) 在 java.util.concurrent.ThreadPoolExecutor.runWorker( ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:679) org.apache。hadoop.hbase.client.RetriesExhaustedException：尝试=10 后失败，异常：2012 年 9 月 5 日星期三 13:58:12 CEST，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:14 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：错误在 readFields Wed Sep 05 13:58:15 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13 中的错误： 58:16 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:18 CEST 2012，org .apache.hadoop.hbase.ipc。ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 Wed Sep 05 13:58:20 CEST 2012，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java。 io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误 2012 年 9 月 5 日星期三 13:58:24 CEST，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields Wed Sep 05 13:58:28 CEST 2012 中的错误，org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：错误readFields Wed Sep 05 13:58:36 CEST 2012, org.apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204, java.io.IOException: IPC server cannot read call parameters: Error in readFields Wed Sep 05 13:58 :52 CEST 2012，组织。apache.hadoop.hbase.ipc.ExecRPCInvoker$1@14004204，java.io.IOException：IPC 服务器无法读取调用参数：readFields 中的错误

我的配置如下：

```
config = HBaseConfiguration.create();
config.set(zookeeper, ip);
config.setLong("hbase.client.scanner.caching", 1000);
config.set("hbase.coprocessor.region.classes", "org.apache.hadoop.hbase.coprocessor.AggregateImplementation"); 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:45:44.607

您应该在服务器端部署包含您自己的 ColumnInterpreter 的 jar 文件。服务器上 HBase 的内置 EndPoint 找不到你的 ColumnInterpreter。

# file-upload - 为什么上传到服务器的文件变成只读的？

> ID：12281942
> 
> 赞同：0
> 
> 时间：2012-09-05T12:55:39.487
> 
> 标签：file-upload, readonly

将 .xls 文件上传到服务器后，它变为只读。如何使它重新读/写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:28:42.327

你可以使用 chmod() php 函数。只需像这样输入：

```
chmod("/dir/file.xls", 0777); 
```

更多关于它的文档： http: [//php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:58:16.940

您必须检查`read only`在这种情况下的真正含义 - 是否缺少写权限（然后使用`chmod`设置一个毕竟）或者您的文件可能由其他人拥有（这通常发生在配置不正确的主机上，上传由处理`httpd`，不是拥有文件层次结构的用户。如果你有 shell 访问权限，请执行以下操作：

```
$ ls -l 
```

列出文件并查看谁拥有它，然后检查您的所有者 ID 是什么：

```
$ id 
```

如果这些不匹配，那么您可能需要重新配置您的服务器

# html - 默认 403 页面未显示

> ID：12281943
> 
> 赞同：1
> 
> 时间：2012-09-05T12:55:47.100
> 
> 标签：html, .htaccess

我最近在我的服务器中设置了一些新文件夹，但我想关闭它们以及禁止它们的所有子文件夹。所以，使用`.htaccess`，我只是使用`deny from all`. 这里的问题是它把我重定向到主机的 404 页面（有很多广告，加入我们，它看起来像他们的首页），而不是常规的 403 页面。

这似乎是一个非常微不足道的问题，但我无法在任何地方找到答案。如何获取该文件夹中的所有内容以使用经典的 403 页面，如下所示：

```
<html>
<head>
<title>403 Forbidden</title>
</head>
<body>
<h1>Forbidden</h1>
<p>You don't have permission to access /example/example2/exampleC/
on this server.</p>
</head>
</html> 
```

这取决于我刚刚输入的文件夹。如果在`/example/`我有`/example1/`,`/example2/`并且`/example3/`, 我该如何做这样如果我输入 /example1/ ，我会得到一个 403 页面，说我无权访问`/example/example1/`？

这可能看起来有点过于（不必要）复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:25:14.480

让我们一步一步调试

要进行调试，请按照以下步骤操作

1.  在 DocumentRoot .htaccess 中重命名为 .htaccess_safe
2.  在 DocumentRoot "test" 中创建一个文件夹
3.  在该文件夹中插入具有以下内容的**.htaccess**

    重写引擎开启

    重写规则 ^(.*)$ [http://google.de](http://google.de) [L,R=301]

4.  在浏览器中打开[http://example.com/test/](http://example.com/test/) [你应该重定向到谷歌]

如果这可行...在第 5 步下阅读更多内容。

如果不是...把这个 .htaccess 放在 DocumentRoot 文件夹中并在浏览器中打开[http://example.com/test/](http://example.com/test/)如果它也没有运行，请停止调试。如果有效，您的服务器将无法在子文件夹中执行 .htaccess（检查您的服务器组、用户和 chmod 上的 .htaccess 文件的权限......

(5) 将您的 .htaccess_safe 重命名为 .htaccess 并将第 12 行 RewriteRule ^$ [http://www.avatarchan.net/site/](http://www.avatarchan.net/site/) [R=301,L] 更改为 #RewriteRule ^$ [http://www.avatarchan。 net/site/](http://www.avatarchan.net/site/) [R=301,L] 再试一次

# ruby-on-rails - 在 rails 3.1.8 中获得质量分配警告，但没有调用 attr_accessible

> ID：12281944
> 
> 赞同：1
> 
> 时间：2012-09-05T12:55:49.190
> 
> 标签：ruby-on-rails, mass-assignment

我有一个在 Rails 3.0.7 上运行的独立应用程序，它也用作 rails 引擎，它在父应用程序的 rails 3.1.8 下运行。现在，我有一个连接到用户模型的注册表单，具有验证等功能。当我将应用程序作为引擎运行并尝试注册时，我可以在日志中看到“无法批量分配属性”警告。

我的 user.rb 模型文件没有调用`attr_accessible`or `attr_protected`。`attr_accessible`为该模型上的给定字段添加调用解决了该问题。但是，我想知道可能是什么原因造成的。当我以独立方式运行该应用程序时，它运行良好。我不确定rails版本是否与它有关，但这是一个重要的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:48:32.943

检查父项目 config/environments/x.rb 文件是否有 config.active_record.mass_assignment_sanitizer = :strict，如果有的话，评论它可能有效但不建议

# .net - SqlDataAdapter.RowUpdated 更新来自另一个进程时的事件

> ID：12281945
> 
> 赞同：0
> 
> 时间：2012-09-05T12:55:49.857
> 
> 标签：.net, database, wcf, client

似乎检测数据表更改的最佳方法是使用 SQLDataAdapter 中的 RowUpdated 事件。但是，当我有 2 个独立的服务并且每个服务都有自己的一组客户端和自己的数据库连接时会发生什么？

如果从其中之一完成数据库更新，事件是否会在两个独立服务中触发，以便我可以通知所有客户端数据已更新？

BTW：该项目背后是一个IIS + WCF 和Silverlight 客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:58:53.590

该类`DataTable`几乎与数据库无关。`RowUpdated`当数据库发生更改时，该事件不会触发 - 它会在 (in-memory) 发生更改时触发`DataTable`。

事实上，该[`RowUpdated`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.rowupdated.aspx)事件并没有检测到任何变化。

# android - Intent.ACTION_VIEW 打开的网页看起来放大了

> ID：12281949
> 
> 赞同：0
> 
> 时间：2012-09-05T12:56:08.550
> 
> 标签：android, android-intent, android-webview

我建立了一个非常简单的网页供在线常见问题解答参考。这基本上是一个带有很少 css 的纯 html 页面。

当我从我的 PC 浏览器打开它时，它看起来还不错，当我从不同的智能手机（默认浏览器）打开它时，它看起来都很酷。

现在，当我尝试通过使用 ACTION_VIEW 调用意图在我的移动应用程序中打开它时，我的问题出现了，如下所示：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://my.domain.it:8443/FAQ/"))); 
```

事实上，这会导致不同的行为，具体取决于用于执行此操作的设备。三星 S2 显示正确，但大多数其他设备（即三星 Note，所有 Galaxys ......）显示的网站比普通 brawser 的视图放大得多，而且缩放似乎以某种方式“固定”，甚至缩小视图不会将其转换为常规的 brawser 正确视图。

我可以为此做些什么吗？我已经在谷歌上搜索了一段时间，但找不到一个有用的链接。

**编辑**

我使用在线验证器验证了 HTML 和 CSS，并且两者都给出了“有效”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:02:55.437

检查您的网站是否存在 HTML 或 CSS 错误。您的问题实际上与 android 没有任何共同之处，但是 3rd 方应用程序解释您的 HTML/CSS 的方式

# c# - ConcurrentBag 如何更改对象属性

> ID：12281953
> 
> 赞同：0
> 
> 时间：2012-09-05T12:56:30.887
> 
> 标签：c#, synchronization, thread-safety

我有一个具有一个属性的 QueueItem 对象。我需要在 ConcurrentBag 列表中找到它并更改它的值。怎么做？

```
QueueItemList = new ConcurrentBag<QueueItem>() 
```

我可以像这样使用 linq 在 ConcurrentBag 中查询对象

```
MyItem =  QueueItemList.Where(match);
MyItem.Status = changeThis; 
```

但是这个线程安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:06:46.457

该`Where`操作或任何其他收集操作是线程安全的，例如，如果它不是线程安全的，则`Where`如果有人同时更改其他线程中的项目计数，则操作可能会出错，但更改`Status`属性与集合，它不是线程安全的。

# php - Magento 模板未加载

> ID：12281955
> 
> 赞同：0
> 
> 时间：2012-09-05T12:56:37.583
> 
> 标签：php, magento

我需要删除默认 Magento 结帐并添加自定义。问题是自定义扩展模板未加载。日志没有显示任何错误。我附上了截图[http://skit.ch/nwpi](http://skit.ch/nwpi)

代码在这里[https://gist.github.com/3636029](https://gist.github.com/3636029)

这里有两个问题，

块不渲染？

即使我取消了设置`"checkout.onepage"`，当我转储整个布局时，它也会显示默认的结帐布局代码。这是正常行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:07:26.067

问题在于您的控制器：

`$this->getLayout()->getBlock('content')->unsetChildren('checkout.onepage');`

看：

```
Mage_Core_Block_Abstract

/**
 * Unset all children blocks
 *
 * @return Mage_Core_Block_Abstract
 */
public function unsetChildren()
{
    $this->_children       = array();
    $this->_sortedChildren = array();
    return $this;
}

/**
 * Unset child block
 *
 * @param  string $alias
 * @return Mage_Core_Block_Abstract
 */
public function unsetChild($alias)
{
    if (isset($this->_children[$alias])) {
        unset($this->_children[$alias]);
    }

    if (!empty($this->_sortedChildren)) {
        $key = array_search($alias, $this->_sortedChildren);
        if ($key !== false) {
            unset($this->_sortedChildren[$key]);
        }
    }

    return $this;
} 
```

所以你的代码应该是：

`$this->getLayout()->getBlock('checkout.onepage')->unsetChildren();`

**或者**

`$this->getLayout()->getBlock('content')->unsetChild('checkout.onepage');`

# java - 将 TimePickerDialog 设置为使用 15 分钟间隔

> ID：12281956
> 
> 赞同：3
> 
> 时间：2012-09-05T12:56:42.590
> 
> 标签：java, android, android-layout

如何将 Android 设置`TimePickerDialog`为使用 15 分钟间隔？

我需要以编程方式创建选择器，如下所示，因此涉及 XML 中的时间选择器的解决方案（例如这里：[Android - TimePicker minutes to 15](https://stackoverflow.com/questions/2580216/android-timepicker-minutes-to-15)）将不起作用。

```
new TimePickerDialog(getActivity(), t, hour,minute, false).show(); 
```

问题是似乎没有办法在`TimePicker .setOnTimeChangedListener()`创建时间选择器时传入一个新函数。

是否可以使用新的 TimePIckerDialog 构造函数并使用 15 分钟间隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T11:17:50.187

所有相关答案都需要您设置一个 OnTimeChangedListener。我的解决方案是扩展 android TimePicker，并修改它的构造函数：

```
// minute
mMinuteSpinner = (NumberPicker) findViewById(R.id.minute);
mMinuteSpinner.setMinValue(0);
mMinuteSpinner.setMaxValue(3);
mMinuteSpinner.setDisplayedValues(new String[]{"0", "15", "30", "45"});
mMinuteSpinner.setOnLongPressUpdateInterval(100);
mMinuteSpinner.setFormatter(NumberPicker.getTwoDigitFormatter()); 
```

所以你可以有你想要的间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:11:53.030

覆盖 onTimeChanged 方法

```
TimePickerDialog timePickerDialog = new TimePickerDialog(this, listener, 1, 1, true) {
        @Override
        public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
            ...
        }
};

timePickerDialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T05:23:36.663

从这篇文章和其他文章中收集部分解决方案，我相信[这里](https://stackoverflow.com/a/19970113/530513)的解决方案勾选了所有用于显示 a 的框，并`TimePickerDialog`在`NumberPicker`.

# php - 提交发票时 Magento 错误 1014

> ID：12281957
> 
> 赞同：0
> 
> 时间：2012-09-05T12:56:46.940
> 
> 标签：php, magento, e-commerce, magento-1.7

我的 Magento 安装有问题。当我登录到后端并尝试提交发票时，我收到错误 1014：后端：未指定错误根本没有堆栈跟踪。我的错误日志也什么也没说。有很多条目说：客户端被服务器配置拒绝：`/var/www/vhosts/mydomain.com/httpdocs/app/etc/local.xml`

我能做些什么来调试这个，我不知道从哪里开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:12:44.870

问题解决了。问题与 multisafepay 扩展有关。当事务正在进行且未完成时，后端会生成错误。当交易“未决”时，系统会向客户发送邮件，以便他们仍然可以完成交易。当他们这样做时，发票是正确生成的。这只是扩展的一个松散端，但没什么大不了的。

谢谢你的帮助，阿比德侯赛因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:47:08.297

看到这个网址

[http://www.magentocommerce.com/boards/viewthread/270355/#t373760](http://www.magentocommerce.com/boards/viewthread/270355/#t373760)

**或者试试：**

我遇到了同样的问题。问题是税收类。请按照这些步骤进行调试

*   创建一个新产品“test”并设置 Tax Class=NONE

*   将此“测试”产品添加到购物车并尝试下订单。

*   如果下订单，请检查您如何在 Magento 中设置税款。

# c# - 为什么 Stack Trace 会显示我的开发文件路径？

> ID：12281962
> 
> 赞同：30
> 
> 时间：2012-09-05T12:57:05.087
> 
> 标签：c#, visual-studio-2010, debugging, c#-4.0, stack-trace

Visual Studio 2010 SP1，编译 WCF 应用，放到服务器上，当然第一次运行就出错了（什么是新的），输出 Stack Trace 到日志文件。

它看到了我的开发环境的路径。为什么？是因为我将它部署为 Debug 而不是 Release 还是有其他原因，或者我是否应该更加小心地输出堆栈跟踪？

```
04/09/2012 03:58:46: Error: Object reference not set to an instance of an object.    at App1.Logging.LogMessageToFile(String msg, Boolean isUsingClickOnceApp) in C:\Users\robcube\Documents\Visual Studio 2010\Projects\AppWebService\App1\Logging.cs:line 63
   at App1.App1Main.ConnectWebService(String description) in C:\Users\robcube\Documents\Visual Studio 2010\Projects\AppWebService\App1\International.cs:line 40
04/09/2012 03:58:46: Error: Object reference not set to an instance of an object.    at App1.App1Main.UpdateActivityLog(String data, String userName, Boolean deleteData, Int64 firstId, Int64 lastId, String changeType) in C:\Users\robcube\Documents\Visual Studio 2010\Projects\AppWebService\App1\App1Main.cs:line 641 
```

谢谢，-罗布

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-05T13:08:25.887

这是因为您复制了 .pdb 文件以及可执行文件。CLR 将在生成堆栈跟踪时查找它们，以尝试提供尽可能多的有关跟踪中堆栈帧的信息。.pdb 存储源文件名和行号。

您应该部署代码的发布版本。这样可以进行优化，使您的代码运行得更快。您仍然可以复制该构建的 .pdb 文件，它们通常会删除该调试信息。Project + Properties，切换到Release build，Build，Advanced，“Debug Info”设置。这里发布版本的正常设置是“pdb-only”而不是“full”。这意味着不包括源文件和行号。这是有道理的，在抖动优化了代码之后，堆栈跟踪往往有点不可靠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:00:47.610

在调试模式下部署时，原始源文件路径存储在 PDB（[程序数据库）文件中是正常的。](https://msdn.microsoft.com/en-us/library/ms241903%28v=vs.100%29.aspx)

# java - BitmapFactory.decodeByteArray() 在二进制位图上返回 null

> ID：12281964
> 
> 赞同：0
> 
> 时间：2012-09-05T12:57:10.390
> 
> 标签：java, android, null

我有一个`byte`包含 0 和 -1 （255）系列的数组。这是使用 Otsu 算法进行二值化的结果。我用了：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inDither = true;
opt.inPreferredConfig = Bitmap.Config.RGB_565; // I have tried ARGB_8888 aswell

Bitmap out = BitmapFactory.decodeByteArray(data, 0, data.length, opt); 
```

不幸的是，它返回 null。就像其他关于`BitmapFactory.decodeByteArray()`.

我已经测试了其他方法，例如嵌套 for 循环，它可以工作，但处理时间太长，尤其是对于大图像。

这是我目前用来生成二值化的`data`：

```
ptr = 0;
while (ptr < srcData.length)
{
    monoData[ptr] = ((0xFF & srcData[ptr]) >= threshold) ? (byte) 255 : 0;
    ptr ++;
} 
```

我希望你能引导我找到更好的方法来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:07:48.947

565 是每个像素使用 2 个字节的表示。

此外， decodeByteArray 是一种读取*压缩*字节 [] 的方法（请参阅文档）。

这是我要做的：

*   使用 int[] 而不是 byte[]。
*   初始化如下
*   使用[Bitmap.html#createBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int%5B%5D,%20int,%20int,%20int,%20int,%20android.graphics.Bitmap.Config%29)方法与 int[] 结果。此时使用的配置并不重要。

`monoData[ptr] = ((0xFF & srcData[ptr]) >= threshold) ? 0xffffffff : 0xff000000;`

注意：可能对您有所帮助的一件事：decodeByteArray 不知道图像的几何形状，因此当然不能将其解码为您所期望的。

# python - 模板中的Django外键关系

> ID：12281965
> 
> 赞同：21
> 
> 时间：2012-09-05T12:57:14.073
> 
> 标签：python, django, django-models, django-templates, foreign-key-relationship

我知道你会说这个问题以前被问过很多次，但我还没有解决它......

模型.py

```
class Doc(UploadModel):
    doc_no =  models.CharField(max_length=100, verbose_name = "No", blank=True)
    date_added = models.DateTimeField(verbose_name="Date", default=datetime.now,
                 editable=False)

class DocImage(models.Model):
    property = models.ForeignKey(Doc, related_name='images')
    image = FileBrowseField("Docs", max_length=200,
            directory="doc_img/%Y/%m/%d/%H/%M/%S/", 
            extensions=[".jpg",".tif"], blank=True, null=True) 
```

视图.py

```
def doc_detail(request, dosc_no):

    res = Doc.objects.filter(doc_no = dosc_no)        
    return render_to_response("doc/doc_detail.html",  {"result": res}) 
```

模板：

```
{% for i in docimage.property_set.all %}

{{ i.image.url }}  

{% endfor %} 
```

我已经尝试过上面的模板，但我没有得到任何结果。所以我想在 DocImage 类中获取 imageurl 地址...

一切都有帮助

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-05T13:10:51.283

如果您查看[外键文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)，如果您有类似的关系

```
Doc -> has many DocImages 
```

您需要在 DocImages 类上定义外键，如下所示：

```
class DocImage(models.Model):
    property = models.ForeignKey(Doc, related_name='images') 
```

如果您不设置相关名称，则可以从 Doc 访问 DocImages，例如：

```
Doc.docimage_set.all() 
```

[相关对象](https://docs.djangoproject.com/en/1.11/topics/db/queries/#related-objects)的文档

但是`related_name`在属性字段中设置可以让你做

```
Doc.images.all() 
```

只需确保您在视图上下文中传递给模板的任何内容都与模板中使用的内容相匹配，例如

```
# in the view
return render_to_response('mytemplate.html', { 'mydoc' : doc, 'mydocimage' : img } 
```

然后可以在模板中使用它，如下所示：

```
# and in your template to get the images attached to the document
{% for i in mydoc.images.all %}
    ...
{% endfor %}

# or to get the document the image belongs to
{{ mydocimage.property.date_added }} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T13:08:27.307

*   首先你迭代结果
*   与 Doc 相关的图像由 doc 的 images 属性检索，该属性由 ForeignKey 中的 related_name 属性生成

代码：

```
{% for doc in result %}
  {% for docimage in doc.images.all %}
    {{ docimage.image.url }}
  {% endfor %}
{% endfor %} 
```

# python - 使用 strptime 将带偏移量的时间戳转换为 datetime obj

> ID：12281975
> 
> 赞同：64
> 
> 时间：2012-09-05T12:57:46.320
> 
> 标签：python, datetime, timestamp, rfc3339

我正在尝试使用 strptime 方法将格式为“2012-07-24T23:14:29-07:00”的时间戳转换为 python 中的日期时间对象。问题在于最后的时间偏移（-07:00）。没有偏移我可以成功

```
time_str = "2012-07-24T23:14:29"

time_obj=datetime.datetime.strptime(time_str,'%Y-%m-%dT%H:%M:%S') 
```

但是我尝试了偏移量

```
time_str = "2012-07-24T23:14:29-07:00"

time_obj=datetime.datetime.strptime(time_str,'%Y-%m-%dT%H:%M:%S-%z'). 
```

但它给出了一个值错误，说“z”是一个错误的指令。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-05T13:01:17.973

Python 2`strptime()`函数确实不支持`%z`时区格式（因为底层[`time.strptime()`函数](http://docs.python.org/library/time.html#time.strptime)不支持它）。你有两个选择：

*   解析时忽略时区`strptime`：

    ```
    time_obj = datetime.datetime.strptime(time_str[:19], '%Y-%m-%dT%H:%M:%S') 
    ```

*   使用[`dateutil`模块](http://labix.org/python-dateutil)，它的 parse 函数*确实*处理时区：

    ```
    from dateutil.parser import parse
    time_obj = parse(time_str) 
    ```

命令提示符下的快速演示：

```
>>> from dateutil.parser import parse
>>> parse("2012-07-24T23:14:29-07:00")
datetime.datetime(2012, 7, 24, 23, 14, 29, tzinfo=tzoffset(None, -25200)) 
```

您还可以升级到 Python 3.2 或更高版本，其中时区支持已经改进到可以工作的程度，前提是您从输入中`%z`删除最后一个，以及从 之前的：`:``-``%z`

```
>>> import datetime
>>> time_str = "2012-07-24T23:14:29-07:00"
>>> datetime.datetime.strptime(time_str, '%Y-%m-%dT%H:%M:%S%z')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/mj/Development/Library/buildout.python/parts/opt/lib/python3.4/_strptime.py", line 500, in _strptime_datetime
    tt, fraction = _strptime(data_string, format)
  File "/Users/mj/Development/Library/buildout.python/parts/opt/lib/python3.4/_strptime.py", line 337, in _strptime
    (data_string, format))
ValueError: time data '2012-07-24T23:14:29-07:00' does not match format '%Y-%m-%dT%H:%M:%S%z'
>>> ''.join(time_str.rsplit(':', 1))
'2012-07-24T23:14:29-0700'
>>> datetime.datetime.strptime(''.join(time_str.rsplit(':', 1)), '%Y-%m-%dT%H:%M:%S%z')
datetime.datetime(2012, 7, 24, 23, 14, 29, tzinfo=datetime.timezone(datetime.timedelta(-1, 61200))) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-17T18:13:26.137

在 Python 3.7+ 中：

```
from datetime import datetime

time_str = "2012-07-24T23:14:29-07:00"
dt_aware = datetime.fromisoformat(time_str)
print(dt_aware.isoformat('T'))
# -> 2012-07-24T23:14:29-07:00 
```

在 Python 3.2+ 中：

```
from datetime import datetime

time_str = "2012-07-24T23:14:29-0700"
dt_aware = datetime.strptime(time_str, '%Y-%m-%dT%H:%M:%S%z')
print(dt_aware.isoformat('T'))
# -> 2012-07-24T23:14:29-07:00 
```

`:`注意：在 Python 3.7 之前，该变体在部分中不支持（ [rfc 3339](https://www.rfc-editor.org/rfc/rfc3339#section-5.6)`-0700`允许这两种格式）。请参阅[datetime：添加解析 RFC 3339 日期和时间的能力](http://bugs.python.org/issue15873)。

在 Python 2.7 等较旧的 Python 版本上，您可以手动解析 utc 偏移量：

```
from datetime import datetime

time_str = "2012-07-24T23:14:29-0700"
# split the utc offset part
naive_time_str, offset_str = time_str[:-5], time_str[-5:]
# parse the naive date/time part
naive_dt = datetime.strptime(naive_time_str, '%Y-%m-%dT%H:%M:%S')
# parse the utc offset
offset = int(offset_str[-4:-2])*60 + int(offset_str[-2:])
if offset_str[0] == "-":
   offset = -offset
dt = naive_dt.replace(tzinfo=FixedOffset(offset))
print(dt.isoformat('T')) 
```

这里[`FixedOffset`定义了类](https://stackoverflow.com/a/23122493/4279)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-17T07:15:17.037

# `ValueError: 'z' is a bad directive in format...`

（注意：就我而言，我必须坚持使用 python 2.7）

我在解析提交日期时遇到了类似的问题，其输出`git log --date=iso8601`实际上不是 ISO8601 格式（因此`--date=iso8601-strict`在更高版本中添加了）。

由于我正在使用`django`，我可以利用那里的实用程序。

[https://github.com/django/django/blob/master/django/utils/dateparse.py](https://github.com/django/django/blob/master/django/utils/dateparse.py)

```
>>> from django.utils.dateparse import parse_datetime
>>> parse_datetime('2013-07-23T15:10:59.342107+01:00')
datetime.datetime(2013, 7, 23, 15, 10, 59, 342107, tzinfo=+0100) 
```

而不是`strptime`你可以使用你自己的正则表达式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-25T06:06:07.583

用 python 3.5.2
来转换`26 Sep 2000 05:11:00 -0700`

```
from datetime import datetime    
dt_obj = datetime.strptime("26 Sep 2000 05:11:00 -0700", '%d %b %Y %H:%M:%S %z') 
```

转换`2012-07-24T23:14:29 -0700`

```
dt_obj = datetime.strptime('2012-07-24T23:14:29 -0700', '%Y-%m-%dT%H:%M:%S %z') 
```

Python 3.5.2 不支持 -07:00 时间偏移 ':' 应该被移除

# java - 更新 OSGi 包

> ID：12281979
> 
> 赞同：0
> 
> 时间：2012-09-05T12:58:04.057
> 
> 标签：java, osgi

我正在使用 Equinox 构建一个 OSGi 应用程序。对于此应用程序来说，可以更新各个捆绑包是必不可少的。

应用程序检查 HTTP 服务器上的文件夹中是否有新版本的捆绑包以及是否有任何新捆绑包可用。如果有任何新的包可用，应用程序将加载 *.jar 文件并更新此包。更新是通过停止捆绑包、使用加载文件的输入流更新它并再次启动捆绑包来执行的。

问题是，在更新文件并重新启动应用程序后，使用的是旧版本的文件而不是新版本。

迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:12:21.013

考虑为此使用 Apache Felix 文件安装包。它对于查看新的 jars 和/或 .cfg 文件非常有用。Apache Karaf（及其衍生产品）内置了这个功能。JBoss AS 7 也有，尽管实现方式不同。

# c# - 哪种方式更准确？

> ID：12281987
> 
> 赞同：1
> 
> 时间：2012-09-05T12:58:27.957
> 
> 标签：c#, algorithm, precision, double-precision, numerical-computing

我需要将一个数字范围划分为一些具有相同长度的段。但我无法决定哪种方式更准确。例如：

```
double r1 = 100.0, r2 = 1000.0, r = r2 - r1;
int n = 30;
double[] position = new double[n];
for (int i = 0; i < n; i++)
{
    position[i] = r1 + (double)i / n * r;
    // position[i] = r1 + i * r / n;
} 
```

大约是`(double)int1 / int2 * double`或`int1 * double / int2`。哪种方式更准确？我应该使用哪种方式？

**更新**

以下代码将显示差异：

```
double r1 = 1000.0, r2 = 100000.0, r = r2 - r1;
int n = 300;
double[] position = new double[n];
for (int i = 0; i < n; i++)
{
    double v1 = r1 + (double)i / n * r;
    double v2 = position[i] = r1 + i * r / n;
    if (v1 != v2)
    {
        Console.WriteLine(v2 - v1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:00:41.590

两者都不是特别快，因为编译器或 JIT 进程可能会重新排序操作以提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:34:51.127

**免责声明：**我将作为示例给出的所有数字都不准确，但显示了幕后发生的事情的原理。

我们来看两个案例：

(1) `int1 = 1000, int2= 3, double = 3.0` The first method will give you: `(1000.0 / 3) * 3 == 333.33333 * 3.0 == 999.999...`
While the second will give `(1000 * 3.0) / 3 == 3000 / 3 == 1000`
In this scenario - **the second method is more accurate**.

(2) `int1 = 2, int2 = 2, double = Double.MAX_VALUE`
The first will yield `(2.0 / 2) * Double.MAX_VALUE == 1 * Double.MAX_VALUE == Double.MAX_VALUE`
While the second will give `(2 * Double.MAX_VALUE) / 2` - which will cause (in Java) to be `Infinity`, I am not sure what the double standard says about this cases, if it might overflow or is it always infinity - but it is definetly an issue.
So, in this case - **the first method is more accurate**.

The things might go more complicated if the `integer`s are `long`s or the `double` is `float`, since there are long values that cannot be represented by `double`s, so loss of accuracy might happen for large `double` values in this case, and in any case - large `double` values are less accurate.

**Conclusion**: Which is better is **domain specific**. In some cases the first method should be better and in some the first. It really depends on the values of `int1`,`int2`, and `double`.
However- AFAIK, the general rule of thumb with double precision ops is keep the calculations as small as possible (Don't create huge numbers and then decrease them back, keep them small as longest as you can). This issue is known as [loss of significant digits](http://en.wikipedia.org/wiki/Loss_of_significance).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:06:24.110

也许我误解了您的要求，但为什么要在循环内进行任何除法/乘法？也许这会得到相同的结果：

```
decimal r1 = 100.0m, r2 = 1000.0m, r = r2 - r1;
int n = 30;
decimal[] position = new double[n];

decimal diff = r / n;
decimal current = r1;

for (int i = 0; i < n; i++)
{
    position[i] = current;
    current += diff;
} 
```

# asp.net-mvc-3 - 为 Web 应用程序在数据库中存储状态的指南

> ID：12281993
> 
> 赞同：2
> 
> 时间：2012-09-05T12:58:45.613
> 
> 标签：asp.net-mvc-3, database-design, wizard

我在[这里](https://stackoverflow.com/q/12250665/577417)和[这里](https://stackoverflow.com/q/7702687/577417)对 ASP.NET MVC3 应用程序中的状态管理有一些疑问。其中一个答案提到，一个选项是简单地将每个步骤的状态存储在数据库中。

我想知道是否有人对通常如何实现这一点有任何建议，因为当我第一次向我建议时，我有一些想法。

**无效的实体**

考虑一个包含 3 个步骤的多步骤表单（向导）。我可以将每个步骤保存在数据库中以维护状态，但用户可以在该过程中途关闭 Web 应用程序，使我的数据库包含处于无效状态的实体。

为了克服这个问题，我可以在表中添加一个字段来指示向导是否已完成。任何不一致的项目都可以定期审查并在需要时自动删除，例如，如果在一天结束时在数据库中发现任何无效实体，它们将被自动删除。

这样做的问题是我必须向表中添加字段以存储有关应用程序的元数据。每个存储在多步骤表单中输入的信息的表都需要具有这些字段。这对我来说似乎是错误的。一种解决方案可能是创建一个特定的表来管理它，而不是用元数据污染每个实体表。

**中介数据库**

我想有一个位于我的应用程序和“真实”数据库之间的数据库。中间数据库将具有存储每个“步骤”的状态信息的表，并且只有当最后一步完成时，此信息才会传输到“真实”数据库（以及从中间删除的临时数据）。

这听起来也类似于 ASP.NET 已经提供的会话状态选项之一，所以我个人认为这会浪费时间。

**在其他应用程序中使用（EG 桌面）**

目前，我的应用程序是纯粹基于 Web 的，但我计划让桌面程序能够与同一个数据库进行交互。如果数据库有大量元数据被 Web 应用程序用于存储状态，我的桌面应用程序需要知道这一点以避免任何错误（IE 我的桌面应用程序需要知道它必须设置实体状态为“有效”，以便 Web 应用程序不会在一天结束时删除该实体，因为它认为它是无效的）。

**概括**

那么有没有人有关于如何最好地使用数据库来存储应用程序状态的任何信息或提示？

*   数据库选项那么常见吗？
*   它是否适合具有大量实体的大型应用程序？
*   是否有任何性能影响？

**编辑**

为了清楚起见，我知道在 ASP.NET MVC 应用程序（TempData、缓存和会话）中管理状态存在其他选项，但我对有关使用数据库管理状态的信息特别感兴趣。

*请不要对任何提到其他选项的人投反对票，因为我最初的问题可能对此并不清楚。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:02:06.173

为什么不在会话状态中存储数据？您只需要提出一种机制，允许您在会话状态中唯一标识和存储项目。

首先，您可以使用 InProc 会话状态模式。随着系统的增长，您可以考虑将会话状态存储在状态服务器或 SQL 服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:40:38.510

这是一个很难回答的问题，但基本上，我会看到两条路线。

如果向导中给定步骤中的数据在逻辑上是正确的，并且满足您施加的所有约束，则可以将其写入“主”数据库。例如，如果您有一个管理订单的多步骤流程，并且第一步是创建一个客户记录（如果尚不存在），则在用户完成表单时将客户记录写入数据库。

这意味着如果用户离开、关闭浏览器或其他任何事情，当他们回来时数据就会在那里——这可能是他们所期望的。

如果给定步骤中的数据不连贯，不符合约束等，请使用会话状态来管理它，直到它准备好写入数据库。MVC 中的会话状态[有点痛苦](https://stackoverflow.com/questions/671228/how-to-handle-session-data-in-asp-net-mvc)，你应该谨慎使用它——它使编写单元测试变得困难。

会话状态的目的是存储与用户会话相关的数据，但（尚未）打算进入数据库。