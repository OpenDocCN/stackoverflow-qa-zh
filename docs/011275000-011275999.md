# StackOverflow 问答 11275000-11275999

# mysql - 来自 2 个表的 SQL 查询

> ID：11275001
> 
> 赞同：1
> 
> 时间：2012-06-30T14:47:19.113
> 
> 标签：mysql

我有两张桌子；产品表有这些列：

```
id, name_product, producer_id, number_product 
```

和生产者表：

```
id, producer_name 
```

我必须显示生产者名称和产品名称，如果生产者没有产品，则应省略。

我试过这个查询

```
SELECT producer_name, name_product FROM product, producer WHERE name_product = producer_id 
```

由于某种原因，它返回空列，没有错误。

感谢您的任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:50:37.447

你需要[加入](http://mysqljoin.com/joins/inner-join-tutorial/)你的桌子

```
SELECT
  prd.producer_name,
  p.name_product
FROM product p
INNER JOIN producer prd ON p.producer_id = prd.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:52:57.717

那这个呢？？

```
SELECT t2.producer_name, t1.name_product FROM product t1
JOIN producer t2
ON t1.id=t2.id
WHERE t1.name_product = t2.producer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:51:16.293

您可能匹配了错误的列。每当您说“WHERE”时，您通常会匹配常见的数据项。

```
name_product and producer_id 
```

听起来不一样

# php - 带有“pre”标签和“nl2br”的双换行符

> ID：11275006
> 
> 赞同：2
> 
> 时间：2012-06-30T14:47:57.263
> 
> 标签：php, html, line-breaks, pre, nl2br

我`nl2br`对标签使用了函数`pre`，但我遇到了一个奇怪的问题：有2个换行符，但只有一个`<br />`标签。

例如：

```
code in line 1<br />
code in line 2<br /> 
```

显示为：

```
code in line 1

code in line 2 
```

代替：

```
code in line 1
code in line 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:53:51.183

将文本包装在`<pre>`标签中将强制它以书面形式显示：包括空格、制表符和换行符。因此，回车将创建一个新行并且`<br />`将创建第二个新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T15:55:28.283

I had the same problem. The correct answer is much simpler. Don't use nl2br with pre.

nl2br adds `<br />` to text for html, but the pre tag already preserves the text format. That's what it means. `<pre>` = preformatted.

Yes, something like this will work, until it doesn't.

```
<pre>
    preg_replace ("/[\n\r]+/", "",nl2br(file_get_contents("/crashbody.txt")))
</pre> 
```

But that's silly. You're adding line breaks and removing them. To preserve your whitespace and your line breaks, let `<pre>` do it's job.

```
<pre>
    file_get_contents("/crashbody.txt")
</pre> 
```

Or better still:

```
<div style = "white-space: pre; text-align:left;">
    file_get_contents("/crashbody.txt")
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:45:03.390

当您在 pre 块中编写它时，您不需要应用 nl2br() 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T14:54:56.593

`preg_replace ("/\n+/", "", $pre)`甚至更好`preg_replace ("/[\n\r]+/", "", $pre)`

# iphone - 通过 writeToFile 将 NSMutable 数组写入 plist 文件

> ID：11275007
> 
> 赞同：0
> 
> 时间：2012-06-30T14:48:13.157
> 
> 标签：iphone, nsmutablearray, writetofile

我有一个名为 playerData 的 plist 文件，其中包含索引 0 处的数字对象，指示已完成的最高级别。加载视图后，我读取了整个游戏逻辑中使用的这个对象的整数值。如果玩家赢得比赛，我想增加这个数字并将其写入 plist 文件。这是我的代码（包含在 if 语句中）

```
levelNumber++;
NSNumber *levelNSNum = [[NSNumber alloc] initWithInteger:levelNumber];
[playerData replaceObjectAtIndex:0 withObject:levelNSNum];
[playerData writeToFile:[[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"PlayerData.plist"] atomically:YES];
NSLog(@"%i should be written to file", levelNumber); 
```

日志有效，所以我知道 if 语句的条件已经满足，并且该值与以前在 plist 文件中的值不同，但由于某种原因，该数据没有被覆盖该数据。

我对此比较陌生，所以我可能会犯一个简单而愚蠢的错误，我似乎无法找到答案。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:56:48.603

您正在尝试写入您的包，该包在安装应用程序后是只读的。您应该改为写入应用沙箱中的某个位置，例如在您的`Library/Application Support`目录中。（您可以使用`- [NSFileManager URLsForDirectory:inDomains:]`NSApplicationSupportDirectory 来查找此路径；请务必在尝试写入之前创建目录。）

# regex - 用于 mod 重写的递归正则表达式

> ID：11275008
> 
> 赞同：1
> 
> 时间：2012-06-30T14:48:13.857
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting, seo

我正在尝试使用 mod_rewrite 递归修改我的网页网址，但无法找出这种情况的重写规则：

我想从模式更改我的网址

```
http://mywebsite.com/token1-token2-token3-token4-categoryname 
```

至

```
http://mywebsite.com/?cat=categoryname&search=token1+token2+token3+token4 
```

挑战在于 url 中的令牌数量可能会有所不同，因此我需要以某种方式递归处理令牌匹配和转换。任何想法如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:13:29.577

尝试：

```
# Remove all of the - and replace with +
RewriteRule ^(.*)-(.*)$ /$1+$2 [L]

# only rewrite when there are no more -
RewriteCond %{REQUEST_URI} !\-
RewriteRule ^(.+)\+([^\+]+)$ /?cat=$2&search=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:09:15.360

`RewriteRule ^/?(.+)\-([^\-]+)$ /?cat=$2&search=$1 [QSA,L]`

# javascript - CSS 渐变过滤器 Javascript 和 IE 9

> ID：11275009
> 
> 赞同：2
> 
> 时间：2012-06-30T14:48:20.897
> 
> 标签：javascript, css

问题：**IE9**

我有一张桌子。我有一个 CSS 类。CSS 类包含一个渐变过滤器：

```
.red
{
    filter:progid:DXImageTransform.Microsoft.Gradient(sProperties);
} 
```

如果我做：

```
... <tr class="red"> ... 
```

一切正常。如果我做

```
<script type="javascript">

... element.className = 'red';

</script> 
```

过滤器不适用。有人知道在分配申请后可以触发什么事件吗？执行 td class="red" 是没有解决方案的，表格是使用 powershell 表格助手呈现的。jQuery 或其他框架也无济于事，它会炸毁这个简单的“单页”应用程序。在此先感谢，罗伯特

编辑：

[http://msdn.microsoft.com/en-us/library/ms532997(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532997(v=vs.85).aspx)

```
object.style.filter =  "progid:DXImageTransform.Microsoft.Gradient(sProperties)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:54:11.007

假设`element`实际上是指您要设为红色的元素，并且`element`在页面上实际存在调用它的脚本之后调用它，并且您的 CSS 包含实际参数`Gradient`而不仅仅是文字`sProperties`，然后尝试将页面放大和缩小到手动强制重绘。假设渐变突然出现，尝试切换`display`隐藏`element`然后再次显示，从而强制自动重绘。

实际上，这是很多假设......也许你应该只使用 a`background-image`代替？

# android - 如何使用 android:background="@drawable/btn_green" 更改按钮样式

> ID：11275010
> 
> 赞同：0
> 
> 时间：2012-06-30T14:48:35.347
> 
> 标签：android, android-layout, button

我找到了一个教程，展示了如何通过添加到布局文件来更改`style`a 。`Button``android:background="@drawable/btn_green"``xml`

我试过添加：

```
<Button
    android:id="@+id/my_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello" 
    android:background="@drawable/btn_green"/> 
```

`xml`我在文件中收到错误消息`error: Error: No resource found that matches the given name (at 'background' with value '@drawable/btn_green').`

教程说我需要`import the Backgrounds project into Eclipse by choosing the Import option from the File menu`。

我已经尝试过，`File > Import`但找不到与背景有关的任何内容。

谁能建议我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:50:17.407

检查天气名称为“btn_green”的图像是否在 drawable-*dpi 文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:50:47.327

在可绘制文件夹中的 btn_green 中添加文件刷新项目并清理和构建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T06:27:55.153

你有这个是因为文件夹`Error: No resource found that matches the given name`中没有带有名称`btn_green`的图像。`drawable`

而且我认为您希望单击`Button`. 为此，您需要在文件中使用`selector`属性。`xml`为此，请阅读[这篇文章。](http://www.mkyong.com/android/android-imagebutton-selector-example/)

# asp.net - 使用多语言支持的“正确”方式

> ID：11275016
> 
> 赞同：4
> 
> 时间：2012-06-30T14:49:48.770
> 
> 标签：asp.net, visual-studio-2010, multilingual

我刚开始使用 ASP.NET，我正试图带来一些我认为健康的编码标准。在这些标准中，有多语言支持和资源使用以轻松处理未来的变化。

当我过去编写桌面应用程序代码时，每个文本都必须翻译，因此为我想向客户提供的每种语言提供语言文件是一种常见的做法。在这些文件中，我将映射每一个文本，从按钮标签到错误消息。在 ASP.NET 中，在 Visual Studio 的帮助下，我不得不使用 IDE 来生成此类资源文件（从工具 -> 生成本地资源），但是我必须用标签填充我的网页 - 至少那样是我从文章和教程中学到的。然而，这种方法看起来有点奇怪，我很想猜测它闻起来也没有那么好。现在的问题：

1.  我应该将网站中的每一个文本都保留为标签并在资源文件中管理其内容吗？尤其是在考虑包含多个段落的文本时，它看起来/感觉很奇怪。

2.  每当我向 aspx 文件添加/删除某些东西时，例如：一个按钮，我也必须将它添加到资源文件中，因为再次生成资源文件只会覆盖我之前对其所做的所有更改。对我来说，这根本不像是可重用的代码。

也许我从教程中弄错了，因为它似乎不是一个标准化的问题 - 特别是如果它需要在必须进行一些更改时重新编译整个应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T15:12:28.333

多年来，ASP.NET Web 窗体本地化的最佳实践并没有真正改变。如果您没有太多动态内容，那么您可以使用隐式本地化并将 Web 表单控件（表单元素，是的，甚至标签）绑定到资源文件。如果您想要更多地控制本地化文本在具有多个标题或您自己创建的控件中呈现的位置，则显式本地化很有用。您不需要很远地寻找 MS 提供的有关如何执行其中任何一项的指导步骤。

[演练：通过 ASP.NET 使用资源进行本地化](http://msdn.microsoft.com/en-us/library/fw69ke6f.aspx)

如果您的本地化要求更加动态，例如，您希望轻松提供新语言、集中资源，或者您需要**在新维度（如每个客户端）上提供新的字符串标题**，那么您需要获得更多创意。.NET 允许您扩展资源提供程序，并且您可以实现一个数据库后端，以便轻松管理本地化资源。

[扩展 ASP.NET 2.0 资源提供者模型，构建数据库资源提供者](http://msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic4)

[扩展 Resource-Provider 以在数据库中存储资源](http://weblogs.asp.net/thangchung/archive/2010/06/25/extending-resource-provider-for-soring-resources-in-the-database.aspx)* 一个更新的实现

或者你可以自己动手！

我还挖了一个重复的 SO 帖子。它已经有几年的历史了，但从经验来看，我相信在引用的代码项目页面上找到的建议仍然是正确的（对于 Web 窗体）：[全球化和本地化在 ASP.NET 2.0 中揭开神秘面纱](http://www.codeproject.com/Articles/15313/Globalization-and-localization-demystified-in-ASP)

我希望这会有所帮助！如果您对本地化有任何更具体的问题，请将它们添加到您的问题或评论中。

# android - 返回调用应用程序时防止 SingleTask 应用程序关闭

> ID：11275019
> 
> 赞同：1
> 
> 时间：2012-06-30T14:50:10.057
> 
> 标签：android, button, back, single-instance

我有两个应用程序，我将它们称为应用程序 A 和应用程序 B。应用程序 B 是单任务应用程序，通常，如果您从主屏幕启动此应用程序并使用返回按钮，您将无法返回主屏幕。现在假设应用 A 需要使用 Intent 调用应用 B。如果用户随后在应用程序 B 中使用返回按钮，我确实希望他们返回应用程序 A。但由于我覆盖了返回按钮，因此无法使用返回按钮返回应用程序 A。

我怎样才能返回到应用程序 A，但如果应用程序 A 调用它时应用程序 B 正在运行，那么它是否仍然在运行？如果在应用 A 调用它时应用 B 未运行，则应用 B 应在按下后退按钮时关闭（被销毁）。

我使用的是安卓 2.2

更新：

我尝试了以下方法：

```
 @Override
  public void onBackPressed()
  {
    try
    {
      if (this.returnToClient)
        moveTaskToBack (true);

      this.returnToClient = false;
    }
    catch (Exception ex)
    {
    }
  } 
```

如果调用应用程序通过检查传入的一些捆绑数据来启动活动，我将 returnToClient 设置为 true。

现在，如果我按下后退按钮，应用程序 B 将移至后台，应用程序 A 将移至前台。看起来不错。现在，如果我按下 Home 按钮然后启动应用程序 B，应用程序 B 就会从它停止的地方继续。也很好。现在是坏的部分。如果我长按 Home 按钮以调出历史列表，然后点击应用程序 B 的图标，则 onNewIntent 方法的调用方式与传入的数据完全相同，就好像应用程序 A 启动了活动。所以我猜测的是，Android 对待从主屏幕启动应用程序的方式与从历史记录列表中启动应用程序的方式不同。为什么？我不知道。似乎历史与*谁有关*最后启动活动并将捆绑数据作为该历史记录的一部分保存。这很奇怪，它会导致不需要的行为，使应用 B 看起来像是刚从应用 A 调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:33:18.783

让 AppA 使用带有 EXTRA 的 Intent 启动 AppB，表明它是从 AppA 启动的，如下所示：

```
Intent intent = new Intent(this, AppB.class);
intent.putExtra("returnToAppA", "true");
startActivity(intent); 
```

然后，当 AppB 捕获“返回”键时，它可以检查它是否是从 AppA 启动的，如果是，它可以像这样返回到 appA：

```
Intent intent = new Intent(this, AppA.class); // Use the starting
                                              //  (root) Activity of AppA here
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

设置 FLAG_ACTIVITY_NEW_TASK 将确保不会创建 AppA 的新实例，但它只会返回到包含 AppA 的现有任务。

# jsp - 如何终止 JSP 中的请求（不是“返回；”）

> ID：11275026
> 
> 赞同：1
> 
> 时间：2012-06-30T14:50:43.287
> 
> 标签：jsp, httpwebrequest

我正在用 JSP 编写一个网站。有些页面用户必须登录才能查看。如果他们没有登录，他们应该会看到一个登录表单。我在 php 代码中看到您可以创建一个 .jsp 页面（单个文件），该页面检查用户是否登录。如果没有，它将显示登录表单。如果用户已登录，则不会执行任何操作。所以为了做到这一点，我在我的 JSP 中使用了这个结构：

页眉、菜单等等等...正常的东西，例如正文、页脚给登录用户。

这种结构很容易应用于所有网页。所以我不必对每个网页都应用检查算法！我可以简单地添加这个“”并且页面是安全的！

所以我的问题是，如果用户没有登录，那么只应该显示登录表单和页脚。所以代码应该绕过主体。因此将我的 checklogin.jsp 结构化为：

如果用户未登录，则显示登录表单和页脚并终止请求。问题是我不知道如何终止请求......如果我使用“return;” 然后只有 checklogin.jsp 停止，但服务器继续处理父页面！因此页面有 2 个页脚！（1 个来自父页面，1 个来自 checklogin.jsp）。我怎样才能避免这种情况？

（顺便说一句，在 php 中有 exit(); ！）

感谢您的任何建议！

编辑1：我也尝试过 response.getOutputStream().close(); 但似乎没有用。

编辑 2：我在 PHP 中需要一个类似物：exit();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:02:27.663

好的，我的问题的答案是 out.close(); 这只是结束响应。感谢 JB Nizet 指出了这个问题的另一个方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:12:21.890

您可以像使用任何编程语言一样进行操作：

```
<c:choose>
    <c:when test="userIsLoggedIn">
        normal header, body
    </c:when>
    <c:otherwise>
        login form
    </c:otherwise>
</c:choose>
footer 
```

但主要问题是你根本不应该这样做。应该使用 JSP 来生成标记。不检查用户是否登录并根据结果显示页面或其他页面。您应该在 Java 中，在分派到适当 JSP 的 servlet 中执行此操作。这就是 MVC 模式。

而且由于几乎所有请求都应该这样做，因此您甚至应该在 servlet 过滤器中这样做。过滤器映射到一组 URL，如 servlet，并拦截对这些 URL 的所有请求。因此，过滤器将检查用户是否已登录，如果没有，则转发或重定向到登录页面。如果用户通过了身份验证，除了让请求转到映射到 URL 的 servlet/JSP 之外，它不会做任何事情。

例如，阅读[http://www.oracle.com/technetwork/java/filters-137243.html](http://www.oracle.com/technetwork/java/filters-137243.html)，了解有关过滤器的更多信息。

# android - 将 admob 广告定位到屏幕底部

> ID：11275030
> 
> 赞同：2
> 
> 时间：2012-06-30T14:51:00.453
> 
> 标签：android, admob

我正在开发一个 android 项目，刚刚下载了最新版本的 admob sdk。

我正在尝试将广告放在屏幕底部，但我尝试的任何方法似乎都不起作用。

下面是布局的 XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView android:id="@+id/password_noRecords"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_gravity="center"
        android:text="There are currently\nno saved logins"
        android:textSize="20dp"
        android:textStyle="bold|italic"/>
    <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </ListView>
        <com.google.ads.AdView android:id="@+id/adView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adUnitId="MY_ID"
            ads:adSize="BANNER"
            ads:testDevices="TEST_EMULATOR, emulator-5554"
            ads:loadAdOnCreate="true">
        </com.google.ads.AdView>
</LinearLayout> 
```

我已经尝试在高度上制作 ListView 和 LinearLayout fill_parent，但是在 logcat 中说没有足够的空间来显示广告。

我还尝试将广告包装在线性布局中并说 align parent bottom = true 但这并没有什么不同。

相反，广告直接放置在列表视图的底部，因此如果列表视图为半空，则广告位于屏幕中间。

我想要的是广告始终在屏幕底部可见，无论列表视图有多大或多小。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T15:27:44.310

将您的父布局更改为`RelativeLayout`

`android:layout_alignParentBottom="true"`在 adView 和`android:layout_above="@+id/adView"`ListView 上使用。

根据需要在您的其余视图上使用`android:layout_below="@+id/xxxx"`，以使它们的行为与您的相同`LinearLayout`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-07-02T03:15:06.140

兄弟，您可能必须使用 .xml 文件的“设计”选项卡来定位广告。调整边距等...

# graphics - WebGL 颜色混合计算

> ID：11275031
> 
> 赞同：1
> 
> 时间：2012-06-30T14:51:13.333
> 
> 标签：graphics, colors, webgl, color-scheme

什么是**WebGL**颜色混合计算算法？我需要用 4 向渐变颜色填充绘制四边形，我决定用 3 向渐变三角形（像[这样](http://learningwebgl.com/blog/?p=134)）来绘制它，计算四边形的中心并使用 4 个三角形的这个点来获得渐变平滑度的最佳结果。为了做到这一点，我需要通过**与 WebGL 计算 3-way gradient fill 的颜色混合相同**的方式来计算四边形中心的颜色。这种计算的公式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:32:55.230

WebGL 对顶点属性使用线性插值。用于在四个角处给定样本的正方形内插值的公式只是应用两次的线性插值。在 GLSL 中，

```
mix(mix(color00, color01, y), mix(color10, color11, y), x) 
```

如果您对中心点特别感兴趣，这只是

```
0.25 * (color00 + color01 + color10 + color11) 
```

* * *

但是，如果您的目标是在一个正方形中平滑地插入四种颜色，那么在 WebGL 应用程序中，您实际上不需要自己执行此计算，也不需要使用四个三角形！

1.  用四种颜色创建一个 2×2 纹理。
2.  将其设置`TEXTURE_MAG_FILTER`为`LINEAR`。
3.  使用以通常方式应用的纹理绘制正方形，但纹理坐标范围`0.25`为`0.75`.

这执行您正在寻找的相同插值，但使用内置设施。如果你愿意，你也可以跳过使用纹理，但仍然有“纹理”坐标，并使用`mix`上面的公式将坐标映射到你的四种颜色。

之所以有效，是因为纹理坐标*与*任意颜色不同，它在 3 个点之间进行线性插值会为您提供非退化结果，然后您可以使用它来查找考虑所有 4 个颜色值的颜色。

# java - Android从时间点计算分钟/小时/天

> ID：11275034
> 
> 赞同：5
> 
> 时间：2012-06-30T14:51:26.130
> 
> 标签：java, android, datetime, date, twitter

我正在解析推特，我想显示自推特发布以来的时间。但它似乎计算不正确。我从 Stackoverflow 上的另一篇文章中获得了公式，并尝试从中构建返回语句。

```
public static String getTwitterDate(Date date){
    long milliseconds = date.getTime();
    int minutes = (int) ((milliseconds / (1000*60)) % 60);
    int hours   = (int) ((milliseconds / (1000*60*60)) % 24);

    if (hours > 0){
        if (hours == 1)
            return "1 hour ago";
        else if (hours < 24)
            return String.valueOf(hours) + " hours ago";
        else
        {
            int days = (int)Math.ceil(hours % 24);
            if (days == 1)
                return "1 day ago";
            else
                return String.valueOf(days) + " days ago";
        }
    }
    else
    {
        if (minutes == 0)
            return "less than 1 minute ago";
        else if (minutes == 1)
            return "1 minute ago";
        else
            return String.valueOf(minutes) + " minutes ago";
    }
} 
```

用这个解析 twitter 日期/时间（也来自 Stackoverflow 上的帖子）

```
public static Date parseTwitterDate(String date)
{
    final String TWITTER = "EEE, dd MMM yyyy HH:mm:ss Z";
    SimpleDateFormat sf = new SimpleDateFormat(TWITTER, Locale.ENGLISH);
    sf.setLenient(true);

    try {
        return sf.parse(date);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

推特日期示例："created_at":"Sat, 30 Jun 2012 14:44:40 +0000",

据我所知，推特被正确解析但计算不正确（getTwitterDate）。当相差 4-5 小时时，有时会返回 11 小时。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T14:59:45.663

使用[DateUtils](http://developer.android.com/reference/android/text/format/DateUtils.html)。它已完全本地化，并以人性化的方式完成您想做的事情。

这是获取自动本地化的相对时间跨度表达式的示例：

```
long time = ... // The Twitter post time stamp
long now = System.currentTimeMillis();
CharSequence relativeTimeStr = DateUtils.getRelativeTimeSpanString(time, 
    now, DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE); 
```

它产生诸如“10 秒前”或“5 分钟内”之类的输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T15:02:07.513

`long milliseconds = date.getTime() - new Date().getTime();`

这将根据推文日期和现在之间的差异运行计算。

目前，您的计算基于`date.getTime()`自 1970 年 1 月 1 日午夜以来的毫秒数。因为您还引入了模数，所以您当前的函数为您提供了午夜 UTC 和推文之间经过的时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-15T14:48:22.070

您可以修改输入变量“timeAtMiliseconds”，因为我的示例是日期格式为毫秒。

```
private static SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
private static SimpleDateFormat formatterYear = new SimpleDateFormat("MM/dd/yyyy");

public static String parseDate(@NotNull Long timeAtMiliseconds) {
    timeAtMiliseconds *= 1000L; //Check if this is unnecessary for your use

    if (timeAtMiliseconds == 0) {
        return "";
    }

    //API.log("Day Ago "+dayago);
    String result = "now";
    String dataSot = formatter.format(new Date());
    Calendar calendar = Calendar.getInstance();

    long dayagolong = timeAtMiliseconds;
    calendar.setTimeInMillis(dayagolong);
    String agoformater = formatter.format(calendar.getTime());

    Date CurrentDate = null;
    Date CreateDate = null;

    try {
        CurrentDate = formatter.parse(dataSot);
        CreateDate = formatter.parse(agoformater);

        long different = Math.abs(CurrentDate.getTime() - CreateDate.getTime());

        long secondsInMilli = 1000;
        long minutesInMilli = secondsInMilli * 60;
        long hoursInMilli = minutesInMilli * 60;
        long daysInMilli = hoursInMilli * 24;

        long elapsedDays = different / daysInMilli;
        different = different % daysInMilli;

        long elapsedHours = different / hoursInMilli;
        different = different % hoursInMilli;

        long elapsedMinutes = different / minutesInMilli;
        different = different % minutesInMilli;

        long elapsedSeconds = different / secondsInMilli;

        if (elapsedDays == 0) {
            if (elapsedHours == 0) {
                if (elapsedMinutes == 0) {
                    if (elapsedSeconds < 0) {
                        return "0" + " s";
                    } else {
                        if (elapsedSeconds > 0 && elapsedSeconds < 59) {
                            return "now";
                        }
                    }
                } else {
                    return String.valueOf(elapsedMinutes) + "m ago";
                }
            } else {
                return String.valueOf(elapsedHours) + "h ago";
            }

        } else {
            if (elapsedDays <= 29) {
                return String.valueOf(elapsedDays) + "d ago";
            }
            if (elapsedDays > 29 && elapsedDays <= 58) {
                return "1Mth ago";
            }
            if (elapsedDays > 58 && elapsedDays <= 87) {
                return "2Mth ago";
            }
            if (elapsedDays > 87 && elapsedDays <= 116) {
                return "3Mth ago";
            }
            if (elapsedDays > 116 && elapsedDays <= 145) {
                return "4Mth ago";
            }
            if (elapsedDays > 145 && elapsedDays <= 174) {
                return "5Mth ago";
            }
            if (elapsedDays > 174 && elapsedDays <= 203) {
                return "6Mth ago";
            }
            if (elapsedDays > 203 && elapsedDays <= 232) {
                return "7Mth ago";
            }
            if (elapsedDays > 232 && elapsedDays <= 261) {
                return "8Mth ago";
            }
            if (elapsedDays > 261 && elapsedDays <= 290) {
                return "9Mth ago";
            }
            if (elapsedDays > 290 && elapsedDays <= 319) {
                return "10Mth ago";
            }
            if (elapsedDays > 319 && elapsedDays <= 348) {
                return "11Mth ago";
            }
            if (elapsedDays > 348 && elapsedDays <= 360) {
                return "12Mth ago";
            }

            if (elapsedDays > 360 && elapsedDays <= 720) {
                return "1 year ago";
            }

            if (elapsedDays > 720) {
                Calendar calendarYear = Calendar.getInstance();
                calendarYear.setTimeInMillis(dayagolong);
                return formatterYear.format(calendarYear.getTime()) + "";
            }

        }

    } catch (java.text.ParseException e) {
        e.printStackTrace();
    }
    return result;
}

      //USAGE
    Log.d("TAG Pretty date: ", parseDate(System.currentTimeMillis())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T05:16:41.887

现在一天 twitter 时间响应如下：***Thu Nov 05 03:13:48 +0000 2015***

我将它们转换为***5 秒前/5 分钟前/5 小时前/5 天前***以调用服装功能：

```
public void TwitterTimeDifferentitaion(String responseTime) {

SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy");
                    ParsePosition pos = new ParsePosition(0);
                    long then = formatter.parse(responseTime, pos).getTime();
                    long now = new Date().getTime();

                    long seconds = (now - then) / 1000;
                    long minutes = seconds / 60;
                    long hours = minutes / 60;
                    long days = hours / 24;

                    String friendly = null;
                    long num = 0;
                    if (days > 0) {
                        num = days;
                        friendly = days + " day";
                    }
                    else if (hours > 0) {
                        num = hours;
                        friendly = hours + " hour";
                    }
                    else if (minutes > 0) {
                        num = minutes;
                        friendly = minutes + " minute";
                    }
                    else {
                        num = seconds;
                        friendly = seconds + " second";
                    }
                    if (num > 1) {
                        friendly += "s";
                    }
                    createdAt = friendly + " ago";
                    System.out.println("TotalTime>>" + createdAt);

} 
```

每当响应格式更改比 SimpleDateFormat() 也更改和工作完美..!!!

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-07-26T02:37:32.843

long daysDifference = calender01.getTime() - calender02.getTime();

```
 if (TimeUnit.MILLISECONDS.toHours(daysDifference) <= 24) {
                                if (TimeUnit.MILLISECONDS.toHours(daysDifference) == 0) {
                                    long days = TimeUnit.MILLISECONDS.toMinutes(daysDifference);
                                    dayCounter.setText(days + " minute(s) more");
                                } else {
                                    long days = TimeUnit.MILLISECONDS.toHours(daysDifference);
                                    dayCounter.setText(days + " hours(s) more");
                                }
                            } else {
                                long days = TimeUnit.MILLISECONDS.toDays(daysDifference + 24 * 60 * 60 * 1000);
                                dayCounter.setText(days + " day(s) more");
                            } 
```

# ruby-on-rails - 我怎样才能扭转失误——在 Ruby on Rails 中使用 force_ssl = true 在 localhost 上打开 https

> ID：11275038
> 
> 赞同：0
> 
> 时间：2012-06-30T14:51:44.293
> 
> 标签：ruby-on-rails, ssl, apache2

我似乎无法扭转我在开发机器上创建的问题。幸运的是，那是在一个保存了一些快照的 VM 中，所以我能够返回到较早的快照并以最简单的形式准确地重现问题。而且，通过回到较早的快照并且不重复错误，我已经解决了这个问题，但是我无法直接撤消更改的事实表明存在一些错误，或者我不明白某些事情我想要的关键。

所以这是场景：

1）我的 Rails 应用程序工作正常。我在 apache 上，这是一个完全最新的 Ubuntu 11.04，带有用于数据库的 postgresql。可能相关的三件事（a，b，c）：

a) 它有这个 GEM 文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'bootstrap-sass', '2.0.0'
gem 'pg', '0.12.2'
gem 'bcrypt-ruby', '3.0.1'
gem 'jquery-rails', '2.0.0'

group :development, :test do
  gem 'rspec-rails', '2.10.0'
  gem 'guard-rspec', '0.5.5'
end

gem 'annotate', '~> 2.4.1.beta', group: :development

group :test do
  gem 'rspec-rails', '2.10.0'
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'factory_girl_rails', '1.4.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end 
```

b）它在 /etc/apache2/sites-available/sample_app 中有这个文件（仅供参考，是的，我正在通过[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)上的教程虽然使用 apache和postgresql）

```
<VirtualHost *:80>

 ServerName localhost
 ServerAlias localhost
 RailsEnv development
 DocumentRoot /home/USER/railsProjects/sample_app/public

</VirtualHost> 
```

这个虚拟主机是唯一启用的站点。

c）它在我的rails项目中没有注释这条线

```
 config.force_ssl = true 
```

注意：我没有做任何特别的事情来配置 apache 以使用 SSL。

2) 在 /etc/apache2/sites-available/sample_app 文件中，将行从：

```
RailsEnv development 
```

至：

```
RailsEnv production 
```

保存，然后从命令行重新启动 apache：

```
sudo service apache2 restart 
```

然后在浏览器中访问 localhost。就我而言，它不起作用。很好——解决这个问题不是我的问题。我的问题是，我该如何扭转这种变化。

3) 显而易见的答案是试试这个：回到 /etc/apache2/sites-available/sample_app 文件并从以下位置更改行：

```
RailsEnv production 
```

回到：

```
RailsEnv development 
```

保存然后重新启动apache。

不幸的是，这不起作用。在这一点上，我的系统似乎处于无法修复的状态。每次去

```
http://localhost 
```

我被转发到

```
https://localhost 
```

我已经多次重现了这种行为，我在 /etc/ 或我的 railsproject 中的任何文件之间找不到任何更改，在我从未进行过更改的工作系统和我将环境更改为生产的非工作系统之间然后改回来。

我希望真正了解这些东西的人可以帮助新手解决这个问题。我在哪里可以删除导致 http: 转发到 https 的设置？

# php - 使用 AJAX HTTP POST 上传文件和发送文本框数据

> ID：11275041
> 
> 赞同：0
> 
> 时间：2012-06-30T14:52:19.417
> 
> 标签：php, ajax

我有一个 HTML 表单，我在其中输入文本字段，最后将图像文件上传到服务器。（HTML 文件：<input type="file" name="filename"/>）我使用 Ajax 技术和 HTTP POST 请求来执行此任务。

但我无法上传文件，但可以看到数据库中的文本字段值。我正在尝试使用 getimagesize($_FILES['filename']['tmp_name'] 和 move_uploaded_file() 将图像文件上传到文件夹中移动从临时文件夹到特定文件夹。

FirePHP 将警告消息显示为：**getimagesize() [function.getimagesize]: Filename cannot be empty in my .php file on line 19**

第 19 行包含 getimagesize() 语句。

有人可以让我知道是否可以使用 ajax 技术上传文件？或任何其他更好的方法来做到这一点？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:04:11.440

我将为您提供处理基于 AJAX 的文件上传的三种基本方法。

1) 伪造基于 AJAX 的文件上传 - 您将在页面上创建一个 iframe（您可以使用 CSS 隐藏它），您可以将表单定位为 POST 到该 iframe。

```
<form target='upload_target' id="file_upload_form" method="post" enctype="multipart/form-data" action="upload.php">
    <input name="file" id="file" size="27" type="file" /><br />
    <input type="submit" name="action" value="Upload" /><br />
    <iframe id="upload_target" name="upload_target" src="" style="width:0;height:0;border:0px solid #fff;display: none;"></iframe>
</form> 
```

2.) FILE API：如果您的浏览器支持它，您可以使用复杂的 FILE API 来执行我称之为纯 AJAX 文件上传的操作 - [https://developer.mozilla.org/en/using_files_from_web_applications](https://developer.mozilla.org/en/using_files_from_web_applications)

3）您可以使用现有的 JQuery 插件，例如[Ajax File Upload](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)和[Multiple File Upload](http://www.fyneworks.com/jquery/multiple-file-upload/)。请在 JQuery 站点上查找更多此类信息，评估跨浏览器的兼容性和使用情况。

# javascript - “document.write”的字体属性不起作用

> ID：11275045
> 
> 赞同：0
> 
> 时间：2012-06-30T14:52:51.830
> 
> 标签：javascript, html

我的 HTML 文档包括

```
<font face="helvetica"> (and of course </font> later) 
```

这很好用，一切都在 Helvetica 中。
但是，有一个 JavaScript 部分，

```
if (d > 5) {
    document.write('Message');
} 
```

并且由此产生的文本不是所需的字体。
我尝试了将样式应用到它的方法，但它根本不显示 JS 部分，我怎样才能让它以与 HTML 相同的字体显示？
是否有可以使整个文档使用相同字体的 HTML 标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:00:07.447

首先，停止使用`<font>`. 现在已经不是 90 年代了。

动态内容不在您想要的字体中的（最可能的）原因是`document.write()`将内容放在标签之外。查看生成的 HTML 以确认这一点。[此示例](http://jsfiddle.net/xPNUa/)显示，当 JavaScript 放置在标签内时，内容的样式是正确的。

但是，正如 Kolink 的回答所示，`<body>`如果您想更改文档的默认字体，您应该使用 CSS 来设置文档的样式。

* * *

查看[评论中的示例](http://jsfiddle.net/valkalinic/sE8DS/5)，您似乎正在使用 jQuery - 现在应该避免使用它`document.write()`（无论如何都应该避免）。

替换为`document.write()`：

```
$( 'body' ).append( 'Message' ); 
```

或者，如果您想设置消息样式：

```
$( 'body' ).append( '<div class="message">Message</div>' ); 
```

并为消息类添加 CSS 规则（例如`.message { font-weight:bold; }`）。

请参阅[http://jsfiddle.net/sE8DS/6/](http://jsfiddle.net/sE8DS/6/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:55:31.583

CSS：

```
body {font-family: "helvetica", sans-serif;} 
```

完毕。不需要古老的`<font>`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:05:39.663

使用 CSS，`font`标签在很久以前就被弃用了：

```
html {
    font-family: 'Helvetica';
} 
```

而且也`document.write()`被认为是不好的做法。

改用这个：

HTML：

```
<html>
    <body>
        <div id="helvetica"></div>
    </body>
</html> 
```

CSS：

```
#helvetica {
    font-family: 'Helvetica'
} 
```

Javascript：

```
var helvetica = document.getElementById("helvetica");

helvetica.innerHTML = "Message"; 
```

# c# - 用什么数据结构来实现arraylist

> ID：11275049
> 
> 赞同：4
> 
> 时间：2012-06-30T14:53:10.727
> 
> 标签：c#, data-structures, arraylist

构建arraylist时使用什么数据结构，因为我们可以在其上动态添加/删除值。

我假设它使用链表但在做了一些谷歌之后，我发现它使用向量..但没有更多关于它的细节。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T15:45:59.210

在现代处理器上，内存缓存为王。有效地使用缓存会产生巨大的影响，当程序访问其内容未缓存的地址时，处理器很容易停滞数百个周期，等待非常慢的内存总线提供数据。

当您按顺序访问内存时，访问内存是最有效的。一个字节在缓存中可用的几率最大，它很可能出现在同一个缓存行中。假设您按顺序索引数组元素，这使得数组成为迄今为止最有效的集合对象。

因此，除 LinkedList 之外的所有 .NET 集合类都使用数组来存储数据。包括散列集合（Hashtable、Dictionary、Hashset），它们使用数组数组。包括数组列表。应该避免使用 LinkedList，因为它的缓存局部性非常差，除非在随机已知位置进行廉价插入和删除是主要关注点。

数组的一个问题是它们的大小是固定的，这使得很难实现自动调整大小的集合，比如 ArrayList。这是通过故意浪费地址空间来解决的。每当数组填满容量时，就会*重新分配*数组并复制元素。重新分配是之前大小的两倍，您可以从容量属性中观察到这一点。虽然这*听起来很*昂贵，但该算法的摊销成本为 O(1)，并且操作系统中的虚拟内存子系统确保您实际上不会为不使用的内存付费。

您可以通过预先猜测容量来避免不那么便宜的复制。[有关此答案](https://stackoverflow.com/questions/2247773/is-it-worthwhile-to-initialize-the-collection-size-of-a-listt-if-its-size-rea/2248188#2248188)的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:57:54.603

Arraylist 在内部使用数组来存储数据并在需要时调整数组的大小。

Arraylist 的 java 实现在内部创建一个具有初始大小的数组并调整该数组的大小。

你可以在这里看到实现：http: [//www.docjar.com/html/api/java/util/ArrayList.java.html](http://www.docjar.com/html/api/java/util/ArrayList.java.html)

这适用于 Java，但概念与 .NET 相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:04:09.760

从[MSDN 页面](http://msdn.microsoft.com/en-us/library/7x4b0a97)：

> 使用大小根据需要动态增加的数组实现 IList 接口。

*直接使用类而不是数组的*一些好处是：**

 **   它可以在任何地方使用`IList`
*   在从数组中间添加/删除项目时，它会为您处理调整大小和复制
*   它跟踪数组中的“最后一个”项目
*   它提供了对数组中的项目进行二进制搜索的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T15:10:07.373

将`ArrayList`值在内部存储为对象数组，并公开一些公共辅助方法以使使用数组更容易（通过`IList`接口公开）。

插入项目时，插入点右侧的所有元素都会向右移动，从而使插入效率低下。另一方面，追加速度很快，因为不需要移动元素（除非内部数组已达到容量，在这种情况下，它会被更大的数组替换）。

因为值在内部存储为数组，所以它提供了数组的优点（例如，如果对值进行了排序，则可以进行高效搜索）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T15:11:14.157

请参见此处：[ArrayList 源](http://typedescriptor.net/browse/types/10065-System.Collections.ArrayList)

如前所述，它是下面的数组。

```
private object[] _items; 
```

这是 Add() 方法：

```
public virtual int Add(object value)
{
    if (this._size == this._items.Length)
    {
        this.EnsureCapacity(this._size + 1);
    }
    this._items[this._size] = value;
    ArrayList expr_2D = this;
    ArrayList arg_2E_0 = expr_2D;
    expr_2D._version = arg_2E_0._version + 1;
    ArrayList expr_3B = this;
    ArrayList arg_3C_0 = expr_3B;
    ArrayList arg_45_0 = expr_3B;
    int expr_41 = arg_3C_0._size;
    int arg_42_0 = expr_41;
    int arg_44_0 = expr_41;
    int i = arg_42_0;
    arg_45_0._size = arg_44_0 + 1;
    return i;
} 
```

如您所见， EnsureCapacity 被调用...最终调用 set_Capacity：

```
public virtual void set_Capacity(int value)
{
    if (value < this._size)
    {
        throw new ArgumentOutOfRangeException("value", Environment.GetResourceString("ArgumentOutOfRange_SmallCapacity"));
    }
    if (value != this._items.Length)
    {
        if (value <= 0)
        {
            this._items = new object[4];
            goto IL_65;
        }
        object[] array = new object[value];
        if (this._size > 0)
        {
            Array.Copy(this._items, 0, array, 0, this._size);
        }
        this._items = array;
        return;
    }
    IL_65:
} 
```

如果需要增加容量，则将整个数组复制到更大的数组中。*

# php - PHP Solr 从不返回找到的文档

> ID：11275052
> 
> 赞同：0
> 
> 时间：2012-06-30T14:53:21.383
> 
> 标签：php, solr, tomcat6

我正在尝试通过 php 查找我的 solr 实例中的文档。当我去我的 solr 管理员并进行搜索时，我得到以下信息：

```
 <response>
    <lst name="responseHeader">
    <int name="status">0</int>
<int name="QTime">443</int><lst name="params">
<str name="indent">on</str><str name="start">0</str>
<str name="q">*:*</str><str name="rows">10</str>
<str name="version">2.2</str></lst></lst>
<result name="response" numFound="4" start="0">
<doc>
<str name="description">An Aweomse dish</str>
<arr name="ingredients"><str>Radish</str><str>Beans</str><str>Curry</str></arr>
<str name="name">Alfredo Chehse</str>
<str name="recipe_id">10</str><str name="thumbnail">123343f342</str>
</doc>
<doc>
<str name="description">An Aweomse dish</str>
<arr name="ingredients"><str>Radish</str><str>Beans</str>
<str>Curry</str></arr><str name="name">Alfredo Chehse</str>
<str name="recipe_id">11</str><str name="thumbnail">123343f342</str>
</doc>
</result>
</response> 
```

所以我知道数据在那里。现在在我的 PHP 中我有这个：

```
$query = new SolrQuery();

        $query->setQuery('Radish');

        $query->setStart(0);

        $query->setRows(50);

        $query->addField('ingredients') -> addField('name');

        $query_response = $client->query($query);

        $query_response->setParseMode(SolrQueryResponse::PARSE_SOLR_DOC);

        $response = $query_response->getResponse();

        print_r($response); 
```

但我总是得到一个空的结果集：

SolrObject 对象 (

```
 [responseHeader] => SolrObject Object
        (
            [status] => 0
            [QTime] => 1
            [params] => SolrObject Object
                (
                    [fl] => ingredients,name
                    [indent] => on
                    [start] => 0
                    [q] => radish
                    [wt] => xml
                    [rows] => 50
                    [version] => 2.2
                )

        )

    [response] => SolrObject Object
        (
            [numFound] => 0
            [start] => 0
            [docs] => 
        ) 
```

我的问题是，无论我搜索什么，为什么我的结果总是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:08:09.530

**成分**是索引字段吗？

每个文档都有不区分大小写的全文索引字段吗？

试试这个

```
$query->setQuery('ingredients:*Radish*'); 
```

# java - 如何从java代码运行linux命令？

> ID：11275055
> 
> 赞同：1
> 
> 时间：2012-06-30T14:53:37.380
> 
> 标签：java, linux

> **可能重复：**
> [来自 Java 的 Linux 命令](https://stackoverflow.com/questions/126116/linux-commands-from-java)

我正在开发一个 Java 应用程序，我需要从我的应用程序运行一个 linux 命令。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:55:20.370

你可以使用这个：

```
/* build up command and launch */
String command = "DO SOMETHING";

try {
    Runtime.getRuntime().exec(command);
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T23:25:58.163

这样的例子：

```
String [] arrs = new String [3] ;
arrs[0] = "/bin/bash";
arrs[1] = "-c";
arrs[2] = "rm s*"  ;
pp=Runtime.getRuntime().exec(arrs);
pp.waitFor(); 
```

这将从存储 java 代码的目录中删除以 s 开头的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:55:23.623

您可以使用 Runtime.exec() 方法。

# java - Java Applet：编辑和上传更改的文档

> ID：11275069
> 
> 赞同：1
> 
> 时间：2012-06-30T14:55:24.243
> 
> 标签：java, upload, applet, document

在与工作相关的项目中，我们希望用户能够编写文档（比如 Word），然后将其上传到我们的中央 Web 服务器。当他们想要进行更改时，他们会访问网站并下载文档。注册更改后，文档会自动上传。

我已经编写了一些可以为我工作的 Java 类（FTP 上传/下载、文件监控等），但我想要一些关于如何解决它的实际部分的意见。

网页是否应该包含一个包含“下载”按钮的 Java Applet？单击时，将下载文档并打开相关的编辑器。

如果是这样，我应该如何进行？如果用户关闭他的浏览器，小程序是否也会被终止？

我以前从未从事过这样的项目，而且由于 Stackoverflow 充满了令人难以置信的聪明人，也许你们中的一些人可以提出一些想法？

PS：我是在 Stack 上发帖的新手，所以如果我应该更具体/添加更多信息等，请告诉我：)

此致！

**编辑：** 该应用程序只会在我们的办公室内部使用。对不起，如果我造成混乱。:)

# vb.net - 将对象添加到列表框并根据列表框使用不同的字符串表示形式？

> ID：11275072
> 
> 赞同：0
> 
> 时间：2012-06-30T14:55:39.980
> 
> 标签：vb.net, object, listbox, tostring

我有几个具有相同对象类型的列表框，我遇到的问题是我不希望在所有列表框中使用相同的 ToString() 方法显示对象。有没有办法解决这个问题？

目前我将字符串添加到列表框，然后我使用选定的字符串在对象列表中搜索正确的对象，但我根本不喜欢那个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:17:16.483

假设有一个这样的员工类：

```
Public Class Employee
    Public Property ID As Integer
    Public Property FirstText As String
    Public Property SecondText As String
    ' and go on with other properties
    ....
End Class 
```

现在，当您填充列表框时，您将列表框的 DisplayMember 和 ValueMember 设置为 Employee 的两个不同属性

```
Dim myList As ArrayList = New ArrayList()
myList.Add(New Employee() With {.ID = 1, .FirstText = "John Doe", .SecondText = "Doe John"})
myList.Add(New Employee() With {.ID = 2, .FirstText = "Mark Ross", .SecondText = "Ross Mark"})

ListBox1.DataSource = myList
ListBox2.DataSource = myList

ListBox1.ValueMember = "ID"
ListBox1.DisplayMember = "FirstText"

ListBox2.ValueMember = "ID"
ListBox2.DisplayMember = "SecondText" 
```

# c# - 如何更改 DataGridView 中空行的颜色？

> ID：11275075
> 
> 赞同：0
> 
> 时间：2012-06-30T14:56:03.410
> 
> 标签：c#, winforms, datagridview

我正在尝试更改 DataGridView 中空行的颜色

```
foreach (DataGridViewRow r in dgv1.Rows)  
if (r.Value.ToString() == "")
//if (r.Cells.Value.ToString() == "") - also trying
r.DefaultCellStyle.BackColor = Color.WhiteSmoke; 
```

但是 Row 没有 Value 的定义，并且 Cells 需要由 Column 指定。
请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:04:22.853

好吧，您需要检查所有`Cells`. 以下是使用 LINQ 的方法：

```
foreach(DataGridViewRow r in dgv1.Rows) {
    if(r.Cells.All(c => c.Value.ToString() == string.Empty)) {
        r.DefaultCellStyle.BackColor = Color.WhiteSmoke;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:05:30.627

```
foreach (DataGridViewRow r in dgv1.Rows)  
if (r.Cells["YourImportantFieldNameLikeID"].Value == null)
r.DefaultCellStyle.BackColor = Color.WhiteSmoke; 
```

如果您不想看到最后一个空行，可以使用以下命令禁用它：

```
DataGridViewName.AllowUserToAddRows = False; 
```

# android-fragments - Android IllegalStateException：片段未附加到 Activity

> ID：11275078
> 
> 赞同：2
> 
> 时间：2012-06-30T14:56:24.393
> 
> 标签：android-fragments, android-cursorloader, android-loader

我遇到了这个问题，并在这里和其他地方都提出了许多与这个问题相关的帖子。

此应用程序针对 android 16，但 min 设置为 8。所以我使用 Android Support Library 来访问更新的 api。

我有一个加载一个片段的活动，它是一个 ListFragment。如果您在平板电脑上以横向模式运行，当单击列表项时，第一个片段将在 2 窗格布局中加载第二个片段。如果在手机上，新的活动会加载第二个片段。

第二个片段使用 CursorLoader 访问 ContentProvider 作为其后备数据存储。当从它自己的活动中调用这个片段时，没有问题。但是，当它在 2 窗格布局中时，CursorLoader 将失败并出现上述异常。

这是代码：

```
public class ProgramGroupFragment extends MythtvListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

    private static final String TAG = ProgramGroupFragment.class.getSimpleName();

    private ProgramCursorAdapter adapter;

    private String programGroup = "*";

    public ProgramGroupFragment() { }

    @Override
    public Loader<Cursor> onCreateLoader( int id, Bundle args ) {

        String[] projection = { BaseColumns._ID, ProgramConstants.FIELD_TITLE, ProgramConstants.FIELD_SUB_TITLE };
        String[] selectionArgs = { programGroup };

        CursorLoader cursorLoader = new CursorLoader( getActivity(), ProgramConstants.CONTENT_URI, projection, ProgramConstants.FIELD_TITLE + "=?", selectionArgs, ProgramConstants.FIELD_SUB_TITLE );

        return cursorLoader;
    }

    @Override
    public void onLoadFinished( Loader<Cursor> loader, Cursor cursor ) {
        Log.v( TAG, "onLoadFinished : enter" );

        adapter.swapCursor( cursor );

    }

    @Override
    public void onLoaderReset( Loader<Cursor> loader ) {            
        adapter.swapCursor( null );                 
    }

    @Override
    public void onActivityCreated( Bundle savedInstanceState ) {
        super.onActivityCreated( savedInstanceState );

        adapter = new ProgramCursorAdapter(
                getActivity().getApplicationContext(), R.layout.program_row,
                null, new String[] { ProgramConstants.FIELD_SUB_TITLE }, new int[] { R.id.program_sub_title },
                CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER );

        setListAdapter( adapter );

        getLoaderManager().initLoader( 0, null, this );
    }

    public void loadPrograms( String name ) {       
        programGroup = name;
        try {
            getLoaderManager().restartLoader( 0, null, this );
        } catch( Exception e ) {
            Log.w( TAG, e.getLocalizedMessage(), e );
        }
    }

    @Override
    public void onListItemClick( ListView l, View v, int position, long id ) {    
        super.onListItemClick( l, v, position, id );

        Intent i = new Intent( getActivity(), VideoActivity.class );
        i.putExtra( VideoActivity.EXTRA_PROGRAM_KEY, id );
        startActivity( i );
    }

    private class ProgramCursorAdapter extends SimpleCursorAdapter {

        public ProgramCursorAdapter( Context context, int layout, Cursor c, String[] from, int[] to, int flags ) {
            super( context, layout, c, from, to, flags );
        }

        @Override
        public View getView( int position, View convertView, ViewGroup parent ) {

            View row =  super.getView( position, convertView, parent );

            getCursor().moveToPosition( position );
            try {
                int idIndex = getCursor().getColumnIndexOrThrow( BaseColumns._ID );
                int titleIndex = getCursor().getColumnIndexOrThrow( ProgramConstants.FIELD_TITLE );
                int subTitleIndex = getCursor().getColumnIndexOrThrow( ProgramConstants.FIELD_SUB_TITLE );

                int id = getCursor().getInt( idIndex );
                String title = getCursor().getString( titleIndex );
                String subTitle = getCursor().getString( subTitleIndex );

                if( row == null ) {
                    LayoutInflater inflater = getActivity().getLayoutInflater();

                    row = inflater.inflate( R.layout.program_row, parent, false );
                }

                TextView t = (TextView) row.findViewById( R.id.program_sub_title );
                t.setText( !"".equals( subTitle ) ? subTitle : title );

            } catch( Exception e ) {
                Log.e( TAG, "getView : error", e );
            }

            return row;
        }

    }

} 
```

问题出现在方法 loadPrograms 中，特别是以下行：

```
getLoaderManager().restartLoader( 0, null, this ); 
```

这是抛出 IllegalStateException。在查看了文档和大量示例之后，我从来没有看到过这个问题并且必须被抓住才能继续。

我将代码包装在一个 try/catch 块中，只是为了看看会发生什么，令我惊讶的是，该应用程序按预期运行。

编辑：这是建立 2 窗格布局的活动代码：

```
public class RecordingsActivity extends AbstractRecordingsActivity implements RecordingsFragment.OnProgramGroupListener {

    private static final String TAG = RecordingsActivity.class.getSimpleName();
    private static final int REFRESH_ID = Menu.FIRST + 2;

    private long requestId;
    private BroadcastReceiver requestReceiver;

    private DvrServiceHelper mDvrServiceHelper;

    @Override
    public void onCreate( Bundle savedInstanceState ) {

        super.onCreate( savedInstanceState );
        setContentView( R.layout.activity_dvr_recordings );

        RecordingsFragment recordingsFragment = (RecordingsFragment) getSupportFragmentManager().findFragmentById( R.id.fragment_dvr_program_groups );
        recordingsFragment.setOnProgramGroupListener( this );

    }

    @TargetApi( 11 )
    @Override
    public boolean onCreateOptionsMenu( Menu menu ) {
        Log.v( TAG, "onCreateOptionsMenu : enter" );

        MenuItem refresh = menu.add( Menu.NONE, REFRESH_ID, Menu.NONE, "Refresh" );
        if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
            refresh.setShowAsAction( MenuItem.SHOW_AS_ACTION_IF_ROOM );
        }

        return true;
    }

    /* (non-Javadoc)
     * @see org.mythtv.client.ui.dvr.AbstractRecordingsActivity#onOptionsItemSelected(android.view.MenuItem)
     */
    @Override
    public boolean onOptionsItemSelected( MenuItem item ) {

        switch( item.getItemId() ) {
        case REFRESH_ID:

            requestId = mDvrServiceHelper.getRecordingedList();

            return true;
        }

        return super.onOptionsItemSelected( item );
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter filter = new IntentFilter( DvrServiceHelper.ACTION_REQUEST_RESULT );
        requestReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive( Context context, Intent intent ) {

                long resultRequestId = intent.getLongExtra( DvrServiceHelper.EXTRA_REQUEST_ID, 0 );

                if( resultRequestId == requestId ) {

                    int resultCode = intent.getIntExtra( DvrServiceHelper.EXTRA_RESULT_CODE, 0 );

                    if( resultCode == 200 ) {
                        Log.d( TAG, "Updating UI with new data" );
                    } else {
                        Log.d( TAG, "error occurred" );
                    }
                } else {
                    Log.d( TAG, "Result is NOT for our request ID" );
                }

            }
        };

        mDvrServiceHelper = DvrServiceHelper.getInstance( this );
        registerReceiver( requestReceiver, filter );
    }

    /* (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onPause()
     */
    @Override
    public void onPause() {
        super.onPause();

        // Unregister for broadcast
        if( null != requestReceiver ) {
            try {
                unregisterReceiver( requestReceiver );
                requestReceiver = null;
            } catch( IllegalArgumentException e ) {
                Log.e( TAG, e.getLocalizedMessage(), e );
            }
        }

    }

    public void onProgramGroupSelected( String programGroup ) {
        Log.d( TAG, "onProgramGroupSelected : enter" );

        if( null != findViewById( R.id.fragment_dvr_program_group ) ) {
            FragmentManager manager = getSupportFragmentManager();

            ProgramGroupFragment programGroupFragment = (ProgramGroupFragment) manager.findFragmentById( R.id.fragment_dvr_program_group );
            FragmentTransaction transaction = manager.beginTransaction();

            if( null == programGroupFragment ) {
                Log.v( TAG, "onProgramGroupSelected : creating new programGroupFragment" );
                programGroupFragment = new ProgramGroupFragment();

                transaction
                    .add( R.id.fragment_dvr_program_group, programGroupFragment )
                    .setTransition( FragmentTransaction.TRANSIT_FRAGMENT_OPEN )
                    .addToBackStack( null )
                    .commit();
            }

            programGroupFragment.loadPrograms( programGroup );
        } else {

            Intent i = new Intent( this, ProgramGroupActivity.class );
            i.putExtra( ProgramGroupActivity.EXTRA_PROGRAM_GROUP_KEY, programGroup );
            startActivity( i );
        }

    }

} 
```

侦听器方法 onProgramGroupSelected 是确定单窗格与 2 窗格布局的地方。当单击左侧疼痛中的列表项时，将调用侦听器。

谁能解释为什么会发生这种异常？

该项目的完整代码位于[https://github.com/MythTV-Android/mythtv-for-android](https://github.com/MythTV-Android/mythtv-for-android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:18:27.480

我经历过类似的事情。`ApplicationContext`对我来说，在使用上下文时避免使用似乎有助于避免使用。尝试在`ProgramCursorAdapter`不使用`getApplicationContext()`.

# .htaccess - Htaccess 和 GET 不工作

> ID：11275079
> 
> 赞同：1
> 
> 时间：2012-06-30T14:56:27.513
> 
> 标签：.htaccess, get

好吧，我承认……我对 htaccess 大发雷霆！因此，我现在处理它。

我想要这样的页面：

```
index.php -> localhost
index.php?group=1 -> localhost/1(/)
index.php?group=1&page=1 -> localhost/1/1(/) 
```

到目前为止，没问题.. 但是，在此之后我将能够添加您自己的 GET 标签。例如。我希望网址是：

```
localhost/audi/guestbook?do=delete&id=54 
```

在这里我无法获得 $_GET['do'] 或 $_GET['id']。

我的 Htaccess：

```
RewriteEngine on
RewriteBase /
RewriteRule ^([^/\.]+)/?$ index.php?group=$1 
RewriteRule ^([^/\.]+)/?/([[a-zA-Z0-9_-]+)$ index.php?group=$1&page=$2 
```

感谢明智的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:01:27.570

将 [QSA] 标志添加到两个重写规则（以及 [L] 标志：

```
RewriteEngine on
RewriteBase /
RewriteRule ^([^/\.]+)/?$ index.php?group=$1     [L,QSA]
RewriteRule ^([^/\.]+)/?/([[a-zA-Z0-9_-]+)$ index.php?group=$1&page=$2 [L,QSA] 
```

# android - 如何在android中的imageview上放置两个导航按钮

> ID：11275082
> 
> 赞同：1
> 
> 时间：2012-06-30T14:56:37.513
> 
> 标签：android, android-layout

我需要知道如何在 ImageView 上放置两个重叠的导航按钮。为了清楚起见，我想在 ImageView 中使用上一个和下一个导航按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:02:27.353

为什么使用`ImageView`你可以使用 a`Layout`并设置它的背景。然后根据需要放置按钮。

如果你坚持使用和`ImageView`

```
<RelativeLayout
  android:layout_height="..."
  android:layout_width="...">

  <ImageView
        android:layout_height="match_parent"
        android:layout_width="match_parent"/>
  <!-- put the buttons in here as you like -->

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:04:55.953

包装`ImageView`成`RelativeLayout`并使用`android:layout_alignTop="@+id/imageView"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:06:43.737

使用此布局在左上角将您`image`的两个包裹起来。`buttons`

```
 <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ImageView 
            android:src="@drawable/ic_launcher"
            android:layout_alignTop="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignBottom="true"/>
        <Button
            android:id="@+id/buttonLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"/>
        <Button
            android:id="@+id/buttonRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@id/bbuttonLeft"/>

    </RelativeLayout> 
```

# jquery - jQuery 表格选定的行

> ID：11275092
> 
> 赞同：0
> 
> 时间：2012-06-30T14:57:34.787
> 
> 标签：jquery

我正在开发一个发票程序，我正在尝试使用 jquery 选择一行，但我无法完全弄清楚如何选择一行并在下面提取其内容是我的代码！请指教

注意：我刚刚添加了两行，但会有超过 100 行，所以我认为不可能为每个 td 分配 id 并使用该 id 调用它

```
 <table class="ProductSearch">
      <tr>
        <td>ID</td>
        <td>DESCRIPTION</td>
        <td>Qty</td>
        <td>PRICE</td>
        <td></td>
      </tr>
        <tr>
        <td>P1</td>
        <td>P1 Desc</td>
        <td>P1 Qty</td>
        <td>P1 Price</td>
        <td><img src="select.jpg" alt="select" class="select" /></td>
      </tr>
        <tr>
        <td>P2</td>
        <td>P2 Desc</td>
        <td>P2 Qty</td>
        <td>P2 Price</td>
        <td><img src="select.jpg" alt="select" class="select" /></td>
      </tr>
    </table>

$(".select").live('click', function(event) {
    var rselect;
    rselect = $(this).parent().parent().index();
$('.ProductSearch tr').each(function()
    {
      console.log($(this).html());
    });   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:01:58.377

你可以试试`closest()`方法：

```
$(".select").on('click', function(event) { // use `on()` as `live()` is deprecated
    var rselect;
    rselect = $(this).closest('td');
    console.log(rselect.html());
}); 
```

[http://jsfiddle.net/NftQj/](http://jsfiddle.net/NftQj/)

* * *

**更新：**

如果你想迭代你可以尝试如下的`td`元素：`tr`

```
$(".select").on('click', function(event) { // use `on()` as `live()` is deprecated
    var rselect;
    rselect = $(this).closest('tr');
    rselect.find('td').each(function(){
       console.log($(this).html());
    })
}); 
```

[http://jsfiddle.net/NftQj/2/](http://jsfiddle.net/NftQj/2/)

# java - Struts2 验证框架不验证字段

> ID：11275093
> 
> 赞同：0
> 
> 时间：2012-06-30T14:57:42.887
> 
> 标签：java, jakarta-ee, struts2

我是 Struts2 的新手。我想将验证框架用于简单的“注册”表单。这是我的 JSP 页面表单元素；

```
 <s:form action="register">
            <s:textfield name="name" label="Name" />
            <s:textfield name="age" label="Age" />
            <s:textfield name="email" label="email"/>
            <s:submit value="Register" />
        </s:form>  
 validation error ? = <s:actionerror /><br/>
        ---Action Message--- <s:actionmessage/> 
```

这是struts2.xml文件；

```
 <!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
       <package name="default" extends="struts-default">        
        <action name="register"
                class="com.action.RegisterAction">
                <result name="success">home.jsp</result>    
                <result name="input">index.jsp</result>
                </action>     
       </package>
</struts> 
```

*RegisterAction*类有

*   字符串名称；
*   年龄;
*   字符串电子邮件；带有 getter 和 setter 的变量。它的 execute() 只返回*SUCCESS*

对于这些字段验证，使用以下验证 xml 文件，目前只检查一个字段*名称*。验证文件的名称是`RegisterAction-validation.xml`

```
 <!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<!-- Author: Aash -->     
<validators>     
    <field name="name">
        <field-validator type="requiredstring">
            <param name="trim">true</param>
            <message>name is required.. :) </message>
        </field-validator>
    </field>    
</validators> 
```

这是项目结构 ![在此处输入图像描述](../Images/741e891d55e79bed8d4a3d2d701da9cb.png)

请任何人让我知道我怎么能想出这个。提前致谢。

**新添加**：根据struts.xml，如果有错误，（验证说有问题），页面应该重定向到*index.jsp*，但是当字段'name'没有给出任何内容时，它仍然可以到 home.jsp 。

**A Solution Found**
我添加到validation.xml
`!DOCTYPE validators PUBLIC "-//OpenSymphony Group//XWork Validator 1.0.2//EN" "http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">`
但是它显示在Form 的顶部，我不知道为什么不打印为`actionError`. 如何将其打印在我希望查看的位置（例如：表格底部）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:38:48.617

由于它是一个字段错误，因为您在 JSP 页面中放置了元素，所以消息接近字段 'name' 。如果你想打印它，你想要它在哪里， `<s:fielderror fieldName="name" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:21:56.890

我认为问题是xml文件名。它应该是`RegisterAction-validation.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:23:08.530

正如[上面](http://struts.apache.org/2.0.12/docs/basic-validation.html)所说，DOCTYPE 应该在validation.xml 中。
`<!DOCTYPE validators PUBLIC "-//OpenSymphony Group//XWork Validator 1.0.2//EN" "http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd"> -->`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T05:44:49.740

将参数验证值设为 'true; 在里面`<s:form action="register" validate="true">`

# web-services - 无法为文件上传 web 服务生成 java 客户端

> ID：11275096
> 
> 赞同：0
> 
> 时间：2012-06-30T14:58:12.013
> 
> 标签：web-services, file-upload, cxf, jax-rs

我有一个简单的文件上传网络服务作为我项目的一小部分。

这是我到目前为止在服务器端所做的：

```
 @POST
@Path("/file")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(List<Attachment> attachments,@Context HttpServletRequest request) {
    System.out.println("Got an attachment!");
    for(Attachment attr : attachments) {
        DataHandler handler = attr.getDataHandler();
        try {
            InputStream stream = handler.getInputStream();
            MultivaluedMap map = attr.getHeaders();
            OutputStream out = new FileOutputStream(new File("/home/yashdosi/s/" + getFileName(map)));    //getFileName is a seperate private function..

            int read = 0;
            byte[] bytes = new byte[1024];
            while ((read = stream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            stream.close();
            out.flush();
            out.close();
        } catch(Exception e) {
          e.printStackTrace();
        }
    }

    return Response.ok("file uploaded").build();
} 
```

当请求来自 html 表单时，它工作得非常好......当我尝试从 java 客户端发送请求时，它根本不起作用......！！

关于为此代码创建java客户端的任何想法..

这是我尝试使用的代码...可能此代码中有一个简单的错误，但是..我没有看到...正如我所说，此代码简单不起作用...没有错误或其他任何东西...。当我尝试在服务器控制台上打印某些内容以查看是否调用了服务时...它没有打印任何内容..所以我认为由于某种原因我无法联系该服务...

```
 public static void uploadPhoto() 
{
    String url = "http://localhost:8080/fileupload-ws/services/postdata";
    String output = null;
    PostMethod mPost = new PostMethod(url);
    HttpClient client = new HttpClient();

    try 
    {
        File imageFile = new File("/home/yashdosi/1.jpg");
        BufferedImage image = ImageIO.read(imageFile);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(image, "jpg", baos);
        byte[] encodedImage = Base64.encodeBase64(baos.toByteArray());

        String data = " " + " " + "" + "image/jpeg" + " " + "" + new String(encodedImage) + " " + "";

        mPost.setRequestBody(data);
        mPost.setRequestHeader("Content-Type", "text/xml");
        client.executeMethod( mPost );
        output = mPost.getResponseBodyAsString( );
        mPost.releaseConnection( );
    } catch (HttpException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println(output);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:06:43.643

终于有客户工作了！！

```
 HttpClient httpclient = new DefaultHttpClient();
    try {
        HttpPost httppost = new HttpPost("http://localhost:8080/fileupload-ws/services/postdata");

        FileBody img = new FileBody(new File("/home/yashdosi/1.jpg"));
        FileBody html = new FileBody(new File("/home/yashdosi/hotmail.html"));

        MultipartEntity reqEntity = new MultipartEntity();
        reqEntity.addPart("image", img);
        reqEntity.addPart("html", html);

        httppost.setEntity(reqEntity);
        httppost.setHeader("Content-Type", "multipart/form-data");

        System.out.println("executing request " + httppost.getRequestLine());
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (resEntity != null) {
            System.out.println("Response content length: " + resEntity.getContentLength());
        }
        EntityUtils.consume(resEntity);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    finally {
        try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
    } 
```

# java - 同步访问内部对象的方法？

> ID：11275097
> 
> 赞同：2
> 
> 时间：2012-06-30T14:58:17.130
> 
> 标签：java

假设我有以下内容：

```
public class Foo {
    private ReadingList mReadingList = new ReadingList();

    public ReadingList getReadingList() {
        synchronized (mReadingList) {
            return mReadingList;
        }
    }
} 
```

如果我尝试在两个线程中修改 ReadingList 对象，上面的同步对我没有帮助，对吧？：

```
// Thread 1
foo1.getReadingList().setName("aaa");

// Thread 2
foo2.getReadingList().setName("bbb"); 
```

我是否必须像这样包装我想要同步的每个方法：

```
public class Foo {
    private ReadingList mReadingList = new ReadingList();

    public synchronized void setReadingListName(String name) {
        mReadingList.setName(name);
    }

    public synchronized void setReadingListAuthor(String author) {
        mReadingList.setAuthor(author);
    }

    ... 
```

对于我想要公开和同步的每个 ReadingList 方法，等等？我最终只会为 ReadingList 的每个方法编写包装器方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:01:22.657

### 1\. 您可以访问 ReadingList 源

如果您有权访问 ReadingList 对象，`synchronized`如果您希望同步访问所有字段，则添加到 ReadingList 的所有方法，或者如果您只希望交叉访问某些字段，则添加到 ReadingList 的所有方法。

### 2\. 您无权访问 ReadingList

您必须编写如下内容：

```
public class Foo {
    private ReadingList mReadingList = new ReadingList();

    public void setReadingListName(String name) {
        synchronized(mReadingList) {
           mReadingList.setName(name);
        }
    }

    public void setReadingListAuthor(String author) {
        synchronized(mReadingList) {
           mReadingList.setAuthor(author);
        }
    }

    ... 
```

### 3.使用通用锁对象

根据 Foo 的性质以及整个事情的通用性，您可能会发现只有某个或某些类会在 ReadingList 中出现线程问题。

在这样的类中，您可以使用通用锁定对象：

```
public class Bar {
   Object readingListLock = new Object();

   public void someMethodThatModifiesReading() {
      synchronized(readingListLock) {
          foo.getReadingList().setName("1");
      }
   }

   public void someOtherMethodThatModifiesReading() {
      synchronized(readingListLock) {
          foo.getReadingList().setName("2");
      }
   }

   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:01:55.070

一个快速（但不是那么有效的解决方案）是同步`ReadingList`in`ReadingList`实现的所有方法。

寻找 Reader-Writer 锁以获得更有效的同步访问方式：它允许一次多次读取和一次写入。

您的第一个解决方案只确保一个线程`ReadingList`一次获得，而没有其他 - 许多线程可以同时读取和修改`ReadingList`。

# ios - 适用于 iOS 的 Adsense SDK

> ID：11275098
> 
> 赞同：1
> 
> 时间：2012-06-30T14:58:21.407
> 
> 标签：ios, sdk, adsense, ads

在阅读了[适用于 iOS 的 Adsense SDK 文档](https://developers.google.com/adsense-for-mobile-apps/docs/ios/)后，我想实际下载 SDK。**我在哪里可以找到它？**

经过一番搜索，我发现了一些来自 Google 的[示例项目。](http://code.google.com/p/google-mobile-dev/)然而，他们似乎都使用了我不想使用的 AdMob SDK，因为它使我的应用程序的大小增加了 10+ Mb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:04:35.563

Adsense SDK[移动了](https://developers.google.com/mobile-ads-sdk/)。它现在称为 Google AdMob 广告 SDK。这里是[下载](https://developers.google.com/mobile-ads-sdk/download)页面。

# c# - UDP洪水程序C#中的错误

> ID：11275101
> 
> 赞同：0
> 
> 时间：2012-06-30T14:58:46.140
> 
> 标签：c#, asp.net, .net, windows, visual-studio-2010

当我运行程序时，我得到一个无效的 IP 地址错误。我正在尝试使用它，以便用户可以在文本框中输入 IP 地址并使用它来发送 UDP 数据包。我不知道代码有什么问题：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Net.Sockets;
using System.Net;
using System.IO;

namespace ProjectTakedown
{
    public partial class Form1 : Form
    {
        public Form1() //where the IP should be entered
        {
            InitializeComponent();
        }

        private void button2_Click(object sender, EventArgs e) //button to start takedown
        {
            byte[] packetData = System.Text.ASCIIEncoding.ASCII.GetBytes("<Packet OF Data Here>");
            string IP = "URL";
            int port = 80;

            IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), port);

            Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            client.SendTo(packetData, ep);
        }

        private void Stop_Click(object sender, EventArgs e)
        {

        }

        private void URL_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

不知何故，它没有读取 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:03:18.887

`IP`必须是点分十进制表示法 (IPv4) 或冒号十六进制表示法 (IPv6) 的字符串

例子：

> 127.0.0.1
> 
> ::1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:04:16.587

也许是这条线？

```
string IP = "URL"; 
```

您不需要能够动态注入 IP 地址吗？

它应该看起来像这样......

```
string IP = txtIPAddress.Text; 
```

# java - 使用 JComboBox 在 JEditorPane 中设置选定文本的字体大小

> ID：11275113
> 
> 赞同：1
> 
> 时间：2012-06-30T15:01:25.293
> 
> 标签：java, swing, cross-platform, font-size, jeditorpane

如何**使用 JComboBox 在 JEditorPane（窗格）中设置所选文本的字体大小？**

以前我用过：

```
toolbar.add(new StyledEditorKit.FontSizeAction("12", 12)); 
```

但是你不能简单地拥有数百个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:31:36.710

我不知道这样做的规范方法，但在实验中，这有效：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.Action;
import javax.swing.JComboBox;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.Document;
import javax.swing.text.StyledDocument;
import javax.swing.text.StyledEditorKit;

public class EditorPaneFun extends JPanel {
   private static final Integer[] ITEMS = { 9, 10, 11, 12, 14, 16, 18, 20, 24,
         32 };
   private JEditorPane editorPane = new JEditorPane();
   private JComboBox<Integer> fontBox = new JComboBox<Integer>(ITEMS);
   private StyledDocument doc = new DefaultStyledDocument();
   private StyledEditorKit styledEditorKit = new StyledEditorKit();

   public EditorPaneFun() {
      editorPane.setDocument(doc);
      editorPane.setEditorKit(styledEditorKit);
      JScrollPane scrollpane = new JScrollPane(editorPane);
      scrollpane.setPreferredSize(new Dimension(500, 400));
      JPanel comboPanel = new JPanel();
      comboPanel.add(fontBox);

      setLayout(new BorderLayout());
      add(scrollpane, BorderLayout.CENTER);
      add(comboPanel, BorderLayout.SOUTH);

      Document doc = editorPane.getDocument();
      for (int i = 0; i < 20; i++) {
         int offset = doc.getLength();
         String str = "This is line number: " + i + "\n";
         try {
            doc.insertString(offset, str, null);
         } catch (BadLocationException e) {
            e.printStackTrace();
         }
      }

      fontBox.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            int size = (Integer) fontBox.getSelectedItem();
            Action fontAction = new StyledEditorKit.FontSizeAction(String
                  .valueOf(size), size);
            fontAction.actionPerformed(e);
         }
      });
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("EditorPaneFun");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new EditorPaneFun());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

请注意，这仅在 Document 是 DefaultStyledDocument 并且 EditorKit 是 StyledEditorKit 时才有效。

# macos - 如何测试鼠标是否在指定窗口内？

> ID：11275115
> 
> 赞同：4
> 
> 时间：2012-06-30T15:01:36.417
> 
> 标签：macos, cocoa

使用 Cocoa，我如何检查鼠标是否在我的指定窗口内？我有以下代码可以检测它是否在窗口的范围内，但如果窗口关闭/隐藏但鼠标仍在该矩形中，它会错误地打印它在里面。如果另一个窗口在它上面，它也会错误地说它在里面，但是鼠标在我正在测试的窗口区域内。

```
NSPoint mouse = [NSEvent mouseLocation];

BOOL mouseInside = NSPointInRect(mouse, self.window.frame);

if (!mouseInside) {
    NSLog(@"mouse isn't inside");
} else {
    NSLog(@"mouse is inside");
} 
```

我试过这样的事情：

```
while ((screen = [screenEnum nextObject]) && !NSMouseInRect(mouse, [screen frame], NO));

if (screen != self.window.screen && mouseInside) {
    NSLog(@"mouse is inside.");
} 
```

但它总是会打印“鼠标在里面”。

有任何想法吗？还是设置跟踪区域是唯一的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T15:24:20.823

Freenode 上的 mikeash 向我指出`NSWindow's windowNumberAtPoint:`

以下代码似乎可以根据需要工作：

```
if ([NSWindow windowNumberAtPoint:mouse belowWindowWithWindowNumber:0] != self.window.windowNumber) { 
    NSLog(@"mouse outside");
} 
```

# twitter - Twitter API 和运营商

> ID：11275116
> 
> 赞同：0
> 
> 时间：2012-06-30T15:01:37.177
> 
> 标签：twitter

我想使用 JSON 制作一个简单的 Twitter API。这个想法是只从已知公司（比如 BigCorporation）获取发送到主要公司（@BigCorporation）的帖子。这个想法是在 BigCoporation 回答追随者的问题时获取主要公告并过滤掉（即 BigCoporation 推文：@someguy，我们正在回答您的问题）

所以推文来自：BigCoporation 和@BigCorporation

我想出了这个 API get 但我似乎同时获得了@BigCorporation 或来自：BigCorporation 的推文。我只想要@BigCorp 和来自：BigCorp 的推文

[http://search.twitter.com/search.json?q=@BigCorporation&q=from:BigCorporation&result_type=mixed](http://search.twitter.com/search.json?q=@BigCorporation&q=from:BigCorporation&result_type=mixed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:03:23.100

您的搜索查询格式不正确。

它应该是：

```
http://search.twitter.com/search.json?q=@edent%20from:edent&result_type=mixed 
```

这将显示我发送的所有推文，其中包含字符串“@edent”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:59:25.423

您可以使用此 URL： [https ://api.twitter.com/1/statuses/user_timeline.json?screen_name=BigCorporation&exclude_replies=true](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=BigCorporation&exclude_replies=true)

REST 方法`GET https://api.twitter.com/1/statuses/user_timeline.json`返回用户名（此处为 BigCorporation）在参数中的用户的最新推文（默认为 20 条）`screen_name`。当设置为 true（或 t 或 1）时，该`exclude_replies`参数会排除您想要避免的推文（“@someguy we are anwering your question”）。

您可以访问Twitter API 网站上的[此页面以获取更多详细信息。](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

# r - 在 R 中对因子使用 ifelse

> ID：11275120
> 
> 赞同：7
> 
> 时间：2012-06-30T15:02:00.657
> 
> 标签：r, if-statement, r-factor

我正在重组一个物种名称数据集。它有一个带有拉丁名称的列和一个带有琐碎名称的列（如果可用）。我想创建一个第三列，在可用时给出琐碎的名称，否则是拉丁名称。琐碎名称和拉丁名称都属于因子类。我尝试过使用 if 循环：

```
 if(art2$trivname==""){  
    art2$artname=trivname   
    }else{  
      art2$artname=latname  
    } 
```

它给了我正确的 trivnames，但只在提供拉丁名称时给出 NA。
当我使用 ifelse 时，我只得到数字。

一如既往，所有帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T16:57:37.357

例子：

```
art <- data.frame(trivname = c("cat", "", "deer"), latname = c("cattus", "canis", "cervus"))
art$artname <- with(art, ifelse(trivname == "", as.character(latname), as.character(trivname)))
print(art)
#   trivname latname artname
# 1      cat  cattus     cat
# 2            canis   canis
# 3     deer  cervus    deer 
```

（我认为 options(stringsAsFactors = FALSE) 对于大多数人来说默认会更容易，但是你去......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T04:44:03.350

仅获得数字表明您只需要添加`as.character`到您的作业中，并且`if-else`可能会起作用您似乎也没有提到作业中的数据框？

```
if(as.character(art2$trivname)==""){  
    art2$artname=as.character(art2$trivname)
    }else{  
      art2$artname=as.character(art2$latname)
    } 
```

选项 2：使用`ifelse`：

```
 art2$artname= ifelse(as.character(art2$trivname) == "", as.character(art2$latname),as.character(art2$trivname)) 
```

它可能更容易（并且更“R-thonic”，因为它避免了循环）只是全面分配`artname`，`trivial`然后用......覆盖空白的`latname`......

```
art2 = art
art2$artname = as.character(art$trivname)
changeme = which(art2$artname=="")
art2$artname[changeme] = as.character(art$latname[changeme]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T05:55:17.833

如果**art2**是数据框，并且**artname**是新列，则另一种可能的解决方案：

```
art2$artname <- as.character(art2$trivname)
art2[art$artname == "",'artname'] <- as.character(art2[art2$artname == "", 'latname']) 
```

如果您想要新列中的因素：

```
art2$artname <- as.factor(art2$artname) 
```

# java - 在扩展持久性上下文中管理实体的 JPA 最佳实践

> ID：11275123
> 
> 赞同：4
> 
> 时间：2012-06-30T15:02:14.017
> 
> 标签：java, jpa, persistence, jpa-2.0, java-ee-6

我正在使用 CDI 对话范围、Seam 管理的扩展持久性上下文 (PC)。这提供了对 PC 的更细粒度的控制并避免了 LIE。我正在使用 CDI Beans 而不是 EJB Beans。在页面中，我检索实体列表并将它们显示在表格中。从表中选择的实体记录绑定到表单，可以编辑但不能持久化，直到单击“保存”按钮。在这个地方出现了问题，因为所有实体都受到管理，所以当我尝试在保存操作中仅刷新/提交一个当前实体时，编辑的实体也会保留。解决此类问题的首选最佳实践方法是什么。我应该在托管实体和查看/编辑的实体之间使用中间 POJO 吗？我应该分离然后合并（在保存之前）当前正在进行的实体吗？有什么建议么？

JPA 2.0、Hibernate 4.x
Seam 3（焊接 CDI、持久性、事务、面孔模块）
JSF 2.1
Java EE 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:37:01.643

我们使用了类似的方法，但使用了 EJB3 bean 并且没有 Seam 持久性上下文。不过，也许我们的经验可能对您有用。

这个想法是：

*   `extended` `PersistenceContext`在 bean 中使用
*   使所有方法都没有事务 - 否则您的实体将在调用后提交
*   使保存方法成为具有事务的方法。

分离实体将扼杀将实体放在前面的好处，因为`LazyException`每次尝试访问未加载的内容时都会抛出。这与使用一些 DTO 完全相同。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T00:23:32.700

如果我理解正确，那么：

1.  实体对象显示在页面上
2.  用户可以对这些对象进行更改
3.  用户可以保存对象以将更改提交到数据库

我认为这里的正确方法是在编辑对象时分离它们，然后在保存它们时重新附加它们（通过合并）。这仅保留内存中未保存的更改。

您实际上不需要为此扩展持久性上下文，因为您需要在请求之间保留的任何对象都将被分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T08:32:56.487

我在前端使用 Primefaces，默认情况下它是 ajax 提交对实体所做的更改。在我管理了 Primefaces 组件后，问题就消失了。

# javascript - 关闭菜单并单击菜单本身

> ID：11275126
> 
> 赞同：1
> 
> 时间：2012-06-30T15:02:57.683
> 
> 标签：javascript, jquery, javascript-events

当谈到 JavaScript 时，我并不是最好的，并且坚持寻找解决方案。我在这里看到过类似的问题，但是当我尝试在我的情况下实现它时，它要么破坏了菜单，要么没有任何区别。

我正在尝试获取一个菜单（单击即可打开），不仅可以通过重复单击父菜单选项卡来关闭，还可以通过单击菜单外部（即任何地方）来关闭。

我的代码是：

```
var toggleUpdatesPulldown = function(event, element, user_id) {
    if( element.className=='updates_pulldown' ) {
        element.className= 'updates_pulldown_active';
        showNotifications();
    } else {
        element.className='updates_pulldown';
    }
} 
```

该片段位于更多 JavaScript 的中间，这是默认的工作版本。来自用户的单击更改了菜单容器的类名，这决定了它是否显示。从这里的另一篇文章中，我尝试实现以下内容但无济于事，并允许单击关闭以更改类名：

```
var toggleUpdatesPulldown = function(event, element, user_id) {
    if( element.className=='updates_pulldown' ) {
        element.className= 'updates_pulldown_active';
        showNotifications();
    } else {
        element.className='updates_pulldown';
    }

    ev.stopPropagation();

    $(document).one('click', function() {
        element.className='updates_pulldown';
    });
} 
```

关于解决这个问题的任何建议？我想学习更多 JavaScript，因为我似乎越来越多地使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:21:54.107

我希望您仍在寻找解决方案。这是这个[http://jsfiddle.net/sU9ZJ/6/的工作演示](http://jsfiddle.net/sU9ZJ/6/)

```
(function(win, doc) {
  var lis = $('#menu>ul>li>a').on('click', function(e) {
    e.preventDefault();
    var a = $(this);
    var li = $(this).parent();
    function close(dev) {
      if (!(dev && li.has(dev.target)[0])) {
        li.addClass('inactive').removeClass('active');
        doc.off('click', close);
        a.trigger('close');
      }
    }
    function open(dev) {
      li.addClass('active');
      doc.on('click', close);
      a.trigger('open');
    }
    if (li.hasClass('active')) {  close() } 
    else {  open(); }        
  })      
})(this, $(document)) 
```

我还添加了几个事件，您可以在它打开或关闭时使用它们

```
$('#menu>ul>li>a').on('open', function(e) { 
     console.log('menu open', this) 
}).on('close', function(e) { 
      console.log('menu closed', this) 
}) 
```

抱歉，这取决于 jQuery。懒得写原生版本:)。此外，这没有在 IE 中测试，但如果没有，应该不会太难让它在那些上工作。

# android - 使用 WSDL 在 Android ListView 中实现

> ID：11275132
> 
> 赞同：0
> 
> 时间：2012-06-30T15:03:25.263
> 
> 标签：android, json, web-services, soap, jax-ws

我尝试从使用 JAX-WS、WSDL 构建的 Web 服务获取数据，并且我想在 Android ListView 中实现。

这是我在 Netbeans 上构建的 Web 服务中的代码。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package in.figures.on.mobile;

import db.koneksi.dbKoneksi;
import java.sql.Statement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import org.json.simple.JSONValue;

/**
 *
 * @author Setyadi
 */
@WebService()
public class AksesData {

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Lokasiku")
    public String Lokasiku(
            @WebParam(name = "lon") String lon,
            @WebParam(name = "lat") String lat) {
        //TODO write your implementation code here:

        dbKoneksi con = new dbKoneksi();
        Statement statement;
        String sql = "SELECT desa "
                + "FROM dki "
                + "WHERE ST_Within(ST_SetSRID(ST_MakePoint("+lon+","+lat+"),0),geom);";
        ResultSet hasil;
        String desa = null;

        try{
            statement = con.getConnection().createStatement();
            hasil = statement.executeQuery(sql);
            hasil.next();
            desa = hasil.getString(1);
        }
        catch(Exception e){
            desa = "desa_thegagals";
        }
        finally{

        }

        if (con != null)  {
            return desa;
        }
        else  {
            return "lokasiku_thegagals";
        }
    }

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Kategori")
    public String Kategori() {
        //TODO write your implementation code here:

        dbKoneksi con = new dbKoneksi();
        Statement statement;
        Properties properties;
        List list = new ArrayList();
        String sql = "SELECT kategori FROM kategori ";
        ResultSet hasil;
        String kategori = null;

        try{
            statement = con.getConnection().createStatement();
            hasil = statement.executeQuery(sql);
            while (hasil.next()) {
                properties = new Properties();
                properties.put("kategori", hasil.getString(1));
                list.add(properties);
            }
            kategori = JSONValue.toJSONString(list);
        }
        catch(Exception e){
        }

        return kategori;
    }

} 
```

有没有人想帮助我，至少给我一个关于这个的教程。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:10:42.387

Android 不提供对 SOAP Web 服务的任何支持。他们更喜欢我们使用带有 XML 或 JSON 的 RESTful Web 服务。但是那里有一些 SOAP 库。KSOAP 非常流行，我个人遇到过问题。[http://ksoap2.sourceforge.net/](http://ksoap2.sourceforge.net/)

另一个建议是icesoap。这是一个非常易于使用和理解的库，它对我来说就像一个魅力。 [http://code.google.com/p/icesoap/](http://code.google.com/p/icesoap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:17:28.037

对于二维数组中的返回数据，只需获取数据并将其转换为字符串。然后将其存储在数组中

```
rs = s.executeQuery();
ResultSetMetaData rsmd = rs.getMetaData();
colCount = rsmd.getColumnCount();
String[][] result;
result = new String[size][rsmd.getColumnCount()];

int j=0;
            while(rs.next()) 
            {

                for (int i = 1; i <= colCount; i++) 
                {

                    Object value=null;
                if(!rsmd.getColumnTypeName(i).matches("varchar"))
                {
                    if(rsmd.getColumnTypeName(i).matches("decimal"))
                        value=(Object)rs.getDouble(i);
                    else
                        value=(Object)rs.getObject(i);
                }
                    else
                    {
                        value = (Object)rs.getString(i);
                    }
                    if(value!=null)
                    {
                        result[j][i-1]=value.toString();
                    }
                    else
                    {
                        result[j][i-1]="--";
                    }
                }j++;
            }
        }
        catch (SQLException | ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

并且在 android 手机玩具中需要获取该数组并将其转换为适当的数据类型。

如果要显示它，则可以按原样显示。无需转换为其原始数据类型。

# python - 我应该为我的 facebook 应用程序使用什么样的授权

> ID：11275133
> 
> 赞同：1
> 
> 时间：2012-06-30T15:03:30.493
> 
> 标签：python, django, oauth, google-api, gdata-api

我正在使用 Django 构建一个社交阅读器 Facebook 应用程序，其中我使用的是 Google Data API（Blogger API）。但我无法处理使用 Google API 的授权步骤（目前正在开发中使用 ClientLogin）。

我试图阅读 OAuth 文档，但不知道如何继续。我不希望我的用户为谷歌提供任何登录凭据......这使得应用程序完全荒谬。

那么，任何人都可以在我的项目上帮助我，并告诉我我应该对谷歌 API 实际使用什么样的授权以及如何使用？（我正在使用`gdata`库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:08:11.067

Django 有一些包，例如`django-facebook`或`django-social-auth`为您管理 facebook 登录的身份验证部分。您可以在您的项目中使用这些，或者查看那里的代码作为了解 FB OAuth 实施的良好起点。

# linux - git: 'http-push' 不是 git 命令。致命：git-http-push 失败

> ID：11275134
> 
> 赞同：3
> 
> 时间：2012-06-30T15:03:33.473
> 
> 标签：linux, git

我正在尝试通过 https 推送到存储库，但收到以下错误：

```
[root@localhost systemevents]# git push
git: 'http-push' is not a git command. See 'git --help'.
fatal: git-http-push failed 
```

我没有检查 SSL 证书 ( `git config --global http.sslVerify false`)。这在 Redhat Enterprise Linux 5 虚拟机上，全新安装，在 VMWare Player 中运行。Git 的安装方式如下：

```
./configure --with-openssl --with-expat=/opt/expat --with-curl=/opt --prefix=/usr/local
make all
make install 
```

Libssh2 (v1.4.2) 是从源代码安装的；Curl 和 Expat 的安装方式如下：

```
#Curl v7.26
./configure --with-libssh2 --enable-shared --prefix=/opt
make; make install

# Expat v2.1
./configure --prefix=/opt/expat
make; make install 
```

我可以访问的 yum 存储库中这些程序的版本相当旧，`git push`显然太旧了。错误消息让我很困惑，不知道该怎么办。我能够毫无问题地克隆和拉取 HTTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T06:57:19.470

我在 Windows 上遇到了同样的错误。我尝试了几个不同版本的 git 都出现相同的错误。我最终追查到问题是由于找不到 libcurl 或不在正确的位置引起的。就我而言，我将 libcurl.dll 从 Git\bin 文件夹复制到 Git\libexec\git-core 文件夹。然后我不得不将它重命名为 libcurl-4.dll。我的猜测是在你的情况下发生类似的事情，就像在 *nix-land 中找到 libcurl 共享库一样。

# objective-c - 如何使用 ARC 将指针传递给 NSTimer scheduledTimerWithTimeInterval

> ID：11275136
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:09.913
> 
> 标签：objective-c, pointers, automatic-ref-counting

我正在尝试将间接指针传递给 NSTimer scheduleTimerWithTimeInterval:target:selector:userInfo:repeats: 如下：

```
-(void)assignResultAfterDelay:(Result **)resultPtr {
    [NSTimer scheduledTimerWithTimeInterval:1000 
                                    target:self
                                  selector:@(assignResult:)
                                  userInfo:resultPtr  // how to do this?
                                   repeats:NO];
 } 
```

由于从 (Result * __strong *) 到 id 的强制转换，这不起作用，这给出了“间接指针到 Objective-C 指针到 'id' 的隐式转换”错误。

桥接强制转换的变体和组合，例如`(__bridge id)resultPtr`、 using`objc_unretainedPointer(resultPtr)`或更改指针类型`(Result * __weak *)`都没有帮助。这样做的正确方法是什么？

我想我可以创建一个包装类来保存我的间接指针并发送一个实例，但这看起来很难看。有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:21:16.313

我想我想通了。NSInvocation 让我编译：

```
-(void)assignResultAfterDelay:(Result * __strong *)resultPtr {
    NSMethodSignature *sig = [self methodSignatureForSelector:@selector(assignResult:)];
    NSInvocation *inv = [NSInvocation invocationWithMethodSignature:sig];
    [invocation setTarget:self];
    [invocation setSelector:@selector(assignResult:)];
    [invocation setArgument:resultPtr atIndex:0];

    [NSTimer scheduledTimerWithTimeInterval:1000 invocation:inv repeats:NO];
}

// where assign result looks like:
-(void)assignResult:(Result * __strong *)resultPtr { ... } 
```

# css - 使用流星的引导示例

> ID：11275139
> 
> 赞同：2
> 
> 时间：2012-06-30T15:04:21.403
> 
> 标签：css, twitter-bootstrap, meteor

我使用 Meteor (fluid.html) 的引导示例。我已将引导程序更新到最新的 2.0.4。

但是，我遇到了一个奇怪的问题，即`padding-top: 60px;`以错误的方式与

```
@media (max-width: 979px)
    body {
    padding-top: 0;
} 
```

好吧.. webkit 似乎这样做（出于某种原因仅在 Meteor 上）：

![在此处输入图像描述](../Images/34e3c25c247150a54eb93b457a5d0335.png)

它最终看起来像这样：

![在此处输入图像描述](../Images/16afdbc7fa10242d62cf0ff0c3cf087f.png)

（黑条上方有一个空隙） - 当然这是流畅的布局，所以需要将浏览器向下拖动到小视图（对于 iPhone/Android/平板电脑）

我将如何设法让浏览器`padding-top: 0`作为首选，所以它不这样做？或者为什么这样做（css文件以相同的顺序加载 - 先是`bootstrap.css`然后`bootstrap-responsive.css`。我不知道有什么区别

（它应该是这样的：http: [//twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:28:12.160

升级到 2.0.4 后，我仍然遇到在某些分辨率下使用`navbar-fixed-top`. 这是在某些分辨率下发生的情况：

![内容隐藏在导航栏下](../Images/a5ed558e946b2193d818438c492ecc8c.png)

在调整 CSS 之后，我想出了以下内容，当添加到我的 CSS 文件顶部时，它可以在所有分辨率下修复它：

```
@media (min-width: 979px) { body { padding-top: 60px; } } 
```

![使用正确的媒体查询正确调整填充](../Images/6aad440ceb69c6c5a12b6c2ea67eef93.png)

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:02:46.223

它不只是这样做...

![](../Images/34e3c25c247150a54eb93b457a5d0335.png)

它的作用不止于此。您应该检查`padding-top`设置的内容，浏览整个面板并查看设置的内容，这应该会告诉您问题出在哪里。在最坏的情况下，您可以使用`padding-top: 0 !important;`，尽管应该知道这`!important`是不好的建议，并且您应该能够绕过而不必添加它。

我不明白 Meteor 是如何负责的，因为据我所知，他们没有添加任何重大的 CSS 更改；但它可能是有的，但你只能知道如果你看在哪里`padding-top`设置。

# mysql - 无法向表中插入数据

> ID：11275140
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:21.990
> 
> 标签：mysql, insert

我正在尝试使用 insert 将数据插入表中。

```
INSERT INTO tbl_products (user_id,productkey,listitemname,itemdescription
      ,thumbnail,rollover,itemfile,themepreview1,themepreview2,themepreview3
      ,themepreview4,categoryname,sub_category_id,browsercompatiable,filesinclude
      ,noofcolumns,layout,demourl,itemtags,create_date,update_date,license_number) 
VALUES (117,'395cb2e171ac','Baby','This is baby'
      ,'a4fb673be7b5','d6232cad4955','e3fe02d02c82','dc7067dffd0a','72f48e9a9585'
      ,'35b016bf135c','6e36d212f3c0','9',51,'ie8,','ie8,',1,1,'http://asdsaf.com'
      ,'rwreewr','2012-06-30','2012-06-30','1565-5827-7289-918') 
```

但是没有插入数据，MySQL 显示以下错误：

> 1452 - 无法添加或更新子行：外键约束失败（`wwwwdmar_orangedoor`. `tbl_products`, CONSTRAINT `tbl_products_ibfk_1`FOREIGN KEY ( `categoryname`) REFERENCES `tbl_sub_categories`( `sub_category_id`) ON DELETE CASCADE ON UPDATE CASCADE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:58:28.820

好的，您`tbl_products`在 column上有一个外键`categoryname`。`sub_category_id`这引用了中的列`tbl_sub_categories`。

这种陈述的关系意味着您*必须*在. 它显然不存在。那真的应该是一个字符串吗？`categoryname``'9'``sub_category_id``tbl_sub_categories``9`

如果没有更多信息，从技术上讲不可能为您提供帮助，但这里有：

有两种可能：

### 假设 1

您有列`categoryname`，并且您插入的名称与您也插入`tbl_sub_categories`的 ( ) 直接相关。`sub_category_id``51`

解决方案 1从
中删除列。它不需要存在于正确规范化的数据库中。将外键更改为对列的约束，因为这似乎是您要查找的内容。`categoryname``tbl_products``sub_category_id`

解决方案 2
将外键更改为同时位于`categoryname` *和* `sub_category_id`上。这是为了阻止您插入与引用列不匹配的值。

### 假设 2

您有一个单独的表，名为`tbl_categories`. 在这种情况下，您需要`tbl_sub_categories`在外键中引用此表。

# jquery - 在文本字段上使用带有 .on() 的事件加载不起作用

> ID：11275141
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:22.490
> 
> 标签：jquery

我试图使用这个在我的文本字段上触发加载事件（例如设置默认值）：

```
 $("#textfield1").on("load" , function(){
       $("#textfield1").val("WEEE");
    }); 
```

这是行不通的。

如果我这样做：

```
 $(document).ready(function() { 
     $("#textfield1").val("WEEE");
  }); 
```

或这个：

```
 $("body").on("load" , function(){
    $("#textfield1").val("WEEE");
 }); 
```

然后我得到了想要的效果。我`load`在第一个片段中使用错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:07:45.930

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

通过[.load()](http://api.jquery.com/load-event/)

所以，基本上是的：文本字段永远不会触发`load`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:07:55.750

HTML 元素没有`load`事件。

只有带有`load`事件的元素是`body`,`img`并且可能`link`和`script`

# objective-c - 有没有办法在 iCloud 中共享一个主日历？

> ID：11275144
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:24.867
> 
> 标签：objective-c, ios, icloud

我知道我可以使用 iCloud 在多个设备/用户之间同步日历（我假设这是 iCal）。

我需要有一个可以在用户之间共享并在这些用户之间自动同步的*主日历。*所有用户都必须能够添加/更新/删除条目。由于我将对此进行测试，因此我不想使用我的个人 iCal，因此我需要存储在 iCloud 上的另一组 iCal 用于测试等。

iOS和objective-c有可能吗？如果是这样，我最感兴趣的 API 是什么？

更新：对“主日历”的每次更改都由 iCloud 同步，假设用户设备已在 iCloud 中“注册”。我需要一个存储在一个 iCloud 帐户中的日历，可供所有“注册”用户/设备使用。该应用程序将访问该日历以进行后端处理。用户对日历所做的更改将由应用程序在运行时处理（应用程序在工作时间运行，用户可以 24/7 进行更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:18:37.550

iOS 中的日历和事件是使用[Event Kit Framework](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EventKitFrameworkRef/_index.html)访问的。用户必须分别设置他们的 iCloud 帐户和日历访问/共享，我认为您不能在第三方应用程序中执行此操作。

# bash - 排序命令未按预期工作

> ID：11275145
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:25.907
> 
> 标签：bash, loops

如果有人可以帮助我编写一个循环来遍历文件夹中的文件，那将为我节省大量时间。我认为这一定是一个非常简单的解决方案，但我目前不知道如何在循环中嵌套循环。到目前为止，我有这个脚本：

```
cd /folderlocation/
for i in `</textfile_containing_lines_to_iterate_through`
do
 #size=`echo $i | perl -nE '/:([\d-]+)/ && say abs(eval $1)'`
  #echo "$size"
 zcat dataset | head -n 18 > temp"$i".vcf
 tabix dataset $i >> temp"$i".vcf 
 vcftools --window-pi 1000000 --vcf temp10individuals"$i".vcf >>  run_summary.txt
cat out.windowed.pi >> outputfile_2 
  #rm temp*
done
grep -v "PI" outputfile_2   > outputfile
rm outputfile_2 
```

我需要扩展它，以便脚本通过所有'textfiles_ contains_lines_to_iterate_through'多次运行。目前我每次手动更改文本文件的名称并重新运行脚本。所以我需要一个循环来为文件夹中的文件执行此操作，并且还使用文件名作为输出文件名的一部分，以便我可以将输出文件与输入文件匹配。

任何帮助都会非常有用，非常感谢！

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:13:23.987

要遍历文件夹中的文件，

```
for i in folder/*;
do <whateveryouwanttodo>;
done; 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:17:09.047

您可以像任何其他语言一样嵌套循环。你只需在另一个里面写一个。

我们先来看看如何遍历当前目录下的所有文件：

```
for file in *
do
    do_something_with $file
    or_generate ${file}_changed
done 
```

现在你的整个脚本变成了：

```
cd /folderlocation/
for f in *
do
  for i in `<$f`
  do
    #size=`echo $i | perl -nE '/:([\d-]+)/ && say abs(eval $1)'`
    #echo "$size"
    zcat dataset | head -n 18 > temp${i}.vcf
    tabix dataset $i >> temp${i}.vcf 
    vcftools --window-pi 1000000 --vcf temp10individuals${i}.vcf >>  run_summary.txt
    cat out.windowed.pi >> outputfile_2 
    #rm temp*
  done
  grep -v "PI" outputfile_2   > output_${file}
  rm outputfile_2
done 
```

# settings - 在管理面板中输入的 Spree Mailer 设置保存在哪里？

> ID：11275149
> 
> 赞同：0
> 
> 时间：2012-06-30T15:04:41.320
> 
> 标签：settings, spree, mailer

我正在使用 Rails 3.2.3 开发 Spree 应用程序。我的 Spree 版本是 1.1.0。我在家用计算机上以开发模式运行 Rails 服务器。我在 localhost:3000/admin/mail_methods 的 Spree 管理面板中输入了邮件设置。我可以在开发日志中看到我输入邮件设置的地方，当我打开和关闭服务器时，设置仍然存在，所以我知道它们存储在某个地方。但是，我找不到它们的存储位置。我将我的 SMTP 邮件主机设置为“smtp.hello.com”，当我从项目根目录执行以下命令时，我只在开发日志中看到输入邮件设置的行：grep -r "smtp .hello.com”。

我想找到这些设置的原因是因为我想找到一种不使用管理面板 GUI 来设置它们的方法。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:18:47.610

They are stored in the sql database follow these steps

1st table is called spree_mail_methods note the id of the method that you want to set. but the actual data is stored in spree_preferences table the following sql statement will get you what you want as that table has a lot of data in it.

```
select * from spree_preferences where key like 'spree/mail_method%'; 
```

Shame on spree for storing passwords in plain text!

# javascript - 背景更改时动态更改文本颜色（javascript）

> ID：11275153
> 
> 赞同：0
> 
> 时间：2012-06-30T15:05:27.947
> 
> 标签：javascript, html, css

我有一个图像滑块，上面覆盖着文字。我想根据图像的主题（浅色或深色）将文本颜色更改为黑色或白色。

我想手动指定图像的主题，因为我不想使事情过于复杂。例如，它可以像这样工作：

```
If imagetheme == 'light'
textcolor == #000 
```

...反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:10:34.863

有一个样式表来响应放置在`<body>`元素上的主题类（例如`.light`）。不脏乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:16:12.650

我想你几乎是自己写的！我会做..

```
if ( var imagetheme == 'light' ) {
  var textcolor = '#000';
}
else if { var imagetheme == 'dark' ) {
  var textcolor = '#fff';
} 
```

或者您可以使用 Javascript 的三元运算符编写它。

```
var imagetheme == 'light' ? var textcolor = '#000' : var textcolor = '#fff'; 
```

# android - 我必须做哪些改变才能使我的 android 应用程序在真正的移动设备上运行

> ID：11275162
> 
> 赞同：1
> 
> 时间：2012-06-30T15:05:53.440
> 
> 标签：android

我有一个 android 应用程序可以运行`emulator`并连接`server localhost`，发送接收数据，我想让我的应用程序打开`real mobile`并通过它连接到 localhost `wireless`，我正在使用`servlet`从移动 android 模拟器连接到 localhost 服务器，我必须做哪些更改做？`and can I connect to localhost via wireless or i have to buy a real host?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-02T12:40:44.977

首先，检查URL并将IP地址从本地服务器的IP地址更改为本地IP地址。确保移动设备与计算机位于同一网络中以访问获取 API 的脚本。然后根据 Javascript Object Notation (JSON) 处理请求以获取结果。

# java - 用于大型数据集的嵌入式 Java 数据库

> ID：11275164
> 
> 赞同：2
> 
> 时间：2012-06-30T15:06:32.847
> 
> 标签：java, sql, sqlite, hsqldb, h2

我想将基于 PHP/MySQL 的客户端/服务器应用程序移植为用 Java 编写的独立桌面应用程序。数据库已经变得相当大，有几张表，有几十万行。我预计某些表格的这些条目可能会增长到超过一百万个。

什么嵌入式数据库最能处理这个问题？HSQLDB 和 Sqlite 似乎是显而易见的选择，尽管我猜还有其他选择。我的主要优先事项是高效地对大量数据执行查询的能力（[这个线程](https://stackoverflow.com/questions/1033309/sqlite-for-large-data-sets)似乎证实 Sqlite 可以处理这个问题）以及我可以轻松地从 MySQL 导入旧数据（我记得 HSQLDB 对此有点痛苦） .

注意：我知道之前已经发布过类似的比较嵌入式数据库的问题（例如[这里](https://stackoverflow.com/questions/462923/java-embedded-databases-comparison)和[这里](https://stackoverflow.com/questions/57102/embedded-java-databases)），但是考虑到大数据迁移，我的优先级与大多数应用程序有所不同，我认为这是一个新问题的合理性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:13:35.237

随着时间的推移，您将不再担心的担心是，您是否会有内存不足的用户来处理嵌入式数据库中的数百万行。

当每个人都拥有 64 位操作系统和 8GB 或更多 RAM 时，你就会明白了。

我同意 SQLLite 或 Hypersonic 只要有足够的内存就可以处理它。我想知道对于那些内存变得稀缺的情况，每个人都会做什么。

您当然可以选择在服务器模式下运行 Hypersonic 并将数据保存在磁盘上。这可能是一个有吸引力的替代方案，尤其是在 SSD 变得普遍的情况下。您可以保持不需要安装数据库的便利，并且仍然可以在不耗尽可用 RAM 的情况下管理大型数据集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T16:03:24.227

最新版本的 HSQLDB 用于具有千兆字节数据的商业应用程序。HSQLDB 的持久化机制已经过彻底的测试，它系统地使用 fsync 避免了数据丢失。查询优化得到了改进。使用 HSQLDB SqlTool 从 CSV 或 SQL 转储导入数据现在非常容易

# c# - 如何使用 LINQ 找到从 Db 中成功删除的记录

> ID：11275166
> 
> 赞同：0
> 
> 时间：2012-06-30T15:07:25.317
> 
> 标签：c#, linq

我正在使用 LINQ-to-Sql，我写了一个块来删除数据库中的记录。Executenonquery 返回一个整数值，通过这个值我们可以知道这条记录是否被删除。但是我们如何使用 Linq 做到这一点呢？例如在我的代码中：

```
aspnetdbDataContext aspdb = new aspnetdbDataContext();
            var res=from p in aspdb.TrackPoints
                        where p.RouteFK==routeId
                        select p;
            aspdb.TrackPoints.DeleteOnSubmit(res.First());
            aspdb.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:32:36.480

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.submitchanges.aspx)：。`SubmitChanges starts a transaction and will roll back if an exception occurs while SubmitChanges is executing`_

所以我猜如果**SubmitChanges** `throws`出现异常，则没有进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:26:49.377

```
System.Data.Linq.ChangeSet cs = aspdb.GetChangeSet();
bool IsDeleted = cs.Deletes.Count() == 0; 
```

这里如果 cs.Deletes 等于 0 表示一切正常，该行已被删除，但如果大于 0，则表示有一些记录没有被成功删除

# delphi - 如何按第一个数字对列表进行排序？

> ID：11275177
> 
> 赞同：2
> 
> 时间：2012-06-30T15:08:37.220
> 
> 标签：delphi, delphi-7

我有一个庞大的用户列表，每个用户都有它的 id ，但是它的 id 数字很乱，所以如果有人能告诉我如何按数字对用户进行排序，每个值都有这种形式

```
1:Stackoverflow
or
145000:Google 
```

如果我手动执行此操作，我想我会失去理智，因为有超过 700000 条记录。感谢您的时间和帮助....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T16:39:03.843

像这样提取数字：

```
function ID(const str: string): Integer;
var
  p: Integer;
begin
  p := Pos(':', str);
  if p=0 then
    raise Exception.CreateFmt('Invalid string format: %s', [str]);
  Result := StrToInt(Copy(str, 1, p-1));
end; 
```

一旦您可以将 ID 提取为整数，您就可以编写一个比较函数。像这样：

```
function CompareIDs(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := CompareValue(
    ID(List[Index1]), 
    ID(List[Index2])
  );
end; 
```

[`CompareValue`](http://docwiki.embarcadero.com/Libraries/en/System.Math.CompareValue)是一个 RTL 函数，根据两个操作数的相对值返回 -1、0 或 1。

将这些构建块放入[`TStringList.CustomSort`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.CustomSort)其中，您的工作就完成了。

```
MyStringList.CustomSort(CompareIDs); 
```

# ruby-on-rails - 在 lib 目录中组织文件

> ID：11275178
> 
> 赞同：2
> 
> 时间：2012-06-30T15:08:41.890
> 
> 标签：ruby-on-rails

我正在尝试将我的 Rails 项目的一部分提取到我的 lib 目录中，但我无法弄清楚如何正确链接我的文件。我的目录结构如下所示：

```
lib/
  eventable/
    calendar.rb
    helpers.rb
# Rest of rails directories/files 
```

我需要事件目录`config/application.rb`：

```
config.autoload_paths += %W(#{config.root}/lib #{config.root}/lib/eventable) 
```

我的助手和日历 rb 文件：

```
# helpers.rb
module Eventable
  module Helpers
    def calendar_for...
      Calendar.new...
    end
  end
end

# calendar.rb
module Eventable
  class Calendar
    # methods defined here
  end
end 
```

然后，我将 Eventable::Helpers 模块混合到常规的 Rails 助手中，以便`calendar_for`在我的视图中使用：

```
ActionView::Base.send :include, Eventable::Helpers 
```

这最后一步似乎工作正常。但是，当我转到使用此助手的视图时，我得到：

```
uninitialized constant Eventable::Helpers::Calendar 
```

如果我更改我的助手以便它尝试访问`Eventable::Calendar.new`，那么我会得到：

```
uninitialized constant Eventable::Calendar 
```

当我将所有这些都放在一个文件中时，一切都很完美。那么如何正确链接这些文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:17:12.787

看起来你需要一个加载器类型的文件来告诉 Rails 在哪里可以找到`Eventable`模块的代码。

尝试添加一个`lib/eventable.rb`：

```
module Eventable
  autoload :Calendar, 'eventable/calendar'
  autoload :Helpers, 'eventable/helpers'
end 
```

如果您有加载程序文件，则不需要更改加载路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:59:43.847

我有一个类似的问题。我通过改变需要模块的方式解决了这个问题。

在**应用程序.rb**

```
config.autoload_paths += Dir["#{config.root}/lib/"] 
```

使用以下代码创建**/lib/eventable.rb**

```
require "eventable/helpers"
require "eventable/calendar" 
```

# php - MySql 中的正则表达式 - 在标签之间替换，包括标签

> ID：11275180
> 
> 赞同：-3
> 
> 时间：2012-06-30T15:09:08.300
> 
> 标签：php, mysql, regex

> **可能重复：**
> [PHP Regex 获取 BBCode 标签之间的文本](https://stackoverflow.com/questions/9640670/php-regex-get-text-between-bbcode-tags)

我有这样的文字：

> [lang_de]德语内容[/lang_de][lang_en]英语内容[/lang_en]。

我想替换开始和结束语言标签之间的所有`[lang_en]`文本`[/lang_en]`。

这是我当前的正则表达式：

```
UPDATE wp_posts SET post_content = '" . addslashes(preg_replace("/[lang_en](.*)[\/lang_en]/", '', $row['post_content'])) . "' WHERE ID = " . $row['ID'] 
```

使用这个正则表达式，我没有得到有效的结果。它还替换 html 标签等。

什么是正确的正则表达式？

这是一个文本示例：

```
[lang_de]
<!--more-->
<div class="s-desc">
<br/>
Länge: 3:50 min | Tempo: 125 bpm
<p>
Text<br/>
</p>
<p>
<a href="#">LoFi-Version zum Testeinsatz in Ihrem Projekt hier downloaden</a>.     (Rechstklick-->Ziel speichern unter...)<br/>
Die Nutzung dieser LoFi-Version ist ausschließlich für Testzwecke erlaubt!
</p>
</div>
[/lang_de]

[lang_en]<!--more-->
<div class="s-desc">
<br/>
Length: 3:50 min | Tempo: 125 bpm
<p>
Text<br/>
</p>
<p>
<a href="#">Download a lofi-version to test with your project here</a>. (right-click-->save target as...)<br/>
The usage of this lofi-version is permitted for testing purposes only!
</p>
</div>
[/lang_en] 
```

结果应如下所示：

```
<!--more-->
<div class="s-desc">
<br/>
Länge: 3:50 min | Tempo: 125 bpm
<p>
Text<br/>
</p>
<p>
<a href="#">LoFi-Version zum Testeinsatz in Ihrem Projekt hier downloaden</a>.     (Rechstklick-->Ziel speichern unter...)<br/>
Die Nutzung dieser LoFi-Version ist ausschließlich für Testzwecke erlaubt!
</p>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T15:15:41.710

```
preg_replace("/\[lang_en](.*?)\[\/lang_en]/s", '', $text);
                            ^              ^
                          lazy             |
                                   '.' matches newlines as well 
```

*[这里](http://ideone.com/WGOfM)简单测试。*

# asp.net - C# 数据库访问、Dapper、SQL 和 POCO - 编程设计

> ID：11275183
> 
> 赞同：2
> 
> 时间：2012-06-30T15:09:36.203
> 
> 标签：asp.net, sql, oop, design-patterns, dapper

假设我们有一个用 C# 表示的 SQL 表，如下所示：

```
public class Product
{
   public int ID { get; set; }
   public string Name { get; set; }
   public string Picture { get; set; } // filename of the picture, e.g. apple.jpg
   public int CategoryID { get; set; }
} 
```

现在我们将查询数据库并检索对象，假设使用如下值：

```
ID = 1
Name = Yellow apple
Picture = apple.jpg
CategoryID = 25 
```

一切都很正常。我现在正在思考的事情是：如果我想展示一个产品，我需要一些没有从数据库中查询到的附加信息，比如图像的确切文件路径，我们所拥有的只有

> 苹果.jpg

，但我们可能需要类似的东西

> 〜/图像/苹果.jpg

* * *

所以，我在想3种可能性：

1.) 向 Product 类添加一个新属性

```
public string PictureUrl
{
    get
    {
        return "~/images/apple.jpg";
    }
} 
```

2.) 在执行表示逻辑期间指定完整的 url，比如说：

```
public void ShowProductDetails()
{
    Product p = ProductRepo.GetProduct(id);

    txtName.Text = p.Name;
    imgPicture.ImageUrl = "~/images/" + p.Picture;
} 
```

3.) 使用装饰器模式

第一种方法对我来说似乎是错误的（即使我已经使用了很长时间），因为我正在尝试使用分层的 Web 应用程序。我不确定硬编码这是一个好方法。

第二种方法更好，但更糟糕的是它不能轻易重用。如果我有多个地方在做同样的事情并且发生了一些变化，......如果我指定一些保存路径的静态常量，也许它会起作用......

第三种可能性在可维护性方面似乎相当复杂。我的班级数量可能要翻倍。如果我现在有 30 节课，它会突然变成 60 节：/

做这样的事情的最佳/推荐方式是什么？如果我向我的 POCO 添加不包含在 db 架构中的属性，我将无法使用 Dapper.Contrib 或 Rainbow 和类似的库，因为即使“选择”工作正常，我也无法“插入”或“删除”。我必须为每个命令硬编码 sql 字符串，这在一段时间后变得非常乏味，当你一直在做同样的事情时。

**编辑：**

Govind KamalaPrakash Malviya 的解决方案很棒，但不能每次都使用。我需要一种方法来解决任何类型的属性，即使是那些更复杂的属性 - 例如某些相册的照片数量。将照片的数量与相册一起查询是个好主意，但将其分配给什么？使用装饰器模式创建装饰类？

您如何解决此类架构问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:44:40.480

我认为您应该在表示层中对其进行操作，因为仅表示层的图像路径。所以使用第三个，但使用实用程序方法更容易

```
public class PathUtility
{
    public static string ImageUrl(string imageName)
    {

          if(string.IsNullOrEmpty(imageName))
          {
               throw new Exception("Image name not valid!!");
          } 
          else
          {
               return "YourImageDirectroyUrl" + imageName;
          }

    } 
} 
```

并轻松使用

```
PathUtility.ImageUrl("apple.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:42:04.120

我通常通过保留实体对象并创建一个额外的数据容器来解决这个问题，该容器将保存对相应实体的引用或实现实体对象本身的相应属性。在后一种情况下，我使用映射库 ( [AutoMapper](https://github.com/AutoMapper/AutoMapper) ) 将数据从实体复制到增强的容器。

填充额外属性的逻辑通常位于工厂（或工厂方法）中。这取决于你，你想把它放在你的架构中的什么地方。在当前的项目中，我们将它们包含在客户端的数据访问外观中，因为我们不想让太多的 DTO 使数据访问层混乱。这当然意味着，数据访问层仍然需要支持检索额外的属性。在您的情况下，像`int GetNumberOfPhotosForAlbum(Album album)`.

我们发现，数据访问层不断增长的合约带来的好处超过了风险，这当然可能需要支持许多不同的调用，例如上面的示例，而不仅仅是`EnhancedAlbum GetEnhancedAlbumWithAllKindsOfExtraProperties(long albumId)`. 在某些情况下，这也可能成为性能问题，因为服务调用频率增加会产生开销。最后，您需要决定什么最适合您的项目。

我喜欢这种方法，因为我的实体`Album`（

**例子：**

```
class Album
{
    string Name { get; set; }
}

class EnhancedAlbum
{
    Album Album { get; set; }
    int NumberOfPhotos { get; set; }
}

class EnhancedAlbumFactory
{
    private MyDataService _dataService;

    //include some means of constructing or (better) injecting the data service

    EnhancedAlbum GetEnhancedAlbum(Album album)
    {
        return new EnhancedAlbum
               {
                   Album = Album,
                   NumberOfPhotos = _dataService.GetNumberOfPhotosForAlbum(album);
               };
    }
} 
```

# r - 用零替换负值

> ID：11275187
> 
> 赞同：27
> 
> 时间：2012-06-30T15:09:52.900
> 
> 标签：r, if-statement, for-loop, conditional-statements, rcpp

我们想将数组零中的所有值设置为负数。

我尝试了很多东西，但还没有找到可行的解决方案。我考虑了一个带有条件的 for 循环，但这似乎不起作用。

```
#pred_precipitation is our array
pred_precipitation <-rnorm(25,2,4)     

for (i in nrow(pred_precipitation))
{
  if (pred_precipitation[i]<0) {pred_precipitation[i] = 0}
  else{pred_precipitation[i] = pred_precipitation[i]}
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-30T15:15:58.360

感谢您提供可重现的示例。这是非常基本的 R 东西。您可以分配给向量的选定元素（注意数组具有维度，并且您给出的是向量而不是数组）：

```
> pred_precipitation[pred_precipitation<0] <- 0
> pred_precipitation
 [1] 1.2091281 0.0000000 7.7665555 0.0000000 0.0000000 0.0000000 0.5151504 0.0000000 1.8281251
[10] 0.5098688 2.8370263 0.4895606 1.5152191 4.1740177 7.1527742 2.8992215 4.5322934 6.7180530
[19] 0.0000000 1.1914052 3.6152333 0.0000000 0.3778717 0.0000000 1.4940469 
```

**基准战！**

@James 找到了一种更快的方法并将其留在评论中。我支持他，只是因为我知道他的胜利将是短暂的。

首先，我尝试编译，但这似乎对任何人都没有帮助：

```
p <- rnorm(10000)
gsk3 <- function(x) { x[x<0] <- 0; x }
jmsigner <- function(x) ifelse(x<0, 0, x)
joshua <- function(x) pmin(x,0)
james <- function(x) (abs(x)+x)/2
library(compiler)
gsk3.c <- cmpfun(gsk3)
jmsigner.c <- cmpfun(jmsigner)
joshua.c <- cmpfun(joshua)
james.c <- cmpfun(james)

microbenchmark(joshua(p),joshua.c(p),gsk3(p),gsk3.c(p),jmsigner(p),james(p),jmsigner.c(p),james.c(p))
           expr      min        lq    median        uq      max
1     gsk3.c(p)  251.782  255.0515  266.8685  269.5205  457.998
2       gsk3(p)  256.262  261.6105  270.7340  281.3560 2940.486
3    james.c(p)   38.418   41.3770   43.3020   45.6160  132.342
4      james(p)   38.934   42.1965   43.5700   47.2085 4524.303
5 jmsigner.c(p) 2047.739 2145.9915 2198.6170 2291.8475 4879.418
6   jmsigner(p) 2047.502 2169.9555 2258.6225 2405.0730 5064.334
7   joshua.c(p)  237.008  244.3570  251.7375  265.2545  376.684
8     joshua(p)  237.545  244.8635  255.1690  271.9910  430.566 
```

![编译比较](../Images/30aaca25e79130f69927f848d460ca25.png)

可是等等！Dirk 写了这个 Rcpp 东西。一个完全没有 C++ 能力的人可以阅读他的 JSS 论文，修改他的示例，并编写所有这些中最快的函数吗？敬请关注，亲爱的听众。

```
library(inline)
cpp_if_src <- '
  Rcpp::NumericVector xa(a);
  int n_xa = xa.size();
  for(int i=0; i < n_xa; i++) {
    if(xa[i]<0) xa[i] = 0;
  }
  return xa;
'
cpp_if <- cxxfunction(signature(a="numeric"), cpp_if_src, plugin="Rcpp")
microbenchmark(joshua(p),joshua.c(p),gsk3(p),gsk3.c(p),jmsigner(p),james(p),jmsigner.c(p),james.c(p), cpp_if(p))
         expr      min        lq    median        uq       max
1   cpp_if(p)    8.233   10.4865   11.6000   12.4090    69.512
2     gsk3(p)  170.572  172.7975  175.0515  182.4035  2515.870
3    james(p)   37.074   39.6955   40.5720   42.1965  2396.758
4 jmsigner(p) 1110.313 1118.9445 1133.4725 1164.2305 65942.680
5   joshua(p)  237.135  240.1655  243.3990  250.3660  2597.429 
```

![与rcpp比较](../Images/0f8d09cdbd54f0f1e780f0ef1d4093f6.png)

这是肯定的，船长。

`p`即使您没有分配给它，这也会修改输入。如果你想避免这种行为，你必须克隆：

```
cpp_ifclone_src <- '
  Rcpp::NumericVector xa(Rcpp::clone(a));
  int n_xa = xa.size();
  for(int i=0; i < n_xa; i++) {
    if(xa[i]<0) xa[i] = 0;
  }
  return xa;
'
cpp_ifclone <- cxxfunction(signature(a="numeric"), cpp_ifclone_src, plugin="Rcpp") 
```

不幸的是，这扼杀了速度优势。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-30T15:25:33.200

我会使用`pmax`，因为`ifelse`有时可能会有点慢，并且子集替换会创建一个额外的向量（这可能是大型数据集的问题）。

```
set.seed(21)
pred_precipitation <- rnorm(25,2,4)
p <- pmax(pred_precipitation,0) 
```

到目前为止，子集替换是最快的：

```
library(rbenchmark)
gsk3 <- function(x) { x[x<0] <- 0; x }
jmsigner <- function(x) ifelse(x<0, 0, x)
joshua <- function(x) pmin(x,0)
benchmark(joshua(p), gsk3(p), jmsigner(p), replications=10000, order="relative")
         test replications elapsed relative user.self sys.self
2     gsk3(p)        10000   0.215 1.000000     0.216    0.000
1   joshua(p)        10000   0.444 2.065116     0.416    0.016
3 jmsigner(p)        10000   0.656 3.051163     0.652    0.000 
```

![自动绘图微基准](../Images/a18a8ba8ec957a3e1bf40e3a7caec69a.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-30T15:21:59.787

或者，您也可以使用`ifelse`：

```
ifelse(pred_precipitation < 0, 0, pred_precipitation) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-12T14:24:52.120

如果您的主要对象是 tibble 或数据框，您也可以使用 tidy 包。与 Ari B. Friedman 提出的替换相比，替换可以“即时”编写并与其他突变结合使用。

使用 dplyr 和管道的示例`%>%`如下所示：

```
df %>% mutate(varA = if_else(varA < 0, 0, varA)) 
```

`mutate()`您可以在语句中添加更多突变（即新变量） 。我在这种类型的编码中看到的一个优点是您不会冒跳过或重新执行单个转换步骤的风险，因为它们都分组在一个语句中。例如，通过`%>% View()`在 RStudio 中添加，您已经可以预览结果。但是，结果尚未存储在任何地方（“即时”）。这样，您在更改代码时可以保持命名空间/环境的清洁。

# java - 容器和算法

> ID：11275188
> 
> 赞同：1
> 
> 时间：2012-06-30T15:09:55.913
> 
> 标签：java

我目前正在尝试学习 Java，并且正在尝试通过实现自己的容器类来做到这一点。我的问题是：
如果我已经实现了三个不同的容器类，并且我确实希望能够以三种不同的方式对它们中的每一个进行排序，所以我有：

```
Container_one with sort_1, sort_2, sort_3  
Container_two with sort_1, sort_2, sort_3  
Container_three with sort_1, sort_2, sort_3 
```

其中 sort_1、sort_2 和 sort_3 在每个容器中都是相同的算法（但它们彼此不同），有没有办法只实现一次，然后在其他容器中重用它们，还是每次我都必须实现它们m 实施新容器？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:19:22.753

将算法与它们操作的数据结构分开的一种方法是考虑实现算法所需的操作，将这些操作抽象为接口，根据接口对算法进行编码，并拥有所有数据结构实现接口。

例如，假设您的排序算法需要一种方法来比较位置`i`和的项目`j`，以及交换项目`i`和的方法`j`。然后您的界面将如下所示：

```
interface Sortable {
    int compare(int i, int j);
    void swap(int i, int j);
} 
```

现在您可以按照以下方式实现分拣机`Sortable`：

```
void sort1(Sortable container) {
    // first way to sort
}

void sort2(Sortable container) {
    // second way to sort
} 
```

最后，让你的容器实现`Sortable`：

```
class CoolContainer1 implements Sortable {
    public int compare(int i, int j) {
        ...
    }
    public void swap(int i, int j) {
        ...
    }
    // other operations
}

class CoolContainer2 implements Sortable {
    public int compare(int i, int j) {
        ...
    }
    public void swap(int i, int j) {
        ...
    }
    // other operations
} 
```

请注意，以上所有内容只是对您的学习练习的建议。Java 提供了强大的排序工具，适用于列表和数组，并允许您将排序顺序指定到尽可能小的细节。循环查看该[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)方法以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:22:56.390

排序算法应外化为三个`Sorter`类或静态`sort(Container)`方法，并以容器为参数进行排序。如果容器都实现了一个通用接口，您可以使用相同的算法对它们进行排序。

公共接口应该只包含获取容器大小、获取给定索引处的元素以及设置给定索引处的元素的方法。这足以对容器进行分类。

或者它可以有两种方法：一种提供包含容器所有元素的数组，另一种使用（排序的）数组的所有元素重新初始化它。

您正在重新实现`java.util.List`and `java.util.Collections.sort()`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:21:00.520

将算法与容器分开。例如：

```
interface SortAlgorithm { ... }

class Sort1 implements SortAlgorithm { ... } 
```

然后使用排序算法参数化每个 Container：

```
class Container1 { public Container(SorthAlgorithm alg) {...} ... }

aContainer = new Container1(new Sort1()) 
```

查看Java 库的[SortedSet层次结构。](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)

每个可排序集合都可以使用用于比较项目的逻辑（[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器）进行参数化。

通常“排序算法”（不是比较方法）与集合的内部结构（即平衡树）紧密耦合，这就是为什么“共享”比较方法而不是整个排序算法更有意义的原因。

# mysql - AppHarbor MySql Yocto 连接错误

> ID：11275190
> 
> 赞同：1
> 
> 时间：2012-06-30T15:10:19.127
> 
> 标签：mysql, appharbor

我的 AppHarbor Web 实例使用免费的 MySql Yocto 20 MB 计划，我看到“无法连接到任何指定的 MySQL 主机”。这是因为数据库用完了免费的 20 MB 还是 MySql 现在真的宕机了，我无法弄清楚。

是否有任何直接的方法可以找到与发布 wrt MySql AddOn 的计划成比例的当前数据库内存大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:00:53.497

我们的 MySQL 服务出现了与亚马逊网络服务大中断有关的问题。现在应该恢复 MySQL 服务，至少恢复到只读模式。我们正在密切跟踪情况。

您看到的错误不太可能与数据库大小问题有关。

# android - android：附加音频

> ID：11275191
> 
> 赞同：3
> 
> 时间：2012-06-30T15:10:26.310
> 
> 标签：android, audio

我有多个文件，我使用 mediaplayer 在我的 android 代码中播放。我希望它们一个接一个地播放。

有没有办法附加我使用 MediaPlayer（或类似）播放的音频？或者有没有办法在播放媒体文件结束时执行代码？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:18:41.083

您必须使用[MediaPlayer.OnCompletionListener()](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)：

```
mPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {
        //you can play the another audio file here
    }
}); 
```

# asp.net - 来自 ASP.NET 中的 Web 用户控件的事件冒泡

> ID：11275195
> 
> 赞同：5
> 
> 时间：2012-06-30T15:10:48.630
> 
> 标签：asp.net, user-controls, event-bubbling

我有两个用户控件 - PageDefault.aspx 中的 UserControl1.ascx 和 UserControl2.ascx：

如何使用事件冒泡调用方法（ `GetLabelText() in UserControl1.ascx`） ？`UserControl2.ascx`

这是我的示例代码 - 当我单击按钮 ( `UserControl2Button1 in UserControl1.ascx`) - 我想调用该方法`GetLabelText() from UserControl2.ascx`- 使用事件冒泡。

页面默认.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="PageDefault.aspx.cs" Inherits="TelerikAjaxEvents.PageDefault" %>
<%@ Register TagPrefix="uc" TagName="UserControl1" Src="~/UserControl1.ascx" %>
<%@ Register TagPrefix="uc" TagName="UserControl2" Src="~/UserControl2.ascx" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Page Default</title>
</head>
<body>
    <form id="form1" runat="server">
        UserControl1:
        <uc:UserControl1 ID="UserControl1" runat="server" />

        UserControl2:
        <uc:UserControl2 ID="UserControl2" runat="server" />

    </form>
</body>
</html> 
```

用户控件1.ascx

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="UserControl1.ascx.cs" Inherits="TelerikAjaxEvents.UserControl1" %>
<asp:Label ID="UserControl1Label1" runat="server"></asp:Label> 
```

UserControl1.ascx.cs

```
public partial class UserControl1 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public void GetLabelText() 
        {
            UserControl1Label1.Text = "Text is Visible";
        }
    } 
```

用户控件2.ascx

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="UserControl2.ascx.cs" Inherits="TelerikAjaxEvents.UserControl2" %>
<asp:Button ID="UserControl2Button1" runat="server" Text="Send" 
    onclick="UserControl2Button1_Click" /> 
```

UserControl2.ascx.cs

```
public partial class UserControl2 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void UserControl2Button1_Click(object sender, EventArgs e)
        {
            //Call method from UserControl1 (GetLabelText()) - Show Label text - USING BUBBLE EVENT
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T15:33:54.303

有很多方法可以解决这个问题。Mark 的回答暗示了使用 System.Web.UI.Control 基本控件的内置功能部分进行的经典事件冒泡。但是，公开您自己的事件、绑定到它并通过控件层次结构冒泡事件是一个简单的练习。有关在 ASP.NET 中使用 BubbleEvent 的更多详细信息，请阅读以下内容。请记住，这两篇 MSDN 文章都是为 .NET 1.1 编写的

[冒泡事件](http://msdn.microsoft.com/en-us/library/aa719644%28v=VS.71%29.aspx)

[事件冒泡控制示例](http://msdn.microsoft.com/en-us/library/aa720044%28v=VS.71%29.aspx)

K. Scott Allen 在他的帖子中很好地展示了“事件冒泡”实现的样子： [ASP.NET (C#) 中的 Web 用户控件中的事件冒泡](http://odetocode.com/code/94.aspx)。请参阅以下对您的示例的修改以获取灵感。

带有 GetLabelText() 的 UserControl1

```
public partial class UserControl1 : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public void GetLabelText() 
    {
        UserControl1Label1.Text = "Text is Visible";
    }
} 
```

UserControl2 具有公开的 BubbleClick 事件处理程序，调用者可以订阅。

```
public partial class UserControl2 : System.Web.UI.UserControl
{
    protected Button UserControl2Button1;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public event EventHandler BubbleClick;

    protected void OnBubbleClick(EventArgs e)
    {
        if(BubbleClick != null)
        {
            BubbleClick(this, e);
        }
    }      
    protected void UserControl2Button1_Click(object sender, EventArgs e)
    {
        // do some stuff
        OnBubbleClick(e);
    }
} 
```

PageDefault 订阅 UserControl2 的 BubbleClick 事件处理程序并执行 UserControl1.GetLabelText()

```
public partial class PageDefault : WebPage
{
    UserControl1 userControl1;
    UserControl2 userControl2;

    protected void Page_Load(object sender, EventArgs e)
    {
        UserControl2.BubbleClick += RootBubbleClickHandler;
    }

    protected void RootBubbleClickHandler(object sender, EventArgs e)
    {
        if (sender is UserControl2)
        {
            // subscribe UserControl1 to UserControl2 click event and do something
            userControl1.GetLabelText();
        }

        // check for other controls with "BubbleClicks"         
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T17:34:32.723

事件冒泡是 ASP.NET WebForms 中一个鲜为人知的概念。它确实存在（并且被大多数数据绑定控件使用），但经常被误认为是“在用户控件中实现事件”的更简单概念（就像 K Scott Allen 所做的那样）。

事件冒泡的核心是事件在控制层次结构中向上传播，直到它被处理或到达根。这允许处理程序代码的一些集中化。它是使用 Control.RaiseBubbleEvent 和 Control.OnBubbleEvent 方法实现的。主要用例是带有很多子控件的控件（想想Repeaters、ListViews 等）。不是订阅每个单独的控件，Repeater 将它们全部捕获在它的 OnBubbleEvent 中并为它们引发一个 ItemCommandEvent。

如果您真的想使用事件冒泡（与 K. Scott 的示例相反），它看起来像：

```
class Page {
    override bool OnBubbleEvent(object sender, EventArgs e) {
         var btn = sender as Button;
         if (btn == null) return false;

         // You may want to do further checking that the source is what you want
         // You could use CommandEventArgs to do this
         this.uc1.GetLabelText();
         return true;
    }
} 
```

事件的顺序是这样的：

```
- Button Clicked
- Button RaiseBubbleEvent
- UserControl OnBubbleEvent returns false (default, since you didn't override)
- Page OnBubbleEvent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:19:40.617

您可以尝试在 PageDefault.aspx 上将 UserControl1 声明为公共属性（例如“UserControl1”），然后在 UserControl2 中使用`Parent.Page.UserControl1.GetLabelText()`？

# php - php curl http 405错误心灵在线api

> ID：11275198
> 
> 赞同：1
> 
> 时间：2012-06-30T15:11:07.427
> 
> 标签：php, http, soap, curl, server-error

我正在尝试连接到 Mind Body Online API（他们的论坛目前已关闭，所以我来到这里）。下面是我正在使用的代码。我收到这个：

服务器错误 405 - 不允许用于访问此页面的 HTTP 谓词。您正在查找的页面无法显示，因为尝试访问的方法（HTTP 动词）无效。

代码：

```
//Data, connection, auth
    $soapUrl = "http://clients.mindbodyonline.com/api/0_5/ClassService.asmx?WSDL";
    // xml post structure

    $xml_post_string = '<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://clients.mindbodyonline.com/api/0_5/GetClasses">
            <soapenv:Header/>
            <soapenv:Body>
               <GetClasses>
                  <Request>
                     <SourceCredentials>
                        <SourceName>{username}</SourceName>
                        <Password>{password}</Password>
                        <SiteIDs>
                           <int>{siteid}</int>
                        </SiteIDs>
                     </SourceCredentials>
                     <XMLDetail>Basic</XMLDetail>
                     <PageSize>10</PageSize>
                     <CurrentPageIndex>0</CurrentPageIndex>
                     <SchedulingWindow>true</SchedulingWindow>
                  </Request>
               </GetClasses>
            </soapenv:Body>
         </soapenv:Envelope>';

       $headers = array(
                    "Content-type: text/xml;charset=\"utf-8\"",
                    "Accept: text/xml",
                    "Cache-Control: no-cache",
                    "Pragma: no-cache",
                    "SOAPAction: http://clients.mindbodyonline.com/api/0_5/GetClasses", 
                    "Content-length: ".strlen($xml_post_string),
                ); //SOAPAction: your op URL

        $url = $soapUrl;

        // PHP cURL  for https connection with auth
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_post_string); // the SOAP request
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

        // converting
        $response = curl_exec($ch); 
        curl_close($ch);

        var_dump($response);

        // converting
        //$response1 = str_replace("<soap:Body>","",$response);
        //$response2 = str_replace("</soap:Body>","",$response1);

        // convertingc to XML
        //$parser = simplexml_load_string($response2);
        // user $parser to get your data out of XML response and to display it. 
```

任何帮助都会很棒，如果有人有任何使用他们的 API 的经验，我是第一次 ;)

这是我要离开的堆栈上的帖子： [PHP中的SOAP请求](https://stackoverflow.com/questions/7120586/soap-request-in-php)

编辑：

var转储响应：

```
string(733) "soap:ServerSystem.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.NullReferenceException: Object reference not set to an instance of an object. at mb.API._0_5.ClassService.GetClasses(GetClassesRequest Request) in e:\Builds\1\mb\mb-clients_stageclients\Sources\mb-clients\API\0_5\ClassService.asmx.cs:line 226 --- End of inner exception stack trace ---" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-09T19:02:10.207

这对我有用

```
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://api.mindbodyonline.com/0_5/ClientService.asmx",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "POST",
  CURLOPT_POSTFIELDS => "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n  <soap:Body>\r\n    <GetClients xmlns=\"http://clients.mindbodyonline.com/api/0_5\">\r\n      <Request>\r\n        <SourceCredentials>\r\n                        <SourceName>xxxxxx</SourceName>\r\n                        <Password>xxxxx=</Password>\r\n                        <SiteIDs>\r\n                           <int>-99</int>\r\n                        </SiteIDs>\r\n                     </SourceCredentials>\r\n                     <ClientIDs>\r\n          <string></string>\r\n        </ClientIDs>\r\n                             <XMLDetail>Full</XMLDetail>\r\n\r\n        <SearchText>ccc@ccc.com</SearchText>\r\n      </Request>\r\n    </GetClients>\r\n  </soap:Body>\r\n</soap:Envelope>",
  CURLOPT_HTTPHEADER => array(
    "cache-control: no-cache",
    "content-type: text/xml",
    "soapaction: http://clients.mindbodyonline.com/api/0_5/GetClients"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
} 
```

# python - 如何覆盖列表方法以在 python 中进行向量加减？

> ID：11275201
> 
> 赞同：0
> 
> 时间：2012-06-30T15:11:27.833
> 
> 标签：python, list, operators, subclass

我最初将其实现为围绕列表的包装类，但我对需要提供的**operator () 方法的数量感到恼火，因此我尝试简单地对列表进行子类化。**这是我的测试代码：

```
 class CleverList(list):

        def __add__(self, other):
            copy = self[:]
            for i in range(len(self)):
                copy[i] += other[i]
            return copy

        def __sub__(self, other):
            copy = self[:]
            for i in range(len(self)):
                copy[i] -= other[i]
            return copy

        def __iadd__(self, other):
            for i in range(len(self)):
                self[i] += other[i]
            return self

        def __isub__(self, other):
            for i in range(len(self)):
                self[i] -= other[i]
             return self

    a = CleverList([0, 1])
    b = CleverList([3, 4])
    print('CleverList does vector arith: a, b, a+b, a-b = ', a, b, a+b, a-b)

    c = a[:]
    print('clone test: e = a[:]: a, e = ', a, c)

    c += a
    print('OOPS: augmented addition: c += a: a, c = ', a, c)

    c -= b         
    print('OOPS: augmented subtraction: c -= b: b, c, a = ', b, c, a) 
```

正常的加法和减法以预期的方式工作，但是增强的加法和减法存在问题。这是输出：

```
 >>> 
    CleverList does vector arith: a, b, a+b, a-b =  [0, 1] [3, 4] [3, 5] [-3, -3]
    clone test: e = a[:]: a, e =  [0, 1] [0, 1]
    OOPS: augmented addition: c += a: a, c =  [0, 1] [0, 1, 0, 1]
    Traceback (most recent call last):
      File "/home/bob/Documents/Python/listTest.py", line 35, in <module>
        c -= b
    TypeError: unsupported operand type(s) for -=: 'list' and 'CleverList'
    >>> 
```

是否有一种简洁的方法可以让增强型运算符在此示例中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T15:19:35.577

您没有覆盖该[`__getslice__`方法](http://docs.python.org/reference/datamodel.html#object.__getslice__)，因此您`c`是`list`：

```
>>> a = CleverList([0, 1])
>>> a
[0, 1]
>>> type(a)
<class '__main__.CleverList'>
>>> type(a[:])
<type 'list'> 
```

这是一个现成的版本：

```
def __getslice__(self, *args, **kw):
    return self.__class__(super(CleverList, self).__getslice__(*args, **kw)) 
```

# javascript - 铬 Javascript

> ID：11275209
> 
> 赞同：0
> 
> 时间：2012-06-30T15:13:17.407
> 
> 标签：javascript, google-chrome

我的页面上有两个跨度，class='hidden'，然后是一些 javascript 在满足条件时删除该类，它在 9/10 和 firefox 中工作正常，但当我在 chrome 中运行该函数时它不能工作chrome JS 控制台我收到消息 TypeError: Cannot read property 'attributes' of null

有人知道发生了什么吗？

```
<script type='text/javascript' >
function showhidden()   {

        var att =document.getElementById('hiddentextbox');
        att.attributes[0].value='';
        att =document.getElementById('hiddentextbox1');
        att.attributes[0].value='';
}</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:17:52.523

尝试通过使用`att.className = ''`而不是你正在做的事情来改变课程，这是我以前从未见过的。

您可能还想查看[jQuery](http://jquery.com/)，它具有良好的内置`.show()`和`.hide()`功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T15:15:36.767

它找不到`document.getElementById('hiddentextbox');`，因此找不到 的属性`null`，因为未找到的元素是`null`。我相信这就是问题所在。

# ruby-on-rails - 如何在 Rails 中获取 URL 的当前控制器？

> ID：11275214
> 
> 赞同：3
> 
> 时间：2012-06-30T15:14:02.333
> 
> 标签：ruby-on-rails, url, twitter-bootstrap

我正在使用此代码通过 Twitter Bootstrap 突出显示当前活动的菜单选项卡：

```
 def nav_link_to(link_text, link_path, options = nil)
    class_name = current_page?(link_path) ? 'active' : ''

    content_tag(:li, :class => class_name) do
      link_to link_text, link_path, options
    end
  end 
```

这当然会使链接处于活动状态，只有当给定的链接是当前页面时。如何更改此功能，以便它为当前控制器下方的任何链接返回“活动”？换句话说，对于 Posts 控制器的所有操作，链接都将处于活动状态？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T15:16:22.057

您可以使用`controller_name`来获取当前控制器的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T12:27:03.247

这可以通过以下方式解决：

`Rails.application.routes.recognize_path(link_path)[:controller]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-07T07:39:10.720

`params[:controller]`返回控制器名称及其命名空间。

如果您只想获取控制器名称，则应使用`controller.controller_name`.

```
class Admin::Posts; end

# from the view
params[:controller] 
=> 'admin/posts'

controller.controller_name
=> 'posts' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T17:35:26.057

不确定我是否正确阅读，但您不应该使用 get 参数来查看当前控制器。

你试过使用`request.path`吗？换句话说，检查以下任何链接是否在其路径中包含“request.path”...

# android - Android，加载没有 OutOfMemory 的大图像

> ID：11275215
> 
> 赞同：1
> 
> 时间：2012-06-30T15:14:18.597
> 
> 标签：android, bitmap, out-of-memory

在我的应用程序中，我正在加载要显示的 1940*1740 图像（它是可滚动的）。问题是我总是遇到异常

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我知道每个应用程序有 24M 的限制，我该怎么办？将我的图像分成几部分并仅在用户滚动边框时加载它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:34:21.747

我得出的结论是，API 级别 7 是不可能的。从 Android 2.3.3 开始，我们可以使用类 BitmapRegionDecoder。

# java - Jlabel ImageIcon 在负坐标中绘制

> ID：11275216
> 
> 赞同：1
> 
> 时间：2012-06-30T15:14:31.320
> 
> 标签：java, swing, graphics, jlabel, imageicon

我的图形引擎库中有这段代码：

```
package WG;

import java.awt.*;
import java.awt.image.*;

import javax.swing.*;

public class window {

public static boolean running=true;

public static int WIDTH = 800, HEIGHT = 600;
public static String TITLE = "New Window";
public static JFrame frame;

public static int[] pixels;
public static BufferedImage img;
public static Thread thread;

public window(){}

public static void create() {

    img = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
    pixels = ((DataBufferInt)img.getRaster().getDataBuffer()).getData();

    frame = new JFrame("WINDOW");  
    //frame.setResizable(false);
    frame.setLayout(new FlowLayout(FlowLayout.LEADING,0,0));
    frame.add(new JLabel(new ImageIcon(img)));
    frame.pack();

    //frame.setSize(WIDTH, HEIGHT);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}

public void render() {
        BufferStrategy bs=frame.getBufferStrategy();
        if(bs==null){
            frame.createBufferStrategy(2);
            return;
        }

        Graphics g= bs.getDrawGraphics();  
        g.drawImage(img, 0,0, WIDTH, HEIGHT, null);
        g.dispose();
        bs.show();
}

public static void clear_screen(){
    for (int i = 0; i < WIDTH * HEIGHT; i++)
        pixels[i] =0;

};
 } 
```

和我的主要java文件中的这段代码：

```
import WG.*;

public class Main_window{

private static boolean running = true;
public static window wind = new window();
public static Thread thread;

public static void main(String[] args) {
    window.create();
    start();
}
public static void start() {
    while (running) {
        window.clear_screen();
        Forms.drawRect(0, 0, 100, 100);//my own method
        wind.render();
    }
}
 } 
```

**我在这里有两个问题：**

1-->窗口上的图像显示在负坐标上（矩形不是100x100）

如果我重新调整窗口大小，图像试图在 0 0 坐标处绘制，但随后又在负坐标处绘制。
![在此处输入图像描述](../Images/1eed3dea0178751be7f228d4e1c016d6.png)

2-->我得到2个不同的错误：

a) 组件必须是有效的对等体`Graphics g= bs.getDrawGraphics();` b) 缓冲区尚未在`bs.show();`

这些问题是什么？

我在 YouTube[这个频道](http://www.youtube.com/playlist?list=ELmvNdIhZY1t4&feature=plcp)上看到他使用了 Canvas 和其他东西，但他没有收到任何错误（我知道不要将挥杆与 awt 混合）

**编辑**

```
 //from graphics library
    @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawImage(img, 0, 0, WIDTH, HEIGHT, null);
            g.dispose();
        }
    //from the main file
    public static void start() {
            while (running) {
                window.clear_screen();  
                Forms.drawRect(0, 0, 100, 100);//my own method
                wind.frame.repaint();
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:26:09.077

在主机的对等组件存在之前，您的`Graphics`上下文`g`无效。抛出异常是因为程序随意写入主机内存或设备会导致严重问题。

取而代之的是 override `paintComponent()`，如此[处](https://stackoverflow.com/a/3256941/230513)和[此处](https://stackoverflow.com/a/11233735/230513)所示，您可以在局部坐标中完全控制组件的几何形状。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:29:33.327

坐标没什么问题。看来您使用了错误的对象。**如果从整个 JFrame 的顶部测量，**正方形正好是 100x100 ，因此负坐标不是问题。将组件添加到 JFrame 的内容窗格而不是 JFrame 本身。

代替：

```
frame.add(new JLabel(new ImageIcon(img))); 
```

和

```
frame.getContentPane().add(new JLabel(new ImageIcon(img))); 
```

可能还有更多内容，但这当然是起点。如有其他问题，请查阅[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html)

# jakarta-ee - 无法调用 Tomcat 管理器：无法使用不可重复的请求实体重试请求

> ID：11275217
> 
> 赞同：0
> 
> 时间：2012-06-30T15:14:39.777
> 
> 标签：jakarta-ee, maven, tomcat7, maven-tomcat-plugin

我正在使用**tomcat7-maven-plugin**将应用程序部署到远程服务器

**1-插件配置：**

```
 <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0-beta-1</version>
            <configuration>
              <server>pb</server>
              <url>http://mydomain:8080/manager/html</url>
            </configuration>
        </plugin> 
```

**2-settings.xml：**

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <servers>
  <server>
        <id>pb</id>
        <username>myuser</username>
        <password>mypass</password>
  </server>
  </servers>

</settings> 
```

我正在使用命令：`mvn tomcat7:deploy`

我可以看到部署了war文件：

```
[INFO] Deploying war to http://mydomain.com:8080/myapp
Uploading: http://mydomain.com:8080/manager/html/deploy?path=%2Fmyapp
Uploaded: http://mydomain.com:8080/manager/html/deploy?path=%2Fmyapp (5932 KB at 18.9 KB/sec) 
```

之后我收到错误：

```
Cannot invoke Tomcat manager:Cannot retry request with a non-repeatable request entity. 
```

请告知我为什么会收到此错误，以及如何解决它。

**详细异常：**

```
org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke Tomcat manager
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke Tomcat manager
        at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:152)
        at org.apache.tomcat.maven.plugin.tomcat7.AbstractWarCatalinaMojo.execute(AbstractWarCatalinaMojo.java:71)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        ... 17 more
Caused by: org.apache.http.client.ClientProtocolException
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:926)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:822)
        at org.apache.tomcat.maven.common.deployer.TomcatManager.invoke(TomcatManager.java:718)
        at org.apache.tomcat.maven.common.deployer.TomcatManager.deployImpl(TomcatManager.java:681)
        at org.apache.tomcat.maven.common.deployer.TomcatManager.deploy(TomcatManager.java:363)
        at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployWarMojo.deployWar(AbstractDeployWarMojo.java:88)
        at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployMojo.invokeManager(AbstractDeployMojo.java:87)
        at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:143)
        ... 20 more
Caused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.
        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:686)
        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:515)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:923) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:26:03.653

是的，这是 2.0-beta-1 版本的问题。请参阅[https://issues.apache.org/jira/browse/MTOMCAT-116](https://issues.apache.org/jira/browse/MTOMCAT-116) 您可以尝试 2.0-SNAPSHOT 版本来测试修复。

# php - 为什么这不增加我想要的方式？

> ID：11275220
> 
> 赞同：0
> 
> 时间：2012-06-30T15:15:00.390
> 
> 标签：php, javascript, jquery, ajax, get

我正在用 jQuery 脚本编写一些内容，该脚本将从 php 文档中打印一个月：

```
 var count = 0;

$(".nextMonth").click( function(event) {
    event.preventDefault();
    count++;
    $("#result").load('index.php?month=' + count);
});

$(".prevMonth").click( function(event) {
    event.preventDefault();
    count--;
    $("#result").load('index.php?month=' . count);
}); 
```

我可以毫无问题地获得 index.php?month=1，但是当我再次按下 .nextMonth 按钮时，它会失败。我不知道问题是什么，我将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:19:13.430

我在以下行中看到您的语法错误：

```
 $("#result").load('index.php?month=' . count); 
```

您应该使用 + 而不是 . 所以：

```
 $("#result").load('index.php?month=' + count); 
```

试试这个也许它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:19:48.920

您是否在浏览器控制台中检查了代码中的任何错误。

您的代码中有错误。请改成这样：

这一行：

```
$("#result").load('index.php?month=' . count); 
```

应更改为 .

```
$("#result").load('index.php?month=' + count); 
```

我找不到任何其他错误。完整代码：

```
 var count = 0;

$(".nextMonth").click( function(event) {
    event.preventDefault();
    count++;
    $("#result").load('index.php?month=' + count);
});

$(".prevMonth").click( function(event) {
    event.preventDefault();
    count--;
    $("#result").load('index.php?month=' + count);
}); 
```

希望这可以帮助。:)

# css - DIV 背景没有正确拉伸

> ID：11275222
> 
> 赞同：1
> 
> 时间：2012-06-30T15:15:17.840
> 
> 标签：css, html, stretch

我有以下 HTML 代码：

```
<style>
body {
background:#547c15;
margin:0;
padding:0;
}
#inner {
margin:0 auto;
width:1298px;
}
#outer {
background:#000;
}
</style>
<div id="outer">
  <div id="inner">
    <br><br><br><br><br><br><br><br><br><br>
  </div>
</div> 
```

当我在宽屏显示器上观看时，一切都很好。但是，当我在旧的 CRT 显示器上以 800X600 分辨率查看此内容时，外部 div 并没有完全延伸到内部 div 上。底部有一个滚动条（由于内部 div 为 1298px），但外部 div 仅拉伸到 800px（见下图）。

![DIV 拉伸问题](../Images/84aa7e41fc529a48dfca7fd138f80db6.png)

有人可以帮我解决这个问题吗？我希望外部 div 始终为 100% 宽度（即，即使有水平滚动条，背景颜色/图像也应始终完全伸展）。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:19:21.307

给外部 div`width:100%;`使其调整大小以包含内部内容，我认为它会起作用，如果它不起作用而不是使用`min-width:1298px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:26:58.863

在你的#outer 添加这个：

```
 float:left; width:100%; 
```

# c++ - 将 std::wstring 转换为 SQLWCHAR *

> ID：11275225
> 
> 赞同：2
> 
> 时间：2012-06-30T15:15:24.440
> 
> 标签：c++, sql, odbc, wstring

我有一个 C++ 程序，它动态创建一个查询字符串，然后将其传递给`SQLExecDirect`调用以使用 ODBC 连接到数据库。我在将变量从一个函数传递到另一个函数时遇到问题，所以我认为我一定缺少一些基本的东西？

在`ConstructQuery`函数（返回 type `SQLWCHAR *`）中，我有：

```
std::wstring test = L"test string"; //This test string will actually be several concatenated strings
SQLWCHAR *statement = (SQLWCHAR *)test.c_str();
std::wcout << statement;
return statement; 
```

这将按预期打印语句变量。但是当我像这样将变量传递给我的主函数时：

```
SQLStatement = ConstructQuery(SQLStatement);
std::wcout << SQLStatement; 
```

我没有输出。

如果，而不是`statement = (SQLWCHAR *)test.c_str()`;

我用：`statement = L"test string"`;

该变量通过正常，但我无法在函数的早期部分动态创建“测试字符串”查询。

我很难找到很多关于`SQLWCHAR`. 我猜我可能转换`std::wstring`不`SQLWCHAR *`正确？另一种选择是重写该函数，以便所有这些`wstring`都`SQLWCHAR *`以这种方式进行连接 - 但我不确定这是可能的，即使它是我不认为它是首选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:10:57.367

您正在返回一个指向在函数 ConstructQuery 末尾超出范围的局部变量的指针。按值返回 a`std::wstring`然后从那里开始工作可能是最简单的。

# dns - Tumblr 自定义域/CNAME

> ID：11275231
> 
> 赞同：2
> 
> 时间：2012-06-30T15:16:03.720
> 
> 标签：dns, tumblr, cname

我在 Tumblr (faithfullforever.tumblr.com) 上有一个博客，它使用自定义域 www.mariannefaithfull.fm。昨天我很快停用了 Tumblr 上的自定义域以导出内容。

当我尝试在 Tumblr 上重新激活自定义域时，它不再起作用，而且看起来它们改变了您在域提供商上设置东西的方式，所以我不得不在那里摆弄东西。我设法更改了 IP，使其指向 Tumblr。

当你打开 www.mariannefaithfull.fm 时，你会进入 Tumblr，但不是我的博客。当我测试域时，Tumblr 设置页面给了我以下消息。

[![](../Images/826f3b877801fa91b5f85a54fb8de806.png)](https://i.stack.imgur.com/GktCD.png)

我只是想确保这不是我在提供程序上设置的方式的问题，而只是长达 72 小时的等待期。[Tumblr 的常见问题解答](https://tumblr.zendesk.com/hc/en-us/articles/231256548-Custom-domains)对我没有太大帮助，我对 Google 的研究也没有让我进一步了解如何设置 CNAME。

这就是我的提供商上更改记录的面板的样子。为了让 Tumblr 可以读取 CNAME，我到底需要更改/填写什么？

名称、TTL、类型、优先级、值

[![看图片](../Images/3ec58fd11844daf803a52f15e8a0c4cd.png)](https://i.stack.imgur.com/LvIyM.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:00:45.167

检查[http://www.whatsmydns.net/](http://www.whatsmydns.net/)。IP 仍然指向 tumblr 还是您自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:18:46.950

就在几天前，我遇到了完全相同的问题。虽然现在已经恢复正常，所以我建议等到明天；它应该自行解决:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T09:25:24.777

从您提供的 DNS 接口的屏幕截图来看，我认为您需要以下内容：

```
Name   TTL     Type    Priorität   Wert
www    10800   CNAME               domains.tumblr.com. 
```

您的子域是`www`并且您希望它指向`domains.tumblr.com.`

此处的尾随点很重要，否则`www`将成为 的 CNAME `domains.tumblr.com.mariannefaithfull.fm`，这将无济于事 :o)

# ruby-on-rails - 让活动脚手架在没有 :mark 动作的情况下工作

> ID：11275235
> 
> 赞同：1
> 
> 时间：2012-06-30T15:16:35.220
> 
> 标签：ruby-on-rails, activescaffold

我目前正在使用 Rails 3.2 和 Active Scaffold 进行项目。我为我的一个模型创建了一个简单的控制器，它是这样编码的：

```
 class StudentsController < ApplicationController
  before_filter :authenticate_user!
  active_scaffold :student do |conf|
    conf.label = "Students"
    conf.columns = [:last_name, :first_name, :age, :gender, :grade_level, :current_grade]
    conf.create.columns = [:last_name, :first_name, :age, :gender, :grade_level]
    conf.update.columns = [:last_name, :first_name, :age, :gender, :grade_level]
    conf.columns[:current_grade].actions_for_association_links = [:show]
    conf.columns[:current_grade].sort_by :sql => "grade_level"
    conf.actions = [:list, :search, :create, :update, :show, :delete]
    list.columns.exclude :customer_id, :grade_level
    list.sorting = {:last_name => 'ASC'}
  end

  def conditions_for_collection
    ["customer_id = #{current_user.customer_id}"]
  end

  def before_create_save(record)
    record.customer_id = current_user.customer_id

  end
end 
```

我的问题是：当我删除一条记录时，我收到一条消息，指出“$record_name 无法删除”。然而，如果我刷新页面，我发现该记录实际上已被删除。检查我的日志文件后，我看到一条错误消息：

```
undefined method `as_marked=' for #<Student:0x0000000554c1d0> 
```

我尝试将 :mark 添加到我的操作列表中，这确实解决了问题。但是，我不希望标记/复选框列出现在我的列表中。

有任何想法吗？这是我第一次使用主动式脚手架，我觉得这……很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:12:31.583

我发现如果我将它添加到我的模型中：

```
 def as_marked= (x)
  end 
```

它可以工作，但在我的列表中没有显示标记/复选框列。

作为记录，我讨厌这个解决方案:)如果我想出更好的东西，我会确保回来更新这个答案。

# objective-c - 如何在 tabBarcontroller 上创建 Dropbox 样式的加载屏幕？

> ID：11275246
> 
> 赞同：-1
> 
> 时间：2012-06-30T15:17:52.597
> 
> 标签：objective-c, uitabbarcontroller, dropbox

我试过这样做：

```
 self.window.rootViewController = self.tabBarController;
    [self.tabBarController.view addSubview: myViewController.view];
    [self.window makeKeyAndVisible]; 
```

但是，子视图并没有覆盖整个屏幕，一些标签栏仍然显示在底部。另外，如何在应用程序完成加载后让加载屏幕消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:20:18.683

尝试将加载视图作为子视图添加到窗口。这将涵盖除状态栏之外的所有内容（您无法涵盖，只能隐藏）。

# r - 在 R 中使用 Unicode

> ID：11275249
> 
> 赞同：1
> 
> 时间：2012-06-30T15:18:30.060
> 
> 标签：r, unicode-string

我将 MySQL 表中的文本读入 R 数据框。（使用 RODBC、sqlFetch）。有两个问题：

1.  我如何确定 R 是否已将其读取为 utf-8？它是字符类型，但显示编码的功能是什么？
2.  如何计算 R 中 Unicode 字符串中的字符数？

该`length`函数不适用于 Unicode，并且我认为总是返回 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:37:08.243

您应该能够通过以下方式读取编码（假设已指定）：

```
Encoding(x) 
```

字符数可以通过以下方式确定：

```
nchar(x) 
```

# javascript - jquery - 使用 event.stopPropagation()

> ID：11275250
> 
> 赞同：1
> 
> 时间：2012-06-30T15:18:32.487
> 
> 标签：javascript, jquery

文档准备好后，我通过发布请求从服务器获取一些数据，并**通过 append 将其作为标签填充到 HTML 中**。当您单击该标签时，将显示一个注释文本区域。当您单击该`document`部分时，**文本区域将关闭**。这里的问题是我无法在textarea中输入文本，当我点击里面时，它被隐藏了。我尝试使用`event.stopPropagation()`但没有用。

这是我的jQuery代码：

```
$.post("/person/keywords/get/", function(data){
    for(i=0; i<data.length; i++)
    {
        count = count + 1;
        $(".keywords-set").append('<div class="keyword-item"><span class="keyword" id="keyword-'+count+'">'+data[i]+'</span><textarea class="comment" id="comment-'+count+'"></textarea></div>');
    }
});

$(".keywords-set").on('click', "[id^=keyword]", function(event) {
    event.preventDefault();
    i = $(this).attr("id");
    i = i.split('-').pop();
    $("#comment-"+i).show();
    return false;
});

$(".comment").click(function(event) {
    event.stopPropagation();                     
});

$(document).click(function() {
    $(".comment").hide();
}); 
```

如需完整的 HTML 和 javascript 代码，请在此处查看：[https ://gist.github.com/3024186](https://gist.github.com/3024186)

它在[jsfiddle](http://jsfiddle.net/hT25Q/)中工作， 但不在我的本地主机中。你能说出原因吗，为什么会这样？

谢谢！

**更新**

我也试过这个

```
$(".keywords_set").on('click', ".comment", function(event) {
    event.stopPropagation();
}); 
```

`event.stopPropagation()`不适用于通过 ajax 更新的 HTML 元素。但是适用于正常（已经给定的）元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:33:29.610

这样做时：

```
$(".keywords_set").on('click', ".comment", function(event) { 
```

您必须了解您在元素“.keywords_set”中捕捉到事件，并且您将在那里检查它是否通过“.comment”冒泡

这意味着在“.keywords_set”和“.comment”之间设置的任何其他“点击”事件也将激活。

停止传播或返回 false 只会影响“.keywords_set”对文档的冒泡。

你可以这样做：

```
$(document).click(function() {
   if($(".comment:hover").length==0){
      $(".comment").hide();
   }
}); 
```

编辑：回复：“嘿，该代码有效，我不知道您是如何通过提及 .comment.length 来做到这一点的，您能对此进行更多描述吗？”

当您执行任何 jquery 选择器时，将返回一个数组。因此，如果您`$(".comment")`使用“.comment”类执行所有 html 节点，将在列表中返回给您 [obj1, obj2, ..., objn]

当你这样做时，`$(".comment:hover")`你要求 jquery 选择任何具有类“comment”的元素，该元素当前也有鼠标在它上面。这意味着如果返回的列表的长度`$(".comment:hover")`大于零，那么您在“.comment”中单击时发现了一个气泡。

尽管返回 false 或停止传播也应该有效。（不知道为什么在你的情况下它不起作用，虽然我没有看太多完整的代码）

编辑2：

我懒得阅读完整的代码。但是当您为评论设置点击事件时，评论还不存在。所以您添加的新评论不会被您的点击处理程序捕获。将它添加到 ajax 回调中，它将起作用:)

编辑3：还有一件事：

你没有得到副作用，因为即使你重新定义的点击也只有停止传播，但你应该在返回 false 之前添加停止传播

```
$(".keywords_set").on('click', ".comment", function(event) { 
```

因为在实践中，您拥有的所有其他评论将处理您添加的点击事件的 N 次，以进行多次处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:45:56.993

由于 post 方法是异步的。您在 $(".comment") 存在之前绑定它。移动

```
$(".comment").click(function(event) {
        event.stopPropagation();                     
        }); 
```

后

```
$(".keywords-set").append('<div class="keyword-item"><span class="keyword" id="keyword-'+count+'">'+data[i]+'</span><textarea class="comment" id="comment-'+count+'"></textarea></div>'); 
```

应该管用。

# r - Knit2html 不复制 R Studio 中 Knit HTML 按钮的功能

> ID：11275255
> 
> 赞同：4
> 
> 时间：2012-06-30T15:18:59.273
> 
> 标签：r, ubuntu, knitr, rstudio

我正在尝试在 Ubuntu 10.04 中编写一个 Bash 脚本，该脚本打开一个导出 CSV 的 Python 文件，然后运行以下 Rscript，目标是导出带有 Dashboard.Rmd 绘图的 HTML：

```
require(knitr)
setwd('/home/sensors/Desktop/')
knit2html('Dashboard.Rmd')
browseURL('Dashboard.html') 
```

Dashboard.Rmd 是一个 R 降价，它从第一步开始在 csv 上调用 read.csv，制作数据框并创建绘图，但该部分工作正常。据此[，](https://stackoverflow.com/questions/10646665/how-to-convert-r-markdown-to-html-i-e-what-does-knit-html-do-in-rstudio-0-9 "Knit HTML 在 RStudio 中的作用")我认为Rscript应该复制在R Studio中按下“Knit HTML”的动作。但是，它创建的 html 与上次按下 Knit HTML 时相同；即即使CSV 不同，html 也不会反映更改。

我还尝试为 knit 和 markdownToHTML 使用单独的行，效果相同。执行 knit 时，它似乎没有从 Rmd 获取代码。当我在打开 Dashboard.Rmd 的情况下将该 Rscript 中的命令输入 R Studio 的控制台时，它*确实会正确更新 html。*但是我不确定如何将其转换为 Bash 脚本。我还尝试了使用 envir=new.env()、envir=R_GlobalEnv 和 envir=parent.frame() 的 knit2html，但没有成功。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:33:37.513

所以事实证明这是一个人工制品`cache=TRUE`—— HTML 文件没有改变，因为一切都被缓存了。

# visual-studio-2010 - SharePoint - 在没有共享点服务器的独立机器上开发

> ID：11275256
> 
> 赞同：2
> 
> 时间：2012-06-30T15:19:03.377
> 
> 标签：visual-studio-2010, visual-studio, sharepoint, windows-7, sharepoint-2010

我想开始学习 SharePoint，我需要我的系统设置。

我知道我需要一个 SharePoint 服务器，无论是在物理服务器还是虚拟机上。我过去曾为我工作的公司做过这件事。但是现在想用我的系统开发但是需求不符合SharePoint服务器规范

我在 serverfault 上看到了这个链接和其他几个链接，他们总是推荐虚拟机方法

*   [Microsoft.Sharepoint.dll 的位置在哪里](https://stackoverflow.com/questions/332906/where-is-the-location-of-microsoft-sharepoint-dll)

我还获得了 Microsoft Hyper-V 预装虚拟机的链接，但它对我的机器来说太重了。

我读过一篇文章说我应该从 SharePoint 服务器下载 dll 并粘贴到我系统上的副本目录结构中

*   [http://www.techerator.com/2011/02/how-to-perform-sharepoint-development-on-a-client-workstation/](http://www.techerator.com/2011/02/how-to-perform-sharepoint-development-on-a-client-workstation/)

我看到很多开发人员都面临着这个挑战，我想知道现在是否有解决方法。另外，有什么限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:27:04.827

帮自己一个大忙，升级您的开发箱，以便它可以处理带有 SharePoint 的 VM。如今，硬件很便宜，而且支持 SharePoint 的笔记本电脑也不会破坏银行。

当您需要在现实生活场景中调试某些东西时，您花在尝试提出有效的 Gaffa 磁带解决方案上的时间很快就会再次崩溃。那段时间就被浪费了，你希望你已经进行了正确的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T20:36:55.090

查看[CloudShare](http://www.cloudshare.com/)。这是值得的价格。有 14 天的试用期。

# osgi - 我已经在类路径中添加了 tools.jar，为什么仍然抛出 java.lang.NoClassDefFoundError: com.sun.jdi.Bootstrap？

> ID：11275257
> 
> 赞同：1
> 
> 时间：2012-06-30T15:19:10.413
> 
> 标签：osgi, classloader, javassist

我正在使用[javassist](http://www.javassist.org/)的 HotSwap 功能，它需要类路径中的 tools.jar，所以我`-cp tools.jar`在启动我的 OSGi 应用程序时添加了。但是当我`new HotSwap()`在其中一个包的代码中时，

```
 java.lang.NoClassDefFoundError: com.sun.jdi.Bootstrap 
```

被抛出。`com.sun.jdi.Bootstrap`在 tools.jar 中，我已经将它添加到类路径中，并且我验证了它是否有效，因为如果没有，以下代码将不起作用：

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); 
```

HotSwapper 的 Classloader 无法加载类`com.sun.jdi.Bootstrap`？那为什么它在我的 Eclipse 环境中正常工作？（我将 tools.jar 添加到构建路径的库中）

关于为什么 NoClassDefFoundError，任何线索都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:02:35.040

您必须确保系统捆绑包导出此包。例如，在 Felix 中，文件 jre.properties 定义了系统捆绑包导出的包。在那里添加包 com.sun.jdi，它应该可以工作。

在 Eclipse 中，这是在 config.ini 中完成的。您可以使用 org.osgi.framework.system.packages.extra= 定义要导出的其他包。我宁愿不使用 boodelegation=* 因为它也可能导出不需要的包。看：

[http://www.eclipse.org/forums/index.php/m/734358/](http://www.eclipse.org/forums/index.php/m/734358/)

[http://wiki.eclipse.org/Equinox_Boot_Delegation](http://wiki.eclipse.org/Equinox_Boot_Delegation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:32:55.510

在 Equinox 中，您可以将引导委托设置`*`为获得对引导类中所有类的访问权限，有关详细信息，请参阅[此 wiki](http://wiki.eclipse.org/Equinox_Boot_Delegation)。在 3.2 中，它`osgi.compatibility.bootdelegation=true`位于`config.ini`.

# ruby-on-rails - 保存脸书好友？

> ID：11275270
> 
> 赞同：1
> 
> 时间：2012-06-30T15:20:38.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, koala

我正在使用 rails 3 并使用 koala gem 连接到 facebook graph api。我正在使用omniauth 来验证用户。

因此，当新用户登录到站点时， session_controller 会处理新用户：

```
class SessionsController < ApplicationController
def create
  user = User.from_omniauth(env['omniauth.auth'])
  session[:user_id] = user.id
  redirect_to root_url, notice: "Signed in!"
end 
```

create 方法调用 User.rb 模型中的“from_omniauth”类方法，创建一个新用户：

```
class User < ActiveRecord::Base
 has_many :friends

    def self.from_omniauth(auth)
     where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
     user.provider = auth["provider"]
     user.uid = auth["uid"]
     user.name = auth["info"]["name"]
     user.first_name = auth["info"]["first_name"]
     user.last_name = auth["info"]["last_name"]
     user.image = auth["info"]["image"]
     user.email = auth["info"]["email"]
     user.gender = auth["extra"]["raw_info"]["gender"]
     user.location = auth["extra"]["raw_info"]["location"]["name"]          
     user.token = auth["credentials"]["token"]
    end
     user.save!
    end 
```

我还想保存用户 facebook 朋友并将其存储在一个名为朋友的单独表格中，所以我制作了这个朋友模型：

```
class Friend < ActiveRecord::Base
  attr_accessible :name
  belongs_to :user
  validates :user_id, presence: true

  def facebook
    @Facebook ||= Koala::Facebook::API.new(token)
  end

  def add_friends
    facebook { |fb| fb.get_connection("me", "friends") }
  end
end 
```

但是我不知道如何存储用户朋友，我想知道：

*   我如何创建用户并将其存储为朋友
*   我应该在哪里调用 add_friends 方法？
*   fb.get_connection("me", "friends") 返回一个哈希数组，像这样`> [{"name"=>"Johan Gyllenspetz", "id"=>"3624556"}, {"name"=>"Gustaf Josefsson",`。我想存储名称和uid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:56:36.260

我就是这样做的：

```
class User < ActiveRecord::Base
  has_many :friends

  def self.from_omniauth(auth)
    user = where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.first_name = auth["info"]["first_name"]
      user.last_name = auth["info"]["last_name"]
      user.image = auth["info"]["image"]
      user.email = auth["info"]["email"]
      user.gender = auth["extra"]["raw_info"]["gender"]
      user.location = auth["extra"]["raw_info"]["location"]["name"]          
      user.token = auth["credentials"]["token"]
    end
    user.add_friends
    user.save
    user
  end

  def add_friends
    @facebook.get_connection("me", "friends").each do |hash|
      self.friends.where(:name => hash['name'], :uid => hash['id']).first_or_create
    end
  end

  private

  def facebook
    @facebook ||= Koala::Facebook::API.new(token)
  end

end 
```

# ios - iPad 上拆分视图中的一个大工具栏

> ID：11275276
> 
> 赞同：1
> 
> 时间：2012-06-30T15:21:54.827
> 
> 标签：ios, uisplitviewcontroller, ipad

我目前正在将我的 Android 平板电脑应用程序 ( [http://tinyurl.com/cnejnjs](http://tinyurl.com/cnejnjs) ) 移植到 iOS。我的应用程序基本上由左侧的列表视图和右侧的详细视图组成。Xcode 有一个内置的视图控制器（Split View Controller），它似乎为你做了很多工作。

我想在一个大工具栏上制作导航栏，这样我就可以添加多个控件来过滤列表视图（有关用户可以应用的所有过滤器，请参阅 Android 应用程序）。在带有拆分视图控制器的界面构建器中，我找不到将工具栏添加到顶部的方法。看来我可以设置两个导航栏的样式，使它们看起来像一个，但是当用户将设备置于纵向模式时，导航栏的左侧部分将被删除。

我已经设法在 IB 中从头开始构建了一个类似于我想要的视图，但这意味着我不会免费获得所有拆分视图的东西，如果我以后也决定的话，可能会更难制作 iPhone 视图。

![IB自定义视图](../Images/9ccc8a556dbc4e0ef93b76b1be8ebc75.png)

您认为哪种方式最适合这种类型的设计？

# jquery - ul li menu - 让 li:s 填满整个 ul？

> ID：11275282
> 
> 赞同：0
> 
> 时间：2012-06-30T15:22:20.707
> 
> 标签：jquery, html, css

例子：`http://83.254.82.145:8080/android/`

如果您将鼠标悬停在地图上，您会看到一个菜单：

```
<div id="map_menu" style="display: none;">
    <ul>
        <li style="background-color: rgb(0, 0, 0);">
                    <a href="javascript:void(0)" id="fitmarkersonmap" style="color: rgb(248, 248, 248);">Fit markers on map</a>
        </li>
        <li style="background-color: rgb(0, 0, 0);">
            <a href="javascript:void(0)" id="togglemaptypes" style="color: rgb(248, 248, 248);">Toggle map types</a>
        </li>
        <li style="background-color: rgb(0, 0, 0);">
            <a href="javascript:void(0)" id="showpopup" style="color: rgb(248, 248, 248);" class="">Show userlist</a>
        </li>
    </ul>
</div> 
```

当前的CSS：

```
#map_menu ul li {
  float: left;
  height: 40px;
  line-height: 40px;
  padding: 0 15px;
} 
```

如果你增加填充，`0 67px`你会明白我在做什么。有没有办法在不使用javascript的情况下对此进行动态解决？我只是想让 li:s 填满整个 ul，而不是每次添加菜单项时测量自己。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:30:17.073

```
#map_menu ul li {
  float: left;
  height: 40px;
  width: 33%; /* here is the ratio depends on how much <li> you have */
  line-height: 40px;
  text-align: center; /* this makes text in the center of <li> */
}

#map_menu ul li:last-child {
  width: 34%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:25:59.243

如果您希望元素自动填充整个容器的宽度*并且*没有 Javascript，`<table>`那么适合您。否则，无法在保持每个元素的宽度灵活的同时实现 100% 的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:29:55.947

您可以尝试使用 CSS 显示表格属性。

# java - 打开应用程序时未找到 Java 运行时环境错误

> ID：11275283
> 
> 赞同：0
> 
> 时间：2012-06-30T15:22:42.087
> 
> 标签：java

我的笔记本电脑上安装了 Windows 7 64 位操作系统...当我打开应用程序时出现错误：

> “未找到 Java 运行时环境”

在错误对话框中。

我试图通过重新安装 JRE 和 Java 来解决这个问题。但错误保持不变。

有人可以帮帮我吗。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:18:17.190

有几个应用程序是用 Java 开发的，它们在 JRE x86 上运行，其中一些需要 JRE x64。不要想太多，只需安装两个版本的 JRE，即 JRE x86 和 x64。我相信这会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T21:08:58.437

您应该检查您的“路径”环境变量。尝试打开命令提示符并检查它是否找到 java.util.

```
java -version 
```

您还可以尝试通过 *.bat 文件运行您的软件，以确保它位于正确的位置，如下所示：

```
@echo on
SET PATH=C:\Program Files\Java\jre7\bin
java -jar MySoftware.jar
PATH
@echo off 
```

# ruby-on-rails - 使用 simple_form 和 html5 进行表单验证

> ID：11275286
> 
> 赞同：0
> 
> 时间：2012-06-30T15:23:01.863
> 
> 标签：ruby-on-rails, ruby, html, validation, simple-form

我们页面的简单方法是welcome-controller 添加电子邮件-> second_controller 使用电子邮件地址创建一个新对象。

我们有一个显示欢迎页面的欢迎控制器。在此页面上，您可以键入一个电子邮件地址，该地址将提供给其他控制器。我们使用 simple_form 如果我们这样做`config.browser_validations = false`并输入“正常”文本，我们会在创建操作时收到错误。在旧版本中，如果没有 simple_form，我们会收到验证错误。如果我们启用它，我们将获得 html5 验证。但是当浏览器不支持 html5 时呢？我们的模型在这里

```
validates :owner_email,   
        :presence => true,
        :format => { :with => /\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]+\z/ },
        :on => :create 
```

我们的欢迎视图在这里

```
<p>
<h2>Create a list without registration.</h2>
<%= simple_form_for([@list], :html => {:class => 'well' }) do |f| %>
    <%= f.input :owner_email,  :label => false, :placeholder => 'Your Email.' %>
      <%= f.button :submit, "Create", :class => "btn-primary" %>
<% end %>
</p> 
```

我们来自第二个控制器的创建动作是这样的

```
def create
# create a new list and fill it up
# with some default values
  @list = List.new(
    :title => "List", 
    :description => "Beschreibung",
    :owner_email => "test@domain.com",
    :admin_key => generate_admin_key)
  @list.update_attributes(params[:list])
  respond_with(@list) do |format| 
    format.html {#
      redirect_to :action => "admin", :id => @list.access_key, :status => 301}
  end 
end 
```

在 html4 版本中收到错误消息，我们需要进行哪些更改？每个人都可以帮助我们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:45:17.157

只需添加一个 :message 参数。除非您更改了 simple_form 配置，否则消息错误应显示在错误字段的右侧。

```
validates :owner_email,   
        :presence => true,
        :format => { :with => /\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]+\z/ ,
                     :message => 'Invalid e-mail! Please provide a valid e-mail address'},
        :on => :create 
```

# mysql - mysql 和 vb 2010 zerofill 整数数据类型

> ID：11275287
> 
> 赞同：0
> 
> 时间：2012-06-30T15:23:05.893
> 
> 标签：mysql, vb.net

我在 MySQL 中有一个员工编号数据字段，它具有 SMALLINT(4) 数据类型和填零。在 vb 2010 中，我有一个链接到该字段的文本框，但它没有显示带有零填充的记录。

前任。我的文本框中的“1”应该是“0001”。“43”应该是“0043”等等。

我该怎么做呢？

注意：我在我的数据源上链接了 mysql 数据库，而不是对其进行编码，因为我无法让数据阅读器读取和显示我的文本框中的所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:19:26.363

如果您的程序“认为”它是一个整数，那么除了通常显示一个整数之外，它没有理由以任何方式显示它。你可以做类似的事情

```
Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
    TextBox1.Text = TextBox1.Text.PadLeft(4, "0"c)
End Sub 
```

请注意，它将被调用两次，一次是填充 .Text，一次是因为填充文本已更改了 .Text。

# ios - iOS 应用中的定向广告

> ID：11275288
> 
> 赞同：0
> 
> 时间：2012-06-30T15:23:39.083
> 
> 标签：ios, admob, ads, targeting

**如何在 iOS 应用中投放定向广告？**我从 DoubleClick 下载了一个 iOS 应用程序，该应用程序具有很好的针对性广告。

我想按我提供的关键字定位。例如，我想指定“钓鱼”、“户外”和“露营”，并将相关广告投放到我的 iOS 应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:56:46.060

我在这种情况下所做的是使用 (HTML) AdSense。这似乎不合逻辑，但如果你做对了，它也有一些好的方面。

# mysql - 内连接取决于行

> ID：11275290
> 
> 赞同：0
> 
> 时间：2012-06-30T15:24:09.367
> 
> 标签：mysql, sql

我有一个表帖子，例如：

```
post_id | title
   1       im in Guadalajara and Zapopan
   2       im just in Guadalajara but not in Zapopan 
```

和表 meta_keys

```
post_id | meta_key
  1         Guadalajara
  1         Zapopan
  2         Guadalajara 
```

我需要同时获得瓜达拉哈拉和萨波潘的帖子，我意识到如果我与 or 进行内部连接，会给我两个

在这个例子中，我期望构造一个抛出帖子 1（只是 1）的查询

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:30:11.660

一种方法是使用双连接：

```
select
  *
from
  posts p
inner join meta_keys mk1 on p.post_id = mk1.post_id
inner join meta_keys mk2 on p.post_id = mk2.post_id
where
  mk1.meta_key = 'Guadalajara' and
  mk2.meta_key = 'Zapopan'
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:30:26.850

以下为您`post_id`提供两者中的 s

```
select post_id
  from meta_keys
 where meta_key in ('Guadalajara','Zapopan')
 group by post_id
having count(*) = 2 
```

然后，您可以加入它以`posts`获取实际帖子：

```
select p.*
  from posts as p
  join ( select post_id
           from meta_keys
          where meta_key in ('Guadalajara','Zapopan')
          group by post_id
         having count(*) = 2 ) as m
    on p.post_id = m.post_id 
```

# iphone - iOS - 按下时 UIButton 的文本被设置回笔尖设置值

> ID：11275291
> 
> 赞同：0
> 
> 时间：2012-06-30T15:24:17.010
> 
> 标签：iphone, ios, uibutton

我有一个 UIButton，它具有我在界面生成器中设置的初始值。当按下这个按钮时，我会显示一个模态视图控制器，在一些用户交互之后，它会将一个值传递回第一个控制器。然后我用这个传回的值更新按钮的文本。

所有这些都可以正常工作，但是，如果我再次按下此按钮，因为模态视图控制器正在屏幕上制作动画，我按下的按钮具有它在视图首次加载时所具有的原始文本。有谁知道这是为什么以及如何使它保留我在上面设置的新文本？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:26:17.883

当您设置按钮的标题时，请确保将其设置`UIControlStateNormal`为 `UIControlStateHighlighted`

```
[button setTitle:@"YourNewTitle" forState:UIControlStateNormal];
[button setTitle:@"YourNewTitle" forState:UIControlStateHighlighted]; 
```

# c# - 使用 StreamWriter 追加文本

> ID：11275292
> 
> 赞同：2
> 
> 时间：2012-06-30T15:24:18.527
> 
> 标签：c#, .net, visual-studio-2010, file

以下程序应每次打开/创建一个文件并将当前日期写入其结束。

```
using System;
using System.IO;
using System.Text;

namespace roughDraft
{
    class Program
    {
        public static void Main()
        {
            StreamWriter oFile = File.AppendText("baza.txt");
            string output = "Current date and time: " + DateTime.Now.ToString("yyyy.MM.dd hh:mm:ss");

            oFile.WriteLine(output);

            Console.WriteLine(output);

            Console.ReadKey();
        }
    }
} 
```

我不知道为什么它只创建一个空文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T15:29:48.563

您应该始终将`StreamWriter`对象放在`using`语句中，以便它们正确关闭。

```
using (StreamWriter oFile = File.AppendText("baza.txt"))
{
    string output = "Current date and time: " 
                  + DateTime.Now.ToString("yyyy.MM.dd hh:mm:ss");
    oFile.WriteLine(output);
} 
```

或者，您可以手动调用 上的方法[`Close`，](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.close.aspx)`StreamWriter`但`using`对我来说，该语句更容易且不易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:40:09.740

它正在创建空文件，因为您正在其中写入但没有关闭 StreamWriter

**像这样 oFile.Close();**

# mfc - 从注册表中读取 DEVMODE 结构

> ID：11275298
> 
> 赞同：1
> 
> 时间：2012-06-30T15:25:34.917
> 
> 标签：mfc, windows-ce, arm9

我正在做一个项目，我需要为设备的打印操作进行编程。它有WIN CE 6.0。我正在使用 Visual Studio 2005 (MFC)。打印机可以是任何 PCL 兼容的打印机。

目前，为了获得打印机 DC，我正在使用 CreateDC()。

```
hPrinterDC = CreateDC(L"PCL.DLL", L"Any Name", L"LPT1", NULL); 
```

使用此调用我能够成功打印。在这里，我将 DEVMODE 特定的输入参数作为 NULL 传递。但是为了更好地控制这些打印操作，我需要将 DEVMODE 信息传递给 CreateDC()。

为此，我计划按照上面的说明调用 CreateDC() 以在注册表中生成 DEVMODE 特定信息。然后我可以将注册表中的 DEVMODE 数据读取到局部变量中，仅修改此变量的必要字段，并将此变量传递给 CreateDC() 以获取打印机 DC，以便进行实际打印操作。

我避免直接​​初始化 DEVMODE 结构，因为我没有关于 DEVMODE 的某些字段的足够信息，例如 dmDriverExtra。

我需要知道如何安全地从注册表中读取像 DEVMODE 这样的结构？任何相关的例子都会很有帮助。

亲切的问候， Aftab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T10:23:35.557

这是古老的，但以防万一有人发现它仍然有用。

DEVMODE 包含私有和公共区域，因此分配它的大小等于 sizeof(DEVMODE) 将排除一些设置。初始化 DEVMODE 的正确方法是使用 DocumentProperties() 函数查询其默认状态。当最后一个参数设置为零时，它返回所需的字节数。

# java - 如何检查每个员工的电子邮件是否与搜索值匹配

> ID：11275299
> 
> 赞同：0
> 
> 时间：2012-06-30T15:25:53.253
> 
> 标签：java, hashmap

只是想知道我如何将用户输入与员工类的内容相匹配。

```
public void searchByName ()
{
    //and check for each employee if his/her email matches the searched value
    for(Employee e : map.values())
    {
        System.out.println(e); //Will print out Employee toString().
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:45:02.433

我不明白您为什么要使用员工地图，但假设您的电子邮件地址在您的 Employee 类中存储为 String 对象，并带有适当的 getter `getEmail()`，那么代码将如下所示：

```
public Employee findEmail( String email )
{
    for( Employee e : map.values() )
    {
        if( email.equals( e.getEmail() ) )
            return e;
    }
    return null;
} 
```

不过，这段代码效率不高，因为它必须遍历 Map 中的每个 Employee。

但是，如果您的 Map 包含电子邮件地址到员工的映射，那么您可以使用 Map 的方法非常快速地获取与电子邮件地址关联的员工`get( Object key )`：

```
Employee emp = map.get( "someone@somedomain.com" );

if( emp != null )
    System.out.println( "Employee with that email address is " + emp );
else
    System.out.println( "No Employee with that email address." ); 
```

我希望这有帮助。附带说明一下，发布更多代码（例如您的 Employee 类）肯定有助于使解决方案更加准确和有用。

# c# - C# 自定义集合/枚举器

> ID：11275305
> 
> 赞同：0
> 
> 时间：2012-06-30T15:26:37.073
> 
> 标签：c#, generics, collections

给定以下课程：

```
public class GenClass<T>
{
     private List<T> ItemsList {get;set;}
     public Predicate<T> SomeCondition {get;set;}
     public bool UsePredicate {get;set;}

     public List<T> Items
     {
         get { //CODE Goes here; }
     }
} 
```

我需要一种方法让列表使用`SomeConditionPredicate`并仅返回与条件不匹配的项目，但前提是 bool`UsePredicate`为真。我知道我可以为此使用 LINQ，问题是每次我使用 LINQ 查询时都会得到一个不同的 IEnumerable 实例，这需要是一个属性，因此我需要能够访问列表的同一个实例从课堂之外，因为我将添加和删除项目，而我不能用 .Where 的结果来做到这一点，例如。我在想一个 custom `IList<T>`，但我不确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:33:44.623

你在这里有一个概念问题。如果是同一个实例，它应该如何按条件过滤？LINQ 在每次调用时都返回一个新枚举的原因是它“实时”运行查询，并且多个查询必须是独立的。

也就是说，您可能不必依赖每次返回相同引用的属性。如果您依赖于相同的实例，那么当/如果有人更改谓词时，您期望会发生什么？

以及如何添加或删除应该在过滤列表上工作/起作用的项目？如果您添加一个将被过滤掉的项目，会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:38:00.037

你的问题有点不清楚，但让我们从这个开始：

```
public class GenClass<T>
{
     private List<T> ItemsList {get;set;}
     public Predicate<T> SomeCondition {get;set;}
     public bool UsePredicate {get;set;}

     public List<T> Items
     {
         get { return UsePredicate 
                   ? ItemsList.Where(SomeCondition).ToList() 
                   : ItemsList; }
     }
} 
```

那对您的用例不起作用怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T16:04:02.203

An`IEnumerable`只能用于读取集合，但不能对其进行更改。如果要对其进行更改，请改为返回过滤索引的枚举。

```
public IEnumerable<int> FilteredIndexes
{
    get
    {
        if (UsePredicate) {
            return ItemsList
                .Select((item, i) => i)
                .Where(i => SomeCondition(ItemsList[i]));
        }
        return ItemsList.Select((item, i) => i);
    }
} 
```

假设你已经声明了这个索引器

```
public T this[int index]
{
    get { return ItemsList[index]; }
    set { ItemsList[index] = value; }
} 
```

您现在可以像这样使用该集合

```
GenClass<string> stringCollection = new GenClass<string>();
//TODO: Add items
stringCollection.SomeCondition = s => s.StartsWith("A");
stringCollection.UsePredicate = true;
foreach (int index in stringCollection.FilteredIndexes) {
    stringCollection[index] = stringCollection[index] + " starts with 'A'";
} 
```

* * *

### 更新

如果您不想公开索引，则可以创建一个用作表示您的集合项目的项目访问器的类

```
public class Item<T>
{
    private List<T> _items;
    private int _index;

    public Item(List<T> items, int index)
    {
        _items = items;
        _index = index;
    }

    public T Value
    {
        get { return _items[_index]; }
        set { _items[_index] = value; }
    }
} 
```

在您的收藏中，您将声明此属性

```
public IEnumerable<Item<T>> FilteredItems
{
    get
    {
        if (UsePredicate) {
            return ItemsList
                .Select((item, i) => new Item<T>(ItemsList, i))
                .Where(item => SomeCondition(item.Value));
        }
        return ItemsList.Select((item, i) => new Item<T>(ItemsList, i));
    }
} 
```

现在你可以像这样使用集合了

```
foreach (Item<string> item in stringCollection.FilteredItems) {
    item.Value = item.Value + " starts with 'A'";
} 
```

* * *

一般注意事项：您可以安全地将私有属性转换为字段。属性通常用作公开公开字段值的中间体。

# macos - NSView 的动画

> ID：11275309
> 
> 赞同：2
> 
> 时间：2012-06-30T15:27:08.807
> 
> 标签：macos, animation, core-animation, nsview

我一直在为 iOS 制作应用程序，并且最近开始为 Mac OS X 制作应用程序。我正在尝试在 NSView 上做一些动画。

我想要做的是反弹 NSView 的比例，使其缩小到 70%，然后反弹回 100%。现在我可以做缩放/尺寸部分，但这是我现在不能做的动画部分。

对于 iOS，我会在 UIView 上使用以下内容：

```
+ (void)animateWithDuration:(NSTimeInterval)duration
                 animations:(void (^)(void))animations
                 completion:(void (^)(BOOL finished))completion 
```

使用它意味着当上一个动画完成时，我可以开始新的动画。我一直在为 Mac OS X 寻找类似的功能。我发现了以下内容：

```
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:2.0];
// Set end state of objects to animate
[NSAnimationContext endGrouping]; 
```

这类似于我在 iOS 4 之前为对象设置动画的方式。但后来引入了动画块（如顶部的显示），从那时起我就一直在使用它们。所以我的问题是，我错过了 Mac OS X 的动画块吗？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T16:24:46.410

如果您使用的是 Mac OS X 10.7，您可能会发现使用基于块的 NSAnimationContext API 更自然：

```
+ (void)runAnimationGroup:(void (^)(NSAnimationContext *context))changes
        completionHandler:(void (^)(void))completionHandler 
```

# java - EnumMap 与 Enum 值

> ID：11275312
> 
> 赞同：7
> 
> 时间：2012-06-30T15:28:08.853
> 
> 标签：java, enums

这有什么区别：

```
public enum Direction {
    NORTH(90),
    EAST(0),
    SOUTH(270),
    WEST(180);

    private final int degree_;

    private Direction(int degree) {
        degree_ = degree;
    }

    public int getDegree() {
        return degree_;
    }

    public static void main(String[] args) {
        System.out.println(NORTH.getDegree());
    }
} 
```

还有这个：

```
public enum Direction {
    NORTH,
    EAST,
    SOUTH,
    WEST;

    public static void main(String[] args) {
        EnumMap<Direction, int> directionToDegree = new EnumMap<Direction, int>(Direction.class);
        directionToDegree.put(NORTH, 90);
        directionToDegree.put(EAST, 0);
        directionToDegree.put(SOUTH, 270);
        directionToDegree.put(WEST, 180);

        System.out.println(directionToDegree.get(NORTH));
    }
} 
```

更容易阅读吗？一种更灵活吗？一个更传统地使用吗？一个人跑得更快吗？还有其他优点和缺点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T16:18:55.580

的主要用例`EnumMap`是当您想要将其他数据附加到`enum`您不拥有的数据时。通常，您使用的是具有枚举的公共库，并且您需要用您的数据注释每个成员。

作为一般规则，只要您可以使用这两种方法，请使用第一种。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-30T15:34:36.463

在第一种情况下，您有一个绑定到该`enum`值的属性（只有一个值）。

第二个是与外部管理的枚举关联的值。

想象一下，现在在您的应用程序中，您想要访问这些值。如果这在第二种情况下保持不变，那么从任何地方引用地图都会变得更加复杂。

当您有不同的上下文时，第二种方法会很有用。例如：`NORTH`，在特定的上下文中`NORTH`应该是 90，但在另一个上下文中，它需要另一个与之关联的值（这里的上下文可能是一个特定的实现）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-30T15:31:51.310

向枚举常量本身添加值使它们无需引用另一个对象即可使用。如果将此信息存储在地图中，则必须传递对地图的引用。如果这些是常量表示的概念的基本属性，最好将值添加到常量本身，而不是将它们存储在映射中。

在枚举常量上使用值将比将它们存储在映射中更快。

# android - Eclipse 未安装最新版本的代码

> ID：11275313
> 
> 赞同：0
> 
> 时间：2012-06-30T15:28:10.103
> 
> 标签：android, eclipse, adb

当我第一次编译我的 android 应用程序以在 android 设备上进行测试时，它会在设备上安装该应用程序，但是在我从 eclipse 重新编译代码时更改了一些代码后，设备运行该应用程序的第一个安装版本。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:30:56.643

有时会出现此类问题，请尝试卸载然后重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:32:10.037

以下是您应该检查的几件事：

*   确保安装更新，而不仅仅是编译它
*   确保使用相同的证书对更新进行签名。否则不会安装
*   确保您的设备已连接并且 USB 调试已启用。
*   在推送更新之前尝试从设备上卸载应用程序。

您可以在控制台中检查安装是成功还是失败。

# javascript - 用空格混淆变量名

> ID：11275315
> 
> 赞同：6
> 
> 时间：2012-06-30T15:28:40.507
> 
> 标签：javascript, variables, syntax

![](../Images/422b1ba2eaf3f7b2427e861ddcf7cc17.png) 我的目标不是在真正的网站中使用它，而是为了知识和乐趣。

我想写一些类似的东西：

```
var  =3;
alert( ); 
```

（不是空格，而是一个特定的 unicode 字符）

可能吗？如果没有，有没有等价的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:54:08.587

尽管您不能将任何 Unicode 空白字符用作“原始”名称，但您可以使用`window`括号符号来做一些魔术。

例如：

```
window["    "] = 1;
alert(window["    "]); 
```

这些本身不是“命名的”，因为如果不摆弄 的属性就无法引用它们`window`，因为 JavaScript 会忽略空格，但在混淆时它们会起到作用。

当然，这可以任意扩展到任何对象；`window`不是必需的，但这是我想到的，因为所有全局变量都是`window`. 为此，你可以有类似的东西：

```
var vars = {};
vars[" "] = 1;
vars["  "] = 2;
vars["   "] = 3;

alert(vars[" "] + vars["  "] + vars["   "]); 
```

我认为这与您能够使用空格命名的变量一样接近。它们不是关键字意义上的*真正*变量`var`，但它们与您可能会出现的一样接近。

当然，您也可以使用 Unicode 空白字符作为属性：

```
var vars = {};
vars[" "] = 1; // uses em quad, U+2001
alert(vars[" "]); // real variable, alerts 1
alert(vars[" "]); // fake variable, alerts undefined 
```

在这种情况下，我使用 U+2001 作为属性。它看起来与它后面的非常相似，它只是字符串中的一个通用空格，但它们与警报所暗示的不同。

就混淆而言，一个潜在的“问题”是由于适当的等宽字体和语法突出显示，字符串的分隔非常清晰，所以我不确定原始空间本身会有多大用处。但是，如果您加入一些更高级的 Unicode 空间，您的结果可能会更好。

# php - Mod_Rewrite 中的这两行代码是做什么的？

> ID：11275320
> 
> 赞同：1
> 
> 时间：2012-06-30T15:29:28.493
> 
> 标签：php, apache, .htaccess, mod-rewrite

我一直试图弄清楚 Mod_Rewrite 中的这两行是做什么的，希望能得到一些帮助。提前致谢。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:31:06.237

他们检查请求的 URI 是现有文件还是目录。前面`!`使条件“不”，因此，请求不映射到文件或目录。

请参阅 mod_rewrite 中的[`-f`和`-d`描述](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

* * *

> 不是所有请求都映射到某个文件以便浏览器加载它吗？

不，请求可能是针对不存在并被重写的东西。例如，[http](http://en.wikipedia.org/wiki/something) ://en.wikipedia.org/wiki/something表示 URI 是`/wiki/something`，它不映射到任何物理文件或目录。但在内部，有一条规则重写`/wiki/something`为`index.php?title=something`，并且`index.php` **确实**存在。

* * *

编辑：对于已编辑的问题

*   两个条件：如果请求的 URI 没有映射到文件或目录，则应用以下规则。
*   规则：无论请求是什么，并`.php`在末尾附加 a 。
*   这背后的逻辑： mod_rewrite 循环，直到进入重写引擎的 URI 和从它出来的 URI 相同。如果不检查 URI 是否映射到物理文件或目录，则规则将循环：
    *   URI in = /something
    *   检查条件：/某事不存在
    *   应用规则，URI in = /something.php
    *   检查条件：/something.php EXISTS，不应用规则
    *   URI in = URI out = /something.php，停止重写
*   否则，没有`!-f`and`!-d`检查：
    *   URI in = /something
    *   应用规则，URI = /something.php
    *   URI in = /something.php
    *   应用规则，URI = /something.php.php
    *   URI in = /something.php.php
    *   应用规则，URI = /something.php.php.php
    *   无限循环，直到 apache 决定停止并返回 500 错误

# android - 可以移动的布局之上的布局

> ID：11275322
> 
> 赞同：1
> 
> 时间：2012-06-30T15:29:43.970
> 
> 标签：android, animation, layout

我正在编写一个 Android 应用程序，但无法弄清楚如何在另一个布局上进行布局，该布局可以上下动画以显示和隐藏其内容，但具有底部布局的图像视图，收缩以适应新区域。

我正在尝试做的一个例子是在这个 iPhone 应用程序中。

[http://itunes.apple.com/gb/app/alex-ze-pirate-comic/id526432227?mt=8](http://itunes.apple.com/gb/app/alex-ze-pirate-comic/id526432227?mt=8)

屏幕截图 2 和 4 显示了我的意思。当顶部布局下降以仅留下工具栏时，图像视图会变得更高以使用提供的额外空间。

希望你能理解我。

谢谢，阿什利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:34:48.073

在这种情况下，ImageView 将保持不变。您的第二个视图将只是覆盖它一段时间。您可以使用[滑动抽屉](http://developer.android.com/reference/android/widget/SlidingDrawer.html)实现此效果。

# php - 获取部分 URL ~

> ID：11275326
> 
> 赞同：1
> 
> 时间：2012-06-30T15:29:59.213
> 
> 标签：php, uri

例如，我的网址是`http://example.tld/~2g`. 我想在`~`（`2g`此处）之后获取数据。

我怎样才能做到这一点？我试过了

```
$visitlink = explode("~", $_SERVER['REQUEST_URI']); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:32:53.127

我会用这个：

```
$visitlink = explode("~",$_SERVER['REQUEST_URI'],2);
$aftertilde = $visitlink[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:03:16.303

`list($before, $after) = explode("~", $_SERVER['REQUEST_URI'], 2);`

这应该有效。我不确定列表功能是否已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:35:00.130

```
$visitlink = preg_replace('/^[^~]+~(.*)$/', '$1', $_SERVER['REQUEST_URI']); 
```

RegEx的`^[^~]+~`部分将匹配所有内容，直到`~`遇到 a。`(.*)`将匹配波浪号后的所有内容。`$1`用于反向引用匹配的内容`(.*)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T21:04:29.783

要充分利用该[`explode`](http://php.net/explode)函数，请告诉 PHP 只在第一个拆分`~`（通过告诉*2*）。该`list`构造有助于直接分配返回值（[Demo](http://codepad.org/cM0RimiR)）：

```
list(, $visitlink) = explode("~", $_SERVER['REQUEST_URI'], 2); 
```

如果您不确定该值是否存在，您可能需要提供一个默认值：

```
list(, $visitlink) = explode("~", $_SERVER['REQUEST_URI'], 2) + array(1 => NULL); 
                                                              ^^^^^^^^^^^^^^^^^^^ 
```

这利用了[*数组联合运算符*](http://php.net/manual/en/language.operators.array.php)。

或者：您在这里有一个简单的模式，在第一个之后采取一切`~`：

```
sscanf($_SERVER['REQUEST_URI'], "%*[^~]~%s", $data); 
```

这个例子使用了[`sscanf`](http://php.net/sscanf)适合简单字符串搜索/模式的函数，结果在`$data`这里赋值给变量。[演示](http://codepad.org/sumS744p)。

# android - 在相对布局中增加对象之间的距离

> ID：11275327
> 
> 赞同：1
> 
> 时间：2012-06-30T15:30:01.740
> 
> 标签：android, android-layout

我的 android 应用程序有一个相对布局。它是一个与一些图像重叠的 SurfaceView。我不得不为相机叠加功能使用相对布局。目前如下图所示： ![在此处输入图像描述](../Images/044c243f34afe55f3c0fde01339633e1.png)

顶部的红色长矩形条实际上是两个短矩形图像。我想增加两个图像之间的距离，使它们看起来像两个单独的矩形。是否可以增加相对布局中的距离？

如果我放置两个红色条，一个在另一个之上，是否可以增加两者之间的距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:21:41.750

在视图之间设置一个边距，就是这样......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:23:54.823

我正在仔细阅读Android开发者的页面。此[页面](http://developer.android.com/reference/android/view/ViewGroup.MarginLayoutParams.html#attr_android%3alayout_marginBottom)说明如何在布局上设置边距

# php - Symfony2 中间件

> ID：11275328
> 
> 赞同：10
> 
> 时间：2012-06-30T15:30:07.370
> 
> 标签：php, symfony, middleware

我正在寻找一种方法**来**为`Symfony2`. 基本上，我需要在它到来之前对**每一个** **进行**预处理并在之后对它进行后处理，但在它涉及到用户之前。`request``Controllers` **`response``Controllers`**

 **有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-30T15:42:15.950

在 Symfony2 中你不需要中间件。有些东西叫做内核事件。

[http://symfony.com/doc/current/book/internals.html#events](http://symfony.com/doc/current/book/internals.html#events)

你可能想看看 kernel.request 和 kernel.response

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-26T11:31:48.907

[StackPHP](http://stackphp.com)最近推出；`HttpKernelInterface`它为使用 Symfony （Symfony、Silex、ezPublish 等）的任何东西提供了一个中间件系统。**

# asp.net - 从 IPAddress 获取国家、城市名称

> ID：11275340
> 
> 赞同：0
> 
> 时间：2012-06-30T15:31:16.700
> 
> 标签：asp.net, geolocation, trace

我们可以在 asp.net 中跟踪用户的地理位置吗？我知道我们可以获取用户的 IP 地址，或者**`ServerVariables("REMOTE_ADDR")`** 但我需要按城市名称检查访问者，以便我的客户可以将这些数据用于他的业务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:46:20.653

正如我在评论中所说：

> 我不是 .net 人，我实际上是一名 PHP 开发人员，但这是非常普遍的。是的，你可以得到一个国家和一个城市，但至于它是否是你的用户 COUNTRY 和 CITY ......好吧，它不太可能是你的用户城市，因为大多数 ISP 并不与用户在同一个城市进行交易所...但是您在国家/地区有很好的机会。

但我想我会详细说明一下。

国家，特别是如果他们像我一样使用加密代理，对你没有任何帮助，但是像 cloudflare 这样的服务会在 HTTP 标头中为你提供用户 IP 国家，而且它是免费的。比每月花费 200 英镑从专门的服务中获得误报要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:40:38.743

在 asp.net 论坛上提出了类似的问题，并使用了一个很好的例子来回答。

参考：[链接](http://forums.asp.net/post/3072924.aspx)

> 你希望如何做到这一点？我的 IP 由距离我 300 英里的 ISP 分配。我的虚拟主机位于北卡罗来纳州，距离酒店有 16 小时车程。我笔记本中的蜂窝链接有一个来自新泽西州的 IP。自从我上次在新泽西以来已经过去了二十年。 [1](http://forums.asp.net/post/3072924.aspx)：[http ://forums.asp.net/post/3072924.aspx](http://forums.asp.net/post/3072924.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T10:43:49.283

我可能真的很晚才回答这个问题，但我最近在这个项目上工作，因为我自己需要它。所以也许它可能会帮助那里的人。

[http://iplookup.tk/service/iplookup/](http://iplookup.tk/service/iplookup/) {您的 IP 地址}

注意：根据您请求的内容类型，结果可以是 Json 或 XML。默认情况下它的 xml

# mysql - 查找具有特定学生的班级

> ID：11275342
> 
> 赞同：0
> 
> 时间：2012-06-30T15:31:38.910
> 
> 标签：mysql, sql

我不是 SQL 专家，但我不是一个完全的业余爱好者，但这是对一个包含 2 个字段的单个表的查询，我不知道如何处理。

假设您有一张桌子，上面有班级# 和学生#。您如何找到只有学生 x、y 和 z 的班级？

我真正的问题更像是一个目录和项目编号表，以及如何找到所有具有（或多或少）指定项目的目录。

我唯一的想法是围绕 GROUP_CONCAT 进行匹配，但必须有 b731e 一种更优雅的方式......

编辑：我错误地陈述了这个问题，所以我也会提供表结构。这个问题更像是装在盒子里的产品，一个盒子可能包含多个特定产品，而您希望找到具有完全指定内容的盒子。因此，例如，该表是：

```
+------------+------------+------+-----+---------+----------------+
| Field      | Type       | Null | Key | Default | Extra          |
+------------+------------+------+-----+---------+----------------+
| id         | bigint(20) | NO   | PRI | NULL    | auto_increment |
| box_id     | bigint(20) | YES  |     | NULL    |                |
| product_id | bigint(20) | YES  | MUL | NULL    |                |
+------------+------------+------+-----+---------+----------------+ 
```

我想找到所有包含 2 件产品 ID 22、17 件和 55 件的盒子。不多也不少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:35:36.697

你可以使用一个`having`子句：

```
select  *
from    YourTable
group by
        class
having  count(distinct student) = 3
        and max(case when student = 'X' then 1 end) = 1
        and max(case when student = 'Y' then 1 end) = 1
        and max(case when student = 'Z' then 1 end) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:26:20.113

我确实有一个可行的答案，但它远非高效或优雅，因此我将它呈现给任何寻求该问题的次优但正确解决方案的人，并诱使其他人提供更好的解决方案。

```
SELECT box_id, GROUP_CONCAT( product_id
ORDER BY product_id DESC 
SEPARATOR  ',' ) AS contents
FROM box_product
GROUP BY box_id
HAVING contents =  '17,22,22,55'; 
```

# javascript - 仅当没有同时触发其他事件时才触发 Javascript 点击/触摸事件？

> ID：11275343
> 
> 赞同：0
> 
> 时间：2012-06-30T15:31:44.810
> 
> 标签：javascript, jquery, jquery-events, preventdefault

我正在尝试制作一个从视图中隐藏但通过触摸/单击屏幕显示的导航菜单。

我看到的问题是触摸/单击屏幕上的许多地方可以打开导航菜单，同时触发可能在附近的任何按钮、链接等的事件。

到目前为止，我正在尝试使用`:not`jQuery 中的一个子句来处理这个问题。不幸的是，`:not`无论您在`body`.

HTML：

```
<div id="NavigationMenu">i'm the navigation menu</div>
<div class="icon-reorder">toggle</div>
<div id="main_content">i'm the main content
  <button type="button">button</button>
</div>​ 
```

JS：

```
$(document.body).on('click', ['body:not(".btn, a, i, button, input, textarea")', '.icon-reorder'], function(){
    console.log('clicked');
    $('#NavigationMenu').toggle();
    $('#main_content').toggle();
});

$('button').on('click', this, function(){
   console.log('button clicked');
}); 
```

有人可以帮助处理这段代码吗？或者这甚至是解决这个问题的正确方法吗？对我来说，它看起来有点 hack-ish。

这个导航菜单是我网站的主要菜单，所以有一个烦人的 UI/UX（导航打开太多/太少）是一个交易破坏者。我主要对触摸兼容代码感兴趣，但欢迎任何和所有 UI/UX 建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:25:28.517

与其使用`:not`子句，不如使用事件委托（我两个月前才知道，这是一个花哨的术语，用于在父元素上使用回调处理事件）

```
$(body).on("click", function(event) {
  if(event.target.type !== "button" && <whatever other conditions>) {
       <toggle menu>
  }
}); 
```

这是一个更新的[Fiddle](http://jsfiddle.net/Dx5Ln/9/)。我正在将点击事件对象记录到控制台，以便您可以查看 event.target 并查看是否有更适合您需要的内容进行比较

# orm - Kohana 3.2 ORM - 唯一值示例

> ID：11275345
> 
> 赞同：-3
> 
> 时间：2012-06-30T15:31:54.280
> 
> 标签：orm, kohana-3.2

这是我的查询：

```
 $comment = ORM::factory('comment')
                  ->where('status', '=', 1)
                  ->find_all(); 
```

字段 =`user_id`

我如何选择每个评论中的一个`user_id`？

以下：

```
$comment = ORM::factory('comment')
                  ->distinct('user_id')
                  ->where('status', '=', 1)
                  ->find_all(); 
```

显示数据库中的所有内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:18:26.807

你的代码应该更像这样..

```
$comment = ORM::factory('comment')
                  ->where('status', '=', 1)
                  ->group_by('user_id')
                  ->find_all(); 
```

查看[文档](http://kohanaframework.org/3.2/guide/api/ORM#group_by)以获取更多信息。

# selenium - 在 selenium ide 中使用 if / else

> ID：11275354
> 
> 赞同：15
> 
> 时间：2012-06-30T15:32:56.807
> 
> 标签：selenium, selenium-ide

我有一个复选框，我试图在 Selenium IDE 中单击 - 但前提是它尚未处于活动状态。

我正在使用 Selenium IDE 来创建我的测试，并使用 htmlsuite 来运行它们 - 任何人都知道我如何在其中使用“if”吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T06:28:40.880

您必须从[官方页面](http://docs.seleniumhq.org/download/)`Flow Control`下载Selenium IDE 的插件（一直向下）。

我找到的最有用的链接是这个，因为它有一个完整的例子：[http ://selenium.10932.n7.nabble.com/if-else-statement-td4370.html](http://selenium.10932.n7.nabble.com/if-else-statement-td4370.html)

无论如何，还有一个[文档](http://wiki.openqa.org/display/SEL/flowControl)和[作者的博客文章](http://51elliot.blogspot.cz/2008/02/selenium-ide-goto.html)解释了更多内容。

* * *

我知道的唯一选择是[在 javascript 中实现整个逻辑](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)- 包括测试步骤。有可能，要做到正确有点困难，但是如果您最终会在没有插件的情况下卡住 IDE，那么这可能是您唯一的节省：

```
var value = this.browserbot.findElement("id=someInput").value;
if (value == "Slanec is the best!") {
    this.browserbot.findElement("id=someButton").click();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-27T10:55:26.907

试试这个：

```
**storeTextPresent || [some_value] || [variable_name]**

**gotoIf || storedVars['variable_name']** == true || **goto_label_name** 
```

// 不满足条件时执行的命令

```
**label goto_label_name** 
```

// 这是脚本会跳转到的地方 // 如果条件满足则执行命令，这部分可能与初始条件无关

您需要为 Selenium IDE 安装 Flow Control 插件。

# git - 如何在超级项目中共享一个通用的 git 子模块

> ID：11275355
> 
> 赞同：0
> 
> 时间：2012-06-30T15:33:03.440
> 
> 标签：git, git-submodules

我正在将我所有的点文件组织到一个 git 超级项目中，并将任何类似的文件放入子模块中，这样我可以在需要时单独将它们拉出来。我遇到的问题是我想为 bash 和 zsh 提供一个通用的别名文件（也许还有其他文件）。理想情况下，如果我选择仅克隆系统上的 bash/zsh 之一，我希望包含这些通用文件。

现在我有子模块`~/.bash`和`~/.zsh`. 更好的是一个`~/.shell`子模块，它实际上是`~/.bash`和的子模块`~/.zsh`。可以做这样的事情吗？如果是这样，怎么做？

我试图避免做类似的事情`~/.bash/shell`，`~/.zsh/shell`并且我不想每次更改另一个时都必须记住更新一个。一种可能的解决方案可能是硬链接`~/.bash/shell`和`~/.zsh/shell`，但是如果我将完整的 dotfile 存储库克隆到新机器上，我将需要再次设置此硬链接。

希望我已经通过问题很好地解释了。有什么建议么？

**编辑：**我刚刚发现了一些类似的堆栈交换问题（[这里](https://stackoverflow.com/questions/4115817/duplicate-submodules-with-git)和[这里](https://stackoverflow.com/questions/1419498/git-nested-submodules-and-dependencies)）。听起来硬链接或创建一个特殊的仅限 bash 和仅限 zsh 的超级项目可能是唯一真正的选择。我真的不喜欢多个超级项目选项，因为我觉得更新太多了。还有另一个我仍然想念的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:08:59.773

git 支持软链接。因此，您可以使用软链接文件而不是硬链接`ln -s`。

# ms-access - 将csv文件导入访问的VBA过程

> ID：11275356
> 
> 赞同：5
> 
> 时间：2012-06-30T15:33:16.020
> 
> 标签：ms-access, vba, csv

我需要 VBA 中的程序将数据导入到 csv excel 文件的访问中，而不需要一些记录，作为页眉和页脚。例如，我在 csv 文件中有一个表格，其中包含一些不属于表格日期的句子

* * *

A1 这是一些句子的标题.......
A2 标题
A3.......
A7 DATA DATA DATA DATA DATA
A8 rows DATA DATA DATA DATA DATA ......
A256 DATA DATA DATA DATA
A257 这是一些句子

* * *

我的 Acess 应该只包含 A7 到 A256 之间的行。有谁知道解决我的问题的 VBA 程序或任何东西？

多谢

* * *

编辑

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T15:49:44.523

最简单的方法是将 CSV 文件作为表链接到 Access 数据库中。然后，您可以像处理普通访问表一样处理此表，例如，通过基于此表创建适当的查询来准确返回您想要的内容。

您可以手动链接表格，也可以像这样使用 VBA

```
DoCmd.TransferText TransferType:=acLinkDelim, TableName:="tblImport", _
    FileName:="C:\MyData.csv", HasFieldNames:=true 
```

* * *

**更新**

```
Dim db As DAO.Database

' Re-link the CSV Table
Set db = CurrentDb
On Error Resume Next:   db.TableDefs.Delete "tblImport":   On Error GoTo 0
db.TableDefs.Refresh
DoCmd.TransferText TransferType:=acLinkDelim, TableName:="tblImport", _
    FileName:="C:\MyData.csv", HasFieldNames:=true
db.TableDefs.Refresh

' Perform the import
db.Execute "INSERT INTO someTable SELECT col1, col2, ... FROM tblImport " _
   & "WHERE NOT F1 IN ('A1', 'A2', 'A3')"
db.Close:   Set db = Nothing 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T16:21:42.357

您的文件看起来很小（297 行），因此您可以很快地读取和写入它们。您引用了不存在的 Excel CSV，并在示例中显示了以空格分隔的数据。此外，Access 被限制为 255 列，而 CSV 则不是，因此不能保证这会起作用

```
Sub StripHeaderAndFooter()
Dim fs As Object ''FileSystemObject
Dim tsIn As Object, tsOut As Object ''TextStream
Dim sFileIn As String, sFileOut As String
Dim aryFile As Variant

    sFileIn = "z:\docs\FileName.csv"
    sFileOut = "z:\docs\FileOut.csv"

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set tsIn = fs.OpenTextFile(sFileIn, 1) ''ForReading

    sTmp = tsIn.ReadAll

    Set tsOut = fs.CreateTextFile(sFileOut, True) ''Overwrite
    aryFile = Split(sTmp, vbCrLf)

    ''Start at line 3 and end at last line -1
    For i = 3 To UBound(aryFile) - 1
        tsOut.WriteLine aryFile(i)
    Next

    tsOut.Close

    DoCmd.TransferText acImportDelim, , "NewCSV", sFileOut, False
End Sub 
```

**编辑各种评论**

可以手动将文本文件导入 MS Access，这将允许您选择自己的单元格分隔符和文本分隔符。您需要从菜单中选择外部数据，选择您的文件并逐步完成向导。

[关于导入和链接数据和数据库对象——适用于：Microsoft Office Access 2003](http://office.microsoft.com/en-us/access-help/about-importing-and-linking-data-and-database-objects-HP005241695.aspx)

[导入导出数据简介——适用于：Microsoft Access 2010](http://office.microsoft.com/en-us/access-help/introduction-to-importing-and-exporting-data-HA101790599.aspx)

使用向导完成导入后，您可以保存导入规范并在下一个 DoCmd.TransferText 中使用它，如 @Olivier Jacot-Descombes 所述。这将允许您使用非标准分隔符，例如分号和单引号文本。

# c++ - 返回指针的最佳方式

> ID：11275360
> 
> 赞同：5
> 
> 时间：2012-06-30T15:33:43.493
> 
> 标签：c++

我见过至少 5 个以这种方式返回指针的 C++ 教程网站：

```
int* somefunction(){
    int x = 5;
    int *result = &x;
    return result;
} 
```

这不是一个非常非常糟糕的主意吗？我的逻辑告诉我返回的指针的值可以随时被覆盖。我宁愿认为这将是正确的解决方案：

```
int* somefuntion(){
    int x = 5;
    int* result = new int;
    *(result) = x;
    return result;
} 
```

然后离开调用函数来删除指针。还是我错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T15:37:32.830

你对这个问题的直觉是正确的——结果就是 UB。但是，您提出的解决方案很糟糕。“让调用者删除它”*非常*容易出错且不可取。相反，将它返回到某个拥有的类中，该类正确地封装了它的预期用途——最好是`std::unique_ptr<int>`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T15:35:14.443

是的，第一个选项将返回一个悬空指针，并导致**未定义的行为**。您的第二个选项是正确的，尽管您可以只写：

```
int* somefuntion(){
    return new int(5);
} 
```

或者`static`在方法中有一个变量并返回它的地址。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T15:40:48.163

您的问题将几个不同的问题合二为一。实际上，这里的主要问题是您是否真的需要这种混合物。

本身没有“返回指针”之类的东西。您不会仅仅因为您想“返回指针”而“返回指针”。返回指针是出于某种特定原因而完成的，该原因将决定它是如何完成的以及需要做什么才能确保它正常工作。

您的原始示例并没有真正说明这一点，因为在您的原始示例中根本没有有意义的理由返回一个指针。看起来您可以简单地返回一个`int`.

例如，在许多情况下，您会希望返回一个指针，因为它是指向动态分配对象的指针，即其生命周期不受语言范围规则约束的对象。请注意，这种情况下的随意关系在相反的方向上起作用：您需要一个动态对象 -> 您必须返回一个指针。那样，而不是反过来。在您的示例中，您似乎向后使用它：我想返回一个指针-> 我必须动态分配对象。后一种推理从根本上是有缺陷的，尽管人们可能会看到它的使用频率比预期的要高。

如果你真的需要一个动态分配的对象（正如我上面所说，主要原因是要覆盖语言的基于作用域的生命周期规则），那么内存所有权问题就会成为问题。为了知道何时可以/必须释放此内存以及谁必须释放它，您必须实现独占（随时指定一个所有者）或共享（如引用计数）所有权方案。它可以使用原始指针来完成，但更好的想法是使用库提供的各种智能指针类。

但在许多情况下，您还可以返回指向非动态对象（静态或自动）的指针，假设这些指针的生命周期与它们指向的对象的生命周期相同或更短，这完全没问题。

换句话说，决定返回指针的原因在 C 和 C++ 之间并没有真正的不同。它与设计/意图相关而不是与语言相关。只是 C++ 为您提供了更多工具，让您在决定返回指针后更轻松。（这有时会促使 C++ 程序员过度使用隐藏的指针）。

在任何情况下，这又是您尝试实现什么功能的问题。一旦知道了这一点，您就可以对是否应该“返回指针”做出正确的决定。如果你最终决定返回一个指针，它将帮助你选择合适的返回方法。这就是它的工作原理。试图向后考虑它（“我只想返回一个指针，但我还没有真正的理由”）只会产生学术上无用的答案，每个答案都可以在某些情况下被证明是“错误的”具体情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-30T15:44:12.063

是的，第一个示例不好，因为您将返回一个指向内存的指针，系统可能会将其重新用于其他用途。第二个示例更好，但仍然存在泄漏内存的风险，因为 somefunction 的调用者不清楚删除指向的内存是他们的责任。

像这样的东西可能会更好：

```
std::unique_ptr<int> somefunction(){
    int x = 5;
    std::unique_ptr<int> result( new int );
    *result = x;
    return result;
} 
```

这样，unique_ptr 将负责删除新的内存，并有助于消除潜在的内存泄漏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T15:44:33.953

正如您所怀疑和其他人所澄清的那样，第一种方法显然是错误的。尽管 C++ 是一种系统语言，并且在某些情况下您可能希望这样做（在大多数系统上，它将返回堆栈上特定的相对位置），但它几乎永远不会正确。第二种方法要理智得多。

但是，在 C++ 中不应该鼓励这两种方法。C++ 的要点之一是您现在拥有引用和异常，而不仅仅是 C 的指针。因此，您要做的是返回一个引用，并允许 new 在内存分配失败时将异常抛出堆栈。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T15:37:23.750

不要忘记在调用您的方法后删除指针，这是正确的。

# networking - 连接到在没有 LAN 的同一台计算机上运行的 VM

> ID：11275364
> 
> 赞同：0
> 
> 时间：2012-06-30T15:34:02.753
> 
> 标签：networking, ip, vmware, lan

我在我的 windows xp 机器上运行了一个 windows 2003 虚拟机。VM的机器名是itdom.domain.com windows xp主机与局域网断开连接。我希望能够使用计算机名称从主机连接到 VM，反之亦然。例如 URL [http://itlab.domain:7080/domainsm](http://itlab.domain:7080/domainsm)必须可以从主机访问。

是否有任何配置可以在任何机器上执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:36:41.370

仅仅因为您没有物理网络连接并不会阻止您在主机和来宾计算机上设置网络。一种方法是向主机的物理网络端口添加一个 IP 地址，并在该端口上创建一个桥接网络，以便访客也可以看到它。

您没有说您使用的是哪种 VM 技术，但在其中许多技术中，您可以在主机和来宾之间设置内部网络。然后，您需要做的就是编辑每个主机文件，为另一台机器的 IP 地址添加主机名。您可能还需要配置防火墙以允许两者之间的访问。

毫无疑问，还有其他方法可以实现这一目标。

# search - Youtube API 搜索自动完成

> ID：11275365
> 
> 赞同：25
> 
> 时间：2012-06-30T15:34:13.307
> 
> 标签：search, autocomplete, youtube, youtube-api

我正在使用 Youtube API，我希望有一个搜索自动完成功能，就像在[YouTube 上](https://www.youtube.com/)一样，当您在搜索输入框中输入时，它会为您提供搜索建议。我已经阅读了文档，但仍然缺少，这可以使用 API 吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-02T16:24:12.993

好的，我找到了这个网址：

```
http://suggestqueries.google.com/complete/search?client=firefox&ds=yt&q=Query 
```

它不是 Youtube API 的一部分，但仍然有效，返回 JSON 响应。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-24T21:57:25.560

对于 json，只需添加“client”参数：

[http://suggestqueries.google.com/complete/search?client=youtube&ds=yt&client=firefox&q=Query](http://suggestqueries.google.com/complete/search?client=youtube&ds=yt&client=firefox&q=Query)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-26T10:38:26.827

最重要的是 api 是**旧的**，给*谷歌搜索建议*而不是**youtube 搜索建议**

用这个：

```
https://clients1.google.com/complete/search?client=youtube&gs_ri=youtube&ds=yt&q=faded 
```

使用以下 JS 代码提取建议：

```
//  data is response of above api
   const data = 'window.google.ac.h(["faded",[["faded",0,[433]],["faded alan walker lyrics",0,[433]],["faded remix",0,[433]],["faded 8d",0,[433]],["faded piano",0,[433]],["faded wheel free fire",0],["faded karaoke",0,[433]],["faded ringtone",0,[433]],["faded instrumental",0,[433]],["faded live",0,[433]],["faded piano tutorial",0,[433]],["faded whatsapp status",0,[433]],["faded dhol cover",0,[433]],["faded dance",0,[433]]],{"k":1,"q":"_sPyvXmmbfcsVtfP4sgjOdKQAvg"}])';

    const searchSuggestions = [];
    data.split('[').forEach((ele, index) => {
      if (!ele.split('"')[1] || index === 1) return;
        return searchSuggestions.push(ele.split('"')[1]);
    });
    console.log(searchSuggestions);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T09:29:08.497

查看 **YouTube 自动完成关键字抓取工具**。不太确定提出问题的人想要 YouTube 自动完成解决方案的上下文，但我想我会把它扔在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-24T06:38:26.497

您也可以使用 JSON：

```
url: "https://suggestqueries.google.com/complete/search?client=youtube&ds=yt&q=" + i,
        dataType: "jsonp", 
```

# 3d - 3D 图形是如何着色的

> ID：11275367
> 
> 赞同：1
> 
> 时间：2012-06-30T15:34:29.080
> 
> 标签：3d

我知道如何投影 3D 点。但是 3D 立方体是如何着色的。3d 渲染器是否将 3x3x3 立方体转换为 54 点并用颜色投影它们？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:45:56.757

我认为您正在寻找**画家算法**en.wikipedia.org/wiki/Painter's_algorithm。

**还有其他的**，但这个是**最简单的**。

# facebook - 为什么在版本 4.0.1.12097 中从 WebServerClient:RequestUserAuthorization 中移除 state 参数

> ID：11275368
> 
> 赞同：0
> 
> 时间：2012-06-30T15:34:31.207
> 
> 标签：facebook, dotnetopenauth

我已经使用 DotNetOpenAuth v3.5.0.10357 大约一年了，最后决定升级到 v4.0.1.12097。这样做时，我注意到 RequestUserAuthorization 方法不再接受*状态*参数。

```
//v3.5.0.10357
WebServerClient:RequestUserAuthorization(IEnumerable<string> scope = null, string state = null, Uri returnTo = null);

//v4.0.1.12097
WebServerClient:RequestUserAuthorization(IEnumerable<string> scope = null, Uri returnTo = null); 
```

[Facebook 文档](http://developers.facebook.com/docs/authentication/server-side/)，提到这有助于防止跨站点请求伪造。删除的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T01:44:38.773

好吧，经过更多的挖掘，我发现了它被删除的原因。DotNetOpenAuth 在内部进行状态检查（***EndUserAuthorizationRequest.ClientState***），让我们少担心一件事。做得很好！

# entity-framework - 获取用于自动迁移的 SQL 的策略

> ID：11275376
> 
> 赞同：9
> 
> 时间：2012-06-30T15:35:53.127
> 
> 标签：entity-framework, ef-code-first, code-first, entity-framework-migrations

我们使用的是 EF 5RC，代码先迁移。我觉得这应该是一个容易回答的问题（我希望）。有没有一种好方法可以弄清楚自动迁移正在尝试做什么。

我通过 Add-Migration PS 命令添加了迁移。我已经调用了 Update-Database 并且该迁移似乎一切正常。现在 - 我只是像往常一样运行 Update-Database，但出现以下错误：

```
PM> update-database -Verbose
Using StartUp project 'Web'.
Using NuGet project 'DataAccess'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'UserGroup' (DataSource: (localdb)\v11.0, Provider: System.Data.SqlClient, Origin: Configuration).
No pending code-based migrations.
Applying automatic migration: 201206301526422_AutomaticMigration.
Automatic migration was not applied because it would result in data loss. 
```

请注意，我正在添加 -Verbose 选项，并且我已经使用 -Script 再次尝试了它。但我不知道我们要迁移到什么地方；以及什么 SQL - 或它认为会导致数据丢失的内容。

我不想在这里简单地启用“允许数据丢失”，而是想了解如何对这些迁移进行故障排除。

先感谢您！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-30T23:51:26.800

赶紧跑：

```
PM> Update-Database -Script -Force 
```

这将生成 SQL 并将其显示在窗口中而不运行它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-03T19:31:28.637

发布后我在 Azure 上遇到了这个错误，但是你不能使用 -Force ，所以全局解决方案（并且本地也不需要 -Force）

```
public Configuration()
{
    AutomaticMigrationsEnabled = true;
    AutomaticMigrationDataLossAllowed = true; // <-- THIS LINE
} 
```

# java - 与虚拟对象而不是 this 同步

> ID：11275377
> 
> 赞同：13
> 
> 时间：2012-06-30T15:36:04.077
> 
> 标签：java, multithreading, synchronized

我多次遇到如下代码

```
class Foo {
   private Object lock = new Object();

   public void doSomething() {
      synchronized(lock) {
         ... 
```

我感兴趣的是为什么要创建锁定对象而不是写入`synchronized(this)`？是否可以启用共享锁？我依稀记得读过它是一种优化。真的吗？此外，在某些情况下，将锁声明为 是否有意义`final`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-30T15:39:15.157

1.  不鼓励同步，`this`因为如果对象本身被用作外部的锁，它会破坏内部同步。另外，请记住，`synchronized`方法也`this`用作锁，这可能会导致不良影响。
2.  建议声明锁`final`以防止在`synchronized`块内重新分配锁对象的情况，从而导致不同的线程看到不同的锁对象。请参阅另一个问题：[锁定可变对象 - 为什么它被认为是一种不好的做法？](https://stackoverflow.com/questions/9622315/locking-on-a-mutable-object-why-is-it-considered-a-bad-practice/9622347)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T16:01:13.157

想象一个场景，您可以访问，`thread1`然后访问。同步 on会阻塞，如果或正在访问不应该发生的事情，并且与. 对此的优化是使用两个不同的锁而不是锁定整个类实例。`thread2``method1``thread3``thread4``method2``this``thread3``thread4``thread1``thread2``method1``thread3``thread4``method1`

这是我在 JavaDoc 上找到的一个很好的段落，它反映了这一点：

> 同步语句对于通过细粒度同步提高并发性也很有用。例如，假设 MsLunch 类有两个从未一起使用的实例字段 c1 和 c2。这些字段的所有更新都必须同步，但没有理由阻止 c1 的更新与 c2 的更新交错 - 这样做会通过创建不必要的阻塞来降低并发性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:08:19.330

考虑使用 java.util.concurrent 包中的锁
这可能会提供更优化的锁定，例如 - 使用[ReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html)将使所有读者无需等待即可访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T01:55:08.033

这是“ReentrantReadWriteLock”的完整工作示例。

```
 public class DataReader  {
 private static final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();
 private static final Lock read = readWriteLock.readLock();
 private static final Lock write = readWriteLock.writeLock();
 public static void loadData() {
  try {
   write.lock();
   loadDataFromTheDB());
  } finally {
   write.unlock();
  }
 }

 public static boolean readData() {
  try {
   read.lock();
   readData();
  } finally {
   read.unlock();
  }
 }

 public static List loadDataFromTheDB() {
     List list = new ArrayList();
  return list;
 }

    public static void readData() throws DataServicesException {
     //Write reading logic
    }
} 
```

# javascript - 使用 Greasemonkey 跨域发帖？

> ID：11275378
> 
> 赞同：0
> 
> 时间：2012-06-30T15:36:12.983
> 
> 标签：javascript, post, greasemonkey

我需要用 Greasemonkey 在后台发帖。我试图动态创建一个 iframe 并发布到它，但它不起作用：

```
function crossDomainPost() {
    // Add the iframe with a unique name
    var iframe = document.createElement("iframe");
    var uniqueString = "CHANGE_THIS_TO_SOME_UNIQUE_STRING";
    document.body.appendChild(iframe);
    iframe.style.display = "none";
    iframe.contentWindow.name = uniqueString;

    // construct a form with hidden inputs, targeting the iframe
    var form = document.createElement("form");
    form.target = uniqueString;
    form.action = "http://INSERT_YOUR_URL_HERE";
    form.method = "POST";

    // repeat for each parameter
    var input = document.createElement("input");
    input.type = "hidden";
    input.name = "INSERT_YOUR_PARAMETER_NAME_HERE";
    input.value = "INSERT_YOUR_PARAMETER_VALUE_HERE";
    form.appendChild(input);

    document.body.appendChild(form);
    form.submit();
} 
```

有人说，即使我们发布，我们也无法获取价值。如果我们不能，只需让用户访问该页面就足够了。它可以在 JS、jQuery、AJAX 帖子中。不仅是 form-iframe 技巧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T16:19:27.217

Greasemonkey 内置了对跨域发布的支持。您不需要使用 jsonp，也不需要 iframe。使用[GM_xmlhttpRequest 函数](http://wiki.greasespot.net/GM_xmlhttpRequest#POST_request)。

与其尝试构建表单并发布它，不如直接发送表单编码的数据：

```
var formData1   = "1 INSERT_YOUR_PARAMETER_VALUE_HERE";
var formData2   = "2 INSERT_YOUR_PARAMETER_VALUE_HERE";
var formData3   = "3 INSERT_YOUR_PARAMETER_VALUE_HERE";
// etc.

GM_xmlhttpRequest ( {
    method:     "POST",
    url:        "http://YOUR_SERVER.COM/YOUR_PATH",
    data:       "formData1=" + encodeURIComponent (formData1)
                + "&" + "formData2=" + encodeURIComponent (formData2)
                + "&" + "formData3=" + encodeURIComponent (formData3)
                // etc.
                ,
    headers:    {
        "Content-Type": "application/x-www-form-urlencoded"
    },
    onload:     function (response) {
        console.log (response.responseText);
    }
} ); 
```

# javascript - 在 Bootstrap 中使滚动导航栏粘在浏览器顶部

> ID：11275381
> 
> 赞同：17
> 
> 时间：2012-06-30T15:36:50.557
> 
> 标签：javascript, css, twitter-bootstrap

我是 Twitter Bootstrap 的新手，希望在深的 MastHead 底部有一个 NavBar，当用户垂直滚动页面并且 NavBar 到达页面顶部时，将样式更改为使 NavBar 变为固定的。我想要的效果和[http://www.happycog.com/](http://www.happycog.com/)一样，只是使用 Bootstrap NavBar。

所以，真正的问题是如何在 NavBar 滚动到位置 0 时触发 navbar-fixed-top 样式，即：浏览器的顶部。

任何想法或指针将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-30T23:42:35.770

CSS 类`navbar-fixed-top`是您要添加的。

这是一个例子：

```
<nav class='navbar navbar-inverse navbar-fixed-top sticky' role='navigation'>
    <!-- nav content -->
</nav> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T20:11:24.893

您必须使用 javascript 来执行此操作。这是一个解决方案，它依赖于 jQuery 将导航栏定位转换为固定位置，一旦它到达页面顶部，并在其位置粘贴一个临时 div 以防止布局更改。

[http://jsfiddle.net/T6nZe/](http://jsfiddle.net/T6nZe/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T01:05:35.793

您可以尝试 CSS3 粘性位置：

```
.sticky {
  position: sticky;
  top: 10px; /* When the element reaches top: 10px, it becomes fixed. */
  z-index: 100;
} 
```

浏览器支持：[http ://caniuse.com/#feat=css-sticky](http://caniuse.com/#feat=css-sticky)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-12T23:14:57.227

我相信这就是你要找的： [http ://www.w3schools.com/bootstrap/bootstrap_affix.asp](http://www.w3schools.com/bootstrap/bootstrap_affix.asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-27T15:55:33.017

为了实现浏览器兼容性，以下内容可能更有用。

```
.sticky {
  position: -webkit-sticky;
  position: -moz-sticky;
  position: -ms-sticky;
  position: -o-sticky;
  position: sticky;
  top: 10px;
  z-index: 100;
} 
```

# jquery - load piece of script very last

> ID：11275382
> 
> 赞同：0
> 
> 时间：2012-06-30T15:36:52.860
> 
> 标签：jquery, time, zepto, iscroll

I'm using this terrible API for a client. It packages HTML/JS to an iPad app.

I'm using iScroll but it interferes with the built-in scrolling mechanism. They've provided some code to disable their scrolling, but it only works when loaded after all other scripts have loaded (so the API says).

My code structure

```
<head> 
  <script src="scripts1.js"></script>
  <script src="scripts2.js"></script>
  <script src="scripts3.js"></script>
</head>

<body>
  <script>
  //some page specific code
  </script>
</body> 
```

I'm using some jQuery, but their API is in plain JavaScript. How do I execute their code at the very end? I tried putting it at the end of of the page, but that didn't work. Not sure if using timeout is appropriate?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:42:40.237

You can use [JQuery.getScript](http://api.jquery.com/jQuery.getScript/) and in the success function get other scripts. It should look something like this:

```
 $.getScript('scriptss1.js', function() {
      $.getScript('scriptss2.js', function() {
            $.getScript('scripts3.js', function() {
           });
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:53:28.983

Have you checked out [require.js](http://requirejs.org/)?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T13:44:32.990

another option would be to add the defer attribute

```
<script src="scripts1.js" defer="defer"></script>
<script src="scripts2.js" defer="defer"></script>
<script src="scripts3.js" defer="defer"></script> 
```

see [http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#attr-script-defer](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#attr-script-defer)

# wordpress - 如何在 WordPress 中显示每个类别的帖子数量？

> ID：11275392
> 
> 赞同：0
> 
> 时间：2012-06-30T15:39:09.023
> 
> 标签：wordpress, wordpress-theming

我需要在我的 WordPress 主题中显示每个类别的帖子数量。所以它应该看起来像这样：

*   第一类 (5)
*   2 类 (3)
*   三类 (2)

数字是帖子的数量，所以 5 表示 Cat1 中有 5 篇文章，以此类推......

我写了以下代码： -

```
<ul>
    <?php wp_list_categories( 'orderby=name & title_li' ); ?>
</ul> 
```

那么我应该添加什么来显示每个类别的帖子数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:48:23.843

只需添加 show_count 选项：

```
<?php wp_list_categories('orderby=name&title_li=&show_count=1'); ?> 
```

如果您想进一步自定义输出，还有更多选项：[Wordpress Codex 上的 wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)

# android - 在 Android 中可靠地暂停系统范围内的媒体播放

> ID：11275400
> 
> 赞同：6
> 
> 时间：2012-06-30T15:40:13.253
> 
> 标签：android, android-intent

标题使这听起来比实际简单得多。我正在尝试广播一个可以暂停大多数音乐播放器的意图。

我知道我可以使用创建一个 KeyEvent 来广播 KEYCODE_MEDIA_PLAY_PAUSE ：

```
 long eventTime = SystemClock.uptimeMillis(); 
    Intent downIntent = new Intent(Intent.ACTION_MEDIA_BUTTON, null);
    KeyEvent downEvent = new KeyEvent(eventTime, eventTime, KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE, 0);
    downIntent.putExtra(Intent.EXTRA_KEY_EVENT, downEvent); 
    ctx.sendOrderedBroadcast(downIntent, null); 
```

那行得通。它将按照我的意愿暂停股票媒体播放器，以及支持耳机播放/暂停按钮的大多数其他音乐播放器。但由于某种原因，它只能与股票音乐播放器一起使用一次。我可以按下按钮来调用它，它会暂停音乐。如果我再次开始播放，然后再次按下暂停按钮，它就不起作用了。一旦我重新启动设备，它就会再次工作。但是，对于 Pandora，它可以始终如一地工作。

我想我也许可以解决这个问题，然后在不使用 KeyEvent 的情况下暂停。我用 AudioManager 和另一个意图尝试了这个：

```
 AudioManager mAudioManager = (AudioManager) ctx.getSystemService(Context.AUDIO_SERVICE);    
    if (mAudioManager.isMusicActive()) {
        Intent mediaIntent = new Intent("com.android.music.musicservicecommand");
        mediaIntent.putExtra("command", "pause");
        ctx.sendBroadcast(mediaIntent);
    } 
```

这也有效，并且一直有效。但它本质上是脆弱的，因为通过将意图直接发送到 Android 音乐播放器，它是唯一可以使用的播放器。无法控制 Pandora、Last.FM 等，我需要它与大多数音乐播放器一起工作。

我只是不确定下一步该去哪里。只要可行，我对给出什么样的解决方案并不挑剔。如果你能帮助我使 KeyEvent 工作，太棒了，如果你有一些完全不同的解决方案，太棒了。我只是想让它工作！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T02:30:05.530

我也遇到过这个。感谢您对它的描述，我想我明白发生了什么。您发送 keydown 事件，但从未向系统发送 keyup 事件，因此系统认为播放/暂停按钮被连续按下。我成功使用了这段代码。

```
Intent mediaEvent = new Intent(Intent.ACTION_MEDIA_BUTTON);
KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_PLAY); 
mediaEvent.putExtra(Intent.EXTRA_KEY_EVENT, event);
context.sendBroadcast(mediaEvent);

new Timer().schedule(new TimerTask() {
    @Override
    public void run() {
        Intent mediaEvent = new Intent(Intent.ACTION_MEDIA_BUTTON);
        KeyEvent event = new KeyEvent(KeyEvent.ACTION_UP,KeyEvent.KEYCODE_MEDIA_PLAY); 
        mediaEvent.putExtra(Intent.EXTRA_KEY_EVENT, event);
        context.sendBroadcast(mediaEvent);
    }
}, 100); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T23:53:31.137

要暂停系统范围的音频，您无需启动意图，而是从系统请求音频焦点。

因此，当您希望暂停一切时，请执行以下操作（在 onCreate 中建议）：

```
//The Variables we'll need to create
AudioManager am;
OnAudioFocusChangeListener af;

//I do nothing with this listener, but it's required for the next step.
af = new OnAudioFocusChangeListener() {

      public void onAudioFocusChange(int focusChange) {
          if (focusChange == AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK) {
              // Lower the volume
          } else if (focusChange == AudioManager.AUDIOFOCUS_GAIN) {
              // Raise it back to normal
          }    
      }

}; 

//Do the actual pause
am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
int request = am.requestAudioFocus(af,
    AudioManager.STREAM_MUSIC,
    AudioManager.AUDIOFOCUS_GAIN); 
```

但不要忘记使用以下方法释放焦点：

```
am.abandonAudioFocus(af); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T05:20:57.147

虽然彼得布鲁克斯的回答确实有效，但我发现这效果更好，因为暂停/播放是立即的。在 Android 12 中，由于音频首先淡出，因此获得音频焦点的速度很慢。

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.dispatchMediaKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_PAUSE));
audioManager.dispatchMediaKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_MEDIA_PAUSE)); 
```

最初在这里找到的解决方案： [获取应用程序播放音频的详细信息](https://stackoverflow.com/questions/39290041/get-details-of-app-playing-audio)

# c++ - 在 C++ Qt 应用程序中嵌入 Python/Numpy/Matplotlib？

> ID：11275407
> 
> 赞同：7
> 
> 时间：2012-06-30T15:40:52.757
> 
> 标签：c++, python, qt, matplotlib

我目前正在开发一个小型 C++ Qt 4.8（以及将发布的 5.0）科学应用程序，我想知道是否可以嵌入 Python+Numpy+Maptplotlib（并且即使对于没有Python 安装）在 C++ Qt 应用程序中，以便在我的应用程序中制作漂亮的图？

有没有这样的教程/示例？

非常感谢。

PS：生成临时文件对我来说不是问题，但重要的是用户不必已经安装了 python。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T17:31:32.753

从 C++ 处理 Python 的常用方法是使用[Boost.Python](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/)，但没有它也可以相处。

您需要记住的是，“Python 解释器”由两部分组成：Python DLL/SO 和 Python stdlib，您需要提供这两部分。Python 安装添加的唯一东西是配置和一个可执行文件，它只是其他三个部分的薄包装。

由于您没有配置，一旦[初始化解释器，](http://docs.python.org/extending/embedding.html)您将需要使用[`PySys_SetPath()`](http://docs.python.org/c-api/sys.html#PySys_SetPath)设置`sys.path`来指向 stdlib 和任何其他包。从那里您可以使用 C API 的其余部分来操作解释器，就像使用本机安装一样。

# wcf - messagecontract 和 tcp 绑定的问题

> ID：11275410
> 
> 赞同：0
> 
> 时间：2012-06-30T15:41:19.427
> 
> 标签：wcf, tcp, message

我有一个 wcf 服务，它是异步的并使用 net tcp 绑定。到目前为止，它工作正常。我可以获取元数据，为客户端生成代理类......等等。

但是，我需要定义一个消息契约，因为我需要从客户端向服务发送文件。这个类在一个公共库中，我也有 STE（自我跟踪实体）。

我还在服务中添加了新的异步方法，让我可以发送文件。

我的消息合同如下：

```
[MessageContract]
public class FileDataStream : IDisposable
{
    //[MessageHeader(MustUnderstand = true)]
    public string Name {get; set;}

    //[MessageBodyMember(Order = 1)]
    public System.IO.Stream DataStream {get; set;}
} 
```

如果我使用这个类，当我尝试以与过去相同的方式获取元数据时，现在在 Internet Explorer 中说我找不到该页面。客户端无法连接。如果我使用 netstat -ona | 找到“7997”我什么也没得到，所以服务没有正常运行。

但是，如果在我的消息合同类中我删除了 messagecontract 属性，则一切正常。我的意思是一切正常是因为服务运行正常。

但是，文件的二进制信息无法正确到达服务。在我阅读的有关在 WCF 中传输文件的示例中，我总是看到使用消息协定，因为要发送更多信息，例如文件名，需要消息协定。

所以我想知道我做错了什么。在其他情况下，当我无法获取元数据时，是因为我没有正确设置绑定，但是我不知道在我想使用消息合约时是否需要特殊配置。

我的服务配置如下：

```
<configuration>
  <system.serviceModel>
    <bindings>

      <netTcpBinding>
        <binding name="ServiceDocumentos" maxBufferSize="2147483647"
                      maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647"
                       transferMode="Streamed" closeTimeout="00:01:00"
                       openTimeout="00:01:00" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100">
          <security mode="None"/>
          <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxStringContentLength="2147483647"/>
        </binding>

        <binding name="ServiceCore" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Buffered" closeTimeout="00:01:00"
                       openTimeout="00:01:00" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100">
          <security mode="None"/>
          <readerQuotas maxArrayLength="67108864" maxBytesPerRead="67108864" maxStringContentLength="67108864"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>
      </netTcpBinding>      
    </bindings>

    <services>
      <service behaviorConfiguration="CMMSService" name="GTS.CMMS.Service.Service">

        <endpoint binding="netTcpBinding" bindingConfiguration="ServiceDocumentos"
                 name="ServiceDocumentos" contract="GTS.CMMS.Service.IServiceDocumentos"
         address="ServiceDocumentos/">
        </endpoint>

        <endpoint address ="ServiceCore/"
                 binding="netTcpBinding" bindingConfiguration="ServiceCore"
                 name="ServiceCore" contract="GTS.CMMS.Service.IService">
        </endpoint>

        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"
                 listenUriMode="Explicit">
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:7997/CMMSService" />
            <add baseAddress="net.tcp://localhost:7998/CMMSService" />
          </baseAddresses>
        </host>

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CMMSService">
          <serviceMetadata httpGetEnabled="false"/>
          <serviceDebug includeExceptionDetailInFaults="false" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />

          <serviceThrottling
                    maxConcurrentCalls="64"
                    maxConcurrentInstances="2147483647"
                    maxConcurrentSessions="50"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

谢谢。

# r - sapply 依赖于同一矩阵中的列

> ID：11275412
> 
> 赞同：1
> 
> 时间：2012-06-30T15:41:47.890
> 
> 标签：r, loops

我正在用更快的应用功能替换所有循环。我在使函数依赖于上一列时遇到问题。

目前，我需要根据考试成绩分配一个成绩，这可以使用

```
data <- matrix(runif(100),20,5)
colnames(data) <- letters[1:5]
sapply(colnames(data),function(x){
  ifelse((data[,x] <= 0 & data[,x] < 0.50),'C',
         ifelse((data[,x] >= 0.50 & data[,x] < 0.70) ,'B','A'))}) 
```

但是，是否可以继续使用 apply 函数并扩展代码，以便无论返回“C”的列如何，该列右侧的所有后续成绩都替换为该行中的“C”。

太感谢了

R。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:54:19.283

首先，您不需要任何循环，也不需要`ifelse`当前代码；只需使用`cut`：

```
as.character(cut(data,c(0,0.5,0.7,1),labels=c("C","B","A"),right=FALSE))->cdata
dim(data)->dim(cdata);cdata->data 
```

你的第二个问题（在第一个“C”之后用“C”填充所有单元格）需要一个循环，可以这样完成：

```
t(apply(data,1,function(x)
 ifelse(seq(along=x)<min(c(which(x=="C"),Inf)),x,"C"))
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:38:51.590

不要使用嵌套`ifelse`语句，而是尝试使用`cut`. 它使事情更容易阅读。例如：

```
# Create data
data <- matrix(runif(100),20,5) 
# Assign a grade
x=apply(data, MARGIN=2, cut, breaks=c(0,0.5,0.7,1),labels=c('C','B','A')) 
```

现在您制作了重复的 C 函数，这有点棘手。

```
# Make the repeating C function.
find.c=function(x) 
    if ('C' %in% x) 
        c(
          x[seq(0,match('C',x)-1)], # Everything before the first C
          rep('C',length(x) - match('C',x) + 1) # After the first C
        )  
    else x
# Run it.
t(apply(x,MARGIN=1,find.c)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T16:31:03.913

```
data <- matrix(runif(100),20,5)
colnames(data) <- letters[1:5]
data.let <- sapply(colnames(data),function(x){
  ifelse((data[,x] <= 0 | data[,x] < 0.50),'C',
         ifelse((data[,x] >= 0.50 & data[,x] < 0.70) ,'B','A'))})
# Note the change of & to | above to make your sample data work

apply( data.let, 1, replaceCs ) 
```

其中 `replaceCs 是一个函数，它接受一个向量并将 C 后面的任何内容替换为 C。

一个这样的例子：

```
replaceCs <- function(x) {
   for(i in seq(2,length(x))) {
      if(x[i-1]=="C") x[i] <- "C"
   }
   x
} 
```

或许可以制作出更聪明的东西`rollapply`。

# php - 基于 SQL 查询结果的电子邮件通知不起作用

> ID：11275415
> 
> 赞同：0
> 
> 时间：2012-06-30T15:42:30.220
> 
> 标签：php, sql, email

这是我的PHP：

```
#!/cron.php
<?php

$dbconnect = new mysqli('localhost','root','root','serrano');
$query = "SELECT `app`,`email`,`accept` FROM `requests` WHERE `accept`=1";

$result = mysql_query($query);

if($result && $result->num_rows>=1) {
    $subject = "Your application has been accepted for review.";
    $message='Congratulations. Your application "';

    while($row=$result->fetch_assoc()) {
        $message.="{$row['name']}\"";
        $email="{$row['email']}";
    }

    $message.="has been accepted for review at redacted.";
    if(mail($email, $subject, $message)) {
      //mail successfully sent
    } else {
        echo "fail";
    }
  }
?> 
```

据我所知，查询工作正常。它返回数据库中的相关行。我的 PHP 怎么了？

## 代码更新 1

这是更新的 PHP，修正了 mysqli 错误。然而它仍然返回一个错误：

*PHP 致命错误：在第 5 行 [...] 中的非对象上调用成员函数 query()*

```
#!/cron.php
<?php

$dbconnect = new mysqli('localhost','root','root','serrano');
$result->query('SELECT `app`,`email`,`accept` FROM `requests` WHERE `accept`=1');

if($result && $result->num_rows>=1) {
$subject = "Your application has been accepted for review.";
$message='Congratulations. Your application "';

while($row=$result->fetch_assoc()) {
    $message.="{$row['name']}\"";
    $email="{$row['email']}";
}

$message.="has been accepted for review at redacted.";
if(mail($email, $subject, $message)) {
  //mail successfully sent
} else {
    echo "fail";
}
  }
?> 
```

## 工作代码

好的，这是工作代码。只需对连接和运行查询的方式进行一些调整：

```
#!/cron.php
<?php

$link = mysqli_connect('localhost','root','root','serrano');

$result = mysqli_query($link, 'SELECT `app`,`email`,`accept` FROM `requests` WHERE  `accept`=1');

if($result->num_rows >= 1){
$subject = "Your application has been accepted for review.";
$message='Congratulations. Your application "';

while($row=$result->fetch_assoc()) {
    $message.="{$row['app']}\"";
    $email="{$row['email']}";
}

$message.="has been accepted for review at redacted.";
if(mail($email, $subject, $message)) {
  //mail successfully sent
} else {
    echo "fail";
}
 }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:45:36.260

您正在使用`mysqli`，但同时使用`mysql_query`。

它应该`$dbconnect->query()`代替`mysql_query`.

# macos - Mac OSX 沙箱和公钥

> ID：11275417
> 
> 赞同：0
> 
> 时间：2012-06-30T15:43:00.350
> 
> 标签：macos, cocoa, appstore-sandbox

`~/.ssh`是否有可能在沙盒化的 Mac OSX 应用程序中访问用户的公钥文件（位于 中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T23:27:54.467

没有。`~/.ssh`位于您的沙盒之外，因此您无法访问它，除非用户授予您许可（例如，通过在`NSOpenPanel`. 中选择其中的文件）

请注意，大多数密钥和证书都存储在 Mac OS X 上的 Keychain 中，而不是点目录中。即使在沙箱中也可以访问 Keychain API。根据您要执行的操作，您可以通过钥匙串来完成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:48:10.577

Apple 将 SSH 密钥视为机密的用户信息。你必须请求许可才能使用 NSOpenPanel 访问它们。

# dojox.mobile - 如何更新 dojox.mobile.listitem rightText 值

> ID：11275419
> 
> 赞同：0
> 
> 时间：2012-06-30T15:43:09.740
> 
> 标签：dojox.mobile

我通常不开发客户端（在这种情况下是移动）代码，所以我提前为最有可能是“101”类型的问题道歉。

我的 html 页面中有以下 dojox.mobile 类型层次结构... ScrollableView > EdgeToEdgeList > 多个 ListItems，每个都填充了“moveTo”值。完整的应用程序的外观和流程与我希望的完全一样，但是我无法弄清楚如何使用“孩子”。

换句话说，我试图模拟 iPhone Settings > WiFi ListItem 的行为，它显示了您从 Wi-Fi Networks 子页面中选择的路由器的名称。

我必须相信我忽略了一些处理这种行为的现有属性或事件，因为这是一种广泛使用的视觉设计范例。

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:36:54.270

您必须为此编写一些 JavaScript 代码：

*   连接到“子”列表的 onCheckStateChanged 事件以了解选择了哪个项目；您的处理程序将使用 (item, state) 参数调用，您对 state=true 事件感兴趣；
*   将“父”列表项的“rightText”属性设置为所选子项的标签。

那应该这样做。

# c# - 带样式的数据绑定按钮

> ID：11275420
> 
> 赞同：0
> 
> 时间：2012-06-30T15:43:22.040
> 
> 标签：c#, .net, wpf, data-binding

我有一个`StackPanel`添加具有相同样式的不同按钮的地方。我唯一要更改的是每个按钮内的标签文本。我所做的是创建 Button，分配样式并将其添加到 Stackpanel。现在，我想要的是对应对象的数据绑定。我读了一篇关于数据绑定的文章，但我不明白。

风格：

```
<Style x:Key="EventListUIEventButtonStyle" 
       TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">

                <Grid Name="EventListUIEventButtonGrid" 
                      ShowGridLines="false" 
                      Height="60px" 
                      Margin="0,5,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="45px" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="40px" />
                    </Grid.ColumnDefinitions>

                        <Label Grid.Row="0"
                               Grid.Column="2"
                               Grid.ColumnSpan="2"
                               Grid.RowSpan="1"
                               VerticalAlignment="Bottom"
                               HorizontalAlignment="Right"
                               Foreground="white"
                               FontSize="16"
                               FontWeight="bold">
                           00:01:12
                       </Label>

                       <Label Name="EventListUIEventButtonLabel01" Grid.Row="0"
                              Grid.Column="1"
                              Grid.ColumnSpan="1"
                              Grid.RowSpan="2"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Top"
                              Margin="0 5 0 0"
                              Foreground="black"
                              FontSize="22"
                              FontWeight="bold">
                           Test
                       </Label>

                       <Label Grid.Row="2"
                              Grid.Column="1"
                              Grid.ColumnSpan="1"
                              Grid.RowSpan="1"
                              VerticalAlignment="Bottom"
                              HorizontalAlignment="Center"
                              Foreground="white"
                              FontSize="12">
                           Restaurant
                       </Label>
               </Grid>
           </ControlTemplate>
       </Setter.Value>
   </Setter> 
```

C#代码：

```
Button EventListUIEventButton = new Button();
EventListUIEventButton = new Button();

EventListUIEventButton.Style = (Style)MainWindow.FindResource("EventListUIEventButtonStyle");

EventListUIEventButton.Background = new SolidColorBrush(this.GetFunctionColor(Event.Function));

 // Here i want to set the databinding (Databinding: corresponding Object)

 this.StackPanel.Children.Add(EventListUIEventButton); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:41:13.467

MSDN shows you, how to do binding in code here: [http://msdn.microsoft.com/en-us/library/ms742863.aspx](http://msdn.microsoft.com/en-us/library/ms742863.aspx) .

Your ControlTemplate looks some kind of strange. As Charleh said, usually it would be better to do the binding in xaml.

If you want to bind the text of a Label within your ControlTemplate to the Buttons Content, you have to introduce an TemplateBinding.

```
 <Style x:Key="EventListUIEventButtonStyle" TargetType="Button"> 
    <Setter Property="Template"> 
      <Setter.Value> 
        <ControlTemplate TargetType="Button"> 
          <Grid ...>
            ...
           <Label Content="{TemplateBinding Content}" ... />
            ...
          </Grid> 
        </ControlTemplate> 
    </Setter.Value> 
  </Setter> 
```

If you have some kind of class the implements INotifyPropertyChanged with a property you want to bind to, like this:

```
public class MyData : INotifyPropertyChanged
{
   private string myDataProperty;

   public MyData()
   {
       myDataProperty = "I like to be a label text!";
   }

   public string MyDataProperty
   {
      get { return myDataProperty; }
      set
      {
        myDataProperty = value;
        OnPropertyChanged("MyDataProperty");
      }
   }

   public event PropertyChangedEventHandler PropertyChanged;

   private void OnPropertyChanged(string info)
   {
      PropertyChangedEventHandler handler = PropertyChanged;
      if (handler != null)
      {
        handler(this, new PropertyChangedEventArgs(info));
      }
   }
} 
```

you can try the in code binding from the msdn-link like this:

```
Button EventListUIEventButton = new Button();  
MyData myDataObject = new MyData();
Binding myBinding = new Binding("MyDataProperty");
myBinding.Source = myDataObject;
EventListUIEventButton.SetBinding(ContentProperty, myBinding); 
```

# java - 将图像和视频文件从 android 发送到服务器并接收处理

> ID：11275423
> 
> 赞同：4
> 
> 时间：2012-06-30T15:43:33.687
> 
> 标签：java, android, sockets, image-processing

我想将视频/图像从 android 手机发送到服务器并接收处理后的视频/图像。（例如，我发送图像并以二进制图像或灰度或调整大小等形式接收该图像） 最好和最简单的方法是什么？网址？插座？XML？怎么做？

我试图通过流（[Shared Library not found error on android LogCat](https://stackoverflow.com/questions/11248509/shared-library-not-found-error-on-android-logcat)）来做到这一点，但我也无法管理如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T16:45:56.827

首先，在回答您问题的特定部分之前，这里有一些一般性建议：

**尝试在设备上做一些琐碎的事情。**只需在图像上放置一个蒙版或旋转/调整它的大小非常简单，可以在设备上执行。这样，用户不需要上传任何东西（并*等待*），并且您的服务器负载不会那么重。

**视频和图片可以变大。**考虑到这一点。想到的一个想法是，用户应该只上传一次图像/视频，但应该能够在下载*最终*结果之前执行多次操作。否则，您最终将面临漫长的等待时间和高流量。

**告诉你的用户！**如果您真的开始将（可能是个人的）图片/视频上传到您自己的服务器，请确保您使用可以获得的最大安全性（SSL 应该是必备的）并告诉您的用户您会将他们的内容上传到你的服务器。此外，您应该让他们选择拒绝，否则您可能会面临诉讼。

* * *

现在，到它的技术部分：

从服务器上传/下载文件的工作流程几乎总是相同的：

*   使用[`Socket`](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)
*   在您的文件上获取流（在您的情况下为 a [`FileInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)）
*   `byte`读取-array中的二进制数据块
*   将读取的块写入 Socket 的输出流
*   完成后，关闭流，然后关闭套接字

在您的服务器上，您以相反的方式执行此操作并从 InputStream 读取，将内容写入[`FileOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html).

这是一个看起来如何的小例子：

```
Socket server = new Socket("192.168.178.32", 1337);
OutputStream outputStream = server.getOutputStream();
FileInputStream in = null;
try {
    in = new FileInputStream("/some/path/to/gras.jpeg");
    // Write to the stream:
    byte[] buffer = new byte[1024]; // 1KB buffer size
    int length = 0;
    while ( (length = in.read(buffer, 0, buffer.length)) != -1 ){
        outputStream.write(buffer, 0, length);
    }
    outputStream.flush();
} finally {
    if (in != null) in.close();
    socket.close(); // Will close the outputStream, too.
} 
```

此代码忽略了此处可能引发异常的事实。您需要以适当的方式处理这些问题。

* * *

您应该考虑的一点是，用户可能会从**移动互联网连接**上传他们的内容，这可能会被拦截（例如通过隧道时）。在这种情况下，您需要将 up/download 实现为可恢复。

# php - 卷曲不保存饼干。可能的原因？

> ID：11275425
> 
> 赞同：1
> 
> 时间：2012-06-30T15:44:05.653
> 
> 标签：php, curl

这是我的卷曲功能。它适用于我的本地 Windows 机器。但是在服务器上它无法保存 cookie 文件（没有错误，只是没有出现 cookie 文件，程序失败。）。权限似乎是有序的，因为我能够将 file_put_contents() 放到我试图保存 cookie 的文件夹中。无法创建 cookie 文件的可能原因有哪些？有人可以列出它们，以便我可以一一检查。或欢迎任何其他建议。

求救

谢谢

```
 define('DS',DIRECTORY_SEPARATOR) ;

if (DS == '\\')  {
    define ('CKFILE',"C:/cookiefile.txt" );
}
else {
   define ('CKFILE',"/home/user/public_html/sitename.com/cookiefile.txt" );
}

function curl_fetch($url, $save_cookies = true, $load_cookies = true, $post_data = false, $https = false) {
    file_put_contents("/home/username/public_html/sitename.com/testfile.txt", 'writable file') ; 
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url); // Target site

    if ($load_cookies) curl_setopt($ch, CURLOPT_COOKIEFILE, CKFILE);
    if ($save_cookies) curl_setopt($ch, CURLOPT_COOKIEJAR, CKFILE);

    if ($https) {
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    }
    curl_setopt($ch, CURLOPT_REFERER, "http://www.google.com");

    if ($post_data) {
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    }
    curl_setopt($ch, CURLOPT_TIMEOUT, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); // Follow redirects
    curl_setopt($ch, CURLOPT_MAXREDIRS, 4); // Limit redirections to four
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); // Return in string

    $page = curl_exec($ch);
    //echo $page ;
    curl_close($ch);
    return $page;
} 
```

# php - PHP - 有机会通过 exec() 运行 GUI 程序吗？

> ID：11275430
> 
> 赞同：6
> 
> 时间：2012-06-30T15:44:35.247
> 
> 标签：php, windows, exec, shell-exec

我需要使用 exec 运行网络浏览器（chrome - firefox ..）

我尝试过使用 bat 文件（这里提到的这个[方法](https://stackoverflow.com/questions/1634767/can-php-be-used-to-control-a-gui-application#comment1609850_1634937)）

```
C:\Users\farok\AppData\Local\Google\Chrome\Application\chrome.exe www.google.com 
```

当我使用 Windows 打开文件时，一切顺利，但当我使用 exec 打开文件时，什么也没发生

我试图通过[BrowserControl](http://www.javaworld.com/javaworld/javatips/jw-javatip66.html)类使用 jar 文件来做到这一点

```
BrowserControl.displayURL("www.google.com"); 
```

和bat文件一样，有什么办法吗？

注意：我使用 wamp 2.2、Apache 2.0、PHP V5.3.8

**更新**

我发现在我运行这个命令之后

```
exec('"C:\Program Files (x86)\Mozilla Firefox\firefox.exe" "www.google.com" 2> errors.txt'); 
```

Firefox 剂量在任务管理器中打开，但浏览器界面不可见.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T17:09:14.757

我不是 Windows 专家，但我认为您需要允许`desktop interaction`，如果父进程作为 Windows 服务运行，这并不容易/不可能。php 在 apache 进程内运行，您可能已经将其作为服务运行。

尝试**停止服务并手动启动 httpd.exe**，然后当我通过 apache 通过 localhost url 请求脚本时，以下对我有用。我的 php 通过普通的旧 cgi 与 apache 交互。

```
exec('"C:\Program Files (x86)\Mozilla Firefox\firefox.exe" "http://stackoverflow.com/"'); 
```

注意我对引号的使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-15T19:02:08.920

[所以这是我在这里](https://stackoverflow.com/a/28469300/7917266)找到的另一个很好的解决方法，想法是创建一个调度程序来执行你想要的程序并使用命令调用它

希望这有帮助：

```
shell_exec('SCHTASKS /F /Create /TN _notepad /TR "notepad.exe" /SC DAILY /RU INTERACTIVE');
shell_exec('SCHTASKS /RUN /TN "_notepad"');
shell_exec('SCHTASKS /DELETE /TN "_notepad" /F'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-17T05:40:26.970

我通过在 windows 上禁用 apache 服务并使用 httpd.exe 启动 apache 解决了这个问题，之后可以使用 exec() 打开任何 GUI windows 程序。

```
exec("Path_to_mi_program.exe" "file_to_open"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T17:05:42.830

可能最简单的方法是使用 COM（我假设它只能在 Windows 计算机上本地运行）：

```
<?php
function _exec($cmd) 
{ 
  $WshShell = new COM("WScript.Shell"); 
  $oExec = $WshShell->Run($cmd, 0,false); 
  echo $cmd;
  return $oExec == 0 ? true : false; 
}

_exec("youexe.exe");
?> 
```

取自[这里](http://www.php.net/manual/en/function.exec.php#86438)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-26T18:38:29.170

这只是关于用户。当您运行程序时，它以**系统用户**身份运行。我试过`runas /user:myusername blabla.exe`了，但它返回了 myusername 的密码并退出。

```
$deneme = shell_exec('runas /user:myusername C:\Windows\Temp\putty.exe');
echo "$deneme"; 
```

它返回：

```
myusername için parolayı girin: (english: password for myusername) 
```

# ruby-on-rails - heroku db：推送失败

> ID：11275434
> 
> 赞同：0
> 
> 时间：2012-06-30T15:44:51.633
> 
> 标签：ruby-on-rails, heroku

使用 heroku db:push 时出现“应用程序错误”（我使用的是 Taps 0.3.23）。我已经看到一些建议，这种情况有时会在 Heroku 上发生，然后问题就消失了。我在 8 小时内尝试了很多次，结果相同。我认为以下是相关的 Heroku 日志信息：

```
2012-06-30T10:30:31+00:00 heroku[web.1]: Idling
2012-06-30T10:30:33+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-06-30T10:30:33+00:00 app[web.1]: [2012-06-30 10:30:33] ERROR SignalException: SIGTERM
2012-06-30T10:30:33+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-06-30T10:30:43+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-06-30T10:30:43+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-06-30T10:30:45+00:00 heroku[web.1]: Process exited with status 137
2012-06-30T10:30:45+00:00 heroku[web.1]: State changed from up to down 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:08:46.890

您可能想尝试`:cache => true`从我的样式表中删除。

相关链接：[Stackoverflow](https://stackoverflow.com/questions/3938797/an-interesting-little-500-error)

# jquery - Jquery Animate to top 在 IE 中无法正确设置动画

> ID：11275438
> 
> 赞同：1
> 
> 时间：2012-06-30T15:45:05.357
> 
> 标签：jquery, jquery-animate

我有一张带文字的图片。单击箭头时，文本必须位于顶部。它在 Firefox 中运行良好。在 Firefox 中过渡是平滑的。但他们在 IE 中是一个生涩的人。请告诉我下面的代码有什么问题？如何在所有浏览器中平滑过渡？

```
var r = '-500';
                                $('#innerContainer').find('.current .overlay').animate({    
                                        top: r,
                                        bottom:'0'

                                      },{ queue:false, duration:speed});    
                            } 
```

还有什么是 queue:false 会做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:53:09.943

`queue:false`这样做是为了使动画不会像一条线一样累加起来，直到完成为止。这意味着如果在同一个元素上再次调用 animate ，它将停止当前的。

对于尝试添加`px`值的 IE 问题，看看这是否会改变任何内容。

# c# - 如何将下载文件详细信息传递给异步回调方法并显示进度条，例如已下载 x 个文件

> ID：11275439
> 
> 赞同：0
> 
> 时间：2012-06-30T15:45:09.037
> 
> 标签：c#, .net, wpf, silverlight, windows-phone-7

我正在构建一个 WP7 应用程序，其中有一个对象列表。对象具有 URL、文件名等属性。所以问题是如何将当前对象传递给异步回调方法，以便下载后我可以用文件名保存它。我不想为文件名使用全局变量。

其次，我想显示下载文本 1 0f 5 的进度条。我究竟怎样才能做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:03:03.740

只需创建将存储您需要的所有信息的辅助 DTO 类。例如，

```
 internal class TrackDownloadState
 {
    public string Filename;
    public string Id;
    public Uri Source;
    // and so on, all the information you need
 } 
```

如果您使用 Webclient，请在方法 DownloadStringAsync 或 OpenReadAsync 中使用参数标记这些方法的详细信息：http: [//msdn.microsoft.com/en-us/library/ms144203 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/ms144203(v=vs.95).aspx) [http://msdn。 microsoft.com/en-us/library/ms144212(v=vs.95](http://msdn.microsoft.com/en-us/library/ms144212(v=vs.95) )

如果使用 HttpWebRequest，则在方法 BeginGetResponse 中使用参数状态。该方法的详细信息：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse(v=vs.95).aspx)

# c++ - C++ 模板类型名迭代器

> ID：11275444
> 
> 赞同：47
> 
> 时间：2012-06-30T15:45:33.750
> 
> 标签：c++, templates, iterator, typename

考虑以下头文件：

```
template <typename T> struct tNode
{
    T Data;                      //the data contained within this node
    list<tNode<T>*> SubNodes;       //a list of tNodes pointers under this tNode

    tNode(const T& theData)
    //PRE:  theData is initialized
    //POST: this->data == theData and this->SubNodes have an initial capacity
    //      equal to INIT_CAPACITY, it is set to the head of SubNodes
    {
        this->Data = theData;
        SubNodes(INIT_CAPACITY);   //INIT_CAPACITY is 10
    }

}; 
```

现在考虑另一个文件中的一行代码：

```
list<tNode<T>*>::iterator it();  //iterate through the SubNodes 
```

编译器给了我这个错误信息：`Tree.h:38:17: error: need ‘typename’ before ‘std::list<tNode<T>*>::iterator’ because ‘std::list<tNode<T>*>’ is a dependent scope`

我不知道为什么编译器为此对我大喊大叫。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-30T16:02:00.130

在`list<tNode<T>*>::iterator`中，您有一个*依赖名称*，即依赖于模板参数的名称。

因此，编译器无法检查`list<tNode<T>*>`（此时它没有定义），因此它不知道`list<tNode<T>*>::iterator`是静态字段还是类型。

在这种情况下，编译器假定它是一个字段，因此在您的情况下它会产生语法错误。`typename`要解决这个问题，只需通过在声明前加上一个来告诉编译器它是一个类型：

```
typename list<tNode<T>*>::iterator it 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-30T16:10:58.613

首先，正如其他答案已经指出的那样，嵌套在依赖类型中的类型名称需要在`typename`关键字前面加上。

当模板完全特化时不需要该关键字，这意味着`list<tnode<int>*>::iterator`不需要`typename`，但是当外部类仍然依赖于模板参数`T`时，`typename`必须存在。

```
template <typename T> void foo() {
  list<tnode<int>*>::iterator it1; // OK without typename
  typename list<tnode<T>*>::iterator it2; // typename necessary
} 
```

其次，即使`typename`有

```
typename list<tNode<T>*>::iterator it(); 
```

声明将声明一个函数，而不是迭代器。删除`()`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-30T15:47:52.003

`list<tNode<T>*>::iterator`是一个依赖名称，一种依赖于模板参数的类型。为了声明该变量，您需要使用`typename`关键字：

```
typename list<tNode<T>*>::iterator it = ...; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-13T10:12:26.067

此处提供了有关上述答案的更多背景信息

[C++ typename 关键字的描述](http://pages.cs.wisc.edu/~driscoll/typename.html)

我有一个不同但类似的问题，因为我想为子节点键入一个迭代器：

```
typedef std::vector<NodeType*>::iterator ChildIterator; 
```

这给了我同样的编译器错误。有了这里的建议和上面链接的帮助，我的问题的解决方案是使用

```
typedef typename std::vector<NodeType*>::iterator ChildIterator; 
```

反而。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T11:17:04.820

# 迭代器可以是嵌套类和类属性

关键字解决的歧义`typename`是，`T::iterator`（或在您的情况下`list<tNode<T>*>::iterator`）可以指代`nested type`（案例 1）或`static class attribute`（案例 2）。默认情况下，编译器将这样的构造解释为案例 2。`typename`关键字强制执行案例 1 。

以下示例分别演示了案例 1 和案例 2 的实现。在这两种情况下，都会`T::iterator * iter;`出现该行。在情况 1 中，它仅在`typename`前面的参数有效。在案例 2 中，它只代表一个双精度（没有任何操作）。星号 * 刚刚添加，因为它在案例 1 中是指针的指示符，在案例 2 中是乘法运算符。

**最小可重现示例**

```
#include <iostream>

template <class T>
void foo1() {
    typename T::iterator * iter;
    std::cout << "foo1: iter points to: " << iter << std::endl;
}

class class1 {
    public:
        class iterator // subclass
        {
        };
};

template <class T>
void foo2() {
    double iter = 2.;
    T::iterator * iter;
    std::cout << "foo2: \"T::iterator * iter\" is a simple double: " << T::iterator * iter << std::endl;
}

class class2 {
    public:
        constexpr static double iterator = 11.;
};

int main()
{
    foo1<class1>();
    foo2<class2>();
    // foo1<class2>(); // does not compile
    // foo2<class1>(); // does not compile
    return 0;
} 
```

**输出**

```
foo1: iter points to: 0x4010b0
foo2: "T::iterator * iter" is a simple double: 22 
```

感谢[trueter](https://stackoverflow.com/a/29029599/7128154)指出文章[A Description of the C++ typename keyword](http://pages.cs.wisc.edu/%7Edriscoll/typename.html)。这个答案基本上是一个简短的总结。

# c# - 在按钮控件内填充一个矩形

> ID：11275446
> 
> 赞同：0
> 
> 时间：2012-06-30T15:45:47.057
> 
> 标签：c#, .net, wpf, wpf-controls, expression-blend

我有一个图像（一个框架）和一个矩形（框架内的图片）。我让它们相互匹配，我可以从代码中更改矩形的填充图像，如下所示：

```
myRectangle.Fill = new ImageBrush(new BitmapImage(new Uri(myImagePath))); 
```

但是我必须为一个按钮制作这两个对象，所以我在 Expression Blend 中选择了它们，右键单击并单击“Make Into Control”并选择“Button”然后单击“确定”然后我得到一个按钮。唯一的问题是我无法填充矩形，因为我不知道如何从代码中获取它。

有没有人可以告诉我如何从按钮内的代码到达我的矩形，并用图像填充它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:53:25.543

像你一样填充矩形，然后：

```
button.Content = myRectangle; 
```

在 XAML 中：

```
<Button>
  <Button.Content>
     <Rectangle Width="100" Height="50">
        <Rectangle.Fill>
           <SolidColorBrush Color="Aqua" />
         </Rectangle.Fill>
      </Rectangle>
  </Button.Content>
</Button> 
```

参考：[答案链接](https://stackoverflow.com/a/1756924/1004522)

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content.aspx)进一步找到 ContentControl.Content 属性的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:54:23.640

如果您知道控件的名称，例如 Button，您应该能够在代码隐藏中找到它，如下所示

```
var myRectangleButton = (Button)this.FindName("myRectangleButton"); 
```

# sql - 包含 will_paginate

> ID：11275449
> 
> 赞同：0
> 
> 时间：2012-06-30T15:46:04.077
> 
> 标签：sql, ruby-on-rails, pagination, will-paginate

使用 Rails 3.2。我有一个单独的商店帖子，每个商店都有评论。我打算通过 will_paginate 通过 ajax 加载评论（稍后将完成）。

以下行加载所有评论：

```
@spot = Shop.find(params[:id], :include => [:reviews]) 
```

我尝试使用 will_paginate 对评论进行分页，但还没有弄清楚如何仅对评论进行分页。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:54:00.723

分别取它们。

```
@spot = Shop.find(params[:id])

@reviews = @spot.reviews.paginate(:page => params[:page]) 
```

# google-app-engine - BlobMigrationRecord 错误？

> ID：11275455
> 
> 赞同：0
> 
> 时间：2012-06-30T15:47:01.457
> 
> 标签：google-app-engine, google-cloud-datastore, blobstore

不幸的是，我错误地将我的 blob 密钥存储在数据存储中，因此需要自己迁移它们。

我正在使用主从到 HRD 迁移文档：

[https://developers.google.com/appengine/docs/adminconsole/migration](https://developers.google.com/appengine/docs/adminconsole/migration)

最后，他们提到以下内容以获取新密钥：

```
from google.appengine.ext import blobstore

def GetNewBlobKey(old_key)
  return blobstore.BlobMigrationRecord.get_new_blob_key(old_key) 
```

我完全按照上面的方式做，但得到以下错误：

```
'module' object has no attribute 'BlobMigrationRecord'
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/1.359990895908922231/main.py", line 1302, in post
    userEntity.imageUrlBlobKey = blobstore.BlobMigrationRecord.get_new_blob_key(userEntity.imageUrlBlobKey)
AttributeError: 'module' object has no attribute 'BlobMigrationRecord' 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:18:46.363

它被错误地排除在 1.7.0 版本之外。它将在 1.7.1 版本中，在此之前您可以在您的应用程序中使用此代码：

```
class BlobMigrationRecord(db.Model):
  """A model that records the result of a blob migration."""

  new_blob_key = BlobReferenceProperty(indexed=False)

  @classmethod
  def kind(cls):
    return blobstore.BLOB_MIGRATION_KIND

  @classmethod
  def get_by_blob_key(cls, old_blob_key):
    """Fetches the BlobMigrationRecord for the given blob key.

    Args:
      old_blob_key: The blob key used in the previous app.

    Returns:
      A instance of blobstore.BlobMigrationRecord or None
    """
    return cls.get_by_key_name(str(old_blob_key))

  @classmethod
  def get_new_blob_key(cls, old_blob_key):
    """Looks up the new key for a blob.

    Args:
      old_blob_key: The original blob key.

    Returns:
      The blobstore.BlobKey of the migrated blob.
    """
    record = cls.get_by_blob_key(old_blob_key)
    if record:
      return record.new_blob_key.key() 
```

请注意，这与 1.7.1 版本中包含的内容略有不同。具体来说，“new_blob_key”属性将被命名为“new_blob_ref”（1.7.1 还修复了覆盖 BlobReferenceProperty 的属性名称的错误）。

# xml - 如何让 Powershell 更快地解析 XML 或进一步优化我的脚本？

> ID：11275456
> 
> 赞同：3
> 
> 时间：2012-06-30T15:47:03.920
> 
> 标签：xml, windows, performance, optimization, powershell

我有一个包含 700 万个 XML 文件的设置，大小从几 KB 到几 MB 不等。总而言之，它大约有 180GB 的 XML 文件。我需要执行的工作是分析每个 XML 文件并确定文件是否包含 string `<ref>`，以及是否不将其从当前包含的 Chunk 文件夹中移出到 Referenceless 文件夹中。

我创建的脚本运行良好，但就我的目的而言它非常慢。它计划在大约 24 天内完成对所有 700 万个文件的分析，以每秒大约 3 个文件的速度进行。我可以在我的脚本中更改什么来获得更多性能吗？

此外，更复杂的是，我在我的服务器上没有正确的权限来运行 .PS1 文件，因此脚本需要能够在一个命令中从 PowerShell 运行。如果我有授权​​，我会设置权限。

```
# This script will iterate through the Chunk folders, removing pages that contain no 
# references and putting them into the Referenceless folder.

# Change this variable to start the program on a different chunk. This is the first   
# command to be run in Windows PowerShell. 
$chunknumber = 1
#This while loop is the second command to be run in Windows PowerShell. It will stop after completing Chunk 113.
while($chunknumber -le 113){
#Jumps the terminal to the correct folder.
cd C:\Wiki_Pages
#Creates an index for the chunk being worked on.
$items = Get-ChildItem -Path "Chunk_$chunknumber"
echo "Chunk $chunknumber Indexed"
#Jumps to chunk folder.
cd C:\Wiki_Pages\Chunk_$chunknumber
#Loops through the index. Each entry is one of the pages.
foreach ($page in $items){
#Creates a variable holding the page's content.
$content = Get-Content $page
#If the page has a reference, then it's echoed.
if($content | Select-String "<ref>" -quiet){echo "Referenced!"}
#if the page doesn't have a reference, it's copied to Referenceless then deleted.
else{
Copy-Item $page C:\Wiki_Pages\Referenceless -force
Remove-Item $page -force
echo "Moved to Referenceless!"
}
}
#The chunk number is increased by one and the cycle continues.
$chunknumber = $chunknumber + 1
} 
```

我对 PowerShell 知之甚少，昨天是我第一次打开这个程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:07:31.667

您将希望将`-ReadCount 0`参数添加到您的`Get-Content`命令中以加快它们的速度（这很有帮助）。我从[这篇](https://web.archive.org/web/20160915064456/http://powershell.com/cs/blogs/tobias/archive/2010/11/30/speeding-up-your-scripts.aspx)很棒的文章中学到了这个技巧，该文章显示`foreach`在整个文件的内容上运行比尝试通过管道解析它更快。

此外，您可以使用`Set-ExecutionPolicy Bypass -Scope Process`在当前 Powershell 会话中运行脚本，而无需额外权限！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:12:42.383

PowerShell 管道可能比本机系统调用慢得多。

[PowerShell：管道性能](http://luke.breuer.com/time/item/PowerShell_pipeline_performance/527.aspx)

在本文中，在 PowerShell 上执行的两个等效命令和经典 Windows 命令提示符之间执行性能测试。

```
PS> grep [0-9] numbers.txt | wc -l > $null
CMD> cmd /c "grep [0-9] numbers.txt | wc -l > nul" 
```

这是它的输出示例。

```
PS C:\temp> 1..5 | % { .\perf.ps1 ([Math]::Pow(10, $_)) }

10 iterations

   30 ms  (   0 lines / ms)  grep in PS
   15 ms  (   1 lines / ms)  grep in cmd.exe

100 iterations

   28 ms  (   4 lines / ms)  grep in PS
   12 ms  (   8 lines / ms)  grep in cmd.exe

1000 iterations

  147 ms  (   7 lines / ms)  grep in PS
   11 ms  (  89 lines / ms)  grep in cmd.exe

10000 iterations

 1347 ms  (   7 lines / ms)  grep in PS
   13 ms  ( 786 lines / ms)  grep in cmd.exe

100000 iterations

13410 ms  (   7 lines / ms)  grep in PS
   22 ms  (4580 lines / ms)  grep in cmd.exe 
```

编辑：这个问题的原始答案提到了管道性能以及其他一些建议。为了使这篇文章简洁，我删除了其他与管道性能实际上没有任何关系的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T17:14:28.310

我会尝试使用 Start-Job cmdlet 一次解析 5 个文件。有很多关于 PowerShell Jobs 的优秀文章。如果由于某种原因没有帮助，并且您遇到 I/O 或实际资源瓶颈，您甚至可以使用 Start-Job 和 WinRM 在其他机器上启动工作程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T01:11:32.753

在开始优化之前，您需要准确确定需要优化的位置。您是否受 I/O 限制（读取每个文件需要多长时间）？内存受限（可能不是）？CPU 受限（搜索内容的时间）？

你说这些是 XML 文件；您是否测试过将文件读入 XML 对象（而不是纯文本），并`<ref>`通过 XPath 定位节点？然后，您将拥有：

```
$content = [xml](Get-Content $page)
#If the page has a reference, then it's echoed.
if($content.SelectSingleNode("//ref") -quiet){echo "Referenced!"} 
```

如果您有空闲的 CPU、内存和 I/O 资源，您可能会通过并行搜索多个文件看到一些改进。请参阅有关并行运行多个作业的[讨论。](https://stackoverflow.com/questions/8781666/run-n-parallel-jobs-in-powershell)显然你不能同时运行大量，但是通过一些测试你可以找到最佳位置（可能在 3-5 附近）。里面的一切都是`foreach ($page in $items){`工作的脚本块。

# ruby-on-rails - 避免使用 cron 多次加载 rails 环境

> ID：11275457
> 
> 赞同：0
> 
> 时间：2012-06-30T15:47:18.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用为我生成 cron 行的“无论何时”gem。

```
0 5 * * * /bin/bash -l -c 'cd /projects/my_rails && rails runner -e development "Indexing::LikeIndexer.index_deltas"' 
```

（上面的 cron 仅用于测试，不会在生产中频繁运行 =））

这个和其他 crons（如 thinking_sphinx）需要加载整个 rails 环境才能执行代码。（[Rails cron 与任何时候，设置环境](https://stackoverflow.com/questions/1070231/rails-cron-with-whenever-setting-the-environment)）

是否有任何 gem 可以运行我的 rails 环境并允许它执行代码而无需重新加载整个环境？

我试图用 spin 解决这个问题，但是当我将文件传递给它时，spin 似乎无法识别我的模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:59:44.147

您意识到您的示例每天早上 5 点运行。如果您无法每天重新加载环境一次，您可能会遇到比您尝试修复的问题更大的问题 :)

关于您的问题，不重新加载环境的唯一方法是让进程在加载了环境的情况下留在内存中，然后分叉自己来完成这项工作。[这就是spork](https://github.com/sporkrb/spork)加快测试速度的想法。

我觉得你的问题有点过分了。

您也可以不依赖于工作环境来执行 rake 任务，或者执行控制器操作并 cron 执行 curl 命令（当然还有某种身份验证机制）

# java - Java - instanceof 在应该为真时返回假

> ID：11275460
> 
> 赞同：1
> 
> 时间：2012-06-30T15:48:12.557
> 
> 标签：java, class, casting

所以基本上，我在视图中实现接口，然后将视图作为自定义事件的源传递，在 3 个“instanceof”调用之一中它返回 false。

看法：

```
public class NamedOffensiveStatsView extends BagVectorPanel implements INamedOffensiveStatsView { 
```

事件.toString()：

```
@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append(this.getSource().getClass() + ": "); 
```

e.toString() 打印：

```
class pl.drag0nius.diablo3.DPSCalc.NamedOffensiveStats.NamedOffensiveStatsView$2 
```

instanceof 返回 false：

```
@Override
public void eventFired(Event e) {
    logger.debug("eventFired: " + e.toString());
    if (e.getSource() instanceof INamedOffensiveStatsView) { 
```

我也不能从视图投射到它的界面。

回答：

在我朋友的帮助下，我们发现了问题。

代码调用事件（在视图的 initComponents() 内）：

```
 jComboBox.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            if (comboBoxReady) {
                logger.debug("actionPerformed");
                listener.eventFired(new Event(this, "selection", jComboBox.getSelectedIndex()));
            }
        }
    }); 
```

它应该是什么：

```
 jComboBox.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            if (comboBoxReady) {
                logger.debug("actionPerformed");
                listener.eventFired(new Event(NamedOffensiveStatsView.this, "selection", jComboBox.getSelectedIndex()));
            }
        }
    }); 
```

“this”引用的是嵌套类，而不是视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T15:58:10.410

类名`$2`末尾的 表示源似乎是`NamedOffensiveStatsView`. 因此，它不会是一个实例`NamedOffensiveStatsView`

# ruby-on-rails - Ruby on Rails 模型方法“新”不接受额外参数

> ID：11275461
> 
> 赞同：1
> 
> 时间：2012-06-30T15:48:16.503
> 
> 标签：ruby-on-rails

**更新**

我在下面回答了我的问题，但我仍然在寻求一种更漂亮的方式来实现我的目标。*我有一种感觉，我的控制器对如何做事*了解太多。

* * *

我的 VideoController 中有一个创建操作：

```
def create
  method = 'get_' + params[:video][:provider] + '_video_id'
  provider_video_id = Video.send(method, params[:video][:url])
  thumb = Video.get_thumb_from_youtube(provider_video_id)

  @video = Video.new(params[:video], :provider_video_id => provider_video_id, :thumb => thumb, :views => 0, :likes => 0)
  if @video.save!
    redirect_to video_path('1'), notice:'Video added successfully.'
  else
    render :new
  end
end 
```

我调用 Video.new 并`params[:video]`从用户填写的表单中获取其信息。然后我操纵用户通过表单传入的 URL 以恢复`video_provider_id`和`thumb`.

但是，Rails 没有使用`provider_video_id`and保存视频`thumb`...我在保存时收到此错误：

`Validation failed: Thumb can't be blank, Thumb is invalid, Provider video can't be blank`

我的猜测是该`new`方法不接受额外的参数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:17:17.140

模型中的保存前回调如何？这是一个令人难以置信的默认值示例，但您也可以传入参数。

```
after_initialize :url

private
def url
  self.provider_video_id ||= "default value"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:35:05.080

但是如果你愿意，你总是可以用类似的东西覆盖默认的新动作

```
class Video 

   def new(attr1, attr2)
     super
     #do something with attr2
   end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T23:42:36.970

您可能想使用`.merge()`：

代替

```
method = 'get_' + params[:video][:provider] + '_video_id'
params[:video][:provider_video_id] = Video.send(method, params[:video][:url])
params[:video][:thumb] = Video.get_thumb_from_youtube(params[:video][:provider_video_id])
params[:video][:views] = params[:video][:likes] = 0    

@video = Video.new(params[:video]) 
```

您可以这样做（从原始问题修改代码）：

```
@video = Video.new(params[:video].merge(:provider_video_id => provider_video_id, :thumb => thumb, :views => 0, :likes => 0)) 
```

这会将参数合并到一个哈希中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T15:54:46.997

我解决了这个问题。我认为 Ruby on Rails 的`new`方法不接受多个参数，通常是`params`. 我所做的是我如下：

```
method = 'get_' + params[:video][:provider] + '_video_id'
params[:video][:provider_video_id] = Video.send(method, params[:video][:url])
params[:video][:thumb] = Video.get_thumb_from_youtube(params[:video][:provider_video_id])
params[:video][:views] = params[:video][:likes] = 0    

@video = Video.new(params[:video]) 
```

现在，它似乎起作用了。

# java - 根据“斐波那契数列”寻找答案

> ID：11275467
> 
> 赞同：0
> 
> 时间：2012-06-30T15:49:43.267
> 
> 标签：java, math, arraylist, fibonacci

请看下面的代码

```
package Euler;

import java.util.ArrayList;
import java.util.List;

public class Problem2
{
    public static void main(String[]args)
    {
        int firstNumber=1;
        int secondNumber=2;
        int thirdNumber = 0;

        int sum = 0;

        List array = new ArrayList();

        while(true)
        {

            if(thirdNumber>=400000)
            {
                break;
            }
            else
            {
                thirdNumber = firstNumber+secondNumber;
                System.out.println(thirdNumber);

                 if(thirdNumber%2==0)
                {
                    array.add(thirdNumber);
                }

                firstNumber = secondNumber;
                secondNumber = thirdNumber;
            }
        }

        for( int i=0;i<array.size();i++)
        {
            int num = Integer.parseInt(array.get(i).toString());

            sum = sum+num;
        }

        System.out.println("The Sum is: "+sum);
    }
} 
```

在这里，我试图从 Project Euler 解决[这个](http://projecteuler.net/problem=2)问题，无论如何，这就是问题所在。

> 斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个术语将是：
> 
> 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
> 
> 通过考虑斐波那契数列中值不超过四百万的项，求偶数项之和。

这就是我得到的答案——257112；

它说答案是错误的。我不知道为什么会这样。供您参考，我的母语不是英语，我也没有用英语做数学。所以我怀疑我是否误解了这个问题。

请帮助我找到解决此问题的正确方法。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T15:52:13.367

> 通过考虑斐波那契数列中其值不超过四百万的项...

这里有一个问题：

```
if(thirdNumber>=400000) 
```

那不是四百万。你还需要一个零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:29:26.333

您可以通过以下方式提高效率

*   在计算斐波那契数时计算总和（因此您不必存储它们）
*   如果您确实使用了集合，请使用泛型而不是转换为字符串并解析它（这非常低效）
*   请注意，每三个值都是偶数，因此您不需要检查偶数。

尝试

```
long a = 1, b = 1, c, sum = 0;
while ((c = a + b) < 4000000) {
    sum += c;
    a = b + c;
    b = c + a;
}
System.out.println(sum); 
```

# java - 给我的浏览器一个可通过 javascript 访问的全局变量

> ID：11275470
> 
> 赞同：0
> 
> 时间：2012-06-30T15:49:51.660
> 
> 标签：java, javascript, applet, global-variables, system-variable

我有一个 POS Web 应用程序，它当前在页面加载时执行一个 java 小程序。我不希望将 java 小程序加载到没有为其制作的显示杆的任何计算机上。我能想到的最简单的解决方法是禁用元素，如果变量为“true”，则通过 javascript 重新启用它。javascript 应该以某种方式被赋予一个全局变量，这将让它知道激活小程序。

因此，问题是：有没有办法从浏览器或操作系统中设置全局 javascript 变量？我最初想使用系统变量，但这显然需要 ActiveX 控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:30:08.897

请参阅我在[这里](https://stackoverflow.com/questions/11014753/restore-focus-to-java-applet-when-browser-tab-gains-focus/11016763#11016763)给出的答案。这并不*完全*是您想要的，但您可能会在 Applet 中等待，直到调用某个方法。
希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:47:49.790

所以一个可行的解决方案是运行小程序并让小程序检查计算机的名称（[http://bytes.com/topic/java/answers/699529-get-host-name-run-applet](http://bytes.com/topic/java/answers/699529-get-host-name-run-applet)）。之后，我让小程序自行关闭（`System.exit(0)`），这几乎解决了长时间挂起小程序的任何问题。它并没有完全解决问题，但它是现在的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T18:55:07.760

从我对问题描述的 ..scan 中，鉴于您没有提出问题，我假设是一个问题。

有一个“隐藏的小程序”来检查是否有能力做任何事情，并且在失败时，调用一个说/存储“不”的脚本。然后，该脚本可能会与小程序通信，以使其知道如何出现或做什么。

# java - 从另一个线程调用@Transactional 方法（可运行）

> ID：11275471
> 
> 赞同：20
> 
> 时间：2012-06-30T15:50:58.523
> 
> 标签：java, spring, runnable

是否有任何简单的解决方案可以在新线程中使用 JPA 将数据保存到数据库中？

我的基于 Spring 的 Web 应用程序允许用户管理计划任务。在运行时，他可以创建和启动预定义任务的新实例。我正在使用spring的TaskScheduler，一切正常。

但是我需要将每个触发任务的布尔结果保存到数据库中。我怎样才能做到这一点？

编辑：我必须概括我的问题：我需要从任务中调用我的@Service 类的方法。因为任务结果必须在保存到数据库之前“处理”。

编辑 2：我有问题的代码的简化版本在这里。从调度程序调用 saveTaskResult() 时，会打印出消息，但不会将任何内容保存到数据库中。但是每当我从控制器调用 saveTaskResult() 时，记录都会正确保存到数据库中。

```
@Service
public class DemoService {

    @Autowired
    private TaskResultDao taskResultDao;

    @Autowired
    private TaskScheduler scheduler;

    public void scheduleNewTask() {
        scheduler.scheduleWithFixedDelay(new Runnable() {

            public void run() {
                // do some action here
                saveTaskResult(new TaskResult("result"));
            }

        }, 1000L);
    }

    @Transactional
    public void saveTaskResult(TaskResult result) {
        System.out.println("saving task result");
        taskResultDao.persist(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-30T21:08:18.557

您的代码的问题是您希望在调用`saveTaskResult()`. 这不会发生，因为 Spring 使用 AOP 来启动和停止事务。

如果您从 bean 工厂或通过依赖注入获得事务性 Spring bean 的实例，那么您获得的实际上是 bean 周围的代理。此代理在调用实际方法之前启动事务，并在方法完成后提交或回滚事务。

在这种情况下，您调用 bean 的本地方法，而不通过事务代理。将`saveTaskResult()`方法（用 注释`@Transactional`）放在另一个 Spring bean 中。将这个另一个 Spring bean 注入到 DemoService 中，并从 DemoService 中调用另一个 Spring bean，一切都会好起来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T17:36:36.597

事务保存在线程本地存储中。
如果您的其他方法正在运行带有`@Transactional`注释的线程。
默认设置为`REQUIRED`，这意味着如果您`@Transacitonal`从不同的线程运行带有注释的方法，您将拥有一个新事务（因为该线程的线程本地存储中没有事务）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T10:24:55.100

另一种选择（除了在其中使用 @Transactional 方法创建单独的 Spring Bean 之外）是使用`TransactionTemplate`.

```
final TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);
   taskExecutor.execute(new Runnable() {
        @Override
        public void run() {
            transactionTemplate.execute(new TransactionCallbackWithoutResult() {
                @Override
                protected void doInTransactionWithoutResult(TransactionStatus status) {
                   dao.update(object);
                }
            });
        }
    }); 
```

# c++ - 我应该如何处理 C++ 中的字符串参数？

> ID：11275473
> 
> 赞同：0
> 
> 时间：2012-06-30T15:51:09.900
> 
> 标签：c++, string, arguments

假设我想写一个这样的函数：

```
int get_some_int(string index) {
    ...perform magic...
    return result;
} 
```

但是，我也希望能够这样称呼它：

```
int var = obj.get_some_int("blah"); 
```

但是，我不能这样`const char[4]`做`const string&`

我可以：

```
int get_some_int(char* index) {
    ...perform magic...
    return result;
} 
```

但这会发出很多警告，暗示不应该这样做。

那么处理字符串参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T15:53:20.107

> 我不能这样做，因为 const char[4] is not const string&

不，但是`std::string`有一个非`explicit`转换构造函数，所以创建了一个临时`std::string`的，所以你很清楚。- [http://ideone.com/xlg4k](http://ideone.com/xlg4k)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:56:16.917

它应该像你所做的那样工作

```
int get_some_int(string index) {  // This works as std::string has a constructor
                                  // That takes care of the conversion
                                  // from `char const*`  which you char[4] 
                                  //decays into when passed to a function 
```

但更好的解决方案是使用 const 引用：

```
int get_some_int(string const& index) {  // works for the same reasson 
```

在这里使用 const 表示函数应该如何工作，并传达有关输入如何被使用的信息。同样，当与返回对字符串的 const 引用（例如来自 const 对象）的方法一起使用时，它仍将按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T15:55:39.837

做一个：

int var = obj.get_some_int(string("blah"));

如果你觉得更舒服。

# ruby-on-rails - Rails Mercury 身份验证

> ID：11275478
> 
> 赞同：0
> 
> 时间：2012-06-30T15:52:29.130
> 
> 标签：ruby-on-rails, authorization, administration, helpers, mercury-editor

我在我的应用程序中设置了水银。它工作正常，但由于我对 Rails 还是很陌生，所以无法设置身份验证。这是我在运行后尝试的： **rails generate Merge:install:authentication**

*   看来我可以使用 lib 目录中的模块

    ```
    module Mercury
      module Authentication

         def can_edit?
           true if :authenticate_admin!  //(from device)
         end
      end
    end 
    ```

我尝试在视图中使用此方法，但它不起作用。应该自动加载 Lib 目录，因为该行没有在配置文件中注释。

顺便说一句，只需**在更新方法上添加一个 before_filter**，我就可以防止普通用户确认已编辑的页面。但是，如果他们手动修改不需要**的 Url ，他们仍然可以看到编辑器本身。**

*   我试图覆盖 Mercury Controller，但它甚至不起作用

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:53:21.973

我知道迟到的答案，但如果它对其他人有帮助。

lib/mercury/authentication.rb

```
module Mercury
  module Authentication

    def can_edit?
      if user_signed_in? && current_user.admin?
        true
      else 
        redirect_to root_path
      end
   end

 end
end 
```

应用程序控制器.rb

```
class ApplicationController < ActionController::Base
   protect_from_forgery
   include Mercury::Authentication
 .... 
```

重新启动您的服务器，然后只有管理员可以看到和更新页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:48:33.630

我有同样的问题。对我有用的解决方案是将任何模块处理显式包含到 authentication.rb 中，如下所示：

```
module Mercury
    module Authentication
        include YourAppName::YourAuthenticationModule
        def can_edit?
            admin_signed_in?
        end
    end
end 
```

相应地插入您的模块和身份验证方法并重新启动服务器

# delphi - Delphi - 从组件访问属性到外部单元

> ID：11275479
> 
> 赞同：0
> 
> 时间：2012-06-30T15:52:35.080
> 
> 标签：delphi, oop

我正在 Delphi 中开发一个 64 位应用程序，并将项目分为两个文件夹。一个用于我将用于 GUI 的组件，另一个用于非可视对象和主程序项目。文件夹是分开的，因为我想在其他项目中使用一些组件。Components 文件夹显然在库路径中。

现在我必须开发一个可视化组件，它应该从位于 Main 文件夹中的单元（现在称为 BaseUnit）中读取一些属性。但是 BaseUnit 使用 64 位 asm 中的一些代码，组件无法使用这些代码。克服这个问题的最佳面向对象方法是什么？

我正在使用一些应该读取的对象的简化版本，以便组件能够从我需要的 BaseUnit 中读取属性。我过去已经这样做了，它有效，但我不知道是否有更实用的方法。一种可能是创建一个与组件和主程序都兼容的基类，但我仍然不知道这样做的好处是否会支付重构 BaseUnit 设计的努力。

我希望我以一种可以理解的方式解释了我的问题^_^提前谢谢你，Paolo

**编辑：** 非常感谢大家的回答，编译器 IFDEF 方法本质上是最简单的方法，但是......我想我正在寻找一种方法让我的组件在设计时存在，而不依赖于主要项目。主要项目的工作是将它们链接到其自身的非视觉部分。这是因为我想从一个 void 项目构建一个 GUI，并将组件的属性与我正在处理的“引擎”的对象连接起来（我正在开发一个音频应用程序）。

所有这些建议都需要主文件夹位于组件项目的路径中。现在我试图将虚拟单元放在 Components 文件夹中，它们是 BaseUnit 的副本，仅包含我需要读取的属性。通过这种方式，我可以在运行时将组件链接到真正的 BaseUnit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:23:07.673

善用包含文件：

```
procedure BaseUnitProcThatUsesASM; assembler;
asm
  {$I asmcode.inc}
end; 
```

您可以将 asmcode.inc 放在特定于平台的文件夹中（比如 i386 和 x86_64），并使用编译器宏作为包含路径。我实际上不使用 Delphi，但我想 Delphi 有类似 Free Pascal 的东西。如果没有，您可以为每个平台创建 2 个项目文件，每个项目文件都包含特定文件夹的路径。

不要重构不应该重构的东西；）

# asynchronous - 模块的异步问题 - Titanium

> ID：11275480
> 
> 赞同：0
> 
> 时间：2012-06-30T15:53:08.583
> 
> 标签：asynchronous, titanium, commonjs

我正在尝试创建模块（地图视图、网络、地理位置等），但我面临异步问题。例如，我有 geolocation.js：

```
exports.getLocation = function(){

var lat="";
var lon=""; 
```

// 请求用户使用当前位置服务的权限

```
Ti.Geolocation.purpose = "Receive User Location";

Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;

Titanium.Geolocation.distanceFilter = 10; 
```

// 获取当前位置（触发一次）

Titanium.Geolocation.getCurrentPosition(function(e){

```
 if (e.error){
                    alert('The device cannot get your current location');
                    return;
                }
        var longitude = e.coords.longitude;
        var latitude = e.coords.latitude;
        lon = longitude; lat = longitude;
  });

  // I WANT HERE TO RETURN LAT+LON VALUES
 // return lat+lon; 
```

}

我想从我的 app.js 调用： var location = require('/geolocation'); var latlon= location.getLocation(); 但是 getCurrent 位置是异步的，所以当我使用“return lat+lon”时，我得到空值。我尝试了回调，但他们无法返回 getLocation 的值。有什么通用的方法来管理这个异步函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:41:53.387

是的，您需要对这种函数进行回调：

```
Titanium.Geolocation.getCurrentPosition(function(p) {
    alert(JSON.stringify(p));
}); 
```

# jquery - 在 jquery qtip 中浮动？

> ID：11275481
> 
> 赞同：0
> 
> 时间：2012-06-30T15:53:09.583
> 
> 标签：jquery, flot, qtip

我正在尝试复制 Amazon、Trip Advisor 等正在做的事情，并在将鼠标悬停在平均评论分数上以显示条形图格式的分数细分时显示工具提示类型界面 - 在 qtip 论坛上据说使用 Flot（我的第一个时间像通常使用谷歌图表一样使用它）但是当我把它放在工具提示之外时，当我把它放在页面上时，当我把 div 放在它里面时它就不起作用了。

我的页面是：[http ://solicitor.info/demo/solicitors/?id=15](http://solicitor.info/demo/solicitors/?id=15)

谁能看看我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:44:34.640

When I hit your page, I get a javascript error:

```
Uncaught Invalid dimensions for plot, width = null, height = null 
```

I'm guessing it is trying to render the plot while the "placeholder" div is still hidden inside the qtip.

I would try moving the `$.plot` call into a qtip [onShow](http://craigsworks.com/projects/qtip/docs/api/#callbacks) callback. That way you are sure the div is shown before trying to render the plot.

# php - PHPMailer SMTP 适用于本地服务器，但不适用于生产服务器

> ID：11275487
> 
> 赞同：0
> 
> 时间：2012-06-30T15:53:27.367
> 
> 标签：php, smtp, gmail, google-apps, phpmailer

我有以下 PHPMailer 配置，它在我的本地主机上运行良好，但在生产中不发送电子邮件：

```
//Send a notification email
try {
    $mail = new PHPMailer(true);
    $mail->IsSMTP();
    $mail->SMTPDebug = 0;
    $mail->SMTPAuth = true;
    $mail->SMTPSecure = "tls";
    $mail->Host = "smtp.gmail.com";
    $mail->Port = 587;
    $mail->Username = $username;
    $mail->Password = $password;
    $mail->AddAddress($_POST['username'], $name);
    $mail->SetFrom("no-reply@a-domain-setup-in-google-apps.com", "No-Reply");
    $mail->Subject = $subject;
    $mail->AltBody = $altBody;
    $mail->MsgHTML($bodyHTML);
    $mail->Send();
} catch (phpmailerException $e) {
    echo $e->errorMessage();
    exit;
} catch (Exception $e) {
    echo $e->getMessage();
    exit;
} 
```

当我将 SMTP 调试设置为等于 时`2`，我得到的是：

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP bo7sm9593967igb.2 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [204.93.159.80] 250-SIZE 35882577 250-8BITMIME 250-STARTTLS 250-ENHANCEDSTATUSCODES 250 PIPELINING 
SMTP -> FROM SERVER:220 2.0.0 Ready to start TLS 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [204.93.159.80] 250-SIZE 35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH 250-ENHANCEDSTATUSCODES 250 PIPELINING 
SMTP -> FROM SERVER:250 2.1.0 OK bo7sm9593967igb.2 
SMTP -> FROM SERVER:250 2.1.5 OK bo7sm9593967igb.2 
SMTP -> FROM SERVER:354 Go ahead bo7sm9593967igb.2 
SMTP -> FROM SERVER:250 2.0.0 OK 1341071123 bo7sm9593967igb.2 
```

一切看起来都很好，但我不能再发送电子邮件了。

我很肯定我发送电子邮件的 Google Apps 帐户配置正确（就像以前一样），并且我的登录凭据是正确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:27:52.873

您的电子邮件很可能无法送达，因为`.co.cc`域与垃圾邮件相关联并且通常是不合法的网站；[谷歌已禁止`.co.cc`其索引中的所有域](http://www.seroundtable.com/co-cc-google-removal-13644.html)。

因此，他们也阻止或大量过滤来自这些域的电子邮件是有道理的。

考虑使用普通域，例如以 . 结尾的域`.com`。

# javascript - 使用 javascript/jQuery 将触摸事件应用于每个点击事件

> ID：11275491
> 
> 赞同：2
> 
> 时间：2012-06-30T15:54:08.243
> 
> 标签：javascript, jquery, touch, dom-events, user-experience

网站上的大多数事件都是点击事件。但是，移动浏览器启动点击事件的 300 毫秒延迟显然是不可取的：[https ://developers.google.com/mobile/articles/fast_buttons?hl=de-DE](https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE)

阅读完上面的帖子后，我开始怀疑我是否可以实现某种全局适用的代码，每次触摸/单击可点击按钮、链接等时都会调用触摸事件。目标是消除这 300 毫秒的延迟，让网站感觉更像一个原生应用程序。

从 UI/UX 的角度来看，这个代码片段似乎非常有价值，所以只是想知道人们对此的想法或他们提出的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:58:08.070

那篇文章说这`click`发生在 300ms 之后`touchend`，所以你想做与你所要求的相反的事情：

```
$(document).bind('touchend', function(e) {
    $(e.target).trigger('click');
}); 
```

这将触发从冒泡到文档级别的任何触摸事件的目标的单击事件。这不是一个特别高效的解决方案，但作为一种大锤方法，它应该可以完成这项工作。

# c# - Scrollviewer 自动停止

> ID：11275493
> 
> 赞同：0
> 
> 时间：2012-06-30T15:54:12.423
> 
> 标签：c#, visual-studio-2008, windows-phone-7

我的应用程序中有水平滚动查看器。我希望当我滑动屏幕以滚动它时，它会自动停止在我设置的点上。类似于 android 中的图库，每次滑动只能滑动一张照片。我不知道我的所有页面（如照片）是否必须在一个大页面（5000 像素宽度）上，或者我必须单独处理每个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:41:45.443

用户向左或向右滑动后添加 3-tab`Pivot`并加载下一个/上一个图像`Pivot`

# asp.net - 动态2 html按钮“提交”控件，如何知道在代码中单击了哪个按钮

> ID：11275495
> 
> 赞同：0
> 
> 时间：2012-06-30T15:54:32.367
> 
> 标签：asp.net

我正在将动态按钮实现为 html 控件，但不会触发按钮的单击事件。

我的代码是

```
for (iDynamicPageCount = 0; iDynamicPageCount < GrdResult.PageCount - 1; iDynamicPageCount++)
{
    string sDynamicSybntext = 
        "<li><button type=\"submit\" runat=\"server\" onserverclick=\"btnNext1_Click\" id=" + strName + ">" + (iDynamicPageCount + 2).ToString() + "</button></li>";
    sbPaging.Append(sDynamicSybntext);
} 
```

`GrdResult.PageCount - 1`按钮的数量将创建。

最后加入文字控制

```
p0.Text = sbPaging.ToString(); 
```

当我单击按钮`btnNext1_Click`事件未触发时，仅发生回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:08:28.097

您的所有按钮都不是服务器端，因为您只是在响应流中附加字符串。所以请删除`runat`和`onserverclick`。

喜欢（例如，通过我添加的循环生成您的按钮）

```
<input type="submit" name="pageButton" value="value1" />
<input type="submit" name="pageButton" value="value2" />
<input type="submit" name="pageButton" value="value3" />
<input type="submit" name="pageButton" value="value4" /> 
```

并且您可以从请求对象获取页面加载事件中单击按钮的值

```
 string ValueOfClickedButton = Request["pageButton"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:43:40.670

我可以看到您使用 type="submit" 的问题

所以请把它改成 type="button"

```
type="submit" will submit the form by default
type="button" will not submit form and have no default behaviour. 
```

# api - 在文本字段中的文本旁边将自定义文本添加到推文表

> ID：11275496
> 
> 赞同：0
> 
> 时间：2012-06-30T15:54:42.413
> 
> 标签：api, twitter

我想在来自 UITextField 的文本旁边的 Tweetsheet 中添加自定义文本。同样，我正在使用以下代码，但不知道如何进一步扩展它。任何帮助，将不胜感激。

[tweetsheet setInitialText:textfield.text];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:50:00.047

如何尝试将您想要的所有文本添加到字符串变量中，然后使用：

```
[tweetsheet setInitialText:myVariable]; 
```

# javascript - 通过 for 循环绑定会产生错误的结果

> ID：11275500
> 
> 赞同：2
> 
> 时间：2012-06-30T15:55:04.810
> 
> 标签：javascript, for-loop, dom-events

我的网站上有许多缩略图，它们应该都显示相同的幻灯片，但显示的幻灯片不同（通过添加和删除一个`.hidden`类）。这将由 来完成`function showWork(toShow)`，它`toShow`是一个引用应该可见的幻灯片的数字。该函数还提醒这个参数。

我还想通过将`mouseup`事件绑定到不同的缩略图 div 来使用 JavaScript 来做到这一点。因为我不想单独列出每个绑定，所以我决定将所有 div id 放在一个数组 ( `workArr`) 中并创建一个 for 循环：

```
for(i=0; i < workArr.length; i++){
$("#"+workArr[i]).bind({
    mouseup: function(){
        showWork(i);
        }       
});
} 
```

我的数组的长度为 14。当我运行此代码时，我收到“14”的警报，并且没有显示幻灯片（因为没有 14.slide）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:57:48.913

您需要使用闭包：

```
for(i=0; i < workArr.length; i++){
    (function(i){
        $("#"+workArr[i]).bind({
            mouseup: function(){
                showWork(i);
            }       
        });        
    })(i);
} 
```

# android - 通过 Intent 实现的 Android 摄像机分辨率

> ID：11275505
> 
> 赞同：2
> 
> 时间：2012-06-30T15:55:58.507
> 
> 标签：android

对于我的应用程序，我希望能够以各种分辨率/质量捕获视频。根据 API，只有两个选项：0 或 1：

```
 Intent i = new Intent("android.media.action.VIDEO_CAPTURE");
    i.putExtra(MediaStore.EXTRA_OUTPUT, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    i.putExtra(android.provider.MediaStore.EXTRA_VIDEO_QUALITY, 1); 
```

如何设置视频分辨率：1 提供最好的 1080p，0 提供 MMS 质量（可怕）。

ICS Android 原生相机提供 3 个选项：SD、720p、1080p，我如何获得这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:50:06.610

Using the intent for recording video, as you noted, you have two choices.... If you want more choices, you will need to write your own video recorder.

See [http://developer.android.com/guide/topics/media/camera.html#capture-video](http://developer.android.com/guide/topics/media/camera.html#capture-video) for more information. VERY IMPORTANT: Note the section on MediaRecorder that gives you the options and the sequence that they MUST be entered in. Among those you will find options for video size, frame rate, audio and video encoding bit rates, etc.

Later,
--jim

# makefile - 定位多个目录

> ID：11275506
> 
> 赞同：1
> 
> 时间：2012-06-30T15:55:59.693
> 
> 标签：makefile

我正在尝试创建一个匹配多个目录但没有文件的目标。有没有办法将目标明确标记为目录？

例如：

```
output/%:
    mkdir -p $@ 
```

也匹配文件，这绝对不是我想要的。

基本上，我有许多包含目录名称的变量，如果它们不存在则需要创建，据我所知，最好的方法是：

```
all: directories other_stuff

directories: $(dir1) $(dir2) ...

$(dir1):
    mkdir -p $@
$(dir2):
    mkdir -p $@
... 
```

因此，我可以将目录变量重复为`directories`目标的依赖项，但是为我添加的每个目录创建目标似乎有点矫枉过正且难以维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:05:35.910

这是一种可能性：

```
DIR_LIST = $(dir1) $(dir2) $(dir3)

.PHONY: all
all: directories other_stuff

.PHONY: directories  # Note: you should be marking this as phony
directories: $(DIR_LIST)

$(DIR_LIST):
    mkdir -p $@ 
```

请参阅[http://www.gnu.org/software/make/manual/make.html#Multiple-Targets](http://www.gnu.org/software/make/manual/make.html#Multiple-Targets)。

# jquery - jQuery定位一个元素

> ID：11275507
> 
> 赞同：1
> 
> 时间：2012-06-30T15:56:13.443
> 
> 标签：jquery, target

假设以下情况

```
<div>
 <div1>

   <divA>
   </divA>

  <divB>
  </divB>

 </div1>

 <div2>
 </div2>

</div> 
```

我想定位`<div1>`，`addClass()`在它上面做一个而不给它的孩子添加一个类。

我尝试使用`:nth-child(1)`选择器，或者`:eq()`(我正在使用 Jquery) 。但是`:nth-child(1)`将类添加到所有 1-children 元素并且`:eq()`不适合，因为我想`<div1>`从它的父元素定位。

有人可以帮忙吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:03:04.977

一个真正的跨浏览器版本：

```
$('div').children('div1').addClass('la'); 
```

如果这些 div 没有类：

```
$('div').children().each(function(){
    $(this).addClass('la');
    break;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T15:57:37.293

只需给main parent和第一级 child一个`id`or 。`class``div``div`

例如：

***HTML***

```
<div id="main">
 <div class="div1">

   <divA>
   </divA>

  <divB>
  </divB>

 </div>

 <div class="div2">
 </div>

</div> 
```

***jQuery***

```
$('#main .div1').addClass('something'); 
```

## **[工作样本](http://jsfiddle.net/QStkd/560/)**

**或者**

```
$('#main div:eq(0)').addClass('something'); 
```

## **[工作样本](http://jsfiddle.net/QStkd/559/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:05:31.173

假设您无法编辑标记，您可以`each()`在元素上运行并仅在第一次应用该类：

```
​$('div :nth-child(1)').each(function(i, el){
    if (i == 0) $(this).addClass('red-border');​​​​​​​​​​​​​​​​​​​​
}); 
```

## [看演示](http://jsfiddle.net/f4sue/)

# ruby-on-rails - 如何使这个活动记录查询工作

> ID：11275513
> 
> 赞同：0
> 
> 时间：2012-06-30T15:57:00.057
> 
> 标签：ruby-on-rails, postgresql, activerecord

在我的数据库中，我有一堆不同城市名称的列表。我试图仅保留此数据库中具有城市名称 = X 的列表并删除所有其他城市。

我正在尝试以下活动记录查询：

```
@unwanted_cities = Listing.where('city not in (?)', Listing.where('city = ?', "X")); 
```

但我收到这个错误

```
ActiveRecord::StatementInvalid in Unwanted_cities#index

Showing /Users/AM/Documents/RailsWS/app0521/app/views/unwanted_cities/index.html.erb where     line #31 raised:

PG::Error: ERROR:  operator does not exist: character varying <> integer
LINE 1: SELECT "listings".* FROM "listings"  WHERE (city not in (4,1...
                                                     ^
HINT:  No operator matches the given name and argument type(s). You might need to add  explicit type casts.
: SELECT "listings".* FROM "listings"  WHERE (city not in         (4,10,13,17,18,19,21,23,26,28,29,31,36,39,46,48,49,52,90,97,101,103,105,108,109,111,115,94,5      ,219..............)) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:07:49.047

`@unwanted_cities = Listing.where('city != ?', "X")`

如果我正在阅读的内容是正确的，那么您需要没有名称“X”的城市。您将通过执行上述代码行获得这些城市。

如果你想“移除”所有这些城市，

`@unwanted_cities.delete_all`

或者

`@unwanted_cities.destroy_all`

# android - listView 标题中的 ViewFlipper 和 onTouchListener

> ID：11275514
> 
> 赞同：1
> 
> 时间：2012-06-30T15:57:12.220
> 
> 标签：android, listview, viewflipper

在我的应用程序中，我有一个 listView。我有一个 ViewFlipper，它是 ListView 的标题。

我希望 ViewFlipper 在用户触摸并滑动时切换视图。此外，ViewFlipper 的项目是可点击的。我的问题是我的 ListView 也是可滚动的，但垂直且可点击。

这是一个架构：

![在此处输入图像描述](../Images/b6d87b2284bdd2f1bec739fa345b85c1.png)

首先，我尝试使用 OnTouchEvent。它不起作用，因为即使用户触摸 ViewFlipper 的屏幕 OUT 也会调用该方法。

现在，如果我使用 OuTouchListener，我无法截获用户的手势，也无法弄清楚。

下面是 listView 标头的 XML 代码示例：

```
<ViewFlipper
    android:id="@+id/flipune"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="3" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageButton
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/itemviewflipper1"
            android:layout_width="wrap_content"
            android:layout_height="150dp"
            android:background="@android:color/transparent"
            android:contentDescription="@string/stritemviewflipper" />

        <TextView
            android:id="@+id/titreviewflipper1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/itemviewflipper1"
            android:background="#AA000000"
            android:paddingTop="10dip"
            android:textColor="#ffffffff"
            android:textSize="12dip"
            android:textStyle="bold" >
        </TextView>
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageButton
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/itemviewflipper2"
            android:layout_width="wrap_content"
            android:layout_height="150dp"
            android:background="@android:color/transparent"
            android:contentDescription="@string/stritemviewflipper" />

        <TextView
            android:id="@+id/titreviewflipper2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/itemviewflipper2"
            android:background="#AA000000"
            android:paddingTop="10dip"
            android:textColor="#ffffffff"
            android:textStyle="bold" >
        </TextView>
    </RelativeLayout>

        [...]

</ViewFlipper> 
```

我在活动中定义了 OnTouchListener ：

```
viewFlipper.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent touchevent) {
                switch (touchevent.getAction()) {
                case MotionEvent.ACTION_DOWN: {
                    oldTouchValue = touchevent.getX();
                    break;
                }
                case MotionEvent.ACTION_UP: {           

                    float currentX = touchevent.getX();
                    if (touchevent.getY() < metrics.heightPixels / 3) {
                        if (!viewFlipper.isPressed() && oldTouchValue == currentX) {
                            openDescriptionArticle(index);
                        } else {
                            if (oldTouchValue < currentX) {
                                viewFlipper.setInAnimation(AnimationHelper
                                        .inFromLeftAnimation());
                                viewFlipper.setOutAnimation(AnimationHelper
                                        .outToRightAnimation());
                                viewFlipper.showPrevious();
                                if (index > 0) {
                                    index--;
                                } else {
                                    index= 4;
                                }
                            }
                            if (oldTouchValue > currentX) {
                                viewFlipper.setInAnimation(AnimationHelper
                                        .inFromRightAnimation());
                                viewFlipper.setOutAnimation(AnimationHelper
                                        .outToLeftAnimation());
                                viewFlipper.showNext();
                                if (index < 4) {
                                    index++;
                                } else {
                                    index = 0;
                                }
                            }
                        }
                    }
                    break;
                }
                }
                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:23:17.883

就我而言，有一个`HorizontalPager`内部`ListView`标题。ListView 抓取触摸事件和寻呼机冻结。我通过`ListView`使用`scrollingEnabled`选项实现自定义解决了这个问题。

```
public class StoppableListView extends ListView {
    public boolean scrollingEnabled = true;
    YourActivity parent;

    public StoppableListView(Context context) { super(context); parent = (CalendarActivity)context; }
    public StoppableListView(Context context, AttributeSet attrs) { super(context, attrs); parent = (CalendarActivity)context; }
    public StoppableListView(Context context, AttributeSet attrs, int defStyle) { super(context,attrs); parent = (CalendarActivity)context; }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        if (scrollingEnabled) return super.dispatchTouchEvent(ev);
        // dispatch touch event to your view
        else return parent.yourView.dispatchTouchEvent(ev);
    }

} 
```

当寻呼机处于活动状态时，我设置`listView.scrollingEnabled = false`并将事件正确分派给寻呼机。

# floating - 如何在包含两个浮动div的div之后添加一个div？

> ID：11275515
> 
> 赞同：0
> 
> 时间：2012-06-30T15:57:13.937
> 
> 标签：floating, html

我有 5 个 div，命名为 Header、A、B、C、D。B 和 C 是 A 内的浮动 div。我在 C 之后放了一个。当 B 的文本内容很长时，我对 D（一种页脚）有问题。D 似乎仅仅停留在 Header 之后，并且像 z-index 一样位于 B 之后。这是现场网站：[http ://dkm.org.tr/proje/biyolojik-cesitliligin-ormanciliga-entegrasyonu-projesi.html](http://dkm.org.tr/proje/biyolojik-cesitliligin-ormanciliga-entegrasyonu-projesi.html)

谢谢你。C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:54:07.467

尝试在浮动元素之后使用*clear*属性。

```
clear: both; 
```

例如：

```
<div style="float:left;">B...</div>
<div style="float:left;">C...</div>
<div style="clear:both;"></div> 
```

这应该可以解决您的问题

# java - 重新启动活动时保存一个 int 值

> ID：11275517
> 
> 赞同：1
> 
> 时间：2012-06-30T15:57:28.057
> 
> 标签：java, android, persistent-storage

我是新手，我知道我会因为这个问题而被打败，但如果我得到答案，那将是值得的。我有一个游戏，当用户赢得第一轮比赛时，我希望保存分数并重新启动活动，而不是遍历所有代码并重置每个值。现在如何在活动重新启动时保持分数不重置。我还没有例子。

```
 public class MainActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
// SET UP SPINS
private TextView spins;
private Button spin;

// SET UP CONTROLS
private TextView score;
private ProgressBar progressBar;
private static final int SHOW_BONUSACTIVITY = 1;
    int nextspin = 0;
int alert;
int total = 0;
int totalspins = 14;
public int gamescore = 0;
public int currentgamescore = 0;

   @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.play_layout);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

这是我第一次检查是否有新游戏或是否保存了要在此处使用的高分的地方

```
if (GameState.INSTANCE.getScore() != 0){
        gamescore = GameState.INSTANCE.getScore();} 
```

如果用户获胜，他们将被发送到奖励游戏，然后返回查看他们是否已完成游戏并需要开始新游戏

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case (SHOW_BONUSACTIVITY): {
        if (resultCode == Activity.RESULT_OK) {
            int bonus = data.getIntExtra("money", 0);
            gamescore=(gamescore + bonus);
            score.setText(String.valueOf("SCORE: " + gamescore));
            if (bigwin == true){ 
```

如果他们赢得了第一关，我将在此处保存游戏分数以将其带入新活动。

```
 GameState.INSTANCE.addScore(gamescore);
                Intent intent = new Intent(
                MainActivity.this,
                com.bigdaddyapp.android.blingo.MainActivity.class);
                startActivity(intent);  

            }
            }
        }
    }
    } 
```

下一个代码是枚举活动

```
public enum GameState {
INSTANCE;

  private int score;
  private GameState(){
    score = 0;
  }

  public int getScore(){
    return score;
  }
  public void addScore(int score){
    this.score += score;
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:00:07.833

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)作为一种简单的持久存储机制来保存分数、生命等内容。当关卡结束时，通过[putInt()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putInt%28java.lang.String,%20int%29)保存分数，当您想要获得分数时使用[getInt()](http://developer.android.com/reference/android/content/SharedPreferences.html#getInt%28java.lang.String,%20int%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:15:20.723

作为持久存储值的替代方法（使用共享首选项或 SQLite 数据库），您还可以将值存储在内存中，但存储在更全局的上下文中。这样，您将在重新创建 Activity 时保持状态，但应用程序在关闭时会忘记它们。

对于您的特定情况，这可能不是您所需要的，但有时它是更好的选择。

* * *

**使用 Singleton**，您可以更全局地存储应用程序的状态并在代码中的任何位置检索它。一个例子可能是：

```
public enum GameState{
  INSTANCE;

  private int score;
  private GameState(){
    score = 0;
  }

  public int getScore(){
    return score;
  }
  public void addScore(int score){
    this.score += score;
  }

} 
```

它可以通过简单的编写来使用：

```
GameState.INSTANCE.addScore(20);
GameState.INSTANCE.getScore(); 
```

有多种方法可以实现单例。在我的示例中，我使用了 Joshua Bloch 在他的“Effective Java - Second Edition”一书中记录的方法。[有关更多信息，请参阅维基百科](http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way)。

* * *

**扩展`android.app.Application`**是另一种选择，认为不像使用单例那样推荐。从[JavaDoc](http://developer.android.com/reference/android/app/Application.html)：

> 需要维护全局应用程序状态的基类。您可以通过在 AndroidManifest.xml 的标记中指定其名称来提供自己的实现，这将导致在创建应用程序/包的进程时为您实例化该类。

[可以在此处](https://stackoverflow.com/a/3779802/717341)找到有关如何执行此操作的教程（以及[链接的答案](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables/708317#708317)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T16:22:20.250

当您想结束游戏时，请执行以下操作：

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putInt("gamevariable", gamevariable);

  editor.commit(); 
```

然后在您的 onCreate 方法中，取回您的变量并根据需要使用它：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
myvariable = settings.getInt("gamevariable", false); 
```

作为替代方案，我会使用标准序列化，这是一个更复杂但更简单的选择。

首先将您的整数写入一个 .ser 文件，稍后您可以读取该文件并将其保存到您的项目目录中：

```
OutputStream os = new FileOutputStream("myinteger.ser");
ObjectOutput oo = new ObjectOutputStream(os);
oo.writeObject(myinteger);
oo.close(); 
```

然后在下次加载活动时将整数读回变量：

```
InputStream is = new FileInputStream("myinteger.ser");
ObjectInput oi = new ObjectInputStream(is);
int myinteger = (int) oi.readObject();
oi.close(); 
```

# c - 指示功能失败的 C 方法

> ID：11275520
> 
> 赞同：2
> 
> 时间：2012-06-30T15:57:42.610
> 
> 标签：c

我有一系列 C 函数：

```
const char* find_string(uint8_t id);
int32_t find_int32(uint8_t id);
uint32_t find_uint32(uint8_t id);
uint64_t find_uint64(uint8_t id); 
```

返回找到的项目（在链表中）。对于字符串，我可以返回一个空字符串。但是对于整数值，我想指出是否找到了整数值。执行此操作的 C 习惯用法是什么？

像这样： ？

```
uint32_t find_uint32(uint8_t id, int* success); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T16:00:22.297

没有一种方法可以做到这一点，但典型的解决方案是：

```
int find_uint32(uint8_t id, uint32_t *result) 
```

让函数返回状态码而不是结果。实际结果通过指针“返回”。虽然这里的意见不同，但让函数在失败时返回零可能是个好主意，这样您就可以执行以下操作：

```
if (!find_uint32(42, &out)) {
    /* error */
} 
```

反过来，即通过指针参数返回状态代码并将结果作为函数的返回值的一个原因是，`NULL`如果要忽略错误，您可以允许传递给状态代码。这样，如果您出于某种原因不必担心错误，您的代码将更具可读性；考虑：

```
uint32_t val = find_uint32(42, NULL /* don't care */); 
```

* * *

在某些情况下，您可以保留一个“神奇值”作为错误指示器。正如您所提到的，`NULL`指针适用于字符串。如果您确定某个整数值永远不是有效结果，则可以让它指示错误。例如，如果您有一个返回永远不会超过 0x7FFFFFFF 的**无符号**值的函数，您可以让第 31 位指示错误，剩下的 31 位根据最高位的值携带数据或错误代码。

我通常不鼓励这种做法，理由是神奇的错误编号会使代码比显式返回错误标志更难阅读和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:59:46.400

关于什么：

```
int find_uint32(uint8_t id, uint32_t *val); 
```

您传递一个指向结果的指针并返回`0`成功和`!= 0`错误。

如果您喜欢`find_uint32`在表达式中使用的便利，您还可以返回一个指向元素的指针（或在指向节点的链表中）。您需要取消引用指针以访问该值，但您也可以`NULL`在结果指针中使用以指示错误：

```
uint32_t *find_uint32(uint8_t id); 
```

# .net - 如何在 vb/c#.net 中停止在后台加载水晶报告

> ID：11275522
> 
> 赞同：1
> 
> 时间：2012-06-30T15:57:49.323
> 
> 标签：.net, visual-studio, crystal-reports, dispose

这是我遇到的问题（VS 2010，.net 3.5，Crystal Reports 2008）：

我有一个窗体frmReports，上面有一个CrystalReportsViewer 控件。此表单由另一个表单的 button_click 实例化。在加载 frmReports 时，会将一个报表文档加载到查看器中，这至少需要 3 分钟才能显示（这里效率不成问题；数据库很大，报表使用存储过程）。

出于这个原因，我创建了一个后台工作人员来检查键盘组合。这应该提示用户他已选择中断加载，处理所有内容并关闭表单（frmReports）。

一切运行良好，发送了关键事件，通知了用户（后台工作人员已正确处理），但是在按 OK 关闭消息框后，主线程保持锁定状态（我无法在任何表单上执行任何操作）。

我使用了 ANTS 内存分析器，所有 CrystalDecisions 程序集仍然加载到内存中，报表文档实际上仍在后台工作。

我已经尝试`crViewer.ReportSource.Close()`，将其设置为 = `nothing`，`ReportSource.Database.Dispose()`更改`AppDomain`和卸载程序集，强制`GC.Collect()`和许多组合，但没有任何工作 - 报告仍然没有释放其资源并继续尝试在后台加载（我认为一些非托管线程暂停我的程序不会中断任何东西）。

有什么方法可以正确卸载 Crystal Reports 加载的所有内容？或者强行关闭与数据库的连接——水晶报表与数据库的连接（运行附加的存储过程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:52:08.087

尝试使用您自己的后台工作人员执行此操作，即创建一个线程（保持引用-volatile），启动它，还启动一个计时器以检查取消并在取消时终止线程。这可能会更好。

# java - 从 ArrayList 中删除索引

> ID：11275524
> 
> 赞同：0
> 
> 时间：2012-06-30T15:57:51.087
> 
> 标签：java, android, string, arraylist

我正在尝试创建一个已经具有索引捕获并且只需要从`ArrayList<String>`and中删除的按钮`ArrayList<Integer>`。整数列表可以很好地删除索引，但字符串数组不会。下面的代码：

```
Globals:
ArrayList<String> QandItem = new ArrayList<String>();
ArrayList<Integer> Prices = new ArrayList<Integer>();
ArrayAdapter<String> left;
ArrayAdapter<Integer> right; 
```

这些是在 on create 方法中设置和填写的。我知道它们工作正常，因为我在设备上查看它们时会得到输出。

```
RemoveItem.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // TODO
        if(i >= 0){
            QandItem.remove(i);
            Prices.remove(i);
            left.notifyDataSetChanged();
            right.notifyDataSetChanged();
            ItemList.setAdapter(left);
            PriceList.setAdapter(right);
        }
    }
}); 
```

`i`我要删除的索引在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T16:07:50.470

由于 i 是一个`Integer`，因此您试图删除对象`i`而不是位置 i 处的元素。尝试`i.intValue()`改用。[查看ArrayList.remove(int index)](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28int%29)和[ArrayList.remove(Object o)](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28java.lang.Object%29)之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:09:09.973

如果 i 是 an`Integer`而不是`int`original ，正如 Keppil 所问的那样，`QandItem.remove(i)`它将尝试删除它不持有的对象。试试这个：

```
QandItem.remove(i.intValue()) 
```

# asp.net-mvc - asp中的存储库模式。净MVC3

> ID：11275528
> 
> 赞同：2
> 
> 时间：2012-06-30T15:58:13.890
> 
> 标签：asp.net-mvc, repository-pattern

我最近开始自学 C# 和 Asp.net。我正在尝试构建一个简单的博客应用程序。我对存储库模式的使用感到困惑。我看过很少的教程，并且实现方式各不相同。

对于我的博客应用程序，我有两个数据库表（模型）——博客和评论。目前，我有一个如下所示的 IDbContext：

```
 public interface IDBContext
    {
        IQueryable<Blog> FindAllBlogs();
        IQueryable<Blog> FindBlogsInMonth(int month);
        Blog GetBlog(int id);
        void Add(Blog blog);
        void Update(Blog blog);
        void Delete(Blog blog);

        void Add(Comment comment);
        //void Remove(Comment comment);
    } 
```

我有如下所示的存储库：

```
 public class BlogRepository : IDBContext
    {
        private BlogDb db = new BlogDb();

        public IQueryable<Blog> FindAllBlogs()
        {
            return db.Blogs.OrderByDescending(b => b.PublishDate);
        }

        public Blog GetBlog(int id)
        {
            return db.Blogs.Single(b => b.BlogID == id);
        }
...
} 
```

存储库模式的另一个实现是这样的：

```
public interface IDbContext
{
    IQueryable<Blog> Blogs { get; }
    IQueryable<Comments> Comments { get; }
    int SaveChanges();
    T Attach<T>(T entity) where T : class;
    T Add<T>(T entity) where T : class;
    T Delete<T>(T entity) where T : class;
} 
```

它调用存储库，并且有单独的查询类。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T01:02:21.537

最简单的方法是直接使用实体框架，尤其是实体框架 4.1 及更高版本中出现的新 DbContext 功能。

上下文将包含 DbSet 属性 - 每个属性都是存储库模式的实现，可实现上述所有目标。如果需要单元测试支持，可以使用 IDbSet。

我在网上看到了很多关于 ASP.NET MVC 存储库模式的演示，这些演示最终用自定义存储库包装了实体框架。这是浪费时间 - 它是包装其他代码的代码，除了增加不必要的复杂性之外没有任何直接目的。

# solr - SolrNet/Solr - 大量范围查询导致 400 个错误请求

> ID：11275529
> 
> 赞同：1
> 
> 时间：2012-06-30T15:58:24.643
> 
> 标签：solr, solrnet

在 Win 2008 服务器上的 Tomcat 7 上运行 Solr。

我正在遍历许多变量并创建一组范围查询来创建一个包含 500 多个子句的查询。

```
List<ISolrQuery> queryList = new List<ISolrQuery>();

//THis is for var 1 , I have 6 sets of vars like this...
for (int n = 0; n < N; n++)
                {
                    queryList.Add(new SolrQueryByRange<double>("VAR1_" + n, val1[n] * lowerbound, val1[n] * upperBound));
                }

//...var 2
for (int n = 0; n < N; n++)
                {
                    queryList.Add(new SolrQueryByRange<double>("VAR2_" + n, val2[n] * lowerbound, val2[n] * upperBound));
                }

//...var 3... and so on...

var results = solr.Query(new SolrMultipleCriteriaQuery(queryList.ToArray<ISolrQuery>(),"OR"), new QueryOptions
            {
                Rows = 100,
                Fields = new[] { "FileName, ID,score" },
                Facet = new FacetParameters
                {
                    Queries = new[] 
                    { 
                        new SolrFacetFieldQuery("Extension"), 
                        new SolrFacetFieldQuery("FileName"), 
                    }
                }
            }); 
```

我收到了来自 solr 的 400 错误请求。当我只运行 1 个 var 时，查询工作正常。我假设这是 solr 中的一些布尔查询限制。我确实将 maxBoolClauseCount（从 1024）设置为 9999。但错误仍然存​​在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:08:35.357

可能是因为它遇到了码头的默认 GET 参数大小限制吗？

请参考这个答案[Solr search query returned full head exception](https://stackoverflow.com/questions/11045995/solr-search-query-returning-full-head-exception/11050216#11050216)。

# javascript - 使用 JavaScript 从输入中获取值

> ID：11275541
> 
> 赞同：-4
> 
> 时间：2012-06-30T16:01:12.253
> 
> 标签：javascript, html

我有一个带有输入文本框和按钮的表单。当我单击一个按钮时，我想根据输入文本框的值转到不同的页面。例如：

```
<form name="frm1" id="frm1" action="page.php">
    <input type="text" name="txt_name" id="txt_name" value="simple text" />
    <input type="button" Onclick="redirect_to('page2.php/?id=8&input=this.txt_name.value')" value="Save" />
</form> 
```

我怎样才能得到这个值？这可以在不使用函数的情况下完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:09:45.673

好吧，我会推荐一个功能，原因如下：

1.  更干净的代码。
2.  如果您有多个按钮，则更好的方法。
3.  更少的代码。
4.  更好的可管理性。

将此添加到您的按钮

```
onclick="redirect('mytextbox.value');"; 
```

将此添加到您的标记中`<head>`（只需几行代码）：

```
<script type="text/javascript">
    function redirect(value){
        window.location="page.php/?id=8&input="+value.ToString();
        }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:13:54.933

你为什么不这样做呢？

```
<form name="frm1" id="frm1" action="page2.php">
    <input type="hidden" value="8" name="id" />
    <input type="text" name="txt_name" id="txt_name" value="simple text" />
    <input type="submit" value="Save" />
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:10:54.787

如果你有类似的东西：

```
<form>
  <input type="text" name="formelem" />
  <input type="button" />
</form> 
```

你可以把按钮：

```
onclick="redirect_to('page.php/?id=8&input='+this.form.formelem.value)" 
```

您在按钮上，因此“this”将是按钮，您需要获取可以从中获取输入的表单

另一种方式（如果您不需要其他目的的表格）就是放：

```
<input type="text" id="formelem" />
<input type="button" onclick="redirect_to('page.php/?id=8&input='+document.getElementById('formelem').value)" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T16:03:09.113

```
onclick="window.location.href = 'page.php/?id=8&input=' +this.value.toString()" 
```

# python - 应用引擎：收到的电子邮件被拒绝

> ID：11275543
> 
> 赞同：0
> 
> 时间：2012-06-30T16:01:25.120
> 
> 标签：python, google-app-engine, email

我正在尝试获取准系统应用程序引擎应用程序来处理传入的电子邮件。我遵循了[接收电子邮件](https://developers.google.com/appengine/docs/python/mail/receivingmail)教程，并且我的代码非常少。

但是，当我发送电子邮件说whatever@myapplication.appspot.com 时，谷歌在它到达我的应用程序之前拒绝了它：

> 完全无法传送给下列收件人：
> 
> ```
> whatever@myapplication.appspot.com 
> ```
> 
> 永久失败的技术细节：Google 试图传递您的邮件，但被收件人域拒绝。

这是我的 app.yaml

```
application: myapplication
version: 1
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: /_ah/mail/.+ 
  script: handle_incoming_email.py 

- url: /.*
  script: myapplication.app

inbound_services:
- mail 
```

和 handle_incoming_email.py 取自教程：

```
import logging, email
from google.appengine.ext import webapp 
from google.appengine.ext.webapp.mail_handlers import InboundMailHandler 
from google.appengine.ext.webapp.util import run_wsgi_app

class LogSenderHandler(InboundMailHandler):
    def receive(self, mail_message):
        logging.info("Received a message from: " + mail_message.sender) 
```

知道为什么电子邮件被拒绝吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:14:31.143

您似乎错过`login: admin`了 yaml 文件。

它`whatever@myapplication.appspotmail.com`不是`whatever@myapplication.appspot.com`。

# java - 如何从 JTable 1 到 JTable 2 中获取值？

> ID：11275551
> 
> 赞同：0
> 
> 时间：2012-06-30T16:02:44.933
> 
> 标签：java, swing, jtable

我不知道如何从 to 传递一个`jtable1`值`jtable2`。例如，当我双击 中的行时`jtable1`，它将在 处显示相同的值`jtable2`。任何的想法？我苦苦思索了半天，也解决不了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:31:54.743

如果你想在同一个 JFrame 中将值从一个传递`jTable`到另一个`jTable`，在给定的鼠标单击事件`jTable1`中

```
 jTable2.setValueAt(jTable1.getValueAt(0, 0).toString(), 0, 0);

    jTable2.setValueAt(jTable1.getValueAt(0, 1).toString(), 0, 1);

    jTable2.setValueAt(jTable1.getValueAt(0, 2).toString(), 0, 2); 
```

希望这能解决您的问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:36:32.957

学习教程部分[*如何使用表格：用户选​​择*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)并学习如何[*编写列表选择侦听器*](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)。在您的`jtable1`侦听器中，您可以更新`TableModel`of`jtable2`以显示任何相关数据。

# facebook-graph-api - Facebook 用户相似度？

> ID：11275552
> 
> 赞同：1
> 
> 时间：2012-06-30T16:02:47.647
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-authentication, recommendation-engine

我正在尝试构建一个可以使用来自 facebook 的信息的推荐系统。好吧，在这个过程中，我试图找到用户和他的朋友之间的相似之处。这样我就可以只考虑 n 个相似的朋友信息作为训练数据集，而不是所有的朋友。因此，我将不胜感激有关 facebook 功能的一些建议，这些建议可用作相似度的衡量标准。一个这样的特征是，比如年龄。同年龄段的朋友会很相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:09:28.427

好吧，您可以使用相同的学校/学院，性别，性取向，喜欢的页面，群组...虽然不知道您可以从 FB API 访问什么，您可能需要一个应用程序或查看 OpenGraph

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:09:48.863

参考：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

*   1\. Facebook sdk 或 cURL 可以与应用程序 ID 结合使用，以从 Graph api 查询所需的信息。

参考：[https ://developers.facebook.com/docs/sdks/](https://developers.facebook.com/docs/sdks/)

* * *

*   2\. 需要从用户到应用程序的权限。

参考：[https ://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

* * *

*   3\. 除了权限外，还需要访问令牌

参考：“上面的链接”和[https://developers.facebook.com/docs/authentication/access-token-expiration/](https://developers.facebook.com/docs/authentication/access-token-expiration/)

* * *

*   4\. 用户朋友连接是您需要与之进行比较的数组。

参考：[https ://developers.facebook.com/docs/reference/api/user/#friends](https://developers.facebook.com/docs/reference/api/user/#friends)

* * *

# windows - 在本机 C++ 类中处理 Metro 事件

> ID：11275553
> 
> 赞同：1
> 
> 时间：2012-06-30T16:02:48.680
> 
> 标签：windows, windows-8, microsoft-metro

我想处理原生 c++ 类中的按钮单击事件。我尝试创建一个派生自`Object`处理事件的“处理程序”对象，然后调用 C++ 方法。例如，我尝试了以下代码：

```
ref class GButtonHandler sealed : public Object
 {
 public:
     void Button_Click(Object^ sender, RoutedEventArgs^ e)
     {
     }

    GTextBlockHandler(GButtonImpl * pButtonImpl, Button ^ button)
     {
         button->Click += ref new RoutedEventHandler(this, &GTextBlockHandler::Button_Click);
     }
 }; 
```

认为我可以将`pButtonImpl`指针隐藏起来，然后用它来调用函数中的本机`Button_Clicked`函数。但是在编译这段代码时，我得到了错误：

```
error C3986: '{ctor}': signature of public member contains native type 'GButtonImpl' 
```

因此，它似乎不喜欢我将本机类传递给 ref 对象。有没有办法做到这一点？

请注意，我对开发 Metro 风格应用程序完全陌生，所以请耐心等待！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:42:57.420

好的，现在对我来说一切都有意义。对于其他感兴趣的人，您不能使用具有本机 C++ 参数的公共函数的 WinRT 对象的原因是这些对象将不能被非 C++ 代码使用。但是，（显而易见的？）解决方案是使构造函数私有，并将创建 Object 的类声明为“朋友”类（duh！）。那么一切都很好，编译器很高兴，我也很高兴。

感谢所有花时间阅读本文的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:12:29.467

正确的答案是使用`internal`而不是`public`构造函数。这告诉编译器它只在当前项目中可用，而对外部项目（即用另一种语言编写的库）不可用。

# android - 增加动态创建的tablelayout的tablerow的宽度

> ID：11275556
> 
> 赞同：3
> 
> 时间：2012-06-30T16:03:03.997
> 
> 标签：android

我创建了一个表格布局，其中我的表格行高太小，所以我想增加表格行的高度，请指导我表格是动态创建的，所以我不知道。

代码：我试图在 Latoutparam 整数中指定宽度但不工作

```
public void createTableLayout()
{
    String status="Pending";
    TextView txtid=(TextView)findViewById(R.id.txtcid);
    //TextView txtdate=(TextView)findViewById(R.id.txtDate);
    txtid.setText("Customer Id/Name : "+shopnum+"/"+shopname1);
    btnorder1=(Button)findViewById(R.id.btnOrder123);
    btnBack1=(Button)findViewById(R.id.btnBack1);
    txtTotalAmount=(TextView)findViewById(R.id.txtTotalAmt);
    btnorder1.setOnClickListener(new View.OnClickListener()
    {       
        @Override
        public void onClick(View v) 
        {
            ShowcOrder1();
            int rcount=(table).getChildCount();
            SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
            String currentDateandTime = sdf.format(new Date());
            for(int r=1;r<rcount;r++)
            {
                TableRow row=(TableRow)table.getChildAt(r);
                int vcount=(row).getChildCount();
            //  String str=
                for(int v1=0;v1<vcount;v1++)
                {
                    TextView tv = (TextView)(((TableRow)row)).getChildAt(v1);

    insertIntoOrderDetails(String.valueOf(orderid),ProdcutId,PackageId,Quantity);
                }
                insertIntoOrder(String.valueOf(orderid), currentDateandTime, shopnum,String.valueOf(roundtotal), sid);
                Toast.makeText(getApplicationContext(), "Order Placed",Toast.LENGTH_LONG).show();
                finish();
            //  Toast.makeText(getApplicationContext(), "round: "+roundtotal,Toast.LENGTH_LONG).show(); 
            }

        });

        btnBack1.setOnClickListener(new View.OnClickListener()
        {   
            @Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                finish();
            }
        });

        //txtdate.setText("Order Date is : "+odate);
            table = (TableLayout) findViewById(R.id.tbpastorderdetails);
            TableRow tr_heading = new TableRow(Pastorder.this);
            tr_heading.setId(10);
            tr_heading.setBackgroundColor(Color.BLACK);
            tr_heading.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

            TextView label_product_id = new TextView(Pastorder.this);
            label_product_id.setId(20);
            label_product_id.setText("PID");
            label_product_id.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_product_id); // add the column to the table row

            //TextView label_question = new TextView(this);
            TextView label_package_id = new TextView(Pastorder.this);
            label_package_id.setId(20);
            label_package_id.setText("  Pack.ID");
            label_package_id.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_package_id); // add the column to the table row

            //TextView label_question = new TextView(this);
            TextView label_product = new TextView(Pastorder.this);
            label_product.setId(20);
            label_product.setText(" PRODUCT");
            label_product.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_product); // add the column to the table row
                                                // here
        //  Toast.makeText(ExaminationActivity.this,"hi try ",Toast.LENGTH_LONG).show();
            //TextView label_answer = new TextView(this);
            TextView label_catagory = new TextView(Pastorder.this);
            label_catagory.setId(21);// define id that must be unique
            label_catagory.setText("    CATAGORY"); // set the text for the header
            label_catagory.setTextColor(Color.WHITE); // set the color
            // label_weight_kg.setPadding(5, 5, 5, 5); // set the padding (if
            // required)
        //  label_weight_kg.setPadding(2, 2, 2, 2);
            tr_heading.addView(label_catagory); // add the column to the table row
                                                    // here

            //TextView label_youranswer = new TextView(this);
            TextView label_package = new TextView(Pastorder.this);
            label_package.setId(20);
            label_package.setText(" PACKAGE");
            label_package.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_package); // add the column to the table row
                                                // here
            TextView label_weight = new TextView(Pastorder.this);
            label_weight.setId(20);
            label_weight.setText("  WEIGHT");
            label_weight.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_weight); // add the column to the table row

            TextView label_qty = new TextView(Pastorder.this);
            label_qty.setId(20);
            label_qty.setText(" QUANTITY");
            label_qty.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_qty); // add the column to the table row

            TextView label_amt = new TextView(Pastorder.this);
            label_amt.setId(20);
            label_amt.setText(" AMOUNT");
            label_amt.setTextColor(Color.WHITE);
            //label_question.setPadding(2, 2, 2, 2);
            // label_date.setPadding(5, 5, 5, 5);
            tr_heading.addView(label_amt); // add the column to the table row       
            table.addView(tr_heading, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        }

public void addRows()
{
    try
    {               
        msaledb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
        Cursor allrows  = msaledb.rawQuery("SELECT * FROM " + PRODUCT_TABLE+" WHERE Product_ID = '" + pid +"'", null);
        Cursor allrows1  = msaledb.rawQuery("SELECT * FROM " + PACKAGING_TABLE ,null);
        if(allrows.moveToFirst() && allrows1.moveToFirst())// && allrows1.moveToFirst())
         {         
            int i=1;    
            do
            {   
                tr = new TableRow(Pastorder.this);
                tr.setId(i);
                tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

                TextView tvpid = new TextView(Pastorder.this);
                tvpid.setId(11);
                tvpid.setText(""+pid);
                tvpid.setPadding(2, 0, 5, 0);
                tvpid.setTextColor(Color.BLACK);
                tr.addView(tvpid);

                TextView tv_pack_id = new TextView(Pastorder.this);
                tv_pack_id.setId(12);
                tv_pack_id.setText("    "+packid);
                tv_pack_id.setPadding(2, 0, 5, 0);
                tv_pack_id.setTextColor(Color.BLACK);
                tr.addView(tv_pack_id);

                TextView tv = new TextView(Pastorder.this);
                tv.setId(1);
                tv.setText("    "+allrows.getString(2));
                tv.setPadding(2, 0, 5, 0);
                tv.setTextColor(Color.BLACK);
                tr.addView(tv);
                TextView tv1 = new TextView(Pastorder.this);
                tv1.setId(2);
                tv1.setText("   "+allrows.getString(3));
                tv1.setPadding(2, 0, 5, 0);
                tv1.setTextColor(Color.BLACK);
                tr.addView(tv1);
                do
                {
                if(allrows1.getString(1).trim().equals(packid.trim()) && allrows1.getString(2).trim().equals(pid.trim()))
                {
//                      Toast.makeText(getApplicationContext(), ""+allrows1.getString(2).trim(),Toast.LENGTH_LONG).show();
//                      Toast.makeText(getApplicationContext(), ""+p_id.get(0).trim(),Toast.LENGTH_LONG).show();
                        TextView tv2 = new TextView(Pastorder.this);
                        tv2.setId(3);
                        tv2.setText("   "+allrows1.getString(3));
                        tv2.setPadding(2, 0, 5, 0);
                        tv2.setTextColor(Color.BLACK);
                        tr.addView(tv2);                        
                        TextView tv3 = new TextView(Pastorder.this);
                        tv3.setId(4);
                        tv3.setText("   "+allrows1.getString(4));
                        tv3.setPadding(2, 0, 5, 0);
                        tv3.setTextColor(Color.BLACK);
                        tr.addView(tv3);                        
                        TextView tv4 = new TextView(Pastorder.this);
                        tv4.setId(4);
                        tv4.setText("   "+qty);
                        tv4.setPadding(2, 0, 5, 0);
                        tv4.setTextColor(Color.BLACK);
                        tr.addView(tv4);                        
                        TextView tv5 = new TextView(Pastorder.this);
                        tv5.setId(4);
                        tv5.setText("   "+Integer.parseInt(allrows1.getString(6).trim())*Integer.parseInt(qty.trim()));
                        tv5.setPadding(2, 0, 5, 0);
                        tv5.setTextColor(Color.BLACK);
                        tr.addView(tv5);

                }
                }while(allrows1.moveToNext());

                table.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                i++;
                tr.setOnClickListener(new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        view.setBackgroundColor(Color.LTGRAY);
                       // Toast.makeText(getApplicationContext(),""+tr.getId(),Toast.LENGTH_LONG).show();
                        tr1=(TableRow)view; //assign selected TableRow gobally
                        registerForContextMenu(tr1);
                        openContextMenu(tr1);
                    }
                });

            }while(allrows.moveToNext());

           }

    }
    catch(Exception e)
    {
          Toast.makeText(getApplicationContext(), "Error in search", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:16:47.083

TableRow 布局参数必须是换行内容。与其尝试扩展行以满足您的需要，不如尝试在 TableRow 对象内的视图中手动设置适当的布局参数。包装内容或填充父项不起作用，请尝试使用实际密度像素。

希望这可以帮助

# asp.net - Azure 表的 SQLDependency 解决方案？

> ID：11275559
> 
> 赞同：1
> 
> 时间：2012-06-30T16:03:11.220
> 
> 标签：asp.net, comet, azure-table-storage

我想使用 Azure 表来存储用户发布的数据。每当用户向其他用户发布内容时，它都应该向该用户发出通知。我已经用 PokeIn 研究了 Comet 解决方案，看看是否有办法。由于我是这种技术的新手，我想在编写代码之前了解这种方法。

到目前为止，我要解决这个问题的方法是您可以对服务器进行反向 ajax 调用。然后在服务器上，它会通过一个while循环不断检查数据库，如果有什么变化。将设置睡眠，以免服务器超载。然而，这会给数据库带来很多不必要的检查。我之前[在这里](https://stackoverflow.com/questions/11210953/asp-net-how-to-long-polling-with-pokein)问过一个问题，关于如何进行长轮询。建议使用 SqlDependency 的答案之一。然而，这是特定于 MS SQL 的。如果可能的话，我想知道如何在 Azure 表中执行此操作。

对一般方法的任何评论或答案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:10:28.407

我根据您基本上发布的第一段来回答这个问题，在该段中如何使用 Windows Azure 表（没有任何数据库）来编写这样的解决方案（SO 专业人员可能有不同的方法）。Windows Azure 表本质上是键值对数据库，因此没有 SQLDependency 之类的功能。

作为第一种方法，您可以使用 Windows Azure 表和 Windows Azure 队列来创建这样的解决方案。当您向 Azure 表写入内容时，您会向 Azure 队列发布一条消息。在一个单独的线程中，您可以继续检查队列状态，一旦有消息，您就可以采取必要的措施。这种方法的缺点是您需要不断地查看队列，并且取决于您在轮询中的积极程度，它会增加交易成本（0.001 美元约为 10,000），但积极的检查会很快增加很多。

另一种解决方案是使用 Windows Azure 表和服务总线。使用服务总线，您无需使用轮询，而是可以开发一个解决方案，当您的表格有更新时，您会收到通知，然后您就可以放心了。

我已经看到了用户实施的解决方案，并且取决于应用程序的可用性，成本会有所不同，编码复杂性也会有所不同。在选择 Windows Azure 队列或服务总线之前，我建议阅读下面的文章以了解两者之间的差异以做出更好的决定：

[Windows Azure 队列和 Windows Azure 服务总线队列 - 比较和对比](http://msdn.microsoft.com/en-us/library/hh767287%28VS.103%29.aspx)

# html - 如何让一个固定的后台网站规模化？

> ID：11275569
> 
> 赞同：1
> 
> 时间：2012-06-30T16:04:48.957
> 
> 标签：html, background, scaling

所以我设法为我正在工作的一家新应用程序公司建立了一个网站，其中我使用的是大图像，因为它更容易为我快速设置，但是当浏览器大小调整时它会挤压。有没有办法让图像缩放？这是我的 index.html 文件中的代码。非常感谢您的帮助。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>WeShould Inc</title>
<style type="text/css">

<!--[if IE 6]>
<style type="text/css">
html {overflow-y:hidden;}
body {overflow-y:auto;}
#page-background {position:absolute; z-index:-1;}
#content {position:static;padding:10px;}
</style>
<![endif]-->
</head>

<body>
    <div id="page-background"><img src="http://i.imgur.com/DJaWd.jpg" width="100%" height="100%" alt="Fireworks"></div>
    <div id="content">

    </div> */

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:30:57.257

尝试这个：

```
<style type="text/css">
html { 
    background: url(http://i.imgur.com/DJaWd.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://i.imgur.com/DJaWd.jpg', sizingMethod='scale')";
</style> 
```

这应该适用于所有浏览器，包括 IE。

使用示例 - [http://fiddle.jshell.net/FENXB/1/show/](http://fiddle.jshell.net/FENXB/1/show/)

# android - 从列表视图中的文件加载图片；安卓

> ID：11275572
> 
> 赞同：0
> 
> 时间：2012-06-30T16:05:08.770
> 
> 标签：android

我有一个选项卡视图，其中一个选项卡中有一个列表视图。此列表视图显示包含图像的文件的名称。单击名称时，我希望它显示图像。我尝试了许多技术，但仍然遇到错误，我不知道该怎么做。如果您能提供任何帮助或信息，我们将不胜感激。

这是代码：

```
package com.example.classname;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import android.app.ListActivity;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class RecordsActivityTwo extends ListActivity {

private static String f2;
private static String fileNames[];
final File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/classname/Camera");
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    //ListDir(root);
    if (root.isDirectory()){
        //lists the file names into an array
        fileNames = root.list();

        //loop used to remove the jpg suffix on file names
        int cntr = 0;
        while (cntr <= (fileNames.length - 1)) {
            fileNames[cntr] = fileNames[cntr].replace(".jpg", "");
            cntr = cntr + 1;
        }

    } else {
        Toast.makeText(this, "Did not get into the directory", Toast.LENGTH_LONG).show();
    }

    setListAdapter(new ArrayAdapter<String>(this, R.layout.recordsactivitytwo, fileNames));

     final ListView lv = getListView();
     lv.setTextFilterEnabled(true);
     lv.setClickable(true);

     lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

     public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3){

         Object o = lv.getItemAtPosition(position);
         f2 = o.toString() + ".jpg";
         Toast.makeText(getApplicationContext(), f2, Toast.LENGTH_LONG);
         //now write the code for loading the file
         //object o should be the file, so i need to load object o
         //the following code deals with opening the clicked file and displaying it
         imageViewMethod(f2);
         //Intent i = new Intent(getApplicationContext(), ImageViewActivity.class);
         //i.putExtra("text", f2);
         //startActivity(i);
         //ImageView iv = (ImageView)findViewById(R.id.imageviewreader);
         //iv.setImageBitmap(BitmapFactory.decodeFile(f2)); //displays the image from the file to the image view
     }
     });

}

public void imageViewMethod(String file){
    Logger log = Logger.getLogger("com.example.classname");

    try {
    File fileName = new File(root, file);
    String dirFileName = fileName.toString();
    Toast.makeText(getApplicationContext(), dirFileName, Toast.LENGTH_LONG).show();
    ImageView iv = (ImageView)findViewById(R.id.imageviewreader);
    iv.setImageBitmap(BitmapFactory.decodeFile(dirFileName));
    super.setContentView(iv);
    }catch(Exception e){
        Toast.makeText(getApplicationContext(), "Hit Exception", Toast.LENGTH_LONG).show();
        log.log(Level.SEVERE, "uncaught exception", e);
    }
}

} 
```

这是 logcat 输出：

```
06-30 15:59:17.406: E/com.example.ufohunter(569): uncaught exception
06-30 15:59:17.406: E/com.example.ufohunter(569): java.lang.NullPointerException
06-30 15:59:17.406: E/com.example.ufohunter(569):   at com.example.ufohunter.RecordsActivityTwo.imageViewMethod(RecordsActivityTwo.java:93)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at com.example.ufohunter.RecordsActivityTwo$1.onItemClick(RecordsActivityTwo.java:73)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.widget.ListView.performItemClick(ListView.java:3513)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.os.Handler.handleCallback(Handler.java:587)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.os.Handler.dispatchMessage(Handler.java:92)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.os.Looper.loop(Looper.java:130)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at android.app.ActivityThread.main(ActivityThread.java:3683)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at java.lang.reflect.Method.invokeNative(Native Method)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at java.lang.reflect.Method.invoke(Method.java:507)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-30 15:59:17.406: E/com.example.ufohunter(569):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:22:57.600

尝试调试以查看出现问题的阶段。似乎你得到一个空指针异常。

# wordpress - wordpress - 排序多个帖子类型

> ID：11275574
> 
> 赞同：1
> 
> 时间：2012-06-30T16:05:26.353
> 
> 标签：wordpress, sorting, custom-type

我正在尝试在一个页面中订购多个帖子类型 我下面的解决方案正在运行，但帖子没有按类型显示

```
 <?php $args = array_merge( $wp_query->query,
                array( 'post_type' =>array( 'editorial','video','portfolio' ),'posts_per_page=-1','orderby'=>'post_type') );
                }
                query_posts( $args );

                $postType='';

                 if (have_posts()) : while (have_posts()) : the_post();
                 $PT = get_post_type( $post->ID );
                if($postType != $PT){
                 $postType =  $PT;
                echo '<p class="clearfix"><h1>All posts of type : '.$postType.'</h1></p>';
                }   
                ?>  

      <?php
      if($postType == 'editorial'){ ?>
          <?php echo $postType; ?>
          <?php }elseif($postType == 'video'){ ?>
          <?php echo $postType; ?>
          <?php }elseif($postType == 'portfolio'){ 
          <?php echo $postType; ?>
          }
          ?> 
```

它的输出是这样的：

所有类型的帖子：社论

社论

社论

社论

所有类型的帖子：视频

视频

视频

所有类型的帖子：社论//问题

社论

所有类型的帖子：投资组合

文件夹

文件夹

文件夹

文件夹

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:51:08.723

根据[Codex](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)，`post_type`不是`orderby`参数的允许值之一。

解决问题的一种方法是使用[`posts_orderby`filter](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_orderby)，如下所示：

```
function order_posts_by_type($original_orderby_statement) {
    global $wpdb;
    return $wpdb->posts .".post_type ASC";
}

add_filter('posts_orderby', 'order_posts_by_type');

$custom_query = new WP_Query( array(
    'post_type' =>array( 'editorial','video','portfolio' ),
    'posts_per_page' => '-1',
    'orderby'=>'post_type',
    'order' => 'ASC'
) );

remove_filter('posts_orderby', 'order_posts_by_type'); 
```

FWIW，我建议更改`'posts_per_page=-1'`为`'posts_per_page' => -1`与您的其他论点保持一致。

# mysql - 如何使用 MySQL 配置 MvcMusicStore .Net WebApp？

> ID：11275579
> 
> 赞同：3
> 
> 时间：2012-06-30T16:05:55.287
> 
> 标签：mysql, asp.net-mvc, entity-framework-4, web-config, dataprovider

我完全迷路了。我正在尝试使用 MySQL 设置 MvcMusicStore .Net 应用程序（[http://mvcmusicstore.codeplex.com/](http://mvcmusicstore.codeplex.com/)），但是在编译项目时出现了几个错误；

我已经阅读了[http://dev.mysql.com](http://dev.mysql.com)上关于使用 .Net Entity Framework 和 MySQL 的文档，但是我是 EF 的初学者，这些是我没有成功的步骤：

*   我已经安装了 MySQL Server 5.5

*   [在http://mvcmusicstore.codeplex.com/downloads/get/238258](http://mvcmusicstore.codeplex.com/downloads/get/238258)下载了 MvcMusicStore

*   安装 MySQL Connector Net 6.4.4 并在 mysql 中创建 db: CREATE DATABASE `mvcmusicstore`/*!40100 CHARACTER SET utf8 COLLATE utf8_general_ci */;

*   添加了对项目 MvcMusicStore 的以下引用：mysql.data，（未添加 mysql.data.cf 或我收到错误），mysql.data.entity，mysql.web（对于每个库，在属性中，选择“true”复制bin文件夹中的dll）

*   在“web.config”中替换：

    ```
    <connectionStrings>
    <add name="MusicStoreEntities"
    connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf"
    providerName="System.Data.SqlServerCe.4.0"/>
    </connectionStrings> 
    ```

和：

```
 <connectionStrings>
    <add name="MusicStoreEntities"
    connectionString="Server=127.0.0.1; Database=mvc_store; Uid=root; Pwd={* my password *};"
    providerName="MySQL Data Provider" />
    </connectionStrings>
    <system.data>
    <DbProviderFactories>
    <add name="MySQL Data Provider"
    invariant="MySql.Data.MySqlClient"
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
    </system.data> 
```

*   清理项目->编译并重新编译，然后我收到错误：

“为 system.data 创建配置节处理程序时出错：列 'InvariantName' 被限制为唯一。值 'MySql.Data.MySqlClient' 已经存在。”

[所以我已经用如何首先使用 MySql 和实体框架 4.1 代码](https://stackoverflow.com/questions/5764765/how-to-use-mysql-and-entity-framework-4-1-code-first)中找到的代码替换了“dbproviderfactories”部分

```
 <DbProviderFactories>
    <remove invariant="MySql.Data.MySqlClient" />
    <add name="MySQL Data Provider" 
    invariant="MySql.Data.MySqlClient" 
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories> 
```

*   重新编译，然后我得到错误“找不到数据提供者”：

    ```
    Details: 
    ArgumentException: Can not find the data provider. Net Framework required. It may not be installed.

    Error in the source code: 

    Row 17:         ' the albums with the highest count
    Row 18: 
    Row 19:         Return storeDB.Albums.OrderByDescending(Function(a) a.OrderDetails.Count()).Take(count).ToList()
    Row 20:     End Function
    Row 21: End Class

    File: C:\{...}\MvcMusicStore-Completed\MvcMusicStore\Controllers\HomeController.vb    Row: 19 

    stack: 

    [ArgumentException: Can not find the data provider. Net Framework required. It may not be installed.]
    System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1420503
    System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name) +393
    System.Data.Entity.Internal.LazyInternalConnection.Initialize() +47
    System.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel() +9
    System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +262
    System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18
    System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +63
    System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
    System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
    System.Linq.Queryable.OrderByDescending(IQueryable`1 source, Expression`1 keySelector) +66
    MvcMusicStore.HomeController.GetTopSellingAlbums(Int32 count) in C:\Users\Max\Desktop\Projects\MvcStore\MvcMusicStore-Completed\MvcMusicStore\Controllers\HomeController.vb:19
    MvcMusicStore.HomeController.Index() in C:\Users\Max\Desktop\Projects\MvcStore\MvcMusicStore-Completed\MvcMusicStore\Controllers\HomeController.vb:10
    lambda_method(Closure , ControllerBase , Object[] ) +96
    System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
    System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
    System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
    System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
    System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
    System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
    System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
    System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
    System.Web.Mvc.Controller.ExecuteCore() +116
    System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
    System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
    System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
    System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
    System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
    System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
    System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
    System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
    System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
    System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
    System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
    System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184
    --------------------------------------------------------------------------------
    Microsoft .NET Framework:4.0.30319; ASP.NET:4.0.30319.272 
    ```

我不知道该怎么做才能解决它。

先感谢您，

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:36:32.757

您还记得在您的项目中添加对 MySQL 连接器的引用吗？

# android - Android中的形状边框

> ID：11275580
> 
> 赞同：0
> 
> 时间：2012-06-30T16:06:18.803
> 
> 标签：android

如何绘制具有黑色边框和白色背景的矩形？我不理解 xml 中的形状标签！固体和中风都做同样的事情吗？请让我理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:13:24.370

使用形状制作所需的白色矩形，并使用 Stroke 获得所需的黑色边框。在你的 drawables 文件夹中为此定义一个 xml 并使用 . 参考这个链接

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# twitter-bootstrap - Twitter bootstrap：在显示的模式上滑动轮播

> ID：11275584
> 
> 赞同：1
> 
> 时间：2012-06-30T16:06:42.633
> 
> 标签：twitter-bootstrap, jquery-events

我有一个模式，其中包含一个带有 2 张带有登录和注册表单的幻灯片的轮播。

我想实现以下目标：

*   当用户单击站点标题中的“登录”链接时，模式应该打开并且轮播应该滑动到“登录”幻灯片（它位于索引 0 处）。
*   当用户单击站点标题中的“注册”链接时，模式应该打开并且轮播应该滑动到“注册”幻灯片（它位于索引 1）
*   每当发生滑动过渡时，模态标题文本都会更改（绑定到轮播的“滑动”事件）

但是，我似乎无法让它发挥作用。我认为问题在于所有这些事件发生的顺序。

这是基本代码：

```
// Initialize modal
$('.modal').modal()

// Initialize carousel
$('.carousel').carousel()
$('.carousel').carousel('pause') // Pause the carousel so it doesn't auto-rotate

$('.signuplink').on('click', function() {
    $('.carousel').carousel(1).on('slid', function() {
        $('.modal .modal-title').html('Sign Up');
        $('.modal').modal('show');
    });
}); 
```

但它不起作用。当模态未事先显示时，“滑动”事件永远不会发生。所以我尝试显示模态，然后滑动轮播，绑定到模态的“显示”事件，但是当它确实滑动到下一张幻灯片时，“滑动”事件不会发生。更奇怪的是，模态框上的关闭按钮不再起作用，就像所有事件处理都搞砸了一样……

编辑：第一次显示模态时，似乎没有触发“显示”事件。它仅在我隐藏模式时触发。当我再次打开它时，“显示”似乎在正确的时刻被解雇了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:38:21.943

首先，嵌套太多。

您*几乎*不应该在事件或任何事件中嵌套事件绑定`click`，因为每次单击时都会添加另一个侦听器。

这是一个解决方案。

```
var $myModal = $('#myModal').modal({show: false});
var $myCarousel = $('#myCarousel').carousel({'interval': false});

$('.btn').each(function() {
    var $this = $(this);
    var index = $(this).date('slide-index');
    $this.click(function() {
        $myModal.modal('show');
        $myCarousel.carousel(index);
    });
}); 
```

```
<button class="btn" data-slide-index="0">0</button>
<button class="btn" data-slide-index="1">1</button>

<div id="myModal" class="modal fade">
    <div id="myCarousel" class="carousel">
        <div class="carousel-inner">
            <div class="active item">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">×</button>
                    <h3>Title 0</h3>
                </div>
                <div class="modal-body">
                    <p>0</p>
                </div>
            </div>
            <div class="item">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">×</button>
                    <h3>Title 1</h3>
                </div>
                <div class="modal-body">
                    <p>1</p>
                </div>
            </div>
        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div>
</div> 
```

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/yth5B/)

但是如果你激活滑动效果仍然有一个错误：`Carousel`对象`sliding: true`在几次滑动后保持 - 从而阻止未来的滑动；欢迎改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T04:48:15.227

轮播的索引对我来说不能正常工作，所以我使用如下所示。

```
var $myModal = $('#myModal').modal({show: false});
var $myCarousel = $('#myCarousel').carousel({'interval': false});

$('.btn').click(function() {
    $myModal.modal('show');
    $myCarousel.carousel($(this).index('.btn'));
}); 
```

# php - 多维数组中最常见的值

> ID：11275585
> 
> 赞同：0
> 
> 时间：2012-06-30T16:06:46.353
> 
> 标签：php, arrays

我的问题可能是重复的，但我真的觉得很难。（我已阅读相关主题）

这是数组：

```
Array
(
    [0] => Array
        (
            [legend] => 38440
        )

    [1] => Array
        (
            [bestw] => 9765
        )

    [2] => Array
        (
            [fiuna] => 38779
        )

    [3] => Array
        (
            [adam] => 39011
        )

    [4] => Array
        (
            [adam] => 39011
        )

    [5] => Array
        (
            [adam] => 39011
        )

) 
```

我尝试了很多方法来处理这个数组并找出最常见的值。我期望的结果是“亚当”

```
$countwin = array_count_values($winnernames);
$maxwin = max($countwin);
$mostwinner = array_keys($countswin, $maxwin); 
```

编辑：我的数组是这样`array("A"=>"1" , "B"=>"2" , "A"=>"1")` 的，它应该返回 A 是最常见的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:26:10.387

迭代你的数组并计算你得到的值怎么样？

```
$occurences = array();
foreach ($data as $row) {
  foreach ($row as $key => $score) {
    if (empty($occurences[$key])) {
      $occurences[$key] = 1;
    } else {
      $occurences[$key]++;
    }
  }
} 
```

然后排序

```
arsort($occurences); 
```

并获取排序数组的第一个元素

```
$t = array_keys($occurences);
$winner = array_shift($occurences); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T16:19:17.083

你可以试试这段代码。确实是蛮力的方法。但是快速搜索让我发现这是一个有用的：

```
function findDuplicates($data,$dupval) {
$nb= 0;
foreach($data as $key => $val)
if ($val==$dupval) $nb++;
return $nb;
} 
```

**编辑**：对不起，我误解了你的问题！但这可能是找到最大计数器的第一个提示。

# backbone.js - Backbone.js - 视图和模型之间的关系？

> ID：11275587
> 
> 赞同：1
> 
> 时间：2012-06-30T16:07:16.443
> 
> 标签：backbone.js

我有几个不同的问题，我希望这个例子很容易理解。该代码使用默认隐藏元素的 HTML 模板（使用 CSS）。主干视图使用模型中的数据来显示适当的值，或者如果模式中没有值，则隐藏 UI 元素。

给定一个默认隐藏所有内容的模板（使用 CSS），例如：

```
<script type="text/template" id="Person-Template">
    <span class="fname" title="FirstName"></span>
    <span class="lname" title="LastName"></span>
    <span class="age" title="Age"></span>
</script> 
```

要隐藏每个 UI 元素，CSS 是：

```
span.fname,
span.lname,
span.age {
    display:none; 
} 
```

因此，我的 Backbone.js 模型将是：

```
PersonModel = Backbone.Model.extend({
        defaults: {
            fname: undefined,
            lname: undefined,
            age: undefined
        }
    }); 
```

视图（简化）将是：

```
PersonView = Backbone.View.extend({
    tagName: 'div',

    initialize: function() {
        this.model.on("fname", this.updateFName, this);
        this.model.on("lname", this.updateLName, this);
        this.model.on("age", this.updateAge, this);
    },

    updateFName: function() {
        // Pseudo code 
        Get 'new' value from Model
        Obtain reference to DOM element span.fname
        Update span.fname

        if (model value is empty) {
           Hide UI element.
        }
    },

    updateLName: function() {
        // Same as above
    },

    updateAge: function() {
        // Same as above
    },

    render: function() {
        // Get model values to display
        var values = {
            FirstName : this.model.get('fname'),
            LastName : this.model.get('lname'),
            Age: this.model.get('age'),
        };

        // Load HTML template
        var template = $('#Person-Template').html();

        // Populate template with values
        var t = _.template(template, values);

       // Show / hide UI elements
       this.updateFname();
       this.updateLName();
       this.updateAge();
    } 
```

}

最后，问题是：从 render() 调用每个 updateXYZ() 方法只是为了确定 UI 元素应该设置为隐藏还是可见，这似乎很不自然。我的模型中有很多属性，代码看起来真的有点荒谬。

[有人告诉我](https://stackoverflow.com/questions/10474275/updating-backbone-js-view-becoming-a-mess)，视图不应该负责确定应该或应该显示什么。我的问题是，那么什么是负责任的？用户可能会执行一些（有效的）aciton 来清除名字，在这种情况下，我不希望我的视图显示“名字：”后跟没有值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:33:48.273

首先，您不需要`values`手动构建，只需使用[`toJSON`](http://documentcloud.github.com/backbone/#Model-toJSON)：

```
var values = this.model.toJSON(); 
```

然后，您必须将您填写的模板添加到您的视图中`el`：

```
this.$el.html(_.template(template, values)); 
```

并且您的模板可能应该包含要在模板中显示的内容：

```
<script type="text/template" id="Person-Template">
    <span class="fname" title="FirstName">F: <%= fname %></span>
    <span class="lname" title="LastName">L: <%= lname %></span>
    <span class="age" title="Age">A: <%= age %></span>
</script> 
```

您不需要为这三个部分中的每一个分开功能，您可以在您的 : 中循环遍历它们`render`：

```
_(values).each(function(v, k) {
    var m = _(v).isUndefined() ? 'hide' : 'show';
    this.$('.' + k)[m]();
}, this); 
```

现在回到你的活动。`"fname"`除非您添加了自定义事件，否则没有事件之类的东西。但是没必要这样，模型会在改变时触发`"change"`和`"change:fname"`事件`fname`；你只需要关心`"change"`：

```
initialize: function() {
    _.bindAll(this, 'render');
    this.model.on("change", this.render);
}, 
```

我还`render`使用绑定到您的视图实例，[`_.bindAll`](http://documentcloud.github.com/underscore/#bindAll)这样您就不必担心`this.model.on`.

现在你有了一些有用的东西：http: [//jsfiddle.net/ambiguous/46puP/](http://jsfiddle.net/ambiguous/46puP/)

* * *

您还可以将“应该显示”逻辑推送到模板中：

```
<script type="text/template" id="Person-Template">
    <% if(fname) { %><span class="fname" title="FirstName">F: <%= fname %></span><% } %>
    <% if(lname) { %><span class="lname" title="LastName">L: <%= lname %></span><%  } %>
    <% if(age)   { %><span class="age" title="Age">A: <%= age %></span><%           } %>
</script> 
```

并简化您的`render`：

```
render: function() {
    var values   = this.model.toJSON();
    var template = $('#Person-Template').html();
    this.$el.html(_.template(template, values));
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/W9cnJ/](http://jsfiddle.net/ambiguous/W9cnJ/)

这种方法可能是最常见的，它没有任何问题。我认为您误解了先前的答案试图告诉您的内容。模板已经选择了要显示的信息，`<%= ... %>`因此没有充分的理由不应该查看`fname`，例如，在尝试显示之前是否已设置。根据数据的性质，您可能希望`if(!_(fname).isUndefined())`在模板中使用等，但简单的真实性检查可能没问题；在某些情况下这`age`可能是一个问题，因此您可能希望对此更加严格。

# jquery - 显示/隐藏嵌套 div 的内容

> ID：11275589
> 
> 赞同：0
> 
> 时间：2012-06-30T16:07:21.437
> 
> 标签：jquery, html

Tab 1 和 Tab 2 按预期显示和隐藏，但嵌套的 div 不显示。如何修改脚本以显示/隐藏 Tab 1 div/Tab 2 div 和其中的嵌套 div。

脚本

```
$(document).ready(function() {
        $("#content div").hide(); // Initially hide all content
        $("#vtabs li:first").attr("id", "current"); // Activate first tab
        $("#content div:first").fadeIn(); // Show first tab content
        $('#vtabs a').click(function(e) {
            e.preventDefault();
            if ($(this).closest("li").attr("id") == "current") { //detection for current tab
                return
            }
            else {
                $("#content div").hide(); //Hide all content
                $("#vtabs li").attr("id", ""); //Reset id's
                $(this).parent().attr("id", "current"); // Activate this
                $('#' + $(this).attr('name')).fadeIn(); // Show content for current tab
            }
        });
    });
    (function() {
        var bsa = document.createElement('script');
        bsa.async = true;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(bsa);
    })();​ 
```

html

```
<link rel="stylesheet" href="css/tabs3.css" type="text/css" />
</head>
<body>
    <div id="header">site title</div>
    <div id="vtabs">
        <ul>
            <li>
                <a href="#" name="tab1">By Service</a>
            </li>
            <li>
                <a href="#" name="tab2">By Client</a>
                <br />
            </li>
        </ul>
    </div>
    <div id="content">
        <div id="tab1">Tab 1
            <br />
            <div>Tab 1 nested div</div>
        </div>
        <div id="tab2">Tab 2
            <br />
            <div>Tab 2 nested div</div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:15:26.317

我在代码中看不到您显示嵌套 div 的位置。我建议你给容器 div 一个类，称之为 tab_contents。像这样

```
<div id="tab1" class="tab_contents"> 
```

然后将此行更改 `$("#content div").hide();`为 `$(".tab_contents").hide();`在两个地方。问题是您隐藏了#content 中的所有 div，但仅淡入容器 div 而不是嵌套 div。只隐藏容器 div。

# java - 在程序中放置一个计时器来说明花费了多长时间 - Java

> ID：11275594
> 
> 赞同：0
> 
> 时间：2012-06-30T16:08:40.420
> 
> 标签：java

只是出于兴趣，很高兴知道我的计算程序运行了多长时间（例如 Project Euler 解决方案）。要么看看我可以通过使用不同的解决方案挤出多少毫秒的时间，要么看看处理大数字需要多长时间。通常这样的程序以`System.out.println`, 打印答案结束。我怎样才能输入另一个`println`，上面写着“程序花费了几秒钟”，或者类似的东西（即每毫秒将某个变量增加 0.001，然后在程序完成时打印它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:13:56.950

您可以使用调用轻松获得总毫秒数`System.currentTimeMillis()`（粒度取决于操作系统，可能不完全精确）。例子：

```
long start = System.currentTimeMillis();
// portion of code
long stop = System.currentTimeMillis();

System.out.println("Time: " + (stop - start) + " ms"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:14:31.287

看看这个例子： [http](http://www.roseindia.net/java/java-get-example/get-execution-time.shtml) ://www.roseindia.net/java/java-get-example/get-execution-time.shtml 这是另一个完整但不同的实现： [http ://www.mkyong.com/java /how-do-calculate-elapsed-execute-time-in-java/](http://www.mkyong.com/java/how-do-calculate-elapsed-execute-time-in-java/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:16:57.037

你可以使用：

```
 long start = System.nanoTime();
    // do something
    long took = System.nanoTime() - start; 
```

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)：

> **返回最精确的可用系统计时器的当前值，以纳秒为单位**。此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意时间以来的纳秒（可能在将来，因此值可能为负数）。此方法提供纳秒精度，但不一定提供纳秒精度。不保证值的变化频率。由于数值溢出，超过大约 292 年（263 纳秒）的连续调用的差异将无法准确计算经过的时间。

# javascript - 如果月份更改，则 JavaScript 中的 UTC 时间为 48 小时

> ID：11275599
> 
> 赞同：1
> 
> 时间：2012-06-30T16:09:15.683
> 
> 标签：javascript, date

由于一个或另一个原因，这个代码示例给出了 48 小时而不是 24 小时，谁能解释我为什么新月份的 UTC 时间在 javascript 错误中或者我做错了什么？谢谢你的协助。

```
 <script type="text/javascript">
    function myFunction()
    {
    var d = (Date.UTC(2012,07,01) - Date.UTC(2012,06,30)) / 1000 / 3600;
    alert(d);
    }
    myFunction();
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:11:49.947

因为月份`6`是 7 月，因为 JavaScript 日期中的月份从零开始，并且 7 月有 31 天。

如果您想要 7 月 1 日到 6 月 30 日之间的小时数，您需要：

```
var d = (Date.UTC(2012,06,01) - Date.UTC(2012,05,30)) / 1000 / 3600; 
```

或更一般地说：

```
function hoursBetween(startYear, startMonth, startDay, endYear, endMonth, endDay){
  var d1 = Date.UTC(startYear, startMonth-1, startDay );
  var d2 = Date.UTC(endYear,   endMonth-1,   endDay   );
  return (d2-d1)/(3600*1000);
} 
```

*有关更多信息，请阅读 上的文档[`Date.UTC`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC)。*

# java - GWT Eclipse 插件安装

> ID：11275602
> 
> 赞同：1
> 
> 时间：2012-06-30T16:09:45.023
> 
> 标签：java, eclipse, gwt, plugins

我已经在我的 Eclipse Juno 中安装了 Google 的 Eclipse 插件和 GWT Designer。安装成功完成，但遗憾的是没有出现 GWT Designer 选项。我什至无法将我的 GWT 应用程序部署到 .war 文件。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:34:43.960

不幸的是，我认为您将不得不等到谷歌为 eclipse 4.2 (Juno) 发布 GWT 设计器。除非你当然已经解决了这个问题，如果是这样，请分享:)

# python - Celerybeat 无法按预期工作

> ID：11275606
> 
> 赞同：4
> 
> 时间：2012-06-30T16:10:09.373
> 
> 标签：python, rabbitmq, celery, bottle, celerybeat

我正在用瓶子构建一些项目，我需要它来定期运行某些预定的操作。

我决定使用 rabbitmq + celery，因为这似乎是以编程方式管理计划工作的最强大和最完整的解决方案。

我安装了 rabbitmq 和 celery 都很好，当我使用 celeryd -B 时，任务完成得很好。但是，当我使用 celerybeat 命令时，任务是“发送”的（或者说输出，因为我使用 -l 调试选项运行 celeryd 和 celerybeat 会更详细），但尽管它们经常被“发送”，但它们不会t 被执行（出于测试目的，任务应该每 60 秒将当前时间戳附加到文件中）。无论如何，其他一切工作正常，因为同一目录中的 celeryd -B 命令工作正常，它以预期的间隔写入文件。

我错过了什么吗？

这是 $celerybeat -l 调试的输出：

```
[2012-06-30 18:07:44,676: WARNING/MainProcess] celerybeat v2.5.5 is starting.
[2012-06-30 18:07:44,750: WARNING/MainProcess] __    -    ... __   -        _
Configuration ->
    . broker -> amqp://guest@localhost:5672//
    . loader -> celery.loaders.default.Loader
    . scheduler -> celery.beat.PersistentScheduler
    . db -> celerybeat-schedule
    . logfile -> [stderr]@DEBUG
    . maxinterval -> 5.00 minutes (300s)
[2012-06-30 18:07:44,751: DEBUG/MainProcess] Setting default socket timeout to 30
[2012-06-30 18:07:44,751: INFO/MainProcess] Celerybeat: Starting...
[2012-06-30 18:07:44,776: DEBUG/MainProcess] Current schedule:
<Entry: celery.backend_cleanup celery.backend_cleanup() {<crontab: 0 4 * (m/h/d)>}
<Entry: often tasks.output() {<freq: 1.00 minute>}
[2012-06-30 18:07:44,776: DEBUG/MainProcess] Celerybeat: Ticking with max interval->5.00 minutes
[2012-06-30 18:07:44,781: DEBUG/MainProcess] Start from server, version: 8.0, properties: {u'information': u'Licensed under the MPL.  See http://www.rabbitmq.com/', u'product': u'RabbitMQ', u'copyright': u'Copyright (C) 2007-2012 VMware, Inc.', u'capabilities': {}, u'platform': u'Erlang/OTP', u'version': u'2.8.4'}, mechanisms: [u'PLAIN', u'AMQPLAIN'], locales: [u'en_US']
[2012-06-30 18:07:44,785: DEBUG/MainProcess] Open OK! known_hosts []
[2012-06-30 18:07:44,787: DEBUG/MainProcess] using channel_id: 1
[2012-06-30 18:07:44,789: DEBUG/MainProcess] Channel open
[2012-06-30 18:07:44,790: INFO/MainProcess] Scheduler: Sending due task tasks.output
[2012-06-30 18:07:44,794: DEBUG/MainProcess] Celerybeat: Synchronizing schedule...
[2012-06-30 18:07:44,838: DEBUG/MainProcess] tasks.output sent. id->53951ab0-022d-40a5-9f56-9a4a294294c7
[2012-06-30 18:07:44,838: DEBUG/MainProcess] Celerybeat: Waking up in 1.00 minute. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T21:52:33.903

Celerybeat 就其自身而言，只是保持时间并将任务铲到适当的队列中以供其他人使用。

因此，启动一个 celeryd 进程，监听您要处理的队列：

```
$ celeryd <queuename> -l DEBUG 
```

# javascript - 如果字符串包含数值，则从字符串中删除整个单词

> ID：11275607
> 
> 赞同：1
> 
> 时间：2012-06-30T16:10:15.370
> 
> 标签：javascript, regex, string

我想要完成的是根据文件名中的这些关键字自动生成文件上传的标签/关键字。

我已经为每次上传完成了自动生成**标题**，如下所示： ![在此处输入图像描述](../Images/3cfbc3a662f06429985bd51a478e72be.png)

但我现在开始尝试自动生成**关键字**。类似于标题，但格式更多。**[首先，我通过它](https://stackoverflow.com/a/6686839)**运行字符串以从文件名中删除常用词（例如`this,that,there`...等）

我对此很满意，但我不需要**包含其中包含数字的单词**。如果单词包含数字，我还没有找到如何完全删除单词的解决方案。我在[这里](https://stackoverflow.com/questions/6660107/jquery-check-whether-string-contains-numeric-value)找到的解决方案仅适用于特定匹配，而[这个](https://stackoverflow.com/a/2878362/1399030)解决方案仅删除数字。**如果它包含任何数字，我想删除整个单词。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:19:09.393

对当前文件名字符串应用一个简单的正则表达式，用空字符串替换所有出现的字符串。正则表达式匹配包含任何数字的“单词”。

Javascript 示例：

```
'asdf 8bit jawesome234 mayhem 234'.replace(/\s*\b\w*\d\w*\b/g, '') 
```

评估为：

```
"asdf mayhem" 
```

这里的正则表达式是`/\s*\b\w*\d\w*\b/g`，它匹配由零个或多个空白字符 ( `\s*`) 后跟一个字边界转换 ( `\b`)、零个或多个字母数字字符 ( `\w*`)、后跟一个数字 ( `\d`)、后跟零个或更多字母数字字符，后跟单词边界转换 ( `\b`)。`\b`匹配从单词的开头或结尾或非字母数字字符转换为字母数字字符的空字符串。正则表达式的`g`末尾`/`表示替换所有出现，而不仅仅是第一个。

删除数字单词后，您可以根据需要将字符串拆分为关键字（例如，通过空格）。

```
"asdf mayhem".split(/\s+/); 
```

评估为：

```
["asdf", "mayhem"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:22:05.260

要删除所有包含数字的单词，请使用：

```
string = string.replace(/[a-z]*\d+[a-z]*/gi, ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:32:05.103

试试这个表达式：

```
 var regex = /\b[^\s]*\d[^\s]*\b/g; 
```

例子：

```
 var str = "normal 5digit dig555it digit5 555";
 console.log( str.replace(regex,'') );​   //Result->  normal 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T16:36:27.757

```
('Apple Cover Photo 23s423 of your 543634 moms').match(/\b([^\d]+)\b/g, '') 
```

返回

苹果封面照片，你的妈妈

[http://jsfiddle.net/awBPX/2/](http://jsfiddle.net/awBPX/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T16:23:39.330

使用它来删除包含 numeric 的单词：

```
string.replace("[0-9]",""); 
```

希望这可以帮助。

**编辑：**

检查这个：

```
var str = 'one 2two three3 fo4ur 5 six';
var result = str.match(/(^[\D]+\s|\s[\D]+\s|\s[\D]+$|^[\D]+$)+/g).join(''); 
```

# objective-c - 此类与键 XXX 的键值编码不兼容

> ID：11275608
> 
> 赞同：0
> 
> 时间：2012-06-30T16:10:44.133
> 
> 标签：objective-c, ios5

我是所有编程的初学者，并且一直在尝试从 Big Nerd Ranch Books 中实现一些自学的东西。但是我真的被这个问题难住了，是的，我已经在这个论坛和其他论坛中搜索了可能的解决方案，但没有成功。这是代码：

ANKYViewController.h：

```
#import <UIKit/UIKit.h>

@interface ANKYViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextField *weightFieldDeadlift;
@property (weak, nonatomic) IBOutlet UITextField *repFieldDeadlift;
@property (strong, nonatomic) IBOutlet UILabel *workingOneRMDeadlift;

@property (weak, nonatomic) IBOutlet UITextField *weightFieldBenchPress;
@property (weak, nonatomic) IBOutlet UITextField *repFieldBenchPress;
@property (strong, nonatomic) IBOutlet UILabel *workingOneRMBenchPress;

@property (weak, nonatomic) IBOutlet UITextField *weightFieldSquat;
@property (weak, nonatomic) IBOutlet UITextField *repFieldSquat;
@property (strong, nonatomic) IBOutlet UILabel *workingOneRMSquat;

@property (weak, nonatomic) IBOutlet UITextField *weightFieldMilitaryPress;
@property (weak, nonatomic) IBOutlet UITextField *repFieldMilitaryPress;
@property (strong, nonatomic) IBOutlet UILabel *workingOneRMMilitaryPress;

- (IBAction)calculateOneRM:(id)sender;

@end 
```

ANKYViewController.m:

```
#import "ANKYViewController.h"

@interface ANKYViewController ()

@end

@implementation ANKYViewController
@synthesize weightFieldDeadlift;
@synthesize repFieldBenchPress;
@synthesize workingOneRMBenchPress;
@synthesize weightFieldSquat;
@synthesize repFieldSquat;
@synthesize workingOneRMSquat;
@synthesize weightFieldMilitaryPress;
@synthesize repFieldMilitaryPress;
@synthesize workingOneRMMilitaryPress;
@synthesize repFieldDeadlift;
@synthesize workingOneRMDeadlift;
@synthesize weightFieldBenchPress;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setWeightFieldDeadlift:nil];
    [self setRepFieldDeadlift:nil];
    [self setWorkingOneRMDeadlift:nil];
    [self setWeightFieldDeadlift:nil];
    [self setRepFieldBenchPress:nil];
    [self setWeightFieldBenchPress:nil];
    [self setWorkingOneRMBenchPress:nil];
    [self setWeightFieldSquat:nil];
    [self setRepFieldSquat:nil];
    [self setWorkingOneRMSquat:nil];
    [self setWeightFieldMilitaryPress:nil];
    [self setRepFieldMilitaryPress:nil];
    [self setWorkingOneRMMilitaryPress:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)calculateOneRM:(id)sender {
    float dw = [[weightFieldDeadlift text]floatValue];
    float dr = [[repFieldDeadlift text]floatValue];
    float d = (dw * dr * 0.0333) + dw;
    NSLog(@"Deadlift: %f", d);
    NSString *deadlift = [[NSString alloc]initWithFormat:@"%f", d];
    [workingOneRMDeadlift setText:deadlift];

    float bpw = [[weightFieldBenchPress text]floatValue];
    float bpr = [[repFieldBenchPress text]floatValue];
    float bp = (bpw * bpr * 0.0333) + bpw;
    NSLog(@"Bench Press: %f", bp);
    NSString *benchPress = [[NSString alloc]initWithFormat:@"%f", bp];
    [workingOneRMBenchPress setText:benchPress];

    float sw = [[weightFieldSquat text]floatValue];
    float sr = [[repFieldSquat text]floatValue];
    float s = (sw * sr * 0.0333) + sw;
    NSLog(@"Squat: %f", s);
    NSString *squat = [[NSString alloc]initWithFormat:@"%f", s];
    [workingOneRMSquat setText:squat];

    float mpw = [[weightFieldMilitaryPress text]floatValue];
    float mpr = [[repFieldMilitaryPress text]floatValue];
    float mp = (mpw * mpr * 0.0333) + mpw;
    NSLog(@"Military Press: %f", mp);
    NSString *militaryPress = [[NSString alloc]initWithFormat:@"%f", mp];
    [workingOneRMMilitaryPress setText:militaryPress];
}
@end 
```

文件的所有者类已经被声明为 ANKYViewController。链接插座等是通过控制拖动而不是手动编码（我花了太多时间后放弃了）。

错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIApplication 0x6c22e70> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key repsField.' 
```

没有代码的复制和粘贴，而且任何地方都没有提到“repsField”（而不是repFieldxxx），这当然令人沮丧。

我希望这是足够的信息来帮助找到解决方案，因为我花了几天时间查看其他人的解决方案但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T16:41:05.290

看起来问题是有人正在使用不符合 KVC`UIApplication`的密钥 ( ) 访问实例。`repsField`

**更新**我认为你甚至不需要子类来添加断点。转到断点导航器并为符号添加一个符号断点`-[UIApplication setValue:forUndefinedKey:]`，然后运行应用程序。

我认为您可以通过子类化来调试它，`UIApplication`并在方法的虚拟覆盖中设置断点`setValue:forUndefinedKey:`。

在您调用的文件中`UIApplicationMain`添加此类：

```
@interface TestApplication : UIApplication
@end
@implementation TestApplication
- (void)setValue:(id)value forUndefinedKey:(NSString *)key {
    [super setValue:value forUndefinedKey:key]; // set breakpoint here
}
@end 
```

然后将第三个参数更改`UIApplicationMain`为`@"TestApplication"`，例如：

```
UIApplicationMain(argc, argv, @"TestApplication", NSStringFromClass([AppDelegate class])); 
```

现在运行应用程序，它应该会进入调试器，您应该能够看到导致它的调用堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:03:17.257

当出现此错误消息时，通常是 xib 文件或情节提要中的连接错误。我猜这是一个旧示例，其中有一个 MainWindow.xib 文件，文件的所有者设置为 UIApplication 类。该 xib 中很可能存在`repsField`与 File's Owner 中调用的插座的连接，当然，该插座与实际类中的任何内容都不匹配。

# iphone - 由 UITextField 引起的 cellForRow 的奇怪行为

> ID：11275615
> 
> 赞同：0
> 
> 时间：2012-06-30T16:11:51.237
> 
> 标签：iphone, ios, xcode

我有一个 TableView，它有 2 个部分，只有在选择第一部分的第 3 行时才会显示第 2 部分。只有第一部分有图像。一切正常。第 2 部分的第 3 行在选中时显示一个 TextField 和一个按钮，您可以通过按完成按钮在其中保存一个日期。工作也很好。您可以选择该行并转到其他行，一切正常。但是，如果您点击 TextField 并且不保存输入或不写任何内容，那么它就会出错。它将重新加载带有随机行图像的表格。我以为是弹出的键盘，所以我尝试手动将其关闭。错误仍然存​​在。我真的很好奇为什么会发生这种情况，所以我希望得到帮助！提前致谢！！

我的 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...

    BOOL tooltipValue = [[NSUserDefaults standardUserDefaults] boolForKey:@"tooltipSetting"];
    BOOL compactSettingValue = [[NSUserDefaults standardUserDefaults] boolForKey:@"compactModeSetting"];

   NSDictionary *dictionary = [self.settingsArray objectAtIndex:indexPath.section];
   NSArray *array = [dictionary objectForKey:@"Items"];
   NSString *cellValue = [array objectAtIndex:indexPath.row];
   cell.textLabel.text = cellValue;

   if (indexPath.section == 0 && self.iconSetCount < 3) {
        NSDictionary *imagedictionary = [self.imagesArray objectAtIndex:indexPath.section];
        UIImage *cellImage = [[imagedictionary objectForKey:@"images"] objectAtIndex:indexPath.row];
        cell.imageView.image = cellImage;
        self.iconSetCount++;
        NSLog(@"%d",self.iconSetCount);
    }

    if (indexPath.section == 0){
        if (indexPath.row == 0) {
            if (tooltipValue){
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            } else {
                cell.accessoryType = UITableViewCellAccessoryNone;
            }

        }
        if (indexPath.row == 1) {
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
        if (indexPath.row == 2) {
            if (!compactSettingValue){
                cell.accessoryType = UITableViewCellAccessoryNone;
            } else {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }
        }
    } else if (indexPath.section == 1){
            // if the sellected row is the one with a custom date 
            if (indexPath.row == 2 && indexPath.row == isSelected) {
                // if an archive exists for the custom date then get the data from the archive
                if ([[NSFileManager defaultManager] fileExistsAtPath:[self getDocumentPathForCustomDate]]) {
                    NSString *customDate = [NSKeyedUnarchiver unarchiveObjectWithFile:[self getDocumentPathForCustomDate]];
                    cell.textLabel.text = customDate;
                } else{
                    //show a label with a done button where you can type in your custom date and save it
                    if (self.textField == nil) {
                        self.textField = [[UITextField alloc] initWithFrame:CGRectMake(5, 5, 200, 35)];
                        self.textField.backgroundColor = [UIColor whiteColor];
                        self.textField.textColor = [UIColor blackColor];
                        self.textField.font = [UIFont systemFontOfSize:16.0];
                        self.textField.borderStyle = UITextBorderStyleRoundedRect;
                    }

                    if (self.button == nil) {
                        self.button =[UIButton buttonWithType:UIButtonTypeRoundedRect];
                        self.button.frame = CGRectMake(210, 5, 50, 35);
                        [self.button setTitle:NSLocalizedString(@"done", @"") forState:UIControlStateNormal];
                        [self.button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside];
                    }

                [cell.contentView addSubview: self.textField];
                [cell.contentView addSubview: self.button];

                }
            }
            if ((indexPath.row == self.isSelected)){
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
        }
    return cell;

} 
```

我的 didSelectRowAtIndexPath：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Navigation logic may go here. Create and push another view controller.
    /*
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"Nib name" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */

    BOOL tooltipValue = [[NSUserDefaults standardUserDefaults] boolForKey:@"tooltipSetting"];
    BOOL compactSettingValue = [[NSUserDefaults standardUserDefaults] boolForKey:@"compactModeSetting"];

    if (indexPath.section == 0) {
        //tooltips
        if (indexPath.row == 0) {
            if (!tooltipValue){
                [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"tooltipSetting"];
            } else {
                [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"tooltipSetting"];
            }
            [self.tableView reloadData];
        }
        //go to Set your Signature Extra
        if (indexPath.row == 1) {
            AdditionalSignature *additionalSigi = [[AdditionalSignature alloc] initWithNibName:@"additionalSignature" bundle:nil];
            [self.navigationController pushViewController:additionalSigi animated:YES];
            [additionalSigi release];
        }

        //compact version
        if (indexPath.row == 2) {
            if (!compactSettingValue){
                [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"compactModeSetting"];                
            } else {
                [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"compactModeSetting"];
            }      
            [self.tableView reloadData];
        }
    }
    // if in optional compactmode settings
    if (indexPath.section == 1){
        // and "none" is selected remove first the custom date
        if (indexPath.row == 0) {
            [self removeCustomDateArchive];

            //then change the userdefault for this setting
            if (![self isOptionNoDate]) {
                [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"dateSetting"];
            }else{
                [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"dateSetting"];
            }
        }
        if ( indexPath.row == 1) {
            [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"dateSetting"];
            [self removeCustomDateArchive];
        }
        if (indexPath.row == 2) {
            [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"dateSetting"];

        }
        self.isSelected = indexPath.row;
        [self.tableView reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:13:23.143

小区标识符在这里被滥用。删除单元标识符将是这里最快的解决方案，每次都重新分配单元。重写代码以包含单元标识符将使其更加健壮。

# asp-classic - Asp Access db：Microsoft JET 数据库引擎错误“80004005”未指定错误

> ID：11275624
> 
> 赞同：0
> 
> 时间：2012-06-30T16:13:18.717
> 
> 标签：asp-classic, jet

服务器是专用的，我可以远程访问。

我们有带有 Access 数据库的自定义 ASP CMS，我们使用自定义错误页面进行“mod rewrite”。它工作得很好。

该网站有 6 种不同的语言版本，每种语言都有自己的域，它们都连接到同一个数据库。

问题是，我每隔几个小时就会收到此错误：

> Microsoft JET 数据库引擎错误“80004005”
> 未指定错误

收到此错误后，我必须重新启动 IIS 或将“错误页面设置”编辑为详细错误，然后再次将其设置为自定义。之后它工作正常。

我安装了进程监视器并跟踪 w3wp.exe 进程。

发生错误时，我在`HKLM\SOFTWARE\Wow6432Node\Microsoft\Jet\4.0\Engines`.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:24:12.473

Access 数据库从来没有为大流量而构建，很可能它只是由于大量的请求而崩溃。

你最好切换到真正的数据库，现在你有很多免费的，包括 SQL Server Express、MySQL 等等。

与此同时，您可以浏览您的代码并确保您：

1.  始终在使用后立即关闭 Recordset，然后将其设置为 Nothing，例如

    ```
    Do Until oRS.EOF
        'do your stuff...
        oRS.MoveNext
    Loop

    'Always close after use
    oRS.Close
    Set oRS = Nothing 
    ```

2.  Connection 对象也是如此：完成后关闭并处理它。

3.  很多时候页面使用重定向 - 确保在重定向之前关闭并处理，例如

    ```
    If oRS.EOF Then
        'Always close after use
        oRS.Close
        Set oRS = Nothing

        Response.Redirect("Error.asp?v=nouser")
    End If

    'do your stuff...

    'Always close after use
    oRS.Close
    Set oRS = Nothing 
    ```

# actionscript-3 - 用于 MovieClip 更改的 AS3 事件侦听器

> ID：11275625
> 
> 赞同：0
> 
> 时间：2012-06-30T16:13:20.313
> 
> 标签：actionscript-3, events, event-listener

我想知道是否可以将事件侦听器添加到每次将孩子添加到其中或从中删除时触发的 MovieClip。

这可能吗？

先感谢您，

马泰奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:26:08.663

您可以覆盖 addChild / addChildAt 和 removeChild / removeChildAt 函数并调度您想要的任何事件：

```
public override function addChild(child:DisplayObject):DisplayObject {
    dispatchEvent(new Event("newChild"));
    return super.addChild(child);
} 
```

# erlang - Erlang从UDP数据包中获取字符串

> ID：11275638
> 
> 赞同：2
> 
> 时间：2012-06-30T16:16:17.693
> 
> 标签：erlang, udp

我有这个 udp 数据包：

```
P = <<83,65,77,80,188,64,172,85,30,144,105,0,0,0,50,0,7,0,0,0,115,97,109,112,45,114,112,11,0,0,0,149,78,87,149,82,80,149,118,50,46,50,11,0,0,0,83,97,110,32,65,110,100,114,101,97,115>> 
```

14-15 byte 是 player var (Byte width - 2) 15-18 byte 是服务器主机名的长度 (Byte width - 4)
19 + strlen 是服务器的主机名 (Byte width - strlen)

我让玩家变种：

```
<<_:11/bytes, Players:16/integer-big, Max:16/integer-big, _/binary>> = P. 
```

它是 50。
我怎样才能得到主机名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:11:51.767

您可以改进表达式以获得正确的值。请注意，正如您所说，服务器长度是 32 位，并且从外观上看，它似乎是小端，而不是大端（注意名称是 7 字节，在本例中为“samp-rp” ，这些字节的编码是`<<7,0,0,0>>`，表示小端（可能你的玩家也是小端）。另外，你的数字似乎有点不对。表达式将是：

```
<<_:14/bytes, Players:16/integer-little, HNameLength:32/integer-little, HostNameBinary:HNameLength/binary, _/binary>> = P. 
```

然后，可以将主机名从二进制文件转换为字符串`binary_to_list`：

```
HostName = binary_to_list(HostNameBinary). 
```

# php - MySQL查询返回无效资源但没有错误

> ID：11275643
> 
> 赞同：0
> 
> 时间：2012-06-30T16:17:09.067
> 
> 标签：php, mysql, inner-join

所以我得到了这个我一直在调试的超长查询。我最初收到一个错误，即列 s.name 和所有其他 JOIN 列不在“字段列表”中，因此经过一番谷歌搜索后，我能够通过将它们放在双引号中来修复该错误。所以现在查询返回了一个没有错误的资源，但是这个资源是空的。

现在我从声明后的回声中得到的是“资源 id #4 警告：implode()：在第 143 0 行的 /var/www/beta/index.php 中传递的参数无效”

这是查询和周边功能：

```
<?php /* other functions preceding */ $result = mysql_query("SELECT * FROM users WHERE uid=" . $_SESSION['uid'] . "");
    $cur_user = mysql_fetch_array($result);
    $ufriends = explode(';', $cur_user['friends']);
    $ufsql = trim(implode(',',$ufriends),',');
    $uevents = explode(';', $cur_user['events']);
    $uesql = trim(implode(',',$uevents),',');
    $urequests = explode(';', $cur_user['requests']);
    $ursql = trim(implode(',',$urequests),',');
    if (!empty($ufriends)) {
        $time1 = microtime();
        $megaresult = mysql_query("
            ( SELECT \"s.name\" AS source_name, NULL AS target_name, recent_updates.*, 1 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                WHERE update_type='10'
                LIMIT 1
            )
            UNION
            ( SELECT \"s.name\" AS source_name, NULL AS target_name, recent_updates.*, 2 as ORD FROM recent_updates
                INNER JOIN users AS su ON (\"s.uid\"=recent_updates.source_id)
                WHERE update_type='10'
                LIMIT 1,9
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN users AS t ON (\"t.uid\"=recent_updates.target_id)
                WHERE update_type='2'
                AND
                    ( target_id IN (" . $ufsql . ") )
                AND
                    ( source_id IN (" . $ufsql . ") )
                OR
                (
                    ( target_id IN (" . $cur_user['uid'] . ") )
                AND
                    ( source_id IN (" . $ufsql . ") )
                )
                OR
                (
                    ( target_id IN (" . $ufsql . ") )
                AND
                    ( source_id IN (" . $cur_user['uid'] . ") )
                )
                LIMIT 0,10
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN users AS t ON (\"t.uid\"=recent_updates.target_id)
                WHERE update_type='4'
                AND
                (
                    ( target_id IN (" . $ufsql . ") )
                AND
                    ( source_id IN (" . $ufsql . ") )
                )
                OR
                (
                    ( target_id IN (" . $cur_user['uid'] . ") )
                AND
                    ( source_id IN (" . $ufsql . ") )
                )
                OR
                (
                    ( target_id IN (" . $ufsql . ") )
                AND
                    ( source_id IN (" . $cur_user['uid'] . ") )
                )
                LIMIT 0,10
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN events AS t ON (\"t.id\"=recent_updates.target_id)
                WHERE update_type='3'
                AND
                target_id IN (" . $uesql . ")
                LIMIT 0,10
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN events AS t ON (\"t.id\"=recent_updates.target_id)
                WHERE update_type='3'
                AND
                target_id IN (" . $ursql . ")
                LIMIT 0,10
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN events AS t ON (\"t.id\"=recent_updates.target_id)
                WHERE update_type='5'
                AND
                target_id IN (" . $ursql . ")
                LIMIT 0,10
            )
            UNION
            ( SELECT \"s.name\" AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN users AS s ON (\"s.uid\"=recent_updates.source_id)
                INNER JOIN events AS t ON (\"t.id\"=recent_updates.target_id)
                WHERE update_type='11'
                AND
                (
                    target_id IN (" . $uesql . ")
                OR
                    target_id IN (" . $ursql . ")
                )
                AND
                (
                    source_id IN (" . $ufsql . ")
                )
                LIMIT 0,10
            )
            UNION
            ( SELECT NULL AS source_name, \"t.name\" AS target_name, recent_updates.*, 2 AS ORD FROM recent_updates
                INNER JOIN events AS t ON (\"t.id\"=recent_updates.target_id)
                WHERE public != 0 LIMIT 0,10
            )
            ORDER BY ORD ASC, time_un DESC");
        echo $megaresult;
        $feed = mysql_fetch_array($megaresult);
        echo mysql_error();
        $time2 = microtime();
        echo implode('##', $feed);
        echo mysql_num_rows($megaresult);
        echo mysql_info($con);
/* brackets closed, etc */ ?> 
```

我觉得这与将别名列放在双引号中有关。我有这个查询的以前版本，它不包括任何工作得很好的 JOIN 部分，我把它上传到了 pastebin： http: [//pastebin.com/upifa7VJ](http://pastebin.com/upifa7VJ)

## 编辑：

嗯，这很尴尬......我怀疑是引号引起了问题是对的（感谢@andrewtweber！），但是没有引号我得到的错误是由于第二个 SELECT 语句中的拼写错误，INNER JOIN users AS **su**而不是 INNER JOIN 用户作为**s**。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:21:27.603

由于您的问题是一个错字，让我借此机会向您介绍[PDO](http://php.net/manual/en/book.pdo.php)。

您知道每个人都如何告诉您 SQL 注入以及它有多可怕吗？好吧，通过正确的实践，PDO 可以为您解决这个问题。

这是不好的：

```
$result = mysql_query("SELECT * FROM users WHERE uid=" . $uid . ""); 
```

这更糟！

```
$result = mysql_query("SELECT * FROM users WHERE uid=" . $_GET['uid'] . ""); 
```

现在让我们用 PDO 来做你代码的前几行

```
//Getting the handle that will allow us to do stuff with the Database
$dbh = new PDO("mysql:host=$hostname;dbname=mysql", $username, $password);
$sql = "SELECT * FROM users WHERE uid= :uid"
//Now we prepare our query, send it to the database server and get it ready
$stmt = $dbh->prepare($sql);
//So now we add the parameters to the query
$stmt->bindParam(':uid', $_SESSION['uid'], PDO::PARAM_INT);
//Now we execute it
$stmt->execute();
//Fetching the result
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
//Let's see our result
print_r($result); 
```

就是这样！您又写了几行，但不仅保护了您的数据库，而且您自己也有机会提高性能，并且很高兴您遵循了一些良好的实践原则。

您刚刚阅读的内容还不够，请确保您查看 PDO 的文档或至少查看此[优秀教程](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T20:23:00.943

双引号表示您选择的是*字符串*"s.name" 而不是*column* `s.name`。

您可能打算做的是使用反引号`。反引号允许您使用保留的 MySQL 关键字作为列名，例如

```
SELECT `table`.`name` FROM `table` ORDER BY `order` ASC 
```

# c# - 尽管指定了 CultureInfo，但 Resourcemanager 正在返回相同的资源

> ID：11275649
> 
> 赞同：9
> 
> 时间：2012-06-30T16:18:20.007
> 
> 标签：c#, dll, globalization, embedded-resource, resourcemanager

一个非常简单的事情，我无法让它工作。我想全球化我的dll，因此我使用资源文件+ ResourceManager。

我这样调用资源管理器：

```
var p = new ResourceManager("Appname.Default", Assembly.GetExecutingAssembly()); 
```

得到这样的字符串

```
System.Diagnostics.Debug.WriteLine(p.GetString("greeting"));
System.Diagnostics.Debug.WriteLine(p.GetString("greeting", new CultureInfo("nl")));
System.Diagnostics.Debug.WriteLine(p.GetString("greeting", new CultureInfo("nl-NL")));
System.Diagnostics.Debug.WriteLine(p.GetString("greeting", new CultureInfo("en"))); 
```

它返回 4 次相同的字符串。我的文件被称为

```
Default.resx 
Default.en.resx 
Default.nl.resx 
Default.nl-NL.resx 
```

所有文件设置都相同，但如前所述 - 仅使用默认文件中的资源。

我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T16:52:59.680

有几种使用资源文件的方法，其中一种是使用`.resx`文件。这些文件会根据`Thread.CurrentThread.CurrentUICulture`. 默认`.resx`文件被编译到它所属的程序集中（例如您的主可执行文件），而本地化资源 ( `Default.nl-NL.resx`) 被编译到它们自己的目录（在这种情况下基于文化标识符`nl-NL`）到一个名为`<AssemblyName>.resources.dll`.

`<ResourceName>.<KeyName>`例如，从这些资源中获取价值非常简单`Default.Greeting`。为了测试它，你改变文化，使用：

```
Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-US");
Console.WriteLine(Default.Greeting);

Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("nl-NL");
Console.WriteLine(Default.Greeting); 
```

哪个会输出

```
Hello
Hallo 
```

在程序启动时，UI 文化设置为运行它的计算机的文化，因此您不必自己指定语言来始终呈现本地化资源。所以，`.resx`文件似乎是要走的路。

使用`ResourceManager`from`var p = new ResourceManager("Appname.Default", Assembly.GetExecutingAssembly());`时，您将不得不读取`.resources`文件。如果没有（在您的情况下）`Appname.Default.resources`文件，`p.GetString`则会失败。所以我猜你之前已经创建了一个`.resources`文件，但还没有将本地化`.resx`文件转换为`.resources`文件。

如果你想使用 ResourceManager 来指定文化，你可以使用：

```
Default.ResourceManager.GetString("Greeting", new CultureInfo("en-US")); 
```

# android - 如何增加android应用程序的堆大小？

> ID：11275650
> 
> 赞同：128
> 
> 时间：2012-06-30T16:18:29.003
> 
> 标签：android

我正在编写一个使用多个 3D 模型的 Android 应用程序。这种带有纹理的模型会占用大量内存。我发现制造商对应用程序可以使用的堆大小设置了限制。例如我的平板三星 Galaxy Tab 8.9 P7310 可以占用 64MB 内存。

有没有办法增加应用程序可以使用的内存大小？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-06-30T16:27:29.840

您可以使用[android:largeHeap="true"](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)请求更大的堆大小，但这不适用于任何预 Honeycomb 设备。在 2.3 之前的设备上，您可以使用 VMRuntime 类，但这不适用于 Gingerbread 及更高版本。

拥有尽可能大的限制的唯一方法是通过 NDK 执行内存密集型任务，因为 NDK 不像 SDK 那样施加内存限制。

或者，您可以仅加载当前视图中的模型部分，并根据需要加载其余部分，同时从内存中删除未使用的部分。但是，这可能是不可能的，具体取决于您的应用程序。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-06-30T16:25:37.760

> 有没有办法增加应用程序可以使用的内存大小？

在 API Level 11+ 上运行的应用程序可以在清单中`android:largeHeap="true"`的`<application>`元素上请求比正常更大的堆大小，并且`getLargeMemoryClass()`会`ActivityManager`告诉您该堆有多大。然而：

1.  这仅适用于 API 级别 11+（即 Honeycomb 及更高版本）

2.  无法保证大堆有多大

3.  用户会感知到你的大堆请求，因为它会~~强制他们的其他应用程序退出 RAM，~~终止其他应用程序的进程以释放系统 RAM 供你的大堆使用

4.  由于#3，以及我预计`android:largeHeap`会被滥用的事实，将来可能会放弃对此的支持，或者可能会在安装时警告用户（例如，您需要为此请求特殊权限)

5.  目前，此功能的文档很少

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-10-16T17:07:15.997

您不能动态增加堆大小。

您可以通过`android:largeHeap="true"`在清单中使用来请求使用更多。

此外，您可以使用`native memory (NDK & JNI)`，因此您实际上绕过了堆大小限制。

这里有一些关于它的帖子：

*   [如何将位图缓存到本机内存中](https://stackoverflow.com/questions/17900732/how-to-cache-bitmaps-into-native-memory)

*   [JNI位图操作，用于帮助避免使用大图像时的OOM](https://stackoverflow.com/questions/18250951/jni-bitmap-operations-for-helping-to-avoid-oom-when-using-large-images)

这是我为它制作的图书馆：

*   [https://github.com/AndroidDeveloperLB/AndroidJniBitmapOperations](https://github.com/AndroidDeveloperLB/AndroidJniBitmapOperations)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-08T14:26:11.933

使用第二个过程。`AndroidManifest`用新`Service`的声明

```
android:process=":second" 
```

第一和第二进程之间的交换结束`BroadcastReceiver`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-26T11:14:51.310

这可以根据您的 Android 操作系统通过两种方式完成。

1.  您可以`android:largeHeap="true"`在 Android 清单的应用程序标签中使用来请求更大的堆大小，但这不适用于任何预 Honeycomb 设备。
2.  在 2.3 之前的设备上，您可以使用**VMRuntime 类**，但这不适用于 Gingerbread 及更高版本，请参阅下面的操作方法。

```
VMRuntime.getRuntime().setMinimumHeapSize(BIGGER_SIZE); 
```

在设置 HeapSize 之前，请确保您已输入适当的大小，不会影响其他应用程序或操作系统的功能。在设置之前，只需检查您的应用程序需要多少大小，然后设置大小以完成您的工作。不要使用太多内存，否则其他应用程序可能会影响。

参考：[http ://dwij.co.in/increase-heap-size-of-android-application](http://dwij.co.in/increase-heap-size-of-android-application)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-30T16:22:33.633

据我所知，您可以`VMRuntime`在早期的 Android 版本中使用类，但现在您不能再使用了。

我不认为让开发人员在移动环境中选择堆大小可以被认为是安全的。我认为通过尝试从应用程序本身修改堆大小，您可以更容易地找到一种方法来修改特定设备（而不是在编程端）中的堆大小。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-20T06:10:34.313

增加 Java Heap 不公平地消耗了不足的移动资源。**有时只需等待垃圾收集器**，然后在堆空间减少后恢复操作就足够了。然后使用这个[静态方法](https://stackoverflow.com/a/44644983/1112963)。

# asp.net - 使用 mysql 基于用户的类（角色/成员）进行授权

> ID：11275651
> 
> 赞同：0
> 
> 时间：2012-06-30T16:18:35.333
> 
> 标签：asp.net, mysql, visual-studio, asp.net-roles, asp.net-authorization

我`Web.config`以前为了让某些用户访问某些页面/文件夹而进行编辑，例如：

```
 <location path="Admin">
    <system.web>
      <authorization>
        <deny users ="?" />
        <allow users ="Administrator" />
        <deny users ="*" />
      </authorization>
    </system.web>
  </location> 
```

这是非常聪明和直接的。

现在我需要允许一*类*用户访问一些文件夹。不幸的是，对于单个用户来说，这似乎并不容易。我阅读了有关**角色**和**成员**的信息，但我只找到了有关使用 MSSQL 数据库实现它的官方文档。

使用 MySql 数据库设置基于角色/成员的授权最直接的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:27:17.753

你可以看这里[http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html)或者搜索“asp.net member mysql”

# javascript - 是否可以使用 css3 缩放仅缩放容器大小（不缩放内容）？

> ID：11275658
> 
> 赞同：0
> 
> 时间：2012-06-30T16:19:20.430
> 
> 标签：javascript, css, css-transitions

当用户单击它时，我希望 div 占据视口。目前，我已将 css3 转换设置为 div。并使用 javascript 设置宽度和高度属性。动画发生了。但这并不顺利。看起来很生涩。

所以，我想使用一些内置函数来扩展。我以 css3 scale() 结束。但它也可以缩放内容。我只是想让 div 扩展。不是内容。

这是可以实现的还是有其他方法可以做到这一点？我想实现 css3 解决方案而不是 javascript 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:01:31.310

在纯 CSS 中有一个 hacky 方法可以做到这一点，即添加一个内部 div 来保存内容 - 然后将缩放应用到元素并将相等的缩放应用到内部 div 本身。这样，您的内容将保持相同的大小。

# firefox - jstree - ie9 在页面刷新时短暂展开然后折叠树

> ID：11275666
> 
> 赞同：1
> 
> 时间：2012-06-30T16:20:40.220
> 
> 标签：firefox, google-chrome, internet-explorer-9, jstree

我正在从 UL 加载树，在 Firefox 或 Chrome 中，页面刷新很好。但在 IE9 中，整个树在折叠回应有的状态之前会进行短暂（且丑陋）的扩展。这是十分之一秒或其他任何时间，但它是该项目的展示停止器。

任何有关如何防止这种行为的建议将不胜感激。文档类型 html 4.01。Jsquery 最小 1.7.2。杰树 1.0。代码如下。

```
$(function(){
$("#treeview").jstree({
    "themes" : {
        "theme" : "default",
        "dots" : false,
        "icons" : false
    },
    "ui" : {
            "selected_parent_close" : "false",
            "select_multiple_modifier" : "false",
            "initially_select" : [$('body').attr('id')],
    },
    "core": { 
                "animation": 500
            },
    "cookies" : {
                "save_selected" : false
                }, 
    "plugins" : [ "themes", "html_data", "ui", "cookies" ]

});
$("#treeview").bind("reselect.jstree", function () {
    $("#treeview").bind("select_node.jstree", function (e, data) {
        document.location = data.rslt.obj.children("a").attr("href");
    });
}); 
$("#treeview").bind("loaded.jstree", function () {
    $("#treeview").jstree("open_all", "#" + $('body').attr('id'));
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-12T13:43:26.237

首先在你的 div 中使用 display: none 隐藏树

```
<div id="myJsTree" style="display: none">

</div> 
```

在你的 jquery 中，一旦你将 jstree 应用到你的 div 之后，使树可见

```
$("#myJsTree").jstree({
    // set tree parameters here ...
}).show(); 
```

# java - 找不到 Clojure

> ID：11275667
> 
> 赞同：5
> 
> 时间：2012-06-30T16:20:53.843
> 
> 标签：java, clojure, bukkit

[编辑：在 Bukkit 论坛](http://forums.bukkit.org/threads/strange-library-problem.84073/)和[Github](https://github.com/jonnay/Watership-Down/issues/1)上还有一些与此问题相关的其他讨论。

所以，我知道一两个人没有运气尝试过这个。但我想我快到了。

一个问题：我不懂Java，所以这对我来说有点陌生。反正..

于是，我在 Clojure 中做了一个简单的类，如下：

```
(ns com.gdude2002.ClojurePlugin.mainclj
  (:gen-class
   :name com.gdude2002.ClojurePlugin.mainclj
   :extends org.bukkit.plugin.java.JavaPlugin)
  (:import org.bukkit.plugin.java.JavaPlugin))

(defn -onEnable [this] (java.util.logging.Logger/getLogger "Loaded clojure plugin!"))
(defn -onDisable [this] (java.util.logging.Logger/getLogger "Unloaded clojure plugin!")) 
```

我使用clojure的`compile`函数把它编译成Java类，如下..

```
(set! *compile-path* ".")
(compile 'com.gdude2002.ClojurePlugin.mainclj) 
```

然后我将它手动放入 jar 中，在 com/gdude2002/ClojurePlugin/mainclj.class 下（以及将 plugin.yml 放入根目录）。

到目前为止，一切都很好。这种方法不会让 bukkit 对我的代码（特别是）感到讨厌，我认为这是一件好事。现在，关于问题。

当我尝试使用这个手工制作的 jar 启动服务器时，我得到以下输出。

```
21:43:30 [SEVERE] Could not load 'plugins\plugin.jar' in folder 'plugins'
org.bukkit.plugin.InvalidPluginException: java.lang.NoClassDefFoundError: clojure/lang/IFn 
```

“所以，”我想，“这看起来很简单——它找不到 Clojure，对吧？” 所以，我把clojure jar放在各种地方，同样的错误。我还将 META-INF/MANIFEST.MF 添加到 jar 中，其中包含`Class-Path: ../lib`. 依然没有。

所以，认为我很聪明，我将 clojure 文件夹从 Clojure jar 中拉出并推入我的，还将文件夹放在 ../lib 和其他我认为可能有帮助的地方。

现在，我得到这个错误..

```
21:51:33 [SEVERE] Could not load 'plugins\plugin.jar' in folder 'plugins'
org.bukkit.plugin.InvalidPluginException: java.lang.ExceptionInInitializerError
...
Caused by: java.io.FileNotFoundException: Could not locate clojure/core__init.class or clojure/core.clj on classpath:
... 
```

问题是，就我所见，这两种东西都存在。

编辑：决定在这里显示反编译的类代码，以防万一。

```
// IntelliJ API Decompiler stub source generated from a class file
// Implementation of methods is not available

package com.gdude2002.ClojurePlugin;

public class mainclj extends org.bukkit.plugin.java.JavaPlugin {
    private static final clojure.lang.Var main__var;
    private static final clojure.lang.Var onEnable__var;
    private static final clojure.lang.Var getResource__var;
    private static final clojure.lang.Var onLoad__var;
    private static final clojure.lang.Var getLogger__var;
    private static final clojure.lang.Var saveDefaultConfig__var;
    private static final clojure.lang.Var getDescription__var;
    private static final clojure.lang.Var removeDDL__var;
    private static final clojure.lang.Var onDisable__var;
    private static final clojure.lang.Var isInitialized__var;
    private static final clojure.lang.Var saveResource__var;
    private static final clojure.lang.Var onCommand__var;
    private static final clojure.lang.Var getDefaultWorldGenerator__var;
    private static final clojure.lang.Var toString__var;
    private static final clojure.lang.Var getDataFolder__var;
    private static final clojure.lang.Var installDDL__var;
    private static final clojure.lang.Var getDatabase__var;
    private static final clojure.lang.Var getFile__var;
    private static final clojure.lang.Var getClassLoader__var;
    private static final clojure.lang.Var getCommand__var;
    private static final clojure.lang.Var getDatabaseClasses__var;
    private static final clojure.lang.Var getConfig__var;
    private static final clojure.lang.Var reloadConfig__var;
    private static final clojure.lang.Var clone__var;
    private static final clojure.lang.Var setEnabled__var;
    private static final clojure.lang.Var saveConfig__var;

    public mainclj() { /* compiled code */ }

    public java.io.File getDataFolder() { /* compiled code */ }

    public boolean onCommand(org.bukkit.command.CommandSender p0, org.bukkit.command.Command p1, java.lang.String p2, java.lang.String[] p3) { /* compiled code */ }

    public void reloadConfig() { /* compiled code */ }

    public org.bukkit.configuration.file.FileConfiguration getConfig() { /* compiled code */ }

    public java.io.File getFile() { /* compiled code */ }

    public void saveConfig() { /* compiled code */ }

    public org.bukkit.command.PluginCommand getCommand(java.lang.String p0) { /* compiled code */ }

    public void onEnable() { /* compiled code */ }

    public java.util.logging.Logger getLogger() { /* compiled code */ }

    public void onLoad() { /* compiled code */ }

    public java.lang.ClassLoader getClassLoader() { /* compiled code */ }

    public void saveDefaultConfig() { /* compiled code */ }

    public org.bukkit.plugin.PluginDescriptionFile getDescription() { /* compiled code */ }

    public com.avaje.ebean.EbeanServer getDatabase() { /* compiled code */ }

    public void removeDDL() { /* compiled code */ }

    public void onDisable() { /* compiled code */ }

    public boolean isInitialized() { /* compiled code */ }

    public org.bukkit.generator.ChunkGenerator getDefaultWorldGenerator(java.lang.String p0, java.lang.String p1) { /* compiled code */ }

    public void installDDL() { /* compiled code */ }

    public void saveResource(java.lang.String p0, boolean p1) { /* compiled code */ }

    public java.util.List getDatabaseClasses() { /* compiled code */ }

    public java.lang.String toString() { /* compiled code */ }

    public java.lang.Object clone() { /* compiled code */ }

    public void setEnabled(boolean p0) { /* compiled code */ }

    public java.io.InputStream getResource(java.lang.String p0) { /* compiled code */ }

    public static void main(java.lang.String[] p0) { /* compiled code */ }
} 
```

编辑：评论中提到我应该发布我的 project.clj 文件。问题是，我没有！我直接在 mainclj.clj 上运行 compile.clj，并手动创建一个 jarfile。

在这一点上，我完全被难住了。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:24:59.553

我通过配置调用代码的类加载器解决了这个问题，如[本文](https://groups.google.com/d/msg/clojure/Aa04E9aJRog/f0CXZCN1z0AJ)所述。

我的情况可能与调用 Java 代码时有所不同。换句话说，我在从使用 gen-class (Clojure) 创建的类中调用方法之前，立即在我的 CommandExecutor (Java) 中调用了该代码。

# java - Android：ListView中的文件列表

> ID：11275668
> 
> 赞同：1
> 
> 时间：2012-06-30T16:21:04.557
> 
> 标签：java, android, listview

我需要在 ListView 中做文件列表。文件夹中的文件（.txt 文件）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:24:05.953

看到这个[链接](http://www.higherpass.com/Android/Tutorials/Creating-Lists-Using-The-Android-Listactivity/)

采用

```
File mfile=new File("/sdcard");
File[] list=mfile.listFiles(); 
```

并使用循环过滤

```
if(name.endsWith(".txt")) { } 
```

[如何列出位于 sd 卡上的所有文件和文件夹](https://stackoverflow.com/questions/8638293/how-to-list-all-files-and-folders-locating-on-sd-card)

[如何计算 Android 上具有特定扩展名的文件数？](https://stackoverflow.com/questions/5058934/how-do-i-count-the-number-of-files-with-a-specific-extension-on-android)

# java - Java 集合。员工商店的集合

> ID：11275669
> 
> 赞同：1
> 
> 时间：2012-06-30T16:21:16.513
> 
> 标签：java, collections

嘿，我只是想知道在为员工详细信息（例如姓名、年龄地址、出生日期、工资和电子邮件地址）创建商店时，最好使用什么集合。商店需要所有基本要素，例如添加、编辑、删除、全部删除和 searchBy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:27:15.893

好吧，您可能想要快速搜索，因此将键作为您要搜索的恶魔的散列结构可能是最佳解决方案。例如，如果要按名称搜索，可以创建这样的类：

```
public class EmployeeStore {
    private Map<String, Employee> employees;

    public EmployeeStore() {
        employees = new HashMap<String, Employee>();
    }

    public void add(Employee e) {
        employees.add(e.getName(), e);
    }

    public Employee searchByName(String name) {
        return employees.get(name);
    }

    // etc.
} 
```

`employees`并使用数据结构根据您的需要实现所需的方法。如果搜索是按名称完成的，您可以将名称作为键字符串。

不幸的是，通过与索引不同的字段进行搜索将需要线性搜索，如果您有大量条目，这将很慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:28:19.697

只需为您的员工实体创建一个类，如下所示：

```
public class Employee
{
String name;
public void setName(String nm)
{
this.name=nm;
}
public String getName()
{
return this.name;
}
//Other variables and associated getter and setters
} 
```

现在您可以创建一个**Employee**对象的集合：

```
ArrayList<Employee> employees=new ArrayList<Employee>(); 
```

或者您可以使用您想要的任何其他集合。

然后你需要为你想要的方法实现一些逻辑

```
Update(), Delete() 
```

您应该使用`HashMap`or`Map`来获得更快的搜索功能！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:01:45.820

要使用的特定“最佳”集合将取决于访问需求和数据限制。但是您可以将多个集合封装在一个`EmployeeStore`类中，以便以多种方式访问​​。

例如，如果您需要按姓名搜索，并且可以保证姓名是唯一的，那么`Map<String, Employee>`将姓名存储为键可以让您快速找到具有给定姓名的员工。如果不能保证名称是唯一的，您可能需要一个`Map<String, List<Employee>>`.

对于基于其他字段的搜索，您可以使用适当的键维护其他映射。

您的`add`,`remove`和`edit`方法的实现当然必须适当地更新您使用的所有地图。

如果您的搜索比简单的按键查找更复杂，或者如果您的数据很大，您可能需要`EmployeeStore`使用数据库来支持您，而不仅仅是使用集合。

# objective-c - 如何自动验证在 xcode 中声明的所有方法

> ID：11275671
> 
> 赞同：2
> 
> 时间：2012-06-30T16:21:40.830
> 
> 标签：objective-c, xcode, methods, compiler-warnings

我正在 Xcode 中使用 Objective-C。我想知道是否有任何机制来证明您的代码以确保在 .h 文件或私有 @interface 方法中声明所有函数和方法？

为了澄清，我将在编码切线上，并将直接在我的 viewController.m 文件中编写一个方法

```
- (Awesome*) generateAwesomeOfMagnitude:(NSFloat)magnitude { ... 
```

我会忘记将标题添加到 viewController.h 文件中。如果这是一个私有方法，没有任何东西通知我我已经这样做了，所以我必须返回并验证所有内容是否在我完成时手动声明。有没有办法自动检查？

**注意：**我想让编译器发出警告。是否有一个设置真的是我应该问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:42:46.080

Omar 的回答是正确的——询问对象是否会响应选择器是探测对象以查看它们是否会*在运行时*响应方法的首选方法。但是，问题是“如何自动验证所有方法都已声明？” （大概在*编译时*）。答案是，如果不自己写一些东西，你就不能自动做到这一点。

这是使 Objective-C “动态”的部分原因。您不必在任何地方声明方法。这使事情成为可能，例如：

```
id anUnknownObject = [[NSClassFromString(whoKnowsWhatIllBe) alloc] init];
[anUnknownObject performSelector:@selector(whoKnowsWhatIllDo)]; 
```

这意味着，例如，您可以从 Web 服务中获取一个字符串并仅基于该字符串实例化一个类（当然，该类必须在运行时存在才能被实例化，但编译器没有线索）。

这并不意味着您*应该*以这种方式编程，但它意味着它是可能的，并且与大多数事情一样，有适当的用例，这是语言的一个很大区别。它促进了极端的解耦、多态性和非常有趣的模式。

在 .m 类扩展中声明私有方法通常被认为是最佳实践，但它的价值是针对程序员，而不是编译器。一些人（包括一个暂时在公共论坛上匿名的 Objective-C 的主要贡献者）也建议没有必要在一个文件中输入所有方法的名称两次（更少的代码，更少的错误——如果你是第一次看别人的课，那就多滚动一下）。拥有漂亮整洁的公共 API 正是标头的用途。有一个干净的实现很重要，但假设是一旦你在 m 中，无论如何你都在私人领域。滚动。查看方法名称是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:27:45.520

要检查类中运行时是否存在方法，请使用

```
if([yourObject respondsToSelector:@selector(generateAwesomeOfMagnitude:)])
    //has this method
else
    //does not have this method 
```

但是如果您在 .m 中定义一个方法并且不将其包含在 .h 文件中，则不会收到任何警告

但是，如果另一个类正在访问未在 .h 文件中声明的方法，您将收到警告

# facebook - Wordpress 主页上的 Facebook 分享按钮

> ID：11275681
> 
> 赞同：0
> 
> 时间：2012-06-30T16:22:53.103
> 
> 标签：facebook, wordpress, button

我在 Wordpress 中的“single.php”模板上将此作为我的 facebook 分享按钮：

```
<script>
function fbs_click() {
u=location.href;
t=document.title;
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;
}
</script>
<style> html .fb_share_link { padding:0px;background:url(http://www.mydomain.com/images/compartir-fb.png) no-repeat top left; }</style><a href="#" onclick="return fbs_click()" target="_blank" class="fb_share_link"></a> 
```

我尝试将相同的代码添加到我的“index.php”中，但它似乎不起作用，当我单击按钮时，它会共享我的主网站“www.mydomain.com”，但我希望它共享每个人文章。所以尝试更换：

“u=位置.href；” 到“ `u=<?php the_permalink() ?>`”

但它所做的只是打开一个带有 www.mydomain.com 的新标签

我真的很想弄清楚该放在哪里`<?php the_permalink() ?>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:38:21.373

尝试将其转换如下...

```
wp_reset_query();
if(is_home()){
$url = site_url();
}else{
$url = get_permalink();
}

<script>
function fbs_click() {
u='<?php echo $url;?>';
t=document.title;
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:38:17.693

> 所以尝试更换：

```
"u=location.href;" to "u=<?php the_permalink() ?>" 
```

这只会在浏览器的 JavaScript 控制台中出现错误，因为它不是有效的 JS 语法，因为您忽略了将文本文字放在字符串分隔符中。

# java - 坚持特定的修订号

> ID：11275683
> 
> 赞同：2
> 
> 时间：2012-06-30T16:22:59.157
> 
> 标签：java, hibernate, hibernate-envers

我阅读了 Hibernate Envers 文档，但不明白如何让以下工作：

我有两个实体：地址和订单。订单有一个地址。

创建订单时，我希望它坚持当前地址修订，因此如果相同的地址更改（生成新修订），订单仍然指向它创建时的地址修订。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:27:36.130

Envers 不可能做到这一点，事实上，这不是 Envers 的用途。

在您的情况下，您有两个不同的地址“身份” - 旧的和新的。因此，它们应该是独立的实体。改变的不是同一个地址实体。

然后，您可以使用 Envers 来跟踪关系如何变化。假设您有订单 O，地址为 A1 和 A2。最初的关系是：O->A1。但是当地址发生变化时，您可以将关系更改为：O->A2，这将反映在历史记录中。

但是，当您阅读实体时，您总是会获得最新版本。“当前”实体不能指向历史条目。

# javascript - 修复画布翘曲

> ID：11275684
> 
> 赞同：0
> 
> 时间：2012-06-30T16:23:06.597
> 
> 标签：javascript, jquery, html

为什么画布在调整大小时会拉伸内容，我该如何解释这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:33:18.753

你能具体说明吗？什么样的画布？据我了解，我假设您正在寻找操纵元素的 resize 属性。

您可以通过指定对象的调整大小属性来更改它：

```
<textarea style="resize: none;">
</textarea> 
```

不幸的是，这是一个 CSS3 属性，所以只有 Mozilla 和 Webkit 可以支持 resize 属性。您可以在[http://www.w3schools.com/cssref/css3_pr_resize.asp中查看](http://www.w3schools.com/cssref/css3_pr_resize.asp)

允许调整大小：无 | 两者| 卧式 | 垂直的

# javascript - jQuery/Javascript：在 HTML 文档中更复杂的搜索和替换

> ID：11275687
> 
> 赞同：0
> 
> 时间：2012-06-30T16:23:14.587
> 
> 标签：javascript, jquery, ajax, regex, replace

我以前在 jQuery 和 Javascript 中做过一些事情，但不幸的是我不是专家。我找不到任何关于如何使用尽可能少的资源来完成任务的提示。你们可能可以帮助我：

**这是我想做的事情：**

我想在页面上查找（使用正则表达式）所有类似于 BB 代码的元素，如下所示：

> [这里的索引=参数随机数据]

然后，我想用从 ajax 调用收到的内容替换它们，如下所示：

> call.php?ndex=here=参数随机数据

或我从相应的 [ndex] 标记中获取的任何参数。

**到目前为止，这是我的解决方案/思考过程：**

```
$(document).ready(function() {
    var pattern = /\[ndex\s+(.*?)\]/mg;
    var documentText = $(document.body).text();
    var matches = documentText.match(pattern);

    $('*').each(function () { 
        var searchText = this;
        if ($(searchText).children().length == 0) { 
            $.each(matches, function() {
                //here is where I would need to check for a match and make a call 
                }
            }); 
        } 
    });
}); 
```

我真的不知道如何从这里工作。我的草图看起来非常笨重和复杂。必须有一个更优雅和直接的解决方案。

非常感谢你们的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:57:06.743

我的建议是尽量减少 ajax 调用。首先进行搜索，然后在另一轮将每个对象替换为相应的数据。

```
$(document).ready(function() {
var pattern = /\[ndex\s+(.*?)\]/mg;
var documentText = $(document.body).text();
var matches = documentText.match(pattern);

$.ajax({ 
       url:'call.php',
       method:'POST',
       data: matches,
       success: function(data){
          //replace every matched element with the corresponding data
       });

}); 
```

您必须修改您的 call.php 以考虑到这一点，但是您节省了大量对服务器的调用，从而节省了时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:29:53.363

我会做这样的事情：

```
function ndex_treat(n) {
  // If element is ELEMENT_NODE
  if(n.nodeType==1)
  {
    // If element node has child, we pass them to function ndex_treat
    if(n.hasChildNodes())
      for(var i= 0; i<n.childNodes.length; i++)
        ndex_treat(n.childNodes[i]);
  }
  // If element is TEXT_NODE we replace [ndex ...]
  else if(n.nodeType==3)
  {
    var matches, elemNdex, elemText;
    // While there is one
    while(/\[ndex\s+(.*?)\]/m.test(n.nodeValue))
    {
      // Taking what's before (matches[1]), the "attribute" (matches[2]) and what's after (matches[3])
      matches= n.nodeValue.match(/^([\s\S]*?)\[ndex\s+(.*?)\]([\s\S]*)$/m)
      // Creating a node <span class="ndex-to-replace" title="..."></span> and inserting it before current text node element
      elemNdex= document.createElement("span");
      elemNdex.className= 'ndex-to-replace';
      elemNdex.title= matches[2];
      n.parentNode.insertBefore(elemNdex, n);
      // If there was text before [ndex ...] we add it as a node before
      if(matches[1]!=="")
      {
        elemText = document.createTextNode(matches[1]);
        elemNdex.parentNode.insertBefore(elemText, elemNdex);
      }
      // We replace content of current node with what was after [ndex ...]
      n.nodeValue=matches[3];
    }
  }
}

$(function(){
  // Get the elements we want to scan ( being sharper would be better )
  $('body').each(function(){
    // Passing them to function ndex_treat
    ndex_treat(this);        
  });

  // Make the ajax calls
  $('.ndex-to-replace').each(function(){
    // Don't know if necessary
    var current= this;
    $.get('call.php?ndex='+encodeURIComponent(this.title),function(data){
      $(current).replaceWith(data);
    });
  });
}); 
```

我用 node 而不是 jquery 替换，因为我发现用 jquery 在 textNode 上工作相当糟糕。如果您不在乎并且宁愿以野蛮人的方式行事，则可以简单地替换所有第一部分：

```
$(function(){
  // Get the elements we want to scan ( being sharper would be better )
  $('body').each(function(){
    // With no " in argument of [ndex ...]
    $(this).html( $(this).html().replace(/\[ndex\s+([^"]*?)\]/mg,'<span class="ndex-to-replace" title="$1"></span>') );
    // With no ' in argument of [ndex ...]
    //$(this).html( $(this).html().replace(/\[ndex\s+([^']*?)\]/mg,'<span class="ndex-to-replace" title='$1'></span>') );
  });

  // Make the ajax calls
  /* ... */
}); 
```

# cuda - 2.x 设备中的存储库冲突

> ID：11275697
> 
> 赞同：1
> 
> 时间：2012-06-30T16:24:27.490
> 
> 标签：cuda, gpu, shared-memory, bank-conflict

带有 2.x 设备的设备中的存储库冲突是什么？据我了解 CUDA C 编程指南，在 2.x 设备中，如果两个线程访问同一个共享内存库中的同一个 32 位字，则不会导致库冲突。相反，这个词被广播。当两个线程在同一个共享内存库中写入相同的 32 位字时，只有一个线程成功。

由于片上内存为 64 KB（共享内存为 48 KB，L1 为 16 KB，反之亦然），并且它分为 32 个存储区，我假设每个存储区由 2 KB 组成。所以我认为如果两个线程访问同一个共享内存银行中的两个不同的 32 位字，就会出现银行冲突。它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:19:47.877

你的描述是正确的。有许多访问模式会产生银行冲突，但这里有一个简单且常见的示例：跨步访问。

```
__shared__ int smem[512];

int tid = threadIdx.x;

x = smem[tid * 2]; // 2-way bank conflicts
y = smem[tid * 4]; // 4-way bank conflicts
z = smem[tid * 8]; // 8-way bank conflicts
// etc. 
```

Bank ID = index % 32，因此如果查看 x、y 和 z 访问中的地址模式，您可以看到在 32 个线程的每个 warp 中，对于 x，2 个线程将访问每个 bank，对于 y， 4 个线程将访问每个 bank，对于 z，8 个线程将访问每个 bank。

# java - 同步发布顺序

> ID：11275699
> 
> 赞同：11
> 
> 时间：2012-06-30T16:24:57.257
> 
> 标签：java, synchronized

我扫描了声明中的所有 java[文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)`synchronized`，以寻找这个问题的答案，但没有运气。

假设我有`thread1`, `thread2`,`thread3`试图同时运行以下代码。

```
 synchronized(lockObj) { 
     doSomething();
 } 
```

假设`thread1`先到`doSomething()`，`thread2`然后`thread3`它将阻塞并等待`synchronized`语句。

**问题**

1.  释放锁时`thread1`，哪个线程会先被释放？
2.  释放锁时适用的一般顺序规则是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-30T16:35:30.430

1\. 线程 2 或线程 3。没有保证：

*同样，不应假设线程被授予监视器所有权的顺序或线程响应 notify 或 notifyAll 方法唤醒的顺序*

[http://docs.oracle.com/javase/1.5.0/docs/guide/vm/thread-priorities.html#general](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/thread-priorities.html#general)

2\. Java 监视器（synchronized/await/notify/notifyAll）是不公平的。java 1.5 的同步原语通常有参数来强制公平。请注意，公平版本有相当大的性能损失，通常应该使用非公平版本：统计上，每个线程都将有机会运行，即使顺序没有严格执行。

*使用由许多线程访问的公平锁的程序可能会显示出比使用默认设置的程序更低的整体吞吐量（即，更慢；通常要慢得多），但在获取锁和保证不会出现饥饿的情况下具有更小的差异。但是请注意，锁的公平性并不能保证线程调度的公平性。因此，使用公平锁的许多线程之一可能会连续多次获得它，而其他活动线程没有进展并且当前没有持有锁。另请注意，不定时的 tryLock 方法不遵守公平设置。如果锁可用，即使其他线程正在等待，它也会成功。*

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock%28boolean%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock%28boolean%29)

# ruby-on-rails - Rails - 控制器中的自定义操作 - 如何在视图中引用？

> ID：11275701
> 
> 赞同：0
> 
> 时间：2012-06-30T16:25:15.317
> 
> 标签：ruby-on-rails, session, link-to

我正在使用自定义操作将项目的 id 获取到会话中，以便仅在其他区域中显示该项目的相关信息。我在项目控制器中进行了自定义操作，但无法在视图中获取链接以调用该操作。我只是收到一条错误消息“找不到没有 ID 的项目”。我是 Rails 新手 - 我知道这可能是一个简单的问题，但非常感谢您的帮助，谢谢！

查看代码：

```
<%= link_to 'Select Project', :action => :select_project %> 
```

控制器代码：

```
def select_project
  @project = Project.find(params[:id])
  session[:project_id] = @project.id
end 
```

路线：

```
resources :projects do
  collection do
    get :select_project
  end
end 
```

替代路线代码：

```
resources :projects do
  put 'select_project', on: :member
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:03:33.823

我认为生成的路线是`select_project_projects_path`.

关联：

`<%= link_to 'Select Project', select_project_projects_path %>`

为了将来参考，运行`rake routes`查看 Rails 生成的自动路由助手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:25:19.537

这是未经测试的，但我相信这是您正在寻找的：

路线：

```
resources :projects do
  member do
    post :set_current
  end
end 
```

这应该创建以下内容：

*   端点：/projects/:id/set_current POST
*   助手：set_current_project_path

控制器

```
def set_current
  project = Project.find(params[:id])
  session[:project_id] = project.id
  redirect_to projects_path, :notice => "Current project set to #{project.name}"
end 
```

意见

```
# index / erb tags excluded for simplicity 
@projects.each do |project|
  link_to 'Select Project', set_current_project_path(project), :method => :post
end

# show
<%= link_to 'Select Project', set_current_project_path(@project), :method => :post %> 
```

看：

*   [http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)
*   [http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

还要注意使用“post”而不是“get”，因为我们正在更改对象（会话）的状态，所以最好使用 post 而不是 get，否则用户可能会在地址栏中拉出旧的 get 请求他们的浏览器并在不知不觉中将他们的会话设置为一个项目。

就像`varatis`说的那样 - 使用`rake routes`or`CONTROLLER=projects rake routes`来帮助确定您的路由/路径助手的外观以及他们期望的 http 动词

* * *

> 控制器中的项目不是@project有什么原因吗

@project 创建一个实例变量；在 Rails 控制器中，实例变量可用于视图。这个 set_current 动作永远不会渲染一个视图，所以没有理由用它来创建一个实例变量。

* * *

> 您为什么必须将其设置为成员而不是路由中的集合

您要引用的任何操作都`params[:id]`应该是成员路由，另一种方法是将其保留为集合路由并`params[:project_id]`在所有 link_to 调用中传递并传递它，但在这种情况下，成员更有意义。

我相信`resources :projects`这是解决这个问题的捷径

```
member do
  get :show
  get :edit
  put :update      
  delete :destroy
end
collection do
  get :index
  get :new
  post :create
end 
```

希望这能澄清你的一些问题？

# winapi - 使用 RegQueryInfoKey() 枚举 COM 端口

> ID：11275709
> 
> 赞同：0
> 
> 时间：2012-06-30T16:26:23.070
> 
> 标签：winapi, registry

试图获取可用组件的数量。使用了以下代码：

```
HKEY hKey;
if (RegOpenKey(HKEY_LOCAL_MACHINE,TEXT("HARDWARE\\DEVICEMAP\\SERIALCOMM"),&hKey)==ERROR_SUCCESS)
{
  DWORD NumKeys;
  RegQueryInfoKey(hKey,NULL,NULL,NULL,&NumKeys,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
} 
```

由于某种原因，NumKeys 返回为 0，而注册表中显示了串行端口。它确实输入了 if（意味着 RegOpenKey 没有错误）。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:34:58.287

列出的端口名称是*值*，而不是键。请改用 lpcValues 参数。

# c - 从 void ** 转换为 char ** 有多危险

> ID：11275713
> 
> 赞同：5
> 
> 时间：2012-06-30T16:26:45.880
> 
> 标签：c, pointers, void-pointers

所以我们知道标准并不强制指针大小相等。（[这里](https://stackoverflow.com/questions/1241205/are-all-data-pointers-of-the-same-size-in-one-platform)和[这里](https://stackoverflow.com/questions/916051/are-there-are-any-platforms-where-pointers-to-different-types-have-different-siz)）（而不是谈论函数指针）

我想知道这实际上如何成为一个问题。我们知道它`void *`可以容纳任何东西，所以如果指针大小不同，那将是最大的大小。鉴于此，将 a 分配`void **`给 a`char **`意味着麻烦。

我的问题是假设`void *`并`char *`具有相同的大小会有多危险？实际上是否存在不正确的架构？

另外，16位的dos不是我想听到的！;)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T16:29:34.010

`void *`并`char *`保证具有相同的大小。

`void **`不保证具有相同的大小`char **`（但在您的实现中非常相似）。

> （C99，6.2.5p27）“指向 void 的指针应具有与指向字符类型的指针相同的表示和对齐要求 [...] 指向其他类型的指针不需要具有相同的表示或对齐要求。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T17:05:31.487

只要不违反对齐要求，就允许将不同对象类型的指针相互分配：分配将涉及（隐式）类型转换，因此与将 a 分配`float`给 an一样（不）有问题`int`- 它在大多数情况下都有效但在不可能进行有意义的转换时允许爆炸。

`char *`并且`void *`每个规范都有兼容的对齐要求，因此将 a 分配`char **`给`void **`变量（反之亦然）永远不会有问题。它们甚至具有兼容的表示，这意味着原则上，`char *`通过类型的表达式访问 a `void *`- 例如通过取消引用`void **`实际指向 a 的 a `char *`- 在大多数情况下将按预期工作。当然，反过来（`void *`通过取消引用 a 来访问 a `char **`）也适用。

例如，期望 a和传入任意指针类型的`p`转换说明符是未定义的行为。然而，在 的情况下，只要实现符合 C 标准，它甚至可以在奇异的体系结构（例如，具有不同的指针表示）上工作。`printf()``void *``char *`

可能出现问题的地方是别名分析：由于有效的类型规则，a`void **`和 a`char **`不能别名，如果程序员违背了这个承诺，可能会发生奇怪的事情。人们应该意识到，由于有效的类型（也就是严格的别名），C实际上是强类型的——类型系统非常不健全（即不能保护你不违反它的不变量）......

# ruby-on-rails - HAML 使用哈希火箭而不是冒号渲染 as_json

> ID：11275714
> 
> 赞同：2
> 
> 时间：2012-06-30T16:27:11.200
> 
> 标签：ruby-on-rails, ruby, json, haml

我正在尝试将 ruby​​ 哈希渲染为 haml 中的 json 字符串。（`!`告诉haml不要逃避输出）

```
! { :name => "Paul" }.as_json 
```

我期待这个输出

```
{ "name":"Paul" } 
```

但我得到的是哈希火箭而不是冒号

```
{ "name"=>"Paul" } 
```

如何`as_json`为属性/值分隔符制作 haml 或输出冒号而不是哈希火箭？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T16:45:05.597

`as_json`本质上是一种允许您指定对象如何在 JSON 中表示的方法。它实际上并没有返回 JSON 编码的字符串。`to_json`为此需要。

这样做的原因是，您可能想要决定在 JSON 编码时模型返回哪些字段（例如，从 User 模型中删除密码），但是通过使用`to_json`，您不再能够将其嵌套在另一个 JSON 对象中，因为它已成为编码和转义的字符串。

`to_json`将调用`as_json`，并对返回值进行编码。

引用自：http: [//jonathanjulian.com/2010/04/rails-to_json-or-as_json/](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)

# cocos2d-iphone - Cocos2d CCScene & CCLayer 设置

> ID：11275724
> 
> 赞同：0
> 
> 时间：2012-06-30T16:28:28.053
> 
> 标签：cocos2d-iphone

对不起新手的问题，但我想知道这两种不同的场景和图层设置有什么区别？我已经尝试了两种方法，每种方法都有效，但我只是不知道有什么区别或者我应该使用哪一种。

@实现游戏

```
+(id) scene {
CCScene *scene = [CCScene node];
[scene addChild:[Game node]];
return scene; } 
```

或者这样。

@实现游戏

```
+(id) scene {

CCScene *scene = [CCScene node];
Game *layer = [Game node];
[scene addChild:layer];
return scene; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:24:48.780

我看不出您的 2 个代码示例之间有任何区别。你的2个方法是一样的。

`[Game node]`返回一个图层，因此在第一种情况下，您将其直接添加到场景中，在第二个示例中，您只需将其放入变量中，然后将其添加到您的场景中。对于编译器来说，这里也是一样的。

# ruby - 无法让 RubyGems 使用 JRuby 安装 Maven 工件

> ID：11275726
> 
> 赞同：1
> 
> 时间：2012-06-30T16:28:29.120
> 
> 标签：ruby, maven, rubygems, jruby, maven-3

我们正在将一个遗留 Java 应用程序移植到 JRuby，并希望重用一些我们不打算移植到 Ruby 的 Maven JAR（这实际上是我们选择 JRuby 而不是 MRI 的原因）。

我搜索了一下，发现 JRuby 附带的 RubyGems 内置了对 Maven 依赖项处理的支持，但我无法让 RubyGems 解决它们。

我试过`gem install joda-time:joda-time`,`gem install mvn:commons-lang:commons-lang`和`jgem install mvn:commons-lang:commons-lang`:`jruby -S gem install mvn:commons-lang:commons-lang`

```
ERROR:  Could not find a valid gem 'mvn:commons-lang:commons-lang' (>= 0) in any repository 
```

我们使用 RVM 安装的 JRuby 1.6.7：

```
$ ruby --version
jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM) 64-Bit Server VM 1.6.0_26) [linux-amd64-java] 
```

我们如何让 RubyGems 处理 Maven 工件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:03:15.560

我已经能够使用 Bundler / [JBundler](https://github.com/mkristian/jbundler "JBundler")解决 Maven 依赖项。

# eclipse - Nutch 例外：''..无法解析为类型“

> ID：11275729
> 
> 赞同：0
> 
> 时间：2012-06-30T16:29:30.130
> 
> 标签：eclipse, exception, nutch

我按照使用此站点的步骤操作：[http ://wiki.apache.org/nutch/RunNutchInEclipse](http://wiki.apache.org/nutch/RunNutchInEclipse)

我在运行时遇到了一个问题，上面写着

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
String cannot be resolved to a type
Exception cannot be resolved to a type
System cannot be resolved

at org.apache.nutch.crawl.Crawl.main(Crawl.java:53) 
```

构建成功。

我正在使用 nutch 1.4。

此外，我想告诉我，我没有理解**“为 Nutch 建立 Eclipse 环境”**部分的第 3 点并跳过了它。我想问题只出在那儿。你能帮我吗，因为我尝试解决它的次数越多，我就越沮丧。从过去 2 天开始尝试。这是一个谦虚的请求，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:03:11.700

你想让它从eclipse运行吗？AFAIK 仅当您想修改 Nutch 代码时，从 eclipse 运行并进行所有设置才有意义。如果您出于某种原因想从 Eclipse 运行，第 3 点意味着：您需要添加这些路径。即在插件文件夹中还有许多其他文件夹。您需要手动展开每个文件夹并添加 src/test 和 src/java。例如：有一个文件夹叫创作共用。在那里面有 src 和里面有 java 和 test 文件夹。您需要同时选择两者。同样对插件文件夹中的所有目录执行此操作。

# javascript - 在nodejs中将js对象写入文件（包括方法）？

> ID：11275732
> 
> 赞同：9
> 
> 时间：2012-06-30T16:29:56.690
> 
> 标签：javascript, node.js

我看到了如何将对象写入文件，如下所述：[如何将对象保存到 Node.js 中的文件？](https://stackoverflow.com/questions/7284849/how-can-i-save-objects-to-files-in-node-js)但是有没有办法获取一个对象并以一种允许我将对象重新加载到内存中的方式写入它，包括它的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T17:42:44.897

正如@AnthonySottile 之前所说，这可能非常危险，我不确定它是否有一个好的用例，但只是为了好玩和咯咯笑，你需要编写自己的递归序列化程序。像这样的东西：

```
var toString = Object.prototype.toString;

function dump_object(obj) {
    var buff, prop;
    buff = [];
    for (prop in obj) {
        buff.push(dump_to_string(prop) + ': ' + dump_to_string(obj[prop]))
    }
    return '{' + buff.join(', ') + '}';
}

function dump_array(arr) {
    var buff, i, len;
    buff = [];
    for (i=0, len=arr.length; i<len; i++) {
        buff.push(dump_to_string(arr[i]));
    }
    return '[' + buff.join(', ') + ']';
}

function dump_to_string(obj) {
    if (toString.call(obj) == '[object Function]') {
        return obj.toString();
    } else if (toString.call(obj) == '[object Array]') {
        return dump_array(obj);
    } else if (toString.call(obj) == '[object String]') {
        return '"' + obj.replace('"', '\\"') + '"';
    } else if (obj === Object(obj)) {
        return dump_object(obj);
    }
    return obj.toString();
} 
```

这将处理大多数类型，但总是有一个古怪的人把它搞砸，所以**我不会在生产中使用它**。之后反序列化很简单：

```
eval('var test = ' + dump_to_string(obj)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-22T05:58:16.520

这个问题很老了，但我在任何地方都找不到一些简单的解决方案来解决 JavaScript 中有效序列化的问题。
可以使用[BSON](https://github.com/mongodb/js-bson)（MongoDB 内部对象表示），它使用二进制格式来表示内存中的对象。

我找不到文档的链接，但[代码有据可查](https://github.com/mongodb/js-bson/blob/dd196e24512a6677a6061e9baa610fee6bca9659/lib/bson/bson.js#L1475)，我想出了这样的东西：

```
fs = require 'fs'
bson = require('bson').BSONPure.BSON

obj = {
  string: "test",
  func: (s) ->
    console.log s
}

fs.writeFile 'test.txt', bson.serialize(obj, false, false, true), (err) ->
  return console.log("Err : #{err}") if err
  fs.readFile 'test.txt', (err, file) ->
    return console.log("Err : #{err}") if err
    deserialized = bson.deserialize file, evalFunctions: true
    deserialized.func deserialized.string // Outputs 'text', as expected 
```

它是[咖啡脚本](http://coffeescript.org)，但代码很简单，每个人都能理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:01:22.260

我最近写了 shoveJS：[https](https://shovemedia.github.io/shovejs/) ://shovemedia.github.io/shovejs/来处理这类事情。YMMV——我还没有在 Node 上尝试过。

它将类型化对象结构转换为 JSON（然后将其保存到磁盘），并且可以将该结构膨胀回类型化对象，包括正确的对象 -> 对象引用等。要清楚，方法/类定义本身不是序列化的。系统只是期望在序列化期间可用的已注册模型/工厂类在反序列化期间也可用。

提前道歉没有发布一些简单的例子。

编辑：该技术是对 Rob W 在下面的评论中提到的内容的改进

# php - 关于将两个 XML 提要组合在一起的建议 - own3d/twitch.tv

> ID：11275735
> 
> 赞同：1
> 
> 时间：2012-06-30T16:30:20.713
> 
> 标签：php, xml, api

我正在做一个小项目来显示 Dota 2、英雄联盟和星际争霸 2 的实时流，并且正在使用一个第三方托管的 api，它有来自 Twitch.tv 和 own3d 的提要 - 我非常高兴，直到他们关闭他们的服务器！

我尝试将它们与雅虎管道合并在一起，但运气不佳！这是我正在使用的两个提要：

Twitch.tv/justin.tv - [http://api.justin.tv/api/stream/list.xml?category=gaming&limit=15](http://api.justin.tv/api/stream/list.xml?category=gaming&limit=15)

Own3d - [http://api.own3d.tv/live?limit=15](http://api.own3d.tv/live?limit=15)

这是我尝试组合这两个提要的方法，只需将它们放在一起列出即可。它是一个临时解决方案，但它们没有按现场观众排序（这是我想做的事情） -

我拥有的当前脚本：

```
<table class="table">
<thead>
<tr>
<th colspan="4" class="streamheader">Current live Sstreams</th>
</tr>
</thead>

<tbody>

<?php

$xmlFileData2 = file_get_contents("http://api.own3d.tv/live?limit=15");

$xmlData2 = new SimpleXMLElement($xmlFileData2);

foreach($xmlData2->channel->item as $item) 

if ($item->misc['game'] == 'Dota 2' OR $item->misc['game'] == 'League of Legends' OR $item->misc['game'] == 'StarCraft II') {

{

$titlelimit = $item->title;

$title = substr($titlelimit,0,20);

echo "<tr><td>";

if ($item->misc['game'] == 'League of Legends')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/lol.jpg' /></td><td>";
elseif ($item->misc['game'] == 'StarCraft II')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/sc2.jpg' /></td><td>";
elseif ($item->misc['game'] == 'Dota 2')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/dota2.jpg' /></td><td>";

else
echo "none";

echo "<a href='";
$link = $item->link;             
$findthis ="/www.own3d.tv/live/"; 
$replacement ="ae/stream/"; 
echo str_replace ($findthis, $replacement, $link);
echo "'>";
echo $title;
echo "</a></td><td>";
$author = $item->author;             
$find ="/rss@own3d.tv/"; 
$replace =""; 
echo preg_replace ($find, $replace, $author);
echo "<td>";
echo $item->misc['viewers']; 
echo "</td> </tr>";

}
}
else
{
echo "";
}

$xmlFileData1 = file_get_contents("http://api.justin.tv/api/stream/list.xml?category=gaming&limit=15");

$xmlData1 = new SimpleXMLElement($xmlFileData1);

foreach($xmlData1->stream as $itemtwitch) {

$game = $itemtwitch->meta_game;

$sc2 = "StarCraft II: Wings of Liberty";

if ($itemtwitch->meta_game == 'Dota 2' OR $itemtwitch->meta_game == 'League of Legends' OR $itemtwitch->meta_game == 'StarCraft II: Wings of Liberty') {
{
echo "<tr><td>";

$titlelimittwitch = $itemtwitch->title;

$titlelimittwitch = substr($titlelimittwitch,0,20);

if ($itemtwitch->meta_game == 'League of Legends')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/lol.jpg' /></td><td>";
elseif ($itemtwitch->meta_game == 'StarCraft II: Wings of Liberty')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/sc2.jpg' /></td><td>";
elseif ($itemtwitch->meta_game == 'Dota 2')
echo"<img src='http://localhost/ae/wp-content/themes/ae/img/dota2.jpg' /></td><td>";
else
echo "none";

$data = $itemtwitch->name;
$find ="/live_user_/";
$replace ="";
echo "<a href='";
echo "http://localhost/ae/stream/";
echo preg_replace ($find, $replace, $data);
echo "''>";
echo "$titlelimittwitch";
//print(" - " . $itemtwitch->meta_game . "");
echo "</a></td><td>";
echo preg_replace ($find, $replace, $data);
print("</td><td>" . $itemtwitch->channel_count . "</td></tr>");
}
}
else {
echo "";
}
}
?>

<tr>

<th colspan="4" class="streamheader centered">View all streams</th>
</tr>   
</tbody>
</table> 
```

任何指导或指向正确的方向都会很棒。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:02:55.463

丹，您需要将两组信息（own3d/twitch）添加到同一个数组中，然后对其进行排序。假设您将它们添加到名为 $streamArray 的数组中，您将使用以下代码按查看者对它们进行排序。

```
foreach ($streamArray as $key => $row) {
 $viewers[$key] = $row['viewers'];
}

array_multisort($viewers, SORT_DESC, SORT_NUMERIC, $streamArray); 
```

我在[http://halfw.com/streams.php开发了一个类似的设置](http://halfw.com/streams.php)

如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:46:10.360

您可以使用 Streamtastic 之类的库（*免责声明：我写*的）来获取 Own3d 和 Twitch.tv 的最新和热门观看流

[https://github.com/sergiotapia/Streamtastic](https://github.com/sergiotapia/Streamtastic)

用法很简单：

## **Own3d 示例：**

```
StreamFinder own3dStreamtastic = new StreamFinder(new Own3dStreamRepository());

// Let's find the most viewed streamers in general.
var topStreamers = own3dStreamtastic.FindTopViewedStreams();
foreach (var stream in topStreamers)
{
    Console.WriteLine(String.Format("{0} - Viewers: {1}", stream.Title, stream.ViewerCount));
}

// You can find the top viewed streamers for any game Own3d supports.
// For example, League of Legends.
var topStreamersForLeagueOfLegends = own3dStreamtastic.FindTopViewedStreamsByGame("League+of+Legends");
foreach (var stream in topStreamersForLeagueOfLegends)
{
    Console.WriteLine(String.Format("{0} - Viewers: {1}", stream.Title, stream.ViewerCount));
}

// Or how about League of Legends.
var topStreamersForLol = own3dStreamtastic.FindTopViewedStreamsByGame("League+of+Legends");
foreach (var stream in topStreamersForLol)
{
    Console.WriteLine(String.Format("{0} - Viewers: {1}", stream.Title, stream.ViewerCount));
} 
```

由于您使用的是 PHP，因此只需运行此应用程序并将结果保存到数据库中。然后让您的 PHP 程序从数据库中获取结果。

# asp.net-mvc - 实体框架 - 如何在不知道主键的情况下添加相互引用的实体

> ID：11275737
> 
> 赞同：1
> 
> 时间：2012-06-30T16:30:26.750
> 
> 标签：asp.net-mvc, entity-framework, insert

我对 Entity Framework 很陌生，如果这是一个非常糟糕的问题，我深表歉意，但我找不到对我有意义的解决方案。虽然我的问题很复杂，但我会尽量简化它。假设我有两个模型 Company 和 CompanyAddress。

```
+--------------------Company---------------------------------------+
| int CompanyId
| string CompanyName
|
| virtual <ICollection>CompanyAddress address // Navigation Property
+-------------------------------------------------------------------+ 
```

和，

```
+--------------------CompanyAddress---------------------------+
| int CompanyAddressId
| string Address
|
| int CompanyAddressId           // Foreign Key to Address Table
| virtual CompanyAddress address // Related Navigation Property
+--------------------------------------------------------------+ 
```

可以看出，Company 实体可以有多个 CompanyAddress。在我的 ASP.NET MVC 项目中，我也有 ViewModel。

```
+--------------------CompanyCreateViewModel----------------+
| Company company
| CompanyAddress address
+---------------------------------------------------------+ 
```

这两个属性在视图中填充并毫无问题地传递给控制器​​。我的问题从现在开始。我应该如何插入这两个实体？

假设我先插入 Company 实体，然后使用 select 语句获取其 primaryKey 并将此值分配给 CompanyAddress 的外键并插入它。但是，这对我来说没有意义，因为我需要再次请求主键。

我应该如何插入我的实体，最好的方法是什么？对不起，很长的问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:43:41.700

为 Company 调用 SaveChanges() 后，您便拥有该对象中的 PrimaryKey。将其分配给 CompanyAddress 的外键并再次调用 SaveChanges()。

# android - 实现 ComponentCallbacks 以监听 onConfigurationChanged

> ID：11275738
> 
> 赞同：2
> 
> 时间：2012-06-30T16:30:40.307
> 
> 标签：android, android-activity

android 中有[ComponentCallbacks 接口](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/content/ComponentCallbacks.java#ComponentCallbacks)，由活动、活动组、服务等使用。他们实现了它，当活动配置发生变化时**有人**通知他们。所以，我想创建我自己的类来实现 ComponentCallbacks 监听 onConfigurationChanged 并做一些动作......所以我的类正在实现，但是......我想我需要在**某人的**观察者中注册我的类。

那么，有可能吗？有什么方法可以“注册”我自己的课程，以便在配置更改时得到通知？

我猜这个人可能是ActivityThread，它的方法collectComponentCallbacksLocked。但是我在这里没有看到任何注册我自己的课程的方法。

[ActivityThread](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/app/ActivityThread.java#ActivityThread.collectComponentCallbacksLocked%28boolean,android.content.res.Configuration%29)和 [ComponentCallbacks 使用](http://www.kandroid.org/android_docs/android/content/class-use/ComponentCallbacks.html)

ps 当然我可以重写activity的方法onConfigurationChange change，然后调用我类的onConfigurationChanged方法，但是我不想要。我想知道android中是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T08:43:28.217

在“Google I/O 2012 - 事半功倍：成为一名优秀的 Android 公民”演讲（您可以在 youtube 上找到）中，解释说您可以通过调用`Context.registerComponentCallbacks`. 因此，您只需让您的类实现`ComponentCallbacks`接口（或`ComponentCallbacks2`按照您的意愿），自动添加您可以覆盖的方法，然后从您的 Activity、Fragment 中传递实例以注册到它。像这样的东西：

```
 registerComponentCallbacks( mYourClass ); 
```

那应该做的工作:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:52:49.450

根据@Sandra 的回答，我们可以使用 Context.registerComponentCallbacks 在系统中注册我们自己的组件回调，并像这样使用它：

```
context.registerComponentCallbacks(new ComponentCallbacks() {

            @Override
            public void onLowMemory() {
                // make some operations when system memory is low
            }

            @Override
            public void onConfigurationChanged(Configuration newConfig) {
                // make some operations when configuration has been changed
            }
        }); 
```

当系统配置更改/内存不足时，将调用我们所有注册的回调。

API 级别 14 中可用的方法[registerComponentCallbacks 。](http://developer.android.com/reference/android/content/Context.html#registerComponentCallbacks%28android.content.ComponentCallbacks%29)[在此处查看它的工作原理](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/Application.java#Application.registerComponentCallbacks%28android.content.ComponentCallbacks%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T12:16:55.113

你要做的是注册一个 BroadcastReceiver 来接收这个广播意图：

`Intent.ACTION_CONFIGURATION_CHANGED`

每当配置更改时，系统都会广播该事件。

# c# - 如果过程完成，我如何在此类中检测到？

> ID：11275741
> 
> 赞同：-2
> 
> 时间：2012-06-30T16:31:02.133
> 
> 标签：c#, directshow, directshow.net

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Runtime.InteropServices;
using DirectShowLib;
using System.Windows.Forms;
using System.Collections.Generic;

namespace Polkan.DataSource
{
    internal class WmvAdapter : ISampleGrabberCB, IDisposable
    {
        #region Fields
        //public Image img;
        private IFilterGraph2 _filterGraph;
        private IMediaControl _mediaCtrl;
        private IMediaEvent _mediaEvent;
        private int _width;
        private int _height;
        private readonly string _outFolder;
        private int _frameId;

        #endregion

        #region Constructors and Destructors

        public WmvAdapter(string file, string outFolder)
        {
            _outFolder = outFolder;
            try
            {
                SetupGraph(file);
            }
            catch
            {
                Dispose();
                MessageBox.Show("A codec is required to load this video file. Please use http://www.headbands.com/gspot/ or search the web for the correct codec");
                throw;
            }
        }

        ~WmvAdapter()
        {
            CloseInterfaces();
        }

        #endregion

        public void Dispose()
        {
            CloseInterfaces();
        }

        public void Start()
        {
            int hr = _mediaCtrl.Run();
            WaitUntilDone();
            DsError.ThrowExceptionForHR(hr);
        }

        public void WaitUntilDone()
        {
            int hr;
            const int eAbort = unchecked((int)0x80004004);

            do
            {

                System.Windows.Forms.Application.DoEvents();
                EventCode evCode;
                hr = _mediaEvent.WaitForCompletion(100, out evCode);
            } while 
                (hr == eAbort);

            DsError.ThrowExceptionForHR(hr);

        }

        /// <summary> build the capture graph for grabber. </summary>
        private void SetupGraph(string file)
        {
            ISampleGrabber sampGrabber = null;
            IBaseFilter capFilter = null;
            IBaseFilter nullrenderer = null;

            _filterGraph = (IFilterGraph2)new FilterGraph();
            _mediaCtrl = (IMediaControl)_filterGraph;
            _mediaEvent = (IMediaEvent)_filterGraph;

            var mediaFilt = (IMediaFilter)_filterGraph;

            try
            {
                // Add the video source
                int hr = _filterGraph.AddSourceFilter(file, "Ds.NET FileFilter", out capFilter);
                DsError.ThrowExceptionForHR(hr);

                // Get the SampleGrabber interface
                sampGrabber = new SampleGrabber() as ISampleGrabber;
                var baseGrabFlt = sampGrabber as IBaseFilter;

                ConfigureSampleGrabber(sampGrabber);

                // Add the frame grabber to the graph
                hr = _filterGraph.AddFilter(baseGrabFlt, "Ds.NET Grabber");
                DsError.ThrowExceptionForHR(hr);

                // ---------------------------------
                // Connect the file filter to the sample grabber

                // Hopefully this will be the video pin, we could check by reading it's mediatype
                IPin iPinOut = DsFindPin.ByDirection(capFilter, PinDirection.Output, 0);

                // Get the input pin from the sample grabber
                IPin iPinIn = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Input, 0);

                hr = _filterGraph.Connect(iPinOut, iPinIn);
                DsError.ThrowExceptionForHR(hr);

                // Add the null renderer to the graph
                nullrenderer = new NullRenderer() as IBaseFilter;
                hr = _filterGraph.AddFilter(nullrenderer, "Null renderer");
                DsError.ThrowExceptionForHR(hr);

                // ---------------------------------
                // Connect the sample grabber to the null renderer

                iPinOut = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Output, 0);
                iPinIn = DsFindPin.ByDirection(nullrenderer, PinDirection.Input, 0);

                hr = _filterGraph.Connect(iPinOut, iPinIn);
                DsError.ThrowExceptionForHR(hr);

                // Turn off the clock. This causes the frames to be sent
                // thru the graph as fast as possible
                hr = mediaFilt.SetSyncSource(null);
                DsError.ThrowExceptionForHR(hr);

                // Read and cache the image sizes
                SaveSizeInfo(sampGrabber);
            }
            finally
            {
                if (capFilter != null)
                {
                    Marshal.ReleaseComObject(capFilter);
                }
                if (sampGrabber != null)
                {
                    Marshal.ReleaseComObject(sampGrabber);
                }
                if (nullrenderer != null)
                {
                    Marshal.ReleaseComObject(nullrenderer);
                }
                GC.Collect();
            }
        }

        private void SaveSizeInfo(ISampleGrabber sampGrabber)
        {
            // Get the media type from the SampleGrabber
            var media = new AMMediaType();
            int hr = sampGrabber.GetConnectedMediaType(media);
            DsError.ThrowExceptionForHR(hr);

            if ((media.formatType != FormatType.VideoInfo) || (media.formatPtr == IntPtr.Zero))
            {
                throw new NotSupportedException("Unknown Grabber Media Format");
            }

            // Grab the size info
            var videoInfoHeader = (VideoInfoHeader)Marshal.PtrToStructure(media.formatPtr, typeof(VideoInfoHeader));
            _width = videoInfoHeader.BmiHeader.Width;
            _height = videoInfoHeader.BmiHeader.Height;

            DsUtils.FreeAMMediaType(media);
            GC.Collect();
        }

        private void ConfigureSampleGrabber(ISampleGrabber sampGrabber)
        {
            var media = new AMMediaType
            {
                majorType = MediaType.Video,
                subType = MediaSubType.RGB24,
                formatType = FormatType.VideoInfo
            };
            int hr = sampGrabber.SetMediaType(media);
            DsError.ThrowExceptionForHR(hr);

            DsUtils.FreeAMMediaType(media);
            GC.Collect();
            hr = sampGrabber.SetCallback(this, 1);
            DsError.ThrowExceptionForHR(hr);
        }

        private void CloseInterfaces()
        {
            try
            {
                if (_mediaCtrl != null)
                {
                    _mediaCtrl.Stop();
                    _mediaCtrl = null;
                }
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex);
            }

            if (_filterGraph != null)
            {
                Marshal.ReleaseComObject(_filterGraph);
                _filterGraph = null;
            }
            GC.Collect();
        }

        int ISampleGrabberCB.SampleCB(double sampleTime, IMediaSample pSample)
        {
            Marshal.ReleaseComObject(pSample);
            return 0;
        }

        //add a boolean property to indicate the save-mode
        public bool SaveToDisc { get; set; }
        //the list for the bitmaps
        public List<Bitmap> Images { get; set; }

        int ISampleGrabberCB.BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
        {
            using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
            {
                bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
                if (SaveToDisc)
                {
                    String tempFile = _outFolder + _frameId + ".bmp";
                    if (File.Exists(tempFile))
                    {

                    }
                    else
                    {
                        bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp"));

                    }
                    _frameId++;
                }
                else
                {
                    if (Images == null)
                        Images = new List<Bitmap>();
                    Images.Add((Bitmap)bitmap.Clone());
                }
            }
            return 0;
        }

    }
} 
```

该类正在从视频文件中提取帧到硬盘。

在我的情况下，例如硬盘上的 47 个文件。

在课程的底部，我正在保存到硬盘：

```
bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp")); 
```

在类的上面有一个名为：WaitUntillDone() 的函数，它对我有帮助。

我想要的是，当它完成将所有文件提取到硬盘时，它会给我一个 messagebox.show 或者只是标签上的一条消息，或者说“过程已经完成”

在 Form1 按钮单击事件中，我使用如下类：

```
wmv = new Polkan.DataSource.WmvAdapter(@"d:\VIDEO0040.3gp", sf);
            wmv.SaveToDisc = true;
            wmv.Start(); 
```

视频名称，sf是硬盘上解压的目录。

然后是真的，所以它会将它保存到硬盘而不是内存帧。

并开始。

我也可以在 Form1 中做按钮点击事件 wmv.WaitUntillDone(); 但完成后它不会抛出任何消息或东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:36:26.870

您需要使用事件来告诉您的 UI 组件该过程已完成：

```
public event EventHandler ProcessFinished; 
```

在您的方法内部，当它完成时让它引发事件：

```
if(ProcessFinished != null)
    ProcessFinished(this, EventArgs.Empty); 
```

最后，在调用进程的类中：

```
wmv = new Polkan.DataSource.WmvAdapter(@"d:\VIDEO0040.3gp", sf);
wmv.SaveToDisc = true;
wmv.ProcessFinished += OnProcessFinished;
wmv.Start(); 
```

OnProcessFinished 将类似于：

```
public void OnProcessFinished(object sender, EventArgs e){
    MessageBox.Show("done!");
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:40:00.677

您已经实现了自己的使用 DoEvents() 的 WaitUntil 方法。这是棘手的，很难做到正确。

将相关代码移动到[Backgoundworker](http://msdn.microsoft.com/en-us/library/cc221403%28v=VS.95%29.aspx)要简单得多。然后只需使用 Completed 事件来表示结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:23:56.453

`WaitUntilDone`循环让您的 UI 响应，直到整个文件播放完成，每个视频帧都会返回所有调用。您可以添加`MessageBox.Show`到`WaitUntilDone`.

为了避免这种循环而不将控制权交给外部消息循环，应用程序通常以不同的方式执行此操作。它们用于`IMediaEventEx.SetNotifyWindow`订阅过滤图形事件并在播放完成时收到窗口消息。也就是说，一旦文件的处理完成，您会收到一条消息发送给您，并且您的处理程序有机会做它必须做的事情。

对您来说，一个可能更简单的选择是不做任何事情`WaitUntilDone`，而是有一个计时器来轮询，例如每秒一次，`IMediaEvent.WaitForCompletion(0, ...`以查看处理是否完成。

# perl - Windows7安装Perl的Tk模块失败

> ID：11275743
> 
> 赞同：2
> 
> 时间：2012-06-30T16:31:05.473
> 
> 标签：perl, tk

起初，我尝试使用 ppm 和 cpanm 安装 Tk 模块。但是由于我不知道的原因（但我可以安装图像模块）下载失败。所以我尝试了另一种方法。我从下载 Tk-804.030 cpan网站。然后解压它。然后我在cmd中输入“perl makefile.pl”，但是，糟糕的事情发生了。有很多错误。我记得阅读README.txt，所以我发现了以下让我沮丧的。

*当您安装 ActivePerl 时，它会提供修补的 C 运行时作为**PerlCRT.dll** ，它安装在“system32”目录中。这需要 NT 上的“管理员”权限。它还提供了导入库**PerlCRT.lib**，但它安装在一个奇怪的位置，例如 C:\ActivePerl\lib\CORE\PerlCRT.lib，MakeMaker 或 VC++ 找不到它。我将它复制到 C:\VisualStudio\ VC98\lib\PerlCRT.lib（您的路径可能会有所不同，具体取决于您安装 ActivePerl 和 VC++ 的位置。）*

我在我的电脑上找不到 PerlCRT.dll 和 PerlCRT.lib，我用谷歌搜索并找到了可以下载的 PerlCRT.dll，但我可以找到 PerlCRT.lib 来下载。我不知道该怎么做，我真的需要一些帮助。如果你能告诉我整个安装过程，那就再好不过了。（我是 Perl 新手，我也使用 Win7、Visual Studio 2012 和 MinGW）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:33:59.190

请参阅[PPM Tk 信息页面](http://code.activestate.com/ppm/Tk/)，该发行版无法在当前版本的 ActiveState Perl for Windows 上构建。您可以添加[3rd 方 Bribes 存储库，那里提供 Tk](http://www.bribes.org/perl/ppmdir.html#Tk)。

# caching - CUDA：什么时候使用共享内存，什么时候依赖 L1 缓存？

> ID：11275744
> 
> 赞同：22
> 
> 时间：2012-06-30T16:31:18.047
> 
> 标签：caching, cuda, shared-memory

Compute Capability 2.0 (Fermi) 发布后，我想知道是否还有共享内存的用例。也就是说，什么时候使用共享内存比让 L1 在后台执行它的魔力更好？

共享内存是否只是为了让为 CC < 2.0 设计的算法无需修改即可高效运行？

为了通过共享内存进行协作，块中的线程写入共享内存并与`__syncthreads()`. 为什么不简单地写入全局内存（通过 L1），并与 同步`__threadfence_block()`？后一个选项应该更容易实现，因为它不必与值的两个不同位置相关，并且它应该更快，因为没有从全局内存到共享内存的显式复制。由于数据被缓存在 L1 中，线程不必等待数据真正到达全局内存。

使用共享内存，可以保证放置在那里的值在整个块的持续时间内保持在那里。这与 L1 中的值相反，如果不经常使用它们就会被驱逐。在任何情况下，将这些很少使用的数据缓存在共享内存中比让 L1 根据算法实际具有的使用模式来管理它们更好吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T23:21:47.360

自动缓存效率低于手动暂存器内存的两大原因（也适用于 CPU）

1.  对随机地址的并行访问效率更高。示例：直方图。假设您要增加 N 个 bin，每个 bin 相隔 > 256 个字节。然后由于合并规则，这将导致 N 串行读/写，因为全局和高速缓存存储在大约 256 字节的大块中。共享内存没有这个问题。

同样要访问全局内存，您必须进行虚拟到物理地址的转换。拥有可以在 || 中进行大量翻译的 TLB 会很贵。我还没有看到任何在 || 中实际执行矢量加载/存储的 SIMD 架构。我相信这就是原因。

2.  避免将死值写回内存，这会浪费带宽和功率。示例：在图像处理管道中，您不希望中间图像被刷新到内存中。

此外，根据[NVIDIA 员工](https://devtalk.nvidia.com/default/topic/520945/cache-data-invalidation-between-kernel-calls/)的说法，当前的 L1 缓存是直写的（立即写入 L2 缓存），这会降低您的程序速度。

所以基本上，如果你真的想要性能，缓存会妨碍你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T03:11:54.827

据我所知，GPU 中的 L1 缓存的行为与 CPU 中的缓存非常相似。因此，您的评论“这与 L1 中的值相反，如果它们不经常使用就会被驱逐”对我来说没有多大意义

L1 缓存上的数据在使用不够频繁时不会被驱逐。通常，当对以前不在缓存中的内存区域发出请求时，它会被驱逐，并且其地址解析为已在使用的内存区域。我不知道 NVidia 使用的确切缓存算法，但假设一个常规的 n 路关联，那么每个内存条目只能缓存在整个缓存的一小部分中，基于它的地址

我想这也可以回答你的问题。使用共享内存，您可以完全控制存储内容的位置，而使用缓存，一切都会自动完成。尽管编译器和 GPU 在优化内存访问方面仍然非常聪明，但有时您仍然可以找到更好的方法，因为您知道将给出什么输入，以及哪些线程将执行什么操作（在一定程度上当然程度）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T12:08:41.787

通过多个内存层缓存数据始终需要遵循缓存一致性协议。有几种这样的协议，决定哪一个最合适总是权衡取舍。

你可以看看一些例子：

[与 GPU 相关](https://www.researchgate.net/publication/261049352_Cache_Coherence_for_GPU_Architectures)

[一般用于计算单元](https://ieeexplore.ieee.org/document/8324309)

我不想详细说明，因为这是一个巨大的领域，我不是专家。我想指出的是，在共享内存系统中（这里的术语*共享*不是指所谓的 GPU 共享内存），其中许多计算单元（CU）同时需要数据，有一个内存协议试图将数据保持在单元附近，以便尽可能快地获取它们。在 GPU 的示例中，当同一个 SM（对称多处理器）中的许多线程访问相同的数据时，应该存在一致性，即如果线程 1 从全局内存中读取一个字节块，并且在下一个周期中线程 2 是如果要访问这些数据，那么一个有效的实现将是线程 2 知道数据已经在 L1 缓存中找到并且可以快速访问它。这就是缓存一致性协议试图实现的目标，让所有计算单元与缓存 L1、L2 等中存在的数据保持同步。

但是，使线程保持最新，或者使线程保持一致状态，需要付出一些代价，这基本上是缺少周期。

在 CUDA 中，通过将内存定义为共享而不是 L1 缓存，您可以将其从一致性协议中释放出来。因此，访问该内存（物理上与任何材料相同）是直接的，并且不会隐式调用一致性协议的功能。

我不知道这应该有多快，我没有执行任何此类基准测试，但我的想法是，由于您不再为此协议付费，因此访问应该更快！

*当然，英伟达 GPU 上的共享内存被拆分为银行，如果有人想用它来提高性能，应该先看看这个。原因是当两个线程访问同一个银行时发生**银行冲突**，这会导致访问序列化......，但这是另一回事* [链接](https://stackoverflow.com/questions/3841877/what-is-a-bank-conflict-doing-cuda-opencl-programming)

# ruby-on-rails - Rails：将函数应用于表中的每条记录？

> ID：11275748
> 
> 赞同：0
> 
> 时间：2012-06-30T16:32:21.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, orm, ruby-on-rails-3.1

我在 Rails 中有一个表，我想查找某个函数返回 true 的表的所有记录。

做这个的最好方式是什么？我当然可以遍历表中的所有记录并使用条件语句来测试给定单个记录的函数是否返回 true 并将其添加到列表中。

有没有更简单的方法可以按照 Model.find(:all, :conditions => {...}) 的方式来做这件事？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:44:53.390

```
Class MyModel < ActiveRecord
    def self.targetted
       find_each.select(&:predicate_method?)
    end

    def predicate_method?
        #something that returns either true or false
    end
end 
```

这更像是 Rails 惯用语：

*   find_each 将分批获取您的记录 1000\. 它比所有的记忆都好
*   &:predicate_method ：将符号转换为 Proc（使用 # 运算符）实际上会使您的代码在每个传递的对象上调用该方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:17:17.827

```
def record_that_returns_true_for_xfunction
  Model.all.select {|record| xfunction(record.some_column) == true}
end 
```

这似乎是您正在寻找的东西。此方法将返回包含所有记录的数组`xfunction(record.some_column) == true`。

# jquery - sammy.js 路由在调用 ajax 时生成循环？

> ID：11275750
> 
> 赞同：1
> 
> 时间：2012-06-30T16:32:40.587
> 
> 标签：jquery, sammy.js

我有以下 sammy.js 应用程序，它应该根据当前 url 获得一个静态页面。

```
$(document).ready(function() {
var app = $.sammy('div.container', function() {

        this.get(/#\/(.*)/, function(context) {
            $.ajax({
                url: '/foo/' + this.params['splat'],
                success: function(c) {
                    $('div.wrapper').html(c);
                }
            });
        });
    });
}); 
```

它实际上可以工作，并将调用的 url 的内容加载到 div.wrapper 元素中。但不是在加载之后停止 ajax 调用，而是继续运行 sammy.js runRoute 方法。这是控制台日志：

```
[Sat Jun 30 2012 18:29:40 GMT+0200 (CEST)] div.wrapper runRoute get /#/bar/foo/
[Sat Jun 30 2012 18:29:42 GMT+0200 (CEST)] div.wrapper runRoute get /#/bar/foo/
[Sat Jun 30 2012 18:29:44 GMT+0200 (CEST)] div.wrapper runRoute get /#/bar/foo/ 
```

对此有何建议？谢谢！

# android - 加载布局时出现异常：java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;

> ID：11275754
> 
> 赞同：31
> 
> 时间：2012-06-30T16:33:34.253
> 
> 标签：android, android-layout

尝试在图形编辑视图中加载特定布局文件时出现以下异常。这在我下载了最新版本之后就开始`ADT (Version 20)`了`SDK API Level 16`：

```
java.lang.NoSuchMethodError: java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;
at android.util.LruCache.trimToSize(LruCache.java:206)
at android.util.LruCache.evictAll(LruCache.java:306)
at android.widget.SpellChecker.resetSession(SpellChecker.java:141)
at android.widget.SpellChecker.setLocale(SpellChecker.java:147)
at android.widget.SpellChecker.<init>(SpellChecker.java:112)
at android.widget.Editor.updateSpellCheckSpans(Editor.java:461)
at android.widget.Editor.onAttachedToWindow(Editor.java:212)
at android.widget.TextView.onAttachedToWindow(TextView.java:4455)
at android.widget.AutoCompleteTextView.onAttachedToWindow(AutoCompleteTextView.java:1001)
at android.view.View.dispatchAttachedToWindow(View.java:11755)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.AttachInfo_Accessor.setAttachInfo(AttachInfo_Accessor.java:37)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:329)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ConfigListener.onThemeChange(GraphicalEditorPart.java:735)
at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationComposite.onThemeChange(ConfigurationComposite.java:2901)
at com.android.ide.eclipse.adt.internal.editors.layout.configuration.SelectThemeAction.run(SelectThemeAction.java:47)
at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3974)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3613)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

**更新：**

我的工作是在设计模式下切换到 api 级别 15（有一个带有 android 图标和 api 级别的下拉菜单）。然后我没有看到这个异常。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-30T18:37:10.983

我遇到了同样的问题（这里对 Android 很陌生，所以请耐心等待）。我在 StackTrace 中看到它说错误来自 ...SpellChecker。所以我想也许如果我在我的编辑字段上禁用拼写检查，我可以解决这个错误，直到更新 Eclipse 工具。

按照此处的说明操作：[Android Ice Cream Sandwich Edittext: Disabling Spell Check and Word Wrap](https://stackoverflow.com/questions/9011944/android-ice-cream-sandwich-edittext-disabling-spell-check-and-word-wrap) I added

```
 android:inputType="textNoSuggestions" 
```

这为我解决了这个问题。

# javascript - 我如何评估参数中的条件javascript

> ID：11275757
> 
> 赞同：0
> 
> 时间：2012-06-30T16:34:12.817
> 
> 标签：javascript, jquery, html, function

我试图调用一个方法，该方法将根据他们是否已经收藏它从给定的跨度中添加或减去 1（基本上他们喜欢/不喜欢一个资源，一个小计数器说“8 个人收藏了这个”将被更新）

我想把它写在语句中，而不是在函数之前写各种 if 语句，我认为可能有一种更聪明的方法来做到这一点。

这段代码显然不起作用，但它应该给你我想说的要点

```
updateFavoritesSpan( this, if ($(this).hasClass('starred')) 1 ); 
```

宣言：

```
function updateFavoritesSpan(element, isFavorite) {
    $(element);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:35:45.353

试试这个：

```
updateFavoritesSpan( this, $(this).hasClass('starred') ); 
```

**[`.hasClass()`](http://api.jquery.com/hasClass)**总是返回布尔值，如果找到则`true`else `false`。

还有一个叫做**[`.is()`](http://api.jquery.com/is)**，它会像这样使用：

```
updateFavoritesSpan( this, $(this).is('.starred') ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:35:55.430

试试这个，hasClass 返回布尔值，所以你可以直接传递它

```
updateFavoritesSpan( this, $(this).hasClass('starred')); 
```

# android - 将 Java 库 JAR 导入 Eclipse

> ID：11275760
> 
> 赞同：0
> 
> 时间：2012-06-30T16:34:37.333
> 
> 标签：android, eclipse, import, jar

我目前正在尝试实现一个带有流水线功能的浏览器。问题是为了对 HTTP 管道进行编码，我需要一个库的支持。我尝试使用 Project -> properties -> Java build path -> addJar 将其导入我的工作区。我能够成功添加它。但现在我的问题是，即使它被添加到我的工作区，它也不允许我运行这段代码。它给了我错误，就好像我没有导入库一样：

```
package com.test.download;
import java.util.Collections;
import org.factor45.*;
    public class Example {

        // Execute the request
        HttpRequestFuture<String> future = client.execute("hotpotato.factor45.org", 80, request,
                                                          new BodyAsStringProcessor());
        future.addListener(new HttpRequestFutureListener<String>() {
            @Override
            public void operationComplete(HttpRequestFuture<String> future) throws Exception {
                System.out.println(future);
                if (future.isSuccessfulResponse()) {
                    System.out.println(future.getProcessedResult());
                }
                client.terminate();
            }
        });
    } 
```

这可在为我提供上述代码库的同一网站上找到。[“这里”](http://www.zetascope.com/url/a50314975d8d1e792b6e447a8c49fed9/content)是供您参考的网站。您也可以在此网站内找到 JAR 文件。

请帮我找出问题所在。如果你解决了这个问题，你就是一个救生员！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:04:00.863

尝试这个：

Properties >> Java Build Path >> Libraries >> Add External JARs... 然后选择库

# gwt - Intellij Idea 12 GWT 应用程序部署到战争

> ID：11275761
> 
> 赞同：5
> 
> 时间：2012-06-30T16:34:47.320
> 
> 标签：gwt, deployment, intellij-idea, war

如何使用 Intellij Idea 12 将我的 GWT 应用程序部署到 war 文件？我找不到任何适合我的 IDE 的插件或选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:09:26.493

检查[配置工件](https://www.jetbrains.com/help/idea/artifacts.html)帮助部分。

# c++ - C++ 网络爬虫

> ID：11275765
> 
> 赞同：0
> 
> 时间：2012-06-30T16:35:08.473
> 
> 标签：c++, sockets, ssh, web-crawler

我正在试验并尝试制作一个最小的网络爬虫。我非常了解整个过程。那么进入下一层细节，程序如何“连接”到不同的网站以提取 HTML？

我是否使用套接字连接到服务器并发送 http 请求？我是否向终端发出命令以运行 telnet 或 ssh？

另外，C++ 是网络爬虫的好语言吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:45:11.107

> 另外，C++ 是网络爬虫的好语言吗？

依靠。你在 C++ 方面有多好。
C++ 是一种编写高级高速爬虫的好语言，因为它的速度（并且您需要它来处理 HTML 页面）。但它不是编写爬虫的最简单的语言，所以如果你正在试验，它可能不是一个好的选择。

根据您的问题，您没有编写高级爬虫的经验，因此可能正在寻找构建一个简单的串行爬虫。因为这个速度不是优先考虑的，因为瓶颈是通过网络下载页面（而不是页面的处理）。所以我会选择另一种语言（也许是python）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:48:59.393

如果您打算坚持使用 C++，那么您应该考虑使用[libcurl](http://curl.haxx.se/libcurl/)库，而不是使用套接字从头开始实现 HTTP 协议。该库有可用的[C++ 绑定。](http://code.google.com/p/curlpp/)

来自 curl 的网页：

> libcurl 是一个免费且易于使用的客户端 URL 传输库，支持 DICT、FILE、FTP、FTPS、Gopher、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、 SFTP、SMTP、SMTPS、Telnet 和 TFTP。libcurl 支持 SSL 证书、HTTP POST、HTTP PUT、FTP 上传、基于 HTTP 表单的上传、代理、cookie、用户+密码身份验证（Basic、Digest、NTLM、Negotiate、Kerberos）、文件传输恢复、http 代理隧道等等！
> 
> libcurl 是高度可移植的，它可以在多种平台上构建和工作，包括 Solaris、NetBSD、FreeBSD、OpenBSD、Darwin、HPUX、IRIX、AIX、Tru64、Linux、UnixWare、HURD、Windows、Amiga、OS/2、BeOs、Mac OS X、Ultrix、QNX、OpenVMS、RISC OS、Novell NetWare、DOS 等...
> 
> libcurl 是免费的、线程安全的、与 IPv6 兼容、功能丰富、支持良好、速度快、文档完整，并且已被许多知名、成功的大公司和众多应用程序使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:54:01.740

简短的回答，不。我更喜欢用 C++ 编写代码，但这个实例需要 Java 应用程序。该 API 有许多 html 解析器以及内置的套接字协议。这个项目在 C++ 中会很痛苦。我曾经在 java 中编写过一个代码，感觉有点幸福。

顺便说一句，那里有很多网络爬虫，但我假设您有自定义需求:-)

# c++ - 调用 iostringstream::write 时出错

> ID：11275770
> 
> 赞同：0
> 
> 时间：2012-06-30T16:35:50.820
> 
> 标签：c++, iostream, std

在[这个网站上](http://www.cplusplus.com/reference/iostream/ostream/write/)，该`iostringstream::write`功能的描述说：

> 如果出现错误，将设置 badbit 标志

这些错误可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:18:56.537

写入字符串流时的明显错误是底层字符串缓冲区未能分配内存来保存正在写入的数据。但是，还要注意，您提供的链接是 to `ostream::write`，这可能由于其他原因而失败（例如，写入已关闭的管道或已满的磁盘上的文件和/或写入将超出用户允许的范围）。

除了＃1：没有这样的东西`iostringstream`- 有`istringstream`and `ostringstream`。两者结合的就是`stringstream`.

除了#2：cplusplus.com 并不是特别受尊重。其他一些网站（例如，cppreference.com）似乎更可靠/更准确，至少作为一般规则（尽管我觉得有义务指出我自己并没有使用上述任何东西，所以我对它们的评论不接近最后一个词）。

# c++ - 通过引用字符二维调用字符串不起作用

> ID：11275771
> 
> 赞同：0
> 
> 时间：2012-06-30T16:35:53.097
> 
> 标签：c++, pass-by-reference

我无法通过引用传递我的字符串，不在这里我使用 char 二维，我可以使用字符串，但我想用 char 数组来做，在 swap1 函数中交换字符串，在 swap 2 函数交换整数发生。字符串交换不起作用。谢谢你的帮助 。任何学习这一点的好链接将不胜感激。

```
void func(int *x,char (*y)[500]);
void swap2(int &x, int &y);
 void swap1(char *a,char *b);
 int main(void){
    char str[4][500];
    int a[4];
    int i,j;
    for(i=0;i<4;i++){       
        cin>>a[i];
        cin>>str[i] ;
    }
    for(i=0;i<4;i++){
        for(j=3;j>0;j--){
            if(a[j]<a[j-1]){
                swap2(a[j],a[j-1]);
                swap1(str[j],str[j-1]);
            }
        }
    }
    return 0;
}

void swap1(char *a,char *b){
    char *temp = a;
    b = a;
    a = temp;
}
void swap2(int &x, int &y){
    int temp = x;
    x = y;
    y = temp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T16:38:44.773

您不会像整数交换那样编写指针交换。在你的整数交换中，你正确地使用了引用，但你没有为你的字符指针。缺少的`&`结果导致`swap1`, 因为`str[j]`和`str[j-1]`将在调用完成后保留其原始值。

```
void swap1(char *&a,char *&b);
//...
void swap1(char *&a,char *&b){
    char *temp = a;
    b = a;
    a = temp;
} 
```

但是，`str`不是指针数组，而是数组数组。为了使您的代码正常工作，您应该更改`str`为指针数组。

```
char *str[4] = { new char[500], new char[500], new char[500], new char[500] };
//...
delete[] str[0];
delete[] str[1];
delete[] str[2];
delete[] str[3]; 
```

但这很麻烦，如果你只是改变你的代码来`std::string`代替，你会为自己省去很多麻烦。然后你可以使用该`swap`方法。

```
void swap1(std::string &a, std::string &b);
//...
std::string str[4];
//...
void swap1(std::string &a, std::string &b) {
    a.swap(b);
} 
```

# php - PHP爬虫：检查对象是否存在

> ID：11275772
> 
> 赞同：0
> 
> 时间：2012-06-30T16:35:54.947
> 
> 标签：php, dom, web-crawler

我在寻找某些类/元素的页面上运行 php 脚本，如果类/元素不存在，我有时可能会收到**“尝试获取非对象的属性”错误。**

我想知道如何处理这个错误，以便我可以将自己的 null 值分配给变量作为 using`if`语句，或者`is_null`似乎没有解决问题。

查看下面的代码，以更好地理解我的意思。

`if($size = $elem->find('.size',0)->plaintext)`由于类大小不存在，在线上会为“历史”元素抛出错误。

**功能：获取信息**

```
function getInfo($link){
   $page = file_get_html($link);        

   if($page){       
      $categoryLink = array();
      $categoryName = array();
      $categorySize = array();

      if($container = $page->find('.infoContainer',1)){

         foreach($container->find('.element') as $elem){

            if($link = $elem->find('a',0)->href){   
               $categoryLink[] = $link;
            }else{
               $categoryLink[] = "";
            }

            if($name = $elem->find('.name',0)->plaintext){
               $categoryName[] = $name;
            }else{
               $categoryName[] = "";
            }

            if($size = $elem->find('.size',0)->plaintext){
               $categorySize[] = $size;
            }else{
               $categorySize[] = 0;
            }
         }
      }
   }
} 
```

**www.example.com**

```
<div class='infoContainer'>
   <div class='element'>
      <a href='www.example.com/physics'>
      <div class='name'>physics</div>
      <div class='size'>1000</div>
   </div>
   <div class='element'>
      <a href='www.example.com/math'>
      <div class='name'>math</div>
      <div class='size'>800</div>
   </div>
   <div class='element'>
      <a href='www.example.com/history'>
      <div class='name'>history</div>
   </div>

</div> 
```

**调用函数**

```
getInfo("www.example.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:38:50.233

`find`在尝试访问其属性之前，您应该首先检查结果：

```
$result = $elem->find('foo', 0);
if ($result) {
    $something = $result->property;
} 
```

这适用于 中的所有 3 个检查`foreach`，仅具有不同的参数名称等。

# iphone - 如何创建openstreetmap离线ios地图

> ID：11275774
> 
> 赞同：1
> 
> 时间：2012-06-30T16:36:02.847
> 
> 标签：iphone, ios, mapping

任何人有关于如何使用openstreetmaps或类似的东西创建特定区域的离线地图应用程序的任何好的教程或建议吗？这个话题很难找到关于 t 的任何信息，我希望这里的人可能有一个想法或曾经尝试过。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T00:22:44.813

不确定这是否正是您要寻找的，但请查看具有离线地图支持的[MapBox 。](http://mapbox.com/mobile/)

# android - 每个状态的 EditText 可绘制背景

> ID：11275779
> 
> 赞同：1
> 
> 时间：2012-06-30T16:36:39.420
> 
> 标签：android

我想自定义我的背景。所以我在选择器中为每个状态设计形状。但第一项执行。

这是我的代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:color="@android:color/black" >
        <shape android:shape="rectangle" >
            <solid android:color="#FFFFFF" />
            <stroke
                android:width="1dp"
                android:color="#000000" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
            <corners android:radius="10dp" />
        </shape>
    </item>
    <item android:state_pressed="true" android:color="@android:color/black" >
        <shape android:shape="rectangle" >
            <solid android:color="#8faefd" />
            <stroke
                android:width="3dp"
                android:color="#000000" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
            <corners android:radius="10dp" />
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:40:44.883

[州名单](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

> 在每次状态更改期间，从上到下遍历状态列表并使用与当前状态匹配的第一项——选择不是基于“最佳匹配”，而只是满足状态最低标准的第一项.

所以你必须交换这两个项目。应该是这样

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:color="@android:color/black" >
        <shape android:shape="rectangle" >
            <solid android:color="#8faefd" />
            <stroke
                android:width="3dp"
                android:color="#000000" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
            <corners android:radius="10dp" />
        </shape>
    </item>
    <item android:color="@android:color/black" >
        <shape android:shape="rectangle" >
            <solid android:color="#FFFFFF" />
            <stroke
                android:width="1dp"
                android:color="#000000" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
            <corners android:radius="10dp" />
        </shape>
    </item>
</selector> 
```

# ios - UIButton 在以编程方式创建并添加到 uiimageview 时无响应

> ID：11275780
> 
> 赞同：0
> 
> 时间：2012-06-30T16:36:53.433
> 
> 标签：ios, uiview, uibutton

我的 viewDidLoad 方法中有以下代码。这是一个带有滚动视图和页面控制器的 uiviewcontroller。

我有以下代码，它从数组创建视图在第 3 页上放置了一个按钮：

```
 for (int i = 0; i < imageNames.count; i++) {
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * i;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;

UIView *subview = [[UIView alloc] initWithFrame:frame];

UIImageView *myImageView =[[UIImageView alloc] initWithFrame:CGRectMake(0.0,0.0,self.view.frame.size.width,self.view.frame.size.height)];

myImageView.image=[UIImage imageNamed:[imageNames objectAtIndex:i]];

[subview addSubview: myImageView];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[button addTarget:self 
           action:@selector(doSomething:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];

if(i == 1){
[myImageView addSubview:button];
}
[self.scrollView addSubview:subview]; 
```

}

我有一个 ibaction 将关闭这个视图，因为它是模态视图： -(IBAction)doSomething:(id)sender{ [self dismissModalViewControllerAnimated:YES]; }

问题是这个按钮没有响应。它甚至不会在触摸时突出显示，更不用说调用 doSomething 方法了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:41:10.280

请注意*确定*这是否是问题，但可能。

从[UIImageView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)文档：

> 新的图像视图对象默认配置为忽略用户事件。如果要在 UIImageView 的自定义子类中处理事件，则必须在初始化对象后将 userInteractionEnabled 属性的值显式更改为 YES。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T13:08:47.787

为将来的搜索者的利益而发布...

如果启用的`userInteractionEnabled`属性`UIImageView`不起作用，另一件要查看的是 UIButton 的视图是否在其父视图的框架之外。

当对象的视图超出其父视图的框架时，它会出现在用户面前，但无法接收触摸事件。

# wcf - SDK 数据库对象的 WCF Web 服务和 DynamoDB 扩展/性能问题

> ID：11275781
> 
> 赞同：0
> 
> 时间：2012-06-30T16:36:55.743
> 
> 标签：wcf, scaling, amazon-dynamodb

我是创建 .NET RESTful Web 服务的新手，需要掌握性能和扩展以下方面的最佳实践。

我正在使用 C# 中的 .NET SDK 包装器连接到 Amazon AWS DynamoDB。我的代码创建了一个对象，该对象存储与 DynamoDB 交互所需的凭据。我担心的是每次调用都会实例化这个调用。凭据存储在我的 profiles.settings 集合中，并且永远不会更改。

我想知道是否有更好的方法来获取这些值并创建一次对象并以某种方式持久化它。我不知道每次创建或寻找适用于 WCF Web 服务的某种类型的应用程序缓存模拟/替代方案对性能和可伸缩性是否更好。

我也不知道静态物体是否会在这里发挥作用，或者我是否应该避开它们。

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:10:21.007

考虑到这些凭据存储在您的配置文件中并且正如您所提到的，它们不会更改，您可以使用静态对象来保存您的凭据。与 WCF REST 方面相关，您可以通过使用来自 Microsoft 的新 REST“框架”WebAPI 来简化您的生活。WCF 在 REST 方面有点笨拙。

# php - JS函数只能调用一种方法

> ID：11275782
> 
> 赞同：1
> 
> 时间：2012-06-30T16:36:57.600
> 
> 标签：php, javascript, jquery, asynchronous

我编写了一个 js 函数，它通过 php 查询异步联系服务器到一个看起来像这样的表：

```
function grabber(url, element)
{
    async = new XMLHttpRequest();
    async.onreadystatechange=function()
    {
        if (async.readyState==4 && async.status==200)
        {
            document.getElementById(element).innerHTML=async.responseText;
        }
    }
    async.open("GET", url, true);
    async.send();
} 
```

然后，我有另一个函数，当一个元素的事件处理程序被触发时，它使用不同的参数调用这个函数两次，以获取两个当前空元素的两个数据流。让我感到困惑的是，他们两个不能同时工作。当它们是函数中唯一的方法时，它们都起作用，但是当它们一起使用时，它们中只有一个起作用。顺序无所谓。

```
$('.box').keyup(function() {
    grabber("herp.php?q=" + $(this).val(), "rice");
    //grabber("derp.php?q=" + $(this).val(), "gohan");
}); 
```

无论位置如何，derp 似乎都具有优先权，而 herp 仅在 derp 被注释掉时才有效。php 文件只输出常规的 html 元素并且单独工作正常。关于如何让这些同时工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:45:07.460

当您需要创建局部变量时，您正在创建全局变量：

```
async = new XMLHttpRequest(); // creates this.async, which probably means
                              // window.async 
```

这样做的效果是，当`grabber`多次调用 时，每次调用都会`async`用新请求覆盖之前的值。这反过来意味着当你的每个回调最终执行时，它使用最后一个值的结果`async`-- 这导致所有目标元素得到相同的`innerHtml`.

要更正问题，请`var`在前面添加：

```
var async = new XMLHttpRequest(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:45:13.667

您忘记使用以下命令声明“异步”变量`var`：

```
var async = new XMLHttpRequest(); 
```

没有`var`关键字，它是一个全局变量。因此，连续的调用会覆盖前一个调用。

# python - 如何编写正则表达式来替换单词但在 Python 中保持大小写？

> ID：11275786
> 
> 赞同：6
> 
> 时间：2012-06-30T16:37:21.497
> 
> 标签：python, regex

这甚至可能吗？

基本上，我想将这两个调用 sub 变成一个调用：

```
re.sub(r'\bAword\b', 'Bword', mystring)
re.sub(r'\baword\b', 'bword', mystring) 
```

我真正想要的是某种条件替换符号，例如：

```
re.sub(r'\b([Aa])word\b', '(?1=A:B,a:b)word') 
```

我只关心第一个字符的大小写。其他都没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T16:48:56.717

您可以使用函数来解析每个匹配项：

```
>>> def f(match):
        return chr(ord(match.group(0)[0]) + 1) + match.group(0)[1:]

>>> re.sub(r'\b[aA]word\b', f, 'aword Aword')
'bword Bword' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T16:49:18.860

好的，这是我想出的解决方案，感谢使用替换功能的建议。

```
re.sub(r'\b[Aa]word\b', lambda x: ('B' if x.group()[0].isupper() else 'b') + 'word', 'Aword  aword.') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T16:48:58.900

您可以传递一个使用 Match 对象作为参数的 lambda 函数作为替换函数：

```
import re
re.sub(r'\baword\b', 
       lambda m: m.group(0)[0].lower() == m.group(0)[0] and 'bword' or 'Bword',
       'Aword aword', 
       flags=re.I)
# returns: 'Bword bword' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-24T21:44:56.210

使用捕获组 ( `r'\1'`)：

```
 re.sub(r'\b([Aa])word\b', r'\1word', "hello Aword") 
```

# iphone - 在 Objective-C 位置插入字符串

> ID：11275788
> 
> 赞同：1
> 
> 时间：2012-06-30T16:37:50.467
> 
> 标签：iphone, objective-c, nsstring

我正在制作一个应用程序，其中包含“热键”，当您点击热键时，它应该在您输入的位置插入一个字符。我正在使用`UITextView`带有编辑功能。

![在此处输入图像描述](../Images/05b5a813cfb59a24b0adf716429d1f12.png)

我想要做的是在蓝色光标*之后插入文本。*
这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:46:26.457

您想使用 的`insertText:`方法`UITextView`，该方法在其`UIKeyInput`协议的实现中声明（它是 的超协议`UITextInput`，它`UITextView`实现了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:54:04.250

您可以通过使用获取光标的位置

```
int position = txtView.selectedRange.location; 
```

然后你需要从文本视图中获取字符串并插入你自己的字符串

```
NSMutableString *str = [txtView.text mutableCopy];
[str insertString:@"YourString" atIndex:position];
txtView.text = str; 
```

这可能会滚动文本视图并丢失当前光标，如果您不想丢失它，则需要继承 UITextView 并在 drawRect 内做一些工作

# javascript - 骨干共享集合

> ID：11275790
> 
> 赞同：3
> 
> 时间：2012-06-30T16:38:19.393
> 
> 标签：javascript, jquery, backbone.js

我从 Backbone 开始，最近偶然发现了一个问题。我正在处理的示例应用程序是某种播放列表。我有一个模型“歌曲”和一个集合“播放列表”，其中包含几首歌曲。

播放列表集合的数据应该在多个视图中可用。所以我的想法是拥有全局应用程序变量，其中一个变量可能是播放列表集合。

这样，我可以通过应用程序的初始化来获取歌曲，并在应用程序的每个视图中访问数据。

**以下是我目前正在做的事情**

```
 define(
        [
            'jQuery',
            'Underscore',
            'Backbone',
            'collections/songlist'
        ],

        function ($, _, Backbone, SonglistCollection)
        {
            var PlaylistView = Backbone.View.extend({

                // properties
                el: '#playlist',
                collection: new SonglistCollection(),

                /**
                 * Initialize
                 */
                initialize: function()
                {
                    // load songs
                    this.collection.on( 'reset' , this.render, this );
                    this.collection.fetch();
                },

                /**
                * Render
                */
                render: function()
                {
                    // loop through the collection and update the view
                },

                ...
            );
        }
); 
```

**这是我的收藏**

```
define(
    [
        'Underscore',
        'Backbone',
        'models/song'
    ],

    function (_, Backbone, songModel)
    {

        var songList = Backbone.Collection.extend({

            model: songModel,
            url: 'song'
        });

        return songList;
    }
); 
```

如您所见，我必须创建一个新的集合实例，并为每个要使用播放列表集合数据的视图重新获取数据。

因为我使用的是require.js，所以我对如何创建全局变量有点迷茫。我喜欢这样做的方式是例如。制作 MyApp.collections.Playlist，但我不知道如何使用 AMD（require.js）实现这一点。

我已经找到了一些资源，但我仍然迷路/困惑/ ...

*   [在不同的 AMD 模块之间共享资源](https://stackoverflow.com/questions/8842223/share-resources-across-different-amd-modules)
*   [http://www.alexrothenberg.com/2011/02/11/backbone.js-makes-building-javascript-applications-fun.html](http://www.alexrothenberg.com/2011/02/11/backbone.js-makes-building-javascript-applications-fun.html)

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:05:54.200

如果您有文件`namespace.js`：（在您的情况下为 myapp.js）

```
define([
  // Libraries.
  "jquery",
  "lodash",
  "backbone",

  // Plugins.
  "plugins/backbone.layoutmanager"
],

function($, _, Backbone) {

  // Provide a global location to place configuration settings
  var namespace;

  // ...
  return namespace;
}); 
```

然后在您的模块/集合中，只需导入该文件，就像您对其他库所做的那样：

```
define([
  "namespace",

  // Libs
  "backbone"
],

function(namespace, Backbone) {

  // This will fetch the tutorial template and render it.
  var Playlist = namespace.collections.Playlist = Backbone.View.extend({
          //...
  });

  // Required, return the module for AMD compliance
  return Playlist;

}); 
```

同样的方式，你可以定义一个路由器。然后在一个单独的`main.js`文件中，是应用程序初始化的地方（使用 require() 而不是 define() ）

信用：这种构建应用程序的方式我在 tbranyen BB 样板中找到了它： [https ://github.com/tbranyen/backbone-boilerplate/tree/master/app/tree](https://github.com/tbranyen/backbone-boilerplate/tree/master/app/tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:50:08.563

为什么不在启动应用程序的同一个文件中定义全局集合？

# java - 与地图相关的java程序中的错误

> ID：11275791
> 
> 赞同：3
> 
> 时间：2012-06-30T16:38:42.933
> 
> 标签：java, collections, map

我开发了一个应用程序，用户在其中选择特定文件夹，它计算该文件夹中的所有 java 文件以及这些文件中单独的代码行并显示在控制台中，但是在 java 项目中，有很多包，现在我有导航到一个特定的包，我想修改应用程序，当用户选择特定项目时，他将进一步导航到仅 src 文件夹，并且从 src 文件夹中所有包含 java 文件行的包都将被计算在内.

```
public class abc {

    /**
     * @param args
     * @throws FileNotFoundException
     */
    private static int totalLineCount = 0;
    private static int totalFileScannedCount = 0;

    public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            Map<String, Integer> result = new HashMap<String, Integer>();
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());

            List<File> files = getFileListing(directory);

            //print out all file names, in the the order of File.compareTo()
            for (File file : files) {
                System.out.println("Directory: "+file);
                result = getFileLineCount(file);
                totalFileScannedCount +=  result.size();
            }

            System.out.println("*****************************************");
            System.out.println("FILE NAME FOLLOWED BY LOC");
            System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet()) {
                System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
            System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);

        }

    }

    public static Map<String, Integer> getFileLineCount(File directory) throws FileNotFoundException {
        Map<String, Integer> result = new HashMap<String, Integer>();

        File[] files = directory.listFiles(new FilenameFilter() {

            @Override
            public boolean accept(File directory, String name) {
                if (name.endsWith(".java")) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++);
                } catch (NoSuchElementException e) {
                    result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;
                }
            }
        }

        return result;
    }

    /**
     * Recursively walk a directory tree and return a List of all
     * Files found; the List is sorted using File.compareTo().
     *
     * @param aStartingDir is a valid directory, which can be read.
     */
    static public List<File> getFileListing(
            File aStartingDir) throws FileNotFoundException {
        validateDirectory(aStartingDir);
        List<File> result = getFileListingNoSort(aStartingDir);
        Collections.sort(result);
        return result;
    }

    // PRIVATE //
    static private List<File> getFileListingNoSort(
            File aStartingDir) throws FileNotFoundException {
        List<File> result = new ArrayList<File>();
        File[] filesAndDirs = aStartingDir.listFiles();
        List<File> filesDirs = Arrays.asList(filesAndDirs);
        for (File file : filesDirs) {
            if(file.isDirectory()) {
                result.add(file); 
            }
            if (!file.isFile()) {
                //must be a directory
                //recursive call!
                List<File> deeperList = getFileListingNoSort(file);
                result.addAll(deeperList);
            }
        }
        return result;
    }

    /**
     * Directory is valid if it exists, does not represent a file, and can be read.
     */
    static private void validateDirectory(
            File aDirectory) throws FileNotFoundException {
        if (aDirectory == null) {
            throw new IllegalArgumentException("Directory should not be null.");
        }
        if (!aDirectory.exists()) {
            throw new FileNotFoundException("Directory does not exist: " + aDirectory);
        }
        if (!aDirectory.isDirectory()) {
            throw new IllegalArgumentException("Is not a directory: " + aDirectory);
        }
        if (!aDirectory.canRead()) {
            throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
        }
    }
} 
```

现在的问题是这种方法的问题是，如果在名为 TESTRESULT 的 java 项目中有 3 个包并且每个包有 2 个文件，那么在控制台的结果中它显示文件名后跟 loc 仅最新包只让说一个名为 abc、def 和 tyu 的 java projest 3 包

```
com.abc package having files --->abc.java
com.def package having files --->abc.java
com.tyu package having files --->FileBrowse.java , FileCountLine.java

the outcome shown in console is... 

    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\.settings
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\bin
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\src
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\src\com
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\src\com\abc
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\src\com\def
    Directory: C:\Users\vaio\Desktop\Demo\TESTRESULT\src\tyu
    *****************************************
    FILE NAME FOLLOWED BY LOC
    *****************************************
    FileBrowse.java ==> 95
    FileCountLine.java ==> 53
    *****************************************
    SUM OF FILES SCANNED ==> 4
    SUM OF ALL THE LINES ==> 296 
```

这并不完美。请告知它将如何显示所有文件的 LOC 后跟的文件名

我的想法是在读取文件和行数的方法中，您为每个目录创建一个 NEW Map 并将其重新分配给相同的结果。由于您在重新分配地图之前不显示数据，因此以前的地图不再可访问，并且当您到达显示时，您只有最后一个目录的地图。相反，您应该维护一个 Map 并将每个目录中的新值插入到同一个 Map 中。

```
public static void main(String[] args) throws FileNotFoundException {  
            //...  
            for (File file : files) {  
                System.out.println("Directory: "+file);  
                result = getFileLineCount(file); 
```

在那里你得到一个 Map 回来`getFileLineCount()`，并将其分配给结果。这会丢弃先前创建的结果 Map，并且您会丢失已经存在的所有内容。你有几个选择：

1.  将结果 Map 传递给方法，以便您可以将结果添加到一个 Map，而不是为方法`getFileLineCount()`内的每个文件夹创建一个新 Map`getFileLineCount()`
2.  从中获取结果`getLineCount()`并将它们复制到结果映射中，而不是替换结果映射
3.  创建另一个集合，如 Map 之类的：（`Map<String, Map<String, Integer>>`它将`getFileLineCount()`方法返回的结果映射到这些结果所属的目录的名称），或者`List<Map<String, Integer>>`（这将是返回的结果的简单列表，`getFileLineCount()`没有到父级的任何映射目录）。

请告知如何重构我的代码，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:42:59.997

你可以这样做：

```
result.put(file, lineCount); 
```

代替

```
result.put(file.getName(), lineCount); 
```

当您打印结果时，您可以打印漂亮的文件名。像这样：

```
for (Map.Entry<File, Integer> entry : result.entrySet()) {
    System.out.println(entry.getKey().getName() + " ==> " + entry.getValue());
} 
```

当然 map 应该被声明为：`Map.Entry<File, Integer>`

* * *

当然，这可以得到很大的改进，但是只需进行最小的更改，您就可以拥有它（这实际上是您所期望的，如果您不想要整个路径，请更改以打印名称）：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.NoSuchElementException;
import java.util.Scanner;

import javax.swing.JFileChooser;

public class abc {

    /**
     * @param args
     * @throws FileNotFoundException
     */
    private static int totalLineCount = 0;
    private static int totalFileScannedCount = 0;

    public static void main(final String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            Map<File, Integer> result = new HashMap<File, Integer>();
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());

            List<File> files = getFileListing(directory);

            // print out all file names, in the the order of File.compareTo()
            for (File file : files) {
                System.out.println("Directory: " + file);
                getFileLineCount(result, file);
            }

            System.out.println("*****************************************");
            System.out.println("FILE NAME FOLLOWED BY LOC");
            System.out.println("*****************************************");

            for (Map.Entry<File, Integer> entry : result.entrySet()) {
                System.out.println(entry.getKey().getAbsolutePath() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
            System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);
        }

    }

    public static void getFileLineCount(final Map<File, Integer> result, final File directory)
            throws FileNotFoundException {
        File[] files = directory.listFiles(new FilenameFilter() {

            public boolean accept(final File directory, final String name) {
                if (name.endsWith(".java")) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        for (File file : files) {
            if (file.isFile()) {
                totalFileScannedCount++;
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++) {
                        ;
                    }
                } catch (NoSuchElementException e) {
                    result.put(file, lineCount);
                    totalLineCount += lineCount;
                }
            }
        }

    }

    /**
     * Recursively walk a directory tree and return a List of all Files found;
     * the List is sorted using File.compareTo().
     * 
     * @param aStartingDir
     *            is a valid directory, which can be read.
     */
    static public List<File> getFileListing(final File aStartingDir) throws FileNotFoundException {
        validateDirectory(aStartingDir);
        List<File> result = getFileListingNoSort(aStartingDir);
        Collections.sort(result);
        return result;
    }

    // PRIVATE //
    static private List<File> getFileListingNoSort(final File aStartingDir) throws FileNotFoundException {
        List<File> result = new ArrayList<File>();
        File[] filesAndDirs = aStartingDir.listFiles();
        List<File> filesDirs = Arrays.asList(filesAndDirs);
        for (File file : filesDirs) {
            if (file.isDirectory()) {
                result.add(file);
            }
            if (!file.isFile()) {
                // must be a directory
                // recursive call!
                List<File> deeperList = getFileListingNoSort(file);
                result.addAll(deeperList);
            }
        }
        return result;
    }

    /**
     * Directory is valid if it exists, does not represent a file, and can be
     * read.
     */
    static private void validateDirectory(final File aDirectory) throws FileNotFoundException {
        if (aDirectory == null) {
            throw new IllegalArgumentException("Directory should not be null.");
        }
        if (!aDirectory.exists()) {
            throw new FileNotFoundException("Directory does not exist: " + aDirectory);
        }
        if (!aDirectory.isDirectory()) {
            throw new IllegalArgumentException("Is not a directory: " + aDirectory);
        }
        if (!aDirectory.canRead()) {
            throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
        }
    }
} 
```

# extjs - 设置 Sencha Touch 2 选择域的选择选项

> ID：11275795
> 
> 赞同：5
> 
> 时间：2012-06-30T16:39:01.573
> 
> 标签：extjs, sencha-touch-2

尝试学习 Sencha Touch 2，但我似乎无法找到如何在选择字段中设置默认选定选项。这是我在 Main.js 视图中尝试过的内容：

```
Ext.define('mobile-form.view.Main', {
    extend: 'Ext.Container',
    requires: [
        'Ext.TitleBar',
        'Ext.form.FieldSet',
        'Ext.field.Select',
    ],
    config: {
        fullscreen: true,
        layout: 'vbox',
        items: [
                {
                    xtype: 'titlebar',
                    docked: 'top',
                    cls: 'titlebar'
                },
                {
                    xtype: 'panel',
                    scrollable: 'vertical',
                    cls: 'form_container',
                    flex: 1,
                    items: [
                        {
                            xtype: 'fieldset',
                            items: [
                                {
                                    xtype: 'selectfield',
                                    label: 'Desired Policy Type',
                                    labelWidth: 'auto',
                                    name: 'test',
                                    options: [
                                        {text: 'Test 1', value: '1'},
                                        {text: 'Test 2', value: '2'},
                                        // this doesn't work
                                        {text: 'Test 3', value: '3', selected: true},
                                        {text: 'Test 4', value: '4'}
                                    ],
                                    listeners: {
                                        // this doesn't work
                                        painted: function() {
                                            console.log(this);
                                            this.select(3);
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
    }
}); 
```

我是否需要等到应用程序本身准备好？像这样的东西：

```
Ext.application({
    name: 'mobile-form',

    requires: [
        'Ext.MessageBox'
    ],

    views: ['Main'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        Ext.Viewport.add(Ext.create('mobile-form.view.Main'));
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    },
    onReady: function() {
        {SomeWayToTargetElement}.select(2);
    }
}); 
```

如果是这样，如何在视图中的元素上设置标识符，以便可以在应用程序的 onReady 事件中定位它们？

非常感谢任何帮助。到目前为止喜欢煎茶。他们的文档很棒。只需要找到这些文档的更多示例，我的墨水我们都会变得更好。:P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T17:04:30.623

只需使用config`value`上的属性：`selectfield`

```
Ext.create('Ext.form.Panel', {
    fullscreen: true,
    items: [
        {
            xtype: 'fieldset',
            title: 'Select',
            items: [
                {
                    xtype: 'selectfield',
                    label: 'Choose one',
                    value:'second',
                    options: [
                        {text: 'First Option',  value: 'first'},
                        {text: 'Second Option', value: 'second'},
                        {text: 'Third Option',  value: 'third'}
                    ]
                }
            ]
        }
    ]
}); 
```

你也可以和听众一起做，就像你试图做的那样

```
Ext.create('Ext.form.Panel', {
    fullscreen: true,
    items: [
        {
            xtype: 'fieldset',
            title: 'Select',
            items: [
                {
                    xtype: 'selectfield',
                    label: 'Choose one',
                    listeners:{
                        initialize:function(){
                            this.setValue('second');
                        }
                    },
                    options: [
                        {text: 'First Option',  value: 'first'},
                        {text: 'Second Option', value: 'second'},
                        {text: 'Third Option',  value: 'third'}
                    ]
                }
            ]
        }
    ]
}); 
```

希望这可以帮助

# mysql - Mysql在大表上的性能缓慢

> ID：11275797
> 
> 赞同：2
> 
> 时间：2012-06-30T16:39:09.297
> 
> 标签：mysql, performance

我有几百万行的下表：

```
CREATE TABLE `points` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `DateNumber` int(10) unsigned DEFAULT NULL,
  `Count` int(10) unsigned DEFAULT NULL,
  `FPTKeyId` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_UNIQUE` (`id`),
  KEY `index3` (`FPTKeyId`,`DateNumber`) USING HASH
) ENGINE=InnoDB AUTO_INCREMENT=16755134 DEFAULT CHARSET=utf8$$ 
```

如您所见，我已经创建了索引。我不知道我做对了可能不是。问题是查询执行速度非常慢。

让我们来一个简单的查询

```
SELECT fptkeyid, count FROM points group by fptkeyid 
```

我无法获得结果，因为查询因超时（10 分钟）而中止。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:16:38.130

当心 MySQL 的愚蠢行为：`GROUP BY`ing 隐式执行`ORDER BY`.

为防止这种情况，请显式添加`ORDER BY NULL`，以防止不必要的排序。

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)说：

> 如果您使用 GROUP BY，则输出行将根据 GROUP BY 列进行排序，就好像您对相同的列有一个 ORDER BY。为了避免 GROUP BY 产生的排序开销，添加 ORDER BY NULL：

```
SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL; 
```

# +

[http://dev.mysql.com/doc/refman/5.6/en/group-by-optimization.html](http://dev.mysql.com/doc/refman/5.6/en/group-by-optimization.html)说：

> 为 GROUP BY 使用索引的最重要的先决条件是所有 GROUP BY 列都引用来自同一索引的属性，并且索引按顺序存储其键（例如，这是 **BTREE**索引而不是**HASH**索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:18:52.563

我个人会从你的`AUTO_INCREMENT`价值开始。您已将其设置为每*增加`16,755,134`一条新记录*。您的字段值设置为`INT UNSIGNED`这意味着值的范围是`0 to 4,294,967,295`（或近 43 亿）。这意味着您将*只有`256`*在字段超出数据类型限制之前的*值*`PRIMARY KEY INDEX`，从而损害.

您可以将数据类型更改为，并且您将拥有一个（或略多于 18.4 quintillion）`BIGINT UNSIGNED`的值范围，这将允许您拥有*最多**（或略多于 1.1 万亿）*具有此值的唯一值。`0 to 18,446,744,073,709,551,615`*`1,100,960,700,983`*`AUTO_INCREMENT`

我首先会问您是否真的需要将`AUTO_INCREMENT`值设置为如此大的数字，如果不需要，那么我*建议将其更改为 1*（或至少一些较低的数字），因为将字段值存储为`INT`vs`BIGINT`将在其中节省大量磁盘空间像这样的更大的桌子。无论哪种方式，你都应该得到一个更稳定的`PRIMARY KEY INDEX`，这应该有助于改进查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:34:14.830

您的查询没有意义：

```
SELECT fptkeyid, count FROM points group by fptkeyid 
```

您按 fptkeyid 分组，因此 count 在这里没有用。应该有一个聚合函数。不是计数字段。接下来，该计数也是一个 MySQL 函数，这使得对字段使用相同的名称不是很有用/不明智。

你不需要类似的东西：

```
SELECT fptkeyid, SUM(`count`) FROM points group by fptkeyid 
```

如果不是，请解释您期望从查询中得到什么结果。

用测试数据创建了一个数据库，一百万条记录，看看我是否能找到与你的问题相同的东西。这是解释告诉我的：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  points  index   NULL    index3  10  NULL    433756 
```

在 SUM 查询中：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  points  index   NULL    index3  10  NULL    491781 
```

这两个查询都是在一秒钟内在笔记本电脑（macbook air）上完成的，不需要很长时间。插入虽然需要一些时间，但需要几分钟才能获得 50 万条记录。但是检索和计算却没有。

我们需要更多来完全完整地回答您的问题。可能是数据库的配置错误，例如几乎没有分配内存？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T16:45:01.993

我认为问题是您的服务器带宽。拥有一百万行可能至少需要高兆字节的带宽。

# ruby - 红宝石dsl制作

> ID：11275801
> 
> 赞同：0
> 
> 时间：2012-06-30T16:39:39.097
> 
> 标签：ruby, dsl

我尝试写 DSL

```
class Warcraft 
  class << self
    def config
      unless @instance
        yield(self)
      end
      @instance ||= self
    end

    attr_accessor :name, :battle_net

    def game(&block)
      @instance ||= Game.new(&block)
    end
  end

  class Game
    class << self
      def new
        unless @instance
          yield
        end
        @instance ||= self
      end

      attr_accessor :side, :hero

      def rune_appear_every(period)
        @rune_appear_every = period
      end

    end
  end
end

Warcraft.config do |war|
  war.name = "Warcraft III"
  war.battle_net = :iccup

  war.game do |game|
    game.side = :sentinels
    game.hero = "Furion"
    game.rune_appear_every 2.minutes
  end
end 
```

我得到这样的错误：

```
dsl.rb:41:in `block (2 levels) in <main>': undefined method `side=' for nil:NilClass (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:47:15.520

问题在这里：

```
 def new
    unless @instance
      yield
    end
    @instance ||= self
  end 
```

`yield`稍后当您调用时，您没有传递任何参数：

```
 war.game do |game| 
```

`game`变量为零。因此，与其只是做`yield`，不如做`yield self`。

# ruby-on-rails - Capistrano 部署因 rake 运行而失败（rails3 + rvm）

> ID：11275804
> 
> 赞同：2
> 
> 时间：2012-06-30T16:40:05.490
> 
> 标签：ruby-on-rails, ruby, rvm, capistrano

**编辑：** 这里的问题是我在本地机器上使用了 RVM，在服务器上使用了 rbenv。强烈不建议这样做，如果您正在管理多个 ruby​​ 安装（或升级您的 ruby​​ 版本但不想更改系统），请在所有环境中使用 RVM 或 rbenv！ **/编辑**

所以我将从一点历史开始：我正在将我们的 rails2 网站升级到 rails3。除了 Capistrano 的部署脚本之外，大多数事情现在都可以正常工作。我目前的设置是：

*   本地安装的 RVM (1.14.1)
*   ruby-1.9.3-p194（设置为项目文件夹）
*   Capistrano v2.12.0（从 2.6.0 升级，但在 2.6.0 上也不起作用）作为 RVM gem 安装
*   rvm-capistrano (1.2.2)，添加到 Gemfile 中（在网上和 SO 上做了一些阅读之后）
*   rbenv（全局使用 ruby​​ 1.9.3p194）安装在服务器上

（到现在为止，如果您发现任何不合理的地方，请告诉我）

部署脚本中没有任何变化，但是当我尝试部署到我的测试服务器（我们称之为*beta*）时，我收到了这个错误：

```
* executing `deploy:restart'
* executing "cd /home/foo/bar/current && rake RAILS_ENV=beta queue:restart_workers"
        servers: ["208.0..."]
        [208.0...] executing command
    *** [err :: 208.0...] rake aborted!
    *** [err :: 208.0...] no such file to load -- bundler/setup
    *** [err :: 208.0...] /home/foo/bar/releases/20120630161947/Rakefile:5
    *** [err :: 208.0...] (See full trace by running task with --trace)
     ** [out :: 208.0...] (in /home/foo/bar/releases/20120630161947)
        command finished in 1183ms
    failed: "sh -c 'cd /home/foo/bar/current && rake RAILS_ENV=beta queue:restart_workers'" on 208.0... 
```

deploy.rb 的相关部分如下所示：

```
 task :restart do
    run "cd /home/foo/bar/current && rake RAILS_ENV=#{CAP_ENV} queue:restart_workers"
    run "cd /home/foo/bar/current && rake RAILS_ENV=#{CAP_ENV} db:migrate"
    run "touch #{deploy_to}/current/tmp/restart.txt"
  end 
```

不用说，`rake RAILS_ENV=beta queue:restart_workers'`在服务器上手动运行时可以完美运行。此外，应用程序被部署（代码是从 git 复制的，这只是部署失败的最后一部分）。

最后，自从我安装 rvm-capistrano 并添加到 Gemfile 之前，错误并没有改变，所以我什至不确定它是否与 rvm 有关，我只是从网上看的猜测。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:57:02.047

为了正常工作，rbenv 必须使用它提供的填充程序覆盖所有与 ruby​​ 和 gem 相关的可执行文件。

通常这是通过启动脚本完成的（这就是当您登录到服务器时它起作用的原因），但 Capistrano 在没有 shell 的情况下登录，因此不运行这些脚本。

您必须将以下内容添加到您的 deploy.rb ：

```
set :default_environment, {
  'PATH' => "$HOME/.rbenv/shims:$HOME/.rbenv/bin:$PATH"
} 
```

并且不要在你的服务器上使用任何与 rvm 相关的东西，rbenv 和 rvm 真的不喜欢对方

PS：关于这个主题的更多解释：http: [//henriksjokvist.net/archive/2012/2/deploying-with-rbenv-and-capistrano/](http://henriksjokvist.net/archive/2012/2/deploying-with-rbenv-and-capistrano/)

# function - `(Integer a) => a -> Bool` 和 `Integer -> Bool` 之间的区别？

> ID：11275805
> 
> 赞同：4
> 
> 时间：2012-06-30T16:40:08.907
> 
> 标签：function, haskell, purely-functional

我今天用 Haskell 编写了我的第一个程序。[它编译并成功运行](http://ideone.com/hkvFz)。而且由于它不是典型的*“Hello World”*程序，它实际上做的远不止这些，所以请恭喜我：D

无论如何，我对我的代码和 Haskell 中的语法毫无疑问。

**问题：**

我的程序从标准输入中读取一个整数`N`，然后，对于`i`range 中的每个整数`[1,N]`，它会打印是否`i`是素数。目前它不检查输入错误。:-)

**解决方案：（**还有疑问/问题）

为了解决这个问题，我编写了这个函数来测试整数的素数：

```
is_prime :: Integer -> Bool
is_prime n = helper n 2
        where
          helper :: Integer -> Integer -> Bool
          helper n i  
              | n < 2 * i = True
              | mod n i > 0 = helper n (i+1)
              | otherwise = False 
```

它工作得很好。但我怀疑第一行是许多尝试的结果，因为我在[本教程](http://learnyouahaskell.com/syntax-in-functions)中阅读的内容不起作用，并给出了这个错误（我*想*这是一个错误，虽然它没有这么说):

```
prime.hs:9:13:
    Type constructor `Integer' used as a class
    In the type signature for `is_prime':
      is_prime :: Integer a => a -> Bool 
```

根据[教程](http://learnyouahaskell.com/syntax-in-functions)（顺便说一句，这是一个写得很好的教程），第一行应该是：（*教程说`(Integral a) => a -> String`，所以我认为`(Integer a) => a -> Bool`应该也可以。*）

```
is_prime :: (Integer a) => a -> Bool 
```

这不起作用，并给出上面发布的错误（？）。

为什么它不起作用？这条线（不起作用）和这条线（起作用）有什么区别？

* * *

`1`另外，循环到的惯用方式是`N`什么？我对代码中的循环并不完全满意。请提出改进​​建议。这是我的代码：

```
--read_int function
read_int :: IO Integer
read_int = do
     line <- getLine
     readIO line

--is_prime function
is_prime :: Integer -> Bool
is_prime n = helper n 2
        where
          helper :: Integer -> Integer -> Bool
          helper n i  
              | n < 2 * i = True
              | mod n i > 0 = helper n (i+1)
              | otherwise = False

main = do
       n <- read_int
       dump 1 n
       where
           dump i x = do 
                 putStrLn ( show (i) ++ " is a prime? " ++ show (is_prime i) )
                 if i >= x 
                    then putStrLn ("")
                  else do
                    dump (i+1) x 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T17:01:23.300

你误读了教程。它会说类型签名应该是

```
is_prime :: (Integral a) => a -> Bool
--       NOT Integer a 
```

这些是不同的类型：

*   `Integer -> Bool`
    *   这是一个接受类型值`Integer`并返回类型值的函数`Bool`。
*   `Integral a => a -> Bool`
    *   这是一个接受类型值`a`并返回类型值的函数`Bool`。
    *   是什么`a`？它可以是调用者选择的任何实现`Integral`类型类的类型，例如`Integer`or `Int`。

`Int`（和之间的区别`Integer`？后者可以表示任意大小的整数，前者最终会环绕，类似于`int`C/Java/etc 中的 s。）

* * *

循环的惯用方式取决于循环的作用：它可以是映射、折叠或过滤器。

您的循环输入`main`是一个地图，并且因为您在循环中执行 i/o，所以您需要使用`mapM_`.

```
let dump i = putStrLn ( show (i) ++ " is a prime? " ++ show (is_prime i) )
 in mapM_ dump [1..n] 
```

同时，您的循环`is_prime`是一个折叠（特别是`all`在这种情况下）：

```
is_prime :: Integer -> Bool
is_prime n = all nondivisor [2 .. n `div` 2]
        where
          nondivisor :: Integer -> Bool
          nondivisor i = mod n i > 0 
```

（在风格上，在 Haskell 中习惯使用 like`isPrime`而不是 like 的名称`is_prime`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T17:01:22.463

**第 1 部分：**如果您再次查看该教程，您会注意到它实际上以以下形式给出了类型签名：

```
isPrime :: Integer -> Bool
-- or
isPrime :: Integral a => a -> Bool
isPrime :: (Integral a) => a -> Bool -- equivalent 
```

这里，`Integer`是具体类型的名称（具有实际表示），`Integral`是类型类的名称。`Integer`类型是类的成员`Integral`。

约束`Integral a`意味着无论`a`发生什么类型，`a`都必须是`Integral`该类的成员。

**第 2 部分：**有很多方法可以编写这样的函数。您的递归定义看起来不错（尽管您可能想使用`n < i * i`而不是`n < 2 * i`，因为它更快）。

如果您正在学习 Haskell，您可能想尝试使用高阶函数或列表推导来编写它。就像是：

```
module Main (main) where
import Control.Monad (forM_)

isPrime :: Integer -> Bool
isPrime n = all (\i -> (n `rem` i) /= 0) $ takeWhile (\i -> i^2 <= n) [2..]

main :: IO ()
main = do n <- readLn
          forM_ [1..n] $ \i ->
              putStrLn (show (i) ++ " is a prime? " ++ show (isPrime i)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T16:59:19.867

1.  它是`Integral a`，不是`Integer a`。请参阅[http://www.haskell.org/haskellwiki/Converting_numbers](http://www.haskell.org/haskellwiki/Converting_numbers)。

2.  `map`和朋友是你在 Haskell 中循环的方式。这就是我重写循环的方式：

    ```
    main :: IO ()
    main = do
            n <- read_int
            mapM_ tell_prime [1..n]
            where tell_prime i = putStrLn (show i ++ " is a prime? " ++ show (is_prime i)) 
    ```

# c# - 将 asp.net 单页发布到 ftp 服务器？

> ID：11275806
> 
> 赞同：0
> 
> 时间：2012-06-30T16:40:34.617
> 
> 标签：c#, asp.net, visual-studio-2010, publish

我正在尝试将网页发布到我的 ftp 服务器中，事情是当我发布它并尝试访问它时，结果只是纯代码。我怎样才能使它只出现asp文件的“设计”？

在此先感谢，布鲁诺宪章

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:43:53.260

> 我怎样才能使它只出现asp文件的“设计”？

如果您想在浏览器中显示的只是“设计”（意味着没有服务器端逻辑）。那么您真正需要的只是一个 HTML 页面。为此：

*   `.aspx`从浏览器源复制文件呈现的标记
*   将标记粘贴到适当命名的`.html`/`.htm`文件中
*   将文件上传到您的服务器

如果存在*服务器端*逻辑，则需要将 .aspx 文件上传到具有***IIS***和适当版本的***.NET Framework***的服务器以运行页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:58:28.693

您需要在发布代码之前对其进行编译。编译您的代码基本上会将所有逻辑移动到 .dll 文件中，并且只保留 HTML（至少）。您仍然需要一个带有 aspx 处理器的 Web 服务器，通常是 IIS。

您需要将您的 Web 服务器指向您要上传到的文件夹。

# c# - 此 SqlParameterCollection 不包含具有 ParameterName '@UserId' 的 SqlParameter

> ID：11275807
> 
> 赞同：2
> 
> 时间：2012-06-30T16:40:37.913
> 
> 标签：c#, sql, mysql-error-1064

我有一个登录页面。一旦用户成功登录，他们就可以查看和管理他们的个人资料/信息。这将通过从数据库中检索数据并显示在表单视图上来完成。

但是，我的 userprofile.aspx.cs 文件中出现了以下错误：

```
Exception Details: System.IndexOutOfRangeException: An SqlParameter with ParameterName '@UserId' is not contained by this SqlParameterCollection.

Source Error: 

Line 44: 
Line 45:         // Assign the currently logged on user's UserId to the @UserId parameter
Line 46:         e.Command.Parameters["@UserId"].Value = currentUserId;
Line 47: 
Line 48:     } 
```

用户配置文件.aspx：

```
<asp:FormView ID="FormView1" runat="server" 
            DataSourceID="SqlDataSource1" DataKeyNames="UserId">
            <EditItemTemplate>
                UserId:
                <asp:Label ID="UserIdLabel1" runat="server" Text='<%# Eval("UserId") %>' />
                <br />
                Password:
                <asp:TextBox ID="PasswordTextBox" runat="server" 
                    Text='<%# Bind("Password") %>' />
                <br />
                Email:
                <asp:TextBox ID="EmailTextBox" runat="server" Text='<%# Bind("Email") %>' />
                <br />
                HomeTown:
                <asp:TextBox ID="HomeTownTextBox" runat="server" 
                    Text='<%# Bind("HomeTown") %>' />
                <br />
                HomepageUrl:
                <asp:TextBox ID="HomepageUrlTextBox" runat="server" 
                    Text='<%# Bind("HomepageUrl") %>' />
                <br />
                Signature:
                <asp:TextBox ID="SignatureTextBox" runat="server" 
                    Text='<%# Bind("Signature") %>' />
                <br />
                <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" 
                    CommandName="Update" Text="Update" />
                &nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" 
                    CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </EditItemTemplate>
            <InsertItemTemplate>
                UserId:
                <asp:TextBox ID="UserIdTextBox" runat="server" Text='<%# Bind("UserId") %>' />
                <br />
                Password:
                <asp:TextBox ID="PasswordTextBox" runat="server" 
                    Text='<%# Bind("Password") %>' />
                <br />
                Email:
                <asp:TextBox ID="EmailTextBox" runat="server" Text='<%# Bind("Email") %>' />
                <br />
                HomeTown:
                <asp:TextBox ID="HomeTownTextBox" runat="server" 
                    Text='<%# Bind("HomeTown") %>' />
                <br />
                HomepageUrl:
                <asp:TextBox ID="HomepageUrlTextBox" runat="server" 
                    Text='<%# Bind("HomepageUrl") %>' />
                <br />
                Signature:
                <asp:TextBox ID="SignatureTextBox" runat="server" 
                    Text='<%# Bind("Signature") %>' />
                <br />
                <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" 
                    CommandName="Insert" Text="Insert" />
                &nbsp;<asp:LinkButton ID="InsertCancelButton" runat="server" 
                    CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
            <ItemTemplate>
                UserId:
                <asp:Label ID="UserIdLabel" runat="server" Text='<%# Eval("UserId") %>' />
                <br />
                Password:
                <asp:Label ID="PasswordLabel" runat="server" Text='<%# Bind("Password") %>' />
                <br />
                Email:
                <asp:Label ID="EmailLabel" runat="server" Text='<%# Bind("Email") %>' />
                <br />
                HomeTown:
                <asp:Label ID="HomeTownLabel" runat="server" Text='<%# Bind("HomeTown") %>' />
                <br />
                HomepageUrl:
                <asp:Label ID="HomepageUrlLabel" runat="server" 
                    Text='<%# Bind("HomepageUrl") %>' />
                <br />
                Signature:
                <asp:Label ID="SignatureLabel" runat="server" Text='<%# Bind("Signature") %>' />
                <br />

            </ItemTemplate>
        </asp:FormView>
    </p>
<p>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SecurityTutorialsConnectionString %>" 
            onselecting="SqlDataSource1_Selecting" 
            SelectCommand="SELECT UserProfiles.UserId, aspnet_Membership.Password, aspnet_Membership.Email, UserProfiles.HomeTown, UserProfiles.HomepageUrl, UserProfiles.Signature FROM aspnet_Membership INNER JOIN UserProfiles ON aspnet_Membership.UserId = UserProfiles.UserId">
        </asp:SqlDataSource>
    </p>
<p>
        &nbsp;</p>

</asp:Content> 
```

用户配置文件.aspx.cs：

```
 protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
    {
        // Get a reference to the currently logged on user
        MembershipUser currentUser = Membership.GetUser();

        // Determine the currently logged on user's UserId value
        Guid currentUserId = (Guid)currentUser.ProviderUserKey;

        // Assign the currently logged on user's UserId to the @UserId parameter
        e.Command.Parameters["@UserId"].Value = currentUserId;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T17:17:20.890

创建一个新的 SqlParameter 并将其添加到集合中。

```
SqlParameter param = new SqlParameter("@UserId", currentUserId);
e.Command.Parameters.Add(param); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T17:45:45.600

尝试以下操作：

```
DbParameter param = e.Command.CreateParameter();
param.ParameterName = "@UserId";
param.Value = currentUserId;
e.Command.Parameters.Add(param); 
```

虽然我没有测试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T16:44:37.117

您必须添加参数

```
e.Command.Parameters.AddWithValue("@UserId", currentUserId); 
```

添加后，您可以通过索引器访问它，如示例中所示。

* * *

### 更新

如果您正在使用`System.Data.Common`命名空间，则该`AddWithValue`方法不可用。你将不得不做类似的事情

```
var param = e.Command.CreateParameter("@UserId", currentUserId);
e.Command.Parameters.Add(param); 
```

这有点复杂，但优点是您不必隐式创建特定类型的参数，例如`SqlParamter`or `OleDbParameter`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T05:23:47.993

如果您的 SqlDataSource 中已经列出了参数，那么只需指向它并更改它的值...

```
e.Command.Parameters["@UserId"].Value = currentUserId; 
```

您不需要创建参数，除非您没有在您的 ASP 页面中将其列出。

# java - Eclipse 随机停止加载

> ID：11275814
> 
> 赞同：1
> 
> 时间：2012-06-30T16:41:48.033
> 
> 标签：java, eclipse, exception, crash, access-violation

因此，在大约一个月不工作后，我像往常一样打开了 Eclipse（单击任务栏中的图标），而且……什么也没有。有一些硬盘驱动器活动，但实际上没有进程保持活动状态，如果它们完全启动的话。

在进一步调查后，我发现如果我以管理员身份运行可执行文件（顺便说一下，我正在运行 Windows 7），则会出现启动画面，但在出现进度条之前，它会崩溃生成一个名为`hs_err_pid2620.txt`包含以下内容的文件：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000779b0895, pid=2620, tid=996
#
# JRE version: 7.0_03-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22.1-b02 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [ntdll.dll+0x50895]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x0000000002fef000):  JavaThread "main" [_thread_in_Java, id=996, stack(0x0000000000030000,0x0000000000130000)]

siginfo: ExceptionCode=0xc0000005, reading address 0xffffffffffffffff

Registers:
RAX=0x000000000012dc68, RBX=0x0000000000000002, RCX=0x000000000012dd38, RDX=0x000000000012dca8
RSP=0x000000000012dc58, RBP=0x000007fee9f266e0, RSI=0x0000000000000020, RDI=0x0000000000000000
R8 =0x0000000000125000, R9 =0x0000000000000003, R10=0x0000000000000000, R11=0x0000000000003b95
R12=0x0000000000000000, R13=0x0000000000000050, R14=0x0000000000000003, R15=0x0000000002fef000
RIP=0x00000000779b0895, EFLAGS=0x0000000000010202

Top of Stack: (sp=0x000000000012dc58)
0x000000000012dc58:   0000000000000202 000000007796b239
0x000000000012dc68:   000007fffffde000 0000000000000051
0x000000000012dc78:   00000000081e5888 000000000012de00
0x000000000012dc88:   0000000000000000 000000000012de70
0x000000000012dc98:   000000006b06e908 000000000000000a
0x000000000012dca8:   0000000000130000 0000000000125000
0x000000000012dcb8:   0000000007a31630 000000000012e4d0
0x000000000012dcc8:   000000000302743a 00000000030273d0
0x000000000012dcd8:   0000000000000000 0000000000000000
0x000000000012dce8:   000000000012e4d0 000000000012e5b0
0x000000000012dcf8:   0000000002ff6038 000000006b1815ab
0x000000000012dd08:   0000000000000000 000000000012e610
0x000000000012dd18:   000056db5fdc4851 000000000012e500
0x000000000012dd28:   0000000002feca70 000000006b181aab
0x000000000012dd38:   000000000012de98 00000000f83af1d8
0x000000000012dd48:   000000000012e500 00000000d825d98b 

Instructions: (pc=0x00000000779b0895)
0x00000000779b0875:   d0 00 00 00 4c 89 a1 d8 00 00 00 4c 89 a9 e0 00
0x00000000779b0885:   00 00 4c 89 b1 e8 00 00 00 4c 89 b9 f0 00 00 00
0x00000000779b0895:   0f ae 81 00 01 00 00 0f 29 81 a0 01 00 00 0f 29
0x00000000779b08a5:   89 b0 01 00 00 0f 29 91 c0 01 00 00 0f 29 99 d0 

Register to memory mapping:

RAX=0x000000000012dc68 is pointing into the stack for thread: 0x0000000002fef000
RBX=0x0000000000000002 is an unknown value
RCX=0x000000000012dd38 is pointing into the stack for thread: 0x0000000002fef000
RDX=0x000000000012dca8 is pointing into the stack for thread: 0x0000000002fef000
RSP=0x000000000012dc58 is pointing into the stack for thread: 0x0000000002fef000
RBP=0x000007fee9f266e0 is an unknown value
RSI=0x0000000000000020 is an unknown value
RDI=0x0000000000000000 is an unknown value
R8 =0x0000000000125000 is pointing into the stack for thread: 0x0000000002fef000
R9 =0x0000000000000003 is an unknown value
R10=0x0000000000000000 is an unknown value
R11=0x0000000000003b95 is an unknown value
R12=0x0000000000000000 is an unknown value
R13=0x0000000000000050 is an unknown value
R14=0x0000000000000003 is an unknown value
R15=0x0000000002fef000 is a thread

Stack: [0x0000000000030000,0x0000000000130000],  sp=0x000000000012dc58,  free space=1015k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [ntdll.dll+0x50895]  RtlCaptureContext+0x85

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
v  blob 0x00000000030274ff
j  java.util.jar.Attributes.putValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;+13
j  java.util.jar.Attributes.read(Ljava/util/jar/Manifest$FastInputStream;[B)V+301
j  java.util.jar.Manifest.read(Ljava/io/InputStream;)V+291
j  sun.security.util.SignatureFileVerifier.processImpl(Ljava/util/Hashtable;Ljava/util/List;)V+20
j  sun.security.util.SignatureFileVerifier.process(Ljava/util/Hashtable;Ljava/util/List;)V+9
j  java.util.jar.JarVerifier.processEntry(Lsun/security/util/ManifestEntryVerifier;)V+387
j  java.util.jar.JarVerifier.update(I[BIILsun/security/util/ManifestEntryVerifier;)V+39
j  java.util.jar.JarFile.initializeVerifier()V+107
j  java.util.jar.JarFile.getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;+25
j  sun.misc.URLClassPath$JarLoader$2.getInputStream()Ljava/io/InputStream;+11
j  sun.misc.Resource.cachedInputStream()Ljava/io/InputStream;+9
j  sun.misc.Resource.getByteBuffer()Ljava/nio/ByteBuffer;+1
j  java.net.URLClassLoader.defineClass(Ljava/lang/String;Lsun/misc/Resource;)Ljava/lang/Class;+132
j  java.net.URLClassLoader.access$100(Ljava/net/URLClassLoader;Ljava/lang/String;Lsun/misc/Resource;)Ljava/lang/Class;+3
j  java.net.URLClassLoader$1.run()Ljava/lang/Class;+43
j  java.net.URLClassLoader$1.run()Ljava/lang/Object;+1
v  ~StubRoutines::call_stub
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedExceptionAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+0
j  java.net.URLClassLoader.findClass(Ljava/lang/String;)Ljava/lang/Class;+13
j  java.lang.ClassLoader.loadClass(Ljava/lang/String;Z)Ljava/lang/Class;+70
j  java.lang.ClassLoader.loadClass(Ljava/lang/String;)Ljava/lang/Class;+3
j  org.eclipse.equinox.launcher.Main.invokeFramework([Ljava/lang/String;[Ljava/net/URL;)V+101
j  org.eclipse.equinox.launcher.Main.basicRun([Ljava/lang/String;)V+126
j  org.eclipse.equinox.launcher.Main.run([Ljava/lang/String;)I+4
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x00000000068c2000 JavaThread "Service Thread" daemon [_thread_blocked, id=2096, stack(0x0000000007440000,0x0000000007540000)]
  0x00000000068b8800 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=3160, stack(0x0000000007340000,0x0000000007440000)]
  0x00000000068b2800 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=2100, stack(0x0000000007240000,0x0000000007340000)]
  0x00000000068b2000 JavaThread "Attach Listener" daemon [_thread_blocked, id=2136, stack(0x0000000007140000,0x0000000007240000)]
  0x00000000068a6800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2144, stack(0x0000000007040000,0x0000000007140000)]
  0x00000000067c9000 JavaThread "Finalizer" daemon [_thread_blocked, id=2856, stack(0x0000000006f40000,0x0000000007040000)]
  0x00000000067bc000 JavaThread "Reference Handler" daemon [_thread_blocked, id=2740, stack(0x0000000006e40000,0x0000000006f40000)]
=>0x0000000002fef000 JavaThread "main" [_thread_in_Java, id=996, stack(0x0000000000030000,0x0000000000130000)]

Other Threads:
  0x00000000067ae800 VMThread [stack: 0x0000000006d40000,0x0000000006e40000] [id=3400]
  0x00000000068d2800 WatcherThread [stack: 0x0000000007540000,0x0000000007640000] [id=2624]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 11968K, used 3878K [0x00000000f8000000, 0x00000000f8d50000, 0x0000000100000000)
  eden space 10304K, 37% used [0x00000000f8000000,0x00000000f83c99e0,0x00000000f8a10000)
  from space 1664K, 0% used [0x00000000f8bb0000,0x00000000f8bb0000,0x00000000f8d50000)
  to   space 1664K, 0% used [0x00000000f8a10000,0x00000000f8a10000,0x00000000f8bb0000)
 PSOldGen        total 27328K, used 0K [0x00000000e8000000, 0x00000000e9ab0000, 0x00000000f8000000)
  object space 27328K, 0% used [0x00000000e8000000,0x00000000e8000000,0x00000000e9ab0000)
 PSPermGen       total 21248K, used 4738K [0x00000000d8000000, 0x00000000d94c0000, 0x00000000e8000000)
  object space 21248K, 22% used [0x00000000d8000000,0x00000000d84a0be0,0x00000000d94c0000)

Code Cache  [0x0000000002ff0000, 0x0000000003260000, 0x0000000005ff0000)
 total_blobs=245 nmethods=26 adapters=172 free_code_cache=48707Kb largest_free_block=49843712

Dynamic libraries:
0x0000000000400000 - 0x000000000044f000     C:\Users\Andy\Desktop\eclipse-java-juno-win32-x86_64\eclipse\eclipse.exe
0x0000000077960000 - 0x0000000077b09000     C:\windows\SYSTEM32\ntdll.dll
0x0000000077840000 - 0x000000007795f000     C:\windows\system32\kernel32.dll
0x000007fefded0000 - 0x000007fefdf3c000     C:\windows\system32\KERNELBASE.dll
0x00000000775e0000 - 0x00000000776da000     C:\windows\system32\USER32.dll
0x000007fefea70000 - 0x000007fefead7000     C:\windows\system32\GDI32.dll
0x000007fefe220000 - 0x000007fefe22e000     C:\windows\system32\LPK.dll
0x000007fefe460000 - 0x000007fefe529000     C:\windows\system32\USP10.dll
0x000007feffbd0000 - 0x000007feffc6f000     C:\windows\system32\msvcrt.dll
0x000007fefc620000 - 0x000007fefc814000     C:\windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_fa396087175ac9ac\COMCTL32.dll
0x000007fefe340000 - 0x000007fefe3b1000     C:\windows\system32\SHLWAPI.dll
0x000007fefdc90000 - 0x000007fefdce7000     C:\windows\system32\apphelp.dll
0x000007fee9f80000 - 0x000007fee9fda000     C:\windows\AppPatch\AppPatch64\AcLayers.DLL
0x000007fefb9c0000 - 0x000007fefba31000     C:\windows\system32\WINSPOOL.DRV
0x000007fef9090000 - 0x000007fef90a8000     C:\windows\system32\MPR.dll
0x000007fefe6b0000 - 0x000007fefe7dd000     C:\windows\system32\RPCRT4.dll
0x000007fee9b10000 - 0x000007fee9f77000     C:\windows\AppPatch\AppPatch64\AcXtrnal.DLL
0x000007fee9fe0000 - 0x000007feea031000     C:\windows\AppPatch\AppPatch64\AcGenral.DLL
0x000007fefdc60000 - 0x000007fefdc85000     C:\windows\system32\SspiCli.dll
0x000007fefe7e0000 - 0x000007fefe9e3000     C:\windows\system32\ole32.dll
0x000007fefede0000 - 0x000007feffb68000     C:\windows\system32\SHELL32.dll
0x00000000726d0000 - 0x00000000726d3000     C:\windows\system32\sfc.dll
0x000007fef7af0000 - 0x000007fef7b00000     C:\windows\system32\sfc_os.DLL
0x000007fefd0c0000 - 0x000007fefd0de000     C:\windows\system32\USERENV.dll
0x000007fefddc0000 - 0x000007fefddcf000     C:\windows\system32\profapi.dll
0x000007fefbd90000 - 0x000007fefbda8000     C:\windows\system32\dwmapi.dll
0x000007fefeb00000 - 0x000007fefebdb000     C:\windows\system32\ADVAPI32.dll
0x000007fefeae0000 - 0x000007fefeaff000     C:\windows\SYSTEM32\sechost.dll
0x000007fefe1e0000 - 0x000007fefe20e000     C:\windows\system32\IMM32.DLL
0x000007fefe230000 - 0x000007fefe339000     C:\windows\system32\MSCTF.dll
0x00000000222f0000 - 0x00000000223f5000     C:\Program Files\CheckPoint\ZAForceField\Plugins\ISWSHEX.dll
0x0000000073c20000 - 0x0000000073ce9000     C:\windows\WinSxS\amd64_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_88e41e092fab0294\MSVCR80.dll
0x000007fefde70000 - 0x000007fefdeaa000     C:\windows\system32\WINTRUST.dll
0x000007fefdf40000 - 0x000007fefe0aa000     C:\windows\system32\CRYPT32.dll
0x000007fefde60000 - 0x000007fefde6f000     C:\windows\system32\MSASN1.dll
0x0000000073b10000 - 0x0000000073c19000     C:\windows\WinSxS\amd64_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_88e41e092fab0294\MSVCP80.dll
0x000007fefc5a0000 - 0x000007fefc5cd000     C:\windows\system32\ntmarta.dll
0x000007feffb70000 - 0x000007feffbc2000     C:\windows\system32\WLDAP32.dll
0x0000000072000000 - 0x0000000072012000     C:\Users\Andy\Desktop\eclipse-java-juno-win32-x86_64\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813\eclipse_1503.dll
0x000007fefcd60000 - 0x000007fefcd6c000     C:\windows\system32\VERSION.dll
0x000007fefc380000 - 0x000007fefc3d6000     C:\windows\system32\uxtheme.dll
0x000007fefdcf0000 - 0x000007fefdcff000     C:\windows\system32\CRYPTBASE.dll
0x000007fefe3c0000 - 0x000007fefe459000     C:\windows\system32\CLBCatQ.DLL
0x000007fefe530000 - 0x000007fefe607000     C:\windows\system32\OLEAUT32.dll
0x0000000010000000 - 0x000000001000a000     C:\Program Files (x86)\Lenovo\Energy Management\BatteryTestDLL.dll
0x000000006afc0000 - 0x000000006b69a000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\server\jvm.dll
0x000007fef1390000 - 0x000007fef1399000     C:\windows\system32\WSOCK32.dll
0x000007fefe190000 - 0x000007fefe1dd000     C:\windows\system32\WS2_32.dll
0x000007fefe210000 - 0x000007fefe218000     C:\windows\system32\NSI.dll
0x000007fefaf60000 - 0x000007fefaf9b000     C:\windows\system32\WINMM.dll
0x0000000077b20000 - 0x0000000077b27000     C:\windows\system32\PSAPI.DLL
0x000000006bca0000 - 0x000000006bd71000     C:\windows\system32\MSVCR100.dll
0x0000000071790000 - 0x000000007179f000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\verify.dll
0x000000006bc70000 - 0x000000006bc98000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\java.dll
0x000000006cc60000 - 0x000000006cc75000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\zip.dll
0x000007fefd690000 - 0x000007fefd6a7000     C:\windows\system32\CRYPTSP.dll
0x000007fefd390000 - 0x000007fefd3d7000     C:\windows\system32\rsaenh.dll
0x000000006bc50000 - 0x000000006bc69000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\net.dll
0x000007fefd630000 - 0x000007fefd685000     C:\windows\system32\mswsock.dll
0x000007fefd620000 - 0x000007fefd627000     C:\windows\System32\wship6.dll
0x000007fefb030000 - 0x000007fefb045000     C:\windows\system32\NLAapi.dll
0x000007fef2750000 - 0x000007fef2765000     C:\windows\system32\napinsp.dll
0x000007fef2770000 - 0x000007fef2789000     C:\windows\system32\pnrpnsp.dll
0x000007fefd4b0000 - 0x000007fefd50b000     C:\windows\system32\DNSAPI.dll
0x000007fef2730000 - 0x000007fef273b000     C:\windows\System32\winrnr.dll
0x000007fef2740000 - 0x000007fef2750000     C:\windows\system32\wshbth.dll
0x0000000072220000 - 0x0000000072246000     C:\Program Files\Bonjour\mdnsNSP.dll
0x000007fefa8e0000 - 0x000007fefa907000     C:\windows\system32\Iphlpapi.DLL
0x000007fefa8c0000 - 0x000007fefa8cb000     C:\windows\system32\WINNSI.DLL
0x000007fef4750000 - 0x000007fef477f000     C:\Program Files\Common Files\Microsoft Shared\Windows Live\WLIDNSP.DLL
0x000007fefcfa0000 - 0x000007fefcfa7000     C:\windows\System32\wshtcpip.dll
0x000007fef4a50000 - 0x000007fef4a58000     C:\windows\system32\rasadhlp.dll
0x000007fefa4c0000 - 0x000007fefa513000     C:\windows\System32\fwpuclnt.dll
0x000000006bc30000 - 0x000000006bc41000     C:\Program Files\Java\jdk1.7.0_03\jre\bin\nio.dll

VM Arguments:
jvm_args: -Dosgi.requiredJavaVersion=1.5 -Dhelp.lucene.tokenizer=standard -Xms40m -Xmx384m -XX:MaxPermSize=256m 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
CLASSPATH=.;
PATH=C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin/server;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/lib/amd64;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files\Java\jdk1.7.0_03\bin;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Windows Live\Shared;C:\Users\Andy\Desktop\eclipse-java-juno-win32-x86_64\eclipse;
USERNAME=Andy
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 42 Stepping 7, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 , 64 bit Build 6000 

CPU:total 4 (2 cores per cpu, 2 threads per core) family 6 model 42 stepping 7, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht

Memory: 4k page, physical 6233968k(4708700k free), swap 12466084k(10719968k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (22.1-b02) for windows-amd64 JRE (1.7.0_03-b05), built on Feb  3 2012 20:43:56 by "java_re" with unknown MS VC++:1600

time: Sat Jun 30 17:13:23 2012
elapsed time: 0 seconds 
```

我已经尝试了我能想到的一切来解决这个问题。我已经下载了最新版本的 Eclipse，安装了最新版本的 Java 和 JDK，甚至按照 Java 的建议暂时禁用了 UAC，但这些都没有解决问题。

据我所知，自从 Eclipse 工作正常以来，我没有修改任何东西（当然与 Eclipse 无关）。但是，我确实有点怀疑我的硬盘驱动器可能没有应有的健康。尽管如此，我还没有看到其他任何影响。因此，任何帮助或建议将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:04:25.943

好吧，JVM 崩溃是很糟糕的，并且表明存在严重错误。查看转储中的堆栈跟踪，代码似乎正在尝试验证它试图打开的 JAR 文件上的签名。我怀疑你有一个损坏的 JAR 文件，这往往会证实你怀疑这与你的硬盘驱动器“不健康”有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-17T00:41:37.040

我只是想分享我的经验-在我的 PC 上运行可运行的 jar 文件时也遇到了同样的错误。我被卡住了，整晚都在尝试，但没有任何用处。后来我在我的笔记本电脑上尝试了相同的 jar 文件，它工作正常，没有任何错误。

因此对此进行了更多分析，发现我的硬盘的某些扇区已损坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:16:19.427

**不幸的是，** Stephen C 的怀疑是正确的。它根本与 Eclipse 无关。

我猜想崩溃的`ntdll.dll`原因是我有点担心，因为它位于 Windows 目录中。在几个程序中的扩展 SMART 测试产生“读取失败”后，我进一步调查发现我的 28 个扇区已损坏。在这一点上，现实发生了，我意识到我的 HDD 已经走到了最后，所以我订购了一个 SSD（因为我有残疾，这意味着我可能会笨手笨脚，以及其他原因）。我很高兴我做到了。

在某些方面，当我使用 Eclipse 时，这是一项很好的工作。我可以从字面上看到驱动器出现故障 - 我设法备份了我的大部分文件，有些文件位于坏扇区，甚至 Unstoppable Copier 也无济于事；但克隆是一项毫无意义且耗时的工作。Acronis 设法克隆了驱动器，但它显然没有获取重要文件——Windows 无法加载，我最终重新安装并丢失了我的恢复分区——但你什么也没有。

无论如何，您真正需要知道的是 Eclipse 现在正在工作，而问题是由我的硬盘上的损坏扇区引起的。很烦人。

# java - 需要我的树的搜索方法（n 叉树）

> ID：11275817
> 
> 赞同：2
> 
> 时间：2012-06-30T16:42:59.437
> 
> 标签：java, search, tree

我为家谱写了这个树类

现在我需要一种搜索​​方法来在我的树中找到一个节点

它是一个 n 叉树，每个节点可以有 0 到 n 个子节点

搜索方法可以搜索一个节点或两个名称，包括节点名称和他/她的父亲名称

请帮帮我

```
public class FamilyNode {
 public String name;
 public String sex;
 public FamilyNode Father;
 public FamilyNode Mother;
 public FamilyNode Spouse=null;
 public String status="alive";
 public int population;
 public ArrayList<FamilyNode> children=new ArrayList<FamilyNode>() ;

public FamilyNode(String name1,String sex1){
this.name=name1;
this.sex=sex1;
this.population=this.children.size()+1;
}
public void SetParents(FamilyNode father,FamilyNode mother){
    this.Father=father;
    this.Mother=mother;
    }
public void SetHW(FamilyNode HW){
    this.Spouse=HW;
}
public void AddChild(FamilyNode child){
    child.SetParents(this.Father, this.Spouse);
    this.children.add(child);
    this.Spouse.children.add(child);
}

public int Number (){
   int number_of_descendants = this.population;
   if(this.Spouse!=null) number_of_descendants++;
for(int index = 0; index < this.children.size(); index++)
number_of_descendants = number_of_descendants+ this.children.get(index).Number();
return number_of_descendants;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:59:33.867

看看树遍历算法。本文很好地介绍了它们（使用递归和出队）这是遍历树的一种[方法](http://en.wikipedia.org/wiki/Tree_traversal)

```
public class FamilyNode {
    // ...
    // ...
    public void traverseNode(){
       if(name.equals("NameWeAreLookingFor")){
          // We found a node named "NameWeAreLookingFor"
          // return here if your are not interested in visiting children
       } 
       for(FamilyNode child : node.children){
            child.traverseNode();
       }
    }
} 
```

要遍历所有树，请执行以下操作：

```
FamilyNode root = ...;
root.traverseNode(); 
```

请注意，此方法使用递归。如果你的树很大，那么我建议你改用队列，因为递归可能会导致 StackOverFlow 异常。

# actionscript-3 - 使用带有静态函数的 getter setter

> ID：11275819
> 
> 赞同：1
> 
> 时间：2012-06-30T16:43:07.237
> 
> 标签：actionscript-3, apache-flex

我尝试将 getter/setter 与静态函数一起使用。

在一个 mxml 文件中，我尝试获得这样的 http 服务：

```
EventColorByDayModel.acListeVac(event.result.ListeVac.VacPeriode); 
```

事实上，我需要使用结果来填充 EventColorByDayModel 中的数组集合。

看，在我所有的班级下面：

```
package
{
    import mx.collections.ArrayCollection;

    public class EventColorByDayModel
    {

        private static var _acListeVac:ArrayCollection;

        public static function get acListeVac():ArrayCollection
        {
            return _acListeVac;
        }

        public static function set acListeVac(value:ArrayCollection):void
        {
            _acListeVac = value;
        }

        public static function getEventColorByDate(date:Date):uint
        {
            var result:uint = 0xE3EBF6;

            // Store renderer

            for each ( var item:Object in _acListeVac )
            {

                if (( item.dateMySQLDeb.time <=date.time )&&( date.time<=item.dateMySQLFin.time ))
                    result = uint(item.sColor);
            }

            return result;
        }

        public function EventColorByDayModel()
        {
        }

    }
} 
```

但是，在这种情况下，会出现一条错误消息，“无法使用 ref static Class 访问 acListeVac”。我尝试将消息错误法语翻译成英语。我希望，它是全面的。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:45:46.113

因为它是一个 setter（由 set 关键字指定），所以您只需像设置任何其他变量一样设置值。所以试试这个，而不是你在那里的第一行代码：

```
EventColorByDayModel.acListeVac = event.result.ListeVac.VacPeriode; 
```

# objective-c - UIView 没有将触摸传递给子视图

> ID：11275822
> 
> 赞同：0
> 
> 时间：2012-06-30T16:43:26.163
> 
> 标签：objective-c

我确定这是对响应者链的基本误解 - 自 iOS4 以来它是否发生了变化？我有一些子视图的视图。超级视图除了定位子视图之外没有其他用途，并且与处理触摸无关。我希望子视图监听触摸，但超级视图似乎阻止了触摸事件。我认为superviews将触摸传递给subviews？我已经阅读了几篇关于此的帖子，但我无法理解它。几篇文章似乎建议将超级视图的 userInteractionEnabled 设置为 NO 将起作用，但这样做似乎仍然无法让触摸通过。

如果不清楚我的意思，这里有一些简化的代码。在红色视图内点击不会触发 NSLog...

```
@implementation ViewController
@synthesize redView;

- (void)viewDidLoad
{  
    UIView *blueView = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 200, 400)];
    blueView.backgroundColor = [UIColor blueColor];
    [self.view addSubview:blueView];
    redView = [[UIView alloc]initWithFrame:CGRectMake(20, 20, 40, 40)];
    redView.backgroundColor = [UIColor redColor];
    [blueView addSubview:redView];
    [super viewDidLoad];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self.view];

    if (CGRectContainsPoint(redView.frame, touchPoint)) {
        NSLog(@"red got touched");
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:07:02.807

您正在接收的触摸坐标在封闭视图的坐标系中表示。所以你需要用 blueView 的偏移量来修正它们。一种方法是将 blueView 属性添加到您的对象，然后在 touchesBegan 方法中更正：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   UITouch *touch = [touches anyObject];
   CGPoint touchPoint = [touch locationInView:self.view];

   touchPoint.x -= blueView.frame.origin.x;
   touchPoint.y -= blueView.frame.origin.y;
   if (CGRectContainsPoint(redViewFrame, touchPoint)) {
      NSLog(@"red got touched");
   }
} 
```

或者您可以将 UIView 子类化为 blueView 并覆盖 touchesBegan 那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:21:41.157

我可以在这里看到一个错误，在该方法的开始括号之后调用 [super viewDidLoad] 非常重要。其次，我可以建议您使用基于目标动作模式的手势识别器，并且使用起来非常简单。第三，你在搞乱坐标系。

# css - CSS不是带有后内容的选择器

> ID：11275823
> 
> 赞同：0
> 
> 时间：2012-06-30T16:43:32.107
> 
> 标签：css, css-selectors, pseudo-element

是否可以在 :after 中使用 :not() 选择器/伪事物？

例如，如果我有以下内容：

```
li:hover > ul
{
    display: block;
}

li:after
{
    content: " ";
    width: 200px;
    height: 200px;
    background: #cccccc;
    position: absolute;
    top: -100px;
    left: -100px;
} 
```

发生的情况是，如果一个人悬停在由 after 创建的内容上，它也会使子菜单显示块。换句话说，悬停其他 LI 或 AFTER 内容被确认为悬停 LI。我将如何阻止它，所以它只在悬停 ACTUAL LI 时才显示块，而不是使用 AFTER 创建的内容。

我想了想：`li:hover:not(:after) > ul { display: none; }`但没有奏效……

也试过了：`li:after:hover > ul`但也没有用。

对此有什么想法吗？这可能看起来微不足道，但它会导致我的设计出现一些问题，因此需要尽快停止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:46:07.830

正如您所观察到的，`:hover`当将鼠标悬停在其内容（包括后代和伪元素）上时，将触发元素上的样式。但是，您不能阻止`:hover`元素上的样式应用于其`:after`伪元素，也不能`:not()`用于选择`:after`伪元素（[规范](http://www.w3.org/TR/selectors/#negation)明确禁止这样做）。

这是设计使然，因此唯一的解决方法是不使用`:after`，而是使用 JavaScript 生成一些其他元素，您可以将其附加到`li`并取消`:hover`效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T15:59:12.817

实际上，可以使用属性“pointer-events”并将其分配给伪元素 :after 或 :before 中的 none 。

所以它会是 -> 指针事件：无；在伪元素中。

# printing - 是否存在网络打印机的标准协议？

> ID：11275824
> 
> 赞同：1
> 
> 时间：2012-06-30T16:43:36.087
> 
> 标签：printing, network-protocols, network-printers

是否存在网络打印机的标准协议？有的网络打印机需要安装驱动才能使用... 有没有一些网络打印机不用安装额外的驱动就可以使用的？毕竟，当我们将笔记本电脑的网线连接到路由器时，我们不需要安装驱动程序（任何操作系统都已经包含驱动程序）。

是否有任何与网络打印机通信协议相关的开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:58:35.983

标准协议是[LPD](http://www.ietf.org/rfc/rfc1179.txt)或[IPP](https://www.rfc-editor.org/rfc/rfc2911)协议。

如果您需要通过网络与打印机通信，您可以将其连接到将数据包转换为 USB/LPT 命令的设备，或者将其连接到 linux/windows PC 并通过在该操作系统上运行的 LPD 服务进行打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-18T14:01:28.580

[IPP Everywhere](https://www.pwg.org/ipp/everywhere.html)尽力满足您的要求。

> 一种 PWG 标准，允许个人计算机和移动设备在不使用供应商特定软件的情况下查找并打印到联网打印机和 USB 打印机。

# mysql - MySQL 从分配自动增量 ID 的表插入并在第三个表中更新 FK

> ID：11275849
> 
> 赞同：1
> 
> 时间：2012-06-30T16:46:19.713
> 
> 标签：mysql, insert, foreign-keys, last-insert-id

我有 3 张桌子

```
old_customers
id   name
 5   Mario
13   John
..   ...

new_customers
id   name   address
 7   Luigi  Roma
..   ...    ...

orders
id   customer_id
 1   5
 2   7
 3   13
..   .. 
```

我想复制`old_customers`给`new_customers`他们分配一个新的自动增量 id 并更新订单外键`customer_id`。
如何在一个简单的 MySQL 查询中同时执行 INSERT 和 UPDATE？

一个基本的 psudo-sql 想法

```
INSERT INTO new_customers (name) SELECT name FROM old_customers
AND
UPDATE orders SET customer_id=LAST_INSERT_ID() WHERE customer_id=old_customers.id 
```

* * *

一个星期后 ...

感谢收到的帮助，这是开发的 MySQL 解决方案：
创建一个声明 CURSOR 的 PROCEDURE，INSERT+UPDATE 在循环中获取结果

```
DELIMITER //

CREATE PROCEDURE move_costumers()
BEGIN
  DECLARE fetched_id INT(3);
  DECLARE fetched_name VARCHAR(50);
  DECLARE my_cursor CURSOR FOR SELECT id,name FROM old_customers;

  OPEN my_cursor;  
  BEGIN
    DECLARE EXIT HANDLER FOR NOT FOUND BEGIN END; 
    LOOP
      FETCH my_cursor INTO fetched_id,fetched_name; 
      INSERT INTO new_customers (name) VALUES (fetched_name);
      UPDATE orders SET orders.customer_id = LAST_INSERT_ID() 
        WHERE orders.customer_id = fetched_id;
    END LOOP;
  END;
  CLOSE my_cursor;
END// 
```

这是一个没有控制变量和标签的循环，正如我在[Simple Cursor Traversal 2中发现的那样](http://forge.mysql.com/tools/tool.php?id=186)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:02:00.777

你为什么不写一个[udf](http://dev.mysql.com/doc/refman/5.0/en/adding-functions.html)，它会帮助你实现你的要求。

为此目的的程序将是这样的::

按照步骤 ：：

1) 获取 new_customer 表中使用的最大 id，例如。

```
(Select max(id) into v_curr_id from new_users group by user_id) 
```

并将其作为 v_curr_id 存储在变量中。2) 创建一个游标，它迭代并读取 old_customer 的每一行，并每次将其存储到变量 v_old_cust_id, v_old_custname 3) 在游标内部：增加 v_curr_id 并在 new_cust 表中插入一个新行，其中 cust_id 为 v_curr_id，名称为v_old_custname。例如

```
insert into new_customers(id, name) values (v_curr_id,v_old_custname); 
```

然后像这样更新 order_table

```
 update order_table set cust_id = v_curr_id where cust_id=v_old_custname; 
```

4）创建后，您只需调用该过程

```
call my_proc() 
```

有关语法参考，请访问 [cursor_example](http://www.java2s.com/Tutorial/MySQL/0240__Cursor/0060__Fetch.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:57:53.223

UDF？来吧...

只需将旧客户数据复制到 new_customer 表中，将 old_id 添加为一列，以便您可以这样更新：

```
INSERT INTO new_customers (name,old_id) SELECT name, id FROM old_customers

UPDATE orders o
SET customer_id = (select id form new_customers nc where nc.old_id = o.id) 
```

带光标的 Proc 会很慢...

# android - 在冰淇淋三明治上测试姜饼布局

> ID：11275850
> 
> 赞同：1
> 
> 时间：2012-06-30T16:46:24.757
> 
> 标签：android, layout, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我正在创建一个在果冻豆之前可以在 Froyo 上运行的应用程序。我有两种用于 ICS 及以上的布局，一种用于 Gingerbread 和 Froyo。

我在 ICS 上的设备上测试我的应用程序，所以我看到了 ICS 布局，但我想测试我的其他布局。

我怎么能做到这一点？我想我必须在 style.xml 或 androidManifest 中添加一个选项，但我不确定。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:54:44.590

如果你想测试你的姜饼布局但只有一个 ICS 设备，你可以简单地重命名你的布局文件夹，这样它就会选择 ICS 上的姜饼布局。切换`layout-v10`和`layout-v15`文件夹的名称，它将在您的 v15 设备上加载您的 v10 布局。

此外，您可以使用模拟器（运行 2.3.3）来测试您的姜饼布局。这将允许您制作多个具有不同屏幕尺寸的模拟器，并查看您的应用在不同设备上的外观。您还可以使用 SD 卡状态、硬件键盘与软键盘等测试其他内容，以确保您的应用程序适用于不同的硬件配置。

# xml - XML解析功能需要几分钟来尝试解析文档然后抛出异常，可以加快速度吗？

> ID：11275860
> 
> 赞同：0
> 
> 时间：2012-06-30T16:48:19.477
> 
> 标签：xml, xml-parsing, xerces, xalan

不幸的是，我不得不向 Xalan 传递一个 XML 文档来尝试解析我无法保证是 XML 文档。在一种情况下，用户已经输入了 HTML 文档。在某些情况下，这会导致 XalanDefaultParsedSource::create(...) 在最终引发异常之前花费一分钟。如何减少尝试解析和加快发现它不是有效 HTML 文档这一事实的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:42:05.010

花费这么长时间的最可能原因是它正在从 Web 获取内容（例如 DTD）；很可能它正在请求 W3C DTD，例如 XHTML DTD。W3C 故意非常缓慢地响应此类请求，因为他们的服务器无法处理负载。答案是使用实体解析器来拦截对这些 DTD 的请求。

# c - 未定义对“GlewInit”的引用 - OpenGL

> ID：11275866
> 
> 赞同：9
> 
> 时间：2012-06-30T16:49:23.540
> 
> 标签：c, linux, opengl, glut, freeglut

尝试制作可执行文件时出现此错误，代码编译正确，但是当我点击 make 命令时，我收到以下错误消息：

```
gcc -c helloworld.c
lewis@lewis-desktop ~/Desktop/Dev/gl $ make
gcc -o hello-gl helloworld.o -L/usr/X11R6/lib -lGL -lglut -lGLEW -lm
helloworld.o: In function `Initialize':
helloworld.c:(.text+0x55): undefined reference to `GlewInit'
collect2: ld returned 1 exit status
make: *** [helloworld] Error 1 
```

我正在运行Linux Mint 13，我认为这与我的makefile有关，我对它们了解不多，所以我一起破解了一个并在网上找到了一些代码：

```
GL_INCLUDE = /usr/X11R6/include
GL_LIB = /usr/X11R6/lib
GL_GLEW = /user/include

helloworld: helloworld.o
    gcc -o hello-gl $^ -L$(GL_LIB) -lGL -lglut -lGLEW -lm

.c.o:
    gcc -c -o $@ $< -I$(GL_INCLUDE)

clean:
    rm -f hello-gl hello-gl-dummy hello-gl.o util.o hello-gl-dummy.o 
```

我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#define WINDOW_TITLE_PREFIX "Hello, World!"

int CurrentWidth = 600,
    CurrentHeight = 400,
    WindowHandle = 0;

void Initialize(int, char*[]);
void InitWindow(int, char*[]);
void ResizeFunction(int, int);
void RenderFunction(void);

int main(int argc, char* argv[])
{
    Initialize(argc, argv);

    glutMainLoop();

    exit(EXIT_SUCCESS);
        return 0;
}

void Initialize(int argc, char* argv[])
{
    GLenum GlewInitResult;
    InitWindow(argc, argv);
        GlewInitResult = GlewInit();
        if (GLEW_OK != GlewInitResult) {
            fprintf(stderr, "ERROR: %s\n", glewGetErrorString(GlewInitResult));
            exit(EXIT_FAILURE);
        }

    fprintf(
        stdout,
        "INFO: OpenGL Version: %s\n",
        glGetString(GL_VERSION)
    );

    glClearColor(0.2f, 1.0f, 0.8f, 0.3f);
}

void InitWindow(int argc, char* argv[])
{
    glutInit(&argc, argv);

    glutInitContextVersion(4, 0);
    glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
    glutInitContextProfile(GLUT_CORE_PROFILE);

    glutSetOption(
        GLUT_ACTION_ON_WINDOW_CLOSE,
        GLUT_ACTION_GLUTMAINLOOP_RETURNS
    );

    glutInitWindowSize(CurrentWidth, CurrentHeight);

    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

        char *states[] = {"Hello", "My", "Name", "Is", "Lewis"};

    WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX);

    if(WindowHandle < 1) {
        fprintf(
            stderr,
            "KERN_ERROR: Could not create a new rendering window.\n"
        );
        exit(EXIT_FAILURE);
    }

    glutReshapeFunc(ResizeFunction);
    glutDisplayFunc(RenderFunction);
}

void ResizeFunction(int Width, int Height)

    {
        /*captures the resize data from the OS and assigns it to the global
         variable CURRENT_WIDTH & CURRENT_HEIGHT */

    CurrentWidth = Width;
    CurrentHeight = Height;
    glViewport(0, 0, CurrentWidth, CurrentHeight);
}

void RenderFunction(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    /*the next line takes the data from the back-buffer to the screen */

    glutSwapBuffers();
    glutPostRedisplay();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:00:39.873

GLEW 函数的名称应以“glew”开头，而不是“Glew”。

所以它是

```
GlewInitResult = glewInit(); 
```

C 区分大小写，所有与 OpenGL 相关的库通常以小写字母开头的函数名称。

# ruby - 运行需要包的旧版本的程序

> ID：11275867
> 
> 赞同：0
> 
> 时间：2012-06-30T16:50:01.803
> 
> 标签：ruby, gem

我想运行一个带有 oauth 演示的程序，它给出了这个错误：

```
/Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/spec_set.rb:88:in `materialize': Could not find crack-0.1.8 in any of the sources (Bundler::GemNotFound)
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/spec_set.rb:82:in `map!'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/spec_set.rb:82:in `materialize'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:107:in `specs'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:152:in `specs_for'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:141:in `requested_specs'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/environment.rb:23:in `requested_specs'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:11:in `setup'
from /Library/Ruby/Gems/1.8/gems/bundler-1.0.22/lib/bundler.rb:110:in `setup'
from example.rb:2 
```

我发现运行它需要crack-0.1.8。跑的时候`gem list`发现我电脑里的破解版是0.3.1，请问怎么解决这个问题呢？（新版和旧版不兼容？我一头雾水。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:06:40.630

只需在中指定此 gem 的版本 `Gemfile`

```
gem crack, '0.1.8' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:12:27.737

`Crack 0.1.8`可在 ruby​​gems.org 获得：

*   [在 ruby​​gems.org 上破解](http://rubygems.org/gems/crack)
*   [在 ruby​​gems.org 上破解 0.1.8](http://rubygems.org/gems/crack/versions/0.1.8)

和

```
gem install crack -v 0.1.8 
```

应该可以安装您需要的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:00:49.510

Run `bundle install`，它将安装 Gemfile 中指定的所有所需 Gem 的正确版本。之后它应该可以正常运行。

# linux - 如何在 AWS 上的 Amazon Linux AMI 中自动启动 node.js 应用程序？

> ID：11275870
> 
> 赞同：49
> 
> 时间：2012-06-30T16:50:34.580
> 
> 标签：linux, node.js, amazon-ec2, amazon-web-services

是否有简要指南来说明如何在实例启动和运行时启动应用程序？如果它是通过安装的服务之一，`yum`那么我想我可以用`/sbin/chkconfig`它来将它添加到服务中。（为了确定，它是正确的吗？）

但是，我只想运行没有通过`yum`. 要运行 node.js 程序，我必须`sudo node app.js`在系统启动时在主目录中运行脚本。

我不习惯 Amazon Linux AMI，所以我很难找到一种“正确”的方式来在每次启动时自动运行一些脚本。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-30T17:19:26.580

一种方法是创建一个新贵的工作。这样，您的应用程序将在 Linux 加载后启动，如果它崩溃将自动重新启动，您可以通过`sudo start yourapp`//启动/停止`sudo stop yourapp`/重新启动它`sudo restart yourapp`。

以下是开始步骤：

1) 安装 upstart 实用程序（如果您使用标准的 Amazon Linux AMI，可能会预先安装）：

```
sudo yum install upstart 
```

对于 Ubuntu：

```
sudo apt-get install upstart 
```

2）为您的节点应用程序创建新贵脚本：

在`/etc/init`添加文件中添加`yourappname.conf`以下代码行：

```
#!upstart
description "your app name"

start on started mountall
stop on shutdown

# Automatically Respawn:
respawn
respawn limit 99 5

env NODE_ENV=development

# Warning: this runs node as root user, which is a security risk
# in many scenarios, but upstart-ing a process as a non-root user
# is outside the scope of this question
exec node /path_to_your_app/app.js >> /var/log/yourappname.log 2>&1 
```

3）启动您的应用程序`sudo start yourappname`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-26T04:43:20.847

您可以使用 forever-service 将节点脚本配置为服务并在引导期间自动启动。以下命令将做必要的，

```
npm install -g forever-service
forever-service install test 
```

这将通过永远将当前目录中的 app.js 配置为服务。每次系统重启时服务都会自动重启。此外，当它停止时，它会尝试优雅地停止。此脚本也提供[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)脚本。

Github 网址：[https ://github.com/zapty/forever-service](https://github.com/zapty/forever-service)

截至目前，forever-service 支持 Amazon Linux、CentOS、Redhat 对其他 Linux 发行版的支持，Mac 和 Windows 正在开发中。

注意：我是永远服务的作者。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-30T17:10:39.593

您的快速解决方案是从以下位置启动您的应用程序`/etc/rc.local`；只需在此处添加您的命令。

但是如果你想走优雅的路，你必须将你的应用程序打包到一个 rpm 文件中，有一个启动脚本，`/etc/rc.d`以便你可以`chkconfig`在你的应用程序上使用，然后在你的实例上安装 rpm。

也许[这个](http://www.novell.com/coolsolutions/feature/11256.html)或[这个](http://fedoraproject.org/wiki/How_to_create_an_RPM_package)帮助。（或者只是谷歌“创建 rpm 包”）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-23T01:59:06.607

您可以创建一个可以启动和停止您的应用程序的脚本并将其放在 /etc/init.d 中；使脚本遵守 chkconfig 的约定（如下），然后使用 chkconfig 将其设置为在其他服务启动时启动。

您可以从 /etc/init.d 中选择一个现有脚本作为示例；[本文](https://access.redhat.com/site/solutions/7238)描述了要求，基本上是：

*   标识所需外壳的可执行脚本（即#!/bin/bash）
*   # chkconfig: where 通常是 345 形式的注释，startprio 表示服务的启动顺序，stopprio 是服务停止的顺序。我通常会选择一个已经存在的类似服务并将其用作这些值的指南（即，如果您有一个与 Web 相关的服务，则从与 httpd 相同的级别开始，具有相似的启动和停止优先级）。

设置好脚本后，您可以使用

```
 chkconfig --add yourscript 
 chkconfig yourscript on 
```

你应该很高兴。（某些发行版可能要求您手动将脚本符号链接到 /etc/init.d/rc.d，但我相信您的 AWS 发行版会在您启用脚本时为您执行此操作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-06T00:53:46.347

我的 Amazon Linux 实例在 Ubuntu 上运行，我使用 systemd 进行设置。

首先，您需要创建一个`<servicename>.service`文件。（在我的情况下`cloudyleela.service`）

```
sudo nano /lib/systemd/system/cloudyleela.service 
```

在此文件中键入以下内容：

```
[Unit]
Description=cloudy leela
Documentation=http://documentation.domain.com
After=network.target

[Service]
Type=simple
TimeoutSec=0
User=ubuntu
ExecStart=/usr/bin/node /home/ubuntu/server.js
Restart=on-failure

[Install]
WantedBy=multi-user.target 
```

在此应用程序中，`node`应用程序已启动。您将需要一个完整的路径。我配置了如果出现问题，应用程序应该简单地重新启动。默认情况下，亚马逊使用的实例没有用户密码。

从磁盘重新加载文件，然后您可以启动您的服务。您需要启用它以使其作为服务激活，该服务会在启动时自动启动。

```
ubuntu@ip-172-31-21-195:~$ sudo systemctl daemon-reload
ubuntu@ip-172-31-21-195:~$ sudo systemctl start cloudyleela
ubuntu@ip-172-31-21-195:~$ sudo systemctl enable cloudyleela
Created symlink /etc/systemd/system/multi-user.target.wants/cloudyleela.service → /lib/systemd/system/cloudyleela.service.
ubuntu@ip-172-31-21-195:~$ 
```

一个很棒的 node.js systemd 教程可以[在这里找到](https://nodesource.com/blog/running-your-node-js-app-with-systemd-part-1/)。

# 如果您运行网络服务器：

您可能会在端口 80 上运行您的网络服务器时遇到一些问题。最简单的解决方案实际上是**在不同的端口（例如 4200）上运行您的网络服务器，然后将该端口重定向到端口 80。**您可以使用以下命令完成此操作：

```
sudo iptables -t nat -A PREROUTING -i -p tcp --dport 80 -j REDIRECT --to-port 4200 
```

不幸的是，这**不是持久性**的，因此每当您的服务器重新启动时，您都必须重复它。**更好的方法是在我们的服务脚本中也包含这个命令：**

1.  `ExecStartPre`添加端口转发
2.  `ExecStopPost`删除端口转发
3.  `PermissionStartOnly`用 sudo power 做到这一点

所以，像这样：

```
[Service]
...
PermissionsStartOnly=true
ExecStartPre=/sbin/iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 4200
ExecStopPost=/sbin/iptables -t nat -D PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 4200 
```

不要忘记重新加载并重新启动您的服务：

```
[ec2-user@ip-172-31-39-212 system]$ sudo systemctl daemon-reload
[ec2-user@ip-172-31-39-212 system]$ sudo systemctl stop cloudyleela
[ec2-user@ip-172-31-39-212 system]$ sudo systemctl start cloudyleela
[ec2-user@ip-172-31-39-212 system]$ 
```

# 对于微服务*（2020 年 12 月更新）*

前面提到的解决方案提供了很大的灵活性，但设置它确实需要一些时间。对于每个额外的应用程序，您都需要再次完成整个过程。当您安装第 5 个节点应用程序时，您肯定会开始怀疑：*“必须有一个快捷方式”*。

PM2 的优势在于它只需安装一项服务。接下来是管理实际应用程序的 PM2。

甚至 PM2 的初始设置也很容易，因为它会自动为您安装 pm2 服务。

```
npm install pm2 -g 
```

添加新服务更加容易：

```
pm2 start index.js --name "foo"`. 
```

当一切都启动并运行时，您可以保存设置，让它在重新启动时自动启动。

```
pm2 save 
```

如果您想了解所有正在运行的节点应用程序，您可以运行`pm2 list`

PM2 还提供了一个在线（基于 Web）仪表板来远程监控您的应用程序。不过，您可能需要许可证才能访问某些仪表板功能（恕我直言，这有点高估了）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-26T00:06:17.223

使用 Elastic Beanstalk :) 提供对自动缩放、SSL 终止、蓝/绿部署等的支持

如果您想要基于 RedHat 的 linux 发行版的咸 sysadmin 方式（Amazon Linux 是 RedHat 的一种），请学习`systemd`，如上面答案中@bvdb 所述：

[https://en.wikipedia.org/wiki/Systemd](https://en.wikipedia.org/wiki/Systemd)

按照描述在 EC2 实例上设置所有内容，创建自定义 AMI 的快照，并将此自定义 AMI 用作托管应用程序的 EC2 实例的基础。这样您就不必多次进行所有这些设置。如果您在具有正常运行时间要求的生产环境中运行，您可能也想熟悉负载均衡器。

或者，是的，正如@bvdb 所提到的，您也可以使用`pm2`与`systemd`. 尽管我认为`pm2`跨多个 EC2 实例运行您的应用程序没有帮助，但绝对推荐用于有正常运行时间要求的生产环境。

所有这些都是一个非常陡峭的学习曲线。由于 OP 似乎对所有这些都是新的，Elastic Beanstalk、Google App Engine 和其他是让代码在云中运行而无需所有这些的好方法。

这些天我在 TypeScript 中进行开发，大多数事情都部署到云中的无服务器函数执行，并且根本不需要考虑包安装或应用程序启动。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-26T18:50:48.293

您可以使用`screen`. 运行`crontab -e`并添加这一行：

```
@reboot  screen -d -m bash -c "cd /home/user/yourapp/; node app" 
```

* * *

## 回答 #8

> 赞同：-12
> 
> 时间：2012-06-30T17:17:42.837

[一直](https://github.com/nodejitsu/forever/)在 AWS 上使用，它做得很好。安装使用

```
 [sudo] npm install forever -g 
```

添加应用程序使用

```
 forever start path_to_application 
```

并停止应用程序使用

```
 forever stop path_to_application 
```

[这](http://www.hacksparrow.com/keep-node-js-script-running-after-logging-out-from-shell.html)是一篇有用的文章，帮助我进行了设置。

# ruby-on-rails - Rails：在视图中执行此操作是否安全？

> ID：11275877
> 
> 赞同：0
> 
> 时间：2012-06-30T16:52:55.397
> 
> 标签：ruby-on-rails, ruby, security

我有一个`tag`带有属性的模型`title (string)`。

一个`tag`belongs_to`document`具有`has_many :throught`关联的模型。

在 document#show 视图中，我需要显示与该文档关联的所有标签，所以我这样做：

```
%p= raw @document.tags.map{|t| link_to t.title.prepend('#'), t}.join(', ') 
```

考虑到用户可以创建标签，这是否安全？

如果它不安全，我怎样才能达到相同的结果？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:01:02.403

一般来说，所有逻辑（或尽可能多的）都应该转移到助手或模型中。我不会说这是“安全的”或“不安全的”，但总的来说这样做是好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:05:28.293

是的，标签的标题在成为链接的内容之前会被转义，所以即使其中有 HTML，它也会被渲染，而不是原始输出。在此处不转义*将*输出的是由 产生的字符串，这`join`很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T23:46:29.017

在这种情况下，它是安全的，因为它`link_to`会逃避它的论点，但为什么要冒险（也许块的内部将在几个月内被修改，等等......），使用`safe_join`：

```
%p= safe_join @document.tags.map{|t| link_to t.title.prepend('#'), t}, ', ' 
```

或者使用我的[`rails_join`](https://github.com/marcandre/rails_join)“宝石”，您可以`join`安全地进行操作，而无需`raw`.

# objective-c - 其他类委托的返回值

> ID：11275880
> 
> 赞同：2
> 
> 时间：2012-06-30T16:53:05.460
> 
> 标签：objective-c, xcode, uiscrollview

我创建了一个类（UIView），里面有一个 UIScrollview。通过委托“scrollViewDidEndDecelerating”，我可以获得 3 个结果（1、2、3）。如何将此结果发送到主 ViewController？

**ViewController 标头**

```
#import "Picker.h" 
```

**视图控制器实现**

```
picker = [[Picker alloc]initWithFrame:CGRectMake(10, 10, 300, 300)];
[self.view addSubview:picker]; 
```

**选择器实现**

```
(...)

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {

    if (scrollView.contentOffset.x <= 100) {

        int result = 1;

    } else if (scrollView.contentOffset.x > 100 && scrollView.contentOffset.x <= 200) {

        int result = 2;

    } else {

        int result = 3;

    }
}

(...) 
```

我必须创建一个 UIView 类，因为它除了 Scrollview 之外还有其他东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:03:50.307

`Picker`你可以在你的类中定义一个属性：

```
@property (nonatomic, assign) MyViewController* controller; 
```

并像这样初始化 Picker 的实例：

```
picker = [[Picker alloc]initWithFrame:CGRectMake(10, 10, 300, 300) andController:self]; 
```

那么你可以这样做：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {

    [self.controller myMethod]; 
    ... 
```

这被称为依赖注入，如果在两个类之间创建如此强的耦合是有意义的，那就可以了。您可以创建一个委托协议来为此类交互提供更完整的状态。

您拥有的另一个选项可以避免耦合，它是通过`NSNotificationCenter`.

在这种情况下，一个对象（您的控制器）将注册以观察`PickerScrollViewChanged`通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMethod:) name:kPickerScrollViewChanged object:nil]; 
```

a`picker`会从它的方法发送这样的通知`scrollViewDidEndDecelerating`：

```
[[NSNotificationCenter defaultCenter] postNotificationName:kPickerScrollViewChanged object:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:06:36.973

我建议您创建一个`PickerDelegate`带有将所需值返回给主视图控制器的方法的协议。

```
@protocol PickerDelegate <NSObject>

-(void)picker:(Picker *)picker didScrollToResult:(NSInteger)result;

@end 
```

Picker 有一个属性：

```
@property (nonatomic, assign) id<PickerDelegate> delegate; 
```

然后你可以将你的视图控制器设置为选择器委托使用`picker.delegate = self;`

在 Picker UIView 的滚动视图委托方法中，您可以使用以下方法将消息传递给视图控制器：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.x <= 100) {
        int result = 1;
    } else if (scrollView.contentOffset.x > 100 && scrollView.contentOffset.x <= 200) {
        int result = 2;
    } else {
        int result = 3;
    }
    [self.delegate picker:self didScrollToResult:result];
} 
```

视图控制器需要实现选择器委托方法：

```
-(void)picker:(Picker *)picker didScrollToResult:(NSInteger)result {
    // View controller now has result variable to action upon.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:07:51.223

在您的视图控制器类中，您应该将观察者（注册通知）添加到 viewDidLoad 方法中。在里面`scrollViewDidEndDecelerating`你应该发布一个通知。

因此，在 viewDidLoad 中：

```
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(scrollViewZoomed:)
 name:@"scrollViewDidZoom"
 object:nil]; 
```

在你的 scrollViewDidEndDecelerating 里面，

```
[[NSNotificationCenter defaultCenter]
 postNotificationName:@"scrollViewDidZoom"
 object:self]; 
```

不要忘记在不需要时移除观察者。

# css - CSS：格式化多个 DIV 的最佳方法（包装器 vs 类 vs 每个在 id 中指定）

> ID：11275881
> 
> 赞同：0
> 
> 时间：2012-06-30T16:53:10.013
> 
> 标签：css

我试图在一个页面上居中多个 div 元素。但是有些不需要居中，所以我已经排除了使用 body 元素。我想有三种方法可以做到这一点：

第一种是使用容器，但是这为纯布局样式添加了一个元素，并且不是很语义化。

```
<div id="notcentred">
<div id="container">
  <div id="centrediv1"></div>
  <div id="centrediv2"></div>
</div> 
```

第二种方法是创建一个中心类，并将其简单地添加到需要居中的每个元素中。

```
<div id="notcentred">
<div id="centrediv1" class="centre"></div>
<div id="centrediv2"class="centre"></div> 
```

第三个是将中心 CSS 添加到每个 DIV 的 ID。

```
<div id="notcentered">
<div id="centrediv1"></div>
<div id="centrediv2"></div> 
```

我认为 2 号是最好的，因为它是最容易管理的，也是最语义化的，但如果有什么我不知道的，欢迎选择。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:15:17.173

这是设计的确切用途类。所以，真的，使用理想主义的 CSS 第三个是错误的。前两个绝对没问题。

虽然，如果您希望所有 div 都相似，将一些 div 放入包装器 div 可能会使其他设置的样式变得更加困难。第二个还允许您更轻松地将居中的 div 分散在非居中的 div 中。第二个元素也更少，这将使您的代码更易于阅读！

考虑到这一点，我会推荐第二个。

# php - PHP strlen（str）不起作用

> ID：11275883
> 
> 赞同：-1
> 
> 时间：2012-06-30T16:53:35.160
> 
> 标签：php, html, forms, strlen

我的网站上有一个表单，它从文本区域获取输入，如果它是空的 (strlen = 0) 则以一种方式处理它，如果它有文本则另一种方式处理它。这是表格的一部分：

```
<form name='contact' action='contact.php' method='post'>
    ...
    Message*<br />
    <textarea name='msg' rows='10' cols='70' maxlength='2048'><?php echo $msg ?></textarea><br />
    ...
    <input type='submit' value='Send!' id='subby' name='fatk' style='height:60px; width:300px;' />
</form> 
```

现在 PHP 代码：

```
$msg = isset($_POST['msg'])?safeString($_POST['msg']):'';
$msg = substr($msg,0,2048);
if (strlen($msg) == 0)
    echo "<h1>Test failed</h1>";
else { ... } 
```

这是`safestring(str)`方法：

```
function safeString($str) {
    htmlentities($str);
    htmlspecialchars($str);
} 
```

每次我提交表单时，无论我在 msg textarea 中输入多少或多少，它总是说它是空的（通过回显 TEST FAILED）。另外，你知道我应该在我的`safestring()`函数中添加什么以使我的表单更安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T16:56:03.230

您*没有*从`safeString`.

除此之外，它的`safeString`作用是多余的（`htmlentities`是 的超集`htmlspecialchars`，后者起到了防止 XSS 的作用）。

最后，你真的*不*应该在接受输入时进行这种清理，而应该只在产生输出时进行。

放在一起，你的代码应该看起来更像

```
$msg = isset($_POST['msg']) ? $_POST['msg'] :'';
if ($msg == '')
    echo "<h1>Test failed</h1>";
else {
    echo "Received value: ".htmlspecialchars($msg);
} 
```

您还应该*明确*指定输入的编码（参见 的第三个参数`htmlspecialchars`）。

# c# - SignalR 找不到 AddToGroup 方法

> ID：11275885
> 
> 赞同：0
> 
> 时间：2012-06-30T16:53:41.770
> 
> 标签：c#, asp.net-mvc-3, signalr

我正在构建一个应该向特定用户发送消息的集线器，这个[问题](https://stackoverflow.com/questions/9468513/use-signalr-to-have-a-facebook-like-notification-system)和这个[问题](https://stackoverflow.com/questions/10089386/signalr-push-notifications-to-all-browser-instances-of-single-authenticated-user)会很好地工作，只是我找不到 AddToGroup 方法，我知道 0.5 版发生了很多变化，这是其中之一吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:59:07.107

是的，`Groups`现在类上有一个属性`Hub`，您可以使用它来添加用户。该[文档](https://github.com/SignalR/SignalR/wiki/Hubs)还说明了这一点：

```
public class MyHub : Hub, IDisconnect
{
    public Task Join()
    {
        return Groups.Add(Context.ConnectionId, "foo");
    }

    public Task Send(string message)
    {
        return Clients["foo"].addMessage(message);
    }

    public Task Disconnect()
    {
        return Clients["foo"].leave(Context.ConnectionId);
    }
} 
```

# android - 如何使图像填充RelativeLayout背景而不拉伸

> ID：11275897
> 
> 赞同：23
> 
> 时间：2012-06-30T16:54:53.777
> 
> 标签：android, background, android-relativelayout

在我的 Android 项目中，我不太确定如何让我的背景图像填充`RelativeLayout`XML 中的整个根元素，即屏幕的大小。我想确保这适用于所有纵横比，因此图像将根据需要垂直或水平剪辑。有人知道如何轻松做到这一点吗？我只看到有关`ImageView`s 和`Button`s 的问题，但不是真正的通用`View`s。

我的 XML 文件目前：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/enclosing_rl"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:fitsSystemWindows="false">
<!-- Other elements -->
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-30T17:24:02.953

除了将您的图像变成九个补丁之外，我认为这是不可能的。你可以做的是——

1.  添加一个`ImageView`作为你的第一个视图`RelativeLayout`。
2.  设置`layout_centerInParent`为`true`。
3.  将`layout_width`和`layout_height`设置为`match_parent`。
4.  然后设置`scaleType`为`centerCrop`。

这将确保图像填满屏幕而不会出现任何失真，但根据屏幕尺寸/方向，图像的顶部/底部或左侧/右侧可能会被截断。

```
<ImageView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        android:scaleType="centerCrop"
            android:src="@drawable/background" /> 
```

中的任何其他视图都`RelativeLayout`将出现在 的顶部`ImageView`，只要它是 中的第一个视图`RelativeLayout`（当您在 xml 中时）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-30T17:12:46.903

在您的 res/drawable 文件夹中创建一个位图可绘制 XML 资源：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/background"
    android:tileMode="repeat" /> 
```

使用该drawable作为背景而不是@drawable/background

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-26T06:48:43.563

根据这个[答案](https://stackoverflow.com/a/11511280/2652368)如果你想`ImageView`填写你的`RelativeLayout`，使用`align`参数`ImageView`。

您可以将所有视图放入 a`LinearLayout`并将`align`参数设置为背景`ImageView`：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

     <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/my_background"
        android:scaleType="centerCrop"
        android:layout_alignTop="@+id/my_views"
        android:layout_alignBottom="@+id/my_views"

        />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/my_views"
        android:orientation="vertical" >
    <!-- stuff -->
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T07:07:47.377

其聪明且 100% 有效的答案是设置 image view 的属性 scaleType ！

```
 android:scaleType="fitCenter" 
```

# jquery - 如何在具有随机数的特定 div 之前附加某些内容

> ID：11275898
> 
> 赞同：4
> 
> 时间：2012-06-30T16:55:36.167
> 
> 标签：jquery

我想在一个 div 里面附加一个 div，它里面有很多 div。我的代码如下所示：

```
<div id="main">
<div class="random no"></div>
<div class="random no"></div>
<div class="random no"></div>
<div class="random no"></div>
<div class="mydiv"></div>
</div> 
```

我的 jQuery 代码是：

```
$("#main").append("<div class='random no'> </div>"); 
```

但它附加在 div“main”的最后一个孩子之后。如何在之前插入那个div `#mydiv`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T16:56:45.357

```
$("<div class='random no'> </div>").insertBefore("#main .mydiv"); 
```

**[演示](http://jsfiddle.net/jMaQq/1/)**

**或者**

```
$("#main .mydiv").before("<div class='random no'> </div>"); 
```

**[演示](http://jsfiddle.net/jMaQq/5/)**

**或者**

```
$('#main').append("<div class='random no'> Random no</div>").after($(".mydiv"))​; 
```

**[演示](http://jsfiddle.net/jMaQq/7/)**

**相关参考：**

*   **[后（）](http://api.jquery.com/after)**

*   **[。前（）](http://api.jquery.com/before)**

*   **[.insertBefore()](http://api.jquery.com/insertBefore)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:58:14.047

```
$("#main").find(".mydiv").before("#yourDivToBeInserted"); 
```

# php - BUG：数组键的 PHP 前增量和后增量变量

> ID：11275902
> 
> 赞同：0
> 
> 时间：2012-06-30T16:56:18.943
> 
> 标签：php, bug-tracking

```
<?php
$options = array();
$currentYear = 2012;

while($currentYear < (2012 + 3) ) {
    $options[$currentYear++] = $currentYear;
}

var_dump($options);
?> 
```

**预期输出：**

> ```
> array(3) {
>      [2012]=> int(2012)
>      [2013]=> int(2013)
>      [2014]=> int(2014)
> } 
> ```

**泛型理论：**先执行一个赋值的RHS，然后将RHS值赋给LHS。它将在执行 RHS 之后在 LHS 中执行后增量。根据这个场景，我们可以如下解释迭代。

在第一次迭代中，RHS $currentYear 的值为 2012 并将该值分配给键为 2012 的数组选项。将变量 $currentYear 增加 1，然后继续迭代。在第二次迭代中，RHS $currentYear 的值为 2013 并将该值分配给键为 2013 的数组选项。将变量 $currentYear 增加 1，然后继续迭代。**下面这个通用编程概念发生了什么？**

**实际输出：**

> ```
>  array(3) {
>      [2012]=> int(2013)
>      [2013]=> int(2014)
>      [2014]=> int(2015)
>  } 
> ```

***如果有人能提出更好的解释，那就太好了，非常感谢。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:56:19.927

**上述理论是错误的。** [在 PHP 中，数组的优先级高于 increment/decrement](http://uk3.php.net/manual/en/language.operators.precedence.php)。因此 PHP 首先执行数组键（这就是数组键的第一个元素出现为 2012 的原因），然后进行赋值。

在这种情况下，PHP 将数组键的`$currentYear`值保持为 2012 并递增 1。然后，RHS 获取`$currentYear`值并将其分配给键为 2012 的数组选项。同样，它继续迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:51:33.340

试着记住[递增/递减运算符](http://www.php.net/manual/en/language.operators.increment.php)的概念，你会更好地理解这些运算符。

后增量返回 $currentYear，然后将 $currentYear 递增 1，基于此，您的案例中发生的情况如下：

```
$currentYear = 2012;

$options[$currentYear++] = $currentYear;

/* Post-increment will return 2012 to the array, after this will increment it to 
 * 2013, so in the right side it will be 2013, then you'll get the result below. 
 * Remember that PHP analyses the code from left to right.
 */

$options[2012] == 2013; 
```

要获得预期的结果，您必须使用预增量，因为它会将 $currentYear 加一，然后返回 $currentYear。例如：

```
$currentYear = 2012;

$options[++$currentYear] = $currentYear;

/* Pre-increment will increment $currentYear first, after this will return the 
 * value to array, so $currentYear will have the same value in both sides. 
 * Like below.
 */

$options[2013] == 2013; 
```

**编辑 1**

作为您的第一个索引并且`$currentYear`必须相等，您必须使用不同的逻辑，如下所示：

```
$options = array();
$currentYear = 2012;

while($currentYear < (2012 + 3) ) {
    $options[$currentYear] = $currentYear;

    $currentYear++; // "++$currentYear" and "$currentYear += 1" will work too
} 
```

# javascript - 页面加载时触发onclick

> ID：11275904
> 
> 赞同：0
> 
> 时间：2012-06-30T16:56:23.713
> 
> 标签：javascript

我有一组带有隐藏/显示网站区域的 onclick 事件的单选按钮。onclick 还启用/禁用 spry 验证。

onclick 效果很好！但是，当页面加载并且单选按钮被标记为已单击时，不确定如何触发 onclick。

例如，用户可以选择主页上的单选按钮。然后在表单过程的后期，用户可能想要编辑他们输入的输入。然后我会检查用户在主页上选择的单选按钮。由于用户没有点击单选按钮，隐藏区域仍然保持隐藏状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:00:20.123

```
window.onready=function()
{    
    if(document.getElementById('yourRadioButtonId').checked) {
       //call your function, that you want to be triggered, as you will have the same call back function bounded for your onclick event    
} 
```

或者

```
window.onready=function()
    {    
        var radioButton=document.getElementById('yourRadioButtonId');
        if(radioButton.checked) {
           radioButton.click();
        }
    } 
```

注意：并非所有浏览器都允许以这种方式模拟事件。请参阅触发方法的 jQuery 源代码，了解如何处理所有浏览器怪癖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:04:47.030

处理这个问题的最好方法是编写一个辅助函数。稍后，这个辅助函数可以被 onClick（在单选按钮上）和 onLoad（在 body 元素上）事件调用。此函数将获取单选按钮的值，并根据结果执行操作。

例如：

```
function handleRadioButtonStateAction() {
     var radioButtons = document.getElementsByName('theRadioButtonName');
     for (var x = 0; x < radioButtons.length; x ++) {
         if (x == yourDesiredButton && radioButtons[x].checked) {
             //do action
         }
   }
} 
```

# html - 将 PHP 页面导入 Oracle APEX？

> ID：11275907
> 
> 赞同：0
> 
> 时间：2012-06-30T16:57:33.370
> 
> 标签：html, database, oracle, oracle-apex

这可以做到吗？如果可以，怎么做？~TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:45:44.523

Oracle APEX 不使用任何与 PHP 密切相关的东西来构建 HTML。您可能要做的是基于与 PHP 页面中使用的 SQL 相同的 SQL 构建页面。

# objective-c - 侧边栏演示 - replaceSubview

> ID：11275909
> 
> 赞同：4
> 
> 时间：2012-06-30T16:58:01.017
> 
> 标签：objective-c, macos, nsview, nssplitview

我将 NSSplitView 的分隔样式设置为薄，看起来很棒。 ![在此处输入图像描述](../Images/b2c4d680ad4d711235b88ca4d786c7d8.png)

但是，如果我用这行代码替换其中一个子视图

```
[self.horizontalSplitView replaceSubview:[[self.horizontalSplitView subviews] objectAtIndex:0] with:myGreatView]; 
```

分频器看起来有点糟糕，我该如何解决这个问题？

![在此处输入图像描述](../Images/6763519afbdb980acecc7d6a62d2ae7e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:42:23.333

问题是您的视图 ( `myGreatView`) 有边框。将边框类型设置为`NSNoBorder`。

```
[myGreatView setBorderType:NSNoBorder]; 
```

# php - PHP数组到XML函数

> ID：11275910
> 
> 赞同：0
> 
> 时间：2012-06-30T16:58:04.757
> 
> 标签：php, xml, json, recursion

我在 PHP 页面中收到一个 JSON 字符串：

```
$JSON = $_POST['submit'];

$Array = json_decode($JSON);

$xml = arrayToXML($Array,"","root");

echo $xml; 
```

其中[arrayToXML](http://codepad.org/MwVcDYVg)是我为此目的制作的函数。

该功能工作正常，但有几个问题我想解决：

**1.重复标签：**

假设我们有一个 JSON 字符串，例如

```
{element:[{sub1:xxxx,sub2:xxx},{sub1:xxxx,sub2:xxx},{sub1:xxxx,sub2:xxx}]} 
```

相应的 XML 就像

```
<element>

    <sub1>xxxx</sub1>
    <sub2>xxx</sub2>

</element>

<element>

    <sub1>xxxx</sub1>
    <sub2>xxx</sub2>

</element>

<element>

    <sub1>xxxx</sub1>
    <sub2>xxx</sub2>

</element> 
```

但是我的函数的递归复制了第一个标签和最后一个标签。我可以明白为什么会这样，但我无法找到解决它的方法。所以我通过 preg_replacing 重复标签解决了这个问题。有没有更好的方法来解决这个问题？这几天真的一直在想这个。

**2.缩进：**

我希望该函数以一种花哨的人类可读方式生成 xml，所以我在相邻标签之间放置了换行符，但是如何定义正确的嵌套缩进呢？

我试过这个：

```
$xml = preg_replace("/(\t*)(<\/?.+>)(<\/?.+>)/","$2\n$1\t$3",$xml); 
```

但结果完全错了。什么是正确的？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:16:12.963

正则表达式通常不适合解析和使用`xml`。PHP 有非常好的内置解析器`DOMDocument`（很棒的 libxml2 的包装器）和`SimpleXML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:37:47.063

提到第一个疑问“重复标签”，我认为您能做的最好的事情是将 JSON 字符串更改为您需要的正确结构，如果您需要多个电话号码元素，请将 JSON 字符串更改为具有多个电话号码元素，也许您可​​以执行 preg_replace 之类的操作或识别数组的结构来更改它，但这将是一种解决方法。但总的来说，我同意 Explosion Pills，你有可以用来解析该数组的工具。

# java - Spring-WS - 如何使用 Maven 插件通过 JAXB 启用 MTOM

> ID：11275912
> 
> 赞同：0
> 
> 时间：2012-06-30T16:58:07.680
> 
> 标签：java, spring, maven, jaxb, xjc

关于生成 JAXB 对象的两个问题。

如两个示例中所示配置 Jaxb 时有什么区别。

使用 Maven

```
<plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb2-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <schemaDirectory>src/main/webapp/WEB-INF/schemas</schemaDirectory>
                </configuration>
            </plugin> 
```

使用 Spring 配置文件

```
 <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="org.springframework.ws.samples.mtom.schema"/>
        <property name="mtomEnabled" value="true"/>
    </bean> 
```

上述两种配置是否实现了同样的事情？

第二个问题是如何使用 Maven 配置方法启用 MTOM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:37:18.637

它们是两种完全不同的东西。

maven 插件将在 generate-sources maven 阶段根据您的模式文件自动生成您的 jaxb 实体。

第二个配置设置 jaxb 编组器并告诉它 jaxb 实体位于该 contextPath 中。

所以本质上 Maven 是构建时间，第二个配置是运行时

你的第二个问题。MTOM与maven无关。他们让我工作的方法是下载 spring-ws 代码，那里有一个很好的示例，非常有帮助。

# c - 检测到 C 堆栈粉碎

> ID：11275920
> 
> 赞同：1
> 
> 时间：2012-06-30T16:58:39.323
> 
> 标签：c, stack, stack-overflow

我有一个函数可以计算一个单词在文件中出现的次数。现在由于某种原因它得到堆栈粉碎检测到错误，我没有看到错误。

这是代码：

```
int contar_palabra(const char *nombre_file, const char *palabra){

/*variables locales*/
FILE *file; 
char buffer[50]; 
int bytes_leidos, contador = 0, comparar, cerrar, i;    

/*Abrimos el archivo para lectura*/
file = fopen(nombre_file, "r");

/*Verificamos que se haya abierto correctamente*/
if (file == NULL){
  printf("No se pudo abrir el archivo \n");
  perror(nombre_file);
  exit(EXIT_FAILURE);
}

/*Procedemos a contar cuantas veces aparece una palabra*/
while (!feof(file)){

  bytes_leidos = fscanf(file, "%s", buffer);

  if (bytes_leidos > 0){

    /*Hacemos la comparacion*/
    comparar = strcmp(buffer, palabra);
    if (comparar == 0)
      contador++;
  }
  else if(errno == EOF)     
        printf("Error al leer alguna palabra de %s \n", nombre_file);
  else if (bytes_leidos == EOF)
    break;
}

cerrar = fclose(file);

if(cerrar == EOF){
  printf("Error: no se pudo cerra el archivo.");
}

printf("antes de retornar contador \n");
return contador; 
```

}

我使用 valgrind 试图识别错误，日志文件给了我这个：

```
 ==2252== Memcheck, a memory error detector
  ==2252== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
  ==2252== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
  ==2252== Command: ./pargrep viejo.txt
  ==2252== Parent PID: 1756
  ==2252== 
  ==2252== 
  ==2252== HEAP SUMMARY:
  ==2252==     in use at exit: 55 bytes in 1 blocks
  ==2252==   total heap usage: 7 allocs, 6 frees, 1,389 bytes allocated
  ==2252== 
  ==2252== 55 bytes in 1 blocks are still reachable in loss record 1 of 1
  ==2252==    at 0x4026864: malloc (vg_replace_malloc.c:236)
  ==2252==    by 0x40B878B: __libc_message (libc_fatal.c:138)
  ==2252==    by 0x413D09F: __fortify_fail (fortify_fail.c:32)
  ==2252==    by 0x413D049: __stack_chk_fail (stack_chk_fail.c:29)
  ==2252==    by 0x8049142: contar_palabra (in /home/alessandro/OS/Proyecto2/prueba1.0/pargrep)
  ==2252==    by 0x80489D4: main (in /home/alessandro/OS/Proyecto2/prueba1.0/pargrep)
  ==2252== 
  ==2252== LEAK SUMMARY:
  ==2252==    definitely lost: 0 bytes in 0 blocks
  ==2252==    indirectly lost: 0 bytes in 0 blocks
  ==2252==      possibly lost: 0 bytes in 0 blocks
  ==2252==    still reachable: 55 bytes in 1 blocks
  ==2252==         suppressed: 0 bytes in 0 blocks
  ==2252== 
  ==2252== For counts of detected and suppressed errors, rerun with: -v
  ==2252== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 15 from 8) 
```

奇怪的是它在返回之前打印了一条消息。我真的没有看到错误，感谢帮助。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:04:32.527

使用 plain`%s`作为格式说明符`fscanf`是非常危险的，因为您无法防止超出缓冲区末尾的写入，在您的情况下只有 50 个字节。考虑为格式说明符提供宽度修饰符，尽管当达到更复杂的宽度限制时，这将处理准确的计数。

您可能会发现逐个字符读取 ( `fgetc`) 或读取固定缓冲区 ( `fread`) 并手动检测单词分隔符会产生更简单的代码。

# java - 方法和组合java

> ID：11275925
> 
> 赞同：0
> 
> 时间：2012-06-30T16:59:17.613
> 
> 标签：java, methods, composition

我有一个带有方法的外观引擎

```
getOwner() 
```

我还有另一个名为 Car 的类和另一个调用者 Owner。Car 类也有一个 getOwner() 方法，而 Owner 类包含名称、汽车的成本和所有者的预算。

所以我有一个初始化引擎的方法，它调用了 newCARengine 类中的构造函数。

```
public static void iniEngine(String name, int cost) {
    model = new newCARengine(name, cost);
} 
```

作品。引擎类有汽车，汽车类有所有者。为了成功调用 getOwner() 方法，我需要使用实例变量（类级别变量）来保存对另一个对象的引用，以便从该对象调用该方法。

我的引擎课程：[下]

```
public class engine{
    private String name;
    private int cost;
    public Car car;

    public engine(String name, int cost){
        this.name = name;
        this.cost = cost;
    }

   public Owner getOwner(){
        return car.getOwner();
    }
} 
```

我通过使用该类“公共汽车汽车”的实例变量来引用汽车类；然后允许我使用“car.getOwner();” 方法。

我的车类：[下]

```
public class Car{
    public Owner owner //instance variable to reference the owner class
    public Owner getOwner(){
        return owner;
    }
} 
```

现在我准备去创建 Owner 对象的 Owner 类。

我的所有者班级：[下]

```
public class Owner{
    private String name;
    private int cost;
    private int budget;

    public Owner (String name, int cost){
        this.name = name;
        this.cost = cost;
    }
    public Owner (String name, int cost, int budget){
        this.name = name;
        this.cost = cost;
        this.budget = budget;
    }
    public String getName(){return name;}
    public int getCost(){return cost;}
    public int getBudget(){return budget;}
} 
```

现在我做错了，因为当我运行 iniEngine() 方法时，我得到一个空指针异常，我相信这是没有创建对象的结果。错误是从这里生成的：

```
return car.getOwner();  //from the ENGINE CLASS 
```

由于我的引擎类，我需要返回一个对象。但该对象没有被创建。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:00:00.177

我从不实例化对象，只删除变量。

通过将构造函数更改为

```
public Engine(String name, int cost) {
    car = new Car(new Owner(name, cost));       
} 
```

这成功地创建了对象，这反过来又允许我调用 getOwner() 方法并且没有得到任何 NullPointerExceptions。一定以某种方式错过了这部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:03:51.763

我多次查看了您的代码。我不明白你在哪里将车主与汽车联系起来。
这就是导致 NullPointerException 的原因，
我建议您向 Car 提供一个 CTOR，以获取 Owner 作为参数，此外，考虑使用 setCar 方法。

考虑对 Car 使用以下代码：

```
public class Car{
    public class Car(Owner owner) {
      this.owner = owner;
    }
    private Owner owner //instance variable to reference the owner class

    public void setOwner(Owner owner) {
       this.owner = owner;
    }
    public Owner getOwner(){
        return owner;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:35:55.810

样式说明：在 Engine 中， car 可能也应该是`private`，就像其他字段一样，带有一个 setter 或一个构造函数参数。

似乎有些字段没有设置。我在类似情况下使用的一种调试“技巧”是临时制作 fields `final`，看看编译器抱怨什么。例如，如果有人在设置`engine.car`，它会抱怨。在这种情况下，这是一件好事——它应该抱怨！而且，如果*没有人*在设置`engine.car`，那就是关于 NPE 来自何处的危险信号。

或者，如果您确实有 setter/getter，请在其中放置断点（或者，如果您愿意，添加 System.out.prints）以验证它们是否被调用。或者，暂时重命名它们（我在开头添加“xxx”）以验证编译器是否抱怨，证明有人在调用它们。

# php - 替代在类中使用全局变量？

> ID：11275927
> 
> 赞同：0
> 
> 时间：2012-06-30T16:59:32.057
> 
> 标签：php, database, oop, class, pdo

我已经开始学习如何使用 OOP 并创建了一个用户授权类来检查用户是否存在等。目前我使用`$dbh`作为 PDO 连接的全局变量连接到数据库。我听说以这种方式使用全局变量不是一个好习惯，但我不确定如何改进它，我是否只是将`$dbh`变量传递给在连接到数据库时需要它的方法，以及为什么不考虑这一点好的做法？

这是我正在使用的一些代码：

调用程序中包含的数据库 PDO 连接：

```
//test the connection
    try{
        //connect to the database
        $dbh = new PDO("mysql:host=localhost;dbname=oopforum","root", "usbw");

    //if there is an error catch it here
    } catch( PDOException $e ) {
        //display the error
        echo $e->getMessage();
    } 
```

需要数据库连接的类：

```
class Auth{

        private $dbh;

        function __construct(){

            global $dbh;
            $this->dbh = $dbh;
        }

        function validateLogin($username, $password){

            // create query (placing inside if statement for error handling)
            if($stmt = $this->dbh->prepare("SELECT * FROM oopforumusers WHERE username = ? AND password = ?")){

                $stmt->bind_param(1, $username);
                $stmt->bind_param(2, $password);
                $stmt->execute();

                // Check rows returned
                $numrows = $stmt->rowCount();

                //if there is a match continue
                if( $numrows > 0 ){
                    $stmt->close();
                    return TRUE;
                }else{
                    $stmt->close();
                    return FALSE;
                }

            }else{
                die('ERROR: Could not prepare statement');
            }

        }

        function checkLoginStatus(){

            if(isset($_SESSION['loggedin'])){

                return TRUE;

            }else{

                return FALSE;

            }

        }

        function logout(){

            session_destroy();
            session_start();

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T17:02:14.697

您应该将 PDO 连接传递给构造函数：

```
function __construct($dbh) {
    $this->dbh = $dbh;
} 
```

该连接称为类的*依赖*项，因为显然您的类需要它来执行其功能。良好的实践要求你的类应该*明确*表示存在这种依赖关系；这是通过使其成为强制构造函数参数来实现的。

如果您改为从全局变量中提取依赖项，则会产生几个问题：

*   您的班级的用户根本不清楚首先存在依赖关系
*   您的类现在与全局变量耦合，这意味着在不破坏程序的情况下无法删除或重命名该变量
*   您已经为“远距离操作”创建了先决条件：修改全局变量的值会导致应用程序的另一个（看似无关的）部分改变行为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:02:12.200

您可以简单地将其传递给构造函数。

```
function __construct($connection){
         $this->connection = $connection;
} 
```

当您创建对象时，您会：

```
$obj = new Class($dbh); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T17:02:34.667

通过构造函数传入数据库对象。PHP 的对象模型意味着 = 创建对同一对象实例的新引用。

```
class ThingThatDependsOnDatabase
{
    private $db = NULL;

    public function __construct (PDO $db)
    {
        $this -> db = $db;
    }

    public function selectSomething ($id)
    {
        $sql = 'SELECT * FROM table WHERE id = ?;'
        $this -> db -> prepare ($sql);
        // And so on
    }
} 
```

这是一个名为[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)的模式示例，因为您的类所依赖的东西是通过方法（setter、构造函数等）注入的。

# html - 在浏览器中按列选择

> ID：11275929
> 
> 赞同：0
> 
> 时间：2012-06-30T16:59:40.420
> 
> 标签：html, browser

是否有任何 HTML5 标准或 CSS 属性强制浏览器供应商为元素中的内容提供按*列选择，尤其是在表格中？*

这种行为的高级形式在 MS-Word 中用于表格和文本：按住 Alt 选择文本时，您可以按列和按行进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:19:57.300

您需要为此使用 javascript。要使用 jQUery 完成此操作，您只需要执行以下操作：

```
$("tr").find("td:eq(2)") 
```

这将选择第三列中的所有 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T00:04:14.307

也许不完全是你想要的，但......

如果您需要用鼠标选择表格单元格，例如将它们粘贴到 excel 中，您只需按 Ctrl 键然后拖动以选择表格的任何“方形”部分，而不是默认的从-到选择行的行为你拖到哪里。

例如

```
A  B  C  D  E
1  2  3  4  5
6  7  8  9  10
11 12 13 14 15 
```

如果您只是从 3 到 14 拖动，您将选择部分第一行`(3,4,5)`、完整的中间行`(6 through 10)`和部分最后一行`(11 to 14)`

但如果在拖动时按住 Ctrl，则只会选择 COLUMNS，`3,4`即`8,9`和`13,14`

（它在 SO 中不起作用，因为它不允许我们在响应中添加 html 表）但你明白了

当您只需要从表中获取一小部分列时，它非常有用。

# php - PHP htmlentities() 输入与输出

> ID：11275934
> 
> 赞同：5
> 
> 时间：2012-06-30T17:01:15.630
> 
> 标签：php, html, xss, sanitization, html-entities

> **可能重复：**
> [在数据库插入之前输入 PHP htmlentities()，而不是输出](https://stackoverflow.com/questions/3023728/php-htmlentities-on-input-before-db-insert-instead-of-on-output)

对于一个只是试图保护自己免受 XSS 攻击的 PHP 应用程序，应该在什么阶段`htmlentities()`调用该函数？它应该在初始用户输入时调用，还是在输出数据的每个页面渲染时调用？

如果我`htmlentities()`在用户输入上使用，我最终会在数据库中存储更多的数据。但是，从长远来看，我节省了 CPU 周期，因为我只需要在输入上执行转换，而不必再在该数据的后续输出上执行。

我应该注意，我看不到任何必须在我的应用程序中存储 HTML 输入数据的可预见情况，因此使用`htmlentities()`纯粹是为了 XSS 保护。万一我确实需要原始 HTML，我可以简单地调用`html_entity_decode()`reverse `htmlentities()`。此外，它使我免于忘记调用`htmlentities()`页面渲染并意外地将 XSS 漏洞插入到我的应用程序中。

我玩弄了使用 Facebook 的 XHP 扩展的想法，但是 XML 解析会产生相当多的开销，这超出了我对我的应用程序的习惯。

**摘要：**我应该`htmlentities()`在输入上使用还是在输出上使用？对于这种情况，普遍接受的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:11:18.050

除非您可以保证在应用程序的整个生命周期内，输入*只会*被提供给 Web 浏览器，否则这个问题不值得讨论：您应该在输出上使用 XSS 保护，否则您最终将不得不在根据具体情况输出（无论可能是何种输出）。这正是您当前对输入应用保护的论点。

鉴于即使现在（更不用说在未指定的未来时间）上述情况也不太可能是真的，恕我直言，答案是显而易见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:03:32.567

我更喜欢在输出中使用它，这样可以保持对非 html 版本的输出使用相同数据的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:11:29.357

没有理由在输入时这样做。

如果您想要高性能，只需创建 2 个字段：text、escaped_text 并在第一个输出上填充第二个字段并在更新时将其重置。

如果您将使用模板引擎，它将为您转义所有数据。

# java - Java notSerializableExceptionError

> ID：11275940
> 
> 赞同：0
> 
> 时间：2012-06-30T17:01:49.553
> 
> 标签：java, save, notserializableexception

当试图保存我的类 Click 的数组列表时，我收到此错误：java.io.NotSerializableException:javax.swing.text.DefaultHighlighter$LayeredHighlightInfo 在这行代码：os.writeObject(saveList);。即使我让我的 Click 类实现了可序列化。有谁知道这是什么原因？

这是我的保存方法：

```
public static void saveArray(ArrayList<Click> saveList) {
        JFileChooser c = new JFileChooser();
        c.showSaveDialog(new JFrame());
        File f = c.getSelectedFile();
        try {
            ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream(
                                f.getAbsolutePath()));
            os.writeObject(saveList);
        } catch (IOException e1) {
        e1.printStackTrace();
    }
} 
```

这是我的 Click 课程：

```
public static class Click implements Serializable {
    JTextField xClickField;
    JTextField yClickField;
    JTextField clickIntervalField;
    JTextField repeatTimesField;
    boolean isLeft;
    Integer clickX;
    Integer clickY;
    Integer clickInterval;
    Integer clickTimes;

    public Click(boolean left){
        xClickField = new JTextField();
        yClickField = new JTextField();
        clickIntervalField = new JTextField();
        repeatTimesField = new JTextField();
        clickX = 0;
        clickY = 0;
        clickInterval = 0;
        clickTimes = 0;
        isLeft = left;
        addToJPanel();
    }

    public void addToJPanel() {
        xClickField.setText(clickX.toString());
        yClickField.setText(clickY.toString());
        clickIntervalField.setText(clickInterval.toString());
        repeatTimesField.setText(clickTimes.toString());
        panel.add(xClickField);
        panel.add(yClickField);
        panel.add(clickIntervalField);
        panel.add(repeatTimesField);

        frame.setVisible(false);
        frame.setVisible(true);
    }

    public void removeFromJPanel() {
        panel.remove(xClickField);
        panel.remove(yClickField);
        panel.remove(clickIntervalField);
        panel.remove(repeatTimesField);

        frame.setVisible(false);
        frame.setVisible(true);
    }
} 
```

顺便说一句，我从 Click 类中取出了一大块代码。因此，如果您认为错误可能出在代码的那部分，我很乐意将其添加进去。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:08:50.383

实现 Serializable 不足以使对象可序列化。例如，一个 Socket 是不可序列化的：序列化一个套接字是没有意义的。因此，如果您有一个`Foo`具有类型字段`Socket`并实现的类`Serializable`，您打算如何序列化`Foo`实例。它行不通。可序列化对象 msut 的所有字段也可以递归地序列化。

而且，正如 Hovercraft 在他的评论中所说，您应该序列化数据，而不是摆动组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:13:22.457

您正在序列化 JTextFields 和其他 Swing 组件，这是浪费时间和资源并且完全没有必要。您应该序列化 GUI 的状态，即类字段保存的数据。如果您了解 MVC，则应该序列化模型，而不是视图。如果您不了解 MVC，请使用 Google 搜索或阅读[本文](http://www.oracle.com/technetwork/articles/javase/index-142890.html)并学习关键概念，因为它们是创建任何语言的 GUI 程序的关键。

另外，为了我的钱，我会使用 JAXB 或其他一些基于 XML 的工具来序列化您的数据，因为它以文本格式保存，因此在阅读时可以理解。

将 GUI 与模型分离并使用属性更改侦听器来侦听和响应属性更改的示例：

```
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.Serializable;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class SimpleClickEg {
   private static void createAndShowGui() {
      SimpleClickPanel clickPanel = new SimpleClickPanel();

      JFrame frame = new JFrame("SimpleClickEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(clickPanel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class SimpleClickPanel extends JPanel {
   private static final int PREF_WIDTH = 800;
   private static final int PREF_HIEGHT = 600;
   private JTextField clickCountField = new JTextField(5);
   private JTextField clickXField = new JTextField(5);
   private JTextField clickYField = new JTextField(5);
   private SimpleClick click = new SimpleClick();

   public SimpleClickPanel() {
      add(new JLabel("Click X:"));
      add(clickXField);
      add(new JLabel("Click Y:"));
      add(clickYField);
      add(new JLabel("Click Count:"));
      add(clickCountField);

      addMouseListener(new MouseAdapter() {
         @Override
         public void mousePressed(MouseEvent e) {
            click.setClickPoint(e.getPoint());
         }
      });

      click.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent evt) {
            if (SimpleClick.CLICK_COUNT.equals(evt.getPropertyName())) {
               clickCountField.setText(String.valueOf(click.getClickCount()));
            } else if (SimpleClick.CLICK_X.equals(evt.getPropertyName())) {
               clickXField.setText(String.valueOf(click.getClickX()));
            } else if (SimpleClick.CLICK_Y.equals(evt.getPropertyName())) {
               clickYField.setText(String.valueOf(click.getClickY()));
            }
         }
      });
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_WIDTH, PREF_HIEGHT);
   }

   public SimpleClick getClick() {
      return click;
   }
}

class SimpleClick implements Serializable {
   private static final long serialVersionUID = 1L;
   public static final String CLICK_COUNT = "click count";
   public static final String CLICK_X = "click x";
   public static final String CLICK_Y = "click y";

   private int clickCount;
   private int clickX;
   private int clickY;
   private transient SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(
         this);

   public int getClickCount() {
      return clickCount;
   }

   public void setClickCount(int clickCount) {
      Integer oldValue = this.clickCount;
      Integer newValue = clickCount;
      this.clickCount = newValue;
      spcSupport.firePropertyChange(CLICK_COUNT, oldValue, newValue);
   }

   public void incrementClickCount() {
      setClickCount(getClickCount() + 1);
   }

   public void setClickPoint(Point p) {
      setClickX(p.x);
      setClickY(p.y);
      incrementClickCount();
   }

   public int getClickX() {
      return clickX;
   }

   public void setClickX(int clickX) {
      Integer oldValue = this.clickX;
      Integer newValue = clickX;
      this.clickX = newValue;
      spcSupport.firePropertyChange(CLICK_X, oldValue, newValue);
   }

   public int getClickY() {
      return clickY;
   }

   public void setClickY(int clickY) {
      Integer oldValue = this.clickY;
      Integer newValue = clickY;
      this.clickY = newValue;
      spcSupport.firePropertyChange(CLICK_Y, oldValue, newValue);
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.removePropertyChangeListener(listener);
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:08:21.217

如您所见，错误清楚地表明`javax.swing.text.DefaultHighlighter`不可序列化。

现在这个类被 . 内部的组合使用`JTextField`，它是一个 GUI 组件，并不意味着被序列化。从您的代码看来，您似乎不需要序列化字段本身，因此只需将它们标记为`transient`即可。

附带说明：**将数据与 GUI 分开总是很好的，这样您就可以轻松地序列化数据并了解有关 GUI 的任何内容**。通常，这不仅有助于序列化，还有助于保持封装并使用 OOP，因为它应该被使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T17:08:52.090

问题是您的`Click`类引用了 JTextField 实例，并且这些（可能）引用了一些名为`DefaultHighlighter.LayeredHighlightInfo`... 的 Swing 类，并且它是不可序列化的。

您可能需要将 4 个`JTextField`变量声明为`transient`. 作为一般规则，Java GUI 类（如 Swing 组件）不能有效地序列化。

# javascript - jQuery：在输入字段中输入文本时，不启用按钮

> ID：11275941
> 
> 赞同：3
> 
> 时间：2012-06-30T17:01:49.900
> 
> 标签：javascript, jquery

我在[这里](http://jsfiddle.net/hhimanshu/9kKXX/)有一个 jsfiddle 。

***jQuery***

```
$(function() {
    //var input = $('form :input[type="text"]')
    $('form :input[type="text"]').live('keyup', function() {
        $('form .create-playlist-button')
            .attr('disabled', $('form :input[type="text"]').val().length == 0);
    });
}); 
```

**需要**

*   当我开始在文本框中输入数据时，应该启用创建。

*   当我从文本框中删除所有文本时，应该禁用创建。

我对 jQuery 很陌生，这对我不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T17:07:51.497

```
$('form :input[type="text"]').live('keyup', function() {
      var val = $.trim(this.value); // this.value is faster than $(this).val()
      $('form .create-playlist-button').prop('disabled', val.length == 0);
}); 
```

**[演示](http://jsfiddle.net/9kKXX/3/)**

在这里，我使用了，**[`.prop()`](http://api.jquery.com/prop)**而不是**[`.attr()`](http://api.jquery.com/attr)**，根据 jQuery doc`.prop()`应该使用。我还用于**[`.trim()`](http://api.jquery.com/jQuery.trim/)**从值的开头和结尾删除空格。

* * *

### 关于您的代码

在您的代码中，您使用`$('form :input[type="text"]')`了两次，一次用于绑定事件，一次用于获取文本字段的值。但这不是必需的，因为在`keyup`事件处理函数中，函数`this`将引用事件绑定的那个`input`元素。`keyup`

如果您有时需要出于任何目的多次使用任何选择器，最好将其缓存在一个变量中并重用该变量。举个例子：

```
var input = $('form :input[type="text"]');
input.on('click', function() {
      alert( this.value );
      input.addClass('something');
}); 
```

* * *

如果您使用**[`.on()`](http://api.jquery.com/on)**而不是`.live()`委托事件处理程序会更好，因为`.live()`已被弃用。

您可以使用`.on()`如下：

```
$('form').on('keyup', ':input[type="text"]', function() {
   var val = $.trim(this.value);
   $('form .create-playlist-button').prop('disabled', val.length == 0);
}); 
```

* * *

### 笔记

`.on()`委托事件处理的语法如下：

```
$(staticContainer).on( eventName, target, handlerFunction ) 
```

在这里，`staticContainer`指向在页面加载时属于 DOM 的元素，即它不是动态的，也是`target`您要在其上绑定事件的容器。

* * *

### 只是为了更多去这里

*   [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

*   [http://forum.jquery.com/topic/whats-the-difference-between-jquery-attr-and-jquery-prop](http://forum.jquery.com/topic/whats-the-difference-between-jquery-attr-and-jquery-prop)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T17:06:51.707

更新：

```
$(function(){
    //var input = $('form :input[type="text"]')
    $('form :input[type="text"]').live('keyup',function(){   
            $(this).closest('form').find('.create-playlist-button').prop('disabled',$(this).val().length==0);
     });
}); 
```

在“keyup”处理程序中，您使用`this`（或`$(this)`通过 jQuery 使用它）获取实际涉及的文本字段。我还更改了代码以确保您能找到正确的“伴侣”按钮。它查找父元素链以找到封闭的`<form>`，然后在该表单中找到按钮。

您分配事件处理程序的方式已被弃用。它应该是：

```
 $('form').on('keyup', ':input[type="text"]', function(){ ... 
```

此外，如果您检查“keypress”而不是“keyup”，您将修复按钮在第二个字符之前不起作用的错误。

*编辑*- 哦，还有一件事：您通常应该使用`.prop()`来更新属性，而不是`.attr()`. 对于较新的 jQuery API，这是一件令人困惑的事情，但是您需要使用的时间却很`.attr`少见。不幸的是，在 jQuery 1.6 发布之前，有大量旧的教学材料被写回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:08:58.693

您应该使用 .change() 方法！

在里面做一个测试：

```
if ($(this).val().length > 0)
...
else
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T17:11:13.733

来吧......使用你原来的小提琴：

[http://jsfiddle.net/9kKXX/4/](http://jsfiddle.net/9kKXX/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-22T08:13:40.060

只需稍作改动即可。

```
$(function(){
//var input = $('form :input[type="text"]')
$('form :input[type="text"]').live('keyup',function(){   
        $('form .create-playlist-button').attr('disabled',$(this).val().length==0);
 });
 }); 
```

小提琴：http: [//jsfiddle.net/9kKXX/36/](http://jsfiddle.net/9kKXX/36/)

# javascript - 如何加载 XML 格式的地图？

> ID：11275943
> 
> 赞同：0
> 
> 时间：2012-06-30T17:02:05.373
> 
> 标签：javascript, html

我使用平铺地图编辑器制作了一个 XML 文件，其中列出的项目如下：

```
<data>
  <tile gid="1"/>
  <tile gid="2"/>
  <tile gid="2"/>
  <tile gid="1"/>
  <tile gid="1"/>
  <tile gid="3"/>
  <tile gid="3"/>
  <tile gid="1"/>
  <tile gid="2"/>
</data> 
```

假设这是一张 3x3 地图。如何将其解析为数组

```
[
  [1,2,2],
  [1,1,3],
  [3,1,2],
] 
```

加载它更容易？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:15:06.850

您可以使用 JavaScript 通过这个简单的脚本将其转换为数组：

```
var xml = '<data><tile gid="1"/><tile gid="2"/> <tile gid="2"/><tile gid="1"/><tile gid="1"/><tile gid="3"/><tile gid="3"/><tile gid="1"/><tile gid="2"/></data>​​​​​​​​​​​​​​​​​​​​​​​​​​​​';

​var data = new DOMParser().parseFromString(xml, "text/xml").documentElement;

var tileNodes = data.querySelectorAll("tile");
var tiles = [];

for (var i = 0; i < tileNodes.length; i++) {
    var point = [];
    point.push(parseInt(tileNodes[i].getAttribute("gid"), 10));
    point.push(parseInt(tileNodes[++i].getAttribute("gid"), 10));
    point.push(parseInt(tileNodes[++i].getAttribute("gid"), 10));
    tiles.push(point);
} 
```

# c# - 努力将 SQL 转换为 LINQ

> ID：11275948
> 
> 赞同：0
> 
> 时间：2012-06-30T17:02:53.050
> 
> 标签：c#, .net, sql, linq, linq-to-sql

我有一个 Linq 表达式，它（对于北风）获取客户 id 为“ALFKI”的每个产品订购的总数量

```
from od in db.OrderDetails
    where od.Order.CustomerID == "ALFKI"
    group od by od.Product.ProductName into g1
    select new { ProductName = g1.Key, Total = g1.Sum(od => od.Quantity) } 
```

这很好，但要完全理解 Linq，我想尝试在 Linq2Sql 不能很好地通过外键构建属性桥的世界中制定表达式。

例如，在上面的表达式中，我访问的是 od.Order.CustomerID。我想假设 od.OrderID 是尽我所能。

查看表达式的 SQL，我有：

```
SELECT SUM(CONVERT(Int,[t0].[Quantity])) AS [Total], [t2].[ProductName]
FROM [Order Details] AS [t0]
INNER JOIN [Orders] AS [t1] ON [t1].[OrderID] = [t0].[OrderID]
INNER JOIN [Products] AS [t2] ON [t2].[ProductID] = [t0].[ProductID]
WHERE [t1].[CustomerID] = @p0
GROUP BY [t2].[ProductName] 
```

这是我设法得到的：

```
from od in db.OrderDetails
    join o in db.Orders on od.OrderID equals o.OrderID
    join p in db.Products on od.ProductID equals p.ProductID
    where o.CustomerID == "ALFKI"
    group od by od.ProductID into g1
    select new { ProductName = g1.Key, Total = g1.Sum(od => od.Quantity) } 
```

这几乎就在那里，但 g1.Key 指的是 ProductID。我似乎无法同时获得 ProductName 和订单数量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:09:10.527

尝试通过以下方式为您的组创建一个新的匿名类型：

```
from od in db.OrderDetails
    join o in db.Orders on od.OrderID equals o.OrderID
    join p in db.Products on od.ProductID equals p.ProductID
where o.CustomerID == "ALFKI"
group od by new { p.ProductID, p.ProductName } into g1
select new { 
    ProductName = g1.Key.ProductName, 
    Total = g1.Sum(od => od.Quantity) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:44:41.550

除了凯文的回答，使用复合键，我还设法以另一种方式做到这一点：

```
from item in (from od in db.OrderDetails
                  join o in db.Orders on od.OrderID equals o.OrderID
                  join p in db.Products on od.ProductID equals p.ProductID
                  where o.CustomerID == "ALFKI"
                  select new {ProductName = p.ProductName, Quantity = od.Quantity }
              )
              group item by item.ProductName into g1
              select new {ProductName = g1.Key, Total = g1.Sum(od=>od.Quantity) } 
```

更一般地说，如果您想将所有连接拼接在一起并引用任何字段：

```
from item in (from od in db.OrderDetails
                 join o in db.Orders on od.OrderID equals o.OrderID
                 join p in db.Products on od.ProductID equals p.ProductID
                 where o.CustomerID == "ALFKI"
                 select new { p, od }
             )
             group item by item.p.ProductName into g1
             select new { ProductName = g1.Key, Total = g1.Sum(all => all.od.Quantity)} 
```

# python - 如何在 Django 中使用我的外键获得级联下拉选择框？

> ID：11275973
> 
> 赞同：1
> 
> 时间：2012-06-30T17:06:28.983
> 
> 标签：python, django, django-forms, django-templates, django-views

所以我有一个用模型`Car`的外键调用的`Manufacturer`模型。我还有`CarCharacterisitcs`一个外键为`Car`.

这是代码的样子：

```
class Car(models.Model):
    idcar = models.AutoField(primary_key=True)
    manufacturer = models.ForeignKey(Manufacturer, null=True, blank=True, on_delete=models.SET_NULL)
    name = models.CharField(max_length=765)

class Manufacturer(models.Model):
    idmanufacturer = models.AutoField(primary_key=True)
    name = models.CharField(max_length=765)

class CarCharacteristics(models.Model):
    idcar_characteristics = models.AutoField(primary_key=True)
    car = models.ForeignKey(Car, on_delete=models.PROTECT) 
```

我正在制作一个页面，让您添加`CarCharacteristics`.

这是我的形式和观点：

```
class CarCharacteristicsForm(ModelForm):
    class Meta:
        model = CarCharacterisitics

def add_car_characteristics(request):
    if request.method == 'POST':
        car_char_form = CarCharacterisiticsForm(request.POST)
        if car_char.is_valid(:
            car_char_form.save()
            return HttpResponseRedirect('/cars/car-characterisitcs')
    else:
        car_char_form = CarCharacterisiticsForm()
    return render(request, 'car_characteristics/add_car_characteristics.html',{'car_char_form': car_char_form,}) 
```

在我的 html 页面中，我有这个：

```
<h1>Car Characteristics</h1>
<form action="." method="POST">
{% csrf_token %}
    <table id="characteristics_table">
        <tr>
        <td>
        <table id="car_characterisitcs_table">
            <td>{{ char_char_form.as_table }}</td>
        </table>
        </td>
        </tr>
    </table>
    <p><input type="submit" value="Submit"></p>
</form> 
```

`Car`显示此表单时，我有一个包含所有可能模型的下拉选择字段。我想要的是有两个选择字段。我希望第一个让您能够选择`Manufacturer`，然后第二个显示所有可能`Cars`的制造商。然后，当您提交表单时，它将`Car`您选择的分配给模型的外键`CarCharacterisitcs`。

如果你去看看[Advance Auto Parts](http://shop.advanceautoparts.com/webapp/wcs/stores/servlet/home___)，当你点击“你的车”时，这就是我想要的。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:44:56.743

您需要使用 AJAX 来获取选定制造商的数据并相应地填充汽车字段。这需要在视图代码中完成，并将获取的汽车数据返回到模板中，并使用模板语言填充字段。

# java - 在 Spring MVC Hibernate 应用程序中，我应该在哪里保存用户图像？

> ID：11275974
> 
> 赞同：1
> 
> 时间：2012-06-30T17:06:29.343
> 
> 标签：java, hibernate, spring-mvc

我正在使用 MySQL 创建一个 Spring MVC Hibernate 应用程序。我应该在哪里保存用户图像：在数据库中或某个文件夹中，例如在 下`WEB-INF/`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:17:32.733

当然不在WEB-INF里面。您可能希望将它们保存在文件系统中，而不是 webapp 的目录中。首先，如果应用程序被打包为战争，它很可能不存在。其次，一旦重新部署应用程序，您就会失去一切。桌面应用程序不会将其用户数据存储在其安装目录中，是吗？webapps应该是一样的。

现在，由于图像通常很大，而且它们不可搜索，您可能希望将它们存储在文件系统中，并且只将它们的名称、路径、哈希和/或 mime 类型存储到数据库中。但这取决于您的应用程序，它们是否需要由其他应用程序服务/使用，这些应用程序是否可以访问数据库和/或文件系统等。您决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:18:38.330

你可以选择它：

1.  **数据库**- 你有一个积极的观点，它可以与记录相关联并且永远不会是孤立的（取决于你的模型）。对于备份来说，在数据库增加的情况下会有点痛苦。

2.  **文件系统 - 备份工具，因为这些是物理文件，一个rsynch**进程就足够了。另一个积极点是您减少了数据库的 IO。虽然，很难在文件和存储在数据库中的记录之间附加逻辑（你已经分发了东西），所以你不确定文件是否没有被删除，并且仍然有一些记录引用它D B。

***如果选择了文件系统选项，请将其放在应用程序目录结构之外（为文件准备一个专用位置）***。应用程序目录不应该被修改，重新部署完成时会造成一些痛苦。不过，您可以使用符号链接。

对于图像，可能您想要执行一些缩略图等，使用 FileSystem 选项会更便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:11:25.337

这取决于您要完成的工作。
如果这些是静态图片，并且您有固定数量的用户，您可以考虑将它们保存在 WEB-INF/ 下。
但是，这很可能不是您的情况，并且您有不同数量的用户，您必须为每个用户存储一个用户。

可能的解决方案：
A. 为用户存储一个图像名称，并约定从文件系统中众所周知的目录存储/加载。
B. 将图像作为 blob 存储在您的数据库中。考虑检查[@Lob 注释](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html)

# java-me - 如何使用代号一存储？

> ID：11275975
> 
> 赞同：4
> 
> 时间：2012-06-30T17:06:33.763
> 
> 标签：java-me, lwuit, codenameone

我正在尝试将我的 LWUIT 应用程序移植到[Codename one](http://www.codenameone.com)。

我在 LWUIT 中使用了 RMS，现在显然我必须将其转换为存储。

我不明白存储类在代号一中是如何工作的，代号一的文档也没有任何内容。

1）存储文件的结构是什么？

--> 在 J2ME`RecordStore`中，记录像一张表一样聚集在一起。每一行，对应一个记录。每条记录都有一个唯一的记录 ID，您可以使用此记录 ID 访问记录。每条记录都可以存储一些数据。

这如何映射到存储类？

2）我想在我的存储中存储一些记录，我该怎么做？

文档说：

```
static Storage  getInstance() 
          Returns the storage instance or null if the storage wasn't initialized using a call to init(String) first. 
```

--> 在 LWUIT 中，它类似于 Storage.init(storageName)。; 但是代号一中没有init！！！！如何在代号一中打开存储？

3）如果我尝试打开一个不存在的存储文件，会发生什么（RMS 给出异常）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T17:57:38.683

考虑存储的最简单方法是作为平面文件系统（没有目录/文件夹）。

在 RMS 之上运行时，此文件系统抽象会为您无缝映射到 RMS 数据库。

请注意，`init()`对于存储在 Codename One 中不再需要，在 LWUIT 下它只执行基本初始化并且名称通常被忽略。

Storage 类有几个方法：

```
InputStream createInputStream(String name) 
```

为给定的存储源文件创建一个输入流

```
OutputStream    createOutputStream(String name) 
```

使用给定名称创建到存储的输出流

```
boolean     exists(String name) 
```

如果给定的存储文件存在，则返回 true

```
String[]    listEntries() 
```

列出存储文件的名称

您可以使用它们来存储和检查数据是否存在。但是，您也可以使用以下两种方法在不使用输入/输出流的情况下将复杂对象存储在存储中：

```
 Object     readObject(String name) 
```

从存储中读取对象，如果对象不存在则返回 null

```
 boolean    writeObject(String name, Object o) 
```

假设给定对象是可外部化类型或受支持的类型之一，则将给定对象写入存储

因此，要模拟类似 byte[] 存储的内容，您可以执行以下操作：

```
Vector p = new Vector();
byte[] myData = ...;
p.addElement(myData);
p.addElement(additionalData);
Storage.getInstance().writeObject("myStore", p); 
```

然后把它读成：

```
Vector p = (Vector)Storage.getInstance().read("myStore");
// p will be null if nothing was written 
```

# android - Android SDK 20 更新打破了 Eclipse 中的图形布局

> ID：11275978
> 
> 赞同：0
> 
> 时间：2012-06-30T17:06:49.273
> 
> 标签：android, eclipse, android-layout

这真的很奇怪，但是自从更新到 SDK 版本 20 后，图形布局在 Eclipse 中不再工作了。它们仅显示为使用的组件/小部件的一堆“标签”。

我尝试了我在 Stackoverflow 上阅读的提示来解决这个问题（右键单击 XML 文件并选择“图形编辑器”，确保我的 XML 文件具有 XML 扩展名，更改 API 版本，更改构建目标，清理项目等，但它是都一样。

我什至只花了将近 1 个小时来卸载然后重新安装 Android SDK - 没有成功。

知道如何恢复我的图形布局吗？

**编辑：** 我发现问题是由定义我自己的“视图”引起的。

```
 <view
            android:id="@+id/vs_mapview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            class="com.mytest.TapControlledMapView"
            android:apiKey="0eaQ..."
            android:clickable="true"
            android:state_enabled="true" /> 
```

它与以前的 ADT 插件一起工作得很好，但是因为无论我在哪里使用这段代码，更新图形显示都会被破坏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:49:32.390

只需删除您添加的任何自定义设备屏幕配置。它将解决问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:49:59.777

在右边的那个小 android 人将它换成旧版本（尝试 13），为我修复了它

# vb.net - 通过 ODBC (windows, .NET) 备份 postgreSQL 数据库

> ID：11275982
> 
> 赞同：0
> 
> 时间：2012-06-30T17:07:16.940
> 
> 标签：vb.net, postgresql, odbc

我正在尝试使用 vb.net 通过 ODBC 备份我的数据库，但找不到方法。
许多方法中的一些：

```
 Try
            btCommand = New OdbcCommand("pg_dump '" + mydatabase + "' > 'all.sql'", mCon)
            'OR
            ' btCommand = New OdbcCommand("BACKUP DATABASE '" + mydatabase + "',  'all.sql'", mCon)
            btCommand.ExecuteNonQuery()
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical + MsgBoxStyle.OkOnly)
        End Try 
```

但没有人工作。请就如何做到这一点提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:38:41.920

`pg_dump`是命令行可执行文件，而不是 SQL 命令。

备份 PostgreSQL 数据库系统有许多不同的选项。您可能应该通读[文档](http://www.postgresql.org/docs/current/interactive/backup.html)，看看哪一个最适合您。

# java - 如何强制java xml dom在之后产生换行符？

> ID：11275988
> 
> 赞同：14
> 
> 时间：2012-06-30T17:08:13.483
> 
> 标签：java, xml, dom, formatting

我使用此代码启用换行符：

```
 transformer.setOutputProperty(OutputKeys.INDENT, "yes");
    transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2"); 
```

但我得到以下输出：

```
<?xml version="1.0" encoding="UTF-8"?><root>
  <child>aaaa</child>
</root> 
```

我想在根元素之前有换行符。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-11T12:43:03.467

试试这个

```
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
transformer.setOutputProperty("{http://xml.apache.org/xalan}indent-amount","2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-12T12:00:54.593

另一种解决方案是：transformer.setOutputProperty(OutputKeys.INDENT, "yes"); transformer.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC,"yes"); transformer.setOutputProperty("{ [http://xml.apache.org/xslt](http://xml.apache.org/xslt) }indent-amount", "10");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T14:55:54.087

其他答案对我不起作用，或者在我的申请中是不可接受的。这对我有用：

```
transformer.setOutputProperty(OutputKeys.STANDALONE, "yes"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T17:24:30.937

您可以自己添加换行符，方法是将 a 包装`Writer`在 a `FilterWriter`（或`OutputStream`a 中`FilterOutputStream`）编码以识别该标签的结尾并在退出时添加换行符。

但这有点傻。正如斯蒂芬 C 在他的评论中指出的那样，你真的可能不应该关心这个足以打扰。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-04T13:21:54.360

当声明后没有 DOCTYPE 或者您没有指定独立属性时，生成的 xml 文件往往会出现此问题。如果您没有与文件相关的 DOCTYPE，请将独立属性设置为“是”。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-09-20T00:39:01.693

您可以手动插入换行符。将字符串分配给一个临时变量（假设它的 String temp）。然后做这样的事情

```
String filteredStr = new StringBuilder(temp).insert(temp.indexOf('>') + 1, "\n")
                    .toString(); 
```

# emacs - 如何在org-mode中方便地定义latex格式？

> ID：11275995
> 
> 赞同：2
> 
> 时间：2012-06-30T17:09:07.190
> 
> 标签：emacs, latex, org-mode

在 Latex 模式下，我们可以创建一个 tex 文件来填充我们想要的所有设置，例如将其命名为 asual.tex，并将其位置放在我们要调试的所有 tex 文件的开头，如下所示：

```
\input{path_of_usual.tex/usual} 
```

我们可以在

```
\begin{document} 
```

和

```
\end{document} 
```

将所有设置填入通常的.tex 中。

在这里我的目的是在 org-mode -xelatex 中做类似的事情，我需要将哪些命令添加到 .emacs 中？

似乎在 .emacs 中添加了这样的命令

```
(add-to-list 'org-export-latex-classes
         '("my-article"
           "\\documentclass......
             \\usepackage{..... 
```

可以通过 org-file : 中的代码定义乳胶格式`#+LATEX_CLASSES my-article`。

但我替换了所有`\\....`的`\\input{location_of_usual.tex/usual}`，org-file 不能生成 PDF-file，给出消息：

> “org-export-classes”中没有“普通”类的定义

什么是正确的设置？

我做了很多尝试来处理，但都失败了，例如：

```
#+LaTeX:\input{location} 
```

emacs 仍然显示错误消息，说：

> “org-export-classes”中没有“普通”类的定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T02:40:53.057

> 可以通过 org-file : 中的代码定义乳胶格式 `#+LATEX_CLASSES my-article`。

这是一个错字，文件头指令是`#+LATEX_CLASS:`. 更改它应该可以让您导出为 pdf。

> 但我替换了所有`\\....`的`\\input{location_of_usual.tex/usual}`org-file 无法生成 PDF 文件，并给出消息：No definition of class 'usual' in 'org-export-classes'

我认为您在混淆事情，之前您说您添加了自己的名为 my-article 的导出类，但上面的错误消息表明您使用了“通常”。

> 什么是正确的设置？我做了很多尝试来处理，但都失败了，例如：#+LaTeX:\input{location}

在这里，如果您希望该`\input{..}`行出现在 \begin{document}...\end{document} 之外，则应改用该`#+LATEX_HEADER:` 指令。

PS：我认为这些更适合 org-mode 邮件列表。

# javascript - for 循环内的回调完成后如何执行函数？

> ID：11275999
> 
> 赞同：3
> 
> 时间：2012-06-30T17:10:02.823
> 
> 标签：javascript, google-maps-api-3, callback

我在搜索函数中有一个 for 循环，其中一个执行回调的函数在循环内执行回调，并且我想在循环之后执行 BUILD() 函数，并且在所有回调完成之后。我不知道该怎么做，因为循环在所有回调完成之前完成。回调是获取我数据的 API 请求，我想用该数据构建（）。

我阅读了deferred，所以我尝试将for循环放在deferred的函数中，然后在'.then（...）'上调用BUILD（）。但这似乎不起作用-我想我理解错了。

帮助？！

请注意，这是使用 Google Maps Places API（搜索和 getDetails）。

```
var types = {
    'gym' : 'fitness, gym',
    'grocery_or_supermarket': ''
}

function search() {
    for (var key in types) {
         var request = { ... };
         service.search(request, searchCallback);
    }
    // PROBLEM AREA
    BUILD();
}

function searchCallback(results, status) {
    for (var i = 0; i < results.length; i++) {
        var request = { ... };
        service.getDetails(request, detailsCallback);
    }
}

function detailsCallback(place, status) {
    // add place marker to maps and assign info window and info window event
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:17:44.660

只需对您的代码稍作修改，就可以实现。

```
var total = 1337; // Some number
var internal_counter = 0;
var fn_callback = function() {
    searchCallback.apply(this, arguments);
    if (++internal_counter === total) {
        BUILD();
    }
};
for (var i=0; i<total; i++) {
    service.search(request, fn_callback);
    ... 
```

## 解释

首先，我们创建一个**局部**函数和变量。

*   该变量是一个计数器，在调用回调时会增加。
*   该函数被传递给`service.search`调用原始回调的异步方法 ()。增加计数器后，根据包含迭代总数的变量检查计数器的值。如果它们相等，则调用整理函数 ( `BUILD`)。

## 一个复杂的案例：处理嵌套回调。

```
var types = { '...' : ' ... ' };

function search() {
    var keys = Object.keys(types);
    var total = keys.length;
    // This counter keeps track of the number of completely finished callbacks
    //  (search_callback has run AND all of its details_callbacks has run)
    var internal_counter = 0;

    for (var i=0; i<total; i++) {
        var request = { '...' : ' ... ' };
        services.search(request, fn_searchCallback);
    }

    // LOCAL Function declaration (which references `internal_counter`)
    function fn_searchCallback(results, status) {
        // Create a local counter for the callbacks
        // I'm showing another way of using a counter: The opposite way
        // Instead of counting the # of finished callbacks, count the number
        //  of *pending* processes. When this counter reaches zero, we're done.
        var local_counter = results.length;
        for (var i=0; i<results.length; i++) {
            service.getDetails(request, fn_detailsCallback);
        }
        // Another LOCAL function (which references `local_counter`)
        function fn_detailsCallback(result, status) {

            // Run the function logic of detailsCallback (from the question)
            // " ... add place marker to maps and assign info window ... "

            // Reduce the counter of pending detailsCallback calls.
            //   If it's zero, all detailsCallbacks has run.
            if (--local_counter === 0) {
                // Increase the "completely finished" counter
                //  and check if we're finished.
                if (++internal_counter === total) {
                    BUILD();
                }
            }
        } // end of fn_detailsCallback
    } // end of fn_searchCallback
} 
```

功能逻辑在评论中解释。我在本节的标题前加上了“复杂”，因为该函数使用**嵌套的局部**函数和变量。视觉解释：

```
var types, BUILD;
function search
    var keys, total, internal_counter, fn_searchCallback;
    function fn_searchCallback
        var result, status; // Declared in the formal arguments
        var local_counter, i, fn_detailsCallback;
        function fn_detailsCallback
            var result, status; // Declared in the formal arguments 
```

在上图中，每个缩进级别意味着[^(MDN 上)](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/)[的一个新范围](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/)解释。
当一个函数被调用 42 次时，就会创建 42 个新的本地作用域，它们共享同一个父作用域。在作用域内，[**声明**的变量](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Declaring_variables)对父作用域不可见。尽管父作用域中的变量可以由“子”作用域中的变量读取和更新，*但前提是*您未声明具有相同名称的变量。此功能用于我的答案功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:19:12.823

我想你已经理解了这一点，但是 BUILD() 在之前的回调函数仍在运行时被线性调用。就像您创建了额外的线程一样。解决该问题的一种方法是使 BUILD 成为搜索函数的回调，其中包含 for 循环。这将保证在调用它之前所有功能都已完成。

这个问题可能有助于实现回调：[Create a custom callback in JavaScript](https://stackoverflow.com/questions/2190850/javascript-create-custom-callback)