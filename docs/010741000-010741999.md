# StackOverflow 问答 10741000-10741999

# java - 使用 Java 解压缩多部分 zip 文件卷

> ID：10741002
> 
> 赞同：4
> 
> 时间：2012-05-24T15:54:00.660
> 
> 标签：java, archive, unzip, compression

我需要解压缩一组 zip 存档文件。这不是一组 zip 文件，这是一个大 zip 文件，已根据大小要求分成多个 zip 文件。

例如，如果您有一个 2.5MB 的 zip 文件，而您的邮件系统只支持 1MB 的文件，您可以要求 Zip 创建 3 个最多 1MB 的文件。

因此它创建了 a.zip.001、a.zip.002、a.zip.003 ......不同的库对它们的命名不同，但基本上它们的工作方式都相同。

你如何在java中解压缩这个？看起来 std 中的压缩库不支持这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:22:23.480

尝试将所有文​​件连接到一个文件中，然后提取单个文件。就像是：

```
 File dir = new File("D:/arc");
    FileOutputStream fos = new FileOutputStream(new File(
            "d:/arc/archieve-full.zip"));
    FileInputStream fis = null;
        Set<String> files = new TreeSet<String>();
        for (String fname : dir.list()) {
            files.add(fname);
        }
        for (String fname : files) {
        try {
            fis = new FileInputStream(new File(dir.getAbsolutePath(), fname));
            byte[] b = new byte[fis.available()];
            fis.read(b);
            fos.write(b);
        } finally {
            if (fis != null) {
                fis.close();
            }
            fos.flush();
        }
    }
    fos.close();
    ZipFile zipFile = new ZipFile("d:/arc/archieve-full.zip");
    /*extract files from zip*/ 
```

更新：使用 a`TreeSet`对文件名进行排序，因为`dir.list()`不保证字母顺序。

# c# - 获取功能 和表达 > 从单个参数？

> ID：10741004
> 
> 赞同：1
> 
> 时间：2012-05-24T15:54:01.020
> 
> 标签：c#

我想使用单个参数同时获得编译后的 Func(of boolean) 和 Expression(of Func(of boolean))。我不打算修改表达式树。完全采用表达式树的唯一原因是我可以打印出正在执行的代码。

```
void Assert(Expression<Func<bool>> assertionExpression) {
    if (!assertionExpression.Compile()()) 
    { 
        throw new AssertFailedException(assertionExpression.ToString()); 
    }
} 
```

有什么合理的方法可以做到这一点吗？

作为一个推论，在简单的编译器生成表达式树的情况下，相同的实例是否总是作为参数传递？

```
static Dictionary<Expression<Func<bool>>, Func<bool>> cache;

static void Assert(Expression<Func<bool>> assertionExpression) {
    Func<bool> method = null;
    if (!cache.TryGetValue(assertionExpression, out method)) {
        cache.Add(assertionExpression, method = assertionExpression.Compile());
        Console.WriteLine("cache insert");
    }
    else {
         Console.WriteLine("cache hit");
    }
    if (!method()) 
    { 
        throw new AssertFailedException(assertionExpression.ToString()); 
    }
}

static void someCodeThatExecutesRegularly() {
    Assert(()=>true);
}

public static void Main(string[] args, int argc) 
{
    someCodeThatExecutesRegularly();

    someCodeThatExecutesRegularly();

    someCodeThatExecutesRegularly();
} 
```

输出将是“缓存插入”、“缓存命中”、“缓存命中”还是“缓存插入”、“缓存插入”、“缓存插入”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:32:39.543

对于第一个问题，您可以获取表达式树并对其进行编译以获得可执行版本，尽管它每次都会重新编译，因此您必须对其进行缓存。

```
static void Assert(Expression<Func<bool>> assertionExpression) {
    var func = assertionExpression.Compile(); // if you call func() it will execute the expression
} 
```

对于你的第二个问题，它每次都会是一个新的表达式树，所以你会得到“缓存插入”“缓存插入”“缓存插入”等......

要让它与缓存一起工作并进行编译，您可以在表达式上使用 .ToString() 来获取函数的字符串表示，但是如果您有任何闭包，这可能会导致非常混乱的问题，因为字符串表示可能相同但是封闭的变量会有所不同，因此如果您这样做，请谨慎使用！

# mysql - 在语句的 WHERE 部分中使用 OR 过滤 SQL 结果时的最佳实践

> ID：10741005
> 
> 赞同：0
> 
> 时间：2012-05-24T15:54:03.893
> 
> 标签：mysql, sql

然而，我一直在使用 mySQL，这是我第一次必须执行如下查询。它有效，但我想知道是否有更好的方法来编写它。

```
SELECT * FROM foo WHERE bar = 10058 or bar = 90234  or bar = 98211 or bar 4002 or bar = 90023 
```

使用这种方法可以提取的行数是否有限制？我犯错了吗？有没有更好的办法？

仅供参考，在这种特殊情况下，酒吧总是独一无二的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:55:48.133

使用`IN`，像这样：

```
SELECT * FROM foo WHERE bar IN (10058,90234,98211,4002,90023) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:56:31.200

您可以将 WHERE 子句压缩为：

```
SELECT * FROM foo WHERE bar in (10058,90234,98211,4002,90023) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:56:34.737

你想使用`IN`：

```
SELECT *
FROM `foo`
WHERE `bar` IN (10048, 90234, 98211, 4002, 90023) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:23:26.383

你想要一个`IN`像

```
SELECT * FROM foo WHERE bar in (10058,90234,98211,4002,90023) 
```

无论如何，在内部，您的数据库引擎将在运行时将其扩展为 OR'ed 堆栈；即喜欢

```
WHERE bar = 10058 or bar = 90234  or bar = 98211 or bar 4002 or bar = 90023 
```

# c - pthread：SIGSEGV 处理程序运行时其他线程是否停止？

> ID：10741006
> 
> 赞同：3
> 
> 时间：2012-05-24T15:54:05.233
> 
> 标签：c, pthreads, signals, solaris, segmentation-fault

我在 Solaris 10 上开发了一个程序。我希望它在崩溃时打印堆栈跟踪。我找到了这个例子：

```
static void pstack()
{
  char buf[256];

  sprintf(buf, "/usr/proc/bin/pstack %d |/bin/tee traceback.txt\n", (int)getpid());
  /* undefine LD_PRELOAD to avoid 64-bit problems */
  (void)putenv("LD_PRELOAD=");
  system(buf);
}
void sighanterm(int signo, siginfo_t *info, void *context) {
    ...
    pstack();
} 
```

有趣的是：在`/usr/proc/bin/pstack`执行时，其他线程也不断打印它们的输出。线程在被调用时恢复`system()`还是根本不停止？我可以在处理程序中明确停止它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:39:01.257

不，handled`SIGSEGV`不会影响任何其他线程（尽管如果它是由内存损坏或其他 UB 引起的，那么 UB 当然会影响其他线程）。`SIGSEGV`另一方面，未处理的会终止整个过程。

# php - 在 alpine linux 上使用 Apache 的 PHP Codeigniter

> ID：10741010
> 
> 赞同：-1
> 
> 时间：2012-05-24T15:54:22.363
> 
> 标签：php, linux, apache, codeigniter, alpine

我编写了一个小型 codeigniter 测试应用程序，目前正在我的 Windows 机器上运行。我创建了一个 linux vm 并尝试在这个新的虚拟服务器上安装该应用程序。我的一些网络应用程序运行正常，但其他部分没有。具体来说，这有效：

```
 http://123.123.123.123/myapp/controller1/ 
```

但这不会：

```
 http://123.123.123.123/myapp/controller2/mymethod/1/2/3 
```

它失败并显示无法加载 controller2_model 的错误。

这是失败的控制器的实际代码（它实际上称为 xferLogger 与 controller2）：

```
 class xferLogger extends CI_Controller { 
      public function __construct() { 
              parent::__construct();
              echo(2); 
              $this->load->model('xferLogger_model'); 
              $this->load->helper('date'); //this library is needed for the base_url() method that is being called in the view "result.php" 
              $this->load->helper('url'); 
      } 
```

这是模型：

```
class xferLogger_model extends CI_Model { 
    public function __construct() { 
              $this->load->database();
                } 
```

完整的错误消息是：遇到错误。无法找到您指定的模型：xferlogger_model。

这是我注意到的一件事。在错误消息中，您会注意到 logger 中的“L”是小写的。但在我的代码中，它是大写的 L。我已经检查了我的控制器、模型本身以及 routes.php 文件。我的外壳似乎找不到任何问题。

??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:51:35.810

来自用户指南：类名的第一个字母必须大写，其余部分小写。因此：

```
class Xferlogger_model extends CI_Model // First letter capitalised 
```

和你的模型负载

```
$this->load->model('xferlogger_model');  // lower case 
```

和你的 PHP 文件名

```
xferlogger_model.php    // lower case 
```

[Codeigniter 模型用户指南](http://codeigniter.com/user_guide/general/models.html)

# python - 转义 Google 全文搜索服务的搜索查询

> ID：10741011
> 
> 赞同：6
> 
> 时间：2012-05-24T15:54:25.250
> 
> 标签：python, google-app-engine, full-text-search

[这是https://groups.google.com/d/topic/google-appengine/97LY3Yfd_14/discussion](https://groups.google.com/d/topic/google-appengine/97LY3Yfd_14/discussion)的交叉帖子

我正在使用 gae 1.6.6 中的新全文搜索服务，但在将查询字符串传递给搜索索引之前，我无法弄清楚如何正确转义查询字符串。文档提到某些字符需要转义（即[数字运算符](https://developers.google.com/appengine/docs/python/search/overview#Numeric_Operators)），但是它们没有指定查询解析器*如何*期望字符串被转义。

我遇到的问题有两个：

1.  未能从许多字符中逃脱废话（比文档中暗示的更多）将导致解析器引发`QueryException`.
2.  当我将查询转义到它不会引发的程度时，数字运算符（>、<、>=、<=）不再正确解析（不考虑到搜索中）。

我设置了一个测试，我`string.printable`输入`my_index.search()`并发现它会`QueryException`在每个“可打印”控制字符上引发，我现在将其剥离，以及星号、逗号、括号、大括号、波浪号等看似无辜的东西. 这些都没有在文档中提到需要转义。

到目前为止，我已经尝试过：

*   `cgi.escape()`
*   `saxutils.escape()`将 ascii 映射到 urlencoded 等价物（例如`,`-> `%2C`）
*   `saxutils.escape()`将 ascii 映射到 html 实体编码的 ascii 代码（例如`&#123;`）
*   `urllib.quote_plus()`

到目前为止，我使用 url-style( `%NN`) 替换获得了最好的结果，但是 >、<、>= 和 <= 仍然无法从索引中产生预期的结果。此外，这似乎与转义问题没有任何关系，但`NOT`在类型查询前面使用`field = value`似乎也没有像宣传的那样工作。

### tl;博士

我应该如何在将查询发送到搜索服务之前对其进行转义，以便解析器不会引发`QueryException` *并且*我的查询会产生预期的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:28:40.573

正如[文档中的](https://developers.google.com/appengine/docs/python/search/overview#Query_Language_Overview)简要说明，查询参数是一个字符串，应该符合我们的查询语言。我们应该更好地记录。

现在，我建议您将查询（或至少一些单词/术语）用双引号括起来。这样你就可以传递所有可打印的字符，但是`"`和`\`. 以下示例显示了结果。

```
import string
from google.appengine.api.search import Query
Query('"%s"' % string.printable.replace('"', '').replace('\\', '')) 
```

你甚至可以传递不可打印的字符

```
Query('"%s"' % ''.join(chr(i) for i in xrange(128)).replace('"','').replace('\\', '')) 
```

**编辑**：请注意，用双引号括起来的任何内容都是完全匹配的，即“foo bar”将匹配 ...foo bar... 但不匹配 ...bar foo..

# kml - 将 ArcGIS 制图表示转换为 KML？

> ID：10741012
> 
> 赞同：0
> 
> 时间：2012-05-24T15:54:27.110
> 
> 标签：kml, arcgis

我正在使用制图表示来象征道路，以便两个方向都可见。我需要将其转换为 KML。但是，ArcToolbox 中的图层到 KML 工具会创建一个空文件。是否可以将制图表示转换为 KML？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:48:53.060

There are many options.

1.  Layer to KML - this should work and is moderately easy
2.  Arc2Earth - You can get a limited community edition for free
3.  Excel based tools - get your data in a spreadsheet and upload to any [online](http://www.earthpoint.us/ExcelToKml.aspx) tool or [download](http://www.ehow.com/how_6808709_convert-ms-excel-kml.html) an [offline](http://www.ehow.com/how_8560245_convert-csv-kml.html) based implementation
4.  Google Fusion Tables - requires spreadsheet type data
5.  Python - Either as string templates or using something like [simplekml](http://code.google.com/p/simplekml/)

# c# - 如果我在整个应用程序生命周期中需要 StreamWriter，在哪里处理它？

> ID：10741013
> 
> 赞同：2
> 
> 时间：2012-05-24T15:54:34.017
> 
> 标签：c#

如果我在整个应用程序生命周期中需要 StreamWriter，应该在哪里处理它？我要把它放在析构函数中，这行得通吗？我必须处理以刷新数据，并且我不想使用`AutoFlush`功能，因为来自 msdn：`"You can get better performance by setting AutoFlush to false, assuming that you always call Close (or at least Flush) when you're done writing with a StreamWriter."`

那么我应该`Dispose`像下面的代码那样使用析构函数吗？

```
class Log
{
    private static StreamWriter swLog = new StreamWriter("logMAIN.txt");

    static ~Log()
    {
        swLog.Dispose();
    }

    public static void Push(LogItemType type, string message)
    {
        swLog.WriteLine(type + " " + DateTime.Now.TimeOfDay + " " + message);
    }
} 
```

**upd**而不是`Dispose`我打算打电话`Close`，但在这种情况下它并不重要，因为它们看起来完全一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:00:25.717

您似乎是根据 MSDN 中的某些性能信息决定不刷新。那不是我要开始的地方。

您是否有*证据*表明使用 AutoFlush 会导致*严重*的性能问题？

您是否考虑过以不同的方式缓解这些性能问题，例如让单个线程写入`StreamWriter`，自动刷新或每 20 秒定期刷新或其他方式？

请注意，您还没有告诉我们您正在编写什么样的应用程序——这会对您对关机的了解程度产生重大影响。

另请注意，您提供的代码一开始就不是线程安全的。您最终可能会同时使用`StreamWriter`from 多个线程；我怀疑这`StreamWriter`是专门为这种情况设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:59:24.990

问题实际上`StreamWriter`是初始化的方式。使用像这样的常规对象

```
using (var logger = new Log())
{
    app.Run();
} 
```

`StreamWriter`仍然可以是类中的静态字段，`Log`但在已知时间点进行初始化和处理，而不是使用静态初始化程序。

为此，您需要让日志类实现`IDisposable`接口并`StreamWriter`在`Dispose`方法中处理，如下所示：

```
class Log: IDisposable
{
    private static StreamWriter swLog;

    public Log()
    {
       swLog = new StreamWriter("logMAIN.txt");
    }

    public void Dispose()
    {
        swLog.Dispose();
    }

    public static void Push(LogItemType type, string message)
    {
        swLog.WriteLine(type + " " + DateTime.Now.TimeOfDay + " " + message);
    }
} 
```

还要注意`Log`即使抛出异常也将如何处理。

# javascript - 使用 Javascript 在 Listview ASP.NET 中查看隐藏的 div 标签

> ID：10741016
> 
> 赞同：0
> 
> 时间：2012-05-24T15:54:46.690
> 
> 标签：javascript, asp.net

 `````
<ItemTemplate>
                    <tr bgcolor="#efefef">
                        <td width="10%">
                            <asp:LinkButton ID="btnShowRoles" runat="server">
                                <asp:Image ID="viewRoles" ImageUrl="/images/pointer-down.gif" runat="server" /></asp:LinkButton>
                        </td>
                        <td width="50%" align="left">
                            <font face="verdana" size="1">
                                <asp:Label runat="server" ID="lblParameter"><%#Eval("Name") %></asp:Label>
                            </font>
                        </td>
                        <td width="10%" align="center">
                            <font face="verdana" size="1">
                                <asp:Label runat="server" ID="lblType"><%#Eval("Type.Name")%></asp:Label>
                            </font>
                        </td>
                        <td width="10%" align="center">
                            <font face="verdana" size="1">
                                <asp:Label runat="server" ID="lblRequired"><%#Eval("isGlobal") %></asp:Label>
                            </font>
                        </td>
                        <td width="20%" align="center">
                            <font face="verdana" size="1"><a href='<%#GetRedirectionURL(Eval("ID")) %>'>VIEW</a>
                             </font>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div align="left" class="ShowRoles">
                                <asp:Label ID="Label3" runat="server">GROUPS:</asp:Label>
                                <asp:Label ID="Label4" runat="server"><%#Eval("MarjorieRoles") %></asp:Label>
                            </div>
                        </td>

                    </tr> 
````  `这是 ListView 中我的 ItemTemplate 的代码。我希望第一个链接按钮在单击时显示字段。我是 javascript 新手，完全不知道如何去做。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:01:32.813

这不是一个具体的问题，但我可以为您提供一些建议来帮助您入门。

1) 在 HTML 中，页面上的每个元素都标有一个`id`属性。在 JavaScript 中，您可以使用该函数`document.getElementById`通过其 id 获取元素。您还可以将元素的类与`document.getElementsByClass`.

2）*这*非常重要。任何时候您向页面添加服务器端控件时，都会在生成的 HTML 中为其分配一个 ID，该 ID 可能与您在标记中指定的 ID 完全不同。在 ASP.net 中，您可以通过编写`<%= elementId.ClientID %>`.

3) 像 jQuery 这样的库可能对简化您的开发非常有帮助。使用 jQuery，您将使用该`$.click`函数将事件附加到按钮单击事件。您可以使用该`$.show`功能使隐藏的元素出现。``

# java - 合并谷歌电子表格中的单元格

> ID：10741018
> 
> 赞同：0
> 
> 时间：2012-05-24T15:54:55.990
> 
> 标签：java, javascript, google-sheets, google-spreadsheet-api

最终有一种方法可以[合并](http://support.google.com/docs/bin/answer.py?hl=en&answer=141104)Google 电子表格中的单元格。但我找不到执行此操作的 API。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:21:35.787

有一个[API](https://developers.google.com/apps-script/class_range#merge)可以使用 Google Apps Script 来实现。但是这个 API 只能使用 Apps 脚本代码访问，而不是真正的公共事物，您可以从 java 或“常规”javascript 调用。

好吧，您可以将脚本发布为服务并开发自己的协议来执行此操作，您可以从“外部”程序中调用它。但这有点麻烦。如果您可以在 Apps Script 中编写所有内容，那就更好了。

# django - 如何在 Django 中登录用户？

> ID：10741020
> 
> 赞同：0
> 
> 时间：2012-05-24T15:55:03.600
> 
> 标签：django, login

我目前正在做一个 Django 项目以更熟悉 Django。目前我正在尝试制作两个模板，一个是带有登录页面链接的主页，它将登录用户然后返回模板并显示其他内容（将通过 nginx 处理）和另一个模板只能在登录时访问。出于某种原因，但似乎不起作用，或者说登录不起作用。

这是views.py 文件：

```
from django.shortcuts import render_to_response, get_object_or_404, HttpResponse
from django.contrib.auth import *
from django.contrib.auth.decorators import login_required

def index(request):
        return render_to_response('index.html')

@login_required
def main(request):
    return render_to_response('loginrequired.html') 
```

这是主要模板：

```
{% load static %}
{% get_static_prefix as STATIC_PREFIX %}

<html>
<head>
<title>Django NGINX Test</title>
</head>
<body>
<h1>Django NGINX Test</h1>
<img src="{{STATIC_PREFIX}}beach.jpg"/>
<BR><BR>
<h2>
{% if user.is_authenticated %}
  <a href="test">Log out</a> {{user.username}}
{% else %}
  <a href="login">Log in</a>
{% endif %}
</h2>
</body>
</html> 
```

这是 login_required 模板：

```
{% load static %}
{% get_static_prefix as STATIC_PREFIX %}

<html>
<head>
<title>Django NGINX Test</title>
</head>
<body>
<h1>Django NGINX Test</h1>
<img src="{{STATIC_PREFIX}}beach.jpg"/>
<BR><BR>
Welcome {{user.username}}. You're now logged in as required.<BR><BR>
<h2>
{% if user.is_authenticated %}
  <a href="test">Log out</a> {{user.username}}
{% else %}
  <a href="login">Log in</a>
{% endif %}
</h2>
</body>
</html> 
```

最后，但并非最不重要的是我的登录模板：

```
<html>
<head>
    <title>User Login</title>
</head>
<h1>User Login</h1>
{% if form.errors %}
    <p>Your username and password didn't match.
        Please try again.</p>
{% endif %}
<form method="post" action="." >
{% csrf_token %}
    <p><label for="id_username">Username:</label>
        {{ form.username }}</p>
    <p><label for="id_password">Password:</label>
        {{ form.password }}</p>
    <input type="hidden" name="next" value="/" />
    <input type="submit" value="login" />
</form>
</body>
</html> 
```

我将不胜感激任何帮助。我已经为此研究过Django Tutorial，但我没有得到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:52:46.733

您需要确保在您的 中包含以下中间件`settings.py`：

*   会话中间件
*   身份验证中间件

要确保名为的上下文变量`user`可用于您的模板，您需要确保`django.contrib.auth.context_processors.auth`上下文处理器位于您的`settings.py`.

更多信息可以在[Djano auth 主题](https://docs.djangoproject.com/en/1.4/topics/auth/#authentication-in-web-requests)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:57:03.687

用户已登录，但您没有将其传递给模板，因此它不会显示用户详细信息。确保使用 RequestContext 呈现模板，或使用新的`render`快捷方式而不是`render_to_response`.

# javascript - Chrome 和 IE 不显示 XML 文件中的标记值

> ID：10741024
> 
> 赞同：0
> 
> 时间：2012-05-24T15:55:26.037
> 
> 标签：javascript, html, xml, internet-explorer, google-chrome

我有以下 HTML 代码：

```
<html>
<body>
<h1>W3Schools Internal Note</h1>
<div>
 <b>To:</b> <span id="to"></span><br />
<b>From:</b> <span id="from"></span><br />
<b>Message:</b> <span id="message"></span>
</div>

<script type="text/javascript">
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
 }
else
 {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","languages.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

document.getElementById("to").innerHTML=
 xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
document.getElementById("from").innerHTML=
xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
document.getElementById("message").innerHTML=
xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;
</script>

</body>
</html> 
```

此代码适用于 Firefox，但不适用于 Chrome 和 IE。我的意思是 Firefox 显示 XML 文档中 XML 标记的结果，但 Chrome 和 IE 不显示！！！请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:19:04.557

尝试替换`nodeValue`所有`textContent`元素。如果这不是解决方案，请发布您的 XML。

# javascript - 如何在 BackboneModel 中制作缓存/存储器

> ID：10741031
> 
> 赞同：1
> 
> 时间：2012-05-24T15:55:47.293
> 
> 标签：javascript, backbone.js

假设我有一个 View 可以制作 model.fetch() 然后向服务器发出请求。

我想实现：
1）能够记住结果的检查器
2）仅当对服务器的最后一次请求超过十分钟时才刷新结果（向服务器发出请求）。

我应该怎么办？
是否已经有一段代码可以做到这一点？

```
define([], function() {

    var MyModel = Backbone.Model.extend({

    url: function () {
        return "http://localhost/restapi/model/";
    },

    fetch () {
        if(diffTime > 10minutes) {
            // make request to the server
        }
        else {
            // return memo
        }
    }    

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:01:12.797

您需要覆盖 Backbone.sync 方法[http://documentcloud.github.com/backbone/#Sync](http://documentcloud.github.com/backbone/#Sync)。

此代码保存到本地存储以实现缓存[http://documentcloud.github.com/backbone/docs/backbone-localstorage.html](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)。

如果数据超过 10 分钟，在“读取”情况下添加一些逻辑以从服务器获取是相当简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:07:42.083

正如 codemonkey 所说，localstorage 将是一个不错的选择。但是，如果您不想为此使用库，则可以使用此类来扩展那些需要缓存功能的模型。

```
var CachedModel = Backbone.Model.extend({

    lastFetch: null,    // millisec.
    cache: { }
    fetch: function () {
        if(!this.lastFetch || (lastFetch - Date.now() > 10*60*1000) {
            // make request to the server
        }
        else {
            // return this.cache
        }
    }    

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T00:24:52.713

我发现[https://github.com/Ask11/backbone.offline](https://github.com/Ask11/backbone.offline)非常适合我。

唯一的缺点是它使用 localStorage，您还可以通过重写用于 amplify.store [http://amplifyjs.com/api/store/](http://amplifyjs.com/api/store/)的点点滴滴来选择更多支持。

# asp.net - 如何在 SharePoint 中创建交互式图像

> ID：10741035
> 
> 赞同：0
> 
> 时间：2012-05-24T15:55:58.800
> 
> 标签：asp.net, interactive

我正在将桌面培训应用程序转换为 SharePoint 2007 网站。这有点难以描述，但该应用程序的一个功能是一段培训说明和一张照片。想象一下左边是厨房的照片，右边是关于如何使用厨房的可滚动文本信息部分。右侧的文本将是来自 SP 可重用内容的富文本。这张照片在厨房的各个景点上标记了几个点，并带有一个小颜色编码框，其中包含对它旁边的点的文字描述。当您将鼠标悬停在右侧部分的文本说明上时，需要突出显示厨房该区域的相应点（点和描述框上的边框较粗或较宽，可能是较浅的背景颜色）。

我对 asp.net 的体验是非常受数据驱动的，从那时起，网络变得更加具有视觉能力。DHTML、Silverlight 或其他东西会是最好的选择吗？我们不能使用 Flash。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:35:58.303

我确定 DHTML 或 Silverlight 都可以。我们最终选择了 Silverlight 5，因为我们更擅长该技术，即使可能没有 Silverlight 6，MS 仍将继续支持 Silverlight 5 足够长的时间来满足我们的需求（直到 2023 年或类似的时间）。我试了一下 jquery MapHilight 插件，但找不到任何关于如何使用它的支持

# asp.net-mvc - asp.net MVC 3 - 在参数化控制器方法中读取 POST 有效负载

> ID：10741045
> 
> 赞同：0
> 
> 时间：2012-05-24T15:56:40.093
> 
> 标签：asp.net-mvc

我有

```
[HttpPost]        
public ActionResult Foo()
{
    // read HTTP payload
    var reqMemStream = new MemoryStream(HttpContext.Request.BinaryRead(HttpContext.Request.ContentLength));
 ....
} 
```

有效载荷是application/json；工作正常；然后我改为

```
public ActionResult Foo(string thing)
{
....
} 
```

目的是发布到`MyController/Foo?thing=yo` 现在我无法读取有效负载（长度正确但流为空）。我的猜测是控制器管道已经吃掉了寻找可以映射到方法参数的表单发布数据的有效负载。有什么方法可以阻止这种行为（当然 MVC 不应该吃掉类型标记为 JSON 的有效负载，它应该只查看表单发布数据）。我的解决方法是在 json 中添加“东西”，但我不太喜欢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:20:14.437

在读取之前尝试重置输入流位置：

```
public ActionResult Foo(string thing)
{
    Request.InputStream.Position = 0;
    var reqMemStream = new MemoryStream(HttpContext.Request.BinaryRead(HttpContext.Request.ContentLength));
    ....
} 
```

话虽如此，如果您要发送`application/json`有效负载，为什么在神圣的地球上您还要费心直接读取请求流，而不是简单地定义和使用视图模型：

```
public class MyViewModel
{
    public string Thing { get; set; }
    public string Foo { get; set; }
    public string Bar { get; set; }
    ...
} 
```

进而：

```
public ActionResult Foo(MyViewModel model)
{
    // use the model here 
    ....
} 
```

ASP.NET MVC 3 有一个内置功能，`JsonValueProviderFactory`可让您自动将 JSON 请求绑定到模型。如果您使用的是旧版本，那么添加这样的工厂非常容易，正如 Phil Haack 在[他的博客文章](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx)中所说明的那样。

# c# - 哪些工具/项目将允许在 IIS 和 Apache 中捕获 HTTP 请求/响应

> ID：10741046
> 
> 赞同：0
> 
> 时间：2012-05-24T15:56:41.570
> 
> 标签：c#, .net, linux, apache, iis

我正在考虑一个用于 IIS 的 HttpModules、一个 Pre 和 Post 请求处理程序以及一些用于 Apache 的自定义模块。

请只建议开源，我们需要修改项目。

我们希望在我们的大批量生产系统上运行这些工具，因此强调调试的工具不是我们想要的。我们想要最简单的捕获范例。

我们想为特定网站捕获数据，而不是为接口捕获数据，所以我不看数据包嗅探器。

我们更喜欢进程内解决方案，这意味着避免使用wire-shark、squid 或其他基于代理的解决方案。

一个不错的选择是能够在另一个环境中重放请求流，但我相信如果我们能够以合理的方式捕获请求，我们可以自己构建它。

任何想法、建议和问题都将很乐意接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:25:45.797

记录日志的代理服务器是最好的，但您已经排除了这种可能性。除此之外，您需要为每个 Web 服务器提供一个产品。对于 IIS，是的，一个 HttpModule 是要走的路。要重播它们，这可能是一个精心设计的日志查看器。这通常是代理服务器的一项功能。甚至 Fiddler 也有捕捉和回放的能力。

# android - 我们可以在 Android 中制作类似 comodo 防火墙的东西吗？

> ID：10741055
> 
> 赞同：0
> 
> 时间：2012-05-24T15:56:57.293
> 
> 标签：android, android-layout, android-intent, android-emulator

AFAIK，可能需要在低级 linux 上工作才能完成这项工作，或者使用定理证明器来分析程序，而无需了解底层程序。此外，AFAIK 每个程序都在自己的沙箱中进行控制，因此不会影响其他程序。

然而，在过去的一年中，研究人员已经证明，即使他们的程序最初没有请求许可，他们也可以“借用”其他程序的许可。不幸的是，这使得 Android 的可信度大大降低，因为它的安全模型本质上是仅在安装时基于权限的。我想确保这种攻击（我的意思是恶意获取程序不应该拥有的权限）的一种方法是实时监控程序间通信。

由于 dalvik 不是开源的，Android 本身也不是开源的（除了开放的 API），任何人都可以想出一种方法，只使用 Java，在 Android 中实现一个动态和实时的防火墙，至少可以确保没有程序可以启动另一个没有每次我们的明确许可（更像comodo防火墙的工作方式）？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:26:20.623

在制作任何软件之前，您可能已经完全了解该软件的功能。您正在尝试制作像 comodo 防火墙这样的软件，那么您必须知道 comodo 防火墙是如何工作的，它如何阻止任何软件活动，它如何监控网络活动以及 comodo 防火墙可以执行的许多其他活动。如果您对此没有基本了解，请先了解它，然后再考虑..从这里下载并了解它..

[http://www.filekb.com/windows/download-comodo-firewall/](http://www.filekb.com/windows/download-comodo-firewall/)

# jquery - 弹出窗口中的非工作选择器

> ID：10741058
> 
> 赞同：0
> 
> 时间：2012-05-24T15:57:10.600
> 
> 标签：jquery, popup, selector

我在弹出窗口中有一个通过 ajax 请求加载的表单。例如输入：

```
 <input id="target" type="text" value="123"> 
```

和脚本：

```
 test = $('#target').val();
  console.log(test); //shows nothing
  test2 = $('input#target').val();
  console.log(test2); //shows 123 
```

这种行为的原因是什么？输入的 ID 是唯一的。如果重要，项目会写在 YII 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:03:42.003

这种错误通常表明`id`您的页面上有重复的属性，这是无效的。要测试此用途：

```
alert($("#target").length); 
```

如果你看到 0 或 1，那就是正确的。如果您看到大于 1，那么您需要修复重复项。

# windows - 尺寸大于屏幕尺寸的表单截图

> ID：10741059
> 
> 赞同：7
> 
> 时间：2012-05-24T15:57:20.297
> 
> 标签：windows, delphi, delphi-2010, screenshot, tform

我有一个 TForm 对象，其高度大于屏幕所需的垂直分辨率。

出于某种原因，Windows 不允许表单的可见（客户端？）区域超过屏幕分辨率，因此垂直滚动条出现在我的表单上。

如何获得整个表单的 TBitmap 图像或屏幕截图（没有滚动条，所有表单组件可见），以便表单的所有内容都可见？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:26:15.190

首先，您必须确保表单没有滚动条。为此，您可以为 FormConstrainedResize 编写事件处理程序并根据需要调整 MaxWidth 和 MaxHeight。如果在设计过程中表单大小受到限制，请在 FormCreate 事件中将所需的 Width 和 Height 设置为所需的值。

现在您可以使用 GetFormImage 来获取屏幕截图。

# ruby-on-rails - 如何使用 ruby on rails helpers 格式化 json 数据？

> ID：10741069
> 
> 赞同：1
> 
> 时间：2012-05-24T15:57:56.747
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3.2, handlebars.js

在过去的几天里，我一直在阅读并熟悉 handlebars.js 模板，这很棒。

现在我正在使用我的一个部分，它有一堆 html，我在其中使用了诸如 simple_format、time_ago_in_words 等助手。显然，这些助手不能与车把一起使用。所以我想做这样的事情：

```
def get_micropost

   respond_to do |format|   
     format.json { render json: formatted_micropost_json_data(Micropost.where("id < ?", params[:micropost_id]).first) } 
   end

end 
```

**微博助手：**

```
module MicropostsHelper

    def formatted_micropost_json_data(micropost)

        content: simple_format h(micropost.content)
        created_at: time_ago_in_words(micropost.created_at)
        id: micropost.id
        image: micropost.image
        link: micropost.link
        poster_id: micropost.poster_id
        updated_at: micropost.updated_at 
        user_id: micropost.user_id 

    end

end 
```

因此，当我通过 ajax 调用返回 JSON 时，它的格式已经正确。然后我可以简单地像往常一样显示我的车把变量。

这甚至会起作用吗？

如果不是，最好的方法是什么？

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:55:17.187

这是我建议的代码重写：

```
class Micropost
  def formatted_json_data
    {
      content:    simple_format(h(self.content)),
      created_at: time_ago_in_words(self.created_at),
      id:         self.id,
      image:      self.image,
      link:       self.link,
      poster_id:  self.poster_id,
      updated_at: self.updated_at,
      user_id:    self.user_id
    }
  end
end

def get_micropost
  respond_to do |format|   
    format.json do
      posts = Micropost.where("id < ?", params[:micropost_id])
      data = posts.first.formatted_json_data
      render(json: data)
    end
  end
end 
```

You wanted to your a hash literal inside your method - what you had originally was not syntactically-valid ruby code.

Also breaking up the long line of chained method calls might make for more informative error messages and provide clearer opportunities to handle them.

# android - ListView 读取文件，但 WebView 不会显示

> ID：10741072
> 
> 赞同：0
> 
> 时间：2012-05-24T15:58:13.020
> 
> 标签：android, listview, webview

我正在使用 ListView 列出文件夹中的所有图片，然后在 onListItemClick 中启动另一个活动，将名称传递给它并在下一个活动的 webview 中显示图片。即使图片在文件夹中并且 ListView 正确读取它，WebView 也不会显示它，有什么想法吗？

这是我的代码：

```
public class Dives extends ListActivity {

private File currentDir;

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
     currentDir = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "DivePlanner" + File.separator);

     FilenameFilter filter = new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return (name.endsWith("png") || name.endsWith("jpg") || name.endsWith("jpeg") || name.endsWith("PNG") || name.endsWith("JPG") || name.endsWith("JPEG"));
            }
        };

    String[] values = currentDir.list(filter);
     if (values == null) 
        {
         Toast.makeText(getApplicationContext(), "Error", 500).show();
        } 

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values);
     setListAdapter(adapter);
     getListView().setBackgroundDrawable(getResources().getDrawable(R.drawable.diver));
}

@Override

protected void onListItemClick(ListView list, View v, int position, long id) {
    list.setBackgroundDrawable(getResources().getDrawable(R.drawable.diver));
    String item = (String) getListAdapter().getItem(position);

    Intent myIntent = new Intent(this, DisplayDive.class);

    Bundle B = new Bundle();
    B.putString("jmeno", item);
    myIntent.putExtras(B);

    this.startActivity(myIntent);

} 
```

}

显示文件并在 OnClick 中启动另一个显示文件的活动：

```
public class DisplayDive extends Activity {
/** Called when the activity is first created. */
WebView myWebView;
String jmeno;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.table);
    Bundle extras = this.getIntent().getExtras();
    if(extras!=null) jmeno = extras.getString("jmeno");

    myWebView = (WebView)findViewById(R.id.myWebView);
    myWebView.setInitialScale(100);
    myWebView.getSettings().setBuiltInZoomControls(true);
    myWebView.loadUrl(Environment.getExternalStorageDirectory().getAbsolutePath()+ File.separator + "DivePlanner" + File.separator + jmeno);

} 
```

}

WebView 总是以页面不可用/mnt/sdcard/DivePlanner/file_name.jpeg 结束

还有一件事：我真的不明白为什么手机内存中的文件夹，不应该在SD卡上吗？（我将一些 png 从我的应用程序导出到此文件夹，令我惊讶的是，该文件夹不是在 SD 卡上创建的，而是在手机上创建的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:14.920

您将需要附加 Webview 的方案以显示它。

```
文件：///mnt/sdcard/潜水.....

```

是什么让你断定文件在手机上？

# php - 将函数的动态输出大小与目标文件进行比较，并进行重写

> ID：10741073
> 
> 赞同：1
> 
> 时间：2012-05-24T15:58:13.633
> 
> 标签：php

我有一个基于表单设置编写文本文件的功能，一个相当大的表单。

简而言之，我想将函数的输出与单个文件进行比较，并且仅在目标文件与输出不同时才执行（重写文件）。正如您所猜测的，这是一个性能问题。

可行吗，顺便说一句

过程是，我填写了一些表格：

1.  写入单个文件以包含一些“特定”选定选项

2.  一些“非特定”选项不一定向文件写入任何内容。

表格可以随时更新，因此文件的内容可能会根据不同的选项而增长或缩小。

如果我在第 1 点，它只需要重写文件。在第 2 点时，不应写入任何内容。

这是我尝试过的：

```
if ($output != file_get_contents($filepath)) {
  // save the data
} 
```

但我觉得在这方面的执行延迟了很多。

我在这里发现了一个几乎类似的问题：[我可以使用 file_get_contents() 来比较两个文件吗？](https://stackoverflow.com/questions/3060125/can-i-use-file-get-contents-to-compare-two-files)，但我的问题不同。我正在将该过程的结果与一个已经存在的文件进行比较，该文件只是之前该过程的结果。并且仅在它们不同时才重写文件。

顺便说一句，表单上没有敏感数据。非常感谢任何提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:05:43.660

与其将整个文件加载到内存中，不如逐行读取它（`fgets`）并将其与输入字符串逐行比较可能会更快。您甚至可以逐个字符地缩小，但我认为这太过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:09:52.510

要将整个文件与字符串进行比较（我想它是一个字符串，不是吗？）唯一的方法是读取整个文件并进行比较。为了提高性能，您可以逐行读取文件并在第一行停止，正如*Explosion Pills*在我之前所说的那样。

如果你的文件真的很大，并且你想进一步提高性能，你可以做一些散列的东西：

*   生成输出，比方说`$output`。
*   计算`md5($output)`并存储在`$output_md5`.
*   `$output_md5`与存储的比较，比方说在 file `output.md5`。
*   **他们平等吗？**
    *   如果**是**，什么也不做。
    *   如果**没有**，保存`$output`到`output.txt`和`$output_md5`中`output.md5`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:13:54.473

您总是可以尝试将另一篇文章中的`sha1_file($file)`功能与`sha1($string)`功能结合起来，并检查它的相等性。

# sql - SQL 模式和值

> ID：10741074
> 
> 赞同：2
> 
> 时间：2012-05-24T15:58:15.873
> 
> 标签：sql, sql-server

我有一个我想做的选择声明。我要选择

```
SELECT COLUMN_NAME AS FieldName FROM   
INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'table1' 
```

但是我想创建另一个名为 Value 的列，它是 table1 中的特定行，所以我有列名的行和相应的单个值。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:10:24.803

以下查询为每列生成一个值（最小值）：

```
 SELECT '''select '+COLUMN_NAME+''' AS FieldName, (select cast(MIN('+COLUMN_NAME+') as varchar(8000)) from '+const.tablename+')'
    FROM INFORMATION_SCHEMA.COLUMNS c cross join
         (select 'AllCurveNames' as tablename) const
    WHERE c.TABLE_NAME = const.tablename 
```

但是，这会为每一行生成一个单独的查询。要将它们组合在一起，您需要一个字符串聚合连接。这就是您在 SQL Server 中的操作方式：

```
 declare @sql varchar(max);

    SELECT @sql = (select 'select '''+COLUMN_NAME+''' AS FieldName, (select cast(MIN('+COLUMN_NAME+') as varchar(8000)) from '+const.tablename + ') union all '
                   FROM INFORMATION_SCHEMA.COLUMNS c cross join
                        (select WHATEVER as tablename) const
                   WHERE c.TABLE_NAME = const.tablename
                   for xml path('')
                  );
    select @sql = LEFT(@sql, len(@sql) - 9);
    exec(@sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:06:25.220

使用交叉连接，如果您只是从两个没有连接的表中选择（即`from t1, t2`），则这是隐式的：

```
SELECT COLUMN_NAME AS FieldName,
       Table1.MyField
FROM
    INFORMATION_SCHEMA.COLUMNS, Table1
WHERE
    TABLE_NAME = 'table1'
AND
    MyTable.ID = 123 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:59:53.867

我实际上想出了一个疯狂的解决方案，但它确实有效：

```
declare @tbl_name as varchar(255)
declare @field as varchar(255)
declare @val as varchar(255)
declare @SQL as nvarchar(4000)

create table #tbl ( [FieldName][varchar](255), [FieldVal][varchar](255))

set @tbl_name = 'table1'

DECLARE mah_cursor CURSOR FAST_FORWARD 
FOR 
SELECT COLUMN_NAME FROM  
INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = @tbl_name

OPEN mah_cursor

FETCH NEXT FROM mah_cursor INTO @field 

WHILE @@FETCH_STATUS = 0
BEGIN

set @SQL = 'set @val = (Select top 1 ' + @field + ' from ' + @tbl_name + ')' 
print @SQL

exec sp_executesql @query = @SQL, @params = N'@val varchar(255) OUTPUT', @val = @val      OUTPUT

 insert into #tbl ([FieldName],[FieldVal] ) values (@field, @val)

 FETCH NEXT FROM mah_cursor INTO @field
 END

CLOSE mah_cursor 
DEALLOCATE mah_cursor 

select * from #tbl

drop table #tbl 
```

它遍历每个值并添加它。Fast_Forward 功能优化查询以获得高性能

# database - 如何在 phpmyadmin 中设置数据库的读/写权限？

> ID：10741080
> 
> 赞同：0
> 
> 时间：2012-05-24T15:58:33.863
> 
> 标签：database, permissions, phpmyadmin, readonly, read-write

我正在一个 wordpress 网站上工作，因为数据库已设置为只读，所以没有人能够访问仪表板。我可以访问 phpmyadmin，但我不知道如何将数据库更改回读/写。

据我所知，我拥有完全权限（例如，我可以修改表，并且我成功创建了一个新的管理员帐户）

我试过使用查询：

`使用主人;

去

ALTER DATABASE 数据库名称

设置读写；

去`

但我得到了错误

> # 1044 - 用户 'xxx'@'localhost' 拒绝访问数据库 'master'

这是更改 msql 数据库权限的正确做法，还是我在叫错树？如果它是正确的树，是否只是获得 root 访问权限的情况？

谁能指出我正确的方向？

提前致谢，

育空地区

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:59:48.870

如果您也在使用 CPanel，请转到 MySQL 部分并更改用户的权限，以确保启用所有这些以确保这不是权限问题。还要检查您在连接中使用的用户名是否正确。

# java - java - 如何在java中压缩或提取时向zip实用程序添加进度条？

> ID：10741081
> 
> 赞同：5
> 
> 时间：2012-05-24T15:58:36.847
> 
> 标签：java, swing, zip, progress-bar, unzip

我想在我的 Swing 应用程序中显示进度条，它将压缩选定的文件。对于这个过程，我想在处理时显示一个进度条。它可能在 JOptionPane 或给定面板中作为实用程序的参数。

```
//Select a text file to be zip    
JFileChooser chooser = new JFileChooser();
chooser.setCurrentDirectory(new File("."));

chooser.setFileFilter(new javax.swing.filechooser.FileFilter() {
  public boolean accept(File f) {
    return f.getName().toLowerCase().endsWith(".txt")
        || f.isDirectory();
  }

  public String getDescription() {
    return "GIF Images";
  }
});

String source ="";
int r = chooser.showOpenDialog(new JFrame());
if (r == JFileChooser.APPROVE_OPTION) {
   source = chooser.getSelectedFile().getPath();
  File file = chooser.getSelectedFile();

//Start ZIP
try {

        String target = "upload/data-1.zip";
        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(target));
        FileInputStream fis = new FileInputStream(file);

        // put a new ZipEntry in the ZipOutputStream
        zos.putNextEntry(new ZipEntry(file.getName()));

        int size = 0;
        byte[] buffer = new byte[1024];
        JProgressBar pb = new JProgressBar();
        pb.setStringPainted(true);
        pb.setIndeterminate(true);

        JPanel panel = new JPanel();
        panel.add(pb);
        JOptionPane.showInputDialog(panel);

        // read data to the end of the source file and write it to the zip
        // output stream.
        while ((size = fis.read(buffer, 0, buffer.length)) > 0) {
                zos.write(buffer, 0, size);
               pb.setValue(size);
               pb.repaint();
               if (size >= file.size) {
                 panel.dispose();
               }
            <<HERE I TRIED TO GIVE PROGRESS ABR VALUE BUT NOT SUCCEDED>>
        }

        zos.closeEntry();
        fis.close();

        // Finish zip process
        zos.close();
        System.out.println("finished");
} catch (IOException e) {
        e.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:37:34.750

考虑使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。`process()`您可以使用方法使用中间结果更新 UI 。此外，`SwingWorker`具有绑定`progress`属性。您可以使用[setProgress()](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#setProgress%28int%29)来更新它。然后，添加`PropertyChangeListener`以响应`progress`属性更新。

查看[如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。文章通过进度条演示了 SwingWorker 的协作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:41:37.827

您无法在 EventDispatchThread 上压缩文件，或者您的 Gui 在此过程中被阻止并且您不会在 ProgressBar 中看到进度。使用 SwingWorker。

# java - 静态 ImageIcon 是否有 getClass().getResource() 的替代方法

> ID：10741084
> 
> 赞同：7
> 
> 时间：2012-05-24T15:58:44.923
> 
> 标签：java, static, imageicon

好的，所以我得到了一个静态的 ImageIcon 并且图像只是没有显示出来。在同一个程序中，我使用其他 ImagesIcon 但它们不是静态的，所以当我声明它们时，我会这样做：

```
public ImageIcon blabla = new ImageIcon(getClass().getResource(blabla.png)); 
```

但是，如果我声明一个 ImageIcon Static，我将无法使用该行，因为无法从静态值访问 getClass()。现在这些图像没有使用这个显示：

```
public static ImageIcon blabla = new ImageIcon(blabla.png); 
```

谢谢你的帮助！

```
public static ImageIcon networkOfflineIcon = new ImageIcon("Images/networkOfflineIcon.png");
public static ImageIcon networkIcon = new ImageIcon("Images/networkIcon.png");
protected static JMenuItem jmiRemote = new JMenuItem("  Remote", networkOfflineIcon);
//************************************************************************
public static void changeNetWorkStatus(boolean network_status)          
//************************************************************************
{
    if(network_status){
        Application.jmiRemote.setIcon(networkIcon);
        Application.jmiRemote.setText("NetWork Online/Remote is On");
        Application.lockScreenRemote();

    }else if(!network_status){
        Application.jmiRemote.setIcon(networkOfflineIcon);
        Application.jmiRemote.setText("NetWork Offline/Remote is Off");
        Application.unlockScreenRemote();
    }
}//DOESNT CHANGE THE IMAGE
//************************************************************************ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:02:15.217

在静态上下文中，您可以编写：

```
public ImageIcon imageIcon = new ImageIcon(MyClass.class.getResource("icon.png")); 
```

或者，或者尝试[`ImageIO.read(new File("icon.png"))`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)

# progress-4gl - 使用嵌入 .NET 控件的进度 opensge

> ID：10741089
> 
> 赞同：0
> 
> 时间：2012-05-24T15:59:02.410
> 
> 标签：progress-4gl, openedge

有人可以指出如何将.NET 控件嵌入到进度应用程序中的正确方向。谢谢！！

编辑：我正在使用 10.2b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:06:00.387

如果您尝试使用 OpenEdge 进行任何 .NET 编程，我强烈建议您从 John Sadd 的优秀视频系列开始，该视频系列正好涵盖了这一点。事实上，我建议您在开始阅读 Progress 提供的任何手册（而且有很多！）之前，先浏览这些视频。

跑——不要走路——到[http://communities.progress.com/pcom/docs/DOC-101140](http://communities.progress.com/pcom/docs/DOC-101140)开始观看！

希望这会有所帮助（我知道会的！）

# oracle - 更新 Sysdate - Oracle 中的 10 分钟

> ID：10741093
> 
> 赞同：2
> 
> 时间：2012-05-24T15:59:16.323
> 
> 标签：oracle, sysdate

我需要用 sysdate 更新一个日期列，但已经过了 10 分钟。有什么办法吗？

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T16:01:04.850

```
UPDATE the_table
   SET the_column = current_timestamp - interval '10' minute
WHERE pk = 42; 
```

它确实有效，请参见此处：[http ://sqlfiddle.com/#!4/a1986/2](http://sqlfiddle.com/#!4/a1986/2)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T16:05:49.073

大概是这样

```
select sysdate - 10/(24*60) from dual; 
```

# c# - 如何知道提供的设备令牌是真实的？

> ID：10741098
> 
> 赞同：2
> 
> 时间：2012-05-24T15:59:37.323
> 
> 标签：c#, iphone

我正在为 iPhone 应用程序开发服务器端。这个应用程序能够订阅事件（推送通知）。是否有可能知道提供的 devide 令牌是真实的（以防止垃圾邮件）？恐怕有人可以订阅数百万个假设备，我的“推送”服务会不堪重负。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:05:49.190

您可以做的是向 iPhone 应用程序添加另一个参数（如果您愿意，可以使用“安全”参数）；当您在服务器中注册您的 iPhone 时，请求可能会发送一个**只有您知道**的标识符参数，这样在存储新的设备令牌之前，您可以检查“安全”参数是否正确。

# wpf - WPF XAML 动画属性路径不起作用

> ID：10741099
> 
> 赞同：2
> 
> 时间：2012-05-24T15:59:41.667
> 
> 标签：wpf, xaml, animation, properties, path

我正在尝试为 Metro 风格按钮的内容设置动画。我的问题是按钮的内容不会改变颜色。前景色不变。

这是我的按钮样式：

```
 <Style x:Key="MetroButtonStyle"
       TargetType="Button">
    <Setter Property="MinWidth"
            Value="40"/>
    <Setter Property="Width"
            Value="100"/>
    <Setter Property="MinHeight"
            Value="88"/>
    <Setter Property="HorizontalAlignment"
            Value="Center"/>
    <Setter Property="Foreground"
            Value="White"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="AppButton"
                        Width="{TemplateBinding Width}"
                        Height="{TemplateBinding Height}">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0"
                                                     To="1"
                                                     Storyboard.TargetProperty="(UIElement.Opacity)"
                                                     Storyboard.TargetName="MouseOverEllipse"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <DoubleAnimation Duration="0"
                                                     To="1"
                                                     Storyboard.TargetProperty="(UIElement.Opacity)"
                                                     Storyboard.TargetName="PressedEllipse"/>
                                    <ColorAnimation Duration="0"
                                                    To="Black"
                                                    Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)"
                                                    Storyboard.TargetName="EllipseInnerContent"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Duration="0"
                                                    To="#7F8D8D8D"
                                                    Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)"
                                                    Storyboard.TargetName="EllipseInnerContent"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center">
                        <Grid Margin="0,14,0,5"
                              HorizontalAlignment="Center"
                              MinWidth="40">
                            <Ellipse x:Name="PressedEllipse"
                                     Fill="{TemplateBinding Foreground}"
                                     Opacity="0"
                                     Width="40"
                                     Height="40"/>
                            <Ellipse x:Name="MouseOverEllipse"
                                     Fill="#7F8D8D8D"
                                     Opacity="0"
                                     Width="40"
                                     Height="40"/>
                            <Ellipse Fill="Transparent"
                                     Stroke="{TemplateBinding Foreground}"
                                     StrokeThickness="2"/>
                            <ContentPresenter x:Name="EllipseInnerContent"
                                              Content="{TemplateBinding Content}"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Grid>
                        <TextBlock x:Name="LabelText"
                                   TextWrapping="Wrap"
                                   HorizontalAlignment="Center"
                                   FontFamily="Segoe UI"
                                   FontSize="12"
                                   Text="{TemplateBinding Tag}"
                                   Foreground="{TemplateBinding Foreground}"/>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是我如何使用它。这不起作用：

```
 <Button Style="{StaticResource MetroButtonStyle}"
                                Tag="Blah">
                            <TextBlock Text="XXX"/>
                        </Button> 
```

这有效：

```
 <Button Style="{StaticResource MetroButtonStyle}"
                                Tag="Blah"
                                Content="XXX"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:36:13.180

你有

```
Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)"
Storyboard.TargetName="EllipseInnerContent" 
```

在您的动画中，`EllipseInnerContent`a在哪里，`ContentPresenter`并且 . 上没有`Foreground`属性`ContentPresenter`。

将其更改为`ContentControl`.

此外，当将 a`TextBlock`作为控件的内容时，它将继承它所属的页面\用户控件的前景。`DataTemplate`改为使用`TextBlock`为您创建，然后它将继承按钮的前景。

# java - 基本 JSF 2 和 tomcat 6 操作结果导航问题

> ID：10741101
> 
> 赞同：1
> 
> 时间：2012-05-24T15:59:46.597
> 
> 标签：java, jsf, tomcat6

我在 tomcat 6 上有一个带有 mojara EL 2.2 的 JSF 2.0，并且在开发过程中它已经工作了一段时间。我最近添加了一个带有用于登录的命令按钮（基本内容）的表单，它在操作 doLogin 处检查托管 bean 中的用户名和密码。

```
public String doLogin(){
    FacesMessage message = null;
    if((username.equals("user"))&&(password.equals("pass")))
        return "testpage.xhtml";
    else
        message = new FacesMessage("Invalid username or password");

    FacesContext.getCurrentInstance().addMessage(null, message);

    return null;
} 
```

问题是，在它通过 doLogin 并返回**“testpage.xhtml”**后，会显示相同的页面。即使我在 WebContent 的根目录中拥有所有 xhtml 文件。

在tomcat的控制台中，我得到：

> JSF 的 ELResolver 未向 JSP 容器注册。

使用 EL 2.2 传递参数可以正常工作。

我将 JSF 与 Facelets 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:17:00.497

从 JSF 2.0 开始引入隐式导航。在旧的 JSF 1.x 中，您需要定义一个`<navigation-rule>`in`faces-config.xml`或显式调用`ExternalContext#redirect()`一个 URL。

此问题表明您的 JSF 2.0 Web 应用程序正在 JSF 1.x 后备模式中运行。确保您`faces-config.xml`的声明符合 JSF 2.0 规范版本。

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <!-- Config here. -->

</faces-config> 
```

EL 解析器警告与此无关。这是由于在 Tomcat 6 上使用 Glassfish 的 EL 2.2 造成的，您将无法在`.jsp`页面中使用 EL（如果您只使用 Facelets，这应该不是问题）。如果您想摆脱此警告，请使用[JBoss EL](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)而不是 Glassfish EL。JBoss EL 是增强的 EL 2.1 实现，而 Glassfish EL 是 EL 2.2 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:54:32.887

在 JSF 2.0 中将 testpage 视图翻译成隐式导航。请在此处更改您的代码，

```
 public String doLogin(){
       FacesMessage message = null;
       if((username.equals("user"))&&(password.equals("pass"))) {
            return "testpage";
       } else {
            message = new FacesMessage("Invalid username or password");
            FacesContext.getCurrentInstance().addMessage(null, message);
       }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:21:47.080

我不确定，因为我没有看到另一个代码。

如果您没有在 faces-config.xml 中设置特定的导航规则。

$SUB-DIRECTORY1/testpage.xhtml 的默认值为 $SUB-DIRECTORY1/testpage

# asp.net-mvc - 谁能给我展示一些用于测试控制器（以及 MVC 站点的其他方面）的 NSpec 示例？

> ID：10741104
> 
> 赞同：0
> 
> 时间：2012-05-24T15:59:55.597
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, bdd, nspec

我开始使用 NSpec，但希望能获得一些关于使用它来规范或测试我的控制器的正确方法的建议。基本上几个例子会有很长的路要走。有没有示例项目？所有帮助将不胜感激。

理查德。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T14:10:17.880

为什么是！下面的测试套件来自参考实现，有 4 个独特的 mvc 应用程序都使用 NSpec 作为他们的测试套件。[一定要在这里](https://github.com/amirrajan/Oak/tree/master/Sample%20Apps)看看。

这是其中一项测试。本规范验证登录页面和注册页面。对于一个网站。

```
using System;
using System.Linq;
using NSpec;
using BorrowedGames.Controllers;
using System.Web.Mvc;
using System.Collections.Generic;

namespace BorrowedGames.Tests.Controllers
{
  class describe_AccountController : _borrowed_games
  {
    AccountController controller;

    dynamic user;

    bool authenticated;

    void before_each()
    {
      controller = new AccountController();

      controller.Authenticate = s =>
      {
        authenticated = true;

        SetCurrentUser(controller, Users.ForEmail(s).Id);
      };
    }

    void logging_in()
    {
      context["requesting login page"] = () =>
      {
        act = () => result = controller.LogOn();

        it["returns login page"] = () => 
          (result as object).should_cast_to<ViewResult>();
      };

      context["authenticating"] = () =>
      {
        act = () => result = controller.LogOn(new
        {
          Email = "user@example.com",
          Password = "password",
          RedirectUrl = null as string
        });

        context["user exists"] = () =>
        {
          before = () => 
            user = GivenUser("user@example.com", null, "password");

          it["authenicates user"] = () =>
            authenticated.should_be_true();

          it["redirects to home page"] = () => 
            (result.Url as string).should_be("/");

          it["sets user in session"] = () =>
            (controller.UserId()).should_be((decimal)user);
        };

        context["user exists, password doesn't match"] = () =>
        {
          before = () => 
            GivenUser("user@example.com", null, "other");

          it["returns invalid login"] = () => 
            (result.ViewBag.Flash as string).should_be("Login failed.");
        };

        context["user does not exist"] = () =>
        {
          it["returns invalid login"] = () => 
            (result.ViewBag.Flash as string).should_be("Login failed.");
        };
      };
    }

    void registering_for_site()
    {
      context["requesting registration page"] = () =>
      {
        act = () => result = controller.Register();

        it["returns view"] = () => 
          (result as object).should_cast_to<ViewResult>();
      };

      context["user registers"] = () =>
      {
        act = () =>
        {
          result = controller.Register(new
          {
            Email = "user@example.com",
            Password = "password",
            PasswordConfirmation = "password"
          });

          user = Users.All().First().Id;
        };

        it["logs in user"] = () => 
          (result.Url as string).should_be("/");

        it["authenticates user"] = () => 
          authenticated.should_be_true();

        it["sets user in session"] = () =>
          ((decimal)controller.UserId()).should_be((decimal)user);

        context["user name is taken"] = () =>
        {
          before = () => GivenUser("user@example.com");

          it["return error stating that user name is taken"] = () =>
            (result.ViewBag.Flash as string).should_be("Email is unavailable.");
        };
      };

      context["registration is invalid"] = () =>
      {
        act = () => result = 
          controller.Register(new 
          { 
            Email = default(string), 
            Password = default(string) 
          });

        it["returns error stating that email is required."] = () =>
          (result.ViewBag.Flash as string).should_be("Email is required.");
      };
    }
  }
} 
```

# c# - 无法使用很长的参数列表调用 WCF 服务

> ID：10741107
> 
> 赞同：2
> 
> 时间：2012-05-24T16:00:00.240
> 
> 标签：c#, wcf

在大多数情况下，我都完美地使用了 WCF。

当我尝试使用列表中超过一定数量（如 20 个）的对象（不是太复杂的对象）作为参数调用它时，它似乎甚至无法访问服务。我处于调试模式，它甚至没有启动服务执行。

我认为这是因为`MaxArrayLength`和其他服务配置，但我已经尝试了一切，一切都改变了。您可以在图片中看到我的服务配置。

![在此处输入图像描述](../Images/456a1fb66e8dfaa70ef907592a534d4c.png)

你有什么建议吗？？我应该更改客户端配置中的任何内容吗？？？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:50:39.733

您可能没有为`maxItemsInObjectGraph`for设置更高的值`DataContractSerializer`。

```
<dataContractSerializer maxItemsInObjectGraph="2147483646"/> 
```

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.maxitemsinobjectgraph.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.maxitemsinobjectgraph.aspx)

# gwt - GWT HighCharts Moxieapps - 如何在工具提示中获取系列颜色并防止工具提示离开屏幕

> ID：10741110
> 
> 赞同：1
> 
> 时间：2012-05-24T16:00:24.233
> 
> 标签：gwt, tooltip, highcharts

我们正在使用 Moxieapps Highchart v1.3.0 我们在显示折线图的工具提示方面有两个要求。

一世。x 轴是日期时间轴。我们需要格式化工具提示中显示的日期。所以使用 ToolTipData，我们格式化了工具提示中的日期。但是工具提示中系列名称的颜色会丢失。工具提示是共享的。如何在工具提示中以相应的颜色显示系列名称？

ii. 我们的工具提示可能会增加高度/宽度。在这种情况下，工具提示会离开屏幕，即工具提示的一半是可见的，而另一半会离开屏幕。我使用 html 标签将文本包装在工具提示中。我尝试将宽度应用于 html 标签。但是没有效果。如何防止工具提示离开屏幕？

请找到代码片段 setToolTip(new ToolTip().setShared(true).setCrosshairs(true).setFormatter(new ToolTipFormatter() { public String format(final ToolTipData toolTipData) { final StringBuilder tooltipContent = new StringBuilder(); String formattedDate = DateTimeFormat.getFormat("yyyy-MM-dd").format(new Date(toolTipData.getXAsLong(0)));

```
 tooltipContent.append("<b>").append(formattedDate)
      .append("</b>");
    for (int i = 0; i < toolTipData.getPointsLength(); i++)
    {
      tooltipContent.append("<br />").append("<span>")
        .append(toolTipData.getSeriesName(i)).append(":").append(toolTipData.getYAsDouble(i));

      tooltipContent.append("</span>");
    }
    return tooltipContent.toString();
  }
})); 
```

请帮助解决问题。提前致谢

# java - 从 org.h2.jdbc.JdbcConnection 获取 olap4j.OlapConnection

> ID：10741114
> 
> 赞同：2
> 
> 时间：2012-05-24T16:00:33.803
> 
> 标签：java, jdbc, h2, olap4j

有没有办法`olap4j.OlapConnection`从 a 中得到 a `org.h2.jdbc.JdbcConnection`？

现在我正在尝试这个（如图所示[）](http://www.olap4j.org/olap4j_fs.html#Connections)：

```
Class.forName("org.h2.Driver");
Class.forName("mondrian.olap4j.MondrianOlap4jDriver");
Connection conn = DriverManager.getConnection("jdbc:h2:~/test;", "sa", "");
OlapWrapper wrapper = (OlapWrapper) conn;
OlapConnection olapConn = wrapper.unwrap(OlapConnection.class); 
```

但我得到一个

> 线程“主”java.lang.ClassCastException 中的异常：org.h2.jdbc.JdbcConnection 无法在 myprogram.main 中转换为 org.olap4j.OlapWrapper（Mondrian2H2Test.java:67）

*:67 是 `OlapWrapper wrapper = (OlapWrapper) conn;`*

**编辑 ：**

我也试过这个：

```
Class.forName("org.h2.Driver");
Class.forName("mondrian.olap4j.MondrianOlap4jDriver");
Connection conn = DriverManager.getConnection("jdbc:h2:~/test;", "sa", "");
OlapConnection olapConn = conn.unwrap(OlapConnection.class); 
```

有了这个结果：

> 线程“主”java.lang.AbstractMethodError 中的异常：org.h2.jdbc.JdbcConnection.unwrap(Ljava/lang/Class;)Ljava/lang/Object; 在 myprogram.main(Mondrian2H2Test.java:46)

*:46 是`OlapConnection olapConn = conn.unwrap(OlapConnection.class);`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:38:34.417

查看[MondrianOlap4jDriver javadocs](http://mondrian.pentaho.com/api/mondrian/olap4j/MondrianOlap4jDriver.html)和[邮件列表](http://lists.pentaho.org/pipermail/mondrian/2009-June/001971.html)，代码似乎是：

```
import java.sql.Connection;
import java.sql.DriverManager;
import org.olap4j.OlapConnection;

Class.forName("mondrian.olap4j.MondrianOlap4jDriver");
Connection conn = DriverManager.getConnection(
    "jdbc:mondrian:" + 
    "Jdbc=jdbc:h2:~/test; " +
    "JdbcUser=sa; " +
    "JdbcPassword=; " +
    "Catalog=file:/mondrian/demo/FoodMart.xml; " +
    "JdbcDrivers=org.h2.Driver");
OlapConnection olapConn = conn.unwrap(OlapConnection.class); 
```

# red5 - 视频点播 - 仅流式传输视频的一部分，并以 HTML5 格式观看

> ID：10741121
> 
> 赞同：0
> 
> 时间：2012-05-24T16:00:54.157
> 
> 标签：red5

想知道我是否可以使用 red5 流式传输现有视频的一部分（不是实时提要）。假设我有一个 2 小时的视频，我只想从 1 小时 5 分钟开始流式传输一个 30 秒的剪辑，red5 可以处理请求吗？

我的应用程序将采用 HTML5 + PHP（灯）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:03:08.717

这个问题有一个重点。你混合了两种不同的东西：

*   一方面，您想将 red5 用于 VoD。该软件使用 Adob​​e Flash 协议来提供其内容。
*   另一方面，您想使用 html5 来读取此流。Html5 旨在摆脱 Adob​​e 的事实标准。

要使用 html5，您应该瞄准使用网络友好技术的流媒体平台。查看此内容以查看不同浏览器中的不同格式及其支持。

[http://w3schools.com/tags/tag_video.asp](http://w3schools.com/tags/tag_video.asp)

VLC 对您来说是一个很好的起点：

[https://wiki.videolan.org/Documentation:Streaming_HowTo/VLM#Video_On_Demand](https://wiki.videolan.org/Documentation:Streaming_HowTo/VLM#Video_On_Demand)

# facebook - 为每个项目创建自定义 facebook Like 按钮

> ID：10741124
> 
> 赞同：0
> 
> 时间：2012-05-24T16:00:57.383
> 
> 标签：facebook, facebook-like

我的应用程序显示了用户可以搜索的几个项目。我想为每个项目放置一个like 按钮，这将使用 PHP 自动生成。在实施它之前，我正在尝试测试一些不起作用的东西。

```
<div class="fb-like" data-href="http://www.example.com/index.php?item=1" data-send="true" data-width="450" data-show-faces="true"></div> 
```

当我把它放在页面上时，没有出现类似 facebook 的按钮，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:11:04.337

好的，我已经设法解决了，

确保在您声明后放置这些代码`<div class="fb-like" data-href="http://www.example.com/index.php?item=1" data-send="true" data-width="450" data-show-faces="true"></div>`

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
  });
</script> 
```

# xcode - 安装后Xcode丢失

> ID：10741134
> 
> 赞同：0
> 
> 时间：2012-05-24T16:01:59.450
> 
> 标签：xcode, installation

我最近重新安装了我的mac。尝试从我拥有的备份安装程序（xcode_3.2.5_and_ios_sdk_4.2_final.dmg）安装 Xcode。它在要求我停止 iTunes 之间停下来。这样做了，但提示拒绝消失。所以我被迫强行终止安装程序。（直到后来我才发现你必须从活动监视器中停止 ituneshelper 进程）

重新启动机器并再次尝试安装。安装顺利，但我无法在任何地方找到 Xcode 可执行文件。所以我再次安装它......不行。最后我删除了开发者文件夹并再次尝试。没用。

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:57:08.253

咬紧牙关，从应用商店下载了 Xcode。安装完美。

# c# - 当我尝试发布时，C# SQLite 不起作用

> ID：10741137
> 
> 赞同：0
> 
> 时间：2012-05-24T16:02:02.550
> 
> 标签：c#, sqlite

我正在尝试构建一个具有嵌入式数据库的小型应用程序。为此，我使用了 SQLite。当我在 Visual C# 2010 express 中调试它时，该程序运行良好，但是当我发布它并尝试运行它时，它给了我以下错误：您的应用程序中发生了未处理的异常..... **强 SQLite 错误没有这样的表：**

我不太明白，因为它在未发布时工作正常......非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:57:22.467

SQLite 当说在开发机器上运行良好的程序中没有这样的表时，请确保它正在连接到正确的数据库。

在 SQLite 中，如果在代码提到的地方找不到数据库，它将在那里创建一个。它的大小将为 0 KB。它甚至会打开那个数据库。从中获取数据时会出现问题。

然后它给出了这个错误。使用一些消息框/调试器来检查您的代码有什么问题。

# wix - 如何在自定义引导程序应用程序中设置或获取所有日志

> ID：10741139
> 
> 赞同：5
> 
> 时间：2012-05-24T16:02:10.350
> 
> 标签：wix, wix3.6

在我的自定义 Burn 托管引导程序应用程序中，我想要一种方法来设置安装程序的默认日志目录，以便客户可以轻松找到安装日志。如果无法做到这一点，我想要一种合适的方式在安装后复制日志文件。

我尝试在我的设置项目（即 Bundle.wxs）和我的托管引导程序应用程序中设置 WixBundleLog 变量，但没有成功。此外，我的引导程序应用程序足够通用，因此可以与各种产品/安装包一起使用，因此我需要一个足够灵活的解决方案来设置/获取每个包的安装日志，而无需对包名称进行硬编码在我的引导程序应用程序中。

似乎应该有一种方法可以做到这一点，而无需强制用户在命令行上使用“-l”或“-log”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T16:02:10.473

*WixBundleLog*是指定日志文件的刻录变量。无法在包中覆盖它，因为您无法在包含“Wix”前缀的包中设置变量。在引导程序应用程序中覆盖它也不起作用，因为引导程序继续记录到其默认值。

烧录引导程序为引导程序日志和安装包日志设置字符串变量。我在列表中跟踪这些变量。所以在我的构造函数中，我有类似的东西：

```
this.LogsDirectory = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments), @"Company_Name\Logs\Installer\", DateTime.Now.ToString("yyyyMMdd_hhmmss"));
_logVariables = new List<string>();
_logVariables.Add("WixBundleLog"); 
```

Burn 以 [WixBundleLog]_PackageId 格式为日志文件设置字符串变量。*在触发PlanPackageComplete*事件时，在我的引导程序应用程序中，我有一个事件处理程序，其中包含以下代码以将变量添加到我的列表中。

```
//set *possible* log variables for a given package
_logVariables.Add("WixBundleLog_" + e.PackageId);
_logVariables.Add("WixBundleRollbackLog_" + e.PackageId); 
```

在安装结束或我的引导程序遇到错误时，我调用以下方法：

```
private void CopyLogs()
{
     if (!Directory.Exists(this.LogsDirectory))
         Directory.CreateDirectory(this.LogsDirectory);

     foreach (string logVariable in _logVariables)
     {
         if (this.Bootstrapper.Engine.StringVariables.Contains(logVariable))
         {
             string file = this.Bootstrapper.Engine.StringVariables[logVariable];
             if (File.Exists(file))
             {
                 FileInfo fileInfo = new FileInfo(file);
                 fileInfo.CopyTo(Path.Combine(this.LogsDirectory, fileInfo.Name), false);
             }
         }
     }
 } 
```

# php - Codeigniter - 发送 jQuery 发布数据后没有结果

> ID：10741146
> 
> 赞同：0
> 
> 时间：2012-05-24T16:02:36.793
> 
> 标签：php, jquery, codeigniter

我正在使用 jQuery 的 AJAX 和 Codeigniter PHP 框架制作一个注册表单，但是 codeigniter 并不重要，如果你看到奇怪`echo form_open();`或其他奇怪的东西，别担心，它们都是 codeigniter。

好的，这是我的代码问题。我在下面使用 jquery 尝试了简单的帖子（在 php 代码中，其他所有内容都被省略了，并添加了一个简单的 echo 'hello, world!'; 函数，它可以工作/给我一个 hello，world！）：

```
 $.post( 'ajax_signup_username' ,function(result){

                $(span_error).html(result);

            } ); 
```

但是当我在其中传递一个帖子数据时，它不起作用（不输出任何结果，请注意我正在使用*下面*编写的**完整 PHP 代码**）：

 *```
$.post( 'ajax_signup_username', {php_username_error:username_value} ,function(result){

                $(span_error).html(result);

            } ); 
```

我试过搜索 SO，但提供的解决方案并没有解决这个问题。知道有什么问题吗？

**以下是完整代码：**

以下是html代码：

```
<body>

<?php $attr = array( 'onsubmit' => 'return final_val()' ); echo form_open('formValidation/signUp',$attr); ?>

<p>Username: <input type="text" onBlur="username_val()" value="<?php echo set_value('username')?>" name="username" maxlength="50" /><span name="username_error"><?php echo form_error('username'); ?></p></span>

<p>Email: <input type="text" onBlur="email_val()" value="<?php echo set_value('email')?>" name="email" maxlength="50" /><span name="email_error"><?php echo form_error('email'); ?></p></span>

<p>Password: <input type="password" onBlur="pass_val()" value="<?php echo set_value('pass')?>" name="pass" maxlength="50" autocomplete="off"/><span name="pass_error"><?php echo form_error('pass'); ?></p></span>

<p>Password Confirm: <input type="password" onBlur="pass_val()" value="<?php echo set_value('passconf')?>" name="passconf" maxlength="50" autocomplete="off" /><span name="passconf_error"><?php echo form_error('passconf'); ?></p></span>

<p><input type="submit" value="SIGN UP!" name="signup"/></p>

</form>

</body> 
```

以下是php代码：

```
function ajax_signup_username(){

    $username = $_POST['php_username_error'];

    $uniqueUn = $this->db->prepare("SELECT * FROM iowfiwefwmember WHERE username=:username");

    $uniqueUn->bindParam(':username', $username);

    $uniqueUn->execute();

    $count1 = $uniqueUn->fetch();

    if( $count1 == FALSE ){

        echo 'USERNAME AVAILABLE!';

    }else{

        echo 'USERNAME IS ALREADY USED!';

    }

} 
```

以下是javascript代码：

```
function username_val(){

        $.ajaxSetup({ cache : false });

            username_value = $("input[name='username']").val();

            span_error = "span[name='username_error']";

            //$(span_error).load('ajax_signup_username', {php_username_error:username_value}); <-- also doesn't work [ $.ajaxSetup() is set to POST ]

            $.post( 'ajax_signup_username', {php_username_error:username_value} ,function(result){

                $(span_error).html(result);

            } );

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:51:31.623

在我的笔记本电脑前长时间做哑巴脸后，我发现这**是**一个代码点火器问题，我打开了导致问题的 CSRF 保护。关闭 CSRF 功能后，一切正常，千万不要再犯同样的错误，孩子们！干杯! :D*

# c# - XML 到 Oracle 数据库列的映射

> ID：10741152
> 
> 赞同：2
> 
> 时间：2012-05-24T16:02:45.323
> 
> 标签：c#, xml, oracle, mapping, xsd

我正在处理我们收到的 xml 消息。我必须阅读 xml 并存储在 4 个不同的表中。

处理此问题的最佳方法是什么。可以说，如果 xml 架构发生了变化，那么可能会添加新列，或者可能会删除或重命名列等...

我们如何才能使这种松散耦合。对 XML 或数据库的任何更改都不需要更改代码吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:19:15.410

不确定您打算如何使用存储在 Oracle 中的 XML，但如果只是出于审计目的而存储，您可以将 XML 连同版本号和一些日期一起存储在 CLOB 字段中。在单独的参考表中，将 xml 版本号与其 dtd（以及创建/修改日期）相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:19:28.120

如果您使用的是 Oracle 11G，您可以在 PL/SQL 过程中创建 XMLTYPE 变量，然后您可以使用 extract() 函数仅检索您希望成为字段的 XML 文档部分。

在声明一个 XMLTYPE 类型的 PL/SQL 变量之后，使用 XMLTYPE.CREATEXML( ) 函数来创建一个 XMLTYPE 变量。

```
V_INPUT_XML  := XMLTYPE.CREATEXML(V_TAB.INPUT_MESSAGE); 
```

extract() PL/SQL 函数返回一个 XMLTYPE，我使用 getclobval() 将 XMLTYPE 转换为 VARCHAR。

```
--V_OUTPUT_XML is set by a result of the extract() function 
--on an XMLTYPE
V_OUTPUT_STR := v_output_xml.getclobval(); 
```

至少有了这个，如果您设置的字段的路径发生变化，您只需更改您的 PL/SQL；更改字段之外的 XML 文档（只要它们不影响字段的 XPATH）不应该需要更改 PL/SQL..

# java - 查询postgres select不返回结果？

> ID：10741155
> 
> 赞同：0
> 
> 时间：2012-05-24T16:02:48.633
> 
> 标签：java, postgresql, select

我正在开发一个 java 应用程序，我使用结果集。我写了这个查询，它有效，我得到了结果

```
SELECT * 
FROM BD 
WHERE 
    CAST(parent_id AS integer) = " + (Integer.parseInt(arrHeading[0])) + " 
    AND CAST(section AS double precision) = " + Double.parseDouble(arrHeading[1]) + ""; 
```

`arrHeading`是 type `string`，但是当我在下面编写查询时，它不会返回任何结果。`cas`是类型`character varying(12)`。我遇到了麻烦，因为它是一个角色，我不知道为什么我没有得到任何结果。我尝试了引号，但仍然无法正常工作。有任何想法吗？

```
SELECT * 
FROM BD 
WHERE 
    CAST(parent_id AS integer) = " + (Integer.parseInt(arrHeading[0])) + " 
    AND CAST(section AS double precision) = " + Double.parseDouble(arrHeading[1]) + "
    AND cas = '" + arrHeading[2] + "'"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:17:01.713

我建议先将 arrHeading[2] 替换为查询中的实际值，即硬编码 cas="'your value'" 并查看查询是否返回任何结果

# javascript - 在 app.listen(PORT, HOST); 中设置 HOST 时 app.address() 为何为空？

> ID：10741157
> 
> 赞同：7
> 
> 时间：2012-05-24T16:02:57.687
> 
> 标签：javascript, node.js, express

省略下面的127.0.0.1时，app.address()不为空，但设置主机时为空。

```
var express = require('express'),
    app = express.createServer();

app.use(express.logger());

app.get('/', function(req, res){
    res.send('Hello World');
});

app.listen(3000, '127.0.0.1');
console.log(app.address());
console.log('Express server started on port %s', app.address().port); 
```

错误输出：`TypeError: Cannot read property 'port' of null`

节点 v0.6.5

我安装了 express 版本 2.5.9 - 它返回我安装了 2.5.8 - 不知道那是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T17:03:30.147

因为，app.address() 继承自 Node 的 HTTP 模块。如果您查看[文档](http://nodejs.org/docs/latest/api/net.html#net_server_address)，其中写道：

> 返回操作系统报告的服务器绑定地址和端口。

因此我假设，当你请求一个带有 IP 的端口时，操作系统不会将它报告给你，所以这个方法返回 null。但是，如果不这样做，您可能需要计算机的 IP 或地址，因为每台计算机不必是“localhost”，它们可以有不同的域，允许您仅将套接字绑定到该域。

# javascript - 可从缓存中脱机使用的 Web 应用程序

> ID：10741160
> 
> 赞同：1
> 
> 时间：2012-05-24T16:03:06.330
> 
> 标签：javascript, jquery, html, browser-cache, offline-caching

我需要创建一个具有离线支持的 Web 应用程序。当客户端的计算机离线时，Javascript 必须重定向到另一个页面，其中包含来自应用程序的重要信息。

重定向到离线网页

```
window.addEventListener("offline", function(e) {
   document.location.href='/offline/index.html';
}
, false); 
```

如何`/offline/index.html`在浏览器缓存中强制保存页面以确保在互联网连接中断时内容可用？

该`/offline/index.html`页面将每 10 分钟更新一次（如果应用程序在线），并且缓存必须仍然刷新。

--

我尝试在主应用程序的 html 中使用缓存清单，但这无法正常工作。离线页面已保存，但在线模式下的其他页面也已保存。我只需要缓存一个文件，`offline/index.html`我更喜欢使用 Javascript 事件手动重定向到离线页面，而不需要 HTML5 离线解决方案。

我的缓存清单文件：

```
CACHE MANIFEST

/ff/landing/js/jquery.min.js
/ff/default/js/online.js

FALLBACK:
/ /offline/index.html

NETWORK:
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:10:58.213

您可以使用[HTML5 清单](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)。

请参阅下面的链接

[http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html)

[http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

[鉴于这些要求，我应该如何构建我的 HTML5 清单？](https://stackoverflow.com/questions/9422846/how-should-i-structure-my-html5-manifest-given-these-requirements)

# wpf - wpf 自动完成多个条目，如 Outlook

> ID：10741163
> 
> 赞同：1
> 
> 时间：2012-05-24T16:03:28.210
> 
> 标签：wpf

我希望模拟 Outlook - To box 的行为。用户可以输入电子邮件。或者让它从列表中建议。此外，继续编辑现有文本。并在第一封电子邮件之后建议添加电子邮件。

我查看了 WPF 工具包自动完成功能，但在第一次输入后没有提示。

有什么建议么？

# email - PHP邮件函数'发件人'地址

> ID：10741165
> 
> 赞同：20
> 
> 时间：2012-05-24T16:03:34.443
> 
> 标签：email, php

我什至不确定这是可能的，但是我正在尝试做的事情如下。`PHP`我有一个使用脚本生成和发送电子邮件的 HTML 表单。我想要的是从这个表单接收电子邮件`abc@xyz.com`，然后我希望`from`地址显示为表单中的字段之一。

我环顾四周，在这个[网站](http://www.w3schools.com/php/php_ref_mail.asp)上发现了一些有用的信息。我不确定是否`sendmail_from`可以在这种情况下使用，或者它是否符合我的要求。

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-24T16:07:54.237

请参阅同一站点上的此页面（示例 2）：[http ://www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)

您必须设置消息的标题以包含 From 和其他内容，如 CC 或 BCC：

```
<?php
$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com\r\n";

mail($to,$subject,$txt,$headers);
?> 
```

请注意，您必须使用换行符分隔标题`"\r\n"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T16:12:50.073

对于 php 邮件脚本，我将其用于联系表单：

```
$from = $_POST["from"];  //posted from the form.

mail("me@myname.com", $subject, $message, "From:" . $from); 
```

我之前没有在我的 php 中使用过 sendmail_from，只有一个简单的变量。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:09:08.497

你有什么理由不能在电子邮件标题中做到这一点？

```
$to      = 'hello@hello.com';
$subject = 'my subject';
$message = 'hello';
$headers = 'From: '.$email_from_form. "\r\n";

mail($to, $subject, $message, $headers); 
```

# symfony - 用 Twig 以表单关系模板化每个对象？

> ID：10741170
> 
> 赞同：0
> 
> 时间：2012-05-24T16:04:01.830
> 
> 标签：symfony, twig, symfony-forms

我一直在尝试执行以下操作：邮件具有模板，因此您可以使用单选按钮从邮件表单中选择模板。到目前为止，一切都很好。现在，我不想显示模板名称，而是想编写一些 HTML 代码，例如图像标签。

我试图做

```
{% block _post_template_widget %}
    <b>test</b>
    {{ form_widget(form) }}
{% endblock %} 
```

但这只是模板整个关系。如何在此处将每条记录模板化为循环？谢谢！！

# php - add two time values and comparing with other time

> ID：10741171
> 
> 赞同：0
> 
> 时间：2012-05-24T16:04:05.017
> 
> 标签：php, web-services

i have two time values say starttime=23:00:00 and estimation time=00:45:00 now i want to add starttime and estimation time and store it in a variable i did like this

```
$add = abs(strtotime($starttime) + strtotime($estimationtime)); 
```

and now i have to compare a new time say currenttime or any other time interval (23:50:00)

```
if($time >=$starttime && $time <=$add)
{
$message=array("message"=>"there is an appointment");
} 
```

if i echo $add i am not getting the right format it shows `2675756700` pls help me to solve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:07:36.280

strtotime() returns a timestamp, which is the number of seconds since Jan 1/1970\. You cannot compare this to a formatted time value - it's just an integer.

So basically, you're doing the equivalent of:

```
$add = 1 + 2; // 3

if (3 >= '23:50:00') ... 
```

if you want to compare time values as timestamps, you'll have to convert EVERYTHING to timestamps. Or, you could use the [DateTime object](http://php.net/datetime), which'll handle a lot of this sort of thing for you automatically.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:10:35.507

If you want to echo your `$add` variable in a readable form you have to format it first.

```
echo(date("H:i:s", $add)); 
```

# ruby-on-rails - 无法让'rails new'工作

> ID：10741174
> 
> 赞同：2
> 
> 时间：2012-05-24T16:04:17.263
> 
> 标签：ruby-on-rails, installation, osx-lion

我是一个渴望接触 Ruby on Rails (OSX 10.7) 的 n00b。但首先我需要安装它。现在我花了 9 个小时试图让它工作，但是当我尝试创建一个新项目时它总是失败：

```
$ rails new /Users/tom/Documents/14-Utveckling/WhichTerminal 
   exist  
identical  README.rdoc
identical  Rakefile
identical  config.ru
identical  .gitignore
 conflict  Gemfile
Overwrite /Users/tom/Documents/14-Utveckling/WhichTerminal/Gemfile? (enter "h" for help) [Ynaqdh] Y
   force  Gemfile
   exist  app
identical  app/assets/images/rails.png
identical  app/assets/javascripts/application.js
identical  app/assets/stylesheets/application.css
identical  app/controllers/application_controller.rb
identical  app/helpers/application_helper.rb
    exist  app/mailers
    exist  app/models
identical  app/views/layouts/application.html.erb
identical  app/mailers/.gitkeep
identical  app/models/.gitkeep
    exist  config
 identical  config/routes.rb
identical  config/application.rb
identical  config/environment.rb
   exist  config/environments
identical  config/environments/development.rb
identical  config/environments/production.rb
identical  config/environments/test.rb
    exist  config/initializers
identical  config/initializers/backtrace_silencers.rb
identical  config/initializers/inflections.rb
identical  config/initializers/mime_types.rb
 conflict  config/initializers/secret_token.rb
Overwrite /Users/tom/Documents/14-  Utveckling/WhichTerminal/config/initializers/secret_token.rb? (enter "h" for help) [Ynaqdh] Y
    force  config/initializers/secret_token.rb
 conflict  config/initializers/session_store.rb
Overwrite /Users/tom/Documents/14-Utveckling/WhichTerminal/config/initializers/session_store.rb? (enter "h" for help) [Ynaqdh] Y
    force  config/initializers/session_store.rb
 conflict  config/initializers/wrap_parameters.rb
 Overwrite /Users/tom/Documents/14-Utveckling/WhichTerminal/config/initializers/wrap_parameters.rb? (enter "h" for help) [Ynaqdh] Y
    force  config/initializers/wrap_parameters.rb
    exist  config/locales
identical  config/locales/en.yml
identical  config/boot.rb
identical  config/database.yml
    exist  db
 conflict  db/seeds.rb
Overwrite /Users/tom/Documents/14-Utveckling/WhichTerminal/db/seeds.rb? (enter "h" for help) [Ynaqdh] Y
   force  db/seeds.rb
   exist  doc
identical  doc/README_FOR_APP
    exist  lib
    exist  lib/tasks
identical  lib/tasks/.gitkeep
    exist  lib/assets
identical  lib/assets/.gitkeep
    exist  log
identical  log/.gitkeep
    exist  public
identical  public/404.html
identical  public/422.html
identical  public/500.html
identical  public/favicon.ico
identical  public/index.html
identical  public/robots.txt
    exist  script
identical  script/rails
    exist  test/fixtures
identical  test/fixtures/.gitkeep
    exist  test/functional
identical  test/functional/.gitkeep
    exist  test/integration
identical  test/integration/.gitkeep
    exist  test/unit
identical  test/unit/.gitkeep
identical  test/performance/browsing_test.rb
identical  test/test_helper.rb
    exist  tmp/cache
    exist  tmp/cache/assets
    exist  vendor/assets/javascripts
identical  vendor/assets/javascripts/.gitkeep
    exist  vendor/assets/stylesheets
identical  vendor/assets/stylesheets/.gitkeep
    exist  vendor/plugins
identical  vendor/plugins/.gitkeep
      run  bundle install
Enter your password to install the bundled RubyGems to your system: 
Fetching gem metadata from https://rubygems.org/.........

NoMethodError: private method `open' called for Gem::Package:Class
An error occured while installing rake (0.9.2.2), and Bundler cannot continue.
Make sure that `gem install rake -v '0.9.2.2'` succeeds before bundling. 
```

**我的理论：**

我怀疑是 https 访问搞砸了。[有人](http://railsapps.github.com/openssl-certificate-verify-failed.html)说这是openssl的一些问题。

```
$ openssl version
OpenSSL 0.9.8r 8 Feb 2011 
```

显然，最好的答案是“OpenSSL 1.0.1”，但我不知道如何在全球范围内更新 Openssl。忽略这一点，我确实重新安装了 ruby​​，执行以下操作：

```
$ rvm remove 1.9.3
$ brew install openssl
$ rvm install 1.9.3 --with-openssl-dir=`brew --prefix openssl` 
```

我不知道 brew 做了什么，但它似乎安装了 openssl 并将其藏在某个目录中。反正。无论我做什么，我总是以同样的错误告终：

```
Fetching gem metadata from https://rubygems.org/.........
NoMethodError: private method `open' called for Gem::Package:Class
An error occured while installing rake (0.9.2.2), and Bundler cannot continue. 
```

* * *

我重新安装了整个chabang。结果相同。这是日志：

删除 rvm

```
$ rvm implode
[...]
rvm has been fully removed. Note you may need to manually remove /etc/rvmrc and ~/.rvmrc if they exist still.
$ gem uninstall rvm
$ which ruby
/usr/bin/ruby 
```

安装 RVM

```
$ curl -L get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  9248  100  9248    0     0   2403      0  0:00:03  0:00:03 --:--:-- 27939
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 1023k  100 1023k    0     0  85026      0  0:00:12  0:00:12 --:--:-- 94532

Installing RVM to /Users/tom/.rvm/
    RVM PATH line found in /Users/tom/.bashrc /Users/tom/.zshrc.
    RVM sourcing line found in /Users/tom/.bash_login /Users/tom/.zlogin.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm/
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues read output of 'rvm requirements' and/or 'rvm notes'

Installation of RVM in /Users/tom/.rvm/ is almost complete:

  * To start using RVM you need to run `source /Users/tom/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows.

# Tom Eriksen,
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne

rvm 1.13.8 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

安装 Ruby 1.9.3（使用 openssl 1.0.1）

```
$ rvm install 1.9.3 --with-openssl-dir=`brew --prefix openssl`
Fetching yaml-0.1.4.tar.gz to /Users/tom/.rvm/archives
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  460k  100  460k    0     0  65747      0  0:00:07  0:00:07 --:--:--  116k
Extracting yaml-0.1.4.tar.gz to /Users/tom/.rvm/src
Configuring yaml in /Users/tom/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/tom/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/tom/.rvm/usr
Installing Ruby from source to: /Users/tom/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 9610k  100 9610k    0     0   193k      0  0:00:49  0:00:49 --:--:--  212k
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /Users/tom/.rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /Users/tom/.rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring 
ruby-1.9.3-p194 - #compiling 
ruby-1.9.3-p194 - #installing 
Retrieving rubygems-1.8.24
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  371k  100  371k    0     0   355k      0  0:00:01  0:00:01 --:--:--  446k
Extracting rubygems-1.8.24 ...
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-1.9.3-p194 ...
Installation of rubygems completed successfully.
ruby-1.9.3-p194 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p194 - #importing default gemsets (/Users/tom/.rvm/gemsets/)
Install of ruby-1.9.3-p194 - #complete 
$ which ruby
/Users/tom/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
$ which gem
/Users/tom/.rvm/rubies/ruby-1.9.3-p194/bin/gem
$ which rails
/usr/bin/rails 
```

安装 RubyGems 以防万一。通过 GIT 下载 RubyGems 后，我移动到目录并运行设置。

```
$ cd /Users/tom/Library/Developer/rubygems 
Toms-dator-2:rubygems tom$ ruby setup.rb 
RubyGems 2.0.a installed

------------------------------------------------------------------------------

RubyGems installed the following executables:
    /Users/tom/.rvm/rubies/ruby-1.9.3-p194/bin/gem

rubygems$ gem update --system
Latest version currently installed. Aborting. 
```

安装json（如果我不安装它会抱怨）

```
rubygems$ gem install json
Fetching: json-1.7.3.gem (100%)
Building native extensions.  This could take a while...
Successfully installed json-1.7.3
Installing ri documentation for json-1.7.3
Installing darkfish documentation for json-1.7.3
1 gem installed

Rubygems$ which gem
/Users/tom/.rvm/rubies/ruby-1.9.3-p194/bin/gem 
```

安装导轨

```
Rubygems$ gem install rails
Fetching: i18n-0.6.0.gem (100%)
Successfully installed i18n-0.6.0
Fetching: multi_json-1.3.5.gem (100%)
Successfully installed multi_json-1.3.5
Fetching: activesupport-3.2.3.gem (100%)
Successfully installed activesupport-3.2.3
Fetching: builder-3.0.0.gem (100%)
Successfully installed builder-3.0.0
Fetching: activemodel-3.2.3.gem (100%)
Successfully installed activemodel-3.2.3
Fetching: rack-1.4.1.gem (100%)
Successfully installed rack-1.4.1
Fetching: rack-cache-1.2.gem (100%)
Successfully installed rack-cache-1.2
Fetching: rack-test-0.6.1.gem (100%)
Successfully installed rack-test-0.6.1
Fetching: journey-1.0.3.gem (100%)
Successfully installed journey-1.0.3
Fetching: hike-1.2.1.gem (100%)
Successfully installed hike-1.2.1
Fetching: tilt-1.3.3.gem (100%)
Successfully installed tilt-1.3.3
Fetching: sprockets-2.1.3.gem (100%)
Successfully installed sprockets-2.1.3
Fetching: erubis-2.7.0.gem (100%)
Successfully installed erubis-2.7.0
Fetching: actionpack-3.2.3.gem (100%)
Successfully installed actionpack-3.2.3
Fetching: arel-3.0.2.gem (100%)
Successfully installed arel-3.0.2
Fetching: tzinfo-0.3.33.gem (100%)
Successfully installed tzinfo-0.3.33
Fetching: activerecord-3.2.3.gem (100%)
Successfully installed activerecord-3.2.3
Fetching: activeresource-3.2.3.gem (100%)
Successfully installed activeresource-3.2.3
Fetching: mime-types-1.18.gem (100%)
Successfully installed mime-types-1.18
Fetching: polyglot-0.3.3.gem (100%)
Successfully installed polyglot-0.3.3
Fetching: treetop-1.4.10.gem (100%)
Successfully installed treetop-1.4.10
Fetching: mail-2.4.4.gem (100%)
Successfully installed mail-2.4.4
Fetching: actionmailer-3.2.3.gem (100%)
Successfully installed actionmailer-3.2.3
Fetching: thor-0.14.6.gem (100%)
Successfully installed thor-0.14.6
Fetching: rack-ssl-1.3.2.gem (100%)
Successfully installed rack-ssl-1.3.2
Fetching: rdoc-3.12.gem (100%)
Depending on your version of ruby, you may need to install ruby rdoc/ri data:

<= 1.8.6 : unsupported
 = 1.8.7 : gem install rdoc-data; rdoc-data --install
 = 1.9.1 : gem install rdoc-data; rdoc-data --install
>= 1.9.2 : nothing to do! Yay!
Successfully installed rdoc-3.12
Fetching: railties-3.2.3.gem (100%)
Successfully installed railties-3.2.3
Fetching: rails-3.2.3.gem (100%)
Successfully installed rails-3.2.3
Installing ri documentation for i18n-0.6.0
Installing darkfish documentation for i18n-0.6.0
Installing ri documentation for multi_json-1.3.5
Installing darkfish documentation for multi_json-1.3.5
Installing ri documentation for activesupport-3.2.3
Installing darkfish documentation for activesupport-3.2.3
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for README, skipping
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for README.rdoc, skipping
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for test/performance.rb, skipping
Installing ri documentation for builder-3.0.0
Installing darkfish documentation for builder-3.0.0
Installing ri documentation for activemodel-3.2.3
Installing darkfish documentation for activemodel-3.2.3
unable to convert "\x89" from ASCII-8BIT to UTF-8 for test/multipart/binary, skipping
Installing ri documentation for rack-1.4.1
Installing darkfish documentation for rack-1.4.1
Installing ri documentation for rack-cache-1.2
Installing darkfish documentation for rack-cache-1.2
Installing ri documentation for rack-test-0.6.1
Installing darkfish documentation for rack-test-0.6.1
Installing ri documentation for journey-1.0.3
Installing darkfish documentation for journey-1.0.3
Installing ri documentation for hike-1.2.1
Installing darkfish documentation for hike-1.2.1
Installing ri documentation for tilt-1.3.3
Installing darkfish documentation for tilt-1.3.3
Installing ri documentation for sprockets-2.1.3
Installing darkfish documentation for sprockets-2.1.3
Installing ri documentation for erubis-2.7.0
Installing darkfish documentation for erubis-2.7.0
Installing ri documentation for actionpack-3.2.3
Installing darkfish documentation for actionpack-3.2.3
Installing ri documentation for arel-3.0.2
Installing darkfish documentation for arel-3.0.2
Installing ri documentation for tzinfo-0.3.33
Installing darkfish documentation for tzinfo-0.3.33
Installing ri documentation for activerecord-3.2.3
Installing darkfish documentation for activerecord-3.2.3
Installing ri documentation for activeresource-3.2.3
Installing darkfish documentation for activeresource-3.2.3
Installing ri documentation for mime-types-1.18
Installing darkfish documentation for mime-types-1.18
Installing ri documentation for polyglot-0.3.3
Installing darkfish documentation for polyglot-0.3.3
Installing ri documentation for treetop-1.4.10
Installing darkfish documentation for treetop-1.4.10
Installing ri documentation for mail-2.4.4
Installing darkfish documentation for mail-2.4.4
Installing ri documentation for actionmailer-3.2.3
Installing darkfish documentation for actionmailer-3.2.3
Installing ri documentation for thor-0.14.6
Installing darkfish documentation for thor-0.14.6
Installing ri documentation for rack-ssl-1.3.2
Installing darkfish documentation for rack-ssl-1.3.2
Installing ri documentation for rdoc-3.12
Installing darkfish documentation for rdoc-3.12
Installing ri documentation for railties-3.2.3
Installing darkfish documentation for railties-3.2.3
Installing ri documentation for rails-3.2.3
Installing darkfish documentation for rails-3.2.3
28 gems installed

Rubygems$ which rails
/Users/tom/.rvm/gems/ruby-1.9.3-p194/bin/rails 
```

最后。让我们创建一个新项目

```
Rubygems$ rails new /Users/tom/Documents/WhichTerminal 
       exist  
      create  README.rdoc
      create  Rakefile
      create  config.ru
   identical  .gitignore
      create  Gemfile
      create  app
      create  app/assets/images/rails.png
      create  app/assets/javascripts/application.js
      create  app/assets/stylesheets/application.css
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/mailers
      create  app/models
      create  app/views/layouts/application.html.erb
      create  app/mailers/.gitkeep
      create  app/models/.gitkeep
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb
      create  config/initializers/mime_types.rb
      create  config/initializers/secret_token.rb
      create  config/initializers/session_store.rb
      create  config/initializers/wrap_parameters.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  doc
      create  doc/README_FOR_APP
      create  lib
      create  lib/tasks
      create  lib/tasks/.gitkeep
      create  lib/assets
      create  lib/assets/.gitkeep
      create  log
      create  log/.gitkeep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
      create  script
      create  script/rails
      create  test/fixtures
      create  test/fixtures/.gitkeep
      create  test/functional
      create  test/functional/.gitkeep
      create  test/integration
      create  test/integration/.gitkeep
      create  test/unit
      create  test/unit/.gitkeep
      create  test/performance/browsing_test.rb
      create  test/test_helper.rb
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install
Fetching gem metadata from https://rubygems.org/.........

NoMethodError: private method `open' called for Gem::Package:Class
An error occured while installing rake (0.9.2.2), and Bundler cannot continue.
Make sure that `gem install rake -v '0.9.2.2'` succeeds before bundling.
Rubygems$ 
```

结果相同。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:20:11.807

我会在这里尝试两件事。

首先，确保 Rails 命令从正确的位置运行：听起来您可能没有使用正确版本的 Rails。`which rails`应该向您显示该文件来自您的 RVM 安装内部：如果不是，您需要确保您`rvm use 1.9.3`，然后再试`gem install rails`一次。

其次，因为这个错误听起来类似于旧版本的 gem 中发生的错误，所以我会尝试更新您的 gem 二进制文件。首先，就像在 Rails 中一样，键入`which gem`以确保您使用的是 RVM gem，而不是系统 gem。然后，`gem update --system`在再次捆绑安装之前执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T10:19:41.273

我遇到了同样的问题，因为事实证明我需要更新捆绑器。

> 宝石安装捆绑器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:31:39.837

老问题，但我今天遇到了这个问题。大锤法：

```
sudo su
rails new my_proj
rm -rf my_proj
exit
rails new my_proj 
```

增加的 root 权限允许安装所有捆绑包而不会引发错误。然后您删除该项目并返回到您的普通-priv 用户并重新创建该项目。通过 root 安装所有捆绑包后，“new”命令成功运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T13:59:53.270

这个指南原来是有效的：

[http://tecparatodos.com/2011/07/24/installing-ruby-on-rails-on-mac-os-x-lion/](http://tecparatodos.com/2011/07/24/installing-ruby-on-rails-on-mac-os-x-lion/)

我认为我的问题是 XCode 设置不正确。遵循本指南，一切都会好起来的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:32:02.113

我有同样的问题，我通过更新 Homebrew 解决了

```
brew update 
```

通过从首选项面板的 Xcode 下载选项卡更新命令行工具。

希望它对仍在寻找答案的人有所帮助。

# actionscript-3 - 如何在火花 GridColumn 上添加 wordWrap

> ID：10741175
> 
> 赞同：5
> 
> 时间：2012-05-24T16:04:21.127
> 
> 标签：actionscript-3, apache-flex, flash-builder, mxml

今天，我决定测试 spark datagrid 而不是 mx:Datatagrid。但是出现了一个问题：我没有找到 wordWrap 选项，你知道怎么解决吗？

```
<s:DataGrid id="scrollableDG" borderVisible="true"  editable="true"
                     width="100%" height="{bgSuivi.height-90-90}">

 //Setup columns for scrollable datagrid
    var gridColumn:GridColumn = new GridColumn();
    gridColumn.dataField="scRub2";
    gridColumn.headerText = "Rub1";
    gridColumn.width = 80;
    gridColumn.editable = true;
    columnLst.addItem(gridColumn);

    var gridColumn:GridColumn = new GridColumn();
    gridColumn.dataField="scRub3";
    gridColumn.headerText = "Rub1";
    gridColumn.width = 80;
    gridColumn.editable = true;
    columnLst.addItem(gridColumn);

    var gridColumn:GridColumn = new GridColumn();
    gridColumn.dataField="scRub4";
    gridColumn.headerText = "Rub1";
    gridColumn.width = 80;
    gridColumn.editable = true;
    columnLst.addItem(gridColumn);
    scrollableDG.columns = columnLst; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T20:17:34.800

原贴没有选择答案 我要把前两个合并成一个***超级***答案！:P

您可以使用 variableRowHeight 在 Spark DataGrid 上的所有列上启用自动换行：

```
<s:DataGrid variableRowHeight="true">
</s:DataGrid> 
```

或者，您可以使用默认 GridColumn 项呈现器上的自动换行属性在单个列上启用自动换行：

```
<s:GridColumn dataField="fields.description" headerText="Description" >
    <s:itemRenderer>
        <fx:Component>
            <s:DefaultGridItemRenderer wordWrap="true"/>
        </fx:Component>
    </s:itemRenderer>
</s:GridColumn> 
```

此外，在 Grid Column 示例中，如果要防止水平滚动条，我建议设置宽度：

```
<s:GridColumn width="{dataGrid.width-column1.width-column3.width}" dataField="fields.description" headerText="Description" >
    <s:itemRenderer>
        <fx:Component>
            <s:DefaultGridItemRenderer wordWrap="true"/>
        </fx:Component>
    </s:itemRenderer>
</s:GridColumn> 
```

我发现我必须将两个可变行高都设置为 true 并设置列宽才能获得我正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:20:52.557

**[编辑]**

糟糕，我最初的答案是指 MX`DataGridColumn`组件，而不是 Spark `GridColumn`。修改后的答案...

网格的默认项目渲染器是`DataGridItemRenderer`，它有一个自动换行属性，您需要将其设置为 true。不确定，但您可能还必须将`variableRowHeight`网格的属性设置为 true ......

要在 MXML 中执行此操作，它看起来像这样：

```
<s:DataGrid variableRowHeight="true">
    <s:itemRenderer>
        <fx:Component>
            <s:DataGridItemRenderer wordWrap="true" />
        </fx:Component>
    </s:itemRenderer>
</s:DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:05:14.400

直到*flex4.6*，没有**s** :DataGridItemRenderer，但是有**mx** :DataGridItemRenderer。因此，代码将是：

```
<s:GridColumn headerText="foo" labelFunction="fooLabelFunction">
    <s:itemRenderer>
        <fx:Component>
            <mx:DataGridItemRenderer wordWrap="true" />
        </fx:Component>
    </s:itemRenderer>
</s:GridColumn> 
```

# jquery - jquery先扩展父级的ul>li>ul

> ID：10741179
> 
> 赞同：0
> 
> 时间：2012-05-24T16:04:31.377
> 
> 标签：jquery

我有一些在点击时展开/折叠的 jquery。我希望默认情况下扩展第一项，但我在使用 jquery 时遇到了问题。我尝试了几个不同的角度都无济于事。任何帮助将非常感激！

[http://jsfiddle.net/trrJp/1/](http://jsfiddle.net/trrJp/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:08:25.860

如果您的问题只是您希望打开第一个项目，则在设置所有菜单 jquery 后，您可以执行以下操作：

`$('#menu li:first').slideToggle();`

或者您可以模拟点击：

`$('#menu li:first').click();`

实际代码取决于您的实际实现以及如何打开它，但总体思路是触发第一个元素打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:18:50.923

默认情况下，您可以使用以下行保持第一项展开

```
 $('#collapser li:first-child > ul').show(); 
```

它所做的是选择 the`first li`然后`ul`在 that`li`和`show`that 中选择。

[第一个子选择器](http://api.jquery.com/first-child-selector/)

[工作小提琴](http://jsfiddle.net/joycse06/trrJp/2/)

# r - 如何在滚动存储桶集中创建一个包含数据计数的集合

> ID：10741180
> 
> 赞同：3
> 
> 时间：2012-05-24T16:04:34.027
> 
> 标签：r, xts

我有服务器日志记录了一个月的流量。下面的部分示例

```
"UploadDateGMT","UserFileSize","TotalBusinessUnits"
"2012-01-01 00:00:38","1223","1"
"2012-01-01 00:01:16","1302","1"
"2012-01-01 00:08:10","1302","1" 
```

我想将其转换为一个数据集，在其中我可以滚动计算每五分钟窗口中提交的字节数。（即 0-5、1-6、2-7 等）从中，我可以提取最大负载、95% 负载、制作漂亮的负载图表等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:53:48.840

要扩展@PLapointe 的[答案](https://stackoverflow.com/a/10741562/271616)：

```
endp <- endpoints(tab2, on="mins", k=1) # 1 minute endpoints
onemin <- period.apply(tab2,endp,sum)   # sum per 1-minute period
onemin <- align.time(onemin)            # align to end-of-period times
# all one-minute increments from start--end of onemin
allonemin <- seq(start(onemin), end(onemin), by="1 min")
onemin <- merge(onemin, xts(,allonemin))
fivemin <-  rollapplyr(onemin, 5, sum, na.rm=TRUE, fill=NA) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:27:57.440

xts 包可以解决问题：

```
library(xts)
tab <-read.table(text="UploadDateGMT,UserFileSize,TotalBusinessUnits
'2012-01-01 00:00:38',1223,1
'2012-01-01 00:01:16',1302,1
'2012-01-01 00:08:10',1302,1", header=TRUE, as.is=TRUE,sep = ",")

tab2<-xts(tab$UserFileSize,order.by=as.POSIXct(tab$UploadDateGMT) ) #create xts object
endp <-endpoints(tab2, on="mins", k=5) #5 minutes endpoints
fivemin <-period.apply(tab2,endp,sum) #sum per 5-minute period
fivemin

                    [,1]
2012-01-01 00:01:16 2525
2012-01-01 00:08:10 1302 
```

如果您希望时间列以 5 分钟为增量：

```
res<- align.time( fivemin[endpoints(fivemin, on="mins", k=5)], n=60*5) 
```

# javascript - 与 window.onload 混淆

> ID：10741182
> 
> 赞同：1
> 
> 时间：2012-05-24T16:04:38.150
> 
> 标签：javascript, javascript-events

我只是从书中复制粘贴了这一点：

```
window.onload = init;
function init() {
var button = document.getElementById("addButton");
button.onclick = handleButtonClick();
}
function handleButtonClick() {
alert("Button has been clicked");
} 
```

问题是在我加载页面时出现警报，而不是在我单击按钮时出现。有人为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:05:29.247

改变

```
button.onclick = handleButtonClick(); 
```

到

```
button.onclick = handleButtonClick; 
```

（没有`()`。）

您的原始行`button.onclick = handleButtonClick();` *调用*该`handleButtonClick`函数，然后将其返回值分配给`button.onclick`. 就像

```
var a = foo(); 
```

...它*调用* `foo`然后将其返回值分配给`a`.

您不想这样做，您只想将函数*引用*分配给`onclick`. 所以你通过它的名字来引用这个函数，而不是调用它（所以，没有`()`）。

# cocoa-touch - 如何使用 Cocoapods 设置 Kiwi？

> ID：10741183
> 
> 赞同：4
> 
> 时间：2012-05-24T16:04:39.817
> 
> 标签：cocoa-touch, unit-testing, cocoapods, kiwi

我对 Kiwi 和 Cocoapods 都是新手。我已经启动并运行了 Cocoapods，但是即使在我开始玩 Kiwi 之前，我的测试目标也会失败，并出现如下错误：

```
Undefined symbols for architecture i386:
  "_CGRectZero", referenced from:
  -[EGOImageButton initWithPlaceholderImage:delegate:] in libPods.a(EGOImageButton.o) 
```

这是我的 Podfile：

```
platform :ios
dependency 'RestKit/Network', '~>0.10.0'
dependency 'RestKit/UI', '~>0.10.0'
dependency 'RestKit/ObjectMapping', '~>0.10.0'
dependency 'RestKit/ObjectMapping/XML', '~>0.10.0'
dependency 'RestKit/ObjectMapping/JSON', '~>0.10.0'
dependency 'RestKit/ObjectMapping/CoreData', '~>0.10.0'
dependency 'SVProgressHUD'
dependency 'EGOImageLoading'
dependency 'OHAttributedLabel'
dependency 'SFHFKeychainUtils'

target :test, :exclusive => true do
    dependency 'Kiwi'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:08:20.600

您的测试是否依赖于您的其他 Cocoapods 依赖项？在您的 Podfile 中，尝试删除`:exclusive => true`测试目标中的 。这将允许您的其他依赖项包含在您的测试目标中，但会将 Kiwi 限制为仅在您的测试目标中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:09:34.227

您必须进行一些基本设置，类似于 Kiwi Wiki 上关于从头安装 Kiwi 的说明（[https://github.com/allending/Kiwi/wiki/Guide:-Up-and-Running-with-Kiwi](https://github.com/allending/Kiwi/wiki/Guide%3a-Up-and-Running-with-Kiwi) )

1.  在 Xcode 中，将名为“test”的单元测试目标添加到应用程序项目（添加目标/Cocoa Touch 单元测试包）
2.  添加对 PodFile 的 Kiwi 引用（如上所示）
3.  运行 pod 安装。
4.  编辑主要目标的架构，将单元测试目标添加到“测试”选项卡（这样您就可以执行 cmd-U）
5.  将 Main Target 的可执行文件的路径添加到 Unit Test Target 中的 BundleLoader 构建设置中：例如。$(BUILT_PRODUCTS_DIR)/Foo.app/Foo
6.  将 Kiwi 测试添加到测试目标

# sql-server - 单用户模式下的 SQL Server 2008 不允许连接

> ID：10741187
> 
> 赞同：6
> 
> 时间：2012-05-24T16:05:05.643
> 
> 标签：sql-server, sqlcmd

我不知道 SA 密码，所以我以单用户模式重新启动了我的 SQL Server 2008 Standard Edition 实例，希望能更改 SA 密码。之后我立即尝试与

`sqlcmd -S serverName\ss2008`

> 消息 18461，级别 14，状态 1，服务器 serverName\SS2008，Line1 用户 'serverName\Administrator' 登录失败。原因：服务器处于单用户模式。目前只有一位管理员可以连接。

我尝试直接更改密码会产生

> C:\Documents and Settings\Administrator>sqlcmd -U sa -zp@ssword 密码：消息 18470，级别 14，状态 1，服务器 serverName，第 1 行用户“sa”登录失败。原因：账号被禁用。

-m 真的代表零用户模式，还是我的服务器出了问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T17:13:22.670

您的连接可能会立即被其他服务（例如 SQL 代理、报告服务）占用

`-m`您可以使用开关传递可选的附加客户端名称参数。

例如使用

```
-m"sqlcmd" 
```

将只允许将自己标识为 sqlcmd 客户端程序的程序使用单个可用连接。[有关此内容的更多信息，请参阅文档。](http://msdn.microsoft.com/en-us/library/ms188236.aspx)

# asp.net-mvc-3 - 货币格式化 MVC

> ID：10741190
> 
> 赞同：36
> 
> 时间：2012-05-24T16:05:13.123
> 
> 标签：asp.net-mvc-3, razor, string.format

我正在尝试将 Html.EditorFor 文本框的格式设置为具有货币格式，我试图将其基于该线程[String.Format for currency on a TextBoxFor](https://stackoverflow.com/questions/6963497/string-format-for-currency-on-a-textboxfor)。但是，我的文本仍然显示为 0.00，没有货币格式。

```
<div class="editor-field">
        @Html.EditorFor(model => model.Project.GoalAmount, new { @class = "editor-     field", Value = String.Format("{0:C}", Model.Project.GoalAmount) }) 
```

有我正在做的代码，这里是网站本身包含在编辑器字段 div 中的该字段的 html。

```
<input class="text-box single-line valid" data-val="true" 
 data-val-number="The field Goal Amount must be a number." 
 data-val-required="The Goal Amount field is required."
 id="Project_GoalAmount" name="Project.GoalAmount" type="text" value="0.00"> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-24T16:08:10.993

您可以使用以下属性装饰您的`GoalAmount`视图模型`[DisplayFormat]`属性：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:c}")]
public decimal GoalAmount { get; set; } 
```

并且简单地认为：

```
@Html.EditorFor(model => model.Project.GoalAmount) 
```

EditorFor 助手的第二个参数根本不像你想象的那样做。它允许您将额外的 ViewData 传递给编辑器模板，它不是 htmlAttributes。

另一种可能性是为货币 ( `~/Views/Shared/EditorTemplates/Currency.cshtml`) 编写自定义编辑器模板：

```
@Html.TextBox(
    "", 
    string.Format("{0:c}", ViewData.Model),
    new { @class = "text-box single-line" }
) 
```

进而：

```
@Html.EditorFor(model => model.Project.GoalAmount, "Currency") 
```

或使用`[UIHint]`：

```
[UIHint("Currency")]
public decimal GoalAmount { get; set; } 
```

进而：

```
@Html.EditorFor(model => model.Project.GoalAmount) 
```

# java - 长 Java 'try' 块中的哪一行抛出异常？

> ID：10741192
> 
> 赞同：4
> 
> 时间：2012-05-24T16:05:16.110
> 
> 标签：java, eclipse, debugging, exception

有没有办法找出 try 块中的哪一行抛出异常？

我正在Eclipse中处理Java，看起来像

```
try {

  //Lots of code. Seriously. Lots.

} catch (Exception e){
  throw new OtherException();
} 
```

我在 try 块中遇到异常（然后被捕获）。我如何确定它是从哪里抛出的？

问题

*   堆栈跟踪仅显示 catch 块中 OtherException 的行
*   删除 try/catch 块并不简单，因为有许多声明为抛出的异常需要被捕获才能编译代码。

感觉应该有一种直接的方法来做到这一点。

注意：这段代码不是我写的 ;-)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T16:07:17.273

使用`cause`参数`Exceptions`（[见这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html#Exception(java.lang.Throwable))）：

```
try {

  //Lots of code. Seriously. Lots.

} catch (Exception e){
  throw new OtherException(e); // Trick is here
} 
```

这样，您也可以`cause`在堆栈跟踪中获得异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T16:06:37.153

在 Eclipse 中，您可以设置由异常触发的断点。请参阅[添加 Java 异常断点](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-addexception_viewaction.htm)。

对于这种特殊情况，您需要确保选中“暂停捕获的异常”。

一旦 Eclipse 进入调试器，您将拥有大量工具供您使用。您将看到调用堆栈，将能够检查变量等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T16:09:37.340

您可以使用`throw new OtherException(e);`. 正如[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.Throwable%29)所解释的，这个构造函数*构造了一个具有指定原因的新异常*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T16:09:37.857

`OtherException`抛出异常时，在构造函数中传递异常 e 。它将为您提供完整的堆栈跟踪，其中包含引发异常的确切行：

```
catch (Exception e) {
    throw new OtherException(e);
} 
```

如果`OtherException`没有一个构造函数，`Exception`或者`Throwable`你可以这样做：

```
catch (Exception e) {
    OtherException o = new OtherException();
    o.initCause(e);
    throw o;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T16:14:31.000

只需打印堆栈跟踪或在调试模式下运行

```
e.printStackTrace() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T16:10:25.190

您也可以尝试将错误消息打印到控制台：`System.out.println(e.getMessage());`

不过，断点非常有用，因为您可以跟踪代码并准确查看它何时到达 catch 块。

# php - 更改 jpgraph 的边距颜色

> ID：10741195
> 
> 赞同：1
> 
> 时间：2012-05-24T16:05:39.387
> 
> 标签：php, jpgraph

我正在尝试更改 jpgraph 上边距的颜色。我似乎无法弄清楚。我试过`$graph->SetMarginColor("khaki:0.6");`了，但这似乎无济于事。下面是生成示例图表以及示例输出的代码。如果有帮助，我正在使用 jpgraph 3.5。

```
$datay1 = array(20,15,23,15);
$datay2 = array(12,9,42,8);
$datay3 = array(5,17,32,24);

// Setup the graph
$graph = new Graph(300,250);
$graph->SetScale("textlin");

$theme_class=new UniversalTheme;

$graph->SetTheme($theme_class);
$graph->img->SetAntiAliasing(false);
$graph->title->Set('Filled Y-grid');
$graph->SetBox(false);

$graph->img->SetAntiAliasing();

$graph->yaxis->HideZeroLabel();
$graph->yaxis->HideLine(false);
$graph->yaxis->HideTicks(false,false);

$graph->xgrid->Show();
$graph->xgrid->SetLineStyle("solid");
$graph->xaxis->SetTickLabels(array('A','B','C','D'));
$graph->xgrid->SetColor('#E3E3E3');

// Create the first line
$p1 = new LinePlot($datay1);
$graph->Add($p1);
$p1->SetColor("#6495ED");
$p1->SetLegend('Line 1');

// Create the second line
$p2 = new LinePlot($datay2);
$graph->Add($p2);
$p2->SetColor("#B22222");
$p2->SetLegend('Line 2');

// Create the third line
$p3 = new LinePlot($datay3);
$graph->Add($p3);
$p3->SetColor("#FF1493");
$p3->SetLegend('Line 3');

$graph->legend->SetFrameWeight(1);

// Output line
$graph->Stroke();

?> 
```

![在此处输入图像描述](../Images/3c6ec97cc9a5212c078c73b241d43bcc.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:40:52.020

`SetMarginColor`是您需要的两个命令之一。你还需要使用`SetFrame`

```
$graph->SetTheme($theme_class);
$graph->img->SetAntiAliasing(false);
$graph->title->Set('Filled Y-grid');
$graph->SetMarginColor('khaki:0.6'); 
$graph->SetFrame(true,'khaki:0.6',1);    // The '1' here seems to be irrelevant
                                         // I've tried much larger numbers with no
                                         // change. This is supposed to be frame
                                         // width (in pixels). 
$graph->SetBox(false); 
```

这会产生这样的图像

![在此处输入图像描述](../Images/766796ebbac35aa1bd3405c08a7437aa.png)

# c++ - Autoexp.dat 版本

> ID：10741196
> 
> 赞同：2
> 
> 时间：2012-05-24T16:05:40.567
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我正在做一个项目，我需要在几个不同的（不兼容的）autoexp.dat 文件之间切换。目前，这涉及关闭 Visual Studio 的所有实例，将我想要的文件复制到新位置，然后再次打开 Visual Studio。有一个更好的方法吗？也许是一个命令行选项来指定 autoexp.dat 的位置？理想情况下，我希望能够同时运行两个 Visual Studio 实例，每个实例使用不同的 autoexp.dat 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:55.893

你试过按照你的建议做吗？我知道有一种方法可以使它成为 Visual Studio 的插件，正如[这里](http://www.altdevblogaday.com/2011/06/11/extend_visual_studio/)提到的。也许您可以修改此设置以动态加载您要使用的 autoexp.dat 文件？

# python - Django 似乎正在缓存 datetime.now()

> ID：10741201
> 
> 赞同：6
> 
> 时间：2012-05-24T16:05:55.720
> 
> 标签：python, django, caching, datetime

我有一个看起来像这样的模型：

```
class Item(models.Model):
    ...
    publish_date = models.DateTimeField(default=datetime.datetime.now)
    ... 
```

还有一个看起来像这样的经理：

```
from datetime import datetime

class ItemManager(Manager):
    def published(self):
        return self.get_query_set().filter(publish_date__lte=datetime.now() 
```

一个看起来像这样的视图：

```
class ItemArchive(ArchiveIndexView):
    queryset = Item.objects.published()
    date_field = 'publish_date' 
```

我的想法是我可以调用`Item.objects.published()`并获取所有已发布的查询集`Items`。

问题是 Django 似乎`datetime.now()`在服务器启动时在管理器中执行调用，然后缓存该值。因此，如果今天是 5 月 24 日，并且我创建了`Item`一个发布日期为 5 月 23 日的项目，并在 5 月 22 日启动了服务器，那么 5 月 23 日的项目将不会显示在`ItemArchive`视图中。一旦我重新启动 Apache，5 月 23 日的项目就会正确显示在视图中。

`datetime.now()`每次调用经理时，如何强制 Django 执行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T16:12:42.910

我相信这是由您定义`queryset = Item.objects.published()`为类变量的视图引起的。此行将在`ItemArchive`最初导入您的类时执行一次。您应该将该行移到每次调用视图时都会执行的方法中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T16:50:11.200

不要使用`queryset`类变量，`get_queryset`而是覆盖。总的来说，我认为这`queryset`是一个红鲱鱼。如果您只是指定`model`，Django 会自动将查询集设置为`self.model.objects.all()`. 如果您需要任何过滤，100 次中有 99 次需要覆盖`get_queryset`以确保线程安全。请尝试以下操作。

```
class ItemArchive(ArchiveIndexView):
    model = Item
    date_field = 'publish_date'

    def get_queryset(self):
        return super(ItemArchive, self).get_queryset().published() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:21:27.457

首先，只需使用`models.DateTimeField(auto_now_add=True)`

**编辑：**

二、使用`get_queryset`方法：

```
class ItemArchive(ArchiveIndexView):
    date_field = 'publish_date'

    def get_queryset(self):
        return Item.objects.published() 
```

# jquery-ui - 可调整大小的 tinyMCE 实例不适用于 jqueryUI 的 .draggable

> ID：10741203
> 
> 赞同：5
> 
> 时间：2012-05-24T16:06:12.680
> 
> 标签：jquery-ui, tinymce, draggable, resize, resizable

我在容器 div 内有一个动态创建的 TinyMCE 文本区域（使用外部工具栏）。我试图让它可以拖动，并且可以调整大小（整个文本区域）。

jQueryUI 的 .draggable() 与 tinyMCE 一起使用，但如果我使用 .resizable()，当我单击该区域时，不会出现 tinyMCE 外部工具栏。如果我在它的设置中使用了tinyMCE的resize选项，当我点击拖动来调整它的大小时，它会破坏jqueryUI的可拖动功能（整个框跟随鼠标以及调整大小，并且不会松手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:33:52.720

[我使用 jquery ui draggable 的句柄](http://api.jqueryui.com/draggable/#option-handle)选项和拖动函数回调解决了这个问题：

```
div.draggable.handle = "div[role=group], td.mceLast";
div.draggable.drag = function ( event, ui ) {
    if ( $( event.srcElement ).is( '.mceResize' ) || $( event.originalEvent.target ).is( '.mceResize' ) ) {

        return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T10:37:57.037

这是解决方案

“.mce-resizehandle”是 tinymce 调整大小按钮的类

```
$( ".selector" ).resizable({
  cancel: ".mce-resizehandle,input,textarea,button,select,option",
});

$( ".selector" ).draggable({
  cancel: ".mce-resizehandle,input,textarea,button,select,option",
}); 
```

# sql-server-2008 - 更新许多记录。我应该使用游标吗？

> ID：10741208
> 
> 赞同：-1
> 
> 时间：2012-05-24T16:06:26.437
> 
> 标签：sql-server-2008, tsql, cursor

我在 Ms Sql Server(TSQL) 中的更新有问题
假设我有一个带有**描述**和**ID字段的表****Person**并用这个值向这个表插入了 1000 条记录

 ****```
 1      Descript1
  2      Descript2
  3      Descript3
  ..       ......
  ..      ......
  1000   Descript1000 
```

我如何更改这 1000 条记录，以下记录相同

```
1   Description1
2    Description2
3     Description3
......
......
1000      Description1000 
```

我应该使用**光标**吗？我写了这个查询，但它不起作用

```
 while @Counter<=1000000
      begin
          update Person set Description='Descripton'+CONVERT(nvarchar(15),@Counter) where ID>=1
     set @Counter=@Counter+1
      end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:10:54.787

不需要`cursor`，只是一个简单的`update`：

```
update Person
set Description = "Description" + convert(varchar(10), ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:22:10.210

```
UPDATE  Person
SET     Discription = SPACE(Z.n)+ Z.Discription
FROM (  SELECT  ID, 
                Description , 
                ROW_NUMBER() OVER (ORDER BY ID)n
        FROM Person
    )Z 
```****

# ios - imageWithContentsOfFile - 为什么不接受 ios 中的路径？

> ID：10741210
> 
> 赞同：0
> 
> 时间：2012-05-24T16:06:32.193
> 
> 标签：ios, image, cocoa-touch

我在这里迷路了。我尝试使用该方法初始化 UIImage 对象。我知道它在文档目录等中查找并且不缓存...

我提供了相应的 URL 或路径，但对象始终为零。该方法永远不会成功。是因为我的路径总是在开头包含文件前缀吗？像这样？

**文件：//** .somedir/somedir/etc.../filename.jpg

我通过使用此调用获取 docs 目录来创建路径

```
//get the documents directory path
NSURL *docsPath = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

// create the full image local path 
NSString *imageLocalPath = [NSString stringWithFormat:@"%@%u.jpg", docsPath, indexPath.row + 1]; 
```

然后构造路径字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:19:52.620

这

```
[NSString stringWithFormat:@"%@", docsPath]; 
```

真的是这个

```
[NSString stringWithFormat:@"%@", [docsPath description]]; 
```

这根本不是你想要的。

尝试这样的事情： -

```
NSURL *docsURL = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
NSString *fileName = [NSString stringWithFormat:@"%u.jpg", indexPath.row+1];
NSString *filePath = [[docsURL path] stringByAppendingPathComponent:fileName]; 
```

# javascript - JavaScript 动态添加/删除 div

> ID：10741214
> 
> 赞同：0
> 
> 时间：2012-05-24T16:06:58.823
> 
> 标签：javascript, dynamic, html

我想动态创建多个 div。每个人都应该在设定的时间后自行移除。我有创建 div 和 coutdown 时间的功能。我不知道如何将它连接在一起。还有一个问题，如何管理动态添加元素的 id？

```
function creatediv(e)
{
    ward = document.createElement('div');
    ward.className="dynamic";
    ward.id = id;
    id++;
    ward.style.pixelLeft = mouseX(e);
    ward.style.pixelTop = mouseY(e);
    document.body.appendChild(ward);    
}

function timer(ID, time)
{
    if(time > 0)
    {   
        --time;
        s=time%60;
        m=Math.floor((time%3600)/60);
        var S = document.getElementById(ID);
        S.style.color = "white";
        document.getElementById(ID).innerHTML =((m<10)?"0"+m:m)+":"+((s<10)?"0"+s:s);       
        setTimeout(function () {timer(ID,time)}, 1000);     
    }
    if(time == 0)
    {
        return true;
    }   
} 
```

非常感谢任何提示。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:57.110

```
function creatediv(e) {
    ward = document.createElement('div');
    ward.className = "dynamic";
    ward.id = id;
    id++;
    ward.style.pixelLeft = mouseX(e);
    ward.style.pixelTop = mouseY(e);
    document.body.appendChild(ward);
    timer(ward.id, THE_TIME_YOU_WANT);
}

function timer(ID, time) {
    if (time > 0) {
        --time;
        s = time % 60;
        m = Math.floor((time % 3600) / 60);
        var S = document.getElementById(ID);
        S.style.color = "white";
        S.innerHTML = ((m < 10) ? "0" + m : m) + ":" + ((s < 10) ? "0" + s : s);
        setTimeout(function () {
            timer(ID, time)
        }, 1000);
    }
    else {
        // remove the div.
    }
} 
```

# c# - 在asp.net mvc EF中创建2个表之间的关系表

> ID：10741215
> 
> 赞同：0
> 
> 时间：2012-05-24T16:07:00.773
> 
> 标签：c#, asp.net-mvc, entity-framework

我建立：

*   自定义自定义会员提供程序
*   自定义角色提供者
*   用户模型
*   榜样

它正确地为我创建了 2 个自定义表。现在我想在用户和角色之间创建包含 2 列的表：RoleId、UserId

我应该调整我的模型来教 EF 创建这个关系表（UsersInRole）吗？

用户型号：

```
 public class User
{

    [Key]
    public int UserId { get; set; }

    [Required]
    public Int32 CompanyId { get; set; }

    [Required]
    public String UserName { get; set; }

    public String Password { get; set; }

    public String PasswordSalt { get; set; }

    public String Email { get; set; }

    public Boolean IsApproved { get; set; }

    public Boolean IsLockedOut { get; set; }

    public DateTime CreateDate { get; set; }

    public DateTime LastLoginDate { get; set; }

    public DateTime LastPasswordChangedDate { get; set; }

    public DateTime LastLockoutDate { get; set; }

} 
```

好榜样：

```
public class Role
{

    [Key]
    public int RoleId { get; set; }

    [Required]
    [MaxLength(20)]
    public string Name { get; set; }

    public ICollection<string> AssignedUsers { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:17:44.290

如果您使用的是代码优先 EF，那么您需要做的就是将用户集合添加到 Role 类，反之亦然。EF 将此双向链接作为信号，在底层数据存储中创建多对多关系。总而言之，您的课程将像这样增加......

```
public class User
{
  ...

  List<Role> Roles {get; set;}

}

public class Role
{
  ...

  List<User> Users {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:12:12.403

```
public class Role
{

    [Key]
    public int RoleId { get; set; }

    [Required]
    [MaxLength(20)]
    public string Name { get; set; }

    public ICollection<User> AssignedUsers { get; set; }

}

 public class User
{

    [Key]
    public int UserId { get; set; }

    [Required]
    public Int32 CompanyId { get; set; }

    [Required]
    public String UserName { get; set; }

    public String Password { get; set; }

    public String PasswordSalt { get; set; }

    public String Email { get; set; }

    public Boolean IsApproved { get; set; }

    public Boolean IsLockedOut { get; set; }

    public DateTime CreateDate { get; set; }

    public DateTime LastLoginDate { get; set; }

    public DateTime LastPasswordChangedDate { get; set; }

    public DateTime LastLockoutDate { get; set; }

    public ICollection<Role> Roles{ get; set; }

} 
```

# ruby-on-rails - 在heroku中安装JRE

> ID：10741219
> 
> 赞同：0
> 
> 时间：2012-05-24T16:07:23.107
> 
> 标签：ruby-on-rails, heroku, shared-libraries

我在运行**heroku run rake sunspot:solr:run 时遇到了这个错误**

```
rake aborted!
You need a Java Runtime Environment to run the Solr server 
```

有没有办法在heroku中安装jre？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:15:21.527

您无法在 Heroku 上安装 JRE，因此您无法从 Heroku 工作程序运行 Solr。

如果您想在 Heroku 中使用 Solr，则必须使用[Websolr](https://devcenter.heroku.com/articles/websolr)插件，或者启动 EC2 服务器并从那里运行您自己的 Solr 副本。

# c - 使用 libxml2 读取 XML

> ID：10741221
> 
> 赞同：0
> 
> 时间：2012-05-24T16:07:40.010
> 
> 标签：c, xml, libxml2

我正在使用 libxml2.so 在 LINUX 平台上解析 C 中的 XML 文件。我的 XML 格式如下所述。我可以在文件中拥有任意数量的帐户。在有人在论坛上建议我之后，我第一次使用 libxml。我能够解析我只有一个帐户的文件。如果我有多个帐户，我不明白如何实施。任何人以前在 Linux 上的 C、libxml 中实现过这样的东西。

```
<ACCOUNT>
  <ACCOUNT_NO> 123 </ACCOUNT_NO>
  <NAME> XYZ </XYZ>
  <STATE> GA </STATE>
</ACCOUNT>

<ACCOUNT>
  <ACCOUNT_NO> 223 </ACCOUNT_NO>
  <NAME> ABC </XYZ>
  <STATE> FL </STATE>
</ACCOUNT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:17:03.507

根据 XML 定义，如果您有更多 < ACCOUNT>，则需要在所有 < ACCOUNT> 标记周围加上一个环绕标记 fe < ACCOUNTS>。

如果你有这个，你可以“进入”孩子，你可以 while() 在 ->next 节点上。

EDITH：我想你使用的是 DOM 模型。但是，如果您有很多 (!) < ACCOUNT>，出于内存原因，您应该切换到 SAX。DOM 将 (D) 文档构建到内存中 (O) 对象的完整 (M) 映射。

在 SAX 中，您为每个开始标记和结束标记和数据构建了一个状态机，该状态机在文件/内存读取完成时触发。

EDITH 2：如果您必须找到一个特殊值，您应该考虑将键值（account_no？）放入像 <ACCOUNT no="123"> <NAME><XYZ> <STATE>FL</STATE> 这样的属性中< /帐户>

# asp.net - 动态图像按钮事件处理程序未触发

> ID：10741224
> 
> 赞同：0
> 
> 时间：2012-05-24T16:07:48.013
> 
> 标签：asp.net, ajax

我在 page_load 上构建了一个动态表。

我将表格放在更新面板中，这样我就可以动态添加行而无需整页回发。每行有 4 个单元格，前 3 个包含文本框，第 4 个单元格是需要删除该行的图像按钮。

但是，删除该行的图像按钮正在回发，但不会触发事件处理程序子。

我将表设置为会话变量，以便在回发时重新加载。

```
<%--Update Panel with Image Button to add row--%>
<asp:UpdatePanel ID="pnlHA" runat="server" UpdateMode="conditional" >
 <ContentTemplate>
    <asp:ImageButton ID="imgAddHA" AlternateText="Add Row" ImageUrl="../images/plus_orange.png" style="width:17px; height:17px; cursor: hand;" runat="server" />
    <div style="height:100px; overflow:scroll; overflow-x:hidden;">
        <span runat="server" id="spanTBL_HA" />
    </div>   
 </ContentTemplate>
</asp:UpdatePanel> 
```

在 page.init 上，如果 pnl 页面处于回发状态，那么它会重新创建跨度

```
 If pnlHA.Page.IsPostBack Then
        spanTBL_HA.Controls.Clear()
        spanTBL_HA.Controls.Add(CType(Session("tblHA"), Table))
    End If 
```

将图像按钮添加到表格单元格

```
img = New ImageButton

Session("tblHA_Counter") = CInt(Session("tblHA_Counter")) + 1

img.AlternateText = "Delete Row"
img.Attributes.Add("style", "height: 10px; width: 10px; cursor: hand;")
img.ImageUrl = "../images/minus_red.png"
img.ID = "img_" & CInt(Session("tblHA_Counter")).ToString
AddHandler img.Click, AddressOf imgRemove_Click
img.Attributes.Add("runat", "server")

tc.Attributes.Add("style", "width:35px")
tc.Controls.Add(img) 
```

点击事件

```
Protected Sub imgRemove_Click(ByVal sender As Object, ByVal e As ImageClickEventArgs)
    Dim img As ImageButton = CType(sender, ImageButton)
    Dim delRow As TableRow = Nothing
    Dim rowIndex As Integer = 0

    For Each row As TableRow In CType(Session("tblHA"), Table).Rows
        If CType(row.Cells(3).Controls(0), ImageButton).UniqueID = img.UniqueID Then
            delRow = row
        End If
    Next

    If delRow IsNot Nothing Then
        CType(Session("tblHA"), Table).Rows.Remove(delRow)
    End If

    spanTBL_HA.Controls.Clear()
    spanTBL_HA.Controls.Add(CType(Session("tblHA"), Table))

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:11:06.163

*每次*创建页面时都需要重新创建动态控件，以允许 ASP.NET 将视图状态、回发数据和事件连接恢复到动态创建的控件。所以记得在回发时重新创建它们。

请检查您是否在每个回帖中创建它们。

# xna - 我做错了什么随机？

> ID：10741230
> 
> 赞同：3
> 
> 时间：2012-05-24T10:36:56.927
> 
> 标签：xna, c#, random

我有一些代码使用随机数来确定对象是否特殊。我在每隔一段时间重置的 4 个对象中的每一个上使用此代码。

```
Random rand = new Random();

int i = rand.Next(1, 25);

if (i == 1)
{
    thiss.typer = "boulder";
    thiss.texture = Content.Load<Texture2D>("rock");
}
else if (i == 2)
{
    thiss.typer = "ice";
    thiss.texture = Content.Load<Texture2D>("ice");
}
else if (i == 3)
{
    thiss.typer = "bomb";
    thiss.texture = Content.Load<Texture2D>("bomb");
}
else
    thiss.typer = "normal"; 
```

但是每次我执行这段代码时，当它创建 4 个对象时，当它使其中一个对象变得特别时，由于某种原因，它使它们都变得特别。这段代码有问题吗，还是我必须展示更多代码才能阐明它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T10:59:11.877

我可以想到这可能发生的两个原因。

首先，也许您不小心在对象之间共享了一个引用，因此`thiss.typer`在所有 4 种情况下都引用了同一个对象。

其次，更有可能的是，您创建的随机对象共享相同的种子，因此 rand.Next 在所有 4 个实例中返回相同的数字。当您`new Random()`不使用参数时，种子基于当前系统时间。如果您快速连续多次执行此操作，则种子可能是相同的。

您可以尝试使用相同的 Random 对象，而不是每次使用时都创建一个新对象。这样，您还可以避免不必要地创建大量对象。

# iphone - uiview 中的 uilabel - 向标签添加手势不起作用

> ID：10741232
> 
> 赞同：0
> 
> 时间：2012-05-24T16:08:08.973
> 
> 标签：iphone, objective-c, xcode

我在 uiview 中有一个 uilabel（以及其他标签）。我添加了一个手势，当点击标签时，我会执行一些操作。

不会触发该操作，但是如果我将标签放在 uiview 之外（意味着它不是 uiview 的子项），则它可以正常工作。我将它放回视图中，而不是停止触发动作。

知道为什么吗？

当标签在 uiview 内部时，它不会对手势做出反应，我不确定为什么（尽管 uiview 和标签都启用了“用户交互”）。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:17:25.553

或者只是没有 UILabel 并且只有按钮的文本可见，这样您就不必拥有 UILabel 和 UIButton （从内存的角度来看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:54:46.987

我认为这里的问题`UILabel`是接收触摸事件而不是 UIView。尝试将以下代码（修改为适合您的标签，当然）添加到`viewDidLoad`方法中：

`myLabel.userInteractionEnabled = FALSE;`

这应该允许触摸事件传递到 UIView。你为什么做这个？使用 a 会不会更容易`UIButton`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:20:45.677

显然父控件存在问题，我重新绘制了视图，它工作正常。感谢您的意见。

# java - 使用从数据库中提取的数据计算最短路径

> ID：10741239
> 
> 赞同：0
> 
> 时间：2012-05-24T16:08:32.063
> 
> 标签：java, web-services

所以我需要创建一个与我的 Android 应用程序通信的 Web 服务。在我的 android 应用程序中，客户端选择两点开始和到达，这两个点将被发送到我的网络服务以查找它们之间路径最短的总线。我的 Web 服务端有问题。

我尝试使用 Dijkstra 算法找到两点之间的最短路径。为了测试 Dijkstra 算法，我必须从 MySQL 数据库中提取数据，而不是将其直接放入我的算法中。我不知道我该怎么做。

在我的数据库中，我有两个表，其中包含巴士路线（巴士编号）、代码（车站 ID）、pt_arret（车站名称）。还有另一个表，其中包含位置代码（id 站）、纬度和经度以及距离（是一个站与之前的站之间的距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:24:31.693

您必须创建一个结构，让您可以使用 Dijkstra 算法。为此，您必须从数据库中读取*所有*相关数据。从关系数据到面向对象的转变总是很尴尬。

理想情况下，您希望对每个表使用单个简单的 SQL 选择来获取数据。优化很棘手。一条 select 语句可以抓取一百万行几乎和抓取一行一样快；一次选择将获得一百万行，而 10 次选择将获得 10 行（根据我的经验）。但是如果你的数据库连接很慢（带宽很窄），那么抓取太多不需要的行可能会花费很长时间。

使用 Maps（TreeMap 或 HashMap）来跟踪您阅读的内容，因此您可以找到已经阅读并放置在您的结构中的“站”对象，并为它们添加连接。

在内存中设置好数据结构后，请尝试尽可能长时间地保留它，以限制重新读取数据库的延迟。

注意你的记忆和时间。您面临运行速度太慢或内存不足的危险。您需要注意性能（这似乎不是常见的需求，这些天）。我提出了一些建议，但我真的不知道你的硬件和数据会发生什么。（例如，读取数据库可能没有我想象的那么慢。）

希望这可以帮助。如果您以前没有做过这样的事情，那么您有很多工作和学习要做。我参与了这样一个主要程序（但它也*写到*了数据库中），我感觉自己一直在逆流而上。

**添加：**

您在内存中想要的是一组车站（Station 类对象）和路线（Route 类对象）。每个站点都将拥有描述一个站点所需的所有数据，包括位置。至关重要的是，它还需要一个 ID。站应该使用 ID 作为键进入 TreeMap。（这是我的偏见，很多人会使用 HashMap。）

每条路线都将引用它连接的两个车站、距离或旅行时间以及任何其他需要的信息。

每个*站*还将包含引用它的路线列表*。*我建议使用 LinkedList 以提高灵活性。（在这种情况下，ArrayList 很容易在未使用的数组元素上浪费大量空间。）您需要从数据库中读取站点，然后读取路线信息。当您阅读每条路线的信息时，创建 Route 对象，找到两个站点，将它们的引用添加到 Route，然后将 Route 添加到两个站点的路线列表中。

现在，对于每个车站，您可以找出所有离开它的路线，然后找出您可以通过一次巴士旅行到达的所有车站。从这些站点，您可以通过您的网络继续工作。如果你想这样想的话，这个结构确实是一个“稀疏数组”。

应用 Dijkstra 的算法——或任何其他算法——非常简单。您需要车站和路线（Station 和 Route 类中的字段）上的各种标志来跟踪您已将哪些节点（车站）和连接（路线）用于各种目的。在一张纸上绘制地图（从一个小地图开始！）以跟踪您的代码在做什么可能会有所帮助。我的经验是，做这一切只需要很少的代码，但需要很多仔细的思考。

# debugging - 如何只调试顶层代码？

> ID：10741241
> 
> 赞同：0
> 
> 时间：2012-05-24T16:08:38.143
> 
> 标签：debugging

我正在学习如何使用调试器，并想知道我是否遗漏了显而易见的东西。

我的简单脚本包括两个可以正常工作的函数。主代码反复调用它们。有没有一种简单的方法可以只单步执行调用代码，而它们使用的函数和库以正常速度运行？

我正在使用 python 2.7 和[pyscripter](http://code.google.com/p/pyscripter/)，但我想人们可能希望在其他调试器和语言中使用它。也许有一种方法可以将代码部分标记为受信任，然后单步执行其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:54:50.770

在 Dani 评论的搜索帮助下，我在 Stack Overflow 的其他地方找到了几个很好的解释。我最喜欢的，来自[这个 Eclipse 问题](https://stackoverflow.com/questions/3580715/eclipse-debug-step-into-step-over)的[polygenelubricants](https://stackoverflow.com/users/276101/polygenelubricants)：

> 在调试代码行时，通常会出现以下情况：
> 
> *   (Step Into) 一个方法即将被调用，你想调试到那个方法的代码中，那么下一步就是进入那个方法，继续一步步调试。
>     
>     
> *   (Step Over) 一个方法即将被调用，但是你对调试这个特定的调用不感兴趣，所以你希望调试器将这个方法作为一个完整的步骤来执行。
>     
>     
> *   （步骤返回）您已逐步调试此方法，您只希望调试器运行整个方法，直到它作为一个完整步骤返回。
>     
>     
> *   （恢复）您希望调试器恢复“正常”执行，而不是逐步执行。
>     
>     
> *   （行断点）您不关心它是如何到达那里的，但是如果执行到达特定的代码行，您希望调试器暂时暂停那里的执行，以便您决定要做什么。
>     
>     
> 
> Eclipse 具有其他高级调试功能，但这些是基本的基础。

# sql-server - ssis 包将使用哪些系统内存？

> ID：10741242
> 
> 赞同：5
> 
> 时间：2012-05-24T16:08:58.817
> 
> 标签：sql-server, ssis

我对 ssis 包中的内存使用情况几乎没有疑问。

1.  如果我将数据从服务器 A 加载到服务器 B 并且 ssis 包在我的桌面系统中并通过 BIDS 运行，是否会在我的桌面系统中创建缓冲区（内存使用）？如果是这种情况，性能（低内存与服务器相比）会很慢吗？

2.  如何在我的桌面系统中开发包时启用服务器资源的使用？

3.  请帮助我，如果我有 3 个 ssis 开发人员并且一次都在开发不同的软件包，那么最好的开发方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:25:40.003

为了扩展#3，我发现允许团队处理单个 SSIS 解决方案的最佳方法是将问题（包）分解为越来越小的块，并通过父子/主从类型控制它们的调用关系。

例如，解决方案涉及加载数据仓库。我可能有 2 个控制器包，FactController.dtsx 和 DimensionController.dtsx。他们的职责是调用解决需求的各种包（加载事实或维度）。也许我的 DimensionProductLoader 包正在处理雪花（它需要更新 Product 和 SubProduct 表），以便分解为 2 个包。

所有这些的目标是将开发过程分解为可管理的块，以避免对单个包的并发访问。合并 XML 不会有效地利用您的时间。

所有这一切的唯一共享资源是 SSIS 项目文件 (dtproj)，它只是一个 XML 文档，枚举了危害项目的包。使用命名良好的空白包创建一个前期框架项目，您可能可以跳过一些最初围绕人们尝试将项目合并回您的存储库的痛苦。我发现一次性类型的合并要好得多，至少对于 TFS 而言，比每个人重新检查他们的 XML glob 都要好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T20:01:18.143

1.  是的。包与启动它的程序在同一台计算机上运行。即使程序加载远程存储在另一台服务器上的包，该包也会在本地计算机上运行。

2.  如果服务器资源是指服务器 CPU，则不能。就像使用网络上任何其他计算机的资源一样。当然，如果您有一个在 SQL Server 上运行 select 的 OleDBSource，那么“运行”该 select 的 CPU 显然将是 SQL Server 上的 CPU，但是一旦检索到结果集，它将由包所在的计算机处理在跑。

3.  像任何其他开发方法一样。如果你有一个由 3 位开发人员开发的 C# 项目的课程，你是怎么做的？您可以让每个开发人员处理同一个文件并合并更改，毕竟一个包是一个 xml 文件，但更复杂。我不会推荐。我遇到过不止一个开发人员在同一个包上工作但不是在同一时间工作的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T21:01:06.493

扩展迭戈和比尔的答案：

1) Diego 基本上是正确的，我只想补充一点：程序包在运行它的计算机上运行，​​但更糟糕的是，通过 BIDS 运行程序包甚至与您在服务器上看到的内容并不接近，因为 BIDS 用于运行包是本地运行的32位进程。由于与在 32 位子系统中运行相关的限制，以及通过网络将缓冲区的所有数据复制到工作站内存中的缓冲区，在包流动时对其进行转换，然后再次推送，您会变慢通过网络到您的目标服务器。这适用于在测试环境中测试数据的小子集，但不应用于估计服务器系统的性能。

2）迭戈有这个正确的。如果您想查看服务器性能，请将其部署到测试服务器并在那里运行。

3) billinkc 有这个正确的。TFS 中 SSIS 的一大缺点是没有一种优雅的方式来共享单个包上的工作。如果您想在一个进程中使用多个开发人员，请将其分成更小的块，并让一个开发人员在每个部分上工作。只要他们没有同时开发相同的包，你应该没问题。

# android - GPS 在版本 2.3.5 中持续本地化（不是在 2.2 中）

> ID：10741243
> 
> 赞同：1
> 
> 时间：2012-05-24T16:09:01.147
> 
> 标签：android, gps, location, version

我有一个程序使用 GPS 每 2 分钟定位一个人。为此，代码是：

```
private boolean flagLocalizacion = false;
private LocationListener locationListener;
private Location ultimaLocalizacion;
private LocationManager locationManager;  

@Override
public void onCreate(Bundle savedInstanceState) {
    locationListener = new LocationListener() { 
        public void onLocationChanged(Location location) {
            if (location!=null) {
                if(ultimaLocalizacion == null && flagLocalizacion) {
                    ultimaLocalizacion = location;
                    Toast.makeText(getApplicationContext(), "Longitude: " + location.getLongitude() + "Latitude: " + location.getLatitude(), Toast.LENGTH_SHORT).show();
                } else if ((ultimaLocalizacion.getLatitude() != location.getLatitude()
                            || ultimaLocalizacion.getLongitude() != location.getLongitude()) && flagLocalizacion) {
                    ultimaLocalizacion = location;
                    Toast.makeText(getApplicationContext(), "Longitude: " + location.getLongitude() + "Latitude: "  + location.getLatitude(), Toast.LENGTH_SHORT).show();
                }                   
            }
        }
        public void onStatusChanged(String provider, int status, Bundle extras) {}
        public void onProviderEnabled(String provider) {
            System.out.println("gps");
        }
        public void onProviderDisabled(String provider) {
            System.out.println("No gps");
        }
    };                                                                   Button botonComenzar = (Button) findViewById(R.id.bComenzar);
    botonComenzar.setOnClickListener(new OnClickListener() {
        @SuppressWarnings("static-access")
        public void onClick(View v) {
            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.requestLocationUpdates(locationManager.GPS_PROVIDER, 12000, 30, locationListener);
            Toast.makeText(getApplicationContext(), "Activada Localizacion", Toast.LENGTH_SHORT).show();
            flagLocalizacion = true;    
        }
    }); 
```

我的问题是：

此应用程序在 2.2 版中正常工作。但是当我将它安装在具有 2.3.5\. 的手机中时，该软件失败了，失败是那个 localice 不断地，而不是每 2 分钟一次。你有没有想过为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:34:15.613

持续的 GPS 刷新（即 GPS 更新之间的间隔为 1 秒），无论请求的 minTime 是多少，这是 JellyBean 之前的许多 Android 手机的一个已知问题。

与 Android 团队有关此问题的完整讨论如下：

[https://android-review.googlesource.com/#/c/34230/](https://android-review.googlesource.com/#/c/34230/)

在 Android 4.1 JellyBean 中添加了一个新的 CTSVerifier 测试，应该可以防止在 JellyBean 及更高版本上发生这种情况。

对于受此影响的设备 pre-Jelly Bean，您唯一的解决方法是在您希望 GPS 刷新的任何时间间隔手动取消注册并重新注册 LocationListener。

# php - 在文本中查找和替换大量关键字

> ID：10741257
> 
> 赞同：2
> 
> 时间：2012-05-24T16:10:22.960
> 
> 标签：php, dom, text, replace

假设我有一个大约 10,000 个单词的 HTML 文本和一个包含大约 10,000 个关键字的列表。我想在文本中找到所有出现的关键字并将它们替换为`<span title="a keyword">keyword</span>`. 作为一个额外的复杂因素，我不想替换`<span>`周围已经有 a 的关键词。

在 PHP 中最好、最有效的方法是什么？

我显然可以为每个关键字构建一个正则表达式并按顺序运行它们，但这似乎是一场复杂的噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:15:57.493

你可以使用[Preg_Replace](http://php.net/manual/en/function.preg-replace.php) 它一个非常强大的工具来使用，祝你有美好的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:26:49.773

可能是这样吗？我不确定

```
$str          = "this is keyword say this is also keyword say say";
$newtext      = wordwrap($str, 18, "\n", true);
$patterns[0]  = '/keyword/';
$patterns[1]  = '/say/';
$replacements = array();

foreach($patterns as $k=>$v)
{
  $replacements[] = "<span title=\"a ".str_replace("/","",$v)."\">".str_replace("/","",$v)."</span>";
}

echo preg_replace($patterns, $replacements, $str); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T16:15:10.020

尝试这个：

```
str_replace('your_string','keyword','<span title="a keyword">keyword</span>') 
```

# facebook - 如果用户喜欢一个页面，如何发布到新闻提要？

> ID：10741260
> 
> 赞同：1
> 
> 时间：2012-05-24T16:10:28.293
> 
> 标签：facebook, facebook-graph-api

最近，我听说，使用 Facebook Open Graph API，[如果用户喜欢某个页面，就可以发布到用户的新闻源](https://developers.facebook.com/blog/post/465/)。

我一直在尽力遵循这个例子，并[创建了一个 dummy page](http://dl.dropbox.com/u/3618086/test.html)。

据我了解，有必要做到以下几点：

1.  创建必要的 Open Graph 标签，包括用于您的 Facebook 应用程序的标签
    *   我已经使用[Open Graph Debugger对其进行了测试](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdl.dropbox.com%2Fu%2F3618086%2Ftest.html)
2.  在页面上添加一个赞按钮
3.  '喜欢'页面
4.  获取访问令牌（发布消息）

    ```
    curl -F grant_type=client_credentials -F client_id=MY_APP_ID -F client_secret=MY_APP_SECRET -F redirect_uri=https://graph.facebook.com/oauth/access_token https://graph.facebook.com/oauth/access_token 
    ```

5.  发布到提要

    ```
    curl -F 'access_token=ACCESS_TOKEN_FROM_STEP_4' -F 'message=Hello Likers' -F 'id=http://dl.dropbox.com/u/3618086/test.html' https://graph.facebook.com/feed 
    ```

此时应该将消息发送给喜欢该页面的任何人。相反，我收到以下错误：

```
{
    "error": {
        "message": "(#100) http:\/\/dl.dropbox.com\/u\/3618086\/test.html does not resolve to a valid user ID",
        "type": "OAuthException",
        "code":100
    }
} 
```

正是在这一点上，我很困惑。我已经阅读了这些相关问题：

*   [如何向喜欢网页或对象的人群发布信息？](https://stackoverflow.com/questions/9168434/how-do-i-publish-to-the-group-of-people-who-liked-a-webpage-or-object)
*   [您如何以编程方式发布到与“喜欢”页面关联的 Facebook 提要？](http://facebook.stackoverflow.com/questions/3964199/how-do-you-programmatically-publish-to-the-facebook-feed-associated-with-a-like)
*   [Facebook 异常 #100：无法解析为有效的用户 ID](https://stackoverflow.com/questions/6383617/facebook-exception-100-does-not-resolve-to-a-valid-user-id)
*   [如何以编程方式将喜欢的网页发布到 Facebook 提要？](https://stackoverflow.com/questions/10419371/how-to-programmatically-publish-to-a-facebook-feed-for-a-liked-webpage)
*   [无法发布到 Facebook 提要](https://stackoverflow.com/questions/8060267/unable-to-publish-to-facebook-feed#comment13443132_8060267)

并尝试了他们的建议，但没有任何成功。我错过了什么步骤？

*我可以提供更多细节；我只是不想让问题变得太长。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T21:19:06.953

好吧，我发现了我的问题。为了他人的利益，我在下面包含了我的解决方案。

我上面列出的步骤确实是正确的，但是有一些事情需要进一步解释以避免我陷入的陷阱。

# 发帖给在 Facebook 上喜欢过某个项目的人

## 第 1 步：创建 Facebook 应用

*   您需要访问[Facebook Developers](https://developers.facebook.com/apps)页面并创建一个新应用程序
    *   您的应用程序不需要命名空间或虚拟主机
*   填写您的应用程序的详细信息
    *   首先，您需要选择“使用 Facebook 登录的网站”。*站点 URL*应与托管站点的位置相同。在我的示例中，我托管在我的保管箱共享文件夹中，所以我使用了`http://dropbox.com`
    *   将您的*应用程序域*设置为您的站点 URL 的主机名。就我而言，这`dropbox.com`将允许 Facebook 使用`*.dropbox.com`. 我也可以专门做`dl.dropbox.com`的。

## 第 2 步：创建虚拟页面

创建一个虚拟页面非常重要。我发现我的大部分问题都是由于初始页面设置错误造成的。如果您创建一个虚拟页面，您可以进行试验（或至少创建另一个虚拟页面），直到一切正常。

*   确保您的页面是正确的，尤其是打开的图形标签。*正确的*样子是什么？您可以[查看我的虚拟页面](http://dl.dropbox.com/u/3618086/test2.html)，但我已包含`<HEAD>`以下内容：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns#">
    <head>
        <title>Test</title>
        <link href="http://dl.dropbox.com/u/3618086/test2.html" rel="canonical" />
        <meta property="fb:app_id" content="YOUR_APP_ID">

        <meta property="og:type" content="product">
        <meta property="og:title" content="PAGE TITLE" /> 
        <meta property="og:description" content="PAGE DESCRIPTION" /> 
        <meta property="og:image" content="http://www.stanford.edu/group/cardinalballet/Pictures/WebsitePics/portrait-placeholder.jpg">

        <meta property="og:site_name" content="SITE_NAME"/>
        <meta property="og:url" content="http://dl.dropbox.com/u/3618086/test2.html">
    </head> 
    ```

    *   其中的关键部分是`fb:app_id`（应该是您的 Facebook 应用程序 ID）和`og:type`. 有多个`types`，某些没有发布权限。有关更多信息，请访问[Open Graph API 文档](https://developers.facebook.com/docs/opengraphprotocol/)。我最初*喜欢*我的页面，因为它是一篇文章，这导致了我遇到的许多问题。
    *   您还可以使用[Open Graph Debugger检查页面是否有 Open Graph 错误](https://developers.facebook.com/tools/debug)
*   将*点赞*按钮与 Facebook SDK 一起添加到页面。

## 第三步：给页面点赞

整个过程中最直接的部分。访问您的虚拟页面，然后按*赞*按钮。

## 第 4 步：发送消息

假设您已经正确完成了前面的步骤，最后一点也应该很简单。我`curl`在我的示例中使用，但您应该能够使用任何类型的 POST 请求来获取它。

*   获取访问令牌。

    ```
    curl -F grant_type=client_credentials -F client_id=MY_APP_ID -F client_secret=MY_APP_SECRET -F redirect_uri=https://graph.facebook.com/oauth/access_token https://graph.facebook.com/oauth/access_token 
    ```

*   获取您的产品页面的 id。

    ```
    curl -g https://graph.facebook.com/\?id\=PAGE_URL 
    ```

*   向所有喜欢您的产品页面的人发布消息。

    ```
    curl -F 'access_token=ACCESS_TOKEN' -F 'message=MESSAGE' -F 'id=ID_FROM_PREVIOUS_ACTION' https://graph.facebook.com/feed 
    ```

## 第 5 步：成功！

在这一点上，希望一切顺利。作为喜欢该页面的用户，请查看他们的新闻提要。您应该会看到包含您页面上的标题、图像和描述的帖子。万岁。

......这就是我解决它的方法。希望这对其他人有价值。如果我遗漏了任何细节，我很乐意详细说明。

# css - 文本笔划跨浏览器

> ID：10741263
> 
> 赞同：5
> 
> 时间：2012-05-24T16:10:41.303
> 
> 标签：css

我正在尝试新的文本笔划功能，并在网上搜索了跨浏览器解决方案。目前我只能通过 webkit 属性找到它。

```
-webkit-text-stroke: 2px #FF1E00; 
```

您能否让我知道是否有办法让所有浏览器都以相同的方式显示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-20T04:36:31.220

```
.strokeme
{
    color: white;
    text-shadow:
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000;  
} 
```

来自：[轮廓效果到文字](https://stackoverflow.com/questions/4919076/outline-effect-to-text)

“我所做的是使用已经支持的 text-shadow 属性（我相信在 Chrome、Firefox、Opera 和 IE 9 中都支持）。”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T16:13:39.750

截至 2012 年 5 月 24^日，没有跨浏览器解决方案，因为根据[http://caniuse.com/#search=text-stroke](http://caniuse.com/#search=text-stroke)只有 webkit 支持实验功能。您可以（在某种程度上）`text-shadow`在元素上使用 4 或 5 来模拟这一点。

演示：[Text Stroke](http://css-tricks.com/examples/TextStroke/)，在 CSS-Tricks.com 上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T20:14:58.017

你可以试试[strokeText.js](https://inorganik.github.io/strokeText.js/)，一个普通的 javascript 插件。

*   笔画不会像它们那样与您的文本重叠 `-webkit-text-stroke`
*   支持除IE8及以下所有浏览器
*   可选择的文本
*   无依赖

完全公开，我制作了插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T21:36:14.337

这不能在本地跨浏览器完成，但可以通过不支持的浏览器的后备来实现：

```
color: blue;
-webkit-text-stroke-color: blue;
-webkit-text-fill-color: white;
-webkit-text-stroke-width: 3px; 
```

这样，webkit 浏览器将显示带有蓝色轮廓的白色文本，但其他浏览器仍将显示您选择的颜色（本例为蓝色）。

# javascript - 在 Javascript 中过滤数组以查找 3 个连续数字

> ID：10741265
> 
> 赞同：3
> 
> 时间：2012-05-24T16:10:52.363
> 
> 标签：javascript, arrays

给定一个未排序的正整数数组，编写一个函数，查找 3 个连续数字（升序或降序）的运行并返回这些运行开始的索引。如果没有找到这样的运行，则返回 null。

```
function findConsecutiveRuns(input:Array):Array 
```

示例： [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7] 将返回 [0, 4, 6, 7]

我的JS技能有点生疏，这是我的尝试......

```
var numArray = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var newNumArray = []; 

for(var i = 1; i < numArray.length; i++) {
    if ((numArray[i] - numArray[i-1] != 1) || (numArray[i] + numArray[i+1] !=1)  {
        return 0;
    }
    else {
    newNumArray.push(numArray[i]);
    }
}
alert(newNumArray); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T01:16:59.050

这里：

```
function f ( arr ) {
    var diff1, diff2, result = [];

    for ( var i = 0, len = arr.length; i < len - 2; i += 1 ) {
        diff1 = arr[i] - arr[i+1];
        diff2 = arr[i+1] - arr[i+2];
        if ( Math.abs( diff1 ) === 1 && diff1 === diff2 ) {
            result.push( i );
        }        
    }

    return result.length > 0 ? result : null;
} 
```

**现场演示：http:** [//jsfiddle.net/Cc4DT/1/](http://jsfiddle.net/Cc4DT/1/)

# arrays - matlab复制一个数组并传播到多个数组中

> ID：10741268
> 
> 赞同：0
> 
> 时间：2012-05-24T16:10:57.520
> 
> 标签：arrays, matlab, copy

假设我有一个 <100 x 100 double> 并且我想复制 (1:100,100) 或第 100 列上的第 1 到 100 行。然后我想创建一个新变量 x 并将其传播 n 次？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:12:51.473

不确定您所说的“传播”是什么意思，但也许这就是您所追求的？

```
x = repmat(arr(:,end), n, 1); 
```

（`arr`原始数组在哪里。）

# c# - 在 ASP.NET 代码中调用特殊属性，Twitter Bootstrap

> ID：10741274
> 
> 赞同：1
> 
> 时间：2012-05-24T16:11:19.273
> 
> 标签：c#, asp.net, twitter-bootstrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:16:49.593

我最终使用 jQuery 函数来完成在显示模态窗口之前需要完成的工作代码，并且能够简单地将其绑定到标记的 onclick 事件。

应该先走了。如果有人偶然发现这个问题并认为他们需要类似的帮助，请随时收件箱给我发消息，我会分享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:16:00.810

要访问服务器端的元素，您需要使其 runat="server"。之后，您应该能够使用 C# 中的 control.Attributes["data-toggle'] 访问属性

```
<a id="lnkDetails" runat="server" data-toggle="modal" href="#catalogItemModal">Details</a 
```

C# 代码

```
string toggleAttribute = lnkDetails..Attributes["data-toggle']; 
```

# perl - 确定为什么 -f 标记说只有 .pl 文件是文件

> ID：10741278
> 
> 赞同：1
> 
> 时间：2012-05-24T16:11:36.023
> 
> 标签：perl, file, directory

我正在编写的程序假设打开两个目录并阅读其中的文件以比较这些文件的内容。然后应该将文件中已更改的功能打印到文件中。该程序将主要检查 .cpp 文件和 .h 文件。

目前我正在尝试浏览目录并打开我所在的当前文件以打印已更改的功能。但是，我不断收到一条错误消息，指出该文件不是文件并且无法打开。

这是我正在使用的当前代码的一部分

```
use strict;
use warnings;
use diagnostics -verbose;
use File::Compare;
use Text::Diff;

my $newDir = 'C:\Users\kkahla\Documents\Perl\TestFiles2';
my $oldDir = 'C:\Users\kkahla\Documents\Perl\TestFiles';

chomp $newDir;
$newDir =~ s#/$##;
chomp $oldDir;
$oldDir =~ s#/$##;

# Checks to make sure they are directories
unless(-d $newDir or -d $oldDir) {
    print STDERR "Invalid directory path for one of the directories";
    exit(0);
}

# Makes a directory for the outputs to go to unless one already exists
mkdir "Outputs", 0777 unless -d "Outputs";

# opens output file
open (OUTPUTFILE, ">Outputs\\diffDirectoriesOutput.txt");
print OUTPUTFILE "Output statistics for comparing two directories\n\n";

# opens both directories
opendir newDir, $newDir;
my @allNewFiles = grep { $_ ne '.' and $_ ne '..'} readdir newDir;
closedir newDir;

opendir oldDir, $oldDir;
my @allOldFiles = grep { $_ ne '.' and $_ ne '..'} readdir oldDir;
closedir oldDir 
```

这是我要打开文件以阅读它们的地方：

```
elsif((File::Compare::compare("$newDir/$_", "$oldDir/$_") == 1)) {
    print OUTPUTFILE "File: $_ has been update. Please check marked functions for differences\n\n";
    diff "$newDir/$_", "$oldDir/$_", { STYLE => "Table" , OUTPUT => \*OUTPUTFILE};
    #Here is where I want to open the file but when I try it throws an error
    #Here are the two opens I have tried:
    open (FILE, "<$newDir/$_") or die "Can't open file"; #first attempt
    open (FILE, "<$_") or die "Can't open file"; #second attempt to see if it worked
} 
```

我尝试添加标志

```
my @allNewFiles = grep { $_ ne '.' and $_ ne '..' && -e $_} readdir newDir;
my @allNewFiles = grep { $_ ne '.' and $_ ne '..' && -f $_} readdir newDir; 
```

但这只会删除所有不是 .pl 文件扩展名的文件。我在一些简单的目录上进行了测试，这些目录有两个 .txt、.cpp、.h、.c、.py 和 .pl 文件扩展名的副本，它只会显示 .pl 文件是文件。

我是 perl 的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:21:34.333

`-f`正在返回`undef`并`$!`设置为“没有这样的文件或目录”，因为您传递的是文件名`-f`而不是文件的路径。

改变

```
-f $_ 
```

到

```
-f "$newDir/$_" 
```

# android - 如何在android中格式化字符串

> ID：10741279
> 
> 赞同：0
> 
> 时间：2012-05-24T16:11:36.470
> 
> 标签：android

我会创建一个值为“anInteger”的字符串，并附加来自 string.xml 的字符串。这就是我正在做的事情：

```
 StringBuilder sb = new StringBuilder();
    sb.append(anInteger);
    sb.append(" ");
    sb.append(getString(R.string.aString)); 
```

我想知道在android中是否有更清晰或更简单的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:17:43.633

您可以定义包含字符串格式标记的字符串资源，例如`"%d some text"`. 然后在代码中使用`getString(R.string.aString, anInteget)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:16:28.213

像这样声明你的资源：

```
<string name="aString">%1$s something</string> 
```

然后，您只需执行以下操作：

```
getString(R.string.aString, anInteger); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:22:53.450

用java的方式来做！:D

```
String str = Integer.toString(anInteger); 
```

我就是这样做的。
然后当然是之后：

```
str += getString(R.string.aString); 
```

# sql-server - 恢复数据库备份时出错

> ID：10741281
> 
> 赞同：24
> 
> 时间：2012-05-24T16:11:57.120
> 
> 标签：sql-server, database, exception-handling, restore, sql-server-2012

在恢复使用以前版本 (SQL Server 2008) 制作的备份时，我在使用 SQL Server 2012 时遇到错误。我实际上有同一个数据库的几个备份文件（过去在不同时间拍摄）。最新的恢复没有任何问题；但是，其中之一给出了以下错误：

> System.Data.SqlClient.SqlError: 文件“C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\MYDB_ABC.MDF”的目录查找失败，出现操作系统错误 3（系统找不到路径指定的。）。(Microsoft.SqlServer.SmoExtended)

这是一台 x64 机器，我的数据库文件位于以下位置：`c:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL`.

我不明白为什么它会尝试恢复`MSSQL.1`而不是`MSSQL11.MSSQLSERVER`.

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-24T16:16:03.040

听起来备份是在路径与您的路径不匹配的机器上进行的。尝试使用 T-SQL 而不是 UI 执行备份。还要确保您指定的路径确实存在，并且其中还没有这些 mdf/ldf 文件的副本。

```
RESTORE DATABASE MYDB_ABC FROM DISK = 'C:\path\file.bak'
WITH MOVE 'mydb' TO 'c:\valid_data_path\MYDB_ABC.mdf',
MOVE 'mydb_log' TO 'c:\valid_log_path\MYDB_ABC.ldf'; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-01-18T09:56:29.853

还原时，在“文件”下，选中“将所有文件重新定位到文件夹”

[![选中“将所有文件重定位到文件夹”](../Images/c1433bdf219bca83bff5a216a32295f5.png)](https://i.stack.imgur.com/ftciq.jpg)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-24T16:16:10.430

备份存储数据库文件的原始位置，默认情况下会尝试恢复到相同位置。由于您的新服务器安装在新目录中，并且可能旧目录不再存在，因此您需要更改默认目录以匹配您希望它使用的位置。

根据您还原数据库的方式，执行此操作的方式会有所不同。如果您使用的是 SSMS，请查看选项卡和列表，直到找到文件列表及其关联的磁盘位置 - 然后您可以在还原之前编辑这些位置。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-25T09:17:09.470

我已经设法从代码中做到了这一点。这还不够

```
Restore bkp = new Restore();
bkp.PercentCompleteNotification = 1;
bkp.Action = RestoreActionType.Database;
bkp.Database = sDatabase;
bkp.ReplaceDatabase = true; 
```

该`RelocateFiles`属性必须填写要重定位的文件的名称和路径。对于每个文件，您必须指定文件名和新的物理路径。所以我所做的是查看`PrimaryFilePath`我要恢复到的数据库，并将其用作物理位置。像这样的东西：

```
if (!string.IsNullOrEmpty(sDataFileName) && !File.Exists(sDataFileName))
{
   if (originaldb != null)
   {
      if (string.Compare(Path.GetDirectoryName(sDataFileName), originaldb.PrimaryFilePath, true) != 0)
      {
         string sPhysicalDataFileName = Path.Combine(originaldb.PrimaryFilePath, sDatabase + ".MDF");
         bkp.RelocateFiles.Add(new RelocateFile(sLogicalDataFileName, sPhysicalDataFileName));
      }                  
   }
} 
```

日志文件也一样。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-20T06:33:39.883

我遇到了同样的问题，这在没有任何 C# 代码的情况下修复了它：

```
USE [master]
ALTER DATABASE [MyDb] 
SET SINGLE_USER WITH ROLLBACK IMMEDIATE
RESTORE DATABASE [MyDb] 
FROM  DISK = N'D:\backups\mydb.bak' 
WITH  FILE = 1,  
MOVE N'MyDb' TO N''c:\valid_data_path\MyDb.mdf',  
MOVE N'MyDb_log' TO N'\valid_log_path\MyDb.ldf',  
NOUNLOAD,  
REPLACE,  
STATS = 5
ALTER DATABASE [MyDb] SET MULTI_USER
GO 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-11T12:38:01.787

正如已经说过几次的那样，在 mdf 和 ldf 文件的新旧路径不匹配的情况下恢复备份可能会导致此错误。这里已经有几个很好的例子来说明如何用 SQL 来处理这个问题，但是没有一个对我有用，直到我意识到在我的情况下我需要在 from 部分包含“.mdf”和“.ldf”扩展名'MOVE' 语句，例如：

```
RESTORE DATABASE [SomeDB] 
FROM DISK = N'D:\SomeDB.bak' 
WITH MOVE N'SomeDB.mdf' TO N'D:\SQL Server\MSSQL12.MyInstance\MSSQL\DATA\SomeDB.mdf', 
MOVE N'SomeDb_log.ldf' TO N'D:\SQL Server\MSSQL12.MyInstance\MSSQL\DATA\SomeDB_log.ldf' 
```

希望可以减轻一些痛苦，我不明白为什么 SQL 建议我`WITH MOVE`在我已经这样做时需要使用该选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-04T14:48:08.453

尝试重新启动 SQL 服务。为我工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-26T20:05:57.610

这有一些版本问题。您可以通过另外 2 种方法将数据库迁移到 2012：-

1) 使数据库脱机 > 将 .mdf 和 .ldf 文件复制到目标服务器数据文件夹并附加数据库。参考这个：- [https://dba.stackexchange.com/questions/30440/how-do-i-attach-a-database-in-sql-server](https://dba.stackexchange.com/questions/30440/how-do-i-attach-a-database-in-sql-server)

2）使用模式和数据创建整个数据库的脚本并在目标服务器上运行（非常慢的过程需要时间）。请参考：- [在 SQL Server Management Studio 中生成脚本](https://stackoverflow.com/questions/9429902/generate-script-in-sql-server-management-studio)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-18T20:57:40.353

以防万一这对直接使用 Powershell（使用[SMO](https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/sql-server-management-objects-smo-programming-guide)库）的人有用，在这种特殊情况下，还有辅助数据文件。我通过杀死所有打开的进程然后进行还原来稍微增强了脚本。

```
Import-module SQLPS
$svr = New-Object ("Microsoft.SqlServer.Management.Smo.Server") "server name";
$svr.KillAllProcesses("database_name");
$RelocateData1 = New-Object "Microsoft.SqlServer.Management.Smo.RelocateFile, Microsoft.SqlServer.SmoExtended, Version=13.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" ("primary_logical_name","C:\...\SQLDATA\DATA\database_name.mdf")
$RelocateData2 = New-Object "Microsoft.SqlServer.Management.Smo.RelocateFile, Microsoft.SqlServer.SmoExtended, Version=13.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" ("secondary_logical_name_2","C:\...\SQLDATA\DATA\secondary_file_2.mdf")
$RelocateData3 = New-Object "Microsoft.SqlServer.Management.Smo.RelocateFile, Microsoft.SqlServer.SmoExtended, Version=13.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" ("secondary_logical_name_3","C:\...\SQLDATA\DATA\secondary_file_3.mdf")
$RelocateLog = New-Object "Microsoft.SqlServer.Management.Smo.RelocateFile, Microsoft.SqlServer.SmoExtended, Version=13.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" ("database_name_log","C:\...\SQLDATA\LOGS\database_name_log.ldf")
Restore-SqlDatabase -ServerInstance "server-name" -Database "database_name" -BackupFile "\\BACKUPS\\database_name.bak" -RelocateFile @($RelocateData1, $RelocateData2, $RelocateData3, $RelocateLog) -ReplaceDatabase 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-29T00:22:51.280

请尝试取消选中“还原数据库”对话框的“选项”页面上的“尾日志备份”选项

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-24T11:24:34.230

当您使用一台 MSSQL Studio 进行备份（连接到旧服务器）和恢复（连接到新服务器）时，通常会发生这种情况。只需确保您在正确的服务器上执行还原。在 UI 的左窗格中检查服务器名称和 IP，或者

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-16T14:18:01.950

如果您使用 C# 执行此操作，并且物理路径不相同，则需要使用 RelocateFiles，正如此处还提到的一个答案。

在大多数情况下，以下代码将起作用，假设：

1.  您只是从其他地方恢复数据库的备份，否则意味着相同。例如，将生产副本复制到本地 Db。

2.  您没有使用非典型的数据库布局，例如，行文件分布在多个磁盘上的多个文件中。

此外，以下内容仅在第一次还原时是必需的。一旦一个成功的恢复发生，下面的文件映射已经在 Sql Server 中为你设置好了。但是，第一次 - 将 bak 文件恢复到空白数据库 - 你基本上必须说，“是的，在默认的本地位置使用 Db 文件，而不是吓坏了”，你需要告诉它保存东西奇怪的是，在同一个地方，告诉它重新安置他们：

```
var dbDataFile = db.FileGroups[0].Files[0];
restore.RelocateFiles.Add(new RelocateFile(dbDataFile.Name, dbDataFile.FileName));
var dbLogFile = db.LogFiles[0];
restore.RelocateFiles.Add(new RelocateFile(dbLogFile.Name, dbLogFile.FileName)); 
```

为了更好地阐明典型案例是什么以及如何进行还原，以下是将 .bak 文件典型还原到本地计算机的完整代码：

```
var smoServer = new Microsoft.SqlServer.Management.Smo.Server(
    new Microsoft.SqlServer.Management.Common.ServerConnection(sqlServerInstanceName));

var db = smoServer.Databases[dbName];
if (db == null)
{
    db = new Microsoft.SqlServer.Management.Smo.Database(smoServer, dbName);
    db.Create();
}

restore.Devices.AddDevice(backupFileName, DeviceType.File);
restore.Database = dbName;
restore.FileNumber = 0;
restore.Action = RestoreActionType.Database;
restore.ReplaceDatabase = true;

var dbDataFile = db.FileGroups[0].Files[0];
restore.RelocateFiles.Add(new RelocateFile(dbDataFile.Name, dbDataFile.FileName));
var dbLogFile = db.LogFiles[0];
restore.RelocateFiles.Add(new RelocateFile(dbLogFile.Name, dbLogFile.FileName));

restore.SqlRestore(smoServer);

db.SetOnline();
smoServer.Refresh();
db.Refresh(); 
```

无论您之前是否手动恢复了此 Db、仅使用名称但没有数据手动创建了一个，或者什么都不做，此代码都可以使用 - 从一台完全空白的机器开始，只安装了 Sql Server，没有任何数据库。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-05T17:26:29.913

您应该从脚本中删除这些行。

```
CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'StudentManagement', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA\StudentManagement.mdf' , SIZE = 10240KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'StudentManagement_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA\StudentManagement_log.ldf' , SIZE = 5696KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [StudentManagement] SET COMPATIBILITY_LEVEL = 110
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [StudentManagement].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [StudentManagement] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [StudentManagement] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [StudentManagement] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [StudentManagement] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [StudentManagement] SET ARITHABORT OFF 
GO
ALTER DATABASE [StudentManagement] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [StudentManagement] SET AUTO_CREATE_STATISTICS ON 
GO
ALTER DATABASE [StudentManagement] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [StudentManagement] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [StudentManagement] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [StudentManagement] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [StudentManagement] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [StudentManagement] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [StudentManagement] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [StudentManagement] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [StudentManagement] SET  DISABLE_BROKER 
GO
ALTER DATABASE [StudentManagement] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [StudentManagement] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [StudentManagement] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [StudentManagement] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [StudentManagement] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [StudentManagement] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [StudentManagement] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [StudentManagement] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [StudentManagement] SET  MULTI_USER 
GO
ALTER DATABASE [StudentManagement] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [StudentManagement] SET DB_CHAINING OFF 
GO
ALTER DATABASE [StudentManagement] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [StudentManagement] SET TARGET_RECOVERY_TIME = 0 SECONDS 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-10-03T06:06:06.190

请更改 .mdf 文件路径。只需在任何驱动器中创建一个文件夹，即在“D”驱动器中，只需创建一个具有自定义名称（dbase）的文件夹并将路径指向新文件夹，mssql 将自动创建文件。

“C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\MYDB_ABC.MDF”到“D:\dbase\MYDB_ABC.MDF”

# android - 从一个 android 项目引用另一个 Eclipse

> ID：10741287
> 
> 赞同：1
> 
> 时间：2012-05-24T16:12:09.153
> 
> 标签：android, eclipse, configuration, project

我已经尝试了 2 个小时，但我似乎没有让它工作。我想在另一个项目中为我的应用程序构建一个框架。首先，我只是想从另一个项目中获得一门课程。代码编译但在运行时失败，在我从框架中的类实例化对象的那一行。

```
05-24 18:04:01.645: E/dalvikvm(16927): Could not find class 'frame.test.Hello', referenced from method moduleLogin.activity.Login.loginClick
05-24 18:04:01.645: W/dalvikvm(16927): VFY: unable to resolve new-instance 190 (Lframe/test/Hello;) in LmoduleLogin/activity/Login;
05-24 18:04:02.715: W/dalvikvm(16927): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.view.View$1.onClick(View.java:2154)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.view.View.performClick(View.java:2538)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.view.View$PerformClick.run(View.java:9152)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.os.Handler.handleCallback(Handler.java:587)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.os.Looper.loop(Looper.java:130)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at java.lang.reflect.Method.invokeNative(Native Method)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at java.lang.reflect.Method.invoke(Method.java:507)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at dalvik.system.NativeStart.main(Native Method)
05-24 18:04:02.720: E/AndroidRuntime(16927): Caused by: java.lang.reflect.InvocationTargetException
05-24 18:04:02.720: E/AndroidRuntime(16927):    at java.lang.reflect.Method.invokeNative(Native Method)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at java.lang.reflect.Method.invoke(Method.java:507)
05-24 18:04:02.720: E/AndroidRuntime(16927):    at android.view.View$1.onClick(View.java:2149)
05-24 18:04:02.720: E/AndroidRuntime(16927):    ... 11 more
05-24 18:04:02.720: E/AndroidRuntime(16927): Caused by: java.lang.NoClassDefFoundError: frame.test.Hello
05-24 18:04:02.720: E/AndroidRuntime(16927):    at moduleLogin.activity.Login.loginClick(Login.java:49)
05-24 18:04:02.720: E/AndroidRuntime(16927):    ... 14 more 
```

我知道这个话题有很多，但我已经搜索了几个小时，但没有任何帖子解决这个问题。大多数主题是如何引用另一个项目。但是由于我的代码正在编译它应该被引用吗？

两个项目都需要是 Android 项目吗？框架项目应该是一个库吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:32:26.867

[如果库项目是一个 android 项目，您需要通过从项目属性](http://developer.android.com/images/developing/adt-props-isLib.png)中选择它来使其成为一个库，然后通过[同一位置](http://developer.android.com/images/developing/adt-props-libRef.png)但在使用它的项目上引用它。不要忘记使用库项目时有一些规则。有关更多信息，请参阅我的[帖子](https://stackoverflow.com/a/10626158/878126)。

如果库项目是 java ，它与使用其他 java 项目完全一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:57:52.910

这是一个很长的镜头，但它对我有用（在阅读了你所做的所有相同帖子之后，我*也花了几个小时......）*

如果您确信已正确配置项目引用，则这可能是静默构建失败的结果。

就我而言，问题是由于我的两个项目的构建环境之间的不兼容而出现的。在纯 Java 项目“A”中，以下行在项目 A 的构建环境中编译时没有错误：

```
if ((int) d.get("good")) == 0) {.... 
```

事实证明，这在（Android）项目“B”中是不合法的，它需要对象强制转换：

```
if ((Integer) d.get("good")) == 0) {.... 
```

但是，我得到错误的唯一迹象与您遇到的相同，即“VFY：无法解决...”错误。

我以一种痛苦的方式发现了错误：通过将代码从项目“A”复制到项目“B”中，找到错误，并在项目“A”中修复它们。可能有比我更聪明的方法来发现这种不兼容性，例如通过调整两个项目中的设置以完全匹配。

# c++ - 在主程序和 QProcess 之间同步输出？

> ID：10741290
> 
> 赞同：1
> 
> 时间：2012-05-24T16:12:31.157
> 
> 标签：c++, winapi, qt4, qprocess

我正在构建一个程序来执行一些用户测试，并且需要以非常小的间隔（每 10 毫秒）记录他们正在做什么的数据。大部分数据都可以从 QT 中找到，但不幸的是我需要使用单独的程序来计算鼠标移动（即使鼠标已经碰到屏幕边缘，我也需要获取移动，但 QT 只是忽略了屏幕外移动）。

因此，我构建了一个处理低级鼠标输入并输出检测到的坐标变化的 Windows 程序。然而，问题是我无法从 Windows 程序中获取数据以与主程序的输出保持一致。

在我的主程序中，我使用以下代码。

```
mouseTracker = new QProcess();
mouseTracker->start("C:\\WindowsFun.exe",QIODevice::ReadWrite|QIODevice::Unbuffered);
mouseTracker->setProcessChannelMode(QProcess::MergedChannels);
connect(mouseTracker,SIGNAL(readyRead()), this, SLOT(readMouseData()),Qt::DirectConnection); 
```

readMouseData 函数看起来像这样。

```
void HideWindow::readMouseData(){
    QByteArray data = mouseTracker->readAll();
    QString text = QString(data);
    saveFileStream << text.toStdString();
} 
```

其中一些东西可能是不必要的。我添加了“MergedChannels”模式和“DirectConnection”位以尝试解决问题。

我得到的结果是，windows 程序的输出每 100 毫秒左右以大块的形式出现，而不是在它发生时立即插入到文件流中。似乎某处有一个缓冲区需要填充，或者在处理 readyRead() 信号之前存在延迟。有人对我如何实时获取主程序和 QProcess 的输出有任何建议吗？（嗯，至少延迟小于 10 毫秒）。

此外，如果它很重要，我正在运行 Windows 7 并使用 MinGW 编译主程序，使用 Visual Studio 2008 编译检测鼠标移动的 Windows 程序。windows中的输出如下所示：

```
int xPosRelative = raw->data.mouse.lLastX;
int yPosRelative = raw->data.mouse.lLastY;
char output[100];
int n;
n = std::sprintf(output,"%d %d",xPosRelative,yPosRelative);
std::printf("%s\n",output,n);
std::fflush(0); 
```

让我知道是否需要更多信息。

谢谢，-基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:01:51.120

不幸的是，QProcess 的 Windows 实现被硬编码为每 100 毫秒检查一次来自外部进程的 stdout/stderr。通过查看 Qt 代码，您可以通过频繁调用 waitForReadyRead（使用较小的超时值）来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T00:01:28.817

我永远不会依赖 Windows 上进程的标准输入/输出。即使没有 Qt 参与，似乎对我多次打击的性能也存在一些限制。

使用本地主机上的网络连接你会做得很好。这是最通用和可移植的进程间通信方式。Qt 运行的所有东西都支持它，并且性能预计在每个平台上都是相同的。

# asp-classic - vbscript：带参数的getref

> ID：10741292
> 
> 赞同：4
> 
> 时间：2012-05-24T16:12:40.017
> 
> 标签：asp-classic, vbscript

有没有人将参数传递给用 getref 调用的函数？以下代码只是一个示例，不起作用，如何将参数传递给 mySub 子？

```
<button id="myBtn">Click me</button>

<script type="text/vbscript">
  document.getElementById("myBtn").onclick=GetRef("mySub") 

  Sub mySub(parameter)
   alert(parameter)
  End Sub
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:45:59.470

安东尼的解决方案很聪明，我接受他的回答。但是，由于我的真正问题位于 vbs 而不是客户端脚本中，为了简单起见，我仅选择它作为示例，因此它不是我的解决方案。

以下是我的做法以供参考。我使用了执行而不是 getref。例如

```
execute ("call " & routine & "(parameter)") 
```

编辑：由于 Ekkehard 的评论，我用他的技术尝试了它并且它有效，所以我将使用这个解决方案，而不是我的第一个解决方法，这是我第一次应该问的问题，但我担心它太复杂了..我给他答案。

```
sub one(para)
  WScript.Echo para & " from one"
end sub

sub two(para)
  WScript.Echo para & " from two"
end sub

sub main(subname, para)
  Dim f : Set f = GetRef(subname)
  f para
end sub

main "one", "test" '=>test from one 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:17:36.363

首先看看[这篇关于事件处理的文章](http://msdn.microsoft.com/en-us/library/ms974564.aspx)（有人知道更好的参考吗？）以获取以下内容：

> onclick 属性中提供的代码将在用户单击 span 中包含的文本时被调用。这种机制非常适合小段代码，但是当你有很多脚本时它会变得很麻烦。此事件机制适用于 VBScript 和 JScript。
> 
> 幕后发生的事情是 Internet Explorer 使用脚本代码调用脚本引擎并告诉引擎创建一个匿名函数（一个没有名称的函数）。那些了解 VBScript 的人可能想知道它是如何做到的，因为 VBScript 不支持匿名函数。VBScript 实际上创建了一个名为“anonymous”的包含脚本的子例程，并返回一个指向函数的指针，该函数随后与事件挂钩。

然后用这个 .hta 做实验：

```
<html>
 <!-- !! http://stackoverflow.com/questions/10741292/vbscript-getref-with-parameter
 -->
 <head>
  <title>GetRef HTA</title>
  <HTA:APPLICATION
    APPLICATIONNAME="GetRef HTA"
  >
  <SCRIPT Language="VBScript">
   Sub SetClickHandlers()
     Set bttB.onClick = GetRef("NoParmsBttB")
     Set bttE.onClick = GetRef("Magic")
     Set bttF.onClick = GetRef("Magic")
   End Sub
   ' trivial handler, literally set
   Sub NoParmsBttA()
     Log "NoParmsBttA() called."
   End Sub
   ' trivial handler, set via GetRef
   Sub NoParmsBttB()
     Log "NoParmsBttB() called."
   End Sub
   ' one handler for many buttons, literally set
   Sub handleClickCD(oBtt)
     Log "handleClickCD() called; you clicked " & oBtt.id
   End Sub
   ' one handler for many buttons, set via Magic() & GetRef
   Sub handleClickEF(oBtt, dtWhen)
     Log "handleClickEF() called; you clicked " & oBtt.id & " at " & CStr(dtWhen)
   End Sub
   ' stuffed via GetRef into onClick
   Sub Magic()
     handleClickEF Me, Now
   End Sub
   Sub Log(s)
     MsgBox s, 0, Now
   End Sub
  </SCRIPT>
 </head>
  <body onLoad="SetClickHandlers">
   <!-- literal onClick handler in html code -->
   <button id="bttA" onClick="NoParmsBttA">A</button>
   <!-- no literal onClick handler, will be set by SetClickHandlers via GetRef() -->
   <button id="bttB">B</button>
   <!-- literal onClick handlers with parameter (Me, i.e. the Button) -->
   <button id="bttC" onClick="handleClickCD Me">C</button>
   <button id="bttD" onClick="handleClickCD Me">D</button>
   <!-- Two params handler via SetClickHandlers & Magic -->
   <button id="bttE">E</button>
   <button id="bttF">F</button>
 </body>
</html> 
```

查看

1.  那/你如何可以指定一个没有参数的 Sub 来处理点击字面或通过 GetRef (A 和 B)
2.  您可以使用一个参数化的 Sub 来处理对许多按钮的点击，因为引擎将文字代码放入匿名 Sub（没有参数）（C/D）
3.  您不能使用 GetRef("SubWithLotsOfParms") 来设置 onClick 属性 - 它需要没有参数的 s Sub
4.  你可以让一个没有参数的命名Sub（例如Magic）完成引擎的匿名工作；这个 Sub 然后可以与 GetRef 一起使用

WRT萨尔曼A的回答：

如果您确实需要如下错误消息：

```
---------------------------
Error
---------------------------
A Runtime Error has occurred.
Do you wish to Debug?

Line: 54
Error: Wrong number of arguments or invalid property assignment: 'mySub'
---------------------------
Yes   No   
--------------------------- 
```

那么你只需要添加：

```
 Sub mySub(parameter)
     alert(parameter.toString())
   End Sub 
```

和

```
 <!-- literal onClick handler in html code -->
   <button id="bttG" onClick="mySub">G</button> 
```

测试.hta。

WRT Peter 的建议 - 保持简单是值得的：

```
Option Explicit
Sub WithLotsOfParms(a, b, c, d)
  WScript.Echo Join(Array(a, b, c, d))
End Sub
Dim f : Set f = GetRef("WithLotsOfParms")
WithLotsOfParms 1, 2, 3, 4
f               1, 2, 3, 4 
```

输出：

```
cscript 01.vbs
1 2 3 4
1 2 3 4 
```

您使用 GetRef() 设置的变量名称与使用文字 Sub/Function 名称完全一样，昨天可能已经确定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T21:21:28.083

以下是我将如何实现这一目标：

```
 Dim elem: Set elem = document.getElementById("myBtn")
        elem.setAttribute "parameter", "somevalue"
        Set elem.onclick = GetRef("elem_onclick")

        Function elem_onclick()
            MsgBox Me.getAttribute("parameter")
        End Function 
```

使用分配了 onclick 的元素来携带作为附加属性所需的任何参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:32:22.883

更进一步...

```
Dim iGetSub                             'Static'
Function GetSub(sSub)                   'GetRef wrapper that supports object methods and arguments

    iGetSub = iGetSub + 1
    ExecuteGlobal "Sub GetSub" & iGetSub & ": " & sSub & ": End Sub"
    Set GetSub = GetRef("GetSub" & iGetSub)

End Function 
```

因此：

```
.onClick = GetSub("MySub(""Hello World"")") 
```

或者：

```
.onClick = GetSub("MsgBox(""Hello World"")") 
```

甚至：

```
.onClick = GetSub("MyObject.MyMethod(""Hello World"")") 
```

唯一的限制是您不能使用**Me**引用。

# javascript - 如何通过可拖动对象滚动视口

> ID：10741296
> 
> 赞同：2
> 
> 时间：2012-05-24T16:12:44.827
> 
> 标签：javascript, jquery, draggable, viewport, smooth-scrolling

我正在使用 jQuery 的可拖动功能。视口 div 是整个窗口的大小。视口中有一个可拖动的容器 div，它比视口本身大得多，给人一种透过窗口看容器的小部分的感觉。容器包含对象 div，它们也是可拖动的。

目前，我让容器 div 正确拖动，并且对象 div 也可以在视口 div 周围正确拖动。我遇到的问题是，如果对象 div 位于视口 div 边缘的特定像素范围内，我想“推动”视口。

JQuery 的可拖动函数有一个拖动事件，我一直试图在对象上使用它。我可以让视口滚动，但它需要鼠标始终保持对象移动以保持滚动。我希望对象在像素范围内并且不能移动鼠标但仍然滚动。我目前不知所措，因为我似乎找不到任何真正符合我要求的解决方案。任何帮助将不胜感激，并以我的感激之情回报。

要查看我在做什么的示例，请访问[http://jsfiddle.net/trVZA/10/](http://jsfiddle.net/trVZA/10/)。当拖动红色框时，黑色物体会四处拖动。我已经在对象的拖动事件中注释掉了我的代码，因为它会完全冻结浏览器，但是你可以看到我的错误。当对象靠近墙壁时，我希望背景水图像滚动。

# facebook - Facebook 应用程序仪表板？

> ID：10741301
> 
> 赞同：1
> 
> 时间：2012-05-24T16:12:52.887
> 
> 标签：facebook

有人知道 Facebook 应用程序仪表板的问题吗？我已经尝试了几天来获取应用程序 ID，但我使用的每个链接都会将我发送到我的 FB 页面——我已经在浏览器中输入了 URL 并获得了相同的结果——重定向到我的页面。

# .net - 为什么 Task.Delay() 允许无限延迟？

> ID：10741305
> 
> 赞同：17
> 
> 时间：2012-05-24T16:13:05.553
> 
> 标签：.net, .net-4.0, task-parallel-library, .net-4.5, async-await

在我的应用程序冻结后，我追踪了一个线程等待由`Task.Delay()`（或`TaskEx.Delay()`在 .NET 4.0 中）创建的任务的原因，它为其提供了一个计算`TimeSpan`，由于错误，有时计算为 a`TimeSpan`小于`TotalMilliseconds`或等于`-1`和大于`-2`（即介于 -10000 到 -19999 个刻度之间的任意位置，包括端点）。

看来，当您传递一个毫秒或更低的负数时，该`TimeSpan`方法正确地`-2`抛出一个表示无穷大）。这意味着该任务上设置的任何延续将永远不会执行，并且发生在该任务上的任何不良线程将永远被阻止。`ArgumentOutOfRangeException``Task``System.Threading.Timer``dueTime``.Wait()``Task`

`Task`一个永远不会完成的东西有什么可能的用途？有人会期望这样的返回值吗？传递给 的任何负值`.Delay()`（包括该特殊范围内的值）不应该抛出一个`ArgumentOutOfRangeException`?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T17:26:05.117

[Timeout.Infinite](http://msdn.microsoft.com/en-us/library/system.threading.timeout.infinite.aspx)或 -1 在您想无限期地等待一个长时间运行的任务时很有用，该任务将花费不确定的时间来完成，但最终会完成。

Win32 API 还使用常量 INFINITE = -1 来表示无限超时。

您通常不想在 UI 线程中使用它，因为它可能会冻结 UI（这似乎是您的问题）。但是在工作线程中有一些有效的用例——例如，服务器阻塞等待来自客户端的连接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-11T09:46:55.080

当我希望控制台应用程序不终止时，我正在使用它。例如，当我为 Azure 编写*Web 作业*时，我需要一个永不终止的程序。这是模板：

```
public async Task Main(string args[])
{
    var timer = new Timer();
    timer.Interval = 6000;
    timer.Elapsed += (sender, args) =>
    {
        // Do something repeatedly, each 1 minute.
    };
    timer.Start();

    // Now what to do to stop the application from terminating!?
    // That's the magic:
    await Task.Delay(-1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T23:32:35.140

在模拟场景中，我想确保 Task.WhenAny() 块中的代码正确处理等待的任务之一，我可以模拟其他任务并使用无限延迟来确保 Task.WhenAny 正在处理我没有将任务嘲笑为无限延迟。

# matlab - MATLAB 绘图：在绘图期间分配图例标签

> ID：10741311
> 
> 赞同：10
> 
> 时间：2012-05-24T16:13:30.087
> 
> 标签：matlab, legend

我正在以典型的 MATLAB 散点图格式绘制数据。通常在绘制多个数据集时，我会使用命令'hold on;'，然后绘制每个数据，然后再绘制图例：

```
legend('DataSet1', 'DataSet2') % etcetera 
```

但是，我在相同轴上绘制的（多个）数据集不一定每次都是相同的数据集。我在同一轴上绘制了多达六组不同的数据，并且可以显示这些数据的任意组合（取决于用户选择显示的内容）。显然，如果我想以传统方式设置传说，那将是很多 elseif。

我真正想做的是*在绘制时为*每个 DataSet 分配一个名称，以便之后我可以调用所有正在显示的数据的图例。

...或者，任何人都可以想到的任何其他解决此问题的方法..？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-24T20:14:04.277

您应该能够为每个绘图设置 DisplayName 属性：

```
figure
hold on
plot(...,'DisplayName','DataSet1')
plot(...,'DisplayName','DataSet2')
legend(gca,'show') 
```

[http://www.mathworks.com/help/matlab/ref/line_props.html](http://www.mathworks.com/help/matlab/ref/line_props.html)

旁注：通过让图形看起来像我想要的方式，然后选择图形的“文件”菜单选项“生成 M 文件...”并检查生成的输出代码，我发现了很多这样的小技巧。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-24T16:31:59.320

一种选择是像这样利用该`'UserData'`属性：

```
figure;
hold on
plot([0 1], [1 0], '-b', 'userdata', 'blue line')
plot([1 0], [1 0], '--r', 'userdata', 'red dashes')

% legend(get(get(gca, 'children'), 'userdata'))                      % wrong
legend(get(gca, 'children'), get(get(gca, 'children'), 'userdata'))  % correct 
```

编辑：正如提问者指出的那样，原始版本可能会出现故障。要解决此问题，请指定哪个句柄与哪个标签一起使用（在固定版本中，它的顺序正确）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-27T01:15:04.037

用作属性，并将您的图例`'DisplayName'`称为`plot()`

```
legend('-DynamicLegend'); 
```

我的代码如下所示：

```
x = 0:h:xmax;                                  %// get an array of x-values
y = someFunction;                              %// function
plot(x, y, 'DisplayName', 'Function plot 1');  %// plot with 'DisplayName' property

legend('-DynamicLegend',2);                    %// '-DynamicLegend' legend 
```

来源：[http ://undocumentedmatlab.com/blog/legend-semi-documented-feature/](http://undocumentedmatlab.com/blog/legend-semi-documented-feature/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T16:18:18.960

您可以尝试以下方法

```
for k = 1:10

   h(k) = plot(...);
   name{k} = ['condition ' num2str(k)];

end

legend(h, name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-24T10:31:35.673

做一个for循环。但是在 for 循环之前，创建一个数组。

```
%for example 

legendset = {}

for i = 1:10 

%blabla
%Then in the fore loop say: 

legendset = [legendset;namedata(i)]

%It puts all names in a column of legendset. 
%Make sure namedata are characters. 

%foreloop ends
end

%Then after the foreloop say: 

legend(legendset). 
```

# javascript - Javascript/ActionScript 为每个 indexOf 做些什么？

> ID：10741314
> 
> 赞同：0
> 
> 时间：2012-05-24T16:13:41.650
> 
> 标签：javascript, actionscript

代码下方的屏幕截图显示了我的问题。它只对文本的一个实例进行彩虹处理。

如何获得此代码来执行每个 [rainbow] 指定 [/rainbow] 文本？

它实际上适用于 ActionScript，但它也适用于 Javascript，所以我一直在[http://jsfiddle.net上进行测试](http://jsfiddle.net)

```
var txt = "This is a [rainbow]test to show that I can[/rainbow] make whatever I want [rainbow]appear as a rainbow[/rainbow] because I am [rainbow]awesome[/rainbow].";

if ((txt.indexOf("[rainbow]") > -1) && (txt.indexOf("[/rainbow]") > -1)) {
    var firstChar = txt.indexOf("[rainbow]") + 9;
    var lastChar = txt.indexOf("[/rainbow]");

    var RAINBOWTEXT = '';
    var i = firstChar;

    while (i < lastChar) {
        RAINBOWTEXT += txt.charAt(i);
        i++
    }
    var text = RAINBOWTEXT;
    var texty = '';

    colors = new Array('ff00ff', 'ff00cc', 'ff0099', 'ff0066', 'ff0033', 'ff0000', 'ff3300', 'ff6600', 'ff9900', 'ffcc00', 'ffff00', 'ccff00', '99ff00', '66ff00', '33ff00', '00ff00', '00ff33', '00ff66', '00ff99', '00ffcc', '00ffff', '00ccff', '0099ff', '0066ff', '0033ff', '0000ff', '3300ff', '6600ff', '9900ff', 'cc00ff');
    var i = 0;

    while (i <= text.length) {
        var t = text.charAt(i);

        if (t != undefined) {
            texty += "<font color=\"#" + colors[i % colors.length] + "\">" + t + "</font>";
            i++;
        }
    }

    texty = texty.replace("> <", ">&nbsp;<");
    var REPLACEME = "[rainbow]" + RAINBOWTEXT + "[/rainbow]";
    txt = txt.replace(REPLACEME, texty);
    document.write(txt);
}​ 
```

![在此处输入图像描述](../Images/9f2e3932f68fc4bd1d04365554da86c1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:28:47.590

如果我们可以假设`[rainbow]`标签没有交错或嵌套，我只需使用带有简单替换[回调](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)的正则表达式：

```
var rainbowified = txt.replace(/\[rainbow\](.*?)\[\/rainbow\]/, function(textWithTags, textBetweenTheseTags) {
    var text = textBetweenTheseTags;
    ....
    for(var i = 0; i < text.length; ++i) {
        // rainbowify each letter of text...
    }
    ...
    return textWithFontTags;
} 
```

您可以使用它来获取具有所需转换的新字符串。

此外，`font`标签被贬低；您应该在属性中使用`span`with 。`color:#XXXXXX``style`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:47:58.190

```
var colors = [
  'f0f', 'f0c', 'f09', 'f06', 'f03', 'f00', 'f30', 'f60', 'f90', 'fc0',
  'ff0', 'cf0', '9f0', '6f0', '3f0', '0f0', '0f3', '0f6', '0f9', '0fc', 
  '0ff', '0cf', '09f', '06f', '03f', '00f', '30f', '60f', '90f', 'c0f'
];
function rainbowify(text) {
  return text.replace(/\[rainbow\](.*)\[\/rainbow\]/g, function(_, inner){
    return inner.replace(/./g, function(ch, i){
      return '<span style="color:#' + colors[i % colors.length] + ';">' + ch + '</span>';
    });
  })
} 
```

这就是我的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:17:53.167

让它成为一个循环。[`.indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)可以将起点作为第二个参数，因此在开始下一次迭代时`lastChar+10`应该可以工作。

除此之外，使用 regex 和 完全做到这一点可能更容易[`.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)：

```
return txt.replace(/\[rainbow\](.+?)\[\/rainbow\]/g, function(all, match, index, str) {
    return createRGBrainbowArray(match.length).map(function(color, i) {
        return '<span style="color:#'+color+'">'+match[i]+'</span>';
    }).join("");
});
function createRGBrainbowArray(l) {
    // should return an Array of length l with hexadecimal color strings,
    // representing a nice rainbow
} 
```

# git - 错误的 Git URL 转换（使用 SSH）

> ID：10741317
> 
> 赞同：1
> 
> 时间：2012-05-24T16:13:42.690
> 
> 标签：git, url, ssh, bamboo

我们使用带有 Git 的存储库服务器。在另一台服务器上，我们有一个 CI 软件（Atlassian Bamboo）正在运行，它应该通过 Git 从我们的存储库服务器中提取代码。我们提供的存储库服务器的 URL 结构如下：

```
myproject@www.blablabla.com:myproject.git 
```

CI-Server (Bamboo) 尝试通过将末尾的冒号更改为斜杠来将其转换为另一个 Git URL 结构：

```
myproject@www.blablabla.com/myproject.git 
```

现在链接不起作用。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:44:05.397

您可以尝试完全指定的 ssh 远程，如下所示：

```
ssh://myproject@www.blablabla.com:22/myproject.git 
```

如果您在 git 存储库服务器上使用 gitosis，这将起作用。我还没有尝试过其他 git 托管解决方案。如果`myproject.git`只是`myproject`用户主目录中的一个文件夹，您可以使用：

```
myproject@www.blablabla.com:/home/myproject/myproject.git 
```

# php - 正则表达式捕捉提及

> ID：10741318
> 
> 赞同：1
> 
> 时间：2012-05-24T16:13:45.673
> 
> 标签：php, regex

我需要匹配所有没有 RT 的提及。我试过添加！否定 rt 但不工作。

```
preg_match( '/\b!rt\s*@([a-zA-Z0-9_]{1,20})/i', $string, $data ); 
```

这必须匹配：'hello @user 你好吗'。
这不是：'RT @user 你好吗'

我不是试图提取用户名或其他东西，我需要知道文本是否有@user 而没有 RT。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:22:20.030

`!`不会在正则表达式中“否定”。匹配文字`!`. 你想要的是“消极的后视”。

```
/(?<!RT)\s@([a-z0-9]{1,20})/i 
```

`(?<!RT)`意思是“前面没有“RT”。

这将匹配用户名，“RT”不包含在匹配项中。

```
$match = preg_match('/(?<!RT)\s@([a-z0-9]{1,20})/i', $string); 
```

如果`$match`是`0`，则表示字符串为“RT @user ...”。如果`$match`is not `0`，则表示该字符串*不是*以“RT @user”开头。

演示：http: [//ideone.com/bOWbu](http://ideone.com/bOWbu)

有关正则表达式外观的更多信息：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:25:52.980

如果您只想匹配用户名，您可以尝试`/(?<!RT)(@.*?)(?=\s)/i`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:33:32.127

我相信这应该这样做：

```
$string1 = 'hello @user how are you';
preg_match('~\s?(?<!RT) @[a-z0-9]+~i', $string1, $data);
print_r($data);
// array('0' => '@user');

$string2 = 'RT @user how are you';
preg_match('~\s?(?<!RT) @[a-zA-Z0-9]+~', $string2, $data);
print_r($data);
// empty array 
```

# xamarin.ios - MonoTouch 的安全性如何？

> ID：10741319
> 
> 赞同：2
> 
> 时间：2012-05-24T16:13:46.163
> 
> 标签：xamarin.ios

由于 MonoTouch 在实际应用程序中使用 dll，这种方法的安全性如何？例如，如果有人在使用 Mono.Security.dll，难道不能用实现这些方法并对应用程序执行代码注入攻击的 dll 替换掉那个 dll 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T16:28:01.243

> 这种方法有多安全？

和我知道的任何现有的一样多:-)

> 有人不能换掉那个 dll

不，有几个原因。

*   您不能更改应用程序文件。这会破坏数字签名，iOS 不会执行它。仅此一项就消除了中间人攻击；

*   **每个**.dll 中的代码已经编译为本机代码（由 AOT 编译器）和主要可执行二进制文件的一部分。交换一个新的 .dll 不会改变执行的代码；

*   部署在设备上的 .dll 被*剥离*（用于发布版本）。它里面没有 IL（代码），因为它没有用（我们不能在 iOS 上 JIT）。即使您添加了带有 IL 代码的 .dll（例如调试版本），它也不会被执行（同样需要 JITting）；

**为什么要部署 .dll？**对于他们的元数据（例如，如果你使用反射）

**最后说明：** MonoTouch 生成原生 ARM 可执行文件，就像 Objective-C 一样。

# c++ - 当我#include "gmock/gmock.h" 时编译错误

> ID：10741322
> 
> 赞同：8
> 
> 时间：2012-05-24T16:13:48.577
> 
> 标签：c++, googlemock

我正在尝试将 googlemock 集成到我的测试中。我已经在 googletest 上成功构建并运行了测试，现在我也在尝试将 gmock 功能逐步添加到测试中，但是我遇到了一个我完全不理解的编译错误。

我没有尝试使用或定义模拟类，或使用 gmock.h 提供的任何东西。在我（以前工作的）tests.cpp 文件的顶部，我只需键入

```
#include "gmock/gmock.h" 
```

我得到编译错误：

gmock/gmock-matchers.h(2497)：错误 C2059：语法错误：'sizeof'

gmock/gmock-matchers.h(2505) : 请参阅正在编译的类模板实例化 'testing::internal::ElementsAreMatcherImpl' 的引用

gmock/gmock-matchers.h(2497)：错误 C2059：语法错误：')'

gmock/gmock-matchers.h(2497)：错误 C2143：语法错误：在 '{' 之前缺少 ')'

gmock/gmock-matchers.h(2497)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

gmock/gmock-matchers.h(2499)：警告 C4183：“消息”：缺少返回类型；假定为返回“int”的成员函数

我在 Windows 7 上使用 nmake/vc++ 编译它，我无法理解为什么我会通过将核心 gmock 包含文件添加到我的测试文件中来获得这些编译错误。有没有人见过这种东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-22T14:43:25.827

1.  您是否在测试项目的主要功能中使用 InitGoogleMock(&__argc, __argv) 初始化谷歌模拟？
2.  你应该在你的测试文件（以及你调用 InitGoogleMock 的地方）中只包含“gmock/gmock.h”——不需要包含 gtest.h。
3.  您是否已将 googletest 库更新为 googlemock。（[https://github.com/google/googletest](https://github.com/google/googletest)）

如果以上所有事情都是真的，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-17T05:25:33.207

```
Even after verifying the above steps(last step need information) still im facing the same error.

g++ MockTest.cpp -lgtest
MockTest.cpp:1:10: fatal error: gmock/gmock.h: No such file or directory
    1 | #include "gmock/gmock.h"
      |          ^~~~~~~~~~~~~~~
compilation terminated. 
```

# php - php自定义错误处理程序

> ID：10741325
> 
> 赞同：0
> 
> 时间：2012-05-24T16:13:56.403
> 
> 标签：php, ajax, error-handling, getjson

大家好，一个可能很简单的问题。

我需要一个自定义错误处理程序来报告来自 getJson 调用的通知，并且不违反任何关于 json 响应格式的规则。

所以我想在会话变量中收集所有通知，然后添加响应的 json_encode

在我的错误处理程序中，开关没有捕获任何选项

```
<?php
session_start();

function myErrorHandler($errno, $errstr, $errfile, $errline) {
if (!(error_reporting() & $errno)) {
    // This error code is not included in error_reporting
    return;
}

switch ($errno) {
case E_USER_ERROR:
    $error= "<b>My ERROR</b> [$errno] $errstr<br />\n";
    $error.= "  Fatal error on line $errline in file $errfile";
    $error.= ", PHP " . PHP_VERSION . " (" . PHP_OS . ")<br />\n";
    $error.= "Aborting...<br />\n";
     $_SESSION['Errors']['Errors'][]=$error;
//exit(1);
    break;

case E_USER_WARNING:
    $_SESSION['Errors']['Warning'][] = "<b>My WARNING</b> [$errno] $errstr<br />";
    break;

case 8: // notice
    if(isset($_REQUEST['ajax']) || isset($_REQUEST['ajaxAccess']) )         {
        $_SESSION['Errors']['Notice'][]="<b>My NOTICE</b> [$errno] $errstr $errfile $errline<br />";
        //json_encode($_SESSION);
        }

 //        else $error.= "<b>My NOTICE</b> [$errno] $errstr $errfile $errline<br />\n";
    break;

default:
 //        $error.= "Unknown error type: [$errno] $errstr<br />\n";
    break;
}

/* Don't execute PHP internal error handler */
return true;
 }

 $old_error_handler = set_error_handler("myErrorHandler"); 
```

问题 $errno 是一个数字，与以下任何选项都不匹配

我是否可能必须更改配置中的某些内容才能拥有这样的字符串并使其正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:22:38.127

您的代码将仅处理由您触发的错误 - 由调用`trigger error()`. 为了捕获常规 PHP 函数和操作引发的错误，您还需要处理这些常量，最值得注意的是`E_WARNING`和`E_NOTICE`（您无法处理`E_ERROR`）。

您也可以轻松地修改您的`switch`以匹配这些：

```
function myErrorHandler($errno, $errstr, $errfile, $errline) {

  if (!(error_reporting() & $errno)) {
    // This error code is not included in error_reporting
    return;
  }

  switch ($errno) {
    case E_USER_ERROR:
      $error= "<b>My ERROR</b> [$errno] $errstr<br />\n";
      $error.= "  Fatal error on line $errline in file $errfile";
      $error.= ", PHP " . PHP_VERSION . " (" . PHP_OS . ")<br />\n";
      $error.= "Aborting...<br />\n";
      $_SESSION['Errors']['Errors'][] = $error;
      // exit(1);
      break;
    case E_WARNING:
    case E_USER_WARNING:
      $_SESSION['Errors']['Warning'][] = "<b>My WARNING</b> [$errno] $errstr<br />";
      break;
    case E_NOTICE:
    case E_USER_NOTICE: // notice
      if(isset($_REQUEST['ajax']) || isset($_REQUEST['ajaxAccess']) )         {
        $_SESSION['Errors']['Notice'][] = "<b>My NOTICE</b> [$errno] $errstr $errfile $errline<br />";
        // json_encode($_SESSION);
      }
      // else $error.= "<b>My NOTICE</b> [$errno] $errstr $errfile $errline<br />\n";
      break;
    default:
      // $error.= "Unknown error type: [$errno] $errstr<br />\n";
      break;
  }

  /* Don't execute PHP internal error handler */
  return true;

} 
```

# sql - SQL：将另一个表中的数据插入包含外键的表中

> ID：10741327
> 
> 赞同：8
> 
> 时间：2012-05-24T16:14:10.810
> 
> 标签：sql, database, sql-server-2008, insert

在 SQL 数据库中

我有一个表用户

```
 Id   Name   Age    AddressId
----+------+------+----------- 
```

其中 AddressId 是表名称 Addresses 的外键

地址表：

```
 Id   Country   State  City   ZipCode
----+---------+------+------+--------- 
```

这是一对一的关系：每个用户有 1 个地址，每个地址有一个用户

我有一个名为 NEWUsers 的新表

```
Id   Name  
----+------ 
```

它只有 Id 和 Name。

我想做的是：

编写一个脚本，将 NEWUSers 表中的所有记录插入到用户表中。

*   我希望所有新用户的年龄默认为 20
*   对于插入的每个新用户，我需要为他创建一个新的地址记录
*   新地址记录的所有值（国家、城市、州、邮政编码）都等于“abcd”，但用于为新用户设置外键 AddressId 的 ID 除外）

我怎样才能做到这一点？

我尝试了以下方法：

```
INSERT INTO Users(Name, Age)
Values((SELECT Name FROM NewUsers),20) 
```

但我不知道如何为每个插入的用户创建一个新的地址记录并相应地指定外键。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:20:43.950

一种方法是使用两个查询，形成如下：

```
INSERT INTO Addresses (Country, State, City, ZipCode)
SELECT 'abcd', 'abcd', 'abcd', 'abcd' FROM NewUsers

INSERT INTO Users (Name, Age, AddressId)
SELECT Name, 20, ?? FROM NewUsers 
```

**编辑：**将用户链接到地址的一种简单方法是将国家临时设置为用户名。然后，您将有一个链接来确定 addressId。一旦 users 表被填充并正确链接，您可以将 country 设置回默认值`abcd`：

```
insert addresses (country, state, city, zipcode)
select name, 'abcd', 'abcd', 'abcd' from newusers;

insert users (name, age, addressid)
select u.name, 20, a.id from newusers u
join addresses a on a.country = u.name;

update a
set a.country = 'abcd'
from addresses a join newusers u on a.country = u.name; 
```

演示：[http ://www.sqlfiddle.com/#!3/1f09b/8](http://www.sqlfiddle.com/#!3/1f09b/8)

如果您想在多个插入可能同时发生时保证事务一致性，或者如果您想允许重复名称等，则有更复杂的方法可以做到这一点。但是根据您给出的示例和到目前为止的详细信息，此方法应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:33:17.007

这有点 hacky，但是在两个语句中做了你想要的 - 假设没有用户将使用名称 'abcd' 或为他们的国家输入该名称，并且在此操作之后清除 NewUsers 表：

```
INSERT dbo.Addresses(Country, State, City, ZipCode)
OUTPUT inserted.Country, 20, inserted.id
INTO dbo.Users
SELECT Name, 'abcd', 'abcd', 'abcd'
FROM dbo.NewUsers;

UPDATE a SET Country = 'abcd'
FROM dbo.Addresses AS a
INNER JOIN dbo.NewUsers AS nu
ON a.Country = nu.Name; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T18:10:33.820

您必须使用外键为插入用户和地址表编写光标

```
DECLARE @AddressID INT,
        @ID INT,
        @Name NVARCHAR(50)

DECLARE UserCursor CURSOR FOR
SELECT ID, NAME
FROM NewUsers
OPEN UserCursor

FETCH NEXT FROM UserCursor INTO @ID, @Name
WHILE @@FETCH_STATUS =0 BEGIN
    INSERT INTO Addresses(Country, State, City, ZipCode)
    VALUES ('abcd', 'abcd', 'abcd', 'abcd')

    SET @AddressID = SCOPE_IDENTITY()

    INSERT INTO Users(Name, Age, AddressID)
    VALUES (@Name, 20, @AddressID)
    FETCH NEXT FROM UserCursor INTO @ID, @Name
END
CLOSE UserCursor
DEALLOCATE UserCursor 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:21:28.133

假设您可以根据需要设置 AddressId ...

```
INSERT Addresses
(
    Id,
    Country,
    State,
    City,
    ZipCode
)
SELECT
    Id,
    'abcd',
    'abcd',
    'abcd',
    'abcd'
FROM NEWUsers

INSERT Users
(
    Id,
    Name,
    Age,
    AddressId
)
SELECT
    Id,
    Name,
    20,
    Id
FROM NEWUsers 
```

如果 AddressId 是标识列，可以先暂时禁用标识。有关信息和示例，请参阅[SET IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059%28v=sql.100%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T18:32:22.393

老实说，答案是你不想做你认为你想做的事。如您所说，如果用户只有一个地址，那么您应该只有一个包含地址字段的表（用户）。正确建模数据将使这个问题从本质上消失。

# jquery - 点击功能和 .clone() 的问题

> ID：10741328
> 
> 赞同：0
> 
> 时间：2012-05-24T16:14:11.013
> 
> 标签：jquery

我有一个奇怪的问题。我正在克隆一个隐藏元素并将其附加到由 jquery 创建的 div 中。它工作正常，但不是当我点击 div 的任何子元素（基本上是图像和一些文本。如果我点击任何子元素它会动画到克隆发生时的点，然后停止.在这些元素之外的任何地方，在.over div内，这很好。我的可点击div的html是：

```
<li class="infobox">
   <a href="#"><img class="thumb" src="img/10.jpg" alt="image10" /></a>
   <div class="over">
   <img src="img/search_icon.png" alt="read more" />
   <h6>New business</h6>
   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
   </div>
 </li> 
```

我的jQuery代码是：

```
$('#news_gallery li').click(function(event) {

    var index = newsover.index($(this)); //cycle through read more links
    var offset = $(this).offset();  //Get the thumb position to animate from
    var animFinished = false;  //Create boolean to check when ani finishes

    $('#news-articles .news-article').hide().eq(index).show(); // show the article for the corresponding link and hide the others

    var article = $('#news-articles .news-article').eq(index);

    // Create the expanded item container
    var expandedItem = $('<div>', {
        id: 'item-expanded',
        css: {
            width: DDBR.constant.ITEM_WIDTH,
            height: DDBR.constant.ITEM_HEIGHT,
            background: '#fff',
            position: 'absolute',
            zIndex: 999
            },  
        });         

    // Get the current item offset to animate from
    expandedItem.css({
        top: offset.top,
        left: offset.left,
        overflow: 'hidden',
        opacity: 0
        });

    $('body').append(expandedItem);  //Add the shaded overlay and the expanded item to the body

    //Animate the size of the expanded item
    expandedItem.animate({
        width: DDBR.constant.ITEM_EXPANDED_WIDTH,
        height: DDBR.constant.ITEM_EXPANDED_HEIGHT,
        left: $(window).scrollLeft() + $(window).width()/2,
        top: $(window).scrollTop() + $(window).height()/2,
        marginTop: -DDBR.constant.ITEM_EXPANDED_HEIGHT/2,
        marginLeft: -DDBR.constant.ITEM_EXPANDED_WIDTH/2,
        opacity: 1
        }, {
            duration: DDBR.constant.ITEM_ANIMATION_SPEED,
            easing: DDBR.constant.ITEM_ANIMATION_EASING,
            queue: false,
            complete: function() {
                animFinished = true;
                if (animFinished) {
                    expandFurther();                            
                    }
                }
            }); 

    var articleClone = article.clone();  // clone the article for the corresponding link
    var articleHeight = article.actual('outerHeight'); //Get the height of the hidden div

    //expand the box further from the center
    expandFurther = function() {
        expandedItem.animate({
            width: 875,
            height: articleHeight,
            marginTop: -articleHeight/2,
            marginLeft: -875/2
            }, {
                duration: DDBR.constant.ITEM_ANIMATION_SPEED,
                easing: DDBR.constant.ITEM_ANIMATION_EASING,
                queue: false,
                complete: function() {
                    animFinished = true;
                    if (animFinished) {
                    loadContent();
                    }
                }
            })              
        }; //END expandFurther function

    loadContent = function() {
        animFinished = false;       
        expandedItem.append(articleClone);  //Add the cloned image to the expanded item container
        }; //END loadContent function

}); //END click function 
```

对于相当广泛的代码感到抱歉。就像我说的，只要我单击父 div 中的任何其他位置，它就可以正常工作，但当我单击 div 中的子元素时就不行。

对此的任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:29:05.810

代替

```
var articleClone = article.clone(); 
```

利用

```
 var articleClone = article.clone(true); 
```

这将复制附加到元素的事件，您的问题应该得到解决。

[演示](http://jsfiddle.net/mprabhat/b6eYg/)

从文档

> **.clone( [withDataAndEvents] )**
> 
> **withDataAndEvents**一个布尔值，指示是否应将事件处理程序与元素一起复制。从 jQuery 1.4 开始，元素数据也将被复制。

# ruby-on-rails - Rails 3，通过中间页面获取对象的id

> ID：10741330
> 
> 赞同：1
> 
> 时间：2012-05-24T16:14:27.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用三种模型：用户、项目和用户特权。用户权限模型由 user_id、project_id 和 accessLevel 值组成。用户和项目模型与用户特权具有“has_many”关系，彼此之间具有“has_many, through”关系。

当用户创建项目时，会在 userprivileges 表中创建相应的条目。我不确定如何为用户与另一个用户共享项目的情况创建这样的条目。在这种情况下，用户访问项目页面，单击链接以共享对项目的访问权限，并指定目标用户的电子邮件。

我将这种情况与 UserprivilegesController 中的“新”操作相关联。在“创建”操作中，我可以访问与其共享项目的用户对象（使用电子邮件 ID），但我不确定如何获取共享项目的项目 ID。当用户访问项目页面并单击共享访问链接时，有没有办法存储项目 ID？

谢谢。

* * *

感谢 Aldo 的评论，我能够解决这个问题。但是，我有一个相关的问题：是否可以使用 routes.rb 文件来解决这个问题。我可以在 Project 路由中包含 Userprivilege 操作的路由吗？例如，例如：/projects/1/userprivileges/new 或 /projects/1/userprivileges/1/edit。然后，我可以从 URI 中获取项目 ID。但是，一个限制是必要的，这样用户权限只能从它们相关的项目中访问，所以像 /projects/2/userprivileges/1/edit 这样的东西是不允许的。我该如何实施该限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:59:52.280

你应该通过`project_id`to `UserprivilegesController#new`。使用[link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)选项在您的项目视图中执行此操作，例如：

```
# app/views/project.html.erb
<%= link_to "Share access", {controller: 'userprivileges', action: 'new', project_id: @project.id} 
```

然后，一旦进入该控制器，您就可以从参数中获取此值，`params[:project_id]`并使用隐藏字段在表单中的某个位置添加（使用`hidden_field`或`hidden_field_tag`取决于您构建表单的方式）。

这个想法是在用户提交表单时传递，`project_id`以便`UserprivilegesController#create`操作可以使用 (again `params[:project_id]`) 访问它。

# sas - 在 SAS/IML 中计算余弦相似度

> ID：10741333
> 
> 赞同：1
> 
> 时间：2012-05-24T16:14:39.140
> 
> 标签：sas

我在 SAS IML 中有一个矩阵。对于每一对行（比如向量`A`和`B`），我想计算[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)，

`A . B / ( ||A|| x ||B|| )`.

所以结果应该是一个与初始矩阵有相同行数的方阵。

如果我将一个向量传递给 Euclid 函数，我会返回一个向量，因此该函数似乎分别作用于向量的每个元素。事实上，SAS 文档[说](http://support.sas.com/documentation/cdl/en/imlug/64248/HTML/default/viewer.htm#imlug_langref_sect340.htm)：

> 如果您使用矩阵参数调用 Base SAS 函数，该函数通常会逐元素地作用于 [原文如此] 矩阵的每个元素。

这很奇怪——为什么有人要计算向量的每个元素的汇总统计？他们总是只返回元素。有没有办法获得向量的欧几里得范数？

我的代码如下。尽管有欧几里得规范，有没有更有效的方法来做到这一点？

```
proc iml;
 use fundstr;
 read all var _all_ into wgts;

 nrows=nrow(wgts);
 d=j(nrows,nrows,0);

 do i = 1 to nrows;
  do j = i to nrows;

  tmp = wgts[i,]*wgts[j,]`; /** need to divide by norms each vector **/
  d[i,j] = tmp;
  d[j,i] = tmp;

   end;
 end;
quit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:06:39.300

使用矩阵运算并将此问题视为 (A/||A||) * (B/||B||)。

第一步是将每一行除以其欧几里得范数，即 sqrt(ssq(wgts[i,]))。您可以使用“平方和”下标归约运算符 (##) 一次为所有行计算此值，而无需编写循环： sqrt(wgts[ ,##]); （有关下标归约运算符的解释和示例，请参阅[http://blogs.sas.com/content/iml/2012/05/23/compute-statistics-for-each-row-by-using-subscript-operators/](http://blogs.sas.com/content/iml/2012/05/23/compute-statistics-for-each-row-by-using-subscript-operators/) 。 )

行的成对点积等效于矩阵乘法 A*A`，其中 A 是缩放矩阵。将所有这些放在一起会导致解决方案：

```
wgts = ranuni(j(5,5));         
norm = sqrt(wgts[ ,##]); /* Euclidean norm */
A = wgts/norm; 
d = A*A`;
print d; 
```

如果您想将此与使用循环的（低效）解决方案进行比较，这里是：

```
nrows=nrow(wgts);
d=j(nrows,nrows,0);
do i = 1 to nrows;
   normi = sqrt(wgts[i,##]);
   do j = i to nrows;
      normj = sqrt(wgts[j,##]);
      tmp = wgts[i,]*wgts[j,]` / (normi * normj);
      d[i,j] = tmp;
      d[j,i] = tmp;
   end;
 end;
 print d; 
```

顺便说一句，您会很高兴听到在 SAS/IML 的下一个版本中修复了文档中的错字 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:37:50.040

为了提供参考，我认为Rick 的[这篇文章](http://blogs.sas.com/content/iml/2011/06/08/calling-base-sas-functions-from-sasiml-how-to-handle-argument-lists/)可能适合您阅读。将向量转换为逗号分隔字符串的方法非常方便。

# css - chrome和firefox上的css3旋转3d

> ID：10741338
> 
> 赞同：2
> 
> 时间：2012-05-24T16:14:53.530
> 
> 标签：css, rotation, css-transitions

（首先，对不起我的英语！）我正在开发一个使用 3D 旋转（[链接](http://www.lucagarbin.it/home.html)）的网站，在 Safari 上没有问题，但在 Chrome（19.0.1084.46）和 Firefox（12.0）上没有问题正常工作。

在 Firefox 上，如果您在“porftolio”和“profile”之间切换多次，带有 profile 的面孔就会消失。

在 chrome 上，当旋转已经播放时，面部“profilo”会出现。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:26:37.880

您可以尝试更改或删除：

```
#profilo .pad {
padding-left: 30px;} 
```

# python - CSRF 攻击是否适用于 API？

> ID：10741339
> 
> 赞同：66
> 
> 时间：2012-05-24T16:14:55.803
> 
> 标签：python, django, api, security

我正在编写一个 Django RESTful API 来支持 iOS 应用程序，并且每当我编写处理 POST 请求的方法时，我都会遇到 Django 的 CSRF 保护。

我的理解是 iOS 管理的 cookie 不被应用程序共享，这意味着我的会话 cookie 是安全的，没有其他应用程序可以使用它们。这是真的？如果是这样，我可以将我所有的 API 函数标记为 CSRF-exempt 吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-24T16:33:10.677

这不是 CSRF 保护的目的。CSRF 保护是为了防止将数据直接发布到您的站点。换句话说，客户端实际上必须通过批准的*路径*发布，即查看表单页面，填写它，提交数据。

API 几乎排除了 CSRF，因为它的全部目的通常是*允许*第 3 方实体访问和操作您站点上的数据（CSRF 中的“跨站点”）。所以，是的，我认为通常任何 API 视图都应该是 CSRF 豁免的。但是，您*仍应*遵循最佳实践并保护每个通过某种形式的身份验证（例如 OAuth）实际进行更改的 API 端点。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-01-07T04:03:50.890

CSRF 攻击依赖于将所有请求隐式发送到特定域的 cookie。如果您的 API 端点不允许基于 cookie 的身份验证，那么您应该很好。

即使您确实使用了基于 cookie 的身份验证，您的 cookie 也是安全的，因为[iOS 应用程序不共享 cookie](https://stackoverflow.com/questions/3671919/does-nshttpcookiestorage-persist-across-apps)。但是，除非您通过要求不寻常的用户代理标头故意阻止 Web 浏览器，否则另一方可能会构建使用您的 API 的基于浏览器的应用程序，如果您的 API 支持基于 cookie 的身份验证并且不支持，那么该应用程序将容易受到 CSRF 攻击'不应用 CSRF 保护。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-05-22T22:16:10.727

如果您还使用 API 来支持网站，它们确实适用。

在这种情况下，您仍然需要某种形式的 CSRF 保护，以防止有人在其他站点中嵌入请求，从而对经过身份验证的用户帐户产生偷渡效应。

Chrome 似乎默认拒绝跨域 POST 请求（其他浏览器可能没有那么严格），但允许跨域 GET 请求，因此您必须确保 API 中的任何 GET 请求都没有副作用。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-12-01T10:49:23.643

这个当前接受的答案（2012 年 5 月）大部分是正确的，除非您使用基于会话的身份验证。还值得一提的是[CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)的作用。

简单的场景是您访问`foo.com`并且网站执行 JavaScript 以向您发出基于 AJAX 的 DELETE 请求`api.com/users/123`并最终代表您删除用户。现在这并不总是可能的，因为 CORS - 浏览器将阻止`foo.com`向`api.com`除非`api.com`明确列入白名单的请求`foo.com`。

这还假设您对 API使用*基于会话的身份验证，而不是**基于令牌的身份验证*。在基于会话的身份验证中，任何登录的用户都`api.com`可以在保持登录状态时执行请求。如果您有基于令牌的身份验证（每个请求必须使用`Authorization`包含身份验证令牌的 HTTP 标头制作），那么您是安全的。基于会话的身份验证通过 cookie 隐式发送身份验证令牌。

稍微糟糕一点的情况是，如果您的一个受信任的 CORS 域遭到入侵 - 假设您有一个不清理 JavaScript 的表单，并且用户设法通过该表单将 JS 注入您的站点。如果您使用基于会话的身份验证，则访问该页面的经过身份验证的用户将看到 JavaScript 运行并发出 API 请求。如果您对 API 使用基于会话的身份验证，这可能是灾难性的并且非常有可能。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-13T06:40:20.627

根据[DRF 文档，](http://www.django-rest-framework.org/topics/ajax-csrf-cors/)只要服务器使用经过身份验证的会话（而不是每次都询问密码），API 就容易受到 CSRF 攻击

解决方案是

1.  确保“安全”HTTP 操作（例如和 `GET`）不能用于更改任何服务器端状态。`HEAD``OPTIONS`
2.  确保任何“不安全”的 HTTP 操作，例如`POST`、和`PUT`，始终需要有效的 CSRF 令牌。`PATCH``DELETE`

# python - numpy：数组中唯一值的最有效频率计数

> ID：10741346
> 
> 赞同：307
> 
> 时间：2012-05-24T16:15:18.580
> 
> 标签：python, arrays, performance, numpy

在**`numpy`**/**`scipy`**中，是否有一种**有效**的方法来获取数组中唯一值的频率计数？

这些方面的东西：

```
x = array( [1,1,1,2,2,2,5,25,1,1] )
y = freq_count( x )
print y

>> [[1, 5], [2,3], [5,1], [25,1]] 
```

（对于你，R 用户，我基本上是在寻找`table()`函数）

* * *

## 回答 #1

> 赞同：644
> 
> 时间：2014-09-19T22:54:29.887

从 Numpy 1.9 开始，最简单、最快的方法是简单地使用[`numpy.unique`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html)，它现在有一个`return_counts`关键字参数：

```
import numpy as np

x = np.array([1,1,1,2,2,2,5,25,1,1])
unique, counts = np.unique(x, return_counts=True)

print np.asarray((unique, counts)).T 
```

这使：

```
 [[ 1  5]
  [ 2  3]
  [ 5  1]
  [25  1]] 
```

快速比较`scipy.stats.itemfreq`：

```
In [4]: x = np.random.random_integers(0,100,1e6)

In [5]: %timeit unique, counts = np.unique(x, return_counts=True)
10 loops, best of 3: 31.5 ms per loop

In [6]: %timeit scipy.stats.itemfreq(x)
10 loops, best of 3: 170 ms per loop 
```

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2012-05-24T16:35:46.820

看看`np.bincount`：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html)

```
import numpy as np
x = np.array([1,1,1,2,2,2,5,25,1,1])
y = np.bincount(x)
ii = np.nonzero(y)[0] 
```

接着：

```
zip(ii,y[ii]) 
# [(1, 5), (2, 3), (5, 1), (25, 1)] 
```

或者：

```
np.vstack((ii,y[ii])).T
# array([[ 1,  5],
         [ 2,  3],
         [ 5,  1],
         [25,  1]]) 
```

或者您想结合计数和唯一值。

* * *

## 回答 #3

> 赞同：150
> 
> 时间：2013-08-13T05:41:20.767

更新：原始答案中提到的方法已弃用，我们应该改用新方法：

```
>>> import numpy as np
>>> x = [1,1,1,2,2,2,5,25,1,1]
>>> np.array(np.unique(x, return_counts=True)).T
    array([[ 1,  5],
           [ 2,  3],
           [ 5,  1],
           [25,  1]]) 
```

* * *

原答案：

你可以使用[scipy.stats.itemfreq](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.itemfreq.html)

```
>>> from scipy.stats import itemfreq
>>> x = [1,1,1,2,2,2,5,25,1,1]
>>> itemfreq(x)
/usr/local/bin/python:1: DeprecationWarning: `itemfreq` is deprecated! `itemfreq` is deprecated and will be removed in a future version. Use instead `np.unique(..., return_counts=True)`
array([[  1.,   5.],
       [  2.,   3.],
       [  5.,   1.],
       [ 25.,   1.]]) 
```

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2017-03-29T14:30:52.380

我也对此感兴趣，所以我做了一些性能比较（使用[perfplot](https://github.com/nschloe/perfplot)，我的一个宠物项目）。结果：

```
y = np.bincount(a)
ii = np.nonzero(y)[0]
out = np.vstack((ii, y[ii])).T 
```

是迄今为止最快的。（注意对数缩放。）

[![在此处输入图像描述](../Images/588313b48227dc6e8f2822a323d05173.png)](https://i.stack.imgur.com/mjDiR.png)

* * *

生成绘图的代码：

```
import numpy as np
import pandas as pd
import perfplot
from scipy.stats import itemfreq

def bincount(a):
    y = np.bincount(a)
    ii = np.nonzero(y)[0]
    return np.vstack((ii, y[ii])).T

def unique(a):
    unique, counts = np.unique(a, return_counts=True)
    return np.asarray((unique, counts)).T

def unique_count(a):
    unique, inverse = np.unique(a, return_inverse=True)
    count = np.zeros(len(unique), dtype=int)
    np.add.at(count, inverse, 1)
    return np.vstack((unique, count)).T

def pandas_value_counts(a):
    out = pd.value_counts(pd.Series(a))
    out.sort_index(inplace=True)
    out = np.stack([out.keys().values, out.values]).T
    return out

b = perfplot.bench(
    setup=lambda n: np.random.randint(0, 1000, n),
    kernels=[bincount, unique, itemfreq, unique_count, pandas_value_counts],
    n_range=[2 ** k for k in range(26)],
    xlabel="len(a)",
)
b.save("out.png")
b.show() 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2014-07-30T10:25:22.230

使用熊猫模块：

```
>>> import pandas as pd
>>> import numpy as np
>>> x = np.array([1,1,1,2,2,2,5,25,1,1])
>>> pd.value_counts(x)
1     5
2     3
25    1
5     1
dtype: int64 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2014-01-14T21:53:12.583

这是迄今为止最通用和最高效的解决方案；很惊讶它还没有发布。

```
import numpy as np

def unique_count(a):
    unique, inverse = np.unique(a, return_inverse=True)
    count = np.zeros(len(unique), np.int)
    np.add.at(count, inverse, 1)
    return np.vstack(( unique, count)).T

print unique_count(np.random.randint(-10,10,100)) 
```

与当前接受的答案不同，它适用于任何可排序的数据类型（不仅仅是正整数），并且具有最佳性能；唯一重要的费用是由 np.unique 完成的排序。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-05-24T17:22:05.143

`numpy.bincount`可能是最好的选择。如果您的数组包含除小的密集整数之外的任何内容，则将其包装如下可能会很有用：

```
def count_unique(keys):
    uniq_keys = np.unique(keys)
    bins = uniq_keys.searchsorted(keys)
    return uniq_keys, np.bincount(bins) 
```

例如：

```
>>> x = array([1,1,1,2,2,2,5,25,1,1])
>>> count_unique(x)
(array([ 1,  2,  5, 25]), array([5, 3, 1, 1])) 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-11-05T12:22:22.287

即使已经回答了，我还是建议使用不同的方法来使用`numpy.histogram`. 这样的函数给定一个序列，它返回其元素**在 bins 中分组**的频率。

**但请注意**：它在此示例中有效，因为数字是整数。如果他们是实数，那么这个解决方案就不会很好地适用。

```
>>> from numpy import histogram
>>> y = histogram (x, bins=x.max()-1)
>>> y
(array([5, 3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       1]),
 array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,
        12.,  13.,  14.,  15.,  16.,  17.,  18.,  19.,  20.,  21.,  22.,
        23.,  24.,  25.])) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-08-19T06:50:47.687

老问题，但我想根据我的基准测试提供我自己的解决方案，结果证明是最快的，使用普通**`list`**而不是作为输入（或首先转移到列表）。`np.array`

**如果您也遇到它，**请检查它。****

 **```
def count(a):
    results = {}
    for x in a:
        if x not in results:
            results[x] = 1
        else:
            results[x] += 1
    return results 
```

*例如，*

```
>>>timeit count([1,1,1,2,2,2,5,25,1,1]) would return: 
```

100000 次循环，最佳 3 次：每个循环 2.26 µs

```
>>>timeit count(np.array([1,1,1,2,2,2,5,25,1,1])) 
```

100000 次循环，最佳 3 次：每个循环 8.8 µs

```
>>>timeit count(np.array([1,1,1,2,2,2,5,25,1,1]).tolist()) 
```

100000 次循环，最佳 3 次：每个循环 5.85 µs

虽然接受的答案会更慢，但`scipy.stats.itemfreq`解决方案会更糟。

* * *

更深入的**测试并未证实**所制定的预期。

```
from zmq import Stopwatch
aZmqSTOPWATCH = Stopwatch()

aDataSETasARRAY = ( 100 * abs( np.random.randn( 150000 ) ) ).astype( np.int )
aDataSETasLIST  = aDataSETasARRAY.tolist()

import numba
@numba.jit
def numba_bincount( anObject ):
    np.bincount(    anObject )
    return

aZmqSTOPWATCH.start();np.bincount(    aDataSETasARRAY );aZmqSTOPWATCH.stop()
14328L

aZmqSTOPWATCH.start();numba_bincount( aDataSETasARRAY );aZmqSTOPWATCH.stop()
592L

aZmqSTOPWATCH.start();count(          aDataSETasLIST  );aZmqSTOPWATCH.stop()
148609L 
```

参考。下面评论缓存和其他影响小数据集大量重复测试结果的内存中副作用。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-05-18T07:56:45.687

```
import pandas as pd
import numpy as np
x = np.array( [1,1,1,2,2,2,5,25,1,1] )
print(dict(pd.Series(x).value_counts())) 
```

这给你：{1：5、2：3、5：1、25：1}

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-04-28T14:59:45.637

要计算**唯一的非整数**- 类似于 Eelco Hoogendoorn 的答案，但速度要快得多（我的机器上的因子为 5），我曾经`weave.inline`结合`numpy.unique`一些 c 代码；

```
import numpy as np
from scipy import weave

def count_unique(datain):
  """
  Similar to numpy.unique function for returning unique members of
  data, but also returns their counts
  """
  data = np.sort(datain)
  uniq = np.unique(data)
  nums = np.zeros(uniq.shape, dtype='int')

  code="""
  int i,count,j;
  j=0;
  count=0;
  for(i=1; i<Ndata[0]; i++){
      count++;
      if(data(i) > data(i-1)){
          nums(j) = count;
          count = 0;
          j++;
      }
  }
  // Handle last value
  nums(j) = count+1;
  """
  weave.inline(code,
      ['data', 'nums'],
      extra_compile_args=['-O2'],
      type_converters=weave.converters.blitz)
  return uniq, nums 
```

**个人资料信息**

```
> %timeit count_unique(data)
> 10000 loops, best of 3: 55.1 µs per loop 
```

Eelco的纯`numpy`版：

```
> %timeit unique_count(data)
> 1000 loops, best of 3: 284 µs per loop 
```

**笔记**

这里有冗余（`unique`也执行排序），这意味着可以通过将`unique`功能放在 c 代码循环中来进一步优化代码。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-31T04:48:13.743

```
import pandas as pd
import numpy as np

print(pd.Series(name_of_array).value_counts()) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-06-12T10:30:22.367

多维频率计数，即计数数组。

```
>>> print(color_array    )
  array([[255, 128, 128],
   [255, 128, 128],
   [255, 128, 128],
   ...,
   [255, 128, 128],
   [255, 128, 128],
   [255, 128, 128]], dtype=uint8)

>>> np.unique(color_array,return_counts=True,axis=0)
  (array([[ 60, 151, 161],
    [ 60, 155, 162],
    [ 60, 159, 163],
    [ 61, 143, 162],
    [ 61, 147, 162],
    [ 61, 162, 163],
    [ 62, 166, 164],
    [ 63, 137, 162],
    [ 63, 169, 164],
   array([     1,      2,      2,      1,      4,      1,      1,      2,
         3,      1,      1,      1,      2,      5,      2,      2,
       898,      1,      1, 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-03-02T16:16:27.890

```
from collections import Counter
x = array( [1,1,1,2,2,2,5,25,1,1] )
mode = counter.most_common(1)[0][0] 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-08-26T08:14:26.173

大多数简单的问题变得复杂，因为在各种 python 库中都缺少像 R 中的 order() 这样的简单功能，它可以同时给出统计结果和降序。但是，如果我们设想一下，python 中的所有这些统计排序和参数都可以在 pandas 中轻松找到，我们可以比查看 100 个不同的地方更快地得出结果。此外，R 和 pandas 的开发齐头并进，因为它们的创建目的相同。为了解决这个问题，我使用下面的代码让我在任何地方都能找到：

```
unique, counts = np.unique(x, return_counts=True)
d = {'unique':unique, 'counts':count}  # pass the list to a dictionary
df = pd.DataFrame(d) #dictionary object can be easily passed to make a dataframe
df.sort_values(by = 'count', ascending=False, inplace = True)
df = df.reset_index(drop=True) #optional only if you want to use it further 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-05-24T16:32:11.543

像这样的事情应该这样做：

```
#create 100 random numbers
arr = numpy.random.random_integers(0,50,100)

#create a dictionary of the unique values
d = dict([(i,0) for i in numpy.unique(arr)])
for number in arr:
    d[j]+=1   #increment when that value is found 
```

此外， 除非我遗漏了什么，否则之前关于[有效计算独特元素的帖子似乎与您的问题非常相似。](https://stackoverflow.com/questions/4037262/efficient-way-to-count-unique-elements-in-array-in-numpy-scipy-in-python)**

# javascript - 多边形填充不明显？

> ID：10741349
> 
> 赞同：4
> 
> 时间：2012-05-24T16:15:29.437
> 
> 标签：javascript, maps, leaflet

如果我用 points: 创建一个多边形层`[{"lat":51.509,"lng":-0.08},{"lat":51.503,"lng":-0.06},{"lat":51.51,"lng":-0.047},{"lat":"51.500","lng":"-0.039"}]`，我会得到如下渲染的东西：

![在此处输入图像描述](../Images/5e73a68dedd4cf9659ebbc4c8ae92cb7.png)

这不是我所需要的。我也在添加/删除点，并且看不到从多边形中删除相交线的方法，基本上创建了一个填充形状。有人做过吗？我还注意到谷歌地图也有同样的问题。如果真的只是带阴影的折线，那么真正的“多边形”又有什么意义？！

文档： http: [//leaflet.cloudmade.com/reference.html#polygon](http://leaflet.cloudmade.com/reference.html#polygon)

使用一个简单的多边形，我仍然得到这个，理想情况下，所有最外面的坐标都是填充的边缘。：![在此处输入图像描述](../Images/79b54d9a82841c28e415d2917a14c2fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:15:09.153

我对您显示的多边形感到非常困惑，因为它似乎与您的坐标不匹配，所以我将它们放入传单中并得到了这个。

![多边形](../Images/e1d13318a6950bc49065abc08ee1e99c.png)

这对我来说似乎是正确的行为。允许多边形中的线相交。因此，Leaflet 或 Google Maps 没有问题。这就是定义多边形的方式。换句话说，多边形不仅由一组点定义，还由点的顺序定义。

在我看来，您想要的是包含所有点的最小[简单多边形](http://en.wikipedia.org/wiki/Simple_polygon)（非相交多边形）。您可以重新排序点以获得此信息。但是我不知道有任何算法可以解决这个问题，但[这个答案](http://comp.newsgroups.archived.at/graphics.algorithms/200307/03072715810.html)似乎表明问题是 NP 难的。我不是这方面的专家，所以也许其他人可以提供帮助，或者您可以尝试在 Maths 或 GIS stackexchange 中提问。

是的，多边形只是一个填充的折线，第一个点和最后一个点连接在一起。

查看您发布的第二个多边形，听起来您想要的是[一组有限点的凸包](http://en.wikipedia.org/wiki/Convex_hull#Convex_hull_of_a_finite_point_set)。如果这是你的问题，有[很多算法](http://en.wikipedia.org/wiki/Convex_hull_algorithms)可以解决这个问题，而且它们也很快。

# grails - 发布 grails 插件时出错

> ID：10741350
> 
> 赞同：1
> 
> 时间：2012-05-24T16:15:36.157
> 
> 标签：grails, grails-plugin

我正在尝试通过运行来发布我的一个插件的新版本

```
grails publish-plugin 
```

但我收到 401 错误。这似乎是因为我使用了[错误的用户名和密码](http://grails.1312388.n4.nabble.com/401-when-deploying-to-Grails-central-repo-td4570924.html)。但是，在运行此命令时，我找不到任何方法来指定我的用户名和密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:45:31.903

您可以在以下位置定义它`~/.grails/settings.groovy`：

```
grails.project.repos.grailsCentral.username="..."
grails.project.repos.grailsCentral.password="..."
grails.release.scm.enabled=false 
```

# android - Android MDM 如何管理应用程序、电子邮件帐户和 VPN？

> ID：10741353
> 
> 赞同：3
> 
> 时间：2012-05-24T16:15:53.457
> 
> 标签：android, enterprise, policy, mdm

我正在研究 Android、iOS 和 Windows Phone 中的 MDM 选项。Apple 将其 API 提供给 MDM 应用程序使用，其中包括提供电子邮件帐户、VPN 设置和用户安装的应用程序控制。

同样的东西可用于 Android 吗？我有网站告诉我，Android MDM 可以管理应用程序分发和进行黑名单，以及分发电子邮件帐户和 vpn 设置，但我能找到的唯一配置 API 可以处理简单的策略，例如密码长度等。

请参阅 Boxtone 声明应用程序黑名单的 Android MDM 示例：http: [//boxtone.com/android-management.aspx](http://boxtone.com/android-management.aspx)

如果 API 不可用，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:26:00.190

设备设置在设置过程中物理驻留在服务器上。例如，您创建一个默认用户配置文件，其中包含某个组的特定电子邮件帐户、vpn、应用程序等。设置设备时，您将这些设置推送到设备。该设置可以被锁定（管理员具有 pin 访问权限）或保持打开状态供用户修改。例如，使用 4 位密码，我可以进入并添加另一个电子邮件帐户，禁用区域等。没有该密码，用户可以通过个人资料获得给他的信息。不过我还没用过boxtone。

苹果提供的许多 API 用于跟踪从没有应用程序发送到服务器的目的。作为一个例子，我目前正在研究一个用于空中监视的 IOS API，它允许我编写用于日志记录和发送到服务器的信息的区域。为诊断一系列问题提供应用程序使用情况的服务器信息。

在这里进一步阅读是由 android 提供的一个 android 企业 MDM。（请记住，绝大多数企业都是基于 IOS 的），除非您正在寻找 BYOD。我在特定的 android 设备上实现 MDM 时遇到了一些问题（这是许多不同设备衰落的一部分）。

[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# java - 使用 xjc 和绑定定义常见 XSD 的包名称

> ID：10741358
> 
> 赞同：8
> 
> 时间：2012-05-24T16:16:05.483
> 
> 标签：java, xml, xsd, jaxb, xjc

我正在尝试从几个特定的​​ XSD 生成 Java 类`xjc`。这些模式有一些共同的定义，因此它们导入了许多常见的 XSD。特别是，它们可以包括从零到所有常见的 XSD。

我想生成从特定 XSD 到特定包的所有类，但将通用模式的生成类保存在一个通用包中，这样它们就不会在源树中的每个特定模式中重复。

我了解到自定义绑定可用于基于每个模式指定包，例如：

```
<jxb:bindings schemaLocation="common1.xsd" node="/xsd:schema">
    <jxb:schemaBindings>
        <jxb:package name="mypackage.commonclasses"/>
    </jxb:schemaBindings>
</jxb:bindings> 
```

我有以下结构：

```
schemas
| - common
| | - common1.xsd --> XSD with common types #1
| | - ...
| | - commonN.xsd --> XSD with common types #N
| | - commonBindings.xjb --> Defines package "mypackage.commons" for common*.xsd
| - specific1
| | - specific1.xsd --> Includes ../common/common{1-N}.xsd
| | - specific1.xjb --> Defines package "mypackage.specific1" for specific1.xsd
| - specificN
| | - specificN.xsd --> Includes only ../common/common1.xsd
| | - specificN.xjb --> Defines package "mypackage.specificN" for specificN.xsd 
```

这一切都适用于：

```
xjc -b schemas/specific1
    -b schemas/common 
    schemas/specific1/specific1.xsd 
```

它生成 in 的类和`specific1.xsd`in`mypackage.specific1`的公共类`mypackage.commons`。但是当我尝试为 生成类时`specificN`，`xjc`会引发以下错误：

```
[ERROR] "file:/drive/dir/schemas/common/common1.xsd" is not a part of
 this compilation. Is this a mistake for "/drive/dir/schemas/common/commonBindings.xjb"?
  line 2 of file:/drive/dir/schemas/common/commonBindings.xjb 
```

对于未在任何特定 xsd 中导入的每个常见 XSD，我都会重复此错误。

有什么方法可以`xjc`忽略`commonBindings.xjb`我正在为其生成类的 XSD 中未使用的绑定？

或者，我是否使用这种方法瞄准了错误的方向，例如，应该在特定 xsd 中使用注释？如果可能的话，我想避免修改模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:49:30.990

我认为您需要的是使用 JAXB 插曲。看到[这个 SO 帖子](https://stackoverflow.com/questions/8013963/create-a-common-xsd-generated-class-to-be-used-by-other-packages)，看看@BlaiseDoughan 提供的答案。

在您的情况下，首先运行 xjc，使用您的自定义绑定文件来自定义包名称，针对所有常见的 XSD，生成一个插曲文件和您的常见 Java 类。

然后通过引用第一次运行的剧集文件，再次使用 xjc 和您想要的其他 XSD。

# php - 生成和下载 zip

> ID：10741361
> 
> 赞同：0
> 
> 时间：2012-05-24T16:16:13.367
> 
> 标签：php

我使用 PHP 生成并强制下载一个 ZIP 文件，其中包含从数据库表中列出的一系列照片。

```
<?php
include("config.php");
require ("zipfile.inc.php");
$zipfile = new zipfile();
$filedata = implode("", file("zipfile.inc.php"));

$getspdi = mysql_query("SELECT * FROM `wedding_photos` WHERE `user_hash` = '$_GET[id]' ORDER BY `id` DESC LIMIT 0, 1000") or die(mysql_error());
$getspd = mysql_fetch_array($getspdi);

while ($photos = mysql_fetch_array($getspdi)) {
$zipfile->add_file(file_get_contents(/var/www/vhosts/domain.com/httpdocs-entertainment$photos[img]), "&photos[img]");
echo("/var/www/vhosts/domain.com/httpdocs-entertainment/ <br />");
}

header("Content-disposition: attachment; filename=spd_$_GET[title]_$_GET[fname]_$_GET[lname]__$_GET[photos]_Photos.zip");
echo $zipfile->file();
?> 
```

然而，这段代码似乎只是把我带到了一个空白的白页，根本没有任何反应。

谁能给我任何想法？

压缩文件.inc.php

感谢您的回复，还忘了提到我对php一无所知，并且正在尝试修复其他人的代码。zipfile.inc.php的内容如下。

```
'code'
<?php  
/* 
Zip file creation class 
makes zip files on the fly... 

use the functions add_dir() and add_file() to build the zip file; 
see example code below 

v1.1 9-20-01 
  - added comments to example 

v1.0 2-5-01 

initial version with: 
  - class appearance 
  - add_file() and file() methods 
  - gzcompress() output hacking 

*/  

class zipfile   
{   

    var $datasec = array(); // array to store compressed data 
    var $ctrl_dir = array(); // central directory    
    var $eof_ctrl_dir = "\x50\x4b\x05\x06\x00\x00\x00\x00"; //end of Central directory record 
    var $old_offset = 0;  

    function add_dir($name)    

    // adds "directory" to archive - do this before putting any files in directory! 
    // $name - name of directory... like this: "path/" 
    // ...then you can add files using add_file with names like "path/file.txt" 
    {   
        $name = str_replace("\\", "/", $name);   

        $fr = "\x50\x4b\x03\x04";  
        $fr .= "\x0a\x00";    // ver needed to extract 
        $fr .= "\x00\x00";    // gen purpose bit flag 
        $fr .= "\x00\x00";    // compression method 
        $fr .= "\x00\x00\x00\x00"; // last mod time and date 

        $fr .= pack("V",0); // crc32 
        $fr .= pack("V",0); //compressed filesize 
        $fr .= pack("V",0); //uncompressed filesize 
        $fr .= pack("v", strlen($name) ); //length of pathname 
        $fr .= pack("v", 0 ); //extra field length 
        $fr .= $name;   
        // end of "local file header" segment 

        // no "file data" segment for path 

        // "data descriptor" segment (optional but necessary if archive is not served as file) 
        $fr .= pack("V",$crc); //crc32 
        $fr .= pack("V",$c_len); //compressed filesize 
        $fr .= pack("V",$unc_len); //uncompressed filesize 

        // add this entry to array 
        $this -> datasec[] = $fr;  

        $new_offset = strlen(implode("", $this->datasec));  

        // ext. file attributes mirrors MS-DOS directory attr byte, detailed 
        // at http://support.microsoft.com/support/kb/articles/Q125/0/19.asp 

        // now add to central record 
        $cdrec = "\x50\x4b\x01\x02";  
        $cdrec .="\x00\x00";    // version made by 
        $cdrec .="\x0a\x00";    // version needed to extract 
        $cdrec .="\x00\x00";    // gen purpose bit flag 
        $cdrec .="\x00\x00";    // compression method 
        $cdrec .="\x00\x00\x00\x00"; // last mod time & date 
        $cdrec .= pack("V",0); // crc32 
        $cdrec .= pack("V",0); //compressed filesize 
        $cdrec .= pack("V",0); //uncompressed filesize 
        $cdrec .= pack("v", strlen($name) ); //length of filename 
        $cdrec .= pack("v", 0 ); //extra field length    
        $cdrec .= pack("v", 0 ); //file comment length 
        $cdrec .= pack("v", 0 ); //disk number start 
        $cdrec .= pack("v", 0 ); //internal file attributes 
        $ext = "\x00\x00\x10\x00";  
        $ext = "\xff\xff\xff\xff";   
        $cdrec .= pack("V", 16 ); //external file attributes  - 'directory' bit set 

        $cdrec .= pack("V", $this -> old_offset ); //relative offset of local header 
        $this -> old_offset = $new_offset;  

        $cdrec .= $name;   
        // optional extra field, file comment goes here 
        // save to array 
        $this -> ctrl_dir[] = $cdrec;   

    }  

    function add_file($data, $name)    

    // adds "file" to archive    
    // $data - file contents 
    // $name - name of file in archive. Add path if your want 

    {   
        $name = str_replace("\\", "/", $name);   
        //$name = str_replace("\\", "\\\\", $name); 

        $fr = "\x50\x4b\x03\x04";  
        $fr .= "\x14\x00";    // ver needed to extract 
        $fr .= "\x00\x00";    // gen purpose bit flag 
        $fr .= "\x08\x00";    // compression method 
        $fr .= "\x00\x00\x00\x00"; // last mod time and date 

        $unc_len = strlen($data);   
        $crc = crc32($data);   
        $zdata = gzcompress($data);   
        $zdata = substr( substr($zdata, 0, strlen($zdata) - 4), 2); // fix crc bug 
        $c_len = strlen($zdata);   
        $fr .= pack("V",$crc); // crc32 
        $fr .= pack("V",$c_len); //compressed filesize 
        $fr .= pack("V",$unc_len); //uncompressed filesize 
        $fr .= pack("v", strlen($name) ); //length of filename 
        $fr .= pack("v", 0 ); //extra field length 
        $fr .= $name;   
        // end of "local file header" segment 

        // "file data" segment 
        $fr .= $zdata;   

        // "data descriptor" segment (optional but necessary if archive is not served as file) 
        $fr .= pack("V",$crc); //crc32 
        $fr .= pack("V",$c_len); //compressed filesize 
        $fr .= pack("V",$unc_len); //uncompressed filesize 

        // add this entry to array 
        $this -> datasec[] = $fr;  

        $new_offset = strlen(implode("", $this->datasec));  

        // now add to central directory record 
        $cdrec = "\x50\x4b\x01\x02";  
        $cdrec .="\x00\x00";    // version made by 
        $cdrec .="\x14\x00";    // version needed to extract 
        $cdrec .="\x00\x00";    // gen purpose bit flag 
        $cdrec .="\x08\x00";    // compression method 
        $cdrec .="\x00\x00\x00\x00"; // last mod time & date 
        $cdrec .= pack("V",$crc); // crc32 
        $cdrec .= pack("V",$c_len); //compressed filesize 
        $cdrec .= pack("V",$unc_len); //uncompressed filesize 
        $cdrec .= pack("v", strlen($name) ); //length of filename 
        $cdrec .= pack("v", 0 ); //extra field length    
        $cdrec .= pack("v", 0 ); //file comment length 
        $cdrec .= pack("v", 0 ); //disk number start 
        $cdrec .= pack("v", 0 ); //internal file attributes 
        $cdrec .= pack("V", 32 ); //external file attributes - 'archive' bit set 

        $cdrec .= pack("V", $this -> old_offset ); //relative offset of local header 
//        echo "old offset is ".$this->old_offset.", new offset is $new_offset<br>"; 
        $this -> old_offset = $new_offset;  

        $cdrec .= $name;   
        // optional extra field, file comment goes here 
        // save to central directory 
        $this -> ctrl_dir[] = $cdrec;   
    }  

    function file() { // dump out file    
        $data = implode("", $this -> datasec);   
        $ctrldir = implode("", $this -> ctrl_dir);   

        return    
            $data.   
            $ctrldir.   
            $this -> eof_ctrl_dir.   
            pack("v", sizeof($this -> ctrl_dir)).     // total # of entries "on this disk" 
            pack("v", sizeof($this -> ctrl_dir)).     // total # of entries overall 
            pack("V", strlen($ctrldir)).             // size of central dir 
            pack("V", strlen($data)).                 // offset to start of central dir 
            "\x00\x00";                             // .zip file comment length 
    }  
}   

?>
'code' 
```

非常感谢

谢谢加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:19:18.350

打开错误报告并告诉我们它的内容。但是，部分问题可能是您需要在回显任何内容`header` *之前使用。*

# android - 在 Eclipse 中更改项目构建目标

> ID：10741365
> 
> 赞同：0
> 
> 时间：2012-05-24T16:16:30.547
> 
> 标签：android, eclipse, sdk

我开始在 API 级别 15（4.0.3）中构建我的 android 项目，现在我想在我的手机（2.3.3）上运行它，所以我从 sdk 管理器下载了它的所有文件，但是当我右键单击项目属性时然后点击 android 只有 android 4.0.3 出现。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:06:15.830

转到 Eclipse 中的 Window->Preferences 然后转到 Android，此窗口列出了您的所有 SDK。现在打开 Android SDK 管理器并确保 SDK 路径（朝向此窗口的顶部）与 Eclipse Preference 窗口中的 SDK Location 字段匹配。

# iphone - 如何将 Core Data 设计与 3 个链接实体一起使用

> ID：10741366
> 
> 赞同：0
> 
> 时间：2012-05-24T16:16:30.787
> 
> 标签：iphone, objective-c, xcode, core-data

我在从 3 个链接实体获取核心数据信息时遇到问题。其中一些有效，而另一些则无效。

```
Model
Entity        Accounts                RegDate
relationship   heldby  >> to-many >>  inAccounts
attributes     balance                 addDate
               name

Entity        RegDate                 Regster
relationship  regheldBy >> to-many >> inRegDate
attributes    addDate                 amount 
```

当我这样做时：

```
Regster *regster = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.textLabel.text = regster.amount;
NSLog(@"Regster: %@  %@", regster.amount, regster.inRegDate.addDate); 
```

regster.amount 显示预期值，但 regster.inRegDate.addDate 为空。

当我这样做时：

```
RegDate *regdate = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.textLabel.text = regdate.addDate;
NSLog(@"RegDate: %@", regdate.addDate); 
```

regdate.addDate 显示预期值，而前面的示例我得到空值。此外，我无法显示金额。我以为我可以使用：regdate.regheldBy.amount > 但这会给出错误“在'NSSet'类型的对象上找不到属性'amount'”

不知道我做错了什么......我猜我的关系设置可能不正确。我尝试了很多不同的东西，但无法让它发挥作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:16:15.747

这可能是由于没有为所有关系设置反向关系造成的。

也因为`regdate.regheldBy`是一对多关系，它由包含`Regster`对象的集合表示。您不能调用`amount`集合，您首先必须从集合中选择一个`Regster`对象。

# html - Chrome 和 Camino 中奇怪的 div 行为，但 Safari 中没有

> ID：10741369
> 
> 赞同：0
> 
> 时间：2012-05-24T16:16:36.647
> 
> 标签：html, css, cross-browser, css-float

我做了一个网站（现在它看起来很糟糕，因为所有的颜色都很糟糕，但这些只是为了让我看看我的 div 在这个定位的体育场中的位置），它的布局非常基本，可以在[这里](http://korilu.nl/maurits/iets.html)找到。

现在我的问题是，当我在学校并在 Windows 机器上使用 chrome 访问我的网站时，它看起来很好。`div#side`旁边是，但是当`div#content`我在家中访问我现在所在的网站时，在使用 Chrome 的 Mac 机器上，div 开始移动......我第一次加载页面时看起来不错。我第二次加载页面时，它向下移动了 的高度`div#content`，但仍然在页面的右侧。并且每次页面加载都会改变，它在 2、4、6、8 等时间出现。

在 Camino 上（仍在 mac 机器上）它每次都掉到那里，它没有移动......

在 safari 上，它的行为完全符合我的要求，图片在[这里](http://korilu.nl/maurits/iets.tiff)找到。这是一张.tiff图片，希望大家能看到...

现在的问题是：如何跨浏览器获取图像中显示的页面？

PS
图像中的字体只是我玩 safari 偏好并更改默认字体的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:23:48.190

你的侧边栏是 25% 宽度，你的内容是 75%。那么你`.vr`是 1px，所以你的总宽度是 100% + 1。侧边栏（最后一个元素）不适合剩下的宽度（它太大了 1px）。

有很多方法可以解决这个问题。尝试稍微改变宽度或稍微不同地处理 vr。您可以使用此处描述的人造列方法：[http ://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

# entity-framework - JSon.Net Json 到实体

> ID：10741374
> 
> 赞同：0
> 
> 时间：2012-05-24T16:16:49.693
> 
> 标签：entity-framework, json.net

我有一个实体，我将实体设置为您在下面看到的数据库作为 edmx 文件。我还有一个从 edmunds.com 提取的 JSon 文件，我正在使用 JSon.net 并尝试将 JSon 对象解析到实体中并将 Json 的值保存到实体中。

我尝试使用的每一个选项似乎都让我大吃一惊。谁能给我一个很好的例子来说明如何做到这一点，因为这让我发疯了。

```
{
   "dealerHolder":[
      {
         "id":"31711",
         "locationId":"3730",
         "address":{
            "street":"24825 US Hwy 19 N",
            "apartment":"",
            "city":"Clearwater",
            "stateCode":"FL",
            "stateName":"Florida",
            "county":"Pinellas",
            "country":"USA",
            "zipcode":"33763",
            "latitude":27.99785,
            "longitude":-82.729321
         },
         "name":"Countryside Ford of Clearwater",
         "logicalName":"CountrysideFordofClearwater",
         "type":"ROOFTOP",
         "make":"Ford",
         "operations":{
            "Wednesday":"8:30 AM-9:00 PM",
            "Tuesday":"8:30 AM-9:00 PM",
            "Thursday":"8:30 AM-9:00 PM",
            "Saturday":"8:30 AM-8:00 PM",
            "Friday":"8:30 AM-9:00 PM",
            "Monday":"8:30 AM-9:00 PM",
            "Sunday":"11:00 AM-5:00 PM"
         },
         "contactinfo":{
            "dealer_website":"http://www.clearwaterford.com/",
            "email_address":"",
            "phone":""
         },
         "publishDate":"2012-05-21",
         "active":true,
         "syncPublishDate":"2012-05-21"
      },
      {
         "id":"31673",
         "locationId":"3708",
         "address":{
            "street":"2525 34th St N",
            "apartment":"",
            "city":"Saint Petersburg",
            "stateCode":"FL",
            "stateName":"Florida",
            "county":"Pinellas",
            "country":"USA",
            "zipcode":"33713",
            "latitude":27.794484,
            "longitude":-82.679411
         },
         "name":"Autoway Ford of St Petersburg",
         "logicalName":"AutowayFordofStPetersburg",
         "type":"ROOFTOP",
         "make":"Ford",
         "operations":{
            "Wednesday":"08:30 AM-08:00 PM",
            "Tuesday":"08:30 AM-08:00 PM",
            "Thursday":"08:30 AM-08:00 PM",
            "Saturday":"09:00 AM-06:00 PM",
            "Friday":"08:30 AM-08:00 PM",
            "Monday":"08:30 AM-08:00 PM",
            "Sunday":"12:00 PM-05:00 PM"
         },
         "contactinfo":{
            "dealer_website":"http://www.autowayford.net/",
            "email_address":"",
            "phone":""
         },
         "publishDate":"2012-05-21",
         "active":true,
         "syncPublishDate":"2012-05-21"
      },
      {
         "id":"31636",
         "locationId":"3684",
         "address":{
            "street":"5815 N Dale Mabry Hwy",
            "apartment":"",
            "city":"Tampa",
            "stateCode":"FL",
            "stateName":"Florida",
            "county":"Hillsborough",
            "country":"USA",
            "zipcode":"33614",
            "latitude":28.00016,
            "longitude":-82.505206
         },
         "name":"Bill Currie Ford",
         "logicalName":"BillCurrieFord",
         "type":"ROOFTOP",
         "make":"Ford",
         "operations":{
            "Wednesday":"8:00 AM-9:00 PM",
            "Tuesday":"8:00 AM-9:00 PM",
            "Thursday":"8:00 AM-9:00 PM",
            "Saturday":"8:00 AM-8:00 PM",
            "Friday":"8:00 AM-9:00 PM",
            "Monday":"8:00 AM-9:00 PM",
            "Sunday":"11:00 AM-6:00 PM"
         },
         "contactinfo":{
            "dealer_website":"http://billcurriedirect.dealerconnection.com/",
            "email_address":"",
            "phone_areacode":"888",
            "phone_postfix":"1156",
            "phone_prefix":"255",
            "phone":"8882551156"
         },
         "publishDate":"2012-05-21",
         "active":true,
         "syncPublishDate":"2012-05-21"
      },
      {
         "id":"31723",
         "locationId":"3739",
         "address":{
            "street":"17556 US 19 N",
            "apartment":"",
            "city":"Clearwater",
            "stateCode":"FL",
            "stateName":"Florida",
            "county":"Pinellas",
            "country":"USA",
            "zipcode":"33764",
            "latitude":27.93164,
            "longitude":-82.730647
         },
         "name":"Walker Ford",
         "logicalName":"WalkerFord",
         "type":"ROOFTOP",
         "make":"Ford",
         "operations":{
            "Wednesday":"8:30 AM-8:00 PM",
            "Tuesday":"8:30 AM-8:00 PM",
            "Thursday":"8:30 AM-8:00 PM",
            "Saturday":"8:30 AM-6:00 PM",
            "Friday":"8:30 AM-8:00 PM",
            "Monday":"8:30 AM-8:00 PM",
            "Sunday":"11:30 AM-6:00 PM"
         },
         "contactinfo":{
            "dealer_website":"http://www.walkerford.com/",
            "email_address":"",
            "phone_areacode":"727",
            "phone_postfix":"3673",
            "phone_prefix":"535",
            "phone":"7275353673"
         },
         "publishDate":"2012-05-21",
         "active":true,
         "syncPublishDate":"2012-05-21"
      }
   ]
} 
```

[http://blog.redeyeproject.com/databasediagram.png](http://blog.redeyeproject.com/databasediagram.png)

这是我得到的最新错误，无法将 JSON 对象（即 {"name":"value"}) 反序列化为类型“System.Data.Objects.DataClasses.EntityCollection`1[DealerTentSaleMVC.Models.Operation]”。反序列化的类型应该是普通的.NET 类型（即不是像整数这样的原始类型，不是像数组或列表这样的集合类型）或字典类型（即字典）。要强制 JSON 对象反序列化，请将 JsonObjectAttribute 添加到类型。路径 'operations.Wednesday'，第 22 行，第 19 位。

该代码正在发生该错误。

```
 WebClient wc = new WebClient();
        string stws = wc.DownloadString(url);

        JToken root = JObject.Parse(stws);
        JToken dealerholder = root["dealerHolder"];
        DealerHolder convertedProducts = new DealerHolder();
        string dh = dealerholder.ToString().Replace("[", "").Replace("]", "");
        JsonConvert.PopulateObject(dh, convertedProducts, new JsonSerializerSettings 
                                                            { 
                                                                NullValueHandling = NullValueHandling.Ignore

                                                            }); 
```

具体来说，它发生在最后一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:28:28.440

您可以构建一个反映您尝试反序列化的 JSON 的对象结构：

```
public class Result
{
    public DealerHolder[] DealerHolder { get; set; }
}

public class DealerHolder
{
    public string Id { get; set; }
    public string LocationId { get; set; }
    public Address Address { get; set; }
    public string Name { get; set; }
    public string LogicalName { get; set; }
    public string Type { get; set; }
    public string Make { get; set; }
    public Operations Operations { get; set; }
    public Contact Contactinfo { get; set; }
    public string PublishDate { get; set; }
    public bool Active { get; set; }
    public string SyncPublishDate { get; set; }
}

public class Address
{
    public string Street { get; set; }
    public string Apartment { get; set; }
    public string City { get; set; }
    public string StateCode { get; set; }
    public string StateName { get; set; }
    public string County { get; set; }
    public string Country { get; set; }
    public string ZipCode { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
}

public class Operations
{
    public string Wednesday { get; set; }
    public string Tuesday { get; set; }
    public string Thursday { get; set; }
    public string Saturday { get; set; }
    public string Friday { get; set; }
    public string Monday { get; set; }
    public string Sunday { get; set; }
}

public class Contact
{
    public string Dealer_website { get; set; }
    public string Email_address { get; set; }
    public string Phone { get; set; }
} 
```

进而：

```
string json = .... go and fetch the JSON
Result result = JsonConvert.DeserializeObject<Result>(json);
// do something with the result, like for example enumerating over the 
// dealer holders collection 
```

# sql-server-2008 - 删除重复行

> ID：10741380
> 
> 赞同：1
> 
> 时间：2012-05-24T16:17:16.427
> 
> 标签：sql-server-2008, duplicate-removal

我需要删除所有重复的行：

```
t1
--------------------
col1    col2    col3
1       a       b
2       a       c
3       a       b 
```

在这个例子中，1 和 3 是重复的。我需要将两者都插入到另一个表中，然后从当前表中删除它们。

```
t1
--------------------
col1    col2    col3
1       a       c

t2
--------------------
col1    col2    col3
1       a       b
2       a       b 
```

做这个的最好方式是什么？

**编辑**

我应该提供更多信息。t1 是一个包含导入行的临时表。有 4 个字段可以唯一标识一条记录，每行还有 20 多个字段。如果有重复，则需要将它们插入到不同的表中以供查看。因此，我不认为需要保留身份值，因为一旦将其插入系统，临时表中的值将不再有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:16:26.970

```
INSERT INTO T2(Col2, Col3)
SELECT Col2, Col3
FROM T1
WHERE EXISTS (  SELECT * 
                FROM T1 AS T 
                WHERE   T.Col2 = T1.Col2
                    AND T.Col3 = T1.Col3
                    AND T.Col1 <> T1.Col1
            )

DELETE FROM T1 
WHERE EXISTS (  SELECT * 
                FROM T2 
                WHERE   T2.Col2 = T1.Col2
                    AND T2.Col3 = T1.Col3
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T07:01:37.600

```
Select * into temp(temporary table) 
 from tablename 
       group by column_name1,column_name2 
         having (count(*)>=1) 
```

--- 数据被插入到临时表中，没有任何重复

```
drop tablename

select * into Tablename from temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:11:30.893

得到它的工作。

**将所有重复记录插入 t2。**

```
insert into t2
select src.col2, src.col3 from t1 src
inner join (select t1.col2, t1.col3 from t1
            group by t1.col2, t1.col3
            having count(*) > 1) duplicates 
on src.col2 = duplicates.col2 and src.col3 = duplicates.col3 
```

**从 t1 中删除重复项。**

```
delete from t1
where t1.col1 in (
    select src.col1 from t1 src
        inner join (
                    select t1.col2, t1.col3 from t1
                    group by t1.col2, t1.col3
                    having count(*) > 1) duplicates
                    on src.col2 = duplicates.col2 and src.col3 = duplicates.col3
                   )
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:20:52.763

以下代码对于删除重复记录很有用。该表必须有标识列，用于标识重复记录。示例中的表具有 ID 作为标识列，具有重复数据的列是 DuplicateColumn1、DuplicateColumn2 和 DuplicateColumn3。

```
DELETE
FROM MyTable
WHERE ID NOT IN
(
SELECT MAX(ID)
FROM MyTable
GROUP BY DuplicateColumn1, DuplicateColumn2, DuplicateColumn3) 
```

引自：http: [//blog.sqlauthority.com/2007/03/01/sql-server-delete-duplicate-records-rows/](http://blog.sqlauthority.com/2007/03/01/sql-server-delete-duplicate-records-rows/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:56:48.853

查找所有重复行的一种方法是将表连接到所有可能具有重复数据的列上，并过滤掉 col1 值相同的行，如下所示：

```
select distinct a.col1
from t1 a inner join t1 b on a.col2 = b.col2 and a.col3 = b.col3
where a.col1 <> b.col1 
```

您将使用它从 t1 插入 t2 （根据我对您问题的评论，假设您想在 t2 中保留来自 t1 的 col1 值）：

```
insert into t2 (col1, col2, col3)
select col1, col2, col3
from t1
where col1 in (
    select distinct a.col1
    from t1 a inner join t1 b on a.col2 = b.col2 and a.col3 = b.col3
    where a.col1 <> b.col1
) 
```

然后从 t1 中删除：

```
delete t1
where col1 in (
    select distinct a.col1
    from t1 a inner join t1 b on a.col2 = b.col2 and a.col3 = b.col3
    where a.col1 <> b.col1
) 
```

这可以通过使用临时表来保存 col1 值来简化，这样您就不必第二次进行自联接。使用临时表也会更安全。由于两个单独的查询每个都执行自连接，因此可以（远程）从 t1 中删除行而不将它们插入到 t2 中（即，如果在您对 t2 进行插入和从 t1 删除之间将新的重复项写入 t1，则新插入到 t1 的行将在第二个自连接中匹配）。

此外，对于删除，您可以使用 t2 而不是再次在 t1 上执行自连接（同样，如果我的假设是正确的并且您将 col1 值保留在 t2 中）。

# sqlite - SQLite 中删除触发器后的条件执行

> ID：10741381
> 
> 赞同：5
> 
> 时间：2012-05-24T16:17:18.710
> 
> 标签：sqlite

我需要为以下条件准备一个 SQLite 触发器 -

1.  有三个表 - 零售商店、批发商店和产品
2.  表retail_store 和批发商店有来自表product 的列product_id

现在我想编写一个删除触发器，这样如果一个产品从retail_store 中删除并且它不在表批发商店中，那么应该从产品表中删除该产品记录。

** 我理解作为一种做法，删除这样的产品记录可能不是一个好主意。请将此问题仅视为技术问题。

感谢您考虑这个。干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:49:13.573

也许下面的 sql 语句对你有用，但我不能保证语法是正确的。

```
 CREATE TRIGGER after_retail_store_delete after delete ON retail_store
    WHEN ((select count() from  wholesale_store where productid = OLD.id) = 0)
    BEGIN
      DELETE FROM product WHERE productid = OLD.id ;
    END ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:21:42.430

听起来你实际上不需要触发器。我会考虑使用级联删除。你在使用外键吗？看一下这个：

> 与 SQLite 数据库中的每个外键关联的 ON DELETE 和 ON UPDATE 操作是“NO ACTION”、“RESTRICT”、“SET NULL”、“SET DEFAULT”或“CASCADE”之一。如果未明确指定操作，则默认为“NO ACTION”。
> 
> NO ACTION：配置“NO ACTION”意味着：当父键被修改或从数据库中删除时，不采取特殊操作。
> 
> RESTRICT：“RESTRICT”操作意味着当存在一个或多个映射到它的子键时，禁止应用程序删除（对于 ON DELETE RESTRICT）或修改（对于 ON UPDATE RESTRICT）父键。RESTRICT 动作的效果和正常的外键约束强制执行之间的区别在于 RESTRICT 动作处理在字段更新后立即发生 - 不是在当前语句的末尾，因为它会立即约束，或者在末尾与延迟约束一样的当前事务。即使它附加到的外键约束被延迟，如果删除或修改具有依赖子键的父键，配置 RESTRICT 操作也会导致 SQLite 立即返回错误。
> 
> SET NULL：如果配置的动作是“SET NULL”，那么当父键被删除（ON DELETE SET NULL）或修改（ON UPDATE SET NULL）时，子表中所有映射的行的子键列将父键设置为包含 SQL NULL 值。
> 
> SET DEFAULT：“SET DEFAULT”操作类似于“SET NULL”，除了每​​个子键列都设置为包含列默认值而不是 NULL。有关如何将默认值分配给表列的详细信息，请参阅 CREATE TABLE 文档。
> 
> CASCADE：“CASCADE”操作将父键上的删除或更新操作传播到每个从属子键。对于“ON DELETE CASCADE”操作，这意味着与已删除父行关联的子表中的每一行也将被删除。对于“ON UPDATE CASCADE”操作，这意味着存储在每个依赖子键中的值被修改以匹配新的父键值。

在这里阅读更多： [http ://www.sqlite.org/foreignkeys.html#fk_actions](http://www.sqlite.org/foreignkeys.html#fk_actions)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-20T21:21:44.000

您好阅读文档[Sqllite Foreing Key](https://www.sqlite.org/foreignkeys.html#fk_enable)使用该 SQL 命令：

```
PRAGMA foreign_keys = ON; 
```

# c# - 如何获得控制截图？DrawToBitmap 不工作

> ID：10741384
> 
> 赞同：3
> 
> 时间：2012-05-24T16:17:24.920
> 
> 标签：c#, .net, winforms, drawtobitmap

我有一个通过 dll 调用在外部绘制的图片框。

```
private void myPictureBox_Paint(object sender, PaintEventArgs e)
{
     dllClass.RefreshEx(LWHANDLE, 0, 0);
} 
```

这一切正常，但我现在需要获取该图片框的屏幕截图，但它不起作用。

这是我尝试过的：

```
 Control ctrlToDraw = myPictureBox;

        System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(ctrlToDraw.Width, ctrlToDraw.Height);
        ctrlToDraw.DrawToBitmap(bmp, ctrlToDraw.ClientRectangle); 
```

我也尝试过通过 Windows API 来实现，但它得到的结果与上面的代码完全相同：一个空白（非空）图像。

除了截取整个屏幕的屏幕截图之外，任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:36:25.727

我不知道您对外部程序有多少控制权，或者它如何绘制到您的图片框，但如果您使用 createGraphics，它将无法正常工作。

```
private void button1_Click(object sender, EventArgs e)
    {
        //here I am calling the graphics object of the Picture Box, this will draw to the picture box
        //But the DrawToBitmap, will not reflect this change, and once the Picturebox needs to be updated, this will disappear.
        Graphics g = pictureBox1.CreateGraphics();
        g.DrawRectangle(Pens.Blue, 10, 10, 20, 20);

        System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(pictureBox1.Width, pictureBox1.Height);
        Rectangle bounds = new Rectangle(Left, Top, Width, Height);
        pictureBox1.DrawToBitmap(bmp, pictureBox1.ClientRectangle);
        //Draws whatever is in the PictureBox to the Forms BackgroundImage
        this.BackgroundImage = bmp;
        //It will not draw the Blue rectangle

    } 
```

如果您的外部程序要绘制位图，那么您可以将该位图设置为图片框背景

```
 Bitmap buffer;
    public Form1()
    {
        InitializeComponent();
        buffer = new Bitmap(pictureBox1.Width, pictureBox1.Height);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //draw to the bitmap named buffer
        using (Graphics g = Graphics.FromImage(buffer))
        {
            g.DrawRectangle(Pens.Blue, 10, 10, 20, 20);
        }
        //assign the picturebox image to buffer
        pictureBox1.Image = buffer;

        //Now this will show the blue rectangle
        System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(pictureBox1.Width, pictureBox1.Height);
        Rectangle bounds = new Rectangle(Left, Top, Width, Height);
        pictureBox1.DrawToBitmap(bmp, pictureBox1.ClientRectangle);

        this.BackgroundImage = bmp;
    } 
```

**编辑** 第三次魅力权利

这将截取屏幕截图，剪掉图片框，然后我更改了表单背景，只是为了证明它有效。

您将需要添加

```
using System.Drawing.Imaging; 
```

它适用于像素格式。

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (Graphics G = pictureBox1.CreateGraphics())
        {
            G.DrawRectangle(Pens.Blue, 10, 10, 10, 10);
        }
        Bitmap BMP = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                                        Screen.PrimaryScreen.Bounds.Height,
                                        PixelFormat.Format32bppArgb);
        using (Graphics GFX = Graphics.FromImage(BMP))
        {
            GFX.CopyFromScreen(Screen.PrimaryScreen.Bounds.X,
                                Screen.PrimaryScreen.Bounds.Y,
                                0, 0,
                                Screen.PrimaryScreen.Bounds.Size,
                                CopyPixelOperation.SourceCopy);
        }
        Bitmap YourPictureBoxImage = new Bitmap(pictureBox1.Width,pictureBox1.Height);
        using (Graphics g = Graphics.FromImage(YourPictureBoxImage))
        {
            Point np = pictureBox1.PointToScreen(new Point(0, 0));
            g.DrawImage(BMP,new Rectangle(0,0,100,100),new Rectangle(np,pictureBox1.Size),GraphicsUnit.Pixel);
        }

        this.BackgroundImage = YourPictureBoxImage;
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-24T16:22:25.393

您可以使用 ALT+PRINTSCREEN 仅截取活动窗口的屏幕截图。这会将当前活动窗口作为位图捕获到剪贴板。将其粘贴到位图编辑工具中，裁剪到您想要的区域。

或者使用允许在屏幕上裁剪目标区域的屏幕捕获实用程序，例如 Evernote 版本 2 的旧屏幕剪辑器。

# javascript - 从自身对象javascript内部调用的公共方法？

> ID：10741386
> 
> 赞同：-1
> 
> 时间：2012-05-24T16:17:25.787
> 
> 标签：javascript, jquery

有没有办法从同一个对象内配置的 jquery 按钮单击调用公共方法？下面我向您展示我尝试过的多种方式

```
var myClass = new MyClass();

function MyClass() {
   this.func1 = function () {
      alert("Hello World");
   }

   var me = this;    
   $("#my-button").click(function(){
      //func1(); //dont work (wold like)
      //this.func1(); //dont work (would like)
      me.func1();   //Work! but is not correct way to do it
      myClass.func1(); //Work! but the idea its that recognize itself widthout call public   instance
  });
} 
```

别的办法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:22:14.727

me.func1() 实际上是正确的方法，尽管我相信惯例是将其命名为“self”而不是“me”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:21:17.803

试试这个：

```
var myClass = new MyClass();

function MyClass() {
   var myFunc = function () {
      alert("Hello World");
   }
   this.func1 = myFunc;

   $("#my-button").click(function(){
      myFunc();  
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:25:50.190

由于`this`点击处理程序内部引用`my-button`,`this.func1()`将不起作用。`func1()`将不起作用，因为当最终触发单击处理程序时，它将处于不同的上下文中，并且`func1()`在该上下文中没有任何意义。你的解决方案很好。

# vba - word中前一个标题的文本

> ID：10741389
> 
> 赞同：4
> 
> 时间：2012-05-24T16:17:35.160
> 
> 标签：vba, ms-word

给定 Word 中任何选定的单词或段落，有没有办法使用 VBA 来查找最近的前一个标题的文本？

例如：

标题级别 1：主标题 这是关于文档的段落。(A) 标题级别 2：副标题 本段描述了一个细节。(B)

如果选择（B）的任何部分，我想找到“A Sub Title”。如果选择（A）的任何部分，我想找到“主标题”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-29T22:52:28.963

`WdGoToItem`上一个标题有一个特别之处：

```
Dim heading As Range
Set heading = selection.GoTo(What:=wdGoToHeading, Which:=wdGoToPrevious)

' Display heading text
heading.Expand Unit:=wdParagraph
MsgBox heading.Text 
```

这是一个鲜为人知的技巧，可以从文档中的任何位置获取整个当前标题级别：

```
Dim headingLevel as Range
' headingLevel encompasses the region under the preceding heading
Set headingLevel = Selection.GoTo(What:=wdGoToBookmark, Name:="\HeadingLevel") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:17:23.263

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Do
        Selection.MoveUp Unit:=wdLine, Count:=1

        Selection.HomeKey Unit:=wdLine
        Selection.EndKey Unit:=wdLine, Extend:=wdExtend

        If ActiveDocument.ActiveWindow.Selection.Information(wdFirstCharacterLineNumber) = 1 Then Exit Do
    Loop Until Selection.Style <> "Normal"

    MsgBox Selection.Style
End Sub 
```

**快照**

![在此处输入图像描述](../Images/c3ac0f8fc97c5fb500c23fb88aaca13f.png)

# gwt - GWT 唯一硬件标识符

> ID：10741393
> 
> 赞同：0
> 
> 时间：2012-05-24T16:17:51.767
> 
> 标签：gwt, hardware

我在客户端使用 GWT 连接到应用程序服务器，并想知道是否有任何唯一的硬件标识符可访问（通过 GWT 或 servlet），以便我可以允许某些机器访问我的内容，并拒绝其他机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:25:38.707

您将无法使用 GWT 从您的客户端获取任何硬件信息（如 MAC 地址）。

使用`getThreadLocalRequest().getRemoteAddr();`您将能够获得 IP 地址，如果您知道他们并且他们不更改它可能是一个解决方案

# c - C中的“预期令牌'）'得到了int”

> ID：10741402
> 
> 赞同：0
> 
> 时间：2012-05-24T16:19:14.093
> 
> 标签：c, qt-creator

我对下面编写的代码有一个小问题。VS 2010 编译它，运行，我得到了预测的结果。但是，当我尝试使用 Qt Creator 编译此代码时，我每次都会收到此警告：“预期的令牌 ')' 得到了 int”。是的，程序将由 Qt Creator 运行，但程序会崩溃。这段代码有什么问题：

```
#include <stdio.h>
#include <stdarg.h>
#define ARR_SIZE 2

int **getAddresses(int amount, ...)
{
    static int *arr[ARR_SIZE] = {};
    va_list vl;

    if(amount > 0)
    {
        va_start(vl, amount);
        int i;
        for(i = 0; i < amount; i++)
        {
            *(arr + sizeof(int) * i) = va_arg(vl, int*);  //This one is highlighted by the Qt Creator.
        }
        va_end(vl);
        return 0;
    }
    else
    {
        return arr;
    }
}

int main(void)
{
    int a = 3, b = 5;

    getAddresses(ARR_SIZE, &a, &b);
    printf("BEFORE: %d, %d\n", a, b);

    int **res = getAddresses(0), i;
    for(i = 0; i < ARR_SIZE; i++)
    {
        *(*(res + sizeof(int) * i)) += 5;
    }

    printf("AFTER: %d, %d\n", a, b);

    return 0;
} 
```

事先感谢您的回答。

添加：Qt Creator 突出显示这行代码 *(arr + sizeof(int) * i) = va_arg(vl, int*);

此外，Dev++ 能够在没有任何警告和错误或崩溃的情况下运行此代码。

GCC 能够在 Fedora linux 14 下编译它：

```
[Admin@localhost testerprog]$ gcc tester.c -o tester
[Admin@localhost testerprog]$ ls
tester  tester.c
[Admin@localhost testerprog]$ ./tester
BEFORE: 3, 5
AFTER: 8, 10
[Admin@localhost testerprog]$ 
```

GCC 版本是 4.5.1 20100924 (Red Hat 4.5.1-4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:24:53.090

---已编辑，因为原始帖子有点错误，但可能是同一行原因---

由于错误特别提到找到一个 int 而不是右括号，我怀疑有问题的行是

```
 *(arr + sizeof(int) * i) = va_arg(vl, int*); 
```

虽然您的代码是有效的 C / C++，但我会扭转我对 VS 编译器出错的怀疑，但提供类似的怀疑，即 Qt 编译器要么

1.  其中有一个错误，并且需要一个 R 值，而不是一个类型。
2.  已将`va_arg`引用包装在一些其他`qt_xxx`样式的包装器中，以允许在 QT 框架中正确编译。

--- 原帖如下---

int 是 C / C++ 中的关键字，因此您不能安全地将其用作变量。好像这条线

```
 *(arr + sizeof(int) * i) = va_arg(vl, int*); 
```

*要求变量int*所持有的地址的值，而不是 int 指针所引用的值。奇怪的是 VS 编译器的错误检查没有那么健壮，导致对错误的无声接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:27:34.710

```
 va_start(vl, amount);
    int i; 
```

那不是C。

定义必须出现在代码之前。

运行它的 C/C++ 模式的 VC 不会介意。纯 C 编译器会反对。

# css - 谷歌浏览器（不是 webkit）打印 css 样式表

> ID：10741404
> 
> 赞同：2
> 
> 时间：2012-05-24T16:19:18.180
> 
> 标签：css, google-chrome, printing, stylesheet

有人可以指出**chrome 用于呈现**页面打印版本的 css 样式的位置吗？我在 safari、webkit nightly、firefox（全部更新）和 chrome 上进行了测试，如果我放置一个**select 标签**，那么在它的开头和结尾是**两条垂直线，在整个页面高度上几像素厚**。

如果选择标签被调整大小，线条会随之移动，因此它必须与它有某种关联，但在我看到样式之前，我可能不会找到。

我尝试将我的打印 css 从**media=print**更改为 all 但它仍然不可见，直到我在浏览器菜单中选择打印，然后我可以在打印预览中看到它，但它已经是 pdf 的一种形式，所以我无法“检查元素”。

有任何想法吗？正如我所说，它只是 GoogleChrome，不是 webkit nightly build 也不是 Safari。

# sql-server - 如何在 SSRS 报告中绝对定位数据集中的每一行？

> ID：10741407
> 
> 赞同：1
> 
> 时间：2012-05-24T16:19:21.657
> 
> 标签：sql-server, reporting-services, localreport

我有一份 SSRS 本地报告，我需要显示地址列表。自然，它们需要被格式化以查看地址应该如何。永远不会超过 10 个，并且可能低至零。我想像 3 排 4 排或 4 排 3 排来最大化房地产。

我有一些想法，但它们似乎都应该有更好的方法：

1.  在 sql 中格式化整个文本，并在报告的大文本框中返回。
2.  创建一个具有 3 个字符串属性的对象。每三个将填充每个属性，下一个将是一个新行。这将创建四行三个字符串。我可以创建一个表，每个属性都是列。
3.  不知何故使用数据透视表（或很少将行变成列。这类似于＃2。
4.  看看矩阵是否可以做到这一点。（我不认为它可以）

有没有人有任何更好的想法，或者可能是做其中之一的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:35:34.517

我在这里找到了与我想要的类似的帖子：[SSRS - 如何构建简单的多列报告？](https://stackoverflow.com/questions/1015098/ssrs-how-to-build-a-simple-multi-column-report).

我在页面中添加了四个垂直列表，它们都指向同一个数据集。我在列表框的每个单元格中放置了一个文本框，其中的地址字段按我想要的格式设置。然后，我将 tablix/rectangle 的可见性设置为`=IIf(RowNumber("DataSet1") Mod 4 = 1, False, True)`每个列表分别具有 Mod 0 到 3。

我没有将此标记为重复，因为其他答案建议使用过滤器表达式或更改对我不起作用的报告布局属性。

我希望这对其他人有帮助。

# python - 自动完成样式前缀查找

> ID：10741413
> 
> 赞同：4
> 
> 时间：2012-05-24T16:19:35.903
> 
> 标签：python, algorithm, trie, prefix-tree

做一个具体的例子：

*   你有一个美国每个名字的列表。
*   您想在 GUI 中自动建议完成。

显而易见的事情是使用基数树来获取给定前缀的名称列表。但是，这没有考虑频率信息。因此，我想要最常见的 5 个名称，而不是仅将前 5 个结果作为第一个词汇结果：

例如对于前缀`dan`

```
 (5913, 'Daniel')
 (889, 'Danny')
 (820, 'Dana')
 (272, 'Dan')
 (60, 'Dane') 
```

有没有我错过的特里树算法？当然，理想的实现（如果存在的话）在我看来是在 python 中。

**更新：**总体上对 Paddy3113 的建议感到满意，尽管我会说当我向它提供 2.6GB 文件时它完全爆炸了，这是我正在减少的文件之一。查看详细信息，输出提供了一些见解：

```
samz;Samzetta|Samzara|Samzie
samza;Samzara
samzar;Samzara
samzara;Samzara
samze;Samzetta
samzet;Samzetta
samzett;Samzetta
samzetta;Samzetta
samzi;Samzie
samzie;Samzie

# Format - PREFIX;"|".join(CHOICES). 
```

我们在赏金方面还有几天的时间，所以我仍在寻找杀手级解决方案。因为这不仅与减少有关，还与事物的查找有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:59:34.487

是的，我们可以使用 trie。trie 节点最常见的名称是 (1) 该 trie 节点的名称或 (2) trie 节点的子节点的最常见名称。这是一些可以使用的 Python 代码。

```
from collections import defaultdict

class trie:
    __slots__ = ('children', 'freq', 'name', 'top5')

    def __init__(self):
        self.children = defaultdict(trie)
        self.freq = 0
        self.name = None
        self.top5 = []

    def __getitem__(self, suffix):
        node = self
        for letter in suffix:
            node = node.children[letter]
        return node

    def computetop5(self):
        candidates = []
        for letter, child in self.children.items():
            child.computetop5()
            candidates.extend(child.top5)
        if self.name is not None:
            candidates.append((self.freq, self.name))
        candidates.sort(reverse=True)
        self.top5 = candidates[:5]

    def insert(self, freq, name):
        node = self[name]
        node.freq += freq
        node.name = name

root = trie()
with open('letter_s.txt') as f:
    for line in f:
        freq, name = line.split(None, 1)
        root.insert(int(freq.strip()), name.strip())
root.computetop5()
print(root['St'].top5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:25:04.427

对调整没有任何想法，我首先假设我有一个名称及其频率列表，然后构造一个字典，将前缀映射到具有该前缀的一组名称，然后将每个集合转换为仅包含前 5 个名称的列表频率。

使用从[这里](http://www.ons.gov.uk/ons/publications/re-reference-tables.html?edition=tcm:77-243746)推导出来的男孩名字列表来创建一个[文本文件](https://docs.google.com/open?id=0Bw2-lCRSFikqdnlhYng4OXR6Zzg)，其中每一行都是一个整数出现频率，一些空格，然后是这样的名字：

```
8427    OLIVER 
7031    JACK 
6862    HARRY 
5478    ALFIE 
5410    CHARLIE 
5307    THOMAS 
5256    WILLIAM 
5217    JOSHUA 
4542    GEORGE 
4351    JAMES 
4330    DANIEL 
4308    JACOB 
... 
```

以下代码构造字典：

```
from collections import defaultdict

MAX_SUGGEST = 5

def gen_autosuggest(name_freq_file_name):
    with open(name_freq_file_name) as f:
        name2freq = {}
        for nf in f:
            freq, name = nf.split()
            if name not in name2freq:
                name2freq[name] = int(freq)
    pre2suggest = defaultdict(list)
    for name, freq in sorted(name2freq.items(), key=lambda x: -x[1]):
        # in decreasing order of popularity
        for i, _ in enumerate(name, 1):
            prefix = name[:i]
            pre2suggest[prefix].append((name, name2freq[name]))
    # set max suggestions
    return {pre:namefs[:MAX_SUGGEST]
            for pre, namefs in pre2suggest.items()}

if __name__ == '__main__':
    pre2suggest = gen_autosuggest('2010boysnames_popularity_engwales2.txt') 
```

如果你给字典你的前缀，那么它会返回你的建议（在这种情况下连同它们的频率，但如果需要，可以丢弃这些建议：

```
>>> len(pre2suggest)
15303
>>> pre2suggest['OL']
[('OLIVER', 8427), ('OLLIE', 1130), ('OLLY', 556), ('OLIVIER', 175), ('OLIWIER', 103)]
>>> pre2suggest['OLI']
[('OLIVER', 8427), ('OLIVIER', 175), ('OLIWIER', 103), ('OLI', 23), ('OLIVER-JAMES', 16)]
>>> 
```

看没有尝试:-)

**时间杀手**

如果运行需要很长时间，那么您可以预先计算 dict 并将其保存到文件中，然后在需要时使用 pickle 模块加载预先计算的值：

```
>>> import pickle
>>> 
>>> savename = 'pre2suggest.pcl'
>>> with open(savename, 'wb') as f:
    pickle.dump(pre2suggest, f)

>>> # restore it
>>> with open(savename, 'rb') as f:
    p2s = pickle.load(f)

>>> p2s == pre2suggest
True
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:40:20.493

这是有关如何执行此操作的想法：

构造一个字符串 trie 并将一个整数与树中的每个节点一起存储。此节点指示使用该节点的名称的数量。因此，当将该名称插入到 trie 中时，您将递增该名称的所有节点。

然后，您可以通过贪婪地选择具有最高值的名称来确定最高名称。

形式上，它与任何字符串 trie 构造算法相同，但增加了递增整数的步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:53:51.817

如果您想要快速查找，唯一真正的解决方案是预先计算任何给定前缀的答案。这在数据不变的情况下很好，但您需要一种方法来保持加载时间较短。

我建议使用 DBM 来存储预先计算的字典。这基本上是一个字典，其中的内容存储在磁盘上，并在您引用项目时进行查找。有关详细信息，请参阅[http://docs.python.org/library/anydbm.html](http://docs.python.org/library/anydbm.html)。唯一的缺点是值必须是字符串，因此您需要存储前 5 个条目的逗号分隔列表，并在查找时将其拆分。

这将比 pickle 具有更快的启动时间，因为不需要加载数据库。它也比使用 sqlite 简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:37:02.530

您基本上可以增加一个 trie 实现，以按流行顺序而不是字母顺序存储它的子节点，也就是说，您还必须将流行度存储在 trie 的每个节点中。

# parsing - 如何更正令牌，然后从 ANTLR 中的失败谓词中恢复？

> ID：10741414
> 
> 赞同：1
> 
> 时间：2012-05-24T16:19:40.310
> 
> 标签：parsing, error-handling, antlr, antlr3

我有一个 ANTLR 规则，用于创建带有谓词测试的 AST。它看起来像这样：

```
checked_rule
  : kwd=keyword name=name nl { noBadChars($name.start.getText()) }?
    -> ^(...)
  ; 
```

如果`$name`有一些坏字符，那么我想要一个错误。到目前为止，我正在这样做：

```
catch [FailedPredicateException fpe] {
  BadNameException error = new BadNameException(input, $kwd.text, $name.start.getText());
  reportError(error);
  recover(input, error);
  retval.tree = (Object)adaptor.errorNode(input, retval.start, input.LT(-1), error);
} 
```

最后一点是从 ANTLR 生成的代码中复制出来的，所以也许这不是正确的方法。

无论如何，我想做的是通过更正名称并再次尝试规则来从错误中恢复。在伪代码中，我想说：

```
catch [FailedPredicateException fpe] {
  ...
  reportError(...)
  input.LT(-2) = removedBadChars($name.start.getText());
  return checked_rule();
} 
```

所以错误仍然会传递给用户，但我们会在尽可能少的干扰下继续解析。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:55:20.900

为什么不简单地做：

```
checked_rule
  : kwd=keyword name=name nl 
    {
      if(!noBadChars($name.start.getText())) {
        // print/report error
        String withoutBadChars = removedBadChars($name.start.getText());
        $name.start.setText(withoutBadChars);
        // and continue happily ever after...
      }
    }
    -> ^(...)
  ; 
```

?

# r - 如何递归合并列表列表的相应元素

> ID：10741415
> 
> 赞同：3
> 
> 时间：2012-05-24T16:19:44.710
> 
> 标签：r

例子

```
a
[[1]]
[[1]]$`1`
    ID     Values
1   4     160.08858
2   8     83.35774
3   30    51.21873
4   38    54.92554
5   44    77.06082

[[1]]$`2`
    ID     Values
1   4     0.08858
2   8     183.35774

[[2]]
[[2]]$`1`
    ID     Values
3   30    51.21873
4   38    54.92554
5   44    77.06082

[[2]]$`2`
    ID     Values
1   4     0.08858
2   8     183.35774
3   30    51.21873
5   44    77.06082

[[3]]
[[3]]$`1`
    ID     Values
5   44    77.06082

[[3]]$`2`
    ID     Values
1   4     0.08858
3   30    51.21873 
```

我想要一个列表，其中第一个元素相同，但第一个列表的第二个元素与元素 1 的第一个列表合并，第二个与第二个合并，同样对于列表的第三个元素，第一个数据帧应该与列表的前两个元素的前两个数据帧和第二个与相应的后两个元素合并。

结果应该是

```
RESULT
[[1]]
[[1]]$`1`
    ID     Values
1   4     160.08858
2   8     83.35774
3   30    51.21873
4   38    54.92554
5   44    77.06082

[[1]]$`2`
    ID     Values
1   4     0.08858
2   8     183.35774

[[2]]
[[2]]$`1`
    ID     Values
3   30    51.21873
4   38    54.92554
5   44    77.06082
1   4     160.08858
2   8     83.35774
3   30    51.21873
4   38    54.92554
5   44    77.06082

[[2]]$`2`
    ID     Values
1   4     0.08858
2   8     183.35774
3   30    51.21873
5   44    77.06082
1   4     0.08858
2   8     183.35774

[[3]]
[[3]]$`1`
    ID     Values
5   44    77.06082
3   30    51.21873
4   38    54.92554
5   44    77.06082
1   4     160.08858
2   8     83.35774
3   30    51.21873
4   38    54.92554
5   44    77.06082

[[3]]$`2`
    ID     Values
1   4     0.08858
3   30    51.21873
1   4     0.08858
2   8     183.35774
3   30    51.21873
5   44    77.06082
1   4     0.08858
2   8     183.35774 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:48:55.660

这应该可以解决问题。（我没有粘贴到输出中，因为它非常庞大，并且很容易在您自己的控制台上重现。）

```
# Create some analogous data
df <- data.frame(ID=LETTERS[1:6], Values=5*(1:6), stringsAsFactors=FALSE)
DL <- list(list(`1`=df[1,], `2`=df[2,]),
           list(`1`=df[3,], `2`=df[4,]),
           list(`1`=df[5,], `2`=df[6,]))

# Build a function that does what you want for a pair of inputs
myrbind <- function(x, y) {
    mapply(rbind, y, x, SIMPLIFY=FALSE)
}
myrbind(DL[[1]], DL[[2]]) # Try it out

# Use Reduce to make the merges accumulate as it works through the list.
Reduce(f = myrbind, x = DL, accumulate = TRUE) 
```

# events - 在 Google 的 EventBus 中获取调用者类

> ID：10741416
> 
> 赞同：0
> 
> 时间：2012-05-24T16:19:45.427
> 
> 标签：events, guava

我有一个`FooBarEvent`在`Dummy`课堂上等待的监听方法：

```
@Subscribe
public void testingEvents(FooBarEvent event) {

} 
```

另一方面，我有一个需要该方法的类：

```
public class TestEvents{
    public TestEvents(event){
        FooBarEvent event = new FooBarEvent (...);
        event.post(event);
    }
} 
```

这是从主类调用的，其行为如下：

```
EventBus bus = new EventBus();
bus.register(new Dummy()); 
```

问题是：如何在`testingEvents`（订阅者）处获得发布事件的类？

（因此，我期望调用者是`TestEvents`类的那个方法）。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:09:46.530

在我见过的大多数代码中，事件本身都有一个`source`指示事件起源的字段。您可以只添加一个`FooBarEvent`包含源对象的字段（或者只是源的类，如果它是您所需要的）？

# function - 函数别名不好吗？

> ID：10741419
> 
> 赞同：0
> 
> 时间：2012-05-24T16:19:53.593
> 
> 标签：function, refactoring, alias

你有没有写过一个函数 Foo，在你的程序中使用它，然后最终决定重构你的代码并重写另一个比 Foo 更好的函数 Bar，并决定“哦，好吧，从现在开始我们将使用 Bar 而不是 Foo ”。但是，您决定将 Foo 声明为函数 Bar 的别名，而不是仅仅删除 Foo 并替换代码中出现的每个 Foo ？

你们中的一些人可能会说：为什么不直接重写函数 Foo 并将其名称保留为 Foo，这样就不必将每次出现的 Foo 都替换为 Bar ？好吧，由于重构，Foo 不再是一个合适的名称，因为它不能反映函数的作用，所以我决定不保留它的名称。

这是某种追溯兼容性吗？

编辑：假设

1.  Foo 是你们中的一位同事写的
2.  说同事习惯了 Foo
3.  你是故事中认为比其他人更聪明并写了酒吧的白痴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:55:36.887

```
Foo was written by one of you coworkers
said coworkers are used to Foo
you're the moron in the story who thinks is smarter than the others and wrote Bar 
```

询问您的同事并解释为什么要重命名它。除非他们真的相信原始名称更好，否则他们可能不会在意。如果该方法在面向公众的 API 中或被数百名开发人员使用，则弃用它。否则，只需使用重构工具在任何地方重命名即可。

如果你想让你的代码读起来像 DSL 并且想要两种方式来表达同样的事情（比如在 Ruby 中），你也可以给它取别名。

# sockets - 如何测量两个 802..11 节点上的网络性能特征？

> ID：10741420
> 
> 赞同：0
> 
> 时间：2012-05-24T16:19:53.747
> 
> 标签：sockets, wireless

我有一个发送器程序，它使用原始套接字不断地将数据包注入网络。同样，我有一个接收器程序，它接收发射器传输的数据包（使用原始套接字）。

我将在不同的机器上部署发射器和接收器。如何测量丢包、传播延迟和其他 QoS 参数等参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:00:14.877

以下是一些可用于您要实现的目标的工具：

[iperf](http://sourceforge.net/projects/iperf/) - 免费和开源

[Ix Chariot](http://www.ixchariot.com/products/datasheets/ixchariot.html) - IXIA 许可和专有

我建议从 iperf 开始，这应该符合您的要求。它适用于 Windows 和 Linux 平台。

# c++ - 将 auto_ptr 转换为 shared_ptr

> ID：10741422
> 
> 赞同：4
> 
> 时间：2012-05-24T16:20:13.797
> 
> 标签：c++, shared-ptr, smart-pointers, auto-ptr

如何将 std::auto_ptr 更改为 boost::shared_ptr？以下是我的限制： 1\. 我正在使用 API 类，我们将其称为 only_auto 以返回这些指针 2\. 我需要在 auto_only 中使用调用 3\. 我的语义涉及共享，因此我确实需要使用 shared_ptr) 4\. 在class only_auto operator = 是私有的以防止应对 5\. only_auto 对象也必须通过克隆调用创建 std::auto_ptr creat_only_auto();

我知道模板显式 shared_ptr(std::auto_ptr & r); 但是在这种情况下我该如何使用它呢？

一个超级简化的代码示例：

```
 #include <iostream>
    #include <memory>
    #include <boost/shared_ptr.hpp>

    using namespace std;

    class only_auto
    {
      public:
      static auto_ptr<only_auto> create_only_auto();
      void func1();
      void func2();
      //and lots more functionality

      private:
      only_auto& operator = (const only_auto& src);
    };

    class sharing_is_good : public only_auto
    {
      static boost::shared_ptr<only_auto> create_only_auto()
      {
        return boost::shared_ptr (only_auto::create_only_auto()); //not the correct call but ...
      }

    };

    int main ()
    {
       sharing_is_good x;

       x.func1();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:28:07.030

构造`shared_ptr`函数声明为：

```
template<class Other>
shared_ptr(auto_ptr<Other>& ap); 
```

请注意，它采用非常量左值引用。它这样做是为了它可以正确地释放`auto_ptr`对象的所有权。

因为它需要一个非 const 左值引用，所以您不能使用右值调用此成员函数，这是您尝试做的事情：

```
return boost::shared_ptr(only_auto::create_only_auto()); 
```

您需要将结果存储`only_auto::create_only_auto()`在一个变量中，然后将该变量传递给`shared_ptr`构造函数：

```
std::auto_ptr<only_auto> p(only_auto::create_only_auto());
return boost::shared_ptr<only_auto>(p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:25:44.407

> `3\. My semantics involves sharing so I do need to use a shared_ptr)`

auto_ptr 的大多数有效用途都与 std::unique_ptr 源兼容，因此您可能需要考虑转换为它。如果一切正常，那么你就是安全的。（如果您还没有使用 typedef，您可能希望改用 typedef，这样您以后可以轻松更改类型。）如果您遇到编译错误，您的代码中可能存在错误，您之前使用的是无效的自动指针。

我认为您应该只在使用 unique_ptr 验证事物并且发现确实需要共享所有权之后才考虑转向 std::shared_ptr（通常您可以只使用唯一所有权和非拥有指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T02:24:16.043

我认为

```
return boost::shared_ptr<only_auto>(only_auto::create_only_auto().release()); 
```

应该做的伎俩

# mysql - 连接三个表的Mysql查询

> ID：10741424
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:15.847
> 
> 标签：mysql

我有三张桌子。

***请求***- request_id、request_message、requester_id

*   ***请求者***
*   requesters_id, requesters_name
*   **回应**
*   response_id、request_id、response_message

我想**从 requests 中获取所有字段**，**requesters_name 从 requester_id**在 requests 表中的 requesters 中获取，并从响应表中**获取 request_id 的响应数。**

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:27:27.487

我会从子选择中获取计数，然后将其他两个表与常规连接一起连接

```
SELECT r.*, rn.requesters_name, 
    (SELECT COUNT(response_id) 
       FROM responses rp WHERE r.request_id=rp.request_id) 
    AS response_count
FROM requests r JOIN requester rn ON r.requesters_id=rn.requesters_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:30:27.527

```
SELECT requests.*,requesters.requesters_name,count(1) AS c FROM requests
LEFT JOIN requesters ON requesters.requester_id = request.requester_id
LEFT JOIN responses ON responses.request_id = requests.request_id
GROUP BY requests.request_id 
```

# sql - 选择字符串的一部分

> ID：10741426
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:21.073
> 
> 标签：sql, sql-server

我有一组数据，其中包含目录的完整 UNC 路径。我只想选择路径（删除服务器/IP）。我怎样才能做到这一点？

数据：

```
\\nas.home.example.com\dvd\My First Video
\\nas.office.example.com\business\Report1
\\nas.office.example.com\business\Report2
\\10.10.10.10\projects\proj1\images
\\10.10.10.10\projects\proj1\queries
\\10.10.10.10\projects\proj1\output 
```

预期结果（可以有或没有领先`\`，我不在乎）：

```
\dvd\My First Video
\business\Report1
\business\Report2
\projects\proj1\images
\projects\proj1\queries
\projects\proj1\output 
```

我尝试了以下方法（特定于上述输入之一）：

```
SELECT RIGHT(('\\nas.home.example.com\dvd\My First Video'), 
  CHARINDEX('\', REVERSE('\\nas.home.example.com\dvd\My First Video'))); 
```

这仅返回最里面的目录 ( `My First Video`)。我可以添加一个偏移量来获取父级，但它只有在目录正好是那个字符数时才有效：

```
SELECT RIGHT(('\\nas.home.example.com\dvd\My First Video'), 
  CHARINDEX('\', REVERSE('\\nas.home.example.com\dvd\My First Video'))+4); 
```

Returns `\dvd\My First Video`，这很好 - 对于那个值。如何修改我的查询以适用于我的所有数据值？

我怀疑我实际上可能需要其中两个查询。一个用于具有 DNS 名称的服务器，以所有结尾，`.com`另一个用于 IP 地址，所有以`10.10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:23:09.717

```
DECLARE @x TABLE (p VARCHAR(255))

INSERT @x SELECT '\\nas.home.example.com\dvd\My First Video'
UNION ALL SELECT '\\nas.office.example.com\business\Report1'
UNION ALL SELECT '\\nas.office.example.com\business\Report2'
UNION ALL SELECT '\\10.10.10.10\projects\proj1\images'
UNION ALL SELECT '\\10.10.10.10\projects\proj1\queries'
UNION ALL SELECT '\\10.10.10.10\projects\proj1\output'
UNION ALL SELECT 'foo.bar\whatever\who';

SELECT p, x = SUBSTRING(p, CHARINDEX('\', SUBSTRING(p, 3, 4000)) + 2, 4000) FROM @x; 
```

结果：

```
p                                           x
-----------------------------------------   ------------------------
\\nas.home.example.com\dvd\My First Video   \dvd\My First Video
\\nas.office.example.com\business\Report1   \business\Report1
\\nas.office.example.com\business\Report2   \business\Report2
\\10.10.10.10\projects\proj1\images         \projects\proj1\images
\\10.10.10.10\projects\proj1\queries        \projects\proj1\queries
\\10.10.10.10\projects\proj1\output         \projects\proj1\output
foo.bar\whatever\who                        \whatever\who 
```

如果要删除前导`\`，请更改`+ 2`为`+ 3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:28:56.627

与 Aaron 相同的概念，语法略有不同

```
SUBSTRING(p, CHARINDEX('\',p,3), 255) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:27:59.420

试试这个（重要的部分是第三行）：

```
DECLARE @str varchar(100)
SET @str = '\\nas.home.example.com\dvd\My First Video'
select substring(@str, CHARINDEX('\', @str, 3), len(@str) - charindex('\', @str, 3)) 
```

替换为语句`@str`中的列名。`SELECT`

这样做是在第三个字符之后从 '\' 的第一个索引开始获取字符串的子字符串，并且字符串的总长度减去第三个字符之后的第一个索引 '\' 的长度。

# c++ - 使用命名空间会导致名称隐藏吗？

> ID：10741428
> 
> 赞同：12
> 
> 时间：2012-05-24T16:20:29.393
> 
> 标签：c++, namespaces, language-lawyer

考虑以下代码：

```
namespace C {
    class X {};
}

namespace A {
    class X {};

    namespace B {
        using namespace C;

        X x;
    }
} 
```

我期待的类型`x`是`C::X`由于`using namespace`指令，但是*VS2010*和在线*LLVM/Clang*编译器`X`都在命名空间内解析`B`为`A::X`. 使用 using 声明 () 更改 using 指令`using C::X`，然后它会`C::X`按预期解析。

该标准说明了使用指令 [7.3.4.2]：

> using-directive 指定指定命名空间中的名称可以在 using-directive 出现在 using-directive 之后的范围内使用。在非限定名称查找 (3.4.1) 期间，名称看起来好像它们是在最近的封闭命名空间中声明的，其中包含使用指令和指定命名空间。

我对此的解读是，它`C::X`应该看起来好像在命名空间中声明`B`，有效地隐藏`A::X`。使用指令和使用声明之间的这种不一致背后是标准的哪些部分？有没有办法通过 using 指令从外部范围隐藏名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:39:21.610

*关于using 指令*的章节似乎以*某种方式*清楚地表明您正在看到预期的行为：

> 7.3.4p2 using-directive 指定指定命名空间中的名称可以在 using-directive 出现在 using-directive 之后的范围内使用。在非限定名称查找 (3.4.1) 期间，名称看起来好像它们是在最近的封闭命名空间中声明的，其中包含**使用**指令和指定命名空间。
> 
> 7.3.4p3 using 指令不会将任何成员添加到它出现的声明区域。

也就是说，*using-directive*将命名空间的成员添加到指令的公共命名空间祖先和 used 命名空间的查找集中，而不是直接添加到*使用 using-directive*的范围内。这在第二个引用中明确说明：它不会将任何成员添加到*using-directive*的声明性区域。

稍后有一个示例旨在说明其他内容，但实际上显示了这一点：

> 7.3.4p4 [...] 再举一个例子

```
namespace A {
  int i;
}
namespace B {
  int i;
  int j;
  namespace C {
    namespace D {
      using namespace A;
      int j;
      int k;
      int a = i; // B::i hides A::i
    } 
```

最后一个示例用于阐明传递性（并包含更多代码），但是一旦您删除了额外的代码，它实际上就等同于您的代码。

*因此，在您的情况下，使用指令*似乎不是隐藏，而是被隐藏。

# java - JMock 奇怪的 try/catch 子句

> ID：10741429
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:29.810
> 
> 标签：java, unit-testing, jmock

我正在尝试使用 JMock 编写一些测试，并将添加以下代码：

```
db = context.mock(DBResultQueryExecutor.class);
context.checking(new Expectations() {{
     oneOf (db).prepareQuery(query);
     will(throwException(new QueryException("Test")));
}}); 
```

现在，我`DBResultQueryExecutor`的定义如下：

```
public interface DBResultQueryExecutor{
...
void executeQuery() throws QueryException; //This is a checked exception
... } 
```

在 JMock 中，我只是试图指定该方法将在将来的某个时间点被调用一次。这很好，除了 Eclipse 在期望设置中抱怨未处理的异常。我知道它稍后会被抛出，并且我没有在预期范围内检查它。

我在这里做错了什么还是有一种简单的补救措施来解决这种情况？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:21:01.017

在这个问题上，我刚从同事那里得到了很大的帮助；解决方案是将“抛出异常”添加到您的测试方法描述符中。这个解释对我来说仍然不是很清楚，但它类似于“Java 不知道你实际上并没有调用该方法”在 Expectations {} 块中。在我看来，Java 应该知道——但它不知道。

我希望这会有所帮助——我也确信 Eclipse 是错误的。

# python - 在 Python strptime 中将星期几添加到时间

> ID：10741431
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:34.637
> 
> 标签：python, datetime, csv, strptime

我在 csv 文件中有两列，其中一列具有 hh:mm:ss 格式的时间，另一列具有星期几，其中 1 等于星期一，7 等于星期日。没有与数据关联的日期。

我想将数据合并到一个字段中，从而使时间与一周中的某一天相关联。

我已经用 strptime 确定了时间：

```
time.strptime(fl['journey']['BeginTime'][row], "%H:%M:%S") 
```

这给出了格式：

```
time.struct_time(tm_year=1900, tm_mon=1, tm_mday=1, tm_hour=23, tm_min=0, tm_sec=0, tm_wday=0, tm_yday=1, tm_isdst=-1) 
```

对应于星期几的数字存储在以下变量中：

```
fl['journey']['Day'][row] 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:54:08.647

```
date_string = '{0} {1}'.format(fl['journey']['Day'][row] - 1,
                               fl['journey']['BeginTime'][row])

dateobj = datetime.datetime.strptime(date_string, '%w %H:%M:%S') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:05:16.673

```
date_string = "%d %s" % (int(fl['journey']['Day'][row]) % 7 ,
                         fl['journey']['BeginTime'][row])

date = time.strptime(date_string, '%w %H:%M:%S') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T17:09:13.843

这应该可以帮助您：

```
from datetime import datetime

datetime.strptime("6 13:45:12", "%w %H:%M:%S").timetuple()
time.struct_time(tm_year=1900, tm_mon=1, tm_mday=1, tm_hour=13, tm_min=45, tm_sec=12, tm_wday=0, tm_yday=1, tm_isdst=-1) 
```

记住在 Python 中，工作日从 0 = 星期日开始，一直到 6

# java - Eclipse 4.2 M7 的状态

> ID：10741432
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:34.943
> 
> 标签：java, eclipse

在[Eclipse 4.2M7 的下载页面上，](http://download.eclipse.org/eclipse/downloads/drops4/S-4.2M7-201205031800/)状态是一个不祥的“红十字”图标，我认为这意味着它没有通过单元和/或集成测试（对吗？我能看到的任何地方都没有解释 - 但它是当我下载 M6 时，一个漂亮的绿色“勾号”）

[我在谷歌搜索或项目页面](http://www.eclipse.org/eclipse/)上也找不到任何更新

谷歌搜索“Eclipse 4.2”没有任何帮助，添加“M7”也没有任何帮助......

我目前正在使用 M6，它看起来相当稳定和抛光，但有一些粗糙的边缘（尤其是在窗口不同区域的停靠视图中）显然看起来“正在进行中”，我真的很想看看可能已经取得了进展。

有没有人知道 Milestone 构建是否已被放弃，或者尽管有“红十字”还是可以使用，和/或何时需要另一个构建？还是我们应该等待官方发布候选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:04:15.770

在这里找到了可以回答您的问题的答案：

> 在过去的 10 年中，Eclipse 一直建立在 IBM 硬件之上。为了让其他人更容易访问构建，一些专门的提交者一直在将构建迁移到 eclipse.org 硬件。然而，10 年的遗产并不容易转移（硬编码路径、某些假设、专用测试机器等……）。他们正在取得进展，但尚未编制所有测试报告。

[http://eclipsesource.com/blogs/2012/05/05/eclipse-juno-milestone-7-available-for-download/](http://eclipsesource.com/blogs/2012/05/05/eclipse-juno-milestone-7-available-for-download/)

# c# - C# 随机函数返回相同的值

> ID：10741433
> 
> 赞同：4
> 
> 时间：2012-05-24T16:20:42.133
> 
> 标签：c#, random

> **可能重复：**
> [随机数生成器未按我计划的方式工作（C#）](https://stackoverflow.com/questions/767999/random-number-generator-not-working-the-way-i-had-planned-c)

我做了一个简单的例程，它生成一个随机数

```
private int randomNumber()
{
    Random random = new Random();
    int randomNum = random.Next(0, 100);
    Response.Write(randomNum);
    return randomNum;
} 
```

我在整个 page_load 的两个不同阶段以相同的方式调用它：

```
// A/B Test
if (randomNumber() <= 50)
{
... 
```

但我发现，这两个数字总是相同的。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T16:22:48.063

当您创建一个`Random`实例时，它会使用当前时间播种。因此，如果您同时创建多个它们，它们将生成相同的随机数序列。您需要创建一个实例`Random`并使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T16:22:30.267

`new Random()`用当前时间初始化为种子。如果您调用它的速度足够快，那么种子将是相同的，`Next()`调用的结果也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T16:26:26.583

您可以通过在您的类中使用 Random 的单个实例并重用它来生成随机数来解决这个问题

```
public class TestPage : Page
{
    private Random Generator {get;set;}
    public Test()
    {
        this.Generator = new Random();
    }
    private int randomNumber()
    {
        return this.Generator.Next(0, 100);
    }
} 
```

这将为每个请求创建一个 Random 类。如果您希望它在一组用户中，您可以将您的生成逻辑包装在一个单例中，并在所有用户之间共享相同的实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T16:24:49.190

> [随机的](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)
> 
> 使用与时间相关的默认种子值初始化 Random 类的新实例。

来自 MSDN。

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。您还可以通过修改系统时钟返回的种子值，然后将这个新的种子值显式提供给 Random(Int32) 构造函数来解决此问题。有关详细信息，请参阅 Random(Int32) 构造函数。

# xcode - XCode 4 如何在不反汇编的情况下进行调试

> ID：10741436
> 
> 赞同：1
> 
> 时间：2012-05-24T16:20:50.527
> 
> 标签：xcode, debugging, disassembly

我已经搜索了 30 分钟，但没有找到答案。我在 XCode 4.3 中调试，当我单步执行我的代码时，我总是进入我没有源代码的代码，所以我会看到反汇编。我怎么能阻止这个。我只想逐步完成我自己的代码。

我找到了 Xcode 3 的一些答案，您可以在 Run -> Debug -> Source Code Only 或 Source Code and Disassembly 中更改它。

但是我在 XCode 4 中哪里可以找到它？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:15:02.883

找到了！检查调试窗口底部的滑块（导航 -> 在调试导航器中显示）。滑块与左侧的“=”（压缩线程列表）和右侧的“=”（解压缩线程列表）相邻。点击右侧的一个以显示整个堆栈。

这是更多信息的链接（向下滚动到“检查线程和堆栈” [http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T06:56:43.200

可以在**Product->Debug Workflow->Show Disassembly下找到**

# macos - Mac OS X：kSecPublicKeyAttrs 未声明的标识符

> ID：10741437
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:52.493
> 
> 标签：macos, keychain, commoncrypto

我正在尝试在我的 Mac OS X 应用程序中生成 RSA 密钥，我使用以下代码：

```
CFStringRef privateTag = (CFStringRef)@"com.example.privatekey";
CFStringRef publicTag = (CFStringRef)@"com.example.publickey";
int bits = 1024;
    CFMutableDictionaryRef publicAttr = CFDictionaryCreateMutable(kCFAllocatorDefault, 3, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFDictionaryAddValue(publicAttr, kSecAttrIsPermanent, kCFBooleanTrue);
    CFDictionaryAddValue(publicAttr, kSecAttrApplicationTag, publicTag);

    CFMutableDictionaryRef privateAttr = CFDictionaryCreateMutable(kCFAllocatorDefault, 3, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFDictionaryAddValue(privateAttr, kSecAttrIsPermanent, kCFBooleanTrue);
    CFDictionaryAddValue(privateAttr, kSecAttrApplicationTag, publicTag);

    CFMutableDictionaryRef keyPairAttr = CFDictionaryCreateMutable(kCFAllocatorDefault, 3, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFDictionaryAddValue(keyPairAttr, kSecAttrKeyType, kSecAttrKeyTypeRSA);
    CFDictionaryAddValue(keyPairAttr, kSecAttrKeySizeInBits, CFNumberCreate( kCFAllocatorDefault, kCFNumberIntType, &bits));
    CFDictionaryAddValue(keyPairAttr, kSecPublicKeyAttrs, privateAttr);
    CFDictionaryAddValue(keyPairAttr, kSecPrivateKeyAttrs, publicAttr);

    status = SecKeyGeneratePair((CFDictionaryRef)keyPairAttr, &publicKey, &privateKey);

    if (status != noErr) {
        NSLog(@"something went wrong %d", (int)status);
    }else {
        NSLog(@"New key");
    } 
```

如果我尝试构建 kSecPublicKeyAttrs 是一个未声明的标识符，我不知道为什么。有人可以帮忙吗？

问候，菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:03:28.497

首先，您在 OS X 上使用 iOS 示例代码。框架相似，但不完全相同。但是没有 OS X 示例代码，并且 iOS 示例代码显示在 OS X 文档集中，所以我不确定您是否应该为此受到指责……</p>

同时，虽然 iOS 框架具有公共常量 kSecPublicKeyAttrs 和 kSecPrivateKeyAttrs，但如果您查看源代码 (http://www.opensource.apple.com/source/libsecurity_keychain/libsecurity_keychain-55050.2/)，OS X 版本将这些常量设为私有常量，隐藏在框架中：

```
/* Constants used by SecKeyGeneratePair() - in SecKey.h.  Never used in
any SecItem apis directly. */
SEC_CONST_DECL (kSecPrivateKeyAttrs, "private");
SEC_CONST_DECL (kSecPublicKeyAttrs, "public"); 
```

所以，显然你可以传递@"private" 和@"public" （或者为它们创建你自己的常量）并且......好吧，我不能保证它会起作用，但你至少应该尝试一下。

同时，SecKeyGeneratePair 的文档说：

> 此外，您可以分别为公钥和私钥指定多个属性。您可以通过将键值对直接添加到字典中，或者通过添加键 kSecPrivateKeyAttrs 和 kSecPublicKeyAttrs 中的一个或两个来实现。

所以要么文档错误，要么框架错误；我建议向 Apple 提交错误，无论 @"private" 和 @"public" 是否适合您。我建议在 Apple devforums 上发布相关信息，Apple 员工可能会注意到并为您提供准官方的解决方法。

# c# - 如何将图像放在 Web 浏览器控件上

> ID：10741439
> 
> 赞同：0
> 
> 时间：2012-05-24T16:20:59.187
> 
> 标签：c#, windows-phone-7

在 Windows Phone 7 的网络浏览器应用程序中，我在网格上创建了​​一个网络浏览器控件（在 xaml.cs 中）。之后，我在网格上创建了​​一个图像。但是当我在模拟器中打开网络浏览器时，该图像不可见。这是一个选项卡式浏览器。**但是图像在网格中可见，但在 Web 浏览器控件上不可见（调试应用程序后）**。就像UC浏览器有这个东西。PLease 下面的图像，在网格上，图像是可见的，但在 Web 浏览器控件上，图像是不可见的。

![在此处输入图像描述](../Images/4b5b6789d09a8fcaed239d2c9dff3822.png) ![在此处输入图像描述](../Images/8d050a1d4e3616b084387cb2e802c9ee.png)
![在此处输入图像描述](../Images/4cc22f4ef28a6e4deaab4ddd3d1beb2b.png)

**在 .xaml 中**

```
 <Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBox x:Name="UrlTextBox" Background="White" InputScope="URL" KeyDown="UrlTextBox_KeyDown" Margin="0,0,98,0" GotFocus="UrlTextBox_GotFocus" LostFocus="UrlTextBox_LostFocus" KeyUp="UrlTextBox_KeyUp"/>
    <Grid x:Name="BrowserHost" 
      Grid.Row="1" GotFocus="BrowserHost_GotFocus">
        <Image x:Name="Full" Source="Images/full.png" Height="60" Width="60" Margin="430,678,0,0" MouseEnter="Full_MouseEnter" Visibility="Visible" />
    </Grid> 
```

**在 Xaml.cs 中**

```
private void ShowTab(int index) 
{ 
    this.currentIndex = index;       
    UrlTextBox.Text = this.urls[this.currentIndex] ?? "Search"; 
    if (this.browsers[this.currentIndex] == null) 
    { 
        WebBrowser browser = new WebBrowser(); 
        this.browsers[this.currentIndex] = browser; 
        BrowserHost.Children.Add(browser); 
        browser.IsScriptEnabled = true; 
    } 
    for (int i = 0; i < NumTabs; i++) 
    { 
        if (this.browsers[i] != null) 
        { 
            this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed; 
        } 
    } 
} 
```

我需要在我的网络浏览器控件中使用该图像。有谁能够帮我？

提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:27:58.990

在一个全新的应用程序中，我替换了 MainPage.xaml

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"></Grid> 
```

和

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <phone:WebBrowser x:Name="theBrowser" />
    <Image Source="/Background.png"
           Stretch="None"
           HorizontalAlignment="Left"
           VerticalAlignment="Bottom" />
</Grid> 
```

然后在我添加的页面构造函数中

```
theBrowser.Navigate(new Uri("http://stackoverflow.com/")); 
```

这导致显示如下：

![看看它的工作原理 - 注意：以浅色主题拍摄的屏幕截图](../Images/0c48b0a705ee280a18e1efd0baefaef2.png)

这证明它是完全可能的。
不幸的是，您的问题（XAML）中的不完整示例和与您的实际问题（.cs）无关的代码使得很难准确地说出您为什么不能让它工作。

此外，请在进一步发布之前阅读[http://tinyurl.com/so-hints](http://tinyurl.com/so-hints)，并以一种更便于人们帮助您的方式提出未来的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:04:36.320

当您在代码中添加浏览器控件时，您将它放在图像的顶部。您需要 Grid 中的容器来保存您的控件。但最终，您可能应该尝试按照上面 Matt Lacey 显示的方式在 XAML 中进行设置。

如果你想以你的方式尝试这个*，*你需要这样的东西：

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBox x:Name="UrlTextBox" Background="White" InputScope="URL" KeyDown="UrlTextBox_KeyDown" Margin="0,0,98,0" GotFocus="UrlTextBox_GotFocus" LostFocus="UrlTextBox_LostFocus" KeyUp="UrlTextBox_KeyUp"/>
    <Grid x:Name="BrowserHost" 
  Grid.Row="1" GotFocus="BrowserHost_GotFocus">
        <Grid x:Name="BrowserHolder"/>
        <Image x:Name="Full" Source="Images/Full.png" Height="60" Width="60" Margin="430,678,0,0" MouseEnter="Full_MouseEnter" Visibility="Visible" />
    </Grid>
</Grid> 
```

注意网格“BrowserHolder”的添加。由于该控件是首先添加的，因此您添加到该控件的任何内容*都应*显示在图像后面。

所以你的代码就变成了：

```
private void ShowTab(int index) 
{ 
    this.currentIndex = index;       
    UrlTextBox.Text = this.urls[this.currentIndex] ?? "Search"; 
    if (this.browsers[this.currentIndex] == null) 
    { 
        WebBrowser browser = new WebBrowser(); 
        this.browsers[this.currentIndex] = browser; 

        // NOTE: Changed to BrowserHolder
        BrowserHolder.Children.Add(browser); 

        browser.IsScriptEnabled = true; 
    } 
    for (int i = 0; i < NumTabs; i++) 
    { 
        if (this.browsers[i] != null) 
        { 
            this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed; 
        } 
    } 
} 
```

# xcode - Xcode - 以编程方式打开注释 - MapKit

> ID：10741441
> 
> 赞同：5
> 
> 时间：2012-05-24T16:21:05.257
> 
> 标签：xcode, annotations, mapkit, mkannotation

我有一个功能可以将已放置在地图上的注释和用户的位置放大到一半，这样两者都可以在屏幕上看到。注释是否有显示其“内容”的方法，即模拟按下它？放大后立即弹出是理想的选择。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T16:26:22.323

您可以使用此代码选择注释：您需要将 objectAtIndex 从 0 修改为任何数字以显示您想要的注释。

```
[self.mapView selectAnnotation:[[self.mapView annotations] objectAtIndex:0] animated:YES]; 
```

# jquery-mobile - jQuery Mobile 过渡处理两次

> ID：10741442
> 
> 赞同：1
> 
> 时间：2012-05-24T16:21:06.243
> 
> 标签：jquery-mobile

我的过渡很生涩，有些时间似乎处理了两次。所以它不是从页面到页面的平滑流畅的过渡。我在编码中做错了吗？这是在具有最新更新的 iPhone 4S 上进行的测试。

```
<div data-role="page" id="track_dash">
    <div data-theme="a" data-role="header" data-position="fixed">
        <h3><!-- ex: Phase 1, Day 1 --> Phase #, Day # </h3>
        <a data-role="button" data-transition="flip" data-theme="b" class="ui-btn-right" href="#page2"> Info </a>
    </div>
    <div data-role="content">
        <div class="360">
            <img src="simgs/360_logo.png" /><!-- style="width: 170px; height: 91px" -->
        </div>
        <ul data-role="listview" data-divider-theme="b" data-inset="true">
            <li data-theme="c">
                <a href="#page4" data-transition="slide"> Track Meals </a>
            </li>
            <li data-theme="c">
                <a href="#page20" data-transition="slide"> Track Workouts </a>
            </li>
            <li data-theme="c">
                <a href="#page8" data-transition="slide"> Track Progress </a>
            </li>
            <li data-theme="c">
                <a href="#page17" data-transition="slide"> Journal </a>
            </li>
        </ul>
        <ul data-role="listview" data-divider-theme="d" data-inset="true">
            <li data-theme="d">
                <a href="#page52" data-transition="slide"> <img src="simgs/alert_bubble.png" alt="Alerts" class="ui-li-icon" /> Alerts <span class="ui-li-count">2</span> </a>
            </li>
        </ul>
    </div>

    <div data-theme="e" data-role="footer" data-position="fixed">
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" id="track" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span" class="ui-btn-active"> <span class="foot_font">Track</span> </a>
                </li>
                <li>
                    <a href="#page40" id="cal" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span"> <span class="foot_font">Calendar</span> </a>
                </li>
                <li>
                    <a href="#page44" id="shop" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span"> <span class="foot_font">Shopping</span> </a>
                </li>
                <li>
                    <a href="#page22" id="profile" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span"> <span class="foot_font">Profile</span> </a>
                </li>
                <li>
                    <a href="#page47" id="more" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span"> <span class="foot_font">More</span> </a>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:43:29.877

可能是由[这个问题](https://github.com/jquery/jquery-mobile/issues/4024)引起的- jquery mobile 1.1。当您在标题中设置 data-position="fixed" 时，它尤其明显。该问题有一些答案，请阅读直到最后。

否则，更具体地说，如果您不知道，您需要描述您使用的浏览器或移动操作系统，以及您使用的 jqm 版本。

# excel - 在 excel 中为 vlookup 引用下一行和下一列

> ID：10741444
> 
> 赞同：0
> 
> 时间：2012-05-24T16:21:15.333
> 
> 标签：excel, excel-2003

我知道我需要使用索引和匹配，但这些功能让我感到困惑。

```
Column A     Column B
String       Value
Apple        10
Apple        20
Grape        10 
```

*（这是一个例子，而不是我实际使用的数据）*

我正在尝试为 Apple 的第二次上市拉取 20 的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:16:54.953

这是可以做到的公式： =INDEX(B2:B4,MATCH(C2,A2:A4,0)+1)

您的数据范围在 A2:B4 中。在 C2 中输入您要查找的值 - “Apple”。在此处的公式中的 D2 副本中，它将从第二个“Apple”行返回 20。

# php - 如何假脱机电子邮件（在任务中）并在其他控制器中发送普通电子邮件？

> ID：10741452
> 
> 赞同：4
> 
> 时间：2012-05-24T16:21:43.093
> 
> 标签：php, symfony, swiftmailer

在我的应用程序中，我们会发送通知电子邮件，例如，当您的注册表时，或者当需要通过电子邮件确认某些信息时。

但是我们还需要为数百名用户发送个性化的电子邮件（仅在一个文本上有所不同），但我不知道如何在同一个项目中将[Symfony2 假脱机电子邮件与无假脱机电子邮件结合起来。](http://symfony.com/doc/current/cookbook/email/spool.html)

**发送电子邮件时有类似参数的东西来表明这一点？**

类似 $email->send('no-spool');

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:16:54.480

我找到了解决方案并在此处发布：[如何定义附加邮件服务以使用假脱机并在 Symfony2 中发送即时电子邮件](https://stackoverflow.com/questions/12270162/how-to-define-an-additional-mailer-service-to-use-the-spool-and-send-instant-ema/12270717#12270717)

简而言之：

```
instant_mailer:
    class: %swiftmailer.class%
    arguments: ["@?swiftmailer.transport.real"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:34:46.140

PEAR::Mail_Queue [http://pear.php.net/package/Mail_Queue](http://pear.php.net/package/Mail_Queue)专为假脱机大量要发送的邮件而设计。所以我会专门将它用于您的所有非紧急消息，然后使用一般邮件功能甚至 Pear::Mail 用于即时消息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T17:02:23.327

根据 Symfony 1.4 文档，您可以使用以下调用立即发送消息（当您对整个项目使用假脱机策略时）：

$this->getMailer()->sendNextImmediately()->send($message);

这比接受的答案简单得多，如果您不需要发送许多假脱机消息，这将是正确的解决方案。我想在 symfony2 中存在相同或类似的功能。

[http://www.symfony-project.org/gentle-introduction/1_4/en/11-Emails](http://www.symfony-project.org/gentle-introduction/1_4/en/11-Emails)

# asp.net - 如何同时将表单数据附加到 asp 和电子邮件用户中的 csv 文件？

> ID：10741458
> 
> 赞同：0
> 
> 时间：2012-05-24T16:22:05.397
> 
> 标签：asp.net, forms, asp-classic

我有一个推荐表格，用户可以推荐朋友成为会员。表单操作必须指向一个 asp 文件。（我从 php 开始，让它在不同的服务器上工作，但它需要的服务器必须是 asp）。我已经搜索和搜索，但我遇到了一些问题。（我是一个asp新手）

1.  表单必须向用户发送电子邮件。我在这里的一个 asp 文件中工作（**email.asp**）：

    ```
    <%
    Dim senderName, senderEmail, senderMessage
    Dim name1, name2, name3, name4, name5, name6, name7, name8, name9, name10
    Dim email1, email2, email3, email4, email5, email6, email7, email8, email9, email10
    senderName = Request.Form("senderName")
    senderEmail = Request.Form("senderEmail")
    senderMessage = Request.Form("senderMessage")
    name1 = Request.Form("name1")
    name2 = Request.Form("name2")
    name3 = Request.Form("name3")
    name4 = Request.Form("name4")
    name5 = Request.Form("name5")
    name6 = Request.Form("name6")
    name7 = Request.Form("name7")
    name8 = Request.Form("name8")
    name9 = Request.Form("name9")
    name10 = Request.Form("name10")
    email1 = Request.Form("email1")
    email2 = Request.Form("email2")
    email3 = Request.Form("email3")
    email4 = Request.Form("email4")
    email5 = Request.Form("email5")
    email6 = Request.Form("email6")
    email7 = Request.Form("email7")
    email8 = Request.Form("email8")
    email9 = Request.Form("email9")
    email10 = Request.Form("email10")   

    'Sends an email
    Dim mail
    Set mail = Server.CreateObject("CDO.Message")
    'for testing i am only sending to the first email
    mail.To = email1
    mail.From = senderEmail
    mail.Subject = "Join Dallas Cowboys True Blue Fan Club with me!"
    mail.TextBody = "Join Dallas Cowboys True Blue Fan Club with me!"
    mail.Send()
    Response.Write("Mail Sent!")
    'Destroy the mail object!
    Set mail = nothing
    %> 
    ```

2.  最后，我有一个可以工作的 aspx 文件 ( **append.aspx** )，它将表单数据附加到 csv 文件中。我遇到的真正问题是将两个文件合并为一个工作文件。

    ```
    <%@ Import Namespace="System.IO" %>
    <script type="text/javascript">
    window.onload = window.close();
    </script>
    <script language="vb" runat="server">
    sub Page_Load(sender as Object, e as EventArgs)
    'Open a file for writing
    Dim FILENAME as String = Server.MapPath("Output.csv")

    Dim senderName, senderEmail, senderMessage
    Dim name1, name2, name3, name4, name5, name6, name7, name8, name9, name10
    Dim email1, email2, email3, email4, email5, email6, email7, email8, email9, email10
    senderName = Request.Form("senderName")
    senderEmail = Request.Form("senderEmail")
    senderMessage = Request.Form("senderMessage")
    name1 = Request.Form("name1")
    name2 = Request.Form("name2")
    name3 = Request.Form("name3")
    name4 = Request.Form("name4")
    name5 = Request.Form("name5")
    name6 = Request.Form("name6")
    name7 = Request.Form("name7")
    name8 = Request.Form("name8")
    name9 = Request.Form("name9")
    name10 = Request.Form("name10")
    email1 = Request.Form("email1")
    email2 = Request.Form("email2")
    email3 = Request.Form("email3")
    email4 = Request.Form("email4")
    email5 = Request.Form("email5")
    email6 = Request.Form("email6")
    email7 = Request.Form("email7")
    email8 = Request.Form("email8")
    email9 = Request.Form("email9")
    email10 = Request.Form("email10")   

    'Get a StreamWriter class that can be used to write to the file
    Dim objStreamWriter as StreamWriter
    objStreamWriter = File.AppEndText(FILENAME)

    'AppEnd the the End of the string, "A user viewed this demo at: "
    'followed by the current date and time
    objStreamWriter.WriteLine(sEnderName & "," & sEnderEmail & "," & name1 & "," & email1 & "," & senderMessage & "," & DateTime.Now.ToString())
    If name2 <> "" then
    objStreamWriter.WriteLine("," & "," & name2 & "," & email2)
    End If
    If name3 <> "" then
    objStreamWriter.WriteLine("," & "," & name3 & "," & email3)
    End If
    If name4 <> "" then
    objStreamWriter.WriteLine("," & "," & name4 & "," & email4)
    End If
    If name5 <> "" then
    objStreamWriter.WriteLine("," & "," & name5 & "," & email5)
    End If
    If name6 <> "" then
    objStreamWriter.WriteLine("," & "," & name6 & "," & email6)
    End If
    If name7 <> "" then
    objStreamWriter.WriteLine("," & "," & name7 & "," & email7)
    End If
    If name8 <> "" then
    objStreamWriter.WriteLine("," & "," & name8 & "," & email8)
    End If
    If name9 <> "" then
    objStreamWriter.WriteLine("," & "," & name9 & "," & email9)
    End If
    If name10 <> "" then
    objStreamWriter.WriteLine("," & "," & name10 & "," & email10)
    End If
    'Close the stream
    objStreamWriter.Close()
    End sub
    </script> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:04:07.753

您需要使用 System.Net.Mailmessage 和 SmtpClient。

[http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

# jquery - 用 HTML 编写 JSON

> ID：10741459
> 
> 赞同：2
> 
> 时间：2012-05-24T16:22:05.893
> 
> 标签：jquery, json, api, weather

我对实际使用 API、获取 JSON 数据并将其放入实际的 HTML 文件并使结果看起来很漂亮是全新的。

我擅长 HTML/CSS/jQuery。但它似乎不是 jQuery 的深度（我可以做基础）

这是我从 Weather Underground 的 API 返回的 JSON 数据的示例

```
 "current_observation": {
    "image": {
    "url":"http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",
    "title":"Weather Underground",
    "link":"http://www.wunderground.com"
    },
    "display_location": {
    "full":"Bowling Green, KY",
    "city":"Bowling Green",
    "state":"KY",
    "state_name":"Kentucky",
    "country":"US",
    "country_iso3166":"US",
    "zip":"42101",
    "latitude":"37.02899933",
    "longitude":"-86.46366119",
    "elevation":"154.00000000"
    } 
```

我可以从这个`display_location`里面看到`current_observation`。

我想拉出并`full`在我的网站上显示为 h1（我实际上想要做更多的信息，但我觉得在我把它写下来之后我可以处理剩下的事情。）

所以这是我目前所拥有的：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <body>
        <section id="area"></section>
    </body>
    <script type="text/javascript">
        $().ready(function(){ 
            $.getJSON("http://api.wunderground.com/api/[MY API KEY]/conditions/q/autoip.json",
            function(data){
                $.each(data){
                    content = '<h1>' + json.current_observation.display_location.full + '</h1>';
                    $(content).appendTo("#area");
                 });
              });
           });
    </script>
</html> 
```

这没用 ：-/

任何帮助都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:34:06.080

看这个：

```
content = '<h1>' + json.current_observation.display_location.full + '</h1>'; 
```

`json`指的是什么？？也是`$.each(data){`无效的语法。请参阅[文档](http://api.jquery.com/jQuery.each/)。你的`each`循环应该看起来像

```
$.each(data, function(i, json) {
    content = '<h1>' + json.current_observation.display_location.full + '</h1>';
    $(content).appendTo("#area");
}); 
```

如果`data`返回的是一个对象数组，就像问题中包含的那样，这将起作用。你应该`console.log(data)`看到它的形式..你可以消除`each`循环并使用

```
content = '<h1>' + data.current_observation.display_location.full + '</h1>'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T16:29:03.713

这似乎是一个无用的括号。尝试 ：

```
$().ready(function(){ 
        $.getJSON("http://api.wunderground.com/api/[MY API KEY]/conditions/q/autoip.json",
        function(data){
            $.each(data){
                content = '<h1>' + json.current_observation.display_location.full + '</h1>';
                $(content).appendTo("#area");
             } // Change here
          });
       }); 
```

# objective-c - 为什么在 Objective-C 中的字符串之前使用“@”？

> ID：10741462
> 
> 赞同：8
> 
> 时间：2012-05-24T16:22:18.803
> 
> 标签：objective-c, string

> **可能重复：**
> [@ 符号在字符串之前的用途？](https://stackoverflow.com/questions/4446308/purpose-of-symbol-before-strings)

在每个字符串都是客观 C 之前，我一直很好奇这`@`意味着什么。编译器更容易，还是在某种程度上更有效？

例子：

```
NSString* flavour = @"Chocolate" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T16:25:49.110

`@"Chocolate"`只是创建`NSString`实例的快捷方式。您还可以使用：

```
[[NSString alloc] initWithUTF8String:"Chocolate"]; 
```

如果您不使用 @ 您将创建一个 C 字符串（`char`数组）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T16:25:02.217

该`@`字符不用于 C 或 C++ 标识符中，因此它用于以不会与其他语言的关键字冲突的方式引入 Objective-C 语言关键字。这使得语言的“目标”部分可以与 C 或 C++ 部分自由混合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T16:25:02.873

因为 Objective-C 是纯 C 的超集，所以必须有一种方法来区分`NSString`纯 C 字符串（基本上只是`char*`指针）的文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:23:57.833

区分c字符串和我认为的objective-c类

# asp.net - 检查是否至少选中了一个复选框 使用 C#

> ID：10741464
> 
> 赞同：0
> 
> 时间：2012-05-24T16:22:20.697
> 
> 标签：asp.net, checkbox, customvalidator

我有一个使用自定义验证器的 Web 表单（将文本框边框设置为红色），我想检查一组八个复选框中的至少一个已被选中（并且可能也将复选框的边框设置为红色）。

由于我有一组 if 语句确保每个复选框返回 true 或 false，我想我可以添加一个计数器，如果计数器等于 0，则将 Page.IsValid 设置为 false。好吧，这个想法没有奏效。看起来您不能直接设置 Page.IsValid 。

然后我想将计数器值弹出到隐藏字段中并验证它，但我似乎无法获得正确的语法来在隐藏字段上使用自定义验证器。

什么是最好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:54:37.907

你怎么了`customvalidator`？你所需要的只是

```
 protected void validateCheckBoxes_ServerValidate(object source, ServerValidateEventArgs args)
{
   if(!CheckBox1.Checked && !CheckBox2.Checked && !CheckBox3.Checked)
      args.IsValid = false;
   else
      args.IsValid = true;
} 
```

if 是说“如果没有选中任何复选框，那么我们有问题。”

# qt - QTabWidget 的每个选项卡的样式彼此不同

> ID：10741465
> 
> 赞同：4
> 
> 时间：2012-05-24T16:22:22.807
> 
> 标签：qt, qtstylesheets

我有一个`QTabWidget`包含 4 个选项卡的选项卡。我想单独设置它们的每个标题：我看到我可以使用样式表来做到这一点。但我的问题是我不能只更改一个选项卡的标题，即选项卡名称所在的位置，而不更改选项卡的其余部分。

以一种简单的方式，假设我想要第一个标签为红色，第二个为蓝色，第三个为绿色，第四个为黄色。那么，如何在不更改其他选项卡的情况下更改每个选项卡的样式。

谢谢！

编辑

我在[那里](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qtabwidget-and-qtabbar)看到了如何一次更改所有选项卡标题的样式，但不能单独更改

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T17:13:33.107

如果你继承 QTabWidget，你可以访问受保护的函数`QTabWidget::tabBar()`，它返回它使用的 QTabBar。QTabBar 有一个方法`QTabBar::setTabTextColor()`可以改变单个标签的文本颜色。这是一个例子：

```
#include <QtGui>

class TabWidget : public QTabWidget
{
public:
    TabWidget()
    {
        addTab(new QPushButton("Hi 1!"), "Button 1 Tab");
        addTab(new QPushButton("Hi 2!"), "Button 2 Tab");
        tabBar()->setTabTextColor(0, QColor(Qt::red));
        tabBar()->setTabTextColor(1, QColor(Qt::blue));
    }
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    TabWidget tabWidget;

    tabWidget.show();
    return app.exec();
} 
```

如果您需要更多控制，您可以制作自己的选项卡小部件。根据[文档](http://qt-project.org/doc/qt-4.8/qtabwidget.html#details)，QTabWidget 基本上只是一个 QStackedWidget 与 QTabBar 组合。您可以通过将 QStackedWidget 与例如一组程式化的 QPushButtons 组合来制作自己的选项卡小部件。

# javascript - 谷歌地图javascript api v3加载时奇怪的“转变”

> ID：10741466
> 
> 赞同：0
> 
> 时间：2012-05-24T16:22:23.373
> 
> 标签：javascript, google-maps, google-maps-api-3

一旦地图完全加载，我会得到一个奇怪的“转变”，请参见此处：[http](http://screencast.com/t/0IvcvNbHCl) ://screencast.com/t/0IvcvNbHCl ，这是我的嵌入代码：[http](http://pastebin.com/hvN5sgEp) ://pastebin.com/hvN5sgEp关于如何操作的任何建议摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T11:05:00.123

如果您没有为渲染地图的元素设置宽度（或最小宽度），或者将该宽度设置为太小的值，则似乎会发生这种情况。

另请参阅此重复主题：[Google Maps v3 Shifting After Loading in Wordpress](https://stackoverflow.com/questions/10904638/google-maps-v3-shifting-after-loading-in-wordpress)

# c# - 为什么 ASP 菜单在隐藏之前会完整呈现一点点，除了 AJAX 脚本管理器之外还有其他方法吗？

> ID：10741476
> 
> 赞同：2
> 
> 时间：2012-05-24T16:22:57.443
> 
> 标签：c#, asp.net, .net, menu, rendering

我的问题有两个部分。首先也是最重要的是，我想知道为什么，因为我自己对正在发生的事情的理解。其次，所有可能的选择是什么。

出于演示目的，假设我有以下 ASP 页面，在 button1 点击后面有以下代码：

ASP：

```
<asp:Menu ID="Menu1" runat="server">
    <Items>
        <asp:MenuItem Text="TEST" Value="TEST">
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
        </asp:MenuItem>
        <asp:MenuItem Text="TEST" Value="TEST">
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
        </asp:MenuItem>
        <asp:MenuItem Text="TEST" Value="TEST">
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
            <asp:MenuItem Text="TEST" Value="TEST"></asp:MenuItem>
        </asp:MenuItem>
    </Items>
</asp:Menu>

<asp:Button ID="Button1" runat="server" Text="Button" 
onclick="Button1_Click" />

<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

后面的代码：

```
Label1.Text += "<table>";
        for (int i = 0; i < 20000; i++)
        {
            Label1.Text += "<tr><td>random rendered html stuff<td></tr>";
        }
Label1.Text += "</table>"; 
```

当您单击使页面上出现大量新 html 的按钮时，您会注意到的第一件事（它发生得有点快但足够慢以至于非常明显）是所有菜单内容都垂直显示在屏幕上，包括所有子菜单项。为什么会发生这种情况？这就是菜单总是显示的方式，但是当计算机没有很多工作要做时，我们的眼睛却没有注意到？我目前正在处理的页面可能有 500 行动态创建，但也有很多 css 和动画正在进行。该页面的菜单系统也非常面向 css，当页面加载所有数据时，当整个菜单系统覆盖页面大约一秒钟时，这一点非常明显。

至于变通方法，我已经有一个我知道可以解决的工作，那就是添加一个脚本管理器并启用页面 ajax。加载文本显示，当数据返回时没有菜单恶作剧。这就是为什么我的帖子主要是为了了解为什么会发生这种情况。但是，如果我有一个我不想启用 ajax 的页面，我很想听听是否有任何实际的替代方案

谢谢！

狮子座

# jquery - Jersey/Jquery HTTP 通信和 JSON 数据

> ID：10741477
> 
> 赞同：0
> 
> 时间：2012-05-24T16:22:59.050
> 
> 标签：jquery, json, http, post, jersey

我在让 Jersey 和 Jquery 以 JSON 格式通信数据时遇到了一些麻烦。在以下最小示例中，始终向调用 JQuery 客户端返回 HTTP 204。

```
@Path("/path")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class Resource {
    @POST
    public ReturnData postSomething(@Valid Data data) {
      Log("success");
      ...
      ReturnData returnData = ...;
      return returnData;
    }
} 
```

我使用以下 JQuery 代码，并在每次发布后调用错误函数。

```
$.ajax({
     type: "POST",
     contentType: "application/json; charset=utf-8",
     url: url,
     data: '{"data": "data"}',
     dataType: "json",
     error: function(data){
          alert("fail");
     },
     success: function(data){
          alert("success");
     }
     }); 
```

在 Firebug 中，我看到带有上述设置的以下 HTTP 请求/响应：

```
OPTIONS /path HTTP/1.1
Host: 192.168.15.109:8080
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: http://localhost
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Pragma: no-cache
Cache-Control: no-cache

HTTP/1.1 204 No Content
Date: Thu, 24 May 2012 16:10:57 GMT
Allow: OPTIONS,POST 
```

起初，我在 JQuery 帖子中尝试了没有 contentType: "application/json; charset=utf-8" 的设置，结果如下：

```
POST /path HTTP/1.1
Host: 192.168.15.109:8080
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: application/json, text/javascript, */*; q=0.01
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://localhost/test.html
Content-Length: 104
Origin: http://localhost
Pragma: no-cache
Cache-Control: no-cache

HTTP/1.1 415 Unsupported Media Type
Date: Thu, 24 May 2012 16:08:55 GMT
Content-Type: text/plain;charset=UTF-8
Cache-Control: must-revalidate,no-cache,no-store
Content-Length: 72
Cache-Control: no-cache 
```

我认为客户端和服务器由于某种原因找不到他们都同意的数据类型。我觉得奇怪的是，在将 contentType 设置为 JSON 时，接受标头不包含 JSON。

日志（“成功”）；在服务器端永远不会执行。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:37:21.017

dataType 参数是指从服务器返回的数据，而不是正在提交的数据。我认为您假设它正在发送原始 json，而实际上它正在评估您传递的数据并使用 jQuery.param() 将其转换为字符串。这些数据将在`$_REQUEST`. 在此处查看[文档](http://api.jquery.com/jQuery.ajax/)

根据文档，您发送的数据应采用以下格式的键值字符串：

```
key1=value1&key2=value2 
```

或在使用此格式的地图中：

```
{key1: 'value1', key2: 'value2'} 
```

也许您的额外报价会影响地图？我个人总是使用键值字符串，因为它似乎有更少的怪癖。

# networking - Winsock + C + 客户端到客户端 + 发送和接收数据

> ID：10741483
> 
> 赞同：1
> 
> 时间：2012-05-24T16:23:27.413
> 
> 标签：networking, architecture, client-server, firewall, nat

我是一个很简单的问题。我实现了一个系统，可以在两个客户端之间发送数据，而无需在它们之间使用直接连接（无需在客户端的防火墙中打开端口），遵循此模型：

客户端 1 ------> 服务器 ------> 客户端 2 或客户端 1 <------ 服务器 <------ 客户端 2

这个工作正常的模型没有任何问题。问题是服务器的开销大大增加，因为它需要从客户端接收数据，然后立即转发到下一个。

我的问题：有没有更快的方法在客户端之间发送数据？或者在不使用它们之间的直接连接的情况下将数据从客户端发送到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:31:31.730

在集中式服务器的帮助下，在客户端之间建立直接连接是可能的，但并非易事。这称为[Nat Traversal](http://en.wikipedia.org/wiki/NAT_traversal)，其工作原理是使用“假”UDP 数据包在防火墙上打孔。这项技术是由 Skype 开创的（或至少被带到了最前沿）。
有关其工作原理的链接和一般概述，请参阅 Wiki 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:28:30.403

1 - 你的问题似乎与 c/c++/winsock 没有任何关系。

2 - 你现在可能正在以最好的方式做这件事，随着负载的增加，你只需要扩展你的服务器（而不是让非常复杂的客户端尝试点对点连接）

# php - 我有一个包含正值和负值的数组，我如何在 php 中将其分开？

> ID：10741485
> 
> 赞同：0
> 
> 时间：2012-05-24T16:23:31.250
> 
> 标签：php, arrays

该数组中包含正值和负值。

```
$arr_pn = array( 1, -1, 2, 10,-15 ); 
```

我的问题是如何将所有负值分开并存储在一个数组中，将正值存储在另一个数组中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:24:31.763

```
$arr_p = array();
$arr_n = array(); 
foreach ($arr_pn as $val) {
    if ($val >= 0) {
        $arr_p[] = $val;
    }
    else {
        $arr_n[] = $val;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T16:31:56.840

### 减少原始数组

与其创建两个数组，不如删除所有负数，只留下正数：

```
$neg = array();
foreach( $arr_pn as $key => $num ) {
  if ( $num < 0 ) {
    unset( $arr_pn[ $key ] );
    array_push( $neg, $num );
  }
} 
```

演示：[http ://codepad.org/TCwXYn2P](http://codepad.org/TCwXYn2P)

一个警告是原始数组将缺少键。因此，如果您打算计算它们，请考虑这一点。您可以使用[`array_values()`](http://www.php.net/manual/en/function.array-values.php)重新键入数组：

```
$arr_pn = array_values( $arr_pn ); 
```

### 两个结果数组

如果你想要两个数组：

```
$neg = array();
$pos = array();

foreach( $arr_pn as $num ) {
  $num < 0 
    ? array_push( $neg, $num ) 
    : array_push( $pos, $num ) ;
} 
```

演示：[http ://codepad.org/pHVyTRMc](http://codepad.org/pHVyTRMc)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T16:40:08.507

```
$arr_pn = array( 1, -1, 2, 10,-15 );

$arrayPositive = array_filter($arr_pn, function($value) { return $value > 0.0; } );
$arrayNegative = array_filter($arr_pn, function($value) { return $value < 0.0; } );

var_dump($arrayPositive);
var_dump($arrayNegative); 
```

# wolfram-mathematica - 关于 Mathematica 中的集成

> ID：10741486
> 
> 赞同：-3
> 
> 时间：2012-05-24T16:23:35.960
> 
> 标签：wolfram-mathematica

我想用 Mathematica 计算以下积分

```
Integrate[(E^(2 x (-1 - Sqrt[y])) + E^(
     2 x (-1 + Sqrt[y]))) (-((
      3 E^(1/2 (t - x) (-5 - Sqrt[1 + 24 z])))/Sqrt[1 + 24 z]) + (
     3 E^(1/2 (t - x) (-5 + Sqrt[1 + 24 z])))/Sqrt[1 + 24 z]) + (E^(
     2 x (-1 - Sqrt[y])) + E^(
     2 x (-1 + Sqrt[y]))) (-((
      E^(1/2 (t - x) (-5 - Sqrt[1 + 24 z])) (-1 - Sqrt[1 + 24 z]))/(
      2 Sqrt[1 + 24 z])) + (
     E^(1/2 (t - x) (-5 + Sqrt[1 + 24 z])) (-1 + Sqrt[1 + 24 z]))/(
     2 Sqrt[1 + 24 z])), {t, 0, Infinity}, {x, 0, t} , 
 Assumptions -> {Re[Sqrt[1 + 24 z]] < 5 && Re[Sqrt[y]] < 1}] 
```

我们很容易得到的结果是 5/(6 (-1 + y) (-1 + z))，但是在 Mathematica 中它需要很多时间。你想帮助我更快地改进它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:55:12.733

我不知道为什么您的输入需要很长时间，但这里有一个解决积分的快速方法：让积分`t`无限期，然后做限制。

```
f[y_, z_, t_, x_] = (E^(2 x (-1 - Sqrt[y])) + E^(2 x (-1 + Sqrt[y]))) (-((3 E^(1/2 (t - x) (-5 - Sqrt[1 + 24 z])))/Sqrt[1 + 24 z]) + (3 E^(1/2 (t - x) (-5 + Sqrt[1 + 24 z])))/Sqrt[1 + 24 z]) + (E^(2 x (-1 - Sqrt[y])) + E^(2 x (-1 + Sqrt[y]))) (-((E^(1/2 (t - x) (-5 - Sqrt[1 + 24 z])) (-1 - Sqrt[1 + 24 z]))/(2 Sqrt[1 + 24 z])) + (E^(1/2 (t - x) (-5 + Sqrt[1 + 24 z])) (-1 + Sqrt[1 + 24 z]))/(2 Sqrt[1 + 24 z])); 

int[y_, z_, t_] = Simplify[Integrate[Integrate[f[y, z, t, x], {x, 0, t}], t]];

(* this is fast *)

Limit[int[y, z, t], t -> \[Infinity], Assumptions -> {Re[Sqrt[1 + 24 z]] < 5 && Re[Sqrt[y]] < 1}]

(* 0 *)

Limit[int[y, z, t], t -> 0]

(* -(5/(6 (-1+y) (-1+z))) *) 
```

# powershell - 无法在 powershell 中使用 ADSI 设置属性

> ID：10741487
> 
> 赞同：2
> 
> 时间：2012-05-24T16:23:36.990
> 
> 标签：powershell, adsi

我正在尝试使用 powershell 创建新用户。我们没有运行活动目录（不确定这是否会改变事情）。这是我正在尝试做的事情：

```
$machine = [ADSI]"WinNT://localhost,computer"
$newUser = $machine.Create("User", $Username)
$newUser.setpassword($Password)
$newUser.SetInfo() 
```

到目前为止一切正常，并且创建了用户。但是现在我想像这样更改其他设置，但它们都失败了

```
$newUser.Put("sAMAcountName", $Username)
$newUser.SetInfo()

$newUser.Put("userAccountControl", 0x10000)
$newUser.SetInfo() 
```

**更新**

这是我得到的错误

```
Exception calling "Put" with "2" argument(s): "Exception from HRESULT: 0x8000500F" 
```

知道我做错了什么吗？谢谢！

**解决方案**

JPBlanc 的回答帮助我指出了正确的方向。

最大的问题是几乎没有关于`[ADSI]`在不属于 Active Directory 域的机器上使用的文档。

我能够使用该`UserFlags`属性解决问题。

```
$newUser.UserFlags = $UserFlags.DONT_EXPIRE_PASSWD
$newUser.CommitChanges() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:43:04.277

您可以以管理员身份尝试：

```
$obj = [ADSI]"WinNT://$env:COMPUTERNAME"
$user = $obj.Children.find("utilisateur1")
$user.psbase.rename("user1")
$user.put('FullName','user1')
$user.setinfo() 
```

根据以下代码我看不到`sAMAcountName`或`userAccountControl`哪些是 AD 用户属性：

```
PS C:\Windows\system32> $a | fl *

UserFlags                  : {513}
MaxStorage                 : {-1}
PasswordAge                : {917}
PasswordExpired            : {0}
LoginHours                 : {255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255}
FullName                   : {user1}
Description                : {}
BadPasswordAttempts        : {0}
HomeDirectory              : {}
LoginScript                : {}
Profile                    : {}
HomeDirDrive               : {}
Parameters                 : {}
PrimaryGroupID             : {513}
Name                       : {user1}
MinPasswordLength          : {0}
MaxPasswordAge             : {3628800}
MinPasswordAge             : {0}
PasswordHistoryLength      : {0}
AutoUnlockInterval         : {1800}
LockoutObservationInterval : {1800}
MaxBadPasswordsAllowed     : {0}
objectSid                  : {1 5 0 0 0 0 0 5 21 0 0 0 151 181 85 95 2 227 17 190 248 24 47 102 18 4 0 0}
AuthenticationType         : Secure
Children                   : {}
Guid                       : {D83F1060-1E71-11CF-B1F3-02608C9E7553}
ObjectSecurity             :
NativeGuid                 : {D83F1060-1E71-11CF-B1F3-02608C9E7553}
NativeObject               : System.__ComObject
Parent                     : WinNT://WORKGROUP/JPBHPP2
Password                   :
Path                       : WinNT://WORKGROUP/JPBHPP2/user1
Properties                 : {UserFlags, MaxStorage, PasswordAge, PasswordExpired...}
SchemaClassName            : User
SchemaEntry                : System.DirectoryServices.DirectoryEntry
UsePropertyCache           : True
Username                   :
Options                    :
Site                       :
Container                  :

PS C:\Windows\system32> $a | select -ExpandProperty properties

PropertyName                                                     Value
------------                                                     -----
UserFlags                                                          513
MaxStorage                                                          -1
PasswordAge                                                        917
PasswordExpired                                                      0
LoginHours                                     {255, 255, 255, 255...}
FullName                                                         user1
Description
BadPasswordAttempts                                                  0
HomeDirectory
LoginScript
Profile
HomeDirDrive
Parameters
PrimaryGroupID                                                     513
Name                                                             user1
MinPasswordLength                                                    0
MaxPasswordAge                                                 3628800
MinPasswordAge                                                       0
PasswordHistoryLength                                                0
AutoUnlockInterval                                                1800
LockoutObservationInterval                                        1800
MaxBadPasswordsAllowed                                               0
objectSid                                              {1, 5, 0, 0...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:31:33.023

您收到的错误消息是什么？您可能需要先获取对用户的新引用，然后才能再次修改它。

# java - GWT AnchorElement 在溢出的 FlowPanel 内滚动

> ID：10741494
> 
> 赞同：1
> 
> 时间：2012-05-24T16:24:06.977
> 
> 标签：java, gwt

我有一个锚点列表，单击时应该滚动，使用传统的`<a href="#anchorName">`，在流面板面板中我有部分列表，例如`<div id="anchorName">Name</div>`. 最后，所有这些都驻留在一个对话框中。我遇到了一个问题，如果页面内容（不是对话框内容而是页面本身）很大并且启用了滚动条。单击锚点时，会导致整个页面滚动。

有一个更好的方法吗？

# c# - TextBlock 滚动在 WPF 中不起作用

> ID：10741496
> 
> 赞同：6
> 
> 时间：2012-05-24T16:24:19.377
> 
> 标签：c#, wpf, textblock

我想让我的`TextBlock`滚动，但我不能让它工作。也许问题出在`StackPanel`？

所以这里是代码：

```
 <Grid Margin="3">
        <Grid.RowDefinitions>
            <RowDefinition Height="152*" />
            <RowDefinition Height="86*" />
            <RowDefinition Height="67*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,6,3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Grid.RowSpan="2">
            <StackPanel.ScrollOwner>
                <ScrollViewer />
            </StackPanel.ScrollOwner>
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
            <ScrollViewer>
                <TextBlock ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="3" FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Height="216" Width="489" AllowDrop="False" Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" />
            </ScrollViewer>
        </StackPanel>
    </Grid> 
```

问题出在这部分：

```
<ScrollViewer>
             <TextBlock ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="3" FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Height="216" Width="489" AllowDrop="False" Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" />
</ScrollViewer> 
```

这部分代码应该可以滚动。我可以看到垂直滚动条但无法滚动。我希望能够看到，`StackPanel`因为我不允许任何更改并且想要只读。

谢谢

编辑：

```
<Window x:Class="RssDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RSS Demo" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="576" Width="521">
    <Window.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFE2E2E2" Offset="0" />
            <GradientStop Color="White" Offset="1" />
        </LinearGradientBrush>
    </Window.Background>

    <Window.Resources>
        <XmlDataProvider x:Key="rssData" XPath="//item" Source="http://www.hak.hr/rss/stanje/hr.xml" />
    </Window.Resources>

    <Grid Margin="3">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,6,3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}">
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
        </StackPanel>
        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
            <TextBlock ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Width="489" AllowDrop="False"
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" />
        </ScrollViewer>

    </Grid>
</Window> 
```

将此代码粘贴到您的项目中，因为这是我阅读信息的 rss 链接。只是看看你会得到什么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:56:40.090

这是我必须做的，希望你也能这样做。首先我必须将 放在`ScrollViewer`周围`StackPanel`，然后我必须`Height`从`TextBlock`.

```
 <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">   
        <StackPanel Orientation="Vertical">
           <TextBlock Text="Test" />      
           <TextBlock x:Name="test" Margin="3" FontStyle="Italic" VerticalAlignment="Stretch"
                      TextWrapping="Wrap" TextAlignment="Justify" Width="489" AllowDrop="False" Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" />      
        </StackPanel>
     </ScrollViewer> 
```

编辑

```
 <Grid Margin="3">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,6,3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}">
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
        </StackPanel>
        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">   
            <TextBlock Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Width="489" AllowDrop="False" 
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" />      
         </ScrollViewer>        

    </Grid> 
```

需要指出的一些事情...我修改了您的网格行高度。* 用于表示填充，数字不代表像素。所以你 hd=ad 的行为不像调整大小的分钟。Essentiall 187* 并不意味着贪婪的 187 像素，其中空间至少为 187 像素，但会根据需要增长。像我上面所做的那样将三个行高设置为 * 只是给它们每个父高度的 3 分之一。如果您希望第 2 行是其他行的两倍，请将其他行设置为 *，并将中间行设置为 2*。由于我看不到您的屏幕，您可以根据需要进行调整。您可能也有兴趣使用 Auto 并根据内容调整大小。

这是它为我工作的屏幕截图： ![可滚动文本块](../Images/7ae8e8d6ad539bcea2f698b637385b4e.png)

# python - 如何引用在不同对象中创建的对象

> ID：10741500
> 
> 赞同：0
> 
> 时间：2012-05-24T16:24:27.163
> 
> 标签：python

我正在使用一个名为 test.py 的文件测试我的两个类。我只是在学习编程，所以这只是一个练习程序。有一个地图集（地图），我可以在一张地图中放置多个“机器人”。

```
#test.py
from Atlas import Atlas
atlas = Atlas()
atlas.add_robot('rbt1')

#atlas.py
from Robot import Robot

class Atlas:

    def __init__(self):
        ...

    def add_robot(self, robot, zone = 'forrest'):
        self.robot = Robot(robot)
        print 'added robot %s to %s' % (robot, zone)

#robot.py
class Robot():

    def __init__(self, rbt, zone = 'forrest'):
        self.name = rbt
        print "%s initiated" % rbt

    def step(self, direction):
        ... 
```

我使用代码“atlas.add_robot('rbt1')”将一个新机器人放入图集中。

我希望能够使用 test.py 中的“rbt1.step('left')”等命令来控制机器人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:27:34.190

您应该在 test.py 中使用 制作您的机器人`newRobot = Robot('rbt1')`，然后使用`atlas.add_robot(newRobot)`. 为此，我们传入一个完整的机器人，而不是机器人名称。Atlas 不应该尝试初始化机器人，因为它是 Atlas。它应该只关心 Atlases 做了什么：跟踪机器人的位置。

在编程中学习的一个好概念是允许哪些代码段接触某些东西。在这种情况下，我们将在 test.py 中创建机器人（以便我们可以触摸它），然后将其传递给 Atlas（以便 Atlas 可以触摸它）。这实际上是您问题的核心。以下是处理此问题的一些一般方法：

*   重构你的代码，通过改变控制流，所以你没有这个问题（就像我在下面的演示）
*   传入参数/访问器 - 要求对象为您提供与您所知道的匹配的机器人（在本例中为名称）
*   浅层数据结构 - Atlas 将是一个浅层外壳，其行为类似于字典，您只需将其视为字典（而不是在`yourAtlas.robotsToZones(...)`下面做）
*   滥用全局变量 - 永远不要这样做，这是可怕的编程
*   闭包 - 如果您在函数内部定义一个函数（甚至可能是一个类内部的一个类，但这会变得很难看），内部函数可以访问外部函数中的变量，尽管您必须`nonlocal`在 python 中使用关键字来声明您的意图做这个

要更改控制流，以免出现此问题：通过传入一个完整的 Robot，Atlas 可以变得更加灵活。毕竟是阿特拉斯。为什么 Atlas 会负责制造机器人？

```
from collections import *

class Atlas(object):
    def __init__(self):
        self.zones = defaultdict(set)

    def add_robot(self, robot, zone='forest')
        self.robots[zone].add(robot) 
```

或者你可以这样做：（可能更好，因为我们可能希望机器人改变区域）

```
class Atlas(object):
    def __init__(self):
        self.robotsToZones = {}

    def add_robot(self, robot, zone='forest')
        self.robotsToZones[robot.name] = zone

    def robotsInWorlds(self):
        return self.robotsToZones.keys()  # .keys() not necessary, but hides representation 
```

（如果您关心速度，您实际上可以两者都做......但您通常不应该关心速度，这需要确保两个结构同步）

此外，您应该只在一个位置存在数据。在您的情况下，Robot 和 Atlas 都需要知道机器人在哪个区域。这很糟糕，因为*您必须确保这两个值始终相等且同步*，从而导致不必要的头痛和并发症，甚至可能是错误。解决方案是在 robots.py 中忽略机器人所在的区域：

```
class Robot(object):
    def __init__(self, name):
        self.name = name 
```

机器人永远不需要弄清楚它在哪里；这就是地图集的工作。如果 test.py 需要知道机器人在哪里，它可以做类似的事情`myAtlas.whereIs(myRobot)`，它可以只是`return self.robotsToZones[robot.name]`. 这称为*模块化*和*关注点分离*。

（旁注：以上假设您有一些其他机制来跟踪哪些机器人在哪些区域中，并且您没有坐标。如果您的`step()`函数处理坐标，您必须决定是否有全局或每个-区域坐标。后一种情况可能更容易，因为您需要定义的只是区域的边界如何拼接在一起；尽管如果您有 Atlas 定义非重叠（ick，可能的错误）边界，您可以执行第一种情况zone 是哪里。你也可以做一些事情，比如有定义区域边界的路标，机器人在最近的路标区域中。虽然让每个区域由相同大小的矩形组成，可以通过网格表示，但可能是最简单的.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:32:12.887

您应该将您的机器人添加到`Atlas`. 而不是`self.robot = Robot(robot)`，添加`robots = []`到`Atlas.__init__()`并`self.robots.append(Robot(robot))`在中执行`Atlas.add_robot(robot)`。然后您可以通过列表（ 、 等）访问`atlas.robots[0].step()`它们`atlas.robots[1].step()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:33:06.523

您应该能够引用由 中创建的机器人`atlas`，`atlas.robot`因为那是您存储它的地方。您可以像这样创建一个指向该变量的新变量：

```
rbt1 = atlas.robot 
```

然后您应该能够按照您的描述引用它：

```
rbt1.step('left') 
```

请注意，如果您希望`atlas`能够拥有多个机器人，则应考虑将机器人`list`存储`dict`在`atlas`.

# java - Java 玉连接到数据库

> ID：10741503
> 
> 赞同：1
> 
> 时间：2012-05-24T16:24:33.387
> 
> 标签：java, jdbc, agents-jade

我正在尝试使用jade java和jdbc连接到数据库

```
public class IntermediaryAgent extends Agent{

private Connection con;
protected void setup()
{
    Class.forName("oracle.jdbc.driver.OracleDriver");
    con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1522:xe","hr","hr");

    Statement stmt = con.createStatement();
    ResultSet rs=stmt.executeQuery("SELECT * FROM data");
    rs.next();

        int id=rs.getInt(1);
        String name=rs.getString("NAME");
        String surname=rs.getString("SURNAME");
        int age=rs.getInt(4);
        System.out.println(""+id+" "+name+" "+surname+" "+age);
        rs.close();
        stmt.close();
    con.close();
    DFAgentDescription df=new DFAgentDescription();
    df.setName(getAID());
    ServiceDescription sd =new ServiceDescription();
    sd.setType("Agent");
    sd.setName("inter");
    df.addServices(sd);
    try {
        DFService.register(this, df);
    } catch (FIPAException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
protected void takeDown()
{
    try {
        DFService.deregister(this);
    } catch (FIPAException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

但我得到错误

```
2012-05-24 18:15:27 jade.core.Runtime beginContainer
INFO: ----------------------------------
This is JADE snapshot - revision $WCREV$ of $WCDATE$
downloaded in Open Source, under LGPL restrictions,
at http://jade.tilab.com/
----------------------------------------
2012-05-24 18:15:29 jade.core.BaseService init
INFO: Service jade.core.management.AgentManagement initialized
2012-05-24 18:15:29 jade.core.BaseService init
INFO: Service jade.core.messaging.Messaging initialized
2012-05-24 18:15:29 jade.core.BaseService init
INFO: Service jade.core.mobility.AgentMobility initialized
2012-05-24 18:15:29 jade.core.BaseService init
INFO: Service jade.core.event.Notification initialized
2012-05-24 18:15:29 jade.core.messaging.MessagingService clearCachedSlice
INFO: Clearing cache
2012-05-24 18:15:29 jade.mtp.http.HTTPServer <init>
INFO: HTTP-MTP Using XML parser 
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser
2012-05-24 18:15:29 jade.core.messaging.MessagingService boot
INFO: MTP addresses:
http://10.1.242.245:7778/acc
2012-05-24 18:15:29 jade.core.AgentContainerImpl joinPlatform
INFO: --------------------------------------
Agent container Main-Container@mariusz is ready.
--------------------------------------------
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClassInternal(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at agenty.IntermediaryAgent.polacz(IntermediaryAgent.java:120)
at agenty.IntermediaryAgent.setup(IntermediaryAgent.java:19)
at jade.core.Agent$ActiveLifeCycle.init(Agent.java:1519)
at jade.core.Agent.run(Agent.java:1465)
at java.lang.Thread.run(Unknown Source)

    ***  Uncaught Exception for agent p  ***
    java.lang.NullPointerException
at agenty.IntermediaryAgent.odczyt(IntermediaryAgent.java:144)
at agenty.IntermediaryAgent.setup(IntermediaryAgent.java:20)
at jade.core.Agent$ActiveLifeCycle.init(Agent.java:1519)
at jade.core.Agent.run(Agent.java:1465)
at java.lang.Thread.run(Unknown Source)
ERROR: Agent p died without being properly terminated !!!
State was 2
jade.domain.FIPAAgentManagement.FailureException: ((action ( agent-identifier :name 
df@mariusz:1099/JADE  :addresses (sequence http://10.1.242.245:7778/acc )) (deregister 
(df-agent-description :name ( agent-identifier :name p@mariusz:1099/JADE  :addresses 
(sequence http://10.1.242.245:7778/acc ))))) not-registered)
at jade.domain.FIPAService.doFipaRequestClient(FIPAService.java:163)
at jade.domain.FIPAService.doFipaRequestClient(FIPAService.java:102)
at jade.domain.DFService.deregister(DFService.java:195)
at jade.domain.DFService.deregister(DFService.java:217)
at jade.domain.DFService.deregister(DFService.java:228)
at agenty.IntermediaryAgent.takeDown(IntermediaryAgent.java:43)
at jade.core.Agent.clean(Agent.java:1652)
at jade.core.Agent$ActiveLifeCycle.end(Agent.java:1567)
at jade.core.Agent.run(Agent.java:1495)
    at java.lang.Thread.run(Unknown Source) 
```

我尝试使用带有 jdbc 代码的简单 java 类（不使用代理），它是有效的。当我将 jdbc 与代理一起使用时，它不起作用。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:43:37.683

您的类路径中需要 Oracle JDBC 驱动程序。

# java - JButton 定位问题

> ID：10741506
> 
> 赞同：2
> 
> 时间：2012-05-24T16:24:39.073
> 
> 标签：java, swing, layout, jpanel, jbutton

好的，我有一个使用覆盖布局在下图中显示为白色的 Jpanel。它包含一个 ScrollPane，其中包含一个图像（“No Image Available”）和一个 JButton（“Comment”）。

![在此处输入图像描述](../Images/bc0b605808c6630d7d3f3da7cc30eb81.png)

我想将此按钮放置在 JPanel 的右下角。我尝试了多种布局方法，但似乎无法使其正常工作。按钮最多向东南方向移动大约 3/4，我不知道为什么。

任何帮助是极大的赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:30:01.973

您提到使用`OverlayLayout`; 你想让按钮实际重叠图像吗？

如果这对您不重要，请使用其他好的建议之一，因为它们要简单得多。但是如果你真的希望按钮与图像重叠，这里有一个解决方案：使用 a`JLayeredPane`到 layer two `JPanel`s，依次布局按钮和图像。不幸的是，`JLayeredPane`它没有布局管理器，因此有必要添加一个组件侦听器来调整`JPanel`s 的`JLayeredPane`大小。

这是一个SSCCE：

```
public class SSCCE {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container contentPane = frame.getContentPane();
        contentPane.setLayout(new BorderLayout());

        final JLayeredPane layeredPane = new JLayeredPane();
        contentPane.add(layeredPane,BorderLayout.CENTER);

        final JPanel btnPane = new JPanel(new GridBagLayout());
        btnPane.setOpaque(false);

        JButton btn = new JButton("Comment");
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.anchor = GridBagConstraints.SOUTHEAST;
        btnPane.add(btn,gbc);

        final JPanel lblPane = new JPanel(new GridBagLayout());
        lblPane.setBackground(Color.CYAN);

        JLabel lbl = new JLabel("No Image Available");
        gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.anchor = GridBagConstraints.CENTER;
        lblPane.add(lbl,gbc);

        layeredPane.add(btnPane,0);
        layeredPane.add(lblPane,1);
        layeredPane.addComponentListener(new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {
                lblPane.setBounds(0, 0, layeredPane.getWidth(), layeredPane.getHeight());
                btnPane.setBounds(0, 0, layeredPane.getWidth(), layeredPane.getHeight());
            }
        });

        frame.setSize(300,200);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:54:17.110

使用不同的布局管理器有很多可能的解决方案。我不知道 OverlayLayout，但我喜欢 WindowBuilder Pro（免费）：[https](https://developers.google.com/java-dev-tools/wbpro/) ://developers.google.com/java-dev-tools/wbpro/以获取有关 Swing 设计的帮助。

使用它，我为您的问题编写了 SpringLayout 实现（如果没有 GUI 构建器，SpringLayout 似乎很难处理）。

```
JPanel panel = new JPanel();
SpringLayout sl_panel = new SpringLayout();
panel.setLayout(sl_panel);

JButton button = new JButton("Comments");
sl_panel.putConstraint(SpringLayout.SOUTH, button, 0, SpringLayout.SOUTH, panel);
sl_panel.putConstraint(SpringLayout.EAST, button, 0, SpringLayout.EAST, panel);
panel.add(button);

JScrollPane scrollPane = new JScrollPane();
sl_panel.putConstraint(SpringLayout.NORTH, scrollPane, 5, SpringLayout.NORTH, panel);
sl_panel.putConstraint(SpringLayout.WEST, scrollPane, 3, SpringLayout.WEST, panel);
sl_panel.putConstraint(SpringLayout.SOUTH, scrollPane, 3, SpringLayout.SOUTH, panel);
sl_panel.putConstraint(SpringLayout.EAST, scrollPane, 3, SpringLayout.EAST, panel);
panel.add(scrollPane);

JLabel lblNewLabel = new JLabel();
lblNewLabel.setIcon(new ImageIcon(foo.class.getResource("sSdA3.png")));
scrollPane.setViewportView(lblNewLabel); 
```

这是运行代码的图片：

![在此处输入图像描述](../Images/2e6f1415644b44ba151cbb33379f21ba.png)

您可以看到按钮（我的，不是您的图片...）浮动在底部的滚动窗格上方。我们可以调整上面的边距，这样按钮就不会浮动在滚动条的顶部，但这只是为了向您展示它在 z 轴上的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T17:14:23.823

在内容窗格的位置添加第一个`JPanel`带有图像的图像，`CENTER`只需将 JPanel 的布局设置为`FlowLayout.RIGHT`并将您的添加`JButton`到其中，现在将其添加`JPanel`到内容窗格的`PAGE_END`位置`BorderLayout`。看看这个例子

```
import java.awt.*;
import java.awt.event.*;
import javax.imageio.ImageIO;
import javax.swing.*;

public class ApplicationCloseExample
{   
    private Image image;
    private static final String HTML =
        "<html>" +
        "<style type'text/css'>" +
        "body, html { padding: 0px; margin: 0px; }" +
        "</style>" +
        "<body>" +
        "<img src='http://pscode.org/media/starzoom-thumb.gif'" +
        " width=320 height=240>" +
        "";

    private void displayGUI()
    {
        final JFrame frame = new JFrame("Application Close Example");

        frame.addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent we)
            {
                int result = JOptionPane.showConfirmDialog(
                                frame, "Do you want to Exit ?"
                                , "Exit Confirmation : ", JOptionPane.YES_NO_OPTION);
                if (result == JOptionPane.YES_OPTION)               
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                else if (result == JOptionPane.NO_OPTION)   
                    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
            }
        });

        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);
        JLabel label = new JLabel(HTML);
        contentPane.add(label);

        JPanel bottomPanel = new JPanel();
        bottomPanel.setLayout(new FlowLayout(FlowLayout.RIGHT, 5, 5));
        JButton button = new JButton("Comment");
        bottomPanel.add(button);

        frame.getContentPane().add(contentPane, BorderLayout.CENTER);
        frame.getContentPane().add(bottomPanel, BorderLayout.PAGE_END);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ApplicationCloseExample().displayGUI();
            }
        });
    }
} 
```

这是输出：

![右按钮](../Images/1894d3a8404da9dfb43f9a912b9437f6.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T16:35:28.180

我会建议您使用`GridBagLayout`而不是默认布局。使用 GridBagLayout，您可以控制一切。
这是一个可以帮助您的链接：[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T16:38:18.223

我会说 a`JPanel`和 a `BorderLayout`，在该`EAST`位置添加按钮，然后将该面板放在主容器中（带有 a `BorderLayout`）的`SOUTH`位置。

所以你得到：

```
-------------
|           |
|           |
|   Image   |
|           |
|-----------|
|______Button 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T17:02:28.870

检查[SpringLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/SpringLayout.html)。它允许您将元素定位到距组件的 NORTH、WEST、EAST 或 SOUTH 一定距离。您的代码将如下所示：

```
SpringLayout layout = new SpringLayout();
setLayout(layout);
...
add(_button);
...
layout.putConstraint(SpringLayout.EAST, _button, -20, SpringLayout.EAST, this);
layout.putConstraint(SpringLayout.SOUTH, _button, -20, SpringLayout.SOUTH, this); 
```

# shibboleth - Shibboleth 登录页面优雅

> ID：10741507
> 
> 赞同：1
> 
> 时间：2012-05-24T16:24:43.887
> 
> 标签：shibboleth

我们已经安装了一个 Shibboleth 系统 (OpenAthens LA 2.2)，并且正在寻找一种将登录过程与另一个系统（我们的虚拟学习环境）集成的方法。

我们已经将我们的 VLE 注册为服务提供者并且登录过程正在运行，因此用户可以通过 Shibboleth 对 VLE 进行身份验证，从而创建一个会话，使用户能够访问其他受 Shibboleth 保护的资源，而无需再次输入他们的凭据。这也为我们工作。

但是，我们有两个要求：

1.  我们希望通过一个简洁易记的 URL 来宣传我们的 VLE，例如“http://learn.example.ac.uk”。
2.  如果 Shibboleth 系统发生故障，我们需要将用户发送到 VLE 的本机登录页面（这由网络设备监控）

触发 Shibboleth 登录的 URL（具体到 VLE，通过目标参数）很长，例如

[https://vle.example.ac.uk/Shibboleth.sso/Login?entityID=https://shib.example.ac.uk/oala/metadata&target=https%3A%2F%2Fvle.example.ac.uk% 2FshibbolethSSO%2Flogin](https://vle.example.ac.uk/Shibboleth.sso/Login?entityID=https://shib.example.ac.uk/oala/metadata&target=https%3A%2F%2Fvle.example.ac.uk%2FshibbolethSSO%2Flogin)

我们想知道是否应该配置我们的负载均衡器以在用户请求[http://learn.example.ac.uk](http://learn.example.ac.uk)时将其发送到这个长 URL （并且 Shibboleth 系统可用）。如果 Shibboleth 不可用，我们可以将它们转移到不同的 URL。

这比必须创建一个登录页面更可取，该页面仅显示“单击此处登录到 VLE”，上面的长链接是 URL。

我们所希望的可以实现吗？我很想听听其他 Shibboleth 用户如何引导用户访问他们的登录页面。我们担心我们的用户可能会为一个页面添加书签，这意味着当他们返回该页面时，他们会被转移到一个通用的 Shibboleth 登录页面，该页面不会将他们返回到 VLE，并且只会创建一个会导致混淆的“会话”。

# ios - 故事板中的 UITabBarController 自定义类不起作用

> ID：10741516
> 
> 赞同：0
> 
> 时间：2012-05-24T16:25:13.980
> 
> 标签：ios, xcode, uitabbarcontroller, storyboard, segue

我已经在情节提要中设置了`UITabBarController`4 个选项卡，每个选项卡都链接到`UITableViewController`. 我已将 的类设置`UITabBarController`为我自己的自定义类`MyTabBarController`，它是`UITabBarController`.

现在我希望能够从`MyTabBarController`类中访问故事板上已经存在的 4 个表视图控制器，这样我就可以将数据从一个传递到另一个。我不知道如何从这一点访问它们，我所知道的只是`@property (nonatomic, strong) MyTableViewController *tvc;`然后合成它，但这会创建一个新`MyTableViewController`对象并且不会链接到情节提要上已经存在的对象。

我希望这是有道理的，感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:41:17.833

您从以下位置继承此属性`UITabBarController`：

```
@property(nonatomic, copy) NSArray *viewControllers 
```

您应该能够访问它的内容并识别它知道哪些视图控制器。

# google-app-engine - Google Channel API /_ah/channel/connected/ 未调用，而 /_ah/channel/disconnected/ 是

> ID：10741519
> 
> 赞同：4
> 
> 时间：2012-05-24T16:25:19.893
> 
> 标签：google-app-engine, channel-api

使用 Google Channel API 我发现 /_ah/channel/disconnected/ 总是被及时调用，而 /_ah/channel/connected/ 不是。很多时候，我从来没有接到连接呼叫，然后接到服务器未收到通知的通道的断开呼叫！

（我看到有些人遇到了相反的问题，即断开连接延迟）

# testing - Flex Builder：资产文件或目录名称的长度不能超过 100 个字节

> ID：10741521
> 
> 赞同：0
> 
> 时间：2012-05-24T16:25:35.663
> 
> 标签：testing, mobile, compiler-errors, flash-builder

今天我想在我的三星 Galaxy 设备上测试我的移动应用程序。我以前做过，效果很好。

今天它停止工作，Flash Builder“说”有一个错误：“资产文件或目录名称不能超过 100 字节长”

我能做些什么呢？知道发生了什么吗？我在这里问它是因为我在网上找不到解决方案。

**编辑：** 确切的错误是：打包应用程序时发生错误：

资产文件或目录名称的长度不能超过 100 个字节。发生错误：dataimagepng;base64,iVBORw0KGgoAAAANSUhEUgAAAzAAAAJECAYAAADJzMF4AAAgAElEQVR4nNy9eZCt513f+cixHWF339vdt2v6+l9OWsvpvurV2yVpIMSQ.URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:29:46.883

问题是包资源管理器中有一个奇怪的链接文件（* .url）（添加），默认包文件夹以及 bin-debug 文件夹中的名称很长。

dataimagepng;base64,iVBORw0KGgoAAAANSUhEUgAAAzAAAAJECAYAAADJzMF4AAAgAElEQVR4nNy9eZCt513f+cixHWF339vdt2v6+l9OWsvpvurV2yVpIMSQ......URL

奇怪的是，通过删除这些文件，问题就解决了。有人知道这些文件是从哪里来的吗？

# c# - .NET DLL 冲突

> ID：10741522
> 
> 赞同：3
> 
> 时间：2012-05-24T16:25:36.680
> 
> 标签：c#, .net, sharepoint, .net-3.5

我已经为一些 Sharepoint WSS3 功能制作了测试程序，但我遇到了一个奇怪的异常。

```
public XmlNode GetListsCollection()
{
    XmlNode nodeLists;

    ShareLists.Lists lists = new ShareLists.Lists(); // <--- Exception causing line
    lists.Credentials = CredentialCache.DefaultCredentials;

    return nodeLists = lists.GetListCollection();
} 
```

// 此处出现异常 (Settings.Designer.cs)

```
[global::System.Configuration.ApplicationScopedSettingAttribute()]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Configuration.SpecialSettingAttribute(global::System.Configuration.SpecialSetting.WebServiceUrl)]
[global::System.Configuration.DefaultSettingValueAttribute("http://uk-tr-dsf/_vti_bin/Lists.asmx")]
public string SharepointWeb_ShareLists_Lists {
    get {
        return ((string)(this["SharepointWeb_ShareLists_Lists"]));
    }
} 
```

当我将项目从 .NET 4 更改为 .NET 3.5 时发生此错误，这是修复“PlatformNotSupportException”所必需的。

所以我不能改回来。

```
System.Configuration.ConfigurationErrorsException was unhandled
  Message=An error occurred creating the configuration section handler for applicationSettings/SharepointWeb.Properties.Settings: Could not load file or assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified. (C:\Working\SharepointPlugin\SharepointWeb\bin\Debug\SharepointWeb.vshost.exe.Config line 5)
  Source=System.Configuration
  BareMessage=An error occurred creating the configuration section handler for applicationSettings/SharepointWeb.Properties.Settings: Could not load file or assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.
  Filename=C:\Working\SharepointPlugin\SharepointWeb\bin\Debug\SharepointWeb.vshost.exe.Config
  Line=5
  Stacktrace: ... omitted 
```

我意识到这`ConfigurationErrorsException`是一个委托，真正的异常消息是内部异常。

```
System.IO.FileNotFoundException
           Message=Could not load file or assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified. 
```

现在，在我的参考资料中找到并清楚地显示了这个文件，但是`Microsoft.CSharp`丢失了（由于它是一个 .NET 3.5 项目）我假设这是原因是否正确？.NET 4 下是否有适用于框架的版本？我看过了`C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\`，看不到等效版本。

* * *

解决方案：

这些必须改变

在 resx 文件中：

```
 <resheader name="reader">
    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader>
  <resheader name="writer">
    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader> 
```

在 app.config 中：

```
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <section name="SharepointWeb.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    </sectionGroup>
</configSections> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:50:12.657

3.5 没有 Microsoft.CSharp.dll，但通常它会自动添加到 4.0 项目中而不需要它（除非您使用动态关键字之类的东西，在这种情况下您的项目需要是 4.0），所以我会尝试删除此引用。

关于 system.dll 的第 4 版，您说此文件已找到并存在于您的参考资料中。但是，如果您的项目是针对 3.5 框架的，那么您应该引用 system.dll 的 2.0 版本而不是 system.dll 的框架 4 版本

同样，您需要确保没有其他 dll 用于框架 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:30:36.437

看起来您的工具中仍然使用了一些 4.0 程序集。当您将目标切换到 2.0-3.5 时，您必须停止使用 4.0 程序集。不幸的是，由于您正在迁移到较旧版本的框架，因此在某些情况下您必须更改代码以不使用仅限 4.0 的功能。

# vb.net - 从 Windows 服务启动调试器失败

> ID：10741530
> 
> 赞同：1
> 
> 时间：2012-05-24T16:25:58.043
> 
> 标签：vb.net, visual-studio-2008, windows-services

目前，我的代码中有以下语句允许我调试 Windows 服务：

```
#If DEBUG Then
        System.Diagnostics.Debugger.Launch()
#End If 
```

我把它放在 OnStart 方法中，当我启动服务时，我可以附加到我的 Visual Studio 实例。目前我有一个失败的实例。我在虚拟机上安装了该服务，但遇到以下错误：

> MyService.exe [376] 中发生未处理的异常（“为用户启动”）。即时调试此异常失败并出现以下错误：调试器无法启动，因为没有用户登录。

我在本地机器上调试这样的服务从来没有遇到过问题，所以我不确定发生了什么。用户设置为登录，`LocalSystem`好像这很重要。我通过管理员登录到虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:02:28.163

我最终在**OnStart**方法中添加了以下语句：

```
#If DEBUG Then
    While True

    End While
#End If 
```

这使我可以手动附加到 Visual Studio 中的进程并在 while 循环中设置断点。一旦遇到断点，我就会手动跳出 while 循环以继续执行应用程序的其余部分。

# java - 如何优化此 SQL 删除

> ID：10741531
> 
> 赞同：0
> 
> 时间：2012-05-24T16:26:03.143
> 
> 标签：java, sql, oracle, optimization

我想优化这个 SQL 查询的性能。如果我用一百万个键填充这个哈希表，查询将需要大约一分钟。如何优化此 Java 方法以加快执行速度？

```
private HashMap<String, Boolean> selectedIds = new HashMap<>();

public void deleteSelectedIDs() throws SQLException {

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        PreparedStatement ps = null;
        ResultSet resultSet = null;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                String sqlDeleteQuery = "DELETE FROM ACTIVESESSIONSLOG WHERE ASESSIONID = ?";

                Set<String> keySet = selectedIds.keySet();
                String[] keys = new String[]{};
                keys = selectedIds.keySet().toArray(keys);
                ps = conn.prepareStatement(sqlDeleteQuery);

                for (int i = 0; i < keys.length; i++) {
                    if (selectedIds.get(keys[i]).booleanValue()) {
                        ps.setString(1, keys[i]);
                        ps.executeUpdate();
                        ps.clearParameters();
                        selectedIds.put(keys[i], false); //get(keys[i]) = false;
                    }
                }

                conn.commit();
                committed = true;

                //selectedIds.clear();
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:28:49.703

如果您的 JDBC 驱动程序支持它，请使用[批处理](http://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm)。它易于使用，并且在这种类型的场景中效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:30:03.340

有人可能有更好的主意，但您是否考虑过通过临时表将键列表传递给 Oracle，然后在 PL/SQL 函数中执行循环。它将降低流量，数据库将进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T16:32:16.843

创建一个临时表并将所有 id 插入其中。然后对临时表中的那些执行一次删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T16:35:32.220

我认为最好使用[CallableStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)和 oracle [procedure](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6009.htm)。

**片段**

```
SQL> create type temp_tbl
  2  is
  3  table of number;
  4  /

...

SQL> create or replace procedure stored_p
  2  (
  3    list in temp_tbl,
  4    p_rc  out sys_refcursor )
  5  as
  6  begin
  7    open
  8   p_rc for delete from ACTIVESESSIONSLOG  where ASESSIONID
      in (select * from table(list));
  9  end;
 10  / 
```

# arrays - PHP：如何使用 if-else 语句更改数组中的值？

> ID：10741540
> 
> 赞同：0
> 
> 时间：2012-05-24T16:26:32.370
> 
> 标签：arrays, if-statement, replace

假设我有一个包含 10 个元素的数组示例：array(1,0,1,0,0,0,1,0,0,1)

我将如何实现一个函数，该函数使用 if-else 语句替换数组的值来评估数组的元素。假设值为 1，我希望输出 YES，如果为 0，则为 NO。我确定我会使用循环语句来评估每个单元格或元素。此外，如果一个元素的值为 1.5 或任何浮点数，我也希望将其替换为 YES。

任何提示将非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:30:27.600

只需遍历数组并检查元素，

```
 if(!$arr[$i]) echo "NO"
 else echo "Yes" 
```

你已经有了想法，你到底需要什么？

# batch-file - 需要将批处理文件结果写入文本文件

> ID：10741543
> 
> 赞同：0
> 
> 时间：2012-05-24T16:26:40.717
> 
> 标签：batch-file

我有一个每晚运行的批处理文件，我需要将结果写入结果文件（不管是什么类型）。这是我的错觉。

这里基本上是批处理文件：

```
SHUTDOWN /r /m \\MACHINE1 /t %1 /c "This machine is forcibly restarting in %1 seconds!" /f
SHUTDOWN /r /m \\MACHINE2 /t %1 /c "This machine is forcibly restarting in %1 seconds!" /f
SHUTDOWN /r /m \\MACHINE3 /t %1 /c "This machine is forcibly restarting in %1 seconds!" /f 
```

它包含大约 248 台每晚重新启动的机器。我希望能够写出哪些响应，哪些没有响应的结果。更重要的是，哪些人做到了。也许像一个`errorlevel==0`和`errorlevel==1`类型的东西？我不知道这是否适用于这里。

另外，我怎样才能让它从文本文件中读取机器名称，而不是实际列出`MACHINE1`,等？`MACHINE2`

如果有帮助，这将作为夜间任务在我身后的台式机上运行。

如果有这么多的条目，我将如何做到这一点。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:35:49.550

当您运行它时，用于`shutdown.bat >> shutdown.log 2>&1`将输出放入文件中。

要从文件中读取机器名称，您可以使用 FOR 循环，如下所示：

```
FOR /F %%name IN (machines.txt) DO SHUTDOWN /r /m \\%%name /t %1 /c "This machine is forcibly restarting in %1 seconds!" /f 
```

每个机器名称都在一个新行上。

一个格式很好的：

```
@echo off
FOR /F %%name IN (machines.txt) DO (
    echo %%name
    SHUTDOWN /r /m \\%%name /t %1 /c "This machine is forcibly restarting in %1 seconds!" /f
) 
```

# python - 找不到 Python numexpr 模块

> ID：10741544
> 
> 赞同：1
> 
> 时间：2012-05-24T16:26:43.043
> 
> 标签：python

我过去在许多机器上成功安装了 numexpr。但现在我无法让它在新的 Linux 系统上运行。基本上我下载了 tar.gz 文件和

```
python setup.py install --home=~/Python/ 
```

这很好用。我也做过

```
export PYTHONPATH+=:$HOME/Python/lib/python/ 
```

此过程适用于机器上的其他几个模块，但对于 numexpr 我不断得到

```
Python 2.6.2 (r262:71600, Jul 22 2011, 11:30:26) 
[GCC 4.4.4 20100726 (Bull 4.4.4-13)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numexpr
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named numexpr 
```

我尝试了 numexpr 的 1.4.1 和 1.4.2 版本。sys.path 也在 python 环境中正确设置（应该如此）。

有人知道这里可能出什么问题吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:54:01.917

`$HOME/Python/lib/python/`可能不是 PYTHONPATH 的正确值，模块通常安装在安装目录下面的子目录中，通常后面带有版本号`python`等。我认为这个问题可以通过查看下面的内容来解决`~/Python`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T19:52:15.267

安装 Anaconda 免费分发[链接](http://continuum.io/downloads)。你用 python 编码的生活会容易得多。此外， numexpr 已经安装并可以使用（也可以与其他软件包一起使用）。

# c# - 使用 WPF 动态加载内容

> ID：10741547
> 
> 赞同：2
> 
> 时间：2012-05-24T16:26:56.233
> 
> 标签：c#, wpf, datatemplateselector

好的，我有一个容器，我为其创建了两个数据模板。基本上，一个模板将显示 5 个文本框，其中绑定了对象数据，另一个模板将显示一个按钮以添加该特定对象。我对 DataTemplateSelector 进行了子类化，它可以工作，但是当我浏览我的记录时，选择器再也不会被调用。

那么我将如何让容器重新选择它的模板。该容器是一个 StackPanel，我已经尝试过 UpdateVisuals、InvalidateVisuals、InvalidateArrange 和 ApplyTemplate。

XAML 代码

```
<DataTemplate x:Key="advisorTemplate">
        <StackPanel Orientation="Vertical" Margin="2,2,2,2" HorizontalAlignment="Stretch" VerticalAlignment="Top">
            <StackPanel Orientation="Horizontal" Margin="2,2,2,2" HorizontalAlignment="Center">
                <extToolkit:WatermarkTextBox Name="txtAcadAdv" Watermark="Acad Adv" Width="125" Margin="2" Text="{Binding Path=Adv.AcadAdv}"/>
                <extToolkit:WatermarkTextBox Name="txtProgAdv" Watermark="Prog Adv" Width="125" Margin="2" Text="{Binding Path=Adv.ProgAdv}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="2,2,2,2" HorizontalAlignment="Center">
                <extToolkit:WatermarkTextBox Name="txtPortAdv" Watermark="Port Adv" Width="125" Margin="2" Text="{Binding Path=Adv.PortAdv}"/>
                <extToolkit:WatermarkTextBox Name="txtEleTws" Watermark="Ele Tws" Width="125" Margin="2" Text="{Binding Path=Adv.EleTws}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="2,2,2,2" HorizontalAlignment="Center">
                <extToolkit:WatermarkTextBox Name="txtMatTws" Watermark="Mat Tws" Width="125" Margin="2" Text="{Binding Path=Adv.MatTws}"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="addAdvisor">
        <Button HorizontalAlignment="Center" VerticalAlignment="Center" Margin="2" Name="btnAddAdvisor" Click="ButtonClick" Content="Add Advisor"/>
    </DataTemplate> 
```

初始化组框上更改的内容

```
grpAdv.ContentTemplateSelector = _advisorSelector; 
```

最后是选择器代码

```
private readonly StudentWin _win;

    public  AdvisorDataTemplateSelector(StudentWin win)
    {
        _win = win;
    }

    public override System.Windows.DataTemplate SelectTemplate(object item, System.Windows.DependencyObject container)
    {
        var sp = item as StackPanel;
        var adv = sp.DataContext as Advisor;

        if (adv == null)
            return _win.FindResource("addAdvisor") as DataTemplate;

        return _win.FindResource("advisorTemplate") as DataTemplate;
    } 
```

这是我的导航代码片段

```
case "btnNext":
                    {
                        if(_view.CurrentPosition < _view.Count - 1)
                        {
                            CheckForUnusedReferences(_view.GetItemAt(_view.CurrentPosition) as Student);
                            _view.MoveCurrentToNext();
                            CheckForNullReferences(_view.CurrentPosition);
                            grpAdv.ApplyTemplate();
                        }
                    } 
```

这两种附加方法是检查学生的关系是否为空，他们将为我创建它并将其添加到数据上下文中，否则实体框架将不会保存更改。上面的数据模板基本上可以帮助我解决在尝试创建新学生时没有 studentId 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:48:32.957

我使用以下方法强制重新应用 DataTemplateSelector。

从 ObservableCollection 派生并添加一个通过 NotifyCollectionChangedAction.Reset 引发 NotifyCollectionChangedEventArgs 的方法。

```
public class MyThingCollection : ObservableCollection<MyThing>
{
    public void RaiseResetCollection()
    {
        OnCollectionChanged(new 
            NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }
} 
```

您的视图模型公开了这种类型的实例，并且您的 ItemsControl 绑定到该实例。

```
public class MyViewModel : ... (view model base)
{
    public MyThingCollection Items{get; private set;}
}

<ItemsControl
     ItemsSource="{Binding Items}"
     ItemsTemplateSelector="{StaticResource MyTemplateSelector}"
     ... 
```

当您需要重新应用 DataTemplateSelector 时，请在集合上调用 RaiseResetCollection。

我通常像这样使用 DataTemplateSelector

```
public class MyTemplateSelector : DataTemplateSelector
{
    public DataTemplate Template1 { get; set; }
    public DataTemplate Template2 { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        ... return Template1 or Template2 depending on item
    }
    ...
}

<DataTemplate x:Key="MyTemplate1" DataType="{x:Type MyType1}">
    ...
</DateTemplate>

<DataTemplate x:Key="MyTemplate2" DataType="{x:Type MyType2}">
    ...
</DateTemplate>

<local:MyTemplateSelector 
    x:Key="MyTemplateSelector" 
    Template1="{StaticResource MyTemplate1}"
    Template2="{StaticResource MyTemplate2}"
/> 
```

# wcf - 使用 netMsmqBinding 使 WCF 通道出错

> ID：10741549
> 
> 赞同：0
> 
> 时间：2012-05-24T16:27:03.010
> 
> 标签：wcf, netmsmqbinding

我有一个通过 netMsmqBinding (MSMQ3) 的 WCF 服务。服务代码不会在 WCF 事务控制下运行，因为服务中的某些操作没有事务能力并且无法回滚。据我了解，这意味着我没有得到任何有毒消息处理等的好处。所以一旦我的服务代码被调用，消息就永远不在队列中。

如果我的服务出现严重故障，我想防止进一步的消息丢失。所以我记录了刚刚失败的消息，然后引发了一个普通的异常（不是 FaultException）。与任何其他 WCF 服务绑定一样，我希望这会使通道（在本例中为 MSMQ 通道调度程序）发生故障，并且不会从队列中接收更多消息。

但我似乎无法让这种行为（没有双关语）起作用。无论我的服务代码是否引发异常，我都会继续将消息路由到服务。

我在这里错过了什么吗？netMsmqBinding 是否像 http 绑定一样为每个请求创建一个新通道？如果是这样，那么任何关于如何解决我的问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:04:48.650

> 服务代码不在 WCF 事务控制下运行，因为服务中的某些操作不具备事务能力并且无法回滚。据我了解，这意味着我没有得到任何有毒消息处理等的好处。

事务控制在某种程度上取决于您。将 a 包裹`TransactionScope`在您想要事务性的代码周围。这样可以保证它是事务性的。如果您实现自定义代码，这是队列上的一个属性。或者，您可以通过每个队列单独启用 MSMQ 上的事务。

毒物队列不是自动的，实际上完全是一个单独的队列。当您检测到无效的消息并写入时，您写入它。

> 所以我记录了刚刚失败的消息，然后引发了一个普通的异常（不是 FaultException）。

从 MSMQ 接收时引发异常不起作用。它没有什么可以抛出异常的。这就是毒物队列发挥作用的地方。您写入毒物队列以指示发生了错误。

> 我在这里错过了什么吗？netMsmqBinding 是否像 http 绑定一样为每个请求创建一个新通道？

netMsmqBinding 确实为在服务器端*读取*的每条消息生成一个新线程，但写入 MSMQ 不会。每个通道生成一个单独的线程。

# c++ - 使用 Eclipse 在 C++ 中简单的 hello world 得到错误 bin bash 权限被拒绝

> ID：10741550
> 
> 赞同：0
> 
> 时间：2012-05-24T16:27:06.350
> 
> 标签：c++, eclipse, compilation

我正在做一个用 c++ 编程的项目，不要问为什么，我必须在 linux 上工作。

我已经安装了 eclipse 3.7.2，我假设最新版本是最新的。

在我的无知中，当我意识到我什至无法编译时，我开始着手这个项目。所以我从一个简单的 hello world 开始，看看发生了什么。创建新项目，完成，新源文件 cpp，完成，编写一个 hello world，完成。

```
#include <iostream>

using namespace std;

int main() {

cout << "hello world :( ....." << endl;
return 0;

} 
```

这是代码。然而，当我在编译后运行它时，我得到了这个错误：

```
/bin/bash: /media/....../myprojectname: Permission denied
/bin/bash: line 0: exec: /media/....../myprojectname/Debug/myprojectname: cannot execute: Permission denied 
```

我已经对此进行了研究，但我并没有真正的经验，更像是大学知识，但是我读到的所有关于它的线程都建议尝试使用 makefile 进行编译（我对此一无所知，而 eclipse 就在那里) 尽管我读到的内容并没有解决它。

我在 eclipse for windows 上这样做从来没有遇到过问题，这是我在 linux 上的第一次尝试。对于我也读过的内容，它似乎与 linux 权限有关......但又不是我最大的优势。

我想我的问题是，如何使用 c++ 编写一个简单的 hello world 并用作编辑器 eclipse，然后让程序运行。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:49:08.337

该文件系统可能是[`mount(8)`](http://www.manpagez.com/man/8/mount/)带有选项的 -ed `noexec`，因此无论您在可执行文件上设置什么权限位，都无法运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T20:55:08.163

Hi, I had the same problem, but in my case I was installing ubuntu with windows.

My problem was that the drive which contained the workspace for eclipse gave me a permission denied message.

This was because it was an NTFS drive.

I solved it by converting it into ext3 ... and later, if you want, it's possible to convert it from ext3 to ext4.

The steps:

1.  Check what's the complete specific name of the drive:

    `# sudo blkid`

    `/dev/sd7 mydrive 105GB`

2.  change the FileSystem & drive's label:

    `# mkfs.ext3 -L mydrive /dev/sdaX` (use -L for volume label)

3.  [Optional] Convert it to ext4 using `tune2fs`.

I hope that helps :)

# mysql - MySQL对大数据集的低效查询

> ID：10741552
> 
> 赞同：4
> 
> 时间：2012-05-24T16:27:15.657
> 
> 标签：mysql, bigdata

我们有一个看起来像这样的 MySQL 表（删除了无关紧要的列）：

```
CREATE TABLE `my_data` (
  `auto_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_ts` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `data_txt` varchar(256) CHARACTER SET utf8 NOT NULL,
  `issued_ts` timestamp NULL DEFAULT NULL,
  `account_id` int(11) NOT NULL,
  PRIMARY KEY (`auto_id`),
  KEY `account_issued_idx` (`account_id`,`issued_ts`),
  KEY `account_issued_created_idx` (`account_id`,`issued_ts`,`created_ts`),
  KEY `account_created_idx` (`account_id`,`created_ts`),
  KEY `issued_idx` (`issued_ts`)
) ENGINE=InnoDB; 
```

表中有大约 900M 行，其中一个 account_id 占这些行的 65% 以上。我被要求为 created_ts 和 issue_ts 编写跨日期范围的查询，这些查询依赖于 account_id，它似乎对自动增量键具有 1:1 的功能依赖性。

一个典型的查询如下所示：

```
SELECT * 
FROM my_data 
WHERE account_id = 1 AND 
      created_ts > TIMESTAMP('2012-01-01') AND 
      created_ts <= TIMESTAMP('2012-01-21') 
ORDER BY created_ts DESC LIMIT 100; 
```

查询的解释显示：

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: my_data
         type: range
possible_keys: account_issued_idx, account_issued_created_idx, account_created_idx,
      key: account_issued_created_idx
  key_len: 8
      ref: NULL
     rows: 365314721
    Extra: Using where 
```

问题是查询花费的时间太长并且最终被杀死。我已经让它运行了几次，它导致数据库主机停机，因为操作系统（Linux）用完了交换空间。

我反复研究过这个问题，并试图将查询分解为不相关的子查询、强制索引、使用显式 SELECT 子句并限制日期范围的窗口，但结果是一样的：性能差（太慢）并且对宿主过于繁重（总是死亡）。

我的问题是：

1.  是否可以制定查询以将数据分割成日期范围并在实时调用中可接受地执行？( < 1s)

2.  为了获得我被要求获得的性能，我是否缺少或可能有帮助的优化？

欢迎任何其他建议、提示或想法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:41:10.627

似乎mysql对此查询使用了错误的索引，尝试强制另一个：

```
SELECT * 
FROM my_data FORCE INDEX (`account_created_idx`)
WHERE account_id = 1 AND 
      created_ts > TIMESTAMP('2012-01-01') AND 
      created_ts <= TIMESTAMP('2012-01-21') 
ORDER BY created_ts DESC LIMIT 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T00:28:44.440

这个问题多年来一直在讨论。不过，有一个很好的答案。

你奋斗的关键在于你把那些*无关紧要的栏目去掉。* 当你这样做时，没有任何无关紧要的列`SELECT * .... ORDER BY X DESC LIMIT N`。那是因为必须拾取和洗牌整个结果集。当您询问复杂表中的所有列时，会产生大量数据。

您有一个很好的`WHERE`子句索引。`ORDER BY`如果它没有在条款中说明，这对条款也有好处`DESC`。

您想要的是延迟加入。首先检索您需要的行的 ID。

```
 SELECT auto_id
          FROM my_data
         WHERE account_id = 1 AND 
              created_ts > TIMESTAMP('2012-01-01') AND 
              created_ts <= TIMESTAMP('2012-01-21') 
     ORDER BY created_ts DESC
        LIMIT 100 
```

这将为您提供所需列的`auto_id`值列表。要订购这个列表，MySql 只需要打乱 id 和 timestamp 值。要处理的数据要少得多。

然后您`JOIN`将 ID 列表添加到主表并获取结果。

```
SELECT a.*
  FROM my_data a
  JOIN (
             SELECT auto_id
               FROM my_data
              WHERE account_id = 1 AND 
                    created_ts > TIMESTAMP('2012-01-01') AND 
                    created_ts <= TIMESTAMP('2012-01-21') 
           ORDER BY created_ts DESC
              LIMIT 100
       ) b ON a.auto_id = b.auto_id
 ORDER BY a.created_ts DESC 
```

尝试这个。它可能会为您节省很多时间。

如果您*先验地*知道auto_id 和 created_ts 都是单调递增的，那么您可以做得更好。您的子查询可以包含

```
 ORDER BY auto_id DESC
         LIMIT 100 
```

这将减少您进一步洗牌所需的数据。

专业提示：避免`SELECT *`在生产系统中使用；而是枚举您实际需要的列。这有很多原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:14:17.667

试试 MariaDB（或 MySQL 5.6），因为他们的 Optimizer 可以做得更快。我已经使用了几个月，对于像你这样的一些查询，它的速度提高了 1000%。

您需要索引条件下推： http: [//kb.askmonty.org/en/index-condition-pushdown/](http://kb.askmonty.org/en/index-condition-pushdown/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T17:24:43.420

不要在比较中使用函数。计算时间戳并使用计算值，否则不能使用索引来比较created_ts，它是从结果集中过滤百万行的字段

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T17:30:13.517

不知道为什么 MySQL 使用（显然）不是最好的索引。除了强制索引，你可以试试`EXPLAIN`这个变体的计划：

```
SELECT * 
FROM my_data 
WHERE account_id = 1 AND 
      created_ts > TIMESTAMP('2012-01-01') AND 
      created_ts <= TIMESTAMP('2012-01-21') 
ORDER BY account_id
       , created_ts DESC 
LIMIT 100; 
```

# jquery - 从 ajax-chosen 插件中获取选定的选项

> ID：10741554
> 
> 赞同：0
> 
> 时间：2012-05-24T16:27:22.713
> 
> 标签：jquery, select, option, jquery-chosen

我试图弄清楚如何从[ajax-Chosen](https://github.com/meltingice/ajax-chosen)插件中获取选定的选项，但没有运气。

这是我的html：

```
<select multiple='multiple' class='chzn-select' data-placeholder='users'>
  <option value='0' selected>username1</option>
  <option value='1' selected>username2</option>
</select> 
```

这是 JS 部分：

```
$(".chzn-select").ajaxChosen({
  method: 'GET',
  url: 'users.php',
  dataType: 'json',
  minTermLength: 3,
  afterTypeDelay: 300
}, function (data) {
  var terms = {};

  $.each(data, function (i, val) {
     terms[i] = val;
  });

  return terms;
}); 
```

这一切都很好。但是当我删除一个选项“username2”时，选择字段不会更新。因此，当我想从列表中获取所有选定的用户时，我得到了错误的列表——在这种情况下，即使从列表中删除了一个值，我也总是得到两个值。

我也尝试过触发更新但没有运气：

```
$(".chzn-select").trigger("liszt:updated"); 
```

有没有人建议如何从选择列表中获取真实值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:37:57.800

感谢[stof](https://github.com/stof)刚刚找到了解决方案：

而不是`$(".chosen-select option").each();` 我这样做：`$(".chosen-select).val();`

# jquery - Jquery 调用父 div 来显示加载器

> ID：10741555
> 
> 赞同：0
> 
> 时间：2012-05-24T16:27:22.950
> 
> 标签：jquery, ajax

我有一系列来自 FOREACH 的具有相同类的 div。每个都包含一个表单和一个使用 jquery 的 ajax 调用。

提交表单时，我希望加载器仅出现在该 div 中，但如果使用下面的示例，它会出现在所有这些中，或者根本不出现。当然，我做错了什么，但不确定是什么。我有是这样的：

```
$('.form-approve').unbind('submit').submit(function () {

        var item = $(this).parent('div');

        item.next('.loading').show();

// etc. etc 
```

我确定如何在提交表单的 div 中显示加载程序。有人可以帮忙吗？

该页面包含以下 html：

```
 <?php foreach ($this->records as $r):?>
 <div class="requests">
 // show a name etc.
 <div class="log"> // this div is shown using a toggle
<form class="form-approve" etc.>
....
</form>
<div class="loader"></div>
</div>
<? endif; ?> 
```

以上当然是在一个页面中重复了很多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:37:54.107

这应该做的工作：

```
$('.form-approve').unbind('submit').submit(function () {
        $(this).next('div.loader').show();
}); 
```

`div`您要显示的位于表单本身旁边，因此应`$(this).next('div.loader')`正确定位它 - 无需通过父级检索它

编辑。只是为了确保你应该有每个表单的代码，就像这样

```
$('.form-approve').each(function() {
     $(this).unbind('submit').submit(function () {
         $(this).next('div.loader').show();
     });
}) 
```

# objective-c - UIModalPresentationFullScreen 旋转问题

> ID：10741556
> 
> 赞同：0
> 
> 时间：2012-05-24T16:27:27.300
> 
> 标签：objective-c, ios, ipad

我正在尝试创建一个全屏显示图像并且可以滑动的视图，这里的这个视图是从另一个类调用的，通过 UIModalPresentationFullScreen 呈现，屏幕大小由 UIScreen mainScreen.bounds 确定。我尝试使用调用者的视图，但那里有一个标签栏，在此视图中不需要。从纵向开始时，效果很好，但是从横向调用时，它是空白的。最后，当它旋转到纵向时，我们得到了这个宝石：

![人像问题](../Images/8b9919ebb6166465f0a05250b3ca2843.png)

我不知道是什么原因造成的，因为 IB 中的所有视图都设置为拉伸到屏幕大小并粘在两侧。

这是调用者代码：

```
 MyImageViewController *view = [[MyImageViewController alloc]initWithNibName:@"MyImageViewController"bundle:[NSBundle mainBundle]];
            view.modalPresentationStyle = UIModalPresentationFullScreen;
            view.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
            [self presentModalViewController:view animated:YES];
            view.view.superview.bounds = [[UIScreen mainScreen] bounds]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:48:12.673

为了让模态视图全屏显示而不引起这个视图，我最终做的是使用不同的演示风格，并确保宽度和高度都设置为灵活。

```
[view.view setAutoresizingMask:UIViewAutoresizingFlexibleWidth| 
     UIViewAutoresizingFlexibleHeight];
[view setModalPresentationStyle:UIModalPresentationCurrentContext]; 
```

现在视图在全屏模式下工作正常。

# asp.net-mvc - 由于大文件上传导致连接重置，但配置应允许上传

> ID：10741568
> 
> 赞同：1
> 
> 时间：2012-05-24T16:28:15.803
> 
> 标签：asp.net-mvc, file-upload, connection-reset

我尝试在我的 MVC 项目中上传大于 4 兆的文件时出错。上传适用于较小的文件。在网上看了一下，看到应该加

`<httpRuntime maxRequestLength="200000" executionTimeout="240"/>`

到我的网络配置，在系统网络中，但这没有效果。连接仍在重置。还有其他我可能错过的需要更改的配置吗？该文件为 10 兆，因此请求长度足够大。

请求不会超时，连接会立即重置。

我也尝试添加

```
<security >
  <requestFiltering>
    <requestLimits maxAllowedContentLength="1024000000" />
  </requestFiltering>
</security>` 
```

到我的网络配置中的网络服务器部分，但这也没有效果。Web 配置是位于正确项目中的配置，并且连接永远不会到达位于我的控制器中的断点，这让我相信这一定是一个配置问题，其中包含太大文件的 http 请求被拒绝。如果是这样，为什么 maxrequestlength 属性不能解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:13:13.120

只是 IIS 7.x 的更新

您需要为较新版本的 IIS 添加以下内容：

```
<security>
    <requestFiltering>
          <requestLimits maxUrl="32767" maxQueryString="32767" 
            maxAllowedContentLength="2147483648"/>
    </requestFiltering>
</security> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:49:15.290

：/。发现了问题。我一直在将 maxRequestLength 添加到错误的网络配置中。视图中有一个 webconfig 文件，整个项目中有一个。我把它放在视图中。甚至不知道有2个，还有几个人错过了。将两个名称相同且用途相似的文件放入项目中的糟糕设计，仅由一层文件深度分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T08:46:54.050

更新 IIS 10x，将以下内容添加到站点的 web.config：

```
 <requestFiltering>
    <requestLimits maxAllowedContentLength="500000000"></requestLimits>
  </requestFiltering> 
```

问题直接解决了。按照这里的步骤找到这个：http: [//d4dotnet.blogspot.com/2011/11/there-was-no-endpoint-listening-at.html](http://d4dotnet.blogspot.com/2011/11/there-was-no-endpoint-listening-at.html)

步骤 1 和 3 会导致服务器故障，直到被删除，可能它们要么特定于 IIS 6 和 7，要么属于另一个配置文件。

# javascript - jquery ajax，getJSON 给出 null

> ID：10741570
> 
> 赞同：1
> 
> 时间：2012-05-24T16:28:29.377
> 
> 标签：javascript, jquery, html, ajax

我有一个函数，我想从 php 文件中获取值：

```
var phrases = null;
function setPhrases(lang) {
    $.getJSON(locationHostname()+'json?json=lang&lang='+lang,
            function(json) {
        phrases = json;
        alert( 1 + ' ' + phrases);//phrases = [object Object]
    });
    alert( 2 + ' ' + phrases);//phrases = null
}
setPhrases('en');
alert(3+' '+phrases);//phrases = null 
```

如何正确设置它，那个 alert(3+' '+phrases); 得到一个对象而不是null？我想使用例如从getJSOn 返回值的函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:30:08.963

`$.getJSON`是异步的，这就是你得到未定义的原因：`alerts`在 ajax 调用仍在运行时执行

您可以在成功事件上调用函数，传递`json`as 参数，例如

```
function setPhrases(lang) {
    $.getJSON(locationHostname()+'json?json=lang&lang='+lang,
        function(json) {
            continueProcessing(json)
        }
    );
}

function continueProcessing(obj) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:31:01.387

你不能。 `.getJSON`异步运行，除非速度快如闪电，否则`alert(2)`and`alert(3)`将在完成之前运行。您需要将`alert(2)`and`alert(3)`作为成功功能的一部分，或者使用`Deferred`.

编辑：我想因为它是电子的，所以它可能*快如*闪电，即使这样还不够！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:31:09.437

我`phrases`认为`alert()`由于`$.getJSON()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:33:36.297

你应该使用回调方法。您的 getJSON 方法存在异步问题。

例子：

```
function setPhrases(lang, callback) {
    $.getJSON(locationHostname()+'json?json=lang&lang='+lang,
            function(json) {

        callback(json);
    });
}

   setPhrases('en',function(result) {

    alert(result);

}); 
```

# python - 使用Python的stat函数高效获取owner、group等权限

> ID：10741580
> 
> 赞同：6
> 
> 时间：2012-05-24T16:29:04.673
> 
> 标签：python, permissions, stat, octal

# 问题：

如何有效地使用[stat](http://docs.python.org/library/stat.html)函数来获得有意义的文件权限（用户、组和其他）。

# 细节：

我正在查询文件权限，如下所示：

```
statInfo = os.stat
permissions = stat.S_IMODE ( os.stat ( 'fooBar.txt' ).st_mode ) 
```

这将返回十进制形式的权限。所以如果`fooBar.txt`有八进制文件权限`0700`，这里`permissions`设置为十进制值`448`。我想要的是为每个权限设置 9 个变量（`ownerRead`, `ownerWright`, `ownerExecute`, `groupRead`,...）如果我要这样做，我会使用这样的蛮力方法：

```
statInfo = os.stat
permissions = stat.S_IMODE ( os.stat ( 'fooBar.txt' ).st_mode )
octPermissions = oct ( permissions )

ownerRead = octPermissions [1] >= 4
ownerWrite = octPermissions [1] == 2 or octPermissions [1] == 6 or octPermissions [1] == 3 or 
ownerExecute = octPermissions [1] == 1 or octPermissions [1] == 5 or octPermissions [1] == 3 
```

有没有更有效的方法来做到这一点而不必转换为八进制，因为这个函数会被调用很多次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:35:34.287

您可以使用按位 AND 运算符：

```
m = os.stat('fooBar.txt').st_mode
otherExec  = bool(m & 0001)
otherWrite = bool(m & 0002)
otherRead  = bool(m & 0004)
groupExec  = bool(m & 0010)
groupWrite = bool(m & 0020)
groupRead  = bool(m & 0040)
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T16:43:36.600

[`stat`使用按位 AND 和模块](http://docs.python.org/library/stat.html#stat.S_ISUID)中的常量：

```
import stat
import os

mode = os.stat('fooBar.txt').st_mode

otherRead  = bool(mode & stat.S_IROTH)
otherWrite = bool(mode & stat.S_IWOTH)
otherExec  = bool(mode & stat.S_IXOTH)
... 
```

更具可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-24T01:12:19.650

我把它放在一个获得 UNIX 权限的函数中：

```
import os
from stat import (S_IRUSR, S_IWUSR, S_IXUSR, S_IRGRP, S_IWGRP,
                  S_IXGRP, S_IROTH, S_IWOTH, S_IXOTH)

def bit2int(bit):
    return int(oct(bit))

def convert_st_mode(st_mode):
    bits = (S_IRUSR, S_IWUSR, S_IXUSR, S_IRGRP, S_IWGRP, S_IXGRP,
            S_IROTH, S_IWOTH, S_IXOTH)
    mode = "%03d" % sum(int(bool(st_mode & bit)) * bit2int(bit) for bit in bits)
    return mode

def get_unix_permissions(pth):
    mode = convert_st_mode(os.stat(pth).st_mode)
    return mode 
```

用法：

```
mode = get_unix_permissions("somefile")
print(mode) 
```

# python - 在 QGraphicsItemGroup 中编辑 QGraphicsTextItem

> ID：10741584
> 
> 赞同：2
> 
> 时间：2012-05-24T16:29:20.600
> 
> 标签：python, qt, pyqt4, qgraphicsview, qgraphicstextitem

我想要一个 python 应用程序，它显示一堆小肖像和它下面的名字。像那样： ![这是应用程序的样子](../Images/1fce1180a2f574baba88101abb3fa3fd.png)

它们应该是可移动和可编辑的（通过双击文本）。

我正在使用 PyQt4，所以我发现，在画布上使用 a`QGraphicsView`和 a是最简单的。`QGraphicsScene`所以我将一个这样的子类化`QGraphicsItemGroup`：

```
from PyQt4 import QtCore, QtGui
class Speaker(QtGui.QGraphicsItemGroup):
    def __init__(self, name, parent=None):
        QtGui.QGraphicsItemGroup.__init__(self, parent)

        self.setFlag(QtGui.QGraphicsItem.ItemIsMovable)
        self.text = QtGui.QGraphicsTextItem(name)
        self.text.setTextInteractionFlags(QtCore.Qt.TextEditorInteraction)
        self.addToGroup(self.text)
        self.portrait = QtGui.QGraphicsPixmapItem(QtGui.QPixmap("portrait.png"))
        self.portrait.setY(-35)
        self.addToGroup(self.portrait)

    def keyPressEvent(self, QKeyEvent):
        # Forwarding KeyPress events to the text to enable text editing
        self.text.keyPressEvent(QKeyEvent) 
```

但是有一些问题：

*   文本编辑由单击触发，但我想要双击（可能与[this](https://stackoverflow.com/questions/10235411/qgraphicstextitem-editable-only-after-double-mouse-click)重复）。
*   您不能使用鼠标选择文本或移动光标，因为整个组都会被移动。
*   如果停止编辑，光标不会消失。（虽然我知道该怎么做，但如果我找到激活和停用编辑模式的方法）

我试图捕捉双击信号并切换到将所有鼠标事件转发到文本的编辑模式。但是我无法通过双击*激活编辑过程，而且我无法保留通过单击其他位置来结束编辑的行为。*

所以我希望有人能帮助我。知道如何手动激活和停用`QGraphicsTextItem`. 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:34:10.413

可能你应该调用 QGraphicsItemGroup::setHandlesChildEvents(false)。

[请参阅带有 QGraphicsItemGroup](https://stackoverflow.com/questions/3021441/events-with-qgraphicsitemgroup)的 SO 问题事件

# jquery - 未捕获的类型错误：对象函数（arg1，arg2）没有方法“应用”

> ID：10741588
> 
> 赞同：1
> 
> 时间：2012-05-24T16:29:56.333
> 
> 标签：jquery, click, clone

我想将一个点击事件从一个元素复制到另一个我正在按照不工作的方式进行

```
 var arr = $("#engagement_box_content_generic_mention>.data_box>.load_mentions_data_box");
     $.each ( arr , function( key , value){

            console.log( $(this).attr("onclick") );
            if ( key == 0 ) {
                $("#abc").click( $(this).attr('onclick') );
            }
}); 
```

console.log 给了我这样的 print_1317(1317, 201205, 24, 11, 'no');

但是当我点击应用的元素 abc 时，它给出了错误

```
 Uncaught TypeError: Object print_1317(1317, 201205, 24, 11, 'no'); has no method 'apply' 
```

提前致谢

# javascript - 如何使用 HTML5 使某些元素可拖动和其他可放置？

> ID：10741593
> 
> 赞同：5
> 
> 时间：2012-05-24T16:30:08.800
> 
> 标签：javascript, html, jquery-ui, draggable, droppable

我想拖动一些元素并将其放入其他一些容器中。以下示例适用于可拖动和可放置的对象

[http://jsfiddle.net/AwCuM/](http://jsfiddle.net/AwCuM/)

但是，当我尝试使其中一些可拖动而其他仅可放置时，它不起作用

[http://jsfiddle.net/4adJk/10/](http://jsfiddle.net/4adJk/10/)

我知道如何使用 jQueryUI 来做到这一点，但我想使用纯 HTML5 来做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:49:40.063

查看[Mozilla 的 HTML 文档](https://developer.mozilla.org/En/DragDrop/Drag_Operations#section_6) ，我发现我需要处理该`dragover`事件。完整的解决方案可以在以下位置查看：

[http://jsfiddle.net/Dema8/7/](http://jsfiddle.net/Dema8/7/)

# jquery - Rails - 遍历表格元素/动态更新图形

> ID：10741595
> 
> 赞同：0
> 
> 时间：2012-05-24T16:30:11.123
> 
> 标签：jquery, ruby-on-rails, ajax, dynamic, selection

我有一个关于显示和更新 Rails 模型中的许多元素以响应视图中的动态选择标准的问题。

我正在创建一个应用程序，它允许您将一系列“事件”存储的“历史”作为 ActiveRecord 关系单步执行。最初 - 我希望用户选择事件将被限制在其中的日期范围。然后，该页面应加载从日期范围内的第一个事件开始的表格（或仅表格的一部分）。

然后用户应该能够使用左/右按钮来逐步浏览事件表，一系列业务数据将动态更新以响应我们在表中遇到的事件，即在逐步浏览前 5 个事件后，总收入数字将是这 5 个事件的收入总和。

理想情况下，我还希望能够在 Google Visualization 上显示此信息...

有没有人能指出我应该如何去做的正确方向？我了解控制器端处理以从数据库表中获得正确的选择，但我不确定我应该如何使用 Ajax 处理请求以及我应该多久需要来自客户端的新请求。

任何意见，将不胜感激。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:42:05.007

AJAX 请求的处理方式与常规 HTTP 请求相同，您只需确保设置了正确的路由。主要区别在于您通常会渲染一个`.js.erb`文件，而不是一个文件`.html.erb`（假设您使用的是 ERB）。

Web 上有很多关于此的材料，最好的起点之一是 Rails 指南 - [http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)。

PS：请注意，您的问题非常广泛，因此您不太可能得到很好的答案。

# asp.net - 在单个页面上使用多个 UpdatePanel，而不会相互干扰

> ID：10741597
> 
> 赞同：2
> 
> 时间：2012-05-24T16:30:16.050
> 
> 标签：asp.net

似乎当多个 UpdatePanels 在一个页面上时，只要一个 asyncPostBack 发生在一个页面上，所有其他人都会重新加载其 html。有没有解决的办法？

*例子*

**例子.aspx**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server"> 
    <ContentTemplate>
        <div style="border: 1px solid black;">
            <asp:TextBox runat="server" ID="txtTEST1" />
            <asp:Label runat="server" ID="lblTEST1" />
            <asp:Button runat="server" ID="btnTEST1" Text="AsyncPostBack1" />
            <div onclick="this.innerHTML='Wooo!'">Click Me - UpdatePanel1</div>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>

<div onclick="this.innerHTML='Wooo!'" style="padding: 1em;">Click Me. I'm not part of an Update Panel</div>

<asp:UpdatePanel ID="UpdatePanel2" runat="server"> 
    <ContentTemplate>
        <div style="border: 1px solid black;">
            <asp:TextBox runat="server" ID="TextBox1" />
            <asp:Label runat="server" ID="Label1" />
            <asp:Button runat="server" ID="Button1" Text="AsyncPostBack2" />
            <div onclick="this.innerHTML='Wooo!'">Click Me - UpdatePanel2</div>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

**例子.aspx.vb**

```
Protected Sub btnTEST1_Click(sender As Object, e As EventArgs) Handles btnTEST1.Click
    lblTEST1.Text = "Refreshed at " & DateTime.Now.ToString()
End Sub

Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Label1.Text = "Refreshed at " & DateTime.Now.ToString()
End Sub 
```

**测试问题**

1.  单击带有“Click Me”文本的所有 3 个 div，以便在 UpdatePanel 内部和外部更改 HTML。
2.  单击标有“AsyncPostBack”的按钮之一。无论单击哪一个，两个 UpdatePanel 都将重新呈现和替换其 HTML，正如 UpdatePanel 中的 2 个 div 重置为原始文本所看到的那样。

**所以我问，是否有可能在同一页面上有多个 UpdatePanel，它们不会在其中一个发生 asyncPostBack 事件时相互重新呈现。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:36:01.847

是的

1.  设置更新模式=条件
2.  提供将触发更新的触发器。这是一个示例的链接。（谷歌上的#1 结果）[http://ajax.net-tutorials.com/controls/updatepanel-control/](http://ajax.net-tutorials.com/controls/updatepanel-control/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:40:01.867

尝试添加模式以更新面板标签。如果模式未给出默认模式，则始终为默认模式。如果 UpdateMode 属性为 Always，则 UpdatePanel 控件的内容会在每次来自页面上任何位置的回发时更新。[有关 UpdateMode 的 Microsoft 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)

```
<asp:UpdatePanel ID="BugsListUpdatePanel" runat="server" UpdateMode="Conditional"> 
```

# objective-c - CTFrameGetVisibleStringRange() 返回 0

> ID：10741598
> 
> 赞同：0
> 
> 时间：2012-05-24T16:30:16.893
> 
> 标签：objective-c, ios, core-text, ctframe

我有这段代码在读取 NSAttributedString 时生成 viewController 数组。在第一个循环之后，即使有更多文本要显示，函数 CTFrameGetVisibleStringRange() 也会返回 0。

```
- (void)buildFrames
{
/*here we do some setup - define the x & y offsets and create an empty frames array */
    float frameXOffset = 20; 
    float frameYOffset = 20;

    self.frames = [NSMutableArray array];

    //buildFrames continues by creating a path and a frame for the view's bounds (offset slightly so we have a margin).
    CGMutablePathRef path = CGPathCreateMutable(); 
    // create an insect rect for drawing
    CGRect textFrame = CGRectInset(self.bounds, frameXOffset, frameYOffset); 
    CGPathAddRect(path, NULL, textFrame );// add it to the path

    // Create a frame setter with my attributed String
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attributedString);

    //This section declares textPos, which will hold the current position in the text. 
    //It also declares columnIndex, which will count how many columns are already created.
    int textPos = 0; 
    int columnIndex = 0;

    while (textPos < [attributedString length]) { 
        //The while loop here runs until we've reached the end of the text. Inside the loop we create a column bounds: colRect is a CGRect which depending on columnIndex holds the origin and size of the current column. Note that we are building columns continuously to the right (not across and then down).

        CGPoint colOffset = CGPointMake(frameXOffset , frameYOffset);
        CGRect columnRect = CGRectMake(0, 0 , textFrame.size.width, textFrame.size.height);

        CGMutablePathRef path = CGPathCreateMutable();
        CGPathAddRect(path, NULL, colRect);

        CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(textPos, 0), path, NULL);
        CFRange frameRange = CTFrameGetVisibleStringRange(frame); 

       // MY CUSTOM UIVIEW
        LSCTView* content = [[[LSCTView alloc] initWithFrame: CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height)] autorelease];
        content.backgroundColor = [UIColor clearColor];
        content.frame = CGRectMake(colOffset.x, colOffset.y, columnRect.size.width, columnRect.size.height) ;

    /************* CREATE A NEW VIEW CONTROLLER WITH view=content *********************/

        textPos += frameRange.length;

        CFRelease(path);

        columnIndex++;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:22:56.863

您是否更改了属性字符串的对齐方式？我遇到了同样的问题，发现在某些情况下，当文本对齐设置为 kCTJustifiedTextAlignment 时，它应该适用于其他类型。

# python - 在 Python 脚本中运行命令行

> ID：10741600
> 
> 赞同：19
> 
> 时间：2012-05-24T16:30:19.227
> 
> 标签：python, windows, cmd

所以我有一堆别名和命令行提示程序，我的主程序通过在 cmd.exe 中输入 b 来工作，然后是一些文件路径名等等。我将如何在我的 python 脚本中运行这些参数？这样它就可以模仿我在 cmd 中执行的操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-24T16:33:16.183

您应该使用[subprocess](http://docs.python.org/library/subprocess.html)模块。特别是，[subprocess.call](http://docs.python.org/library/subprocess.html#subprocess.call)将为您运行命令行程序。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-24T16:36:01.827

或者你可以使用

```
import os
os.system('your_command') 
```

例如：

```
import os
os.system('notepad') 
```

将在命令行后面启动记事本。

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T16:33:27.010

您可以使用[子流程执行此操作](http://docs.python.org/library/subprocess.html)

例如，下面的调用获取程序的输出并将其存储为字符串，使用`.call`将有助于调用它并进行更准确的控制使用`.Popen`

```
subprocess.check_output(["ipconfig"]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T20:50:46.623

查看[Sarge](http://sarge.readthedocs.org/en/latest/) -*子流程的包装器，旨在让任何需要通过 Python 代码与外部应用程序交互的人的生活更轻松。*和[Plumbum](http://plumbum.readthedocs.org/en/latest/index.html) -*一个小型但功能丰富的库，用于 Python 中的类似 shell 脚本的程序。*

# maven - 如何使用 wsdl2java 创建两个单独的 jar？

> ID：10741605
> 
> 赞同：1
> 
> 时间：2012-05-24T16:30:27.690
> 
> 标签：maven, jar, pom.xml, wsdl2java

我对 Maven 很陌生。我正在使用 wsdl2java 来获取 Java 文件，然后创建我需要的 jar 文件。问题是我的网址来自不同的来源，最终我需要有 4 个不同的 jar 文件。

到目前为止，我尝试创建前两个 jar 文件并稍后处理接下来的两个...所以我在“构建”块中创建了两个不同的“执行”块；每个“执行”块下载每个自己的 wsdl 文件，到目前为止一切顺利。以下插件：

org.codehaus.mojo axistools-maven-plugin

以这种方式工作：它首先编译所有生成的 Java 文件，然后从所有文件中生成 jar 文件，这意味着它只创建一个 jar 文件。

无论如何，我要求 wsdl2java 编译然后在每个“执行”块之后立即创建 jar 文件？我可以获得两个不同的 jar 文件，每个 jar 文件仅与我在那个“执行”块中下载的 wsdl 文件有关？

以下是 pom.xml。此时生成的 jar 文件由以下文件生成的 Java 文件组成：file1、file2、file3、file4 和 file5。

我想要一个 jar 来自：file1、file2 和 file3，另一个来自：file4 和 file5。

任何帮助将不胜感激。

```
<build>
<plugins>    
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>axistools-maven-plugin</artifactId>
    <version>1.4</version>        
    <dependencies>          
      <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.1</version>
      </dependency>
      <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1</version>
      </dependency>
    </dependencies>
    <executions>
      <execution>
      <id>prod</id>          
        <goals>
          <goal>wsdl2java</goal>
        </goals>
        <configuration>    

      <urls>
        <url>https://file1.svc?wsdl</url>
        <url>https://file2.svc?wsdl</url>
        <url>https://file3.svc?wsdl</url>                        
      </urls>

      <allElements>true</allElements>
      <wrapArrays>false</wrapArrays>
      <testCases>false</testCases>
      <serverSide>false</serverSide>
      <typeMappingVersion>1.2</typeMappingVersion>                      
    </configuration>
      </execution>

      <execution>
      <id>sandbox</id>
        <goals>
          <goal>wsdl2java</goal>
        </goals>
        <configuration>
        <sourceDirectory>${basedir}/wsdl</sourceDirectory>

    <useEmitter>true</useEmitter>        
<wsdlFiles>
    <wsdlFile>file4.wsdl</wsdlFile>
    <wsdlFile>file5.wsdl</wsdlFile>
</wsdlFiles>    

      <allElements>true</allElements>
      <wrapArrays>false</wrapArrays>
      <testCases>false</testCases>
      <serverSide>false</serverSide>
      <typeMappingVersion>1.2</typeMappingVersion>                             
    </configuration>
      </execution>          
    </executions>
</plugin>
</plugins>
</build> 
```

由于评论太长，我不得不编辑我的原始帖子......

谢谢回复。我确实尝试了您的解决方案。如您所知，“axistools-maven-plugin”内置了“maven-compiler-plugin”和“maven-jar-plugin”。它首先从指定的 url 下载所有 wsdl 文件。它创建不同的输出目录；但是，在编译阶段，它会尝试一次编译所有输出目录中的所有 Java 文件；因为有一些常见的 Java 文件。这些 wsdl 文件，它在编译时给出“重复类”错误。

我们可以定义自己的自定义“maven-compiler-plugin”和“maven-jar-plugin”块并添加“include”或“exclude”块让maven知道要编译哪些文件以及如何创建jar文件，但是由于“axistools-maven-plugin”首先运行它自己的“maven-compiler-plugin”，它首先尝试编译所有Java文件，但在查看我们的“maven-compiler-plugin”**之前**仍然给出“duplicate class”错误，并且“maven-jar-plugin”块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:03:46.010

一个想法：`<outputDirectory>`为您的每个axistools 插件执行定义，例如“classesProd”和“classesSandbox”。

然后使用多次执行`maven-jar-plugin`从这些文件构建 jars。每个 jar 插件执行都会指定一个`<classesDirectory>`对应于`<outputDirectory>`axistools 执行的。您可能希望为 jar 执行定义`<classifier>`或更改`<outputDirectory>`jar 执行，以便第二个 jar 不会覆盖第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T16:28:48.330

通过将 nsExcludes 添加到 wsdl2java 的配置部分，我能够绕过创建重复的 java 类。

```
<goals>
<goal>wsdl2java</goal>
</goals>
<configuration>
<nsExcludes>
  <nsExclude>http://lang.java</nsExclude>
  <nsExclude>http://rmi.java</nsExclude>
</nsExcludes>
... 
```

# powershell - 使用 PowerShell 远程复制文件

> ID：10741609
> 
> 赞同：108
> 
> 时间：2012-05-24T16:30:38.363
> 
> 标签：powershell, powershell-2.0

我正在编写一个要从服务器 A 运行的*PowerShell*脚本。我想连接到服务器 B 并将文件复制到服务器 A 作为备份。

如果这不能完成，那么我想从服务器 A 连接到服务器 B，并将文件复制到服务器 B 中的另一个目录。

我看到了[`Copy-Item`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Management/Copy-Item)命令，但我不知道如何给它一个计算机名。

我本以为我可以做类似的事情

```
Copy-Item -ComputerName ServerB -Path C:\Programs\temp\test.txt -Destination (not sure how it would know to use ServerB or ServerA) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2016-08-24T11:48:51.290

从**PowerShell 版本 5 开始**（包含在 Windows Server 2016 中，[可作为早期版本的 WMF 5 的一部分下载](https://www.microsoft.com/download/details.aspx?id=50395)），这可以通过远程处理实现。这样做的好处是，即使出于某种原因您无法访问共享，它也能正常工作。

为此，启动复制的本地会话必须安装 PowerShell 5 或更高版本。远程会话不需要*安装*PowerShell 5 - 它可以与低至 2 的 PowerShell 版本和低至 2008 R2 的 Windows Server 版本一起使用。^([1])

从服务器 A，创建到服务器 B 的会话：

```
$b = New-PSSession B 
```

然后，仍然来自 A：

```
Copy-Item -FromSession $b C:\Programs\temp\test.txt -Destination C:\Programs\temp\test.txt 
```

将项目复制到 B 是使用 完成的`-ToSession`。请注意，在这两种情况下都使用本地路径；您必须跟踪您所在的服务器。

* * *

[1]：当从只有 PowerShell 2 的远程服务器复制或复制到远程服务器时，请注意[PowerShell 5.1 中的这个错误](https://github.com/PowerShell/PowerShell/issues/2469)，在撰写本文时，这意味着递归文件复制不起作用`-ToSession`，显然复制不起作用全部与`-FromSession`.

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-05-24T18:48:34.177

只需使用管理共享在系统之间复制文件。这种方式要容易得多。

```
Copy-Item -Path \\serverb\c$\programs\temp\test.txt -Destination \\servera\c$\programs\temp\test.txt; 
```

通过使用 UNC 路径而不是本地文件系统路径，您可以帮助确保您的脚本可以从可以访问这些 UNC 路径的任何客户端系统执行。如果您使用本地文件系统路径，那么您正在逼着自己在特定计算机上运行脚本。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-05-24T17:11:40.127

使用`net use`或`New-PSDrive`创建新驱动器：

**New-PsDrive：**新建一个仅在 PowerShell 环境中可见的 PsDrive：

```
New-PSDrive -Name Y -PSProvider filesystem -Root \\ServerName\Share
Copy-Item BigFile Y:\BigFileCopy 
```

**网络使用：**创建一个在操作系统所有部分可见的新驱动器。

```
Net use y: \\ServerName\Share
Copy-Item BigFile Y:\BigFileCopy 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-06-20T04:59:33.223

万一远程文件需要您的凭据才能访问，您可以使用 cmdlet *New-Object生成一个**System.Net.WebClient*对象来“远程复制文件”，如下所示

 *```
$Source = "\\192.168.x.x\somefile.txt"
$Dest   = "C:\Users\user\somefile.txt"
$Username = "username"
$Password = "password"

$WebClient = New-Object System.Net.WebClient
$WebClient.Credentials = New-Object System.Net.NetworkCredential($Username, $Password)

$WebClient.DownloadFile($Source, $Dest) 
```

或者如果需要上传文件，可以使用 UploadFile：

```
$Dest = "\\192.168.x.x\somefile.txt"
$Source   = "C:\Users\user\somefile.txt"

$WebClient.UploadFile($Dest, $Source) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-20T09:55:33.030

**以上答案都不适合我**。**我不断收到此错误：**

 **```
Copy-Item : Access is denied
+ CategoryInfo          : PermissionDenied: (\\192.168.1.100\Shared\test.txt:String) [Copy-Item], UnauthorizedAccessException>   
+ FullyQualifiedErrorId : ItemExistsUnauthorizedAccessError,Microsoft.PowerShell.Commands.CopyItemCommand 
```

所以**这**为我做了：

```
netsh advfirewall firewall set rule group="File and Printer Sharing" new enable=yes 
```

然后从我的主机我的机器在运行框中我只是这样做了：

```
\\{IP address of nanoserver}\C$ 
```***

# c# - 中内连接抛出异常

> ID：10741610
> 
> 赞同：1
> 
> 时间：2012-05-24T16:30:38.950
> 
> 标签：c#, .net, linq

我不知道为什么这不起作用（引发内部异常）。有人可以帮忙吗？

```
 var flightCrew = from crew in crews
        medium inner join flight in flights on crew.Model equals flight.Model
        into schedule from flight in schedule.active() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:41:33.530

我不知道到底什么是中等内部连接。我想你的意思是左加入？尝试这个：

```
 var flightCrew = from crew in crews
                  join flight in flights on crew.Model equals flight.Model
                   into schedule from flight in schedule.DefaultIfEmpty()
                  select new
                         {
                            //the following are sample fields
                            crew.CrewId,
                            crew.Name,
                            FlightName = flight != null ? flight.Name : ""
                         } 
```

请注意，无论您从中获取什么字段`flight`，都**必须**对其执行空值检查。

# sql - 按第一行分组

> ID：10741611
> 
> 赞同：1
> 
> 时间：2012-05-24T16:30:41.817
> 
> 标签：sql, sql-server, sql-server-2008

```
 SELECT OrderNumber, FIRST(ShippingName) as ShippingName FROM Orders
 GROUP BY OrderNumber 
```

这给出了一个错误，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:36:50.693

`FIRST`SQL Server 不支持该函数。

也许你想要

```
SELECT OrderNumber, MIN(ShippingName) as ShippingName
FROM Orders
GROUP BY OrderNumber 
```

但是，可能不会。相反，我怀疑您的意思是...对于每个`OrderNumber`, 在所有带有 that 的行中，根据某些顺序`OrderNumber`选择第一行的 。`ShippingName`

```
SELECT OrderNumber,
    (
        SELECT TOP 1 ShippingName
        FROM Orders AS OrdersInner
        WHERE OrdersInner.OrderNumber = Orders.OrderNumber
        ORDER BY OrdersInner.OrderDate, OrdersInner.OrderId
    ) as ShippingName
FROM Orders
GROUP BY OrderNumber 
```

但我正在对您的要求和数据库结构做出一些假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:39:12.397

你可能的意思是：

```
SELECT TOP 1 OrderNumber, ShippingName
FROM Orders
ORDER BY OrderNumber DESC 
```

# mysql - 将查询结果设置为 MySQL 中的变量

> ID：10741612
> 
> 赞同：31
> 
> 时间：2012-05-24T16:30:43.690
> 
> 标签：mysql, variables

这应该是一个简单的语法：我试图在 MySQL 中设置一个变量等于查询的结果，例如：

```
SET @variable1 = SELECT salary FROM employee_info WHERE emp_id = 12345678; 
```

基本上，我希望将该员工的薪水存储为一个变量，然后我可以对其进行操作和添加。

正确的语法是什么，因为我无法让它工作。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-24T16:34:58.187

```
SELECT salary INTO @variable1 FROM employee_info WHERE emp_id = 12345678 LIMIT 1; 
```

或者

```
SET @variable1 = (SELECT salary FROM employee_info WHERE emp_id = 12345678 LIMIT 1);

SELECT @variable1; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-08T12:10:18.607

您甚至可以在单个查询中填充多个变量。

```
SELECT salary, salary_group INTO @var1, @var2 FROM employee_info WHERE emp_id = 12345678; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T16:50:20.230

您非常接近正确的语法。这里是：

```
SET @variable1 = (SELECT salary FROM employee_info WHERE emp_id = 12345678); 
```

然后像这样打印变量：

```
SELECT @variable1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-03T10:27:51.960

```
SELECT @code:=salary FROM employee_info WHERE emp_id = 12345678; 
```

查工资，

```
SELECT @code; 
```

工资的结果将在 中初始化`code`。

[更多信息](https://stackoverflow.com/questions/6081436/how-to-use-alias-as-field-in-mysql/6081523#6081523)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-17T08:28:47.243

**将查询结果设置为 MySQL 中的变量**

```
Select  @Amount1:=  Amount FROM table where id=57703; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T16:36:31.337

```
select @variable1 := salary FROM employee_info WHERE emp_id = 12345678; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-27T22:41:06.030

用这个

```
SELECT weight INTO @x FROM p_status where tcount=['value'] LIMIT 1; 
```

经过测试并且工作正常...

# entity-framework - 为什么 EF Reverse Code First Tool 会生成复合键？

> ID：10741613
> 
> 赞同：0
> 
> 时间：2012-05-24T16:30:47.800
> 
> 标签：entity-framework, ef-code-first

EF Reverse Code First Tool 正在生成复合键

```
public vw_ResourcesMap()
    {
        // Primary Key
        this.HasKey(t => new { t.Refno, t.Obsolete }); // Why???

        // Properties
        this.Property(t => t.Refno)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        this.Property(t => t.Name)
            .HasMaxLength(50);

        this.Property(t => t.LocnID)
            .IsFixedLength()
            .HasMaxLength(2);

        this.Property(t => t.Created_by)
            .HasMaxLength(50);

        // Table & Column Mappings
        this.ToTable("vw_Resources");
        this.Property(t => t.Refno).HasColumnName("Refno");
        this.Property(t => t.Name).HasColumnName("Name");
        this.Property(t => t.Head).HasColumnName("Head");
        this.Property(t => t.LocnID).HasColumnName("LocnID");
        this.Property(t => t.Obsolete).HasColumnName("Obsolete");
        this.Property(t => t.Created_by).HasColumnName("Created_by");
        this.Property(t => t.Version).HasColumnName("Version");
        this.Property(t => t.Rank).HasColumnName("Rank");
    }
} 
```

我必须更改主键声明以`this.HasKey(t => t.Refno)`映射关系，否则我会得到下面的异常。

> 关系约束中的从属角色和主体角色中的属性数量必须相同。

也许这是一个错误——IDK

一切正常，但想增加理解和知识。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:17:59.073

数据库视图没有主键，因此 EF 尝试通过使用所有不使用二进制数据类型的非可空列来推断键。

# c++ - 删除 MyClass *Array[10]

> ID：10741615
> 
> 赞同：0
> 
> 时间：2012-05-24T16:30:59.353
> 
> 标签：c++, arrays, memory-management

我真的被困在尝试使用 delete 释放内存而不是在 for 循环中。

```
 MyClass *Array[10];

cout << "Step 1 - Allocation" << endl << endl;
Array[0] = new MyClass();
Array[1] = new MyClass();
Array[2] = new MyClass(2, 4.6);
Array[3] = new MyClass(*Array[2]);
Array[4] = new MyClass();
Array[5] = new MyClass(13, 66.6);
Array[6] = new MyClass(75, 9.43);
Array[7] = new MyClass(*Array[6]);
Array[8] = new MyClass(*Array[1]);
Array[9] = new MyClass(*Array[3]);

cout << endl << "Step 2 - Write" << endl << endl;
for(int i=0; i<10; i++)
{
    Array[i]->write();
    cout << endl;
}

cout << endl << "Step 3 - Deallocation" << endl << endl; 
```

我试过 delete[] 数组，但它不起作用。

代码必须保持原样，因为它被要求做的事情是正确的。唯一的事情是添加一个删除（单行而不是 for 循环）来删除 Array。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T16:34:56.447

您需要使用以下方法删除您创建的每个对象`new`：

```
for (unsigned i(0); i < 10; ++i)
    delete Array[i]; 
```

`Array`本身是一个局部变量；你没有`new`用来创造它，所以你不用`delete`来摧毁它。超出范围时将被销毁。

为了解决必须“单行而不是 for 循环”进行删除的更新约束，我想可以这样写：

```
delete Array[0]; delete Array[1]; delete Array[2]; delete Array[3]; delete Array[4]; delete Array[5]; delete Array[6]; delete Array[7]; delete Array[8]; delete Array[9]; 
```

这是一行代码，不使用循环。不可能使用一个`delete`表达式来破坏十个实际上不相关的对象。

* * *

但不要这样做。真的。手动资源管理很危险，而且很难正确执行。C++ 具有自动资源管理功能，您应该使用它们。在这种情况下，最好使用 a `std::vector<MyClass>`：

```
std::vector<MyClass> Array;
Array.push_back(MyClass());
Array.push_back(MyClass());
Array.push_back(MyClass(2, 4.6));
Array.push_back(MyClass(Array[2]));
// Etc. 
```

本例中没有`new`，因此`delete`不需要。当`std::vector`它被摧毁时，它会清理一切。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T16:33:27.190

运算符`delete[]`必须与`new[]`您未在此处使用的运算符一起使用。您*手动* `new`编辑了`MyClass`. 您必须*手动* `delete`处理`MyClass`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T16:33:31.463

`delete[]`用于删除由 分配的`new[]`内容，它不会调用`delete`数组的每个元素。`delete`您必须在循环中调用每个数组元素。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T16:34:08.193

```
std::vector<std::unique_ptr<MyClass>> Array;
Array.resize(10); 
```

无需删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:44:26.433

> 我真的被困在尝试使用 delete 释放内存而不是在 for 循环中。

如果不手动分配内存，则不需要手动释放内存。

```
 MyClass Array[10] = {
        MyClass(),
        MyClass(),
        MyClass(2, 4.6),
        MyClass(Array[2]),
        MyClass(),
        MyClass(13, 66.6),
        MyClass(75, 9.43),
        MyClass(Array[6]),
        MyClass(Array[1]),
        MyClass(Array[3])
    };

    // there's nothing to delete now 
```

`new`或者`delete`是具有某些特定用途的高级 C++ 功能。如果不需要，请不要使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T18:58:18.470

您可以使用像[这样](http://www.codeproject.com/Articles/6485/A-Functor-that-deletes-Pointers-from-STL-Sequence)的删除器仿函数并执行以下操作：

```
for_each(Array.begin(), Array.end(), free_ptr<C>()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-24T16:55:25.610

我可以在一行中看到清理的唯一方法是，如果你重写它，以便 Array 是指向对象数组的指针，而不是指针数组。

```
MyClass *Array = nullptr;

cout << "Step 1 - Allocation" << endl << endl;
Array = new MyClass[10];
Array[0] = MyClass(); //removed "new"
...

cout << endl << "Step 2 - Write" << endl << endl;
for(int i=0; i<10; i++)
{
    Array[i].write(); //Objects aren't pointers anymore
    cout << endl;
}

cout << endl << "Step 3 - Deallocation" << endl << endl;
delete[] MyClass; 
```

# javascript - 如何在 JavaScript 中检查参数是否是对象（而不是数组）

> ID：10741618
> 
> 赞同：2
> 
> 时间：2012-05-24T16:31:06.077
> 
> 标签：javascript, arguments, argument-passing

经过测试，`instasnceof`我发现如果参数是数组或对象字面量，它将返回 true。

```
function test(options){
  if(options instanceof Object){alert('yes')}//this will alert for both arrays and object literals
}
test({x:11})// alerts
test([11])// alerts as well but I do not want it to 
```

有没有办法测试参数“选项”是否是对象文字？

PS我正在创建一个允许用户访问其配置选项的模块，并且我想测试参数是否只是一个**对象文字**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T16:35:18.077

> 有没有办法测试参数“选项”是否是对象文字？

不，因为没有意义。您可以测试它是否是*object*，但它是如何创建的（通过对函数的调用中的文字，通过其他地方的文字，通过`new Object`，通过反序列化 JSON 字符串，...）不是维护的信息。

> 在测试了 instasnceof 之后，我发现如果参数是数组或对象字面量，它将返回 true

正确的。JavaScript 中的数组是对象（而[不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)）。

如果你想测试一个对象是一个普通的旧对象，你可以这样做：

```
if (Object.prototype.toString.call(options) === "[object Object]") {
    // It's a plain object
} 
```

但真的没有理由这样做。这不是你的问题。只要它们传递给您的内容具有您期望的属性，就不要试图进一步限制对象。

> ps 我正在制作一个允许用户向其传递配置选项的模块，并且我想测试以确保该参数只是一个对象文字。

为什么？如果用户想要使用一个没有被声明为文字的对象，那么你为什么要关心呢？如果他们想使用他们通过不同的构造函数创建的对象（例如，而不仅仅是一个普通的对象），那么你为什么要关心呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:35:24.360

```
function isPlainObject(o) {
     return Object(o) === o && Object.getPrototypeOf(o) === Object.prototype;
} 
```

但是，您无法测试是否`o`被声明为文字或以其他方式实例化 - 您只能测试它是否是没有任何构造函数的*普通对象*`Object`，而不是.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:34:54.107

如果你试图禁止数组，你可以这样做：

```
var isObject = options instanceof Object;
var isArray = options instanceof Array;
if(isObject && !isArray)
{
    alert('yes');
} 
```

# android - 在我的清单文件中，我被限制在 240 台平板设备上，没有手机？

> ID：10741619
> 
> 赞同：0
> 
> 时间：2012-05-24T16:31:09.290
> 
> 标签：android, google-play, apk, android-manifest

我们正在尝试推出我们的第一个 android 应用程序。它在从 10.1 到 3.1 的各种屏幕大小的模拟器中测试良好。但是，当我们尝试将 apk 上传到该站点时，它表明我们只能在 240 台设备上使用，并且在随机类别中查找，例如摩托罗拉，没有列出任何手机设备。

此外，在安卓手机上找不到该应用程序。

是因为我需要触摸屏吗？

这是开发人员控制台上列出的内容： 屏幕布局：小正常 大 XLARGE 屏幕密度：所需的设备功能 android.hardware.touchscreen

这是我的清单文件：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.serioustangents.spellingquiz" android:versionCode="4" android:versionName="1.2.2">
  <uses-sdk android:minSdkVersion="11" /> 
  <supports-screens android:smallScreens="True" android:normalScreens="True" android:largeScreens="True" android:xlargeScreens="True" android:anyDensity="true" /> 
- <application android:icon="@drawable/beesquare" android:label="@string/app_name" android:name="com.serioustangents.spellingquiz.SpellingBeeApp">
- <activity android:name=".SpellingQuiz" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.MAIN" /> 
  <category android:name="android.intent.category.LAUNCHER" /> 
  </intent-filter>
  </activity>
- <activity android:name=".gameplay" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
- <activity android:name=".ChangeUsername" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
- <activity android:name=".openingScreen" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
- <activity android:name=".closingScreen" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
- <activity android:name=".HighScoreScreen" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
- <activity android:name=".summaryScreen" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity>
  </application>
  </manifest> 
```

关于为什么系统不允许我为手机设置这个的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:35:21.860

您的 minSdkVersion 是 11，即 3.0 Honeycomb。只有运行 Honeycomb 的平板电脑以及 4.0 (ICS) 或更高版本的手机和平板电脑才能看到您的应用。目前绝大多数手机都运行 2.2 或 2.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:36:10.897

您的 minSdkVersion 设置为 11，即 Honeycomb。没有一部手机运行 Honeycomb，因为它是 Android 的平板电脑版本。尝试将其设置得更低。有关其他 API 级别的详细信息，请参阅[http://developer.android.com/guide/appendix/api-levels.html#intro](http://developer.android.com/guide/appendix/api-levels.html#intro)。

# sql - 一张表上的 SQL 合并命令

> ID：10741622
> 
> 赞同：3
> 
> 时间：2012-05-24T16:31:13.133
> 
> 标签：sql, sql-server-2008, merge

我试图让我的头脑了解`MERGE`sql 语句。我想要实现的是：

将新值插入表中，但如果记录已经存在，则`CSScolorOrders`更新`corQuantity`列`colID``ordID`

这就是我最终的结果：

```
MERGE INTO CSScolorOrders AS TARGET 
USING (SELECT * FROM CSScolorOrders WHERE ordID = 3) AS SOURCE 
ON (SOURCE.colID = 1) WHEN 
MATCHED THEN UPDATE SET corQuantity = 1 
WHEN
  NOT MATCHED BY TARGET
  THEN INSERT (colID, ordID, corQuantity) VALUES (1, 3, 1); 
```

不幸的是，它没有引发任何异常，所以我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:46:24.670

[正如这里](http://www.bidn.com/blogs/bretupdegraff/bidn-blog/239/using-the-new-tsql-merge-statement-with-sql-server-2008)所讨论的，您将看到合并与听起来完全一样。取两个表并搜索您加入它们的值，我们称之为“X”。如果 X 是匹配项，则您对该记录执行更新。如果它不存在，那么您将使用选定的值对目标表执行插入。

在你的情况下，我不完全确定你是否加入

```
 (  ON (SOURCE.colID = 1)   ) 
```

是正确的。我很确定这需要

```
on(Source.colID = Target.colID) 
```

所以完整的声明应该是这样的：

```
MERGE INTO CSScolorOrders AS TARGET 
USING (SELECT * FROM CSScolorOrders WHERE ordID = 3) AS SOURCE 
on(Source.colID = Target.colID)
WHEN MATCHED THEN 
  UPDATE SET corQuantity = 1 
WHEN NOT MATCHED BY TARGET
  THEN INSERT (colID, ordID, corQuantity) VALUES (1, 3, 1); 
```

但我没有对此进行测试，也不是 100% 确定您的表列是什么以及您尝试加入的具体内容。但是我提供的链接应该为您指明正确的方向。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-28T22:00:50.173

```
MERGE INTO accounting_values AS Target
USING (select @entity_id as entity_id, @fiscal_year as fiscal_year, @fiscal_period as       fiscal_period) AS source
ON (target.entity_id = source.entity_id  AND target.fiscal_year = source.fiscal_year AND target.fiscal_period = source.fiscal_period)
WHEN MATCHED THEN
    UPDATE SET value = @value
WHEN NOT MATCHED BY Target THEN
    INSERT 
(entity_id, fiscal_year, fiscal_period, value) 
    VALUES (@entity_ID, @fiscal_year, @fiscal_period, @value); 
```

这是经过测试的。它不会两次引用该表。我试图复制 MySQL 的 ON DUPLICATE KEY UPDATE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:47:12.347

```
MERGE CSScolorOrders AS TARGET 
USING (SELECT * FROM CSScolorOrders WHERE ordID = 3) AS SOURCE 
ON (SOURCE.colID = TARGET.colID) WHEN 
MATCHED THEN UPDATE SET corQuantity = 1 
WHEN
  NOT MATCHED
  THEN INSERT (colID, ordID, corQuantity) VALUES (1, 3, 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-27T11:39:52.947

无论该表是否包含记录，要在表中更新或插入，您可以按如下方式合并：

*   确保**USING**子句返回一个条目
*   **在ON**子句中表达匹配条件

在您的情况下（以下示例在 Oracle 上测试）：

```
MERGE INTO CSScolorOrders AS TARGET 
USING (SELECT 'OneEntry' FROM DUAL) AS SOURCE
ON (colID = 1 and ordID = 3) WHEN 
MATCHED THEN UPDATE SET corQuantity = 1 
WHEN
  NOT MATCHED BY TARGET
  THEN INSERT (colID, ordID, corQuantity) VALUES (1, 3, 1); 
```

大多数数据库都有一个允许任意 SELECT 的 DUMMY 表（上面，我使用 DUAL），但如果我们只使用您问题中提到的表，您可以例如替换

```
SELECT 'OneEntry' FROM DUAL 
```

和

```
SELECT COUNT(*) FROM CSScolorOrders 
```

# c# - LINQ - 必填字段，不关心是否为空

> ID：10741623
> 
> 赞同：4
> 
> 时间：2012-05-24T16:31:20.090
> 
> 标签：c#, .net, linq

我正在 asp.net 应用程序中构建搜索功能，并且正在使用 LINQ to SQL 根据所​​选搜索条件检索数据。搜索条件是

1.  国家
2.  城市
3.  区
4.  房间的数量
5.  租金周期

只有第一个搜索条件 Country 是必填字段。但是，如果用户输入了标准 2、3、4 和/或 5 的值，则应考虑输入的值，并且只检索与所有输入的搜索标准匹配的结果。请注意，如果条件 2、3、4 和/或 5 之一为空（null），则 LINQ 应充当“DONT CARE”并返回该行。

例如，如果输入的条件是：

1.  国家 = 美国
2.  城市 = 空
3.  区=空
4.  房间数 = null
5.  租金周期 = null

然后应返回 Country == USA 的所有行。

另一个例子：

1.  国家 = 英国
2.  城市 = 空
3.  区=空
4.  房间数 = 5
5.  租金周期 = null

然后应返回 Country == UK 和 NumberOfRooms == 5 的所有行。

如何在 LINQ to SQL 中实现这一点？

这是我到目前为止所拥有的：

```
var data = from x in db.Units where x.Country == coutnryID && /*PLEASE HELP!*/ select x; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:36:03.830

试试这个（假设`cityId`,`districtId`和是您要搜索的变量`rooms`：`rentCycle`

```
var data = from x in db.Units
    where x.Country == countryId
        && (cityId == null || x.City == cityId)
        && (districtId == null || x.District == districtId)
        && (rooms == null || x.Rooms == rooms)
        && (rentCycle == null || x.RentCycle == rentCycle)
    select x; 
```

我基本上是说，如果您要搜索的变量为空，则忽略它们，否则将它们与`Unit`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:55:32.280

您可以分阶段构建查询：

```
var query = from x in db.Units  where x.Country == countryId;
if (cityId != null)        query = query.Where(x.City == cityId);
if (districtId != null)    query = query.Where(x.City == districtId);
if (rooms != null)         query = query.Where(x.Rooms == rooms);
if (rentCycle != null)     query = query.Where(x.RentCycle == rentCycle);
var data = query.Select(); 
```

如果 C# 稍微混乱一点，那会给你带来更高效的 SQL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T17:03:22.897

使用 GetValueOrDefault，如果为 null，则为当前值提供默认值：

```
var data = from x in db.Units
    where x.Country == countryId
        && (x.City == cityId.GetValueOrDefault(x.City))
        && (x.District == districtId.GetValueOrDefault(x.District))
        && (x.Rooms == rooms.GetValueOrDefault(x.Rooms))
        && (x.RentCycle == rentCycle.GetValueOrDefault(x.RentCycle))
    select x; 
```

# redmine - 如何在 Redmine 中列出所有版本

> ID：10741626
> 
> 赞同：0
> 
> 时间：2012-05-24T16:31:34.667
> 
> 标签：redmine

我可以为每个项目（选择项目、设置、版本）做这些，但不是全局的。如何列出所有存在的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:16:24.890

要列出所有版本，您至少需要做一个“共享”版本。提示：您可以在“已阻止”状态下执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:08:20.120

redmine/issues 页面（假设 redmine 是您的服务器）显示所有问题。您可以显示版本，然后对该列进行排序。它似乎按最早到期日期对版本进行排序，然后是没有版本的版本。您还可以“按结果分组”并选择版本。

但是，如果您有很多错误，这并不是很好。并且它没有显示更多信息，例如版本的到期日期。

# dojo - 上下文菜单未触发 onMouseOut onMouseLeave 事件

> ID：10741629
> 
> 赞同：0
> 
> 时间：2012-05-24T16:31:53.773
> 
> 标签：dojo, contextmenu, onmouseout

我正在创建一个动态上下文菜单，正如预期的那样，我希望在鼠标离开菜单框时关闭菜单。我用过 ：

```
var dlg = new dijit.Menu({                   
         onMouseLeave: function(event){
        dijit.popup.close(dlg);
    }
}); 
```

但是当我走出盒子时，什么也没有发生。如果我在 MenuItems 中放置相同的功能，那么当我离开 MenuItem 框时，它会关闭该框。

任何意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:37:50.267

这是因为 dijit.Menu 没有在其 domNode 上注册 onMouseLeave。

要手动执行此操作，您只需要以下内容：（虽然应该可以工作，但还没有抽样测试）

```
var myconnects = []
var dlg = new dijit.Menu({                   
   destroy: function() {  // for a neat garbage collections, remove listeners
      var ch;
      while(ch = myconnects.pop()) ch.disconnect();
      this.inherited();
   }
   ...
});
myconnects.push(dojo.connect(dlg.domNode, "onmouseleave", dojo.hitch(dlg, function() {
    dijit.popup.close(this);
}); 
```

# wpf - WPF：知道在 Datagrid 上单击了哪个控件

> ID：10741635
> 
> 赞同：1
> 
> 时间：2012-05-24T16:32:05.817
> 
> 标签：wpf, button, datagrid, click

我有一个绑定到 OservableCollection 动态填充的列和行的 DataGrid。DataGrid 的行有几个按钮。在每个按钮上调用一个方法（在生成列时实现了 AddHandler）。

在处理程序方法中，我可以获取选择了哪一行。我想知道选择了哪一列的按钮。基于此，只有我可以采取行动并打开相应的窗口。

我如何知道选择了该行的哪个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:13:17.173

我使用以下方式获取列：

```
int col = myDataGrid.CurrentCell.Column.DisplayIndex;
int row = seivesTorGrid.SelectedIndex; 
```

基于此，我能够编写相应的操作。

# django - django 和 get_model 的信号？

> ID：10741636
> 
> 赞同：1
> 
> 时间：2012-05-24T16:32:07.843
> 
> 标签：django, django-signals

我有一个信号——

```
@receiver(post_save, sender=User)
def create_initial_story(sender,instance, signal, created, **kwargs):
    if created:
        Story(user = instance, title = 'Random Stories',
            description="Random stories",
            is_closed = False, is_random = True).save() 
```

这很酷，但我真的不想在我的 models.py 中有这个信号

它以某种方式“双重导入”，我宁愿这不会发生。是的，我知道阻止信号运行两次的魔术，但我就是不相信。为什么我的应用程序要做两倍的工作！疯狂的！

有人建议我使用`django.db.models.get_model`，但我不知道该怎么做！我的尝试不太奏效 - 这是我尝试过的：

```
from django.db.models import get_model

@receiver(post_save, sendermodel('myapp','User'))
def create_initial_story(sender,instance, signal, created, **kwargs):
    if created:
        get_model('myapp','Story').(user = instance, title = 'Random Stories',
            description="Random stories",
            is_closed = False, is_random = True).save() 
```

这会产生一个例外 -

无法分配“<故事：随机故事>”：“Story.user”必须是“用户”实例。

所以！我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:38:58.613

你的问题在这里：

```
get_model('myapp','Story').(user = instance, title = 'Random Stories',
        description="Random stories",
        is_closed = False, is_random = True).save() 
```

`get_model`返回模型类，因此您仍然需要`objects.create`实际创建一个实例。而且，你最后不需要`save()`。尝试：

```
get_model('myapp','Story').objects.create(user = instance, title = 'Random Stories',
        description="Random stories",
        is_closed = False, is_random = True) 
```

# sql-server - sql server 数据库备份

> ID：10741640
> 
> 赞同：0
> 
> 时间：2012-05-24T16:32:17.483
> 
> 标签：sql-server, backup

我有我的 sql 服务器，它在服务器 A 中有将近 10 GB 的数据。我需要通过在服务器 B 中恢复的备份来获取它。但是，问题是服务器 A 和服务器 B 都在美国，而我在亚洲，并且托管公司要求我为该转移支付 100 美元，有没有办法可以快速在它们之间进行备份？注意：我对两台服务器都有 sql server management studio。

他们建议的解决方案是我下载数​​据库并重新上传它，但这似乎非常困难和漫长的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:02:32.333

您是否检查了**日志文件**的大小（数据库属性、文件、检查日志文件大小）？

如果它占用了大部分总空间，您可能会选择在本地备份（以防万一），将恢复模式更改为简单，压缩数据库，备份它，这种方式的大小可能更易于传输.

# android - expandablelistview 复选框未保持选中状态

> ID：10741642
> 
> 赞同：0
> 
> 时间：2012-05-24T16:32:23.350
> 
> 标签：android, checkbox, expandablelistview

我正在使用本地 sqlite 数据库，它可以正确保存所有内容。当我在 expandableListView 中打开一个组时，所有已存储在数据库中的复选框都被选中。当我编辑一个条目时（我使用了一个 AlertDialog），关闭该组，然后重新打开该组。该复选框不再被选中。我检查了数据库并保存了编辑。如果我转到另一个页面并返回，一旦我单击该组，我编辑的子项目将再次被选中。我在eclipse中使用了断点，它似乎在db中找到了数据，但没有将框标记为选中。有任何想法吗？

![在此处输入图像描述](../Images/e798a8744cb2d4c7f261eb43e0bc8ea1.png)

这是我第一次单击组（引擎）时的图像

![在此处输入图像描述](../Images/9d6ed0f1b60ab5281566e7b6c50b9fa0.png)

现在我正在使用 AlertDialog 来更新条目

![在此处输入图像描述](../Images/177aac13f6f09dbb3d8a35381e7a7574.png)

现在我关闭组

![在此处输入图像描述](../Images/c5bfe163268dfa1d3de6418e20fce812.png)

当我重新打开电池框时，不再选中。

这是我打开群组时的代码

```
public void onGroupExpand(int groupPosition)
{
    db= new InspectionRecordsTableDBAdapter(getBaseContext());
    db.open();
    int inspectionId = com.signalsetapp.inspectionchecklist.report
            .returnStringID();
    String [] child=kids[groupPosition];
    ArrayList<Color> secList = new ArrayList<Color>();
    for(int i=0; i<child.length;i++)
    {
        try {
            if (db.childFound(inspectionId, child[i]))
                secList.add(new Color(child[i], true));
            else
                secList.add(new Color(child[i], false));
        } catch (Exception e) {
            secList.add(new Color(child[i], false));
            e.printStackTrace();
        }

    } 
```

}

这是保存到数据库中的更新代码。这确实正确保存到数据库中

```
db.editRecords(
                                        primaryId,
                                        com.signalsetapp.inspectionchecklist.report
                                                .returnStringID(),
                                        parent[groupPosition],
                                        kids[groupPosition][childPosition],
                                        input.getText().toString(), status);
                                onExpand=true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:42:15.383

`requery()`保存到数据库后，您应该使用组游标，它应该重新生成列表视图（或异步等效项，因为不推荐使用 requery）。

# javascript - chrome.extension.onRequest 监听器到达原始内容

> ID：10741646
> 
> 赞同：0
> 
> 时间：2012-05-24T16:32:48.657
> 
> 标签：javascript, google-chrome, google-chrome-extension, jsonp

我在谷歌浏览器扩展中使用 JSONP。为了使它工作，我不得不添加

```
chrome.extension.onRequest.addListener(onRequest); 
```

然后像这样发出请求：

```
var jsonpURL;
$(document).ready(function(){
   /* i make the "someurl" here from a div's content */
   jsonpURL="someurl";
   chrome.extension.sendRequest({action:'getJSON',url:jsonpURL});
}); 
```

在监听器中，我想在页面上隐藏一些 div

```
function onRequest(request, sender, callback) {
    if (request.action == 'getJSON') {
        $.getJSON(request.url, function(data){
                // HIDE SOME DIV
        });
    }    
} 
```

问题：

如何在`onRequest`函数中访问原始页面的内容？或者如果我根本不能，我如何根据请求的结果隐藏一些 div？我尝试了 jquery 选择器并发现我到达了 bg.htlm，而不是原始页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:20:16.717

您需要在 JSONP 请求返回后将[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)添加到要修改的页面。该脚本将能够修改它被注入的页面的 DOM。内容脚本到位后，您可以使用消息在后台页面和内容脚本之间进行通信。所以基本上，你需要做的是[发送一条消息](http://code.google.com/chrome/extensions/messaging.html)'ok jsonp returned！' `onRequest`每当触发后台事件侦听器时。在内容脚本收到此消息后，它可以修改 DOM。

更简单的选择（但更有限）是对某些页面使用 javascript 的[编程注入](http://code.google.com/chrome/extensions/content_scripts.html#pi)。

# c - OpenMPI 节点和网络拓扑

> ID：10741647
> 
> 赞同：0
> 
> 时间：2012-05-24T16:32:53.537
> 
> 标签：c, networking, mpi, openmpi, topology

我目前正在构建一个小型实用程序库，作为一个更大项目的一部分。OpenMPI 有一个有据可查的 API 库，但是当涉及到节点之间的较低级别的通信时，我有点困惑。我知道在编写你的算法时，你将它分布在所有预计进行计算的节点上，每个节点都与其余节点进行通信，根据它们的“全局”MPI 等级（如算法中定义）执行算法的一部分，以及所有节点来回同步。但是，我将 global 放在引号中的原因是，openMPI 是否在 ip 级别进行通信，因此说我已经有一个长时间执行的算法，但是如果我执行我的 MPI，有一个节点处于空闲状态，没有运行任何 MPI 进程算法，它会加入 MPI_COMM_WORLD 并成为整个网络拓扑的一部分，还是我需要做一些“巫术”来使该节点成为 MPI_COMM_WORLD 的一部分。另外，如果节点可以成为该特定算法的 MPI_COMM_WORLD 的一部分，我如何注册/识别这个新节点？

任何阅读参考资料也很有帮助。

非常感谢！

tl; dr MPI 节点是否可从 MPI_COMM_WORLD 热交换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:57:14.187

一旦创建了通信器，您就无法将节点加入到通信器中。这也是正确的，`MPI_COMM_WORLD`因为它只是一个预先创建的通信器。只有作为初始 SPMD 启动的一部分启动的进程才会成为`MPI_COMM_WORLD`. 但是您可以使用当前 MPI 标准 2.2 版的[第 10 章](http://www.mpi-forum.org/docs/mpi22-report/node201.htm)中描述的 MPI-2 进程管理工具生成其他进程。

新生成的进程有自己`MPI_COMM_WORLD`的进程，初始组的进程只能通过由 spawn 操作返回的特殊的**intercommunicator**（`MPI_COMM_WORLD`是**intercommunicator ）与它们通信。**由于进程生成是一项集体操作，因此所有进程都`MPI_COMM_WORLD`将获得该交互器的句柄。

MPI 3.0（迟早会出现）将带来故障容错，允许从`MPI_COMM_WORLD`（或任何其他通信器）中排除/删除错误进程，而 MPI 3.1 最终将带来一些允许替换错误进程的东西。

# android - Android 在调试模式下运行非常慢

> ID：10741653
> 
> 赞同：12
> 
> 时间：2012-05-24T16:33:13.420
> 
> 标签：android, eclipse

> **可能重复：**
> [慢速安卓模拟器](https://stackoverflow.com/questions/1554099/slow-android-emulator)

我正在尝试在 Eclipse 中以调试模式运行 android 应用程序，它真的很慢。我怎样才能提高性能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T16:42:00.070

启动您的应用程序而不进行调试，并且仅当您已经达到对调试感兴趣的程度时，然后使用 DDMS 透视图 -> 设备列表 -> 调试过程按钮连接您的调试器。

2014 年编辑：现在我建议尝试 Genymotion Android 虚拟化。与最初的 Android 模拟器相比，它不模拟 Android 设备的核心，而是在虚拟化系统中将其作为 x86 代码运行。这通常更快。此外，它还带来了一些原始模拟器根本没有的功能（如基于地图的 GPS 位置选择）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:39:13.793

它通常发生在模拟器中，尤其是当您读取/写入文件、调用网络服务器和/或 .apk 文件的大小增加时（较大的 apk 大小会导致安装缓慢）。最好的解决方案是使用真实设备，这将加快安装过程并提高应用程序的整体性能

# spring - Struts tile 到 Tiles 迁移 - Spring 支持类的变化

> ID：10741656
> 
> 赞同：0
> 
> 时间：2012-05-24T16:33:23.737
> 
> 标签：spring, upgrade, tiles, tiles2, apache-tiles

当我尝试在我的 Web 应用程序中将 Spring 从 2.1 版升级到 Spring 3.0.x 时，就会出现这种情况。Spring 3.0.x 不支持 struts-tiles 1.3，它需要 Apache Tiles 2.x。所以，我还必须将 Struts-Tiles 1.3 升级到 Apache Tiles 2.x。Apache tile 有这个[迁移指南](http://tiles.apache.org/2.2/framework/migration/index.html%5D)，帮助我完成了这项工作。但是，我似乎遇到了迁移指南中未提及的问题。以下是详细信息：

这是我们使用的tilesConfigurer，

```
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles.TilesConfigurer">
        <property name="factoryClass">
            <value>org.apache.struts.tiles.xmlDefinition.I18nFactorySet</value>
        </property>
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles-defs.xml</value>
            </list>
        </property>
</bean> 
```

由于该类`tiles.TilesConfigurer`在 Spring 3.0.x 中已弃用，因此我将其更改为使用`org.springframework.web.servlet.view.tiles2.TilesConfigurer`

`tiles2.TilesConfigurer`没有`setFactoryClass(..)`与现在已弃用的 tiles.TilesConfigurer 不同的方法。因此我的 bean 初始化失败。

我查找了`tiles2.TilesConfigurer` [api](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesConfigurer.html)，它现在具有方法，`setDefinitionsFactoryClass(..)`并且`setPreparerFactoryClass(..)`. 我不仅无法确定哪个是相关的，我也找不到等效的`org.apache.struts.tiles.xmlDefinition.I18nFactorySet`. Tiles 2.2 中是否有这种直接可用的东西，或者我是否需要使用 Tiles 2.2 中可用的等效代码重新访问我现有的一些代码？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:48:27.007

Tiles Community 的一位绅士给出了解决方案。您可以在 Apache Tiles 用户列表 2012 年 5 月存档中找到该线程。在这里交叉发布：

在 Tiles 2.2 中，factoryClass org.apache.struts.tiles.xmlDefinition.I18nFactorySet 支持开箱即用。所以，我们不需要为新的 tiles2.TilesConfigurer 类注入任何特殊的东西。最终的 XML 元素将如下所示

```
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles-defs.xml</value>
            </list>
        </property>
</bean> 
```

因此，删除该属性就可以了。

# ruby-on-rails - ruby on rails 格子类普通除法

> ID：10741662
> 
> 赞同：0
> 
> 时间：2012-05-24T16:33:42.103
> 
> 标签：ruby-on-rails

我正在尝试制作一个模型类来找到 2 个数字的格栅共同除法。如果我输入 68 和 22 答案是 2 并且是正确的，但如果我输入 678 352 结果是 326 并且是错误的！应该是2！有任何想法吗？？

```
def gcd 
  if firstnumber > secondnumber
    div= firstnumber/ secondnumber
    ip=firstnumber % secondnumber
    fi = div / ip
    ip
  else 
    i = firstnumber 
    s = secondnumber 
    secondnumber = firstnumber 
    firstnumber = s 
    div= firstnumber/ secondnumber 
    ip=firstnumber % secondnumber 
    fi = div / ip ip 
  end 
end 
```

带循环

```
def gcd
   a = firstnumber
   b=secondnumber
   ip = 50
   if firstnumber > secondnumber
     begin   
       fi=a/b
       re=a%b    
       fi=b/re
       re=re%b
       ip=re        
     end until ip != 0
     return re  
   end
   else
     i = firstnumber
     s = secondnumber
     secondnumber = firstnumber
     firstnumber = s
     div= firstnumber/ secondnumber
     ip=firstnumber % secondnumber
     fi = div / ip
     ip
   end
end 
```

$结束

同样的事情也会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:00:06.157

Ruby 有一个`Integer`具有方法的类`gcd`。不要重新发明轮子。在这里阅读[http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-gcd](http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-gcd)

```
irb(main):001:0> 68.gcd(22)
=> 2
irb(main):002:0> 678.gcd(352)
=> 2 
```

该方法的来源是

```
 def gcd(n)
     m = self.abs
     n = n.abs

     return n if m == 0
     return m if n == 0

     b = 0
     while n[0] == 0 && m[0] == 0
       b += 1; n >>= 1; m >>= 1
     end
     m >>= 1 while m[0] == 0
     n >>= 1 while n[0] == 0
     while m != n
       m, n = n, m if n > m
       m -= n; m >>= 1 while m[0] == 0
     end
     m << b
   end 
```

# ctags - ctags 正则表达式用于一行中的多个声明

> ID：10741664
> 
> 赞同：8
> 
> 时间：2012-05-24T16:33:50.243
> 
> 标签：ctags, exuberant-ctags

我正在为自定义语言编写一个 .ctags 文件......像大多数语言一样，它允许在一行中声明多个变量......即：

```
int a, b, c; 
```

我有一个识别“a”的基本正则表达式：

```
--regex-mylang=/^[ \t]*int[ \t]*([a-zA-Z_0-9]+)/\1/v,variable/ 
```

如何修改它以使其也匹配“b”和“c”？我在 ctags 文档中找不到任何在一行中处理多个匹配项的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-09-08T19:06:17.240

**最新**的Universal-ctags 可以捕获它们。

```
[jet@localhost]/tmp% cat input.x 
int a, b, c;

[jet@localhost]/tmp% cat x.ctags 
--langdef=X
--map-X=.x

--kinddef-X=v,var,variables
--_tabledef-X=main
--_tabledef-X=vardef

--_mtable-regex-X=main/int[ \t]+//{tenter=vardef}
--_mtable-regex-X=main/.//

--_mtable-regex-X=vardef/([a-zA-Z0-9]+)/\1/v/
--_mtable-regex-X=vardef/;//{tleave}
--_mtable-regex-X=vardef/.//

[jet@localhost]/tmp% u-ctags --options=x.ctags -o - ./input.x 
a   ./input.x   /^int a, b, c;$/;"  v
b   ./input.x   /^int a, b, c;$/;"  v
c   ./input.x   /^int a, b, c;$/;"  v 
```

有关更多详细信息，请参阅[https://docs.ctags.io/en/latest/optlib.html#advanced-pattern-matching-with-multiple-regex-tables](https://docs.ctags.io/en/latest/optlib.html#advanced-pattern-matching-with-multiple-regex-tables)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:22:03.100

在经历了几个小时之后，我确信它无法完成。无论如何，正则表达式只会扩展为每行一个标签。即使你把 \1 \2 \3 ... 作为扩展，那只会导致一个标签由多个匹配项组成，而不是每个匹配项一个标签。

它正确解析了 C 示例，因为在 ctags 源代码中它使用了实际的代码解析器，而不是正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:04:31.030

您正在尝试使用正则表达式进行解析，这通常是不可能的。解析需要相当于将信息存储在堆栈上，但正则表达式只能体现有限数量的不同状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-26T11:33:53.987

它可以通过[Universal Ctags](https://github.com/universal-ctags/ctags)`{_multiline=N}`和`{scope}`flag的帮助 部分完成。`N`是保存在生成`tags`​​文件中的位置的组号。有关更多信息，请参见此处：[docs/optlib.rst](https://github.com/universal-ctags/ctags/blob/master/docs/optlib.rst)

**配置：** `mylang.ctags`

```
--langmap=mylang:.txt
--regex-mylang=/^[[:blank:]]*(int)[[:blank:]]/\1/{placeholder}{scope=set}{_multiline=1}
--regex-mylang=/(;)/\1/{placeholder}{scope=clear}
--regex-mylang=/[[:blank:]]*([[:alnum:]]+)[[:blank:]]*,?/\1/v,variable/{_multiline=1}{scope=ref} 
```

**测试文件：** `test.txt`

```
void main() {
   int   a, b, c, d;
} 
```

生成标签：`ctags --options=mylang.ctags test.txt`

**生成的`tags`文件：**

```
!_TAG_FILE_FORMAT   2   /extended format; --format=1 will not append ;" to lines/
!_TAG_FILE_SORTED   1   /0=unsorted, 1=sorted, 2=foldcase/
!_TAG_OUTPUT_MODE   u-ctags /u-ctags or e-ctags/
!_TAG_PROGRAM_AUTHOR    Universal Ctags Team    //
!_TAG_PROGRAM_NAME  Universal Ctags /Derived from Exuberant Ctags/
!_TAG_PROGRAM_URL   https://ctags.io/   /official site/
!_TAG_PROGRAM_VERSION   0.0.0   /cb4476eb/
a   test.txt    /^   int   a, b, c, d;$/;"  v
b   test.txt    /^   int   a, b, c, d;$/;"  v
c   test.txt    /^   int   a, b, c, d;$/;"  v
d   test.txt    /^   int   a, b, c, d;$/;"  v
int test.txt    /^   int   a, b, c, d;$/;"  v
main    test.txt    /^void main() {$/;" v
void    test.txt    /^void main() {$/;" v 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-09-07T18:40:34.960

```
--regex-perl=/^\s*?use\s+(\w+[\w\:]*?\w*?)/\1/u,use,uses/
--regex-perl=/^\s*?require\s+(\w+[\w\:]*?\w*?)/\1/r,require,requires/
--regex-perl=/^\s*?has\s+['"]?(\w+)['"]?/\1/a,attribute,attributes/
--regex-perl=/^\s*?\*(\w+)\s*?=/\1/a,aliase,aliases/
--regex-perl=/->helper\(\s?['"]?(\w+)['"]?/\1/h,helper,helpers/
--regex-perl=/^\s*?our\s*?[\$@%](\w+)/\1/o,our,ours/
--regex-perl=/^=head1\s+(.+)/\1/p,pod,Plain Old Documentation/
--regex-perl=/^=head2\s+(.+)/-- \1/p,pod,Plain Old Documentation/
--regex-perl=/^=head[3-5]\s+(.+)/---- \1/p,pod,Plain Old Documentation/ 
```

# php - Json eval 无法解析数据

> ID：10741665
> 
> 赞同：3
> 
> 时间：2012-05-24T16:33:53.613
> 
> 标签：php, jquery

我有一个 php 程序，我只是在其中测试一些示例数据。`]`我在元素列表后收到错误消息。我怎样才能读到这个？

```
$dataDetailsList = array();
array_push($dataDetailsList, array('a' =>'1','b' =>'2','c' =>'3','d' =>'4','e' =>'5'));
echo json_encode(array("DataDetailsList"=>$dataDetailsList)); 
```

然后在我的 jQuery 处理器中，我正在这样做。

```
function requestData() {
    $.ajax({
        url: 'live-server-data.php',
        success: function(data) {
            //alert(json);
            var jsonData = eval(" (" + data + ") ");
        },
        cache: false
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:36:20.167

```
function requestData() {
    $.ajax({
        url: 'live-server-data.php',
        success: function(data) {
            //alert(json);
            var jsonData = data;

        },
        cache: false,
        dataType: 'json' //data type that it will return 
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:34:33.103

不要使用[eval](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)是邪恶的。而不是这种用法：

```
JSON.parse(data); // not supported in IE7 and below 
```

我认为你需要尝试

```
dataType: 'json' 
```

那是，

```
$.ajax({
    url: 'live-server-data.php',
    dataType: 'json',
    success: function(data) {
        var jsonData = data;
        console.log(jsonData);
        $.each(jsonData.DataDetailsList, function(key, val) {
             var key = Object.keys(val)[0],
                 value = val[key];
             console.log(key); // output: a, b, c ...
             console.log(value); // output: 1, 2, 3,...
            // alternative
            for(var key in val) {
                console.log(key);
                console.log(val[key]);
            }
        });
    },
    cache: false
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T16:36:37.197

你应该只设置`dataType`json 和 jQuery 会为你做的伎俩..

```
$.ajax({
    url: 'live-server-data.php',
    dataType: 'json',  //Added dataType json
    success: function(data) {
        //Now data is a javascript object (JSON)
    },
    cache: false
}); 
```

# c# - 如果操作先完成，则使用 RegisterWaitForSingleObject

> ID：10741669
> 
> 赞同：7
> 
> 时间：2012-05-24T16:34:10.770
> 
> 标签：c#, .net, multithreading, asynchronous

我正在使用 Begin/End 样式方法进行一些异步网络 I/O。（它实际上是针对 Azure 表存储的查询，但我认为这并不重要。）我已经使用`ThreadPool.RegisterWaitForSingleObject()`. 据我所知，这工作正常。

因为`ThreadPool.RegisterWaitForSingleObject()`需要 a`WaitHandle`作为参数，所以我必须开始 I/O 操作，然后执行`ThreadPool.RegisterWaitForSingleObject()`. 似乎这引入了 I/O 在我注册等待之前完成的可能性。

简化的代码示例：

```
private void RunQuery(QueryState queryState)
{
    //Start I/O operation
    IAsyncResult asyncResult = queryState.Query.BeginExecuteSegmented(NoopAsyncCallback, queryState);

    //What if the I/O operation completes here? 

    queryState.TimeoutWaitHandle = ThreadPool.RegisterWaitForSingleObject(asyncResult.AsyncWaitHandle, QuerySegmentCompleted, asyncResult, queryTimeout, true);
}

private void QuerySegmentCompleted(object opState, bool timedOut){
    IAsyncResult asyncResult = opState as IAsyncResult;
    QueryState state = asyncResult.AsyncState as QueryState;

    //If the I/O completed quickly, could TimeoutWaitHandle could be null here?
    //If so, what do I do about that?
    state.TimeoutWaitHandle.Unregister(asyncResult.AsyncWaitHandle);
} 
```

处理这个问题的正确方法是什么？我还需要担心`Unregister()`AsyncWaitHandle 吗？如果是这样，是否有一种相当简单的方法来等待它被设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:00:44.787

是的，你和其他人都有这个问题。IO 是否同步完成并不重要。回调和分配之间仍然存在竞争。Microsoft 应该`RegisteredWaitHandle`自动提供给该回调函数。那将解决一切。哦，好吧，正如他们所说，事后诸葛亮总是 20-20。

您需要做的是继续读取`RegisteredWaitHandle`变量，直到它不再为空。可以在紧凑的循环中执行此操作，因为比赛非常微妙，循环不会旋转很多次。

```
private void RunQuery(QueryState queryState)
{
  // Start the operation.
  var asyncResult = queryState.Query.BeginExecuteSegmented(NoopAsyncCallback, queryState);

  // Register a callback.
  RegisteredWaitHandle shared = null;
  RegisteredWaitHandle produced = ThreadPool.RegisterWaitForSingleObject(asyncResult.AsyncWaitHandle,
    (state, timedout) =>
    {
      var asyncResult = opState as IAsyncResult;
      var state = asyncResult.AsyncState as QueryState;
      while (true)
      {
        // Keep reading until the value is no longer null.
        RegisteredWaitHandle consumed = Interlocked.CompareExchange(ref shared, null, null);
        if (consumed != null)
        {
          consumed.Unregister(asyncResult.AsyncWaitHandle);
          break;
        }
      }
    }, asyncResult, queryTimeout, true);

  // Publish the RegisteredWaitHandle so that the callback can see it.
  Interlocked.CompareExchange(ref shared, produced, null);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:58:15.453

如果 I/O 在超时之前完成，则不需要取消注册，因为它是完成发出回调的信号。事实上，在阅读 Unregister 方法的文档后，似乎完全没有必要调用它，因为您只执行一次并且您没有在不相关的方法中取消注册。

[http://msdn.microsoft.com/en-us/library/system.threading.registeredwaithandle.unregister.aspx](http://msdn.microsoft.com/en-us/library/system.threading.registeredwaithandle.unregister.aspx)

> 如果 Unregister 执行时回调方法正在进行，则在回调方法完成之前不会发出 waitObject 信号。特别是，如果一个回调方法执行 Unregister，在该回调方法完成之前不会向 waitObject 发出信号。

# c++ - int 变量在向量中被推回后改变值（C++）

> ID：10741672
> 
> 赞同：-3
> 
> 时间：2012-05-24T16:34:22.390
> 
> 标签：c++, vector, integer

这是使用 Time 类的类，也是“魔术”发生的地方。数据是从文本文件中取出的

```
 while(i<flightsNumber){
        if(ist>>nameArr>>arr>>airline>>fare>>time){
            Flight flight(dep,arr,nameArr,airline,fare,time);
            flightVector.push_back(flight);
            //pre-check
            cout<<flight.getTime()<<endl;
        }
        else
            error("Error: programData.dat contains invalid data");  
        //post-check
        cout<<flightVector[i].getTime()<<endl;
        i++;
    } 
```

这是我的 MyTime 课程

```
#include "MyTime.h"

MyTime::MyTime()
    :h(0),m(0){
}

MyTime::MyTime(int hh,int mm)
    :h(hh),m(mm){

    if(hh<0 || mm<0 || mm>59)
        error("Time(): invalid construction");
}

void MyTime::setTime(int hh,int mm){
    if(hh<0 || mm<0 || mm>59)
        error("setTime(): invalid time");
    h=hh;
    m=mm;
}

int MyTime::getHour() const{
    return h;
}

int MyTime::getMinute() const{
    return m;
}

istream& operator>>(istream& is,MyTime& time){
    char ch1;
    int hour,minute;
    is>>hour>>ch1>>minute;
    if(is){
        if(ch1==':'){
            time.h = hour;
            time.m = minute;
        }
        else
            is.setstate(ios_base::failbit);
    }
    else
        is.setstate(ios_base::failbit);
    return is;
}

ostream& operator<<(ostream& os,const MyTime& time){
    return os<<time.h<<":"<<time.m;
} 
```

输出是：

1:12

-33686019：-1414812757

这怎么可能？

在执行 push_back() 函数后，MyTime 实例的值会立即更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:41:57.583

您正在使用`vector`带有`Flight`类的 a ，因此为了使向量正确复制`Flight`对象，它需要 a`operator =`和 a `copy constructor`。你有这些在`Flight`课堂上：

```
class Flight {
public:
  Flight(const Flight &copy);
  const Flight &operator=(const Flight &);
  virtual ~Flight(); /* Good practice, esp. when using containers */
  // etc
} 
```

因此，请确保使用复制构造函数和`=`操作符来复制您的`Time`值。

您可以检查的唯一另一点是 的值`i`：我假设您已将其初始化为 0？

我将在您的`Time`类上演示复制构造函数和运算符 =，只是为了简单起见：

```
class Time {
protected:
  int h,m;
public:
  Time() { h=m=0; }
  Time(int hour, int minute) : h(hour), m(minute) {}
  Time(const Time &rhs) { operator=(rhs); }
  virtual ~Time() {}
  const Time &operator=(const Time &rhs) {
    h = rhs.h;
    m = rhs.m;
    return rhs;
  }
}; 
```

因此，使用此代码，我可以将`Time`值存储到`vector<Time>`. 我也可以`=`自然地使用 Time：

```
Time a(12,0);
Time b = a;
Time c;
c = b
Time d(a); 
```

`virtual`析构函数意味着当`vector`删除它持有的实例`Time`时，它将为它们使用一个虚拟析构函数。这在这个例子中并不是特别有用（因此我将析构函数保持为空），但是派生类可能需要特定的析构函数。例如：

```
class AtomicTime : public Time {
public:
    AtomicTime() {
      lockNuclearReactor();
    }
    virtual ~AtomicTime() {
      releaseNuclearReactor();
    }
}; 
```

现在，如果你有一个`vector`类`Time`：

```
vector<Time> times; 
```

你可以愉快地去：

```
AtomicTime at;
times.push_back(at); 
```

而且您不必担心核反应堆；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:46:23.177

根据上述答案的评论，假设您的 Time 和 Flight 类仅包含值或自我管理对象，您应该可以将实例放入`vector`. 这似乎表明您的矢量索引`i`可能有问题。如果换行会发生什么：

```
cout<<flightVector[i].getTime()<<endl; 
```

至：

```
cout << (flightVector.rbegin())->getTime() << endl; 
```

另外，您可以发布您`Flight`班级的代码吗？

# python - 使用 Google 从 python 中查找 Lat/Long

> ID：10741677
> 
> 赞同：1
> 
> 时间：2012-05-24T16:34:49.850
> 
> 标签：python, geolocation

我在这方面有点不足。我知道谷歌有一个 python 客户端库，它也有[Client Location](http://code.google.com/apis/ajax/documentation/#ClientLocation)。但是，我不知道如何通过 API 访问客户端位置。我想做的是制作一个桌面应用程序位置感知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:39:52.380

它是在浏览器中运行的桌面应用程序吗？如果是这样，请使用 W3C GeoLocation API - 请参阅[https://stackoverflow.com/a/8973377/156477](https://stackoverflow.com/a/8973377/156477)和许多其他关于 SO 的问题。

如果没有，那么您需要一项通过 WiFi MAC 地址或 IP 地理位置查找来确定位置的服务。对于 WiFi MAC 地址查找，请查看[http://code.google.com/p/maclocate/](http://code.google.com/p/maclocate/)。对于基于 IP 的查找，[MaxMind](http://www.maxmind.com)提供了一项服务（有免费服务可以精确到一个城市，或者如果您需要更准确的话，可以付费服务）。还有一个 Python 库[http://www.maxmind.com/app/python](http://www.maxmind.com/app/python)。

请注意，我没有尝试过任何一个库，所以我不能保证它们。我使用了 MaxMind 服务，它运行良好，但在公司网络上的用户除外。这些用户将始终被报告为位于公司网络中心所在的位置。

# java - 将 Spring3 MVC 错误移至 Ajax？

> ID：10741680
> 
> 赞同：0
> 
> 时间：2012-05-24T16:34:55.307
> 
> 标签：java, ajax, spring, spring-mvc

我正在开发一个项目，将一些 Ajax 添加到 Spring-MVC 项目中。我删除了标签

```
<form:errors path="fieldName"/> 
```

这将在 JSP 中插入错误，现在我正在尝试制作一些 Ajax 代码来在页面上显示错误。谁能让我更新以下代码以显示错误消息而不是错误？

```
success: function(response)
          {
          // we have the response 
            $('#error').hide('fast');   
            if(response.status == "SUCCESS")
            {
                $('#error').hide('fast');  
                alert("Thanks for submitting.  We will get back to you as soon as possible.\n\n" + response.result);
                $('#error').hide('slow');

            }else
            {
              errorInfo = "";
              for( i = 0 ; i < response.result.length ; i++){
                  errorInfo += "<br>" + (i + 1) +". " + response.result[i].code;
              }
              $('#error').html("Please correct following errors: " + errorInfo);
              $('#info').hide('slow');
              $('#error').show('slow');
              $('#input').show('slow');
          }       
        },  
        error: function(e){  
          alert('Error: ' + e);  
        }  
      }); 
```

上面的代码用于显示错误但不显示错误消息

下面是我的java代码：

```
 @RequestMapping(value = "/ajax.html", method = RequestMethod.POST)
    public @ResponseBody
    JsonResponse addMessage(@Valid
            @ModelAttribute(value = "memberrequest") MemberRequest memberrequest,
            BindingResult result) {

            JsonResponse res = new JsonResponse();

        if (!result.hasErrors()) {
            res.setStatus("SUCCESS");

            // Setting data over to RT

            String Ticket = zzz.sentWebRequest(memberrequest);

            /*
             * Setting out the ticket number to be displayed to user
             */

            Map<String, Object> model = new HashMap<String, Object>();
            Ticket t = new Ticket();
            t.setTicketDetails(Ticket);

            model.put("ticket", t);

            res.setResult(Ticket);
        } else {
            res.setStatus("FAIL");
            res.setResult(result.getAllErrors());
        }

        return res;
    }
} 
```

JSON类：

> 公共类 JsonResponse { 私有字符串状态 = null; 私有对象结果 = null;
> 
> public String getStatus() { 返回状态；}
> 
> public void setStatus(String status) { this.status = status; }
> 
> public Object getResult() { 返回结果；}
> 
> public void setResult(Object result) { this.result = result; }
> 
> }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:12:29.990

尝试`response.result[i].defaultMessage`代替`response.result[i].code`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:54:47.657

```
response.result 
```

根据W3C的[XMLHttpRequest 2](http://www.w3.org/TR/XMLHttpRequest/) ，对象中没有`result`属性`response`

如果您在响应表单服务器端传递一些文本值。你可以把它`response.responseText`作为一个完整的文本。

# mysql - Facebook 是否需要像按需数据加载这样的缓存？

> ID：10741683
> 
> 赞同：0
> 
> 时间：2012-05-24T16:35:01.760
> 
> 标签：mysql, optimization, ondemand

我开发了一个与 Facebook 类似（外观）的按需数据系统，它是，当您到达页面底部时，有一个 AJAX 请求来加载更多数据。

“问题”是这个按需系统运行的一些 mySQL 查询相对较慢。因此，为了防止可伸缩性问题，我设计了（尚未实现）一个缓存系统（仅在这种按需情况下使用）来存储查询结果：

```
SELECT * FROM table WHERE .... 
```

当用户（应用程序）要求

```
SELECT * FROM table WHERE .... LIMIT 0,9 
```

因此，当用户向下滚动并且 AJAX 触发器向 mySQL 询问下一个结果时：

```
SELECT * FROM table WHERE .... LIMIT 10,19 
```

缓存系统将提供结果，而无需对 mySQL 进行另一次查询。

问题是：所有这些东西都是必要的吗？还是默认的mySQL缓存系统就够了？换句话说，我知道如果您在短时间内运行相同的查询，mySQL 缓存系统能够返回正确的结果而无需再次搜索，但是当附加到相同的查询时非常“智能”以避免搜索不同的限制？

当然，如果您知道更好的加速方法，请告诉我。

# c# - C#：遍历一个巨大的数据表

> ID：10741684
> 
> 赞同：1
> 
> 时间：2012-05-24T16:35:05.370
> 
> 标签：c#, loops, datatable

使用 for 循环遍历包含大约 40 000 条记录的数据表需要将近 4 分钟。在循环内部，我只是读取每一行的特定列的值并将其连接到一个字符串。

我没有打开任何数据库连接或其他东西，因为它是一个接收数据表的函数，遍历它并返回一个字符串。

有没有更快的方法来做到这一点？

代码在这里：

```
 private string getListOfFileNames(Datatable listWithFileNames)
   {     
        string whereClause = "";

            if (listWithFileNames.Columns.Contains("Filename"))
            {
                whereClause = "where filename in (";
                for (int j = 0; j < listWithFileNames.Rows.Count; j++)
                    whereClause += " '" + listWithFileNames.Rows[j]["Filename"].ToString() + "',";
            }
            whereClause = whereClause.Remove(whereClause.Length - 1, 1);
            whereClause += ")";    

        return whereClause;                
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:44:30.523

1.  您是否使用 StringBuilder 来连接字符串，而不仅仅是常规的字符串连接？
2.  您是否真的需要从数据库中拉回更多列？如果是这样，尽量不要。只拉回您需要的列。
3.  您是否真的需要从数据库中拉回更多行？如果是这样，尽量不要。只拉回您需要的行。
4.  电脑有多少内存？当您运行程序或接近它时，它是最大化吗？处理器是最大还是完全？如果您使用的内存过多，则可能需要进行更多的流式传输。这意味着不要将整个结果集拉入内存（即数据表），而是一次读取每一行。这也可能意味着您可能需要将结果附加到文件中，以免占用太多内存，而不是将结果连接到字符串（或 StringBuilder ）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:44:24.037

我把工作分成小块，让每一块由它自己的线程处理。您可以通过改变 nthreads 数来微调线程数。尝试使用不同的数字，这样您就可以看到性能的差异。

```
private string getListOfFileNames(DataTable listWithFileNames)
{
    string whereClause = String.Empty;

    if (listWithFileNames.Columns.Contains("Filename"))
    {
        int nthreads = 8; // You can play with this parameter to fine tune and get your best time.
        int load = listWithFileNames.Rows.Count / nthreads; // This will tell how many items reach thread mush process.

        List<ManualResetEvent> mres = new List<ManualResetEvent>(); // This guys will help the method to know when the work is done.
        List<StringBuilder> sbuilders = new List<StringBuilder>(); // This will be used to concatenate each bis string.

        for (int i = 0; i < nthreads; i++)
        {
            sbuilders.Add(new StringBuilder()); // Create a new string builder
            mres.Add(new ManualResetEvent(false)); // Create a not singaled ManualResetEvent.

            if (i == 0) // We know were to put the very begining of your where clause
            {
                sbuilders[0].Append("where filename in (");
            }

            // Calculate the last item to be processed by the current thread
            int end = i == (nthreads - 1) ? listWithFileNames.Rows.Count : i * load + load;

            // Create a new thread to deal with a part of the big table.
            Thread t = new Thread(new ParameterizedThreadStart((x) =>
            {
                // This is the inside of the thread, we must unbox the parameters
                object[] vars = x as object[];
                int lIndex = (int)vars[0];
                int uIndex = (int)vars[1];
                ManualResetEvent ev = vars[2] as ManualResetEvent;
                StringBuilder sb = vars[3] as StringBuilder;
                bool coma = false;

                // Concatenate the rows in the string builder
                for (int j = lIndex; j < uIndex; j++)
                {
                    if (coma)
                    {
                        sb.Append(", ");
                    }
                    else
                    {
                        coma = true;
                    }

                    sb.Append("'").Append(listWithFileNames.Rows[j]["Filename"]).Append("'");
                }

                // Tell the parent Thread that your job is done.
                ev.Set();
            }));

            // Start the thread with the calculated params
            t.Start(new object[] { i * load, end, mres[i], sbuilders[i] });
        }

        // Wait for all child threads to finish their job
        WaitHandle.WaitAll(mres.ToArray());

        // Concatenate the big string.
        for (int i = 1; i < nthreads; i++)
        {
            sbuilders[0].Append(", ").Append(sbuilders[i]);
        }

        sbuilders[0].Append(")"); // Close your where clause

        // Return the finished where clause
        return sbuilders[0].ToString();
    }

    // Returns empty
    return whereClause;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:40:32.250

以下 linq 语句在第一列上有一个 where 子句，并在变量中连接第三列。

```
 string CSVValues = String.Join(",", dtOutput.AsEnumerable()
                                                .Where(a => a[0].ToString() == value)
                                                .Select(b => b[2].ToString())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:45:11.350

第 1 步 - 通过分析器运行它，确保在优化时查看正确的内容。

举个例子，我们有一个问题，我们确信数据库交互很慢，当我们运行分析器时，数据库几乎没有出现。

也就是说，可能要尝试的事情：

*   如果您有可用内存，请将查询转换为列表，这将强制读取完整的数据库。否则，linq 可能会分块加载执行多个数据库查询。
*   将工作推送到数据库 - 如果您可以创建一个查询而不是修剪您正在查看的数据，甚至为您计算字符串，那可能会更快
*   如果这是经常运行查询但数据很少更改的情况，如果您使用的是远程数据库，请考虑将数据复制到本地数据库（例如 sqlite）。
*   如果您使用的是本地 sql-server，请尝试使用 sqlite，它在很多方面都更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:45:29.757

```
var value = dataTable
            .AsEnumerable()
            .Select(row => row.Field<string>("columnName"));

var colValueStr = string.join(",", value.ToArray()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T16:46:43.183

尝试使用表达式在表中添加一个虚拟列。像这样的东西：

```
DataColumn dynColumn = new DataColumn();

{
    dynColumn.ColumnName = "FullName";
    dynColumn.DataType = System.Type.GetType("System.String");
    dynColumn.Expression = "LastName+' '-ABC";
}
UserDataSet.Tables(0).Columns.Add(dynColumn); 
```

稍后在您的代码中，您可以改用此虚拟列。您不需要旋转任何循环来连接字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T17:57:38.913

尝试使用并行for循环..这是示例代码..

```
Parallel.ForEach(dataTable.AsEnumerable(),
            item => { str += ((item as DataRow)["ColumnName"]).ToString(); }); 
```

# javascript - Ajax 语法：未捕获的 SyntaxError：意外的标识符

> ID：10741697
> 
> 赞同：3
> 
> 时间：2012-05-24T16:36:03.233
> 
> 标签：javascript, jquery

我收到这个 Uncaught SyntaxError: Unexpected identifier error ，为什么？我想我已经正确使用了语法？

```
$.ajax({
    url: "loadcontent1.php",
    data: {
        lastid: '$(".postitem").size()',
        location: '$("#location").val()',
        rstatus: '$("#rstatus").val()',
        gender: '$("#gender").val()'
    }
    success: function(html) {
        Uncaught SyntaxError: Unexpected identifier
        if (html) {
            $("#contentwrapper").append(html);
            $('div#ajaxloader').hide();

            $("#contentwrapper").masonry('reload');
            FB.XFBML.parse();

        } else {
            $('div#ajaxloader').html('<center>No more Images.</center>');
        }

    }
});​ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T16:39:12.007

你在后面省略了逗号`data`

```
$.ajax({
    url: "loadcontent1.php",
    data: {
        lastid: $(".postitem").size(),
        location: $("#location").val(),
        rstatus: $("#rstatus").val(),
        gender: $("#gender").val() // not strings!
    }//, comma here!
    success: function(html) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:39:46.843

您正在使用 jQuery 代码发送字符串，但您缺少逗号

```
data: {
    lastid: '$(".postitem").size()',  <--no single quotes
    location: '$("#location").val()', <--no single quotes
    rstatus: '$("#rstatus").val()', <--no single quotes
    gender: '$("#gender").val()' <--no single quotes
}  <--no comma 
```

固定它应该是

```
data: {
    lastid: $(".postitem").size(), 
    location: $("#location").val(),
    rstatus: $("#rstatus").val(),
    gender: $("#gender").val() 
}, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T16:40:00.800

您似乎在右花括号和成功之间缺少逗号：。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T16:39:18.337

前面少了一个逗号`"success"`

# jquery - 如何更改预加载功能？

> ID：10741701
> 
> 赞同：0
> 
> 时间：2012-05-24T16:36:20.073
> 
> 标签：jquery, image, loading, image-preloader

我需要有关我网站[http://www.luischales.com/miami-quinces-photography.html](http://www.luischales.com/miami-quinces-photography.html)上的代码的帮助。第一次打开幻灯片时，直到所有图像都加载完毕（我认为），并且客户不喜欢等待，所以我的问题是，有人可以指出一种按需加载图像的方法吗？或者至少加载第一张图像然后再加载其他图像？

***代码***

```
 //<![CDATA[
        $(function() {
            var $tf_bg              = $('#tf_bg'),
                $tf_bg_images       = $tf_bg.find('img'),
                $tf_bg_img          = $tf_bg_images.eq(0),
                $tf_thumbs          = $('#tf_thumbs'),
                total               = $tf_bg_images.length,
                current             = 0,
                $tf_content_wrapper = $('#tf_content_wrapper'),
                $tf_next            = $('#tf_next'),
                $tf_prev            = $('#tf_prev'),
                $tf_loading         = $('#tf_loading');

            //preload the images                
            $tf_bg_images.preload({
                onComplete  : function(){
                    $tf_loading.hide();
                    init();
                }
            });

            //shows the first image and initializes events
            function init(){
                //get dimentions for the image, based on the windows size
                var dim = getImageDim($tf_bg_img);
                //set the returned values and show the image
                $tf_bg_img.css({
                    width   : dim.width,
                    height  : dim.height,
                    left    : dim.left,
                    top     : dim.top
                }).fadeIn();

                //resizing the window resizes the $tf_bg_img
            $(window).bind('resize',function(){
                var dim = getImageDim($tf_bg_img);
                $tf_bg_img.css({
                    width   : dim.width,
                    height  : dim.height,
                    left    : dim.left,
                    top     : dim.top
                });
            });

                //expand and fit the image to the screen
                $('#tf_zoom').live('click',
                    function(){
                    if($tf_bg_img.is(':animated'))
                        return false;

                        var $this   = $(this);
                        if($this.hasClass('tf_zoom')){
                            resize($tf_bg_img);
                            $this.addClass('tf_fullscreen')
                                 .removeClass('tf_zoom');
                        }
                        else{
                            var dim = getImageDim($tf_bg_img);
                            $tf_bg_img.animate({
                                width   : dim.width,
                                height  : dim.height,
                                top     : dim.top,
                                left    : dim.left
                            },350);
                            $this.addClass('tf_zoom')
                                 .removeClass('tf_fullscreen'); 
                        }
                    }
                );

                //click the arrow down, scrolls down
                $tf_next.bind('click',function(){
                    if($tf_bg_img.is(':animated'))
                        return false;
                        scroll('tb');
                });

                //click the arrow up, scrolls up
                $tf_prev.bind('click',function(){
                    if($tf_bg_img.is(':animated'))
                    return false;
                    scroll('bt');
                });

                //mousewheel events - down / up button trigger the scroll down / up
                $(document).mousewheel(function(e, delta) {
                    if($tf_bg_img.is(':animated'))
                        return false;

                    if(delta > 0)
                        scroll('bt');
                    else
                        scroll('tb');
                    return false;
                });

                //key events - down / up button trigger the scroll down / up
                $(document).keydown(function(e){
                    if($tf_bg_img.is(':animated'))
                        return false;

                    switch(e.which){
                        case 38:    
                            scroll('bt');
                            break;  

                        case 40:    
                            scroll('tb');
                            break;
                    }
                });
            }

            //show next / prev image
            function scroll(dir){
                //if dir is "tb" (top -> bottom) increment current, 
                //else if "bt" decrement it
                current = (dir == 'tb')?current + 1:current - 1;

                //we want a circular slideshow, 
                //so we need to check the limits of current
                if(current == total) current = 0;
                else if(current < 0) current = total - 1;

                //flip the thumb
                $tf_thumbs.flip({
                    direction   : dir,
                    speed       : 400,
                    onBefore    : function(){
                        //the new thumb is set here
                        var content = '<span id="tf_zoom" class="tf_zoom"><\/span>';
                        content     +='<img src="' + $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
                        $tf_thumbs.html(content);
                }
                });

                //we get the next image
                var $tf_bg_img_next = $tf_bg_images.eq(current),
                    //its dimentions
                    dim             = getImageDim($tf_bg_img_next),
                    //the top should be one that makes the image out of the viewport
                    //the image should be positioned up or down depending on the direction
                        top = (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

                //set the returned values and show the next image   
                    $tf_bg_img_next.css({
                        width   : dim.width,
                        height  : dim.height,
                        left    : dim.left,
                        top     : top
                    }).show();

                //now slide it to the viewport
                    $tf_bg_img_next.stop().animate({
                        top     : dim.top
                    },700);

                //we want the old image to slide in the same direction, out of the viewport
                    var slideTo = (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
                    $tf_bg_img.stop().animate({
                        top     : slideTo
                    },700,function(){
                    //hide it
                        $(this).hide();
                    //the $tf_bg_img is now the shown image
                        $tf_bg_img  = $tf_bg_img_next;
                    //show the description for the new image
                        $tf_content_wrapper.children()
                                           .eq(current)
                                           .show();
            });
                //hide the current description  
                    $tf_content_wrapper.children(':visible')
                                       .hide()

            }

            //animate the image to fit in the viewport
            function resize($img){
                var w_w = $(window).width(),
                    w_h = $(window).height(),
                    i_w = $img.width(),
                    i_h = $img.height(),
                    r_i = i_h / i_w,
                    new_w,new_h;

                if(i_w > i_h){
                    new_w   = w_w;
                    new_h   = w_w * r_i;

                    if(new_h > w_h){
                        new_h   = w_h;
                        new_w   = w_h / r_i;
                    }
                }   
                else{
                    new_h   = w_w * r_i;
                    new_w   = w_w;
                }

                $img.animate({
                    width   : new_w + 'px',
                    height  : new_h + 'px',
                    top     : '0px',
                    left    : '0px'
                },350);
            }

            //get dimentions of the image, 
            //in order to make it full size and centered
            function getImageDim($img){
                var w_w = $(window).width(),
                    w_h = $(window).height(),
                    r_w = w_h / w_w,
                    i_w = $img.width(),
                    i_h = $img.height(),
                    r_i = i_h / i_w,
                    new_w,new_h,
                    new_left,new_top;

                if(r_w > r_i){
                    new_h   = w_h;
                    new_w   = w_h / r_i;
                }
                else{
                    new_h   = w_w * r_i;
                    new_w   = w_w;
                }

                return {
                    width   : new_w + 'px',
                    height  : new_h + 'px',
                    left    : (w_w - new_w) / 2 + 'px',
                    top     : (w_h - new_h) / 2 + 'px'
                };
                }
        });
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:48:58.447

您可以尝试从 jQuery 选择器中排除第一张图片：

```
$('.photos').not('.exclude-photo').preload(); 
```

另一个选项可能是这个[jQuery Image Preload Plugin](https://github.com/farinspace/jquery.imgpreload)来查看 API 是否更符合您想要完成的任务。

# java - 以静默模式安装 java 1.7 运行时 jre-7u4（无用户交互）

> ID：10741706
> 
> 赞同：1
> 
> 时间：2012-05-24T16:36:40.323
> 
> 标签：java, installation

我想以“静音”模式安装 jre-7u4-windows-i586.exe 和 jre-7u4-windows-x64.exe（不出现任何屏幕或提示）。

对于 java 1.6，命令开关是 jre-6u21-windows-x64.exe /passive "/qb ADDLOCAL=ALL" ，它可以进行完全静默安装。

对于 java 1.7，jre-7u4-windows-x64.exe /passive "/qb ADDLOCAL=ALL" 不起作用 jre-7u4-windows-x64.exe /q（或 /qn）不起作用

安装程序运行，但提示确认。

有谁知道这个功能是否被破坏？（是错误的还是故意的？）或者如果有其他开关可以与 1.7 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:04:37.200

正如我所知道的 JRE7 /s 意味着静默安装模式，所以你应该试试这个：
jre-6u21-windows-x64.exe /s INSTALLDIR=DRIVE:\FOLDER...

# java - Java EE 6 Java 消息服务无法跟踪 NullPointerException

> ID：10741708
> 
> 赞同：0
> 
> 时间：2012-05-24T16:36:53.280
> 
> 标签：java, jakarta-ee, service, jms, messaging

我正在尝试在我的 GlassFish 项目中设置 JMS。

我正在遵循书中的指导方针：“Java EE 6 with GlassFish 3 Application Server”。

我将连接器资源设置为“jms/GlassFishWebDevConnectionFactory”并将队列设置为“jms/GlassFishWebDevQueue”。

以下代码是从 Singleton Bean 中执行的：

```
public class MessageSender {
    @Resource(mappedName = "jms/GlassFishWebDevConnectionFactory")
    private ConnectionFactory connectionFactory;
    @Resource(mappedName = "jms/GlassFishWebDevQueue")
    private Queue queue;
    public void postMessages() {
        try {
            Connection con = connectionFactory.createConnection();
        }catch (JMSException ex) {
           Logger.getLogger(MessageSender.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

应用程序的初始化在“Connection con = connectionFactory.createConnection();”处失败 带有 NullPointerException。

这是完整的堆栈跟踪：

```
javax.ejb.CreateException: Initialization failed for Singleton WorldBean
    at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:547)
    at com.sun.ejb.containers.AbstractSingletonContainer.access$100(AbstractSingletonContainer.java:79)
    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:719)
    at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:451)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:216)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:210)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:177)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:155)
    at org.glassfish.ejb.startup.EjbApplication.start(EjbApplication.java:177)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:636)
Caused by: java.lang.NullPointerException
    at tier_controller.MessageSender.postMessages(MessageSender.java:31)
    at tier_controller.WorldBean.init(WorldBean.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.sun.ejb.containers.interceptors.BeanCallbackInterceptor.intercept(InterceptorManager.java:1009)
    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:65)
    at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:113)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCallback(SystemInterceptorProxy.java:138)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.init(SystemInterceptorProxy.java:120)
    at sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:964)
    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:65)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:393)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:376)
    at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:538)
    ... 40 more<code> 
```

我现在已经插手了好几个小时，我检查了我发现的每个提示两次。所需资源正在运行，@Resource 语法也应该有效。

对于如何跟踪或修复此错误，我完全不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:56:19.337

如果您想调试它以找出问题所在 - 您可以在 jpda 选项中设置挂起标志，以便您能够在应用程序开始初始化*之前连接到调试。*
另外，如果需要，您可以在 IDE 中为 NPE 设置断点异常（在 Intellij Idea 中运行->查看断点->..）。

# c# - Sprites、XNA、C# 和优雅

> ID：10741711
> 
> 赞同：1
> 
> 时间：2012-05-24T16:37:05.080
> 
> 标签：c#, animation, xna, sprite

我回来了。再次。:3 现在，我正在做我的 RPG 项目（只是为了好玩，我不幻想它会很容易），我已经到了编写底层框架的地步，我现在想写一个优雅的方法来从精灵映射中绘制精灵。

目前我正在使用来自神奇宝贝钻石的精灵图（只是为了测试，因为它很容易获得。我不会制作下一个“神奇宝贝”游戏），其中主要英雄在一行中的所有三个方向行走，37px x 37px 精灵，图像中有 12 个精灵。

图片在这里：[http](http://spriters-resource.com/ds/pkmndiamondpearl/lucas.png) ://spriters-resource.com/ds/pkmndiamondpearl/lucas.png （我目前正在使用“Walking”子集）。

我创建了 SpriteSheet 类（以及 SpriteSheetData 类，它是 spritesheets 集合的 XML 文件的表示）和 SpriteManager 类，所有这些都列在下面：

SpriteSheet.cs

```
namespace RPG.Utils.Graphics
{
/// <summary>
/// Represents a Sprite Sheet. A Sprite Sheet is a graphic that contains a number of frames for animations.
/// These are laid out a set distance apart.
/// </summary>
public struct SpriteSheet
{
    /// <summary>
    /// The name for the texture. Used internally to reference the texture.
    /// </summary>
    [ContentSerializer]
    public string TextureName
    {
        get;
        private set;
    }
    /// <summary>
    /// The file name of the texture.
    /// </summary>
    [ContentSerializer]
    public string TextureFile
    {
        get;
        private set;
    }
    /// <summary>
    /// The width of each sprite in the sprite sheet.
    /// </summary>
    [ContentSerializer]
    public int SpriteWidth
    {
        get;
        private set;
    }
    /// <summary>
    /// The height of each sprite in the sprite sheet.
    /// </summary>
    [ContentSerializer]
    public int SpriteHeight
    {
        get;
        private set;
    }
    /// <summary>
    /// The interval between each frame of animation.
    /// This should be (by default) 100f or 100ms.
    /// </summary>
    [ContentSerializer]
    public float AnimationInterval
    {
        get;
        set;
    }

    /// <summary>
    /// The number of frames per each individual animation.
    /// </summary>
    [ContentSerializer]
    public int AnimationLength
    {
        get;
        set;
    }

    /// <summary>
    /// The texture for this sprite sheet.
    /// </summary>
    [ContentSerializerIgnore]
    public Texture2D Texture
    {
        get;
        set;
    }
} 
```

精灵管理器.cs

```
/// <summary>
/// A sprite manager. Just loads sprites from a file and then stores them.
/// </summary>
public static class SpriteManager
{
    private static Dictionary<string, SpriteSheetData> m_spriteSheets;
    public static Dictionary<string, SpriteSheetData> SpriteSheets
    {
        get
        {
            if (m_spriteSheets == null)
                m_spriteSheets = new Dictionary<string, SpriteSheetData>();
            return m_spriteSheets;
        }
    }
    /// <summary>
    /// Loads all the sprites from the given directory using the content manager.
    /// Sprites are loaded by iterating SpriteSheetData (.xml) files inside the /Sprites/ directory.
    /// </summary>
    /// <param name="mgr">Content Manager.</param>
    /// <param name="subdir">Directory to load.</param>
    public static void LoadAllSprites(ContentManager mgr, string subdir)
    {
        // Get the files in the subdirectory.
        IEnumerable<string> files = Directory.EnumerateFiles(mgr.RootDirectory+"/"+subdir);
        foreach (string f in files)
        {
            // Microsoft, why do you insist on not letting us load stuff with file extensions?
            string fname = f.Replace("Content/", "").Replace(".xnb", "");
            SpriteSheetData data = mgr.Load<SpriteSheetData>(fname);

            string spriteSheetDir = subdir +"/" + data.SpriteSheetName + "/";

            int loaded = 0;
            for (int i = 0; i < data.SpriteSheets.Length; i++)
            {
                loaded++;
                SpriteSheet current = data.SpriteSheets[i];
                current.Texture = mgr.Load<Texture2D>(spriteSheetDir + current.TextureFile);
                data.SpriteSheetMap[current.TextureName] = current;
            }

            Console.WriteLine("Loaded SpriteSheetData file \"{0}\".xml ({1} sprite sheet(s) loaded).", data.SpriteSheetName, loaded);
            SpriteSheets[data.SpriteSheetName] = data;
        }
    }

    /// <summary>
    /// Query if a given Sprite definition file is loaded.
    /// </summary>
    /// <param name="spriteName">
    /// The sprite definition file name (ie, "Hero"). This should correspond with the XML file
    /// that contains the definition for the sprite sheets. It should NOT be the name OF a spritesheet.
    /// </param>
    /// <returns>True if the sprite definition file is loaded.</returns>
    public static bool IsLoaded(string spriteName)
    {
        return SpriteSheets.ContainsKey(spriteName);
    }
} 
```

SpriteSheetData.cs

```
/// <summary>
/// Represents data for a SpriteSheet. These are stored in XML files.
/// </summary>
public struct SpriteSheetData
{
    /// <summary>
    /// The collective name for the sprite sheets.
    /// </summary>
    [ContentSerializer]
    public string SpriteSheetName
    {
        get;
        set;
    }
    /// <summary>
    /// The SpriteSheets in this data file.
    /// </summary>
    [ContentSerializer]
    internal SpriteSheet[] SpriteSheets
    {
        get;
        set;
    }

    [ContentSerializerIgnore]
    private Dictionary<string, SpriteSheet> m_map;
    /// <summary>
    /// The sprite sheet map.
    /// </summary>
    [ContentSerializerIgnore]
    public Dictionary<string, SpriteSheet> SpriteSheetMap
    {
        get
        {
            if (m_map == null)
                m_map = new Dictionary<string, SpriteSheet>();
            return m_map;
        }
    }
} 
```

我用来“读入”精灵的文件是：Sprites/Hero.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<XnaContent>
  <Asset Type="RPG.Utils.Graphics.SpriteSheetData">
    <SpriteSheetName>Hero</SpriteSheetName>
    <SpriteSheets>
      <Item Type="RPG.Utils.Graphics.SpriteSheet">
        <TextureName>HeroWalking</TextureName>
        <TextureFile>hero_walk</TextureFile>
        <SpriteWidth>37</SpriteWidth>
        <SpriteHeight>37</SpriteHeight>
        <AnimationInterval>400</AnimationInterval>
        <AnimationLength>3</AnimationLength>
      </Item>
    </SpriteSheets>
  </Asset>
</XnaContent> 
```

我遇到的问题是我不确定如何优雅地组织 1）精灵加载和 2）精灵表的配对（这是游戏的“通用”部分，我打算重复使用，所以我不知道我可以创建多少个实体实例）到一个实体/游戏对象——尤其是玩家（因为这是我现在想要做的）。我不确定如何继续，因此非常感谢任何帮助。

如果您需要更多代码（上帝保佑），请询问并提供给您：3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:54:01.427

明智地组织，我一直喜欢以一种特殊的方式来做，而您使用的结构非常适合它。

我喜欢像这样加载我的对象：

1.  有一个级别文件（XML 或 TXT）来描述应该为 X 任务/级别加载的内容。
2.  用循环遍历这个，每个要加载的对象都有自己的文件（很像你的 Hero.xml）。
3.  这些中的每一个都是通过处理所有数据加载的级别管理器加载的。
4.  绘制并继续通过关卡管理器运行关卡。

然后，很大程度上取决于您如何调用您的级别经理并实施它。我喜欢使用这些关卡配置文件以及关卡管理器，因为这样您就可以在整个关卡管理器中共享资源。因此，您可以将关卡管理器中的引用纹理与字典一起使用，并将这些纹理传递给您加载的关卡中的游戏对象，这样您就不会拥有多个加载的纹理。

根据我在 C# 中的了解，“通过引用传递的东西”往往会阻止这成为一个问题，但我来自 C++ 领域，这种针对您的关卡的内容管理是一个好主意。

至于您的播放器，您可以创建一个与您的关卡管理器接口的播放器管理器类，以便播放器可以在关卡和加载之间保持持久性。

无论如何，这就是我组织它的方式。

干杯!

# html - 链接在第一次点击 oscommerce 时不起作用

> ID：10741712
> 
> 赞同：1
> 
> 时间：2012-05-24T16:37:08.773
> 
> 标签：html, oscommerce

我现在维护一个 oscommerce 网站。第一次访问该网站时，主页上有一些链接，如下所示。

```
http://website.com/index.php?cPath=2?osCsid=80b28bcd9ad38e38e7ded7e200f87b30 
```

此单击导致**Not Found**错误：

在此服务器上找不到请求的 URL /the-carriers-c-2。

但是，如果我返回主页并单击，则此链接可以正常工作。

在第二次访问时，URL 更改为：`http://website.com/the-carriers-c-2.html`

这似乎是一个非常特殊的问题，我是 oscommerce 的新手，所以不确定原因是什么。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:03:54.543

您正在运行什么版本的 oscommerce。

早期版本的 oscommerce 需要对 SEO URL 进行第三方模块。我同意随机，这是系统生成的 url。

您的根目录中应该有一个 .htaccess 文件，它可能被重命名或丢失，您还需要在您的 apache Web 服务器上运行 MOD URL REWRITE，以便 apache 知道正确处理这些类型的 url。

# objective-c - 在 Core Data 中创建两个实体之间的关系

> ID：10741714
> 
> 赞同：0
> 
> 时间：2012-05-24T16:37:29.570
> 
> 标签：objective-c, core-data, entity-relationship, one-to-many

我在核心数据中的两个实体之间有一个简单的有很多关系：

> 团队 <-------->> 游戏

当我将新的游戏托管对象插入上下文时，我需要在模型层查询团队实体的一些属性。但是，我使用`awakeFromInsert`的时候关系还没有设置，所以`team`是`nil`。

```
// game.m
- awakeFromInsert
{
    [super awakeFromInsert];

    if ([self team] isActive] {
        //.... set game properties
    }
} 
```

有没有办法在调用插入之前建立关系并在之后设置关系：

```
Game *newGame = [NSEntityDescription insertNewObjectForEntityForName:@"Game" 
                                            inManagedObjectContext:managedObjectContext];
[newGame setTeam:team]; 
```

在 Rails 中我会使用`@team.games.build`，但这在 Core Data 中似乎是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:03:19.023

我怀疑您将需要一个自定义方法，例如`+ (Game *)insertGameForTeam:(Team *)team`并在那里进行`team`检查，或者`- (void)willSave`如果您需要将其保持在模型级别，则处理关系条件。

仅使用默认逻辑，对象在您完成插入之前不存在，并且在它存在之前您不能将其与另一个对象关联。

# c# - EF 4.1 Code First - 添加列

> ID：10741716
> 
> 赞同：10
> 
> 时间：2012-05-24T16:37:42.257
> 
> 标签：c#, entity-framework-4.1

我已经设置了数据库，我想在模型中添加一个新字段，在表中添加一个新列，有没有办法可以在不丢失所有数据的情况下做到这一点？通常，如果您删除数据库，它将自动重新创建所有内容，但我不想丢失数据。我使用 SQL Server 2008 作为数据库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T16:40:57.607

您将需要使用 EF 迁移将新列添加到数据库中。[您可以在此处](http://msdn.microsoft.com/en-US/data/jj554735)和[此处](http://msdn.microsoft.com/en-US/data/jj591621)阅读有关 EF 迁移的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:51:07.273

如果您首先使用代码，我总是在这种情况下手动将列添加到数据库中。不幸的是，没有简单的方法可以使用 Code First 自动执行增量模型更新。

例如，EF Code First 自身的错误之一甚至将手动更新指定为最佳选项：

> 自数据库创建以来，支持“您的上下文”上下文的模型已更改。手动删除/更新数据库，或使用 IDatabaseInitializer 实例调用 Database SetInitializer。例如，DropCreateDatabaseIfModelChanges 策略将自动删除并重新创建数据库，并可选择使用新数据为其播种。

# mysql - mysql 显示 innodb 状态输出

> ID：10741718
> 
> 赞同：7
> 
> 时间：2012-05-24T16:37:42.920
> 
> 标签：mysql, database, buffer, innodb, status

我正在尝试查看运行时通常显示的缓冲池和行统计信息`SHOW INNODB STATUS`。

但是由于某种原因，这个信息没有被显示，只是很多记录锁。现在有人如何查看缓冲池信息吗？

**更新**

再次阅读 MySQL 文档后，我注意到了这一点：

```
InnoDB Monitor output is limited to 64,000 bytes when produced using 
the SHOW ENGINE INNODB STATUS statement. This limit does not apply to 
output written to the server's error output. 
```

**答案** 我找到了我正在寻找的答案，

这里：[寻求完整的 InnoDB 状态](http://www.mysqlperformanceblog.com/2008/10/31/full-innodb-status/)

还有如何清除这里的死锁：[如何在 MySQL 中故意造成死锁](http://www.xaprb.com/blog/2006/08/08/how-to-deliberately-cause-a-deadlock-in-mysql/)

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T16:46:21.053

尝试这个：

```
SHOW ENGINE INNODB STATUS\G 
```

有关更多信息，请参见此处[http://dev.mysql.com/doc/refman/5.0/en/innodb-monitors.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-monitors.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T17:48:55.860

再次阅读 mysql 文档后，我注意到：“使用 SHOW ENGINE INNODB STATUS 语句生成时，InnoDB Monitor 输出限制为 64,000 字节。此限制不适用于写入服务器错误输出的输出。”

以下是有关 inndb 状态的更多信息：A quest for the full InnoDB status

还有如何清除这里的死锁：如何在 MySQL 中故意造成死锁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:26:03.447

MySQL 在其 INFORMATION_SCHEMA 数据库中没有 InnoDB 缓冲池

有趣的是，XtraDB（用于 MariaDB 和 Percona Server）确实有 INFORMATION_SCHEMA.INNODB_BUFFER_POOL_PAGES。

如果确实需要查看 InnoDB Buffer Pool，请切换到 MariaDB 或 Percona Server。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:42:32.037

运行这个：

```
show global status like 'innodb_buffer_pool%'; 
```

# javascript - 以下语法是否正确评估？

> ID：10741726
> 
> 赞同：0
> 
> 时间：2012-05-24T16:38:30.550
> 
> 标签：javascript, if-statement

我想知道以下语法是否像我认为的那样评估：

```
Cluster.prototype.test_json_availability = function() {
    return Modernizr.addTest('test_json', function() {
    return (typeof $.browser.msie !== 'undefined' && $.browser.msie === true && $.browser.version < 7 && typeof window.JSON === 'undefined') ? false : true;
    });
}; 
```

假设我确实使用 MS 浏览器，这意味着它将返回 true 吗？还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:27:46.197

您应该通过应用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)来改变条件：

```
function test_json() {
    return typeof $.browser.msie === 'undefined'
      || $.browser.msie !== true
      || $.browser.version > 6
      || typeof window.JSON !== 'undefined';
} 
```

这将大大简化条件，您将能够找到问题的答案。

# sql - 无需逐行处理即可透视或转置 SQL Server 2005 表数据

> ID：10741728
> 
> 赞同：1
> 
> 时间：2012-05-24T16:38:51.407
> 
> 标签：sql, tsql, sql-server-2005, pivot-table

是否可以在没有逐行处理的情况下在 SQL Server 2005 中执行以下操作？如果是这样，怎么做？:)

我的桌子是这样的：

```
╔════════════╦═══════════╦════════════╗
║ CustomerID ║ FirstName ║  LastName  ║
╠════════════╬═══════════╬════════════╣
║          1 ║ George    ║ Washington ║
║          2 ║ Benjamin  ║ Franklin   ║
║          3 ║ Thomas    ║ Jefferson  ║
╚════════════╩═══════════╩════════════╝ 
```

我这样输出上表：

```
╔════════════╦══════════╦════════════╗
║   Field    ║ IntValue ║ TextValue  ║
╠════════════╬══════════╬════════════╣
║ CustomerID ║ 1        ║ NULL       ║
║ FirstName  ║ NULL     ║ George     ║
║ LastName   ║ NULL     ║ Washington ║
║ CustomerID ║ 2        ║ NULL       ║
║ FirstName  ║ NULL     ║ Benjamin   ║
║ LastName   ║ NULL     ║ Franklin   ║
║ CustomerID ║ 3        ║ NULL       ║
║ FirstName  ║ NULL     ║ Thomas     ║
║ LastName   ║ NULL     ║ Jefferson  ║
╚════════════╩══════════╩════════════╝ 
```

谢谢！杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:06:56.033

虽然我仍然建议在使用 SELECT 的层执行这种旋转要好得多，但这里有一个想法。

```
DECLARE @x TABLE(CustomerID INT, FirstName VARCHAR(32), LastName NVARCHAR(32));

INSERT @x SELECT 1, 'George', 'Washington'
UNION ALL SELECT 2, 'Benjamin', 'Franklin'
UNION ALL SELECT 3, 'Thomas', 'Jefferson';

;WITH x AS
(
  SELECT 
    Field = 'CustomerID', IntValue = CustomerID, TextValue = NULL,
    rn = ROW_NUMBER() OVER (ORDER BY CustomerID)
    FROM @x
  UNION ALL
  SELECT 
    Field = 'FirstName', NULL, FirstName,
    rn = ROW_NUMBER() OVER (ORDER BY CustomerID)
    FROM @x
  UNION ALL
  SELECT
    Field = 'LastName', NULL, LastName,
    rn = ROW_NUMBER() OVER (ORDER BY CustomerID)
    FROM @x
)
SELECT Field, IntValue, TextValue
FROM x
ORDER BY rn, Field; 
```

为什么在稍后的演示文稿中这样做会更好？因为这个“解决方案”会扫描表 3 次。消费者仍然必须使用循环来显示结果......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:00:51.837

这只会扫描一次表（从@Aaron 的答案中借用表变量）。

```
SELECT Field, 
       IntValue, 
       TextValue 
FROM   @x 
       CROSS APPLY (SELECT 'CustomerID', CustomerID,  NULL 
                    UNION ALL 
                    SELECT 'FirstName', NULL, FirstName
                    UNION ALL 
                    SELECT 'LastName', NULL, LastName) 
        CA(Field, IntValue, TextValue) 
ORDER BY CustomerID 
```

# c# - (TCP) 服务器/客户端程序

> ID：10741731
> 
> 赞同：0
> 
> 时间：2012-05-24T16:39:00.143
> 
> 标签：c#, iphone, tcp, client

我想编写（TCP）服务器客户端程序。客户端代码应该在 Objetive-C 中。服务器端代码应该在 C# 中。

我写了一些代码。这是工作。但问题是；我正在将消息从客户端发送到服务器。服务器正在接收消息。但收到的消息看起来像“加密”数据。

**代码：**

```
**Objective-C**
const uint8_t *rawdata = (const uint8_t*)[@"Welcome..." UTF8String];
[outputStream write:rawdata maxLength:strlen((const char *)rawdata)];

**C#**
char[] chara = new char[data.Length / sizeof(char)];
System.Buffer.BlockCopy(data, 0, chara, 0, chara.Length);
String content = new String(chara);
Console.WriteLine("Received data : " + content); 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:51:36.493

我做了以下，希望对你有帮助：

在客户端（目标 C）我发送数据如下

```
const uint8_t *str = (uint8_t *) [messageToSend cStringUsingEncoding:NSUTF8StringEncoding]; 
```

在我不使用的 C# 服务器上`char[]`，`byte[]`我从 Socket 读取数据，然后将它们转换`string`为如下（假设`byte`数组名为`data`）：

```
string messageReceived = Encoding.UTF8.GetString(data, 0, bytesRead); 
```

`bytesRead` is an integer that holds the size of bytes read (I get it from the Stream since I use TCP Sockets).

I hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:47:49.937

看起来您正在以 UTF-8 格式发送数据，但尝试将其读取为 UTF-16。您需要使用[Encoding.UTF8](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)进行转换：

```
 var content = new UTF8Encoding(true,true).GetString(data) 
```

# web-applications - jQuery Mobile 背景图像未在全屏 iPad Web 应用程序上显示

> ID：10741733
> 
> 赞同：3
> 
> 时间：2012-05-24T16:39:07.530
> 
> 标签：web-applications, jquery-mobile, mobile-website

我已经像这样在 data-role="page" 元素上设置了背景

```
<div data-role="page" style="background: transparent url('img/background.jpg') no-repeat;" > 
```

它在桌面浏览器和 iPad Safari 浏览器上运行良好。

我遇到的问题是，当您将网站作为“应用程序”添加到主屏幕时，它是一个全屏网络应用程序。不显示背景...

我尝试通过样式表和内联设置它，两种方式都给我同样的问题。

我完全不知道为什么这不起作用。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T13:37:22.370

最后，这对我有用。

```
<div data-role="page" id="home" style="background: #000000 
    url('img/background.jpg') repeat;"> 
```

不能通过 css 文件工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T23:39:00.490

将此应用于元素：

```
.#target-element {
    background : transparent url(YOUR_URL) 0 0 no-repeat fixed !important;
    background-size : cover;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T20:32:51.870

创建一个 css 类并`!important`以覆盖框架 css 结束每个属性。这就是为什么它只能内联工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T16:27:00.990

在您的 CSS 文件中：

```
[data-role=page] {
    background: transparent url('img/background.jpg') no-repeat;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T03:42:15.197

试试这个

```
<style type="text/css">
.ui-page 
{

    background-image: url("img1.jpg");
    background-attachment:fixed;
    background-repeat: no-repeat;
    background-size: 100%;
}
</style> 
```

# powershell - vbscript 不工作，语句结束错误或丢失）

> ID：10741738
> 
> 赞同：0
> 
> 时间：2012-05-24T16:39:13.550
> 
> 标签：powershell, vbscript

我试图制作一个 vbscript，它将列出 dir 中的所有内容并通读每个文件，提取数据以使用该数据作为参数来操作和运行 powershell 脚本。我发现以下开始，但它不起作用。有人可以帮忙吗？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    ' make a reference to a directory
    Dim di As New IO.DirectoryInfo("c:\")
    Dim diar1 As IO.FileInfo() = di.GetFiles()
    Dim dra As IO.FileInfo

    'list the names of all files in the specified directory
    For Each dra In diar1
        ListBox1.Items.Add(dra)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:49:42.220

VBScript 和 VB 很像，不过距离上次用 VB 已经很久了……

AFAIR ListBox1.Items.Add() 需要和 Item 或字符串作为参数，而不是 FileInfo 对象尝试使用 ListBox1.Items.Add(FileInfo.FullName)

# tsql - 为什么 GETDATE 不断在 MERGE 语句中被调用？

> ID：10741742
> 
> 赞同：0
> 
> 时间：2012-05-24T16:39:26.850
> 
> 标签：tsql, merge

我有一个存储过程，它有一个 datetime var，它在 proc 的开头使用 GETDATE 设置，然后调用 MERGE 语句。

发生的事情是没有一个日期被盖章，而是日期定期更改。这是一个长期运行的过程。

有没有办法获得一个日期并在所有记录上盖章？

```
create proc MyProc as
declare @insertdate datetime
set @insertdate = getdate()
merge dbo.something as target
using (select col1,col2 from dbo.another) as source
on (target.col1 = source.col1 and target.col2 = source.col2)
when not matched by target
insert (col1, col2, insertdate) values (source.col1, souce.col2, @insertdate); 
```

# websocket - 如何在浏览器和服务器之间传输数据结构

> ID：10741743
> 
> 赞同：3
> 
> 时间：2012-05-24T16:39:28.303
> 
> 标签：websocket, comet

在交互式 Web 应用程序的上下文中，尤其是那些使用 websockets 等技术的库，我们如何在客户端浏览器和服务器之间传输数据结构（例如地图、列表、集合等）？到目前为止，我遇到的示例仅传递字符串。

这种支持是否取决于所使用的库，或者是否有更通用的机制可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:51:29.600

您可以通过 websocket 发送三件事（从客户端的角度来看）：

*   字符串
*   数组缓冲区
*   斑点

如果您有复合 Javascript 数据结构（地图和数组的层次结构），那么您应该使用 JSON 将它们序列化为字符串并通过 WebSocket 连接将它们作为字符串发送。

如果您有兴趣通过 WebSocket 连接发送二进制字节或文件数据，您仍然可以序列化为字符串（带宽效率低下），或者您可以将数据作为 ArrayBuffers 或 Blob 发送。

注意 1：当发送 ArrayBuffer 或 Blob 导致网络上的二进制 WebSocket 帧时，您的服务器需要支持二进制帧。

注2：当服务器发送二进制帧时，客户端可以选择返回什么类型的对象。这是 WebSocket 对象上的 binaryType 属性，可以设置为“arraybuffer”或“blob”。

注意 3：如果您的浏览器只支持较旧的 WebSocket Hixie 协议系列（例如 iOS Safari），则没有二进制数据，您只能发送和接收字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T17:03:31.713

通常的方式是 JSON 或类似的。

# iphone - 在朋友时间轴上分享信息（Facebook sdk、iPhone）

> ID：10741745
> 
> 赞同：0
> 
> 时间：2012-05-24T16:39:36.390
> 
> 标签：iphone, facebook, facebook-graph-api

我想让我的 iphone 应用程序的用户可以选择在 facebook 上向他们的朋友推荐东西。就像应用程序中的一个按钮一样：“与您的朋友分享”。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:32:36.613

是的，您可以分享来自 iPhone 应用程序的任何消息。您可以使用 facebook graph API 将消息分享到 facebook。

# php - 侦听日志文件时检测 PHP 中丢失的文件处理程序

> ID：10741747
> 
> 赞同：1
> 
> 时间：2012-05-24T16:39:58.653
> 
> 标签：php, linux, logging

我正在尝试用 PHP 构建一个小恶魔，用于分析 linux 系统上的日志文件。（例如，遵循系统日志）。

我设法通过打开文件`fopen`并使用`stream_get_line`. 我的问题从被监控的文件被删除并重新创建时开始（例如在轮换日志时）。然后程序不再读取任何内容，即使文件变得比以前大。

有没有一个优雅的解决方案？ `stream_get_meta_data`没有帮助，`tail -f`在命令行上使用显示同样的问题。

编辑，添加了示例代码我试图将代码精简到最低限度来说明我在寻找什么

```
<?php
$break=FALSE;
$handle = fopen('./testlog.txt', 'r');
do {
    $line = stream_get_line($handle, 100, "\n");
    if(!empty($line)) {
        // do something
        echo $line;
    }
    while (feof($handle)) {
      sleep (5);
      $line = stream_get_line($handle, 100, "\n");
      if(!empty($line)) {
        // do something
        echo $line;
      }
      // a commented on php.net indicated it is possible
      // with tcp streams to distinguish empty and lost
      // does NOT work here  --> need somefunction($handle)
      if($line !== FALSE && $line ='') $break=TRUE;
    }
} while (!$break);
fclose($handle);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:56:47.200

轮换日志文件时，会复制原始文件，然后将其删除，并创建一个同名的新文件。它可能与原始文件具有相同的名称，但具有不同的 inode。索引节点（下面是简化的描述）就像文件的隐藏增量索引号。您可以更改文件的名称，或移动它，但它需要 inode。删除原始日志文件后，您将无法使用相同的文件处理程序重新打开具有相同名称的文件，因为 inode 已更改。您最好的选择是检测故障，并尝试打开新文件。

# flash - 我可以在不使用 FMS 的情况下制作“流媒体”视频吗？

> ID：10741750
> 
> 赞同：0
> 
> 时间：2012-05-24T16:40:03.297
> 
> 标签：flash, video-streaming, flash-media-server

是否可以在不使用 FMS 的情况下创建流式视频。总的来说，我的主要问题是，是否可以在不使用任何技术的情况下流式传输视频（保存在服务器上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:24:01.353

你的问题充其量是模棱两可的。如果我理解正确，是的，您可以在没有 Flash Media Server 的情况下流式传输视频，但是您需要某种流媒体服务器，它可以是从 Windows 媒体服务到免费、免费、跨平台和开销极低的 ffmpeg 的任何东西.

有关使用哪个媒体服务器的详细信息真正属于[Server Fault](http://serverfault.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:52:47.910

答案是肯定的：你可以只传递一个 url`.flv`或`.mp4`文件到[`NetStream.play()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#play%28%29)

# indexing - ADS 9.1 字典中缺少索引

> ID：10741752
> 
> 赞同：2
> 
> 时间：2012-05-24T16:40:18.723
> 
> 标签：indexing, advantage-database-server

有两次，运行 ADS 9.1 的客户端在通过操作系统意外访问文件后遇到 ADD 中缺少索引的情况。

结果是一个缺少索引的 ADD，需要通过将其与已知的良好备份进行比较来重建这些索引。

我们希望更好地了解 Dictionary 如何/为什么丢失索引。这是否表明数据损坏的其他问题？是否有防止这种情况的最佳做法？从 9.10.0.35 升级会阻止这种情况在未来发生吗？

# java - 使用配置的 log4j 跟踪日志中的类

> ID：10741756
> 
> 赞同：0
> 
> 时间：2012-05-24T16:40:52.843
> 
> 标签：java, log4j

我有一个查询可以说我开发了一个简单的类...

```
 class Simple
    {
public static void main(String args[])
    {
    System.out.println("I am a good bouy");
    }
    } 
```

现在在我的应用程序的最前面，假设还有 50 个其他类也被执行，我已经配置 Log4j 来跟踪日志中的日志我只想知道我上面的类什么时候执行然后我应该输入什么类，以便我可以跟踪日志并知道此时我上面的这个类被执行了..它是 log.info("inside Simple class");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:55:46.383

在这个例子之前你需要弄清楚的所有其他事情都会很有用，你所要做的就是修改日志配置，当你打印出日志消息时，它会为你打印类和行。

我不想这么说，因为它很陈词滥调，但 RTFM 是这里最好的方法。此页面将告诉您入门所需的大部分内容：

[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

您只需要为您的记录器提供一个特定的 ConversionPattern 配置选项，它会在您每次记录消息时记录类名甚至行信息。这是该页面的示例：

```
// Import log4j classes.
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

// log4j.appender.console.layout.ConversionPattern=%d{yyyyMMdd HH.mm.ss} %-5p %C.%M(%L): %m%n

class Simple
{
    static Logger logger = Logger.getLogger(Simple.class);

    protected static void doIt()
    {
        logger.info("oh yea, we're doing it!");
        logger.error("  f-you! joe Boy, you are done!");
        logger.fatal("and the world went to bed");
    }

    public static void main(String[] args)
    {
        // BasicConfigurator replaced with PropertyConfigurator.
        PropertyConfigurator.configure(args[0]);

        logger.info("Entering application.");
        doIt();
        logger.info("Exiting application.");
    }
} 
```

其中，在构建和运行时会产生以下结果：

```
14:39:56:--> java -classpath log4j-1.2.15.jar:. Simple log4j.properties 
20120623 14.41.17 INFO  Simple.main(17): Entering application.
20120623 14.41.17 INFO  Simple.doIt(24): oh yea, we're doing it!
20120623 14.41.17 ERROR Simple.doIt(25):   f-you! joe Boy, you are done!
20120623 14.41.17 FATAL Simple.doIt(26): and the world went to bed
20120623 14.41.17 INFO  Simple.main(19): Exiting application. 
```

当您使用这样的转换模式时：%d{yyyyMMdd HH.mm.ss} %-5p %C.%M(%L): %m%n

以下是更多细节：

```
1\. get a copy of log4j jar and put it in directory
2\. create Simple.java in directory
3\. create a file log4j.properties in same directory, put this in file:

log4j.rootLogger=DEBUG, A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{yyyyMMdd HH.mm.ss} %-5p %C.%M(%L): %m%n

4\. compile Simple.java with: javac -classpath log4j-1.2.15.jar:. Simple.java
5\. run it with this: java -classpath log4j-1.2.15.jar:. Simple log4j.properties 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:35:14.273

我们过去常常这样做来跟踪应用程序何时会失败。（如果我正确理解您的问题）我们会进行某种类型的日志记录，以便我们可以跟踪它并确切了解它是如何失败的，以及由于一系列事件而失败的时间。有点像审计线索。我们会添加如下内容。

```
class Simple
{
    public static void main(String args[])
    {
        log.info("Entering " + this.getClass().getName());
        System.out.println("I am a good bouy");
        log.info("Exiting " + this.getClass().getName());
    }
} 
```

当然你也可以把方法名放在那里。完全取决于您的类和方法的执行方式。

# c# - 如何将地理坐标解析为口语？

> ID：10741757
> 
> 赞同：5
> 
> 时间：2012-05-24T16:40:54.090
> 
> 标签：c#, asp.net-mvc-3, geolocation, geospatial

给定一个地方的纬度/经度坐标，我如何确定那里所说的语言？

是否有任何免费数据库可以将地理坐标解析为最可能的语言？还是一个国家的城市或行政区域的一种语言？

或任何网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:02:20.950

您可以使用[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/)提供的服务 如果您有坐标，您可以使用[Reverse Geocoding (Address Lookup)](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

[在此处](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)查看有关它的全部信息

拿到国家的名字后，就可以利用框架的[全球化](http://msdn.microsoft.com/en-us/library/1021kkz0%28v=vs.100%29.aspx)来得到你所需要的。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:58:32.473

使用这样的服务[对](http://www.geonames.org/export/web-services.html#countrycode)纬度/经度进行反向地理编码。这将为您提供国家/地区信息。在线可能有一些东西可以帮助您将国家/地区代码与语言匹配。如果不是，为它创建查找表应该不难。

# vim - 使用带有 taglist 插件的 gvim 选项卡

> ID：10741758
> 
> 赞同：1
> 
> 时间：2012-05-24T16:40:56.670
> 
> 标签：vim, vim-plugin

我一直在考虑将 taglist 插件与 gvim 一起使用，但我遇到的困难之一是它不能以我想要的方式与 gvim 选项卡一起使用。当用户启动 taglist 时，它只出现在当前选项卡中；据我所知，用户在切换到尚未打开的选项卡时需要启动另一个标记列表。

我的问题是是否有某种方法可以打开单个标记列表，每次用户切换到另一个选项卡时都会更新到相应的缓冲区，在窗口一侧留下相同（但更新的）标记列表。

我看到的另一种可能性是使用 Mini Buffer Explorer 插件，它主要以我想要的方式与 taglist 交互。但是，我更喜欢 gvim 选项卡的外观，并且通常发现 gvim 选项卡在处理某些事情（例如重新排序）时更灵活。综上所述，虽然我最感兴趣的是配置 taglist 如何与 gvim 选项卡一起工作，但如果它们允许更大的灵活性，我也愿意考虑其他可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:30:45.270

不可以。由于 Vim 中标签的设计方式，您无法在标签之间拥有*真正的*持久窗口。

您可以[像某些人使用 NERDTree 一样](https://stackoverflow.com/questions/1979520/auto-open-nerdtree-in-every-tab)解决这种情况：

```
autocmd VimEnter * TlistOpen 
```

（但它很丑）或应对 Vim 不是也不能成为您在切换之前使用多年的编辑器/IDE 的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:58:36.690

我使用 vim 选项卡多年并忍受这样的问题，然后尝试 ctrlP 和 lusty 之类的插件，我尝试切换到缓冲区，阅读：http: [//leonid.shevtsov.me/en/why-vim-tabs-are -different-from-any-other-editor](http://leonid.shevtsov.me/en/why-vim-tabs-are-different-from-any-other-editor)，并完全放弃了 vim 中的选项卡，现在事情变得更有意义了。

（但不要使用迷你缓冲区资源管理器，它是邪恶的，精力充沛的方式更好，并且使用最近使用的自动重新排序）

# android - 有没有人有一个简短的 Android 和 Cloud SQL 示例

> ID：10741762
> 
> 赞同：3
> 
> 时间：2012-05-24T16:41:11.040
> 
> 标签：android, google-cloud-sql

我意识到 Google App Engine (GAE) 非常强大，我想确定创建数据库模式（在 Android 之外）并开始填充数据库（一旦部署了我的 Android 应用程序）的正确方法。然后我想查询数据库（Android 之外）。我希望这将是一个 10 到 20 行的练习，但它正在变成我预期的更艰巨的任务。

# 带外步骤

1.  使用适当的 GAE 授权通过命令行创建数据库。
2.  使用适当的 GAE 授权通过命令行查询数据库。

我想重申，我不想编写 Java 代码来创建或查询数据库。与使用 Java 相比，我对直接使用 SQL 或类似 SQL 的语言更感兴趣。

# 安卓步骤

1.  使用适当的 GAE 授权、加密等将行插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:42:05.980

我意识到这是一篇旧帖子，但对于通过搜索找到这个的人来说，下面的链接是相关的，并且包含一个示例 android 代码：

[https://developers.google.com/appengine/docs/java/endpoints/consume_android](https://developers.google.com/appengine/docs/java/endpoints/consume_android)

另外，Google Eclipse 插件也支持创建 App Engine Android 项目，参见： [https ://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:59:12.007

以下是向 Cloud SQL 实例发出 SQL 语句的两种方法：

[https://developers.google.com/cloud-sql/docs/commandline](https://developers.google.com/cloud-sql/docs/commandline)

[https://developers.google.com/cloud-sql/docs/sql_prompt](https://developers.google.com/cloud-sql/docs/sql_prompt)

至于从 Android 向数据库中插入行，您需要编写一个 GAE 应用程序来充当代理。然后，该应用程序可以公开 REST API 或您想要的任何 API。

# git - Git 历史和变基问题

> ID：10741763
> 
> 赞同：1
> 
> 时间：2012-05-24T16:41:11.750
> 
> 标签：git, rebase, git-rebase, git-commit

我对我的本地仓库进行了提交，然后我将其推送到了原点，然后我修改了提交并尝试推送它，但我收到一个错误，说我需要从原点拉出，我做了那个并且发生了冲突我修复了它并将更改提交到本地和远程存储库。现在我的提交历史很糟糕，它是：

![在此处输入图像描述](../Images/20a9f3768e81e57911d308aa5850a911.png) 我所做的提交命名为：**ImportImageModel 的早期版本**

我如何重新调整历史以修复这些不必要的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:52:57.337

[交互式变基](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)应该可以解决问题。它允许做很多事情，其中​​包括删除提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:59:09.683

在你的 HEAD 中，输入

git rebase -i HEAD~20

并且会弹出交互式编辑器。

您可以操纵提交的外观，例如删除行提交，挤入一个提交，查看文本说明

保存

那么你的目标结果就是你要找的

# java - 创建具有读写权限的新文件夹

> ID：10741766
> 
> 赞同：3
> 
> 时间：2012-05-24T16:41:20.570
> 
> 标签：java, permissions, directory

我目前正在根据文件名创建一个目录，然后将文件移动到新目录中。目前我正在使用以下代码创建新目录：

```
String filename = filesInFolder.get(i).toString();
File fullPathFile = new File(filename.replaceAll("(\\w+)_(\\d+).*", "$1/$2/$0"));
fullPathFile.getParentFile().mkdirs(); 
```

然后我尝试使用`InputStream`并将`OutputStream`文件移动到新目录，代码看起来还可以，但是当我创建新目录时，所有文件夹都设置为，`read-only`所以我无法将文件移动到已知目录

那么有没有办法将文件夹设置`read-write`为创建时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:49:49.000

我相信`fullPathFile.getParentFile().setWritable(true)`在调用 mkdirs() 之前应该这样做。该方法`setWritable (bool)`是设置所有者对该抽象路径名的写权限的便捷方法。
由于是文件，因此您可以应用它。

# mysql - 减少冗余的SQL表设计

> ID：10741769
> 
> 赞同：0
> 
> 时间：2012-05-24T16:41:31.330
> 
> 标签：mysql, database-design

我想到了两种设计。想根据你们检查哪一个更合适。

所以我有三个表offer，offer_type 和offer_type_filter。

> 桌子的原创设计

# 提供

```
 id                      int(10) unsigned    
 code                    varchar(48)         
 offer_type_id           int(10) unsigned 
 start_date              datetime            
 exp_date                datetime            
 value                   int(10)             
 updated                 timestamp           
 created                 datetime 
```

# 报价类型

```
 id                      int(10) unsigned         
 name                    varchar(48)              
 condition   varchar(512) 
```

# offer_type_filter

```
 id                      int(10) unsigned 
 filter_type             varchar(20)      
 filter_value            varchar(50)      
 offer_type_id   int(10) unsigned 
```

现在你们都可能猜到，offer 有一个类型，而 filter 指定了在什么特定情况下要应用 offer。如果您想知道，那么 offer_type.condition 主要是购买最低 20 美元。300 美元。Offer_type_filter 是将此优惠仅适用于麦当劳。优惠可以在没有过滤器的情况下存在。

当前设计的一个问题是，每次我创建新报价时，即使类型相同，我也必须在 offer_type 中创建一个重复条目，然后在 offer_type_filter 中使用该类型（使用当前类型会弄乱现有报价）。

因此，就数据库重新设计而言，很明显，offer_type 不能存在于 offer_type_filter 中，所以我确信它必须更改为这样的东西

> 重新设计（取消 offer_type_filter 并创建新的表过滤器。它基本上是重命名为更合适的名称）

# 筛选

```
id   int(10) unsigned 
filter_type  varchar(20)      
filter_value     varchar(50)      
filter_type_set_id   int(10) unsigned 
```

对于其他表格，我正在考虑这两个选项

> 选项 1（来自重新设计的 offer_type_filter + 与原始设计相同的其他表）

# 提供

```
id   int(10) unsigned    
code     varchar(48)         
offer_type_filter_mapping_id     int(10) unsigned 
```

# offer_type_filter_mapping

```
id   int(10) unsigned 
filter_type_set_id   int(10) unsigned     > from Filter table
offer_type_id    int(10) unsigned 
```

如果我选择第一个设计，那么我将在 offer_type_filter_mapping 中有多余的条目。对于没有过滤器的商品，offer_type_filter_mapping 将包含 offer_type_id 条目，其中 null 作为 filter_type_set_id。此外，对于我创建的每种类型，我都必须在映射表中添加一个条目。所以我不喜欢这方面的设计。

> 选项 2（来自重新设计的 offer_type_filter + 与原始设计相同的其他表）

# 提供

```
id   int(10) unsigned    
code     varchar(48)         
filter_type_set_id   int(10) unsigned    > from Filter table 
```

我来到选项 2 只是因为在这种情况下，每个报价都有多余的 filter_type_set_id 并且在我的情况下报价表很大

想要你对你认为哪种设计最不痛苦的批评。常见用例：创建大量带有和不带有过滤器的报价。我们已经有近 40-50 种优惠类型。类型表无法涵盖所有​​场景，因此我们确实有 10% 的时间创建了新类型。

我也使用 Spring 和 Hibernate，所以你也可以从这个角度思考我的设计约束是什么。

PS您甚至可以添加，在mysql中为每个表生成两个id并不方便，就像在offer_type_filter中一样，但我正在考虑它。可能使用虚拟表进行生成或使用外部生成的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:38:05.260

我是这样看的，一个offer只能有一个offer type_filter，所以是1:N的关系

![在此处输入图像描述](../Images/d224301d5121a13520d8419f2bb18123.png)

并且 offer 将采用您之前拥有的 offer_type 属性。

基数是 N:M

![在此处输入图像描述](../Images/f93a3407802ad6868616defc52a23e5b.png)

编辑：
例如，如果你有 offer_type_filter。

```
offer_type_filter_id = 1 and it's 30% off.
offer_type_filter_id = 2 and it's 10% off.
offer_type_filter_id = 3 and it's 0% off.
...
etc 
```

在您的报价表中，您可以拥有：

```
offer_id=1 and offer_filter_id=1 //this mean that product 1 has 30% off
offer_id=2 and offer_filter_id=1 //this mean that product 2 has 30% off
offer_id=3 and offer_filter_id=2 //this mean that product 2 has 10% off
offer_id=4 and offer_filter_id=3 //this mean that product 2 has 0% off

...

etc 
```

如果你的基数是一个offer可以只有一个Offer类型，是第一个设计。

如果您的基数是一个报价可以有多个折扣并且多个产品的折扣相同，我推荐第二种设计

# android - Android 4.0.3 CursorAdapter 不会在 changeCursor 上填充 ListView

> ID：10741773
> 
> 赞同：5
> 
> 时间：2012-05-24T16:41:46.373
> 
> 标签：android, android-cursoradapter

编辑：我没有为此对话框发布我的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tag_layout"
    android:orientation="vertical"
    android:layout_height="wrap_content"
    android:layout_width="@dimen/min_dialog_width"
    android:padding="5dp"
    android:animateLayoutChanges="true"
    >

<!-- Here is the view to show if the list is emtpy -->
<TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="50dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:text="@string/no_items"
        android:visibility="invisible"
        />

<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        />

<ProgressBar
        android:id="@+id/tag_spin_progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:indeterminate="true"
        />

</RelativeLayout> 
```

我正在使用 android.support.v4.CursorLoader 和 CursorAdapter，我试图让它更新它的光标。在 Android 2.3.3 中它工作得很好。但是，当我在我的 4.0.3 设备上尝试它时，ListView 不会刷新，并且我的适配器中的 newView 方法永远不会被调用。我知道光标中有数据，因为我可以在我的 2.3.3 设备上看到它。

如果我旋转我的设备，ListView 会显示我想要的。我尝试使 ListView 无效，但这并不能解决问题。

如果我不重置 ListView 的适配器，列表不会变为空白，但它仍然不会刷新列表。

我在嵌入在 DialogFragment 中的扩展 AlertDialog 中执行所有这些操作。

这是整个班级

```
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.res.Resources;
import android.database.Cursor;
import android.os.Bundle;

import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;

import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.*;
import org.lds.ldssa.service.MLDatabase;
import org.lds.ldssa.service.aws.Annotation;

import java.io.Serializable;
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

public class TagDialog extends AlertDialog implements LoaderManager.LoaderCallbacks<Cursor>,AdapterView.OnItemClickListener {

private static final String TAG = "ldssa.tagdialog";
public static final int TAGLOADERID = 0;

// View Items
private EditText mEditText;
private ListView mListView;
private TextView mEmptyView;
private ProgressBar mProgressBar;
private ImageButton mNewTagButton;
private ImageButton mSortTagButton;
private TextView mTitle;
private String mTagTitle;
private String mNewTagTitle;

private Annotation mAnnotation;
private ContentFragment mContentFragment;

private boolean isNewTagView;
private static final String KEY_NEWTAGVIEW = "new_tag_view";

private static final String POSITION_KEY = "TAG_POSITION";
private static final String Y_KEY = "TAG_Y";
private static final String SORT_KEY = "TAG_SORT";
private static final String CHECKED_STATE_KEY = "TAG_CHECKED_STATE";
private static final int NOT_SET = -1;
private int mPosition;
private int mY;

private TagSuggestionAdapter mSuggestionAdapter;
private TagListAdapter mTagAdapter;

private MLDatabase mlDatabase;
private boolean mSortAlpha;
private HashMap<Long, CheckedState> mCheckedState;

protected TagDialog(Context context) {
    super(context);
}

public void onCreate(Bundle savedInstanceState){
    Context context = getContext();
    Resources r = context.getResources();

    final LayoutInflater inflater = LayoutInflater.from(context);
    View view = inflater.inflate(R.layout.dialog_tag, null);

    // Main parts of the view        
    mEditText = (EditText) view.findViewById(R.id.tag_new_tag);
    mListView = (ListView) view.findViewById(android.R.id.list);
    mProgressBar = (ProgressBar) view.findViewById(R.id.tag_spin_progress_bar);
    mEmptyView = (TextView) view.findViewById(android.R.id.empty);
    mEmptyView.setVisibility(View.INVISIBLE);

    // Titlebar
    View titleBar = inflater.inflate(R.layout.dialog_tag_title, null);
    mNewTagButton = (ImageButton) titleBar.findViewById(R.id.tag_new_icon);
    mSortTagButton = (ImageButton) titleBar.findViewById(R.id.tag_sort_icon);
    mTitle = (TextView) titleBar.findViewById(R.id.tag_title);
    mTagTitle = r.getString(R.string.tag_dialog_title);
    mNewTagTitle = r.getString(R.string.tag_new_dialog_title);
    this.setCustomTitle(titleBar);

    // Buttons
    final String OK = r.getString(R.string.ok);
    final String CANCEL = r.getString(R.string.cancel);
    this.setButton(BUTTON_POSITIVE, OK, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) { /*Never Used*/}});
    this.setButton(BUTTON_NEGATIVE, CANCEL, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) { /*Never Used*/}});

    // Setup Button Listeners
    setOnShowListener(new OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            Button ok = getButton(BUTTON_POSITIVE);
            ok.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(isNewTagView){
                        hideIMM();
                        addNewTag();
                        mEditText.setText("");
                        setupTagDialog();
                    } else {
                        Collection<CheckedState> changes = mCheckedState.values();
                        boolean success = true;
                        MLDatabase db = getDatabase();
                        db.beginAnnotationTransaction();
                        for(CheckedState change : changes){
                            if(!change.checked()){
                                //Detag
                                db.detagAnnotation(mAnnotation.getDbKey(), change.tagID());
                            } else {
                                mAnnotation.saveHighlightsToDatabase(db);
                                if(mAnnotation.getDbKey().intValue() != MLDatabase.NOT_SET_INT &
                                        change.tagID() != MLDatabase.NOT_SET_INT){
                                    success = db.tagAnnotation(mAnnotation.getDbKey(), change.tagID(), change.changed());
                                }
                            }
                        }
                        if(success){
                            db.setAnnotationTransactionSuccessful();
                        }
                        db.endAnnotationTransaction();
                        mCheckedState.clear();
                        dismiss();
                    }
                }
            });

            Button cancel = getButton(BUTTON_NEGATIVE);
            cancel.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(isNewTagView){
                        hideIMM();
                        setupTagDialog();
                        mEditText.setText("");
                    } else {
                        mCheckedState.clear();
                        dismiss();
                    }
                }
            });
        }
    });

    mNewTagButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            setupNewTagDialog();
        }
    });
    mSortTagButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mSortAlpha = !mSortAlpha;
            restartLoader();
        }
    });

    mListView.setOnItemClickListener(TagDialog.this);

    mEditText.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}

        @Override
        public void afterTextChanged(Editable s) {
           LoaderManager lm = getLoaderManager();
            if(lm != null){
                Loader l = lm.getLoader(TAGLOADERID);
                if(l != null){
                    l.forceLoad();
                } else {
                    restartLoader();
                }
            } else {
                restartLoader();
            }
        }
    });

    //Handle Rotations
    if(savedInstanceState == null){
        //New
        mPosition = NOT_SET;
        mY = NOT_SET;
        mSortAlpha = false;
        mCheckedState = getCheckedState(mAnnotation.getDbKey());
        isNewTagView = false;
    } else {
        //rotated
        isNewTagView = savedInstanceState.getBoolean(KEY_NEWTAGVIEW, false);
        mPosition = savedInstanceState.getInt(POSITION_KEY, NOT_SET);
        mY = savedInstanceState.getInt(Y_KEY, NOT_SET);
        mSortAlpha = savedInstanceState.getBoolean(SORT_KEY, false);
        restoreCheckedState(savedInstanceState);
    }

    mTagAdapter = new TagListAdapter(context, null, mCheckedState);
    mSuggestionAdapter = new TagSuggestionAdapter(context, null, 0);

    LoaderManager lm = getLoaderManager();
    if(lm != null){
        lm.initLoader(TAGLOADERID, null, this);
    }

    this.setView(view);
    super.onCreate(savedInstanceState);
}

private void addNewTag() {
    String tag = mEditText.getText().toString().trim();
    if(!tag.equals("")){
        getDatabase();
        Integer langID = mAnnotation.getLanguageId();
        try{
            long tagID = mlDatabase.insertTag(langID, tag);
            if(mAnnotation.getDbKey().intValue() != MLDatabase.NOT_SET_INT &&
                    tagID != MLDatabase.NOT_SET_INT){
                mCheckedState.put(tagID, new CheckedState(tagID, true, true));
            }
        } catch (Exception e) {
            Log.d(TAG, "Problem saving new tag: " + tag + " : " + e.getMessage());
            e.printStackTrace();
        }
    }
}

public void onStart(){
    if(isNewTagView){
        setupNewTagDialog();
    } else {
        setupTagDialog();
    }
    restartLoader();
}

@Override
public Bundle onSaveInstanceState(){
    Bundle bundle = super.onSaveInstanceState();

    //Save What dialog we are in.
    bundle.putBoolean(KEY_NEWTAGVIEW, isNewTagView);
    bundle.putBoolean(SORT_KEY, mSortAlpha);

    //Save position
    bundle.putInt(POSITION_KEY, mListView.getFirstVisiblePosition());
    final View v = mListView.getChildAt(0);
    bundle.putInt(Y_KEY, (v == null) ? 0 : v.getTop());

    //Save Checked State
    Iterator it = mCheckedState.entrySet().iterator();
    int i = 0;
    while(it.hasNext()){
        Map.Entry pair = (Map.Entry)it.next();
        bundle.putSerializable(CHECKED_STATE_KEY + i, (CheckedState)pair.getValue());
        i++;
    }
    bundle.putInt(CHECKED_STATE_KEY, i);

    return bundle;
}

private void restoreCheckedState(Bundle bundle){
    int count = bundle.getInt(CHECKED_STATE_KEY);
    mCheckedState = new HashMap<Long, CheckedState>();
    boolean success = true;
    for(int i = 0; i < count; i++){
        CheckedState cs = (CheckedState)bundle.getSerializable(CHECKED_STATE_KEY+i);
        if(cs == null){
            success = false;
            break;
        }
        mCheckedState.put(cs.tagID(), cs);
    }
    if(!success){
        mCheckedState = getCheckedState(mAnnotation.getDbKey());
    }
}

@Override
public void onBackPressed(){
    if(isNewTagView){
        hideIMM();
        setupTagDialog();
    } else {
        this.dismiss();
    }
}

private void setupTagDialog() {
    isNewTagView = false;
    mTitle.setText(mTagTitle);
    mNewTagButton.setVisibility(View.VISIBLE);
    mSortTagButton.setVisibility(View.VISIBLE);
    mEmptyView.setVisibility(View.INVISIBLE);
    mEditText.setVisibility(View.GONE);
    mListView.setVisibility(View.GONE);
    mProgressBar.setVisibility(View.VISIBLE);
    mListView.setAdapter(mTagAdapter);
    restartLoader();
}

private void setupNewTagDialog() {
    isNewTagView = true;
    mTitle.setText(mNewTagTitle);
    mNewTagButton.setVisibility(View.INVISIBLE);
    mSortTagButton.setVisibility(View.INVISIBLE);
    mEmptyView.setVisibility(View.INVISIBLE);
    mEditText.setVisibility(View.VISIBLE);
    mListView.setVisibility(View.GONE);
    mProgressBar.setVisibility(View.VISIBLE);
    mListView.setAdapter(mSuggestionAdapter);
    restartLoader();
}

public void setAnnotation(Annotation a) {
    mAnnotation = a;
}

public void setContentViewInterface(ContentFragment contentFragment) {
    mContentFragment = contentFragment;
}

private MLDatabase getDatabase() {
    if(mlDatabase == null){
        GospelLibraryApplication app = (GospelLibraryApplication) getContext().getApplicationContext();
        mlDatabase = app.getMlDatabase();
    }
    return mlDatabase;
}

public String getFilter() {
    return mEditText.getText().toString().trim();
}

public Integer getAnnotationID(){
    if(mAnnotation != null){
        return mAnnotation.getDbKey();
    }
    return MLDatabase.NOT_SET_INT;
}

private LoaderManager getLoaderManager(){
    if(mContentFragment == null){
        Log.d(TAG, "ContentFragment is NULL!");
        return null;
    }
    return mContentFragment.getContentActivity().getSupportLoaderManager();
}

private void restartLoader(){
    LoaderManager lm = getLoaderManager();
    if(lm != null){
        lm.restartLoader(TAGLOADERID, null, this);
    }
}

private void hideIMM(){
    InputMethodManager imm = (InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);
}

private HashMap<Long, CheckedState> getCheckedState(Integer annotationID) {
    HashMap<Long, CheckedState> checkedState = new HashMap<Long, CheckedState>();
    MLDatabase db = getDatabase();
    Cursor cursor = db.queryAllTagsWithAnnotation(annotationID);
    if(cursor != null){
        for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){
            Long tagID = cursor.getLong(cursor.getColumnIndex(MLDatabase.CL_ID));
            boolean isChecked = !cursor.isNull(cursor.getColumnIndex(MLDatabase.CL_ANNOTATION));
            checkedState.put(tagID, new CheckedState(tagID, isChecked, false));
        }
    }
    return checkedState;
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    TagCursorLoader loader = new TagCursorLoader(getContext(), this);
    return loader;
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor data) {
    if(isNewTagView) {
        mSuggestionAdapter.changeCursor(data);
        if(mListView.getAdapter() == null){
            mListView.setAdapter(mSuggestionAdapter);
        }
    } else {
        mTagAdapter.changeCursor(data);
        if(mListView.getAdapter() == null){
            mListView.setAdapter(mTagAdapter);
        }
    }
    if(mPosition != NOT_SET && mY != NOT_SET){
        mListView.setSelectionFromTop(mPosition, mY);
        mPosition = mY = NOT_SET;
    }

    if (mListView.getAdapter() != null) {
        if (mListView.getAdapter().getCount() > 0) {
            mEmptyView.setVisibility(View.INVISIBLE);
        }
        else {
            mEmptyView.setVisibility(View.VISIBLE);
        }
    }
    else {
        mEmptyView.setVisibility(View.VISIBLE);
    }
    mProgressBar.setVisibility(View.GONE);
    mListView.setVisibility(View.VISIBLE);
    mListView.invalidate();
}

@Override
public void onLoaderReset(Loader<Cursor> cursorLoader) {
    if(mSuggestionAdapter != null) {
        mSuggestionAdapter.changeCursor(null);
    }
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    if(isNewTagView){
        TextView tv = (TextView)view;
        mEditText.setText(tv.getText());
        Button ok = getButton(BUTTON_POSITIVE);
        if(ok != null){
            ok.performClick();
        }
    } else {
        CheckedTextView ctv = (CheckedTextView)view;
        boolean checked = !ctv.isChecked();
        ctv.setChecked(checked);
        mCheckedState.put(id, new CheckedState(id, checked, true));
    }

}

public static class TagCursorLoader extends CursorLoader {
    private final ForceLoadContentObserver mObserver = new ForceLoadContentObserver();

    private TagDialog dialog;
    private MLDatabase mlDatabase;
    private Cursor mCursor;
    private String mFilter;
    private Integer mAnnotationID;

    // Runs on worker thread
    @Override
    public Cursor loadInBackground(){
        Cursor cursor = null;
        if(dialog.isNewTagView){
            mFilter = dialog.getFilter();
            cursor = mlDatabase.getTagSuggestions(mFilter);
        } else {
            cursor = mlDatabase.queryTags(dialog.mSortAlpha);
        }

        if(cursor != null){
            cursor.registerContentObserver(mObserver);
        }

        return cursor;

    }

    //Runs on UI thread
    @Override
    public void deliverResult(Cursor cursor){
        //Handle if canceled in the middle.
        if(isReset()){
            if(cursor != null){
                cursor.close();
            }
            return;
        }

        Cursor oldCursor = mCursor;
        mCursor = cursor;
        if(isStarted()) {
            super.deliverResult(cursor);
        }

        if(oldCursor != null && !oldCursor.equals(cursor) && !oldCursor.isClosed()) {
            oldCursor.close();
        }
    }

    public TagCursorLoader(Context context, TagDialog dialog) {
        super(context);
        this.dialog = dialog;
        mlDatabase = dialog.getDatabase();
    }

    @Override
    public void onStartLoading(){
        if(mCursor == null) {
            forceLoad();
        } else {
            if(dialog.isNewTagView && mFilter.equals(dialog.getFilter())) {
                deliverResult(mCursor);
            } else {
                forceLoad();
            }
        }
    }

    @Override
    protected void onStopLoading() {
        // Attempt to cancel the current load task if possible.
        cancelLoad();
    }

    @Override
    public void onCanceled(Cursor cursor) {
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
    }

    @Override
    protected void onReset() {
        super.onReset();

        // Ensure the loader is stopped
        onStopLoading();

        if (mCursor != null && !mCursor.isClosed()) {
            mCursor.close();
        }
        mCursor = null;
    }

}

/**
 * Class is used to store the temporary checked state of the tags.
 */
public class CheckedState implements Serializable {
    private static final long serialVersionUID = 1263560458217339487L;

    /**
     * @serialField
     */
    private long tagID;
    /**
     * @serialField
     */
    private boolean checked;
    /**
     * @serialField
     */
    private boolean changed;

    /**
     * Constructor for CheckedState.
     * @param tagID   The tag ID
     * @param checked The Current Checked State
     * @param changed Ture if changed in the dialog. False if pulling from database.
     */
    public CheckedState(long tagID, boolean checked, boolean changed){
        this.tagID = tagID;
        this.checked = checked;
        this.changed = changed;
    }

    public long tagID(){
        return tagID;
    }

    public boolean checked() {
        return checked;
    }

    public boolean changed() {
        return changed;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:46:20.290

注意我之前没有添加我的 XML。这就是问题所在。

```
andriod:animateLayoutChanges 
```

不适用于我试图做的事情。

一旦我从我的 XML 中删除它，它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:32:29.433

在我看到的大多数示例中，您创建一次适配器实例并将其设置`ListView`为创建视图时，然后调用`getLoaderManager().initLoader()`.

```
// Prepare the loader.  Either re-connect with an existing one,
// or start a new one.
getLoaderManager().initLoader(0, null, this); 
```

然后在`onLoadFinished()`您调用的方法`swapCursor()`中自动刷新`ListView`.

```
// This is the Adapter being used to display the list's data.
SimpleCursorAdapter mAdapter;
...

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    // Swap the new cursor in.  (The framework will take care of closing the
    // old cursor once we return.)
    mAdapter.swapCursor(data);
} 
```

`Loaders`上面的代码是从文档 [http://developer.android.com/guide/topics/fundamentals/loaders.html](http://developer.android.com/guide/topics/fundamentals/loaders.html)复制而来的

更新：文档讨论了使用加载器进行活动和片段，但没有提到使用对话框。我猜如果 getLoaderManager() 存在你很好，但如果你没有使用 LoaderManager 并且你自己手动运行 Loader，那么我认为你需要确保在调用 swapCursor() 或setAdapter() 你在 UI 线程上执行此操作。有时，确保这一点的最简单方法是致电

```
getListView().post(new Runnable() {
   public void run() {
      // so the setAdapter() or swapCursor() here
   }
}); 
```

我自己也遇到过这样的情况：我在后台更新了 ListView，但在我旋转设备之前它没有反映为更新，因为 UI 没有在 UI 线程上更新。

# django - Django/South：将不同的类迁移到公共基类

> ID：10741774
> 
> 赞同：1
> 
> 时间：2012-05-24T16:41:48.550
> 
> 标签：django, django-south

我有几个类，例如`Band`，，。每个都有字段（有时被称为）和，以及其他特定于类的字段。`Album``Song``title``name``slug`

我想使用 South 来将它们转换为一个公共基类的子类，`Article`该基类将包含每个对象的`title`and `slug`。但是，我不确定 South 的数据迁移在我的情况下应该如何工作。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:03:00.040

您只需要考虑 South 将对您的模型做出的改变，并为此做好计划。

如果`Article`是一个抽象类，South 将在很大程度上忽略它。也就是说，所有字段看起来都像是直接在模型上的字段，几乎就是您现在拥有的方式。因此，唯一会发生的变化是一个模型以前使用的地方`name`，它现在也将有一个新`title`字段。出于这个原因，您应该`name`通过 schemamigration 保留附加的字段，然后创建一个 datamigration 以将其值移动到新`title`字段，最后在*另一个*schemamigration 中将其删除。

如果`Article`是一个标准的基类（多表继承），那么你所有的模型都会得到一个新`OneToOneField`的 Article。同样，通过模式迁移保留模型上的所有字段，然后创建一个数据迁移，您将在其中运行每个字段，并`Article`使用模型上的旧数据创建一个实例，并将该`Article`实例分配给一对一的字段。然后，您可以删除另一个架构迁移中的旧字段。

# javascript - 骨干过滤

> ID：10741778
> 
> 赞同：5
> 
> 时间：2012-05-24T16:41:53.783
> 
> 标签：javascript, collections, backbone.js, models, underscore.js

如果我有一个 Backbone 集合，并且想要创建该集合的副本并过滤掉某些条目，我该如何在将复制的实例保留为 Backbone.Collection 的同时做到这一点？

例子：

​</p>

```
var Module = Backbone.Model.extend();

var ModuleCollection = Backbone.Collection.​extend({
    model: Module
});

​var modules = new ModuleCollection;

​modules.add({foo: 'foo'​​​​​​},{foo: 'bar'});​​​​​

console.log(modules instanceof Backbone.Collection); // true

var filtered = modules.filter(function(module) {
    return module.get('foo') == 'bar';
});

console.log(filtered instanceof Backbone.Collection); // false 
```

[http://jsfiddle.net/m9eTY/](http://jsfiddle.net/m9eTY/)

在上面的示例中，我想`filtered`成为模块的过滤版本，而不仅仅是模型数组。

本质上，我想在集合实例中创建一个可以过滤掉某些模型并返回`Backbone.Collection`实例的方法，但是一旦我开始过滤迭代方法就会返回一个数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:47:36.467

如果需要，您可以将过滤后的数组包装在临时 ModuleCollection 中，过滤后的模型与原始 ModuleCollection 中的模型相同，因此如果模块的属性发生更改，两个集合仍会引用它。

所以我建议你做的是：

```
var filtered = new ModuleCollection(modules.filter(function (module) {
    return module.get('foo') == 'bar';
})); 
```

从 Backbone 0.9.2 开始，有一个额外的方法`where`可以做同样的事情：

```
var filtered = modules.where({foo: 'bar'}); 
```

尽管如此，它仍然返回一个数组，所以你仍然需要这样包装它：

```
var filtered = new ModuleCollection(modules.where({foo: 'bar'})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T14:09:48.687

用于使用主干过滤集合

要制作过滤器，您的集合中应该有一个过滤功能

```
var MyCollection = Backbone.Collection.extend ({
  filtered : function () { 
```

我建议使用 UnderScore 过滤器，它将为有效返回 true，为无效返回 false，其中 true 是您要查找的内容。使用 this.models 获取当前集合模型 使用 model.get( '' ) 获取要检查的元素

```
var results = _.filter( this.models, function ( model ) {           
    if ( model.get('foo') == 'bar' ) 
    return true ; 
    return false ;
}); 
```

然后使用下划线映射您的结果并将其转换为 JSON，这可能是您弄错的地方

```
results = _.map( results, function( model ) { return model.toJSON()  } ); 
```

最后返回一个只有结果的新主干集合这是如何制作一个复制的集合

```
return new Backbone.Collection( results ) ; 
```

# nuget - 安装 NuGet 1.8 时出错

> ID：10741783
> 
> 赞同：4
> 
> 时间：2012-05-24T16:42:01.733
> 
> 标签：nuget

NuGet 1.8 似乎有一些有趣的新特性。不幸的是，当我尝试从 Visual Studio 中更新时，出现错误：

```
Value cannot be null.
Parameter name: v1 
```

我想我会从 Visual Studio 外部安装它，看看效果是否更好，但我找到了下载链接

[http://nuget.codeplex.com/releases](http://nuget.codeplex.com/releases)

未列出“NuGet Visual Studio 扩展”的任何下载。

如何更新 NuGet？

**更新**

这是在 Windows 7 64 位、Visual Studio Ultimate 2010SP 1 上，从最新的 NuGet 版本（如何检查版本号？）升级到 NuGet 1.8。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T21:10:43.227

根据评论，我做了以下事情：

*   关闭 Visual Studio 的所有实例
*   以管理员身份启动 Visual Studio 的新实例
*   工具/扩展管理器
*   选择 NuGet 包管理器
*   单击卸载（如果您不是管理员，卸载显示为灰色）
*   重新启动 Visual Studio（仍以管理员身份）
*   工具/扩展管理器
*   在线画廊
*   安装 NuGet
*   重新启动 Visual Studio（这次不是以管理员身份）
*   恢复工作

# jquery - jQuery ajax() 方法

> ID：10741784
> 
> 赞同：0
> 
> 时间：2012-05-24T16:42:03.317
> 
> 标签：jquery

尽管 WCF 服务方法成功返回（我通过设置断点验证），但我的 ajax 方法总是返回 ServiceFailed。代码如下所示。可能是什么问题？

```
function LoginToServer(name, password) {
    server = "localhost:1706";
    Type = "GET";
    var encodeusername = $.base64.encode(encode_utf8(name.value));
    var encodepwd = encode_utf8(password.value);
    var params = 'username=' + encodeusername + '&password=' + encodepwd + '&clientip=none';
    Url = "http://" + server + "/WCF/Test/TestService.svc/rest/Login?" + params;
    ContentType = "application/json; charset=utf-8";
    DataType = "jsonp";
    ProcessData = true;
    JsonpCallback = "alertResponse",
    method = "Login";
    CallService();
}

function CallService() {
    $.ajax({
        type: Type, //GET or POST or PUT or DELETE verb
        url: Url, // Location of the service
        data: Data, //Data sent to server
        contentType: ContentType, // content type sent to server
        dataType: DataType, //Expected data format from server
        processdata: ProcessData, //True or False
        jsonpCallback: JsonpCallback,
        success: function (msg) {//On Successfull service call
            ServiceSucceeded(msg);
        },
        error: ServiceFailed// When Service call fails
    }); 
```

WCF服务方法定义如下：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json,
            UriTemplate = "/Login?username={username}&password={password}&clientip={clientip}")]
    AuthenticationStatus SlideViewerLogin(string username, string password, string clientip); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:45:59.943

**对于跨域调用检查这个**

[**使用 Jquery/JavaScript 调用跨域 WCF 服务**](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)

**对于 WCF 调用**

WCF 服务可能存在一些问题，也可以查看此博客文章，帮助您找出您面临的错误：

### [使用 WCF 创建 REST 服务并使用 jQuery 使用](http://pranayamr.blogspot.in/2011/03/rest.html)

尝试以 json 格式传递数据，如下所示

```
var msg2 = { "UserName": "Denny", "Password": "abc123" };
 Data = JSON.stringify(msg2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:46:44.123

我认为你需要在你有数据的地方传递变量“params”：数据，。它正在寻找数据中的某些东西，但我在您的函数中没有看到名为 data 的变量。

# c# - 在 MVC3 中捕获模型的旧值？

> ID：10741789
> 
> 赞同：5
> 
> 时间：2012-05-24T16:42:33.377
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我想捕获模型中的旧值，以便在提交后与新值进行比较，并创建用户所做更改的审核日志。

我的猜测是使用具有重复旧值属性的隐藏输入框来做这件事是一种方法。但想知道是否还有其他好的选择？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:47:59.390

在 save 方法中，只需在保存更改**之前**从数据库中获取原始对象，然后您就可以比较旧值和新值了吗？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T17:06:23.070

这听起来像是标准审计。您不必担心发生了什么变化，只需捕获所有内容以及做出更改的人。除非需要进行某种实时报告。

**可能的审计实现：**

[CQRS](http://elegantcode.com/2009/11/11/cqrs-la-greg-young/)，简而言之，它跟踪给定对象的每次更改。缺点是它是一个实施起来更复杂的架构。

滚动分类帐。每个插入都是数据库中的一个新行。最新行用于显示目的，但每次更新时，都会在数据库中插入一个新行。

另一种方法是将其保存到审计表中。

都把工作做好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:53:48.290

正是 mattytommo 所说的是首选方法

实例化新视图模型以创建新实体

```
public ActionResult Edit(int id) {
    var entity = new Entity(id); // have a constructor in your entity that will populate itself and return the instance of what is in the db
    // map entity to ViewModel using whatever means you use
    var model = new YourViewModel();
    return View(model);
} 
```

发回更改

```
[HttpPost]
public ActionResult Edit(YourViewModel model) {
    if (ModelState.IsValid) {
        var entity = new YourEntity(model.ID); // re-get from db
       // make your comparison here
       if(model.LastUserID != entity.LastUserID // do whatever
       ... etc...
    }
    return View(model);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T16:59:59.307

您还可以将原始模型存储在视图包中并执行以下操作...

```
// In the controller
public ActionResult DoStuff()
{
    // get your model
    ViewBag.OriginalModel = YourModel;
    return View(YourModel);
}

// In the View
<input type="hidden" name="originalModel" value="@Html.Raw(Json.Encode(ViewBag.OriginalModel));" />

// In the controller's post...
[HttpPost]
public ActionResult DoStuff(YourModel yourModel, string originalModel)
{
    // yourModel will be the posted data.
    JavaScriptSerializer JSS = new JavaScriptSerializer();
    YourModel origModel = JSS.Deserialize<YourModel>(originalModel);
} 
```

我没有机会测试这个，只是一个理论:)

# php - 构建基于 PHP 的专家系统/决策

> ID：10741791
> 
> 赞同：0
> 
> 时间：2012-05-24T16:42:58.533
> 
> 标签：php, decision-tree, expert-system

我要解决的问题是我有 16 种不同的动物，我需要编写一个 PHP 脚本来询问用户 4 个是/否问题，每个问题都会缩小可用动物的范围，直到最终显示答案。这意味着下一个问题将取决于用户在上一个问题中回答的内容。您知道如何在不使用大量 if else 语句的情况下做到这一点。

以下是我到目前为止所做的，尚未完成，但如果我继续使用 if 语句，我最终会得到太多，必须有更好的方法来做到这一点。有人建议我在数组中使用数组，但这对我没有帮助。任何帮助将非常感激。

```
<?php
session_set_cookie_params(2592000);
session_start();
?>

<html>
<head>
<title>Creature Guessing Game</title>
</head>
<body>
<h1>Creature Guessing Game</h1>
<p> Welcome to the creature guessing game! </p>
<p>Click the button 

below to start or restart the game </p>

<form method="post" action="Creatures.php">
<input type='submit' name='start' value='Start Game' />
</form>
 <?php
//If form not submitted, display form.
if (!isset($_POST['start'])){
?>
<?php
} //If form is submitted, process input

else{ //Question 1
echo "<p>Does the creature live mainly on the land?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes1' value='Yes' />
<input type='submit' name='no1' value='No' />
</form>";
}
if ($_POST['yes1']){ //Q1 - Yes
echo "<p>Does the creature have wings?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes2' value='Yes' />
<input type='submit' name='no2' value='No' />
</form>";
}
elseif($_POST['no1']){ //Q1 - No
echo "<p>Does the creature live in the water?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes3' value='Yes' />
<input type='submit' name='no3' value='No' />
</form>";
}
if ($_POST['yes2']){ //Q1 - Yes and Q2 - Yes
echo "<p>Can the creature fly?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes4' value='Yes' />
<input type='submit' name='no4' value='No' />
</form>";
}
elseif($_POST['no2']){ //Q1 - Yes and Q2 - No
echo "<p>Is the creature an insect?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes5' value='Yes' />
<input type='submit' name='no5' value='No' />
</form>";
}
if ($_POST['yes3']){ //Q1 - No and Q2 - Yes
echo "<p>Is the creature a reptile?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes6' value='Yes' />
<input type='submit' name='no6' value='No' />
</form>";
}
if ($_POST['no3']){ //Q1 - No and Q2 - No
echo "<p>Does the creature have feathers?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes7' value='Yes' />
<input type='submit' name='no7' value='No' />
</form>";
}
if ($_POST['yes4']){ //Q1 - Yes and Q2 - Yes and Q3 - Yes
echo "<p>Is the creature your thinking of white?</p>";
echo "<form method='post' action='Creatures.php'>
<input type='submit' name='yes8' value='Yes' />
<input type='submit' name='no8' value='No' />
</form>";
}
if ($_POST['yes8']){ //Answer 1: Q1 - Yes and Q2 - Yes and Q3 - Yes and Q4 - Yes 
echo "<p>Its a goose!</p>";
}
if ($_POST['no8']){ //Answer 2: Q1 - Yes and Q2 - Yes and Q3 - Yes and Q4 - No
echo "<p>Its a hawk!</p>";
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:53:36.113

这里不是 php 开发人员，但您需要做的是拥有一个`Animal`具有一组属性的类或对象。这些属性应该是`Boolean`（真/假）值，直接映射回您所询问的问题。这些`Animal`对象应该放入`Collection`（a`List`或 a `Set`）中。处理完每个问题后，调用一个函数，该函数删除所有布尔属性与用户提供的值不匹配的动物。例如：

```
Animal cat = new Animal();  
cat.canWalkOnLand = true;  

userDoesAnimalWalkOnLand = false;  
for(Animal in AnimalCollection)  
{  
    if(Animal.canWalkOnLand != userDoesAnimalWalkOnLand)  
    {  
       AnimalCollection.remove(Animal);
    }  
} 
```

这应该足以让您入门。（冗长的变量名帮助你理解）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:56:05.297

您可以创建一系列问题，并使用 switch 语句和一个小函数，一遍又一遍地重复相同的废话，只接受您的问题作为参数 - 它会清理您的代码很多。

至于仅在您列出的两种动物之间扩展此游戏，除了我的之外，强烈推荐 Woot4Moo 的建议。

# android - 我的警报对话框有问题

> ID：10741793
> 
> 赞同：-1
> 
> 时间：2012-05-24T16:43:13.847
> 
> 标签：android, view, android-alertdialog

我创建了两个活动：第一个包含工作机会的详细信息，下一个是对这份工作的假设。申请工作后，会出现一个警告对话框以确认操作成功。但是，此警报对话框出现在没有值的作业详细信息视图中！我该如何管理这个？这是活动1：

```
private static final String MY_PREFERENCES = "mespreferences";
TextView txt;
@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.detail_offre);
     ToggleButton precedent = (ToggleButton)findViewById(R.id.btn_preced);
     precedent.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent preced = new Intent(DetailsOffre.this,   Offres.class);
            startActivity(preced);
        }                   
     });
        Button postuler = (Button)findViewById(R.id.postuler);
         postuler.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView id_offre = (TextView) findViewById(R.id.tv_ID_Off1);

                SharedPreferences settings = getSharedPreferences(MY_PREFERENCES, 0);
                SharedPreferences.Editor editor = settings.edit();
                editor.putString("idoffre", id_offre.getText().toString());
                editor.commit();
                Intent intent_postul = new Intent(DetailsOffre.this,    Candidature.class);
                startActivity(intent_postul);
            }                   
         });
         Button enregistrer = (Button)findViewById(R.id.enregistrer);
         enregistrer.setOnClickListener(new View.OnClickListener(){
         public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView id_offre = (TextView) findViewById(R.id.tv_ID_Off1);
                String idOf = id_offre.getText().toString();
                Intent intent_enregist = new Intent(DetailsOffre.this,  EnregistrerOffre.class);
                intent_enregist.putExtra("idoffre",idOf );
                startActivity(intent_enregist);
            }       
}); 

LinearLayout rootLayout = new LinearLayout(getApplicationContext());  
txt = new TextView(getApplicationContext());  
rootLayout.addView(txt);  
txt.setText("Connexion..."); 
txt.setText(getServerData(URL2));
}   
public static final String URL2 = "http://10.0.2.2/mesRequetes/detail_offr.php";    
private String getServerData(String returnString) {

    InputStream is = null;
    String result = null;
    Intent intent3 = getIntent();
    String id = intent3.getExtras().getString("idoffre");

    ArrayList<NameValuePair> postID = new ArrayList<NameValuePair>();
    postID.add(new BasicNameValuePair("idoffre", id));

    // Envoie de la commande http
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(URL2);
        httppost.setEntity(new UrlEncodedFormEntity(postID));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e){
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    try{

        JSONArray jArray = new JSONArray(result);
        JSONObject detail=null;
        for(int i=0;i<jArray.length();i++){
        detail = jArray.getJSONObject(i);

        TextView numoffre = (TextView) findViewById(R.id.tv_ID_Off1);
        numoffre.setText(detail.getString("idoffre"));

        TextView nom_societe = (TextView) findViewById(R.id.tv_societe1);
        nom_societe.setText(detail.getString("first_name"));

        TextView poste = (TextView) findViewById(R.id.TV_post1);
        poste.setText(detail.getString("poste"));

        TextView ville = (TextView) findViewById(R.id.tv_vill);
        ville.setText(detail.getString("ville"));

        TextView details = (TextView) findViewById(R.id.tv_detail);
        details.setText(detail.getString("details"));

        TextView d_crea = (TextView) findViewById(R.id.tv_datecrea);
        d_crea.setText(format_d(detail.getString("created_at")));

        TextView idste = (TextView) findViewById(R.id.TV_idsociete1);
        idste.setText(detail.getString("idsoc"));

        SharedPreferences settings = getSharedPreferences(MY_PREFERENCES, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("idsoc", idste.getText().toString());
        editor.commit();

        Log.i("log_tag","Numero de l'offre:"+detail.getInt("idoffre")+
                "poste proposé:"+detail.getString("poste")+
                "ville:"+detail.getString("ville")+
                "details:"+detail.getString("details")+
                "date de creation:"+detail.getString("created_at")+
                "identifiant de la société:"+detail.getString("idsoc")+
                "nom de la société:"+detail.getString("first_name")
                );
            // RÃ©sultats de la requÃªte
            returnString += "" + jArray.getJSONObject(i);

        };
            }catch(JSONException e){
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    return returnString; 

}

public static StringBuilder format_d(final String s) {
    String aaaa = s.substring(0, 4);
    String mm = s.substring(5, 7);
    String dd = s.substring(8, 10);
    String heure = s.substring (11);

return new StringBuilder(dd)
        .append("/")
        .append(mm)
        .append("/")
        .append(aaaa)
        .append(" à ")
        .append(heure);           
} 
```

活动2：

```
private static final String MY_PREFERENCES = "mespreferences";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail_offre);    
    SharedPreferences sharedPreferences = getSharedPreferences(MY_PREFERENCES, 0);
    String userId = sharedPreferences.getString("id", "");
    String idoffr = sharedPreferences.getString("idoffre", "");

    Intent intent_postul = getIntent();
    ArrayList<NameValuePair> postCandidature= new ArrayList<NameValuePair>();
    postCandidature.add(new BasicNameValuePair("idoffre", idoffr));
    postCandidature.add(new BasicNameValuePair("id", userId));  
    this.sendData(postCandidature);

}
private void sendData(ArrayList<NameValuePair> postCandidature) {
        // TODO Auto-generated method stub
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/mesRequetes/candidature.php");
        httppost.setEntity(new UrlEncodedFormEntity(postCandidature));

    HttpResponse response = httpclient.execute(httppost);
    Log.i("postData", response.getStatusLine().toString());

    AlertDialog.Builder cand = new AlertDialog.Builder(Candidature.this);
    cand.setIcon(R.drawable.succes);
    cand.setTitle("Succès");
    cand.setMessage("Votre candidature a bien été transmise");
    cand.setPositiveButton("OK", new DialogInterface.OnClickListener(){

        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            Intent offr = new Intent (Candidature.this, Offres.class);
            startActivity(offr);    
        }});
    cand.show();

}catch(Exception e){
    Log.e("log_tag", "Error in http connection " + e.toString());
}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:50:18.157

使用以下警报对话框。提供更多详细信息以了解您的要求。

```
public void Alert(String text, String title)
    { 
        AlertDialog dialog=new AlertDialog.Builder(context).create();
        dialog.setTitle(title);
        dialog.setMessage(text);
        if(!title.equals("") && !text.equals(""))
        {
            dialog.setButton("OK",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                           //
                        }
                    });
            dialog.setButton2("Cancel",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                           //
                        }
                    });
        }

        dialog.show();

    } 
```

# c# - 如何将一种复合自定义类型转换为另一种

> ID：10741794
> 
> 赞同：5
> 
> 时间：2012-05-24T16:43:24.603
> 
> 标签：c#

我正在尝试为自定义类型编写一个转换器类——将一种类型（及其所有属性）转换为另一种具有匹配属性的类型。

当属性也是自定义类型而不是简单类型时，问题就出现了。
自定义类型都是相同的，只是它们位于同一解决方案中的不同命名空间中。
TypeTwo 对象是 Web 服务引用。

例如

```
public TypeOne ConvertToTypeTwo (TypeTwo typeTwo)
{
var typeOne = new TypeOne();
typeOne.property1 = typeTwo.property1; //no problem on simple types
typeOne.SubType = typeTwo.SubType; //problem!
...
} 
```

我在上面一行得到的错误是：

> 错误 166 无法将类型“TypeTwo.SubType”隐式转换为“TypeOne.SubType”

我试过这样投

```
typeOne.SubType = (TypeOne)typeTwo.SubType; 
```

但是得到：

> 错误 167 无法将类型“TypeTwo.SubType”转换为“TypeOne.SubType”

像这样

```
typeOne.SubType = typeTwo.SubType as TypeOne; 
```

但是得到：

> 错误 168 无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型“TypeTwo.SubType”转换为“TypeOne.SubType”

我不确定我还有什么其他选择，或者我是否只是在做一些根本错误的事情。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:44:49.203

如果这两个子类型是不同的类型，则必须编写一个单独的转换器来在这两种类型之间进行转换。

例如：

```
public TypeOne ConvertToTypeTwo (TypeTwo typeTwo)
{
    var typeOne = new TypeOne();
    typeOne.property1 = typeTwo.property1; //no problem on simple types
    typeOne.SubType = ConvertToTypeTwo(typeTwo.SubType); //problem!
}

public TypeOneSubtype ConvertToTypeTwo(TypeTwoSubType typeTwo)
{
    var subOne = new TypeOneSubType;
    subOne.property1 = typeTwo.property1;
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T16:45:13.300

你不能那样做。即使这两种类型具有*完全相同*的布局（具有相同类型的相同字段），您*也不能从一种* **转换**到另一种。不可能。

相反，您要做的是创建一个转换器（作为方法、单独的类或强制转换运算符），它可以从一种类型转换为另一种类型。

# c# - C# 循环引用对 GC 性能的影响

> ID：10741795
> 
> 赞同：4
> 
> 时间：2012-05-24T16:43:32.497
> 
> 标签：c#, garbage-collection, circular-reference

> **可能重复：**
> [垃圾收集器和循环引用](https://stackoverflow.com/questions/8840567/garbage-collector-and-circular-reference)

如果对象具有循环引用但未附加到任何根，因此对 GC 性能有影响吗？

在一个方向上有一个弱参考会有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:06:06.563

> 如果对象有循环引用，对 GC 性能有影响吗

不会。扫描过程会在遇到已访问的实例时停止。非圆形结构没有差异。

> 但是没有附加到任何根上，因此对 GC 来说已经成熟了？

在这种情况下，它们根本不会被访问，因此与有多少交叉链接完全无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:45:03.983

> 如果对象具有循环引用但未附加到任何根，因此对 GC 性能有影响吗？

没有。基本上，当没有强引用时，这两个对象都有资格进行垃圾收集……您不必担心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T16:45:21.007

如果无法从根到达对象，则不会遍历它们，因此循环引用不会成为问题。

# jquery - HTML5 中的 Metro 菜单主题（JQuery Mobile）

> ID：10741800
> 
> 赞同：-3
> 
> 时间：2012-05-24T16:43:54.093
> 
> 标签：jquery, html, jquery-mobile

如何使用 JQuery Mobile 和 HTML5 创建菜单，就像 windows 8 开始屏幕一样？

注意：我不是在询问 Metro 主题控件，而是在谈论创建带有 Windows 8 开始屏幕之类的磁贴的菜单。

**编辑：我知道如何使用 JQuery Mobile，但我不知道如何创建水平滑动...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:33:06.510

更新#2：

找到一个实时链接：

*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/)
*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html（<--](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html)我认为这就是你要找的）

更新我的答案：

你应该看看这个：

*   [https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview](https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview)

它曾经住在这里：

*   [http://jquerymobile.com/test/experiments/scrollview/](http://jquerymobile.com/test/experiments/scrollview/)

但是 jQM 把它拿下来了，不知道为什么。

它提供了多向滚动

这是否有效：

*   [http://sgrebnov.github.com/jqmobile-metro-theme/](http://sgrebnov.github.com/jqmobile-metro-theme/)

屏幕截图：

![在此处输入图像描述](../Images/a944af73c8b6ac2e1c9e75d16f0fe655.png) ![在此处输入图像描述](../Images/baa37f7aa2332a95a55007d8b3f84051.png) ![在此处输入图像描述](../Images/2b93a2fd47c5566537eb212c904ebbef.png) ![在此处输入图像描述](../Images/47119b6a5066ad5a7a0cda0e5f13d617.png)

# git - 使用“git log”包含子模块提交消息

> ID：10741801
> 
> 赞同：21
> 
> 时间：2012-05-24T16:43:57.223
> 
> 标签：git

假设我的存储库中有两个版本......每个版本都被标记如下：

*   标签1
*   标签2

现在假设提交更新了子模块引用以指向 Tag1 和 Tag2 之间的新子模块提交。我运行以下命令，得到这个：

```
# show commits between these two tags
git log Tag1..Tag2

commit be3d0357b93322f472e8f03285cb3e1e0592eabd
Author: James Johnston <snip>
Date:   Wed Jan 25 19:42:56 2012 +0000

    Updated submodule references. 
```

在这种情况下，唯一的变化是子模块的更新。如何让子模块提交与父存储库提交交错？

具体来说，在此示例中，假设父存储库指向子模块中的 SubTag5 标记。子模块中稍后的两次提交是一个 SubTag6 标记。显示的提交更新了子模块指针以指向 SubTag6 而不是 SubTag5。我想要做的是`git log`，除了已经打印的提交之外，还打印两个子模块提交，以及将子模块从 SubTag5 带到 SubTag6。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-29T20:28:03.350

这是一个简单的 bash 命令，它创建一个 ASCII 提交图（类似于 gitk），当超级项目中的子模块发生更改时，它会交错相关的子模块提交。它打印出每次提交的完整补丁，然后使用 grep 过滤掉补丁内容，只留下摘要行和子模块更改。

```
git log --graph --oneline -U0 --submodule Tag1..Tag2 | grep -E '^[*| /\\]+([0-9a-f]{7} |Submodule |> |$)' 
```

它产生类似于这样的输出：

```
* 854407e Update submodule
| Submodule SUB 8ebf7c8..521fc49:
|   > Commit C
* 99df57c Commit B
* 79e4075 Commit A 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-02T23:16:12.417

您可以显示子模块更改，但仅在使用`git log -p`. 以下命令显示了每个提交和子模块更改的完整差异。

```
git log -p --submodule=log 
```

子模块提交消息将像这样列出：

```
Submodule <submodule-name> <starting-commit>..<ending-commit>:
> Commit message 1
> Commit message 2
...
> Commit message n 
```

如果您对阅读每个提交的完整差异不感兴趣，您可以匹配并过滤掉这些部分：

```
git log -p --submodule=log | awk '
/^commit/ { add=1 } # Start of commit message
/^diff --git/ { add=0 } # Start of diff snippet
{ if (add) { buf = buf "\n" $0 } } # Add lines if part of commit message
END { print buf }
' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-03T16:36:35.370

如果您使用 bash，则可以使用以下脚本显示嵌入到超级项目日志的子模块提交日志。

```
#!/bin/bash 

# regular expressions related to git log output
# when using options -U0 and --submodule=log
kREGEXP_ADD_SUBMODLE='0+\.\.\.[0-9a-f]+'
kREGEXP_REM_SUBMODLE='[0-9a-f]+\.\.\.0+'

# --------------------------------------------------------------------
# function submodule_log
# --------------------------------------------------------------------
# 
# print a log of submodule changes for a range of commits
#
# arguments : see start of function body for details  
# 
function submodule_log {

    sm_present=$1; # presence 0: no, 1: yes
    sm_status=$2   # status   0: as is, 1: added submodule, 2: removed submodule 
    sm_name=$3     # name
    sm_id_base=$4  # base commit id added changes
    sm_id_now=$5   # final commit id added changes

    cur_dir=`pwd`

    # commits cannot be accessed if sbumodule working tree was removed, 
    # show submodule commits in details only if directory exists
    #
    # note: As of git 1.9, in .git/modules/<submodule-name>
    #       still the entire gitdir is present, just git won't successfully
    #       run something like 'git --git-dir .git/modules/<submodule-name> log f374fbf^!'
    #       from the superproject root dir. It fails as it want's to change directory to
    #       to the submodule working tree at '../../../<submodule-name>' to get the log.
    #       If one just creates it as an empty directory the command succeeds, but
    #       we cannot force the user to leave an empty directory. So just a hint
    #       is output to suggest creation of directory to get full log.

    #echo " $submod_entry"

    if [ -e $sm_name ]  
    then    
        cd $sm_name

        # if submodule not present in current version of superproject
        # can retrieve git log info only by using option '--git-dir'
        # -> use always option --git-dir

        git_dir_opt="--git-dir $cur_dir/.git/modules/$sm_name"
        git_cmd_base="git $git_dir_opt log --format=\"  %Cred%h %s%Creset\""

        if [ $sm_status -eq 0 ]
        then
            # modified module: output info on added commit(s)
            eval "$git_cmd_base ${sm_id_base}..${sm_id_now}"
        fi

        if [ $sm_status -eq 1 ]
        then
            # new module: output only info on base commit    
            eval "$git_cmd_base ${sm_id_now}^!"
        fi

        if [ $sm_status -eq 2 ]
        then
            # removed module: output only info on last commit  
            eval "$git_cmd_base ${sm_id_base}^!"
        fi

        cd $cur_dir 
    else
        echo " Skip info on submodule $sm_name (not present in current working tree)"
        echo " For full log, please add empty directory $sm_name for full log."
    fi 
}

# --------------------------------------------------------------------
# main script 
# --------------------------------------------------------------------

# Get the log of the parent repository (only SHA1 and parent's SHA1), 
# use files as amount of data might be huge in older repos 

# get commit ids as array
readarray -t log_commitids < <(git log --format="%H")

# get commit ids of parent commits 
readarray -t log_parents < <(git log --format="%P")

for ((c_idx=0; $c_idx<${#log_commitids[@]}; c_idx=$c_idx+1))
do
    # Can only be one commit id, but remove trailing newline and linefeed
    commit="${log_commitids[$c_idx]//[$'\r\n']}"

    # Can be more than one parent if it's a merge
    # remove trailing newline and linefeed
    parents="${log_parents[$c_idx]//[$'\r\n']}"    
    parents_a=($(echo $parents))
    num_parents=${#parents_a[@]}

    # check if merge commit, prefix next commit with M as they are merge
    merge_prefix=""
    if [ $num_parents -ge 2 ] 
    then
        merge_prefix="M$num_parents" 
    fi

    # Print the two-line summary for this commit
    git log --format="%Cgreen%h (%cI %cN)%Creset%n %Cgreen$merge_prefix%Creset %s" $commit^!

    #echo "found $num_parents parents"

    if [ "$parents" = "" ]
    then
       unset parents
    else

        for parent in $parents
        do
            # Find entires like 
            #  "Submodule libA 0000000...f374fbf (new submodule)"      or
            #  "Submodule libA e51c470...0000000 (submodule deleted)"  or 
            #  "Submodule libA f374fbf..af648b2e:"
            # in supermodules history in order to determine submodule's
            # name and commit range describing the changes that 
            # were added to the supermodule. Two regular expressions
            # kREGEXP_ADD_SUBMODLE and kREGEXP_REM_SUBMODLE are used
            # to find added and removed submodules respectively.

            readarray -t submod < <(git log -U0 --submodule=log ${parent}..${commit} \
            | grep -U -P '^Submodule \S+ [0-9a-f]+')

            for ((s_idx=0; $s_idx<${#submod[@]}; s_idx=$s_idx+1))
            do
                # remove trailing newline and linefeed
                submod_entry="${submod[$s_idx]//[$'\r\n']}"

                #echo mainly unfiltered as to show submod name and its
                #commit range stored in repo's log
                echo " $submod_entry"

                # remove preceding info 'Submodule ' as we already know that :-)
                submod_entry="${submod_entry/Submodule }"

                # if viewing repository version for which submodules do not exist
                # they are reported with correct commit ids but trailing text
                # is different, first assume it is present then check submod_entry
                submod_present=1
                if [[ "$submod_entry" =~ "commits not present" ]]
                then
                   submod_present=0

                   # remove trailing info about deleted submodule, if any
                   submod_entry="${submod_entry/'(commits not present)'}"                 
                fi

                # find with submodule got added/modified/removed by this superproject commit
                # assume 'modified' submodule, then check if commit range indicates
                # special cases like added/removed submodule
                sub_status=0                
                if [[ "$submod_entry" =~ $kREGEXP_ADD_SUBMODLE ]]
                then
                   sub_status=1

                   # remove trailing info about new submodule, if any
                   submod_entry="${submod_entry/'(new submodule)'}" 
                fi

                if [[ "$submod_entry" =~ $kREGEXP_REM_SUBMODLE ]]
                then
                   sub_status=2

                   # remove trailing info about deleted submodule, if any
                   submod_entry="${submod_entry/'(submodule deleted)'}"
                fi

                # create log output for submod_entry 
                # - pass contents in submod_entry as separate arguments
                #   by expanding variable and using eval to execute resulting code

                #replace dots by spaces as to split apart source and destination commit id
                submod_entry="${submod_entry//./ }"
                #remove colon behind last commit id, if any
                submod_entry="${submod_entry//:/}"

                eval "submodule_log $submod_present $sub_status $submod_entry"
            done    
        done
    fi
done 
```

该脚本类似于上面列出的 PowerShell 脚本，但解决了一些问题并以更密集的格式输出。它可以处理**新的子模块**和**删除的子模块**。

要正确显示不再属于超级项目的子模块的日志信息（已删除的子模块），至少子模块根目录（可以为空）必须保留在存储库中。否则 Git（在 Windows 上使用 2.19.0 版本测试）将在 log 命令中失败（例如 in `git --git-dir ./.git/modules/libA log --oneline f374fbf^!`），因为它总是将工作目录更改为子模块根目录（无论出于何种原因）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-16T01:35:28.263

如果你在 Windows 上工作，你可以使用这个 PowerShell 脚本：

```
function Parse-SubmoduleDiff($rawDiffLines) {
    $prefix = "Subproject commit "
    $oldCommitLine = $($rawDiffLines | where { $_.StartsWith("-" + $prefix) } | select -First 1)
    $newCommitLine = $($rawDiffLines | where { $_.StartsWith("+" + $prefix) } | select -First 1)

    if ($newCommitLine -eq $null) {
        return $null
    }

    $oldCommit = $null
    if ($oldCommitLine -ne $null) {
        $oldCommit = $oldCommitLine.Substring($prefix.Length + 1)
    }
    $newCommit = $newCommitLine.Substring($prefix.Length + 1)
    return @{ OldCommit = $oldCommit; NewCommit = $newCommit }
}

# Get the paths of all submodules
$submodulePaths = $(git submodule foreach --quiet 'echo $path')
if ($submodulePaths -eq $null) {
    $submodulePaths = @()
}

# Get the log of the parent repository (only SHA1)
$log = $(git log --format="%H %P" $args)
foreach ($line in $log) {

    $parts = $line.Split()
    $commit = $parts[0]
    $parents = $parts[1..$parts.Length]

    # Print the summary for this commit
    git show --format=medium --no-patch $commit
    echo ""

    # Can be more than one parent if it's a merge
    foreach ($parent in $parents) {
        # List the paths that changed in this commit
        $changes = $(git diff --name-only $parent $commit)

        if ([System.String]::IsNullOrWhiteSpace($parent)) {
            continue;
        }

        foreach ($path in $changes) {

            if ($submodulePaths.Contains($path)) {
                # if it's a submodule, the diff should look like this:
                # -Subproject commit 1486adc5c0c37ad3fa2f2e373e125f4000e4235f
                # +Subproject commit a208e767afd0a51c961654d3693893bbb4605902
                # from that we can extract the old and new submodule reference

                $subDiff = $(git diff $parent $commit -- $path)
                $parsed = Parse-SubmoduleDiff($subDiff)
                if ($parsed -eq $null) {
                    continue;
                }

                # Now get the log between the old and new submodule commit
                $oldCommit = $parsed.OldCommit
                $newCommit = $parsed.NewCommit
                echo "Submodule '$path'"
                if ($oldCommit -ne $null) {
                    $range = $($oldCommit + ".." + $newCommit)
                } else {
                    $range = $newCommit
                }

                git --git-dir $path/.git log $range | foreach { "  |  " + $_ }
                echo ""
            }
        }
    }
} 
```

显然它可以被翻译成 bash 以在 Linux 上使用。一般原则是这样的：

```
for each commit in the parent repo
    print the commit summary
    for each submodule that has changed in this commit
        get the old and new commit hashes of the submodule
        print the log of the submodule between those commits
    end for
end for 
```

# sql - varchar(500) 变量的截断输出

> ID：10741802
> 
> 赞同：0
> 
> 时间：2012-05-24T16:44:17.380
> 
> 标签：sql, sql-server, sql-server-2008, cursor

我试图从以下光标中获取两条信息：1\. 子域 2\. 域 ID

这个脚本运行良好，除了 subdomain 的输出只是单个和第一个字母。因此，假设域 ID 2 的子域是“abc.123domain.com”，我的结果是“a”。

知道我在这里做错了什么吗？我应该使用不同的数据类型吗？

```
USE testDatabase

declare @sql nvarchar(500)
declare @domainID int
declare @subDomain nvarchar(200)
DECLARE @NewLineChar AS CHAR(2) = CHAR(13) + CHAR(10)

declare domainIDCursor CURSOR

FOR 
    select domainID from tblDOMAINS

    OPEN domainIDCursor

    FETCH next from domainIDCursor into @domainID

    WHILE @@FETCH_STATUS = 0
                BEGIN

                set @sql = N' use tblDOMAIN' + convert(nvarchar, @domainID) + @NewLineChar  +
                + ' select @subDomain = (select subDomain from tblLocalDomainInfo (nolock))'

                    execute sp_executesql @sql, N'@subDomain nvarchar output', @subDomain output

                print 'subDomain is ' + @subDomain + ' and the domainID is ' + convert(nvarchar,@domainID)

        FETCH NEXT from domainIDCursor into @domainID
        END

CLOSE domainIDCursor
DEALLOCATE domainIDCursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:46:57.147

您没有在此处`convert(nvarchar, @domainID)`或此处给出尺寸`N'@subDomain nvarchar output'`。

*   如果您声明一个 nvarchar 变量而不指定大小，它将默认为 nvarchar(1)。
*   如果您在未指定大小的情况下转换/转换为 nvarchar，它将默认为 varchar(30)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:56:15.570

问题在这里： -

```
execute sp_executesql @sql, N'@subDomain nvarchar output', @subDomain output 
```

它应该是

```
execute sp_executesql @sql, N'@subDomain nvarchar(200) output', @subDomain output 
```

另见

```
declare @ID int
Set @ID = 1000

Select CONVERT(varchar, @ID) --output 1000
Select CONVERT(nvarchar, @ID) --output 1000 
```

# .net - .Net 安装程序，自定义操作问题

> ID：10741804
> 
> 赞同：1
> 
> 时间：2012-05-24T16:44:21.100
> 
> 标签：.net, visual-studio-2008, installation

我创建了一个 .NET 项目，其中包含**多个**安装程序类（从 System.Configuration.Install.Installer 继承的类）。我的目标是拥有一个单独的程序集，其中包含我们需要在设置项目中使用的所有可能的安装程序，**但**不一定在一个设置项目中全部使用。

我遇到的问题是，在添加自定义操作时，一旦我选择了一个程序集，就无法选择需要执行的特定安装程序。由于我无法指定要运行的安装程序，因此正在执行找到程序集的所有安装程序。

这是它的设计方式还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:31:33.133

我认为你需要改变你的范式。每个程序集/项目只创建一个安装程序类，但让该安装程序类调用相关方法来执行条件安装

或者

将每个安装程序类放在一个单独的程序集/项目中，然后为相关的程序创建一个自定义操作，并使用 CustomAction.Conditional 属性告诉安装项目要运行哪个自定义操作和安装程序类。看到这个： http: [//msdn.microsoft.com/en-us/library/025bcetc (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/025bcetc(v=vs.80).aspx)

# ruby-on-rails - collection_select，nil:NilClass 的未定义方法“map”

> ID：10741810
> 
> 赞同：4
> 
> 时间：2012-05-24T16:44:46.037
> 
> 标签：ruby-on-rails

我`@user = User.new`在行中添加以确保它不是零。哪个对象是零？

```
undefined method `map' for nil:NilClass

Extracted source (around line #11):

8:  <%= f.hidden_field(:width)%>
9:  <%= f.hidden_field(:height)%>
10:     <% @user = User.new %>
11:     <%= collection_select(@user, :full_name, @user_array, :id, {:prompt => 'true'}, {:class=>'select'})%>
12:     <div class="submit-button">
13:         <%= submit_tag("Tag the person!")%>
14:     </div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:47:10.460

`@user_array`是`nil`。确保使用一组用户设置它以避免出现此错误消息。

或者，如果您希望在 `select 中不显示任何选项，请设置`@user_array`为（一个空数组），例如：`[]`

```
collection_select @user, :full_name, @user_array || [], :id, 
  { prompt: 'true' }, { class: 'select' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-23T10:18:31.813

您必须将@user_array 添加到操作中：创建、新建、编辑和更新，最好的方法是使用`before_actions`

```
before_action :set_user_array , only: [:edit, :update, :new, :create]

 private
    def set_user_array 
      @user_array = User.all 
    end 
```

# java - Spring 无法解析 WEB-INF/libs 中的类型

> ID：10741814
> 
> 赞同：1
> 
> 时间：2012-05-24T16:45:09.237
> 
> 标签：java, spring, jar, war

我最近用 HBase 启动了一个 Spring Web 项目。问题是，spring 似乎无法解析 WEB-INF/libs 下的类型。它抱怨“未解决的 org.apache.hadoop.conf.Configuration”是从所需的 .class 文件间接引用的，该文件实际上位于 WEB-INF/lib 库下的 .jar 中。有什么要设置让spring容器找到吗？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:31:08.737

您需要确保 Spring 本身是由同一个类加载器加载的：WAR 类加载器。此类加载器应包括 WEB-INF/lib 中的所有 JAR 和 WEB-INF/classes 中的所有 .class 文件。

有一种方法可以将类加载器传递给 Spring 以使用与加载它的类加载器（或 Thread 的上下文类加载器）不同的类加载器，但这会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:14:25.587

好的，我有问题。似乎我的项目依赖于 hadoop-core-1.0.2 而 hbase 依赖于 hadoop-core-1.0.0 并且混淆了 Spring。我修复了依赖关系并解决了问题。

# json.net - Json.Net：如何验证 json 和 C# 属性之间是否存在一对一匹配

> ID：10741821
> 
> 赞同：1
> 
> 时间：2012-05-24T16:45:40.780
> 
> 标签：json.net

MissingMemberHandling 属性指示 Json.Net 在 json 文本包含 C# 类中缺少的属性时发出错误。我也想要相反的行为。如果 json 文本中缺少 C# 属性，我希望 Json.Net 发出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:19:13.597

我通过文档搜索完成了一点源代码挖掘

```
[JsonObject(ItemRequired = Required.Always)] 
```

将上述内容应用于类标记反序列化所需的所有字段。同样，`JsonObject`属性是继承的，在我的情况下非常有帮助。

# java - 使用 ejml 进行 LU 分解

> ID：10741822
> 
> 赞同：0
> 
> 时间：2012-05-24T16:45:42.177
> 
> 标签：java, matrix, decomposition, ejml

我正在尝试使用 ejml 库对矩阵进行 LU 分解。SVD分解的计算一切顺利，对于LU分解我不知道使用ejml库。我需要你的帮助

```
import java.util.Scanner;
import org.ejml.alg.dense.decomposition.CholeskyDecomposition;
import org.ejml.alg.dense.decomposition.DecompositionFactory;
import org.ejml.alg.dense.decomposition.DecompositionInterface; 
import org.ejml.alg.dense.decomposition.LUDecomposition;
import org.ejml.alg.dense.decomposition.lu.*;
import org.ejml.data.DenseMatrix64F;
import org.ejml.simple.SimpleMatrix;
import org.ejml.simple.SimpleSVD;

public class autovalori {
public static void main(String[] args) {

double[][] matrix;
double[] u;
int r, c, t = 0;

Scanner scanner = new Scanner(System.in);

System.out.println("Insert row matrix: ");
r = scanner.nextInt();//row matrix
System.out.println("Insert columns matrix: ");
c =  scanner.nextInt(); //columns matrix
matrix = new double[r][c];

    for (int i = 0; i < r; i++){
         for (int j = 0; j < c; j++){

             System.out.printf("value: " + i + " - " + j);
             System.out.printf("\n");
             matrix[i][j] = scanner.nextDouble();

         }
     }

    System.out.printf("\n");

    SimpleMatrix A = new SimpleMatrix(matrix);

    SimpleSVD SVD = A.svd();
    SimpleMatrix U = SVD.getU();
    SimpleMatrix S = SVD.getV();
    SimpleMatrix V = SVD.getW();

    U.print();
    S.print();
    V.print(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:35:46.530

SimpleMatrix 接口不提供计算 LU 分解的直接方法。相反，您需要从分解算法中计算它。

```
 SimpleMatrix A = new SimpleMatrix(10,5);

    LUDecomposition<DenseMatrix64F> lu = DecompositionFactory.lu(A.numCols());

    if( !lu.decompose(A.getMatrix()) ) {
        throw new RuntimeException("LU Decomposition failed!");
    }

    SimpleMatrix L = SimpleMatrix.wrap(lu.getLower(null));
    SimpleMatrix U = SimpleMatrix.wrap(lu.getUpper(null)); 
```

# jquery - slideDown 和 slideUp 的导航栏问题

> ID：10741823
> 
> 赞同：0
> 
> 时间：2012-05-24T16:45:53.697
> 
> 标签：jquery

我搜索了论坛，没有发现类似的问题。

首先，我的代码示例可以在这里找到：http: [//jsfiddle.net/LMWLn/97/](http://jsfiddle.net/LMWLn/97/)

虽然它在技术上有效，但我想清理几个问题：

1.  当我将鼠标移到“解决方案”或“关于我们”上时，动画效果很好。它向下滑动，然后向上滑动。但是，当我从“解决方案”直接转到“关于我们”时（反之亦然），它会立即进行更改，而不是向上滑动第一项然后向下滑动第二项。

2.  如果我刚刚查看了“关于我们”内容，然后将其关闭，然后将鼠标悬停在“解决方案”选项卡上，则内容 DIV 会滑下之前内容的整个高度，然后反弹回自己的高度（我希望这是有道理的...）

任何帮助将不胜感激。

谢谢，魔术贴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:00:24.173

发生第一个问题是因为您在将鼠标悬停在项目上时设置了 dropdownclosetimer = null 。这将取消对 HideMainDropdown() 的调用。第二个问题是因为“#maindropdown”会拉伸以适应其内容。它被拉伸以适应更大的“#aboutus-dropdowncontent”。

附带说明一下，您的 html 不是语义的，您的子导航从您的主导航中分离出来。通常人们也使用列表。这是一个简单的例子： http: [//jsfiddle.net/LMWLn/101/](http://jsfiddle.net/LMWLn/101/) 我确信CSS可以做得更好，但它可以工作。

# c# - 更高效的集成循环

> ID：10741824
> 
> 赞同：2
> 
> 时间：2012-05-24T16:45:56.543
> 
> 标签：c#, performance, integration

```
public double Integral(double[] x, double intPointOne, double intPointTwo)
{
    double integral = 0;
    double i = intPointOne;
    do
    {
        integral += Function(x[i])*.001;
        i = i + .001;
    }
    while (i <= intPointTwo);
    return integral;
} 
```

这是一个函数，我必须简单地使用各部分的总和来集成 x1-x2 的函数。我怎样才能使这个循环更有效（使用更少的循环），但更准确？

*where`Function`每次迭代都会改变，但它应该是无关紧要的，因为它的数量级（或边界）应该保持相对相同......*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T17:09:28.030

[1）查看http://apps.nrbook.com/c/index.html](http://apps.nrbook.com/c/index.html)的第 4.3 节以了解不同的算法。

2) 要控制精度/速度因子，您可能需要指定边界`x_low`以及`x_high`积分中所需的切片数。所以你的功能看起来像这样

```
// Integrate function f(x) using the trapezoidal rule between x=x_low..x_high
double Integrate(Func<double,double> f, double x_low, double x_high, int N_steps)
{
    double h = (x_high-x_low)/N_steps;
    double res = (f(x_low)+f(x_high))/2;
    for(int i=1; i < N; i++)
    {
        res += f(x_low+i*h);
    }
    return h*res;
} 
```

一旦你理解了这个基本的集成，你就可以继续学习在数值食谱和其他来源中提到的更精细的方案。

要使用此代码，请发出类似的命令`A = Integrate( Math.Sin, 0, Math.PI, 1440 );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T11:56:28.533

这里通过方法计算积分：左手，梯形和中点

```
/// <summary>
/// Return the integral from a to b of function f
/// using the left hand rule
/// </summary>
public static double IntegrateLeftHand(double a, 
                                       double b, 
                                       Func<double,double> f, 
                                       int strips = -1) {

    if (a >= b) return -1;  // constraint: a must be greater than b

    // if strips is not provided, calculate it
    if (strips == -1) { strips = GetStrips(a, b, f); }  

    double h = (b - a) / strips;
    double acc = 0.0;

    for (int i = 0; i < strips; i++)    { acc += h * f(a + i * h); }

    return acc;
}

/// <summary>
/// Return the integral from a to b of function f 
/// using the midpoint rule
/// </summary>
public static double IntegrateMidPoint(double a, 
                                       double b, 
                                       Func<double, double> f, 
                                       int strips = -1) {

    if (a >= b) return -1;  // constraint: a must be greater than b

    // if strips is not provided, calculate it
    if (strips == -1) { strips = GetStrips(a, b, f); }  

    double h = (b - a) / strips;
    double x = a + h / 2;
    double acc = 0.0;

    while (x < b)
    {
        acc += h * f(x);
        x += h;
    }

    return acc;
}

/// <summary>
/// Return the integral from a to b of function f
/// using trapezoidal rule
/// </summary>
public static double IntegrateTrapezoidal(double a, 
                                          double b, 
                                          Func<double, double> f, 
                                          int strips = -1) {

    if (a >= b) return -1;   // constraint: a must be greater than b

    // if strips is not provided, calculate it
    if (strips == -1) { strips = GetStrips(a, b, f); }  

    double h = (b - a) / strips;
    double acc = (h / 2) * (f(a) + f(b));

    for (int i = 1; i < strips; i++)    { acc += h * f(a + i * h); }

    return acc;
}

private static int GetStrips(double a, 
                             double b, 
                             Func<double, double> f) {
    int strips = 100;

    for (int i = (int)a; i < b; i++)
    {
        strips = (strips > f(i)) ? strips : (int)f(i);      
    }

    return strips;
}

Console.WriteLine("w/ strips:{0}", IntegrateLeftHand(0, 3.14, Math.Sin, 1440));
Console.WriteLine("without strips:{0}", IntegrateMidPoint(0, 30, x => x * x));

// or with a defined method for f(x)

public static double myFunc(x) { return x * (x + 1); }

Console.WriteLine("w/ strips:{0}", IntegrateLeftHand(0, 20, myFunc, 200)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:56:44.677

如果您事先知道函数，那么您可以分析它们并查看适合您的目的的集成步长大小。即对于线性函数，您只需要一个步骤，但对于其他函数，您可能需要可变步骤。至少看看你是否可以逃脱类似的事情`(pointTwo - pointOne)/1000.0`。

如果您需要它用于通用功能并且它不是家庭作业，您应该强烈考虑现有的库或刷新您的第一年数学课程......

请注意，您的代码实际上存在不使用 i 的错误（这对于 x 来说是非常糟糕的名称）：

```
for(x=intPointOne; x<=intPointTwo;x+=0.001) 
{
    integral += Function(x)*.001;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T17:11:09.567

您正在使用左手规则进行积分。只要函数在域上具有正斜率和负斜率，这只是半准确的（因为使用左端点的误差会抵消）。

我建议，至少，移动到梯形规则（计算由集合（x[i]，0），（x[i+0.001]，0），（x[i]，函数形成的梯形下的面积(x[i]), (x[i+0.001], 函数(x[x+0.001])。

一个更好的解决方案是使用辛普森法则。这是一个较慢的算法，但准确性应该允许您显着增加您的间隔。

看这里：[数值积分](http://en.wikipedia.org/wiki/Numerical_integration "数值积分")了解详情。

# mysql - MySQL 在排序记录时仅使用字符串的前 20 个字符

> ID：10741825
> 
> 赞同：4
> 
> 时间：2012-05-24T16:45:56.530
> 
> 标签：mysql, sql-order-by

看来，当我使用具有类型的`order by name`语句时，如果它们具有相同的 20 个字段的第一个字符，则我服务器上的 MySQL 不会按正确的顺序放置记录。似乎 MySQL 根本不关心第 21 个字符：当按降序排序时，它实际上保留了相同的错误顺序。`name``varchar(255)``name`

我在另一个 MySQL 安装上复制了我的表，那里一切正常。但是对于服务器上的这种限制，我该怎么办？我无法在那里重新安装 MySQL，因为我使用的是共享主机。

**更新**：该`name`字段不属于任何索引，在该字段上创建索引也无济于事。

MySQL 版本是 5.1.55，引擎是 MyISAM。

**更新 2**：我最初使用`cp1251_general_ci`排序规则，但后来我尝试了其他排序规则并得到了完全相同的结果。`'123456789012345678901'/'123456789012345678902'`对于我使用and的字符串`'abcdefghijklmnopqrstauvwxyz'/'abcdefghijklmnopqrstbuvwxyz'`，结果相同。

排序似乎没有考虑从 21 日开始的所有字符，但除此之外它可以正常工作。

有趣的是，当使用第 21 个字符时很重要，但第 22 个字符不重要。`ORDER BY substring(`name`, 2)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T13:26:46.897

你能检查你的 max_length_for_sort_data 和 max_sort_length 变量吗？默认值为 1024，如果您将其中之一设置为 20，则说明一切。

```
mysqladmin -u root -p variables | grep sort
Enter password: 
| max_length_for_sort_data                | 1024                                                                                      |
| max_sort_length                         | 1024                                                                                      |
| myisam_max_sort_file_size               | 2146435072                                                                                |
| myisam_sort_buffer_size                 | 8388608                                                                                   |
| optimizer_switch                        | index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=on |
| sort_buffer_size                        | 2097144                                                                                   | 
```

[您可以在 mysql 服务器手册和max_length_sort_data](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_max_length_for_sort_data)定义中找到更多信息[ORDER BY 优化](http://dev.mysql.com/doc/refman/5.1/en/order-by-optimization.html)章节。

# java - 为什么java在人工智能中没有那么多用

> ID：10741826
> 
> 赞同：1
> 
> 时间：2012-05-24T16:45:57.817
> 
> 标签：java, artificial-intelligence

除了基于著名研究人员使用的两极分化之外，还有什么原因可以解释为什么 java 在 AI 中没有被大量使用？似乎大多数cs学生，至少在so，cal，都知道java，所以看起来它会更加突出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:48:24.413

你的断言有点主观......但是......人工智能是计算机科学。计算机科学与语言无关。人工智能的重点是人工智能，而不是编程语言。

也就是说，据我所知，某些语言具有使**某些**AI 算法的实现更加容易的功能。因此，有时使用特定语言可能会让您的生活更轻松。我猜这里就是这种情况。

# android - ViewPager中的Android ListFragment使用上下文菜单

> ID：10741829
> 
> 赞同：1
> 
> 时间：2012-05-24T16:45:59.757
> 
> 标签：android, android-viewpager, android-listfragment

我有一个在每一页上`ViewPager`使用的。`ListFragments`我分别实现`onListItemClick`和`onContextItemSelected`处理列表项单击和长时钟。数据是通过互联网`ListFragment`加载的。`AsyncTask`

所需的行为是短按列表视图项以启动详细活动以显示该位置的详细信息（这是一个天气应用程序）。当用户长按时，会弹出一个上下文菜单，为用户提供其他选项，包括查看原始数据。

短按和细节活动效果很好。问题是长按，上下文菜单。当用户在第 3 页并使用长按选择列表中的第二个项目，然后为该位置选择“显示原始数据”时，将显示第 2 页上的第 2 个项目的原始数据，而不是第 3 页。

现在我正在使用 setOffscreenPageLimit(1)。当我将其更改为 setOffscreenPageLimit(2) 时，将显示第 1 页的数据而不是第 3 页。

代码：

```
@Override
public boolean onContextItemSelected(android.view.MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
    case R.id.cmenu_showRaw:    

        ViewGroup dataPanel = (ViewGroup) myListView.getChildAt(info.position);         
        TextView tvRaw = (TextView) dataPanel.findViewById(R.id.textRaw);
        TextView tvLocationID = (TextView) dataPanel.findViewById(R.id.textLocationId);

        showDismissDialog(tvRaw.getText().toString(), tvLocationID .getText().toString()); 
        return true; 
```

我试图弄清楚为什么原始数据和 locationID 数据不是从 ViewPager 上当前显示的片段中提取，而是从偏移页面中提取。我还在学习片段，所以我可能遗漏了一些微妙的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:44:35.650

我想通了：`info.targetView`让我得到我长期坚持的观点。从那里我可以做一个`findViewById`得到我需要的东西。

# c# - 在 wp7 的 Web 浏览器控件的新选项卡事件中打开

> ID：10741830
> 
> 赞同：1
> 
> 时间：2012-05-24T16:46:02.373
> 
> 标签：c#, windows-phone-7

对于使用Windows Phone 7 的 Web 浏览器控件创建的以下选项卡，如何使用上下文菜单（对于 IE 之类的链接）**在新选项卡事件中打开？**

**主页.xaml**

```
<Grid x:Name="LayoutRoot">
<Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="*" />
</Grid.RowDefinitions>
<TextBox x:Name="UrlTextBox"
         KeyDown="UrlTextBox_KeyDown" />
<Grid x:Name="BrowserHost"
      Grid.Row="1" />
</Grid>

<phone:PhoneApplicationPage.ApplicationBar>
<shell:ApplicationBar>
    <shell:ApplicationBar.MenuItems>
        <shell:ApplicationBarMenuItem Text="1"
                                      Click="TabMenuItem_Click" />
        <shell:ApplicationBarMenuItem Text="2"
                                      Click="TabMenuItem_Click" />
        <shell:ApplicationBarMenuItem Text="3"
                                      Click="TabMenuItem_Click" />
        <shell:ApplicationBarMenuItem Text="4"
                                      Click="TabMenuItem_Click" />
    </shell:ApplicationBar.MenuItems>
</shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

**MainPage.xaml.cs**

```
public partial class MainPage : PhoneApplicationPage
{
private const int NumTabs = 4;

private int currentIndex;
private string[] urls = new string[NumTabs];
private WebBrowser[] browsers = new WebBrowser[NumTabs];

public MainPage()
{
    InitializeComponent();
    ShowTab(0);
}

private void ShowTab(int index)
{
    this.currentIndex = index;
    UrlTextBox.Text = this.urls[this.currentIndex] ?? "";
    if (this.browsers[this.currentIndex] == null)
    {
        WebBrowser browser = new WebBrowser();
        this.browsers[this.currentIndex] = browser;
        BrowserHost.Children.Add(browser);
    }
    for (int i = 0; i < NumTabs; i++)
    {
        if (this.browsers[i] != null)
        {
            this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed;
        }
    }
}

private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        Uri url;
        if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
        {
            this.urls[this.currentIndex] = UrlTextBox.Text;
            this.browsers[this.currentIndex].Navigate(url);
        }
        else
            MessageBox.Show("Invalid url");
    }
}

private void TabMenuItem_Click(object sender, EventArgs e)
{
    int index = Int32.Parse(((ApplicationBarMenuItem)sender).Text) - 1;
    ShowTab(index);
}
} 
```

有谁能够帮我？提前感谢您的辛勤工作！

# javascript - 在 IE 中执行命令格式块标题

> ID：10741831
> 
> 赞同：3
> 
> 时间：2012-05-24T16:46:05.773
> 
> 标签：javascript, html, internet-explorer, firefox, google-chrome

我想将选定的文本格式化为标题，我这样做的方式在 Firefox 和 Google Chrome 中运行良好，但在 IE9 中不起作用，这是我的做法：

```
document.execCommand('formatBlock',false,'h1'); 
```

有谁知道如何在 Internet Explorer 9 中完成相同的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-18T07:45:02.303

问题似乎是语法之一。IE 期望标记被格式化，而其他浏览器则不这样做。

见[这里](http://help.dottoro.com/larpvnhw.php)：

> 在 Internet Explorer 中，元素的名称必须放在标记分隔符之间（例如`<H1>`）。Firefox、Opera、Google Chrome 和 Safari 支持所有块元素，Internet Explorer 仅支持 h1 - h6、address 和 pre 元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T16:59:51.803

Internet Explorer 仅支持标题标记`H1`- `H6`、`ADDRESS`和`PRE`，其中还必须包含标记分隔符`<`和`>`，例如 in `<H1>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:00:25.917

在 IE9 中非常适合我

您的代码可能错误，地雷更像：

```
 var contentWindow = editor.contentWindow;
        contentWindow.focus();
        contentWindow.document.execCommand('formatBlock', false, '<h1>');
        contentWindow.focus(); 
```

# haskell - 使用可能且仅用于 3 个以上的变量

> ID：10741834
> 
> 赞同：1
> 
> 时间：2012-05-24T16:46:15.763
> 
> 标签：haskell, syntax, ghc

嗨，我自己无法弄清楚，我也无法在网上找到示例

我正在尝试使用可能或警卫，而我发现的示例只有两个变量，当我编辑或遵循示例时，我得到一个错误，这就是我想要做的

```
--maybe example
    Fun :: Double -> Double -> Double -> Maybe Double
    Fun a b c
        | a >= -1.0 || a <= 1.0 || b >= -1.0 || b <=1.0 || c /=0 || c >= -1.0 = Nothing
        | otherwise = Just max(  ((c^ (-c)) +   (a^(-c)-1.0)  ^   (a+ (-1.0/a)))     0.0) 
```

gchi 出错

```
 The function `Just' is applied to two arguments,
    but its type `a0 -> Maybe a0' has only one 
```

而 hlint 给出

```
No suggestions 
```

尝试使用警卫代替我得到一个不同的错误

```
--guard example
    Fun :: Double -> Double -> Double -> Maybe Double
    Fun a b c
        | a >= -1.0 || a <= 1.0 || b >= -1.0 || b <=1.0 || c /=0 || c >= -1.0 = error "Value out of range "
        | otherwise = max(  ((c^ (-c)) +   (a^(-c)-1.0)  ^   (a+ (-1.0/a)))     0.0) 
```

还有 ghc 和 hlints 错误

```
 test.hs:10:1:
        Invalid type signature: Fun :: Double
                                       -> Double -> Double -> Maybe Double
        Should be of form <variable> :: <type>
    $ hlint test.hs
 Error message:
  Left-hand side of type signature is not a variable: Fun
Code:
    Fun :: Double -> Double -> Double -> Maybe Double
  > Fun a b c 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T16:49:47.487

您必须使用小写字母编写函数。这意味着写这个：

```
fun :: Double -> Double -> Double -> Maybe Double
fun a b c ... 
```

函数永远不能以大写字母开头，因为大写标识符是为模块（`Data.List`例如）和类型构造函数和数据构造函数（如`Int`or `Maybe`or `Just`）和其他一些东西保留的。

`Just`您对构造函数的应用也有问题。如果你这样写：

```
Just max(something) 
```

...它的含义与以下内容相同：

```
Just max something 
```

即你给出了`Just`两个论点。您需要通过调整括号来解决此问题：

```
Just (max something) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:51:19.570

语法错误，主要是：

```
f :: Double -> Double -> Double -> Maybe Double
f a b c
    |  a >= -1
    || a <=  1
    || b >= -1
    || b <=  1
    || c /=  0
    || c >= -1
     = Nothing

    | otherwise
     = Just $ max ((c ** (-c)) + (a ** (-c)-1) ** (a+ (-1/a))) 0 
```

请注意使用更一般类型的指数运算符 ,`(**)`并`$`避免`Just`包装器中的括号覆盖`max`.

# spring - 在哪里放置 applicationcontext.xml 和 .hbm 文件？

> ID：10741841
> 
> 赞同：3
> 
> 时间：2012-05-24T16:46:51.047
> 
> 标签：spring, hibernate, zk

我正在学习 spring hibernate zk 堆栈，并按照[本教程](http://books.zkoss.org/wiki/Small_Talks/2011/December/Integrate_ZK5_with_Spring_3_and_Hibernate)做我的第一个 crud找到我的pojos。

在github [https://github.com/kossel/firstzk](https://github.com/kossel/firstzk)

我有这个结构

![在此处输入图像描述](../Images/22161c567e4fba4133e04d6067c3066d.png)

应用程序上下文.xml

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <!-- set other Hibernate properties in hibernate.cfg.xml file -->
        <property name="configLocation" value="classpath:/com/iknition/firstzk/hibernate/hibernate.cfg.xml" />
    </bean> 
```

休眠.cfg.xml

```
 <mapping resource="com/iknition/firstzk/hibernate/Company.hbm.xml" />
    <mapping resource="com/iknition/firstzk/hibernate/Contact.hbm.xml" /> 
```

公司.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.iknition.firstzk.beans">
    <class name="Contact" table="contact">
        <id name="idcontact" column="idcontact" type="integer">
            <generator class="increment" />
        </id>
        <property name="name" column="name" type="string" />
        <property name="email" column="email" type="string" />
        <many-to-one name="company" column="companyId" class="com.iknition.firstzk.beans.Company" outer-join="true" />
    </class>
</hibernate-mapping> 
```

联系人.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.iknition.firstzk.beans">
    <class name="Contact" table="contact">
        <id name="idcontact" column="idcontact" type="integer">
            <generator class="increment" />
        </id>
        <property name="name" column="name" type="string" />
        <property name="email" column="email" type="string" />
        <many-to-one name="company" column="companyId" class="com.iknition.firstzk.beans.Company" outer-join="true" />
    </class>
</hibernate-mapping> 
```

**更新：**

*   我也参考了contact.hbm.xml，我错过了把它放在这里。
*   通过“*为什么我的 hbm 文件一直显示找不到我的 pojos* ”我的意思是，当我尝试构建应用程序时，我不断收到错误“ `Caused by: org.hibernate.MappingException: entity class not found: com.iknition.firstzk.beans.Contact`”我已经多次更改了这些配置文件的位置，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:34:42.490

嗯...从未尝试过使用外部 hibernate.cfg.xml。但我认为指定只加载属性。您可能仍需要在单独的属性中设置映射。

这是我的配置通常的样子：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
    <property name="hibernateProperties">
        <bean
            class="org.springframework.beans.factory.config.PropertiesFactoryBean">
            <property name="propertiesArray">
                <list>
                    <props>...</props>
                </list>
            </property>
        </bean>
    </property>
    <property name="mappingLocations" value="classpath:com/iknition/firstzk/hibernate/*.hbm.xml"/>

</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:48:39.790

我认为您必须一一指定mappingLocations，例如：

```
<property name="mappingLocations">
  <util:list>
    <value>hibernate/Company.hbm.xml</value>
    <value>hibernate/Contact.hbm.xml</value>
  </util:list>
</property> 
```

# mysql - 在 Mac 上安装 MySQL

> ID：10741848
> 
> 赞同：1
> 
> 时间：2012-05-24T16:47:29.147
> 
> 标签：mysql, macos

我已经下载并安装`mySQL`了双击它的图标。它已成功安装。

当我转到启动和首选项时，我看到添加了 mysql 的图标，当我单击它时，我看到一个屏幕显示“MySQL 服务器实例正在运行”。

但是，当我打开终端和`cd`到`/usr/local/mysql`然后当我键入时`sudo ./bin/mysqld_safe`，系统提示我输入密码。而且我安装mySQL时没有添加密码，所以我尝试将其留空，然后我尝试了各种密码登录，但所有尝试都失败了。

所以现在我需要知道如何通过终端登录到 mySQL？

mysql 版本 - 5.5.24-osx10.6x86_64 我的 Mac OS - 10.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:42:54.173

我发现在 MacOs 上安装 mysql 有一些不同之处。一是它无需密码即可安装。另一件事是它默认允许匿名登录。

使用它来设置密码：

```
mysqladmin -u root -h localhost password yourpassword 
```

您可以通过以下方式删除匿名登录：

```
shell> mysql -u root -p
Enter password: (enter root password here)
mysql> DROP USER ''@'localhost';
mysql> DROP USER ''@'host_name'; 
```

另一件事是我发现安装并没有修改路径变量。我从命令行运行 mysql 所做的是将 /usr/local/mysql/bin 添加到路径中，方法是将其添加到 /etc/paths 或 /etc/paths.d 。这可能是您运行 mysql 所需要的。就像评论中有人说的那样， mysqld_safe 是启动 mysql 服务器的一种方式，似乎已经设置为运行。

以下是向 /etc/paths.d 添加内容的具体说明

```
$ cd /etc/paths.d
$ cat > mysql
/usr/local/bin/mysql 
```

（然后键入 Ctrl-D 应该将文件放在那里）

如果您没有权限，则可能需要 sudo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:50:07.573

默认情况下，sudo 命令允许 admin 组中的任何人通过提供自己的密码以 root 身份运行命令。这就是为什么当你输入“sudo ./bin/mysqld_safe”时它会要求你输入密码。它与mysql没有任何关系。

如果您没有密码，则无法在默认配置中使用 sudo。要么给自己一个密码，要么编辑 sudoers 文件。（我强烈建议前者而不是后者，特别是如果你不知道 sudo 做了什么。）

有关更多信息，请从终端键入“man sudo”（然后是“man sudoers”）。

同时，“它说 -bash: mysql: command not found when I type mysql in the terminal”的原因是因为你已经清楚地将它安装到 /usr/local/mysql/bin/mysql 中，这不在你的小路。如果它在您的路径上，您可以在上面执行“sudo mysqld_safe”，而不是“sudo ./bin/mysqld_safe”。既然不是，你必须做“./bin/mysqld_safe”。

有关更多信息，请参阅有关 Unix shell 的良好入门。

最后，如果您已经运行了 mysql 守护程序，并且正在尝试启动客户端，那么您要运行的是“mysql”，而不是“mysqld_safe”。

# jquery - jQuery：第一个孩子没有按预期工作

> ID：10741850
> 
> 赞同：0
> 
> 时间：2012-05-24T16:47:39.407
> 
> 标签：jquery, jquery-selectors, css-selectors

我有一个看起来像这样的表格：

[jsFiddle](http://jsfiddle.net/c6JJ3/)

```
<ul id="services">
<li class="service"><label><input type="checkbox">A single option</label>
</li>
<li class="service"><label><input type="checkbox">Another single option</label>
<ul>
    <li>
    <select>
    </select>
     additional options</li>
</ul>
</li>
<li class="service"><label>
<select>
</select>
A multiple option</label>
<ul>
    <li><label><input type="checkbox"> with another option </label>
    <select>
    </select>
    </li>
</ul>
</li>
<li class="service"><label>
<select>
</select>
Another multiple option</label>
<ul>
    <li><label><input type="checkbox"> with another option </label>
    <select>
    </select>
    </li>
    <li>
    <select>
    </select>
     additional options</li>
</ul>
</li> 
```

​并且我试图通过使用以下方法仅选择具有“服务”类的`<label>`s 的第一级中的s：`<li>`

```
$(".service label:first-child").css("background", "yellow");​ 
```

但 is 似乎是递归的，并且正在选择嵌套`<ul>`s 的第一个孩子。

我在这里做错了什么？如何仅选择具有“服务”类`<label>`的 s 的第一级中的s？`<li>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:51:26.333

```
$(".service > label").css("background", "yellow");​ 
```

[**Fixed DEMO**](http://jsfiddle.net/c6JJ3/2/)

* * *

`>` is direct child selector.

so `a > b` selector means, select `b` only if it's direct parent is `a`.

[**w3 spec:**](http://www.w3.org/TR/selectors/#child-combinators)

**8.2\. Child combinators**

> A child combinator describes a childhood relationship between two elements. A child combinator is made of the "greater-than sign" (U+003E, >) character and separates two sequences of simple selectors.

* * *

`:first-child` selector means, select the element which is the first child of it's parent.

[**w3spec:**](http://www.w3.org/TR/selectors/#first-child-pseudo)

**6.6.5.6\. :first-child pseudo-class**

> Same as :nth-child(1). The :first-child pseudo-class represents an element that is the first child of some other element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:52:50.533

you need to be explicit that you want the children, from the parent and not all the childs

```
 $(".service > label").css("background", "yellow");​ 
```

[Live Example](http://jsfiddle.net/justelnegro/c6JJ3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:48:50.443

# iphone - OpenCV 人脸检测 - 矢量问题

> ID：10741853
> 
> 赞同：0
> 
> 时间：2012-05-24T16:47:46.850
> 
> 标签：iphone, c++, opencv

我正在使用以下代码在 iPhone 上使用 OpenCV 执行人脸检测。

```
std::vector<Rect> faces;

face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, cv::Size(15, 15) ); 
```

但是，当我尝试构建应用程序时，`detectMultiScale`函数调用会引发错误。“没有匹配的成员函数调用 'detectMultiScale'”。

下面给出进一步的解释：

![错误信息](../Images/1fca1f320f94f97aef927ddd2dc103b8.png)

错误如下：`Candidate function not viable: no known conversion from 'std::vector<Rect>' to 'vector<Rect> &' for 2nd argument.`

这里发生了什么？显然编译器对第二个参数有异议。我使用的是不同类型的向量吗？

谢谢，詹姆斯

XCode 4.2.1 SDK 5.0 OpenCV 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:54:00.643

你必须添加

```
using namespace cv; 
```

一开始。

# node.js - 最新的 Node.js 初学者教程

> ID：10741855
> 
> 赞同：0
> 
> 时间：2012-05-24T16:47:57.720
> 
> 标签：node.js

我在哪里可以找到一些教程来开始学习 Node.js？我见过一些，但它们是针对 0.4.x 版本的，据我所知，Node 现在是 0.6.x 版本。我在 Google 上搜索并在 StackOverflow 上发现了一个类似的问题，但很久以前就有人问过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:07:16.707

看看这个，当我开始的时候对我非常有用，好的教程和 API 参考有很好的例子！ [nodemanual.org](http://nodemanual.org/latest/nodejs_dev_guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:12:50.477

从截屏视频或 CBT 学习比从一开始就阅读手册是最好的方法：[Node Tuts](http://nodetuts.com/)有广泛的视频教程可供学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:19:52.517

本[教程](http://www.nodebeginner.org/)让我快速启动并运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:14:47.773

DailyJs 网站有非常好的教程，用于使用 Node.js、Express、Jade、Backbone 构建实用的 Web 应用程序。

源代码在github [https://github.com/alexyoung/nodepad](https://github.com/alexyoung/nodepad)

教程在这里[http://dailyjs.com/tags.html#lmawa](http://dailyjs.com/tags.html#lmawa)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T18:02:44.867

对于现在看到这个的任何人，你可以去[NODESCHOOL](http://nodeschool.io/)。

他们有一些非常好的（最新的）课程，应该能够让您立即启动并运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T23:35:38.227

对于任何在谷歌上绊倒的人，我写了一个初学者指南，包括一步一步在网上学习的最佳地点和顺序：[https ://medium.com/node-js-tips-tricks/e8baa5207c11](https://medium.com/node-js-tips-tricks/e8baa5207c11)

我听说它很有用，也许它也适合你。

# css - 隐藏在 Nivo Slider 后面的菜单

> ID：10741858
> 
> 赞同：2
> 
> 时间：2012-05-24T16:48:04.890
> 
> 标签：css

我试过z-index，由于某种原因它不起作用。我该如何解决？

[http://goo.gl/VJKWh](http://goo.gl/VJKWh)

```
#menu {
background-color:#FFF;
height:30px;
border:0;
border-top:2px solid #8BD2E4;
margin:0 auto;
padding:0 6px 0 6px;
z-index:9998;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:53:55.373

这对我有用。

```
.sub-menu{
    z-index:999;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:53:23.970

添加;

```
z-index:9999; 
```

到“#blog-menu ul”

# asp.net-mvc-3 - Asp.Net MVC 3：如果控制器为每个用户实例化，为什么构造函数中的会话 ID 为空？

> ID：10741859
> 
> 赞同：1
> 
> 时间：2012-05-24T16:48:07.493
> 
> 标签：asp.net-mvc-3, controller

我正在尝试从 cookie 中重用 SessionID 或生成新的 cookie。我想我可以将它添加到控制器构造函数中，以便所有操作方法都知道要使用的 SessionID。但是，构造函数的 Session 对象为空。

我是否必须用代码装饰每个 Action Method 入口点以检查现有的 SessionID cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:50:36.587

构造函数在 Controller 生命周期中太早了——它还不知道 Session。[`Initialize()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.initialize.aspx)改为覆盖。

# ruby-on-rails - 无法调用我的关联表

> ID：10741860
> 
> 赞同：-1
> 
> 时间：2012-05-24T16:48:10.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

任何善良的人都可以看看这个，看看代码有什么问题。我真的不能撤回关联表中的字段！我的问题是什么？

看法：

```
<% @playersname.each do |p|%> 
    <ul>
<li><%= p.name %></li>
<li><%= p.result.inspect  %></li>
</ul> 
```

控制器：

```
 class ResultsController < ApplicationController
def index
@playersname = Player.all
end
end 
```

模型：

```
 class Player < ActiveRecord::Base
  attr_accessible :name
  belongs_to :result
end

 class Result < ActiveRecord::Base
   # attr_accessible :title, :body
   has_many :player
  end 
```

迁移：

```
class CreatePlayers < ActiveRecord::Migration
 def change
  create_table :players do |t|
    t.string "name"
    t.references :results
  t.timestamps
  end
end
end

class CreateResults < ActiveRecord::Migration
 def change
  create_table :results do |t|
    t.string "result", :limit => 40
    t.string "cal", :limit => 40
    t.string "sum",:limit => 300
  t.timestamps
 end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:54:50.353

您将需要复数播放器，在您的代码中：

```
 has_many :player 
```

应该

```
 has_many :players 
```

此外，在您看来，您应该更改：

```
<li><%= p.result.inspect  %></li> 
```

到别的东西。它不会起作用，因为a）没有“结果”方法，`p`因为只有一种`results`方法。当你调用 .inspect 时，`results`你会得到一些你可能不想发送到浏览器的东西。

弄清楚关联后，您可能希望在视图中看到如下内容：

```
<h1>Results</h1>
<%= render :partial => "result", :collection => @results %> 
```

然后您将在您的视图文件夹中创建一个名为`_result.rb`并包含这样的代码的部分

```
<h3>Result: <%= result.title %></h3>
<p><%= result.body %></p> 
```

# c# - 关于 WPF 命令的问题

> ID：10741861
> 
> 赞同：1
> 
> 时间：2012-05-24T16:48:11.700
> 
> 标签：c#, wpf, mvvm

我有几个关于 WPF 命令的问题。

1.  我应该在哪里放置确认对话框？我应该在命令回调函数中显示它们吗？如果在应用程序的某些区域我不希望命令显示确认怎么办？

2.  如果我有一个显示可以删除的项目的用户控件。该命令应该在应用程序的视图模型中，并且我使用它来删除项目，还是用户控件本身也应该有一个命令来调用视图模型的函数？（注意：应用程序视图模型是唯一具有执行此操作所需信息的模型）

3.  如何在命令中传递数据？我主要使用`DelegateCommand`，并且在为网格项触发命令时，我想传递选定的项，否则应用程序的主视图模型将不得不找到网格并找出它的选择，这会将命令硬编码到网格并且不使其可重复使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:59:37.543

这有点是意见和风格。. . 这是我的方法：

**问题一：**

我有一个处理任何确认的实用程序类，并且我使用 MVVM Light 中的轻量级消息来处理视图、确认和视图模型之间的通信。

*编辑：关于第 1 点的更多信息*

> 在我的命令中，我将按照“ConfirmDeletionMessage”的行发送一条消息，然后由我的对话实用程序类接收。对话实用程序类向用户显示适当的消息，并检查结果。根据结果​​，它将广播“DeletionConfirmedMessage”或“DeletionCanceledMessage”，然后由 ViewModel 处理以完成或取消删除。
> 
> 如果您有多个订阅者订阅此消息，则会涉及一些风险，因为您不知道他们将被处理的顺序，但是如果您对消息消费者进行严格管理，或者确保他们能够在一个随机顺序，这种方法工作得很好，它以可测试的方式分离你的视图和模型代码。

**问题2：**

这是一项艰巨的任务，它将取决于您的整体应用程序。我个人很喜欢将它放在项目的视图模型中。这样，您就不必担心第三个问题。相反，删除操作仅适用于您正在处理的项目。 *但是*，如果您必须对列表项之外的数据进行操作（例如将其从列表中删除），则将命令放在父视图模型上会更有意义。

**问题 3：**

使用该`CommandParameter`物业。你可以把它绑定到你想要的任何东西上。

**编辑答案#2**

马克格林（他在下面评论）让我思考。我最初对 WP7 采用了这种方法，它绝对适合我需要做的事情。但是，绝对应该考虑其他处理此问题的方法。另一个选项是您的视图模型可以使用的“确认类”。如果您使用的是 IoC 内核，则可以通过构造函数/属性注入轻松实现。或者，如果您有其他获取课程的方法，请这样做，但要以您可以在测试中模拟的方式进行。它可能看起来像这样：

```
public class ExampleViewmodel : ViewModel
{
      private IConfirmDialogManager _dialogManager;
      public ExampleViewmodel(IConfirmDialogManager dialog)
      {
            _dialogManager = dialog;
      }

      // ... code happens ...
      private void DeleteCommand()
      {
             bool result = _dialogManager.Confirm("Are you sure you want to delete?");
      }
} 
```

使用如下所示的 IConfirmDialogManager 界面：

```
public interface IConfirmDialogManager
{
      bool Confirm(string message);
} 
```

然后您将适当地实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T17:26:33.723

> 我应该在哪里放置确认对话框？我应该在命令回调函数中显示它们吗？如果在应用程序的某些区域我不希望命令显示确认怎么办？

确认对话框和显示消息对话框是视图。你的虚拟机应该有一种方法来通知你的视图它想要显示一些东西或询问一些东西，然后视图应该决定如何显示它（状态栏、窗口、弹出窗口、语音消息......）

> 如果我有一个显示可以删除的项目的用户控件。该命令应该在应用程序的视图模型中，并且我使用它来删除项目，还是用户控件本身也应该有一个命令来调用视图模型的函数？（注意：应用程序视图模型是唯一具有执行此操作所需信息的模型）

项目控制应引发删除命令。VM 应该处理命令并决定要做什么（VM 应该具有所选项目的列表，并且视图应该绑定到该列表）。

> 如何在命令中传递数据？我主要使用 DelegateCommand，并且在为网格项触发命令时，我想传递选定的项，否则应用程序的主视图模型将不得不找到网格并找出它的选择，这会将命令硬编码到网格，而不是使其可重复使用。

命令可以有参数（例如RoutedUICommand）。命令绑定可以为参数指定一个绑定表达式。但是，正确的方法是让 VM 成为选择的来源，并在视图的选择和 VM 之间进行双向绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:32:36.907

1.  只需在视图模型中使用[对话服务](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)
2.  它取决于，但命令所在的对象/视图模型可以通过 RelativeSource 绑定轻松访问
3.  CommandParameter 是一种方式。实际上，您使用 mvvm 需要的所有信息都应该绑定到您的视图模型。因此，如果您有命令并且需要列表视图中的选定项，则可以将其绑定到视图模型，而无需将其设置为命令参数

# facebook-graph-api - Facebook API 检索 FriendList 对象，然后从每个好友列表中检索朋友

> ID：10741865
> 
> 赞同：0
> 
> 时间：2012-05-24T16:48:28.173
> 
> 标签：facebook-graph-api

我正在使用 Facebook 图形（休息）API，我想检索某个用户的 facebook FriendList 对象，然后我需要从特定的 FriendList 中检索朋友。我查看了[facebook API 文档](https://developers.facebook.com/docs/reference/api/FriendList/)，但我不明白什么是 FRIENDLIST_ID 以及我想如何知道 ID。请如果有人以前做过，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:03:37.900

FRIENDLIST_ID/members 返回成员。

# tdd - 如何使用 BDD 编写复杂的数据结构/数据层

> ID：10741867
> 
> 赞同：1
> 
> 时间：2012-05-24T16:48:29.850
> 
> 标签：tdd, bdd

我是行为驱动开发的新手，我找不到任何与我当前问题相似的示例或指南。

我目前的项目涉及一个巨大的 3D 网格，每个离散单元中都有任意数量的插槽。存储在这些槽中的实体有自己的槽，因此可以存在任意嵌套的实体。使用的对象的最终实现将需要某种持久数据存储的支持，这会使 API 有点复杂（即使用 load/store 之类的词而不是 get/set 并确保修改返回的项目不会修改数据存储本身中的相应​​项目）。别担心，我的第一个实现将简单地存在于内存中，但 API 是我应该定义的行为，因此实际的实现现在并不重要。

我坚持的事实是 BDD 文献关注对象之间的交互以及模拟对象如何帮助实现这一点。这似乎根本不适用于这里。我的抽象数据存储唯一真正的“行为”涉及从编程语言本身所代表的实体之外的实体加载和存储数据；我无法定义或测试这些行为，因为它们依赖于实现。

那么我可以定义/测试什么？自然的选择是状态。存储一些东西。确保它加载。修改我加载的东西，并确保在我重新加载后它没有被修改。等等。但我的印象是，对于新的 BDD 开发人员来说，这是一个常见的陷阱，所以我想知道是否有更好的方法来避免它。

如果我确实采取了州测试路线，则会出现其他几个问题。显然我可以先测试一个空网格，然后在一个位置测试一个空实体，但接下来呢？不同位置的两个实体？同一位置的两个实体？嵌套实体？我应该测试多深的嵌套？我是否测试这些非排他性案例的笛卡尔积，即同一位置的两个实体并且每个都有嵌套实体？清单永远持续下去，我不知道在哪里停下来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:31:03.123

TDD 和 BDD 之间的区别在于语言。具体来说，BDD 专注于功能/对象/系统行为，以提高设计和测试的可读性。

通常，当我们考虑行为时，我们会考虑对象交互和协作，因此需要模拟来进行单元测试。但是，如果对象的行为是修改网格的状态，那么它并没有错。基于状态或模拟的测试可以在 TDD/BDD 中使用。

但是，为了测试复杂的数据结构，您应该使用 Matchers（例如 Java 中的 Hamcrest）来仅测试您感兴趣的部分状态。您还应该考虑是否可以将复杂数据分解为协作的对象（但仅限如果从算法/设计的角度来看这是有道理的）。

# jquery - 如何将自定义行添加到 jQuery DataTables 插件

> ID：10741868
> 
> 赞同：1
> 
> 时间：2012-05-24T16:48:42.970
> 
> 标签：jquery, ajax, jquery-datatables

我有一个基本的 html 页面，上面有一个 jQuery DataTables 网格。我能够

[http://datatables.net/index](http://datatables.net/index)

它在浏览器中显示得很好。问题是我想为每个部分添加自定义行标题。所以行标题可以位于第 3 行、第 8 行等。如何在数据表中间动态插入行标题？

```
getDataOverview: function ($page) {
        $page.find('#tblDataTable').dataTable({
            "bServerSide": true,
            "fnDrawCallback": onAfterTableLoad,
            "bJQueryUI": false,
            "bFilter": false,
            "bPaginate": false,
            "bLengthChange": false,
            "oLanguage": { "sInfo": "" },
            "sAjaxSource": this.getUrl($page) + '/GetDataOverview/',
            "fnServerData": function (sSource, aoData, fnCallback) {

                $.ajax({
                    dataType: 'json',
                    type: "POST",
                    url: sSource,
                    data: aoData,
                    success: fnCallback,
                    error: function (jqXHR, textStatus, errorThrown) { alert('Error getting data' + errorThrown) }
                })
            },
            "bProcessing": false, // don't want to use the default progress indicator at this time
            "aoColumnDefs": [
                { "sName": "ID", "aTargets": [0], "mDataProp": "ID", "bSortable": false },
                { "sName": "Name", "aTargets": [1], "mDataProp": "Name", "bSortable": false },
                { "sName": "Other", "aTargets": [2], "mDataProp": "Other", "bSortable": false }
            ],
            "aaSorting": [[0, "asc"]] // default sort by Task Type
        });
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:25:40.483

查看[fnRowCallback](http://datatables.net/examples/advanced_init/row_callback.html)。您可以在回调期间确定要添加标题的行，然后在满足您的条件时注入新行。

# iphone - 在 UIWebView 中查看下载的图像

> ID：10741881
> 
> 赞同：0
> 
> 时间：2012-05-24T16:49:48.117
> 
> 标签：iphone, ios, uiwebview

我需要显示一个 UIWebView 来显示应用程序已下载的图像。我生成我的 HTML 并将其设置为：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
        [webView loadHTMLString:messageBody baseURL:nil];
        [self.view webView]; 
```

我生成的 HTML 中的图像如下所示：

```
<img src="file://Users//Max//Library//Application%20Support//iPhone%20Simulator//5.1//Applications//CDA9EC67-01BA-4AD8-B18B-E467A54B464C//Documents//18//l4c050-01w_tn.jpg" height="60" /> 
```

图像显示为损坏，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:56:49.613

您在图像中使用了桌面计算机的绝对路径。一旦您尝试在设备上运行您的应用程序，这将不起作用，因为该应用程序无法访问您台式计算机上的文件。

正确的方法是在图像中使用相对路径，然后将 baseURL 参数设置为存储图像的设备文件系统的文件夹。

# jquery - jquery 使用两个 .append() 不起作用

> ID：10741883
> 
> 赞同：3
> 
> 时间：2012-05-24T16:50:01.227
> 
> 标签：jquery, append

我正在尝试使用 jquery 将一个元素附加到两个地方，但只有一个是最后一个作品（即 place_2），而第一个地方没有附加。

代码：

```
$("#place_1").append(new_line);
$("#place_2").append(new_line); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:52:59.260

一个元素在 DOM 树中只有一个位置，所以第二个`append`实际上移动了元素。

你可以用这个

```
$("#place_1").append($(new_line_html));
$("#place_2").append($(new_line_html)); 
```

或者

```
$("#place_1").append(new_line);
$("#place_2").append($(new_line).clone()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:02:58.050

我觉得够了

```
 $("#place_1, #place_2").append(new_line); 
```

# c# - C#如何减少重复代码？

> ID：10741888
> 
> 赞同：1
> 
> 时间：2012-05-24T16:50:18.437
> 
> 标签：c#

我在很大程度上自学了 C# 代码，我在大学里上了一门没有多大帮助的课……当然学会了如何阅读一本书。所以我在这里和那里创建了工具，通过在线示例学习。Stackoverflow 是我最喜欢的网站，通常社区很有帮助......

无论如何，我的问题是，我创建了一个 WPF 程序，它对小数位数进行多次计算，我通过一遍又一遍地重用相同的代码计算得到了它，它工作正常，但我知道有一种更简单的方法用少得多的行来做这件事。我似乎缺少这些知识。

这是我将如何做事的一个例子。

```
int int1 = 4;
int int2 = 2;
int int3 = 6;
int int4 = 8;
int calc1 = 0;
int calc2 = 0;
int calc3 = 0;

calc = int1 * int4
calc2 = int1 * int2
calc3 = int3 * int3

if (calc >= calc3)
{
do something;
}
else
{
calc = 33
}

if (calc2 >= calc3)
{
do something;
}
else
{
calc2 = 33
}

if (calc3 >= calc2)
{
do something;
}
else
{
calc3 = 33
}

if (calc3 >= calc)
{
do something;
}
else
{
calc2 = 33
} 
```

我希望这足够清楚.. 我可以重复代码，但我不确定如何更好地使用 C#，我知道它已经内置了减少重复代码的方法，只是不知道如何找到它们。

任何帮助或示例表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T16:56:58.713

我想到的最简单的解决方案是将它变成一种方法。（我将把[函数的访问修饰符留给你](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.100%29.aspx)……这取决于你将在哪里重用这段代码）

```
int CustomCompare(int leftHandSide, int rightHandSide)
{
int calc;
 if (leftHandSide >= rightHandside)
 {
  do something;
 }
 else
 {
  leftHandSide= 33
 }
return leftHandSide
} 
```

你只需传入你的变量：

```
calc = CustomCompare(calc, calc3) 
```

如果需要，您甚至可以将“做某事”部分更改为您传入的自定义操作。看看[MSDN中的Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

```
int CustomCompare(int leftHandSide, int rightHandSide, Action doSomething)
{
int calc;
 if (leftHandSide >= rightHandside)
 {
  doSomething();
 }
 else
 {
  leftHandSide= 33
 }
return leftHandSide
}

...

calc = CustomCompare(calc, calc3, 
    ()=>{do some stuff that will be executed inside the method}); 
```

[Func 可以让你从那个 doSomething 动作中返回一个值](http://msdn.microsoft.com/en-us/library/bb534960)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:56:13.537

在同一类的方法中重用代码的最简单方法是为该计算定义一个私有方法。这样，您就可以通过调用方法来引用该代码，而不是通过复制粘贴一些代码。事实上，每次你复制粘贴时，你都知道你错过了一个方法。

如果需要在相关类之间共享代码，可以在基类中创建一个受保护的方法。

最后，对于项目范围的“水平”重用，您可以定义一个静态帮助程序类，并将您的方法定义为公共静态。这样，您项目中的每个类都可以重用您的计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:56:29.900

如何在您的类中创建一个私有方法，然后在需要完成计算时调用该方法。这消除了一遍又一遍地重写代码。

例子：

```
int int1 = 4;
int calc1 = 0;
Calculation(int1, calc1);

int int2 = 2;
int calc2 = 0;
Calculation(int2, calc2);

//private method
private Calculation(int integer, int calculation)
{
    //calculate
} 
```

旁注：我更喜欢先安排所有变量，然后对其进行操作（函数调用等）（基于与单元测试相关的 Arrange-Act-Assert）。但是，我这样做是为了强调我的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:58:17.857

Err....调用函数？

```
doCalc(4, 2, 6, 8)

static public void doCalc(int int1, int int2, int int3, int int4)
{
  int calc1 = int1 * int4
  int calc2 = int1 * int2
  int calc3 = int3 * int3

  if (calc >= calc3)
  {
    do something;
  }
  else
  {
    calc = 33
  }

  if (calc2 >= calc3)
  {
    do something;
  }
  else
  {
    calc2 = 33
  }

  if (calc3 >= calc2)
  {
    do something;
  }
  else
  {
    calc3 = 33
  }

  if (calc3 >= calc)
  {
    do something;
  }
  else
  {
    calc2 = 33
  }
} 
```

另外，请注意缩进。当你开始一个新的范围时，在里面添加一些空格。

# database - HIVE：GROUP BY 的行为不像在 MySQL 中那样

> ID：10741891
> 
> 赞同：2
> 
> 时间：2012-05-24T16:50:34.730
> 
> 标签：database, group-by, hive

我对 MySQL 有一些经验，最近我不得不在 HIVE 上做一些工作。

查询的基本结构在两者之间非常相似，但是 HIVE 中的 GROUP BY 的工作方式似乎有点不同......因此我无法实现以前在 MySQL 中使用 GROUP BY 可以实现的功能。

以下是我的问题，假设我有一个包含 A、B、C 列的表，并且我想选择最大的行。B 列值按 A 列分组。我会这样做：

```
SELECT A, max(B) FROM myTable GROUP BY A 
```

上面的代码可以在 HIVE 中正常工作。但是，如果我还想查看 C 列中的值，该值与最大值所在的行位于同一行中，该怎么办？B 值？在 MySQL 中，我可以这样做：

```
SELECT A, max(B), C FROM myTable GROUP BY A 
```

但是在HIVE中我不能这样做。它抱怨 C 不在 GROUP BY 键中，但是如果我将 C 添加到 GROUP BY 中，结果完全不是我想要的。

那么在 HIVE 中选择这种期望结果的方法是什么？有人说在 C 列上使用 collect_set 可以解决问题，但我不知道 collect_set 是如何排序的，因此不知道要返回哪个元素......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T23:11:13.577

好的，我想通了...以下可以解决问题：

```
SELECT A, maxB, C FROM myTable JOIN
(SELECT A, max(B) as maxB FROM myTable GROUP BY A) temp
ON myTable.A = temp.A AND myTable.B = temp.maxB 
```

事实证明，我必须在 HIVE 中编写更多代码才能获得与 MySQL 中仅一行代码相同的结果...... :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:02:40.683

在 MySQL 中，您只会得到一个随机的 C，这不是您所期望的。

参见 MySQL 的 SQL_MODE 以适当地让 MySQL 也拒绝这种模棱两可的代码。

（或使用 MIN(C)，得到一个特定的）

# c - 如何为 Unix 编写一个可以处理正则表达式的 C 程序？

> ID：10741893
> 
> 赞同：-2
> 
> 时间：2012-05-24T16:50:36.720
> 
> 标签：c, regex, unix, dfa

我想为 Unix 创建一个可以处理正则表达式的 C 程序，就像一个简单的 Perl 解释器。我必须亲自编写正则表达式引擎吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:56:25.283

[http://www.gnu.org/software/libc/manual/html_node/Regular-Expressions.html](http://www.gnu.org/software/libc/manual/html_node/Regular-Expressions.html)

您可能想寻找一个已经编码的库。C 使用库来允许您将其他人的代码包含到您的工作中。我假设有很多正则表达式库供您使用！

# php - 用 ID 查询 Facebook 的姓名和图片

> ID：10741897
> 
> 赞同：0
> 
> 时间：2012-05-24T16:50:45.327
> 
> 标签：php, facebook, api, rest, curl

我正在开发一个脚本，每隔一周左右更新一次用户的姓名和个人资料图片（以保持更新他们的信息）。

我需要弄清楚如何使用 Facebook 的 API 来使用他们的 facebook ID 获取用户的姓名和个人资料图片。

我正在使用 PHP。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:01:02.957

您可以使用`/userid`名称和图片的呼叫和过滤器。

```
https://graph.facebook.com/the_user_id?fields=name,picture 
```

退货

```
{
   "name": "First LastingName",
   "id": "the_user_id",
   "picture": "The image.jpg"
} 
```

如果您使用的是 PHP SDK，您可以这样做

```
$user = $facebook->api('/the_user_id');
$name = $user['name'];
$picture = $user['picture']; 
```

有关更多信息，`user`请参阅[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

# javascript - 如何选择字符串的最后两个字符

> ID：10741899
> 
> 赞同：258
> 
> 时间：2012-05-24T16:50:48.630
> 
> 标签：javascript, string

我需要从变量中选择最后两个字符，无论是数字还是字母。

例如：

```
var member = "my name is Mate"; 
```

我想显示`member`变量中字符串的最后两个字母。

* * *

## 回答 #1

> 赞同：551
> 
> 时间：2012-05-24T16:54:09.160

您可以将负索引传递给[`.slice()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice). 这将指示从集合末尾的偏移量。

```
var member = "my name is Mate";

var last2 = member.slice(-2);

alert(last2); // "te" 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-04-11T13:13:01.730

编辑：2020 年：`string.slice(-2)`如其他人所说使用 - 见下文。

现在 2016`string.substr(-2)`应该可以解决问题（不是**子字符串**（！））

取自 MDN

> 句法
> 
> `str.substr(start[, length])`
> 
> 参数
> 
> 开始
> 
> 开始提取字符的位置。**如果给定负数，则将其视为 strLength + start**其中 strLength 是字符串的长度（例如，如果 start 为 -3，则将其视为 strLength - 3。） length 可选。要提取的字符数。

**编辑 2020**

MDN 说

> 警告：虽然 String.prototype.substr(...) 并未严格弃用（如“从 Web 标准中删除”），但它被视为遗留函数，应尽可能避免使用。它不是核心 JavaScript 语言的一部分，将来可能会被删除。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-24T16:52:26.937

试试这个，注意你不需要在`substring`.

```
var characters = member.substr(member.length -2); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-03-20T23:39:22.807

以下示例使用`slice()`负索引

```
var str = 'my name is maanu.';
console.log(str.slice(-3));     // returns 'nu.' last two
console.log(str.slice(3, -7)); // returns 'name is'
console.log(str.slice(0, -1));  // returns 'my name is maanu'
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-24T16:51:28.990

你可以试试

```
member.substr(member.length-2); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-12-13T13:50:23.920

如果它是一个整数，你需要......

```
var result = number.toString().slice(-2); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-24T16:53:46.653

您应该使用子字符串而不是 jQuery 来执行此操作。

尝试这样的事情：

```
member.substring(member.length - 2, member.length) 
```

W3Schools（不是官方的，但偶尔会有所帮助）： [http ://www.w3schools.com/jsref/jsref_substring.asp](http://www.w3schools.com/jsref/jsref_substring.asp)

根据评论者的要求添加 MDN 链接：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-19T12:39:08.460

**最短：**

```
str.slice(-2) 
```

**例子：**

```
const str = "test";
const last2 = str.slice(-2);

console.log(last2);
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-19T11:38:25.477

```
var member = "my name is maanu"; 
```

`var answer=member.substring(0,member.length - 2);`

```
alert(answer); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-09T14:59:01.550

切片可用于查找子字符串。当我们知道索引时，我们可以使用诸如索引加法器之类的替代解决方案。两者的执行时间大致相同。

```
const primitiveStringMember = "my name is Mate";

const objectStringMember = new String("my name is Mate");
console.log(typeof primitiveStringMember);//string
console.log(typeof objectStringMember);//object

/* However when we use . operator to string primitive type, JS will wrap up the string with object. That's why we can use the methods String object type for the primitive type string.
*/

//Slice method
const t0 = performance.now();
slicedString = primitiveStringMember.slice(-2);//te
const t1 = performance.now();
console.log(`Call to do slice took ${t1 - t0} milliseconds.`);

//index vise adder method
const t2 = performance.now();
length = primitiveStringMember.length
neededString = primitiveStringMember[length-2]+primitiveStringMember[length-1];//te
const t3 = performance.now();
console.log(`Call to do index adder took ${t3 - t2} milliseconds.`);
```

# java - Java LinkedHashSet 向后迭代

> ID：10741902
> 
> 赞同：26
> 
> 时间：2012-05-24T16:51:08.583
> 
> 标签：java, set, iteration, linkedhashset

如何`LinkedHashSet`从最后一项到第一项迭代 a 的项？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-24T16:58:21.820

如果您想继续使用集合，您可以使用以下内容：

```
LinkedHashSet<T> set = ...

LinkedList<T> list = new LinkedList<>(set);
Iterator<T> itr = list.descendingIterator();
while(itr.hasNext()) {
    T item = itr.next();
    // do something
} 
```

如果您可以改用数组，则可以查看[hvgotcodes 的答案](https://stackoverflow.com/a/10741952/758280)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T16:53:52.393

呃，假设你的意思是 LinkedHashSet ...

我会使用[toArray](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28T%5B%5D%29)并且只使用反向 for 循环。

可能有更好的方法来做到这一点，但这应该有效。 `toArray`保证保留任何订单

> 如果此集合对其迭代器返回其元素的顺序做出任何保证，则此方法必须以相同的顺序返回元素。

就像是

```
Set<MyType> mySet = new LinkedHashSet();
...
MyType[] asArray = mySet.toArray();

for (int i = asArray.length - 1; i>=0; i--){
..
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-24T17:01:58.613

这是另一种方式：

```
LinkedHashSet<T> set = ...

List<T> list = new ArrayList<>(set);
Collections.reverse(list);

for( T item : list ){
   ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T17:07:19.897

如果您真的指的是 LinkedHashSet，您可以将元素放入 ArrayList，然后使用 ArrayList 的 ListIterator。

```
ListIterator<T> l = new ArrayList<T>(yourLinkedHashList).listIterator();
// ListIterator can iterate in reverse
while(l.hasPrevious()) {
    T obj = l.previous();
} 
```

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2012-05-24T16:57:25.317

来自 javadoc：“这个链表定义了迭代顺序，即元素插入集合的顺序（插入顺序）。”

所以你可以简单地：

```
LinkedHashSet<Integer> numbers = new LinkedHashSet<Integer>();
numbers.add(1);
numbers.add(2);
numbers.add(33);
numbers.add(44);
numbers.add(108);

for (Integer i : numbers) {
    System.out.println(i);
} 
```

# asp.net - 在会话中保留数据，直到用户离开页面

> ID：10741904
> 
> 赞同：1
> 
> 时间：2012-05-24T16:51:13.447
> 
> 标签：asp.net, asp.net-mvc-3

我有一个关于在处理一页时使用会话或 TempData 来存储数据的问题。我使用多个 Ajax 请求存储和检索数据，并在我的控制器 Action 上保存到会话。我想做的是，当用户离开我的页面时，我想清除会话变量。我将如何使用会话来做到这一点？或者也许有某种其他方法可以仅为一个 http 请求存储数据（我不确定这一点，因为正如我所说，我在页面中有多个 POST 和 GET 请求。）

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:56:14.797

你没有`Hiddenfields`在你的 html 中使用来保存这些数据......

与 Asp.Net 相同，使用隐藏字段来存储视图状态数据.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:20:28.403

使用 Html.HiddenFor(myModel => myModel.SomeField) 来做到这一点。您可以为其分配值，然后它会自动将值回传到您的模型中，这非常方便花花公子。

我希望这是有帮助的！

如果您真的想使用 TempData（我有时会这样做），我有一个看起来像这样的 KeepTempDataAlive(string tempKey) 方法......

```
if(TempData[tempKey] != null)
{
     TempData.Keep(tempKey);
} 
```

这应该让它再发 1 个回帖。只要你需要，就这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:04:07.967

取决于你的意图。

如果您想对 Ajax 请求进行异步处理，您可以将数据存储在隐藏字段或 .success 事件上的 jQuery .data() 中。然后当一切都完成后，使用 jQuery 来填充你需要做的事情。

如果您想要一个真正的会话变量（跨多个页面），那么最好的方法是在 window.close 上使用 AJAX 进程来清除会话。尽管这仅限于启用了 javascript 的用户。我认为没有万无一失的方法可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T22:41:38.207

我利用 jQuery 和在页面卸载时运行的 ajax 请求解决了这个问题。

在您的 javascript 中：

```
$(window).unload(function () {
  $.ajax({
    url: applicationPath + "/api/ExampleApiController/ExampleWebMethod",
    async: false,
    type: 'GET',
    data: {
      "someVariable": anythingYouWantToPassIfAny,
      "otherVariable": anythingElseYouWantToPass,
    }
  });
}); 
```

注意：您需要设置 async: false 否则页面将在有机会运行 ajax 请求之前卸载。对于类型，您可以使用 GET 或 POST，无论您的偏好是什么，以及您想要对请求做什么。

然后在您的 api 控制器中：

```
public class ExampleApiController
{
  [HttpGet]
  public void ExampleWebMethod(string someVariable, string otherVariable)
  {
     HttpContext.Current.Session.Remove("sessionVariableA");
     HttpContext.Current.Session.Remove("sessionVariableB");
     ...
  }
} 
```

如果您想查看它是否成功，您还可以添加代码来检查返回，但在我的情况下，我只是想要一个快速运行的东西并且并不真的希望它返回任何东西而且它不是一个大如果失败就处理，所以我只是发送请求并卸载。我知道这个问题很老，但希望它可以帮助别人。

注意：这个解决方案的问题是，如果用户刷新页面，它仍然会调用 unload 事件并删除所有会话变量。

# php - 从mysql插入语句中删除空格的正则表达式

> ID：10741905
> 
> 赞同：0
> 
> 时间：2012-05-24T16:51:15.250
> 
> 标签：php, mysql, regex, csv

我正在使用 fgetcsv() 从 CSV 文件中导入数据，它为每一行生成一个数组。然后我 implode() 这个数组并使用 mysql_real_escape_string() 创建一个字符串以用于 mysql 查询。它最终看起来像这样：

`\"2342352353\",\" \",\"\"`

我正在阅读的一些 CSV 文件有多达 200 多列（荒谬，但确实如此），因此插入语句变得非常长。为了让它们不那么冗长，我想去掉插入语句中的任何空格或空格。所以，上面的语句应该变成：

`\"2342352353\",,`

所以我正在寻找两种方法来解决这个问题。首先，我可以遍历数组，并使用 trim() 查找任何带有空格的条目并将它们设为空白。然后我可以像这样对结果字符串执行 str_replace() ：

```
for ($x=0; $x<sizeof($data); $x++) {
    $data[$x] = trim($data[$x]) == ''  ?  ''  :  $data[$x];
}
$insert_string = '\\"' . mysql_real_escape_string(implode('","', $data)) . '\\"';
str_replace('\"\"', '', $insert_string); 
```

第二种方法是跳过遍历数组并仅使用正则表达式删除任何出现的`\" \"`，但在分隔引号的中间可能有任意数量的空格。

我的问题是第一个也是最重要的，我如何使用正则表达式来做到这一点？其次，哪种方式会更快？

一旦我得到正则表达式的答案，我会做一些基准测试并更新结果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:55:17.090

这个正则表达式呢？

`\\"\s*\\"`

在上面的代码中使用：

`preg_replace('/\\\"\s*\\\"/', '', $insert_string);`

`\s*`匹配任意数量的空白字符。

如果正则表达式比遍历你的 CSV 文件慢，我会吃掉我的帽子......

# knockout.js - 淘汰赛性能 - 如果您的对象不可观察，您可以绑定属性吗？

> ID：10741913
> 
> 赞同：0
> 
> 时间：2012-05-24T16:51:35.277
> 
> 标签：knockout.js, knockout-mapping-plugin

我们有一个通过模板映射的大型嵌套可观察数组来创建树视图。该列表是动态的，但树中可能有 1000 多个元素。

我们在加载和搜索此集合时遇到性能问题 - 在 IE8 和 iPad 中最为明显。铬似乎还可以。

集合中的元素实际上并没有改变，所以我认为我们不需要 observable 的“通知”方面，但我们想利用数据绑定。

有没有办法对视图模型中不可观察的对象进行数据绑定？有没有办法在不使用 ko.mapping.fromJS() 的情况下创建不可观察的复杂数据集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:38:53.833

您可以完全绑定不会更改且不可观察的属性。似乎您只想以与映射插件相同的方式将一个大对象映射到另一个对象，但不创建可观察对象。您是否考虑过简单地使用[JQuery.extend](http://api.jquery.com/jQuery.extend/)？

如果您的数组是可观察的，那么请确保您遵循[这篇出色文章](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)中的指南。

我还听说有人通过从原生模板切换到第三方（如 jquery.tmpl）来获得更好的性能（不确定这是否适用于您）。

**编辑**

在评论中进一步澄清后。问题是您的绑定假设属性是可观察的。在您的模板中，您有以下行。

```
 <!-- ko if: IsSectionHeader() --> 
```

这是执行 observable`IsSectionHeader`以获得它的价值。当 IsSectionHeader 是 observable 时这很好，因为 observable**是**函数。当您切换到原始模型时，这将不起作用。我建议使用诸如firebug之类的工具并检查错误控制台，它准确地报告了错误。

无论如何，解决方法是删除双括号。请注意，即使属性是可观察的，ko 绑定也可以使用带或不带括号的可观察对象，因此无论如何都不需要它们。

希望这可以帮助。

# java - 从 Internet 获取图像并设置为 ImageView

> ID：10741919
> 
> 赞同：0
> 
> 时间：2012-05-24T16:51:50.540
> 
> 标签：java, android, url, imageview

我有一个名为 tab1 的 ImageView。我的代码看起来像这样。

```
import java.io.InputStream;
import java.net.URL;

import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.TabHost;
import android.widget.Toast;

public class Paikallissaa extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabs = (TabHost) findViewById(R.id.tabhost);
    tabs.setup();   
    TabHost.TabSpec spec = tabs.newTabSpec("tag1");

    try {
        ImageView iv = (ImageView) findViewById(R.id.tab1);

        URL url = new URL("http://cdn.fmi.fi/weather-observations/products/finland/finland-weather-observations-map.png");
        InputStream content = (InputStream) url.getContent();
        Drawable d = Drawable.createFromStream(content, "src");

        iv.setImageDrawable(d);
    } catch (Exception e) {
        Toast.makeText(this, "Error getting image: " + e, Toast.LENGTH_SHORT);
    }

    spec.setContent(R.id.tab1);
    spec.setIndicator("Koko maa");
    tabs.addTab(spec);

    spec = tabs.newTabSpec("tag2");
    spec.setContent(R.id.tab2);
    spec.setIndicator("Raisio");
    tabs.addTab(spec);
}
} 
```

（灰，我对代码块的东西很烂......）

它不会更新图像。怎么了？它不断显示我之前在 main.xml 中设置的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:34:37.503

为此，我一直在使用我在互联网上的某个地方找到并稍作修改的帮助程序类。它负责缓存图像并将图像加载到后台线程上。

由于您的图像在服务器上发生更改，您可能希望删除此代码的缓存部分。

用法：

```
ImageLoader loader = new ImageLoader(this);
loader.DisplayImage(String.format(headshotUrl, data.Id), this, headshot); 
```

这里是：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.util.HashMap;
import java.util.Stack;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.widget.ImageView;

public class ImageLoader
{
    public static String TAG = "xxx";
    // the simplest in-memory cache implementation. This should be replaced with
    // something like SoftReference or BitmapOptions.inPurgeable(since 1.6)
    private HashMap<String, Bitmap> cache = new HashMap<String, Bitmap>();

    private File cacheDir;

    public ImageLoader(Context context)
    {
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);
        cacheDir = Utilities.GetCacheDir(context);
    }

    final int stub_id = R.drawable.face_placeholder;

    public void DisplayImage(String url, Activity activity, ImageView imageView)
    {
        imageView.setTag(url);
        Log.i(TAG, url);
        if (cache.containsKey(url))
            imageView.setImageBitmap(cache.get(url));
        else
        {
            queuePhoto(url, activity, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, Activity activity, ImageView imageView)
    {
        // This ImageView may be used for other images before. So there may be
        // some old tasks in the queue. We need to discard them.
        photosQueue.Clean(imageView);
        PhotoToLoad p = new PhotoToLoad(url, imageView);
        synchronized (photosQueue.photosToLoad)
        {
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        // start thread if it's not started yet
        if (photoLoaderThread.getState() == Thread.State.NEW)
            photoLoaderThread.start();
    }

    private Bitmap getBitmap(String url)
    {
        // I identify images by hashcode. Not a perfect solution, good for the
        // demo.
        String filename = String.valueOf(url.hashCode());
        File f = new File(cacheDir, filename);

        // from SD cache
        Bitmap b = decodeFile(f);
        if (b != null)
            return b;

        // from web
        try
        {
            Bitmap bitmap = null;
            InputStream is = new URL(url).openStream();
            OutputStream os = new FileOutputStream(f);
            Utilities.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex)
        {
            ex.printStackTrace();
            return null;
        }
    }

    // decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f)
    {
        try
        {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true)
            {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        return null;
    }

    // Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;

        public PhotoToLoad(String u, ImageView i)
        {
            url = u;
            imageView = i;
        }
    }

    PhotosQueue photosQueue = new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    // stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad = new Stack<PhotoToLoad>();

        // removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for (int j = 0; j < photosToLoad.size();)
            {
                if (photosToLoad.get(j).imageView == image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        };
    }

    class PhotosLoader extends Thread
    {
        public void run()
        {
            try
            {
                while (true)
                {
                    // thread waits until there are any images to load in the
                    // queue
                    if (photosQueue.photosToLoad.size() == 0)
                        synchronized (photosQueue.photosToLoad)
                        {
                            photosQueue.photosToLoad.wait();
                        }
                    if (photosQueue.photosToLoad.size() != 0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized (photosQueue.photosToLoad)
                        {
                            photoToLoad = photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp = getBitmap(photoToLoad.url);
                        cache.put(photoToLoad.url, bmp);
                        Object tag = photoToLoad.imageView.getTag();
                        if (tag != null && ((String) tag).equals(photoToLoad.url))
                        {
                            BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad.imageView);
                            Activity a = (Activity) photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if (Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e)
            {
                e.printStackTrace();
            }
        }
    }

    PhotosLoader photoLoaderThread = new PhotosLoader();

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;

        public BitmapDisplayer(Bitmap b, ImageView i)
        {
            bitmap = b;
            imageView = i;
        }

        public void run()
        {
            Log.i(TAG, "BitmapDisplayer run()");
            if (bitmap != null)
                imageView.setImageBitmap(bitmap);
            else
                imageView.setImageResource(stub_id);
        }
    }

    public void clearCache()
    {
        // clear memory cache
        cache.clear();

        // clear SD cache
        File[] files = cacheDir.listFiles();
        for (File f : files)
            f.delete();
    }

} 
```

在一个实用程序类中，我有我的 GetCacheDir(...)

```
public static File GetCacheDir(Context context)
{
    File cacheDir;
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir = new File(android.os.Environment.getExternalStorageDirectory(), "com.example.app");
    else
        cacheDir = context.getCacheDir();
    if (!cacheDir.exists())
        cacheDir.mkdirs();

    return cacheDir;
} 
```

复制流功能：

```
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size = 1024;
    try
    {
        byte[] bytes = new byte[buffer_size];
        for (;;)
        {
            int count = is.read(bytes, 0, buffer_size);
            if (count == -1)
                break;
            os.write(bytes, 0, count);
        }
    } catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:23:20.243

要从互联网上获取图像，请尝试以下操作，

```
HttpGet httpRequest = new HttpGet(URI.create("http://cdn.fmi.fi/weather-observations/products/finland/finland-weather-observations-map.png") );
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
bmp = BitmapFactory.decodeStream(bufHttpEntity.getContent());
ImageView iv = (ImageView) findViewById(R.id.tab1);
iv.setImageBitmat(bmp);
httpRequest.abort(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:28:17.820

这将下载一张图像并将其设置为图像视图，取自我帮助编写的应用程序。我删除了一些我正在使用的无用代码，但方法保持不变。

```
public void setImage(){
    imageView.setImageURI(DownloadImage);
}

public String DownloadImage(){
    string filepath = DownloadFromUrl("url","filename.png");

}

public String DownloadFromUrl(String imageURL, String fileName) {

    File file = new File(PATH + fileName);
    try {
        URL url = new URL(imageURL);

        long startTime = System.currentTimeMillis();
        Log.d("ImageManager", "download begining");
        Log.d("ImageManager", "download url:" + url);
        Log.d("ImageManager", "downloaded file name:" + fileName);
        /* Open a connection to that URL. */
        URLConnection ucon = url.openConnection();

        /*
         * Define InputStreams to read from the URLConnection.
         */
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */
        ByteArrayBuffer baf = new ByteArrayBuffer(50);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(baf.toByteArray());
        fos.close();
        Log.d("ImageManager",
                "download ready in"
                        + ((System.currentTimeMillis() - startTime) / 1000)
                        + " sec");

    } catch (IOException e) {
        Log.d("ImageManager", "Error: " + e);
    }
    return file.toString(); 
```

}

# objective-c - iOS 5 中的 UITabBar 高度

> ID：10741921
> 
> 赞同：2
> 
> 时间：2012-05-24T16:51:55.847
> 
> 标签：objective-c, ios, cocoa-touch

使用 iOS 5 中新的自定义 API，是否可以增加 UITabBar 的高度？如果不是，如果我想针对 iOS 5，有哪些开源选项？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T18:28:39.363

我自定义UITabBarController的tabbar的方式是先自定义UITabBarController本身。

UITabBarcontroller 里面有两个子视图。一个 UITransitionView 和一个 UITabBar。UITransitionView 是屏幕上半部分放置视图控制器的区域。

为了自定义UITabbar的高度，还需要编辑UITransitionView的frame。所以，例如，如果你想改变高度，你可以这样做；

```
[[tabbarController.view.subviews objectAtIndex:0] setFrame:CGRectMake(0, 0, 320, 440)];
[tabbarController.tabBar setFrame:CGRectMake(0, 440, 320, 50)]; 
```

这将创建一个 50 px 高度的标签栏，（默认为 48 px）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T09:29:31.673

你可以写一个UItabbar的类别

这是代码：

.h 文件：

```
#import <UIKit/UIKit.h>

@interface UITabBar (NewSize)
- (CGSize)sizeThatFits:(CGSize)size;
@end 
```

.m 文件：

```
#import "UITabBar+NewSize.h"

@implementation UITabBar (NewSize)
- (CGSize)sizeThatFits:(CGSize)size {
    CGSize newSize = CGSizeMake(size.width,44);
    return newSize;
}
@end 
```

进而

```
#import "UITabBar+NewSize.h"

self.tabBarController = [[UITabBarController alloc] init];
[self.tabBarController.tabBar sizeThatFits:CGSizeMake(320, 44)];
self.tabBarController.tabBar.shadowImage = [[UIImage alloc]init];  //delete the default tabbar shadow！ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:49:10.393

你不能用`UITabBar`. 我建议您创建自己的`UIToolBar`并使其看起来像一个 tabBar，您可以添加`UIButtons`到它并使它们看起来像`tabBarItems`.

它看起来像一个`tabBar`，并为您提供了很大的自定义空间，您还可以向其添加超过 5 个选项卡并在按钮之间实现“滚动”动画。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:59:05.297

UIAppearance 代理不可能

我建议这样做的方法是在 UIViewController 中使用容器 ViewController 方法（它位于实现容器视图控制器的标题下）。Apple 的文档基本上告诉你如何自己动手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T17:39:22.753

我会建议[BCTabBarController](https://github.com/briancollins/BCTabBarController)。我在我的一个项目中使用了它，效果很好。不过，您仍然需要对其进行自定义。

# python - 潜入 python 和-或失败

> ID：10741922
> 
> 赞同：5
> 
> 时间：2012-05-24T16:52:00.697
> 
> 标签：python

我被困在这个特殊的例子中，从潜入 python

**例 4.18。当与或技巧失败时**

```
>>>>a = ""
>>>>b = "second"
>>>1 and a or b
>>>>'second' 
```

**由于 a 是一个空字符串，Python 在布尔上下文中认为它为 false，因此 1 和 '' 评估为 ''，然后 '' 或 'second' 评估为 'second'。哎呀！那不是你想要的。与 - 或技巧，bool 和 a 或 b，不会像 C 表达式 bool 那样工作？a : b 当 a 在布尔上下文中为假时。**

为什么它说这不是用户想要的，我的意思是 1 和 "" 将评估为 False，而 "" 或 b 将评估为 "second"，这完全是应该发生的，我不明白为什么会这样错了吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:55:17.803

不，你没有错过什么。

内联条件在[PEP 308](http://www.python.org/dev/peps/pep-0308/)`expr if cond else expr`中被引入 Python 2.5 ；在此之前，条件必须是完整的形式

```
if cond:
    expr
else:
    expr 
```

然而，人们注意到，`expr and cond or expr`只要第一个表达式碰巧评估为布尔值 true，这种方式就可以作为内联条件。由于 Python 中的大多数事情都是正确的，因此这种语法通常会起作用——当然，有时也会失败。这实际上是添加“正确”内联条件的动机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:55:32.133

“and-or 技巧”用于模拟三元条件运算符`condition ? if-true : if-false`或类似运算符。由于在布尔上下文`1`中等价`True`于，因此表达式应为 yield `a`，而不是`b`。所以，教训是，不要使用 and-or 技巧。Python 从 2.5 开始就有三元条件：

```
true if condition else false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T16:57:58.700

Dive into python 不是一个好的教程，[不应该遵循](http://oppugn.us/posts/1272050135.html)

* * *

该`x and y or z`表达式在 python 具有适当的三元表达式 ( `y if x else z`) 之前使用。本节说明如果您期望它表现得像 C 那样，为什么它会让您感到惊讶`x ? y : z`。

* * *

[python wiki](http://wiki.python.org/moin/BeginnersGuide)上有一个教程列表。这可能会给你一个更新的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T17:57:50.933

> 为什么它说这不是用户想要的，我的意思是 1 和 "" 将评估为 False，而 "" 或 b 将评估为 "second"，这完全是应该发生的，我不明白为什么会这样错了吗？我错过了什么吗？

我觉得这部分问题被忽略了。`condition and if-true or if-false`如其他答案中所述，是在 >2.5 版本中使用的技巧，以模仿其他语言`condition ? if-true : if-false`或更高版本`if-true if condition else if-false`。

它的问题是，如果`if-true`是一个评估为假的对象（、、、`""`或）`[]`，那么这将失败`()`，正如您查看评估时所预期的那样，但如果动态设置并且可以评估，则可能会作为错误潜入为假。`False``0``if-true`

的天真预期结果`condition and a or b`将是`a`( `""`, 空字符串) 的内容，因为条件 ( `1`) 计算结果为`true`，但`1 and a`计算结果为 ，`false`因此您得到 的内容`b`。

此问题的解决方案是使用 Python 2.5+ 语法 ( `if-true if condition else if-false`) 或确保它`if-true`永远不会为假。完成第二种方法的一种方法是将`if-true`和打包`if-false`在一个元组或列表中，因为非空可迭代始终为真：

```
>>> a = ""
>>> b = "second"
>>> condition = 1
>>> condition and a or b
'second'

>>> condition and [a] or [b]
['']

>>> (condition and [a] or [b])[0]
'' 
```

这是一种丑陋的解决方案，但如果您需要针对旧版本的 Python，它就在那里。

# search - 使用 google 获取 computer science.edu 网站列表

> ID：10741923
> 
> 赞同：-1
> 
> 时间：2012-05-24T16:52:18.293
> 
> 标签：search, web, web-crawler, design-patterns

嘿，我想知道是否有一个特定的查询可以输入谷歌，这会导致谷歌给我一个列表，列出所有大学的计算机科学主页，地址为“.edu”。

我需要这个，因为我必须爬取这些网站来积累课程的讲义。

因此，任何帮助将不胜感激。

或者，如果有人知道任何索引，其中包含所有此类大学计算机科学网站的 url 列表，也可以这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:56:26.850

你可以试试：

```
site:.edu computer science 
```

示例：[https ://www.google.com/search?q=site:.edu%20computer%20science](https://www.google.com/search?q=site:.edu%20computer%20science)

# php - 在流式传输文件或来自 iram 的 HTTP 标头之前返回 JSON？

> ID：10741925
> 
> 赞同：0
> 
> 时间：2012-05-24T16:52:36.623
> 
> 标签：php, javascript, html, http

我有一个表单，它使用隐藏的 iframe 将文件提交到更改文件的脚本，然后返回更改后的文件。我发现我实际上不必将文件保存在任何地方，如果我只是按照以下方式执行操作`echo file_get_contents(tmp);`，其中 tmp 是上传到 apache tmp 目录的文件的路径。

该脚本还可以：`header("Content-type: application/octet-stream")`这样当 iframe 加载时，会提示用户下载。我想知道，在客户端，服务器是否一切正常。它不是 XMLHttpRequest，所以我无法检查标头，返回的唯一内容是文件本身。

在流式传输文件之前有什么方法可以返回一些 json 吗？或者，有没有办法检查 iframe 的标题？

目前，我一直在用服务器设置一个cookie，并每隔半秒用javascript检查一次，看看是否设置了cookie。不过，我更喜欢一个不那么老套的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:09:16.540

如果在文件之前流式传输 JSON，MIME 标头将无效，浏览器将无法下载文件。

在检查“如果服务器一切正常”方面，您为什么不在**服务器**上确定这一点，而不是往返于客户端并再次返回？让它在客户端错误设计的气味上出错。

# php - 检查用户是否有新邮件的最有效方法？

> ID：10741927
> 
> 赞同：2
> 
> 时间：2012-05-24T16:52:47.367
> 
> 标签：php, mysql, database, messaging

我在我的一个 PHP/MySQL 站点上有一个简单而通用的内部消息传递服务，具有唯一的`messageID`, `from`, `to`, `subject`, `message`, `time`, 和`isRead`.

一般来说，检查用户是否有新邮件的最佳方法是什么？

我是否应该在主用户表上存储一个简单的二进制触发器，当有人向他们发送消息时切换为 1，然后让用户在每次页面加载时检查该 1，如果有，提醒他们注意新邮件（并在他们进入收件箱时将其设置为 0）？但是，如果它是垃圾邮件并且我们在用户阅读之前将其删除怎么办？

或者我应该存储`messageid`用户阅读的最后一条消息，然后检查最新消息，看看它是否比他阅读的最后一条消息更新，如果是，提醒他？但是，我应该如何以及在哪里存储这些信息？

考虑到我们必须在每次页面加载时检查新消息，是否还有另一种更有效的方法？

如果用户转到他的收件箱，它不应再向他显示他检查时收件箱中的任何邮件都有“新邮件”，无论他是否实际点击阅读它们。

谢谢！

编辑：我的一些用户通过没有 cookie 甚至 Javascript 的非常基本的手机访问我的网站，所以请记住这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:05:03.163

最好的方法是从服务器推送通知，就像 stackoverflow 一样，使用 html 套接字。

[jQuery插件](http://code.google.com/p/jquery-graceful-websocket/)

但请记住，并非所有浏览器都支持，因此需要回退到 ajax 轮询。

关于垃圾邮件，如果可能的话，我建议仅在垃圾邮件检查完成后通知用户。

您使用设置位存储在用户旁边的解决方案听起来不错，（您也可以存储新消息的数量，而不是位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:09:45.813

在您的用户表中，存储新消息的计数，并在需要时进行更新。

AJAX 轮询在服务器端`select count(*) from ...` 可能很昂贵（当您的数据库变大时可能会很昂贵，并且您需要这样做，例如每分钟一次检查）。

如果用户只是浏览您的网站，并且没有新消息，您可以跳过`select`有关消息的更多信息。

# php - 将 CVS 中的 mysql 表导出到 ZIP 文件中

> ID：10741932
> 
> 赞同：1
> 
> 时间：2012-05-24T16:52:58.390
> 
> 标签：php, mysql, zip, export-to-csv

我在 PHP 中编写了一个脚本，以便在单击按钮时将 MySQL 表导出到 CVS 文件中。它工作正常，但现在我需要为每个 CSV 文件导出 1 个表，单击按钮时所有这些都在 ZIP（或 RAR）文件中。

基本上应该是： 导出表：

> mytable.csv

导出所有表：

> export.ZIP 包含：
> 
> --mytable1.csv
> 
> --mytable2.csv
> 
> --mytable3.csv

我可以为每个表循环导出函数，但这不会将所有内容放入 ZIP：

```
/* EXPORT ALL TABLES */
if (isset($_POST['export_all_tables'])){
    $Qlist_table = $pdo->prepare('SHOW TABLES');
    $Qlist_table->execute(array(''));
    foreach ($Qlist_table as $Alist_table)
      export_table($Alist_table[0]);
}

 function export_table($table_to_export){
$Qselect = $pdo->prepare('SELECT * FROM '.$table_to_export.''); 
    $Qselect->execute(array(''));
    $results = $Qselect->fetchAll(PDO::FETCH_ASSOC);
...
...
...

    header("Content-disposition: attachment; filename=".$fileName);
    header("Content-Type: application/force-download");
    header("Content-Transfer-Encoding: application/vnd.ms-excel\n");
    header("Pragma: no-cache");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0, public");
    header("Expires: 0");

    echo $outputCsv;
    exit();
} 
```

我认为您不需要导出功能的所有代码，如果是，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:38:00.723

实际上，由于 addFile()，我找到了解决方案。这是代码：

```
if (isset($_POST['export_all_tables'])){
    // Name of the file to export
    $date = date('Y_m_j_H\hi');
    $fileName = 'Export_all_'.$date.'.zip';

    // Headers to create the ZIP file
    header("Content-disposition: attachment; filename=".$fileName);
    header("Content-Type: application/force-download");
    header("Content-Transfer-Encoding: application/zip;\n");
    header("Pragma: no-cache");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0, public");
    header("Expires: 0");

    // We create the ZIP file       
    $zip = new ZipArchive;
    $result_zip = $zip->open($fileName, ZipArchive::CREATE);    // We open the file
    if ($result_zip === TRUE) {

        $Qlist_table = $pdo->prepare('SHOW TABLES');
        $Qlist_table->execute(array(''));

        // For each table
        foreach ($Qlist_table as $Alist_table) {

                $content = export_table($Alist_table[0]);
                $fileName = $Alist_table[0].'_'.$date.'.csv';   
                $zip->addFile($fileName, $fileName);            // We add the CSV file from the server
        }
        $zip->close();
    }
    else {
        echo 'Failed, code:' . $result_zip;
    }   
    readfile("Export_all.zip");             // To download the ZIP file
    exit(); 
} 
```

并且 exporttable 函数以在服务器上写入文件的方式结束：

```
$fh = fopen($fileName, 'w') or die("Can't open file");
$stringData = $outputCsv;   // outputCsv is the content of the table
fwrite($fh, $stringData);
fclose($fh); 
```

# javascript - 响应式网格布局框架

> ID：10741934
> 
> 赞同：15
> 
> 时间：2012-05-24T16:53:05.740
> 
> 标签：javascript, css, responsive-design, grid-layout

我想要一个易于使用的网格框架用于我当前的 Web 项目。这些是我会欣赏的功能：

*   **流体网格布局**：可以水平对齐（并排）的框，每个具有相同的高度（例如 3 列布局），宽度为 100%
*   **响应**性：调整浏览器窗口大小时自动适应
*   **移动设备**：显示垫和手机的替代配件布局
*   **文字大小**：可选择动态调整文字大小（例如全角标题）
*   **图像大小**：可选择动态调整图像大小（例如全宽图像库）
*   **断点**：可选地定义触发改变布局的事件的宽度值（例如，如果宽度低于阈值则删除按钮）

## 更新

我发现了很多网格，但将其缩小到以下三个可能非常适合我的要求的有前途的框架：

*   [**`Foundation`**](http://foundation.zurb.com/)
*   [**`Semantic Grid`**](http://semantic.gs/)
*   [**`Golden Grid System`**](http://goldengridsystem.com/)

以下是所有其他内容：

*   ~~[CSS 网格](http://cssgrid.net/)~~（非流体）
*   ~~[320 及以上](http://stuffandnonsense.co.uk/projects/320andup/)~~（非流体）
*   ~~[柱状](http://www.columnal.com/)~~（非流体）
*   ~~[骨架](http://www.getskeleton.com/)~~（非流体）
*   ~~[SimpleGrid](http://simplegrid.info/)~~（非流体）
*   ~~[更少的框架](http://lessframework.com/)~~（不流畅）
*   ~~[Bootstrap](http://twitter.github.com/bootstrap/)~~（非语义类）
*   ~~[Breakpoints.js](http://xoxco.com/projects/code/breakpoints/)~~（只有断点，和媒体查询太相似了）
*   ~~[自适应图像](http://adaptive-images.com/)~~（仅图像）
*   ~~[FitText](http://fittextjs.com/)~~（仅文本）
*   ~~[网格集](http://www.gridsetapp.com/)~~（商业）
*   ~~[HTML5 样板](http://html5boilerplate.com/)~~（旧）

通常，我会在问这里之前自己测试它们，以便我可以提出更具体的问题。但是由于大量的框架，我想听听一些从哪里开始的指示。

1.  **您对这些或其他类似框架的体验如何？**
2.  **你推荐一个符合我要求的特定框架吗？**

## 解决方案

我最终使用了[**`Foundation`**](http://foundation.zurb.com/)which 显然是这场比赛的赢家——以我的拙见。

## 更新 2

[Bootstrap 3](http://getbootstrap.com/)现在是一场真正的竞争，因为它也支持语义网格类。它支持 SASS 和 LESS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:59:44.967

我之前使用过 columnal，它确实提供了除了断点功能之外您想要的大部分功能。它易于使用且具有自适应性。在移动屏幕中，网格降级为堆栈，因此所有列内容都显示在另一个之下。但是对于智能适应功能，正如您在断点功能中所概述的那样：我强烈建议您直接使用 CSS 3 媒体查询，因为这正是它们的用途，而且它们并不难使用。在表格下提供这些功能的 CSS 框架仅使用媒体查询。

看一下[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)，Bootstrap 的流体网格确实提供了一些方便的快捷方式，用于为特定屏幕尺寸设置 css 属性，而这些属性在列中不存在。

# ruby-on-rails - capistrano - NameError：未初始化的常量 Net::SSH::KnownHosts::SUPPORTED_TYPE

> ID：10741936
> 
> 赞同：9
> 
> 时间：2012-05-24T16:53:13.443
> 
> 标签：ruby-on-rails, ruby, capistrano, rvm-capistrano

我正在尝试将我的 Rails (3.1.3) 应用程序部署到 preprod 环境。我使用 capistrano (2.12.0) 和 rvm-capistrano (1.2.2)。

当我打电话`bundle exec cap ssh`时，它工作正常。但是当我打电话时，`bundle exec cap deploy`我得到以下跟踪：

```
$ cap deploy
    triggering start callbacks for `deploy'
  * 18:42:19 == Currently executing `multistage:ensure'
*** Defaulting to `preprod'
  * 18:42:19 == Currently executing `preprod'
  * 18:42:19 == Currently executing `deploy'
  * 18:42:19 == Currently executing `deploy:update'
 ** transaction: start
  * 18:42:19 == Currently executing `deploy:update_code'
  * 18:42:19 == Currently executing `deploy:set_previous_revision'
  * executing "cd /rails_apps/com.example.preprod/current; git rev-parse --short HEAD"
    servers: ["preprod.example.com"]
connection failed for: preprod.example.com (NameError: uninitialized constant Net::SSH::KnownHosts::SUPPORTED_TYPE) 
```

当然`example.com`是占位符，它不是来自 capistrano 配置中的错误。

知道什么可能导致这种情况吗？

我将 RVM 与 Ruby 1.9.3-p194 一起使用。

谢谢 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T17:13:58.200

从 net-ssh 2.5.1 恢复到 2.4.0 似乎暂时解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T06:37:31.377

我安装了 rvm-capistrano gem 来解决这个问题：

`gem install rvm-capistrano`

# android - 处理图像（扑克牌）

> ID：10741937
> 
> 赞同：0
> 
> 时间：2012-05-24T16:53:17.017
> 
> 标签：android

对于我的纸牌游戏来说，处理图像的最佳方式是什么？为我拥有的每个图像定义一个资源似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:57:27.443

根据我的经验，为每张卡定义一个资源是要走的路。并非所有设备都具有切片单个大位图所需的内存。一旦你拥有了各个资源中的所有卡片，你就可以使用静态初始化器将引用放入一个方便的数据结构中。[你也可以给他们一个特定的命名方案，使生成更容易，并通过使用getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)生成不同风格的多副牌

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:58:12.130

请记住，ID 可以迭代，它们是有序的。

```
int a = R.drawable.image1;
a++;
if(a == R.id.image2)
{
//this will always be true.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:56:08.730

你可以看看这些：

[纸牌游戏，连同源代码。](http://code.google.com/p/bestcardgameever-android/)

[程序员讨论了他采用的方法（在一定程度上）。](http://developreality.blogspot.in/2009/05/overcoming-absolutelayout-deprecation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:11:16.083

Unicode 有黑桃、菱形、心形、梅花等字符。也许您可能只有一个空白卡资源，然后将这些字符和数字放在空白卡图像上

# knockout.js - 淘汰嵌套的 observableArray 不绑定

> ID：10741962
> 
> 赞同：2
> 
> 时间：2012-05-24T16:54:22.110
> 
> 标签：knockout.js

我已经查看了一些关于类似问题的相关搜索，但无论我尝试与工作结果匹配多近，我似乎都无法弄清楚以下代码有什么问题。

```
<div data-bind="foreach: collections" >
    <div data-bind="text:name,click: $data.AddToCollectionB">
        <div data-bind="foreach: collectionB" >
        <input type="text" data-bind="value: name">
        </div>                   
    </div>
</div>

var kt = kt || {};

kt.itemA= function(n) {
    var self = this;
    self.name = n.name;
    self.collectionB = ko.observableArray(n.colB);

    self.AddToCollectionB = function () {
    self.collectionB.push(kt.itemB({ name: 'test-nested sub item' }));
    alert(self.name);
    alert(self.collectionB().length);
    };
};

kt.itemB= function(n) {
    var self = this;
    self.name = ko.observable(n.name);
};

kt.vm= new (function() {
    var self = this;
    self.collections= ko.observableArray([new kt.itemA({name:'item 1', colB: [new kt.itemB({name:'sub-item'})]}),new kt.itemA({name:'item 2', colB: []})]);
});

ko.applyBindings(kt.vm); 
```

谁能指出我做错了什么？

jsFiddle 链接：http: [//jsfiddle.net/L7uxh/31/](http://jsfiddle.net/L7uxh/31/)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:46:36.173

当您使用`text: name`main`div`时，它会破坏其中的内容。

你需要做一些事情，比如把它`name`放在`span`里面：http `div`: [//jsfiddle.net/rniemeyer/L7uxh/44/](http://jsfiddle.net/rniemeyer/L7uxh/44/)

# c - linux内核中的tty_tiocmset屏蔽了所需的调制解调器信号

> ID：10741966
> 
> 赞同：0
> 
> 时间：2012-05-24T16:54:43.903
> 
> 标签：c, linux, embedded-linux, modem, tty

我在可以配置为 DTE/DCE 的硬件上运行嵌入式 linux 内核。在名为 tty_io.c 的文件中的 tty/串行驱动程序中有一个函数 tty_tiocmset()，它从 tty_ioctl 中获取一个位模式，用于设置/清除特定的调制解调器控制信号。有趣的是，tty_tiocmset() 函数会屏蔽除 TIOCM_DTR|TIOCM_RTS|TIOCM_OUT1|TIOCM_OUT2|TIOCM_LOOP 之外的所有其他调制解调器信号（此屏蔽显示在下面的代码中）。但是，如果您查看文档，似乎应该能够设置/清除所有调制解调器信号[http://www.kernel.org/doc/man-pages/online/pages/man4/tty_ioctl.4.html](http://www.kernel.org/doc/man-pages/online/pages/man4/tty_ioctl.4.html)向下到“调制解调器控制”。

有没有人知道为什么这个掩码在没有其他信号（如 RI、CD、CTS、DSR）的情况下存在？还有另一种方法可以使用未经修改的驱动程序来控制其他调制解调器信号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:54:58.067

Linux 最初托管在 x86 PC 平台上，该平台使用 8250 型 UART。调制解调器信号名称 OUT1 和 OUT2 不是 EIA/RS-232 名称，但确实出现在 Western Digital 8250 数据表中！列出的 5 位`tty_tiocmset()`匹配（按名称和功能）8250 调制解调器控制寄存器中可用的 5 位。任何额外的控制线都必须由 8250 外部的逻辑来实现。

> 有没有人知道为什么这个掩码在没有其他信号（如 RI、CD、CTS、DSR）的情况下存在？

您提到的这四个是DTE 端口的*输入*信号，PC 通常配置（或假设/默认）为 DTE。
输入信号不会出现在输出控制寄存器中。
当 Linux 嵌入到 DCE 端口的设备中时，也许这是一个错误？
这些输入信号确实出现在调制解调器状态寄存器中。

> 还有另一种方法可以使用未经修改的驱动程序来控制其他调制解调器信号吗？

您可以重新映射`OUT1`到`OUT2`您需要输出的任何其他 DTE 信号。
如果您需要为 DCE 设置端口，那么您可能必须重新映射所有四个控制线。
对于 DCE 端口（即调制解调器），通常只有 4 条输出控制线：DCD、CTS、DSR 和 RI。8250 MCR 中正好有 4 个输出控制位（环回除外）！

# java - 德语变音符号的mac java编码

> ID：10741971
> 
> 赞同：1
> 
> 时间：2012-05-24T16:54:50.690
> 
> 标签：java, macos, encoding, swt

我创建了一个包含一些德语特殊字符的测试 swt 应用程序。当我从 Eclipse 运行这个应用程序时，它工作正常，但是如果我创建应用程序的 jar 并从终端运行 jar，它会显示错误的特殊字符。

例如，我在关闭应用程序时显示了“ **Sie sind sicher, dass Sie, um die Aufnahme zu schließen?** ”消息，但是当我从终端运行应用程序时，它显示的字符如图所示。

![在此处输入图像描述](../Images/eff96f84ec057244021606a5c74714f6.png)

正如您在图像中看到的，有一些特殊字符无法正确显示。

我正在使用 Mac Lion。JDK详细信息是

java 版本“1.6.0_31”Java(TM) SE 运行时环境（构建 1.6.0_31-b04-415-11M3646）Java HotSpot(TM) 64 位服务器 VM（构建 20.6-b01-415，混合模式）

我正在使用以下命令从终端运行应用程序

java -cp :./final/* mypackege.MainClass -d32 -Dfile.encoding=UTF-8

我尝试从命令行指定 UTF 编码但没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:56:57.090

您还没有告诉我们您是如何获取字符串的，但如果它在源代码中，则可能只是在构建时指定编码的问题，例如

```
javac -encoding UTF-8 ... 
```

显然，根据您的源代码*实际*使用的任何编码来定制它。

# android - 如何在 AndEngine 中优化我的 BitmapTextureAtlas？

> ID：10741984
> 
> 赞同：3
> 
> 时间：2012-05-24T16:55:40.643
> 
> 标签：android, andengine

目前，我有 4 个不同的图像要加载到 4 个单独的 BitmapTextureAtlas 中。我想做的是在 1 个 BitMapTextureAtlas 中加载 4 个不同的图像以尝试优化速度。我已经将代码编辑为我认为应该可以使它工作的代码，但是当这个（动态壁纸）加载纹理时，屏幕只是白色的。这是我到目前为止所做的：

**onLoadResources()**

原始位图纹理图集：

```
this.StarsAtlas = new BitmapTextureAtlas(1024, 1024, TextureOptions.DEFAULT);   
this.SpaceAtlas = new BitmapTextureAtlas(1024, 1024, TextureOptions.DEFAULT);
this.CloudsAtlas = new BitmapTextureAtlas(1024, 1024, TextureOptions.DEFAULT);
this.SunetAtlas = new BitmapTextureAtlas(1024, 512, TextureOptions.DEFAULT); 
```

我浓缩为：

```
this.skyAtlas = new BitmapTextureAtlas(1024, 4096, TextureOptions.BILINEAR); 
```

原始纹理区域：

```
 this.LayerStars = BitmapTextureAtlasTextureRegionFactory 
            .createFromAsset(this.StarsAtlas, this,
                    "stars.jpg", 0, 0); //568x518
    this.LayerSpace = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.SpaceAtlas, this,
                    "space.jpg", 0, 0); //500x800
    this.LayerClouds = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.CloudsAtlas, this,
                    "clouds.jpg", 0, 0); //600x478
    this.LayerSunset = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.SunsetAtlas, this,
                    "sunset.jpg", 0, 0); //997x460 
```

我已更改为：

```
 this.LayerStars = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.skyAtlas, this,
                    "stars.jpg", 0, 0); //568x518
    this.LayerSpace = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.skyAtlas, this,
                    "space.jpg", 0, 518); //500x800
    this.LayerClouds = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.skyAtlas, this,
                    "clouds.jpg", 0, 1318); //600x478
    this.LayerSunset = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.skyAtlas, this,
                    "sunset.jpg", 0, 1796); //997x460 
```

加载纹理：

```
this.mEngine.getTextureManager().loadTexture(
            this.skyAtlas); 
```

...稍后在**onLoadScene()**中 保持不变：

```
 Sprite starSprite = new Sprite(0, 0, 568, 518, this.LayerStars);
    Sprite cloudSprite = new Sprite(0, 0, 600, 478, this.LayerClouds);
    Sprite spaceSprite = new Sprite(0, 0, 500, 800, this.LayerSpace);
    Sprite sunsetSprite = new Sprite(0, 0, 997, 460, this.LayerSunset); 
```

知道什么可能导致白屏吗？附带说明一下，当我在 4 个单独的 BitmapTextureAtlas 中有 4 个不同的图像时，它加载得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:21:08.380

我唯一能看到的是您使用了不同的纹理选项。您是否尝试过 TextureOptions.DEFAULT 而不是 TextureOptions.BILINEAR？AndEngine 论坛上的 Theturtleboy 在使用相同设置的 JPEG 时遇到了一些问题。见[http://www.andengine.org/forums/development/jpeg-support-t26.html](http://www.andengine.org/forums/development/jpeg-support-t26.html)

# c - 指向全局函数的局部指针

> ID：10741985
> 
> 赞同：1
> 
> 时间：2012-05-24T16:55:51.850
> 
> 标签：c, pointers, global-variables, local, void-pointers

我想使用本地指针指向全局字符串。指针是本地指针，字符串是全局的。当我运行此代码时，将本地指针传递给函数“myfun”，指针没有改变，即它的指向地址没有改变。打印的值为“NULL”。

有人能告诉我为什么这在 gcc 上不起作用吗？

```
#include <stdio.h>

char *str[] = { "String #1", "Another string" };

void myfun( void * p, int i ) 
{ 
    p = ( void * ) &str[ i ][ 0 ]; 
}

int main( void ) 
{ 
    void * ptr1, * ptr2;

    myfun( ptr1, 0 ); 
    myfun( ptr2, 1 ); 
    printf( "%s\n%s\n", ptr1, ptr2 ); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:57:33.370

您正在将指针按值传递给`myfun`. 因此，您分配给`p`in的值`myfun`不会返回给调用者。您需要将指针传递给指针：

```
void myfun( void ** p, int i ) 
{ 
    *p = ( void * ) &str[ i ][ 0 ]; 
} 
```

并这样称呼它：

```
myfun( &ptr1, 0 ); 
```

其实你可以`myfun`这样写：

```
void myfun( void ** p, int i ) 
{ 
    *p = str[i]; 
} 
```

事实上，最简单的方法是返回`void*`函数的返回值：

```
void *myfun( int i ) 
{ 
    return str[i]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:48:35.607

从根本上说，您的问题与-

```
void func(int i)
{
  i = 2;
}

int main()
{
  int i = 0;
  printf("i = %d\n", i);
  func(i);
  printf("i = %d\n", i); /* Wonder why it doesn't output i = 2? */
} 
```

在您的代码中，您按值传递`ptr1`(and `ptr2`) 参数，更改`p`您收到的参数的值，并期望此更改反映在您传递的参数上。that, that `ptr1`and `ptr2`are 指针不会改变您仍然按值传递的事实。

另外，IANAL（即，如果我错了，我希望语言律师纠正我），但我认为您可能会通过将指向 void 变量的指针作为参数发送给 printf 来解决问题。

# android - 更改选定状态的视图高度

> ID：10741988
> 
> 赞同：0
> 
> 时间：2012-05-24T16:56:11.323
> 
> 标签：android, android-layout

我是 Android 新手，所以这个问题可能很愚蠢，但是，是否可以通过选择器更改视图上的 layout_height？我正在尝试制作一个自定义 TabHost/TabWidget，我必须根据它们的选择状态更改一些视图。这就是我想要实现的目标：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_selected="true" android:height="10dp" />
    <item android:height="5dp" />
</selector> 
```

然后我试图将此选择器附加到 View 中，如下所示：

```
<View android:layout_height="@drawable/tab_lineheight_selector" ... /> 
```

我显然做错了什么，因为我的应用程序不断崩溃。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:04:10.977

根据开发人员文档：

> **机器人：布局高度**
> 
> 指定视图的基本高度。这是包含布局管理器内的任何视图的必需属性。它的值可以是固定高度或特殊常数之一的尺寸（例如“12dip”）。可能是一个维度值，它是一个浮点数加上一个单位，如“14.5sp”。可用单位有：px（像素）、dp（与密度无关的像素）、sp（基于首选字体大小的缩放像素）、in（英寸）、mm（毫米）。这也可能是对包含此类型值的资源（形式为“@[package:]type:name”）或主题属性（形式为“?[package:][type:]name”）的引用.

所以，从技术上讲，它**不可能**是你想要做的。

# python - Python SimpleXMLRPCServer：获取用户 IP 和简单身份验证

> ID：10741992
> 
> 赞同：2
> 
> 时间：2012-05-24T16:56:16.257
> 
> 标签：python, authentication, ip-address, xml-rpc, simplexmlrpcserver

我正在尝试使用 Python 制作一个非常简单的 XML RPC 服务器，它提供基本的身份验证 + 获取连接用户 IP 的能力。让我们以[http://docs.python.org/library/xmlrpclib.html](http://docs.python.org/library/xmlrpclib.html)中提供的示例为例：

```
import xmlrpclib
from SimpleXMLRPCServer import SimpleXMLRPCServer

def is_even(n):
    return n%2 == 0

server = SimpleXMLRPCServer(("localhost", 8000))
server.register_function(is_even, "is_even")
server.serve_forever() 
```

所以现在，这背后的第一个想法是让用户提供凭据并在允许他使用这些功能之前对其进行处理。我需要非常简单的身份验证，例如只是一个代码。现在我正在做的是强制用户在函数调用中提供此代码并使用 if 语句对其进行测试。

第二个是能够在他调用函数时获取用户IP，或者在他连接到服务器后存储它。

此外，我已经运行了一个 Apache 服务器，将其集成到其中可能会更简单。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:46:31.890

这是一个我发现有帮助的相关问题：

[Python SimpleXMLRPCServer中客户端的IP地址？](https://stackoverflow.com/questions/2129374/ip-address-of-client-in-python-simplexmlrpcserver)

对我有用的是在服务器的覆盖的 finish_request 方法中获取 client_address，将其存储在服务器本身中，然后在覆盖的服务器 _dispatch 例程中访问它。您也可以从方法中访问服务器本身，但我只是想将 IP 地址作为自动第一个参数添加到我的所有方法调用中。我使用 dict 的原因是因为我还要添加会话令牌，也许还有其他元数据。

```
from xmlrpc.server import DocXMLRPCServer
from socketserver import BaseServer

class NewXMLRPCServer( DocXMLRPCServer):

    def finish_request( self, request, client_address):
        self.client_address = client_address
        BaseServer.finish_request( self, request, client_address)

    def _dispatch( self, method, params):
        metadata = { 'client_address' : self.client_address[ 0] }
        newParams = ( metadata, ) + params
        return DocXMLRPCServer._dispatch( self, method, metadata) 
```

请注意，这将中断像 system.listMethods() 这样的内省函数，因为它不需要额外的参数。一种想法是检查“系统”的方法名称。并在这种情况下传递常规参数。

# sql - 外连接的固定条件

> ID：10741994
> 
> 赞同：2
> 
> 时间：2012-05-24T16:56:22.637
> 
> 标签：sql, oracle, outer-join

这不是一个真实的例子，它一直困扰着我一段时间，我非常感谢任何能解释这种行为的人。

我有这两张桌子

```
MYTABLE1
ID  TYPE    NAME 
1   1       typea
2   2       typea
3   3       typea
4   4       typeb
5   5       typeb
6   6       typeb
7   7       typec
8   8       typec
9   9       typec
10  10      typed

MYTYPE
ID  NAME    DESCRIPTION
1   typea   typea with desc
2   typea   
3   typea   TYPE
4   typeb   typeb with desc
5   typeb   
6   typeb   TYPE
7   typec   typec with desc
8   typec   
9   typec   TYPE 
```

我想要一个从两个表（mytable1 a，mytype b）返回行的 sql，其中

a) MYTABLE1.type = MYTYPE.ID 和 MYTYPE.description='TYPE'

b) MYTABLE1.type 不在 MYTYPE.id 中

```
a.id    a.type  a.name  b.id    b.name  b.description
3       3       typea   3       typea   TYPE
6       6       typeb   6       typeb   TYPE
9       9       typec   9       typec   TYPE
10      10      typed   null    null    null 
```

我已经尝试过这种说法，但没有成功。我想要一个使用外连接，而不是联合或嵌套选择的解决方案。

例如，我使用 Oracle 外连接语法，但我认为可以通过使用标准语法并将条件 a) 放在 ON 子句中或 b) 放在 where 子句中来实现相同的结果

我想要了解他们的“奇怪”行为，并尝试找到适用于所提供示例的行为。对我来说最奇怪的是 SQL2。我不是在写查询结果，以使问题更短，但如果需要，我可以提供它们。

## SQL1

```
select * 
from 
  mytable1 a,
  mytype b
where
  a.type=b.id(+)
  and b.description ='TYPE'
order by a.id 
```

## SQL2

```
select * 
from 
  mytable1 a,
  mytype b
where
  a.type=b.id(+)
  and b.description(+) ='TYPE'
order by a.id 
```

## SQL3

```
select * 
from 
  mytable1 a,
  mytype b
where
  a.type=b.id(+)
  and (b.description ='TYPE' or b.description is null)
order by a.id 
```

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:59:43.870

停止使用旧的笛卡尔积语法。 `JOIN`语法是 ANSI-92 标准。20年应该足够被认为是稳定的......

```
SELECT
  *
FROM
  myTable1    a
LEFT JOIN
  myType      b
    ON b.id = a.type
WHERE
     b.description = 'TYPE'
  OR b.id IS NULL 
```

*注意：*我确实有`b.description IS NULL`，但据我记得，ORACLE 将长度为 0 的字符串视为 NULL。因此，最好在*No Join*`id`的情况下测试该字段。