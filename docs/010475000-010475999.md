# StackOverflow 问答 10475000-10475999

# entity-framework - 实体框架代理破坏存储库类

> ID：10475013
> 
> 赞同：0
> 
> 时间：2012-05-06T23:04:06.157
> 
> 标签：entity-framework

我有一个通用存储库，它使用带有 DbContext api 的实体框架 4。调用 Update 时，存储库将实体和存储库注册到工作单元对象。

当在工作单元上调用 commit 时，EF 正在跟踪更新的实体（通常不是，因为存储库用于 ASP MVC 及其模型绑定技术），类型是代理类型并引发异常因为模型中不存在该类型。PersistUpdateOf 然后在 EF 跟踪实体时失败，因为 EF 使用代理类。附图显示了这一点。 ![在此处输入图像描述](../Images/1791c31be1b069c0e5f71dd74883a567.png)

是否有不涉及禁用代理的解决方法，这些代理将与被跟踪或未跟踪的实体一起工作。

```
 public void Update<TEntity>(TEntity entity) where TEntity : EntityBase
    {
        //Audit the update
        if (entity is IAuditable)
        {
            (entity as IAuditable).AuditEntityUpdate();
        }

        //Register the entity as Amended with the unit of work
        _unitOfWork.RegisterAmended(entity, this);
    }

    public virtual void PersistUpdateOf(EntityBase entity)
    {
        _context.Set(entity.GetType()).Attach(entity);
        _context.Entry(entity).State = EntityState.Modified;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:23:44.757

只需删除您`Attach`实体的行。请注意，代理实体由创建它的上下文跟踪。如果您没有`Detach`使用它或使用它，`AsNoTracking()`您将无法将其附加到另一个上下文。

```
public virtual void PersistUpdateOf(EntityBase entity)
{
    _context.Entry(entity).State = EntityState.Modified;
} 
```

# ruby - 什么是匹配不在行尾的字符串的正则表达式？

> ID：10475015
> 
> 赞同：54
> 
> 时间：2012-05-06T23:04:23.153
> 
> 标签：ruby, regex

正则表达式`/abc$/`将匹配`abc`出现在行尾的一个。我该如何做相反的事情？

我想匹配`abc`不在行尾的。

此外，我将使用正则表达式来替换字符串，所以我只想捕获`abc`字符串之后的任何内容，而不是任何内容，因此`/abc.+$/`不起作用，因为它不仅会替换，还会替换`abc`之后的任何内容`abc`。

使用什么正确的正则表达式？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-06T23:08:32.557

```
/abc(?!$)/ 
```

`(?!$)`是[负前瞻](http://www.regular-expressions.info/lookaround.html)。它将查找任何不直接跟在`$`（行尾）后面的 abc 匹配项

经测试

*   **abc** ddee (匹配)
*   dddeee **abc**（不匹配）
*   adfassdf **abc** s (匹配)
*   f **abc** ddee（匹配）

将其应用于您的案例：

```
ruby-1.9.2-p290 :007 > "aslkdjfabcalskdfjaabcaabc".gsub(/abc(?!$)/, 'xyz')
  => "aslkdjfxyzalskdfjaxyzaabc" 
```

# ms-access - ALTER TABLE 语法错误

> ID：10475021
> 
> 赞同：2
> 
> 时间：2012-05-06T23:05:40.170
> 
> 标签：ms-access

我在 Access 中的更新查询遇到问题。

我正在尝试做两件事，将一个字段添加到表中，并将另一个字段中的所有值更改为相同的值。

```
ALTER TABLE 103 ADD COLUMN test TEXT;
UPDATE 103 SET [103].Workcenter = "103"; 
```

当我独立运行这两行时，它们工作正常，但是当我将它们放在同一个查询中时，我得到“ALTER TABLE 中的语法错误”语句。有谁知道为什么我不能这样做？

如果我可以添加一列并将该字段中的所有值更新为默认值，那也很棒。我已经在 ALTER TABLE 命令中尝试了 DEFAULT，但它也不起作用。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:39:45.600

正如 ron tornambe 所说，访问查询中不能有多个命令。它们不支持批处理。

在对表进行更改时，VBA 代码是您的朋友：在直接操作数据库对象时，Access 中使用的数据定义语言比 VBA 中可用的语言更有限。

例如，要完全按照您的要求做：

```
Public Sub AddFieldAndUpdate()
    ' Initialise '
    Dim db As DAO.Database
    Dim tb As DAO.TableDef
    Dim fd As DAO.Field
    Set db = CurrentDb()

    ' Get the 103 table '
    Set tb = db.TableDefs("103")
    ' Create a new 'test' field, 128 char long '
    Set fd = tb.CreateField("test", dbText, 128)
    ' Set the Default value for the new field '
    fd.DefaultValue = "000"
    ' Add the new field to the 103 table
    tb.Fields.Append fd

    ' Now do the update
    db.Execute "UPDATE 103 SET [103].Workcenter = '103';", dbFailOnError
    Debug.Print "Number of Updated records: " & db.RecordsAffected

    ' Cleanup
    Set fd = Nothing
    Set tb = Nothing
    Set db = Nothing
End Sub 
```

这是一个笑话，尽管您可能想做更多的事情，例如，根据需要设置索引、默认格式等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:51:21.203

某些表格设计功能仅在使用 DAO 对象模型修改 TableDef 时可用。其他仅在从 ADO 连接执行 DDL 语句时可用。

您的表设计更改涉及任何一种方法都可用的功能。使用任何你想要的，但我个人会选择这种方式：

```
Dim strDdl As String
strDdl = "ALTER TABLE 103 ADD COLUMN test TEXT(128) DEFAULT ""000"";"
CurrentProject.Connection.Execute strDdl 
```

# database - Android 答案数据库

> ID：10475022
> 
> 赞同：0
> 
> 时间：2012-05-06T23:05:44.903
> 
> 标签：database

我是这个游戏的新手，所以请不要严厉地评判我。

所以我需要为一个应用程序建立一个问题/答案数据库。

这个想法很简单：用户输入一个问题，如果我的数据库中有答案，它就会给出答案。如果我没有答案，我会手动审核，这样我就可以为将来添加新的答案。

我不知道是否有人已经构建了这样的软件，我可以买一个，还是我必须雇人从头开始构建一个。我应该使用哪种语言？哪个软件？

我知道 Java、C++ 和 SQL 是这类工作最流行的语言，但它们是最好的解决方案还是有更好的语言？我需要一个可以容纳**大量数据的数据库**。

我真的很感激任何帮助家伙！

如果你们中的任何人可以为我建立这个数据库，我不介意聘请自由职业者。

谢谢！

最好的问候，阿亚赞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-07T06:29:53.483

是的，你可以做到。如果您对 SQl 有一定的了解，那么您可以在您的应用程序中创建一个本地 Db 并根据需要使用它。简单的问答应用程序包含一组预定义的问题。

上面的链接将帮助您开发这个应用程序。

# python - 使用正则表达式重新字符串匹配提取 URL 链接 - Python

> ID：10475027
> 
> 赞同：3
> 
> 时间：2012-05-06T23:06:14.983
> 
> 标签：python, string, url, matching, extraction

我一直在尝试使用 re api 从文本文件中提取 URL。任何以 http:// 、 https:// 和 www 开头的链接。

该文件包含文本以及 html 源代码，html 部分很容易，因为我可以使用 BeautifulSoup 提取它们，但普通文本似乎更具挑战性。我在网上发现这似乎是 URL 提取的最佳实现，但是它在某些标签上失败，特别是它无法处理标签并将它们包含在 URL 中。感谢任何帮助，因为我自己根本不熟悉字符串匹配

这是签名

```
sp1=re.findall("http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+", str(STRING))
sp2=re.findall('www.(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+', str(STRING)) 
```

例子：

```
http://www.website.com/science/</span></a><o:p></o:p></span></div><div
www.website.com/library/</span></a></span></i><span
http://awebsite.com/Groups</a><div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T23:49:04.170

```
re.findall(r'https?://[^\s<>"]+|www\.[^\s<>"]+', str(STRING)) 
```

该`[^\s<>"]+`部分匹配任何非空白、非引号、非尖括号字符以避免匹配字符串，例如：

```
<a href="http://www.example.com/stuff">
http://www.example.com/stuff</br> 
```

# html - HTML锚链接到本地 文件

> ID：10475031
> 
> 赞同：0
> 
> 时间：2012-05-06T23:06:34.603
> 
> 标签：html, web-services

我正在测试一个本地运行的 Web 应用程序，并尝试使用锚标记链接到我的 C: 驱动器上的日志文件输出。为锚点生成的 href 值采用标准 URI 格式“file:///C:/outbox/myLog.txt”。但是，当我尝试单击锚点时，链接不会去任何地方，我必须右键单击并将链接复制到地址栏或新选项卡中。我不确定为什么复制链接有效，而链接本身不可点击。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:21:37.210

据我了解，出于安全原因，您不能从 HTML 文档链接到 file:///。你可能想试试[这个 chrome 扩展](https://chrome.google.com/webstore/detail/jllpkdkcdjndhggodimiphkghogcpida)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:11:38.103

在不同的浏览器上是这种情况吗？你的浏览器/操作系统是什么？我们在 IE 和 Firefox 浏览器上都认为这是 Windows XP 的错误，可能与您的代码无关

# javascript - 如何使用jQuery动态地在主页中的外部页面之间建立链接？

> ID：10475034
> 
> 赞同：0
> 
> 时间：2012-05-06T23:07:24.990
> 
> 标签：javascript, jquery, ajax

我有 3 个外部页面（`inicio.php`和`perfil.php`）`produtos.php`。我希望它们在`#contaMenuEsq`我单击`"li"`.

我想使用 jQuery，因为我的意图是在这 3 个链接之间导航时使用`fadeIn`和效果。`fadeOut`

索引.php

```
<div id="contaMenuDir">
  <div id="contaMenuOpcoes">
    <ul>
      <li id='inicio'>Inicio</li>
      <li id='perfil'>Perfil</li>
      <li id='produtos'>Produtos</li>
    </ul>
  </div>
</div>
<div id="contaMenuEsq"></div> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:10:17.930

你检查过 jQuery[`.load()`](http://api.jquery.com/load/)和[fadeIn](http://api.jquery.com/fadeIn/)吗？

```
$('#contaMenuDir').on('click','li',function(){
    var text = this.attr('id');
    $('#contaMenuEsq').load(text+'.php',function(){
        //run fade here
    });
}); 
```

我建议你改为阅读[`get()`](http://api.jquery.com/jQuery.get/)。它使您可以在动态加载内容后更好地控制操作。

# java - Java - 如何子类化泛型 ArrayList 以便 MyArrayList 的实例 将是 ArrayList 的子类 ?

> ID：10475035
> 
> 赞同：10
> 
> 时间：2012-05-06T23:07:43.417
> 
> 标签：java, generics, arraylist

我想保持我的子类通用，我想改变的是`add(Object)`ArrayList 的方法，这样当你调用它时它就不会添加任何东西`arrayList.add(null)`（ArrayList 的正常实现会添加`null`; 我希望它什么都不做）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T23:20:03.310

在这种情况下，您确实应该支持组合而不是继承，因为如果您忘记覆盖 ArrayList 中添加/更改元素的方法之一（例如，您可能忘记覆盖 set），仍然可能有 null 元素.

但由于问题是关于如何继承 ArrayList，所以你可以这样做：

```
import java.util.ArrayList;

public class MyArrayList<T> extends ArrayList<T> {
    public boolean add(T element) {
        if (element != null) return super.add(element);
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-06T23:11:33.900

这是一个应该支持组合而不是继承的示例。

`ArrayList`您应该创建一个具有`ArrayList`成员字段并公开`add`执行正确操作的方法的类，而不是扩展。

阅读[有效的 Java](http://java.sun.com/docs/books/effective/)。这是专门描述此问题的[示例。](http://books.google.com/books?id=ka2VUBqHiWkC&lpg=PA67&dq=Classes%20and%20Interfaces%20effective%20java&pg=PA81#v=onepage&q=Classes%20and%20Interfaces%20effective%20java&f=false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T06:44:32.003

您是否考虑过在其中调用 add 方法的过滤器？如果仅从代码中的一个位置调用它，那么这可能是最简单的。一个简单的 if 语句可能会起作用。

```
if (input/object != null) { 
    arrayList.add(input/object);
} 
else { 
    //do something else instead, or nothing
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-07T00:18:52.223

想要限制列表中的内容是完全值得尊敬的，尽管默默地无视一个论点是值得怀疑的。尽管如此，这就是我们拥有[Apache Commons Collections](https://commons.apache.org/proper/commons-collections/javadocs/api-release/index.html)的原因。可能有一个番石榴等价物。使用其中一个来声明 的`final`子类`ArrayList`，所以没有人可以颠覆你的意图。

# c - GCC -g 与 -g3 GDB 标志：有什么区别？

> ID：10475040
> 
> 赞同：129
> 
> 时间：2012-05-06T23:08:19.493
> 
> 标签：c, debugging, gcc, gdb, clang

在使用 gcc 或 Clang 编译 C 源代码时，我总是使用该`-g`标志为 gdb 生成调试信息。

`gcc -g -o helloworld helloworld.c`

我注意到有些人推荐`-g3`。`-g`和`-g3`标志有什么区别？`-g`和之间也有区别`-ggdb`吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-06T23:13:41.700

从[文档](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)：

> -G
> 
> 以操作系统的本机格式（stabs、COFF、XCOFF 或 DWARF 2）生成调试信息。GDB 可以使用这些调试信息。在大多数使用 stabs 格式的系统上，-g 允许使用只有 GDB 可以使用的额外调试信息；这些额外的信息使 GDB 中的调试工作更好，但可能使其他调试器崩溃或拒绝读取程序。如果您想确定是否生成额外信息，请使用 -gstabs+、-gstabs、-gxcoff+、-gxcoff 或 -gvms（见下文）。
> 
> ...

* * *

> -ggdb
> 
> 生成供 GDB 使用的调试信息。这意味着使用最具表现力的可用格​​式（DWARF 2、stabs 或本机格式，如果它们都不支持），如果可能的话，包括 GDB 扩展。

* * *

> -gvms级别
> 
> 请求调试信息并使用 level 指定多少信息。默认级别为 2。级别 0 根本不产生任何调试信息。因此，-g0 否定 -g。
> 
> ……
> 
> 第 3 级包括额外信息，例如程序中存在的所有宏定义。当您使用 -g3 时，某些调试器支持宏扩展。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-03-25T18:29:48.857

**tl;dr：**要回答您的具体问题，`-g3`“包括宏定义等额外信息......某些调试器在您使用时支持宏扩展`-g3`”，但`-g`不包括此额外信息。

更广泛的答案是 gcc 支持四个级别的调试信息，从`-g0`（禁用调试信息）到`-g3`（最大调试信息）。

指定`-g`等同于`-g2`。奇怪的是，[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html "gcc 文档")`-g`很少提及/`-g2`包含或排除哪些信息：

> 请求调试信息并使用 level 指定多少信息。默认级别为 2。级别 0 根本不产生任何调试信息。因此，-g0 否定 -g。
> 
> 级别 1 产生的信息最少，足以在您不打算调试的程序部分中进行回溯。这包括函数和外部变量的描述，以及行号表，但没有关于局部变量的信息。
> 
> 第 3 级包括额外信息，例如程序中存在的所有宏定义。当您使用 -g3 时，某些调试器支持宏扩展。

# ruby-on-rails - 轨道、形式和关系的问题

> ID：10475042
> 
> 赞同：0
> 
> 时间：2012-05-06T23:08:26.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有几个使用脚手架生成器制作的模型。

有：

```
rails g scaffold event title:string content:text
rails g scaffold link title:string 
```

我希望每个事件都有很多链接，链接属于事件。

所以在我编码的事件模型中：

```
has_many :links 
```

在链接模型内部：

```
belongs_to :event 
```

继续我已经跑了：

```
rake db:migrate 
```

为了建立数据库。我已经使用脚手架功能制作了几个活动。

现在我想直接在事件的显示>视图中添加链接。

在 show.html.erb 里面（在 view>events 目录里面）我写过：

```
<%= form_for([@event, @event.links.build]) do |f| %>

<p><%= f.text_field %></p>
<p><%= f.submit "Add the link" %></p>
<% end %> 
```

但是当我尝试访问显示页面时，浏览器会说：

```
unknown attribute: event_id 
```

它说错误在这一行：

```
<%= form_for([@event, @event.links.build]) do |f| %> 
```

我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:17:09.377

您必须在迁移中创建外键，即`event_id`, 通过更改现有的或创建新的。

由于您已经迁移了它们，因此建议您创建一个新的，所以它应该是这样的

```
class AddEventForeignKeyToLinks < ActiveRecord::Migration
  def up
    change_table :links do |t|
      t.references :event
    end
  end

  def down
    remove_column :links, :event_id
  end
end 
```

编辑：不要忘记创建迁移文件，你应该使用命令

```
rails generate migration AddEventForeignKeyToLinks 
```

或任何其他名称，然后是 AddEventForeignKeyToLinks

* * *

路线

```
resources :events do 
  resources :links 
end 
```

# perl - 为什么在我的 Perl 脚本中出现“带有错误文件描述符的已关闭文件句柄上的 print()”？

> ID：10475045
> 
> 赞同：4
> 
> 时间：2012-05-06T23:08:44.603
> 
> 标签：perl, filehandle

我在 Perl 中有一个 TCP 服务器（修订版 5.0 版本 8 颠覆 0），它使用此子例程登录文件。

```
sub logger {
  return if ($LOGFILE eq "") ;
  my ($idt, $str) = @_ ;
  unless( defined($str) ) {
    $str = $idt ;
    $idt = '' ;
  }
  my ($s,$m,$h,$J,$M,$A) = localtime(time()) ;
  if(!open(OUT,">>$LOGFILE")) {
    warn "logger:error open [$LOGFILE]:[$!]\n";
    return;
  }
  if (!printf OUT "%4.4d/%2.2d/%2.2d %2.2d:%2.2d:%2.2d %s %s -> %s\n",
          $A+1900, $M+1, $J, $h, $m, $s, $idt, $HOSTNAME, $str) {
    warn "logger:error print [$LOGFILE]:[$!]\n";
    return;
  }
  if (!close(OUT)) {
    warn "logger:error close [$LOGFILE]:[$!]\n";
    return;
  }
} 
```

所以在这个日志文件中有同时写入。 **例外**的是，我在 STDERR 中有这个错误：

```
printf() 在关闭的文件句柄上

记录器：错误打印 [/my/path/logFile.LOG]:[Bad File Descriptor]
```

打开没有任何错误！

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:53:52.080

`OUT`是一个全局包。假设升级到真正的日志系统（如 Log4perl）是不可能的，您可以使用一个名为的词法文件句柄`$OUT`：

```
sub logger {
    $LOGFILE or return;
    my ($idt, $str) = @_ ;

    unless( defined($str) ) {
        $str = $idt ;
        $idt = '' ;
    }

    my ($s,$m,$h,$J,$M,$A) = localtime(time()) ;

    my $OUT;

    unless (open $OUT, '>>', $LOGFILE) {
        warn "logger:error open [$LOGFILE]:[$!]\n";
        return;
    }

    unless (printf $OUT 
        "%4.4d/%2.2d/%2.2d %2.2d:%2.2d:%2.2d %s %s -> %s\n",
        $A+1900, $M+1, $J, $h, $m, $s, $idt, $HOSTNAME, $str
    ) {
        warn "logger:error print [$LOGFILE]:[$!]\n";
        return;
    }

    unless (close $OUT) {
        warn "logger:error close [$LOGFILE]:[$!]\n";
        return;
    }

    return 1;
} 
```

# google-app-engine - 数据存储区管理员重定向循环

> ID：10475049
> 
> 赞同：1
> 
> 时间：2012-05-06T23:09:13.857
> 
> 标签：google-app-engine

由于“此网页存在重定向循环”错误，我无法访问 Datastore Admin 选项卡，而且我无法弄清楚我做错了什么或设置有误。

我在 Web 控制台中启用了 Datastore Admin。

我已经添加（虽然我不知道这是否有必要）：

```
builtins:
- datastore_admin: on 
```

我已经清除了 cookie 等。

身份验证选项设置为 Google Accounts API

有没有其他人看到这个或知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:05:50.690

这个问题正在这里讨论，我将回答它。

[http://code.google.com/p/googleappengine/issues/detail?id=4233](http://code.google.com/p/googleappengine/issues/detail?id=4233)

首先一个问题。这是在哪个浏览器上？

我在 chrome 上遇到了这个问题，它与 Chrome 阻止第三方 cookie 有关，总的来说这是一件好事。您可以为您的第三方 cookie 设置添加一个例外来解决问题。

您需要转到 Chrome 设置页面。您可能需要展开一个名为显示高级设置的选项...

然后寻找：

*   隐私/内容设置...
*   Cookies / 管理例外...

然后在此列表的底部添加一个例外。异常应如下所示：

https://ah-builtin-python-bundle-dot-latest-dot-[YOUR_APP_ID].appspot.com/_ah/datastore_admin/*

# concurrency - 如何实现simulink和matlab之间的并发编程

> ID：10475051
> 
> 赞同：0
> 
> 时间：2012-05-06T23:09:31.063
> 
> 标签：concurrency, buffer, simulink

我需要以下情况的帮助。

我的项目是使用simulink来模拟机器人。simulink模型的输出是机器人在每个时间步的位置和扭矩。我的问题出在数据收集部分。我计划使用缓冲区来存储 simulink 输出，并使用 antoher matalb 函数访问同一缓冲区以将数据从缓冲区中取出以进行在线数据分析。要求是simulink模型和matlab数据分析功能需要同时运行。而 matalb 数据分析函数决定何时将数据从缓冲区中取出。这就像一个生产者-消费者问题，其中 simulink 是生产者，数据分析 matlab 函数充当消费者。

我的问题是如何保护缓冲区以实现互斥。我不想使用 To 工作区块，因为它仅在 simulink 暂停或停止时更新数据。我没有找到 matalb 或 simulink 提供的任何类似 smeaphore 或 mutex 的结构。我已经尝试了以下方法来解决问题，但它们都不起作用：

1.  我曾尝试使用 DSP 工具箱中的队列和缓冲区块，这两个块提供互斥，但在模拟过程中输出数据的大小会发生变化。基本上当matlab函数采集数据的时候，它会把此刻存储在缓冲区中的所有数据都取走。然后缓冲区块似乎在每个 simulink 时间步上一个一个地输出。

2.  我试图通过嵌入式函数中的持久变量来实现队列。当 matalb 函数要收集数据时，它会翻转一个信号标志来告诉 simulink 将数据输出到工作区。但是在这种方法中，matalb 函数必须通过两次调用来获取数据。第一次调用翻转标志然后返回。接下来，第二次调用用于搜索工作空间以查找 simulink 输出的数据。我的顾问拒绝了这种方法，因为它不优雅。

我认为RTW可能会解决这个问题，但是simulink模型和matalb分析功能代码经常更改，所以出于调试目的，我打算不将simulink更改为C/C++。但我想知道我是否可以使用 C 来实现互斥锁并通过 simulink 和 Matlab 调用。如果答案是肯定的，那么该怎么做呢？

我真的希望有人可以帮助我。任何建议表示赞赏。顺便说一句，我使用的是Linux系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:39:49.380

查看Simulink 文档中的[在仿真期间访问模块数据](http://www.mathworks.co.uk/help/simulink/ug/accessing-block-data-during-simulation.html)，以及使用事件侦听器和文件交换上的[MATLAB UI 查看 Simulink 信号。](http://www.mathworks.com/matlabcentral/fileexchange/24294-simulink-signal-viewing-using-event-listeners-and-a-matlab-ui)我认为这会做你想要的。

# node.js - 为什么 Express.js 不能正确读取 POST 参数？

> ID：10475052
> 
> 赞同：-1
> 
> 时间：2012-05-06T23:09:39.693
> 
> 标签：node.js, http-post, express

这是我的帖子：

```
account_id  1231
limit   3
ordertype   limit
quantity    1
symbol  USDJPY
transaction_type    buy 
```

在我的代码中，我有：

```
 var account_id = req.param('account_id', null);
  var symbol_pair = req.param('symbol', null);
  var transaction_type = req.param('transaction_type', null);
  var order_type = req.param('ordertype', null);
  var amount = req.param('amount', null);
  var limit = req.param('limit', null);

console.log(account_id + " | " + symbol_pair + " | " + transaction_type + " | " + order_type + " | " + amount + " | " + limit);return; 
```

但不知为何`ordertype`又回来了`market`。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:04:10.457

确保您拥有`app.use(express.bodyParser());`并尝试使用`req.body.account_id`（每种风格都相似）

[http://expressjs.com/guide.html#http-methods](http://expressjs.com/guide.html#http-methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:23:51.763

您正在定义 order_type，然后尝试使用 ordertype 将其取回。不要忘记你的：下划线！

# android - 如何在不使用上下文的情况下声明全局变量？

> ID：10475053
> 
> 赞同：0
> 
> 时间：2012-05-06T23:09:50.953
> 
> 标签：android

从我的应用程序中的几个类中，我想在不使用`Context`. `Application`如果我在类中声明这个变量，`SharedPreferences`或者`Strings.xml`，那么我必须使用`Context`它来获取/设置它的值。

[正如我从这篇文章](https://stackoverflow.com/a/3888560/912604)中了解到的那样，使用**Singleton**并不是一个好习惯。有没有使用全局变量而不使用的好方法？`context`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:29:18.047

创建一个全局类或将字符串存储在“有意义”的地方。例如，如果你有鞋类，你可以这样做：

```
public class Shoes {

    public static class BRAND {
        public static final String NIKE = "nike";
        public static final String REBOK = "rebok";
        public static final String ADDIDAS = "addidas";
    }

    private String brand;

    public Shoes() {}

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public String getBrand() {
        return this.brand;
    }
} 
```

现在你可以这样做：

```
public static void main(String[] args) {

    Shoes myShoes = new Shoes();
    myShoes.setBrand(Shoes.BRAND.NIKE);
} 
```

你会发现Android中有很多这样的东西。如果您改用枚举，那就更好了。希望这可以帮助。

**更新**

如果您想使用 setter 和 getter，那么有两种解决方案：

1.  首先，您需要一个对象实例，并且由于您只需要一个实例，因此需要单例设计模式。真的，如果你正确同步并且设计有意义，它们会非常好和有用。在你的情况下，我认为这不值得工作。
2.  您可以利用静态初始化程序和静态方法。您可以删除最终声明并使用字符串执行您想要的操作，如下所示：

    ```
    public class Shoes {

        public static class BRAND {
            public static String NIKE;
            public static String REBOK;
            public static String ADDIDAS;

            static {
                NIKE = "nike";
                REBOK = "rebok";
                ADDIDAS = "addidas";
            }
        }

        private String brand;

        public Shoes() {}

        public void setBrand(String brand) {
            this.brand = brand;
        }

        public String getBrand() {
            return this.brand;
        }
    } 
    ```

或者使用良好的封装实践并执行以下操作：

```
public class Shoes {

    public static class BRAND {
        private static String NIKE;
        private static String REBOK;
        private static String ADDIDAS;

        static {
            NIKE = "nike";
            REBOK = "rebok";
            ADDIDAS = "addidas";
        }

        public static String getNIKE() {
            return NIKE;
        }

        public static void setNIKE(String name) {
            NIKE = name;
        }

        public static String getREBOK() {
            return REBOK;
        }

        public static void setREBOK(String name) {
            REBOK = name;
        }

        public static String getADDIDAS() {
            return ADDIDAS;
        }

        public static void setADDIDAS(String name) {
            ADDIDAS = name;
        }
    }

    private String brand;

    public Shoes() {}

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public String getBrand() {
        return this.brand;
    }
} 
```

但是我必须注意：如果您这样做是因为您无法获得上下文，那么您就错过了一些东西。上下文可以从任何地方获得——系统实例化的对象被赋予一个上下文作为参数。如果您有自己的自定义对象，您可以将 ApplicationContext 作为参数或使用对象本身（this）的类传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:30:51.753

将值存储在您的 strings.xml 文件中。然后这样称呼它。

```
 String yourString = Context.getResources().getString(R.string.your_string); 
```

# jquery - 使用 tokeninput jquery 插件防止 ajax 调用

> ID：10475054
> 
> 赞同：1
> 
> 时间：2012-05-06T23:10:06.263
> 
> 标签：jquery, jquery-plugins

我想将此插件用于多个输入字段。有时我想向后端发送请求以获取数据，但有时，我只想让用户输入数据（标签），并将输入的数据放在逗号/或空格之后的字段中。我可以配置这个插件来做这样的事情吗？有没有人使用可用的功能来完成这个？我正在考虑使用它们提供的功能添加项目。

# jquery - 用 JQuery 慢慢改变/淡入淡出/动画改变图像

> ID：10475058
> 
> 赞同：11
> 
> 时间：2012-05-06T23:10:32.043
> 
> 标签：jquery, image, jquery-animate, fade, src

这是我的图 `<img src="one.png" id="one" onMouseOver="animateThis(this)">`

当用户使用 jQuery 将鼠标悬停在上面时，我想慢慢地将这个图像 src 更改为“oneHovered.png”。哪种 jQuery 方法最好做到这一点？我看到的很多示例都希望我更改 CSS 背景。有什么可以直接改变 src 属性吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-06T23:18:17.250

您可以首先淡出图像，使用第一个可选参数控制淡出的持续时间。淡出完成后，将触发匿名回调，并将图像的来源替换为新的。之后，我们使用另一个持续时间值淡入图像，以毫秒为单位：

原始 HTML：

```
<img src="one.png" id="one" /> 
```

JavaScript：

```
$('#one').hover(function() {

    // increase the 500 to larger values to lengthen the duration of the fadeout 
       // and/or fadein
    $('#one').fadeOut(500, function() {
        $('#one').attr("src","/newImage.png");
        $('#one').fadeIn(500);
    });

}); 
```

最后，使用 jQuery，动态绑定 JavaScript 事件要容易得多，而无需在 HTML 本身上使用任何 JavaScript 属性。我修改了原始`img`标签，使其仅具有`src`and`id`属性。

[jQuery 悬停](http://api.jquery.com/hover/)事件将确保当用户将鼠标悬停在图像上时触发该函数。

如需更多阅读，另请参阅[jQuery fadeOut](http://api.jquery.com/fadeOut/)和[jQuery fadeIn](http://api.jquery.com/fadeIn/)。

**图像加载时间可能存在的问题：**

如果这是用户第一次将鼠标悬停在图像上并发出请求，则实际的淡入可能会出现轻微故障，因为服务器在请求 newImage.png 时会有延迟。解决方法是预加载此图像。[StackOverflow 上](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)有几个关于预加载图像的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-03T16:26:30.587

试试这个

```
<img class="product-images-cover" src="~/data/images/productcover.jpg" />
<div class="list-images-product">
 <div>
   <img class="thumbnail" src="~/data/images/product1.jpg" />
 </div>
 <div>
   <img class="thumbnail" src="~/data/images/product2.jpg" />
 </div>
</div>

$(document).ready(function () {
    $(".list-images-product .thumbnail").click(function (e) {
        e.preventDefault();
        $(".product-images-cover").fadeOut(250).attr("src", $(this).attr('src')).fadeIn(250);
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T00:40:44.563

除了@jmort253，如果你`min-height`在淡出之前添加一个会很好。否则，您可能会特别看到响应式图像的抖动。

我的建议是

```
$('#one').hover(function() {
    // add this line to set a minimum height to avoid jerking
    $('#one').css('min-height', $('#one').height());
    // increase the 500 to larger values to lengthen the duration of the fadeout 
       // and/or fadein
    $('#one').fadeOut(500, function() {
        $('#one').attr("src","/newImage.png");
        $('#one').fadeIn(500);
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T14:46:45.673

通过jquery更改图片源时，需要加载时间，导致出现一些闪烁效果。我修改了上面的代码来解决这个问题。

```
$(".list-images-product .thumbnail").fadeTo(1000,0.30, function() {
  $(".list-images-product .thumbnail").attr("src",newsrc);
  $(".list-images-product .thumbnail").on('load', function(){
    $(".list-images-product .thumbnail").fadeTo(500,1);
  });
 }); 
```

# performance - 最长公共SUBSTRING优化

> ID：10475060
> 
> 赞同：2
> 
> 时间：2012-05-06T23:10:55.713
> 
> 标签：performance, optimization, parallel-processing, nested-loops, longest-substring

任何人都可以帮助我优化我的 LONGEST COMMON SUBSTRING 问题吗？我必须读取非常大的文件（最大 2 Gb），但我不知道要使用哪种结构...在 c++ 中没有哈希映射。TBB 中有并发哈希映射，但使用起来非常复杂算法。我用 **L 矩阵解决了这个问题，但它很贪心，不能用于大输入。矩阵充满了零，这可以通过使用 map> 来消除，并且只存储非零，但这真的很慢并且实际上不可用。速度非常重要。这是代码：

```
// L[i][j] will contain length of the longest substring
    // ending by positions i in refSeq and j in otherSeq
    size_t **L = new size_t*[refSeq.length()];
    for(size_t i=0; i<refSeq.length();++i)
        L[i] = new size_t[otherSeq.length()];

    // iteration over the characters of the reference sequence
    for(size_t i=0; i<refSeq.length();i++){
        // iteration over the characters of the sequence to compare
        for(size_t j=0; j<otherSeq.length();j++){
            // if the characters are the same,
            // increase the consecutive matching score from the previous cell
            if(refSeq[i]==otherSeq[j]){
                if(i==0 || j==0)
                    L[i][j]=1;
                else
                    L[i][j] = L[i-1][j-1] + 1;
            }
            // or reset the matching score to 0
            else
                L[i][j]=0;
        }
    }

    // output the matches for this sequence
    // length must be at least minMatchLength
    // and the longest possible.
    for(size_t i=0; i<refSeq.length();i++){
        for(size_t j=0; j<otherSeq.length();j++){

            if(L[i][j]>=minMatchLength) {
                //this sequence is part of a longer one
                if(i+1<refSeq.length() && j+1<otherSeq.length() && L[i][j]<=L[i+1][j+1])
                    continue;
                //this sequence is part of a longer one
                if(i<refSeq.length() && j+1<otherSeq.length() && L[i][j]<=L[i][j+1])
                    continue;
                //this sequence is part of a longer one
                if(i+1<refSeq.length() && j<otherSeq.length() && L[i][j]<=L[i+1][j])
                    continue;
                cout << i-L[i][j]+2 << " " << i+1 << " " << j-L[i][j]+2 << " " << j+1 << "\n";

                // output the matching sequences for debugging :
                //cout << refSeq.substr(i-L[i][j]+1,L[i][j]) << "\n";
                //cout << otherSeq.substr(j-L[i][j]+1,L[i][j]) << "\n";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:02:35.560

有一个关于同样问题的英特尔竞赛。

也许他们会在结束后发布一些解决方案

[http://software.intel.com/fr-fr/articles/AYC-early2012_home/](http://software.intel.com/fr-fr/articles/AYC-early2012_home/)

# r - 逻辑回归代码错误

> ID：10475061
> 
> 赞同：2
> 
> 时间：2012-05-06T23:11:02.377
> 
> 标签：r, regression, curve-fitting

我正在使用 PopulationGrowth.csv 编写以下脚本：

```
dat <-read.csv("/Path/PopulationGrowth.csv")
class = "data.frame", row.names=c(NA,-16L)
m1 <- nls(pop~SSlogis(Year,asym,xmid,scal),data=dat)
par(las=1,bty="l",mar=c(5,6,2,2)+0.1)  ## graphics tweaks
with(dat,plot(CentralOakland~Year,ylab=""))
mtext("Population",side=2,las=0,line=4)
yearvec <- 1940:2010
lines(yearvec,predict(m1,newdata=data.frame(Year=yearvec))) 
```

在最后一行之后，我收到以下错误：

```
Error in predict(m1, newdata = data.frame(Year = yearvec)) : object 'm1' not found 
```

这是我正在使用的数据：

```
Year CentralOakland
1940 7852 
1950 8452
1960 6701
1970 6135
1980 5872
1990 5406
2000 5281
2010 6086 
```

我还试图预测未来 30 年的人口趋势。有理由相信，在接下来的 30 年里，人口将会增加。预测这个需要什么函数？

请耐心等待，我是 R 的新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T23:45:59.473

这里有一些小故障：

*   你还没有给我们一个可重现的例子：参见例如[http://tinyurl.com/reproducible-000](http://tinyurl.com/reproducible-000) ...
*   你可能想要`read.csv`而不是`read.table`
*   我不知道`quartz=(title...)`在做什么。也许`quartz(title=...)`？无论如何，使用`plot()`应该会自动打开一个新的图形窗口
*   使用`attach`通常是一个坏主意
*   使用`lines`而不是`curve`将新的（例如）预测数据集添加到绘图中。对于线性回归的具体情况（见下一点），您可以使用`abline`.
*   到目前为止，最重要的是：您在这里所做的**不是**逻辑回归——它`glm`用于拟合普通的线性模型（最小二乘回归），这也可以通过`lm()`. 逻辑回归将使用`family=binomial`而不是`family=gaussian`. 此外，逻辑回归适用于二元响应变量，因此*不太适合对奥克兰中部的人口进行建模*......我怀疑你混淆了逻辑*回归*和逻辑*增长曲线*......

这是一些修改后的代码：

```
dat <- read.csv("/Path/PopulationGrowth.csv")
with(dat,plot(Year,CentralOakland,xlab="Year",ylab="Population",
  main="Central Oakland Population vs. Year"))
g <- lm(CentralOakland~Year,data=dat)
abline(g)
## OR
yearvec <- seq(min(Year),max(Year),length=51)
lines(yearvec,predict(g,newdata=data.frame(Year=yearvec),type="response")) 
```

另一方面，也许这就是你真正想做的（你没有给我们数据，所以我去了维基百科并得到了一些......）

```
## from http://en.wikipedia.org/wiki/Oakland,_California
dat <- structure(list(year = c(1860L, 1870L, 1880L, 1890L, 1900L, 1910L, 
1920L, 1930L, 1940L, 1950L, 1960L, 1970L, 1980L, 1990L, 2000L, 
2010L), pop = c(1543L, 10500L, 34555L, 48682L, 66960L, 150174L, 
216261L, 284063L, 302163L, 384575L, 367548L, 361561L, 339337L, 
372242L, 399484L, 390724L)), .Names = c("year", "pop"), 
  class = "data.frame", row.names = c(NA,-16L)) 
```

配件：

```
## SSlogis() is a "self-starting" logistic
m1 <- nls(pop~SSlogis(year,asym,xmid,scal),
          data=dat) 
```

绘图：

```
par(las=1,bty="l",mar=c(5,6,2,2)+0.1)  ## graphics tweaks
with(dat,plot(pop~year,ylab=""))
## add y-label separately 
mtext("population",side=2,las=0,line=4)
yearvec <- 1860:2010
lines(yearvec,predict(m1,newdata=data.frame(year=yearvec))) 
```

![在此处输入图像描述](../Images/acf780ab798e58038020799c4f89cd2b.png)

# jms - 如何更改消息选择器

> ID：10475062
> 
> 赞同：4
> 
> 时间：2012-05-06T23:11:06.840
> 
> 标签：jms, message

有没有办法更改消息选择器，或者我是否需要关闭当前消息消费者并使用新的选择器字符串创建另一个？

```
session.createConsumer(destination, "type = 'mytype'"); 
```

场景：我想从队列中接收特定类型的消息。在此之后，我想从队列中接收另一种类型的消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T03:28:12.630

JMS API 没有指定在创建消费者后更改消息选择器的方法。要更改消息选择器，必须关闭消费者并使用不同的选择器重新打开。

# php - 收到 SQL 语法错误

> ID：10475069
> 
> 赞同：1
> 
> 时间：2012-05-06T23:12:32.330
> 
> 标签：php, mysql, sql, syntax

我在PHP中有一行代码如下...

```
mysql_query("INSERT INTO `updates` (project_id, date, update) VALUES ('{$project}', '{$date}', '{$update}')") or die(mysql_error()); 
```

但是我收到以下 SQL 语法错误...

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“update) VALUES ('14', '2012-05-06', 'Test update')' 附近使用正确的语法

如果有人可以帮助我，那就太好了，也许这很明显，但我看不出这里有什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:14:51.080

更改查询如下：

```
mysql_query("INSERT INTO `updates` (`project_id`, `date`, `update`) VALUES ('{$project}', '{$date}', '{$update}')") or die(mysql_error()); 
```

这是因为 date 和 update 是 MySQL 中注册的关键字。我们不能直接在查询中使用它。我们需要逃避它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:48:33.713

首先也是最重要的事情：你不能使用mysql保存器字。当你使用它时，准备好浪费你的时间来找出错误。这是保留词列表：不要在其中使用任何词 [http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

第二：即使你想敢用preserved关键字。用户表前缀或列前缀以及保留关键字。

第三：当你沿着 php 执行数据库操作时，要么在需要的地方引用每个参数，要么只引用用户简单的参数。即，如果您希望引用 db 表列而不是用引号包围每一列

```
"INSERT INTO `updates` (`project_id`, `date`, `update`) VALUES ('{$project}', '{$date}', '{$update}')" 
```

如果您不引用，则不引用

```
"INSERT INTO updates (project_id, date, update) VALUES ('{$project}', '{$date}', '{$update}')" 
```

希望这会对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T23:14:34.977

`date`和`update`是 MySQL 中的保留字。

您可以使用：

```
"INSERT INTO `updates` (project_id, `date`, `update`) VALUES ('{$project}', '{$date}', '{$update}')" 
```

尽管理想情况下您不应该使用保留字作为实体名称。它没有任何优点，但也有一些小缺点（例如，使 SQL 的可移植性降低）。

此外，如果 project_id 是一个整数类型字段，则相当小的一点，将其传递给一个整数，而不是一个字符串。喜欢：

```
 INSERT INTO `updates` (project_id, `date`, `update`) VALUES ({$project}, '{$date}', '{$update}') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T23:15:18.583

`update`是 SQL 中的关键字，将您的 mysql 字段封装在反引号中。

# sql - != All 只能在 SQL 语句中使用

> ID：10475070
> 
> 赞同：1
> 
> 时间：2012-05-06T23:12:36.590
> 
> 标签：sql, oracle, if-statement, plsql

我有一个过程用游标遍历一个表中的记录，然后将插入语句启动到另一个表中。

我在 If 语句“！= ALL”中收到此错误

```
If V_Item = V_Item_G
   And V_New_Part Is Null
   And (V_Delete_G Is Null or V_Delete_G != 'Y')
   And Status_G != ALL  ('KNOWN', 'NEW, 'UNKNOWN', 'SOLD')
THEN INSERT INTO PART 
   VALUES ( V_Item, V_New_Part); 
```

--NOTE NOT IN 不工作

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:17:34.323

而不是`!= All`使用`Not In ('KNOWN', 'NEW, 'UNKNOWN', 'SOLD')`

# android - 如何在 xml 中更改 TextView 的字体？

> ID：10475072
> 
> 赞同：4
> 
> 时间：2012-05-06T23:13:08.003
> 
> 标签：android

我一直在谷歌搜索，但还没有找到解决方案。

`TextView`我知道我可以像这样以编程方式更改字体`view.setTypeface(Typeface.createFromAsset(getAssets(),"dejavusans.ttf"));`。

但是，没有办法直接在 xml 文件中执行此操作吗？我找到`android:typeface`了属性，但它只有“正常”、“sans”、“serif”和“monospace”选项。我怎样才能使用我拥有的这种字体`/assets/fonts/Roboto-Regular.ttf`？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T23:32:34.353

我写了一个可以做到这一点的图书馆项目。它被称为 Nifty：[https ://github.com/tom-dignan/nifty](https://github.com/tom-dignan/nifty)

使用 nifty，您可以在您的 assets 目录中从您的 styles.xml 文件中指定字体，或者直接在您的 XML 布局中作为一个属性。它提供了一个自定义`NiftyTextView`并`NiftyButton`继承了其父类的所有功能，除了提供在 XML 中指定字体的能力。

示例样式：

```
<style name="MyStyle" parent="@android:style/Theme">
        <item name="typeface">my_font_that_is_in_assets.ttf</item>
</style> 
```

示例 XML：

```
 <com.tomdignan.nifty.NiftyTextView
        android:id="@+id/title"
        style="@style/MyStyle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" /> 
```

或者，如果您不使用样式：

```
 <com.tomdignan.nifty.NiftyTextView
            xmlns:nifty="http://schemas.tomdignan.com/nifty"
            nifty:typeface="my_font_that_is_in_assets.ttf"
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/hello_world" /> 
```

变得[漂亮](http://github.com/tom-dignan/nifty)

注意事项：自定义视图在布局编辑器中不可预览。我的解决方法是使用搜索/替换。

# java - 使用 RSE 使用 Eclipse 将远程源作为 Java 项目检出

> ID：10475078
> 
> 赞同：6
> 
> 时间：2012-05-06T23:14:12.293
> 
> 标签：java, eclipse, amazon-ec2, remote-debugging, remote-access

我相信我现在已经在这个问题上彻底彻底地扫描了网络，所以这里。我有一些位于远程机器（Amazon EC2 托管）上的源文件（Java）。我可以通过 SSH 进入机器，并且可以使用 Eclipse 的 RSE 插件远程查看和编辑文件。好的！

现在，我想创建一个与该远程位置相关联的项目。我可以通过在 RSE 透视图中选择一个目录并选择（创建远程项目）来做到这一点。这会将项目导入 Eclipse，我可以从那里查看和编辑文件。好的！

问题是这个项目是作为“常规”项目导入的，而我希望它是一个 Java 项目。在 Eclipse中似乎没有一种巧妙的方法可以将*远程*项目转换为 Java。有没有办法做到这一点？请注意，我正在尝试使用安装在远程机器上的工具（编译器等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:44:59.267

我对 RSE 不熟悉，但您可以手动将 java 性质/方面添加到项目元数据中。一个例子在这里：[eclipse default project to java project](https://stackoverflow.com/questions/179439/how-to-change-an-eclipse-default-project-to-a-java-project)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T14:12:56.760

您可以简单地将一个空的 java 项目导出到您的远程文件系统中。然后将此新项目用作“新远程项目”。生成 Java 的所有其他方法。远程文件夹中的 .project 文件也可以正常工作。

# optimization - F# 自动泛化和性能

> ID：10475079
> 
> 赞同：7
> 
> 时间：2012-05-06T23:14:32.917
> 
> 标签：optimization, f#, automatic-generalization

我最近遇到了意外的代码优化，想检查一下我对所观察到的内容的解释是否正确。以下是该情况的一个非常简化的示例：

```
let demo =
   let swap fst snd i =
       if i = fst then snd else
       if i = snd then fst else
       i
   [ for i in 1 .. 10000 -> swap 1 i i ]

let demo2 =
   let swap (fst: int) snd i =
       if i = fst then snd else
       if i = snd then fst else
       i
   [ for i in 1 .. 10000 -> swap 1 i i ] 
```

两个代码块之间的唯一区别是，在第二种情况下，我将 swap 的参数显式声明为整数。然而，当我使用#time 在 fsi 中运行 2 个片段时，我得到：

案例 1 真实：00:00:00.011，CPU：00:00:00.000，GC gen0：0，gen1：0，gen2：0
案例 2 真实：00:00:00.004，CPU：00:00:00.015，GC gen0 ：0，第一代：0，第二代：0

即第二个片段的运行速度是第一个片段的 3 倍。这里的绝对性能差异显然不是问题，但是如果我大量使用交换功能，它就会堆积起来。

我的假设是性能下降的原因是，在第一种情况下，swap 是通用的并且“需要相等”，并检查 int 是否支持它，而第二种情况不需要检查任何东西。这是发生这种情况的原因，还是我错过了其他东西？更一般地说，我是否应该将自动泛化视为一把双刃剑，也就是说，一个很棒的功能可能会对性能产生意想不到的影响？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T23:24:01.327

[我认为这通常与为什么这个 F# 代码这么慢这个](https://stackoverflow.com/questions/6104221/why-is-this-f-code-so-slow)问题中的情况相同。在那个问题中，性能问题是由要求的约束引起的`comparison`，在您的情况下，它是由`equality`约束引起的。

在这两种情况下，编译的通用代码都必须使用接口（和装箱），而专门的编译代码可以直接使用 IL 指令进行整数或浮点数的比较或相等。

避免性能问题的两种方法是：

*   专门化要使用的代码`int`或`float`像您所做的那样
*   将函数标记为`inline`以便编译器自动对其进行专门化

对于较小的函数，第二种方法更好，因为它不会生成*太多*代码，并且您仍然可以以通用方式编写函数。如果您仅将函数用于单一类型（按设计），那么使用第一种方法可能是合适的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T23:25:01.550

差异的原因是编译器正在生成对

```
 IL_0002:  call bool class [FSharp.Core]Microsoft.FSharp.Core.LanguagePrimitives/HashCompare::GenericEqualityIntrinsic<!!0> (!!0, !!0) 
```

在通用版本中，而`int`版本可以直接比较。

如果你使用`inline`我怀疑这个问题会消失，因为编译器现在有额外的类型信息

# c - 在调整大小之前不会显示更改窗口的边框厚度？

> ID：10475080
> 
> 赞同：1
> 
> 时间：2012-05-06T23:14:33.870
> 
> 标签：c, winapi

我有以下代码可以在运行时更改窗口的样式：

```
SetWindowLong(hwnd, GWL_EXSTYLE,  WS_EX_APPWINDOW|WS_EX_WINDOWEDGE); 
```

唯一的问题是，在我开始拖动窗口的边缘以调整它的大小之前，它并没有达到预期的效果。

我需要做些什么才能使它正常工作吗？

我尝试了 UpdateWindow 和 ShowWindow。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:34:26.530

您需要使用带有 SWP_FRAMECHANGED 标志的 SetWindowPos 才能使更新生效。如果您不需要更改大小或位置或将 SWP_NOMOVE 和 SWP_NOSIZE 更改为 SWP_FRAMECHANGED

# css - 将背景图像的半透明与关键帧动画相结合

> ID：10475089
> 
> 赞同：2
> 
> 时间：2012-05-06T23:15:27.817
> 
> 标签：css, background, transparency

我想在我的包装器的背景图像中添加一个连续的淡入淡出效果。我知道您可以使用关键帧动画来使背景图像四处移动，但是，我想知道使用这种技术是否可以产生淡入淡出效果。

[http://css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/](http://css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/)

例如：

```
@-webkit-keyframes fontbulger {
0% {
    font-size: 10px;
}
30% {
    font-size: 15px;
}
100% {
    font-size: 12px;
} 
```

在我的完美情况下会像......

```
@-webkit-keyframes fontbulger {
0% {
    background: url(image.png, 1);
}
30% {
    background: url(image.png, 0.5);
}
100% {
    background: url(image.png, 1);
} 
```

...对于其中 0.5 将是 50% 的可见性。当然，这个建议是行不通的。有什么办法可以做到这一点？我知道您可以将透明度应用于[RGB 值](https://stackoverflow.com/a/8740149/1122073)，但我想将其应用于图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:48:52.207

我目前不知道有任何方式可以直接影响您所寻求的背景图像的不透明度。两种可能的解决方法是：

## 1\. 纯 CSS3 方式（还没有很好的支持）

使用伪元素来提供`background-image`允许`opacity`使用并将整个东西保持为纯 css，*但它不起作用`webkit`*（显然不支持伪元素上的动画），仅在`moz`扩展上（我无法测试 IE10 ...对此的反馈会有所帮助）。比较 Firefox 和 Chrome 的[这个 fiddle](http://jsfiddle.net/2VdAu/2/)，它使用了这个代码：

**HTML**

```
<div class="bkgAnimate">Foreground text</div> 
```

**CSS**

```
.bkgAnimate {
    width: 300px; /*only for demo*/
    height: 200px; /*only for demo*/
    position: relative;
    z-index: 1; /* make a local stacking context */
}

.bkgAnimate:after {
    content: '';
    position: absolute;
    top:0;
    right: 0;
    bottom: 0;
    left: 0;
    background: url(src="your/image/path/file.png") no-repeat;
    z-index: -1;  
    -webkit-animation: fontbulger  3s infinite;
    -moz-animation:    fontbulger  3s infinite;
    -ms-animation:     fontbulger  3s infinite;
}
@-webkit-keyframes fontbulger {
    0%   { opacity: 1; }
    30%  { opacity: 0.5; }
    100% { opacity: 1; }
}
@-moz-keyframes fontbulger  {
    0%   { opacity: 1; }
    30%  { opacity: 0.5; }
    100% { opacity: 1; }
}
@-ms-keyframes fontbulger  {
    0%   { opacity: 1; }
    30%  { opacity: 0.5; }
    100% { opacity: 1; }
} 
```

## 2\. 杂乱无章的 HMTL 解决方案（更跨浏览器友好）

更改为将实际`img`标签作为背景放置似乎是唯一`webkit`的行为方式，正如[这个小提琴所示](http://jsfiddle.net/2VdAu/7/)。但这可能不适合您。代码与上面类似，除了：

**HTML**

```
<div class="bkgAnimate">Foreground text 
  <img class="bkg" src="your/image/path/file.png"/>
</div> 
```

**CSS 从上面改变**

`:after`将选择器更改为并从该代码`.bkgAnimate .bkg`中删除`content`and属性。`background`

# php - 在干草堆中显示模式

> ID：10475091
> 
> 赞同：0
> 
> 时间：2012-05-06T23:15:54.513
> 
> 标签：php, regex, string, variables

有没有办法返回从输入变量中找到的模式，并可能添加突出显示变量中的模式？（例如，对于 Regex，返回带有找到的模式的输入变量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:25:31.700

虽然您的问题有点不清楚，但听起来您只想以某种形式突出显示或标记，或以某种形式显示较大字符串的子字符串（或者可能是模式）。有很多方法可以解决这个问题，尤其取决于您要搜索的子字符串/模式，但这里有一个简单的示例：

```
$input = "There is a pattern in this string. Mark the pattern.";

// There is a <em>pattern</em> in this string. Mark the <em>pattern</em>
echo preg_replace( "/(pattern)/", "<em>$1</em>", $input ); 
```

当然，这只是用修改后的版本替换模式，返回完整的字符串。其他函数，例如`preg_match`或`preg_match_all`可以返回匹配模式的数组。同样，这完全取决于您的确切需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T23:19:33.683

尝试使用 preg_match

```
preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] ) 
```

[http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)

# c# - 无法清除“altRecipient”属性

> ID：10475093
> 
> 赞同：0
> 
> 时间：2012-05-06T23:16:11.877
> 
> 标签：c#, active-directory, directoryservices

我似乎在清除 Active Directory 中的“altRecipient”属性时遇到了问题。当我运行我的程序时，它执行并成功返回，但是当我检查 ADUC 或 ADSI Edit 时，该属性没有被清除。以下是我尝试清除属性的方式：

```
termUser.Properties["altRecipient"].Clear(); 
```

我还尝试使用以下方法清除该属性：

```
termUser.Properties["altRecipient"].Value = null; 
```

如果我在“ipPhone”属性上使用 Clear() 方法，它会按预期工作。我在 ADSI Edit 中看到的“ipPhone”属性和“altRecipient”属性之间的唯一区别是“ipPhone”是*Unicode 字符串*语法，而“altRecipient”属性具有可*分辨名称*语法。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:46:55.350

感谢您的回复 JPBLanc。我尝试了“deliverAndRedirect”属性，但仍然有问题。我有一个方法，总共设置了三个属性，并且有

```
termUser.CommitChanges(); 
```

最后被调用。我最终打电话

```
termUser.CommitChanges(); 
```

两次，一次之后

```
termUser.Properties["altRecipient"].Clear(); 
```

并在设置其他两个属性后再次。它现在似乎正在工作......谢谢您的帮助！

# php - MySQL Query 选择除最近日期时间以外的所有日期时间

> ID：10475098
> 
> 赞同：1
> 
> 时间：2012-05-06T23:16:58.330
> 
> 标签：php, mysql

我的数据库表中有一行是日期时间。我怎样才能只对除一个（最近的）之外的所有行编写查询。

我会用

```
ORDER BY col_name DESC LIMIT 1 
```

如果我只选择最新的.. 但我实际上需要除最新的以外的所有内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:28:16.410

只需选择除第一行以外的所有行：

```
ORDER BY col_name DESC LIMIT 1, 18446744073709551615 
```

见[13.2.9。`SELECT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)解释`LIMIT`子句的[语法。](http://dev.mysql.com/doc/refman/5.5/en/select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:39:12.050

标题说：

> MySQL Query 选择除最近日期时间以外的所有日期时间

如果有重复的日期，你将不得不去：

```
select * from t
where val != (select max(val) from t); 
```

这是因为如果有 2 个最大值，则 limit 只会过滤第一个，而您将在结果集中获得另一个最大值。

# c# - 客户端或服务器端 dom 附加哪个更快？

> ID：10475099
> 
> 赞同：1
> 
> 时间：2012-05-06T23:17:00.137
> 
> 标签：c#, javascript, ajax, asp.net-mvc-3

在 asp.net mvc3 视图中，我有一个`$.get()`对控制器操作的 ajax 调用，该操作返回 80 行 html 代码。在服务器端创建 dom 元素然后只传递一个要附加到 DOM 的巨大元素是否更快（从`.get`调用到完成渲染），还是将大量原始数据传递给客户端更快边然后做所有的DOM创建和追加那里？

返回（或生成）的 html 创建了一个仪表板，其中包含大约 5 层嵌套的 div、一些跨度、文本等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:19:30.907

我建议您进行自己的基准测试，因为这取决于很多因素，例如您的受众设备（计算机/移动设备）、互联网速度、数据计划等。首先了解您的目标受众，然后做更好的事情。

返回格式化的 HTML 会占用大量流量，但允许您将其直接附加到 DOM。这对于使用宽带的笔记本电脑/台式机的人来说很好。

返回原始数据更快，但会让您在现场创建 DOM。但是，这通常适用于具有基于传输数据量付款的合同的高性能机器或移动设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T23:39:43.503

这两种方法完成的主要 CPU 工作是解析 HTML、生成 DOM 并将其绘制在屏幕上。在服务器上准备响应并不能逃避这一点。您不能在服务器上创建 DOM 或在服务器上执行此工作。

所以问题是客户端上的字符串连接与服务器上的字符串连接并通过网络发送。这是一种不费吹灰之力的事情。

# c++ - C++ 分配节点指针

> ID：10475101
> 
> 赞同：2
> 
> 时间：2012-05-06T23:17:20.267
> 
> 标签：c++, pointers, nodes

我正在使用不相交集和联合/查找操作制作一个 C++ 迷宫程序。

我有一个`MakeSet(int x)`函数，它为迷宫中的每个整数元素 x 创建一个新节点。（即`1 to 16`对于 4x4 迷宫）。因此，最初每个元素都在自己的集合中。

我的 MakeSet 看起来像这样

```
void Maze::MakeSet(int x)
{
    Node *root = new Node;
    root->label = x;
    root->parent = NULL;
} 
```

但是在 CreateMaze() 函数中，我必须多次调用 MakeSet 才能将所有元素最初放入它们自己的集合中。因此，根将继续被覆盖。如何动态分配许多不同的节点？我应该把它们分开放在一个数组中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:22:04.277

你已经*分配*了一个新的`Node`，你只是没有*保留*它。您需要将函数更改为 return `Node*`，并将结果存储在数组或向量中。

```
Node* Maze::MakeSet(int x) {
    Node *root = new Node;
    root->label = x;
    root->parent = NULL;
    return root;
}

Node *nodes[16];
for (int i = 0 ; i != 16 ; i++) {
    nodes[i] = Maze::MakeSet(i);
} 
```

更好的方法是在*构造*`Node`函数中进行初始化：

 *```
Node::Node(int x) : label(x), parent(NULL) {
} 
```

您现在可以在循环中创建所有集合，并将指向它们的指针存储在数组中：

```
Node *nodes[16];
for (int i = 0 ; i != 16 ; i++) {
    nodes[i] = new Node(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:22:29.243

您可以将`std::vector`对象`Node`或指针作为类成员：

```
class Maze
{
   std::vector<Node> nodes;
}; 
```

或者，如果你必须

```
class Maze
{
   std::vector<Node*> nodes;
} 
```

并添加创建的节点：

```
void Maze::MakeSet(int x)
{
    Node *root = new Node;
    root->label = x;
    root->parent = NULL;
    nodes.push_back(root);
} 
```

请注意，您必须在完成后实现一个析构函数来清理内存。这也意味着您应该有一个复制构造函数和赋值运算符`Maze`。*

# xcode - XCode 失去了从 xib 到 .h 文件的关联 (MonoTouch)

> ID：10475120
> 
> 赞同：4
> 
> 时间：2012-05-06T23:20:31.937
> 
> 标签：xcode, xamarin.ios

当我在 XCode 中编辑 XIB 时，我没有在助手编辑器窗口中显示关联的 .h 文件。其他 XIB 的工作正常。

这是一个问题，因为这是我通过拖动到助手窗口来创建网点的方式。如果我在另一个窗口中手动打开 .h 文件，我也无法以这种方式关联插座。.h 文件存在。

另外，我的项目是 MonoTouch，因此我从 MonoTouch 调用文件的打开。我认为这是源自 MonoTouch 而不是 Xcode 的问题。

有人请帮忙，否则我很快就会被迫学习Objective C并退出这个MonoTouch业务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T00:38:03.543

有时会有不同的解决方案，例如当控制器文件被重命名时。

发生这种情况时，使用源代码控制编辑器编辑 .XIB 文件（右键单击 .xib，打开方式->源代码控制编辑器），并确保对控制器名称的所有引用都是正确的，并且路径和名称.h 文件是正确的。

具体查看“IBClassDescriber”元素。“IBPartialClassDescription”元素下的“className”和“IBClassDescriptionSource”元素下的“minorKey”必须正确。MT 将生成一个与控制器同名的.h 文件。

进行更改后，保存文件，选择 Build->Clean All，然后双击 .XIB 文件以在 XCode 中打开它。

它可能对你有用，也可能对你不起作用，但当其他一切都失败时，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:51:11.203

正如 Stuart 在他的评论中提到的，删除包含 .xib 文件的项目下的 /obj 文件夹，强制 MT 重新生成 .h 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:32:13.303

遇到同样的问题，删除 /obj 目录并重新启动就可以了。

MonoDevelop 3.0.3.5 和 XCode 4.4。

当我在第一个 MonoDevelop iOS Helloworld 教程中遇到问题时，我感到相当困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-27T11:21:42.997

就我而言，当我根据文件位置更改 .cs 视图控制器文件中的命名空间时，出现了此问题。但在那之后，我发现了这个问题。当我将命名空间返回到不正确的变体时，我取回了我的 .h 文件。

**更新**：您需要更改 view.cs 和 view.designer.cs 中的命名空间，然后 Xcode .h 文件将正确生成。

# .htaccess - 如何强制浏览器使用 .htaccess 下载目录中的所有文件类型？

> ID：10475122
> 
> 赞同：2
> 
> 时间：2012-05-06T23:21:37.360
> 
> 标签：.htaccess

我如何告诉浏览器强制下载目录中的所有文件类型，而不是在浏览器中呈现它们？我试过这个，但没有用。

```
<Files *.*>
ForceType applicaton/octet-stream
</Files> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T14:06:41.623

这将更好地负责：

```
<Files *.*>
Header set Content-Disposition attachment
</Files> 
```

我将它与 a`FilesMatch`而不是`Files`. 以下是基于文本的文件的示例

```
<FilesMatch "\.(?i:doc|odf|pdf|rtf|txt)$">
  Header set Content-Disposition attachment
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:25:19.443

我不确定这是可能的。但是您可以使用 mod_rewrite 对 .php 文件使用 URL 的 GET 部分中的文件名。然后提取文件名并通过它强制下载。如果您想要一些下载代码，请询问

# c# - 为什么在 WPF 中将 INotifyPropertyChanged 与绑定一起使用？

> ID：10475130
> 
> 赞同：11
> 
> 时间：2012-05-06T23:22:41.830
> 
> 标签：c#, wpf, binding

我注意到实际上我在互联网上找到的每个关于绑定的示例都有一个类（它绑定到另一个属性），它继承了 INotifyPropertyChanged 接口并在类属性的 set 部分中使用了一个方法。

我已经尝试从绑定示例中删除该部分，它的工作方式与使用该方法相同。

这是示例。我已对其进行了更改，使其成为双向绑定模式并在消息框中显示更改的属性。

我这样做只是为了玩一点绑定，但现在我真的不知道为什么要使用那个接口

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="40"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="30"/>
        </Grid.ColumnDefinitions>
        <Button Grid.Row="5" Grid.Column="5" Name="btnBinding" Click="btnBinding_Click" Width="100" Height="30">
            <Grid HorizontalAlignment="Left" VerticalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="25"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <TextBox Name="txtBinding" Width="30" Height="25" HorizontalAlignment="Left"/> 
                <Label Grid.Column="1" Content="Bind"/>
            </Grid>
        </Button>
        <Button Grid.Column="5" Grid.Row="6" Name="btnMessage" Click="btnMessage_Click" Content="MessageBox"/>
        <Button Grid.Column="5" Grid.Row="4" Name="btnChangeproperty" Click="btnChangeproperty_Click" Content="Change Property"/>
    </Grid>
</Window> 
```

主要.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        Binding bind;
        MyData mydata;
        public MainWindow()
        {
            InitializeComponent();
        }

        private void btnBinding_Click(object sender, RoutedEventArgs e)
        {
            mydata = new MyData("T");
            bind = new Binding("MyDataProperty")
            {
                Source = mydata,
                Mode = BindingMode.TwoWay
            };

            txtBinding.SetBinding(TextBox.TextProperty, bind);
        }

        private void btnMessage_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show(mydata.MyDataProperty);
        }

        private void btnChangeproperty_Click(object sender, RoutedEventArgs e)
        {
            mydata.MyDataProperty = "New Binding";
        }
    }
} 
```

MyData 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace WpfApplication1
{
    public class MyData 
    {
        private string myDataProperty;

        public MyData() { }

        public MyData(DateTime dateTime)
        {
            myDataProperty = "Last bound time was " + dateTime.ToLongTimeString();
        }

        public MyData(string teste)
        {
            myDataProperty = teste;
        }

        public String MyDataProperty
        {
            get { return myDataProperty; }
            set
            {
                myDataProperty = value;
                OnPropertyChanged("MyDataProperty");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string info)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(info));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T23:28:37.527

`INotifyPropertyChanged`如果您只打算使用绑定*写入*属性（如您所见），则不需要它，但您确实需要它，以便您可以告诉*其他人*写入该属性并相应地更新显示的值。

要了解我在说什么，请在窗口中添加一个按钮，单击该按钮直接更改绑定属性的值（*而不是*绑定到该属性的 UI 元素的相应属性）。使用`INotifyPropertyChanged`，当您单击按钮时，您将看到 UI 自行更新为新值；没有它，用户界面仍将显示“旧”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:53:54.397

从这里的讨论来看，我认为你错过了实施

```
RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(“Propety Name”)) 
```

一旦实现，您可以看到 UI 正在自动更新。[您可以在 MSDN 上查看详细信息或在我的博客](http://surpavan.blogspot.in/2012/05/inotifypropertychanged-vbnet-simple-way.html)上查看简短版本。

# algorithm - F# 中的回溯算法：不变性如何工作？

> ID：10475131
> 
> 赞同：2
> 
> 时间：2012-05-06T23:23:11.867
> 
> 标签：algorithm, f#, immutability, mutable, backtracking

好的，所以我正在尝试编写一个回溯算法，它可以接受如下输入：

```
0 2 3 1 (top-right location, length, horizontal or vertical)
1 0 4 0
2 2 4 0
1 3 3 1
top (the actual words)
that
toga
cat 
```

并吐出一个填字游戏，例如：

```
**c***
that**
**toga
***p** 
```

到目前为止我的代码是：

```
//prints the puzzle
let printPuzzle (puzzle : char[,]) =
    printfn "%s" ""
    printfn "%A" puzzle
    printfn "%s" ""

//checks if the words fits
let rec doesItFit place (puzzle : char[,]) (word : seq<char>) =
    let (row, col, length, isVertical) = place
    if length <> (Seq.length word) then
        (puzzle, false)
    else
        match (Seq.toList word) with
        | [] -> (puzzle, true)
        | letter::rest ->
            printfn "%c" letter
            printPuzzle puzzle
            if isVertical = 0 then
                if puzzle.[row, col] = '*' || puzzle.[row, col] = letter then
                    puzzle.[row, col] <- letter
                    doesItFit (row, col+1, length-1, isVertical) puzzle rest 
                else
                    (puzzle, false)
            else
                if puzzle.[row, col] = '*' || puzzle.[row, col] = letter then
                    puzzle.[row, col] <- letter
                    doesItFit (row+1, col, length-1, isVertical) puzzle rest   
                else
                    (puzzle, false)

//the actual backtracking algorithm... goes through all places and all words
//trying to make stuff fit
let rec sort words places (puzzle : char[,]) =
    match places with
    | [] -> (puzzle, true)
    | place::rest ->
        let rec checkWords words place puzzle =
            match words with
            | [] ->
                printfn "%s" "failure, backtracking" 
                puzzle, false
            | word::otherWords ->
                let attempt = doesItFit place puzzle word
                if snd attempt then
                    printfn "%s" "success, entering if block"
                    let nextLevel = sort words rest (fst attempt)
                    if (snd nextLevel) then
                        nextLevel
                    else
                        checkWords otherWords place puzzle
                else
                    checkWords otherWords place puzzle
        checkWords words place puzzle

//line for testing
printPuzzle (fst (sort ["cat"; "that"; "toga"; "top"] [(0, 2, 3, 1); (1, 0, 4, 0); (2, 2, 4, 0); (1, 3, 3, 1)] (Array2D.create 6 6 '*')));; 
```

这是运行测试行的输出：

```
c

[['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

a

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['*'; '*'; 'a'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

success, entering if block
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['*'; '*'; 'a'; '*'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

h

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; '*'; 'a'; '*'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

a

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; '*'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; '*'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

success, entering if block
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

h

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

a

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

success, entering if block
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

o

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

failure, backtracking
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

o

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

failure, backtracking
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

o

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

failure, backtracking
t

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']]

failure, backtracking

[['*'; '*'; 'c'; '*'; '*'; '*']
 ['t'; 'h'; 'a'; 't'; '*'; '*']
 ['*'; '*'; 't'; 'h'; 'a'; 't']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']
 ['*'; '*'; '*'; '*'; '*'; '*']] 
```

我*认为*我的问题是我不确定 F# 中的不变性是如何工作的。从我的程序所做的看来，当拼图在尝试失败后传入时，拼图已被修改。这对我来说没有多大意义，因为我认为 F# 不会让它被修改。我想要解释为什么这段代码在回溯后测试单词时使用修改后的谜题，而不是原始的、未修改的谜题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T23:33:07.920

您的代码使用可变数组`char[,]`来表示拼图，因此当您在`doesItFit`函数中对其进行变异（使用`<-`运算符）时，您实际上是在更改对象的状态。当代码从`doesItFit`函数返回时，数组已经改变。

解决问题的方法主要有以下三种：

*   使用不可变类型来表示谜题 - 如果你使用 F# list（列表列表）来表示谜题，那么你不能改变它（因为列表是不可变的），所以你不会陷入这种情况

*   根据需要克隆对象 - 您不必使用不可变类型来编写函数式代码。只需在将数组传递给可能对其进行变异的函数之前克隆数组。你可以使用`Array.copy`它。

*   恢复回溯前的状态 - 当函数失败时，它应该撤消所有修改
    （这不是纯粹的函数方法，但它可能更有效 - 将其视为优化）

# c# - Windows 窗体 XML 序列化加载对话框

> ID：10475134
> 
> 赞同：0
> 
> 时间：2012-05-06T23:23:33.373
> 
> 标签：c#, xml, windows, forms, loading

我有一个保存/加载 XML 文件的 Windows 窗体，它会询问用户他们想在哪里保存/加载它。我的问题是我不知道如何更改此方法以从用户想要的位置加载文件，而不是从流读取器指定的位置加载文件。

下面的代码是我的按钮和 LoadValues 方法。

```
private void Edittask_loadbuttonClick(
    object sender, EventArgs e)
{
    Stream myStream = null;
    var sFile1 = new OpenFileDialog();

    sFile1.InitialDirectory = "c:\\";
    sFile1.Filter = "xml files (*.xml)|*.xml";
    sFile1.FilterIndex = 2;
    sFile1.RestoreDirectory = true;

    if (sFile1.ShowDialog() == DialogResult.OK)
    {
        try
        {
            if ((myStream = sFile1.OpenFile()) != null)
            {
                using (myStream)
                {
                    var v = LoadValues();
                    this.load_task1_name.Text =
                        v.task1_name;
                    this.load_task1_desc.Text =
                        v.task1_desc;
                    this.load_task1_date.Value =
                        v.task1_date;
                    this.load_checkbox.Checked =
                        v.task1_checkbox;
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(
                "Error: Could not read file from disk. Original error: " +
                ex.Message);
        }
    }
}

public Values LoadValues()
{
    var serializer = new XmlSerializer(typeof (Values));
    using (
        TextReader textReader = new StreamReader(
                                    "E:\\hello.xml")
    )
    {
        return
            (Values) serializer.Deserialize(textReader);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:27:53.523

我会将 OpenFileDialog 中的 Stream 传递给 LoadValues(...)，并使用它来构造您的 StreamReader：

```
public Values LoadValues(Stream stream)
{
   XmlSerializer serializer = new XmlSerializer(typeof(Values));
   using (TextReader textReader = new StreamReader(stream))
   {
      return (Values)serializer.Deserialize(textReader);
   }
} 
```

和

```
if ((myStream = sFile1.OpenFile()) != null)
{
   using (myStream)
   {
      Values v = LoadValues(myStream);
      ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:27:44.747

您需要将`Stream`作为参数传递给您的函数。

# javascript - 防止 iframe 安全问题

> ID：10475135
> 
> 赞同：0
> 
> 时间：2012-05-06T23:23:37.437
> 
> 标签：javascript, security

如此处所述[http://blogs.gartner.com/avivah-litan/2010/04/22/watch-out-transaction-signing-is-being-socially-engineered/](http://blogs.gartner.com/avivah-litan/2010/04/22/watch-out-transaction-signing-is-being-socially-engineered/)

> 被泄露的交易签名的工作方式是，一旦网上银行用户发起支付请求，银行会要求用户在专用的带外 EMV CAP 阅读器上使用用户的 EMV 签署他/她的交易芯片卡已插入。要求用户在阅读器上输入某些代码和值，以确认要转移的货币金额和要转移到的帐户。
> 
> 骗子们知道交易签名何时开始，只需在用户浏览器顶部放置一个 iframe，更改要输入的值，以便用户最终将欺诈者的银行账户输入为目标账户，而不是一个他们打算。
> 
> 在交易签名方面需要考虑的事情——证明需要将整个过程保持在 PC 之外（在这种情况下）并完全在另一个通道上。

你能解释一下如何“在用户的浏览器上放置一个 iframe”以及如何从技术上防止这种欺诈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:49:25.177

从报价中并不清楚，但听起来他们在谈论消费者端点妥协。用户获取了银行家木马，因此他们的 PC 已成为可显示误导性信息的不受信任的设备。在这种情况下，木马运营商更改了显示的目标帐号，以便资金流向与用户认为他们正在贷记的另一方不同的一方。

关键是用于做出安全决策的完整用户界面必须驻留在受信任的设备上。从 PC 向安全设备输入信息使用户有机会检查信息是否正确，就像在屏幕上显示已授权信息的设备一样。

但是有一个缺失的部分是消费者通常不知道他们输入的帐号确实是他们想要贷记的一方的帐号。除非他们之前曾与该方进行过多次交易，这样他们才能记住帐号并在错误时发现它（即使那样也不一定会引起注意）。

要纠正这个问题，帐户 ID 必须是可识别的，例如控制发行的域名，而不是任意数字。但是，这会给您必须键入信息的任何独立设备带来问题，因为它需要一个全尺寸键盘。您可以使用仅显示设备来执行此操作，例如德国的 TAN 生成器，它可以从屏幕上读取信息，或者您可以使用非常长的帐号来执行此操作，该帐号解码为可读的内容，签名以防止未经授权的更改。

一旦整个决定发生在安全设备上，包括转账金额和*用户可验证*的目的地，不受信任的中介（你的电脑作为中间人）的问题就解决了，交易是安全的。

尽管该信息不包括交易的*目的*，但您仍然可以想象这样的攻击：经销商更改了您在特定商店购买的实际商品，而不改变成本！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:31:45.020

这是 XSS（跨站点脚本）攻击的示例。

比如说 Friendster，它之前有很多 XSS“漏洞”，尤其是在个人资料页面中。我可以在我的个人资料页面中注入一个脚本，让我的页面看起来像一个登录页面。

一旦另一个用户查看我的个人资料，它看起来就像一个 Friendster 登录页面！然后用户输入他的用户名和密码*，却不知道这是一个欺诈页面*。输入的值将被路由到我的服务器进行存储，而用户被重定向到实际页面。

实际上，用户从未注销过。*让用户相信*这是一个合法的页面，并被要求透露帐户详细信息。

* * *

为防止这种情况，您不应允许任意 HTML 以及脚本通过您的站点。攻击的入口点很多，通常是没有经过彻底验证的输入框。如果页面上存在注入脚本，则事件 SSL 的站点是不安全的。

# javascript - 在悬停打开 DIV 时，DIV 内容应从单独的 URL 动态加载

> ID：10475144
> 
> 赞同：2
> 
> 时间：2012-05-06T23:24:38.933
> 
> 标签：javascript, jquery, html

我确定有人已经这样做并在网上发布了，但我找不到这样的示例或教程。

基本上，我想在页面上有一系列链接。如果您将鼠标悬停在链接上，它应该会在链接下方打开一个下拉 DIV 框，然后将内容从预定义的远程 URL 加载到 DIV 中。

有没有人见过这样的实现，或者对如何使用 jQuery 来实现它有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:32:25.587

我认为您正在寻找类似的东西：

```
$(document).ready(function(){
    $("a").hover(function(){ //When a given link (<a> tag) is hovered over
       $("div").load(this.href).show(); //load the src of that tag into a given div container.
    });
}); 
```

这是 jsFiddle 中的一个简单测试，但我不知道用 href 放什么...所以你会看到 div 出现后错误...不是很漂亮，但如果有人有建议，那么我'我绝对向所有人开放。

[http://jsfiddle.net/ChaseWest/VEuH9/2/](http://jsfiddle.net/ChaseWest/VEuH9/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:44:09.630

我会选择以下内容。请注意，我们只针对没有`loaded`课程的锚点。原因是我们不想多次加载任何锚的内容。每当用户通过一个锚点时，它的内容就会被加载，并且会得到一个特殊的类来表明这一点。如果他们再次通过它，什么都不会发生。

```
$("body").on("mouseenter", "a:not(.loaded)", function(e){
  $(".mydiv").load(e.target.href, function(){
    $(e.target).addClass("loaded");
  });
}); 
```

# css - 多个 div 的 100% 最小高度？

> ID：10475150
> 
> 赞同：0
> 
> 时间：2012-05-06T23:25:37.087
> 
> 标签：css

例如，如果我在单页布局中具有以下结构：

```
<div id="container">
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
<div id="div4"></div>
</div> 
```

是否可以单独使用 CSS 将 div 1-4 的最小高度设置为 100%，并将每个 div 置于另一个之下？我创建了一个页面，其中每个 div 的高度为 100%，但是当 div 的内容长于浏览器窗口时就会出现问题。似乎有很多最小高度 100% 相关的文章，但我还没有找到涉及多个 div 的文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:45:06.390

为了`height`或`min-height`在元素上正确工作，元素的父元素需要显式`height`声明。这在您的 DOM 树中一直向上。

据我所知，渲染一个或多个具有最小高度的 div 元素应该没有区别，所以是的，可以单独使用 CSS 进行定位。

有关更多详细信息，请参阅[百分比高度 HTML 5/CSS](https://stackoverflow.com/q/1622027/859762)

# ruby-on-rails - 活动管理员和 Mongoid

> ID：10475151
> 
> 赞同：1
> 
> 时间：2012-05-06T23:25:57.357
> 
> 标签：ruby-on-rails, mongoid, activeadmin

我目前正在为我的 Rails 应用程序的管理端使用 Active Admin。我也在使用 Mongoid 连接到 MongoDB。

在这个问题上，我有球队和球员。玩家被分配到一个团队。在我的活动管理表单中，我有：

```
f.input :team_id, :as => :select, :collection => Team.all,:member_label => (:name), :member_value => :id 
```

问题是团队对象的 id 是 BSON::Object(id) 而不仅仅是 id。Active Admin 不会将该 ID 保存为对象 ID。只要我能按团队拉出球员就可以了。

我正在尝试做

```
players = Player.where(:team_id => @team.id.to_s) 
```

那是行不通的。

如果 teamA.id = BSON::Object("asdf1234") 和 playerA.team_id = "asdf1234"

我需要以某种方式发出 mongoid 查询以提取具有 team_id="asdf1234" 的玩家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:06:01.467

我认为 ActiveAdmin 仅适用于 ActiveRecord，如果您想使用 Mongoid，请改用： [https ://github.com/elia/activeadmin-mongoid](https://github.com/elia/activeadmin-mongoid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:13:54.400

在使用 activeadmin-mongoid 之前，您需要翻译所有主键/外键以使用 BSON::ObjectIds 而不是无法使用的纯数字。我为此使用了monify。 [http://mongify.com/](http://mongify.com/)

# ruby-on-rails - 使用 Pony gem 模板

> ID：10475152
> 
> 赞同：0
> 
> 时间：2012-05-06T23:26:04.750
> 
> 标签：ruby-on-rails, email, actionmailer, pony

我最近发现通过 Rails 发送电子邮件。看了railcast，好像可以在使用Action Mailer的时候写个模板。我真的很喜欢这个功能。我还遇到了 Pony，它看起来真的很容易使用。

我想知道我是否可以使用模板通过 Pony 发送电子邮件，除非 Pony 用于表达非模板电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-13T17:54:18.870

您可以通过显式渲染模板轻松访问视图框架：

```
Pony.mail(
  :to => 'somewhere@example.com',
  :from => 'sender@other.example.com',
  :subject => 'an example',
  :body => render_to_string("path/to/_partial", :locals => {foo: @foo}, :layout => false)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:07:57.600

在我的研究中，Pony 似乎被宣传为一种非基于模板的工具，使其使用起来“更简单”。该实用程序的主页根本没有提到模板： [https ://github.com/benprew/pony](https://github.com/benprew/pony)

# mysql - 在 NOT IN mysql 中使用字符串

> ID：10475156
> 
> 赞同：0
> 
> 时间：2012-05-06T23:26:54.453
> 
> 标签：mysql

我有这个

```
$sql=mysql_query("SELECT EMAIL FROM USERNAME WHERE EMAIL <> '".$_REQUEST['EMAIL']."' AND EMAIL NOT IN (".$str.")") or die("Error: ". mysql_error(). " with query ". $sql); 
```

例如 $str 保存值 'd','f' 并且在我的表的 EMAIL 列中有 ad 和 f。

当我运行查询时，我收到此错误“错误：带有查询的‘where 子句’中的未知列‘d’”

我完全是 mysql 的菜鸟，所以我希望我只是在这里遗漏了一些非常基本的东西。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:30:10.750

那里有很好的[SQL 注入](http://bobby-tables.com)孔。享受您的服务器 pwn3d。

`IN`语法可以作为

```
WHERE field IN (value1, value2, value3, ...) 
```

或者

```
WHERE value IN (field1, field2, field3, ...) 
```

鉴于您得到的是 'no such `d`，您可能忘记引用这些值，从而产生

```
WHERE field IN (d, f) 
```

它被解释为“字段 d”和“字段 f”，它应该是：

```
WHERE field IN ('d', 'f') 
```

注意引号 - 它们将那些 d 和 f 转换为字符串，而不是字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:34:11.663

您在*NOT IN*部分之后缺少单引号。它应该是：

```
$sql = mysql_query("
        SELECT EMAIL FROM USERNAME WHERE EMAIL <> '".$_REQUEST['EMAIL']
        ."' AND EMAIL NOT IN ('".$str."')"
    ) or die("Error: ". mysql_error(). " with query ". $sql); 
```

此外，正如 Marc 指出的那样，您最好在要放入查询中的客户端变量上使用[mysql_real_escape_string() 。](http://www.php.net/manual/en/function.mysql-real-escape-string.php)

# css - /images 或 /inc/css 链接在 CodeIgniter 子文件夹中不起作用

> ID：10475158
> 
> 赞同：1
> 
> 时间：2012-05-06T23:27:22.193
> 
> 标签：css, image, codeigniter, hyperlink, subdirectory

我在 www.mydomain.com/test 的 Godaddy 子域上安装了 CI 我的主页加载以及指向我的 /news 页面的链接

我遇到的问题是我无法加载任何图像或加载我的 CSS 文件。我通过以下方式从我的头文件中调用我的 CSS：

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url() ?>inc/css/base.css" media="all"/> 
```

我通过以下方式调用我的标题图片：

```
<img src="images/logo.png"> 
```

当我右键单击 X 图像应该在的位置时，然后选择在新选项卡中打开，这样我就可以看到它指向的 url... 看起来不错。 [http://mydomain.com/test/images/logo.png](http://mydomain.com/test/images/logo.png)

我回应了我的 site_url 和 base_url，它们似乎配置正确，指向： [http ://www.mydomain.com/test/](http://www.mydomain.com/test/)

我的结构是：/test

1 索引.php

2 .htaccess

3 /系统

4 /应用

*   /控制器
*   /图片
*   /inc
    --- /css
    --- /js
*   /意见

在查看了 stackoverflow 问题之后...我将位于 www.mydomain.com/test 文件夹中的 .htaccess 粘贴到 CI 中：

```
RewriteEngine On
RewriteBase /test

RewriteCond %{REQUEST_URI} ^system.*
RewriteCond $1 !^(index\.php|images|robots\.txt)

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /test/index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

我的 config.php 是：

$config['base_url'] = 'http://www.mydomain.com/test/';

$config['index_page'] = "";

$config['uri_protocol'] = "AUTO";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:52:28.973

我对你的代码做了一个小的改动。

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url('inc/css/base.css'); ?>" media="all"/> 
```

概念：`base_url()`返回您在配置文件中指定的站点基本 URL。例子：

```
echo base_url(); 
```

此函数返回与 相同的内容`site_url`，但不附加 index_page 或 url_suffix。

同样`site_url`，您可以将段提供为字符串或数组。这是一个字符串示例：

```
echo base_url("blog/post/123"); 
```

上面的示例将返回如下内容：

> `http://example.com/blog/post/123`

更多详细信息，您可以阅读 CodeIgniter 网站上的 URL 帮助器指南：[URL 帮助器指南](http://codeigniter.com/user_guide/helpers/url_helper.html)

# file - sed 在多行匹配后追加

> ID：10475166
> 
> 赞同：2
> 
> 时间：2012-05-06T23:28:40.927
> 
> 标签：file, sed, patch

我得到了一些看起来像这样的代码：

```
lots of code... 
start(){
  some code...
  if mountpart "$1" /mnt -w ; then
  some code...
}
lots of code... 
```

我现在想在`if mountpart "$1" /mnt -w ; then`使用`sed`. 由于`if mountpart "$1" /mnt -w ; then`存在多次，我不能简单地在每次匹配后附加新代码。它应该只在第一次出现之后插入`start() { }`

使用它是个好主意`sed`吗？或者执行此类更改的适当工具是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:57:37.917

一旦你需要开始跟踪状态（例如，我在文件中的什么位置？到目前为止我看到了什么？），我通常会从 sed 切换到 perl。这是一个简单的单行代码来完成您需要的操作（将“NEW CODE”替换为您需要插入的新代码；替换`<filename>`为实际文件）：

```
perl -ne 'BEGIN{$state=0} print; if (/^\s*start\(\){/) {$state++;} if (/if mountpart "\$1" \/mnt -w ; then/) { if ($state==1) {print "NEW CODE\n"; $state++;} }'  <filename> 
```

简单分解一下： `-n`让 perl 工作起来有点像 sed；它会读取每一行并处理它，但是，除非你要求它，否则它不会打印该行；这让我们在（可能）输出新代码之前输出每一行。 `-e`使 perl 从命令行读取程序。获取程序并重新格式化它，并添加注释，我们得到：

```
// -n runs the program for every line of input
// but a BEGIN {} block only runs once, before input
BEGIN {
  //where are we in the input?
  // 0=no start() yet
  // 1=start() was seen
  // 2=we have output the new code; never do it again
  $state=0
} 

print;  // print the line we just read in, unchanged

if (/^\s*start\(\){/) {  //regex.  Did we see start(){ ?
  $state++;              //if so, change to next state
}

if (/if mountpart "\$1" \/mnt -w ; then/) {   //regex. did we see mountpart cmd?
  if ($state==1) {                            //if so, are we in the right state
    print "NEW CODE\n";                       //if so, output the new code
    $state++;                                 //...and change to next state 
                                              //...so we don't output new code 2x
  } 
} 
```

请注意，我们从不按名称引用该行......我们只是说“打印”来打印该行，并且正则表达式看起来像 sed 模式，我们假设我们正在匹配该行。这是因为`-n`将每一行读入 perl 的`$_`变量，这是 print 等函数的默认参数。这不是我编写大型 perl 程序的方式，但对于像这样的单行或简短的一次性修复脚本来说是合适的（并且是惯用的）。

您也可以`<filename>`像 sed 一样省略和流式传输输入，例如：

```
cat myfile.txt | perl -ne 'BEGIN...' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:28:17.097

我的 sed 脚本，patch.sed：

```
# replace your "if then" block inside start() by another pattern 
# to make it unrecognizable to sed in the next command
/^start(){/,/^}/!{s/if mountpart "$1" \/mnt -w ; then/outside_start/g}

# inside start(), append "NEW CODE" after "if then" block
/if mountpart "$1" \/mnt -w ; then/a\
NEW CODE

# recover your "if then" block outside start()
/^start(){/,/^}/!{s/outside_start/if mountpart "$1" \/mnt -w ; then/g} 
```

输入：

```
lots of code... 
if mountpart "$1" /mnt -w ; then
lots of code

start(){
  some code...
  if mountpart "$1" /mnt -w ; then
  some code...
}
lots of code...
if mountpart "$1" /mnt -w ; then 
```

运行：

```
sed -f patch.sed input 
```

输出：

```
lots of code...
if mountpart "$1" /mnt -w ; then
lots of code

start(){
  some code...
if mountpart "$1" /mnt -w ; then
    NEW CODE
some code...
}
lots of code...
if mountpart "$1" /mnt -w ; then 
```

您的“start(){”应该在一行的开头，“}”也应该与之匹配。这就是在你的 start(); 中匹配的方式。

如果没有脚本，您可以使用“-e”选项通过 sed 执行多次编辑。但要小心逃避$。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T08:53:35.623

这可能对您有用：

```
sed '/^start()/,/^}/!b;x;/./{x;b};x;/if mountpart "$1" \/mnt -w ; then/!b;h;a\  NEWCODE' file 
```

如果有很多`NEWCODE`，请将其放在一个文件中并运行它：

```
sed '/^start()/,/^}/!b;x;/./{x;b};x;/if mountpart "$1" \/mnt -w ; then/!b;h;r newcode.txt' file 
```

解释：

保持空间是备用寄存器。它可用于操作文本或（如在本例中）作为标志/开关以显示事件已经发生。

*   如果文本不在之间`start()`，则`}`退出`/^start()/,/^}/!b`
*   检查保留空间，如果里面有任何东西，就救出`x;/./{x;b}`
*   检查标记，如果没有退出`x;/if mountpart "$1" \/mnt -w ; then/!b`
*   将标记字符串作为状态开关放置在保持空间中`h`
*   附加/读取`NEWCODE` `a\ NEWCODE`或`r newcode.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T04:57:34.780

发射器：

```
@(collect)
@prolog
@(until)
start(){
@(end)
@(collect)
@inner
@(until)
  if mountpart "$1" /mnt -w ; then
@(end)
@(collect)
@epilog
@(end)
@(output)
@{prolog "\n"}
@{inner "\n"}
@{epilog[0]}
NEW TEXT
@{epilog[1..t] "\n"}
@(end) 
```

数据：

```
lots of code... 
  if mountpart "$1" /mnt -w ; then
lots of code

start(){
  some code...
  if mountpart "$1" /mnt -w ; then
  some code...
}
lots of code...
  if mountpart "$1" /mnt -w ; then 
```

跑：

```
$ txr insert.txr code.sh
lots of code... 
  if mountpart "$1" /mnt -w ; then
lots of code

start(){
  some code...
  if mountpart "$1" /mnt -w ; then
NEW TEXT
  some code...
}
lots of code...
  if mountpart "$1" /mnt -w ; then 
```

# css - 为什么浮动右 div 浮动在下一个 div 内？

> ID：10475168
> 
> 赞同：1
> 
> 时间：2012-05-06T23:29:12.097
> 
> 标签：css, html, css-float

我希望我不是css的初学者，但我不明白为什么会发生以下情况......

[你可以在这里](http://jsfiddle.net/prejR/)看到一个例子

我希望在同一“行”上显示 2 个分隔的 div：

*   第一个 div 必须 100% 宽度到第二个
*   第一个 div 最右边的第二个 div

所以，我做了以下

```
// CSS
.div2 {
    background:#EDEDED;
    float:right;    
}
.div1  {    
    background:#CCC;
}
.div1, .div2 {
    padding:4px;
    margin:4px;
}
.round {
    -webkit-border-radius:8px;
    -moz-border-radius:8px;
    border-radius:8px;
    border:1px solid #000;
}
// HTML
<div class="div2 round">Test 2</div>
<div class="div1 round">Test 1</div> 
```

但是 .div2 在第一个 div 里面... ![显示不良](../Images/5715de0646ae71fca010a8fe9eb72f36.png)

如何显示如下内容？（就像我认为它应该显示...） ![良好的显示](../Images/df91cb0204892dd3f614bb8a7f72618b.png)

任何帮助表示赞赏...

**编辑：解决方案** by [user570783](https://stackoverflow.com/users/570783/user570783)

```
.div1 {overflow:hidden;} 
```

像魅力一样工作，但没有真正记录，为什么这样有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:39:31.633

浮动做所说的。漂浮。因为东西可以在它下面。文本将被换行，但边框不会

如果你知道“Test 2”的宽度，你可以添加一个“margin-right: x;”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T00:45:42.467

好的，这里有很多解决方案，包括浮动、内联块、边距和边框，但都需要了解至少一个元素的大小。

然而！

你可以在这里做一个技巧。如果将 'overflow:hidden' 添加到第一个 div ，它将强制 div '[块格式化上下文](https://stackoverflow.com/questions/6196725/how-does-the-css-block-formatting-context-work)'

这将获得您所追求的结果，具有动态大小的右浮动元素。

要在 IE5 和 6 中进行这项工作，您需要在第一个元素上触发“hasLayout”，因此 position: relative;

[小提琴](http://jsfiddle.net/prejR/12/)

# jquery - 在图像悬停时显示文本 - 从 rel attr 获取字符串

> ID：10475171
> 
> 赞同：0
> 
> 时间：2012-05-06T23:30:08.847
> 
> 标签：jquery

不知道为什么这似乎不起作用，我可以通过 ID 使用硬编码字符串进行描述，但是当我尝试在全球范围内进行更多操作时，我无法让它正常工作。基本上，当您将鼠标悬停在图像上时，ap("desc") 会向下滑动并应在其中显示一个文本字符串。

HTML

```
<div id="awardCont" class="bottomBlock">
    <div id="award">
        <div class="trophy" rel="foo"></div>
        <div class="trophy"></div>
        <div class="trophy"></div>
        <p id="desc"></p>
    </div>
</div> 
```

我将不胜感激任何帮助。

JS

```
$(function() {
        $('.trophy').hover(function() {
            var copy = $(this).attr(rel);
            $('#desc').slideDown('fast').html(copy);
        }, function() {
            $('#desc').slideUp('fast');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:32:04.430

加上`rel`引号：

```
.attr('rel') 
```

# scheme - 如何从方案中的文件中删除单个字符？

> ID：10475182
> 
> 赞同：2
> 
> 时间：2012-05-06T23:32:30.587
> 
> 标签：scheme, racket

我有一个 txt 文件“blah.txt”，内容为

```
word 3 + 6 
```

现在考虑以下代码：

```
(define c (read-char file))
(define (toke c)
        (cond
         ((null? c)(write "empty"))

        ((equal? (read-char c) #\space)(write 'space)
         ;           (toke (with the next character)
         )
         ((equal? (read-char c) #\+) (write '+)
          ;              (toke (with the next character)
         )
        ((equal? (read-char c) #\-) (write '-)
          ;               (toke (with the next character)
         )
         ((equal? (read-char c) #\*) (write '*)
          ;               (toke (with the next character)
         )
         ((equal? (read-char c) #\/) (write '/)
          ;               (toke (with the next character)
         )
         ((equal? (read-char c) #\=) (write '=)
          ;               (toke (with the next character)
           )           
         ((equal? (read-char c) #\() (write 'LPAREN)
            ;             (toke (with the next character)
         )
         ((equal? (read-char c) #\)) (write 'RPAREN)
          ;               (toke (with the next character)
         )
         ((char-numeric? (read-char c)) (write 'Num)
          ;                  (toke (with the next character)
         )

         ((char-alphabetic? (read-char c))(write 'ID)
          ;                    (toke (with the next character)
         )
         (else
          (write "error")))) 
```

我不希望输出到文本文件。我只是希望能够继续下一个角色。我曾尝试解决它不成功。另外由于某种原因，我不断收到字符数字错误？和字符字母？告诉我，当我将文件另存为 3 a + r 时，我给了它 eof 而不是它所期望的（例如）

我知道这涉及将其更改为字符串，但我不断收到一串“单词 3 + 6”，但我无法做到（汽车）。让我再解释一下，我知道你可以做 (define list file->list "blah.txt") 将包含 '(word 3 + 4) 但然后做 (define str file->string "blah.txt" ）它将包含“word 3 + 4”，我不能（car str）将“word”取出，因为整个（car）是“word 3 + 4”，如果我不能正确解释自己，请原谅我，因为我我是新来的计划

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:37:42.660

使用 读取文件的内容`(file->lines "blah.txt")`，这将返回一个列表，文件的每一行都作为列表中的字符串。

之后，操作每一行就很简单了；例如，使用该过程`string->list`（请参阅[文档](http://docs.racket-lang.org/reference/strings.html)`cdr`）将一行转换为字符列表，并通过对列表进行 -ing迭代每个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T23:22:59.707

Racket（更一般地说，Scheme）提供了一种*端口*数据类型，允许您顺序访问文件或流。您可以从中*窥视*和*读取*单个字节。

这里有一些参考 Racket 文档：[Byte and String input](http://docs.racket-lang.org/reference/Byte_and_String_Input.html)。

作为这种扫描仪的一个示例，您可以查看我的关于制作基于 Racket 的语言的迷你教程的[第 6 节。](http://hashcollision.org/brainfudge/#%28part._.Parsing_the_surface_syntax%29)

请注意，字符串本身不是端口，但我们可以创建一个源来自字符串的端口。Racket 提供了`open-input-string`将字符串转换为输入端口的功能。所以你应该能够做这样的事情：

```
#lang racket
(define myport (open-input-string "hello"))

(printf "I see: ~s\n" (read-char myport))
(printf "I see: ~s\n" (read-char myport))
(printf "I see: ~s\n" (read-char myport))
(printf "I see: ~s\n" (read-char myport))
(printf "I see: ~s\n" (read-char myport)) 
```

看到个别字符出来。更改`read-char`为`peek-char`，您会看到它`peek-char`不会将数据带出端口，但允许您*窥视*它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:46:35.967

我建议阅读一些关于如何在 Scheme 中实现扫描仪的内容。Eric Hilsdale 和 Christopher T. Haynes 写了一些很好的笔记。

首先是扫描仪： [http ://www.cs.indiana.edu/eip/compile/scanparse.html](http://www.cs.indiana.edu/eip/compile/scanparse.html)

然后是大图： [http ://www.cs.indiana.edu/eip/compile/](http://www.cs.indiana.edu/eip/compile/)

# c++ - WM_SYSCHAR 是如何产生的？

> ID：10475184
> 
> 赞同：1
> 
> 时间：2012-05-06T23:32:56.637
> 
> 标签：c++, windows

为什么只有 ALT + CHAR 可以创建 WM_SYSCHAR？CTRL SHIFT怎么样，它们属于系统的键？

我读过API，但不太明白..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:51:50.547

有两种类型的系统密钥：

```
ALT + any key
F10 
```

F10 激活窗口的菜单栏，同时`ALT + some key`激活操作系统使用的系统命令。所有其他按键都被视为非系统按键。

有关详细说明，[请参见此处](http://msdn.microsoft.com/en-us/library/gg153546%28v=vs.85%29.aspx)。

# asp.net-web-api - 没有“MediaTypeFormatter”可用于读取“String”类型的对象

> ID：10475189
> 
> 赞同：3
> 
> 时间：2012-05-06T23:33:45.533
> 
> 标签：asp.net-web-api, jquery-post

我正在使用 ASP.NET Web API。如果没有参数，我的控制器中有一个动作可以正常工作。如果有参数，比如：

```
public string UploadFile(string actionType) 
```

然后我的操作没有被调用，我收到以下消息，在 Fiddler 中查看：

> 没有“MediaTypeFormatter”可用于读取媒体类型为“multipart/form-data”的“String”类型的对象

我的路线`global.asx`如下：

```
"api/{controller}/{action}/{actionType}" 
```

我正在使用 Jquery Post 来调用操作：

```
 function upload() {

        var actiontype = $("input:radio[name=actiontype]").val();
        var formData = new FormData($('form')[0]); 

        $.ajax({
            url: 'api/uploads/uploadfile/' + actiontype,
            type: 'POST',
            success: function (data) {
                $("#mydiv").append(data);
            },
            error: function (data) {
                $("#mydiv").append(data);
            },
            data: formData,
            cache: false,
            contentType: false, 
            processData: false
        });
    }; 
```

这是我的操作方法：

```
 public string UploadFile(string actionType)
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            //Save file
            MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
            Request.Content.ReadAsMultipartAsync(provider);
        }

        return string.Format("Action {0} Complete!", actionType);
    } 
```

这是一个已知问题，有解决方法吗？我怎样才能有一个带参数的简单动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:57:34.720

假设您使用的是默认路由，看起来您发布的路径不正确。这是 MVC 开发人员似乎遇到的常见混淆（我知道我遇到过）。MVC 使用默认路径，例如：`/Controller/Action`.

但是，在 Web API 的默认路由设置中，会跳过操作名称 ( `/api/Controller`)，然后通过 HTTP 动词名称 (post)、方法名称 (Post___) 和必要时的参数的交集找到方法。

假设您有一个名为 的 API 控制器`Uploads`，您应该有一个名为 的操作`PostUploadFile`。

```
 $.ajax({
        url: 'api/uploads/',
        type: 'POST', 
```

有些事情要注意...

*   我以文本“发布...”开头您的操作名称，这很重要，名称的其余部分不
*   您的帖子网址被缩短为控制器的名称。
*   我在这里更深入地解释了[映射](https://stackoverflow.com/questions/10439738/how-does-a-method-in-mvc-webapi-map-to-an-http-verb/10471854#10471854)。

* * *

**编辑**

显然你遇到了一个奇怪的 WebAPI。解决这个问题的方法是将您的“actionType”参数填充到一个简单的对象中，以便模型绑定可以接管。

Rick Strahl[在这里解释了这一点和其他一些具有约束力的怪事](http://www.west-wind.com/weblog/posts/2012/Mar/21/ASPNET-Web-API-and-Simple-Value-Parameters-from-POSTed-data)。还有另一个解决类似问题的[SO question 。](https://stackoverflow.com/questions/9979123/asp-net-web-api-no-mediatypeformatter-is-available-to-read-an-object-of-type)

# javascript - 我应该如何解析传递给节点模块的路径？

> ID：10475196
> 
> 赞同：0
> 
> 时间：2012-05-06T23:34:53.593
> 
> 标签：javascript, node.js, module, npm

我正在创建我的第一个 Node.js 模块，并且很难确定处理此问题的最佳方法。接收用户输入的模块文件路径的推荐方法是什么？那我该如何解决那在哪里？用户调用我的模块的位置和运行代码的位置位于两个不同的位置。

让我们更进一步。假设用户有一个 JSON 配置文件，其中包含这些路径的数组（在 config/settings.json 中）：

```
{
  "paths": [
    "../path1",
    "path2",
    "/path/to/path3",
    "~/path4"
  ]
} 
```

现在显然这些路径是相对于配置文件的，而不是任何执行代码。这感觉不对，因为现在我的方法必须接受`__dirname`、 配置文件相对于 的路径`__dirname`等。

```
var mymodule = require('mine');
mymodule(__dirname, './config/settings.json'); 
```

我从配置中读取的任何文件都必须基于此配置文件的位置。这感觉很奇怪。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:57:35.180

从[FileUtils](https://github.com/Gagle/Node-FileUtils/blob/master/src/file-utils.js)来源：

```
var updateFileProperties = function (file, path){
    file._path = null;
    file._usablePath = null;
    file._isAbsolute = false;

    if (path === undefined || path === null) return;

    path = PATH.normalize (path);

    var index = path.indexOf (":") + 1;
    var windowsRoot = path.substring (0, index);
    path = path.substring (index);

    //https://github.com/joyent/node/issues/3066
    if (path[0] === "/" && path[1] === "/"){
        path = path.replace (/[\/]/g, "\\");
        path = path.substring (0, path.length - 1);
    }

    file._isAbsolute = path[0] === SLASH;
    file._path = windowsRoot + path;
    file._usablePath = file._isAbsolute ? file._path : (windowsRoot + PATH.join (file._relative, path));
};

var File = function (path){
    var main = process.mainModule.filename;
    var cwd = main.substring (0, main.lastIndexOf (SLASH));
    var relative = PATH.relative (process.cwd (), cwd);

    this._relative = relative;
    //...omitted

    updateFileProperties (this, path);
}; 
```

这段代码解决了相对路径问题。 `_usablePath`包含真实路径。这 ”。” path 将是主文件所在的目录。不管怎么调用，都会指向预期的目录。

您可以测试打印`new File (<path>).getPath ()`返回内容的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:47:00.753

我会避免复杂性，只选择绝对路径。大多数用户都会做 __dirname + '../relativepath' 。（至少那是我所做的）。

# oracle - 尝试对嵌套表使用 select 语句

> ID：10475197
> 
> 赞同：0
> 
> 时间：2012-05-06T23:35:07.647
> 
> 标签：oracle

我创建了一个正在运行的程序

```
CREATE OR REPLACE PROCEDURE INIT_ACTOR_QUOTES AS 
 CURSOR Actor1 IS
 SELECT actorID FROM Actor;
 BEGIN
 FOR row IN FirstProcedure LOOP
 INSERT INTO ACTOR_QUOTES VALUES (row.actorID, AQ_NT(ACTOR_QUOTE_TYPE('',NULL, '', '')));
 DELETE TABLE (SELECT QUOTES FROM ACTOR_QUOTES WHERE ACTORID=row.actorID);
 END LOOP;
 END INIT_ACTOR_QUOTES;
 / 
```

我在尝试从表 QUOTES 中选择 ACTOR_QUOTES 表上 ACTORID 的任何 ACTORID 变量时遇到问题。

我试过的代码

```
SELECT * FROM ACTOR_QUOTES WHERE ACTORID = ('200'); 
```

需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:03:14.003

```
SELECT actorID, quotes.*
FROM ACTOR_QUOTES
CROSS JOIN TABLE(QUOTES) quotes
WHERE ACTORID = ('200'); 
```

# c++ - 在 OpenCV 中检索当前帧号

> ID：10475198
> 
> 赞同：17
> 
> 时间：2012-05-06T23:35:08.427
> 
> 标签：c++, opencv, frame, vision

如何使用 OpenCV 检索视频的当前帧号？OpenCV 是否有任何用于获取当前帧的内置函数，或者我必须手动完成？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-06T23:43:06.053

您可以使用捕获对象的“get”方法，如下所示：

```
capture.get(CV_CAP_PROP_POS_FRAMES); // retrieves the current frame number 
```

并且 ：

```
capture.get(CV_CAP_PROP_FRAME_COUNT); // returns the number of total frames 
```

顺便说一句，这些方法返回一个双精度值。

您也可以使用 cvGetCaptureProperty 方法（如果您使用旧的 C 接口）。

cvGetCaptureProperty(CvCapture* capture,int property_id);

property_id 选项的定义如下：

CV_CAP_PROP_POS_MSEC 0

CV_CAP_PROP_POS_FRAME 1

CV_CAP_PROP_POS_AVI_RATIO 2

CV_CAP_PROP_FRAME_WIDTH 3

CV_CAP_PROP_FRAME_HEIGHT 4

CV_CAP_PROP_FPS 5

CV_CAP_PROP_FOURCC 6

CV_CAP_PROP_FRAME_COUNT 7

*   POS_MSEC 是视频文件中的当前位置，以毫秒为单位。
*   POS_FRAME 是当前帧在视频中的位置（如视频的第 55 帧）。
*   POS_AVI_RATIO 是以 0 到 1 之间的数字形式给出的当前位置（当您想要定位一个轨迹栏以允许人们在您的视频中导航时，这实际上非常有用）。
*   FRAME_WIDTH 和 FRAME_HEIGHT 是要读取的视频的各个帧的尺寸（或要在相机的当前设置下捕获）。
*   FPS 特定于视频文件，表示每秒捕获视频的帧数。如果您想播放视频并以正确的速度播放，您将需要知道这一点。
*   FOURCC 是用于您当前正在阅读的视频的压缩编解码器的四字符代码。
*   FRAME_COUNT 应该是视频中的总帧数，但这个数字并不完全可靠。

（来自学习 OpenCV 书）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-04-16T21:56:18.483

在 openCV 3.4 版中，正确的标志是：

```
cap.get(cv2.CAP_PROP_POS_FRAMES) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-07T21:35:32.593

在 OpenCV python 中这样做的方式是这样的：

```
import cv2
cam = cv2.VideoCapture(<filename>);
print cam.get(cv2.cv.CV_CAP_PROP_POS_FRAMES) 
```

# ruby-on-rails-3 - rails 3 应用程序中的迁移，它将整数字段的值增加 +1

> ID：10475199
> 
> 赞同：0
> 
> 时间：2012-05-06T23:35:10.197
> 
> 标签：ruby-on-rails-3

我正在尝试编写一个迁移，它将整数字段的值增加 +1。我尝试了几种变体并进行了搜索。我正在寻找的是这样的：

```
def self.up
   User.update_all(:category => [:category + 1])
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:45:10.963

也许这会做到

```
User.update_all("category = (category + 1)") 
```

# c# - 使用 C# 和 WFC 的跨域 jQuery Ajax

> ID：10475201
> 
> 赞同：2
> 
> 时间：2012-05-06T23:35:50.950
> 
> 标签：c#, web-services, jquery, jquery-mobile, cordova

我有一个用 C# 和 WCF 编写的小型 Web 服务。

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{
    [WebMethod]
    public string HelloWorld()
    {
        return "Hello Worlds";
    }
} 
```

我有一点 jQuery 代码；

```
 $.support.cors = true;

        $.ajax({
            type: "POST",
            url: "http://localhost:61614/Service1.asmx/HelloWorld",
            data: '{}',
            dataType: "json",
            success: function (msg) {
                alert(0);
            }, error: function (a, b, c) { alert("Err:" + c ); 
            }
        }); 
```

这将调用 web 服务。拨打电话没有问题，但返回时出错。

Web 服务在一个应用程序中，而 Web 页面本身就是一个 HTML 页面。最终，HTML 将在 PhoneGap 中使用。

我已经尝试了各种各样的事情。

添加`contentType: "application/json; charset=utf-8",`会导致整个调用失败。使用`dataType: 'jsonp"`会导致调用失败。

基本上，上面调用了 WS，但返回时出错，这很奇怪。

我的要求是我需要从 web 服务返回一个 JSON 对象，并且它必须在 Safari 中工作。

有没有人有完整的 JSONP 调用示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:47:40.747

从[jQuery getJSON](http://api.jquery.com/jQuery.getJSON/)：

> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。有关详细信息，请参阅 $.ajax() 中对 jsonp 数据类型的讨论。

为了让您的请求被视为 JSONP 请求，您需要包含`callback=?`在您的 URL 中。这告诉 jQuery 创建一个回调函数并将该函数的名称作为回调参数传递给您的服务器。

在服务器端代码中，您的方法必须返回包装或填充的 JSON 代码，其中 JavaScript 函数的名称作为查询字符串中的回调参数传入。

本质上，您所做的是将 JavaScript 返回到客户端浏览器，该浏览器立即运行，并调用已在页面上下文中定义的函数。

JavaScript：

```
$.getJSON("http://localhost:61614/Service1.asmx/HelloWorld?callback=?",
    function(data) {

        // alert raw JSON data
        alert(JSON.stringify(data));

        // access the "say" property and alert it
        alert(data.say);
    }
); 
```

服务器端：

这是您需要在服务器端执行的操作的粗略版本：

```
// get the callback parameter value and assign to the String callback
...
return callback + "( { 'say' : 'HelloWorld' } );"; 
```

**对幕后发生的事情的进一步技术解释：**

虽然这不是您今天需要了解的内容，但这可能会帮助您更多地了解 jQuery 是如何实现 JSONP 的。

这评估为可能看起来像这样的东西：

```
return "jquery43214321432143242({'say':'HelloWorld'});" 
```

`jquery43214321432143242`为您的成功回调函数提供的随机名称在哪里。同样，由于返回的文本是使用 text/javascript 返回的，所以它会立即运行，将`{'say':'HelloWorld'}`对象作为参数传递给函数。

结果输出应该是表示原始 JSON 的警报消息，以及从`.say`属性中提取的单词“HelloWorld”。

# php - 由于使用 php 从 mysql 数据库中的几个表，如何生成文件 xml？

> ID：10475202
> 
> 赞同：0
> 
> 时间：2012-05-06T23:35:51.910
> 
> 标签：php, mysql, xml

我想使用 PHP 从 MySQL 数据库中的几个表生成 xml 文件。

```
$query = "
SELECT
  t.value,
  d.value,
  ty.value, 
  p.id,
  p.ref,
  p.is_renting,
  p.price,
  p.adress,
  p.living_space,
  p.rooms
FROM
  jos_jea_properties p
INNER JOIN
   jos_jea_towns t
ON
  t.id = d.town_id 
INNER JOIN
  jos_jea_departments d 
ON
  d.id = p.department_id 
INNER JOIN
  jos_jea_types ty 
ON
  ty.id = p.type_id";

$result = mysql_query ($query, $link) or die("Could not complete database query"); 
```

但是，它告诉我无法完成数据库查询，你知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:42:49.590

你的查询有问题。用于`mysql_error()`获取 MySQL 返回的消息。

```
$result = mysql_query ($query, $link) or die("Could not complete database query: ".mysql_error())); 
```

但是，您的查询会获得很多名为`value`. 改用别名，否则它们将被替换

```
 $query = "SELECT t.value t_value, d.value d_value, ty.value ty_value, 
     p.id, p.ref, p.is_renting, p.price, p.adress, 
     p.living_space, p.rooms FROM jos_jea_properties 
     p INNER JOIN jos_jea_towns t ON t.id = d.town_id 
     INNER JOIN jos_jea_departments d ON d.id = p.department_id 
     INNER JOIN jos_jea_types ty ON ty.id = p.type_id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:48:56.667

您对代码 php 有什么想法吗？如何为图像生成文件 xml，因为 mysql 数据库使用 php？

# wpf - UI WPF 表单中值的自动更新

> ID：10475204
> 
> 赞同：0
> 
> 时间：2012-05-06T23:36:15.750
> 
> 标签：wpf, vb.net, binding, bindinglist

我有一堂课如下：

```
Public Class BillAmounts
    Implements INotifyPropertyChanged
    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
    Private Sub NotifyPropertyChange(ByVal info As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
    End Sub
    Private _LabourCostValue As Double
    Private _TransportPriceValue As Double
    Private _ItemsTotalCost_ As Double
    Private _FinalPriceValue As Double
    Property TransportPrice As Double
        Get
            Return _TransportPriceValue
        End Get
        Set(ByVal value As Double)
            If Not _TransportPriceValue = value Then
                _TransportPriceValue = value
                _FinalPriceValue = TransportPrice + LabourCost + ItemsTotalCost_
                PriceCalculationNotification()
            End If
        End Set
    End Property
    Property LabourCost As Double
        Get
            Return _LabourCostValue
        End Get
        Set(ByVal Value As Double)
            If Not _LabourCostValue = Value Then
                _LabourCostValue = Value
                _FinalPriceValue = TransportPrice + LabourCost + ItemsTotalCost_
                PriceCalculationNotification()
            End If
        End Set
    End Property
    Property ItemsTotalCost_ As Double
        Get
            Return _ItemsTotalCost_
        End Get
        Set(ByVal value As Double)
            If Not _ItemsTotalCost_ = value Then
                _ItemsTotalCost_ = value
                FinalPrice = TransportPrice + LabourCost + ItemsTotalCost_
                'NotifyPropertyChange("ItemsTotalCost_")
                PriceCalculationNotification()
            End If
        End Set
    End Property
    ReadOnly Property TotalPrice As Double
        Get
            Try
                Return ItemsTotalCost_ + TransportPrice + LabourCost
            Catch ex As Exception
                Return 0
            End Try
        End Get
        'Set(ByVal value As Double)
        '    If Not _TotalpriceValue = value Then
        '        _TotalpriceValue = value
        '        NotifyPropertyChange("TotalPrice")
        '    End If
        'End Set
    End Property
    Property FinalPrice As Double
        Get
            Return _FinalPriceValue
        End Get
        Set(ByVal value As Double)
            If Not _FinalPriceValue = value Then
                _FinalPriceValue = value
                PriceCalculationNotification()
            End If
        End Set
    End Property
    ReadOnly Property Discount_ As Double
        Get
            '_Discount_ = FinalPrice - TotalPrice
            'Return _Discount_
            Return FinalPrice - TotalPrice
        End Get
    End Property

    Public Sub New()
        _TransportPriceValue = 0
        _LabourCostValue = 0
        _ItemsTotalCost_ = 0
        _FinalPriceValue = 0
    End Sub
    Private Sub PriceCalculationNotification()
        NotifyPropertyChange("TransportPrice")
        NotifyPropertyChange("LabourCost")
        NotifyPropertyChange("Discount_")
        NotifyPropertyChange("TotalPrice")
        NotifyPropertyChange("FinalPrice")
    End Sub

End Class 
```

我将字段绑定如下：

```
<StackPanel Name="AmountStack" Orientation="Vertical" >
                <Grid Margin="5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <TextBlock Text="Transport"  Grid.Column="0" Grid.Row="0" VerticalAlignment="Center" />
                    <TextBox Text="{Binding TransportPrice}" Name="TransportTxtBox" Grid.Column="1" Grid.Row="0" VerticalAlignment="Center" />
                    <TextBlock Text="Labour"  Grid.Column="3" Grid.Row="0" VerticalAlignment="Center" />
                    <TextBox Text="{Binding LabourCost}" Name="labourTxtBox" Grid.Column="4" Grid.Row="0" VerticalAlignment="Center" />

                    <TextBlock Text="Total Amount =" VerticalAlignment="Center" Grid.Column="0" Grid.Row="1"/>
                    <TextBox Text="{Binding TotalPrice}" Name="TotalTextBox"  IsReadOnly="True" Grid.Column="1" Grid.Row="1" />
                    <TextBlock Text="Discount= " VerticalAlignment="Center" Grid.Column="3" Grid.Row="1"/>
                    <TextBox Text="{Binding Path=Discount_, Mode=OneWay}" IsReadOnly="True" Name="DiscountTextBox" Grid.Column="4" Grid.Row="1" />
                </Grid>
                <StackPanel  Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,0">
                    <TextBlock Text="Total Amount = " VerticalAlignment="Center" />
                    <TextBox Text="{Binding Path=FinalPrice}" Name="FinalTotalTextBox" Width="130" />
                </StackPanel>
            </StackPanel> 
```

和

```
AmountStack.DataContext = Bill.Amounts 
```

但是，问题是 TOtalAMount 会自动更新，但 FinalPrice 没有更新。我所做的任何原因/错误。我已经用几种方法尝试了很多，但无法让它发挥作用。我不明白的是，总金额正在更新，但最终价格没有。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:52:33.880

不要使用在 Setter和`Private _FinalPriceValue`中赋值。使用每次适当地提高。`TransportPrice``LabourCost``FinalPrice``PriceCalculationNotification()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:18:40.393

我不记得来源，但关键是当存在只读属性时，绑定有时无法正常工作并且正在等待下一个版本中的修复，我通过手动编码文本更改事件的更改来解决。

# xcode - XCode 构建和运行与构建和调试

> ID：10475205
> 
> 赞同：1
> 
> 时间：2012-05-06T23:36:31.600
> 
> 标签：xcode, debugging, build

在 XCode (3.6) 中工作时，我注意到当您第一次创建项目时，大多数情况下，顶部的图标显示“构建并运行”和“运行”。

偶尔，他们会切换到“Build and Debug”和“Debug”。

在功能上，我没有注意到任何区别，尽管我确信编译器的功能方式有所不同。

我的主要问题是：如何重置 Xcode 以便图标再次返回“构建并运行”？（我碰巧喜欢漂亮的绿色图标而不是黄色的调试图标，因为调试图标提醒我在谈到 Cocoa 时我是多么无知......哈哈）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:38:35.083

我正在使用 Xcode 3.2.6，我认为“构建和运行”/“构建和调试”按钮是动态的。它显示了您最近的行为。

要切换回“Build and Run”，请使用菜单项“Run”->“Run - Breakpoints Off”运行一次目标。该按钮应再次为“构建并运行”。

当按钮显示为“构建和调试”时，“构建和运行”的另一种方法是按下`Option`键然后单击按钮。按住`Option`键时，按钮将切换到其他状态。

# plone - Plone 4.1 Mac Snow Leopard 32 位安装问题

> ID：10475206
> 
> 赞同：-2
> 
> 时间：2012-05-06T23:36:43.910
> 
> 标签：plone

更新：听取了大家的建议，并决定 plone.app.registry 和 4.1.1 不是问题，问题是，什么是？在哪里可以找到二进制安装程序中的错误日志？

症状：无法添加内容类型（在添加新...文件夹、页面、新闻项目等下——挂起保存，更具体地说，我的 portal_factory 无法验证并将内容移动到 ZODB）。

使用统一（4.1）和二进制（4.1）安装程序有同样的问题

环境：mac book 10.6 Snow Leopard 32-bit

当我运行 buildout 时，我没有看到任何错误：2012-05-08 18:13:34 INFO ZServer HTTP 服务器于 2012 年 5 月 8 日星期二 18:13:34 开始 主机名：0.0.0.0 端口：8080 2012-05-08 18:14 :01 警告 ZODB.FileStorage 忽略 /Applications/Plone/zinstance/var/filestorage/Data.fs 的索引 2012-05-08 18:14:27 信息 Zope 准备好处理请求

当我在 Plone 中创建一个新站点时，终端说： http: [//pastie.org/3882025](http://pastie.org/3882025)

第 23 行：2012-05-08 18:16:01 INFO GenericSetup.plone.app.registry 找不到注册表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:42:38.983

这不是错误 - 每当您使用新的 Data.fs 文件启动实例时都会发生这种情况。如果没有Data.fs.index，或者.index 文件与Data.fs 不一致，则忽略现有的并重建索引。这对新安装绝对没有任何意义。

日志中必须有比这更多的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:17:43.933

通过在此处关注此帖子解决了此问题：http: [//plone.293351.n2.nabble.com/Add-new-Plone-site-creates-site-with-JS-problems-4-1-4-tt7547774.html #a7555663](http://plone.293351.n2.nabble.com/Add-new-Plone-site-creates-site-with-JS-problems-4-1-4-tt7547774.html#a7555663)

基本上，必须去 javascript 注册表，保存，清空缓存，重新启动浏览器，仅在 Chrome 中进行测试。

# css - AP div 位置在 chrome、firefox、safari 中略有不同

> ID：10475207
> 
> 赞同：0
> 
> 时间：2012-05-06T23:36:45.883
> 
> 标签：css, html, cross-browser, css-position

我正在尝试在我的博客标题中添加一个 div，其中包含一个 bg 图像和一个链接。我在 Chrome 中看起来正确，但在 Safari 和 Firefox 中看起来不正确。我怀疑这不是 AP div 本身，而是导致这种转变的其他元素，虽然我不知道是什么，我正在使用重置。

这是屏幕截图的链接，向您展示了我在说什么：

[http://imgur.com/a/hP8dM](http://imgur.com/a/hP8dM)

这是该网站的链接：

[http://www.artyst-tyrant.com/blog](http://www.artyst-tyrant.com/blog)

这是我正在使用的CSS：

```
#trex-blog {
margin-left: 435px;
position: absolute;
top: 50px;
z-index: 50000; 
```

}

```
#trex-blog a, #trex-blog a:visited, #trex-blog a:hover {
background: url(../img/blog-trex.png) no-repeat scroll 0 0 transparent;
display: block;
height: 121px;
width: 356px;
font-size: 0;
line-height: 0;
overflow: hidden;    
text-indent: -9999px;
} 
```

这是html

```
<div id="trex-blog"><a href="http://www.artyst-tyrant.com" title="Artyst Tyrant - Victor Beazzo Designer for Hire">Artyst Tyrant - Victor Beazzo Designer for Hire</a></div> 
```

正在尝试学习编码的行业设计师，但我绝不是专业人士，所以请放轻松。

提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:35:45.127

Win7 上的 Chrome v18 将图像呈现在与我的其他浏览器相同的位置 - 也许您仅在 chrome 上浏览缓存版本？

对绝对定位元素的唯一警告是，如果它们被包裹在一个相对定位的元素中——那么绝对位置是相对于父元素的——http: [//css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

我查看了您的源代码，并没有注意到父元素上的任何位置相关属性。

我将 css top 属性值调整为 20px，并在所有当前浏览器中为我对齐。

# android - 我如何知道哪个应用程序版本正在被 android 替换？

> ID：10475214
> 
> 赞同：2
> 
> 时间：2012-05-06T23:38:13.373
> 
> 标签：android, version-control, replace, broadcastreceiver, upgrade

我有一个更新，我想根据应用程序的先前版本为我的应用程序运行。

例如，如果用户有版本 1-5 并且他们正在升级到 6 或 7，我想运行更新。另外，如果他们从 6 升级到 7，我不想运行更新。

我尝试使用接受 PACKAGE_REMOVE 和 PACKAGE_REPLACE 意图的广播接收器来完成此操作，但它们似乎没有给我有关正在删除的应用程序的信息。除非我重新安装相同的版本，否则我不会得到 PACKAGE_REMOVED 意图。很难说，因为在收到意图之前调试器和日志打印似乎没有被捕获。有任何想法吗？

```
@Override
public void onReceive(Context context, Intent intent) {
    if (isOccurUpdated) {
        return;
    }
    if (action.equalsIgnoreCase("android.intent.action.PACKAGE_REPLACED")) {
        String name = info.versionName;
        // We are assuming that we didn't get down here if we have already
        // done this update
        Log.d(TAG,"We receive the REPLACE intent "+name);
        if (name.contains(OCCUR_ID_UPDATE) || name.contains(OCCUR_ID_UPDATE_FIX)) {
            dbh.occurIdUpdate();
        }
    } else if (action.equalsIgnoreCase("android.intent.action.PACKAGE_REMOVED")) {
        String name = info.versionName;
        if (name.contains(OCCUR_ID_UPDATE)) {
            isOccurUpdated = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:04:16.300

您需要自己将以前版本的信息存储在某个地方，例如：

第 1 步：创建一个自定义`Application`类，并在清单中定义它（`android:name`属性 of `<application>`）。

步骤#2：在`onCreate()`您的自定义`Application`类中，读入一些包含上次`onCreate()`运行的应用程序版本号的持久数据结构。例如，您`lastVersion`的`SharedPreferences`.

步骤#3：如果您看到最后一个版本比您当前的版本旧，请执行您想要的任何升级逻辑。

第 4 步：将当前版本写入该持久数据结构（例如，更新`SharedPreferences`.

如果这与数据库逻辑更相关，`SQLiteOpenHelper`请为您处理所有这些。

# sql - 来自 INNER JOIN 的 SQL 计数

> ID：10475218
> 
> 赞同：20
> 
> 时间：2012-05-06T23:39:05.797
> 
> 标签：sql, count

如何从带有分组的内部连接中选择计数？

```
SELECT COUNT(table1.act) FROM table1
INNER JOIN table2 ON table1.act = table2.act
GROUP BY table1.act 
```

这将返回在 table2 中找到的动作计数。

添加

```
 SELECT table1.act, COUNT(table1.act) AS test 
```

退货

```
act     test
------- ----
17682   3
17679   3
17677   3
11636   1
11505   1 
```

我想收到发现的行为总数。

所以我想得到5。你能帮忙吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-06T23:45:42.627

您可以将该查询包装到另一个查询中：

```
SELECT COUNT(*) FROM (
    SELECT COUNT(table1.act) AS actCount FROM table1
    INNER JOIN table2 ON table1.act = table2.act
    GROUP BY table1.act
) t 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T23:48:45.813

使用[不同的计数](http://msdn.microsoft.com/en-us/library/ms175997.aspx)

```
SELECT COUNT(distinct table1.act) FROM table1
INNER JOIN table2 ON table1.act = table2.act 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T23:45:54.263

```
SELECT COUNT(table2.act) FROM table1
INNER JOIN table2 ON table1.act = table2.act 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T23:47:06.277

如果你只想要结果计数，

```
SELECT     COUNT(1)
FROM       table1
INNER JOIN table2 ON table1.act = table2.act
GROUP BY   table1.act 
```

那应该给你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T01:14:41.387

用 SELECT COUNT 语句包装整个查询，如 Mosty Mostacho 的答案所示，只是想用***as***语句发布这个答案，因为通常最好返回带有列标题的结果。

```
SELECT COUNT(*) as FilteredActs FROM (
    SELECT COUNT(table1.act) AS actCount FROM table1
    INNER JOIN table2 ON table1.act = table2.act
    GROUP BY table1.act
) T 
```

结果：

[![输出结果](../Images/901eda1dea310bd8268bdb2afeb78ebc.png)](https://i.stack.imgur.com/3D01r.png)

# ruby-on-rails - 无法加载此类文件 - Nokogiri rails

> ID：10475219
> 
> 赞同：4
> 
> 时间：2012-05-06T23:39:06.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri

我编写了一个使用 Nokogiri 的 Ruby 脚本。

对于 Rails，我在`lib/`目录中创建了这个模块：

```
require "net/http"
require "uri"
require 'nokogiri'

Module gk_CT

class CT

  def getCT
    uri = URI.parse("http://www.website.com")
    CT = Net::HTTP.get_response(uri)

    proc = Nokogiri::HTML(CT.body)

    CTQ = Array.new

    CTQ << proc.css('td')

  end

end 
```

在控制器中我有：

```
require 'gk_CT'

  def show
    @CT= gk_CT::CT.getCT()
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @CT}
    end
  end 
```

它总是给我错误：

```
cannot load such file -- nokogiri 
```

我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T04:44:33.797

如果脚本是实际 Rails 项目的一部分，那么您需要将 Nokogiri 添加到 Gemfile（使用 行`gem 'nokogiri'`）。如果您不在 Rails 项目中，或者没有使用 Bundler 或其他一些奇怪的东西，您仍然需要安装 gem ( `gem install nokogiri`)。

# c++ - C++ 使用同名变量/对象访问命名空间中的全局变量/对象

> ID：10475224
> 
> 赞同：11
> 
> 时间：2012-05-06T23:39:47.333
> 
> 标签：c++, object, namespaces, global, local

```
#include <iostream>
#include <string>
using namespace std;

string a;

namespace myNamespace
{
    string a;
    void output()
    {
        cout << a << endl;
    }
}

int main()
{
    a = "Namespaces, meh.";
    myNamespace::a = "Namespaces are great!";
    myNamespace::output();
} 
```

结果是“命名空间很棒！”。那么有什么方法可以访问命名空间 myNamespace 内的全局字符串 a 而不仅仅是本地字符串？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T23:42:28.290

像这样：

```
void output()
{
    cout << ::a << endl;  //using :: = the global namespace 
} 
```

# javascript - 创建ajax分页

> ID：10475235
> 
> 赞同：3
> 
> 时间：2012-05-06T23:42:38.217
> 
> 标签：javascript, jquery, ajax, django

我正在尝试使用以下代码进行 ajax 分页：

```
// AJAX pagination
$(".pages .prev").live('click', function(event) {
    event.preventDefault()
    var current_page = parseInt(getParameterByName('page'))-1;
    $.get('/ajax/financial_page/', {'page': current_page}, function(response) {
        $(".content table").replaceWith(response)
    });
}) 
```

在我看来功能：

```
def financial_page(request):
    """
    Returns a single financials page, without extra HTML (used in AJAX calls).
    """
    page = int(request.GET.get('page', 1))
    if request.user.is_superuser:
        fs = FinancialStatements.objects.order_by('-date',  'statement_id')
    else:
        up = request.user.get_profile()
        providers = up.provider.all()
        fs = FinancialStatements.objects.filter(provider__in=providers).order_by('-date', 'statement_id')

    fs_objects, current_page_object, page_range = paginator(request, objects=fs, page=page, number_per_page=30)
    data = {  'fs':fs_objects, 
              'page_range': page_range, 
              'current_page': current_page_object,
           }
    page = render_to_string('financial_section.html', data, RequestContext(request))
    return HttpResponse(simplejson.dumps([page])) 
```

但是，我遇到了两个问题。首先是它`response`不是真正的 HTML，并且有一堆`n\t\t\n\t\t\n\t\n\t\n\t\n\t\t\n\t\`等。此外，我在跟踪当前页面/根据需要更改 url 时遇到了麻烦。我将如何在这里建立一个功能性的 ajax 分页？

**更新**：我通过做`response = $.parseJSON(response);`. 我将如何跟踪我在哪个页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:21:17.890

要跟踪页面，您可以使用 AJAX 函数在单击时增加/减少变量。试试这个：

```
var counter="0";

$(document.body).on('click', ".pages .prev, .pages .next", function(event) {

   if($(this).hasClass('prev')
    counter--;// <--decrement for clicking previous button
   else if($(this).hasClass('next')
    counter++; // <--increment for clicking next button

  event.preventDefault()

   $.get('/ajax/financial_page/', {'page': counter}, function(response) {
    $(".content table").replaceWith(response)
   });
}) 
```

我也不会使用`live`方法，因为它在 jQuery 1.7 中已被弃用。它已被`on`方法替换。在此处查看 jQuery `on()`API：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-16T09:19:38.417

查看有关“使用 jQuery、PHP 和 MySQL 的 Ajax 滚动分页”的本教程，它可以简化您的工作： [http ://www.bewebdeveloper.com/tutorial-about-ajax-scroll-paging-using-jquery-php-and- mysql](http://www.bewebdeveloper.com/tutorial-about-ajax-scroll-paging-using-jquery-php-and-mysql)

以下是要点：

```
var is_loading = false; // initialize is_loading by false to accept new loading
var limit = 4; // limit items per page
$(function() {
    $(window).scroll(function() {
        if($(window).scrollTop() + $(window).height() == $(document).height()) {
            if (is_loading == false) { // stop loading many times for the same page
                // set is_loading to true to refuse new loading
                is_loading = true;
                // display the waiting loader
                $('#loader').show();
                // execute an ajax query to load more statments
                $.ajax({
                    url: 'load_more.php',
                    type: 'POST',
                    data: {last_id:last_id, limit:limit},
                    success:function(data){
                        // now we have the response, so hide the loader
                        $('#loader').hide();
                        // append: add the new statments to the existing data
                        $('#items').append(data);
                        // set is_loading to false to accept new loading
                        is_loading = false;
                    }
                });
            }
       }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T23:47:46.660

尝试使用 javascript String.replace() 方法：

```
// AJAX pagination
$(".pages .prev").live('click', function(event) {
    event.preventDefault()
    var current_page = parseInt(getParameterByName('page'))-1;
    $.post('/ajax/financial_page/', {'page': current_page}, function(response) {
        response = response.replace(/\n/g,'<br>').replace(/\t/,'&nbsp;&nbsp;');
        $(".content table").replaceWith(response)
    });
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T23:59:16.503

```
jQuery.get(url, [data], [callback], [type])

type :xml, html, script, json, text, _default。 
```

尝试将最后一个参数定义为“html”怎么样？

# php - 如何在数组循环中使用一个 Mysql 查询而不是查询？

> ID：10475240
> 
> 赞同：3
> 
> 时间：2012-05-06T23:44:25.600
> 
> 标签：php, mysql

下面的查询当前在一个循环中（在 PHP 中），该循环从 3 个不同的数组中获取纬度、经度和 id 输入。对于数组中的每个位置/键，使用下面的查询从表中选择最近的地理位置。

由于数组的大小通常在 500 左右，因此需要找到最近的地理位置的 500 组输入需要一些时间。

我的问题：有没有办法一次使用来自 php 的输入数组来使用一个查询，并为每个数组键选择一组所有最近的地理位置？

```
$sql="SELECT 
id, d, tolon, tolat, du,
       ( 3959 * acos( cos( radians($lat1) ) 
              * cos( radians( travel.tolat ) ) 
              * cos( radians( travel.tolon) - radians($lon1) ) 
              + sin( radians($lat1) ) 
              * sin( radians( travel.tolat ) ) ) ) AS distance 
FROM travel 
WHERE userid = $id AND tolon > $lonlow AND tolon < $lonhigh AND tolat > $latlow AND tolat < $lathigh
having distance < $maxdistance ORDER BY distance
"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:30:43.970

我认为您不会比一堆工会做得更好，尽管`limit 1`如果您只需要最接近的，添加 a 是一个好主意。一堆联合将是一个很长的 sql 字符串，并且您可能会遇到限制（`max packet size`我相信这是设置）。您可能必须一次分块 100 个左右的工会。

如果表具有为此类查询设计的索引，您将获得*很多。*mysql 支持`spatial indexes`您应该认真考虑研究，因为常规索引在此用例中表现不佳。

# ajax - 如何在 ajax 加载页面时放置 loading.gif 图像和文本

> ID：10475254
> 
> 赞同：1
> 
> 时间：2012-05-06T23:46:24.877
> 
> 标签：ajax, loading

我正在使用以下脚本进行 ajax 调用：

```
window.onload = function() {
    if (!session) {
        layoutType = document.documentElement.clientWidth;
        var xmlhttp;
        if (window.XMLHttpRequest)
          xmlhttp=new XMLHttpRequest();
          }
        else
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            window.location.reload();
            }
        }
        xmlhttp.open("POST","core/session.php?bW=" + bW,true);
        xmlhttp.send();
    }
} 
```

我想在 pahe 加载时插入加载图像和一些文本。我该怎么做？

我想插入以下图片链接和文字：

```
<img src="cdn/images/ajax-loader.gif" />
<h3>Please wait while we load</h3> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:52:43.087

您可以将图像添加到加载中，当 ajax 加载时它基本上会覆盖您的图像 ajax 加载器

```
<script>
   var DisplayIMge = document.getElementById("ajaxdiv");
    DisplayIMge.innerHTML = "<img src='cdn/images/ajax-loader.gif' /><h3>Please wait while we load</h3>"
</script> 
```

例如，这里是基于您正在使用的 ajax

```
<html>
<head>
<script type="text/javascript">
function showHint(str)
{
if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","core/session.php?bW=" + bW,,true);
xmlhttp.send();
}
</script>
</head>
<body>

<p><b>Start typing a name in the input field below:</b></p>
<form> 
First name: <input type="text" onkeyup="showHint(this.value)" size="20" />
</form>
<p><div id="ajaxdiv"><div></p>

</body>
</html> 
```

# javascript - UIWebView 性能与 JS onclick 功能

> ID：10475255
> 
> 赞同：0
> 
> 时间：2012-05-06T23:46:50.400
> 
> 标签：javascript, ios, performance, uiwebview

我在 UIWebView 中显示了一个相当大的页面（大约 150 个`<article>s`带有一些文本，以 分隔`<section>s`）。我想用 JS 做这样的事情（我使用 jQuery）：

```
$('article').click(function() {alert('hi');}); 
```

问题是，运行该代码需要很长时间（在 iPad 3 上，从点击开始大约需要 2 秒）。

**我怎样才能提高这方面的表现？**

我正在使用最新版本的 XCode 和 iOS 5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:34:19.463

我使用[了这个 answer](https://stackoverflow.com/a/8513002/368864)的 class`SingleTapDetector`和以下代码：

```
new SingleTapDetector(window, function(e) {
  alert($(e.srcElement).text()); //show the text of the element that was tapped
}); 
```

然后很容易看出元素是否是`article`，甚至是类似的东西`$(e.srcElement).closest('article')`（因为我的文章有`<p>`段落）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:55:23.693

我建议你尝试在窗口对象上放置一个点击事件，然后验证这是否是`<article>`标签。这是示例：

```
$(window).click(function(e){
    var e = e || event;
    if(e.srcElement.tagName==ARTICLE)
        alert('hi');
}); 
```

# ruby-on-rails - 使用 :remote => true 提供 pdf

> ID：10475262
> 
> 赞同：1
> 
> 时间：2012-05-06T23:47:33.233
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我有一个生成 pdf 并将其提供给用户的 form_tag。最终的 send_data 是这样的：

```
send_data pdf.render, type: 'application/pdf', :filename => filename, :compress => true 
```

这适用于标准表单，但当我尝试使用 ajax 设置时它不起作用：remote => true。

我想做的最终事情是使用 :disable_with 在生成 pdf 时禁用按钮。

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:52:34.193

我知道这是一个旧线程，但我想我会让你知道我是如何让它工作的，以防其他人像我一样在这里找到方法。

将 ajax 用于请求的问题是响应（pdf 文件）几乎无法处理，然后作为文件提供给用户，所以不要打扰。相反，我使用内置缓存的 Rails 来获取生成后的 pdf。

1.  一旦您的链接“按常规”工作，请将其添加`:remote => true, :disable_with => 'loading...'`到您的链接以对其进行 ajaxify。

2.  在您的 config > enviroments > development.rb 中设置`config.action_controller.perform_caching = true`，这样您就可以在推送到生产环境之前看到这个工作 =p。

3.  在您的下载操作上使用[操作缓存](http://guides.rubyonrails.org/caching_with_rails.html)，并在需要时设置适当的过期时间，即`caches_action :download, :expires_in => 5.minutes`在您的控制器顶部。

    这意味着当您单击链接时，它将发送 ajax 请求、生成 pdf 并返回页面。现在页面已缓存，因此如果您再次单击链接，请求将花费毫秒而不是秒。接下来，我们需要做的只是一点 javascript，一旦准备好就可以下载 pdf。

4.  但是你做你的javascript（不显眼或不显眼）添加以下内容：

```
$("#download_link").on('ajax:success', function(){
    document.location = $(this).attr("href")
}); 
```

`:remote => true`一旦ajax请求成功（即生成pdf），这将使浏览器跟随链接，就好像链接不存在一样。因为响应已被缓存，它会立即下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:02:19.133

好的，您必须使用各种 AJAX 回调。

假设您的页面上有生成 PDF 的链接。

```
<%= link_to 'Generate PDF', '/generate_pdf', :id=>'genpdf', :remote=>true %> 
```

现在您必须将事件绑定到上面创建的“genpdf”元素。IE

```
$('#genpdf').bind('ajax:beforesend', disablepdf)
$('#genpdf').bind('ajax:complete', enablepdf) 
```

然后定义上面声明的两个 javascript 函数来根据需要操作 HTML 元素。

```
 var disablepdf = function() { $("#genpdf").removeAttr("disabled") };
  var enablepdf = function() { $("#genpdf").attr("disabled", "disabled") }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:41:09.560

1.  使用远程链接开始渲染过程
2.  让您的服务器开始创建 PDF 的后台作业，向用户返回作业 ID
3.  使用 javascript 在计时器上轮询服务器，发送作业 ID 并询问它是否完成
4.  完成后，将用户重定向到可以下载 PDF 的页面。

# java - 尝试获取 DataObject 的 来自 EDT / 自 #199391 实施以来无效

> ID：10475265
> 
> 赞同：0
> 
> 时间：2012-05-06T23:47:57.930
> 
> 标签：java, netbeans, netbeans-7, netbeans-platform

在此 netbeans 平台应用程序堆栈跟踪中，“尝试从 EDT 获取 DataObject”是什么意思：

```
[INFO] INFO [org.netbeans.ui.metrics.projects]: USG_PROJECT_OPEN
[INFO] WARNING [org.netbeans.TopSecurityManager]: use of system property netbeans.user has been obsoleted in favor of InstalledFileLocator at org.netbeans.modules.masterfs.providers.Attributes.getRootForAttributes(Attributes.java:104)
[INFO] WARNING [org.openide.loaders.FolderChildren..tmp.lol.Wonderland.scenes]: Attempt to obtain DataObject for /tmp/lol/Wonderland/scenes/Alice.inc@d30e0395:b749a5 from EDT
[INFO] INFO [org.openide.loaders.FolderChildren..tmp.lol.Wonderland.scenes]: Ineffective since #199391 was implemented
[INFO] java.lang.Exception: Find for /tmp/lol/Wonderland/scenes/Alice.inc@d30e0395:b749a5
[INFO]  at org.openide.loaders.FolderChildren$DelayedNode.convert(FolderChildren.java:451)
[INFO]  at org.openide.loaders.FolderChildren$DelayedNode.convert(FolderChildren.java:399)
[INFO]  at org.openide.util.lookup.InstanceContent$ConvertingItem.getInstance(InstanceContent.java:316)
[INFO]  at org.openide.util.lookup.AbstractLookup.lookup(AbstractLookup.java:421)
[INFO]  at org.openide.nodes.FilterNode$FilterLookup.lookup(FilterNode.java:2114)
[INFO]  at org.openide.nodes.FilterNode$FilterLookup.lookup(FilterNode.java:2114)
[INFO]  at povray.projects.PovRayProxyChildren.createNodes(PovRayProxyChildren.java:30)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterNodeEntry.nodes(FilterNode.java:1895)
[INFO]  at org.openide.nodes.EntrySupport$Lazy$EntryInfo.getNode(EntrySupport.java:1645)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterLazySnapshot.get(FilterNode.java:1741)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterNodeEntry.nodes(FilterNode.java:1886)
[INFO]  at org.openide.nodes.EntrySupport$Lazy$EntryInfo.getNode(EntrySupport.java:1645)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterLazySnapshot.get(FilterNode.java:1741)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterNodeEntry.nodes(FilterNode.java:1886)
[INFO]  at org.openide.nodes.EntrySupport$Lazy$EntryInfo.getNode(EntrySupport.java:1645)
[INFO]  at org.openide.nodes.FilterNode$Children$LazySupport$FilterLazySnapshot.get(FilterNode.java:1741)
[INFO]  at org.openide.nodes.EntrySupport$Lazy$LazySnapshot.get(EntrySupport.java:1871)
[INFO]  at org.openide.nodes.EntrySupport$Lazy$LazySnapshot.get(EntrySupport.java:1858)
[INFO]  at org.openide.explorer.view.VisualizerChildren.getChildAt(VisualizerChildren.java:127)
[INFO]  at org.openide.explorer.view.VisualizerNode.getChildAt(VisualizerNode.java:321)
[INFO]  at javax.swing.tree.DefaultTreeModel.getChild(DefaultTreeModel.java:156)
[INFO]  at javax.swing.tree.FixedHeightLayoutCache$VisibleFHTreeStateNodeEnumeration.nextElement(FixedHeightLayoutCache.java:1506)
[INFO]  at javax.swing.tree.FixedHeightLayoutCache$VisibleFHTreeStateNodeEnumeration.nextElement(FixedHeightLayoutCache.java:1461)
[INFO]  at javax.swing.tree.AbstractLayoutCache.getPreferredWidth(AbstractLayoutCache.java:228)
[INFO]  at javax.swing.plaf.basic.BasicTreeUI.updateCachedPreferredSize(BasicTreeUI.java:1820)
[INFO]  at javax.swing.plaf.basic.BasicTreeUI.getPreferredSize(BasicTreeUI.java:1921)
[INFO]  at javax.swing.plaf.basic.BasicTreeUI.getPreferredSize(BasicTreeUI.java:1909)
[INFO]  at javax.swing.JComponent.getPreferredSize(JComponent.java:1634)
[INFO]  at javax.swing.ScrollPaneLayout.layoutContainer(ScrollPaneLayout.java:769)
[INFO]  at org.openide.explorer.view.TreeView$ExplorerScrollPaneLayout.layoutContainer(TreeView.java:1823)
[INFO]  at java.awt.Container.layout(Container.java:1421)
[INFO]  at java.awt.Container.doLayout(Container.java:1410)
[INFO]  at java.awt.Container.validateTree(Container.java:1507)
[INFO]  at java.awt.Container.validate(Container.java:1480)
[INFO]  at org.openide.explorer.view.TreeView.access$101(TreeView.java:151)
[INFO]  at org.openide.explorer.view.TreeView$3.run(TreeView.java:683)
[INFO]  at org.openide.util.Mutex.readAccess(Mutex.java:365)
[INFO]  at org.openide.util.Mutex$1R.run(Mutex.java:1307)
[INFO]  at org.openide.nodes.Children$ProjectManagerDeadlockDetector.execute(Children.java:1920)
[INFO]  at org.openide.util.Mutex.doWrapperAccess(Mutex.java:1326)
[INFO]  at org.openide.util.Mutex.readAccess(Mutex.java:354)
[INFO]  at org.openide.explorer.view.TreeView.validate(TreeView.java:681)
[INFO]  at javax.swing.RepaintManager.validateInvalidComponents(RepaintManager.java:670)
[INFO]  at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1635)
[INFO]  at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
[INFO]  at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
[INFO]  at java.awt.EventQueue.access$000(EventQueue.java:84)
[INFO]  at java.awt.EventQueue$1.run(EventQueue.java:602)
[INFO]  at java.awt.EventQueue$1.run(EventQueue.java:600)
[INFO]  at java.security.AccessController.doPrivileged(Native Method)
[INFO]  at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
[INFO]  at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
[INFO]  at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:162)
[INFO]  at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
[INFO]  at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
[INFO]  at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
[INFO]  at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
[INFO]  at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
[INFO]  at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

? 如何解决？当我打开以使用我的应用程序打开特殊项目类型 (.pov) 时会发生这种情况。它不会伤害任何东西，但会为每个 .pov-project 文件向终端输出充斥相同的消息。

**编辑1**

啊哈，经过一番研究，我发现 EDT 的意思是“事件调度程序线程”，其中禁止出于某种原因访问 DataObjects。这种禁止的原因是什么，我如何正确测试节点是否代表 FS 上的隐藏文件？我如何正确地为它创建单独的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:19:51.323

禁止的原因是这可能导致 IO 到磁盘，因此应该在 EDT 上避免。否则 UI 可能会冻结。

有关线程及其正确用法的信息，请参阅：[http ://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

要知道文件是否隐藏，您需要访问 java.io.File。

要访问该文件，您需要执行以下操作：

```
FileObject fo = DATAOBJECT.getPrimaryFile();
File = FileUtil.toFile(fo) 
```

您将需要添加错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T16:29:19.650

正如 Jesse Glick 在他关于此错误的帖子中所解释的那样：[https ://netbeans.org/bugzilla/show_bug.cgi?id=199391](https://netbeans.org/bugzilla/show_bug.cgi?id=199391)

尽可能尝试寻找 FileObject 而不是 DataObject，以避免由于使用 DataObject 而导致 IO 到磁盘。

从节点对象获取 FileObject 的示例：

```
FileObject fileObject = (FileObject) node.getLookup().lookup(FileObject.class); 
```

FileObject 实例可以为您提供大量信息，因为它支持 java.io.File 类上可用的大量方法

# c - 使用 GCC 编译的 16 位 C 代码

> ID：10475266
> 
> 赞同：4
> 
> 时间：2012-05-06T23:48:13.310
> 
> 标签：c, gcc, compilation, 16-bit

如何使用 GCC 编译 16 位 C 代码？我正在尝试编写一个只写“Hello World！”的平面引导加载程序。到计算机并停止。

```
int main(int argc, char** argv)
{
    char* value = "Hello World!";
    __asm
    {
        mov si, value
    loop:
        lodsb
        cmp al, 0
    halt:
        je halt
        mov bx, 0x0007 ; Black BG, White TXT
        mov ah, 0x0E   ; Teletype output
        int 0x10
        jmp loop
    }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T01:13:31.447

你没有。你不能。GCC 不生成 16 位 x86 代码。

使用 Open Watcom C/C++ 或古老的 Turbo C++（1.01 版可在线免费获得）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-30T10:29:56.087

可以在 c 中编写 16 位 boot-loader 内核。您需要将 .code16 或 .code16gcc 放在文件顶部，以告诉编译器生成 16 位目标文件。

# html - 在浏览器中按“返回”时，HTML 页面显示为“查看源代码”

> ID：10475268
> 
> 赞同：0
> 
> 时间：2012-05-06T23:48:36.883
> 
> 标签：html, ruby-on-rails

我有这个奇怪的错误 - 当按下“返回”按钮时，网站上的页面有时会显示为源（例如纯 html）。

Rails 应用程序正在发生这种情况。有什么想法会发生这种情况吗？

谢谢

它发生在乘客身上。如果我转到该页面，然后按后退然后前进我会得到源..

我不确定ajax sudo navigation是什么意思。有一个脚本可以通过ajax检查控制器的内容（并根据结果呈现页面），否则它是经典的MVC ..模型/显示/等。

如果我需要添加更多信息，请告诉我。谢谢！

# ios - 将照片应用程序前景化时更新 ALAssetsLibrary 的正确方法是什么？

> ID：10475269
> 
> 赞同：1
> 
> 时间：2012-05-06T23:48:45.020
> 
> 标签：ios, uitableview, ios5, alassetslibrary

我已经为此苦苦挣扎了一段时间：依赖于`ALAssetsLibrary`保持库与磁盘库同步的照片/视频应用程序如何。具体来说，在应用程序被背景化后重新前景化以允许拍摄/重组/删除一些照片/视频。

在我的情况下，当我的应用程序被前景化时，我可以`UITableView`使用库中的一项资产深入钻取。

谢谢，
道格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:28:30.180

您应该注册 ALAssetsLibraryChangedNotification 并仅在收到通知时重新枚举库，即库实际上已更改。当您的应用再次处于前台时，您将收到此通知。详细地说，这意味着您需要为应用程序中当前呈现的组中的资产组和资产组支付报酬。请注意，iOS 5.X 中有一个关于 ALAssetsLibraryChangedNotification 的错误：[http ://www.openradar.me/10484334](http://www.openradar.me/10484334)

干杯，

亨德里克

# python - 访问 if __name__ == "main" 中的变量

> ID：10475271
> 
> 赞同：2
> 
> 时间：2012-05-06T23:48:58.317
> 
> 标签：python, variables, main

我有一个程序可以在一系列测试中比较两个类。

主程序（称为 initial.py）将这两个值分配给字典

```
import testcheck

values = {}
valueChange = False

if __name__ == "__main__":
    values['valueOne'] = testcheck.assignValue()       #see note 1
    values['valueTwo'] = testcheck.assignValueTwo()    
    testcheck.checkValues()                            #see note 2

    while valueChange is True :
        values['valueTwo'] =   testcheck.assignValueTwo()
        testcheck.checkValues() 
```

注1：这两个都返回相同的类但具有不同的值

注2：比较两个类。经过一系列测试，valueChange 设置为 True，使用此代码删除一个值

```
import initial

...

if initial.valueChange is True:
   del initial.values['valueTwo']

... 
```

这将返回错误

```
del initial.values['valueTwo']
KeyError: 'valueTwo' 
```

我认为这是因为添加 valueOne 和 valueTwo 会将其添加到本地范围内，但即使使用全局值也无法修复它。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:12:34.153

这似乎是一个设计问题。您似乎正在设置循环导入，如果可能的话应该避免。如果您要在包的模块之间共享全局状态，您可能希望利用将状态存储在`testcheck`模块中，而不是存储在您的全局变量中`initial.py`

**测试检查.py**

```
# module globals
_TEST_VALUES = {}
valueChanged = False

...

def getTestValue(name):
    return _TEST_VALUES.get('name', None)

def assignValue():
    # do stuff
    result = 'foo'
    _TEST_VALUES['valueOne'] = result
    return result

def assignValueTwo():
    # do stuff
    result = 'bar'
    _TEST_VALUES['valueOne'] = result
    return result

... 
```

**初始.py**

```
testcheck.assignValue()     
testcheck.assignValueTwo()    
testcheck.checkValues()                          

while testcheck.valueChange:
    testcheck.assignValueTwo()
    testcheck.checkValues() 
```

**其他模块.py**

```
import testcheck

...

if testcheck.valueChange:
    try:
        del initial.values['valueTwo']
    except KeyError:
        pass

... 
```

就实际使用而言，我不知道整个事情的发展方向。但也许这会让你知道从哪里开始寻找。导入您的 intial.py 入口点的其他模块不再循环导入。您将所有全局变量存储在 testcheck 模块中。这个例子非常快速和肮脏。它只是为了说明。

任何模块都不应该尝试访问处理块内数据的另一个模块的数据`if __name__ == "__main__"`。因为现在您假设它将始终用作入口点（从不被其他东西导入）并且您开始对代码施加限制。

# git - git：每个遥控器都有不同的 .gitignore 文件

> ID：10475273
> 
> 赞同：83
> 
> 时间：2012-05-06T23:49:54.217
> 
> 标签：git, github, gitignore

我有一个远程仓库，我想在其中提交某些文件（将它们部署在云计算平台上的编译文件），但我不想在 github 上部署它们......

有没有办法拥有不同的 .gitignore 文件，每个遥控器一个？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-07T00:00:29.820

这在 git 的模型中没有任何意义。提交包含文件集；所有 .gitignore 文件所做的就是告诉 UI 不要自动添加匹配某些模式的文件。这实际上意味着具有几乎相同但仅包含文件子集的并行提交集。

可以使用分支方案来执行此操作，其中您有一个“部署”分支，它从 master 中分离出来，并且是相同的，但包含额外的编译文件。这甚至可以通过 git hooks 自动编译文件并将它们添加到 repo 中。我正在设想这样的结构：

```
master:       A ---> B ---> C ---> D
               \      \      \      \
                \      \      \      \
deployment:      -> A'  -> B'  -> C'  -> D' 
```

即，每次某个服务器在 master 上获得新的提交时，它都会构建项目，将构建的文件添加到 D 的新提交中，然后将其提交到部署分支——然后不必将其推送到 github。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-04-25T20:28:55.080

我想出了一个办法来做到这一点。

就我而言，我需要将项目与 heroku 和 GitHub（作为我的公共仓库）同步。

但我对在公共存储库中共享一些带有私人信息的文件不感兴趣。

通常一个简单的项目会有以下文件夹结构

```
Project folder (remote heroku)
    - .git
    - .gitignore
    - (folders and files) 
```

我所做的是再添加一个级别，并在其中创建另一个 git 存储库，其中`.gitignore`会省略我项目中的一些文件。

```
Project public (remote GitHub)
    - .git
    - .gitignore
    - Project folder (remote heroku)
        - .git
        - .gitignore
        - (folders and files) 
```

所以这不是一个 git 存储库，它有两个不同`.gitignore`的远程存储库。

有两个不同的存储库。

在最里面，我只排除了 IDE 生成的文件和运行时生成的一些文件。

在最外层，我排除了所有不能公开的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-26T20:41:57.060

另一种选择是[git submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)。

例如，如果您希望您的代码和文档位于具有独立访问控制等的两个不同的存储库中，这可能很有用。因此您将拥有 3 个总存储库，一个用于文档的子模块存储库，另一个用于代码存储库，以及“ master”（不是 git 子模块）repo 包含两者（可能用于 pypi 上传）。这是组织 CS 教科书项目的一种不错的方式。这两个项目都可以在主仓库维护者的推动下独立进行，并在主要版本上同步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-02T03:48:58.850

此处提到的方法的**自动化解决方案：**

1.  设置根 .git 以忽略您希望以不同方式传输的子文件夹
2.  在子文件夹中初始化新的 git 并分配远程配置
3.  根据传入的参数修改根文件夹的 .git/hooks/pre-push 文件以在这些子文件夹中执行 git push。

# error-handling - 如何从 NServiceBus 放在错误队列中的消息中获取错误堆栈跟踪？

> ID：10475277
> 
> 赞同：1
> 
> 时间：2012-05-06T23:50:07.827
> 
> 标签：error-handling, nservicebus

当一条消息被 nservicebus 移动到错误队列时，如何从消息中获取异常详细信息（消息、堆栈跟踪等）？有没有我可以使用的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:27:00.877

这些详细信息存储在消息的扩展名中，因此您需要一个可以显示扩展名的工具。队列浏览器是很多人使用的一种工具，

# java - 当子类中的一种方法被覆盖时，父类如何工作？

> ID：10475282
> 
> 赞同：4
> 
> 时间：2012-05-06T23:51:18.860
> 
> 标签：java, inheritance

当子类覆盖多个方法并调用其父类中的方法时，父类是使用它自己的预定义方法还是子类已覆盖的方法？

对于某些上下文和示例，我的问题源于 AP 计算机科学课程中的这个问题。下面，当`super.act()`被调用时，`act`来自`Dog`调用的方法`eat()`。该`eat`调用是否转到or中的`eat`方法？`Dog``UnderDdog`

考虑以下两个类。

```
public class Dog
{
    public void act() {
        System.out.print("run");
        eat();
    }

    public void eat() {
        System.out.print("eat");
    }
}

public class UnderDog extends Dog
{
    public void act() {
        super.act();
        System.out.print("sleep");
    }

    public void eat() {
        super.eat();
        System.out.print("bark");
    }
} 
```

假设以下声明出现在客户端程序中。

```
Dog fido = new UnderDog(); 
```

调用的结果是`fido.act()`什么？

1.  `run eat`
2.  `run eat sleep`
3.  `run eat sleep bark`
4.  `run eat bark sleep`
5.  由于无限递归，没有打印任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:55:52.183

子类可以通过两种方式调用超类方法：

*   调用超类中定义的方法作为自己的方法，或
*   调用超类中定义的方法，专门请求超类的行为

第一种方式的语法如下：

```
act(); // it's the same as this.act() 
```

第二种调用方式的语法如下：

```
super.act(); 
```

我认为现在您有足够的信息来追踪您的示例中发生的事情，而无需进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:15:27.573

每当调用一个方法时——无论是在类的层次结构中还是在其他不相关的类中定义的——多态性就会发挥作用。从实例的实际类开始搜索目标方法并向上移动继承层次结构。

唯一一次绕过它是从使用覆盖它的方法调用被覆盖的方法时`super`。

# c - 为什么平均输出inf？

> ID：10475286
> 
> 赞同：0
> 
> 时间：2012-05-06T23:51:52.687
> 
> 标签：c, casting

这不是我的所有代码，但这是我的设置。当我尝试计算平均值时，我得到`inf`了答案。相反，我应该得到一个小数。我投错了吗？我究竟做错了什么？

```
typedef struct hash_table_ {
  data_el **order;
  int *number_next_calls;
  int *number_buckets;
  int *buckets_size;
  int *worst;
  int *total;
  float *average;
  int (*hash_func)(char *);
  int (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table;

...
Phash_table table;
...

int temp_total,temp_buckets_size;
temp_total = *table->total;
temp_buckets_size = *table->buckets_size;
*(table->average) = (float)temp_total/(float)temp_buckets_size;
printf("%f\n",*(table->average)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:01:35.800

如果除以零，您将得到一个浮点异常（如果启用了核心转储），您将得到一个无穷大。

由于您正在打印`Inf`，因此您似乎被系统宠坏了；在 y 黄疸和过时的意见中，核心转储更好。

# amazon-ec2 - 使用 Elastic Beanstalk 部署的应用程序上的弹性 IP

> ID：10475287
> 
> 赞同：44
> 
> 时间：2012-05-06T23:51:59.903
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk

我对 Amazon Web Services 提供的弹性 IP 服务的使用有点困惑。我想主要的想法是我可以按照这个简单的过程切换到新版本的 Web 应用程序而无需停机：

1.  在新的 EC2 实例上部署新版本
2.  正确配置新版本并使用暂存数据库对其进行测试
3.  正确测试后，让这个新版本使用实时数据库
4.  将弹性 IP 关联到此实例
5.  终止所有无用的服务（暂存数据库和旧的 EC2 实例）

这是部署新版本 Web 应用程序的常用方法吗？

现在，如果应用程序在更多实例上扩展怎么办？我在 Elastic Beanstalk 设置中配置了自动缩放，这创建了一个负载均衡器（我可以在 AWS 管理控制台的 EC2 部分看到它）。问题是我显然无法将弹性 IP 与负载均衡器相关联，我必须将其与现有实例相关联。我应该将它关联到哪个实例？我很困惑...

对不起，如果有些问题听起来很愚蠢，但我只是一名程序员，这是我第一次设置云系统。

谢谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-07T01:01:57.410

[Elastic Load Balancing (ELB)](http://aws.amazon.com/elasticloadbalancing/)不适用于[Amazon EC2 弹性 IP 地址](http://aws.amazon.com/articles/1346)，事实上这两个概念根本无法结合在一起。

## 通过 Elastic Load Balancing 实现弹性

相反，ELB 通常通过[CNAME 记录](http://en.wikipedia.org/wiki/CNAME_record)使用（但见下文），如果需要，这通过允许别名 DNS 地址更改正在使用的 ELB 的 IP 来提供第一级的弹性/可用性。第二级弹性/可用性由负载均衡器在您注册的 EC2 实例之间分配流量时执行。

可以这样想：CNAME 永远不会改变（就像*弹性 IP 地址*一样），EC2 实例的替换是通过负载均衡器、[Auto Scaling](http://aws.amazon.com/autoscaling/)或您自己（通过注册/取消注册实例）来处理的。

这在 Shlomo Swidler 的出色分析[“Elastic Load Balancing”中的“Elastic”：ELB Elasticity and How to Test it](http://shlomoswidler.com/2009/07/elastic-in-elastic-load-balancing-elb.html)中有更详细的解释，这反过来又指的是 AWS 最近提供的[Best Practices in Evaluating Elastic Load Balancing](http://aws.amazon.com/articles/1636185810492479)，它证实了他的分析并提供了有关*Elastic Load Balancing 服务架构及其*自身工作原理的良好整体阅读（但缺乏 Shlomo 提供的说明性逐步示例）。

### 域名

请注意，之前需要 CNAME 的限制同时已通过对[Amazon Route 53](http://aws.amazon.com/route53/)的相应添加来解决，以允许也使用根域（或*Zone Apex*），请参阅[使用 Amazon Route 53 继续前进](http://aws.typepad.com/aws/2011/05/moving-ahead-with-amazon-route-53.html)中的*别名和区域 Apex*部分快速概览和[将域名与 Elastic Load Balancing 结合使用](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/using-domain-names-with-elb.html?r=3319)以了解详细信息。

## 通过 Elastic Beanstalk 实现弹性

首先，[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)依次使用 Elastic Load Balancing，如上所述。最重要的是，它添加了应用程序生命周期管理：

> AWS Elastic Beanstalk 让您可以更轻松地在 AWS 云中**快速部署和管理应用程序。**您只需上传您的应用程序，Elastic Beanstalk 就会自动处理容量配置、负载平衡、自动扩展和应用程序运行状况监控的部署细节。[...] *[强调我的]*

这是通过将*环境*的概念添加到组合中来实现的，这在[架构概述](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/concepts.concepts.architecture.html)中进行了解释：

> 环境是应用程序的核心。[...] 当您创建环境时，AWS Elastic Beanstalk 会预置运行您的应用程序所需的资源。为环境创建的 AWS 资源包括一个弹性负载均衡器（图中的 ELB）、一个 Auto Scaling 组以及一个或多个 Amazon EC2 实例。

请注意，*每个环境都有一个指向负载均衡器的 CNAME（URL），*就像单独使用 ELB 一样。

所有这些都集中在[管理和配置应用程序和环境](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.html)中，其中*详细讨论了 AWS Elastic Beanstalk 的一些最重要的功能，包括使用 AWS 管理控制台、CLI 和 API 的使用示例*。

### 零停机时间

很难确定最相关的部分以用于说明目的，但[部署具有零停机时间的版本](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.CNAMESwap.html)准确地解决了您的用例并暗示了所有必需的前面步骤（例如[创建新应用程序版本](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.deployment.html)和[启动新环境](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.environments.html)），因此阅读*AWS 管理控制台*部分可能会给您该平台如何运作的最佳整体图景。

祝你好运！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-18T14:29:44.617

除了 Steffen 的精彩回答中描述的选项之外，如果您不需要 Elastic Load Balancer 的全部功能（例如在一个实例之外自动扩展） ，Elastic Beanstalk 似乎最近**启用了 Elastic IP作为选项。**

[我在对类似问题的回答中](https://stackoverflow.com/a/17725512/454094 "没有负载均衡器的 Elastic Beanstalk")描述了该选项。Elastic Beanstalk 现在允许您在两种[环境类型](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features-managing-env-types.html "AWS 文档 - 环境类型")之间进行选择，并且*单实例*选项创建一个弹性 IP。

![带有选项的下拉菜单](../Images/e00ca7f16656446be51f2b054c6680b9.png)

* * *

我认为在大多数情况下使用 ELB 将是更可取的选择，但例如对于登台服务器，最好有一个不太复杂（并且更便宜）的替代方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-21T18:49:28.207

很抱歉几年后回复了一个帖子，但是对于那些确实需要 ELB 上的一组静态 IP 地址的人，可以很好地要求 AWS 将他们所谓的“稳定 IP”地址添加到 ELB，从而给它静态IP地址功能。

他们当然不喜欢这样做 - 但如果你能证明它是合理的（主要理由是当你的客户端通过他们的防火墙对出站连接有 IP 白名单限制并且完全不愿意在这种立场上让步）。

请注意，基于流量选项的“自动缩放”不再是直截了当的 - AWS 将无法像使用开箱即用的解决方案那样动态地将更多 ELB 端点添加到您的 ELB，您必须通过随着时间的推移与客户开放新 IP 地址的痛苦。

不过，对于最初的问题，EB 使用 ELB 到实际不需要静态 IP 地址（没有客户端出站防火墙问题）的 EC2 实例是按照公认答案的最佳方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-18T00:54:17.430

如果上述解决方案都不起作用，另一种方法是将 NAT 网关附加到私有子网并将 EIP 与 NAT 网关关联。在这种情况下，您可以使用 ELB、使用自动缩放并拥有预留的 EIP。

不过这有点贵，尤其是对于大吞吐量的用例。此外，通过 SSH 连接到实例进行调试变得有点复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T16:55:29.427

我写[了一篇文章](https://ajsharp.com/elastic-beanstalk-elastic-ips/)，描述了如何在启动新实例时使用 Cloudwatch 规则和 lambda 函数来完成此任务。这是 lambda 函数代码：

```
const AWS = require('aws-sdk');
const ec2 = new AWS.EC2();
const PROD_ENV_NAME = 'my-prod-env-name';

// Example Event
// {
//   "version": "0",
//   "id": "ee376907-2647-4179-9203-343cfb3017a4",
//   "detail-type": "EC2 Instance State-change Notification",
//   "source": "aws.ec2",
//   "account": "123456789012",
//   "time": "2015-11-11T21:30:34Z",
//   "region": "us-east-1",
//   "resources": [
//     "arn:aws:ec2:us-east-1:123456789012:instance/i-abcd1111"
//   ],
//   "detail": {
//     "instance-id": "i-abcd1111",
//     "state": "running"
//   }
// }

exports.handler = async (event) => {
  console.log("EVENT:", event);

  // The newly launched instance ID.
  const instanceId = event.detail['instance-id'];

  // Fetch info about the newly launched instance
  const result = await ec2.describeInstances({
    Filters: [ { Name: "instance-id", Values: [instanceId] } ]
  }).promise()

  // The instance details are buried in this object
  const instance = result.Reservations[0].Instances[0];
  const isAttached = instance.NetworkInterfaces.find(int => int.Association.IpOwnerId !== 'amazon');

  // Bail if the instance is already attached to another EIP
  if (isAttached) {
    console.log("This instance is already assigned to an elastic IP")
    return { statusCode: 200, body: '' }
  }

  // In elastic beanstalk, the instance name gets assigned to the enviroment name.
  // There is also an environment name tag, which could be used here.
  const name = instance.Tags.find(t => t.Key === 'Name').Value;

  // Only assign EIPs to production instances
  if (name !== PROD_ENV_NAME) {
    console.log('Not a production instance. Not assigning. Instance name:', name)
    return { statusCode: 200, body: ''}
  }

  // Get a list of elastic IP addresses
  const addresses = await ec2.describeAddresses().promise();

  // Filter out addresses already assigned to instances
  const availableAddresses = addresses.Addresses.filter(a => !a.NetworkInterfaceId);

  // Raise an error if we have no more available IP addresses
  if (availableAddresses.length === 0) {
    console.log("ERROR: no available ip addresses");
    return { statusCode: 400, body: JSON.stringify("ERROR: no available ip addresses") }
  }

  const firstAvail = availableAddresses[0]
  try {
    // Associate the instance to the address
    const result = await ec2.associateAddress({
      AllocationId: firstAvail.AllocationId,
      InstanceId: instanceId
    }).promise();

    console.log('allocation result', result)

    return { statusCode: 200, body: JSON.stringify('Associated IP address.') };
  } catch (err) {
      console.log("ERROR: ", err);
  }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-04T14:07:15.903

您可以按照已接受的答案中所述将环境设置为单实例，或者如果您想使用已创建的弹性 IP，您可以执行以下操作。

在`.ebextensions`项目根目录的文件夹中，创建一个名为`setup.config`并粘贴以下内容的文件：

```
container_commands:
    00_setup_elastic_ip:
        command: |
            export AWS_ACCESS_KEY_ID={YOUR-ACCESS-KEY-ID}
            export AWS_SECRET_ACCESS_KEY={YOUR-SECRET-ACCESS-KEY}
            export AWS_DEFAULT_REGION=us-east-1    
            INSTANCE_ID=$(ec2-metadata -i)
            words=( $INSTANCE_ID )
            EC2_ID="${words[1]}"
            aws ec2 associate-address --instance-id $EC2_ID --allocation-id {eipalloc-ID-TO-THE-IP} 
```

您所要做的就是更换其中包含的 3 个部件`{}`，您就可以开始使用了。这会将您的 Elastic Beanstalk 实例的 IP 替换为您选择的弹性 IP。

其中包含的部分`{}`是（尽管去掉 {}，它只是为了向您显示要替换为您的信息的部分）：

1.  您的 AWS 访问密钥 ID
2.  您的 AWS 秘密访问密钥
3.  您要分配给 Elastic Beanstalk 环境实例的 Elastic IP 的分配 ID。

# irc - 关于 Snort 规则以跟踪 IRC 服务器活动的问题

> ID：10475288
> 
> 赞同：0
> 
> 时间：2012-05-06T23:52:06.253
> 
> 标签：irc, snort, botnet

alert tcp $HOME_NET any -> $EXTERNAL_NET any (msg:"COMMUNITY BOT IRC Traffic Detected By Nick Change"; flow: to_server,established; content:"NICK"; nocase; offset: 0; depth: 5; flowbits:set, community_is_proto_irc; flowbits: noalert; classtype:misc-activity; sid:100000240; rev:3;)

alert tcp $EXTERNAL_NET any -> $HOME_NET any (msg:"COMMUNITY BOT Internal IRC server detected"; flow: to_server,established; flowbits:isset,community_is_proto_irc; classtype: policy-violation; sid:100000241; rev:2;)

alert tcp $HOME_NET any -> $EXTERNAL_NET any (msg:"CHAT IRC message from internal bot"; flow: 已建立； flowbits:isset,community_is_proto_irc; content:"PRIVMSG"; nocase; classtype:policy-violation; sid:1463; )

上述规则由[David Bianco](http://blog.vorant.com/2006/03/detecting-common-botnets-with-snort.html)编写，用于跟踪任何 IRC 端口上的 IRC bot/server 活动。但是，上述规则工作正常，但我对它们有疑问。当多个 IRC 服务器（其中一些在 7000 上工作，另一些在 6667 上工作）在网络上运行时，我的问题发生了，其中一些将达到规则的条件，Snort 将生成警报，其中一些（甚至一个其中）不会达到这些条件，因此 Snort 不会生成与定义的集合相关的任何警报。我认为有一种不一致。关于这个问题有什么建议吗？我正在研究 Snort 2.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:43:28.503

这些 IRC 规则已经很老了，并且不会（如您所见）捕获所有 IRC 流量。几乎不可能说出为什么它们与网络捕获或跟踪不匹配。

第一条规则根据匹配流量的规则设置一个流位（基于从偏移量 0 到深度 5 的单词 'NICK' 的不敏感匹配），如果第一条规则与流量不匹配，那么它将不会t 将 flowbit 设置为“community_is_proto_irc”。这是关于 flowbits 的旧解释 - [http://forums.snort.org/forums/rules/topics/flowbits](http://forums.snort.org/forums/rules/topics/flowbits)。

第二条规则只是在存在 flowbit 时发出警报（对于从外部到家庭的流量），而第三条规则在内容匹配时更加精细（并且流量反向）。

我建议为不匹配的 IRC 流量获取一个 pcap，并在本地通过 Snort 触发它，以查看遗漏了什么，然后相应地调整您的规则（snort -r test.pcap -c /etc/snort_test.conf） - [http： //manual.snort.org/node8.html](http://manual.snort.org/node8.html)。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:55:56.093

感谢上帝，问题现在已经解决了......问题的原因是许多规则之间的冲突，这些规则试图同时为同一个活动触发（PRIVMSG），所以当我删除这些规则时，每个想法都只是对上述规则很好。

# android - 为什么通过视图 ID 切换 OnItemSelectedListener 不能找到选定的微调器？

> ID：10475294
> 
> 赞同：2
> 
> 时间：2012-05-06T23:52:51.120
> 
> 标签：android, view, spinner

我有 OnItemSelectedListener 类，问题是现在当我从 spinner1 中选择项目时，它没有显示它应该显示的烤面包机文本。Toast 文本只是为了查看侦听器是否有效，而它没有。我有两个微调器，我正在尝试从两个微调器中获取选定的项目以获取单个变量。任何帮助在这里表示赞赏，我已经坚持了几个小时。

我已经在按钮监听器上使用了这种切换技术并且效果很好，但是它们在我的主类活动类中，我不确定它是否依赖于它以及如果它依赖于如何解决它

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

    View v = parent.getSelectedView();
    switch (view.getId()) {

    case R.id.spinner1:
        Toast.makeText( parent.getContext(),
                "Selected item is " + parent.getItemAtPosition(pos).toString(),
                Toast.LENGTH_LONG).show();
        break;
    case R.id.spinner2:
        //Code here
        break;
    default:
        Toast.makeText(parent.getContext(), view.toString(), Toast.LENGTH_LONG).show();
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T23:58:52.380

您似乎认为“父”是包含 Spinner 的活动，而“视图”是 Spinner。他们实际上不是。“父”是 ListView 或 SpinnerView。“视图”是单个列表项。

所以，你想使用

```
switch (parent.getId()) 
```

检查包含刚刚选择的项目的微调器的 ID。

# ruby-on-rails - 如何在 Rails 项目中运行日常任务/脚本？

> ID：10475296
> 
> 赞同：9
> 
> 时间：2012-05-06T23:53:24.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, scheduled-tasks

我正在为我的应用程序开发计费系统，但我不确定如何设置每天运行的脚本，一个用于发送付款提醒（电子邮件），另一个用于降级尚未续订的订阅。

*   关于如何做到这一点的任何提示？
*   我需要注意什么问题？
*   我可以使用任何宝石吗？

我已经完成了大部分采购工作，所以我不是在寻找像 paypal_recurring 或 stripe 这样的宝石 - 只需要处理付款提醒和处理已过期的帐户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T00:03:44.313

我已经通过多种方式做到了这一点，并且有很多方法可以做到这一点。我认为当前的最佳实践是使用[Resque](https://github.com/defunkt/resque)对作业进行排队，并使用[Rescue Scheduler](https://github.com/bvandenbos/resque-scheduler)来安排它们。

Resque 是一款可靠的“作业调度”应用程序，可以为您处理各种任务。可以为 Resque Scheduler 提供完整的 cron 表达式（除了其他调度任务的方法）来管理作业。

这种方法的优点之一是您获得了[Resque Web](https://github.com/defunkt/resque-web)应用程序，该应用程序为您提供了一个用于监视作业（或为一次性作业运行启动它们）的 Web 应用程序。

我已经在 Heroku 中使用了这种方法，它运行良好且可靠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T00:03:13.777

每当在[https://github.com/javan/whenever](https://github.com/javan/whenever)是使用 cron 定义计划任务的好方法。或者您可以直接使用 cron：http: [//www.ameravant.com/posts/recurring-tasks-in-ruby-on-rails-using-runner-and-cron-jobs](http://www.ameravant.com/posts/recurring-tasks-in-ruby-on-rails-using-runner-and-cron-jobs)

# iphone - 在我的 Objective-C 程序中解析 json 响应

> ID：10475299
> 
> 赞同：0
> 
> 时间：2012-05-06T23:54:11.790
> 
> 标签：iphone, objective-c, json, sbjson

我使用 SBJSON 来解析我的响应，总线不知何故我无法取出我的数据。我应该如何解析这个回复？

```
{"StatusCode":0,"Message":"email already exists","Content":{"HasApplication":false,"IsFaceBook":false,"UserActive":false,"UserAuthenticationType":0,"UserCredits":0,"UserDayAdded":0,"UserEmail":null,"UserEmailWasVerified":false,"UserGuid":null,"UserID":0,"UserSellerApproved":false,"UserTokef":0},"TotalCount":0} 
```

我是这样开始的：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
    [responseData setLength:0];
    NSLog(@"%@",response); 
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    [responseData appendData:data];
    NSLog(@"Data recived");     
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{ 
    NSLog(@"Connection failed! Error - %@ %@",[error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
    responseData = nil;

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    NSLog(@"conenction loading finished"); 

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSMutableDictionary *jsonDictionary = [parser objectWithString:responseString error:nil];
} 
```

但接下来是什么？我需要 StatusCode 值和 UserID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:00:57.543

一个你有字典，你可以使用它，例如：

```
NSMutableDictionary *jsonDictionary = [parser objectWithString:responseString error:nil];
NSNumber * statusCode = [jsonDictionary objectForKey:@"StatusCode"];
NSString * message = [jsonDictionary objectForKey:@"Message"];
NSDictionary * content = [jsonDictionary objectForKey:@"Content"];
// etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:01:59.197

从 JSON 字符串的外观来看，您有一个包含三个键值对的字典，其中一个是另一个具有多个键值对的字典。因此，一旦你将 JSON responseString 分配给你的 NSMutableDictionary，就可以处理这个问题：

应该是这样的：

```
NSNumber *statusCode = [jsonDictionary objectForKey:@"StatusCode"];
NSDictionary *contentDict = [jsonDictionary objectForKey@"Content"];
NSString *userID = [contentDict valueForKey@"UserID"]; 
```

完全不同的是，如果您要进行大量的 Web 服务交互，您可能需要认真研究 AFNetworking。它会改变你的生活 ：）

另外，我不明白为什么需要 jsonDictionary 成为 NSMutableDictionary。除非您稍后更改它，否则请使用 NSDictionary，它的开销更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T00:18:00.113

好吧..... `NSMutableDictionary *jsonDictionary = [parser objectWithString:responseString` 也许不是 NSMutableDictionary，而是 NSDictionary。进而：

```
NSString *statusCode = [jsonDictionary valueForKey:@"StatusCode"];
NSDictionary *contentDict = [jsonDictionary objectForKey@"Content"];
NSString *userID = [contentDict valueForKey@"UserID"]; 
```

# c# - 在程序文件中查找文件并启动该文件

> ID：10475302
> 
> 赞同：2
> 
> 时间：2012-05-06T23:55:08.030
> 
> 标签：c#

我正在尝试编写一个下载 Team Viewer 并安装它的程序，如果它已经安装，请从程序文件启动 teamviewer，而不是重新下载它。

我有它，所以它将teamviewer下载并安装到正确的文件夹中，但我不知道如何告诉我的程序在程序文件（x86）中搜索64位或32位程序文件搜索teamviewer.exe的目录和子目录并启动程序。这是我到目前为止的代码。

谢谢。

我用这段代码解决了它。它在正确的程序文件夹中搜索 Teamviewer 并启动程序。这不会检查您是否安装了它，我在我的程序前面有一个检查它可以检测到它，但它很容易添加。

```
private void teamviewerbtn_Click(object sender, EventArgs e)
    {
        //start button

        if (Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE").Contains("64"))
        {
            string path = @"c:\Program Files (x86)\Teamviewer\"; //specify starting folder location for searching
            string searchPattern = "teamviewer.exe*"; //what do you want to search for?

            DirectoryInfo di = new DirectoryInfo(path);

            FileInfo[] files =
                di.GetFiles(searchPattern, SearchOption.AllDirectories);

            foreach (FileInfo file in files)
            {
                string tvE = (file.FullName.ToString()); //takes found file and references full file path
                Process.Start(tvE);
            }
        }
        else
        {
            string path = @"c:\Program Files\Teamviewer\"; //specify starting folder location for searching
            string searchPattern = "teamviewer.exe*"; //what do you want to search for?

            DirectoryInfo di = new DirectoryInfo(path);

            FileInfo[] files =
                di.GetFiles(searchPattern, SearchOption.AllDirectories);

            foreach (FileInfo file in files)
            {
                string tvE = (file.FullName.ToString()); //takes found file and references full file path
                Process.Start(tvE);
            }
        }   

        //end button
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:17:09.290

```
if (files.Length == 1)
{
    Process.Start(files[0]);
} 
```

# c# - 如果 AutoGenerateColumns 为 false，DataGrid 不会正确绑定到 DataGrid

> ID：10475305
> 
> 赞同：0
> 
> 时间：2012-05-06T23:56:01.447
> 
> 标签：c#, wpf, data-binding, datagrid, datatable

我一直在让自己发疯，我希望我只是错过了一些明显的东西。

我有一个`DataGrid`我想绑定到一个 in-memory `DataTable`。将 AutoGenerateColumns 设置为 true，我可以编辑字段并将更改传播到数据表，一切都很好。问题是我想为“状态”字段设置一个下拉组合框。然后我设置`AutoGenerateColumns`并`false`手动添加了 XAML 中的列标题。当我这样做时，我无法再编辑这些字段并让更改持续存在，而是在我点击离开后每个字段都是空白的。我在调试期间检查了 Datagrid 列的状态，发现绑定读取为空。关于我做错了什么的任何想法？

XAML 代码：

```
<DataGrid Margin="31,29,0,29" Name="dgTickets" RowEditEnding="dgTickets_RowEditEnding" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID #" x:Name="ID" />
            <DataGridTextColumn Header="Customer Name" x:Name="CustomerName" />
            <DataGridTextColumn Header="Phone #" x:Name="Phone"/>
            <DataGridComboBoxColumn Header="Status" x:Name="Status"/>
            <DataGridCheckBoxColumn Header="Bool?" x:Name="bool1"/>
            <DataGridCheckBoxColumn Header="Bool?" x:Name="bool2"/>
            <DataGridCheckBoxColumn Header="Bool?" x:Name="bool3"/>
            <DataGridTextColumn Header="Notes" x:Name="Notes"/>
        </DataGrid.Columns>
    </DataGrid> 
```

我用于创建 DataTable 并将其关联的 C# 代码：

```
 //add columns
        column = new DataColumn("ID", System.Type.GetType("System.String")); //two piece constructor - adds header string and data type
        dbTable.Columns.Add(column); //adds the column to the table

        column = new DataColumn("CustomerName", System.Type.GetType("System.String"));
        dbTable.Columns.Add(column);

        column = new DataColumn("Phone#", System.Type.GetType("System.String"));
        dbTable.Columns.Add(column);

        column = new DataColumn("Status", System.Type.GetType("System.String"));

        dbTable.Columns.Add(column);

        column = new DataColumn("bool1", System.Type.GetType("System.Boolean"));
        dbTable.Columns.Add(column);

        column = new DataColumn("bool2", System.Type.GetType("System.Boolean"));
        dbTable.Columns.Add(column);

        column = new DataColumn("bool3", System.Type.GetType("System.Boolean"));
        dbTable.Columns.Add(column);

        column = new DataColumn("Notes", System.Type.GetType("System.String"));
        dbTable.Columns.Add(column);
        //add rows
        row = dbTable.NewRow(); 

        dbTable.Rows.Add(row); 

        dbTable.AcceptChanges();
        dgTickets.ItemsSource = dbTable.DefaultView; 
```

任何建议表示赞赏。我尝试了几种不同的方法来让这两个元素一起工作，但是如果手动定义标题，我似乎无法正确绑定两个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:05:19.500

我认为您只需将绑定扔在那里，例如：

```
<DataGridTextColumn Header="Customer Name" x:Name="CustomerName" Binding={Binding path=CustomerName} /> 
```

# dbcontext - 使用“DbContext”而不是“ObjectContext”总是更好吗？

> ID：10475306
> 
> 赞同：10
> 
> 时间：2012-05-06T23:56:13.870
> 
> 标签：dbcontext, entity-framework-4.3, objectcontext

我刚下载`EntityFramework.dll v4.3`。我发现了许多比较`DbContext`与..的问题`ObjectContext`。但其中大部分来自 2010 年或 2011 年初。

我想阅读更多关于这个主题的内容。具体来说，有没有`DbContext`我可以拿到的书？我也想知道，截至今天，`DbContext`与它的哥哥相比，它的局限性是什么`ObjectContext`？

我意识到它`DbContext`更紧凑，因为它暴露了更少的属性。这表明我应该从`ObjectContext`. 但是，如果我进行此迁移，我会放弃任何功能吗？例如，我读过它`DbContext`没有 STE（自我跟踪实体）功能。这仍然成立吗？是否值得关注？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T09:59:41.457

> 我想阅读更多关于这个主题的内容。具体来说，有没有`DbContext`我可以拿到的书？

你的问题一开始并不顺利，因为一个谷歌查询会给你一个答案。有一[本关于 DbContext](https://rads.stackoverflow.com/amzn/click/com/1449312969)本身的好书——它不包含任何关于 Code First 方法的内容，但我想这真的不是你问题的重点。

> 我发现了许多比较`DbContext`与 ..的问题`ObjectContext`。但其中大部分来自 2010 年或 2011 年初。

如果只是想用+EDMX代替`ObjectContext`+ `DbContext`EDMX，对比还是一样的。`DbContext`是一个包装器`ObjectContext`，除了与 Code First 和 Migrations 相关的那些特性外，它的特性集并没有增长。

> 我意识到它`DbContext`更紧凑，因为它暴露了更少的属性。这表明我应该从 `ObjectContext`.

是的，它更紧凑，并且简化了与上下文相关的最常见任务。`DbContext`对于更复杂的任务，您仍然可以`ObjectContext`通过`IObjectContextAdapter`.

> 但是，如果我进行此迁移，我会放弃任何功能吗？例如，我读过它`DbContext`没有 STE（自我跟踪实体）功能。这仍然成立吗？是否值得关注？

STE 是为 STE 创建的`ObjectContext`，我不认为它被移植到`DbContext`，但您可以尝试自己实现此功能。

STEs 只是一个带有解决某些问题的想法的模板。它看起来是一个很好的理论解决方案，但它并没有被开发人员社区很好地接受，因为该解决方案对于现实世界的场景来说并不是很好。这也是为什么正在开发其他更重要的功能而不是改进或移植模板的原因。

# php - 如何使用php字符串替换停止'...'显示为问号

> ID：10475308
> 
> 赞同：0
> 
> 时间：2012-05-06T23:57:20.807
> 
> 标签：php, string

我现在正在使用 stripslashes()、str_replace() 和 htmlentities()。什么都能完成工作。

一件奇怪的事情是，客户端在一些用“...”描述的文本中暂停。当它显示在浏览器上时，它显示为问号图形。有谁知道如何只显示...？他们可以分享答案吗？

示例：船长，如果我们不与他们作战，他们……会杀了我们俩。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:08:06.453

似乎有人使用“...”作为单个 unicode 字符。尝试这个：

```
$string = str_replace("…", "...", $string); 
```

您的 PHP 文件必须以 Unicode 格式保存才能正常工作。

# iphone - 如何在 Cocos2D 中强制人像模式？

> ID：10475309
> 
> 赞同：2
> 
> 时间：2012-05-06T23:57:55.267
> 
> 标签：iphone, xcode, cocos2d-iphone, portrait

我阅读的每个网页都告诉我编辑我的“GameConfig.h”文件。我的项目目录中没有这样的文件，如果我尝试导入它，我会收到错误消息。如何在不编辑这个虚幻的头文件的情况下更改我的默认方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:47:52.503

您没有说您使用的是哪个版本的 cocos2d，但由于您没有 GameConfig.h 文件，我猜您使用的是 2.0rc。

如果是这种情况，请查看 AppDelegate.m，您会发现：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

将横向更改为纵向，因此您现在拥有：

```
return UIInterfaceOrientationIsPortrait(interfaceOrientation); 
```

然后，您的游戏将仅在两个纵向方向之间自动旋转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T23:54:45.547

在 Cocos2D iPhone v3 中，您可以通过初始设置调用设置方向，如下所示：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self setupCocos2dWithOptions:@{
                                    CCSetupTabletScale2X: @(YES),
                                    CCSetupScreenOrientation: CCScreenOrientationPortrait
                                    }];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T09:58:06.550

在 Cocos2d v3 中，您必须像往常一样在 didFinishLaunchingWithOptions 方法中的 AppDelegate 中进行设置：

```
[self setupCocos2dWithOptions:@{
                                CCSetupShowDebugStats: @(YES),
                                CCSetupScreenOrientation: CCScreenOrientationPortrait,
    }]; 
```

（我省略的更多选项可用）

并在项目的 Info.plist 中的语音“支持的界面方向”或“支持的界面方向（iPad）”下设置纵向而不是横向（iPad 的默认设置）。

# javascript - 使用 XMLHttpRequest 上传 AJAX 文件

> ID：10475313
> 
> 赞同：5
> 
> 时间：2012-05-06T23:58:59.150
> 
> 标签：javascript, ajax, file, upload, xmlhttprequest

我知道有很多类似的问题，但我仍然没有找到解决我的问题的方法。我正在尝试使用 XMLHttpRequest 上传文件，因此我开发了以下代码：

```
var sendFiles = function(url,onload,onerror,file,headers){
    var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp'),
    upload = xhr.upload;
    API.addEvent(xhr,'readystatechange',function(){
        if(xhr.readyState==4)
            if((xhr.status>=200 && xhr.status<300) || xhr.status==304){
                this.response = this.response || this.responseText;
                onload.call(xhr);
            }else onerror.call(xhr);
    });
    xhr.open('POST',url,true);
    for(var n=0;n<headers.length;n++)
        xhr.setRequestHeader(headers[n]);
    xhr.send(file);
    return xhr;
}; 
```

PHP端脚本是：

```
<?php
header('Content-type: text/html;charset=ISO-8859-1');
$status = 0;
if(@copy($_FILES['file']['tmp_name'],'test\\' . $_FILES['file']['name']))
    $status = 1;
else
    $err = '0';
echo '{
    "status": ' . $status . '
}';
?>; 
```

但是 var $_FILES['file'] 似乎是空的，这意味着文件没有被发送到服务器。然后我决定在下面的代码中使用 FormData 对象

```
var sendFiles = function(url,onload,onerror,file,headers){
    var xhr = XMLHttpRequest ? new XMLHttpRequest() : new    ActiveXObject('Microsoft.XMLHttp'),
    upload = xhr.upload,
    formData = new FormData();
    formData.append('file',file);
    API.addEvent(xhr,'readystatechange',function(){
        if(xhr.readyState==4)
            if((xhr.status>=200 && xhr.status<300) || xhr.status==304){
                this.response = this.response || this.responseText;
                onload.call(xhr);
            }else onerror.call(xhr);
    });
    xhr.open('POST',url,true);
    for(var n=0;n<headers.length;n++)
        xhr.setRequestHeader(headers[n]);
    xhr.send(formData);
    return xhr;
}; 
```

它有效，但仅适用于文件大小低至约 8mb 的文件。当我尝试发送大小超过 8mb 的文件时，var`$_FILES['file']`再次变为空

注意：'file' var 对应于 document.getElementsById('fileInput').files[0];

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-02T06:02:13.893

为了避免 post_max_size 限制问题......而且双方的内存不足问题：

## 在客户端

*   使用 PUT 而不是 POST ：

    `xhr.open("put", "upload.php", true);`

*   添加自定义标题以指定原始 FileName 和 FileSize ：

    `xhr.setRequestHeader("X-File-Name", file.name);`
    `xhr.setRequestHeader("X-File-Size", file.size);`

*   直接在 XHR 发送方法中使用 File 对象：

    `xhr.send(file);`

    *请注意，File 对象可以直接通过 input[type=file] DOM 对象的“files”属性获取*

## 在服务器端

*   通过 $_SERVER 读取自定义标题：

    `$filename = $_SERVER['HTTP_X_FILE_NAME'];`
    `$filesize = $_SERVER['HTTP_X_FILE_SIZE'];`

*   使用 php://input 读取文件数据：

    `$in = fopen('php://input','r');`

然后您就可以无限制地发送非常大的文件（1GB 或更多）！！！

*此代码适用于 FireFox 4+、Chrome 6+、IE10+*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T23:58:36.760

更改`post_max_size`ini 文件中的指令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T00:12:05.947

Ajax 调用不会限制大小。它可能是 php ini 文件中的最大文件大小。

# actionscript-3 - 有没有办法允许从 Flash 访问 .htaccess 密码保护目录上的 PHP 脚本？

> ID：10475315
> 
> 赞同：2
> 
> 时间：2012-05-06T23:59:19.500
> 
> 标签：actionscript-3, .htaccess

我正在开发一个敏感的项目，需要在启动前使用 .htaccess 密码进行保护。

这是一个需要来自 PHP 的信息的游戏，该信息托管在这个受保护的服务器上，目前我需要在每次进行更改时上传 SWF，我想测试这非常耗时，因为编译它当然会给出我的错误如下：

> 打开 URL 'http://site.com/script.php' 时出错

有没有办法（可能通过与安全相关的类之一）我可以将 .htaccess 用户名和密码与请求一起发送以获取我需要的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:34:51.950

我不确定我是否很好地理解了这个问题，但是：您是否尝试像这样在 .htaccess 文件中允许您的 ip...

```
<Files page.php>
AuthName "Your stuff here" 
deny from all
Allow from xxx.xxx.xxx.xxx
</Files> 
```

xxx.xxx.xxx.xxx 是你的 IP ？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:07:41.717

如果您编写一个简单的本地脚本并将您的请求发送给它而不是远程服务器会怎样。然后在该本地 php 脚本中使用 curl 实现对受保护服务器的真实请求。我这么说是因为如果你使用 curl，你可以发送用户名和密码。此处示例[http://www.electrictoolbox.com/php-curl-sending-username-password/](http://www.electrictoolbox.com/php-curl-sending-username-password/)

# ruby-on-rails - 使用 gmaps4rails (AJAX) 刷新 div

> ID：10475316
> 
> 赞同：0
> 
> 时间：2012-05-06T23:59:43.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, google-maps-api-3, gmaps4rails

我正在使用 Rails 3.0.9 版本和 jquery。我一直在使用这个没有数据库的 gem。它仅用于地图显示，并在其上显示 KML 文件。为此，我使用了：

```
<div id='ajax_map'>
    <% @kmlurl="http://mysite/file1.kml" %>
    <%= gmaps( :kml => { :data => "[{ url: #{@kmlurl.inspect}}]" } ) %>
</div> 
```

所有精彩的节目。

我想在您更改链接 (@kmlurl) 后执行此操作，然后单击按钮，使用这个新的 KML 文件更新地图。我使用带有以下代码的单独操作 js.erb：

```
$('#ajax_map').html('<%= @kmlurl="http://mysite/file2.kml" %>'+'<br />'+'<%= gmaps( :kml => { :data => "[{ url: #{@kmlurl.inspect}}]" } ) %>'); 
```

但他没有更新 DIV。“js.erb”正常渲染，不使用gmaps()的方法正常返回@kmlurl。我在标签中的“.html.erb”中测试了相同的代码，它加载了一个新文件，但是，当然，只是在页面加载时。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:37:16.207

解决问题如下（在js.erb中）：

```
$('#ajax_map').html('<%= escape_javascript( gmaps({:last_map => false}) ) %>');

Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
    Gmaps.map.map_options.maxZoom = 15;
    Gmaps.map.initialize();
Gmaps.map.kml = [{ url: '<%= "#{@kmlurl}" %>'}];
Gmaps.map.create_kml();
    Gmaps.map.adjustMapToBounds();
    Gmaps.map.callback();
};
Gmaps.loadMaps(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:35:52.677

首先，我会稍微重构一下。

假设第一段代码在您的索引页中。我会将@kmlurl 的设置移动到相应的控制器操作中：

```
def index
   @kmlurl = "http://mysite/file1.kml"
end 
```

然后（假设索引？）您的索引视图将很简单：

```
<div id="ajax_map">
  <%= gmaps( :kml => { :data => "[{ url: #{@kmlurl}}]" } ) %>
</div> 
```

然后添加将更新地图的链接：

```
<%= link_to 'Other Map', '/othermap', :remote=>true %> 
```

现在您将在 routes.rb 中创建一个路由：

```
match '/othermap' => 'foo#othermap' 
```

然后在 foo_controller.rb 中：

```
def othermap
  @kmlurl = "http://mysite/file2.kml"
end 
```

然后创建 othermap.js.erb：

```
$('#ajax_map').html(
  '<%= 
    escape_javascript(
      gmaps( :kml => { :data => "[{ url: #{@kmlurl}}]" } )
    )
   %>'
  ) 
```

这是一个快速修复，但我真正要做的是努力使您的视图代码尽可能简单，并在控制器中完成所有实际工作。理想情况下，您的观点只是：

```
<div id="ajax_map">
  <%= gmaps( :kml => { :data => @mapdata } ) %>
</div> 
```

在您的控制器中根据需要设置@mapdata。您有太多真正属于嵌入在视图代码中的控制器的东西！您的 othermap.js.erb 应该同样简化。IE

```
$('#ajax_map').html('<%= escape_javascript(gmaps( :kml => { :data => @mapdata } ))%>') 
```

# android - Android中的JSON解析问题

> ID：10475318
> 
> 赞同：1
> 
> 时间：2012-05-07T00:00:45.710
> 
> 标签：android, json

我有一个简单的问题，自 2 天以来无法解决。作为 Android 的新手有时看起来很累人。但这里，

一个简单的 JSON 文件如下所示：

```
"results" : [
{
     "value1" : {
        "sub-value" : {
           "sub-sub-value1" : "This is one value",
           "sub-sub-value2" : "This is one more.."
        }
     },
     "value2" : "http://someURL.com",
     "value3" : "areferencejunkvalue",
  }
],
...<many such result sets>
 "status" : "status_value"
} 
```

解析这个简单的 JSON 文件的代码如下。

```
try {
JSONArray results = json.getJSONArray("results");
JSONObject value1 = results.getJSONObject("value1");
JSONArray subvalue = locationGeom.getJSONArray("sub-value");

for (int i = 0; i < results.length(); i++) {
      // Gets data for value2,value3
      String value2 = results.getString("value2");
      String value3 = results.getString("value3");

      // Gets data from the sub-sub-value1
      String ssv1 = subvalue.getJSONObject(0).getString("sub-sub-value1").toString();
      // Gets data from the sub-sub-value2
      String ssv2 = subvalue.getJSONObject(0).getString("sub-sub-value2").toString();
    }
 } catch (JSONException e1) {
Log.e("E", "Issue is here..");
e1.printStackTrace();
} 
```

现在的问题是：

```
05-06 23:39:07.846: W/System.err(378): org.json.JSONException: Value [JSONObject parsed] at results of type org.json.JSONArray cannot be converted to JSONObject 
```

谁能告诉我这里哪里出错了？真诚感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:03:43.127

`sub-value`不是数组，而是对象，例如：

```
JSONArray results = json.getJSONArray("results");
JSONObject value1 = results.getJSONObject(0).getJSONObject("value1");
JSONObject subvalue = locationGeom.getJSONObject("sub-value"); 
```

基本的提取规则非常简单：

```
from \ get  |  JSONObject                     | JSONArray
------------+---------------------------------+--------------------------------
JSONObject  | jobj.getJSONObject(String key); | jobj.getJSONArray(String key);
JSONArray   | jobj.getJSONObject(int index);  | jobj.getJSONArray(int index); 
```

另请参考：

*   [JSON 官方网站 - json.org](http://json.org/)
*   [JSONObject](http://developer.android.com/reference/org/json/JSONObject.html) / [JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)安卓文档

# erlang - list 转换为 pid 函数 list_to_pid/1 限制

> ID：10475321
> 
> 赞同：4
> 
> 时间：2012-05-07T00:01:11.270
> 
> 标签：erlang

在测试开源项目“gproc”功能时，我发现 list_to_pid 对于本地 pid 是可以的，而对于远程 pid 是不行的。我的 erlang 运行时是 R15B。

```
(dist_test_n2@yus-iMac.local)29> D = list_to_pid("<0.239.0>").
<0.239.0>
(dist_test_n2@yus-iMac.local)30> D == self(). %% equal here
true
(dist_test_n2@yus-iMac.local)31> f(E).
ok
(dist_test_n2@yus-iMac.local)32> E = gproc:where(Name).       
<8969.239.0>
(dist_test_n2@yus-iMac.local)33> F = list_to_pid("<8969.239.0>").
<8969.239.0>
(dist_test_n2@yus-iMac.local)34> F == E. %% not equal here
false 
```

从有关此功能的用户指南中，没有这样的限制。是虫子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:48:18.910

正如您可以[在此处](http://pdincau.wordpress.com/tag/pid/)确认的那样，无法将 list_to_pid/1 与外部 pid 一起使用。

如果你在谷歌上查看，我想你也可以找到 Ulf Wiger 开始的原始线程。

希望这可以帮助！

# c++ - CUDA：使用 tex2D() 的问题

> ID：10475326
> 
> 赞同：1
> 
> 时间：2012-05-07T00:02:11.553
> 
> 标签：c++, cuda, gpu, textures

我在尝试从 2D CUDA 数组中检索矩阵元素 A(m,n) 时遇到了很多麻烦。有趣的是，当 m = n 时，我得到了正确的元素；即元素沿对角线。否则，我会得到一些意想不到的行为：例如，如果我想获取元素 A(13,12)，并尝试使用 tex2D(tex, row + 0.5f, col + 0.5f) 检索它，我会得到 A (14,11)。据我所知，我正在做我应该做的一切，所以我真的很想知道我哪里出错了。

内核如下。错误发生在前两个`tex2D`电话之后，因此其余的并不真正相关。

```
texture<float, 2, cudaReadModeElementType> tex_a;
texture<float, 2, cudaReadModeElementType> tex_b;

// Assume that BinaryFunc is multiplication, and AccumulationFunc is addition.
// Then this kernel computes the standard matrix product, and uses prefetching
// with tile sizes given by the template parameter TileSize. 
template <unsigned TileSize, class T, class SizeType, class BinaryFunc,
         class AccumulationFunc>
    __global__ void
matrix_prod_tex_prefetch(T* c, const SizeType dim, BinaryFunc binary_func,
        AccumulationFunc accum_func)
{
    __shared__ T as[TileSize][TileSize];
    __shared__ T bs[TileSize][TileSize];
    SizeType row = blockIdx.y * TileSize + threadIdx.y;
    SizeType col = blockIdx.x * TileSize + threadIdx.x;
    T p = 0;

    T l = tex2D(tex_a, row + 0.5f, threadIdx.x + 0.5f);
    T m = tex2D(tex_b, threadIdx.y + 0.5f, col + 0.5f);
    __syncthreads();

    for (SizeType i = 1; i != dim / TileSize; ++i) {
        as[threadIdx.y][threadIdx.x] = l;
        bs[threadIdx.y][threadIdx.x] = m;
        __syncthreads();
        l = tex2D(tex_a, row + 0.5f, i * TileSize + threadIdx.x + 0.5f);
        m = tex2D(tex_b, i * TileSize + threadIdx.y + 0.5f, col + 0.5f);
        for (SizeType k = 0; k != TileSize; ++k) {
            p = accum_func(p, binary_func(
                        as[threadIdx.y][k],
                        bs[k][threadIdx.x]
                        ));
        }
        __syncthreads();
    }

    as[threadIdx.y][threadIdx.x] = l;
    bs[threadIdx.y][threadIdx.x] = m;
    __syncthreads();
    for (SizeType k = 0; k != TileSize; ++k) {
        p = accum_func(p, binary_func(
                    as[threadIdx.y][k],
                    bs[k][threadIdx.x]
                    ));
    }
    c[dim * row + col] = p;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:14:59.427

答案：将 threadIdx.x 与 threadIdx.y 交换。最终，它归结为语义问题：纹理使用索引作为沿我们都熟悉的 x 轴和 y 轴的偏移量。矩阵使用索引来引用行和列的索引。本质上，基向量是交换的。

请注意，虽然将 threadIdx.x 和 threadIdx.y 用于 1D 内存布局可能会产生相同的结果，但您可能会在此过程中丢失合并的内存访问模式。

# c# - 如何将多个 Combo Boxes 绑定到同一个数据集并只允许 1 个框选择每条数据？

> ID：10475327
> 
> 赞同：0
> 
> 时间：2012-05-07T00:02:21.057
> 
> 标签：c#, data-binding, combobox

现在我正在维护 4 个独立的数据源，并在每个组合框中添加和删除项目，因为该项目在另一个组合框中被选中/取消选中。

```
AvailibleColors1 = new List<String>(new String[] { Resources.Red, Resources.Orange, Resources.Blue, Resources.White, null, });
AvailibleColors2 = new List<String>(new String[] { Resources.Red, Resources.Orange, Resources.Blue, Resources.White, null, });
AvailibleColors3 = new List<String>(new String[] { Resources.Red, Resources.Orange, Resources.Blue, Resources.White, null, });
AvailibleColors4 = new List<String>(new String[] { Resources.Red, Resources.Orange, Resources.Blue, Resources.White, null, }); 
```

这是一个简单的游戏，玩家正在选择他们的颜色，其想法是玩家甚至不应该选择其他玩家已经选择的颜色。我当前的方法是有效的，但它很脆弱（comboBox 在添加/删除项目时并不总是更新，不知道为什么）并且不优雅。一如既往，提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:36:23.123

恕我直言，您应该使用单个`Observable Collection`作为数据源。将其绑定到所有组合框。现在，当一个组合框被选中时，从 OC 中删除该项目，以便其他应用它的组合框反映该更改。

[ObservableCollection<T> 类](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

第二种选择

我问了同样的问题。这是[链接](https://stackoverflow.com/questions/10495342/how-to-enforce-distinct-selections-when-multiple-comboboxs-are-bound-to-a-commo)。我没试过，所以试一试。

# ios5 - 从 MapKit 创建后在后台加载的 ViewController (didSelectAnnotationView)

> ID：10475328
> 
> 赞同：0
> 
> 时间：2012-05-07T00:02:23.320
> 
> 标签：ios5, uiviewcontroller, mapkit

我正在尝试从委托方法 didSelectAnnotationView 创建一个 ViewController。我有以下代码：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    DestinationViewController *destinationViewController = [[DestinationViewController alloc] init];
    NSNumber *mynumberId = [NSNumber numberWithInt:1];
    destinationViewController.mynumberId = mynumberId;
    [self.navigationController pushViewController:destinationViewController animated:YES];
} 
```

在我点击注释后，我看到的只是一个带有导航栏的黑色 ViewController 屏幕。但是日志告诉我一切都正确加载。所以看起来我的目标 ViewController 在后台某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:07:28.970

我在 Apple Developer Site 上进行了研究，并找到了我的问题的答案。我正在使用 Storyboards，这里是 Apple 的代码片段：

```
- (IBAction)presentSpecialViewController:(id)sender {

    UIStoryboard *storyboard = self.storyboard;

    SpecialViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"SpecialViewController"];

    // configure the new view controller explicitly here.

    [self presentViewController:svc animated:YES completion:nil];

} 
```

在这里您可以找到有关视图控制器编程的更多信息的链接：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:01:33.743

如果从 Nib 创建 VC，则需要使用 initWithNibName: 而不仅仅是 init。

如果以编程方式加载视图，则需要检查 viewDidLoad 方法。

这不是 mapKit 问题，但您没有按照应有的方式加载 VC 及其视图。

# php - 最佳实践检查 GET 或 POST 已设置且在 PHP5 中不为空

> ID：10475331
> 
> 赞同：0
> 
> 时间：2012-05-07T00:02:59.293
> 
> 标签：php

只是想知道以下检查是否设置了`$_GET`or的最佳实践`$_POST`？

```
if(isset($_GET['input']) && !empty($_GET['input']))

if(isset($_POST['input']) && !empty($_POST['input'])) 
```

如果不是，最好的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:06:04.660

如果你的意思是，它存在并且有一个值，那么，对于字符串

```
if (isset($_GET['foo']) && strlen($_GET['foo'])) {   } 
```

同时使用 isset() 和 !empty() 是多余的，你可以只使用 !empty()。确保您了解 empty() 的作用，它经常被误解。

再三考虑，添加类型检查对于一般情况可能是一个好主意，考虑到请求变量也可以是数组。否则可能会导致意外的功能。

```
if (isset($_GET['foo']) && is_string(($_GET['foo']) && strlen($_GET['foo'])) {   } 
```

# haskell - 不支持 Parsec.Expr 重复前缀/后缀运算符

> ID：10475337
> 
> 赞同：17
> 
> 时间：2012-05-07T00:04:11.153
> 
> 标签：haskell, parsec

的文档`Parsec.Expr.buildExpressionParser`说：

> 相同优先级的前缀和后缀运算符只能出现一次（即，如果- 是前缀否定，则--2 是不允许的）。

确实，这让我很痛苦，因为我试图解析的语言允许任意重复其前缀和后缀运算符（想想像这样的 C 表达式`**a[1][2]`）。

那么，为什么要`Parsec`做出这个限制，我该如何解决呢？

我想我可以将我的前缀/后缀解析器向下移动到`term`解析器中，因为它们具有最高优先级。

IE

```
**a + 1 
```

被解析为

```
(*(*(a)))+(1) 
```

但是如果我想让它解析为

```
*(*((a)+(1))) 
```

如果`buildExpressionParser`做了我想要的，我可以简单地重新排列表中运算符的顺序。

**注意**请参阅[此处](https://stackoverflow.com/questions/33214163/parsec-expr-repeated-prefix-with-different-priority/33534426#33534426)以获得更好的解决方案

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T01:41:33.740

我自己解决了这个问题`chainl1`：

```
prefix  p = Prefix  . chainl1 p $ return       (.)
postfix p = Postfix . chainl1 p $ return (flip (.)) 
```

这些组合器`chainl1`与`op`总是成功的解析器一起使用，并且简单地`term`以从左到右或从右到左的顺序组合解析器返回的函数。这些可以在`buildExprParser`表中使用；你会在哪里这样做：

```
exprTable = [ [ Postfix subscr
              , Postfix dot
              ]
            , [ Prefix pos
              , Prefix neg
              ]
            ] 
```

你现在这样做：

```
exprTable = [ [ postfix $ choice [ subscr
                                 , dot
                                 ]
              ]
            , [ prefix $ choice [ pos
                                , neg
                                ]
              ]
            ] 
```

这样，`buildExprParser`仍然可以用来设置运算符优先级，但现在每个优先级只能看到一个`Prefix`或`Postfix`运算符。但是，该运算符有能力尽可能多地复制自身，并返回一个函数，使其看起来好像只有一个运算符。

# playn - PlayN - 管理通用代码/本机代码

> ID：10475340
> 
> 赞同：2
> 
> 时间：2012-05-07T00:04:27.907
> 
> 标签：playn

我正在考虑使用 PlayN 来管理 Java 中的“通用代码”，并使用 PlayN 生成通用代码的 iOS、Android 和 HTML 本机版本。

我想我可以使用 playn 生成的本机代码并链接到实际的平台特定代码（例如 UI）。

换句话说，

Java中的通用代码库-> PlayN->本机通用代码库->与本机应用程序链接

将 Play 用于上述工作流程/管道是否合适？有什么挑战吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:13:23.033

首先，您必须为不同平台指定“本机”代码的含义。

在 Android 上，您的 java 文件是专门为 dalvik 编译/准备的。所以他们已经是一种时尚的“本地人”，不需要在这里做任何工作。如果您想使用 NDK 获得适用于 Android 的 C/C++ 本机代码，那么您就很不走运了。PlayN 不这样做，这是一个难题（从 Java 到 C++）

如果您看一下 PlayN 打算如何使用的 Maven 模块化布局，那么在公共代码中定义工厂接口并为每个模块传递特定于平台的实现并不难。以这种方式支持 Android 特定功能没什么大不了的。

对于 HTML 版本，您可以使用 JNI 毫无问题地使用 HTML 库，尽管与 PlayN 已经公开的功能相比，我想象的浏览器的特定功能确实价值有限。有用的一件事是文本/键盘输入，尽管我推荐 TriplePlay [https://github.com/threerings/tripleplay](https://github.com/threerings/tripleplay) UI 库，因为他们已经解决了这个问题，而且它是一个活跃的项目。

至于 iOS，这可能更复杂，因为 iOS 模块有点像 hack，其中编译的 Java 类通过 .net (IKVM) 的 JVM 运行时运行，然后使用 Monotouch 工具将整个东西编译为本机代码对于 iOS。见[https://github.com/samskivert/ikvm-monotouch](https://github.com/samskivert/ikvm-monotouch)

因此对于 iOS，您将无法将代码绑定到任何形式的本机版本，并且您可以通过工具链方法访问的内容在很大程度上取决于 Monotouch 为 iOS 提供的内容（我想很多），并且也是 IKVM-Monotouch 所支持的（我想是让 PlayN 工作的最低限度）。

我对 Flash 管道不够熟悉，无法给你一个评估，尽管我认为它非常灵活。

上面的答案是假设您的应用实际上是一个游戏。如果不是，并且您打算大规模使用各种平台的标准小部件库，那应该是可能的。在这里选择一个好的 MVP 框架会很好，并且根据它在不同主机环境上所做的假设将决定整个事情的简单程度。

我建议阅读和比较[https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)并可能看看[你最喜欢的 GWT MVP 框架是什么？](https://stackoverflow.com/questions/4399210/what-is-your-favorite-gwt-mvp-framework)

...尽管这些框架中的许多可能是特定于 GWT 的，并且并不真正适合在其他平台上重用。

# image-processing - 多路实时图像处理选择哪款开发板

> ID：10475342
> 
> 赞同：6
> 
> 时间：2012-05-07T00:05:10.037
> 
> 标签：image-processing, camera, embedded

作为一名程序员，我有很强的知识，但我对嵌入式开发和硬件非常陌生。我大约三个星期在寻找一些开发板，但我不想把我宝贵的钱花在一个错误的地方，我想问你们我是否做得对。

我需要为一副眼镜中的三个摄像头进行实时图像处理：一个具有平均分辨率（可能是 TCM8240MD CMOS 传感器 1300x1040）和两个用于直接跟踪眼睛瞳孔的小型摄像头（可能一个具有 120x90 黑白分辨率）。

我将需要跟踪双眼的方向并查看该人注视第三台摄像机的位置（更高分辨率）。当我这样做时，我将在第三台相机中进行多面检测，并检查瞳孔是否聚焦在其中一些检测到的面上。

我还打算在眼镜镜片中投射一些数据，以对检测到的人脸进行对焦，就像普通的相机一样，但尚未确认。

在一些地方（包括这里）进行研究后，我在其中许多地方找到了这两个选项：

*   Beagleboard-xM
*   ARM9板OK6410

最后一个带有 LCD，比 Beagleboard 便宜，但我不确定它是否能胜任。

如果您有任何其他建议，我将不胜感激。

价格可能在 250 美元左右，但越便宜，对我来说越好！

它也可以基于 Android 或基于 Linux。我认为OK6410支持Android。

Beagleboard 支持 OpenCV，我读到它可以帮助我进行图像处理。

在此先感谢并为我糟糕的英语道歉，Vinicius

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:07:53.413

我会推荐[PandaBoard](http://en.wikipedia.org/wiki/PandaBoard)。使用具有良好支持且 Linux 内核已针对硬件进行优化的板非常重要。PandaBoard 比 BeagleBoard 更强大（双核），价格约为 180 美元。您可以在其上安装 Ubuntu 或 Android，并使用 OpenCV。我会投票支持 Linux 而不是 Android，因为我认为后者会浪费处理能力，这对于您描述的任务可能非常重要。如果您要使用 USB 摄像头，可能一切正常，但仍尝试检查摄像头是否有 Linux 驱动程序。

**编辑：**有关板的相机支持的更多信息，请参阅[此链接。](http://www.omappedia.org/wiki/PandaBoard_Camera_Support)

# c# - RX - 仅在主题符合条件时运行代码

> ID：10475347
> 
> 赞同：0
> 
> 时间：2012-05-07T00:06:35.503
> 
> 标签：c#, system.reactive

我正在使用 observables 来处理 keydown 事件。我想发布一个可观察的，如果消费者实际处理了它，它将始终设置要处理的**密钥**。这可能吗？

这是我现在如何设置键的示例：

```
KeyDown.Where(e => e.Key == Keys.W)
.Subscribe(e => { Console.WriteLine(e.Key); e.Handled = true; }); 
```

这是一个我想如何做的例子（如果之后自动设置了处理的属性，我也可以发布 Keys 而不是 KeyDownEventArgs）：

```
HandledKeyDown.Where(k => k == Keys.W).Subscribe(k => Console.WriteLine(k)); 
```

这是我尝试过的：

```
HandledKeyDown = Observable.Create<Key>(observer => {
    var keys = KeyDown.Subscribe(e => { e.Handled = true; observer.OnNext(e.Key); });
    return () => keys.Dispose();
}); 
```

这段代码的问题是，无论消费者是否实际处理了它，密钥都将始终设置为已处理。

有没有办法知道代码是否“到达”了订阅方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:43:31.970

您想要的是重载订阅，`KeyEventArgs`以便在订阅后处理事件。听起来像一个扩展：

```
public static IDisposable SubscribeAndHandle(this IObservable<KeyEventArgs> input, Action<Keys> action)
{
    return input.Subscribe(e => { action(e.KeyCode); e.Handled = true; });
} 
```

然后你只需使用`SubscribeAndHandle`instead of `Subscribe`，它只会在动作运行后设置`Handled`为 true ，并且动作可以使用`Keys`not `KeyEventArgs`：

```
var sub = KeyDown
          .Where(e => e.KeyCode = Keys.W) // and so on
          .SubscribeAndHandle(k => Console.WriteLine(k)); 
```

* * *

请注意，`Do`如果您不介意`Handled`在执行操作之前将其设置为 true，则可以在扩展方法中使用。这是运行副作用的一种更简洁的方式：

```
public static IDisposable SubscribeAndHandle(this IObservable<KeyEventArgs> input, Action<Keys> action)
{
    return input.Do(e => e.Handled = true)
                .Select(e => e.KeyCode)
                .Subscribe(e => action(e));
} 
```

* * *

来自@Enigmativity 的有用评论建议您可能想`Handled`在订阅中决定是否设置为 true。这很简单，只需将扩展方法更改为接受 a`Func<Keys,bool>`而不是 a `Action<Keys>`：

```
public static IDisposable SubscribeAndHandle(this IObservable<KeyEventArgs> input, Func<Keys,bool> action)
{
    return input.Subscribe(e => e.Handled = action(e.KeyCode));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:17:50.627

我会考虑做这样的事情：

```
var HandledKeyDown =
    KeyDown
        .Do(e => { /* Handling Code Here */ })
        .Where(e => e.Handled)
        .Where(e => e.Key == Keys.W)
        .Select(e => e.Key)
        .Subscribe(k => Console.WriteLine(k)); 
```

扩展方法允许您“`Do`拦截”可观察内联的值。

让我知道这是否有帮助。

# javascript - Javascript：显示列表中一个元素的最佳方法

> ID：10475348
> 
> 赞同：3
> 
> 时间：2012-05-07T00:06:39.627
> 
> 标签：javascript

更好的方法是什么？

1.  将多个 DOM 元素添加到父节点并将除一个之外的所有元素设置为“隐藏”( `disply='none'`)。按需将当前可见元素设置为“隐藏”，将另一个元素设置为“可见”。

2.  只需添加一个 DOM 元素并根据需要更改其属性和内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:09:59.807

绝对是选项 1。搞乱 DOM 绝不是一个好主意。我们只是出于必要而这样做。

更改 DOM 越少越好。

PS记得缓存你的选择器......

# php - $_SERVER['SELF']

> ID：10475349
> 
> 赞同：1
> 
> 时间：2012-05-07T00:06:46.380
> 
> 标签：php

我正在尝试修改这个：

```
enter echo "<a href=\"  " . $_SERVER['PHP_SELF'] . "?c=$catId&p=$pd_id" . "<br>$pd_name</a><br>Price : $pd_price" . "</br>"; here 
```

我希望它显示在不同的页面中，所以我最终这样做了：

`echo "<a href=\"showcat.php?c=$catId&p=$pd_id\">$pd_name</a>";`

我创建了一个页面 showcat.php 来检索数据，但它每次都告诉我该页面不存在。我只是不想使用 $_SERVER['SELF']。谢谢伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:07:12.643

使用 $_SERVER['REQUEST_URI'] 怎么样？它给出了访问页面的 URI。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# php - 如何使用 .htaccess 将所有页面重定向到 https，但有例外？

> ID：10475356
> 
> 赞同：3
> 
> 时间：2012-05-07T00:08:32.933
> 
> 标签：php, apache, .htaccess, redirect, ssl

我已经使用 htaccess 强制所有页面重新路由到 https 使用...

```
RewriteEngine on
RewriteBase /

RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://ourdomain.com/$1 [R,L] 
```

有什么办法可以扭转 ourdomain.com/videos && ourdomain.com/blog 的规则，确保这些页面被迫放弃 https 并使用 http？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T01:04:36.660

您已经使用`RewriteCond`将重写限制为端口 80 上的请求。

您*不想*为 and 重写端口 80 上的请求`/videos`，`/blog`因此：

```
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/videos
RewriteCond %{REQUEST_URI} !^/blog
RewriteRule ^(.*)$ https://ourdomain.com/$1 [R,L] 
```

并且您想在端口（大概）443 上重写对这些 URL 的请求：

```
RewriteCond %{SERVER_PORT} 443
RewriteRule ^/((videos|blog)/.*) http://ourdomain.com/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:04:19.000

尝试

```
RewriteEngine on
RewriteBase /

RewriteCond %{SERVER_PORT} 443
RewriteRule ^blog/?(.*) http://ourdomain.com/blog/$1 [R,L]

RewriteCond %{SERVER_PORT} 443
RewriteRule ^videos/?(.*) http://ourdomain.com/videos/$1 [R,L]

RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/videos
RewriteCond %{REQUEST_URI} !^/blog
RewriteRule ^(.*)$ https://ourdomain.com/$1 [R,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T22:10:08.417

另一种解决方案。我希望它会有所帮助。

```
RewriteEngine on
Rewritebase /

RewriteCond %{SERVER_PORT} !^443$ [OR]
RewriteCond %{HTTPS} =off [OR]
RewriteCond %{ENV:HTTPS} =off
RewriteRule ^(/(.*))?$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

# android - Activity 生命周期 vs View 生命周期：如何避免 NPE？

> ID：10475359
> 
> 赞同：1
> 
> 时间：2012-05-07T00:09:07.850
> 
> 标签：android, sqlite, android-activity, nullpointerexception, lifecycle

我有一个`ListView`调整来自游标的数据。记录的光标位置通过 存储`View.setTag()`，因此可以在响应用户事件时检索它。

```
public class OrderActivity extends Activity {

  private ListView list;
  private CursorAdapter adapter;
  private SQLiteDatabase database;

  public void onResume() {
    database = new Database(this).getWriteableDatabase();
    // query the db and store the position of the cursor
    // as the tag while binding the view in the overridden
    // CursorAdapter.bindView()
    adapter = new SimpleCursorAdapter( /* code here */ );
    list.setAdapter(adapter);
  }

  public void onPause() {
    adapter.changeCursor(null);
    database.close();
  }

  private void onClickRowDumpOrder(View row) {
    int newPosition = (Integer) row.getTag();
    Cursor cursor = adapter.getCursor();
    int originalPosition = cursor.getPosition(); // Throws NPE

    cursor.moveToPosition(newPosition);
    Log.v("tag", "Description: " + cursor.getString(0));

    // restore the cursor
    cursor.moveToPosition(originalPosition);
  }

} 
```

我将数据库和适配器存储在我的 Activity 的实例字段中，以在 Activity 生命周期内分配/释放资源：我创建一个新数据库`onResume`并关闭它`onPause`。不幸的是，我收到很多来自我的用户的报告，说在上面的伪代码中概述的行中抛出了 NPE，但我无法重现它。

似乎`cursor`是这样`null`，但我想知道如果该方法`onClickRowDumpOrder`只能在之后调用，这怎么可能`onResume`，因为它是点击事件的回调（我在 XML 布局中设置了这个`android:onClick`）

难道我做错了什么？什么 API 误用导致`cursor`为空？是否有一些文档描述了游标和适配器如何适应活动生命周期？

**更新**

我摆脱了`android:onClick`我的 XML 文件并在其中手动设置了侦听器`SimpleCursorAdapter.bindView`。为避免泄漏，我在自定义[`AbsListView.RecycleListener`](http://developer.android.com/reference/android/widget/AbsListView.html#setRecyclerListener%28android.widget.AbsListView.RecyclerListener%29)和活动中删除了侦听器`onPause`（我使用 检索所有视图[`reclaimViews(List<View>)`](http://developer.android.com/reference/android/widget/AbsListView.html#reclaimViews%28java.util.List%3Candroid.view.View%3E%29)）。这似乎修复了错误，这是我的解释。

1.  当我的活动第一次开始时，一个新的视图被夸大了
2.  `android:onClick`解析属性时，我的活动的实例#1 在视图的构造函数中设置为该特定视图的 OnClickListener
3.  instance#1 离开前台，因此 onPause() 将光标设置为空。请注意，此活动仍然是视图的侦听器，因为视图和活动都没有标记为垃圾回收。这意味着它们在 Android 类的某些缓存中被引用
4.  我的活动的实例#2 被创建，它的列表视图在某种程度上**回收**了已经创建的视图。数据显示正确，但此视图仍将旧活动（带有空光标）作为侦听器
5.  当用户单击我的视图时，将调用 instance#1 处理程序，但它有一个空光标。这会导致 NPE

这个解释很现实，但是我在Android类中没有找到相关代码（里面有缓存`AbsListView.RecycleBin`，但是ListView本身没有复用）。此外，我从来没有能够重现这个错误，我只是认为我的修复工作是因为在过去的两天里我没有收到任何报告（通常我每天收到几十个）

您是否知道 Android 堆栈中的任何代码可以验证我的假设？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:22:33.477

我认为您在 Activity 生命周期中的错误点创建光标。[ListView 示例](http://developer.android.com/resources/tutorials/views/hello-listview.html)将`onCreate()`您拥有的内容放入`onResume()`. 我不知道它一定有害，但您可能正在重新创建一些不需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:37:24.963

你可以试试这个方法。 `if (cursor.moveToFirst()) { for (int i = 0; i < cursor.getCount(); i++) { cursor.moveToPosition(i); } }`

# android - 使用 javamail 阅读最新的线程邮件

> ID：10475366
> 
> 赞同：0
> 
> 时间：2012-05-07T00:11:07.320
> 
> 标签：android, email, jakarta-mail, email-threading

正如我们所知，会话线程是许多电子邮件客户端使用的功能，其中软件通过视觉分组消息来帮助用户。

[我使用在 Android.Guide 上运行的](https://stackoverflow.com/questions/5366767/retrieve-unread-emails-from-gmail-javamail-api-imap)javamail 构建了一个电子邮件客户端应用程序，我已经成功地收到未读消息。此输出是嵌套邮件，如转换

```
 - A replay to B (latest message)
     - B reply to A
        - mail from A to B (first mail) 
```

我的问题是，我只想获取此线程上的最新消息 [A 重播到 B（最新消息）]。我该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:26:17.467

您将不得不请求足够的信封/标题信息来确定是哪条消息，然后您只能获取该消息的内容。

# compiler-errors - SLIME 编译失败，只有警告

> ID：10475367
> 
> 赞同：1
> 
> 时间：2012-05-07T00:11:09.837
> 
> 标签：compiler-errors, lisp, common-lisp, slime

我有一个正在尝试使用 SLIME 编译的程序，并且我收到了一条`Compilation failed.`消息，即使我唯一`compiler notes`的警告都是警告。

如果我将其全部突出显示并转到菜单选项**SLIME > Compilation > Compile Region**但**编译文件**(Cc Mk) 失败，则代码将编译（带有相同的警告集）。

我怀疑我需要切换某种触发器或命令来指示 SLIME 忽略警告。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:30:52.363

您收到的警告类型是相关的。 [指定](http://www.lispworks.com/documentation/HyperSpec/Body/f_cmp_fi.htm)`compile-file`为在编译触发条件“<em>类型**错误**或**警告**（**样式警告**除外）”时表示失败。Common Lisp 编译器所称的警告（与样式警告相反）通常是需要修复的。

# php - PHP Facebook登录用户的自动关注系统

> ID：10475371
> 
> 赞同：0
> 
> 时间：2012-05-07T00:12:33.597
> 
> 标签：php, facebook

我正在尝试制作一个自动关注新用户的 Facebook 朋友的系统。

当用户使用他们的 Facebook ID 登录网站时，服务器会将他们的 Facebook id 号码存储到 db 列中。

因此，我想检索 Facebook 朋友 ID 号码并将它们与当前签名用户的 Facebook ID 号码相匹配。

这是来自 Facebook 朋友的数组数据。

```
Array (
    [data] => Array (
        [0] => Array (
            [name] => James1
            [id] => 1111
        )
        [1] => Array ( 
            [name] => James2
            [id] => 2222
        )
        [2] => Array (
            [name] => James3
            [id] => 3333
        )
        [3] => Array ( 
            [name] => James4
            [id] => 4444
        )
        [4] => Array ( 
            [name] => James5
            [id] => 5555
        ) [5] => Array ( 
            [name] => James6
            [id] => 6666
        )
    )
) 
```

我尝试使用 in_array PHP 命令，但没有用。

你能告诉我怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:29:33.217

尝试：

```
foreach($yourArr['data'] as $val) {
   if($yourUserId == $val["id"]) {
      ///found
      break;
   }
} 
```

# parsing - 如何检查 JavaCC 中应用了哪个正则表达式

> ID：10475374
> 
> 赞同：0
> 
> 时间：2012-05-07T00:13:39.150
> 
> 标签：parsing, javacc

我有以下正则表达式

```
TOKEN:{
  <CONSTANT:(<DIGIT>)+>
  | <ID:<LETTER>(<LETTER> | <DIGIT>)*>
  | <#DIGIT:["0"-"9"]>
  | <#LETTER:["a"-"z","A"-"Z","_"]>
} 
```

现在我想知道如何检查当前令牌是 ID 还是 CONSTANT

```
public class eg1 {
  public static void main(String args[]) throws ParseException {
    eg1 parser = new eg1(System.in);
    Token token = parser.getNextToken();

    if(token is ID) System.out.print("Token is ID");
    else System.out.print("Token is CONSTANT");   
  }
} 
```

JavaCC中如何表达（token为ID）？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:57:11.163

您已`int ID`在 eg1Constants.java 中定义并与之比较`token.kind`，因此您正在寻找

> if (token.kind == eg1Constants.ID) System.out.print("Token is ID");

有关详细信息，请参阅[JavaCC 常见问题解答](http://www.engr.mun.ca/~theo/JavaCC-FAQ/javacc-faq-moz.htm)。

# javascript - jQuery - 获取列表项集合的选定选项？

> ID：10475377
> 
> 赞同：0
> 
> 时间：2012-05-07T00:14:34.463
> 
> 标签：javascript, jquery, asp.net

我有用户将输入的字段，我会将其传递给 jQuery 并传递给 Web 服务。

我可以通过以下方式获取文本框值：

var name = $("#MainContent_txtName").val()

我遇到的问题是包含列表项集合的多选。如果我要做这个服务器端，我会做类似的事情：

```
foreach (ListItem li in listTitles)
{
   if (li.Selected)
   {
     selectedValue += li.Value + ",";
   }
} 
```

这会给我从选择列表中选择的值的字符串。我无法从 jQuery 中获取它。如果我做

```
var titles = $("#MainContent_selectListTitles").val() 
```

这显然是不正确的，因为它不会带回选定的列表项。我看到一个帖子建议如果我说选择了选项，我可以检索它。所以我尝试了这个：

```
var titles= $('#MainContent_selectListTitles option:selected'); 
```

我做的下一件事是弹出一个警报，看看标题是什么。它只是说[对象，对象]。

所以我的问题是：

1.  是否可以将列表项集合中的选定项连接成一个字符串？

2.  还是最好从回发中获取所有表单值，即使是在我的代码后面，然后调用 jquery 函数？如果这是一个选项，我已经尝试这样做但失败了。它告诉我它找不到方法。所以我绝对没有在按钮事件的回发时正确调用 jquery 函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:40:05.513

我对您的警报中有 [object, object] 并不感到惊讶-那是因为您已经拥有和选定项目的数组（实际上，选择了两个项目）并且警报将您的数组显示为 [object, object]很好。

具有以下 html 标记：

```
 <div>
        <select multiple="multiple" id="mySelect">
            <option value="test1" selected="selected">Test 1</option>
            <option value="test2">Test 2</option>
            <option value="test3" selected="selected">Test 3</option>
        </select>
    </div> 
```

以及以下脚本：

```
<script type="text/javascript">
    $.ready = function () {
        var selectedItems = $("#mySelect option:selected");
        for (var i = 0; i < selectedItems.length; i++) {
            alert("The value is: "+selectedItems[i].value + "; the text is: "+selectedItems[i].text);
        }
    }
</script> 
```

可能会解决你的问题。

实际上，手动绑定数据是一件非常痛苦的事情，我建议您查看现代 MVVM 库，例如 knockout.js。例如： http: [//knockoutjs.com/examples/controlTypes.html](http://knockoutjs.com/examples/controlTypes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:39:00.100

首先，确保您的项目 id 在客户端是正确的，即“MainContent_selectListTitles”。您可以通过“查看源代码”进行检查。

如果 ID 正确，请按照此操作。

```
 $('#MainContent_selectListTitles').change(function () {
         var str = "";
         $('#MainContent_selectListTitles option:selected').each(function () {
              str += $(this).text() + " ";
              //pass str value to your web service here.
         });
    }).trigger('change'); 
```

每次有变化时，它都会调用这个函数，这意味着它会让你的网络服务繁忙。如果需要，您可以将上面的代码移动到按钮单击事件。

# emacs - AUCTeX 中的自动标记环境

> ID：10475379
> 
> 赞同：9
> 
> 时间：2012-05-07T00:14:46.030
> 
> 标签：emacs, latex, auctex

如果我通过`C-c C-e`（例如`equation`或`figure`）在 AUCTeX 中插入一些环境，那么 AUCTeX 会要求一个带有自动插入文本的标签`eq:`或`fig:`.

我想`theorem`在 AUCTeX 中为 LaTeX 环境添加环境。我这样做了

```
(add-hook 'LaTeX-mode-hook
        (lambda ()
          (LaTeX-add-environments
            '("theorem" LaTeX-env-label)
))) 
```

此外，我有类似的东西

```
(setq reftex-label-alist
      '(
        ("theorem" ?t "thm:" "~\\ref{%s}" t  ("theorem" "th."))
        )) 
```

然后当我`C-c C-e`用来添加`theorem`环境时，它会要求一个定理的标签，但没有自动`thm:`文本。我需要手动添加。

是否可以使 AUCTeX 添加环境的行为与向标签添加自动文本`theorem`相同`equation`？`figure``thm:`

澄清一下，如果我添加`theorem`没有标签的环境，然后`C-c (`使用 RefTeX 添加标签，那么它会要求表单中的标签`thm:`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:03:22.193

终于明白了。

我不知道在添加了类似的东西之后

```
(setq reftex-label-alist
      '(
        ("theorem" ?t "thm:" "~\\ref{%s}" t  ("theorem" "th."))
        )) 
```

我`.emacs`应该做的

```
reftex-reset-mode 
```

如果我把它放在`.emacs`我的 RefTeX 选项之后，那么一切都会很好。

# jquery - Zepto.js 选择器性能与 jquery

> ID：10475384
> 
> 赞同：2
> 
> 时间：2012-05-07T00:15:18.050
> 
> 标签：jquery, performance, zepto

我确实看到一些测试表明 id 和类选择器 ($(#id); $(.class)) 比 jquery 慢。

我在想：

1.  差异显着吗？（显）
2.  只有在循环中使用它/选择许多元素时，差异才明显吗？

我正在考虑为我的桌面应用程序切换到 zepto，因为无论如何我只需要现代 webkit 和 firefox 支持。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:42:17.030

我发现这个 jsperf 测试表明速度差异很大：http: [//jsperf.com/qwery-vs-jquery-vs-mootools-selector-engines/11](http://jsperf.com/qwery-vs-jquery-vs-mootools-selector-engines/11)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T19:57:20.103

现在解决了；）

[https://github.com/madrobby/zepto/issues/486](https://github.com/madrobby/zepto/issues/486)

zepto 尽可能快地使用本机浏览器解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:32:51.150

Zepto 只支持现代浏览器，所以我不明白为什么它会比 jQuery 慢

$(#id) 和 $(.class) 映射到 Zepto 中的本机浏览器方法 getElementByID、getElementByClass（在 jQuery 中也适用于现代浏览器）

我想唯一确定的方法是进行测试...

# php - 如何将图像的名称作为参数传递？

> ID：10475385
> 
> 赞同：0
> 
> 时间：2012-05-07T00:15:27.057
> 
> 标签：php, javascript, jquery, sql, ajax

我正在努力实现某些目标，但我不太明白该怎么做。我认为我需要做的是将图像的名称作为参数传递给 cancelimage.php 脚本并在查询中使用它。但我不认为我是用 var image_file_name 来做的。我需要做什么才能实现这一目标？

下面是 startImageUpload() 函数，它开始上传图像并且存在取消按钮：

```
 function startImageUpload(imageuploadform){

    ...

                $(".imageCancel").on("click", function(event) {

var image_file_name = $(this).attr('image_file_name');

                jQuery.ajax("cancelimage.php"  + image_file_name)
                    .done(function(data) {

                    $(".imagemsg" + _cancelimagecounter).html(data);
                });

                return stopImageUpload();

            });       
                  return true;
            } 
```

下面是cancelimage，php页面，假设从数据库中删除一行？

```
<?php

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$image_file_name = $_GET["fileImage"]["name"];

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:24:02.163

如果这是仅通过“image_file_name”传递的变量的问题，那么为什么不尝试像这样实现它：

```
var image_file_name = "<?php echo $image_file_name; ?>" 
```

然后你可以像普通的 mannar 一样将它作为 url 转发到 ajax 调用：

```
 jQuery.ajax("cancelimage.php"  + image_file_name)
                    .done(function(data) {
                   .....some code here....

    }); 
```

# service - 如何在 dotCloud 上部署 Riak？

> ID：10475394
> 
> 赞同：0
> 
> 时间：2012-05-07T00:18:13.607
> 
> 标签：service, riak, dotcloud

如何在 dotcloud 上启动 riak 服务？我试过了：

```
data:
   riak 
```

它说该服务无法识别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:50:03.253

dotCloud 上的 Riak 支持处于 alpha 阶段。[您可以按照本食谱](https://github.com/jpetazzo/riak-on-dotcloud-ALPHA)中的说明进行测试。

# c - 谁能帮我让我的大脑休息一下“C语言”

> ID：10475395
> 
> 赞同：-4
> 
> 时间：2012-05-07T00:18:22.527
> 
> 标签：c

好的，这是一个简单的 C 代码，但由于某些未知原因，程序拒绝编译并给出分段错误 11 请帮助我

```
#include <stdio.h> 

typedef struct {
    int P_answer[9];
    int number;
} BOX;

int main()
{
    BOX Matrix[8][8];
    int i,j;
    int k;
    for(i=0;i<9;i++){
        for(j=0;j<9;j++){
            Matrix[i][j].number=0;
            Matrix[i][j].P_answer[0]=1;
            Matrix[i][j].P_answer[1]=2;
            Matrix[i][j].P_answer[2]=3;
            Matrix[i][j].P_answer[3]=4;
            Matrix[i][j].P_answer[4]=5;
            Matrix[i][j].P_answer[5]=6;
            Matrix[i][j].P_answer[6]=7;
            Matrix[i][j].P_answer[7]=8;
            Matrix[i][j].P_answer[8]=9;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T00:20:21.550

矩阵是一个 8×8 数组；您的每个循环都经过 9 次迭代。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T00:21:37.727

数组的索引从 0 到 (size-1)。

在你的 for 循环中，你从 0 到 size。

这就是你的分段错误的原因。

# php - Amazon RDS 和 Zend 框架 2

> ID：10475398
> 
> 赞同：2
> 
> 时间：2012-05-07T00:19:12.260
> 
> 标签：php, mysql, amazon-web-services, amazon-rds, zend-framework2

我在从[Zend Framework 2 教程应用程序连接到我的 Amazon RDS 数据库时遇到问题。](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework-2.pdf)

我不断收到以下错误：

```
PDOException: SQLSTATE[28000] [1045] Access denied for user 'db_user'@'localhost' (using password: YES) in C:\wamp\www\zf2-tutorial\vendor\ZendFramework\library\Zend\Db\Adapter\Driver\Pdo\Connection.php on line 214 
```

我使用 MySQL Workbench 或 Toad 连接到数据库没有问题，所以我认为数据库安全组不是问题。此外，PHP 应用程序也可以很好地连接到本地数据库。

我想知道为什么错误消息说`db_user'@'localhost`。不应该说`db_user'@'RDS host url`吗？

我的连接字符串是：

```
'driver' => array(
'driver' => 'Pdo',
'dsn' => 'mysql:hostname=xxxxxxxx.xxxxxxxxx.us-east-1.rds.amazonaws.com;dbname=zf2-tutorial',
'username' => 'db_user',
'password' => 'xxxxxxx',
'driver_options' => array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:18:50.033

原来问题出在 dsn 字符串中，与其他 MySQL 服务器不同，Amazon RDS 不理解“主机名”。如果更改为“主机”，它就可以正常工作！

'dsn' => 'mysql:**主机**=xxxxxxxx.xxxxxxxxx.us-east-1.rds.amazonaws.com;dbname=zf2-tutorial',

感谢所有的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:10:42.953

根据 Zend 的文档，将主机变量添加到您的配置中

```
'driver' => array(
    'driver' => 'Pdo',
    'dsn' => 'mysql:hostname=xxxxxxxx.xxxxxxxxx.us-east-1.rds.amazonaws.com;dbname=zf2-tutorial',
    'username' => 'db_user',
    'password' => 'xxxxxxx',
    'host'  => 'xxxxxxxx.xxxxxxxxx.us-east-1.rds.amazonaws.com', // Possible here
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
),
'host'  => 'xxxxxxxx.xxxxxxxxx.us-east-1.rds.amazonaws.com', // Most likely here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:00:47.973

MySQL PDO DSN 需要**host**，而不是 hostname：

[http://php.net/manual/en/ref.pdo-mysql.connection.php](http://php.net/manual/en/ref.pdo-mysql.connection.php)

我刚刚在 ZF2 教程之后犯了同样的错误，对为什么配置忽略主机名更改感到困惑，直到我阅读 PHP PDO 文档，将其更改为**主机**（如您所见）并且神奇地一切正常

# android - 如何在 Android WebView 中包含 BACK 键

> ID：10475402
> 
> 赞同：1
> 
> 时间：2012-05-07T00:19:34.407
> 
> 标签：android, webview

我已经在这个网站、谷歌和另一个安卓论坛上寻找答案，但我找不到一个有效的。

我试图在我的 Android WebView 应用程序中包含 BACK 键，否则 BACK 键只会退出活动。

我是 Android 新手，所以我不知道如何编程。有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:37:25.280

`Activity`按如下方式截取 BACK 按钮...

```
public class MyWebActivity extends Activity {

    WebView webview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // Other code here
        webview = new WebView(this);
    }

    // Other methods here

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()) {
            webview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

[在Hello WebView 教程](http://developer.android.com/resources/tutorials/views/hello-webview.html)的第 9 部分中进行了解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:26:28.627

在您的活动中覆盖 onbackpressed。

```
@Override
public void onBackPressed() {

} 
```

如果您不想在背压时关闭活动，那么您可以简单地删除 super.onBackPressed() 这将不允许完成您的活动，并且您的活动将在背压上正常工作而无需关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T00:42:27.383

例如，我正在通过 Android 在我的 WebView 中进行下一个捕获 URL；

在您的方法 shouldOverrideUrlLoading 中：

```
public boolean shouldOverrideUrlLoading(WebView view, String url)
            {
                view.loadUrl(url);
                webView.getUrl();
                if( url.equals("http://any.com/url") ){
                   //Do any action
                    Toast tr =Toast.makeText(WebViewTest.this, "Test Passed", Toast.LENGTH_LONG);
                    tr.show();
                    //Go to other activity or you can put finish(); to stop the actual activity
                   //Do other action
                    Intent i1 = new Intent("com.mypack.courses.Passed");
                    startActivity(i1);;
                    return true;
                }
                if( url.equals("http://any.com/url") ){
                    Toast tr =Toast.makeText(WebViewTest.this, "Test Failed", Toast.LENGTH_LONG);
                    tr.show();

                   Intent i2 = new Intent("com.mypack.courses.Failed");
                   startActivity(i2);
                    return true;
                }
                return true;
            } 
```

在这种情况下，如果用户在Webview上点击“http://any.com/url”，我们做任何动作，只要把你的条件或方法，你想做什么，希望这能给你想法...

# sqlite - sqlite 返回 0 行

> ID：10475403
> 
> 赞同：1
> 
> 时间：2012-05-07T00:19:43.390
> 
> 标签：sqlite

```
SELECT   skill_name, character_name,  cb_id, cb_id2 FROM  characterbasics, characterskills WHERE  characterbasics.character_name = 'Joe' & characterbasics.cb_id =  characterskills.cb_id2 
```

由于某种原因，这返回 0 行

字符名称在那里（以及其他 2 个虚拟名称）.. cbid 和 cbid2 都是相同的。当我尝试不带 & cbid=cbid2 的查询时，我得到带有其他数据的名称.. 现在，当我检查 JUST cbid=cbid2 时，我得到了我创建的 3 个不同的虚拟字符......我试图拉出所有相关的“技能”通过将表 1 中的字符名称的 id 与表 2 中的字符 id 匹配一个字符

我哪里错了？cn = 角色名称

```
cn    cbid    cbid2
Joe   2         2 
```

这就是它应该看起来的样子..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:26:15.663

您不能将 & 用作逻辑 AND 运算符（& 是二元运算符），因此 sql 应如下所示：

```
SELECT skill_name, character_name, cb_id, cb_id2 
FROM characterbasics, characterskills 
WHERE  characterbasics.character_name = 'Joe' AND characterbasics.cb_id =  characterskills.cb_id2 
```

# c - 如何在 C 中使用 GDI 渲染图像？

> ID：10475408
> 
> 赞同：0
> 
> 时间：2012-05-07T00:20:28.163
> 
> 标签：c, windows, user-interface, gdi

非常简单的问题：如何在 C 中使用 GDI 渲染 png 图像（包括其透明度）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:17:21.537

我选择了 GDI+ 而不是 GDI。

# sql - SQL JOIN 奇怪的行为

> ID：10475411
> 
> 赞同：0
> 
> 时间：2012-05-07T00:20:36.637
> 
> 标签：sql, join

我对 SQL 很陌生。

我有两个要合并的表，以下代码有效

```
SELECT *
FROM confirm
JOIN order ON confirm.email = order.email 
```

但是这个对我不起作用

```
SELECT *
FROM confirm
JOIN order ON confirm.custid = order.custid 
```

这里的所有内容（电子邮件，custid）都是 VARCHAR(22)。对于第一个，我得到了预期的结果，但第二个没有匹配的结果。email 和 custid 记录在记录之间是可变长度的。我也试过 trim() - 没用。任何指针？

AND custid 采用以下格式 AB12345 - 两个字母和数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:34:49.277

正如 Jeremy 在他的评论中所说，如果“custid”不完全匹配，它将不会加入。

示例：表 1：电子邮件：abc@abc.com 客户 ID：AB12345

电子邮件：abc2@abc.com 客户 ID：AB12346

表 2：电子邮件：abc@abc.com 客户 ID：AB12345

电子邮件：abc3@abc.com 客户 ID：AB12347

如果你这样做：

```
SELECT * FROM TableA A
INNER JOIN TableB B on B.CustId = A.CustId 
```

您的结果将是：电子邮件：abc@abc.com 和 CustId：AB12345

这是因为这些列相互匹配。abc2 和 abc3 在两个表中都不匹配，因此它们不会出现在结果中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:35:04.800

您首先检查两个表是否存在任何匹配的 custid，如果有应用一些 where 条件并将其过滤掉，例如 select * from tblconfirm where custid="AB1234"，就像其他表的情况下的 chck，如果有那么就没有问题，否则不会有结果。

# ruby-on-rails - ruby on rails i18n 和 number_to_currency 负值

> ID：10475412
> 
> 赞同：2
> 
> 时间：2012-05-07T00:21:26.213
> 
> 标签：ruby-on-rails, ruby, internationalization

我正在使用 number_to_currency 来显示金额，但我遇到了负值问题。我的 hr.yml 看起来像这样：

```
 number:
    currency:
      format:
        format: "%n %u"
        separator: ","
        delimiter: "."      
        unit: "KN" 
```

正常的数字看起来还可以。例如对于 212，我得到 212,50 KN，这是正确的。但是对于 -212 我得到了 -KN212,50 这是错误的。我在任何地方都找不到解决方案。我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:18:09.917

只需将此行放入您的`config/locales/your-locale.yml`文件中：

```
 number:
    currency:
      format:
        negative_format: '-%n %u' 
```

并对其进行更改，使其适合您的需求。

在 Rails 3.1.6 应用程序中测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T08:32:05.470

您可以在 number_to_currency 调用中指定否定格式：

```
number_to_currency(1.99, :negative_format => '- %n %u') 
```

除非我弄错了，否则不幸的是，似乎没有办法将此格式存储在您的 YAML 文件中：[https ://github.com/rails/rails/blob/c70135807ed786e6c9e18a35cc83ac6007450ca2/actionpack/lib/action_view/helpers/number_helper .rb#L123](https://github.com/rails/rails/blob/c70135807ed786e6c9e18a35cc83ac6007450ca2/actionpack/lib/action_view/helpers/number_helper.rb#L123)

# c# - 如何使用 MonoTouch.ObjCRuntime.Selector 和 Perform Selector 发送参数

> ID：10475415
> 
> 赞同：7
> 
> 时间：2012-05-07T00:21:47.350
> 
> 标签：c#, iphone, ios, xamarin.ios, monodevelop

这是我找到的一个示例，但他们省略了实际发送参数。

```
this.PerformSelector(new MonoTouch.ObjCRuntime.Selector("_HandleSaveButtonTouchUpInside"),null,0.0f);

[Export("_HandleSaveButtonTouchUpInside")]
    void _HandleSaveButtonTouchUpInside()
    {
...
} 
```

我希望能够做这样的事情：

```
this.PerformSelector(new MonoTouch.ObjCRuntime.Selector("_HandleSaveButtonTouchUpInside"),null,0.0f);

[Export("_HandleSaveButtonTouchUpInside")]
    void _HandleSaveButtonTouchUpInside(NSURL url, NSData data)
    {
...
} 
```

如何更改 PerformSelector 调用以将参数发送到方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T02:59:11.410

[MonoTouch 文档](http://iosapi.xamarin.com/?link=M%3aMonoTouch.Foundation.NSObject.PerformSelector%28MonoTouch.ObjCRuntime.Selector,MonoTouch.Foundation.NSObject,System.Double%29)表明该方法映射到 Obj-C 选择器，[`performSelector:withObject:afterDelay`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)它仅支持使用单个参数调用选择器。

处理此问题的最佳方法取决于您需要做什么。处理此问题的一种典型方法是将参数作为属性/字段放在单个 NSObject 上，然后将目标修改为具有单个参数，并从该方法中提取真正的参数。如果您使用自定义 MonoTouch 对象执行此操作，则必须注意 GC 收集托管对等点，如果托管代码中没有任何内容保留对它的引用。

更好的解决方案将取决于您如何使用它。例如，在您的示例中，您可以直接调用 C# 方法，例如

```
_HandleSaveButtonTouchUpInside (url, data); 
```

如果您出于某种原因需要通过 Obj-C 进行调度，但不需要延迟，请使用[MonoTouch.ObjCRuntime.Messaging](http://iosapi.xamarin.com/?link=M%3aMonoTouch.ObjCRuntime.Messaging.void_objc_msgSend_IntPtr_IntPtr%28System.IntPtr,System.IntPtr,System.IntPtr,System.IntPtr%29)，例如

```
MonoTouch.ObjCRuntime.Messaging.void_objc_msgSend_IntPtr_IntPtr (
    target.Handle,
    MonoTouch.ObjCRuntime.Selector.GetHandle ("_HandleSaveButtonTouchUpInside"),
    arg0.Handle,
    arg1.Handle); 
```

如果您需要延迟，可以使用[NSTimer](http://iosapi.xamarin.com/?link=M%3aMonoTouch.Foundation.NSTimer.CreateScheduledTimer%28System.TimeSpan,MonoTouch.Foundation.NSAction%29)。MonoTouch 添加了对此的特殊支持以使用[NSAction](http://iosapi.xamarin.com/?link=T%3aMonoTouch.Foundation.NSAction)委托，因此您可以使用 C# lambda 安全地捕获参数。

```
NSTimer.CreateScheduledTimer (someTimespan, () => _HandleSaveButtonTouchUpInside (url, data)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T02:36:02.877

我也找不到此调用的绑定。在下面的示例中，我为 PerformSelector 添加了我自己的重载。也许其中一位 Xamarin 工程师可以证实这一点。

```
using System;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using MonoTouch.ObjCRuntime;
using System.Runtime.InteropServices;

namespace delete20120506
{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        UIWindow window;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            // 
            Target target = new Target ();
            NSUrl url = new NSUrl ("http://xamarin.com/");
            NSData nsData = NSData.FromString ("Hello");

            target.PerformSelector (new MonoTouch.ObjCRuntime.Selector 
                                  ("TestSelUrl:withData:"), url, nsData);

            window.MakeKeyAndVisible ();

            return true;
        }
    }

    [Register ("Target")]
    public class Target : NSObject
    {
        public Target () : base (NSObjectFlag.Empty) {}

        [Export("TestSelUrl:withData:")]
        void TestSelUrlWithData(NSUrl url, NSData nsData)
        {
            Console.WriteLine ("In TestSelUrlWithData");
            Console.WriteLine (url.ToString ());
            Console.WriteLine (nsData.ToString ());
            return;
        }

        [DllImport ("/usr/lib/libobjc.dylib", EntryPoint = "objc_msgSend")]
        public static extern void void_objc_msgSend_intptr_intptr_intptr (IntPtr receiver, IntPtr selector, IntPtr arg1, IntPtr arg2, IntPtr arg3);

        [DllImport ("/usr/lib/libobjc.dylib", EntryPoint = "objc_msgSendSuper")]
        public static extern void void_objc_msgSendSuper_intptr_intptr_intptr (IntPtr receiver, IntPtr selector, IntPtr arg1, IntPtr arg2, IntPtr arg3);

        public virtual void PerformSelector (MonoTouch.ObjCRuntime.Selector sel, 
                                              NSObject arg1, NSObject arg2)
        {
            if (this.IsDirectBinding)
            {
                void_objc_msgSend_intptr_intptr_intptr (this.Handle, 
                    Selector.GetHandle ("performSelector:withObject:withObject:"),
                    sel.Handle, arg1.Handle, arg2.Handle);
            }
            else
            {
                void_objc_msgSendSuper_intptr_intptr_intptr (this.SuperHandle,
                    Selector.GetHandle ("performSelector:withObject:withObject:"), sel.Handle, 
                    arg1.Handle, arg2.Handle);
            }
        }
    }
} 
```

# c# - 剪裁图像

> ID：10475416
> 
> 赞同：1
> 
> 时间：2012-05-07T00:21:49.663
> 
> 标签：c#, image, image-processing, clip

我有以下代码可以处理来自流的图像。我的意图是选择它的一个子区域并将其调整为 100x100。我事先不知道图像的格式。

```
var image = new Bitmap(stream);

var destArea = new Rectangle(0, 0, 100, 100);
var srcArea = new Rectangle(x, y, width, height);

var gfx = Graphics.FromImage(image);
gfx.DrawImage(image, destArea, srcArea, GraphicsUnit.Pixel);

var ms = new MemoryStream();
image.Save(ms, image.RawFormat); 
```

出于某种原因，这是获取我想要的子区域，调整它的大小并将其放在原始图像的顶部，以便结果是原始结果和我想要的结果的混合。

我已经阅读了几个指南，有关图像处理的帖子，但我仍然不确定我错在哪里。你介意帮助我吗？

另外，如果您还向我解释我缺少什么（代码背后的一点理论），我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:11:31.213

如果要调整图像大小，则需要一个新的图像对象，将调整大小的图像放入其中。您缺少的是创建新的 100x100 图像。这是您的代码的外观：

```
var image = new Bitmap(stream);
var destArea = new Rectangle(0, 0, 100, 100);
var srcArea = new Rectangle(x, y, width, height);

// Destination image
var destImage = new Bitmap(destArea.Width, destArea.Height);

var gfx = Graphics.FromImage(destImage);
gfx.DrawImage(image, destArea, srcArea, GraphicsUnit.Pixel);

var ms = new MemoryStream();
destImage.Save(ms, image.RawFormat); 
```

我还建议将所有 GDI+ 对象包装在`using`语句中，因为它们通常不能很好地处理垃圾收集。

# javascript - getElementById 没有获取 textarea 内容

> ID：10475417
> 
> 赞同：2
> 
> 时间：2012-05-07T00:22:08.473
> 
> 标签：javascript, getelementbyid

对于知道的人来说，这可能看起来很简单：`DIV`当按钮被点击时，这个脚本会得到一个标签，并打开一个包含内容的新页面。但我希望它`textarea`在用户输入内容后显示内容。

有任何想法吗？代码是：

```
<script type="text/javascript">
  var win=null;
  function printIt(printThis)
  {
    win = window.open();
    self.focus();
    win.document.open();
    win.document.write('<'+'html'+'><'+'head'+'><'+'style'+'>');
    win.document.write('body, td { font-family: Verdana; font-size: 10pt;}');
    win.document.write('<'+'/'+'style'+'><'+'/'+'head'+'><'+'body'+'>');
    win.document.write(printThis.innerHTML);
    win.document.write('<'+'/'+'body'+'><'+'/'+'html'+'>');
    win.document.close();
    win.print();
  }
</script>
</head><body>

  <div id="activity5">
    <blockquote>
      <table border="0" cellpadding="3">
      </table>
      <form id="form4" name="form1" method="post" action="">
      <textarea name="Activity1a4" cols="80" rows="15" class="s23" id="ta1"></textarea>
      <p>
        <input name="print4" type="submit" id="print4" value="Print" onclick="printIt(document.getElementById('activity5')); return false"/>
          * Retain this learning activity as part of your portfolio of evidence.</p>
      <p>Check your findings with the correct answer in the back of this Learner Resource under 'Learning activity answers'.</p>
      </form>
    </blockquote>
  </div>
</body>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:36:46.793

`.value`您使用而不是获得文本区域的内容`.innerHTML`。

这意味着获取`activity5`innerHTML 将不包括在子文本区域中输入的文本。如果要包含该文本，则必须`.value`在 textarea 上单独检索该文本并将其插入新页面的新文本区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T00:40:28.997

您需要使用`value`属性单独获取 textarea 的内容，然后以相同的方式显式设置它。查看[http://jsfiddle.net/EPvWV/](http://jsfiddle.net/EPvWV/)以了解如何执行此操作的示例。

# qt - QT将像素绘制到图形场景

> ID：10475420
> 
> 赞同：-3
> 
> 时间：2012-05-07T00:22:43.103
> 
> 标签：qt, drawing, pixel, qgraphicsscene

我需要将`std::vector< double >`值写入`qGraphicsScene`. （0-1 之间的值，每个元素代表一个像素 - 灰度）稍后我想访问图像的像素以替换颜色（我没有时间替换整个图像）thx。答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:24:53.460

如果你想做这样的低级修改，我建议你看看[QImage](http://qt-project.org/doc/qt-4.8/qimage.html)类。QImage::setPixel 等成员将允许您访问单个像素以进行修改。

如果您在 QGraphicsScene 上需要这种功能，那么您可以绘制到 QImage，然后将其转换为 QPixmap（使用 QPixmap::convertFromImage）以与[QGraphicsPixmapItem](http://qt-project.org/doc/qt-4.8/qgraphicspixmapitem.html)一起使用，然后将 QGraphicsPixmapItem 放置到场景中。

您可能还想看看通用的 Qt 容器，例如 QVector。

# sql-server-2008 - 什么是 dataAnnotation 属性用于使列具有单个字符

> ID：10475426
> 
> 赞同：2
> 
> 时间：2012-05-07T00:24:50.843
> 
> 标签：sql-server-2008, entity-framework, code-first

什么是 DataAnnotation 属性我可以用来使 gander 列在我的表中只有一个字符

```
public class Student
 {
      public int ID { get; set; }
      [Required, MaxLength(50)]
      public string Name { get; set; }
      [DataType(DataType.Date)]
      public DateTime Birthday { get; set; }

      public char Gander { get; set; }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:23:17.010

使用[列](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.columnattribute%28v=vs.103%29.aspx)属性。

```
 public class Student
 {
      public int ID { get; set; }
      [Required, MaxLength(50)]
      public string Name { get; set; }
      [DataType(DataType.Date)]
      public DateTime Birthday { get; set; }

      [Column(TypeName = "NVARCHAR(1)")]
      public char Gander { get; set; }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:19:15.530

这应该有效：

```
[MaxLength(1)]
public string Gender { get; set; } 
```

问题是映射[中不支持 char 类型](https://stackoverflow.com/questions/6760765/how-do-i-map-a-char-property-using-the-entity-framework-4-1-code-only-fluent-a)，并且在 EF 核心中没有更改以直接支持该类型或引入一些[简单的类型映射或映射转换](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)，您无法映射此类属性。

# javascript - 使用 JavaScript 更改背景图像

> ID：10475428
> 
> 赞同：1
> 
> 时间：2012-05-07T00:25:12.173
> 
> 标签：javascript, jquery, html, css

我有一个背景图像被拉伸以适应整个屏幕。我正在尝试编写一个脚本，将背景更改为另一个图像。我当前的脚本不会拉伸图像以适应整个屏幕，而是将图像居中。这个问题出现在 Firefox、IE 和 Opera 中。Chrome 和 Safari 似乎不受影响。我按照[本](http://css-tricks.com/perfect-full-page-background-image/)教程创建了整页背景图像。

CSS：

```
html {
    background: url(../img/01.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

JavaScript：

```
$('#previous').click(function() {
    $('html').css('background', 'url(img/01.jpg) no-repeat center fixed');
});

$('#next').click(function() {
    $('html').css('background', 'url(img/02.jpg) no-repeat center fixed');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:33:34.440

如果尝试直接在函数中说背景大小怎么办？

```
$('#next').click(function() {
    $('html').css('background', 'url(img/02.jpg) no-repeat center fixed');
    $('html').css('background-size', 'cover');
}); 
```

因为我认为当背景发生变化时，previous background-size 属性可能不适用于新图像......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T08:25:04.380

试试这个，它对我有用。

CSS

```
 body {
    background-image: url('img/bg2.jpg');
    color: #000305;
    font-size: 87.5%; /* Base font size: 14px */
    font-family: 'Trebuchet MS', Trebuchet, 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    line-height: 1.429;
    margin: 0;
    padding: 0;
    text-align: left;
    }

.body {
    clear: both; 
    margin: 0 auto; 
    width: 70%;
} 
```

在html中我使用了以下脚本

```
 $(document).ready(function() {

 $("#tb").click(function() {
 var body = document.getElementsByTagName('body')[0];
body.style.backgroundImage = 'url(img/p2.jpg)';

  });

}); 
```

其中 tb 是我用来更改背景图像的按钮。

# javascript - 在“点击”时重置 addClass 函数

> ID：10475429
> 
> 赞同：0
> 
> 时间：2012-05-07T00:25:26.553
> 
> 标签：javascript, jquery, html, css, onclick

所以，我有一个使图像不可见的功能，同时开始在它下面播放视频（6 个中的 1 个）。它工作得很好，div 淡出，并且可以播放。但是，它只在第一次工作。

有六个拇指（都是列表中的一个项目），它们每个都播放一个视频，对吧？因此，每次按下拇指时，我都需要图像恢复（快速）然后像它一样慢慢淡出。因此，每次点击都会进行各种小型重置。

代码是

```
$(document).ready(function () {

    $('li, .thumbs').on('click', function () {

        var numb = $(this).index(),
            videos = [
                'images/talking1.m4v',
                'images/talking2.m4v', 
                'images/talking1.m4v', 
                'images/talking2.m4v', 
                'images/talking1.m4v', 
                'images/talking2.m4v'
            ],
            myVideo = document.getElementById('myVid');
            myVideo.src = videos[numb];

        myVideo.load();
        $('#MyT').addClass('clear');
        myVideo.play();

    });

}); 
```

我试着洗牌，没有骰子。而且，是的，它应该在视频完成加载后开始褪色。这适用于 iPad，我还没有找到更好的方法来解决视频加载时出现的闪烁问题。

编辑：好的，试图用我能做到的最好的方式来解释......页面加载，并且您在顶部有图像。有六个缩略图，其中一个是单击的。视频加载时图像淡出（不必同步，只要视频先完成加载），然后播放。如果某个点，另一个拇指被按下，图像会弹出并淡出，以在视频加载时覆盖。基本上，每次点击都会重复第一次点击的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:40:55.697

尝试以下方法检查视频何时结束：

```
$('#my_video_id').bind("ended", function(){ 
      alert('Video Ended'); 
      $('#MyT').removeClass('clear');
    }); 
```

取自[http://help.videojs.com/discussions/questions/40-jquery-and-event-listeners](http://help.videojs.com/discussions/questions/40-jquery-and-event-listeners)

似乎对他们有用，所以如果你有类似的结果，请告诉我。

**编辑**

因此，当您单击缩略图时，您应该首先检查视频是否已经在播放，如评论部分的链接中所述。如果正在播放视频，请停止该视频并将“清除”类添加回该视频。然后你可以继续淡入第二个视频。我显然不能为你写所有这些，因为我不知道你拥有的所有条件、约束和 html 代码，但基本大纲就在那里。

# cakephp - 使用 CakePHP 的 FormHelper 自定义输入 HTML

> ID：10475437
> 
> 赞同：9
> 
> 时间：2012-05-07T00:26:57.707
> 
> 标签：cakephp

我正在尝试使用 CakePHP 的表单助手来生成一些输入元素。

我要生成的 HTML 是：

```
<div class="formRow">
    <label>LabelText:</label>
    <div class="formRight">
        <input name="data[User][email_address]" type="text" value="">
    </div>
    <div class="clear"></div>
</div> 
```

我已经浏览了 Cake 文档（使用 2.1），但我找不到足够的信息来说明如何做到这一点。

看来我需要在输入法上使用格式选项，但不知道如何正确设置。特别关注输入字段周围的div，上面有一个类名..

例如，我尝试过这样的事情：

```
echo $this->Form->input('email_address', array(
                                                "input" => array('attributes' => array('wrap' => 'div','class' => 'formRight')))); 
```

但这不会改变任何标记，只会抛出此错误：注意 (8)：数组到字符串的转换 [CORE\Cake\View\Helper.php，第 459 行]

所以我的问题是我怎样才能让这个表单助手来创建那个标记？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T01:04:41.220

你想多了。（不用担心，我们都这样做）。请记住，CakePHP 就是为了让事情变得更容易（除其他外）——如果你正在努力强迫 Cake 为你做某事，请记住，你可以回归基础——它只是 PHP/HTML毕竟。

```
<div class="formRow">
    <label>LabelText:</label>
    <div class="formRight">
        <?php echo $this->Form->input('email_address', array(
            'div'=>false, 'label'=>false)); ?>
    </div>
    <div class="clear"></div>
</div> 
```

您应该尽可能为您的表单使用表单助手，但您不必使用它的所有预设，例如周围的 div 和标签。在上述情况下，只需告诉它您不需要 div，然后自己用 div 包装它。

如果您不希望`<div>`s 或`<label>`s 围绕任何输入，您还可以设置表单的 inputDefaults：

```
$this->Form->create('Whatever', array(
    'inputDefaults' => array('label'=>false, 'div'=>false)
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T05:24:27.090

如果你有很多字段，你可以使用 Jquery。

php:

```
echo $this->Form->input('email_address', array('class' => 'formRow')); 
```

查询：

```
$(".formRow").each(function() {
    $(this).wrapInner( "<div class='formRight'></div>");
    $(this).find("label").prependTo(this);
    $(this).append('<div class="clear"></div>');
}); 
```

# java - 使用普通数组和矩形进行碰撞检测--java

> ID：10475440
> 
> 赞同：0
> 
> 时间：2012-05-07T00:27:52.497
> 
> 标签：java, arrays, collision-detection

我几乎完成了我最后一个项目的第一个小型 Java 游戏。这是一个横向卷轴，您必须在其中射击/避开小行星。我的最后一个问题是弄清楚如何让我的小行星阵列与玩家的激光相撞。这是我到目前为止所拥有的，第 137 行有一个“AWT-EventQueue-0”java.lang.NullPointerException”，我无法处理。感谢您的帮助。

**编辑**：我在我的其他课程中添加了，我意识到如果我没有告诉你它来自哪里，就很难判断我的代码的功能。

```
package ShooterGame;

import java.applet.Applet;
import java.applet.AudioClip;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Random;

import javax.swing.*;

public class Board extends JPanel implements ActionListener
{   
    Enemy[] baddies = new Enemy[10000];
    Player p;
    Image img;
    int y;
    Timer time;
    boolean lost = false;
    static Font font = new Font("SanSerif", Font.BOLD, 24);
    public AudioClip theme, bang, laser;    
    static ArrayList<Enemy> enemies;

    public static int score = 0;
    public static int lives = 5;

    public Board() 
    {           
        p = new Player();       
        addKeyListener(new ActionListener());
        setFocusable(true);
        ImageIcon i = new ImageIcon("images/background.png");
        img = i.getImage();

        time = new Timer(5, this);
        time.start();

        for(int j = 0; j < baddies.length; j++)
        {   
            Random ran = new Random();
            y = ran.nextInt(365)+1;
            baddies[j]= new Enemy((100*j + 700), y, "images/asteroid.gif");
        }

        theme = Applet.newAudioClip(getClass().getResource("theme.mid"));
        theme.play();

        bang = Applet.newAudioClip(getClass().getResource("bang.wav"));
    }

    public void actionPerformed(ActionEvent e)
    {
        checkCollisions();
        ArrayList<?> bullets = Player.getBullets();

        for(int i = 0; i < bullets.size(); i++)
        {
            Bullet b = (Bullet)bullets.get(i);

            if(b.isVisible() == true)
            {
                b.move();
            }
            else
            {
                bullets.remove(i);
            }
        }

        p.move();
        for(int i = 0; i < baddies.length; i++)
        {
            if(p.x > 400)
            {
                baddies[i].move(p.getdx());
            }
        }

        repaint();
    }

    public void paint(Graphics g)
    {   
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;

        if(lost)
        {
            g2d.drawString("You Lose!", 300, 300);
        }

        if((p.getX() - 590) % 2400 == 0 || (p.getX() - 590) % 2400 == 1)
        {
            p.nx = 0;
        }

        if((p.getX() - 1790) % 2400 == 0 ||(p.getX() - 1790) % 2400 == 1)
        {
            p.nx2 = 0;
        }

        g2d.drawImage(img, 685-p.nx2, 0, null);

        if(p.getX() >= 590)
        {
            g2d.drawImage(img, 685-p.nx, 0, null);
        }

        g2d.drawImage(p.getImage(), p.edge, p.getY(), null);

        ArrayList<?> bullets = Player.getBullets();
        for(int i = 0; i < bullets.size(); i++)
        {
            Bullet b = (Bullet)bullets.get(i);
            g2d.drawImage(b.getImg(), b.getX(), b.getY(), null);

        }
            for(int i = 0; i < baddies.length; i++)
            {
                if(baddies[i].isAlive == true)
                {
                    g2d.drawImage(baddies[i].getImg(), baddies[i].getX(), baddies[i].getY(), null);
                }
            }

        g2d.setColor(Color.white);
        g2d.drawString("Score: " + score, 0, 320);
        g2d.drawString("Lives: " + lives, 80, 320);
    }

    public void checkCollisions()
    {       
        Rectangle[] rect = new Rectangle[baddies.length];
        for(int i = 0; i < baddies.length; i++)
        {
            Enemy e = (Enemy)baddies[i];
            rect[i] = e.getBounds();
        }

        ArrayList<?> bullets = Player.getBullets();
        for (int i = 0; i < bullets.size(); i++)
        {
            Bullet b = (Bullet) bullets.get(i);
            Rectangle b1 = b.getBounds();

            if (rect[i].intersects(b1) && baddies[i].isAlive())
            {
                score++;
                baddies[i].isAlive = false;
                baddies[i].isVisible = false;
                bang.play();
             }

            Rectangle h = p.getBounds();
            if (h.intersects(rect[i]))
            {
                if(baddies[i].isAlive() == true)
                {
                    lives--;
                    if(lives < 0)
                    {
                        lost = true;
                        theme.stop();
                        System.exit(1);
                    }
                }
            }
        }
    }

    private class ActionListener extends KeyAdapter
    {
        public void keyReleased(KeyEvent e)
        {
            p.keyReleased(e);
        }

        public void keyPressed(KeyEvent e)
        {
            p.keyPressed(e);
        }
    }
} 
```

敌人

```
package ShooterGame;

import java.awt.*;

import javax.swing.ImageIcon;

public class Enemy 
{
    int x, y;
    Image img;
    boolean isAlive = true;
    boolean isVisible = true;

    public Enemy(int startX, int startY, String location)
    {
        x = startX;
        y = startY;
        ImageIcon l = new ImageIcon(location);
        img = l.getImage();
    }

    public Rectangle getBounds()
    {
        return new Rectangle(x, y, 60, 60);
    }

    public int getX() 
    {
        return x;
    }

    public int getY() 
    {
        return y;
    }

    public boolean isAlive() 
    {
        return isAlive;
    }

    public boolean isVisible() 
    {
        return isVisible;
    }

    public Image getImg() 
    {
        return img;
    }   

    public void move(int dx)
    {
        x = x - dx;
    }

} 
```

子弹

```
package ShooterGame;

import java.applet.Applet;
import java.awt.*;
import javax.swing.ImageIcon;
import java.applet.AudioClip;

public class Bullet 
{   
    int x, y;
    Image img;
    boolean visible;

    public Bullet(int startX, int startY)
    {
        x = startX;
        y = startY;

        ImageIcon newBullet = new ImageIcon("images/bullet.gif");
        img = newBullet.getImage();
        visible = true;
    }

    public Rectangle getBounds()
    {
        return new Rectangle(x, y, 9, 5);
    }

    public int getX() 
    {
        return x;
    }

    public int getY() 
    {
        return y;
    }

    public Image getImg() 
    {
        return img;
    }

    public boolean isVisible() 
    {
        return visible;
    }

    public void move()
    {
        x = x + 2;
        if(x > 700)
        {
            visible = false;
        }
    }

    public void setVisible(boolean isVisible)
    {
        visible = isVisible;
    }
} 
```

播放器

```
package ShooterGame;

import java.applet.Applet;
import java.applet.AudioClip;
import java.awt.*;
import java.awt.event.KeyEvent;
import java.util.ArrayList;

import javax.swing.ImageIcon;

public class Player 
{

    int x, dx, y, dy, nx2, nx, edge, ceiling; 
    Image player;
    ImageIcon ib = new ImageIcon("images/player1back.gif");
    ImageIcon i = new ImageIcon("images/playerstill.gif");
    ImageIcon f = new ImageIcon("images/playerforward.gif");
    ImageIcon up = new ImageIcon("images/playerup.gif");
    ImageIcon down = new ImageIcon("images/playerdown.gif");
    public AudioClip laser;
    static ArrayList<Bullet> bullets;

    public Player()
    {laser = Applet.newAudioClip(getClass().getResource("laser.wav"));
        player = ib.getImage();
        x = 75;
        nx = 0;
        nx2 = 685;
        y = 172;
        edge = 150;
        ceiling = 0;
        bullets = new ArrayList<Bullet>();
    }

    public static ArrayList<Bullet> getBullets()
    {
        return bullets;
    }

    public void fire()
    {
        Bullet z = new Bullet((edge + 60), (y+17));
        bullets.add(z); 
    }

    public Rectangle getBounds()
    {
        return new Rectangle(edge, y, 43, 39);
    }

    public void move()
    {
        y = y + dy;
        if(y < ceiling)
        {
            y = ceiling;
        }

        if(y > 290)
        {
            y = 290;
        }

        if(dx != -1)
        {
            if(edge + dx <= 151)
            {
                edge = edge + dx;
            }
            else
            {
                x = x + dx;
                nx2 = nx2 + dx;
                nx = nx + dx;
            }
        }
        else
            {
            if(edge + dx > 0)
            {
                edge = edge + dx;
            }
        }   

    }

    public int getX()
    {
        return x;
    }

    public int getdx()
    {
        return dx;
    }

    public int getY()
    {
        return y;
    }

    public Image getImage()
    {
        return player;
    }

    public void keyPressed(KeyEvent e)
    {
        int key = e.getKeyCode();

        if(key == KeyEvent.VK_RIGHT)
        {
            dx = 2;
            player = f.getImage();
        }
        if(key == KeyEvent.VK_UP)
        {
            dy = -1;
            player = up.getImage();
        }
        if(key == KeyEvent.VK_DOWN)
        {
            dy = 1;
            player = down.getImage();
        }
        if(key == KeyEvent.VK_SPACE)
        {
            fire();
            laser.play();
        }
    }

    public void keyReleased(KeyEvent e)
    {
        int key = e.getKeyCode();

        if(key == KeyEvent.VK_RIGHT)
        {
            dx = 1;
            player = ib.getImage();
        }

        if(key == KeyEvent.VK_UP)
        {
            dy = 0;
            player = ib.getImage();
        }

        if(key == KeyEvent.VK_DOWN)
        {
            dy = 0;
            player = ib.getImage();
        }
    }
} 
```

框架

```
package ShooterGame;

import javax.swing.*;

public class Frame 
{
    public AudioClip theme;

        public Frame()
        {
                JFrame frame = new JFrame();
                frame.add(new Board());
                frame.setTitle("SideShooter");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(700,365);
                frame.setVisible(true);
                frame.setLocationRelativeTo(null);

        }

        public static void main(String[] args)
        {
                new Frame();

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:13:40.473

好的，所以问题出在另一个答案中提到的那一行，但我相信所有的敌人在检查碰撞之前可能都没有被初始化。因为您从一开始就制作了 10000 个，所以我认为您执行的操作方法可能是在创建碰撞之前检查碰撞。

要尝试的一件事可能是减少敌人的数量，看看它是否仍然继续发生，尝试 100 或 1000，但这仍然无法解决问题。

不过，您确实希望将游戏更改为在自己的循环中运行，目前您仅在玩家执行操作时检查碰撞。所以如果玩家停止移动，没有碰撞检测......

我建议你找一本名为“Killer Game Programming in Java”的书，有免费的电子书版本，只需阅读关于制作游戏循环的前两章。书有点老了，但是循环的基础知识非常好。

这里的这个[问题](https://stackoverflow.com/questions/8439788/trying-to-move-an-object-from-a-fixed-starting-point-to-the-coordinates-of-a-mou/8440066#8440066)还包含一个非常简单的循环，以及评论中关于如何使其变得更好的一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:32:41.273

错误在线

```
rect[i] = e.getBounds(); 
```

你没有`Enemy`正确初始化你的类的边界吗？或者，您从阵列中拉出的敌人可能为空。

# android - Android 字符串格式化

> ID：10475446
> 
> 赞同：0
> 
> 时间：2012-05-07T00:28:44.437
> 
> 标签：android, string, format

我有一个文本视图，我正在根据从 SimpleCursorAdapter 获得的值设置文本。我的 SQLite 数据库中的字段是一个实数。这是我的代码：

```
 // Create the idno textview with background image
        TextView idno = (TextView) view.findViewById(R.id.idno);
        idno.setText(cursor.getString(3)); 
```

我的问题是文本显示小数。值为 1081，但我得到 1081.0000。如何将字符串转换为不显示小数？我查看了格式化程序，但我无法正确使用语法。

```
 TextView idno = (TextView) view.findViewById(R.id.idno);
        String idno = cursor.getString(3);
        idno.format("@f4.0");
        idno.setText(idno); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:13:40.520

您可以使用`String.format`：

```
String idno = String.format("%1$.0f", cursor.getDouble(3)); 
```

你也可以`DecimalFormat`：

```
DecimalFormat df = new DecimalFormat("#");
String idno = df.format(cursor.getDouble(3)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:33:49.663

如果你得到`String`带小数点的 a ，你可以简单地做：

```
idno.setText(cursor.getString(3).split("\\.")[0]);
//          Split where there is a point--^   ^
//                                            |
//          Get the first in the array--------+ 
```

请注意：

```
TextView idno = (TextView) view.findViewById(R.id.idno);
String idno = cursor.getString(3); 
```

是非法的，因为您使用相同的变量名。

# python - Python中非常简单的并发编程

> ID：10475448
> 
> 赞同：10
> 
> 时间：2012-05-07T00:29:04.477
> 
> 标签：python, concurrency

我有一个简单的 Python 脚本，它使用两个更复杂的 Python 脚本，并对结果进行处理。

我有两个模块，Foo 和 Bar，我的代码如下：

```
import Foo
import Bar

output = []

a = Foo.get_something()
b = Bar.get_something_else()

output.append(a)
output.append(b) 
```

这两种方法都需要很长时间才能运行，而且都不依赖于另一个，因此显而易见的解决方案是并行运行它们。我怎样才能做到这一点，但要确保保持顺序：**无论哪个先完成，都必须等待另一个完成，然后脚本才能继续**。

如果我还不够清楚，请告诉我，我已尝试使示例代码尽可能简单。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T00:30:25.377

通常，您会使用它[`threading`](http://docs.python.org/library/threading.html)来执行此操作。

首先，为您要并行运行的每件事创建一个线程：

```
import threading

import Foo
import Bar

results = {}

def get_a():
    results['a'] = Foo.get_something()
a_thread = threading.Thread(target=get_a)
a_thread.start()

def get_b():
    results['b'] = Bar.get_something_else()
b_thread = threading.Thread(target=get_b)
b_thread.start() 
```

然后要求他们两个都完成，`.join()`在两者上使用：

```
a_thread.join()
b_thread.join() 
```

此时您的结果将在`results['a']`and中`results['b']`，因此如果您想要一个有序列表：

```
output = [results['a'], results['b']] 
```

* * *

注意：如果这两个任务本质上都是 CPU 密集型的，您可能需要考虑[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)改为 - 由于 Python 的 GIL，给定的 Python 进程将只使用一个 CPU 内核，而`multiprocessing`可以将任务分配到不同的内核。但是，它的开销比 略高`threading`，因此如果任务的 CPU 密集度较低，则可能效率不高。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-21T19:08:16.813

```
import multiprocessing

import Foo
import Bar

results = {}

def get_a():
    results['a'] = Foo.get_something()

def get_b():
    results['b'] = Bar.get_something_else()

process_a = multiprocessing.Process(target=get_a)
process_b = multiprocessing.Process(target=get_b)

process_b.start()
process_a.start()

process_a.join
process_b.join 
```

这是您的程序的进程版本。

注意：在线程中存在共享数据结构，因此您必须担心锁定以避免错误操作数据加上上面提到的琥珀色，它还存在 GIL（全局解释器锁定）问题，并且由于您的两个任务都是 CPU 密集型的，因此这意味着由于调用通知线程获取和释放线程，这将花费更多时间。但是，如果您的任务是 I/O 密集型的，那么它不会产生太大影响。

现在，由于进程中没有共享数据结构，因此无需担心 LOCKS，并且由于它与 GIL 无关，因此您实际上可以享受多处理器的真正威力。

要记住的简单说明：进程与线程相同，只是不使用共享数据结构（一切都是独立工作的，并且专注于消息传递。）

查看[dabeaz.com](http://www.dabaez.com)，他曾经对并发编程做了一个很好的介绍。

# php - 为什么删除最后一个逗号时会出现额外的空格？

> ID：10475449
> 
> 赞同：0
> 
> 时间：2012-05-07T00:29:28.503
> 
> 标签：php, arrays, string

我在这个网站上使用了几个不同的帖子来弄清楚如何删除字符串中的最后一个逗号。显然这是一个经典问题，但我无法弄清楚为什么它在逗号之前添加了一个额外的空格，而不是在逗号之后添加一个预期的空格？

和往常一样，我一直在玩代码，但我不知道多余的空白是从哪里来的，请帮帮我，我快瞎了！

```
<?php $comma = ""; ?><?php foreach ($tags as $tag) { ?>
<?php echo $comma; ?><a href="<?php echo $tag['href']; ?>">
<?php echo $tag['tag']; ?></a><?php $comma = ","; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:33:58.203

空白是由于`<a>`元素打开后 HTML 中的换行造成的。

更好的输出解决方案是：

```
<?php
$total = count( $tags);
$x = 0;
foreach ( $tags as $tag ){
    $x++;
    echo '<a href="' . $tag['href'] . '">' . $tag['tag'] . '</a>';
    if ( $x < $total ) echo ',';
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T00:35:54.813

也许您的 HTML 代码中的 PHP 标记之间有一个空格...为什么不将其重写为如下内容：

```
<?php $comma = '';
foreach ($tags as $tag) {
    echo "$comma<a href='{$tag['href']}'>{$tag['tag']}</a>";
    $comma = ',';
} ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T00:55:51.540

我宁愿这样写整个事情：

```
<?php
$tag_strings = array();
foreach ($tags as $tag)
    {
    $tag_strings[] = "<a href='" . $tag['href'] . "'>" . $tag['tag'] . "</a>";
    }
echo implode(',', $tag_strings); 
```

# c# - VS 2008 中的自动构建脚本

> ID：10475453
> 
> 赞同：0
> 
> 时间：2012-05-07T00:30:27.037
> 
> 标签：c#, .net, visual-studio-2008, wix, build-automation

我使用 WiX 构建了一个安装程序，该安装程序由多个 .exe 文件组成，这些文件是其他 .Net 项目（VS 2008）的“发布”版本。每次我更新其中一个项目时，我都会构建该项目并将 Release 构建复制到安装程序中，然后构建并发布安装程序。

我发现不断检查安装程序拥有的 exe 是否是最新版本是一项非常乏味的工作。有没有一种方法可以使这个构建过程自动化，这样一旦我构建了安装程序，它就会生成相关项目的最新版本，并将 .exe 文件放在安装程序项目中。

我是 VS 和 WiX 的新手，请指教。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:25:20.657

Arun 的解决方案是个好主意，我推荐它。

我们还维护了许多程序集，我们使用符号链接来尽量减少构建和复制操作的数量，而不是复制它们。您可以研究 mklink (http://en.wikipedia.org/wiki/NTFS_symbolic_link) 了解详情。

我们像这样使用它，但我们将其作为环境设置的一部分，而不是构建脚本的一部分。

*   mklink /project1/bin/project1.dll /project2/bin/project1.dll

这为我们确保了 project2 对 project1 的引用始终是最新的，无论何时构建 project1，无需复制文件。在我们的例子中，project2 和 project1 不是同一个解决方案的一部分，它们之间没有直接的引用（我们做了很多插件类型的反射/程序集加载）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:51:24.097

您应该能够创建一个解决方案，其中包含：

```
- all projects which build the EXEs
- the installer project which builds your installer 
```

到达那里后，您应该能够右键单击安装程序项目并将依赖项设置为创建 EXE 的所有项目。您应该能够使用安装程序中捆绑的正确 EXE 构建您的解决方案。

# php - 在 apache php.ini 文件中延长会话最大超时的后果是什么？

> ID：10475455
> 
> 赞同：1
> 
> 时间：2012-05-07T00:31:05.520
> 
> 标签：php, apache, session, cookies

我正在建立一个网站，我不想在人们的计算机上放置 cookie。将会话最大超时时间延长到一天或两天是不好的做法 - 或者更糟糕的是非常不安全？

```
 session_regenerate_id();
    $profileid = $userdata['userid'];
    $profile = $userdata['username'];
    //Set session
    $_SESSION['profileid'] = $profileid;
    //Put name in session
    $_SESSION['profile'] = $profile;
    $_SESSION['loggedin'] = true; 
```

编辑：添加代码。编辑：我要修改的 php.ini 行是：

```
session.gc_maxlifetime = 1440 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:55:20.060

只要您的代码总体上是安全的，我认为它没有什么特别不安全的地方。

然而

a) 如果用户关闭浏览器，他们将丢失他们的数据——他们可能出于任何原因这样做。如果您需要确保数据在会话之间保留更长时间，除非用户明确选择退出，否则请使用 cookie。否则，坚持不吃饼干似乎会适得其反。澄清一下，我想我的意思是，如果标准会话生命周期不够长，那么您可能不应该使用 $_SESSION 来存储数据。从本质上讲，$_SESSION 是短暂的，只能用于相当短暂的事情。

b) 除非您真的要加倍努力来阻止所有 cookie，否则 PHP 会话 id 无论如何都会使用 cookie 设置，那么您真的在帮助您的用户吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:59:20.823

[session.gc_maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

> session.gc_maxlifetime 指定数据将被视为“垃圾”并可能被清理的秒数。垃圾收集可能在会话开始期间发生（取决于 session.gc_probability 和 session.gc_divisor）。

此值（默认为 1440 秒或 [24 分钟]）定义未使用的 PHP 会话将保持活动状态的时间。

**例如：**用户登录，浏览您的应用程序或网站，数小时，数天。没问题。只要他的点击之间的时间不超过1440秒。这是一个超时值，

[PHP 的会话垃圾收集器以session.gc_probability](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-probability)除以[session.gc_divisor](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-divisor)定义的概率运行。默认情况下，这是 1/100，这意味着以 100 分之一的概率检查上述超时值。

因此，增加此值很可能不会对您的脚本产生太大影响，除非您希望您的用户不会点击您的网站。就像登录用户观看长视频然后在观看后发现自己退出的情况一样。如果是这种情况，也许您应该使用一些 javascript 每 20 分钟轮询一次服务器以保持会话打开。

# python - 按列迭代 scipy 稀疏矩阵

> ID：10475457
> 
> 赞同：4
> 
> 时间：2012-05-07T00:32:12.927
> 
> 标签：python, numpy, scipy, sparse-matrix

我试图弄清楚如何逐列遍历 scipy 稀疏矩阵。我正在尝试计算每列的总和，然后按该总和对该列的成员进行加权。我想做的基本上是：

```
for i=0 to #columns
  for j=0 to #rows
    sum=sum+matrix[i,j]
  for j=0to #rows
    matrix[i,j]=matrix[i,j]/sum 
```

我在示例中看到的所有迭代器都一次迭代整个矩阵，而不是按列进行。有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:33:03.527

Scipy 稀疏矩阵有自己的`sum`方法可以用于此。例如：

```
A=sp.lil_matrix((5,5))
b=1+np.arange(0,5)
A.setdiag(b[:-1],k=1)
A.setdiag(b)

print(A)
  (0, 0)        1.0
  (0, 1)        1.0
  (1, 1)        2.0
  (1, 2)        2.0
  (2, 2)        3.0
  (2, 3)        3.0
  (3, 3)        4.0
  (3, 4)        4.0
  (4, 4)        5.0

f=A.sum(axis=0)

print(f)   
[[1\. 3\. 5\. 7\. 9.]] 
```

返回的总和是密集的`numpy.matrix`，您可以将其转换为比例因子：

```
print(A/f)
[[1\.         0.33333333 0\.         0\.         0\.        ]
 [0\.         0.66666667 0.4        0\.         0\.        ]
 [0\.         0\.         0.6        0.42857143 0\.        ]
 [0\.         0\.         0\.         0.57142857 0.44444444]
 [0\.         0\.         0\.         0\.         0.55555556]] 
```

# javascript - jQuery - Uncaught TypeError: Object 0,0 has no method 'split' - Trying to split() on object

> ID：10475458
> 
> 赞同：-1
> 
> 时间：2012-05-07T00:32:23.190
> 
> 标签：javascript, jquery

我只是想`object`用逗号分割一个分隔符。我知道有一些东西要拆分，因为当我自己输出它时......它成功地表示（通过循环）1,1 和其他数字。

这是一个JSFiddle。[http://jsfiddle.net/weka/5Xtwj/](http://jsfiddle.net/weka/5Xtwj/)

如果删除 JavaScript 部分中的最后两行，它将正常工作，因为我不想获取`X`数组的。

```
var getX = path[index].split(",");
$("#debug").append("X: " + getX[0]); 
```

PS - 它使用这个[寻路脚本](http://qiao.github.com/PathFinding.js/lib/pathfinding-browser.js)作为外部库。但这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:39:46.557

您可以仅对字符串使用**[split](http://www.tizag.com/javascriptT/javascript-string-split.php)**，正如您在 console.log 上看到的那样，它是一个数组数组，这就是您收到此错误的原因。
您可以使用以下代码获取 X 值：

使用**[slice](http://api.jquery.com/slice/)**：

```
var getX = path[index].slice(0); 
```

或者：

```
var getX = path[index][0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:36:22.847

错误信息告诉你

```
Object 0,0 has no method 'split' 
```

它是一个对象 [aka Array]，而您的行为就像是一个字符串。为什么需要拆分它？参考一下。

```
var first = path[index][0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T00:36:26.683

`split`只能用于字符串。每个`path[index]`都不是字符串，*而是*一个数组（查看控制台输出）。您看到`0,0`是因为数组被强制转换为字符串以进行打印。

**解决方案：**不要使用`path[index].split(",")[0]`，只需使用`path[index][0]`.

![在此处输入图像描述](../Images/c1a577a914ef5d3793a09dada00039a5.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T00:40:43.110

的值`path[index]`不是字符串，而是数组。

你不能分裂它，你也不需要。您可以立即使用它：

```
var getX = path[index];
$("#debug").append("X: " + getX[0] + "\n"); 
```

[http://jsfiddle.net/Guffa/5Xtwj/1/](http://jsfiddle.net/Guffa/5Xtwj/1/)

# function - 需要简单的答案：返回返回 null 的函数

> ID：10475459
> 
> 赞同：0
> 
> 时间：2012-05-07T00:32:28.330
> 
> 标签：function, if-statement, null

我有一个函数，它接收一个邮政编码并根据它所属的范围为其分配一个数字。如果它不属于某个范围，我希望它失败。我该怎么办？

```
/**
 * Calculates zone number from second zip code
 * @param endZip
 * @return endZone
 */
public static int endZone(int endZip)
{
    int endZone = 0;

    //zone 1
    if (endZip >= 00001 && endZip <= 6999)
    {
        endZone = 1;    
    }

    //zone 2
    else if (endZip >= 07000 && endZip <= 19999)
    {
        endZone = 2;
    }

    //zone 3
    else if (endZip >= 20000 && endZip <= 35999)
    {
        endZone = 3;
    }

    //zone 4
    else if (endZip >= 36000 && endZip <= 62999)
    {
        endZone = 4;
    }

    //zone 5
    else if (endZip >= 63000 && endZip <= 84999)
    {
        endZone = 5;
    }

    //zone 6
    else if (endZip >= 85000 && endZip <= 99999)
    {
        endZone = 6;
    }

    return endZone; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:03:11.717

如果出于某种原因您绝对想要返回 null，那么简单的方法是将返回类型从 int 切换为 Integer 对象，与原始对象不同，它可以为 null。

只需将签名更改为：

```
public static Integer endZone(int endZip) 
```

并初始化为：

```
Integer endZone = null; 
```

但实际上其他答案更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:46:27.957

你有几个选择：

如果不满足任何条件，则 1\. 抛出异常。2\. 返回一个特定的整数值，您知道该整数值表示 zip 无效（例如 -1）。3\. 不要使用整数返回类型，而是为您的区域创建一个枚举：

```
public enum EndZone
{
    Zone1,
    Zone2,
    ....
    Invalid
} 
```

如果条件不满足，则返回 EndZone.Invalid。

# asp.net - 设计师坚持不存在的“System.Web.UI.WebControls”

> ID：10475461
> 
> 赞同：3
> 
> 时间：2012-05-07T00:32:48.090
> 
> 标签：asp.net, visual-studio-2010, charts

我遇到了一个奇怪的问题：我正在尝试将 ASP.NET 4.0 网站迁移到 ASP.NET Web 应用程序。Visual Studio 的“转换为 Web 应用程序”功能实际上工作得很好，但唯一不起作用的是对图表的引用。我收到错误：

> 命名空间“System.Web.UI.WebControls”中不存在类型或命名空间名称“Chart”

来自 .designer 文件。设计者会自动创建这种类型的代码：

```
protected global::System.Web.UI.WebControls.Chart ClientHoursPie; 
```

根据我所做的研究，用于图表的正确 4.0 命名空间是 System.Web.UI.DataVisualization.Charting。我在 web.config 中添加了以下组件（从原始网站复制，运行良好）：

```
<httpHandlers>
    <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
</httpHandlers>
<compilation debug="true" targetFramework="4.0">
    <assemblies>
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </assemblies>
</compilation> 
```

我可以更正设计器文件中的命名空间，但每次保存 aspx 文件时，设计器都会恢复到旧的命名空间。

我希望避免从头开始重建所有单独的页面。有没有我错过的地方？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:42:39.933

我能够通过向 web.config 添加一些我错过的条目来解决问题。遇到此问题的任何人都需要确保您包括：

```
<pages>
    <controls>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </controls>
</pages> 
```

这（在 system.webServer 部分）：

```
<handlers>
    <remove name="ChartImageHandler"/>
    <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</handlers> 
```

# asp.net-mvc - 模型在 MVC3 中未在 Post 上保留价值

> ID：10475469
> 
> 赞同：2
> 
> 时间：2012-05-07T00:34:24.343
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel

我正在使用视图模型（vm）来创建新酒。我根据用户的配置文件将 ProducerID 值分配给 get 上的 vm。当它在视图中呈现时，我可以在视图中看到 ProducerID 值。用户无法选择或编辑此值，除非他们处于管理员角色（我没有使用该角色进行测试）。我的问题是 ProducerID 在 POST 上总是返回为 0。我不知道我缺少什么，因为我在视图中选择的其他选项恢复正常。

我试图在 vm 本身中添加一个新的唯一名称，但这也没有任何价值。我环顾四周，发现其他一些人也有类似的问题，但他们的解决方案都没有帮助。对此的任何帮助都会很棒。谢谢！

视图模型：

```
{
    public Wine Wine { get; set; }
    public VOAVIRequest VOAVIRequest { get; set; }
    public bool IsRequest { get; set; }

    public SelectList VarTypes { get; set; }
    public SelectList Origins { get; set; }
    public SelectList Apps { get; set; }
    public SelectList Vintages { get; set; }
    public SelectList Importers { get; set; }

    public NewWineViewModel()
    {
        this.Wine = new Wine();
    }
} 
```

葡萄酒型号：

```
public class Wine :Updater
{
    public int WineID { get; set; }
    //public int WineTypeID { get; set; }
    [Display(Name = "Varietal/Type")]
    public int VarTypeID { get; set; }
    [Display(Name = "Origin")]
    public int OriginID { get; set; }
    [Display(Name = "Appellation")]
    public int AppID { get; set; }
    [Display(Name = "Vintage")]
    public int VintageID { get; set; }
    [Display(Name = "Importer")]
    public int? ImporterID { get; set; }
    public int ProducerID { get; set; }
    public string Designate { get; set; }
    [Display(Name = "Drink Window")]
    public string DrinkWindow { get; set; }
    public string Body { get; set; }
    public string SKU { get; set; }
    [Display(Name = "Case Production")]
    public double CaseProduction { get; set; }
    [Display(Name = "Alcohol Content")]
    public double AlcoholContent { get; set; }
    public string Winemaker { get; set; }
    [Display(Name = "Consulting Winemaker")]
    public string ConsultWinemaker { get; set; }
    public bool Sustainable { get; set; }
    public bool Kosher { get; set; }
    public bool Organic { get; set; }
    public bool Biodynamic { get; set; }
    public bool SalmonSafe { get; set; }
    public Boolean Active { get; set; }

    public virtual WineType WineType { get; set; }

    public virtual VarType VarType { get; set; }
    public virtual Origin Origin { get; set; }
    public virtual App App { get; set; }
    public virtual Vintage Vintage { get; set; }
    public virtual Importer Importer { get; set; }
    public virtual Producer Producer { get; set; }

    public virtual ICollection<Review> Reviews { get; set; }
    public virtual ICollection<Doc> Docs { get; set; }

    public IEnumerable<SelectListItem> BodyList { get; set; }

    //for dropdownlist binding
    //public IEnumerable<VarType> VarTypes { get; set; }
    //public IEnumerable<Origin> Origins { get; set; }
    //public IEnumerable<App> Apps { get; set; }
    //public IEnumerable<Vintage> Vintages { get; set; }
    //public IEnumerable<Importer> Importers { get; set; }
    //public IEnumerable<Producer> Producers { get; set; }

    public Wine()
    {
        var BodyList = new List<SelectListItem>()
        {
            new SelectListItem {Value="", Text="Please select wine body"},
            new SelectListItem {Value="", Text="Light-bodied"},
            new SelectListItem {Value="", Text="Light to Medium-bodied"},
            new SelectListItem {Value="", Text="Medium-bodied"},
            new SelectListItem {Value="", Text="Medium to Full-bodied"},
            new SelectListItem {Value="", Text="Full-bodied"},
            new SelectListItem {Value="", Text="Very Full-bodied"}
        };

        this.BodyList = BodyList;
    }

    public virtual String Name { 

        get {
            string sName = string.Empty;
            int iVintage;

            if (!int.TryParse(this.Vintage.Name.Trim(), out iVintage))
            {
                sName = iVintage.ToString();
            }

            if (!string.IsNullOrEmpty(this.Designate))
            {
                sName = sName + " " + this.Producer.Name + " " + this.Designate + " " + this.VarType.Name;
            }
            else
            {
                sName = sName + " " + this.Producer.Name + " " + this.VarType.Name;
            }

            return sName;
            }
    }
} 
```

控制器：

```
 public ActionResult Create()
    {
        NewWineViewModel nw = new NewWineViewModel();

        nw.VarTypes = new SelectList(db.VarTypes, "VarTypeID", "Name").Default("Select a Varietal/Type", "0");
        nw.Origins = new SelectList(db.Origins, "OriginID", "Name").Default("Select an Origin", "0");
        nw.Apps = new SelectList(db.Apps, "AppID", "Name").Default("Select an Appellation", "0");
        nw.Vintages = new SelectList(db.Vintages, "VintageID", "Name").Default("Select a Vintage", "0");
        nw.Importers = new SelectList(db.Importers, "ImporterID", "Name").Default("Select an Importer", "0");

        // keep dynamic 
        if (User.IsInRole("producer"))
        {
            Producer currentProd = db.ProducerUsers.Find(Membership.GetUser().ProviderUserKey).Producer;
            nw.Wine.ProducerID = currentProd.ProducerID;
            ViewBag.ProducerName = currentProd.Name;
            ViewBag.ProducerID = currentProd.ProducerID;
        }
        else
        {
            ViewBag.ProducerSelect = new SelectList(db.Producers, "ProducerID", "Name");
        }

        ViewData.Model = nw;
        return View();
    }

    //
    // POST: /Wine/Create

    [HttpPost]
    //[Authorize(Roles = "admin, producereditor")]
    public ActionResult Create(NewWineViewModel nw)
    {
        if (ModelState.IsValid)
        {
            nw.Wine.Active = nw.IsRequest ? false : true;
            nw.Wine.ImporterID = nw.Wine.ImporterID == 0 ? null : nw.Wine.ImporterID;
            nw.Wine.CreatedBy = this.User.Identity.Name;
            nw.Wine.CreatedOn = DateTime.Now;
            db.Wines.Add(nw.Wine);

            db.SaveChanges();

            if (nw.IsRequest)
            {
                nw.VOAVIRequest.WineID = nw.Wine.WineID;
                db.VOAVIRequests.Add(nw.VOAVIRequest);
                RedirectToAction("Requested");
                //redirect to "Request Submitted" page for new wines
            }

            return RedirectToAction("Details", nw.Wine.WineID);
        }

        ViewBag.VarTypeID = new SelectList(db.VarTypes, "VarTypeID", "Name").Default("Select a Varietal/Type", nw.Wine.VarTypeID.ToString());
        ViewBag.OriginID = new SelectList(db.Origins, "OriginID", "Name").Default("Select an Origin", nw.Wine.OriginID.ToString());
        ViewBag.AppID = new SelectList(db.Apps, "AppID", "Name").Default("Select an Appellation", nw.Wine.AppID.ToString());
        ViewBag.VintageID = new SelectList(db.Vintages, "VintageID", "Name").Default("Select a Vintage", nw.Wine.VintageID.ToString());
        ViewBag.ImporterID = new SelectList(db.Importers, "ImporterID", "Name").Default("Select an Importer", nw.Wine.ImporterID.ToString());
        if (User.IsInRole("producer"))
        {
            Producer currentProd = db.ProducerUsers.Find(Membership.GetUser().ProviderUserKey).Producer;
            ViewBag.ProducerID = currentProd.ProducerID;
            ViewBag.ProducerName = currentProd.Name;
        }
        else
        {
            ViewBag.ProducerSelect = new SelectList(db.Producers, "ProducerID", "Name" ,nw.Wine.ProducerID);
        }
        return View(nw);
    } 
```

看法：

```
@model vf2.ViewModels.NewWineViewModel   
@{
    ViewBag.Title = "Create a Wine";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    if (User.IsInRole("admin"))
    {
    <div class="editor-label">
        @Html.LabelFor(m => m.Wine.ProducerID, "Producer")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(m => m.Wine.ProducerID, ViewBag.ProducerSelect as SelectList, "Select a Varietal/Type")
        @*@Html.DropDownList("ProducerSelect", String.Empty)*@
    </div>
    }
    else
    {
    <h3>@ViewBag.ProducerName</h3>
    }
    @Html.HiddenFor(m => m.IsRequest)
    <table>
        <tr>
            <td>@Html.LabelFor(m => m.Wine.VarTypeID, "VarType")
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.VarTypeID, Model.VarTypes, new { @class = "chzn-select" })
                </div>
                @Html.TextBoxFor(m => m.VOAVIRequest.VarType, new { style = "display: none;", @class = "voavignore" })
                <a id="lnkNewVar" class="filetypes" href="#">New Varietal?</a> @*                @Html.ValidationMessageFor(m => m.VOAVIRequest.VarType)*@
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.OriginID, "Origin")
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.OriginID, Model.Origins, new { @class = "chzn-select" })
                </div>
                <a id="lnkNewOrigin" class="filetypes" href="#">New Origin?</a>
                @Html.TextBoxFor(m => m.VOAVIRequest.Origin, new { style = "display: none;", @class = "voavignore" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.AppID, "App")
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.AppID, Model.Apps, new { @class = "chzn-select" })
                </div>
                <a id="lnkNewApp" class="filetypes" href="#">New Varietal?</a>
                @Html.TextBoxFor(m => m.VOAVIRequest.App, new { style = "display: none;", @class = "voavignore" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.VintageID, "Vintage")
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.VintageID, Model.Vintages, new { @class = "chzn-select" })
                </div>
                <a id="lnkNewVintage" class="filetypes" href="#">New Varietal?</a>
                @Html.TextBoxFor(m => m.VOAVIRequest.Vintage, new { style = "display: none;", @class = "voavignore" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Designate)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Designate)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.DrinkWindow)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.DrinkWindow)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Body)
            </td>
            <td>
                @Html.DropDownListFor(m => m.Wine.Body, new SelectList(Model.Wine.BodyList, "Value", "Text"), new { @class = "chzn-select" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.ImporterID, "Importer")
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.ImporterID, Model.Importers, new { @class = "chzn-select" })</div>
                <a id="lnkNewImporter" class="filetypes" href="#">New Varietal?</a>
                @Html.TextBoxFor(m => m.VOAVIRequest.Importer, new { style = "display: none;" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.SKU)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.SKU)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.CaseProduction)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.CaseProduction)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.AlcoholContent)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.AlcoholContent)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Winemaker)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Winemaker)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.ConsultWinemaker)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.ConsultWinemaker)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Sustainable)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Sustainable)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Kosher)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Kosher)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Organic)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Organic)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Biodynamic)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Biodynamic)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.SalmonSafe)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.SalmonSafe)
            </td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Create" />
    </p>
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T00:57:07.770

`ProducerID`没有被填充，因为它看起来没有与表单一起发回。如果它不属于您的路线，则需要将其保存在隐藏字段中：

```
@Html.HiddenFor(m => m.ProducerID) 
```

# function - 将类型信息放入Scala中的空参数方法调用

> ID：10475471
> 
> 赞同：2
> 
> 时间：2012-05-07T00:34:51.230
> 
> 标签：function, scala, generics

我正在尝试使用 TreeMultimap.create 方法在 scala 中创建 Guava TreeMultimap 对象，但无法弄清楚如何在那里传递类型信息（[Double，String]）。

有任何想法吗？

据我了解，我可以在 Java 中使用 TreeMultimap.create() 表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T00:43:31.483

试试这个：

```
TreeMultimap.create[java.lang.Double,String]() 
```

当我只是使用时`Double`抱怨它不是 a `java.lang.Comparable`（因为 Scala 的`Double`真正意味着是 Java 的`double`）。使用`java.lang.Double`可以轻松解决这个问题。

# android - Eclipse 在包资源管理器中看不到终端创建的项目

> ID：10475472
> 
> 赞同：0
> 
> 时间：2012-05-07T00:34:53.813
> 
> 标签：android, eclipse, terminal

从终端使用以下命令创建一个新的 android 项目后：

```
 android create project --target 2  
 --name newApp2 
 --path ./newApp2Project                 
 --activity newApp2Activity 
 --package com.android.newApp2 
```

我发现这会在 android-sdks/tools 文件夹中创建项目文件夹。我将项目文件夹移动到我的 Eclipse 包资源管理器使用的工作区文件夹中。我想看看我是否可以在 Eclipse 中打开我的新项目，但包资源管理器没有列出新项目。我重新启动了 Eclipse，但仍然一无所获......我如何在我的 Eclipse 包资源管理器中看到我的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:29:39.330

`android create project`不会创建eclipse 所依赖的`.classpath`and `.project`，只有这两个文件（配置正确）才会将文件夹视为 eclipse 项目。

您所能做的就是从其他一些现有的 eclipse 项目中复制这些文件，将项目名称更改`.classpath`为您新创建的项目的名称。`File`现在您可以通过-> `Import`-> `General`->从 Eclipse 导入项目`Existing Projects into workspace`。您可能需要`.project`相应地进行更改，例如您可能想从中删除一些依赖库`.project`，因为它是一个新创建的项目，它不应该依赖任何库。您还可以通过`Right clicking project name`-> `Build Path`-> `Configure Build Path`->从 Eclipse 管理库依赖项`Libraries`。

# java - 我应该在java中使用什么样的循环？

> ID：10475473
> 
> 赞同：-3
> 
> 时间：2012-05-07T00:34:56.437
> 
> 标签：java, for-loop, while-loop

我的布尔表达式在循环中间变为假。我应该使用什么样的循环？我一直在阅读循环教程，每个教程都提到 while 循环不能做到这一点。我尝试将 for 循环和 if 语句结合起来，但这也不起作用。对不起这个简单的问题。

```
 }
     for(int k = 0;k < collb.length; k++){
        //what was used after first calculation
           grosssum += col4[k]*mix[k];
             one=sum1 - grosssum;

    }
   for(int n = 0;n < collb.length; n++)
    if(one < -need[n] && col4[n] >0){
   col5[n]=col4[n]-inc[n] + arrayspecificpounds[n];
    net += col5[n]*mix[n];
    sum = sum1-net;
 }   //net is the sum of what was used * mix
     //sum1 is what we started with
   else{
     if(one > need[n] && col4[n] >0){
    col5[n]=col4[n]-inc[n] + arrayspecificpounds[n];
    net += col5[n]*mix[n];
    sum = sum1-net;

    }
    else col5[n] = col4[n] +  arrayspecificpounds[n];
    sum = sum1 - net;
   }
   for(int p = 0;p< collb.length; p++){
       if(sum < -need[p] && col5[p] >0){
           col6[p]=col5[p]-inc[p] + arrayspecificpounds[p];
       net2 += col6[p]*mix[p];
       sum2 = sum1 - net2;
       }
     else{
           if(sum > need[p] && col5[p] >0){
               col6[p]=col5[p]+inc[p] + arrayspecificpounds[p];
      net2 += col6[p]*mix[p];
    sum2 = sum1 - net2;
           }
    else col6[p] = col5[p] + arrayspecificpounds[p];
    net2 += col6[p]*mix[p];
    sum2 = sum1 - net2;
   }
    }

        for(int q =0;q< collb.length; q++){
           if(sum2 < -need[q] && col6[q] >0){
               colr[q]=col6[q] - inc[q] +arrayspecificpounds[q];
           }
             else{
               if(sum2 > need[q] && col6[q]>0){
                   colr[q]=col6[q] +inc[q] + arrayspecificpounds[q];
               }
       else colr[q] = col6[q] + arrayspecificpounds[q];
           } 
```

在这个例子中 sum2 的值随着数组 col6 的增加而改变，但在数组的中间不等式会改变。一旦 sum2 更改，我将如何实现中断以停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:38:15.247

当您的条件为假时，您可以使用“break”退出任何循环

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T00:41:24.013

这是一个简单的示例，说明当您正在监视的布尔值将其值从 false 更改为 true 时，如何停止 while 循环：

```
boolean done = false;
int count = 0;

// while not done, continue looping
while(!done) {
    // do stuff
    count++;
    if(count > 7) {
        done = true;
    }
} 
```

同样的技术实际上也可以在 for 循环中使用：

```
boolean done = false;
for(int i = 0; i < 1000 && !done; i++) {
    // do stuff

    if(i > 7) {
        done = true;
    }
} 
```

这有点不正统，但它演示了如何使用 for 循环中的第二个参数来监视可能与 int i 值的实际值相关或不相关的布尔条件。

# xcode - XCode蓝色文件夹不被视为子目录？

> ID：10475483
> 
> 赞同：0
> 
> 时间：2012-05-07T00:37:31.537
> 
> 标签：xcode, filesystems

好的，我之前问过一个问题，关于如何在 XCode 中创建自己的目录以便能够更有效地搜索特定文件。我重新导入了我的文件，这次确保创建文件夹引用而不是平面组。一切看起来都不错，我的文件整齐地组织在蓝色文件夹中。

现在我*认为*这意味着这些文件夹中文件的路径会改变，我可以搜索新的、更具体的路径（而不必每次都搜索整个应用程序包的内容）。*但是任何文件夹中**每个文件*的路径仍然与之前的相同。

 *例如：一个名为“items.txt”的文本文件位于我作为参考导入的“SupportingFiles”文件夹中。我希望路径包含“/SupportingFiles/items.txt”。但路径记录为**/Users/Mike/Library/Application Support/iPhone Simulator/5.1/Applications/(很多数字和文本)/Adventurer BASE.app/items.txt**。

或者“xxDefault.txt”，它包含在“Defaults”文件夹中，它本身位于“SupportingFiles”文件夹中。我希望看到“SupportingFiles/Defaults/xxDefault.txt”或类似的东西。但同样，记录的路径以“ **Adventurer BASE.app/xxDefault.txt** ”结尾

任何位置的每个文件都有一个以“ **Adventurer BASE.app/(file name)** ”结尾的路径。不管是在模拟器上还是在实际设备上。我认为在文件夹引用（蓝色文件夹）中导入资源应该可以解决问题，但显然还有其他事情要做。

显然我误解了 XCode 的文件系统。任何帮助解决它都会很棒，因为我正要扯掉我的头发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:05:14.943

听起来像一个缓存问题，我的第一个想法是通过按住**alt**键删除构建目录，访问**产品**菜单并在 Xcode 中选择**Clean Build Folder...。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:15:47.763

检查@InsertWittyName 的建议（这很可能是正确的）后，请确保在“复制文件”步骤中复制的是文件夹引用而不是单个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:16:30.773

Xcode 中的蓝色文件夹位于主包中。它不在“应用程序支持”（NSApplicationSupportDirectory）树中。蓝色 Xcode 文件夹的路径是：

```
NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"SupportingFiles"]; 
```*

# ruby-on-rails - Rails 3.2 和 Sass 不呈现 Application.css

> ID：10475484
> 
> 赞同：4
> 
> 时间：2012-05-07T00:37:43.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我刚刚对 Rails 3.2 和最新的 Sass 和 Coffee Rails Gems 进行了重大升级，但我的应用程序文件不会呈现为 Application.css.scss。我在我的html中有它：

```
 <%= stylesheet_link_tag 'application.css.scss' %> 
```

当我在开发模式下查看页面源时，我得到了

```
 <link href="/assets/application.css.scss.css" media="screen" rel="stylesheet" type="text/css" /> 
```

到底他妈发生了什么！？

它似乎将 .css 附加到我放在 stylesheet_link_tag 中的所有内容中，所以如果我在页面源中将其保留为“应用程序”，我就有 application.css 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:10:58.337

标记的适当格式是：

```
<%= stylesheet_link_tag 'application' %> 
```

Rails 自动将`.scss`文件编译成一个`.css`文件——然后它会自动导入正确的文件。这一切都由你来照顾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:58:04.513

我认为在 Rails 3.2 中使用 Sprockets 执行此操作的“默认”方法是使用名为 application.css 的文件（不是 application.css.scss），其中包含您的 Sprockets 清单代码。应该看起来像这样......

application.css（应用程序/资产/样式表）

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require main_scss_file
*/ 
```

至少应该有两行，第一行应该是 require_self，它在自身内部添加内容，以及 require some_other_file，它是对您的主 scss 文件的引用。rake assets:precompile 的默认行为是编译您的 application.js 和 application css

Rail 生成器生成的 production.rb 编码指定默认编译 application.css。（配置/环境）

```
 # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )
  config.assets.precompile += %w( home.js ) 
```

应用程序.erb

```
<%= stylesheet_link_tag 'application' %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T00:48:36.167

如果您不将扩展名附加到`stylesheet_link_tag`,`.css`将自动附加。但是，我不知道为什么在您指定时它会附加扩展名`.scss`。

我也不确定你为什么不只使用`<%= stylesheet_link_tag 'application' %>`，这应该是所有必要的。

有关更多信息，请参阅`stylesheet_link_tag` [此处的文档。](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper/StylesheetTagHelpers.html#method-i-stylesheet_link_tag)

# python - 计算 Series 或 DataFrame 的交叉（截取）点

> ID：10475488
> 
> 赞同：7
> 
> 时间：2012-05-07T00:38:47.323
> 
> 标签：python, pandas

我有索引是浮点数的周期性数据，如下所示：

```
time =    [0, 0.1, 0.21, 0.31, 0.40, 0.49, 0.51, 0.6, 0.71, 0.82, 0.93]
voltage = [1,  -1,  1.1, -0.9,    1,   -1,  0.9,-1.2, 0.95, -1.1, 1.11]
df = DataFrame(data=voltage, index=time, columns=['voltage'])
df.plot(marker='o') 
```

我想创建一个**`cross(df, y_val, direction='rise' | 'fall' | 'cross')`**函数，该函数返回一个时间数组（索引），其中包含电压值等于**y_val**的所有插值点。对于**“上升”，**仅返回斜率为正的值；对于**“下降”，**仅返回具有负斜率的值；对于**'cross'**两者都返回。因此，如果**y_val=0**和**direction='cross'**则将返回一个包含 10 个值的数组，其中包含交叉点的 X 值（第一个值约为 0.025）。

我在想这可以用迭代器来完成，但想知道是否有更好的方法来做到这一点。

谢谢。我爱熊猫和熊猫社区。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T13:24:19.963

为此，我完成了以下操作。它是一个矢量化版本，比使用循环的版本快 150 倍。

```
def cross(series, cross=0, direction='cross'):
    """
    Given a Series returns all the index values where the data values equal 
    the 'cross' value. 

    Direction can be 'rising' (for rising edge), 'falling' (for only falling 
    edge), or 'cross' for both edges
    """
    # Find if values are above or bellow yvalue crossing:
    above=series.values > cross
    below=np.logical_not(above)
    left_shifted_above = above[1:]
    left_shifted_below = below[1:]
    x_crossings = []
    # Find indexes on left side of crossing point
    if direction == 'rising':
        idxs = (left_shifted_above & below[0:-1]).nonzero()[0]
    elif direction == 'falling':
        idxs = (left_shifted_below & above[0:-1]).nonzero()[0]
    else:
        rising = left_shifted_above & below[0:-1]
        falling = left_shifted_below & above[0:-1]
        idxs = (rising | falling).nonzero()[0]

    # Calculate x crossings with interpolation using formula for a line:
    x1 = series.index.values[idxs]
    x2 = series.index.values[idxs+1]
    y1 = series.values[idxs]
    y2 = series.values[idxs+1]
    x_crossings = (cross-y1)*(x2-x1)/(y2-y1) + x1

    return x_crossings

# Test it out:
time = [0, 0.1, 0.21, 0.31, 0.40, 0.49, 0.51, 0.6, 0.71, 0.82, 0.93]
voltage = [1,  -1,  1.1, -0.9,    1,   -1,  0.9,-1.2, 0.95, -1.1, 1.11]
df = DataFrame(data=voltage, index=time, columns=['voltage'])
x_crossings = cross(df['voltage'])
y_crossings = np.zeros(x_crossings.shape)
plt.plot(time, voltage, '-ob', x_crossings, y_crossings, 'or')
plt.grid(True) 
```

当这工作时，这是非常令人满意的。有什么可以改进的吗？

# java - javac : 编译一个使用其他类的 .java 文件

> ID：10475491
> 
> 赞同：12
> 
> 时间：2012-05-07T00:40:00.893
> 
> 标签：java, compiler-errors

嗨，我有 3 个 java 文件

```
a.java  
b.java  
c.java 
```

我设法为 a 和 b 生成 .class 文件使用

```
javac example/a.java  
javac example/b.java 
```

但是当我对 c.java 执行相同操作时，我收到错误错误：找不到符号 b 和 c

关于如何解决这个问题的任何建议？

所有java文件都在同一个文件夹中

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T00:43:27.823

当您尝试编译 class 时，您必须拥有类`a`和类路径。这允许编译器验证它们是否存在，找出它们有什么方法，等等。`b``c`

`javac`对包名和类路径非常敏感。最简单的做法是像这样同时编译所有三个`javac example/a.java example/b.java example/c.java`。

如果您转到 example 的父目录（我们称之为它`src`），那么您可以运行以下命令：

```
javac -cp src src/example/c.java 
```

您必须这样做的原因是因为您的类将它们的包列为`example`. 由于您的包名称，`javac`正在寻找`example`其类路径中的目录，它希望在其中找到`a.class`和`b.class`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T00:41:58.897

大概你在`example/`运行时不在目录中`javac`。尝试

```
javac -cp example c.java 
```

或者只是`cd`进入该目录。`c.java` *对于所依赖*的类，类路径不会自动解析。

# scala - Scala 中 /: 和 :\ 运算符之间的性能考虑

> ID：10475493
> 
> 赞同：1
> 
> 时间：2012-05-07T00:40:10.477
> 
> 标签：scala, scala-collections

我觉得 insertSortRight 比 insertSortLeft 效率低，因为 insertSortRight 需要调用 List.last（即 O(n)）作为 insert() 的参数之一，其中 insertSortLeft 调用 List.head（即 O(1)）作为一个参数insert() 的参数。

这种理解正确吗？谢谢。

```
def insertSortRight(unsorted: List[Int]) : List[Int] = {
  (unsorted :\ List[Int]()) ((a, b) => insert(a, b))
}

def insertSortLeft(unsorted: List[Int]) : List[Int] = {
  (List[Int]() /: unsorted) ((a, b) => insert(b, a))
}  

def insert(a: Int, list: List[Int]) : List[Int] = list match {
  case List() => List(a)
  case y::ys => if (a > y) y::insert(a, ys) else a::y::ys
} 
```

DHG 回答“总是喜欢左折叠”。但是，Scala 中的编程有一个相反的例子。

```
def flattenLeft[T](xss: List[List[T]]) = (List[T]() /: xss) (_ ::: ) 

def flattenRight[T](xss: List[List[T]]) = (xss :~List[T]()) ( ::: _) 
```

我想这是因为在这种情况下 flattenRight 是通过一个函数调用实现的，而 flattenLeft 是通过 n 个函数调用实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:47:11.983

因此，对于 a `List`，由于需要进行头部操作，`foldLeft`因此是自然的选择。这样，您就可以从左到右处理列表，始终占据主导地位。如您所见，它的实现 (on `LinearSeqOptimized`) 只使用了一个 while 循环并遍历一次。

```
override /*TraversableLike*/
def foldLeft[B](z: B)(f: (B, A) => B): B = {
  var acc = z
  var these = this
  while (!these.isEmpty) {
    acc = f(acc, these.head)
    these = these.tail
  }
  acc
} 
```

'foldRight' 似乎是 O(n^2) 因为，为了获取最后一个元素，你必须遍历*n次的**n 个*元素，但库实际上为你优化了这个。在幕后，是这样实现的（也在）：`List` *`foldRight``LinearSeqOptimized`*

 *```
def foldRight[B](z: B)(f: (A, B) => B): B =
  if (this.isEmpty) z
  else f(head, tail.foldRight(z)(f)) 
```

正如你所看到的，这个函数是通过递归调用`foldRight`尾部，将每个头部保持在堆栈中，并在到达最后一个元素后以相反的顺序将函数应用于每个头部来构造的。*

# css - IE9 再次与众不同

> ID：10475497
> 
> 赞同：2
> 
> 时间：2012-05-07T00:40:46.313
> 
> 标签：css, forms, html, internet-explorer-9

我有一个带有大约 6 个输入字段的 html5 表单，其中一些是必需的，一些是可选的。填写完一个字段后，我使用以下代码将其变为绿色：

```
input:valid, textarea:valid { background: #dfd; } 
```

这在 Chrome 和 Firefox 中运行良好，但是 Internet Explorer 9 就是这样，不想考虑这个 CSS 代码。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:02:46.990

IE 9 不支持这些伪类：

[http://msdn.microsoft.com/en-us/library/cc351024(v=vs.85).aspx#pseudoclasses](http://msdn.microsoft.com/en-us/library/cc351024(v=vs.85).aspx#pseudoclasses)

# c - SDL_BlitSurface 的行为不一致

> ID：10475501
> 
> 赞同：2
> 
> 时间：2012-05-07T00:41:40.777
> 
> 标签：c, sdl

这是一个示例代码：

```
#include <SDL/SDL.h>
#include <SDL/SDL_image.h>
#include <stdio.h>

int main()
{
    if(SDL_Init(SDL_INIT_EVERYTHING) == -1)
    {
        printf("SDL ERROR: %s", SDL_GetError());
        return 1;
    }

    SDL_Surface *screen;
    screen = SDL_SetVideoMode(128, 128, 32, SDL_SWSURFACE);

    SDL_Surface *img;
    img = IMG_Load("./debug.png");

    SDL_BlitSurface(img, NULL, screen, NULL);
    SDL_Flip(screen);

    SDL_Delay(1000);

    SDL_FreeSurface(img);
    SDL_Quit();
    return 0;
} 
```

它编译得很好，但是当我运行它时，它有时会起作用，而且大多数时候只显示部分图像。实在想不通是什么原因造成的...

编辑：这是我用来测试程序的图像：

[![图像](../Images/03440a4193ee984b46d40099326d82c2.png)](https://i.stack.imgur.com/N7Teg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:23:43.410

如果 debug.png 和你的 main.cpp 在同一个文件夹中，只需调用 IMG_Load("debug.png")，前面的 ./ 就不需要了。

顺便说一句，在一行上初始化你的表面没有任何问题：

```
SDL_Surface* screen = SDL_SetVideoMode(128, 128, 32, SDL_SWSURFACE);
//and
SDL_Surface* img = IMG_Load("debug.png"); 
```

# mysql - 在 SQL/PHP 中连接 3 个表

> ID：10475503
> 
> 赞同：1
> 
> 时间：2012-05-07T00:42:14.713
> 
> 标签：mysql

我正在尝试加入 3 个表标签、项目标签和交易。交易是付款清单。Itemtags 将 transactionid（来自“transactions”）链接到与“Tags”中正确的标签详细信息对应的 tagid。

我想链接所有三个表，以便我可以在 Transactions 中看到“Tags”和“Billdate”中的“tagname”字段。我的代码不起作用 - 当我尝试执行 mysql_fetch_array 时，出现以下错误：

“警告：mysql_fetch_array() 期望参数 1 是资源，布尔值”

任何帮助都感激不尽！

```
$list = mysql_query("SELECT
tags.tagid,tags.tagname,
itemtags.tagid,itemtags.transactionid 
transaction.transactionid,transaction.billdate
FROM 
tags 
  LEFT JOIN itemtags ON tags.tagid = itemtags.tagid
  LEFT JOIN transaction ON itemtags.transactionid = transaction.transactionid
WHERE
DATE(`transaction.billdate`) >= '$startdate' AND 
DATE(`transaction.billdate`) <= '$enddate'
");

while($val=mysql_fetch_array($list)) {
print ' '.$val['tagid'].' - '.$val['tagname'].' ||';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:53:04.897

您的查询肯定有错误，要调试导致的错误，请使用下面的代码。

```
mysql_query($query) or die(mysql_error()); 
```

这将导致打印出 sql 查询抛出的正确错误，一旦您告诉我确切的错误是什么，我会很乐意帮助您查询:)

更正后的查询或更接近正确的查询应如下所示。请注意，我已经调整了您的日期比较，因为不需要 DATE() 语法:)

```
SELECT
    tags.tagid,
    tags.tagname,
    itemtags.tagid,
    itemtags.transactionid,
    transaction.transactionid,
    transaction.billdate
FROM tags 
  LEFT JOIN itemtags ON tags.tagid = itemtags.tagid
  LEFT JOIN transaction ON itemtags.transactionid = transaction.transactionid
WHERE
transaction.billdate >= '$startdate' AND 
transaction.billdate <= '$enddate' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:48:03.703

您在第一个左连接中有错字，您可以使用别名来两次获取同一列

```
mysql_query("SELECT
tags.tagid,tags.tagname,
itemtags.tagid,itemtags.transactionid as itemtagstransid, 
transaction.transactionid as transtransid,transaction.billdate
FROM 
tags 
  LEFT JOIN itemtags ON tags.tagid = itemtags.tagid
  LEFT JOIN transaction ON itemtags.transactionid = transaction.transactionid
WHERE
DATE(`transaction.billdate`) >= '$startdate' AND 
DATE(`transaction.billdate`) <= '$enddate'
");` 
```

# ios - ios标签栏按钮到模态视图

> ID：10475507
> 
> 赞同：6
> 
> 时间：2012-05-07T00:42:47.333
> 
> 标签：ios

我正在使用 idev-recipes/RaisedCenterTabBar 并且我想要从中心按钮调用的模态视图，而不是相机。

代码在这里： [https ://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T16:09:03.887

为了实现这一目标，有更好的方法可以遵循。而且容易得多。

我通过使用这种方法实现的理解：[https](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar) ://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar是当你试图隐藏标签栏时发生了奇怪的事情。所以我为我找到的最好的解决方案（和你做的一样）在这里：[http ://www.lantean.co/display-a-modal-uiviewcontroller-when-a-uitabbaritem-is-pressed/](http://www.lantean.co/display-a-modal-uiviewcontroller-when-a-uitabbaritem-is-pressed/)

没有必要做任何其他事情。只需忽略与 UITabBarItem 关联的视图控制器并呈现您的模态视图！就这样！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:39:28.557

我将创建您自己的 UITabBarController 子类，然后添加此方法：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item  {

} 
```

您将能够知道选择了哪个项目，然后在其中实例化一个模态 VC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:03:06.507

可能你可以只使用[UITabBarDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarDelegate_Protocol/Reference/Reference.html)，该
`- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item`
方法。
当有人按下选项卡栏中的按钮时，该方法将发送给委托人。在那里你可以检查它是否是正确的按钮，然后实例化模态视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:51:04.200

通过子类化或使用委托，您可以简单地检查所选项目是否是您的中间按钮，如果是，让标签栏选择先前选择的项目，然后显示您的模型视图控制器。由于您将在原始选择发生的同一 RunLoop 源中执行此操作，因此选项卡选择将有效地撤消，而无需切换到中间 VC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T12:20:43.653

根据您提供的代码示例 => [https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)

中央凸起的选项卡按钮是一个 UIButton，因此只需在 BaseViewController.m 类中设置该按钮的操作即可

```
[button addTarget:self action:@selector(showmodalview) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在 showmodalview 方法中编写此代码=>

```
-(void)showmodalview
{
    UIViewController *view1=[[UIViewController alloc] init]; // you can use any view controller instance you want ,this is just the example.
    [self presentModalViewController:view1 animated:YES];
} 
```

# c++ - boost::ptr_container 中的克隆分配器和多态性

> ID：10475509
> 
> 赞同：2
> 
> 时间：2012-05-07T00:43:01.500
> 
> 标签：c++, visual-studio-2010, boost-ptr-container

对于我当前的项目，我正在使用 a`boost::ptr_vector`来保持`Objects`多态性，并且一切正常，直到我的一个构建 VS2010 抛出它无法克隆它，`object`所以我去了，查找克隆，并`new_clone()`按照要求实现了方法`boost`，然后[c++ FAQ](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.8)做到了，`pure virtual`但现在 VS2010 向我扔了这个 shanagin，说它不能在抽象类上使用克隆。

```
1>c:\program files\boost\boost_1_49_0\boost\ptr_container\clone_allocator.hpp(34): error C2259: 'Object' : cannot instantiate abstract class
1>          due to following members:
1>          'Object *Object::new_clone(void) const' : is abstract
1>          c:\...\Object.h(36) : see declaration of 'Object::new_clone'
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\clone_allocator.hpp(68) : see reference to function template instantiation 'T *boost::new_clone<U>(const T &)' being compiled
1>          with
1>          [
1>              T=Object,
1>              U=Object
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\detail\reversible_ptr_container.hpp(110) : see reference to function template instantiation 'U *boost::heap_clone_allocator::allocate_clone<Object>(const U &)' being compiled
1>          with
1>          [
1>              U=Object
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\detail\reversible_ptr_container.hpp(99) : while compiling class template member function 'Object *boost::ptr_container_detail::reversible_ptr_container<Config,CloneAllocator>::null_clone_allocator<allow_null_values>::allocate_clone(const Object *)'
1>          with
1>          [
1>              Config=boost::ptr_container_detail::sequence_config<Object,std::vector<void *,std::allocator<void *>>>,
1>              CloneAllocator=boost::heap_clone_allocator,
1>              allow_null_values=false
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\detail\reversible_ptr_container.hpp(276) : see reference to class template instantiation 'boost::ptr_container_detail::reversible_ptr_container<Config,CloneAllocator>::null_clone_allocator<allow_null_values>' being compiled
1>          with
1>          [
1>              Config=boost::ptr_container_detail::sequence_config<Object,std::vector<void *,std::allocator<void *>>>,
1>              CloneAllocator=boost::heap_clone_allocator,
1>              allow_null_values=false
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\detail\reversible_ptr_container.hpp(275) : while compiling class template member function 'void boost::ptr_container_detail::reversible_ptr_container<Config,CloneAllocator>::null_policy_deallocate_clone(const Object *)'
1>          with
1>          [
1>              Config=boost::ptr_container_detail::sequence_config<Object,std::vector<void *,std::allocator<void *>>>,
1>              CloneAllocator=boost::heap_clone_allocator
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\ptr_sequence_adapter.hpp(132) : see reference to class template instantiation 'boost::ptr_container_detail::reversible_ptr_container<Config,CloneAllocator>' being compiled
1>          with
1>          [
1>              Config=boost::ptr_container_detail::sequence_config<Object,std::vector<void *,std::allocator<void *>>>,
1>              CloneAllocator=boost::heap_clone_allocator
1>          ]
1>          c:\program files\boost\boost_1_49_0\boost\ptr_container\ptr_vector.hpp(35) : see reference to class template instantiation 'boost::ptr_sequence_adapter<T,VoidPtrSeq,CloneAllocator>' being compiled
1>          with
1>          [
1>              T=Object,
1>              VoidPtrSeq=std::vector<void *,std::allocator<void *>>,
1>              CloneAllocator=boost::heap_clone_allocator
1>          ]
1>          c:\general\dev\senior\tankbattle3d\tankbattle3d\tankbattle3d\room.h(28) : see reference to class template instantiation 'boost::ptr_vector<T>' being compiled
1>          with
1>          [
1>              T=Object
1>          ] 
```

这是否意味着为了让 boost 能够克隆东西，我必须扔掉抽象基类？

* * *

**笔记：**

*   抽象基类的对象在任何时候都不应该存在于程序中，但几乎所有的东西都会被这样对待。
*   当我将克隆方法设为非虚拟方法并为其提供实际返回某些东西的方法时（提供构造函数/复制构造函数，这意味着它们可能存在，这与设计背道而驰）然后编译器会抛出所有驱动类都需要一个默认构造函数。没有它们是设计使然。

编辑：我没有实现`delete_clone()`（不知道这是明确要求的，我认为析构函数会很好）

```
class Object{
public :
    ObjectType  superType;
    bool toBeRemoved;
    virtual void performAction(int action, Object& source){}
    virtual void updateObject(float duration){}
    virtual ~Object(){}
    virtual Object * new_clone(void)const = 0;      // Object.h[36]
    bool operator==(const Object& _other)const;
    bool operator!=(const Object& _other)const;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:20:48.570

您想要的是一个独立的（非成员）`new_clone()`函数，编译器会优先选择 Boost 中的函数`clone_allocator.hpp`：

```
class Object{
public :
    ObjectType  superType;
    bool toBeRemoved;
    virtual void performAction(int action, Object& source){}
    virtual void updateObject(float duration){}
    virtual ~Object(){}
    bool operator==(const Object& _other)const;
    bool operator!=(const Object& _other)const;

private:
    virtual Object * do_clone() const = 0;
};

// in the same namespace as `class Object`:
//  so it will get picked up instead of Boost's default 
//  implementation

inline
Object* new_clone( const Object& o)
{
    return o.do_clone();
} 
```

# jboss - Netty - 使用与绑定服务器通道相同的侦听地址启动新连接

> ID：10475510
> 
> 赞同：0
> 
> 时间：2012-05-07T00:43:25.767
> 
> 标签：jboss, netty

我有一个绑定的服务器通道，该通道当前正在本地地址“x”处接受连接。我现在需要启动到远程地址“y”的连接，但我也需要我的本地监听地址为“x”。使用本地通道工厂和本地地址时，当我尝试使用本地地址 = 'x' 建立新的客户端连接时，会收到“地址已绑定”错误。这是有道理的。

所以我的下一条路线是试图找到一种从服务器通道创建新的子连接的方法，但这最终导致 netty 内部代码有点太深了，似乎是一条糟糕的路线。我记得之前看到一个关于本地客户端连接的错误。

*   这只是本地频道的错误吗？
*   在 Netty 中是否可以从绑定地址发起连接？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:16:08.183

你在写代理吗？如果是这样，这是一个 netty[示例应用程序](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/proxy)。

请注意，您必须为客户端和服务器设置不同的通道工厂。

```
 // Configure the bootstrap.
    Executor executor = Executors.newCachedThreadPool();
    ServerBootstrap sb = new ServerBootstrap(
            new NioServerSocketChannelFactory(executor));

    // Set up the event pipeline factory.
    ClientSocketChannelFactory cf =
            new NioClientSocketChannelFactory(executor); 
```

# objective-c - UILabel字体大小？

> ID：10475513
> 
> 赞同：89
> 
> 时间：2012-05-07T00:44:33.020
> 
> 标签：objective-c, iphone, fonts, uilabel, font-size

我似乎无法使用以下代码修改 UILabel 的字体大小：

```
itemTitle.font = [UIFont systemFontOfSize:25]; 
```

当我将数字 25 增加到更大的值时，它似乎只在标签上添加了一个上边距，从而将文本向下推了很多，以至于文本在底部被截断或完全溢出。

我在其他地方有另一个 UILabel systemFontOfSize 25，它比 itemTitle 文本小得多。这是怎么回事？25不应该是一个绝对值吗？

我对如何以编程方式更改 uilabels 的字体大小感到非常困惑。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-05-07T06:07:24.127

我通过以下代码修改了 UILabel：

```
label.font=[label.font fontWithSize:25]; 
```

试试这个，看看它是否适用于你的情况？？？

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-07T01:00:33.650

检查您的标签是否未设置为自动调整大小。在 IB 中，它被称为“Autoshrink”，位于字体设置旁边。以编程方式，它被称为`adjustsFontSizeToFitWidth`.

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-03-18T09:59:38.093

```
[label setFont:[UIFont systemFontOfSize:9]]; 
```

这对我有用。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-04-12T14:23:42.447

对于**Swift 3.1**、**Swift 4**和 **Swift 5**，如果您只想更改标签的字体大小：

```
let myLabel : UILabel = ...
myLabel.font = myLabel.font.withSize(25) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-07-31T14:25:40.130

## **您可以通过这些属性设置字体大小**

```
timedisplayLabel= [[UILabel alloc]initWithFrame:CGRectMake(70, 194, 180, 60)];

[timedisplayLabel setTextAlignment:NSTextAlignmentLeft];

[timedisplayLabel setBackgroundColor:[UIColor clearColor]];

[timedisplayLabel setAdjustsFontSizeToFitWidth:YES];

[timedisplayLabel setTextColor:[UIColor blackColor]];

[timedisplayLabel setUserInteractionEnabled:NO];

[timedisplayLabel setFont:[UIFont fontWithName:@"digital-7" size:60]];

timedisplayLabel.layer.shadowColor =[[UIColor whiteColor ]CGColor ];

timedisplayLabel.layer.shadowOffset=(CGSizeMake(0, 0));

timedisplayLabel.layer.shadowOpacity=1;

timedisplayLabel.layer.shadowRadius=3.0;

timedisplayLabel.layer.masksToBounds=NO;

timedisplayLabel.shadowColor=[UIColor darkGrayColor];

timedisplayLabel.shadowOffset=CGSizeMake(0, 2); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-03-04T05:48:13.423

这对我有用

**斯威夫特 3**

```
label.font = label.font.fontWithSize(40.0) 
```

**斯威夫特 4**

```
label.font = label.font.withSize(40.0) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-12-10T11:39:35.640

以编程方式调整标签文本大小的非常简单但有效的方法：-

```
label.font=[UIFont fontWithName:@"Chalkduster" size:36]; 
```

:-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-17T14:48:39.770

这对我有用：

```
sequencerPlayLabel.font = [UIFont fontWithName:kTypeFont size:kTypeFontSize]; 
```

-富有的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-12T13:40:12.150

上面的答案有很大帮助。

这是斯威夫特版本。

```
@IBOutlet weak var priceLabel: UILabel!

*.... lines of code later*

self.priceLabel.font = self.priceLabel.font.fontWithSize(22) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-05T06:26:15.110

在 C# 中这些方法可以解决问题，在 UIkit 中这些方法是可用的。

```
Label.Font = Label.Font.WithSize(5.0f);
       Or
Label.Font = UIFont.FromName("Copperplate", 10.0f);  
       Or
Label.Font = UIFont.WithSize(5.0f); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-05-07T06:16:47.897

尝试更改标签框架大小的高度和宽度，以免文本被剪切。

```
 [label setframe:CGRect(x,y,widht,height)]; 
```

# visual-studio - 禁用以在 Microsoft Visual C++ 中显示运行时错误

> ID：10475516
> 
> 赞同：1
> 
> 时间：2012-05-07T00:45:19.920
> 
> 标签：visual-studio, visual-c++, runtime-error

我正在寻找禁用运行时错误的代码或选项。而不是显示那个愚蠢的消息，我只想崩溃或继续。因此，总而言之，不要显示该消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:00:27.223

这个问题（或至少一个非常相似的问题）已在[禁用 Microsoft Visual C 运行时错误中得到解答](https://stackoverflow.com/questions/1938715/disable-microsoft-visual-c-runtime-error)

需要在您的程序中处理这些错误，以阻止事情超出您的控制并显示 Microsoft 对话框。提到的答案解释了如何自己捕获这些错误。实现崩溃处理的一种方法是自己捕获小型转储，在您的软件中使用[CrashRpt 之类的东西。](http://code.google.com/p/crashrpt/)

# mysql - 数据库中的多个 Count()

> ID：10475517
> 
> 赞同：1
> 
> 时间：2012-05-07T00:45:39.643
> 
> 标签：mysql

我正在使用 winforms 和 VB 进行调查申请。这是我到目前为止显示统计信息的 SQL：

```
SELECT
    tblAlt.altText,
    Count(tblAnswers.answerID)
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

这将返回一个问题的每个备选方案，以及有多少人回答了它们。有没有一种方法可以计算使用相同的 SQL 查询总共回答了多少？

涉及的表格有：

```
_______________     _______________     ___________  _______________
|_tblUsers____|     |_tblAnswers___|    |_tblAlt__|  |_tblQuestion_|
| userID      |     | answerAltID  |    | altID   |  | questID     |
| username    |     | userID       |    | altText |  | questText   |
|_____________|     |______________|    |_questID_|  |_____________| 
```

任何帮助，将不胜感激！

这是我最后使用的：

```
SELECT
tblAlt.altText,
Count(tblAnswers.answerID),
(SELECT COUNT(answerID) FROM tblAnswers, tblAlt 
WHERE tblAnswers.answerAltID = tblAlt.altID 
AND tblAlt.questID = " & CInt(questionID) & ") as total_count
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:00:26.070

使用汇总：

```
SELECT
    tblAlt.altText,
    Count(tblAnswers.answerID)
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText WITH ROLLUP; 
```

* * *

如果您想要一次性计算（以提高查询效率），请使用 CROSS JOIN。别担心，这个 CROSS JOIN 不会产生笛卡尔积，它只有一行。这可能比子查询方法更快：

```
SELECT
tblAlt.altText,
Count(tblAnswers.answerID), x.total_count    
FROM tblAlt
cross join (SELECT COUNT(answerID) as total_count FROM tblAnswers) as x 

LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

或者使用 MySqlism，可能会更快：

```
SELECT
tblAlt.altText,
Count(tblAnswers.answerID), @total_count as total_count
FROM tblAlt
cross join (SELECT @total_count := COUNT(answerID) FROM tblAnswers) as x

LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

或者您可以使用多语句。请注意，`SET`语句不会出现在 ADO.NET 的 DataReader 或 DataTable 上。ADO.NET 仍然可以从您的实际查询中获得结果。在所有方法中，这肯定会更快：

```
SET @total_count := (SELECT COUNT(answerID) FROM tblAnswers);
SELECT
tblAlt.altText,
Count(tblAnswers.answerID), @total_count as total_count
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:49:50.467

您可以使用子查询来执行此操作，例如：

```
SELECT
tblAlt.altText,
Count(tblAnswers.answerID),
(SELECT COUNT(answerID) FROM tblAnswers) as total_count
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

一些资源：

[http://beginner-sql-tutorial.com/sql-subquery.htm](http://beginner-sql-tutorial.com/sql-subquery.htm)

[http://www.1keydata.com/sql/sql-subquery.html](http://www.1keydata.com/sql/sql-subquery.html)

# jquery - 如何通过 CSS 在翻转时同时更改文本和图像？

> ID：10475523
> 
> 赞同：4
> 
> 时间：2012-05-07T00:46:30.047
> 
> 标签：jquery, html, css, hover, css-sprites

我有一个带有图标的顶部菜单 - 在它下面有图标的文本。

```
----------      -----------
|        |      |         |
|  icon  |      |    ?    |
----------      -----------
   Text          Questions

<li class="questions">
    <a href="/questions" id="questions">
    <i class="questions_icon"></i>
    Questions
    </a>
</li> 
```

使用精灵我在 :hover 上更改了图标。我还在 :hover 上更改了文本的颜色。

但是，我想知道是否有可能：

*   当文本悬停时更改图标 - 和
*   图标悬停时更改文本。

这可以单独使用CSS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:01:54.867

所以是这样的：

```
.questions:hover i {
    background-image: url(...);
}
.questions:hover {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:01:01.093

演示（无图像）：http: [//jsfiddle.net/kFkcV/](http://jsfiddle.net/kFkcV/)

```
.container::after {
  content: "Hello World";
}

.container::before {
  content: /images/icon1.png;
}

.container:hover:after {
  content: "Hover World!";
}

.container:hover:before {
  content: /images/icon2.png;
} 
```

​</p>

# iphone - iPhone应用程序中的内存泄漏

> ID：10475528
> 
> 赞同：0
> 
> 时间：2012-05-07T00:47:43.720
> 
> 标签：iphone, objective-c, xcode, memory-management, memory-leaks

我来自 C 背景，你们中的许多人都知道 Objective-C 是从 C 派生的。我认为内存管理概念是相似的。我收到有关潜在内存泄漏的警告，但奇怪的是我在`alloc`. 看看这个例子：

```
self.cardCellArray = [[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards]; 
```

并在交易中：

```
- (void) dealloc
{
[super dealloc];
[self.cardCellArray removeAllObjects];
} 
```

我收到的内存泄漏消息是：

`Method returns an Objective-C object with a +1 retain count`

和

`Object leaked: allocated object is not referenced later in this execution path and has a retain count of +1`

谁能发现我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:53:50.727

我假设 cardCellArray 属性是一个拥有引用（即保留或复制）。

```
self.cardCellArray = [[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards]; 
```

这应该是：

```
self.cardCellArray = [[[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards] autorelease]; 
```

甚至：

```
cardCellArray = [[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards]; 
```

确保内存管理正确。

此外，dealloc 方法应该是：

```
- (void)dealloc
{
   [cardCellArray release];
   [super dealloc];
} 
```

这假定 cardCellArray 属性的实例变量名为 cardCellArray。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T00:50:56.353

您没有释放数组，而只是清空它。另请注意，我将`[super dealloc]`调用移至最后一行，这是因为具有实例变量的对象稍后在 dealloc 链中完全释放，因此您将尝试访问释放的内存。

```
- (void) dealloc
{
   [cardCellArray release];
   [super dealloc];
} 
```

另一件事：您正在使用`self.cardCellArray =`，这取决于您的`@property`for ivar 的外观，您可能必须删除该`self.`部分，因为它保留了对象（或者您必须稍后手动释放它）。`@property`保留对象的是`copy`和`retain`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:16:49.397

是的，正如 JustSid 所建议的那样，您将双重保留数组并且永远不会释放它。

虽然 Objective-C 堆管理源于 C，但管理单个对象的方式完全不同。

您没有说明该属性`cardCellArray`是如何定义的，但大概是定义为`retained`，这样，当您分配给 时`self.cardCellArray`，您实际上是在执行该方法`setCardCellArray`，并且该方法“保留”该对象。但是由于您的`alloc`调用，它已经被保留了，所以现在它被保留了两次。

然后，在`dealloc`方法中你根本不`release`这样做。`[cardCellArray release];`您可以通过doing或doing释放对象`self.cardCellArray = nil;`。要么释放它（但只有一次——你需要用双重保留来解决你的问题）。

您***无需***`removeAllObjects`拨打电话。当您`release`创建一个对象（并且保留计数变为零）时，将`dealloc`调用该对象的方法并执行适合其引用的对象的释放。

（正如 Sid 建议的那样，`[super dealloc]`最后打电话。）

（但当然，上面的一切都在 ARC 的窗口之外，在那里你会担心一系列全新的、不同的事情，你可能会搞砸。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T02:26:02.833

1.  检查属性`cardCellArray`是`retain`还是`copy`。如果是这样，当您调用时`self.cardCellArray`，您设置为属性的对象`cardCellArray`获取保留计数**增加**1。

2.  `alloc`使用&创建对象`init`（例如`initWithCapacity:`）返回一个保留计数为 1 的对象，因为您在`alloc`这里调用了一个方法。

    在没有调用的情况下创建对象时，`alloc`例如`[NSMutableArray arrayWithCapacity:]`将返回一个`autorelease`对象（它会在需要时自动将其保留计数减少 1），您可以认为它的保留计数为 0。

3.  在方法中`dealloc`，您应该调用`[self.cardCellArray release]`，这将自动删除数组保留的所有对象。

您的代码在此处生成一个 retain-count-1 对象

`[[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards]`

当您调用时，此对象的保留计数变为 2

`self.cardCellArray = xxx`

但是在 dealloc 中，您没有减少 cardCellArray 的保留计数，然后发生了泄漏。

所以将您的代码更改为

`self.cardCellArray = [[[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards] autorelease];`

autorelease 将在需要时自动减少保留计数。

或者`self.cardCellArray = [NSMutableArray arrayWithCapacity:kTotalNumberOfCards];`

或者

```
NSMutableArray *_array = [[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards];
self.cardCellArray = _array;
[_array release]; 
```

或者

```
cardCellArray = [[NSMutableArray alloc] initWithCapacity:kTotalNumberOfCards];
//this helps because it doesn't call `[self setCardCellArray]` which generate +1 retain count. 
```

`cardCellArray`最后，记得在 dealloc 方法中也释放

# java - 在 Java 桌面应用程序中嵌入服务器端 JavaScript 框架？

> ID：10475529
> 
> 赞同：1
> 
> 时间：2012-05-07T00:47:50.997
> 
> 标签：java, javascript

我已经读到可以将 Rhino 嵌入到您的 Java 应用程序中。Narwhal 默认情况下也是建立在它之上的，我被定向到[http://narwhaljs.org/](http://narwhaljs.org/)实际上不再存在。

我很想知道可以嵌入到我的 Java 桌面应用程序中的任何类似于 nodejs、ringojs 的东西。

# matlab - 在matlab中寻找瀑布图的变体

> ID：10475533
> 
> 赞同：4
> 
> 时间：2012-05-07T00:48:31.410
> 
> 标签：matlab, 3d, plot

我有一个要在 matlab 中绘制的 3 维数据。数据集是通过沿 y 方向堆叠 10 条具有不同参数的指数曲线构建的，例如

```
 x = 0:0.01:15;
  x0 = 0.5;
  y = [beta1, beta2, beta3, beta4, beta5, beta6, beta7, beta8, beta9, beta10];
  Z(1, :) = A*exp(-(x-x0).^2/beta1);
  Z(2, :) = A*exp(-(x-x0).^2/beta2);
  Z(3, :) = A*exp(-(x-x0).^2/beta3);
  Z(4, :) = A*exp(-(x-x0).^2/beta4);
  ...
  Z(10, :) = A*exp(-(x-x0).^2/beta10);
  % here A could be change based on beta too (no code shown here) 
```

我试图用瀑布绘制 Z，除了我不希望高度（即垂直线）出现在边缘上。我不知道是否有任何其他方法可以将数据绘制为瀑布状曲线但没有那些垂直线。谢谢

![如何消除下图中圈出的垂直线](../Images/2f97e8bb2fad9b136890753dd4cdc014.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:47:55.543

“它是用线绘制的，而不是用曲面绘制的”。
换句话说，您希望边界线不可见。好吧，这不是一件小事，因为边界线与您可以直接包含的任何配色方案是分开的。您需要做的是在绘制数据后获取数据，然后相应地对其进行修改：

例如

```
[X,Y,Z] = peaks(30);
h = waterfall (X,Y,Z);
CD = get (h, 'CData');
CD(1,:) = nan;
CD(end-2:end,:) = nan;
set (h, 'CData', CD) 
```

请注意，这`CD(1,:)`是针对“上升”边界，而`CD(end-2:end-1,:)`针对下降边界，`CD(end,:)`是针对底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T21:51:45.987

我知道这是一个旧帖子，但以下内容将使曲线下的区域透明：

```
figure;
[X,Y,Z] = peaks(10);
handle_figure = waterfall( X, Y, Z );
set( handle_figure, 'FaceColor', 'none' ); 
```

# php - 带有多个提交按钮的 jquery 验证无法识别第二次提交操作

> ID：10475535
> 
> 赞同：2
> 
> 时间：2012-05-07T00:48:44.350
> 
> 标签：php, jquery, forms, jquery-validate

我正在使用 jquery validate 插件来验证并在我的页面上提交一个表单，该表单具有多个提交按钮来运行不同的功能。

一个提交按钮使用 $post 方法运行，而另一个使用标准操作方法。

（如果我的术语是错误的，请坚持我）

我遇到的问题是，如果我使用第一个按钮提交表单，然后使用第二个按钮再次尝试，它会尝试在第二次提交时再次运行第一个操作。

这是我的代码，希望能让事情变得更清楚......

```
<form id="myForm" action="add.php">
<input type="submit" id="myfunction" />
<input type="submit"​ id="add" />
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;input type="text" name="myvalue" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和我的验证代码...

```
$("#myForm input[type=submit]").click(function(e) {
        if (e.target.id == 'myfunction') {
            $("#myForm").validate({
                submitHandler: function(form) {
                    $.post('myfunctionpage.php', $("#myForm").serialize(), function(data) { });
                }
            });
        } else if (e.target.id == 'add') {
            $("#myForm").validate({
                rules: {
                    name: {
                        required: true,
                    }
                }
            });
        }

    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:53:23.977

为什么不将代码分成两段？

```
$("#myfunction").click(function(e) {

            $("#myForm").validate({
                submitHandler: function(form) {
                    $.post('myfunctionpage.php', $("#myForm").serialize(), function(data) { });
                }
            });
        } 

$("#add").click(function(e) {
            $("#myForm").validate({
                rules: {
                    name: {
                        required: true
                    }
                }
            });
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:15:02.587

您需要在 $.post 案例中停止表单提交。尝试从 click 事件处理程序返回 false，这应该会阻止事件冒泡到表单并导致它提交。

就我个人而言，我挂钩到`submit`表单元素上的事件，而不是按钮上的单击事件。原因是许多用户通过将光标放在文本框中然后按 Enter 来提交表单。从未发生过点击事件，并且您的代码被绕过...

另外，自从我使用 validate 插件已经有一段时间了，但我认为您在提交表单后调用 validate() 时使用错误。检查文档是否正确使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-06T12:38:13.827

以防万一有人在寻找那个。第一次提交后简单使用 $("#myForm").validate().destroy(); 为了清除“表单数据”。

[https://jqueryvalidation.org/Validator.destroy/](https://jqueryvalidation.org/Validator.destroy/)

# java - Eclipse Maven 多模块签出

> ID：10475540
> 
> 赞同：0
> 
> 时间：2012-05-07T00:49:51.073
> 
> 标签：java, maven-2

我正在尝试通过 Eclipse 从 SVN 签出一个 maven 项目。

面向 Web 开发人员的 Eclipse Java EE IDE。版本：Indigo Service Release 2 内部版本 ID：20120216-1857

我将该项目作为一个普通的 Java 项目签出，然后将该项目作为“现有的 maven 项目”导入到工作区中。带有 SCM 的 Maven Checkout 不起作用，因为我看不到 SCM url 下拉菜单未显示在选项中。

问题是 Eclipse 将 3 个子项目和父项目检出到不同的项目中，而不是检出父项目下的所有子项目。

Parent（这个项目似乎没有被mavinized。我在项目中没有看到依赖项）
-child1_folder
-child2_folder
-child3_folder child1
（ mavenized）child2（mavenized
）
child3（mavenized）

以上是预期的吗？

我已经安装了 subclipse，但它现在仍在 SCM 下拉列表中显示选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:54:21.563

您可以尝试两种方法。

方法1：修复“scm”的东西……你需要安装一个连接器，见

1.  [从 SCM 签出 Maven 项目 - 没有连接器](https://stackoverflow.com/questions/6729511/checkout-maven-project-from-scm-no-connectors) 或
2.  [m2eclipse - 没有 SCM 连接器？](https://stackoverflow.com/questions/6981001/m2eclipse-no-connectors-for-scm)

方法2：使用命令行svn客户端（或tortise svn）查看，并在eclipse中导入。

# c++ - 将命令行参数程序转换为菜单驱动程序

> ID：10475541
> 
> 赞同：1
> 
> 时间：2012-05-07T00:49:54.400
> 
> 标签：c++

我做了一个程序，它需要命令行参数来运行它。我现在正在尝试做一个菜单驱动程序，作为其“改进”的一部分。我用了，

```
int main(int argc, char * argv[]) 
```

在原来的争论是：

```
char * startCity = argv[1];
char * endCity = argv[2];
in.open(argv[3],ios::in); //<----file name went here 
```

这是我现在所做的，我知道这是不正确的：

```
int main(int argc, char * argv[]){

int menuChoice;
string startCity;
string endCity;
string fileName;
ifstream in;

cout<<"Welcome to J.A.C. P2\n"
  "\n"
  "This program will find the shortest path\n"
  "from One city to all other cities if there\n"
  "is a connecting node, find the shortest path\n"
  "between two cities or find the shortest\n"
  "between three or more cities.\n"<<endl;

cout<<"Please make a choice of what you would like to do:\n"<<endl;

cout<<"  1------> Shortest Path between 2 cities.\n"
      "  2------> Shortest Path between 3 or more cities.\n"
      "  3------> Shortest Path from 1 city to all.\n"
      "  9------> Take your ball and go home!\n"<<endl;
cout<<"Waiting on you: "; cin>>menuChoice;

switch (menuChoice) {
    case 1:
        cout<<"Enter the starting city: ";
        cin>>StartCity;
        cout<<"\nEnter the ending city: ";
        cin>>EndCity;
        cout<<"\nEnter the name of the file: ";
        cin>> fileName;

    break; 
```

由于我的所有程序都基于 char * argv[] 我如何将它们转换为字符串或如何将变量分配给争论以读取它们？

我感谢所有答案，但它们似乎正朝着我试图摆脱的方向发展。OLD 程序使用命令行参数。我怎样才能做到这一点：

```
string StartCity = char * argv[1];
string EndCity = char * agrv[2];
string filename = in.open(argv[3],ios::in); 
```

这就是我想要做的。如果我没有说清楚，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:17:18.757

这可能会有所帮助。

```
int main (int argc, char ** argv)
{
          std::vector<std::string> params(argv, argv + argc);       
          //Now you can use the command line arguments params[0], params[1] ... 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:21:19.257

将命令行参数转换为字符串：

```
std::vector<std::string> args(argc);
for (int i=1; i<argc; ++i)
   args[i] = argv[i]; 
```

我从“1”开始，因为“0”是程序名称：

* * *

让他们进入vars，也许：

```
// Make sure we're not accessing past the end of the array.
if (argc != 4) {
    std::cout << "Please enter three command line arguments" << std::endl;
    return 1;
}

string startCity = argv[1];
string endCity = argv[2];
string fileName = argv[3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:27:15.520

要从 a 中获取`const char *`a `std::string`，请使用`std::string::c_str()`.

```
fstream file;
string s = "path\\file.txt";
file.open (s.c_str(), ios::in); 
```

# php - 如何使用 PHP 调整图像大小和裁剪图像？

> ID：10475542
> 
> 赞同：-2
> 
> 时间：2012-05-07T00:50:20.327
> 
> 标签：php, image, resize, crop

我正在寻找某种功能，可以将图像大小调整为 100x100、200x200 等，但保持上传图像的纵横比不变。

我的计划是使用某种裁剪，以便在图像的高度或宽度达到 100 后在图像的中心进行裁剪。

所以我的逻辑有点像这样。

```
if ( $currentHeight > $currentWidth ) {
  //resize width to 100 and crop top and bottom off so it is 100 high
}

elseif ( $currentWidth > $currentHeight ) {
  //resize height to 100 and crop left and right off so it is 100 wide
} 
```

在我看来，图像将是 100x100 并且看起来不会很奇怪！

有谁知道我怎么能在一个整洁的功能中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:53:39.773

您还可以使用纯 css 裁剪图像以使用[clip:rect](http://www.w3.org/TR/CSS21/visufx.html)适合特定尺寸：

```
<style>
/*Size of div that contains the dox*/
.crop{
    float:left;
    position:relative;
    width:100px;
    height:100px;
    margin:0 auto;
    border: 2px solid #474747;
}

.crop img{
    margin:0;
    position:absolute;
    top:-25px;
    left:-25px;
    /*       (Top,Right,Bottom,Left) */
    clip:rect(25px 125px 125px 25px);
}    
</style>

<div class="crop">
    <img src="http://static.php.net/www.php.net/images/php.gif" width="200" title="" alt="" />
<div>
<br/>

<div class="crop">
    <img src="http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5" title="" alt="" />
<div> 
```

`**[See In Action](http://jsfiddle.net/4Gvqf/1/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T01:11:41.070

这是我的答案 - 我写了一个 imagemagick/php 函数来做到这一点：

[stackoverflow.com/questions/20927238/](https://stackoverflow.com/questions/20927238/automatically-resize-image-on-the-shorter-side-regardless-of-orientation-in-imag/20928687#20928687)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T00:58:06.037

如果你想裁剪中心部分，那么我想计算坐标的逻辑可以是这样的：

1）计算作物面积的水平坐标：

```
$horizontal_center = $current_width/2;
$left = $horizontal_center - $new_width/2;
$right = $horizontal_center + $new_width/2; 
```

2）计算裁剪区域的垂直坐标：

```
$vertical_center = $current_height/2;
$top = $vertical_center - $new_height/2;
$bottom = $vertical_center + $new_height/2; 
```

# objective-c - iPhone导航控制器后退按钮？

> ID：10475543
> 
> 赞同：0
> 
> 时间：2012-05-07T00:50:38.020
> 
> 标签：objective-c, uinavigationcontroller, uibutton

我想向导航控制器添加一个后退按钮。这就是我的故事板的样子：

![我的故事板](../Images/5fc24a40d807c00d2517532c9368fd65.png)

我有一个用于主屏幕的 ProgViewController。TableView 嵌入到导航控制器中。我还有一个用于 TableView 的 ProgPlayersViewController。

我的问题是如何向导航控制器添加后退按钮？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:58:53.827

ProgViewController 需要位于导航堆栈中，以便您可以返回（即“弹出”）该视图控制器。

实际的按钮本身是由导航控制器创建的，假设有一个视图控制器可以实际返回。

导航控制器，正如您在图表中所拥有的那样，需要在 ProgViewController 之前而不是在它之后。

请注意，如果您不希望导航栏在 ProgViewController 中可见，您可以将其设置为隐藏。

# hadoop - 与 Hadoop 共享集群

> ID：10475549
> 
> 赞同：1
> 
> 时间：2012-05-07T00:51:40.120
> 
> 标签：hadoop, cluster-computing, torque

是否可以设置 Hadoop 使其与集群上的其他应用程序很好地配合使用？

我熟悉 Torque+Maui 资源调度器，并且熟悉使用 HadoopOnDemand 来配置临时 Hadoop 集群。但是，如果很多人都想使用 Hadoop，这会变得相当麻烦：每个人都同样为设置和拆除自己的迷你 hadoop 集群、在自己的 HDFS 上复制数据等而头疼。

如果我们可以拥有一个永久运行的 Hadoop 实例供人们共享，并且 HDFS 始终处于运行状态，那就更酷了。这需要 Hadoop 智能地将工作分配给不忙于其他应用程序（例如 R）的节点，并且在排队工作时不要贪婪。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:32:44.227

这不是公平调度程序所做的吗？

[http://hadoop.apache.org/mapreduce/docs/r0.21.0/fair_scheduler.html](http://hadoop.apache.org/mapreduce/docs/r0.21.0/fair_scheduler.html)

我们使用它来运行具有 30 个用户的永久 hadoop 集群。您可以让它抢占任务以重新分配到新池，也可以为每个池设置单独的优先级。

# ios - 如何删除乱舞

> ID：10475552
> 
> 赞同：0
> 
> 时间：2012-05-07T00:52:34.030
> 
> 标签：ios, xcode, analytics, flurry

我最近开始关注我公司的应用程序。我想删除乱舞并放入 MixPanels。我想知道是否有删除Flurry的程序，或者只是删除.h文件？这是我第一次使用分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:58:36.153

只需`[FlurryAnalytics startSession:@"YOUR_APP_ID"];`从您的 AppDelegate 中删除。

您还可以/应该删除所有`#import "FlurryAnalytics.h"`包含以及各种 Flurry 调用，以及库本身（构建阶段/链接二进制与库）以减少 300K 左右它添加到您的应用程序。

# ruby-on-rails - 在将实例存储到数据库之前，如何根据实例的先前状态运行一些检查？

> ID：10475560
> 
> 赞同：1
> 
> 时间：2012-05-07T00:54:35.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, instance

我正在使用 Ruby on Rails 3.2.2，我想在实例存储到数据库之前根据*之前*的状态运行一些检查。`@article`也就是说，我必须运行一些方法来利用已经存储在数据库中的相关数据`@article`（在下面的情况下，数据是`{:id => 1, :title => "Sample title", :content => "Sample content", :status => "private"}`和*不是* `{:id => 1, :title => "Sample title changed!", :content => "Sample content", :status => "private"}`）。

我想在其属性值更改后继续“检索”/“重新构建”原始实例。那是：

```
# In the controller file

# @article.attributes
# => {:id => 1, :title => "Sample title", :content => "Sample content", :status => "private"}
@article.update_attributes(params[:article])
# => {:id => 1, :title => "Sample title changed!", :content => "Sample content", :status => "private"}

# In the model file
before_save :retrieve_original

def retrieve_original
  # self.attributes
  # => {:id => 1, :title => "Sample title changed!", :content => "Sample content", :status => "private"}

  original = ... # ?
  # original.id
  # => nil
  # original.attributes
  # => {:title => "Sample title", :content => "Sample content", :status => "private"}
  # self.attributes
  # => {:id => 1, :title => "Sample title changed!", :content => "Sample content", :status => "private"}
end 
```

因此，`original`应该是一个`Article`对象*，并且*只是`@article`实例的副本（没有`id`和没有该`@article`属性已更改）。

我尝试使用一些 Ruby on Rails 方法（如`ActiveRecord::Base.dup`or `ActiveModel::Dirty.changed_attributes`），但我还没有找到解决方案。此外，与我的方法相比，我认为*有更好的方法来完成我想做的事情。* **如果是这样，我可能会做什么？**

* * *

我想这样做是因为，例如，如果一篇文章是公开的，那么应该不可能更改标题值；如果文章是私有的，则应该可以更改标题值。当然，我必须在存储编辑过的文章数据之前进行检查，并且对于所有尝试更新该数据的尝试（为此我选择使用`before_save`回调）。但是，如果用户尝试将标题值和私有值更改为公共，那么所有检查都在公共“上下文”中运行，但我希望这些检查仍然在私有“上下文”中运行，因为之前的状态是私有的.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:58:59.503

看起来您可以通过钩子中的[更改](http://ar.rubyonrails.org/classes/ActiveRecord/Dirty.html#M000291)哈希。即`dup`或`clone`更改的版本，然后通过更改的版本`changes`并将属性设置回它们为您的副本所使用的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:01:00.017

只是保存

```
@article = Article.find(params[:id])`
@orginal = @article
if @article.update_attributes(params[:article])
  @original.do_some_method_that_probably_should_be_a_before_update
  #.... whatever is next .....
end 
```

或者重新思考为什么你需要做你认为你需要做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:05:13.627

有几种方法可以做到这一点。基本上，与其尝试在之后恢复更改并随后进行检查，不如在进行更改之前制作对象的副本会更容易。

一种方法是从当前对象的“属性”创建一个新对象，如下所示：

```
tmp_article = @article.attributes 
```

在对模型对象进行任何更改之前执行此操作。然后在保存之前，您可以使用`.diff`rails 内置的 hash 方法：

```
diff_hash = tmp_article - @article.attributes
# diff will now contain any differences. It will be empty if they are identical. 
```

这是 Rails 中 diff 扩展的链接：

[https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/hash/diff.rb](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/hash/diff.rb)

# php - SQL：根据另一个单元格的值选择单元格的值

> ID：10475561
> 
> 赞同：0
> 
> 时间：2012-05-07T00:54:39.363
> 
> 标签：php, mysql, sql, database, wordpress

用户的 WordPress 数据库架构如下：

```
TABLE wp_users
ID
user_login
user_pass
user_nicename
user_email
...

TABLE wp_usermeta
umeta_id
user_id
meta_key
meta_value 
```

现在，这`wp_usermeta`是我希望能够为其编写 SQL 语句的表。

在一行中，`meta_key`是“first_name”......我如何编写一个 SQL 查询来提取等于“first_name”的`meta_value`位置？`meta_key`这不起作用：

`SELECT meta_value FROM wp_usermeta WHERE meta_value = "first_name";`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:58:13.387

它应该是

```
SELECT meta_value FROM wp_usermeta WHERE meta_key = "first_name"; 
```

注意你有`WHERE meta_value`而不是`WHERE meta_key`

# javascript - Facebook 发布到墙上的 JavaScript 不允许我更改“说点什么...”文本

> ID：10475562
> 
> 赞同：1
> 
> 时间：2012-05-07T00:55:14.537
> 
> 标签：javascript, facebook, web, social-networking

我正在尝试更改帖子的“说点什么...”文本部分以提供 FB.ui 的功能

所有其他显示，但它不会更改文本区域中的文本。

我的代码如下：

```
function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'http://solarhelper.net',
      picture: 'http://solarhelper.net/icon',
      name: 'Find your result using Solar Helper',
      caption: 'Click the link to download the app or get your result online.',
      description: 'I could save ' + incomeYear25 + ' over 25 years and save ' + totalCO2Level + ' tonnes of CO2!',
      message: 'Testing'
    };

    function callback(response) {
        if (response && response.post_id) {
            alert('Post was published.');
        } else {
            alert('Post was not published.');
        }
    }

    FB.ui(obj, callback);

  } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:57:28.550

不幸的是，您不是，而且您将无法更改对话框的这一部分。

我想这种预防应该限制事件更多的垃圾邮件？

# asp.net - 从 ApiController 中的 json 序列化中排除属性

> ID：10475571
> 
> 赞同：4
> 
> 时间：2012-05-07T00:57:49.623
> 
> 标签：asp.net, serialization, asp.net-mvc-4, asp.net-web-api

我试图在 web ApiControllers 中排除属性被序列化为 JSON。我已经验证了以下两种情况的工作。

我已在我希望排除的属性中包含以下属性。

```
[System.Web.Script.Serialization.ScriptIgnore]
[System.Xml.Serialization.XmlIgnore] 
```

如果我使用 JavaScriptSerializer 手动序列化我的对象，则会排除该属性。此外，如果我查看来自 Web ApiController 的序列化 XML 输出，则该属性被排除在外。问题是，通过 web ApiController 序列化的 JSON 仍然包含该属性。是否有另一个我可以使用的属性将属性从 JSON 序列化中排除？

**更新：**

我意识到我所有的测试都在一个更复杂的项目中，而且我没有在一个孤立的环境中尝试过。我这样做了，但仍然得到相同的结果。这是一些失败的代码的示例。

```
public class Person
{
    public string FirstName { get; set; }

    [System.Web.Script.Serialization.ScriptIgnore]
    [System.Xml.Serialization.XmlIgnore]
    public string LastName { get; set; }
}

public class PeopleController : ApiController
{
    public IEnumerable<Person> Get()
    {
        return new[]
                   {
                       new Person{FirstName = "John", LastName = "Doe"},
                       new Person{FirstName = "Jane", LastName = "Doe"}
                   };
    } 
} 
```

这是生成的输出。

**JSON：**

```
[
    {
        "FirstName" : "John",
        "LastName" : "Doe"
    },
    {
        "FirstName" : "Jane",
        "LastName" : "Doe"
    }
] 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfPerson xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Person>
        <FirstName>John</FirstName>
    </Person>
    <Person>
        <FirstName>Jane</FirstName>
    </Person>
</ArrayOfPerson> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:12:42.107

请注意，Web API 中的 JSON 序列化正在发生变化。

在 beta 版本中，Web API 使用 DataContractJsonSerializer 来序列化 JSON。但是，情况发生了变化；[最新版本](http://aspnetwebstack.codeplex.com/)的Web API 默认使用[json.net](http://json.codeplex.com/)，尽管您可以覆盖它并改用 DataContractJsonSerializer。

使用 DataContractJsonSerializer，您可以使用 [DataContract] 属性来控制序列化。我对 json.net 还不是很熟悉，所以我不知道它是如何控制序列化的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-10T06:01:50.257

您可以将`[JsonIgnore]`属性用于特定于 JSON 的修复；或者您可以使用`[DataContract]`and`[DataMember]`进行修复，该修复既适用于 JSON 格式化程序，也适用于 (XML) `DataContractSerializer`。

本文提供了有关默认媒体类型格式化程序的更多详细信息：

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_media_type_formatter](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_media_type_formatter)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-28T18:13:48.330

这对游戏来说有点晚了，但**`IgnoreDataMember`**正是我们在你/我的场景中需要的：

```
[System.Runtime.Serialization.IgnoreDataMember]
public int NotSerialized { get; set; } 
```

根据 MSDN，[`IgnoreDataMember`](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.ignoredatamemberattribute(v=vs.90).aspx)附带 .NET 3.0 SP2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T20:39:27.853

JsonIgnore 修改整个类定义。如果您想控制特定的操作/请求，可以[尝试这种方法](https://stackoverflow.com/a/19436748/1541224)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T03:17:01.653

看起来这涵盖了我需要的东西。它表明您可以换出格式化程序。它甚至包括一个使用我需要的 JavaScriptSerializer 的示例格式化程序。

[http://wildermuth.com/2012/2/22/WebAPI_for_the_MVC_Guy](http://wildermuth.com/2012/2/22/WebAPI_for_the_MVC_Guy)

# knockout.js - 有没有办法让淘汰赛为它自己创建的任何元素生成可预测的 ID？

> ID：10475572
> 
> 赞同：0
> 
> 时间：2012-05-07T00:57:51.650
> 
> 标签：knockout.js, watir

对于使用 watir 进行测试，如果我可以通过 Id 引用元素会容易得多，但是，通过剔除，它本身会生成许多元素。

我目前正在使用 xpath 来获取这些元素，但是，它......很乱。因此，如果我能淘汰 autogen ID，那就太好了。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:51:28.553

没有办法开箱即用。但是，很容易实现自定义绑定来完成您的要求。我猜你如何让它们“可预测”而不仅仅是独一无二的，由你来决定。

[这是一个相关的答案](https://stackoverflow.com/a/9235013/58656)，显示了如何生成唯一 ID。

您可以修改它以遵循您希望的任何方案。

希望这可以帮助。

# facebook - 使用 fb_graph gem 删除 Facebook 提要帖子

> ID：10475576
> 
> 赞同：3
> 
> 时间：2012-05-07T00:58:18.380
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api, rubygems, fb-graph

我正在使用[fb_graph](https://github.com/nov/fb_graph) rails gem 向我的用户的 Facebook 提要发布消息。

我已请求以下权限：

```
:scope => 'email, publish_actions, offline_access, publish_stream' 
```

我可以发布到用户的提要。但我无法摧毁它。

当我在 Rails 控制台中执行以下命令时，您会看到错误：

```
me = FbGraph::User.me( user.access_token )
@facebookpost = me.feed!( :message => "sample feed message", :description => 'sample message')
post = me.feed.find(@facebookpost.identifier).first

post.destroy # this generates the following error

FbGraph::InvalidRequest: OAuthException :: (#100) Invalid parameter
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/exception.rb:47:in `block in handle_httpclient_error'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/exception.rb:44:in `each'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/exception.rb:44:in `handle_httpclient_error'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:146:in `handle_response'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:63:in `delete'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:43:in `destroy'
from (irb):67
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>'

  1.9.2-p318 :068 > post.destroy(user.access_token)
TypeError: can't convert Symbol into String
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:93:in `delete'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:93:in `build_endpoint'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:61:in `delete'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/fb_graph-2.4.12/lib/fb_graph/node.rb:43:in `destroy'
from (irb):68
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
from /home/invinc/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我错过了任何权限吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:16:27.410

您可以删除帖子

```
FbGraph::Post.new(fb_post_id).destroy(access_token: "access_token") 
```

虽然不是最好的 API...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T16:37:45.903

v2.4 要求您将 fb_post_id 与客户端 ID 结合起来。

`FbGraph2::Post.new("#{client_id}_#{fb_post_id}", access_token: "access_token").destroy`

# c# - Visual C#，进程不断增长，直到我使用循环绘制图形时遇到与 UserControl 相关的内存错误

> ID：10475582
> 
> 赞同：-2
> 
> 时间：2012-05-07T00:59:23.120
> 
> 标签：c#

使用 Visual C# 2008 Exp Edition，我注意到加载我的项目后，该进程消耗了大约 70,000K 的内存。几个小时后，它会增加到大约 500,000K。

此时 a`UserControl`包含 a `PictureBox`（在 a 内`Panel`）显示 Visual C# Express 中的内存错误。图片框包含一个位图和矩形网格，用`System.Drawing.Graphics`.

这是代码：

这个段在初始化时只发生一次`UserControl`。

```
Bitmap myBitmap = new Bitmap(a, b);
Graphics g = null;
g = Graphics.FromImage(myBitmap);
g.FillRectangle(Brushes.SteelBlue, 0, 0, c, d);

//Paint Rows & Columns
for (int x = 0; x <= e - 1; x++)
{
    for (int y = 0; y <= f - 1; y++)
    {
        g.DrawRectangle(Pens.LightBlue, g, h, i);
    }
}
//Release Resources
g.Dispose();
//Add bitmap with grid to BG
ScorePictureBox.Image = myBitmap; 
```

这段代码相当频繁：

```
for (int EventIndex = 0; EventIndex <= MidiNoteDownArray.Length - 1; EventIndex++)
{
    //Paint notes to grid

    e.Graphics.FillRectangle(Brushes.LightBlue, j, k, l, m);
    e.Graphics.DrawRectangle(Pens.Purple, o, p, q, r);
}
e.Dispose(); 
```

我没有正确释放资源吗？我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:01:01.623

检查你的项目。也许您缺少参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:20:31.130

这可能是您正在创建的位图 - 当您替换 上的图像时`ScorePictureBox`，您需要处理旧的，即：

```
var oldImage = ScorePictureBox.Image;
//Add bitmap with grid to BG
ScorePictureBox.Image = myBitmap;
// Dispose of previous score image if necessary
if (oldImage != null) oldImage.Dispose(); 
```

请注意双重处理 - 通常最好不要在其他项目仍在引用它们时处理 GDI+ 对象。

在一般的语法说明上，您可能最好使用`using`语句而不是显式调用`Dispose()`，即：

```
using (Graphics g = Graphics.FromImage(myBitmap))
{
   ...
} 
```

# assembly - 使用 Irvine 组装随机数

> ID：10475590
> 
> 赞同：0
> 
> 时间：2012-05-07T01:01:35.710
> 
> 标签：assembly, random, numbers, masm, irvine32

当我实现在 Assembly 中为我们提供的随机数生成程序时，一半时间它给了我除以零误差，另一半时间它完美地工作。我相信我正确地实现了代码，但会告诉你我是如何编写代码的。

```
randomCompNum PROC
    call Randomize               ;Sets seed
    mov  eax,10                  ;Keeps the range 0 - 9

    call RandomRange
    mov  compNum1,eax            ;First random number

L1: call RandomRange
    .IF eax == compNum1          ;Checks if the second number is the same as the first
        jmp L1                   ;If it is, repeat call
    .ENDIF
     mov compNum2,eax            ;Second random number

L2: call RandomRange
    .IF eax == compNum1          ;Checks if the third number is the same as the first
        jmp L2                   ;If it is, repeat
    .ELSEIF eax == compNum1      ;Checks if the third number is the same as the second
        jmp L2                   ;If it is, repeat
    .ENDIF
    mov compNum3,eax             ;Third random number stored

    ret

randomCompNum ENDP 
```

* * *

这是 Visual Studios 提供给我的 RandomRange 的反汇编

```
_RandomRange@0:
004019C1  push         ebx  
004019C2  push         edx  
004019C3  mov          ebx,eax  
004019C5  call         _Random32@0 (4019A6h)  ;<---- This function doesn't touch ebx
004019CA  mov          edx,0  
004019CF  div          eax,ebx     ;<---- That's where the error occurs
004019D1  mov          eax,edx  
004019D3  pop          edx  
004019D4  pop          ebx  
004019D5  ret 
```

你知道是什么导致了这个错误吗？

我很想创建自己的随机数生成器。

**RandomRange 方法的背景：**很简单。您使用 Randomize 设置种子，将 10 移动到 eax 使 RandomRange 保持在 0 - 9 之间。这就是我能找到的关于该函数的所有文档，所以我相信这就是它的全部内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T21:48:36.273

我意识到这是一个老问题，但我的一个朋友刚刚引用了它。

您`mov eax, 10`属于`call RandomRange`，因此您的代码示例应为：

```
randomCompNum PROC
    call Randomize               ;Sets seed

    mov  eax,10                  ;Keeps the range 0 - 9
    call RandomRange
    mov  compNum1,eax            ;First random number

L1: mov  eax,10                  ;Keeps the range 0 - 9
    call RandomRange
    .IF eax == compNum1          ;Checks if the second number is the same as the first
        jmp L1                   ;If it is, repeat call
    .ENDIF
     mov compNum2,eax            ;Second random number

L2: mov  eax,10                  ;Keeps the range 0 - 9
    call RandomRange
    .IF eax == compNum1          ;Checks if the third number is the same as the first
        jmp L2                   ;If it is, repeat
    .ELSEIF eax == compNum1      ;Checks if the third number is the same as the second
        jmp L2                   ;If it is, repeat
    .ENDIF
    mov compNum3,eax             ;Third random number stored

    ret
randomCompNum ENDP 
```

是发送给 RandomRange 函数的`mov eax,10`参数，它会`RandomRange(10);`在 C 中。请注意，因为 RandomRange 在 eax 中返回其结果，所以您需要在每次调用之前进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:30:56.647

```
Random32  PROC
;
; Generates an unsigned pseudo-random 32-bit integer
;   in the range 0 - FFFFFFFFh. 
```

Random32 可以返回 0，这可能就是当你除以 0 时它会轰炸你的原因 :-)

Irvine 源可用，只需修改 RandomRange 以在从 Random32 返回时处理 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:11:23.990

[尔湾图书馆的帮助文件](http://www.kipirvine.com/asm/files/IrvineLibHelp.exe)

[Irvine32 源文件](http://www.kipirvine.com/asm/examples/index.htm)

# .net - MemoryStream 而不是 byte[] 作为资源添加的文件？

> ID：10475593
> 
> 赞同：10
> 
> 时间：2012-05-07T01:02:42.990
> 
> 标签：.net, visual-studio-2010, stream, resx

我有一个 .NET 程序集，我向其中添加了许多文件作为资源（二进制文件，每个文件 >500KB）。我以前一直在使用`ResourceManager.GetObject()`自动生成的`Resources`类上的方法访问这些，它返回一个`byte[]`.

出于性能和语法的原因，我宁愿将这些二进制资源作为流而不是字节数组进行操作。我发现，通过手动编辑 .resx 文件并将`<value>`元素中的类名称从`System.Byte[]`更改为`System.IO.MemoryStream`，我可以使用该`ResourceManager.GetStream()`方法成功地以流的形式访问资源，例如

```
<data name="MyFile" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\MyFile.ext;System.Byte[], mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
</data> 
```

变成：

```
<data name="MyFile" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\MyFile.ext;System.IO.MemoryStream, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
</data> 
```

这种方法的唯一缺点是 Visual Studio 总是在`byte[]`表单中添加新的文件资源。有没有办法让它`MemoryStream`为我设置类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T01:20:46.520

您可以在`ResourceManager`.

```
public static class ResourceExtensions
{
    public static MemoryStream GetMemoryStream(this ResourceManager resourceManager, String name) {
        object resource = resourceManager.GetObject(name);

        if (resource is byte[]) {
            return new MemoryStream((byte[])resource);
        }
        else {
            throw new System.InvalidCastException("The specified resource is not a binary resource.");
        }
    }
} 
```

打电话

```
ResourceManager resourceManager = Properties.Resources.ResourceManager;
MemoryStream stream = resourceManager.GetMemoryStream("binaryResource"); 
```

不过，这似乎也一样。

```
MemoryStream stream = new MemoryStream(Properties.Resources.SomeBinaryResource); 
```

我不确定我是否会修改资源文件，因为它们很容易更改，而且我确信在某些情况下 Visual Studio 会覆盖更改。

根据您的担忧，问题在于这会将数据的副本创建到内存中，从而产生内存占用。对于寿命很短的轻量级资源，这不是问题，但它可能是一个大问题。

答案很简短：您无法避免使用`ResourceManager`. 问题是两者都`ResourceManager.GetObject(String)`创建`ResourceManager.GetStream(String)`了数据的副本。即使`GetStream(String)`返回 an `UnmanagedMemoryStream`，它实际上也会在`GetObject(String)`内部调用，并且仍然会创建一个副本。如果您调试应用程序并分析内存，您将看到内存仍然被分配。

我尝试了多种方法来解决这个问题，方法是在`unsafe`上下文中使用指针和反射，但没有任何效果。`ResourceManager`只是没有那么灵活或优化。

但是，我能够找到解决方案，但它需要您使用`Embedded Resources`. 除了将资源文件的构建操作设置`Embedded Resource`为`Build Action`. 使用它，您可以使用反射来创建一个`UnmanagedMemoryStream`不创建数据副本的对象。

```
private UnmanagedMemoryStream GetUnmanagedMemoryStream(String embeddedResourceName) {
    Assembly assembly = Assembly.GetExecutingAssembly();

    string[] resourceNames = assembly.GetManifestResourceNames();
    string resourceName = resourceNames.SingleOrDefault(resource => resource.EndsWith(embeddedResourceName, StringComparison.InvariantCultureIgnoreCase));

    if (resourceName != null) {
        return (UnmanagedMemoryStream)assembly.GetManifestResourceStream(resourceName);
    }
    else {
        throw new System.ArgumentException("The specified embedded resource could not be found.", "embeddedResourceName");
    }
} 
```

我没有对此进行广泛的测试，但它确实有效。我的测试数据是一个 17 兆字节的小文件。我的测试应用程序的工作集内存从大约 50 兆字节开始，在将资源检索到流中之后，它不会改变。当使用`ResourceManager`它时，它会立即通过资源的大小增加工作集。

You will probably need to swap out the call to `EndsWith` that checks for the proper resource name in the manifest, because the names of the resources are slightly different than accessing it directly through the `ResourceManager`.

I am actually disappointed that I was not able to find a solution using the existing `ResourceManager`, but it just isn't flexible enough.

**Edit** I wrote an [in-depth blog article here about this subject](http://danderson.io/posts/getting-a-stream-to-a-resource-without-copying-the-contents-into-memory/).

# jquery - jquery隐藏/覆盖视频播放器

> ID：10475598
> 
> 赞同：2
> 
> 时间：2012-05-07T01:03:10.903
> 
> 标签：jquery

我从服务器获得了一个动态构建的 html 表。最终它给了我一张看起来像这样的表格：

```
<div id="player"></div>

<table id="webcam-table">
            <thead>
            <tr>
                <th>Camera Name</th>
                <th>Date Created</th>
            </tr>
            </thead>
            <tbody>             
            <tr >
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile1.mp4');">
                    Default camera 
                </td>
                <td onclick="DoNav('http://myserver:1935/recordings/myfile1.mp4');">
                    06 May 2012 07:25:01 
                </td>
                </tr>

            <tr >
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile2.mp4');">
                    Default camera 
                </td>
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile2.mp4');">
                    06 May 2012 07:24:47 
                </td>
                </tr>
...
</tbody></table> 
```

如果有人单击表格上的行，它会调用 DoNav 函数来插入视频。

```
function DoNav(theUrl)
{
var mydiv = $("#player");
var myvideo = $("<video id='myfileplayer' src='"+ theUrl +"' width='280' height='200' controls></video>");
mydiv.append(myvideo);
$("#myfileplayer").click(function(){
    $(this).play();
});

} 
```

如果您单击表格中的一行，效果会很好。但是，一旦您单击下一行，它就会在下面添加另一个玩家，依此类推。我想用刚刚单击的新播放器替换那里的播放器。我尝试添加`$("#myfileplayer").hide();`到`DoNav`函数的末尾，但这只是隐藏了整个播放器。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:07:42.097

这很简单，在你的 DoNav 函数中，替换

```
mydiv.append(myvideo); 
```

和：

```
mydiv.html(myvideo); 
```

它的作用是替换视频 div 中的内容（旧视频），而不仅仅是向 div 添加新视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:08:15.903

您将在前一个播放器下方添加一个新播放器。

```
function DoNav(theUrl)
{

    // only add the player if it doesn't yet exist
    if($('#myfileplayer').length == 0) {
        var mydiv = $("#player");
        var myvideo = $("<video id='myfileplayer' src='"+ theUrl +
           "' width='280' height='200'  controls></video>");
        mydiv.append(myvideo);
    } else {
       $('#myfileplayer').attr("src",theUrl); 
    }

    $("#myfileplayer").click(function(){
        $(this).play();
    });

} 
```

# bash - -n 在 Bash 中是什么意思？

> ID：10475599
> 
> 赞同：13
> 
> 时间：2012-05-07T01:03:10.843
> 
> 标签：bash, parameters

这可能是一个非常愚蠢的问题，但是......如果 [ ！-n "$1" ]，意思是，如果不超过一个参数...所以我知道它是如何工作的，但是`-n`数字的缩写是什么？

我一直在阅读 The Advanced Bash 编程指南，他们才开始使用它。我试图找到它并想​​出它必须是一个“内置”默认参数。有没有在 Linux 中显示默认参数的命令？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T01:05:32.447

(aka )的`-n`参数表示“不为空”。您发布的示例意味着“如果不是非空的。这是一种迂回的说法（是空的）。`test``[``$1``[ -z "$1" ];``$1`

您可以通过 了解更多信息`help test`。

`$1`和其他 ( `$2`, `$3`..) 是位置参数。它们是作为参数传递给您所在的脚本或函数的内容。例如，运行名为`foo`as的脚本`./foo bar baz`会导致`$1 == bar`,`$2 == baz`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-28T13:22:50.090

`-n`是用于评估 Bash 中的表达式的*字符串运算符之一。*它测试它旁边的*字符串，如果**字符串*不为空，则将其评估为“真”。

*位置参数*是一系列特殊变量（`$0`, `$1`through `$9`），其中包含程序命令行参数的内容。`$0`包含程序的名称，其他包含我们传递的参数。

在这里，如果传递给程序的第二个*位置*参数 ( ) 为*空*，或者（换句话说）如果没有传递给程序的参数不是，`[ ! -n "$1" ]`则计算结果为“True” 。*`$1`*`$0`**

# java - “java.io.StreamCorruptedException：无效类型代码：AC”- 从服务器-客户端 java 程序运行客户端代码时发现错误

> ID：10475603
> 
> 赞同：1
> 
> 时间：2012-05-07T01:04:24.247
> 
> 标签：java, sockets, client

好吧，我正在尝试从 XMLParser 读取 .xml 文件，所以基本上我想读取 XML 文件并将其从服务器打印到客户端，但是在运行客户端代码时我得到：

```
java.io.StreamCorruptedException: invalid type code: AC 
```

客户端代码是：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.List;

import javax.swing.JComboBox;
import javax.swing.JFrame;

import server.Video;
import server.VideoFile;

@SuppressWarnings("serial")
public class Client extends JFrame{
    Container contentPane;
    @SuppressWarnings("rawtypes")
    JComboBox selectionBox;

    List<Video> video;
    List<VideoFile> videoFile;

    Socket serverSocket;
    String host = "127.0.0.1";
    int port = 1176;
    ObjectInputStream inputFromServer;
    ObjectOutputStream out;

    public Client() throws Exception {
        // line 41 below
            setupGUI();

        System.out.println("Reading the XML File");
        MyXMLReader reader = new MyXMLReader();
        //video = reader.getList("videoList.xml");
        System.out.println("Finished reading");
    }

    public void openSocket() throws UnknownHostException, IOException {
         /** Obtain an address object of the server */
        serverSocket = new Socket("localhost", port);
        System.out.println("Connected to localhost in port: " + port);
        out = new ObjectOutputStream(serverSocket.getOutputStream());
        //out.flush();
        inputFromServer = new ObjectInputStream(serverSocket.getInputStream());

    }

    @SuppressWarnings("unchecked")
    public void getListFromSocket() throws IOException, ClassNotFoundException {
        try{
        video = (List<Video>)inputFromServer.readObject();
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(-1);
        }
        //serverSocket.close();
    }
    public void runClient() throws Exception {

            try {
                openSocket();
                getListFromSocket();
                serverSocket.close();
                setupGUI();
                } catch (UnknownHostException e) {
                System.out.println("Don't know about host : " + host);
                System.exit(-1);
                } catch (IOException e) {
                e.printStackTrace();
                System.out.println("Couldn't open I/O connection : " + host + ":" + port);
                System.exit(-1);
                } catch (ClassNotFoundException e) {
                System.out.println("Class definition not found for incoming object.");
                e.printStackTrace();
                System.exit(-1);
            }

    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    private void setupGUI() throws Exception{
        setTitle("A Client");
        setSize(600, 400);
        setVisible(true);
        contentPane = getContentPane();
        contentPane.setLayout(new BorderLayout());

            runClient();

        // line 105 below
        String [] selectionListData = new String[video.size()];
        for (int i = 0; i < video.size(); i++) {
        selectionListData[i] = video.get(i).getFilename();
        selectionListData[i] = video.get(i).getID();
        selectionListData[i] = video.get(i).getTitle();
        System.out.println(selectionListData);
        }
        selectionBox = new JComboBox(selectionListData);
        selectionBox.setSelectedIndex(0);
        add(selectionBox, BorderLayout.NORTH);
        selectionBox.addActionListener((ActionListener) this);

        validate();
    }

    public void actionPerformed(ActionEvent e) {
        @SuppressWarnings("rawtypes")
        JComboBox comboBox = (JComboBox)e.getSource();
        String selectedTitle = (String)comboBox.getSelectedItem();
        System.out.println("Selected title : " + selectedTitle);
        }

    public static void main(String[] args) throws IOException, Exception {
            // line 127 below
        new Client();

    }

} 
```

完整的错误是：

```
 Connected to localhost in port: 1176
    java.io.StreamCorruptedException: invalid type code: AC
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at client.Client.getListFromSocket(Client.java:61)
    at client.Client.runClient(Client.java:72)
    at client.Client.<init>(Client.java:40)
    at client.Client.main(Client.java:124) 
```

任何人都可以解决这个问题，我敢肯定它很小，但我无法弄清楚。

谢谢

编辑：服务器代码是：

```
package server;

import java.io.IOException;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.List;
import java.lang.*;

@SuppressWarnings("unused")
public class Server extends Thread implements Runnable{
    List<Video> video;
    static String TimeStamp;
    //Socket Declerations
    ServerSocket serverSocket;
    int port = 1176;
    //String host = "localhost";
    Socket clientSocket;
    ObjectOutputStream outputToClient;

    public Server() {
        Thread();
        System.out.println("Reading the XML File");
        MyXMLReader reader = new MyXMLReader();
        //video = reader.getList("videoList.xml");
        System.out.println("Finished reading");
    }

    public void openSockets() throws IOException {
        try {
            serverSocket = new ServerSocket(port);
            System.out.println("Socket Connection Established....");
        } catch (IOException e) {
            System.out.println("Could not listen on port : " + port);
            System.exit(-1);
        }
        TimeStamp = new java.util.Date().toString();
        System.out.println("Opened socket on : " + port + ", waiting for client. " + TimeStamp);

        try {
            clientSocket = serverSocket.accept();
            //System.out.println("Sending to Client.....");
            } catch (IOException e) {
            System.out.println("Could not accept client.");
            System.exit(-1);
            }
            outputToClient = new ObjectOutputStream(clientSocket.getOutputStream());
    }
    public void writeToSocket() throws IOException {
        outputToClient = new ObjectOutputStream(clientSocket.getOutputStream());
        outputToClient.writeObject(video);
        System.out.println(outputToClient);
    }

    public void Thread() {
        Thread socketThread;
        socketThread = new Thread("Socket") {
        public void run() {
            try {
                openSockets();
                writeToSocket();
                clientSocket.close();
                serverSocket.close();
            } catch (IOException e) {
                System.out.println("Error on sockets connection.");
                e.printStackTrace();
            }
        }
};
socketThread.start();
}

    public static void main(String[] args) throws IOException {
        new Server();
        //new Thread();

    }

} 
```

编辑：删除重复条目后的新错误：

```
Exception in thread "main" java.lang.NullPointerException
    at client.Client.setupGUI(Client.java:105)
    at client.Client.<init>(Client.java:41)
    at client.Client.main(Client.java:127) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:41:34.683

您在 Server 类中的同一套接字上双重打开 ObjectOutputStream ，这导致特殊标头被发送两次。

1：`openSockets`最后一行`outputToClient = new ObjectOutputStream(clientSocket.getOutputStream());`

2：`writeToSocket`第一行`outputToClient = new ObjectOutputStream(clientSocket.getOutputStream());`

删除您想要的任何一个，它应该可以正常工作。

至于您现在收到的空指针，我感觉客户端中的视频为空。在您发布的代码中，这是有道理的，因为在服务器中您永远不会创建视频数组，因此客户端只是接收空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:42:39.597

`ObjectOutputStream`此错误是由在同一个套接字上使用多个引起的。在两端使用相同的`ObjectOutputstream`并且在插座的使用寿命内。`ObjectInputStream`大多数其他流和读取器/写入器类型也是如此，只是不这样做的后果通常更加神秘。

# ruby-on-rails - ActionMailer：未定义的方法“收件人”

> ID：10475605
> 
> 赞同：1
> 
> 时间：2012-05-07T01:04:29.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我正在为我的一个 ActionMailer - InvitationMailer 在 Rails 3.2 上编写测试，但是，它似乎没有找到“收件人”方法。

我的测试如下所示：

```
 describe "Invitation" do
    it "should send invitation email to user" do
    user = Factory :user

    email = InvitationMailer.invitation_email(user).deliver
    # Send the email, then test that it got queued
    assert !ActionMailer::Base.deliveries.empty?

    # Test the body of the sent email contains what we expect it to
    assert_equal [user.email], email.to
    assert_equal "You have been Invited!", email.subject

    end 
```

我的 InvitationMailer 看起来像这样：

```
class InvitationMailer < ActionMailer::Base
  default from: "webmaster@myapp.com"

  def invitation_email(user)
    recipients  user.email
    from        "invitations@myapp.com"
    subject     "You have been Invited!"
    body        :user => user
  end

end 
```

但是，我收到以下错误消息：

```
 Failure/Error: email = InvitationEmail.invitation_email(user).deliver
 NoMethodError:
   undefined method `recipients' for #<InvitationMailer:0x007fca0b41f7f8> 
```

知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:27:08.360

[这是ActionMailer 的 Rails 指南中](http://guides.rubyonrails.org/action_mailer_basics.html)的一个示例：

```
class UserMailer < ActionMailer::Base
  default :from => "notifications@example.com"

  def welcome_email(user)
    @user = user
    @url  = "http://example.com/login"
    mail(:to => user.email,
         :subject => "Welcome to My Awesome Site",
         :template_path => 'notifications',
         :template_name => 'another')
  end
end 
```

让你的代码看起来更像这样可能更容易解决，所以我首先将它重写为：

```
class InvitationMailer < ActionMailer::Base
  default from: "webmaster@myapp.com"

  def hassle_email(user)
    @user = user
    mail(:to => user.email,
         :subject => "You have been Invited!")
  end
end 
```

然后你会得到传递给邮件程序“视图”的`:to`、`:subject`和对象，这与任何其他视图一样。`@user`

由于您正在使用，`recipients`我不确定您是否尝试将电子邮件发送到多个电子邮件地址。如果是这样，根据 ActionMailer 文档：

> 通过将电子邮件列表设置为 :to 键，可以在一封电子邮件中向一个或多个收件人发送电子邮件（例如，通知所有管理员新注册）。电子邮件列表可以是电子邮件地址数组，也可以是地址以逗号分隔的单个字符串。

# php - 通过 jquery 和 ajax 发布两个变量

> ID：10475608
> 
> 赞同：0
> 
> 时间：2012-05-07T01:04:49.483
> 
> 标签：php, javascript, jquery, ajax

在按下确认窗口上的按钮时，我无法使用 ajax 和 jquery 获取两个变量。我可以让任一变量单独显示，但是当我尝试同时发布两个变量时，它不起作用。

编辑 - 问题已解决。没有包含我需要的文件。我的错！

```
echo '<input type="button" value="Delete" onclick="deleteSomething(\'' . $replyID .'\', \'' .$tableName. '\',\'' .$replyBy. '\')" />';
?>
<script type="text/javascript">

function deleteSomething(replyID, tableName, replyBy)
{
if (!confirm("Are you sure?"))
    return false;
$.post('pageprocessing.php',"replyID=" + replyID + "&tableName=" + tableName + "&replyBy=" + replyBy, function(response) {
    alert(response);
});
} 
```

这是我在 pageprocessing.php 上的脚本。我正确发布的所有三个值都回显，我只是无法弄清楚为什么它们没有被删除。

```
if(isset($_POST['replyID']) && isset($_POST['tableName']) && isset($_POST['replyBy'])){

    if($_POST['tableName'] == "replies" && $_POST['replyBy'] == $userid){
        echo $replyID = $_POST['replyID']; //echoing variables to make sure the page gets this far
        echo $replyBy = $_POST['replyBy'];
        echo $tableName = $_POST['tableName'];
        mysql_query("delete from replies where repliesID = $replyID "); //I can type this query into terminal and it deletes. Why won't it delete from here?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:06:52.640

您帖子的变量都应该连接起来。

```
$.post('pageprocessing.php',"replyID=" + replyID + "&tableName=" + tableName, function(response) {
    alert(response);
}); 
```

您也可以使用对象

```
$.post('pageprocessing.php',{
    replyID     : replyID, 
    tableName   : tableName
}, function(response) {
    alert(response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:10:50.440

不需要等号！像这样使用它

```
$.post('pageprocessing.php',{ replyID : replyID, tableName :  tableName}, function(response) {
    alert(response);
}); 
```

# node.js - 为什么以下中间件语法不适用于 Express？

> ID：10475609
> 
> 赞同：0
> 
> 时间：2012-05-07T01:04:53.310
> 
> 标签：node.js, express, passport.js

我指的是以下示例：

[https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js](https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js)

特别是以下代码：

```
app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login', failureFlash: true }),
  function(req, res) {
    res.redirect('/');
  }); 
```

发布的代码工作得很好。但是，如果我尝试通过执行以下操作来重构它：

```
app.post('/login', 
  authenticate,
  function(req, res) {
    res.redirect('/');
  });

function authenticate() {
    return passport.authenticate('local', { failureRedirect:'/fail', failureFlash:true });
} 
```

事情不再起作用了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:56:33.717

我认为您必须调用`authenticate()`（使用括号）才能执行该函数并返回中间件。例如：

```
app.post('/login', 
  authenticate(),
  function(req, res) {
    res.redirect('/');
  }); 
```

您当前设置它的方式， authenticate 是作为路由处理程序安装的，因此 express 使用`req`,`res`参数（未使用或响应）调用它。

# c - 使用链表和哈希数组时的内存泄漏

> ID：10475610
> 
> 赞同：0
> 
> 时间：2012-05-07T01:05:10.840
> 
> 标签：c, memory-leaks, linked-list, frequency

无论我做什么，我都无法说出为什么这是泄漏内存。我正在释放所有动态创建的内存，但它说我有 406 个泄漏。任何提示都会很棒。我花了一周的时间试图弄清楚并使用`crtdbg`（不显示任何线条），`VLD`但仍然没有运气。对不起长代码：

```
---------- Block 742 at 0x00F06D50: 56 bytes ----------
Call Stack:
c:\users\main\desktop\lab3123.c (113): lab3.exe!createNode + 0xA bytes
c:\users\main\desktop\lab3123.c (152): lab3.exe!addToArr + 0x9 bytes
c:\users\main\desktop\lab3123.c (66): lab3.exe!main + 0x10 bytes
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (555): lab3.exe!__tmainCRTStartup + 0x19 bytes
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (371): lab3.exe!mainCRTStartup
0x76713677 (File and line number not available): kernel32.dll!BaseThreadInitThunk + 0x12 bytes
0x775B9F42 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x63 bytes
0x775B9F15 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x36 bytes
Data:
74 65 63 68    6E 6F 6C 6F    67 79 00 CD    CD CD CD CD     technolo gy......
CD CD CD CD    CD CD CD CD    CD CD CD CD    CD CD CD CD     ........ ........
CD CD CD CD    CD CD CD CD    CD CD CD CD    CD CD CD CD     ........ ........
CD CD CD CD    01 00 00 00                                   ........ ........

---------- Block 746 at 0x00F06E20: 56 bytes ----------
Call Stack:
c:\users\main\desktop\lab3123.c (113): lab3.exe!createNode + 0xA bytes
c:\users\main\desktop\lab3123.c (152): lab3.exe!addToArr + 0x9 bytes
c:\users\main\desktop\lab3123.c (66): lab3.exe!main + 0x10 bytes
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (555): lab3.exe!__tmainCRTStartup + 0x19 bytes
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (371): lab3.exe!mainCRTStartup
0x76713677 (File and line number not available): kernel32.dll!BaseThreadInitThunk + 0x12 bytes
0x775B9F42 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x63 bytes
0x775B9F15 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x36 bytes
Data:
68 75 6D 61    6E 69 74 79    00 CD CD CD    CD CD CD CD     humanity ........
CD CD CD CD    CD CD CD CD    CD CD CD CD    CD CD CD CD     ........ ........
CD CD CD CD    CD CD CD CD    CD CD CD CD    CD CD CD CD     ........ ........
CD CD CD CD    01 00 00 00                                   ........ ........

Visual Leak Detector detected 406 memory leaks (26480 bytes).
Largest number used: 43684 bytes.
Total allocations: 57944 bytes. 
Visual Leak Detector is now exiting.
Press any key to continue . . . 
```

```
WORDNEW* createNode(char *str)
{
    WORDNEW* w;

    if(!(w = (WORDNEW*)malloc(sizeof(WORDNEW))))
        printf("Memory Allocation Error"),
            exit(100);
    strcpy(w->str, str);
    w->count = 1;
    return w;
}

//addToArr: adds a word to the hash array or linked list if there is a collision
void addToArr( char *str, HASH_ARR_ELEM hashArr[]){
    int homeAddress = 0;
    int addResult = 0;
    int probe = 0;
    HASH_ARR_ELEM *ph;
    WORDNEW *w;
    WORDNEW *rWord;
    rWord = NULL;
    homeAddress = hashFunct(str);
    ph = &hashArr[homeAddress];

    if(ph->wordPtr == NULL){
        if(!(ph->wordPtr = (WORDNEW*)malloc(sizeof(WORDNEW))))
            printf("Memory Allocation Error"),
                exit(100);
        strcpy(ph->wordPtr->str, str);
        ph->wordPtr->count = 1;
    }else if(ph->wordPtr != NULL && ph->headPtr == NULL){
        if(!(strcmp(ph->wordPtr->str, str)))
            ph->wordPtr->count++;
        else {
            ph->headPtr = createList(cmpWord);
            w = createNode(str);
            addNode(ph->headPtr,w,&probe);
        }
    }else {
        w = createNode(str);
        if(!(strcmp(ph->wordPtr->str, str))){
            ph->wordPtr->count++;
            free(w);
        }else if(retrieveNode(ph->headPtr,w,&rWord,&probe) == 1){
            rWord->count++;
            free(w);
        }else
            addNode(ph->headPtr,w,&probe);
    } //end else

} // end addToArr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:03:10.497

从上面，我认为您认为错误出现在`addToArr`. 以下是一些查找故障的建议。

*   删除 tempWord。仅使用该`str`字段，这是`str`调用参数的副本。所以只要`str`在你有的地方使用`tempWord->str`。

*   然后，如果您可以控制 addNode 的代码，请在其中进行必要的分配。

*   否则，将对 addNode 的调用包装在分配 WORDNEW 结构的函数中，将 str 复制到其中并将 count 设置为 1，然后将其传递给 addNode。

您还可以：

*   通过分解重复的部分来重写 if-the-else 链。
*   `hashArr[homeAddress].`使用指针排除重复`ph->`：

    HASH_ARR_ELEM *ph = &hashArr[homeAddress];

*   打开编译器警告以警告您有关模棱两可的“else”子句。具体来说，您有：

    ```
     if (!strcmp...)){
          ...
     }else
     {
         ...
         if(addResult != 0)
             if(addResult == -1){
                 printf("Memory Overflow adding node\n"),
                 exit(120);
             }else{
                 etc...
             } 
    ```

编辑 2（重构 addToArr 之后）

该功能现在看起来好多了，尽管仍有一些可能的改进点并且一些错误检查已经消失。但是，如果您仍然有泄漏，那么它不在 addToArr 中。什么或谁告诉你有 406 泄漏？

现在的改进包括：

*   从上面的条件可以看出， 这`(ph->wordPtr != NULL)`是不必要的。`ph->wordPtr == NULL`

*   以下位对两个主要的 else 子句都是通用的，并且可以只执行一次：

    ```
    if (!strcmp(ph->wordPtr->str, str))
         ph->wordPtr->count++; 
    ```

*   在失败时使用 perror 而不是 printf

*   在调用参数之间和周围添加空格`else`和`if`

*   删除 malloc return 的演员表

*   删除括号并添加空格：`if(!(strcmp(...)))` 变为`if (!strcmp(...))`

*   cmpWord 未定义。

# java - 使用递归时如何保持一致性？

> ID：10475613
> 
> 赞同：2
> 
> 时间：2012-05-07T01:05:15.163
> 
> 标签：java, recursion, spell-checking

我正在编写一个拼写检查程序，我必须编写的功能之一必须为拼写错误的单词找到建议。因此，我使用递归来遍历我的基数树并找到所有建议。但是，当我的递归执行时，我使用的计数器之一不断增加，然后减少，然后再次增加，而实际上它应该只是增加。这是该函数的代码。

```
 public void findSuggest(Edge tmp, String suffix, int app)
{
    int used = 0;

    if(tmp.tNode.children > 10)
    {
        used = 10;
    }
    else
    {
        used = tmp.tNode.children;
    }
    for(int j = 0; j < used; j++){
        if(app <= 9)
        {
            if((!"#".equals(tmp.prefix))&&(!"#".equals(tmp.tNode.edges[j].prefix))){
                suggest[app].append(tmp.prefix);                               
                suggest[app].append(tmp.tNode.edges[j].prefix);

                System.out.println("tmp.prefix: " + tmp.prefix);
                System.out.println("tmp.prefix............: " + tmp.tNode.edges[j].prefix);
                app++;     
                if(tmp.tNode.edges[j].tNode != null)
                {
                    suggest[app].append(tmp.prefix); 
                    System.out.println("App: " + app);
                    findSuggest(tmp.tNode.edges[j], suffix, app++);
                }
            }
        }
    }

} 
```

这是我得到的输出： App 是计数器， tmp.prefix 是父节点的前缀， tmp.prefix....... 是子节点的前缀。

> 应用程序：0
> 
> tmp.prefix: t
> 
> tmp.prefix…………：e
> 
> 应用：1
> 
> tmp.prefix: e
> 
> tmp.prefix…………：s
> 
> 应用：2
> 
> tmp.prefix: t
> 
> tmp.prefix............：我
> 
> 应用：3
> 
> tmp.prefix: 我
> 
> tmp.prefix…………：c
> 
> 应用：4
> 
> tmp.prefix: c
> 
> tmp.prefix............：人
> 
> 应用：5
> 
> tmp.prefix: 我
> 
> tmp.prefix…………：se
> 
> 应用：6
> 
> tmp.prefix: se
> 
> tmp.prefix…………：d
> 
> 应用：7
> 
> tmp.prefix: se
> 
> tmp.prefix…………：s
> 
> 应用：7
> 
> tmp.prefix: 我
> 
> tmp.prefix…………：ze
> 
> 应用：8
> 
> tmp.prefix: 泽
> 
> tmp.prefix…………：d
> 
> 应用：9
> 
> tmp.prefix: 泽
> 
> tmp.prefix…………：s
> 
> 应用：4
> 
> tmp.prefix: t
> 
> tmp.prefix............：是的
> 
> 应用程序：0
> 
> tmp.prefix: x
> 
> tmp.prefix…………：e
> 
> 应用：1
> 
> tmp.prefix: e
> 
> tmp.prefix…………：d
> 
> 应用：2
> 
> tmp.prefix: e
> 
> tmp.prefix…………：s
> 
> 应用：2
> 
> tmp.prefix: x
> 
> tmp.prefix............: ing
> 
> （这是所有单词建议的构建字符串数组的最终结果）
> 
> 气候
> 
> 气候限制
> 
> 气候变化
> 
> 气候
> 
> 气候学
> 
> 气候
> 
> 气候
> 
> 气候大小
> 
> 气候
> 
> 气候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:19:58.503

Since `app` is an `int`, its passed by value, so any changes you make on it on the recursive calls won't change it on the previous call. Suggestion: alter it to a static or to a field of your class (depending of the context you'll need it, probably will be a fild), this way you'll have the same instance of the app in all of the method calls

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:07:41.540

在调用此方法之前，使用类级别变量并将其初始化为零。根据您的需要，您可能会或可能不会选择使用静态。

# android - 获取状态栏中的通知列表？

> ID：10475614
> 
> 赞同：1
> 
> 时间：2012-05-07T01:05:17.740
> 
> 标签：android, notifications, push-notification, statusbar

如何在状态栏中获取活动通知消息的标题列表，包括我的应用未创建的通知？

如果这不可能，我如何仅从我的应用创建的通知中获取标题？

# oracle - 在 oracle 中创建函数时权限不足

> ID：10475620
> 
> 赞同：2
> 
> 时间：2012-05-07T01:06:49.203
> 
> 标签：oracle, privileges

我对oracle知之甚少。我试图创建一个如下所示的函数。

```
CREATE OR REPLACE FUNCTION "BOOK"."CONVERT_TO_WORD" (totpayable IN NUMBER) RETURN VARCHAR
AS
  totlength   NUMBER;
  num VARCHAR2(14);

  word VARCHAR2(70);
  word1 VARCHAR2(8);
 BEGIN

   SELECT LENGTH(totpayable) INTO totlength FROM dual;

   WHILE totlength>0
       LOOP
           SELECT SUBSTR(totpayable,totlength,1) INTO num FROM dual;
           IF num='-' THEN
           word1:='(Excess)';
           END IF;
           IF num='0' THEN
           word1:='Zero';
           END IF;
           IF num='1' THEN
           word1:='One';
           END IF;
           IF num='2' THEN
           word1:='Two';
           END IF;
           IF num='3' THEN
           word1:='Three';
           END IF;
           IF num='4' THEN
           word1:='Four';
           END IF;
           IF num='5' THEN
           word1:='Five';
           END IF;
           IF num='6' THEN
           word1:='Six';
           END IF;
           IF num='7' THEN
           word1:='Seven';
           END IF;
           IF num='8' THEN
           word1:='Eight';
           END IF;
           IF num='9' THEN
           word1:='Nine';
           END IF;
           word:=word1||' '||word;
           totlength:=totlength-1;
       END LOOP;
RETURN word;

END ; 
```

当我尝试执行它时，我收到如下错误：

> ORA-01031: 权限不足
> 
> 01031.00000 - “权限不足”
> 
> *原因：试图在没有适当权限的情况下更改当前用户名或密码。如果尝试在没有必要操作系统权限的情况下安装数据库，也会出现此错误。在 DBMS MAC 中配置 Trusted Oracle 时，如果用户被授予了比当前登录更高标签的必要权限，则可能会发生此错误。

我已使用以下命令为用户授予权限：

`grant all privilege to book;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:10:40.770

使用`grant create session to book;`然后创建过程

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-08T06:42:23.273

授予预订创建程序；

# iphone - 选择时的 Cocos2d CCMenuItem 动画

> ID：10475623
> 
> 赞同：6
> 
> 时间：2012-05-07T01:07:02.080
> 
> 标签：iphone, ios, animation, cocos2d-iphone, ccmenuitem

我有一个`CCMenu`5`CCMenuItem`秒。当用户触摸菜单项时，我希望菜单项向右移动 10 个像素，以与其他菜单项区分开来。我尝试将每个菜单项设为全局变量，这样我就可以说：`if (item.isSelected) { [item runAction:blah]; }`但这并没有做任何事情。到目前为止，这是我的代码：

```
CCLabelTTF *sin = [CCLabelTTF labelWithString:@"Single Player" dimensions:labelSize alignment:UITextAlignmentLeft fontName:font fontSize:20];
item1 = [CCMenuItemLabel itemWithLabel:sin target:self selector:@selector(goToSinglePlayer:)];

CCLabelTTF *spl = [CCLabelTTF labelWithString:@"Splitscreen" dimensions:labelSize alignment:UITextAlignmentLeft fontName:font fontSize:20];
item2 = [CCMenuItemLabel itemWithLabel:spl target:self selector:@selector(goToSplitscreen:)];

CCLabelTTF *ach = [CCLabelTTF labelWithString:@"Achievements" dimensions:labelSize alignment:UITextAlignmentLeft fontName:font fontSize:20];
item3 = [CCMenuItemLabel itemWithLabel:ach target:self selector:@selector(goToAchievements:)];

CCLabelTTF *str = [CCLabelTTF labelWithString:@"Store" dimensions:labelSize alignment:UITextAlignmentLeft fontName:font fontSize:20];
item4 = [CCMenuItemLabel itemWithLabel:str target:self selector:@selector(goToStore:)];

CCLabelTTF *set = [CCLabelTTF labelWithString:@"Settings" dimensions:labelSize alignment:UITextAlignmentLeft fontName:font fontSize:20];
item5 = [CCMenuItemLabel itemWithLabel:set target:self selector:@selector(goToSettings:)];

CCMenu * mainMenu = [CCMenu menuWithItems:item1, item2, item3, item4, item5, nil];

[mainMenu setColor:ccBLACK];
[mainMenu alignItemsVerticallyWithPadding:10];
mainMenu.position = ccp(90, 90);

[self addChild:mainMenu];

if (item1.isSelected) {
    [item1 runAction:[CCMoveTo actionWithDuration:1.0f position:ccp(120, 90)]];
} 
```

我的问题是：如何才能达到我前面提到的效果？当用户触摸它但不释放时，我希望所选`CCMenuItem`对象向右移动 10 个像素，然后在触摸离开该菜单项时返回其正常位置。另外，我应该把这个动画代码放在哪里？在我的`init`功能中？谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T11:50:55.150

如果您想更改 CCMenuItemLabel 对象的“开箱即用”行为，则需要子类化 cocos2d 的特定类。您需要覆盖的方法是

```
-(void) selected{
    // coco's default is to scale up by 10%
    // place your code to displace the label.
    self.position=ccp(self.position.x-10,self.position.y);
}

-(void) unselected{
   // coco's default is to bring back scale to originalScale.
   self.position=ccp(self.position.x+10,self.position.y);
} 
```

当手指触摸标签时调用“选择”方法。当手指被抬起或拖到标签外时，会调用“未选择”方法。我刚刚向您展示了选择/未选择行为的基本（非常）方法，请尝试一下。存在时间问题。我会避免使用动画作为第一次尝试。如果您想要一个动画示例，请查看 CCMenuItemLabel 类中的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T05:02:13.550

检查以下两行代码：

```
 CCMenuItem *item31 = [CCMenuItemImage itemFromNormalImage:@"btn_on.png" selectedImage:@"btn_on_hover.png"];
    CCMenuItem *item32 = [CCMenuItemImage itemFromNormalImage:@"btn_off.png" selectedImage:@"btn_off_hover.png"]; 
```

*   在上面的代码中，您可以调整**btn_on_hover.png**使其看起来像在右侧或您想要的任何位置偏移 10px。
*   cocos2d 是开源的，您可以通过多种方式完成您的任务。检查`CCMenu.h`类。您可以根据您的要求修改类。
*   例如，您可以在 `CCMenu.h`类中更改以下代码片段。

    ```
     #pragma mark Menu - Touches
        #ifdef __IPHONE_OS_VERSION_MAX_ALLOWED 
    ```

如有任何疑问，请告诉我。问候，尼尔。

# python - 使用 Psycopg2 安装 Browsershot Central 服务器

> ID：10475624
> 
> 赞同：0
> 
> 时间：2012-05-07T01:07:07.580
> 
> 标签：python, package

我正在尝试安装 Browsershots 中央服务器 (http://browsershots.org/documentation)，它需要在步骤“manage.py syncdb”中包含一个包 psycopg。我安装了 Ubuntu python-psycopg2，我收到错误“错误：没有名为 psycopg 的模块”。我正在寻找一些关于如何使用 psycopg2 模块安装 Browsershot 服务器的指导。我正在运行 64 位的 Ubuntu 10.04 服务器。

谢谢，迈克

# eclipse - 可以在不重置布局的情况下在 Eclipse 中关闭透视图吗？

> ID：10475625
> 
> 赞同：1
> 
> 时间：2012-05-07T01:07:32.050
> 
> 标签：eclipse

我将 Eclipse 用于多种编程语言：C、Java、Scala、Clojure、Perl Python 等...我已经自定义了每个透视图的布局。每当我关闭一个透视图（右键单击透视图 -> 关闭）并再次打开它时，我的自定义布局就消失了，并且出现了默认布局。

有没有办法在不重置布局的情况下关闭视角？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:35:11.403

你必须保存透视图（windows>save perspective as）。自定义布局保存在工作区的元数据中。如果您开始一个新的工作区，您需要复制元数据，或者您需要重新进行自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:37:07.333

好奇的。在会话中从透视图移动到透视图时以及打开和关闭 Eclipse 时，我的都被保留了。我怀疑您设置了一些默认行为值，表示始终加载原始透视图（重置）。检查首选项/常规/观点。

有一种方法可以在 Window 下拉菜单中保存自定义透视图。

无论如何，我都不是 Eclipse 专家。为什么不在 Eclipse Newcomers 论坛上提问呢？ [http://www.eclipse.org/forums/](http://www.eclipse.org/forums/) 他们非常有帮助。

# delphi - 将多边形缩小为 TPoint 数组？

> ID：10475631
> 
> 赞同：4
> 
> 时间：2012-05-07T01:10:13.030
> 
> 标签：delphi, drawing, delphi-xe2, gradient, polygon

我正在使用`TCanvas.Polygon()`并想知道如何缩小多边形的大小，或者如果已经有这个功能，或者如何编写一个。我声明了一个类型`TPoints: Array of TPoint;`，并在调用时使用它`TCanvas.Polygon()`。

问题是，如果我必须编写这个函数，它如何识别每个点需要移动*的*方向（基于与多边形其余部分的比例）？

例如，如果我制作了一个点数组 ( `TPoints`) 来表示一个 5 角星，并且我需要将其缩小 2 个像素，它如何知道移动这些点的方向？

最终目的是为多边形实现渐变。将有一个循环来执行此操作，其中 a）稍微调整颜色，b）多边形点需要*缩小*几个像素，c）多边形被绘制（比之前绘制的小）；因此，创建一个渐变。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T04:23:37.463

在我看来，您正在寻找一种方法来进行多边形偏移——将多边形缩小或扩展指定数量的单位（像素）。我的[Clipper 库](http://www.angusj.com/delphi/clipper.php)（用 Delphi、C++ 和 C# 编写）进行多边形偏移。“点移动的方向”（即缩小或扩展）将取决于提供给[OffsetPolygons](http://www.angusj.com/delphi/clipper/documentation/Docs/Units/ClipperLib/Routines/OffsetPolygons.htm)函数的“delta”参数的符号（正与负）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:18:31.547

处理这个问题的“经典”方法是“变换矩阵”：

*   [http://en.wikipedia.org/wiki/Transformation_matrix](http://en.wikipedia.org/wiki/Transformation_matrix)

由于您似乎使用的是 Delphi XE2，您是否看过 Firemonkey？我相信二维变换是库的标准部分：

*   [http://docwiki.embarcadero.com/RADStudio/en/FireMonkey_Application_Platform](http://docwiki.embarcadero.com/RADStudio/en/FireMonkey_Application_Platform)

*   [http://docwiki.embarcadero.com/RADStudio/en/FireMonkey_Image_Effects](http://docwiki.embarcadero.com/RADStudio/en/FireMonkey_Image_Effects)

*   [http://blog.marcocantu.com/blog/everything_xe_demo.html](http://blog.marcocantu.com/blog/everything_xe_demo.html)

# tortoisecvs - 在 Win7 中无法使用 TortoiseCVS1.12.3 检出代码

> ID：10475638
> 
> 赞同：3
> 
> 时间：2012-05-07T01:11:42.940
> 
> 标签：tortoisecvs

我正在尝试在 Win7 中使用 TortoiseCVS1.12.3 从以下 URL 中检查源代码: :pserver:anonymous@dev.eclipse.org:/cvsroot/webtools

但出现错误：在 C:\Users\Bruce\AppData\Local\Temp\TortoiseCVS 中制作新模块 temp\: "C:\Program Files (x86)\CVSNT\cvs.exe" -q -d :pserver:anonymous@ dev.eclipse.org:/cvsroot/webtools import -m
XMLEditor tcvs-vendor tcvs-release CVSROOT=:pserver:anonymous@dev.eclipse.org:/cvsroot/webtools

使用空密码 - 使用真实密码尝试“cvs login” cvs [服务器中止]：“导入”需要对存储库的写入权限

错误，CVS 操作失败

你知道为什么会发生错误吗？

# ssis - 在 WinForms 下通过远程计算机运行 Deployed SSIS Package

> ID：10475639
> 
> 赞同：0
> 
> 时间：2012-05-07T01:11:46.993
> 
> 标签：ssis

我在 SQL Server 2008 上部署了几个包。

我想通过数据处理团队运行它们，当他们从 QA 收到数据正常的信号时，然后他们点击 Winforms 应用程序中的一个按钮，检查一些东西，如果发现正常，然后在该服务器上启动进程。请注意，这些包部署在远程 SQL 实例上。

我有这段代码，这可能适用于本地计算机和文件系统上的包。请为我提供一些帮助，以便我的远程部署的包可以在 winform 应用程序上运行。

```
string pkgLocation = @"c:\test.dtsx";

Package pkg;

Microsoft.SqlServer.Dts.Runtime.Application app;

DTSExecResult pkgResults;

Variables vars;

app = new Application();

pkg = app.LoadPackage(pkgLocation, null);

vars = pkg.Variables;

vars["A_Variable"].Value = "Some value";

pkgResults = pkg.Execute(null, vars, null, null, null);

if (pkgResults == DTSExecResult.Success)

    Console.WriteLine("Package ran successfully");

else

    Console.WriteLine("Package failed"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:53:30.233

我会通过将包部署到 SQL 作业中然后使用 SQL 管理对象来完成此任务来解决此问题

[http://msdn.microsoft.com/en-us/library/ms162202.aspx](http://msdn.microsoft.com/en-us/library/ms162202.aspx)

[http://www.sqldbtips.com/showarticle.asp?ID=34](http://www.sqldbatips.com/showarticle.asp?ID=34)

# mysql - 获取一个名称未在我的表中定义的 MySQL 列

> ID：10475640
> 
> 赞同：-2
> 
> 时间：2012-05-07T01:12:01.113
> 
> 标签：mysql, format, row

我正在尝试编写一个假设的查询，此时看起来像这样：

```
SELECT customers.*, 
       customers_cars.car
        (SELECT main_vehicle 
         FROM customers 
         WHERE customer='Joe') 
FROM customers 
WHERE type='CoolCustomer'; 
```

我的表实际上有 car1、car2、car3 之类的值，我希望在运行时将这些值“格式化”。不幸的是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:26:08.850

您还没有向我们展示您的表格的架构；这比帮助你更难。

如果您正在寻求获取`car1`column 或`car2`column or ... 那么至少有两个问题：

1.  你的桌子设计不正确。
2.  您不能将列（或表）的名称构建为查询的一部分。

您应该将有关客户每辆汽车的信息与有关客户的信息放在单独的表中。因此，客户姓名为“Joe”的信息属于一个表；他驾驶兰博基尼的事实应该记录在单独的表格中。每个客户的汽车表中可能有多个记录。

您还需要加入这两个表；您的语法不正确的查询不会尝试这样做。

* * *

您有两个带有列的表：

*   **客户**：客户，类型，...

*   **客户**_汽车 : main_vehicle, car1, car2, car3

您可能有，但没有显示，在`Customers_Cars`. 事实上，您可能应该在每个表中都有一个“客户 ID”列。此外，该`Customers_Cars`表应该只是：

*   **Customers_Cars** : CustomerID、CarNum、CarInfo、MainVehicle

在此，我假设`MainVehicle`是一个布尔标志，并且每个客户都有一个标记为 true 的条目。

然后您的 SELECT 语句变为：

```
SELECT U.*, 
       C.CarInfo
  FROM Customers      AS U
  JOIN Customers_Cars AS C ON C.CustomerID = U.CustomerID
 WHERE C.MainVehicle = TRUE
   AND U.Customer = 'Joe'
   AND U.Type     = 'CoolCustomer'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:33:57.027

我认为您指的是给列别名。请参阅有关使用别名的参考：[在 MySQL 查询的 WHERE 子句中使用列别名会产生错误](https://stackoverflow.com/questions/942571/using-column-alias-in-where-clause-of-mysql-query-produces-an-error)

但是使用别名的底线是使用`AS`关键字。当您使用子查询时，您可能需要别名，就像您在此处使用括号中的查询一样。

在您的示例中，请尝试以下操作：

```
SELECT customers.*, car1 AS customers_cars.car
   (SELECT car2 AS main_vehicle 
     FROM customers 
     WHERE customer='Joe') 
FROM customers 
WHERE type='CoolCustomer'; 
```

# ormlite - 使用 ORMLite 遍历外部集合的问题

> ID：10475641
> 
> 赞同：0
> 
> 时间：2012-05-07T01:12:26.233
> 
> 标签：ormlite

尝试将 Ormlite`ForeignCollection`与以下类一起使用时遇到问题。我相信我的 Run & Waypoint 类已正确注释。（Run 有一组 WayPoints）。但是，当我尝试访问 WayPoints（请参阅第三个代码摘录）`CloseableIterator`时，当我调用`hasNext()`. 当我用模拟器测试它时，我首先为 Run 生成一些 WayPoints 并存储它们。然后我尝试通过 Run 实例访问这些 WayPoints。只是为了补全图，这里不转储太多代码，`ForeignCollection<WayPoint>`通过调用将对象传递给Contender构造函数

```
run.getWayPoints(); 
```

以下是我创建 WayPoint 并将其存储的方式:: - 当 GPSLocation.onLocationChanged() 触发且状态为 GPS_STATE_RUNNING 时，将调用 createWayPoint()。这将实例化一个 WayPoint，设置 lng/lat 值，并将句柄设置为关联的 Run 实例，此时尚未将其自身存储到数据库中。一个 Intent 被发送到另一个类，该类在 GPSLocation.updateWayPointWithElapsedTime() 上回调，其中 WayPoint 最终存储到数据库中。当运行完成时，外部类调用 storeRun() 来存储 Run 实例。我开始怀疑在关联的 Run 实例本身尚未存储时存储 WayPoint 是否是问题的一部分。

** 注意 :: 这些类将不会编译，因为它们被缩减以显示与问题相关的部分。

```
@DatabaseTable
public class Run {

    @DatabaseField(generatedId=true)
    private int id;

    @DatabaseField(foreign=true,foreignAutoRefresh=true)
    private Route route;

    @ForeignCollectionField
    private ForeignCollection<WayPoint> wayPoints; 

    @DatabaseField
    private Date date;

    @DatabaseField
    private long time;

    public ForeignCollection<WayPoint> getWayPoints() {
        return wayPoints;
    }
}

@DatabaseTable
public class WayPoint {

    @DatabaseField(generatedId=true)
    private int id;

    @DatabaseField
    private int latitude;

    @DatabaseField
    private int longitude;

    @DatabaseField
    private int time; // offset 

    @DatabaseField(foreign=true,foreignAutoRefresh=true) 
    private Run run;
}    

public class Contender implements Comparable<Contender> {

    private int accumulatedDistance;
    private int interpolatedDistance;
    private WayPoint startPoint;
    CloseableIterator itr;
    private int id;
    WayPoint previous;
    WayPoint next;

    public Contender(ForeignCollection<WayPoint> wayPoints, WayPoint startPoint, int id) {

        this.startPoint = startPoint;
        this.id = id;
        itr = wayPoints.closeableIterator();

        if(itr.hasNext()) { 
            next = (WayPoint)itr.next();
        }
        else {
            Log.e("@@@", "no way points");
        }

        Log.i("@@@", "wayPoints size is " + wayPoints.size()); 
    }
}

public class GPSLocation extends Service implements LocationListener {
    private Run run;
    private WayPoint  wayPoint;
    private int distanceTravelled;

    @Override
        public void onCreate() {
            locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
            Criteria criteria = new Criteria();
            provider = locationManager.getBestProvider(criteria, false);
            startLocationUpdates = new ArrayList<Location>();

            Log.i(LOGTAG, "GPSLocation Service Running...");
        }

        public void startRunning() {

            setState(GPS_STATE_RUNNING);
            startTime = System.currentTimeMillis();
            run = new Run();
            run.setRoute(route);
            run.setDate(new Date());
        }

        public void storeRun(long elapsedTime) {

            // if first run and end point not set then set end point
            run.setTime(elapsedTime);
            route.addToCumulativeDistance(distanceTravelled);
            DatabaseManager.getInstance().storeRun(run);
            DatabaseManager.getInstance().updateRoute(route);

            resetGlobalState();
        }

        public void onLocationChanged(Location location) {

            previousLocation = currentLocation;
            currentLocation = location;

            Intent i = null; 
            boolean startActivity = true;

            switch(state)
            {
                case GPS_STATE_SETTING_START_LOCATION:
                    startLocationUpdates.add(location);

                    if(startLocationAccepted())
                    {
                        i = new Intent(this, AddRoute.class);
                        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        i.setAction("acquired");
                    }
                    else
                    {
                        startActivity = false; // waiting for more location data
                    }
                    break;

                case GPS_STATE_READY:
                    if(!atLocation(ROUTE_START, location, ROUTE_DELIMITER_REQUIRED_PROXIMITY))
                    {
                        setState(GPS_STATE_AWAITING_ARRIVAL_AT_START_LOCATION);
                        i = new Intent(this, Running.class);
                        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        i.setAction("proximity_update");
                    }
                    break;

                case GPS_STATE_AWAITING_ARRIVAL_AT_START_LOCATION:
                    i = new Intent(this, Running.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                    if(atLocation(ROUTE_START, location, ROUTE_DELIMITER_REQUIRED_PROXIMITY))
                    {
                        setState(GPS_STATE_READY);
                        i.setAction("ready");
                    }
                    else
                    {
                        i.setAction("proximity_update");
                    }
                    break;

                case GPS_STATE_RUNNING:
                    createWayPoint(location);
                    i = new Intent(this, Running.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                    if(atLocation(ROUTE_END, location, ROUTE_DELIMITER_REQUIRED_PROXIMITY) 
                            && (distanceTravelled > ROUTE_DELIMITER_REQUIRED_PROXIMITY))
                    {
                        i.setAction("at_end");
                    }
                    else
                    {
                        i.setAction("update");
                    }

                    distanceTravelled += currentLocation.distanceTo(previousLocation);  
                    i.putExtra("distanceTravelled", distanceTravelled);
                    setState(GPS_STATE_RUNNING_UPDATE);
                    break;

                default:
                    // error
            }
        }

        private void createWayPoint(Location location) {

            wayPoint = new WayPoint();
            wayPoint.setLatitude(LocationMath.degreesToMicroDegrees(location.getLatitude()));
            wayPoint.setLongitude(LocationMath.degreesToMicroDegrees(location.getLongitude()));
            wayPoint.setRun(run);
        }

        /*
         * Now we have the elapsed time from the Running Activity, we can store this WayPoint
         */
        public void updateWayPointWithElapsedTime(long elapsedTime) {

            // TODO::check the time value is correct
            wayPoint.setTimeOffset((int)elapsedTime);
            DatabaseManager.getInstance().storeWayPoint(wayPoint);
            setState(GPS_STATE_RUNNING); 
        }
    } 
```

来自数据库管理器的摘录 -->

```
public void storeWayPoint(WayPoint point) {
        try {
            getHelper().getWayPointDao().create(point);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

public void storeRun(Run run) {
    try {
        getHelper().getRunDao().create(run);
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:05:28.547

我认为您发布的代码没有任何问题，克里斯。因此，我怀疑您没有`WayPoint`像您认为的那样插入 s 。您是否验证过它们在数据库中？您是否尝试过`WayPoint`直接使用 DAO 进行查询？

```
// what does this return?
List<WayPoint> wayPoints = wayPointDao.queryForAll(); 
```

> 我首先为 Run 生成一些 WayPoints 并存储它们

此外，请确保您已将`Run`字段插入到`Run`表中，并`WayPoint` *在*为`WayPoint`. 您应该执行以下操作：

```
Run run1 = new Run(...);
runDao.create(run1);
...
WayPoint wayPoint1 = new WayPoint(...);
wayPoint1.setRun(run1);
wayPointDao.create(wayPoint1);
... 
```

您可以插入的另一种方法是使用外部集合本身：

```
// create a foreign collection we can add to
run.wayPoints = runDao.getEmptyForeignCollection("wayPoints");
// now if you add something to the collection, it gets created in the DAO as well
run.wayPoints.add(wayPoint1); 
```

如果您编辑您的问题并向我们展示用于将`WayPoint`s 插入数据库的代码，我将编辑我的答案以提供更多信息。

# java - 模型-视图-控制器和 Java

> ID：10475642
> 
> 赞同：1
> 
> 时间：2012-05-07T01:12:33.343
> 
> 标签：java, model-view-controller

Java中常用的model-view-controller-pattern是什么？
我听说，通常只使用它的 2 个组件，因此视图和控制器只是 1 个组件，与模型通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:21:10.203

我认为这个问题可能太宽泛而无法回答，但是，为了让您清楚：

*   MVC 模式用于许多流行的 Java Web 框架，MVC 模型 2 也很流行。
*   如果您正在考虑移动应用程序，那么 Android 也使用 MVC 模式以及为视图和控制器定义明确的角色。
*   如果您正在考虑桌面应用程序，那么有一些 Swing 框架也使用 MVC 模式。

所以简而言之，你的问题的答案是：是的，MVC 模式在 java 中被广泛使用，通常视图和控制器有自己的角色，也许在摇摆中这个概念是混合的，但在其他类型的应用程序中不是这样很多。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:38:34.417

是的，它在 Java 中很常见。

在 JavaEE 中，它可以像由 javax.servlet.http.HttpServlet（servlet、控制器）构造的 JavaBean（模型）一样简单，并作为请求属性转发到 JSP 页面（视图），JSP 页面（视图）以浏览器友好的格式呈现它，例如作为 HTML。还有各种各样令人眼花缭乱的框架——一些是标准的，一些是开源的，还有一些是专有的——它们都在寻找干净的 MVC 开发的圣杯，通常使用语法糖来降低复杂性或提高开发人员的生产力。一些重要的例子是[Apache Struts](http://struts.apache.org)和[JavaServerFaces (JSF)](http://java.sun.com/javaee/javaserverfaces/1.2/docs/api/)。Wikipedia 有一个不错的[Java MVC 框架](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks#Java)概要。

在 JavaSE 中，使用 MVC 设计的 GUI 应用程序可以访问丰富的技术，例如侦听器以将模型更改从控制器传递到视图，以及将用户交互从视图组件传递到控制器。在 Swing 中，视图可以像 JTextField 一样简单，也可以像 JFrame 一样复杂，其中包含一组重要的组件/小部件。Oracle 在此处提供了有关该模式的概述文档[。](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)

最后，它可能只是我，但我还没有看到组合视图和控制器的示例，我没有抱怨并希望进行重构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:34:06.657

MVC 是最流行的设计模式之一，不仅适用于 Java，而且适用于所有其他面向对象的编程语言。

控制器包含 Web 层表示逻辑，例如处理请求并将响应分派回视图

视图负责将请求值传递给控制器​​并呈现返回的响应

模型与视图和控制器密切相关。

Spring MVC 的一个简单示例...

1.  Dispatcher servlet 充当前端控制器，通过它根据 url 将所有请求引导到相关控制器
2.  控制器从视图（JSP）获取请求值并处理请求值，相应地填充模型
3.  填充模型

    通过 ORM 框架 (Hibernate) 传递以将数据持久保存在数据库中或填充模型添加回会话或请求范围变量

4.  用于使用 JSTL 或 EL 将值呈现回视图 (JSP)

这是一个非常简单的场景，典型的 Web 应用程序将使用 MVC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T05:13:26.683

MVC 代表模型视图和控制器。它是一种将业务逻辑、表示逻辑和数据分离的设计模式。Controller 充当 View 和 Model 之间的接口。控制器拦截所有传入的请求。模型表示应用程序（数据）的状态。它也可以有业务逻辑。View 代表演示文稿，即 UI（用户界面）。

# google-maps - 将信息框与谷歌地图中的标记对齐

> ID：10475644
> 
> 赞同：0
> 
> 时间：2012-05-07T01:13:02.487
> 
> 标签：google-maps, gmaps4rails, marker, infowindow

我正在使用 InfoBox 插件，并且我有以下代码：

```
Gmaps.map.infobox = function(boxText) {
  return {
     content: boxText
    ,disableAutoPan: false
    ,maxWidth: 0
    ,pixelOffset: new google.maps.Size(-140, 0)
    ,zIndex: null
    ,boxStyle: {
      background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/examples/tipbox.gif') no-repeat"
      ,opacity: 0.75
      ,width: "280px"
       }
    ,closeBoxMargin: "10px 2px 2px 2px"
    ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
    ,infoBoxClearance: new google.maps.Size(1, 1)
    ,isHidden: false
    ,pane: "floatPane"
    ,enableEventPropagation: false
 }}; 
```

使用尺寸为 77x80 像素的标记，当显示 InfoWindow 时，它会在标记的底部正确对齐，如下所示：

![与信息框对齐的大标记](../Images/aff8b6b4a733b2281716d0b44dd670dd.png)

但是，如果我将标记的大小更改为 35x44 像素，则 InfoWindow 不会在标记的底部完全对齐，如您在此处看到的：

![信息框错误对齐的小标记](../Images/e93813e77439e0f8ab0853c5585352aa.png)

关于如何使它在底部完全对齐的任何想法？

编辑：对于小标记，我通过在我使用的库（gmaps4rails）中设置它来创建它们：

```
marker.picture({
                  :picture => "assets/juice-pin-small.png",
                  :width => 35,
                  :height => 44,
                 }) 
```

对于大标记，我通过设置来创建它们：

```
marker.picture({
                      :picture => "assets/juice-pin-small.png",
                      :width => 70,
                      :height => 88,
                      :marker_anchor => [23,78]
                     }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:29:12.447

我所知道的绝对不是最好的解决方案，因为如果您要使用两种尺寸的标记，则需要两组选项。

无论如何，信息框的位置可以更改为`pixelOffset: new google.maps.Size(-140, 0);`，在您的情况下，将框向左移动，使第一个数字更负（如-145）。

想到别的东西：编辑标记本身并将其移动几个像素。

# python - 在 python 中使用 tkinter 时的新窗口

> ID：10475645
> 
> 赞同：1
> 
> 时间：2012-05-07T01:13:02.640
> 
> 标签：python, tkinter

我正在为用户创建一个游戏来选择角色颜色并继续引导他们通过迷宫。最初我让用户输入他们角色的名称和他们希望他们去的方向，但将输入更改为使用 tkinter 的箭头键。现在我遇到了一个问题，因为 tkinter 为其输入打开了一个新窗口。

```
import view,datetime,Tkinter as tk

def main():
   global root
   if __name__ == "__main__":
      view.root.update()
      command = raw_input( "choose a player:" )
      run1( command )
      view.root.update()
      while True:
          root = tk.Tk()
          print( "Press a key (Escape key to exit):" )
          root.bind_all( '<Key>', key )
          root.mainloop()
      root.withdraw()
      root.destroy()
      view.root.destroy()

main() 
```

这显示了我导入的内容和我的主要功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:54:01.970

每次你这样做...

```
root = tk.Tk()
...
root.mainloop() 
```

您正在创建一个全新的窗口。所以当然，当你`bind_all`在这个新窗口上使用时，那个新窗口就是接收输入的窗口。我无法真正说出你想要做什么，但很明显这就是你看到你所看到的行为的原因。

大多数时候，你只想要一个`root`——这就是为什么它被称为“root”！似乎您应该`bind_all`在`view.root`实例上使用，而不是在这个新根上使用。

另外，作为旁注，您的代码中的控制流确实很奇怪。为什么在函数`if __name__ == '__main__'` *里面*`main`？通常这将在模块的顶层，并会*调用* `main`它自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:12:59.463

该`root = tk.Tk()`语句实际上创建了一个新窗口并`root.mainloop()`维护了窗口的控制循环。如果将此代码添加到`while True:`几个窗口中，将一一打开。

检查必要性`while True:`

问候

# php - 多维数组中的随机值

> ID：10475646
> 
> 赞同：1
> 
> 时间：2012-05-07T01:13:27.417
> 
> 标签：php, multidimensional-array

如果有 4 个按钮，我如何在下面的代码中获取随机项目的价格并根据单选按钮选择插入到 mysql 中：

```
$class1 = array("Peugeot 404"=>5000,"Opel Diplomat"=>7500,"Honda Civic"=>10000,"Renault Megane"=>15000);
$class2 = array("Ford Mustang"=>22500,"Dodge Charger"=>36000,"Alfa GTV "=>90000,"Aston Martin Vanquish"=>102000);
$class3 = array("BMW 7 series"=>114000,"Ferrari F430"=>132000,"Pagani Zonda"=>150000,"Maserati Gran Turismo"=>168000);
$class4 = array("Bentley Continental R"=>180000,"Maybach"=>200000,"Rolls-Royce Phantom"=>300000);

$rand1 = array_rand($class1,4);
$rand2 = array_rand($class2,4);
$rand3 = array_rand($class3,4);
$rand4 = array_rand($class4,3);

if($_POST['do'])
{
    echo $_POST['car'];
}
?>
<form method="POST">
<input type="radio" name="car" id="<? $rand1 ?>" value="<? echo "You have won: ".$rand1[0]." AND Price: ".$class1[$rand1[0]].""; ?>" />Class 1<br />
<input type="radio" name="car" id="<? $rand2 ?>" value="<? echo "You have won: ".$rand2[0]." AND Price: ".$class2[$rand2[0]].""; ?>" />Class 2<br />
<input type="radio" name="car" id="<? $rand3 ?>" value="<? echo "You have won: ".$rand3[0]." AND Price: ".$class3[$rand3[0]].""; ?>" />Class 3<br />
<input type="radio" name="car" id="<? $rand4 ?>" value="<? echo "You have won: ".$rand4[0]." AND Price: ".$class4[$rand4[0]].""; ?>" />Class 4<br />
<input type="submit" name="do" value="DO" />
</form> 
```

这就像一个黑手党游戏，当我选择第一个单选按钮时，我会随机获得一辆带有价格的汽车。第二个按钮也给了我一件随机汽车，但其他车型。

之后我需要将它插入到 mysql DB 中。

# php - 为什么 unset() 在 PHP 三元运算符中不起作用

> ID：10475650
> 
> 赞同：3
> 
> 时间：2012-05-07T01:14:22.283
> 
> 标签：php, ternary-operator, unset

所以这有一个问题，但我对此视而不见。即使在阅读了两次文档之后（[PHP 比较运算符](http://us.php.net/manual/en/language.operators.comparison.php)）

```
isset($items['blog']) ? unset($items['blog']) : NULL; 
```

> 解析错误：语法错误，意外的 T_UNSET

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T01:15:35.620

您不能在三元运算中使用 unset ，因为它不是可以操作的表达式。它是一种语言结构（如`isset`and `echo`），不能放在那里。

只需使用它就可以了，无需做出决定：

```
unset($items['blog']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:41:53.007

错误说，`T_UNSET`（即[^(*Docs*)](http://www.php.net/manual/en/tokens.php)的[令牌](http://www.php.net/manual/en/tokens.php)*`unset`）在该行是意外的。这意味着你不能把它放在那里。就这样。删除它，你很好：*

 *```
unset($items['blog']); 
```

这与三元运算符 btw 没有太大关系，并且正如代码示例所示，无论如何您都不需要该运算符`unset`。

如果你非常喜欢三元运算符，你可以评估 unset：

```
isset($items['blog']) ? eval('unset($items[\'blog\'])') : NULL; 
```

但这不是一个严肃的建议，因为不是很直接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:19:58.207

@Bryan 指出，三元运算符中没有对语言结构的~~函数~~调用。由于这里根本不涉及返回值，因此只需执行以下操作：

```
unset($items['blog']); 
```

无需事先检查该值是否已设置。如果不是，`unset`根本不会做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T02:20:14.730

只是关于基准问题的建议：仅当您必须在视图中或确实需要一行代码时才使用三元语法；因此 if else 运算符要快得多*

# javascript - 如何判断是否安装了 node.js

> ID：10475651
> 
> 赞同：121
> 
> 时间：2012-05-07T01:14:32.423
> 
> 标签：javascript, node.js

我最近安装了 node.js，但我不知道如何运行应用程序。我安装了 node.js 但找不到进一步的说明。一个人真正需要做什么？我想看看它是否真的有效。所以我执行了一个名为 hello.js 的脚本。它是这样的：

```
console.log('hello world'); 
```

现在这将被记录到哪里？

**编辑**

我正在通过 .php 脚本运行这个 .js。

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-05-07T01:18:51.113

打开一个终端窗口。类型：

```
node -v 
```

这将显示您的`nodejs`版本。

导航到您保存脚本的位置并输入：

```
node script.js 
```

这将运行您的脚本。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-23T14:46:23.977

打开终端并输入

```
node -v 
```

这将告诉您安装的 nodejs 的版本，然后通过输入运行 nodejs simple

```
node 
```

提示必须改变。输入以下内容，

```
function testNode() {return "Node is working"}; testNode(); 
```

如果安装成功，命令行必须提示以下输出

```
'Node is working' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-01-05T05:37:55.003

请尝试此命令**node --version**或**node -v**，其中任何一个都应该返回类似`v4.4.5`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-12T20:15:21.280

（这适用于 windows 操作系统，但概念可以应用于其他操作系统）

运行命令`node -v`可以确认是否已安装，但无法确认是否未安装。（可执行文件可能不在您的 PATH 上）

有两种方法可以检查它是否实际安装：

1.  检查默认安装位置`C:\Program Files\nodejs\`

或者

2.  转到`System Settings -> Add or Remove Programs`并过滤`node`，它应该会显示你是否安装了它。对我来说，它显示为标题：“Node.js”和描述“Node.js Foundation”，没有指定版本。安装大小为 52.6MB

如果您没有安装它，请从这里获取它[https://nodejs.org/en/download/](https://nodejs.org/en/download/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-05-31T09:15:11.767

通过在终端中输入来检查节点版本

```
node -v 
```

通过键入检查 npm 版本

```
npm -v 
```

如果这些命令为您提供了版本号，`node`并且`npm`您可以进行`NodeJs`开发

* * *

**测试节点的时间**

通过运行命令创建目录。

```
mkdir NodeJs 
```

将目录更改为`NodeJs`文件夹并创建一个文件

```
touch index.js 
```

`index.js`使用`vi`或在您喜欢的文本编辑器中打开您的。

输入

```
console.log('Welcome to NodesJs.') 
```

并保存文件。

在终端中导航回您保存的文件并键入

```
node index.js 
```

如果你发现`Welcome to NodesJs.`你做得很好，并且你使用 NodeJs。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-20T15:35:06.750

`Ctrl`+ `R`- 打开命令行，然后写入：

```
node -v 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-14T10:02:25.073

在 Windows 中打开命令提示符或在 Linux 和 Mac 中打开终端。键入

```
node -v 
```

如果节点已安装，它将显示其版本。例如，

```
v6.9.5 
```

否则从[nodejs.org下载](https://nodejs.org/en/)

# php - jQuery $.post 处理 JSON 响应

> ID：10475652
> 
> 赞同：17
> 
> 时间：2012-05-07T01:14:34.013
> 
> 标签：php, jquery, json

我无法弄清楚如何从 jQuery $.post() 请求中正确读取我的 JSON 响应。

在下面的 jQuery 代码中，我根据我用作键的相应“color_entry_id”从 DOM 中的元素填充字符串的关联数组：

```
var image_links = {};
$(this).find('input[name="color_id"]').each(function() {
    var color_entry_id = $(this).val();
    var image_link = $(this).parent().find('input[name="edit_image"].' + color_entry_id).val();
    image_links[color_entry_id] = image_link;
}); 
```

然后我发出 POST 请求，发送我的“image_links”数组：

```
$.post(
    "test.php",
    { id: product_id, "images[]": jQuery.makeArray(image_links) },
    function(data) {
        var response = jQuery.parseJSON(data);
        $.each(response.images, function(index, item) {
             alert(item);
        });
    }
); 
```

另外，如上所示，我尝试遍历响应数组并输出每个项目，我想将其作为一个字符串，但我只得到“[object Object]”作为警报值。我不知道如何让它显示我要显示的字符串！

下面是 test.php 的 PHP 代码：

```
<?php
    $product_id = $_POST['id'];
    $images = $_POST['images'];

    $response = array();
    $response['id'] = $product_id;
    $response['images'] = $images;

    echo json_encode($response);
?> 
```

以下是 DOM 的相关部分：

```
<input type='hidden' value='{{ color_entry_id }}' name='color_id' />
<p><img src='{{ color_img_link }}' /></p>
<p>Image Link: <input class='{{ color_entry_id }}' name='edit_image' type='text' size='150' value='{{ color_img_link }}' /></p>
<div class='colors {{ color_entry_id }}'>
    <div class='img_color'>
        <a href='javascript:void' style='background:...' class='selected'></a>
        <p>...</p>
    </div>
</div> 
```

我想知道我是否在 PHP 端错误地执行了 JSON 编码，或者我只是在 jQuery 中错误地循环了响应。任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-07T02:24:50.053

好吧..您从帖子中返回的数据对象是：`{"id":"abc","images":[{"color123":"somelink.com\/123","color223":"somelink.com\/‌​223"}]};`

如果您更改警报，您将找到您正在寻找的值：

```
$.post(
    "test.php",
    { id: product_id, "images[]": jQuery.makeArray(image_links) },
    function(data) {
        var response = jQuery.parseJSON(data);

        var images = response.images[0];
        for (var i in images){
            alert(images[i]);
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-07T01:34:56.797

$.post 默认需要xml，需要指定响应格式

```
$.post(
    "test.php",
    { id: product_id, images : jQuery.makeArray(image_links) },
    function(response) {
        // Response is automatically a json object
        for(var i = 0; i < response.images.length; i++) {
            alert(response.images[i]);
        }
    }, 'json' // <-- HERE
); 
```

另外，考虑在您的 php 脚本中添加内容类型标头

```
 <?php
    header("Content-type: application/json"); // Adding a content type helps as well
    $product_id = $_POST['id'];
    $images = $_POST['images'];

    $response = array();
    $response['id'] = $product_id;
    $response['images'] = $images;

    echo json_encode($response);
    ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-07T01:26:00.640

一个非常基本的例子是这样的：

```
$.post('test.php', {"id": 42}, function (json) {
 console.log(json);
}, 'json'); 
```

PHP 示例

```
$number = rand(1,$_POST["id"]);
return print json_encode($number); 
```

# python - 使用 Python 从 XML 文件中提取元素

> ID：10475654
> 
> 赞同：2
> 
> 时间：2012-05-07T01:14:51.317
> 
> 标签：python, xml-parsing

下面的链接为我们提供了食谱列表中的成分列表。我想提取成分的名称并使用 python 将其保存到另一个文件中。 [http://stream.massey.ac.nz/file.php/6087/Eva_Material/Tutorials/recipebook.xml](http://stream.massey.ac.nz/file.php/6087/Eva_Material/Tutorials/recipebook.xml)

到目前为止，我已经尝试使用以下代码，但它给了我完整的配方，而不是成分的名称：

```
from xml.sax.handler import ContentHandler
import xml.sax
import sys
def recipeBook(): 
    path = "C:\Users\user\Desktop"
    basename = "recipebook.xml"
    filename = path+"\\"+basename
    file=open(filename,"rt")
    # find contents 
    contents = file.read()

    class textHandler(ContentHandler):
      def characters(self, ch):
      sys.stdout.write(ch.encode("Latin-1"))
    parser = xml.sax.make_parser()
    handler = textHandler( )
    parser.setContentHandler(handler)
    parser.parse("C:\Users\user\Desktop\\recipebook.xml")

  file.close() 
```

如何提取每种成分的名称并将它们保存到另一个文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:59:25.983

@Neha

[我想您现在已经解决了您的请求，这是我使用http://lxml.de/tutorial.html](http://lxml.de/tutorial.html)上的教程整理的一小部分。XML 文件保存在“rough_data.xml”中

```
import xml.etree.cElementTree as etree

xmlDoc = open('rough_data.xml', 'r')
xmlDocData = xmlDoc.read()
xmlDocTree = etree.XML(xmlDocData)

for ingredient in xmlDocTree.iter('ingredient'):
    print ingredient[0].text 
```

对于所有阅读本文的有经验的 Python 程序员，请改进这个“新手”代码。

注意：lxml 包看起来很不错，绝对值得使用。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:59:44.077

请放置相关的 XML 文本以获得正确的答案。还请考虑将[lxml](http://lxml.de)用于任何特定于 xml 的内容（包括 html）。

尝试这个 ：

```
from lxml import etree

tree=etree.parse("your xml here")
all_recipes=tree.xpath('./recipebook/recipe')
recipe_names=[x.xpath('recipe_name/text()') for x in all_recipes]
ingredients=[x.getparent().xpath('../ingredient_list/ingredients') for x in recipe_names]
ingredient_names=[x.xpath('ingredient_name/text()') for x in ingredients] 
```

这只是开始，但我认为你从这里得到了想法 -> 从每个成分名称中获取父级，从那里获取成分/数量等等。由于文档的结构化性质，我认为您无法真正进行任何其他类型的搜索。

您可以在 [www.lxml.de] 上阅读更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T22:22:01.180

前段时间，我制作了一系列截屏视频，解释如何从网站收集数据。代码在 Python 中，有 2 个关于使用*lxml*库解析 XML 的视频。所有视频都发布在这里：[http ://railean.net/index.php/2012/01/27/fortune-cowsay-python-video-tutorial](http://railean.net/index.php/2012/01/27/fortune-cowsay-python-video-tutorial)

你想要的是：

*   XPath 实验和查询示例
*   Python 和 LXML，使用 Python 进行 XPath 查询的示例
*   使用 lxml 通过 HTTP 和 HTML 解析自动检索页面

您将学习如何编写和测试 XPath 查询，以及如何在 Python 中运行此类查询。这些示例很简单，希望对您有所帮助。

# mobile - 如何在本地测试我新开发的移动网站

> ID：10475659
> 
> 赞同：6
> 
> 时间：2012-05-07T01:16:01.787
> 
> 标签：mobile

所以我为个人目的创建了一个移动网站，并练习了一些关于 Jquery 移动的知识。我只是想知道我是否可以在我的站点本地测试我的移动网站，因为我还没有服务器或 FTP 来通过互联网上传这个。

有人可以建议我该怎么做吗？我看到很多模拟器，但我认为在通过模拟器进行测试之前，我必须上传我的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:21:34.773

使用它来修改浏览器标题：

[https://addons.mozilla.org/en-US/firefox/addon/modify-headers/](https://addons.mozilla.org/en-US/firefox/addon/modify-headers/)

或这个

[https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:47:40.663

您可以在本地下载服务器应用程序 - 无需上传。根据您开发的站点，您将需要不同的功能（例如 PHP 将需要 PHP 运行时）。

就此而言，大多数操作系统都附带一个 http 服务器：Windows 和 IIS、OSX 和“网络共享”(Apache httpd)，大多数 Linux 发行版要么捆绑一个，要么有一个现成的安装程序。

如果这些不吸引人或不可用，您可以获得一个可以在本地安装或从 USB 驱动器运行的：[便携式服务器](http://en.wikipedia.org/wiki/List_of_portable_software#HTTP_servers)

要使用本地 http 服务器进行测试，您将浏览器[指向 http://localhost/](http://localhost/)，其中路径取决于您设置服务器软件的方式。

# knockout.js - Knockout.js 和同位素

> ID：10475665
> 
> 赞同：1
> 
> 时间：2012-05-07T01:17:17.337
> 
> 标签：knockout.js, jquery-isotope

我正试图让淘汰赛与同位素一起工作。我似乎遇到了一个问题，即同位素所需的风格被淘汰赛所践踏。

这是从淘汰赛生成的html。特别注意 div 上的样式

```
<div class="photo isotope-item" style="left: 0px; top: 0px; position: absolute; ">
  <img data-bind="attr: { src: imageSource}" src="/images/1.jpg">
</div> 
```

同位素需要的是能够定位div

```
<div class="photo  isotope-item" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(245px, 5px, 0px); ">
        <img src="images/1.jpg">
</div> 
```

有没有办法让敲除与同位素一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:59:54.600

我不确定你的情况出了什么问题，但你可能想试试我为 Knockout 编写的 Isotope binding，[Knockout-Isotope](https://github.com/aknuds1/knockout-isotope)。请注意，它需要[Knockout](https://github.com/aknuds1/knockout)的分叉版本。如果您想了解更多，我可以详细说明。

# dictionary - VBScript Dictionary Exists 方法总是返回 True

> ID：10475669
> 
> 赞同：8
> 
> 时间：2012-05-07T01:18:14.120
> 
> 标签：dictionary, vbscript, exists

我究竟做错了什么？根据我的测试，objDic.exists 永远不会给出 False！

```
 dim objDic

    set objDic = createobject("scripting.dictionary")

    objDic.add "test","I have not been deleted"

    wscript.echo objDic.item("test") 'Displays -- I have not been deleted

    objDic.remove "test"

    wscript.echo """" & objDic.item("test") & """" 'Displays -- ""

    if objDic.exists("test") then wscript.echo """" & objDic.item("test") & """" 'Displays -- "" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T02:23:03.507

据我所知，字典对象键是通过仅引用它来创建的，就好像它确实存在一样。

```
wscript.echo objDic.Item("test") 'Creates the key whether it exists or not
wscript.echo objDic.Exists("test") 'Will now return true 
```

这里有更多代码，您可以尝试证明/测试我的理论。我通常使用 MsgBox 而不是 WScript.Echo，正如您将在我的代码中看到的那样。

```
dim objDic, brk
brk = vbcrlf & vbcrlf
set objDic = createobject("scripting.dictionary")
objDic.add "test","I have not been deleted"
wscript.echo "objDic.Exists(""test""): " & brk & objDic.item("test")
WScript.Echo "Now going to Remove the key named: test"
objDic.remove "test"
MsgBox "objDic.Exists(""test""): " & brk & objDic.Exists("test") 'Returns False
wscript.echo "objDic.item(""test""): " & brk & objDic.item("test") 'Shows Blank, Creates the key again with a blank value
wscript.echo "objDic.item(""NeverAdded""): " & brk & objDic.item("NeverAdded") 'Also shows blank, does not return an error
MsgBox "objDic.Exists(""test""): " & brk & objDic.Exists("test") 'Returns True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T15:28:31.587

从 IDE 中删除所有与您的字典有关的监视变量。它是可重复的。您可以通过这种方式导致/修复该行为（Outlook 2010 VBA IDE）。我猜有点像观察者效应。. .

-M

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T17:14:22.203

这里有同样的问题......
在我的代码中，有一个动态的字典数组。
有些条目有键“HIGH”，有些没有。
测试每个条目的键是否存在总是返回 true：

```
for each dictionary_entry in dictionary_array
      if dictionary_entry.Exists("HIGH") then msgbox("Hey, I have a HIGH key, and its value is " + dictionary_entry("HIGH))
next 
```

如果我观察变量，调试器会为每个 dictionary_entry 创建一个“HIGH”键。
必须从监视变量中删除**dictionary_entry**和**dictionary_array**才能使代码正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T22:44:52.370

这个问题给我带来了很多麻烦。

原来我在代码前面的键上运行了一个“If”函数，因此将它添加到字典中。

```
If dict(key) = "chocolate" then 
Check = dict.exists(key) 'Always resolves to true
End If
Whatis = dict(key) 'resolves to "" 
```

所以 if 函数中的值没有添加到字典中，而是添加了*键*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T02:02:07.123

有同样的问题，删除IDE中所有监视的变量并修复它

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-18T20:33:49.793

接受的答案没有回答我的问题。我想其他人，所以我发布我的解决方案，因为这个线程是谷歌的第一个结果。

如果密钥不存在，则默认创建密钥。字典旨在添加不存在的条目，因此以下将始终返回 true。

```
If objDic.exists("test") then 
```

由于密钥是在您测试它是否存在时创建的，因此尚未定义该值。下面将测试 Key 是否没有与之关联的值。当然，如果您有空白值，这将不适用于您的字典。

```
If objDic.item("test") <> "" then 
```

# java - 如何在 Java Swing 应用程序中嵌入 QWebView (QtJambi)？

> ID：10475676
> 
> 赞同：3
> 
> 时间：2012-05-07T01:20:32.200
> 
> 标签：java, swing, qtwebkit, qt-jambi

是否可以使用 QWebView 在 Windows、Mac 和 Linux 的 Java Swing 应用程序中呈现 HTML5 页面？

基本上我想有类似[http://qupzilla.com](http://qupzilla.com)的东西，但对于 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:40:10.823

我认为在 Swing 中使用 QWebView 并不容易。

如果您只想在 Java Swing 应用程序中呈现 HTML 5，使用 JavaFX 的 WebView（基于 WebKit）可能更容易。您可以使用 JFXPanel 将 JavaFX 的 WebView 添加到您的 Swing 应用程序中。

还有 MozSwing（Java 的 Firefox 绑定）。

如果你只需要 XHTML + CSS3，你可以看看 fly-saucer，它是一个纯 Java 实现。

# php - SQL Query with ON DUPLICATE KEY UPDATE does not work

> ID：10475681
> 
> 赞同：1
> 
> 时间：2012-05-07T01:21:19.597
> 
> 标签：php, mysql, sql

I have a table with profiles. If there is a profile for user #:userId, I want to UPDATE it. If there is no profile for that user, I want to INSERT it. I tried this SQL query, but it did not work:

```
    INSERT INTO profiles 
    SET name = :name, 
        website = :website, 
        bio = :bio 
    WHERE user = :userId 
    重复密钥更新
        名称=：名称，
        网站=：网站，
        生物 = :生物

```

“用户”是主键

**编辑：**我在我的 SQL 中发现了一个错误，当它看起来像这样时，它工作得很好：

```
    插入配置文件
    SET user = :userId, -- <-- 错误在这里
        名称=：名称，
        网站=：网站，
        生物 = :生物
    重复密钥更新
        名称=：名称，
        网站=：网站，
        生物 = :生物

```

**感谢大家！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:23:51.517

您的 INSERT 语法不正确（看起来像是修改后的 UPDATE 语句）。尝试类似：

```
INSERT INTO profiles (name, website, bio)
       VALUES (:name, :website, :bio)
  ON DUPLICATE KEY UPDATE website = :website, bio = :bio; 
```

有关更多信息和示例，请参阅[INSERT ... ON DUPLICATE KEY UPDATE 的文档。](https://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# nhibernate - NHibernate 抛出一个奇怪的错误

> ID：10475686
> 
> 赞同：2
> 
> 时间：2012-05-07T01:23:13.057
> 
> 标签：nhibernate, log4net

当我在 IRepository 上调用 _repository.DbContext.CommitChanges() 时，它给了我以下错误：找不到字段：'NHibernate.AdoNet.AbstractBatcher.log'

我不确定这个错误来自哪里或如何确定为什么会发生这种情况？任何人有任何想法或想法？

# objective-c - 算术计算错误

> ID：10475689
> 
> 赞同：0
> 
> 时间：2012-05-07T01:24:05.653
> 
> 标签：objective-c

我正在尝试计算 2 个检索到的值，`NSMutableArray`但在运行时出现错误，指向算术计算的完成方式。

插入值的代码：

```
NSString *lastEx = @"None";
int lastScore = 0;
int tries = 0;
int total_score = 0;
int avg = 0;
int credit = 100;

[data addObject:lastEx];
[data addObject:[NSNumber numberWithInt:lastScore]];
[data addObject:[NSNumber numberWithInt:tries]];
[data addObject:[NSNumber numberWithInt:total_score]];
[data addObject:[NSNumber numberWithInt:avg]];
[data addObject:[NSNumber numberWithInt:credit]]; 
```

检索代码：

```
NSMutableArray *savedStock = [[NSMutableArray alloc] initWithContentsOfFile:path];

previousExercise.text = [savedStock objectAtIndex:0];

NSString *lastScoring = [NSString stringWithFormat:@"%d", [[savedStock objectAtIndex:1] intValue]];
previousScore.text = lastScoring;

NSString *totalTries = [NSString stringWithFormat:@"%d", [[savedStock objectAtIndex:2] intValue]];
attempts.text = totalTries;

NSString *average = [NSString stringWithFormat:@"%d", [[savedStock objectAtIndex:4] intValue]];
avgScore.text = average;

int totalScore = [[savedStock objectAtIndex:3] intValue];
int numberOfTries = [[savedStock objectAtIndex:2] intValue];
int avg;

avg = ((totalScore / numberOfTries) * 100);

NSString *rem_credit = [NSString stringWithFormat:@"%d", [[savedStock objectAtIndex:5] intValue]];
credits.text = rem_credit; 
```

错误是=>的计算`avg = ((totalScore / numberOfTries) * 100);`

提前谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:27:12.337

`tries`为 0，因此也`int numberOfTries = [[savedStock objectAtIndex:2] intValue];`分配 0 `numberOfTries`，整数除以 0 会导致算术错误。

考虑：

```
avg = (numberOfTries == 0) ? 0 : ((totalScore / numberOfTries) * 100); 
```

# ruby-on-rails - 使用带有特定 ActiveRecord 对象的 redirect_to 创建指向该对象的链接

> ID：10475690
> 
> 赞同：9
> 
> 时间：2012-05-07T01:25:32.947
> 
> 标签：ruby-on-rails

我正在阅读 Michael Hartl 在[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)上的教程。它基本上是一个留言板应用程序，用户可以在其中发布消息，其他人可以留下回复。现在我正在创建`Users`. 里面的`UsersController`东西是这样的：

```
 class UsersController < ApplicationController
      def new
        @user = User.new
      end

      def show
        @user = User.find(params[:id])
      end

      def create
        @user = User.new(params[:user])
        if @user.save
          flash[:success] = "Welcome to the Sample App!"
          redirect_to @user
        else
          render 'new'
        end    
      end
    end 
```

作者说以下几行是等价的。这对我来说很有意义：

```
 @user = User.new(params[:user])
    is equivalent to
    @user = User.new(name: "Foo Bar", email: "foo@invalid",
             password: "foo", password_confirmation: "bar") 
```

`redirect_to @user`重定向到`show.html.erb`. 这究竟是如何工作的？它怎么知道去`show.html.erb`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T01:34:30.993

这一切都是通过 Rail 的宁静路由的魔力来处理的。具体来说，有一个约定，即执行`redirect_to`特定对象会转到该`show`对象的页面。Rails 知道这`@user`是一个活动记录对象，因此它将其解释为知道您想进入该对象的显示页面。

这是 Rails 指南的适当部分的一些细节[- 从外到内的 Rails 路由。](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)：

```
# If you wanted to link to just a magazine, you could leave out the
# Array:

<%= link_to "Magazine details", @magazine %>

# This allows you to treat instances of your models as URLs, and is a
# key advantage to using the resourceful style. 
```

基本上，在文件中使用 restful 资源为您`routes.rb`提供了直接从 ActiveRecord 对象创建 url 的“快捷方式”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-12T18:26:49.053

看一下[源码](https://apidock.com/rails/ActionController/Base/redirect_to)，`redirect_to`你会注意到最后，它会返回`redirect_to_full_url(url_for(options), status),`try to call the `url_for`function with a object，假设你有一个对象是@article，url_for( **@article** )，它会返回如下： “ [http://localhost:3000/articles/11](http://localhost:3000/articles/11) ”，这将是对该 URL 的新请求，然后在您的路由中，您还可以通过键入以下内容在控制台中检查路由：

> `rake routes`
> 
> `article GET /articles/:id(.:format) articles#show`

所以这就是为什么`redirect_to @article`要`SHOW`采取行动并渲染的原因`show.html.erb`。希望回答了你的问题。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-07T01:32:42.850

我建议阅读有关资源路由[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)的信息。

# gcc - 使用 Linux gcc，最好 的做法是两次编写链接组件以避免丢失 lib 包含

> ID：10475691
> 
> 赞同：0
> 
> 时间：2012-05-07T01:25:38.203
> 
> 标签：gcc, linker

这似乎是一个古老的问题。

想象一下，我们有一个名为 juggle 的可执行文件，它具有以下依赖项：

杂耍 → libfoo.a → libbar.a

然后，我们必须像这样编写链接命令：

```
g++ -o juggle juggle.cpp -lfoo -lbar 
```

但不是：

```
g++ -o juggle juggle.cpp -lbar -lfoo 
```

链接 .so（例如 libpickle.so）时也存在此问题。如果 lib list 编写不当，bar 的代码不会进入 pickle 但链接成功。只有当您尝试动态加载 libpickle.so 时，您才会意识到您错过了 bar。

这是一个过于简化的例子。在现实世界中，我经常面对如此多的库（许多来自我们自己的团队）来链接和记住库依赖顺序可能是一种负担。我说“负担”是因为有一些其他编译器（Visual C++）不会把这个负担放在我们身上。

所以，我认为最好总是写两次链接器组件，

```
g++ -o juggle juggle.cpp -lfoo -lbar -lfoo -lbar 
```

并且，当存在循环依赖时，这也有效。

有没有人和我有同样的想法，或者更好的解决方案？

编辑：我终于意识到仅仅两次编写链接器组件并不一定会使链接成功。假设依赖 A -> B -> C ，我们按照 CBA 的顺序列出库，我们必须写三遍 CBA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:35:00.667

另一种选择是使用链接器`--start-group`和`--end-group`选项来指定一组具有循环依赖关系的库。

[有关更多信息，请参阅此 SO 答案。](https://stackoverflow.com/questions/5651869/gcc-start-group-and-end-group-command-line-options)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:27:56.087

在您提出的替代方案中，更好的主意是以`-l`正确的顺序编写选项，以便按顺序解决依赖关系。只有在您具有*循环库依赖项*`-l`（您应该避免）的情况下，您才需要在选项中两次提及同一个库。

# vb.net - Visual Basic 检测 2 个 TextBox 中的图像大小

> ID：10475693
> 
> 赞同：0
> 
> 时间：2012-05-07T01:26:35.687
> 
> 标签：vb.net, image, detect, image-size

**我有**：1 OpenFileDialog、1 PictureBox、2 TextBox

这是我到目前为止所得到的，但我只是坚持如何让图像的宽度自动检测并将图像宽度（以像素为单位）放在 TextBox1 中，并将高度放在 TextBox2 中。

有谁知道如何做到这一点，或者我可以用它吗？

```
Public Class Form1
    Private sizew As Integer
    Private sizey As Integer

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage

        OpenFileDialog1.CheckFileExists = True
        OpenFileDialog1.ShowReadOnly = False
        OpenFileDialog1.Filter = "All Files|*.*|Bitmap |*.bmp;*.dib|JPEG |*.jpg;*.jpeg;*.jpe;*.jfif|TIFF |*.tif;*.tiff |PNG |*.png"
        OpenFileDialog1.FilterIndex = 1
        If OpenFileDialog1.ShowDialog = DialogResult.OK Then
            PictureBox1.Image = Image.FromFile(OpenFileDialog1.FileName)
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:21:37.073

以像素为单位的图像尺寸：

```
?pictureBox1.Image.Width 
526
?pictureBox1.Image.Height 
81 
```

图片框尺寸：

```
?pictureBox1.ClientSize.Width 
100
?pictureBox1.ClientSize.Height
50 
```

因此：

```
textBox1.Text = pictureBox1.Image.Width  
textBox2.Text = pictureBox1.Image.Height 
```

# css - 在我的 wordpress 上重复输入博客？怎么修？

> ID：10475695
> 
> 赞同：1
> 
> 时间：2012-05-07T01:27:06.970
> 
> 标签：css, wordpress

我对我的网站模板的 css 表的编码感到困惑。如果你去[www.ohepic.com](http://www.ohepic.com)你可以看到前十个条目的博客......然后下一次它也会与较旧的博客再次重复......

我怎样才能防止这种重复发生？有人可以帮我找出影响这个的 CSS 表吗？我该如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:32:04.703

创建一个类别，然后您可以尝试此代码。它可能会有所帮助

```
 <?php   
        $args=array(
          'cat' => ***,
          'post_type' => 'post',
          'post_status' => 'publish',
          'posts_per_page' => 10,
          'caller_get_posts'=> 1
          );
        $my_query = null;
        $my_query = new WP_Query($args);
        if( $my_query->have_posts() ) {
          echo 'List of Posts';
          while ($my_query->have_posts()) : $my_query->the_post(); ?>
          <p><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></p>
           <?php
          endwhile;
        }
    wp_reset_query();  // Restore global post data stomped by the_post().
    ?> 
```

注意：`***`是 Catagory_id

# objective-c - NS结构等效？

> ID：10475700
> 
> 赞同：1
> 
> 时间：2012-05-07T01:27:39.620
> 
> 标签：objective-c

我想通过来自不同类的几个方法传输特定容器的数组/ NSArray。在 C++ 中，我会使用结构向量之类的东西。

容器可以用这样的结构表示：

```
struct test
{
    NSString * a;
    NSString * b;
    NSNumber * c;
} 
```

容器基本上需要保存一些字符串和数字。

在Objective C中使用结构是否有替代方法？是否有其他一些“容器”可以用来发送数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:32:28.050

我建议创建一个简单的对象，如下所示（在我的浏览器中编译）：

```
@interface Container : NSObject {
    NSString* a;
    NSString* b;
    NSString* c;
}

@property (retain) NSString* a;
@property (retain) NSString* b;
@property (retain) NSString* c;

@end

@implementation Container

@synthesize a, b, c;

- (void) dealloc {
    [a release];
    [b release];
    [c release];
    [super release];
}
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:31:10.073

我认为这正是对象的目的（@interface），事实上，objective-c 类归根结底只是结构，苹果开发人员文档鼓励您创建类而不是使用结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:52:47.983

`NS(Mutable)Dictionary` can act as a generic container for such things, but it's usually better to create a class instead of using dictionaries that always have the same keys.

# api - Magento 中的 Paypal Payments 高级问题

> ID：10475704
> 
> 赞同：0
> 
> 时间：2012-05-07T01:28:01.180
> 
> 标签：api, magento, shopping-cart, paypal

我将 Paypal Payments Advanced 用于我的 Magento 购物车。我发现一位来自加拿大的客户的信用卡不断被拒绝。我直接与客户交谈并进行了以下测试：

1.  转到我的 Paypal Manager 中的虚拟终端来测试授权，它也不起作用。虚拟终端的单一交易测试给出错误：结果代码：12 响应消息：拒绝：15005-无法处理此交易。

2.  我在我的 Paypal 帐户中发送了一张 2 美元的发票，但这也不起作用。

3.  然后客户使用其他地方的信用卡，它工作得很好。然后客户又给了我一张卡，测试又失败了。

我的美国客户做得很好。只有加拿大银行！

有人可以告诉我有什么问题吗？我怀疑我必须在 Paypal Manager > 服务设置 > 设置中打开“启用安全令牌”。我的购物车网站还没有 SSL（因为我认为不需要，因为 Paypal Payments Advanced 只是一个 iframe）。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:48:37.460

这是来自 PayPal 的 Sue。我不确定这里发生了什么，但您知道您有 PayPal Payments Advanced 的免费技术支持吗？您可以在 www.paypal.com/mts 输入您的问题。或者，如果您在 manager.paypal.com 登录您的帐户，然后单击右上角的支持，您将找到电话支持号码。

此外，您绝对应该将 Secure Token 设置为 Yes，但我认为这与您上面描述的内容无关。

# java - 覆盖逻辑：初学者

> ID：10475708
> 
> 赞同：0
> 
> 时间：2012-05-07T01:29:32.070
> 
> 标签：java, oop, overriding

我对压倒一切有疑问。

```
class base{
public void amethod(){}
}
class child extends base{
public void amethod(int i){}} 
```

在这种情况下会发生什么？这些方法是否被认为是 2 个不同的方法？或者它是否仍然被覆盖？请澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T01:31:08.280

这不是压倒一切，而是[重载](http://en.wikipedia.org/wiki/Function_overloading)，并且这两者彼此无关。

看看[Java教程](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)：

> 重载的方法通过传递给方法的参数的数量和类型来区分。在代码示例中，draw(String s) 和 draw(int i) 是不同且独特的方法，因为它们需要不同的参数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T18:05:26.400

*覆盖是两个方法具有相同的名称和相同的返回类型，但不同的参数和覆盖意味着两个方法具有相同的名称、相同的参数、相同的返回类型但在两个方法中的主体必须不同*

```
 public void amethod()
    public void amethod(int i) 
```

*我想你明白这是**重载**而不是**压倒一切**......*

# javascript - 使用 jQuery 按类选择子 div

> ID：10475710
> 
> 赞同：0
> 
> 时间：2012-05-07T01:29:44.090
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试使用 Javascript/jQuery 创建一个记忆游戏。基本上，每个游戏开始时都会生成一个随机数组，用户的任务是匹配一组字母。我无法从数组中选择单个字母。

[这是](http://jsfiddle.net/hj8tm/)jsfiddle 上一个工作示例的链接，但相关部分如下：

这是插入数组的html：

```
<div id="game"></div> 
```

现在，我只是想实现一个改变字母背景颜色的悬停功能。这是CSS：

```
.hover
{
  background-color: #A6977B;
} 
```

这是生成数组的 Javascript：

```
function generateBoxes(gameSize, lettersSize) { 
  var currentLetter;
  letters = randomizeArray(lettersSize);
  rows = gameSize/columns; 
  for (var i=0; i<rows; i++) {
    var row = $("<div class='row'></div>");
    $("#game").append(row);
    for (var n=0; n<columns; n++) {
      currentLetter = letters[5*i + n];
      row.append("<div class='column displayNone' id = 'r" + i + "c" + n + "'>" + currentLetter + "</div>");
    }
  }

}; 
```

这是悬停功能的Javascript：

```
 $("#game").hover(function() {
    $(this).toggleClass("hover");
  }); 
```

这个悬停函数的 Javascript 代码用于选择数组中的所有字母。但是，我只想一次选择一个。我尝试替换`#game`为：

*   `#game div`
*   `#game .row .column`
*   `.column`

这些选项都不能只选择一个字母（事实上，当我使用除了 just 之外`#game`的任何东西时，根本不会调用悬停函数）。

在这里按类选择子 div 的正确方法是什么？

编辑：这是生成的html：

```
<div id="game"> 
  <div class="row">
    <div class="column displayNone" id="r0c0">E</div>
    <div class="column displayNone" id="r0c1">D</div>
    <div class="column displayNone" id="r0c2">E</div>
    <div class="column displayNone" id="r0c3">D</div>
    <div class="column displayNone" id="r0c4">B</div>
  </div>
  <div class="row">
    <div class="column displayNone" id="r1c0">A</div>
    <div class="column displayNone" id="r1c1">C</div>
    <div class="column displayNone" id="r1c2">C</div>
    <div class="column displayNone" id="r1c3">A</div>
    <div class="column displayNone" id="r1c4">B</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:55:16.137

有两种方法可以做到这一点：

(1) 所有 CSS

```
div#game div:hover {
  background-color: #A6977B;
} 
```

(2) 使用jQuery

```
$('#game div').hover(function(){
  $('#game div').removeClass('hover');
  $(this).addClass('hover');
  return false;
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:44:41.743

由于您正在动态生成字母 div，因此您需要使用 jQuery 的 .on() 函数将 mouseenter 和 mouseleave 事件绑定到 div。尝试这个：

```
$('#game').on('mouseenter', 'div.column', function() {
    $(this).toggleClass("hover")
}).on('mouseleave', 'div.column', function() {
    $(this).toggleClass("hover")
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:43:53.273

您可以使用伪类并在 ID 上进行选择：

```
$("#game").find("div[id=r0c0]") 
```

# mysql - 将 Google Fusion Table 与 MySql DB 同步

> ID：10475711
> 
> 赞同：2
> 
> 时间：2012-05-07T01:29:54.097
> 
> 标签：mysql, google-fusion-tables

所以......我一直在环顾四周，找不到任何方法来实现这一点，所以我想我会在这里尝试。我正在寻找一种方法来动态“同步”/更新谷歌融合表，其中存储在 MySQL 数据库中的数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:35:29.703

融合表确实没有预制同步解决方案：它有点奇怪的用例，所以你可能需要自己设置它。[SQL API 示例](https://developers.google.com/fusiontables/docs/sample_code#sql)涵盖了您需要执行插入/更新/删除的位：但您需要自己执行同步逻辑。

# javascript - 如何使用 jQuery 从选择列表中删除选项？

> ID：10475712
> 
> 赞同：1
> 
> 时间：2012-05-07T01:30:02.450
> 
> 标签：javascript, jquery, javascript-events

我有以下内容：

```
<select name="CityID" id="CityID">
  <option value="99">Select City</option>
  <option value="01H">AAA</option>
   <option value="01I">BBB</option>
</select> 
```

一旦单击 select 以选择一个选项，我想删除第一行 option `value="99"`。

我可以用 jQuery 做到这一点吗？我想我可以用这个`.changed()`事件来做到这一点，但是还有其他事件可以让用户点击之前的选择`.changed()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:31:21.600

```
$('select[name="CityID"]').focus(function() {
    $('option[value="99"]:first', this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:21:45.377

布莱恩的答案是正确的；但这里有一个可能与每个浏览器都不兼容的替代方案：

```
<select name="CityID" id="CityID" required>
  <option value="" disabled selected >Select City</option>
  <option value="01H">AAA</option>
   <option value="01I">BBB</option>
</select> 
```

[http://jsfiddle.net/ApeHg/2/](http://jsfiddle.net/ApeHg/2/)

select 元素上的`required`html5，但它强制用户在提交表单之前选择一个元素（您也可以为旧浏览器重新创建此行为）

第`disabled selected`一个元素上的属性试图模拟您正在寻找的行为，这是一个不可选择的默认值。

# mysql - Magento 1.6.2 -> 1.7 升级导致价格指数损坏

> ID：10475713
> 
> 赞同：2
> 
> 时间：2012-05-07T01:30:24.287
> 
> 标签：mysql, magento

我已经将 magento 从 1.6.2 更新到 1.7，一切都很顺利，显然该网站运行良好。但是我无法重新定义产品价格，看起来其中一张表缺少列。我已经尝试了我得到的 shell 工具：

```
Product Prices index process unknown error:
exception 'PDOException' with message 'SQLSTATE[21S01]: Insert value list does not match column list: 1136 Column count doesn't match value count at row 1' in /home/thelittl/public_html/asia/lib/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 /home/thelittl/public_html/asia/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /home/thelittl/public_html/asia/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /home/thelittl/public_html/asia/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /home/thelittl/public_html/asia/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /home/thelittl/public_html/asia/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('INSERT INTO `ca...', Array)
#5 /home/thelittl/public_html/asia/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `ca...', Array)
#6 /home/thelittl/public_html/asia/app/code/community/Brim/Groupedoptions/Model/Resource/Eav/Mysql4/Product/Indexer/Price/Grouped.php(76): Varien_Db_Adapter_Pdo_Mysql->query('INSERT INTO `ca...')
#7 /home/thelittl/public_html/asia/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Price/Grouped.php(48): Brim_Groupedoptions_Model_Resource_Eav_Mysql4_Product_Indexer_Price_Grouped->_prepareGroupedProductPriceData()
#8 /home/thelittl/public_html/asia/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Price.php(385): Mage_Catalog_Model_Resource_Product_Indexer_Price_Grouped->reindexAll()
#9 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Indexer/Abstract.php(143): Mage_Catalog_Model_Resource_Product_Indexer_Price->reindexAll()
#10 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Process.php(209): Mage_Index_Model_Indexer_Abstract->reindexAll()
#11 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll()
#12 /home/thelittl/public_html/asia/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#13 /home/thelittl/public_html/asia/shell/indexer.php(198): Mage_Shell_Compiler->run()
#14 {main}

Next exception 'Zend_Db_Statement_Exception' with message 'SQLSTATE[21S01]: Insert value list does not match column list: 1136 Column count doesn't match value count at row 1' in /home/thelittl/public_html/asia/lib/Zend/Db/Statement/Pdo.php:234
Stack trace:
#0 /home/thelittl/public_html/asia/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /home/thelittl/public_html/asia/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /home/thelittl/public_html/asia/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /home/thelittl/public_html/asia/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('INSERT INTO `ca...', Array)
#4 /home/thelittl/public_html/asia/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `ca...', Array)
#5 /home/thelittl/public_html/asia/app/code/community/Brim/Groupedoptions/Model/Resource/Eav/Mysql4/Product/Indexer/Price/Grouped.php(76): Varien_Db_Adapter_Pdo_Mysql->query('INSERT INTO `ca...')
#6 /home/thelittl/public_html/asia/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Price/Grouped.php(48): Brim_Groupedoptions_Model_Resource_Eav_Mysql4_Product_Indexer_Price_Grouped->_prepareGroupedProductPriceData()
#7 /home/thelittl/public_html/asia/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Price.php(385): Mage_Catalog_Model_Resource_Product_Indexer_Price_Grouped->reindexAll()
#8 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Indexer/Abstract.php(143): Mage_Catalog_Model_Resource_Product_Indexer_Price->reindexAll()
#9 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Process.php(209): Mage_Index_Model_Indexer_Abstract->reindexAll()
#10 /home/thelittl/public_html/asia/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll()
#11 /home/thelittl/public_html/asia/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#12 /home/thelittl/public_html/asia/shell/indexer.php(198): Mage_Shell_Compiler->run()
#13 {main} 
```

无法判断这对网站有何影响，如果它以某种方式影响它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T01:41:41.447

这可能不是缺少列的问题。这种 `Insert value list does not match column list`情况最常发生在有人向数据库抽象层传递一个字符串时，它需要一个数组，或者一个数组，当它需要一个字符串时。

看起来有人，（也许你）在

```
Brim_Groupedoptions 
```

模块。我的猜测是对索引过程中使用的资源模型之一进行类重写。检查 app/code/community/Brim/Groupedoptions/Model/Resource/Eav/Mysql4/Product/Indexer/Price/Grouped.php 中的查询

在线`76`传递正确数量的列和/或正确使用资源模型方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T01:43:27.473

感谢您的回答，我调试了查询并发现了我的问题，也许它可以帮助其他人。我变了：

**app/code/community/Brim/Groupedoptions/Model/Resource/Eav/Mysql4/Product/Indexer/Price/Grouped.php**

在第 55 行附近，为未考虑的列添加另一个参数：

```
'group_price'  => new Zend_Db_Expr('NULL') 
```

并做了！

# java - 进度条作为健康条

> ID：10475714
> 
> 赞同：2
> 
> 时间：2012-05-07T01:30:41.953
> 
> 标签：java, progress-bar, jprogressbar

> **可能重复：**
> [进度条用作健康条](https://stackoverflow.com/questions/10468267/progress-bar-used-as-health-bar)

参考：[进度条用作生命条](https://stackoverflow.com/questions/10468267/progress-bar-used-as-health-bar)

当我阅读 JProgressBar api 时，它将最大值显示为任务的结束。我希望最大值是玩家的健康，例如 90/100。我怎么能做到这一点？

基本上，当玩家的生命值为 90 时，我希望栏显示 90/100。

我试过：

```
JProgressBar health = new JProgressBar(0, 50);
health.setStringPainted(true);
health.setForeground(Color.GREEN);
// ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:52:31.023

设定值就是您要寻找的。我写了一些代码，但在我的手机上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:11:40.083

您可以使用 setString 方法定义自己的字符串以显示在栏中。

您可以使用 setValue 方法在进度监视器中设置值。

根据可能的健康值范围和当前值，制作一个显示百分比的字符串应该很简单。

如果你想反转左右方向，并且api不允许你让从左到右下降，你可以让进度值= TotalPossibleHealth - ActualHealth，而不是ActualHealth。

因此，应该可以将左侧或右侧作为完全健康或完全失去健康的指标。

# django - 我什么时候应该为 Django（或其他）使用 API 框架？

> ID：10475719
> 
> 赞同：1
> 
> 时间：2012-05-07T01:31:42.397
> 
> 标签：django, api, frameworks

这是一个相当广泛的问题，但我问它是因为我相信它可以用（至少）例子来回答。这也是一个似乎缺乏信息的话题。当我查找有关 Django 的 API 框架（例如 Tastypie 或其他）的信息时，我找不到有关我*为什么*要使用它的信息。他们只是简单地说明了它们相对于其他 API 框架的优势。

Tastypie 的 github 的自述文件指出：

```
You need an API that is RESTful and uses HTTP well. 
```

我吗？有人可以说服我吗？同样，我为什么要使用 API 框架？我应该设计我的 Web 应用程序以使用上述框架吗？它们有哪些用例？

请耐心等待问题的范围。我已经阅读了大量有关 REST 本身的内容，但同样，在设计 Web 应用程序以使用 RESTful API 或根本没有 API 时，我几乎找不到正确的做法。

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:34:43.287

如果您确实首先知道要设计什么，那么理想情况下，这种问题应该是不言自明的。我的意思不是简明扼要，而是说如果你的设计目标很明确，那么你应该知道什么时候 API 框架是有价值的。您误解了来自 sweetpie 文档的声明：“您需要一个 RESTful 并且很好地使用 HTTP 的 API。”。如果您看到，它是名为“Why Tastypie”的部分的一部分。它的意思是，如果您寻求的是一个很好地使用 HTTP 的 RESTful API，那么您需要美味派。他们并没有告诉你你确实需要这个。只是对于确实有这些需求的人来说，这是一个推荐的解决方案。

从一般的角度来看，假设您想为您的 django 项目创建一个 API。有不同的方式来设计你的 API，但是一个非常被接受的格式是 REST。这种模式使 URL 在读取、更新、创建和删除方面非常易于理解和预测。现在让我们假设您想使用这种流行且广为接受的 REST 模式创建您的 API...

创建 API 时，有一定数量的功能很常见，几乎是样板。您必须在 django 项目中查询模型并返回完整或子集的字段，甚至是该数据的自定义格式。这就是我们开始了解 API 框架的好处的地方......

让我向您提出这个问题……如果存在一个框架，该框架具有一组强大的功能，涵盖了 API 的最常见需求，您是否愿意从头开始编写所有代码？这与您选择使用 django 而不是编写自己的网站的原因几乎相同。

django 有两个非常流行的 API 框架：[taftypie](http://django-tastypie.readthedocs.org/en/latest/index.html)和[活塞](https://bitbucket.org/jespern/django-piston/wiki/Home)
，它们都提供了相似的功能，可以让你快速启动和运行。您可以创建一个映射到模型的处理程序类，默认情况下，您可以通过多种格式（json、yaml 等）对它进行完全 CRUD 访问。这两个框架都假设您通常希望围绕 django 模型绑定处理程序，尽管您不限于此。

身份验证：框架为您处理它几乎就像创建您要使用的类型的实例并将其分配给处理程序一样容易。

格式：（前面提到过）您的 api 可以自动处理多种数据格式，如 json、yaml、xml 等。

底线是框架可以消除不断重复此功能的繁琐任务。所有的辛苦工作都完成了。您只需要编写特定的处理函数并将它们映射到 url。准备好出发。

显然，如果您只需要一些简单的处理程序，您可以编写一些视图并手动处理您的请求对象和返回值。但是，当您想要创建更强大的 API 时，请节省时间并使用为您奠定基础的东西。

除此之外，只需查看美味派或活塞的教程，即可了解开始导出已绑定到模型的资源是多么容易。

# eclipse - Push 上不允许使用 git-receive-pack

> ID：10475726
> 
> 赞同：26
> 
> 时间：2012-05-07T01:33:07.170
> 
> 标签：eclipse, git, permissions, egit

我在 Eclipse 中使用 EGit，并尝试推送到 Github。我在本地进行了提交，然后尝试将其推送到上游。我收到了这个错误：

```
 Can't connect to any URI: https://github.com/Buroa/Konklex.git (An internal Exception occurred during push: https://github.com/Buroa/Konklex.git: git-receive-pack not permitted) 
```

我似乎找不到解决方法。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-23T21:39:30.530

我知道这是一个旧线程，但我今天挣扎了一个多小时，终于发现这是因为在我的 egit 推送对话框窗口中我使用了不同的用户 ID

一旦我输入了正确的 github 用户，对远程存储库的推送就顺利进行了。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-03-28T14:41:26.023

听起来可能很愚蠢：确保您确实有权推送到 repo。

在我的情况下，同事还没有给我的用户推送权限......

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-09T12:58:15.953

**只需在上下文菜单>团队>远程>配置推送到上游>更改中**检查“存储在安全存储中” 。****问题解决了** ：D**

 *** * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-01T18:39:03.730

有时您需要在 github 上验证您的帐户电子邮件

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-09-28T18:12:16.243

`git-receive-pack not permitted`相当于`username/password not recognized`

正如其他人发布的那样，您可能会因为许多不同的原因收到错误消息，包括：

*   你没有 Github 账号
*   您没有进行电子邮件验证以完成您在 Github 上的帐户
*   您的用户名没有对该存储库的推送权限（*例如*，您的用户名未列为贡献者）
*   您不小心使用了错误的用户名（替换为对该存储库没有推送权限的用户名）
*   你输入的密码错误
*   您使用了错误的协议进行推送（*例如*，您使用了 SSH 或 HTTPS，而只有其他协议可以接受）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-07T16:27:28.423

我在使用 eGit 和 AnypointStudio（使用**https**协议）时遇到了这个问题

解决方案-

1.  在相应的 Git 存储库设置中生成访问令牌，将此令牌保存在一边。

2.  转到 Git Repositories -> Your Project -> Remotes -> origin -> 右键单击​​ Push（红色箭头）并选择 Change Credentials。

在密码框和用户名中输入第一步生成的访问令牌，保存并尝试立即推送本地提交。

对我来说，它奏效了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-30T14:19:29.617

就我而言，我不得不接受 Github 上该组织的邀请。

最初，我试图推动我的更改并收到上述错误。

在我点击邀请信中的链接后，我的推送成功了。在您的收件箱中查找包含以下内容的电子邮件，然后单击链接加入：

> 嗨`<username>`，
> 
> `<other_username>`已邀请您加入`<org_name>`GitHub 上的组织。前往`https://<github_address>/<org_name>`查看`<org_name>`的个人资料。
> 
> 要加入`<org_name>`，请点击此链接：
> 
> `https://<github_address>/orgs/<org_name>/invitation?via_email=1`
> 
> 一些有用的提示：
> 
> *   如果您收到 404 页面，请确保您以`<username>`.
> *   您也可以通过直接访问组织页面来接受邀请：`https://<github_address>/<org_name>`
> 
> 如果您没有收到此邀请，可以忽略此电子邮件。
> 
> 谢谢，GitHub 团队

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-08-19T07:15:32.837

在 GitHub 的较新更新中，不允许应用程序直接访问您的帐户存储库。为了克服这个问题，您必须从“设置 > 开发人员 > 创建具有存储库权限的令牌”创建一个令牌，并在 Eclipse 或任何其他应用程序中使用它而不是您的密码。这将起作用。以上都是更新前的回答，不能解决问题。

有关更详细的指南，您可以参考此视频（不是我的）：[https ://www.youtube.com/watch?v=8x0ywtCOzxo](https://www.youtube.com/watch?v=8x0ywtCOzxo)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-08-14T18:40:53.520

在最新的 github 更新后，您无法使用密码访问。而是使用 2FA 或生成令牌并将其放在密码字段中。按照下面的链接。

[生成令牌](https://docs.github.com/en/rest/overview/other-authentication-methods#working-with-two-factor-authentication)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-08-16T13:23:39.247

我使用 PATs（个人访问令牌）解决了这个问题。您可以将 PAT 与用户名而不是密码结合使用。

遵循这个 github 指南： [https ://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token](https://%20https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)

在使用 GitHub API 或命令行时，个人访问令牌 (PAT) 是使用密码对 GitHub 进行身份验证的替代方法。

如果要使用 PAT 访问使用 SAML SSO 的组织所拥有的资源，则必须授权 PAT。有关更多信息，请参阅“关于使用 SAML 单点登录的身份验证”和“授权个人访问令牌以用于 SAML 单点登录”。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-05T11:23:09.447

对于想知道如何为 Bitbucket repo + eclipse IDE 解决此问题的人

转到`Preferences->Git`然后更改`Http Client`为`Java built-in HTTP`

这为我解决了这个问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-22T08:01:16.297

由于某些原因，egit 似乎不适用于 Wincred 凭据存储。你必须使用eclipse之一。

1.  打开*Git 存储库*透视图。
2.  打开*Remotes*节点并右键单击 origin（或您选择的遥控器）。
3.  单击*配置推送*然后*更改...*按钮

4.  填写*身份验证*部分

5.  进行试运行以进行测试

这应该够了吧。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-16T10:27:48.720

由于我的组织要求我们使用 SSH 密钥而不是用户名+密码，因此使其对我有用的方法是：

1.  在 Eclipse 中右键单击您的项目 --> 团队 --> 远程 --> 配置推送到上游
2.  在 URI 旁边单击“更改”
3.  选择协议 ssh
4.  在 Authentication --> User insert 下`git`（如果您在此处使用默认用户名，似乎 eclipse / git 会自动搜索您的 id_rsa 密钥文件 - 我尝试添加我的真实用户名，但从未奏效）
5.  完成并保存并推送

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-11T13:58:28.467

我在推送到 GitLab 存储库时遇到了这个错误，`username`我使用的没有权限推送到分支的存储库。

将权限级别从 更改`reporter`为`master`解决问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-15T12:02:28.057

如果您在使用 Git 时遇到 git-receive-pack not allowed 错误，很可能是您的配置问题。在我的情况下，我已经使用 https 克隆了存储库（这需要身份验证）。但是，推送失败并出现上述错误。这是因为我只被允许通过 SSH 推送。因此，一旦我更改了结帐配置中的协议，一切就又好了。

由于我使用 Eclipse（和 eGit），因此知道 Git 克隆项目的配置设置可以通过项目的上下文菜单（右键单击）并选择 Team、Remote 和“Configure Fetch”来访问可能会很方便从上游“或配置推送到上游”，如适用。

希望这可以帮助！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-04-10T13:42:59.813

就我而言，这是因为权限。我们做了一些从 gitlab 到 github 的迁移。我的同事从我正在处理的旧项目中创建了一个私人项目。完成后，我发现我无法推送并收到此错误。最后，我们发现是因为我没有被添加到这个项目的合作者中。我认为它应该自动完成，因为我已经是这个项目的贡献者之一。希望对有类似问题的人有所帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-13T08:00:56.597

当然，您的 git 用户 ID 和密码在配置上不匹配。请重新检查并确保您的凭据正确无误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-16T00:24:23.667

纠结了很久，终于找到了答案。在密码部分，我们不应该输入 GitHub 登录密码，而是必须输入个人访问令牌。以下链接显示了如何创建个人访问令牌：[https ://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access -令牌](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-05-18T07:51:27.643

转到 Bitbucket - 个人设置 - 访问管理 - 应用密码 - 点击“创建应用密码”按钮

在“标签”字段中提供任何名称

选中权限部分中的所有复选框

点击“创建”按钮

将生成密码。复制此密码并将其保存到任何本地文本文件中。

转到凭据管理器 - Windows 凭据管理器

删除保存的 Bitbucket 登录。

现在转到 Eclipse 并尝试再次提交和推送

当提示输入密码时，提供复制的生成应用密码。

现在提交和推送应该是成功的，没有 git-receive.-pack not allowed 错误。

[在此处输入图像描述](https://i.stack.imgur.com/4OkPY.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-03-16T09:06:33.977

另一个问题可能是您在为 Github 创建个人访问令牌时没有选中所有必要的复选框。

在我的情况下，这是我的错误，通过创建一个新的令牌，在创建个人访问令牌时检查所有权限/复选框，它工作正常。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-08-20T17:38:17.020

# 尝试这个

此错误是因为升级。所以你需要去

> 设置 > 开发人员设置 > 个人访问令牌 > 生成令牌

1.  选择第一个选项并单击生成
2.  使用这个生成的令牌作为 git 的密码

[https://www.youtube.com/watch?v=rLEYw1caoBQ](https://www.youtube.com/watch?v=rLEYw1caoBQ)

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2020-07-07T09:41:14.123

非常基本，但它发生在我身上：***我没有验证我的电子邮件***。检查您的电子邮件，按“验证电子邮件”按钮，然后再次尝试推送。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2021-07-28T08:00:34.160

使用 GitHub 中的最新更改，请尝试此链接。现在，您需要将令牌作为密码传递，而不是实际密码。

参考 - [https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2021-05-13T06:44:00.603

简单的答案是 - 您没有尝试推送的 repo 的写入权限。**

# python - 列表中的 Django 自动填充表单

> ID：10475727
> 
> 赞同：2
> 
> 时间：2012-05-07T01:33:10.073
> 
> 标签：python, django, forms, django-forms

您好，提前谢谢您，

我正在尝试创建一个 django 表单，我可以在其中从现有列表中选择一个值。我希望在用户键入他的选择时自动填充字段。

有人可以指点我一个教程，或者如何，或者其他一些关于如何做到这一点的信息吗？

谢谢，

dp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:20:20.263

要学习如何使用 JQuery 从头开始​​执行此操作，请参见[此处](http://readncode.com/blog/AJAX-Autocomplete-Search-with-Django-and-jQuery/)

为了让您的生活更轻松并使这些东西自动化，请参阅[django-ajax-selects](https://github.com/crucialfelix/django-ajax-selects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:27:03.713

查看这个库：[https ://github.com/theatlantic/django-chosen](https://github.com/theatlantic/django-chosen)

# security - 加盐密码过时了吗？

> ID：10475732
> 
> 赞同：0
> 
> 时间：2012-05-07T01:34:30.027
> 
> 标签：security

我听说现在没有人使用 Rainbow 表，而是使用 GPU，因此您应该依赖计算量大的哈希函数。这是真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T01:38:01.833

*由于*设计合理的系统开始对密码进行加盐处理，彩虹表变得不再是可行的攻击媒介。使用计算量大的散列是对抗其他类型攻击的一个很好的对策，但并不意味着加盐密码已经过时。

# xna - 将 3D 矢量投影到 2D 屏幕坐标

> ID：10475735
> 
> 赞同：2
> 
> 时间：2012-05-07T01:34:52.710
> 
> 标签：xna, 3d, 2d, project, vertex

我正在使用 XNA 4.0 并尝试获取 Vector3 并将其转换为 Vector2，它表示其在屏幕上的坐标。我知道您可以使用 Viewport.Project，这给了我完美的结果，但我需要制定自己的方法来做到这一点。我必须在 CPU 而不是 GPU 上将每个顶点转换为每帧的 2D 坐标。使用提供的 Project 方法比我想要的要慢一些。它也返回一个“z”值，我什至不会使用它。我只想以最简单的方式返回 (x, y) 。

到目前为止，这是我想出的，它给出了几乎正确的结果。但还没有到

```
 private Vector2 ScreenCoords(Vector3 v)
    {
        return new Vector2(
            viewProj.M11 * v.X + viewProj.M21 * v.Y + viewProj.M31 * v.Z + viewProj.M41,
            viewProj.M12 * v.X + viewProj.M22 * v.Y + viewProj.M32 * v.Z + viewProj.M42);
    } 
```

viewProj 只是 (viewMatrix * ProjectionMatrix)

屏幕中心的一个顶点似乎总是以 (0, 0) 的形式返回，但是当顶点更改屏幕坐标（当我移动相机时）时，我得到的结果有点混乱当顶点向左移动时，我投影的 X结果减少，并且随着顶点向下移动，我的投影结果的 Y 增加。所以至少我有这个权利，但他们改变的速度是不正确或一致的。

编辑：这是它的完成方式，可能是最快的方式（请注意，这将返回范围 [-1, 1] 中的坐标）

```
 private Vector2 ScreenCoords(Vector3 v) 
    {
        float 
            w = viewProj.M14 * v.X + viewProj.M24 * v.Y + viewProj.M34 * v.Z + viewProj.M44;
        return new Vector2(
            (viewProj.M11 * v.X + viewProj.M21 * v.Y + viewProj.M31 * v.Z + viewProj.M41) / w,
            (viewProj.M12 * v.X + viewProj.M22 * v.Y + viewProj.M32 * v.Z + viewProj.M42) / w);          
    } 
```

这是使用 Viewport.Project 获取 2D 坐标的比较 -使用 Project 的 FPS - 使用 ScreenCoords
的 81 FPS - 没有任何一个的 143 FPS - 152 所以我会向其他每帧进行大量投影的人推荐这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:08:08.420

你应该意识到透视投影需要齐次坐标，你应该划分

由 homegeneus 因子 W 组成的分量。

这是数学：

```
Vector4 position = new Vector4(pos3, 1);
Vector4.Transform(ref position, ref worldViewProjection, out position);
position /= position.W; 
```

您也可以在这里找到更多信息： [http ://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection](http://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection)

# .htaccess - 将 Apache .htaccess 翻译成 Lighttpd 和 mod_headers

> ID：10475745
> 
> 赞同：4
> 
> 时间：2012-05-07T01:37:27.097
> 
> 标签：.htaccess, lighttpd, mod-access

我已经开始使用 Lighttpd，并且我有这个`.htaccess`文件可以更改响应标头。

```
<IfModule mod_headers.c>
    Header unset Content-Type
    Header unset Content-Disposition
    Header set Content-Disposition attachment
    Header set Content-Type application/octet-stream
    Header add Content-Type application/force-download
    Header add Content-Type application/download
    Header unset Content-Transfer-Encoding
    Header set Content-Transfer-Encoding binary
</IfModule> 
```

我怎样才能把它翻译成在 Lighttpd 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:13:35.687

您将需要使用以下内容：

```
setenv.add-response-header = ( "Content-Disposition" => "attachment" )
setenv.add-response-header = ( "Content-Type" => "application/octet-stream" )
setenv.add-response-header = ( "Content-Transfer-Encoding" => "binary" ) 
```

我想您是在尝试强制下载文件，而不是在浏览器中显示文件？如果是这种情况，您只需要根据 RFC 2046 ( [https://www.rfc-editor.org/rfc/rfc2046](https://www.rfc-editor.org/rfc/rfc2046) )的 application/octet-stream MIME-Type

'对于接收“应用程序/八位字节流”实体的实现，推荐的操作是简单地将数据放入文件中，取消任何内容传输编码，或者将其用作用户的输入-指定的过程。

# html - 在网页上显示链接的 Internet Explorer 兼容性问题

> ID：10475746
> 
> 赞同：1
> 
> 时间：2012-05-07T01:37:32.433
> 
> 标签：html, css, internet-explorer

在我的网站上，我在右侧的 Google 地图下方有一个链接，名为“查看更大的地图”。这个链接只是打开了一个更大版本的谷歌地图。

理想情况下，我希望此链接位于左侧或右侧的小地图下方。在 Chrome 和 Firefox 中，我做得很完美（在地图图像下方的左侧）。在 IE 9 中，它会在地图图像的页面左上角向上移动。我整晚都在尝试让它在所有浏览器中位于左侧或右侧的地图图像下方，但是当我设法让它在 IE 中工作时，它在 Chrome 和 FF 中被破坏了。我现在很沮丧，只能寻求帮助。

有问题的网站页面在线：http: [//stage.boarsheadgolfcentre.co.uk/Home/Contact](http://stage.boarsheadgolfcentre.co.uk/Home/Contact)

目前它在 Chrome 中完全按照我想要的方式设置，但 IE 显示不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:44:51.887

设置`div`包含地图和要包含的文本`width: 350px`。

```
<div style="float: right; margin-top: -50px; width: 350px">
    <p>
        ...
    </p>
</div> 
```

# c++ - C++ 代码在 g++ 和 vs2008 中得到不同的结果

> ID：10475751
> 
> 赞同：4
> 
> 时间：2012-05-07T01:38:13.880
> 
> 标签：c++

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

struct Exmpl{
    Exmpl()
    {
        cout << "Exmpl()" << endl;
    }

    Exmpl(const Exmpl&)
    {
        cout << "Exmpl(const Exmpl&)" << endl;
    }

    Exmpl& operator=(const Exmpl& rhs)
    {
        cout << "operator=Exmpl()" << endl;
        return *this;
    }

    ~Exmpl()
   {
        cout << "~Exmpl()" << endl;
   }
};

void func1(Exmpl obj)
{
}

void func2(Exmpl &obj)
{
}

Exmpl func3()
{
    Exmpl obj;
    return obj;
}

int main()
{
    Exmpl eobj;
    func1(eobj);
    func2(eobj);
    eobj = func3();
    Exmpl *p = new Exmpl;
    vector<Exmpl> evec(3);

    delete p;
    return 0;
} 
```

在 g++(4.4.3) 中编译时，我得到了

```
Exmpl()
Exmpl(const Exmpl&)
~Exmpl()
Exmpl()
operator=(const Exmpl&)
~Exmpl()
Exmpl()
Exmpl()
Exmpl(const Exmpl&)
Exmpl(const Exmpl&)
Exmpl(const Exmpl&)
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl() 
```

而在vs2008中，结果是：

```
Exmpl()
Exmpl(const Exmpl&)
~Exmpl()
Exmpl()
Exmpl(const Exmpl&)
~Exmpl() 
operator=(const Exmpl&)
~Exmpl()
Exmpl()
Exmpl()
Exmpl(const Exmpl&)
Exmpl(const Exmpl&)
Exmpl(const Exmpl&)
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl()
~Exmpl() 
```

当代码转到“eobj = func3();”时 主要是在g++中找不到vs2008结果中的第5行和第6行。我尝试了几个级别的优化，但结果是一样的。差异的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T05:09:23.500

当对象作为值从函数返回时，C++ 允许省略复制构造函数（如在 中`func3()`）。即使构造函数除了构造新对象之外还有副作用——在这种情况下，复制构造函数会写入`cout`.

`g++`即使没有指定优化，它也会这样做，而 MSVC 只有在您要求执行优化时才会这样做。

如果您将程序简化为以下内容（只是将输出减少到有趣的部分）：

```
int main()
{
    Exmpl eobj;
    eobj = func3();

    return 0;
} 
```

对于使用这些命令行生成的程序，您将看到以下内容（使用 MinGW 4.6.1 和 MSVC 16.0 完成的测试，也称为 VC++ 2010）：

*   `g++ -O0 -o test.exe test.cpp`（g++，“不”优化）
*   `g++ -O2 -o test.exe test.cpp`（g++，优化）
*   `cl /Ox /EHsc test.cpp` （msvc，优化）

    ```
    Exmpl()
    Exmpl()
    operator=Exmpl()
    ~Exmpl()
    ~Exmpl() 
    ```

*   `cl /EHsc test.cpp` （msvc，没有优化）

*   `g++ -fno-elide-constructors -o test.exe test.cpp` （如 Jesse Good 所建议的，没有省略构造函数的 g++）

    ```
    Exmpl()
    Exmpl()
    Exmpl(const Exmpl&)
    ~Exmpl()
    operator=Exmpl()
    ~Exmpl()
    ~Exmpl() 
    ```

# jquery - WCF：使用 JSONP 将来源列入白名单

> ID：10475752
> 
> 赞同：2
> 
> 时间：2012-05-07T01:38:17.330
> 
> 标签：jquery, asp.net, wcf, jsonp, same-origin-policy

同源策略的缺点之一是它不支持不同的端口或子域。因此，如果您将服务托管在诸如 services.site.com 之类的子域上，则您无法在不使用 JSONP 的情况下从 www.site.com 调用该服务。

有没有办法将您的 WCF 服务配置为仅接受来自特定来源的请求？

例子：

```
$(document).ready(function () {
    $("#Button").click(function () {
        $.getJSON("http://services.site.com/service.svc/myService?callback=?", function (data) {
            var jObj = $.parseJSON(data);
            $("#Result").html(jObj.MyValue);
        });
    });
}); 
```

如果这是从 www.site.com 调用的，我希望它能够工作。但是，如果像 www.example.com 这样的另一个站点调用它，我希望 WCF 服务阻止它。

我尝试将 web.config 文件配置为：

```
<identity>
  <dns value="www.example.com"/>
</identity> 
```

但是当我尝试从 www.site.com 拨打电话时，它仍然可以正常工作。我相信这是因为我将 crossDomainScriptAccessEnabled 设置为 true 以便 JSONP 返回正确的回调值。现在只与 WCF 合作了几天。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:56:47.987

身份用于向客户端标识服务，因此不会帮助阻止对服务的调用。

如果这是一项免费服务，那么无论客户端来自何处，都不需要对客户端进行身份验证和授权。

另一方面，如果您想保护服务，那么无论呼叫来源如何，您都需要对服务的客户端进行身份验证/授权。关于这个主题有很多资源：

[适用于 .NET Framework 4 的 MSDN Windows Communication Foundation (WCF) 和 Windows Workflow Foundation (WF) 示例](http://www.microsoft.com/en-us/download/details.aspx?id=21459)

[SO 保护 WCF 服务](https://stackoverflow.com/questions/5828479/securing-wcf-services)

[MSDN WCF 安全资源](http://msdn.microsoft.com/en-us/library/ff647145.aspx)

[保护 WCF 服务：使用 ASP.NET 成员资格和角色提供程序](http://burcakcakiroglu.com/?p=2113)

[您可以尝试通过在您的方法调用中获取这样的远程端点或在庞大的WCF 可扩展性](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/14/wcf-extensibility.aspx)链中的某处拦截它来暴力获取客户端 IP（这将在**大多数情况下工作）：**

```
var messageProperty = OperationContext.Current.IncomingMessageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty; 
```

之后，您可以进行反向 dns 查找，但这可能并不总是有效（代理、NAT 等）

另一个要点，在 JSON 调用上使用 GET 会导致[JSON 劫持](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)

# c# - 指数超出范围。必须是非负数且小于集合的大小？？

> ID：10475755
> 
> 赞同：0
> 
> 时间：2012-05-07T01:38:39.690
> 
> 标签：c#, indexing, nunit

我这样做很简单，我得到了这个错误。当我将 TRUE 更改为 FALSE 时，它不会给出该错误，但测试是真正的错误......但我需要通过测试，但我不明白......有人可以帮忙吗？C# 视觉工作室 2010 NUnit

```
[Test]

public void prueba1()
{

    List<int> lista1 = new List<int>();

    lista1.Add(1);

    lista1.Add(2);

    lista1.Add(3);

    for (int i = 0; i < lista1.Count; i++)
    {

        Console.WriteLine(lista1[i]);
        Assert.True(lista1[i]<lista1[i+1]);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:40:39.857

列表中的有效索引是 0 到 2。`lista1.Count`将是 3，所以`i`从 0 到 2。当`i`是 2 时，您尝试访问`lista1[i+1]`超出范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:55:39.487

您的列表是 [1,2,3]

在每次迭代中，都会检查以下语句。
1 < 2
2 < 3
3 < ?

在 Assert.True 和 Assert.False 中，如果被检查的条件与函数调用不同，则会抛出 AssertFailedException 错误。（Assert.True 需要 True）

Assert.True(1 < 2) 有效，
Assert.True(2 < 3) 有效，Assert.True(3 < ?) - 将发生越界异常。

Assert.False(1 < 2) - 将发生 AssertFailedException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:41:34.820

`i+1`是错误的地方。更改。为什么？

您的索引应该从 0 开始，一直到 2，但最后一个索引出现错误，因为它尝试搜索`i + 1`索引，这意味着它正在搜索`lista1[3]`不存在的索引，因为索引从 0 开始，直到 1 小于集合的长度。

# google-app-engine - App Engine 日志记录：也可以记录每个请求的语句 - 如何获取日志数据？

> ID：10475756
> 
> 赞同：2
> 
> 时间：2012-05-07T01:39:09.843
> 
> 标签：google-app-engine

我们的应用程序做了一些相对复杂的事情，导致每个请求生成 50 到几千行日志语句。

我们最近超过了一个阈值——Web 控制台只是将请求日志数据截断到某个点之外。这不是什么大问题，除了下载日志内容有同样的问题。

（澄清）日志显示每个请求的日志数据，但不完全显示。我们可以看到请求 ABC 已处理，但 A 和 C 的日志详细信息在某个点之后被切断。

我们正在为额外的日志空间付费。

关于如何获得完整的日志数据转储的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:03:58.293

App Engine 实际上会在某个时间点后停止记录请求的日志。获取日志的唯一方法是减少日志，这样您仍然可以找到重要的内容。

# logic - 编写代码以枚举给定数量元素的所有可能排列

> ID：10475758
> 
> 赞同：2
> 
> 时间：2012-05-07T01:39:13.197
> 
> 标签：logic

这个问题不是关于代码的语法，而是实际上我应该如何去创建一个方法。

当程序启动时，您输入组合中开关数量的数字，每个组合包含多少个可以具有开/关值的开关。然后程序会遍历所有不同的组合并打印出它可能得出的数量。

我需要帮助的部分是 nextCombination 方法。截至目前，我正在使用随机生成的组合，这会导致较大数字的输出不准确且不一致。我想知道我将如何创建一个系统的方法来做到这一点。

这是我输入“2”的示例：

```
> Enter the length of the combination: 2
> FT
> FF
> TF
> TT
> Number of combinations: 4 
```

这是组合类：

```
public class Combination {

    private int number;

    private boolean[] values;

    public Combination(int number) {
        this.number = number;
        values = new boolean[number];
    }

    public Combination(boolean[] values) {
        this.number = values.length;
        this.values = values;
    }

    public void setValue(int i, boolean value) {
        values[i] = value;
    }

    @Override
    public boolean equals(Object o) {
        if (o instanceof Combination) {
            if (((Combination) o).number != number) {
                return false;
            }
            for (int i = 0; i < ((Combination) o).number; i++) {
                if (values[i] != ((Combination) o).values[i]) {
                    return false;
                }
            }
            return true;
        }
        return super.equals(o);
    }

    @Override
    public String toString() {
        String s = "";
        for (boolean b : values) {
            s = s + (b ? "T" : "F");
        }
        return s;
    }

} 
```

这是主类：

```
import java.util.ArrayList;
import java.util.Scanner;

public class Main {

    private final static int MAXIMUM_ATTEMPTS = 500;

    private static int attempts;

    private static int number;

    private static ArrayList<Combination> cache = new ArrayList<Combination>();

    private static Scanner myScanner = new Scanner(System.in);

    public static void main(String... s) {
        System.out.print("Enter the length of the combination: ");
        number = myScanner.nextInt();
        Combination combination = nextCombination();
        while (combination != null) {
            if (!hasCombinationBeenUsed(combination)) {
                cache.add(combination);
                System.out.println(combination);
            }
            combination = nextCombination();
        }
        System.out.println("Number of combinations: " + Integer.toString(cache.size()));
    }

    private static Combination nextCombination() {
        boolean[] values = new boolean[number];
        for (int i = 0; i < number; i++) {
            values[(int) (Math.random() * number)] = ((int) (Math.random() * (2))) == 1;
        }
        Combination combo = new Combination(values);
        if (!hasCombinationBeenUsed(combo)) {
            return combo;
        } else if (attempts < MAXIMUM_ATTEMPTS) {
            attempts++;
            return nextCombination();
        } else {
            return null;
        }
    }

    private static boolean hasCombinationBeenUsed(Combination combo) {
        for (Combination c : cache) {
            if (c.equals(combo)) {
                return true;
            }
        }
        return false;
    }

} 
```

对此的任何帮助表示赞赏，如果您可以使我的代码更好/更短/更高效，那么我也希望如此。谢谢 ：）

编辑：我只有 15 岁，所以我还没有上过学，所以不要太苛刻

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:53:11.087

看起来您已经准备好学习二进制算术了！将组合视为一系列 0 和 1，表示二进制数。`TFF`代表 4，`TFT`是 5，依此类推。然后提出下一个组合相当于增加值 - 就是这么简单！

借助用 Java、C、C++、C# 等实现的二进制操作，您将得到以下代码：

```
int size = 5;
for (int mask = 0 ; mask != (1 << size) ; mask++) {
    for (int i = size-1 ; i >= 0 ; i--) {
        System.out.print((mask & (1 << i)) == 0 ? 'F' : 'T');
    }
    System.out.println();
} 
```

阅读一[两页有关位操作](http://vipan.com/htdocs/bitwisehelp.html)的内容，然后[在 ideone](http://ideone.com/9Y6za)上使用此代码，看看它是如何工作的。我鼓励你与小数世界做一些比较，你会学到很多关于数字系统的知识！

# ruby-on-rails - 对不应该包括但......我认为的助手感到困惑

> ID：10475760
> 
> 赞同：0
> 
> 时间：2012-05-07T01:39:26.690
> 
> 标签：ruby-on-rails, ruby, views, helpers

我有一堆页面重复使用相同的元素，所以我创建了四个自动将这些元素放入的助手。

在`application.html.erb`所有这些助手中都呈现了，但我对如何制作不受助手影响的新页面感到困惑。

我尝试创建一个新的视图和控制器，并在该视图的子目录中构建页面，但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:04:39.440

`application.html.erb`是您所有视图的基本模板，因此您放入其中的任何内容都将在您的所有视图中呈现。如果要在视图上显示不同的内容，则需要在控制器中显式设置布局。

```
def some_method
  layout :some_other_layout_template
end 
```

有关更多信息，请查看[Rails 布局和渲染指南](http://guides.rubyonrails.org/layouts_and_rendering.html)。

# sitecore - Sitecore ECM 详细信息报告

> ID：10475762
> 
> 赞同：1
> 
> 时间：2012-05-07T01:39:29.873
> 
> 标签：sitecore, sitecore6, sitecore-dms, sitecore-ecm

我正在使用`Sitecore 6.5 ECM`我的电子邮件活动。

有很多错误..但不知何故我设法克服了它们。

现在，ECM 工作正常，它可以查看有`Engagement plan`多少，等等。`percentage``Sent``Message Opened``Message Unopened`

但是我的客户想要一份详细报告……比如，，，， `Sent`对于`Recipients`每封发送`Opened`的`Clicked`电子邮件。

![在此处输入图像描述](../Images/e82f4deec670e3aba47dc28c38322088.png)

所以，我想知道我应该采用哪种方法来获得以下报告。

我应该`EmailCampaign dll APIs`用来获取它们还是应该直接从 查询`database`？

我已经看过数据库了。并且表名不容易找到。

有没有人这样做过？我可以有一些片段来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:44:16.540

威廉 - 您是正确的，您希望从 ECM 获得的详细报告尚未完成，并且无法开箱即用。我知道这样的东西在某个时候会可用，但我不知道什么时候和现在，这就是你可以做的事情，因为我现在正在为客户做这件事。

基本上它是通过直接的 SQL 调用来完成的。EngagementAutomation dll 中有一个 api。但根据我的经验，方法签名采用的对象是尝试创建比自己构建 SQL 调用更痛苦的对象。而不是发布我的大量代码。我只会告诉你数据在哪里以及如何获取它。为分析提供了一个 SQL API，但我发现尝试创建它比我自己使用旧的 .net 和 sql 命令更令人困惑。

我的方法是创建类来获取信息，例如参与计划的 GUID 或消息本身的 GUID。分析数据库中有几个表可以跟踪这些数据。一个是跟踪参与计划和发送的特定电子邮件的自动化和自动化状态（发送的每封电子邮件在自动化状态表中都有一个条目，该表链接到自动化（这是参与计划）。自动化状态表非常关键，将显示发送电子邮件的 Sitecore 用户的实际用户名。

跟踪事情（点击和那种事情）有点欺骗。一切都在 Pages 表和 PageEvent 表中完成和跟踪。它跟踪打开和点击。打开是通过 RegisterEmailOpened url 跟踪的，并且必须在包含 Querystring 的 UrlText 字段中跟踪点击，您可以解析 EC_AS= 指向 AutomationStateID GUID 的该列。

还有更多内容，但这应该可以帮助您入门，并让您了解如何开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:27:43.330

I got some results..

just want to check with you whether they are correct?

I will get the `CampaignID` for the respective ECMs from `Campaigns` table.

Then I will get `AutomationID` for that `CampaignID` from `Automation` table..

After that, I will get the respective row from `AutomationStates` table by using the `AutomationID` that I got from `Automation` table.

The number of `Rows` that I get for each `AutomationID` is the number of emails that `ECM` sent.

And if the `VisitorID` is `NULL` that recipient hasn't opened the email.

If there is a value in `VisitorID`, that email can be counted as `Opened`.

For `Click through`, I thought I could use the `StateID` and `StateName` from `AutomationStates` table as I saw some old data of the `StateName` has value called `Unproductive Visitors`

But when I click through my newly sent `ECM`, that field doesn't change anything.

So, I am wondering whether I should user `Visits` table or `Pages` and `PagesEvents` table for `Click through`.

Please advise.

Thanks for your guidance.

# c# - 使用 enum 而不是 switch 来获取对应的类

> ID：10475763
> 
> 赞同：0
> 
> 时间：2012-05-07T01:40:05.477
> 
> 标签：c#, enums, switch-statement

我有两个类`classA`，`classB`它们都继承自`class1`.

现在我想发送一个像“A”这样的字符串，基于我应该实例化A类

我的老板让我使用`enum`而不是使用 switch case 来编写代码。

我该怎么写这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:44:36.423

我猜你的老板要求你在 switch 语句中使用枚举：

```
MyClassEnum classToCreate = MyClassEnum.ClassA;
switch(classToCreate)
{
    case MyClassEnum.ClassA:
        return new ClassA();
    case MyClassEnum.ClassB:
        return new ClassB();
} 
```

如果您包含执行测试和创建对象的代码部分，我们可能会提供更多指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:06:15.947

您可以创建一个查找工厂

```
_map = new Dictionary<Option, Func<Class1>>();

_map.Add(Option.A, () => new ClassA());
_map.Add(Option.B, () => new ClassB()); 
```

然后决心获得正确的课程

```
public Class1 Resolve(Option option)
{
   Func<Class1> result;
   if(_map.TryGetValue(option, out result))
      return result();
   else
      return null;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:47:41.173

尝试

```
public class Class1
{
    public enum class1: {classA, classB}
    public static Class1 Make(class1 which)
    {
        switch (which)
        {
             case classA: return new ClassA();
             case classB: return new ClassB();
             default: return null;
        }
    }
 }

 public class ClassA: Class1 {}
 public class ClassA: Class1 {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T02:44:41.930

如果您想避免切换，您可以始终保持某种查找，例如以下之一：

```
using System;
using System.Collections.Generic;

class Class1 { }

class ClassA : Class1 { }
class ClassB : Class1 { }

class Program
{
    private static readonly Dictionary<string, Type> _typeMap =
        new Dictionary<string, Type>
        {
            { "A", typeof(ClassA) }, 
            { "B", typeof(ClassB) }, 
        };

    private static readonly Dictionary<string, Func<Class1>> _funcMap =
        new Dictionary<string, Func<Class1>>
        {
            { "A", () => new ClassA() }, 
            { "B", () => new ClassB() }, 
        };

    Class1 CreateViaTypeMap(string typeName)
    {
        var type = _typeMap[typeName];
        return Activator.CreateInstance(type) as Class1;
    }

    Class1 CreateViaFuncMap(string typeName)
    {
        var func = _funcMap[typeName];
        return func();
    }
} 
```

# python - “对象没有属性'_state'”错误

> ID：10475764
> 
> 赞同：0
> 
> 时间：2012-05-07T01:40:36.440
> 
> 标签：python, django

我正在开发 Django 应用程序，但出现以下错误

```
'Category' object has no attribute '_state' 
```

我的模型是

```
class Blog(models.Model):
    BlogMeta = models.CharField(max_length=200)
    BlogTitle = models.CharField(max_length=100)
    BlogContent = models.TextField()
    BlogCategory = models.CharField(max_length=300)
    BlogTags = models.CharField(max_length=300)
    BlogDate = models.DateField()
    def __unicode__(self):
        return self.BlogTitle
    def save(self):
        self.BlogDate = datetime.datetime.now()
        Categorylist = re.findall(r'\w+',self.BlogCategory)
        TagList = re.findall(r'\w+', self.BlogTags)
        #Get already existing tags and category
        dbCategoryList = Category.objects.all()
        dbTagsList = Tags.objects.all()
        clisflag = False
        tlisflag = False
        #check if categories and tags in new blog exists previously or not.
        for clis in Categorylist:
            for dbclis in dbCategoryList:
                if (clis == dbclis.CategoryName):
                    clisflag = True
                    break
                else:
                    continue

            if not clisflag:
                createCategory = Category(clis)
                createCategory.save()
            clisflag = False

        for tlis in TagList:
            for dbtlis in dbTagsList:
                if(tlis == dbtlis.TagName):
                    tlisflag = True
                    break
                else:
                    continue
            if not tlisflag:
                createTag = Tags(tlis)
                createTag.save()
            tlisflag = False

class Tags(models.Model):
    TagName = models.CharField(max_length=20)
    TagDesc = models.TextField(null=True)
    def __unicode__(self):
        return self.TagName
    def __init__(self,name):
        self.TagName = name
        self.TagDesc = ""
class Category(models.Model):
    CategoryName = models.CharField(max_length=20)
    CategoryDesc = models.TextField(null=True)
    def __unicode__(self):
        return self.CategoryName
    def __init__(self, name):
        self.CategoryName = name
        self.CategoryDesc = "" 
```

在新的博客文章中，类别被视为逗号分隔值，如果遇到新类别，则将其添加到数据库中。标签也是如此。

我不清楚这`_state`件事，请您指出正确的方向。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:48:44.717

你没有跑`Model.__init__`。你*必须*这样做。

至少，你需要有一条像`super(Category, self).__init__()`inside这样的线`Category.__init__`。

在实践中，你有更重要的设计问题。你不应该在属性中包含类名；应该是`Category.name`，不是`Category.CategoryName`。`Category.__init__`应该使用关键字参数，而不是它自己的特殊参数。描述应该有`blank=True`而不是`null=True`. 你不需要`Category.__init__`。

这是您正在执行的操作的稍微整洁的版本：

```
class Blog(models.Model):
    meta = models.CharField(max_length=200)
    title = models.CharField(max_length=100)
    content = models.TextField()
    categories = models.CharField(max_length=300)
    tags = models.CharField(max_length=300)
    date = models.DateField()

    def __unicode__(self):
        return self.title

    def save(self):
        self.date = datetime.datetime.now()
        category_list = re.findall(r'\w+', self.categories)
        tag_list = re.findall(r'\w+', self.tags)
        #check if categories and tags in new blog exists previously or not.
        db_categories = Category.objects.all()
        for clis in category_list:
            for dbclis in db_categories:
                if clis == dbclis.name:
                    break
            else:
                new_category = Category(name=clis)
                new_category.save()

        db_tags = Tags.objects.all()
        for tlis in tag_list:
            for dbtlis in db_tags:
                if tlis == dbtlis.name:
                    break
            else:
                new_tag = Tags(name=tlis)
                new_tag.save()

class Tags(models.Model):
    name = models.CharField(max_length=20)
    desc = models.TextField(blank=True)
    def __unicode__(self):
        return self.name

class Category(models.Model):
    name = models.CharField(max_length=20)
    desc = models.TextField(blank=True)
    def __unicode__(self):
        return self.name 
```

不过，这仍然很丑陋。首先也是最重要的，`tags`and `category`（重命名为`categories`）应该是关系，而不是纯文本。

# couchbase - libcouchbase 的错误返回？

> ID：10475774
> 
> 赞同：0
> 
> 时间：2012-05-07T01:42:51.340
> 
> 标签：couchbase

我在处理错误时遇到问题

我对 libcouchbase 的现有错误代码感到好奇。

我需要确保调用的 API 在哪个环境下不起作用

追加、删除、获取、设置、添加、算术等。

确切的错误代码将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:41:48.677

错误代码可能在`<libcouchbase/types.h>`(这个文件是通过include自动包含的`<libcouchbase/couchbase.h>`，不能直接包含。

错误代码是不言自明的（不过有些可能更奇特）。

此外，您可以调用`libcouchbase_strerror(handle, errnum)`以获取错误的文本表示。

# javascript - 在 iFrame 问题中注入 HTML、CSS 和 JAVASCRIPT

> ID：10475775
> 
> 赞同：2
> 
> 时间：2012-05-07T01:42:52.213
> 
> 标签：javascript, jquery, html

我正在尝试构建类似于 Tinkerbin 或 JSfiddle 的东西。这是一个个人项目。

这是我现在得到的：

[http://mediodesign.ca/cms-test/](http://mediodesign.ca/cms-test/)

一切正常，除了 JAVASCRIPT 选项卡。我遵循了 Nettuts 上的“如何将自定义 HTML 和 CSS 注入 iframe”教程（http://net.tutsplus.com/tutorials/html-css-techniques/how-to-inject-custom-html-and-css -进入 iframe/）。

这是我修改后的 javascript 代码：

```
(function() {
$('.grid').height( $(window).height() );    

var contents = $('iframe').contents(),
    body = contents.find('body'),
    styleTag = $('<style></style>').appendTo(contents.find('head')),
    jsTag = $('<script><\/script>').appendTo(contents.find('head'));

$('textarea').keyup(function() {
    var $this = $(this);
    if ( $this.attr('id') === 'html') 
    {
    body.html( $this.val() );
    } 
    else
    {
    styleTag.text( $this.val() ), 
    jsTag.text( $this.val() );
    }

});  })  (); 
```

我添加了`jsTag = $('<script><\/script>').appendTo(contents.find('head'));`行和`jsTag.text( $this.val() );`.

我很确定这与该`jsTag = $('<script><\/script>')`部分有关。为什么正在`<style></style>`工作但`<script></script>`不是？

请帮我解决这个问题，我在过去 2 个小时里一直在解决这个问题！

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:02:09.987

我对 jQuery 不是很熟悉，所以我用纯 Javascript 制作了这个解决方案（稍后我会在 jQuery 中尝试）：

```
var contents = $('iframe').contents(),
    body = contents.find('body'),
    styleTag = $('<style></style>').appendTo(contents.find('head')),
    jsTag = document.createElement('script');
contents.find('head')[0].appendChild(jsTag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:21:30.730

除非您将脚本附加到代码中，否则您的脚本不会被评估，然后 jQuery 将获取并解析它。只注入一个空的脚本标签不会产生任何效果，因为 jQuery 并没有真正将它放入 DOM，而只是在运行时解析它。

# android - Android：在仪器测试用例中创建目录

> ID：10475777
> 
> 赞同：2
> 
> 时间：2012-05-07T01:43:27.347
> 
> 标签：android, unit-testing

我想在我的仪器测试用例中创建一个 tmp 目录。我试过 `this.getInstrumentation().getContext().getDir("tmp", 0)`了，但是在 data/data/package-name 目录下创建目录失败。我想，仪器测试包和普通包之间存在一些差异。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:21:21.353

假设您的应用程序项目有包名`com.example`，而您的测试项目有包名`com.example.test`。

```
// This will create app_tmp1 directory under data/data/com.example.test/
this.getInstrumentation().getContext().getDir("tmp1", 0);

// This will create app_tmp2 directory under data/data/com.example/
this.getInstrumentation().getTargetContext().getDir("tmp2", 0); 
```

希望这可以帮助。

# php - 处理数组计数值的输出

> ID：10475778
> 
> 赞同：0
> 
> 时间：2012-05-07T01:43:45.333
> 
> 标签：php

我有一系列类别。

Array_Count_Values 列出它们以及它们各自在数组中出现的次数。IE： `[Gas] => 1 [Electricity] => 4 [Car] => 3...`

本质上我想输出那个，但是处理字符串，让它说......

```
<a href=?cat=gas>gas</a>(1) ~ <a href=?cat=electricity>Electricity</a>(4) ~ ...etc 
```

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:53:21.550

我不确定我是否完全理解您的问题，但是您真正要问的一个解决方案是：

```
<?php

foreach ($Array_Count_Values as $item => $count)
{
   if ($count != 0)
        echo " ~ ";
   echo "<a href=\"?cat=$item>$item</a>($count)";
} 
```

# svn - 如何在颠覆中添加和忽略？

> ID：10475781
> 
> 赞同：0
> 
> 时间：2012-05-07T01:44:17.860
> 
> 标签：svn

例如，假设我有一个目录“项目”，但我想在添加目录时忽略与以下通配符“*.jpg”匹配的任何内容。我怎样才能做到这一点？

编辑：澄清我遇到了鸡和蛋的问题。在将目录添加到版本控制之前，我不能忽略文件。但是，一旦我添加了目录，它就会自动添加我希望忽略的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:42:25.917

查看 Subversion 配置文件。在 Unix/Mac/Linux 系统上，它是`$HOME/.subversion/config`. 在 Windows 中，它可以是不同的地方。通常它在 中`%USERPROFILE%\.subversion\config`，但我不能在每个系统上都保证它。某些 Subversion 客户端可能会将其放入注册表中。

在 Subversion 配置文件中，有一个`[miscellany]`. 往下走几行，就有一个`global-ignores`入口。任何与 glob 模式匹配的文件都不会通过递归`svn add`或`svn add`带有文件 globbing 模式而不是特定文件名的方式添加。此外，默认情况下，任何与 globbing 模式匹配的未添加文件都不会显示`svn status`。

请参阅Subversion 在线手册中的[此部分](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html#svn.advanced.confarea.opts.config)。看看关于`global-ignores`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:49:27.877

您需要编辑 svn:ignore 属性

```
> svn pe . svn:ignore 
```

这应该会打开您的默认文本编辑器。添加以下内容：-

```
*.jpg 
```

然后保存并提交。

有关更多详细信息，请参阅[文档](http://svnbook.red-bean.com/en/1.5/svn.advanced.props.special.ignore.html)。

# jquery - jQuery 可以选择匹配正则表达式的字符串吗？

> ID：10475789
> 
> 赞同：1
> 
> 时间：2012-05-07T01:44:53.780
> 
> 标签：jquery, jquery-selectors

我正在为初学者编写一个 HTTP 请求教程。我的代码如下所示：

```
import requests
r = requests.get('http://xxx.com/yy/zzz?a=1&b=2', auth=('1234', '5678'))
r.text 
```

我想使用 jQuery 动态选择 `?a=1&b=2~ 代码片段并突出显示它（因为这些值是动态的并且取决于用户输入的内容）。

有没有办法做一个匹配正则表达式的 jQuery 选择？

不幸的是，我无法将该区域包装在一个特殊的跨度中以这样选择它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:26:54.973

您可以通过使用包含代码示例的元素来实现这一点，我假设您已将其放入`<pre>`or`<code>`块中。然后，您可以抓取其中的所有 html 内容，并使用常规字符串替换来添加您可能需要的任何其他 HTML 元素。

这是[jsFiddle 示例](http://jsfiddle.net/jonypawks/6zWdz/)，其中包含您在标记中提供的`<pre>`代码，并在查询字符串周围添加了一个跨度。

# r - 获取格子条形图函数中分组条形的中点值

> ID：10475790
> 
> 赞同：7
> 
> 时间：2012-05-07T01:45:01.113
> 
> 标签：r, lattice

我试图弄清楚如何确定分组条的中点值，即每个条中心的实际 X 位置。这在基本 R`barplot`函数中很容易完成，但是我希望能够在**lattice**的`barchart`. 我的目标是在相应栏的顶部显示文本列的值。

只要我不使用子组，下面的代码允许我将文本放在条形顶部。我曾尝试在 Internet 上搜索解决方案，但似乎没有任何效果。从图中可以看出，中点仅针对整个组的中心确定。

谢谢！

```
library(lattice)

test= data.frame(
  group=c("WK 1", "WK 1", "WK 1",  "WK 2", "WK 2", "WK 2", "WK 3", "WK 3", "WK 3"),
  subgroup=c(1,2,3,1,2,3,1,2,3)  ,
  percent=c(60,50,80,55,56,65,77,65,86),
  text=c("n=33", "n=37","n=39","n=25","n=27","n=22","n=13","n=16","n=11")
  )

barchart(data=test, 
         percent~group,
         groups=subgroup,

            panel = function(x,y,...){
              panel.barchart(x, y, ...)
              panel.text( x=unique(test$group), 
                          y=test$percent, 
                          label=unique(test$text) 
                          )

            }
         ) 
```

![在此处输入图像描述](../Images/7044c4eb926c6ed610227aefc798953e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T13:25:44.880

一种快速而肮脏的方法是更改`panel.barchart`​​绘制条形的主体，以包括在适当的位置绘制文本。

创建一个新的面板功能（一般来说是个好主意，因为原来的功能仍然存在，以防您需要像我一样多次重新开始）

```
myPanelBarchart <- panel.barchart 
```

更改面板功能的相应部分（请记住：如果您不再有组，如果您水平绘制，或者如果您堆叠，这将不再起作用）。在这里，我添加了一个调用`panel.text`if`myPanelBarchart`传递了一个名为`printVals`and it is not的参数`FALSE`。此参数将是您要在每个条形上方打印的字符向量。它的长度必须与绘制的条形数量相同，并按照与您的数据对应的顺序排列。我没有添加任何内容来检查这些是否属实。

```
body(myPanelBarchart)[[10]][[4]][[2]][[4]][[4]][[9]]<-substitute(for (i in unique(x)) {
    ok <- x == i
    nok <- sum(ok, na.rm = TRUE)
    panel.rect(x = (i + width * (groups[ok] - (nvals + 1)/2)), 
        y = rep(origin, nok), col = col[groups[ok]], border = border[groups[ok]], 
        lty = lty[groups[ok]], lwd = lwd[groups[ok]], width = rep(width, 
            nok), height = y[ok] - origin, just = c("centre", 
            "bottom"), identifier = identifier)
# This is the added part (adjust parameters as you see fit):
    if(!identical(printVals, FALSE)){
      panel.text(x = (i + width * (groups[ok] - (nvals + 1)/2)), y = y[ok],
        label = printVals[ok], adj = c(0.5, -1), identifier = identifier)
    }        

}) 
```

更改新函数的形式参数列表以添加参数`printVals`并为其提供默认值。

```
formals(myPanelBarchart) <- c(formals(panel.barchart), printVals = FALSE) 
```

使用带有新参数的新面板函数绘制数据

```
barchart(data=test, 
         percent~group,
         groups=subgroup,

            panel = function(x,y,...){
              myPanelBarchart(x, y, ..., printVals = test$text, )
            }
         ) 
```

哪个应该给你

![修改后的条形图](../Images/1b14fab0a960eb024534686ef9bded5f.png)

所以它的长短是x位置是根据你的情节的方向和组成来确定的。在垂直、非堆叠、分组条形的情况下，x 位置在 中确定`body(myPanelBarchart)[[10]][[4]][[2]][[4]][[4]][[9]]`。

# c - 在c中打印数组的内容

> ID：10475791
> 
> 赞同：0
> 
> 时间：2012-05-07T01:45:04.190
> 
> 标签：c, arrays, pointers, printf

我有这个非常简单的代码：

```
#include <stdio.h>
#include <stdlib.h>

int maxArr(int *arr)
{
    int i=0;
    for (i = 0; i < 10; ++i)
    {
        printf("%d\n",arr[i]);
    }
    return 0;
}

int main()
{
    int* i = {0,1,2,3,4,5,6,7,8,9};
    maxArr(&i);
    return 0;
} 
```

但不是打印 0,1,2,3,4,...,9

我得到这个：

```
0
0
0
0
0
0
1809693728
32767
203279940
1 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:48:52.287

将您的初始化更改`i`为：

```
int i[10] = {0,1,2,3,4,5,6,7,8,9}; 
```

...并调用`maxArray`just `i`; 即`maxArray(i)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:46:18.267

你需要通过`i`，而不是`&i`

```
int main()
{
    int* i = {0,1,2,3,4,5,6,7,8,9};
    maxArr(i);
    return 0;
} 
```

您不是遍历数组，而是遍历从`&i`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:46:19.660

你给出了错误的指针 - 你得到了错误的数据（在最好的情况下）：

```
maxArr(&i); 
```

应该

```
maxArr(i); 
```

我想知道你怎么没有收到通过`int **`而不是警告`int *`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T01:51:49.227

你这样做是不对的。

这里 i 已经指向数组的第一个元素。

```
int* i = {0,1,2,3,4,5,6,7,8,9};
maxArr(&i); 
```

i 存储在某处，例如内存位置 xyz，而在 xyz，您存储了另一个内存位置，即数组的第一个元素的位置，例如 abc，因此当您传递 &i 时，它会发送 i 的位置，即 xyz 而不是 abc。

要更正它，请将代码更改为

```
int* i = {0,1,2,3,4,5,6,7,8,9};
maxArr(i); 
```

# jquery - 如何使用 ajax 和 POST 发送 $var？

> ID：10475792
> 
> 赞同：0
> 
> 时间：2012-05-07T01:45:26.377
> 
> 标签：jquery, ajax

我将如何将“$var”发送到“doc.php”，以及“doc.php”如何读取它？作为 $_POST['$var'] 还是 $var？

这是我正在使用的：

```
<script src="jquery-1.7.2.min.js" type="text/javascript"> 
```

// .done 是我想在页面加载时发布的内容吗？

```
$('').done(function() {
      $.ajax({
        url: "doc.php",
        dataType: "json",
        type: "POST",
        data: {
          Variable: <?php print $var; ?>,
        },
        success: function (m) {
            console.log(m);
        },
        error: function (e) {
          console.log("Something went wrong ...: "+e.message);
        },
      }); /* end ajax*/
      e.preventDefault();
    });
    </script> 
```

另外，我正在尝试在页面加载时提交。显然这是行不通的，代码还有更多内容——但我想保持简单。您如何像在 HTML 中那样“发布”——在后台，并且没有按钮（仅在页面加载时）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:48:06.740

doc.php 将其读取为`$_POST["Variable"]`

您通过 Ajax 以以下结构发送它：

```
data: { variable: 'desired_value' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:53:22.207

如果值不是整数，请确保将对象文字中的***值括在引号中：***

```
data: { Variable: '<?php print $var; ?>'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:51:34.810

页面加载完成后，使用 jQuery 文档就绪功能做一些事情。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
<script type="text/javascript">
    $(function(){
       var valuetToSend= '<?php echo $var; ?>';
        $.ajax({
            url: "doc.php",
            dataType: "json",
            type: "POST",
            data: { Variable: valuetToSend },
            success: function (m) {
                alert(m);
            },
            error: function (e) {
              alert("Something went wrong ...: "+e.message);
            },
          }); 
    });
</script> 
```

# wordpress - Wordpress 管理屏幕在 IE6 中无法正常工作

> ID：10475794
> 
> 赞同：0
> 
> 时间：2012-05-07T01:45:43.397
> 
> 标签：wordpress, internet-explorer-6

我需要一个博客在 IE6 上为客户端运行（公司仅在内部使用 IE6）。在 IE Tester 上测试，管理页面不可用。它可以工作，但是东西不在屏幕上，一些框被推下 1000+ 像素，等等。

我在其他地方找不到任何提及，所以我想知道这是否是 IE Tester 或 Wordpress IE6 兼容性的问题。我知道 WP 放弃了 IE6 支持，但我很惊讶我无法通过快速的 Google 搜索找到任何插件或解决方案。

在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:25:32.167

自 3.2 以来，IE6 对 WordPress 已死。您需要从发布存档中获取 3.1 或更早版本：[http ://wordpress.org/download/release-archive/](http://wordpress.org/download/release-archive/)

# c - 学习 C - 需要帮助完成我的井字游戏

> ID：10475795
> 
> 赞同：1
> 
> 时间：2012-05-07T01:45:47.410
> 
> 标签：c, tic-tac-toe

我一直在尝试学习 C。来自具有 HTML、CSS 和在 Wordpress 中创建自定义主题经验的网页设计背景，我想尝试一下编程。我有一个朋友帮助我，他对我的最新任务是井字游戏。以下是我到目前为止的代码。我目前无法在玩家 1 和 2 之间进行游戏循环，并且无法让游戏识别游戏是 0 不完整、1 p1 获胜、2 p2 获胜或 3 只猫游戏。

```
#include <stdio.h>
#define O 2
#define X 1

void printItem(int item)
{
    char items[] = { ' ', 'X', 'O' };
    printf(" %c ", items[item]);
 /*   
    if (item == 0)
        printf(" ");
    else if (item == 1)
        printf("X");
    else
        printf("O");
  */
}

void printRowDivider()
{
    printf("  +---+---+---+\n");
}

void printBoard(int board[9]) 
{
    printf("    A   B   C\n");
    printRowDivider();
    printf("1 ");
    for (int i = 0; i < 9; i++)
    {
        printf("|");
        printItem(board[i]);
        if (i == 2 || i == 5)
        {
            printf("|\n");
            printRowDivider();
            printf("%d ", (i+1)/3 + 1);
        }
    }
    printf("|\n");
    printRowDivider();
}

int gameStatus(int board[9]) {

    // check rows
    if (board[0] == board[1] && board[1] == board[2] && board[0] != 0)
        return board[0];
    else if (board[3] == board[4] && board[4] == board[5] && board[3] != 0)
        return board[3];
    else if (board[6] == board[7] && board[7] == board[8] && board[6] != 0)
        return board[6];

    // check columns
    else if (board[0] == board[3] && board[3] == board[6] && board[0] != 0)
        return board[0];
    else if (board[1] == board[4] && board[4] == board[7] && board[1] != 0)
        return board[1];
    else if (board[2] == board[5] && board[5] == board[9] && board[2] != 0)
        return board[2];

    // check diagnols 
    else if (board[0] == board[4] && board[4] == board[8] && board[0] != 0)
        return board[0];
    else if (board[2] == board[4] && board[4] == board[6] && board[2] != 0)
        return board[2];

    else {
        return 3;
    }

}

int main()
{
    int gameBoard[9] = { 0, 0, 0, 
                         0, 0, 0, 
                         0, 0, 0 };

    printBoard(gameBoard);          

        printf("p1 (Column + Row): ");
        int row;
        char column;                

        scanf(" %c%d", &column, &row);
        printf("You said %d, %d.\n", row, column);

        row -= 1;
        column -= 'A';

        printf("You said %d, %d.\n", row, column);
        gameBoard[row*3 + column] = X;

        printBoard(gameBoard);
        printf("p2 (Column + Row): ");
        scanf(" %c%d", &column, &row);
        row -= 1;
        column -= 'A';

        printf("You said %d, %d.\n", row, column);
        gameBoard[row*3 + column] = O;

        printBoard(gameBoard);

        int player = 0; 

        while (1) { 
            printBoard(gameBoard);

            printf("Player %d: ", player + 1); 
            scanf(" %c%d", &column, &row ); 
            player -= player;

        }

    printBoard(gameBoard);

    return 0;
} 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:17:58.677

在您的主程序中，您的循环是：

```
int player = 0; 

while (1)
{ 
    printBoard(gameBoard);
    printf("Player %d: ", player + 1); 
    scanf(" %c%d", &column, &row ); 
    player -= player;
} 
```

这会将播放器设置为 0，然后再次设置为 0（因为 0 - 0 为 0），等等。如果您需要在 0 和 1 之间波动，有几种方法可以做到这一点，至少包括：

```
player = !player;
player = 1 - player; 
```

您还需要将此循环上方的大部分移动代码放在循环内调用的函数中。

# objective-c - 如何创建交流阵列？

> ID：10475799
> 
> 赞同：1
> 
> 时间：2012-05-07T01:46:25.110
> 
> 标签：objective-c, c, arrays, pointers

如何在构造函数中设置指向 C 数组的指针？

```
@implementation NSBufferedInputStream {
    char *buffer;
    int bufferSize;
}

- (id)initWithFileAtPath:(NSString *)path
{
    self = [super initWithFileAtPath:path];
    if (self) {
        bufferSize = 100;
        buffer = char[bufferSize]; // ERROR: Expected expression
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:50:59.733

如果你真的需要一个动态大小的数组，

```
- (id)initWithFileAtPath:(NSString *)path
{
    self = [super initWithFileAtPath:path];
    if (self) {
        bufferSize = 100;
        buffer = malloc(sizeof(char) * bufferSize);
    }
}

- (void)dealloc
{
    free(buffer);
    [super dealloc];
} 
```

否则，如果您的数组大小在编译时已知，只需将您的 ivar 从更改`char *buffer;`为：

```
char buffer[100] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:48:55.987

如果数组的大小是动态的 - 使用`malloc`，如果不是，则需要在声明时进行：

```
@implementation NSBufferedInputStream {
    char buffer[100];
    int bufferSize;
} 
```

# java - JPA UML 继承重叠

> ID：10475800
> 
> 赞同：1
> 
> 时间：2012-05-07T01:46:54.940
> 
> 标签：java, inheritance, jpa, uml, overlapping

我是 JPA 的新手。我有一个名为 Person 的超类和两个子类 Teacher 和 Student。大多数时候，一个人只是老师或学生，但有时一个人既是学生又是老师，我需要坚持下去。有人知道如何在 JPA 中映射这个重叠的 UML 继承吗？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:57:26.320

我认为您应该以另一种方式思考，而不是使用让您思考继承的“is A”，您可以将其视为具有多个角色的人，因此，如果您这样思考，您可以解决它带有聚合，如下所示

```
public class Person {
    private TeacherProfile teacherProfile;
    private StudentProfile studentProfile;
} 
```

这让你有了一个美丽的改变：

```
public class Person {
    private Set<Profile> profiles;
} 
```

有以下课程

```
public abstract class Profile {
    private String name;
    //common data
}

public class TeacherProfile extends Profile {
    //teacher data
}

public class StudentProfile extends Profile {
    //student data
} 
```

这可以优雅地解决您的问题，而不会破坏您的继承想法。

我可以解释为什么你最初的想法，即使在关系数据库上是可能的，但在对象世界下是不可能的，考虑通过 ID 获取人，如果你有两个“角色”的同一个人，那么什么实例会休眠返回？学生会错，老师也会错。如果java是一种多重继承语言，这将是可能的，它有自己的问题:)

希望我对你说清楚了。

# iphone - 如何挂钩 MPIncomingPhoneCallController 的方法？

> ID：10475803
> 
> 赞同：1
> 
> 时间：2012-05-07T01:48:02.957
> 
> 标签：iphone, ios5, jailbreak, iphone-privateapi

我想挂钩`MPIncomingPhoneCallController`iOS 5 中的类方法，以便在来电时执行某些操作。我用

```
Class _$MPIncomingPhoneCallController = objc_getClass("MPIncomingPhoneCallController");

MSHookMessage(_$MPIncomingPhoneCallController, 
              @selector(updateLCDWithName:label:breakPoint:), 
             (IMP) &Hook_LCD, 
             "pre_"); 
```

钩住`updateLCDWithName:label:breakPoint:`，但它失败了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T14:22:57.427

您尝试挂钩的类位于 IncomingCall.serviceBundle 中，只有在有来电时才会在 SpringBoard 中加载。要确定它何时实际加载，您需要挂钩`SBPluginManager loadPluginBundle:`. 等到加载的包是`com.apple.mobilephone.incomingcall`. 只有这样你才能钩住你想要的东西。

# antlr - 如何在不使用 backtrack=true 的情况下解决此问题？

> ID：10475812
> 
> 赞同：1
> 
> 时间：2012-05-07T01:49:10.823
> 
> 标签：antlr, antlr3, ll

我正在尝试制作一种没有运算符优先级的语法，但要求您使用一个运算符或将它们括在括号中。（为简单起见，在此处使用而`test`不是有效运算符列表）。例如：`id|int_literal etc``+`

```
test + test ///valid!
(test + test) + test ///valid!
(test + test) + (test + test) /// valid!
test + test + test /// invalid! 
```

有没有办法为此编写不需要回溯=真的语法？我不认为左分解在这里真的有意义，我不确定句法谓词会有什么帮助。

这是我所拥有的（需要`backtrack=true`）：

```
fragment
bexpr : 'test' | '(' cbebr ')';

fragment
cbexpr : bexpr '+' bexpr;

expr : bexpr | cbexpr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:17:07.877

您可能想查看[如何从语法中删除全局回溯](http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar)。

模棱两可之处在于， 的两种选择都`expr`可以以 . 开头`bexpr`。你需要摆脱这种歧义。关键在于观察到 a`+`只有在它是整个表达式时才出现不带括号的情况。所以我们最终得到：

```
expr : operand ('+' operand)?;
operand : '(' expr ')' | 'test'; 
```

换句话说：如果运算符表达式作为操作数出现，那么它必须用括号括起来。

# python - 获取 4 天内创建的每组记录中的“顶级”记录

> ID：10475814
> 
> 赞同：2
> 
> 时间：2012-05-07T01:49:51.803
> 
> 标签：python, sql, django

我正在创建一个 Django 应用程序，其中有一个表，其中包含“项目”、它们的创建日期以及它们拥有的点数。我想写一个查询，返回过去 4 天得分最高的项目，然后是前 4 天得分最高的项目，依此类推。我想知道如何才能做到这一点（我对 SQL 很陌生，如果这是一个基本问题，我很抱歉）。我以为我可以在我的 Django 视图中迭代获取每组 4 个中的顶级记录，然后组合这些对象，但这需要我为每组访问数据库，我猜这将是一个不好的方法正在做？任何指针将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T03:26:21.447

不幸的是，没有办法避免在这里为每个组访问数据库。不过，这应该不是什么大问题，我假设您会将组的数量限制在合理的范围内？如果您担心数据库负载，请确保索引您的“创建日期”和“点”字段。

您的代码应类似于：

```
from datetime import date, timedelta
from models import Item

groups = []
for i in range(0, 10):
    items = Item.objects.filter(date_created=date.today() - timedelta(i))
    groups.append(items.order_by('-points')) 
```

# swing - qwebview vs javafx2 webview？

> ID：10475821
> 
> 赞同：1
> 
> 时间：2012-05-07T01:51:36.667
> 
> 标签：swing, qt, webview, awt, javafx

两者都由 WebKit 提供支持。我想知道是否有人使用过这两种方法，以了解是否在跨平台支持和网页渲染领域，哪个更成熟，效果更好？

特别是我想知道哪一个值得花时间投资，看到对 QT 对应的支持已经停止，看到 Oracle 重振对 JavaFX 2.0 的支持让我很好奇。

在仍然完全跨平台并且能够很好地呈现 Javascript 和 HTML5 的 Java Swing 应用程序中嵌入浏览器视图时，您应该使用哪个？

更新：支持 HTML5 并不太重要，但对于未来，我认为这是有益的。我真正希望看到的是真正的**跨平台支持**（浏览器组件是否可以跨 Windows、Mac 和 Linux 工作）和**准确的网页渲染**（能够渲染 Javascript、GWT 应用程序、flash）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:16:25.807

我的答案是 QWebview。我使用 JavaFX 2.0 开发了两个应用程序，大约 10K 代码行。我发现 JavaFX WebKit 没有为插件/MIME/链接策略等提供 API。JavaFx 没有 Qt 成熟。

# java - SessionFactory - 我不能使用 buildSessionFactory 功能

> ID：10475827
> 
> 赞同：0
> 
> 时间：2012-05-07T01:52:43.763
> 
> 标签：java, mysql, xml, hibernate

```
 public static void main(String[]arg)
    {
        Session session = null;

        try{
            @SuppressWarnings("deprecation")
            SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
            session =sessionFactory.openSession();

            Contact contact = new Contact();
            contact.setID(3);
            contact.setFirstName("Professor");
            contact.setLastName("Katagawa");
            contact.setEmail("Bradsis@yahoo.com");
            session.save(contact);
            System.out.println("Done");
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
        finally
        {        
            session.flush();
            session.close();
        }
    } 
```

我总是在 session.flush() 中得到一个 NullPointer 异常。我已经有一个类 Contact 定义如下，

```
public class Contact
{
    private String firstName;
    private String lastName;
    private String email;
    private int id;

    public String getEmail()
    {
        return email;
    }

    public String getLastName()
    {
        return lastName;
    }

    public String getFirstName()
    {
        return firstName;
    }

    public int getID()
    {
        return id;
    }

    public void setID(int ID)
    {   id=ID;  }

    public void setEmail(String e)
    {
        email=e;
    }

    public void setFirstName(String fn)
    {
        firstName=fn;
    }

    public void setLastName(String ln)
    {
        lastName=ln;
    }
} 
```

`SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();` main 方法中的行 被报告为已弃用。我也有一个正确的映射文件。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:07:57.927

您的代码中有两个错误：

1）在 finally 子句中，您无需进一步检查即可使用会话实例 - 但仅当您的代码的前两行成功执行时，该实例才可用。所以要么用 a 包围 flush() 和 close() ，`if (session != null)`要么在两行之后开始 try 块。

2) 出现异常后会话不能再使用；特别是不可能保存对象或刷新会话。这意味着，您的 flush() 和 close() 应该在 session.save() 之后的正常块中，而不是在 finally 子句中。

如果这两个都不能解决问题：请使用几行堆栈跟踪发布 NullPointerException 的错误消息，并发布输出（是否有“完成”或第二个异常被你的 catch 子句吃掉？） .

# webcam - 如何直接从 Web 应用程序中的内置网络摄像头捕获图像？

> ID：10475833
> 
> 赞同：1
> 
> 时间：2012-05-07T01:53:45.900
> 
> 标签：webcam, twain

我已经有一个 Web 应用程序，它允许我的客户从安装了 TWAIN 驱动程序的扫描仪扫描文档，将扫描的文档保存为本地 PDF 或上传到 Web 服务器。

我希望我的 Web 应用程序支持的一件事是从内置网络摄像头捕获图像。似乎没有或很少有支持 TWAIN 的网络摄像头。

有什么建议可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:56:52.950

如果您的相机没有 twain 驱动程序并且您的应用程序没有“看到”它，您将不得不使用位于相机和您的应用程序之间的第 3 方解决方案。我正在使用 terminalworks 的 Unitwain，因为我已经在使用他们的一些其他扫描产品。我必须说它对我帮助很大，因为我已经安装了很多网络摄像头，但没有可用于我们的新业务应用程序的 twain 驱动程序。

编辑：我忘了包含指向该网站的链接：[http ://www.terminalworks.com/unitwain](http://www.terminalworks.com/unitwain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:02:51.340

您需要使用 TWAIN 以外的其他东西，WIA 可能是获取图像的最简单方法，请参阅[此答案](https://stackoverflow.com/questions/4306929/take-a-picture-automatically-using-a-webcam-in-c-sharp-using-wia "WIA 示例")

# c# - 如何暂停 WPF 中绑定的 UI 更新？

> ID：10475834
> 
> 赞同：2
> 
> 时间：2012-05-07T01:53:53.117
> 
> 标签：c#, wpf, binding, viewmodel

我正在开发一个高性能的 BlackJack 程序。该应用程序主要用于展示，但有时出于性能原因我想禁用所有界面更新。当我更新 UI（自动 100% 绑定）时，我每秒可以处理约 600 张牌，而无需更新表格和控件，我每秒可以处理 22,000 多张牌。

我正在玩弄禁用 UI 更新的简单方法。我发现的唯一方法是将我的 BlackJackTable UserControls 的 DataContext 设置为空白表 ViewModel 并允许真实表 ViewModel 执行所有计算。如果我想再次查看发生了什么，这会在将 DataContexts 设置回真实表 ViewModel 时产生问题。

所以，总而言之......有没有一种简单的方法可以暂停对象上的所有绑定？删除可见性和禁用 (IsEnabled = false) 对性能没有帮助。有什么建议可以正确地做到这一点吗？

您不需要阅读以下内容，但如果您好奇（或有解决方案），这就是我一直在做的事情：

```
private void FastModeChk_Checked(object sender, RoutedEventArgs e) {
        if (TableViewModel.GameStatisticsVM.CardsDealt > 0) {
        BlackJackTable.DataContext = BlankTVM;
        DealerControlsTabItem.DataContext = BlankTVM;
        PlayerControlsTabItem.DataContext = BlankTVM.CurrentPlayerHandVM;
        DebugLogTabItem.DataContext = BlankTVM.LoggingVM;
    }
}
private void FastModeChk_Unchecked(object sender, RoutedEventArgs e) {
    BlackJackTable.DataContext = TableViewModel;
    DealerControlsTabItem.DataContext = TableViewModel;
    PlayerControlsTabItem.DataContext = TableViewModel.CurrentPlayerHandVM;
    DebugLogTabItem.DataContext = TableViewModel.LoggingVM;
} 
```

PlayerControlsTabItem 不会一直从 CurrentPlayerHandVM 拉出。我正在调用 OnPropertyChanged，如果没有选中该框，一切都会很好。由于某种原因，此代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:07:16.273

我的想法是在方法调用中短路，`RaisePropertyChanged()`以便`PropertyChanged`不调用事件。

就像是：

```
private int _myInt;
public int MyInt
{
    get { return _myInt; } 
    set
    {
        if(_myInt == value)
            return;

        _myInt = value;
        RaisePropertyChanged("MyInt");
    }
}

private void RaisePropertyChanged(string propertyName)
{
    //if the fastmode is checked, do not allow the PropertyChanged event to be fired.
    if(FastModeChk.Checked)
        return;

    var handler = PropertyChanged;
    if(handler != null)
        handler(this, new PropertyChangedEventArgs(propertyName);
} 
```

# ruby-on-rails - WIN x64 上的 ruby -debug-base19-0.11.26.gem

> ID：10475837
> 
> 赞同：1
> 
> 时间：2012-05-07T01:54:42.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

**关于我的系统的信息：**

`ruby -v`-> ruby​​ 1.9.3p125 (2012-02-16) [i386-mingw32]

`gem -v`-> 1.8.24

* * *

当我跑步时

```
bundle install 
```

输出：

```
Fetching source index for http://rubygems.org/
Could not find ruby-debug-base19-0.11.26 in any of the sources 
```

防火墙关闭

我下载了这个文件：ruby-debug-base19-0.11.26.gem

但是当我运行时：

```
gem install ruby-debug-base19-0.11.26.gem 
```

输出：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug-base19-0.11.26.gem:
        ERROR: Failed to build gem native extension.

        C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for rb_method_entry_t.called_id in method.h... no
checking for rb_control_frame_t.method_id in method.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby
        --with-ruby-dir
        --without-ruby-dir
        --with-ruby-include
        --without-ruby-include=${ruby-dir}/include
        --with-ruby-lib
        --without-ruby-lib=${ruby-dir}/lib
extconf.rb:16:in `block in <main>': break from proc-closure (LocalJumpError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby_core_sour
ce-0.1.5/lib/ruby_core_source.rb:18:in `call'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby_core_sour
ce-0.1.5/lib/ruby_core_source.rb:18:in `create_makefile_with_core'
        from extconf.rb:32:in `<main>'

Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9
.1/gems/ruby-debug-base19-0.11.26 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debu
g-base19-0.11.26/ext/ruby_debug/gem_make.out 
```

有什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:30:25.417

打开你的 Gemfile

看看有没有这样的...

```
gem 'ruby-debug19', :require => 'ruby-debug' 
```

将其注释掉，并改用“调试器”

```
#gem 'ruby-debug19', :require => 'ruby-debug'
gem 'debugger' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:47:24.477

您需要提供`--with-ruby-include`带有 的选项`ruby-debug-base19`。在你的情况下尝试：

```
gem install ruby-debug-base19-0.11.26.gem -- --with-ruby-include=C:/RailsInstaller/Ruby1.9.3/include/ruby-1.9.1/ruby-1.9.3-p125 
```

或者看看[`debugger`宝石](https://github.com/cldwalker/debugger)。它似乎从其他调试 gem 中减少了很多脂肪，而且它实际上工作和安装很容易！

# python - 在 Python 中读取直接访问 fortran 无格式文件

> ID：10475839
> 
> 赞同：5
> 
> 时间：2012-05-07T01:54:53.263
> 
> 标签：python, file, fortran

我对 Python 完全陌生，正在从头开始用 Python 编写可视化代码（以避免使用昂贵的专有程序，如 IDL）。到目前为止，我一直在使用 IDL 和 gnuplot。我想要做的是：

我使用我希望能够在 python 中读取的 fortran 将二维数组写入未格式化的直接访问文件。下面给出了确切的测试代码。实际代码是一个巨大的并行代码，但数据输出的格式几乎完全相同。

```
program binary_out
implicit none
integer :: i,j,t,rec_array
double precision, dimension(100,100) :: fn
double precision, parameter :: p=2*3.1415929
INQUIRE(IOLENGTH=rec_array) fn
open(unit=10,file='test',status='new',form='unformatted',access='direct',recl=rec_array)                                                                           
   fn=0
   write(10,rec=1) fn
do t=1,3
do i=1,100
   do j=1,100
      fn(i,j)=sin(i*p*t/100)*cos(j*p*t/100)
   enddo
enddo
   write(10,rec=t+1) fn
enddo
close(10)
end program binary_out 
```

该程序应该给我 t=1 的零和增加“岛”的数量来增加 t 的值。但是当我使用下面给出的 python 代码阅读它时，我得到的只是零。如果我删除第一个零写入语句，我只会得到第一个时间片，而不管我在 python 代码中使用的“时间片”的值是什么。我到目前为止的代码是：

```
#!/usr/bin/env python
import scipy
import glob
import numpy as np
import matplotlib.pyplot as plt
import os, sys
from pylab import *

def readslice(inputfilename,field,nx,ny,timeslice):
   f=open(inputfilename,'r')
   f.seek(timeslice*nx*ny)
   field=np.fromfile(inputfilename,dtype='d',count=nx*ny)
   field=np.reshape(field,(nx,ny))
   return field

a=np.dtype('d')
a=readslice('test',a,100,100,2)

im=plt.imshow(a)
plt.show() 
```

如果时间片等于 i，我希望 def readslice 能够在第 i 个位置读取记录。为此，我尝试使用 f.seek 但它似乎不起作用。numpy.fromfile 似乎从第一条记录本身开始读取。如何使 numpy.fromfile 从文件中的特定点读取？

我仍在尝试习惯 Python 风格并深入研究文档。任何帮助和指示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:52:37.823

这是一个适合您的python代码：

```
def readslice(inputfilename,nx,ny,timeslice):
   f = open(inputfilename,'rb')
   f.seek(8*timeslice*nx*ny)
   field = np.fromfile(f,dtype='float64',count=nx*ny)
   field = np.reshape(field,(nx,ny))
   f.close()
   return field 
```

在您的原始代码中，您将文件名作为第一个参数传递给`np.fromfile`而不是 file object `f`。因此，`np.fromfile`创建了一个新的文件对象，而不是使用您想要的。这就是它一直从文件开头读取的原因。此外，`f.seek`将字节数作为参数，而不是元素数。我将其硬编码为 8 以适合您的数据，但如果您愿意，可以将其设为通用。此外，字段参数 in`readslice`是多余的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:58:21.683

我不认为所有的 FORTRAN 运行时都是一样的。有些帧记录，有些则没有，而且我不太相信那些记录帧的人都会以同样的方式做到这一点。当然，他们通常可以回读自己编写的记录，但是从一个 FORTRAN 运行时到另一个运行时的互操作可能不存在。

您可能应该在您选择的 FORTRAN 中编写一个小型测试程序，该程序会写入一些类似于您的生产代码的记录，然后使用您最喜欢的二进制文件编辑器挑选结果 - 我喜欢 bpe，但其中有很多可用。

然后，在您了解真正编写的内容之后，使用 Python 结构模块或类似模块将内容拉回。

bpe：http: [//sourceforge.net/projects/bpe/](http://sourceforge.net/projects/bpe/)

# html - 如何避免在 Django 中重复 URL 结构

> ID：10475840
> 
> 赞同：1
> 
> 时间：2012-05-07T01:55:03.483
> 
> 标签：html, django, url, django-templates, dry

[Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)解释了如何创建一个基本的投票应用程序。本教程中的模板经常使用硬编码的 URL 结构，例如：

```
<form action="/polls/{{ poll.id }}/vote/" method="post"> 
```

和：

```
<a href="/polls/{{ poll.id }}/">Vote again?</a> 
```

`/polls/`重构此代码以避免在整个模板中重复的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:15:34.210

使用`url`模板标签[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:22:40.780

或者，命名您的网址。

请参阅：[https ://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)

在模板中，url 看起来像：

`<a href="{% url poll_url poll.id %}">Vote again?</a>`

在视图中，可以使用以下`reverse`方法检索 url：

`reverse('poll_url', args=[poll.id])`

# php - 如何强制列别名为特定数据类型？

> ID：10475843
> 
> 赞同：2
> 
> 时间：2012-05-07T01:55:36.550
> 
> 标签：php, mysql, sql

我在选择中有一个别名，如下所示：

```
SELECT
    CASE ....
    WHEN 1 THEN somefield * -10
    WHEN 0 THEN somefield * 10
    END as myAlias
FROM
    .... 
```

问题是，在 mysql 寻找的第一条记录中，它将“myAlias”标记为 UNSIGNED，但在下一条记录中，相同的别名会产生一个 SIGNED 整数，然后出现错误：

```
BIGINT UNSIGNED value is out of range in.... 
```

那么，如何在mysql执行任何操作之前告诉mysql“myAlias”是一个签名整数？

谢谢！

编辑：

我试过了

```
SELECT
    CAST(CASE ....
    WHEN 1 THEN somefield * -10
    WHEN 0 THEN somefield * 10
    END AS SIGNED) as myAlias
FROM
    .... 
```

没有成功！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T02:10:54.320

我假设您表中的字段被声明为`UNSIGNED INTEGER`. 在这种情况下，您必须在表达式的`THEN`子句中键入强制转换字段。`CASE`下面的示例说明了一个示例。

### 创建并插入脚本：

```
CREATE TABLE mytable
(
     numberfield INTEGER UNSIGNED
   , bitfield BIT
);

INSERT INTO mytable (numberfield, bitfield) VALUES
  (134, 1),
  (673, 0),
  (855, 1),
  (133, 0),
  (778, 1),
  (234, 0); 
```

### 在 THEN 子句中键入转换字段：[**SQL Fiddle Demo**](http://sqlfiddle.com/#!2/5b3bb/3)

```
SELECT
    CASE bitfield
        WHEN 1 THEN CAST(numberfield AS SIGNED) * -10
        WHEN 0 THEN CAST(numberfield AS SIGNED) * 10
    END as myAlias
FROM mytable 
```

*输出*：

```
MYALIAS
-------
-1340
6730
-8550
1330
-7780
2340 
```

### 编写上述查询的另一种方法：[**SQL Fiddle Demo**](http://sqlfiddle.com/#!2/5b3bb/8)

```
SELECT
    CAST(numberfield AS SIGNED) * 
    (
        CASE bitfield
            WHEN 1 THEN -10
            WHEN 0 THEN 10
        END
    ) as myAlias
FROM mytable 
```

*输出*：

```
MYALIAS
-------
-1340
6730
-8550
1330
-7780
2340 
```

### 没有类型转换字段：[**SQL Fiddle Demo**](http://sqlfiddle.com/#!2/5b3bb/4)

```
SELECT
    CASE bitfield
      WHEN 1 THEN numberfield * -10
      WHEN 0 THEN numberfield * 10
    END as myAlias
FROM mytable 
```

*错误*：

> 数据截断：BIGINT UNSIGNED 值超出 '( `db_5b3bb`. `mytable`. `numberfield`* -(10))' 的范围：SELECT CASE 位域 WHEN 1 THEN 数字域 * -10 WHEN 0 THEN 数字域 * 10 END as myAlias FROM mytable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:59:56.320

尝试使用“cast()”函数：

[http://dev.mysql.com/doc/refman/5.1/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.1/en/cast-functions.html#function_cast)

前任： `select * from mytable where myfield=cast(somefield as UNSIGNED INTEGER)`

# cyclomatic-complexity - 圈数

> ID：10475845
> 
> 赞同：0
> 
> 时间：2012-05-07T01:55:40.760
> 
> 标签：cyclomatic-complexity

我试图理解 McCabe 的圈数并且我了解了它的实际用途，即它用于表示程序的复杂性。它直接测量通过程序源代码的线性独立路径的数量。（从维基百科阅读）

但我想知道它真正衡量的是哪个软件实体和属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:42:08.657

圈复杂度，CC，是在函数或方法的粒度上测量的。有时它被总结为一个类，称为加权方法计数，WMC，即类中每个方法的 CC 的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:42:50.003

圈复杂度分析代码。查找代码中的循环和分支，并假设循环和分支越大，代码就越复杂。

然后将复杂性与可维护性联系起来。它假设更高的复杂性难以维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T08:49:59.900

这用于方法和类来衡量复杂性。复杂度数 3 对一个方法来说还不错，如果它大于 3，那么它就有资格进行[重构](http://www.google.co.in/search?sourceid=chrome&ie=UTF-8&q=refactoring)。它鼓励编写小方法，以便代码重用的可能性很高。

# c++ - Init() 的返回类型冲突

> ID：10475846
> 
> 赞同：0
> 
> 时间：2012-05-07T01:55:43.267
> 
> 标签：c++, compiler-errors, init

我有一个 MasterProcess ，它是一般流程概念的专业化，MasterDocument 类应该以可能的通用方式考虑 MasterProcess 的几种不同专业化。我正在使用我正在使用 virtual void Init() 来实现此功能。代码如下：

```
#include <iostream>
#include <utility>
#include <string>
#include <iostream>
#include <sstream>
#include <string>
#include <algorithm>
#include <fstream>
#include <vector>
#include <functional>
#include <map>
#include <stdexcept>

using namespace std;

class BaseMasterProcess {

protected:

int processID;  
int num_of_Questions;  
double min_Threshold_Score_for_Process;  
double total_Process_Score;  
double overall_Audit_Value;
int question;
pair <int,double> answer;

//define all the variable used in any sub-class 
int question1;
int question2;
int question3;
int question4;
int question5;
double question1_Weightage;
double question2_Weightage;
double question3_Weightage;
double question4_Weightage;
double question5_Weightage;
int passing_Score;
pair <int,double> answer1_Option1;  
pair <int,double> answer1_Option2; 
pair <int,double> answer1_Option3;
pair <int,double> answer2_Option1;  
pair <int,double> answer2_Option2; 
pair <int,double> answer2_Option3;
pair <int,double> answer3_Option1;  
pair <int,double> answer3_Option2; 
pair <int,double> answer3_Option3;
pair <int,double> answer4_Option1;  
pair <int,double> answer4_Option2; 
pair <int,double> answer4_Option3;
pair <int,double> answer5_Option1;  
pair <int,double> answer5_Option2; 
pair <int,double> answer5_Option3;

public:
virtual void Init();
virtual double getQuestionWeightage(int ques) = 0;
virtual double getAnswerScore(int ques, int ans) = 0; 
int getNumQuestions()
{
    return num_of_Questions;
}
int getProcesssID()
{
    return processID;
}
double getMinThresholdScore()
{
    return min_Threshold_Score_for_Process;
}
double overallAuditValue()
{
    return overall_Audit_Value; 
}
};

class ConcreteMasterProcess1 : public BaseMasterProcess
{
public:
    Init()
    {
processID = 10; 
num_of_Questions = 3;  
passing_Score = 70;  
min_Threshold_Score_for_Process = 0.7; 
overall_Audit_Value = 0.1;

question1 = 1; 
question1_Weightage = 0.3;  
answer1_Option1 = make_pair (1,0.3); 
answer1_Option2 = make_pair (2,0.0);

question2 = 2; 
question2_Weightage = 0.3; 
answer2_Option1 = make_pair (1,0.3); 
answer2_Option2 = make_pair (2,0.0);

question3 = 3;
question3_Weightage = 0.4; 
answer3_Option1 = make_pair (1,0.4); 
answer3_Option2 = make_pair (2,0.0);
}

double getQuestionWeightage(int ques)
{
switch (ques)
{
    case 1:
        return question1_Weightage;
    case 2:
        return question2_Weightage;
    case 3:
        return question3_Weightage;
}

double getAnswerScore(int ques, int ans) 
{
    if (ques == question1 && ans == answer1_Option1.first)
        return answer1_Option1.second;
    else if (ques == question1 && ans == answer1_Option2.first)
        return answer1_Option2.second; 
    else if (ques == question2 && ans == answer2_Option1.first)
        return answer2_Option1.second;
    else if (ques == question2 && ans == answer2_Option2.first)
        return answer2_Option2.second;
    else if (ques == question3 && ans == answer3_Option1.first)
        return answer3_Option1.second;
    else 
        return answer3_Option2.second;

}   
};

class ConcreteMasterProcess2 : public BaseMasterProcess
{
    Init()
    {
processID = 11; 
num_of_Questions = 4;  
passing_Score = 70;  
min_Threshold_Score_for_Process = 0.75; 
overall_Audit_Value = 0.1;

question1 = 1; 
question1_Weightage = 0.25;  
answer1_Option1 = make_pair (1,0.25); 
answer1_Option2 = make_pair (2,0.0);

question2 = 2; 
question2_Weightage = 0.25; 
answer2_Option1 = make_pair (1,0.25); 
answer2_Option2 = make_pair (2,0.0);
answer2_Option3 = make_pair (3,0.15);

question3 = 3;
question3_Weightage = 0.25; 
answer3_Option1 = make_pair (1,0.25); 
answer3_Option2 = make_pair (2,0.0);

question4 = 4;
question4_Weightage = 0.2; 
answer4_Option1 = make_pair (1,0.2); 
answer4_Option2 = make_pair (2,0.0);

question5 = 5;
question5_Weightage = 0.2; 
answer5_Option1 = make_pair (1,0.2); 
answer5_Option2 = make_pair (2,0.0);
}

double getQuestionWeightage(int ques)
{
switch (ques)
{
    case 1:
        return question1_Weightage;
        break;
    case 2:
        return question2_Weightage;
        break;
    case 3:
        return question3_Weightage;
        break;
    case 4:
        return question4_Weightage;
        break;
}

double getAnswerScore(int ques, int ans) 
{
    if (ques == question1 && ans == answer1_Option1.first)
        return answer1_Option1.second;
    else if (ques == question1 && ans == answer1_Option2.first)
        return answer1_Option2.second; 
    else if (ques == question2 && ans == answer2_Option1.first)
        return answer2_Option1.second;
    else if (ques == question2 && ans == answer2_Option2.first)
        return answer2_Option2.second;
    else if (ques == question2 && ans == answer2_Option3.first)
        return answer2_Option3.second;
    else if (ques == question3 && ans == answer3_Option1.first)
        return answer3_Option1.second;
    else if (ques == question3 && ans == answer3_Option2.first)
        return answer3_Option2.second;
    else if (ques == question4 && ans == answer4_Option1.first)
        return answer4_Option1.second;
    else
        return answer4_Option2.second;

}   
};
class MasterDocument
{

std::vector<BaseMasterProcess*> myProcessList;
void AddProcess(BaseMasterProcess* iProcess)
{
myProcessList.push_back(iProcess);
}
void foo()
{
//myProcessList[...]->Method1(); //do something without knowing which specific concrete  class the process belongs to..
}
};

int main ()
{
MasterDocument master_doc;
cout << master_doc.myProcessList.size();

}
} 
```

编译时出现以下错误。

```
**MD.cxx:81:11: error: ISO C++ forbids declaration of ‘Init’ with no type [-fpermissive]
MD.cxx:138:11: error: ISO C++ forbids declaration of ‘Init’ with no type [-fpermissive]
MD.cxx:138:6: error: conflicting return type specified for ‘virtual int ConcreteMasterProcess1::ConcreteMasterProcess2::Init()’
MD.cxx:57:15: error:   overriding ‘virtual void BaseMasterProcess::Init()’
MD.cxx:582:1: error: expected ‘;’ after class definition
MD.cxx:582:1: error: expected ‘}’ at end of input
MD.cxx:81:6: error: conflicting return type specified for ‘virtual int ConcreteMasterProcess1::Init()’
MD.cxx:57:15: error:   overriding ‘virtual void BaseMasterProcess::Init()’
MD.cxx: In member function ‘virtual double ConcreteMasterProcess1::getQuestionWeightage(int)’:
MD.cxx:119:2: error: a function-definition is not allowed here before ‘{’ token
MD.cxx: In member function ‘virtual double ConcreteMasterProcess1::ConcreteMasterProcess2::getQuestionWeightage(int)’:
MD.cxx:192:2: error: a function-definition is not allowed here before ‘{’ token
MD.cxx: At global scope:
MD.cxx:580:1: error: expected unqualified-id at end of input** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:58:18.680

ConcreteMasterProcess1 中的 Init 方法没有指定返回类型。也许你把它和构造函数混在一起了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T01:58:39.157

我猜您正在尝试为 class 提供构造函数`ConcreteMasterProcess2`。你应该这样做：

```
class ConcreteMasterProcess2 : public BaseMasterProcess {
public:
    ConcreteMasterProcess2() {
         /* ... */
    }
}; 
```

# oracle - 通过 oracle SQL Developer 询问重置价值

> ID：10475852
> 
> 赞同：0
> 
> 时间：2012-05-07T01:57:27.813
> 
> 标签：oracle, insert

我有一个这样的插入查询：

```
INSERT INTO CONSUMER
            (CONS_ID_NO,
             LOCATION_ID,
             AREA_CODE,
             CONS_NO,
             CAT_CODE,
             KEY_ID,
             CONS_NAME,
             ADDRESS1,
             ADDRESS2,
             ADDRESS3,
             ADDRESS4,
             PHONE,
             DATE_CONNECT,
             FLAT,
             NO_OF_FLATS,
             BULK,
             OPENING_BALANCE,
             BALANCE_DATE,
             ROUTE_CODE,
             ROUTE_ORDER,
             METER_NO,
             METER_FIXATION_DATE,
             METER_OWNER,
             METER_WORKING,
             DISCONNECT,
             ALERT,
             LAST_READING,
             LAST_READING_DATE,
             LAST_READING_STATUS,
             PIC_AMT,
             PIC_KL,
             PIC_FROM,
             SC,
             MR,
             ARREARS,
             AS_ON_DATE,
             SCHEDULE_NO,
             MAIN_TYPE,
             SUB_TYPE,
             BILL_UPTO,
             CONS_SERVICE,
             CONS_SERVICE_ARREAR_CLEARED,
             PART_CONSUMER,
             BILL_ID_NO,
             READING_POSTED,
             METER_DIGITS,
             LAST_ADJUSTED_READING,
             LAST_ADJUSTED_DATE,
             LAST_ADJUSTED_STATUS)
VALUES      ('2112104945',
             '141',
             'CPW',
             '5225',
             'D',
             1946415,
             'ASHRAF PERILACODE
 & NASEEHA.K',
             'PERILACODEKP 1X/617A',
             'DHARSAN
 NAGAR',
             'PEROORKADA',
             '--',
             NULL,
             To_timestamp('2002-03-25
 00:00:00.0', 'DD-MON-RR HH.MI.SSXFF
 AM'),
             'N',
             NULL,
             NULL,
             52,
             To_timestamp('2002-03-01 00:00:00.0', 'DD-MON-RR
 HH.MI.SSXFF AM'),
             811,
             73,
             '10075256',
             To_timestamp('2010-11-12
 00:00:00.0', 'DD-MON-RR HH.MI.SSXFF
 AM'),
             'O',
             'Y',
             'N',
             'V',
             102,
             To_timestamp('2011-06-25
 00:00:00.0', 'DD-MON-RR HH.MI.SSXFF
 AM'),
             'W',
             55,
             13,
             To_timestamp('2011-06-25 00:00:00.0', 'DD-MON-RR
 HH.MI.SSXFF AM'),
             2,
             0,
             334,
             To_timestamp('2011-06-28
 00:00:00.0', 'DD-MON-RR HH.MI.SSXFF
 AM'),
             NULL,
             NULL,
             NULL,
             To_timestamp('2011-05-31 00:00:00.0', 'DD-MON-RR
 HH.MI.SSXFF
 AM'),
             NULL,
             NULL,
             'N',
             '3489554',
             'Y',
             5,
             102,
             To_timestamp('2011-06-25
 00:00:00.0', 'DD-MON-RR HH.MI.SSXFF AM'),
             'A'); 
```

1.  在 SQLDeveloper 3 (Oracle 11g) 上执行此查询时，它要求`&naseeha`. 如何防止这种情况？

2.  它也给了我一个错误

    ```
    Error report:
    SQL Error: ORA-01843: not a valid month
    01843\. 00000 -  "not a valid month" 
    ```

上面给出的查询是我之前使用 SQL Developer 安装 Oracle 11g 时导入的 SQL 文件的一部分（我们在安装 Oracle 11g 时得到，我认为是版本 1）。

所有插入查询都给出相同的错误（编号 2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:36:41.777

1.  参考[如何插入包含 "&" 的字符串](https://stackoverflow.com/questions/152837)，这应该有效：

    ```
    SET DEFINE OFF 
    ```

2.  尝试替换所有出现的

    ```
    'DD-MON-RR HH.MI.SSXFF AM' 
    ```

    和

    ```
    'yyyy-mm-dd hh24:mi:ss.ff3' 
    ```

# php - 在PHP中减去2个数字时如何保持前导零？

> ID：10475854
> 
> 赞同：0
> 
> 时间：2012-05-07T01:57:30.957
> 
> 标签：php

这个：

```
$difference = 05-1; 
```

结果是

```
4 
```

如果我这样做也一样：

```
$difference = 05-01; 
```

在保持前导零的同时有一种内置的减法方法吗？我知道我可以检查差异是否只有 1 个字符，如果有，请添加前导零，但我只是想知道是否有默认方法可以返回结果，其中已经包含 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:25:53.593

如果只是输出问题，您可以使用 printf() 添加前导零。以下：

```
<?php
printf("Result: %02d", 04-1);
?> 
```

将输出：

```
Result: 03 
```

**%02d**转换为用 '0' ( **%0** 2d)填充2 个空格 (%0 **2** d) 并格式化为整数 (%02 **d** )。使用 printf() 可以做很多事情来设置精度、添加前导字符以及在输出文本时使用占位符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:01:06.837

不，我不认为 PHP 会原生保持前导 0，除非它是浮点数。在PHP`4`中`4`不是`04`这样`0.4``0.4`

因此，如果您需要整数中的前导，请使用[str_pad()](http://uk.php.net/manual/en/function.str-pad.php)`0`降低`10`填充：

```
<?php 
$difference = (05-1);

echo str_pad($difference, 2, "0", STR_PAD_LEFT);//04
?>

<?php 
$difference = 234;

echo str_pad($difference, 2, "0", STR_PAD_LEFT);//234
?> 
```

# php - PHP，“干草堆包含针？”

> ID：10475856
> 
> 赞同：3
> 
> 时间：2012-05-07T01:58:01.050
> 
> 标签：php

假设这适用于判断子字符串是否在字符串中，是否有更简洁的方法来做到这一点？

```
if(is_int(strpos($haystack, $needle))){
   ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T01:59:40.203

我不会那样做的。只需严格比较即可`FALSE`。

```
$found = strpos($haystack, $needle) !== FALSE; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T02:00:35.387

并不真地。这实际上取决于您的偏好，哪种方式是表达您正在做的事情的最清晰方式。一些替代方案：

```
if( strpos( $h, $n ) !== FALSE ){
    // stuff
}

if( strpos( $h, $n ) > -1 ){
    // stuff
} 
```

最常见的方法可能是使用严格`FALSE`比较，因此，如果您正在从事开源项目或有很多其他人使用您的代码，请考虑该选项。

# mysql - 如何为数据库生成 ERD 或 UML？

> ID：10475860
> 
> 赞同：4
> 
> 时间：2012-05-07T01:59:07.637
> 
> 标签：mysql, database, database-design, uml, relational-database

参考[上一个问题](https://stackoverflow.com/questions/7838156/any-way-to-automatically-generate-a-uml-diagram)，似乎无法轻松地自动生成 UML 或[ERD](http://en.wikipedia.org/wiki/Entity-relationship_model)图。如何才能做到这一点？即使提供的细节也`describe fudforum.*;`可以解决问题，除了你不能使用通配符。

类似`mysqldump -d -u <username> -p<password> -h <hostname> <dbname>`但更具可读性的东西？

看起来[devart](http://www.devart.com/dbforge/mysql/studio/download.html)不能在 Linux 上运行，但我正在调查。

mysql:

```
mysql> 
mysql> describe fudforum.fud30_xmlagg;
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| id             | int(11)      | NO   | PRI | NULL    | auto_increment |
| name           | varchar(255) | NO   |     |         |                |
| url            | varchar(255) | NO   |     |         |                |
| forum_id       | int(11)      | NO   | MUL | 0       |                |
| xmlagg_opt     | int(11)      | NO   |     | 2       |                |
| last_load_date | bigint(20)   | NO   |     | 0       |                |
| custom_sig     | text         | YES  |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+
7 rows in set (0.04 sec)

mysql> 
mysql> quit;
Bye
thufir@dur:~$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T01:26:14.447

mysql workbench 可以逆向工程并创建 erd

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:52:27.563

有一个教程如何使用 Eclipse 和 Dali 插件将 Oracle 10G 转换为 UML。

您只需将 Oracle 与 Dali 中的数据库 sql 连接器交换，它就可以完成这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-21T07:45:28.723

我曾多次尝试让 MySQL Workbench 自动生成带有关系线的 ERD，但总是感到沮丧。我使用的大多数数据库都使用没有定义外键的 MyISAM 表。这似乎阻止了 Workbench 生成我想要的关系，或者我只是不明白如何使它工作。我也尝试了许多其他解决方案，但在我偶然发现 mysqlworkbench.org 上的这篇博客文章之前，我再也没有找到我正在寻找的简单解决方案。

[MySQL Workbench 插件：自动创建外键](http://mysqlworkbench.org/2010/11/mysql-workbench-plugin-auto-create-foreign-keys/ "MySQL Workbench 插件：自动创建外键")

这篇文章是关于如何让 Workbench 在您的所有表中搜索其他表中的候选外键的完整说明。它甚至展示了如何为它获得一个工作的 GUI。最好的部分是这篇文章链接到一个 Python 脚本，该脚本可以作为插件安装在 Workbench 中，这样你就可以为你处理一切了。

一旦安装了插件，你就运行它并给它一个模式来测试键是否匹配。然后它会给你一个它认为匹配的键列表，如果你同意，你可以选择它。然后单击一个按钮，它会为您生成 ERD，所有关系线都已到位。哈利路亚！

非常感谢 MySQL Workbench 的 akojima。现在，如果我能把德洛伦带回四年，并在 2010 年出版时找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T02:06:12.913

mysqlshow 命令：

```
 mysqlshow fudforum 
```

# algorithm - 算法找到十个整数> 0，总和为2011，但它们的倒数总和为1

> ID：10475861
> 
> 赞同：3
> 
> 时间：2012-05-07T01:59:15.477
> 
> 标签：algorithm, complexity-theory, dynamic-programming, number-theory

找到十个整数>0，总和为 2011，但它们的倒数总和为 1

例如

x1+x2+..+x10 = 2011

1/x1+1/x2+..+1/x10 = 1

我在这里发现了这个问题[http://blog.computationalcomplexity.org/2011/12/is-this-problem-too-hard-for-hs-math.html](http://blog.computationalcomplexity.org/2011/12/is-this-problem-too-hard-for-hs-math.html)

我想知道计算复杂度是多少，什么类型的算法可以解决它。

EDIT2：我编写了以下足够快的蛮力代码。我没有找到任何解决方案，所以我需要稍微调整一下我的假设。我现在有信心找到解决办法。

```
 from fractions import Fraction

pairs = [(i,j) for i in range(2,30) for j in range(2,30)]

x1x2 = set((i+j, Fraction(1,i)+Fraction(1,j)) for i,j in pairs)

print('x1x2',len(x1x2))

x1x2x3x4 = set((s1+s2,f1+f2) for s1,f1 in x1x2 for s2,f2 in x1x2 if f1+f2<1)

print('x1x2x3x4',len(x1x2x3x4))

count = 0
for s,f in x1x2x3x4:
    count+=1
    if count%1000==0:
        print('count',count)
    s2 = 2011 - s
    f2 = 1 - f
    for s3,f3 in x1x2:
        s4 = s2-s3
        if s4>0:
            f4 = f2-f3
            if f4>0:
                if (s4,f4) in x1x2x3x4:
                    print('s3f3',s3,f3)
                    print('sf',s,f) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:18:53.887

请注意，您不能为单个问题实例定义计算复杂度，因为一旦您知道答案，计算复杂度就是 O(1)，即常数时间。计算复杂度只能针对无限的问题族来定义。

解决此类问题的一种方法是使用回溯搜索。您的算法花费了太多时间来搜索 10 维空间中不能包含解的部分。一个有效的回溯算法将

*   [按 x 1] , x [2] , ..., x [10]的顺序分配变量
*   保持约束 x [1] <= x [2] <= ... <= x [10]
*   在搜索期间，总是在分配了编号 xi 时
    *   让 S = x [1] + ... + x [i]
    *   让 R = 1/x [1] + ... + 1/x [i]
    *   始终检查 S <= 2011 - (10 - i) * x [i]
    *   始终检查 R <= 1 - (1 / [(2011 - S) / (10 - i)])
    *   如果在搜索过程中没有满足这两个约束条件，则不再有解决方案，算法应立即回溯。请注意，约束是基于数字按升序分配的事实，即在所有情况下x [i] <= x [i+1]

注意：您可以加快搜索速度，限制搜索空间并加快计算速度，假设所有 x [1]，...，x [10]均分给定数字，例如 960。也就是说，您只考虑 x [i]即 960除以 x [i]是一个整数。这使得计算小数部分变得更加容易，因为您可以检查 960/x [1] + ... 是否等于 960 ，而不是检查 1/x [1] + ... 是否等于 960。因为所有除法都是偶数并返回整数，所以根本不需要使用浮点或有理算术，但一切都只适用于整数。当然，固定模数越小，你能找到的解就越少，但这也使得搜索速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:37:09.850

我注意到该系列的下一篇博客[http://blog.computationalcomplexity.org/2011/12/solution-to-reciprocals-problem.html](http://blog.computationalcomplexity.org/2011/12/solution-to-reciprocals-problem.html)中的一件事是关于该问题的论文，以及建议的动态计算答案数量的编程方法。由于它是一种动态编程方法，因此您应该能够将其转换为动态程序以找到这些答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:10:24.373

基于某人发布的 Bill Gasarch 论文的动态编程解决方案 (C#)。但这并不一定能找到最佳（使用的最少数字）解决方案。*只有在允许足够高的*情况下才能保证找到解决方案，但它不必与所需的 N 一致。基本上，我觉得它“意外地”适用于（2011 年 10 月）。

2011 年的一些示例解决方案：

*   10 个数字：2、4、5、80、80、80、160、320、640、640
*   11 个数字：3、6、4、12、12、24、30、480、480、480、480
*   13 个数字：2、4、5、200、200、200、200、200、200、200、200、200、200
*   15 个数字：3、6、6、12、16、16、32、32、32、64、256、256、256、512、512

任何人都知道如何修复它以使其正常工作？

```
using System;
using System.Collections.Generic;

namespace Recip
{
    class Program
    {
        static void Main(string[] args)
        {
            int year = 2011;
            int numbers = 20;

            int[,,] c = new int[year+1, numbers+1, numbers];

            List<int> queue = new List<int>();

            // need some initial guesses to expand on - use squares because 1/y * y = 1
            int num = 1;
            do
            {
                for (int i = 0; i < num; i++)
                    c[num * num, num, i] = num;
                queue.Add(num * num);
                num++;
            } while (num <= numbers && num * num <= year);

            // expand
            while (queue.Count > 0)
            {
                int x0 = queue[0];
                queue.RemoveAt(0);
                for (int i = 0; i <= numbers; i++)
                {
                    if (c[x0, i, 0] > 0)
                    {
                        int[] coefs ={ 20, 4, 2, 2, 3, 3};
                        int[] cons = { 11, 6, 8, 9, 6, 8};
                        int[] cool = {  3, 2, 2, 2, 2, 2};
                        int[] k1   = {  2, 2, 4, 3, 3, 2};
                        int[] k2 =   {  4, 4, 4, 6, 3, 6};
                        int[] k3 =   {  5, 0, 0, 0, 0, 0};
                        int[] mul =  { 20, 4, 2, 2, 3, 3};

                        for (int k = 0; k < 6; k++)
                        {
                            int x1 = x0 * coefs[k] + cons[k];
                            int c1 = i + cool[k];
                            if (x1 <= year && c1 <= numbers && c[x1, c1, 0] == 0)
                            {
                                queue.Add(x1);
                                c[x1, c1, 0] = k1[k];
                                c[x1, c1, 1] = k2[k];
                                int index = 2;
                                if (k == 0)
                                {
                                    c[x1, c1, index] = k3[k];
                                    index++;
                                }
                                int diff = index;
                                while (c[x0, i, index - diff] > 0)
                                {
                                    c[x1, c1, index] = c[x0, i, index - diff] * mul[k];
                                    index++;
                                }
                            }
                        }
                    }
                }
            }

            for (int n = 1; n < numbers; n++)
            {
                if (c[year, n, 0] == 0) continue;
                int ind = 0;
                while (ind < n && c[year, n, ind] > 0)
                {
                    Console.Write(c[year, n, ind] + ", ");
                    ind++;
                }
                Console.WriteLine();
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:30:43.383

有`Choose(2011,10)`或大约`10^26`10 个数字加起来等于 2011。因此，为了使蛮力方法起作用，必须显着修剪搜索树。

幸运的是，有几种方法可以做到这一点。

第一个明显的方法是要求数字是有序的。这将选项的数量减少了大约`10^7`.

第二个是我们可以及早发现我们当前的部分解决方案是否永远无法得出完整的解决方案。由于我们的值是有序的，因此集合中的剩余数字至少与当前数字一样大。请注意，数字之和随着数字变大而增加，而倒数之和则减少。

有两种确定的方法可以告诉我们我们处于死胡同：

1.  当我们将所有剩余数字与当前数字相同时，我们会从我们所在的位置得到最小的总数。如果这个最小的数目太大，我们永远不会得到更少。

2.  当我们取所有剩余数字与当前数字相同时，我们得到最大可能的倒数和。如果这个最大的和小于 1，我们永远不会达到 1。

这两个条件设置了 next 的上限`xi`。

第三，如果我们的部分倒数和大于或等于 1，我们可以停止查看。

将所有这些放在一起，这是 C# 中的一个解决方案：

```
static int[] x = new int[10];
static void Search(int depth, int xi, int sum, double rsum) {
    if (depth == 9) {
        // We know exactly what the last number should be
        // to make the sum 2011:
        xi = 2011 - sum;
        // Now check if the sum of reciprocals adds up as well
        if (Math.Abs(rsum + 1.0 / xi - 1.0) < 1e-12) {
            // We have a winner!
            x[depth] = xi;
            var s = string.Join(" ", Array.ConvertAll(x, n => n.ToString()));
            Console.WriteLine(s);
        }
    } else {
        int lastxi = xi;
        // There are 2 ways xi can be too large:
        xi = Math.Min(
            // 1\. If adding it (10 - depth) times to the sum
            // is greater than our total:
            (2011 - sum) / (10 - depth),
            // 2\. If adding (10 - depth) times its reciprocal
            // is less than 1.
            (int)((10 - depth) * remainder));
        // We iterate towards smaller xi so we can stop 
        // when the reciprocal sum is too large:
        while (xi >= lastxi) {
            double newRSum = rsum + 1.0 / xi;
            if (newRSum >= 1.0)
                break;
            x[depth] = xi;
            Search(depth + 1, xi, sum + xi, newRSum);
            xi--;
        }
    }
}
Search(0, 1, 0, 0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T02:29:51.860

如果您使用蛮力算法遍历所有组合，您最终会得到答案。但我认为它没有 10*2011*2011 这么大。因为你可以很容易地任意假设 x1

我认为蛮力方法很容易得到答案。但是，我想教练正在寻找一种数学方法。我认为“1”对于寻找如何操纵方程式来获得答案必须具有一定的意义。“2011”似乎是任意的。

# c++ - Linux 守护进程中的错误处理

> ID：10475865
> 
> 赞同：1
> 
> 时间：2012-05-07T02:00:15.033
> 
> 标签：c++, linux, unix, daemon

我正在编写一个服务器 Linux 守护进程。我想知道 UNIX/Linux 社区中的协议是什么，当守护程序遇到*致命*错误（例如，服务器无法侦听、分段错误等）时应该做什么。我已经完成了系统日志的全部工作，但我想知道如何处理致命错误。我应该记录并继续在一个无限的、无所事事的循环中运行吗？我应该登录并退出吗？在这里做的标准事情是什么，我该怎么做？

守护进程是用 C++ 编写的，我使用自定义异常系统来包装 POSIX 错误代码，所以我会知道什么时候是致命的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:10:50.700

存在一定程度的“致命错误”。

*   服务器无法监听可能是暂时的问题；您的守护进程可能应该继续尝试连接，可能会定期重试，然后慢慢退出（1 秒、2 秒、4 秒等）。

*   如果您发现 seg 错误，也许最好的办法是通过重新执行守护程序来尝试重新启动自身。当然，它可能会再次发生。

*   你不应该陷入无限的无所事事的循环；你应该终止而不是那样做。如果您的循环不是无限的，但可能会被信号或其他东西破坏，那么什么都不做也可以；我建议将`pause()`系统调用作为一种在不消耗 CPU 时间的情况下什么都不做的方法。

*   您当然应该在退出之前记录您正在做什么以及为什么。

# ruby - Ruby - Rails - 结构 SOAP XML 主体

> ID：10475869
> 
> 赞同：0
> 
> 时间：2012-05-07T02:01:08.500
> 
> 标签：ruby, xml, ruby-on-rails-3, soap, savon

我正在使用萨文。动态生成多个 SOAP 正文 XML 标记的正确方法是什么？我正在考虑这种方式，这不是正确的方法。

```
item_id = "abc,def,xyz"

item_xml = ""
item_id.split(",").each do |e|
item_xml << 'ItemId' => "#{e}" #Sure this is a wrong way
end
begin

myclient = Savon::Client.new  do |wsdl, soap|
wsdl.document = "http://somthing.com/service?wsdl"
wsdl.soap_actions
end
result = myclient.request :v1, :update  do |soap|
soap.namespaces["xmlns:v1"] = "http://somthing.com/service?wsdl"
end

#This is how I do for manual single entry of ItemId
soap.body =  {
'Body' => {
            'ItemList' => {
'ItemId' => "abc123"
            }
      }
}

#Want to generate soap body with multiple ItemId
soap.body =  {
'Body' => {
            'ItemList' => {
item_xml 

#shall be equivalent as this 
#'ItemId' => "abc",
#'ItemId' => "def",
#'ItemId' => "xyz"

            }
      }
} 
```

**编辑：** 如何根据元素的数量创建一个标签数组`item_id`？

```
item_id = "abc, def, xyz"
n = item_id.split(,).length

    #shall be equivalent as this 
    #ItemList shall be of n times
soap.body =  {
    'Body' => {
                'ItemList' => {  
    'ItemId' => "abc"
                }
                'ItemList' => {  
    'ItemId' => "def"
                }
                'ItemList' => {  
    'ItemId' => "xyz"
                }
          }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:56:01.057

使用 Savon 创建列表就像为特定键传递值数组一样简单：

```
require 'savon'

item_id = 'abc,def,xyz'

client = Savon::Client.new do |wsdl, soap|
  wsdl.endpoint = 'http://example.com'
  wsdl.namespace = 'http://example.com'
end

response = client.request :v1, :update  do |soap|
  soap.body =  {
    'ItemList' => {
      'ItemId' => item_id.split(',')
    }
  }
end 
```

# ruby-on-rails - Rails 如何决定是否加载“Controller.css”

> ID：10475870
> 
> 赞同：0
> 
> 时间：2012-05-07T02:01:21.570
> 
> 标签：ruby-on-rails, asset-pipeline

我创建了一个新的 Rails 应用程序，当我在一个名为 Welcome 的控制器的某个视图中时，如果我检查源代码，我发现它`welcome.css`正在被添加，即使我没有在布局中或在我的代码中的任何地方明确指定它.

但是，在另一个 Rails 应用程序中，当我在控制器中时，我们称它为 Welcome，每当我在视图中时，我都看不到 Welcome.css 正在加载。

Rails 如何决定是否需要特定控制器的 CSS？从 Rails 指南中，在我看来，您必须专门添加`stylesheet_link_tag params[:controller]`才能加载特定的 css，但在我的第一个应用程序中并非如此，我没有在任何地方设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:40:01.920

默认情况下，在 rails 3.2 中，rails 在`app/views/layouts/application.html.erb`

```
<%= stylesheet_link_tag    "application", :media => "all" %> 
```

并且需要你所有的样式表在`app/assets/stylesheets/application.css`

```
*= require_self
*= require_tree . 
```

这就是为什么您的 rails 3.2.2 应用程序会自动添加所有样式表的原因。如果您不想加载所有样式表，只需编辑这两个文件。

# iphone - 使用 ARC 填充 UITableView 的 NSMutableArray 的 removeAllObjects 崩溃

> ID：10475872
> 
> 赞同：0
> 
> 时间：2012-05-07T02:01:34.497
> 
> 标签：iphone, nsmutablearray

我有一个财产

```
@property (nonatomic, strong) NSMutableArray *timesArray; 
```

它用于在我的 UITableView 中填充数据。当我想清除视图时，我会这样做：

```
- (void)clearView {
    self.nameField.text = @"";
    self.noteField.text = @"";
    if ([_timesArray count] > 0) {
        [self.timesArray removeAllObjects];
        [self.customTableView reloadData];
    }
} 
```

removeAllObjects 会导致崩溃。我不确定为什么。我环顾四周，很多帖子都在谈论一个对象被过度释放。如果我使用 ARC 而没有在任何对象上调用保留/释放，那会发生什么情况。我的 _timesArray 只保存从 UIDatePicker 获得的 NSDate 对象。

我的堆栈跟踪如下所示：

![在此处输入图像描述](../Images/362159eae55177115d8fa75cdf4ddb9b.png)

我的 insertPill 看起来像：

```
- (void)insertPill:(id)sender {
    //[[NSNotificationCenter defaultCenter] postNotificationName:InsertPillNotification object:self];

    [self clearView];
} 
```

如果我不删除所有对象，只需执行以下操作：

```
NSMutableArray *emptyArray = [[NSMutableArray alloc] initWithCapacity:0];
self.timesArray = emptyArray; 
```

这行得通。但我仍然想知道为什么通过删除它不起作用的对象。

编辑：我在 viewDidLoad 中初始化数组：

```
_timesArray = [[NSMutableArray alloc] initWithCapacity:0]; 
```

当我想向数组中添加一个新对象时，我这样做：

```
NSMutableArray *tempUnsortedArray = [[NSMutableArray alloc] initWithArray:_timesArray];        
        [tempUnsortedArray addObject:_datePicker.date];
        self.timesArray = tempUnsortedArray; 
```

我不确定我添加数组数据的方式是否会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:36:36.277

你得到一个`doesNotRecognizeSelector:`例外。这可能意味着您认为是 a 的对象`NSMutableArray`并不是真正的对象。它可能是一个`NSArray`. 你在哪里分配对象？

要开始调试问题，`po`调用之前的对象`removeAllObjects`。它报告为什么类型的对象？

否则可能存在非`NSObject`元素`timesArray`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:29:34.563

```
@property (nonatomic, strong) NSMutableArray *timesArray;
if ([_timesArray count] > 0) 
```

看来，您像这样合成您的财产：

```
@syntesize timesArray = _timesArray; 
```

您检查 的计数`_timesArray`，但从中删除对象`timesArray`。我从来没有为我的属性设置新名称，也不确定它是如何工作的，但我不喜欢它。

# javascript - 使用“使用严格”和变量范围

> ID：10475875
> 
> 赞同：2
> 
> 时间：2012-05-07T02:02:27.693
> 
> 标签：javascript, scope, strict

我最近开始使用`"use strict"`我的脚本。我注意到的行为之一就是这个。`[name of variable]`不适用于对象。例如：

```
(function(){
  "use strict";

  window.person = {}
  person.name = {
    first: "first name",
    last: this.first
  }
}()); 
```

似乎严格的 js 不再允许它了。为什么要删除这个？有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T02:09:23.440

在没有任何隐式或显式上下文设置的情况下调用的函数中，`this`变为`undefined`.

如果您立即调用的函数的外部上下文是全局范围，并且这是您对其自身上下文的期望，您可以使用`.call(this)`将其上下文设置为外部上下文的上下文。

```
(function(){
    "use strict";

    window.person = {}
    person.name = {
        first: "first name",
        last: this.first
    }
}).call(this); 
```

无论是严格/非严格模式，`this`都永远不会引用使用文字表示法创建的对象。这就是 JavaScript 的工作原理。

# ruby-on-rails - 如何为新类的参数定义静态值？

> ID：10475876
> 
> 赞同：0
> 
> 时间：2012-05-07T02:02:40.537
> 
> 标签：ruby-on-rails, ruby

我为一个名为“课程”的事物创建了一个模型，该模型具有`:content`和`:user_id`. 对于此应用程序的早期版本，我希望根据我的条目更改内容，并且 user_id 始终 = 1，以便它在数据库中是干净的并且没有 nil 值。

我该怎么做？

在我的`lessons_controller.rb`我有这个：

```
 def create
    @lesson = Lesson.new(params[:lesson])
if @lesson.save
... do something
else 
... do something else 
```

我猜这将是定义 user_id = 1 的最佳位置，但我应该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:12:48.737

您可以`@lesson.user_id = 1`在使用 创建它之后`new`和之前设置`save`它。

另一种方法是在课程模型中设置一个钩子 -

```
before_validation :on => :create do |lesson|
  lesson.user_id = 1
end 
```

# php - 有条件地选择 mysql 表上的值

> ID：10475877
> 
> 赞同：2
> 
> 时间：2012-05-07T02:02:42.987
> 
> 标签：php, mysql

```
---------------------------------------------------------------------------------------
|   products_id   |   net_price  |  special_price  |  special_expire  | special_status
| -------------------------------------------------------------------------------------
|    1            |      500     |     200         |  2012-5-03 00:00 |      1
| -------------------------------------------------------------------------------------
|    2            |      600     |     300         |  2012-6-04 00:00 |      0
| -------------------------------------------------------------------------------------
|    3            |      700     |     400         |  2012-7-05 00:00 |      1
--------------------------------------------------------------------------------------- 
```

其中`products_id`, `net_price`, `special_price`,`special_expire`是不言自明的，`special_status`定义`1`为应用特价和`0`禁用特价。

我有一个搜索表单，其中有一个价格范围。

```
<form method="get" action="http://website.com">
    <input type="text" id="ref-search" name="search" value="<?php echo  $search_value;?>" class="text" size="55" placeholder="Type a keyword." style="height: 30px;
    width: 89%;">

<label>Price Range:</label><br>
<span class="price-range">
From <input type="text" id="price1" name="pricefrom" 
     value="<?php echo $pricefrom_value; ?>" class="text" style="
     height: 20px;
     width: 22%;"> 

to   <input type="text" id="price2" name="priceto" 
     value="<?php echo $priceto_value; ?>" class="text" style="
     height: 20px;
     width: 22%;">
</form> 
```

我很难开发或找到一个解决方案来有条件地选择`net_price`是否`special_price`是`0.000`、`special_expire`日期值已通过或`special_status`的值是`0`。然后，如果 中有一个值，则`special_price`日期`special_expire`值尚未通过，然后选择该`special_status`值。`1``special_price`

这是我想要的图片。（我知道这是不可能的，但我想这是解决我的问题的最好方法。）

```
 $sql = "select products_id, products_price, special_price, special_expire,  
            special_status, products_name from " . TABLE_GLOBAL_PRODUCTS . "  where
            products_name like '%" . $search_key . "%' 

    and /**Where the condition starts**/ 

    if(special_value is =="0.000" || special_expire == <EXPIRED> || 
       special_status =="0") {
       products_price >= ".$pricefrom_key." and products_price <= ".$priceto_key."
    } else {
       specials_new_products_price >= ".$pricefrom_key." 
       and specials_new_products_price <= ".$priceto_key." order by products_name
    }"; 
```

我希望你们能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:21:27.343

试试这个：

```
$sql = "SELECT products_id, products_price, special_price, special_expire, 
special_status, products_name, 
case when (special_price > 0 and special_expire > Now() and special_status != 0) 
then special_price else net_price end price from " . TABLE_GLOBAL_PRODUCTS . " 
where products_name like '%" . $search_key . "%' 
having price >= ".$pricefrom_key." and price <= ".$priceto_key."; 
```

确保你逃避你的输入！

# android - Android - drawBitmap中的浮动参数

> ID：10475880
> 
> 赞同：1
> 
> 时间：2012-05-07T02:03:38.463
> 
> 标签：android, image, bitmap, floating-point, drawbitmap

我在我的 Android 程序中使用了这个函数：

public void drawBitmap（位图位图，向左浮动，浮动顶部，油漆油漆）

但是，我想绘制的位图不是在 0 x 0 的位置，而是在 10 x 10 **(in PIXELS)**的位置。然而，drawBitmap 函数只接受浮点数......

我怎样才能做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:19:41.953

你试过`drawBitmap(bitmap, 10.f, 10.f, ... )`吗？考虑将画布的变换矩阵设置为单位矩阵，即。

这些参数的原因`float`可能是它们`Canvas`不在整数空间（像素）中运行，而是在由变换矩阵定义的用户指定空间中运行。如果您在哪里设置自定义转换矩阵以进行缩放，`2`那么 using`0.5, 0.5`最终会映射到 pixel `1, 1`。这意味着您还可以设置自定义转换来转换`10, 10`，然后只需简单地绘制位图而不指定目标。

# c++ - 循环构造函数

> ID：10475882
> 
> 赞同：0
> 
> 时间：2012-05-07T02:04:19.930
> 
> 标签：c++, constructor, singleton, cyclic-reference

假设结构 A 和 B 是定义如下的单例结构：

```
struct A
{
    B& b_;
    static A& shared_a() { ... }
    A() : b_(B::shared_b()) { ... }
};

struct B
{
    A& a_;
    static B& shared_b() { ... }
    B() : a_(A::shared_a()) { ... }
}; 
```

假设文件结构被组织，以便代码可以编译。

第一次调用A::shared_a，会构造A的共享实例。A的共享实例的构造函数会调用B::shared_b，B::shared_b会构造B的共享实例。接下来，共享的构造函数B 的实例将调用 A::shared_a。但是，A 的共享实例还没有完成它的构造函数！因此，这些构造函数将无限循环。

为了防止这样的循环，我可以合并类 A 和 B，但我想避免这样做。有没有更优雅的解决方案？

谢谢，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:55:15.020

Your code exhibits undefined behavior, and you might get either the infinite loop that you mention or any other weird behavior. Now, the problem is not with how to solve it, but rather break the cyclic dependency, which is usually a code smell.

If you are still convinced that your design makes sense, and if your constructors only store the references (without using the objects) you can change the constructors to take a reference to the object.

Again, I would avoid the cyclic dependency.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:15:09.797

你如何给 shared_a() 一个 B 本身的引用，以便在 shared_a 的 A_constructor 中它可以将该引用设置为它的 b_？

# php - WordPress.com 如何动态调整图像大小？

> ID：10475884
> 
> 赞同：0
> 
> 时间：2012-05-07T02:05:29.547
> 
> 标签：php, wordpress, image-resizing, dynamic-image-generation, wordpress.com

***注意：**这个问题很棘手（决定它是否与 SO 相关），但这不是简单的 WordPress 问题。*

我听说 WordPress.com 有一个独立的基础架构层（基于 Nginx 的服务器）用于图像，几乎独立于托管的 WordPress 博客。

问题是，WordPress.com 博客上的任何图像都可以通过附加`w`（宽度）和/或`h`（高度）参数来调整大小，如下所示：

`http://serenescribe.files.wordpress.com/2012/04/cropped-p1000206.jpg?w=400`
`http://serenescribe.files.wordpress.com/2012/04/cropped-p1000206.jpg?h=200`

脚本在网络上可用吗？（因为，他们[总是说](http://automattic.com/work-with-us/) *“我们是开源的坚定信徒，我们会尽力开源。”*）

大多数动态图像大小调整脚本都不安全并且很容易受到攻击（Tim Thumb），或者写得不好，或者以性能为代价。有/有什么好的吗？

**PS：**可能还有其他几个动态图像调整脚本，例如 TimThumb。但我只对 WordPress.com 博客使用的内容感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:41:23.077

**(1)**使用 TimThumb，然后重新调整图像大小就像附加一些参数一样简单：

`http://example.com/timtumb.php?src=wp-content/uploads/2010/03/high_res_horsey.png&w=300&h=100`

**(2)**然后在您站点的根 .htaccess 文件中添加这些重写规则：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_URI} \.(gif|png|jpg|jpeg)
RewriteCond %{QUERY_STRING} (w|h)=(.*)$
RewriteRule (.*) /full/path/to/timthumb.php?src=$1&%1=%2&%3=%4 [L] 
```

快速分解规则：

1.  检查 URI 是否作为文件存在。
2.  检查有问题的 URI 是否为图像。根据需要扩展到其他格式。
3.  检查宽度和高度中的一项或两项是否正在更改。
4.  将以下文件作为变量传递给 timthumb：
    *   $1 = 文件名
    *   %1 = w 或 h
    *   %2 = w 或 h 的值
    *   %3 = w 或 h
    *   %4 = w 或 h 的值

**(3)**现在，您几乎可以像在 WordPress.com 上一样调整图像大小，例如：

`http://example.com/wp-content/uploads/2010/03/high_res_horsey.png?w=300&h=100`

来自[http://www.myrant.net/2011/03/07/mimicking-wordpress-coms-image-resize-uris/](http://www.myrant.net/2011/03/07/mimicking-wordpress-coms-image-resize-uris/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:33:07.673

我创建了一个简单的插件，它可以根据 markratledge 提供的解决方案帮助其他人。

您可以在[https://github.com/ubc/wave-resize-image](https://github.com/ubc/wave-resize-image)上找到它。

确保按照 readme.txt 中的说明更新您的 .htaccess 文件以使其正常工作。

# android - 为片段设置动画，使其部分在屏幕外

> ID：10475891
> 
> 赞同：2
> 
> 时间：2012-05-07T02:06:40.037
> 
> 标签：android, android-fragments, android-animation

当出现新片段时，我想部分隐藏片段。

我在 GitHub 上的 ScienceGuy 代码上构建，[如 Gmail Honeycomb App 之类的片段动画中所引用](https://stackoverflow.com/questions/7339498/fragment-animation-like-gmail-honeycomb-app)

我从三个片段开始。最左边的权重为 6，中间的权重为 4，最右边的权重为 4。将 weightSum 设置为 10 会使左侧和中间的片段出现，而最右侧则在屏幕外。这就是我要的。

当用户在中间片段中选择一个项目时，我想转换左侧片段，使其三分之二离开屏幕左侧。由于权重，我将有效地拥有 2、4、4。此时，右侧片段已完全移动到屏幕上。

使用 ScienceGuy 的代码，当左侧片段滚动关闭时，我可以让右侧片段出现，但左侧片段完全消失。

我尝试使用以下代码：

```
final float middleFragmentWidth = getMiddleFragment().getView().getWidth();
ObjectAnimator animIn = ObjectAnimator.ofFloat(null, "x",
        -middleFragmentWidth/2, 0).setDuration(
        trans.getDuration(LayoutTransition.APPEARING));
trans.setAnimator(LayoutTransition.APPEARING, animIn);

ObjectAnimator animOut = ObjectAnimator.ofFloat(null, "x", -middleFragmentWidth,
        -middleFragmentWidth/2).setDuration(
            trans.getDuration(LayoutTransition.CHANGE_DISAPPEARING));
trans.setAnimator(LayoutTransition.DISAPPEARING, animOut); 
```

我怀疑Android期望一个片段在“隐藏”时完全隐藏。有没有办法为片段设置动画，使它们实际上不是隐藏的，而是部分在屏幕外？

或者，我可以将三个片段放入一个 Horizo​​ntalScrollView 中，然后尝试对其进行动画处理。但是，我没有这样做，因为最中间和最右边的片段包含列表视图，并且[根据文档](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)要避免在 Horizo​​ntalScrollView 中使用列表视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T00:52:16.190

我最终创建了一个基于 LinearLayout 的自定义视图，它是设备宽度的 150%。

```
public class AutoSizingLinearLayout extends LinearLayout {
    private static final String TAG = AutoSizingLinearLayout.class.getSimpleName();
    final int myWidth;

public AutoSizingLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    myWidth = setScaledWidth(context);
}

public AutoSizingLinearLayout(Context context) {
    super(context);
    myWidth = setScaledWidth(context);
}

private int setScaledWidth(Context context) {
    if (this.isInEditMode()){
        return 1000;
    } else {
        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        return (int) (1.5 * wm.getDefaultDisplay().getWidth());
    }
}

@Override
public android.view.ViewGroup.LayoutParams getLayoutParams() {
    android.view.ViewGroup.LayoutParams params = super.getLayoutParams();
    params.width = myWidth;
    return params;
} 
```

然后我像这样动画它。

```
 ObjectAnimator a = ObjectAnimator.ofFloat(linearView,"translationX", -scrollamount).setDuration(900);
                a.start(); 
```

# php - PHP + MVC - 我的域模型很困惑

> ID：10475892
> 
> 赞同：0
> 
> 时间：2012-05-07T02:07:09.253
> 
> 标签：php, model-view-controller, design-patterns

我正在构建一个 Web 应用程序，该应用程序需要能够将数据写入 mysql db 或 xml 文件，具体取决于应用程序的在线状态。

在我的模型中，我有一个超类（Dao 是数据访问对象）......

```
 abstract class Dao {

    static function getInstance($online_status) {

        if $online_status = 'online' {

            return new DaoMySQL;

        } else {

            return new DaoXML;

        }

    }

    abstract function dao_select();
    abstract function dao_insert();
    abstract function dao_update();
    abstract function dao_delete();

} 
```

现在，这是我感到困惑的部分。我有一个域模型/实体类，它使用以下方法选择适当的 Dao：

```
$this->dao = Dao::getInstance($online_status); 
```

所以，现在我选择了正确的数据访问对象。但是，问题是我仍然是 dao_select() 和其他函数的两个实现。现在，主要实现在各自的类 DaoMySQL 和 DaoXML 中，但是每个类中的 dao_select() 需要不同的东西。即 DaoMySQL 版本需要两个参数，$table 和 $where_statement。DaoXML（我还没有实现）将需要元素名称，也许还有另一个参数，我不知道。

所以，在我的域模型类中，调用后

```
$this->dao = Dao::getInstance($online_status); 
```

这是我需要包含 dao_select() 的两个单独的本地实现（仅与域模型/实体类有关）的地方，还是这个错误？似乎我通过执行以下操作将优雅带出过程：

```
class EntityModel {

  $this->dao = Dao::getInstance($online_status);

  if($this->dao->type = 'mysql') {

    $result = $this->dao->dao_select($table, $where);

  } else {

    $result = $this->dao->dao_select($xml_params);

  }

} 
```

我觉得我正在从系统中删除简单性......这种方法是否有意义，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:30:11.647

你这样做是不对的。

开头的几点说明：

*   在 OOP 中，该`extends`语句表示**的是一种**关系。这意味着，虽然`class Duck extends Bird`一切都很好，但**写作**`class User extends Table`不是。
***   在 MVC 中，模型不是类或类的实例。相反，它是一层应用程序，主要由两种类型的元素组成：
    1.  领域对象：包含领域业务规则和逻辑
    2.  数据访问结构：通常是处理信息存储和检索的数据[映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)**

 **我[认为](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)，模型层的第三个重要部分是服务。但是有关于它是模型的一部分还是高于模型的选项。

目前您正在尝试做的是强制使用 ActiveRecord（这对于小事情来说很好，但随着项目的增长，它会成为架构的负担......这就是您现在所面临的）模式来处理动态数据源。为此，您正在诉诸程序调用。

无论如何，关键是您应该将您的`DAO`实例注入您的*域对象*（您称之为“模型”）。并且您应该将您的创建留给`DAO`一个单独的工厂实例，该实例将负责初始化它们并为它们提供数据源（PDO 实例或文件路径）。这样，您不仅可以分离职责，还可以“即时”交换存储目标。

要了解更多信息，您应该研究什么是[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。以下是一些可能有帮助的视频：

*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [全局状态和单例](http://www.youtube.com/watch?v=-FRm3VPhseI)**

# sql - 将 PL/SQL 转换为 SQL - 按语句连接

> ID：10475894
> 
> 赞同：1
> 
> 时间：2012-05-07T02:07:49.267
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [SQL SERVER 中 ORACLE 的 CONNECT BY PRIOR 模拟](https://stackoverflow.com/questions/959804/simulation-of-connect-by-prior-of-oracle-in-sql-server)

--我需要将下面的 PL/SQL 转换为 SQL

```
SELECT  DataMapId, REPLACE((QtyType, '#'), '#') AS QtyTypes
            FROM    (
                        SELECT  DataMapId, '<QtyType>' + cast(DataTypeId as nvarchar(200)) + '</QtyType>' AS QtyType,
                                ROW_NUMBER() OVER (PARTITION BY DataMapId ORDER BY DataTypeId) AS rn
                        FROM    tblDataMapChannels
                    )
            WHERE   CONNECT_BY_ISLEAF = 1
            CONNECT BY  rn = PRIOR rn + 1
                AND     DataMapId = PRIOR DataMapId
            START WITH  rn = 1 
```

# java - Java 刽子手程序出现严重错误

> ID：10475895
> 
> 赞同：1
> 
> 时间：2012-05-07T02:08:06.617
> 
> 标签：java, swing

我是 Java 的初学者，需要为 Java 最终项目组合一个应用程序。我想做刽子手（当时看起来很容易）。这对我来说非常困难。到目前为止，这是我的代码。（这真是令人厌恶的大约 10 个开源刽子手游戏拼凑在一起）。我的问题见底部。

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import java.util.ArrayList; 

public class Hangman implements ActionListener {
JFrame frame;
private String[] wordList = {"computer","java","activity","alaska","appearance","article", 
   "automobile","basket","birthday","canada","central","character","chicken","chosen", 
   "cutting","daily","darkness","diagram","disappear","driving","effort","establish","exact", 
   "establishment","fifteen","football","foreign","frequently","frighten","function","gradually", 
   "hurried","identity","importance","impossible","invented","italian","journey","lincoln", 
   "london","massage","minerals","outer","paint","particles","personal","physical","progress", 
   "quarter","recognise","replace","rhythm","situation","slightly","steady","stepped", 
   "strike","successful","sudden","terrible","traffic","unusual","volume","yesterday" }; 
public String mysteryWord; 
public int lives;
private boolean finished = false;
private boolean won = false;
private Button a[];
public boolean used[] = new boolean[26]; 

public static void main (String[] args) {
    Hangman gui = new Hangman();
    gui.go();
    }

class myDrawPanel extends JPanel {
    public void paintComponent(Graphics g) {
     setBackground(Color.white);
     g.setColor(Color.gray);
     g.fillRect(50, 200, 150, 20);
     g.fillRect(90,20,10,200);
     g.fillRect(90,20,60,10);
     g.setColor(Color.black);
     g.fillRect(145,20,5,25);
     g.setColor(Color.green);
        if (lives < 6 )
            g.drawOval(132,45,30,30);
        if (lives < 5 )
            g.drawLine(147,75,147,100);
        if (lives < 4 )
            g.drawLine(147,100,167,133);
        if (lives < 3 )
            g.drawLine(147,100,127,133);
        if (lives < 2 )
            g.drawLine(147,75,167,85);
        if (lives < 1 )
            g.drawLine(147,75,127,85);

            StringBuffer guessed = new StringBuffer();

            for (int cl = 0; cl < mysteryWord.length(); cl++) {
                    if (used[(int)mysteryWord.charAt(cl)-65])
                            guessed.append(mysteryWord.charAt(cl));
                    else
                            guessed.append(".");
                    }

            g.drawString(guessed.toString(),75,230);
                 //currentWordLA.setText("Current word: " + mysteryWord);

         if (lives < 1) {
            g.setColor(Color.white);
            g.fillRect(70, 200, 200, 30);
            g.setColor(Color.black);
            g.drawString(mysteryWord.toString(),75,230);
            Font fff = new Font("Helvetica",Font.BOLD,36);
            g.setFont(fff);

            g.setColor(Color.red);
            g.drawString("You lose!",200,100);

            finished = true;
            }

         if (won) {
            Font fff = new Font("Helvetica",Font.BOLD,36);
            g.setFont(fff);

//                Color red=new Color.red
            g.setColor(Color.red);

            g.drawString("You Win!",200,100);
            finished = true;
            }
  }
 }

public void go() {

///////////////////////DESIGN BEGIN//////////////////////////////////////////////
    frame = new JFrame("Hangman");
    JPanel topPanel = new JPanel();
    myDrawPanel noosePanel = new myDrawPanel();
    JPanel bottomPanel = new JPanel();
    JPanel scorePanel = new JPanel(new FlowLayout(FlowLayout.LEFT));

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout( new GridLayout( 2, 0) );
    bottomPanel.setLayout( new GridLayout( 0, 2) );
    scorePanel.setSize(20,100);

    noosePanel.setBorder(BorderFactory.createTitledBorder("Your progress.")); 
    topPanel.setBorder(BorderFactory.createTitledBorder("Your arsenal.")); 
    scorePanel.setBorder(BorderFactory.createTitledBorder("Your score.")); 
    frame.add(topPanel);
    frame.add(bottomPanel);
    bottomPanel.add(scorePanel);
    bottomPanel.add(noosePanel);

//Just the stats panel.
    JPanel stats = new JPanel();
    JLabel currentWordLA = new JLabel("Current word:");
    JLabel triedLettersLA = new JLabel("Tried letters:");
    JLabel triesLeftLA = new JLabel("Tries remaining:");
    JButton restart = new JButton("Reset");

        currentWordLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        currentWordLA.setForeground(Color.black);
        triedLettersLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        triedLettersLA.setForeground(Color.black);
        triesLeftLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        triesLeftLA.setForeground(Color.black);
        restart.setFont(new Font("Verdana", Font.PLAIN, 16));
        restart.setForeground(Color.red);

            stats.setLayout(new GridBagLayout()); 
            GridBagConstraints c = new GridBagConstraints(); 
            c.gridx = 0; 
            c.gridy = 0; 
            c.insets = new Insets(20,0,0,0); 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(currentWordLA, c); 
            c.gridx = 0; 
            c.gridy = 1; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(triedLettersLA, c); 
            c.gridx = 0; 
            c.gridy = 2; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(triesLeftLA, c); 
            c.gridx = 0; 
            c.gridy = 3; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(restart, c); 
            scorePanel.add(stats);
///////////////////////DESIGN END////////////////////////////////////////////// 
///////////////////////ALPHABET BEGIN//////////////////////////////////////////
    int i;
    StringBuffer buffer;
    a = new Button[26];
    topPanel.setLayout( new GridLayout( 4,0, 10, 10) );
    for (i = 0; i <26; i++) {
           buffer = new StringBuffer();
            buffer.append((char)(i+65));
            a[i] = new Button(buffer.toString());
            a[i].setSize(100,100);
            a[i].addActionListener( this );
          topPanel.add(a[i]);
        }
///////////////////////ALPHABET END//////////////////////////////////////////
//Just shows the entire window.                  
    frame.setSize(500, 500);
    frame.setResizable(false);
    frame.setVisible(true);
//////////////////////GAMEPLAY BEGIN////////////////////////////////////////
    lives = 6;
    mysteryWord = wordGen();

}

//Returns a random word from the wordList bank.
    private String wordGen() {
        return wordList[0 + (int)(Math.random() * ((63 - 0) + 1)) ]; //Make sure to set these to nonprinted chars eventually
    }

    public void consultWord(int letter) {
        if (finished == false) {
            boolean found = false;
        boolean www = false;
                if (used[letter] = false) {
                for (int cl = 0 ; cl < mysteryWord.length(); cl++) {
                if (mysteryWord.charAt(cl)==((char)(letter+65))) found = true;
            }
            if (found == false) 
                    lives = lives - 1;
                }
    used[letter] = true;
            for (int cl = 0; cl < mysteryWord.length(); cl++) {
          if (!used[(int)(mysteryWord.charAt(cl)) - 65]) www = true;
            }
            if (www = false) won = true;        
            frame.repaint();
    }
    }

    public void actionPerformed( ActionEvent e) {
        int i;
        for (i = 0; i < 26; i++) {
            if (e.getSource() == a[i]) { 
            consultWord(i); }
  }
}       
} 
```

目前这不起作用。我运行它，然后出现大量线程异常错误。（它编译得很漂亮）。带我去的第一行是

```
if (used[(int)mysteryWord.charAt(cl)-65]) 
```

我不确定这条线有什么问题。此外，原作者使用了数字 65。我调整了代码并使用了自己的变量，以便了解它是如何工作的。但是数字 65 和它来自哪里，我一辈子都想不通。有任何想法吗？

我需要知道是什么导致了所有线程异常。GUI 构建得很好。只是所有的数学和触发器把事情搞砸了。（我自己构建的GUI！:)）

*例外*

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 34
    at Hangman$myDrawPanel.paintComponent(Hangman.java:55)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T02:49:47.793

This is mostly not a direct answer to your question, but it is relevant to the larger issue of learning to write software ... which is your overall goal. (And there's a real answer at the bottom.)

You write:

> (it's really an abomination of about 10 open source hangman games thrown together)

Taking a bunch of existing programs (of dubious quality *) and mashing them together is NOT a good way to create software.

*   You inherit the problems of functionality and style in the existing code that you have "harvested".
*   You add a bunch of new functionality and style problems caused by mismatches between the different code bases ... and your conception.

Code reuse *can be* a good thing, but you need to be disciplined and selective:

*   Do *design* your own code ... following the design principles that you have been taught.
*   Do reuse at the library level, using well-engineered libraries.
*   Don't reuse by copy-and-pasting.
*   Don't reuse code (or libraries) that looks like a dog's breakfast. (If the author is sloppy with his/her code style and API design, that's a bad sign for other quality issues.)

* * *

(* The fact that you are seeing obscure numbers like 65 embedded in the code is a sign of poor code quality. The author could and should have written that as `'A'`.)

In fact, this might be the root of your bug, since it looks like your "mystery" words are in lowercase. `'a' - 'A'` is `32`, and that is larger than the bounds of your `used` array.

And this brings us back to my main point. Because, apparently, in your code mashing you have failed to understand the implied invariants of the code you copied ... and broken them. The problematic statement that is throwing the exception is designed to work with uppercase-only words ... but you've changed that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:11:33.687

65 是字母“A”的 ASCII 字符代码。有问题的行是从 ASCII 序数值转换为 0-25 范围内的值，这允许`used`数组存储是否已检查字母表的每个字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T03:02:57.523

65 是 'A' 的 ASCII，但你的单词都是小写的。所以，而不是`(int)mysteryWord.charAt(cl)-65`，你应该做`(int)mysteryWord.charAt(cl)-'a'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T03:00:22.517

改变

```
if (used[(int)mysteryWord.charAt(cl)-65])
    guessed.append(mysteryWord.charAt(cl));
else
    guessed.append(".");
} 
```

至

```
if (used[(int)mysteryWord.charAt(cl)-97])
    guessed.append(mysteryWord.charAt(cl));
else
    guessed.append(".");
} 
```

第 55 行的代码在转换为 ASCII 时，最终的值大于所用数组的大小。

# java - 使用 ByteArrayInputStream 从套接字接收 byte[]

> ID：10475898
> 
> 赞同：10
> 
> 时间：2012-05-07T02:09:10.210
> 
> 标签：java, sockets, io, inputstream, bytearrayinputstream

这是代码，但出现错误：

```
bin = new ByteArrayInputStream(socket.getInputStream()); 
```

是否可以从套接字接收`byte[]`使用？`ByteArrayInputStream`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-07T02:18:34.507

不可以。`ByteArrayInputStream`当你有一个字节数组并且你想从数组中读取它时，就像它是一个文件一样。如果您只想从套接字读取字节数组，请执行以下操作：

```
InputStream stream = socket.getInputStream();
byte[] data = new byte[100];
int count = stream.read(data); 
```

该变量`count`将包含实际读取的字节数，数据当然会在数组中`data`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-07T02:53:38.603

您无法`ByteArrayInputStream`通过直接从套接字读取来获取的实例。
您需要先阅读并找到字节内容。
然后用它来创建一个`ByteArrayInputStream`.

```
InputStream inputStream = socket.getInputStream();  

// read from the stream  
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
byte[] content = new byte[ 2048 ];  
int bytesRead = -1;  
while( ( bytesRead = inputStream.read( content ) ) != -1 ) {  
    baos.write( content, 0, bytesRead );  
} // while 
```

现在，由于您手头有包，我认为您仍然不需要`bais`实例。
但是，为了使其完整，
您可以生成字节数组输入流，如下所示

```
ByteArrayInputStream bais = new ByteArrayInputStream( baos.toByteArray() ); 
```

# android - 绘制位图时未调用Android surfaceview oncreated

> ID：10475901
> 
> 赞同：2
> 
> 时间：2012-05-07T02:10:06.967
> 
> 标签：android, surfaceview, android-canvas

我在 SurfaceView.updateWindow 中得到一个空指针异常，我猜是因为我在 onDraw 但从未在表面上收到 surfaceCreated。那么有没有办法解决这个问题或在直接渲染到位图时强制调用surfacecreated。

当作为内容视图添加到活动中时，此表面视图会正确呈现。但我实际上想将surfaceview直接渲染为位图而不在任何地方显示。

SurfaceView 构造函数：

```
public ObservationDetailsGraphicView(Context context) {
    super(context);
    getHolder().addCallback(this);  
} 
```

SurfaceView onDraw：

```
@Override
    protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    LayoutInflater inflater = LayoutInflater.from(c);
    View detailView = inflater.inflate(R.layout.observation_details_graphic_view,null);
    detailView.setLayoutParams(new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    detailView.measure(bmWidth, bmHeight);          
    detailView.layout(0, 0, bmWidth, bmHeight);
    detailView.draw(canvas);  //null pointer exception here
} 
```

调用代码：

```
Bitmap exportBitmap = Bitmap.createBitmap(640, 960, Bitmap.Config.RGB_565);
Canvas canvas = new Canvas(exportBitmap);
ObservationDetailsGraphicView view = new ObservationDetailsGraphicView(this);
view.draw(canvas); 
```

我在 logcat 中看不到任何相关内容，但这里是堆栈的相关部分：

```
ObservationDetailsGraphicView(SurfaceView).updateWindow(boolean, boolean) line: 473 
ObservationDetailsGraphicView(SurfaceView).dispatchDraw(Canvas) line: 350   
ObservationDetailsGraphicView(View).draw(Canvas) line: 6883 
ObservationDetailsGraphicView(SurfaceView).draw(Canvas) line: 336 
```

# .net - 在 .NET/SQL Server 环境中管理数据库版本控制的常用方法有哪些？

> ID：10475902
> 
> 赞同：1
> 
> 时间：2012-05-07T02:10:31.463
> 
> 标签：.net, sql-server, version-control, database-schema

假设我在本地数据库副本的表上创建了一个新列，用于测试一些新功能，并且我想最终将这些更改合并到内部测试环境和最终生产级环境中？到目前为止，这是通过编写更改脚本手动完成的。有没有更好的方法来做到这一点或一些可以自动化过程的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:22:36.697

Redgate SQL Compare 是我用来将更改从开发迁移到暂存到生产的工具。它可以节省数小时的时间。

同样来自 Redgate 的是 SQL 源代码控制，它可以与您的源代码控制系统集成以存储数据库更改的历史记录。

我强烈推荐 Redgate 的 SQL Compare。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:41:10.547

如果您使用的是实体框架，您可以查看最新版本中的新迁移功能。它基本上会检查您要部署到的数据库的版本并为您生成必要的更改脚本。在此处阅读更多信息：[EF 4.3 基于代码的迁移演练](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# iphone - 配置的选项，例如“--extra-cflags” ---我很困惑

> ID：10475903
> 
> 赞同：3
> 
> 时间：2012-05-07T02:10:50.020
> 
> 标签：iphone, ios, macos, configure

```
 # configure for i386 build
./configure \
--cc=/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc \
--as='gas-preprocessor.pl /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc' \
--sysroot=/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk \
--extra-ldflags=-L/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/usr/lib/system \
--target-os=darwin \
--arch=i386 \
--cpu=i386 \
--extra-cflags='-arch i386' \
--extra-ldflags='-arch i386' \
--prefix=compiled/i386 \
--enable-cross-compile \
--disable-armv5te \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffserver \
--disable-ffprobe \
--disable-doc 
```

下面将为 i386 构建 ffmpeg 静态库。但我不知道选项的含义，例如“--extra-cflags”、“--extra-ldflags”、“--sysroot="、"--as="。

谁能告诉我那些选项是什么意思？我在哪里可以找到详细说明？</p>

谢谢 。我正在等待你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T02:14:00.967

您始终可以将`configure`脚本运行为`configure --help`; 它将打印有关许多已接受参数的使用声明和信息——通常，希望是感兴趣的特定于包的参数。

也就是说，`--extra-cflags`将为 C 编译器提供额外的命令行开关，`--as`提供汇编器的路径，`--sysroot`提供备用安装目录，并`--extra-ldflags`为链接器提供额外的标志。这些都是相当先进的，你不太可能需要使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:53:32.717

这是一个有趣的`configure`脚本，因为通常的 Autoconf 使用环境变量来表示诸如 C 标志 ( `CFLAGS`) 和 C 编译器位置 ( `CC`) 之类的东西。例如：

```
CC=/path/to/my/specific/gcc/version CFLAGS="-I/additional/include/dir -L/additional/library/dir" \
./configure --prefix=/installation/dir --host=cross-compiler-triplet-if-any \
--enable-something --with-some-feature --disable-something-else 
```

# windows - 将一个文本文件中的多行合并为一行

> ID：10475906
> 
> 赞同：3
> 
> 时间：2012-05-07T02:11:00.733
> 
> 标签：windows, string, batch-file

所以我有一个包含多行字母和数字的文件，如图所示：

```
a 
1
h
7
G
k
3
l 
```

结尾

我需要一种将它们组合在一起并最好将其输出到变量中的代码，如下所示：

```
var=a1h7Gk2l 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T02:47:54.247

```
@echo off
setlocal enableDelayedExpansion
set "var="
for /f "usebackq" %%A in ("test.txt") do set var=!var!%%A
echo !var! 
```

***Edit***
I assumed "END" does not physically exist in your file. If it does exist, then you can add the following line after the FOR statement to strip off the last 3 characters.

```
set "!var!=!var:~0,-3!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:40:49.207

或者，如果您只想将结果放入文件中（而不是出于某种目的将其存储在内存中），您可以执行以下操作：

```
@ECHO OFF
TYPE NUL >output.txt
FOR /F %%L IN (input.txt) DO (
  IF NOT "%%L" == "END" (<NUL >>output.txt SET /P "=%%L")
)
ECHO.>>output.txt 
```

最后一个命令可能是不必要的，这取决于您是否需要在行尾使用 End-of-Line 符号。

# php - 删除按钮不起作用

> ID：10475914
> 
> 赞同：0
> 
> 时间：2012-05-07T02:11:33.900
> 
> 标签：php, javascript, jquery, html

在我的 jQuery 中，我有一个用于创建删除按钮的按钮：

```
$("#add").click(function() {
    var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"field" + intId + "\"/>");
    var removeButton = $("<input type=\"button\" id=\"remove\" class=\"btn\" value=\"Remove\" />");
    removeButton.click(function() {
        $(this).parent().remove();
    });

    fieldWrapper.append(removeButton);
}); 
```

但是，当我使用 PHP 而不是 jQuery 手动添加删除按钮时

```
<div class='fieldwrapper' id=<? echo "field".$counter ?>
    <input type='button' id='remove' class='btn' value='Remove'>
</div> 
```

我检查了 fieldwrapper`id`是否没有重叠，为什么它不起作用？谢谢你。

## 更新：

```
$(document).ready(function() {
    $("#config").validate();

    $('#id').click(function() {
        $(this).parent().remove();
    });

    $("#add").click(function() {
        var intId = $("#configField div").length + 1;
        var label = $("<label>Field Name:</label>");
        var labelType = $("<label>Field Type:</label>");
        var labelReq = $("<label>Require:</label>");
        var labelTag = $("<label>Tag:</label>");
        var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"field" + intId + "\"/>");
        var fName = $("<input type=\"text\" name=\"Name" + intId + "\" class=\"required\" />");
        var fTag = $("<input type=\"text\" name=\"Tag" + intId + "\" class=\"required\" />");
        var fReq = $("<select  class=\"required\" name=\"Req" + intId + "\" ><option selected=\"\" value=\"\">Please Select</option><option value=\"1\">Yes</option><option value=\"0\">No</option></select>");
        var fType = $("<select  class=\"required\" name=\"Type" + intId + "\"  ><option selected=\"\" value=\"\">Please Select</option><option value=\"txt\">Text</option><option value=\"int\">Numbers</option><option value=\"bool\">Boolean</option></select>");
        var removeButton = $("<input type=\"button\" id=\"remove\" class=\"btn remove\" value=\"Remove\" />");

        fieldWrapper.append('<br>');
        fieldWrapper.append(label);
        fieldWrapper.append(fName);
        fieldWrapper.append('<br>');
        fieldWrapper.append(labelType);
        fieldWrapper.append(fType);
        fieldWrapper.append('<br>');
        fieldWrapper.append(labelReq);
        fieldWrapper.append(fReq);
        fieldWrapper.append('<br>');
        fieldWrapper.append(labelTag);
        fieldWrapper.append(fTag);
        fieldWrapper.append('<br>');
        fieldWrapper.append(removeButton);
        $("#configField").append(fieldWrapper);
    });

    $('.remove').on('click', function() {
        $(this).parent().remove();
    });
}); 
```

### PHP：

```
<div class='fieldwrapper' id=<? echo "field".$counter ?>
    <input type='button' id='remove' class='btn remove' value='Remove'>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:14:24.157

您仅在单击“#add”后才启动删除按钮功能。通过在内部函数之外声明它，并指定“delegate('click',”，您将确保每个 .remove 元素将始终删除其父元素

```
$("#add").click(function() {

    var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"field" + intId + "\"/>");
    var removeButton = $("<input type=\"button\" id=\"remove\" class=\"btn remove\" value=\"Remove\" />");

    fieldWrapper.append(removeButton);
});

$('.remove').delegate('click', function() {
    $(this).parent().remove();
}); 
```

# javascript - 在 html 中，可以基于 ITEM 更改语言输入吗？

> ID：10475919
> 
> 赞同：4
> 
> 时间：2012-05-07T02:12:18.673
> 
> 标签：javascript, html, dom

有一个包含许多类似于此的行的用户表单：

```
<h2>Parts of Body</h2>
<div>
  English: <input name='body_en-1' />
  &nbsp;
  Thai: <input name='body_th-1' />
  &nbsp;
  Description: <input name='body_descr-1' />
  <br/>
  ...
</div> 
```

问题：杀死在两种语言之间来回切换键盘的用户——很多错误，*很多*抱怨。

有没有`INPUT.focus()`可以为用户在语言之间切换键盘的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:46:25.350

直接回答......不，你不能。
您可以做的是，您可以通过将不同的键盘布局映射到英文键盘布局来模拟另一种键盘布局。
例如，您可以将其用于北欧布局：

```
 <input name="Swedish" type="text" onkeypress="convertToNordic(event, this);" onkeyup="doBackSpace(this);" />
    <script>
function convertToNordic(evt, handle) {
    switch (String.fromCharCode(evt.which || evt.keyCode)){
        case '[' : handle.value += 'å';break;
        case ';' : handle.value += 'ö';break;
        case '\'' : handle.value += 'ä';break;
        default : handle.value += String.fromCharCode(evt.which || evt.keyCode);

    }
}
function doBackSpace(handle){
    handle.value = handle.value.substr(0,handle.value.length-1);

}
    </script> 
```

这是一个[JSFiddle](http://jsfiddle.net/7LsMk/7/)

你可以从那里开始工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:28:34.850

不，您甚至不知道某些特定的键盘布局（例如泰语的某些特定布局）是否可用和可用。在我的电脑上，有四种可用的泰语布局。我从未启用它们中的任何一个，但如果我这样做并使用了布局，那么它的布局可能与您尝试让我使用的布局不同。

用户输入字符可能具有挑战性，但您无法通过尝试设置键盘布局来解决它。如果您可以在 JavaScript 中设置布局（我认为您不能），那么当用户习惯于完全不同的布局时，您可能会严重破坏功能。

在某些情况下，屏幕键盘可以解决部分问题。例如，如果希望用户只输入一两个泰语单词，其余的都是英语，您可以嵌入一个带有泰语字符的虚拟键盘（并可能隐藏它，直到专注于泰语输入的字段）。

从技术上讲，您可以`lang`在单个元素上设置属性，例如 ，这在原则上是正确的做法，但实际上，它现在几乎没有任何影响。

# jquery - 如何使用 JQuery 水平

> ID：10475920
> 
> 赞同：2
> 
> 时间：2012-05-07T02:12:29.880
> 
> 标签：jquery

我是 jquery 的新手，正在学习。我正在阅读“掌握 JQuery”和“JQuery：忍者新手”

几天来一直在让我的网站以某种方式工作，并且经历了多次迭代，所有这些都导致了数小时的挫败感。

我正在尝试建立一个水平站点，该站点不仅隐藏水平滚动，而且即使用户试图增加字体大小也完全转储它。

这是我喜欢、喜欢、喜欢网站看起来像[INSPIRATION SITE的主要例子](http://www.secondstory.com/studio/expertise)

我将如何在我的网站上执行此操作（下面的链接）？

对于我的生活，我无法让我的网站在[这里](http://universalpartnership.org)执行此操作。几周来一直在搜索支持论坛，试图获得一些支持和建议，但到目前为止非常不成功。到目前为止，大部分开发都来自研究、谷歌搜索、阅读和纯粹的实验。

我想做两件主要的事情：1.使整个网站成为固定宽度或自动 100%（理想情况下就像我网站上的导航栏）和 2.我怎样才能使每个部分成为一个页面，这样导航跳转会更顺畅喜欢灵感网站？

如果能获得一些关于如何使用 Jquery 实现这一目标的支持、建议和/或指导，那就太好了。什么插件最好？还有其他我可能会忽略的东西。

我附上了html。我知道，这很丑陋，还有一切，还有一些就编码而言，所以请原谅我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:06:03.933

jScrollPane

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

Best of luck.

# c++ - 使用简单代码的意外运行时错误

> ID：10475921
> 
> 赞同：0
> 
> 时间：2012-05-07T02:12:31.170
> 
> 标签：c++

谁能告诉我为什么下面给出的代码会出现意外的运行时错误。它适用于两次迭代，但不止于此。

```
#include<iostream>
#include<fstream>
#include<string>

using namespace std;
void print(string hmm)
{
         ofstream ko(hmm.c_str(),ios::trunc);
         ko<<"chacho";
         ko.close();
}

int main(){
for(int i=0;i<5;i++)
{
        char *chat=new char;
        sprintf(chat,"%d%s",i,"_num.txt");
        string rat=chat;

        print(rat);
}

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T02:14:27.573

```
char *chat=new char; 
```

这仅分配一个字符。您的 sprintf 正在耗尽此缓冲区。

您也不会删除此分配，从而导致泄漏。

# c# - 不支持图像的给定路径格式

> ID：10475931
> 
> 赞同：2
> 
> 时间：2012-05-07T02:15:00.927
> 
> 标签：c#, image, image-processing, format, save

我有一个保存图像的程序，但是当我调试它时，我得到了这个错误：

> 不支持给定路径的格式。

我想知道为什么不支持它，以及如何解决这个问题。提前致谢

## 我的代码

```
BitmapSource image = BitmapSource.Create(colorFrame.Width, colorFrame.Height, 
                     96, 96, PixelFormats.Bgr32, null, pixels, stride);

ImageFormat format = ImageFormat.Jpeg;

string file_name = "C:\\Kinected\\Images\\Kinect" + bb1 + ".jpg";

image.Save(file_name, format); 
```

### 编辑

我已经添加了代码，它可以正确编译，但文件永远不会保存。这是代码：

```
string mypath = System.IO.Path.Combine(@"C:\", "Kinected", "Images");
if (!Directory.Exists(mypath))
  {
       Directory.CreateDirectory(mypath);
       file_name = System.IO.Path.Combine(mypath, "Kinect 1" + bb1 + ".jpeg");
  }

if (file_name == null)
 {
       return;
 }

if (!Directory.Exists(file_name))
 {
        Directory.CreateDirectory(file_name);
 } 
```

### 编辑

我已经添加了以下所有代码，但仍然`The given path's format is not supported.`出现错误。再次感谢。

```
BitmapSource image = BitmapSource.Create(
                colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels, stride);

            totalFrames = colorFrame.FrameNumber;
            ImageFormat format = ImageFormat.Jpeg;                

            if (PersonDetected == true)
            {
                if (!Directory.Exists(mypath))
                {
                    Directory.CreateDirectory(mypath);
                    file_name = "C:\\Kinected\\Images\\Kinect 1 " + bb1 + ".jpeg";
                }
                if (file_name == null || mypath == null || image == null)
                {
                    if (mypath == null)
                    {
                        mypath = System.IO.Path.Combine("D:/", "Kinected", "Images");

                        if (!Directory.Exists(mypath))
                        {
                            Directory.CreateDirectory(mypath);
                        }
                    }

                    if (file_name == null)
                    {
                        file_name = "D:\\Kinected\\Images\\Kinect " + bb1 + ".jpeg";
                    }

                    if (image == null)
                    {
                        image = BitmapSource.Create(
                                     colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels, stride);
                    }
                }

                if (totalFrames % 10 == 0)
                {
                    if (file_name != null && image != null && format != null)
                    {
                        image.Save(file_name, format);//where I get the error
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:17:56.583

总是让路径像

```
string mypath = Path.Combine(@"C:\", "Kinected", "Images"); 
```

产生这个问题的地方很多。

**1\. 确保创建路径。**

```
if(!Directory.Exists(mypath))
    Directory.CreateDirectory(mypath); 
```

**2\. 可能目录已经创建，但是你没有C:的权限。将 C: 更改为 D:**

```
string file_name = Path.Combine(@"D:\", "Kinect" + bb1 + ".jpg"); 
```

现在检查它是否在那里创建。

阅读有关此[保存方法](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T02:16:12.333

尝试使用文件名：

```
string file_name = "c:\\example\\path\\afile.jpg"; 
```

# php - 显示缩略图的代码

> ID：10475938
> 
> 赞同：-2
> 
> 时间：2012-05-07T02:16:02.000
> 
> 标签：php, javascript, html

我有一个简单的 PHP 脚本，使用户能够在服务器上上传图像。我在帮助将这些图像显示为 HTMl 页面中的缩略图，然后让用户单击这些缩略图，然后原始图片显示在新页面中。

我可以为此使用直接的 HTML 吗？还是我需要一些 javascript 或 PHP 变体的组合？

我知道在stackoverflow上有很多关于这个的问题，我已经尝试过了，但没有什么是我所追求的。

我宁愿在“飞行”时创建缩略图，而不是在用户上传图像时亲自创建每个缩略图。

那么基本上我应该使用什么语言来做到这一点？如果可能的话，我也可以有一些源代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:25:44.083

每次请求缩略图时都创建缩略图是一个非常糟糕的主意 - 这需要*大量*的处理能力，如果在第一次创建缩略图时将它们保留在身边，很容易节省。我建议将缩略图创建放在处理文件上传的 php 脚本中，以便您将图像及其缩略图同时保存到磁盘。您也可以将缩略图保存在内存中，或者等到第一次请求创建它，但无论哪种方式，您都无法在每次请求时重新生成它。

通过简单地设置宽度和/或高度属性，可以使用 html 来更改图像的大小：

```
<img src='foo.jpg' alt='foo' width='500' height='300'/> 
```

但是，如果您不确定用户稍后是否想要查看完整尺寸的图像，则这是一个坏主意。原因是缩略图的文件大小比完整图像小：如果客户只想查看缩略图，那么您不想浪费带宽（= 您的金钱和客户的时间）向他们发送完整图像。

至于你的界面，你不需要 javascript 来完成它，只需要 html。但是，您将需要一个服务器端脚本来创建您的 html 页面链接到的缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:41:56.923

那里有很多 php 缩略图脚本。

您要么使用重写器来显示原始路径，但服务器提供 php 缩略图版本。或者您必须将网址更改为：

```
<img src="thumb.php?file=path/to/picture.jpg&size=128" /> 
```

[强大的东西](http://mightystuff.net/php-thumbnail-script)

[phpThumb](http://phpthumb.sourceforge.net/)

就这么两个。最好配置为使用缓存文件夹。我在工作中使用了第一个脚本的修改版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:46:25.727

这是一个 PHP 脚本，您可以构建 appon 仅适用于 jpg 图像。

它将扫描一个目录，将图像标准化为合适的尺寸，并即时制作拇指，然后在下一次刷新时，它不需要重新处理图像，因为它已经存在于拇指目录中。希望能帮助到你...

脚本放置

```
Root>
    thisscript.php
    /images/
           someimage.jpg
           someimage2.jpg 
```

这个脚本.php

```
<?php
// config section
$path = "./images/";
$thpath = $path."thumbs/";
// end configration

// Open the directory
$do = dir($path);
// now check if the thumb dir is available if not, create it!!
if (!is_dir($thpath)){
    mkdir($thpath);
}

$output = '<div>';
while (($file = $do->read()) !== false){
    if (is_dir($path.$file)){
        continue;
    }else{
        $info = pathinfo($path.$file);
        $fileext = $info['extension'];
        if (strtolower($fileext) == 'jpg'){
            if (!is_file($thpath.$file)){           
                //Normalize Super lrg Image to 750x550          
                thumb_it($path, $file, $path,750,550,99);
                //Make Thumb 200x125
                thumb_it($path, $file, $thpath,200,125,99);

                $output .='<p><a href="'.$path.$file.'"><img src="'.$thpath.$file.'" title="" alt="" /></a></p>';
            }else{

                $output .='<p><a href="'.$path.$file.'"><img src="'.$thpath.$file.'" title="" alt="" /></a></p>';
            }
        }
    }
}
$output .='</div>';

echo $output;

//Functions
function thumb_it($dirn, $file, $thumbdir,$rwidth,$rheight,$quality){
    set_time_limit(0);

    $filename = $dirn.$file;
    $thfilename = $thumbdir.preg_replace('/[^a-zA-Z0-9.-]/s', '_', $file);
    // get the filename and the thumbernail directory
    if (is_file($filename)){
        // create the thumbernail from the original picture
        $im = @ImageCreateFromJPEG($filename);
        if($im==false){return false;}
        $width = ImageSx($im); // Original picture width is stored
        $height = ImageSy($im); // Original picture height is stored

        if (($width < $rwidth) && ($height < $rheight)){
            $n_height = $height;
            $n_width = $width;
        }else{
            // saveing the aspect ratio
            $aspect_x = $width / $rwidth;
            $aspect_y = $height / $rheight;

            if ($aspect_x > $aspect_y){
                $n_width = $rwidth;
                $n_height = $height / $aspect_x;

            }else{
                $n_height = $rheight;
                $n_width = $width / $aspect_y;
            }
        }

        $newimage = imagecreatetruecolor($n_width, $n_height);
        // resizing the picture
        imageCopyResized($newimage, $im, 0, 0, 0, 0, $n_width, $n_height, $width, $height);
        // writing to file the thumbnail
        if(file_exists($thfilename)){chmod($thfilename, 0777);}
        Imagejpeg($newimage, $thfilename, $quality);
        imagedestroy($newimage);
        imagedestroy($im);
    }
}
?> 
```

# svn - 为什么我不能将我的目录添加到颠覆？

> ID：10475942
> 
> 赞同：1
> 
> 时间：2012-05-07T02:16:22.613
> 
> 标签：svn

```
svn status 
```

给出以下

```
?       services 
```

但是我然后得到

```
svn add services
svn: warning: 'services' is already under version control 
```

svn commit 什么都不做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:19:19.123

在您签出当前工作目录后，其他人很有可能将此文件/文件夹添加到 Subversion 存储库中，而您的本地工作区中还没有它。

*   `svn ls`在您签出的 URL 上执行 a，而不是在您的工作目录中的文件上执行。查看 Subversion 中是否有`services`目录或文件。

这是一个例子：

```
$ svn co http://server/src/myproject    # Did a while ago
$ cd myproject
[...]
$ svn add services
svn: warning: 'services' is already under version control
$ svn ls http://server/src/myproject   # See what's in the repository
[...]
services   <--- Yup, someone added it to the repository already
[...]
$ svn log http://server/src/myproject/services    #See who added it and why 
```

*   将`services`目录/文件移到工作区中。（将其重命名为`services.mine`或类似的名称即可），然后执行 a`svn update`并查看服务文件夹是否突然出现在您的工作目录中。可能会出现另一个`services`文件/目录。

# c# - jQuery AJAX JSON 引用格式转 WCF

> ID：10475944
> 
> 赞同：2
> 
> 时间：2012-05-07T02:16:43.303
> 
> 标签：c#, jquery, asp.net, ajax, json

这是我的示例代码：

```
var postData = '{"studentId":"' + $("#hidId").val() + '"}';
$.ajax({
   type: 'POST',
   url: 'SomeService.svc/AddId',
   data: postData,
   contentType: 'application/json; charset=utf-8',
   dataType: 'json',
   success: function (msg) {
      //do something...
   }
}); 
```

我希望postData的引号保持原样（参数周围有双引号，单代码对我不起作用），但是当浏览器运行它时，所有单引号都变成双引号，双引号保持原样，它变成这样：

`"{"studentId":"ST001"}"`

我需要这种格式的字符串：

`'{"studentId":"ST001"}'`

有谁知道如何克服这个问题？

更新：自己整理出来，问题出在我提交回来的数据值上，'studentId'应该是Guid，以便与WCF服务参数类型匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:20:55.300

使用转义字符 \

```
var postData = '{"studentId":\'' + $("#hidId").val() + '\'}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:03:53.607

```
var postData = {};
postData.studentId = $("#hidId").val(); 
```

...

```
data: JSON.stringify(postData), 
```

# avr - AVR Dragon & Arduino (mega1280) 无法进入编程模式

> ID：10475945
> 
> 赞同：3
> 
> 时间：2012-05-07T02:17:07.050
> 
> 标签：avr, avrdude

我最近购买了一个带有 atmega1280 的 Arduino。我没有让它使用 Arduino IDE，而只是作为与 AVR Studio 和我的 Dragon 一起使用的方便板。

我大约在同一时间购买了一台新电脑，它运行的是 windows 7 64bit，我下载了 AVR Studio 5.1 并插入了我的 Dragon。我升级到最新的固件，因为它迫使你这样做。然后我将 Dragon 连接到 Arduino 并收到以下错误：

`[ERROR] Failed to enter programming mode. ispEnterProgMode: Error status received: Got 0xc0, expected 0x00, ModuleName: TCF (TCF command: Device:startSession failed.)`

我已经验证了带状电缆的引脚分配在两端是相同的并且具有连续性。引脚 1 转到引脚 1，依此类推。AVR Studio 可以读取感应线上的 5.0V，仅此而已。

然后我安装了 libusb-win (1.6.2.0) 并使用 avrdude 得到一个更具描述性的错误： [pasebin 输出](http://pastebin.com/Q0aPzMja)

我试图用 ISP 和 JTAG 连接在面包板上连接 atmega8 和 atmega128，我得到了与上述相同的错误，但它会产生更多错误，因为因此对 PCB 到 PCB 的连接问题进行故障排除以消除我可能遇到的任何错误接线。

知道从哪里开始寻找问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:30:44.110

一件事是 JTAG 接头上的电源，另一件事是实际芯片上的电源。你能尝试检查从 AVR 到 JTAG 引脚的连接吗？以我的经验，即使您认为它是完美的，几乎总是存在接线不良的情况。如果不是这种情况，则 AVR 没有通电。

您是在尝试 ISP 还是 JTAG 或两者兼而有之？AVR 是否支持 JTAG？它是从 JTAG 连接器中提取的 ISP 吗？

[Atmel 的 JTAGICE mkII 文档](http://www.atmel.com/Images/doc2562.pdf)解释了很多 ISP 和 JTAG。我最近刚刚构建了一个带有 JTAG 连接的板（http://www.avrfreaks.net/modules/PNphpBB2/files/display_105.png），它可能描述了如何连接你的 JTAG，我知道这是有效的；）

# memory - g++ - 终端内存分配

> ID：10475947
> 
> 赞同：0
> 
> 时间：2012-05-07T02:17:17.270
> 
> 标签：memory, ubuntu, terminal, g++

我已经编译并且目前正在使用 g++ 运行一个程序。我预计这需要一段时间才能运行，但我希望我能够加快速度。我目前正在使用 Ubuntu。检查系统监视器，我找到了运行程序的终端。虽然它确实使用了一大块内存，但可用的内存要多得多。是否有某种终端命令或允许我为程序分配更多内存以便它运行得更快的东西？还是 g++ 的命令？或者只是在 C++ 代码中添加一些东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:20:29.560

给程序更多的内存不会让它运行得更快；它会根据需要向操作系统请求更多内存。您正在考虑具有垃圾收集的语言的行为，例如 Java。普通的 C++ 程序不包括垃圾收集器，因此在使用更大的堆时不会运行得更快。

# url - 你如何制作像 movies.netflix.com 这样的网址

> ID：10475948
> 
> 赞同：1
> 
> 时间：2012-05-07T02:17:35.733
> 
> 标签：url, iis, subdomain

有一个 www.netflix.com。但是，一旦您登录，您就可以在 movies.netflix.com 中浏览电影。

我知道 netflix 是基于 Apache 构建的。但是我如何在 IIS 中拥有这样的 url？我该怎么做才能拥有 www.mysite.com，然后将 support.mysite.com 作为该站点的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:23:03.473

这是需要设置的 DNS 记录。然后，只需将您的服务器配置为像处理任何其他主机名一样处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:21:27.160

它称为子域。IIS 的控制面板上应该有一个页面。只需创建一个并选择放置它的目录。如果你在那个目录下放一个 index.php，当有人访问 support.mysite.com 时，它会显示 index.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:21:30.590

有很多方法，但最简单的方法是使用网页重定向（当您登陆一个页面时，它会自动将您重定向到另一个网页），或者让您单击一个链接，将您带到不同的主机名。

在您在问题中给出的示例中，一种方法可能是将您的“支持”导航菜单选项（按钮、下拉菜单等）链接到“support.mysite.com”。

# android - 为什么 Google Play 商店说我的 Android 应用与我自己的设备不兼容？

> ID：10475954
> 
> 赞同：96
> 
> 时间：2012-05-07T02:18:50.897
> 
> 标签：android, google-play

我很犹豫要不要问这个问题，因为看起来[很多人都有类似的问题](https://www.google.co.nz/webhp?sourceid=chrome-instant&ix=sea&ie=UTF-8#hl=en&safe=off&output=search&sclient=psy-ab&q=android%20%22This%20app%20is%20incompatible%20with%22%20site%3Astackoverflow.com&oq=&aq=&aqi=&aql=&gs_l=&pbx=1&fp=1&ix=sea&biw=1050&bih=675&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&cad=b)，但我没有找到解决我的特定实例的解决方案。

我开发了一个 Android 应用程序（[链接到实际应用程序](https://play.google.com/store/apps/details?id=com.hewgill.android.nzsldict)）并将其上传到 Play 商店。Play商店说

`"This app is incompatible with your XT Mobile Network HTC HTC Wildfire S A510b."`

当然那是我开发应用程序的手机，所以它*应该*是兼容的。其他设备有人说兼容，也有人说不兼容，但我找不到趋势。（显然我不认识很多使用 Android 设备的人。）

我尝试了以下方法：

*   [按照这个答案](https://stackoverflow.com/a/7358228/893)`res/raw`的建议，将一个大文件移出目录。里面唯一的文件是一个约 700 kB 的文本文件，但我把它移到了那里，没有明显的变化。`assets/`

*   添加以下两个功能断言：

    ```
    <uses-feature android:name="android.hardware.faketouch" />
    <uses-feature android:name="android.hardware.touchscreen" android:required="false" /> 
    ```

    认为也许我的手机没有声称支持通常的`android.hardware.touchscreen`功能，但同样没有明显的变化。

将 APK 上传到 Play 商店时，它报告为活动的唯一过滤器是该`android.hardware.faketouch`功能。

以下是 的输出`aapt dump badging bin/NZSLDict-release.apk`：

```
package: name='com.hewgill.android.nzsldict' versionCode='3' versionName='1.0.2'
sdkVersion:'4'
targetSdkVersion:'4'
uses-feature:'android.hardware.faketouch'
uses-feature-not-required:'android.hardware.touchscreen'
application-label:'NZSL Dictionary'
application-icon-160:'res/drawable/icon.png'
application: label='NZSL Dictionary' icon='res/drawable/icon.png'
launchable-activity: name='com.hewgill.android.nzsldict.NZSLDictionary'  label='NZSL Dictionary' icon=''
main
other-activities
supports-screens: 'small' 'normal' 'large'
supports-any-density: 'true'
locales: '--_--'
densities: '160' 
```

为了完整起见，我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.hewgill.android.nzsldict"
      android:versionCode="3"
      android:versionName="1.0.2">
    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="4" />
    <uses-feature android:name="android.hardware.faketouch" />
    <uses-feature android:name="android.hardware.touchscreen" android:required="false" />
    <application android:label="@string/app_name"
        android:icon="@drawable/icon">
        <activity android:name="NZSLDictionary"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".WordActivity" />
        <activity android:name=".VideoActivity" />
        <activity android:name=".AboutActivity" />
    </application>
</manifest> 
```

在 Play 商店的“设备可用性”部分，我可以看到除了“G1 (trout)”和“Touch Viva (opal)”之外的所有 HTC 设备，包括 Wildfire S，都受支持，无论它们是什么。实际上我看到“Wildfire S (marvel)”和“Wildfire S A515c (marvelc)”都被列为支持，但我的“Wildfire S A510b”没有特别提及。这种子模型标识符有那么重要吗？我已经能够毫无问题地将其他几个应用程序从 Google Play 下载到我的手机上。

在这一点上我唯一*没有*做的就是在上传最新版本后等待 4-6 小时（[如此评论](https://stackoverflow.com/a/9008063/893)），看看它是否仍然说它与我的手机不兼容。但是，Play 商店页面当前显示的是 1.0.2，这是我上传的最新版本。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-09T22:05:43.760

答案似乎仅与应用程序大小有关。我创建了一个简单的“hello world”应用程序，在清单文件中没有什么特别之处，将其上传到 Play 商店，据报告它与我的设备兼容。

除了在目录中添加更多内容之外，我在此应用程序中没有进行任何更改`res/drawable`。当`.apk`大小达到大约 32 MB 时，Play 商店开始报告我的应用与我的手机不兼容。

我将尝试联系 Google 开发人员支持并要求澄清此限制的原因。

**更新**：这是谷歌开发者支持对此的回应：

> 谢谢你的注意。目前，上传到 Google Play 的应用程序的最大文件大小限制约为 50 MB。
> 
> 但是，某些设备的缓存分区可能小于 50 MB，导致用户无法下载该应用程序。例如，某些 HTC Wildfire 设备以拥有 35-40 MB 的缓存分区而闻名。如果 Google Play 能够识别没有足够大的缓存来存储应用程序的此类设备，它可能会过滤掉它，使其不显示给用户。

我最终通过将所有 PNG 文件转换为 JPG 来解决我的问题，质量损失很小。该`.apk`文件现在为 28 MB，低于 Google Play 对我的手机实施的任何阈值。

我还删除了所有的`<uses-feature>`东西，现在只有这个：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" /> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-12T01:50:17.513

我也遇到了这个问题 - 我在 Lenovo IdeaTab A2107A-F 上进行了所有开发，并且可以在其上运行开发构建，甚至可以毫无问题地发布签名的 APK（随 安装`adb install`）。一旦它以 Alpha 测试模式发布并在 Google Play 上可用，我收到“与您的设备不兼容”错误消息。

事实证明，我`AndroidManifest.xml`从教程中放入了以下内容：

```
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-permission android:name="android.permission.CAMERA" /> 
```

好吧，联想 IdeaTab A2107A-F 上没有自动对焦摄像头（我从[http://www.phonearena.com/phones/Lenovo-IdeaTab-A2107_id7611](http://www.phonearena.com/phones/Lenovo-IdeaTab-A2107_id7611)了解到，在缺点：缺少自动对焦摄像头下）。无论我是否使用该功能，Google Play 都拒绝了。删除后，我重建了我的 APK，将其上传到 Google Play，果然我的 IdeaTab 现在在兼容设备列表中。

因此，请仔细检查每一个`<uses-feature>`，如果您一直在从网络上进行一些复制粘贴，请再次检查。很可能您请求了一些您甚至没有使用的功能。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-27T17:21:45.563

在为希望从他们的应用程序中获得离线视频的客户开发应用程序时，我也遇到了这个问题。我写了一篇博文，说明为什么我工作了几个月的应用程序不会出现在我设备的 Play 商店中（[可以在此处找到帖子](http://blogmobile.itude.com/2012/10/30/application-in-google-play-store-is-incompatible-for-some-compatible-devices/)）。我发现与@Greg Hewgill 发现的相同：**某些设备上的缓存分区限制**。

我的旅程并没有在那里停止。客户希望在应用程序中包含这些视频，并且不希望降低视频质量。经过一番研究，我发现[使用扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)是我们问题的完美解决方案。

为了与 Android 社​​区分享我的知识，我在[droidconNL 2012](http://www.droidcon.nl/)上举办了一场关于扩展文件的演讲。我创建了一个演示文稿和示例代码来说明开始使用扩展文件是多么容易。对于任何想要使用扩展文件来解决此问题的人，请随时查看[包含演示文稿和示例代码的帖子](http://blogmobile.itude.com/2012/11/22/expanding-your-horizons-using-expansion-files-for-android/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-08T12:03:55.360

您可能想尝试设置 supports-screens 属性：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" >
</supports-screens> 
```

Wildfire 的屏幕很小，根据文档，该属性在所有情况下都应默认为“true”，但不同手机上的 support-screens 设置存在已知问题，所以我还是会尝试一下。

此外——正如 David 所建议的——总是针对最新版本的 Android API 进行编译和定位，除非你有充分的理由不这样做。几乎每个 2.2 之前的 SDK 都有一些严重的问题或奇怪的行为；后一个 SDK 有助于解决或掩盖其中的很多（尽管不是全部）。在准备发布时，您可以（并且应该）使用 Lint 工具检查您的应用程序是否与 API 4 保持兼容。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-25T07:23:52.877

Finlay，我在我的申请中遇到了同样的问题。我开发了 Phone Gap 应用程序， `android:minSdkVersion="7" & android:targetSdkVersion="18"`它是最新版本的 android 平台。

我使用[Google Docs发现了这个问题](https://support.google.com/googleplay/android-developer/answer/1286017)

可能的问题是我编写了一些 JS 函数，该函数`KEY-CODE`仅用于验证字母和数字，但键盘具有不同的键码，专门用于计算机键盘和移动键盘。所以这是我的问题。

我不确定我的答案是否正确，可能对上面的答案更满意，但我会尝试列出一些在我们构建应用程序时应该注意的点。我希望你能按照这个来解决此类问题。

*   `android:minSdkVersion="?"`根据您的要求使用，并且`android:targetSdkVersion="?"`应该是您的应用程序将定位的最新版本。[看更多](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

*   尝试仅添加将在您的应用程序中使用的权限，并删除所有不必要的权限。

*   按应用查看支持的屏幕

    ```
    <supports-screens 
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true"/> 
    ```

*   可能是您实现了一些无法在某些设备或选项卡中运行的服装代码或服装小部件，因此在编写长代码之前首先尝试编写一些 beta 代码并测试您的代码是否可以在所有设备上运行.

*   我希望谷歌会发布一个工具，可以在上传应用程序之前验证您的代码，并且还说由于某些特定原因我们不允许在某些设备上运行您的应用程序，因此我们可以轻松解决它。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-11-03T13:49:46.943

暗示功能要求的权限

例如，android.hardware.bluetooth 特性是在 Android 2.2（API 级别 8）中添加的，但它所指的蓝牙 API 是在 Android 2.0（API 级别 5）中添加的。因此，一些应用程序在能够通过系统声明它们需要 API 之前就能够使用 API。

为了防止这些应用程序无意中可用，Google Play 假定某些与硬件相关的权限表明默认情况下需要底层硬件功能。例如，使用蓝牙的应用程序必须在一个元素中请求 BLUETOOTH 权限——对于旧版应用程序，Google Play 假定权限声明意味着应用程序需要底层的 android.hardware.bluetooth 功能并基于该功能设置过滤.

下表列出了暗示与元素中声明的功能要求等效的权限。请注意，声明（包括任何声明的 android:required 属性）始终优先于以下权限所隐含的功能。

对于以下任何权限，您可以通过在元素中显式声明隐含特征并使用 android:required="false" 属性来禁用基于隐含特征的过滤。例如，要禁用任何基于 CAMERA 权限的过滤，您可以将此声明添加到清单文件中：

```
<uses-feature android:name="android.hardware.camera" android:required="false" />

<uses-feature android:name="android.hardware.bluetooth" android:required="false" />
<uses-feature android:name="android.hardware.location" android:required="false" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" />
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.wifi" android:required="false" /> 
```

[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-05-07T03:41:33.077

我有几个建议：

1.  首先，您似乎使用 API 4 作为目标。AFAIK，始终针对最新的 SDK 进行编译并进行相应设置是一种很好的做法`android:minSdkVersion`。

2.  考虑到这一点，请记住[API 5 中添加了](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#declared)`android:required`该属性：

> 功能声明可以包含一个`android:required=["true" | "false"]`属性（如果您针对 API 级别 5 或更高级别进行编译），它允许您指定应用程序（...）

因此，我建议您针对 SDK 15 进行编译，并将其设置`targetSdkVersion`为 15，并提供该功能。

它还在 Play 网站上显示为与我拥有的任何设备不兼容（巧合？）***姜饼******（***此处为 Galaxy Ace 和 Galaxy Y）。但它显示***与***我的 Galaxy Tab 10.1 ( ***Honeycomb*** )、Nexus S 和 Galaxy Nexus （都在***ICS***上）兼容。

这也让我感到疑惑，这是一个*非常*疯狂的猜测，但既然`android.hardware.faketouch` [是 API11+](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_FAKETOUCH)，为什么不尝试删除它来看看它是否有效？或者也许这一切都是相关的，因为您正在尝试使用API 4 中不可用`faketouch`的特性 ( ) 和属性。在这种情况下，您应该针对最新的 API 进行编译。`required`

我会先尝试，并且`faketouch`仅作为最后的手段（当然）删除要求 --- 因为它在开发时有效，我想说这只是编译的应用程序无法识别该功能的问题（由于 SDK 要求） ，从而在 Play 上留下意想不到的过滤问题。

抱歉，如果这个猜测不能回答您的问题，但是在没有实际测试的情况下很难诊断出这类问题并确定解决方案。或者至少对我来说，没有完全了解 Play 如何真正过滤应用程序的知识。

祝你好运。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-06-28T11:29:14.460

要为上述“此应用程序与您的...不兼容”问题提供额外的解决方案，让我分享我针对不同问题原因的解决方案。我尝试在低端三星 Galaxy Y (GT-S6350) 设备上安装应用程序并从 Play 商店收到此错误。为了测试各种 AndroidManifest 配置，我创建了一个帐户并按照[https://stackoverflow.com/a/5449397/372838](https://stackoverflow.com/a/5449397/372838)中所述的例程进行操作，直到我的设备出现在支持的设备列表中。

事实证明，当您使用相机权限时，很多设备变得不兼容：

`<uses-permission android:name="android.permission.CAMERA" />`

当我删除该特定权限时，该应用程序可用于 1180 台设备而不是 870 台。希望它可以帮助某人

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-22T11:29:01.347

典型的，绝望地发布这个问题后发现它；我正在寻找的工具是：

```
$ aapt dump badging <my_apk.apk> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-02-26T14:13:30.543

尽管已经有很多答案，但我认为我的答案可能会帮助一些与我有完全相同问题的人。就我而言，问题是由根据广告网络的建议添加的以下权限引起的：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

上述权限的结果是自动添加了以下功能：

```
android.hardware.LOCATION
android.hardware.location.GPS
android.hardware.location.NETWORK 
```

原因是“Google Play 试图通过检查清单文件中声明的其他元素，特别是元素来发现应用程序的隐含功能要求。” 我的两个测试设备不具备上述功能，因此应用程序与它们不兼容。删除这些权限立即解决了问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-07-17T13:53:55.147

我发现了另一种出现此问题的方法：
我的 LG 手机的原始操作系统是 Froyo (Android 2.2)，并已更新为 ICS (Android 4.0.4)。但是 Google Play 开发者控制台显示它检测到我的手机是 Froyo 设备。（由于虚假的“不兼容”，Google Play 不允许下载该应用程序，但它仍以某种方式检测到安装。）

手机的“软件”设置显示 ICS V4.0.4。手机的 Google Play 服务器信息似乎没有更新以反映设备上的 ICS 更新。应用清单 minSDK 设置为 Honeycomb (3.0)，因此 Google Play 当然会过滤掉该应用。

另外有趣的是：
该应用程序使用应用内计费 V3。第一次通过 IabHelper 允许应用通过 Google Play 服务进行购买。但是在购买之后，购买不会放入库存中，并且 IabHelper 报告没有拥有任何物品。即使 Google Play 窗口显示“购买成功”，调试消息也会显示购买结果为“购买失败”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-16T18:46:42.953

我有同样的问题。这是由于我的清单和 gradle 构建脚本中有不同的版本代码和数字造成的。我通过从清单中删除版本代码和版本号并让 gradle 处理它来解决它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-03T13:10:02.600

我也有同样的问题。我发布了一个使用 React Native 59 创建的处于测试模式的应用程序。它与某些测​​试人员不兼容。在我发现我将应用程序限制为仅适用于某些国家/地区之后，该消息不清楚为什么该应用程序不兼容。这就是问题所在，但正如我所说，信息并不清楚。在 Play Store WebApp 中，消息是：“此应用与您的设备不兼容”。在移动应用程序中显示消息“此应用程序在您的国家/地区不可用”

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-11T14:10:01.523

如果您在 2020 年来到这里，并且您认为收到错误消息的设备应该是兼容的：

> 其他几个主要应用程序也遇到了这种情况，包括 Instagram（1B+ 安装）和 Clash of Clans（100M+ 安装）。这似乎是 Google 的 Android 操作系统的问题。
> 
> 要修复“您的设备与此版本不兼容”错误消息，请尝试清除 Google Play 商店缓存，然后清除数据。接下来，重新启动 Google Play 商店并尝试再次安装该应用程序。

[ [https://support.getupside.com/hc/en-us/articles/226667067--Device-not-compatible-error-message-in-Google-Play-Store]](https://support.getupside.com/hc/en-us/articles/226667067--Device-not-compatible-error-message-in-Google-Play-Store])

以下是 Google 官方支持页面的链接，您可以链接到您的用户了解如何清除缓存： https: [//support.google.com/googleplay/answer/7513003](https://support.google.com/googleplay/answer/7513003)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-09T16:12:14.300

在 Android 中，某些权限`<uses-permission>`意味着`<uses-feature>`对应用程序的要求。

例如`<uses-permission android:name="android.permission.BLUETOOTH" />`
将暗示`<uses-feature android:name="android.hardware.bluetooth"/>`

您可以在此处查看整个列表[https://developer.android.com/guide/topics/manifest/uses-feature-element#permissions](https://developer.android.com/guide/topics/manifest/uses-feature-element#permissions)

# php - 如何解决此字符串文字错误

> ID：10475956
> 
> 赞同：0
> 
> 时间：2012-05-07T02:18:55.810
> 
> 标签：php, javascript, jquery

下面的代码给了我一个未终止的字符串文字错误，如何解决？

下面是javascript代码（QandAtable.php）。

```
$(".imageCancel").on("click", function(event) {

    var image_file_name = "<?php echo str_replace("\n", "", $image_file_name); ?>";

                  $('.upload_target').get(0).contentwindow
              $("iframe[name='upload_target']").attr("src", "javascript:'<html></html>'");

    jQuery.ajax("cancelimage.php" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _cancelimagecounter).html(data);
    });

    return stopImageUpload();

}); 
```

下面是 ajax 链接到的 imagecancel.php 脚本：

```
...

    $image_file_name = $_GET["fileImage"]["name"];

        echo "File Upload was Canceled";

            $imagecancelsql = "DELETE FROM Image 
            WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

        mysql_query($imagecancelsql); 
```

在错误控制台中，它显示为：`var image_file_name = "<br />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:37:42.720

我怀疑我的问题是否正确，但是您的代码中几乎没有问题。

当你使用 $_GET 时，我猜你做错了，`$_GET["fileImage"]["name"]`因为它的 GET 参数很简单`$_GET["fileImage"]`

但即使在这样做之前，您也应该在正确的 $_GET 参数中发送它，即

`jQuery.ajax("cancelimage.php?fileImage=" + image_file_name)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:20:40.323

试试这个，不用担心内部的双引号，它不会影响你的 javascript 字符串

```
var image_file_name = "<?php echo str_replace("\n", "", $image_file_name); ?>"; 
```

# php - 无论如何强制PHP请求完成？

> ID：10475957
> 
> 赞同：1
> 
> 时间：2012-05-07T02:18:58.937
> 
> 标签：php, request

想象一下，有人在 PHP 脚本执行时丢弃了一个 HTTP 请求（例如，脚本已经接收到所有 GET 和 POST 数据并且当前正在处理，并且用户关闭了他们的浏览器窗口）。

如何确保 PHP 在脚本完成之前一直执行，就好像客户端从未退出连接一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:20:08.967

使用`ignore_user_abort(TRUE)`.

[http://www.php.net/manual/en/function.ignore-user-abort.php](http://www.php.net/manual/en/function.ignore-user-abort.php)

您也可以[在 php.ini 中进行设置](http://www.php.net/manual/en/misc.configuration.php#ini.ignore-user-abort)。另外，如果适用，请不要忘记`set_time_limit(0)`，这样您的脚本就不会超时。

# gcc - gcc makefile 错误：“没有规则来制作目标……”

> ID：10475959
> 
> 赞同：0
> 
> 时间：2012-05-07T02:19:50.223
> 
> 标签：gcc, makefile

我正在尝试使用带有 makefile 的 GCC (linux) 来编译我的项目。我收到以下错误：

```
% make map
make: *** No rule to make target `map'.  Stop. 
```

有谁知道那会是什么？

这是生成文件：

```
CC = gcc
DEBUG_FLAG = -g
COMP_FLAG = -std=c99 -Wall -Werror -pedantic-errors -DNDEBUG 

LIB = -L. -lmtm 
MAP_OBJS = map.o
USER_OBJS = user.o
NETWORK_OBJS = network.o
ISOCIAL_OBJS = network.o user.o Isocial.o
PARSING_OBJS = user.o network.o map.o Isocial.o mtm_isocial.o

PARSING = parsing
MAP_TEST = map_example_test
ISOCIAL_TEST = Isocial_test
NETWORK_TEST = network_test
USER_TEST = user_test

TEST_PATH = ./tests/

$(PARSING) : $(PARSING_OBJS) 
    $(CC) $(DEBUG_FLAG) $(PARSING_OBJS) $(LIB) -o $@
$(MAP_TEST) : $(MAP_OBJS)
    $(CC) $(DEBUG_FLAG) $(MAP_OBJS) $(LIB) -o $@
$(ISOCIAL_TEST) : $(ISOCIAL_OBJS)
    $(CC) $(DEBUG_FLAG) $(ISOCIAL_OBJS) $(LIB) -o $@
$(USER_TEST) : &(USER_OBJS)
    $(CC) $(DEBUG_FLAG) $(USER_OBJS) $(LIB) -o $@
$(NETWORK_TEST) : $(NETWORK_OBJS)
        $(CC) $(DEBUG_FLAG) $(MAP_OBJS) $(LIB) -o $@

map.o: map.c map.h mtm_ex2.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c
isocial.o: Isocial.c user.h mtm_ex2.h set.h network.h list.h Isocial.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c
parsing.o: parsing.c Isocial.h parsing.h mtm_ex2.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c
network.o: network.c network.h set.h mtm_ex2.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c
user.o:user.c user.h set.h mtm_ex2.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c
user_test.o:  user_test.c ../test_utilities.h ../user.h ../mtm_ex2.h \
  ../set.h  
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $(TEST_PATH)$*.c
Isocial_test.o:  Isocial_test.c ../test_utilities.h ../Isocial.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c $(TEST_PATH)$*.c
map_example_test.o: map_example_test.c ../test_utilities.h ../map.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c $(TEST_PATH)$*.c
network_test.o: network_test.c ../test_utilities.h ../network.h ../set.h \
  ../mtm_ex2.h
    $(CC) -c $(DEBUG_FLAG) $(COMP_FLAG) $*.c $(TEST_PATH)$*.c

EXEC = $(PARSING) $(MAP_TEST) $(ISOCIAL_TEST $(USER_TEST) $(NETWORK_TEST)

tests : $(MAP_TEST) $(ISOCIAL_TEST) $(USER_TEST) $(NETWORK_TEST)

isocial : $(PARSING)

clean:
    rm -f $(PARSING_OBJS) $(EXEC) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:23:48.480

错误消息是正确的：我看到 的目标`map.o`，但没有目标`map`，看起来像

```
 map: map.o
    something something something 
```

有名为`parsing`、`map_example_test`、`network_test`和`Isocial_test`;的程序的目标。也许你想建造其中之一？

如果您只是键入`make`，它将构建程序`parsing`，因为这是文件中的第一个目标。

# c - 冒泡排序的指针数组

> ID：10475966
> 
> 赞同：0
> 
> 时间：2012-05-07T02:20:52.090
> 
> 标签：c, arrays, pointers, null, bubble-sort

所以我试图对一组指针进行排序，如下所示。我遇到的问题是数组包含一个空元素。我必须取消引用除 NULL 以外的所有元素，否则我当然会收到错误，但这会导致我的排序在 NULL 出现后无法正确排序任何元素。我可以为 NULL 情况创建一个特定的异常，但是有没有办法避免这种情况，并且在我仍然取消引用其他所有内容的同时将 NULL 处理为 0？现在我告诉排序忽略NULL。这只是一个占位符，因为我无法找到解决问题的方法。

```
#include <stdio.h>
#include <stdlib.h>

void arr(int ar[], int ele);

int main(){
    int a=0, b=9, x=3, p=2, *ar[]={&a, &b, &x, NULL, &p}, i=0, ele=(sizeof(ar)/sizeof(ar[0]));
    arr(ar, ele);
    printf("\n\n");
    for(;i<ele;i++){
        if(ar[i]==NULL){
            printf("");
        }else{
     printf("%i", *ar[i]);
        }
    }
}

void arr(int *ar[], int ele){
    int i=ele-1, c=0;
    for(;i>0; i--){
        for(;c<i; c++){
            if((ar[c]!=NULL && ar[c+1]!=NULL) && *ar[c]>*ar[c+1]){
                int t=*ar[c+1];
                *ar[c+1]=*ar[c];
                *ar[c]=t;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:32:17.117

改变这个

```
if((ar[c]!=NULL && ar[c+1]!=NULL) && *ar[c]>*ar[c+1]){ 
```

到

```
//If the pointer is NULL, it will have a value of 0, so the conditional will be false.
x = (ar[c]) ? *ar[c] : 0;
y = (ar[c+1]) ? *ar[c+1] : 0;
if(x > y){ 
```

添加 int x,y; 到函数的顶部。

编辑：添加了取消引用指针。哈哈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:25:13.410

你让如何

```
Int *ptNull = new int;
*ptNull = -100(the smallest); 
```

然后你首先在数组中找到那个NULL，并将它设置为ptNull。
然后您可以像数组中没有 NULL 一样进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T02:33:50.407

NULL 应该先排序还是最后排序？决定。该决定控制您的比较代码：

```
if (compare(ar[c], ar[c+1]) < 0)
{
    int t=*ar[c+1];
    *ar[c+1]=*ar[c];
    *ar[c]=t;
} 
```

在哪里：

```
static int compare(int const *v1, int const *v2)
{
    if (v1 == NULL)
        return -1;
    if (v2 == NULL)
        return +1;
    if (*v1 < *v2)
        return -1;
    if (*v1 > *v2)
        return +1;
    return 0;
} 
```

这会将 NULL 排序在任何有效值之前。

* * *

你还有一个问题：

```
void arr(int ar[], int ele); 
```

对比

```
void arr(int *ar[], int ele){ 
```

这些不是同一个签名；你的代码不应该被编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T02:35:42.737

```
 for(;c<i; c++){
        int left = ar[c] != NULL ? ar[c] : 0;
        int right = ar[c+1] != NULL ? ar[c+1] : 0;

        if (left > right){
            /* swap the pointers, not what they point to! */
            int *t = ar[c+1];
            ar[c+1] = ar[c];
            ar[c] = t;
        }
    } 
```

# javascript - 建立 D3 力有向图

> ID：10475977
> 
> 赞同：5
> 
> 时间：2012-05-07T02:21:53.413
> 
> 标签：javascript, d3.js, force-layout

致尊敬的读者。我在 javascript 方面相当新，我遇到了这个问题。我正在尝试实现这个力有向图的修改版本：

[http://mbostock.github.com/d3/ex/force.html](http://mbostock.github.com/d3/ex/force.html)

json 数据是从 php 脚本动态生成的。这个想法是将连接到一个特定节点（在 php 脚本中定义）的所有线用一种颜色着色，而所有其他的线用灰色阴影着色。我正在尝试通过将 json 文件中的源变量与 php 脚本中的变量匹配并在这样的情况下更改颜色来做到这一点：

```
 var link = svg.selectAll("line.link")
  .data(json.links)
  .enter().append("line")
  .attr("class", "link")
  .style("stroke-width", function(d) { return Math.sqrt(d.value);})
  .style("stroke-opacity", function(d) { return d.value/10;})
  .style("stroke", function(d) { 
  x = (tested == d.source) ?  return '#1f77b4' : '#707070';// <-- Attempt to change the color of the link when this is true.
  }) 
```

但是这不起作用。脚本工作正常，但如果我这样做，颜色不会改变

```
 var link = svg.selectAll("line.link")
  .data(json.links)
  .enter().append("line")
  .attr("class", "link")
  .style("stroke-width", function(d) { return Math.sqrt(d.value);})
  .style("stroke-opacity", function(d) { return d.value/10;})
  .style("stroke", function(d) { 
  return '#707070';
  }) 
```

几天来我一直盯着这个，试图弄清楚如何完成这项工作，但我被困住了。任何帮助将不胜感激！！

这是我的完整脚本

```
<script type="text/javascript">

var width = 1200,
    height = 1200;

var color = d3.scale.category20();

var tested=<?php echo $tested_source;?>; //<-- the variable from php

var svg = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("data.json", function(json) {

var force = d3.layout.force()
    .charge(-130)
    .linkDistance(function(d) { return 500-(50*d.value);})
    .size([width, height]);

  force
      .nodes(json.nodes)
      .links(json.links)
      .start();

  var link = svg.selectAll("line.link")
      .data(json.links)
      .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value);})
      .style("stroke-opacity", function(d) { return d.value/10;})
      .style("stroke", function(d) { 
      x = (tested == d.source) ?  return '#1f77b4' : '#707070'; //<-- Attempt to change the color of the link when this is true. But is is not working...  :(
      })

  var node = svg.selectAll("circle.node")
      .data(json.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 12)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

  node.append("title")
      .text(function(d) { return d.name; });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});

</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T02:46:29.050

`d.source`是一个对象，你不能`==`用来确定是否`tested`是一个相似的对象。[查看此答案以获取有关对象相等性的更多详细信息。](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)

如果你想测试`d.source`下面描述的对象的特定值，我假设你想要，你需要指定它。

这是源对象架构：（我使用[的是您指出的示例，](http://mbostock.github.com/d3/ex/force.html)因此数据来自`miserables.json`）

```
source: Object
    group: 4
    index: 75
    name: "Brujon"
    px: 865.6440689638284
    py: 751.3426708796574
    weight: 7
    x: 865.9584580575608
    y: 751.2658636251376 
```

现在，这是代码中的损坏部分：

```
x = (tested == d.source) ?  return '#1f77b4' : '#707070';// <-- Attempt to change the color of the link when this is true. 
```

它不起作用，因为退货放错了位置。您正在混合三元和`return`语句，但您没有将它们按正确的顺序排列：

```
return test ? value_if_true : value_if_false; 
```

如果你想将值分配给 x ，你可以做

```
x = test ? value_if_true : value_if_false;
return x; 
```

你应该这样做：

```
return (tested == d.source) ? '#1f77b4' : '#707070';// <-- Attempt to change the color of the link when this is true. 
```

这是一般语法，但这**不会按原样工作**您需要为您的测试选择一个值，例如：

```
return (tested === d.source.name) ? '#1f77b4' : '#707070'; 
```

此外，如果 PHP 中的变量是一个字符串，你应该这样做

```
var tested="<?php echo $tested_source;?>"; //<-- the variable from php 
```

在大多数情况下，您应该使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)将 PHP 变量映射到 javascript 变量。

最后一点，如果您使用的是 Firefox ，我建议使用[`console`](http://getfirebug.com/wiki/index.php/Console_API)与[Firebug](http://getfirebug.com/)的控制台面板相结合的功能，或者如果您使用的是基于 Chromium 的浏览器，则建议使用[Chrome Developer Tool的控制台面板。](https://developers.google.com/chrome-developer-tools/docs/overview)它可以让您更轻松地调试代码。

* * *

# 工作代码

```
var width = 960,
  height = 500;

var color = d3.scale.category20();

var force = d3.layout.force().charge(-120).linkDistance(30).size([width, height]);

var svg = d3.select("#chart").append("svg").attr("width", width).attr("height", height);

var tested = 20;

d3.json("miserables.json", function (json) {
  force.nodes(json.nodes).links(json.links).start();

  var link = svg.selectAll("line.link")
  .data(json.links)
  .enter()
  .append("line")
  .attr("class", "link")
  .style("stroke-width", function (d) {
    return Math.sqrt(d.value);
  }).style("stroke-opacity", function (d) {
    return d.value / 10;
  }).style("stroke", function (d) {
    return (tested == d.source.index) ? '#ee3322' : '#707070'; //'#1f77b4'
  });

  var node = svg.selectAll("circle.node")
  .data(json.nodes)
  .enter()
  .append("circle")
  .attr("class", "node")
  .attr("r", 5)
  .style("fill", function (d) {
    return color(d.group);
  }).call(force.drag);

  node.append("title").text(function (d) {
    return d.name;
  });

  force.on("tick", function () {
    link.attr("x1", function (d) {
      return d.source.x;
    }).attr("y1", function (d) {
      return d.source.y;
    }).attr("x2", function (d) {
      return d.target.x;
    }).attr("y2", function (d) {
      return d.target.y;
    });

    node.attr("cx", function (d) {
      return d.x;
    }).attr("cy", function (d) {
      return d.y;
    });
  });
}); 
```

# jquery - 使用 jQuery .scrollTop() 时，Safari 中的固定元素会生涩

> ID：10475980
> 
> 赞同：2
> 
> 时间：2012-05-07T02:22:43.723
> 
> 标签：jquery, css, safari, fixed, scrolltop

好的，这里是有问题的网站：http: [//abramobile.com](http://abramobile.com)

如果您向下滚动页面超过滑块区域（或单击顶部的选项卡之一），您将进入内容部分。此时，这个“返回顶部”箭头会淡入右上角。我正在使用带有 .click() 事件的 jQuery scrollTop() 将用户带回页面顶部。我也在使用 position:fixed; 让元素在滚动时保持在同一个位置。

问题出**在 Safari**中，当您单击它返回顶部时，它会随着页面向上滚动而变得生涩并闪烁进出。当您滚动回导航区域时，还有一个 fadeTo(200,0) 将向上箭头淡出。

是否有一些我可以应用的 CSS 来防止这种抖动？如果没有，是否有另一种方法来完成我想要做的事情？

谢谢！

**更新：Safari 5.0.5 中不存在 Jerkyness。有人可以在 Safari 5.1.x 中验证它吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:55:58.683

要使其在 Opera 和 Firefox 中运行：

```
$('#toTop').click(function(){
    $('body').stop().animate({
        'scrollTop': 0
    }, 400);
}); 
```

更改`$('body')`为`$('body, html')`

在 Safari（5.0.5）中对我来说并不生涩

# ruby-on-rails - 从 Devise 上的子域发送电子邮件不起作用

> ID：10475982
> 
> 赞同：2
> 
> 时间：2012-05-07T02:22:57.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在尝试将发送的设计电子邮件配置为对子域有效（默认情况下，所有链接都指向主域）。

我正在关注这个： [https ://github.com/plataformatec/devise/wiki/How-To%3A-Send-emails-from-subdomains](https://github.com/plataformatec/devise/wiki/How-To%3A-Send-emails-from-subdomains)

问题是我收到了这个错误

```
NoMethodError in Devise/passwords#create

Showing     /Users/user/Sites/site/app/views/devise/mailer/reset_password_instructions.html.haml where line #6 raised:

undefined method `subdomain' for #<User:0x007fb0019be868> 
```

我`subdomain`从视图中调用：

```
# app/views/devise/mailer/confirmation_instructions.html
%strong= link_to t('devise.confirmation_instructions.confirm_my_account'), confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :subdomain => @resource.subdomain) 
```

运行 Rails 3.2.3，设计 1.8.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:06:34.650

通过在环境配置中添加子域来解决。

```
config.action_mailer.default_url_options = { :host => "subdomain.domain.com" } 
```

# java - 如何使用 getter 的返回值，使用反射？

> ID：10475990
> 
> 赞同：1
> 
> 时间：2012-05-07T02:23:58.857
> 
> 标签：java, xml, dom, reflection

给定班级回合：

```
public class Round {

    private int roundNumber;
    private Door door1;
    private Door door2;

    public Round(int _roundNumber)
    {
        this.roundNumber = _roundNumber;
    }

    public void setRoundNumber(int _number) 
    {
        this.roundNumber = _number;
        this.door1 = null;
        this.door2 = null;
    }

    public int getRoundNumber()
    {
        return this.roundNumber;
    }
... 
```

和 Main 中的代码：

```
Round[] gameRounds;  

// manipulations on gameRounds , assume that we put some data into array gameRounds 

...
...
Object ret = null;
for (int i = 0; i < gameRounds.length; i++)
{

    Method roundFunction = Round.class.getMethod("getRoundNumber", new Class[] {});
    ret = roundFunction.invoke(gameRounds[i]);
    // need to put something here 
} 
```

我正在尝试`roundNumber`使用反射检索字段，但返回值为 Object 类型，我该如何使用它的值，即如何将其转换为`int roundNumber`？我需要将它写入一个新的 XML 文件...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:26:58.323

返回值将是一个`Integer`. 将其投射到一个`Integer`，然后让自动拆箱处理它。

# python - TCP 套接字：双重消息

> ID：10475991
> 
> 赞同：1
> 
> 时间：2012-05-07T02:24:21.227
> 
> 标签：python, sockets, double, message

我在 python 中的套接字有问题。

我有一个 TCP 服务器和客户端，它们在`while 1`循环中相互发送数据。

`struct.pack("hh", mousex, mousey)`它在 struct 模块 ( )中打包了 2 个短裤。但有时在`recv`另一台计算机上读取数据时，似乎有 2 条消息粘在一起。这是nagle的算法吗？

![在此处输入图像描述](../Images/a503718a6fae4ec964e26e9eae5f3926.png)

这里到底发生了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:49:01.017

我同意其他海报的观点，即“TCP 就是这样做的”。TCP保证您的字节以正确的顺序到达，但不保证它们到达的块的大小。我要补充一点，TCP还允许将单个发送拆分为多个recv，甚至例如拆分aabb， ccdd 转换为 aab、bcc、dd。

我整理了这个模块来处理python中的相关问题： [http://stromberg.dnsalias.org/~strombrg/bufsock.html](http://stromberg.dnsalias.org/~strombrg/bufsock.html) 它是在开源许可下，归UCI所有。它已经在 CPython 2.x、CPython 3.x、Pypy 和 Jython 上进行了测试。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:04:27.653

可以肯定的是，我必须查看实际的代码，但听起来您希望一个字节始终`send`以`n`字节的形式出现在接收器上`n`，每次。

TCP 流不是这样工作的。它是一种“流”协议，与 UDP 或[STCP](http://en.wikipedia.org/wiki/SCTP)或[RDS](http://en.wikipedia.org/wiki/Reliable_Datagram_Sockets)之类的“数据报”（面向记录）相反。

对于固定数据大小的协议（或任何可以预先预测下一个块大小的协议），您可以在流套接字上构建自己的“类似数据报的接收器”，只需`recv()`在循环中进行 ing，直到您获得准确的`n`字节：

```
def recv_n_bytes(socket, n):
    "attempt to receive exactly n bytes; return what we got"
    data = []
    while True:
        have = sum(len(x) for x in data)
        if have >= n:
            break
        want = n - have
        got = socket.recv(want)
        if got == '':
            break
    return ''.join(data) 
```

（未经测试；python 2.x 代码；不一定高效；等等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:51:43.817

You may not assume that data will become available for reading from the local socket in the same size pieces it was provided for sending at the other source end. As you have seen, this might sometimes be usually true, but by no means reliably so. Rather, what TCP guarantees is that what goes in one end will eventually come out the other, in order without anything missing *or if that cannot be achieved by means built into the protocol such as retries, then whole thing will break with an error*.

Nagle is one possible cause, but not the only one.

# javascript - 是否可以使用正则表达式解析正则表达式字符串

> ID：10475994
> 
> 赞同：5
> 
> 时间：2012-05-07T02:24:53.227
> 
> 标签：javascript, regex

只是出于好奇，是否可以使用单个正则表达式解析完全由随机但有效的正则表达式组成的字符串？

给定正则表达式字符串：

```
<[^>]*>\xA9 
```

解析为：

```
<[^>]*>
\xA9 
```

其中第一个匹配 html，第二个匹配版权符号。

[编辑：我在SO](https://stackoverflow.com/questions/9261972/regexp-parse-type-3-grammar)上发现了一个类似的问题，声称这可能是可能的。在这里，我仅指 JavaScript ECMA-262 中的正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T02:37:56.083

不，这是不可能的：正则表达式语言允许用括号表示捕获和非捕获组、环视等的表达式，其中括号必须保持平衡。甚至在理论上也不可能编写一个正则表达式来验证括号在给定字符串中是否平衡。如果没有这样做的能力，您将不知道一个正则表达式在哪里结束而另一个在哪里开始。

一般来说，正则表达式语法相对复杂。要了解它的复杂程度，请查看 Java[`Pattern`](http://www.docjar.com/html/api/java/util/regex/Pattern.java.html)类的源代码中的解析器。

# jquery - 传递json值时Jquery地图不显示点

> ID：10475996
> 
> 赞同：1
> 
> 时间：2012-05-07T02:25:10.693
> 
> 标签：jquery, json, google-maps-api-3

我正在使用一个名为 GMap2 的 jquery 地图脚本。我通过 jquery/ajax 调用我的 php 脚本并以 json 格式返回标记信息。问题是当我这样做时，地图点没有显示出来。但如果我手动添加 json 值，地图点就可以正常工作。这是我调用 gmap 代码的代码：

```
$('.shownearby').click(function () {

    $.ajax({
        cache:false,
        url:'path/to/php/script',
        dataType:'json',
        success: function(data) {

            $('#showmap').gMap(
                    {
                        latitude   : data.dlat,
                        longitude  : data.dlon,
                        address    : data.daddress,
                        maptype    : 'ROADMAP',
                        zoom       : 10,
                        markers    : data.nearby
                    }

            );

        }

    });

    return false;

}); 
```

如您所见，标记选项正在从成功传回的 json 变量数据中加载附近的值。您可以在下面看到从 data.nearby 返回的条目示例（出于示例目的，我将 lat/long/html 替换为虚拟数据）：

```
[{"latitude":"latva","longitude":"latlon","html":"htmlstuff"}] 
```

但是，当我再次传递此信息时，它不起作用，但是，如果我将上面的 json 值粘贴到标记变量旁边，它直接具有 lat/long 和 html 值，则地图点就会出现。知道问题是什么吗？

这是在 gmap2 脚本中使用多个点的示例代码：

```
$('#map_addresses').gMap({
    address: "Quito, Ecuador",
    zoom: 5,
    markers:[
        {
            latitude: -2.2014,
            longitude: -80.9763,
            html: "_latlng"
        },
        {
            address: "Guayaquil, Ecuador",
            html: "My Hometown"
        },
        {
            address: "Galapagos, Ecuador",
            html: "_address"
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:42:50.933

好的，看起来它现在可以工作了。必须将附近的标记值更新为：

```
markers : jQuery.parseJSON(data.nearby) 
```

如果有人可以验证这是正确的做法。

# html - 文本不会与 div 或段落一起换行/中断

> ID：10475999
> 
> 赞同：7
> 
> 时间：2012-05-07T02:25:21.477
> 
> 标签：html, css

我有一个菜鸟问题。`<p>`我在标签中有一长串文本（带空格） 。

绳子永远持续下去，最后不会缠绕或断裂。这是我正在做的事情：

[http://jsfiddle.net/lordzardeck/RmFkk/](http://jsfiddle.net/lordzardeck/RmFkk/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T02:28:48.473

您受到 ext-all.css 样式的影响（第 21 行）

```
.x-grid-cell-inner { white-space: nowrap; } 
```

您可能想要执行以下操作：

```
.chat-message p { white-space:normal; } 
```